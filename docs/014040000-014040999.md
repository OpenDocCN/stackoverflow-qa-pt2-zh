# StackOverflow 问答 14040000-14040999

# emacs - 检查模式是否在emacs上

> ID：14040003
> 
> 赞同：3
> 
> 时间：2012-12-26T11:32:38.350
> 
> 标签：emacs, mode

如何检查当前缓冲区中是否打开了模式？

我为 LaTeX 尝试了这个，我希望有一个 align 函数 align on `&`，但前提是我在 LaTeX 缓冲区中，而不是在 ESS 模式缓冲区中。

如何对此进行检查？我试过：

`(if (equal reftex-mode t) (message "TRUE"))`

和

`(if (equal LaTeX-mode t) (message "TRUE"))`

但是 reftex 是全局设置的，而 LaTeX 的东西根本不起作用。想法？

另外，在这些变量没有启动的情况下如何防止错误“void variable”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T12:49:23.630

针对“主要模式”变量进行测试：

```
(defun a-function()
    (if (eq major-mode 'latex-mode)
        (message "LaTeX mode is ON")
      (message "LaTeX mode is OFF"))) 
```

# java - How to extract .jar from .java files (java->class)

> ID：14040005
> 
> 赞同：0
> 
> 时间：2012-12-26T11:32:43.310
> 
> 标签：java, jar

I have got my files from my java programmer and have edited some .java files in netbeans and saved again.

How do i pack this into a JAR files that works? I am complete new into this java. All files is .java Think i needs to be .class, but how?

I tried to just put the java files into the JAR file like i do in ZIP and RAR's. But don't think this work properly. Can someone help me?

First of all, all my files is .java, i think it should be .class, but how can i convert them all to .class files?

Then i run:

```
 jar cf AvatarServer_Q.jar * 
```

But need manifest, think it because of java to class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:35:57.320

你读过任何教程吗？你可以看看：[创建jar](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

了解清单文件：[清单基础知识](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:36:36.010

这就是您所需要的： http: [//docs.oracle.com/javase/tutorial/deployment/jar/](http://docs.oracle.com/javase/tutorial/deployment/jar/)

[如何制作可执行的jar文件？](https://stackoverflow.com/questions/5258159/how-to-make-an-executable-jar-file)

# java - using programmatic transaction control in CMT bean

> ID：14040008
> 
> 赞同：1
> 
> 时间：2012-12-26T11:33:00.037
> 
> 标签：java, jakarta-ee, ejb, jboss5.x

I need to commit transactions from CMT bean by hand. There is a loop which processes multiple records and each record should be processed in its own transaction. I wanted to mark method transaction support as NOT_SUPPORTED and then control transaction from method. However I could not retrieve a `UserTransaction` instance neither from `SessionContext` neither injecting it as a JNDI resource `java:/module/UserTransaction`.

Are there any chance to process multiple records in CMT bean in their own transactions without introducing new BMT bean for such processing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:13:20.287

如果你使用 CMT，你不应该自己搞乱交易。

我建议您为需要在事务中的操作创建一个方法，将其标记为`REQUIRES_NEW`，然后从循环中调用它。

每次调用该方法时，都会暂停当前事务（如果有），并为该操作启动一个新事务。

像这样的东西：

```
@EJB
SomeEJBLocal anotherme;

public void loop() {
    for(/* something */) {
        anotherme.single();
    }
}

@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void single() {
    // do stuff
} 
```

您必须注入另一个 EJB 实例并调用 single 以便容器处理事务方面。

# php - Alert Arabic letters display garbage in chrome

> ID：14040009
> 
> 赞同：0
> 
> 时间：2012-12-26T11:33:01.410
> 
> 标签：php, javascript, google-chrome, utf-8

When I try that line:

```
 echo "<script >alert('  مشترك بالفعل!'); location.href='index.php';</script>"; 
```

in chrome it display garbage but firefox display it correctly. What's wrong with chrome?

Any help will be appreciated. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:37:27.147

> 那是因为，firefox rocksss – 完整的 PHP 新手 47 秒前

该评论可能是正确的（尽管可能是偶然的。:) Firefox 可能比 Chrome 更灵活地嗅探文档的编码。

最可能的解释是您的 HTML 文档的编码未定义，并且 PHP 源文件（存储文本的位置）存储在与您输出的编码不同的编码中。

确保 PHP 文件的编码与您输出的 HTML 文档匹配。

*   PHP源文件的编码大概可以在你的IDE中设置

*   HTML 页面的编码由`Content-type`Web 服务器发送的标头和/或`Content-type`META 标记定义。

    这个问题给出了一个完整的概述：[UTF-8 all way through](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

# php - Facebook API 中权限的致命错误

> ID：14040011
> 
> 赞同：3
> 
> 时间：2012-12-26T11:33:03.797
> 
> 标签：php, facebook, facebook-graph-api, permissions

我得到了关注`error`

```
Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. thrown in /home/.../third_party/base_facebook.php on line 1106 
```

我的功能是，

```
public function isPhotoPermission()
        {
            $facebook = new Facebook();
            $access_token = $facebook->getAccessToken();
            $permissions = $facebook->api("/me/permissions","GET",array('access_token' => $access_token));
            if( array_key_exists('user_photos', $permissions['data'][0]) ) 
            {
                return 1;
            } 
            else 
            {
                return 0;
            }
        } 
```

那条`1106`线是，

```
1105:  protected function throwAPIException($result) {
1106:    $e = new FacebookApiException($result);
1107:    switch ($e->getType()) { .... 
```

以下代码发生的错误：

```
$permissions = $facebook->api("/me/permissions","GET",array('access_token' => $access_token)); 
```

哪里有问题？感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:52:16.430

你确定你没有忘记`Facebook()`构造函数的参数吗？

```
$config = array();
$config[‘appId’] = 'YOUR_APP_ID';
$config[‘secret’] = 'YOUR_APP_SECRET';
$config[‘fileUpload’] = false; // optional

$facebook = new Facebook($config); 
```

[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

或者你是否`$facebook`在代码的其他地方初始化了你的对象？在这种情况下，您应该：

*   要么传递`$facebook`给你的`isPhotoPermission()`函数以取回它，
*   或设置`$facebook`为`global`是否在另一个函数中初始化，
*   或者如果在函数外部定义了该行（意味着它已经是），则只需删除该`$facebook = new Facebook();`行。`$facebook``global`

# php - Yii $this->redirect() is not working in action method

> ID：14040019
> 
> 赞同：2
> 
> 时间：2012-12-26T11:33:50.173
> 
> 标签：php, yii, gii

I have created one module using Giix Component. When i am performing create or update action, it renders create and update view properly. But after submitting form, it again calls same create or update method with request data and after calling save method when i set redirection using

```
$this->redirect(array('view', 'id' => $model->id)); 
```

statement. it shows blank screen.

I have also traced this issue and i found that code execution reaching till this statement but after this statement it stops execution. when i am commenting this statement action method executes its default render statement

```
$this->render('update', array('model' => $model,)); 
```

So Please help me what can be the issue with this.

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:09:27.403

尝试：

```
$this->redirect($this->createUrl('update', array('id'=>$model->id))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T10:00:24.260

确保

```
$this->render 
```

在所有 if 语句和重定向本身之前位于方法的最底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T10:45:43.407

`<?php`检查内部视图，控制器，模型文件之前或之后是否有任何空格。

我的意思是在脚本的顶部，因为它会输出空间，并使重定向不起作用而不显示错误。

我找到了这个解决了我的问题。

# c# - How to assign double inverted (") comma to string in c#?

> ID：14040020
> 
> 赞同：3
> 
> 时间：2012-12-26T11:33:56.737
> 
> 标签：c#, string, comma, double-quotes

> **Possible Duplicate:**
> [How to add doublequotes to a string that is inside a variable?](https://stackoverflow.com/questions/3905946/how-to-add-doublequotes-to-a-string-that-is-inside-a-variable)

I am trying to assign a double inverted comma to string in c# as below

```
string abc = " " "; 
```

that generate error i also tried like

```
string abc = " +"+ "; 
```

it also generates error please help me to solve this thing

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T11:36:13.217

用反斜杠转义字符串文字中的 "

```
string abc = " \" "; 
```

如果要使用“逐字”字符串文字，则可以使用双引号来转义双引号（[C# 中的 Strings](http://msdn.microsoft.com/en-us/library/vstudio/362314fe.aspx)）：

```
string abc = @" "" "; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T11:36:01.703

逃避它`\`

```
string abc = " \" "; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T11:36:13.647

```
string blah = "\""; 
```

用反斜杠转义双引号

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-26T11:36:15.790

考虑使用 a`\`来转义 " 字符。

```
string abc = "\""; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-26T11:36:40.493

像这样逃避它：

```
string abc = " \" "; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-26T11:36:59.597

您可以
`string commaString= "\"";`
在您的代码片段中使用。现在
`string newString="myString"+commaString<br/>`
将是您的新字符串
，这是 c# 引入的另一种也是最简单的方法`string testString = @" "" "`您也应该尝试这个
我认为您需要研究[c# 中的转义序列处理](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)
也可以看到[这个问题](https://stackoverflow.com/questions/13489139/how-to-write-json-string-value-in-code/13489199#13489199)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-26T11:36:51.673

尝试以下操作：

```
string abc = "\""; 
```

该`\`字符告诉 C# 编译器只使用下一个字符作为普通字符，而不是特殊字符（例如：双引号，C# 编译器认为它是一个字符串）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-26T11:37:06.790

像这样分配

字符串 abc="'"abc"'"; 字符串 abc="'"+abc+"'";

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-26T11:38:11.420

任何一个

```
 string abc = " \" "; 
```

这就像在 C 或 Java 中一样。引号符号被反斜杠转义。

或以 C# 特定方式：

```
string abc = @" "" "; 
```

报价符号输入两次。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-26T11:46:58.403

您可以在字符串中使用引号，如下所示。

`string abc = " \" ";`

# java - Fetching values of xml

> ID：14040023
> 
> 赞同：0
> 
> 时间：2012-12-26T11:34:10.010
> 
> 标签：java, xml

We are trying to fetch data for this `META` TAG - using the following XML

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/12/soap-envelope MIAL_SOAP_AIDX_Flight_Msg.xsd" xmlns:iata="http://www.iata.org/IATA/2007/00" xmlns:p="http://www.ibm.com/xmlns/transportation/airport/meta" xmlns:soap="http://www.w3.org/2001/12/soap-envelope" encodingStyle="http://www.w3.org/2001/12/soap-encoding">
    <soap:Header>
        <p:Meta>
            <p:SNDR>AODB</p:SNDR>
            <p:TMST>2011-01-10T11:00:00</p:TMST>
            <p:SEQN>25</p:SEQN>
            <p:TYPE>FLSH</p:TYPE>
            <p:SUBT>DALY</p:SUBT>
        </p:Meta>
    </soap:Header> 
```

The code is :

```
public List<Item> readConfig(String configFile) {
    List<Item> items = new ArrayList<Item>();
    try {
      // First create a new XMLInputFactory
      XMLInputFactory inputFactory = XMLInputFactory.newInstance();
      // Setup a new eventReader
      InputStream in = new FileInputStream(configFile);
      XMLEventReader eventReader = inputFactory.createXMLEventReader(in);
      // Read the XML document
      Item item = null;
      while (eventReader.hasNext()) {
          XMLEvent event = eventReader.nextEvent();
          System.out.println("in while:::");

          if (event.isStartElement()) {
              StartElement startElement = event.asStartElement();

          //added
          if (startElement.getName().getLocalPart() == (Meta)) {
              item = new Item();
 if (event.isStartElement()) {
                  if (event.asStartElement().getName().getLocalPart()
                      .equals(SUBT)) {
                    event = eventReader.nextEvent();
                    item.setSubt(event.asCharacters().getData());
                    continue;
                  }
          if (event.isEndElement()) {
          EndElement endElement = event.asEndElement();
          if (endElement.getName().getLocalPart() == (Meta)) {
            items.add(item);
          }
        } 
```

But i am not getting any output. What can i do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:41:59.880

首先阅读您的 XML 并返回文档

```
/**
 * This method reads in the xmlFile, validates it against the
 * schemaFile, and if valid, loads it into a WhitespaceFreeXMLDoc
 * and returns it, which helps because that's a much easier
 * format for us to deal with.
 * 
 * @param xmlFile Path and name of xml file to load.
 * 
 * @param schemaFile Path and name of schema file to use for validation.
 * 
 * @return A normalized Document object fully loaded with the data found
 * in the xmlFile.
 * 
 * @throws InvalidXMLFileFormatException Thrown if the xml file validation fails.
 */
public Document loadXMLDocument(String xmlFile, String xsdFile)
        throws InvalidXMLFileFormatException
{
    // FIRST VALIDATE
    boolean isValid = validateXMLDoc(xmlFile, xsdFile);
    if (!isValid)
    {
        throw new InvalidXMLFileFormatException(xmlFile, xsdFile);
    }

    // THIS IS JAVA API STUFF
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try
    {            
        // FIRST RETRIEVE AND LOAD THE FILE INTO A TREE
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document xmlDoc = db.parse(xmlFile);
        xmlDoc.getDocumentElement().normalize();

        // LET'S RETURN THE DOC
        return xmlDoc;
    }
    // THESE ARE XML-RELATED ERRORS THAT COULD HAPPEN DURING
    // LOADING AND PARSING IF THE XML FILE IS NOT WELL FORMED
    // OR IS NOW WHERE AND WHAT WE SAY IT IS
    catch(ParserConfigurationException | SAXException | IOException pce)
    {
        throw new InvalidXMLFileFormatException(xmlFile);
    }           
} 
```

然后通过传递其名称获取 META 节点

```
/**
     * This method can be used to get the node in the document
     * that is an element of type tagName. null is returned
     * if none is found.
     * 
     * @param doc The XML document to search
     * 
     * @param tagName The name of the XML element/tag to
     * search for.
     * 
     * @return The first node found named tagName. If none is
     * found in the document, null is returned.
     */
    public Node getNodeWithName(Document doc, String tagName)
    {
         // GET THE NODE FOR THE tagName ELEMENT
        NodeList nodeList = doc.getElementsByTagName(tagName);

        // IF NOT FOUND, DON'T GO ON
        if (nodeList.getLength() == 0)
        {
            return null;
        }

        // IT WAS FOUND, SO GET THE DATA
        Node node = nodeList.item(0);
        return node;
    } 
```

如果您还有其他问题，请告诉我

# java - Regular Expression in Oracle Sql

> ID：14040030
> 
> 赞同：1
> 
> 时间：2012-12-26T11:34:39.043
> 
> 标签：java, sql, regex, oracle

My following SQL is not working but when I use same regular expression in Java, it's work fine

```
SELECT * FROM tbl WHERE REGEXP_LIKE
(MESSAGE, '^(92|0)?(3[0-9]{9})\\*([0-9]{4})\\*(([0-9]{3})|1000)$') 
```

Please help what I am doing wrong.

i am comparing following string

```
03211234090*0000*75 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:42:04.077

您的搜索模式中有一个错误：`\\*`. 这应该是`\*`，因为你只需要一个`\`来逃避`*`。

```
SELECT *
FROM tbl
WHERE REGEXP_LIKE(MESSAGE, '^(92|0)?(3[0-9]{9})\*([0-9]{4})\*(([0-9]{3})|1000)$') 
```

另一个问题在于`\*(([0-9]{3})|1000)$`部分 - 字符串的最后一部分。您提供的字符串`03211234090*0000*75`不以 0-9 或“1000”之间的三位数字结尾。

`$`表示字符串必须以紧接在其前面的表达式结尾。

`\*(([0-9]{2, 3})|1000)$`如果您的业务逻辑允许，请尝试将其作为解决方案。这将允许两位或三位数字或`1000`最后一个星号之后的数字被接受并检索该行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T11:44:11.233

真正的问题应该是：它是如何在 java 中工作的？
由于字符串`03211234090*0000*75`与您的正则表达式不匹配 - las 部分（在第二个 asterix 之后需要有 3 个数字或 1000，而您只有 2 个）

# java - 简单的java正则表达式匹配和替换

> ID：14040037
> 
> 赞同：4
> 
> 时间：2012-12-26T11:35:07.813
> 
> 标签：java, regex

所以我有`myString`其中包含字符串

```
"border-bottom: solid 1px #ccc;width:8px;background:#bc0b43;float:left;height:12px" 
```

我想使用正则表达式来检查它是否包含`"width:8px" (\bwidth\s*:\s*(\d+)px)`

如果为真，则将宽度值（如上例中的 8）添加到我的 myList。

试图：

```
if (myString.contains("\\bwidth\\s*:\\s*(\\d+)px")) {
    myList.add(valueofwidth) //unsure how to select the width value using regex
} 
```

有什么帮助吗？

编辑：所以我研究了`contains`方法，发现它不允许正则表达式。`matches`将允许正则表达式，但它会寻找完整的匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T11:41:25.487

您需要为此使用[`Matcher#find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)方法。

从文档中： -

> 尝试查找与模式匹配的输入序列的下一个子序列。

然后您可以从中获取捕获的组：-

```
Matcher matcher = Pattern.compile("\\bwidth\\s*:\\s*(\\d+)px").matcher(myString);

if (matcher.find()) {
    myList.add(matcher.group(1));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T11:42:12.077

您必须使用 Matcher 和 matcher.find()：

```
Pattern pattern = Pattern.compile("(\\bwidth\\s*:\\s*(?<width>\\d+)px)");
Matcher matcher = pattern.matcher(args);
while (matcher.find()) {
    myList.add(matcher.group("width");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T11:39:31.267

您的主要问题是`contains()`不接受正则表达式，它接受文字字符串。
`matches()`另一方面*，确实*接受正则表达式参数，但必须匹配*整个*字符串才能返回 true。

接下来，一旦你有你的比赛，你可以`replaceAll()`用来提取你的目标内容：

```
if (myString.matches(".*\\bwidth\\s*:\\s*\\d+px.*")) {
    myList.add(myString.replaceAll(".*\\bwidth\\s*:\\s*(\\d+)px.*", "$1"))
} 
```

这会将整个输入字符串替换为您的原始正则表达式捕获的组 #1 的内容。

请注意，我从您的原始匹配正则表达式中删除了多余的括号，但将它们留给替换以捕获目标内容。

# java - Android: Accept all special characters in regex

> ID：14040038
> 
> 赞同：1
> 
> 时间：2012-12-26T11:35:11.720
> 
> 标签：java, android, regex, special-characters, validation

I'm validating the Edittext with regex by allowing particular characters in that i need to allow all the special characters to enter in edit text.

for allowing alpha and numbers im using the code

```
edittext.setFilters(new InputFilter[] { new PartialRegexInputFilter(
                    "[a-zA-z0-9]+") }); 
```

Like this i need to allow all special characters...

And also i try to give like this

```
edittext.setFilters(
new InputFilter[] 
    { new PartialRegexInputFilter(
        "[A-Za-z0-9!#$%&(){|}~:;<=>?@*+,./^_`-\'\" \t\r\n\f]+") 
    }
);` . 
```

But this give error for single and double quote characters...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:02:47.737

你有什么要禁止的吗？听起来您正在尝试允许所有字母数字字符*并*允许所有非字母数字（即特殊）字符。

以下正则表达式将匹配所有特殊字符：

```
[^A-Za-z0-9] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-10T20:43:09.253

不要添加每个特殊字符，而是使用`.*`. 此正则表达式匹配所有内容。

如果要从中删除某些字符，请`[^a!c]`单独使用，**不`.*`**使用, 来匹配除`a`,`!`和之外的所有内容`c`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-10T20:11:25.707

我认为您的第二种模式的问题是字符`(-)`集中间的连字符。把它移到最后：

```
[A-Za-z0-9!#$%&(){|}~:;<=>?@*+,./^_`\'\" \t\r\n\f-]+ 
```

连字符不能在中间，因为它们指定字符范围 [az] 指定 a 到 z 之间的所有小写字母。

# hibernate - unique id generation for all DB vendors

> ID：14040041
> 
> 赞同：0
> 
> 时间：2012-12-26T11:35:27.633
> 
> 标签：hibernate, jpa, annotations

I have a project which is developed using hibernate- jpa annoatation.

I have chance to create id using JPA which are AUTO, Increment, sequence and table.

Auto is working fine for all DB vendors but, it increase the id for all table together.

Ex: Table a - id is 100

table b id is 101.

c id is 102.

i wanna have ids like

For table A id should be 100 to 1000

For table B id should be 100 to 1000

for all tables also.

I don't want to create separate sequence & Table and make DB fill.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:02:45.663

AUTO 不会一起增加所有表的 ID。

这是它的作用（来自 JPA 规范）：

> AUTO 值指示持久性提供程序应为特定数据库选择适当的策略。AUTO 生成策略可能期望数据库资源存在，或者它可能会尝试创建一个。如果供应商不支持模式生成或无法在运行时创建模式资源，供应商可能会提供有关如何创建此类资源的文档。

如果您关心应该使用的策略，那么定义一个显式策略，以及该策略所需的数据库资源。

# sublimetext2 - Sublime Text 2 有 rpg 语言插件吗？

> ID：14040043
> 
> 赞同：1
> 
> 时间：2012-12-26T11:35:30.450
> 
> 标签：sublimetext2, rpgle, rpg

是否有任何插件可以在 Sublime text 2 编辑器中以突出显示的语法查看 rpg、rpgle 或数据库文件（从 as-400 服务器获得）。此外，是否有任何好的插件项目可供我修改以创建自己的插件并共享？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:53:57.407

快速的谷歌搜索足以让我相信没有这样的语言绑定可用。如果您想创建自己的，我认为[这](http://docs.sublimetext.info/en/latest/extensibility/syntaxdefs.html)将是一个不错的起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-21T16:28:16.990

我的同事 Pete Smith 为 Sublime Text 3 编写了一个简单但非常有用的[插件](https://github.com/PeteStanSmith/SublimeForRPG)，扩展了现有的 Icebreak 语言定义，尽管我会警告你它在功能上非常特定于我们的开发环境 - 我们使用[SEE/Change](http://thenon.net/seechange/)。我确信 PR 是受欢迎的！

# javascript - 使用 jquery 创建动态组合框

> ID：14040045
> 
> 赞同：2
> 
> 时间：2012-12-26T11:35:31.397
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [如何使用 jQuery 动态添加组合框](https://stackoverflow.com/questions/14044104/how-to-add-dynamically-a-combobox-using-jquery)

看，我有这个动态组合框的工作代码。

```
<html>
<div id="combos" class="styled-select">
<select id="combo1" class="combo" data-index="1">
<option></option>
<option>sss</option>
<option>aaa</option>
<option>ddd</option>
</select>
</div>

<script>
$('#combos').on('change', '.combo', function () {
        var selectedValue = $(this).val();

        if ($(this).find('option').size() > 2) {
            var newComboBox = $(this).clone();
            var thisComboBoxIndex = parseInt($(this).attr('data-index'), 2);
            var newComboBoxIndex = thisComboBoxIndex + 1;
            $('.parentCombo' + thisComboBoxIndex).remove();
            if (selectedValue !== '') 
            {
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + newComboBoxIndex);
            newComboBox.addClass('parentCombo' + thisComboBoxIndex);
            newComboBox.find('option[value="' + selectedValue + '"]').remove();
            $('#combos').append(newComboBox);
            }
        }
        });
</script>
</html> 
```

这样做是每次我之前填充组合框时都会创建一个新的组合框。

我要寻找的是，每次我之前填充组合框时，代码都会创建 2 个组合框，而不是只有一个。

我怎么能那样做？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:55:24.020

不确定这是否是您想要的，但这会添加两个组合框（在 $('#combos').append(newComboBox); 之后）：

```
var otherComboBox = $('#combo' + newComboBoxIndex).clone();
otherComboBox.attr('id', 'othercombo' + newComboBoxIndex);
$('body').append(otherComboBox); 
```

# iphone - How to remove round corners from Apple Touch Icons for website

> ID：14040046
> 
> 赞同：1
> 
> 时间：2012-12-26T11:35:38.677
> 
> 标签：iphone, html, ios, ipad, icons

Is there any way to remove the rounded corners that apple devices add to your website icon?

I used

```
<link rel="apple-touch-icon" href="touch-icon-iphone.png" /> 
```

Which acts effect and rounded corners

```
<link  rel="apple-touch-icon-precomposed" href="touch-icon-iphone.png" /> 
```

which doesn't add any effect, but still has rounded corners.

I found the above tutorial [here](http://botcrawl.com/how-to-setup-an-apple-touch-icon-for-your-website-and-individual-webpages/)

Is there any way to remove the rounded corners??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:42:33.127

您无法删除圆角效果。从您链接到的教程中：

> 默认情况下，Apple 将圆角 Apple Touch Icon。此规则适用于所有选项。

主屏幕上的所有图标，无论是来自网站还是应用程序，都带有圆角。您可以做的是关闭光泽效果，您链接到的教程向您展示了如何做。对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:57:22.873

请参阅此链接[IconsImages](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

从上面的链接中阅读名称为**App Icons**的整个主题...

当 iOS 在设备的主屏幕上显示您的应用程序图标时，它会自动添加以下视觉效果：

1.  圆角
2.  投影
3.  反光光泽（除非你阻止光泽效果）

例如，一个简单的 57 x 57 像素 iPhone 应用程序图标可能如下所示：

![在此处输入图像描述](../Images/96810a078083305c5f74ccf10f60cde8.png)

当它显示在 iPhone 主屏幕上时，iOS 会添加圆角、阴影和反射光泽。所以相同的应用程序图标看起来像这样：

![在此处输入图像描述](../Images/8c62d7e5f7838e663a26d62c6334f748.png)

# jsf-2 - Primefaces数据表onRowSelect方法导致空指针异常

> ID：14040049
> 
> 赞同：0
> 
> 时间：2012-12-26T11:35:56.867
> 
> 标签：jsf-2, primefaces, datatable, nullpointerexception

我正在使用带有 Weblogic 10.3.6 作为服务器的 Hibernate 4、Spring 3 和 JSF 2.0。我正在使用延迟加载加载我的数据表。

JSF 页面

```
 <p:dataTable id="dataTable" var="req" lazy="true" value="#{emp.lazyModel}"
                paginator="true" rows="10" 
                             selection="#{emp.selectedRequest}"
                            selectionMode="single">                         
          <p:ajax event="rowSelect" listener="#{emp.onRowSelect}" /> 
```

当我在数据表中选择一行时，我在`onRowSelect`方法中遇到空指针异常。

托管豆

```
public void onRowSelect(SelectEvent event) {
        try {

            this.setRequestNo(event.getObject().toString());            

        } catch (Exception e) {
            e.printStackTrace();                
        }

    } 
```

在 LazyEmpDataModel 我有以下方法

```
@Override
    public void setRowIndex(final int rowIndex) {
        if (rowIndex == -1 || getPageSize() == 0) {
            super.setRowIndex(-1);
        } else {
            super.setRowIndex(rowIndex % getPageSize());
        }
    }

    @Override
    public Object getRowKey(Employees emp) {
        return request.getRequestNo();
    }

@Override
    public Employees getRowData(String rowKey) {
        for (Employees emp : requestList) {
            if (emp.getEmpNo().equals(rowKey))
                return emp;
        }

        return null;
    } 
```

全栈异常

```
java.lang.NullPointerException
    at net.test.managed.bean.RequestManagedBean.onRowSelect(RequestManagedBean.java:134)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:187)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:52)
    at org.primefaces.event.SelectEvent.processListener(SelectEvent.java:40)
    at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:106)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:760)
    at javax.faces.component.UIData.broadcast(UIData.java:1071)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:301)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3730)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3696)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2273)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2179)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1490)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:05:01.840

INMO 它与您的`view scope`bean 相关，尝试使其成为会话...如果会话将有助于寻找一种与 CDI View bean 正常工作的方法

也许由于某种原因它被无效......使用打印行向您的bean添加一个post构造函数，看看它是否确实在分页/行选择时被重建

# php - 无法在 codeigniter 中自动/手动加载数据库库

> ID：14040052
> 
> 赞同：4
> 
> 时间：2012-12-26T11:36:02.827
> 
> 标签：php, windows, codeigniter

我无法在 CodeIgniter 的默认提取代码中加载数据库库

1) 通过 autoload.php

```
$autoload['libraries'] = array('database'); 
```

2）内部控制器通过

```
$this->load->library("database"); 
```

或者

```
$CI =& get_instance();
$CI->load->database(); 
```

**错误消息：**由于发生内部服务器错误，无法显示页面。

**环境：** CodeIgniter 2.1.3、IIS (ISAPI) 上的 PHP 5.2.13、MySQL (5.0.45-community-nt)、Plesk。

我已经确认用普通 PHP 编写的代码允许我访问数据库。

删除此库后，我就可以看到该页面。我能够加载其他库，如会话，以​​及我的自定义库。有什么我想念的想法吗？

这是我的数据库配置设置：

```
$active_record = TRUE;  

$db['default']['hostname'] = 'localhost';  
$db['default']['username'] = 'username';  
$db['default']['password'] = 'password';  
$db['default']['database'] = 'databasename';  
$db['default']['dbdriver'] = 'mysql';  
$db['default']['dbprefix'] = '';  
$db['default']['pconnect'] = TRUE;  
$db['default']['db_debug'] = TRUE;  
$db['default']['cache_on'] = FALSE;  
$db['default']['cachedir'] = '';  
$db['default']['char_set'] = 'utf8';  
$db['default']['dbcollat'] = 'utf8_general_ci';  
$db['default']['swap_pre'] = '';  
$db['default']['autoinit'] = TRUE;  
$db['default']['stricton'] = FALSE; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:25:54.797

无论如何，您都可以检查您的服务器日志，或者您可以通过 config.php 启用 CI 日志

转到 config.php 的第 206 行

```
/*
|--------------------------------------------------------------------------
| Error Logging Threshold
|--------------------------------------------------------------------------
|
| If you have enabled error logging, you can set an error threshold to
| determine what gets logged. Threshold options are:
| You can enable error logging by setting a threshold over zero. The
| threshold determines what gets logged. Threshold options are:
|
|   0 = Disables logging, Error logging TURNED OFF
|   1 = Error Messages (including PHP errors)
|   2 = Debug Messages
|   3 = Informational Messages
|   4 = All Messages
|
| For a live site you'll usually only enable Errors (1) to be logged otherwise
| your log files will fill up very fast.
|
*/
$config['log_threshold'] = 4; 
```

将值设置为 4 并检查`775 chmod /logs`您的文件夹中是否有目录`/application`，如果没有`create that`，CI 将自动在该目录中创建日志文件。

您将能够以这种方式检查任何 CI 错误

正如您从日志文件中报告的那样

更改，/config 目录下的 database.php 第 50 行：

```
$db['default']['pconnect'] = TRUE; 
```

至

```
$db['default']['pconnect'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:48:01.023

好的，根据日志，当我设置

`$db['default']['pconnect'] = TRUE;`

至

`$db['default']['pconnect'] = FALSE;`

数据库库已加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T15:45:49.800

我遇到了同样的问题，花了大约 5 个小时排除故障，挖掘堆栈跟踪和 mysql 日志。事实证明原因是无关的，但我在这里发帖是为了避免任何人遇到我遇到的麻烦。

我从头开始构建我的虚拟机，但我显然忘记为 php5 安装 MySQL 驱动程序。我的症状完全一样，一个空白的屏幕 - 根本没有反应。对于将来看到这个的任何人，请确保您拥有 mysql 驱动程序！30 秒修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-09T14:07:05.310

看来您没有安装 php5-mysql。在你的 EC2 或你的 VM 中，记得安装 php5-mysql

> sudo apt-get install php5-mysql

# actionscript-3 - TypeError：错误 #2007：参数 hitTestObject 必须为非空

> ID：14040054
> 
> 赞同：0
> 
> 时间：2012-12-26T11:36:10.433
> 
> 标签：actionscript-3, flash, typeerror

我在这里有个问题。我在做游戏，太空侵略者。它提示我一个错误

TypeError：错误 #2007：参数 hitTestObject 必须为非空。在 flash.display::DisplayObject/_hitTest() 在 flash.display::DisplayObject/hitTestObject() 在 Enemy/eFrame()

我希望你们中的任何人都可以帮助我。非常感谢！

```
//This is the basic skeleton that all classes must have
package{
    //we have to import certain display objects and events
    import flash.display.MovieClip;
    import flash.events.*;
    //this just means that Enemy will act like a MovieClip
    public class Enemy extends MovieClip{
        //VARIABLES
        //this will act as the root of the document
        //so we can easily reference it within the class
        private var _root:Object;
        //how quickly the enemy will move
        private var speed:int = 5;
        //this function will run every time the Bullet is added
        //to the stage
        public function Enemy(){
            //adding events to this class
            //functions that will run only when the MC is added
            addEventListener(Event.ADDED, beginClass);
            //functions that will run on enter frame
            addEventListener(Event.ENTER_FRAME, eFrame);
        }
        private function beginClass(event:Event):void{
            _root = MovieClip(root);
        }

        private function eFrame(event:Event):void{
            //moving the bullet up screen
            y += speed;
            //making the bullet be removed if it goes off stage
            if(this.y > stage.stageHeight){
                removeEventListener(Event.ENTER_FRAME, eFrame);
                _root.removeChild(this);
            }

            //checking if it is touching any bullets
            //we will have to run a for loop because there will be multiple bullets
            for(var i:int = 0;i<_root.bulletContainer.numChildren;i++){
                //numChildren is just the amount of movieclips within 
                //the bulletContainer.

                //we define a variable that will be the bullet that we are currently
                //hit testing.
                var bulletTarget:MovieClip = _root.bulletContainer.getChildAt(i);

                //now we hit test
                if(hitTestObject(bulletTarget)){
                    //remove this from the stage if it touches a bullet
                    removeEventListener(Event.ENTER_FRAME, eFrame);
                    _root.removeChild(this);
                    //also remove the bullet and its listeners
                    _root.bulletContainer.removeChild(bulletTarget);
                    bulletTarget.removeListeners();
                    //up the score
                    _root.score += 5;
                }
            }

            //hit testing with the user
            if(hitTestObject(_root.mcMain)){
                //losing the game
                _root.gameOver = true;
                _root.gotoAndStop('lose');
            }

            if(_root.gameOver){
                removeEventListener(Event.ENTER_FRAME, eFrame);
                this.parent.removeChild(this);
            }
        }
        public function removeListeners():void{
            this.removeEventListener(Event.ENTER_FRAME, eFrame);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:33:32.137

该错误意味着您已经调用`hitTestObject(null)`了您的代码，这是无效的。

从您共享的代码中，`bulletTarget`或者`_root.mcMain`可能是原因。

# c# - 响应重定向使 session_end 在全局 asax

> ID：14040055
> 
> 赞同：0
> 
> 时间：2012-12-26T11:36:11.377
> 
> 标签：c#, asp.net, asp.net-3.5, response.redirect

由于会话变为空，我感到沮丧。
当我单击保存按钮时，我将数据从后面的代码保存到数据库，如果成功，我将用户重定向到主项目页面，使用语法：

```
Response.Redirect("~/Admin/Projects.aspx?i=esc&prjName=abc",'false'); 
```

但它使我的会话无效。
它转到 Globex.asax 页面并执行`Session_End`并使所有会话为空。

我什至尝试过`Server.Transfer`，但是浏览器 url 保持不变，客户端不想要这个。即使我读到的一些地方`Server.Execute`也用于重定向，但它显示了一些错误的结果。

我可以使用`Response.Redirect`没有这个会话的空问题吗？

（在这个页面中，我正在创建文本文件来存储一些长描述，如果成功，那么我将重定向到另一个页面。）

**更新：：**

这是我的按钮点击代码

```
protected void lnkbtnAddDescription_Click(object sender, EventArgs e)
        {
            try
            {
                if ((!hidProjId.Value.ToString().Equals("") || !hidEditProjId.Value.ToString().Equals("")) && !txtDescription.Value.ToString().Equals(""))
                {
                    //ProjectDescription
                    int projId = 0;
                    if (!hidIsEdit.Value.ToString().Equals(""))
                    {
                        projId = Convert.ToInt32(hidEditProjId.Value.ToString());
                    }
                    else
                    {
                        projId = Convert.ToInt32(hidProjId.Value.ToString());
                    }

                    ProjectM proj = new ProjectM();
                    proj.LoadByKey(projId);

                    string prj = proj.ProjectName.ToString().Replace(" ", "-");

                    string strDirectoryPath = Server.MapPath("~/ProjectDescription/") + proj.ProjectId + "-" + prj;
                    if (!Directory.Exists(strDirectoryPath))
                    {
                        Directory.CreateDirectory(strDirectoryPath);

                        string filePath = strDirectoryPath + "/" + proj.ProjectId + "-" + prj + ".txt";
                        string strDescription = txtDescription.Value.ToString().Replace("<br />", "<p>");
                        createTextFile(filePath, strDescription);

                        string dbDirectoryPath = "~/ProjectDescription/" + proj.ProjectId + "-" + prj + "/" + proj.ProjectId + "-" + prj + ".txt";
                        proj.Description = dbDirectoryPath.ToString();
                        proj.IsNew = false;
                        proj.Save();

                        if (!hidIsEdit.Value.ToString().Equals(""))
                        {
                            //Server.Execute("~/SuperAdmin/Projects.aspx?i=esc&prjName=" + proj.ProjectName.ToString() + "",false);
                            Session["dsProj"] = null;
                            Session["editProjId"] = null;
                            Session["fname"] = hidFname.Value.ToString();
                            Session["UserId"] = hidUserId.Value.ToString();
                            Session["role"] = hidRole.Value.ToString();
                            Response.Redirect("~/SuperAdmin/Projects.aspx?i=esc&prjName=" + proj.ProjectName.ToString());
                        }
                        else
                        {
                            //Server.Execute("~/SuperAdmin/Projects.aspx?i=sc&prjName=" + proj.ProjectName.ToString() + "",false);
                            Session["dsProj"] = null;
                            Session["editProjId"] = null;
                            Session["fname"] = hidFname.Value.ToString();
                            Session["UserId"] = hidUserId.Value.ToString();
                            Session["role"] = hidRole.Value.ToString();
                            Response.Redirect("~/SuperAdmin/Projects.aspx?i=sc&prjName=" + proj.ProjectName.ToString());
                        }

                    }
                    else
                    {
                        Directory.Delete(strDirectoryPath, true);
                        Directory.CreateDirectory(strDirectoryPath);

                        string fileName = proj.ProjectName.ToString().Replace(" ", "-");

                        string filePath = strDirectoryPath + "/" + proj.ProjectId + "-" + fileName + ".txt";
                        string strDescription = txtDescription.Value.ToString().Replace("<br>", "<p>");
                        createTextFile(filePath, strDescription);

                        string dbDirectoryPath = "~/ProjectDescription/" + proj.ProjectId + "-" + proj.ProjectName.ToString() + "/" + proj.ProjectId + "-" + proj.ProjectName.ToString() + ".txt";
                        proj.Description = dbDirectoryPath.ToString();
                        proj.IsNew = false;
                        proj.Save();

                        if (!hidIsEdit.Value.ToString().Equals(""))
                        {
                            //Server.Execute("~/SuperAdmin/Projects.aspx?i=esc&prjName=" + proj.ProjectName.ToString() + "", false);
                            Session["dsProj"] = null;
                            Session["editProjId"] = null;
                            Session["fname"] = hidFname.Value.ToString();
                            Session["UserId"] = hidUserId.Value.ToString();
                            Session["role"] = hidRole.Value.ToString();
                            Response.Redirect("~/SuperAdmin/Projects.aspx?i=esc&prjName=" + proj.ProjectName.ToString());
                        }
                        else
                        {
                            //Server.Execute("~/SuperAdmin/Projects.aspx?i=sc&prjName=" + proj.ProjectName.ToString() + "", false);
                            Session["dsProj"] = null;
                            Session["editProjId"] = null;
                            Session["fname"] = hidFname.Value.ToString();
                            Session["UserId"] = hidUserId.Value.ToString();
                            Session["role"] = hidRole.Value.ToString();
                            Response.Redirect("~/SuperAdmin/Projects.aspx?i=sc&prjName=" + proj.ProjectName.ToString());
                        }
                    }
                }
            }
            catch (Exception)
            {

            }
        }

        private void createTextFile(string filePath, string strDescription)
        {
            try
            {   
                StreamWriter w = File.CreateText(filePath);
                w.WriteLine(strDescription);
                w.Flush();
                w.Close();
            }
            catch (Exception ex)
            {

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:40:29.287

在重定向到下一页之前，还要在按钮单击事件中分配现有会话值。

这将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:52:42.090

创建或保存文本文件时一定有问题。这可能会进行 Session_End 调用，因此您将所有值都设为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:56:22.813

希望这对您有所帮助， [ASP.NET Session 在本地回发后变为空](https://stackoverflow.com/questions/10434746/asp-net-session-becomes-null-after-postback-on-local)

这认为您的问题与某种权限拒绝有关，即`nulling`您的会话。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-20T11:08:45.780

文件夹删除、移动、重命名导致会话结束和长时间刷新

[http://www.telerik.com/community/forums/aspnet-ajax/file-explorer/folder-delete-move-rename-causes-session-end-and-long-refresh.aspx#1365780](http://www.telerik.com/community/forums/aspnet-ajax/file-explorer/folder-delete-move-rename-causes-session-end-and-long-refresh.aspx#1365780)

# php - 目录内容更改时刷新页面

> ID：14040064
> 
> 赞同：2
> 
> 时间：2012-12-26T11:36:50.987
> 
> 标签：php, javascript

我正在制作一个在线 jQuery 幻灯片，用于显示当地体育社区的最新分数。幻灯片是由 Powerpoint 演示文稿制作的图像，它们使用 Windows 程序 Autover 自动与我的 Centos6 服务器上的目录同步。

为了获得良好的用户体验，最好在更新图像时刷新页面（或显示一些分数已更新的文本并让用户刷新）。我可以设置元刷新，每 10 分钟刷新一次页面，但这不是一个理想的解决方案。

浏览其他主题我发现仅使用 Javascript 无法监控服务器目录。

我现在的想法是制作一个返回 true（已更改）或 false（未更改）的 php 脚本，并使用 javascript 每 5 分钟从幻灯片网页调用此脚本。

对于 php 脚本，我使用这些解决方案阅读了一些主题：

*   Inotify-tools（Centos 默认不安装）
*   FAM（可能已过时？）
*   制作目录的 md5 散列，并将其与之前的散列进行比较。

以上哪种解决方案是最好的方法？有人可以为我提供一个 php 示例吗？不幸的是，我的 php 技能不是那么好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:48:21.943

使用 PHP 函数**stat**可以获取目录的信息。

文件在这里： http: [//php.net/manual/en/function.stat.php](http://php.net/manual/en/function.stat.php)

例如，您可以获得修改时间和目录大小，如下所示：

**dir_stat.php**

```
<?php
$stat = stat('\path\images');
echo 'time: ' . $stat['mtime']; /* time of last modification (Unix timestamp) */
echo 'size: ' . $stat['size'];  /* size in bytes */
?> 
```

在客户端，您可以检索目录信息并以固定的时间间隔进行比较。示例代码可能与 jQuery 类似。

```
<script language="javascript">

var myVar=setInterval(function(){chekUpdate()},5*60*1000); // at 5 minutes intervals
var stat_old = "";
function chekUpdate()
{
    $("#stat").load("/path/to/dir_stat.php",function(){
        var stat_new = $("#stat").html();
        if((stat_old != "") && (stat_old != stat_new)){
            refreshSlideShow();
        }
        stat_old = stat_new;
    });
}
function refreshSlideShow()
{
    // you can refresh your slideshow here.
}
</script>
<body>
<div id="stat">
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:48:34.943

这个想法是你每 N 分钟向服务器发出一个异步请求，服务器返回目录内容（例如 JSON 数组中的文件名）：如果它们自上次更新以来发生了变化，你相应地修改你的 DOM。所以你只需要实现一个PHP服务来列出目标目录的内容并返回序列化的文件名列表。不需要哈希，也不需要 inotify。

请注意，这种设计在资源使用方面没有必要（主要是带宽，但由于传入请求的数量很大，还有 CPU），因为如果目录 365 天不更改，客户端仍然会发出大量无用的请求。资源使用显然可以通过引入所谓的服务器推送来优化：您的客户端可能会保持与服务器的长连接，并且当发生变化时，**服务器本身**会将新数据传递给所有连接的客户端。

不幸的是，由于环境支持不佳，服务器发送的事件通常不使用 PHP 开发，因此您必须切换到其他一些技术（谷歌用于彗星服务器，或支持 websocket 的服务器），这就是为什么 inotify 永远不会发挥作用的原因使用 PHP（即使它有一个 PHP 包装器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:21:36.020

不需要 ajax 调用只需更新 src 并传递一个随机查询字符串以强制浏览器重新查找服务器上的图像并在浏览器窗口上更新它们

```
 <script type='text/javascript'>
        function updateImages()
        {
             document.getElementById('img_slide1_element_id').src = 'Slide1.JPG?' + Math.random();
             document.getElementById('img_slide2_element_id').src = 'Slide2.JPG?' + Math.random();
                 window.setTimeout(function(){
                   updateImages();
                 }, 60000 * 10);
        }
        window.setTimeout(function(){
            updateImages();
        }, 60000 * 10);
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:04:29.127

这是我的尝试：

```
<?php

$filename = "plaatjes/Dia1.JPG";
$myFile = "plaatjes/timestamp";

if (file_exists($myFile)) {
    $fh = fopen($myFile, 'r');
    $theData = fread($fh, filesize($myFile));
    fclose($fh);
}
else {
    $theData = 'x'; }

if (file_exists($filename)) {
    $timestamp = date ("F d Y H:i:s.", filemtime($filename));

    if ($theData === $timestamp) {
    echo "True";
    }
    else {
            echo "False";
            $fh = fopen($myFile, 'w') or die("can't open file");
            fwrite($fh, $timestamp);
            fclose($fh);
    }
}

?> 
```

# java - JRuby/Jython 有纯解释模式吗？

> ID：14040068
> 
> 赞同：2
> 
> 时间：2012-12-26T11:37:01.027
> 
> 标签：java, security, jvm, jruby, jython

我正在一个沙箱中运行代码，该沙箱几乎不允许所有内容（反射/类加载/等）。我仍然可以运行 Rhino Javascript，因为它（在很大程度上）不做任何这些事情。然而，我能找到的关于 JRuby/Jython 的一切都指向他们的 JIT 编译器或 AOT 编译器。

这些项目是否有一个愚蠢的“我会在进行时解释 AST”模式？我很乐意接受数量级的性能打击（这不是密集的），让它在受限环境中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:30:08.140

欧海；）

看看[JRuby GitHub wiki 页面](https://github.com/jruby/jruby/wiki/ConfiguringJRuby)，我们有

```
# Set compilation mode. JIT = at runtime; FORCE = before execution.
# Options: [JIT, FORCE, OFF, OFFIR], Default: JIT.
compile.mode=JIT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T18:33:35.747

Jython 目前没有纯解释模式。有一个基于 python 字节码的开始（它可能是纯内存并避免所有 java 字节码问题），但它还不能使用。

# c# - 支持自定义标签的 ID3 库

> ID：14040071
> 
> 赞同：1
> 
> 时间：2012-12-26T11:37:06.977
> 
> 标签：c#, .net, mp3, id3

我正在寻找一个允许我将自定义标签添加到 MP3 文件的 C# 库。我试过 taglib-sharp 但不知道它是否支持这个，以及如何做。我也尝试过 csid3lib、UltraID3Lib 和 id3.net，但没有成功。

# sql - 如何在闰年查找无效日期

> ID：14040072
> 
> 赞同：3
> 
> 时间：2012-12-26T11:37:07.210
> 
> 标签：sql, sql-server

好吧，我在 sql 中有一个表，它包含带有日期的日期列，我需要在闰年找到无效日期，例如无效日期，即非闰年的 2 月 31 日或 2 月 29 日。

一个简单的查询会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T11:46:02.267

您可以使用 sql server 的 ISDATE 功能。请参考： [ISDATE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187347.aspx) , [Validate DateTime String in SQL Server 2005](https://stackoverflow.com/questions/877434/validate-datetime-string-in-sql-server-2005)

样本：

```
SELECT dt, ISDATE(dt) ValidDate
FROM(
    SELECT '31-Feb-2012' AS dt UNION
    SELECT '31-Jan-2012' AS dt 
)x 
```

`ISDATE`如果表达式是有效的日期、时间或日期时间值，则返回 1；否则为 0。

您可以使用以下方法检查现有表数据：

```
SELECT 
    date_of_birth, 
    ISDATE(date_of_birth) ValidDate 
FROM 
    YourTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:44:26.137

编辑 - 问题没有提到 DBMS，标签指定了 Ms-sql。

如果你想这样做`MySQL`：

```
mysql> SELECT DATE_ADD('2012-02-29', INTERVAL 0 DAY);
+----------------------------------------+
| DATE_ADD('2012-02-29', INTERVAL 0 DAY) |
+----------------------------------------+
| 2012-02-29                             |
+----------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT DATE_ADD('2011-02-29', INTERVAL 0 DAY);
+----------------------------------------+
| DATE_ADD('2011-02-29', INTERVAL 0 DAY) |
+----------------------------------------+
| NULL                                   |
+----------------------------------------+
1 row in set, 1 warning (0.00 sec) 
```

对于无效日期，`DATE_ADD`将返回 NULL。可能还有其他更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T22:09:53.557

闰年可以这样确定：

```
 if year modulo 400 is 0 then
    is_leap_year
else if year modulo 100 is 0 then
   not_leap_year
else if year modulo 4 is 0 then
   is_leap_year
else
   not_leap_year 
```

# c# - DeviceIOControl 函数在返回 mft 时出现异常

> ID：14040077
> 
> 赞同：1
> 
> 时间：2012-12-26T11:37:43.587
> 
> 标签：c#

我写这个类来访问volumedata。

```
class GetFiles
    {
        public void  getlist()
            {
            NTFS_VOLUME_DATA_BUFFER volumData=new NTFS_VOLUME_DATA_BUFFER();

            uint Resultsize=0;
                IntPtr hroot = GetFiles.CreateFile(@"\\.\C:\", 0,
                    pinvok.FILE_SHARE_READ | pinvok.FILE_SHARE_WRITE,
                    IntPtr.Zero,
                    pinvok.OPEN_EXISTING,
                    pinvok.FILE_FLAG_BACKUP_SEMANTICS,
                    IntPtr.Zero);

                GetFiles.DeviceIoControl(hroot,
                    pinvok.FSCTL_GET_NTFS_VOLUME_DATA,
                    IntPtr.Zero,0,
                   out volumData,(uint)Marshal.SizeOf(volumData),
                    out Resultsize,IntPtr.Zero
                    );              
         }

        public struct pinvok
        {          
            public const UInt32 FILE_SHARE_READ = 0x00000001;
            public const UInt32 FILE_SHARE_WRITE = 0x00000002;
            public const UInt32 FILE_ATTRIBUTE_DIRECTORY = 0x00000010;
            public const UInt32 OPEN_EXISTING = 3;
            public const UInt32 FILE_FLAG_BACKUP_SEMANTICS = 0x02000000;
            public const Int32 INVALID_HANDLE_VALUE = -1;
            public const UInt32 FSCTL_QUERY_USN_JOURNAL = 0x000900f4;
            public const UInt32 FSCTL_ENUM_USN_DATA = 0x000900b3;
            public const UInt32 FSCTL_CREATE_USN_JOURNAL = 0x000900e7;
            public const UInt32 FSCTL_GET_NTFS_VOLUME_DATA = 0x00090064;
        }
     [StructLayout(LayoutKind.Auto,CharSet=CharSet.Unicode)]
        public struct NTFS_VOLUME_DATA_BUFFER
        {
            public long VolumeSerialNumber;
            public long NumberSectors;
            public long TotalClusters;
            public long FreeClusters;
            public long TotalReserved;
            public uint BytesPerSector;
            public uint BytesPerCluster;
            public uint BytesPerFileRecordSegment;
            public uint ClustersPerFileRecordSegment;
            public long MftValidDataLength;
            public long MftStartLcn;
            public long Mft2StartLcn;
            public long MftZoneStart;
            public long MftZoneEnd;

        }

        [DllImport("kernel32.dll", SetLastError = true)]
            public static extern IntPtr CreateFile(string lpFileName, uint dwDesiredAccess,
                                                      uint dwShareMode, IntPtr lpSecurityAttributes,
                                                      uint dwCreationDisposition, uint dwFlagsAndAttributes,
                                                      IntPtr hTemplateFile);

        [DllImport("kernel32.dll", ExactSpelling = true, SetLastError = true, CharSet = CharSet.Auto)]
        [return: MarshalAs(UnmanagedType.Bool)]     
        public static extern bool DeviceIoControl(IntPtr hDevice,
                uint dwIoControlCode, IntPtr lpInBuffer, uint nInBufferSize,
                out NTFS_VOLUME_DATA_BUFFER lpOutBuffer, uint nOutBufferSize,
                out uint lpBytesReturned, IntPtr lpOverlapped);

    } 
```

我遇到了异常：

`Type 'AccessMFT.GetFiles+NTFS_VOLUME_DATA_BUFFER' cannot be marshaled as an unmanaged structure; no meaningful size or offset can be computed.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T15:45:57.543

根据枚举值的文档[（](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.layoutkind.aspx)`LayoutKind.Auto`强调我的）：

> 运行时自动为非托管内存中的对象成员选择适当的布局。**使用此枚举成员定义的对象不能暴露在托管代码之外。尝试这样做会产生异常**。

您可能应该`LayoutKind.Sequential`改用。

# c# - 按属性值创建实体搜索

> ID：14040081
> 
> 赞同：2
> 
> 时间：2012-12-26T11:38:00.623
> 
> 标签：c#, fluent-nhibernate

伙计们！我正在尝试对我的实体进行深度搜索。这就是想法：通过示例使用实体查找一些记录。NHibernate 为我们提供了 ID 搜索。

```
Entity entity = Session.Get<Entity>(id); 
```

但我需要验证是否存在某些实体，即使 ID 为空。就像是：

```
Entity search = new Entity("Full name from some record");
Entity entity = Session.Get<Entity>(search);
if (entity == null) {
    Console.WriteLine("This record don't exists.");
}
else {
    Console.WriteLine("This record exists!");
} 
```

我想在数据库中搜索一些实体并返回一个布尔值。如果记录存在则为 TRUE，否则为 FALSE。有没有这样的事情已经完成？如果没有，您是否知道如何实施这种情况？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:54:16.647

尝试将此作为起点：

[http://nhibernate.info/doc/nh/en/index.html#querycriteria-examples](http://nhibernate.info/doc/nh/en/index.html#querycriteria-examples)

# c++ - Dijkstra 算法：内存消耗

> ID：14040086
> 
> 赞同：7
> 
> 时间：2012-12-26T11:38:21.823
> 
> 标签：c++, algorithm, memory, memory-management, dijkstra

我有一个 Dijkstra 算法的实现，基于[这个网站](http://compprog.wordpress.com/2007/12/01/one-source-shortest-path-dijkstras-algorithm/)上的代码。基本上，我有许多节点（比如 10000 个），每个节点可以有 1 到 3 个与其他节点的连接。

节点在 3d 空间内随机生成。连接也是随机生成的，但是它总是首先尝试找到与其最近邻居的连接，然后慢慢增加搜索半径。每个连接的距离为 1。（我怀疑这是否重要，但这只是背景）。

在这种情况下，该算法仅用于查找从起点到所有其他节点的最短跳数。它适用于 10,000 个节点。我遇到的问题是，随着节点数量的增加，比如接近 200 万，我在尝试构建图表时用尽了我所有的计算机内存。

有谁知道实现算法以减少内存占用的替代方法，或者是否有另一种使用更少内存的算法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T13:35:08.893

根据您上面的评论，您用[距离矩阵](http://en.wikipedia.org/wiki/Distance_matrix) `long dist[GRAPHSIZE][GRAPHSIZE]`表示图形的边缘。这将占用`O(n^2)`内存，对于较大的`n`. 当您只有少量边时，它在执行时间方面也不是一个很好的表示：它会导致 Dijkstra 的算法花费`O(n^2)`时间（`n`节点数在哪里），而它可能会更快，具体取决于数据结构用过的。

因为在您的情况下，您说每个节​​点最多只能连接到 3 个其他节点，所以您不应该使用这个矩阵：相反，对于每个节点，您应该存储它所连接的节点的列表。然后当你想遍历一个节点的邻居时，你只需要遍历这个列表。

在某些特定情况下，您甚至不需要存储此列表，因为可以在需要时为每个节点计算它。例如，当图是一个网格并且每个节点都连接到相邻的网格节点时，很容易在运行中找到节点的邻居。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T12:03:55.350

如果您**真的负担不起内存**，即使**您的图形表示最小化**，您也可以开发**Dijkstra**算法的变体，考虑**分而治**之的方法。

这个想法是**将数据**分成小块，因此您将能够在每个块中针对其中的每个点执行 Dijkstra 算法。

对于在这些小块中生成的每个解决方案，将其视为另一个数据块的唯一节点，您将从该节点开始另一个 Dijkstra 执行。

例如，考虑以下几点：

```
.B        .C
                  .E
 .A           .D
       .F                   .G 
```

您可以选择最接近给定节点的点，例如，在两跳内，然后将解作为扩展图的一部分，将前一个点视为一组点，距离等于结果的距离迪杰斯特拉解决方案。

假设您从`D`：

*   在给定的范围内选择`closest points`to ；`D``number of hops`
*   对所选条目使用 Dijkstra 算法，从`D`;
*   将解决方案用作图，其中中心节点`D`和最短路径中的最后一个节点作为直接链接到的节点`D`；
*   扩展图，重复算法，直到所有节点都被考虑在内。

虽然这里有一个**昂贵的额外处理**，但您可以**超越内存限制**，并且，如果您有其他一些机器，您甚至可以**分配**这些进程。

请注意，这只是流程的想法，我描述的流程不一定是最好的方法。在寻找*分布式 Dijkstra 算法*时，您可能会发现一些有趣的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:49:39.867

我非常喜欢 boost::graph。它的内存消耗非常好（我在具有 1000 万个节点和 2Gb 内存的道路网络上使用过它）。

它有一个 Dijkstra 实现，但如果目标是自己实现和理解它，您仍然可以使用他们的图形表示（我建议邻接表）并将您的结果与他们的结果进行比较，以确保您的结果是正确的。

有些人提到了其他算法。我认为这不会对内存使用起很大作用，但更有可能影响速度。2M 个节点，如果拓扑接近街道网络，从一个节点到所有其他节点的运行时间将不到一秒。

[http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/index.html](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/index.html)

# node.js - 通过 node.js 服务器提供页面时压缩内容

> ID：14040090
> 
> 赞同：3
> 
> 时间：2012-12-26T11:38:41.157
> 
> 标签：node.js, dynamic, compression

我需要实现压缩以减少浏览器获取的文件的大小。我在 node.js 服务器上有从公用文件夹（JSON 和 CSV 文件）读取的页面。

当我访问页面并使用 PageSpeed 分析它们时，它建议：

使用 gzip 压缩以下资源可以减少它们的传输大小...

... localhost:3000/data/xyz.csv 可以节省 1.1MiB（减少 83%）。

我如何向客户端提供压缩文件。我是否必须事先压缩它们并将其添加到压缩文件夹中。我即时制作了一些 CSV 文件，所以我可以在运行时执行此操作。

我如何拦截对文件的请求并发送其压缩内容（仅 xyz.CSV 而不是其他）。

获取 /data/xyz.csv 200 561 毫秒

如果我不想压缩所有文件，而只压缩少数文件，则只说文件夹中的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T06:18:01.323

经过大量搜索，我找到了使用 express-zip 模块的最简单选项

[https://npmjs.org/package/express-zip](https://npmjs.org/package/express-zip)

它不需要对开发人员部分进行任何更改（压缩/解压缩文件）。就像你在快递中一样提供文件（这是我使用的）

# php - 将 EMongoCriteria 与 MongoDate 一起使用时，Mongo 不排序

> ID：14040091
> 
> 赞同：0
> 
> 时间：2012-12-26T11:38:41.763
> 
> 标签：php, mongodb, yii

我在选择我发布到我的 Mongo 收藏中的最后一个条目时遇到了一些困难。这是我的集合中的对象的示例：

```
{"category":1,"date:
{"sec":1356521350,"usec":0},"content":"Test Content","_id":
{"$id":"50dadf8639f992c83f000003"}} 
```

现在，我想对字段日期进行排序，我正在尝试使用以下功能（通过使用 Yii-MongoDB-Suite）：

```
$oCriteria = new EMongoCriteria;
$oCriteria->sort('date', EMongoCriteria::SORT_DESC);

$oOjbect = ObjectModel::model()->find($oCriteria); 
```

现在，它不是返回具有最新日期的对象，而是返回我在集合中输入的第一个对象。

我真的不知道可能出了什么问题。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T03:10:31.410

我相信您需要将 PHP 数组传递给`sort()`，所以您真正需要的是：

```
$oCriteria = new EMongoCriteria;
$oCriteria->sort(array('date', EMongoCriteria::SORT_DESC));

$oOjbect = ObjectModel::model()->find($oCriteria); 
```

# python - 从多对多关系取消引用模型

> ID：14040092
> 
> 赞同：0
> 
> 时间：2012-12-26T11:38:50.877
> 
> 标签：python, google-app-engine, many-to-many, dereference, app-engine-ndb

在我的模式中，如下面的测试数据生成示例所述，我想知道一种好方法：

取消引用所有收藏夹实例，这些实例具有对已删除图片实例的引用键。只需删除链接到已删除图片的任何收藏夹。

*   该类`Person`是用户

*   该`Picture`课程可以成为收​​藏夹

*   该类`Favourite`是具有多对多关系的链接模型方式的示例。

**为什么这么问？** 首先，我希望它不会超出这里的范围，其次是因为这可能发生，第三是因为它很有趣。

**如何？** 假设一个人可以拥有多达数千个收藏夹，例如社交网络上的点赞，或者更糟的是，科学应用程序中的订单、帐户或无效数据。在我们的示例中，由于某种原因（并且这些原因发生），一个人正在经历很多死去的最爱链接，或者我知道，有死去的最爱。

有什么好的方法可以做到这一点，**减少** `ndb.get()`操作而**不是遍历**每个收藏夹。

让事情不要复杂化。让我们假设我们**只有一个用户**的最爱。他有一个 Person 类和 '123' 的存根 user_id 属性。

在以下示例中，您可以使用以下处理程序及其相应的函数。

```
import time
import sys
import logging
import random
import cgi
import webapp2

from google.appengine.ext import ndb

class Person(ndb.Expando):
    pass

class Picture(ndb.Expando):
    pass

class Favourite(ndb.Expando):
    user_id = ndb.StringProperty(required=True)
    #picture = ndb.KeyProperty(kind=Picture, required=True)
    pass

class GenerateDataHandler(webapp2.RequestHandler):

    def get(self):
        try:
            number_of_models = abs(int(cgi.escape(self.request.get('n'))))
        except:
            number_of_models = 10
            logging.info("GET ?n=parameter not defined. Using default.")
            pass
        user_id = '123' #stub
        person = Person.query().filter(ndb.GenericProperty('user_id') == user_id).get()
        if not person:
            person  = Person()
            person.user_id = user_id #Stub
            person.put()
            logging.info("Created Person instance")
        if not self._gen_data(person, number_of_models):
            return
        self.response.write("Data generated successfully")

    def _gen_data(self, person, number_of_models):
        first, last = Picture.allocate_ids(number_of_models)
        picture_keys = [ndb.Key(Picture, id) for id in range(first, last+1)]
        pictures = [] 
        favourites = []
        for picture_key in picture_keys:
            picture = Picture(key=picture_key)
            pictures.append(picture)
            favourite = Favourite(parent=person.key,
                            user_id=person.user_id, 
                            picture=picture_key
                        )
            favourites.append(favourite)
        entities = favourites
        entities[1:1] = pictures
        ndb.put_multi(entities)
        return True

class CorruptDataHandler(webapp2.RequestHandler):

    def get(self):
        if not self._corrupt_data(0.5):#50% corruption
            return
        self.response.write("Data corruption completed successfully")

    def _corrupt_data(self, n):
        picture_keys = Picture.query().fetch(99999, keys_only=True)
        random_picture_keys = random.sample(picture_keys, int(float(len(picture_keys))*n))
        ndb.delete_multi(random_picture_keys)
        return True

class FixDataHandler(webapp2.RequestHandler):

    def get(self):
        user_id = '123' #stub
        person = Person.query().filter(ndb.GenericProperty('user_id') == user_id).get()
        self._dereference(person)

    def _dereference(self, person):
    #Here if where you implement your answer 
```

由于 NDB 数据存储中的最终一致性，单独的处理程序。更多信息： [使用后端 NDB 的 GAE put_multi() 实体](https://stackoverflow.com/questions/14205763/gae-put-multi-entities-using-backend-ndb/14215569#14215569)

当然，我也发布了一个答案，以表明我在发布之前尝试了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:11:13.750

ReferenceProperty 只是一个键，因此如果您有已删除人员的键，则可以使用它来查询收藏夹。

否则，没有简单的方法。您必须过滤所有收藏夹并找到具有无效图片的收藏夹。这在 mapreduce 作业中非常简单，但如果您有很多收藏夹，这可能是一个昂贵的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T04:05:45.953

您可以使用预删除钩子（[在此处](http://blog.notdot.net/2010/04/Pre--and-post--put-hooks-for-Datastore-models "这里")查找实现方法）当然，如果您使用 NDB API 而不是 Datastore API（[NDB 上的钩子](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model__pre_delete_hook)），这可以更容易完成，但是您必须更改你做参考的方式

# php - PHP中无法识别对象存在

> ID：14040094
> 
> 赞同：0
> 
> 时间：2012-12-26T11:38:55.147
> 
> 标签：php, mongodb, if-statement, null

我有以下脚本：

```
function canLogin($mail, $password) {
    if( isset($mail, $password) ) {
        $login = dbFind('users', array("mail" => (string)"$mail", "pass" => (string)"$password"), true);
        var_dump($login);
        if($login)
            { return (string)$login['_id']; }
            else { return false; }
    } else { return false; }
} 
```

哪个函数 dbFind 如下：

```
function dbFind($collIn, $obj, $one = false) {
    global $db;

    $collection = $db->$collIn;

    if($one == true)
        return $collection->findOne($obj);
        else return $collection->find($obj);
} 
```

现在，您可以从第一段代码中注意到，我正在使用 var_dump 查看 $login 变量的内容，然后检查它是否已设置。

当我有正确的登录名时，var_dump 从数据库返回正确的对象，否则返回 NULL。问题是在 var_dump 之后的 if 语句中总是返回 false！

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:43:48.567

尝试将`if`语句更改为：

```
if (is_array($login) &&  array_key_exists('_id', $login) && $login['_id'] instanceof MongoId)
{
    //the array_key_exists check could be omitted, but is there just in case
    return (string) $login['_id'];
} 
```

您可以省略前两项检查并使用`!empty($login['_id']) && $login['_id'] instanceof MongoId`，但这*可能会*发出警告（不确定）。
顺便说一句：尝试将您的 ini 文件设置为`E_STRICT | E_ALL`，也许这会给您一些关于出了什么问题的更多线索。

根据您在评论中发布的内容，并查看您的代码，这一行：`return (string)$login['_id'];`实际上是将对象转换为字符串。结果如下所示：

```
array(5) { ["_id"]=> object(MongoId)#8 (1) //<-- OBJECT
    { ["$id"]=> string(24) "50d19fed9cc2318521000001" } 
} 
```

而且您正在使用`(string)`演员表，~~这感觉不对~~，正如 Sammaye 指出的那样，应该可以
。顺便说一句，你投了太多：`"$foo"`投到`$foo`一个字符串，因为双引号，不需要额外的投......但这不是重点......无论如何，试试这个：

```
return $login['id']->{'$id'};//need the single quotes, the property NAME is $id, not id 
```

有关方法/属性和头痛的更多详细信息，请参阅[mongoid 类的文档...](http://php.net/manual/en/class.mongoid.php)

PS：使用getter方法可能更干净：

```
$login['_id']->getPID();//returns an int, not a string, though 
```

祝你好运，快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:43:11.693

```
If (isset($login)){
   //do what you need
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:45:57.037

```
if($login != NULL){
return (string)$login['_id'];
}else{
return false;
} 
```

我遇到了这样的问题，这很有效，而且很有效。

# ms-word - Office Mac 2011：如何创建新的 Word 文档并使用 applescript 保存？

> ID：14040096
> 
> 赞同：1
> 
> 时间：2012-12-26T11:39:00.843
> 
> 标签：ms-word, applescript

我正在尝试在 Office 2011 上为 Word 编写简单的 applescript，但没有成功。我找到了这个链接，但 Office 2011 的语法不同，谷歌在这个任务上不是我的朋友...... [http://www.mactech.com/articles/mactech/Vol.23/23.01/2301applescript/index.html](http://www.mactech.com/articles/mactech/Vol.23/23.01/2301applescript/index.html)

我想要什么：创建一个新文档，写下日期并将新文档保存在我的主文件夹中

这是我尝试过的：

```
tell application "Microsoft Word"
activate
make new document
set theDate to current date
set text of active document to theDate as text
save as active document file name "/Users/user/toto.doc"
end tell 
```

请问你能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:52:11.977

这适用于我的 Mountain Lion + MS Word 2011 ：

```
set outputPath to (path to home folder as string) & "toto.doc"

tell application "Microsoft Word"
    activate
    make new document
    set theDate to ((current date) as string)
    tell active document
        set theRange to create range start 0 end 0
        set content of theRange to theDate
    end tell
    set activeDoc to active document
    save as activeDoc file name outputPath
end tell 
```

希望这可以帮助 ！

# android - CSS有时在android webview中不起作用

> ID：14040103
> 
> 赞同：2
> 
> 时间：2012-12-26T11:39:49.050
> 
> 标签：android, css, android-webview

我正在编写一个打开本地 html 的 webview。我正在使用[这个 HTML5WebView](http://code.google.com/p/html5webview/source/browse/trunk/HTML5WebView/src/org/itri/html5webview/HTML5WebView.java)。但这对我来说还不够强大。html 中的 CSS 效果很好，但“.css”文件中的 CSS 效果不佳。
例如，“.css”文件中的“height”属性不能在html中实现。所以我必须再次在 html 中设置“height”属性才能使其工作。像这样：

# 我的css文件：

```
.header{
    width:100%;
    height:80px;    
    color:#FFF;
    font-size:20px;
}
.header_title{
    position:fixed;
    *position:absolute; 
    left:0px; 
    top:0px; 
    opacity=1;
    filter:alpha(opacity=100);
}
.header_title_btn{
    width:50%; 
    height:100%; 
    position:relative; 
    filter:alpha(opacity=100); 
    opacity=1; 
    text-align:center;
}
.lineMiddle{
    height:80px; 
    line-height:80px;
} 
```

# 我的html文件：

![在此处输入图像描述](../Images/7dc6217b057b78d8bfe7bc963340ba8b.png)

我想知道是否有一些方法可以解决这个问题，因为我有很多 html 和 CSS 文件。

# visual-studio-2010 - 使用 OpenCV 进行视频捕获的执行错误

> ID：14040104
> 
> 赞同：0
> 
> 时间：2012-12-26T11:39:53.853
> 
> 标签：visual-studio-2010, image-processing, opencv, computer-vision, video-capture

执行程序时遇到以下问题。程序在 main 函数的第 1 行异常崩溃。的路径都是正确的，那里没有错。lib-include 附加库的所有设置都已完美完成。这里有什么问题？

```
#include <cv.h>
#include <highgui.h>

int main()
{
     //load the video file to the memory
   **  CvCapture *capture =     cvCaptureFromAVI("A.avi"); ** // this instruction crashed the file is there in the folder, that not an issue....

     if( !capture ) return 1;

     //obtain the frames per seconds of that video
     int fps = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );

    //create a window with the title "Video"
    cvNamedWindow("Video");

    while(true) {
             //grab and retrieve each frames of the video sequencially 
             IplImage* frame = cvQueryFrame( capture );

             if( !frame ) break;

             //show the retrieved frame in the "Video" window
             cvShowImage( "Video", frame );

             int c; 

             if(fps!=0){  

                     //wait for 1000/fps milliseconds
                     c = cvWaitKey(1000/fps);
            }else{
                     //wait for 40 milliseconds
                      c = cvWaitKey(40);
            } 

          //exit the loop if user press "Esc" key  (ASCII value of "Esc" is 27) 
            if((char)c==27 ) break;
   }

   //destroy the opened window
   cvDestroyWindow("Video");   
   //release memory
   cvReleaseCapture( &capture );

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:57:07.747

作为一个健全的检查，让我们看看`VideoCapture`来自 OpenCV C++ API 的东西是否有效。让我们试一试：

```
#include <opencv2/opencv.hpp>
#include <cv.h>
using namespace cv;

VideoCapture capture("A.avi");
Mat matFrame;
capture >> matFrame; //each time you do this, the next video frame goes into the 'matFrame' object        
IplImage* frame=cvCloneImage(&(IplImage)matFrame); //convert Mat to IplImage to hook in with your code 
```

我在这里将 C 和 C++ OpenCV API 混合在一起，但我只是想帮助你让它运行。

# django - 在 Django 中创建表单的过程？

> ID：14040109
> 
> 赞同：0
> 
> 时间：2012-12-26T11:40:16.283
> 
> 标签：django

Django 非常灵活。简单的 html 表单可以在 Django 中使用和处理。但是在浏览 Django 文档时，我发现有很多方法可以在 Django 中编写表单。我发现最好的方法是创建一个`forms.py`然后为其创建一个模板并使用视图进行处理。这是正确的方法吗？我认为使用这种方法验证表单并在模板中使用它太容易了。但是我很困惑在这个过程中在哪里应用验证规则。我想尽可能少使用 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:55:15.163

对于验证，您可以通过

*   `validators`在使用属性定义字段时
*   通过在表单中​​实现`clean_field()`方法
*   或`clean()`用于多个字段相关验证的表单中的方法。

`form.is_valid()`当您在处理表单的视图中调用方法时，将完成验证。

这是更详细的文档。[表单和字段验证](https://docs.djangoproject.com/en/dev/ref/forms/validation/)

# javascript - 将额外的 mvc 逻辑注入 ext js 应用程序

> ID：14040110
> 
> 赞同：0
> 
> 时间：2012-12-26T11:40:16.877
> 
> 标签：javascript, extjs

我是 ext js 的新手，但通过了入门指南并设法创建了我自己的应用程序。

现在我正在为电子商务系统（商店软件）构建一个插件，并且需要动态扩展一个应用程序。

我设法通过猴子修补现有控制器来添加视图：

```
//{extends file="[default]backend/article/controller/main.js"}
//{namespace name=backend/article/view/main}
//{block name="backend/article/controller/main" append}
Ext.define('Shopware.apps.Article.controller.MyApp', {
    override: 'Shopware.apps.Article.controller.Main',
    openMainWindow: function() {
        var me         = this,
            mainwindow = me.callOverridden();    
            oldTabCreation  = mainwindow.createMainTabPanel;
            mainwindow.createMainTabPanel = function() {
                  mainTab = oldTabCreation.apply(this);
                  mainTab.add(
                      Ext.create('Ext.panel.Panel',
                          {
                                title: 'Pricify',
                                layout: 'card'
                          })
                  );
                  return mainTab;
            };
        return mainwindow;
    }
});
//{/block} 
```

这行得通。我不确定这是否是首选方式，但视图会在正确的位置加载，我很高兴（因为这花了我几个小时）。

但还有一段路要走。

我将如何在这里注入整个逻辑？

我的要求是：

*   我需要一个控制器、一个视图和一个商店/模型
*   最好在自己的命名空间中
*   我想将我的类分成文件。
*   该文件必须位于插件文件夹中，而不是原始应用程序文件夹中。

我可以将代码附加到 app.js 文件中，但据我所知，我无法附加控制器和视图，也不知道如何自动加载文件。

有什么首选的方法吗？

**编辑** 我现在正在构建一个简单的应用程序，该应用程序之前已加载并尝试将随后可用的控制器注入应用程序。准备好后，我会回来报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:03:40.633

通常我会通过拦截控制器事件（使用[Ext.ux.Application](https://github.com/nohuhu/Ext.ux.Application)覆盖）并在其上添加一些逻辑来做这样的事情。或者，如果可行，您可以扩展现有控制器并将其替换为整个应用程序中的自定义控制器。否则，monkey patching 可能是扩展现有单体应用程序的唯一方法，而该应用程序没有考虑到可扩展性。

此外，4.2 Beta 2 应该很快就会推出；它包括一大堆 MVC 改进，包括上面提到的覆盖。你可能想看看它。

# twitter-bootstrap - AngularJS 指令 Twitter 引导程序

> ID：14040111
> 
> 赞同：0
> 
> 时间：2012-12-26T11:40:26.587
> 
> 标签：twitter-bootstrap, angularjs

我想构建一个指令，允许我在一个标签中使用 twitter 引导组件：

标签如下所示：

```
 <bootstrapinput
                    model="lastName"
                    key="lastName"
                    localized="Surname"
                    formpath="playerForm.lastName"
                    required>
                 </bootstrapinput> 
```

该指令看起来像这样

```
 .directive('bootstrapinput', function () {
    return {
        restrict:'E',
        compile:function (tElement, tAttrs, transclude) {
            var type = tAttrs.type || 'text';
            var required = tAttrs.hasOwnProperty('required') ? 'required' : '';
            var ngClazz = tAttrs.hasOwnProperty('formpath') ? 'ng-class="{error: ' + tAttrs.formpath + '.$invalid}"' : '';
            var html = '<div class="control-group" ' + ngClazz + '>' +
                '<label class="control-label" for="' + tAttrs.key + '">' + tAttrs.localized + '</label>' +
                '<div class="controls">' +
                '<input ng-model="'+tAttrs.model+'" type="' + type + '" id="' + tAttrs.key + '" name="' + tAttrs.key + '" placeholder="' + tAttrs.localized + '" ' + required + '   />' +
                '</div>' +
                '</div>';

            tElement.replaceWith(html);

        }

    }

}); 
```

标签嵌入在控制器中。但是如果我通过范围访问控制器中的模型，则模型是空的。此外，未评估 ng-class 属性，即未按应分配的方式分配 CSS。

**编辑**现在可以访问模型。但是 ng-class 属性仍然没有被正确评估。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:10:29.857

好的，我终于有了解决方案

我刚刚将 div 控制组包装在另一个 div 中。现在它起作用了。

```
'<div><div class="control-group" ...>...</div></div>' 
```

另见 [http://jsfiddle.net/JNgN2/6/](http://jsfiddle.net/JNgN2/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:26:34.913

使用 $ 编译。transclude 是恕我直言，没有必要：

```
app.directive("bootstrapinput", function($compile) {
    return {
       restrict: 'E',
       scope: {
           model: '='
       },
       link: function(scope, element, attrs) {
           var type = attrs.type || 'text';
           var required = attrs.hasOwnProperty('required') ? 'required' : '';
           var ngClazz = attrs.hasOwnProperty('formpath') ? 'ng-class="{error: ' + attrs.formpath + '.$invalid}"' : '';
           var htmlTemplate = '<div class="control-group" ' + ngClazz + '>' + '<label class="control-label" for="' + attrs.key + '">' + attrs.localized + '</label>' + '<div class="controls">' + '<input ng-model="' + attrs.model + '" type="' + type + '" id="' + attrs.key + '" name="' + attrs.key + '" placeholder="' + attrs.localized + '" ' + required + '   />' + '</div>' + '</div>';
           console.log(htmlTemplate);
           var compiled = $compile(htmlTemplate)(scope);

           element.replaceWith(compiled);
       }
   };
}); 
```

# jquery - 在 Listview Kendo UI 中添加新列表

> ID：14040121
> 
> 赞同：0
> 
> 时间：2012-12-26T11:41:05.810
> 
> 标签：jquery, listview, kendo-ui

我想在 jquery 中创建一个带有添加新记录按钮的列表视图，就像在 kendo ui 中一样

[http://demos.kendoui.c​​om/web/listview/editing.html](http://demos.kendoui.com/web/listview/editing.html)

如您所见，当您单击添加新记录按钮时，新列表已创建并设置为第一个列表。我想要做的是把它放在列表的底部（最后）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T19:40:51.827

给定一个`ListView`定义为：

```
var listView = $("#listView").kendoListView({
    dataSource  : dataSource,
    template    : kendo.template($("#template").html()),
    editTemplate: kendo.template($("#editTemplate").html())
}).data("kendoListView"); 
```

以及以下 HTML：添加新记录

定义一个`button`添加为：

```
$(".k-add-button").click(function (e) {
    var total = dataSource.data().length;
    dataSource.insert(total, {});
    dataSource.page(dataSource.totalPages());
    listView.edit(listView.element.children().last());
    e.preventDefault();
} 
```

这是做什么的：

1.  获取`ListView` `DataSource`using中的元素数量`data().length`。
2.  然后`insert`是那个位置的一个元素（因为这是基数 0，我不需要加 1）。
3.  转到`DataSource`using的最后一页`dataSource.page(dataSource.totalPages())`。
4.  最后是当前页面的`edit`元素。`last``ListView`

# python - 使用 Python 自动化 SSH

> ID：14040136
> 
> 赞同：1
> 
> 时间：2012-12-26T11:42:51.160
> 
> 标签：python, ssh, paramiko

我有这 30 台虚拟机，现在我正在手动完成所有操作，这对我来说是一种麻烦。我现在正在尝试编写一个脚本，以便我可以自动连接到它们并完成我想要的任务。我制作了一张我需要做的流程图。谁能给我一些关于我将如何以编程方式完成这项任务的提示。我附上流程图。
提前致谢。

![在此处输入图像描述](../Images/c288e5f9605f033445ac55be50f25602.png)

请右键单击图像并单击查看图像以查看流程图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:59:11.840

读取文本文件并获取数据很简单：

```
with open('host.txt', 'r') as inf:
    lines = inf.readlines()
    hostlist = [ln.split() for ln in lines] 
```

现在`hostlist`应该是列表列表；

```
[['192.168.0.23', 'root', 'secret'], ['192.168.0.24', 'root', 'secret2'] ... 
```

但是您的列表不应该包含比主机名更多的内容。IP 地址可以从您必须配置的 DNS 获取，如果配置正确，ssh 无需密码即可登录。

将所有虚拟主机的密码放在纯文本文件中存在安全问题。如果您想走那条路，请确保限制对该文件的访问！

可以`subprocess`用来执行命令。我建议使用`rsync`将所需文件推送到虚拟机。这最大限度地减少了网络流量。您可以直接从文件系统部署到文件系统，而无需滚动 tarball。它可以很简单

```
status = subprocess.check_output(['rsync', '-av', localdir, remotedir]) 
```

存储相关虚拟机文件的目录在哪里`localdir`（它应该以“/”结尾），“remotedir”是`hostname::directory`虚拟机上数据应该存放的目录（这不应该*以*“/”结尾'）。

对于远程执行命令，`ssh`是要走的路。`authorized_keys`使用每个远程主机上的 ssh 文件配置无密码登录。然后，您无需在主机列表中输入密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:59:44.740

面料是您的最佳解决方案。Fabric 基于 paramiko（基于 libssh2），使得在远程主机上使用命令变得非常容易，并提供从远程主机上传和下载文件的功能。这是[http://docs.fabfile.org/en/1.5/](http://docs.fabfile.org/en/1.5/)

`put`关于功能的文档在[这里](http://docs.fabfile.org/en/1.5/api/core/operations.html?highlight=put#fabric.operations.put)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:00:18.533

我没有在流程图中得到您的问题，但是您可以按照建议使用 paramiko，并且我在 paramiko 之上编写了大量后台实用程序，使支持人员能够监控浏览器上的远程 Web 服务器。下面的片段，

```
client = paramiko.SSHClient()
client.set_missing_host_key_policy( paramiko.AutoAddPolicy() )
client.load_system_host_keys()
client.connect( '192.168.100.1', port=4001, username='monitor', password='XXXX' )

cmds = [ "sed -i 's/\/bin\/date -u/\/bin\/date/g' /etc/cron.hourly/reboot" ]

for cmd in cmds:

    if __DEBUG_MODE__:
        print 'Executing..... ' + cmd

    stdin, stdout, stderr = client.exec_command( cmd ) 
```

此外，如果您想在下面推送文件是代码段，

```
def setupSFTPClient(self, ip_add):
    print 'Setting SFTP client: ' + ip_add
    tb = 'Finished SFTP-ing. '
    try:
        client = paramiko.SSHClient()
        client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        client.load_system_host_keys()
        client.connect(ip_add, port=4001, username='monitor', password='XXXX')
        sftp_client = client.open_sftp()
        # NB you need the filename for remote path otherwise 
        #    paramiko barfs with IOError: Failure
        sftp_client.put( '/home/projects/portal_release.tgz', '/var/ND/portal_release.tgz' )
        sftp_client.put( '/home/projects/portal_installer.sh', '/var/ND/portal_installer.sh' )
        sftp_client.close()

    except Exception, e:
        print e
        tb = traceback.format_exc()

    finally:
        print tb
        client.close() 
```

# php - 联邦快递 API。运输标签。多包货件

> ID：14040137
> 
> 赞同：6
> 
> 时间：2012-12-26T11:42:58.177
> 
> 标签：php, fedex

我正在使用 FeDex API 打印运输标签。1 个包裹的标签打印成功，但是当我尝试打印多个包裹时出现错误：

```
stdClass Object
(
[Severity] => ERROR
[Source] => ship
[Code] => 2463
[Message] => The number of RequestedPackages in the RequestedShipment must be equal to 1
[LocalizedMessage] => The number of RequestedPackages in the RequestedShipment must be    equal to 1
) 
```

在请求中，我包括了 TotalWeight、PackageCount，但它没有帮助

```
$request['WebAuthenticationDetail'] = array('UserCredential' =>array('Key' => $auth['key'], 'Password' => $auth['password']));
$request['ClientDetail'] = array('AccountNumber' => $auth['accountNumber'], 'MeterNumber' => $auth['meterNumber']);
$request['TransactionDetail'] = array('CustomerTransactionId' => '*** Ground Domestic Shipping Request v12 using PHP ***');
$request['Version'] = array('ServiceId' => 'ship', 'Major' => '12', 'Intermediate' => '1', 'Minor' => '0');
$request['RequestedShipment'] = array('ShipTimestamp' => date('c'),
                                      'DropoffType' => 'REGULAR_PICKUP', // valid values REGULAR_PICKUP, REQUEST_COURIER, DROP_BOX, BUSINESS_SERVICE_CENTER and STATION
                                      'ServiceType' => 'FEDEX_GROUND', // valid values STANDARD_OVERNIGHT, PRIORITY_OVERNIGHT, FEDEX_GROUND, ...
                                      'PackagingType' => 'YOUR_PACKAGING', // valid values FEDEX_BOX, FEDEX_PAK, FEDEX_TUBE, YOUR_PACKAGING, ...
                                      'Shipper' => $this->addShipper(),
                                      'Recipient' => $this->recipient,
                                      'ShippingChargesPayment' => $this->addShippingChargesPayment(),
                                      'LabelSpecification' => $this->addLabelSpecification(), 
                                      'RateRequestTypes' => array('LIST'), // valid values ACCOUNT and LIST
                                      'PackageCount' => count($this->packages),
                                      'TotalWeight' => array('Value' => array_sum($this->packages), 'Units' => 'LB'),
                                      'TotalShipmentWeight' => array('Value' => array_sum($this->packages), 'Units' => 'LB'),
                                      'PackageDetail' => 'INDIVIDUAL_PACKAGES',                                        
                                      'RequestedPackageLineItems' => $this->packageLineItem//array('0' => $this->packageLineItem)
);      

$this->packageLineItem[] = array('SequenceNumber'=>$i,
              'GroupPackageCount' => count($this->packages),
              'MasterTrackingID' => '123123123123',
              'TotalShipmentWeight' => array('Value' => array_sum($this->packages), 'Units' => 'LB'),
              'Weight' => array('Value' => $this->packages[$i-1], //weight!!!!!!!!!!!!!
                                'Units' => 'LB'),
              'CustomerReferences' => array('0' => array('CustomerReferenceType' => 'CUSTOMER_REFERENCE', 
                                                         'Value' => 'GR4567892'), // valid values CUSTOMER_REFERENCE, INVOICE_NUMBER, P_O_NUMBER and SHIPMENT_INTEGRITY
                                            '1' => array('CustomerReferenceType' => 'INVOICE_NUMBER', 
                                                         'Value' => 'INV4567892'),
                                            '2' => array('CustomerReferenceType' => 'P_O_NUMBER', 
                                                         'Value' => 'PO4567892')),
              'SpecialServicesRequested' => array('SpecialServiceTypes' => array('COD'),
                                                  'CodDetail' => array('CodCollectionAmount' => array('Currency' => 'USD', 'Amount' => 150),
                                                                       'CollectionType' => 'ANY')// ANY, GUARANTEED_FUNDS
                                                 )
 ); 
```

有谁知道如何成为一个有效的请求？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-09T04:59:20.777

**FedEx Rate API**和**FedEx Shipping API**之间存在差异。您可以使用一个 SOAP 请求对多个包进行评级；但是，要运送**多件货件 (MPS)**，您必须为每个包裹执行运送请求。

第一个包裹（第一个请求中的包裹）将是您的***Master***，其中包含主跟踪号。获得此主跟踪号后，您必须将其附加到剩余包裹的运输请求中。请参阅最新的**FedEx 开发人员指南**，了解有关 MPS 货件的更多信息，并从 FedEx 开发人员门户下载执行*快递国内 MPS 货件的示例。*

需要注意的是，运输过程不会作为交易发生，所以如果您尝试运输 3 个包裹，并且包裹 1 和 2 都提交成功，但包裹 3 未知原因失败，您有责任取消包裹1 和 2 或重新提交包裹 3。我建议任何人在创建实际货件之前验证货件（使用相同的运输 API）。

最好的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:24:14.643

FeDex 手册有错误：“MasterTrackingID”错误。“MasterTrackingId”是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-10T17:49:56.113

我已经在测试服务器上安装了 MPS。我正在使用 python 和[这个可爱的 wrapper](https://github.com/python-fedex-devs/python-fedex)，所以它不是一个完整的 SOAP 编写，但是......发货基本上是：

```
SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP- ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:m0="http://fedex.com/ws/ship/v25">
<SOAP-ENV:Body>
<ProcessShipmentRequest xmlns="http://fedex.com/ws/ship/v25">
<WebAuthenticationDetail> <ParentCredential>
<Key>Hb1TfWMygUh7bbHP</Key>
<Password>u0mnYl8d6FRQK5Ot8SyxMXVqq</Password> </ParentCredential>
<UserCredential>
<Key>INPUT YOUR INFORMATION</Key>
<Password> INPUT YOUR INFORMATION </Password> </UserCredential>
</WebAuthenticationDetail> <ClientDetail>
<AccountNumber>XXXXXXXXX</AccountNumber>
<MeterNumber>XXXXXX</MeterNumber> </ClientDetail>
<TransactionDetail>
<CustomerTransactionId>ProcessShipmentRequest_2264</CustomerTransactionId> </TransactionDetail>
<Version>
<ServiceId>ship</ServiceId> <Major>25</Major> <Intermediate>0</Intermediate>
<Minor>0</Minor> </Version> <RequestedShipment> 
```

无论需要什么关闭，我们都有基本的装运废话，然后......

```
shipment.RequestedShipment.TotalWeight.Value
shipment.RequestedShipment.TotalWeight.Units
shipment.RequestedShipment.PackageCount 
```

在您的第一批货物中。在该装运请求中包含您的第一个包裹，但包括`SequenceNumber = 1`：

```
<RequestedPackageLineItems>
<SequenceNumber>1</SequenceNumber> 
<Weight>
<Units>LB</Units>
<Value>20.0</Value> 
</Weight> 
<Dimensions>
<Length>12</Length> 
<Width>12</Width> 
<Height>12</Height> 
<Units>IN</Units>
</Dimensions> 
</RequestedPackageLineItems> 
```

提交带有包裹请求的货件。在该货件的回复中，您将收到`CompletedShipmentDetail.MasterTrackingId`. 在随后的发货中，您只需像往常一样形成它们，除了，您将包括一个

```
RequestedShipment.MasterTrackingId.TrackingIdType 
```

和

```
RequestedShipment.MasterTrackingId.MasterTrackingId 
```

哪里`MasterTrackingId`是从第一批货物中取出的；WDSL 将具有`TrackingIdType`. 我认为只使用“FEDEX”就可以了。货件重量和包裹计数将与普通货件一样——包裹重量和 1。包裹行项目的编号将递增，直到您达到`PackageCount`.

我希望这会增加@Ozzy Garcia 的答案！他们肯定比 FedEx 的文档更清楚地说明了这一点！

# ios - AVCaptureSession didReceiveMemoryWarning

> ID：14040145
> 
> 赞同：1
> 
> 时间：2012-12-26T11:43:35.430
> 
> 标签：ios, uiimage, format, avcapturesession, didreceivememorywarning

在将图像捕获为 AVCaptureSession 会话运行到本地 NSMutableArray 时，我收到了一个 didReceiveMemoryWarning 调用。经过一番测试，我发现它发生在 ARRAY 达到一定数量时。

我认为这是因为我使用 UIImage 作为我添加到数组中的对象类型。保存这些图像的最佳格式是什么？

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {

CVPixelBufferRef pixel_buffer = CMSampleBufferGetImageBuffer(sampleBuffer);
CIImage *ciImage = [CIImage imageWithCVPixelBuffer:pixel_buffer];
CGImageRef ref = [self.context createCGImage:ciImage fromRect:ciImage.extent]; 

UIImage *image = [UIImage imageWithCGImage:ref scale:1.0 orientation:UIImageOrientationRight];

CGImageRelease(ref);

[self.capturingImageView performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:YES];
if (saveImages == YES) { //this a BOOL value that becomes YES when the user clicks the RECORDING button.
    [dImagesArray addObject:image];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-10T03:46:33.860

为什么不使用 AVCaptureVideoPreviewLayer 除非你正在做任何类型的过滤？出于性能原因，我建议使用 OpenGL 为委托方法渲染图像`captureOutput:didOutputSampleBuffer:fromConnection:`这是一个示例...... [https://developer.apple.com/library/ios/qa/qa1702/_index.html](https://developer.apple.com/library/ios/qa/qa1702/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:58:04.670

您可以将图像保存为最适合您需要的任何格式：这可能是 JPG 或 PNG。前者较小，但有损，后者是无损的。因此，如果图像质量对您来说非常重要，请使用 PNG。如果没有，我会使用 JPG（这将具有占用更少磁盘空间的额外优势）。

您目前没有将任何图像保存到磁盘，只是将它们保存在数组中的内存中，这就是导致您出现问题的原因。您可以通过多种方式处理此问题，具体取决于您希望应用程序执行的操作。您*需要*将图像保存到磁盘吗？如果是这样，可以随时限制内存中允许的图像数量，并在需要时将它们转储到磁盘。或者您可能只是对图像进行一些分析，在这种情况下，您可以在不再需要它们时释放它们。

# javascript - 访问 javascript 字符串变量中特定标签的内容

> ID：14040146
> 
> 赞同：1
> 
> 时间：2012-12-26T11:43:41.490
> 
> 标签：javascript, html

我有一个 AJAX 帖子获得的 HTTP 帖子响应对象。我把它作为一个字符串。我想访问`<pre>`变量中第一个标签的内容。

例子：

```
<html>
  <pre> First </pre>
  <pre> Second </pre>
</html> 
```

我想得到文本“第一”。我怎样才能做到这一点？我使用dojo xhrpost 来执行ajax post。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:48:26.303

希望这可以帮助：

```
var str = '<html><pre> First </pre> <pre> Second </pre> </html>';
var div = document.createElement('div');
    div.innerHTML = str;
alert(div.getElementsByTagName('pre')[0].innerHTML); 
```

# magento - 如何在 Magento 后端添加按日期排序

> ID：14040151
> 
> 赞同：0
> 
> 时间：2012-12-26T11:44:07.367
> 
> 标签：magento, magento-1.7

我想默认显示我所有的产品，从最新到最旧。我看到了这个链接：

[第一个解决方案](https://stackoverflow.com/questions/2237513/magento-sort-by-date-added)

[第二种解决方案](http://www.magentocommerce.com/boards/viewthread/280314/#t387709)

还有[这个](http://www.excellencemagentoblog.com/magento-category-page-product-sorting)。它们都显示相同的解决方案，但总是针对前端。

我想要的是在**System->Configuration->Catalog->Product Listing 上默认设置排序方式**并将其默认设置为**Created at**，我还想设置顺序（desc 或 asc）。

关于如何定制的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T09:49:48.250

很抱歉我没有回答你的问题。

网格按 entity_id 排序：

```
// app/code/core/Mage/Adminhtml/Block/Catalog/Product/Grid.php:41
$this->setDefaultSort('entity_id');
$this->setDefaultDir('DESC'); 
```

这意味着，您想要的行为应该是默认的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T18:20:17.510

您可以安装[GridControl](https://github.com/magento-hackathon/GridControl)并编写一个扩展并将其添加到您在模块中创建的 grid.xml

```
<?xml version="1.0"?>
<gridcontrol>
    <grids>
        <product.grid>
            <add>
                <header>Created at</header>
                <type>int</type>
                <index>created_at</index>
          </add>        
        </product.grid>
    </grids>
</gridcontrol> 
```

此解决方案未经测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T13:24:39.480

在不更改任何核心文件的情况下进行此操作的最佳方法是复制位于以下位置的 Toolbar.php 文件：

```
/app/code/core/Mage/Catalog/Block/Product/List/Toolbar.php 
```

然后在下面创建一个新的目录路径（如果你还没有创建一个）：

```
/app/code/local/Mage/Catalog/Block/Product/List/Toolbar.php 
```

现在从第 232 行替换以下内容：

```
 if ($this->getCurrentOrder()) {
        $this->_collection->setOrder($this->getCurrentOrder(), $this->getCurrentDirection());
    } 
```

到

```
if ($this->getCurrentOrder()) {
if(($this->getCurrentOrder())=='position'){ //defines the sort option
//sort by position (ascending) and entity_id (descending)
$this->_collection->addAttributeToSort('position','asc')->addAttributeToSort('entity_id','desc');
} else {
$this->_collection->setOrder($this->getCurrentOrder(),$this->getCurrentDirection());
}
} 
```

最后，在您的 Magento 后端重新索引和刷新缓存并准备就绪。

# g-wan - 在 G-WAN 的无锁 KV 存储中，节点的内存在 kv_del() 调用后何时释放？

> ID：14040153
> 
> 赞同：0
> 
> 时间：2012-12-26T11:44:13.267
> 
> 标签：g-wan, key-value-store

假设在 G-WAN 服务器线程中，我们在 KV 存储中查找了一个项目，并获得了一个指向“记录”结构的有效指针。（KV 存储附加到 G-WAN 的持久指针。）

```
record = (record_t*)kv_get(&records, "akey", sizeof("akey") - 1); 
```

我假设我们可以安全地读取记录结构的内容，即使它在另一个服务器线程中被标记为删除，这要归功于无锁设计。

我的问题是实际删除何时发生？在请求最终返回之前，我们是否保证可以访问“记录”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:34:42.627

标记为删除的 KV 记录一直有效，直到*所有*`HTTP requests`获取它的KV 记录都终止。

在您的情况下，这意味着您**必须**将此 VK 记录*的副本*附加到您的持久指针，**仅**当此数据在使用所述 KV 记录的 HTTP 请求的生命周期之外使用时。

如果您确定在 HTTP 请求完成后您的持久指针不保留引用，那么您不需要制作您使用的 KV 记录的副本。

# objective-c - OSX-iOS：检测 iOS 设备连接类型（有线/无线）

> ID：14040156
> 
> 赞同：2
> 
> 时间：2012-12-26T11:44:17.870
> 
> 标签：objective-c, ios, macos, iphone-privateapi

我实际上使用**MobileDevice.framework**来了解设备是否已连接，但我想通过连接类型（有线/无线）来区分设备。

那么如何检测哪个设备与USB等无线连接呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:30:42.800

看看这些问题：

[如何确定 iOS 设备是否连接到台式计算机（和 iTunes）](https://stackoverflow.com/questions/6161318/how-to-determine-whether-ios-device-is-connected-to-desktop-computer-and-itunes)

[检查 iPhone 与 USB 连接的应用程序](https://stackoverflow.com/questions/7426258/an-application-to-check-iphone-connection-with-usb)

[越狱ios中的USB检测](https://stackoverflow.com/questions/12040200/usb-detection-in-jailbreak-ios)

另外，我建议看一下**IOKit.framekwork**。它有很多与USB相关的东西。

# php - 如何从自定义帖子类型中检索特色图像？

> ID：14040161
> 
> 赞同：1
> 
> 时间：2012-12-26T11:44:55.043
> 
> 标签：php, wordpress-theming, custom-post-type, wordpress

我创建了自定义幻灯片帖子类型。图像设置为每个新幻灯片帖子的特色图像。我想在幻灯片模板中检索这些图像。

此幻灯片模板的 HTML 标记为：

```
<div class="wrapper">
<ul id="my-slider" class="my-slider">

<li>
<a href="http://www.flickr.com/photos/photo/123456" target="_blank"><img src="images/1.jpg" alt="image1"/></a>
<div class="my-description">
<h3>Image one</h3>
</div>
</li>

<li>
<a href="http://www.flickr.com/photos/photo/1234565" target="_blank"><img src="images/2.jpg" alt="image2"/></a>
<div class="my-description">
<h3>Image two</h3>
</div>
</li>

<li>
<a href="http://www.flickr.com/photos/photo/12345655" target="_blank"><img src="images/3.jpg" alt="image3"/></a>
<div class="my-description">
<h3>Image three</h3>
</div>
</li>

<li>
<a href="http://www.flickr.com/photos/photo/12345666" target="_blank"><img src="images/4.jpg" alt="image4"/></a>
<div class="my-description">
<h3>Image four oner</h3>
</div>
</li>
</ul>
</div> 
```

当我对其进行硬编码时，此 HTML 提供了四个幻灯片图像。如何从 wordpress 自定义帖子类型中动态检索附加图像以获得相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:24:09.877

为什么不简单地查询您的自定义帖子类型？一个例子：

```
<?php
$args = array('post_type' => 'your_custom_post_type');
query_posts( $args );

// the Loop
while (have_posts()) : the_post();
  //Do your stuff  

  //You can access your feature image like this:
  the_post_thumbnail();
endwhile; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:47:39.070

```
Below is the example to retrive feature image. 

$args = array('post_type' => 'your_custom_post_type');
query_posts( $args );

// the Loop
while (have_posts()) : the_post();

if ( has_post_thumbnail() ) {

//Image size small,large or medium
  the_post_thumbnail('thumbnail',imagesize);?>

}
?>
endwhile; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:50:15.057

我通过从自定义帖子类型中获取所有图像的数组并将其存储在变量 $myimage 中来实现这一点。$myimage[0] 是 img 标签的 src，需要在循环中捕获以获取所有图像

```
global $post;
$args = array(
'post_type' =>'slideshow',
'numberposts' => -1,
'orderby' => 'menu_order' );

$slider_posts = get_posts($args); ?>
<?php if($slider_posts) { ?>
<?php // start the loop
foreach($slider_posts as $post) : setup_postdata($post);
$myimage = wp_get_attachment_image_src(get_post_thumbnail_id(), 'full'); 
```

# math - OpenGL 相机育儿

> ID：14040165
> 
> 赞同：1
> 
> 时间：2012-12-26T11:45:13.607
> 
> 标签：math, opengl, matrix

我的 OpenGL 渲染器中有一个相机对象。它工作正常。但是，我需要将其作为父节点的父节点，以便父节点可以像在 Adob​​e AfterEffects 中使用 Null 对象那样操作相机。如果您不熟悉 AE，那么这里是它的工作原理。Null Object 是一个空容器。如果相机是它的父对象并且对象本身位于目标位置，那么当空对象旋转时，在目标上具有其兴趣点（又名lookAt）的相机将围绕目标定向。这是问题的核心。在我的实现中，当我旋转将相机作为子相机并位于目标位置的父级时，相机不会保持锁定在父级的位置，但它的外观方向也会发生变化。这是描述该问题的屏幕截图： ![在此处输入图像描述](../Images/da57719430da0ea45070dda4612b8ea9.png)

左边的截图是错误的行为：相机的父级在中心，但相机的方向是旋转而不是相机。在右侧的屏幕截图中，它应该是这样以及它在 AE 中的工作方式：旋转 Null 对象会围绕空对象中心轴旋转相机。我确信我在这里做了一些愚蠢的错误矩阵顺序的事情。所以这是我在代码中的做法：

我像这样计算相机的lookAt矩阵：

```
 public void lookAt(float eyeX, float eyeY, float eyeZ, float centerX, float centerY, float centerZ, Vec3 upPt) {

    _eye.set(eyeX, eyeY, eyeZ);
    _center.set(centerX, centerY, centerZ);
    _up = upPt;

    _direction = Vec3.sub(_center, _eye).normalize();

    _viewMatr = Glm.lookAt(_eye, _center, _up);

    _transform.setModel(Mat4.mul(rotMat, _viewMatr));
///rotMat is rotation matrix cached from rotation method call.

 } 
```

Glm:lookAt 是来自 C++ GLM 数学库的端口，它看起来像这样：

```
 public static Mat4 lookAt(Vec3 eye, Vec3 center, Vec3 up) {
    Vec3 f = normalize(Vec3.sub(center, eye));
    Vec3 u = normalize(up);
    Vec3 s = normalize(cross(f, u));
    u = cross(s, f);

    Mat4 result = new Mat4(1.0f);
    result.set(0, 0, s.x);
    result.set(1, 0, s.y);
    result.set(2, 0, s.z);
    result.set(0, 1, u.x);
    result.set(1, 1, u.y);
    result.set(2, 1, u.z);
    result.set(0, 2, -f.x);
    result.set(1, 2, -f.y);
    result.set(2, 2, -f.z);

    return translate(result, new Vec3(-eye.x,-eye.y,-eye.z));
  } 
```

这是第一部分，我在其中创建相机“模型”矩阵。下一步是创建世界矩阵，同时考虑到相机的父节点：

```
 Mat4 world=   Mat4.mul( this.getTransform().parentMatr, this.getTransform().getModel());

    this.getTransform().setView(world); 
```

稍后在管道中，每个将要渲染的几何对象访问相机的视图矩阵（我刚刚使用 setView 设置），并计算模型、视图、投影矩阵，然后将其发送到顶点着色器。

奇怪的是，如果我在将世界矩阵传递给`setView()`方法之前反转世界矩阵并且不否定 GLM 中的眼睛矢量，那么它可以工作！但在这种情况下，它在相机没有父级的模式下不起作用。请不要建议我使用 OpenGL 4.0 Core 的基于固定管道的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:09:32.317

对于数学，请阅读以下内容。对于更实用的方法，请直接走到最后。

您面临的问题是，仿射变换矩阵有效地描述了另一个笛卡尔坐标系中的笛卡尔坐标系。因此，通过将它们链接在一起，您总是相对于父级工作。现在，如果您将“相机”（OpenGL 当然没有相机，但为了本文的目的，让我们假设 a`lookAt`是相机）作为某个坐标系的父级，则所有变换都相对于该坐标系。因此， A`lookAt`在该局部坐标系的框架中运行。

让我们在数学上分解一下：

有一个全局坐标空间，我们称之为世界。由于世界是一种中心轴心点，因此不会对世界空间中的坐标应用任何变换，即变换是恒等式，或者简称为 I。

通过将整个世界移动到另一个位置来实现“相机”。在 OpenGL 中没有相机，但视点始终位于原点`= (0,0,0)`。这可以描述为将整个世界转换为一个位置，以便视点最终位于原点。假设 V^-1 描述了在世界原点的相机到所需位置的变换，然后是 V^-1 的倒数，即

V^-1^-1 = V

是视图变换。现在在我们的例子中，具有相对变换 L 的相机是其他对象的父对象，该变换由 F 描述，因此总视图变换由

V^-1 = F·L

L 是变换`lookAt`产生的倒数。现在问题来了：`lookAt`在空间 F 内操作，这意味着传递给它的所有向量都必须与 F 相关。所以你实际上也为了这个工作而反转了 F，所以

V^-1 = (L^-1 · F^-1)^-1

现在假设您有另一个超出 M 范围的对象，您想查看它。它由相对于世界的 G 来描述。要查看这个对象，我们必须知道它相对于 F 的位置。很容易。我们先从G“前进”到世界，然后“后退”到G，即(F^-1)^-1·G=F·G

假设对象 G 以原点为中心，您必须评估 F · G · (0,0,0,1)，归结为用 F 转换 G 的第 4 列。结果就是你应该使用的结果的目标位置`lookAt`。这就是我将对象矩阵放入其中的意思。

* * *

然而，整个方法可能会因复杂的转换链而中断。我建议一些更简单的方法：只需将相机和目标对象的位置转换为世界坐标并将其应用于`lookAt`世界空间。

# php - 记录插入和输出取决于它的值

> ID：14040168
> 
> 赞同：1
> 
> 时间：2012-12-26T11:45:41.570
> 
> 标签：php, mysql, insert

我的查询很简单。

我有一个包含名称、id、日期、时间、输入、输出的表

我只想让 php 检查是否是 salman, 001, 12/12/2012, 12:12:12, 1, 0

然后插入 salman, 001, 12/12/2012, 05:12:12, 0, 1

只有 in 和 out 值需要改变，取决于员工是否在然后给出值 in = 0 和 out = 1 否则如果员工不在则给值 in = 1 和 out = 0

我被困在某个地方

```
 $insertqr = mysql_query("SELECT * FROM at_daily where daily_qr = '".$q."' and daily_date = '$today' and daily_in = '0'");//'".$today."'");
    $daily = mysql_fetch_array($insertqr);

    if($daily['daily_in'] == 0){
        mysql_query("INSERT INTO at_daily (daily_name, daily_qr, daily_date, daily_time, daily_in, daily_out)
        VALUES ('$name', '$q', '$today', '$ttime', '$myzero', '$myone')");
        echo "record entered of In";
    }
    else if($daily['daily_in'] == 1)
   {
        mysql_query("INSERT INTO at_daily (daily_name, daily_qr, daily_date, daily_time, daily_in, daily_out)
        VALUES ('$name', '$q', '$today', '$ttime', '$myone', '$myzero')");
        echo "record entered of Out";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:02:10.377

我建议创建一个名为**status**的列，而不是 daily_in 和 daily_out 列。使用 1 表示进入状态，使用 0 表示退出状态。这样你只需要使用更新查询在 0 和 1 之间切换。

要切换一个值，我们可以使用常见的 SQL 控制流函数 IF。IF 函数接受三个参数，第一个是测试表达式，第二个是测试表达式为真时返回的项，第三个是测试表达式失败时返回的项。

更新`table`集`column`= IF( `column`= 1, 0, 1) WHERE `id`= 'userid'

# android - 在 Android 模拟器上运行 Google Maps v2

> ID：14040185
> 
> 赞同：46
> 
> 时间：2012-12-26T11:47:29.373
> 
> 标签：android, android-emulator, avd, android-maps-v2, google-play-services

我尝试在我的 Android 应用程序中实现 Google Maps v2，但不幸的是，我收到的不是地图，而是以下消息：

![如果没有您手机中缺少的 Google Play 服务，此应用程序将无法运行。](../Images/e3396d8a50bf6fcad743821f538f29e7.png)

是否可以在 Android 模拟器（平台 4.2）上运行这些地图？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-27T01:12:03.610

目前，参考 Google Android Map API v2，您无法在 Android 模拟器上运行 Google Maps v2；您必须使用设备进行测试。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-06-11T04:07:08.480

对于那些已更新到最新版本的 google-play-services_lib 和/或出现此错误的用户`Google Play services out of date. Requires 3136100 but found 2012110`，此更新版本的[com.google.android.gms.apk（Google Play 服务 3.1.36）](https://www.dropbox.com/s/46pqhhedk7oo33f/com.google.android.gms.apk)和[com.android.vending.apk （Google Play 商店 4.1.6）](https://www.dropbox.com/s/ccnuqmsxdtb75xl/com.android.vending.apk)应该可以工作。

在 Android SDK Tools 22.0.1 上使用此配置进行测试。另一种针对纯 Android 而不是 Google 的配置也应该可以工作。

*   **设备：** Galaxy Nexus
*   **目标：** Android 4.2.2 - API 级别 17
*   **CPU/ABI：** ARM（armeabi-v7a）
*   **选中：**使用主机 GPU

...

1.  打开 AVD
2.  在终端/cmd中执行这个

    ```
    adb -e install com.google.android.gms.apk
    adb -e install com.android.vending.apk 
    ```

3.  重新启动 AVD

4.  玩得开心编码！！！

我发现这种方式是最简单、最干净的，并且它适用于最新版本的软件，它允许您修复所有错误。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-28T12:48:03.493

请尝试以下方法。[这对我来说是成功的](http://saleh360.blogspot.in/2012/12/android-running-google-maps-api-v2_12.html)。

脚步：

1.  使用以下配置创建一个新的模拟器： ![AVD 配置](../Images/485f799dc49e45fc7d431d85e5cd3676.png)

2.  启动模拟器并安装以下[APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)文件：`GoogleLoginService.apk`、`GoogleServicesFramework.apk`和`Phonesky.apk`. 您可以使用以下命令执行此操作：

    ```
    adb shell mount -o remount,yourAvdName -t yaffs2 /dev/block/mtdblock0 /system
    adb shell chmod 777 /system/app
    adb push GoogleLoginService.apk /system/app/
    adb push GoogleServicesFramework.apk /system/app/
    adb push Phonesky.apk /system/app/ 
    ```

    APK 链接：

    1.  [谷歌登录服务.apk](https://www.dropbox.com/s/lfde3juixuy88rg/GoogleLoginService.apk)
    2.  [GoogleServicesFramework.apk](https://www.dropbox.com/s/9kurwyhbbuecaea/GoogleServicesFramework.apk)
    3.  [Phonesky.apk](https://www.dropbox.com/s/9x8924gtb52ksn6/Phonesky.apk)又名 Google Play 商店，v.3.5.16
    4.  [谷歌地图](https://www.dropbox.com/s/koo4wiwqg8agy8n/com.google.android.apps.maps-1.apk)，v.6.14.1
    5.  [谷歌播放服务](https://www.dropbox.com/s/bh058hbrelccfsr/com.google.android.gms-2.apk)，v.2.0.10
3.  在模拟器中安装 Google Play 服务和 Google 地图

    ```
    adb install com.google.android.apps.maps-1.apk
    adb install com.google.android.gms-2.apk 
    ```

4.  [从此链接](https://dl-ssl.google.com/android/repository/google_play_services_2012110_r04.zip)下载 Google Play 服务修订版 4和额外的文件夹`sdkmanager->extra->google play service`。
5.  `google-play-services_lib`从导入`androidsdk\extras\google\google_play_services`。
6.  创建一个新项目并将上述项目作为库项目引用。
7.  运行项目。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-11T04:55:37.940

[我已经使用本指南](https://stackoverflow.com/a/13869332/1821326)在模拟器上成功安装了 Google Maps v2 。
您应该执行以下步骤：

*   创建一个新的模拟器 Nexus S，Android 2.3.3。不要使用谷歌 API。
*   安装[com.android.vending.apk](https://www.dropbox.com/s/8jiban3pq2cgkvo/com.android.vending-108b71f4793186b8fd1768a9cd19bbd5.apk)（Google Play 商店，v.3.10.9）
*   安装[com.google.android.gms.apk](https://www.dropbox.com/s/u3blse4z3l2et96/com.google.android.gms-6413100ccfca460007fdc988b1363db8.apk) (Google Play Service, v.2.0.12)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-13T09:46:35.530

我建议使用[Genymotion](http://www.genymotion.com)的模拟器而不是 Google 的模拟器。它的启动速度更快，几乎实时响应。它还支持 Google Play 服务，因此也支持 Google 地图。

![Genymotion 上的谷歌地图](../Images/eb0ea2c8cb423d10a5814366867a5b48.png)

试试看！这是一篇博客文章，可帮助您设置模拟器。

*   [如何在 Linux 上为 Android 设置快速模拟器？](http://weblog.avp-ptr.de/20130912/how-to-set-up-a-fast-emulator-for-android-on-linux/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-02T18:59:22.757

我可以让我的模拟器使用 Google Map V.2（使用 Google Play Service V.4）运行我的应用程序。我遵循了其他人建议的一些失败的步骤，但是我从中吸取了教训并以某种方式使其发挥作用。这是如何：

1.  首先：您必须对地图应用程序进行编码。在您的元文件 XML 中正确设置所有适当的权限，并在您的应用程序中包含 Google Play Services APK 部分。要验证这是否属实，您必须在真实设备上运行您的应用程序并知道它可以与那里的地图一起使用。然后您可以继续处理您的模拟器，如下所示。

2.  创建一个新的模拟器，或使用您现有的模拟器和规格：

    *   目标名称 = Android 4.1.2
    *   API 级别 = 16
    *   CPU = 任何。但是，我发现 ARM 比 x86 更快/响应更快
    *   有足够的 RAM 内存和空间 MB
3.  运行你的模拟器（你的目标模拟器必须正在运行！）

4.  将以下 APK（可通过 2013 年 4 月 2 日的 Dropbox 下载）下载到您的本地目录（扫描病毒！）：

    *   [com.android.vending.apk](https://www.dropbox.com/s/8jiban3pq2cgkvo/com.android.vending-108b71f4793186b8fd1768a9cd19bbd5.apk)，（Google Play 商店，v.3.10.9）

    *   [com.google.android.gms.apk](https://www.dropbox.com/s/u3blse4z3l2et96/com.google.android.gms-6413100ccfca460007fdc988b1363db8.apk) , (Google Play 服务, v.2.0.12)

5.  使用 ADB 命令将这两个 APK 安装到正在运行的（目标）模拟器中：

    DOS/控制台提示> adb -e install [path-to-APK-file]

    注意：您可能在此试用错误期间已在您的模拟器中安装了这些 APK，并且由于某种原因需要重新安装。您必须先卸载它们： adb -e uninstall (com.google.android.gms 或 com.android.vending)

6.  在这里，事情可能会变得棘手。您认为您已经完成了，但是当您再次使用 Map 打开您的应用程序时，您得到的只是一个错误，内容为：“Google Play 服务已过期。需要 2012100 但找到 2010110”，并且可能会看到一个按钮“更新” Google Play。如果是这种情况，请不要尝试单击更新按钮，因为它不会做任何事情。我也遇到了这个错误，我通过以下两个附加步骤解决了它：

    *   Clean-rebuild-reinstall 我的应用程序到模拟器中
    *   关闭我的模拟器并重新启动它。
7.  就是这样，它现在工作得很好。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-14T16:39:06.187

Google 已经更新了面向 API 23 的虚拟设备。它现在随 Google Play Services 9.0.80 一起提供。因此，如果您使用的是 Google Maps API V 2.0（我使用的是 play-services-maps:9.0.0 和 play-services-location.9.0.0），则无需解决方法。它只是工作！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-26T12:15:01.520

您需要尝试使用 Google API 版本的模拟器。每个平台都有两个版本，Android 和 Android+Google API。确保在创建 AVD 时，在目标字段上选择 Google API 版本。

页面*[确保设备拥有 Google Play 服务 APK](http://developer.android.com/google/play-services/setup.html#ensure)*也很有帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-18T03:02:01.377

[我已经在AndroVM](http://androvm.org/)虚拟机上成功运行了我们的应用程序，它需要 Google Maps API 2 。

AndroVM 没有安装 Google Maps 或 Google Play，但提供了 Cyanogen Gapps 存档的修改副本，这是一组安装在大多数 Android 设备上的专有 Google 应用程序。

从 AndroVM 常见问题解答中复制的说明：

> **如何安装 Google Apps（包括 Market/Play 应用程序）？**
> 
> *   下载 Google Apps：[gapps-jb-20121011-androvm.tgz](http://androvm.org/Download/gapps-jb-20121011-androvm.tgz) [基本上是 Cyanogen gapps 存档中的 /system 目录，没有在 AndroVM 上崩溃的 GoogleTTS 应用程序]
> *   在您的主机上解压 gapps...tgz 文件 – 您将创建一个系统目录
> *   获取 AndroVM 的管理 IP 地址（“AndroVM 配置”工具）并执行“adb connect xyzt”</li>
> *   做“adb root”</li>
> *   使用“adn connect xyzt”重新连接</li>
> *   执行“adb remount”</li>
> *   做“adb push system/ /system/”</li>
> 
> 您的虚拟机将重新启动，并且您应该拥有包括 Market/Play 在内的谷歌应用程序。
> 
> 您不会有一些 Google Apps，例如 Maps，但可以从 Market/Play 下载它们。

因此，请按照这些说明进行操作，然后使用 Google Play 安装 Google 地图！

使用虚拟机而不是模拟器的一些很大的副作用：

*   非常优越的综合性能
*   OpenGL 加速
*   谷歌播放支持

到目前为止，唯一的障碍是缺乏多点触控手势，这对于地图应用程序来说是一个遗憾！我打算用一个隐藏的 UI 机制来解决这个问题，所以这不是一个大问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-08T04:16:52.930

我尝试了上述步骤（通过 paniniluncher），但收到以下消息：

```
Google Play services out of date. Requires 3025100 but found 2012110 
```

我收到此消息是因为我需要上述文件的不同版本。为了解决这个问题，我首先卸载了上面提到的文件，下载了我需要的版本（如以下 StackOverflow 帖子中所引用的：

[Google Play 服务已过时。需要 3025100 但找到 2012110](https://stackoverflow.com/questions/15156301/google-play-services-out-of-date-requires-3025100-but-found-2012110)

然后使用 `adb -e install [path-to-APK-file] 安装这些文件，然后重新启动模拟器，它运行良好！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-30T18:20:15.193

我已经在[Stack Overflow question *Trouble using Google sign-in button in emulator*](https://stackoverflow.com/a/21388221/1504898)的回答中回答了这个问题。它仅适用于 Android 4.2.2，但允许您在 AVD 中使用“Intel Atom (x86)”。

我认为让它适用于其他版本的 Android 很容易。只需找到正确的文件。

# jquery - 如何计算一个DIV被点击的次数？

> ID：14040187
> 
> 赞同：2
> 
> 时间：2012-12-26T11:47:32.670
> 
> 标签：jquery, html

我想计算一个 div 点击的次数。例如，

```
<div id="id1">
  click here..
</div>
<div id="id2">
  click here..
</div>
...... 
```

我只想单击这些 div 一次。如果用户第二次点击，则会显示错误消息。任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:03:03.567

您可以使用[`.one`](http://api.jquery.com/one/)绑定长期错误消息处理程序：

```
$("div").one("click", function (event) {
    alert("No error.");
    $(this).on("click.error", function (event) {
        alert("Error from now on.");
    });
}); 
```

通过使用`.one`，我们可以保证外部处理程序只会运行一次，然后立即解除绑定。这已经足够了，因为它第一次运行时，它会设置一个新的处理程序（在 下`click.error`），它将在文档的持续时间内完成，“防止”任何进一步的点击。

小提琴：http: [//jsfiddle.net/EJ6CL/1/](http://jsfiddle.net/EJ6CL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:08:45.353

如果您不知道需要多少个 div，您可以将类添加到这些 div 中并构建一个带有单击元素的数组，如下所示：

```
 var clickedArr = new Array();
var clickedArr = [];
$('.SpecialDiv').click(function(){
  if(jQuery.inArray($(this).attr('id'),clickedArr)!=-1){
     alert("Error already clicked");
}else{
  clickedArr.push($(this).attr('id'));
}
}); 
```

在此示例中，您需要将 SpecialDiv（它只是一个类名，您可以更改它，它仅用于标记这些可点击的 div）类到您的代码中

```
<div class="SpecialDiv" id="id1">
  click here..
</div>
<div class="SpecialDiv" id="id2">
  click here..
</div>
...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:53:54.073

***[jsBin 演示](http://jsbin.com/eruwoz/1/edit)***

```
$('div[id^=id]').click(function(){
      if( $(this).hasClass('clicked') ){
          alert('Already selected');
          return;
      }
      $(this).addClass('clicked');   
}); 
```

*   `$('div[id^=id]')`将查找`div`ID 以 ( `^`) " `id`" 开头的所有元素

*   不仅仅是检查你想要的类名（我用过`clicked`）
*   如果该类不存在，只需添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T11:53:55.173

```
n = 0;
$('#id1').click(function() {
  if(n > 1) {
     $('#id1').update("Error, you have clicked " + n + " times");
  }
  n++;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T11:53:56.793

尝试使用[**one()**](http://api.jquery.com/one/)

```
$("#id1").one("click", function() {
  alert("Here after you cant click Div id1\. Only once fired");
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T11:57:44.360

如果要将数据保存在数据库中，可以使用 ajax 代码。

您可以在单击事件上初始化 ajax 代码并在其他页面上执行您的代码，如此代码。

```
$(".button_id").live("click",function(){
var vid=this.id;
//alert(this.id);
$.ajax({
type    :   'POST',
url     :   'test.php',
data    :   'vid='+vid+'&condition=unlike',
success :   function(data) {

}
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-26T11:58:48.487

`one`是你需要的..

[http://jsfiddle.net/Pd6Jd/2/](http://jsfiddle.net/Pd6Jd/2/)

```
$("#id1").one("click", function() {
  alert("This will be displayed only once.");
});​ 
```

# java - 调用反射方法时Android中的SecurityException

> ID：14040188
> 
> 赞同：6
> 
> 时间：2012-12-26T11:47:46.037
> 
> 标签：java, android, caching, reflection

我正在开发一个 Cache-Cleaner 应用程序，当我在 PackageManager 中调用一个隐藏方法时，我得到了一个 SecurityException，尽管我已经给了我的应用程序使用权限“DELETE_CACHE_FILES”

使用权限：

```
uses-permission android:name="android.permission.DELETE_CACHE_FILES"
uses-permission android:name="android.permission.CLEAR_APP_CACHE"
uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"
uses-permission android:name="android.permission.CLEAR_APP_USER_DATA"
uses-permission android:name="android.permission.GET_PACKAGE_SIZE" 
```

反映的方法：

```
Method method = getPackageManager().getClass().getMethod("deleteApplicationCacheFiles", String.class, IPackageDataObserver.class); 
```

错误：

```
java.lang.reflect.InvocationTargetException
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at <MY_PACKAGE_NAME>.MainActivity$1.onClick(MainActivity.java:70)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.SecurityException: Neither user 10037 nor current process has   android.permission.DELETE_CACHE_FILES.
at android.os.Parcel.readException(Parcel.java:1322)
at android.os.Parcel.readException(Parcel.java:1276)
at android.content.pm.IPackageManager$Stub$Proxy.deleteApplicationCacheFiles(IPackageManager.java:2346)
at android.app.ContextImpl$ApplicationPackageManager.deleteApplicationCacheFiles(ContextImpl.java:2562)
... 14 more 
```

第 70 行：

```
 method.invoke(getPackageManager(), app.packageName, dataObserver); 
```

它说我没有权限，但我已经在我的清单中取消了它......

编辑：我发现了这个；

```
W/PackageManager(62): Not granting permission android.permission.DELETE_CACHE_FILES to package <MY_PACKAGE_NAME>.cachecleaner (protectionLevel=3 flags=0x8be46) 
```

EDIT2：deleteApplicationCacheFiles 的声明（通过 method.toGenericString() 获得）：

```
public void android.app.ContextImpl$ApplicationPackageManager.deleteApplicationCacheFiles(java.lang.String, android.content.pm.IPackageDataObserver) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T13:50:29.140

`DELETE_CACHE_FILES`是一种`signature|system`权限，这意味着它只能由使用固件签名密钥签名或安装在系统分区上的应用程序持有（例如，由 root 设备用户）。普通 SDK 应用程序无法持有此权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-17T11:00:48.503

```
try to use this i tried this code and it worked for me...

private static final long CACHE_APP = Long.MAX_VALUE;
private CachePackageDataObserver mClearCacheObserver; 
void clearCache() {
    if (mClearCacheObserver == null) {
        mClearCacheObserver = new CachePackageDataObserver();
    }

    PackageManager mPM = getPackageManager();

    @SuppressWarnings("rawtypes")
    final Class[] classes = { Long.TYPE, IPackageDataObserver.class };

    Long localLong = Long.valueOf(CACHE_APP);

    try {
        Method localMethod = mPM.getClass().getMethod(
                "freeStorageAndNotify", classes);

        /*
         * Method localMethod=mPM.getClass()
         * .getDeclaredMethod("deleteApplicationCacheFiles", String.class,
         * IPackageDataObserver.class );
         */
        /*
         * Start of inner try-catch block
         */
        try {
            localMethod.invoke(mPM, localLong, mClearCacheObserver);
            // localMethod.invoke(mPM, packageName, mClearCacheObserver);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        /*
         * End of inner try-catch block
         */
    } catch (NoSuchMethodException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
}

private class CachePackageDataObserver extends IPackageDataObserver.Stub {
    public void onRemoveCompleted(String packageName, boolean succeeded) {
        runOnUiThread(new Runnable() {
            public void run() {

                Toast.makeText(MainActivity.this, "cache memory cleared",
                        5000).show();
            }
        });

        Log.d("cachedel", "cache deleted");
    }// End of onRemoveCompleted() method
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:45:08.203

你调用这个：

```
method.setAccessible(true); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-05T08:09:40.697

Try this function **freeStorageAndNotify** with premission

**android.permission.CLEAR_APP_CACHE**

.

# drop-down-menu - 带有子菜单的 CSS 垂直菜单

> ID：14040190
> 
> 赞同：0
> 
> 时间：2012-12-26T11:48:11.170
> 
> 标签：drop-down-menu, css

我一直在严格使用 CSS 制作垂直菜单。

当用户将鼠标悬停在顶部菜单上时，所有子菜单都应垂直显示为父菜单。我试图复制的例子是这个网站上使用的例子：http: [//blackdoctor.org/](http://blackdoctor.org/)

这是我编写的 HTML 代码块：

```
 <!-- divPgContent STARTS -->
 <div id="divPgContent" style="height:200px;">

<!-- divTopMenu1 STARTS -->
<div id="divTopMenu1">

    <ul id="topmenu1" class="menu">
        <li class="current active"><a href="/">Home</a></li>
        <li><a target="_blank" href="#">Menu 2</a></li>
        <li><a target="_blank" href="#">Menu 3</a></li>
        <li><a target="_blank" href="#">Menu 4</a></li>
        <li><a target="_blank" href="#">Menu 5</a></li>
        <li><a href="javascript:void(0);">Menu 6</a>
            <ul>
                <li><a href="#">Sub Menu 1</a></li>
                <li><a href="#">Sub Menu 2</a></li>
                <li><a href="#">Sub Menu 3</a></li>
                <li><a href="#">Sub Menu 4</a></li>
                <li><a href="#">Sub Menu 5</a></li>
                <li><a href="#">Sub Menu 6</a></li>
                <li><a href="#">Sub Menu 7</a></li>
                <li><a href="#">Sub Menu 8</a></li>
                <li><a href="#">Sub Menu 9</a></li>
            </ul>
        </li>
        <li><a href="javascript:void(0);">Menu 7</a>
            <ul>
                <li><a href="#">Sub Menu 1</a></li>
                <li><a href="#">Sub Menu 2</a></li>
                <li><a href="#">Sub Menu 3</a></li>
                <li><a href="#">Sub Menu 4</a></li>
                <li><a href="#">Sub Menu 5</a></li>
                <li><a href="#">Sub Menu 6</a></li>
                <li><a href="#">Sub Menu 7</a></li>
                <li><a href="#">Sub Menu 8</a></li>
                <li><a href="#">Sub Menu 9</a></li>
            </ul>
        </li>
        <li><a href="javascript:void(0);">Menu 7</a>
            <ul>
                <li><a href="#">Sub Menu 1</a></li>
                <li><a href="#">Sub Menu 2</a></li>
                <li><a href="#">Sub Menu 3</a></li>
                <li><a href="#">Sub Menu 4</a></li>
                <li><a href="#">Sub Menu 5</a></li>
                <li><a href="#">Sub Menu 6</a></li>
                <li><a href="#">Sub Menu 7</a></li>
                <li><a href="#">Sub Menu 8</a></li>
                <li><a href="#">Sub Menu 9</a></li>
            </ul>
        </li>
    </ul>

    <div class="divClr"></div>

</div>
<!-- divTopMenu1 ENDS -->

<div class="divClr"></div>

</div>
<!-- divPgContent ENDS --> 
```

这是我的CSS：

```
 #divPgContent
    {
        width:980px;
        height:auto;

        margin:0px auto 0px auto;
        padding:15px 15px;

        border:2px solid #E4E8EA;
    }

    /* divTopMenu1 STARTS */
    ul#topmenu1
    {
        width:100%;
        height:100%;

        margin:0px 0px;
        padding:0px 0px;
    }   
        ul#topmenu1 li
        {
            float: left;
            height: 36px;
            margin: 0 0px;

            display:inline;
            list-style:none;
            margin:0px 0px;
            text-shadow:-1px -1px 1px rgba(0, 0, 0, 0.4);
        }
            #divTopMenu1 ul li.current,
            #divTopMenu1 ul li a:hover
            {
                color:#FFFFFF;
                background-color:#6ABD45;
            }
            ul#topmenu1 a
            {
                display:block; 
                cursor:pointer; 

                padding:10px 10px;

                text-decoration:none;

                font-size: 90%;
                font-weight:bold;

                color:#FFFFFF;
            }

    ul#topmenu1 ul li
    {
        height:auto;
    }
    ul#topmenu1 li ul li span.separator
    {
        font-size:90%;
    }
    #topmenu1 li ul li span .img
    {
        display:none;
    }
    ul#topmenu1 li:hover>*
    {
        display:block;
    }
    ul#topmenu1 li:hover
    {
        position:relative;
        border-bottom:transparent;
    }

    ul#topmenu1 ul
    {
        margin:0px 0px;
        padding:0px 0px;

        display:none;
        position:absolute;
        left:-407px;
        top:100%;

        min-width:950px;    
        background-color:#6ABD45;
        z-index:50000;
    }

    ul#topmenu1 ul a
    {
        font-size:90%; 
        width:130px;
    }
    ul#topmenu1 ul li
    {
        height: 42px;
        margin: 0 0px;

        list-style:none;
        margin:0px 0px;
        text-shadow:-1px -1px 1px rgba(0, 0, 0, 0.4);
    }

    ul#topmenu1 ul li:hover>a
    {
        text-decoration:none; 
        background-color:#6ABD45;
    }

    ul#topmenu1 ul ul
    {
        position:absolute; 
        left:100%; 
        top:0;
    }

    ul#topmenu1>li, ul#topmenu1 li
    {
        margin:0;
    }
    #topmenu1 li .separator
    {
        cursor: pointer;
        display: block;
        font-size: 110%;
        font-weight:bold;
        text-transform: lowercase;
        text-decoration:none;
        padding:15px 15px;
        color:#FFFFFF;
    }
    ul#topmenu1 .deeper ul li:hover>a
    {
        text-decoration:none; 
        background-color:#105F7D;
    }
    /* divTopMenu1 ENDS */ 
```

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:23:42.267

我想这就是您要实现的目标：

[http://jsfiddle.net/Qwzv5/](http://jsfiddle.net/Qwzv5/)

请注意，我将`position: relative`声明移至 ，`ul#topmenu1`以便您可以将子菜单*绝对定位*在不依赖于当前活动的元素中`<li>`。

和`top`成为`left`：

```
ul#topmenu1 ul
{
    ...

    left:0;
    top:39px;
} 
```

* * *

注意：虽然您的 CSS 有点冗长，但我猜您可以使用更简洁的代码来实现相同的目标

# iphone - iphone存折中的动态字段

> ID：14040194
> 
> 赞同：0
> 
> 时间：2012-12-26T11:48:33.757
> 
> 标签：iphone, passbook

我将存折与我的应用程序集成在一起。我需要一些动态的传递字段。如何使用 passkit 框架使用动态值创建 Pass？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:36:57.987

严格来说，除了 and 之外，您在 pass.json 中放置的任何内容`passTypeIdentifier`都是`serialNumber`动态的，从某种意义上说，它可以被新值替换或删除。

这是因为为了更新通行证，Passbook 需要一个完整的 .pkpass 包。`passTypeIdentifier`由于提供了整个捆绑包，因此可以通过执行和更改其中的所有内容， Passbook`serialNumber`使用这些内容将通行证识别为正在更新的通行证。

尽管 Apple 强烈建议不要这样做，但理论上 cookie 的优惠券可以用 JFK 到 LAX 的登机牌代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:54:18.927

Passkit 是用于查看和操作通行证的设备端库。您不能使用它来生成通行证 - 这需要在设备外部使用您自己的工具进行。Apple 提供了一些 Ruby 示例代码，向您展示如何签名和创建通行证。

我建议您查看 Apple 的[Pass Design and Creation](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Creating.html#//apple_ref/doc/uid/TP40012195-CH4-SW1)文档，该文档介绍了如何创建 pass、对其进行签名和更新。通行证的更新使字段动态化。

# clojure - 在 Raspberry Pi 上使用 Leiningen 改进 Clojure REPL 的启动时间

> ID：14040196
> 
> 赞同：17
> 
> 时间：2012-12-26T11:48:49.390
> 
> 标签：clojure, leiningen, raspberry-pi

我得到了一个 Rasperry Pi 512 MB 版本（2012 年末），并在上面安装了[Java SE 8 for ARM 的开发者预览](https://blogs.oracle.com/java/entry/developer_preview_of_java_se)版。当我使用 Leiningen 创建一个新的 Clojure 项目并启动 nREPL`lein repl`时，需要两分钟多一点（大约 130 - 140 秒），直到 REPL 被初始化并可以使用。

直接启动 JAR 文件`java -jar clojure-1.4.0/clojure-1.4.0`时，REPL 会在 25 秒内启动。

我正在使用快速的 10 级 SD 卡（高达 30 MB/s 的 SanDisk Extreme）。为什么使用带有 nRepl 的 Leiningen 与启动 JAR 文件之间的差异如此之大？使用 Leiningen 为 Raspberry Pi 改进启动时间可以做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T23:37:34.387

也可以试试[grenchman](http://leiningen.org/grench.html)：通过 nREPL 快速调用 Clojure 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T12:53:47.500

clojure 的启动缓慢似乎是核心的加载和这里讨论的各种其他事情：

[http://blog.ndk.io/solving-clojure-boot-time.html](http://blog.ndk.io/solving-clojure-boot-time.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:40:00.353

您可以尝试包装 java 命令的[点滴](https://github.com/flatland/drip)，并在后台准备一个新的 jvm 等待。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-10T12:02:07.920

实际上，Leiningen 从它自己的 JVM 开始，然后将项目的 vm 嵌套在其中。
然后它检查部门，找出变化等等。

您可以使用 lein 的蹦床任务避免 vm 嵌套，如下所示：
lein trampoline repl

但是这个命令需要在项目目录中调用 lein

# .htaccess - htaccess 根据当前 URL 或引用者重写内部链接

> ID：14040197
> 
> 赞同：-1
> 
> 时间：2012-12-26T11:48:54.923
> 
> 标签：.htaccess, mod-rewrite, https

我是 htaccess、apache 和 regex 的真正初学者，所以如果我问愚蠢的问题，请原谅我。

**这是我的情况：**

我有一个论坛，允许用户在

```
http://mysite.net or 
https://mysite.net. 
```

这个想法是，它是一个带有自签名证书的廉价共享主机上的爱好项目，所以我真的只需要版主使用 https——普通用户、访客、搜索引擎应该使用 HTTP。

论坛软件似乎对相对链接有点无知，总是为内部页面创建绝对链接。因此，如果使用 HTTP 版本的论坛的用户发布到另一个主题的内部链接，它将是

```
http://mysite.net/topic.... 
```

如果使用 HTTPS 版本的用户发布内部链接，它将是 httpS://.....

**问题：**

如果来自 HTTP 版本的用户单击 HTTPS 链接，他将被重定向到 https 站点，这是不可取的，因为来自浏览器的自签名证书警告会吓到用户。如果来自 HTTPS 版本的版主单击 HTTP 链接，情况会更糟，因为他会被取消登录（我确实使用了安全会话 cookie，并且在那种情况下会话会中断！）。

**解决方案：**

我在考虑 htaccess 重写规则，比如“IF 推荐人包含

```
https://mysite... 
```

并且请求的网址有

```
http://mysite.net/something 
```

将其重写为

```
https://mysite.net/something". 
```

反之亦然。

但我不太了解 apache mod_rewrite 和 regex 也不知道该怎么做。在 Stackoverflow 上搜索了很多教程和几个问题，但无法调整示例。我得到的唯一结果是无/无条件重定向/无限循环。

以下是一些对我不起作用的经过尝试的规则：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} ^https://mysite\.net [NC]
RewriteCond %{REQUEST_URI} ^http://mysite\.net [NC]
RewriteRule ^(.*)$ https://mysite.net/$1 [R=301,NC,L] 
```

或者

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:43:05.197

对此没有 mod_rewrite 解决方案，因为当重写规则运行时，已经发出请求并且已经发生了任何不良副作用。当您检查是否是用户单击 https 链接时，错误的证书警告已经发生，因为证书是在发出*请求之前发送的*。当版主单击非 https 链接时，请求已经发出并且 cookie 未发送，版主已注销。虽然，安全 cookie 可能不会被 HTTP 请求覆盖，并且当主持人切换回 HTTPS 时，旧的会话 cookie 会被保留。

**确实需要**对您的论坛软件进行修复。只需删除**https://mysite.net**部分，一切都会正常工作。

# php - 如何使用 js、PHP 和 MySQL 在特定时间自动编辑表格？

> ID：14040201
> 
> 赞同：0
> 
> 时间：2012-12-26T11:49:22.027
> 
> 标签：php, javascript, mysql, timing

我在 MySQL 数据库上有一个表，其中包含酒店的客户数据。例如：

```
Name   |check-in date| duration
--------------------------------
Dan    |28.09.2012   | 5 days  
Robert |30.09.2012   | 2 days  
Sue    |01.10.2012   | 3 days 
```

持续时间表示客户将在酒店逗留多少天。我想做的事情是自动更新表（在离开时间到来时删除行）。
例如：罗伯特将离开 30.09.2012 + 2 天 = 02.10.2012
我想在 02.10.2012 自动删除该行。
我怎样才能通过使用 JavaScript、PHP 和 MySQL 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:04:51.747

尝试设置 cron 作业。您将在这里获得更多帮助 - [http://www.thesitewizard.com/general/set-cron-job.shtml](http://www.thesitewizard.com/general/set-cron-job.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:35:07.613

为什么要删除该行，只需更改状态（启用禁用）。您还可以使用 ajax 删除 row 。或者告诉我一些关于你的 cpanel 的事情，然后我可以帮你设置 cron。

# android - 安卓：setInitialSavedState

> ID：14040203
> 
> 赞同：7
> 
> 时间：2012-12-26T11:49:59.030
> 
> 标签：android, android-fragments

我有一个使用`Fragment`s 的选项卡式应用程序，还有一个小问题。

`MainActivity`(extends `FragmentActivity`- 除了布局规范之外没有代码) 在其布局中`onCreate`包含一个`Fragment`被调用的`TabsFragment`(extends `Fragment`, implements `OnTabChangeListener`) （将选项卡本身包含在 a 中），使用s`FrameLayout`切换 sub - s。`Fragment``Transaction`

后一个子`Fragments`是具有实际内容的子，当用户转动设备、访问另一个应用程序、接听电话或做其他事情时，我希望保存其状态。目前，sub- `Fragment`s 的状态没有被保存，但活动会记住`Fragment`正在显示的 sub-s。（因此，如果我将设备置于横向模式并在选项卡 3 处于活动状态时转动设备，则选项卡 3 将以纵向模式出现，重置，但显示。因此在我没有做任何事情的情况下保留了某些状态）。

因为我有多种布局（横向和纵向），`android:configChanges="orientation"`所以在清单中不是一个选项 - 我不想使用它，因为它是一个美化的创可贴。

我正在使用 v4 支持库（第 10 版），在搜索 API 之后，我遇到`FragmentManager.saveFragmentInstanceState()`了`Fragment.setInitialSavedState(Fragment f)`. 我已将每个 sub- 的 saveFragmentInstanceState( `Fragment`)`onPause()`放在`TabsFragment`. 我不确定这是否有效，因为无论我放在哪里`setInitialSavedState`，它都会给出`IllegalStateException`- 但即使我刚刚初始化了一个新的子`Fragment`选项卡也会发生这种情况。当我将它放入时它也会`onResume`崩溃`TabsFragment`。

代码片段：

```
//... this is the 'showTab' method
if(getFragmentManager().findFragmentByTag(id) == null)
{
  Fragment f = null;
  if(BASIC_TAB.equals(id))
  {
    f = new BasicTabFragment();
    f.setInitialSavedState(basicState); // basicState was set in onPause()
    getFragmentManager().beginTransaction().replace(tabNo, f, tabID).commit();
  }
} 
```

如果将类似的代码放在 中`onResume`，我会收到以下错误：

错误片段： `FATAL EXCEPTION: main java.lang.RuntimeException: Unable to resume activity (org.example.App/org.example.App/MainActivity): java.lang.IllegalStateException: Fragment already active`

 `-snip-` 

```
Caused by: java.lang.IllegalStateException: Fragment already active at  android.support.v4.app.Fragment.setIniailSavedState(Fragment.java:507)
at org.example.App.TabsFragment.onResume(TabsFragment.java:223) 
```

等等

显然，我在生命周期的错误时间点调用了 setInitialSavedState，但我不清楚何时应该发生这种情况。

此外，鉴于选项卡式设置的复杂性，我开始怀疑 FragmentManager.saveFragmentInstanceState() 是否确实是在这里使用的最佳选择。如果是这样，用什么？如何保存应用程序选项卡的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:53:24.577

当 Activity 被销毁时，Fragment 会从 Activity 中分离出来，并在重新创建时重新附加。因此，片段应该仍然以其当前状态存在。重新连接时，`OnCreateView`再次调用。如果您像从头开始一样初始化所有内容（即将列表设置为`new ArrayList()`），您将清除片段的状态。

尝试在 Fragment 中为需要保留的所有内容创建一个实例变量（即，任何文本字段的字符串 - EditText 字段将按照您的提及自动保存）。例子：

```
字符串文本；
文本视图电视；

公共视图 onCreateView(LayoutInflater i, ViewGroup vg, Bundle b)
{
   // 这将重新膨胀布局中的所有内容。如果您在此处初始化任何文本字段，它会将它们重置为您在 xml 文件中设置的值
   查看 v = i.inflate(R.layout.myLayout, vg, false);

   如果（文本！= null）
       tv.setText(文本);
}

```

`text`当您的 TextView 值更改时（例如在 OnClickListener 或类似中），除了您使用它执行的任何其他操作之外，还设置 的值。当片段被重新附加时，它会将其设置为最后一次所做的更改。

# ibm-mq - 使用 MQ 7 中的远程队列连接到 MQ 5.2 队列

> ID：14040208
> 
> 赞同：1
> 
> 时间：2012-12-26T11:50:48.717
> 
> 标签：ibm-mq, mq

我想知道是否可以使用 IBM MQ 7 中的远程队列连接到 IBM MQ 5.2 队列。我想实现这一点，因为我必须连接到同一应用程序中不同机器中的两个不同队列管理器。我也阅读了有关使用 CCDT 文件的信息。但我也无权访问这些文件。因此我需要知道上述操作是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:08:18.090

是的，任何版本的 WMQ QMgr 都可以与任何其他版本的 WMQ QMgr 通信。但是，V5.2 在大多数平台上已经失去支持大约十年了。这意味着 V7.1 从未针对它进行测试，并且没有对此配置的官方支持。

也就是说，没有什么可以阻止您使用 CCDT 文件。如果您下载[SupportPac MO72](http://ibm.co/SupptPacMO72)，该工具能够定义不同版本的 CCDT 文件。我不知道它是否可以追溯到 V5.2，但是如果不是，您可以尝试最旧的版本，它可以定义和指定最少的频道功能 - QMgr、IP 地址、端口、频道名称。

顺便说一句，无需担心使用 SSL 通道连接到 V5.2 QMgr，因为它在失去支持后从未收到针对发现的安全漏洞的补丁。其中包括 SSL 协议本身的漏洞，以及 MD5 和 SHA-1，所有这些漏洞都已在任何当前版本的 WMQ 中得到修复。如果不考虑 SSL，则连接到 v5.2 QMgr 就像连接到任何其他 QMgr。设置`MQSERVER`环境变量并建立连接。您的客户端应用程序应该可以在没有 CCDT 的情况下很好地处理它。

# objective-c - 方法在 iPhone（模拟器）中没有被调用，但在 iPhone Retina 4-iPhone5（模拟器）上运行良好

> ID：14040209
> 
> 赞同：1
> 
> 时间：2012-12-26T11:50:51.670
> 
> 标签：objective-c, ios, uiscrollview, uigesturerecognizer, xcode4.5

在 myRootViewController 我有`UIPanGesture`，`UIPinchGesture`并`UITapGesture`添加到`myScrollView`.

```
-(void)viewDidLoad
{
   //scroller's pan gesture
    [scroller.panGestureRecognizer addTarget:self action:@selector(performScrollViewPanGesture:)];

   //scroller's tap gesture
    tapToEdit = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(performTapGesture:)];
    tapToEdit.numberOfTapsRequired = 1.0;
    [scroller addGestureRecognizer:tapToEdit];

    //scroller's pinch gesture
    pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(performPinchGesture:)];
    [scroller addGestureRecognizer:pinchGesture];

} 
```

因为我添加了手势`myScrollView`，所以它不是调用`ToucehsBegan`，但我也想用它`ToucehsBegan`来执行一些转换，`touchesMoved`所以我必须创建一个名为`BackgroundTouchLayerController`call的单独类`TouchesBegan`，它是的子类，`UIScrolView`我将它分配给`myScrollView`。

在`myScrollView`课堂`BackgroundTouchLayer`上我所做的就是这样。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    //start Transformation of my Layers
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
   //continues Tranforation
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
   //perform ending Animation
} 
```

现在，它确实`TouchesBegan`总是调用我的转换，我面临的问题是，当我在其中运行我的应用程序`iPhone Retina-4 [iPhone 5] (simulator)`并执行`Pan gesture`时，它调用我的`Pan gesture handler`并正确执行所有操作。**但是**当我在中运行我的应用程序`iPhone [iPhone 4] (simulator)`并执行`Pan Gesture`时，它不会调用`Pan gesture handler`类似的方法`iPhone 5`，而是调用类中`TouchesBegan`的方法`myScrollView`。

有谁知道，可能出了什么问题？

我已经尽力说清楚了，如果还有什么需要请问我。

提前致谢

# python-2.7 - 使用 PyQt 和美丽的汤一起进行网页抓取的问题

> ID：14040211
> 
> 赞同：0
> 
> 时间：2012-12-26T11:51:18.863
> 
> 标签：python-2.7, onclick, pyqt, screen-scraping

我正在使用 PyQt 和美丽汤的组合从网页中抓取数据。PyQt 被用作 Python 和 Javascript 之间的解释器。我正在调用“onclick”事件并尝试在“click”事件后将该 html 提供给 Beautiful soup。以下是参考代码：

```
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup
from PyQt4.QtGui import *  
from PyQt4.QtCore import *  
from PyQt4.QtWebKit import *  

class Render(QWebPage):  
  def __init__(self, url):  
    self.app = QApplication(sys.argv)  
    QWebPage.__init__(self)  
    self.loadFinished.connect(self._loadFinished)  
    self.mainFrame().load(QUrl(url))  
    self.app.exec_()  

  def _loadFinished(self, result):  
    self.frame = self.mainFrame()  
    self.app.quit()  

url = 'http://www.att.com/shop/wireless/devices/smartphones.html'  
r = Render(url)
jsClick = """var evObj = document.createEvent('MouseEvents');
             evObj.initEvent('click', true, true );
             this.dispatchEvent(evObj);
             """

allSelector = "a#deviceShowAllLink" 
allButton   = r.frame.documentElement().findFirst(allSelector)
allButton.evaluateJavaScript(jsClick) 
html = allButton.frame.toHtml()

page = html
soup = BeautifulSoup(page)
soup.prettify()
with open('Smartphones_26decv2.0.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')
    spamwriter.writerow(["Date","Day of Week","Device Name","Price"])
    items = soup.findAll('a', {"class": "clickStreamSingleItem"},text=True)
    prices = soup.findAll('div', {"class": "listGrid-price"})
    for item, price in zip(items, prices):
        textcontent = u' '.join(price.stripped_strings)
        if textcontent:            
            spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%A") ,unicode(item.string).encode('utf8').strip(),textcontent]) 
```

现在运行这个之后，我得到下面提到的错误：

```
File "D:\Microsoft\Pricing\2012-12-26\AT&T_attempt2code.py", line 32, in <module>
    html = allButton.frame.toHtml()
AttributeError: 'QWebElement' object has no attribute 'frame' 
```

请帮助我解决这个问题并原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:16:20.407

如错误消息中所述，问题出在以下行：

```
html = allButton.frame.toHtml() 
```

`allButton`没有`frame`属性，因为它是`QWebElement`（其定义上的转换序列是`Render`-> `QWebFrame`-> `QWebElement`-> `QWebElement`）的一个实例。

在您的代码中，`frame`属性是在`Render._loadFinished`方法中定义的，因此只有`r`对象具有`frame`属性。

如果您将`html`定义更改为：

```
html = r.frame.toHtml() 
```

或者：

```
html = allButton.webFrame().toHtml() 
```

# objective-c - 只画好的矩形

> ID：14040213
> 
> 赞同：0
> 
> 时间：2012-12-26T11:51:37.893
> 
> 标签：objective-c, ios, image, drawing

我有一个用`UIScrollView`and管理的大图像`CATiledLayer`（如[Large Image Downsizing iOS sample code](http://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Introduction/Intro.html)）。我有一个绘图视图（`UIView`用绘图方法覆盖）以绘制线条和矩形。当我放大图像时，我试图找到一种仅重绘可见矩形以提高性能的方法。

我找到了这个`setNeedsDisplayInRect()`方法，我正在使用它：

```
CGRect visibleRect = CGRectApplyAffineTransform(scrollView.bounds, CGAffineTransformMakeScale(1.0 / imageScale, 1.0 / imageScale));
[self.drawingView setNeedsDisplayInRect:visibleRect]; 
```

但在我的`drawRect()`方法中，现在，我重画了所有的线条和矩形。我怎么知道我必须重绘哪些可见线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:48:15.813

您确定线条的位置，然后使用 对它们进行描边`nsbezierpath/cgpath`，对吗？

可能大部分时间都会花在描边算法上，而不是`determining`. 只需将路径的剪辑区域设置为`drawRect's dirtyRect`参数。那时，虚拟笔画应该不花任何钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:00:31.567

您将需要这样的东西，具体取决于您如何绘制图像

```
- (void)drawRect:(CGRect)rect {
    CATiledLayer *tiledLayer = (CATiledLayer *)[self layer];
    CGSize _tileSize = tiledLayer.tileSize;

    int firstCol = floorf(CGRectGetMinX(rect) / _tileSize.width);
    int lastCol = floorf((CGRectGetMaxX(rect)-1) / _tileSize.width);
    int firstRow = floorf(CGRectGetMinY(rect) / _tileSize.height);
    int lastRow = floorf((CGRectGetMaxY(rect)-1) / _tileSize.height);

    for (int row = firstRow; row <= lastRow; row++) {
        for (int col = firstCol; col <= lastCol; col++) {
            CGRect tileRect = CGRectMake(_tileSize.width * col, _tileSize.height * row, _tileSize.width, _tileSize.height);

            tileRect = CGRectIntersection(self.bounds, tileRect);

            // do your drawing
            }
        }
    }
} 
```

# c++ - 在 Mac 上编写 c++ 的最佳环境是什么？

> ID：14040214
> 
> 赞同：0
> 
> 时间：2012-12-26T11:51:40.043
> 
> 标签：c++, xcode, ide

我已经从 windows 和 ubuntu 切换到 macbook，并且我已经研究了用于编程 c++ 的最佳环境。

我发现的一个是 Xcode，它有很多粉丝，但它的问题是编辑器不会猜到任何东西，或者当我输入一些东西时，它不会带来我可以选择的相似关键字！

是否有任何其他软件，如 Visual Studio 或 dev C++，在 Macbook 上功能强大、快速且方便？顺便说一句，我更喜欢免费或便宜的软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:50:28.243

我投票给 Xcode。关于你在 VS 中使用的智能感知，Xcode 只有它不会自动弹出。您需要按“esc”才能弹出。[更多在这里](http://www.michaelbowersox.com/2008/12/29/xcode-intellisense-shortcut/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:04:58.367

最好的 IDE 真的不存在，这是你自己的选择......

[这里](http://en.wikipedia.org/wiki/List_of_Macintosh_software#Developer_tools_and_IDEs)有一个用于编程的 Macintosh 软件列表。

另一个流行的 C++ IDE：

*   Qt 创作者
*   代码::块
*   NetBeans

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T11:55:31.393

也许是[QT Creator](http://qt.digia.com/Product/Developer-Tools/)？它非常快并且具有不错的自动完成功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:39:30.337

当然，您不会找到任何比 xCode 最好的环境。尝试学习 xCode，您一定会喜欢的。

# asp.net - 如何在 c# 中的 windows 窗体中启用 web 浏览器控件中的 javaScript？

> ID：14040216
> 
> 赞同：-1
> 
> 时间：2012-12-26T11:51:45.940
> 
> 标签：asp.net, web, webbrowser-control

我在`asp.net`. 我想以窗口形式在 Web 浏览器控件中打开它。我只需在浏览器的属性中提供 url 即可运行它。它成功运行。但是我的 javascrpit 文件不起作用。

任何人都可以在这方面帮助我了解 javascript 的工作方式吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:59:54.430

WebBrowser 控件没有这样的属性来设置启用或禁用 javascript。如果要启用/禁用 javascript，您可以在 Windows 系统的 Internet 安全选项中启用/禁用它。该选项如下所示：控制面板 -> Internet 选项 -> 安全

[http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/3264223f-d5c0-4c1a-b550-3621ca17635f/](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/3264223f-d5c0-4c1a-b550-3621ca17635f/)

最好的祝福。

# c# - C# 在使用 TableAdaptor 的特定行的更新方法中存在问题

> ID：14040218
> 
> 赞同：1
> 
> 时间：2012-12-26T11:52:01.000
> 
> 标签：c#, c#-4.0, tableadapter

我正在尝试制作一个表单，在文本框中显示用户的所有信息（名字、姓氏、电子邮件..）。然后有一个按钮，用户可以编辑字段并通过 TableAdaptor 和 Update 方法将更新提交到数据库。

问题是我想更新特定列而不是所有列。顺便说一句，我`visible = false`用来强制用户不要编辑特定字段。

这是我正在使用的服务器端。

```
protected void btnUpdate_Click(object sender, EventArgs e)
{
    string username = Session["Login"].ToString();
    string Password = tbOldPassword.Text;
    string newpassword = tbNewPassword.Text;
    string Firstname = tbFirstname.Text;
    string Lastname = tbLastname.Text;
    string Email = tbEmail.Text;
    DateTime DOB = DateTime.Parse(tbDOB.Text);
    string Mobile = tbMobile.Text;
    int Gender = int.Parse(tbGender.Text);
    int Country = int.Parse(tbCountry.Text);

    MembersTableAdapter mta = new MembersTableAdapter();

    // no overload for method 'Update' takes 5 arguments

    mta.Update(Firstname, Lastname, Email, DOB, Mobile);
    lblMessage.Text = "User profile has been updated !";

} 
```

我是个大人物，我想向你学习。

先感谢您。

# php - 如何以正确的方式在php中显示过滤器数据

> ID：14040219
> 
> 赞同：-2
> 
> 时间：2012-12-26T11:52:02.387
> 
> 标签：php

我想以专业的方式显示我的数据，以缩短代码长度并看起来像专业。我不想重复代码。

下面我粘贴了我的代码。如果有人有任何最好的主意，请帮助我。

```
<table>
<?php if(!empty($labour) || !empty($machines) || !empty($materials) || !empty($contractors)){?>
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>amount_paid</th>
        <th>date</th>
    </tr>
<?php }?>
<?php if(!empty($labour)){  

    $i=1; foreach($labour as $res):?>
    <tr>
        <td><?php echo $i;?></td>
        <td><?php echo $res['LabourCashcredit']['name'];?></td>
        <td><?php echo $res['LabourCashcredit']['amount_paid'];?></td>
        <td><?php echo $res['LabourCashcredit']['date'];?></td>
    </tr>
    <?php $i++; endforeach; 
}?>

<?php if(!empty($machines)){ 
    $i=1; foreach($machines as $res):?>
    <tr>
        <td><?php echo $i;?></td>
        <td><?php echo $res['MachinePayment']['first_name'].' '. $res['MachinePayment']['last_name'];?></td>
        <td><?php echo $res['MachinePayment']['amount_paid'];?></td>
        <td><?php echo $res['MachinePayment']['date'];?></td>
    </tr>
    <?php $i++; endforeach; 
} ?>

<?php if(!empty($materials)){ 
    $i=1; foreach($materials as $res):?>
    <tr>
        <td><?php echo $i;?></td>
        <td><?php echo $res['MaterialPayment']['first_name'].' '. $res['MaterialPayment']['last_name'];?></td>
        <td><?php echo $res['MaterialPayment']['paid_amount'];?></td>
        <td><?php echo $res['MaterialPayment']['date'];?></td>
    </tr>
    <?php $i++; endforeach; 
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:12:10.813

如果您不想重复自己，这里有适合您特定情况的某种方法。

```
<table>
<?php if(!empty($labour) || !empty($machines) || !empty($materials) || !empty($contractors)):?>
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>amount_paid</th>
        <th>date</th>
    </tr>
<?php endif; ?>

<?php $items = array(); ?>

<?php
    if(!empty($labour))
      $items[] = array(
          'columns' => array(
              'name', // column 1
              'amount_paid', // column 2
              'date' // column 3
          ),
          'data' => $labour['LabourCashcredit']
      );

   if(!empty($machines))
      $items[] = array(
          'columns' => array(
              'first_name', // column 1
              'amount_paid', // column 2
              'date' // column 3
          ),
          'data' => $machines['MachinePayment']
      );

  // and so on ...
?>

<?php foreach($items as $key => $item_data): ?>
    <tr>
        <td><?php echo $counter // think about some counter here ?></td>
        <?php foreach ($item_data['columns'] as $column): // looping through each column ?>
          <td><?php echo $item_data['data'][$column] // echoing column value ?></td>
        <?php endforeach ?>
    </tr>
<?php endforeach ?>

<table> 
```

# perl - perl -f 检查无法识别文件

> ID：14040220
> 
> 赞同：12
> 
> 时间：2012-12-26T11:52:11.913
> 
> 标签：perl, file

我有一个 perl 脚本，它通过一个包含几千个文件的文件夹。

当我开始编写脚本时，我不知道 perl File::Find 函数，所以为了列出结构中的所有文件，我使用了以下内容：

```
open (FILES, "$FIND $FOLDER -type f |");
while (my $line = <FILES>) {...} 
```

但是现在我想我会尝试从 perl 中执行此操作，而不是启动外部程序。（除了想学习使用 File::Find 之外，没有真正的理由进行此更改。）

为了学习 File::Find find 函数的语义，我在命令行上尝试了一些东西，并将输出与 find 的输出进行了比较。

奇怪的是，程序 find 找到了 1 个文件，但 perl 函数跳过了。

查找作品：

```
machine:~# find /search/path -type f | grep UNIQ
/search/path/folder/folder/UNIQ/movie_file_015.MOV
/search/path/folder/folder/UNIQ/movie_file_145.MOV
/search/path/folder/folder/UNIQ/Thumbs.db

machine:~# find /search/path -type f | wc -l
    6439 
```

Perl 失败：

```
machine:~# perl -e 'use File::Find; find(sub { print $File::Find::name . "\n" if -f }, "/search/path");' | grep  UNIQ
/search/path/folder/folder/UNIQ/movie_file_145.MOV
/search/path/folder/folder/UNIQ/Thumbs.db

machine:~# perl -e 'use File::Find; find(sub { print $File::Find::name . "\n" if -f }, "/search/path");' | wc -l
    6438 
```

更改为排除文件夹而不是包含文件有效：

```
machine:~# perl -e 'use File::Find; find(sub { print $File::Find::name . "\n" unless -d }, "/search/path");' | grep  UNIQ
/search/path/folder/folder/UNIQ/movie_file_015.MOV
/search/path/folder/folder/UNIQ/movie_file_145.MOV
/search/path/folder/folder/UNIQ/Thumbs.db 
```

文件之间的唯一区别是大小：

```
machine:~# ls -l /search/path/folder/folder/UNIQ/
total 4213008
-rw-rw-r--    1 user users    4171336632 May 27  2012 movie_file_015.MOV
-rw-rw-r--    1 user users    141610616 May 27  2012 movie_file_145.MOV
-rw-rw-r--    1 user users       20992 May 27  2012 Thumbs.db 
```

有问题的机器上的 Perl 是旧的但不是古老的：

```
machine:~# perl -version

This is perl, v5.8.8 built for sparc-linux

Copyright 1987-2006, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page. 
```

这是一个已知的错误还是什么？

还是我达到了“-f”的一些大小限制？该文件几乎是 4GB，是选择中最大的。

还是我的测试（如果 -f）选择不当？

**编辑**[试图统计文件]：

大文件失败

```
machine:~# perl -e 'use Data::Dumper; print Dumper(stat("/search/path/folder/folder/UNIQ/movie_file_015.MOV"));' 
```

小文件作品

```
machine:~# perl -e 'use Data::Dumper; print Dumper(stat("/search/path/folder/folder/UNIQ/movie_file_145.MOV"));'
$VAR1 = 65024;
$VAR2 = 19989500;
$VAR3 = 33204;
$VAR4 = 1;
$VAR5 = 1004;
$VAR6 = 100;
$VAR7 = 0;
$VAR8 = 141610616;
$VAR9 = 1349281585;
$VAR10 = 1338096718;
$VAR11 = 1352403842;
$VAR12 = 16384;
$VAR13 = 276736; 
```

二进制“stat”适用于两个文件

```
machine:~# stat /search/path/folder/folder/UNIQ/movie_file_015.MOV
  File: "/search/path/folder/folder/UNIQ/movie_file_015.MOV"
  Size: 4171336632  Blocks: 8149216    IO Block: 16384  Regular File
Device: fe00h/65024d        Inode: 19989499    Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1004/user)   Gid: (  100/   users)
Access: 2012-10-03 18:11:05.000000000 +0200
Modify: 2012-05-27 07:23:34.000000000 +0200
Change: 2012-11-08 20:44:02.000000000 +0100

machine:~# stat /search/path/folder/folder/UNIQ/movie_file_145.MOV
  File: "/search/path/folder/folder/UNIQ/movie_file_145.MOV"
  Size: 141610616   Blocks: 276736     IO Block: 16384  Regular File
Device: fe00h/65024d        Inode: 19989500    Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1004/user)   Gid: (  100/   users)
Access: 2012-10-03 18:26:25.000000000 +0200
Modify: 2012-05-27 07:31:58.000000000 +0200
Change: 2012-11-08 20:44:02.000000000 +0100 
```

还：

```
machine:~# perl -e 'stat("/search/path/folder/folder/UNIQ/movie_file_145.MOV"); print $! . "\n";'
Bad file descriptor

machine:~# perl -e 'stat("/search/path/folder/folder/UNIQ/movie_file_015.MOV"); print $! . "\n";'
Value too large for defined data type 
```

**编辑2**：

```
# perl -V | grep "uselargefiles|FILE_OFFSET_BITS"
config_args='-Dccflags=-DDEBIAN -Dcccdlflags=-fPIC -Darchname=sparc-linux -Dprefix=/usr -Dprivlib=/usr/share/perl/5.8 -Darchlib=/usr/lib/perl/5.8 -Dvendorprefix=/usr -Dvendorlib=/usr/share/perl5 -Dvendorarch=/usr/lib/perl5 -Dsiteprefix=/usr/local -Dsitelib=/usr/local/share/perl/5.8.8 -Dsitearch=/usr/local/lib/perl/5.8.8 -Dman1dir=/usr/share/man/man1 -Dman3dir=/usr/share/man/man3 -Dsiteman1dir=/usr/local/man/man1 -Dsiteman3dir=/usr/local/man/man3 -Dman1ext=1 -Dman3ext=3perl -Dpager=/usr/bin/sensible-pager -Dstatic_ext=B ByteLoader GDBM_File POSIX re -Dusemymalloc -Uuselargefiles -Uafs -Ud_csh -Uusesfio -Uusenm -Duseshrplib -Dlibperl=libperl.so.5.8.8 -Dd_dosuid -des'
useperlio=define d_sfio=undef uselargefiles=undef usesocks=undef 
```

问题解决了”：

```
machine:~# perl -e 'stat("/search/path/folder/folder/UNIQ/movie_file_015.MOV"); print $!{EOVERFLOW} . "\n";'
92
machine:~# perl -e 'stat("/search/path/folder/folder/UNIQ/movie_file_145.MOV"); print $!{EOVERFLOW} . "\n";'
0 
```

作品：

```
# perl -e 'use File::Find; find(sub { print $File::Find::name . "\n" if -f or ( $!{EOVERFLOW} > 0 and not -d) }, "/search/path");' | grep UNIQ
/search/path/folder/folder/UNIQ/movie_file_015.MOV 
/search/path/folder/folder/UNIQ/movie_file_145.MOV 
/search/path/folder/folder/UNIQ/Thumbs.db 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T14:02:52.003

根据[一些](http://coding.derkeiler.com/Archive/Perl/perl.beginners/2004-03/0608.html)谷[歌搜索](http://www.justskins.com/forums/about-stat-problem-49666.html)，您的 perl 解释器似乎没有使用[大文件支持](http://perldoc.perl.org/perl56delta.html#Large-file-support)编译，导致`stat`（以及任何内部依赖它的文件测试，包括`-f`）对于大于 2GB 的文件失败。

要检查是否是这种情况，请运行：

```
perl -V | grep "uselargefiles|FILE_OFFSET_BITS" 
```

如果您的 perl 支持大文件，则输出应显示类似于`uselargefiles=define`and的内容`-D_FILE_OFFSET_BITS=64`。如果没有，很可能你的 perl 不支持大文件。

`stat`为什么即使只是ing 文件也需要大文件支持，这可能有点令人费解。[潜在的问题是stat(2)](http://linux.die.net/man/2/stat)系统调用的 32 位版本，而不是返回一个虚假的大小，`EOVERFLOW`如果应用于大于 2GB 的文件，则会简单地失败：

> "**溢出**
> 
> > ( **stat** ()) *path*是指一个文件，其大小不能用*off_t 类型*表示。当在没有*-D_FILE_OFFSET_BITS=64*的 32 位平台上编译的应用程序在大小超过*(1<<31)-1*位的文件上调用**stat** () 时，可能会发生这种情况。”

 *从技术上讲，收到该错误*应该*足以表明命名文件确实存在（尽管我猜它也可能是一个真正巨大的目录），但是 perl 不够聪明，无法意识到这一点——它只是看到 stat 失败，所以什么都不返回。

（*编辑：*正如 ikegami 在评论中正确指出的那样，如果 stat(2) 调用失败，则`-f`返回`undef`而不是 0 或 1，并设置`$!`为导致失败的错误代码。因此，如果您不介意假设所有目录条目大小 > 2GB 是文件，你可以做一些`-f $_ or (not defined -f _ and $!{EOVERFLOW})`检查它。）*

# tridion - Success 文件夹中的传输包

> ID：14040221
> 
> 赞同：4
> 
> 时间：2012-12-26T11:52:26.267
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

在`cd_deployer_conf`我们设置`Cleanup="false`的文件中，传输包在发布后不会被删除，但我们可以看到 3 个不同的包用于单个发布操作，例如

`tcm_0-264891-66560.COMMIT`

`tcm_0-264891-66560.Content`

`tcm_0-264891-66560.PREPARE`

这是正常行为吗？或者我们可以做一些配置以便只创建一个（.content）包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:43:05.517

这确实是正常的行为。

Tridion 2011 中的部署是事务性的，因此您可以看到事务的不同阶段。

如果您发布到多个目标，您将看到所有目标都获取并处理它们的`PREPARE`和`Content`包。只有在所有目标报告处理这些包成功后，他们才会收到`Commit`包。

# java - 我如何将我的 gmail 用作 SMTP 并在 java 代码中使用它来发送电子邮件。？

> ID：14040222
> 
> 赞同：1
> 
> 时间：2012-12-26T11:52:51.920
> 
> 标签：java, email

我的申请需要向选定的人发送电子邮件。我的应用程序完全基于 Java。我什至不知道如何将我的 gmail 帐户用作 SMTP 邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:57:06.507

这是一个示例，更改`from`，`pass`并`to`根据您的要求

```
String host = "smtp.gmail.com";
String from = "username";
String pass = "password";
Properties props = System.getProperties();
props.put("mail.smtp.starttls.enable", "true"); // added this line
props.put("mail.smtp.host", host);
props.put("mail.smtp.user", from);
props.put("mail.smtp.password", pass);
props.put("mail.smtp.port", "587");
props.put("mail.smtp.auth", "true");

String[] to = {"to@gmail.com"}; // added this line

Session session = Session.getDefaultInstance(props, null);
MimeMessage message = new MimeMessage(session);
message.setFrom(new InternetAddress(from));

InternetAddress[] toAddress = new InternetAddress[to.length];

// To get the array of addresses
for( int i=0; i < to.length; i++ ) { // changed from a while loop
    toAddress[i] = new InternetAddress(to[i]);
}
System.out.println(Message.RecipientType.TO);

for( int i=0; i < toAddress.length; i++) { // changed from a while loop
    message.addRecipient(Message.RecipientType.TO, toAddress[i]);
}
message.setSubject("sending in a group");
message.setText("Welcome to JavaMail");
Transport transport = session.getTransport("smtp");
transport.connect(host, from, pass);
transport.sendMessage(message, message.getAllRecipients());
transport.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:57:35.110

[这](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)是您需要的所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:58:27.683

如果您在 Windows 中，则可以将 Fake Sendmail 与 wamp 服务器一起使用，它的效果很好，她是如何安装和配置它的教程：

[http://glob.com.au/sendmail/](http://glob.com.au/sendmail/)

# jquery - 在 Backbone 模型中保存多个值的 CSS 属性

> ID：14040226
> 
> 赞同：0
> 
> 时间：2012-12-26T11:53:13.340
> 
> 标签：jquery, css, backbone.js

所以，我有一个代表按钮的主干模型，我的模型有一些默认值，关于它的样式（背景颜色、边框半径等）。有没有办法一次访问某些包含多个值的 css 属性？（例如边框：1px纯黑色）或者我将不得不做这样的事情：

```
setCssStyle: function () {
    this.$el.css({
        'border-width': myButton.get('borderwidth') + 'px',
        'border-style': myButton.get('borderstyle'),
        'border-color': myButton.get('bordercolor')
    });
} 
```

如果我可以一次设置多个 css 值，我的模型默认值将如何变化？如果我是正确的，多个值将保存在一个数组中，如下例所示

```
var Button = Backbone.Model.extend({
    defaults {
        border: {width:1, style:'solid', color:'#00000'}
    }
}); 
```

代替：

```
var Button = Backbone.Model.extend({
    defaults: {
        borderwidth: 1,
        borderstyle: 'solid',
        bordercolor: '#000000'
    }
}) 
```

其他没有这种“解决方法”的 CSS 属性（例如 box-shadow）会发生什么情况？有没有更方便的方法在我的 setCssStyles 方法中设置以下 css 属性？

```
box-shadow:inset 0px 1px 0px 0px #ffffff; 
```

# python - Django il8n - 在 Windows 上翻译外部应用程序

> ID：14040230
> 
> 赞同：3
> 
> 时间：2012-12-26T11:53:46.477
> 
> 标签：python, django, windows, localization, translation

我是 Django 翻译的新手。我过去常常通过将翻译后的字符串硬编码到正确的位置来翻译所有内容，但我现在正在开发一个严肃的应用程序，并且想把它做好。

我需要翻译一个外部应用程序（优秀的 django-allauth），所以我想我可以将它的德语翻译复制到我自己的翻译文件中，翻译所有内容，然后使用它。稍后我计划将我的葡萄牙语翻译贡献回 allauth 项目。

但是，当我这样做时，Django 将我的翻译字符串标记为注释`manage.py makemessages`，因为它找不到任何用处。以下是文件的前几行：

```
#~ msgid "Password"
#~ msgstr "Passwort"

#~ msgid "Password must be a minimum of {0} characters."
#~ msgstr "Das Passwort muss aus mindestens {0} Zeichen bestehen."

#~ msgid "Remember Me"
#~ msgstr "Angemeldet bleiben"

#~ msgid "E-mail address"
#~ msgstr "E-Mail-Adresse" 
```

我发现[了这个类似的问题，并在](https://stackoverflow.com/questions/3933824/djangos-i18n-with-third-party-apps)[http://source.mihelac.org/2010/07/31/handling-i18n-in-django-projects/](http://source.mihelac.org/2010/07/31/handling-i18n-in-django-projects/)阅读了很好的指南，它要求我们使用符号链接来帮助 makemessages 找到翻译字符串。但我在 Windows 上。我没有符号链接。

如何在不将其添加到我的项目文件夹的情况下翻译此外部应用程序？我正在使用 git、Windows Server 2003 和 Django 1.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:50:56.400

我最终分叉了这个项目并自己翻译了它。然后我将相应的 requirements.txt 条目设置为指向我的 fork。

我本可以使用@ixe013 的好建议，但我认为这种方式会更直接，因为无论如何我都想将翻译贡献给项目。

# android - 如何在 Android WebView 中显示自定义“网页不可用”页面？

> ID：14040231
> 
> 赞同：5
> 
> 时间：2012-12-26T11:53:52.437
> 
> 标签：android, webview

`WebView`当没有可用的连接页面/警报时（例如加载本地 html 页面或警报），我会做一些事情。我必须使用[防止 WebView 显示“网页不可用”](https://stackoverflow.com/questions/6552160/prevent-webview-from-displaying-web-page-not-available)但没有任何成功。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:00:45.823

这一切都归结为简单地显示来自 onReceivedError 的 AlertDialog：

```
 @Override
 public void onReceivedError(WebView webView, int errorCode, String description, String failingUrl) {
                    //Clearing the WebView
                    try {
                        webView.stopLoading();
                    } catch (Exception e) {
                    }
                    try {
                        webView.clearView();
                    } catch (Exception e) {
                    }
                    if (webView.canGoBack()) {
                        webView.goBack();
                    }
                    webView.loadUrl("about:blank");

                    //Showing and creating an alet dialog
                    AlertDialog alertDialog = new AlertDialog.Builder(youractivity.this).create();
                    alertDialog.setTitle("Error");
                    alertDialog.setMessage("No internet connection was found!");
                    alertDialog.setButton("Again", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int which) {
                           finish();
                           startActivity(getIntent());
                       }
                    });

                    alertDialog.show();

                    //Don't forget to call supper!
                    super.onReceivedError(webView, errorCode, description, failingUrl);
                } 
```

如果您是 WebView 的新手，您将希望像这样实现 onReceivedError：

```
mWebView.setWebViewClient(new WebViewClient() {
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
        //Code here
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-18T15:33:28.150

上面的代码给了我两个弃用警告，所以我建议如下修改它。这进入包含 WebView 组件的活动中：

```
 myWebView.setWebViewClient(new WebViewClient() {
        public void onReceivedError(WebView webView, int errorCode, String description, String failingUrl) {
            try {
                webView.stopLoading();
            } catch (Exception e) {
            }

            if (webView.canGoBack()) {
                webView.goBack();
            }

            webView.loadUrl("about:blank");
            AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
            alertDialog.setTitle("Error");
            alertDialog.setMessage("Cannot connect to the R2R Server. Check your internet connection and try again.");
            alertDialog.setButton(DialogInterface.BUTTON_POSITIVE, "Try Again", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    finish();
                    startActivity(getIntent());
                }
            });

            alertDialog.show();
            super.onReceivedError(webView, errorCode, description, failingUrl);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-04T08:04:10.567

您可以从资产加载 html 文件。把你的 html 放在下面。资产/html/no_connection.html

```
@Override
        public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error)
        {
Toast.makeText(getActivity(),String.valueOf(error.getErrorCode())+":"+ error.getDescription(),Toast.LENGTH_LONG).show();
            wv.loadUrl("file:///android_asset/html/no_connection.html");
            super.onReceivedError(view, request, error);
        } 
```

以下一项在 api 23 中已弃用

```
@Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
            // TODO: Implement this method
            super.onReceivedError(view, errorCode, description, failingUrl);
        } 
```

如果出了什么问题，请原谅我。我不熟练。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T00:16:06.117

```
 @Override 
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
        super.onReceivedError(view, errorCode, description, failingUrl);

// declare a text view in your xml
                sample_TextView.setText(R.string.no_internet_connection);

        view.loadUrl("about:blank");
    } 
```

# python - Mustache：引用嵌套列表迭代中的元素

> ID：14040239
> 
> 赞同：2
> 
> 时间：2012-12-26T11:54:30.143
> 
> 标签：python, iteration, mustache

我想知道是否有办法在 Pystache 的嵌套列表迭代中显式引用元素。更具体地说，我有两个列表：

```
xs = [x1,x2]
ys = [y1,y2,y3] 
```

当迭代其中一个列表时，我可以简单地使用隐式迭代器`{{.}}`。但是当我想在这两个列表上嵌套迭代时，我需要一种方法来引用`xs`and的当前元素`ys`。例如，我想获得 x 和 y 的每个组合，并使用如下的假想模板：

```
{{#xs}}
{{#ys}}
blah <{{x}}> <{{y}}> .
{{/ys}}
{{/xs}} 
```

哪个应该产生：

```
blah <x1> <y1> .
blah <x1> <y2> .
blah <x1> <y3> .
blah <x2> <y1> .
blah <x2> <y2> .
blah <x2> <y3> . 
```

有没有办法在 Mustache 模板中实现这一点？PHP 实现似乎有一个 pragma `{{%IMPLICIT-ITERATOR iterator=i}}`，在这里会很酷，但是 Pystache 中没有这样的东西，对吧？

（并且由于它只是指定需要组合哪些列表的模板，我不想事先构建列表的笛卡尔积，但更喜欢在模板中执行此操作的方法。）

# php - 如果表单出现错误，则在提交后显示多个选定的下拉值

> ID：14040240
> 
> 赞同：2
> 
> 时间：2012-12-26T11:54:37.133
> 
> 标签：php, html

我有这个下拉菜单，用户可以选择多个选项，如果表单出现错误，我如何在提交按钮后将选定的值保留在表单上

```
<th align="right" style="width: 264px"><label id="lcell">*Preferred City for Relocation Work :</label></th>
<td><select  onchange="document.getElementById('cand_pref').style.display='none';" name="pcity[]" id="pcity" multiple="multiple" >
<?php 
$pcitylist =  array(
    'Mizoram' => array('Aizawl', 'Champhai', 'Kolasib', 'Lawngtlai', 'Lunglei', 'Mamit', 'Saiha', 'Serchhip'),
    'Nagaland' => array('Dimapur', 'Kohima', 'Mokokchung', 'Mon', 'Phek', 'Tuensang', 'Wokha', 'Zunheboto'),
    'Orissa' => array('Angul', 'Boudh', 'Bhadrak', 'Bolangir', 'Bargarh', 'Baleswar', 'Cuttack', 'Debagarh', 'Dhenkanal', 'Ganjam', 'Gajapati', 'Jharsuguda', 'Jajapur', 'Jagatsinghpur', 'Khordha', 'Kendujhar', 'Kalahandi', 'Kandhamal', 'Koraput', 'Kendrapara', 'Malkangiri', 'Mayurbhanj', 'Nabarangpur', 'Nuapada', 'Nayagarh', 'Puri', 'Rayagada', 'Sambalpur', 'Subarnapur', 'Sundargarh'),
    'Puducherry' => array('Karaikal', 'Mahe', 'Puducherry', 'Yanam')
);

foreach ($pcitylist as $key => $pcitylist1) {
    echo '<optgroup label="'.$key.'">';
        foreach ($pcitylist1 as $finalCity) {
            echo '<option value="' . $finalCity . '"' . (isset($_POST['pcity']) && $_POST['pcity'] == $finalCity ? ' selected' : '') . '>' . $finalCity . '</option>';
        }
    echo '</optgroup>';
} 
?>
</select></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:05:37.563

您使用名称为 pcity[] 的 select 在这种情况下，$_POST['pcity'] 将包含所选值的数组。你应该使用[in_array()](http://php.net/manual/ru/function.in-array.php)函数来检查选择了什么项目。

```
echo '<option value="' . $finalCity . '"' . (isset($_POST['pcity']) && in_array($finalCity, $_POST['pcity']) ? ' selected' : '') . '>' . $finalCity . '</option>'; 
```

# php - 有什么方法可以从 MySQL 执行 PHP 脚本吗？

> ID：14040241
> 
> 赞同：20
> 
> 时间：2012-12-26T11:54:37.103
> 
> 标签：php, mysql

我想从 MySQL 过程调用和执行 PHP 脚本。这可能吗？

```
CREATE PROCEDURE simpleproc (OUT param1 INT)
    BEGIN
         Call my php script here
    END// 
```

**[编辑]**
实际上，我试图在满足条件时引发事件 - 例如，当我的表字段值与当前时间匹配时。然后，我想捕捉事件并发送电子邮件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-26T12:03:50.703

有可能，请参阅 MySQL 常见问题解答以了解如何

[触发器可以通过 UDF 调用外部应用程序吗？](http://dev.mysql.com/doc/refman/5.1/en/faqs-triggers.html#qandaitem-B-5-1-10)

但是，如果您不得不诉诸于此，这可能是您的糟糕设计

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-26T12:22:13.477

```
DELIMITER @@

CREATE TRIGGER Test_Trigger
AFTER INSERT ON MyTable
FOR EACH ROW
BEGIN

DECLARE cmd CHAR(255);
DECLARE result int(10);
SET cmd=CONCAT('/usr/bin/php ', '/home/test/beta/demo.php');
SET result = sys_exec(cmd);

END;
@@
DELIMITER ; 
```

[**来源**](http://crazytechthoughts.blogspot.pt/2011/12/call-external-program-from-mysql.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T12:21:25.980

为了解决您的问题，您可以为任务创建表。从存储过程中，您可以将任务的任何字符串放入此表。在服务器上，您可以通过 crontab 运行 PHP 脚本。脚本将检查该表并进行一些操作。

# object - emacs/gdb：显示共享对象的来源

> ID：14040242
> 
> 赞同：1
> 
> 时间：2012-12-26T11:54:45.930
> 
> 标签：object, emacs, gdb, shared, gud

我在使用 emacs 和 gdb 调试 C++ 时遇到问题。我可以在共享对象中定义的函数中设置断点，只需通过手动添加它们

```
b file_in_so.cpp:23 
```

但是，如果我在 emacs 窗口中打开 file_in_so.cpp，我将无法通过鼠标设置断点。Emacs 根本不知道这个源文件属于源文件列表。如果 gdb 已经运行并在另一个断点处等待，也会发生这种情况。是否有命令告诉 emacs 重新加载所有源的当前列表，即使是在共享对象中定义的那些？

# javascript - 在 Javascript 中截断字符串

> ID：14040243
> 
> 赞同：0
> 
> 时间：2012-12-26T11:54:48.237
> 
> 标签：javascript

我知道这很荒谬，但我坚持

我在 asp classic 中有一个使用 fileupload 的文件路径

文件路径是*C:\FakePath\3.jpg*

我想在一个变量中检索它，这样它只会给我*3.jpg*

`substring()`不`substr()`包括 3 我不知道为什么

```
logopath = C:\FakePath\3.jpg;
logopath = logopath.substring(10); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:56:44.853

尝试这个

`'C:\\FakePath\\3.jpg'.split('\\').pop();`//“3.jpg”

或（正则表达式）

```
'C:\\FakePath\\3.jpg'.replace(/^.*\\/, '');   // "3.jpg" 
```

![在此处输入图像描述](../Images/0c15bcec0ed42992624d1b7de1673185.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:13:27.007

If you'd like to solve it **in classic ASP,** plesae try this.

```
<%
dim aryPath
aryPath = Split("C:\FakePath\3.jpg","\")
Response.Write aryPath(2)
%> 
```

Hope it could be helpful.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:56:01.287

```
logopath = encodeURIComponent( logopath ).replace( /.+FakePath%0/, '' ) 
```

'\3' 被解释为八进制转义序列，它指向不可打印的 ASCII 字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T11:59:23.510

如果您希望使用子字符串：

```
var str="C:\\FakePath\\3.jpg";
var imgName = str.substring(12); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T09:37:53.333

使用这样的代码：

```
function FileChanged(input) {
    var fullPath = input.value;
    var index = fullPath.lastIndexOf("\\");
    var fileName = (index < 0) ? fullPath : fullPath.substr(index + 1);
    alert(fileName);
}​ 
```

中间的两条线是您所需要的：它们将采用最后一个斜线之后的值。这样不管路径是什么，它总是只返回文件名。

[现场测试用例](http://jsfiddle.net/U2pVT/)。

# html - 如何在 html5 中使用人员的详细信息对人员表进行编码

> ID：14040249
> 
> 赞同：0
> 
> 时间：2012-12-26T11:56:04.153
> 
> 标签：html, html-table

我有一些人的以下数据：

```
Name and surname | Category | Expiration date | +

----------

Sport            | xxxxxxxxxxxxxxxxxx

Base             | xxxxxxxxxxxxxxxxxx

Beginning date   | xxxxxxxxxxxxxxxxxx

etc... 
```

无论如何，它应该看起来像这样： [http ://www.hoo.hr/kategorizacija.aspx?sportid=32&katid=I&olimpid=3&zupanijaid=0](http://www.hoo.hr/kategorizacija.aspx?sportid=32&katid=I&olimpid=3&zupanijaid=0)

只需单击表格右侧的加号，就会弹出有关某些运动员的信息（给它一点时间，它是一个旧脚本）

目前这是通过 ajax 从数据库加载附加数据然后插入一个新的 tr 元素来实现的，该 tr 元素包含 table 元素（例如`<tr><td><table>...</table></td></tr>`）。

这不是很好的标记，搜索引擎无法搜索。有没有更好的方法可以通过使用描述列表来实现这一点？（我不会使用 ajax，而是一次性为所有运动员加载额外的数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:34:39.967

第一个问题是，如果您想在客户端（html、javascript）或服务器端（C#、Java、PHP 或类似的东西）构建网格。如果你想在客户端构建它，你将需要一个 ajax 调用，即使你想一次加载所有数据。

下一个问题是，完整列表中的数据量有多大，加载数据集需要多少性能。您可以采取不同的方式。您可以按原样执行并仅加载在网格中实际可见的数据，您可以按照您的想法执行并加载完整的数据集，您还可以加载一定数量的数据（例如第一个200 行）并提供在需要时加载更多数据的选项。

如果要为搜索引擎优化网格数据本身，则必须构建网格服务器端，因为这样爬虫检索页面时，数据会直接呈现出来。但这也仅适用于直接显示所有现有数据而不分页的搜索引擎。

对于您的标记不好的观点，在我看来，表格是构建数据网格的最佳解决方案，但不需要嵌套表格。您可以使用在 div 中携带详细数据的隐藏行来实现相同的目的。

因此，总而言之，这完全取决于您的具体用例，只有您才能决定检索数据和构建网格的最佳方式是什么。

# jquery - 上一个事件完成后，一个接一个地引发 jquery

> ID：14040252
> 
> 赞同：0
> 
> 时间：2012-12-26T11:56:35.637
> 
> 标签：jquery

> **可能重复：**
> [如何对与 jQuery 绑定的事件进行排序](https://stackoverflow.com/questions/290254/how-to-order-events-bound-with-jquery)

我为同一个元素绑定了两个事件。让我们说按钮：

```
<button>Click</button>

<script>
/*First Event*/
 $('button').click(function(){
   /***Have some piece of code which gets the data that is used for next event***/
 });

/*Second Event*/
 $('button').click(function(){
   /***do some operations with the data that has been fetched from the previous event***/
 });
</script> 
```

现在，每当在按钮上触发单击时，都会同时调用两个事件..所以我无法实现我的目标。

一旦第一个事件完成它的工作，我们可以限制事件应该被调用吗......

**注意：**上面的代码是解释我的问题的伪代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:40:53.273

这两个处理程序实际上是按顺序调用的。但是，我们必须假设第一个涉及异步任务（可能是 ajax），而第二个处理程序需要第一个处理程序获得的数据。

秘诀是在一个处理程序中执行两项任务，如下所示：

```
$('button').click(function(){
    $.ajax({
        //options
    }).then(function(data) {
        //do some operations with the data that has been fetched
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:58:12.583

AFAIK 您无法为 jQuery 事件定义顺序，但您可以使用手动调用或回调来实现相同的目的。

# google-analytics-api - Google analitics API - 页面列表的有机搜索值

> ID：14040253
> 
> 赞同：1
> 
> 时间：2012-12-26T11:56:36.243
> 
> 标签：google-analytics-api

如何在一段时间内从 GA API 一次获取页面列表的有机搜索值？

例如，我想得到这样的东西：

1.  http://example.com/page1 - 4324
2.  http://example.com/page2 - 3123
3.  http://example.com/page3 - 43

# android - 带 Eclipse 的 phonegap 条码扫描仪

> ID：14040259
> 
> 赞同：0
> 
> 时间：2012-12-26T11:57:17.577
> 
> 标签：android, eclipse, cordova, zxing

[我使用本](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)教程创建了一个新的 android 项目，它工作正常。然后我尝试按照[本](http://simonmacdonald.blogspot.co.il/2011/12/installing-barcode-plugin-for-phonegap.html)教程进行操作，以便为我的应用程序实现条形码读取功能，但在运行应用程序时遇到此错误：

-`The container 'Android Dependencies' references non existing library 'C:\Users\myname\workspace\CaptureActivity\bin\captureactivity.jar'`

我刚开始使用`ecilpse`，`phonegap`所以这对你们中的一些人来说可能是微不足道的，但我试图重新创建这个应用程序几次，但总是以同样的错误告终。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:36:49.090

@Yoav，尝试使用我的示例项目。您应该能够将它们导入 Eclipse 并让示例项目快速运行。

[http://simonmacdonald.blogspot.ca/2012/10/barcode-scanner-example-projects.html](http://simonmacdonald.blogspot.ca/2012/10/barcode-scanner-example-projects.html)

至于您遇到的问题，您是否在 CaptureActivity 项目中看到任何会阻止构建 jar 的错误？

# arrays - 如何迭代n维？

> ID：14040260
> 
> 赞同：10
> 
> 时间：2012-12-26T11:57:19.853
> 
> 标签：arrays, algorithm, loops, dimension

给定维数和每个变量的大小，我如何迭代一个 n 维数组？

```
int n;
int size[n]; 
```

由于维度的数量不固定，我无法为每个维度编写嵌套循环。我需要代码来处理每个维度的数量。

此外，实际数据存储在 n 维数组或包含大行中所有数据的平面数组中并不重要。两者都可以接受。

```
int data[16][42][14];   // n-dimensional array
int data[16 * 42 * 14]; // flat array containing the same data 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T12:00:16.670

您可以使用递归，对于每个维度“猜测”它的索引并递归调用一个较小的问题，类似于（伪代码）：

```
iterate(d,n,size,res):
   if (d >= n): //stop clause
       print res
       return
   for each i from 0 to size[d]:
       res.append(i) //append the "guess" for this dimension
       iterate(d+1,n,size,res)
       res.removeLast //clean up environment before next iteration 
```

在哪里：

*   `d`是当前访问的维度
*   `size`,`n`是输入
*   `res`是表示当前部分结果的向量

调用 with `iterate(0,n,size,res)`，其中`res`初始化为空列表。

* * *

C++ 代码应该是这样的：

```
void iterate(int d,int n,int size[], int res[]) {
    if (d >= n) { //stop clause
       print(res,n);
       return;
   }
   for (int i = 0; i < size[d]; i++) { 
       res[d] = i;
       iterate(d+1,n,size,res);
   }
} 
```

完整的代码和一个简单的例子可以在[ideone上找到](http://ideone.com/VaUHma)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-30T23:18:19.273

Python代码：

```
def nd_range(start, stop, dims):
  if not dims:
    yield ()
    return
  for outer in nd_range(start, stop, dims - 1):
    for inner in range(start, stop):
      yield outer + (inner,) 
```

例子：

```
print(list(nd_range(0, 3, 3))) 
```

> [(0, 0, 0), (0, 0, 1), (0, 0, 2), (0, 1, 0), (0, 1, 1), (0, 1, 2), ( 0, 2, 0), (0, 2, 1), (0, 2, 2), (1, 0, 0), (1, 0, 1), (1, 0, 2), (1, 1, 0), (1, 1, 1), (1, 1, 2), (1, 2, 0), (1, 2, 1), (1, 2, 2), (2, 0, 0), (2, 0, 1), (2, 0, 2), (2, 1, 0), (2, 1, 1), (2, 1, 2), (2, 2, 0) , (2, 2, 1), (2, 2, 2)]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:07:56.350

你可以使用递归。这是嵌套数组的伪代码解决方案：

```
iterate_n(array, n)
    if n == 0
        do something with the element
    else
        for ary in array
            iterate_n(ary, n-1)
        end_for
    end_if
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T22:46:44.420

这是我在 MATLAB 中使用递归的方法：

```
function out=iterate(data,func,dim)
% Usage: out=iterate(data,func)
% This function individually applies the user defined function 'func' to 
% every element of the array 'data'.
% The third input 'dim' is for internal recursive use only, after global 
% setup variables have been initialized.

global sz inds g_out
% 'sz' is size(data) with singleton dimensions removed
% 'inds' is an array of size [1 length(sz)] containing the current indices
% 'g_out' is where parts of the output are accumulated throughout iteration

if nargin<3
    %Setup 'inds' 'sz' 'g_out'
    dim=1;  %'dim' is the current dimension to iterate through
    sz=size(data);
    if sz(2)==1
        sz=sz(1);
    end
    inds=ones(1,length(sz));

    %Initialize the output as the proper class
    %Depends on the output of the user given function
    switch class(func(data(1)))
        case 'logical'
            g_out= false(sz);
        case 'double'
            g_out=double(zeros(sz));
        case 'char'
            g_out=repmat(' ',sz);
        otherwise
            g_out=cast(zeros(sz),class(func(data(1)))); %#ok<ZEROLIKE>
    end
end

for i=1:sz(dim)
    inds(dim)=i;
    ndx=subs2ind(sz,inds);
    if dim<length(sz)
        iterate(data,func,dim+1);
    else
        g_out(ndx)=func(data(ndx));
    end
end
out=g_out;
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T14:09:41.580

要在 JavaScript 中列出所有组合，无需递归：

```
function listCoords(dimensions) {
    var cumulatives = new Array(dimensions.length);
    var total = 1;
    for (var d = dimensions.length - 1; d >= 0; d--) {
        cumulatives[d] = total;
        total *= dimensions[d];
    }
    var coords = new Array(total);
    for (var i = 0; i < total; i++) {
        var coord = new Array(dimensions.length);
        for (var d = dimensions.length - 1; d >= 0; d--) {
            coord[d] = Math.floor(i / cumulatives[d]) % dimensions[d];
        }
        coords[i] = coord;
    }
    return coords;
} 
```

例子：

*   [2, 3] 返回 [[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]]
*   [3, 2] 返回 [[0,0],[0,1],[1,0],[1,1],[2,0],[2,1]]
*   [2, 2, 2] 返回 [[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[ 1,0,1],[1,1,0],[1,1,1]]

# sql - 使用 Oracle 数据库在 Sql 中继承

> ID：14040262
> 
> 赞同：0
> 
> 时间：2012-12-26T11:57:26.603
> 
> 标签：sql, inheritance, oracle10g, primary-key

我可以在多个表中使用一个定义的主键吗？例如我有一个具有 Item_ID 的项目表，但我也想在 Vehicle 和 Piece 表中写这个 ID 作为主键。这可能吗？因为，我想要形成基表，然后形成子表。车辆有自己的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:04:52.883

```
 1\. First of all, purpose of Primary key is to uniquely identify a row
    of a table.
 2\. Is it possible that data of a 'column' can uniquely identify a row
    of 3 tables?
 3\. Practically not! Then that means it's not in normalized form(not
    atomic)
 4\. One primary key of a table can not be referenced as primary key of
    another table and it can be of foreign key. That is how it's
    designed. 
```

**实际例子：**

关系表的主键唯一标识表中的每条记录。它可以是保证唯一的普通属性（例如表中的社会保险号，每人不超过一条记录），也可以由 DBMS 生成（例如全局唯一标识符，或 GUID，在 Microsoft SQL Server 中）。主键可以由单个属性或多个属性组合组成。假设我们有一个包含三个表的学生记录数据库。第一个表 STUDENTS 包含大学中每个学生的记录。第二个表 CLASSES 包含所提供的每个课程的记录。第三个表 ENROLLMENT 包含学生注册记录（例如，每条记录代表一个学生注册一门课程）。每个学生会有多个记录（代表学生注册的所有课程），每个班级会话会有多个记录（代表该班级注册的所有学生）。对于 STUDENTS 表中的主键，学生的唯一学生 ID 号是一个不错的选择。

希望这可以帮助

# android - 列表视图中一行的背景图像

> ID：14040269
> 
> 赞同：3
> 
> 时间：2012-12-26T11:58:09.563
> 
> 标签：android, listview, bitmap, drawable

我有一个列表视图，它显示来自互联网的图像和文本。我的意图是这个图像，除了显示一个图像视图，是列表视图行的背景图像。这可行，但有问题。

在 listview 适配器中，我有 imageview：

```
imageLoader.DisplayImage (song.get (principal.KEY_PICTURE) my_imageView); 
```

并在 LinearLayout 中使用图像：

```
imageLoader.DisplayImageLinear (song.get (principal.KEY_PICTURE) my_linearLayout); 
```

这将调用以下方法：

```
public void DisplayImageLinear (String url, LinearLayout linearbck)
{
Bitmap bitmap = memoryCache.get (url);
Drawable d = new BitmapDrawable (bitmap);
if (bitmap! = null) {
linearbck (d);
}
else
{ linearbck.setBackgroundResource (R.drawable.list_selector); }
} 
```

我的问题是，列表视图行的背景图像仅在列表视图滑出屏幕并重新输入时可见。

我希望我解释正确..这里有一张解释问题的图片

![在此处输入图像描述](../Images/a3401f94b526209b43c8d01b18c61134.png)

我尝试使用linearbck.invalidate()，但没有成功

我真诚地感谢任何帮助

谢谢

最好的祝福

编辑：

添加适配器。谢谢 ：）

```
public class lstAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public MinAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;

        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); 
        ImageView photo_user =(ImageView)vi.findViewById(R.id.photoUser); 
        LinearLayout background =(LinearLayout)vi.findViewById(R.id.background);

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        imageLoader.DisplayImage(song.get(principal.KEY_AVATAR_AUTOR_ENTRADA), thumb_image);
        imageLoader.DisplayImage(song.get(principal.KEY_PICTURE), photo_user);
        imageLoader.DisplayImageLinear(song.get(principal.KEY_PICTURE), background);

        return vi;
    }

    @Override 
    public boolean isEnabled(int position) 
    { 
        if(principal.asynTaskEnUso.equals("yes")){ 
            return false; 
        } else { 
            return true; 
        } 

    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:40:02.007

当我们看到 的[来源时`ImageLoader`](https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java#L37)，当缓存中没有下载照片时，它会将照片排队。

=> 你没有在排队拍照。

下载照片后，它会从回调中[设置为 ImageView 。](https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java#L176)

=>您可能（或很可能）不会将其设置`LinearLayout`为背景。

现在你的问题：

> 我的问题是，列表视图行的背景图像仅在列表视图滑出屏幕并重新输入时可见。

第一次，缓存是空的，它没有找到所需的照片，所以它去下载它，因为你还没有实现并排队等待`LinearLayout`回调中的设置为背景。它没有显示，但是当您滚动`ListView`并返回时，它会第一次找到图像（因为它已下载并缓存）并将其设置为背景。

解决方案：

维护并设置一些标志以跟踪您`LinearLayout`的参考，并在下载完成时将其设置为背景。

# .net - 在实体框架中分离 DAL 和域？

> ID：14040272
> 
> 赞同：0
> 
> 时间：2012-12-26T11:58:28.260
> 
> 标签：.net, entity-framework

我在搞乱EF4.1。我想将我的域和我的 DAL 分开。我的域包含基本实体类和存储库接口。DAL 包含这些存储库的实现。

我的问题是我必须编辑我的域才能使用 EF。例如，具有“地址”的“人员”现在具有“地址 ID”和“虚拟地址”。我现在也在我的领域层中保留注释。我对此不太满意，因为这意味着我正在更改应用程序的核心以使用 EF。我还引入了不相关的数据，因为地址不需要在我的应用程序上下文中具有 ID；仅在数据库中。如果明天我写一个新的 DAL 层从 Web 服务或 XML 文件或其他东西中获取我的对象怎么办？

有没有解决的办法？我正在考虑将 EF 实体保留在 DAL 层中并将它们映射到存储库中的域类，但这不会对性能造成巨大影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:38:39.370

我认为将您的 EF 实体放在 DAL 中并将您的存储库放在其他地方没有意义，更不用说将这些 EF 实体转换为域类会不可避免地影响性能。

相反，您可能要考虑使用 EF Fluent API，如此[处](http://msdn.microsoft.com/en-us/data/jj591617.aspx)和[此处](http://msdn.microsoft.com/en-us/library/hh295844%28v=vs.103%29.aspx)所示。然后，您可以将 DbContext 类放入您的 DAL 中，将所有 Fluent 映射放在那里，并使您的域类保持干净和闪亮。

# css - 谷歌图表中 ie8 和 jsfiddle 的错误

> ID：14040277
> 
> 赞同：1
> 
> 时间：2012-12-26T11:59:03.847
> 
> 标签：css, internet-explorer-8, google-visualization, jsfiddle, ie8-browser-mode

我正在使用谷歌饼图。饼图在 jsfiddle 中可见，但在**`IE8 document type`**. 我在 jsfiddle 中使用饼图代码，并且在 HTML 文件中使用相同的代码，jsfiddle 显示了我期望的答案，但 HTML 文件没有显示饼图。

这里的小提琴：http: [//jsfiddle.net/gL7Hm/2/](http://jsfiddle.net/gL7Hm/2/)

这里是html代码

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi?fake=.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawVisualization);
      function drawVisualization() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
      </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

我可以知道这有什么问题吗，它是我的代码错误或 jsfiddle 错误。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:40:04.917

这很可能是在后来的浏览器中模拟 IE8 标准模式的一个小错误。显然，这些现代版本的 IE 无法完美地复制其前身的行为（但它们在绝大多数情况下都做到了足够的程度）。

使用[http://browserstack.com](http://browserstack.com)我能够在实际的 IE8 实例中进行测试。从下图可以看出，效果很好，IE8（实际实例）没有任何问题。

![在此处输入图像描述](../Images/284088e5b3d7c40e7780d6334e883691.png)

# android - 更新数据库时出现语法错误

> ID：14040278
> 
> 赞同：-2
> 
> 时间：2012-12-26T11:59:06.530
> 
> 标签：android, sqlite

您好我需要在我的本地数据库中更新新人，同时添加一个新人它显示以下错误：

```
Failure 1 (near "Build": syntax error) on 0x29abd0 when preparing 'update event_details set total_checkin=12, checkin=7, yet_to_check=5 where event_name=Final Build Test'. 
```

我原来的java代码：

```
strQuery = "update event_details set total_checkin="+ strTotalMembers + ", checkin="+ strTotalCheckIns + ", yet_to_check="+ strYetToChecks + " where event_name=" + strTitle;

mySqlite.executeQuery(strQuery); 
```

所有表格列都拼写正确。但我知道为什么会发生这个错误。请告诉来遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:01:48.487

试试这个：

```
strQuery = "update event_details set total_checkin='"+ strTotalMembers + "', checkin='"+ strTotalCheckIns + "', yet_to_check='"  + strYetToChecks + "' where event_name='"+ strTitle +"'"; 
```

因为你需要传递''中的所有字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:01:51.557

您缺少`single-quotes`字符串值。您应该使用可以解决此问题的主机变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T02:04:45.593

您永远不应该自己手动构建查询。这是有风险的，它会打开你的 SQL 注入代码（谷歌那个）。这就是为什么您应该始终使用某种 API 来支持 prepareStatement 方法，这些方法接受带有占位符（通常是 qestionmark）和单独变量的查询。该方法应该为您填充占位符，在需要时处理引号、字符编码等。例如： http: [//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

我相信你会在谷歌上找到更多关于它的信息。

希望能帮助到你

# javascript - 通过 javaScript 单击按钮以调用 codeBehind 函数时出现错误

> ID：14040280
> 
> 赞同：3
> 
> 时间：2012-12-26T11:59:12.783
> 
> 标签：javascript, asp.net, code-behind

我需要从 JavaScript 调用一些 codeBehind 函数。为此，我有一个隐藏按钮 ( `asp:Button`)。

当我从 javaScript 中单击此按钮时，例如：

```
var btn = document.getElementById("btnHidden");
btn.click(); 
```

我收到一个错误：

```
System.Web.HttpException: The state information is invalid for this page and might be corrupted. 
```

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:13:25.720

我试过这样并且正在工作

## aspx

```
<head runat="server">
    <title>Untitled Page</title>
    <script language="javascript" type="text/javascript">
        function btnClick()
        {
            alert("clicked!!!");

            var btn=document.getElementById('<%=Button1.ClientID%>');
            btn.click();
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        test page
        <input type="button" id="btn" onclick="btnClick()" value="Click" />

        <asp:Button ID="Button1" style="display:none" runat="server" Text="Button" OnClick="Button1_Click" />

    </div>
    </form>
</body> 
```

## aspx.cs

```
using System;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {

    }
} 
```

在第一个按钮客户端单击中，我尝试引发第二个按钮单击事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:05:18.533

首先你必须用css而不是服务器端隐藏这个按钮，我的意思是`display:none`不是`Visible=false;`

像这样 ：

```
Button1.Attributes.CssAttributes.Add("Display","None"); 
```

那么你应该使用`ClientID`

```
document.getElementById('<%=Button1.ClientID%>').click(); 
```

尝试设置`UseSubmitBehaviour=false`按钮

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:04:06.967

您可以编辑您的 Web.config 文件：

```
<pages validateRequest="false" enableEventValidation="false" viewStateEncryptionMode ="Never"> 
```

查看此[博客](http://renditionprotocol.blogspot.in/2007/01/state-information-is-invalid-for-this.html)了解详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:05:38.827

应该是这样的

var btn = document.getElementById('<%= btnHidden.ClientID %>').value;

# wordpress - WordPress 插件包含子目录中的 css

> ID：14040282
> 
> 赞同：1
> 
> 时间：2012-12-26T11:59:28.090
> 
> 标签：wordpress, plugins

我有一个关于在后端包含我的元框样式的 css 文件（wordpress）的问题。我已经阅读了 Rockable 的电子书“从零开始构建 Wordpress 主题”。他们有以下链接到 css 的代码片段（在同一文件夹中）：

```
<style type="text/css">
<?php include(dsslider-manager.css'); ?>
</style> 
```

这很好，但我想将我的 css 组织在一个子文件夹中，例如： assets/css/dsslider-manager.css

但是不会链接到该文件。当我用萤火虫查看时出现错误，但是当我通过给出的网址时，它将链接到正确的位置......

错误是：

```
Warning: include(): http:// wrapper is disabled in the server configuration by allow_url_include=0 in /customers/0/d/a/xxx.xx/httpd.www/wordpress/wp-content/plugins/ds-flexslider/includes/cpt-manager.php on line 66 
```

我错了什么？

谢谢你的帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:49:37.037

该错误是由于您试图包含一个远程文件，无论如何都不推荐。
因此，下载`dsslider-manager.css`到插件内的本地文件夹并像这样包含它：

```
wp_enqueue_style('my_css_dsslider', PLUGIN_URL . '/assets/css/dsslider-manager.css'); 
```

但这并不是成功包含资产文件所需的全部内容。检查以下[答案](https://stackoverflow.com/questions/13898529/how-to-load-jquery-first-in-wordpress/13899024#13899024)以完整查看如何以正确的方式执行此操作（css 和 js 文件）。

一旦你学会了，你就可以在你的所有插件中做同样的事情。

# iphone - 动态重复打开相机视图

> ID：14040287
> 
> 赞同：1
> 
> 时间：2012-12-26T12:00:09.703
> 
> 标签：iphone, objective-c, ios6, uiimagepickercontroller

目前，我正在使用此代码打开相机和视频视图以捕获图像和视频：

```
- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                                   UINavigationControllerDelegate>) delegate
{
    [optionView removeFromSuperview];

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    if (videoModeFlag==TRUE)
    {
        cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;
        cameraUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];
        cameraUI.allowsEditing = NO;
        cameraUI.delegate = delegate;
        [self presentViewController:cameraUI animated:YES completion:nil];
        videoModeFlag=FALSE;
    }
    else
    {
        photoclick.sourceType = UIImagePickerControllerSourceTypeCamera;
        photoclick.delegate = self;
        [self presentViewController:photoclick animated:YES completion:nil];
    }

    return YES;
} 
```

它工作正常。但是我想反复打开相机视图，当单击使用按钮时，我想将图像保存到目录中。这就是我正在尝试的：

```
- (void) imagePickerController: (UIImagePickerController *) picker didFinishPickingMediaWithInfo: (NSDictionary *) info
{
    saveFlag =TRUE;
    [self.view addSubview:typename];
    image = [[info objectForKey:UIImagePickerControllerOriginalImage] copy];
    mediaType = [[info objectForKey: UIImagePickerControllerMediaType] copy];
    movieURL = [[info valueForKey:UIImagePickerControllerMediaURL] copy];
    [self dismissViewControllerAnimated:YES completion:nil];

        timer = [NSTimer scheduledTimerWithTimeInterval:10.0
                                                 target:self
                                               selector: @selector(targetMethod)
                                               userInfo:nil
                                                repeats:YES];
- (void)targetMethod
{

    a++;                                                                             

        [self startCameraControllerFromViewController: self
                                        usingDelegate: self];

    if (a==5)
    {
        [timer invalidate];
    }
} 
```

但无法成功多次打开相机。这是我得到的一个错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present modally an active controller <ViewController: 0x49bab0>.' 
```

当我不使用计时器时，这就是我正在做的事情：

```
- (void) imagePickerController: (UIImagePickerController *) picker didFinishPickingMediaWithInfo: (NSDictionary *) info
{
    saveFlag =TRUE;
    //[self.view addSubview:typename];
    image = [[info objectForKey:UIImagePickerControllerOriginalImage] copy];
    mediaType = [[info objectForKey: UIImagePickerControllerMediaType] copy];
    movieURL = [[info valueForKey:UIImagePickerControllerMediaURL] copy];

    [self dismissViewControllerAnimated:YES completion:nil];

    NSMutableArray *sd=[[NSMutableArray alloc]init];
    sd = [[getPickerData componentsSeparatedByString: @"\n--- end of page ---\n"] mutableCopy];
    NSLog(@"sd:%@",sd);
    for (int i=0; i<=[sd count]; i++)
    {
        [self startCameraControllerFromViewController: self
                                        usingDelegate: self];
    }
} 
```

我被困在这一点上。我该如何解决这个问题？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:11:59.893

我认为错误表明，您正在尝试以模态方式呈现视图控制器，该视图控制器已经显示...

问题可能是，您尝试每 10 秒打开一次相机视图，但是如果当时未关闭现有显示的视图，则可能会产生问题。

与其使用计时器，不如仅在您将其关闭后再次手动显示选择器。您可以有一个实例变量来跟踪它已经显示了多少次。

# mysql - zend -mysql 使用一个字段值的值到另一个字段名[编辑]

> ID：14040291
> 
> 赞同：0
> 
> 时间：2012-12-26T12:00:36.237
> 
> 标签：mysql, zend-framework

这是我的表描述：
CREATE TABLE my_table ( `id`int, `name`varchar(9), `value`varchar(13)) ;

INSERT INTO my_table ( `id`, `name`, `value`) VALUES (0, 'timezone', 'Europe/London'), (0, 'language', 'en'), (0, 'country', '45'), (0, ' something', 'x'), (1, 'timezone', 'Europe/Paris'), (1, 'language', 'fr'), (1, 'country', '46') ;

```
 id  name       value

        0   timezone    Europe/London
        0   language    en
        0   country     45
        0   something   x
        1   timezone    Europe/Paris
        1   language    fr
        1   country     46 
```

我的结果应该看起来

```
 ID     TIMEZONE       LANGUAGE      COUNTRY SOMETHING
  0      Europe/London  en            45      x
  1      Europe/Paris   fr            46      (null) 
```

如何在 Zend Framework 中使用 Zend_Db_Table 或 Zend_Db_Select 执行此查询？太感谢了！

**[添加评论中的编辑查询]**

```
SELECT CONCAT( 'SELECT table.id', GROUP_CONCAT(CONCAT(' , t_', REPLACE(name, '', ''), '`.value AS `', REPLACE(name, '`', ''), '' ) SEPARATOR ''), ' 
FROM table` ', 
GROUP_CONCAT(CONCAT(' LEFT JOIN table AS t_', REPLACE(name, '', ''), '` ON `table`.id = `t_', REPLACE(name, '`', ''), '.id AND t_', REPLACE(name, '', '``'), '.name = ', 
QUOTE(name) ) SEPARATOR ''), ' 
GROUP BY table.id' ) 
INTO @qry FROM (SELECT DISTINCT name FROM table) t;

 PREPARE stmt FROM @qry;
 EXECUTE stmt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:30:35.733

这是一个使用来自 DbTable 模型的[Zend_Db_Adapter的解决方案：](http://framework.zend.com/manual/1.12/en/zend.db.adapter.html)

```
/*accepts a string of SQL*/
public function getQuery($sql) {
    $query = $this->getAdapter->quoteInto($sql);
    $result = $this->getAdapter()->fetchAll($query);
    /*if you want the result as an array instead of an object: $result->toArray()*/
    return $result;
} 
```

我缺乏分析查询和演示流畅界面的 SQL 代码。祝你好运。

# c# - 如何使用 .net 创建加密文件容器

> ID：14040293
> 
> 赞同：3
> 
> 时间：2012-12-26T12:00:39.860
> 
> 标签：c#, .net, asp.net-mvc, encryption

我需要在 asp net mvc 应用程序中创建一个加密的文件容器。

我发现这个程序可以完成这项工作

```
http://www.michaelcodes.net/post/TrueCrypt-6a-System-Encryption-Benchmarks.aspx 
```

但它应该与.net 集成

有没有办法使用 .NET 库来实现这一点？我还没有找到如何。

**特征：**

*   系统需要能够从该容器中添加和删除文件，并在请求时读取内容。但是所有的操作都需要在系统内部完成。
*   C# 实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:20:31.620

您可以将文件放在自定义类列表中：

```
[Serializable]
public class FileEntry
{
 public string FileName {get;set;}
 public string FileRelativePath {get;set;}
 public byte[] FileContents {get;set;}
} 
```

将文件添加到列表中：

```
List<FileEntry> files = new  List<FileEntry> ();

for .......
{
    files.Add(new FileEntry()
    {
        FileName  = .....,
        FileRelativePath = .....,
        FileContents = File.ReadAllBytes(......),
    };
} 
```

然后，使用 BinarryFormatter 将此结构转换为字节数组：

```
byte[] filesBytes;
BinaryFormatter ser = new     BinaryFormatter();
using(MemoryStream ms = new MemoryStream())
{
    ser.Serialize(ms, files);
    filesBytes = ms.ToArray();
} 
```

现在，您的结构为 byte[]，您可以使用以下简单方法轻松加密它们：

```
filesBytes = Encrypt(filesBytes , ......); 
```

然后使用一些自定义扩展名将加密的字节保存到某个位置：

```
File.WriteAllBytes(".........\.....encr",filesBytes); 
```

然后，当您想重新打开文件并读取清除数据时：

```
byte[] encryptedData = File.ReadAllBytes(".......\.....encr"); 
```

用同样的算法解密内容：

```
byte[] clearContent = Decrypt(encryptedData, ......); 
```

并将内容反序列化为一级结构：

```
BinaryFormatter ser = new BinaryFormatter();
using(MemoryStream ms = new MemoryStream(clearContent))
{
    List<FileEntry>  files = ser.Deserialize(ms) as List<FileEntry>;
} 
```

然后，如果需要，将文件的内容写入某个位置：

```
foreach(var file in files)
{
     File.WriteAllBytes(string.Format("........{0}...{1}",file.FileRelativePath , file.FileName), file.FileContents)
} 
```

您可以使用这个关于加密的问题：

[使用.NET中的秘密加密/混淆字节数组的简单方法？](https://stackoverflow.com/questions/5251759/easy-way-to-encrypt-obfuscate-a-byte-array-using-a-secret-in-net)

这[是一个](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)关于二进制格式化程序的例子：

[我已经在我的博客](http://www.sakher.net/developing-a-simple-encrypted-container-using-csharp)上发布了这个答案:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:29:14.577

如果您想使用 TrueCrypt，您可以在系统启动时自动挂载到驱动器，然后在映射的驱动器上使用常规文件操作。

如果您不想通过公共访问（访问相关应用程序的外部访问）来安装卷，那么您确实需要更深入的 API 访问。

我不建议从头开始滚动您自己的 C# 实现。要在 TrueCrypt 中改进安全级别，您需要技巧和时间——这两者都已进入 TC。如果您不同时使用这两种方法，您很容易面临巨大的安全风险。

您可以通过导入 dll 来简单地使用自动互操作（尽管我不能确定）。我相信 TC 是开源的，如果是这样，您可以外包 C/C++ 编码器来编写 .Net 包装器 - 不需要安装卷，但允许内部应用程序仅基于文件的访问。

# d3.js - d3.js 中的在线点

> ID：14040297
> 
> 赞同：14
> 
> 时间：2012-12-26T12:01:03.883
> 
> 标签：d3.js

我在 d3.js 中创建一个折线图，如下所示：

```
var line = d3.svg.line()
    .interpolate("basis")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.temperature); }); 
```

然后我想把点放在这样的线数据点上：

```
var points = svg.selectAll(".point")
        .data(cities1[0].values)
      .enter().append("svg:circle")
         .attr("stroke", "black")
         .attr("fill", function(d, i) { return "black" })
         .attr("cx", function(d, i) { return x(d.date) })
         .attr("cy", function(d, i) { return y(d.temperature) })
         .attr("r", function(d, i) { return 3 }); 
```

结果不是我所期望的：

![在此处输入图像描述](../Images/20f266dadce932503d65590cd2cc1640.png)

然后我将 interpolate("basis") 更改为 interpolate("cardinal") 并得到我想要的：

![在此处输入图像描述](../Images/f02c15a76e541196da8bbf2cf57e998a.png)

为什么我得到了错误的基础结果？我怎样才能用基础画出准确的点？

编辑：[一个类似的](https://stackoverflow.com/questions/8083267/drawing-svgcircle-on-d3-svg-area-interpolatebasis)（未回答的）问题。看看[这个 jsfiddle](http://jsfiddle.net/2gDq3/1/)。它仅在将插值从基础模式更改为基数（或其他）模式时才有效。但是 Cardinal 有一个问题，它不尊重图形的最大高度。我正在寻找的是解释为什么某些插值模式会阻止将点放在正确的位置（以及为什么 cardinal 不尊重最大高度）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T15:41:58.787

不幸的是，这是“基础”插值的一个属性——这条线不一定穿过这些点。没有办法“解决”这个问题。除非您绝对需要这种特殊的插值，否则请坚持使用可以让您获得正确分数的插值。

您可以实现自定义插值，使您可以访问线穿过的点并相应地添加圆。不过，这将需要对 d3 和行插值器的工作方式有一定的深入了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T19:16:46.723

据我了解，“基础”插值会在数据点之间创建一条平均线。红衣主教创建一条连接所有点的平滑线。

# sql - MVC4：SQL 登录失败。错误代码 1\. 只发生在一页上

> ID：14040298
> 
> 赞同：0
> 
> 时间：2012-12-26T12:01:03.637
> 
> 标签：sql, sql-server, asp.net-mvc, asp.net-mvc-4

我刚刚遇到了有史以来最奇怪（也是最令人沮丧）的错误之一。我有一个刚刚被放到登台服务器上的网站（还没有上线）。除了一个特定的页面外，一切似乎都运行良好。有一个方法被调用，它调用一个存储过程，但我得到一个`SqlException`它说`Login failed for [the-login-name]`和错误状态 1。奇怪的是从另一个页面调用完全相同的方法并且使用完全相同的 sql 连接详细信息没关系..此外..这只发生在登台服务器上..不在我的开发机器上。这里有人见过这样的东西吗？我不太清楚导致这种情况的 2 之间可能有什么不同。

我们都看到了这个`it works on my dev machine`问题.. 但我从未见过调用相同方法的 2 个页面只导致其中一个页面抛出异常.. 这简直太奇怪了。

我正在使用 MVC4 和 SQL Server 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:19:28.897

该帐户是否有足够的权限来运行存储过程？您对实例有完全的管理控制权吗？

如果没有，您需要：

1.  获得完全的管理员权限；和/或
2.  创建一个 RunStoredProc 角色，添加到您的 SQL 帐户用户，并授予选择存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:14:24.400

没关系;

我连接的地方如下所示：

```
using (var connection = new SqlConnection(context.Database.Connection.ConnectionString)) 
```

context.Database 是的`System.Data.Entity.Database`，我刚刚注意到`System.Data.Entity.Database.Connection.ConnectionString`..；在某些情况下，它在那里有密码，而在其他情况下则没有。我不太清楚那个，但我知道现在该怎么做.. 我希望这可以帮助其他找到这个的人。

# iphone - nib 对象即使已被属性保留，也无法访问

> ID：14040299
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:01:18.993
> 
> 标签：iphone, ios, xib, nib

我有很多 UIViews（超过 100 个）的 nib 文件，而且我正在使用代码创建 500 多个 UIViews。

仅供参考，应用程序是一种带有块的游戏板。

问题，随机应用程序在玩游戏时在 nib 对象上崩溃。我无法制作测试用例。但我可以说应用程序仅在 Nib 对象（IBOutlet）上崩溃。

每次它仅通过 nib 的 IBOutlet 的不良访问。

我尝试使用保留来制作 IBOutlet 属性。也可以正确合成，但随机遇到相同的问题。

请帮我管理 nib 对象。

确切的错误消息是：EXC_BAD_ACCESS

这是堆栈跟踪

```
libobjc.A.dylib 0x3995e5aa objc_msgSend + 9
1WWS 0x00064437 0x5a000 + 42039
2WWS 0x00063b5d 0x5a000 + 39773
3Foundation 0x37df7539 + 200
4Foundation 0x37deedb9 + 840
5Foundation 0x37e673db + 102
6libdispatch.dylib 0x370b211f + 10
7libdispatch.dylib 0x370b14b7 + 22
8libdispatch.dylib 0x370b61bd + 224
9CoreFoundation 0x34d57f3b + 1290
10CoreFoundation 0x34ccaebd CFRunLoopRunSpecific + 356
11CoreFoundation 0x34ccad49 CFRunLoopRunInMode + 104
12GraphicsServices 0x3261d2eb GSEventRunModal + 74
13UIKit 0x342a72f9 UIApplicationMain + 1120
14WWS 0x0005b09f 0x5a000 + 4255 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:28:20.237

测试 IBoutlet 是否导致问题的一种方法是断开所有 IBoutlet 视图。在视图 didLoad 方法中实例化它们并尝试运行您的应用程序。如果应用程序仍然崩溃，则认为这是内存问题。

如果应用程序没有崩溃，那么它可能只是 IBoutlet 问题。

另一种方法是使用[Instruments](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheTraceDocument/UsingtheTraceDocument.html)工具。

1.  使用 product -> Analyze 检查代码中的任何内存泄漏。
2.  运行产品 -> 配置文件 -> 泄漏工具检查运行时泄漏。

# objective-c - 如何获取从 getter 方法返回的 NSArray？

> ID：14040301
> 
> 赞同：2
> 
> 时间：2012-12-26T12:01:21.980
> 
> 标签：objective-c

*注意：此问题已根据以下答案中提供的建议进行了更新，以便更全面地了解问题的当前状态。*

您可以在此处查看完整的项目文件：[https ://github.com/cxx6xxc/Skeleton/blob/master/README.md](https://github.com/cxx6xxc/Skeleton/blob/master/README.md)

**条件**

1.  `NSArray`我在对象的`init`方法中创建了一个。

2.  我用它的 get 方法返回 NSArray。

**问题**

到达后，NSArray 为空。

## 创建实例

尝试1：

*这是我最初的实现。*

```
- (id)init:
{
    labels = [NSArray arrayWithObjects:@"Red", @"Green", @"Blue", nil];

    return self;    
} 
```

尝试2：

*Ismael 建议我用子类协议来包装它。*

*neo 建议我保留 NSArray。*

```
- (id)init:
{
    self = [super init];
    if (self)
    {
        labels = [NSArray arrayWithObjects:@"Red", @"Green", @"Blue", nil];

        [labels retain];
    }
    return self;
} 
```

尝试 3：

*Anoop Vaidya 建议我使用 alloc 和 NSMutableArray 强制所有权：*

```
- (id)init:
{
    self = [super init];
    if (self)
    {
        labels = [[NSMutableArray alloc] initWithObjects:@"Red", @"Green", @"Blue", nil];
    }
    return self;
} 
```

但是，当我返回对象时，尽管上面引用了不同的初始化建议......

## 返回对象

```
- (NSArray *)getLabels 
{
    return labels; 
} 
```

*...与 NSMutableArray ...*

```
- (NSMutableArray *)getLabels 
{
    return labels; 
} 
```

... NSArray getter 返回一个空对象。

## 调用方法

```
int main(void)
{
    id view;
    view = [ZZView alloc];

    id model;
    model = [ZZModel alloc];

    id controller;
    controller = [[ZZController alloc] init: model: view];

    labels = [[controller getModel] getLabels];

    if(labels)
        NSLog(@"allocated");
    else
        NSLog(@"not alloced");

    [view dealloc];
    [model dealloc];
    [controller dealloc];

    return EXIT_SUCCESS;
} 
```

**问题**

我没有做什么、缺少什么或我做错了什么导致返回值为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:07:07.927

`init`方法需要调用一些[super init]，所以你需要做这样的事情：

```
- (id)init
{
    self = [super init];
    if (self) {
        labels = [NSArray arrayWithObjects:@"Red", @"Green", @"Blue", nil];
    }
    return self;    
} 
```

编辑：查看您的 git repo，我发现

```
controller = [[ZZController alloc] init: model: view]; 
```

我不完全确定编译器如何解释空参数，但我的猜测是它将它们读取为 nil，因此您的 ZZController 没有模型

此外，您有一些杂乱的参数顺序，第一个参数（带有 text `init:`）是您的模型，您的第二个参数（带有 text `model:`）是您的视图（这根据您的`- (id)init: (ZZModel*)Model: (ZZView*)View`

为了让它快速工作，你应该做

```
controller = [[ZZController alloc] init:model model:view]; 
```

我将在这里进行一个（短）飞跃，并猜测您是 iOS 开发的新手，因此我建议您阅读有关 objc 编程、如何编写函数、如何发送多个参数等内容，以及之后，进行一些重构

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:14:04.367

建模的 init 方法从未被调用，它只是被分配的。因此，NSArarray 标签不存在，因为它是在 init 方法中创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:05:06.287

我建议您在 init 和 getLabels 方法中都设置一个断点，并检查存储数组的实例变量的值：您会看到哪个方法的行为与预期不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:05:31.217

假设你没有使用 ARC 也没有合成变量标签，你需要保留数组，

```
- (id)init:
{
 labels = [NSArray arrayWithObjects:@"Red", @"Green", @"Blue", nil];

 [labels retain];

 return self;    
} 
```

另外，在不使用数组时需要释放它，以防止内存泄漏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T12:16:00.097

你可以这样做，希望在 .h 中你有`NSMutableArray *labels;`：

```
- (id)init{
    if (self = [super init]) {
        labels = [[NSMutableArray alloc] initWithObjects:@"Red", @"Green", @"Blue", nil];
    }
    return self;    
} 
```

# javascript - 可拖动的 div 属性在 IE 中不起作用

> ID：14040306
> 
> 赞同：0
> 
> 时间：2012-12-26T12:02:07.607
> 
> 标签：javascript, jquery, asp.net, c#-4.0, asp.net-4.0

我通过代码创建了一个可拖动的 DIV-

```
<div id="Age"
     draggable="true"
     ondragstart="drag(event)" width="50px" height="25px"
     style="background-color:Green;">Age</div> 
```

DIV 在 Firfox、Crome 中运行良好，但在 IE、Opera 中无法运行。有没有其他方法可以创建适用于所有浏览器的可拖动 DIV？谢谢，

**已编辑**

```
<script  language="javascript" type="text/javascript">
function drag(ev) {
    ev.dataTransfer.setData("Text", ev.target.id);
   }</script> 
```

谁能用 jQuery 证明我的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:03:51.713

正如您所要求的`jquery`解决方案：-
在您的页面中添加这两个 JS 文件：-

```
 <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
  <script type="text/javascript" src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script> 
```

HTML:-

```
<div id="draggable" class="ui-widget-content">
    <p>Drag me around</p>
</div> 
```

JS：-

```
 $(function() {
        $( "#draggable" ).draggable({
            drag: function(event, ui) {}
        });
    }); 
```

见[Fiddle](http://jsfiddle.net/DL4fx/2/) :-
它也在 IE7 中工作。

# c# - C# 中文件“config.ini”的位置是什么？

> ID：14040307
> 
> 赞同：0
> 
> 时间：2012-12-26T12:02:07.580
> 
> 标签：c#

下面的代码使用关闭应用程序时用户使用的值创建文件“config.ini”。

```
 void Form1_FormClosing(object sender,FormClosingEventArgs e)
        {
        IniFile ini=new IniFile(Application.StartupPath+@"\\config.ini"); 
```

在 Visual Studio 2010 Ultimate 中运行应用程序时，config.ini 文件将保存在应用程序目录\bin\Debug 中。

通过发布、安装和运行应用程序，我找不到文件 config.ini。

config.ini 文件的位置是什么？

在高级，ocaccy 致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:07:23.680

[Application.StartupPath](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)指向应用程序的.exe 所在的位置。您的 .ini 文件应该在那里。

但是，使用 .ini 文件被认为有点过时，更好的方法（并且内置在 .net 中）是使用应用程序配置文件（WinForms 的[app.config ）](https://stackoverflow.com/questions/1431742/what-is-app-config-for)

# blackberry - 在黑莓中如何自定义字体颜色并仍然使用 RichList

> ID：14040311
> 
> 赞同：1
> 
> 时间：2012-12-26T12:02:10.127
> 
> 标签：blackberry, fonts

在 Blackberry 中使用 Rich List 时如何更改字体颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:35:03.777

```
final VerticalFieldManager vfm = new VerticalFieldManager(){
        protected void paint(Graphics graphics){
            graphics.setColor(0x36c9e3);
            super.paint(graphics);
            }
    };
 RichList list = new RichList(vfm, true,1, 2); 
```

# c# - 通过 web 服务发送对象并在 asp.net 或 silverlight 中检索数据

> ID：14040321
> 
> 赞同：0
> 
> 时间：2012-12-26T12:03:22.747
> 
> 标签：c#, asp.net, web-services, silverlight

我正在使用 Silverlight 开发一个 Windows 小工具，我需要调用一个 asp.net Web 服务，它返回一个带有一些数据的对象。我想接收该对象并显示数据。

我的代码如下

Web 服务代码。

```
[WebMethod]
        public userdata LogIn(string username,string user_password)
        {

                return udata;
            }
            return new userdata();
        }
    } 
```

我的自定义类代码是

```
 public class userdata
    {
        string name;

        public string Name
        {
            get { return name; }
            set { name = value; }
        }
        string userName;

        public string UserName
        {
            get { return userName; }
            set { userName = value; }
        }
        string department;

        public string Department
        {
            get { return department; }
            set { department = value; }
        }
        string designation;

        public string Designation
        {
            get { return designation; }
            set { designation = value; }
        }
        string email;

        public string Email
        {
            get { return email; }
            set { email = value; }
        }
        string mobile;

        public string Mobile
        {
            get { return mobile; }
            set { mobile = value; }
        }
        string ip;

        public string Ip
        {
            get { return ip; }
            set { ip = value; }
        }
        string id;

        public string Id
        {
            get { return id; }
            set { id = value; }
        }

    } 
```

它返回

```
<userdata>
<Name>Asik</Name>
<UserName>asikcse</UserName
><Department>technical</Department>
<Designation>Software Programmer</Designation>
<Id>1</Id>
</userdata> 
```

在我的项目结束时，我添加了 Web 引用作为引用，但对此没有任何解决方案。

```
LoginServiceSoapClient login = new LoginServiceSoapClient();
            login.LogInCompleted+=new EventHandler<LogInCompletedEventArgs>(login_LogInCompleted);
            login.LogInAsync(log._nameText, log._surnameText);
        }

        void login_LogInCompleted(object sender, LogInCompletedEventArgs e)
        {

              How can I retrieve this object returned by webmethod

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:53:44.033

所以你需要在 silverlight 应用程序中创建一个类来保存数据，我建议只复制 userdata 类。然后，您需要向该端点发出请求以获取数据。这可以使用 WebClient 类来完成。然后使用 DataContractSerializer 将 xml 转换为对象。这是一个例子：

```
WebClient webClient = new WebClient();

var data = webClient.DownloadString("<your endpoint>");  //You can do this async too

var serializer = new DataContractSerializer(typeof(UserData));

Byte[] bytes = Encoding.Unicode.GetBytes(data);

UserData userData;

using (MemoryStream stream = new MemoryStream(bytes))
{
    userData = serializer.ReadObject(stream) as UserData;
} 
```

有一些更聪明的方法可以做到这一点。

# asp.net-mvc - MVC在布局页面访问视图模型

> ID：14040324
> 
> 赞同：2
> 
> 时间：2012-12-26T12:03:57.377
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我不知道正确的方法，但我对 Razor 有一个奇怪的要求

设想

我有一个在 40 个视图中共享的布局页面，布局页面还包含一些标签字段。

我在模型中创建了一个基类，其中包含需要在布局页面上显示的属性，这个类在每个模型中都被继承。

所以基本上当 Model 传递给 View 时，它包含一些要在布局上显示的属性。

查询这是正确的方法吗？（如果没有，那么正确的方法是什么？）

如何在布局页面的视图中访问模型的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:44:45.147

部分视图可以替代，但为什么不创建一个包含布局属性的基类，并且所有模型都继承基类

查看此以获取更多 [将数据传递到所有页面通用的布局](https://stackoverflow.com/questions/13225315/pass-data-to-layout-that-are-common-to-all-pages)

# c - 套接字中的回调函数为 sk_data_ready()

> ID：14040328
> 
> 赞同：4
> 
> 时间：2012-12-26T12:04:10.277
> 
> 标签：c, linux, performance, networking, linux-kernel

我试图计算**linux 内核中定义的用于处理数据包的 TCP/IP 网络堆栈的各种层和函数消耗的 CPU 周期**。所以我使用TSC通过各种功能消耗CPU。这表明单次调用 sk_data_ready() 函数会占用大量 CPU 周期。

因此，我遵循 linux 内核中 TCP/IP 堆栈的源代码获取原始套接字并获取信息，因为数据包最终在特定套接字的接收循环链表中排队。

但是在对数据包进行排队之后**，sock.c 中定义为 sock_queue_rcv_skb() 的函数调用**

```
sk->sk_data_ready(sk, skb_len); 
```

这是回调函数（我认为）。但我无法获得此回调函数的任何源代码。

谁能帮我找到代码及其工作原理？

recvfrom() 函数是否也与上面定义的回调函数有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:31:37.703

默认的 ->sk_data_ready() 回调是 sock_def_readable()：

```
static void sock_def_readable(struct sock *sk, int len)
{                       
        struct socket_wq *wq;

        rcu_read_lock();
        wq = rcu_dereference(sk->sk_wq);
        if (wq_has_sleeper(wq))
                wake_up_interruptible_sync_poll(&wq->wait, POLLIN | POLLPRI |
                                                POLLRDNORM | POLLRDBAND);
        sk_wake_async(sk, SOCK_WAKE_WAITD, POLL_IN);
        rcu_read_unlock();
} 
```

这基本上唤醒了等待这些数据的进程，例如recv()，让它们处理->sk_receive_queue中的数据。

某些协议可能会覆盖它，例如 netlink，请参阅 __netlink_kernel_create()。

顺便说一句，您可以使用`perf top`命令查看哪个内核函数消耗最多的 CPU 周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T01:24:07.173

```
void sock_init_data(struct socket *sock, struct sock *sk) 
{
    sk->sk_data_ready   =   sock_def_readable;
    sk->sk_write_space  =   sock_def_write_space;
    sk->sk_error_report =   sock_def_error_report;
} 
```

# c++ - 类模板和函数模板的区别

> ID：14040329
> 
> 赞同：8
> 
> 时间：2012-12-26T12:04:32.430
> 
> 标签：c++, templates

我想知道类模板和函数模板之间的区别以及我应该在哪里使用它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T12:13:26.910

实例化后，类模板变成类，函数模板变成函数。例子：

```
//Defines a template for a class that can hold two
//objects.
template<typename T1, typename T2>
struct pair {
    T1 first;
    T2 second;
};

//Defines a template for a function that gives the
//minimum of two values.
template<typename T>
T min(T a, T b) {
    return a < b ? a : b;
} 
```

对于普通代码，当你想创建一个由类型参数化的类时，你会使用类模板，当你想创建一个可以对许多不同类型进行操作的函数时，你会使用函数模板。

函数模板还可以进行类型推导，这对于创建工厂函数很有用：

```
//Deduces the types of T1 and T2, so
//for example, a pair<int, double> can be created
//by `make_pair(10, 1.2)`
template<typename T1, typename T2>
pair<T1, T2> make_pair(T1&& t1, T2&& t2) {
    return {std::forward<T1>(t1), std::forward<T2>(t2)};
} 
```

类模板可用于编写在编译时执行的程序（使用类型作为值，使用模式匹配的模板实例化作为纯函数）。一个简单的例子是这组类模板，它`const`从一个类型中删除所有内容：

```
//Removes all `const` from a type, for example:
//`remove_const_recursive<int const*const volatile>::type`
//is the type `int*volatile`.
template<typename T> struct remove_const_recursive { typedef T type; };
template<typename T> struct remove_const_recursive<T const volatile> {
    typedef typename remove_const_recursive<T>::type volatile type;
};
template<typename T> struct remove_const_recursive<T volatile> {
    typedef typename remove_const_recursive<T>::type volatile type;
};
template<typename T> struct remove_const_recursive<T const> {
    typedef typename remove_const_recursive<T>::type type;
};
template<typename T> struct remove_const_recursive<T&> {
    typedef typename remove_const_recursive<T>::type& type;
};
template<typename T> struct remove_const_recursive<T*> {
    typedef typename remove_const_recursive<T>::type* type;
}; 
```

随着您越来越多地使用模板，您将意识到它们可以以多种方式使用。[表达式模板](http://en.wikipedia.org/wiki/Expression_templates)允许您加速某些类型的代码或创建特定领域的语言。[模板元编程](http://en.wikipedia.org/wiki/Template_metaprogramming)和元组可用于自动编写各种繁琐的代码。您可能还意识到模板的迟钝语法以及有限的性能和语义能力意味着它们的成本并不总是被它们提供的好处所抵消。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-05T09:52:46.593

函数模板试图从参数类型中推断出特化的类型。

函数模板不能部分特化，而类可以。

函数模板不能有默认模板参数，而类可以。

# ios5 - ios无效代码签名异常

> ID：14040330
> 
> 赞同：0
> 
> 时间：2012-12-26T12:04:42.800
> 
> 标签：ios5, xcode4

> 我已经开发了 ios 应用程序并生成了 ipa 文件，并使用配置文件将它安装在我的 ipad 上，它工作正常。现在我需要从另一台 mac 和另一台 iphone 设备安装相同的 ipa 文件。我在管理器中使用了现有证书，但它说代码签名无效。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:15:03.783

证书是系统特定的。您需要将您的证书从您的系统导出到您的钥匙串中的 .p12 或 .cer 文件，然后只有在其他 mac 系统上安装该证书时才能使用它。

使用证书，您还需要之前使用该证书编译构建的配置文件。

# java - 删除Java列表中的重复字符串

> ID：14040331
> 
> 赞同：3
> 
> 时间：2012-12-26T12:04:44.460
> 
> 标签：java, collections, set

更新：我猜`HashSet.add(Object obj)`不调用`contains`. 有没有办法实现我想要的（删除 dup 字符串忽略大小写使用`Set`）？

原始问题：试图从java中的String列表中删除dups，但是在下面的代码`CaseInsensitiveSet.contains(Object ob)`中没有被调用，为什么？

```
public static List<String> removeDupList(List<String>list, boolean ignoreCase){
    Set<String> set = (ignoreCase?new CaseInsensitiveSet():new LinkedHashSet<String>());
    set.addAll(list);

    List<String> res = new Vector<String>(set);
    return res;
}

public class CaseInsensitiveSet  extends LinkedHashSet<String>{

    @Override
    public boolean contains(Object obj){
        //this not getting called.
        if(obj instanceof String){

            return super.contains(((String)obj).toLowerCase());
        }
        return super.contains(obj);
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T12:09:53.020

尝试

```
 Set set = new TreeSet(String.CASE_INSENSITIVE_ORDER);
        set.addAll(list);
        return new ArrayList(set); 
```

**更新**，但正如汤姆安德森所说，它不会保留初始顺序，如果这确实是一个问题，请尝试

```
 Set<String> set = new TreeSet<String>(String.CASE_INSENSITIVE_ORDER);
    Iterator<String> i = list.iterator();
    while (i.hasNext()) {
        String s = i.next();
        if (set.contains(s)) {
            i.remove();
        }
        else {
            set.add(s);
        }
    } 
```

印刷

```
[2, 1] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T12:08:23.860

`contains`不被称为 LinkedHashSet 不是以这种方式实现的。

如果您希望 add() 调用 contains() 您还需要覆盖它。

没有以这种方式实现的原因是，首先调用 contains 意味着您正在执行两个查找，而不是一个更慢的查找。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T12:18:20.690

`add()`方法`LinkedHashSet`不要在`contains()`内部调用，否则你的方法也会被调用。

`LinkedHashSet`为什么不使用`SortedSet`不区分大小写的比较器而不是 a ？使用[String.CASE_INSENSITIVE_ORDER](http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#CASE_INSENSITIVE_ORDER)比较器

您的代码简化为

```
public static List<String> removeDupList(List<String>list, boolean ignoreCase){
    Set<String> set = (ignoreCase?new TreeSet<String>(String.CASE_INSENSITIVE_ORDER):new LinkedHashSet<String>());
    set.addAll(list);

    List<String> res = new ArrayList<String>(set);
    return res;
} 
```

如果您希望保留订单，正如@tom anderson 在他的评论中指定的那样，您可以为订单使用辅助 LinkedHashSet。

您可以尝试将该元素添加到 TreeSet，如果它返回 true，也可以将其添加到 LinkedHashSet，否则不添加。

```
public static List<String> removeDupList(List<String>list){
        Set<String> sortedSet = new TreeSet<String>(String.CASE_INSENSITIVE_ORDER);
        List<String> orderedList = new ArrayList<String>();
        for(String str : list){
             if(sortedSet.add(str)){ // add returns true, if it is not present already else false
                 orderedList.add(str);
             }
        }
        return orderedList;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:34:30.540

尝试

```
 public boolean addAll(Collection<? extends String> c) {
            for(String s : c) {
            if(! this.contains(s)) {
                this.add(s);
            }
        }
        return super.addAll(c);
    }
    @Override
    public boolean contains(Object o) {
        //Do your checking here
//      return super.contains(o);
    } 
```

如果您希望代码通过那里，这将确保调用 contains 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T13:31:22.367

这是另一种方法，使用`HashSet`字符串进行重复数据删除，但直接构建结果列表：

```
public static List<String> removeDupList(List<String> list, boolean ignoreCase) {
    HashSet<String> seen = new HashSet<String>();
    ArrayList<String> deduplicatedList = new ArrayList<String>();
    for (String string : list) {
        if (seen.add(ignoreCase ? string.toLowerCase() : string)) {
            deduplicatedList.add(string);
        }
    }
    return deduplicatedList;
} 
```

这相当简单，只对元素进行一次传递，并且只对每个元素进行小写、哈希查找和列表追加。

# javascript - 在 MVC 中的单个页面上的相同部分视图

> ID：14040336
> 
> 赞同：0
> 
> 时间：2012-12-26T12:05:00.550
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, partial-views

我使用 aspx 视图引擎编写了以下部分视图

```
<%: Html.Telerik().DatePicker()
.Name("datePicker")
.Format(ViewData["dateFormat"].ToString())
.Value(ViewData["dateValue"].ToString())
%> 
```

现在在我的单页上，我已经使用了这个部分视图两次。主页包含

```
<%: Html.Partial("DateTimePicker") %>
 Some Code and again Partial View
<%: Html.Partial("DateTimePicker") %> 
```

可能名称相同，这就是它无法正常工作的原因。
如何解决这个问题？

实际上问题出在javascript上。

```
div class="t-widget t-datetimepicker">
<div class="t-picker-wrap">
<input id="datePicker" class="t-input" type="text" name="datePicker">
<span class="t-select">
<span class="t-icon t-icon-calendar" title="Open the calendar">Open the calendar</span>
<span class="t-icon t-icon-clock" title="Open the time view">Open the time view</span>
</span>
</div>
</div>
<div class="t-widget t-datetimepicker">
<div class="t-picker-wrap">
<input id="datePicker" class="t-input" type="text" name="datePicker">
<span class="t-select">
<span class="t-icon t-icon-calendar" title="Open the calendar">Open the calendar</span>
<span class="t-icon t-icon-clock" title="Open the time view">Open the time view</span>
</span>
</div>
</div> 
```

这就是 Firebug 向我展示的 HTML。这里两个输入 ID 都是 datePicker，这就是 java 脚本函数不起作用的原因。如何在部分视图中动态获取 Id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:42:52.407

在您的情况下，创建一个自定义 html 帮助程序会更合适，它将接收名称和值作为参数。

这是一个链接，可以让您开始[自定义帮助程序实施](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

# html - 如何看到球体的背面？

> ID：14040349
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:06:23.530
> 
> 标签：html, opengl-es, webgl, three.js

```
// set the scene size
var WIDTH = 800;
var HEIGHT = 640;

// set some camera attributes
var VIEW_ANGLE = 45,
ASPECT = WIDTH / HEIGHT,
NEAR = 0.1,
FAR = 10000;

var $container = $('#container');

// create a WebGL renderer, camera
var renderer = new THREE.WebGLRenderer();
var camera = new THREE.PerspectiveCamera(VIEW_ANGLE,
                                         ASPECT,
                                         NEAR,
                                         FAR);
var scene = new THREE.Scene();

// the camera starts at 0,0,0 so pull it back
camera.position.z = 1000;

// start the renderer
renderer.setSize(WIDTH, HEIGHT);

// attach the render-supplied DOM element
$container.append(renderer.domElement);

// create the sphere's material
var sphereMaterial = new THREE.MeshLambertMaterial({
  color: 0xCC0000
});

// set up the sphere vars
var radius = 50, segments = 16, rings = 16;

// create a new mesh with sphere geometry -
// we will cover the sphereMaterial next!
var sphere = new THREE.Mesh(
  new THREE.SphereGeometry(radius, segments, rings),
  sphereMaterial);

sphere.position.x = 20;
sphere.doubleSided = true;

// add the sphere to the scene
scene.add(sphere);

// and the camera
scene.add(camera);

/* Light it up */
var pointLight = new THREE.PointLight(0xFFFFFF);
pointLight.position.x = 10;
pointLight.position.y = 50;
pointLight.position.z = 130;
scene.add(pointLight);

window.setInterval(update, 16.66666666);

var keyboard = new THREEx.KeyboardState();

function update() {
  if (keyboard.pressed("W")) {
    camera.position.z -= 5;
  } else if (keyboard.pressed("S")) {
    camera.position.z += 5;
  }

  renderer.render(scene, camera);
} 
```

那是我的代码，这里使用 W 和 S 键的简单演示让我可以放大/缩小 3D 球体。

但是，当我进入球体“内部”时，我看不到它的背面，即使我放了`sphere.doubleSided = true;`.

我试过把`renderer.setFaceCulling(true);`（和假的），但他们都没有修复它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:27:30.430

用于`side: THREE.DoubleSide`材料

您使用的是哪个版本的three.js？

[jsfiddle](http://jsfiddle.net/jFyFJ/2/)

# android - 谷歌播放政策中的“请勿发布重复内容”是什么意思？

> ID：14040350
> 
> 赞同：1
> 
> 时间：2012-12-26T12:06:25.387
> 
> 标签：android, google-play

> **可能重复：**
> [Google Play 内容政策](https://stackoverflow.com/questions/12051362/google-play-content-policy)

我知道这不是完全正确的地方..但是我尝试了几个论坛并没有得到任何答案..所以

我的应用程序昨天从 google play 中删除了..我试图理解为什么..

没有任何警告......昨天早上我收到了一封来自谷歌团队的邮件，说我的应用程序已被删除......他们告诉我的唯一原因是：

> 不要发布重复的内容

没有别的...我承认我在页面中有一些关键字（我当时不知道“不允许”）..但是根据邮件，这不是删除的原因..

那么哪些应用程序被视为“重复内容”。？

我能想到的唯一问题是我的另一个应用程序“婴儿动物声音”......而删除的应用程序是“婴儿汽车声音”。

我承认他们都有相似的代码和 UI。但从用户的角度来看，它们服务于不同的目的（我认为）。

所以我想知道删除是否是由于

1.  我现有应用程序中的代码（和 UI）之间的相似性，即使它们做了不同的事情......而且谷歌游戏不允许这样做......
2.  有一些过滤机制可以自动比较和删除具有相似数据结构的应用程序。所以应用程序在没有任何人审查的情况下被删除。
3.  我不允许发布任何已存在于 google play 中的应用程序（不太可能）

在我重新提交之前，我需要知道真正的原因。如果我从现有的应用程序中更改 UI 和类结构，我可以重新上传吗？

# filtering - 通过命令过滤 ZSH 历史记录

> ID：14040351
> 
> 赞同：52
> 
> 时间：2012-12-26T12:06:26.680
> 
> 标签：filtering, history, zsh

有人告诉我，在 ZSH 中你可以做类似的事情`command`，然后当你点击它时，它会根据给定的命令过滤历史记录。但是当我尝试这个时，它就像 bash 一样循环历史。这是默认禁用的吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-12-26T14:24:46.603

点击`Ctrl+R`，输入一些字母，它会找到带有这些字母的上一个命令，继续按 Ctrl+R 继续查看之前的结果。
适用于 bash、zsh（以及我想的其他 shell）。

我个人喜欢的是：输入一些字母，按`Up`，出现以前以相同字母开头的命令。很给力，我喜欢。
你必须绑定你想要的键`history-beginning-search-backward`和`history-beginning-search-forward`.

如果这对您来说还不够，zsh 有很多选择，请尝试在[Zsh Line Editor](http://www.cs.elte.hu/zsh-manual/zsh_14.html)中查看并告诉我们。
对于 bash，功能较弱但更常见[的是历史的 Bash 命令](http://www.gnu.org/software/bash/manual/html_node/Commands-For-History.html)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T23:05:59.140

使用感叹号：

```
> !<starts-with this string> 
```

您可以向上/向下箭头浏览所有以它开头的命令。我一直使用 "!v" 来获取我之前使用 Vim 打开文件的命令。

除了匹配字符串的开头之外，您还可以使用问号进行搜索，

```
> !?status 
```

可以找到“git status”。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-22T17:58:16.540

使用[percol](https://github.com/mooz/percol)`Ctrl`通过-动态搜索和浏览您的历史记录`r`。

*   安装 percol：`sudo pip install percol`
*   将[zsh-history-search](https://github.com/mooz/percol#zsh-history-search)代码片段添加到您的 .zshrc 文件中。

在`Ctrl`-之后`r`，您可以在同一窗口中查看整个历史记录。搜索关键字（动态）缩小了该列表的范围。您可以使用键绑定（如[emacs like](https://github.com/mooz/percol#configuration) config）在列表中上下导航并最终做出选择。

这是一个搜索`sudo install`历史记录中所有可用的命令`sudo make install`。

[![percol_history_search_example](../Images/d6f21fd3cebcc733b2ebea729a51c9bb.png)](https://i.stack.imgur.com/2vOIS.png)

`Enter`发出选定的命令。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-26T10:10:35.110

在 zsh 中激活 vim 键绑定后，您可以在 vi 命令模式下使用 vi-history-search-backward (/)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-26T12:21:20.373

[这是fish](http://fishshell.com/)中可用的功能，但似乎有人为它制作了一个[zsh 插件](https://github.com/zsh-users/zsh-history-substring-search)。它在标准 ZSH 中不可用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-23T03:24:42.520

我们还可以使用[fzf 交互式](https://github.com/junegunn/fzf)地模糊搜索命令历史。

以下是安装方法：

```
git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
~/.fzf/install 
```

对它的所有配置说“是”。之后，重新启动你的 zsh shell，然后按`Ctrl-R`，哇，交互式命令历史搜索弹出。享受！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-18T06:56:53.083

如果您不想添加任何键绑定，则可以默认使用`Ctrl`+`R`向后移动和`Ctrl`+`S`向前移动进行搜索。

> 您可以使用任何快捷键`Ctrl`+`R`或`Ctrl`+开始搜索`S`

# javascript - JQuery：单击单选按钮时更改类

> ID：14040353
> 
> 赞同：1
> 
> 时间：2012-12-26T12:06:32.013
> 
> 标签：javascript, jquery, css

我需要一些关于 javascript 的帮助。

这是 JSFIDDLE 中代码的链接：http: [//jsfiddle.net/Gopher69/B98kZ/4/](http://jsfiddle.net/Gopher69/B98kZ/4/)

我的 JS 是：

```
$(document).ready(function() {
//add the Selected class to the checked radio button
$('[type=radio]').parent().addClass("selected");
//If another radio button is clicked, add the select class, and remove it from the       previously selected radio
$('input').click(function() {
    $('input:not(:checked)').parent().removeClass("radio  validate-one-required-by-name product-custom-option").find("class").html("radio  validate-one-required-by-name product-custom-option");
    $('input:checked').parent().addClass("radio  validate-one-required-by-name product-custom-option").find("class").html("radio  validate-one-required-by-name product-custom-option active");
});}); 
```

我想调整单选按钮的背景颜色，就像我对 CSS 的悬停效果所做的那样。因此，当单选按钮处于活动状态时，我需要在类中添加“选中”之类的内容。

我找到了这篇文章，但我没有得到前言：[jQuery Checkbox selection and change class](https://stackoverflow.com/questions/7672538/jquery-checkbox-selection-and-change-class)

如果有人可以帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:11:47.077

你可以使用纯 CSS 来做到这一点：

```
 input[type="radio"]:checked {
    /* put some style here */
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:10:12.170

```
$("#" + radioelementid).on("change",function(){  
$(this).addClass("testClass")   
//or   
$(this).removeClass("testClass");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:24:33.313

基于@Krunal Goswami 的回答——甚至更短：

```
$("#" + elementId).on("change",function(){
    $(this).toggleClass("checked");
}); 
```

## 笔记

那应该做你的伎俩。虽然我不推荐使用这个。而是尝试使用“自定义复选框”实现/jQuery 插件，因为本机浏览器复选框并不喜欢被样式化（跨浏览器）。

# c# - 使用 LINQ 检查枚举器值（如果存在）

> ID：14040359
> 
> 赞同：4
> 
> 时间：2012-12-26T12:07:22.233
> 
> 标签：c#, linq, dataset, linq-to-objects

```
public enum Test
{
  A = 0,
  B = 1,
  C = 2,
  D = 3,
  E = 4,
  F = 5,
  G = 6
}

DataSet oDsEnum = new DataSet();
DataTable oDtEnum = new DataTable();

oDtEnum.Columns.Add(new DataColumn("ENUM_ID", typeof(int)));
oDtEnum.Columns.Add(new DataColumn("ENUM_VALUE", typeof(int)));

oDtEnum.Rows.Add(10, 1001);
oDtEnum.Rows.Add(21, 1002);
oDtEnum.Rows.Add(2, 1003);
oDtEnum.Rows.Add(300, 1004);
oDtEnum.Rows.Add(4, 1005);

oDsEnum.Tables.Add(oDtEnum);
oDsEnum.AcceptChanges(); 
```

我想检查数据集“oDsEnum”的列“ENUM_ID”是否包含枚举器“Test”的值，以便使用 LINQ 进行进一步操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:28:02.733

```
var enumValues = (
    from int val in Enum.GetValues(typeof(Test))
    select val
).ToArray(); 
```

如果您只想知道是否有任何此类值，请使用`Any`：

```
var query = oDtEnum.AsEnumerable().Any(
    row => enumValues.Contains(row.Field<int>("ENUM_ID"))
); 
```

如果您需要这些值本身：

```
var query = 
    from row in oDtEnum.AsEnumerable()
    where enumValues.Contains(row.Field<int>("ENUM_ID"))
    select row; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T12:29:07.040

这将检查列是否具有来自枚举的值：

```
oDsEnum.AsEnumerable()
       .Any(row => Enum.IsDefined(typeof(Test), row.Field<int>("ENUM_ID"))); 
```

如果要从`ENUM_ID`字段中的枚举中选择具有值的行，请使用`Where`而不是`Any`.

*更新*单查询（我认为也是最好的性能）：

```
var query = from row in oDtEnum.AsEnumerable()
            join t in Enum.GetValues(typeof (Test)).Cast<Test>()
                on row.Field<Test>("ENUM_ID") equals t
            select row; 
```

# java - 如何在java中用“”替换[“

> ID：14040362
> 
> 赞同：0
> 
> 时间：2012-12-26T12:07:53.727
> 
> 标签：java, regex, string, replace

我有一个像这样的字符串= `["41020834846 - Yan Oda 1"` 。我想`["`用replaceAll删除字符串开头的（）。

所以我该怎么做？

我试过 `replaceAll("[\"", "")`了，但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:08:55.367

改用就好`replace("[\"", "")`了。

`replaceAll(...)`用于正则表达式匹配。如果你想用 replaceAll 来做，你需要转义`[`正则表达式中使用的符号：

```
replaceAll("\\[\"", "") 
```

如果字符串总是在开头完全一样，只需执行以下操作：

```
.substring(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:11:08.733

试试下面的代码。

```
String test = "[\"41020834846 - Yan Oda 1";
Log.i("======= Replace String"," :: "+test.replace("[\"", "")); 
```

**输出-** `41020834846 - Yan Oda 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:11:17.673

您可以使用[子字符串](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int%29)方法：

```
String str = "[\"41020834846 - Yan Oda 1";
str = str.substring(2);
// OR
// str = str.substring(2, str.length()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T12:12:18.003

您需要拥有，`replaceAll("\[\"", "")`因为它`[`是正则表达式语法的一部分，从而使您为您的案例输入无效的正则表达式。

如果您经常使用文本，也可以使用 Apache Commons StringUitls 或 Guava 之一。例如，使用 StringUtils 有[StringUtils#remove(str,remove)](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#remove%28java.lang.String,%20java.lang.String%29)，例如：

```
 StringUtils.remove("queued", "ue") = "qd" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T08:58:39.240

你不应该使用

```
replaceAll(); 
```

而不是这个，使用

```
replace(); 
```

方法。另一种方法是使用字符串类方法。

祝你好运！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-26T12:18:08.943

试试看 ：

```
 String example = "["41020834846 - Yan Oda 1";
    String pattern = "^(\[\")";
    example = example.replaceAll(pattern,"")); 
```

# android - 搜索过滤列表视图的 Android IndexOutOfBoundsException 错误

> ID：14040364
> 
> 赞同：6
> 
> 时间：2012-12-26T12:07:55.903
> 
> 标签：android, searchview

我已经在我的 SherlockAction Bar 中为我的 SearchView 实现了搜索过滤器。我已经实现了一个自定义过滤器。当我输入任何字母时，我收到一个错误

```
public class PlacesListAdapter extends ArrayAdapter<Place> implements
        Filterable {

    public Context mContext;

    List<Place> mPlaces, orig;

    public PlacesListAdapter(Context context, List<Place> places) {
        super(context, R.layout.list_item_places, places);
        // TODO Auto-generated constructor stub
        this.mPlaces = places;
        this.mContext = context;

        orig = new ArrayList<Place>(places);

    }

    @Override
    public Place getItem(int position) {
        // TODO Auto-generated method stub
        return mPlaces.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        if (convertView == null) {
            LayoutInflater viewInflater;
            viewInflater = LayoutInflater.from(getContext());
            convertView = viewInflater.inflate(R.layout.list_item_places, null);

            holder = new ViewHolder();
            holder.placeTitle = (TextView) convertView
                    .findViewById(R.id.place_title);
            holder.placeDistance = (TextView) convertView
                    .findViewById(R.id.place_distance);
            holder.placeCategoryIcon = (ImageView) convertView
                    .findViewById(R.id.place_category_icon);

            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.placeTitle.setText(mPlaces.get(position).getPlaceName());
        holder.placeDistance.setText(mPlaces.get(position).getPlaceDistance());
        holder.placeCategoryIcon
                .setImageResource(R.drawable.icon_category_hillstation);

        // // Setting Alternative Row Colors
        if (position % 2 == 0) {
            convertView
                    .setBackgroundResource(R.drawable.list_view_places_row_1);
        } else {
            convertView
                    .setBackgroundResource(R.drawable.list_view_places_row_2);
        }

        return convertView;
    }

    static class ViewHolder {
        TextView placeId;

        TextView placeTitle;

        TextView placeDistance;

        ImageView placeCategoryIcon;
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return new PlaceFilter();
    }

    private class PlaceFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint){
            FilterResults oReturn = new FilterResults();
            ArrayList<Place> results = new ArrayList<Place>();
            if (orig == null)
                orig = mPlaces;
            if (constraint != null) {
                if (orig != null && orig.size() > 0) {
                    for (Place g : orig) {
                        if (g.getPlaceName()
                                .toLowerCase()
                                .startsWith(constraint.toString().toLowerCase()))
                            results.add(g);
                    }
                }
                oReturn.values = results;
            }
            return oReturn;
        }

        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            mPlaces = (ArrayList<Place>) results.values;
            notifyDataSetChanged();
        }

    }

} 
```

**错误**

```
12-26 17:24:43.900: E/AndroidRuntime(18693): FATAL EXCEPTION: main
12-26 17:24:43.900: E/AndroidRuntime(18693): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
12-26 17:24:43.900: E/AndroidRuntime(18693):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at java.util.ArrayList.get(ArrayList.java:304)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at com.m7.nomad.PlacesListAdapter.getView(PlacesListAdapter.java:68)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.AbsListView.obtainView(AbsListView.java:2193)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.ListView.makeAndAddView(ListView.java:1774)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.ListView.fillDown(ListView.java:672)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.ListView.fillSpecific(ListView.java:1330)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.ListView.layoutChildren(ListView.java:1603)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.AbsListView.onLayout(AbsListView.java:2044)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.View.layout(View.java:11418)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.View.layout(View.java:11418)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.View.layout(View.java:11418)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.View.layout(View.java:11418)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.View.layout(View.java:11418)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1628)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2585)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.os.Looper.loop(Looper.java:137)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at android.app.ActivityThread.main(ActivityThread.java:4507)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at java.lang.reflect.Method.invokeNative(Native Method)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at java.lang.reflect.Method.invoke(Method.java:511)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-26 17:24:43.900: E/AndroidRuntime(18693):    at dalvik.system.NativeStart.main(Native Method) 
```

**错误**

它指向

```
holder.placeTitle.setText(mPlaces.get(position).getPlaceName()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:24:44.223

**尝试覆盖这条线**

```
holder.placeTitle.setText(mPlaces.get(position).getPlaceName()); 
```

****符合以下条件 ****

```
if(position < mPlaces.size() && holder.placeTitle != null)
  holder.placeTitle.setText(mPlaces.get(position).getPlaceName()); 
```

**编辑 ：**

这是我实现的小片段：

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {

            ViewHolder holder;

            if (convertView == null) {
                LayoutInflater viewInflater;
                viewInflater = getLayoutInflater();
                convertView = viewInflater.inflate(R.layout.listview, null);

                holder = new ViewHolder();
                convertView.setTag(holder);

            } else {
                holder = (ViewHolder) convertView.getTag();

                // Try here first
                holder.textview = (TextView) convertView.findViewById(R.id.TextView01);
                holder.imageview = (ImageView) convertView.findViewById(R.id.ImageView01);
            }

            // Try here second
            // holder.textview = (TextView)convertView.findViewById(R.id.TextView01);
            // holder.imageview = (ImageView)convertView.findViewById(R.id.ImageView01);

            if (holder.textview != null && position < data_text.length)
                holder.textview.setText(data_text[position]);
            if (holder.imageview != null && position < data_image.length)
                holder.imageview.setImageResource(data_image[position]);

            return convertView;
        } 
```

你可以用你的变量替换它。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:27:41.733

为您的应用尝试此代码，

```
if (g.getPlaceName().toLowerCase().contains(constraint.toString().toLowerCase())){
    results.add(g);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:15:50.357

如果您调试，您会看到`mPlaces.getSize()`等于 1，并尝试访问位置 1 中的项目，您会得到一个`ArrayOutOfBounds`异常。

你的 ArrayList 有问题，它可能没有你想要获取的所有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T00:31:23.913

如果有人需要进入您的活动的自定义操作栏中的 SearchView 代码（或在本例中为 ListFragment），则为：

```
 ActionBar actionBar = getActivity().getActionBar();
    actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_SHOW_HOME);
    actionBar.setDisplayShowHomeEnabled(true);
    actionBar.setCustomView(R.layout.your_bar);
    SearchView groupSV = (SearchView)actionBar.getCustomView().findViewById(R.id.groupSV);
    groupSV.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
        @Override
        public boolean onQueryTextChange(String newText) {
            Log.d(TAG,"onQueryTextChange");
            ListViewFragment.adapter.getFilter().filter(newText);
            return true;
        }
        @Override
        public boolean onQueryTextSubmit(String query) {
            Log.d(TAG,"onQueryTextSubmit");
            //ListViewFragment.adapter.getFilter().filter(query);
            return true;
        }
    }); 
```

您需要在 ListViewFragment 中像这样将适配器声明为静态：

```
public static ArrayAdapter<Your_obj> adapter = null;

public class ListViewFragment extends ListFragment implements OnItemClickListener {
    //...//
} 
```

**另外，请务必从他的链接中查看 OP 的编辑代码：** [PASTEBIN EDITS](http://pastebin.com/7q4dQC4B)

# php - 路由中的标准参数

> ID：14040369
> 
> 赞同：0
> 
> 时间：2012-12-26T12:08:07.057
> 
> 标签：php, zend-framework2

我有四个调用相同控制器和操作的 child_routes。

```
    'noticia' => 数组（
        '类型' => '段'，
        '选项' => 数组（
            '路线' => 'noticia[/:slug]',
            '约束' => 数组（
                    '控制器' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    '动作' => '[a-zA-Z][a-zA-Z0-9_-]*',
            ),
            '默认值' => 数组（
                '__NAMESPACE__' => '应用程序\控制器',
                '控制器' => '发布'，
                '动作' => '索引'，
            ),
        ),
    ),
    'dica' => 数组（
        '类型' => '段'，
        '选项' => 数组（
            '路线' => 'dica[/:slug]',
            '约束' => 数组（
                '控制器' => '[a-zA-Z][a-zA-Z0-9_-]*',
                '动作' => '[a-zA-Z][a-zA-Z0-9_-]*',
            ),
            '默认值' => 数组（
                '__NAMESPACE__' => '应用程序\控制器',
                '控制器' => '发布'，
                '动作' => '索引'，
            ),
        ),
    ),
    'ovarejao' => 数组（
        '类型' => '段'，
        '选项' => 数组（
            '路线' => 'o-varejao[/:slug]',
            '约束' => 数组（
                '控制器' => '[a-zA-Z][a-zA-Z0-9_-]*',
                '动作' => '[a-zA-Z][a-zA-Z0-9_-]*',
            ),
            '默认值' => 数组（
                '__NAMESPACE__' => '应用程序\控制器',
                '控制器' => '发布'，
                '动作' => '索引'，
            ),
        ),
    ),
    'servicos' => 数组（
        '类型' => '段'，
        '选项' => 数组（
            '路线' => 'servicos[/:slug]',
            '约束' => 数组（
                '控制器' => '[a-zA-Z][a-zA-Z0-9_-]*',
                '动作' => '[a-zA-Z][a-zA-Z0-9_-]*',
            ),
            '默认值' => 数组（
                '__NAMESPACE__' => '应用程序\控制器',
                '控制器' => '发布'，
                '动作' => '索引'，
            ),
        ),
    ),

```

我需要的是传递一个参数，以便我可以区分这些路线。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:17:53.800

我觉得你的结构有点不对劲。为什么一个控制器的一个动作有四种不同的路线？这几乎没有任何意义。

而是将您到目前为止设置的每个路由`servicos`, `ovarejao`, `dica`,路由`noticia`到具有类似操作的 PostController `servicosAction`, `ovarejaoAction`,`dicaAction`和`noticiaAction`

如果动作在它们各自的视图中非常相似，您也可以为所有动作使用一个模板，这将使模板变得更容易一些。这样做如下：

```
public function servicosAction()
{
    $vm = new ViewModel();
    $vm->setTemplate('namespace/post/multiple.phtml');

    // Grab data from your model here with some parameter

    return $vm->setVariables(array(
        //key-value paired array of view variables
    ));
} 
```

如果这不符合您的标准，请让您的问题更清楚。你想要达到的究竟是什么？

# cordova - 使用 phonegap 发送电子邮件

> ID：14040371
> 
> 赞同：8
> 
> 时间：2012-12-26T12:08:22.323
> 
> 标签：cordova

任何人都可以帮助使用Phonegap在后台发送电子邮件

我没有找到支持它的表格。任何人都可以在这个问题上帮助我。提前致谢...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T14:10:40.847

您可以使用插件[Email Composer](https://github.com/katzer/cordova-plugin-email-composer)，也可以使用 mailto 标签调用智能手机的本地邮箱：

```
 <a href="mailto:?subject=subject of the email&body=whatever body body" target="_blank">send email</a> 
```

有关 mailto 参数的更多信息，请检查此[问题](https://stackoverflow.com/questions/1093925/how-to-send-mail-with-a-subject-using-a-mailto-url)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T12:14:53.540

第一步：在项目类路径中添加cordova-2.1.0.jar

第 2 步：在 assets/www/js 文件夹中添加 cordova-2.1.0.js。

第 3 步：创建一个名为 EmailComoposer.java 的新 Java 类

```
package com.dinesh.pb;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.apache.cordova.api.PluginResult.Status;
import org.json.JSONArray;
import org.json.JSONException;
import android.annotation.SuppressLint;
import android.content.Intent;
import android.text.Html;
import com.dinesh.pb.utility.Mail;

@SuppressLint("ParserError")
public class EmailComposer extends Plugin {
public final String ACTION_SEND_EMAIL = "sendEmail";

 @Override
 public PluginResult execute(String action, JSONArray arg1, String callbackId) {
 PluginResult result = new PluginResult(Status.INVALID_ACTION);
 if (action.equals(ACTION_SEND_EMAIL)) {
 try {
 String message = arg1.getString(0);
 this.sendEmailViaGmail(message);
 result = new PluginResult(Status.OK);

 }
 catch (JSONException ex) {
 result = new PluginResult(Status.JSON_EXCEPTION, ex.getMessage());
 } catch (Exception e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 } 
 }
 return result;
 }

 private void sendEmailViaGmail(String body) throws Exception{
 Mail m = new Mail("From_email_address@gmail.com", "your password");
 String[] toArr = {"TO_EMAIL_ADDRESS@gmail.com"};
 m.set_to(toArr);
 m.set_from("FROM_EMAIL_ADDRESS@gmail.com");
 m.set_body(body);
 m.set_subject("TEST SUBJECT");
 boolean sendFlag = m.send();

 }

} 
```

步骤 4\. 将此 Mail.java 复制到您选择的包中。我的包名称是 com.dinesh.pb.utility。

```
package com.dinesh.pb.utility;
import java.util.Date;
import java.util.Properties;
import javax.activation.CommandMap;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;
public class Mail extends javax.mail.Authenticator { 
 private String _user; 
 private String _pass; 

 private String[] _to; 
 private String _from; 

 private String _port; 
 private String _sport; 

 private String _host; 

 private String _subject; 
 private String _body; 

 private boolean _auth; 

 private boolean _debuggable; 

 private Multipart _multipart; 

 public Mail() { 
 _host = "smtp.gmail.com"; // default smtp server 
 _port = "465"; // default smtp port 
 _sport = "465"; // default socketfactory port 

 _user = ""; // username 
 _pass = ""; // password 
 _from = ""; // email sent from 
 _subject = ""; // email subject 
 _body = ""; // email body 

 _debuggable = false; // debug mode on or off - default off 
 _auth = true; // smtp authentication - default on 

 _multipart = new MimeMultipart(); 

 // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
 MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
 mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
 mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
 mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
 mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
 mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
 CommandMap.setDefaultCommandMap(mc); 
 } 

 public Mail(String user, String pass) { 
 this(); 

 _user = user; 
 _pass = pass; 
 } 

 public boolean send() throws Exception { 
 Properties props = _setProperties(); 

 if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
 Session session = Session.getInstance(props, this); 

 MimeMessage msg = new MimeMessage(session); 

 msg.setFrom(new InternetAddress(_from)); 

 InternetAddress[] addressTo = new InternetAddress[_to.length]; 
 for (int i = 0; i < _to.length; i++) { 
 addressTo[i] = new InternetAddress(_to[i]); 
 } 
 msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

 msg.setSubject(_subject); 
 msg.setSentDate(new Date()); 

 // setup message body 
 BodyPart messageBodyPart = new MimeBodyPart(); 
 messageBodyPart.setText(_body); 
 _multipart.addBodyPart(messageBodyPart); 

 // Put parts in message 
 msg.setContent(_multipart); 

 // send email 
 Transport.send(msg); 

 return true; 
 } else { 
 return false; 
 } 
 } 

 public void addAttachment(String filename) throws Exception { 
 BodyPart messageBodyPart = new MimeBodyPart(); 
 DataSource source = new FileDataSource(filename); 
 messageBodyPart.setDataHandler(new DataHandler(source)); 
 messageBodyPart.setFileName(filename); 

 _multipart.addBodyPart(messageBodyPart); 
 } 

 public String[] get_to() {
 return _to;
 }
public void set_to(String[] _to) {
 this._to = _to;
 }
public String get_from() {
 return _from;
 }
public void set_from(String _from) {
 this._from = _from;
 }
public String get_body() {
 return _body;
 }
public void set_body(String _body) {
 this._body = _body;
 }
@Override 
 public PasswordAuthentication getPasswordAuthentication() { 
 return new PasswordAuthentication(_user, _pass); 
 } 

 private Properties _setProperties() { 
 Properties props = new Properties(); 

 props.put("mail.smtp.host", _host); 

 if(_debuggable) { 
 props.put("mail.debug", "true"); 
 } 

 if(_auth) { 
 props.put("mail.smtp.auth", "true"); 
 } 

 props.put("mail.smtp.port", _port); 
 props.put("mail.smtp.socketFactory.port", _sport); 
 props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
 props.put("mail.smtp.socketFactory.fallback", "false"); 

 return props; 
 }
public String get_subject() {
 return _subject;
 }
public void set_subject(String _subject) {
 this._subject = _subject;
 }

 // more of the getters and setters ….. 
 } 
```

第 5 步：更新 config.xml 并添加有关新插件类 EmailComposer.java 的详细信息。我的看起来像这样 - 。请使用您的包路径更新包名称 value=”com.dinesh.pb.EmailComposer”。

```
<?xml version="1.0" encoding="utf-8"?> 
<cordova>
    <access origin="http://127.0.0.1*"/> <!-- allow local pages --> 
    <access origin=".*"/> 
    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="false" />
    <preference name="exit-on-suspend" value="false" />
<plugins>
    <plugin name="App" value="org.apache.cordova.App"/>
    <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
    <plugin name="Device" value="org.apache.cordova.Device"/>
    <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
    <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
    <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
    <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
    <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
    <plugin name="File" value="org.apache.cordova.FileUtils"/>
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
    <plugin name="Notification" value="org.apache.cordova.Notification"/>
    <plugin name="Storage" value="org.apache.cordova.Storage"/>
    <plugin name="Temperature" value="org.apache.cordova.TempListener"/>
    <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
    <plugin name="Capture" value="org.apache.cordova.Capture"/>
    <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
    <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>
    <plugin name="Echo" value="org.apache.cordova.Echo" />
    <plugin name="EmailComposer" value="com.dinesh.pb.EmailComposer"/>
 </plugins>
</cordova> 
```

第 6 步：创建一个名为 email.js 的新 javascript 文件

```
var EmailComposer = function(){};
/*
cordova.addConstructor(function() {
    cordova.addPlugin("emailcomposer", new EmailComposer());
});
*/
EmailComposer.prototype.send = function (message){
console.log("Calling the send message");
cordova.exec(function(){ alert('feedback sent')}, 
    function(){ alert('feedback was not sent')}, 
    'EmailComposer', 
    'sendEmail', 
    [message]);
}
function sendFeedback(){
    window.EmailComposer.prototype.send("My message body");
} 
```

现在正如我之前提到的，我使用的是cordova-2.1.0.js/jar 文件，最新版本和旧版本（cordova-1.9.0）之间存在细微差别。如果您使用的是旧版本，则需要取消对 cordova.addConstructorabove 部分的注释，而不是调用

```
window.EmailComposer.prototype.send("My message body");
Use this:
window.plugins.emailComposer.prototype.send(body); 
```

如果你不使用它，那么你可能会得到错误，说 window.plugins 没有定义。如果您遇到此类问题，请使用 firebug 并查看“window”变量下定义了哪些变量。

请注意名为“feedback()”的方法。我只是通过从用户反馈文本框中捕获输入来将用户文本作为消息正文传递。为简单起见，我刚刚粘贴了一个默认的电子邮件正文。

第 7 步：在 index.html 文件中包含 js 文件

```
// <!–[CDATA[
javascript" src="js/email.js">
// ]]> 
```

第 8 步：在 index.html 中包含 cordova js 文件

```
// <!–[CDATA[
javascript" src="js/cordova-2.1.0.js">
// ]]> 
```

步骤9：在libs文件夹中添加三个Java邮件api的jar文件——Activation.jar、Mail.jar和Additional.jar，并将其添加到类路径中。你可以在这里找到这些文件。

干杯！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T12:43:01.683

试试这个Phonegap插件：[带有附件处理的EmailComposer](https://github.com/phonegap/phonegap-plugins/tree/master/Android/EmailComposerWithAttachments)

# php - fwrite 删除文件中的一行

> ID：14040374
> 
> 赞同：0
> 
> 时间：2012-12-26T12:08:37.230
> 
> 标签：php, fwrite, delete-row

> **可能重复：**
> [从 CSV 文件中删除行](https://stackoverflow.com/questions/4072015/remove-line-from-csv-file)

我有一个以这种方式构建的文件

```
numbers1;numbers;numbers;\n
numbers2;numbers;numbers;\n
numbers3 to delete;numbers;numbers;\n
numbers4;numbers;numbers;\n 
```

如果我想删除包含“numbers3 to delete”的行（制作文件：

```
numbers1;numbers;numbers;\n
numbers2;numbers;numbers;\n
numbers4;numbers;numbers;\n 
```

) 我怎样才能使用 fwrite？

我没有找到“删除行”功能，所以我在考虑计算字符直到 \n，但我仍然找不到“删除这么多字符”的方法。

有“del”字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:18:33.250

尝试这个-

```
$filename = "filename.txt";
$handle = @fopen($filename, "r");
if ($handle) {
    while (($buffer = fgets($handle, 1096)) !== false) {
        if(!stripos($buffer, "numbers3 to delete")
            $somecontent .= $buffer;
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}

if (is_writable($filename)) {

    if (!$handle = fopen($filename, 'W+')) {
         echo "Cannot open file ($filename)";
         exit;
    }

    if (fwrite($handle, $somecontent) === FALSE) {
        echo "Cannot write to file ($filename)";
        exit;
    }

    echo "Success, wrote ($somecontent) to file ($filename)";

    fclose($handle);

} else {
    echo "The file $filename is not writable";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:46:48.217

感谢 Suresh，我最终得到了这个（在需要的地方添加了一个 !==，在 stripos 部分）

```
$eliminabile="numbers3 to delete;";

$handle = fopen("file.to.edit", "r");
if ($handle) {
    while (($buffer = fgets($handle)) !== false) {
        if(stripos($buffer, $eliminabile)!== 0)
        {
            $occorrenza .= $buffer;
        }
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}

if (is_writable("file.to.edit")) {

    if (!$handle = fopen("file.to.edit", "w+")) {
         echo "Cannot open file";
         exit;
    }

    if (fwrite($handle, $occorrenza) === FALSE) {
        echo "Cannot write to file";
        exit;
    }

    echo "Success, wrote ($occorrenza) to file)";

    fclose($handle);

} else {
    echo "The file is not writable";
}

?> 
```

# scala - 如何通过 fromJson(toJson(date)) 将日期与 specs2 匹配

> ID：14040375
> 
> 赞同：3
> 
> 时间：2012-12-26T12:08:42.707
> 
> 标签：scala, jodatime, specs2, playframework-2.1

我陷入了以下问题：我想编写一个 specs2 规范来断言我的到和从 json 转换是对称的。但是，我在 joda datetime 日期上遇到错误。

```
'2012-04-17T00:04:00.000+02:00' is not equal to '2012-04-17T00:04:00.000+02:00'. Values have the same string representation but possibly different types like List[Int] and List[String] (TimeSpecs.scala:18) 
```

这是一个证明问题的极简规格

```
import org.joda.time.DateTime
import org.specs2.mutable.Specification

class TimeSpecs extends Specification {
  "joda and specs2" should {
    "play nice" in {
      val date = DateTime.parse("2012-04-17T00:04:00+0200")
      val date2 = DateTime.parse("2012-04-17T00:04:00+0200")
      date === date2
    }
    "play nice through play json transform" in {
      import play.api.libs.json._
      import play.api.libs.json.Json._
      val date = DateTime.parse("2012-04-17T00:04:00+0200")
      val jsDate= toJson(date)
      val date2= jsDate.as[DateTime]

      date === date2
    }
  }
} 
```

我应该如何在第二次测试中比较 date 和 date2 ？它们是相同的，但 specs2 似乎没有看到:(

- - 编辑

“手动”在运行时使用 date.getClass.getCanonicalName 检查类型按预期返回 org.joda.time.Datetime

```
import org.joda.time.DateTime
import org.specs2.mutable.Specification

class TimeSpecs extends Specification {
  "joda and specs2" should {
    "play nice" in {
      val date = DateTime.parse("2012-04-17T00:04:00+0200")
      val date2 = DateTime.parse("2012-04-17T00:04:00+0200")
      date === date2
    }
    "play nice through play json transform" in {
      import play.api.libs.json._
      import play.api.libs.json.Json._
      val date:DateTime = DateTime.parse("2012-04-17T00:04:00+0200")
      val jsDate= toJson(date)
      val date2:DateTim= jsDate.as[DateTime]
      println(date.getClass.getCanonicalName) //prints org.joda.time.DateTime
      println(date2.getClass.getCanonicalName)//prints org.joda.time.DateTime
      date === date2
    }
  }
} 
```

使用 DateTime#isEqual 确实有效，但我失去了流畅匹配器的好处以及它们带来的有用错误消息。此外，我实际上要比较的是恰好包含日期的案例类实例，而不是日期本身。

使用

```
 date should beEqualTo(date2) 
```

产生相同的错误`===`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:57:26.523

问题是 joda time 定义了一个非常严格的 equals ，它考虑了日期的 Chronology 是否相等（ DateTime#getChronology ）。Kim Stebel 提出的 isEqual 方法确实忽略了年表。

从那里开始，有 2 种可能性：为播放定义自定义读取和写入，然后使用相同的模式创建日期，如下例所示

```
import org.joda.time.DateTime
import org.joda.time.format.DateTimeFormat
import org.specs2.mutable.Specification

class TimeSpecs extends Specification {
    val pattern = "yyyy-MM-dd'T'HH:mm:ssZZ"
  "joda and specs2" should {
    "play nice" in {
      val date = DateTime.parse("2012-04-17T00:04:00+0200",DateTimeFormat.forPattern(pattern))
      val date2 = DateTime.parse("2012-04-17T00:04:00+0200",DateTimeFormat.forPattern(pattern))
      date === date2
    }
    "play nice through play json transform" in {
      import play.api.libs.json.Json._

      //play2 custom write
      implicit def customJodaWrite = play.api.libs.json.Writes.jodaDateWrites(pattern)
      //play2 custom read
      implicit def customJodaRead = play.api.libs.json.Reads.jodaDateReads(pattern) 

      val date:DateTime = DateTime.parse("2012-04-17T00:04:00+0200",DateTimeFormat.forPattern(pattern)) //make sure you parse the initial date with the same pattern
      val jsDate= toJson(date)
      val date2:DateTime= jsDate.as[DateTime]

      println(date.getClass.getCanonicalName)
      println(date2.getClass.getCanonicalName)
      println(jsDate)
      date should beEqualTo(date2)
    }
  }
} 
```

Play 2.1 默认基于 unix 时间戳解析（并写入 json），以毫秒为单位，没有时区信息。从 unix 时间戳解析回来时，它将在本地计算机时区（在我的情况下为欧洲/巴黎）中考虑它。因此需要自定义解析器/编写器

Joda 在没有 parser 参数的情况下调用 parse 时使用特定的格式化程序，似乎不可能只使用模式字符串创建相同的格式化程序（我还没有找到通过模式字符串激活 DateTimeFormatter#withOffsetParsed 方法的方法）。

另一种可能性可能是为 jodatime 定义一个自定义 specs2 匹配器，它将使用 isEqual 而不是 equals。因为无论如何我都不想要我的 json 中的 unix epoch，所以我会坚持使用自定义播放转换器

# java - 使用 JNDI 连接未获取部署值并且未将其插入到表中后

> ID：14040378
> 
> 赞同：1
> 
> 时间：2012-12-26T12:08:57.940
> 
> 标签：java, web, struts, jndi

我的项目在`struts1.3`, `JNDI datasource connection`, .`tomcat 6`问题是在本地机器上它运行正常，即获取值并将值插入数据库。但是，一旦我在服务器上部署为`war`服务器配置所在的位置（linux red hat，tomcat5），它就无法正常工作并且值显示为`NULL`.

至于调试，我`JDBC`在一个jsp页面中使用代码，并且该页面完美地从表中获取所有值。

该怎么办...？

# c++ - 对 bool 素数函数稍作更改

> ID：14040380
> 
> 赞同：0
> 
> 时间：2012-12-26T12:09:24.277
> 
> 标签：c++

不久前，我得到了一个关于如何编写 bool 函数来检查数字是否为素数的问题的答案：[bool function for prime numbers](https://stackoverflow.com/questions/13512638/bool-function-for-prime-numbers)。

所以从这里，有效的代码是

```
bool prime(int x)
{
if (x < 2) return false;
for(int i=2; i<= sqrt(x); i++) {
if ((x%i) == 0) return false;
}
return true;
} 
```

但是，如果我将代码更改为

```
bool prime(int x)
{
if (x < 2) return false;
for(int i=2; i<= sqrt(x); i++) {
if ((x%i) != 0) return true;
}
return false;
} 
```

它不能正确确定一个数字是否是许多整数的素数。我认为这两段代码是等价的。有什么方法可以使这个`bool prime`函数工作`!=`吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:13:36.160

不。在测试一个数是否为素数时，你知道它不是只要你找到一个因素。

这就是为什么您可以尽早跳出 for 循环并在第一个示例中返回 false：

```
if ((x%i) == 0) return false; 
```

发现任何单个数字都不是因子并不能证明一个数字是素数还是非素数，因此在这种情况下您不能提前终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:14:09.297

不，这是不可能的。

如果找到一个因素，这个原始代码就具有提前返回的能力。*修改后的版本在找到*因素时会提前返回。由于您必须测试*所有可能的*因素（至少，小于平方根的因素），然后才能确定该数字不是素数，因此您提出的方法无法工作。

附带说明一下，一个小的变化可以使算法的效率几乎翻倍。由于我们不必测试任何大于 2 的偶数，我们可以先测试 2，然后以 3 开始循环并递增 2s：

```
bool prime(int x)
{
  if (x < 2) return false;
  if (x%2 == 0) return x == 2;
  for(int i=3; i<= sqrt(x); i+=2) {
    if ((x%i) == 0) return false;
  }
  return true;
} 
```

# javascript - 我应该在 removeChild 之前从元素中删除事件处理程序吗？

> ID：14040386
> 
> 赞同：8
> 
> 时间：2012-12-26T12:10:08.080
> 
> 标签：javascript, events, dom

说，我有一个元素作为`<img id="foo" />`并附加了一些事件，例如`click`（不是内联`onclick`！）。

```
// somewhere i wrote
foo.addEventListener("click", clickHandler, false);
...
// somewhere i will write
foo.parentNode.removeChild(foo); 
```

我是否也需要删除所有事件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T12:31:43.460

[jQuery`empty()`方法](http://api.jquery.com/empty/)的文档说：

> 为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除其他构造，例如数据和事件处理程序。

所以：1）如果我们没有显式删除事件处理程序，我们会得到内存泄漏，2）通过使用`empty()`，我们可以避免这种内存泄漏。

另请参阅此[do-events-handlers-on-a-dom-node-get-deleted-with-the-node](https://stackoverflow.com/questions/4337582/do-events-handlers-on-a-dom-node-get-deleted-with-the-node)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T12:18:04.217

从 DOM 中移除元素不会（或不应该）移除它的任何监听器；毕竟，您很可能只是在重新排列 DOM 元素的过程中，因此您不想丢弃任何侦听器。

您可以在之前或之后删除侦听器，这应该没有任何区别。

如果您的计划是删除元素并且不再使用它们，那么继续删除事件以避免任何内存泄漏的可能性是明智的。

# java - 制作图像 url 并从 url 获取图像并将图像存储到数据库并通过 url 将图像发送给用户

> ID：14040388
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:10:25.627
> 
> 标签：java, jsp, servlets

我需要如何从 url 接收图像的代码？以及如何将数据库存储到该图像？并通过 url 将图像发送给被叫用户？我正在使用 servlet 和 jsp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:41:41.797

**我需要如何从 url 接收图像的代码？**

这里是：

```
URL lenna = new URL("http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png");
Image img = ImageIO.read(lenna); 
```

**以及如何将数据库存储到该图像？**

您可以将其上传到服务器上并将该图像路径存储到数据库，存储整个图像不是一个好主意。

您可以参考[`Jakarta Commons FileUpload`](http://commons.apache.org/fileupload/)文件上传。

**并通过 url 将图像发送给被叫用户？**

在服务器上上传文件后，您可以轻松地将该图像 url 发送给用户。

**我正在使用 servlet 和 jsp。**

以上所有选项都在`Java`Only... :)

# c# - RichTextBox 在跨线程操作中未更新

> ID：14040390
> 
> 赞同：0
> 
> 时间：2012-12-26T12:10:56.897
> 
> 标签：c#, multithreading

这是我的示例代码：

```
//------this is just GUI Form which is having RichTextBox (Access declared as Public)
//

public partial class Form1 : Form
{
   public void function1()
   {
      ThreadStart t= function2;
      Thread tStart= new Thread(t);
      tStart.Start();
   }

   public void function2()
   {
   //Calling function3 which is in another class
   }
}

//------this is just Class, not GUI Form
class secondClass: Form1
{

   public void function3()
   {
      Form1 f =new Form1();
      //Updating the RichTextBox(which is created in Form1 GUI with Public access)
      f.richTextBox1.AppendText("sample text");
   }

} 
```

我尝试通过调用`richTextBox1`控件和我的代码运行没有错误，但`richtextbox`没有得到更新。

我必须做什么才能`richTextBox`从另一个类函数中频繁更新我的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:18:47.390

你的问题在这里：

```
public void function3()
{
Form1 f =new Form1();
//Updating the RichTextBox(which is created in Form1 GUI with Public access)
f.richTextBox1.AppendText("sample text");
} 
```

您创建表单的另一个实例并对其进行更改`richTextBox`- 而不是初始实例。

要完成这项工作，您应该使用[此处](http://msdn.microsoft.com/en-us/library/ms171728.aspx)`Invoke`所示的方法在其代码隐藏类中设置 UI 控件的值。来自其他类的函数应该为任何输入和输出值使用参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:28:12.593

只需将您的 RichTextBox 从 Form1 传递给 function3

```
 //function inside form1
    public void function2() {
        function3(this.richTextBox1);
    } 
```

然后使用调用从另一个线程/类更新richTextBox

```
 //function in another thread
    public void function3(RichTextBox r)
    {
        r.InvokeIfRequired((value) => r.AppendText(value), "asd");
    } 
```

# c# - 通过字符串比较 C# 时间戳。比较

> ID：14040395
> 
> 赞同：0
> 
> 时间：2012-12-26T12:11:20.127
> 
> 标签：c#, string, datetime

鉴于以下情况，将`string.Compare(timeA,TimeB)`始终返回 -1：

`timeA`是之前发生的时间戳`timeB`

和

两者都是这种格式：`12/27/2012 00:59:06`又名`mm/dd/yyyy hh:mm:ss`通过`DateTime.UtcNow`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T12:14:04.153

嗯，是。你为什么*希望*它起作用？如果要按*time*排序，请将它们都解析为`DateTime`值并进行比较。您将它们*作为字符串*进行比较，因此它们将按字典顺序进行比较。当然，如果您的时间戳格式是`yyyy-MM-ddTHH:mm:ss`或类似的，您*可以*按字典顺序比较它们 - 但您当前的格式*并不是*为排序而设计的。

您*可以*编写一个`IComparer<string>`which 每次都进行解析，但您最好尽可能早地解析这些值，并`DateTime`尽可能长时间地将它们保持在它们更原生的表示 ( ) 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:17:25.490

你正在比较你`Timestamps`作为一个`string`. 只需使用`<`和`>`[`DateTime.Parse()`](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

```
value timea = DateTime.Parse(timeA);
value timeb = DateTime.Parse(timeB);

if( timeA > timeB )
{
  // your code...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:17:37.690

为了

```
string.Compare(timeA, timeB) 
```

工作，`timeA`并且`timeB`必须是字符串。并且字符串按字母顺序进行比较，因此以 1 开头的字符串（例如*'12/27/2012' ）*总是小于以 2 开头的字符串，例如*'2/27/2010'*。

为了比较日期，您可以使用：

```
DateTime.Compare(timeA, timeB) 
```

在哪里`timeA`和`timeB`是`DateTime`的。如果如您所说，它们都是在您的代码中生成的，请避免`.ToString()`在它们上使用 a 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:17:51.900

```
String.Compare(string strA, string strB); 
```

返回： // 一个 32 位有符号整数，指示 // 两个比较数之间的词法关系。值 条件 小于零 strA 小于 strB。零 // strA 等于 strB。大于零 strA 大于 strB。

# java - 关闭 DataInputStream 是否也会关闭 FileInputStream？

> ID：14040397
> 
> 赞同：10
> 
> 时间：2012-12-26T12:11:28.423
> 
> 标签：java, inputstream

```
FileInputStream fstream = new FileInputStream(someFile.getPath());
DataInputStream in = new DataInputStream(fstream); 
```

如果我打电话`in.close()`，它也会关闭`fstream`吗？我的代码给出了 GC 异常，如下所示：

**java.lang.OutOfMemoryError：超出 GC 开销限制**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T12:13:36.693

是的，`DataInputStream.close()`也会关闭你的`FileInputStream`.

这是因为`DataInputStream`继承`FilterInputStream`了该`close()`方法的以下实现：

```
 public void close() throws IOException {
        in.close();
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T12:25:34.337

您从其[文档](http://docs.oracle.com/javase/6/docs/api/java/io/FilterOutputStream.html#close%28%29)`DataOutputStream`中继承了它的`close()`方法：`FilterOutputStream`

> 关闭此输出流并**释放与该流关联的所有系统资源。**
> 
> 的close方法`FilterOutputStream`调用其flush方法， **然后调用其底层输出流的close方法。**

所有实现都应该如此`Writer`（尽管文档中没有说明）。

* * *

为避免在 Java 中使用 Streams 时遇到内存问题，请使用以下模式：

```
// Just declare the reader/streams, don't open or initialize them!
BufferedReader in = null;
try {
    // Now, initialize them:
    in = new BufferedReader(new InputStreamReader(in));
    // 
    // ... Do your work
} finally {
    // Close the Streams here!
    if (in != null){
        try {
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

这在 Java7 中看起来不那么混乱，因为它引入了 -interface [`AutoCloseable`，](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)它由所有 Stream/Writer/Reader 类实现。请参阅[教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

# ruby - 设计：/登录，参数给出`未定义的方法stringify_keys`

> ID：14040398
> 
> 赞同：0
> 
> 时间：2012-12-26T12:11:35.430
> 
> 标签：ruby, ruby-on-rails-3, devise

因为`/login`我的应用程序运行良好，但是对于`/login?user="something"` `giving 500`

我正在使用设计宝石

路线.rb

```
devise_for :users, :controllers => { :sessions => 'devise/sessions'}, :skip => [:sessions]   do
  get '/login' => "devise/sessions#new", :as => :new_user_session
end 
```

错误 ：

```
Completed 500 Internal Server Error in 263ms

NoMethodError (undefined method `stringify_keys' for "\"something\"":String):

Rendered /usr/local/rvm/gems/ruby-1.9.2-head/gems/actionpack-3.1.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
Rendered /usr/local/rvm/gems/ruby-1.9.2-head/gems/actionpack-3.1.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
Rendered /usr/local/rvm/gems/ruby-1.9.2-head/gems/actionpack-3.1.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.9ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:07:31.133

`stringify_keys`是 Rails 混合到 Ruby Hash 类中的一种方法，所以这里的问题是 devise 期望用户参数中的属性值对的散列而不是纯字符串。换句话说，它需要一个用户模型对象，而不仅仅是一个用户名。

Rails 用于将嵌套属性值对打包到 URL 查询字符串或 HTML 表单参数中的约定使用方括号，因此您可能需要这样的内容：

```
/login?user[name]=someone&user[password]=secret 
```

# scala - 抽象类型中的 Scala 特征和名称冲突

> ID：14040399
> 
> 赞同：1
> 
> 时间：2012-12-26T12:11:37.780
> 
> 标签：scala, traits, abstract-type

我正在尝试定义一个`C`扩展一些特征的特征`A`, `B`,... 所有特征，`C` 并且`A`, `B`,... 实现一个共同的特征`T`。Trait`C`应该`T`通过调用 `T`in `A`, `B`,.. 的实现来实现：

```
trait T{
  def f()
}
trait A extends T{
  def f(){
    print("A")
  }
}
trait B extends T{
  def f(){
    print("B")
  }
} 
```

所需的 trait 行为`C`如下：

```
val x=new A with B with C[A,B]{}
x.f()
// should produce output
A
B 
```

在这里我尝试定义特征 C，它给出了编译错误：

```
trait C[A<:T,B<:T] extends T{
  self:A with B =>
  override def f(){
    // error: A does not name a parent class of trait C
    super[A].f()
    // error: B does not name a parent class of trait C
    super[B].f()
  }
} 
```

我需要在`C`方法`A.f()`和`B.f()`. 有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:42:45.173

如果你想在 trait 中提供一个实现，同时确保子类实现定义，可以通过以下`abstract override`组合告诉编译器：

```
trait T {
  def f()
}
trait A extends T {
  abstract override def f() {
    super.f()
    print("A")
  }
}
trait B extends T {
  abstract override def f() {
    super.f()
    print("B")
  }
}

trait C extends T {
  override def f() {
    // do your work here ...
  }
}

val x = new C with A with B
x.f() 
```

要在 mixin-hierarchy 中调用下一个实现，您必须`super.f()`在`abstract override`方法调用中添加一个调用。因为这样的超级调用需要现有的实现，所以您需要创建的第一件事是`C`该 mixins`A`和`B`. 如果你混入或者编译器会报错`C`，因为混入层次结构是从左到右执行的，因此看不到实现。`A``B``C`

# flash - 获取浏览器 URL

> ID：14040401
> 
> 赞同：0
> 
> 时间：2012-12-26T12:11:53.370
> 
> 标签：flash

我需要将浏览器地址 (url) 获取到 flash 中的变量（*.swf 文件）

我测试了一些代码，

```
 1\. var myurl:String = loaderInfo.loaderURL;

 2\. var myurl = stage.loaderInfo.parameters["browserURL"];

 3\. import flash.external.*;
    var myurl = ExternalInterface.call("window.location.href.toString"); 
```

但总是变量（myurl）给出未定义的。

获取浏览器 url 的代码是什么？

我正在使用 Macromedia Flash MX 2004

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:38:52.043

您是否尝试过[LocalConnection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)：

```
var lc:LocalConnection = new LocalConnection();

var myurl = lc.domain; 
```

# facebook - 最多 400 个元素的照片标签查询响应

> ID：14040405
> 
> 赞同：1
> 
> 时间：2012-12-26T12:12:12.693
> 
> 标签：facebook, limit, photo

我正在使用新的 Facebook SDK 3.0，但它不相关，因为 Graph API Explorer 具有相同的行为。问题是，当我尝试获取一些用户照片标签时，例如“我/照片”或等效的 FQL 查询，我得到了最多 400 个元素的响应，使用图形或 fql。我已经尝试使用 LIMIT 字段（例如，FQL 查询是“SELECT src, src_big FROM photo WHERE pid IN (SELECT pid FROM photo_tag WHERE subject=me() LIMIT 1000) LIMIT 1000”）但没有任何变化。我也尝试使用 SINCE 和 UNTIL，但我知道 FB 返回一个 400 行的表，然后根据您的查询缩小它。

可能是绕过此限制的另一种方法，还是出于某种未知原因 FB 想要它并且它不是错误？

谢谢

# c++ - c++中的模板问题

> ID：14040407
> 
> 赞同：0
> 
> 时间：2012-12-26T12:12:18.737
> 
> 标签：c++, templates

> **可能重复：**
> [模板运算符重载函数上的未定义符号](https://stackoverflow.com/questions/13150412/undefined-symbol-on-a-template-operator-overloading-function)

这是我的源代码。在`Number.h`

```
#ifndef NUMBER_H
#define NUMBER_H

#include <iostream>
using std::istream;
using std::ostream;

template <class T> class Number;

template <class T>
ostream& operator<<(ostream&, const Number<T>&);

template <class T>
istream& operator>>(istream&, Number<T>&);

template <class T>
class Number{
public:
    Number(const T &n)  :i(n) {}
    Number()            :i(0) {}
    T& operator+(const Number&rhs) const;
    T& operator-(const Number&rhs) const;
    T& operator*(const Number&rhs) const;
    T& operator/(const Number&rhs) const;
    friend ostream& operator<< <T> (ostream& , const Number<T>&);
    friend istream& operator>> <T> (istream& , Number<T>&);
private:
    T i;
};

#endif 
```

而在`Number.cpp`

```
#include "Number.h"

template<class T> 
T& Number<T>::operator+(const Number&rhs) const
{
    return i+rhs.i;
}

template<class T> 
T& Number<T>::operator-(const Number&rhs) const
{
    return i-rhs.i;
}

template<class T> 
T& Number<T>::operator*(const Number&rhs) const
{
    return i*rhs.i;
}

template<class T>
T& Number<T>::operator/(const Number&rhs) const
{
    return i/rhs.i;
}

template<class T>
ostream& operator<<(ostream&os , const Number<T>&rhs)
{
    return os<< rhs.i;
}

template<class T>
istream& operator>>(istream&is , Number<T>&rhs)
{
    return is >> rhs.i;
} 
```

我不知道为什么有

```
undefined reference to `std::istream& operator>><double>(std::istream&,Number<double>&)'
undefined reference to `Number<double>::operator+(Number<double> const&) const' 
```

错误等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:05:55.140

使用 .hpp 作为模板，您不能返回临时对象的引用。

编号.h

```
#ifndef NUMBER_H
#define NUMBER_H

#include <iostream>
using std::istream;
using std::ostream;

template <class T> class Number;

template <class T>
ostream& operator<<(ostream&, const Number<T>&);

template <class T>
istream& operator>>(istream&, Number<T>&);

template <class T>
class Number{
        public:
                Number(const T &n)  :i(n) {}
                Number()            :i(0) {}
                T operator+(const Number&rhs) const; // Error Here return T not T&
                T operator-(const Number&rhs) const;
                T operator*(const Number&rhs) const;
                T operator/(const Number&rhs) const;
                friend ostream& operator<< <T> (ostream& , const Number<T>&);
                friend istream& operator>> <T> (istream& , Number<T>&);
        private:
                T i;
};

#include <number.hpp>

#endif 
```

数字.hpp

```
#ifndef NUMBER_HPP
#define NUMBER_HPP

template<class T> 
T
Number<T>::operator+(const Number& rhs) const
{
        return i + rhs.i;
}

template<class T> 
T
Number<T>::operator-(const Number&rhs) const
{
        return i-rhs.i;
}

template<class T> 
T
Number<T>::operator*(const Number&rhs) const
{
        return i*rhs.i;
}

template<class T>
T
Number<T>::operator/(const Number&rhs) const
{
        return i/rhs.i;
}

template<class T>
ostream& operator<<(ostream&os , const Number<T>&rhs)
{
        return os<< rhs.i;
}

template<class T>
istream& operator>>(istream&is , Number<T>&rhs)
{
            return is >> rhs.i;
}

#endif 
```

主文件

```
 #include <iostream>
    #include <number.h>

    int
    main(int, const char**)
    {
        Number<double>  value(1);
        Number<double>  add(3);

        std::cout << value + add << std::endl;
        std::cout << value * add << std::endl;
        std::cout << value - add << std::endl;
        std::cout << value / add << std::endl;
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:20:13.057

所有这些成员函数的定义都需要对任何实例化模板的翻译单元可用。想象一个包含`Number.h`并尝试使用`Number<int>`. 然后编译器需要生成所有用于`Number`实例化的代码`T`as `int`。如果它只是看到它怎么能做到这一点`Number.h`？它不知道成员函数的定义。

解决方法是将成员函数的定义（来自 的所有内容`Number.cpp`）放在`Number.h`. 或者，有些人喜欢将其命名`Number.cpp`为`Number.tpp`and 而不是`#include "Number.h"`in `Number.cpp`，将其放在-`#include "Number.tpp"`的*底部*，`Number.h`基本上是反转包含，以便标题始终包含实现。

# c# - 使用 Telerik radgrid 内部的列中的值更新 Telerik radgrid 外部的文本框

> ID：14040411
> 
> 赞同：0
> 
> 时间：2012-12-26T12:12:51.557
> 
> 标签：c#, asp.net, telerik-grid

这是概述： 1\. RadGrid 是使用数据库中的值生成的 2\. RadGrid 中的列之一是“itemtemplate checkbox column”，在加载时未选中 3\. RadGrid 外部有一个文本框，需要使用以下值更新（总行数检查）

如果用户选中复选框，则必须将行数更新为文本框。

请协助。

安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:39:50.713

这是一个解决方案，应该尽快触发复选框已选中或未选中。

```
function Checked() {
var grid = $find("<%=RadGrid1.ClientID %>");
var count = 0;
var masterTable = grid.get_masterTableView();
for (var i = 0; i < masterTable.get_dataItems().length; i++) {
    var gridItemElement = masterTable.get_dataItems()[i].findElement("chkToFind");
    if (gridItemElement.checked) {
        count++;
    }
}
//update the text box with count value
 txtBox.value=count;
} 
```

如果您有任何疑虑，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:44:21.023

尝试这个 ：

在`itemTemplate`复选框中制作`auto-postback true`并`onCheckedChange event`计算已检查的行数`Grid`并使用该数字进行更新`textbox's text`。例如 ：

```
<ItemTemplate>
    <asp:CheckBox ID="CheckBox1" runat="server" OnCheckedChanged="ToggleRowSelection" AutoPostBack="True" />
</ItemTemplate> 
```

现在，取 a`RadAjaxManager`和它的`ajax settings`add the`gridview`并在pass the and中传递`textbox`名称。例如 ：`UpdatedControls``textbox's Id``grid's Id`

```
<AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="GridId">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="TextBoxId" LoadingPanelID="RadAjaxLoadingPanel1" />
        <telerik:AjaxUpdatedControl ControlID="GridId" LoadingPanelID="RadAjaxLoadingPanel1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
</AjaxSettings> 
```

在 .cs 页面中

```
protected void ToggleSelectedState(object sender, EventArgs e)
{
    // Count the grid's checked rows and update texbox here.
} 
```

谢谢

# c++ - 模板化函数中的静态 std::mutex 不起作用

> ID：14040413
> 
> 赞同：1
> 
> 时间：2012-12-26T12:13:01.673
> 
> 标签：c++, multithreading, c++11

我有一个这样的程序。

```
#include <iostream>
#include <thread>
#include <mutex>

using namespace std;

template<int Thread>
void run()
{
    for(int j=0;j<5;++j)
    {
        static std::mutex m;
        m.lock();
        cout<<"Thread "<<Thread<<" running... "<<j<<endl;
        m.unlock();

        std::this_thread::sleep_for(std::chrono::milliseconds(10));
    }
}

int main(int argc , char * argv [])
{
    std::thread t1(run<1>);
    std::thread t2(run<2>);

    t1.join();
    t2.join();

    return 0;
} 
```

有一个静态互斥锁，`run()`以确保`cout`将被独占执行。但是，当我使用 Visual Studio 2012 运行该程序时，输出为：

```
Thread Thread 2 running... 01
 running... 0
Thread 1 running... 1
Thread 2 running... 1
Thread 1 running... 2
Thread 2 running... 2
Thread 2 running... 3
Thread 1 running... 3
Thread 1 running... 4
Thread 2 running... 4 
```

看起来互斥锁在`run()`. 我的程序有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:19:13.730

您面临的问题来自这样一个事实，即您的函数是一个模板等等，`run<1>`并且`run<2>`不一样，并且不共享相同的静态对象。

解决方案是将您的线程号作为参数传递给您的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T12:19:38.830

您应该放置以下行：

```
static std::mutex m; 
```

的身体之外`run()`。例如，将其声明为全局的，与`run()`.

由于您使用的是模板，`run()`因此构造了两个不同的函数，每个函数都有自己的 mutex `m`，彼此不可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:19:50.937

在模板的每个实例化中都有不同的互斥锁。您需要使互斥体成为全局变量，或者安排在从模板生成的每个函数中使用相同的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T12:21:51.170

这不是 std::mutex 的问题。您的 run 函数声明了两个静态互斥锁，并为每个线程锁定一个。

考虑在其中声明互斥体`main`并将其作为参数传递给函数，全局声明它并将其锁定在 run 函数中，或者使 run 函数成为非模板函数。

# objective-c - 添加时间延迟以在导航视图上翻转动画

> ID：14040416
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:13:20.120
> 
> 标签：objective-c, ios, uinavigationcontroller

我在导航栏的左侧有一个“过滤器”按钮。单击它时，我希望在切换到下一个视图时具有 1.5 秒的翻转延迟的翻转动画。如何为此添加代码？

我正在使用此导航代码：

```
FilterViewController *vc = [[FilterViewController alloc] init];
vc.delegate = self;

[self.delegate pushViewController:vc  animated:UIViewAnimationTransitionFlipFromLeft];

[vc release]; 
```

现在我希望通过按钮切换视图时的翻转延迟为 1.5 秒。我已经尝试了一些代码，但它没有给我想要的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:22:40.210

试试这个

```
 [UIView beginAnimations:@"View Flip" context:nil];
    [UIView setAnimationDuration:1.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight 
                           forView:self.navigationController.view cache:NO];

    [self.navigationController pushViewController:vc animated:YES];
    [UIView commitAnimations];

    [vc release]; 
```

取自[如何在单击信息按钮时在两个 UIViewControllers 之间进行翻转动画？](https://stackoverflow.com/questions/4622996/how-to-do-the-flip-animation-between-two-uiviewcontrollers-while-clicking-info-b/6673525#6673525)

另一种方式：

```
MainView *nextView = [[MainView alloc] init];
[UIView animateWithDuration:0.75
                         animations:^{
                             [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                             [super pushViewController:nextView animated:NO];
                             [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
                         }]; 
```

我从[如何更改基于导航的应用程序中的推送和弹出动画中得到这个](https://stackoverflow.com/questions/2215672/how-to-change-the-push-and-pop-animations-in-a-navigation-based-app/5889757#5889757)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:35:01.663

使用它来延迟推送动画：

```
FilterViewController *vc = [[FilterViewController alloc] init];
vc.delegate = self;
[self performSelector:@selector(callViewController:) withObject:vc afterDelay:1.5];

-(void)callViewController:(FilterViewController*)vc{
    [self.delegate pushViewController:vc  animated:UIViewAnimationTransitionFlipFromLeft];
    [vc release];
} 
```

# visual-studio-2010 - 静态链接 lib 文件导致链接错误

> ID：14040428
> 
> 赞同：0
> 
> 时间：2012-12-26T12:14:16.420
> 
> 标签：visual-studio-2010, c++-cli, static-linking

我在我的项目中**静态**链接，并得到这些错误：`fw.lib``C++/CLI`

`Error 1 error LNK2028: unresolved token (0A00001B) "extern "C" unsigned int __cdecl func(unsigned int,unsigned char *)" (?func@@$$J0YAIIPAE@Z) referenced in function "public: static void __clrcall Sdk::Native::Method(void)" (?Method@Native@Sdk@@$$FSMXXZ) C:\project\Sdk.obj Sdk`

`Error 2 error LNK2019: unresolved external symbol "extern "C" unsigned int __cdecl func(unsigned int,unsigned char *)" (?func@@$$J0YAIIPAE@Z) referenced in function "public: static void __clrcall Sdk::Native::Method(void)" (?Method@Native@Sdk@@$$FSMXXZ) C:\project\Sdk.obj Sdk`

我做错了什么？我这样做了：

*   在[项目属性->库目录]中添加了lib路径
*   `fw.lib`在 [项目属性 -> 附加依赖项] 下添加文件
*   `fw.h`用_`extern "C" {...}`

任何的想法 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T13:13:11.023

问题解决了...

显然，例如，当您将 x64 位链接到 x32 项目（反之亦然 ??）时，链接器会产生**非常普遍**的链接错误。

供参考 ：-）

# python - 如何使用pymtp

> ID：14040429
> 
> 赞同：4
> 
> 时间：2012-12-26T12:14:18.010
> 
> 标签：python, ubuntu-12.04, samsung-mobile, mtp, pymtp

我一直试图让我的 GalaxyS3 与 Ubuntu12.04 配合得很好，但无济于事。我已经尝试了一堆不工作的不同应用程序，现在我正在尝试制作一个可以工作的应用程序。

现在我被告知三星用它的新设备做了一些“坏事”，我需要通过 MTP 协议与它交谈，无论出于何种原因，Ubuntu 在默认情况下都无法做到。

我喜欢python，所以我正在尝试使用pymtp。

我目前的问题是pymtp的连接功能失败：

```
import pymtp
oMTP = pymtp.MTP()
oMTP.connect() 
```

这产生：

```
Device 0 (VID=04e8 and PID=6860) is a Samsung GT-P7310/P7510/N7000/I9100/Galaxy Tab 7.7/10.1/S2/Nexus/Note.
PTP_ERROR_IO: failed to open session, trying again after resetting USB interface
LIBMTP libusb: Attempt to reset device
LIBMTP PANIC: failed to open session on second attempt
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/pymodules/python2.7/pymtp.py", line 443, in connect
    raise NoDeviceConnected
pymtp.NoDeviceConnected 
```

# objective-c - UITabBarController 裁剪

> ID：14040445
> 
> 赞同：0
> 
> 时间：2012-12-26T12:15:50.093
> 
> 标签：objective-c, cocoa-touch

我有一个`button`加载`viewcontroller`一个`motherViewController`. 这似乎工作正常，但由于某种原因，新引入`view`的内容太高以至于底部的内容被裁剪。

```
- (IBAction)LoginButton:(UIButton *)sender
{
        FirstViewController *FirstView = [self.storyboard instantiateViewControllerWithIdentifier:@"First"];
        SecondViewController *SecondView = [self.storyboard instantiateViewControllerWithIdentifier:@"Second"];
        ThirdViewController *ThirdView = [self.storyboard instantiateViewControllerWithIdentifier:@"Third"];
        FourthViewController *FourthView = [self.storyboard instantiateViewControllerWithIdentifier:@"Fourth"];
        FifthViewController *FifthView = [self.storyboard instantiateViewControllerWithIdentifier:@"Fifth"];

        FirstView.Username = self.UsernameBox.text;

        UINavigationController *FirstNavController = [[UINavigationController alloc]init];
        [FirstNavController pushViewController:FirstView animated:NO];

        UINavigationController *SecondNavController = [[UINavigationController alloc]init];
        [SecondNavController pushViewController:SecondView animated:NO];

        UINavigationController *ThirdNavController = [[UINavigationController alloc]init];
        [ThirdNavController pushViewController:ThirdView animated:NO];

        UINavigationController *FourthNavController = [[UINavigationController alloc]init];
        [FourthNavController pushViewController:FourthView animated:NO];

        UINavigationController *FifthNavController = [[UINavigationController alloc]init];
        [FifthNavController pushViewController:FifthView animated:NO];

        tabBar = [[UITabBarController alloc]init];    
        tabBar.viewControllers = [NSArray arrayWithObjects:FirstView, SecondView, ThirdView, FourthView, FifthView, nil];
        [self.view addSubview:tabBar.view];

} 
```

![视图控制器](../Images/caa2d6e7428e29597ae295a79bb3b9f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:34:48.220

我不知道我是否正确。但这是答案，您正在尝试添加`UIViewController (UITabbarController)`到您的`ViewController`. 所以你需要把它放在你的`view`，例如

```
tabbar.view.frame = CGRectMake(0, 0, 320, 460); 
```

但唯一我不知道它是如何完美定位的，当我们添加到`window`. 通过设置`frame`您的`tabbarcontroller`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:31:29.360

试试这个 -

```
 tabBar.tabBar.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin; 
```

# c# - 如何在 PropertyGrid C# 中自定义 PropertyInfo[] 对象

> ID：14040450
> 
> 赞同：0
> 
> 时间：2012-12-26T12:16:00.183
> 
> 标签：c#, propertygrid, icustomtypedescriptor

我有一个动态加载的类，我事先不知道它包含多少（或什么类型）属性。我想以显示常规类的方式将其所有属性加载到 PropertyGrid 中。

例如，如果这是我的课：

```
class TestPropertyObject
{
    [Category("Names")]
    [Description("Enter your name")]
    public string Name { get; set; }

    [Category("Numbers")]
    [Description("Enter your number")]
    public int Number { get; set; }
} 
```

我使用反射来生成一个对象并获取它的属性：

```
PropertyInfo[] info = obj.GetType().GetProperties() 
```

如何在 PropertyGrid 中显示属性？
我已经多次准备好这篇文章 [http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert) 但我似乎无法让它工作。

一些指导将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:31:26.403

这是一个解决方案，您只需要该类的实例。

```
 var OptionsPropertyGrid = new PropertyGrid();
        OptionsPropertyGrid.Size = new Size(300, 250);

        this.Controls.Add(OptionsPropertyGrid);

        TestPropertyObject appset = new TestPropertyObject();
        OptionsPropertyGrid.SelectedObject = appset; 
```

此示例假设您的类的属性使用类别/描述进行修饰。如果我误解了，请告诉我。

或者通过使用动态对象

```
 var OptionsPropertyGrid = new PropertyGrid();
        OptionsPropertyGrid.Size = new Size(300, 250);

        this.Controls.Add(OptionsPropertyGrid);
        this.Text = "Options Dialog";
        string classname = "WindowsFormsApplication1.TestPropertyObject";
        var type1 = Type.GetType(classname);
        object obj = Activator.CreateInstance(type1);
        OptionsPropertyGrid.SelectedObject = obj; 
```

确保您可以获得该类的名称空间。

# uitableview - Xcode 表格视图和 segue，未交付变量

> ID：14040452
> 
> 赞同：0
> 
> 时间：2012-12-26T12:16:02.080
> 
> 标签：uitableview, cocoa-touch, uiwebview, segue

我试图让我的应用程序为表格视图的每一行显示一个不同的网页，但是运行它时，当我点击一行时它会显示一个白页！这是表格视图的代码：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {

    if ([[segue identifier] isEqualToString:@"ShowPDF"]) {

    Tab2_ItemViewController *vc = [segue destinationViewController];

    NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];

    NSString *stringaProva = [dataArrayLink objectAtIndex:selectedIndex];

    vc.selectedItem = stringaProva;

    }
    }

    @end 
```

这是子视图的代码：

```
 - (void)viewDidLoad
  {

    [super viewDidLoad];
    NSURL *url = [NSURL URLWithString:selectedItem];
    NSURLRequest *httpRequest = [NSURLRequest requestWithURL:url];
    [webView loadRequest:httpRequest];

   } 
```

如果我手动编写一个 url 而不是`NSURL *url = [NSURL URLWithString:selectedItem];`它没有问题，所以我猜问题是 segue 没有提供正确的变量......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:33:13.123

检查`stringaProva`有`value`之前`passing`_`selectedItem`

像这样使用：

```
if(self.selectedItem) 
  NSURL *url = [NSURL URLWithString:self.selectedItem];
else
  NSLog(@"selectedItem has no value"); 
```

# c# - WP7.5 中的 NavigationContext.QueryString.TryGetValue NullReferenceException

> ID：14040455
> 
> 赞同：2
> 
> 时间：2012-12-26T12:16:33.527
> 
> 标签：c#, wpf, windows-phone-7, xaml, windows-phone-7.1

我想在 7.5 的页面之间传递一个字符串

我已经阅读了一些指南，但是，我有一个`NullReferenceException`.

页面.xml.cs：

```
 var item = ListBoxTiers.SelectedItem as CTiers; 
 NavigationService.Navigate(new Uri("/DetailTiers.xaml?selectedItem=" + item.m_strCode, UriKind.Relative)); 
```

如果我查看调试器，我可以看到： `"DetailTiers.xaml?selectedItem=C0000015"`

在我的页面中，Page2.xms.cs：

```
 public Page2()
    {
        InitializeComponent();
        string strCodeTiers =   string.Empty;
        if (NavigationContext.QueryString.TryGetValue("selectedItem",out strCodeTiers)) // Exception here
        {

        } 
```

有人知道我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T12:23:30.683

您不应该从构造函数调用此代码，因为`NavigationContext`尚未初始化。改用`OnNavigatedTo`事件：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string strCodeTiers = string.Empty;

    if (NavigationContext.QueryString.TryGetValue("selectedItem",out strCodeTiers))
    {
         // Whatever
    }
} 
```

# ajax - 服务器方法暴露在 AJAX 内部：是否安全

> ID：14040458
> 
> 赞同：2
> 
> 时间：2012-12-26T12:17:10.003
> 
> 标签：ajax, security

当我们使用 AJAX 调用服务器方法时，我们必须指定它的名称和参数。安全方面可以吗？对此没有任何顾虑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:21:55.193

这里确实存在一个安全问题：即，您可以使用 AJAX 调用的任何方法也可以由攻击者使用他们想要的任何参数调用。因此，您需要确保任何由此暴露的方法即使被恶意调用也是无害的。

如果您确实需要通过 AJAX 公开可能有害的方法，则需要确保这些方法仅在用户经过正确身份验证的情况下才会执行其预期的操作，并且操作的范围仅限于用户被授权的范围去做。身份验证信息应该以某种方式传输，使攻击者难以拦截它，例如在[HttpOnly cookie](http://en.wikipedia.org/wiki/HTTP_cookie#Secure_and_HttpOnly)中。

此外，应保护此类方法免受[CSRF 攻击](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，攻击者可以通过 CSRF 攻击诱骗经过身份验证的用户调用他们不打算调用的方法。标准解决方案是将辅助身份验证令牌作为参数传递给该方法，并且仅在令牌和 cookie 匹配时才允许访问。

简短的版本是：任何通过 AJAX 公开的东西都是公开的。将其视为[攻击面](http://en.wikipedia.org/wiki/Attack_surface)的一部分。

# python - 如何使用 webapp2 在 Python 中建模多语言对象

> ID：14040461
> 
> 赞同：10
> 
> 时间：2012-12-26T12:17:38.570
> 
> 标签：python, google-app-engine, webapp2, wtforms

我使用 Python 和 webapp2 构建了一个多语言 Web 应用程序。

我有一个名为 Tag 的对象，它可以翻译成多种语言。为此，我创建了以下模型：

```
class Language(ndb.Model):
    code = ndb.StringProperty()
    name = ndb.StringProperty(indexed=False)

class MultilingualText(ndb.Model):
    language = ndb.KeyProperty(kind=Language)
    text = ndb.TextProperty(indexed=False)

class Tag(ndb.Model):
    translations = ndb.StructuredProperty(MultilingualText, repeated=True, indexed=False) 
```

我想问一下这是否是执行此类任务的正确方法，以及如何将此结构与 WTForms 一起用于验证等。

提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:37:04.883

我认为最佳实施可能会根据您的目标而改变，而我在这里的回答可能无法满足您的需求。

对于`Language`课堂，我宁愿不为此目的使用数据存储。我将`babel.Locale`用于确定显示名称。

正如 Tim 在评论中所说，我更喜欢使用语言代码作为实体键。这是一个示例`Tag`实现，假设每个人都`Tag`需要一个 urlsafe slug。

```
def get_urlsafe_slug_from_tag(tag_text):
    # ...
    # ...

class Slug(ndb.Model):
    # use urlsafe slug as the key_name
    # You can optionally use the property bellow.
    available_translations = ndb.StringProperty(repeated=True)

class Tag(ndb.Model):
    # use language code as the key_name
    text = ndb.TextProperty() 
```

新创建标签时，我将创建两个实体；具有`Slug`该标记的唯一 urlsafe 字符串 (slug) 作为键的`Tag`实体，以及具有语言代码作为键且该`Slug`实体作为其父实体的实体。

在此示例中，有一个名为 available_translations 的属性，它允许您与用户的语言选择进行协商，甚至执行一个查询，该查询将返回带有指定语言翻译的 Slugs（例如，列出带有日语翻译的 Slugs）。

对于 WTForm 验证，你能告诉我你想如何验证发布数据吗？如果您分享您的详细需求，我认为您将能够获得更好的答案。

# c# - 使用两个数据库时访问数据的路径

> ID：14040462
> 
> 赞同：0
> 
> 时间：2012-12-26T12:17:39.723
> 
> 标签：c#, sql-server, asp.net-mvc-3, linq-to-sql

我正在尝试创建一个电子商务网站，我需要决定创建帐户管理的方向。我有两个数据库，一个是`ASPNETDB.MDF`另一个是`ComputerStore.mdf`，我正在使用 LINQ to SQL 访问数据`ComputerStore`到目前为止。

我的问题是我不知道如何前进。

一方面，我有我熟悉的女巫的 Membership API，我可以使用它来访问 中的数据`ASPNETDB.MDF`，但我不知道这是否可以与当前的 LINQ-to-SQL 模型混合，因为在某些时候我创建购物车表我需要每一行的用户 ID。

另一方面，我可以尝试将表中的表添加`ASPNETDB.MDF`到基于`ComputerStore.mdf`表创建的 LINQ-to-SQL 模型中，我不知道在同一个 LINQ-to-SQL 模型中混合两个数据库是否会正常工作。

如果还有其他选择，请告诉我。如果不是我应该走什么路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:15:01.383

You can have both databases separate or you can mix them in one (I prefer to have it separate, because I hate to mix membership database format and nomenclature with mine)

[Here](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb) you have a little tutorial to deploy the **Membership** database into any SQL Server instance. After that, create your own tables into that database. If you want to have the relationship between `YourTable_UserID` and the `ID` from the `Users` table, you can. Remember that **Membership** uses [GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier) for IDs.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:04:15.423

好吧，如果您*必须*为成员表使用单独的数据库，那么您只需将用户 ID 松散地耦合到数据库中。然后要访问成员数据库，只需创建自己的 LINQ to SQL 模型。

这将允许您在两个数据库上执行 CRUD，并且您可以在必要时从成员模型中收集用户 id，以将松散耦合的 id 放入购物车表中。

# android - 从android应用程序向服务器发送数据

> ID：14040463
> 
> 赞同：0
> 
> 时间：2012-12-26T12:17:45.477
> 
> 标签：android

我正在开发一个 android 应用程序，它收集特定手机的配置并将其显示在手机上。我希望将数据（即电话的配置值）发送到我的服务器。谁能帮我写代码。

我正在获取用于将数据从服务器发送到应用程序而不是从应用程序发送到服务器的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:23:59.403

您必须使用网络服务，要么`SOAP`要么`REST`。您`SOAP`可以使用`KSOAP2` [KSOAP2 库](http://www.android10.org/index.php/articleslibraries/167-using-ksoap2-for-android-soap-web-service)或 REST[使用此链接。](http://timewasted.net/?p=127)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:29:55.183

尝试将[Spring for Android](http://www.springsource.org/spring-android)与[Android Annotations](https://github.com/excilys/androidannotations/wiki/Rest%20API)一起使用。例如

```
@Rest(rootUrl = "http://company.com/ajax/services", converters = { MappingJacksonHttpMessageConverter.class })
public interface MyRestClient {
    @Get("/events")
    EventList getEvents();
} 
```

# html5-appcache - HTML5 应用缓存需要解释

> ID：14040469
> 
> 赞同：0
> 
> 时间：2012-12-26T12:18:19.287
> 
> 标签：html5-appcache

有人可以展示一个完整的应用程序缓存示例，其中包含 html、css、js、appcache 文件，包括 CACHE、NETWORK 和 FALLBACK 部分。还更新清单。代码应该写在哪里？

[http://www.html5rocks.com/en/tutorials/appcache/beginner/#toc-updating-cache](http://www.html5rocks.com/en/tutorials/appcache/beginner/#toc-updating-cache) 根据上述链接更新缓存，代码应该写在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:03:04.517

更新清单的代码由您的服务器在某处编写。

在 PHP 或 Node.js 中，您必须使用您发布的链接中指定的正确 mime 类型编写和提供此文件。

您可以从服务器上的 css 和 js 文件自动生成它。不要包含 html 文件，除非它们是动态页面。

文件的第一行必须是`CACHE MANIFEST`

现在它假设您将东西放入该`CACHE`部分，您需要在该部分中包含您希望用户能够离线使用的所有 css 和 js 路径。

要创建一个`NETWORK`部分，只需在它自己的行上打印出单词。

在本节下，您应该包括只应在线使用的页面。

在该`FALLBACK`部分下包括一个页面，以显示是否没有可用的离线版本。

这是一个简短的解释，但您应该能够轻松找到帮助您自动生成此文件的教程。

有关缓存清单本身的更多详细信息：

[http://diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)

提供最好的解释恕我直言。

# objective-c - UIAlertView 抛出 UIAlertButton 的异常 NSInternalInconsistencyException

> ID：14040472
> 
> 赞同：0
> 
> 时间：2012-12-26T12:18:29.360
> 
> 标签：objective-c, exception, uialertview

我一直在努力弄清楚为什么使用如此简单的代码会发生错误：

```
UIAlertView *alertDialog;
alertDialog = [[UIAlertView alloc]
               initWithTitle:@"Alert button detected"
               message:@"I need your attention NOW"
               delegate:self
               cancelButtonTitle:@"OK"
               otherButtonTitles:@"Maybe later", @"Never", nil
               ];
[alertDialog show]; 
```

> 由于未捕获的异常'NSInternalInconsistencyException'而终止应用程序，原因：'请求视图的窗口（<UIAlertButton：0x885f020；frame =（0 0；0 0）；transform = [0,0,0,0,0,0] ; alpha = 0; opaque = NO; layer = (null)>) 带有一个 nil 层。此视图可能尚未收到 initWithFrame: 或 initWithCoder:。'

我试过的：

*   在 ios 5 和 6 模拟器中部署错误
*   如果按钮设置为**nil**，它可以工作（没有显示按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:40:07.263

I am checking the whole project for settings, additional files and delete one by one until I saw one category class that I have created manually earlier:

```
@interface UIButton (UIButton) 
```

which has only **init** method. After deleting this class it works! (or deleting the init method in .m which might be incomplete), though I didn't import it as header into the viewcontroller I am using UIAlertView.

```
-(id)init
{
    self.backgroundColor = [UIColor blueColor];
    return self;
} 
```

Thanks for helps. I will need to look into more appropriate way to implement custom UIButton.

# ussd - 如何自动化 USSD 应用程序

> ID：14040475
> 
> 赞同：1
> 
> 时间：2012-12-26T12:18:33.403
> 
> 标签：ussd

我目前正在开发一个针对低端 Java 手机的 USSD 应用程序。

有没有办法通过一些可用的工具自动化 USSD 应用程序？

-湿婆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:57:44.887

如果您有兴趣测试 USSD 请求，而不是使用 USSD 作为传输的应用程序的 UI/逻辑测试，请尝试 SMSlib。它支持通过 3g 调制解调器或插入 PC 的手机发送 USSD 请求和 USSD 响应分析。

据我所知，没有办法使用一些真实设备为 j2me 应用程序编写 UI 测试（据我了解，使用真实设备而不是模拟器通过这个应用程序发送真实的 ussd/sms 请求至关重要）。

# c++ - Qt; 启动外部应用程序并记录事件（鼠标、键盘）

> ID：14040477
> 
> 赞同：0
> 
> 时间：2012-12-26T12:18:48.770
> 
> 标签：c++, qt, events, external

我有一个在 Windows 平台上运行的基于 Qt 的应用程序。

我想借助一些技术从外部启动我的应用程序并记录鼠标移动、点击、键盘输入。在我想在它上面重播相同的事件之后。

可能吗？哪种技术？（Qt、脚本（Python 等）、...）从哪里开始？

# c# - 如何诊断为什么程序由于`lock`语句而挂起？

> ID：14040479
> 
> 赞同：0
> 
> 时间：2012-12-26T12:19:06.010
> 
> 标签：c#, multithreading, locking

在下面的代码中，当我取消注释代码时，我的程序有不正确的行为。

```
 private void RecalculateOrders(bool force)
    {
        //if (force)
        //{
        //    lock (desiredOrdersBuy)
        //    {
        //        RecalculateOrdersInternal();
        //    }
        //}
        //else
        //{
            if (Monitor.TryEnter(desiredOrdersBuy))
            {
                try
                {
                    RecalculateOrdersInternal();
                }
                finally
                {
                    Monitor.Exit(desiredOrdersBuy);
                }
            }
        //}
    } 
```

我不明白如何诊断到底出了什么问题。我怎么知道`lock`语句如何影响我的程序？如果我有死锁，那我怎么能抓住它？你会怎么做才能找出为什么`lock`会中断执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:28:06.077

好的，要诊断此问题，您需要`Threads`在调试时使用该窗口。这将允许您在正在运行的线程之间切换并查看每个线程的位置。显然，另一个线程对该对象具有排他锁，如果您在语句上放置一个断点`lock`并在尝试执行该语句`Threads` **之前**`lock`查看另一个线程，我相信您会发现另一个线程锁定该对象。

**注意：**要打开线程窗口，您的应用程序实际上必须正在运行。

现在，为了澄清 和 之间的区别`Monitor.TryEnter`，`lock`根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/4tssbxcw.aspx)，`Monitor.TryEnter`肯定是不同的：

> 如果成功，此方法将获取 obj 参数的排他锁。无论锁是否可用，此方法都会立即返回。
> 
> 此方法类似于 Enter，但它永远不会阻塞。如果线程不阻塞就无法进入，该方法返回false，线程不进入临界区。

因此，这就是为什么`lock`会产生死锁但`Monitor.TryEnter`不会产生死锁的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:26:26.353

```
lock (desiredOrdersBuy)
{
    RecalculateOrdersInternal();
} 
```

和

```
if (Monitor.TryEnter(desiredOrdersBuy))
{
    try
    {
        RecalculateOrdersInternal();
    }
    finally
    {
        Monitor.Exit(desiredOrdersBuy);
    }
} 
```

做同样的事情。lock(){} 是 Monitor.Enter/Exit 的语法糖。

您的问题是，在注释代码中，您还检查了`if(force)`条件。

# c# - BigInteger 解析八进制字符串？

> ID：14040483
> 
> 赞同：7
> 
> 时间：2012-12-26T12:19:25.697
> 
> 标签：c#, biginteger, octal

在Java中，我可以做

```
//Parsing Octal String
BigInteger b = new BigInteger("16304103460644701340432043410021040424210140423204",8); 
```

然后按照我的喜好格式化

```
b.toString(2); //2 for binary
b.toString(10); //10 for decimal
b.toString(16); //16 for hexadecimal 
```

C#`BigInteger`提供了上面显示的格式化功能，但我似乎找不到解析 BIIIG（大于 64 位，无符号）八进制值的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T12:58:25.250

这可能不是最有效的解决方案，但如果性能不是优先事项，您可以`BigInteger`手动构建：

```
string s = "16304103460644701340432043410021040424210140423204";
BigInteger bi = s.Aggregate(new BigInteger(), (b, c) => b * 8 + c - '0'); 
```

上述解决方案也适用于任何不大于 10 的基数；只需将`8`上面代码中的替换为您所需的基础即可。

**编辑**：对于十六进制数字，您应该使用该`Parse`方法。`0`如果您的数字应该被解释为正数，即使它的第一个字符是`8`–<code>F，也要加上前缀。

```
string s = "0F20051C5E45F4FD68F8E58905A133BCA";
BigInteger bi = BigInteger.Parse(s, NumberStyles.HexNumber); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T14:19:47.480

十六进制的简单实现（所有基数最多为 16）；通过向字符串常量添加字符来扩展它（信用到期的信用；这是基于道格拉斯的回答）：

```
private const string digits = "0123456789ABCDEF";
private readonly Dictionary<char, BigInteger> values
    = digits.ToDictionary(c => c, c => (BigInteger)digits.IndexOf(c));
public BigInteger ParseBigInteger(string value, BigInteger baseOfValue)
{
    return value.Aggregate(
        new BigInteger,
        (current, digit) => current * baseOfValue + values[digit]);
} 
```

一个操作数为 int 的算术运算可能比两个操作数均为 BigInteger 时更快。在这种情况下：

```
private readonly Dictionary<char, int> values
    = digits.ToDictionary(c => c, c => digits.IndexOf(c));
public BigInteger ParseBigInteger(string value, int baseOfValue)
{
    return value.Aggregate(
        new BigInteger,
        (current, digit) => current * baseOfValue + values[digit]);
} 
```

# multithreading - wxpython 线程化任务并更新 GUI 原因

> ID：14040487
> 
> 赞同：2
> 
> 时间：2012-12-26T12:19:44.320
> 
> 标签：multithreading, wxpython

我有一些简单的 wxpython GUI，当我单击按钮时，我想在另一个线程中运行一些 io 任务（为了不阻塞 GUI）并在 io 线程运行时相应地更新 GUI（例如更新来自 io 线程的标签：“[io 任务完成百分比]%”）。

但是有时这可行，有时会引发异常：

```
The program 'python2.7' received an X Window System error.
This probably reflects a bug in the program.
The error was 'RenderBadPicture (invalid Picture parameter)'.
  (Details: serial 14127 error_code 163 request_code 149 minor_code 7)
  (Note to programmers: normally, X errors are reported asynchronously;
   that is, you will receive the error a while after causing it.
   To debug your program, run it with the --sync command line
   option to change this behavior. You can then get a meaningful
   backtrace from your debugger if you break on the gdk_x_error() function.) 
```

使用 --sync 命令运行程序会产生以下错误：

```
[xcb] Unknown request in queue while dequeuing
[xcb] Most likely this is a multi-threaded client and XInitThreads has not been called 
```

我已经读过，不允许从创建 GUI 的线程之外的另一个线程更新 GUI 线程，但如果是这种情况，如何完成这个简单的任务？从另一个线程更新 GUI。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T03:56:46.947

这里已经有很多关于这个主题的主题，并且在 wxpython wiki 上得到了很好的介绍。查找 wx.CallAfter。

# c# - 如何在 C# 中获取可用/支持的键盘语言列表？

> ID：14040489
> 
> 赞同：0
> 
> 时间：2012-12-26T12:19:53.433
> 
> 标签：c#, windows-phone-7, windows-phone, windows-phone-8

我有一个 WP7 应用程序，我为它创建了自定义键盘，现在一些键盘在 WP8 中正式可用。

我不能分别为 WP7 和 WP8 发布相同的应用程序，如果我选择为 WP7 发布应用程序，它也可用于 WP8。

我想实现一个逻辑，如果手机的操作系统是 WP8，那么它不应该使用自定义键盘，反之亦然。

它可以通过两种方式完成：

1.  我检查可用的语言，如果语言（或键盘布局）在手机上可用，那么它不应该使用自定义键盘。

2.  我检查操作系统，如果它是 8 或更高版本，那么它不应该使用自定义键盘。

**问题**

如何获取可用/支持的键盘语言列表？或如何获得 WP OS 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:03:55.813

如果您将 WP7.1 应用程序发布到 WP Store，那么您是对的，两个平台都会看到该应用程序。但是，如果您将两个 XAP 分别发布到商店，一个用于 WP 7.1 版本，一个用于 Windows Phone 8，那么所有 WP 8 用户将只能看到您仅为 WP 8 平台制作的应用程序。

最好的祝福

# postgresql - psql：无法连接到服务器：Windows 中的连接被拒绝（0x0000274D/10061）

> ID：14040491
> 
> 赞同：0
> 
> 时间：2012-12-26T12:19:59.547
> 
> 标签：postgresql, psql, postgresql-8.3

我正在尝试从命令行运行 psql.exe。我收到如下错误。

```
C:\>cd C:\Program Files\PostgreSQL\8.3\bin

C:\Program Files\PostgreSQL\8.3\bin>psql.exe
psql: could not connect to server: Connection refused (0x0000274D/10061)
        Is the server running on host "???" and accepting
        TCP/IP connections on port 5432? 
```

任何人都可以帮助如何解决它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:12:57.857

You need to provide it some arguments:

```
C:\Program Files\PostgreSQL\8.3\bin> psql.exe -h localhost -U user -d database 
```

# asp.net - ASP.Net 性能

> ID：14040496
> 
> 赞同：2
> 
> 时间：2012-12-26T12:20:16.830
> 
> 标签：asp.net, vb.net, iis, performance-testing

我正在我的系统上配置一个 ASP.Net (VB.Net) 应用程序。我有 Visual Studio 2010，还编译了代码并将编译后的版本部署在服务器上。在这两个地方，我在很长一段时间（超过一分钟）后都得到了页面的响应。

奇怪的事情：

我已经放置了代码来计算从进入页面加载处理程序到退出页面关闭处理程序所需的时间，这是正常的（不到一秒）。该应用程序没有任何 http 模块，它也没有 Global.asax，页面也没有其他覆盖的处理程序。

问题1：如果页面加载和页面关闭之间的时间如此之短，为什么响应时间太长？问题 2：我可以使用哪些技术来实际调试等待响应时发生的情况？

提前致谢。

-----更新--------- 为了回答下面 krshekhar 的问题，我附上了我从 HttpWatch 获得的页面响应的屏幕截图

![在此处输入图像描述](../Images/205b6854511640c8d5d93b84a67ad3bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:26:01.410

页面大小是多少？
使用 Mozilla 火狐。
下载 firebug
安装 add on [why-slow](http://developer.yahoo.com/yslow/) yahoo add on。
并查看报告中可用的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:03:53.000

尝试从 Page_PreInit 事件到 Page_Unload 事件的计时。这应该给你一个更体面的看法。您发布的时间也是正常 LOAD 或 SUBMIT（或回发）事件的时间吗？

另外，您的数据库连接是在您的代码内部还是外部处理（即，时间是否能够赶上进行必要的网络连接所需的时间）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:14:44.050

您提到“页面关闭”处理程序 - 这是什么？页面关闭事件是浏览器事件，而不是服务器事件，所以我不清楚这是如何触发的。

从您的跟踪中，我假设 master.aspx 从发送客户端请求到完成渲染仅需要 31000 字节的信息需要 270 秒。鉴于这发生在本地以及部署到服务器时，这使得至少有一段代码可能需要花费大量时间来执行。

我建议首先将调试添加到您的页面加载事件中，以查看运行需要多长时间。我只需使用 Debug.WriteLine("Point x reached at " & Now.ToString("yyyy-MM-dd hh:mm:ss.nnn) 开始，让你知道你在什么时候打每段代码。从那里你可能会看到一个明显的区域，它需要很长时间。

如果您发现您的数据提取花费的时间比预期的要长，我一点也不感到惊讶 - 您是否使用多线程数据加载？

# map - 无需插件的交互式 3D 地图

> ID：14040503
> 
> 赞同：0
> 
> 时间：2012-12-26T12:21:22.153
> 
> 标签：map, 3d

我想在我的网站中包含一个交互式 3D 地图。我已经找到了一些可能的产品，比如 Goodle Earth，但不幸的是，它们都需要一些插件，或者至少需要一个真正的新浏览器版本。
此外，我希望能够添加一些 3D 建筑物。

有没有可能的解决方案，还是我期待太多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:45:05.417

不需要插件。只需使用新的浏览器版本。您可以使用任何支持画布的浏览器来完成您需要的一切，这是所有当前的浏览器。

您可以使用处理 JS 使某些部分更容易。或者你可以[谷歌 3d 图形 javascript canvas api](http://google.com/?q=3d%20graphics%20javascript%20canvas%20api)。

如果你真的是一个恋尸癖（痴迷于支持死浏览器技术），那么你可以在 frankenbrowsers 中获得体内 3d 效果——你将不得不几乎杀死自己发明一个使用绝对 div 定位、像素大小、多边形的 3d 渲染引擎渲染，深度排序，并使用 div 作为像素/三角形/矩形进行所有渲染。确保你研究了 3d 投影/旋转矩阵，以及透视变换。即使你成功了，人们**会**认为它是一项了不起的成就，但它最多只会给你几年的影响力。

也许更合适的做法是改善您始终取悦所有人的愿望……为什么不只关注已经知道 3d 俱乐部所在位置的人们，而不是尝试通过 ASCII 提供 3d 服务。当然，这**也是**可能的。见鬼，为什么不在汇编程序中编写整个代码，只是为了好玩？或者做一个IE9浏览器扩展？克里斯托弗，一切皆有可能，**但这**取决于你对自己的要求。

# java - 为 HttpOnly 和 Secure 设置了 JSESSIONID

> ID：14040504
> 
> 赞同：3
> 
> 时间：2012-12-26T12:21:22.853
> 
> 标签：java, security, session-cookies, jsessionid

我们有一个通过 SSL nginx 代理服务 HTTP 的 tomcat 实例。我们为连接器设置了如下设置：

```
connectionTimeout="20000"
redirectPort="8443"
compression="on"
compressionMinSize="2048"
scheme="https"
secure="true"
proxyPort="443"           
compressableMimeType="text/html,text/xml,text/plain,text/css,text/javscript,application/javascript,application/json" 
```

JSESSIONID cookie 是在 HttpOnly 和 SSL 上创建的。我们只想将其限制为 SSL，我们似乎无法弄清楚 Java 中会话 cookie 创建背后的逻辑。任何提示将不胜感激。

![谷歌浏览器检查器截图](../Images/37ab49a29893d702760c39d9c39e5d80.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T12:56:23.050

[HttpOnly cookie 属性](http://en.wikipedia.org/wiki/HTTP_cookie#Secure_and_HttpOnly)的命名有点误导：它的真正含义是“不要让客户端脚本读取此 cookie”。它*不是*Secure 属性的对立面，确实，为敏感 cookie 设置这两个属性是非常好的做法，您希望服务器只能通过 HTTPS 读取这些 cookie。

# sql - 如何在 CakePHP 中只从 1 个表（没有它的关系表）中检索数据？

> ID：14040508
> 
> 赞同：0
> 
> 时间：2012-12-26T12:21:45.537
> 
> 标签：sql, cakephp

我有 3 个表（`projects`、`sentiments`和`tweets`）。所有这些表都有关系。我需要的是仅从表中检索数据`projects`。

当我用 检索数据时`$this->Project->find('all')`，结果也给了我关系表中的所有数据。

当我尝试使用原始 SQL 查询时`$this->Project->query('SELECT * FROM projects')`，它仍然给我相同的结果。

如何仅从`projects`CakePHP 中的表中检索数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:25:29.513

将递归设置为-1。

```
$this->Project->find(
    'all',
    array( 'recursive' => -1 )
); 
```

见[http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)

# android - 图库实施问题

> ID：14040513
> 
> 赞同：0
> 
> 时间：2012-12-26T12:22:17.800
> 
> 标签：android, android-widget

我正在设计一个看起来像这样的画廊![画廊](../Images/a2d918ce61e3e66d916b91dac7de8349.png)

现在我已经很好地实现了画廊..现在问题是图像下方的两个点。点的逻辑：所选图像的黑色点和任何点图像的选择应在图库中更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:31:59.727

我已经像这样解决了这个问题
1）通过在线性布局中有两个画廊来实现这一点，一个用于图像画廊，另一个画廊用于 dot 。
2）这就是我整合两个的方式

`iconGallery = (Gallery) view.findViewById(R.id.product_image_gallery_icon); iconGallery.setVisibility(View.VISIBLE); gallery = (Gallery) view.findViewById(R.id.product_image_gallery); GalleryImageAdapter adapter = new GalleryImageAdapter(getActivity(), urlList); gallery.setAdapter(adapter); gallery.setCallbackDuringFling(false); gallery.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() { public void onItemSelected(AdapterView<?> parent, View view, int position, long id) { GalleryIconAdapter galleryIconAdapter= new GalleryIconAdapter(getActivity(), dotCount, position); iconGallery.setAdapter(galleryIconAdapter); } public void onNothingSelected(AdapterView<?> parent) { } });`

请更新我的人找到更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:34:21.147

嗨，只需检查如下逻辑：

基于该位置的当前项目在屏幕上的可见性：

```
if(selectedItem == currentPosition){
Then display Black dotted image
}
in else
if position not matched with current item shown in gallery{

then default image will be appear...

} 
```

我希望它有帮助:)

# android - 如何使用从列表传递给另一个类的数据，并将其传递给另一个类？

> ID：14040515
> 
> 赞同：0
> 
> 时间：2012-12-26T12:22:26.897
> 
> 标签：android, android-intent

好的，我看到很多关于堆栈溢出的问题，关于通过意图单击它时将数据从列表视图传递到另一个类，但我的问题是不同的。所以我有列表项，当我单击打开一个笔记类时，有列表标题和正文，标题与单击的列表项相同。在这个类中，我有一个打开另一个类的按钮，我也需要在这里传递标题，但我一生无法弄清楚它在 SQL Lite DB 中的位置，它是如何传递的以及如何通过它传递一个按钮。

这是列表项的 onclick 侦听器：

```
 @Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, NoteEdit.class);
    i.putExtra(NotesDbAdapter.KEY_ROWID, id);
    startActivityForResult(i, ACTIVITY_EDIT); 
} 
```

这是接受这个并显示标题、正文和按钮的类，我还需要传递标题数据，我在按钮上方评论过：

```
public class NoteEdit extends Activity {

private EditText mTitleText;
private EditText mBodyText;
private Long mRowId;
private NotesDbAdapter mDbHelper;
@Override
protected void onCreate(Bundle savedInstanceState) {         

    super.onCreate(savedInstanceState);
    mDbHelper = new NotesDbAdapter(this);
    mDbHelper.open();

    setContentView(R.layout.note_edit);
    setTitle(R.string.edit_note);

    mTitleText = (EditText) findViewById(R.id.title);
    mBodyText = (EditText) findViewById(R.id.body);

    Button confirmButton = (Button) findViewById(R.id.confirm);
    Button button1 = (Button) findViewById(R.id.butt);

    mRowId = (savedInstanceState == null) ? null :
        (Long) savedInstanceState.getSerializable(NotesDbAdapter.KEY_ROWID);
    if (mRowId == null) {
        Bundle extras = getIntent().getExtras();
        mRowId = extras != null ? extras.getLong(NotesDbAdapter.KEY_ROWID)
                                : null;
    }

    populateFields();

    confirmButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            setResult(RESULT_OK);
            finish();
        }

    });

    //HERE IS THE BUTTON WHICH I USE TO GET TO THE NEXT ACTIVITY, I NEED TO PASS THE DATA IN TITLE FROM HERE!!

    button1.setOnClickListener(new View.OnClickListener() {

         public void onClick(View v) {
                Intent openNext = new Intent("com.timer.RUNNING");
                startActivity(openNext);
            }
            });
}

private void populateFields() {
    if (mRowId != null) {
        Cursor note = mDbHelper.fetchNote(mRowId);
        startManagingCursor(note);
        mTitleText.setText(note.getString(
                note.getColumnIndexOrThrow(NotesDbAdapter.KEY_TITLE)));
        mBodyText.setText(note.getString(
                note.getColumnIndexOrThrow(NotesDbAdapter.KEY_BODY)));

    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putSerializable(NotesDbAdapter.KEY_ROWID, mRowId);
}

@Override
protected void onPause() {
    super.onPause();
    saveState();
}

@Override
protected void onResume() {
    super.onResume();
    populateFields();
}

private void saveState() {
    String title = mTitleText.getText().toString();
    String body = mBodyText.getText().toString();

    if (mRowId == null) {
        long id = mDbHelper.createNote(title, body);
        if (id > 0) {
            mRowId = id;
        }
    } else {
        mDbHelper.updateNote(mRowId, title, body);
    }
  }
 } 
```

我希望这个问题是有道理的，当我不得不从列表中的 onclick 到仍然使用按钮传递该信息时，我陷入了困境。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:30:35.977

使用静态变量。将该变量中的值从您的班级设置到您想去的另一个班级。这可以帮助你吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:32:57.360

将标题数据发送到下一个活动：

```
 button1.setOnClickListener(new View.OnClickListener() {

      public void onClick(View v) {
           //Intent openNext = new Intent("com.timer.RUNNING");
           Intent openNext = new Intent(Current_Activity.this,NextActivity.this);
           openNext.putExtra("title",mTitleText.getText().toString());
           startActivity(openNext);
          }
     }); 
```

# android-networking - 如何为android模拟器获取和设置不同的IP地址？

> ID：14040518
> 
> 赞同：1
> 
> 时间：2012-12-26T12:22:51.210
> 
> 标签：android-networking

我对 Android 很陌生，我的电脑的 IP 是 192.168.1.50。从谷歌搜索我了解到，默认模拟器的 IP 是 10.0.2.2 或任何 A 类 IP。但我们的网络在 C 类（192.168.1.50）中工作。当我尝试运行我的应用程序（它是为读取模拟器 IP 地址而开发的）时，它会通过在下面弹出消息自动关闭：“不幸的是，已停止”...请帮助我从我的 android 模拟器进行通信任何其他计算机或任何其他 android 模拟器。（寻找任何示例代码）在此先感谢:)

# qt - 如何使用 Qt 将数据从服务器连续发送到客户端？

> ID：14040521
> 
> 赞同：1
> 
> 时间：2012-12-26T12:23:17.863
> 
> 标签：qt, qt4

我正在使用客户端-服务器实现的 Qt 财富服务器示例。在此示例中，当有新连接时，服务器会发送随机财富，然后关闭连接。但是对于我的程序，我希望服务器在客户端连接后继续与客户端通信。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:45:41.757

好吧，这里有两种方法：

1.  你没有关闭连接。当客户端连接到服务器时，连接会一直保持到客户端或服务器关闭为止。这样客户端和服务器都可以随时发起请求。您将需要实现一些 ping 机制，其中客户端和服务器将定期发送小请求，只是为了通知对方它们仍然“活着”。当这些停止传入时，连接将关闭。客户端必须随时为此做好准备，并在意外关闭时重新建立连接。
2.  使用 REST 架构实现这一点：[http](http://en.wikipedia.org/wiki/Restful) ://en.wikipedia.org/wiki/Restful 。这与浏览器用于获取 WWW 站点的模型相同。每次客户端想要从服务器获得某些东西时，它都会实例化一个新连接，发送请求，接收响应并关闭连接。自然，如果需要一直重新建立连接，它可能会影响性能，因此客户端应该保持连接处于活动状态，直到他们决定不再需要它们或保持活动时间到期。这实际上是在 Internet 浏览器中实现的。请记住，此架构阻止您将请求从服务器直接发送到客户端。如果客户端需要实时刷新信息，则需要在短时间内不断向服务器请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:39:39.567

只需不要断开客户端并存储返回的客户端套接字`QTcpServer::nextPendingConnection()`以供以后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:18:10.207

[在Gitorious](https://gitorious.org/)或[Github](https://github.com/) （以及许多其他网站）中有很多项目，可以为您提供示例，但不完全是您正在寻找的，稍微研究和记录这些项目，您可以看到其他开发人员如何制作您的自己研究自己的专业。

我真的想到了一个有趣的项目，它完全满足了他们的想法[**QtWebsocket**](https://gitorious.org/qtwebsocket)，但当然必须始终考虑如何根据您的需要应用它。

# c# - 为什么“对象引用未设置为对象的实例”。这里提出错误？

> ID：14040524
> 
> 赞同：0
> 
> 时间：2012-12-26T12:23:19.297
> 
> 标签：c#, asp.net, .net, razor

我正在开发一个 asp.net mvc Web 应用程序，我有以下视图：-

```
@model MvcApplication4.Models.SelectedCustomers
<h3>Select Customers Detials</h3>
@using (Html.BeginForm("Export", null))
{    <table>
        <tr>
            <th>
                NAME @Html.CheckBox("IncludeName", true)
            </th>
            <th>
                Description @Html.CheckBox("IncludeDescription", true)
            </th>
            <th>
                Address @Html.CheckBox("IncludeAddress", true)
            </th>
        </tr>
        @foreach (var item in Model.Info) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.ORG_NAME)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LOGIN_URI)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SUPPORT_EMAIL)
                </td>
                @Html.HiddenFor(modelItem => item.ORG_ID)
            </tr>
        }
    </table>
    <p>
        @Html.ActionLink("Back","customer","Home") |
        <button type="submit" name="Format" value="xls">extract to excel</button> |
        <button type="submit" name="Format" value="csv">extract to text file</button>
    </p>
} 
```

以及以下操作方法：-

```
[HttpPost]
        public ActionResult Export(ExportViewModel exportOptions, IList<AccountDefinition> accounts)
        {
          // var accounts = GetAccount();

            if (exportOptions.Format == "csv")
            {
                return accounts.AsCsvResult(exportOptions);
            }
            else if (exportOptions.Format == "xls")
            {
                return accounts.AsXlsResult(exportOptions);
            }

            throw new NotSupportedException(
                string.Format("Unsupported format: {0}", exportOptions.Format)
            );
        } 
```

然后我在我的 AccountDefinition 模型中定义了以下方法：-

```
 public partial class AccountDefinition
    {
        public long ORG_ID { get; set; }
        public string ORG_NAME { get; set; }
        public string LOGIN_URI { get; set; }
        public string SUPPORT_EMAIL { get; set; }

        public virtual SDOrganization SDOrganization { get; set; }

    }
    public static class ActionResultextensions
    {
        public static ActionResult AsCsvResult(this IEnumerable<AccountDefinition> accounts, ExportViewModel exportOptions)
        {
            return new CsvResult(accounts, exportOptions);
        }

        public static ActionResult AsXlsResult(this IEnumerable<AccountDefinition> accounts, ExportViewModel exportOptions)
        {
            return new XlsResult(accounts, exportOptions);
        }
    }
} 
```

然后我有以下模型类：-

1.

```
public class CsvResult : ExportAccountsResult
    {
        public CsvResult(IEnumerable<AccountDefinition> accounts, ExportViewModel exportOptions)
            : base(accounts, exportOptions)
        {
        }

        protected override string ContentType
        {
            get { return "text/csv"; }
        }

        protected override string Filename
        {
            get { return "accounts.csv"; }
        }        } 
```

2、

```
 public class XlsResult : ExportAccountsResult
    {
        public XlsResult(IEnumerable<AccountDefinition> accounts, ExportViewModel exportOptions)
            : base(accounts, exportOptions)
        {
        }

        protected override string ContentType
        {
            get { return "application/vnd.ms-excel"; }
        }

        protected override string Filename
        {
            get { return "accounts.csv"; }
        }
    } 
```

3.

```
public class ExportViewModel
    {
        public string Format { get; set; }
        public bool IncludeName { get; set; }
        public bool IncludeDescription { get; set; }
        public bool IncludeAddress { get; set; }

    } 
```

4.

```
public abstract class ExportAccountsResult : ActionResult
    {
        protected ExportAccountsResult(IEnumerable<AccountDefinition> accounts, ExportViewModel exportOptions)
        {
            this.Accounts = accounts;
            this.ExportOptions = exportOptions;
        }

        protected IEnumerable<AccountDefinition> Accounts { get; private set; }
        protected ExportViewModel ExportOptions { get; private set; }

        protected abstract string ContentType { get; }
        protected abstract string Filename { get; }

        public override void ExecuteResult(ControllerContext context)
        {
            var response = context.HttpContext.Response;
            response.ContentType = ContentType;
            var cd = new ContentDisposition
            {
                FileName = this.Filename,
                Inline = false
            };
            response.AddHeader("Content-Disposition", cd.ToString());

            // TODO: Use a real CSV parser here such as https://github.com/JoshClose/CsvHelper/wiki/Basics
            // and never roll your own parser as shown in this oversimplified
            // example. Here's why: http://secretgeek.net/csv_trouble.asp
            using (var writer = new StreamWriter(response.OutputStream))
            {
                foreach (var account in this.Accounts)
                {
                    var values = new List<object>();
                    if (this.ExportOptions.IncludeName)
                    {
                        values.Add(account.ORG_NAME);
                    }
                    if (this.ExportOptions.IncludeDescription)
                    {
                        values.Add(account.LOGIN_URI);
                    }
                    if (this.ExportOptions.IncludeAddress)
                    {
                        values.Add(account.SUPPORT_EMAIL);
                    }
                    writer.WriteLine(string.Join(", ", values));
                }
            }
        }
    } 
```

但是当我在视图中单击“提取到 excel”或“提取到文本文件”按钮时，我得到了以下异常：-

```
System.NullReferenceException was unhandled by user code
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=MvcApplication4
  StackTrace:
       at MvcApplication4.Models.ExportAccountsResult.ExecuteResult(ControllerContext context) in c:\Users\Administrator\Desktop\MvcApplication4\MvcApplication4\Models\ExportAccountsResult.cs:line 41
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
       at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
  InnerException: 
```

在 ExportAccountsresults.cs 中的以下代码上：-

```
 foreach (var account in this.Accounts)
                { 
```

**：：：更新：：：**

我已将我的观点更新为以下内容：-

```
@model MvcApplication4.Models.SelectedCustomers

<h3>Select Customers Detials</h3>

    @using (Html.BeginForm("Export", null))
    {
        Int32 c = -1;
        <table>
            <tr>
                <th>
                    NAME @Html.CheckBox("IncludeName", true)
                </th>
                <th>
                    Description @Html.CheckBox("IncludeDescription", true)
                </th>
                <th>
                    Address @Html.CheckBox("IncludeAddress", true)
                </th>
            </tr>
            @foreach (var item in Model.Info) {
                c++;
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.ORG_NAME)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.LOGIN_URI)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.SUPPORT_EMAIL)
                    </td>

                     <td>@Html.Hidden(String.Format("Info[{0}].ORG_ID", c), item.ORG_ID)</td>
                </tr>
            }
        </table>

        <p>
            @Html.ActionLink("Back","customer","Home") |
            <button type="submit" name="Format" value="xls">extract to excel</button> |
            <button type="submit" name="Format" value="csv">extract to text file</button>
        </p>
    } 
```

我的行动方法如下： -

```
 [HttpPost]
        public ActionResult Export(ExportViewModel exportOptions, SelectedCustomers sc)
        {
          // var accounts = GetAccount();
           var accounts = sc.Info.ToList();
            if (exportOptions.Format == "csv")
            {
                return accounts.AsCsvResult(exportOptions);
            }
            else if (exportOptions.Format == "xls")
            {
                return accounts.AsXlsResult(exportOptions);
            }

            throw new NotSupportedException(
                string.Format("Unsupported format: {0}", exportOptions.Format)
            );
        } 
```

现在 csv 文件将打开，但它将是空的，并且每条记录都不会包含“，”，例如，如果 excel 工作表或文本文件中应该有 7 条记录，那么 .csv 文件将包含以下没有数据:-

```
, , 
, , 
, , 
, , 
, , 
, , 
, , 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:38:41.310

问题是`IList<AccountDefinition>`不能转换为`IEnumerable<AccountDefinition>`，所以要么在这里收到`IEnumerable<T>`：

```
public ActionResult Export(ExportViewModel exportOptions, IList<AccountDefinition> accounts) 
```

或将其他所有内容更改为`IList<T>`.

* * *

另一种方法是：

```
public ActionResult Export(ExportViewModel exportOptions, IList<AccountDefinition> accounts)
{
    var enumerableAccounts = accounts.AsEnumerable();

    if (exportOptions.Format == "csv")
    {
        return enumerableAccounts.AsCsvResult(exportOptions);
    }
    else if (exportOptions.Format == "xls")
    {
        return enumerableAccounts.AsXlsResult(exportOptions);
    }

    throw new NotSupportedException(
        string.Format("Unsupported format: {0}", exportOptions.Format)
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:21:41.470

以下运行（Pelase 在视图中查看 HiddeFor 和 Hidden 之间的区别）：

控制器

```
namespace SomeApp.Controllers {
public class TestModel {        
    public IEnumerable<TestModelItem> Items { get; set; }
}

public class TestModelItem {
    public int Id { get; set; }
    public String Name { get; set; }
}
public class TestsController : Controller {

    public ActionResult Index() {
        TestModel tm = new TestModel {
            Items = new List<TestModelItem> {
                new TestModelItem { Id = 1, Name = "first"},
                new TestModelItem { Id = 2, Name = "second"}
            }
        };

        return View(tm);
    }

    [HttpPost]
    public ActionResult Index(TestModel tm) {
        return View(tm);
    }

}
} 
```

和视图

```
@model SomeApp.Controllers.TestModel
@{
    Layout = null;
    Int32 c = -1;
}

<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
</head>
<body>
    <form method="post">
        <table>
        @foreach (var i in Model.Items) {
            c++;
            <tr>
                @*<td>@Html.HiddenFor(x => i.Id)</td>*@
                <td>@Html.Hidden(String.Format("Items[{0}].Id", c), i.Id)</td>
                <td>@Html.DisplayFor(x => i.Name)</td>
            </tr>
        }
        </table>
        <button type=submit>go</button>
    </form>
</body>
</html> 
```

# php - 如何使计数器处理多个请求？

> ID：14040526
> 
> 赞同：0
> 
> 时间：2012-12-26T12:23:21.647
> 
> 标签：php, variables, if-statement, session-variables

我有这个代码

```
 if (empty($sid)) {
                    $sid = 0;
                } else {
                    $sid++;
                }

                $_SESSION['words'][$sid] = $try; 
```

$sid 脚本中没有其他地方设置。

当我加载该页面时，$sid 的值保持在 0。它应该会增加。我真的很感激一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:29:06.230

请求之间不保留局部变量。您也可以保存`$sid`在会话中。

```
 $sid = $_SESSION['sid'];
            if (empty($sid)) {
                $sid = 0;
            } else {
                $sid++;
            }
            $_SESSION['sid'] = $sid;
            $_SESSION['words'][$sid] = $try; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:29:36.327

您需要保存`sid`会话或 cookie 中的值，然后您可以像这样检查：

尝试使用`isset`

```
 $sid = $_SESSION['sid']; OR 
 $sid = $_COOKIE['sid'];

 if (isset($sid)) {
        $sid = 0;
 } else {
        $sid++;
 }

 $_SESSION['sid'] = $sid;
 $_SESSION['words'][$sid] = $try; 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:26:00.160

局部变量与会话或 cookie 不同，它们在页面重新加载（每次往返）时被重置。

请改用会话或 cookie 来存储`$sid`值。

# android - 缩放 ImageView 的正确方法

> ID：14040527
> 
> 赞同：1
> 
> 时间：2012-12-26T12:23:22.400
> 
> 标签：android, android-widget, scale

在我看来，android 使用 dpi 配置文件缩放位图的方式是不正确的。

例如，我有一个**320x533**的图像，旨在覆盖整个屏幕区域，定义如下：

```
<ImageView
    android:src="@drawable/background"
    android:layout_width="320dp"
    android:layout_height="533dp" /> 
```

在 hdpi（240 或 1.5）下，图像正确缩放到**480x800**。但是在 xhdpi（320 或 2.0）上没有！即图像变为**640x1066**，但实际手机区域可能是***720x1280***或***1080x1920***或其他类似分辨率。

我试图调整 ImageView.scaleType （每个选项），但图像仍然无法正确缩放。您认为处理此问题的正确方法是什么？我应该将 ImageView 子类化并使用 Java 处理缩放，还是我错过了一些基本的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:27:15.537

“我应该将 ImageView 子类化并使用 Java 处理缩放吗？”否

你可以得到 DPI 值，你也可以得到分辨率值。比您可以计算所需的像素数。

选项2是：根据android dpi使用不同的目录。（不仅是可绘制的，谷歌搜索会告诉你确切的方法）

# php - php中的ajax jquery概念

> ID：14040530
> 
> 赞同：0
> 
> 时间：2012-12-26T12:23:43.163
> 
> 标签：php, jquery, ajax

我正在尝试在我的应用程序中使用 ajax jquery 概念，这对我来说是新的。我已经写出了代码。但没有得到准确的输出。我的代码是这样的：

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<form name="ajax" id="ajax" method="post" action="">
 Username: <input type="text" name="username" id="username" /><br />
 Password: <input type="text" name="pass" id="pass" value="" /><br />
 <input type="submit" name="sub_btn" id="sub_btn" value="Login" />
</form>
<script type="text/javascript">
$(document).ready(function(){
 $('#sub_btn').click(function(){
  var username = $('#username').val();
  var password = $('#pass').val();
  var datastring = "username="+username+"&password="+password;
  $.ajax({
   type:"POST",
   url: "bin/login-process.php",
   data: datastring,
   success: function(){
    alert("Success");
   },
   error: function(){
    alert("Fail");
   }
  });   
 });
});
</script> 
```

在 bin/login-process.php 文件中，我只是回显“hello”。现在，如果我尝试运行此页面，我会收到警报消息（“失败”），但时间很短，它会再次重定向到同一页面。但是在用户单击“确定”按钮之前，我不想消失警报消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:27:19.543

像这样将按钮类型从提交更改为按钮

```
<input type="button" name="sub_btn" id="sub_btn" value="Login" /> 
```

因为这是使用普通的 POST 方法提交您的表单，这就是您的页面被重定向的原因。

为了检查返回的输出，像这样写你的成功函数

```
success: function(response){
    alert("Success :"+response);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:46:05.023

您有两种方法可以解决此问题。

**1.**将按钮类型更改为“按钮”

> ```
> <input type="button" name="sub_btn" id="sub_btn" value="Login" /> 
> ```

**2.**修改你的点击处理程序

> ```
> $(document).ready(function(){
>     $('#sub_btn').click(function(event){
>         event.preventDefault(); 
> ```

**原因：** 当您向表单添加提交按钮时，单击该按钮会触发提交事件，因此将表单提交到提供的操作，在您的情况下，您想使用 Ajax 提交表单，因此您应该通过添加[事件来防止默认行为。 preventDefault()](http://api.jquery.com/event.preventDefault/)这意味着您正在阻止事件的默认操作。

**建议：**

与其挂钩按钮的单击事件，不如挂钩表单的提交事件，毕竟人们也可以提交您的表单，但按“Enter”键。这适用于鼠标单击和键盘 Enter 键。

```
$(document).ready(function(){
    $('#ajax').submit(function(event){
        event.preventDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:27:28.053

只需像这样更新您的点击处理程序函数：

```
$('#sub_btn').click(function(e){ 
    e.preventDefault();
    ....//all your other code here. 
```

这里的问题是您没有停止表单提交的默认操作。[关于preventDefault](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)的一些细节

另一种选择是`return false;`在您的末尾添加单击功能。

> 我收到警报消息（“失败”），但时间很短

当您单击按钮时，您的函数将执行并启动 ajax 请求。但是您不会停止默认操作（提交），浏览器会像往常一样提交您的表单。这会终止您的 ajax 调用的执行，从而导致调用错误回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:35:58.120

请注意，在 HTTP 成功 (200) 的情况下会调用成功函数，因此您必须抛出 http 错误（例如未经授权），以获取错误回调，更常规的方法是输出 json在服务器中，类似于：

```
$response['Success'] = false;
if ($user = User::tryLogin($username, $password)){
  $response['Success'] = true;
}
echo json_encode($response); 
```

在 jquery 成功函数中，您需要执行以下操作：

```
$('#sub_btn').click(function(){
  var username = $('#username').val();
  var password = $('#pass').val();

  $.post("bin/login-process.php", {username : username, password : password}, function(data){
    if (data.Success){
    // login success
    }
    else{
    // login failed
    }
  },"json");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T12:59:59.030

用这个：

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <form name="ajax" id="ajax" method="post" action="">
     Username: <input type="text" name="username" id="username" /><br />
     Password: <input type="text" name="pass" id="pass" value="" /><br />
     <input type="button" name="sub_btn" id="sub_btn" value="Login" />
    </form>
    <script type="text/javascript">
    $(document).ready(function(){
     $('#sub_btn').click(function(){
      var username = $('#username').val();
      var password = $('#pass').val();
      var datastring = $('#ajax').serialize();
      $.ajax({
       type:"POST",
       url: "bin/login-process.php",
       data: datastring,
       success: function(responce){
        alert("Success :"+ responce);
       },
       error: function(){
        alert("Fail");
       }
      });   
     });
    });
    </script> 
```

# c# - 无效日期：下载电子邮件时出现无效时区错误，lumisoft.dll

> ID：14040531
> 
> 赞同：0
> 
> 时间：2012-12-26T12:23:55.247
> 
> 标签：c#, asp.net, email, imap, lumisoft

我正在使用 lumisoft.net.dll 从我的邮箱中读取/轮询电子邮件并将它们记录在数据库中。

这是代码

```
private List<IMAP_Envelope> GetNewReplies()
{
    List<IMAP_Envelope> lstNewReplies = new List<IMAP_Envelope>() { };

    using (IMAP_Client client = new IMAP_Client())
    {
        client.Connect(Common.IMAPHost, Common.IMAPPort, Common.SSL);
        client.Login(Common.ReplyTo, Common.ReplyToPassword);
        client.SelectFolder("INBOX");

        IMAP_SequenceSet sequence = new IMAP_SequenceSet();
        //sequence.Parse("*:1"); // from first to last

        IMAP_Client_FetchHandler fetchHandler = new IMAP_Client_FetchHandler();
        fetchHandler.NextMessage += new EventHandler(delegate(object s, EventArgs eNexMessage) { });
        fetchHandler.Envelope += new EventHandler<EventArgs<IMAP_Envelope>>(delegate(object s, EventArgs<IMAP_Envelope> eEnvelope)
        {
            lstNewReplies.Add(eEnvelope.Value);
        });

        // the best way to find unread emails is to perform server search
        Int32[] unseen_ids = client.Search(false, null, "unseen");

        if (unseen_ids.Length > 0)
        {
            System.Text.StringBuilder sbUnseenIDs = new System.Text.StringBuilder();
            foreach (Int32 unseen_id in unseen_ids)
            {
                if (sbUnseenIDs.Length <= 0)
                {
                    sbUnseenIDs.Append(Convert.ToString(unseen_id));
                }
                else
                {
                    sbUnseenIDs.Append("," + Convert.ToString(unseen_id));
                }
            }

            // now we need to initiate our sequence of messages to be fetched                    
            sequence.Parse(sbUnseenIDs.ToString());

            // fetch messages now                    
            IMAP_Fetch_DataItem[] lstDataItem = new IMAP_Fetch_DataItem[] { new IMAP_Fetch_DataItem_Envelope() };
            client.Fetch(false, sequence, lstDataItem, fetchHandler);

            //this line marks messages as read
            client.StoreMessageFlags(false, sequence, IMAP_Flags_SetType.Add, IMAP_MessageFlags.Seen);

            //this line marks messages as deleted
            client.StoreMessageFlags(false, sequence, IMAP_Flags_SetType.Add, IMAP_MessageFlags.Deleted);
        }

        //client.CloseFolder();
        client.Expunge();
        client.Disconnect();
        client.Dispose();
    }

    return lstNewReplies;
} 
```

这大部分工作正常，但有时它开始抛出异常

```
client.Fetch(false, sequence, lstDataItem, fetchHandler); 
```

`Invalid Date: Invalid time zone.`

我注意到当有人通过他们的黑莓手机或通过一些鲜为人知的电子邮件客户端发送电子邮件时会发生这种情况。

如果我删除了黑莓手机发送的有问题的电子邮件，通过进入邮箱的 Web 界面，它又开始工作了。

我应该从哪里开始寻找解决这个问题？

# java - bean 属性上的 SEAM JSF Lazy Init 异常

> ID：14040537
> 
> 赞同：1
> 
> 时间：2012-12-26T12:24:22.507
> 
> 标签：java, jsf, richfaces, seam, seam-conversation

我在我的 SEAM (2.2.2) 应用程序中遇到延迟初始化异常的问题，我正在使用 SEAM 托管的持久性上下文（使用 JPA），在此处的文档中进行了描述

SEAM 文档参考。[9.3.1 使用 JPA 的 SEAM 托管持久性上下文](http://docs.jboss.com/seam/2.2.2.Final/reference/en-US/html/persistence.html#d0e7372)

在我的 GenericDAO 类中使用 @In 注入实体管理器

**设想：**

我有一个会话范围的 bean，它注入当前登录的用户实体（会话范围），当我尝试通过页面中的 JSF（el）懒惰地加载一些额外的用户属性时，LIE 似乎被抛出。

**堆栈跟踪错误：**

```
2012-12-24 15:30:34,661 SEVERE [facelets.viewhandler] (http-0.0.0.0-8080-3) Error Rendering View[/user/settings.xhtml]: javax.el.ELException: /user/settings.xhtml: org.hibernate.LazyInitializationException: could not initialize proxy - no Session

at com.webapp.entities.Client_$$_javassist_29.getLogoUrl 
```

起初我以为对话可能已经超时，但这是通过注销用户来处理的，而不是抛出 LIE

所以现在我想可能是因为用户实体是从会话范围注入的，而操作 bean 是会话范围的，所以对象以某种方式与实体管理器分离？

不幸的是，不是每次都抛出异常，所以我不能轻易地重现它（应用程序是实时的，所以我会在何时通过错误）

我知道我可以通过将用户属性设置为 EAGERLY 来解决这个问题，但我想先深入了解这一点，并且不希望预先加载所有实体

**有关我的设置的更多详细信息：**

组件.xml：

```
<persistence:managed-persistence-context name="entityManager"
    auto-create="true"
    persistence-unit-jndi-name="java:/EntityManagerFactories/appData">  
</persistence:managed-persistence-context> 
```

持久性.xml

```
<persistence-unit name="AppDatabase">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:/appDatasource</jta-data-source>
    <properties>
        <property name="hibernate.connection.datasource" value="java:/appDatasource"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
        <property name="jboss.entity.manager.factory.jndi.name" value="java:/EntityManagerFactories/appData"/>
        <property name="hibernate.cache.use_second_level_cache" value="false"/>
        <property name="hibernate.show_sql" value="false"/> 
    </properties>
</persistence-unit> 
```

通用DAO

```
public abstract class GenericDAOBean<T>
    implements GenericDAO<T>, Serializable{

private static final long serialVersionUID = 1L;

private Class<T> entityBeanType;

@In private EntityManager em;

@SuppressWarnings("unchecked")
public GenericDAOBean() {
    this.entityBeanType = (Class<T>) ((ParameterizedType) getClass()
                            .getGenericSuperclass()).getActualTypeArguments()[0];
}

/**
 * Set the entity manager to use
 * 
 * @param em
 */
public void setEntityManager(EntityManager em) {
    this.em = em;
}

/**
 * Get the current seam entity manager
 * 
 * @return
 */
 protected EntityManager getEntityManager() {
 //Seam entity manager set this way as of version 2.2.0 
 //can't handle abstract classes and @In doesn't inject
 //into this as a parent class
 EntityManager entityManager = (EntityManager)Component.getInstance("entityManager");
 if (entityManager == null)
     throw new IllegalStateException("Seam EntityManager has not been set on "
     +getEntityBeanType().getClass().getName()+"DAO before usage!");
     return entityManager;
 }

//Further Generic method follow here which are removed for brevity
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:53:43.190

如果您从操作 bean 获取用户实体，请尝试在您的操作 bean 中

用户 user=entityManger.find(User.class,User.getId());

这应该将其加载到扩展的持久性上下文中，因为它看起来像是分离的

**在您发表评论后进行**编辑。****

 **您当然不会在您的 getter 方法中执行此操作，只需在您访问 bean 之前的任何方法中执行一次，它将附加到您的扩展 PC，我会说在您的操作 bean 的 @Create 方法中执行此操作。关于您的最后一个问题：它是否曾被加载到受对话约束的 Seam 管理的持久性上下文中？

此外，您应该使用“@In EntityManager entityManager”注入您的实体管理器，因为这是您在 application.xml 中对托管持久性上下文的配置。如果您的实体曾经在此对话中被加载到 EPC 中，那就足够了。**

# android - 如何从android中的Youtube API获取所有视频

> ID：14040540
> 
> 赞同：1
> 
> 时间：2012-12-26T12:24:43.170
> 
> 标签：android, youtube-api

我正在使用[Youtube 网址](https://gdata.youtube.com/feeds/api/videos?q=%22TaarakMehtakaOoltahChashmah%22&v=2&alt=jsonc)

```
[https://gdata.youtube.com/feeds/api/videos?q=%cid%22&v=2&alt=jsonc][1] 
```

它给了我结果，但不是按剧集的顺序。

因此，为了获得所有剧集的顺序，我必须使用哪个 URL？

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:28:25.143

您可以使用 youtube Data Api 中的“orderby”参数按发布日期对结果进行排序。

看看这个： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#orderbysp](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#orderbysp)

# c++ - 在单行上用空格分隔多个输入

> ID：14040541
> 
> 赞同：0
> 
> 时间：2012-12-26T12:24:55.560
> 
> 标签：c++

```
5 1256 4323 7687 3244 5678
2 2334 7687
5 2334 5678 6547 9766 9543 
```

我应该在上面的表格中输入。每行中的第一个整数决定后面的整数个数。由于第一个整数可以变化，我不知道'scanf'是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:32:07.887

当然，您可以`scanf`按照以下方式进行操作。

```
while (scanf("%d", &n) == 1) {
  row++;
  for (col = 0; col < n; col++)
    scanf("%d", &a[row][col]);
} 
```

这与以下内容大致相同`cin`：

```
while (cin >> n) {
  row++;
  for (col = 0; col < n; col++)
    cin >> a[row][col];
} 
```

* * *

一个更具体的例子，假设输入是最大`N`行数。

```
int** a = new int*[N];
int row = -1; // not started yet
while (cin >> n) {
  row++;
  a[row] = new int[n];
  for (int col = 0; col < n; col++)
    cin >> a[row][col];
} 
```

如果`N`事先不知道，我们也可以`std::vector`如下使用。

```
vector<vector<int> > a;
while (cin >> n) {
  vector<int> line(n);
  for (int col = 0; col < n; col++)
    cin >> line[col];
  a.push_back(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:53:11.093

我永远不会明白你为什么不想在 Stackoverflow.com 上搜索！它被回答了很多次。例如 -

```
#include <iostream>
#include <sstream>
#include <fstream>
#include <string>

int main()
{
std::ifstream  data("test.txt");

std::string line;
while(std::getline(data,line))
{
    std::stringstream  lineStream(line);
    std::string        cell;
    while(std::getline(lineStream,cell,' '))
    {
        std::cout<<cell<<std::endl;

    }
  }
} 
```

# django - 芹菜关机

> ID：14040542
> 
> 赞同：8
> 
> 时间：2012-12-26T12:25:07.170
> 
> 标签：django, celery, boto, amazon-sqs, kombu

从 celery 2.4.5 升级后，我开始让 celery 随机关闭。
我在 centOS 机器上使用 celery 3.0.12、boto 2.6 和 amazon sqs 和 django 1.2.7（pip freeze dump 在底部）

我在跑步

```
service celerybeat start
service celeryd start 
```

在我启动 celery 几秒钟后，它停止（关闭），如果我查看其中一个 celery 日志，我总是会看到：

```
[2012-12-31 10:13:40,275: INFO/MainProcess] Task patrol.tasks.test[270f1558-bcc2-441b-8961 e1f21a2dbd27] succeeded in 0.318082094193s: None
[2012-12-31 10:13:40,424: INFO/MainProcess] child process calling self.run()
[2012-12-31 10:13:40,428: INFO/MainProcess] Got task from broker: patrol.tasks.myTask[d9a5ab26-71ca-448b-a4da-40315570f219]
[2012-12-31 10:13:40,666: INFO/MainProcess] Got task from broker: tasks.test[99edb7e2-caff-4892-a95b-c18a9d7f5c51]
[2012-12-31 10:13:41,114: WARNING/MainProcess] Restoring 2 unacknowledged message(s).
[2012-12-31 10:13:41,115: WARNING/MainProcess] UNABLE TO RESTORE 2 MESSAGES: (TypeError('<boto.sqs.message.Message instance at 0x3269758> is not JSON serializable',), TypeError('<boto.sqs.message.Message instance at 0x32697e8> is not JSON serializable',))
[2012-12-31 10:13:41,116: WARNING/MainProcess] EMERGENCY DUMP STATE TO FILE -> /tmp/tmppO4Bbp <-
[2012-12-31 10:13:41,116: WARNING/MainProcess] Cannot pickle state: TypeError('a class that defines __slots__ without defining __getstate__ cannot be pickled',). Fallback to pformat. 
```

我使用 maxtaskperchild 的低值来快速重新创建关机。如果我给出更高的值，那么在关机发生之前需要更长的时间。

**编辑**

在尝试隔离问题时，我删除了所有定期任务。现在我只有一个周期性任务和一个基本上什么都不做的任务，但我仍然可以每次都重现这个错误。

```
@task
def myTask():
    print 1
    return

class test(PeriodicTask):
    run_every = datetime.timedelta(seconds=3)
    def run(self, **kwargs):
            myTask.delay()
            print '2' 
```

我的 /init.d/celeryd

[芹菜](https://github.com/celery/celery/blob/3.0/extra/generic-init.d/celeryd)

我的 /default/celeryd

```
# Name of nodes to start, here we have a single node
# or we could have three nodes:
CELERYD_NODES="w1 w2"

CELERYD_LOG_LEVEL="INFO"

# Where to chdir at start.
CELERYD_CHDIR="/var/myproject"

# How to call "manage.py celeryd_multi"
CELERYD_MULTI="python $CELERYD_CHDIR/manage.py celeryd_multi"

# How to call "manage.py celeryctl"
CELERYCTL="python $CELERYD_CHDIR/manage.py celeryctl"

MAXTASKPERCHILD=2 # this is low on purpose to recreate the shutdown fast
CELERY_CONC=5
EXPRESS_CONC=2
# Extra arguments to celeryd
CELERYD_OPTS="-Q:w1 celery,backup -c:w1 $CELERY_CONC -Q:w2 express -c:w2 $EXPRESS_CONC --time-limit=3600 --maxtasksperchild=$MAXTASKPERCHILD -E"

# Name of the celery config module.
CELERY_CONFIG_MODULE="celeryconfig"

# %n will be replaced with the nodename.
CELERYD_LOG_FILE="/var/log/celeryd/%n.log"
CELERYD_PID_FILE="/var/run/celeryd/%n.pid"

# Name of the projects settings module.
export DJANGO_SETTINGS_MODULE="settings"

# Path to celerybeat
CELERYBEAT="python $CELERYD_CHDIR/manage.py celerybeat"

# Extra arguments to celerybeat.  This is a file that will get
# created for scheduled tasks.  It's generated automatically
# when Celerybeat starts.
CELERYBEAT_OPTS="--schedule=/var/run/celerybeat-schedule"

# Log level. Can be one of DEBUG, INFO, WARNING, ERROR or CRITICAL.
CELERYBEAT_LOG_LEVEL="INFO"

# Log file locations
CELERYBEAT_LOGFILE="/var/log/celeryd/celerybeat.log"
CELERYBEAT_PIDFILE="/var/run/celeryd/celerybeat.pid" 
```

我的点冻结

```
Django==1.2.7
M2Crypto==0.20.2
MySQL-python==1.2.3c1
amqp==1.0.6
amqplib==1.0.2
anyjson==0.3.3
billiard==2.7.3.19
boto==2.1.1
celery==3.0.12
certifi==0.0.6
distribute==0.6.10
django-celery==3.0.11
django-kombu==0.9.4
django-picklefield==0.3.0
ghettoq==0.4.5
importlib==1.0.2
iniparse==0.3.1
ipython==0.12
kombu==2.5.4
lxml==2.3.4
mixpanel-celery==0.5.0
netaddr==0.7.6
numpy==1.6.2
odict==1.4.4
ordereddict==1.1
pycrypto==2.6
pycurl==7.19.0
pygooglechart==0.3.0
pygpgme==0.1
python-dateutil==1.5
python-memcached==1.48
pytz==2012h
requests==0.9.0
six==1.2.0
urlgrabber==3.9.1
yum-metadata-parser==1.1.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:32:32.760

我想您有应用程序将非 json 格式的内容放入队列中。以短信为例。您可以尝试在 celery 设置中更改队列，看看它是如何工作的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T20:35:15.467

将 Kombu 升级到 2.5.4 之后的任何版本，因为它是 Kombu 中的一个错误。它应该在 Celery >= 3.0.20 的任何版本中修复（这取决于 kombu>=2.5.5）。

见[http://kombu.readthedocs.org/en/latest/changelog.html#version-2-5-5](http://kombu.readthedocs.org/en/latest/changelog.html#version-2-5-5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-25T18:02:24.430

在我的情况下，我使用了错误版本的 python `python3.8`，但是我需要一个旧版本。

所以我更新了版本：

```
pyenv install 3.6.7 
pyenv local 3.6.7
pyenv local
virtualenv -p python3.6 venv 
source venv/bin/activate
pip install -r requirements.txt 
```

# sql - 查找具有多个帐号的名称

> ID：14040544
> 
> 赞同：0
> 
> 时间：2012-12-26T12:25:19.753
> 
> 标签：sql, select, oracle11g

```
CREATE TABLE one_many
  (name VARCHAR2(20),
  acc_num VARCHAR2(20))

  INSERT ALL 
  INTO one_many VALUES ('abc','a-110')
  INTO one_many VALUES ('def','b-256')
  INTO one_many VALUES ('xyz','v-586')
  INTO one_many VALUES ('uij','o-451')
  INTO one_many VALUES ('pqr','')
  INTO one_many VALUES ('abc','a-120')
  INTO one_many VALUES ('xyz','v-588')
  SELECT * FROM dual; 
```

如何找到一对多的情况，即选择那些名称有多个 acc_num 的？

```
Desired o/p:
NAME ACC_NUM
abc  a-110  
abc  a-120  
xyz  v-586  
xyz  v-588 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:26:17.813

在这种情况下，您需要使用`GROUP BY`和。`HAVING`

```
SELECT name, COUNT(*) totalCount
FROM one_many
GROUP BY name
HAVING COUNT(*) > 1 
```

*   [SQLFiddle 演示链接（*包括两个查询*）](http://sqlfiddle.com/#!4/75dce/3)

或者

也许这就是你的意思。

```
SELECT a.*
FROM one_many a
     INNER JOIN
      (
        SELECT name, COUNT(*) totalCount
        FROM one_many
        GROUP BY name
        HAVING COUNT(*) > 1
      ) b ON a.name = b.name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!4/75dce/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:36:21.140

This query seems designed for the analytic functions:

```
select name, acc_num
from (select om.*,
             count(*) over (partition by name) as NumOnAccount
      from one_many om
     ) t
where NumOnAccount > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:32:30.560

你可以这样做

```
 SELECT * FROM one_many
       WHERE acc_num IN 
                     (SELECT acc_num FROM 
                                     one_many
                                      GROUP BY name ,acc_num 
                                       HAVING COUNT(*)>1
                      ); 
```

# java - 文本识别库，Android代码，Java？

> ID：14040548
> 
> 赞同：2
> 
> 时间：2012-12-26T12:25:57.087
> 
> 标签：java, android, image, image-processing

有人可以为 Android、Java 推荐一个文本识别库或代码吗？我需要从图像中进行一些文本识别。我只能找到与 android 图像类不完全兼容的 Java 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:33:26.660

我`Blackberry`通过在 PHP 服务器上使用第三方 OCR 应用程序完成了这项任务。

在我长期的 R & DI 期间，也曾在[github的以下链接上工作](https://github.com/abbyysdk/ocrsdk.com)

# opengl-es - 结合旋转矩阵？

> ID：14040551
> 
> 赞同：0
> 
> 时间：2012-12-26T12:26:02.573
> 
> 标签：opengl-es, matrix

我找到了一篇关于旋转矩阵的好文章：

[http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/](http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/)

一切都按我的预期工作，但是：

```
void matrixRotateX(float degrees, mat4 matrix)
void matrixRotateY(float degrees, mat4 matrix)
void matrixRotateZ(float degrees, mat4 matrix) 
```

生成了三个矩阵，文章说我需要将它们相乘，我的意思是如果这是 c++ 我可以使用`matx * maty * matz`吗？但这`mat4`只是`float[16]`，我不知道如何结合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:49:05.827

[您参考的文章中的矩阵](http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/#matrices)章节有一个矩阵乘法公式。如果你想使用**operator***进行矩阵乘法（和其他很酷的东西），你也可以检查[glm 。](http://sourceforge.net/projects/ogl-math/)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:33:56.057

在我看来，你应该阅读这篇文章：

[OpenGL转换](http://www.songho.ca/opengl/gl_transform.html)

彻底理解它对于复杂的操作很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:48:40.357

您引用的文章中的函数“matrixMultiply()”为您执行矩阵乘法并处理您正在使用的特殊一维矩阵类型 mat4：

```
void matrixMultiply(mat4 m1, mat4 m2, mat4 result)
{
    // First Column
    result[0] = m1[0]*m2[0] + m1[4]*m2[1] + m1[8]*m2[2] + m1[12]*m2[3];
    result[1] = m1[1]*m2[0] + m1[5]*m2[1] + m1[9]*m2[2] + m1[13]*m2[3];
    result[2] = m1[2]*m2[0] + m1[6]*m2[1] + m1[10]*m2[2] + m1[14]*m2[3];
    result[3] = m1[3]*m2[0] + m1[7]*m2[1] + m1[11]*m2[2] + m1[15]*m2[3];

    // Second Column
    result[4] = m1[0]*m2[4] + m1[4]*m2[5] + m1[8]*m2[6] + m1[12]*m2[7];
    result[5] = m1[1]*m2[4] + m1[5]*m2[5] + m1[9]*m2[6] + m1[13]*m2[7];
    result[6] = m1[2]*m2[4] + m1[6]*m2[5] + m1[10]*m2[6] + m1[14]*m2[7];
    result[7] = m1[3]*m2[4] + m1[7]*m2[5] + m1[11]*m2[6] + m1[15]*m2[7];

    // Third Column
    result[8] = m1[0]*m2[8] + m1[4]*m2[9] + m1[8]*m2[10] + m1[12]*m2[11];
    result[9] = m1[1]*m2[8] + m1[5]*m2[9] + m1[9]*m2[10] + m1[13]*m2[11];
    result[10] = m1[2]*m2[8] + m1[6]*m2[9] + m1[10]*m2[10] + m1[14]*m2[11];
    result[11] = m1[3]*m2[8] + m1[7]*m2[9] + m1[11]*m2[10] + m1[15]*m2[11];

    // Fourth Column
    result[12] = m1[0]*m2[12] + m1[4]*m2[13] + m1[8]*m2[14] + m1[12]*m2[15];
    result[13] = m1[1]*m2[12] + m1[5]*m2[13] + m1[9]*m2[14] + m1[13]*m2[15];
    result[14] = m1[2]*m2[12] + m1[6]*m2[13] + m1[10]*m2[14] + m1[14]*m2[15];
    result[15] = m1[3]*m2[12] + m1[7]*m2[13] + m1[11]*m2[14] + m1[15]*m2[15];
} 
```

使用二维数组的矩阵乘法可以在三个嵌套的 for 循环中完成。mat4 类型的类似解决方案留作练习。好的？**

# javascript - 使用javascript转换本地时区的日期

> ID：14040556
> 
> 赞同：1
> 
> 时间：2012-12-26T12:26:28.830
> 
> 标签：javascript, timezone, date-format

`timestamp`在我的 JavaScript 层中，我收到一个**UTC**格式的 - 我需要将它转换为*local timezone*。我知道可以`DateFormat`在 Java 端转换时区，但我正在寻找一种仅使用 JavaScript 的可靠方法。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:38:43.723

使用**getTimezoneOffset()**

1.  获取本地 UTC 偏移量并转换为毫秒

    ```
    localOffset = d.getTimezoneOffset() * 60000; 
    ```

    请注意，getTimezoneOffset() 的负返回值表示当前位置早于 UTC，而正值表示该位置晚于 UTC。

2.  通过将本地时区偏移量添加到本地时间来获取当前的 UTC 时间。（您将从 getTime() 获得的本地时间）

    ```
    // obtain UTC time in msec
    utc = localTime + localOffset; 
    ```

3.  获取 UTC 时间后，以小时为单位获取目的地城市的 UTC 偏移量，将其转换为毫秒并添加到 UTC 时间。

    ```
    // obtain and add destination's UTC time offset
    // for example, Mumbai(India) 
    // which is UTC + 5.5 hours
    offset = 5.5;   
    mumbai = utc + (3600000*offset); 
    ```

    此时，变量 mumbai 包含印度孟买市的当地时间。这个本地时间表示为自 1970 年 1 月 1 日以来的毫秒数。显然，这不是很可读，因此我们需要进行一些计算。

4.  通过使用它初始化一个新的 Date() 对象并调用该对象的 toLocaleString() 方法，将上一步中计算的时间值更改为人类可读的日期/时间字符串。

    ```
    // convert msec value to date string
    nd = new Date(mumbai); 
    document.writeln("Mumbai time is " + nd.toLocaleString() + "<br>"); 
    ```

你完成了！

# xml - XSL：相交两个已排序的块

> ID：14040557
> 
> 赞同：1
> 
> 时间：2012-12-26T12:26:30.317
> 
> 标签：xml, sorting, xslt, intersection

我有一个具有以下结构的 XML 文件：

```
<block1>
 <node>
  <name>A<name/>
 <node/>
 <node>
  <name>B<name/>
 <node/>
 ...
</block1>

<block2>
 <node>
  <name>B<name/>
 <node/>
 <node>
  <name>D<name/>
 <node/>
 ...
</block2> 
```

每个块的主菜根据名称进行排序。

我想创建一个表来保存属于 block1 和 block2 的所有名称。我怎样才能有效地做到这一点（使用节点已排序的事实）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:07:19.213

**使用密钥的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kB1NodeByVal" match="block1/node" use="name"/>
 <xsl:key name="kB2NodeByVal" match="block2/node" use="name"/>

 <xsl:variable name="vDistinctB1Nodes" select=
 "/*/block1/node
      [generate-id()
      =
       generate-id(key('kB1NodeByVal',name)[1])
       ]"/>

 <xsl:template match="/">
     <xsl:copy-of select="$vDistinctB1Nodes[key('kB2NodeByVal', name)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于（从严重畸形中纠正）提供的 XML 文档时**：

```
<t>
    <block1>
        <node>
            <name>A</name>
        </node>
        <node>
            <name>B</name>
        </node>
 ...
    </block1>
    <block2>
        <node>
            <name>B</name>
        </node>
        <node>
            <name>D</name>
        </node>
 ...
    </block2>
</t> 
```

**产生了想要的正确结果**：

```
<node>
   <name>B</name>
</node> 
```

**该解决方案的效率为 O(k)，其中`k`是 Set 1 中不同值的数量**。这假设我们已经在 Set 1 中构造了键（索引）和不同值的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:43:52.930

Jeni Tennison在 EXSLT 中为此编写了一个[解决方案：](http://www.exslt.org/set/functions/intersection/set.intersection.template.xsl.html)

```
<xsl:template name="set:intersection">
   <xsl:param name="nodes1" select="/.." />
   <xsl:param name="nodes2"select="/.." />
   <xsl:apply-templates select="$nodes1[count(.|$nodes2) = count($nodes2)]" mode="set:intersection" />
</xsl:template>

<xsl:template match="node()|@*" mode="set:intersection">
   <xsl:copy-of select="." />
</xsl:template> 
```

# javascript - jquery-mousewheel 修复最大值

> ID：14040560
> 
> 赞同：0
> 
> 时间：2012-12-26T12:26:43.187
> 
> 标签：javascript, jquery, html, plugins, mousewheel

我正在使用brandonaaron jquery-mousewheel插件

[https://github.com/brandonaaron/jquery-mousewheel](https://github.com/brandonaaron/jquery-mousewheel)

[在Pan Zoom](http://benlumley.co.uk/dev/panzoom/example/index.html)上具有缩放功能。

问题是我无法修复最大值以无限向下滚动和向上滚动。我该如何解决这个问题。

我已经尝试过它的简单功能，但我无法在这里制作鼠标滚轮

```
var zoomLevel = 100;
var maxZoomLevel = 105;
var minZoomLevel = 95;

function zoom(zm) {
 var img=document.getElementById("pic");
 if(zm > 1){
    if(zoomLevel < maxZoomLevel){
        zoomLevel++;
    }else{
        return;
    }
 }else if(zm < 1){
    if(zoomLevel > minZoomLevel){
        zoomLevel--;
    }else{
        return;
    }
 }
 wid = img.width;
 ht = img.height;
 img.style.width = (wid*zm)+"px";
 img.style.height = (ht*zm)+"px";
 img.style.marginLeft = -(img.width/2) + "px";
 img.style.marginTop = -(img.height/2) + "px";
}​ 
```

如何在鼠标滚轮功能中给出最大值和最小值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:36:37.783

该插件没有缩放级别的概念 - 所以这种方法不起作用。相反，它会不断放大/缩小并根据图像的当前大小跟踪状态 - 它会随着您的缩放而增加/减少。

您可以使用 min_width 和 min_height 选项限制可以缩放的“远”距离 - 当前未实现 max，但同样的逻辑也可用于添加 max_width 和 max_height。

# android - SQLite 查询：SQLite 查询删除数据，这样只有当前日期数据存在于 db

> ID：14040561
> 
> 赞同：0
> 
> 时间：2012-12-26T12:26:48.550
> 
> 标签：android, sql, sqlite, android-sqlite

![数据库模式](../Images/a8bed75f7c6dd217825e256c3afe3a69.png)

我有一个包含以下列的数据库（附截图）

> **_id = 整数主键**
> 
> **guid = TEXT（图像的唯一 ID）**
> 
> **pubDate = LONG（自纪元以来的时间）**
> 
> **imgsrc = BLOB（图像字节）**

要求是我只想保留今天下载的图像。我想删除过时的数据...即昨天的数据。

对于前`id = 1`考虑`guid = 471c9744666b6f51`

此图像是在**Wed Dec 26 2012 17:11:05**下载的，因此数据库应仅包含 12 月 26 日的数据，而不是 12 月 25 日的数据。第一个发布日期不必是今天的日期。因此，可能首先我们需要按 pubdate 以降序对 db 进行排序，然后使用第一个 pubdate 作为输入来删除旧数据。

任何有关如何形成 SQL 语句的帮助将不胜感激。

> 答：最终做了这样的事情..

```
long maxDate = 0;

Cursor cursor = getApplicationContext().getContentResolver().query(IMAGES_URI, null, null, null, PUB_DATE + " DESC ");

if (cursor != null && cursor.moveToNext()) {
maxDate = cursor.getLong(cursor.getColumnIndexOrThrow(DatabaseHelper.PUB_DATE));
cursor.close();
}
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(maxDate);
cal.add(Calendar.HOUR, -12);

int delcount = getApplicationContext().getContentResolver().delete(IMAGES_URI, PUB_DATE + " <= " + cal.getTimeInMillis(), null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:34:43.067

```
String sql = "DELETE FROM myTable WHERE pubDate <= date('now','-1 day')"; 
db.execSQL(sql); 
```

**编辑：**

```
String sql = "DELETE FROM myTable WHERE pubDate NOT IN (SELECT MAX(pubDate) FROm myTable)"; 
db.execSQL(sql); 
```

**编辑：最终版本**

```
DELETE FROM myTable WHERE pubDate NOT IN (SELECT pubdate FROM mytable 
WHERE pubDate < datetime((SELECT MAX(pubDate) FROM myTable),'-1 days')) 
```

# javascript - 如何在mongodb中的对象数组中搜索

> ID：14040562
> 
> 赞同：276
> 
> 时间：2012-12-26T12:27:05.830
> 
> 标签：javascript, arrays, node.js, mongodb, express

假设 mongodb 文档（表）“用户”是

```
{
    _id: 1,
    name: {
        first: 'John',
        last: 'Backus'
    },
    birth: new Date('Dec 03, 1924'),
    death: new Date('Mar 17, 2007'),
    contribs: ['Fortran', 'ALGOL', 'Backus-Naur Form', 'FP'],
    awards: [
        {
            award: 'National Medal',
            year: 1975,
            by: 'NSF'
        },
        {
            award: 'Turing Award',
            year: 1977,
            by: 'ACM'
        }
    ]
}
// ...and other object(person)s 
```

我想找到获得“国家奖章”奖的人，并且必须在 1975 年获得该奖项。在不同年份可能还有其他人获得此奖项。

如何使用奖励类型和年份找到此人。所以我可以得到确切的人。

* * *

## 回答 #1

> 赞同：468
> 
> 时间：2012-12-26T15:00:16.077

正确的方法是：

```
db.users.find({awards: {$elemMatch: {award:'National Medal', year:1975}}}) 
```

`$elemMatch`允许您在同一数组元素中匹配多个组件。

没有`$elemMatch`mongo 会寻找某年获得 National Medal 和 1975 年获得某奖项的用户，但不会寻找 1975 年获得 National Medal 的用户。

有关更多信息，请参阅[MongoDB $elemMatch 文档](https://docs.mongodb.com/manual/reference/operator/query/elemMatch/)。有关使用数组查询文档的更多信息，请参阅[阅读操作文档。](http://docs.mongodb.org/manual/core/read-operations/#arrays)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-04-28T06:09:26.490

用于`$elemMatch`查找特定对象的数组

```
db.users.findOne({"_id": id},{awards: {$elemMatch: {award:'Turing Award', year:1977}}}) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-02-14T13:11:26.163

如上面的答案中所解释的另外，要从整个数组中只返回一个字段，您可以将[`projection`](https://docs.mongodb.com/manual/reference/operator/projection/positional/)其用于查找。并使用`$`

```
db.getCollection("sizer").find(
  { awards: { $elemMatch: { award: "National Medal", year: 1975 } } },
  { "awards.$": 1, name: 1 }
); 
```

将返回

```
{
    _id: 1,
    name: {
        first: 'John',
        last: 'Backus'
    },
    awards: [
        {
            award: 'National Medal',
            year: 1975,
            by: 'NSF'
        }
    ]
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-06-11T09:44:49.627

您可以通过两种方式做到这一点：

1.  ElementMatch - `$elemMatch`（如上述答案中所述）

    `db.users.find({ awards: { $elemMatch: {award:'Turing Award', year:1977} } })`

2.  `$and`与_`find`

    `db.getCollection('users').find({"$and":[{"awards.award":"Turing Award"},{"awards.year":1977}]})`

# iphone - 嵌套 UIScrollView 与 UIImageview

> ID：14040563
> 
> 赞同：0
> 
> 时间：2012-12-26T12:27:12.800
> 
> 标签：iphone, objective-c, uiscrollview

在描述我的问题一个非常基本的问题之前，有没有办法可以`UIScrollView`从这个方法返回对象

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 
```

现在我的问题是，我有一个父母，里面`scrollview`有多个孩子（所有水平和分页都启用）。`scrollview`

每个孩子`scrollview`都有一个`ImageView`。我`zoomScale`从服务器获取因素，基于`image`，我必须缩放它，问题是当我尝试缩放里面`scrollView`有一个孩子`image`时，它只缩放最后一个孩子`scrollview`。

所以我认为，我需要找到一种方法，我们可以`scrollview`将上述书面委托的形式返回给我们。

有人知道如何解决这个问题吗？

* * *

这是 UIView 类，我在此添加了滚动视图和图像，并返回了滚动视图代表的图像视图

**示例代码**：

```
 - (id)initWithFrame:(CGRect)frame image:(UIImage *)image
{
    self = [super initWithFrame:frame];
    if (self) {

        self.backgroundColor=[UIColor yellowColor];      
        self.imageView = [[UIImageView alloc] initWithImage:image];
        self.imageView.tag = VIEW_FOR_ZOOM_TAG;
        self.imageView.frame=frame;//CGRectMake(8,8 ,305, 400);
        [self.imageView setContentMode:UIViewContentModeScaleAspectFit];

        self.scrollView = [[UIScrollView alloc] initWithFrame:frame];
        self.scrollView.minimumZoomScale = 0.4f;
        self.scrollView.maximumZoomScale = 2.0f;
        self.scrollView.backgroundColor=[UIColor redColor];
        self.scrollView.zoomScale = 1.0f;
        self.scrollView.contentSize = self.imageView.bounds.size;
        self.scrollView.delegate = self;
        self.scrollView.showsHorizontalScrollIndicator = NO;
        self.scrollView.showsVerticalScrollIndicator = NO;
        [self.scrollView setCanCancelContentTouches:NO];
        [self.scrollView addSubview:self.imageView];
        [self addSubview:self.scrollView];

        NSLog(@"ScrollViewPostion %f",self.scrollView.frame.origin.x);
    }
    return self;
}

#pragma -mark
#pragma -mark ScrollViewDelegates
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return [scrollView viewWithTag:VIEW_FOR_ZOOM_TAG];
} 
```

在我的主 viewController 类中，我正在这样做，但它没有在滚动视图中正确添加所有图像

```
 NSLog(@"Inner scrollFrame and content size %f %f",innerScrollFrame.origin.x,mainScrollView.contentSize.width);
    JoinSeeSubView *subView=[[JoinSeeSubView alloc] initWithFrame:innerScrollFrame image:img];
    [self.mainScrollView addSubview:subView];

        if (i < [self.allUrlArray count]-1) {
            innerScrollFrame.origin.x += innerScrollFrame.size.width;
    }
    i++;
    mainScrollView.contentSize = CGSizeMake(innerScrollFrame.origin.x + innerScrollFrame.size.width, mainScrollView.bounds.size.height); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:36:06.523

我不完全确定问题出在哪里，但是您正在循环浏览多个图像并重新编写`imageView`and`pageScrollView`属性，因此在添加最后一个图像之后，这就是您的指针指向的位置，这就是为什么它只会缩放您的最后一个图片。

最好的方法是创建一个`UIView`处理每个图像及其父滚动视图的子类，然后将该类添加到您的主视图中`UIScrollView`

如果您不想这样做，则必须找到另一种方法来访问每个单独`UIScrollView`的 ，可能使用标签，但不建议这样做

* * *

**编辑 - 一些基本代码**：

```
@interface A : UIView {
    UIScrollView *scrollView
    UIImage View *imageView;

}
// initialization method that gets the image and the CGRect
@end
@implementation A
// implement initialization that loads the UIImage into the imageView, and set scrollView.delegate = self
// implement scroll view delegate method viewForZooming and return the imageView
@end 
```

然后，在您现在正在使用的任何课程上：

```
for (int i = 0; i < imagesCount; i++) {
    UIImage *image = ...; // image i
    CGRect rect = ...; // find rect
    A *subview = [[A alloc] initWithFrame:rect image:image]
    [self.mainScroll addSubview:subview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:41:37.717

如果上述方法对真正有需要的人没有帮助，我以不同的方式解决了这个问题，但不确定这是否是正确的方法。

因此，我没有创建一个扩展 UIView 的新类，而是创建并排列并将内部滚动视图的所有对象存储在该数组中。所以我的代码看起来像

```
 UIScrollView *pageScrollView = [[UIScrollView alloc] initWithFrame:innerScrollFrame];
        pageScrollView.minimumZoomScale = 0.4f;
        pageScrollView.maximumZoomScale = 2.0f;
        pageScrollView.zoomScale = 1.0f;
        pageScrollView.backgroundColor=[UIColor clearColor];
        pageScrollView.delegate = self;
        [pageScrollView addSubview:self.imageview];
        [mainScrollView addSubview:pageScrollView];
        [self.pageScrollViewObjArray addObject:pageScrollView]; 
```

每当我需要访问包含在滚动视图中的特定图像视图时，我都会这样做：-

```
UIScrollView *sv=(UIScrollView*)[self.pageScrollViewObjArray objectAtIndex:swipeCounter];
sv.zoomScale=1.0f; 
```

但正如我之前所说，我不知道这段代码的效率有多高，但是应用程序在商店上架并进行了正确测试已经有一个多月了，但没有任何问题。

# javascript - 使用 JavaScript 获取脚本标签的 innerHtml 返回“未定义”

> ID：14040564
> 
> 赞同：0
> 
> 时间：2012-12-26T12:27:13.453
> 
> 标签：javascript, undefined, innerhtml

我尝试使用 JavaScript 获取脚本标签的 innerHtml。

```
var scripts = document.getElementsByTagName("script");
console.log(scripts.length);
console.log(scripts[0].innerHtml); 
```

此脚本记录`2`and `undefined`，但是为什么找到 2 个脚本时返回 undefined ？我需要获取脚本的 innerHtml。任何帮助将不胜感激:)

**编辑：** 更改`innerHtml`为`innerHTML`它后仍然会在控制台中引发错误：

```
Uncaught TypeError: Cannot read property 'innerHTML' of undefined (line 34) 
```

第 34 行是这样的：

```
var scripts = document.getElementsByTagName("script"); //line 32
for (var i = 0, imax = scripts.length; i < imax; i++) { //line 33
var scriptstring = scripts[i].innerHTML; } // line 34 
```

顺便说一句，该脚本不是嵌入的 .js 文件，而是硬编码在 .html 文件中

**编辑 2：**整个 .html 文件

```
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>

    <script type="text/javascript">
        onmousemove = function test1() {
            window.alert('hello');
        }
    </script>
    <script>
        window.onload = function() {
            var scripts = document.getElementsByTagName("script");

            for (var i = 0, imax = scripts.length; i < imax; i++) {
                var scriptstring = scripts[i].innerHTML;
                scriptstring = scriptstring.replace(/(\r\n|\n|\r)/gm,""); //convert the innerHTML to one line, easier to match

                if (scriptstring.match(/.*(function) (test1).*/) != null) {
                    scripts[i].parentNode.removeChild(scripts[i]);
                }
            }
        }
    </script>

</head>
<body>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T12:32:44.520

```
innerHtml 
```

应该：

```
innerHTML 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T12:32:14.677

应该是`.innerHTML`，不是`.innerHtml`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T12:33:32.270

因为`script`您调用的标签`innerHTML`通过`src`属性声明其来源，而不是在元素本身内部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T12:33:22.513

因为它 `innerHTML`不是`innerHtml`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-03T23:18:16.063

请将此行重写
`for (var i = 0, imax = scripts.length; i < imax; i++)`
为，
`for (var i = 0; i < scripts.length; i++)`
因为
`var scriptstring = scripts[i].innerHTML;`
最后一个索引处的行运行错误（第一个脚本被删除，因此`scripts.length`减少并且`imax`没有改变）。

# linux - 在 Windows 上运行 linux/MacOS 二进制文件？

> ID：14040585
> 
> 赞同：0
> 
> 时间：2012-12-26T12:28:36.247
> 
> 标签：linux, windows, macos

我正在 Windows 上编写一些代码，我想在我的项目中使用一个第三方库。但是这个库的作者只提供了 MacOS 和 linux 的二进制文件，没有源代码。我想知道，是否可以在我的项目中使用这个库？我的意思是，有没有一种方法可以让我在我的 C++ 代码中执行二进制文件。

这似乎是不可能的，但我希望有一个奇迹。

# java - How to get the height of the entered text in a JTextPane?

> ID：14040586
> 
> 赞同：3
> 
> 时间：2012-12-26T12:28:49.217
> 
> 标签：java, swing, jtextpane

Is there a possible way to get the height of an entered text in a `JTextPane`? Pixels would be great but any value that can represent it would do. For example I have entered in the `JTextPane` this:

> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.

Is there a way to get a value for how long it is(not how many lines it is)? I need this because if I enter a picture in one of the lines, the total height changes and I want to be able to know how much it changes exactly. The `JTextPane`, I use has a `StyledDocument` and doesn't have html. I made an `SSCCE` but instead of an image I used two different font sizes to show the difference between the height of the 2 `JTextPanes`.

```
public class Fonts extends JFrame {

    private JPanel contentPane;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Fonts frame = new Fonts();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public Fonts() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);

        JTextPane textPane = new JTextPane();
        textPane.setEditable(false);
        textPane.setFont(new Font("Tahoma", Font.PLAIN, 11));
        StyledDocument doc = textPane.getStyledDocument();
        JTextPane textPane_1 = new JTextPane();
        textPane_1.setFont(new Font("Tahoma", Font.PLAIN, 12));
        textPane_1.setEditable(false);

        StyledDocument doc1 = textPane_1.getStyledDocument();
        String s = "Lorem Ipsum is simply dummy text of the printing and typesetting industry." +
                " Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown" +
                " printer took a galley of type and scrambled it to make a type specimen book. It has survived not" +
                " only five centuries, but also the ";
        try {
            doc.insertString(0, s, null);
            doc1.insertString(0, s, null);
        } catch (BadLocationException e) {
            e.printStackTrace();
        }

        GroupLayout gl_contentPane = new GroupLayout(contentPane);
        gl_contentPane.setHorizontalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addComponent(textPane, GroupLayout.PREFERRED_SIZE, 214, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.RELATED)
                    .addComponent(textPane_1, GroupLayout.PREFERRED_SIZE, 208, GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        gl_contentPane.setVerticalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(Alignment.TRAILING, gl_contentPane.createSequentialGroup()
                    .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(gl_contentPane.createParallelGroup(Alignment.TRAILING, false)
                        .addComponent(textPane_1, Alignment.LEADING)
                        .addComponent(textPane, Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 251, Short.MAX_VALUE))
                    .addContainerGap())
        );
        contentPane.setLayout(gl_contentPane);
    }
} 
```

So is there a way to get the height of the 2 JTextPanes?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T13:03:32.927

Use the approach described [here](http://java-sl.com/tip_text_height_measuring.html) to measure the JEditorPane/JTextPane's height of content for fixed width.

# jquery - 如何在 jquery 中设置配置值？

> ID：14040592
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:29:12.277
> 
> 标签：jquery

我想用配置值在 jQuery 中设置 url 字段。我的代码是

```
 $.ajax({
    type: 'POST',
    url: "<%=  Config.GetInstanceConfig("WS_OtherInstanceURL")%>",
        data: "json",
     }); 
```

但我没有从我的配置文件中获取 URL 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:36:23.307

您可以像这样在隐藏控件中设置 URL 的配置值

```
<input type="hidden" id="configURLValue" value='<%=  Config.GetInstanceConfig("WS_OtherInstanceURL")%>'> 
```

在 javascript 代码中，您可以访问 URL 的隐藏字段值

```
var hiddenFieldValue = $("#configURLValue").val();
 $.ajax({
type: 'POST',
url: hiddenFieldValue,
    data: "json",
 }); 
```

这有效！

# gwt - 禁用 GWT Grid 中的特定列

> ID：14040594
> 
> 赞同：2
> 
> 时间：2012-12-26T12:29:30.877
> 
> 标签：gwt

有什么方法可以禁用 gwt 数据网格中的特定列..类似于

```
myColumn.setDisable(true); 
```

我的目的是防止`SelectionCell`在数据网格中选择 a。那应该是不可编辑的..

有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:45:33.647

你有两个选择：

A. 您可以[创建一个自定义单元格](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells)，在某些条件下将元素设置为禁用。这是最接近你想要的，但它也可能让你的用户有点困惑——他们可能认为你的桌子坏了。

B. 您可以删除带有 SelectionCell 的列，并在其位置插入带有 TextCell 的列。

# php - 我们如何在 PHP 生成的 CSV 文件上添加空格？

> ID：14040596
> 
> 赞同：0
> 
> 时间：2012-12-26T12:29:36.240
> 
> 标签：php, mysql, csv

我正在创建一个 csv 文件，如下所示

```
 $user_rep=Engine_Db_Table::getDefaultAdapter()->select()
                  ->from('engine4_users',array('user_id','email','displayname'))
                 ->query()->fetchAll();

   $csv_output .= "UserId Email Name"; 
    $csv_output .= "\n"; 

    foreach($user_rep as $key)
    {
        $csv_output .=$key['user_id']." ".$key['email']." ".$key['displayname'];
        $csv_output .= "\n"; 
    }

$filename = $file."_".date("d-m-Y_H-i",time()); // il nome del file sara' composto da quello scelto all'inizio e la data ed ora oggi

 header("Content-type: application/vnd.ms-excel");
 header("Content-disposition: csv" . date("Y-m-d") . ".csv");
 header( "Content-disposition: filename=".$filename.".csv");
 print $csv_output;
exit; 
```

我正在获取 csv 文件。但我的数据上确实有空格作为名称。所以我越来越喜欢

![在此处输入图像描述](../Images/01ec0801d5795df7dab069f4222b6882.png)

实际上，名称是“测试智能代码”。我想在一个列上。我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:32:37.853

尝试像下面这样放置 commo (,)

```
$csv_output .=$key['user_id'].",".$key['email'].",".$key['displayname']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:31:56.433

其实，`CSV`是一个`Comma Separated File`。对于写入文件，您可以使用[fputcsv](http://php.net/fputcsv)

如果你想直接输出它，只需使用：

```
$buffer = fopen('php://temp', 'r+');
fputcsv($buffer, $user_rep);
rewind($buffer);
$csv = fgets($buffer);
fclose($buffer);

echo $csv; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:37:52.927

您可以对列使用其他分隔符。现在您使用空格，然后 Excel 用空格分隔所有文本。

您可以将文本包含在引号中，然后 Excel 可以将其解析为一个字段。

例如试试这个：

```
$csv_output .= "\"".$key['user_id']."\" \"".$key['email']."\" \"".$key['displayname']."\""; 
```

# android - 在图像视图的触摸事件上填充两个图像叠加层，如搜索栏

> ID：14040597
> 
> 赞同：5
> 
> 时间：2012-12-26T12:29:45.470
> 
> 标签：android, android-imageview, seekbar, gauge

触摸蓝色图像时有两个黑色和蓝色图像，它应该像进度一样填充，我使用多个剪切图像而不使用画布但没有`smoothness`接触，例如[100 Pushups 应用程序](https://play.google.com/store/apps/details?id=alexcrusher.just6weeks.pushups&feature=search_result#?t=W251bGwsMSwxLDEsImFsZXhjcnVzaGVyLmp1c3Q2d2Vla3MucHVzaHVwcyJd)。

实际上，我正在尝试实现类似于上面提到的 100 Pushups 应用程序，我有一个 [链接](http://blog.publicobject.com/2010/04/shush-ringer-restorer-update.html)，但这是使用画布实现的，我想使用图像来实现，我谷歌但没有运气，任何类似于该应用程序的链接或教程（ 100个俯卧撑）？

![在此处输入图像描述](../Images/94ce33b99e02a2d7688547bdd2eed576.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T21:02:09.933

这是我使用剪辑路径想出的东西。我正在使用以下图像（编码器颜色），其中背景是纯色的，前景是透明背景上仅包含蓝色圆圈的。第一个背景图像被绘制到屏幕上，然后设置剪辑路径，以便在其顶部正确绘制进度图像，前景一个。

背景图片; [http://i.imgur.com/Sf6kg.png](http://i.imgur.com/Sf6kg.png)
前景图片；[http://i.imgur.com/Svtoh.png](http://i.imgur.com/Svtoh.png)

和代码；

```
private class ProgressView extends View {

    private Bitmap bgBitmap;
    private Bitmap fgBitmap;
    private RectF fullRect = new RectF();
    private Path clipPath = new Path();

    public ProgressView(Context context) {
        super(context);
        bgBitmap = BitmapFactory.decodeResource(
                                   context.getResources(), R.drawable.bg);
        fgBitmap = BitmapFactory.decodeResource(
                                   context.getResources(), R.drawable.fg);
    }

    @Override
    public void onDraw(Canvas c) {
        fullRect.right = getWidth();
        fullRect.bottom = getHeight();

        c.drawBitmap(bgBitmap, null, fullRect, null);

        float angle = SystemClock.uptimeMillis() % 3600 / 10.0f;

        clipPath.reset();
        clipPath.setLastPoint(getWidth() / 2, getHeight() / 2);
        clipPath.lineTo(getWidth() / 2, getHeight());
        clipPath.arcTo(fullRect, -90, angle);
        clipPath.lineTo(getWidth() / 2, getHeight() / 2);
        c.clipPath(clipPath);

        c.drawBitmap(fgBitmap, null, fullRect, null);

        invalidate();
    }   
} 
```

用体面的图像替换我的临时图像并以更合适的方式更新角度应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:56:24.793

它将是一个自定义视图，它将处理`onTouchEvent()`方法并在用户触摸视图时重绘。

该`onDraw()`方法将检查如下内容：

```
if(mIsBeingTouched){
  //set colour to touched
}
doDraw(canvas);
///.... 
```

所以当用户触摸视图时，我会增加一个计数，然后增加弧计数。

```
final float arcDistance = mCurrentCount * 3.6; //Based on a max of 100
canvas.drawArc(mBoundsRectF, 0f, mCurrentCount, mPaint); 
```

然后根据计数得出。

# java - Talend Studio 中的连接问题

> ID：14040598
> 
> 赞同：0
> 
> 时间：2012-12-26T12:29:52.883
> 
> 标签：java, talend

我是 Talend Studio 的新手。我设计了一项将数据从 phpmysql 转换为 phpMysql 本身的工作。出现以下错误：

```
java.net.ConnectException: connect: Address is invalid on local machine, or port is not valid on remote machine
......
Exception in component tMysqlOutput_1
java.lang.NullPointerException
at routines.system.RunStat.sendMessages(RunStat.java:286)
[statistics] connecting to socket on port 4041 
```

但是，控制台错误中的端口 4041 在不同的运行轮次中显示不同。实际端口是 3306。这个连接问题可能是什么原因？这是因为安装错误吗？请帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T13:04:52.903

统计端口与您的数据无关。顾名思义，Talend 本身使用此套接字将统计信息发送到 Talend Enterprise Engine 执行引擎（基本上是高级版）

# iphone - 向 iOS 故事板添加比视图控制器尺寸更多的原型单元格？

> ID：14040599
> 
> 赞同：5
> 
> 时间：2012-12-26T12:29:53.050
> 
> 标签：iphone, ios, uitableview, storyboard, prototype

我正在开发一个带有故事板的 iOS 项目，但遇到了一个我无法轻易解决的问题。

它是一个基本的视图控制器，包含一个带有自定义单元格的表格视图。我有 5 个高度在 70 到 160 像素之间变化的原型单元，这很好 - 但我现在需要添加更多原型，我的问题是它们没有屏幕空间 - 所以我无法进行设计.

我想会有一种方法来布局情节提要，这样原型单元格就可以显示在我想要的位置，而不是在视图控制器内受到视觉上的限制——委婉地说，这是相当有限的，但我想不通怎么做，文档似乎避免了这个问题。

这张图希望能澄清——我想添加新的原型，但它们不适合 VC 框架，所以我不能编辑它们:-(

![带有动态原型单元的情节提要](../Images/8ffc5abff3459067d0dbd8cd351eece1.png)

我确定我遗漏了一些明显的东西......但它可能是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T12:50:17.460

您可以在 Interface Builder 中简单地滚动该表视图。您将无法一次看到它们，但您可以上下滚动以使其他原型可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T12:53:27.047

在情节提要中选择 tableview 的一个单元格，然后在鼠标/触控板上滚动以显示隐藏的单元格！

如果您只选择视图控制器，您将无法滚动表格视图。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T12:46:22.200

增加表格视图的高度。然后使用 Size Inspector 将值 y 坐标更改为某个负值。

# asp.net - 在 .aspx 页面上动态设置复选框的 id 属性

> ID：14040600
> 
> 赞同：1
> 
> 时间：2012-12-26T12:29:55.130
> 
> 标签：asp.net, data-binding

我想动态设置复选框的 id 属性，如下所示。
将有另一个控件将复选框放在右侧，也通过数据绑定。我可以那样做吗？或者你有什么建议吗？

```
<% System.Data.DataTable dt = getData_SAPApp();
foreach (System.Data.DataRow dr in dt.Rows) { %>
   var valueID = <%=dr["id"].ToString()%>;
   <asp:CheckBox ID=valueID Text='<%=dr["AppName"].ToString()%>' runat="server" />
<% }%> 
```

# view - 未调用 CScrollView OnDraw

> ID：14040602
> 
> 赞同：0
> 
> 时间：2012-12-26T12:30:11.167
> 
> 标签：view, mfc, activex, draw

我有一个派生自 CScrollView 的类，并且我继承了 OnDraw 方法。除非我调整大小，否则不会调用 OnDraw 方法。需要设置任何特殊属性或以任何方式触发 OnDraw 方法而不进行调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:52:42.140

您需要两个函数调用。1) Invalidate 或 InvalidateRect 2) UpdateWindow

Invalidate 函数会将您的整个视图标记为需要更新（重绘） InvalidateRect 可用于将视图的一部分标记为需要更新。

一旦您调用更新窗口，如果您之前调用了 Invalidate，则整个视图都会更新，或者如果您之前对 InvalidateRect 进行了一次或多次调用，则将重绘窗口的所有标记部分。

# r - 更改列表中元素的类别并使用元素名称保存

> ID：14040603
> 
> 赞同：1
> 
> 时间：2012-12-26T12:30:11.330
> 
> 标签：r, list, rename, spatial

`im`我有一个“ ”类型的元素列表

```
mylist
$sp1
$sp2
$sp3 
```

我想将它们转换为类“ `SpatialGridDataFrame`”的元素列表

这适用于类“”的单个对象`im`：

```
a <- mylist$sp1
b <- as(a, "SpatialGridDataFrame") 
```

然后我想将新列表 b 中的每个元素保存为 .TIFF 文件，列表中每个元素的名称（sp1.TIFF、sp2.TIFF 等）

这也适用于包“rgdal”中的单个对象：

```
writeGDAL(b, "sp1.TIFF") 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:04:27.903

您可以使用`lapply`循环遍历`names`您的列表

```
mylist.df <- lapply(names(mylist), 
                       function(x) {
                            b <- as(mylist[[x]], "SpatialGridDataFrame")
                            writeGDAL(b,paste(x,".TIFF",sep=''))
                            b
                       }) 
```

在这里，您可以转换列表并保存对象。

# sphinx4 - Sphinx 4：相同的输入每次产生不同的结果

> ID：14040604
> 
> 赞同：1
> 
> 时间：2012-12-26T12:30:19.580
> 
> 标签：sphinx4

我想让 Sphinx4 具有确定性。每次我在单元测试中提供相同的输入文件时，我都希望它能够识别相同的单词（具有相同的时间戳）。我尝试过查看源代码并修复对 的所有调用`new Random()`，但这似乎还不够。我错过了什么？还有哪些其他随机性来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:46:19.027

我与 Sphinx 开发人员进行了交谈。一方面，使用 SimpleAcousticScorer 而不是 ThreadedAcousticScorer 很重要。也可能是 SimpleActiveListFactory 而不是 PartitionActiveListFactory。但即使这样也不够。简而言之，我们无法弄清楚。但如果我取得进展，我会在这里发帖。

# objective-c - 只允许在一个视图控制器上自动旋转

> ID：14040605
> 
> 赞同：5
> 
> 时间：2012-12-26T12:30:21.953
> 
> 标签：objective-c, ios, uiviewcontroller

在我的项目中，我只允许纵向旋转，但对于一个`ViewController`我想启用横向。我将其呈现`ViewController`为`ModalViewController`，我尝试过使用方法`- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation`或 iOS 6 方法，`-(NSUInteger) supportedInterfaceOrientations`但实际上没有任何效果。尽管调用了这些方法，但视图没有旋转。

在此之后，我尝试通过 myslef 旋转它并收听这些通知：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(didRotate:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil]; 
```

但即使我能够手动旋转`view`in 方法`didRotate`：它非常混乱，我无法旋转`StatusBar`.

我真的很想使用标准方法`shouldAutorotateToInterfaceOrientation`，但我不知道如何。任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-15T08:34:00.853

Add this in your app delegate.m

```
# pragma mark - Rotation

- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    if ([self.window.rootViewController isKindOfClass:[MVYSideMenuController class]]) {

        // Get topmost/visible view controller
        UIViewController *currentViewController = [self.window.rootViewController.childViewControllers lastObject];
        // Check whether it implements a dummy methods called canRotate
        if ([currentViewController respondsToSelector:@selector(canRotate)]) {
            // Unlock landscape view orientations for this view controller
            return UIInterfaceOrientationMaskAllButUpsideDown;
        }
    }

    // Only allow portrait (standard behaviour)
    return UIInterfaceOrientationMaskPortrait;
}
-(void)canRotate
{
} 
```

and then add this method

```
-(void)canRotate
{
    // just define the method, no code required here
} 
```

in every ViewController (.m files) where you want to provide rotation. You can also include here `-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation` method to react when the device rotates:

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    switch (orientation) {
        case 1:
        case 2:
            //NSLog(@"portrait");
            break;

        case 3:
        case 4:
            //NSLog(@"landscape");
            break;
        default:
            //NSLog(@"other");
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:18:01.143

为需要旋转的屏幕子类化导航控制器。

在他们中

```
// Older versions of iOS (deprecated) if supporting iOS < 5
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation    {
return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
}

// iOS6
 - (BOOL)shouldAutorotate {
return YES;
 }

 // iOS6
 - (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskLandscape;
} 
```

这将覆盖在 iOS 6 的摘要页面中设置的旋转方法。

在 iOS 6 中，视图控制器只查看父控制器或根控制器的旋转方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T21:22:26.103

你不能像这样在 viewDidLoad 和 viewWillAppear 中调用 shouldAutoRotateToInterfaceOrientation：

```
[self shouldAutorotateToInterfaceOrientation]; 
```

如果它在您的 ViewController 中，则应该调用该方法

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T12:39:37.240

![在此处输入图像描述](../Images/e4d0f094e16d7147561bbbc00da933ec.png)

实现在所有控制器中，并在特定控制器所需的 interfaceOrientation 上返回

对所有人

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation{

 return YES;
} 
```

景观

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

肖像

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));
} 
```

# php - 如何在 MIPS 平台的 mini-httpd 服务器中安装 PHP？

> ID：14040607
> 
> 赞同：0
> 
> 时间：2012-12-26T12:30:27.360
> 
> 标签：php, apache, apache2, mips, mini-httpd

我有一个 MIPS 板，它有 mini-httpd 服务器。我想在没有 MySQL 的情况下安装 PHP [仅对 PHP 的基本支持就足够了，但 PHP 应该在浏览器上工作]。我需要交叉编译 MIPS 的 PHP 源代码吗？或者有没有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:06:27.130

我创建了一个 mips 工具链并使用 lighttpd 服务器而不是 mini-httpd ...解决了我的问题 :)

# facebook - 用户墙上的 fb 应用程序帖子

> ID：14040609
> 
> 赞同：0
> 
> 时间：2012-12-26T12:30:38.440
> 
> 标签：facebook, facebook-graph-api, webpage

如何制作一个像这样运行的 fb 应用程序：

当用户访问 MY 网站的页面时。`http://www.mywebsite.com/page1.php`它将要求用户确认 Facebook 应用程序以使页面的内容能够显示，然后应用程序将在用户墙上发布用户在我的页面上访问的页面！？

任何想法，任何脚本，任何一切，我什至不知道如何开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:39:29.900

1.  首先，当用户进入您的网站时，要求他使用 facebook 登录（参考：[登录](https://developers.facebook.com/docs/concepts/login/)）。

2.  成功授权后，只需使用[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)并将当前页面的链接发布到他的墙上。

# c - 结构内部结构

> ID：14040612
> 
> 赞同：13
> 
> 时间：2012-12-26T12:31:01.000
> 
> 标签：c, struct, compiler-errors, typedef

我必须创建一个人，每个人都应该有一个冰箱。这是最好的方法吗？如果是这样，我做错了什么？提前致谢。

```
typedef struct {
 int age;
 struct FRIDGE fridge;
} PERSON;

typedef struct {
 int number;
} FRIDGE;

FRIDGE fr;
fr.number=1;

PERSON me;
me.name=1;
me.fridge = fr; 
```

这给了我以下错误：

> 错误：字段“冰箱”的类型不完整

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-26T12:33:23.897

`struct FRIDGE`不同于`FRIDGE`.

您需要在其他结构中使用类型`FRIDGE`。

```
typedef struct {
 int age;
 FRIDGE fridge;
} PERSON; 
```

或将您的冰箱定义为`struct FRIDGE`

```
struct FRIDGE {
 int number;
}; 
```

此外，可能必须在使用之前定义结构（例如，在人上方）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T12:33:40.670

`FRIDGE`删除所有警告和错误后，您必须使用 , 的成员。`FRIDGE`之前声明`PERSON`

`me.fridge.number = 1`

**编辑**：我发现了这个错误。您正在使用匿名结构，因此您不应使用`struct`关键字，而应使用`typedef`ed 名称。

更改`struct FRIDGE fridge` 为`FRIDGE fridge`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:35:24.427

要么做前向声明`struct FRIDGE;`

或者，

`FRIDGE`在struct中使用它之前给出定义`PERSON`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-12T06:27:01.057

在你的结构中使用 typedef 会让你陷入这种纠结。struct 标签标识符前面的 struct 关键字是应该如何使用结构的，这也更明确且更易于阅读。

有一篇长而好的博客文章，所有细节都在这里 [https://www.microforum.cc/blogs/entry/21-how-to-struct-lessons-on-structures-in-c/](https://www.microforum.cc/blogs/entry/21-how-to-struct-lessons-on-structures-in-c/)

但简而言之，您真正想要做的就是像这样省略 typedef

```
struct FRIDGE;  // This is a forward declaration, now an incomplete type

struct PERSON{
 int age;
 struct FRIDGE fridge;
};

struct FRIDGE{
 int number;
};

struct FRIDGE fr;
fr.number=1;

struct PERSON me;
me.name=1;
me.fridge = fr; 
```

Linus Torvalds 也讨论过一次，非常可靠的理由是为什么在所有结构上使用 typedef 会令人困惑和糟糕。

[https://yarchive.net/comp/linux/typedefs.html](https://yarchive.net/comp/linux/typedefs.html)

# xml - 从观察者更新布局

> ID：14040614
> 
> 赞同：1
> 
> 时间：2012-12-26T12:31:05.253
> 
> 标签：xml, magento, layer, observers

我正在使用滑块块 Magento，我正在尝试从 Observer 生成和更新我的布局：

> 事件：controller_action_layout_load_before

这是我的观察者方法：

```
 $myXml="<".$page.">";
    $myXml.='<reference name="'.$posH.'">';
    $myXml.='<block type="sliderboard/slider" name="sliderboard" '.$posV.'="-" template="sliderboard/myview.phtml"/>';
    $myXml.='</reference>';
    $myXml.="</".$page.">";

    $layout = $observer->getEvent()->getLayout();
    //$layout=Mage::getSingleton('core/layout');
    //Zend_Debug::dump($myXml); die();          
    $layout->getUpdate()->addUpdate($myXml);
    $layout->getUpdate()->load();
    $layout->generateXml();
    $layout->generateBlocks(); 
```

事实是，这是我从“$myXML”变量中得到的：

```
<cms_page>
<reference name="content">
<block type="sliderboard/slider" name="sliderboard" after="-" template="sliderboard/myview.phtml"/>
</reference>
</cms_page> 
```

它不起作用！但是当我试图在我的布局中复制/过去这个 xml 时，它可以工作！Xml 代码是正确的！我需要帮助
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:36:56.360

```
$layout->getUpdate()->addUpdate($myXml); 
```

addUpdate() 不适用于“Actions”，所以我们只能放置这部分布局：

```
<reference name="content">
<block type="myblock/block" name="sliderboard" after="-" template="mytemp/tmplate.phtml"/>
</reference> 
```

并在（cms、类别和产品）之间进行选择，我们使用：

```
$action = $observer->getEvent()->getAction();
$fullActionName = $action->getFullActionName(); 
```

我们将 $fullActionName 与：cms_index_index / catalog_category_view /catalog_product_view 进行比较

如果它等于我们需要的东西，我们将继续：

```
$page="cms_index_index";    
switch ($slider->getSldPage()){

    case 'product':  $page="catalog_product_view";  
        break;
    case 'category': $page="catalog_category_view";         
        break;
}

$myXml.='<reference name="'.$posH.'">';
$myXml.='<block type="sliderboard/slider" name="sliderboard" '.$posV.'="-" template="sliderboard/myview.phtml"/>';
$myXml.='</reference>';

$action = $observer->getEvent()->getAction();
$fullActionName = $action->getFullActionName();
$layout = $observer->getEvent()->getLayout();

if ($fullActionName==$page)
{
    $layout->getUpdate()->addUpdate($myXml);
    $layout->generateXml();         
} 
```

希望这会有所帮助:)

现在，我正在尝试选择要展示的类别和产品，如果您有想法的话。

# ruby-on-rails - 为什么这个 Rails 操作返回一个字符串而不是 JSON？

> ID：14040615
> 
> 赞同：2
> 
> 时间：2012-12-26T12:31:18.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在从 Rails 控制台访问我的 Rails 操作之一：

```
> @consumer = OAuth::Consumer.new(
>   x,
>   x,
>   site: "http://localhost:3000"
> )
> request = @consumer.create_signed_request(:get,"/get_user_info?email=x")
> uri = URI.parse("http://localhost:3000")
> http = Net::HTTP.new(uri.host, uri.port)
> http.request(request).body
=> "{\"first_thing\":\"Nick\",\"second_thing\":\"2012-12-26T11:41:11Z\",\"third_thing\":\"2012-12-26T11:40:03Z\"}"
> http.request(request).body.class
=> String 
```

该操作应该返回 JSON 中的哈希，而不是字符串。以下是动作的结束方式：

```
render json: {
    first_thing: x,
    second_thing: x,
    third_thing: x
} 
```

为什么这会以字符串的形式出现？我正在使用 Rails 3.2.0 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:34:49.920

您将始终从 HTTP 请求中获取字符串。`render :json`只是将哈希转换为 JSON 字符串。

你需要`JSON.parse`在字符串上做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T12:36:37.623

它返回 JSON，因为整个 HTTP 消息都是基于字符串的。因此，要在控制台中获取 JSON 对象，您需要调用`JSON.parse`响应正文。

```
JSON.parse(http.request(request).body) # => {
#    first_thing: x,
#    second_thing: x,
#    third_thing: x
#} 
```

# android - 根据指南处理“向上”导航的正确方法

> ID：14040620
> 
> 赞同：7
> 
> 时间：2012-12-26T12:31:33.917
> 
> 标签：android, android-intent, navigation, back-stack

我完全同意下面的导航

![在此处输入图像描述](../Images/880b66a61e9a04b02b30b973d21edf54.png)

想象一下 Book 详细信息是在 BookDetailActivity 的不同实例中创建的。

book2详细信息中按下之前的堆栈是：

*   BookDetailActivity (Book 2 - 你在这里)
*   BookDetailActivity (书 1)
*   全部图书活动

如果我遵循[指南](http://developer.android.com/training/implementing-navigation/ancestral.html)，我将使用：

```
 Intent parentActivityIntent = new Intent(this, AllBooksActivity.class);
        parentActivityIntent.addFlags(
                Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(parentActivityIntent);
        finish(); 
```

但是这段代码最大的问题是BookDetailActivity（Book 1）还活着！

在“向上”之后按返回按钮将显示第 1 册的详细信息。

我怎样才能杀死原始和我按下的活动`BookDetailActivity`之间的所有内容？`AllBooksActivity`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:43:56.777

[相关指南文章](http://developer.android.com/training/design-navigation/ancestral-temporal.html#ancestral-navigation)指出以下内容：

> 实施注意事项：作为最佳实践，在实施 Home 或 Up 时，请确保清除所有后代屏幕的后台堆栈。对于 Home，后堆栈上唯一剩余的屏幕应该是主屏幕。对于向上导航，当前屏幕应该从后退堆栈中移除，除非后退导航跨屏幕层次结构。您可以一起使用 FLAG_ACTIVITY_CLEAR_TOP 和 FLAG_ACTIVITY_NEW_TASK 意图标志来实现此目的。

既然你这样做了， BookDetailActivity1 应该由 FLAG_ACTIVITY_CLEAR_TOP[关闭](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)。如果它可以活着并在按下 Back 时显示，唯一的方法是它是否会在 AllBooksActivity 之前启动。

至于不需要[FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)（由*android developer* 's answer建议）：

> 使用此标志时，如果您现在正在启动的 Activity 已经在运行任务，则不会启动新的 Activity；相反，当前任务将简单地以其上次所处的状态被带到屏幕的前面。

...因此，如果您的活动存在，它将不会启动新任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T15:20:54.973

好的，有多种方法可以做这样的事情。这是其中之一：

但是，我建议不要像打开新活动一样打开第一个活动，只需完成当前活动和之前的活动即可。

为此，请使用 startActivityForResult 调用每个新活动，并将每个活动的结果设置为表示您希望返回第一个活动的某个值。

您甚至可以将该值设置为类规范名称，并创建一个将自动处理所有这些请求的基本活动，这样您就不需要处理它了。

无论如何，我认为您使用 Intent.FLAG_ACTIVITY_NEW_TASK 犯了一个错误，因为它创建了一个新任务，所以前一个任务仍然存在。尝试阅读可用的意图标志以获取更多信息：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# dart - 将 Web 组件添加到 DOM

> ID：14040624
> 
> 赞同：1
> 
> 时间：2012-12-26T12:32:00.303
> 
> 标签：dart, dart-webui

我创建了扩展 DIV 元素的 dart Web 组件。在 DART 中，我可以向 DOM 添加一个 DIV 元素：

```
DivElement div = new DivElement();
document.body.elements.add(div); 
```

[飞镖 html api](http://api.dartlang.org/docs/bleeding_edge/dart_html/DivElement.html)

我可以对我的 Web 组件做同样的事情吗？什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:32:32.103

Web UI 规范有一个关于 Web 组件实例化的部分：

[http://www.dartlang.org/articles/dart-web-components/spec.html#instantiation](http://www.dartlang.org/articles/dart-web-components/spec.html#instantiation)

> ... 在 Dart 中调用 new FooComponent.forElement(elem)。我们不推荐使用这种方法，因为这个构造函数调用不能单独使用——它需要几个设置步骤。我们可能有运行时库来让这在未来变得更容易......

# binary - 如何以小于 (0.01) 的误差计算 21.36 的二进制等值

> ID：14040625
> 
> 赞同：1
> 
> 时间：2012-12-26T12:32:06.380
> 
> 标签：binary

> **可能重复：**
> [如何从十进制数转换为 IEEE 754 单精度浮点格式？](https://stackoverflow.com/questions/2404675/how-do-i-convert-from-a-decimal-number-to-ieee-754-single-precision-floating-poi)

如何以小于 (0.01) 的误差计算 21.36 的二进制等值

我已将 21 转换为二进制 10101，将 36 转换为二进制 100100，但现在我将如何进行，请帮助一些人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:46:46.653

分数部分不应转换为数字本身，而应转换为分数。将 36 转换为二进制与将 0.36 转换为二进制不同。

将分数转换为二进制的工作方式相同，但不是使用 1、2、4、8 等，而是使用 1/2、1/4、1/8 等。

表示 0.36：

```
0 times 1/2 (0.5)
1 times 1/4 (0.25), leaves 0.11
0 times 1/8 (0.125)
1 times 1/16 (0.0625), leaves 0.0475
1 times 1/32 (0.03125), leaves 0.01625
1 times 1/64 (0.015625), leaves 0.000625 
```

这会使您低于 0.01，因此足够接近 21.36 的数字的完整二进制表示是：

```
10101.010111 
```

该数字的十进制精确值为 21.359375。

# regex - 正则表达式帮助：抓住这个：|TrxId=475665|

> ID：14040629
> 
> 赞同：0
> 
> 时间：2012-12-26T12:32:15.393
> 
> 标签：regex

例如我有一个字符串：

```
MsgNam=WMS.WEATXT|VersionsNr=0|TrxId=475665|MndNr=0257|Werk=0000|WeaNr=0171581054|WepNr=|WeaTxtTyp=110|SpraNam=ru|WeaTxtNr=2|WeaTxtTxt=100 111| 
```

我想抓住这个：`|TrxId=475665|`

在`TrxId=`它可以是任何数字和任何数量之后，因此正则表达式也应该捕获：

`|TrxId=111333|`并且`|TrxId=0000011112222|`和`|TrxId=123|`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:34:17.360

`TrxId=(\d+)`

这将给出一个具有 TrxId 的组 (1)。

PS：使用全局修饰符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T12:34:05.023

正则表达式应该看起来像这样：

```
TrxId=[0-9]+ 
```

它将匹配`TrxId=`后跟至少一位数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:37:10.053

Python中的示例解决方案：

```
In [107]: data = 'MsgNam=WMS.WEATXT|VersionsNr=0|TrxId=475665|MndNr=0257|Werk=0000|WeaNr=0171581054|WepNr=|WeaTxtTyp=110|SpraNam=ru|WeaTxtNr=2|WeaTxtTxt=100 111|'

In [108]: m = re.search(r'\|TrxId=(\d+)\|', data)

In [109]: m.group(0)
Out[109]: '|TrxId=475665|'

In [110]: m.group(1)
Out[110]: '475665' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:48:37.313

你知道你的分隔符是什么样子的，所以你不需要正则表达式，你需要`split`. 这是 Perl 中的一个实现。

```
use strict;
use warnings;

my $input = "MsgNam=WMS.WEATXT|VersionsNr=0|TrxId=475665|MndNr=0257|Werk=0000|WeaNr=0171581054|WepNr=|WeaTxtTyp=110|SpraNam=ru|WeaTxtNr=2|WeaTxtTxt=100 111|";

my @first_array = split(/\|/,$input); #splitting $input on "|"

#Now, since the last character of $input is "|", the last element
#of this array is undef (ie the Perl equivalent of null)
#So, filter that out.

@first_array = grep{defined}@first_array;

#Also filter out elements that do not have an equals sign appearing.

@first_array = grep{/=/}@first_array;

#Now, put these elements into an associative array:

my %assoc_array;

foreach(@first_array)
{
  if(/^([^=]+)=(.+)$/)
  {
    $assoc_array{$1} = $2;
  }
  else
  {
    #Something weird may be happening...
    #we may have an element starting with "=" for example. 
    #Do what you want: throw a warning, die, silently move on, etc.
  }
}

if(exists $assoc_array{TrxId})
{
  print "|TrxId=" . $assoc_array{TrxId} . "|\n";
}
else
{
  print "Sorry, TrxId not found!\n";
} 
```

上面的代码产生了预期的输出：

```
|TrxId=475665| 
```

现在，显然这比其他一些答案更复杂，但它也更强大一点，因为它还允许您搜索更多键。

如果您的密钥出现多次，则此方法确实存在潜在问题。在这种情况下，很容易修改上面的代码来收集每个键的值的[数组引用。](http://perldoc.perl.org/perlref.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T12:49:38.240

```
/MsgNam\=.*?\|(TrxId\=\d+)\|.*/ 
```

例如在 perl 中：

```
$a = "MsgNam=WMS.WEATXT|VersionsNr=0|TrxId=475665|MndNr=0257|Werk=0000|WeaNr=0171581054|WepNr=|WeaTxtTyp=110|SpraNam=ru|WeaTxtNr=2|WeaTxtTxt=100111|";
$a =~ /MsgNam\=.*?\|(TrxId\=\d+)\|.*/;
print $1; 
```

将打印 TrxId=475665

# java - 用Java实现的最佳字符串匹配算法？

> ID：14040646
> 
> 赞同：3
> 
> 时间：2012-12-26T12:33:53.143
> 
> 标签：java, string-matching, similarity

我想在 Java 中实现一个算法来找到最近的相似字符串。

我在**mysql**数据库 中有**station_names ，例如 -** **23 ST、233 ST、21 ST、14 St Times Sq、24 ST**

 ****如果用户输入像**23rd station**这样的搜索字符串，那么我应该返回**23 ST 和 233 ST**或者如果用户输入像**Times Square**那么结果应该是**14 St Times Sq**。

我在互联网上找到了很多算法，但我对使用哪一种感到困惑。

**您能否建议我可以在 Java 中实现的最佳算法？**

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:54:04.577

要回答您的问题，通常没有最佳算法，只有在您的特定情况下效果最佳的算法。

您将需要定义一个或多个指标来衡量输入与数据库中的字符串之间的差异，然后按分数对结果进行排序（请参阅[字符串指标](http://en.wikipedia.org/wiki/String_metric)）。

问题是最相似的字符串并不总是最接近的地址。这就是为什么我说你必须定义自己的指标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:40:39.813

有很多可能的方法来做到这一点。例如，您可能会说 that `21 ST`is close to `23rd station`than `233 ST`。你必须弄清楚你想要什么，并找到最适合它的方法。

您可能需要多种方法，然后对结果进行评分。这就是我会做的。

您可以通过提供大样本数据测试套件并找出哪种方法（或组合）为您提供最高成功率来测试不同的方法。****

# java - 画布仅在调整 JFrame 大小后出现

> ID：14040650
> 
> 赞同：0
> 
> 时间：2012-12-26T12:34:13.243
> 
> 标签：java, resize, swt, jframe, java-canvas

我有以下JPanel：

```
import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.JPanel;

public class Watcher extends JPanel {
    private static final long serialVersionUID = 1L;
    final CardLoader canvas;
    private AvatarLoader avatarPic; 
    private String username;

    public Watcher(String username){    
        this.username = username;
        avatarPic = new AvatarLoader(username);

        canvas = new CardLoader();
        canvas.setSize(new Dimension(200, 135));

        this.setLayout(new BorderLayout());
        this.add(avatarPic, BorderLayout.CENTER);
        this.add(canvas, BorderLayout.SOUTH);

        canvas.setVisible(true);
    }

    public void load(){
        canvas.connect();
        canvas.setGamerCardURL(this.username);
    }
} 
```

Canvas 是一个 SWT 浏览器，但它仅在调整我的 JFrame 大小后才会出现。

我尝试了所有与 revalivate()/validate() 和 repaint() 的组合。

它应该直接出现。希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:05:15.853

我刚刚做了一个工作，我在 JFrame 可见后更改它的大小。所以它“调整大小”并且画布是可见的；）

# java - 找不到添加的jar文件

> ID：14040652
> 
> 赞同：0
> 
> 时间：2012-12-26T12:34:20.840
> 
> 标签：java, build

我想添加 Gson jar 文件，这是我对 build.xml 所做的（重要部分）：

```
<property name="libs.dir" location="web/WEB-INF/lib" />
<path id="build.classpath">
    <fileset dir="${libs.dir}/gson">
        <include name="*.jar" />
    </fileset>

    <fileset dir="${libs.dir}/tomcat">
        <include name="*.jar" />
    </fileset>
</path>

<javac srcdir="${src}" destdir="${build}" includeantruntime="false">
    <classpath refid="build.classpath" />
</javac> 
```

编译很顺利，但是当我尝试启动应用程序时，它一直说找不到 com.google.gson

```
java.lang.NoClassDefFoundError: com/google/gson/Gson 
```

我尝试添加其他几个罐子，每个罐子都说找不到类。但是，tomcat jar 正在工作。有什么我想念的吗？

# excel - 打开由 Java POI 创建的 Excel 工作表时出现错误消息

> ID：14040655
> 
> 赞同：2
> 
> 时间：2012-12-26T12:34:28.943
> 
> 标签：excel, apache-poi

使用 Java POI 生成 excel 表并打开新创建的 Excel 文件后，我收到一个消息框

```
Excel found unreadable content in "abc.xlxs" .Do you want to recover the contents of this workbook?If you trust the source of this workbook, click 'yes'. 
```

当我点击“是”时，我会收到这样的消息

```
Excel was able to open the file by repairing or removing the unreadable content 
```

之后，我可以查看工作表中的内容。打开它时如何删除所有这些类型的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:53:03.357

您应该检查是否使用了正确的 api：

*   对于 .xls 文件，您必须使用 HSSF。
*   对于 .xlsx 文件，您必须使用 XSSF 或更高版本的 api。

检查您是否正确编写了excel文件。对于正确的答案，请提供一些代码。

# c# - 使用 ID 和密码使用 TweetSharp 登录

> ID：14040667
> 
> 赞同：1
> 
> 时间：2012-12-26T12:35:28.093
> 
> 标签：c#, api, twitter, tweetsharp

```
TwitterService service = new TwitterService("CONSUMER KEY", "CONSUMER SECRET");
service.AuthenticateWith("TOKEN KEY", "TOKEN SECRET");

var retweets = service.ListRetweetsByMe(); 
```

所以我可以使用这个脚本来获取所有转发，但来自哪个用户？我想我应该首先使用正确的凭据进行授权。那么我该怎么做呢？用户应输入他/她的 ID 和密码登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:26:41.163

你需要使用oauth：

```
TwitterClientInfo client = new TwitterClientInfo();
        client.ConsumerKey = "ConsumerKey";
        client.ConsumerSecret = "ConsumerSecret";
        twitterService = new TwitterService(client);
        requestToken = twitterService.GetRequestToken();
        Uri urlAuth = twitterService.GetAuthorizationUri(requestToken); 
```

您可以使用 webbrowser 控件或您想要的方式将用户发送到该 url...然后您需要使用文本框或其他东西接收 pin...我回答认为您正在谈论桌面应用程序。

# primefaces - 数据表为主，对话框为细节

> ID：14040676
> 
> 赞同：0
> 
> 时间：2012-12-26T12:36:06.910
> 
> 标签：primefaces

我正在尝试使该代码正常工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   template="/templates/default.xhtml">

    <ui:define name="content">

        <h:form id="form">    

            <p:dataTable id="clienti" var="c" value="#{clientiController.clienti}" rowKey="#{c.id}">

                <p:column headerText="Ragione sociale">
                    <h:outputText value="#{c.ragioneSociale}" />
                </p:column>
                <p:column headerText="Codice fiscale">
                    <h:outputText value="#{c.codiceFiscale}" />
                </p:column>

                <p:column style="width:4%">
                    <p:commandButton 
                        update=":formDialog:clienteEditDialogTable" 
                        oncomplete="clienteEditDialog.show()" 
                        value="Modifica"
                        title="Modifica">
                            <f:setPropertyActionListener value="#{c}" target="#{clientiController.clienteSelezionato}" />
                    </p:commandButton>
                </p:column>

            </p:dataTable>        

            <p:commandButton value="Aggiorna" actionListener="#{clientiController.aggiorna}" update=":form:clienti" icon="ui-icon-arrowrefresh-1-n" />
            <p:commandButton value="Nuovo Cliente" actionListener="#{clientiController.nuovo}" update=":formDialog:clienteEditDialogTable" oncomplete="clienteEditDialog.show()" />

        </h:form>   

            <p:dialog 
                header="Modifica Cliente" 
                widgetVar="clienteEditDialog" 
                id="clienteEditDialog"
                showEffect="fade" 
                hideEffect="explode" 
                closable="true"
                modal="true"
                appendToBody="true">

                    <h:form id="formDialog">        

                    <h:panelGrid id="clienteEditDialogTable" columns="2" cellpadding="10" style="margin:0 auto;">

                        <p:outputLabel for="fieldNome" value="Ragione Sociale:" />
                        <p:inputText id="fieldNome" value="#{clientiController.clienteSelezionato.ragioneSociale}" />

                        <p:outputLabel for="fieldCodice" value="Codice:" />
                        <p:inputText id="fieldCodice" value="#{clientiController.clienteSelezionato.codiceFiscale}" required="true" requiredMessage="Codice fiscale obbligatorio" />

                    </h:panelGrid>

                    <p:commandButton 
                        value="Conferma modifiche" 
                        actionListener="#{clientiController.modifica}" 
                        update=":form:clienti" 
                        oncomplete="clienteEditDialog.hide()"
                        rendered="#{clientiController.clienteSelezionato.id!=null}" />

                    <p:commandButton 
                        value="Conferma nuovo cliente" 
                        actionListener="#{clientiController.crea}" 
                        update=":form:clienti" 
                        oncomplete="clienteEditDialog.hide()"
                        rendered="#{clientiController.clienteSelezionato.id==null}" />

                    </h:form>

            </p:dialog>

    </ui:define>

</ui:composition> 
```

通过单击“Nuovo Cliente”，我收到一个 javascript 控制台错误：

> TypeError：“未定义”不是函数（评估“clienteEditDialog.show（）”）

这当然是对命名容器的误解。你能帮我提供正确的ID吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:03:30.517

您正在从不同的命名容器引用 clienteEditDialogTable。实际 id 是 :formDialog:clienteEditDialogTable，所以尝试一下。Id 可以不同，但​​我可以在您提供模板源代码后告诉您更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:30:44.473

在旧的 primefaces 版本中，无法为a`widgetVar`和`id`a分配相同的名称`p:dialog`

试试`id="clienteEditDialog"`改成`id="clienteEditDialogId"`

# android - 未调用 BaseExpandableListAdapter

> ID：14040677
> 
> 赞同：0
> 
> 时间：2012-12-26T12:36:14.277
> 
> 标签：android, android-tabhost, android-tabs, android-tabactivity

在这个班

```
 public class Rest_name_adapter extends BaseExpandableListAdapter  {
   } 
```

我在所有方法中都放了 Logs 来检查调用方法的顺序。但从我的活动课上的陈述来看

```
 exp_listView.setAdpater(new Rest_name_adapter(getParent(), group_list, child_list)); 
```

它转到 Rest_name_adapter 类，只调用构造函数，没有别的。我不知道为什么它没有调用这个：`getChildView()`和`getGroupView()`方法？在上下文中，我使用`getParent()`了因为这是`TabGroupActivity`. 请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:49:28.723

你在你的 Rest_name_adapter 中实现了一些方法吗？如果没有，有一个简单的解释 - 适配器调用 getGroupCount()，它默认返回 0。因为没有组 - 不需要视图。所以没有发生对 getGroupView() 的调用。

# javascript - 如何解决这个循环并按顺序呈现锥体？

> ID：14040679
> 
> 赞同：2
> 
> 时间：2012-12-26T12:36:27.783
> 
> 标签：javascript, 3d, three.js

```
 var lc_relationship= null; 
   var container, nSize = 100;
   var camera, scene, renderer;
   var scale = 10, scale1 = 100; N=50, cubeRotSpd=0;
   var arr= [];
   var width = window.innerWidth, height = window.innerHeight;
   function generateData()
  {
var aSensor1 = [],
    aSensor2 = [],
    aSensor3 = [];
lc_relationship = {
        "sensor1":[],
        "sensor2":[],
        "sensor3":[]
                  }
for(i=1; i<=nSize; i++)
{
    aSensor1.push(i);
    aSensor2.push(i);
    aSensor3.push(i);
}
for(n=0; n<nSize; n++)
{
    var pos1 = Math.floor(Math.random() * (nSize-n));
    var pos2 = Math.floor(Math.random() * (nSize-n));
    var pos3 = Math.floor(Math.random() * (nSize-n));
    var int1 = aSensor1[pos1]; aSensor1.splice(pos1,1);
    var int2 = aSensor2[pos2]; aSensor2.splice(pos2,1);
    var int3 = aSensor3[pos3]; aSensor3.splice(pos3,1);
    lc_relationship.sensor1[int1-1]  = 
    {
        "ObjectID" : "sens1_" + rightPad(int1),
        "Geometry" : getGeometry(),
        "Parent":null,
        "child": "sens2_" + rightPad(int2),
        "z_cordinate": -5
    } 
    lc_relationship.sensor2[int2-1]  = 
    {
        "ObjectID" : "sens2_" + rightPad(int2),
        "Geometry" : getGeometry(),
        "Parent":"sens1_" + rightPad(int1),
        "child": "sens3_" + rightPad(int3),
        "z_cordinate": 0
    }
    lc_relationship.sensor3[int3-1]  = 
    {
        "ObjectID" : "sens3_" + rightPad(int3),
        "Geometry" : getGeometry(),
        "Parent":"sens2_" + rightPad(int2),
        "child": null,
        "z_cordinate": 5
    }
}
}
  function rightPad(number) 
{
var tmpStr = number.toString();
return ("000" + tmpStr).substring(tmpStr.length, tmpStr.length+3);
}
       function getGeometry()
{
   var geo = new THREE.Geometry();
   geo.vertices.push(new THREE.Vertex(
   new THREE.Vector3(   0, 0, 0)));
   geo.vertices.push(new THREE.Vertex(
    new THREE.Vector3( -0.5, 0.5, 1)));
   geo.vertices.push(new THREE.Vertex(
    new THREE.Vector3( 0.5, 0.5, 1)));
   geo.vertices.push(new THREE.Vertex(
    new THREE.Vector3( -0.5, -0.5, 1)));
   geo.vertices.push(new THREE.Vertex(
    new THREE.Vector3( 0.5,-0.5, 1)));
geo.faces.push( new THREE.Face3(0,1,2));
geo.faces.push( new THREE.Face3(2,1,4));
geo.faces.push( new THREE.Face3(1,3,4));
geo.faces.push( new THREE.Face3(4,3,0));
geo.faces.push( new THREE.Face3(3,1,0));
geo.faces.push( new THREE.Face3(0,2,4));

geo.computeFaceNormals();
/*  cone = new THREE.Mesh(geo, meshMaterial);
cone.doubleSided = true;
cone.overdraw = true;*/
return geo;
}
 function posgeo()
{   generateData();
//var jsonText = JSON.stringify(lc_relationship);
//document.getElementById("output").innerHTML=jsonText;
//document.getElementById("test").innerHTML=lc_relationship.sensor1[0].z_cordinate;
init();
animate();
 }
  function init() 
 {
    container = document.getElementById("output");
camera = new THREE.PerspectiveCamera( 45, width / height, 0.1, 1000 );
camera.position.y = 0;
camera.position.z = 45;
camera.lookAt(new THREE.Vector3(0, 0, 0));  
scene = new THREE.Scene();
scene.add(camera);
renderer = new THREE.WebGLRenderer(/*{antialias:true}*/);
renderer.setClearColorHex(0xffffff, 1);
renderer.setSize( width, height );
var meshmaterial = new THREE.MeshLambertMaterial( { color: 0x0000CC, opacity: 0.3, depthWrite: false, depthTest: false }); 
```

我在这个循环中遇到了整个问题，有人可以帮我解决这个问题吗？循环在这里：

```
for ( var i = 0; i <nSize; i++)
     for ( var j = -5; j < 5; j++)
         for ( var k = -5; k < 5; k++) 
          {
            var cone1 = new THREE.MESH(lc_relationship.sensor1[i].Geometry,meshMaterial);
            cone1.doubleSided = true;
            cone1.overdraw = true;
            scene.add(cone1);
            var cone2 = new THREE.MESH(lc_relationship.sensor2[i].Geometry,meshMaterial);
            cone2.doubleSided = true;
            cone2.overdraw = true;
            scene.add(cone2);
            var cone3 = new THREE.MESH(lc_relationship.sensor3[i].Geometry,meshMaterial);
            cone3.doubleSided = true;
            cone3.overdraw = true;
            scene.add(cone3);
            cone1.position.set(2*k, 2*j,lc_relationship.sensor1[i].z_cordinate);
            cone2.position.set(2*k, 2*j,lc_relationship.sensor2[i].z_cordinate);
            cone3.position.set(2*k, 2*j,lc_relationship.sensor3[i].z_cordinate);
           } 
```

我只想显示如下图所示的锥体： ![在此处输入图像描述](../Images/7bf02e76cad3f6e42f180788f93df129.png)

和剩余的代码：

```
var light = new THREE.DirectionalLight(0xffffff, 0.6);
light.position.y = 1;
light.position.x = 1;
light.position.z = 1;
scene.add(light);
light = new THREE.DirectionalLight(0xffffff, 0.6);
light.position.y = -1;
light.position.x = -1;
light.position.z = -1;
scene.add(light);
light = new THREE.DirectionalLight(0xffffff, 0.6);
light.position.y = 1;
light.position.x = 0;
light.position.z = 0;
scene.add(light);
container.appendChild( renderer.domElement );
}
 function animate() 
{   
requestAnimationFrame( animate );
render();   
}
  function render() 
{                           
renderer.render(scene, camera);
} 
```

可以帮助解决这个问题。这个任务真的一直都在头上:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:02:37.770

你可以用一个循环来完成，通过计算`j`and `k`from`j`而不是添加两个循环：

```
for ( var i = 0; i <nSize; i++)
{
    var k = i%10,
        j = (i-k)/10;

    j = j*2 - 10; // You may need to adjust this "10",
    k = k*2 - 10; // may be "9", so the layers get centered.

    //console.log(j,k)
    var cone1 = new THREE.MESH(lc_relationship.sensor1[i].Geometry,meshMaterial);
    cone1.doubleSided = true;
    cone1.overdraw = true;
    scene.add(cone1);
    var cone2 = new THREE.MESH(lc_relationship.sensor2[i].Geometry,meshMaterial);
    cone2.doubleSided = true;
    cone2.overdraw = true;
    scene.add(cone2);
    var cone3 = new THREE.MESH(lc_relationship.sensor3[i].Geometry,meshMaterial);
    cone3.doubleSided = true;
    cone3.overdraw = true;
    scene.add(cone3);
    cone1.position.set(j, k, lc_relationship.sensor1[i].z_cordinate);
    cone2.position.set(j, k, lc_relationship.sensor2[i].z_cordinate);
    cone3.position.set(j, k, lc_relationship.sensor3[i].z_cordinate);
} 
```

# wordpress - Wordpress 显示侧边栏的特定小部件

> ID：14040681
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:36:39.340
> 
> 标签：wordpress, widget

例如; 我有 10 个文本小部件，但我只想显示 1 个小部件。是否可以按名称显示小部件？

如果我使用`<?php dynamic_sidebar('sidebar'); ?>`它将显示边栏中的所有小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:43:54.647

是的，您可以通过传递名称（也是可选参数）来显示特定的小部件，检查[这个](http://codex.wordpress.org/Function_Reference/the_widget#Recent_Posts_widget)，

```
the_widget('WP_Widget_Text', $instance, $args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:14:59.590

使用[显示小部件](http://wordpress.org/extend/plugins/display-widgets/)插件。

# google-maps - 如何在谷歌地图中显示街景区域

> ID：14040683
> 
> 赞同：0
> 
> 时间：2012-12-26T12:37:04.797
> 
> 标签：google-maps, google-maps-api-3

我已经使用 google javascript api v3 实现了谷歌地图的街景，我想根据他们相应的街景显示在谷歌地图中显示蓝色阴影区域。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:03:35.603

“StreetviewOverlay”在 v3 中不可用。如果您愿意，可以对此[增强请求加注星标（投票）](http://code.google.com/p/gmaps-api-issues/issues/detail?id=3178)

（好像对它没多大兴趣，目前只有9星）

# iphone - UICGDirectionsDelegate 函数未在 iphone 中调用

> ID：14040686
> 
> 赞同：0
> 
> 时间：2012-12-26T12:37:23.430
> 
> 标签：iphone, ios, direction, mkmapview

我在 iphone 的 mapView 中显示从起点到终点的路线，我完成了。但是一天后我打开这个项目，它不显示路线，因为没有调用 UICGDirectionsDelegate 函数。我不知道为什么会发生这种情况，一些人会指导我解决这个问题。非常感谢，我的示例代码在这里`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view from its nib.
    if (diretions.isInitialized) {
        [self update];
    }

    routeOverlayView = [[UICRouteOverlayMapView alloc] initWithMapView:mapViews];

    diretions = [UICGDirections sharedDirections];
    diretions.delegate = self;

}

- (IBAction)backButton:(id)sender {

    [self.navigationController popViewControllerAnimated:YES];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)update {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    UICGDirectionsOptions *options = [[UICGDirectionsOptions alloc] init];
    options.travelMode = travelMode;

    if (is_route) {

        startPoint = [NSString stringWithFormat:@"%f,%f",APPDELEGATE.user_latitude,APPDELEGATE.user_longitude];
        endPoint = [NSString stringWithFormat:@"%@,%@",routeObj.latitude,routeObj.longitude];
        destination = poiObj.english_title;

    }else {
        startPoint = [NSString stringWithFormat:@"%f,%f",APPDELEGATE.user_latitude,APPDELEGATE.user_longitude];
        endPoint = [NSString stringWithFormat:@"%@ ,%@",poiObj.latitude,poiObj.longitude];
        destination = routeObj.starting_poi_name;
    }

    [diretions loadWithStartPoint:startPoint endPoint:endPoint options:options];

}

- (void)moveToCurrentLocation:(id)sender {
    [mapViews setCenterCoordinate:[mapViews.userLocation coordinate] animated:YES];
}

- (void)addPinAnnotation:(id)sender {
    UICRouteAnnotation *pinAnnotation = [[UICRouteAnnotation alloc] initWithCoordinate:[mapViews centerCoordinate]
                                                                                 title:nil
                                                                        annotationType:UICRouteAnnotationTypeWayPoint];
    [mapViews addAnnotation:pinAnnotation];
}

#pragma mark <UICGDirectionsDelegate> Methods

- (void)directionsDidFinishInitialize:(UICGDirections *)directions {
    [self update];
}

- (void)directions:(UICGDirections *)directions didFailInitializeWithError:(NSError *)error {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Map Directions" message:[error localizedFailureReason] delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [alertView show];
}

- (void)directionsDidUpdateDirections:(UICGDirections *)directions {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

    // Overlay polylines
    UICGPolyline *polyline = [directions polyline];
    NSArray *routePoints = [polyline routePoints];
    [routeOverlayView setRoutes:routePoints];

    // Add annotations
    currentLocation = @"You are here";
    UICRouteAnnotation *startAnnotation = [[UICRouteAnnotation alloc] initWithCoordinate:[[routePoints objectAtIndex:0] coordinate]
                                                                                   title:currentLocation
                                                                          annotationType:UICRouteAnnotationTypeStart];
    UICRouteAnnotation *endAnnotation = [[UICRouteAnnotation alloc] initWithCoordinate:[[routePoints lastObject] coordinate]
                                                                                 title:destination
                                                                        annotationType:UICRouteAnnotationTypeEnd];

    [mapViews addAnnotations:[NSArray arrayWithObjects:startAnnotation, endAnnotation, nil]];
}

- (void)directions:(UICGDirections *)directions didFailWithMessage:(NSString *)message {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Map Directions" message:message delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [alertView show];
}
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:03:00.490

在 UICGRoute.m

替换这个

```
NSArray *stepDics;
NSDictionary *k;
for (int i = 0; i<allKeys.count; i++) {
k = [dictionaryRepresentation objectForKey:[allKeys objectAtIndex:i]];
if ([k objectForKey:@"Steps"]) {
stepDics = [k objectForKey:@"Steps"];
break;
}
} 
```

和

```
NSDictionary *k = [dictionaryRepresentation objectForKey:[allKeys objectAtIndex:[allKeys count] - 1]];
NSArray *stepDics = [k objectForKey:@"Steps"]; 
```

# android - 如何加快 myLocation 确定

> ID：14040691
> 
> 赞同：0
> 
> 时间：2012-12-26T12:38:12.477
> 
> 标签：android, google-maps

我正在使用 new `API V2`，但这可能并不重要，因为无论如何我都是地图新手:) 我有非常简单的需求。我想显示我的位置和一个目标标记，一切正常。只是我的位置确定是不可预测的，能拿到几分钟左右就可以拿到蓝圈。我的想法是手动使用`LocationManager`在后台检索粗略或精细位置并将该值传递给`Mapactivity`. 由于通常地图活动不会立即开始，因此它会很好地工作。然后我还可以将最后一个位置保存到数据库并传递它，以防地图活动在`LocationManager`获取实际位置之前开始。

我正在查看 api，但找不到在给定 LatLong 处立即显示蓝色圆圈的函数。这个功能可用吗？如果此功能不可用，我能找到的唯一解决方法是覆盖`onlocationchanged`以检索新位置并保存最后一个位置，并在最后一个已知的 mylocation 上显示标记（这将在第一个 locationchanged 事件时自动隐藏）。

但是，如果我可以简单地通过初始 mylocaltion coordiantes 会更容易，也更漂亮？

感谢您的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:46:56.990

> 我正在查看 api，但找不到在给定 LatLong 处立即显示蓝色圆圈的函数。这个功能可用吗？

用于`setLocationSource()`向. `LocationSource`_ `GoogleMap`一旦你`LocationSource`被调用`activate()`，你将获得一个监听器对象，你可以将`Location`对象传递给你从位置提供者那里获得的读数。

# algorithm - 有什么更好的方法来解决这个问题？

> ID：14040696
> 
> 赞同：4
> 
> 时间：2012-12-26T12:38:44.787
> 
> 标签：algorithm, search, time, dynamic-programming

这是我要解决的问题，

> 给你一个有 2 行 N 列的表。每个单元格中都有一个整数。这样一个表的得分定义如下：对于每一列，考虑该列中两个数字的总和；这样获得的N个数字中的最大值就是分数。例如，对于表
> 
> 7 1 6 2
> 1 2 3 4
> 
> 得分为 max(7 + 1; 1 + 2; 6 + 3; 2 + 4) = 9。表格的第一行是固定的，并作为输入给出。考虑了填充第二行的 N 种可能方法：
> 
> 1个；2；: : : ; N
> 2; 3；: : : ; N; 1
> 3; 4；: : : ; N; 1个；2
> |
> N; 1个；: : : ; ; 氮1
> 
> 例如，对于上面的示例，我们将以下每一项都视为第二行的可能性。
> 
> 1 2 3 4
> 2 3 4 1
> 3 4 1 2
> 4 1 2 3
> 
> 你的任务是找出第二行的上述每个选项的分数。在上面的示例中，您将评估以下四个表，
> 
> 7 1 6 2
> 1 2 3 4
> 7 1 6 2
> 2 3 4 1
> 7 1 6 2
> 3 4 1 2
> 7 1 6 2
> 4 1 2 3
> 分别计算得分 9、10、10 和 11
> 
> 测试数据：N <= 200000
> 时间限制：2 秒

这是显而易见的方法：

维护两个数组A，B，做以下n次

*   将每个元素 A[i] 添加到 B[i] 并保留一个变量 max 来存储迄今为止的最大值。
*   打印最大值
*   遍历数组 B[i] 并将所有元素加 1，如果任何元素等于 N，则将其设置为等于 1。

此方法将花费 O(n^2) 时间，外循环运行 N 次，并且有两个内循环，每个循环运行 N 次。

为了减少花费的时间，我们可以在第一行（在线性扫描中）找到最大元素 M，然后在 A[i] + N <= M + 1 时删除 A[i] 和 B[i]。
因为他们永远不会是最大的。

但是这种方法在平均情况下可能会表现得更好，最坏情况下的时间仍然是 O(N^2)。

为了在恒定时间内找到最大值，我还考虑使用堆，堆的每个元素都有两个属性，它们的原始值和要添加的值。但是，对于 n 种情况中的每一种，增加堆中所有元素的待添加值仍然需要线性时间。
所以时间仍然是O(N^2)

我无法找到比 N^2 时间更快地解决此问题的方法，因为 N 的值可能非常大，这将太慢。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T13:53:40.537

还有一个 O(n) 算法。使用与先前答案相同的观察结果：

> 现在考虑当您将第二行向左旋转时，列总和会发生什么变化（例如，将其从 1,2,...,N 更改为 2,3,...,N,1）：每列总和都会增加1，除了一列总和减少 N-1。
> 
> 我们可以不修改所有列和，而是将一列和减少 N，然后取最大列和加 1 来找到列和的新最大值。所以我们只需要更新一列而不是全部。

当我们迭代第二行的可能性时，出现最大值的列只能向左移动或跳回具有总体最大值的列。候选列是从左到右最大扫描中的临时最大值。

1.  计算第二行的第一选择的所有总和 (1, 2, ..., N) 并将它们存储在一个数组中。
2.  在从左到右的扫描中找到该数组中的最大值并记住临时最大值的位置。
3.  在从右到左的过程中，总和现在减少 N。如果这个减少过程达到最大列，检查数字是否小于整体最大值 - N，在这种情况下，新的最大列是整体最大值列，它将留在那里循环的其余部分。如果该数字仍然大于在步骤 2 中确定的先前最大值，则在循环的其余部分中，最大值列将保持不变。否则，先前的最大值将成为新的最大值列。

以输入 7,1,6,2 为例，算法运行如下： 步骤 1 计算总和 8,3,9,6 步骤 2 从左到右找到临时最大值：第 1 列中为 8，然后第 3 列中为 9第 3 步生成从右到左传递数组的结果

```
8 3 9 6 -> output 9 + 0 = 9
8 3 9 2 -> output 9 + 1 = 10
8 3 5 2 -> current max col is decreased, previous max 8 is larger and becomes current
           output 8 + 2 = 10
8 -1 5 2 -> output 8 + 3 = 11 
```

这是C中的算法：

```
#include <stdio.h>

int N;
int A[200000];
int M[200000];

int main(){
    int i,m,max,j,mval,mmax;

    scanf("%d",&N);

    for(i = 0;i < N; i++){
        scanf("%d",&A[i]);
        A[i] = A[i]+i+1;
    }

    m = 0;
    max = 0;
    M[0] = 0;

    for(i = 1;i < N; i++){
        if(A[i] > A[max]){
            m++;
            M[m] = i;
            max = i;
        }
    }

    mval = A[max] - N;
    mmax = max;

    for(i = N-1,j = 0;i >=0;i --,j++){
        printf("%d ", A[max]+j);

        A[i] = A[i] - N;

        if(i == max){
            if (A[i] < mval) {
                max = mmax;
            } else if(m > 0 && A[i] < A[M[m-1]]){
                max = M[m-1];
                m--;
            }
        }
    }

    printf("\n");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:14:32.000

这是一个`O(n*logn)`解决方案：

假设您计算第二行的特定排列的所有列总和。

现在考虑当您将第二行向左旋转时（例如，将其从 更改`1,2,...,N`为`2,3,...,N,1`），列总和会发生什么情况：每列总和将增加 1，除了一列总和减少 N-1。

我们可以不修改所有列和，而是将一列和减少 N，然后取最大列和加 1 来找到列和的新最大值。所以我们只需要更新一列而不是全部。

所以我们的算法是：

*   将第二行设置为 1,2,...,N 并计算每列的总和。将所有这些总和放在一个最大堆中。堆的根将是最大的和。

*   对于`i`1 到`N`:

    *   `N-i`将第 th 列对应的堆节点的值减小`N`.
    *   新的最大列总和是堆的根 plus `i`。

每次堆更新都会`O(logn)`导致`O(n*logn)`总时间。

# android - 无法设置 Android webview 宽度

> ID：14040703
> 
> 赞同：0
> 
> 时间：2012-12-26T12:39:14.503
> 
> 标签：android, android-layout, android-webview

我一直在尝试使用 TableLayout 在屏幕上向我的 Android 应用程序添加一个 Webview 控件不幸的是，无论我尝试什么，webview 总是覆盖屏幕的整个宽度布局文件包含以下代码

```
<TableRow android:layout_gravity="center">

    <WebView
        android:id="@+id/someid"
        android:layout_width="wrap_content" 
        android:layout_height="100dp">
    </WebView>
</TableRow> 
```

Activity 文件包含以下内容

```
@Override protected void onFinishInflate(){

    WebSettings webSettings = mywebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setBuiltInZoomControls(true);
    webSettings.setUseWideViewPort(true);
    webSettings.setLoadWithOverviewMode(true);
    webSettings.setLayoutAlgorithm(LayoutAlgorithm.NORMAL);
    mywebView.setScrollContainer(false);
    mywebView.addJavascriptInterface(new WebAppInterface(context), "Android");

} 
```

控件总是覆盖整个屏幕宽度是否有任何具体原因。height 属性似乎有效，但我用于`android:layout_width`宽度的总是 100% 的屏幕宽度。我尝试为`android:layout_width`java 文件中的 websettings 提供一个固定值以及多个组合。

任何线索为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:06:39.293

您必须首先定义`tableRow`. 例如： layout_width 和 layout_height 里面`tableRow`：

```
<TableRow android:layout_gravity="center"
          android:layout_width="wrap_content"
          android:layout_height="100dp">
<WebView
    android:id="@+id/someid"
    android:layout_width="wrap_content" 
    android:layout_height="fill_parent">
</WebView> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T14:22:21.737

奇怪的是，将控件包装在 LinearLayout 中解决了这个问题

```
 <LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android" 
  android:layout_gravity="center"
  android:layout_width="wrap_content"
  android:orientation="vertical" 
  android:layout_height="wrap_content"> 
     <WebView
        android:id="@+id/someid"
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:layout_width="250px"
         android:orientation="vertical" 
        >
     </WebView>
  </LinearLayout> 
```

# c# - 将用户控件gridview导出到excel

> ID：14040707
> 
> 赞同：0
> 
> 时间：2012-12-26T12:39:30.753
> 
> 标签：c#, asp.net, excel, gridview

在我的 aspx 页面上，我有一个`Usercontrol`包含 的`Gridview`，它的数据是根据从 aspx 页面传递到 UserControl 的参数动态加载的，我称之为`QuotesReport1`.

导出运行时，它只将布局导出到 中`Spreadsheet`，而没有任何 gridview 的数据，例如：

* * *

```
<style>
    body
    {
        margin: 0px;
    }
</style>
<div>
</div> 
```

* * *

我的导出代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    string toDate = "";
    string fromDate = "";

    toDate = Request.QueryString.Get("toDate");
    fromDate = Request.QueryString.Get("fromDate");

    QuotesReport1.ToDate = DateTime.Parse(toDate);
    QuotesReport1.FromDate = DateTime.Parse(fromDate);
    QuotesReport1.Status = QuotesReport.quoteStatus.PENDING_REVIEW;

    string attachment = "attachment; filename=Quotes_Pending.xls";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.ContentType = "application/ms-excel";
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    QuotesReport1.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
}
public override void VerifyRenderingInServerForm(Control control) { } 
```

在 UserControl 内部，运行 SQL 查询，该查询返回一个 DataTable，然后将其绑定到 UserControl 内部的 Gridview，大致如下：

```
SQLData da = new SQLData();
GridView1.DataSource = da.SGetDataTable(query);
GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:59:03.607

我有最简单的方法

```
public class ExcelUtility
{
    public static void ToExcel(object dataSource)
    {
        GridView grid = new GridView { DataSource = dataSource };
        grid.DataBind();

        StringBuilder sb = new StringBuilder();
        foreach (TableCell cell in grid.HeaderRow.Cells)
            sb.Append(string.Format("\"{0}\",", cell.Text));
        sb.Remove(sb.Length - 1, 1);
        sb.AppendLine();

        foreach (GridViewRow row in grid.Rows)
        {
            foreach (TableCell cell in row.Cells)
                sb.Append(string.Format("\"{0}\",", cell.Text.Trim().Replace("&nbsp;", string.Empty)));
            sb.Remove(sb.Length - 1, 1);
            sb.AppendLine();
        }
        ExportToExcel(sb.ToString());
    }

    private static void ExportToExcel(string data)
    {
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=Report.csv");
        HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("UTF-8");
        HttpContext.Current.Response.ContentType = "text/csv";
        HttpContext.Current.Response.Write(data);
        HttpContext.Current.Response.End();
    }
} 
```

使用：

```
 string result = ExcelUtility.ToExcel(_db.FindAll());
   ExcelUtility.ExportToExcel(result); 
```

# objective-c - 如何使用 CoreGraphics 改进箭头线绘制？

> ID：14040712
> 
> 赞同：0
> 
> 时间：2012-12-26T12:39:48.713
> 
> 标签：objective-c, core-graphics

在我的应用程序中，我可以查看用户可以在哪里绘制箭头。它工作得几乎完美。如果我慢慢滑动，我会得到很好的结果。 [图片](http://i.stack.imgur.com/fr3Uz.png)

但是，如果我尝试更快地滑动，我会在某处找到箭头，但不是在行尾。 [图片](http://i.stack.imgur.com/gHcRT.png)

对不起，由于我的声誉，我不能在这里发布图片。

我如何改进箭头线绘图以绘制无论我刷的速度有多快？

为此，我使用下一个方法 -

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = YES;

UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self.view];

 UIGraphicsBeginImageContext(self.view.frame.size);
   [self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

  CGContextClearRect(UIGraphicsGetCurrentContext(),CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height));

   double slopy, cosy, siny;
   // Arrow size
   double length = 10.0;
   double width = 10.0;

   slopy = atan2((firstPoint.y - lastMovePoint.y), (firstPoint.x - lastMovePoint.x));
   cosy = cos(slopy);
   siny = sin(slopy);

   CGContextMoveToPoint(UIGraphicsGetCurrentContext(), firstPoint.x, firstPoint.y);
   CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
        //here is the tough part - actually drawing the arrows
   //a total of 6 lines drawn to make the arrow shape

   CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastMovePoint.x, lastMovePoint.y);

   CGContextAddLineToPoint(UIGraphicsGetCurrentContext(),
                           lastMovePoint.x +  (length * cosy - ( width / 2.0 * siny )),
                           lastMovePoint.y +  (length * siny + ( width / 2.0 * cosy )) );
   CGContextAddLineToPoint(UIGraphicsGetCurrentContext(),
                           lastMovePoint.x +  (length * cosy + width / 2.0 * siny),
                           lastMovePoint.y -  (width / 2.0 * cosy - length * siny) );
   CGContextClosePath(UIGraphicsGetCurrentContext());

   CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
   CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush );
   CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
   CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);

   CGContextStrokePath(UIGraphicsGetCurrentContext());
   self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
   [self.tempDrawImage setAlpha:opacity];
   UIGraphicsEndImageContext();

   lastMovePoint = currentPoint; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:44:39.027

根据我在使用核心图形绘制时的经验，在视图上快速滑动时，每次`touchesMoved:`调用的点之间的距离会更大，而且我看到您使用的 a`lastMovePoint`可能比您想要的更远，给您带来不想要的结果. 缓慢移动并且每个点之间的距离很小（有时甚至小于 1 点）时不会发生这种情况

我建议只使用`firstPoint`and `currentPoint`，计算角度并仅使用它绘制箭头，因为当涉及到它时，要画一条线你只需要第一个和最后一个点，用户之前触摸的位置并不重要:)

# android - 在安卓模拟器内部存储上推送歌曲

> ID：14040714
> 
> 赞同：1
> 
> 时间：2012-12-26T12:39:57.840
> 
> 标签：android, android-mediaplayer, android-sdcard

我正在创建一个音乐应用程序，我想在其中从手机内存和 sdcard 加载歌曲。我已经在模拟器的 sdcard 上推送了一些音频文件，它工作得很好。现在我想将音频文件推送到手机内存中。为此，我试图在 DDMS 中的“mnt”文件夹中推送文件，但它会引发错误并且无法推送。

请提出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:54:59.030

主要问题可能是因为在创建模拟器时您没有指定模拟器的大小。在文件资源管理器中查看mnt目录下的sdcard文件夹是否有d-rwxr-x权限。如果没有，则创建一个新的 avd(Window -> AVD Manager)。在 sdcard 部分，在 Size 属性中给出 500 MB 左右。指定其他属性并单击创建 AVD 按钮。那就试试推吧。

# jquery - jQuery Countdown 不适用于 IE 8

> ID：14040715
> 
> 赞同：5
> 
> 时间：2012-12-26T12:39:57.777
> 
> 标签：jquery, internet-explorer-8

我的网站中嵌入了一个倒计时。它在 Mozilla / Chrome / IE9 中运行良好，但在 IE 8 中无法运行。

[http://jsfiddle.net/FVsGa/](http://jsfiddle.net/FVsGa/)

```
$(function () {
    var ts = 1359647999000;

    if (ts > 1356524873000) {
        $('#countdown').countdown({
            timestamp: ts
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:03:26.677

当您使用 jQuery 方法通过 HTML 字符串创建 DOM 元素时，Internet Explorer 8 的行为与其他现代版本的 IE9 略有不同。显然，在 IE8 中，您需要提供结束标记才能正确创建元素。

您正在使用的倒计时插件包含以下行：

```
$('<span class="count' + this + '">') 
```

注意这里 span 元素没有关闭。你有几个选择：

1.  关闭元素，或
2.  选择不同的方法

第一条路线是不言自明的：

```
$('<span class="count' + this + '"></span>') 
```

这将解决您在 IE8 中的问题。

第二种选择是采取不同的方法。我发现真正有吸引力的是使用 HTML/Props 签名，将属性作为第二个参数传入：

```
$('<span>', { "class" : "count" + this }) 
```

这也解决了 IE8 中的问题。

我已经[分叉并更正](https://github.com/jonathansampson/jQuery-Countdown)了代码，并[发出了一个拉取请求](https://github.com/martinaglv/jQuery-Countdown/pull/4)，将更改拉回原始存储库，以造福他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:35:36.563

使用您提供的小提琴中的 about，我在 github 上找到了开发者项目：[https ://github.com/martinaglv/jQuery-Countdown](https://github.com/martinaglv/jQuery-Countdown)

这里有一个关于 IE8 兼容性的未解决问题，您可以查看[https://github.com/martinaglv/jQuery-Countdown/pull/3](https://github.com/martinaglv/jQuery-Countdown/pull/3)

# android - Android：编辑货币的文本验证

> ID：14040718
> 
> 赞同：2
> 
> 时间：2012-12-26T12:40:13.637
> 
> 标签：android, filter

我有一个编辑文本，用户可以在其中输入金额，我希望对编辑文本有一些限制

1.  金额不能大于100000
2.  用户输入的金额最多保留两位小数，例如 99999.50

**-已编辑-已解决**

我如何实现这一点，我是否必须创建一个`filter`或者我可以使用`Regular Expression`in`myEdittext.addTextChangedListener(new TextWatcher() ...`

```
myAmountEditText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {}

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {}

            @Override
            public void afterTextChanged(Editable s) {
              if(amount!=null && amount.length()>=1 ){
                if(amount.contains(".")){
                    int indexOFdec =  amount.indexOf(".");

                    if(indexOFdec >=0) {
                       if(amount.substring(indexOFdec).length() >3){
                           amount = amount.substring(0, amount.length()-1);
                           myAmountEditText.setText(amount);
                           myAmountEditText.setSelection(myAmountEditText.getText().length());
                       }
                    }
                }

                Double a = Double.parseDouble(amount.toString());

                if(a>0 && a<100000.00){
                    //my stuff
                }else{
                    Toast.makeText(context, "amount greater than 100000", Toast.LENGTH_SHORT).show();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:44:29.457

您可以使用以下代码：

```
edittext.addTextChangedListener(new TextWatcher(){
    public void afterTextChanged(Editable s) {}

    public void beforeTextChanged(CharSequence s, int start, int count, int after){}

    public void onTextChanged(CharSequence s, int start, int before, int count){
        String strEnteredVal = edittext.getText().toString();

        if(!strEnteredVal.equals("")){
        int num=Integer.parseInt(strEnteredVal);
        if(num<100000){
         edittext.setText(""+num);
        }else{
         edittext.setText("");
        }
    }

}); 
```

我认为我们可以这样工作：

```
String str = editText.getText().toString();

    int indexOFdec =  str.indexOf(".");

    if(indexOFdec >=0) {
       if(str.substring(indexOFdec).length() >2)
       {
           Toast.makeText(getApplicationContext(), "Print a message here", Toast.LENGTH_SHORT).show();
           return;
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:09:33.423

您可以在您的 xml 代码中执行此操作。在您指定 E* *ditText* * 的 xml 中，将这两个标签放在其中

```
 android:inputType="numberDecimal"
    android:maxLength="7" 
```

现在使用此代码通知用户他们可以在小数点后放置超过 2 位。

```
 txt1 = (EditText)findViewById(R.id.editText1);
    submit = (Button)findViewById(R.id.button2);

    submit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
               String str = txt1.getText().toString();

                int indexOFdec =  str.indexOf(".");

                if(indexOFdec >=0) {
                   if(str.substring(indexOFdec).length() >3)
                   {
                       Toast.makeText(getApplicationContext(), "put Only 2 digit after decimal", Toast.LENGTH_SHORT).show();
                       return;
                   }else{
                         Toast.makeText(getApplicationContext(), "Correct Number", Toast.LENGTH_SHORT).show();
                    }
                }

        }
    });
} 
```

它会起作用的。

# web-services - 如何使用 SOAP 在 node.js 中调用 ucf Web 服务

> ID：14040719
> 
> 赞同：1
> 
> 时间：2012-12-26T12:40:14.660
> 
> 标签：web-services, node.js, soap-client

我是 Web 服务的新手。如何使用 SOAP 在 node.js 中调用 ucf Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:45:11.413

检查这个，我认为它会做你需要的：

[https://stackoverflow.com/a/8655534/1366519](https://stackoverflow.com/a/8655534/1366519)

如果您键入“使用 node.js 的肥皂网络服务”或类似的内容，Google 和 StackOverflow 搜索框会很有用。

# asp.net - 如何使用字符串生成器类在 asp .net 中显示图像

> ID：14040720
> 
> 赞同：0
> 
> 时间：2012-12-26T12:40:24.463
> 
> 标签：asp.net

我正在使用字符串生成器类来显示图像，但图像没有出现

我的代码是

```
 StringBuilder sb1 = new StringBuilder();
 sb1.AppendLine("<tr>");
 string url = "<img src='~/images/youtube.png'/>";

sb1.AppendLine("<td style='padding-top:3px;border:solid 1px orange;text-    
align:center'><a href='http://www.linkedin.com/groups/
'><img src=url style='height:55px;width:220px;border-style:solid; padding-
left:50px/></a></td>");
sb1.AppendLine("</tr>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:52:49.433

这是一种更好的方法，不会弄乱任何`strings`，更清洁。服务器端：

```
 Table tbl = new Table();
        TableRow tr = new TableRow();
        TableCell td = new TableCell();

        td.Controls.Add(new Image
            {
                ImageUrl = "http://www.your-site.com/content/images/pic.jpg"
            });
        tr.Cells.Add(td);
        tbl.Rows.Add(tr);

        ph.Controls.Add(tbl); 
```

页面：

```
<asp:PlaceHolder runat="server" ID="ph" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:42:02.353

您必须将此 html 分配给您的页面`element`。您需要服务器可访问的 html 元素才能将 html 分配给它。您可以通过为其分配 id 并设置来使表服务器可访问`runat = "server"`。

*在 html 中*

```
<table id="tbl" runat="server" >

</table> 
```

*在代码后面*

```
tbl.InnerHTML  = sb1.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:45:24.357

我觉得问题出在这条线上

```
 sb1.AppendLine("<td style='padding-top:3px;border:solid 1px orange;text-    
 align:center'><a href='http://www.linkedin.com/groups/QuickMove-Core-Business-Solutions-
 Moving-3791901'><img src=url style='height:55px;width:220px;border-style:solid; padding-
 left:50px/></a></td>"); 
```

像这样使用它

```
 sb1.AppendLine("<td style='padding-top:3px;border:solid 1px orange;text-    
 align:center'><a href='http://www.linkedin.com/groups/QuickMove-Core-Business-Solutions-
 Moving-3791901'><img src="+url+" style='height:55px;width:220px;border-style:solid; padding-
 left:50px/></a></td>"); 
```

* * *

编辑

改变

```
 string url = "<img src='~/images/youtube.png'/>"; 
```

至

```
string url = "/images/youtube.png"; 
```

# windows - GNU SED 生成 0 字节文件

> ID：14040722
> 
> 赞同：0
> 
> 时间：2012-12-26T12:40:34.473
> 
> 标签：windows, shell, c#-4.0, sed, gnu

我通过 C# 代码执行 sed.exe，通过 c# 启动命令提示符。

在那里，我正在为 n 个查找和替换对动态创建查找和替换命令。

我已将 sed(windows) 二进制文件放在父应用程序的 bin 文件夹中。

但是，这个 sed 在从上面的命令提示符（通过 c#）执行后创建了 0 字节的目标文件，但是当通过命令提示符执行相同的命令时，通过导航到父应用程序的 \bin 文件夹，它会创建正确的文件结果作为替换数据。

为什么 sed 会出现这种行为？

我的执行命令是：

```
repl  -e "s~SingleCard~CalculateSF~g"   -e "s~Freight~Shipping~g"   -e "s~CSISrno~PSISrno~g"   -e "s~2BD330B6~drakulla\~\~\~~g"   < "\\myserver\Reports\sample.txt" > "\\Myserver\Reports\result.txt" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:45:24.117

将命令写入进程后，文件并未立即准备好。

调用`process.WaitForExit()`以使您的程序等到该过程完成。然后就可以读取文件了。

# c# - C# HtmlAgilityPack 从特定 h2 中选择表

> ID：14040724
> 
> 赞同：7
> 
> 时间：2012-12-26T12:40:50.813
> 
> 标签：c#, html, parsing, html-agility-pack

我有一些html：

```
<h2>Results</h2>
 <div class="box">
 <table class="tFormat">
      <th>Head</th>
      <tr>1</tr>
 </table>
</div>

<h2>Grades</h2>
 <div class="box">
 <table class="tFormat">
      <th>Head</th>
      <tr>1</tr>
 </table>
</div> 
```

我想知道如何获得“结果”下的表格

我试过了：

```
 var nodes = doc.DocumentNode.SelectNodes("//h2");

        foreach (var o in nodes)
        {
            if (o.InnerText.Equals("Results"))
            {
                foreach (var c in o.SelectNodes("//table"))
                {
                    Console.WriteLine(c.InnerText);             
                }
            }
        } 
```

它有效，但它也得到了等级 h2 下的表格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T12:53:24.363

请注意，该 div 在标头内不是分层的，因此在那里查找它是没有意义的。

这可以为您工作 - 它会在标题之后找到下一个元素：

```
if (o.InnerText.Equals("Results"))
{
    var nextDiv = o.NextSibling;
    while (nextDiv != null && nextDiv.NodeType != HtmlNodeType.Element)
        nextDiv = nextDiv.NextSibling;
    // nextDiv should be correct here.
} 
```

您还可以编写更具体的 xpath 来查找该 div：

```
doc.DocumentNode.SelectNodes("//h2[text()='Results']/following-sibling::div[1]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:47:41.857

```
 var nodes = doc.DocumentNode.SelectNodes("//h2");

        if (nodes.FirstOrDefault()!=null)
        {
            var o=nodes.FirstOrDefault();
            if (o.InnerText.Equals("Results"))
            {
                foreach (var c in o.SelectNodes("//table"))
                {
                    Console.WriteLine(c.InnerText);             
                }
            }
        } 
```

# asp.net - 仅在某些页面中，asp.net mvc3 到 mvc4 转换异常

> ID：14040728
> 
> 赞同：0
> 
> 时间：2012-12-26T12:40:59.653
> 
> 标签：asp.net, razor

我正在将 MVC3 应用程序更改为 MVC4（所有正确的更改都已在 web.config 中完成）。应用程序加载正常，某些页面也是如此，但之前在 MVC3 中工作的某些页面抛出了与以下相同的错误：我已正确完成引用，并且在转换过程中没有更改任何代码

谁能告诉我这个错误的解决方案

```
Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper' 
```

当我在这样的 cshtml 中调用此方法时会发生这种情况

```
 @{ Html.RenderAction("GetTestItem", "TestItemsInCart", Model.TestItemsList);} 
```

GetTestItem 方法是

```
[HttpGet]
        public ActionResult GetTestItem(TestItemsList test)
        {

            TestViewModel xyzViewModel = new TestViewModel ();
            return PartialView("_TestXyz", xyzViewModel );
        } 
```

该方法在控制器中被调用，它仅在 cshtml 中将结果返回到视图中，我得到了声明的异常。

这以前在 mvc3 中工作 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:14:11.927

Here are the steps that you need to follow to manually upgrade an existing ASP.NET MVC 3 application to MVC 4: [http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

Also the error message that you are getting indicates that you have some missing closing braces in your Razor view. Make sure you have fixed it or show your Razor view if you expect other people be able to help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:15:48.767

Check for opened brackets. Any opened bracket { needs to be closed with another bracket }. Check for naming of the variables.

# android - 无法连接到android上的蓝牙套接字

> ID：14040730
> 
> 赞同：5
> 
> 时间：2012-12-26T12:41:15.930
> 
> 标签：android, bluetooth, bluecove

我正在尝试通过蓝牙将消息从 android 客户端发送到 Mac OS X。我在 Mac OS X Snow Leopard 上使用 bluecove 2.0.1 Java 蓝牙库。

服务器代码：

```
public class EchoServer2 {
private static final String UUID_STRING = "00001101-0000-1000-8000-00805F9B34FB"; // 32 hex digits
private static final String SERVICE_NAME = "echoserver";

private LocalDevice mLocalDevice;

public EchoServer2() {
    try {
        mLocalDevice = LocalDevice.getLocalDevice();
    } catch(IOException e) {
        System.err.print("Error connection to bluetooth");
    }   
}

public void start() throws IOException {
    StreamConnectionNotifier connectionNotifier =
        (StreamConnectionNotifier) Connector.open(
                "btspp://localhost:" + UUID_STRING +
                ";name=" + SERVICE_NAME + ";authenticate=false");

    System.out.println("Bluetooth Address: " + mLocalDevice.getBluetoothAddress());

    System.out.println("Waiting for a connection...");
    StreamConnection streamConnection = connectionNotifier.acceptAndOpen();

    System.out.println("Found a new device.");

    RemoteDevice device = RemoteDevice.getRemoteDevice(streamConnection);
    System.out.println("New Device connected: " + device.getFriendlyName(false).toString());

    DataInputStream is = streamConnection.openDataInputStream();

    byte[] bytes = new byte[1024];
    int r;
    while((r = is.read(bytes)) > 0) {
        System.out.println(new String(bytes, 0, r));
    }

} 
```

}

安卓客户端代码：

```
public class MainActivity extends Activity {

private static final String TAG = "MainActivity";

EditText editText;
TextView textView;

String send_msg;
String rcv_msg;

private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); // 32 hex digits

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.d(TAG, "onCreate");

    editText = (EditText) findViewById(R.id.edit_msg);
    textView = (TextView) findViewById(R.id.rcv_msg);

    BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();

    if(adapter == null) {
        textView.append("Bluetooth NOT Supported!");
        return;
    }

    // Request user to turn ON Bluetooth
    if(!adapter.isEnabled()) {
        Intent intent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(intent, RESULT_OK);
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClick(View view) {
    Log.d(TAG, "onClick");
    new SendMessageToServer().execute(send_msg);
}

private class SendMessageToServer extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... msg) {
        Log.d(TAG, "doInBackground");

        BluetoothSocket clientSocket = null;
        BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

        mBluetoothAdapter.enable();
        // Client knows the server MAC address 
        BluetoothDevice mmDevice = mBluetoothAdapter.getRemoteDevice("00:25:00:C3:1C:FE");
        Log.d(TAG, "got hold of remote device");
        Log.d(TAG, "remote device: " + mmDevice.getName().toString());

        try {
            // UUID string same used by server 
            clientSocket = mmDevice.createInsecureRfcommSocketToServiceRecord(MY_UUID);

            Log.d(TAG, "bluetooth socket created");

            mBluetoothAdapter.cancelDiscovery();    // Cancel, discovery slows connection

            clientSocket.connect();
            Log.d(TAG, "connected to server");

            DataInputStream in = new DataInputStream(clientSocket.getInputStream());
            DataOutputStream out = new DataOutputStream(clientSocket.getOutputStream());

            out.writeUTF(msg[0]);           // Send message to server
            Log.d(TAG, "Message Successfully sent to server");
            return in.readUTF();            // Read response from server
        } catch (Exception e) {

            Log.d(TAG, "Error creating bluetooth socket");
            Log.d(TAG, e.getMessage());

            return "";
        }

    }

    @Override
    protected void onPostExecute(String result) {
        Log.d(TAG, "onPostExecute");
        rcv_msg = result;
        textView.setText(rcv_msg);
    }

} 
```

}

`UUID`即使客户端和服务器都相同，我也无法连接到服务器。Android 抛出异常：服务发现失败。但是我可以在服务器上打印远程设备（客户端）的名称。因此`acceptAndOpen()`无法接受套接字连接。

请帮助我理解为什么我不能`clientSocket.connect()`；在安卓上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T20:11:34.913

我会猜测并说这与您使用的 UUID 数字有关。它们仅取决于您使用的设备类型。因此，请确保您查找它们并且它们对于 android 设备是正确的。当我在做android时，这让我很长一段时间。UUID 不是您设置的。这是一个链接 [如何在应用程序中获取我的 Android 手机的 UUID？](https://stackoverflow.com/questions/5088474/how-can-i-get-the-uuid-of-my-android-phone-in-an-application) 或此 [Android - 获取此设备的蓝牙 UUID](https://stackoverflow.com/questions/19630810/android-get-bluetooth-uuid-for-this-device)

如果不是这样。发现两端都失败了吗？你能看到两端的设备吗？你可以在哪一面打印名字？你可能想看看谷歌的蓝牙示例程序。并使用它来帮助您入门。

# symfony - 找不到 Symfony2 日光浴室类“Solarium_Plugin_Abstract”

> ID：14040731
> 
> 赞同：2
> 
> 时间：2012-12-26T12:41:18.903
> 
> 标签：symfony, solarium

我正在使用[https://github.com/nelmio/NelmioSolariumBundle](https://github.com/nelmio/NelmioSolariumBundle)，我正在尝试与我的 symfony2 应用程序连接日光浴室。

我已经用 composer.json 安装了日光浴室，但后来我得到了

> 在第 12 行的 .../vendor/bundles/Nelmio/SolariumBundle/Logger.php 中找不到类“Solarium_Plugin_Abstract”

我不明白为什么在 Logger 中有：

```
use Solarium_Plugin_Abstract 
```

但在我发现的文件夹中：

> myproject/vendor/solarium/library/Solarium/Plugin/Abstract.php

我已经在我的`autoload.php`

```
'Solarium' => DIR.'/../vendor/solarium/library', 
```

不应该：使用 Solarium/Pluguin/Abstract ？

我做错了什么？

# php - 在codeigniter中获取控制器文件夹名称？

> ID：14040738
> 
> 赞同：1
> 
> 时间：2012-12-26T12:42:39.717
> 
> 标签：php, codeigniter, url-routing

如果我在控制器中有这样的文件夹：

```
controller/folder/class/method 
```

如何获取当前文件夹，

上课 ：`$this->router->class`

对于方法：`$this->router->method`

如何获取文件夹名称或完整路径？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:44:00.013

您可以查看[URI 类手册](https://www.codeigniter.com/user_guide/libraries/uri.html)

获取当前 uri：

```
$this->uri->uri_string() 
```

要在您的示例中获取控制器文件夹：

```
$this->uri->segment(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T12:47:33.330

```
controller/folder/class/method 
```

试试看 ：

```
echo $this->uri->segment(1); 
```

它将在控制器下显示您的文件夹名称

前任 ：

```
/controller/stackoverflow/class/method

o/p : stackoverflow 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:57:50.100

您可以使用[$this->router->fetch_directory()](https://github.com/EllisLab/CodeIgniter/blob/2.1-stable/system/core/Router.php#L479)

来自`system/core/Router.php`：

```
/**
 *  Fetch the sub-directory (if any) that contains the requested controller class
 *
 * @access  public
 * @return  string
 */
 function fetch_directory()
 {
     return $this->directory;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T14:36:42.657

我一直用：

```
$this->uri->segment(1) 
```

获取我的控制器名称。不确定这是否是因为您正在寻找文件夹名称。

# wpf - 如何将 ICollectionView 绑定重新加载到 wpf 组合框？

> ID：14040739
> 
> 赞同：0
> 
> 时间：2012-12-26T12:42:39.830
> 
> 标签：wpf, visual-studio-2010, c#-4.0, mvvm

我在 wpf 用户控件中有一个文本框和一个组合框。ComboxBox 绑定到 ICollectionView (CurencyList)，它填充货币对，如 GBP/EUR、CLP/EUR、USD/EUR、EUR/USD 等。每当用户在文本框中写入（例如 EUR）时，组合框应被过滤并显示下拉列表，其中 EUR 为第二种货币。

![在此处输入图像描述](../Images/a4aac04b5636beb8168d3063577ecd72.png)

为此，我使用过：

```
 public string Currency
    {
        get { 

            return _criteriaType.currency; }
        set
        {
            if (_criteriaType.currency != value)
            {
                _criteriaType.currency = value.EmptyOrWhiteSpaceAsNull();
                base.OnPropertyChanged("Currency");
                CurrencyList.Filter = new Predicate<object>(Contains);

            }
        }
    }

public bool Contains(object de)
    {
        CurrencyPair o = de as CurrencyPair;
        if (Currency != null || Currency == string.Empty)
        {
           return (o.name.Substring(3, 4).ToLower().Contains(Currency.ToLower()));              
        }
        else
        {
            IsOpen = false;
            OnPropertyChanged("IsOpen");               
            return false;
        }
    } 
```

CurrencyList 来自网络服务：

```
 private ICollectionView GetCurrencyPair()
    {

        strCurrencyPair.arg0 = (Currency != string.Empty && Currency != null) ? Convert.ToString(Currency).ToUpper() : string.Empty;
        string[][] cPair = ServiceLocator.Resolve<IWebServiceRepository>().BusinessWebService.getCurrenyPairs(strCurrencyPair);

        foreach (string[] item in cPair)
        {
            IList.Add(new CurrencyPair() { name = (Convert.ToString(item[0]).ToUpper() + "/" + Convert.ToString(item[1]).ToUpper()) });

        }
      return  CurrencyList =CollectionViewSource.GetDefaultView(IList);

    } 
```

过滤工作正常。但是当用户使用键盘上的向后箭头键从文本框中删除货币时，组合框被过滤为空，即下拉列表为空。如何克服这个问题。请建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:08:34.987

您需要通过文本更改事件更新您的收藏视图

```
private void OnTextChanged(object sender, Eventargs e) {
  var vm = yourViewModelOrWhatEver;
  ((ICollectionView)vm.CurrencyList).Refresh();
} 
```

或设置一次过滤谓词并仅在货币更改时触发刷新

```
public void ctor() {
  CurrencyList.Filter = new Predicate<object>(Contains);
}

public string Currency {
  get { return _criteriaType.currency; }
  set {
    if (_criteriaType.currency == value) {
      return;
    }
    _criteriaType.currency = value.EmptyOrWhiteSpaceAsNull();
    base.OnPropertyChanged("Currency");
    CurrencyList.Refresh(); // refresh/filter the collection view
  }
} 
```

希望有帮助

**编辑**

你说

> 过滤工作正常。但是当用户使用键盘上的向后箭头键从文本框中删除货币时，组合框被过滤为空，即下拉列表为空。如何克服这个问题。请建议？

那么你必须将你的谓词函数更改为这个

```
public bool Contains(object de)
{
    CurrencyPair o = de as CurrencyPair;
    if (Currency != null || Currency == string.Empty) {
      // Currency == string.Empty should also true
      return (Currency == string.Empty) || (o.name.Substring(3, 4).ToLower().Contains(Currency.ToLower()));
    } else {
      IsOpen = false;
      OnPropertyChanged("IsOpen");               
      return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:22:02.487

我认为问题在于以下语句：

string[][] cPair = ServiceLocator.Resolve().BusinessWebService.getCurronyPairs(strCurrencyPair);

如果您将 string.empty 传递给 strCurrencyPair，那么该服务的返回值是多少，一旦文本框因退格为空，您当前将执行此操作？

# asp.net - 在传递到 Web 服务之前排队 Web 请求

> ID：14040745
> 
> 赞同：1
> 
> 时间：2012-12-26T12:43:13.807
> 
> 标签：asp.net, multithreading, c#-4.0, queue, msmq

我有在线评估应用程序，其中在登录和提交测试期间有大量点击，当 CPU 使用率为 100% 并且许多请求全部丢失时，服务器无法处理所有请求，我想将所有请求排队并在一些请求中一一发送内部时间，因此请求不应丢失并在服务器后端处理所有请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:07:16.640

我认为您的问题是您正在处理两种非常不同类型的请求 - 登录和考试结果，并且您正试图通过同一渠道处理它们。

这两个请求具有非常不同的特征：

*   登录请求很小
*   考试成绩要求很大
*   登录请求必须是实时的
*   考试成绩请求不需要实时处理
*   登录请求处理用户和安全（从业务角度）
*   考试请求处理问题和答案（从业务角度）

从逻辑上讲，它们是如此不同，以至于您在单个频道中拥有的是两种不同的服务（即使目前它们是捆绑在一起的）。他们几乎没有共同点。

我会认真考虑将单个通道分成两个通道，并在两个不同的服务器上理想地运行它们。此外，我会将入站队列添加到考试结果通道。这将有很多好处：

1.  由于您消除了同时处理考试结果的可能性，登录请求将不太可能超时。
2.  考试结果请求的自然节流（通过队列）。
3.  解耦两个服务之间的依赖关系。
4.  更高的系统稳定性，更低的支持成本，更低的拥有成本。

因为您的服务是如此不同，这将使您更容易做到这一点。您应该能够毫不费力地分离代码库。您可以使用 MSMQ（可能通过 WCF netMsmqBinding）来处理请求的排队。

希望这对您有所帮助。

# layout - magento中布局xml文件的路径

> ID：14040746
> 
> 赞同：3
> 
> 时间：2012-12-26T12:43:30.653
> 
> 标签：layout, magento-1.7

我已经看到我们可以将布局 xml 文件放在

> 应用程序/设计/前端/默认/默认/布局

或者我们可以把我们的定制放在里面

> app/design/frontend/base/default/layout/local.xml

文件，但我在[magebase](http://magebase.com/magento-tutorials/demystifying-magentos-layout-xml-part-1/)和[magentocommerce](http://www.magentocommerce.com/design_guide/articles/intro-to-layouts)上读过我们可以将布局文件放在

> 应用程序/设计/前端/your_interface/your_theme/layout/

或者

> 应用程序/设计/前端/[包]/[主题]/布局

因此，如果我们在 'app/code/local' 中有类似 'Kaushikamdotcom' 的包，我是否必须在 'app/design/frontend/' 下创建相同的包？我尝试了很多模式，但对我来说没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:51:22.290

我很抱歉我在问这个问题时犯了这样的错误，但我正在回答这个问题，因为很多人都会犯同样的错误。**包装**手段；在 magento 的管理端打开

> **系统->配置->设计**

然后将**配置范围**更改为**Main website**。然后选择**包**部分，取消选中默认复选框并使用您的包名称，例如“测试”。然后创建以下文件夹结构。

> **应用程序/设计/前端/测试/默认/布局**

将您的布​​局 xml 文件放在这里。如果您使用自己的主题，请使用该名称而不是**default**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:08:47.403

这取决于您拥有的 layout-xml 文件。

如果要构建主题，请使用`local.xml`主题目录中的文件。

如果您编写了一个扩展并想在这个新扩展中添加一个块以使用，请添加一个 layout-xml 文件`config.xml`，并将其添加到`base/default/layout/yourname.xml`

当您这样做时，与主题相关的更改仅出现在主题中，与扩展相关的更改与主题无关

# php - 从数组 PHP 中获取所有组合

> ID：14040753
> 
> 赞同：1
> 
> 时间：2012-12-26T12:44:01.693
> 
> 标签：php

我只是需要你的帮助。我正在使用 PHP 构建一个关于学术咨询的系统。基本上我需要一个关于如何实现系统主要功能的算法。主要思想是数组中有一个课程列表，我需要从该列表中获取所有可能的组合。每门课程都有一个指定其大小的单元/编号。算法应该根据一定的大小进行组合。

例如。

```
English - 1
Math - 3
Algebra - 3
History 3
Computer(lec) - 2
Computer(lab) - 1 
```

最大尺寸 = 9。

所以算法应该在不超过大小限制的情况下获得所有组合。

所以结果可能是这样的。

```
(Math , Algebra , History ) the size is equal to 9
(History , Computer(lec), Computer(lab), Algebra)
(English , Computer(lec), Computer(lab), Algebra) 
```

类似的东西。谢谢。我只是需要你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:06:07.313

尝试这样的递归

```
<?php
$aviCourses = array(
    "English"=>1,
    "Math"=>3,
    "Algebra"=>3,
    "History"=>1,
    "Computer(lec)"=>2,
    "Computer(lab)"=>1
);
$foundCombinations = array();
function fillBucket($courses , $remainder ) {
    global $aviCourses,$foundCombinations;
    if($remainder < 0) return; //overfill
    //else first of all put this compination in the list
    $foundCombinations[] = $courses;
    //for every avalable cource which is not in $courses yet
    foreach(array_diff(array_keys($aviCourses),$courses) as $candidate) {
        //call fill bucket recursive
        fillBucket(
            //append the candidate to the courses
            array_merge($courses,array($candidate)),
            //decrement the hours counter
            $remainder-$aviCourses[$candidate]
        );
    }
}
fillBucket(array(),9);
//filter out the duplicates with different order of lectures
array_walk($foundCombinations, sort);
array_walk($foundCombinations, function(&$v){$v = implode($v,',');});
$foundCombinations = array_unique($foundCombinations);
sort($foundCombinations);
array_walk($foundCombinations, function(&$v){$v = explode(',',$v);});
//end filter out
print_R($foundCombinations); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:34:12.010

试试这个：

```
$courses=array('English','Math','Algebra','History','Computer(lec)');
$sizes = array('1','3','3','3','2');
//maximum 6 hours
$limit=9;
//minimum number of 3 courses
$minimum=3;

$possible= array();
function get_comb($previous, $depth){

    global $courses;
    $count=count($courses);
    global $possible;
    global $sizes;
    global $limit;
    global $minimum;

    if ($depth>$count){
        $size_of_course=0;
        foreach($previous as $nr=>$course){
            if($course !== 0){
                $size_of_course+=$sizes[$nr];
            }
            else{
                //remove zeros
                unset($previous[$nr]);
            }

        }
        if ($size_of_course<=$limit&&count($previous)>=$minimum){

           $possible[]=$previous;

        }

        return;
    }

    //either you have this course...
    get_comb(array_merge($previous,array($courses[$depth-1])),$depth+1);
    //or you dont..
    get_comb(array_merge($previous,array(0)),$depth+1);

}
get_comb(array(),1);

//output
echo '<pre>';
var_dump($possible); 
```

在前面的变量中，课程在函数递归时相加。

解释：首先，我计算所有可能的组合。为此，我将课程视为插槽：

```
whether you take the course or not, possibilities:
course a    course b
yes         yes
yes         no
no          yes
no          no 
```

这是通过这部分功能完成的。它是一个递归函数，因此它在函数内调用自身：

```
function get_comb($previous, $depth){       
   //either you have this course...
   get_comb(array_merge($previous,array($courses[$depth-1])),$depth+1);
   //or you dont..
   get_comb(array_merge($previous,array(0)),$depth+1);
}
get_comb(array(),1); 
```

假设：

```
$courses=array('course a','course b'); 
```

递归函数调用看起来像这样（0 表示，您不参加该课程）：http: [//img43.imageshack.us/img43/5688/flowdiagram.png](http://img43.imageshack.us/img43/5688/flowdiagram.png)

之后，如果它们符合要求，我将可能性保存在 $possible: 因为 depth=3 和 count=2, $depth>$count 所以这部分代码开始发挥作用：

```
if ($depth>$count){
    $size_of_course=0;
    foreach($previous as $nr=>$course){
        if($course !== 0){
            //the index of $previous is the same as in $courses and $sizes, so
            //$previous[1],$courses[1],$sizes[1] is logicaly referring to the same course
            //add up all sizes of the courses that are used in this possibility
            $size_of_course+=$sizes[$nr];
        }
        else{
            //remove zeros
            unset($previous[$nr]);
        }

    }
    //the size of the course has to be lower or same as the size limit
    //now without the zeros, count($previous) gives you the amount of courses taken in this possibility
    if ($size_of_course<=$limit&&count($previous)>=$minimum){
       //if it fits, save this possibility in the $possible array
       $possible[]=$previous;

    }

    return;
} 
```

希望我能帮助你。

- - - - - - - - - - - - - - - - - - - - - - -编辑 - - ----------------------------------

归档这个：'如果有计算机（lec），它只会在计算机（实验室）也存在的情况下接受它作为可能的组合'：替换`$possible[]=$previous;`为：

```
 //further conditions are placed here

           //IMPORTANT: the name of the courses down here (in_array('Computer(lec)') have to be EXACTLY the same as in the array $courses.
           //e.g. if in $courses array the name is 'computer(lec)' and down here it's 'Computer(lec)' (uppercase) or 'computer (lec)' (space) it DOES NOT WORK!

           //if Computer(lec) is present...
           if(in_array('Computer(lec)',$previous)){
               //Computer(lab) has to be present too
               if(in_array('Computer(lab)',$previous)){
                   $possible[]=$previous;
               }
               else {
                   //if its not present dont save
                   //do nothing
               }
           }
           else{
           //if computer(lec) is not present, no problem, just save
               $possible[]=$previous;
           } 
```

所以完成的代码将是

```
$courses=array('English','Math','Computer(lec)','Computer(lab)');
$sizes = array('1','1','2','2');
//maximum 6 hours
$limit=9;
//minimum 3 courses
$minimum=0;

$possible= array();
function get_comb($previous, $depth){

    global $courses;
    $count=count($courses);
    global $possible;
    global $sizes;
    global $limit;
    global $minimum;

    //the end of the $courses array is reached
    if ($depth>$count){
        $size_of_course=0;
        foreach($previous as $nr=>$course){
            if($course !== 0){
                //the index of $previous is the same as in $courses and $sizes, so
                //$previous[1],$courses[1],$sizes[1] is logicaly referring to the same course
                //add up all sizes of the courses that are used in this possibility
                $size_of_course+=$sizes[$nr];
            }
            else{
                //remove zeros
                unset($previous[$nr]);
            }

        }
        //the size of the course has to be lower or same as the size limit
        //now without the zeros, count($previous) gives you the amount of courses taken in this possibility

        if ($size_of_course<=$limit&&count($previous)>=$minimum){
           //further conditions are placed here

           //IMPORTANT: the name of the courses down here (in_array('Computer(lec)') have to be EXACTLY the same as in the array $courses.
           //e.g. if in $courses array the name is 'computer(lec)' and down here it's 'Computer(lec)' (uppercase) or 'computer (lec)' (space) it DOES NOT WORK!

           //if Computer(lec) is present...
           if(in_array('Computer(lec)',$previous)){
               //Computer(lab) has to be present too
               if(in_array('Computer(lab)',$previous)){
                   $possible[]=$previous;
               }
               else {
                   //if its not present dont save
                   //do nothing
               }
           }
           else{
           //if computer(lec) is not present, no problem, just save
               $possible[]=$previous;
           }

        }

        return;
    }

    //either you have this course...
    get_comb(array_merge($previous,array($courses[$depth-1])),$depth+1);
    //or you dont..
    get_comb(array_merge($previous,array(0)),$depth+1);

}
get_comb(array(),1);

//output
echo '<pre>';
var_dump($possible); 
```

# git - 删除远程主分支，由于是当前分支而被拒绝

> ID：14040754
> 
> 赞同：95
> 
> 时间：2012-12-26T12:44:04.673
> 
> 标签：git, github, bitbucket

如何从 GitHub/Bitbucket 中删除远程主分支？

我正在努力：

```
# git push bb --delete master
remote: bb/acl: user is allowed. accepted payload.[K
remote: error: refusing to delete the current branch: refs/heads/master[K
To ssh://git@bitbucket.org/user/reponame.git
 ! [remote rejected] master (deletion of the current branch prohibited)
error: failed to push some refs to 'ssh://git@bitbucket.org/user/reponame.git' 
```

我也试过

```
git push bb :master 
```

但这一切都行不通。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-12-26T16:01:53.630

注意：对于**Bitbucket**，您可以通过访问存储库的设置来更改默认分支，并在“ **`Main branch`**”组合框中更改分支。

![Bitbucket 上的主分支](../Images/e88ee66da3ffbeff4c2eb04951f810a4.png)

一旦主分支不再是 master ，那么[您可以推送和删除 master](https://stackoverflow.com/a/10191620/6309)。

[MarsAndBack](https://stackoverflow.com/users/4378314/marsandback)在[评论](https://stackoverflow.com/questions/14040754/deleting-remote-master-branch-refused-due-to-being-the-current-branch/14042998#comment120599570_14042998)中确认这也适用于 GitHub。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-12-26T13:41:28.917

在**设置页面的****选项**点击的**设置**块中（好吧，只需单击 GitHub 存储库页面上的*设置*选项卡），您可以更改默认分支（您还需要在 GitHub 上拥有另一个默认分支） .

 *****![更改 GitHub 上的默认分支](../Images/53e5b87d5421c35be29f5173fc05b806.png)

完成后，您可以将其删除：

```
$ git push bb :master 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-27T17:59:29.790

**2021**年：

*   转到存储库设置
    [![存储库设置菜单项图像](../Images/1a4b6149d6596c26d19f5974de01bc09.png)](https://i.stack.imgur.com/2smJpt.png)
*   向下滚动到高级
*   向下滚动到主分支
*   从下拉列表中选择新分支

[![在此处输入图像描述](../Images/1eca25180453200e8d3ecd82c786892e.png)](https://i.stack.imgur.com/Iu3twm.png)

然后，运行你的 git change 命令，例如`git push bb --delete master`

或者，就我而言，`git push origin :master main`

*注意：您必须是存储库的管理员才能进行此类更改。******

# php - PHP 启动：无法加载动态库

> ID：14040756
> 
> 赞同：7
> 
> 时间：2012-12-26T12:44:26.143
> 
> 标签：php, windows, windows-8, firebird

我正在尝试将 Firebird 2.5.2.26539 用于：

*   视窗 8
*   阿帕奇 2.2.22
*   PHP 5.4.10

当我在 php 中启用 firebird 的扩展时：

```
- extension=php_interbase.dll
- extension=php_pdo_firebird.dll 
```

我收到这些错误：

> [26-Dec-2012 12:08:11 UTC] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\PHP\ext\php_interbase.dll' - 无法找到指定的模块。在第 0 行的未知中
> 
> [26-Dec-2012 12:08:13 UTC] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\PHP\ext\php_pdo_firebird.dll' - 无法找到指定的模块。在第 0 行的未知中

如果我在命令行中创建 PHP -a，则错误消息不同：找不到 fbclient.dll。

我运行了flarerobin，它打开了数据库。所以我将 fbclient.dll 复制到 PHP 根路径。然后错误变为：

> [26-Dec-2012 11:55:46 UTC] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\PHP\ext\php_interbase.dll' - %1 不是有效的 Win32应用。在第 0 行的未知中
> 
> [26-Dec-2012 11:55:46 UTC] PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files (x86)\PHP\ext\php_pdo_firebird.dll' - %1 不是有效的 Win32应用。在第 0 行的未知中

谁能帮我解决这个问题？我怀疑这个版本的 Firebird 仍然没有为 PHP 做正确的扩展。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-07T20:54:08.993

我重复上面 Nenhum Pois é 的评论（有些人可能会错过），因为它是问题的真正解决方案：

> 问题是来自 FB 64 位安装的 fbclient.dll。我刚刚从 32bits 得到 fbclient.dll，将其复制到 PHP 根目录中，它解决了问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T15:20:40.897

Cli 和 Apache PHP 使用两个不同的配置文件运行。这将解释 CLI 模式下缺少的错误消息。可能是此应用程序的扩展未存储在 PHP 扩展文件夹中。我不熟悉windows下的配置，所以你可能需要谷歌搜索windows PHP扩展目录并确保你的扩展文件在那里。

根据您的错误判断，路径是“C:\Program files(x86)\PHP\ext\

在尝试加载它们之前，请确保您的扩展文件在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T09:03:53.867

如果您在 Windows 上运行，请检查您的扩展是否使用与 PHP 解释器相同的 Visual Studio 编译器版本进行编译。

从 PHP 下载页面[https://windows.php.net/download](https://windows.php.net/download)

*   PHP 7.3 = VC15
*   PHP 7.1 = VC14
*   PHP 5.6 = VC11

而示例的 MongoDB 扩展是使用 VC11 编译的，请参阅[https://pecl.php.net/package/mongo/1.6.16/windows](https://pecl.php.net/package/mongo/1.6.16/windows)并检查 DLL 列表文件名`-vc11-`

# html - CSS3：嵌套列表作为列

> ID：14040757
> 
> 赞同：1
> 
> 时间：2012-12-26T12:44:28.597
> 
> 标签：html, css, layout, html-lists

我有看起来像这样的 HTML：

```
<nav class="subnav">
    <ul>
        <li><a href="">Level 1</a></li>
        <li><a href="">Level 1</a></li>
        <li>
            <a href="">Level 1</a>
            <ul>
                <li>
                    <a href="">Level 2</a>
                    <ul>
                        <li><a href="">Level 3</a></li>
                        <li><a href="">Level 3</a></li>
                        <li><a href="">Level 3</a></li>
                    </ul>
                </li>
                <li><a href="">Level 2</a></li>
                <li><a href="">Level 2</a></li>
            </ul>
        </li>
        <li><a href="">Level 1</a></li>
        <li><a href="">Level 1</a></li>
    </ul>
</nav> 
```

我基本上是在寻找一种在 CSS3 中设置样式的简单方法，以便每个子级别显示为右侧的单独列（而不是插入和缩进）；像这样的东西：

```
Level 1    |    Level2    >    Level3
Level 1    |    Level2    |    Level3
Level 1    >    Level2    |    Level3
Level 1    |              |
Level 1    |              | 
```

理想情况下，这些列还应具有以下属性：

*   灵活的宽度，因此其他内容可以在此旁边；它应该对齐/向左浮动
*   任何级别的嵌套，以及每个级别中的任意数量的条目
*   一个通用的包装器，可以扩展新的级别，可以单独设置样式
*   每列应占包装器高度的 100%

我要求太多了吗？:-)

# java - 如何使用webservice和axis2将图像从android存储在mysql数据库中？

> ID：14040759
> 
> 赞同：0
> 
> 时间：2012-12-26T12:44:27.800
> 
> 标签：java, android, mysql, web-services

我在 android 中创建了一个注册页面，其中包含一些名称文本框和一个上传按钮（我用来从图库中获取图像），并且必须将其存储在 mysql 中。

我用谷歌搜索了一些代码，他们正在使用 php，但我没有使用 php。请提供一些有用的链接或代码。如何使用 Web 服务将图像存储到 mysql 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:02:43.970

用这个：

```
public void insertImg(int id , Bitmap img ) {   

    byte[] data = getBitmapAsByteArray(img); // this is a function

    insertStatement_logo.bindLong(1, id);       
    insertStatement_logo.bindBlob(2, data);

    insertStatement_logo.executeInsert();
    insertStatement_logo.clearBindings() ;

}

 public static byte[] getBitmapAsByteArray(Bitmap bitmap) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0, outputStream);       
    return outputStream.toByteArray();
} 
```

并检索：

```
 public Bitmap getImage(int i){

    String qu = "select img  from table where feedid=" + i ;
    Cursor cur = db.rawQuery(qu, null);

    if (cur.moveToFirst()){
        byte[] imgByte = cur.getBlob(0);
        cur.close();
        return BitmapFactory.decodeByteArray(imgByte, 0, imgByte.length);
    }
    if (cur != null && !cur.isClosed()) {
        cur.close();
    }       

    return null ;
} 
```

# batch-file - 将所有驱动器上的文件/文件夹复制到外部驱动器？

> ID：14040763
> 
> 赞同：0
> 
> 时间：2012-12-26T12:44:40.437
> 
> 标签：batch-file

所以，我需要备份办公室里的十几台旧电脑，而且目前没有可用的网络设置。我计划将所有东西都放到外部硬盘上，我通常只使用以下内容。

```
xcopy C:\ F:\Backup /D /E /Y /EXCLUDE:BackupExclude.txt 
```

以上假设 C:\ 是需要从中备份文件/文件夹的驱动器，而 F:\ 是外部 HDD。我正在寻找一种自动化方法。

我想要一个批处理脚本来枚举系统上所有可用驱动器的每个分区，并使用**xcopy**将所有内容复制到以计算机名称命名的目录中的特定外部 HDD 中，并为每个分区/逻辑驱动器提供子目录。

我希望批处理脚本使用其序列号识别外部 HDD。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:46:02.557

那么这里是你的起点。这应该做你问的一切。

```
@echo off
setlocal EnableDelayedExpansion

rem Loop through all of the drives to find the external HDD
for %%D in (A B C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    for /f "tokens=5" %%S in ('vol %%~D:') do set "xSerial=%%S"
    if "%xSerial%"=="ABCD-1234" (
        rem TODO Specify the target copy base location
        set "xTarget=%%~D:\%ComputerName%"
    )
)

rem Loop through all of the drives, skipping the external HDD
for %%D in (A B C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    for /f "tokens=5" %%S in ('vol %%~D:') do set "xSerial=%%S"
    if not "%xSerial%"=="ABCD-1234" (
        pushd "%%~D:\" 2>nul
        if !ErrorLevel! EQU 0 (
            mkdir %xTarget%\%%~D
            xcopy "%%~D:\" "%xTarget%\%%~D" /D /E /Y /EXCLUDE:BackupExclude.txt
        )
        popd
    )
)
endlocal
pause 
```

# excel - 是否有任何 Collection 对象方法可以用其他值替换字符串？

> ID：14040767
> 
> 赞同：0
> 
> 时间：2012-12-26T12:44:58.703
> 
> 标签：excel, vbscript, vba

我正在寻找 VBScript 中的任何集合对象，它能够在一组字符串中找到特定的字符串（可以是 Excel 内容行）。如果目标字符串中的搜索值出现多次，那么所有匹配的值应该需要更换一个更换器。该功能应该与 Excel 中的类似`Application.Match()`。

**编辑**

```
 Elements to be removed -> (14,25,99,78)' in an 1D Array
  ArrayList objects hold -> (11,14,23,14,56,67,25,14,112,21,25,14,99,44,33,99,78)
  Fatser process I want which will process the above Arraylist object and give me the 
  list as - > (11,23,56,67,112,21,44,33) 
```

谢谢，奥雅纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:07:45.773

如果字符串可以用逗号分隔，那么您可以使用`split`. 然后你可以搜索，`ArrayList`因为它允许你添加重复的项目。

您还可以`Replace`在更**方便**的级别使用。

```
Dim strInput as String
strInput = "mystring values are too many values
Replace (strInput, "values", "items")
Msgbox  strInput '-- returns "mystring items are too many items" 
```

**根据 Array 中的值删除 ArrayList 中的元素的代码片段：** 请根据您的数据需要更改代码。登录保持不变。

```
Sub removeInLists()
Dim vArray As Variant
Dim d As Object
Dim arrayList As Object
Dim i As Integer

Set d = CreateObject("Scripting.Dictionary")
Set arrayList = CreateObject("System.Collections.ArrayList")

'--populate array from Range with deletion keywords
vArray = Application.WorksheetFunction.Transpose(Sheets(1).Range("B2:B10"))

arrayList.Add "countries"
arrayList.Add "cities"
arrayList.Add "numbers"
arrayList.Add "hola"
arrayList.Add "decimals"
arrayList.Add "hola"
arrayList.Add "decimals"
arrayList.Add "numbers"

'--put arrayList into the dictionary to get unique values
For i = 0 To arrayList.Count - 1
    If Not d.Exists(arrayList(i)) Then
        d.Add arrayList(i), i
    End If
Next

'--output original arrayList
Sheets(1).Range("C2").Resize(arrayList.Count, _
1) = Application.Transpose(arrayList.toArray)

'-- remove data
For i = LBound(vArray) To UBound(vArray)
    '--remove from dictionary
    If d.Exists(vArray(i)) Then
        d.Remove (vArray(i))
    End If
    '--remove from arrayList
    If arrayList.Contains(vArray(i)) Then
        arrayList.Remove vArray(i)
    End If
Next i

'-- if you want you may save it as a array list or keep it as a dicionary or an array
'--vArray = d.Keys

'--output ArrayList
Sheets(1).Range("D2").Resize(arrayList.Count, _
1) = Application.Transpose(arrayList.toArray)

'-- output final dictionary after deletions
Sheets(1).Range("E2").Resize(d.Count) = Application.Transpose(d.keys)

Set arrayList = Nothing
Set d = Nothing
End Sub 
```

工作表中的输出：

![在此处输入图像描述](../Images/c0265fe39cd68820a0d935fc0d36cb64.png)

# android - AnimationDrawable 在画布上绘制

> ID：14040768
> 
> 赞同：2
> 
> 时间：2012-12-26T12:45:03.057
> 
> 标签：android, animation, android-canvas

我有一个`View`，我在上面画了一个棋盘

```
protected void onDraw(Canvas canvas) {
    for (int i = 0; i < 8; i ++) {
    for (int j = 0; j < 8; j ++) {
        float x = j * width;
        float y = i * height;
        if ((i + j) % 2 == 0) {
            canvas.drawRect(x, y, x + width, y + height, lite_square);
        } 
```

现在，我想`DrawableAnimation`在棋盘的任意一个方格上放置一个对象。我需要任何帮助/解决方案的指针。

# ios - 在我的标签栏后面放置一个视图

> ID：14040770
> 
> 赞同：1
> 
> 时间：2012-12-26T12:45:06.790
> 
> 标签：ios, xcode, uiview, uitabbar, controllers

我有一个带有 3 个按钮的选项卡栏，每个按钮加载一个不同的控制器，因此有一个不同的视图。我想在我的标签栏后面放置一个 UIView，以便它在所有 3 个不同的子控制器上可见。

我怎样才能做到这一点？ ![在此处输入图像描述](../Images/dedd032259d2432d7e4f2bf70e25e699.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:10:49.467

这很容易（这是使用故事板）：

• 创建一个子类`UITabBarController`（我称之为“ `TabViewController`”）。

• 在您的故事板中，选择您的`UITabBarViewController`，并为其指定类 `TabViewController（在右侧栏，第 3 部分，自定义类）。

• 在您的`TabViewController.m`文件中，使用以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIView *theView = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 50, 50)];
    theView.backgroundColor = [UIColor redColor];
    [self.view addSubview:theView];

    [self.view bringSubviewToFront:self.tabBar];
} 
```

`theView`你可以在添加之前做任何你想做的事情`self.view`，这里我只是在位置 (50, 50) 创建一个 50x50 的红色方块。该视图将保持在一切之上！

运行并玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:00:52.533

在 appDelegate 的 Window 上添加绿色横幅。

```
 [self.window addSubview:greenBannerView]; 
```

# zk - ZK 使用没有拖放事件的列表框重新排序

> ID：14040772
> 
> 赞同：1
> 
> 时间：2012-12-26T12:45:08.480
> 
> 标签：zk

正如我正在尝试的那样[这个](http://zkfiddle.org/sample/4k499d/1-Reorder-Columns-in-Listbox#source-2)例子很好地定义了**Nabil Abdel-Hafeez**

它可以很好地解决我在跟踪器中提到的一些小问题。但我想打开一个 DualBox 模式窗口，其中一个列表框包含所有标题名称，其他列表框将包含我们要为列表框显示的标题（我用 getitemrendered 做到了这一点）。我想使用相同的 ZUL 代码而不**getitemrendered 方法。但**用户可以隐藏他/她不想看到的列表框的标题。有人做过这种事情吗？ [这里](http://zk.datalite.cz/examples?p_p_id=ZKDLDemo_WAR_ZKDLDemo11&demoType=ZUL_ONLY)

带有 + 符号的绿色图像显示了我想要实现的相同内容。

当我尝试使用 **Nabil Abdel-Hafeez**但我的问题是我将提供双重列表框，用户可以在其中选择他/她希望在列表框中看到的标题，用户可以通过单击按钮选择标题，用户可以添加一个标题或全部来自双重列表框的标题，当用户单击双重列表框的重新排序按钮时，它将重新排序。在 Nabil 演示中，他正在做这样的事情..

```
for (Listitem item : lHead.getListbox().getItems()) {
  item.insertBefore(item.getChildren().get(from), item.getChildren().get(to));
} 
```

但是，如果用户选择多个我们将如何跟踪哪个将首先出现哪个第二个等等..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:18:31.613

您可以尝试将 MVVM 与 forEach 结合使用，这样您就可以构造字符串数组来显示，这从 6.0.2 开始有效

例如，

**祖尔**

```
<zk>
    <div apply="org.zkoss.bind.BindComposer"
        viewModel="@id('vm') @init('test.TestVM')">
        <listbox model="@load(vm.model)">
            <listhead>
                <listheader forEach="${vm.headers}" label="${each}" />
            </listhead>
            <template name="model" var="cells">
                <listitem>
                    <listcell forEach="${cells}" label="${each}" />
                </listitem>
            </template>
        </listbox>
        <button label="original seq" onClick="@command('originalSeq')" />
        <button label="reverse" onClick="@command('reverse')" />
    </div>
</zk> 
```

**虚拟机**

```
package test;

import org.zkoss.bind.annotation.Command;
import org.zkoss.bind.annotation.NotifyChange;

import org.zkoss.zul.ListModel;
import org.zkoss.zul.ListModelList;

import java.util.*;

public class TestVM {
    private int[] _original = {1, 2, 3};
    private int[] _reverse = {3, 2, 1};
    private int[] _seq = _original;
    private List _rawData;

    public String[] getHeaders () {
        String[] headers = new String[_seq.length];
        for (int i = 0; i < _seq.length; i++) {
            int idx = _seq[i];
            headers[i] = (idx == 1? "First Name" :
                            idx == 2? "Last Name" :
                            idx == 3? "Age" : "");
        }
        return headers;
    }
    public ListModel getModel () {
        if (_rawData == null) {
            getRawData();
        }
        List modelData = new ArrayList();
        for (int i = 0; i < _rawData.size(); i++) {
            Person data = (Person)_rawData.get(i);
            String[] cells = new String[_seq.length];
            for (int j = 0; j < _seq.length; j++) {
                cells[j] = data.getValue(_seq[j]);
            }
            modelData.add(cells);
        }
        return new ListModelList(modelData);
    }
    public void getRawData () {
        _rawData = new ArrayList();
        _rawData.add(new Person("First Name 01", "Last Name 01", 21));
        _rawData.add(new Person("First Name 02", "Last Name 02", 22));
        _rawData.add(new Person("First Name 03", "Last Name 03", 23));
    }
    @Command
    @NotifyChange("model")
    public void originalSeq () {
        _seq = _original;
    }
    @Command
    @NotifyChange("model")
    public void reverse () {
        _seq = _reverse;
    }
    class Person {
        private String _firstName;
        private String _lastName;
        private int _age;

        public Person (String firstName, String lastName, int age) {
            _firstName = firstName;
            _lastName = lastName;
            _age = age;
        }

        public String getFirstName () {
            return _firstName;
        }
        public String getLastName () {
            return _lastName;
        }
        public int getAge () {
            return _age;
        }
        public String getValue (int i) {
            return i == 1? getFirstName() :
                    i == 2? getLastName() :
                    i == 3? getAge() + "" : "";
        }
    }
} 
```

关于forEach，请参考[ZK迭代评估](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Composing/ZUML/Iterative_Evaluation)

## **编辑**

ZK fiddle 上的完全绑定样本

[列表框重新排序单元格](http://zkfiddle.org/sample/a4ruol/5-Listbox-Reorder-Cells)

# macros - Microsoft Word 宏按标题对部分进行排序

> ID：14040775
> 
> 赞同：0
> 
> 时间：2012-12-26T12:45:34.407
> 
> 标签：macros, ms-word

我被要求根据标题对很长的 Word 文件的各个部分进行排序。

有没有简单的方法可以使用宏来做到这一点？如果不可能，您会采用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T23:28:03.297

Word 实际上已经为此提供了内置功能。做一个快速的谷歌搜索给出了以下教程来完成你的要求：[http ://wordribbon.tips.net/T011238_Sorting_by_Headings.html](http://wordribbon.tips.net/T011238_Sorting_by_Headings.html)

我只是按照教程使用 Microsoft Office 2013 没有任何问题，所以希望这会让你继续前进 :)

# android - 当我们单击主布局上的其他区域时，使主布局内的一个布局不可见

> ID：14040777
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:45:48.743
> 
> 标签：android

我有一个包含图像按钮和文本视图的自定义列表视图。现在，当我单击信息图标时，它会打开弹出窗口（实际上是我在单击图像按钮时显示的布局），其中提供了一些描述，当我再次单击该图标时，它变得不可见。但我希望它在我点击任何其他区域时不可见，而不仅仅是在那个信息图标上。

```
//img_Info is the Imagebutton containing i icon
img_Info = (ImageButton)view.findViewById(R.id.img_Info);

img_Info.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
       //llimg_info is the linearlayout that becomes visible on the click event  
       if(llimg_info.isShown()) {
        llimg_info.setVisibility(llimg_info.INVISIBLE);
       }
       else {
        llimg_info.setVisibility(llimg_info.VISIBLE);
       }
   }
}); 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:06:55.940

不确定它是否会有所帮助，但尝试为您的弹出窗口注册一个焦点更改侦听器，以便它何时会失去焦点以使其不可见。

像这样的东西：

```
thePopup.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus) {
            thePopup.setVisibility(View.GONE);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:49:25.930

请尝试以下代码检查 ImageView 的可见性，它将解决您的问题。

```
ImageView llimg_info = (ImageView) findViewById(R.id.img_Info);

if (llimg_info.getVisibility() == 0) {
    System.out.println("Visible");
    llimg_info.setVisibility(llimg_info.INVISIBLE);
} else{
    System.out.println("Invisible");
    llimg_info.setVisibility(llimg_info.VISIBLE);
} 
```

# java - 在递归算法中计算运行时间

> ID：14040778
> 
> 赞同：0
> 
> 时间：2012-12-26T12:46:01.883
> 
> 标签：java, algorithm, recursion, runtime, divide-and-conquer

练习递归和D&C，一个常见的问题似乎是转换数组：我
`[a1,a2,a3..an,b1,b2,b3...bn]`解决`[a1,b1,a2,b2,a3,b3...an,bn]`
它如下（`startA`是`a`s`startB`的开始，是s的开始`b`：

```
private static void shuffle(int[] a, int startA, int startB){  
        if(startA == startB)return;  
        int tmp = a[startB];  
        shift(a, startA + 1, startB);  
        a[startA + 1] = tmp;  
        shuffle(a, startA + 2, startB + 1);  
    }  

    private static void shift(int[] a, int start, int end) {  
        if(start >= end)return;  
        for(int i = end; i > start; i--){  
            a[i] = a[i - 1];   
        }       
    } 
```

但我不确定运行时是什么。不是线性的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:57:44.283

令算法消耗的时间为`T(n)`，`n=startB-startA`。

每次递归调用都会减少 1 的运行时间（`startB-startA`每次调用减少 1 次），所以运行时间是`T(n) = T(n-1) + f(n)`，我们只需要弄清楚是什么`f(n)`。

每次调用的瓶颈是`shift()`操作，它从`startA+1`到迭代`startB`，意思是`n-1`迭代。

因此，算法的复杂度为`T(n) = T(n-1) + (n-1)`。

然而，这是一个已知`Theta(n^2)`函数（[算术级数之和](http://en.wikipedia.org/wiki/Arithmetic_progression#Sum)）——算法的时间**复杂度是`Theta(N^2)`**，因为初始值与（输入的大小）成`startB-startA`线性关系。`N`

# javascript - 用c语言创建登录功能cgi-html。（没有PHP，Apache）

> ID：14040780
> 
> 赞同：0
> 
> 时间：2012-12-26T12:46:06.973
> 
> 标签：javascript, c++, html, c

我在嵌入式环境中工作。我有 Atheros 开发板。我只想使用 cgi 和 html 创建登录页面。我找到了一个库 libcgi。我已经交叉编译了。我也检查了这些例子。

1.  如何在登录页面中使用该库进行会话处理？
2.  哪个cgi库更好？

欢迎任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:39:02.957

CGI 是一个非常简单的东西：它是一个可执行文件，通过标准输入和环境变量获取一些信息。每次有请求时都会执行该脚本。该脚本不管理任何 http 内容（例如侦听端口 80）。

所以你很可能需要一个 http 服务器。它们有很多，不仅 apache 会使用更少的资源。

CGI 根本不管理会话。您将需要一个库来执行此操作（但是，作为一般规则，我会尽量避免使用会话进行 Web 开发。如果您只需要它用于登录，那么使用 Web 服务器进行身份验证会更容易和安全）。由于 CGI 可执行文件在请求结束时关闭，因此需要一些努力来维持状态。

用C写CGI相当痛苦，你不能用任何脚本语言吗？（比如 python 或 ruby​​ ？）。

如果您想通过 http.k 公开您的应用程序，也许您会对[http://www.gnu.org/software/libmicrohttpd/感兴趣](http://www.gnu.org/software/libmicrohttpd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:53:43.957

看看[重量](http://www.webtoolkit.eu/wt/)。它非常适合嵌入式系统的 web gui。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T07:32:10.363

我找到了这个问题的答案。我已经为它准备了一个代码。首先，我要感谢 bmeric 和 Tristram。我看了一下这两个建议。microhttpd 很有帮助。但是 wt 的尺寸很大，所以我的板子不支持它。

最后让我告诉你我是如何管理这些事情的。在我的董事会中，我已经告诉过 httpd 正在运行。这是busybox的一部分。现在我已经准备好 html 页面和 java 脚本，它会将标头中的 cookie 发送到服务器。

我的服务器正在接受 HTTP_COOKIE 环境变量中的 cookie。所以我在我的代码中使用了 getEnv 函数。基于此，我开发了登录页面的代码。

这是函数调用：getenv("HTTP_COOKIE")

再次感谢。

# python-2.7 - 使用 Try: 和 finally: 删除现有文件并将新输出写入文件

> ID：14040781
> 
> 赞同：0
> 
> 时间：2012-12-26T12:46:17.540
> 
> 标签：python-2.7, try-finally

我试图检查并删除现有的输出文件，并写入一个新文件。但是，我的代码似乎不起作用，因为它只捕获上次迭代的输出。

```
# delete inactive contracts from dict()
for key, item in contracts.items():
    if item['contract_status'] == 'Inactive':
        del contracts[key]
    else:
        if os.path.exists(main_path):
            try:
                os.remove(main_path)
            finally:
                outfile = open(main_path, 'a')
                outfile.write(item['name'])
                outfile.write('\n')
            outfile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:49:46.533

不要删除文件，只需打开它进行写入：

```
else:
    with open(main_path, 'w') as outfile:
        outfile.write(item['name'])
        outfile.write('\n') 
```

打开`w`文件首先会截断文件，因此写入其中的数据会替换旧内容。请注意，您正在为循环中的*每次迭代编写文件。*

通过将该文件用作上下文管理器 ( `with ..`)，它会自动关闭。

如果要将所有条目写入文件，请在循环*外打开文件：*

```
with open(main_path, 'w') as outfile:
    for key, item in contracts.items():
        if item['contract_status'] == 'Inactive':
            del contracts[key]
        else:
            outfile.write(item['name'])
            outfile.write('\n') 
```

*如果仅*当 中没有非活动项时才需要重新写入文件，请`contracts`使用：

```
contracts = {k: v for k, v in contracts.iteritems() if v['contract_status'] != 'Inactive'}
if contracts:
    with open(main_path, 'w') as outfile:
        for contract in contracts.values():
            outfile.write(item['name'])
            outfile.write('\n') 
```

现在您首先删除不活动的项目，然后如果仍有合同，则将其写入文件。如果没有剩余，则该`main_path`文件保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:59:06.137

```
outfile = open(main_path, 'w') # this truncates existing file if any

# delete inactive contracts from dict()
for key, item in contracts.items():
    if item['contract_status'] == 'Inactive':
        del contracts[key]
    else:
        outfile.write(item['name'])
        outfile.write('\n')

outfile.close() 
```

应该改写成这样的吗？

# linux - Board 是否依赖于底层架构的封装？

> ID：14040788
> 
> 赞同：0
> 
> 时间：2012-12-26T12:46:44.687
> 
> 标签：linux, embedded

我想知道Board up package underlaying architecture是否依赖？actullay 想知道的是，我们是否可以让 64 位架构运行 32 位 bsp 代码或 BSP 代码总是 64 位，因为 BSP 代码是特定于架构的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:01:00.213

是的，一点没错。BSP 非常特定于处理器的体系结构和电路板本身。话虽如此，在 64 位上运行可能不需要太多更改。大多数 BSP 包含的一件事是一段启动代码，用于初始化系统中的硬件寄存器。当您迁移到 64 位时，其中一些可能会发生变化。

第二部分是引导加载程序，它将内核/操作系统/任何东西加载到 RAM 中（通常 - 它可能只是将 ROM 区域初始化为可执行并正确设置它）。同样，这可能需要更改，因为它可能“跳转到 32 位操作系统”，而操作系统可能期望 64 位跳转。

然后你就有了操作系统/内核本身，这显然需要重新编译。

您实际需要做多少工作取决于板子的架构、您使用的处理器，以及最重要的是操作系统和上层软件在 64 位模式下运行的要求 - 内存设置是否由初始化代码或引导加载程序需要更改吗？什么时候从 32 位切换到 64 位——在操作系统内部还是外部？

这可能不是您要寻找的答案，但我认为除了那些熟悉 BSP 的人之外，没有人能够准确说出您需要更改的内容 - 我很确定这不是完全重写，但可能会有是沿着“我们知道一个指针是 32 位，所以一个 int 将保存一个指针”或“我们知道一个指针是四个字节，所以我们在这里保留四个字节......”的假设负载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:23:48.607

垫子几乎覆盖了它。与任何其他应用程序一样，它是您所针对的两个或多个平台以及应用程序的需求和设计的组合。这些架构可能相距甚远，以至于尝试使用单个 BSP 来定位它们是毫无意义的。如果架构足够相似，您可以使用单个 BSP 来定位它们，但您可以选择也可以不选择。Linux 或 BSD 就是一个很好的例子，有相当多的代码是多平台的，有一些平台特定的部分。bsp 没有什么不同，通常只是不那么复杂，您的大多数代码通常是 C 或一些类似的语言，所以无论您编译成什么都是目标，引导程序和其他一些类似的部分是 asm，这些都是特定于目标的。FreeRTOS 可能比 Linux 或 BSD 更好。

# ms-access-2003 - MS-Access 活动用户名自动填充文本框

> ID：14040789
> 
> 赞同：1
> 
> 时间：2012-12-26T12:46:44.893
> 
> 标签：ms-access-2003

是否存在与 Excel 代码 Application.UserName 等效的 Access 来自动填充文本框作为默认值？

根据 HansUp 的反馈，我进行了如下修改

```
Private Sub Form_Load()
Me.LastChgUser = Excel.Application.UserName
End Sub 
```

作为表单的加载事件。我现在收到一个编译错误：找不到方法或数据成员。Txt 框“LastChgUser”位于子表单“Staffing”上，作为“Associate Lookup”的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:25:19.857

Access'`CurrentUser()`函数返回 Access 安全帐户名称，除非您设置了用户级安全性，否则它将是“Admin”。

您可以使用 Windows API 来获取当前 Windows 用户的名称。尝试[Get Login name](http://access.mvps.org/access/api/api0008.htm)`fOSUserName()`中的功能。

另一种选择是`Environ()`函数：

```
? Environ("USERNAME")
hans 
```

尽管这种方法不安全，但它可能足以满足您的目的：加载允许用户更改的默认值。但是，安全设置可能不允许您直接将其用作文本框的控制源。

# android - 如何为具有按钮等的列表项创建自定义适配器*简单的方式*

> ID：14040791
> 
> 赞同：-1
> 
> 时间：2012-12-26T12:46:51.040
> 
> 标签：android, sqlite, listview, simplecursoradapter, custom-adapter

我遇到了其中一些回答了这个问题的问题，但并没有在我发现可扩展的问题中完全构建类，很多时候它会覆盖函数，特别是当我使用的是处理数据填充的`SimpleCursorAdapter`a 而不是 a时自动进入列表项。`BaseAdapter``SQLite``getView`

我的答案中提供的代码是为了向您展示如何开发一个`ListAdapter`可以添加可以处理点击事件的按钮的方式，而不启用列表项上的点击事件或完全覆盖您扩展的类的原始绘制事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:46:51.040

首先，您的行的 XML，如果您要对其进行任何更改，只需在代码中更新 4 按钮的 ID，自定义部分不需要其余的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_height="wrap_content" android:id="@+id/tag_row_layout"
     android:orientation="horizontal" android:layout_width="wrap_content">

     <TextView android:layout_width="wrap_content"
          android:layout_height="fill_parent" android:id="@+id/name"
          />
     <Button
          android:id="@+id/delete_button"
          android:layout_width="wrap_content" 
          android:layout_height="fill_parent" 
          android:text="Do Stuff"
          />
</LinearLayout> 
```

这是一个非常简单的列表视图，使用 LinearLayout 它只会在文本旁边显示按钮，这没什么了不起的。

下一部分是像这样拥有适配器的代码......

```
public class CustomListAdapter extends SimpleCursorAdapter {

    public CustomListAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, layout, c, from, to);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        convertView = super.getView(position, convertView, parent);

        Button btn = (Button)convertView.findViewById(R.id.delete_button);
        btn.setOnClickListener(new DeleteButton());

        return convertView;
    }

    protected final static class DeleteButton implements OnClickListener {
        public void onClick(View v) {
            Log.e("TestButton", "It's been fired!!!");
        }
    }
} 
```

然后，您可以将其扩展到多个按钮，但在列表项中创建更多按钮`XML`，然后`static class`在`CustomListAdapter`. 这对于扩展非常有用，`SimpleCursorAdapter`因为它仍然会将正确的数据注入到正确的文本视图中。

# windows - 批处理文件 - 如何检查是否设置了 bin 文件夹的路径

> ID：14040793
> 
> 赞同：2
> 
> 时间：2012-12-26T12:46:57.393
> 
> 标签：windows, batch-file, dos

我的批处理文件我想检查是否设置了以下位置的路径

```
 C:\Program Files(x86)\Windows Installer XML v3.5\bin 
```

在系统变量或用户定义变量中的任何变量中

我需要使用 bin 文件夹的内容；如果用户没有安装上面引用的方式但做了类似的事情怎么办

```
C:\WindowsinstallerXML\bin 
```

或 D:\WindowsInstaller\bin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:39:43.830

如果您想检查字符串的每个已定义变量，这就是方法。如果您想专门检查替换为的路径变量`set`也`echo %path%`可以。

```
set | find "C:\Program Files(x86)\Windows Installer XML v3.5\bin" > NUL 2>&1 || goto badinstall 
```

如果你想检查安装目录，我建议检查它是否有注册表值，如果有你可以像这样拉它。

```
for /f "tokens=3 delims=    " %%a in ('reg query \HKCU\path\to\subkey\here /v "keyhere" ^| findstr /C:"keyhere"') do set wixmlpath=%%a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:55:41.947

您可以使用：

```
PATH="C:\Program Files(x86)\Windows Installer XML v3.5\bin";%PATH% 
```

基本上，与其检查是否已设置，为什么不在脚本中明确设置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:03:19.717

如果您知道其中一个二进制文件的名称，则可以使用 FOR 变量`~PATH:`修饰符来检查该二进制文件的路径当前是否在您的 PATH 中。它会给你实际的路径:)

```
for %F in (someFile.exe) do @if "%~$path:F" neq "" echo %~$path:F 
```

如果要在批处理文件中使用代码，则`%`必须将每个代码加倍为`%%`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:23:43.980

```
@echo off
set input=%1
IF DEFINED input (ECHO you entered %input%) ELSE (ECHO usage: script bin_file_path) 
```

# wpf - WPF/Silverlight 实时渲染模糊效果

> ID：14040794
> 
> 赞同：1
> 
> 时间：2012-12-26T12:47:02.777
> 
> 标签：wpf, multithreading, silverlight, dispatcher, blur

在我的 WPF 项目中，我完成了单击一些 UI 元素的操作：

```
 void vb1_click(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        DispatcherTimer dt = new DispatcherTimer();
        dt.Interval = new TimeSpan(0, 0, 0, 0, 1000);
        dt.Tick += new System.EventHandler(dt_Tick);
        dt.Start();
    }

    void dt_Tick(object sender, System.EventArgs e)
    {
        for(int i = 0; i < 20; i++)
        {
            this.vb2_blur_eff.Radius = (double)i;
        }
    } 
```

主要问题是：“我看不到每秒模糊效果的每一步。程序处于空闲状态，当该过程完成时，它给了我模糊 UI 元素的最后一步。

我不想要它，因为两个程序空闲看起来都很难看，我想实际看到每个时期的渲染结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:31:37.890

我看到的主要问题是您正在使用 For 循环来设置模糊半径，因此它坐在那里将其调到最大值，然后将控制权返回给调度程序，然后调度程序对其进行更新。我更喜欢用 StoryBoard 来做，但你可以用定时器来做，让定时器在每个刻度上设置半径，当它达到最大值然后停止。您可以使用计时器的时间间隔来控制扩散的速度。我正在使用一个名为 count 的类级别变量。

```
void vb1_click(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    DispatcherTimer dt = new DispatcherTimer();
    dt.Interval = new TimeSpan(0, 0, 0, 0, 20);
    dt.Tick += new System.EventHandler(dt_Tick);
    count = 0;
    dt.Start();
}

void dt_Tick(object sender, System.EventArgs e)
{
    DispatcherTimer tmr = (DispatcherTimer)sender;
    this.vb2_blur_eff.Radius = (double)count;
    if (count == 20)
    {
        tmr.Stop();
        tmr.Tick -= new System.EventHandler(dt_Tick);
    }

    count += 1;
} 
```

# android - 如何使用 WebView 在 android 应用程序中访问我的 Web 应用程序 JavaScript 方法？

> ID：14040797
> 
> 赞同：0
> 
> 时间：2012-12-26T12:47:29.627
> 
> 标签：android, android-webview

我有一个`WebView`我的网页。现在我如何调用`JS`该网页的方法并在`UI`. 例如，我有这种获取幻灯片数量的方法。

> $.Docs.get.fileCount()

如何`JS`从 android 调用此方法并更新 .? 中的幻灯片计数`UI`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:52:58.030

尝试这样的事情：

```
webWiew.loadUrl("javascript: {document.getElementById('userid').value ='"+userName+"'};"); 
```

# c++ - 为什么我的 Qt 应用程序无故崩溃？

> ID：14040800
> 
> 赞同：6
> 
> 时间：2012-12-26T12:47:41.450
> 
> 标签：c++, qt

我正在编写一个中型应用程序，用于存储基于 sqlite 数据库的数据。我创建了一个对话框来将数据添加到数据库中。在保存数据之前，它会检查一些条件以确保输入的数据是有效的。这是一个简单的散文。并且容易发现故障。我很高兴他们没有错误地使应用程序崩溃。应用程序也编译没有错误。有时它运行良好，但大多数探测它会崩溃并关闭。

1.  我的第一个问题是为什么会发生这种事情。（有时它运行良好，有时它在相同的条件下崩溃）。

2.  在这种情况下如何查找故障。我所做的只是，我使用更改逻辑和更改代码，认为它会更改二进制文件并纠正错误。

    前任：-

    ```
    if(query.exec()){
         //codes here.
     } 
    ```

    我将把这段代码替换为

    ```
    bool ok=query.exec();
      if(ok){
           //code here....
     } 
    ```

请在这种情况下帮助我，我将不胜感激任何建议。我将添加`newMember.h`and `newMember.cpp` which 使应用程序崩溃。（这是我的`new member`对话类）。如果需要更多数据，请告诉我我也会添加它们。

在错误报告中，在错误签名中提到了`ModName:qtgui4.dll , Offset: 000c14e6`

新成员.h

```
 #ifndef NEWMEMBER_H
       #define NEWMEMBER_H

       #include "ui_newmember.h"

       class newMember : public QDialog, private Ui::newMember
       {
           Q_OBJECT

       private:
           QString path_1;
           QPixmap pic;

       public:
           newMember(QString str, QWidget *parent );

       public slots:
           void browse();
           void save_2();

      };

      #endif // NEWMEMBER_H 
```

新成员.cpp

```
 #include "newmember.h"
        #include<QtGui>
        #include<QtSql/QSqlDatabase>
        #include <QSqlQuery>
        #include <QSqlError>

        newMember::newMember(QString str, QWidget *parent)
        {
              setupUi(this);
           lineEdit_7->setText(str);
           radioButton->setChecked(true); ;

           connect(pushButton,SIGNAL(clicked()),this,SLOT(browse()));
           connect(pushButton_2,SIGNAL(clicked()),this,SLOT(save_2()));
        }

        void newMember::browse(){
             path_1=QFileDialog::getOpenFileName(this,"choose an image for the new house", QString::null,"Image Files (*.jpg *.bmp)");
             pic.load(path_1);
             pic=pic.scaled(284,213,Qt::KeepAspectRatio, Qt::SmoothTransformation);
             label_14->setPixmap(pic);
        }

        QString input1(QString str){
             if(str=="")
                 return "-NA-";
              else
                return str;
        }

       void newMember::save_2(){
             QByteArray array;
             QBuffer buf(&array);
             buf.open( QIODevice::WriteOnly);
             pic.save(&buf,"jpg");

             QString mof;
             if(radioButton->isChecked())mof="male";
             if(radioButton_2->isChecked())mof="female";

             QString isgm="false";
             if(checkBox->isChecked())isgm="true";

            QSqlDatabase db=QSqlDatabase::addDatabase("QSQLITE");
            db.setDatabaseName("data");
            db.open();

            QSqlQuery query;
            query.exec("create table members(aname text, homeno text, namein text, fname text, onames text, nic text, sex text, bday text,gm text,occupation text,contactno text,qulification text,note text, img BLOB) ");

             if(lineEdit_8->text()==""){
             QMessageBox::about(this,"error","you should enter a name to identify this member \n within the specific house");
             return;
             }

             query.prepare("select aname from members where homeno=? and aname=?   ");
             query.bindValue(0,lineEdit_7->text());
             query.bindValue(1,lineEdit_8->text());
             query.exec();
             if(query.next()){
             QMessageBox::about(this, "error", "the name you entered to identify this member \n  is already available, please enter another one") ;
             return;
            }

              if(isgm=="true"){
                  query.prepare("select aname from members where homeno=? and gm=?");
                  query.bindValue(0,lineEdit_7->text());
                  query.bindValue(1,"true");
                  query.exec();
                      if(query.next()){
                          QMessageBox::about(this, "error", "there is a gruha mulikaya set already");
                         return;
                        }
                }

                 query.prepare("insert into members(aname, homeno , namein , fname , onames , nic , sex , bday ,gm ,occupation ,contactno ,qulification ,note ,img) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)     ");
                 query.bindValue(0,lineEdit_8->text());
                 query.bindValue(1,input1(lineEdit_7->text()));
                 query.bindValue(2,input1(lineEdit->text()));
                 query.bindValue(3,input1(lineEdit_2->text()));
                 query.bindValue(4,input1(lineEdit_3->text()));
                 query.bindValue(5,input1(lineEdit_4->text()));
                 query.bindValue(6,mof);
                 query.bindValue(7,dateEdit->date().toString("yyyy-MM-dd") );
                 query.bindValue(8,isgm);
                 query.bindValue(9,input1(lineEdit_5->text()));
                 query.bindValue(10,input1(lineEdit_6->text()));
                 query.bindValue(11,input1(textEdit->toPlainText()));
                 query.bindValue(12,input1(textEdit_2->toPlainText()));
                 query.bindValue(13,array);

                bool ok=query.exec();
                if(!ok){
                   QSqlError error;
                   error=query.lastError();
                   QMessageBox::about(this,"error",error.text()   );
                 }
                else{
                    QMessageBox::about(this,"message","data added successfully");
                    newMember::close();
                 }

              } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:52:18.080

1.  尝试在调试器下运行您的应用程序。它将显示您的应用程序在代码中崩溃的位置。在您的情况下，它可能是段错误。
2.  为什么不检查返回值？

# jquery - jQuery根据复选框状态过滤

> ID：14040801
> 
> 赞同：2
> 
> 时间：2012-12-26T12:47:45.253
> 
> 标签：jquery, checkbox

我正在使用 jQuery "filterable" 插件来过滤数据，这个插件最初通过点击类别的名称链接来过滤数据，现在我想将链接更改为复选框，所以如果选中复选框，则显示某个类别，如果它得到未经检查，它会隐藏。这是jQuery：

```
(function(jQuery) {
    jQuery.fn.filterable = function(settings) {
        settings = jQuery.extend({
            useHash: true,
            animationSpeed: 1000,
            show: { width: 'show', height: 'show', opacity: 'show' },
            hide: { width: 'hide', height: 'hide', opacity: 'hide' },
            useTags: true,
            tagSelector: '#portfolio-filter input[type=checkbox]',
            selectedTagClass: 'current',
            allTag: 'all'
        }, settings);

        return jQuery(this).each(function(){

            /* FILTER: select a tag and filter */
            jQuery(this).bind("filter", function( e, tagToShow ){
                if(settings.useTags){
                    jQuery(settings.tagSelector).removeClass(settings.selectedTagClass);
                    jQuery(settings.tagSelector + '[value=' + tagToShow + ']').addClass(settings.selectedTagClass);
                }
                jQuery(this).trigger("filterportfolio", [ tagToShow.substr(1) ]);
            });

            /* FILTERPORTFOLIO: pass in a class to show, all others will be hidden */
            jQuery(this).bind("filterportfolio", function( e, classToShow ){
                if(classToShow == settings.allTag){
                    jQuery(this).trigger("show");
                }else{
                    jQuery(this).trigger("show", [ '.' + classToShow ] );
                    jQuery(this).trigger("hide", [ ':not(.' + classToShow + ')' ] );
                }
                if(settings.useHash){

                    location.hash = '#' + classToShow;
                }
            });

            /* SHOW: show a single class*/
            jQuery(this).bind("show", function( e, selectorToShow ){
                jQuery(this).children(selectorToShow).animate(settings.show, settings.animationSpeed);
            });

            /* SHOW: hide a single class*/
            jQuery(this).bind("hide", function( e, selectorToHide ){
                jQuery(this).children(selectorToHide).animate(settings.hide, settings.animationSpeed);  
            });

            /* ============ Check URL Hash ====================*/
            if(settings.useHash){
                if(location.hash != '')
                    jQuery(this).trigger("filter", [ location.hash ]);
                else
                    jQuery(this).trigger("filter", [ '#' + settings.allTag ]);
            }

            /* ============ Setup Tags ====================*/
            if(settings.useTags){
                jQuery(settings.tagSelector).click(function(){
                    jQuery('#portfolio-list').trigger("filter", [ jQuery(this).attr('value') ]);

                    jQuery(settings.tagSelector).removeClass('current');
                    jQuery(this).addClass('current');
                });
            }
        });
    }
})(jQuery); 
```

我正在使用“ hash”方法，因此在选中了相对复选框时，它在页面URL末尾添加了类似“ #categoryname”，然后显示与该复选框相关的一些项目，现在我想在该复选框未选中，并且还删除了该哈希。

# iphone - CoreData 多对多关系的慢速插入

> ID：14040804
> 
> 赞同：0
> 
> 时间：2012-12-26T12:48:13.627
> 
> 标签：iphone, ios, core-data

我有两个模型，它们之间存在多对多关系。模型 A 以空状态开始，而模型 B 有大约 220k 条记录（索引相当大，但这不应该影响，因为这个模型永远不会更新）。

从 A->B 的对多如下：

*   可选 => 假
*   瞬态 => 假
*   索引 => 真
*   有序 => 真
*   minCount => 0
*   maxCount => NSIntegerMax
*   deleteRule => NSCascadeDeleteRule

B->A 的一对多如下：

*   可选 => 真
*   瞬态 => 假
*   索引 => 假
*   有序 => 假
*   minCount => 0
*   maxCount => NSIntegerMax
*   deleteRule => NSNullifyDeleteRule

当然，每个关系都被设置为另一个关系。我面临的问题如下：在创建新实体 A 之前，应用程序执行一个获取请求，该请求获取实体 B 的大约 2k 条记录。然后，应用程序将这些记录设置为即将创建的实体 A，然后保存上下文。问题是将 2k 条记录的 nsorderedset 设置为实体 A 实例在装有 iOS 6.0.1 的 iPhone 4S 中或多或少需要 4 秒，而在同一设备中保存上下文又或多或少需要 4 秒。这使得创建模型 A 的新实例需要 8 秒。

我已经尝试启用/禁用模型 A 中的索引关联属性，但这并没有产生如此大的差异。我要完成的任务有那么重吗？

进行了一些测试，我观察到大部分时间都因为反向关系而丢失了将 nsorderedset 设置为实体 A 实例。我做了一个快速测试，将目标模型中的多对多关系更改为无反比关系的多对多，然后插入时间减少到一半。当然，这打破了多对多的关系。这只是一个快速测试。

我在这里错过了什么吗？由于该应用程序只保存一次上下文，而不是每个记录 B 一次，因此保存 2k 条记录不应该花那么长时间，但我是 iPhone 开发的新手，也许我正在执行的这个任务是这种设备太多了。

任何提示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:23:29.850

费尔德夫，

谢谢你写得很好的问题。很明显，在寻求帮助之前，您已经仔细考虑了您的问题。这对每个人都有帮助。

Core Data 在保存时似乎不使用块操作。因此，您将在那里遇到性能问题。虽然关系设置应该比您看到的要快。（顺便说一句，大多数性能问题是由闪存的速度驱动的。在 iOS 设备上速度很慢。因此，预取以使您的 MOC 保持数据热很重要. 批量获取很重要。）

我提出几点意见：

为什么 A->B 对多关系既是索引又是有序的？订购会减慢您的插入速度。索引关系是否也有意义？

您是否使用批量关系设置器 ( `-add<Key>:`)？

Are you fetching all 2000 of your entity B records before you set them to the entity A instance?

Even though this doesn't affect your insert performance, why does the delete rule from A->B cascade? You write above entity B doesn't change.

Andrew

# android - 在 Android 上浏览 AIR 中的文件夹？

> ID：14040808
> 
> 赞同：1
> 
> 时间：2012-12-26T12:48:28.757
> 
> 标签：android, actionscript-3, apache-flex, air, flex4.5

我正在尝试以下操作，但它似乎不适用于 Android 上的代码，只有它适用于桌面应用程序。

```
var f : File = new File;
    f.addEventListener( Event.SELECT, onFolderSelected );
    f.browseForDirectory( "Select home directory" ); 
```

*   Android下如何浏览文件夹？

*（Flex 4.6，AIR 应用程序）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:28:36.173

`browseForDirectory`不适用于android，这在文档中明确说明。

因此，您必须实现自己的选择对话框。

您可以在此处查看实现示例：

[http://forums.adobe.com/message/4107990#4107990](http://forums.adobe.com/message/4107990#4107990)

但是，如果您想查看标准的 android 对话框，则必须使用本机扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:50:51.710

您可以为此创建一个[ANE](http://www.adobe.com/devnet/air/native-extensions-for-air.html)。

# iphone - 如何替换当前打开的保留当前队列的 FMDB 数据库？

> ID：14040811
> 
> 赞同：2
> 
> 时间：2012-12-26T12:48:48.637
> 
> 标签：iphone, objective-c, ios, sqlite, fmdb

我有一个关于将数据存储在 SQLite 中的应用程序的问题。使用**FMDB**包装器读取数据，如果服务器端数据库发生更改，则必须对用户透明地更新数据。

`FMDatabase`为了实现这一点，每当下载新数据库时，我都会用一个新对象替换我的单例中的整个对象。

但是，对于瞬间查询将失败，例如，如果用户当前正在滚动表视图。

那么问题来了，如何`.sqlite`在保留当前队列的同时替换当前打开的文件呢？

编辑：查询经常针对数据库运行，例如在滚动视图时有 count()s，因此没有简单的方法可以暂时“阻止”用户与数据库交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:32:14.240

`UIActivityIndicatorView`在数据库更新的那一瞬间添加一个可以吗？您可以在传输开始时将其打开，并在回调时将其关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T06:02:30.027

在我看来，您会将 SQLite 数据库中的数据源存储在数组或其他集合中，对吗？

因此，每当您完成从服务器下载更新的数据库时，请发布“DatabaseUpdated”通知。（此代码应该在您的共享单例中）。

并且，让您的视图控制器成为此通知的观察者。

收到此通知后，只需调用`[tableView reloadData];`您的视图控制器。

因此，实际上，您的视图将根据您的新数据库更改进行更新。

# python - Python + Twisted + FtpClient + SOCKS

> ID：14040816
> 
> 赞同：2
> 
> 时间：2012-12-26T12:49:35.703
> 
> 标签：python, ftp, twisted, socks

我刚开始使用 Twisted。我想连接到 FTP 服务器并执行一些基本操作（如果可能，使用线程）。我正在使用这个[例子](http://twistedmatrix.com/documents/current/core/examples/ftpclient.py)。

哪个做得很好。问题是如何在代码中添加 SOCKS4/5 代理使用？有人可以提供一个工作示例吗？我也试过这个[链接](https://github.com/ln5/twisted-socks)。

但，

```
 # Copyright (c) Twisted Matrix Laboratories.
    # See LICENSE for details.

    """
    An example of using the FTP client
    """

    # Twisted imports
    from twisted.protocols.ftp import FTPClient, FTPFileListProtocol
    from twisted.internet.protocol import Protocol, ClientCreator
    from twisted.python import usage
    from twisted.internet import reactor, endpoints

    # Socks support test
    from socksclient import SOCKSv4ClientProtocol, SOCKSWrapper
    from twisted.web import client

    # Standard library imports
    import string
    import sys
    try:
        from cStringIO import StringIO
    except ImportError:
        from StringIO import StringIO

    class BufferingProtocol(Protocol):
        """Simple utility class that holds all data written to it in a buffer."""
        def __init__(self):
            self.buffer = StringIO()

        def dataReceived(self, data):
            self.buffer.write(data)

    # Define some callbacks

    def success(response):
        print 'Success!  Got response:'
        print '---'
        if response is None:
            print None
        else:
            print string.join(response, '\n')
        print '---'

    def fail(error):
        print 'Failed.  Error was:'
        print error

    def showFiles(result, fileListProtocol):
        print 'Processed file listing:'
        for file in fileListProtocol.files:
            print '    %s: %d bytes, %s' \
                  % (file['filename'], file['size'], file['date'])
        print 'Total: %d files' % (len(fileListProtocol.files))

    def showBuffer(result, bufferProtocol):
        print 'Got data:'
        print bufferProtocol.buffer.getvalue()

    class Options(usage.Options):
        optParameters = [['host', 'h', 'example.com'],
                         ['port', 'p', 21],
                         ['username', 'u', 'webmaster'],
                         ['password', None, 'justapass'],
                         ['passive', None, 0],
                         ['debug', 'd', 1],
                        ]

    # Socks support                    
    def wrappercb(proxy):
        print "connected to proxy", proxy
        pass

    def run():
        def sockswrapper(proxy, url):
            dest = client._parse(url) # scheme, host, port, path
            endpoint = endpoints.TCP4ClientEndpoint(reactor, dest[1], dest[2])
            return SOCKSWrapper(reactor, proxy[1], proxy[2], endpoint)

        # Get config
        config = Options()
        config.parseOptions()
        config.opts['port'] = int(config.opts['port'])
        config.opts['passive'] = int(config.opts['passive'])
        config.opts['debug'] = int(config.opts['debug'])

        # Create the client
        FTPClient.debug = config.opts['debug']
        creator = ClientCreator(reactor, FTPClient, config.opts['username'],
                                config.opts['password'], passive=config.opts['passive'])
        #creator.connectTCP(config.opts['host'], config.opts['port']).addCallback(connectionMade).addErrback(connectionFailed)

        # Socks support
        proxy = (None, '1.1.1.1', 1111, True, None, None)
        sw = sockswrapper(proxy, "ftp://example.com")
        d = sw.connect(creator)
        d.addCallback(wrappercb)

        reactor.run()

    def connectionFailed(f):
        print "Connection Failed:", f
        reactor.stop()

    def connectionMade(ftpClient):
        # Get the current working directory
        ftpClient.pwd().addCallbacks(success, fail)

        # Get a detailed listing of the current directory
        fileList = FTPFileListProtocol()
        d = ftpClient.list('.', fileList)
        d.addCallbacks(showFiles, fail, callbackArgs=(fileList,))

        # Change to the parent directory
        ftpClient.cdup().addCallbacks(success, fail)

        # Create a buffer
        proto = BufferingProtocol()

        # Get short listing of current directory, and quit when done
        d = ftpClient.nlst('.', proto)
        d.addCallbacks(showBuffer, fail, callbackArgs=(proto,))
        d.addCallback(lambda result: reactor.stop())

    # this only runs if the module was *not* imported
    if __name__ == '__main__':
        run() 
```

我知道代码是错误的。我需要解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T23:26:05.740

好的，这里有一个解决方案（[gist](https://gist.github.com/4409975)），它使用了 python 的内置[`ftplib`](http://docs.python.org/2/library/ftplib.html)以及开源[`SocksiPy`模块](https://github.com/mikedougherty/SocksiPy)。

它不使用twisted，也没有明确使用线程，但是使用和在python的标准模块中很容易在线程`threading.Thread`之间`threading.Queue`使用[和`threading`通信](http://docs.python.org/2/library/threading.html)

基本上，我们需要继承 ftplib.FTP 以支持替换我们自己的`create_connection`方法并添加代理配置语义。

“主要”逻辑只是配置一个通过 localhost socks 代理连接的 FTP 客户端，例如由 创建的代理，`ssh -D localhost:1080 socksproxy.example.com`并将 GNU autoconf 的源快照下载到本地磁盘。

```
import ftplib
import socket
import socks  # socksipy (https://github.com/mikedougherty/SocksiPy)

class FTP(ftplib.FTP):
    def __init__(self, host='', user='', passwd='', acct='',
                 timeout=socket._GLOBAL_DEFAULT_TIMEOUT,
                 proxyconfig=None):
        """Like ftplib.FTP constructor, but with an added `proxyconfig` kwarg

        `proxyconfig` should be a dictionary that may contain the following
        keys:

        proxytype - The type of the proxy to be used. Three types
                are supported: PROXY_TYPE_SOCKS4 (including socks4a),
                PROXY_TYPE_SOCKS5 and PROXY_TYPE_HTTP
        addr -      The address of the server (IP or DNS).
        port -      The port of the server. Defaults to 1080 for SOCKS
                servers and 8080 for HTTP proxy servers.
        rdns -      Should DNS queries be preformed on the remote side
                (rather than the local side). The default is True.
                Note: This has no effect with SOCKS4 servers.
        username -  Username to authenticate with to the server.
                The default is no authentication.
        password -  Password to authenticate with to the server.
                Only relevant when username is also provided.
        """
        self.proxyconfig = proxyconfig or {}
        ftplib.FTP.__init__(self, host, user, passwd, acct, timeout)

    def connect(self, host='', port=0, timeout=-999):
        '''Connect to host.  Arguments are:
         - host: hostname to connect to (string, default previous host)
         - port: port to connect to (integer, default previous port)
        '''
        if host != '':
            self.host = host
        if port > 0:
            self.port = port
        if timeout != -999:
            self.timeout = timeout
        self.sock = self.create_connection(self.host, self.port)
        self.af = self.sock.family
        self.file = self.sock.makefile('rb')
        self.welcome = self.getresp()
        return self.welcome

    def create_connection(self, host=None, port=None):
        host, port = host or self.host, port or self.port
        if self.proxyconfig:

            phost, pport = self.proxyconfig['addr'], self.proxyconfig['port']
            err = None
            for res in socket.getaddrinfo(phost, pport, 0, socket.SOCK_STREAM):
                af, socktype, proto, canonname, sa = res
                sock = None
                try:
                    sock = socks.socksocket(af, socktype, proto)
                    sock.setproxy(**self.proxyconfig)

                    if self.timeout is not socket._GLOBAL_DEFAULT_TIMEOUT:
                        sock.settimeout(self.timeout)
                    sock.connect((host, port))
                    return sock

                except socket.error as _:
                    err = _
                    if sock is not None:
                        sock.close()

            if err is not None:
                raise err
            else:
                raise socket.error("getaddrinfo returns an empty list")
        else:
            sock = socket.create_connection((host, port), self.timeout)
        return sock

    def ntransfercmd(self, cmd, rest=None):
        size = None
        if self.passiveserver:
            host, port = self.makepasv()
            conn = self.create_connection(host, port)
            try:
                if rest is not None:
                    self.sendcmd("REST %s" % rest)
                resp = self.sendcmd(cmd)
                # Some servers apparently send a 200 reply to
                # a LIST or STOR command, before the 150 reply
                # (and way before the 226 reply). This seems to
                # be in violation of the protocol (which only allows
                # 1xx or error messages for LIST), so we just discard
                # this response.
                if resp[0] == '2':
                    resp = self.getresp()
                if resp[0] != '1':
                    raise ftplib.error_reply, resp
            except:
                conn.close()
                raise
        else:
            raise Exception("Active transfers not supported")
        if resp[:3] == '150':
            # this is conditional in case we received a 125
            size = ftplib.parse150(resp)
        return conn, size

if __name__ == '__main__':
    ftp = FTP(host='ftp.gnu.org', user='anonymous', passwd='guest',
              proxyconfig=dict(proxytype=socks.PROXY_TYPE_SOCKS5, rdns=False,
                               addr='localhost', port=1080))
    with open('autoconf-2.69.tar.xz', mode='w') as f:
        ftp.retrbinary("RETR /gnu/autoconf/autoconf-2.69.tar.xz", f.write) 
```

详细说明为什么我问了一些我原来的问题：

1）您需要支持主动转账还是 PASV 转账就足够了？

通过 socks 代理进行主动传输要困难得多，因为它们需要使用 PORT 命令。使用 PORT 命令，您的 ftp 客户端会告诉 FTP 服务器在特定端口（例如，在您的 PC 上）连接到*您*，以便发送数据。这可能不适用于防火墙或 NAT/路由器后面的用户。如果您的 SOCKS 代理服务器*不在*防火墙后面，或者有公共 IP，则可以支持主动传输，但这很复杂：它需要您的 SOCKS 服务器（ssh -D 支持）和客户端库（socksipy 不支持） ) 支持远程端口绑定。它还需要应用程序中的适当挂钩（我的示例抛出异常 if `passiveserver = False`）来执行远程 BIND 而不是本地 BIND。

2）是否必须使用扭曲？

Twisted 很棒，但我不是最擅长的，而且我还没有找到真正出色的 SOCKS 客户端实现。理想情况下，会有一个库允许您定义和/或将代理链接在一起，返回一个实现[IReactorTCP](http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.interfaces.IReactorTCP.html)接口的对象，但我还没有找到类似的东西。

3) 你的 socks 代理是在 VIP 后面还是直接连接到 Internet 的单个主机？

这很重要，因为 PASV 传输安全的工作方式。在 PASV 传输中，客户端要求服务器提供连接端口以开始数据传输。当服务器接受该端口上的连接时，它应该验证客户端是从与请求传输的连接*相同的源 IP连接的。*如果您的 SOCKS 服务器位于 VIP 后面，则为 PASV 传输建立的连接的出站 IP 不太可能与主要通信连接的出站 IP 匹配。

# c++ - C++ 模板和派生类

> ID：14040820
> 
> 赞同：6
> 
> 时间：2012-12-26T12:49:42.990
> 
> 标签：c++, templates, derived

我正在尝试理解以下代码。Derived 是 T 的派生结构，“，”是什么意思，然后是 Fallback {}

```
template <class T>
struct has_FlowTraits<T, true>
{
  struct Fallback { bool flow; };
  struct Derived : T, Fallback { };   //What does it means ?

  template<typename C>
  static char (&f(SameType<bool Fallback::*, &C::flow>*))[1];

  template<typename C>
  static char (&f(...))[2];

public:
  static bool const value = sizeof(f<Derived>(0)) == 2;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T12:53:01.273

[这是Member Detector Idiom](http://en.wikibooks.org/wiki/More_C++_Idioms/Member_Detector)的一个实现。它使用[SFINAE](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/SFINAE)检查类型 T 是否有一个名为 的成员`flow`。

编辑：您要问的逗号部分是[多重继承](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr134.htm)。Struct Derived 是（公开）从T 和 Fallback继承的**。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T12:53:36.580

这只是多重继承。以下是`Derived`源自`T`（并且没有提供进一步定义）的 a：

```
struct Derived : T { }; 
```

以下是`Derived`从`T`和派生的 a `Fallback`：

```
struct Derived : T, Fallback { }; 
```

即，`Derived`将继承 的成员`T` *和*的成员`Fallback`。在这种情况下，因为`Derived`是一个结构，所以默认情况下继承是*公共继承*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:54:27.407

逗号表示它从这两个类公开或私下派生（取决于`T`or`Fallback`是结构还是类）。逗号仅包括那些`Derive`将派生的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T12:54:55.813

它的意思是：

在 的定义中`has_FlowTraits struct`，您还定义了一个`struct`名为`Derived`.

你说这个结构`Derived`继承了类型 T 和类型`Fallback`。（如果您查看之前的行，`struct Fallback`则刚刚定义了）。

简单的`{}`意思是没有更多的实现细节。不需要更多的方法或属性定义来使这种类型有用。

# android - Android TextView setText 不起作用

> ID：14040822
> 
> 赞同：0
> 
> 时间：2012-12-26T12:49:49.450
> 
> 标签：android, textview, settext

我从其他面临相同问题的用户那里读到了一些问题，但这些解决方案对我不起作用。我`TextView`在我的布局中定义了一个`xml`：

```
<TextView
  android:id="@+id/currentLocation"
  android:layout_column="0"
  android:layout_row="14"
  android:text="@string/currentLocation" /> 
```

现在在我的活动中，我得到了 TextView

```
location = (TextView) findViewById(R.id.currentLocation); 
```

在我的活动中，我还可以启动另外两项活动（一项是 googlemap-View，另一项是手机的联系人列表）。我`onActivityResult()`在主要活动中的方法如下所示：

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

    switch (reqCode) {
        case (PICK_CONTACT) :
            if (resultCode == Activity.RESULT_OK) {
                Uri contactData = data.getData();
                Cursor c =  managedQuery(contactData, null, null, null, null);
                if (c.moveToFirst()) {
                    try{
                        String address = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS));
                        convertAddressToLatLon(address);
                    }
                    catch(Exception e){
                        errorDialog.setMessage("Could not get Address. Try another contact or use Google Maps.");
                        errorDialog.show();
                    }

                }
            }
        case (PICK_GMAPS) :
            if (resultCode == Activity.RESULT_OK) {
                Bundle googleData = data.getExtras();
                location.setText(googleData.getString("address"));
            }
        break;
    }
} 
```

在该`convertAddressToLatLon(address)`方法中还有一个`location.setText();`肯定是一个字符串值！

因此，如果我从 中返回`googlemap-activity`，位置文本将更改为给定的输入。在联系活动部分它不起作用。但是没有错误。它到达`location.setText()`方法，但不更改文本。我不知道出了什么问题。不可能，字符串中有错误的字符。即使我将 'location.setText("test")' 放在 catch 块的关闭标记之后，它也不起作用。（再次，该程序进入该`if(c.moveToFirst()){`部分！）。我不知道出了什么问题，因为就像我说的 googlepart 工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T14:39:00.113

发现了错误。我忘了放一个“休息”；在 PICK_CONTACT 案例的末尾。现在它的工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:00:32.830

至少设置你的高度和宽度`TextView`。
某事喜欢：

```
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
```

我认为这些是基本参数。然后您可以寻求其他原因（如果错误仍然存​​在）。

# wcf - 应该将哪个引用添加到 wcf 项目以便程序识别 requestUrl.GetComponents()？

> ID：14040825
> 
> 赞同：1
> 
> 时间：2012-12-26T12:50:04.940
> 
> 标签：wcf

我已将示例代码复制到 wcf 项目，它包含 $requestUrl.GetComponents$ ...程序无法识别它（下面有红线）...我应该添加哪个参考来解决问题.. .?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:03:44.173

`GetComponents`是`System.Uri`类的方法。您只需要引用 System.dll（默认情况下在绝大多数项目中）即可使用它。

# c++ - 循环布尔值

> ID：14040830
> 
> 赞同：2
> 
> 时间：2012-12-26T12:50:28.820
> 
> 标签：c++, coding-style

> **可能重复：**
> [如何在布尔值（假和真）上编写“for”循环](https://stackoverflow.com/questions/8805161/how-to-write-a-for-loop-over-bool-values-false-and-true)

我想两次执行相同的任务，第一次为`bool flag`真，第二次为假。有没有一种优雅的方式来做到这一点（也许使用循环）？

我的想法是做类似以下的事情，但这太复杂了。

```
bool flag = true;
for(int i = 0; i < 2; ++i, flag = !flag)
{
    // ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T12:52:03.753

把它放在一个函数中，`flag`作为一个参数。调用该函数两次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T15:19:04.003

既然您说您必须在 Thomas 的回答中将很多参数传递给函数，请考虑使用 lambda：

```
int param1;
bool param2;
...

auto doWork = [&](bool flag){ //<- capture all local variables by reference
    ... do work with params ...
};

doWork(true);
doWork(false); 
```

这样您就可以封装您的工作代码，不必繁琐地传递任何参数，并且仍然可以清楚地看到您调用了两次代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T13:12:50.243

我想出了一个使用 do-while-loop 的好方法。

```
bool flag = false;
do
{
    // ...
    flag = !flag;
}
while(flag) 
```

由于 do-while-loop 中的代码至少执行一次，所以我可以在最后切换标志并恰好运行两次。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T12:55:21.073

在函数中调用它的解决方案可能是最好的，但您也可以这样做：

```
for( int i = 0; i < 2; ++i ) {
    bool flag = i == 0;
    ... 
```

# c++ - 我是否正确使用了 GMFBridge.DLL 和 GMFBridge 播放器，是否可以让 gmf 播放器从套接字获取数据？

> ID：14040831
> 
> 赞同：-2
> 
> 时间：2012-12-26T12:50:47.503
> 
> 标签：c++, visual-studio-2010, visual-c++, directshow

我需要一个应用程序，我想在其中将 NAL 单元的字节流提供给 GMFBridge 播放器而不是文件。所以我为演示做了以下操作获取文件并解析文件，以便我可以找到最终单元

```
 FILE* infile;

    uint8_t* buf = (uint8_t*)malloc(BUFSIZE );
    char* buf1 = new char(BUFSIZE );

    h264_stream_t* h = h264_new();

    /*if (argc < 2) { usage(); return EXIT_FAILURE; }*/
     infile = fopen(Filepath, "rb");
   while (1)
    {
        rsz = fread(buf + sz, 1, BUFSIZE - sz, infile);

    fseek (infile , 0 , SEEK_END);
   lSize = ftell (infile);
   rewind (infile);
   buffer = (char*) malloc (sizeof(char)*lSize);
  if (buffer == NULL)
  {fputs ("Memory error",stderr); exit (2);}

  // copy the file into the buffer:
  result = fread (buffer,1,lSize,infile);
  if (result != lSize) 
  {fputs ("Reading error",stderr); exit (3);}
   fprintf( h264_dbgfile1,"data in file is %lld\n",buffer);
   int l=strlen(buffer);
      fclose (h264_dbgfile1);
  if (rsz == 0)
        {
            if (ferror(infile)) { fprintf( stderr, "!! Error: read failed: %s \n", strerror(errno)); break; }
            break;  // if (feof(infile)) 
        }

        sz += rsz;

        while (find_nal_unit(p, sz, &nal_start, &nal_end) > 0)
{
                   int length =nal_end-nal_start;
            int j=0;
            while(length!=0)
            {

            for (int start=nal_start;start<=nal_end;start++)
            {
                             FileData[pointer][j]=buffer[start];
                //FileData[pointer][j]=(p[j]);
                j++;
                length--;
                if(length==0)
                    break;
            }
            }

HRESULT hr = m_pPlayer->AddClip(ofn.lpstrFile, &pClip);//i am not able to give the data here 
```

请告诉上面的解决方案，或者我们可以连接GMFBridge播放器从socket中获取数据并连续播放。我尝试了套接字，但由于连接调用成功，我没有接收数据

```
int find_nal_unit(uint8_t* buf, int size, int* nal_start, int* nal_end)
{
    int i;
    // find start
    *nal_start = 0;
    *nal_end = 0;

    i = 0;
    while (   //( next_bits( 24 ) != 0x000001 && next_bits( 32 ) != 0x00000001 )
        (buf[i] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01) && 
        (buf[i] != 0 || buf[i+1] != 0 || buf[i+2] != 0 || buf[i+3] != 0x01) 
        )
    {
        i++; // skip leading zero
        if (i+4 >= size) { return 0; } // did not find nal start
    }

    if  (buf[i] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01) // ( next_bits( 24 ) != 0x000001 )
    {
        i++;
    }

    if  (buf[i] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01) { /* error, should never happen */ return 0; }
    i+= 3;
    *nal_start = i;

    while (   //( next_bits( 24 ) != 0x000000 && next_bits( 24 ) != 0x000001 )
        (buf[i] != 0 || buf[i+1] != 0 || buf[i+2] != 0) && 
        (buf[i] != 0 || buf[i+1] != 0 || buf[i+2] != 0x01) 
        )
    {
        i++;
        // FIXME the next line fails when reading a nal that ends exactly at the end of the data
        if (i+3 >= size) { *nal_end = size; return -1; } // did not find nal end, stream ended first
    }

    *nal_end = i;
    return (*nal_end - *nal_start);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:42:44.020

Bridge 正在连接两个图表，以便您可以独立更改它们的状态，而不会出现不必要的流中断。它与 H.264、套接字和 NAL 单元无关。

如果您找到或创建了一个过滤器，该过滤器可以将从套接字接收的有效负载传递到 DirectShow 管道，桥将能够接受它并将其传递到第二个图中。

# java - 我想创建一个表，但它给了我一个错误

> ID：14040845
> 
> 赞同：1
> 
> 时间：2012-12-26T12:52:35.913
> 
> 标签：java, android, database, sqlite

这段代码是创建一个新表。

```
 import android.database.sqlite.SQLiteOpenHelper;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class MySQLHelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "verlaufAufgaben.db";
    public static final int DATABASE_VERSION = 1; 
```

创建表

```
 private static final String TABLE_CREATE_VERLAUF = ""
            +"create table VERLAUF ("
            +" ID integer primary key, "
            +" Zahl1 int,) ";

    public MySQLHelper(Context context) 
    {   
        super (context, DATABASE_NAME, null, DATABASE_VERSION);
    } 
```

创建 SQLite 数据库

```
 @Override
    public void onCreate(SQLiteDatabase database)
    {
        database.execSQL(TABLE_CREATE_VERLAUF);
    } 
```

升级数据库

```
 @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        Log.w(MySQLHelper.class.getName(),
                "Upgrading database from version " + oldVersion + "to "
                + newVersion + ", which all destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS SCANITEM");
        onCreate(db);
    }

} 
```

这段代码有什么问题，它因为表格而显示错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:56:12.750

您让表创建以逗号结尾的 DDL...删除它！

```
private static final String TABLE_CREATE_VERLAUF = ""
        +"create table VERLAUF ("
        +" ID integer primary key, "
        +" Zahl1 int) "; 
```

# java - Java 类到 MongoDB“DDL”生成支持

> ID：14040847
> 
> 赞同：0
> 
> 时间：2012-12-26T12:52:42.093
> 
> 标签：java, mongodb, spring-data-mongodb

我想知道**Spring Data MongoDB是否支持****从 java classes 生成 DDL（mongodb 文档结构）**这样的功能。

换句话说，类似于 Hibernate 的**hbm2ddl.auto**功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:44:19.003

Spring Data 使您能够进行模板和其他对象转换。但是还没有自动 DDL。

# java-me - Midlet 在模拟器中工作，ClassNotFoundException 在手机上

> ID：14040849
> 
> 赞同：1
> 
> 时间：2012-12-26T12:52:50.590
> 
> 标签：java-me, bluetooth, classnotfoundexception

我正在为与服务器的蓝牙通信创建简单的 midlet，但我无法让它在我的手机上工作，当我尝试在 Eclipse/Emulator 中运行它时一切正常，但在手机上我得到“无法创建 MIDlet 实例：java .lang.ClassNotFoundException"

我在某处看到此异常主要与路径相关，但我没有任何外部 jar 或多个包。

这是代码：

```
package j2meclient;

import java.io.OutputStream;
import javax.bluetooth.*;
import javax.microedition.io.*;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;

public class J2MEClientMidlet extends MIDlet implements CommandListener,
        Runnable {

    Display d;
    Command cmExit, cmConnect;
    Form f;
    Thread t;
    String connString;

    public J2MEClientMidlet() {
        f = new Form("Client");
        cmExit = new Command("Exit", Command.EXIT, 1);
        cmConnect = new Command("Connect", Command.ITEM, 2);

        f.addCommand(cmExit);
        f.addCommand(cmConnect);
        f.setCommandListener(this);
    }

    public void startApp() {
        if (d == null) {
            d = Display.getDisplay(this);
            d.setCurrent(f);
            t = new Thread(this);
        }
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }

    public void commandAction(Command c, Displayable d) {
        if (c == cmExit) {
            destroyApp(false);
            notifyDestroyed();
        }
        if (c == cmConnect) {
            t.start();
        }
    }

    public void run() {
        try {

            LocalDevice local = LocalDevice.getLocalDevice();
            DiscoveryAgent agent = local.getDiscoveryAgent();
            connString = agent.selectService(new UUID(
                    "86b4d249fb8844d6a756ec265dd1f6a3", false),
                    ServiceRecord.NOAUTHENTICATE_NOENCRYPT, false);
        } catch (Exception e) {
        }

        if (connString != null) {

            try {

                StreamConnection conn = (StreamConnection) Connector
                        .open(connString);
                OutputStream out = conn.openOutputStream();
                Thread.sleep(2000);

                out.write("Hello, World".getBytes());
                out.close();
                conn.close();
                f.append("Message sent correctly");

            } catch (Exception ex) {
                f.append("IOException: ");
                f.append(ex.getMessage());
            }
        } else {
            f.append("Unable to locate service");
        }
        }
    } 
```

杰德;

```
MIDlet-1: J2MEClient,,J2MEClient
MIDlet-Jar-Size: 2254
MIDlet-Jar-URL: BTClient.jar
MIDlet-Name: BTClient Midlet Suite
MIDlet-Vendor: Midlet Suite Vendor
MIDlet-Version: 1.0.0
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0 
```

任何想法为什么我不能在手机上运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:29:56.467

您的 midlet 类文件已命名`J2MEClientMidlet`，但在 jad 文件中它被定义为 J2MEClient。Midlet 类文件名必须与 jad 上的定义匹配才能从 jad 成功运行。

# php - 使用php（windows）将power point（ppt，pptx）转换为jpeg

> ID：14040851
> 
> 赞同：-3
> 
> 时间：2012-12-26T12:52:53.100
> 
> 标签：php, com, powerpoint, jpeg

我需要将“ppt”文件转换为带有“php”（在服务器上）的图像的功能。当用户上传“ppt”文件服务器会自动将此文件转换为图像并保存到特定文件夹。然后我想将此图像用于“jquery 滑块”。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:09:20.960

你可以用 php 做的是读取那些 .ppt 文件，但是这样做很难，因为你需要使用 linux 命令工具调用“ [swish-e](http://swish-e.org/) ”并且它不支持图像，因为它用于文本索引。

但我想它在 Flash 中是可行的，就像幻灯片共享或其他东西一样，希望有一些来自不同语言的人阅读这篇文章并可以提供建议。

# sleep - 如何将 Android 应用程序安装为系统应用程序

> ID：14040854
> 
> 赞同：3
> 
> 时间：2012-12-26T12:53:02.793
> 
> 标签：sleep, signature, power-management, locks, wakeup

我正在尝试学习如何将任何应用程序安装为系统应用程序。

基本上我正在尝试在 android 中使用 goToSleep 和 WakeUp 函数调用。我知道要在您的应用程序中使用这些调用，必须将应用程序安装为系统应用程序。

尝试在 Manifist.xml 中构建具有权限的应用程序，如下所示

```
 android:sharedUserId="android.uid.system"
uses-permission android:name="android.permission.DEVICE_POWER" 
```

goToSleep 调用如下所述

```
 PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
pm.goToSleep(SystemClock.uptimeMillis() + 10); 
```

成功构建应用程序后，使用以下命令将应用程序加载到 android 文件系统的 /system/app 目录中

adb 重新挂载；adb push <*.apk> /system/app/

运行具有上述更改的应用程序导致错误 **“用户 10050 和当前进程都没有 android.permission.DEVICE_POWER。”**

我还读到必须将应用程序签名为系统应用程序才能成功 **工作**

谢谢，
-SP-

# javascript - ExtJS 4：从分组商店渲染自定义视图，并带有分组标题

> ID：14040857
> 
> 赞同：1
> 
> 时间：2012-12-26T12:53:14.280
> 
> 标签：javascript, json, templates, extjs, view

我正在使用添加到模型中的 JSON 数据记录中的自定义字段对商店进行分组：

```
Ext.define('SCB.RMWB.InfoBar.Model.Message', {
    extend: 'Ext.data.Model',
    idProperty: 'Message',
    fields: [
        {name: 'id',                type: 'int'},
        {name: 'source',            type: 'string'},
        {name: 'target',            type: 'string'},
        {name: 'sourceType',        type: 'string'},
        {name: 'redirectUrl',       type: 'string'},
        {name: 'message',           type: 'string'},
        {name: 'targetType',        type: 'string'},
        {name: 'messageType',       type: 'string'},
        {name: 'sentDate',          type: 'int'},
        {name: 'notificationType',  type: 'string'},
        {name: 'parameters',        type: 'string'},
        {name: 'read',              type: 'boolean'},
        {name: 'readDate',          type: 'int'},
        {
            name: 'dateGroup',
            type: 'string',
            convert: function(value, record) {   

                var formattedSentDate =  dateHelpers.format(record.get('sentDate')),
                    str = '';

                if (formattedSentDate === dateHelpers.today()) {
                    str = 'Today';
                } else if (formattedSentDate === dateHelpers.yesterday()) {
                    str = 'Yesterday';
                } else {
                    str = 'Last week';
                }

                return str;

            }
        }

    ],
    validations: [
        {type: 'presence',          field: 'id'},
        {type: 'presence',          field: 'source'},
        {type: 'presence',          field: 'target'},
        {type: 'presence',          field: 'sourceType'},
        {type: 'presence',          field: 'redirectUrl'},
        {type: 'presence',          field: 'message'},
        {type: 'presence',          field: 'targetType'},
        {type: 'presence',          field: 'messageType'},
        {type: 'presence',          field: 'sentDate'},
        {type: 'presence',          field: 'notificationType'},
        {type: 'presence',          field: 'parameters'},
        {type: 'presence',          field: 'read'},
        {type: 'presence',          field: 'readDate'},
        {type: 'presence',          field: 'dateGroup'}
    ]
}); 
```

所以很明显，所需的分组是*今天*、*昨天*和*上周*。

这似乎工作正常，但我需要以手风琴方式呈现分组，标题表示分组。

目前，模板每次都输出日期分组，我需要一次分组标题，然后是属于该分组的那些记录。

这是当前模板：

```
 '<tpl for=".">',
        '<li class="view-all-details">',
            '<h3>{dateGroup}</h3>',
            '<div>',
                '<p>{[ Ext.util.Format.ellipsis(values.message, 100, true) ]}</p>', 
                '<span class="time-frame">{[ SCB.RMWB.Infobar.utils.dateRangeMsg(values.sentDate) ]}</span>',
            '</div>',
        '</li>',                        
    '</tpl>' 
```

我知道模板当前不会输出我需要的内容，但不确定如何将视图中的记录与标题分组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-01T11:08:13.723

我知道问题是**5**岁，但我有同样的要求。所以我已经解决了同样的问题并从我的角度得到了解决方案，所以我在这里分享。

为此，[`XTemplate`](http://docs.sencha.com/extjs/4.0.0/#!/api/Ext.XTemplate)您需要检查`if`条件以显示日期组的通用标题并处理一个`variable`以检查`date-group`.

如何检查条件检查`tpl`？见下面的例子： -

```
'<tpl for="kids">',
        '<tpl if="age &gt; 1">',
            '<p>{name}</p>',
            '<p>Dad: {parent.name}</p>',
        '</tpl>',
    '</tpl></p>' 
```

在这个**[FIDDLE](https://fiddle.sencha.com/#view/editor&fiddle/2cin)**中，我使用[Ext.view.View](http://docs.sencha.com/extjs/4.0.0/#!/api/Ext.view.View)、[store](http://docs.sencha.com/extjs/4.0.0/#!/api/Ext.data.Store)、[model](http://docs.sencha.com/extjs/4.0.0/#!/api/Ext.data.Model)和[panel](http://docs.sencha.com/extjs/4.0.0/#!/api/Ext.panel.Panel)创建了一个演示。我希望这将帮助或指导您/其他人实现您的要求。

**代码片段**

```
Ext.application({
    name: 'Fiddle',

    launch: function () {

        var message = [],
            date,
            date1;
        /*
         * function will calculate diffrence b/w 2 dates
         * @param{Date} min
         * @param{Date} max
         * @return number
         */
        function dayDiff(min, max) {
            return Math.round((max - min) / (1000 * 60 * 60 * 24))
        }

        //createing demo message for testing
        for (var i = 0; i < 12; i++) {
            if (i < 4) {
                date = Date.now();
            } else if (i >= 4 && i < 8) {
                date1 = new Date();
                date = date1.setDate(date1.getDate() - 1);
            } else {
                date1 = new Date();
                date = date1.setDate(date1.getDate() - 2);
            }
            message.push({
                text: `Hello I am message ${i+1}`,
                sentdate: Ext.Date.clearTime(new Date(date)),
                id: i + 1
            })
        }

        //Create Message model
        Ext.define('Message', {
            extend: 'Ext.data.Model',
            fields: ['id', 'text', {
                    name: 'sentdate',
                    type: 'date'
                }, {
                    name: 'dateGroup',
                    type: 'string',
                    convert: function (value, record) {
                        var sentDate = record.get('sentdate'),
                            str,
                            diff = dayDiff(new Date(sentDate), Ext.Date.clearTime(new Date()));
                        if (diff == 0) {
                            str = 'Today';
                        } else if (diff == 1) {
                            str = 'Yesterday';
                        } else {
                            str = 'Last week';
                        }
                        return str;
                    }
                }
                /*, {
                                    name: 'group',
                                    type: 'int',
                                    mapping: 'dateGroup',
                                    convert: function (value, rec) {
                                        switch (rec.get('dateGroup')) {
                                        case 'Today':
                                            value = 0;
                                            break;
                                        case 'Yesterday':
                                            value = 1;
                                            break;
                                        default:
                                            value = 2
                                        }
                                        return value;
                                    }
                                }*/

            ],
            // sort: 'group'
        });
        //create message store
        Ext.create('Ext.data.Store', {
            storeId: 'message',
            model: 'Message'
        });

        //Create data view
        //we can also use using xtype:'dataview' inside of items
        var view = Ext.create('Ext.view.View', {
            height: window.innerHeight,
            //overflowY: 'auto',
            store: 'message',
            tpl: new Ext.create('Ext.XTemplate',
                '<tpl for=".">',
                '<tpl if="this.isSameGroup(values.dateGroup)"><div class="x-group-header"><b>{[this.doShowGroup(values.dateGroup)]}</div></b></tpl>',
                '<div class="x-message-item ">{text} <span>{[Ext.Date.format(values.sentdate,"d M y")]}<span></div>',
                '</tpl>', {
                    isSameGroup: function (group) {
                        return this.currentGroup != group;
                    },
                    doShowGroup: function (group) {
                        this.currentGroup = group;
                        return group;
                    }
                }),
            itemSelector: '.x-message-item',
            emptyText: 'No data available',
            renderTo: Ext.getBody()
        });
        //create panel
        Ext.create('Ext.panel.Panel', {
            title: 'Rendering a custom view from a grouped store with a title for the grouping',
            items: [view],
            renderTo: Ext.getBody(),
            listeners: {
                afterrender: function () {
                    this.down('dataview').getStore().loadData(message);
                }
            }
        });

    }
}); 
```

# java - 测试套件构建失败 - (android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests)。如何解决？

> ID：14040859
> 
> 赞同：5
> 
> 时间：2012-12-26T12:53:22.137
> 
> 标签：java, android, testing, robotium

我是 Android 应用程序测试的新手。我使用 java 代码创建了一个自动化框架。然后我尝试将该框架与现有的 Robotium Test App 集成。但是当我给`Run as`-->`Android Junit`时，测试应用程序已成功安装，但会引发异常`Exception during Suite construction.`

--我有两个java类——例如`Class1_Functional`库和`Class2_Automation`框架。我在`Class2_Automation Framework`Robotium 框架内创建了一个类的对象，因此我可以调用在类中声明的函数，我猜想会触发异常。

下面的代码显示了我的 Robotium 框架

```
package jp.list.app.test;

    import java.io.IOException;
    import java.util.Arrays;
    import android.app.Activity;

    import com.jayway.android.robotium.solo.Solo;

    import  android.test.ActivityInstrumentationTestCase2;
    import android.util.Log;
    import jp.list.app.test.Automation_Framework;
    @SuppressWarnings("unchecked")
    public class TestLogin1 extends ActivityInstrumentationTestCase2
    {

        ///////////////// 
        //Created the object of the class Automation framework where the exception occurs
        ////////////////

    private Automation_Framework autoobj = new Automation_Framework();
    private static final
    String  TARGET_PACKAGE_ID = "jp.list.app";
    private static final
    String LAUNCHER_ACTIVITY_FULL_CLASSNAME ="jp.list.app.JPActivity";

    //Parameters used for the Automation Framework
    String excel_path ="/mnt/sdcard/Automation_Framework_Robotium.xls";
//  String excel_path ="C:\\Automation_Framework\\Automation_Framework_Robotium.xls";
    String screenshot_path ="/mnt/sdcard/Screenshots";
//  String screenshot_path = "C:\\Automation_Framework\\Screenshots";
    String excelsheet_flow ="Execution_Flow";
    String excelsheet_data ="Data";
    int stepidindex_flow = 2 ;
    int tobeexctdindex_flow = 3;
    int funtionflowindex_flow = 6;
    int statusindex_flow = 7;
    int executioncommentsindex_flow = 8;
    int stepidindex_data = 0;
    int funtionnameindex_data = 1;
    int dataindex_data = 2;
    int elementidindex_data = 3;

    private static  Class<?>launcherActivityClass;
    static{
    try
    {
    launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
    }
    catch(ClassNotFoundException e)
    {
    throw new
    RuntimeException(e);
    }
    }
    @SuppressWarnings({ "unchecked", "deprecation" })
    public TestLogin1() throws ClassNotFoundException
    {
        super(TARGET_PACKAGE_ID,launcherActivityClass);

    }
    private Solo solo;
    private Activity activity;

    @Override
    protected void setUp()throws Exception
    {
        super.setUp();
        this.activity=this.getActivity();
    this.solo = new Solo(getInstrumentation(),this.activity);
    }

    public void test_framework()
    {
        try {
            autoobj.driver_function(excel_path, screenshot_path, excelsheet_flow, stepidindex_flow, tobeexctdindex_flow, funtionflowindex_flow, statusindex_flow, executioncommentsindex_flow, excelsheet_data, stepidindex_data, funtionnameindex_data, dataindex_data, elementidindex_data);
        } catch (IOException e) {
            Log.v("output", e.toString());
            e.printStackTrace();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    @Override
    public void tearDown()throws Exception
    {
    try
    {
    solo.finalize();
    }
    catch(Throwable e)
    {
    e.printStackTrace();
    }
    getActivity().finish();
    super.tearDown();
    }
    } 
```

我的 logcat 输出给出了

```
----- begin exception -----
                java.lang.RuntimeException: Exception during suite construction
                at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
                at java.lang.reflect.Method.invokeNative(Native Method)
                at java.lang.reflect.Method.invoke(Method.java:511)
                    at junit.framework.TestCase.runTest(TestCase.java:168)
                    at junit.framework.TestCase.runBare(TestCase.java:134)
                    at junit.framework.TestResult$1.protect(TestResult.java:115)
                    at junit.framework.TestResult.runProtected(TestResult.java:133)
                    at junit.framework.TestResult.run(TestResult.java:118)
                    at junit.framework.TestCase.run(TestCase.java:124)
                    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
                    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
                    at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
                    at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)
                Caused by: java.lang.reflect.InvocationTargetException
                    at java.lang.reflect.Constructor.constructNative(Native Method)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
                    at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
                    at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
                    at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
                at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
                    at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:379)
                    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4142)
                at android.app.ActivityThread.access$1300(ActivityThread.java:130)
                    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
                    at android.os.Handler.dispatchMessage(Handler.java:99)
                    at android.os.Looper.loop(Looper.java:137)
                    at android.app.ActivityThread.main(ActivityThread.java:4745)
                    at java.lang.reflect.Method.invokeNative(Native Method)
                at java.lang.reflect.Method.invoke(Method.java:511)
                    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
                    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
                    at dalvik.system.NativeStart.main(Native Method)
                 Caused by: java.lang.VerifyError: jp/list/app/test/Function_Lib_Robotium
                at jp.list.app.test.Automation_Framework.<init>(Automation_Framework.java:37)
                    at jp.list.app.test.TestLogin1.<init>(TestLogin1.java:15)
                    ... 18 more
                 ----- end exception ----- 
```

君特异常：

```
java.lang.RuntimeException: Exception during suite construction
                at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
                at java.lang.reflect.Method.invokeNative(Native Method)
                at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
                at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
                at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
                at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)
                Caused by: java.lang.reflect.InvocationTargetException
                at java.lang.reflect.Constructor.constructNative(Native Method)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
                at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
                at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
                at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
                at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
                at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:379)
                at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4142)
                at android.app.ActivityThread.access$1300(ActivityThread.java:130)
                at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
                at android.os.Handler.dispatchMessage(Handler.java:99)
                at android.os.Looper.loop(Looper.java:137)
                at android.app.ActivityThread.main(ActivityThread.java:4745)
                at java.lang.reflect.Method.invokeNative(Native Method)
                at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
                at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
                at dalvik.system.NativeStart.main(Native Method)
                Caused by: java.lang.VerifyError: jp/list/app/test/Function_Lib_Robotium
                at jp.list.app.test.Automation_Framework.<init>(Automation_Framework.java:37)
                at jp.list.app.test.TestLogin1.<init>(TestLogin1.java:15)
                ... 18 more 
```

如果有人能为我提供上述查询的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T18:16:43.637

可能的原因可能是：

1.  只需确保您已包含 JAR 文件即可。

2.  在类声明语句中应该是这样的： public class TestLogin1 extends ActivityInstrumentationTestCase2 其中 T 应该是运行测试套件的类。

3.  在您的 setup() 方法中，语句必须类似于：

    ```
    this.solo = new Solo(getInstrumentation(),getActivity()); 
    ```

    其中 getActivity() 获取被测活动。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T20:23:42.597

```
@SuppressWarnings({ "unchecked", "deprecation" })
public TestLogin1() throws ClassNotFoundException
{
    super(TARGET_PACKAGE_ID,launcherActivityClass);

} 
```

这对我来说看起来很奇怪。标准构造函数是

```
@SuppressWarnings({ "unchecked", "deprecation" })
public TestLogin1() throws ClassNotFoundException
{
    super(JPActivity.class);
} 
```

还要确保将 声明`JPActivity`为`ActivityInstrumentationTestCase2<JPActivity>`.

# sql - 如何从sql中的表中选择替代行？

> ID：14040865
> 
> 赞同：2
> 
> 时间：2012-12-26T12:53:35.190
> 
> 标签：sql

在表中有一个名为 status 的列，它可以有 1 或 2。现在我想选择这样的模式

```
First Row 1
Second Row 2
Third Row 1
Fourth Row 2
...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-09T10:13:24.923

对于偶数行

```
select * from emp where rowid%2 = 0; 
```

对于奇数行

```
select * from emp where rowid%2 != 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:07:53.597

## 甲骨文：

```
 SELECT * from
    ( SELECT a1.*,rank() over (partition BY status order by rownum) RNK FROM TABLE1 a1
     )
    ORDER BY rnk,status 
```

***[Sqlfiddle：](http://sqlfiddle.com/#!4/3f0d1/1)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:10:35.250

## 微软 SQL：

```
select t1.*, (RN % 2)+1 as [STATUS] from
(
  select t.*, ROW_NUMBER() OVER (ORDER BY <ORDER COLUMN NAME HERE>) as RN
) t1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:57:49.447

尝试这个

```
select * from (select table.* ,rownum k from table) where mod(k,2)<>0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T16:32:41.790

尝试这个：

```
SELECT e1.* FROM Employee e1
INNER JOIN  
(
    Select e2.*, ROW_NUMBER() OVER (ORDER BY <Column Names>) AS RN FROM Employee e2

)E2 
ON e1.eid=e2.eid
where e2.RN%2=0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-17T16:45:58.127

要获取 ODD 记录，请使用以下内容：

```
SELECT e1.* FROM Employee e1 INNER JOIN
( Select e2.*, ROW_NUMBER() OVER (ORDER BY ) AS RN FROM Employee e2 )E2 ON e1.eid=e2.eid where e2.RN%2=1 
```

# iphone - Objective-C 包级属性

> ID：14040867
> 
> 赞同：3
> 
> 时间：2012-12-26T12:53:39.170
> 
> 标签：iphone, objective-c, ios, ipad

我正在创建一个 iPhone 自定义框架，它应该能够集成到任何 iPhone 应用程序中。

我在我的框架的一个公共头文件中创建了一些属性。我想授予`@package`对这些属性的级别访问权限，以便只能在框架内的类中访问这些属性。

我不希望用户使用这些属性。

请告诉我这样做是否可行。如果是，请给我一些关于如何实现这一目标的想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T16:10:28.293

首先，您应该知道没有办法完全禁止您的库的用户调用方法。即使您没有在标题中声明它，用户也可以自己声明并使用它。不过，他仍然需要找出您的属性的名称，例如通过在您的库上运行 classdump。

因此，在 Objective-C 中，我们通过不在标头中声明它们（这是类的公共部分），而是通过在实现中声明它们（这是类的“私有”部分）来将属性设为私有。

如果您创建另一个包含类的类别的标题，您可以向其中添加一些属性，这些属性不会出现在主标题中 - 所以不在您的类的公共声明中 - 但仍然可以由您的其他类导入了解此标头的库。

例如：

```
MyClass+SecretProperties.h:

@interface MyClass ()
@property (strong) NSString *secretString;
@end

MyClass.m:

#import "MyClass.h"
#import "MyClass+SecretProperties.h"
@implementation MyClass
@synthesize secretString; // Depending on your runtime, you may not even need to this - properties are auto-synthesized in the latest SDKs.
…
@end

OtherClass.m:

#import "MyClass.h"
#import "MyClass+SecretProperties.h"

// Now you can use secretString on instances of MyClass 
```

然后，由于您只使用您的库导出 MyClass.h，因此用户不知道有一个 secretString 属性:) 这是您可以获得的最接近 @package 范围的 AFAIK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:00:12.693

如果您想将这些属性设为私有，请使用以下内容。在您的 .m 文件中使用目标 c 的扩展特性。

```
@interface InitialViewController ()
//declare your property here
@end 
```

# vb6 - 如何在vb6中通过我的软件制作exe文件

> ID：14040869
> 
> 赞同：0
> 
> 时间：2012-12-26T12:53:58.910
> 
> 标签：vb6, exe, builder

有人可以在这里帮助我。

我正在开发 Visual Basic 6 中的程序。我希望我的程序在用户添加或选择他的选项时制作一个 exe 文件。

例如——以 RAT 或键盘记录器为例。用户选择他们想要的，当他们点击构建服务器时，会创建一个 exe 文件，名称为 server

我还希望当用户单击构建时，我的软件会创建一个 .exe 文件

我想要一个正确的方向开始。请有人指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T05:39:52.230

对于 VB6，我建议单独创建 exe，使用 .ini 或 .config 文件进行配置，将其添加为资源。

当需要 exe 时，从资源中提取 if 并使用所需的配置制作 .ini 或 .config 文件。

# algorithm - 在大量图像中寻找相似图像的算法

> ID：14040872
> 
> 赞同：4
> 
> 时间：2012-12-26T12:54:17.780
> 
> 标签：algorithm, image-processing

我知道这个网站上已经有一些帖子与这个问题有关，但没有一个（据我所知）告诉我我需要知道的内容。

我对图像搜索引擎（如谷歌图像）如何运行基于图像的搜索很感兴趣，到目前为止，我发现[了这篇博客文章](http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html)，它告诉用户如何编写一个可以找到相似图像的指纹识别功能。该网站上的算法仅查找相同图像但分辨率不同的图像或相同图像但略有变化的图像。我正在寻找一种放入图像的方法，比如说森林的图像，它会给你其他森林的图像。

我是这方面的初学者，所以我希望能找到一些详细的东西，而不是给你代码来做这件事，只是一个让我开始的指南。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:43:45.877

图像检索的一种常用方法实际上是受到文本检索的启发，因此我将从快速回顾文本检索开始：

1.  每个文档都由其[词袋](http://en.wikipedia.org/wiki/Bag-of-words_model "词袋")模型表示。
2.  构建了一个包含所有文档的[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)。
3.  当用户发送查询`q`时，使用倒排索引返回数据库中最相似的文档。文档和查询之间的相似度`q`通常使用表示查询和文档的两个向量的点积来计算。（[tf-idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)加权通常用于构建表示文档的向量。）

正如 Sivic 和 Zisserman 在[Video Google: A Text Retrieval Approach to Object Matching in Videos](http://www.robots.ox.ac.uk/~vgg/publications/papers/sivic03.pdf)中提出的那样，图像检索遵循完全相同的方法。唯一的区别是第一步，他们定义了什么是“视觉词”，以便对图像进行词袋表示。

他们首先提取图像的局部特征，例如[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)。那些局部特征（SIFT）是高维向量，因此，使用聚类算法（例如[k-means](http://en.wikipedia.org/wiki/K-means_clustering)）来获得`k`视觉词：`k`聚类中心是“视觉词”。然后给定一张图像，提取局部特征（SIFT）并将每个特征分配给最近的“视觉词”或聚类中心，从而获得词袋表示。

这种方法后来得到了改进，例如： Hervé Jégou、Matthijs Douze 和 Cordelia Schmid[的 Hamming Embedding and Weak Geometric contrast for large-scale image search](http://lear.inrialpes.fr/pubs/2008/JDS08/jegou_hewgc08.pdf)。

如果你想了解更多关于这些方法的信息，我强烈建议你看看[视觉识别和机器学习暑期学校](http://www-roc.inria.fr/cluster-willow/laptev/teaching/cvml2012/materials/index.html)的材料，特别是“实例级识别”和“大规模视觉搜索”的幻灯片.

# c# - 如何为我们的 Windows C#.net 应用程序制作帮助文件？

> ID：14040875
> 
> 赞同：-4
> 
> 时间：2012-12-26T12:54:44.803
> 
> 标签：c#

我的项目中有任务，我想为我的项目开发一个帮助文件（f1），我不知道如何完成这项任务，请帮助任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:23:10.320

您可以创建一些**HTML**页面，然后将它们转换为**CHM**文件，当用户按 F1 时，尝试打开它，您应该做的就是

祝你好运

# jquery - 第二次点击不工作jquery

> ID：14040884
> 
> 赞同：0
> 
> 时间：2012-12-26T12:55:23.637
> 
> 标签：jquery, click

所以我有一些带有“nieuwiitem”类的 div，根据它们在工作流程中的位置（左、中、右），它们分别有一个附加类 bar1、bar2、bar3。

当我单击 .nieuwiitem 时，它会将单击的 div 更改为绝对 div 并增加宽度以覆盖其他项目，并添加类“activenews”。它还在单击的 div 的位置添加了一个不可见的 div 以保持左边距（因此其他项目不会全部混淆）。

当我单击另一个 div 或绝对 div 时，绝对 div（带有 class="activenews"）通过删除绝对 div 并使不可见 div (invisitem) 恢复为可见状态而恢复正常。

但是，当我尝试单击第三次恢复正常的 div 时，它再次展开，它不起作用。我的意思是，没有任何东西被触发。甚至没有“警报（'hi'）;”。

提前致谢

```
<script>
        $('.nieuwitem').click(function(){
            alert('hi');
        var dis = $(this).clone();

        $('.activenews').remove();
        $('.invisitem').animate({opacity:1}).removeClass('invisitem').removeAttr('style');

        if($(this).attr('class') == 'nieuwitem bar1' || $(this).attr('class') == 'nieuwitem bar2'){
            var offset = $(this).offset();

            $(this).hide();
            dis.insertAfter($(this)).animate({opacity:0},500).addClass('invisitem');

            $(this).css({ height:'320', position:'absolute', 'top' : offset.top, 'left':offset.left, 'background-image':'none', 'background-color':'rgba(255,255,255,0.1)'}).addClass('activenews').hide().animate({width:'42%', 'backgroundColor':'rgba(255,255,255,0.9)'},10).fadeIn(800).addClass('activenews');

        }
        else{
            var offset = $(this).prev().offset();

            $(this).hide();
            dis.insertAfter($(this)).animate({opacity:0},500).addClass('invisitem');

            $(this).css({ height:$(this).height(), position:'absolute', 'top' : offset.top, 'left':offset.left, 'background-image':'none', 'background-color':'rgba(255,255,255,0.1)'}).addClass('activenews').hide().animate({width:'42%', 'backgroundColor':'rgba(255,255,255,0.9)'},10).fadeIn(800).addClass('activenews');

        }

        }

    );

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:07:19.840

这是因为您正在克隆元素，而不是元素的数据和事件（即 click 事件。

如果你改变：

```
var dis = $(this).clone(); 
```

至

```
var dis = $(this).clone(true); 
```

它应该工作；[检查文档](http://api.jquery.com/clone/)。您的代码中还有一些其他特殊的东西（例如多次添加同一个类）但是对于您上面提出的问题就是答案

ps 欢迎来到 SO :D

# java - 如果我每秒需要 44000 字节，那么每 1/10 秒我需要多少个短裤

> ID：14040885
> 
> 赞同：1
> 
> 时间：2012-12-26T12:55:27.280
> 
> 标签：java, audio, video, encode

我有一个线程`java.awt.Robot`使用 Xuggler 进行屏幕截图，然后将它们编码为视频。
循环对图像进行编码，然后根据帧速率使线程休眠一段时间。
到目前为止一切都很好。当我尝试对音频进行编码时，就会出现问题。

## 具体来说，保持采样率和大小

我正在使用`TargetDataLine`将数据读入`byte[]`. 此数据已采用**BigEndian**格式。
神奇之处在于在适当的时间提供适当数量的数据。
我的`AudioFormat`样子是这样的：

*   采样率：44000Hz*   样本大小（以位为单位）：16*   签名：真实*   大端：真
假设 10fps 和 44000Hz 采样率，我需要提供
*   的大小应该是`byte[]`多少？*   多少数据？（测量是`short`因为那是 Xuggler 想要的）*   我什么时候调用该`encodeAudio()`方法？我的意思是经过 10 次循环或 5 次循环后，等等。

## 杂项：

社区成员 Alex 我给了我这个公式：

```
shortArray.length == ((timeStamp - lastTimeStamp) / 1e+9) * sampleRate * channels; 
```

粗略的计算让我得到了 4782 短裤一秒钟的答案。
我知道当你传递要编码的音频时，**它必须持续一整秒**
所以我必须每次通过捕获 480 条短裤，然后在第 10 遍之后最终对其进行编码。
**请告诉我这个扣除是否正确？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:29:05.787

如果您有 16 位（两个字节），采样率为 44,000 Hz，即每秒 88,000 字节。如果你有立体声，它是两倍。在 1/10 秒内，您需要其中的 1/10。即每分秒 8,800 字节（1/10 秒）

> 如何从具有 byte[] 作为后备数组的 ByteBuffer 中检索 short[]

```
byte[] bytes = { };
ByteBuffer bb = ByteBuffer.wrap(bytes);

short[] shorts = new short[bb.remaining()/2];
bb.order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(shorts); 
```

如果订单是 BigEndian，则无需更改。

# php - 在带有 UNION 关键字的 mysql 查询中使用 DESC 或 ASC 排序

> ID：14040886
> 
> 赞同：0
> 
> 时间：2012-12-26T12:55:31.680
> 
> 标签：php, mysql, sql, select

在我的页面中，我使用以下查询来显示从当前时间到旧时间的选择。但它选择从旧时间选择到当前时间选择的行。

我想显示从当前时间到旧时间的选择

```
$result=mysql_query("(SELECT choice_id,poll_id,choicecreationtime from je_addchoice ORDER BY choicecreationtime DESC)
    UNION
    (SELECT choice_id,poll_id,datetime_voted from je_user_vote ORDER BY datetime_voted DESC)"); 
```

我不知道为什么会出现这个问题。如果我不使用 UNION 意味着它可以正常工作。例如。下面的查询显示了当前时间到旧时间的顺序

```
 $result = mysql_query("SELECT * FROM je_addchoice, je_addpoll where je_addpoll.privacy='0' AND je_addpoll.start_date <= '$check_date' AND je_addpoll.end_date >='$check_date'  AND je_addpoll.poll_id=je_addchoice.poll_id order by je_addchoice.choicecreationtime desc"); 
```

任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:57:27.827

通过子查询包装`union`ed 查询并在外部查询中对它们进行排序

```
SELECT *
FROM 
    (
        SELECT choice_id, poll_id, choicecreationtime AS TIME
        FROM je_addchoice
        UNION
        SELECT choice_id, poll_id, datetime_voted AS TIME
        FROM je_user_vote
    ) s
ORDER BY TIME DESC 
```

**更新 1**

```
SELECT choice_id, poll_id, choicecreationtime AS TIME
FROM je_addchoice
UNION
SELECT choice_id, poll_id, datetime_voted AS TIME
FROM je_user_vote
ORDER BY Time DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T12:59:08.093

如[`UNION`语法](http://dev.mysql.com/doc/en/union.html)中所述：

> 要将`ORDER BY`或`LIMIT`应用于个人[`SELECT`](http://dev.mysql.com/doc/en/select.html)，请将子句放在括起来的括号内[`SELECT`](http://dev.mysql.com/doc/en/select.html)：
> 
> ```
> (SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)
> UNION
> (SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10); 
> ```
> 
> 但是，使用`ORDER BY`for 单个[`SELECT`](http://dev.mysql.com/doc/en/select.html)语句并不意味着行在最终结果中出现的顺序，因为[`UNION`](http://dev.mysql.com/doc/en/union.html)默认情况下会产生一组无序的行。因此，`ORDER BY`在此上下文中的使用通常与 结合使用`LIMIT`，因此它用于确定要为 检索的所选行的子集[`SELECT`](http://dev.mysql.com/doc/en/select.html)，即使它不一定影响最终[`UNION`](http://dev.mysql.com/doc/en/union.html)结果中这些行的顺序。如果`ORDER BY`没有出现`LIMIT`在 a 中[`SELECT`](http://dev.mysql.com/doc/en/select.html)，它会被优化掉，因为它无论如何都没有效果。
> 
> 要使用`ORDER BY`or`LIMIT`子句对整个[`UNION`](http://dev.mysql.com/doc/en/union.html)结果进行排序或限制，请将各个[`SELECT`](http://dev.mysql.com/doc/en/select.html)语句括起来并将`ORDER BY`or`LIMIT`放在最后一个语句之后。以下示例同时使用了这两个子句：
> 
> ```
> (SELECT a FROM t1 WHERE a=10 AND B=1)
> UNION
> (SELECT a FROM t2 WHERE a=11 AND B=2)
> ORDER BY a LIMIT 10; 
> ```
> 
> 没有括号的语句等同于刚刚显示的带括号的语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T12:59:28.293

试试这个：

```
SELECT choice_id, poll_id, dt
FROM (SELECT choice_id, poll_id, choicecreationtime dt FROM je_addchoice 
      UNION 
      SELECT choice_id, poll_id, datetime_voted dt FROM je_user_vote ) AS A
ORDER BY dt DESC 
```

# c# - 在 AutoCAD 绘图中的特定属性中查找具有特定值的对象

> ID：14040887
> 
> 赞同：2
> 
> 时间：2012-12-26T12:55:34.303
> 
> 标签：c#, autocad-plugin

我在 Autocad 绘图中有对象，其属性名为`Base`. 我试图在该图形中找到所有具有`Base`属性的对象都具有特定的字符串值，例如“ `Pipe`”。

我可以迭代绘图中的对象并获取所有对象 ID。然后我获取具有该 Id 的对象的所有属性并检查属性是否命名为`Base = "Pipe"`.

迭代性能不够好。有什么方法可以直接获取具有名为的属性的对象 ID `Base = "Pipe"`？

这是我遍历所有对象的方式：

```
 List<ObjectId> ObjectIds = new List<ObjectId>();

    foreach (Document Document in Documents)
    {
        Database Database = Document.Database;

        using (Transaction Transaction = Database.TransactionManager.StartTransaction())
        {
            for (long i = Database.BlockTableId.Handle.Value; i < Database.Handseed.Value; i++)
            {
                ObjectId Id;

                if (Database.TryGetObjectId(new Handle(i), out Id))
                {
                        ObjectIds.Add(Id);
                }
            }

            Transaction.Commit();
        }
    } 
```

以下是我如何获取`ObjectIds`集合中对象的所有属性。

```
public static DataLinksManager DataLinks
{
    get
    {
        if (null == _DataLinks)
        {
            StringCollection Coll = Autodesk.ProcessPower.DataLinks.DataLinksManager.GetLinkManagerNames();

            if (Coll.Count > 0)
            {
                if (Coll[0] != string.Empty)
                {
                    _DataLinks = Autodesk.ProcessPower.DataLinks.DataLinksManager.GetManager(Coll[0]);
                }
            }
        }

        return _DataLinks;
    }
}

private static DataLinksManager _DataLinks;

foreach(var Id in ObjectIds)
{
    List<KeyValuePair<string, string>> Properties = DataLinks.GetAllProperties(Id, true);
    // I check existence of my property and if so its value.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:44:15.583

这里的性能缓慢是因为它尝试读取所有对象并检查它是否包含任何属性。据我所知，属性只存在于块引用（插入）。因此，如果使用[选择过滤器](http://docs.autodesk.com/ACD/2013/ENU/index.html?url=files/GUID-125398A5-184C-4114-9212-A2FF28FC1F1D.htm,topicNumber=d30e726632)，我们可以根据过滤条件直接访问那些记录。

[我在这里](http://adndevblog.typepad.com/autocad/2012/05/block-reference-selection-using-selection-filter.html)找到了一个非常简单的示例，使用选择过滤器选择具有特定名称的所有块。

复制该代码的一部分以供参考。这仅选择块参考。你可以从这里迭代。

```
TypedValue[] filterlist = new TypedValue[1];
filterlist[0] = new TypedValue(0, "INSERT");
SelectionFilter filter =  new SelectionFilter(filterlist);

PromptSelectionResult selRes =  ed.SelectAll(filter);

if (selRes.Value.Count != 0)
{
    SelectionSet set = selRes.Value;

    foreach (ObjectId id in set.GetObjectIds())
    {
        BlockReference oEnt = (BlockReference)tr.GetObject(id, OpenMode.ForWrite);
        //do something with oEnt..;
    }

} 
```

如果您可以[为您的过滤器添加复杂性](http://docs.autodesk.com/ACD/2013/ENU/index.html?url=files/GUID-125398A5-184C-4114-9212-A2FF28FC1F1D.htm,topicNumber=d30e726632)，您将只需要迭代一个非常小的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:28:46.363

如果有人需要，这里是解决我的问题的代码。诀窍在于`Iterate`方法。这是基于Philippe Leefsma 的[这篇文章](http://adndevblog.typepad.com/autocad/2012/05/whats-the-best-way-to-iterate-through-an-entire-database.html)。我添加到此方法的是已找到实例的`ObjectClass`属性列表。`ObjectId`我的样品 dawing 大约有 8500 `ObjectIds`。但是，我感兴趣的是具有基类的对象，`acppasset`并且`acppdynamicasset`此类对象的数量为 90。

```
using Autodesk.AutoCAD.ApplicationServices;
using AcadApp = Autodesk.AutoCAD.ApplicationServices.Application;

public static void GetObjects()
{
    List<KeyValuePair<string, ObjectId>> ObjectIds = new List<KeyValuePair<string, ObjectId>>();

    List<string> Filter = new List<string>() { "acppasset", "acppdynamicasset" };

    foreach (Document Document in this.Documents)
    {
        ObjectIdCollection Ids = this.Iterate(Document, Filter);
        if (null != Ids) foreach (var Id in Ids.OfType<ObjectId>()) ObjectIds.Add(new KeyValuePair<string, ObjectId>(System.IO.Path.GetFileNameWithoutExtension(Document.Name), Id));
    }

    this.Results = new Dictionary<string, List<List<KeyValuePair<string, string>>>>();

    foreach (var Id in ObjectIds)
    {
        try
        {
            var Properties = this.GetObject(Id.Value);
            if (null == Properties) continue;

            var Base = Properties.Where(x => x.Key == "Base").FirstOrDefault();

            if (string.IsNullOrWhiteSpace(Base.Value)) continue;

            if (!this.Results.ContainsKey(Base.Value)) this.Results.Add(Base.Value, new List<List<KeyValuePair<string, string>>>());

            this.Results[Base.Value].Add(Properties);
        }   catch { }
    }
}

 public ObservableCollection<Document> Documents { get; set; }

 public ObjectIdCollection Iterate(Document Document, List<string> Filter = null)
        {
            ads_name Instance = new ads_name();
            Database Database = Document.Database;

            ObjectIdCollection ValidIds = new ObjectIdCollection();

            // Get the last handle in the Database
            Handle Handseed = Database.Handseed;

            // Copy the handseed total into an efficient raw datatype
            long HandseedTotal = Handseed.Value;

            for (long i = 1; i < HandseedTotal; ++i)
            {
                string Handle = Convert.ToString(i, 16);

                int Result = acdbHandEnt(Handle, ref Instance);
                if (Result != 5100) continue; // RTNORM

                ObjectId Id = new ObjectId(Instance.a);

                if (!Id.IsValid) continue;

                try
                {
                    if (null != Filter)
                    {
                        if (!Filter.Contains(Id.ObjectClass.Name.ToLower())) continue;
                    }

                    using (DBObject DBObject = Id.Open(OpenMode.ForRead, false))
                    {
                        ValidIds.Add(Id);
                        DBObject.Dispose();
                    }
                }   catch { }
            }

            return ValidIds;
    }

    public List<KeyValuePair<string, string>> GetObject(ObjectId Id)
    {
        if (Command.DataLinks != null) try { return Command.DataLinks.GetAllProperties(Id, true); } catch { return null; }
        return null;
    }

public static DataLinksManager DataLinks
{
    get
    {
        if (null == _DataLinks)
        {
            StringCollection Coll = Autodesk.ProcessPower.DataLinks.DataLinksManager.GetLinkManagerNames();

            if (Coll.Count > 0)
            {
                if (Coll[0] != string.Empty)
                {
                    _DataLinks = Autodesk.ProcessPower.DataLinks.DataLinksManager.GetManager(Coll[0]);
                }
            }
        }

            return _DataLinks;
        }
    }

private static DataLinksManager _DataLinks;

public Dictionary<string, List<List<KeyValuePair<string, string>>>> Results { get; set; } 
```

# vb6 - 在 VB 6 中提取控件的属性（.ctl 文件）

> ID：14040888
> 
> 赞同：0
> 
> 时间：2012-12-26T12:55:35.143
> 
> 标签：vb6, controls

我有一个 VB 6 控制文件（例如 ctl）文件，我的要求是在运行时更改此文件的属性...基本上是一些批量操作...（更改所有 ctl 文件的属性）

此 ctl 文件是项目的一部分。

是否可以更改属性，例如 `height = 100 width = 200 background = white font = calibri`

通过代码，例如使用批处理文件或 c# 或 vb ??...是否有可用的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:29:54.153

ctl 文件仅存在于您的开发环境中。一旦编译到您的应用程序中，它们将成为编译输出的一部分，您将只能修改根据控制文件中定义的规则实例化的对象的属性。

如果每个控件都将高度、宽度和背景字体作为属性公开，那么您将能够在运行时以您希望的方式操作这些控件。如果您有一个希望以这种方式操作的控制对象列表，您可以创建它们的列表并遍历它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:42:27.130

我正在使用[自定义 VB6 IDE 加载项](http://dl.unicontsoft.com/upload/GetVBERef.zip)来获取对 VBIDE.VBE 的引用。然后在即时窗口或公共函数中，所有已加载项目中的所有模块都可以使用代码进行操作。

注册，在 VB6 IDE 中`GetVBERef.dll`加载加载项，从 zip 打开并在即时窗口中键入：`Get VBE Reference``Project2.vbp`

```
For Each oCmp In VBERef.ActiveVBProject.VBComponents: ? oCmp.Name: Next 
```

（你会得到`Module2`只是因为没有更多的东西`Project2`）

您可以从项目中复制/粘贴代码`Module2`并添加对`Microsoft Visual Basic 6.0 Extensibility`. 通过一些试验和错误，您可以编写一个公共函数（例如在同一模块中），调整所有用户控件的大小或设置项目组中所有表单的颜色、字体等。

# php - 如何在我的网站上按时播放我上传的视频

> ID：14040893
> 
> 赞同：0
> 
> 时间：2012-12-26T12:56:02.007
> 
> 标签：php, html, wordpress

我的一个客户想要有实时播放器，可以按时播放他上传的视频。我问这是否可能，因为我有嵌入式频道，直播但没有按时播放上传视频的经验。这是她的问题 2.需要在管理端上传和删除视频的能力。

3.需要为特定视频设置时间/日期时间表才能播放。

4.播放器需要在所有MAC产品和Android上玩。

我将等待您的回复。谢谢瑙曼K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:20:04.197

这个问题非常复杂，所以我将尝试只回答主要问题：仅在特定日期之后才流式传输视频。

我要做的是将有关预定播放时间的信息保存在数据库中的某个位置，然后使用 PHP 将文件内容流式传输到您选择的播放器。

```
$video = new Video('nameOftheFile');

if($video->isScheduled()) {
    if($video->onAir())
        $video->stream();
    else {
        $waitingVideo = new Video('PleaseWaitVideo');
        $waitingVideo->stream();
    }
}
else {
    $video->stream();
} 
```

为了确保播放器切换到视频的实时版本，我会使用 JS 询问 PHP 脚本是否每隔 x 秒播放一次视频，如果是，则让播放器重新加载流并获取预定的视频，而不是等待的视频。

# java-me - 模拟蓝牙鼠标的java应用程序

> ID：14040899
> 
> 赞同：1
> 
> 时间：2012-12-26T12:56:30.510
> 
> 标签：java-me, emulation, hid

我想制作一个java应用程序来模拟蓝牙鼠标（HID），该应用程序应该在**任何配备了加速度计的启用java的触摸屏手机中****运行**

 **我一直在环顾四周，并没有遇到像它这样的现有产品。所以我想知道这是否可能。

我对 Java 标准版也很满意，但是我在 Java ME 方面没有任何经验，所以我就如何继续寻求建议。**

# facebook - 获取实时页面通知 facebook

> ID：14040900
> 
> 赞同：1
> 
> 时间：2012-12-26T12:56:34.593
> 
> 标签：facebook

我需要获取页面通知（新评论、新喜欢、新帖子喜欢等）。有什么可以让我实时的解决方案吗？

实时 api 不支持它。FQL 不支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:23:40.593

Realtime API 不支持它，但**FQL 确实支持它**。给定一个 URL，您总是可以使用`comment`和`link_stat`表获得评论和喜欢。

[http://developers.facebook.com/docs/reference/fql/comment/](http://developers.facebook.com/docs/reference/fql/comment/)

```
SELECT post_fbid, fromid, object_id, text, time
FROM comment
WHERE object_id IN (
   SELECT comments_fbid
   FROM link_stat
   WHERE url ='http://developers.facebook.com/docs/reference/fql/comment/') 
```

`link_stat`表也​​有`comment_count`，`like_count`等等。您对此内容进行了*投票*，因为您*不会收到实时*通知。

# php - PHP 中的迭代性能

> ID：14040901
> 
> 赞同：1
> 
> 时间：2012-12-26T12:56:35.077
> 
> 标签：php, performance, iteration

谁能告诉我这个性能问题

我有 2 个数组，我需要从这 2 个数组中选择 5 个数字并处理逻辑

第一个数组有 5 个数字，我需要从中选择 3 个数字，第二个数组有 4 个数字，我需要从中选择 2 个数字

所以考虑到这一点**5c3 - 10 和 4c2 - 6** 这意味着单个案例的 60 次迭代

我正在接近的方法是否正确？这种类型的迭代是否有任何性能问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:09:16.790

如果您必须遍历整个数组并选择数字，那么就没有优化。执行时间取决于数组的大小，这意味着大小越大 - 执行时间越长。

虽然，如果你知道它总是来自两行的 5 个数字，其元素不会改变，那么我认为你可以生成所有可能的有效组合，将它们存储在数据库或文件中，然后返回一个随机的（如果随机选择是您正在寻找的）。在这种情况下，您将实现一些优化。

# ruby-on-rails - 合并 Rails 中的两个/三个记录

> ID：14040905
> 
> 赞同：7
> 
> 时间：2012-12-26T12:56:55.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, merge, merging-data

我想将两个配置文件合并为一个。在 Rails 中执行此操作的最佳方法是什么。

我有两个配置文件`user1`，`user2`并且至少有 30 个表与它们相关联。

现在我想**将它们合并在一起**，以便应该有一个配置文件说`user1`并且`user2`应该**被删除**，但现在**的所有关联数据都`user2`**应该**与`user1`**。

例如：假设`user2`有两个联系人，`user1`合并后有 3 个联系人，用户`user1`应该有 5 个联系人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T13:27:44.143

像这样的东西

```
@user1 = User.find(1);
@user2 = User.find(2);

Contact.where("user_id = ?", @user2.id).update_all(:user_id => @user1.id)
@user2.destroy 
```

如果是通用解决方案放置文件 /lib/acts_as_user_merge.rb

```
module UserMerge
  module ActsAsUserMerge
    module Base
      def self.included(klass)
        klass.class_eval do
          extend Config
        end
      end
    end

    module Config
        def acts_as_user_merge
            include ::UserMerge::ActsAsUserMerge::InstanceMethods
        end
    end

    module InstanceMethods    
      def merge(user)
        models = Array.new
        models_names = User.reflections.collect{|a, b| b.class_name if b.macro==:has_many}.compact
        models_names.each do |name|
          models << Object.const_get name
        end
        models.each do |model|
          model.where("user_id = ?", user.id).update_all(:user_id => self.id)
        end
        user.destroy
      end
    end
  end
end

::ActiveRecord::Base.send :include, ::UserMerge::ActsAsUserMerge::Base 
```

如何使用

```
User < ActiveRecord::Base
  has_many ...

  acts_as_user_merge

end

@user1.merge(@user2) 
```

有点凌乱，没有经过测试，但应该给你一个想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:29:48.437

类似的东西

```
def merge_users(dead, user)
  User.reflections.each do |assoc, reflection|
    foreign_key = reflection.foreign_key
    case reflection.macro
    when :has_many, :has_one then
      unless reflection.options[:through]
        reflection.klass.where(foreign_key => dead.id).update_all(foreign_key => user.id) # if id is a primary key
      end
      if options[:as] # polymorphic
        if reflection.macro == :has_many
          dead.send("#{options[:as].pluralize}")).each { |r| user.send("#{options[:as].pluralize}<<", r) }
        else
          user.send("#{options[:as]}=", dead.send("#{options[:as]}"))
          user.save
        end
      end
    when :belongs_to then
      if options[:polymorphic]
        user.send("#{assoc}=", deaf.send(assoc))
        user.save
      else
        user.update_attribute(foreign_key, dead.send(foreign_key))
      end
    when :has_and_belongs_to_many then
      dead.send("#{assoc}")).each { |r| user.send("#{assoc}<<", r) }
    end

  end
end

merge_users(dead_user, user)
dead_user.destroy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T07:08:55.830

本文深入讨论了这个问题，并提供了它的工作代码： http: [//ewout.name/2010/04/generic-deep-merge-for-activerecord/](http://ewout.name/2010/04/generic-deep-merge-for-activerecord/)

# json - 来自 Json 的 Ruby 对象反序列化

> ID：14040907
> 
> 赞同：0
> 
> 时间：2012-12-26T12:57:07.733
> 
> 标签：json, ruby-on-rails-3.2

（免责声明：这里是 Rails 新手）

假设我有一个响应“id”的 Rails ActiveRecord 模型：

```
User.first.id # => 22 
```

我的生活发生了变化，现在我需要通过 JSON 调用来获取相同的对象，并且我想要最少的代码更改。

我这样做：

```
uri = URI.parse("http://localhost:3001/user/")
uri.query = "query=id#{user_id}"
@user = JSON.parse(open(uri).read) 
```

我现在可以这样做：

```
@user["id"] 
```

然而，这还不够好，因为这意味着太多的变化。有没有办法把它变成一个真正的用户对象？或者像一个简单的东西一样的东西（我可能可以用构造函数创建一个虚拟对象，但我正在寻找可以为我做的东西，我怀疑有一个简单的 Rails 方式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:12:10.203

我找到了解决此问题的可能方法：

[https://github.com/sprysoft/json_object](https://github.com/sprysoft/json_object)

但是，我意识到我实际上需要原始的 ActiveRecord 模型而不是虚拟对象..

也就是说，对于我的具体问题，上面的 gem 是一个可能的解决方案。

# ksh - 在 ksh 中逐行读取文件

> ID：14040911
> 
> 赞同：2
> 
> 时间：2012-12-26T12:57:45.330
> 
> 标签：ksh

我们使用了一些名为 Autosys 的包，这个包有一些特定的命令。我有一个变量列表，我喜欢将其中一个 Autosys 命令作为变量一一传递。

例如，一个这样的变量是 var1，使用这个 var1 我想启动一个类似这样的命令

```
autosys_showJobHistory.sh var1 
```

现在，当我启动下面的书面命令时，它会给我所需的输出。

```
echo "var1" | while read line; do autosys_showJobHistory.sh $line | grep 1[1..6]:[0..9][0..9] | grep 24.12.2012 | tail -1 ; done 
```

但是，如果我将 var1 放在一个文件中，比如 Test.txt 并使用 cat 启动相同的命令，它什么也没给我。我的印象是命令 autosys_showJobHistory.sh 在这种情况下不起作用。

```
cat Test.txt | while read line; do autosys_showJobHistory.sh $line | grep 1[1..6]:[0..9][0..9] | grep 24.12.2012 | tail -1 ; done 
```

我在第二个命令中做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T16:16:48.737

写了下面的所有内容，然后注意到您的 grep 语句。回想一下，ksh 不支持`..`作为“扩展此值范围”的指标。（我认为这是你的意图）。由于您没有引用 grep 的参数，这也变得模棱两可。如果您使用的是 shell 将转换的语法，那么您将不会真正知道将什么 reg-exp 发送到 grep。总是最好引用参数，除非您确定需要未引用的值。尝试重写为

```
grep '1[1-6]:[0-9][0-9]' | grep '24.12.2012' 
```

另外，您是否故意使用“匹配任何字符”运算符“。” 还是您只想匹配句点字符？如果你只想匹配一个句点，那么你需要像`\.`.

最后，如果您正在处理的任何文件是在 Windows 机器上创建的，然后传输到 Unix/Linux，那么很可能是行尾 (Ctrl-MCtrl-J) (\r\n) 给您带来了问题。使用 .清理基于 PC 的文件（或任何通过 ftp 发送的文件）`dos2unix file [file2 ...]`。

* * *

如果上述方法没有帮助，您将不得不“分而治之”来调试您的问题。

当我进行以下测试时，我得到了预期的输出

```
$ echo "var1" | while read line ; do print "line=${line}" ; done
line=var1
$ vi Test.txt
$ cat Test.txt
var1
$ cat Test.txt | while read line ; do print "line=${line}" ; done
line=var1 
```

与您的问题无关，但肯定会引起评论的是您`cat`在这种情况下使用 commnad，这将为您带来 UUOC 奖。这可以重写为

```
while read line ; do print "line=${line}" ; done < Test.txt 
```

但是要解决您的问题，现在打开 shell 调试/跟踪选项，或者通过更改脚本的顶行（shebang 行），例如

```
 #!/bin/ksh -vx 
```

或者通过使用匹配的对来跟踪这些行的状态，即

```
 set -vx
 while read line; do 
     print -u2 -- "#dbg: Line=${line}XX"
     autosys_showJobHistory.sh $line \
     | grep 1[1..6]:[0..9][0..9] \
     | grep 24.12.2012 \
     | tail -1 
 done  < Test.txt
 set +vx 
```

我添加了一个额外的调试步骤，`print -u2 -- ....`(u2=stderror, -- closes option processing for print) 现在您可以通过查看该输出来确保没有额外的空格或制表符出现。

它们不应该重要，因为您没有引用您的内容`$line`。作为测试的一部分，我建议像`"${line}"`.

然后我会注释掉尾部和 grep 行。你想看看是什么步骤导致这个中断，对吧？那么 autosys_script 本身是否仍会产生您期望的中间输出？那么 autosys + 1 grep 是否按预期产生，+2 grep，+ tail？您应该能够轻松地看到丢失输出的位置。

IHTH

# sitecore - HttpHandler 中的 Sitecore 上下文

> ID：14040912
> 
> 赞同：1
> 
> 时间：2012-12-26T12:57:45.873
> 
> 标签：sitecore, asp.net-4.5

我的站点核心解决方案中有 HttpTaskAsyncHandler，我称之为我有 sutup *IngnoreUrlPrefix*等。由于某种原因，我无法访问 SC.Context.Database 数据库在*ProcessRequestAsync(HttpContext context)*方法中为空，看起来我没有t 在 HttpHandler 中访问 Sitecore 上下文。

如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:19:14.183

您将无法在处理程序中访问 Sitecore 上下文（数据库或项目）。我们已经向 Sitecore 支持部门确认了这一点。

最好的方法是开始在请求管道中实现一个处理器。如何实施

在您的类中继承 HttpRequestProcessor（使用 Sitecore.Pipelines.HttpRequest;）

并在 < httpRequestBegin > 中的 SiteResolver 之后添加该处理器

```
<processor type="Sitecore.Pipelines.HttpRequest.SiteResolver, Sitecore.Kernel" />
<!-- Custom Module  -->
<processor type="SND641.Customization.RobotsModule, SND641" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:06:21.757

如果您选择忽略您的脚本文件（通过使用 IgnoreUrlPrefix），那么 Sitecore 的请求管道将不会处理它，因此不会有 Sitecore 上下文。

我认为您可以通过从 IgnoreUrlPrefix 中删除 url 前缀来解决它，并确保将处理程序的文件扩展名添加到 FilterUrlExtensions 管道处理器的允许扩展参数中：

```
<processor type="Sitecore.Pipelines.HttpRequest.FilterUrlExtensions, Sitecore.Kernel">
  <param desc="Allowed extensions (comma separated)">aspx</param>
</processor> 
```

这样，您可以调用您的脚本，并且仍然让 Sitecore 处理所有管道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-23T20:21:06.700

您可以在没有管道的情况下获取上下文。除了 web.config 处理程序定义，您还需要在 customHandler 下添加。它有助于获取站点核心上下文。例如

```
<customHandlers>
    <handler trigger="blogfeed.xml" handler="blogfeed.xml" />
</customHandlers> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T16:34:46.323

如果我没有得到你想要做的事情，我很抱歉。但是通过使用处理程序，我确实遇到了我的代码无法访问 sitecore 对象的问题，即使我更新了 web.config 和

我注意到我的处理程序是这样的：

```
 public class GetHandler: IHttpHandler
    {
      ...
    } 
```

通过添加**System.web.SessionState.IrequiresSessionStatem**，如下所示：

```
 public class GetHandler : IHttpHandler, System.Web.SessionState.IRequiresSessionState 
    {....} 
```

然后一切开始工作，我能够毫无问题地从 sitecore 获取项目：

```
Public void ProcessRequest(HttpContext context)
{
   Database webdb = Factory.GetDatabase("web");
} 
```

之前我的更改 webdb 没有任何内容，代码返回时显示“命令“Sitecore.Database”无效”

正如我所说，在改变之后，一切都对我有用。

我希望这会有所帮助，并为现有答案增加一些价值。

问候，

# php - 使用 AJAX 将表单数据提交到 PHP

> ID：14040914
> 
> 赞同：1
> 
> 时间：2012-12-26T12:57:51.500
> 
> 标签：php, jquery, ajax

我在显示一些动态创建的数据并在 ajax 完成时显示提交的数据时遇到问题。

**HTML - form.html**

```
 <form name="myForm" id="myForm">
        <strong>Skills 1</strong>     
            <div>
                <select name="Skills[]" id="Skills">
                <optgroup label="Programming">
                   <option value="">-</option>
                   <option value="Javascript">Javascript</option>
                   <option value="C++">C++</option>
                   <option value="C#">C#</option>
                </optgroup>

                <optgroup label="Multimedia">
                   <option value="Adobe Flash MX">Adobe Flash MX</option>
                   <option value="Adobe Fireworks">Adobe Fireworks</option>
                   <option value="Adobe After Effects">Adobe After Effects</option>
                </optgroup>
                </select>
            </div>

            <div>
                <input type="text" name="SkillsNumber[]" id="SkillsNumber" placeholder="Number of year using" />
            </div>

            <div>
                <select name="SkillsGrade[]" id="SkillsGrade">
                  <option value="">Select your skills grade</option>
                  <option value="Noob">Noob</option>
                  <option value="Amateur">Amateur</option>
                  <option value="Professional">Professional</option>
                </select>
            </div>            
        </div>
    </form>
<div id="result-set"></div> 
```

*** 这个选择部分可以动态添加（最多3个）**

**jQuery**

```
$(function(){
$("#myForm").submit(function(){
    var formData = $(this).serializeArray();
    console.log(formData);

    $.ajax({
        type: "POST",
        data: {
            theData: formData
        },
        url: "theresult.php",
        success: function(result){
            $("#result-set").ajaxComplete(function() {
                   $("#result-set").html(result);
               });
        }   
    }); 
    return false;
}); 
```

**PHP - 结果.php**

```
<?php
   $data = $_POST['theData'];
   $enc = json_encode($data, true);

   ...
   ....
   .....
?> 
```

问题是我应该怎么做，如果我有 3 个选择（所以我有 3 个技能、3 个技能编号和 3 个技能等级）并在#result-set 上显示它。已经在这里开裂了。

抱歉英语不好。新手在这里... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:03:41.007

在表单上添加一个按钮，例如

```
<input type="button" value="submit" id="myBtn"> 
```

像这样更改您的代码

```
$("#myBtn").submit(function(){ 
```

像这样写你的成功函数

```
success: function(result){                
     $("#result-set").html(result);
 } 
```

如果您想将 json 数据用作 javascript 对象，请像这样设置您的 $.ajax 方法参数`dataType: 'json'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:11:09.477

用于`parse_str`获取您的数据：

PHP - 结果.php

```
<?php
    parse_str($_POST['theData'], $params);
    $Skills = $params['Skills[]']; // I am not sure about [] part, test it
    $SkillsGrade = $params['SkillsGrade[]'];   
    $SkillsNumber = $params['SkillsNumber[]'];   

    echo "Skills: $Skills<br />";
    echo "SkillsGrade: $SkillsGrade<br />";
    echo "SkillsNumber: $SkillsNumber<br />";

    exit;
?> 
```

并添加`dataType: "html"`到您的 $.ajax() 定义中

# php - PHP / MySQL 简单 IF / ELSE 没那么简单

> ID：14040915
> 
> 赞同：0
> 
> 时间：2012-12-26T12:58:10.487
> 
> 标签：php, mysql

我想我的头脑一定是在经历节礼日的混乱。

我正在为运动队参加的每场比赛建立一个基本的评论部分。

因此，当没有输入评论时（在 MySQL 数据库中），我只想显示“成为第一个输入评论的人”；否则，以html格式显示评论结果表。

我可以轻松地显示评论结果表。

出于某种原因，我无法让 IF no comments 正常工作。现在感觉好业余。. . :-)

我已经声明了行数：

```
 $row_count = 0; 
```

我在 while 语句中添加计数

```
 while($row = mysql_fetch_array($result))
     {
          // adding to count
          $row_count++; 
```

我的计数正在工作，因为我可以在屏幕上显示行号。

这是 IF / ELSE 我的代码：

```
 if ($row_count === 0) {
        echo "<p>Be the first to enter a game comment and earn points toward your next fan badge.</p>";
    } else {
                   // no need to show code as this already works! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:04:22.567

您可以使用

```
mysql_num_rows($queryReference) 
```

希望这可以帮助。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:03:07.637

请做一件事，使用下面的函数打印这个值并告诉我输出是什么

```
var_dump($row_count); 
```

或者你可以使用 == 而不是 ===

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:03:15.000

```
$query = mysql_query("SELECT * FROM comments");
$c = mysql_num_rows($query);
if($c==0) {
    echo "<p>Be the first to enter a game comment and earn points toward your next fan badge.</p>";
}
else {
    while($row = mysql_fetch_array($query))
    {
        $vars = $row[index];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:31:34.910

$row_count = 0;

我在 while 语句中添加计数

```
 while($row = mysql_fetch_array($result))
     {
          // adding to count
          $row_count++;
       } 
```

我的计数正在工作，因为我可以在屏幕上显示行号。

这是 IF / ELSE 代码：

```
 if ($row_count == 0) {
        echo "<p>Be the first to enter a game comment and earn points toward your next fan badge.</p>";
    } else {
                   // no need to show code as this already works!
             } 
```

# jquery - 当新视频向上滚动到页面上时如何更改按钮？

> ID：14040917
> 
> 赞同：0
> 
> 时间：2012-12-26T12:58:29.840
> 
> 标签：jquery, button, video, controls

在此页面[http://kimcolemanprojects.com/djangolive_1.html](http://kimcolemanprojects.com/djangolive_1.html)上有五个视频。

当您单击每个视频时，下一个视频会向上滚动到 jQuery 视图中。

由于这个 jQuery 效果，我不得不禁用视频控件。所以我决定在每个视频的左边放一个播放/暂停按钮。

但是，我现在需要一些帮助来制作一个脚本，该脚本将在每个新视频滚动到视图中时更改按钮。我有一段脚本可以在不同视频滚动进入视图时更改标题，这也在每个视频的左侧，请参阅下面的脚本。

```
$(window).load(function(){
// Scroll to titles on click
$('a').on('click', function() {
var target = $(this).attr('href');
$('html,body').animate({
scrollTop: $(target).offset().top
}, 'slow');
return false;
});
// jQuery `inView`-expression
$.extend($.expr[':'], {
inView: function(el) {
var width = $(el).width(),
height = $(el).height(),
offset = $(el).offset(),
vp_dimensions = {
height: $(window).height(),
width: $(window).width()
},
y_offset = (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop),
x_offset = (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
return (
offset.top < (y_offset + vp_dimensions.height) && offset.left < (x_offset + vp_dimensions.width) && (offset.top + height) > y_offset && (offset.left + width) > x_offset);
}
});
// Change the titles on scroll
$(window).scroll(function() {
$('li').each(function() {
var self = $(this),
title = self.find('video').attr('title');
if (self.is(':inView')) {
$('#title').find('h2').text(title);
}
});
}).scroll();
}); 
```

谢谢你的时间

安吉拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:57:24.043

下面的代码实现了我想要的以及更多，它不仅使按钮与滚动到视图中的视频相对应，它还在滚动出视图时暂停视频，当视频播放完毕时，它会将下一个滚动到视图中并自动播放。感谢 jQuery 论坛上的 jakecigar。

```
$.extend($.expr[':'], { // jQuery `inView`-expression
inView: function (el) {
var width = $(el).width(),
height = $(el).height(),
offset = $(el).offset(),
vp_dimensions = {
height: $(window).height(),
width: $(window).width()
},
y_offset = (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop),
x_offset = (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
return(
offset.top < (y_offset + vp_dimensions.height) && offset.left < (x_offset + vp_dimensions.width) && (offset.top + height) > y_offset && (offset.left + width) > x_offset);
}
});
var video;
$(function (){
video=$('video:first').get(0)
$('a').on('click', function () {
var target = $(this).attr('href');
$('html,body').animate({
scrollTop: $(target).offset().top
}, 'slow')
return false;
});
$('video').on('ended',function(){
$(this).parents('a').click()
setTimeout(vidplay,1000)
})
});
$(window).scroll(function () {
$('video:not(:inView)').each(function () {
this.pause()
})
video = $('video:inView:last').get(0)
if(video) $('#title').find('h2').text(video.title)
}).scroll();
function vidplay() {
if(video.paused) {
video.play();
$('#play').text("||");
} else {
video.pause();
$('#play').text(">");
}
}
function percent(){
return (video.currentTime/video.duration*100).toFixed(0)+'%'
}
function restart() {
video.currentTime = 0;
}
function skip(value) {
video.currentTime += value;
} 
```

# qt - Qt - 捕获来自多个类的发射信号

> ID：14040918
> 
> 赞同：0
> 
> 时间：2012-12-26T12:58:32.443
> 
> 标签：qt, signals-slots, emit

我正在开发一个 TCP 服务器应用程序。我有 newDataReceived 插槽，我在其中发出一个信号，如下所示：

```
void myclass::newDataReceived()
{

    char data_received[1024] = {0};
    client->read(data_received, client->bytesAvailable());
    QString msg = data_received;
    QString client_ip = client->peerAddress().toString();

    emit dataReceived(msg,client_ip);
} 
```

我已经从 MainWindow 捕捉到信号，没有问题。但是，我有另一个类是 QThread，我希望这个类也能捕捉到这个信号。但它不这样做。我将信号连接到我的插槽，例如，

```
srv_thread = new myclass();
connect(srv_thread, SIGNAL(dataReceived(QString,QString)), this, SLOT(incoming_message(QString,QString))); 
```

我错过了什么？

提前致谢！

# android - 通过谷歌地图意图搜索附近的医院（Android）

> ID：14040927
> 
> 赞同：0
> 
> 时间：2012-12-26T12:59:36.043
> 
> 标签：android, google-maps, android-intent

我需要搜索附近的儿童医院并使用意图从按钮单击中找到根，

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
                        Uri.parse("http://maps.google.com/maps?&saddr="
                                + x
                                + ","
                                + y
                                + "&daddr=nearby child hospitals"

                                ));
                        startActivity(intent); 
```

x,y 作为当前的纬度和经度。

它将显示医院不在我当前的位置（显示不同的国家医院）然后，我单击返回按钮，然后单击获取方向按钮意味着（来自文本框包含我的来源经纬度，目的地文本框包含附近的儿童医院），它显示了我附近的儿童医院。

首先有什么办法（即意图调用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:23:30.073

您可以使用`"geo:"`URL 方案打开地图，然后搜索附近的医院，如下所示：

```
String uri = "geo:"+ x + "," + y +"&q=child hospitals";
startActivity(new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri))); 
```

有关文档参考，请参阅[在 Android 设备上调用 Google 应用程序](http://developer.android.com/guide/appendix/g-app-intents.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-14T06:57:14.983

```
 Uri gmmIntentUri = Uri.parse("geo:0,0?q=" + query);
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(gmmIntentUri.toString()));
        intent.setPackage("com.google.android.apps.maps");
        try {
            context.startActivity(intent);
        } catch (ActivityNotFoundException ex) {
            try {
                Intent unrestrictedIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(gmmIntentUri.toString()));
                context.startActivity(unrestrictedIntent);
            } catch (ActivityNotFoundException innerEx) {
                Toast.makeText(context, "Please install a maps application", Toast.LENGTH_LONG).show();
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T15:29:19.780

您可以使用此代码，意图打开地图并自动搜索我附近的医院

```
String uri = "geo:"+ x + "," + y +"?q=hospitals+near+me";
startActivity(new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri))); 
```

# asp.net-mvc-3 - 使用值填充下拉列表

> ID：14040931
> 
> 赞同：0
> 
> 时间：2012-12-26T12:59:47.563
> 
> 标签：asp.net-mvc-3

您好，我正在尝试使我的下拉列表正常工作，但似乎比预期的要难。我有 3 个域类成员、租赁和电影。我的想法是制作一个下拉列表，显示特定用户租借的电影，当我在下拉列表中选择电影并提交时，我将取回所选电影，我可以将 bool IsInStock 设置为 true。

所以我做了一个视图模型和一个控制器动作，但想要一些帮助如何继续前进。现在我得到一个包含用户“Jan”租借电影的下拉列表，但是当我单击提交时，我想取回这些值以便将 IsInStock 设置为 true。我知道我需要处理 POST 值的方法，但我正在尝试先完成这项工作。

```
public class Member
    {
        public virtual int MemberId { get; set; }
        public virtual string LastName { get; set; }
        public virtual List<Rental> Rentals { get; set; }
    }
 public class Rental
    {
        public virtual int RentalId { get; set; }
        public virtual int MovieId { get; set; }
        public virtual Movie Movie { get; set; }
        public virtual int MemberId { get; set; }
        public virtual Member Member { get; set; }
    }
  public class Movie
  {
    public virtual int MovieId { get; set; }
    public virtual string Name { get; set; }
    public virtual bool IsInStock { get; set; }
  }
  public class RentalsViewModel
    {
        // Need something here.
        public IEnumerable<SelectListItem> RentedMovies { get; set; }
    }
    public ActionResult ReturnMovie()
    {

        var rentedmovies = db.Rentals.Where(r => r.Member.Name == "Jan").ToList();

        var model = new RentalsViewModel()
        {

            RentedMovies = rentedmovies.Select(x => new SelectListItem
            {
                Value = x.MovieId.ToString(),
                Text = x.Movie.Name
            })
        };

        return View(model);
    }

// In the View

       @using (Html.BeginForm())
{
@Html.DropDownListFor(x => x.RentedMovies, //Something here);
<p>
<input type="submit" value="Save" />
</p>                                                                  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:18:33.247

这里的第一个参数：

```
@Html.DropDownListFor(x => x.RentedMovies, //Something here); 
```

必须是`int`，因为您会将此值发送到服务器：

```
public virtual int MovieId { get; set; } 
```

因此，您的示例可能如下所示：

```
@Html.DropDownListFor(x => x.RentedMovieId, Model.RentedMovies); 
```

（将属性添加`RentedMovieId`到`RentalsViewModel`）

# python-2.7 - 以下代码没有得到任何输出或任何错误？

> ID：14040936
> 
> 赞同：0
> 
> 时间：2012-12-26T13:00:25.033
> 
> 标签：python-2.7, screen-scraping, beautifulsoup

我使用以下代码从 url 中抓取数据（在代码中提到）。我运行了代码，但它没有给出任何输出也没有抛出任何错误？我是 python 语言的新手，这可能是一个愚蠢的问题。有人能帮我吗？

```
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup
page = urllib2.urlopen('http://www.t-mobile.de/smartphones/0,22727,23392-_3-0--0-all-,00.html').read()
soup = BeautifulSoup(page)
soup.prettify()
with open('TMO_DE_2012-12-26.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')
    spamwriter.writerow(["Date","Month","Day of Week","Device Name","Price"])
    items = soup.findAll('div', {"class": "top"},text=True)
    prices = soup.findAll('strong', {"class": "preis-block"})
    for item, price in zip(items, prices):
        textcontent = u' '.join(price.stripped_strings)
        print unicode(item.string).encode('utf8').strip()
        if textcontent:            
            spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%B"),time.strftime("%A") ,unicode(item.string).encode('utf8').strip(),textcontent]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:06:01.663

该页面上没有*带有文本*`<div class="top">`的元素，因此是一个空列表。删除过滤器：*`items``text=True`*

 *```
items = soup.findAll('div', {"class": "top"}) 
```

并从中提取所有文本：

```
item_text = u' '.join(item.stripped_strings)
if textcontent and item_text:            
    spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%B"),time.strftime("%A") , item_text, textcontent]) 
```

或者，集成到您现有的代码中：

```
with open('TMO_DE_2012-12-26.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')
    spamwriter.writerow(["Date","Month","Day of Week","Device Name","Price"])
    items = soup.findAll('div', {"class": "top"})
    prices = soup.findAll('strong', {"class": "preis-block"})
    for item, price in zip(items, prices):
        textcontent = u' '.join(price.stripped_strings)
        item_text = u' '.join(item.stripped_strings)
        if item_text and textcontent:            
            spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%B"),time.strftime("%A"), item_text.encode('utf8'),textcontent.encode('utf8')]) 
```*

# macos - 创建 ICNS 文件时出现 ImageIO 错误

> ID：14040938
> 
> 赞同：1
> 
> 时间：2012-12-26T13:00:34.857
> 
> 标签：macos, cocoa, icons, icns

此代码 (`source`是`NSMutableArray`带有`NSImage`对象的：

> ```
> NSURL *fileURL = [NSURL fileURLWithPath:aPath];
> CGImageDestinationRef dr = CGImageDestinationCreateWithURL((CFURLRef)fileURL,
>                                                            kUTTypeAppleICNS,
>                                                            1,
>                                                            NULL);
> 
> for (NSImage *img in source) {
> 
>     NSLog(@"%@",img);
>     CGImageRef i1 = [img CGImageForProposedRect:NULL context:nil hints:nil];
>     CGImageDestinationAddImage(dr, i1, NULL);
> 
> }
> 
> CGImageDestinationFinalize(dr);
> CFRelease(dr); 
> ```

导致以下输出：

> 2012-12-26 13:48:57.682 Eicon[1131:1b0f] |NSImage 0x1025233b0 Size={11.52, 11.52} Reps=("NSBitmapImageRep 0x10421fc30 Size={11.52, 11.52} ColorSpace=(尚未加载) BPS=8 BPP =（尚未加载）像素=1024x1024 Alpha=NO Planar=NO 格式=（尚未加载）CurrentBacking=nil（故障）CGImageSource=0x104221170”
> 
> (...) <- 这里记录了其他 NSImage 实例。
> 
> **ImageIO：|错误| CGImageDestinationFinalize 图像目的地没有足够的图像**

任何想法为什么它以错误结尾？（顺便说一句，我想改用 IconFamily 但它使用的很多方法都已弃用）。

编辑：也许更重要的是提及我用来生成图像的代码，如果该代码有问题（我是菜鸟），我不会感到惊讶：

```
// Get images
[source removeAllObjects];
NSSize sizes[10];
sizes[0] = NSMakeSize(1024,1024);
sizes[1] = NSMakeSize(512,512);
sizes[2] = NSMakeSize(512,512);
sizes[3] = NSMakeSize(256,256);
sizes[4] = NSMakeSize(256,256);
sizes[5] = NSMakeSize(128,128);
sizes[6] = NSMakeSize(64,64);
sizes[7] = NSMakeSize(32,32);
sizes[8] = NSMakeSize(32,32);
sizes[9] = NSMakeSize(16,16);
for (int i=0 ; i<10 ; i++) {
    if ([[NSUserDefaults standardUserDefaults] boolForKey:[NSString stringWithFormat:@"Size%i",i+1]]) {
        NSBitmapImageRep *srcimg = [[NSBitmapImageRep alloc] initWithData:[NSData dataWithContentsOfFile:aFile]];
        [srcimg setPixelsHigh:sizes[i].height];
        [srcimg setPixelsWide:sizes[i].width];
        NSImage *newimg = [[NSImage alloc] initWithSize:NSZeroSize];
        [newimg addRepresentation:srcimg];
        if (![newimg isValid]) {
            [delegate error:@"Invalid file."];
        }
        else [source addObject:newimg];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T00:11:25.507

一部分猜测解决方案，一部分更改将改进代码，即使它不是解决方案......</p>

您的图片数量`CGImageDestinationCreateWithURL`错误；您应该传递您希望添加的图像数量。

给定一个循环，您显然希望添加一个*或多个*. 鉴于您的输出，您实际上是在添加多个图像。

你说你会添加一张图片，然后你添加了不止一张。

我的猜测是错误消息不清楚/过于具体。错误说：

> CGImageDestinationFinalize 图像目的地没有足够的图像

但我认为这意味着：

> CGImageDestinationFinalize 图像目的地的图像数量与您承诺的不同

换句话说，问题不在于您提供的图片少于预期；*而是您提供的图片数量少于预期。*这是您提供的*超出*预期，而 CGImageDestination 没有区分更多和更少。

更改您的`CGImageDestinationCreateWithURL`呼叫以提供您将要添加的正确数量的图像。鉴于您问题中的代码，这应该是`source.count`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T09:01:11.250

穿过`-TIFFRepresentation`并且`CGImageSource`是高度回旋处。请改用[该`CGImageForProposedRect:context:hints:`方法](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/occ/instm/NSImage/CGImageForProposedRect%3acontext%3ahints%3a)。

# ruby-on-rails - 关于 Ruby on Rails 的一般问题

> ID：14040941
> 
> 赞同：2
> 
> 时间：2012-12-26T13:00:37.990
> 
> 标签：ruby-on-rails, routes, controllers

嘿伙计们，圣诞快乐！

我是 ruby​​ on rails 的新手，我仍然对一些东西有点困惑：

**我什么时候需要创建一个新的控制器，什么时候不需要？**

我想创建一个带有单个搜索框的应用程序并搜索所有文章。我应该为起始页（搜索框）和搜索创建一个控制器吗？我应该为静态页面创建控制器吗？

**我应该使用管理界面 gem 还是创建自己的？**

普通用户现在应该有权创建文章，只有管理员。我应该使用其中一个管理界面 gem 还是创建自己的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:10:00.123

Ruby on Rails 确实是 MVC，这意味着控制器将模型连接到视图。因此，一般来说，考虑更多面向资源是一种很好的做法：根据您想要找到/呈现的每个资源，您创建一个控制器。在您的情况下，例如：

*   `ArticlesController`：您的主视图，带有搜索框
*   `PagesController`: 对于静态页面，如果你需要一些 erb/haml
*   `admin/ArticlesController`: 用于管理文章

现在，完全静态的页面也可以放在`public`文件夹下，不需要控制器，除非您需要在页面上显示一些动态信息（例如文章总数）。

关于您的搜索框：恕我直言，这只是您的索引页面的一个参数。例如，在索引上显示最近的十篇文章，当搜索某个词时，显示相关文章，但在同一个控制器和相同操作上。

关于管理界面：是的，使用像[rails_admin](https://github.com/sferik/rails_admin)或[active_admin](https://github.com/gregbell/active_admin)这样的 gem ，它会让你立即开始。所以一定要这样做。当然，这些宝石非常通用，可能无法完全满足您的需求。应该是这种情况，您以后总是可以轻松恢复。

HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:32:13.813

Ruby on Rails 遵循 MVC 框架，控制器是包含您的操作的类，因此您需要为网站将提供的每个功能添加一个操作。从技术上讲，您可以在一个控制器中拥有所有操作，但这太糟糕了，因此我们通常会创建不同的控制器来以更好的方式组织您的路线和代码。 [遵循控制器上的 Rails 指南。](http://guides.rubyonrails.org/action_controller_overview.html)

对于管理界面 gem，您可以使用[devise](https://github.com/plataformatec/devise)和[cancan](https://github.com/ryanb/cancan)，它们都非常可靠且经过良好测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:52:41.023

圣诞节快乐！

正如 Khaled 建议的那样，Rails 是 MVC 架构，拥有每个页面的控制器总是好的。即使您现在可能有一个静态页面，但后来当您尝试使站点成为动态页面时，您将会非常困惑在哪里为特定视图页面添加方法。

一般来说，最好使用宝石而不是从头开始制作。您可以查看此[链接](http://railsapps.github.com/tutorial-rails-bootstrap-devise-cancan.html)，该链接教您如何将 devise 和 cancan 与 twitter bootstrap（用于查看）一起使用。但是，如果您打算学习 Rails，那么我最好建议您从头开始学习，因为您将对正在发生的事情有所了解。您可以看到本[教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)从头开始完成大部分任务。

享受铁路！！

# mongodb - 如何将 spring data mongo @CompoundIndex 与子集合一起使用？

> ID：14040942
> 
> 赞同：9
> 
> 时间：2012-12-26T13:00:41.450
> 
> 标签：mongodb, spring-data, spring-data-mongodb

假设我有如下实体：

```
@Document(collection = "doc_a")
public class A {    
  @Field("id")
  private Integer id;

  @Field("b")
  private Collection<B> b;
  ...
}

public class B {    
  @Field("id")
  private Integer id;
  ...
} 
```

是否可以一起使用关于 A.id 和 B.id 的复合索引？

我的意思是也许像：

```
@CompoundIndex(name = "aid_bid_idx", def = "{'id', 'b.id'}") 
```

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T11:33:46.753

我已经在我的应用程序中尝试过这种复合索引，它也使用弹簧数据，并且工作正常。您只需要更正`@CompoundIndex`注释中的索引定义：

```
@CompoundIndex(name = "aid_bid_idx", def = "{'id' : 1, 'b.id' : 1}")
@Document(collection = "doc_a")
public class A {    
  @Field("id")
  private Integer id;

  @Field("b")
  private Collection<B> b;
  ...
}

public class B {    
  @Field("id")
  private Integer id;
  ...
} 
```

如果您在 mongo shell 中使用 explain（如下所示）运行查询，您将看到将使用索引 *aid_bid_idx*。

```
db.doc_a.find({ "id" : 1, "b.id" : 1}).explain() 
```

结果将是这样的：

```
{
    "cursor" : "BtreeCursor aid_bid_idx",
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-28T16:16:20.337

我遇到了同样的问题，对我来说 Miguel 的解决方案有效，但我必须将 @CompoundIndex 包装在 @CompoundIndexes 中，否则它不起作用（我使用的是 Spring Roo）。

```
@CompoundIndexes({
    @CompoundIndex(name = "aid_bid_idx", def = "{'id' : 1, 'b.id' : 1}")
})
@Document(collection = "doc_a")
public class A {...} 
```

# html - 跨度图像悬停在CSS中？

> ID：14040946
> 
> 赞同：0
> 
> 时间：2012-12-26T13:00:49.693
> 
> 标签：html, css

大家好。我想更改悬停时的图像，但我的代码不起作用。

到目前为止的代码

```
<!DOCTYPE html>
<html>
<style>
a.rollover span.displace {
    display: block;
    width: 150px;
    height: 44px;
    text-decoration: none;
    }

a.rollover span.displace img:hover {
    background: url("images/red.png");
    display: block;
    }

</style>
<body>
<a href="#" class="rollover" title="Webvamp"><span class="displace"><img src="images/blue.png"/></a>

</body>
</html> 
```

任何帮助都非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:08:04.873

下面的代码应该可以工作。CSS：

```
<style>
a.rollover span.displace {
    display: block;
    width: 150px;
    height: 44px;
    text-decoration: none;
     background: url("images/blue.png");
}

a.rollover span.displace:hover {
    background: url("images/red.png");        
}
</style> 
```

和 HTML：

```
<a href="#" class="rollover" title="Webvamp"><span class="displace"></span></a> 
```

您正在尝试为显示另一个图像的图像放置背景，因此基本上您的背景隐藏在使用 src 指定的图像下方

* * *

如果你想拥有 img - 你可以使用[这个](https://stackoverflow.com/a/9782469/1558311)答案的解决方案：

```
<a href="#" class="rollover" title="Webvamp"><span class="displace"><img src="images/blue.png" onmouseover="this.src='images/red.png';" onmouseout="this.src='images/blue.png';"/></span></a> 
```

* * *

另一种选择是：

```
<a href="#" class="rollover" title="Webvamp"><span class="displace"><img src="images/blue.png" class="initial" /><img src="images/red.png" class="hover"/> </span></a> 
```

和 CSS：

```
img.hover{display:none;}

a.rollover span.displace {
    display: block;
    width: 150px;
    height: 44px;
    text-decoration: none;        
}

a.rollover span.displace:hover img.hover{
    display:block;      
}

a.rollover span.displace:hover img.initial{
    display:none;      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:09:33.980

你的逻辑有点不清楚。您要做的是尝试设置背景图像，对于图像，它将被设置但不会显示，因为您的图像将与元素的背景图像重叠。

试试这个代码：

```
<!DOCTYPE html>

<html>

<style>

a.rollover span.displace div.image, a.rollover span.displace  {
    display: block;
    width: 150px;
    height: 44px;
    text-decoration: none;
    }

a.rollover span.displace div.image {
    background: url("images/blue.png");
}

a.rollover span.displace div.image:hover {
    background: url("images/red.png");
    }

</style>

<body>

<a href="#" class="rollover" title="Webvamp">

    <span class="displace">

        <div class="image"></div>

    </span>

</a>

</body>

</html> 
```

在这段代码中，我所做的是我`div`为它拍摄并设置了一个背景图像。`div`当有人将鼠标悬停`div`在`div`.

# android - 在不打开应用程序的情况下运行服务

> ID：14040950
> 
> 赞同：0
> 
> 时间：2012-12-26T13:01:12.267
> 
> 标签：android, android-service, android-broadcast

在 3.1 之后，Android 引入了一项安全功能，除非用户打开应用程序，否则应用程序的代码无法运行。检查链接以获取更多信息[http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

我想知道是否有人发现任何黑客或解决此问题的方法，我可以在其中收听系统广播，如启动、连接更改并运行服务而无需打开已安装的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:05:47.670

这不是帖子所说的。您仍然可以注册广播侦听器或警报。您只需要用户实际启动您的应用程序一次。而且，如果用户强行停止您的应用程序，他们将需要再次手动启动它。

为什么要解决这种行为？这似乎很有意义。

# hibernate - hbm2ddl.auto（实体类到 DDL）能力的通用术语

> ID：14040951
> 
> 赞同：0
> 
> 时间：2012-12-26T13:01:22.193
> 
> 标签：hibernate, domain-driven-design, hbm2ddl, model-driven-development

我想知道hibernate的实体类到DDL（**hbm2ddl**）能力的**通用术语是什么。**

 **是***领域驱动设计***还是***模型驱动开发***或其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:04:58.923

我会说这当然不是领域驱动设计。hbm2ddl 可以与 DDD 结合使用，但与 DDD 原理关系不大。DDD 较少关注持久性技术，而更关注业务领域。

MDD 可能是一个有争议的观点。可以说这是 MDD 的一部分，因为 MDD 的想法是在代码中使用建模工件。使用领域模型类来生成数据库模式可以看作是 MDD 的一个例子。**

# php - 仅在 select 语句中设置时间戳的时间

> ID：14040954
> 
> 赞同：0
> 
> 时间：2012-12-26T13:01:30.727
> 
> 标签：php, mysql, sql, timestamp

我有一个应用程序，用户可以在其中定义他的工作时间：例如从早上 8 点到下午 5 点。在我的 MySQL 数据库中，我有两个时间戳字段。如何只设置时间而不设置日期？我需要这个，因为只有时间很重要。我只想知道用户从什么时候到什么时候工作。日期本身无关紧要。

我尝试过这样的事情，但我的数据库拒绝了它：

```
0000-00-00 08:00:00 
```

这是我的选择语句：

```
# check if there is already an appointment, if yes, return it
select * 
from ios_appointments a join ios_workinghours h using(workerid_fk)
where workerid_fk = 1
AND h.start <= '08:30:00' AND h.end >= '10:00:00'
AND (
    a.start BETWEEN '2012-12-24 08:30:00'  AND  '2012-12-24 10:00:00'
    OR  a.end   BETWEEN '2012-12-24 08:30:00'  AND  '2012-12-24 10:00:00'
    OR (a.start < '2012-12-24 08:30:00' AND a.end > '2012-12-24 10:00:00')
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:14:41.850

not sure if this is what your are asking for but u can use DATE_FORMAT

```
select * 
  from ios_appointments a join ios_workinghours h using(workerid_fk)
  where workerid_fk = 1
        AND DATE_FORMAT(h.start , '%H:%i:%s') <= '08:30:00' AND DATE_FORMAT(h.end , '%H:%i:%s') >= '10:00:00'
        AND (
          a.start BETWEEN '2012-12-24 08:30:00'  AND  '2012-12-24 10:00:00'
          OR  a.end   BETWEEN '2012-12-24 08:30:00'  AND  '2012-12-24 10:00:00'
          OR (a.start < '2012-12-24 08:30:00' AND a.end > '2012-12-24 10:00:00')
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:15:17.657

Don't use MySQL's [`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html) data type; use [`TIME`](http://dev.mysql.com/doc/en/time.html) instead:

> MySQL retrieves and displays `TIME` values in `'HH:MM:SS'` format (or `'HHH:MM:SS'` format for large hours values). `TIME` values may range from `'-838:59:59'` to `'838:59:59'`. The hours part may be so large because the `TIME` type can be used not only to represent a time of day (which must be less than 24 hours), but also elapsed time or a time interval between two events (which may be much greater than 24 hours, or even negative).

Therefore:

```
ALTER TABLE ios_workinghours
  MODIFY start TIME,
  MODIFY end   TIME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:07:42.880

用于[`CURTIME()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-time)在表中插入当前时间。

> 根据函数是在字符串还是数字上下文中使用，以 'HH:MM:SS' 或 HHMMSS.uuuuuu 格式返回当前时间。该值以当前时区表示。

此外，您可以[参考](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:17:30.690

试试这个它会解决你的问题-

```
select * 
from ios_appointments a join ios_workinghours h using(workerid_fk)
where workerid_fk = 1
AND date_format( h.start, "%h:%i:%s")  <= '08:30:00' AND date_format( h.end, "%h:%i:%s") >= '10:00:00'
AND (
    a.start BETWEEN '2012-12-24 08:30:00'  AND  '2012-12-24 10:00:00'
    OR  a.end   BETWEEN '2012-12-24 08:30:00'  AND  '2012-12-24 10:00:00'
    OR (a.start < '2012-12-24 08:30:00' AND a.end > '2012-12-24 10:00:00')
) 
```

# datejs - setWeek 年份检测

> ID：14040955
> 
> 赞同：0
> 
> 时间：2012-12-26T13:01:32.970
> 
> 标签：datejs

看看setWeek之后的一年

```
d = Date.today() 
Wed Dec 26 2012 00:00:00 GMT+0000 (GMT Standard Time) 
d.getWeek() 
52 
d.setWeek(52) 
Mon Dec 23 2013 00:00:00 GMT+0000 (GMT Standard Time) 
```

有谁知道这是怎么回事？我是否误解了 setWeek 函数的工作方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:16:26.923

我在`datejs`跟踪器中发现了同样的问题。它是从 2011 年开始的，尽管它仍然被标记为*新*的：[setWeek 问题](http://code.google.com/p/datejs/issues/detail?id=139)

所以关于你的问题“我是否误解了 setWeek 函数应该如何工作？” 我会说这是`jdate`代码中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T10:30:32.027

如果您查看 datejs 源代码，您会发现它`setWeek`总是会移动到目标周的星期一`n`：

```
Date.prototype.setWeek = function (n) {
  return this.moveToDayOfWeek(1).addWeeks(n - this.getWeek());
}; 
```

见：[datejs：svn/trunk/src/core.js](https://code.google.com/p/datejs/source/browse/trunk/src/core.js#408)

# c# - 添加额外的命名空间会减慢网页的速度吗？

> ID：14040956
> 
> 赞同：1
> 
> 时间：2012-12-26T13:01:47.310
> 
> 标签：c#, asp.net, namespaces

在页面上包含大量命名空间是否会对页面的性能产生任何影响？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T13:04:56.670

不。这里有一个类似的问题：[为什么要使用指令删除不必要的 C#？](https://stackoverflow.com/questions/136278/why-should-you-remove-unnecessary-c-sharp-using-directives)

看看，回答的很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:08:05.897

这种性质的事情实际上并没有发生。看看这个了解更多细节

[为什么要使用指令删除不必要的 C#？](https://stackoverflow.com/questions/136278/why-should-you-remove-unnecessary-c-sharp-using-directives)

# visual-studio-2010 - 无法使用 Windows 窗体向 Visual Studio C++ 中的按钮添加操作

> ID：14040957
> 
> 赞同：1
> 
> 时间：2012-12-26T13:01:56.513
> 
> 标签：visual-studio-2010, struct, c++-cli

您好，亲爱的 SO 社区！我有以下问题 - 我使用结构编写了一个简单的 add_record 函数（这是我的主文件）：

```
// Exercise1.cpp : main project file.

#include "stdafx.h"
#include "Form1.h"

using namespace Exercise1;

typedef struct student {
        char *name;
        int index;
        double avg;
        student *next;
        student *prev;
} stud;

student *first = 0;

[STAThreadAttribute]

void add_record(student **first, char *name, int index, double avg){
                student *new_stud = new student;
                if (*first!=0) (*first)->prev = new_stud;
                new_stud->name = name;
                new_stud->avg = avg;
                new_stud->index = index;
                new_stud->next = *first;
                new_stud->prev = 0;
                *first = new_stud;
} 
```

但是，我不能将此添加记录功能放入按钮操作中（使用预定义数据，仅用于测试目的）代码`Form1.h`：

```
#pragma once

namespace Exercise1 {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Form1
    /// </summary>
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {

            InitializeComponent();

            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  button1;
    protected: 
    private: System::Windows::Forms::Button^  button2;
    //all remaining buttons here - irrelevant

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
}
 #pragma endregion
    private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                 String ^ i = "working";
                 textBox1->Text = i;

             }
private: System::Void button2_Click(System::Object^  sender, System::EventArgs^  e) {
             String ^ g = "test";
             if(add_record(student **first, testname, 23, 3.5))
                 textBox1->Text = g;
         }

};
} 
```

如何通过添加记录来修复该部分？我收到以下错误：

```
1>d:\visual studio 2010 express\projects\exercise1\exercise1\Form1.h(176): error C2065: 'student' : undeclared identifier
1>d:\visual studio 2010 express\projects\exercise1\exercise1\Form1.h(176): error C2065: 'first' : undeclared identifier
1>d:\visual studio 2010 express\projects\exercise1\exercise1\Form1.h(176): error C2065: 'testname' : undeclared identifier
1>d:\visual studio 2010 express\projects\exercise1\exercise1\Form1.h(176): error C3861: 'add_record': identifier not found 
```

我想这与变量声明有关，但我不知道该把它放在哪里才能让它工作..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T11:39:40.430

从您的代码段。

没有类型定义为`student`- 结构是`typdef`-`stud`这解释了为什么编译器对你大喊它不识别方法声明`student **first`中的参数类型。`add_record`

```
using namespace Exercise1;

typedef struct student {
        char *name;
        int index;
        double avg;
        student *next;
        student *prev;
} stud; // <<<-------------------- should it be "} student;"?

student *first = 0;

[STAThreadAttribute]

void add_record(student **first, char *name, int index, double avg){
                student *new_stud = new student;
                if (*first!=0) (*first)->prev = new_stud;
                new_stud->name = name;
                new_stud->avg = avg;
... 
```

# css - 页面范围内的可重复背景与 CSS 中的居中容器

> ID：14040962
> 
> 赞同：1
> 
> 时间：2012-12-26T13:02:37.687
> 
> 标签：css, background-image, containers, css-sprites

我对 CSS 很陌生，我总是尝试自己解决问题，但是这个问题让我陷入了太长时间......非常感谢您的帮助。:-)

基本上，我要做的是一个带有居中容器的页面，其中包含 4 个不同的部分，占容器宽度的 100%。现在，棘手的部分是：这 4 个部分中的每一个都有不同的纹理背景，这些背景延伸到居中的容器之外，并占据了 100% 的页面宽度。

这是基本的线框图：

[http://i.imgur.com/Qlwjb.jpg](http://i.imgur.com/Qlwjb.jpg)

我想到了一些说来做到这一点：

• 1：不用主容器，只需制作 4 个占据页面 100% 宽度的 div，应用它们的纹理背景，然后再制作 4 个带有 .class 的 div，给它们一个宽度并使其居中。这将解决问题，但问题是我必须尽可能避免制作额外的 div。（我是学生，你看，我拥有的 div 越少，我的成绩就越好。:-/）

• 2：将包含所有 4 个纹理的垂直背景图像应用到身体，并确保它仅在 X 轴上重复。这可能是最简单但最肮脏的方法：虽然 4 个部分应该有固定的高度，但如果我需要在其中一个部分添加一些东西，事情会变得难看，我必须制作另一个适合的垂直 bg-image .

• 3：可能是“最干净”的方法：将多个背景应用到身体，并让它们从顶部的不同距离开始，这样它们就不会重叠。但这就是我的 CSS 技能不足的地方：我不太确定该怎么做。另外，作为一名学生，我必须尽量保持简单，同时使用“高级”技术以获得更好的成绩。这意味着：如果我选择将多个背景应用于身体，我可能应该尝试使用包含所有 4 个背景的精灵：

[http://i.imgur.com/Awr4L.jpg](http://i.imgur.com/Awr4L.jpg)

......这又会让我觉得事情变得更加棘手。我只是不知道是否可以应用可重复的背景图像，并且如果应用它的元素（在本例中为主体）没有定义的大小，则只显示它的给定部分。有没有办法“裁剪”一个 bg 图像并重复它而不给它所应用的元素一个大小？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T06:51:29.397

我认为解决方案1是要走的路。我不会对额外的 div 过分强调——如果设计要求每个部分都有自己的纹理背景，该背景跨越页面的宽度，而内容居中，那么额外的 div 是必要的。

其他选项涉及太多的试验和错误（你能确保一个部分的内容高度不会超过下一个背景“神奇”定位的点吗？）。

过去我不得不做类似的事情。就是这样：

创建 4 个 div 堆叠在一起，宽度为 100%（div 的默认行为）

给每一个它自己的 css 类并将背景图像分配给该类。对于居中的内容，创建一个可重用类 (.container)，该类具有要在每个 div 中应用的全局样式（宽度：960 像素；边距：0 自动；）

所以你的标记看起来像 -

```
<div class="div1">
    <div class="container">Content for div 1</div>
</div>
<div class="div2">
    <div class="container">Content for div 2</div>
</div>
<div class="div3">
    <div class="container">Content for div 3</div>
</div>
<div class="div4">
    <div class="container">Content for div 4</div>
</div> 
```

您的 CSS 将类似于 -

```
.div1 {
    background: url(../img/bgs/div1-bg.jpg) 0 0 repeat;
}

.div2 {
    background: url(../img/bgs/div2-bg.jpg) 0 0 repeat;
}

.div3 {
    background: url(../img/bgs/div3-bg.jpg) 0 0 repeat;
}

.div4 {
    background: url(../img/bgs/div4-bg.jpg) 0 0 repeat;
}

.container {
    width: 960px; //based on 960 grid
    margin:0 auto; // used to center the container based on it's width
} 
```

使用您的设计所需的任何背景定位和重复规则，但这是一般的想法。

css 的目标是尝试识别常见的设计模式并使用类来尝试尽可能多地重用这些模式（如上面的容器类）——而不是为每个元素做单独的样式。

我强烈建议您阅读 Jonathon Snooks [Smacss](http://smacss.com/)和[Harry Roberts 的博客](http://csswizardry.com/)

希望有帮助:-)

# iphone - NSInteger 值在传入变量时无效，用于自定义表视图类委托方法

> ID：14040963
> 
> 赞同：0
> 
> 时间：2012-12-26T13:02:43.317
> 
> 标签：iphone, objective-c, uitableview, nsinteger

我正在测试一个自定义表格视图样式类：

[水平表](https://github.com/TheVole/HorizontalTable)

它产生一个水平表视图。

等效于的委托方法之一`tableView:numberOfRowsInSection:`是：

```
- (NSInteger)numberOfColumnsForTableView:(HorizontalTableView *)tableView. 
```

如果我给它一个数字（例如：）`return 10;`，它会很高兴，它会给我我想要的数字“单元格”。但是如果我给它一个值`someArray.count`或一个`int`或`NSInteger`变量，表格视图就会出现空白，不提供任何单元格。

我认为自定义表格视图类中接收`NSInteger`值的方法是这样的：

```
- (NSUInteger)numberOfPages {
    NSInteger numPages = 0;
    if (_delegate)
        numPages = [_delegate numberOfColumnsForTableView:self];
    return numPages;
} 
```

我需要将结果`someArray.count`转换为`NSInteger`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:14:01.450

在这里，您从数组中获取值意味着您的数组不是 nil，因此只需调试并检查是否符合该条件的 if 条件以及您从中获得什么`NSLog`

```
- (NSUInteger)numberOfPages {
    NSInteger numPages = 0;
    if (_delegate){
        numPages = [_delegate numberOfColumnsForTableView:self];
        NSLog(@"Total record %d",numPages);//what you get here?
    }
    return numPages;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:34:44.953

```
numPages = [_delegate numberOfColumnsForTableView:self];
//self requires an object of type  HorizontalTableView 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T14:18:55.357

[NSMutableArray](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)是可编辑的，而[NSArray](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)是只读的。

`NSMutableArray`是一个子类，并`NSArray`响应诸如 等消息；即它是可变的，就像名字所说的那样。相反，它是不可变的，即您不能添加/删除对象。`addObject``removeObject``NSArray`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T14:04:21.470

实际上，将要返回的值转换为 NSArray 的计数，而不是 NSMutableArray 的计数解决了这个问题。为什么？我不确定为什么 NSArray 的计数值是有效的，但不是 NSMutableArray 的。任何人？

# java - 尝试将异常对象转换为 Json 文本时出现异常

> ID：14040965
> 
> 赞同：2
> 
> 时间：2012-12-26T13:02:49.213
> 
> 标签：java, gson

我得到了这个例外

```
Caused by: java.lang.StackOverflowError
    at java.util.ArrayList.get(ArrayList.java:322)[:1.6.0_12]
    at com.google.gson.stream.JsonWriter.peek(JsonWriter.java:354) 
```

当尝试将异常对象转换为 Json 文本时，如下代码

```
Exception exception = new Exception("Test");    
String gsonText = gson.toJson(exception); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:31:06.073

您会收到 StackOverflowError ，因为异常的原因实例成员变量已初始化为自身。序列化程序尝试遍历对象并且永远不会完成，因为它一直遵循对原因的引用。

GSON google group 上有一条[消息描述了这个问题](https://groups.google.com/forum/?fromgroups=#!topic/google-gson/hFpBXbudMRQ)，建议的解决方案是：

> 因此，您有三个（独家）选择：
> 
> 1）如果您要序列化自己的异常，请修改所有异常以将原因设置为空，或在构造时传递参数。
> 
> 2) 对从 getCause() 返回 (null) 的任何异常调用 initCause(null) （可能最终在这里得到一些 IllegalStateExceptions）
> 
> 3) 编写您自己的序列化程序，它会调用 getCause() 而不是尝试取消引用“原因”字段。
> 
> 此外，尝试通过网络发送序列化的异常代码可能是一种非正统的设计选择。

通常对应用程序开发人员的建议是不要向客户端显示堆栈跟踪，因此我建议在异常上调用 toString 或以其他方式将异常映射到服务器端的消息并发送消息。

# jquery - 如果特定文本字段有效，则 Jquery Validate -> fadeIn textField？

> ID：14040969
> 
> 赞同：0
> 
> 时间：2012-12-26T13:03:15.843
> 
> 标签：jquery, validation, fadein

我陷入了一个非常简单的问题，

我有一个按顺序排列的表格：

*   电子邮件，
*   pw1,
*   pw2,
*   用户名（可选）

整个表单使用 .validate() 进行验证，它工作得很好，并显示了很好的错误消息等。

我无法实现的一件事是：我希望用户名文本字段仅在电子邮件、pw 和 pw2 的值有效时显示

我在 div class="reguser" style="display:none;" 中输入了用户名

我尝试了 .valid() 方法，例如：

```
if ($('#passwort').valid() && $('#passwort2').valid() && $('#email').valid()) {
    $('.reguser').show();
}; 
```

这根本不起作用，所有字段都询问 .valid() 现在是否最初用错误消息突出显示，如果它们通过输入有效值而变得有效，`.reguser`则不会显示

也试图捕捉类有效，但我想我需要在 onfocusout 这样的事件上这样做

```
if ($('#passwort').hasClass('.valid') && $('#passwort2').hasClass('.valid') && $('#email').hasClass('.valid')) {
    $('.reguser').show();
}; 
```

有人给我提示吗？我在互联网上搜索了几个小时，但没有取得进展

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:24:09.007

由于显示用户名字段需要所有必填字段，因此您可以检查整个表单是否有效：

```
$('#formId :input').on('blur', function(){
    if($('#formId').valid())
    {
        $('.reguser').show();
    }
}); 
```

您可以更改`blur`为您想要的事件。

# c# - 在插入时禁用 dapper.rainbow 使用 ID

> ID：14040970
> 
> 赞同：3
> 
> 时间：2012-12-26T13:03:15.903
> 
> 标签：c#, sql, dapper, dapper-rainbow

我正在使用 dapper.rainbow 将记录插入 MSSQL 数据库。以下是我的代码

```
int? id  = db.RoomTypes.Insert(roomType) 
```

当我运行我的应用程序时，出现以下异常。

```
Cannot insert explicit value for identity column in table 'RoomTypes' 
when IDENTITY_INSERT is set to OFF. 
```

我认为 dapper.rainbow 在插入期间为我的标识列使用了值（int 的默认值）。这就是导致此异常的原因。我的表的标识列`RoomTypes`是自动递增的，它也是我的表的主键。

现在，我如何阻止 dapper.rainbow 在插入期间使用 ID 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:14:56.103

查看[Dapper.Rainbow.Insert](http://code.google.com/p/dapper-dot-net/source/browse/Dapper.Rainbow/Database.cs)方法，该方法对于作为数据参数传入的类型是“愚蠢的”：

```
public virtual int? Insert(dynamic data)
{
    var o = (object)data;
    List<string> paramNames = GetParamNames(o);

    string cols = string.Join(",", paramNames);
    string cols_params = string.Join(",", paramNames.Select(p => "@" + p));
    var sql = "set nocount on insert " + TableName + " (" + cols + ") values (" + cols_params + ") select cast(scope_identity() as int)";

    return database.Query<int?>(sql, o).Single();
} 
```

换句话说，如果您将 ID 作为属性包含在参数中，那么 Dapper 将尝试将该值插入到数据库中。如您所见，如果您将 IDENTITY_INSERT 设置为 Off，则插入将失败。

这意味着您需要创建一个不包含您的 ID 属性的新类型才能传递给该方法。有几个想法浮现在脑海：

1.  创建一个没有 ID 的基类`RoomTypes`，然后将基类传递给`Insert`方法。
2.  创建一个动态参数并将其传递给`Insert`仅包含要插入数据库的属性的方法。
3.  覆盖该`Insert`方法并删除 ID 参数，然后再发送到`Dapper`

# java - 为什么 java 在 System out 语句中遇到字符串后开始将所有内容都视为字符串？

> ID：14040971
> 
> 赞同：2
> 
> 时间：2012-12-26T13:03:17.890
> 
> 标签：java, jakarta-ee

我正在学习java并每天练习它，我编写了以下代码并想知道输出

```
class test
{
public static void main(String args[])
{
System.out.println(1+2+ " = " +10+2);
}
} 
```

这里的输出是**3=102**，并且想知道以下“一旦在 System out 语句中遇到字符串，Java 就会开始将所有内容视为字符串”

谁能解释一下？我很困惑为什么它接受它作为字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T13:07:03.077

Java 解析程序文本而不考虑表达式的类型。作为动机，考虑它们是否是在类中的方法之后编写的字段。因此，由于字符串连接和加法共享相同的运算符，我们有

```
1+2+ " = " +10+2 
```

相当于

```
((((1+2)+ " = ") +10)+2) 
```

折叠常数，我们有

```
(((3+ " = ") +10)+2)
(("3 = " +10)+2)
("3 = 10"+2)
"3 = 102" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:06:57.273

`+`with String 成为字符串连接运算符，而不是加法运算符。

`1 + 2 + 10 + 2`将等于 15 作为简单加法，而
`1 + 2 + "+" + 10 + 2`将被视为
1.`1 + 2`输出将是 3，因为它是简单加法
2.`3 + = (String)` 输出将是 `3=`因为它是字符串连接
3.`3= (String) + 10 + 2`将是字符串连接而不是简单加法，因此输出将是`3=102`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:08:17.820

> “一旦在 System.out 语句中遇到字符串，Java 就会开始将所有内容视为字符串”

这是完全错误的。`System.out`是类的静态实例`PrintStream`。PrintStream 具有该`println()`方法的许多重载版本，您的示例中的一个接受`String`作为参数。您正在使用**+ 运算符**，它用于***连接***字符串，除非操作数都是数字。

```
System.out.println(3+5+"."); // println(String) is invoked.
System.out.println(3+5); // println(int) is invoked. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:07:26.767

```
 (1+2) -- two integres additoin will result int 3
  (3 +  " = ") -- this will result int + String = String (concatination)
  ("3=") -- String + any thing (data type) will result String 
```

# c# - ASP.Net Only 1 Form Restriction：我应该对所有内容都使用网页吗？

> ID：14040972
> 
> 赞同：0
> 
> 时间：2012-12-26T13:03:18.877
> 
> 标签：c#, asp.net, webforms

我被迫在我的项目中使用 Web 表单，遗憾的是，Web 表单只允许 - 如果可以的话 - 创建“严格”的网站。

每当您需要一个 Button 时，您需要将其放入一个表单中，然后您需要另一个与前一个按钮无关的按钮，并且您不能有 2 个表单，

放置一个触发服务器端（C＃）方法的DIV的想法有点困难，好吧它可能很容易，但我发现的只是“技巧”，而不是“官方”的干净方式。

所以我有这个想法，为我网站中的每个操作制作一个**网页**。

**例如：**

假设我想点击提高这个问题评分的箭头，我会放这样的东西。

**HTML**

```
<a href="Rating.aspx?id=23&upOrDown=up" id="rateUpButton">Rate Up</a> 
```

还有一些 CSS 代码使它看起来像一个漂亮的按钮......

好的，现在这将带我到一个名为**Rating.aspx**的页面，其中包含 2 个参数，第一个参数是我想提高其评级的问题的 ID，第二个参数是 UP (+rating) 或 DOWN(-评分）。

在 Rating.aspx 的 Page Load 方法中，我会更新数据库，然后重定向到问题页面。

这将完美地工作，但是，这是一个好方法吗？专业吗？（请记住，会有很多这样的动作......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:05:03.053

使用 ASP.NET，您最好使用服务器控件。更好的实现方法是使用 or ，它实际上呈现你的锚标记。但是您可以将 OnClick 事件处理程序附加到此控件（链接按钮），因此单击后会自动 POST 到服务器。当前页面将发生相同的页面循环（这称为 PostBack），并且您的附加事件处理程序将触发，您实际上可以在其中对数据库进行更改。因此，您甚至不需要为此类任务创建任何其他页面。每个服务器控件都有特定的事件集，例如按钮的 OnClick 或下拉列表的 OnSelectedIndexChanged。您甚至可以创建自己的控件或从现有控件派生并创建自己的事件。

查看以下链接以获取更多信息：

[按钮点击](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)

[ASP.NET 中的事件处理](http://msdn.microsoft.com/en-us/library/6w2tb12s%28v=vs.80%29.aspx)

[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

# objective-c - 以编程方式打开定位服务视图

> ID：14040977
> 
> 赞同：1
> 
> 时间：2012-12-26T13:03:39.377
> 
> 标签：objective-c, ios, url-scheme

如何像 iOS6 中的 Apple Maps 一样使用方案以编程方式打开“位置服务”视图？我在这里没有找到答案：[http ://wiki.akosma.com/IPhone_URL_Schemes](http://wiki.akosma.com/IPhone_URL_Schemes)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:08:09.927

prefs:// 方案已在 iOS 5.0 中引入，并在 iOS 5.1 中删除。

您必须向您的用户弹出一条消息并解释他如何在设置中启用位置服务。

# sql - 如何在 SQL Server 2008 R2 中恢复 .bak 文件

> ID：14040983
> 
> 赞同：2
> 
> 时间：2012-12-26T13:03:59.713
> 
> 标签：sql, sql-server-2008-r2

我有一个代码博客，但出现了问题。在这里，我的备份文件是`ISBANK.bak`，数据库名称是新的数据库名称。它不包含任何东西。我想将`.bak`文件的内容添加到新数据库..

```
RESTORE DATABASE [DBName]
FROM DISK = 'D:\ISBANK.bak'
WITH REPLACE,
MOVE 'DBName' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQL2008RR2\MSSQL\DATA\DBName.mdf',
MOVE 'DBName' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQL2008RR2\MSSQL\DATA\DBName.ldf' 
```

我收到这些错误：

> *消息 5133，级别 16，状态 1，第 1 行
> 文件“C:\Program Files\Microsoft SQL Server\MSSQL10.SQLSRV2008\MSSQL\DATA\OBERNET_DENEME.mdf”的目录查找失败，出现操作系统错误 3（无法检索此错误的文本。原因：15105)。
> 消息 3156，级别 16，状态 3，第 1 行
> 文件“OCEAN”无法恢复到“C:\Program Files\Microsoft SQL Server\MSSQL10.SQLSRV2008\MSSQL\DATA\OBERNET_DENEME.mdf”。使用 WITH MOVE 标识文件的有效位置。
> 消息 5133，级别 16，状态 1，第 1 行
> 文件“C:\Program Files\Microsoft SQL Server\MSSQL10.SQLSRV2008\MSSQL\DATA\OBERNET_DENEME.ldf”的目录查找失败，出现操作系统错误 3（无法检索此错误的文本。原因：15105)。
> 消息 3156，级别 16，状态 3，第 1 行
> 文件“OCEAN_log”无法恢复到“C:\Program Files\Microsoft SQL Server\MSSQL10.SQLSRV2008\MSSQL\DATA\OBERNET_DENEME.ldf”。使用 WITH MOVE 标识文件的有效位置。
> Msg 3119, Level 16, State 1, Line 1
> 在规划 RESTORE 语句时发现了问题。以前的消息提供了详细信息。
> 消息 3013，级别 16，状态 1，第 1 行
> RESTORE DATABASE 异常终止。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:43:31.073

编辑

删除 WITH REPLACE

```
RESTORE DATABASE my_new_database FROM disk = 'E:\path_to_bak_file\database_name_634182143083281212.bak'
WITH
   MOVE 'the logical name from previous operation check row 1' TO 'E:\path_to_sql2008_file_onyour_machine\my_new_database.mdf',
   MOVE 'the logical name from previous operation check row 2' TO 'E:\path_to_sql2008_file_onyour_machine\my_new_database_log.ldf'
GO 
```

* * *

您还可以使用 SQL Server Management Studio (SSMS) 中提供的还原实用程序。这是一个循序渐进的过程，您可以选择 .bak 文件并将其还原为新数据库（您喜欢的任何名称）。

启动 SQL Server Management Studio，以管理员身份连接到服务器，右键单击数据库节点并选择恢复。

![在此处输入图像描述](../Images/a1e9fbfd9143e3a5db795d090dd1cae9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T14:48:17.027

您已使用默认路径进行数据库恢复。

这将对您有用。

[![在此处输入图像描述](../Images/87e102b3d3fea2c2842662df820f4b90.png)](https://i.stack.imgur.com/9tEjJ.jpg)

# google-analytics - 谷歌分析事件跟踪没有显示准 确的数据？

> ID：14040991
> 
> 赞同：0
> 
> 时间：2012-12-26T13:04:37.793
> 
> 标签：google-analytics, event-tracking

我的网页（page1）上有一个“下载”按钮。单击此按钮，将打开一个 downloadFile.php 页面（page2）并自动下载一个 zip 文件。我想跟踪 page1 中的 onclick 事件。所以我设置了点击时的谷歌分析事件跟踪。代码如下：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-xxxxxxx-1']);
 _gaq.push(['_setAllowLinker', true]);
 _gaq.push(['_setDomainName', 'mydomain.com']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

</script>  

 <a  href="downloadFile.php" onclick="_gaq.push(['_trackEvent', 'name1', 'Download', 'Download trial']);">Download</a> 
```

我还在页面加载时存储用户（USER_AGENT）信息。所以我得到了下载次数。

谷歌分析事件数据显示，但点击事件数和下载数不匹配。也就是说，如果点击事件是 85，我记录的下载数是 700。差别很大。我觉得分析点击事件跟踪不准确。这可能吗？还是我在设置跟踪代码时犯了错误？

# jquery - 在 chrome 扩展上保持相同的值

> ID：14040992
> 
> 赞同：0
> 
> 时间：2012-12-26T13:04:40.027
> 
> 标签：jquery, html, google-chrome, audio, google-chrome-extension

你好

我的扩展有一些问题，我制作了一个可以工作的收音机播放器，但是我添加了一个音量控制，例如，当您将滑块滑动到音量的 25% 时，音频的音量会降低到 25% ，但是当您关闭弹出窗口然后再次打开弹出窗口时，滑块为 100%，音频音量为 25%。

所以我想做的是：
将滑块保持在弹出窗口关闭时的值，所以当用户再次打开弹出窗口时，滑块的值仍然是 25% 而不是回到 100%

* * *

代码：
**popup.html：**

```
<a class="playback" href="#">
<img id="play" src="img/play.png" />
</a>

<div class="mutebtns">
<a id="mute-bt" href="#">
<img id="mute" rel='tipsy' src="img/unmuted.png" title="Mute" />
</a>
</div>

<div stle="display:inline;">Volume:<span id="val"></span></div>
<div id="slider"></div> 
```

**脚本.js：**

```
var bgPage = chrome.extension.getBackgroundPage();

    // Volume control
    $(function() {
    $("#slider").slider({
    animate: "true",
    value : 100,
    step  : 1,
    range : 'min',
    min   : 0,
    max   : 100,
    slide : function( event, ui ){
      var value = $("#slider").slider("value");
        bgPage.$("#audio_player")[0].volume = parseFloat(value / 100);
      $("#val").html(ui.value + "%");
    }
    });
        $("#val").html($("#slider").slider("value") + "%");
    }); 
```

**背景.html：**

```
<div id="audiocontainer">
    <audio id="audio_player" src="http://85.25.118.16:7502/;livestream.mp3" width="320" height="80"></audio>
    <div id="slider"></div>
</div> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:42:49.043

直接从后台页面的元素中读取实际音量，`<audio>`而不是在滑块上不相关的值：

```
$("#val").text(bgPage.$("#audio_player")[0].volume * 100 + "%"); 
```

如果要保留设置，请考虑将值保存在`localStorage`：

```
 slide : function( event, ui ){
    var value = $("#slider").slider("value");
    bgPage.$("#audio_player")[0].volume = parseFloat(value / 100);
    localStorage.setItem('volume', value);
    $("#val").html(ui.value + "%");
  }
});
var volume = localStorage.getItem('volume');
if (volume == null) {
    // Not saved yet, use default value
    volume = 100; // 100%
}
$("#val").text(volume + '%');

// And in the background page:
// After creating the <audio> element:
var volume = localStorage.getItem('volume');
if (volume == null) {
    // Not saved yet, use default value
    volume = 100; // 100%
}
audioElement.volume = volume / 100; 
```

我建议为它创建一个函数，而不是重复相同的代码来获取卷。这样可以更轻松地维护您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:07:16.647

不要将滑块的值设置为 100，而是将其设置为当前音量。

```
value: $('#slider')[0].volume, 
```

# callback - 子窗口的鼠标移动消息被父级拦截，如何在子窗口的回调中获取它们

> ID：14040993
> 
> 赞同：1
> 
> 时间：2012-12-26T13:04:46.920
> 
> 标签：callback, cursor, mousemove, adobe-illustrator, windows-messages

我正在编写 Adob​​e Illustrator 的插件。Illustator UI 在主窗口中有许多非模态对话框（浮动面板）。我想处理一个面板的**WM_MOUSEMOVE**消息。所以我找到面板的句柄并使用**SetWindowLongPtr()**设置该面板的 CALLBACK 函数，并使用**SetCapture()**函数让它捕获鼠标。但是在回调中**WM_MOUSEMOVE**消息没有出现，但是我使用 SPY++ 观看面板并且所有**WM_MOUSEMOVE**消息都在那里。所以我猜主机应用程序做了一些事情（也许是鼠标钩子？）来获取鼠标消息，而不是把它们交给面板的回调函数。

我该怎么做才能知道主机应用程序在哪里截获消息？当鼠标移动到某个地方时，主机似乎会改变光标，我怎样才能防止它设置光标？

# android - 如何在 Eclipse 布局设计器中为 android 显示 Unicode 字体

> ID：14040994
> 
> 赞同：1
> 
> 时间：2012-12-26T13:04:47.547
> 
> 标签：android, eclipse, layout, unicode

我的资源中有以下资源`strings.xml`

```
<string name="punjabi">ਪੰਜਾਬੀ</string> 
```

这会显示在 Android 字符串资源编辑器和我的应用程序中。

但是在 Eclipse 布局编辑器中，字符显示为框，类似于`□□□□□□`

方框字符表示字体字形查找失败。

关于如何让 Eclipse`unicode`在布局设计器中显示的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:29:46.083

你需要两件事。字体本身和后备映射。

首先，将所需的字体（例如 Lohit-Punjabi.ttf）复制到平台特定的字体目录中：
`sdk\platforms\android-###\data\fonts`

其次，将备用字体添加到该目录下的字体定义文件中：

对于最高**13的 android SDK 版本，在****fonts.xml**中添加以下行

 **```
<fallback ttf="Lohit-Punjabi" /> 
```

对于 android SDK 版本**14及更高版本，在****fallback_fonts.xml**中添加以下行

 **```
<family>
  <fileset>
    <file>Lohit-Punjabi.ttf</file>
  </fileset>
</family> 
```****

# c++ - const 值运行时评估

> ID：14040995
> 
> 赞同：3
> 
> 时间：2012-12-26T13:04:54.680
> 
> 标签：c++

以下代码的输出：

```
const int i= 1;
(int&)i= 2;          // or:  const_cast< int&>(i)= 2;
cout << i << endl; 
```

为**1**（至少在VS2012下）

我的问题：

*   是否定义了这种行为？
*   编译器是否总是使用定义的常量值？
*   是否可以构建一个编译器将使用最新赋值的值的示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T13:16:46.140

它是完全未定义的。您只是无法更改常量的值。

碰巧编译器将您的代码转换为类似

```
cout << 1 << endl; 
```

但程序也可能崩溃，或者做其他事情。

如果您将警告级别设置得足够高，编译器肯定会告诉您它不会工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T13:15:38.330

> Is this behavior defined?

The behavior of this code is not defined by the C++ standard, because it attempts to modify a const object.

> Would the compiler always use the defined value for constants?

What value the compiler uses in cases like this depends on the implementation. The C++ standard does not impose a requirement.

> Is it possible to construct an example where the compiler would use the value of the latest assignment?

There might be cases where the compiler does modify the value and use it, but they would not be reliable.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T13:24:28.623

答案是行为未定义。

我设法建立了这个结论性的例子：

```
#include <iostream>

using namespace std;

int main(){

        const int i = 1;

        int *p=const_cast<int *>(&i);
        *p = 2;
        cout << i << endl;

        cout << *p << endl;

        cout << &i << endl;

        cout << p << endl;

        return 0;
} 
```

其中，根据 gcc 4.7.2 给出：

```
1
2
0x7fffa9b7ddf4
0x7fffa9b7ddf4 
```

因此，就像您拥有相同的内存地址，因为它拥有两个不同的值。

最可能的解释是编译器只是简单地将常量值替换为其文字值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-26T13:34:04.947

正如其他人所说，行为是不确定的。

为了完整起见，以下是标准的引用：

> （第 7.1.6.1/4 节）除了可以修改任何声明为 mutable (7.1.1) 的类成员外，任何在其生命周期 (3.8) 期间修改 const 对象的尝试都会导致未定义的行为。[ 例子：
> 
> [...]
> 
> ```
> const int* ciq = new const int (3);  // initialized as required
> int* iq = const_cast<int*>(ciq);     // cast required
> *iq = 4;                             // undeﬁned: modiﬁes a const object 
> ```
> 
> ]

请注意，本段中的*对象*一词是指所有类型的对象，包括简单的整数，如示例中所示——不仅仅是类对象。

尽管该示例引用了指向具有动态存储的对象的指针，但该段落的文本清楚地表明这也适用于对具有自动存储的对象的引用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T13:11:05.547

您正在`const_cast`使用类似 C 的`cast operator`.

使用`const_cast`并不保证任何行为。

如果您这样做，它可能会起作用，也可能不会起作用。

（你知道在 C++ 中使用类似 C 的运算符不是一个好习惯）

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-26T13:22:14.050

是的，您可以，但前提是您将 const 作为只读而非编译时 const 启动，如下所示：

```
int y=1;
const int i= y;
(int&)i= 2;
cout << i << endl; // prints 2 
```

C++ const 关键字可能会产生误导，它要么是 const 要么是只读的。

# iphone - 使用 MKNetworkKit 下载文件的总大小

> ID：14040998
> 
> 赞同：1
> 
> 时间：2012-12-26T13:05:12.227
> 
> 标签：iphone, ios, objective-c, ipad, mknetworkkit

我正在使用 MKNetworkKit 在 MKNetworkEngine 子类中使用以下代码下载文件：

```
- (MKNetworkOperation *)downloadFileFromURL:(NSString *)urlString toFile:(NSString *)filePathString
{
    MKNetworkOperation *op = [self operationWithURLString:urlString params:nil httpMethod:@"GET"];
    [op addDownloadStream:[NSOutputStream outputStreamToFileAtPath:filePathString append:YES]];
    [self enqueueOperation:op];
    return op;
} 
```

关于如何显示下载文件的总大小或下载速率的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:50:30.333

你可以得到这个。下面是代码

```
[downLoadEngine onDownloadProgressChanged:^(double progress) {
        progressBar.progress = progress;
}]; 
```

progress 是 mknetworkkit 返回的浮点值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:42:09.937

如果您的服务器发送 Content-Size 标头，您可以从

```
operation.readonlyResponse.expectedContentLength 
```