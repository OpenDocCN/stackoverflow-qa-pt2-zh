# StackOverflow 问答 15779000-15779999

# javascript - javascript：通过单击循环中的当前值来获取值

> ID：15779002
> 
> 赞同：2
> 
> 时间：2013-04-03T04:41:19.017
> 
> 标签：javascript, jquery

我正在构建数据表，并通过在数据库中设置总记录，我得到了它们的总数。

现在我对 JavaScript 中的点击事件有点困惑。这就是我这样做的方式：

```
 for (var cnt = pageno; cnt < pageno + 5; cnt++) {
                $("#newList").append('<li id="pageno" value=""' + cnt + ' onclick="GetPageno();" > ' + cnt + '</li>');
            } 
```

这是我当前的循环，将设置 5 个列表。现在，如果我想获取当前列表的值，那么我正在这样做：

```
function GetPageno() {
        //this.val();

        alert(document.getElementById('pageno').val());

    } 
```

我在网页上有 1 到 5 个数字列表。

我如何获得我点击的那个数字的价值？

前任。如果我单击“5”，则警报应该带有值“5”，与所有列表元素相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:47:55.540

通过这样做`<li id="pageno"`，您不止一次重复相同的 id，这是不正确的。

而是使用`<li id="pageno_'+cnt+'"`和使用下面的代码。

```
$(document).on('click','li[id^="pageno_"]',function(){
   alert($(this).attr('value'));
}); 
```

### [`DEMO`](http://jsfiddle.net/rb8Hm/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:44:30.187

您调用`val()`的`li`是不正确的，您可以使用 .attr("value") 如果您使用[data()](http://api.jquery.com/data/)属性（例如 data-someattributeName 使其更清晰）会更好。您将相同的 id 分配给多个不合法的元素。为它们分配一个类并将事件与类绑定，您将能够获得所需的属性。

*创建它们时将类添加到 li 元素，您没有正确分配并将空字符串分配给`cnt`值`value`*

```
for (var cnt = pageno; cnt < pageno + 5; cnt++) {
     $("#newList").append('<li id="pageno" class="pageno" value=""' + cnt + ' onclick="GetPageno();" > ' + cnt + '</li>');
} 
```

*[使用类选择器](http://api.jquery.com/class-selector/)绑定点击事件*

```
$(".pageno").click(function() {
    alert($(this).attr('value'));
}) 
```

**[现场演示](http://jsfiddle.net/aKMHD/)**，使用[data()](http://api.jquery.com/data/)和类选择器。在这里，我还分配**了unique** `Ids`给`pageno`.

```
pageno = 1;
for (var cnt = pageno; cnt < pageno + 5; cnt++) {
     $("#newList").append('<li id="pageno"'+cnt+' class="pageno" data-custom="' + cnt + '" onclick="GetPageno();" > ' + cnt + '</li>');
}

$(".pageno").click(function() {
    alert($(this).data('custom'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:45:25.843

**id 必须是唯一的**，你可以这样做：

```
for (var cnt = pageno; cnt < pageno + 5; cnt++) {
   $("#newList").append('<li class="pageno" value="'+cnt+'"> ' + cnt + '</li>');
} 
```

和：

```
$("#newList").on("click", "li.pageno", function() {
  alert( $(this).val() );
}); 
```

jsFiddle[演示](http://jsfiddle.net/ZfAbn/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T05:12:54.147

您的 value 属性有一个小错误。在 cnt 之后移动的双引号。并将 li 对象传递给函数，即 GetPageno(this)，如下所示，

```
 for (var cnt = 1; cnt <= 5; cnt++) {
     $("#newList").append('<li id="pageno" value="' + cnt + '" onclick="GetPageno(this);" > ' + cnt + '</li>');
 } 
```

然后获取方法中传入的li对象的值。

```
function GetPageno(obj) {
    alert(obj.value);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T04:44:41.277

Id 应该是唯一的，您应该使用 class 代替。然后你可以使用[jQuery.each()](http://api.jquery.com/jQuery.each/)来迭代你的类：

```
$(".pageno").each(function() {
    alert($(this).attr('value'));
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T04:45:20.843

由于以下原因，您遇到了问题：

*   `id`s 必须是唯一的，您应该使用`class`.
*   您还应该在之后附加您的事件，而不是内联（偏好）。
*   将您的元素引用为`this`并使用`.text()`not `.val()`as`value`不是`li`.

    ```
    for (var cnt = 1; cnt < 5; cnt++) {
        $("#newList").append('<li class="pageno" ' + cnt + '>' + cnt + '</li>');
    }
    $('.pageno').click(GetPageno);

    function GetPageno() {
        alert($(this).text());
    } 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T04:45:40.500

这样做：

```
for (var cnt = pageno; cnt < pageno + 5; cnt++) {
                    $("#newList").append('<li id="pageno"+cnt value=""' + cnt + ' onclick="GetPageno(this.value);" > ' + cnt + '</li>');
                }
    function GetPageno(val) {

            alert(val);

        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-03T04:48:54.420

你应该为所有人使用类名

*   而不是身份证。id 在整个 html 页面中必须是唯一的

    你可以改变你的代码

    ```
    for (var cnt = pageno; cnt < pageno + 5; cnt++) {
     $("#newList").append('<li class="pageno" value="'+cnt+'"> ' + cnt + '</li>');
    } 
    ```

    并在文档就绪范围内添加新的 jquery 函数

    ```
    $(".pageno").click(function() {
    alert($(this).attr('value')); 
    ```

    })

# php - pdf在窗口中的Safari浏览器中缓慢打开

> ID：15779015
> 
> 赞同：0
> 
> 时间：2013-04-03T04:42:33.070
> 
> 标签：php, yii

我已经在`yii framework`. 当我导出**pdf时，我可以在****chrome**、**firefox**中完美地创建 PDF ，但我遇到的问题是在 safari 中创建 PDF 需要足够的时间，特别是在窗口 7 中，但它在 Mac safari 中再次运行良好。什么会导致 Windows Safari 浏览器出现此类问题？

如果有人以前解决过这个问题，请告诉我，或者任何有想法的人都可以与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:56:09.287

如果您要从 Web 内容中导出数据，为了快速导出，您应该添加以下内容。检查您是否已经添加。

## **要么在行动：**

```
$filename  = 'test.pdf';
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Transfer-Encoding: binary"); 
```

## **或在 .htacess 文件中**

```
AddType application/octet-stream .pdf 
```

确保并告知问题出在浏览器还是流式传输内容上。

# c# - 通过动态添加页面在 Wpf 中翻页

> ID：15779017
> 
> 赞同：0
> 
> 时间：2013-04-03T04:42:50.337
> 
> 标签：c#, wpf

我想创建一个应用程序，我想在其中为每个页面提供翻转效果，我的意思是我希望我的应用程序工作并且看起来像书。当我想向应用程序添加页面时，我也想动态添加页面。假设，我在应用程序中有 20 个页面，现在从管理面板想要向应用程序添加一些页面，以便添加的页面也显示为翻转效果。
这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:23:34.440

有一个很好的例子（翻转效果）：[http ://wpfbookcontrol.codeplex.com/](http://wpfbookcontrol.codeplex.com/)

我不确定您将如何动态添加页面。你想解决什么？您想用不同的页面集打包您的应用程序吗？或者您想拥有客户端-服务器解决方案？在这两种情况下 - 不明白为什么这是不可能的。

# ios - HttpWebRequest 初始化导致 MonoTouch iOS 中的 File Not Found 异常

> ID：15779035
> 
> 赞同：-1
> 
> 时间：2013-04-03T04:44:32.827
> 
> 标签：ios, xamarin.ios, httpwebrequest, filenotfoundexception, xamarin

我目前在 Xamarin Studio IDE 中的 MonoTouch 中开发了两个项目：AC# 可移植库项目，我将使用它作为包装类，用于使用 JSON 向服务器发出请求和处理来自服务器的响应。目前，我的第二个项目是一个简单的基于 C# 控制台的应用程序，我在开发第一个项目时使用它来测试它。最终，我将删除第二个项目并为将使用我的包装类的 iOS 应用程序创建一个新项目。

但是，由于某些奇怪的原因，我一开始就被困住了。我正在关注本教程，了解如何使用 HttpWebRequest 类发出 HTTP Web 请求：http: [//docs.xamarin.com/guides/cross-platform/application_fundamentals/introduction_to_web_services#2.1.1.using-httpwebrequest](http://docs.xamarin.com/guides/cross-platform/application_fundamentals/introduction_to_web_services#2.1.1.using-httpwebrequest)

我只在我的包装类构造函数中为原型编写了演示中的第一行（嗯，第二行）代码：

```
using System;
using System.Net;

namespace MyWebApp
{
    public class MyWebAppClient
    {
        private string Password { get; set; }
        private string Username { get; set; }

        public MyWebAppClient (string Username, string Password)
        {
            this.Username = Username;
            this.Password = Password;
            var request = HttpWebRequest.Create (new Uri("http://google.com/"));
        }
    }
} 
```

还有我非常简单的文本项目：

```
using System;
using MyWebApp;

namespace MyTest
{
    class MainClass
    {

        public static void Main (string[] args)
        {
            MyWebAppClient client = new MyWebAppClient("username","password");
        }
    }
} 
```

当我运行测试项目时，出现以下异常：

```
System.IO.FileNotFoundException: Could not load file or assembly 'System, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' or one of its dependencies.
  at ASDFTest.MainClass.Main (System.String[] args) [0x00000] in /Users/William/BitBucket/ASDFiOS/ASDFiOS/ASDFTest/Program.cs:11 
```

如果我在另一个项目（创建 HttpWebRequest 对象的位置）的构造函数中删除该行，异常就会消失。

有人知道是什么原因造成的吗？我完全被难住了，而且我对 MonoTouch 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:46:09.660

经过进一步调查，似乎不完全支持使用 PCL（MyWebApp 命名空间所在的位置）（[http://forums.xamarin.com/discussion/28/challenges-thoughts-loves#latest](http://forums.xamarin.com/discussion/28/challenges-thoughts-loves#latest)）。有点遗憾，我想通过一些黑客攻击可以完成，但为了我的项目，我想现在我会将我的解决方案简化为一个项目。

# search - 在 URL 后自动添加 #gsc.tab=0

> ID：15779036
> 
> 赞同：4
> 
> 时间：2013-04-03T04:44:35.123
> 
> 标签：search, google-custom-search

如果我打开我的域，它看起来像这样

```
http://wwww.domain.com/#gsc.tab=0 
```

我知道谷歌自定义搜索会发生这种情况。但是有没有办法解决它？可能是javascript解决方案或其他东西。

好像很多网站还没有修复，你可以看看这里

```
 http://hydroharbor.com   
    http://shwesathtagan.com      
    http://techwhack.co/google-custom-search-engine-adding-gsctab0-url-43721/ 
```

如果有人可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-02-21T10:17:57.563

**问题**

我遇到了同样的问题，当前的 url 最终被更改为**#gsc.tab=0** ，就像这样

```
http://example.com#gsc.tab=0 
```

**解决方案**

1：首先确保结果浏览历史记录被禁用，见[这里](https://techjourney.net/google-custom-search-engine-appends-gsc-tab0-in-url/)

2：替换这个

```
 <gcse:search></gcse:search> 
```

有了这个

```
<gcse:search enablehistory="false"></gcse:search> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T05:13:37.453

在自定义搜索控制面板中禁用“结果浏览历史记录”的建议对我有用...

在自定义搜索控制面板中，选择：搜索功能 > 高级 > 结果浏览历史记录 [禁用]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T23:11:46.190

“#gsc.tab”问题现已修复。

[看这里](http://productforums.google.com/forum/#!topic/customsearch/1I2OATAx3xk)

# java - 套接字文件传输失败

> ID：15779038
> 
> 赞同：0
> 
> 时间：2013-04-03T04:44:37.497
> 
> 标签：java, sockets

我有一个使用 Sender 类的服务器和一个使用下面的 Downloader 类的客户端。当客户端连接到服务器时，它完美地下载了database.db和default.docx，但是当它开始读取.png文件时，它会抛出这个错误：

```
java.io.IOException: Stream closed
at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:145)
at java.io.BufferedInputStream.read(BufferedInputStream.java:308)
at java.io.DataInputStream.readFully(DataInputStream.java:178)
at java.io.DataInputStream.readLong(DataInputStream.java:399)
at data.Downloader.<init>(Downloader.java:18)
at data.Connection.<init>(Connection.java:18)
at main(Client.java:17) 
```

这是我仅有的两种方法：

下载器：

```
public Downloader(Socket socket) {
    try {
        BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());
        DataInputStream dis = new DataInputStream(bis);
        int filesCount = dis.readInt();
        for (int i = 0; i < filesCount; i++) {
            long size = dis.readLong();
            String fileName = dis.readUTF();
            System.out.println(fileName);
            if (fileName.equals("database.db")) {
                List<String> data = new ArrayList<String>();
                BufferedReader reader = new BufferedReader(new InputStreamReader(bis));
                String line;
                while ((line = reader.readLine()) != null) {
                    if (line.trim().length() > 0) {
                        data.add(line);
                    }
                }
                reader.close();
                parse(data);
            } else if (fileName.equals("default.docx")) {
                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                for (int x = 0; x < size; x++) {
                    bos.write(bis.read());
                }
                bos.close();
                document = bos.toByteArray();
            } else if (fileName.contains(".png")) {
                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                for (int x = 0; x < size; x++) {
                    bos.write(bis.read());
                }
                bos.close();
                Signatures.signatures.add(bos.toByteArray());
            } 
        }
        dis.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

发件人：

```
public Sender(Socket socket) {
    List<File> files = new ArrayList<File>();
    files.add(new File(Directory.getDataPath("default.docx")));
    files.add(new File(Directory.getDataPath("database.db")));
    for (String signature : Directory.getSignaturePaths()) {
        files.add(new File(signature));
    }
    try {
        BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream());
        DataOutputStream dos = new DataOutputStream(bos);
        dos.writeInt(files.size());
        for (File file : files) {
            System.out.println(file.getName() + file.length());
            dos.writeLong(file.length());
            dos.writeUTF(file.getName());
            FileInputStream fis = new FileInputStream(file);
            BufferedInputStream bis = new BufferedInputStream(fis);
            int theByte = 0;
            while ((theByte = bis.read()) != -1) { 
                bos.write(theByte);
            }
            bis.close();
        }
        dos.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

此外，我检查了 getSignaturePaths() 方法，它返回正确的路径，并且 .png 文件在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:04:53.847

您关闭了流，然后继续使用套接字。关闭套接字的输入流或输出流会关闭另一个流和套接字。

# monkeytalk - 使用monkey talk发送测试用例的状态报告

> ID：15779039
> 
> 赞同：0
> 
> 时间：2013-04-03T04:44:41.090
> 
> 标签：monkeytalk

如何使用 Monkey Talk 自动化工具向开发人员报告错误或测试用例状态（PASS/FAIL）以进行 ios/android 应用程序测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:55:48.083

将monkeytalk与jenkins等持续集成工具[一起使用](http://jenkins-ci.org/)

# excel - excel中的公式

> ID：15779041
> 
> 赞同：0
> 
> 时间：2013-04-03T04:44:50.107
> 
> 标签：excel, excel-formula, excel-2003

我有一个包含数千条记录的 excelsheet。在一个特定的列（Coulmn F）中，我必须使用一个包含 A、B、C、DI 列值的公式，并附上了截图。如何使用公式。我的要求在 F 列中，它将显示 A、B、C、D 列中的值，如下所示：- Exec ChangeStatus('A2',B2,C2,D2);。我需要列 B 和 c 作为日期时间，格式为 dd/mm/yyyy HH24:MI:SS。:-![在此处输入图像描述](https://i.stack.imgur.com/975ja.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:10:25.793

会不会是你在找这个？

```
="Exec ChangeStatus("&A2&","&TEXT(B2, "dd/mm/yyyy HH:mm:ss")&","&TEXT(C2, "dd/mm/yyyy HH:mm:ss")&","&D2&")" 
```

# ruby-on-rails - Gem 已安装，但 bundle show 找不到

> ID：15779043
> 
> 赞同：-1
> 
> 时间：2013-04-03T04:44:52.060
> 
> 标签：ruby-on-rails, ruby, gem, rvm

我无法让 pg gem 与我的 rails 应用程序一起使用。

当我执行 sudo bundle install 时，我得到：

```
Using rake (10.0.4)
Using i18n (0.6.4)
Using multi_json (1.7.2)
Using activesupport (3.2.8)
Using builder (3.0.4)
Using activemodel (3.2.8)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.5)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.6)
Using sprockets (2.1.3)
Using actionpack (3.2.8)
Using mime-types (1.22)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.4.4)
Using actionmailer (3.2.8)
Using arel (3.0.2)
Using tzinfo (0.3.37)
Using activerecord (3.2.8)
Using activeresource (3.2.8)
Using coffee-script-source (1.6.2)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.3)
Using json (1.7.7)
Using rdoc (3.12.2)
Using thor (0.18.1)
Using railties (3.2.8)
Using coffee-rails (3.2.2)
Using jquery-rails (2.2.1)
Using pg (0.15.0)
Using bundler (1.1.5)
Using rails (3.2.8)
Using sass (3.2.7)
Using sass-rails (3.2.6)
Using uglifier (1.3.0) 
```

但是，当我为任何宝石做“捆绑表演”时，我得到：

```
Could not find pg-0.15.0 in any of the sources 
```

此外，当我执行任何 rake 命令时，我得到：

```
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find pg-0.15.0 in any of the sources (Bundler::GemNotFound)
        from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `map!'
        from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `materialize'
        from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/definition.rb:127:in `specs'
        from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/environment.rb:27:in `specs'
        from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.6/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
        from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.6/lib/rubygems-bundler/noexec.rb:60:in `setup'
        from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.6/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:9:in `<main>' 
```

我怀疑它与 RVM 以及自从我最近更改为 1.9.3 以来我使用的 Ruby 版本有关。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:29:51.093

尝试`bundle install`不使用`sudo`.

# java - GATE ML 信息提取过程无法生成正确的类级别

> ID：15779047
> 
> 赞同：0
> 
> 时间：2013-04-03T04:45:08.090
> 
> 标签：java, nlp, bigdata, gate

我正在尝试学习机器学习。在信息提取的情况下，保存文件会正确填充数据。但是**NLPFeaturesData.save文件****中的类级别数**为 0并且日志听起来也像

 ****93 #numTrainingDocs
0 #numClasses
53738 #numNullLabelInstances
9006940 #totalFeatures
C:\...\learnedModels.save #modelFile
SVMLibSvmJava #learnerName
null #learnerExecutable
-c 0.7 -t 0 -m 100 -tau 0.4 #learnerParams**

我已经运行了以下代码库。但是生成的“NLPFeatureData.save”文件的所有类级别都是0。有人可以帮我在机器学习中出错的地方。

```
try{
// *****************  load Gate & it's plugin [ Load learning] ***********************************
System.setProperty("gate.home", "C:\\Program Files\\GATE_Developer_7.1"); 
 Gate.init();
 Gate.getCreoleRegister().registerDirectories(new File(Gate.getPluginsHome(), ANNIEConstants.PLUGIN_DIR).toURI().toURL());
 Gate.getCreoleRegister().registerDirectories(new URL(FILE_WORK_PATH+"/plugins/Learning"));

// ****************** Instantiate corpus and load training documents *****************************  
    gate.Corpus corpus = (Corpus) Factory.createResource("gate.corpora.CorpusImpl");
    FileFilter fileFilter = new FileFilter() {
public boolean accept(File pathname) {
// TODO Auto-generated method stub
return true;
}
};
corpus.populate(new URL(".../corpus"),fileFilter,"UTF-8",false);
Gate.getCreoleRegister().registerDirectories();
//Make a pipeline and add the corpus 
FeatureMap pfm = Factory.newFeatureMap(); 
pfm.put("corpus", corpus); 
pipeline = (gate.creole.SerialAnalyserController)gate.Factory.createResource("gate.creole.SerialAnalyserController", pfm); 
 initAnnie();

//*********************************  Configure with relations config file and learning api 
File configFile = new File("../learning-config.xml"); //Wherever it is 
RunMode mode = RunMode.TRAINING; //or TRAINING, or APPLICATION .. 
FeatureMap fm = Factory.newFeatureMap(); 
fm.put("configFileURL", configFile.toURI().toURL()); 
fm.put("learningMode", mode); 
gate.learning.LearningAPIMain learner = (gate.learning.LearningAPIMain)gate.Factory.createResource("gate.learning.LearningAPIMain", fm);
pipeline.add(learner); 
pipeline.execute();
}catch(Exception e){
e.printStackTrace();
}
}
private static void initAnnie() throws GateException {
       for(int i = 0; i < ANNIEConstants.PR_NAMES.length; i++) {
         FeatureMap params = Factory.newFeatureMap(); // use default parameters
         ProcessingResource pr = (ProcessingResource)
           Factory.createResource(ANNIEConstants.PR_NAMES[i], params);
         pipeline.add(pr);
       }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:52:59.777

最后我解决了这个问题。我添加了以下带有**gate.learning.LearningAPIMain**实例的**AnnotationSet 。**

 **learner.setInputASName("Key"); learner.setOutputASName("Key");

现在我保存的文件正在以正确的格式生成。****

# java - MediaPlayer 构造函数 IllegalStateException 中的 javafx 错误

> ID：15779050
> 
> 赞同：1
> 
> 时间：2013-04-03T04:45:19.777
> 
> 标签：java, media-player, javafx, illegalstateexception

我有一个从这个站点（由[senderle](https://stackoverflow.com/users/577088/senderle)提供）获得的非常简单的代码来播放 mp3 文件（我是新手`javafx`）

```
import javafx.scene.media.*;
public class Start
{
    public static void main(String[] args)
    {
        String bip = "file:/Sounds/sound.mp3";
        Media hit = new Media(bip);
        MediaPlayer mediaPlayer = new MediaPlayer(hit); // This is line 8 from the Exception
        mediaPlayer.play();
    }
} 
```

当我运行此代码时，出现以下异常：

```
Exception in thread "main" java.lang.IllegalStateException: Toolkit not initialized
    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:155)
    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:150)
    at javafx.application.Platform.runLater(Platform.java:52)
    at javafx.scene.media.MediaPlayer.init(MediaPlayer.java:450)
    at javafx.scene.media.MediaPlayer.<init>(MediaPlayer.java:365)
    at Start.main(Start.java:8) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:25:45.860

在以下方式之一中使用您的媒体：

1.  JavaFX[应用程序](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html)
2.  摇摆[JFXPanel](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)
3.  一个 SWT [FXCanvas](http://docs.oracle.com/javafx/2/api/javafx/embed/swt/FXCanvas.html)

上述任何选项都将确保在您开始使用依赖它的组件之前适当地初始化 JavaFX 工具包。

# nhibernate - 如何创建多个实体到另一个实体之间的NHibernate关系映射（即继承映射）

> ID：15779062
> 
> 赞同：1
> 
> 时间：2013-04-03T04:46:32.317
> 
> 标签：nhibernate, inheritance, orm, nhibernate-mapping

我在 Car、Bike、Skateboard 对象与 Person 对象之间存在这种关系。该关系存储在 Ownership 表中。

![汽车，自行车，滑板地图到人](https://i.stack.imgur.com/F1pGl.png)

如何在 NHibernate 中创建此映射？我正在尝试遵循本教程： http: [//nhibernate.info/doc/nh/en/index.html#inheritance](http://nhibernate.info/doc/nh/en/index.html#inheritance)。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T16:27:11.917

这是我可能会这样做的方式。

```
<class lazy="false"  name="Domain.OwnerShip, Domain" table="OwnerShip_Table">
  <id name="Id" column="OwnerShipId" type="System.Int32" access="property">
    <generator class="identity"></generator>
  </id>
  <joined-subclass name="Car" table="Cars" lazy="false">
    <key column="Id" />
    <property name="Owner" />
  </joined-subclass>
  <joined-subclass name="Bike" table="Bikes" lazy="false">
    <key column="Id" />
    <property name="Owner" />
  </joined-subclass>
  <joined-subclass name="Skateboard" table="Skateboards" lazy="false">
    <key column="Id" />
    <property name="Owner" />
  </joined-subclass>
</class> 
```

您可能需要一个 Persons 表以及一个 Person Entity，其映射中 Person 有一个 Bag of OwnedVehicles。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:10:10.830

这是一个选项，每个层次结构都有一个表。我假设 ：

*   所有权拥有自己的 Id ( `OwnerShipId`, 自动生成)
*   每个引用的类/表 ( `BikeId, CarId`) 有一列，用于处理不同的键类型和外键

然后映射看起来像：

```
<class lazy="false"  name="Domain.OwnerShip, Domain" table="OwnerShip_Table" discriminator-value="0">
<id name="Id" column="OwnerShipId" type="System.Int32" access="property">
    <generator class="identity"></generator>
</id>
    <discriminator column="VehicleTypeCode" type="int"/>
    <many-to-one name="Owner" column="PersonId" not-null="true" fetch="..."/>
    <many-to-one name="CodeType" column="VehicleTypeCode" not-null="true" fetch="..." />
<subclass name="Domain.BikeOwnerShip, Domain" discriminator-value="1">
        <many-to-one name="Bike" column="BikeId" not-null="true" fetch="..."/>
   </subclass>
<subclass name="Domain.CarOwnerShip, Domain" discriminator-value="2">
        <many-to-one name="Car" column="CarId" not-null="true" fetch="..."/>
   </subclass>
</class> 
```

`OwnedObject`我想在基类中有一个虚拟的而不是映射的属性也会很好，比如

```
public virtual Object OwnedObject{ 
                                 get{return null;}
} 
```

在`CarOwnership`类中，OwnedObject 实现将是

```
public override Object OwnedObject{ 
                                 get{return this.Car;}
} 
```

希望这会有所帮助

# c++ - 使用 libxml 和 c++ 创建我的 xml 时出现有关 UTF_8 格式的错误

> ID：15779063
> 
> 赞同：1
> 
> 时间：2013-04-03T04:46:32.313
> 
> 标签：c++, xml, dom, libxml2

我使用 libxml 和 c++ 创建了一个 xml 文件。我现在想做的是从 .txt 中读取并将此文本放在一些特定标签之间。

我尝试了以下代码，只是从文件中读取并在标签之间写入：

```
char * s ;
double d;

fichier>>i>>s>>d;

// fichier.close();                                                                                                                

cout << s << endl ;

 xmlNewChild(root_node, NULL, BAD_CAST "metadata",
             BAD_CAST   s ); 
```

运行此代码时，我收到此错误：

```
output error : string is not in UTF-8 
```

所以我猜测输入和输出之间存在格式不兼容。你能帮我吗？我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:19:25.400

您需要使用编码模块中定义的函数之一将输入字符串转换为 UTF-8 输入。（或使用您喜欢的任何其他编码库，如 icu）您可以在此处找到有关编码模块的详细信息[http://www.xmlsoft.org/html/libxml-encoding.html](http://www.xmlsoft.org/html/libxml-encoding.html)

我的猜测是您想保留字节，以便您需要的是类似的东西（非常未经测试，纯粹来自文档。）

```
//Get the encoding
xmlCharEncodingHandlerPtr encoder = xmlGetCharEncodingHandler(XML_CHAR_ENCODING_ASCII);

// Each ascii byte should take up at most 2 utf-8 bytes IIRC so allocate enough space.
char* buffer_utf8 = new char[length_of_s*2];

//Do the encoding
int consumed = length_of_s;
int encoded_length=length_of_s*2;

int len = (*encoder.input)(buffer_utf8, &encoded,s,&consumed);
if( len<0 ) { .. error .. }
buffer_utf8[len]=0; // I'm not sure if this is automatically appended or not.

//Now you can use buffer_utf8 rather than s. 
```

如果您的输入采用 libxml 支持的不同编码，则只需更改`XML_CHAR_ENCODING_ASCII`为正确的常量即可，尽管您可能还需要更改 in 中分配的字节数`buffer_utf8`。

# directory - 使用 xarg 或脚本一次复制 100 多个文件？

> ID：15779067
> 
> 赞同：0
> 
> 时间：2013-04-03T04:46:41.773
> 
> 标签：directory, find, sleep, xargs, mv

我在一个目录中有超过 130 万个文件，我需要将它们从一个移动`j:/hold`到`j:/hold2`另一个（同时一个 java 应用程序“监视”该目录是否有任何文件放入并处理它们）我不能只是“重命名”该目录，因为应用程序崩溃了因为该文件夹包含太多文件。我想一次将 100 多个文件复制到`j:/hold2`30秒内`xargs`。`sleep`

我只想将一定数量的文件移动到“hold2”目录中，以便我的 java 应用程序可以及时处理它们，而不会被数十万个文件所淹没。尝试编写脚本会更好吗？我不知道该怎么做:(

如果我已经在正确的目录中，以下命令会起作用吗？

```
find . -type f -print0 | xargs -0 -l100 mv -t /mnt/hold2 -P 30 sleep 
```

# objective-c - 如何识别点击了tableview中的哪个单元格

> ID：15779070
> 
> 赞同：2
> 
> 时间：2013-04-03T04:46:58.273
> 
> 标签：objective-c, uitableview, uiscrollview

我创建`tableview`了从`url`（任何单元格都有书名）读取的内容，然后单击任何`cell`消失的内容`detailView`。

存在详细视图，可以从中`UIScroll`读取任何内容并创建它。`image``url`

但我的问题是这个地方。我不知道`UIScroll`任何相关的阅读图像`cell`。

这是网址：“.../mamal/book.php？**p=%d** & **b=%d** ”

（p和b显示号码页和号码簿）

我想在单击第一个单元格（book1）时编译器转到下一页并显示与 book1 等相关的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:55:23.243

您必须在 .h 文件中使用`UITableView`协议`<UITableViewDataSource,UITableViewDelegate>` ，然后使用下面的委托方法，您可以点击哪个单元格

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Clicked cell-> %d", indexPath.row);   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:00:13.217

您还可以使用属性标识当前选定的行`indexPathForSelectedRow`。

即，如果您想在任何时间点知道当前选定行的索引路径而不使用委托方法（在选择期间不保存），您可以使用

```
tableView.indexPathForSelectedRow 
```

如果你想在多个视图控制器之间传递值，你可以在视图控制器中声明一个实例变量，你希望`tableView.indexPathForSelectedRow`在初始化期间传递值并存储在这个变量中。快速搜索so应该可以帮助您。

# asp.net-mvc - 模型绑定后模型嵌套类型为空

> ID：15779072
> 
> 赞同：4
> 
> 时间：2013-04-03T04:47:04.180
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-binding

我有一个 ViewModel 如下：

```
public class CheckoutViewModel
{
    public string ProductNumber { get; set; }
    public string Name { get; set; }
    public int Price { get; set; }
    public Input UserInput;

    public class Input
    {
        public string Email { get; set; }
        public string Phone { get; set; }
    }
} 
```

像这样的动作：

```
[HttpPost]
public ActionResult Index(CheckoutViewModel model)
{
    // ...
    return View();
} 
```

我的模型绑定如下：

```
@model GameUp.WebUI.ViewModels.CheckoutViewModel

@using (Html.BeginForm("Index", "Checkout", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <!-- some HTML -->

    @Html.LabelFor(m => m.UserInput.Email)
    @Html.TextBoxFor(m => m.UserInput.Email)

    @Html.LabelFor(model => model.UserInput.Phone)
    @Html.TextBoxFor(model => model.UserInput.Phone)

    <button>Submit</button>
} 
```

当我提交表单时，UserInput 为空。我知道 ASP.NET MVC 能够绑定嵌套类型，但在这段代码中不能。我也可以通过以下方式获取电子邮件和电话值：

```
var email = Request.Form["UserInput.Email"];
var phone = Request.Form["UserInput.Phone"]; 
```

也许我做错了什么！这是一个简单的模型绑定，您可以在网络上随处找到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T05:39:29.420

你忘了在你的 中放一个二传手`UserInput`，我不认为二传手是自动的。无论如何，您只需在您的控制器方法中放置一个 getter/setter 即可使其工作，`UserInput`而无需在控制器方法中执行额外操作：

```
public Input UserInput { get; set; } 
```

您的完整模型：

```
public class CheckoutViewModel
{
    public string ProductNumber { get; set; }
    public string Name { get; set; }
    public int Price { get; set; }
    public Input UserInput { get; set; }

    public class Input
    {
        public string Email { get; set; }
        public string Phone { get; set; }
    }
} 
```

# javascript - How to make winJS app scrollable?

> ID：15779074
> 
> 赞同：4
> 
> 时间：2013-04-03T04:47:21.677
> 
> 标签：javascript, html, css, windows-8, winjs

I am new to developing Windows 8 store apps, and I am in the process of creating my first one.

The app I am making is a note taking app. I only started the app yesterday, so it's still very basic, but I am having a problem with the scrolling. Here is a screen shot displaying the problem:

![enter image description here](https://i.stack.imgur.com/9wijS.png)

As you can see, when a certain number of notes are entered, they start overlapping the screen. What I need to do is make it so that when the notes a certain amount of pixels from the side of the display, it makes it scroll-able.

The divs that the notes are contained in are created as the note is written. The notes also auto change size depending on the amount of text entered.

Does anyone know how I would make it so that they scroll to the left and right instead of overlapping?

EDIT: Here is the CSS:

```
body {

      overflow-x:auto;

}

#textInput {
    padding:20px;
    float:left;
    margin-top: 20px;
    margin-left: 20px;

    position:fixed;

}
#noteInput {
    display:block;
    border-width:5px;
    border-color:purple;
    box-shadow: 5px 5px 5px;

}

#titleInput {
    border-width:5px;
    border-color:purple;
    width:285px;
    box-shadow: 5px 5px 5px;

}

#noteSubmit {
    width:295px;
}

#headers {
    margin-left:100px;
    margin-top:80px;

}

#hr {
    margin-right: 40px;
    margin-left: 40px;
}

#noteContainer {
    float:left;
    margin-right:5px;
    margin-top:5px;
    margin-bottom:5px;
    margin-left:400px;

} 
```

I haven't really bothered with the UI and design much yet, as I want to get all the background stuff like javascript, jquery, and azure working first.

I am only doing this app as a project for practice, for the 70-481 and 70-482 exams I have in two months, so its never going to be in the store or anything. Thanks for your help

Cheers Corey

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:07:43.397

I agree with @ma_il, but if you do want to add scrolling functionality to custom elements, you simple wrap those elements in a div and add some CSS properties to that div...

overflow-x: auto; /* to scroll horizontally */ overflow-y: auto; /* to scroll vertically */ overflow: auto; /* to scroll in both directions */

If the contents of that div are wider (or taller or both) than the screen then your screen will automatically become scrolling and touch will be supported.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:39:35.213

我强烈建议使用 WinJS.UI.ListView 控件而不是自己编写 div 元素。

这样，您不仅可以获得与用户对 Windows 8 现代 UI 应用程序的期望一致的应用程序外观和感觉，而且还可以为您处理 DOM 元素的滚动和管理。

请参阅[本教程](http://msdn.microsoft.com/en-us/library/windows/apps/hh465496.aspx)，了解如何创建和设置 ListView 控件的样式。

# java - Adding suboptions using optparse in Jython

> ID：15779077
> 
> 赞同：0
> 
> 时间：2013-04-03T04:47:38.707
> 
> 标签：java, python, jython, optparse

I am using optparse to add options to Jython script. They are like

```
$script.py -clear
$script.py -start
$script.py -stop 
```

so on, now my question is how do I add suboptions to any certain option,, like

```
$script.py -start -name <name> -type <type>, 
```

because there can be many options and I cannot validate or provide help by capturing all options at single level. And I found for some scripts there is options like

```
$script.py -start --help 
```

-> this will give only options that can be given to parent '`start`' option. So please help me how do I achieve this

Thanks, Chakri

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T15:05:07.130

这正是 OptionParser 旨在处理的内容！

考虑以下代码：

```
import sys
import os

from optparse import OptionParser

__all__ = []
__version__ = 0.1
__date__ = '2014-01-21'
__updated__ = '2014-01-21'

def main(argv=None):
    '''Command line options.'''

    program_name = os.path.basename(sys.argv[0])
    program_version = "v0.1"
    program_build_date = "%s" % __updated__

    program_version_string = '%%prog %s (%s)' % (program_version, program_build_date)

    program_longdesc = '''This will be displayed beneath your help information''' # optional - give further explanation about what the program does
    program_license = "Copyright 2014 Code Tester (Jython Dev Inc.)                                            \
                Licensed under the Apache License 2.0\nhttp://www.apache.org/licenses/LICENSE-2.0"

    if argv is None:
        argv = sys.argv[1:]
    try:
        # setup option parser
        parser = OptionParser(version=program_version_string, epilog=program_longdesc, description=program_license)
        parser.add_option("-i", "--in", dest="infile", help="set input path [default: %default]", metavar="FILE")
        parser.add_option("-o", "--out", dest="outfile", help="set output path [default: %default]", metavar="FILE")
        parser.add_option("-d", "--debug", dest="modeDebug", action="store_true", help="Prints additional debug information")
        parser.add_option("-m", "--map", dest="listKVPs", action="append", help="Key value pair mappings (i.e. left=right)", metavar="KVP")
        parser.add_option("-r", "--role", dest="listProtectedRoles", action="append", help="Protected system roles to use (multiple allowed)", metavar="Role")
        parser.add_option("-u", "--user", dest="listProtectedUsers", action="append", help="Protected system users to be used (multiple allowed)", metavar="User")

        # set defaults
        parser.set_defaults(outfile="./out.txt", infile="./in.txt")

        # process options
        (opts, args) = parser.parse_args(argv)

        if opts.modeDebug:
            print("Running in DEBUG mode")
        if opts.infile:
            print("infile = %s" % opts.infile)
        if opts.outfile:
            print("outfile = %s" % opts.outfile)
        if opts.listKVPs:
            print("KVP's = %s" % opts.listKVPs)
        if opts.listProtectedRoles:
            print("Protected Roles = %s" % opts.listProtectedRoles)
        if opts.listProtectedUsers:
            print("Protected Users = %s" % opts.listProtectedUsers)

        '''
        Do something interesting with the parameters here!
        '''

    except Exception, e:
        indent = len(program_name) * " "
        sys.stderr.write(program_name + ": " + repr(e) + "\n")
        sys.stderr.write(indent + "  for help use --help")
        return 2

if __name__ == "__main__":
    sys.exit(main()) 
```

如果您使用 -h（或 --help）运行它，您将获得以下信息：

```
Usage: OptParseExample.py [options]

Copyright 2014 Code Tester (Jython Dev Inc.)
Licensed under the Apache License 2.0
http://www.apache.org/licenses/LICENSE-2.0

Options:
  --version             show program's version number and exit
  -h, --help            show this help message and exit
  -i FILE, --in=FILE    set input path [default: ./in.txt]
  -o FILE, --out=FILE   set output path [default: ./out.txt]
  -d, --debug           Prints additional debug information
  -m KVP, --map=KVP     Key value pair mappings (i.e. left=right)
  -r Role, --role=Role  Protected system roles to use (multiple allowed)
  -u User, --user=User  Protected system users to be used (multiple allowed)

This will be displayed beneath your help information 
```

现在，如果我们使用更多参数运行它，即：

```
testScript.py -d -i input.txt -o output.txt -m jython=cool -r Admins -r DomainAdmins 
```

我们得到显示的输出：

```
Running in DEBUG mode
infile = input.txt
outfile = output.txt
KVP's = ['jython=cool']
Protected Roles = ['Admins', 'DomainAdmins'] 
```

注意几点：

*   命令行上参数的顺序并不重要（只要参数提供了相关的标志）
*   在这种情况下，-d 选项用作“store_true”参数，表示它是一个布尔标志
*   其他参数都取附加值
*   如果带值的参数可以接受多个值，则可以将其声明为列表（使用附加操作）
*   处理完所有参数后，您仍然可以通过“args”变量获得任何其他命令行参数。

有关更多信息，请查看[http://jython.org/docs/library/optparse.html](http://jython.org/docs/library/optparse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:42:09.857

我最近遇到了同样的问题。对我有用的解决方案如下：

*   按照惯例，使用第一个*参数*来表示您要执行的*命令*`start`（这将是您的, `clear`, `stop`）

*   通过获取此命令`sys.argv[1]`（我知道这是一个丑陋的解决方法）

*   创建多个`optparse.OptionParser()`（每个命令一个）

*   仅调用`parse_args()`适当的方法`OptionParser`

*   如果命令无效或丢失，请创建另一个选项解析器以显示用法

这是一个示例代码：

```
# parse.py

import sys
import optparse

def parse_my_command_line():

    opt_parser = {}
    opt_parser['start'] = optparse.OptionParser()
    opt_parser['clear'] = optparse.OptionParser()
    opt_parser['stop']  = optparse.OptionParser()

    # Start
    opt_parser['start'].usage = 'Help for the START command'
    opt_parser['start'].add_option('--name', default = None, type = 'str',
        help = 'help for --name option', metavar = '<name>')
    opt_parser['start'].add_option('--type', default = None, type = 'str',
        help = 'help for --type option', metavar = '<type>')

    # Clear
    opt_parser['clear'].usage = 'Help for the CLEAR command'
    opt_parser['clear'].add_option('--foo', default = None, type = 'str',
        help = 'help for --foo option', metavar = '<foo>')

    # Stop
    opt_parser['stop'].usage = 'Help for the STOP command'
    opt_parser['stop'].add_option('--name', default = None, type = 'str',
        help = 'help for --name option', metavar = '<name>')
    opt_parser['stop'].add_option('--type', default = None, type = 'str',
        help = 'help for --type option', metavar = '<type>')

    # Get the command from sys.argv
    try:
        command = sys.argv[1]
    except IndexError:
        command = None

    # Get the appropriate option parser
    try:
        parser = opt_parser[command]
        # Done. Parse arguments and return.
        return parser.parse_args()
    except KeyError:
        # Invalid command. Create a parser to show default usage
        parser       = optparse.OptionParser()
        parser.usage  = '%prog [command] [options]\n\n'
        parser.usage += 'Description:\n'
        parser.usage += '  General help for %prog\n\n'
        parser.usage += 'Commands:\n'
        for cmd in ['start', 'clear', 'stop']:
            parser.usage += '  %s\n' % cmd
            parser.usage += '    %s\n\n' % opt_parser[cmd].usage
        parser.usage = parser.usage.strip()
        if command is None:
            parser.error('command cannot be empty')
        else:
            parser.error('invalid command: %s' % command)

def main():
    options, args = parse_my_command_line()
    print 'Args    = %s' % args
    print 'Options = %s' % options

if __name__ == '__main__':
    main() 
```

这里有一些结果：

```
[usr@localhost ~]$ python parse.py
Usage: parse.py [command] [options]

Description:
  General help for parse.py

Commands:
  start
    Help for the START command

  clear
    Help for the CLEAR command

  stop
    Help for the STOP command

parse.py: error: command cannot be empty

[usr@localhost ~]$ python parse.py start
Args    = ['start']
Options = {'type': None, 'name': None}

[usr@localhost ~]$ python parse.py stop
Args    = ['stop']
Options = {'type': None, 'name': None}

[usr@localhost ~]$ python parse.py clear
Args    = ['clear']
Options = {'foo': None}

[usr@localhost ~]$ python parse.py start --help
Usage: Help for the START command

Options:
  -h, --help     show this help message and exit
  --name=<name>  help for --name option
  --type=<type>  help for --type option
[usr@localhost ~]$ python parse.py stop -- help
Args    = ['stop', 'help']
Options = {'type': None, 'name': None}

[usr@localhost ~]$ python parse.py clear --help
Usage: Help for the CLEAR command

Options:
  -h, --help   show this help message and exit
  --foo=<foo>  help for --foo option 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:57:49.057

没有办法添加“子”选项。通常，帮助选项由类似的东西完成`$script.py --help start`- 其中 start 只是您读取并显示适当信息的字符串选项。

# javascript - Chrome 中的单个应用程序

> ID：15779080
> 
> 赞同：3
> 
> 时间：2013-04-03T04:48:04.653
> 
> 标签：javascript, google-chrome, web

有谁知道一种方法来检测只有一个 Web 应用程序的单个实例在 Chrome 中运行？我目前正在使用使用 localStorage 的标志，但是当浏览器崩溃之类的东西时，该标志仍​​然存在，所以下次我尝试访问该应用程序时它会给我一个错误，因为它认为另一个实例已经在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:16:48.190

一些想法：

1.  用新实例覆盖旧实例。

    在应用程序初始化时，创建一个新的“应用程序 id”，将其覆盖到 localStorage（无论它是否存在）；

    在应用程序生命周期内，不时检查此标志。如果它被更改为另一个值，这意味着这个实例应该被“覆盖”，所以退出。

2.  使用时间戳作为标志。

    在app生命周期内，以固定的时间间隔（如1s、10s等）将当前时间戳更新到flag中；

    在应用程序初始时，将当前时间戳与此标志进行比较：

    *   如果它“足够短”，您可以假设应用程序当前正在运行，并拒绝继续；

    *   如果它“足够长”，则意味着最后一个实例意外退出，您可以“安全地”运行这个新实例，并可能提供一些有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:01:30.010

根据我对 Session Cookies 的评论，据我所知，Chrome 为所有选项卡（每个进程）维护相同的会话，因此它可能是您的理想解决方案，特别是因为您希望/需要在 Chrome 关闭后清除会话向下。

以下是其他一些具有相反问题的相关 Stack Overflow 线程：

[为什么关闭选项卡不会关闭会话 Cookie？](https://stackoverflow.com/questions/805895/how-come-closing-a-tab-doesnt-close-a-session-cookie)

[如何在浏览器选项卡中区分会话？](https://stackoverflow.com/questions/368653/how-to-differ-sessions-in-browser-tabs)

您仍然可以将持久值（跨会话值）保存在常规 cookie/本地存储中。

# openstack - 使用远程绑定服务器配置 OpenStack nova

> ID：15779082
> 
> 赞同：0
> 
> 时间：2013-04-03T04:48:16.920
> 
> 标签：openstack, openstack-nova

我们如何配置 OpenStack 以使用和动态更新远程绑定 DNS 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:21:13.377

OpenStack 内部依赖 dnsmasq。

我不知道以任何方式集成外部绑定服务器。或者计划这样做。甚至是这样做的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:29:47.963

目前不支持此功能。有一个 DNS 驱动层，但目前唯一的驱动是 LDAP 支持的 PowerDNS。我有用于动态 DNS 更新的代码 ( [https://review.openstack.org/#/c/25194/](https://review.openstack.org/#/c/25194/) )，但是由于我们需要先修复 eventlet 猴子补丁，所以无法将其登陆。

所以，它正在进行中，但在 Havana 发布之前你可能不会看到它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-28T09:12:16.623

查看指定（[https://docs.openstack.org/developer/designate/](https://docs.openstack.org/developer/designate/)）

这可能是您正在寻找的：

```
Designate provides DNSaaS services for OpenStack:

- REST API for domain & record management
- Multi-tenant support
- Integrated with Keystone for authentication
- Framework in place to integrate with Nova and Neutron notifications (for auto-generated records)
- Support for PowerDNS and Bind9 out of the box 
```

[![在此处输入图像描述](https://i.stack.imgur.com/uIhgW.png)](https://i.stack.imgur.com/uIhgW.png)

# postgresql - 如何在 postgresql 中转义某些字符

> ID：15779083
> 
> 赞同：1
> 
> 时间：2013-04-03T04:48:20.977
> 
> 标签：postgresql

我在 postgresql 的一列中有这些数据

```
{
    "geometry":{
        "status":"Point",
        "coordinates":[
            -122.421583,
            37.795027    
        ]          
    }, 
```

我用他的查询

`select * from students where data_json LIKE '%status%' ;`

上面的查询返回结果，但这个没有

`select * from students where data_json LIKE '%status:%' ;`

如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:52:37.953

当然，第二个找不到匹配项，`status:`值中没有文本。我想你想要：

```
select * from students where data_json LIKE '%"status":%' 
```

...但是，与您尝试对结构化数据进行文本模式匹配的大多数情况一样，这通常是一个*糟糕*的想法，会咬到您。只是几个问题示例：

```
{
    "somekey": "the value is \"status\": true"
} 
```

... where`"status":`作为*文本值*的一部分出现并且即使不应该匹配也会匹配，并且：

```
{
    status : "blah"
} 
```

where`status`没有引号，引号和冒号之间有空格。就 JavaScript 而言，这与 相同，`"status":`但不匹配。

如果您尝试在 json 中查找字段或从 json 中提取字段，请使用 json 解析器。[PL/V8 可能感兴趣](https://code.google.com/p/plv8js/wiki/PLV8)，或者 json 库可用于 pl/perl、pl/pythonu 等工具。未来的 PostgreSQL 版本将具有通过路径获取 json 键、测试 json 值是否存在等功能，但是9.2 没有。

此时您可能会想“我为什么不使用正则表达式”。不要去那里，您*不想*尝试在正则表达式中编写完整的 JSON 解析器。[这个博客条目有点相关](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)。

# html - how to get two fields side by side in html forms using divs

> ID：15779088
> 
> 赞同：0
> 
> 时间：2013-04-03T04:49:08.633
> 
> 标签：html, css

i tried creating form with fields side by side using divs .But they are diplayed one after another in rows. here i am getting batchcode and coursecode intwo rows .How to get them in a single row side by side.

```
<!DOCTYPE html>
<html>  
    <head>

        <link href="css/reset.css" media="screen" rel="stylesheet"/>
        <link href="css/redmond/jquery-ui-1.10.2.custom.min.css" media="screen" rel="stylesheet"/>
        <link href="css/default.css" media="screen" rel="stylesheet"/>
        <link href="sidebarmenu.css" rel="stylesheet" type="text/css">
                <script src="sidebarmenu.js"></script>
                <script src="scripts/jquery-1.9.1.min.js"></script> 
        <script src="scripts/jquery-ui-1.10.2.custom.min.js"></script> 

</head>
    <body>  

        <!--<form id="frmExamRegistration" method="post" enctype="multipart/form-data" class="anu">-->

    <form name="f1" method="post" class="anu">  
    <%@include file="header.html"%>

<div  style="float:right;width:10%;border:0;font-color:#163362"><a href=logout.jsp">Log Out</a></div>
<%@include file="sidemenus.jsp" %>

    <div id="container">
        <div class="content"  ><center>Delete Batch</center><br>
            <div class="formElements">
                <label>Batch code:</label>
                 <span><input type="text" id="txtBatchcode" name="txtBatchcode" ></span>

            <div class="formElements" style="z-index:-1">
                <label>Course Code:</label>
                 <span><input type="text" id="txtCoursecode" name="txtCoursecode" ></span>

            <div class="buttons" align="center">
                <button type="submit" class="primaryAction">Delete</button>
                                <button type="reset" class="primaryAction">Clear</button>

            </div></div></div>
                 </div>
         </div>
       </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:12:39.653

您可以使用表来做到这一点：

```
 <form name="f1" method="post" class="anu">
    <div style="float:right;width:10%;border:0;font-color:#163362">
        <a href=logout.jsp ">Log Out</a></div>

    <div id="container ">
        <div class="content "  ><center>Delete Batch</center><br>

    <table>
        <tr>
            <td>
                <label>Batch code:</label> <span><input type="text " id="txtBatchcode " name="txtBatchcode " ></span>

            </td>
            <td>
                <label>Course Code:</label> <span><input type="text " id="txtCoursecode " name="txtCoursecode " ></span>

            </td>
        </tr>
        </table>
        </div>
        </div>

</form> 
```

**[演示](http://jsfiddle.net/XVSNc/1/)**

使用表格是最简单的方法。您根本不必使用**CSS**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:02:56.753

您可以`display:inline-block;`在每个`.formElements`块上使用。

见这里：http: [//jsfiddle.net/hAwyy/](http://jsfiddle.net/hAwyy/)

```
<div id="container">
    <div class="content">
        <h2 style="text-align:center;">Delete Batch</h2>
        <div class="formElements" style="display:inline-block;">
            <label>Batch code:</label>
            <span><input type="text" id="txtBatchcode" name="txtBatchcode" /></span>
        </div>
        <div class="formElements" style="display:inline-block;">
            <label>Course code:</label>
            <span><input type="text" id="txtCoursecode" name="txtCoursecode" /></span>
        </div>
        <div class="buttons" style="text-align:center;">
            <button type="submit" class="primaryAction">Delete</button>
            <button type="reset" class="primaryAction">Clear</button>
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:03:58.300

试试这个：定义其中将适用`class`于`css`所有`.formElements`

```
<style type="text/css">
.formElements{
    display:inline;
}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:18:22.643

看它很简单，让你的 div 向左浮动 .. 所以它们将从左边开始并以全宽结束，然后它们将发生在下一行。

```
<div width="100%">
<div style="float:left , width :50%">your content here    </div>
<div style="float:left , width :50%">  your content here </div>
<div></div>,
</div> 
```

# java - 有人可以看看我的 Java 代码吗？

> ID：15779094
> 
> 赞同：0
> 
> 时间：2013-04-03T04:49:34.910
> 
> 标签：java

因此，任务是编写一个使用 if 语句声明类型`java program`为 alpha 的数组的 a 。初始化数组，使第一个元素**等于**索引变量的平方，最后 25 个元素等于索引变量的三倍。`50 elements``double``25`

 **这是我的代码：

```
 int i=0;      
    int count=0;
    double[] alpha= new double [50];

    for (i=0; i<alpha.length; i++)
    { 
    if (alpha.length<25)
    alpha[i]= i*i;

    System.out.print(alpha[i] + " ");

    if (alpha.length>=25)
    alpha[i]= 3*i;      

     System.out.print(alpha[i] + " ");
        count++;
        if (count==10){
        System.out.println("\n");
        count=0; 
```

问题是我可以让代码的最后一部分工作

```
 if (alpha.length>=25) alpha[i]= 3*i 
```

但代码的第一部分不起作用。我得到的答案是：

`0.0 0.0 0.0 3.0 0.0 6.0 0.0 9.0 0.0 12.0 0.0 15.0 0.0 18.0 0.0 21.0 0.0 24.0 0.0 27.0 0.0 30.0 0.0 33.0 0.0 36.0 0.0 39.0 0.0 42.0 0.0 45.0 0.0 48.0 0.0 51.0 0.0 54.0 0.0 57.0 0.0 60.0 0.0 63.0 0.0 66.0 0.0 69.0 0.0 72.0 0.0.`

任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:53:09.813

alpha.length 将始终大于 25。您需要比较 i 以查看它是小于还是大于 25。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:52:34.017

**FOR 迭代中的 Alpha 长度不变。你必须比较 i 变量！** 对于 (i=0; 我

```
System.out.print(alpha[i] + " ");

if (i>=25)
alpha[i]= 3*i;      

 System.out.print(alpha[i] + " ");
    count++;
    if (count==10){
    System.out.println("\n");
    count=0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:55:13.340

那是因为`alpha.length>=25`总是**TRUE**并且`alpha.length < 25`总是**FALSE**，因为你`alpha.length`是 50。

尝试使用**`index i`**进行比较。

```
if (i < 25)
 alpha[i] = i * i;
....
....
if (i >= 25)
 alpha[i] = 3 * i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T04:54:42.217

`alpha.length`是数组的长度，它总是等于 50 。

**改变你的状况**

> ```
> if (alpha.length<25) 
> ```

**到**

> ```
> if (i<25) 
> ```

**同样改变**

> 如果 (alpha.length>=25)

**到**

> 如果 (i>=25)**

# c# - Auto scroll and navigate to asp.net div

> ID：15779095
> 
> 赞同：2
> 
> 时间：2013-04-03T04:49:47.580
> 
> 标签：c#, asp.net

In my aspx ,

```
<div id="commentDiv" runat="server">
<%# Eval("myComment")%>
</div> 
```

At the start of this page loading , I want to auto scroll and navigate to this DIV .
How can i do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:52:55.140

**Refer following code:**

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true"
            ScriptMode="Release" />
        <script type="text/javascript">
            var xPos, yPos;
            var param = Sys.WebForms.PageRequestManager.getInstance();
            function BeginRequestHandler(sender, args) {
                if ($get('<%=divMessages.ClientID%>') != null) {
                    xPos = $get('<%=divMessages.ClientID%>').scrollLeft;
                    yPos = $get('<%=divMessages.ClientID%>').scrollTop;
                }
            }
            function EndRequestHandler(sender, args) {
                if ($get('<%=divMessages.ClientID%>') != null) {
                    xPos = $get('<%=divMessages.ClientID%>').scrollLeft = xPos;
                    yPos = $get('<%=divMessages.ClientID%>').scrollTop = yPos;
                }
            }
            param.add_beginRequest(BeginRequestHandler);
            param.add_endRequest(EndRequestHandler);
        </script> 
```

**This is important link for this issue:**

[http://basgun.wordpress.com/2008/06/09/maintain-scroll-position-updatepanel-postback/](http://basgun.wordpress.com/2008/06/09/maintain-scroll-position-updatepanel-postback/)

Hope its helpful.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:56:49.597

请参阅[http://www.aspdotnet-suresh.com/2012/10/jquery-scroll-to-particular-div.html#middle](http://www.aspdotnet-suresh.com/2012/10/jquery-scroll-to-particular-div.html#middle)基于 jquery 的函数，通过 div 正上方的 href 标记滚动到特定 div。您可以在 pageLoad 中添加此功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:00:22.107

最简单的方法是当用户按下它时有一个链接，它将他滚动到这个 div。

在您的浏览器端，只需`<a name="BottomOfThePage"></a>`在 div 周围添加。并使链接看起来像这样`<a href="#BottomOfThePage">Link</a>`

# android - 带有 JQM for android 的 Phonegap 中的字符串值配置文件

> ID：15779099
> 
> 赞同：1
> 
> 时间：2013-04-03T04:50:22.723
> 
> 标签：android, cordova, jquery-mobile, local-storage, lawnchair

我正在使用带有 JQM 的 Phonegap 为 android 开发应用程序。在`J2ME`应用程序开发中，我们可以有一个集中的文件 ( `message.txt`)，我们存储我们将要使用的字符串值列表。像这样我们可以有一些配置来从配置文件中获取字符串值。这样我们就可以轻松地对文本值进行更改。有谁能告诉我。是否可以 。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:44:18.990

有许多解决方案，您只需要选择最适合您的目的的一个。

# Javascript 解决方案

所有 javascript 解决方案都使用 localstorage 作为最终存储目标。唯一的区别在于他们的实施，他们在多大程度上使它更容易。

### [草坪椅](http://brian.io/lawnchair/)

可能是最常用的 JSON 本地存储框架之一，也是我选择的一个框架。它速度很快，但您第一次看到它时可能会有点混乱。但考虑到一切，它工作得很好。

### [持久性](http://persistencejs.org/)

这是另一个很好的解决方案。最适合移动设备，但仍适用于广泛的移动设备（Android、iOS、BB）或桌面浏览器。无论使用哪种设备，它都会使用从 HTML5 WebSQL 到 localstorage 的最佳可用存储。如果您想以一种简单的方式进入 WebSQL，这是一个很好的解决方案，但它比 HTML5 WebSQL 更难工作。

### [本地存储数据库](http://nadh.in/code/localstoragedb/)

这个是新人。像 Lawnchair 一样简单，但更像 SQL。与 Lawnchair 一样，它仅使用本地存储来存储序列化的 JSON 字符串。它不适用于 webSQL。

# 原生支持

在这里，您还会发现一些可能性。比 JS 框架好一点的解决方案，主要是因为它使用了手机原生存储支持。

### [电话间隙存储](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)

这是对本地 SQL 存储的官方 Phonegap 支持。这是一个常用的功能。但请注意，它可能有点错误。支持除 WM7+ 之外的所有可能的移动平台。

### [Cordova/PhoneGap sqlite 插件 - 安卓版](https://github.com/brodyspark/PhoneGap-sqlitePlugin-Android)

Cordova/PhoneGap 插件中 sqlite 的本机接口，尽可能地遵循 HTML5 Web SQL API。它不受 5MB 限制的影响，并且尽可能地模仿了经典的 SQL 用法。值得一提的是，它支持数据加密。与常见的 Phonegap Storage 实现不同，它支持 Windows Mobile，但不支持 BlackBerry。

### [电话间隙文件](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File)

如果您想坚持使用文件，此解决方案可能是最好的解决方案。这是一种常见的Phonegap 解决方案。将您的配置存储在 XML 中，并在 Java 或 Javascript 中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:54:50.147

是的，可以在 PhoneGap 中保留一些字符串值。

由于PhoneGap 基于HTML5 技术，您可以利用 [网络存储](http://www.w3schools.com/html/html5_webstorage.asp)（sessionStorage、localStorage）来存储值。

或者考虑使用设备的[本机存储功能](http://docs.phonegap.com/en/2.5.0/cordova_storage_storage.md.html#Storage)。您可以将一些配置值存储在`sqlite`db 中，并在必要时检索它。

# java - 计数回车，Java

> ID：15779103
> 
> 赞同：0
> 
> 时间：2013-04-03T04:50:54.787
> 
> 标签：java, java.util.scanner, bufferedreader, arrays

我正在尝试计算字符串输入中出现的回车。我都试过了`Scanner`和`BufferedReader`。使用`Scanner`,`nextLine()`不拾取回车。`next()`with`Scanner`查找标记，例如输入中的空格，然后标记拆分输入。我希望将整个输入读取为单个输入。这可能意味着我不能使用扫描仪。

使用`BufferedReader`,`readLine()`最多读取回车，但不会在输入中返回回车。如果我使用“reader.read();” 然后它告诉我变量 user_input 必须是 int。user_input 应该是一个字符串输入，它可能有一个整数，但也可能没有。唯一的事情是该程序将继续执行，直到输入包含“/done”。如果有人能简单地指出我正确的方向，我将不胜感激！

```
try {
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
String user_input = "";

System.out.println("Enter a string: ");

while (!user_input.contains("/done"))  {

user_input = reader.readLine();        //cannot be readLine because it only reads up to a carriage return; it does NOT return carriage return
                                       //*Sadly, if I use "reader.read();" then it tells me that user_input HAS to be int. user_input is a string input
String input = user_input;
char[] c = input.toCharArray();
int[] f = new int[114];

System.out.println("Rest of program, I convert input to ascii decimal and report the occurences of each char that was used");

}

catch  (IOException e) {
e.printStackTrace();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:56:34.793

`read()`使用方法一个一个地读取字符，直到遇到EOF 。

**[JAVA 文档](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#read%28%29)**

java 中的 read() 读取任何字符（甚至**\n**，**\r**或**\r\n**）。从而逐个读取字符，并检查“回车”中读取的字符是否。

如果是，则增加计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:56:42.537

有一个名为 StringUtils 的库可以很容易地做到这一点。它有一个名为`countMatches`. 这是您可以使用它的方法。但首先，您应该将输入组合成一个字符串：

```
package com.sandbox;

import org.apache.commons.lang.StringUtils;

public class Sandbox2 {

    public static void main(String[] args) {
        String allInput = "this\nis\na\n\nfew\nlines\nasdf";
        System.out.println(StringUtils.countMatches(allInput, "\n"));
    }

} 
```

这将输出“6”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:09:59.533

这是你要找的吗？

```
Scanner scanner = new Scanner(System.in);
scanner.useDelimiter("\\z"); //"\\z" means end of input
String input = scanner.next(); 
```

编辑：如果你想`"\n"`显示为`"CR"`，只需这样做：

```
input.replaceAll("\\n", "CR"); 
```

# c# - 使用c#获取文件所有者信息

> ID：15779108
> 
> 赞同：-2
> 
> 时间：2013-04-03T04:51:47.900
> 
> 标签：c#, file

我想获取文件所有者信息，但在这一行遇到了一些问题：

```
const string fileOwner = Delimon.Win32.IO.File.GetAccessControl(fi.Name).GetOwner(typeof(System.Security.Principal.NTAccount)).ToString(); 
```

具体来说，它不喜欢`fi.name`. 我的错误是

> 非静态字段、方法或属性“Delimon.Win32.IO.File.GetAccessControl(string)”需要对象引用

这是它所在的更大的代码块：

```
// check if file exists.  if so dont overwrite...
if(Delimon.Win32.IO.File.Exists(targetPath+fi.Name)) {
    // Console.WriteLine(fileName + " already exists, nothing written");
}
else {
    // Console.WriteLine(fileName + " is new so written to dir");
    string fileOwner=Delimon.Win32.IO.File.GetAccessControl(fi.Name).GetOwner(typeof(System.Security.Principal.NTAccount)).ToString();
    Delimon.Win32.IO.File.Copy(fileName, destFile, true);

    // convert extension to number
    switch(fileExt) {
        case ".doc":
            fileType=1;
            break;
        case ".xls":
            fileType=2;
            break;
        case ".mdb":
            fileType=3;
            break;
        default:
            fileType=1;
            break;
    }

    // I want tot use fileOwner here in an SQL statement
} 
```

请注意`fi.Name`仅保留文件名。我还有一个名为的变量`fileName`，它包含**完整的绝对路径**，包括文件名。这给了我同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T05:04:06.230

该方法`File.GetAccessControl()`被“实现”为实例方法而不是静态方法（不像[MSDN](http://msdn.microsoft.com/en-us/library/8e1fc3b8.aspx)上的方法）

尝试创建一个类型的文件，`Delimon.Win32.IO.File`然后使用创建的实例调用方法：

```
Delimon.Win32.IO.File file  = new Delimon.Win32.IO.File(...); // Check constructor
FileSecurity fs = myFile.GetAccessControl(); 
```

您可能需要查看有关`Delimon.Win32.IO.File.Exists`可能是实例方法的方法的文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T05:03:49.680

从错误中，听起来好像 fi.Name 无法找到，因为调用 GetAccessControl 时 fi 为空。在调试器中查看它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T23:33:33.913

抱歉，我把几个答案放在了错误的位置。我是这个网站的新手（如果你不知道，还有 c#/.net）我相信我在这里找到了一个解决方案[Getting / setting file owner in C#](https://stackoverflow.com/questions/153087/getting-setting-file-owner-in-c-sharp)基于这就是我的工作方式：

```
using System.Security.AccessControl;
using System.Security.Principal;

var fs = System.IO.File.GetAccessControl(fileName);
var sid = fs.GetOwner(typeof(SecurityIdentifier));
Console.WriteLine(sid);
var ntAccount = sid.Translate(typeof(NTAccount));
Console.WriteLine(ntAccount); 
```

所以 ntAccount 是我将在 SQL 中用于文档所有者名称的变量。感谢每个人在这里帮助我。该解决方案似乎确实有效。快速提问，因为我是新来的。我应该将此作为回复发布吗？我应该接受吗？

# grails - grails 1.3.7 中的自动完成功能

> ID：15779111
> 
> 赞同：-2
> 
> 时间：2013-04-03T04:52:02.567
> 
> 标签：grails

我是 grails 的新手。我正在使用 grails 1.3.7 版本。现在我需要使用列表中的自动完成功能。但我不知道该怎么做。谁能帮我解决这个问题？我真的需要从视图到控制器的帮助。谢谢大家。

下面是我的查看页面>>>

```
 <%@ page import="com.Login" %>
<html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <resource:autoComplete skin="default" />
</head>

<body>
<g:form>
    <div>
        <label>Autocomplete Box :</label>
        <richui:autoComplete name="allusername" action="${createLinkTo('dir': 'login/allusername')}" />
    </div>
</g:form>
</body>
</html> 
```

下面是我的控制器>>>

```
 package com

    class LoginController {
        def allusername = {
            def logins = Login.findAllByUsernameLike("%${params.query}%")

            //Create XML response
            render(contentType: "text/xml") {
                results() {
                    logins.each { login ->
                        result(){
                            username(login.username)
                            //Optional id which will be available in onItemSelect
                            id(login.id)
                        }
                    }
                }
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:08:18.797

我在 1.3.7 中做过同样的事情，最简单的方法是安装 Rich UI 插件（[http://grails.org/plugin/richui#AutoComplete](http://grails.org/plugin/richui#AutoComplete)）

在文档中，您可以使用或多或少完整的示例。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:59:51.843

自动完成需要 javascript。试试[jQuery UI。](http://jqueryui.com/autocomplete/)

有很多例子。您基本上需要的是一个控制器操作/url，它将服务器 JSON 或 XML 作为对来自自动完成的 AJAX 调用的响应。我还建议升级到已经包含 jQuery 的更新版本的 grails。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:26:36.753

实现自动完成需要几个组件。一种是允许用户使用 ajax 键入并将其发送到服务器。这部分可以使用许多 javascript 库来处理，例如 jquery 自动完成或者如果您使用的是 bootstrap typeahead。另一部分是服务器查找或搜索值并将结果通常以 JSON 格式发送回浏览器。前段时间我写了一篇关于这个的博客，看看它是否可以帮助你[在这里](http://alidadasb.blogspot.com/2011/12/enabling-jquery-autocomplete-with.html) grails中还有一些插件可以帮助你实现这一点，正如其他人所建议的那样。

# asp.net - Unique Dropdownlist is coming for the first page values in Jqgrid

> ID：15779115
> 
> 赞同：1
> 
> 时间：2013-04-03T04:52:13.780
> 
> 标签：asp.net, jqgrid

Hello Every One!!! I added codes for getting unique dropdownlist in the columns of jqgrid . Dropdownlist is coming but it is coming for the first page of the jqgrid means that dropdownlist has the unique values of the first page of the jqgrid whereas i need all the unique values of the whole Jqgrid..

Below I am posting my codes...

```
grid = $("#gridId");

        getUniqueNames = function (columnName) {
            var texts = grid.jqGrid('getCol', columnName), uniqueTexts = [],
            textsLength = texts.length, text, textsMap = {}, i;
            for (i = 0; i < textsLength; i++) {
                text = texts[i];
                if (text !== undefined && textsMap[text] === undefined) {
                    // to test whether the texts is unique we place it in the map.
                    textsMap[text] = true;
                    uniqueTexts.push(text);
                }
            }
            return uniqueTexts;
        },
        buildSearchSelect = function (uniqueNames) {
            var values = ":All";
            $.each(uniqueNames, function () {
                values += ";" + this + ":" + this;
            });
            return values;
        },
        setSearchSelect = function (columnName) {
            grid.jqGrid('setColProp', columnName,
            {
                stype: 'select',
                searchoptions: {
                    value: buildSearchSelect(getUniqueNames(columnName)),
                    sopt: ['eq']
                }
            }
        );
        }; 
```

This function i have called like this...

```
setSearchSelect('extension');
                grid.jqGrid('setColProp', 'Name',
                    {
                        searchoptions: {
                            sopt: ['cn'],
                            dataInit: function (elem) {
                                $(elem).autocomplete({
                                    source: getUniqueNames('Name'),
                                    delay: 0,
                                    minLength: 0
                                });
                            }
                        }
                    });

                setSearchSelect('username');
                grid.jqGrid('setColProp', 'Name',
                    {
                        searchoptions: {
                            sopt: ['cn'],
                            dataInit: function (elem) {
                                $(elem).autocomplete({
                                    source: getUniqueNames('Name'),
                                    delay: 0,
                                    minLength: 0
                                });
                            }
                        }
                    }); 
```

In between these two code snippets I am loading data into jqgrid locally using Ajax call. Any help will be heartely appreciated.. Thanx in advance..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:02:32.267

我相信 getCol 只会从 jqgrid 返回当前加载的数据（对于定义的列）。因为起初您只加载第一页，所以自动完成无法知道列的唯一值更多！

您将不得不一次加载所有页面（小数据集）或从数据库填充自动完成。

# c# - XBAP unable to start in IE10

> ID：15779116
> 
> 赞同：0
> 
> 时间：2013-04-03T04:52:28.427
> 
> 标签：c#, .net, wpf, xbap, windows-server-2012

I created a simple XBAP WPF application but when I try to browse it, I get this error:

```
PLATFORM VERSION INFO
    Windows             : 6.2.9200.0 (Win32NT)
    Common Language Runtime     : 4.0.30319.18010
    System.Deployment.dll       : 4.0.30319.17929 built by: FX45RTMREL
    clr.dll             : 4.0.30319.18010 built by: FX45RTMGDR
    dfdll.dll           : 4.0.30319.17929 built by: FX45RTMREL
    dfshim.dll          : 4.0.41209.0 (Main.041209-0000)

SOURCES
    Deployment url          : file:///C:/Users/timothy/Downloads/temp%20(2).xbap

IDENTITIES
    Deployment Identity     : temp.xbap, Version=1.0.0.0, Culture=neutral, PublicKeyToken=d411194368b9a73a, processorArchitecture=msil

APPLICATION SUMMARY
    * Online only application.

ERROR SUMMARY
    Below is a summary of the errors, details of these errors are listed later in the log.
    * An exception occurred while downloading the manifest. Following failure messages were detected:
        + Downloading file:///C:/Users/timothy/Downloads/temp.exe.manifest did not succeed.
        + Could not find file 'C:\Users\timothy\Downloads\temp.exe.manifest'.
        + Could not find file 'C:\Users\timothy\Downloads\temp.exe.manifest'.
        + Could not find file 'C:\Users\timothy\Downloads\temp.exe.manifest'.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
    No transaction error was detected.

WARNINGS
    There were no warnings during this operation.

OPERATION PROGRESS STATUS
    No phase information is available.

ERROR DETAILS
    Following errors were detected during this operation.
    * [4/3/2013 12:49:01 AM] System.Deployment.Application.DeploymentDownloadException (Unknown subtype)
        - Downloading file:///C:/Users/timothy/Downloads/temp.exe.manifest did not succeed.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
            at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
            at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
            at System.Deployment.Application.DownloadManager.DownloadManifestAsRawFile(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
            at System.Deployment.Application.DownloadManager.DownloadApplicationManifest(AssemblyManifest deploymentManifest, String targetDir, Uri deploymentUri, IDownloadNotification notification, DownloadOptions options, Uri& appSourceUri, String& appManifestPath)
            at System.Deployment.Application.DeploymentManager.BindCore(Boolean blocking, TempFile& tempDeploy, TempDirectory& tempAppDir, FileStream& refTransaction, String& productName)
            at System.Deployment.Application.DeploymentManager.BindAsyncWorker()
        --- Inner Exception ---
        System.Net.WebException
        - Could not find file 'C:\Users\timothy\Downloads\temp.exe.manifest'.
        - Source: System
        - Stack trace:
            at System.Net.FileWebRequest.EndGetResponse(IAsyncResult asyncResult)
            at System.Net.FileWebRequest.GetResponse()
            at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
        --- Inner Exception ---
        System.Net.WebException
        - Could not find file 'C:\Users\timothy\Downloads\temp.exe.manifest'.
        - Source: System
        - Stack trace:
            at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)
            at System.Net.FileWebRequest.GetResponseCallback(Object state)
        --- Inner Exception ---
        System.IO.FileNotFoundException
        - Could not find file 'C:\Users\timothy\Downloads\temp.exe.manifest'.
        - Source: mscorlib
        - Stack trace:
            at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
            at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
            at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
            at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean useAsync)
            at System.Net.FileWebStream..ctor(FileWebRequest request, String path, FileMode mode, FileAccess access, FileShare sharing, Int32 length, Boolean async)
            at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)

COMPONENT STORE TRANSACTION DETAILS
    No transaction information is available. 
```

I am debugging it locally but get this error. I am running on Win server 2012\. Could anybody please help me solve this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T15:00:52.350

请检查位置“C:\Users\timothy\Downloads\”中的 temp.exe.manifest 文件

# python - Using python code in pyjade

> ID：15779120
> 
> 赞同：4
> 
> 时间：2013-04-03T04:52:50.013
> 
> 标签：python, pug, pyjade

I'm trying to generate a list using pyjade, like so:

```
ul
  - for i, (label, link) in enumerate(tabs)
    li(class="selected" if i == selected_index else "")
      a(href=link)= label 
```

But I see this error:

> UndefinedError: 'enumerate' is undefined

I must be embedding python code into Jade wrong. What's the right way to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T18:31:27.140

Jade 使用我所说的“隐式枚举”——它通过简单地添加一个变量来枚举列表中的值， , `i`，而不是要解包的值：（`for item, i in list_like`对于 dicts 你可以做`for key, val in dict_like`）

下面显示的是您使用元组解包和“隐式枚举”一起使用的示例，使用 PyJade 2.0.2 进行了测试

```
- var selected_index = 0
- var tabs = [('hello', '/world'), ('citizens', '/please/respect_your_mother'), ('thank_you', '/bye')]
ul
    // unpack `tabs` and tack on the variable `i` to hold the current idx
    for label, link, i in tabs
        li(class="selected" if (i == selected_index) else "")
            a(href="#{link}") #{label} 
```

注意：正如在“标准”Jade 代码中更常见的那样，在撰写本文时，**PyJade 不*支持*三元运算符进行赋值**。( `variable= (condition)? value_if_true : value_if_false`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T07:53:35.307

您应该使用将函数添加到模板环境的方式，该模板环境由您编译的jade文件使用的模板语言使用pyjade。

对于使用 jinja 的 Flask，这应该放在你的 __init__.py 中：

```
app.jinja_env.globals.update(enumerate=enumerate) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:12:03.943

不; pyjade 不允许将任意 python 代码嵌入到玉中。改用jade的语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-12T11:35:25.773

你可以用pypugjs（pyjade的继任者）做到这一点

```
li(class=("selected" if i == selected_index else "")) 
```

# mysql - mysql的问题，特别是sql函数

> ID：15779123
> 
> 赞同：-1
> 
> 时间：2013-04-03T04:53:20.047
> 
> 标签：mysql

我正在尝试在 SQL 上插入以下代码，但是它不起作用。有什么问题:O

内容

```
$share_text="<img src='http://dosha.re/i/Uvhg.png'/>"; 
```

> （这是一个 IMG 标签，除了 stackoverflow 不会显示代码。）

```
$sql.=", '$share_text'"; 
```

如您所知，Sharetext 确实包含一个 img 扩展名，但由于某种原因，我得到了：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ' [http://dosha.re/i/Uvhg.png](http://dosha.re/i/Uvhg.png) '/>', 1, '', 'Tue Apr 2 2013', '09附近使用的正确语法:51 PM')' 在第 1 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:55:25.353

您需要`addslashes`围绕这个`image tag`即将到来的变量值调用函数。这是 single 的错误`slashes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:56:25.843

您在`src`属性中使用了单引号，但随后您也将整个内容用单引号括起来，这样就行不通了：

```
$share_text = '<img src="http://dosha.re/i/Uvhg.png" />';
$sql .= ", '$share_text'"; 
```

或者，并且可能更好，使用`mysql_real_escape_string()`or `PDO::quote`or `mysqli::real_escape_string`。

```
$sql .= sprintf(", '%s'", mysql_real_escape_string($share_text)); 
```

无法从中分辨出你真正的查询是什么，但我建议使用准备好的语句，这样你就不必担心转义 SQL。

# django - 如何使用第二个列表对象获取第一个列表对象值导致 django 模板

> ID：15779129
> 
> 赞同：0
> 
> 时间：2013-04-03T04:53:40.677
> 
> 标签：django, django-templates, django-views

我有两个对象列表：`firstobjectlist`和`secondobjectlist`. 有了这两个列表，我想使用第二个对象列表结果值来获取第一个对象的值。

例如：

```
{% for i in firstobjectlist %}
    {% for value in secondobjectlist %}
        <td align="left">{{i{{value.id}}}}</td>
    {% endfor %}
{% endfor %} 
```

当我执行上面的代码时，我得到了错误：

> “无法解析余数：'{{value.id' from 'i.{{value.id'”

谁能帮我看看应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:50:59.570

`{{`首先，django 模板变量必须在和内容之间有一个空格。

您可以使用[标签`with`（](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#with)假设 的值`value.id`是 中的键或索引`firstobjectlist`）：

```
{% for i in firstobjectlist %}
    {% for value in secondobjectlist %}
        {% with value.id as j %}
            <td align="left">{{ i.j }}</td>
        {% endwith %}
    {% endfor %}
{% endfor %} 
```

# javascript - 调用另一个渲染方法在主干中渲染子视图

> ID：15779130
> 
> 赞同：0
> 
> 时间：2013-04-03T04:53:44.817
> 
> 标签：javascript, backbone.js

所以我有两个模板，一个是父模板，另一个是包含子视图的模板。我的第一个父视图扩展了主干的视图，它的渲染方法看起来像

```
render: function () {
  this.$el.append(templates["template-parent-test"](this.model));
  return this;
} 
```

这个父视图上有一个按钮。我现在用来填充视图的按钮。它基本上是这样做的：

```
 populateView: function () {
   // create some dummy test data to match the web service
     _.each(myModel, function (theModel) {
         var testView = new childView({ model: theModel });
         this.$('div-in-parent-view').append(testView.render().$el);
     });
   } 
```

这个主干视图扩展了 Backbone.View 并且它的渲染方法看起来像：

```
 render: function () {
        console.log("rendering child view");
        this.$el.html(this.template({ data: this.model.toJSON() }));

        return this;
    } 
```

所以这行得通。但我不想在按下按钮时填充父视图。我想在第一次显示它时填充它，并让按钮执行其实际应该执行的操作。我认为我可以从父视图中的渲染函数调用 this.populateView() ，但实际上没有渲染任何内容。但是，如果我在按钮事件中执行 this.populateView()，它就会被渲染。为什么这里有区别？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:49:20.500

尝试将`this`第三[个参数添加到`each`](http://underscorejs.org/#each). 这设置了上下文。当您不指定上下文时，`this`将为`window`. 并且由于您的 html 在父视图期间尚未​​出现在页面上`render`，因此无法找到`this.$('#div-in-parent-view')`以便将 html 添加到其中。

# jquery - 带有 DHtmlXScheduler 的 jQuery Mobile .. 数据未加载

> ID：15779132
> 
> 赞同：1
> 
> 时间：2013-04-03T04:53:50.673
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 DHtmlXScheduler 的移动版本。它运行良好，但我无法让它加载数据。我已经尝试过 XML 和 Json。这是文档的链接：http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler: [mobile_data](http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler:mobile_data)

这是我的代码：

```
<div data-role="page" data-theme="d" id="Top">
    <script src="~/Scripts/dhxscheduler_mobile.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="~/Styles/dhxscheduler_mobile.css">

    <div data-role="content">
        <script type="text/javascript">
            scheduler.config.readonly = true;
            dhx.ready(function () {
                dhx.ui.fullScreen();
                dhx.ui({
                    view: "scheduler",
                    id: "scheduler"
                });
            });
            $("scheduler").parse([
                    { id: 1, start_date: "2013-04-01 0:00", end_date: "2013-04-01 0:00", text: "Event 1" },
                    { id: 2, start_date: "2013-04-05 0:00", end_date: "2013-04-05 0:00", text: "Event 2" }
            ], "json");
        </script>
    </div>
</div> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:32:58.157

我浏览了文档，`$$`解析事件时应该有两个。所以改变如下

```
$$("scheduler").parse([
                    { id: 1, start_date: "2013-04-05 0:00", end_date: "2013-04-05 12:00", text: "Event 1" },
                    { id: 2, start_date: "2013-04-05 0:00", end_date: "2013-04-05 1:00", text: "Event 2" }
            ], "json"); 
```

把它们放在一起如下

```
<div data-role="page" data-theme="d" id="Top">
    <link rel="stylesheet" type="text/css" href="codebase/dhxscheduler_mobile.css">
    <script src="codebase/dhxscheduler_mobile.js" type="text/javascript"></script>

    <div data-role="content">
        <script type="text/javascript">
        scheduler.config.readonly = true;
                dhx.ready(function(){
                    //the method allows you to hide the address bar on iPhone/iPod to save the space for application
                    dhx.ui.fullScreen();
                    //object constructor
                    dhx.ui({
                        view: "scheduler",
                    id: "scheduler"
                    });
                    // method load() lets you to populate the scheduler with data
                    $$("scheduler").parse([
                    { id: 1, start_date: "2013-04-05 0:00", end_date: "2013-04-05 12:00", text: "Event 1" },
                    { id: 2, start_date: "2013-04-05 0:00", end_date: "2013-04-05 1:00", text: "Event 2" }
            ], "json");

                });

        </script>
    </div>
</div> 
```

## 截屏

![在此处输入图像描述](https://i.stack.imgur.com/qK6W1.png)

# .htaccess - .htaccess 301 从非 www 重定向到 www 在浏览器历史记录中显示两个 url

> ID：15779140
> 
> 赞同：0
> 
> 时间：2013-04-03T04:54:25.037
> 
> 标签：.htaccess

我已经使用 .htaccess 进行了 301 重定向以重定向`http://domain.com`到`http://www.domain.com`，我就是这样做的。

```
Options +FollowSymlinks
RewriteEngine on
<IfModule mod_rewrite.c>
Rewritecond %{http_host} ^domain.com [nc]
Rewriterule ^(.*)$ http://www.domain.com/$1 [r=301,nc]
</IfModule> 
```

我几个月前写过这段代码，到目前为止它工作得很好，但现在突然间它在浏览器历史记录中显示了两个 url，同时正确重定向，

`1st url is http://domain.com`

`2nd url is http://www.domain.com`

我删除了该行`Options +FollowSymlinks`，但它仍然显示两个 url。

请建议为什么我在浏览器历史记录中获得两个 url，而我应该只获得重定向的 url。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:04:19.090

您现在在浏览器历史记录中获得 2 个 URL，可能是因为您升级了浏览器、更改了浏览器设置或使用了不同的浏览器。该`FollowSymlinks`选项与浏览器的历史没有任何关系。它是告诉网络服务器可以按照打开该选项的目录中的符号链接进行操作。

您在浏览器历史记录中看到这两个 URL 的原因是因为*您将访问这两个 URL*。

当您转到 时`http://domain.com`，您的浏览器会发送一个解析`domain.com`主机，然后向该主机发送一个请求。它得到的响应本质上是“*你要找的东西不在这里，`http://www.domain.com`而是去，下次你要找的时候继续去那里`http://domain.com`*”。然后，浏览器`http://www.domain.com`通过解析`www.domain.com`主机来处理对 的请求，然后向该主机发送请求。

因此，您有`http://domain.com`, then的浏览历史记录`http://www.domain.com`。

# elasticsearch - Elasticsearch _all 字段搜索和多匹配之间的性能差异是什么

> ID：15779141
> 
> 赞同：1
> 
> 时间：2013-04-03T04:54:25.800
> 
> 标签：elasticsearch

我知道 Elasticsearch 默认启用 _all 字段。但出于某种原因（评分）我不想使用它。相反，我使用 multi_match，我有近 10 个字段。multi_match 的性能是否比_all 字段差？多少钱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:53:26.437

恕我直言，它更多地取决于查询而不是字段本身。我认为，您正在谈论`query_string`默认使用哪个`_all`字段。

也就是说，使用`match`query (or `multi_match`) 而不是`query_string`query 可能会更快。并且在字段列表上使用多重匹配`_all`可能会比在字段上更快，因为匹配查询已优化并根据字段和查询内容本身使用*最佳内部查询。*

我不知道它快了多少。但是，您可以轻松地为您的用例运行测试并对其进行测量。

高温高压

# ios - iOS - Storyboard - 本地化 - 修改storyboard后，如何同步到其他语言的storyboard？

> ID：15779142
> 
> 赞同：3
> 
> 时间：2013-04-03T04:54:35.067
> 
> 标签：ios, uistoryboard

我知道如何打开故事板的本地化。问题是我不知道如何在修改主要（英文）故事板后同步所有本地化故事板。

有什么快捷方式可以同步它们吗？**我必须在十**多个语言故事板中一次又一次地进行所有这些修改吗？

我的条件是：我有一个项目有十多个本地化。我在 AppStore 上发布后，我们有了新的用户需求。然后，我们开始编写下一个版本的应用程序。在我在 stroyboard 上完成了大量的改进和创作之后，我对面对其他语言的故事板感到绝望。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T06:14:28.120

如果您使用的 iOS 版本 >= 6（并且 Xcode >=4.5），您可以使用单个情节提要用于多种语言，即进行基本本地化 + 通常的字符串本地化。这样做，您只需要关心字符串文件中的本地化字符串。

如需指南，请参见[此处](http://forums.macrumors.com/showthread.php?t=1467446)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:45:21.293

如果你的目标是 iOS 6.0，你可以像 Matthias 提到的那样使用 Base.lproj。

如果您的目标是 6.0 之前的版本，您可以使用 ibtool 的本地化合并功能。它们适用于 NIB、XIB 和 Storyboard。您可以像这样调用它们：

```
ibtool path-to/development.storyboard --local-
       ize-incremental --previous-file path-to/development-storyboard-localization-was-based-on.storyboard --incremental-file path-to/previous-localized-storyboard.storyboard--write path-to/updated-localized-storyboard.storyboard 
```

这样做是打开 development.storyboard，复制它，然后比较 path-to/development.storyboard 和 path-to/development-storyboard-localization-was-based-on.storyboard 之间的所有可本地化属性，如果这些属性是同样，从 path-to/previous-localized-storyboard.storyboard 中的对应值被复制到 path-to/updated-localized-storyboard.storyboard，否则当前开发值保留在原地。

# r - 从字符串中提取文本名称

> ID：15779145
> 
> 赞同：1
> 
> 时间：2013-04-03T04:54:44.400
> 
> 标签：r

我有一列值为

“RED LOBSTER CA04606”或“Red Lobster NewYork WY245”n 等等

如何从中提取名称 Red Lobster 或 Red Lobster NewYork。我正在尝试使用 stringr 包。
有没有办法检查它是否只有文本并且可以忽略其中带有数字的值？

非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T05:02:40.080

尝试`gsub`

```
> x <- "RED LOBSTER CA04606"
> gsub("\\S*\\d+\\S*",'', x)
[1] "RED LOBSTER "

> x<-"Red Lobster NewYork WY245"
> gsub("\\S*\\d+\\S*",'', x)
[1] "Red Lobster NewYork "

> x<-"Red Lobster NewYork WY245 BLUE LOBSTER CA04606"
> gsub("\\S*\\d+\\S*",'', x)
[1] "Red Lobster NewYork  BLUE LOBSTER " 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T05:09:34.280

由于您正在尝试使用`stringr`，我建议`str_extract`（即使您不尝试使用，我也会推荐它`stringr`）：

```
x <- c('RED LOBTSER CA04606', 'Red Lobster NewYork WY245')
str_extract(x, '[a-zA-Z ]+\\b')
# [1] "RED LOBSTER "          "Red Lobster NewYork " 
```

正则表达式中的 '\b' 可防止提取 'CA04606' 中的 'CA'。

如果您不喜欢那个尾随空格，您可以使用`str_trim`它来删除它，或者您可以修改正则表达式：

```
str_extract(x, '[a-zA-Z]+(?: +[a-zA-Z]+)*\\b')
# [1] "RED LOBSTER"          "Red Lobster NewYork" 
```

注意 - 如果您的字符串在邮政编码*后*有非数字，则上面只返回之前的单词。所以在下面的例子中，如果你想在'WY245'之后得到'NewYork'，你可以使用`str_extract_all`并将结果粘贴在一起：

```
x <- c(x, 'Red Lobster WY245 NewYork')
str_extract_all(x, '[a-zA-Z]+(?: +[a-zA-Z]+)*\\b')
# [[1]]
# [1] "RED LOBSTER"
# 
# [[2]]
# [1] "Red Lobster NewYork"
# 
# [[3]]
# [1] "Red Lobster" "NewYork"    

# Paste the bits together with paste(..., collapse=' ')
sapply(str_extract_all(x, '[a-zA-Z]+(?: +[a-zA-Z]+)*\\b'), paste, collapse=' ')
# [1] "RED LOBSTER"          "Red Lobster NewYork" "Red Lobster NewYork" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T05:02:15.273

使用`strsplit`和的组合`grepl`

```
 sapply(strsplit(x, ' '), function(x) paste(x[!grepl('[[:digit:]]',x)], collapse = ' ')) 
```

这按空格分割，然后测试是否有数字分割向量，并且只将没有数字的粘贴在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:10:34.583

替代`gsub`版本：

```
x <- c("RED LOBSTER CA04606","Red Lobster NewYork WY245")

gsub("(.+)\\s+(.+$)","\\1",x)
[1] "RED LOBSTER"         "Red Lobster NewYork" 
```

并获取文本的另一部分：

```
gsub("(.+)\\s+(.+$)","\\2",x)
[1] "CA04606" "WY245" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T05:25:01.370

这是一步一步

```
mystr<-"Red Lobster NewYork WY245"
r<-regexpr("[A-Z][A-Z][0-9]+", mystr)
s<-substr(mystr, r[1], r[1] + attr(r, "match.length"))
mystr<-sub(s, "", mystr) 
```

# c# - 如何检查当前时区是否为（UTC+9:00）大阪、札幌、东京的其他语言？

> ID：15779146
> 
> 赞同：4
> 
> 时间：2013-04-03T04:54:46.307
> 
> 标签：c#, .net, localization, timezone

我可以通过以下方式进行比较：

```
if (TimeZoneInfo.Local.ToString().Contains("Tokyo"))
{
 //do something ...
} 
```

但问题是，如果我使用日本本地操作系统，例如，返回字符串使用日文字符而不是“大阪，札幌，东京”。在我的情况下，我检查了字符串是否包含字符串“Tokyo”，因此，我的代码将无法在日语操作系统上运行。

关于如何解决这个问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:00:10.677

我认为您应该可以使用该[`TimeZoneInfo.Id`属性](http://msdn.microsoft.com/en-CA/library/system.timezoneinfo.id.aspx)。我不认为它会被本地化，因为它必须匹配一些注册表项。

> 在 Windows XP 和 Windows Vista 中，它对应于注册表的 HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Time Zone 分支的子项。它可以作为参数传递给 FindSystemTimeZoneById 方法，以从注册表中检索特定时区。

如果由于某种原因不起作用，也许该[`BaseUtcOffset`属性](http://msdn.microsoft.com/en-CA/library/system.timezoneinfo.baseutcoffset.aspx)对您来说就足够了。

# windows-7 - 如何查看 DbgPrint 的内容？

> ID：15779149
> 
> 赞同：0
> 
> 时间：2013-04-03T04:55:02.303
> 
> 标签：windows-7, driver, wdk

我是驱动程序编程的新手。我在 Windows 7 中创建了一个简单的驱动程序。我尝试使用 osrloader 安装在我的内核中？osrloader 是否适用于 windows 7 32 位？如果我想查看打印详细信息，我在编码中使用 DbgPrint 意味着我如何查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:06:48.197

1.  连接 WinDbg（您必须有 2 台独立的计算机或改用 VM）
2.  使用 DbgView [http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)，您可以在加载驱动程序的同一台计算机上使用此工具。

# c - 奇怪的 /fp 浮点模型标志行为

> ID：15779156
> 
> 赞同：5
> 
> 时间：2013-04-03T04:55:47.123
> 
> 标签：c, visual-studio-2010, visual-studio-2012, floating-point, sse

我正在检查一些使用`/fp:precise`and`/fp:fast`标志的代码。

根据[MSDN](http://msdn.microsoft.com/en-us/library/e7s85ffb%28v=vs.110%29.aspx)`/fp:precise`文档：

> 在 x86 处理器上使用 /fp:precise 时，编译器将对 float 类型的变量执行舍入，以达到赋值和强制转换以及将参数传递给函数时的正确精度。这种舍入保证数据不会保留任何大于其类型容量的重要性。使用 /fp:precise 编译的程序可能比没有 /fp:precise 编译的程序更慢和更大。/fp:precise 禁用内在函数；而是使用标准运行时库例程。有关详细信息，请参阅 /Oi（生成内部函数）。

查看对`sqrtf`（调用`/arch:SSE2`，目标`x86/Win32`平台）的调用的反汇编：

```
0033185D  cvtss2sd    xmm0,xmm1  
00331861  call        __libm_sse2_sqrt_precise (0333370h)  
00331866  cvtsd2ss    xmm0,xmm0 
```

根据[这个问题](https://stackoverflow.com/questions/3206101/extended-80-bit-double-floating-point-in-x87-not-sse2-we-dont-miss-it)，我相信现代 x86/x64 处理器不使用 80 位寄存器（或至少不鼓励使用它们），因此编译器会执行我认为次优的操作，并使用 64 位双精度数进行计算。并且由于内部函数被禁用，因此调用了库 sqrtf 函数。

好的，很公平，这似乎符合文档所说的内容。

但是，当我为 x64 架构编译时，发生了一些奇怪的事情：

```
000000013F2B199E  movups      xmm0,xmm1  
000000013F2B19A1  sqrtps      xmm1,xmm1  
000000013F2B19A4  movups      xmmword ptr [rcx+rax],xmm1 
```

计算不是使用 64 位双精度执行的，而是使用内部函数。`/fp:fast`据我所知，结果与使用标志完全相同。

为什么两者之间存在差异？`/fp:precise`根本不适用于 x64 平台吗？

现在，作为健全性检查，我在 VS2010 x86 中使用`/fp:precise`and测试了相同的代码`/arch:SSE2`。令人惊讶的是，`sqrtpd`内在函数被使用了！

```
00AF14C7  cvtps2pd    xmm0,xmm0  
00AF14CA  sqrtsd      xmm0,xmm0  
00AF14CE  cvtpd2ps    xmm0,xmm0 
```

这里发生了什么？为什么 VS2010 使用内部函数，而 VS2012 调用系统库？

针对 x64 平台测试 VS2010 的结果与 VS2012 相似（`/fp:precise`似乎被忽略了）。

我无法访问任何旧版本的 VS，因此无法在这些平台上进行任何测试。

作为参考，我正在使用 Intel i5-m430 处理器在 Windows 7 64 位中进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T12:25:42.903

首先，您应该阅读[这篇](http://www.altdevblogaday.com/2012/03/22/intermediate-floating-point-precision/)关于中间浮点精度的非常好的博客文章。本文仅处理 Visual Studio 生成的代码（但这就是您的问题所在）。现在来看例子：

```
0033185D  cvtss2sd    xmm0,xmm1  
00331861  call        __libm_sse2_sqrt_precise (0333370h)  
00331866  cvtsd2ss    xmm0,xmm0 
```

此汇编代码是`/fp:precise /arch:SSE2`为 x86 平台生成的。根据[文档](http://msdn.microsoft.com/en-us/library/aa289157%28v=vs.71%29.aspx)，精确的浮点模型**在 x86 平台上将**所有计算内部提高了一倍。它还可以防止使用内在函数（我认为您已经阅读[了此信息](http://msdn.microsoft.com/en-us/library/e7s85ffb.aspx)）。因此，代码首先从 float 转换为 double，然后是双精度 sqrt 调用，最后将结果转换回 float。

```
000000013F2B199E  movups      xmm0,xmm1  
000000013F2B19A1  sqrtps      xmm1,xmm1  
000000013F2B19A4  movups      xmmword ptr [rcx+rax],xmm1 
```

第二个例子是为 x64 (amd64) 平台编译的，这个平台的行为完全不同！根据文档：

> 出于性能原因，中间运算是以任一操作数的最宽精度而不是可用的最宽精度计算的。

因此，计算将在内部以单精度完成。我认为他们还决定尽可能使用内在函数，因此在**x64 平台上**`/fp:precise`和之间的差异`/fp:fast`要小一些。新的行为导致更快的代码*，*它使程序员可以更好地控制到底发生了什么（他们能够改变游戏规则，因为兼容性问题对于新的 x64 平台来说不存在问题）。不幸的是，这些更改/差异未在文档中明确说明。

 ***```
00AF14C7  cvtps2pd    xmm0,xmm0  
00AF14CA  sqrtsd      xmm0,xmm0  
00AF14CE  cvtpd2ps    xmm0,xmm0 
```

最后，最后一个示例是使用 Visual Studio 2010 编译器编译的，我认为他们不应该使用 sqrt 的内在函数（至少对于`/fp:precise`模式），但他们决定在 Visual Studio 2012 中更改/修复此行为再次（见[这里](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/ebab293c-0c85-462e-a352-22ff8ee55c36/)）。***

# ios - Twitter Feed 未显示完整的推文

> ID：15779157
> 
> 赞同：0
> 
> 时间：2013-04-03T04:55:50.700
> 
> 标签：ios, xml, xcode, twitter

所以我正在制作一个应用程序，其中一部分在表格视图中显示用户的推文。但是，某些推文会损坏某些内容，例如它仅显示单个字符，例如（“）或表情符号字符。例如，如果推文说：

`RT @jakemillermusic: Everyone upload your pics that you took today during the ustream and caption it "follow @jakemillermusic #jakemiller"`

当与 NSLog 一起显示时，它会打印：

* * *

2013-04-03 00:34:30.476 ParsingXMLTutorial[3308:c07] RT @jakemillermusic：每个人都上传你今天在 ustream 中拍摄的照片并添加标题

2013-04-03 00:34:30.476 ParsingXMLTutorial[3308:c07]”

2013-04-03 00:34:30.477 ParsingXMLTutorial[3308:c07] 关注@jakemillermusic #jakemiller

2013-04-03 00:34:30.478 ParsingXMLTutorial [3308:c07] "

* * *

这是我用来获取 XML 格式的 URL：

[http://api.twitter.com/1/statuses/user_timeline/LexxiSaal.xml?include_entities=true&include_rts=true&screen_name=twitterapi&trim_user=false&contributor_details=true&count=50](http://api.twitter.com/1/statuses/user_timeline/LexxiSaal.xml?include_entities=true&include_rts=true&screen_name=twitterapi&trim_user=false&contributor_details=true&count=50)

* * *

这是解析代码：

```
-(id) loadXMLByURL:(NSString *)urlString
{
    _tweets         = [[NSMutableArray alloc] init];
    NSURL *url      = [NSURL URLWithString:urlString];
    NSData  *data   = [[NSData alloc] initWithContentsOfURL:url];
    parser          = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    //string = [string stringByReplacingOccurrencesOfString:@" " withString:@""];           // space
    string = [string stringByReplacingOccurrencesOfString:@"\n" withString:@""];    // newline
    string = [string stringByReplacingOccurrencesOfString:@"\t" withString:@""];

currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"status"]) 
    {
        currentTweet = [Tweet alloc];
        isStatus = YES;
}
if ([elementname isEqualToString:@"user"]) 
{
    isStatus = NO;
}
}

    - (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName
    {
        if (isStatus) 
        {
            if ([elementname isEqualToString:@"created_at"]) 
            {
                currentTweet.dateCreated = currentNodeContent;
            }
            if ([elementname isEqualToString:@"text"]) 
            {
                currentTweet.content = currentNodeContent;
            }
        }
    if ([elementname isEqualToString:@"status"]) 
    {
        [self.tweets addObject:currentTweet];
        currentTweet = nil;
        currentNodeContent = nil;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:34:10.190

我会建议一些改变如下

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
     NSString *value=[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet];

     if(currentNodeContent == nil){
         currentNodeContent = [[NSMutableString alloc] initWithString:value];
     }else
         [currentNodeContent appendString:value];
} 
```

在**didEnd**

```
- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (isStatus) 
    {
        if ([elementname isEqualToString:@"created_at"]) 
        {
            currentTweet.dateCreated = currentNodeContent;
        }
        if ([elementname isEqualToString:@"text"]) 
        {
            currentTweet.content = currentNodeContent;
        }
    }
    if ([elementname isEqualToString:@"status"]) 
    {
        [self.tweets addObject:currentTweet];
        currentTweet = nil;
        //currentNodeContent = nil; REMOVED
     }

    currentNodeContent = nil; // PUT OUTSIDE
} 
```

问题是您必须在方法 foundCharacters 中附加字符串，因为解析器不会一次返回标签之间的所有字符串..

最后，您应该在全局的 didEnd 方法中将**currentNodeContent设为 nil，因为您也将它用于其他文本。**

希望以上有帮助..

# java - 是什么导致保存的网页呈现与其在线 URL 对应的不同？

> ID：15779158
> 
> 赞同：-1
> 
> 时间：2013-04-03T04:56:04.127
> 
> 标签：java, javascript, jquery, web

例如，使用谷歌浏览器[将此页面](http://www.pse.com.ph/stockMarket/companyInfo.html?id=118&security=137&tab=0)保存为“网页，完成”，然后重新加载本地文件会导致布局损坏，并且缺少许多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:58:04.450

因为存在对本地没有的 JS 和 CSS 文件的依赖。

刚刚检查了以下页面的来源是页面使用的 CSS 文件。您没有此文件，这就是布局看起来失真的原因

```
 <link rel="stylesheet" type="text/css" media="all" href="/styles/pse/theme.css" />
 <link rel="stylesheet" type="text/css" media="print" href="/styles/pse/print.css" />
 <link rel="stylesheet" type="text/css" media="all" href="/styles/pse/lofslider.css" /> 
```

# java - 继承静态方法的概念

> ID：15779160
> 
> 赞同：0
> 
> 时间：2013-04-03T04:56:20.520
> 
> 标签：java

我有 2 个课程如下

```
public class statictest {

public void print()
{
    System.out.println("first one");    
}
  }

public class newer extends statictest
 {

public void print()
{

    System.out.println("second one");

}   
  } 
```

在我做的主要功能中

```
statictest temp = new newer();
newer temp2 = new newer();

temp.print();
temp2.print(); 
```

输出是：

```
second one
second one 
```

但是当我将这两种方法设为静态时，输出是

```
firstone
secondone 
```

在这种情况下，后期绑定发生了什么？谁能解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:58:43.290

`static`方法不能被覆盖，如果在子类中重新定义，它们将保持隐藏状态。

**Ps：**他们确实参与了继承。您可以从子类名称访问静态方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T04:59:15.643

这称为动态方法调用。你可以看看[这个](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.4.4)JLS。它指出，

> 方法查找的策略取决于调用模式。
> 
> 如果调用方式是静态的，则不需要目标引用并且不允许覆盖。类 T 的方法 m 是要调用的方法。
> 
> 否则，将调用实例方法并且存在目标引用。如果目标引用为 null，则此时抛出 NullPointerException。否则，目标引用被称为引用一个目标对象，并将用作被调用方法中关键字 this 的值。然后考虑调用模式的其他四种可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:59:23.653

这是因为静态方法不是***多态***的。静态方法不会被 ***覆盖***。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:05:59.440

搜索`Dynamic method dispatch`

静态方法不能被覆盖，这就是为什么在将其设为静态后你会得到这样的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T05:53:37.623

静态方法不能被覆盖。您使用 statictest 类引用变量 temp2 为较新的类创建了对象，您使用超类引用变量保存该对象。在编译时编译器只检查语法天气该方法在 statictest 类中是否可用。如果它可用，则它符合正常，否则会出现错误。您声明静态打印方法的代码，因此它在 statictest 类中可用，编译完成得很好但你的方法是静态的，它不能被覆盖。现在来的主要方法你声明了 **statictest temp = new newer();** 现在临时对象仅使用 statictest 类功能创建。它不会包含较新的类方法或变量对象是基于引用的类属性创建的，如果超类（静态测试）包含与子类（较新类）相同的任何非静态值，则它不会包含子类属性（较新类）只是它将覆盖超类属性。为什么它会覆盖？因为对于该类，它不允许声明相同的变量或相同的方法

# python - Python：正则表达式使用 re.search

> ID：15779161
> 
> 赞同：2
> 
> 时间：2013-04-03T04:56:20.707
> 
> 标签：python, regex, csv, file-io

我正在迭代具有许多 csv 文件的目录结构，我只对该目录中的一些 csv 文件感兴趣：

```
 if os.path.exists(lang_dir):
        dirs = os.listdir(lang_dir)
        for filename in dirs:
            if re.search(r'-.+-template-users-data.csv$',filename): 
```

但由于某种原因文件名`zu-en-template-users-data.csv`无法识别，我感觉`u`文件名中的字母与此有关。只是为了仔细检查上面的代码段，我直接进入文件夹并使用 python 解释器进行了尝试，并且使用 python 解释器文件确实得到了正确识别。

```
>>> import re
>>> import os
>>> dirs = os.listdir("PATH_FOR_THE_DIR/Data/2013_03_06_20_34/zu")
>>> for item in dirs:
...     if re.search(r'-.+-template-users-data.csv$',item):
...             print item
... 
zu-ab-template-users-data.csv
zu-ace-template-users-data.csv
zu-af-template-users-data.csv
zu-ak-template-users-data.csv
zu-als-template-users-data.csv
... 
```

如您所见，所有以开头的文件都`zu`显示出来了。这意味着我的正则表达式代码段是正确的吗？（据我了解）

这是我的代码：

```
def templateUserCountStats(root_dir_path, lang_code_file_path):
    #dictionary to hold the template count data structure
    template_count_dict = dict()
    # getting lang codes from csv file
    for lang in getLanguageCodes(lang_code_file_path):
        # root level key of the dictionary
        template_count_dict[lang] = dict()
        lang_dir = os.path.join(root_dir_path, lang)
        # get all the files as s list in lang dir
        if os.path.exists(lang_dir):
            dirs = os.listdir(lang_dir)
            for filename in dirs:
                if re.search(r'-.+-template-users-data.csv$',filename):
                    lang2 = filename.split("-")[1]
                    #path = os.path.join(lang_dir, filename)
                    path = os.path.expanduser(lang_dir + '/' + filename)
                    #with open(path, 'rb') as template_user_data_file:
                    try:
                        template_user_data_file = open(path, 'r')
                        try:
                            csv_file_reader = csv.reader(template_user_data_file)
                            csv_file_reader.next()
                            # initializing user count for each language
                            template_count_dict[lang][lang2] = dict()
                            template_count_dict[lang][lang2]['level1'] = 0
                            template_count_dict[lang][lang2]['level2'] = 0
                            template_count_dict[lang][lang2]['level3'] = 0
                            template_count_dict[lang][lang2]['level4'] = 0
                            template_count_dict[lang][lang2]['level5'] = 0
                            template_count_dict[lang][lang2]['levelN'] = 0
                            #print filename
                            for row in csv_file_reader:
                                if row[0] == '1':
                                    template_count_dict[lang][lang2]['level1'] = template_count_dict[lang][lang2]['level1'] + 1
                                if row[0] == '2':
                                    template_count_dict[lang][lang2]['level2'] = template_count_dict[lang][lang2]['level2'] + 1
                                if row[0] == '3':
                                    template_count_dict[lang][lang2]['level3'] = template_count_dict[lang][lang2]['level3'] + 1
                                if row[0] == '4':
                                    template_count_dict[lang][lang2]['level4'] = template_count_dict[lang][lang2]['level4'] + 1
                                if row[0] == '5':
                                    template_count_dict[lang][lang2]['level5'] = template_count_dict[lang][lang2]['level5'] + 1
                                if row[0] == 'N':
                                    template_count_dict[lang][lang2]['levelN'] = template_count_dict[lang][lang2]['levelN'] + 1
                        except csv.Error, e:
                            print e
                    except Exception, e:
                        print e
                        logging.error(e)
            else:
                print "path doesn't exist"
    return template_count_dict 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:08:16.763

> 这是因为正则表达式如何将 u 解释为模式...？

不，这不可能是原因。

```
>>> bool(re.search(r'-.+-template-users-data.csv$', 'zu-en-template-users-data.csv'))
True 
```

您的 re 模式应该可以工作，问题出在其他地方。

# asp.net-mvc - 如何在 mvc razor 中将自定义 html 助手扩展方法与模型绑定？

> ID：15779163
> 
> 赞同：1
> 
> 时间：2013-04-03T04:56:29.513
> 
> 标签：asp.net-mvc, razor, html-helper

我已经为出生日期做了一个扩展方法。这种扩展方法有三个下拉列表（一个代表日，一个代表月，最后一个代表年）。由于此控件可以在不同的视图上使用，那么将它与不同模型绑定的最佳方法是什么？我在模型中有一个 DOB 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:26:17.473

我建议按照[此处](https://stackoverflow.com/questions/2186969/custom-model-binder-for-a-property)所述实现自定义模型绑定器和绑定属性。

# php - 使用 Yii CMemCache 时忽略服务器关闭错误消息

> ID：15779167
> 
> 赞同：0
> 
> 时间：2013-04-03T04:56:47.630
> 
> 标签：php, yii, memcached, yii-components

我已启用 yii memcached，当专用 memcached 服务器关闭时如何忽略此错误。

> MemcachePool::get(): Server 192.168.1.200 (tcp 11211, udp 0) failed with: 由于目标机器主动拒绝，无法建立连接。(10061)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:53:25.023

你可以：

1.  将[CMemCache](http://www.yiiframework.com/doc/api/1.1/CMemCache)扩展为您自己的缓存组件
2.  如果不存在连接或连接不活动，则覆盖 getter 和 setter 以返回 false，否则调用 parent:: 等效方法（传递任何必要的参数）
3.  配置应用程序组件缓存以使用您新扩展的 CMemCache 版本

# hadoop - Hadoop数据局部性，反直觉观察

> ID：15779169
> 
> 赞同：2
> 
> 时间：2013-04-03T04:56:49.553
> 
> 标签：hadoop, emr

谁能帮助我理解以下与我对 Hadoop 数据局部性的理解相反的观察。

具有 3 个节点的 Hadoop 集群：

主人：10.28.75.146

从站1：10.157.6.202

从机2：10.31.130.224

成功运行任务。从作业控制台：

```
Task Attempts:attempt_201304030122_0003_m_000000_0
Machine: /default-rack/10.31.130.224<p>
Task log: INFO: consuming hdfs://10.28.75.146:9000/input/22.seq 
```

我们知道 224 节点正在处理 /input/22.seq 数据。通过命令：

```
$hadoop fsck /input -files -blocks  -locations |grep -A 1 "22.seq"
/input/22.seq 61731242 bytes, 1 block(s):  OK
0\. blk_-8703092405392537739_1175 len=61731242 repl=1 [10.157.6.202:9200] 
```

22.seq 适合一个小于默认 HDFS 块大小 (64MB) 的块，并且不会复制到其他节点。

问题：既然22.seq不是224节点本地的，为什么Hadoop分配224节点在202上远程处理数据？

注意：这也不例外。我注意到许多数据文件是远程获取的，并且在两个节点的 eth0 上观察到巨大的网络流量。我期望两个节点之间的流量接近于零，因为我所有的数据文件都小于 64MB，并且数据应该在本地处理。

仅供参考：这是在亚马逊的 AWS EMR 上观察到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:12:15.727

我不确定这是否会完全回答您的问题，但我会尝试发光。

你上面遇到的网络流量，可能是受到了mapreduce框架提交作业的流程的影响；默认情况下，其中一部分传输您的作业 jar 的 10 个副本以及其中包含的所有库在集群中（在像您这样没有 10 个节点的情况下，我不确定它会如何表现）：有热跳动并获取输入拆分信息和报告进度，这似乎是小带宽操作，尽管我不知道他们的网络资源消耗的细节。

关于您正在运行的作业：如果它是仅映射作业，则 Hadoop 尝试（尝试因为可能在数据本地节点上运行的资源限制因素）进行数据局部性优化并运行输入拆分所在的作业。听起来在您的情况下，该文件小于默认的 64MB，因此 1 拆分应该等于您的数据，这反过来应该导致一张地图，因为地图的数量与您拥有的拆分数量成正比，但是如果您的工作是一个 Map 和 Reduce 作业，那么网络流量可能会占用一些 reduce 复制和排序阶段 HTTP 网络流量，这些流量最终可能会出现在不同的节点上。

**N 个输入拆分 = N 个映射 --output--> M 个分区 = M 个 Reducer**

当然，网络流量和数据局部性优化取决于节点资源的可用性，因此您的测试假设应该考虑到这一点。

希望我有点帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:40:44.470

简短的回答 - 因为 Hadoop 调度程序很烂。它没有关于文件拆分应该去哪里的预先全球计划。当节点要求工作时 - 它会查看可用的拆分 - 并给出最佳匹配。有一些参数可以调整 Hadoop 在寻找最佳匹配方面的积极性（即 - 当工作请求到达时 - 它是否提供当时可用的最佳匹配？还是等待某个时间看看是否有其他更好的匹配节点也发送请求？）

默认情况下（我很确定 EMR 就是这种情况）——调度程序总是会将一些工作返还给请求节点——如果有*任何*可用的工作。您可以看到，如果您的输入很小（仅跨越几个块/节点），但节点数量较大（相比之下） - 那么您将获得非常差的局部性。另一方面——如果输入的大小很大——那么你获得良好位置的几率就会增加很多。

FairScheduler 具有延迟调度的参数 - 以获得更好的局部性。但是我不认为这是 EMR 的默认调度程序。

# php - 如何在 PHP 中正确生成 WSSE 密码摘要

> ID：15779170
> 
> 赞同：1
> 
> 时间：2013-04-03T04:56:51.627
> 
> 标签：php, symfony, base64, sha1, wsse

我正在考虑在 Symfony2 中构建一个 REST API，在他们的[自定义身份验证提供程序](http://symfony.com/doc/master/cookbook/security/custom_authentication_provider.html)中，他们展示了如何构建一个 WSSE 身份验证系统，这对于我需要做的事情应该没问题。我将从通过 cURL 构建和测试 API 开始，因此我需要能够快速生成标头。我找到了一个[JS 生成器](http://www.teria.com/~koseki/tools/wssegen/)，它显示了我需要的标题。

根据我的阅读，密码摘要应该是一个 base64 编码的随机数、时间戳和用户密码按该顺序连接在一起的 SHA1。我从以下数据开始：

```
$nonce = '4c5625ec7af5bdff';
$timestamp = '2013-04-03T04:46:19Z';
$password = 'mypass'; 
```

并生成摘要：

```
$digest = base64_encode(sha1($nonce.$timestamp.$password)); 
```

我不明白的是该`$digest`变量现在设置为`YTgxMDUzOWQzMDBiZmU1MmI2NWQ0YjYwNDc3ZmY5OWI3MmVlZTQyNA==`，但来自 JS 生成器的示例 PasswordDigest 出现为`qBBTnTAL/lK2XUtgR3/5m3Lu5CQ=`. 我一定是在某处遗漏了一步，但我不确定它是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:04:23.183

看起来我需要使用二进制 SHA1 结果，而不是十六进制表示。我的摘要应该是这样的：

```
$digest = base64_encode(sha1($nonce.$timestamp.$password, true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T11:42:51.723

我知道这是一篇旧文章，刚刚翻阅了这篇文章，最近我在 symfony2 中开发了带有 WSSE 身份验证的 API，这就是我在以下函数的帮助下生成完整 WSSE 标头的方式：

```
public static function getWsseHeader($username, $apikey, $created, $nonce)
    {

        $digest = sha1($nonce.$created.$apikey, true);

        return sprintf(
            'X-WSSE: UsernameToken Username="%s", PasswordDigest="%s", Nonce="%s", Created="%s"',
            $username,
            base64_encode($digest),
            base64_encode($nonce),
            $created
        );
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-07T07:45:00.657

```
//you can use this php code to generate the Digest password
<?php
date_default_timezone_set('UTC');
$t = microtime(true);
$micro = sprintf("%03d",($t - floor($t)) * 1000);
$date = new DateTime( date('Y-m-d H:i:s.'.$micro) );
echo $timestamp = $date->format("Y-m-d\TH:i:s").$micro . 'Z';
$nonce = mt_rand(10000000, 99999999);
echo $nounce = base64_encode($nonce);//we have to decode the nonce and then apply the formula on it and in xml we have to send the encoded nonce
$password = "AMADEUS"; //clear password
echo $passSHA = base64_encode(sha1($nonce . $timestamp . sha1($password, true), true));   
?> 
```

# javascript - 我想在弹出窗口中显示一些数据（弹出窗口不应该是 ajax 控件）。我试图通过在网格中放置一个网格来做到这一点

> ID：15779173
> 
> 赞同：1
> 
> 时间：2013-04-03T04:57:16.327
> 
> 标签：javascript, jquery, asp.net, c#-4.0

我有一个gridview，我想在弹出窗口中显示一些数据（弹出窗口不应该是ajax控件）。我试图通过在gridview中放置一个gridview来做到这一点，例如：

```
<asp:GridView ID="grdInspectionApprovel" runat="server" Width="99%" EmptyDataText="<%$ Resources:Captions,grdEmptyPeriods%>"
    AutoGenerateColumns="False" ShowFooter="true" Style="margin-bottom: 1px" CssClass="grdviewbrd"
    OnRowDataBound="grdInspectionApprovel_RowDataBound" OnRowCommand="grdInspectionApprovel_RowCommand"
    OnRowCreated="grdInspectionApprovel_RowCreated" OnRowEditing="grdInspectionApprovel_RowEditing">
    <RowStyle CssClass="RowStyle" />
    <EmptyDataRowStyle CssClass="emptyRow1" />
    <PagerSettings Visible="false" />
    <AlternatingRowStyle CssClass="AtlernatingRowStyle" />
    <Columns>
        <asp:TemplateField HeaderText="POPUP" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <div id="simplediv" style="background-color: White; border: 1px solid black; display: none;
                    width: 70%; height: 200px;">
                    <table width="100%">
                        <tr>
                            <td align="right">
                                <input type="image" src="~/App_Themes/MyWebTheme/images/imgError.gif" id="imageButton"
                                    onclick="Popup.hide('simplediv');return false;" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <asp:GridView ID="grdInspectionApprovelPOPUP" runat="server" Width="98%" EmptyDataText="<%$ Resources:Captions,grdEmptyPeriods%>"
                                    AutoGenerateColumns="False" ShowFooter="true" Style="margin-bottom: 1px" CssClass="grdviewbrd">
                                    <RowStyle CssClass="RowStyle" />
                                    <EmptyDataRowStyle CssClass="emptyRow1" />
                                    <PagerSettings Visible="false" />
                                    <AlternatingRowStyle CssClass="AtlernatingRowStyle" />
                                    <Columns>
                                        <asp:TemplateField HeaderText="<%$ Resources:Captions,lblSupplierSINo%>" ItemStyle-HorizontalAlign="Left">
                                            <ItemTemplate>
                                                <asp:TextBox ID="txtSupplierSINo" runat="server" Text='<%# Eval("SupplierSerialNo") %>'
                                                    Width="150px"></asp:TextBox>
                                                <headerstyle cssclass="gridtophead" />
                                                <itemstyle horizontalalign="Center"></itemstyle>
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                    </Columns>
                                    <HeaderStyle CssClass="grid_title" />
                                </asp:GridView>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <asp:ImageButton runat="server" ID="deletebtn1" CommandName="btnSave" ImageUrl="<%$ Resources:Paths,imgBtnSave%>" />
                                <asp:LinkButton runat="server" ID="deletebtn" CommandName="btnSave" Text="Save"></asp:LinkButton>
                                <asp:Button ID="Button1" runat="server" Text="<%$ Resources:Captions,btnReset%>"
                                    CssClass="btnStyle" />
                            </td>
                        </tr>
                    </table>
                </div>
                <a href="#" onclick="Popup.show('simplediv');return false;">+</a>
                <asp:LinkButton runat="server" ID="linkbtnPopup" CommandName="callPopup" Text="++"
                    CommandArgument='<%# Eval("WOID")  %>'></asp:LinkButton>
            </ItemTemplate>
            <FooterStyle HorizontalAlign="Center"></FooterStyle>
            <HeaderStyle CssClass="gridtophead" />
            <ItemStyle HorizontalAlign="Right" Width="2%"></ItemStyle>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="<%$ Resources:Captions,lblSrNo%>" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:Label ID="lblWO" Text='<%# Eval("WOID") %>' runat="server" Style="display: none;"></asp:Label>
                <asp:Label ID="lblAssetID" Text='<%# Eval("AssetID") %>' runat="server" Style="display: none;"></asp:Label>
                <%#(Convert.ToInt32(hfPageIndex.Value) * grdInspectionApprovel.PageSize) + Container.DataItemIndex + 1%>
            </ItemTemplate>
            <FooterStyle HorizontalAlign="Center"></FooterStyle>
            <HeaderStyle CssClass="gridtophead" />
            <ItemStyle HorizontalAlign="Right" Width="2%"></ItemStyle>
        </asp:TemplateField>
    </Columns>
    <HeaderStyle CssClass="grid_title" />
</asp:GridView> 
```

`Popup.show('simplediv')`这个函数来自javascript文件。我想在父gridview的每个rowCommand上绑定chield gridview，并希望在弹出div上显示这个gridview。

# php - 修剪不删除结束换行符？

> ID：15779175
> 
> 赞同：3
> 
> 时间：2013-04-03T04:57:27.867
> 
> 标签：php

这应该是相当简单的。假设我有以下代码：

```
$output = file_get_contents($random_name . ".txt");
echo "<pre>";
echo str_replace("\n", "\nN ", $output);
echo "</pre>"; 
```

`$output`看起来像这样：

```
PDF Test File
N Congratulations, your computer is equipped with a PDF (Portable Document Format)
N reader! You should be able to view any of the PDF documents and forms available on
N our site. PDF forms are indicated by these icons:
N or.
N 
N 
```

假设我想通过以下方式摆脱最后两个换行符：

```
$outputTrimmed = trim($output, "\n"); 
```

我会假设，这将输出：

```
PDF Test File
N Congratulations, your computer is equipped with a PDF (Portable Document Format)
N reader! You should be able to view any of the PDF documents and forms available on
N our site. PDF forms are indicated by these icons:
N or. 
```

但相反，这段代码：

```
$output = file_get_contents($random_name . ".txt");
$outputTrimmed = trim($output, "\n");
echo "<pre>";
echo str_replace("\n", "\nN ", $outputTrimmed);
echo "</pre>"; 
```

结果是：

```
PDF Test File
N Congratulations, your computer is equipped with a PDF (Portable Document Format)
N reader! You should be able to view any of the PDF documents and forms available on
N our site. PDF forms are indicated by these icons:
N or.
N 
N 
```

我究竟做错了什么？这可能是*非常**非常*简单的事情......所以我道歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T05:00:45.503

您可能正在使用 Windows End-of-line 样式。

这是`\r\n`，不只是`\n`。

尝试更换两者。

或者，不要指定任何字符列表（第二个参数）。通过指定`\n`你说**只有**修剪`\n`

`trim($output)`

请参阅此处的文档：http: [//www.w3schools.com/php/func_string_trim.asp#gsc.tab=0](http://www.w3schools.com/php/func_string_trim.asp#gsc.tab=0)

* * *

**编辑（来自您的评论）：**

如果 trim() 不起作用，请尝试将您的字符串更改为字节数组并***准确***检查字符串末尾的字符。这让我怀疑还有其他一些不可打印的字符干扰。

```
$byteArray = unpack('C*', $output);
var_dump($byteArray); 
```

[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:10:05.550

试试这个

```
 $output1 = file_get_contents($random_name . ".txt");
   $output=str_replace("\n", "\nN ", $output1);
   $outputTrimmed = trim($output,"\n");
   echo "<pre>";
   echo $outputTrimmed;
   echo "<pre>"; 
```

输出

```
 PDF Test File
  N  Congratulations, your computer is equipped with a PDF (Portable Document Format)
  N  reader! You should be able to view any of the PDF documents and forms available on    
  N  our site. PDF forms are indicated by these icons:
  N or . 
```

# jquery - jQuery 使用 animate() 为 div 的高度设置动画以隐藏/显示里面的内容

> ID：15779180
> 
> 赞同：0
> 
> 时间：2013-04-03T04:57:45.917
> 
> 标签：jquery, jquery-animate, slidedown, slideup

我正在尝试为 div 的高度设置动画以隐藏或显示其中的内容。使用 animate() 是获取我想要的动画的最方便的方法，因为您可以指定一个高度来为其设置动画。但是，我试图获得使用 slideUp() 或 slideDown() 的功能。当使用 animate() 作为高度时，div id 内的内容会根据您是缩小还是扩大高度而向上或向下推...这不是我想要的。我希望 div 向上滑动并隐藏里面的内容或向下滑动并显示它（几乎就像车库门打开或关闭并显示或隐藏里面的内容一样，不会以任何方式影响它，就好像它有一个固定的位置一样） . 有没有一种干净的方法可以做到这一点？我会继续使用 slideUp() 和 slideDown() 但我需要能够指定要增长到的高度和要停止的高度。任何帮助表示赞赏。

**这是一个完整的工作示例的小提琴：http:** [//jsfiddle.net/8XRqg/](http://jsfiddle.net/8XRqg/)

这是我试图用 jQuery 做的一个版本。我完全按照它的功能需要它，只是我**不**希望内容受到 div 缩小的影响。此外，我现在在顶部和底部之间切换时内容淡出。一旦功能是我想要的，我想摆脱它。

```
 $(document).ready(function() 
    {
        var top = $("#top");
        var bottom = $("#bottom");
        var image = $(".image");
        var content = $(".content");
        var topOpen = false;
        var bottomOpen = false;

        content.hide();

        top.click(function()
        {
            if(topOpen == false)
            {   
                var thisContent = $(this).children(".content");
                topOpen = true;
                bottomOpen = false;
                content.fadeOut(250);
                thisContent.css({ marginTop : (thisContent.height()/2) * -1 });

                image.fadeOut("fast", function()
                {
                    thisContent.delay(500).fadeIn(250);
                    top.animate({ height : 190 });
                    bottom.animate({ height : 10 });
                });
            }
        });

        bottom.click(function()
        {   
            if(bottomOpen == false)
            {
                var thisContent = $(this).children(".content");
                bottomOpen = true;
                topOpen = false;
                content.fadeOut(250);
                thisContent.css({ marginTop : (thisContent.height()/2) * -1 });

                image.fadeOut("fast", function()
                {   
                    thisContent.delay(500).fadeIn(250);
                    bottom.animate({ height : 190 });
                    top.animate({ height : 10 });
                });
            }
        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:06:06.767

请参考以下网址寻求帮助。我觉得你正在寻找这样的东西。

[http://jqueryui.com/accordion/#default](http://jqueryui.com/accordion/#default)

# makefile - 在 OSX 10.8.3 中使用 X11：“ld: library not found for -lX11”

> ID：15779181
> 
> 赞同：5
> 
> 时间：2013-04-03T04:57:46.620
> 
> 标签：makefile, x11

我有以下生成文件：

```
PROG    = draw
CFLAGS  = -w -s -O2 -ansi -DSHM
XLIBS   = -lX11 -lXext -lXmu -lXext -lXmu -lXt -lXi -lSM -lICE
LIBS    = -framework OpenGL
INCLS   = -I/usr/X11R/include -I/share/mesa/include
LIBDIR  = -L/usr/X11/lib -L/usr/X11R6/lib
#source codes
SRCS = draw_main.cpp $(PROG).cpp
#substitute .cpp by .o to obtain object filenames
OBJS = $(SRCS:.cpp=.o)

#$< evaluates to the target's dependencies,
#$@ evaluates to the target

$(PROG): $(OBJS)
    g++ -o $@ $(OBJS)  $(LIBDIR) $(LIBS) $(XLIBS)

$(OBJS):
    g++ -c  $*.cpp $(INCLS)

clean:
    rm $(OBJS) 
```

每次我尝试运行它时，都会出现以下错误：

```
ld: library not found for -lX11
collect2: ld returned 1 exit status 
```

有人可以帮我找出 X11 的库应该在 OSX 10.8.3 中的位置吗？对我来说，这看起来是正确的。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T21:10:07.837

您是否按照此处的建议安装了 XQuartz：http: [//support.apple.com/kb/HT5293](http://support.apple.com/kb/HT5293)？

默认情况下，Mountain Lion 上没有 X11。

# c++ - 如何在 Linux 架构上即时列出 C 代码中可用的所有函数/符号？

> ID：15779185
> 
> 赞同：25
> 
> 时间：2013-04-03T04:58:15.447
> 
> 标签：c++, c, linux, symbols, elf

假设`main.c`使用来自共享库的符号和在`main.c`.

有没有一种优雅而优雅的方式在运行时打印所有可用函数名称和符号的列表？

这应该是可能的，因为数据已加载到`.code`段中。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-06-03T12:50:03.573

由于我同样需要在运行时检索所有加载的符号名称，因此我根据 R.. 的回答做了一些研究。所以这里有一个 ELF 格式的 linux 共享库的详细解决方案，它适用于我的 gcc 4.3.4，但希望也适用于较新的版本。

我主要使用以下资源来开发此解决方案：

*   [ELF 手册页](http://linux.die.net/man/5/elf)
*   [一些示例代码](http://linuxgazette.net/85/misc/sandeep/Ptrace.c.txt)（在搜索“dl_iterate_phdr”时找到）

这是我的代码。我使用自我解释变量名称并添加了详细的注释以使其易于理解。如果有什么错误或遗漏，请告诉我......（编辑：我刚刚意识到问题是针对 C 的，而我的代码是针对 C++ 的。但是如果您省略了向量和字符串，它也应该适用于 C )

```
#include <link.h>
#include <string>
#include <vector>

using namespace std;

/* Callback for dl_iterate_phdr.
 * Is called by dl_iterate_phdr for every loaded shared lib until something
 * else than 0 is returned by one call of this function.
 */
int retrieve_symbolnames(struct dl_phdr_info* info, size_t info_size, void* symbol_names_vector) 
{

    /* ElfW is a macro that creates proper typenames for the used system architecture
     * (e.g. on a 32 bit system, ElfW(Dyn*) becomes "Elf32_Dyn*") */
    ElfW(Dyn*) dyn;
    ElfW(Sym*) sym;
    ElfW(Word*) hash;

    char* strtab = 0;
    char* sym_name = 0;
    ElfW(Word) sym_cnt = 0;

    /* the void pointer (3rd argument) should be a pointer to a vector<string>
     * in this example -> cast it to make it usable */
    vector<string>* symbol_names = reinterpret_cast<vector<string>*>(symbol_names_vector);

    /* Iterate over all headers of the current shared lib
     * (first call is for the executable itself) */
    for (size_t header_index = 0; header_index < info->dlpi_phnum; header_index++)
    {

        /* Further processing is only needed if the dynamic section is reached */
        if (info->dlpi_phdr[header_index].p_type == PT_DYNAMIC)
        {

            /* Get a pointer to the first entry of the dynamic section.
             * It's address is the shared lib's address + the virtual address */
            dyn = (ElfW(Dyn)*)(info->dlpi_addr +  info->dlpi_phdr[header_index].p_vaddr);

            /* Iterate over all entries of the dynamic section until the
             * end of the symbol table is reached. This is indicated by
             * an entry with d_tag == DT_NULL.
             *
             * Only the following entries need to be processed to find the
             * symbol names:
             *  - DT_HASH   -> second word of the hash is the number of symbols
             *  - DT_STRTAB -> pointer to the beginning of a string table that
             *                 contains the symbol names
             *  - DT_SYMTAB -> pointer to the beginning of the symbols table
             */
            while(dyn->d_tag != DT_NULL)
            {
                if (dyn->d_tag == DT_HASH)
                {
                    /* Get a pointer to the hash */
                    hash = (ElfW(Word*))dyn->d_un.d_ptr;

                    /* The 2nd word is the number of symbols */
                    sym_cnt = hash[1];

                }
                else if (dyn->d_tag == DT_STRTAB)
                {
                    /* Get the pointer to the string table */
                    strtab = (char*)dyn->d_un.d_ptr;
                }
                else if (dyn->d_tag == DT_SYMTAB)
                {
                    /* Get the pointer to the first entry of the symbol table */
                    sym = (ElfW(Sym*))dyn->d_un.d_ptr;

                    /* Iterate over the symbol table */
                    for (ElfW(Word) sym_index = 0; sym_index < sym_cnt; sym_index++)
                    {
                        /* get the name of the i-th symbol.
                         * This is located at the address of st_name
                         * relative to the beginning of the string table. */
                        sym_name = &strtab[sym[sym_index].st_name];

                        symbol_names->push_back(string(sym_name));
                    }
                }

                /* move pointer to the next entry */
                dyn++;
            }
        }
    }

    /* Returning something != 0 stops further iterations,
     * since only the first entry, which is the executable itself, is needed
     * 1 is returned after processing the first entry.
     *
     * If the symbols of all loaded dynamic libs shall be found,
     * the return value has to be changed to 0.
     */
    return 1;

}

int main()
{
    vector<string> symbolNames;
    dl_iterate_phdr(retrieve_symbolnames, &symbolNames);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-03T05:10:00.843

在动态链接的基于 ELF 的系统上，您可能有一个`dl_iterate_phdr`可用的功能。如果是这样，它可用于收集有关每个加载的共享库文件的信息，并且您获得的信息足以检查符号表。该过程基本上是：

1.  `dl_phdr_info`从传回给您的结构中获取程序头的地址。
2.  使用`PT_DYNAMIC`程序头找到`_DYNAMIC`模块的表。
3.  使用`DT_SYMTAB`、`DT_STRTAB`和`DT_HASH`的条目`_DYNAMIC`来查找符号列表。`DT_HASH`只需要获取符号表的长度，因为它似乎没有存储在其他任何地方。

你需要的类型应该都在`<elf.h>`and中`<link.h>`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-03T05:50:52.427

这不是 C 特定的，而是操作系统和二进制格式以及（用于调试符号和未损坏的 C++ 符号名称）甚至编译器特定的问题。没有通用的方法，也没有真正优雅的方法。

最便携和面向未来的方式可能是运行外部程序，例如[`nm`](http://www.unix.com/man-page/POSIX/1posix/nm/)POSIX 中的 。[Linux 中的GNU 版本](http://linux.die.net/man/1/nm)可能有很多扩展，如果你的目标是可移植性和面向未来，你应该避免这些扩展。

它的输出应该保持稳定，即使二进制格式发生变化，它也会得到更新并继续工作。只需使用正确的开关运行它，捕获它的输出（可能通过运行它[`popen`](http://linux.die.net/man/3/popen)以避免临时文件）并解析它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-18T16:50:06.887

我从 Kanalpiroge 的答案中更新了代码，因此它也适用于 DT_HASH 丢失的情况（例如，RHEL）。它适用于 64 位，但修改它以支持 32 位也相对容易。灵感来自这里：[https](https://chromium-review.googlesource.com/c/crashpad/crashpad/+/876879/18/snapshot/elf/elf_image_reader.cc#b512) ://chromium-review.googlesource.com/c/crashpad/crashpad/+/876879/18/snapshot/elf/elf_image_reader.cc#b512 。

```
#include <link.h>
#include <string>
#include <vector>

using namespace std;

static uint32_t GetNumberOfSymbolsFromGnuHash(Elf64_Addr gnuHashAddress)
{
    // See https://flapenguin.me/2017/05/10/elf-lookup-dt-gnu-hash/ and
    // https://sourceware.org/ml/binutils/2006-10/msg00377.html
    typedef struct
    {
        uint32_t nbuckets;
        uint32_t symoffset;
        uint32_t bloom_size;
        uint32_t bloom_shift;
    } Header;

    Header* header = (Header*)gnuHashAddress;
    const void* bucketsAddress = (void*)gnuHashAddress + sizeof(Header) + (sizeof(uint64_t) * header->bloom_size);

    // Locate the chain that handles the largest index bucket.
    uint32_t lastSymbol = 0;
    uint32_t* bucketAddress = (uint32_t*)bucketsAddress;
    for (uint32_t i = 0; i < header->nbuckets; ++i)
    {
        uint32_t bucket = *bucketAddress;
        if (lastSymbol < bucket)
        {
            lastSymbol = bucket;
        }
        bucketAddress++;
    }

    if (lastSymbol < header->symoffset)
    {
        return header->symoffset;
    }

    // Walk the bucket's chain to add the chain length to the total.
    const void* chainBaseAddress = bucketsAddress + (sizeof(uint32_t) * header->nbuckets);
    for (;;)
    {
        uint32_t* chainEntry = (uint32_t*)(chainBaseAddress + (lastSymbol - header->symoffset) * sizeof(uint32_t));
        lastSymbol++;

        // If the low bit is set, this entry is the end of the chain.
        if (*chainEntry & 1)
        {
            break;
        }
    }

    return lastSymbol;
}

/* Callback for dl_iterate_phdr.
 * Is called by dl_iterate_phdr for every loaded shared lib until something
 * else than 0 is returned by one call of this function.
 */
int retrieve_symbolnames(struct dl_phdr_info* info, size_t info_size, void* symbol_names_vector) 
{

    /* ElfW is a macro that creates proper typenames for the used system architecture
     * (e.g. on a 32 bit system, ElfW(Dyn*) becomes "Elf32_Dyn*") */
    ElfW(Dyn*) dyn;
    ElfW(Sym*) sym;
    ElfW(Word*) hash;

    char* strtab = 0;
    char* sym_name = 0;
    ElfW(Word) sym_cnt = 0;

    /* the void pointer (3rd argument) should be a pointer to a vector<string>
     * in this example -> cast it to make it usable */
    vector<string>* symbol_names = reinterpret_cast<vector<string>*>(symbol_names_vector);

    /* Iterate over all headers of the current shared lib
     * (first call is for the executable itself) */
    for (size_t header_index = 0; header_index < info->dlpi_phnum; header_index++)
    {

        /* Further processing is only needed if the dynamic section is reached */
        if (info->dlpi_phdr[header_index].p_type == PT_DYNAMIC)
        {

            /* Get a pointer to the first entry of the dynamic section.
             * It's address is the shared lib's address + the virtual address */
            dyn = (ElfW(Dyn)*)(info->dlpi_addr +  info->dlpi_phdr[header_index].p_vaddr);

            /* Iterate over all entries of the dynamic section until the
             * end of the symbol table is reached. This is indicated by
             * an entry with d_tag == DT_NULL.
             *
             * Only the following entries need to be processed to find the
             * symbol names:
             *  - DT_HASH   -> second word of the hash is the number of symbols
             *  - DT_STRTAB -> pointer to the beginning of a string table that
             *                 contains the symbol names
             *  - DT_SYMTAB -> pointer to the beginning of the symbols table
             */
            while(dyn->d_tag != DT_NULL)
            {
                if (dyn->d_tag == DT_HASH)
                {
                    /* Get a pointer to the hash */
                    hash = (ElfW(Word*))dyn->d_un.d_ptr;

                    /* The 2nd word is the number of symbols */
                    sym_cnt = hash[1];

                }
                else if (dyn->d_tag == DT_GNU_HASH && sym_cnt == 0)
                {
                    sym_cnt = GetNumberOfSymbolsFromGnuHash(dyn->d_un.d_ptr);
                }
                else if (dyn->d_tag == DT_STRTAB)
                {
                    /* Get the pointer to the string table */
                    strtab = (char*)dyn->d_un.d_ptr;
                }
                else if (dyn->d_tag == DT_SYMTAB)
                {
                    /* Get the pointer to the first entry of the symbol table */
                    sym = (ElfW(Sym*))dyn->d_un.d_ptr;

                    /* Iterate over the symbol table */
                    for (ElfW(Word) sym_index = 0; sym_index < sym_cnt; sym_index++)
                    {
                        /* get the name of the i-th symbol.
                         * This is located at the address of st_name
                         * relative to the beginning of the string table. */
                        sym_name = &strtab[sym[sym_index].st_name];

                        symbol_names->push_back(string(sym_name));
                    }
                }

                /* move pointer to the next entry */
                dyn++;
            }
        }
    }

    /* Returning something != 0 stops further iterations,
     * since only the first entry, which is the executable itself, is needed
     * 1 is returned after processing the first entry.
     *
     * If the symbols of all loaded dynamic libs shall be found,
     * the return value has to be changed to 0.
     */
    return 1;

}

int main()
{
    vector<string> symbolNames;
    dl_iterate_phdr(retrieve_symbolnames, &symbolNames);

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-18T04:21:00.847

它应该是`dl_iterate_phdr(retrieve_symbolnames, &symbolNames);`

# windows-phone-8 - 我们可以在 xaml 中使用带有滚动的“Textarea”标签吗？

> ID：15779186
> 
> 赞同：3
> 
> 时间：2013-04-03T04:58:19.643
> 
> 标签：windows-phone-8

```
<ScrollViewer Height="239" VerticalScrollBarVisibility="Auto">
<toolkit:PhoneTextBox x:Name="newcTextBox" AcceptsReturn="True"  TextWrapping="Wrap"/>
</ScrollViewer> 
```

使用该代码 phonetextbox 是滚动*但是*当滚动查看器高度**溢出**时。文本被隐藏，scrollviewer 正在**“向上滚动”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T21:39:07.560

查看 Uday0119[对此答案](https://stackoverflow.com/a/5577085/182344)的评论。

此评论格式不正确，因此在下面我从我的解决方案中复制代码。

XAML 代码：

```
<ScrollViewer
  x:Name="scrollViewer"
  Height="200"
  VerticalScrollBarVisibility="Auto">
  <toolkit:PhoneTextBox
    x:Name="phoneTextBox"
    AcceptsReturn="True"
    TextInputStart="OnTextInputStart"
    TextWrapping="Wrap"/>
</ScrollViewer> 
```

和 C#：

```
private void OnTextInputStart(object sender, TextCompositionEventArgs e)
{
  scrollViewer.UpdateLayout();
  scrollViewer.ScrollToVerticalOffset(phoneTextBox.ActualHeight);
} 
```

# c# - Unity中的Boss战状态机

> ID：15779187
> 
> 赞同：0
> 
> 时间：2013-04-03T04:58:32.537
> 
> 标签：c#, unity3d

我正在尝试使用简单的状态机针对他的不同行为构建一个老板敌人。我正在尝试建立一个攻击和等待状态，但我遇到了一些问题。

如何使状态自动切换？理想情况下，我希望老板在指定时间内进行攻击，然后等待（此时他很脆弱）再等一段时间。但等待是我遇到的问题。有什么好的方法可以解决这个问题吗？

编辑：我正在编写的状态机目前看起来像这样：

```
public class BossStateMachine : MonoBehaviour
{

    /* TODO: Figure out WAITING for state changes */

    private delegate void State(); //create delegate
    private State stateMethod; //create holder for delegate

    bool canBeAttacked = false;
    public int bossHealth = 5; //takes 5 hits

    /*
     * States:
     * Attacking - boss is attacking, is not vulnerable
     * Waiting - boss is not attacking, is vulnerable
     */

    // Use this for initialization
    void Start ()
    {
        stateMethod = new State(EnterStateAttacking);
    }

    // Update is called once per frame
    void Update ()
    {

    }

    void FixedUpdate()
    {
        stateMethod();
    }

    private void EnterStateAttacking()
    {
        canBeAttacked=false;
        stateMethod = new State(Attacking);
        stateMethod(); //start in same frame (comment out to delay)
    }

    private void Attacking()
    {
        FireBlast(); //method of attack
    }

    private void EnterStateWaiting()
    {
        canBeAttacked=true;
        stateMethod = new State(Waiting);
        stateMethod();
    }

    private void Waiting()
    {
        //wait (open to attack from player)
        //do laughing or something
    }
} 
```

我想让 Waiting 状态和 Attacking 状态都自己进入和退出。即使通过更新功能，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:17:21.637

以最简单的形式，您可以让它在状态之间来回切换.. 像这样：

```
private TimeSpan timeToWait = TimeSpan.FromMilliseconds(5000); // 5 seconds
private TimeSpan lastStateCheck;

public void Update(GameTime gameTime) {
    if (lastStateCheck + timeToWait < gameTime.TotalGameTime) {
        // switch states after 5 seconds..
        /* Switch state code here */
        lastStateCheck = gameTime.TotalGameTime;
    }
} 
```

更高级的 AI 会执行更多检查，例如是否已经看到玩家，或者如果玩家直接在它面前，它是否应该继续攻击。

PS：我没有投票关闭（我想我应该提一下）

# android - 使用 QuiltView lib 时控制 Gridlayout 中的补丁大小

> ID：15779191
> 
> 赞同：3
> 
> 时间：2013-04-03T04:59:11.350
> 
> 标签：android, android-custom-view, grid-layout, android-gridlayout, quilt

大约一年前我开始做 Android 开发，从我开始开发我就想创建一个布局，其中包含所有不同大小的盒子，它们可以紧密地组合在一起。消除任何差距。我唯一的其他要求是我能够在运行时以编程方式确定框的大小.....我认为这将是一个问题，只要我很酷地制作视图在内部可滚动的框架. 我四处打听，没有一个我在这里或任何地方问过的人知道怎么做，所以我把这个项目搁置了几个月，从我离开的地方继续，研究并再次询问，一无所获....冲洗并重复。

直到最后我遇到了这个华丽的图书馆，它似乎是我所有问题的答案：[https ://github.com/jacobmoncur/QuiltViewLibrary](https://github.com/jacobmoncur/QuiltViewLibrary)

唯一的问题是它完全随机，我发现了一个项目的一个分支，它试图让被子“非随机”，似乎作者试图为我的问题找到一个解决方案，但被难住了，而是选择了简单的道路。这里第二个“非随机版本”（只有 3 个短类）及以下是补丁类：[https://github.com/jacobmoncur/QuiltViewLibrary/blob/non-randomized-quilt/src/com/jake/quiltview/QuiltViewBase。爪哇](https://github.com/jacobmoncur/QuiltViewLibrary/blob/non-randomized-quilt/src/com/jake/quiltview/QuiltViewBase.java)

**QuiltViewPatch.java：**

```
public class QuiltViewPatch implements Comparable{
public int width_ratio;
public int height_ratio;

public QuiltViewPatch(int width_ratio, int height_ratio){
this.width_ratio = width_ratio;
this.height_ratio = height_ratio;
}

private static QuiltViewPatch create(Size size){
switch(size){
case Big:
return new QuiltViewPatch(2,2);
case Small:
return new QuiltViewPatch(1,1);
case Tall:
return new QuiltViewPatch(1,2);
}

return new QuiltViewPatch(1,1);
}

public int getHeightRatio(){return this.height_ratio;}
public int getWidthRatio(){return this.width_ratio;}

public static QuiltViewPatch create(int view_count){

if(view_count == 0)
return new QuiltViewPatch(2,2);
else if((view_count % 11) == 0)
return new QuiltViewPatch(2,2);
else if((view_count % 4) == 0)
return new QuiltViewPatch(1,2);
else
return new QuiltViewPatch(1,1);

}

private enum Size{
Big,
Small,
Tall
}

public static QuiltViewPatch init(int position, int column){
switch(column){
case 2:
return init2(position);
case 3:
return init3(position);
case 4:
return init4(position);
case 5:
return init5(position);
}

return init3(position);
}

private static QuiltViewPatch init2(int position){
switch(position % 15){
case 0:
return create(Size.Big);
case 1:
case 2:
case 3:
return create(Size.Small);
case 4:
return create(Size.Tall);
case 5:
case 6:
case 7:
return create(Size.Small);
case 8:
return create(Size.Tall);
case 9:
return create(Size.Tall);
case 10:
return create(Size.Small);
case 11:
return create(Size.Big);
case 12:
return create(Size.Tall);
case 13:
return create(Size.Tall);
case 14:
return create(Size.Small);
}

return create(Size.Small);
}

private static QuiltViewPatch init3(int position){
switch(position % 32){
case 0:
return create(Size.Big);
case 1:
case 2:
case 3:
return create(Size.Small);
case 4:
return create(Size.Tall);
case 5:
case 6:
case 7:
return create(Size.Small);
case 8:
return create(Size.Tall);
case 9:
case 10:
return create(Size.Small);
case 11:
return create(Size.Big);
case 12:
return create(Size.Tall);
case 13:
case 14:
return create(Size.Small);
case 15:
return create(Size.Small);
case 16:
return create(Size.Tall);
case 17:
case 18:
case 19:
return create(Size.Small);
case 20:
return create(Size.Tall);
case 21:
case 22:
return create(Size.Small);
case 23:
return create(Size.Big);
case 24:
return create(Size.Small);
case 25:
return create(Size.Tall);
case 26:
case 27:
case 28:
return create(Size.Small);
case 29:
return create(Size.Tall);
case 30:
case 31:
return create(Size.Small);
}

return create(Size.Small);
}

private static QuiltViewPatch init4(int position){
switch(position % 36){
case 0:
return create(Size.Big);
case 1:
case 2:
case 3:
return create(Size.Small);
case 4:
return create(Size.Tall);
case 5:
case 6:
case 7:
return create(Size.Small);
case 8:
return create(Size.Tall);
case 9:
case 10:
case 11:
return create(Size.Small);
case 12:
return create(Size.Big);
case 13:
return create(Size.Tall);
case 14:
case 15:
case 16:
return create(Size.Small);
case 17:
return create(Size.Tall);
case 18:
case 19:
case 20:
return create(Size.Small);
case 21:
return create(Size.Tall);
case 22:
case 23:
return create(Size.Small);
case 24:
return create(Size.Small);
case 25:
return create(Size.Big);
case 26:
return create(Size.Small);
case 27:
return create(Size.Tall);
case 28:
case 29:
case 30:
return create(Size.Small);
case 31:
return create(Size.Tall);
case 32:
case 33:
case 34:
case 35:
return create(Size.Small);
}

return create(Size.Small);
}

private static QuiltViewPatch init5(int position){
switch(position % 35){
case 0:
return create(Size.Big);
case 1:
case 2:
case 3:
return create(Size.Small);
case 4:
return create(Size.Tall);
case 5:
case 6:
case 7:
return create(Size.Small);
case 8:
return create(Size.Tall);
case 9:
case 10:
case 11:
return create(Size.Small);
case 12:
return create(Size.Big);
case 13:
return create(Size.Tall);
case 14:
case 15:
case 16:
return create(Size.Small);
case 17:
return create(Size.Tall);
case 18:
case 19:
case 20:
return create(Size.Small);
case 21:
return create(Size.Tall);
case 22:
case 23:
case 24:
return create(Size.Small);
case 25:
return create(Size.Big);
case 26:
return create(Size.Small);
case 27:
return create(Size.Tall);
case 28:
case 29:
case 30:
return create(Size.Small);
case 31:
return create(Size.Tall);
case 32:
return create(Size.Big);
case 33:
return create(Size.Tall);
case 34:
return create(Size.Small);

}

return create(Size.Small);
}

public static boolean getRandomBoolean(){
return (Math.random() < 0.5);
}

public boolean equals(Object obj){
if(obj != null && obj instanceof QuiltViewPatch){
QuiltViewPatch size = (QuiltViewPatch)obj;
return size.height_ratio == this.height_ratio && size.width_ratio == this.width_ratio;
}

return false;
}

public int hashCode(){
return height_ratio + 100 * width_ratio;
}

public String toString(){
return "Patch: " + height_ratio + " x " + width_ratio;
}

@Override
public int compareTo(Object another) {
if(another != null && another instanceof QuiltViewPatch){
QuiltViewPatch size = (QuiltViewPatch)another;
if(size.equals(this))
return 0;

if(this.height_ratio < size.height_ratio)
return -1;
else if(this.height_ratio > size.height_ratio)
return 1;

if(this.width_ratio < size.width_ratio)
return -1;
else
return 1;
}
return -1;
}
} 
```

# php - 如何制作默认页面 home.php 而不是 index.html 和 index.php

> ID：15779198
> 
> 赞同：19
> 
> 时间：2013-04-03T05:00:10.037
> 
> 标签：php, .htaccess

我有网站[http://mywebsite.com](http://mywebsite.com)如果我点击这个 URL，它将 index.php 和 index.html 作为默认页面。如何将 home.php 作为默认页面。我已经尝试过了，但没有通过将以下代码放在 public_html 的 .htaccess 文件中来工作

```
DirectoryIndex home.php index.html index.php 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-03T05:04:06.630

你只需要`home.php`在你`DirectoryIndex`的让它工作。请记住，这是在根项目的 .htaccess 文件中使用的：

```
DirectoryIndex home.php 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-03T05:05:15.290

你需要`AllowOverride +Indexes`在你的`httpd.conf`才能使用`DirectoryIndex`。`.htaccess`

除此之外，最简单的重定向方法（没有对 Apache 配置和模块的 root 访问权限）是将其设置为`index.html`：

```
<!doctype html>
<html>
  <head>
    <meta http-equiv="Refresh" content="0; url=home.php">
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-07T17:14:31.057

DirectoryIndex 指令适用于所有子文件夹，如果要为每个目录设置不同的文件，可以使用 mod-rewrite。

要将**/file.html**设置为根目录处理程序，您可以在 htaccess 的顶部使用它：

```
RewriteEngine on
RewriteRule ^$ /file.html [L] 
```

要将不同的文件设置为子文件夹的索引，请使用：

```
RewriteEngine on
RewriteRule ^subfolder/$ /myfile.html [L] 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-03T05:17:36.177

只是尝试重写`/index.html`并`/index.php`进入`/home.php`

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/index\.(html|php)
RewriteRule ^(.*) /home.php 
```

# windows-7 - sublime text 2 在 windows 7 下为 multimarkdown 构建系统

> ID：15779202
> 
> 赞同：1
> 
> 时间：2013-04-03T05:00:34.663
> 
> 标签：windows-7, build, sublimetext2, multimarkdown

为了在 multimarkdown 中处理 .md 文件，我编写了一个构建系统文件：

```
{
"shell":true,
"working_dir" : "${file_path}",
"cmd": ["C:\\Program Files\\MultiMarkdown\\multimarkdown.exe", "-b", "$file"],
"cmd": "${file/\\.md/\\.html/}"
} 
```

虽然 .html 文件在我的浏览器中正确打开（如果存在），但不会调用 MultiMarkdown - 因为 .html 文件不是由 CTRL+B/F7 生成的。

但是，在 cmd 这有效：

```
multimarkdown -b test.md 
```

我想我的 PATH 变量很好，但是 Sublime 无法访问 multimarkdown。

我也试过这个：

```
"cmd": ["multimarkdown", "-b", "$file"], 
```

和

```
"cmd": ["multimarkdown -b", "$file"], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:24:43.443

您有一个重复的`cmd`密钥。由于 Sublime Text 使用[JSON](http://sublimetext.info/docs/en/reference/build_systems.html)作为其构建系统，它可能会用第二个键覆盖第一个键。

因此，删除第二个键，您的第一个键将执行：

```
{
"shell":true,
"working_dir" : "${file_path}",
"cmd": ["C:\\Program Files\\MultiMarkdown\\multimarkdown.exe", "-b", "$file"],
} 
```

# css - Firefox滚动条下的CSS固定位置移动

> ID：15779203
> 
> 赞同：3
> 
> 时间：2013-04-03T05:00:34.773
> 
> 标签：css, firefox

在 Firefox（版本 19.0.2）中，当将元素定位到页面右侧时，使用`position: fixed`该元素相对于窗口滚动条右侧的窗口视口定位。

但是，当我们更改定位值时，在悬停时，元素相对于窗口视口定位，不包括窗口滚动条。

在下面的示例中，这会导致元素从滚动条的右侧移动到悬停时滚动条的下方。

我已将问题隔离开来，看看它不是由设置的任何其他 css 设置或其他任何原因引起的`body`，`html`但我找不到此问题的原因。

**HTML**

```
<a href="#Top" id="ScrollToTop">Top</a> 
```

**CSS**

```
#ScrollToTop {
    position: fixed;
    right: 0px;
    bottom: -10px;
    width: 50px;
    height: 50px;
    background: #ffffff;
    color: #000000;
}
#ScrollToTop:hover {
    bottom: 0;
} 
```

**[例子](http://jsfiddle.net/KxEUY/)**

这是有原因的吗？这是浏览器错误吗？有没有办法解决这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T05:22:39.667

经过一番摆弄，我的解决方案是将 ScrollToTop 锚放在另一个固定位置的 div 中。

HTML

```
<div id="ScrollToTopHolder"><a href="#Top" id="ScrollToTop">Top</a></div> 
```

CSS

```
body {
    height: 2000px;
    background: #990000;
}
#ScrollToTopHolder {
    position: fixed;
    width:100%;
    bottom:0px;
}
#ScrollToTop {
    position: absolute;
    right: 0px;
    bottom: -10px;
    width: 50px;
    height: 50px;
    line-height: 50px;
    background: #fff;
    color: #000;
    text-transform: uppercase;
    text-decoration: none;
    text-align: center;
    font-size: 15px;
    font-weight: bold;
    z-index: 1000;
    border: solid 1px #000;
    border-bottom: none;
    border-radius: 10px 10px 0 0;
    transition: all 0.4s;
}
#ScrollToTop:hover {
    bottom: 0px;
} 
```

[JSFiddle](http://jsfiddle.net/KVxPz/)

当您移动固定的锚点位置时，Firefox似乎不喜欢它，重新对齐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T12:27:49.293

找到了另一种解决方法，使用 min-width 而不是 width 作为固定位置 div：[https ://stackoverflow.com/a/15705522/980692](https://stackoverflow.com/a/15705522/980692)

# c++-cli - c++/cli 中的观察者模式，用于混合托管/非托管

> ID：15779209
> 
> 赞同：0
> 
> 时间：2013-04-03T05:01:47.743
> 
> 标签：c++-cli, observer-pattern, mixed-mode

我有一个包含 C# UI、C++/CLI 混合模式互操作包装器和一些本机 C++ 项目的系统。

我需要做的是设置一个系统，让原生 c++ 代码可以发送日志消息，并且 UI 可以报告它。

[我使用它](http://rtmatheson.com/2010/03/working-on-the-subject-observer-pattern/)作为模板设置了本机 IObservable ，但是 C# 代码不能成为观察者。我的想法是在 C++/CLI 中设置另一个观察者模式，它观察本地观察者，并让 C# 实现它。我[将此](https://stackoverflow.com/questions/1249517/super-simple-example-of-c-sharp-observer-observable-with-delegates)用作模板，但我正在努力将其转换为有效的 C++/CLI。

```
ref class Observable
{
public:
Observable(void);
virtual ~Observable(void);

event System::EventHandler^ SomethingHappened;

void DoSomething() {
    System::EventHandler^ handler = SomethingHappened;
    //if (handler != nullptr)
    //{
        handler(this, System::EventArgs::Empty);
    //}//null check not permitted in C++/CLI
}; 
```

给出错误：C3918：需要 SomethingHappened 成为数据成员。 [这是 MSDN 页面](http://msdn.microsoft.com/en-au/library/w901cc8a%28v=vs.100%29.aspx)- 但我无法确定我做错了什么。

有什么建议么？

谢谢，梅兰妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:07:07.570

在 C++/Cli 中，使用“琐碎事件”时，您不需要检查事件是否为空（而且您也不能）。语言会为您解决这个问题。

请参阅相关： [错误 C3918：错误检查事件](https://stackoverflow.com/questions/6034720/error-c3918-error-wile-checking-event-for-being-nullptr) [是否为 nullptr C++/CLI 事件是否有任何侦听器？](https://stackoverflow.com/questions/8413109/does-c-cli-event-have-any-listeners)

因此，对于您的情况，只需删除`nullptr`检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T00:11:47.973

您正在尝试使用 C# 语法。事件在 C++/CLI 中的工作方式略有不同，除了 add 和 remove 访问器之外，它们还有一个*[raise](http://msdn.microsoft.com/en-us/library/ms235237.aspx)*[访问器。](http://msdn.microsoft.com/en-us/library/ms235237.aspx)换句话说，触发事件的方法。如果您不提供显式版本，编译器会自动生成一个。这使得引发事件变得非常简单：

```
void DoSomething() {
    SomethingHappened(this, System::EventArgs::Empty);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:14:49.873

使用[this](http://msdn.microsoft.com/en-us/library/58cwt3zh%28v=vs.100%29.aspx)，正确的做法是直接触发事件。像这样：

```
void DoSomething() {       
    SomethingHappened(this, System::EventArgs::Empty);
} 
```

# c# - 如何访问放置在母版页用户控件中的用户控件

> ID：15779214
> 
> 赞同：1
> 
> 时间：2013-04-03T05:02:26.493
> 
> 标签：c#, asp.net, .net, vb.net

我需要从母版页访问用户控件，但用户控件没有直接放在母版页中。它有这样的层次：

***母版页 > HeaderUserControl > LoginUserControl > 登录按钮和注销按钮***

要求：

我需要调用注销按钮的注销方法。不幸的是，我没有得到最好的设计来做到这一点。

请提供建议和帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:19:14.147

创建一个 httphandler 并移动注销代码，您可以通过调用处理程序来使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:53:52.600

正如@SimonWhitehead 所说，您应该添加一个类并从 和 调用 Logout`MasterPage`方法`LoginControl`。但是，如果您坚持，这是一种方法，几乎​​可以使该方法在下一个级别可见：

**登录用户控件**：

```
Public Sub DoLogout()
    'Do something'
End Sub

Protected Sub Logout_Click(sender As Object, e As EventArgs) Handles Logout.Click
    DoLogout()
End Sub 
```

**页眉用户控件**：

```
Public Sub DoLogout()
    Me.LoginUserControl.DoLogout()
End Sub 
```

最后

**母版页**：

```
Protected Sub Logout_Click(sender As Object, e As EventArgs) Handles Logout.Click
    HeaderUserControl.DoLogout()
End Sub 
```

这将在`LoginUserControl`控件中调用您的方法。

# iphone - 我想将散景效果添加到我的 iphone 应用程序中添加的 uiimage

> ID：15779220
> 
> 赞同：-2
> 
> 时间：2013-04-03T05:02:49.800
> 
> 标签：iphone, ios, image

我正在创建一个应用程序，我想在其中添加散景效果到添加的图像中，我搜索了很多关于如何在 iphone 应用程序中实现此功能的信息，但我找不到任何代码供参考，但我在应用程序商店中看到了可能提供的应用程序对图像有影响，但我没有找到任何适用于 iPhone 的教程。所以这里的任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:09:36.750

好吧，您可以按照本教程[创建散景图像](http://inspiredology.com/how-to-create-a-simple-bokeh-effect/)，它本质上是用于 Photoshop，但您可以通过编程方式在 iOS 中实现相同的效果。例如 ：-

*   你可以创建你的画笔
*   您可以手动设置RGB
*   你可以画一些散景圆圈
*   添加模糊效果

您可以稍微调整这些东西并制作您的 Bokeh 图像。还有什么请告诉我！！

# qt - Xlib：从同一 Qt 应用程序中的单独 QThread 测试 Qt 应用程序时出现意外的异步回复

> ID：15779226
> 
> 赞同：0
> 
> 时间：2013-04-03T05:03:24.407
> 
> 标签：qt, x11, qthread, gui-test-framework

我正在尝试为我的 Qt 应用程序创建一个测试。目的是通过移动鼠标并使用 X11 库单击 QGraphicsItems 或 QWidgets 来测试应用程序的 GUI。

该测试是作为我的 Qt 应用程序的插件编写的。它启动一个单独的 QThread 并在 run() 函数中移动鼠标。让我们称之为“测试运行线程”

但是我还需要获取 GUI 的结构，即各种小部件的位置，因此在“测试运行线程”中，我通过 QApplication::topLevelWidgets() 并找到我感兴趣的那个。然后我调用 mapToGlobal( ) 在此小部件上获取其全局位置。然后可以将此位置提供给 X11 鼠标功能以将鼠标移动到小部件上。

这通常有效，但偶尔我会收到此错误“Xlib：意外异步回复”一些谷歌搜索显示这可能是由于设置 QWidget 位置或尝试从另一个线程更新它们。

但我只是在另一个线程中获取有关小部件的信息。为什么会导致问题？:(

如果一切都失败了，我准备将某种通信队列设置回主（GUI）线程。“测试运行线程”将在队列中请求有关小部件的信息，并且 GUI 线程可以响应它们。

插件启动一个单独的线程来移动鼠标的原因是因为 GUI 必须继续响应事件，否则整个练习点都会丢失。我知道我也*不能*使用线程，只需*在主线程中移动鼠标，*定期调用 processEvents()。那是我猜的另一个选择。

以前走这条路的人的任何想法都会非常有帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:11:48.533

> 但我只是在另一个线程中获取有关小部件的信息。为什么会导致问题？:(

因为您仍在来回发送 X 协议消息。toGlobal() 肯定会向 X 服务器查询小部件的实际位置（因为它可能已被其他方式移动）。所以不幸的是，就 X 而言，“只是获取一些信息”并不是一个 const 操作。实际上，出于同样的原因，将鼠标从测试线程中移出也是一个很大的禁忌。

在您的情况下，我会简单地使用零超时 QTimer/processEvents 并忘记线程；设置队列来来回移动事件是不值得的，更不用说您需要在代码中添加互斥锁（！）。

# jquery - Wow Slider 画廊的问题

> ID：15779228
> 
> 赞同：0
> 
> 时间：2013-04-03T05:03:35.697
> 
> 标签：jquery, css, jquery-plugins

我正在创建一个简单的 HTML+JQUERY 网站。以前在网站上提供了一个 jquery 图像库。我使用 WOW Slider 添加了一个图像滑块。一旦我添加了哇滑块的代码，以前的图片库就会变得不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:43:36.047

没有看到代码，这只是一个猜测。尝试将 更改`#id's`为`.classes`。就像我说的，这只是一个猜测，但如果您的滑块设置`#id's`为每页只能使用一次。

# javascript - onkeypress 在 Firefox 中无法正常工作？

> ID：15779230
> 
> 赞同：0
> 
> 时间：2013-04-03T05:03:47.643
> 
> 标签：javascript

以下代码在除 Firefox 之外的所有浏览器中都能正常工作。达到最大长度时失败，它也不允许退格和删除。

```
 function textboxMultilineMaxNumber(txt, maxLen) {
      try {
        if (txt.value.length > (maxLen - 1)) return false;
         } catch (e) {
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:08:18.557

keypress 事件旨在处理用户键入的字符，而不是检测键盘活动，并且删除和退格键不会生成字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:06:05.447

`onkeypress`不会在退格和删除时触发，因为它应该代表输入的字符。您应该使用`onkeydown`which 在用户按下一个键并在所有键上工作的那一刻触发。

# environment - worklight javascript 文件无法在 worklight 环境文件夹中呈现

> ID：15779235
> 
> 赞同：0
> 
> 时间：2013-04-03T05:04:05.057
> 
> 标签：environment, ibm-mobilefirst

我最近将 Worklight Developer 版本更新为 5.0.6.20130311-0918-developer-edition 一个在旧版本上运行良好的项目无法渲染 IPAD 环境（js 文件）。

为了证明这不是我们的问题，我创建了一个新的 worklight 项目并添加了 IPAD 环境。然后在 ipad/js/Test.js 文件中添加一个 javascript 警报函数，如下所示：

```
function wlEnvInit(){
alert("test");
wlCommonInit();
// Environment initialization code goes here
} 
```

我原以为 IPAD 模拟器会弹出一个警报文件，但它没有。有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:04:24.227

使用 v5.0.6 我创建了一个新项目和应用程序，添加了 iPad（和其他）环境并添加了 alert("test"); 在 iPad 环境的 .js 文件中构建和部署 wlCommonInit() 之前。预览时，我在浏览器中收到一个带有“test”文本的对话框。无法确认。

# php - 在 Doctrine 2 实体上映射额外的行

> ID：15779238
> 
> 赞同：4
> 
> 时间：2013-04-03T05:04:08.757
> 
> 标签：php, symfony, orm, doctrine-orm

问题是，我的用户的评分是通过 MtM 关系平均的，例如，a`User`有很多`Ratings`，`Rating`实体字段值的平均值是用户的评分。

我想做的是想办法以某种方式将这些数据放入用户模型、虚拟字段或诸如此类的东西中。我已经设法为它创建了一个非映射属性和访问器方法，这样界面就很稳固，我的视图看起来也不错。该属性显然没有在 Doctrine 中映射。

然后似乎我已经深入研究了每个教义内部。我查看了 hydrators 和 ResultSetMappings，但似乎没有将计算字段推送到实体字段的好方法。

所以，这就是我设法想出的。

这是我加入并选择额外字段的地方：

```
$qb->select('u')
    ->addSelect('AVG(r.rating) AS people_rating')
    ->from('MyMainBundle:User', 'us')
    ->leftJoin('u.reviews', 'r', Expr\Join::WITH, 'r.user = u')
    ->where('u.id = :id')
    ->orderBy('people_rating', 'DESC')
; 
```

我需要得到的是 Doctrine 以某种方式将其推`people_rating`入`User`实体。现在我得到一个看起来像这样的丑陋数组：

```
array(1) {
  [0] =>
  array(2) {
    [0] =>
    class My\MainBundle\Entity\User#868 (46) {
      protected $id =>
      int(247)
      protected $email =>
      string(28) "june68@goldneroconner.com.lc"
      private $createdAt =>
      class DateTime#973 (3) (...)
      private $firstName =>
      string(8) "John"

      (more elements)...
    }
    'people_rating' =>
    NULL
  }
} 
```

这就是我真正需要的：

```
array(1) {
  [0] =>
  class My\MainBundle\Entity\User#868 (46) {
    protected $id =>
    int(247)
    protected $email =>
    string(28) "june68@goldneroconner.com.lc"
    private $createdAt =>
    class DateTime#973 (3) (...)
    private $firstName =>
    string(8) "John"

    private $peopleRating => (...)
    (my float calculated within MySQL's AVG())

    (more elements)...
  }
} 
```

我很确定有一种方法可以实现`ResultSetMapping`它，但是如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:06:05.867

一个丑陋的解决方法如下所示：

```
foreach ($usersDirty as $user) {
            $user[0]->setPeopleRating($user['peopleRating']);
            $users []= $user[0];
        } 
```

# jquery - 使用 jQuery 清除 CSS 动画

> ID：15779243
> 
> 赞同：1
> 
> 时间：2013-04-03T05:04:37.913
> 
> 标签：jquery, css

再会

我有以下 CSS 动画：

```
.ca-menu li:hover .ca-main{
    color: #000;
    -webkit-animation: moveFromLeftRotate 300ms ease;
    -moz-animation: moveFromLeftRotate 300ms ease;
    -ms-animation: moveFromLeftRotate 300ms ease;
} 
```

现在，在特定页面上，我想添加以下 jQuery 以防止该特定页面上的动画...

```
var pathname = window.location.pathname;

if(pathname == '/ik/1084-2/'){
     $('.ca-menu li:hover .ca-main').css({
        '-webkit-animation': 'none',
        '-moz-animation': 'none',
        '-ms-animation': 'none'});
} 
```

但它不起作用 - 它仍然显示动画。

有任何想法吗？

**更新**

**解决方案：**

CSS：

```
.noAnimation{
    -webkit-animation: none !important;
    -moz-animation: none !important;
    -ms-animation: none !important;
} 
```

JS：

```
$('.ca-menu .ca-main').addClass('noAnimation'); 
```

谢谢大家的投入

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:06:11.767

您应该做的是将动画抽象为一个单独的类，然后根据需要使用 jquery 将该类删除/添加到元素中

前任。

CSS：

```
.some-animation {
    -webkit-animation: moveFromLeftRotate 300ms ease;
    -moz-animation: moveFromLeftRotate 300ms ease;
    -ms-animation: moveFromLeftRotate 300ms ease;
} 
```

Javascript：

```
if (condition) {
    jQuery('#myelement').removeClass('some-animation');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T05:09:17.343

CSS 动画基于一些 css 选择器（如 class、id 等）发生。使用 jQuery，您可以删除定义动画的 css 选择器。我觉得你很好地删除了动画。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:17:06.697

您可以使用以下步骤调试类似的东西

1.  检查特定页面上的 FireBug for JS 错误。
2.  if(pathname == '/ik/1084-2/'){ alert('hi'); // 检查你的 if 条件是否正确 }

3.  alert(pathname) 并查看变量值是否正确

4.  确保此结构 $('.ca-menu li:hover .ca-main') 存在于特定页面中

# android - 脸书登入/登出

> ID：15779244
> 
> 赞同：0
> 
> 时间：2013-04-03T05:04:46.667
> 
> 标签：android, facebook, facebook-graph-api

我正在开发一个 android 应用程序，我必须通过它登录/注销 facebook。有没有这样的方法，通过我的应用程序登录/注销到 facebook 的过程不依赖于通过官方 facebook 应用程序的登录/注销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:21:26.477

您可以使用 facebook sdk 3.0 以编程方式登录和注销（例如，请参见[此处](https://stackoverflow.com/questions/14328148/how-to-programmatically-logout-from-facebook-sdk-3-0-without-using-facebook-logi)），但如果用户尚未登录，则无法避免被重定向到 facebook 登录 UI。

# c# - 为什么 DateTime.Now.TimeOfDay.ToString("HH:mm:ss.ffffff") 会抛出 FormatException？

> ID：15779246
> 
> 赞同：19
> 
> 时间：2013-04-03T05:04:47.633
> 
> 标签：c#, datetime, formatexception

我在抛出 FormatException 时遇到了类似的问题。我的代码很简单：

```
void Orders_OnSubmit()
{
   DateTime CurrentTime = DateTime.Now;
   rtbAdd( "Submitted on " + CurrentTime.Date.ToString("MM/dd/yyyy") + " at " + CurrentTime.TimeOfDay.ToString("HH:mm:ss.ffffff") );
}

void rtbAdd(String S)
{
   DefaultDelegate del = delegate()
   {
      rtb.AppendText(S + "\n");
   };
   this.Invoke(del);
} 
```

这里有什么问题？这是线程问题吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-03T05:09:39.667

`TimeOfDay`是 type`TimeSpan`并且它具有与 . 不同的[格式选项](http://msdn.microsoft.com/en-us/library/ee372287.aspx)`DateTime`。您还需要转义冒号 ( `:`)

```
 currentTime.TimeOfDay.ToString("hh\\:mm\\:ss\\.ffffff") 
```

您的示例尝试使用为[定义](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#HH_Specifier)`"HH"`的格式，但不是为.[`DateTime`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#HH_Specifier)`TimeSpan`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-03T05:20:44.370

无需显式访问 DateTime 实例的 Date 和 TimeOfDay 属性。您可以像这样简化代码：

```
rtbAdd(String.Format("Submitted on {0:MM/dd/yyyy} at {0:HH:mm:ss.ffffff}", DateTime.Now)); 
```

# css - 不能改变高度/宽度

> ID：15779250
> 
> 赞同：1
> 
> 时间：2013-04-03T05:05:14.303
> 
> 标签：css, html

我正在学习 HTML/CSS 并决定试试这个：

```
<p>A paragraph with no margins specified.</p>
<div style="width=300px; height=300px; background-color:yellow;><p>This paragraph is in a divider.</p></div>
<p>A paragraph with no margins specified.</p> 
```

经过一番谷歌搜索，我发现您无法更改内联元素的宽度/高度。因此，我尝试使用 将`<div>`和制作`<p>`成块元素`display:block`，但这并没有改变任何东西。宽度在屏幕外无限延伸，高度仅与原来一样高`<p>`。我希望`<p>`在 300x300 中有一个`<div>`，那么我该怎么做呢？另外，为什么这些方法中的任何一种都不起作用（即使我更改为`display:block`）？谢谢。
另外，我知道你不应该像我一样使用过多的 CSS。这只是因为我正在使用 W3 的“Try-It-Yourself”HTML 编辑器测试东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T05:07:22.193

您的代码中的错误：

```
<div style="width=300px; height=300px; background-color:yellow;>
-----------------^-------------^-------------------------------^
                  Replace with :                               Missing " 
```

* * *

你给错了。替换`=`为`:`，你错过了`"`：

```
<div style="width:300px; height:300px; background-color:yellow;"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:14:42.313

`div`默认情况下，两者`p`都是块元素，因此您无需`display:block;`为它们指定。您在 style 属性中使用老式 html 属性名称/值设置（名称 = 值）。

您需要在样式属性中使用 CSS 属性，看起来像`name:value;`.

```
style="width:300px; height:300px; background-color:#FFFF00;" 
```

您可能想查看 Team Treehouse 的一些资源：http: [//teamtreehouse.com/library/websites/build-a-simple-website/website-basics](http://teamtreehouse.com/library/websites/build-a-simple-website/website-basics)

或代码学校： http: [//www.codeschool.com/paths/html-css](http://www.codeschool.com/paths/html-css)

希望这可以帮助您继续学习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T05:10:08.760

您也可以尝试使用“最大宽度”而不是“宽度”。

# android - 如何向单选按钮添加值并计算答案？

> ID：15779252
> 
> 赞同：0
> 
> 时间：2013-04-03T05:05:19.633
> 
> 标签：android, eclipse, radio-button

我有一个包含 8 个单选按钮的 4 个活动的简单表单。当一个活动被回答时，它会进入下一个活动，我希望在第四个活动中显示选中的单选按钮的结果。有人可以帮我为单选按钮添加值并计算答案吗？我想创建一个心理测试，每个单选按钮必须有不同的值。将它们相加将产生独特的心理特征。这是我的应用程序中的一个布局和活动。我是新手，我很感激我能得到的所有帮助。谢谢！

布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<TextView
android:id="@+id/textView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/question_1"/>

<RadioGroup 
android:id="@+id/radiogroup"    
android:layout_width="fill_parent" 
android:layout_height="fill_parent">

<RadioButton
android:id="@+id/radiobutton1"  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="@string/radio_1"/>

<RadioButton
android:id="@+id/radiobutton2"  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="@string/radio_2"/>
</RadioGroup>  

</LinearLayout> 
```

活动：

```
package com.example.app_test;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.RadioButton;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

      RadioButton buttonOne = (RadioButton)findViewById(R.id.radiobutton1);

        buttonOne.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                if (isChecked)
                {
                    //Go to the activity for button 1 here
                    MainActivity.this.startActivity(new Intent(MainActivity.this, SecondActivity.class));
                }
            }
        });

        RadioButton buttonTwo = (RadioButton)findViewById(R.id.radiobutton2);

        buttonTwo.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                if (isChecked)
                {
                    //Go to the activity for button 2 here
                    MainActivity.this.startActivity(new Intent(MainActivity.this, SecondActivity.class));
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:12:23.653

尝试在每个活动中创建一个静态变量并在您的最终活动中访问它们。这是一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:42:40.260

这似乎是错误的方法，如果您有 20 个问题，您将开始 20 个活动。

您可能可以通过一项活动侥幸逃脱。这应该使您走上正确的道路（尽管它不完整且幼稚）。

制作一个`QuestionActivity`，其布局类似于（下面的伪代码）：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView
        android:id="@+id/question_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
    <RadioGroup
        android:id="@+id/answer_group"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <RadioButton
            android:id="@+id/answer1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
        ...
     </RadioGroup>
</LinearLayout> 
```

然后在你的`QuestionActivity`你会有类似的东西：

```
public class QuestionActivity extends Activity {

    private int[] answers = new int[MAX_QUESTIONS];
    private int currentQuestionIndex = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RadioGroup answerGroup = (RadioGroup)findViewById(R.id.answer_group);

        answerGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener()
        {
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId)
            {
                answers[currentQuestionIndex] = checkedId;
                QuestionActivity.this.loadQuestionAtIndex(++currentQuestionIndex);
            }
        });

    private void loadQuestionAtIndex(int index) {
        if (index == MAX_QUESTIONS) {
            computeResults(); // this method would traverse the answers array to tally the results (based on an answer key, or similar)
            return;
         }
        // get the question text from an array resource or some other data source
        // update the question text and radio buttons text
    }
} 
```

我希望这能让你朝着正确的方向前进。如果您的问题需要文本之外的交互性（例如，某些问题会显示视频），您应该考虑使用`Fragment`类 ( [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html) ) 创建可重用的 UI 片段和业务逻辑（VideoQuestionFragment、TextQuestionFragment 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:30:21.267

你有一些选择。

1-最简单的方法是仅使用一个活动，4个线性布局，每个问题一个，将其排成一行并更改其可见性。在第四个结束时，您可以毫无问题地求和。

2-另一种选择是使用活动。当用户完成每个问题组时，您必须为下一个活动添加一个意图，传递 Bundle 中的单选按钮值，如果没有，您将丢失此值，因为您无法访问其他活动值（您应该传递它作为捆绑包，或将其保存在数据库、sharedPreferences 或存储系统中...

3 - 这两个解决方案之间有一个 hibryd，使用 Fragments，但我建议您使用第一个解决方案。

# php - 从 PHP 触发 JS 或查找加载的 URL ( HTMLsimpledom )

> ID：15779253
> 
> 赞同：0
> 
> 时间：2013-04-03T05:05:32.793
> 
> 标签：php, javascript, xml, web-scraping

我正在使用[HTMlsimpledom](http://simplehtmldom.sourceforge.net)为不再有权访问数据库的客户废弃旧网站。

该站点是一个编码噩梦，几乎没有可用的类，并且它使用的表最多。

（让事情变得更复杂一些 - 该网站是一些外语，会产生我不知道的奇怪字符。（但那是一个旁注，不是一个真正的问题））

无论如何-一切都很好并且工作正常，除了在一类页面上，它有一个 JS 锚触发器，可以在某种扭曲/老式 Ajax / JS 中打开电话号码。

链接如下所示：

```
<a class="icon1 clickTip" onclick="showIndexPhone(1517);showIndexMobile(1517);" title="">Phone</a> 
```

所以当然我去搜索的`showIndexPhone()`功能是：

```
function showIndexPhone(id)
{
/*var oContent = oValue = null;
if ((oContent = document.getElementById("IndexPhone_" + id)) && (oValue = document.getElementById("IndexPhoneValue_" + id)))
{
oContent.innerHTML = oValue.innerHTML;*/
/*var oCounter = new Image();
oCounter.src = "./ctr.asp?id=" + id + "&type=2";*/
var xmlDoc = dbsRequest("./ctr.asp?id=" + id + "&type=2");
//}
} 
```

显然，`showIndexPhone()`将只是构造一个简单`URL`的，如下所示：

```
 http://123.xxx/ctr.asp?id=1517&type=3 
```

.. 并且还将在萤火虫控制台上显示`id`文章 ID 和`type`信息类型（电话、传真、姓名等）在哪里

然后将它传递给另一个`dbsRequest(URL)`看起来像这样的函数：

```
function dbsRequest(URL) {
try {
var xmlHTTP;
if (dbsBrowserType == "ie") { // code for IE
if (window.XMLHttpRequest) {
xmlHTTP = new XMLHttpRequest();
xmlHTTP.open("GET",URL, false);
xmlHTTP.send(null);
return xmlHTTP.responseXML.documentElement;
}
else if (window.ActiveXObject) {
xmlHTTP = new ActiveXObject("Microsoft.XMLHTTP");
xmlHTTP.open("GET",URL, false);
xmlHTTP.send();
return xmlHTTP.responseXML.documentElement;
}
}
else if (dbsBrowserType == "ns" || dbsBrowserType == "op") { // code for Mozilla, Opera.
//netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
xmlHTTP = new XMLHttpRequest();
xmlHTTP.open("GET",URL, false);
xmlHTTP.send(null);
return xmlHTTP.responseXML.documentElement;
}
}
catch (e) {
//if (dbsBrowserType == "ie")
// alert("error: " + e.description);
//else if (dbsBrowserType == "ns" || dbsBrowserType == "op")
// alert("error: " + e);
return null;
}
} 
```

然后我就卡住了。

我在 JS 、 AJAX 等方面非常糟糕，当我看到响应实际上是某种形式的 XML 时——我就卡住了。我收到了大约 13,000 个条目 - 手动单击每个条目并不是一个真正的选择..

**有什么方法可以获取由该 JS 触发的那些字段**？

或者，**有没有办法找到/构造响应的 URL 并将其解析为 php？**

**编辑我**

可以在这里找到一个真实的实时页面示例：

[http://123.org.il/?pg=indx_entry&CategoryID=171&ArticleID=1517](http://123.org.il/?pg=indx_entry&CategoryID=171&ArticleID=1517)

我不知道它是什么语言，但无论如何你需要点击右边的绿色电话图标才能看到结果电话..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:15:09.487

对该 AJAX 请求的响应只是原始 XML 数据。`showIndexPhone()`正在检索数据并将变量设置`xmlDoc`为它，但它没有对它做任何其他事情。尽管有函数名称，它实际上并没有在任何地方显示它。

无论如何，您可以`file_get_contents()`在 PHP 中使用来下载 XML 数据，然后使用它的几个 XML 解析器之一来解构它。Programming PHP 一书中有一整章解释了如何处理 XML。

# java - Runtime.exec 没有运行但也不例外

> ID：15779254
> 
> 赞同：1
> 
> 时间：2013-04-03T05:05:40.423
> 
> 标签：java, runtime, exec

我想使用 java 在某个位置运行脚本。如果我手动运行脚本运行良好：

```
 /export/home/trace.sh param1 param2 param3 param4 
```

这是我从 java 运行脚本的代码：

```
 try {

      Runtime runtime = Runtime.getRuntime();
      Process proc = null;
      System.out.println("starting search");
      proc = runtime.exec( pathServer + "/trace.sh " + fullDate + " " + fullDateTo + " " + mA.substring(2) + " " + mB.substring(2));
      InputStream inputstream           =   proc.getInputStream();
      InputStreamReader inputstreamreader   =   new InputStreamReader(inputstream);
      BufferedReader bufferedreader         =   new BufferedReader(inputstreamreader);
      System.out.println("end search " + System.currentTimeMillis());
      }
     catch (Exception e)
      {
         System.out.println(e.toString());
         e.printStackTrace();
      } 
```

如果脚本运行，它将在指定位置生成“txt.dat”。但是没有生成“txt.dat”。我试图弄清楚异常是什么，但没有异常捕获。

我的代码已经正确了吗？我怎么知道它是否正在处理脚本？以及如何捕捉过程中发生的任何异常？谢谢。

* * *

**更新 2**

我添加了一些代码来打印`getInputStream`和`getErrorStream`. 对于`getInputStream`，我什么都没有，这意味着它是空的。因为`getErrorStream`，我得到了这个结果

```
 Host key verification failed 
```

我仍然不知道这个错误是什么意思。

Java 应用程序在服务器 B 中运行。

通常，我尝试调用的脚本（在服务器 B 中）将 ssh 到服务器 A 并在服务器 A 中运行其他脚本。它将生成 text.dat，然后 sftp 到服务器 B。手动运行时，txt.dat 成功生成并传输到服务器 B。

* * *

**更新 3**

感谢所有帮助和建议。事实证明，我的 java 应用程序在不同的用户下运行。当我手动运行它时，我使用了另一个用户。因此，我已将服务器 B 的主机密钥添加到服务器 A。它现在运行成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:14:20.780

`Runtime.exec`如果您的命令失败，则不会抛出异常。

您可以使用`process.exitValue()`.

您还可以从`process.getInputStream()`您在代码中创建但由于某种原因不读取的内容中读取脚本输出。`echo`在您的脚本中添加一些语句以进行调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:17:50.100

您可以对代码进行很多改进。

1.  用于`ProcessBuilder`创建您的流程，而不是`Runtime`. 它为您提供更多选择和更好的控制
2.  将命令的每个组件作为单独的字符串传递给构建器
3.  完全消耗您的输出和错误流
4.  等待该过程实际完成

像这样的东西：

```
try {
    ProcessBuilder builder = new ProcessBuilder()
            .command("/export/home/trace.sh", param1, param2, param3, param4);
    builder.redirectErrorStream(true);

    System.out.println("starting search");
    Process proc = builder.start();
    final BufferedReader bufferedreader = new BufferedReader(
            new InputStreamReader(proc.getInputStream()));
    new Thread() {
        @Override
        public void run() {

            try {
                String line = null;
                StringBuffer buffer = new StringBuffer(2048);
                while ((line = bufferedreader.readLine()) != null) {
                    buffer.append(line);
                }
            } catch (final IOException ioe) {
                ioe.printStackTrace();
            }
            // Do something with process output, if needed
        }
    }.start();

    proc.waitFor();
    System.out.println("end search " + System.currentTimeMillis());
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T05:14:31.187

您可以调试或打印`Process.getErrorStream`并`Process.getInputStream`检查子流程报告的错误。

我的猜测是您需要`/bin/sh`作为主程序调用并将脚本作为参数传递，但我不确定。我知道你必须在 Windows 上这样做。

# android - 为什么 NullPointer 异常

> ID：15779255
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:05:42.503
> 
> 标签：android

我在开发过程中遇到这个问题，这个类已经注册了androidManifest，但是还是有这个问题，在我确认无误后在androidManifest包名中使用

```
Error log:Unable to start activity ComponentInfo{com.cs.flyox/com.cs.flyox.activity.SelectFormWorkActivity}: java.lang.NullPointerException
'2013-04-02 19:28:33    
Error log:android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
'2013-04-02 19:28:33    
Error log:android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
'2013-04-02 19:28:33    
Error log:android.app.ActivityThread.access$600(ActivityThread.java:128)
'2013-04-02 19:28:33    
Error log:android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
'2013-04-02 19:28:33    
Error log:android.os.Handler.dispatchMessage(Handler.java:99)
'2013-04-02 19:28:33    
Error log:android.os.Looper.loop(Looper.java:137)
'2013-04-02 19:28:33    
Error log:android.app.ActivityThread.main(ActivityThread.java:4517)
'2013-04-02 19:28:33    
Error log:java.lang.reflect.Method.invokeNative(Native Method)
'2013-04-02 19:28:33    
Error log:java.lang.reflect.Method.invoke(Method.java:511)
'2013-04-02 19:28:33    
Error log:com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
'2013-04-02 19:28:33    
Error log:com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
'2013-04-02 19:28:33    
Error log:dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:33:08.837

在活动的 onCreate() 方法中，您正在进行一个返回空指针的调用。例如，在我的活动中，我做了一个这样的创建方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState, R.layout.landing);
    String pig = savedCueCardActivity.getAction();
} 
```

它创建了一个调试输出，如下所示：

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.raac.student/com.raac.student.LandingActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

因为这一行：

```
String pig = savedCueCardActivity.getAction(); 
```

返回一个空值。您的 onCreate 中有类似的内容，您应该可以通过在其中设置断点来找到它，或者更仔细地查看完整的调试器输出。

# ruby-on-rails - 模型的rspec未定义方法存根

> ID：15779257
> 
> 赞同：2
> 
> 时间：2013-04-03T05:05:45.227
> 
> 标签：ruby-on-rails, rspec

在我的新 Rails 应用程序中，我添加了一个带有脚手架的用户模型`rails g scaffold User name email`

它生成了一堆失败的测试。其中之一是：

```
require 'spec_helper'

describe "users/new" do
  before(:each) do
    assign(:user, stub_model(User,
      :name => "MyString",
      :email => "MyString"
    ).as_new_record)
  end

  it "renders new user form" do
    render

    assert_select "form[action=?][method=?]", users_path, "post" do
      assert_select "input#user_name[name=?]", "user[name]"
      assert_select "input#user_email[name=?]", "user[email]"
    end
  end
end 
```

我的 spec_helper.rb 是：

```
require 'rubygems'
require 'spork'
require 'capybara/rspec'

Spork.prefork do

end

Spork.each_run do

end

ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.mock_with :mocha
  config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.order = "random"
end 
```

但我得到了错误：

```
 2) users/new renders new user form
     Failure/Error: assign(:user, stub_model(User, NoMethodError:
       undefined method `stub' for #<User:0x57f0558>
     # ./spec/views/users/new.html.haml_spec.rb:5:in `block (2 levels) in <top (
required)>' 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:53:18.400

问题是您的`RSpec.configure`块指定`config.mock_with :mocha`，并且生成的脚手架代码`stub_model`与 mocha 不兼容（它使用`stubs`而不是`stub`您在 RSpec 代码中找到的）。

一种选择是使用移植到 mocha的 gem，例如[rspec-rails-](https://github.com/mislav/rspec-rails-mocha)`stub_model` mocha；另一个是用 RSpec 而不是 mocha 来模拟。

# html - 如何通过单击链接打开服务器上的文件夹

> ID：15779265
> 
> 赞同：0
> 
> 时间：2013-04-03T05:06:01.200
> 
> 标签：html, jsp

我有一些文档位于服务器上的共享文件夹中。我需要通过单击链接打开此文件夹以显示这些文档。我尝试使用`<a href="...">`，但没有奏效。我不想指向文件夹中的任何特定文件。如果是这种情况，那么它可以工作，但我想要做的是通过单击指定路径的链接来打开这个共享文件夹。

我可以使用的技术是 html、jsp、javascript、jquery。

请告知如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:46:51.367

使用 Java API 获取文件夹的文件并将每个文件显示为页面上的链接。

```
 File directory = new File("path of shared directory");
 File[] files = directory.listFiles(); 
```

将页面上的文件显示为链接，因此这将与您当前所做的相同，但它将获取该目录中的所有文件。

# java - 如何将字符串拆分为不同的变量

> ID：15779266
> 
> 赞同：1
> 
> 时间：2013-04-03T05:06:04.920
> 
> 标签：java, parsing

假设我有以下代码：

```
String s = "{U1,U2,U3},{U5,U7},{U4,U6,U8}"; 
```

我怎样才能使它看起来像下面？

```
String s1 = {U1,U2,U3};
String s2 = {U5,U7};
String s3 = {U4,U6,U8}; 
```

中的组合`s`可以是任何形式。s1, s2, s3 是不同的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:42:07.450

这是我的代码：

```
public class SplitString {
    public static void main(String[] args) {

        String s ="{U1,U2,U3},{U5,U7},{U4,U6,U8}";
        String[] splitted = s.split("},");

        // add the end brace for every entry except the last
        for (int i=0 ; i < splitted.length-1 ; i++) {
            splitted[i]=splitted[i] + "}";
        }

        // print out the string array
        for (int i=0; i< splitted.length ; i++) {
            System.out.println("String s"+i+" = "+splitted[i]);
        }
    }
} 
```

每次遇到两个字符时都会拆分`},`，将其放入“拆分”的字符串数组中，然后循环遍历字符串数组并`}`在除最后一个之外的每个字符的末尾添加一个。

输出：

```
String s0 = {U1,U2,U3}
String s1 = {U5,U7}
String s2 = {U4,U6,U8} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:15:40.927

您可以使用以下方法：

*   [public int indexOf(String str, int fromIndex)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28java.lang.String,%20int%29)确定出现的索引，如`"},{"`
*   [public String substring(int beginIndex, int endIndex)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)提取找到的索引之间的部分。

见[例子](http://ideone.com/DzH9PB)：

```
 public static void parse(String[] args) throws java.lang.Exception
  {
     String myString = "{U1,U2,U3},{U5,U7},{U4,U6,U8}";
     int begin = 0;
     int end = 0;
     String s1;
     while (end != -1){     
       end = myString.indexOf("},{", begin);

       if ((end < myString.length()) && ((begin < end)))
         s1 = myString.substring(begin, end + 1);
       else
         s1 = myString.substring(begin);

       begin = end + 2;
       System.out.println(s1);
     }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:01:03.523

通过使用`replace()`函数 replace `"{"`with`" "`和 split 基于`","`; 将这些值放入数组并对数组进行排序。现在您可以轻松地显示您想要的任何格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:18:25.307

```
public static void main(String... args) {

    String input = "{U1,U2,U3},{U5,U7},{U4,U6,U8}";

    Pattern pattern = Pattern.compile("\\{[^\\}]*\\}");
    Matcher matcher = pattern.matcher(input);
    while (matcher.find()) {
        String s = matcher.group();
        System.out.format("%s\n", s);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T05:20:45.587

`,}`按字符组合拆分。以下代码在 C# 中。我不知道确切的 Java 等效项。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string s = "{U1,U2,U3},{U5,U7},{U4,U6,U8}";

            string[] splitstring = Regex.Split(s,"},");
            // the string obtained are splitstring[0]= {U1,U2,U3 splitstring[1]={U5,U7    
            // splitstring[2]={U4,U6,U8}

           // Note only last string is not missing closing bracket so in a loop we append closing                 
          //  bracket to all strings except last string

            for (int i = 0; i < splitstring.Length; i++)
                if (i == splitstring.Length - 1)
                    continue;
                else
                    splitstring[i] = splitstring[i] + "}";

            foreach (string str in splitstring)
                Console.WriteLine("\n" + str);
        }
    }
} 
```

# iphone - UILabel 如何以数字格式显示

> ID：15779278
> 
> 赞同：0
> 
> 时间：2013-04-03T05:07:12.537
> 
> 标签：iphone, objective-c, uilabel

有没有办法`UILabel`像这样显示

*   xxxxxx
*   xxxxxx
*   xxxxxx

或者

1.  xxxxx
2.  xxxxx
3.  xxxxx
4.  xxxxx

我将在其中获取数据`UILabel`以及要动态显示的标签数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:41:54.790

根据 iAmbitious 的评论构建：

第一种情况：

```
NSArray *array = [NSArray arrayWithObjects:@"One",@"Two",@"Three", nil];    
NSMutableString *compoundString = [NSMutableString string];
NSString *bulletString = [NSString stringWithFormat:@"%C",0x2022];

for (NSString *str in array) {
    NSString *tempString = [NSString stringWithFormat:@"%@ %@\n",bulletString,str];
    [compoundString appendString:tempString];
}

self.textView.text=compoundString; 
```

第二种情况：用以下for循环替换for循环-

```
for (NSString *str in array) {
        NSString *tempString = [NSString stringWithFormat:@"%d. %@\n",[array indexOfObject:str]+1,str];
        [compoundString appendString:tempString];
    } 
```

上面使用了文本视图。如果要使用标签，请将行数属性设置为零并动态设置标签的高度，如下所示。你可以达到同样的效果：

```
CGSize lineSize = [@"DummyString" sizeWithFont:self.label.font] ;
CGFloat labelHeight = lineSize.height*array.count;
CGRect tempFrame = self.label.frame;
tempFrame.size.height=labelHeight;
self.label.frame=tempFrame; 
```

# regex - Perl将数字更改为单词

> ID：15779283
> 
> 赞同：1
> 
> 时间：2013-04-03T05:07:59.383
> 
> 标签：regex, numbers, normalization

在此之前，我已经问过同样的问题并得到了答案，但我错了。我需要在不使用任何库的情况下将数字转换为单词，尤其是 Lingua::Numbers。

我找到了一个示例来分隔电话号码中的数字。然后我尝试在我的脚本中实现该示例。但它没有用。

这是我的脚本。

```
$x = "1104";
$x =~ s/1/ one /gi; #from 1-10, I, substitute number to words to words
$x =~ s/2/ two /gi;
$x =~ s/3/ three /gi;
$x =~ s/4/ four /gi;
$x =~ s/5/ five /gi;
$x =~ s/6/ six /gi;
$x =~ s/7/ seven /gi;
$x =~ s/8/ eight /gi;
$x =~ s/9/ nine /gi;
$x =~ s/10/ ten /gi;
$y = ($x{1}[thousand]?$x{1}[hundred and]?$x{2});  

    #then I will insert all my $x into $y.

$x =~ s/$x/$y/gi; #Here i substitute again to change all number to words

#that is my idea.

print "$x"; 
```

我试着先把它变成 4 位数。如果成功，那么我可以继续插入，直到有 7-8 位或更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:58:08.073

在代码中执行此操作更加直观。这是 C# 的开始，但需要进行最少的更改才能在几乎任何类 C 语言中工作：

```
string Speak(int num)
{
    if (num < 0) return "negative " + Speak(-num);
    if (num >= 1000000000) return Speak(num / 1000000000) + " billion " + Speak(num % 1000000000);
    if (num >= 1000000) return Speak(num / 1000000) + " million " + Speak(num % 1000000);
    if (num >= 1000) return Speak(num / 1000) + " thousand " + Speak(num % 1000);
    if (num >= 100) return Speak(num / 100) + " hundred " + Speak(num % 100);
    if (num >= 20)
    {
        switch (num / 10)
        {
            case 2: return "twenty " + Speak(num % 10);
            case 3: return "thirty " + Speak(num % 10);
            case 4: return "forty " + Speak(num % 10);
            case 5: return "fifty " + Speak(num % 10);
            case 6: return "sixty " + Speak(num % 10);
            case 7: return "seventy " + Speak(num % 10);
            case 8: return "eighty " + Speak(num % 10);
            case 9: return "ninety " + Speak(num % 10);
        }
    }
    switch (num)
    {
        case 0: return "";
        case 1: return "one";
        case 2: return "two";
        case 3: return "three";
        case 4: return "four";
        case 5: return "five";
        case 6: return "six";
        case 7: return "seven";
        case 8: return "eight";
        case 9: return "nine";
        case 10: return "ten";
        case 11: return "eleven";
        case 12: return "twelve";
        case 13: return "thirteen";
        case 14: return "fourteen";
        case 15: return "fifteen";
        case 16: return "sixteen";
        case 17: return "seventeen";
        case 18: return "eighteen";
        case 19: return "nineteen";
    }
    return "";
} 
```

**例子：**

```
Speak("123000701") -> "one hundred twenty three million seven hundred one"; 
```

我将把它作为一个练习来添加对零、逗号和“和”字的支持。

# node.js - 包含的部分代码如何插入到父块中？

> ID：15779284
> 
> 赞同：2
> 
> 时间：2013-04-03T05:08:08.587
> 
> 标签：node.js, template-engine, swig-template

我想要做的是将`scripts`块`dropdown.swig`添加到`scripts`块中`template.swig`。
我的使用模式可能是错误的。我有一个使用`ejs-locals`模板引擎的工作代码，但我想切换到`swig`.

这是代码：

```
<!-- template.swig, to be extended -->
<body>
  <header>
    {% include "navbar.swig" %}
  </header>
  <!-- template scripts -->
  <script src="/scripts/jquery.min.js"></script>

  {% block body %}{% endblock %}

  <!-- child scripts -->
  {% block scripts %}{% endblock %}
</body>

<!-- index.swig, to be rendered-->
{% extends "template.swig" %}

{% block content %}
<div class="container row-fluid">
  body
</div> <!-- row-fluid -->
{% endblock %}

<!-- navbar.swig, to be included-->
<div class="navbar navbar-fixed-top">
    <!-- bootstrap navbar stuff -->
    <!-- ... -->

    {% if not hideDropDown %}
      {% include "dropdown.swig" %}
    {% endif %}
</div>

<!-- dropdown.swig, to be included-->
<div class="btn-group pull-right">
    <!-- bootstrap drop down menu stuff -->
    <!-- ... -->
</div>

{% block scripts %}
{% autoescape false %}
<script src="/scripts/bootstrap-dropdown.js"></script>
<script>
  $(document).ready(function() {
    $('.dropdown-toggle').dropdown();
  });
</script>
{% endautoescape %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:41:11.350

我们必须在 中进行多次扩展`swig`，请参阅[第 47 期](https://github.com/paularmstrong/swig/issues/147)（带有示例代码）。

谁能阐明`embed`标签是否可以解决我的需求？

# java - 使用斯坦福解析器给出的 Parse 分数检查句子的语法

> ID：15779288
> 
> 赞同：2
> 
> 时间：2013-04-03T05:08:34.957
> 
> 标签：java, parsing, nlp, grammar, stanford-nlp

我能够使用斯坦福解析器和下面的java代码解析一个句子并获得解析分数

```
LexicalizedParser lp = LexicalizedParser.loadModel(
    "edu/stanford/nlp/models/lexparser/englishPCFG.ser.gz"
);

lp.setOptionFlags(new String[]{"-maxLength", "80", "-retainTmpSubcategories"});

String sent = "My name is Rahul";
Tree parse = (Tree) lp.apply(sent);
double score = parse.score(); 
```

有没有办法使用斯坦福解析器给出的解析分数来检查句子的语法性？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T05:47:48.017

与@kutschkem 相比，我想说答案不是一个硬性的“不”，而是一个非常谨慎的“也许”。这绝对是一个活跃的研究领域。我已经看到（未发表的）工作表明长度归一化的解析分数（内部概率）表现出双峰分布，手动注释的“更差”句子通常落入较低的峰值，而“更好”的句子进入更高的峰值。那是针对一个特定的语料库（推文，如果我没记错的话），我不知道它是否在其他地方被复制。

更一般地说，句法解析信息对语法分类很有帮助，但可能不是唯一的分类特征。你可以看看 Joel Tetrault 和他在 ETS 工作的研究团队的一些工作。都柏林的 Jennifer Foster 在这方面也做了一些工作。他们的论文（和他们的参考书目）应该让你开始。

但是（不幸的是）构建一个有用的分类器并不像提取内部解析分数那么容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:14:28.837

所以你的问题是你是否可以检查句子在语法上是否正确？答案是不。例如，我曾经尝试通过简单的单词替换来生成问题并比较单词所有排列的解析分数。（我知道，这种方法很糟糕，但可以作为一个很好的例子）。然而，问题是，没有意义的句子（我不完全确定语法）的排名高于任何实际上是问题的排列。看到问题在用于训练语言模型的语料库中可能很少见，人们可以期待这种行为。如果你的分数很低，那只是意味着你的句子结构不常见，而不是语法不正确。实际上，语法错误的句子根本不应该被解析。说实话，

顺便提一句。“My Rahul is name”在语法上也是正确的；-)（好的，取决于你的语法）

# iphone - 应用提交到应用商店后是否可以进行 Gamecenter 沙盒测试？

> ID：15779289
> 
> 赞同：0
> 
> 时间：2013-04-03T05:08:38.960
> 
> 标签：iphone, ios, objective-c, xcode, game-center

我已经提交了包含游戏中心的应用程序。现在我想知道是否可以在应用商店上进行沙盒测试。

我需要测试多人游戏的应用程序。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:43:47.313

如果您运行调试构建（或任何未经批准的构建，我希望），它将连接到沙盒而不是生产游戏中心。如果这是针对未来版本的，您可能应该在 iTunes Connect 中添加一个版本并增加您的版本号，因为您需要这样做才能发布更新。

# c - 使用 fread 更改结构值 C 时遇到问题

> ID：15779290
> 
> 赞同：0
> 
> 时间：2013-04-03T05:08:41.653
> 
> 标签：c, struct, fwrite, fread

我的问题是，我认为......一切正常，但实际的块变量没有改变。它是 BLOCK 大小，为 512 个字节，其中第一个字节被列为 block.head[0,1,2,3]。所以我的程序使用 block.head[] 来查看它正在读入的文件块的前四个字节是否匹配。

所以我认为正在发生的是它正在将 BLOCK 数量读入文件，但实际上并没有改变 block.head 变量。因此，即使它正在读取文件的某个部分，它也不会更改它需要比较的变量。我认为在 fread 参数中写 &block 会改变这一点，但事实并非如此。

有什么想法吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

typedef uint8_t  BYTE;
typedef uint32_t DWORD;

typedef struct
{
    BYTE head[4];
    DWORD restofblock[127];
}
BLOCK;

int main (void)
{
    //open card.raw
    FILE* fp = fopen("file.file", "r");

    //default name for new files is new000.jpg
    char outfile[10] = "new000.jpg";

    // char* infile = argv[1];
    // FILE* inptr = fopen(infile, "r");

    FILE* output;
    output = NULL;

    //define a black
    BLOCK block;

    //While we haven't read past the end of the file
    while (block.head[1] != EOF)
    {
        //read a BLOCK of the .raw file
        fread(&block, sizeof(BLOCK), 1, fp);

        //dual "if" statements because I couldn't figure out how to combine them
        //checks to see if the first four BYTES of BLOCK block are a JPEG header
        if (block.head[0] == 255 && block.head[1] == 231 && block.head[2] == 255)
        {
            if (block.head[3] == 239 || block.head[3] == 240)
            {

                fclose(output);

                //designating c as a placeholder for the 3rd 0 in the filename
                //checks to see if c is above or equal to "9".
                //if it is, it resets "9" to "0" and increments the 2nd 0 in the filename by 1
                //if it isn't it adds 1 to the 3rd "0"
                char c = (outfile[5]);
                if (c >= 71) //71 is the ascii equivalent of 9
                {
                    outfile[5] -= 9;
                    outfile[4]++;
                }
                else
                    outfile[5]++;

                //Read forward 1 BLOCK to check for EOF, if EOF is false, read back to original position and print. 
                //Otherwise read back to initial position.
                fread(&block, sizeof(BLOCK), 1, fp);
                if(block.head[0] != EOF)
                {
                    fread(&block, -sizeof(BLOCK), 1, fp);
                    output = fopen(outfile, "w");
                }
                else
                    fread(&block, -sizeof(BLOCK), 1, fp);
            }
        }
        if (output == NULL);

        else
            fwrite(&block, sizeof(BLOCK), 1, output);

   }
    fclose(output);
    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:11:03.243

代替

```
while (block.head[1] != EOF) 
```

你应该这样读：

```
while (fread(&block, sizeof(BLOCK), 1, fp) > 0) 
```

我找不到您分配的任何地方`head[1] = EOF`，此外最初`block.head[1]`还有垃圾价值。因为您没有初始化它并在 while 条件下使用。

# css - Content Div 内的 100% 高度 Div

> ID：15779292
> 
> 赞同：0
> 
> 时间：2013-04-03T05:09:10.310
> 
> 标签：css, height

这是我的[网站](http://www.90slullaby.com/shoes-1/)

我试图让 SubCategory 栏的高度跨越整个内容 div。

我尝试将 min-heigh: 100%, height:100% 添加到内容 div 和 SubCategory div 但没有运气。

现在产品正在向右浮动，这是对我的问题的补救措施，但出于美学目的，我希望它们也向左浮动，但不要在 SubCategory div 下切割。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:25:24.350

如果您希望 .SubCategoryList 是 .Content .Block 父元素高度的 100%。

添加`position:relative`到`.Content .Block`. 然后添加`height:100%; position:absolute;`到`.SubCategoryList`.

看起来像这样：

```
.Content .Block { clear:both; position:relative;}
.SubCategoryList { padding-top:0px; position:absolute; height:100%} 
```

希望这能让你得到你所追求的。您可能还想查看有关 CSS`position`属性的更多信息：http: [//www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

# jquery - jqgrid 禁用默认客户端排序并手动处理

> ID：15779293
> 
> 赞同：2
> 
> 时间：2013-04-03T05:09:14.687
> 
> 标签：jquery, jquery-plugins, jqgrid

我正在使用带有**datatype:'local' 的**jqgrid ，我手动处理排序，在排序时我从服务器获取数据并使用**addRowData**绑定，但**在我的排序事件之前**，jqgrid 的默认客户端排序发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T06:21:03.780

在获取排序之前使用**清除**网格中 的记录`$('#gridelementid').jqGrid('clearGridData');`

# php - 如何通过 mongolab rest api 创建 web 服务，以便在 php 中使用 curl 进行基本数据库操作？

> ID：15779296
> 
> 赞同：4
> 
> 时间：2013-04-03T05:09:19.530
> 
> 标签：php, curl, mlab

我是 mongodb 和 mongolab 的新手。
任何人都可以告诉我如何通过 php 中的 curl 访问 mongolab 数据库，而不是通过 ajax。我想创建像 LOGIN、RESET_PASSWORD、RESIGTRATION 这样的 api。如何创建上面的 Web 服务。

我已经参考了[https://support.mongolab.com/entries/20433053-REST-API-for-MongoDB](https://support.mongolab.com/entries/20433053-REST-API-for-MongoDB)的文档。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:42:49.950

如果您正在运行启用 PHP 的服务器，我建议使用[MongoDB PHP 驱动程序](http://docs.mongodb.org/ecosystem/drivers/php/)进行连接。MongoLab REST API 真正适用于不需要服务器的应用程序。

# entity-framework - 在 Entity Framework 5 中更新没有级联到其导航属性的实体

> ID：15779298
> 
> 赞同：0
> 
> 时间：2013-04-03T05:09:32.407
> 
> 标签：entity-framework, entity-framework-4, entity-framework-5

我有一个实体集合作为导航属性（ICollection）。当我对父实体进行更新时，实际上并不包括对其字段的更改，而只是对其一个或多个子实体的字段进行更改，这些子实体的更改不会保留。需要做些什么来引起孩子们的这些变化？我是否需要遍历每一个并将其添加到更改集中？

我正在使用 Entity Framework 5，但我相信 4 也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:01:55.720

在这种情况下，我不确定您所说的更新是什么意思，但我猜您正在使用分离的实体并仅将父实体设置为已修改。这还不够，因为它没有传播到实体图的其余部分。您必须为受任何修改影响的每个实例设置状态。

# android - 更改精灵的父级

> ID：15779304
> 
> 赞同：0
> 
> 时间：2013-04-03T05:09:45.963
> 
> 标签：android, andengine

我有两个精灵 **BOX 和 EasyEnemy**。他们已经附在现场，并且随机移动。当它们相互碰撞时，我想将简单的敌人附加为 BOX 精灵的孩子。

EasyEnemy 来自场景中的通用池。我像往常一样遍历BOX sprite onManageUpdate() 和 BOX sprite create 内的所有**EasyEnemy 。**

这是我的代码：

```
private void moveBox() {
    aBox = new Sprite(0, 0, aResourceManager.boxTexture, vBOM) {

        @Override
        protected void onManagedUpdate(float pSecondsElapsed) {
            // Iterate over all Easy Enemy
            eIt = getEasyEnemyIterator();
            while (eIt.hasNext()) {
                final EasyEnemy ee = eIt.next();
                if (this.collidesWith(ee)) {
                    aResourceManager.mEngine
                            .runOnUpdateThread(new Runnable() {
                                @Override
                                public void run() {

                                    ee.clearEntityModifiers();
                                    ee.clearUpdateHandlers();
                                    ee.setIgnoreUpdate(true);
                                    ee.reset();                                     

                                    ee.setParent(aBox);
                                    aBox.attachChild(ee);

                                }
                            });

                }

            }

            super.onManagedUpdate(pSecondsElapsed);

        }

    };
    attachChild(aBox);
    aBox.registerEntityModifier(new MoveModifier(15, 360, 360, 0, 1200));
    aBox.setZIndex(9990);
} 
```

我得到了类似的错误

```
E/AndroidRuntime(2876): FATAL EXCEPTION: UpdateThread
E/AndroidRuntime(2876): java.lang.IllegalStateException: pEntity 'EasyEnemy' already has a parent: ''. New parent: ''!
E/AndroidRuntime(2876):     at org.andengine.entity.Entity.assertEntityHasNoParent(Entity.java:1412) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:14:53.773

当我发生碰撞时，此方法被多次调用，因此尝试多次附加一个子父级，并且您已经知道一个子级一次只能有一个父级。因此，要么您需要更改逻辑以便仅调用一次碰撞方法，要么您需要在 ee.setParent(aBox); 之前调用 ee.detachself()；

# html - 菜单总是重新定位

> ID：15779311
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:10:06.097
> 
> 标签：html, css

我试图使用 a 来制作菜单栏和登录页面`div`，但是当我调整浏览器的大小（我使用的是 Chrome）时，这些`div`更改会出现在两侧。

这是一个演示：http: [//jsfiddle.net/xVenw/](http://jsfiddle.net/xVenw/)

如您所见，它不是一行菜单。调整大小时会添加另一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:48:10.397

如果您不希望菜单项包装，请使用`white-space: nowrap`并制作列表项`display: inline-block`：

```
nav > ul > li {
    display: inline-block;
    white-space: nowrap;
} 
```

我建议清理你的代码，它在 Fiddle 中非常混乱，并且有许多重复和模糊的 CSS 选择器。

# clojure - lein repl 中的错误（需要帮助调试 jvm stacktrace）

> ID：15779315
> 
> 赞同：2
> 
> 时间：2013-04-03T05:10:34.347
> 
> 标签：clojure

每当我尝试启动我的 repl 时，我都会收到以下错误 -

```
 ➜  mashup git:(dev) ✗ lein repl
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Exception in thread "main" java.lang.ClassNotFoundException: org.mortbay.log.Logger
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at clojure.lang.DynamicClassLoader.findClass(DynamicClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:188)
    at ring.util.serve$eval11483$loading__4784__auto____11484.invoke(serve.clj:1)
    at ring.util.serve$eval11483.invoke(serve.clj:1)
    at clojure.lang.Compiler.eval(Compiler.java:6511)
    at clojure.lang.Compiler.eval(Compiler.java:6501)
    at clojure.lang.Compiler.load(Compiler.java:6952)
    at clojure.lang.RT.loadResourceScript(RT.java:359)
    at clojure.lang.RT.loadResourceScript(RT.java:350)
    at clojure.lang.RT.load(RT.java:429)
    at clojure.lang.RT.load(RT.java:400)
    at clojure.core$load$fn__4890.invoke(core.clj:5415)
    at clojure.core$load.doInvoke(core.clj:5414)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:5227)
    at clojure.core$load_lib.doInvoke(core.clj:5264)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:603)
    at clojure.core$load_libs.doInvoke(core.clj:5298)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:605)
    at clojure.core$use.doInvoke(core.clj:5392)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at user$eval11479.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:6511)
    at clojure.lang.Compiler.eval(Compiler.java:6500)
    at clojure.lang.Compiler.eval(Compiler.java:6500)
    at clojure.lang.Compiler.eval(Compiler.java:6501)
    at clojure.lang.Compiler.eval(Compiler.java:6477)
    at clojure.core$eval.invoke(core.clj:2797)
    at clojure.main$eval_opt.invoke(main.clj:297)
    at clojure.main$initialize.invoke(main.clj:316)
    at clojure.main$null_opt.invoke(main.clj:349)
    at clojure.main$main.doInvoke(main.clj:427)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.lang.Var.invoke(Var.java:419)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.main.main(main.java:37)
REPL server launch timed out. 
```

这并没有给我任何关于什么是错误或缺失的迹象。关于我可以做些什么来发光的任何想法？

### 编辑

根据要求的 JVM 目录列表

```
ls /usr/lib/jvm/java-7-openjdk-i386/lib 
ct.sym  dt.jar  ir.idl  jconsole.jar  jexec  orb.idl  sa-jdi.jar  tools.jar 
```

### 编辑 - project.clj

```
(defproject mashup "0.1.0"
  :description "Mashup Generator"
  :url "http://github.com/murtaza52/mashup"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [compojure "1.1.5" :exclusions [[commons-io] [ring/ring-core] org.clojure/tools.macro]]
                 [clj-oauth "1.4.0"]
                 [org.apache.httpcomponents/httpclient "4.2.3"]
                 [org.thnetos/cd-client "0.3.4" :exclusions [[org.clojure/clojure] clj-http cheshire commons-codec]]
                 [ring/ring-core "1.2.0-beta1"]
                 [twitter-api "0.7.2" :exclusions [[org.apache.httpcomponents/httpclient] [org.apache.httpcomponents/httpmime]]]
                 [tentacles "0.2.4" :exclusions [[cheshire] clj-http]]
                 [webfui "0.2.1"]
                 [clj-time "0.4.4"]
                 [shoreleave "0.3.0"]
                 [shoreleave/shoreleave-remote-ring "0.3.0"]
                 [shoreleave/shoreleave-remote "0.3.0"]
                 [domina "1.0.1"]
                 [org.clojure/google-closure-library-third-party "0.0-2029"]
                 [org.slf4j/slf4j-log4j12 "1.7.3"]]
  :plugins [[lein-ring "0.8.3" :exclusions [org.clojure/clojure]]
            [lein-cljsbuild "0.3.0" :exclusions [org.clojure/clojure]]
            [lein-midje "3.0.0"]
            [lein-marginalia "0.7.1"]]
  :ring {:handler mashup.handler/app}
  :repl-options {:init-ns mashup.handler
                 :init (do
                         (use 'ring.util.serve)
                         (serve app))}
  :profiles {:dev {:dependencies [[ring-mock "0.1.3"]
                                  [ring-serve "0.1.2" :exclusions [[ring/ring-devel] [ring/ring-jetty-adapter]]]
                                  [midje "1.5.0" :exclusions [joda-time]]
                                  [marginalia "0.7.1" :exclusions [org.clojure/tools.namespace]]]}}
  :cljsbuild {
              :builds
              [{:source-paths ["src-cljs"],
                :compiler
                {:pretty-print true,
                 :output-to "resources/public/js/cljs.js",
                 :optimizations :whitespace}}],
              :repl-listen-port 9000}) 
```

代码在网址上 - [https://github.com/murtaza52/mashup](https://github.com/murtaza52/mashup)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:12:47.900

新的堆栈跟踪表明您缺少 Jetty 库（`org.mortbay.*`通常是 Jetty 6.x），这是一个问题，因为`ring-serve`尝试启动开发 Jetty 服务器。该`ring-jetty-adapter`库将 Jetty 作为依赖项引入；删除此排除项应该会让您直截了当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:32:15.470

鉴于您之前粘贴的堆栈跟踪`:init`，您的`:repl-options`密钥看起来非常可疑（您已经编辑了堆栈跟踪 - 那里有什么交易？）。怎么能`(serve app)`不参考住哪里呢*？* `app`

# java - 基本 Java 语法问题

> ID：15779318
> 
> 赞同：1
> 
> 时间：2013-04-03T05:10:37.090
> 
> 标签：java

我正在做家庭作业（我不是一个说谎的人），老实说，我被这些问题难住了。我有 3 年的编程经验，但被课堂上一些最简单的问题难住了，哈哈。Java 新手，而不是编程新手。我想讨论为什么这些问题会导致答案，以及为什么它是这样或那样的。

1) 写 3.4，这是双精度数还是浮点数？

我想说它默认为浮点数，因为它占用的空间（32 位）与双（64）位相比更少。由于 3.4 是一个小数字，我会假设它是一个浮点数？

2) 将 x 声明为双精度数，并将其赋值为 3.4（作为双精度数）。

我认为这`double x = 3.4d;`不是 100% 确定的

3) 将 y 声明为浮点数并将其赋值为 3.4（作为浮点数）。

与上面类似，我认为是`float y = 3.4f;`

通常不会有人来这里以这种方式寻求硬件帮助……但我又没有教科书了，因为我刚订购了它。我宁愿讨论为什么它是这样或那样的，这样我就可以更好地理解 Java 的工作原理。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:13:15.367

在第一个问题上，`3.4`是一个`double`。如果你想要一个`float`文字，你会使用`3.4f`.

* * *

第二个问题：

```
double x = 3.4; // trailing D/d is optional and rarely used. 
```

* * *

第三个问题，您是对的，将其声明为并在文字上`float`使用后缀。`f`

* * *

有关更多详细信息，请参见[此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)，特别是标题为 的部分`Floating-Point Literals`，复制到此处，稍作修改以强调：

> 如果浮点字面量以字母 F 或 f 结尾，则它的类型为 float；否则它的类型是 double 并且可以选择以字母 D 或 d 结尾。
> 
> 浮点类型（float 和 double）也可以使用**E**或**e**（用于科学计数法）、**F**或**f**（32 位浮点字面量）和**D**或**d**（64 位双精度字面值；*这是默认值并由约定被省略）。*

```
double d1 = 123.4;
double d2 = 1.234e2; // same value as d1, but in scientific notation
float f1  = 123.4f; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:13:23.390

1.  3.4 是双精度数，`f`在它后面加上一个浮点数。
2.  正确，但请记住`;`在行尾添加 a。
3.  和上面一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:14:13.300

默认情况下，Java 浮点文字是双精度的，就像您指定了`d`修饰符一样。如果您想要 32 位浮点数，则必须显式声明`f`修饰符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:14:33.373

1.  默认情况下，java 将浮点文字视为双精度值。因此 3.4 是两倍。
2.  双 x = 3.4;
3.  你写的是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T05:19:02.223

如果它是浮点数，则意味着您必须像这样声明 float y = 3.4* *f* * .f 向 jvm 表明它是一个浮点数。如果您忘记 f (3.4f)，它将默认视为双精度并且需要 64 位

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T05:23:43.273

从您的评论中：

```
I'm curious, why are they doubles by default 
```

（恕我直言）我认为高精度比低精度好。当您尝试时，Java（C 中也是如此）可以向下转换为浮点数，因此这不会引起问题。

# java - java中用于视频隐写术的类

> ID：15779319
> 
> 赞同：0
> 
> 时间：2013-04-03T05:10:40.533
> 
> 标签：java, steganography

我已经在 java 中实现了图像和音频隐写术，现在我想实现视频隐写术。但是，我仍然无法找到用于执行此操作的类，例如允许我以二进制形式查看视频数据的类（因为我将使用 lsb 替换技术）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T19:06:36.450

我去年的毕业证书项目是我使用 netbeans IDE 开发的视频速记，我将在这里发布代码，我是如何完成所有过程的。

```
package Stegnography;

import java.io.File;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
import java.io.FileInputStream;
import java.io.FileOutputStream;

/**
 *
 * @author DeepRocks
 */
public class EmbProcess {
    String embfilename;
    public String emb(String s, String s1)
    {
        try{
        File file = new File(s);
        File file1 = new File(s1);
        FileInputStream fileinputstream = new FileInputStream(s);
        FileOutputStream fileoutputstream = new FileOutputStream("temp");
        byte abyte0[] = new byte[8];
        int i;
        int k;
        for(k = 0; (i = fileinputstream.read(abyte0, 0, 8)) > 0; k = i)
            fileoutputstream.write(abyte0, 0, i);

        fileinputstream.close();
        for(int l = 1; l <= 8 - k; l++)
            fileoutputstream.write(65);

        fileoutputstream.write("DATAFILE".getBytes(), 0, 8);
        System.out.println("File name==="+file1.getName());
        StringBuffer stringbuffer = new StringBuffer(file1.getName());
        stringbuffer.setLength(50);
        fileoutputstream.write(stringbuffer.toString().getBytes(), 0, 50);
        fileinputstream = new FileInputStream(s1);
        int j;
        while((j = fileinputstream.read(abyte0, 0, 8)) > 0) 
            fileoutputstream.write(abyte0, 0, j);
        fileinputstream.close();
        fileoutputstream.close();
        file.delete();
        File file2 = new File("temp");
        file2.renameTo(file);
        embfilename=file.getName();
        }
        catch(Exception e){
            e.printStackTrace();
            embfilename="";
        }
        return embfilename;
    }

    public String demb(String s)
    {
        boolean flag;
        String demfile = "";
        try
        {
            File file = new File(s);
            String outpath=s.substring(0, s.lastIndexOf("\\")+1);
            FileInputStream fileinputstream = new FileInputStream(s);
            char c = '\b';
            byte abyte0[] = new byte[c];
            String s1 = "";
            int i;
            while((i = fileinputstream.read(abyte0, 0, c)) > 0) 
            {
                s1 = new String(abyte0);
                if(s1.equals("DATAFILE"))
                    break;
            }
            if(!s1.equals("DATAFILE"))
            {
                flag=false;
                fileinputstream.close();
                return demfile;
            }
            abyte0 = new byte[50];
            fileinputstream.read(abyte0, 0, 50);
            s1 = new String(abyte0);
            String s2 = s1.trim();
            String fpath = s2.substring(0, s2.lastIndexOf(".") + 1) + "enc";
            System.out.println("fpath------"+fpath);
            FileOutputStream fileoutputstream = new FileOutputStream(outpath+fpath);
            c = '\u5000';
            abyte0 = new byte[c];
            while((i = fileinputstream.read(abyte0, 0, c)) > 0) 
                fileoutputstream.write(abyte0, 0, i);
            fileinputstream.close();
            fileoutputstream.close();
            demfile=fpath;
        }
        catch(Exception exception)
        {
            demfile="";
            exception.printStackTrace();
            System.out.println(exception);
        }
        return demfile;
    }

}**THIS CODE IS FOR EMBEDDING PROCESS** 
```

请清楚你真正想要什么，我会帮你看看我的代码，如果它对你有帮助，我会给你我的项目。

# iphone - 如何防止 iphone 应用程序在非视网膜设备上运行？

> ID：15779320
> 
> 赞同：1
> 
> 时间：2013-04-03T05:10:44.800
> 
> 标签：iphone, ios, retina-display

我希望我的应用仅在 Retina 设备上运行。如何禁用对非 Retina iPhone 的支持？那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T05:20:18.227

由于 iPhone 3G、3Gs、4、4S 的屏幕尺寸相同；您将无法找出其中哪一个是视网膜显示器（AFAIK）。但是，从 iPhone4 开始，该设备具有前置摄像头，因此，您可以使用它。您可以让您的应用程序需要**前置摄像头**（只是一个示例；还有其他硬件，从 iPhone4 新引入）设备功能。

这些是在应用程序的 plist 文件中使用`UIRequiredDeviceCapabilities`密钥指定的。

前置摄像头，将其限制在具有该功能的设备上，**消除了 3G 和 3GS**（它们是非视网膜显示器）。

更多细节[`UIRequiredDeviceCapabilities`](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:30:39.003

它可能会起作用！一种骇人听闻的方式！

你需要两张图片 temp.png 和 temp@2x.png

在您的第一个视图控制器`UIButton`中，从视图中隐藏，设置它的背景图像 --- temp.png，当您`viewDidLoad`调用时，将为该按钮设置背景图像，之后，您可以检查`if([buttonObject currentBackgroundImage] == [UIImage imageNamed:@"temp@2x.png"])`它的`retina`支持设备，你可以向用户显示一些信息，或者做任何你想做的事情！

# oracle - 在oracle中插入系统日期

> ID：15779321
> 
> 赞同：10
> 
> 时间：2013-04-03T05:10:46.943
> 
> 标签：oracle

如何使用 oracle 10g 将 dd/mm/yyyy 中的系统日期插入到表中？

在使用以下查询时，它将系统日期插入为 03/04/0013。我需要 2013 年 3 月 4 日。你能帮我解决这个问题吗？

```
insert into GtTable 
values('111','Name',300,'Tour',to_date('02/04/2012','DD/MM/YYYY'),to_date(sysdate,'DD/MM/YYYY')); 
```

但是当直接插入'02/04/2012'时，它接受与'02/04/2012'相同。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T05:22:13.323

你不应该`TO_DATE`在约会时激活

`sysdate`已经是一个日期，当您将`TO_DATE`它作为第一个参数运行时，您会使 Oracle 隐式将其转换为一个字符串，根据该字符串`NLS_DATE_FORMAT`在您的情况下可能包含`YY`而不是`YYYY`.

oracle 中的日期是表示日期和时间的数字，它没有“格式”，如果要插入 sysdate 而没有时间值，则需要像这样截断它：

```
insert into GtTable 
values('111','Name',300,'Tour',to_date('02/04/2012','DD/MM/YYYY'),trunc(sysdate)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T05:21:56.610

如果插入的最后一个字段是日期类型字段，则不需要对 SYSDATE 进行任何转换，因此，以下内容应该没问题：

```
insert into GtTable 
values('111', 'Name', 300, 'Tour', to_date('02/04/2012','DD/MM/YYYY'), sysdate); 
```

但如果它是一个 varchar 字段，则以下内容应该有效：

```
insert into GtTable 
values('111', 'Name', 300, 'Tour', to_date('02/04/2012','DD/MM/YYYY'), to_char(sysdate, 'dd/mm/yyyy')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:30:13.427

我认为显示的格式是由于环境参数。 TO_CHAR(SYSDATE,'DD/MM/YYYY') 可以让您将系统日期插入为 DD/MM/YYYY ，但是，它不再是日期类型了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-29T21:59:50.897

对我有用的解决方案如下

```
insert into method (id,name,created_by,updated_by, created_at, updated_at) values (1,'GET',0,0,TO_CHAR(SYSDATE,'DD/MM/YYYY hh:mm:ss'),null); 
```

# ruby-on-rails-3.2 - 如何在不同的模型视图中闪烁错误

> ID：15779330
> 
> 赞同：0
> 
> 时间：2013-04-03T05:11:19.880
> 
> 标签：ruby-on-rails-3.2, messages

我对 Rails 有点陌生，所以请多多包涵。

我有 2 个模型客户和产品。产品是依赖的，因此，在客户端显示视图中，我创建了一个产品创建表单。创建成功或不成功后，我返回客户端显示视图。如果创建出错，我想在那里显示任何错误，但我似乎无法访问我在尝试创建 Product 实例时使用的@product 来解决它的错误。重定向到 client_path(client) 时是否必须传递该 @product？如果是这样，怎么办？

顺便说一句，成功是有效的，因为我使用 Flash 来展示这一点，但是对于错误，我确实想在表格上方的不同位置显示它们。如果没有其他方法，我想我应该将错误传递给 flash，但我也不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:33:27.477

你是对的......重定向到client_path（client）时你必须通过@product..例如......client_path（client，@product）

您可以在客户端显示页面中显示错误消息，如下所示

```
 <% if @product.errors.any? %>
          <div class="alert alert-error">
            <ul>
              <% @product.errors.full_messages.each do |msg| %>
                  <li> <%= msg %></li>
              <% end %>
            </ul>
          </div>
      <% end %> 
```

# cocoa - Foundation 命令行工具，来自参数的文件

> ID：15779331
> 
> 赞同：1
> 
> 时间：2013-04-03T05:11:28.163
> 
> 标签：cocoa, command-line-arguments, nsfilemanager, foundation

我正在使用基础框架在 Xcode 中创建一个命令行工具，但我对处理文件路径的基础知识感到困惑。第一个参数是文件 (myfile.txt) 或文件路径 (./myfile.txt)。我想将此参数转换为文件的绝对路径（或 URL）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:28:29.483

使用`-[NSURL fileURLWithPath:]`.

```
int main(int argc, char *argv[]) {
  @autoreleasepool {
    if(argc < 2)
    {
      fprintf(stderr, "Usage: %s [file path]\n", argv[0]);
      exit(-1);
    }

    NSURL *f = [NSURL fileURLWithPath:[NSString stringWithUTF8String:argv[1]]];
    /* Do something with f */
  }

  return 0;
} 
```

# kendo-ui - 在剑道图表工具提示未正确显示

> ID：15779332
> 
> 赞同：2
> 
> 时间：2013-04-03T05:11:31.633
> 
> 标签：kendo-ui

![在此处输入图像描述](https://i.stack.imgur.com/KksOY.png)我正在研究剑道控件。我的应用程序中有剑道股票图表。我正在为图表提供工具提示功能。但它没有显示值，它将值显示为“未定义”。使用允许我们的事件时自定义条形\折线图的工具提示。传递给事件的数据项作为 Undefined 返回。那么，是否有我可以设置的属性允许自定义工具提示，即使它们在一个小区域中有很多点。示例：模板：“#= dataItem.employeeName #”。我的图表代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:57:32.270

例如，在您的代码中，您必须在模板定义`#= dataItem.<fieldName> #`中使用：`Freight :#=dataItem.Freight# <br/>`因为`data`KendoUI`template`处理器接收到的结构是`dataItem.<fieldName>`.

所以你的模板应该是：

```
template: "#OrderDate:#=dataItem.OrderDate# <br/>Freight :#=dataItem.Freight# <br/>ShipVia:#=dataItem.ShipVia# <br/> ShipCity:#= dataItem.ShipCity#" 
```

**注意**作为调试技巧，您可以定义为`template`：

```
template: "#console.log('data', data);#" 
```

这将执行由 . 括起来的代码`#`。Kendo UI 模板管理器定义为`data`您可用的实际数据，例如：

```
using(data) {
    // Template expanded code
}; 
```

这样可以正确使用`#= dataItem.ShipCity #`，但不会阻止您继续使用`data`. 我们利用这一点在浏览器控制台上显示`data`并检查其结构。

您在此处修改的 JSFiddle：http: [//jsfiddle.net/OnaBai/5bchz/64/](http://jsfiddle.net/OnaBai/5bchz/64/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T07:30:09.503

在javascript 块的 kendo UI 模板中添加**#debugger;#**关键字作为**断点。**打开浏览器控制台。浏览器自动命中断点。

# vba - 声明关闭时编译错误

> ID：15779333
> 
> 赞同：2
> 
> 时间：2013-04-03T05:12:02.840
> 
> 标签：vba, excel, excel-2007

平台：Microsoft Visual Basic 6.5 和 MS Excel 2007

我正在尝试做一个宏来对一个 excel 启用文件进行一些编辑。研究了如何在不保存的情况下关闭 Excel 文件。该[网页](http://msdn.microsoft.com/en-sg/library/microsoft.office.tools.excel.workbook.close%28v=vs.80%29.aspx)教我先声明，然后才能使用该方法。我插入复制命令并尝试编译。出现编译错误，预期语句结束。有人知道声明有什么问题吗？

```
Public Overridable Sub Close ( _
    <OptionalAttribute> SaveChanges As Object, _
    <OptionalAttribute> Filename As Object, _
    <OptionalAttribute> RouteWorkbook As Object _
)

Private Sub WorkbookClose()
    Me.Close(False, False)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:08:15.770

如果它在 excel 中的宏将下面的代码复制到代码的这个工作簿部分。

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    Me.Close False
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/JfGsG.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:02:47.453

双击“ThisWorkbook”并输入以下代码：

```
Option Explicit

Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

    Cancel = True
    MsgBox "Save Is Not Allowed"

End Sub 
```

# oracle - 如何在触发器中使用复合主键（Oracle DB）

> ID：15779335
> 
> 赞同：0
> 
> 时间：2013-04-03T05:12:05.857
> 
> 标签：oracle, plsql, triggers

我创建了下表

创建表选项卡（id NUMBER，val VARCHAR2（50），last_date DATE，PRIMARY KEY（id，val））

我正在使用以下 PL/SQL 块来创建触发器

```
create or replace TRIGGER TRIG AFTER INSERT OR UPDATE OR DELETE ON tab 
    FOR EACH ROW 
    DECLARE
           l_enqueue_options DBMS_AQ.enqueue_options_t;
           l_message_properties DBMS_AQ.message_properties_t;
           l_txn_event_msg tab_PAYLOAD;
           l_message_handle RAW(16);
           ERR_MSG VARCHAR2(600);
           primaryKey VARCHAR2(4000);
           opnCode VARCHAR2(10);
    BEGIN
           IF INSERTING THEN
               opnCode := 'INSERT';
               primaryKey := :new.id;
           ELSIF UPDATING THEN
               opnCode := 'UPDATE';
               primaryKey := :new.id;
           ELSIF DELETING THEN
               opnCode := 'DELETE';
               primaryKey := :old.id;
           END IF;

           l_txn_event_msg := tab_PAYLOAD(
                primaryKey, opnCode, sysdate,:new.id,'DUMMY'
           );

           DBMS_AQ.enqueue(
              queue_name => 'tab_Q',
              enqueue_options => l_enqueue_options,
              message_properties => l_message_properties,
              payload => l_txn_event_msg,
              msgid => l_message_handle
           );

      EXCEPTION
           WHEN NO_DATA_FOUND THEN NULL;
           WHEN OTHERS THEN
                ERR_MSG := sqlerrm || ' Error while executing trigger TRIG_UB.';
                DBMS_OUTPUT.PUT_LINE('Some exception occured in tab ==>' || ERR_MSG);
      END; 
```

现在上面的触发器正确吗？我想在触发器中使用复合主键，例如 primaryKey := :new.id|||||old.id; 如果我错了，请纠正我？

# r - 在乳胶xtable中换行

> ID：15779340
> 
> 赞同：0
> 
> 时间：2013-04-03T05:12:36.577
> 
> 标签：r, latex, knitr, word-wrap, xtable

我正在使用 knitr 和 xtable 生成一个表格，我想包装一些文本。代码如下。我想包装第三列（曝光组）。列宽看起来不错，但文本没有换行。代码有什么问题？

```
TableSumStatsAllPeriods <- xtable(reduced.res.Q4000.THC,
                      caption="Summary statistics ",
                      label="TableSumStatsAllPeriods",
                      align = "llp{4cm}cccccc") 
```

@

\newpage \begin{风景}

```
<<printTableSumStatsAllPeriods, echo = FALSE, eval=TRUE,results = "asis" >>=
print(TableSumStatsAllPeriods,tabular.environment='longtable',floating=FALSE,
  caption.placement="top",
  size="small",
  h.line.after=c(-1,nrow(TableSumStatsAllPeriods)),
  add.to.row=list(pos=list(0),command="\\hline \\endhead")) 
```

@ \end{风景}

![示例表](https://i.stack.imgur.com/WrNyO.png)

# asp.net - 尝试使用 vb.net 在 asp.net 中获取 gridview 的当前单元格值

> ID：15779343
> 
> 赞同：0
> 
> 时间：2013-04-03T05:12:45.810
> 
> 标签：asp.net, vb.net, gridview

```
Protected Sub GridView1_RowUpdating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles GridView1.RowUpdating
sqlqrystrng = "UPDATE temp_zone set zone_id = @zoneid, zone_name = @zonename WHERE auto_id = @autoid"
Dim strautoid As String = GridView1.Rows(e.RowIndex).Cells(1).Text()
End Sub 
```

但strautoid总是包含“”......怎么办

## gridview的html

```
<asp:GridView ID="GridView1" runat="server" "AutoGenerateColumns="False" GridLines="None">   
     <RowStyle BackColor="#CCFFFF" ForeColor="#333333" />
     <Columns>
        <asp:TemplateField HeaderText="Auto Id">
           <ItemTemplate>
               <asp:Label ID="Label1" runat="server" Text='<%# Eval("auto_id") %>'>
               </asp:Label>
           </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Zone Id">
           <ItemTemplate>
               <asp:Label ID="Label2" runat="server" Text='<%# Eval("zone_id") %>'>
               </asp:Label>
           </ItemTemplate>
          <EditItemTemplate>
               <asp:TextBox ID="grdtxt_id" runat="server" Text='<%# Eval("zone_id") %>'>
               </asp:TextBox>
          </EditItemTemplate>
       </asp:TemplateField>
       <asp:CommandField HeaderText="Edition" ShowEditButton="True" CausesValidation="False" />
       <asp:CommandField HeaderText="Deletion" ShowDeleteButton="True" CausesValidation="False" />
    </Columns>
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
 </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:02:29.263

```
You Have to Try this 

Dim strautoid As String = GridView1.Rows(e.RowIndex).Cells(1).Text()  instead of this ,try below

 TableCell cl = GridView1.Rows[e.RowIndex].Cells[1];

(Label) lbl=(Label).cl.FindControl("Your Label ID");

Dim strautoid As String=lbl.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:59:11.027

我还没有完全检查过，但你需要这样的东西：

```
Dim lblCell as label = GridView1.Rows(e.RowIndex).Cells(1).FindControl("labelID")
Dim strautoid As String = lblCell.Text 
```

正如我所说，还没有完全检查，但正确的关键在于 FindControl 方法，我希望这会有所帮助。

# plsql - Oracle 与 SQL Server 的@@IDENTITY 对应的是什么？

> ID：15779346
> 
> 赞同：0
> 
> 时间：2013-04-03T05:13:06.547
> 
> 标签：plsql, sql-server-2008-r2, oracle11g

Oracle 与 SQL Server 的对应物是`@@IDENTITY`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:09:56.120

鉴于 Oracle 没有标识列，您通常会为每个表创建一个序列并使用该序列来填充主键。假设您已经这样做了，您可以获得`currval`序列的 以获取当前会话的最近生成的序列值。

```
SQL> create table foo(
  2    col1 number primary key,
  3    col2 varchar2(10)
  4  );

Table created.

SQL> create sequence foo_seq;

Sequence created.

SQL> ed
Wrote file afiedt.buf

  1  create or replace trigger foo_trg
  2    before insert on foo
  3    for each row
  4  begin
  5    :new.col1 := foo_seq.nextval;
  6* end;
SQL> /

Trigger created.

SQL> insert into foo( col2 )
  2    values( 'foo' );

1 row created.

SQL> insert into foo( col2 )
  2    values( 'bar' );

1 row created.

SQL> select foo_seq.currval
  2    from dual;

   CURRVAL
----------
         2 
```

# sql - sql查询以获取给定列集的最新数据

> ID：15779347
> 
> 赞同：1
> 
> 时间：2013-04-03T05:13:09.267
> 
> 标签：sql, postgresql

我有一个 postgres 表，它代表我表中“元素”的历史记录。一个元素由 2 列的分组决定

历史数据具有诸如“已保存”或“已删除”之类的操作，对于任何元素都可能发生多次。这些是相互排斥的，所以当我查看当前状态时，请关注最近的操作。

我想计算一个元素的“已保存”事件的数量。这需要是对每个元素“保存”的最近历史事件的计数。是否有一个 SQL 查询可以很好地做到这一点？我有2个我想浓缩。

**表列**：time（时间戳）、user_id（int）、file_name（字符串）、action_type（字符串）

`user_id`+`file_name`组合决定了我关心的“元素”，但这个组合在表中并不是唯一的

我想要什么：获取最近将其“保存”为操作的所有用户的文件“index.html”的计数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:17:28.623

你可以使用类似下面的东西。它首先过滤掉 index.html 的所有 SAVED 记录。然后，它丢弃任何存在同一用户和文件的新记录的记录。

因此，如果用户 1 在 09:00 和 12:00 保存文件，则只有 12:00 的记录会计算在内。

```
select count(*) from tableName t
where t.action_type = 'SAVED'
and t.filename = 'index.html'
and not exists 
   (select * from tableName t2
    where t2.user_id = t.user_id and t2.filename = t.filename
    and t2.time > t.time
    and t2.action_type = 'SAVED') 
```

如果您想要它以使更新的删除记录停止计算保存，请删除该`and t2.action_type = 'SAVED'`位

这样，如果 user1 在 09:00 保存文件并在 11:00 将其删除，则任何记录都不会计算在内。删除的记录不包含在结果中（因为`t.action_type = 'SAVED'`），但它比 09:00 记录更新，因此停止显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:23:31.880

由于***“最近”***没有正确的定义，查询可以是：

```
select count(*) from tlbName where filename='index.html' and action='saved' 
```

**如果有时间，那么：**

```
select count(*) from tlbName where filename='index.html' and action='saved' and timestamp between 'timeval_1' and 'timeval_2' 
```

希望它有帮助。

# python - 使用 numpy 扩展当前编写的 Klatt C 程序以与脚本交互

> ID：15779348
> 
> 赞同：0
> 
> 时间：2013-04-03T05:13:10.493
> 
> 标签：python, numpy, python-c-api, speech-synthesis

目前我正在使用 Klatt 创建元音，它是用 C [http://www.cs.cmu.edu/afs/cs/project/ai-repository/ai/areas/speech/systems/klatt/](http://www.cs.cmu.edu/afs/cs/project/ai-repository/ai/areas/speech/systems/klatt/)编写和编译的。我通过调用输出 .wav 文件的终端命令，使用 Python 程序自动创建元音。然后 Python 程序从磁盘中读取该波形文件。我正在考虑用 Python 编写 Klatt 代码，或者是否可以轻松扩展 Klatt 代码，以便将 .wav 文件返回到我也可以访问的 numpy 数组。有关如何执行此操作或最佳方法的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:10:16.977

我正在尝试找到 LPC 声码器的代码示例，以及 LPC 解码器，它通过使用 LPC 系数和激励信号来合成语音。理论上一切都很好，但很难找到示例源代码。Klatt 的工作机制非常相似，如果不相同的话。如果有人知道有关 LPC 合成的有用信息，请提供帮助。

Python 中 LPC 解码器的良好实现可能会完全替代 Klatt 来满足您的目的。但是，如果将其编译为共享库对象或 DLL 或使用管道来捕获输出，则可以绑定到它。

对于共享/动态库，您可以使用 ctypes 模块进行绑定。要运行它并阅读它的标准输出，我建议使用 subproccess 模块。但是你也可以使用 os.popen 来做到这一点。然后，您可以捕获输出并将其存储到一个 numpy 数组中，然后随心所欲地处理它。

但是用 Python 重写 Klatt 并不是一个坏主意。如果你不这样做，我可能会这样做。

# java - Maven 插件测试中 org.apache.maven.repository.RepositorySystem 的组件查找异常

> ID：15779351
> 
> 赞同：29
> 
> 时间：2013-04-03T05:13:16.733
> 
> 标签：java, maven-3, maven-plugin

我正在尝试将`maven-plugin-testing-harness`2.1 版与以下测试用例一起使用：

```
public class FooTest extends AbstractMojoTestCase {
  @Override
  protected void setUp() throws Exception {
    super.setUp();
  }
  public void testSomething() throws Exception {
    // todo
  }
} 
```

调用时测试失败`setUp()`：

```
org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException
  role: org.apache.maven.repository.RepositorySystem
roleHint: 
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:257)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:245)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:239)
    at org.codehaus.plexus.PlexusTestCase.lookup(PlexusTestCase.java:206)
    at org.apache.maven.plugin.testing.AbstractMojoTestCase.setUp(AbstractMojoTestCase.java:118)
    at foo.FooTest.setUp(FooTest.java:54) 
```

这些依赖项我在`pom.xml`：

```
 <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-plugin-api</artifactId>
        <version>3.0.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-model</artifactId>
        <version>3.0.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-core</artifactId>
        <version>3.0.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.plugin-testing</groupId>
        <artifactId>maven-plugin-testing-harness</artifactId>
        <version>2.1</version>
        <scope>test</scope>
    </dependency> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-05-23T06:37:19.813

最近我遇到了同样的例外。经过一番研究，我发现 maven-compat 插件解决了这个问题：

```
<dependency>
    <groupId>org.apache.maven</groupId>
    <artifactId>maven-compat</artifactId>
    <version>3.0.5</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-24T17:42:46.613

把这个留给以后遇到这个问题的人：

烟雾的答案确实有效，但请确保原始问题中 yegor256 中包含的依赖项的版本匹配。添加 org.apache.maven:maven-compat 对我不起作用，直到我将这 4 个依赖项更改为也具有版本 3.0.5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-02T19:04:12.733

目前，*org.apache.maven.repository.RepositorySystem*类位于 lib maven-resolver-api 中。如果添加 maven-compat 后，这里的任何人仍然收到错误，请确保添加 maven-resolver-api 工件作为依赖项。

```
<dependency>
  <groupId>org.apache.maven.resolver</groupId>
  <artifactId>maven-resolver-api</artifactId>
  <version>1.3.1</version>
</dependency> 
```

# android - 覆盖合并清单中的 AndroidManifest.xml 属性

> ID：15779353
> 
> 赞同：1
> 
> 时间：2013-04-03T05:13:25.010
> 
> 标签：android, android-activity, android-manifest

我有一个库项目和 2 个应用程序项目。我在库项目的 AndroidManifest.xml 中声明了活动，并`manifestmerger.enabled`设置了库清单与两个应用程序清单合并。

我想覆盖应用程序清单中的活动属性。具体来说，我在库项目的清单中有以下声明：

```
<activity
  android:name=".sample.Activity1"
  android:hardwareAccelerated="true"
  .... /> 
```

我想将`hardwareAccelerated`其中一个应用程序项目中的属性覆盖为`false`.

在应用程序清单中放置相同的活动声明但使用 `hardwareAccelerated="false" 会在构建时导致错误：

```
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Merging manifests from project and 4 libraries.
[mergemanifest] Error: [AndroidManifest.xml:32, AndroidManifest.xml:57] Trying to merge incompatible /manifest/application/activity[@name=.sample.Activity1] element: 
```

显然，manifestmerger 只允许您合并清单文件，而没有覆盖声明的机制。给出我试图实现的用例，有什么替代方案可以让我为一个活动指定不同的值，而不必在两个应用程序项目中重复活动声明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T06:13:40.763

`manifest merger`如果您有冲突，则当前失败，`AndroidManifests`并且无法忽略冲突。

在您的情况下，最简单的解决方法是声明一个布尔资源，告知是否为`Activity`.

**图书馆项目：**

```
<bool name="hardware_acceleration_enabled">true</bool> 
```

现在你只需要在库项目中声明你的Activity，并在真实项目中覆盖资源值：

**图书馆项目：**

```
<activity
    android:name=".sample.Activity1"
    android:hardwareAccelerated="@boolean/hardware_acceleration_enabled"
    .... /> 
```

**真实项目：**

```
<bool name="hardware_acceleration_enabled">false</bool> 
```

# cakephp - 未检索到 cakePHP 关联数据

> ID：15779354
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:13:33.830
> 
> 标签：cakephp, model, has-many-through

这个问题困扰了我好几天。当我在我的 Department 模型上执行 find('all') 时，没有获取任何关联的数据。这是我的部门模型：

```
<?php
App::uses('AppModel', 'Model');

class Department extends AppModel {

public $displayField = 'name';
//The Associations below have been created with all possible keys, those that are not needed can be removed

public $belongsTo = array( ///check
    'District' => array(
        'className' => 'District',
        'foreignKey' => 'district_id'
    )
);
public $hasMany = array(
    'Group' => array(
        'className' => 'Group',
        'foreignKey' => 'department_id' ///check
    ),
    'Request'=>array(
        'className' => 'Request',
        'foreignKey' => 'department_id',
    ),
    'DepartmentPosition'=>array(
        'className'=>'DepartmentPosition',
        'foreignKey'=>'department_id',
        'dependent'=>true
    ),
); 
```

}

当我找到（'all'）时，它返回数据库中每个部门的所有字段，但根本没有关联数据。在部门控制器中：

```
$departments = $this->Department->find('all');
$this->set(compact('departments')); 
```

感觉我的模型有问题，因为我对任何其他模型都没有问题并返回相关数据，包括与部门相关的数据。例如，我可以找到与某个地区相关的所有部门。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:55:25.377

不正确的模型文件命名是模型文件未被读取和使用表的 AppModel 实例蛋糕的最常见原因。所以检查你的模型的文件名。确保它是`Department.php`. 在您的控制器中，`debug(get_class($this->Department));`它应该返回“Department”而不是“AppModel”。

假设您的模型文件已正确加载并且您仍然有问题，最可能的原因是模型的`$recursive`属性设置为 -1，可能在 AppModel 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:38:50.393

您应该使用以下内容：

```
$this->Department->recursive = 1;
$departments = $this->Department->find('all');
$this->set(compact('departments')); 
```

# parameters - 如何在asp .net 4.5中将参数传递给gridView的SelectMethod

> ID：15779358
> 
> 赞同：2
> 
> 时间：2013-04-03T05:14:04.127
> 
> 标签：parameters, asp.net-4.5

问题：如何在asp .net 4.5中将参数传递给gridView的SelectMethod

描述 ：

我正在使用 asp .net 4.5 并使用（强类型模型绑定）SelectMethod 将数据绑定到 gridView。

**SelecteMethod="BindGrid"** BindGrid 是用户定义的函数。

但是**在绑定时，我想将 GridRow 作为参数传递给函数 BindGrid。**

那么有没有办法将参数传递给 selectMethod 以进行强类型模型绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-26T21:29:12.683

有一个[很好的示例](http://www.dotnetjalps.com/2013/03/SelectMethod-in-asp-net-45-Model-binding.html)说明如何使用控件“过滤”从“SelectMethod”返回的数据。例如，如果您要更改下拉列表中选择的数据。你会像这样设置标记......

```
<form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="ddlEmployee" AutoPostBack="true" runat="server">
                <asp:ListItem Text="1"></asp:ListItem>
                <asp:ListItem Text="2"></asp:ListItem>
        </asp:DropDownList>
    </div>
    <div>
        <asp:GridView ID="grdEmployee" runat="server" SelectMethod="GetEmployees" ItemType="WebApplication2.Employee">
        </asp:GridView>
    </div>
</form> 
```

然后该方法看起来像这样接收参数......

```
public List<Employee> GetEmployees([Control]int? ddlEmployee)
    {
        List<Employee> employeeList = new List<Employee>();
        for (int i = 1; i <= 5; i++)
        {
            employeeList.Add(new Employee { 
                EmployeeId=i,
                FirstName=string.Format("First{0}",i),
                LastName=string.Format("Last{0}",i)
            });
        }
        return employeeList.Where(e=>e.EmployeeId==ddlEmployee).ToList();
    } 
```

根据您的情况，可以有多种变化。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-23T06:00:51.247

传参一般有两种方式：

*   声明式地从`SelectParameters`元素。
*   以编程方式从`Selecting`方法中。

见[这里](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.objectdatasource.selectmethod?view=netframework-4.8#parameter-merging)。

我认为在您的情况下，您必须选择该`Selecting`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-19T15:09:40.067

MSDN > 任务 3 - 模型绑定中的值提供程序 > (5)：[https ://docs.microsoft.com/en-us/aspnet/web-forms/overview/getting-started/hands-on-labs/whats-new -in-web-forms-in-aspnet-45#task-3---value-providers-in-model-binding](https://docs.microsoft.com/en-us/aspnet/web-forms/overview/getting-started/hands-on-labs/whats-new-in-web-forms-in-aspnet-45#task-3---value-providers-in-model-binding)

```
public IQueryable<Category> GetCategories([Control("controlId")] int? minProductsCount)
{
    var query = this.db.Categories.Include(c => c.Products);

    if (minProductsCount.HasValue)
    {
        query = query.Where(c => c.Products.Count >= minProductsCount);
    }

    return query;
} 
```

# magento - 在不使用 require_once 或 include_once 的情况下覆盖 Magento 控制器

> ID：15779359
> 
> 赞同：1
> 
> 时间：2013-04-03T05:14:04.187
> 
> 标签：magento

有没有办法在不使用 require_once 或 include_once 的情况下覆盖 Magento 控制器？任何帮助将不胜感激

# python - 是否总是需要模型来表示特定的数据库表？

> ID：15779364
> 
> 赞同：0
> 
> 时间：2013-04-03T05:14:25.673
> 
> 标签：python, database, model-view-controller, sqlalchemy

我有一个实际上与模型类同构的数据库，创建它们似乎是在浪费时间。我正在使用 sqlalchemy 核心（不是 orm），并且创建了类似于以下示例的网关类：

```
class BanGate(Gateway):

    def __init__(self):
            super(BanGate, self).__init__('ban')

    def ban_user(self, user, group, exp):
            data = dict(user_id=user, group_id=group, expires=exp)
            self._table.insert(values=data).execute()

    def unban_user(self, user, group):
            cond = and_(self._table.c.user_id == user, self._table.c.group_id == group)
            self._table.delete(whereclause=cond).execute()

class ForumGate(Gateway):

    def __init__(self):
            super(ForumGate, self).__init__('forum')

    def create_forum(self, group, user, title, desc):
            data = dict(group_id=group, creator=user, name=title, description=desc)
            self._table.insert(values=data).execute()

    def delete_forum(self, forum):
            stmt = (self._table.c.forum_id == forum)
            self._table.delete(whereclause=stmt).execute() 
```

创建一个“禁止”或“论坛”类来保持状态并使用这些网关保存它似乎是浪费时间。对于控制器，我正在考虑简单地从请求对象中获取数据并直接使用这些网关对象，这是否可取？页面的大部分数据不需要被操作，只需保存和/或读取，因此似乎没有必要使用模型类。

此外，网关内部使用的表类使用自动加载功能，因此我没有定义数据库模式。

那么基本上我该如何去持久化数据呢？我应该创建一个模型类来传递给这些网关对象，还是应该直接从请求对象传递网关对象数据？

（另外，“gatway”指的是[http://martinfowler.com/eaaCatalog/tableDataGateway.html](http://martinfowler.com/eaaCatalog/tableDataGateway.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:38:45.237

那么在这种情况下，您通过手动编码所有那些 insert()/update() 构造等来重新发明 ORM，这比仅使用那里的持久性和查询工具要多得多。如果“浪费时间”是在代码中定义类，那么如果您想使用反射，使用[SQLSoup 之](http://readthedocs.org/docs/sqlsoup/)类的工具或者只是滚动类似的东西，或者可能是[DeferredReflection](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/declarative.html#sqlalchemy.ext.declarative.DeferredReflection) ，则没有必要这样做。在任何 ORM 配置中，可以使用 type() 动态创建 Python 类，因此可以动态利用 ORM。

# c - 在 popen 中使用 awk 会产生“失控字符串常量”错误

> ID：15779365
> 
> 赞同：1
> 
> 时间：2013-04-03T05:14:28.660
> 
> 标签：c, awk, quotes

以下行

```
FILE *fp=popen("ls -h --full-time | awk '{printf \" %-70s%-10s%-20s%-30s\n \", $9,$5,$6,$7}' ","r"); 
```

给出错误

> awk：第 1 行：失控字符串常量“%-70s%-10....

我也试过

```
FILE *fp=popen("ls -h --full-time | awk \'{printf \" %-70s%-10s%-20s%-30s\n \", $9,$5,$6,$7}\' ","r"); 
```

还是同样的错误。

我知道它与引号有关。只是我无法弄清楚到底是什么。如何摆脱错误？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T05:17:23.253

你的意思是`awk`解释你的`\n`，但实际上它被你的 C 编译器解释为文字换行符。这就是为什么 awk 会看到一个失控的字符串——因为当你到达那里时，它是一个文字换行符。

您应该`\\n`在原始字符串中使用。

# java - 最大高度 2-3 树

> ID：15779369
> 
> 赞同：0
> 
> 时间：2013-04-03T05:14:36.710
> 
> 标签：java, arrays, tree, traversal

要找到一棵 2-3 树的最大高度，你能不能一直从根节点遍历到它的左子节点，一直向下直到遇到叶子？

这是事实：由于所有叶节点的高度相同，因此任何点的最低叶都是树的最大高度。（所有叶节点都在同一级别）。

如果你继续向左走，你总是到达底部吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:31:53.460

请注意，2-3 棵树是平衡的，这意味着每个子树（左、中、右）将包含接近相同数量的数据——考虑到这个陈述，我们可以假设遍历到叶节点（在任何sub-tree) 将为您提供 2-3 树的高度。

由于树的平衡，我们也可以说所有的操作都趋向于`O(lg n)`。

**更新**：

> 2-3 树是空树（零节点）或单节点树（只有一个节点）或具有以下属性的多节点树：
> 
> 1.  每个内部节点有两个或三个孩子
> 2.  从根到叶子的每条路径都具有相同的长度。

来自 CS 部门，IISc： http: [//lcm.csa.iisc.ernet.in/dsa/node118.html](http://lcm.csa.iisc.ernet.in/dsa/node118.html)

# spring - Apache Tiles - 如何在 ViewPreparer 的执行方法中获取 HTTPServlet 请求对象

> ID：15779374
> 
> 赞同：0
> 
> 时间：2013-04-03T05:15:00.647
> 
> 标签：spring, servlets, tiles

我正在使用带有磁贴配置的 Spring MVC 并使用 ViewPreparer 加载菜单以将菜单加载到应用程序中。我希望 ViewPreparer 的执行方法中的 HTTPServlet 请求对象用于在 HTTP 标头中设置 globalid。

请建议如何获取请求对象...

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:43:53.703

干得好。

```
public class MenuPreparer implements ViewPreparer {

public void execute(TilesRequestContext tilesContext, 
                  AttributeContext attributeContext) throws PreparerException {

    HttpServletRequest request = (HttpServletRequest) tilesContext.getRequest();
} 
```

# parameters - 将带参数的 SVG 转换为另一种文件类型？

> ID：15779375
> 
> 赞同：0
> 
> 时间：2013-04-03T05:15:02.257
> 
> 标签：parameters, svg, batik, imagemagick-convert

在我的网站上，我有一个 SVG 图像，它是使用用户选择的表单中的参数生成的。

一切正常，但我正在努力想办法做下一部分。

用户完成后，他们单击一个按钮...我希望此按钮将 SVG 转换为另一种格式（最好是 eps、jpeg 或 png）准备发送给我。

我对如何将其发送给我持开放态度...我想我需要在服务器上生成图像，并编写一个脚本以通过电子邮件向我发送指向它的链接或其他东西...

但我的问题中更重要的部分是我如何首先生成图像？我快速浏览了 Batik 和 ImageMagick，但找不到任何关于在 SVG 中使用参数的信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:42:45.087

1.  您可以将客户端 SVG 序列化为 XML 字符串，然后通过 AJAX 将其发送到服务器。这是最简单最无损的方式：

    ```
    var svg = document.getElementById('my_svg');
    var str = (new XMLSerializer).serializeToString(svg); 
    ```

2.  根据您使用的浏览器、版本和功能，您可以将 SVG 渲染到浏览器内`<canvas>`，然后将画布像素转换为 PNG 数据 URL，并通过 AJAX 将其发送到服务器。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/8158312/rasterizing-an-in-document-svg-to-canvas)。

    *   *另请参阅在 MDN 上将[DOM 对象绘制到画布](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)*中。

# android - 在listview android中添加值

> ID：15779377
> 
> 赞同：0
> 
> 时间：2013-04-03T05:15:30.683
> 
> 标签：android

我有一个 EditText、ListView 和 Button。

我的要求是单击按钮，我希望 edittext 中的文本附加到列表中。

*   我想要按钮点击的代码。
*   我试过了，我得到了不受支持的错误。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:30:15.440

将此代码添加到 Activity.onCreate()：

```
adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1);
listView.setAdapter(adapter); 
```

将此代码添加到 Button 的 OnClickListener：

```
String text = eidtText.getText().toString();
adapter.add(text);
adapter.notifyDataSetChanged(); 
```

# ruby - 我该如何解析这个

> ID：15779378
> 
> 赞同：1
> 
> 时间：2013-04-03T05:15:34.043
> 
> 标签：ruby, json

我正在尝试像这样解析下面的 json，但我收到一条错误消息，说 key 是 string 而不是 hash。我正在尝试提取位置、名称、id、团队的数据，并按位置类型将其推送到 ruby​​ 哈希中。

```
require 'json'
json = JSON.parse(response.body)
json.each do |key, value|
    if(key =~ /players/)        
         key.each do |k, v|
           puts k.inspect
         end
    end
 end

{
      "version": "1.0",
      "players": {
        "timestamp": "-1",
        "player": [
          {
            "position": "TMDL",
            "name": "Bills, Buffalo",
            "id": "0251",
            "team": "BUF"
          },
          {
            "position": "TMDL",
            "name": "Colts, Indianapolis",
            "id": "0252",
            "team": "IND"
          },
          {
            "position": "TMDL",
            "name": "Dolphins, Miami",
            "id": "0253",
            "team": "MIA"
          }
         ]
      }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:22:24.590

由于`players`是唯一键，因此您可以使用 直接访问它`json["players"]`。我想你正在寻找这样的东西：

```
require 'json'
json = JSON.parse(response.body)
json["players"]["player"].each do |player|
   puts "Player team is #{player['name']} and position is #{player['position']}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:35:40.250

json 变量已经是一个散列（解析后），你可以像普通的 ruby​​ 散列一样使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T05:42:28.907

也许你可以试试这个：

```
require 'json'
require 'ostruct'
require 'awesome_print'

test = '{
    "version": "1.0",
    "players": {
      "timestamp": "-1",
      "player": [
        {
          "position": "TMDL",
          "name": "Bills, Buffalo",
          "id": "0251",
          "team": "BUF"
        },
        {
          "position": "TMDL",
          "name": "Colts, Indianapolis",
          "id": "0252",
          "team": "IND"
        },
        {
          "position": "TMDL",
          "name": "Dolphins, Miami",
          "id": "0253",
          "team": "MIA"
        }
       ]
    }
}'

json = JSON.parse(test)
json.each do |key, value|
  if(key =~ /players/)
       value['player'].each do |k, v|
         puts k.inspect
       end
  end
end 
```

# knockout.js - 如何在 Knockout 中读取 Click 绑定的数据

> ID：15779383
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:15:53.403
> 
> 标签：knockout.js, knockout-templating

在 foreach 我绑定数据如下：

```
<ul class="state-list" data-bind="foreach: places">
<li class="city-container" data-bind="click:currentPlace">                                
    <div>
        <img class="city-img" data-bind="attr: { src: img, alt: name }">
        <div class="city-facts">
            <em data-bind="text:name"></em>
            <!-- Not that we're not caching the stats template. This is to demonstrate passing ajax options -->
            <div data-bind="template: { name: 'stats', templateUrl: 'templates/info', ajax: { cache: false } }"></div>
        </div>
        <span style="clear:both;"></span>
    </div>
</li>
</ul> 
```

并在点击时调用“currentPlace”：在 ViewModel 中我这样写：

```
 this.currentPlace = function(data,event){
        console.log("data=>",data);         
    } 
```

当我打印数据时，它给了我完整的对象。

现在我的问题是如何访问该对象以获取我的图像、名称、城市等数据？

我尝试像 data.name, data['name'] 但它不起作用。

编辑如您所见，我正在使用另一个模板名称：'stats'，现在如果我想读取上面的数据，我该怎么做？

“统计”模板如下：

```
<ul data-bind="foreach: stats">
    <li class="stat-container" data-bind="ifnot: editing">
        <div class="stat stat-name" data-bind="text:name"></div>
        <div class="stat stat-value" data-bind="text:value, click: toggleEdit "></div>
    </li>

    <li class="stat-container" data-bind="if: editing">
        <span class="stat stat-name" data-bind="text:name"></span>
        <input class="stat stat-value"type="text" data-bind="value: value"><input type="button" value="save" data-bind="click: toggleEdit">
    </li>
</ul> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:29:15.997

代替 ：

```
this.currentPlace = function(data,event){
        console.log("data=>",data);         
} 
```

尝试像这样安慰：

```
this.currentPlace = function(data,event){
        console.log(data);
        var name = ko.utils.unwrapObservable(data.name);
        console.log(name);
}

            Or (Even better than above)

this.currentPlace = function(){
        console.log(this);        
        var name = ko.utils.unwrapObservable(this.name);
        console.log(name);
} 
```

# python - 可迭代的浮点数？

> ID：15779387
> 
> 赞同：1
> 
> 时间：2013-04-03T05:16:15.650
> 
> 标签：python, parsing, numbers, iterable, configparser

我正在尝试制作一个游戏，玩家每次玩时都会从 ini 文件中的值中扣除 0.5。但是我不断收到错误，我不知道该怎么做。这是我的代码。不要担心评论，这些是给我的，我稍后会关闭 while 循环。这只是代码的一部分。顺便说一句，代码有效，只是不是这个。谢谢。

```
def rerun():
    import ConfigParser
    from ConfigParser import ConfigParser

    parser = ConfigParser()
    parser.read('Game.ini')

    PlrMny = parser.get('money_value', 'Amount')
    #config = ConfigParser.ConfigParser()
    configFile = open("C:\Python27\Game.ini", "w")
    #config.read(configFile)
    #valueamount = config.getfloat("section","starting_value")

    print "You will be given a $10 starting amount. Each game costs $.50 to play and is
    deducted when you input the first value."
    print "\nGetting one match gives $1 and the output is multiplied by 2 for each extra 
match."
    print "\nCurrent Amount =",PlrMny,

def gamble():
    PlrMny = parser.get('money_value', 'Amount')

    import random
    import sys
    number1 = random.randint (1, 20)
    number2 = random.randint (1, 20)
    number3 = random.randint (1, 20)
    number4 = random.randint (1, 20)
    number5 = random.randint (1, 20)

    def input():
        c = 0
        print "\n\n\n\nTry guess what five numbers the computer will guess. Type '100'
        in any of the inputs to close program prematurely"    
        print "Money =",PlrMny,
        #parser.set("money_value", "Amount",10000)
        #parser.write ('Game.ini')

        while True:

            try:
                User11 = int(raw_input( "\n\nNumber 1 : "))
                parser.set('money_value','Amount',float(PlrMny) - .5)
                parser.write (configFile)
                str(PlrMny)
                if User11 < 1:
                    print "Error"
                elif User11 == 100:
                    sys.exit()
                elif User11 > 20:
                    print "Error"
                else:
                    break
            except ValueError:
                print "Error" 
```

这是错误：

```
 Traceback (most recent call last):
  File "C:\Python27\Gamb Game.py", line 183, in <module>
    rerun()
  File "C:\Python27\Gamb Game.py", line 182, in rerun
    gamble()
  File "C:\Python27\Gamb Game.py", line 19, in gamble
    PlrMny = parser.get('money_value', 'Amount')
  File "C:\Python27\lib\ConfigParser.py", line 623, in get
    return self._interpolate(section, option, value, d)
  File "C:\Python27\lib\ConfigParser.py", line 663, in _interpolate
    if value and "%(" in value:
  TypeError: argument of type 'float' is not iterable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:45:13.527

这应该可以解决您的问题：

```
parser.get('money_value','Amount',True) 
```

当然，你也可以使用：

```
PlrMny = float(PlrMny) -.5 
parser.set('money_value','Amount',str(PlrMny)) 
```

问题是 parser.get 期待一个字符串值，但正在读取一个浮点数。因此，您拥有的两个选项是将值保存为字符串（这是第二个选项正在做的事情），或者使用 raw=True 读取值（这是第一个选项正在做的事情）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:27:08.223

我不知道第 19 行的问题可能是什么。您的配置看起来如何，您是否尝试过

```
 parser.getfloat('money_value','Amount') 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:44:54.697

好的，你在一个函数中创建了一个解析器

```
def rerun():
    import ConfigParser
    from ConfigParser import ConfigParser

    parser = ConfigParser()
    parser.read('Game.ini') 
```

你会在另一个中使用它。

```
def gamble():
    PlrMny = parser.get('money_value', 'Amount') 
```

这应该会失败，因为解析器是重新运行的局部变量，而不是在赌博中声明。

# sybase - Sybase 15.7 中 BCP 退出时的权限问题

> ID：15779389
> 
> 赞同：0
> 
> 时间：2013-04-03T05:16:33.887
> 
> 标签：sybase, bcp

在 Sybase 15.7 中，当使用 Sybase 的 bcp 实用程序批量复制数据时，生成的输出文件仅具有所有者权限（可读写）。

如何解决这个问题 这个 bcp 将从 js 中调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T16:02:58.413

我实际上在 Sybase ASE15.7 上遇到了同样的问题并找到了解决方案！（请不要删除我的帖子！）

从 ASE15.7 ESD#4 开始，BCP 的默认安全性更加严格。有一个新的 BCP 选项“--filemode”，它允许您指定 bcp out 文件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:57:19.150

您必须检查/更改数据库运行的用户的[umask](http://en.wikipedia.org/wiki/Umask)。此设置将影响新文件的默认文件权限。

您应该谨慎行事，因为扩展权限可能允许非特权用户访问从您的数据库导出的数据。

# encryption - 加密密钥交换理解

> ID：15779392
> 
> 赞同：3
> 
> 时间：2013-04-03T05:17:04.420
> 
> 标签：encryption, public-key-encryption

我试图了解`Encrypted Key Exchange`机制。我对这个插图有点困惑：
![EKE](https://i.stack.imgur.com/vHvpZ.png)
并没有找到很多有用的参考资料。谁能解释一下 EKE 的机制及其工作原理？双方在交换什么，为什么像中间人这样可以安全地攻击？这将非常有帮助。
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T07:51:18.343

在尝试找到 EKE 或 DH-EKE 的实现时，我预计那里的参考文献数量非常有限。维基百科相互之间的交叉链接以及我遇到的解释不一定那么容易理解。EKE的原始专利于2011年到期，导致我的理解EAP-EKE被发布。

我在 Bruce Schneier（第 2 版）的“应用密码学”中找到了最好的解释，包括对算法的改进。由于您已经了解了该过程，因此我将尝试外行回答那里发生的情况。我只是在学习自己，所以我可能会误认为你的形象，但它似乎是 DH-EKE 实现。我会在这个答案上坚持 EKE-idea，因为我认为我已经基本理解了 ;-)

基础是 Alice 和 Bob 共享一个共同的秘密。我可能会错过它的“弱”程度（在您的图像中它被标记为弱），但让我们假设它是一个有效的对称加密密钥。

双方拥有相同的对称密钥 S，这是一个共享秘密

1.  Alice 为会话 Pa（私有）和 P'a（公共）生成唯一的公钥/私钥对 Alice 使用 S 加密公钥并将其发送给 Bob。

2.  Bob（知道 S）解密 Alice 的消息并恢复 Alice 的公钥 P'a。Bob 生成随机会话密钥 K。Bob 用 Alice 的公钥 P'a 加密 K 并将其发送给 Alice。

3.  Alice 解密消息得到 K。 Alice 生成随机字符串 Ra，用 K 加密并发送给 bob

4.  Bob 解密该消息以获得 Ra，生成另一个随机 Rb，用 K 加密两者并将加密的消息发送给 Alice。

5.  Alice 解密消息，验证她自己的 Ra 在消息中是有效的。她只用 K 加密 Rb 并发送给 Bob。

6.  Bob 解密 Rb 并验证他自己的 Rb 是有效的。

为了让 Eve 实现中间人，她只看到了用其他密钥加密的密钥。如果不破解公钥算法，就不可能从 Alice 和 Bob 之间的监控流量中猜测密码。然而，弱共享秘密确实允许 Eve 尝试在图片中假装是 Alice 或 Bob，因此（我的术语可能在这里存在缺陷）可以对侦听服务器进行主动攻击。

我描述的版本中有一些假设，其他人最好解释（已发布），Alice 被信任生成好的密钥对，Bob 被信任生成好的会话密钥。还有一些算法更适合（或者有些更差）。“应用密码学”中列出了一些东西，但由于我的第二版似乎有点落后于 AES 之类的东西，我相信可以挖掘更多关于好密码的最新信息以供算法选择。

对于它的价值，我似乎需要自己用 C# 和 Java（Azure .NET 后端，Android 客户端）实现 EKE。我尝试以对其他人有用的方式对其进行打包。

**更新：** 非常简单的 C# 实现可在以下位置获得： [https ://github.com/kallex/sharp-eke-example](https://github.com/kallex/sharp-eke-example)

它像现在一样缩短了几位（仅使用明文的 SHA256 以使用初始密钥），因此请谨慎使用。我目前的使用将机器生成并在单独的通道中向双方分发安全密钥，因此我不需要对此测试平台进行任何更复杂的实现。

# c# - 后台工作人员调用 Dispatcher.Invoke

> ID：15779398
> 
> 赞同：0
> 
> 时间：2013-04-03T05:17:23.733
> 
> 标签：c#, backgroundworker, dispatcher

我正在研究其他人编写的代码。它包含一个后台工作程序，从其 DoWork 调用 Dispatcher.Invoke。

我的问题是我认为我的 BackgroundWorkerCompleted 将在我的 Dispatcher.Invoke 完成之前发生。那是对的吗？

Dispatcher.Invoke 会启动一个新线程还是从主线程启动？

将 Dispatcher 与 Backgroundworker 混合是一个坏主意吗？我发现的样本似乎只使用了其中一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:18:44.690

> 我的问题是我认为我的 BackgroundWorkerCompleted 将在我的 Dispatcher.Invoke 完成之前发生。那是对的吗？

不，那不正确。

> Dispatcher.Invoke 会启动一个新线程还是从主线程启动？

不，它将在 UI 线程上执行代码。因此，它将防止您获得跨线程异常。通常用于修改 GUI 内容。

请参见[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)

> 在 WPF 中，只有创建 DispatcherObject 的线程才能访问该对象。例如，**从主 UI 线程分离的后台线程无法更新在 UI 线程上创建的 Button 的内容。为了让后台线程访问 Button 的 Content 属性，后台线程必须将工作委托给与 UI 线程关联的 Dispatcher**。这是通过使用 Invoke 或 BeginInvoke 来完成的。Invoke 是同步的，而 BeginInvoke 是异步的。操作被添加到指定 DispatcherPriority 的 Dispatcher 的事件队列中。

# linux - 如何将双引号 (") 附加到 var 的末尾

> ID：15779403
> 
> 赞同：0
> 
> 时间：2013-04-03T05:17:54.327
> 
> 标签：linux, bash, append, quote

我正在重命名一堆包含空格的文件和目录。我有一个目录列表，例如：

```
"/usr/home/name/directory a/"
"/usr/home/name/directory b/" 
```

ETC...

它们都用双引号括起来，这样我就可以使用 for 循环来处理它们。那部分工作正常。问题是我也有类似的文件：

```
"/usr/home/name/directory a/file a"
"/usr/home/name/directory b/file b" 
```

ETC...

我需要验证文件所在的目录是否可写。所以要做到这一点，我从字符串中获取目录名，如：

```
dnam=$(dirname $1) 
```

这有效......在一定程度上。最终结果是我的最后一个双引号也被切断了，导致：

```
"/usr/home/name/directory a
"/usr/home/name/directory b 
```

ETC...

我需要最后的报价才能进入实际的重命名部分，但不知道该怎么做。我确定这是我忽略的简单事情。请问有人可以填我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:26:54.957

为了安全起见，请使用：

```
dnam=$(dirname "$1") 
```

在变量周围加上双引号。

您可以使用以下命令在该结果上附加双引号：

```
dnam=$(dirname "$1")'"' 
```

或许多等效的符号。但是，我怀疑您应该以不同的方式处理名称，而值中没有双引号。也就是说，您可能有：

```
dir1="/usr/home/name/directory a"
file1="$dir1/file a" 
```

然后当您需要将其中一个传递给命令时，将其括在双引号中：

```
dnam=$(dirname "$file1")

cd "$dnam" 
```

如果您正在处理此类名称的列表，请使用数组，然后使用以下符号：

```
a=( "$dir1" "$dir2" )

ls -ld "${a[@]}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:26:44.157

乍一看，您似乎需要添加反斜杠来转义脚本中的双引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:02:41.557

不需要子外壳的较短版本：

```
dnam=${1%/*}\" 
```

参数替换与实用程序 dirname 具有相同的效果。它适用于路径中的空白。最后的报价只需要转义即可。

# android - 如何为 id 属性设置 XSD 限制

> ID：15779408
> 
> 赞同：1
> 
> 时间：2013-04-03T05:18:31.130
> 
> 标签：android, xml, xsd

如果我想为以下内容定义 XSD 文件：

```
<state id="1" name="S1">
<state id="2" name="S2">
<state id="3" name="S3">

<transition fromState="1" toState="2"> 
```

如何在 XSD 文件中限制属性`fromState`并仅获取在元素`toState`上声明的值？`state``id`

XSD 定义似乎没有这样的功能，但采用 Android XML 布局，不知何故 Eclipse Android XML 编辑器知道将哪些 id 放入内容辅助列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:13:31.323

推荐的方法是使用 unique/key/keyref 结构。考虑到这个修改过的 XML（添加一个文档元素）：

```
<Document>
    <state id="1" name="S1"/>
    <state id="2" name="S2"/>
    <state id="3" name="S3"/>

    <transition fromState="1" toState="2"/>
</Document> 
```

![在此处输入图像描述](https://i.stack.imgur.com/Mghgk.png)

这个 XSD 完全符合您的要求：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="Document">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element maxOccurs="unbounded" name="state">
                    <xsd:complexType>
                        <xsd:attribute name="id" type="xsd:unsignedByte" use="required"/>
                        <xsd:attribute name="name" type="xsd:string" use="required"/>
                    </xsd:complexType>
                </xsd:element>
                <xsd:element name="transition">
                    <xsd:complexType>
                        <xsd:attribute name="fromState" type="xsd:unsignedByte" use="required"/>
                        <xsd:attribute name="toState" type="xsd:unsignedByte" use="required"/>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:key name="PKStates">
            <xsd:selector xpath="state"/>
            <xsd:field xpath="@id"/>
        </xsd:key>
        <xsd:keyref name="FKTransitionToStatesFrom"  refer="PKStates">
            <xsd:selector xpath="transition"/>
            <xsd:field xpath="@fromState"/>
        </xsd:keyref>
        <xsd:keyref name="FKTransitionToStatesTo" refer="PKStates">
            <xsd:selector xpath="transition"/>
            <xsd:field xpath="@toState"/>
        </xsd:keyref>
    </xsd:element>
</xsd:schema> 
```

![在此处输入图像描述](https://i.stack.imgur.com/jGPiL.png)

如果你看一下这些图表，你可以更容易地想象选择器是如何工作的。如果您决定使用它并且您的 XSD 有一个目标命名空间，并且如果您限定了您的元素和/或属性，请确保为 targetNamespace 声明一个前缀并在您的 XPath 中使用该前缀。

通常，虽然知道如何使用此信息（key/keyref）来构建内容辅助列表以促进基于相关 XSD 的 XML 编辑的工具不多。通常具有专业性质的编辑器会根据硬连线实现而不是仅从 XSD 推断来执行此操作。

# ruby-on-rails - Rails 未初始化的常量路由错误

> ID：15779415
> 
> 赞同：0
> 
> 时间：2013-04-03T05:19:06.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

我知道这个问题在网上贴满了，但是看了所有的答案后，我仍然无法弄清楚我的问题是什么。

这是我的路线：

```
resources :applications do 
  resources :applicants do
    collection {put '/archived'}
    collection {put '/not_archived'}
  end
end 
```

然后我在这个路径上有一个表：`/applications/1/applicants`它调用我的索引方法。

在这个列出所有申请人的表中，我为每一行设置了一个复选框，当他们选中该框时，我想使用 ajax 在数据库中为该行设置“归档”标志。

这是我的ajax调用：

```
$('.archive').on('click', function() {
    if ($(this).is(':checked')) {
        $.ajax({
            type: "PUT",
            url: '/applications/<%= @application.id %>/applicants/archived',
            data: {id: $(this).attr('id'), archived: true}
        });
    } else {
        $.ajax({
            type: "PUT",
            url: '/applications/<%= @application.id %>/applicants/not_archived',
            data: {id: $(this).attr('id'), archived: false}
        });
    }
}); 
```

但是每次我检查一个复选框时，我都会收到此错误：

```
Started PUT "/applications/1/applicants/archived" for 127.0.0.1 at 2013-04-03 00:07:20 -0500

ActionController::RoutingError (uninitialized constant Applications):
  activesupport (3.2.6) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.6) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.6) lib/active_support/inflector/methods.rb:228:in `constantize'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:600:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.6) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `_run__281193607366851886__call__1094349027316042218__callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
  actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.6) lib/rails/engine.rb:479:in `call'
  railties (3.2.6) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  webrick (1.3.1) lib/webrick/httpserver.rb:138:in `service'
  webrick (1.3.1) lib/webrick/httpserver.rb:94:in `run'
  webrick (1.3.1) lib/webrick/server.rb:191:in `block in start_thread' 
```

我的申请人控制器有这些方法：

```
# PUT /applicants/archived/1
  def archived
    p 'here?'
    @applicant = Applicant.find(params[:id])
    @applicant.archived = params[:archived]
    #@application = current_company.applications.find(params[:application_id])

    respond_to do |format|
      if @applicant.save
        format.js 
        #format.html { redirect_to @task, notice: 'Task was successfully updated.' }
        #format.json { head :no_content }
      else
        format.html { render action: "index" }
        format.json { render json: @applicant.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /applicants/not_archived/1
  def not_archived
    @applicant = Applicant.find(params[:id])
    @applicant.archived = params[:archived]
    #@application = current_company.applications.find(params[:application_id])

    respond_to do |format|
      if @applicant.save
        format.js
        #format.html { redirect_to @task, notice: 'Task was successfully updated.' }
        #format.json { head :no_content }
      else
        format.html { render action: "index" }
        format.json { render json: @applicant.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是我对这些路由的 rake 路由输出：

```
 archived_application_applicants PUT    /applications/:application_id/applicants/archived(.:format)                            applications/:application_id/applicants#archived
    not_archived_application_applicants PUT    /applications/:application_id/applicants/not_archived(.:format)                        applications/:application_id/applicants#not_archived
                 application_applicants GET    /applications/:application_id/applicants(.:format)                                     applicants#index
                                        POST   /applications/:application_id/applicants(.:format)                                     applicants#create
              new_application_applicant GET    /applications/:application_id/applicants/new(.:format)                                 applicants#new
             edit_application_applicant GET    /applications/:application_id/applicants/:id/edit(.:format)                            applicants#edit
                  application_applicant GET    /applications/:application_id/applicants/:id(.:format)                                 applicants#show
                                        PUT    /applications/:application_id/applicants/:id(.:format)                                 applicants#update
                                        DELETE /applications/:application_id/applicants/:id(.:format)                                 applicants#destroy 
```

是什么导致我的错误？我完全被难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:07:48.083

我希望这段代码对你有用：

```
$('.archive').on('click', function() {                                                      

if ($(this).is(':checked')){
    $.ajax({
        type: "PUT",
        url: '<%= archived_application_applicants_path(@application.id) %>',
        data: {id: $(this).attr('id'), archived: true}
    });
}else {
    $.ajax({
        type: "PUT",
        url: '<%= not_archived_application_applicants_path(@application.id) %>',
        data: {id: $(this).attr('id'), archived: false}
    });
}

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T23:46:36.693

我制作了一个复制您的上下文的演示应用程序，它对我来说效果很好。你可以在这里查看：[https ://github.com/Chipairon/so_applicants_route](https://github.com/Chipairon/so_applicants_route)

我已经清理了围绕这个问题的噪音，希望它可以作为一个起点。

我没有足够的声誉来评论你的问题，所以我会把它放在这里:)

我认为问题必须出在您身上，`app/views/applicants/archived.js.erb`因为您说问题是在您选中复选框时发生的。你能发布那个文件的内容吗？

在旁注中，我希望您考虑将“存档”操作作为成员操作。您实际上是对单个申请人执行操作，而不是对所有申请人执行操作：

```
resources :applications do
  resources :applicants do
    put :archived, on: :member
    put :not_archived, on: :member
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:38:43.470

尝试

```
$('.archive').on('click', function() {
    if ($(this).is(':checked')){
      $.ajax({
            type: "PUT",
            url: '<%= archived_application_applicants_path(:application_id => @application.id) %>',
            data: {id: $(this).attr('id'), archived: true}
    });
    }else {
     $.ajax({
            type: "PUT",
            url: '<%= not_archived_application_applicants_path(:application_id => @application.id) %>',
            data: {id: $(this).attr('id'), archived: true}
    });
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:30:24.880

这可能与您的 javascript 无关。路由器找不到正确的模块/类集来解析将请求发送到哪个控制器。

我的猜测是您的申请者控制器的命名空间如下：

```
class Applications::ApplicantsController < Superclass;
end 
```

但是applicants_controller.rb 不在app/controllers/applications 中，它需要让Rails 自动创建Applications 模块。移动申请人控制器.rb 或删除命名空间，事情应该会自行解决。

# php - 尝试检查时出错

> ID：15779416
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:19:21.257
> 
> 标签：php, mysql, sql, sql-update

我想检查几件事....但我不能...（检查下面）。

好的，所以这可以正常工作，但我想添加更多检查。

```
mysql_query('UPDATE characters SET voted=1 where account_name like \''.$row['login'].'\' and online=1;') ; 
```

无论如何，我想添加的是在 online=1 之后检查在哪里 `MIN(lastAccess)`

我尝试了几件事，但我失败了......比如：

```
mysql_query('UPDATE characters SET voted=1 where account_name like \''.$row['login'].'\' and online=1 having min(lastaccess);') ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:22:55.907

您甚至可以进一步加入表格以根据需要工作，

```
UPDATE  characters a
        INNER JOIN
        (
            SELECT  account_name, MIN(lastaccess) min_date
            FROM    characters
            GROUP   BY account_name
        ) b ON  a.Account_Name = b.Account_name AND
                a.lastAccess = b.min_date
SET     a.voted = 1
WHERE   a.Account_Name = 'nameHere' AND
        a.online = 1 
```

**更新 1**

尝试使用`double quotes`，例如

```
$userName = $row['login'];
$result = mysql_query(" UPDATE  characters a
                                INNER JOIN
                                (
                                    SELECT  account_name, MIN(lastaccess) min_date
                                    FROM    characters
                                    GROUP   BY account_name
                                ) b ON  a.Account_Name = b.Account_name AND
                                        a.lastAccess = b.min_date
                        SET     a.voted = 1
                        WHERE   a.Account_Name = '$userName' AND
                                a.online = 1"); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# java - 这种 Java 加密方法的等效 PHP 解密是什么？

> ID：15779418
> 
> 赞同：3
> 
> 时间：2013-04-03T05:19:24.317
> 
> 标签：java, php, string, encryption

我有以下Java加密方法，如果有的话，我想知道它的等效PHP解密是什么。如果 PHP 没有等效的 PHP 解密功能，那我还有什么其他选择？提前致谢。

```
 private String encrypt(String string, String key) {
    StringBuilder enc = new StringBuilder();
    try {
        Mac mac = Mac.getInstance("HMACSHA256");
        SecretKeySpec secret = new SecretKeySpec(key.getBytes(), "HMACSHA256");
        mac.init(secret);
        byte[] digest = mac.doFinal(string.getBytes());
        for (byte b : digest) {
            String hex = Integer.toHexString(0xff & b);
            if (hex.length() == 1)
                enc.append('0');
            enc.append(hex);
        }
    } catch (Exception e) {
    }
    return enc.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:23:34.313

SHA 算法是一种方式的哈希，这意味着您永远无法解密它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:37:22.563

看看[php.net：http://www.php.net/manual/en/function.hash-hmac.php](http://www.php.net/manual/en/function.hash-hmac.php)

一个平等的方法是

```
hash_hmac("sha256", $data, $key, false); 
```

当然，它不是加密，而是散列函数。所以它是不可逆的。

# c# - 为什么在 Windows7(.net 3.5) 中运行的应用程序在 Win8(.net4.5) 中无法运行

> ID：15779424
> 
> 赞同：1
> 
> 时间：2013-04-03T05:19:41.967
> 
> 标签：c#, .net, windows, windows-8

我有一个 TargetFrameworkVersion=v3.5 的应用程序

```
 <TargetFrameworkVersion>v3.5</TargetFrameworkVersion> 
```

应用程序在 Windows 7 中运行良好，但在 Windows 8 中我需要安装 .net framework 3.5 才能使用该应用程序。为什么即使 Win8 有默认的 .net framework 4.5 我也应该安装 .net framework 3.5。我应该怎么做才能使用Win7 和 Win8 中的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:27:09.953

默认情况下，Windows 8 上不安装 .NET 3.5，仅安装 .NET 4.5。

.NET 4.0/4.5 和 .NET 2.0/3.0/3.5 是并行安装。因此，基于 .NET 3.5 构建的应用程序将无法在 4.0 或 4.5 上运行。有关详细信息，请参阅[此 MSDN 文章。](http://msdn.microsoft.com/en-au/library/bb822049.aspx)

请参阅[有关在 Windows 8 上安装 .NET 3.5 的 MSDN 文章。](http://msdn.microsoft.com/en-au/library/hh506443.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:27:32.193

有关在每个版本的 Windows 上预安装的 .NET 版本的摘要，请参阅[此页面](http://blogs.msdn.com/b/astebner/archive/2007/03/14/mailbag-what-version-of-the-net-framework-is-included-in-what-version-of-the-os.aspx)。

遗憾的是，Windows 7 和 Windows 8 都没有预装通用版本。Windows 7 附带 3.5.1（包括 2.0、3.0、3.5），Windows 8 附带 4.5。

# wordpress - Wordpress 图片库附件页面图像不显示

> ID：15779429
> 
> 赞同：0
> 
> 时间：2013-04-03T05:20:03.853
> 
> 标签：wordpress, wordpress-theming

我在照片库页面上创建了一个图片库（从图库设置链接到选项中选择附件页面）。像这样的图片库短代码：

```
[gallery link="post" columns="2" ids="25,13"] 
```

我使用了 wordpress 3.5，我当前的主题是 21 点。

当我单击照片库页面时，页面正确打开而没有任何错误。但是，当我单击作为图库插入的照片库图像时，我的请求会转到以下 url：`http://localhost/wordpress/?attachment_id=25`并显示以下错误消息：`This is somewhat embarrassing, isn’t it?` 任何人都可以告诉我如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:19:22.017

我刚刚遇到与.htaccess 相关的同样问题。我删除了 .htaccess，它被重新创建，问题应该得到解决。

# android - AlertDialog 在 Android 4.0.3 上启动了两次

> ID：15779431
> 
> 赞同：0
> 
> 时间：2013-04-03T05:20:15.670
> 
> 标签：android

我的应用程序有 1 个主要活动和 2 个其他活动。

每当我启动其中任何一个时，它都会在 Android 4.0.3 上启动两次，但在 2.3.6 上它会启动一次。

它不仅适用于活动，但是，它适用于`AlertDialog`s。

我`android:launchMode="singleInstance"`在清单中添加了它，它适用于正常`Activitie`的 s，但是，我无法为 AlertDialog 做任何事情。

注意：我正在使用 HoloeveryWhere 和 SherlockActionBar。

# php - 无法让我的 mysql_query() 在我的 php 脚本中工作

> ID：15779436
> 
> 赞同：1
> 
> 时间：2013-04-03T05:20:43.633
> 
> 标签：php, mysql, lamp

我无法让我的 php 脚本通过我的 LAMP 服务器中的 php 运行。这是我遇到问题的代码。

```
# Insert Statement
$insert     ="INSERT INTO ACRC VALUES('','','1C3-4A','$fs','$acrc1c3_4afs');
INSERT INTO ACRC VALUES('','','1C3-4A','$fi','$acrc1c3_4afi');
INSERT INTO ACRC VALUES('','','1C3-4A','$fo','$acrc1c3_4afo');
INSERT INTO ACRC VALUES('','','1C3-4B','$fs','$acrc1c3_4bfs');
INSERT INTO ACRC VALUES('','','1C3-4B','$fi','$acrc1c3_4bfi');
INSERT INTO ACRC VALUES('','','1C3-4B','$fo','$acrc1c3_4bfo');
INSERT INTO ACRC VALUES('','','1C3-12A','$fs','$acrc1c3_12afs');
INSERT INTO ACRC VALUES('','','1C3-12A','$fi','$acrc1c3_12afi');
INSERT INTO ACRC VALUES('','','1C3-12A','$fo','$acrc1c3_12afo');
INSERT INTO ACRC VALUES('','','1C3-12B','$fs','$acrc1c3_12bfs');
INSERT INTO ACRC VALUES('','','1C3-12B','$fi','$acrc1c3_12bfi');
INSERT INTO ACRC VALUES('','','1C3-12B','$fo','$acrc1c3_12bfo');";
echo "$insert";
mysql_query($insert) or die(mysql_error());
echo "$insert";
?> 
```

运行此命令将返回以下结果。

```
[root@enseva html]# php snmp.php
ACRC Unit 1C3-4A : Fan Speed 73.3 % : Fluid In Temperature 47.2 F : Fluid Out Temperature 55 F
ACRC Unit 1C3-4B : Fan Speed 74 % : Fluid In Temperature 47.8 F : Fluid Out Temperature 53.5 F
ACRC Unit 1C3-12A : Fan Speed 28.9 % : Fluid In Temperature 44.7 F : Fluid Out Temperature 46.4 F
ACRC Unit 1C3-12B : Fan Speed 28.5 % : Fluid In Temperature 47.1 F : Fluid Out Temperature 62.9 F
INSERT INTO ACRC VALUES('','','1C3-4A','Fan Speed','73.3');
INSERT INTO ACRC VALUES('','','1C3-4A','Fluid Temperature In','47.2');
INSERT INTO ACRC VALUES('','','1C3-4A','Fluid Temperature Out','55');
INSERT INTO ACRC VALUES('','','1C3-4B','Fan Speed','74');
INSERT INTO ACRC VALUES('','','1C3-4B','Fluid Temperature In','47.8');
INSERT INTO ACRC VALUES('','','1C3-4B','Fluid Temperature Out','53.5');
INSERT INTO ACRC VALUES('','','1C3-12A','Fan Speed','28.9');
INSERT INTO ACRC VALUES('','','1C3-12A','Fluid Temperature In','44.7');
INSERT INTO ACRC VALUES('','','1C3-12A','Fluid Temperature Out','46.4');
INSERT INTO ACRC VALUES('','','1C3-12B','Fan Speed','28.5');
INSERT INTO ACRC VALUES('','','1C3-12B','Fluid Temperature In','47.1');
INSERT INTO ACRC VALUES('','','1C3-12B','Fluid Temperature Out','62.9');You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO ACRC VALUES('','','1C3-4A','Fluid Temperature In','47.2');INSERT IN' at line 2 
```

现在我已经从中获取结果并手动将其放入我的 mysql 中，它按原样工作，尽管它确实在每个插入语句中返回了 2 个警告。第一个值是自动增量 id 值，第二个是时间戳。

对于后续问题，我的时间戳返回全 0。

你们能帮忙解答我的问题吗？我已经潜伏了很长时间，这个网站在过去帮助了我很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:24:52.960

`mysql_query()`不允许您一次执行多个查询。`mysql_*`如果您更喜欢使用已弃用的扩展程序，则必须一一执行所有这些

[请参阅PHP 手册](http://php.net/mysql_query)中的此注释

`mysql_query() sends a unique query (multiple queries are not supported) to the currently active database on the server that's associated with the specified link_identifier.`

那个著名的红盒子也会说

`This extension is deprecated as of PHP 5.5.0, and will be removed in the future. Instead, the MySQLi or PDO_MySQL extension should be used.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:26:07.777

使用`Mysqli's` `multi_query`函数运行多查询。

`mysql_*`不允许运行`multi query`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T05:29:51.953

您不能像这样发送“INSERT INTO”。但您可以执行以下操作：

```
$insert = "INSERT INTO ACRC VALUES 
('','','1C3-4A','$fs','$acrc1c3_4afs'),
('','','1C3-4A','$fi','$acrc1c3_4afi'),
('','','1C3-4A','$fo','$acrc1c3_4afo'),
('','','1C3-4B','$fs','$acrc1c3_4bfs'),
('','','1C3-4B','$fi','$acrc1c3_4bfi'),
('','','1C3-4B','$fo','$acrc1c3_4bfo'),
('','','1C3-12A','$fs','$acrc1c3_12afs'),
('','','1C3-12A','$fi','$acrc1c3_12afi'),
('','','1C3-12A','$fo','$acrc1c3_12afo'),
('','','1C3-12B','$fs','$acrc1c3_12bfs'),
('','','1C3-12B','$fi','$acrc1c3_12bfi'),
('','','1C3-12B','$fo','$acrc1c3_12bfo');"; 
```

作为参考：[http ://www.electrictoolbox.com/mysql-insert-multiple-records/](http://www.electrictoolbox.com/mysql-insert-multiple-records/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:37:04.723

对于您的后续问题，关于您收到的错误：这些可能是由于您在查询中使用空字符串导致`id`的`timestamp`。

您希望在 INSERT 查询中包含要插入的行，并让其他值（如`auto_increment`ing `id`s）自行填写。

例如，假设您的表有以下行：`id`, `time`, `val1`, `val2`, `val3`。您当前的语句就像执行：

```
INSERT INTO ACRC (id, time, val1, val2, val3) VALUES('','','1C3-4A','$fi','$acrc1c3_4afi'); 
```

所以 MySQL 试图在 id 和 time 中插入空字符串，然后只插入该行的“空”（因此，对于整数，它是 0）。当您有应该是唯一的行时，这往往会导致问题 -`auto_increment`如果您不尝试将某些内容插入`id`列中，则会为您做到这一点。

相反，使用：

```
INSERT INTO ACRC (val1, val2, val3) VALUES ('1C3-4A', '$fi', '$acrc1c3_4afi') 
```

并省略其他行以允许它们自己填写。

# mysql - -bash: scripts/mysql_install_db: /usr/bin/perl: bad interpreter: 没有这样的文件或目录

> ID：15779439
> 
> 赞同：0
> 
> 时间：2013-04-03T05:20:49.167
> 
> 标签：mysql, lamp, fedora

有人可以帮忙吗？我正在尝试在 Fedora 18 上设置安装 LAMP 服务器，每当我运行“scripts/mysql_install_db --user=mysql”命令时，我都会收到一条错误消息。

```
-bash: scripts/mysql_install_db: /usr/bin/perl: bad interpreter: No such file or directory 
```

顺便说一句，我希望我的 'P' 是 PHP 而不是 Perl 下面是我如何进行安装： $ groupadd mysql $ useradd -g msql -c "MySQL Server" mysql $ gzip... $ tar.. .. $ ln ... 创建一个名为 (mysql) 的符号链接 $ cd msql (pwd: /usr/local/mysql/) $ scripts/mysql_install_db --user=mysql

!!!现在这是我收到该错误消息的时候!!!!!!。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:50:15.247

您尝试执行的脚本似乎具有 CR+LF EOL 标记。您可以通过发出以下命令来验证：

```
file <filename> 
```

（输出将包含`with CRLF line terminators`。）

将其更改为`LF`，脚本应该可以正常执行。有关更多信息，请参见[http://en.wikipedia.org/wiki/Newline](http://en.wikipedia.org/wiki/Newline)。

# jquery - 让 JS 加载到 JQM 页面上

> ID：15779441
> 
> 赞同：2
> 
> 时间：2013-04-03T05:20:58.510
> 
> 标签：jquery, jquery-mobile, jquery-plugins, jquery-mobile-pageshow

我正在尝试让一个插件在 JQM 上运行，但我需要它在第二页处于活动状态时等待并加载。现在，它在启动时加载。我的页面设置为`data-role='page'`. 这是我的代码：

```
$(document).ready(function(){
    $("#two").bind('pageinit')
    jQuery(".namesleft").fitText();
    jQuery(".scoreleft").fitText();
    jQuery(".namesright").fitText();
    jQuery(".scoreright").fitText();
}); 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:31:46.057

jQuery mobile 可以替代`$(document).ready`. 代码应如下所示：

```
 <script type="text/javascript">
       $('div:jqmData(role="page")').live('pagebeforeshow',function(){
             // code to execute on each page change
       });
</script> 
```

事实上，jQm 有一整套事件替代常规 jQuery 事件：http: [//jquerymobile.com/demos/1.2.1/docs/api/events.html](http://jquerymobile.com/demos/1.2.1/docs/api/events.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:21:51.573

这是一个有效的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/F2Gcm/](http://jsfiddle.net/Gajotres/F2Gcm/)

```
$(document).on('pageshow', '#index', function(){       
    $("h1").fitText(0.273);
    $(".download").fitText(1);
}); 
```

**应该使用**on方法而不是****live**方法来绑定页面事件，**live**方法已被弃用并且在 jQuery 1.9+ 中不存在。**

 **这也应该绑定到**pageshow**事件，因为它在任何其他情况下都不起作用。jQuery Mobile 对插件进行视觉更改非常严格，这种插件只能在**pageshow**事件中使用。

如果您想更好地了解 jQuery Mobile 页面事件，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，或在**[此处](https://stackoverflow.com/a/14469041/1848600)**找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:43:58.090

您可以在 JQM 的 pageshow 事件中添加代码，例如：

```
$("#two").live('pageshow', function(){
    $(".namesleft, .scoreleft, .namesright, .scoreright").fitText();
}); 
```**

# ruby-on-rails - 如何知道发生了 Ruby 异常的对象

> ID：15779450
> 
> 赞同：1
> 
> 时间：2013-04-03T05:22:05.853
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我相信在大多数情况下，当异常发生时，它们确实发生在对象周围，由于尝试调用对象上的方法，或者它们发生在执行属于某个对象的某个方法的某些代码时。

我如何从给定的`Exception`实例中知道这个对象？

例子

```
begin
  ....
rescue ActiveRecord::SerializationTypeMismatch => e
  object = e.some_method_which_will_return_active_record_object
rescue => e
  object = e.get_me_object_around_which_this_happened
end 
```

在我的特殊情况下，我想知道发生了哪个 AR 对象 SerializationTypeMismatch。

在这种情况下，我对 e.message 或 backtrace 不感兴趣，我也检查了 e.methods，但没有找到知道关联对象的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:57:55.153

> 我相信在大多数情况下，当异常发生时，它们确实发生在对象周围，由于尝试调用对象上的方法，或者它们发生在执行属于某个对象的某个方法的某些代码时。

[但这并非在所有情况下都是正确的，并且通常在引发的异常](http://ruby-doc.org/core-2.0/Exception.html)和它发生的“周围”对象之间没有关系，因为可能并不总是有一个对象。

例如，当所需文件（例如 Ruby 脚本）无法加载时，会引发[LoadError 。](http://ruby-doc.org/core-1.9.3/LoadError.html)这实际上与任何特定的对象实例无关。我不相信任何[标准异常类](http://rubylearning.com/satishtalim/ruby_exceptions.html)的初始化方法都接受用于存储与该异常相关的对象的参数，因此没有直接的方法可以映射回原始对象。

如果您无法映射回发生错误的 ActiveRecord 对象，则您的`begin`/`rescue`块可能在被调用的代码堆栈中放置“太高”。例如，您的块中可能有类似这样`each`的循环`begin`：

```
begin
  items.each do |item|
    raise RuntimeError unless item == "foo"
  end
rescue RuntimeError => e
  # which item caused the error?
end 
```

在那种情况下，您无法知道哪个项目导致了错误，但您可以重组您的`begin`块以更直接地包装代码，如下所示：

```
items.each do |item|
  begin
    raise RuntimeError unless item == "foo"
  rescue RuntimeError => e
    # the object that raised the exception must be 'item'
  end
end 
```

这当然是一个人为的例子，但希望它说明了将`begin`/`rescue`块更紧密地包装在可能引发异常的代码周围的技术，因此对于哪个对象导致问题没有歧义。

# jquery - 带有变量的 HTML 元素

> ID：15779451
> 
> 赞同：2
> 
> 时间：2013-04-03T05:22:06.047
> 
> 标签：jquery, html

在 jQuery 中，我可以创建一个带有数据的 HTML 元素：

```
$('<button onclick="btn()"></button>').data("field", { i: i, j: j }).appendTo("body"); 
```

并这样使用它：

```
function btn(){
    var field = $(this).data("field")
    alert(field.i)
} 
```

### HTML

```
<button onclick="btn()" data-field= "{ i: thevalueofi, j: tthevalueofj }"></button>

function btn(){
    var field = $(this).data("field")
    alert(field.i)
} // it doesn't work 
```

如何在 JavaScript 中使用数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T05:28:12.710

如果您想要一个与您创建的按钮具有相同数据的按钮的 html，则必须使用 html5 数据属性。IE

```
<button data-field='{ "i": "thevalueofi", "j": "tthevalueofj" }'></button> 
```

并阅读它

```
 function btn(){
        var field = $('button').data("field");
        alert(field.i)}
 } 
```

用纯js

```
 function btn(){
        var field = JSON.parse(document.querySelector('button').getAttribute("data-field"));
        alert(field.i)}
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T05:02:30.613

与[`.dataset`](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)：

```
document.querySelector('button').dataset.field 
```

并非所有浏览器都支持此功能，因此您可能需要找到一个 polyfill（或使用 jQuery）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T19:15:17.973

我想扩展[Derek 的评论](https://stackoverflow.com/questions/16248542/html-data-in-javascript#comment23248219_16248858)，以及这里的其他一些答案，以解决紧迫的问题。

> 好的，但我该如何使用它？

data-* 系列属性旨在将一组数据作为属性存储在 HTML 元素上，其设计方式使您不必自己显式处理数据到 JSON 的转换或存储所有数据在单个属性中。

不要将所有数据存储在单个 data-* 属性中，而是将数据存储在单个属性中，如下所示：

```
<div id="user" data-id="12345" data-name="James" data-role="developer" 
        class="users wrappers" >
     ...
</div> 
```

然后，当您需要检索数据时，您可以使用一个简单的 JavaScript 命令一次检索所有数据：

```
var userObj = document.getElementById("wrapper").dataset;

console.info("user id = " + userObj.id); // prints "12345"
console.info("name = " + userObj.name);  // prints "James"
console.info("role = " + userObj.role);  // prints "developer" 
```

如您所见，非 data-* 属性，如 id 和 class，不包含在数据集中，这使得仅提取数据本身变得容易。

此外，userObj 类似于纯 JavaScript 对象，我可以通过对其进行字符串化来确认：

```
console.info("Stringified JSON object = " + JSON.stringify(userObj)); 
    // prints '{"id":12345,"name":"James","role":"developer"}' 
```

然而，说实话，这个对象并不是真正的 JavaScript 对象，而是一个[DOMStringMap](https://developer.mozilla.org/en-US/docs/DOM/DOMStringMap)，它在嵌套数据方面有局限性，我们将在下面看到：

> void setDataAttr（
>   在 DOMString 属性中，
>   在 DOMString 值中
> ）；
> 
> **参数**
> 
> **支柱**
> 
> 要设置其值的属性。
> 
> **价值**
> 
> 属性的新值。

**请注意，上面的值是一个 DOMString，而不是一个对象。**

在您的情况下，您将所有数据作为单个字符串化 JSON 对象存储在称为 data-field 的单个 data-* 字段上。这并没有错，但略有不同，可能会为您带来更多的工作。它在可读性方面可能有不同的优点和缺点，例如，以及将字符串转换为对象的额外工作。

在您的情况下，要提取数据，您需要执行以下操作：

```
<!-- Note the nested quotes. This is what it looks like in the Chrome Elements 
     inspector. In reality, the quotes inside must be escaped -->
<div id="user" data-field="{"id":"12345", "name":"James", "role":"developer"}" 
        class="users wrappers" >

var userString = document.getElementById("user").dataset.field; 
```

除了，这是我们开始看到这种方法中的漏洞的地方。dataset.field 值不是第一个示例中的对象；相反，它是一个字符串，我们必须自己将它转换为一个对象：

```
var userObj = JSON.parse(userString); 
```

现在我们可以访问由 data-field 表示的数据的属性：

```
console.info("name = " + userObj.name);  // prints the name "James" 
```

与可以包含嵌套 JSON 对象的常规 JSON 对象不同，DOMStringMap 是一个包含键/值对的对象，其中值都是字符串。简而言之，值内的任何嵌套对象都表示为字符串，而不是对象，这意味着它们必须单独转换为对象。

同样，这不是一件坏事，但它表明将对象存储在单个元素中可能更好地保留用于对象表示不仅仅是一层深度的更复杂的数据结构。在这种情况下，我们必须从字符串转换为 JSON，但在这种情况下我们有充分的理由这样做，因为除了一层嵌套之外，引擎不会为我们执行这些转换。

如果您更喜欢 Firefox，请尝试从 Chrome JavaScript 控制台或 Firebug 控制台自己操作数据。控制台允许我们实时使用不同的技术，并对某个功能应该如何工作有更强烈的感觉。希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T05:56:07.473

使用这个 javascript。

```
<button type="button" id="mybutton" onclick="btn()" data-field= "{ i: thevalueofi, j: tthevalueofj }"></button>
<script>
 function btn(){
   var mydata = document.getElementById("mybutton").getAttribute("data-field");
    alert("data-field");
    // alert(mydata);
 }
</script> 
```

或者

像这样使用 jQuery。

```
<button type="button" id="mybutton" onclick="btn()" data-field= "{ i: thevalueofi, j: tthevalueofj }"></button>
<script>
 function btn(){
   var mydata = jQuery("button#mybutton").attr("data-field");
    alert("data-field");
    // alert(mydata);
 }
</script> 
```

# c# - 如何从在线 .txt 文件中搜索或匹配文本？

> ID：15779453
> 
> 赞同：2
> 
> 时间：2013-04-03T05:22:15.717
> 
> 标签：c#, .net, text, path, match

我已经尝试过了，但它给了我一个错误：

> *“不支持给定路径的格式”。*

```
private void btnVerify_Click(object sender, EventArgs e)
{
    int counter = 0;
    string email = textVarify.Text;
    string line="";
    System.IO.StreamReader file = new System.IO.StreamReader("https://dl.dropboxusercontent.com/u/9013501/bots/lic.txt");
    while ((line = file.ReadLine()) != null)
    {
        if (line.Contains(textVarify.Text))
        {
            DevComponents.DotNetBar.MessageBoxEx.Show("Email",textVarify.Text+" Found");
        }
        counter++;
    }

    file.Close();
} 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:45:03.677

[StreamReader 构造函数](http://msdn.microsoft.com/en-us/library/f2ke0fzy.aspx)的参数是本地系统中的文件路径，或者是由 UNC 路径标识的文件共享（例如`\\foo\bar\file.txt`）；您提供了一个 HTTPS URL，但两者都不是。

要通过 HTTP 将文件检索到流中，您需要类似[WebClient.OpenRead](http://msdn.microsoft.com/en-us/library/781fwaz8%28v=vs.100%29.aspx)的东西：

```
var webClient = new WebClient();
var uriString = "https://dl.dropboxusercontent.com/u/9013501/bots/lic.txt";

var stream = webClient.OpenRead(uriString);

var file = new StreamReader(stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:26:07.757

正如我在评论中发布的那样，`StreamReader`需要一个本地文件路径。您可以使用`WebClient`先下载文件。这里举个例子： [如何下载文本文件](http://www.csharpdeveloping.net/Snippet/how_to_download_text_file)

# makefile - 如何读取文本文件的第一行并将其分配给生成文件中的变量？

> ID：15779454
> 
> 赞同：0
> 
> 时间：2013-04-03T05:22:19.293
> 
> 标签：makefile

我有一个名为 info.txt 的文件。我想读取文件的第一行并将其分配给makefile中的变量BUILD_NO。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:26:12.177

如果您认为该值仅在命令脚本中可用，并且您不担心它会被引用，那么 Jonathan 的解决方案将非常有效。如果您希望它在 makefile 中也可用，或者您担心`'$(BUILD_NO)'`出现在您的脚本中，并且您愿意将自己限制在 GNU make 中，您可以使用：

```
BUILD_NO := $(shell head -n 1 info.txt) 
```

（我`head`在这里使用只是因为它更有效）。在其他一些版本的 make 中有替代品，但不幸的是，没有真正可移植的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:31:19.207

```
BUILD_NO = `sed 1q info.txt` 
```

当您引用`${BUILD_NO}`或`$(BUILD_NO)`在一个动作中，shell 片段将被执行。您可能决定也需要双引号：

```
BUILD_NO = "`sed 1q info.txt`" 
```

如果你想在依赖信息中得到它，你必须更加努力——`make`你在哪个平台上使用哪个版本？

# c# - 如何在屏幕上显示输出？

> ID：15779462
> 
> 赞同：1
> 
> 时间：2013-04-03T05:23:11.000
> 
> 标签：c#

我编写了所有代码，当我运行项目时，它没有在屏幕上显示输出。谁能告诉我，用于在屏幕上显示输出的代码是什么？

这是我（不是控制台）应用程序中使用的代码。

```
private async void Button_Click_1(object sender, RoutedEventArgs e) {
    StorageFile xmlFile = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync("Content1.xml");
    XmlDocument xmlDoc;
    xmlDoc = await XmlDocument.LoadFromFileAsync(xmlFile);
    System.Xml.Linq.XDocument duc = System.Xml.Linq.XDocument.Parse(xmlDoc.GetXml());

    var query=
        from Date in duc.Root.Elements("Serial")
        where Date.Attribute("No").Value=="1"
        from Current in Date.Elements("Current")
        select new {
            NarratedBy=Current.Attribute("NarratedBy").Value,
            value=Current.Attribute("Date").Value
        };

    foreach(var Date in query) {
        System.Diagnostics.Debug.WriteLine("{0}\t{1}", Date.NarratedBy, Date.value);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:25:16.857

您可以使用多行[TextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox%28v=vs.71%29.aspx)或[RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox%28v=vs.71%29.aspx)和[TextBlock](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx) 并将文本附加到它显示并使用[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)格式化文本。

```
TextBox1 +=  String.Format("{0}\t{1}", Date.NarratedBy, Date.value) + Environment.NewLine; 
```

# windows - 在 Open With... 上下文菜单中命名程序

> ID：15779471
> 
> 赞同：8
> 
> 时间：2013-04-03T05:23:37.313
> 
> 标签：windows, registry, contextmenu, windows-shell, open-with

如何自定义在 Windows XP 和 7的“*打开方式...”上下文菜单中可见的程序名称？*

例如：我在 Windows 上安装了一个名为*XYZ的产品的 3 个版本；*`.x`文件关联到`xyz.exe`（COM 注册）。

该产品的所有版本都具有相同的`.exe`名称。现在在*Open With...*上下文菜单中，它显示*XYZ*程序 3 次（安装了 3 个版本）但名称相同。

如何让它也显示版本？即*XYZ V1.0*、*XYZ V2.0*等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T05:25:04.040

将以下内容另存为`.reg`文件，根据需要进行修改，然后导入注册表：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Applications\VLCMoveOnEnd.exe]
"FriendlyAppName"="VLC (Move on end)"

[HKEY_CLASSES_ROOT\Applications\VLCMoveOnEnd.exe\shell]

[HKEY_CLASSES_ROOT\Applications\VLCMoveOnEnd.exe\shell\open]
"FriendlyAppName"="VLC (Move on end)" 
```

取自我[对同一问题的回答](https://stackoverflow.com/questions/14906673/how-can-i-set-the-name-of-my-program-in-the-open-with-dialog)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T23:53:35.787

我对几个不同版本的搅拌机有同样的问题。

我阅读了上面的答案，但我不认为将“以下内容保存为`.reg`文件”是最快的方法。

1) 导航到

```
[HKEY_CLASSES_ROOT\Applications\**YOUR PROGRAM HERE***.exe\shell\open] 
```

2）选择“打开”文件夹，右键单击以添加一个名为的新字符串值`FriendlyAppName`

3) 将值数据更改为您想要的应用名称

[图片步骤:)](http://i.stack.imgur.com/3PHhq.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-04T19:56:15.073

我不知道接受的答案是否真的回答了这个问题。我有同样的问题，我有同一个软件的不同版本，都是 xyz.exe。

也许它适用于旧版本的 Windows，但对于 Windows 10，向“HKEY_CLASSES_ROOT\Applications\xyz.exe”键添加“FriendlyAppName”值仍将导致所有版本的软件具有相同的名称，尽管现在您有了除了其中一个之外，所有版本号都错误。

注意：您可以通过在开始搜索栏中输入“regedit”来找到注册表。

* * *

经过大量搜索和测试，MUICache 似乎是 Windows 获取 FriendlyAppName 的地方。

警告说明：我不确定更改 MUICache 中的值是否有任何不利影响，也不确定刷新缓存的频率以及您所做的更改是否会被重写。

钥匙：

*   [HKEY_CURRENT_USER\Software\Classes\Local Settings\Software\Microsoft\Windows\Shell\MUICache]
*   注册表中可能还有其他 MUICache 键位置，不完全确定

价值观：

*   "[Install_Folder 1.0]xyz.exe.FriendlyAppName"="xyz 1.0"
*   "[Install_Folder 2.0]xyz.exe.FriendlyAppName"="xyz 2.0"
*   ETC...

* * *

回到关键 HKEY_CLASSES_ROOT\Applications\xyz.exe，如果重命名 .exe 文件不会破坏任何内容，您可以将它们重命名为具有版本号，例如 xyz_1.0.exe。

然后，您可以使用正确的 FriendlyAppName 值添加 HKEY_CLASSES_ROOT\Applications\xyz_version_num.exe 键。

* * *

话虽如此，最有可能安装多个版本的软件安装程序应该为我们解决这个问题，而不是我们自己修改注册表......

# java - selenium 只运行几个方法

> ID：15779474
> 
> 赞同：0
> 
> 时间：2013-04-03T05:23:46.467
> 
> 标签：java, selenium, junit

我知道通过创建测试套件，我可以运行我的所有类文件，使用类似的代码

```
suite.addTestSuite( TestCase3.class);  
suite.addTestSuite( TestCase2.class);
suite.addTestSuite( TestCase1.class); 
```

但是如果我不想运行类文件中的所有方法怎么办？我只想在测试类中运行特定的测试方法，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:40:32.880

以下链接可能对您有用

[在不修改 Test 类的情况下排除单个 JUnit Test 方法？](https://stackoverflow.com/questions/1368915/exclude-individual-junit-test-methods-without-modifying-the-test-class)

[http://junit.sourceforge.net/javadoc/org/junit/Ignore.html](http://junit.sourceforge.net/javadoc/org/junit/Ignore.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:40:17.237

如果你想修改跨类的执行，我强烈推荐[TestNG](http://testng.org/doc/index.html)！

它有据可查，并为定制的测试执行提供了大量有用且易于使用的功能。

根据您的要求，TestNG Groups 将完成这项工作。

```
import org.testng.annotations.Test;

@Test(groups = {"groupA"})
public class ATest{

    @Test(groups = {"group1"})
    public void testA1() {

    }

    @Test(groups = {"group2"})
    public void testA2() {

    }

} 
```

&

```
import org.testng.annotations.Test;

@Test(groups = {"groupB"})
public class BTest{

    @Test(groups = {"group1"})
    public void testB1() {

    }

    @Test(groups = {"group2"})
    public void testB2() {

    }

} 
```

我想你已经知道如果你启动“group1”方法会运行哪些方法，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:04:46.457

您将需要进一步构建您的套件。就像是 ：

```
XmlSuite suite = new XmlSuite();

    XmlTest test = new XmlTest(suite);
    test.setName("TmpTest1");
    test.setVerbose(3);
    List<XmlClass> classes = new ArrayList<XmlClass>();
    XmlClass cl = new XmlClass();
    cl.setName("my.pkg.Tests");
    XmlInclude incMet = new XmlInclude("testSimpleTrue");
    List<XmlInclude> incMetList = new ArrayList<XmlInclude>();
    incMetList.add(incMet);
    cl.setIncludedMethods(incMetList);
    classes.add(cl);

    test.setXmlClasses(classes);

    List<XmlSuite> suites = new ArrayList<XmlSuite>();
    suites.add(suite);

    testng.setXmlSuites(suites); 
```

# c# - 将数据表插入到sql表中

> ID：15779475
> 
> 赞同：2
> 
> 时间：2013-04-03T05:23:54.723
> 
> 标签：c#, asp.net

我有一个名为`dt2`. 它包含一些数据。我想将这些数据添加到名为`invitationdata`.

我该如何编写代码？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-03T05:41:35.230

```
public bool BulkInsertDataTable(string tableName, DataTable dataTable)
{
    bool isSuccuss;
    try
    {
        SqlConnection SqlConnectionObj = GetSQLConnection();
        SqlBulkCopy bulkCopy = new SqlBulkCopy(SqlConnectionObj, SqlBulkCopyOptions.TableLock | SqlBulkCopyOptions.FireTriggers | SqlBulkCopyOptions.UseInternalTransaction, null);
        bulkCopy.DestinationTableName = tableName;
        bulkCopy.WriteToServer(dataTable);
        isSuccuss = true;
    }
    catch (Exception ex)
    {
        isSuccuss = false;
    }
    return isSuccuss;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T05:31:25.070

```
 DataTable dt = new DataTable();
 string sql = "";
 for (int i = 0; i < dt2.Rows.Count; i++)
 {
    sql = sql + "insert into InvitationData (Col1, Col2, ColN) values('"
          + dt2.Rows[i]["columnname"].ToString().Trim() + "','"
          + dt2.Rows[i]["columnname"].ToString().Trim() + "','" 
          + dt2.Rows[i]["columnname"].ToString().Trim() + "')";
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T05:26:17.517

如果您的数据表和表结构相同，那么您可以使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)，如果数据表包含大量行，这将是一个更快的选择。

**SqlBulkCopy**

> 让您可以使用来自其他源的数据有效地批量加载 SQL Server 表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T05:25:16.633

采用`INSERT INTO...SELECT`

```
INSERT INTO InvitationData (Col1, Col2, ColN)
SELECT Col1, Col2, ColN
FROM   DT2 
```

它所做的是选择所有记录（*或指定记录*）并将其插入到另一个表中。

# ios - iOS中的各种条码阅读器免费SDK

> ID：15779477
> 
> 赞同：2
> 
> 时间：2013-04-03T05:24:10.010
> 
> 标签：ios, xcode, qr-code, barcode-scanner, aztec-barcode

我正在制作一个免费的条形码阅读器应用程序。我正在寻找免费的 SDK 来解码 Datamatrix、QR、Aztec、UPC、EAN 条码。我现在已经实现了 ZBar SDK。成功检测到 QR、UPC 和 EAN。我测试了[这个链接](http://code.google.com/p/zxing/source/browse/trunk/iphone)

[兹巴](http://sourceforge.net/projects/zbar/files/iPhoneSDK/ZBarSDK-1.2.dmg/download)

[ZXingOBjC](https://github.com/TheLevelUp/ZXingObjC)

但这些都无法正确检测到阿兹台克人。使用 Data Matrix、UPC、EAN 和 QR，我发现 Redlaser 非常有效，但现在它不是免费的。

现在，是否有任何免费的 SDK 可用于检测所有四个条形码而无需付费，因为我想让我的应用程序在应用程序商店中免费。

请建议

PS 我希望扫描仪与可用的最新 iOS 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:59:58.560

通过一些工作，您可以使用 zint 做到这一点。请参阅[https://github.com/samlown/zint/blob/master/backend/aztec.c](https://github.com/samlown/zint/blob/master/backend/aztec.c) 我已经在应用程序中使用了它。对不起，我不能分享更多的代码：包括barcode、aztec、common、font、gs1、rs和bmp类然后把下面的代码放在一个单独的类中

```
void dataProviderReleased (void *info, const void *data, size_t size) {
    struct barcode_symbol *my_symbol = info;
    Barcode_Delete(my_symbol);
}

+ (UIImage *)aztecBarcodeImageFromString:(NSString *)s scale:(CGFloat)scale {
    UIImage *image = nil;
    int errorCode = 0;
    struct barcode_symbol *my_symbol;

    if (s == nil) {
        return nil;
    }

    unsigned char *unicodeCharPtr = (unsigned char *)[s cStringUsingEncoding:NSUTF8StringEncoding];

    LogInfo(@"Creating barcode image for string: %@", s);

    my_symbol = Barcode_Create();

    my_symbol->output_options = 0;

    //my_symbol->output_options = BARCODE_BOX; //For a box around the bar code
    my_symbol->scale = scale;
    my_symbol->symbology = BARCODE_AZTEC;

    my_symbol->input_mode = UNICODE_MODE;

    errorCode = Barcode_Encode(my_symbol, unicodeCharPtr, 0);

    if (errorCode == 0) {
        errorCode = Barcode_Buffer(my_symbol, 0);

        if (errorCode == 0) {

            int numberOfComponents = 3;
            long imgSizePerRow = numberOfComponents * my_symbol->bitmap_width;
            long imgSize = imgSizePerRow * my_symbol->bitmap_height;

            CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

            //The dataProviderReleased method is responsible for deallocating the ZBarCode with the corresponding image data
            CGDataProviderRef providerRef = CGDataProviderCreateWithData(my_symbol, my_symbol->bitmap, imgSize, dataProviderReleased);

            CGImageRef imageRef = CGImageCreate(my_symbol->bitmap_width, my_symbol->bitmap_height, 8, numberOfComponents * 8, 
                                                imgSizePerRow, colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaNone, 
                                                providerRef, NULL, NO, kCGRenderingIntentDefault);

            image = [UIImage imageWithCGImage:imageRef];

            CGColorSpaceRelease(colorSpace);
            CGDataProviderRelease(providerRef);
            CGImageRelease(imageRef);
        } else {
            LogWarn(@"Could not buffer barcode, error=%d", errorCode);
            Barcode_Delete(my_symbol);
        }

    } else {
        LogWarn(@"Could not encode barcode, error=%d", errorCode);
        Barcode_Delete(my_symbol);
    }

    return image;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:12:20.570

您可以扫描自定义 ZBar 扫描仪，例如设置更多这样的符号

```
-(void)scanProductBarCode
{
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        reader.supportedOrientationsMask = ZBarOrientationMaskLandscape;
    else
        reader.supportedOrientationsMask = ZBarOrientationMaskPortrait;

    ZBarImageScanner *scanner = reader.scanner;
    [scanner setSymbology: ZBAR_UPCA config: ZBAR_CFG_ENABLE to: 1];
    [scanner setSymbology: ZBAR_CODE39 config: ZBAR_CFG_ADD_CHECK to: 0];
    [scanner setSymbology:ZBAR_QRCODE config:ZBAR_CFG_ADD_CHECK to:1];
    [scanner setSymbology:ZBAR_EAN13 config:ZBAR_CFG_ADD_CHECK to:1];

    [self presentModalViewController:reader animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T11:39:30.530

如今，您可以使用 AVFoundation 扫描条形码，并且支持您在问题中提到的所有条形码类型。

快速教程：[在 Swift 3 和 Xcode 8 中构建条形码和二维码阅读器](http://www.appcoda.com/barcode-reader-swift/)

# php - 有没有办法让 bind_param 接受可变数量的参数

> ID：15779481
> 
> 赞同：0
> 
> 时间：2013-04-03T05:24:20.770
> 
> 标签：php, mysqli, prepared-statement, sqlbindparameter

我正在尝试为 PHP 制作一个 mysql 查询包装函数，现在我正在尝试使用准备好的语句，因为它们显然是在 SQL 中执行 MySQL 查询的最佳方法，到目前为止，这就是我所拥有的

```
public function run_query($query)
{
    $arguments = $query['arguments'];
    $prep = $this->connection->prepare($query['query'])
    $dtString = '';

    foreach($arguments as $_field => $_argument)
    {
        $dtString .= array_keys($_argument);
    }
} 
```

的结构`$query`是这样的

```
$query =    array( "query" => QUERY,
                  "arguments" => array(FIELD => array(DATATYPE => VALUE))) 
```

和可能的例子`$query`是这样的

```
$query =    array( "query" => "SELECT * FROM table_1 WHERE active = ? AND group = ?",
                  "arguments" => array("active" => array("i" => 1),
                                       "group" => array("i" => 17))) 
```

现在如您所见，我要做的是让我的函数允许任何查询，而不管查询是什么以及您想使用多少个参数。

现在在我的函数中，for each 之后的下一步是使用`$prep->bind_param($dtString, [VALUES]);`但是我读到每个值都是函数中的一个单独的参数，这有点搞砸了

我想知道是否有办法让`bind_param`我的函数接受可变数量的参数

我当前的解决方案是创建另一个函数，将 $arguments 作为参数传递给函数，将我的 for each 移动到新函数中，并在创建`$dtString`计算它的大小并拥有一个只有多个`bind_param`但具有不同数量的参数的 switch case 之后这

```
switch($count)
{
    case 1:
        $prep->bind_param($dtString, $array[0]);
        break;
    case 2:
        $prep->bind_param($dtString, $array[0], $array[1]);
        break;
    case 3:
        $prep->bind_param($dtString, $array[0], $array[1], $array[2]);
        break;
} 
```

但我宁愿避免编写这样的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:45:04.280

如果您只想坚持使用本机准备好的语句，PDO 是唯一 [理智] 选择
不知道您的函数打算返回什么，但假设查询中的所有数据：

```
public function run_query($query, $params)
{
    $stm = $this->connection->prepare($query)
    $stm->execute($params);
    return $stm->fetchAll();
}

$query = "SELECT * FROM table_1 WHERE active = ? AND group = ?";
$data  =  $db->run_query($query, array(1, 17)); 
```

# iphone - 如何从 UIView 的子类推送视图控制器

> ID：15779485
> 
> 赞同：4
> 
> 时间：2013-04-03T05:24:45.590
> 
> 标签：iphone, objective-c, uitableview, uinavigationcontroller

我`CategoryTableView`从`UIView`. 并`CategoryTableView`包含一个`UITableView`. 我从. `CategoryTableView`_ 现在，我想在执行时推送一个新的视图控制器。但是，在 中 ，我如何推送或呈现另一个视图控制器。我无法访问.`HomeViewController``UIViewController``didSelectRowAtIndexPath``CategoryTableView``CategoryTableView`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T05:38:36.017

**类别表视图.h**

```
@property (retain, nonatomic) parentViewController *parent; //create one property for parent view like this 
```

**分类表视图.m**

```
@sythesize parent;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [parent.navigationController . . .]; // preform action
    //OR..
    [parent presentModalViewController: . . .]; // present modal view
} 
```

**父母.m**

```
//while calling your CategoryTableView assign self to your parent object

    CategoryTableView *tblView = [CategoryTableView alloc] init];
    tblView.parent = self; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:45:54.593

您需要使用自定义委托来实现这一点......

在**CategoryTableView.h**

```
@protocol CategoryTableViewDelegate <NSObject>

-(void)pushViewControllerUsinDelegate:(UIViewController *)viewController;

@end

@interface CategoryTableView : UIView

@property (nonatomic, retain) id<CategoryTableViewDelegate> delegate;

@end 
```

在**CategoryTableView.m**

@implementation CategoryTableView

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Create the required UIViewControllers instance and call the delegate method.
    UIViewController *viewController = [[UIViewController alloc] init];
    [self.delegate pushViewControllerUsinDelegate:viewController];
}

@end 
```

在**HomeViewController.h**

```
 @interface HomeViewController : UIViewController <CategoryTableViewDelegate>

    @end 
```

在**HomeViewController.m**

```
@implementation HomeViewController

-(void)viewDidLoad
{
    [super viewDidLoad];

    //initialization of CategoryTableView like this...
    CategoryTableView *categoryTableViewInstance = [[CategoryTableView alloc] init];
    [categoryTableViewInstance setDelegate:self];

}

-(void)pushViewControllerUsinDelegate:(UIViewController *)viewController
{
    [self.navigationController pushViewController:viewController animated:YES];
} 
```

# c++ - 如何返回 cURL 数据

> ID：15779487
> 
> 赞同：0
> 
> 时间：2013-04-03T05:24:52.303
> 
> 标签：c++, curl

所以我有这个程序可以找到我电脑的外部 IP 地址。我需要将此数据写为变量，但我不知道如何。这是来源（我已经知道过多的标题，它们都被同时使用过，我还没有清理它。）

```
#include <stdio.h>
#include <C:\Documents and Settings\Jacob Grass\My Documents\C++\Server Software\curl\curl.h>
#include <C:\Documents and Settings\Jacob Grass\My Documents\C++\Server Software\curl\types.h>
#include <C:\Documents and Settings\Jacob Grass\My Documents\C++\Server Software\curl\easy.h>
#include <stdlib.h>
#include <unistd.h>
#include <windows.h>
#include <iostream>
#include <fstream>
//http://www.cplusplus.com/forum/windows/36638/
//http://bot.whatismyipaddress.com/
using namespace std;

int ipfetch (void)
{
  CURL *curl;
  CURLcode res;
  curl = curl_easy_init ();
  if (curl)
  {
    curl_easy_setopt (curl, CURLOPT_URL, "http://bot.whatismyipaddress.com/");
    res = curl_easy_perform (curl);
    curl_easy_cleanup (curl);

  }

  return 0;
}

int main (){
while(1){

ipfetch();

//Sleep in milliseconds
Sleep(300000);
cout<<"\n";

}

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:54:44.090

AFAIK，cURL 正在流式传输：它不会保存整个答案，而是会将答案的块传递给[write 函数](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTWRITEFUNCTION)。

因此，您需要先设置一个写入函数，如下所示：

```
size_t curlWriteToString (void *buffer, size_t size, size_t nmemb, void *userp) {
  ((std::string*) userp)->append ((const char*) buffer, size * nmemb);
  return size * nmemb;}; 
```

...

```
std::string got;
curl_easy_setopt (curl, CURLOPT_WRITEFUNCTION, curlWriteToString);
curl_easy_setopt (curl, CURLOPT_WRITEDATA, &got); 
```

这将为您将响应保存到`got`变量中。

PS 我粘贴的代码来自[libglim/curl.hpp](http://code.google.com/p/libglim/source/browse/trunk/curl.hpp)。

# android - 在谷歌地图android上显示多个位置

> ID：15779492
> 
> 赞同：1
> 
> 时间：2013-04-03T05:25:05.413
> 
> 标签：android, arrays, google-maps, android-emulator, geolocation

我有一系列地址，我想在地图上显示它们（我知道方向是不可能的）。我使用 INTENT 但它只显示 1 个地址！如何让它显示所有地址这是我的代码：

```
 for(int j=0; j<jarElements.length(); j++){
                        JSONObject distanceObj = jarElements.getJSONObject(j).getJSONObject("distance");
                        distanceStr = distanceObj.getString("value");
                        Log.v("finally getting distance : ", distanceStr);
                        buff.append("Distace from the location " + Addresses[j] + " is : " + distanceStr).append("\n").append("\n");
                        Intent is = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr=" + Addresses[j] + "&daddr=" + distanceStr));
startActivity(Is); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:11:30.830

您在此处所做的将向 Google Map 应用程序发出请求以从 to 获取方向`Addresses[j]`，`distanceStr`这将打开 Google Maps 应用程序以返回方向命令。这是您编写的 Intent 的正常行为。

AFAIK 无法显示从 android 到多个位置的方向。它可以通过谷歌地图网络服务完成。

# maven - 使用maven发布项目的批处理脚本

> ID：15779493
> 
> 赞同：2
> 
> 时间：2013-04-03T05:25:15.903
> 
> 标签：maven, batch-file

我希望编写一个批处理脚本来自动化项目发布。以下命令将包含在脚本中。但是，脚本应该检查前面的命令是否成功完成，然后继续执行下一个命令。

```
1.svn co https://projectbase/svn/projectname/trunk
2.mvn clean install
3.mvn release:prepare
4.mvn release:perform 
```

我知道我应该对 mvn 命令使用 call 但是，如何编写批处理脚本来检查一个命令是否成功完成，然后继续执行批处理脚本中的下一个命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:51:41.273

`[ERROR]`试试这个 -如果 maven 产生错误，它依赖于条目：

```
@echo off
setlocal enabledelayedexpansion
for /f "delims=" %%M in ('mvn clean install') do (
    endlocal
    echo %%M
    echo %%M | find "[ERROR]" 2>&1 > null && echo --Error durring maven execution-- && goto :endfor

)
endlocal

setlocal enabledelayedexpansion
for /f "delims=" %%M in ('mvn next command') do (
    endlocal
    echo %%M
    echo %%M | find "[ERROR]" 2>&1 > null && echo --Error durring maven execution-- && goto :endfor

)
endlocal

goto :skipendfor

:endfor

rem put here code you want to execute if maven fails
goto :eof

:skipendfor
rem put here code you want to execute if maven succeed
goto :eof 
```

# java - 初学者：空指针异常

> ID：15779498
> 
> 赞同：0
> 
> 时间：2013-04-03T05:25:35.933
> 
> 标签：java, netbeans

我刚开始使用Java。我正在尝试制作一个简单的（几乎是 Hello world）程序：

1.  用户输入三个玩家的名字
2.  程序打印这三个名字
3.  结尾

玩家等级被称为“Jugador”。我收到 NullPointerException 错误。我或多或少地理解了这个概念，但我仍然不知道为什么它不起作用=(。感谢任何帮助。

来源：

Chicago2.java：

```
package chicago2;
import javax.swing.JOptionPane;
public class Chicago2 {
    public static void main(String[] args) {
        String s;
        Jugador jugadores[];
        jugadores=new Jugador[3];
        int i=1;
        System.out.println("Loading players:");
        for(Jugador x: jugadores) {
            s=JOptionPane.showInputDialog("Name of player "+i+": ");
            x = new Jugador(s);
            System.out.println("Player "+i+": "+x.getName());
            i++;
        }

        System.out.println("Printing players name:");
        for(Jugador y : jugadores) {
                System.out.println("Plays: "+y.getName());
        }
    }
} 
```

Jugador.java：

```
package chicago2;
public class Jugador { 
    private String name;
    public Jugador(String nom)
    {
        name=nom;
    }
    public String getName() {
        return name;
    } 
} 
```

我得到的错误（输出）：

> 跑：
> 
> 加载球员：
> 
> 玩家1：一个
> 
> 玩家 2：b
> 
> 玩家 3：c
> 
> 打印球员姓名：
> 
> 线程“主”java.lang.NullPointerException 中的异常
> 
> 在chicago2.Chicago2.main(Chicago2.java:19)
> 
> Java 结果：1

第 19 行是：

```
System.out.println("Plays: "+y.getName()); 
```

工作环境：

> 产品版本：NetBeans IDE 7.3（内部版本 201302132200）
> 
> 爪哇：1.7.0_17；Java HotSpot(TM) 64 位服务器 VM 23.7-b01
> 
> 运行时：Java(TM) SE 运行时环境 1.7.0_17-b02
> 
> 系统：Linux 版本 2.6.32-41-generic 运行在 amd64 上；UTF-8；en_US (注)

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/NXL9J.png) 如果你读到这里，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:29:38.563

您从用户那里获得的名称没有存储在您的数组中。你需要这样做： -

```
x = new Jugador(s);
jugadores[i] = x; 
```

此外，`int i=1;`应该是`int i=0;`.

但为了更好的可读性，请参阅以下代码更改：-

```
System.out.println("Loading players:");
for(int i = 0; i < jugadores.length; i++) { // Better readability.
        s=JOptionPane.showInputDialog("Name of player "+i+": ");
        Jugador x = new Jugador(s);
        jugadores[i] = x; // Added
        System.out.println("Player "+i+": "+x.getName());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:30:27.750

您实际上并没有在`jugadores`.

要存储，请将行替换`x = new Jugador(s);`为`x = jugadores[i-1] =new Jugador(s);`

# sql - 带有 INNER JOIN 的 SQL 中的唯一关键字

> ID：15779499
> 
> 赞同：0
> 
> 时间：2013-04-03T05:25:53.183
> 
> 标签：sql, oracle

```
SELECT S.name, H.pop
FROM HOME H
INNER JOIN STATE S
ON S.name = H.pop
WHERE H.pop >= 10000 ; 
```

我想让这个名字变得独一无二，我尝试了一些不同的东西。但我正在努力寻找解决方案。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:21:38.877

```
SELECT DISTINCT S.name, S.name AS pop --SINCE BOTH ARE SAME
FROM HOME H
INNER JOIN STATE S
ON S.name = H.pop
WHERE H.pop >= 10000 ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:29:32.733

是的，我认为 J W 的评论很好。你可以试试：

```
SELECT S.name, sum(H.pop)
FROM HOME H
INNER JOIN STATE S
  ON S.name = H.pop
WHERE H.pop >= 10000 
GROUP BY S.name; 
```

或者

```
SELECT distinct S.name, H.pop
FROM HOME H
INNER JOIN STATE S
  ON S.name = H.pop
WHERE H.pop >= 10000; 
```

# javascript - 如何在html中的一页中显示5条记录

> ID：15779501
> 
> 赞同：-4
> 
> 时间：2013-04-03T05:25:58.517
> 
> 标签：javascript, html

我制作了一个程序，在该程序中，我正在获取在输入字段中输入的项目的记录值，假设在输入字段中有“a”，而不是输出应该不超过 5，并且项目的值从 a 开始。

```
<script>
    function main_func() {
    if (document.getElementById('search_input').value == "") {
        alert("Please Enter a charactor / word..");
    } else {
        var con = document.getElementById('first_div');
        var char = document.getElementById('search_input').value;
        var str = '';
        var ad = ['ab', 'ar', 'af', 'fa', 'af', 'at', 'aaay', 'aad', 'gd', 'nggn'];
        var len = ad.length;
        for (var j = 0; j < len; j++) {
            var str = ad[j];
            var n = str.indexOf(char);
            if (n == 0) con.innerHTML += '<font color=orange>' + str + '</font><br><br><br><br><br>';
        }
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:53:15.403

对找到的匹配使用计数器，当循环达到上限时停止循环。

```
var matches = 0;
for (var j = 0; j < len && matches < 5; j++) {
    var str = ad[j];
    var n = str.indexOf(char);
    if (n == 0) {
        con.innerHTML += '<div class="result">' + str + '</div>';
        matches++;
    }
} 
```

并且为了一切圣洁的爱，不要使用`<font>`.

演示：http: [//jsfiddle.net/RrAWs/](http://jsfiddle.net/RrAWs/)

（那里仍然存在错误，这仅解决了限制到五个问题。）

# php - Php Ajax Json 搜索并填写输入字段

> ID：15779502
> 
> 赞同：0
> 
> 时间：2013-04-03T05:25:59.277
> 
> 标签：php, jquery, ajax, json, search

我需要执行搜索并将其动态保存在输入字段中。我是阿贾克斯的新手。

这就是我所做的。从数据库进行查询并使用 json 进行编码，如下所示

```
[{"id":"1","name":"Jack"},{"id":"2","name":"Ace"},{"id":"3","name":"Test"}] 
```

现在有一个带有名称输入字段的表单（注意：只允许来自数据库的现有名称）。输入名称时，我需要在 Json 中执行搜索并获取名称并显示在输入字段下方（谷歌搜索如何显示相关搜索字词），一旦单击该名称应该是可点击的，它应该使用该名称填充输入文本. 并更改具有相应 ID 的隐藏输入字段的值。

```
<input id="name" type="text" name="name">
<input id="id" type="hidden" name="id"> 
```

正如我之前所说，仅允许列表中的名称，如果输入的不存在名称隐藏元素不应该有值或 0。

我怎样才能完成它？并且它应该被优化（快速），因为它必须在一个巨大的数据中搜索大约 15k-20k 个名字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:01:48.553

检查我为您的要求创建的这个小提琴，我使用了自动完成方法

[http://jsfiddle.net/X85LT/](http://jsfiddle.net/X85LT/)

```
var src = [{
"label": "Jack",
    "value": "1"
}, {
    "label": "back",
        "value": "2"
}, {
    "label": "tera",
        "value": "3"
}, {
    "label": "judo",
        "value": "4"
}];

$('.name').change(function() {
 $('.value').val(0);
});

$(".name").autocomplete({
    source: src,
    select: function (event, ui) {
        event.preventDefault();
        this.value = ui.item.label;
        $('.value').val(ui.item.value);
    }
}); 
```

// html

```
<input type="text" class="name" />
<input type="text" class="value" /> 
```

# c# - 使用 csc.exe 4.0 针对不同的 .NET 平台

> ID：15779507
> 
> 赞同：0
> 
> 时间：2013-04-03T05:26:22.360
> 
> 标签：c#, c#-4.0, .net-2.0

我在我的系统上安装了 .NET 4，发现生成的 exe 使用的是 CLR 4.0。是否有`csc.exe`针对 CLR 2.0 的选项？

我目前正在使用记事本++。（SharpDevelop 有效，但我需要知道它是如何工作的）

就像我可以在Sharp开发中选择c#版本和.NET版本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:29:35.140

您可以使用`/noconfig /nostdlib`然后显式引用 .NET 2.0 程序集（`c:\Windows\Microsoft.NET\Framework\v2.0.50727`例如）。看起来`/lib`命令行选项可以通过让您指定一个目录来查找引用来使这稍微容易一些

# java - 抽象类中的 createMock 和非抽象方法

> ID：15779508
> 
> 赞同：1
> 
> 时间：2013-04-03T05:26:32.953
> 
> 标签：java, easymock

我有一个`abstract`类，我想模拟出来以进行测试：

```
public abstract class Foo {
    public abstract void bar();
    public void baz() {
      System.out.print("Hi from baz!");
    }
} 
```

如果我使用 easyMock`Foo mock = createNiceMock(Foo.class)`然后调用`mock.baz()`我会得到一个`java.lang.NullPointerException`. 如果我更改`baz()`为`final`，事情会顺利进行（我认为这与 EasyMock 无法模拟`final`方法的事实有关）但我希望能够在`baz()`不这样做的情况下调用。

有没有办法使用 EasyMock 创建一个模拟对象，允许我调用我的非`abstract`方法？

我目前使用的一种解决方法是：

```
Foo mock = new Foo() {
    @Override
    public void bar() {
        return;
    }
} 
```

但这太丑了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:59:21.270

所以我找到了我的问题的解决方案。您可以在 EasyMock 中创建部分模拟：

```
Foo mock = EasyMock.createMockBuilder(Foo.class) 
                .addMockedMethod("bar")
                .createNiceMock(); 
```

对此的一个警告是，如果类有实例变量，因为您没有使用`new`它们，它们将不会被初始化！如果有人对此方面有解决方法，那将很有用。那是为这个类创建一个部分：

```
public abstract class Foo {
    public double myInstanceVariable = 2;
    public abstract void bar();
    public void baz() {
      System.out.print("Hi from baz!");
    }
} 
```

在哪里可以打电话`mock.myInstanceVariable`和得到`2`。

# c++ - printf 和 cout 有什么区别

> ID：15779509
> 
> 赞同：3
> 
> 时间：2013-04-03T05:26:34.013
> 
> 标签：c++, c, printf, cout, post-increment

像下面这样的一些代码：

```
int x = 1;
printf("%d,%d,%d",x,x++,x);  //A  statement
cout<<x<<x++<<x<<endl; //B statement 
```

我知道执行顺序是从右到左，而为什么A语句结果是“1,1,1”而B语句结果是“112”？？？

我在调试模式下使用 vs2008：结果相同：2,1,2。带释放模式：结果不同：A：1,1,1，B：1,1,2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:32:02.010

您使用的方式会`printf`导致未定义的行为。未指定函数参数的评估顺序。它们甚至根本不需要以谨慎的单位进行评估，因为可以评估一个表达式的一部分，然后再评估另一个表达式的一部分。这意味着如果您对评估顺序有某种依赖关系，则整个表达式可能会变得未定义。

呼吁`operator <<`也是如此`cout`。`<<`不是序列点。cout 的不同子句的评估顺序是完全未指定的。并且由于您对评估具有与示例中相同类型的依赖关系`printf`，因此您也在这里调用了未定义的行为。

因此，对于这两个表达式，您可能会得到相同的结果。你可能会得到不同的结果。当您评估其中任何一个时，守护程序可能会飞出您的鼻子。你就是说不出来。

序列点和评估顺序的主题可能相当复杂。如果您想了解更多信息，我建议您看一下这个问题：

*   [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:28:51.653

使用 printf，在调用 printf 之前对所有参数进行评估 (x=1)。使用 cout，参数会按顺序进行评估和应用。（至少就您的编译器而言）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:29:31.227

浏览[这篇文章](http://www.cplusplus.com/forum/beginner/36879/)。这是一个很好的。

[本文](https://stackoverflow.com/questions/2872543/printf-vs-cout-in-c)的副本。

但是，技术上，如果我们谈论`printf()`or `cout<<`，在执行`printf`语句时，它会获取变量的最后一条语句更改的值，并且还会将更改的值影响到下一条语句，而不是当前语句。

而在`cout`语句中，最近的值是变量的值，因此，它直接影响当前的语句。

希望你能清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:32:54.680

语句 A 和 B 的结果相同。

```
 int x = 1;
        printf("%d,%d,%d",x,x++,x);  //A  statement
        //cout<<x<<x++<<x<<endl; //B statement
        return 0; 
```

**[声明一](http://ideone.com/0enpc6)**

```
 int x = 1;
    //printf("%d,%d,%d",x,x++,x);  //A  statement
    cout<<x<<","<<x++<<","<<x<<endl; //B statement
    return 0; 
```

**[声明 B](http://ideone.com/ti69fT)**

结果/行为与编译器不一致。

# java - javax.naming.NoInitialContextException - Java

> ID：15779510
> 
> 赞同：15
> 
> 时间：2013-04-03T05:26:38.093
> 
> 标签：java, jakarta-ee, exception

这是我的代码：

```
import javax.naming.InitialContext;
import javax.jms.Queue;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.jms.QueueSender;
import javax.jms.DeliveryMode;
import javax.jms.QueueSession;
import javax.jms.QueueConnection;
import javax.jms.QueueConnectionFactory;

public class Sender
{
    public static void main(String[] args) throws Exception
    {
        // get the initial context
        InitialContext ctx = new InitialContext();

        // lookup the queue object
        Queue queue = (Queue) ctx.lookup("queue/queue0");

        // lookup the queue connection factory
        QueueConnectionFactory connFactory = (QueueConnectionFactory) ctx.
           lookup("queue/connectionFactory");

        // create a queue connection
        QueueConnection queueConn = connFactory.createQueueConnection();

        // create a queue session
        QueueSession queueSession = queueConn.createQueueSession(false,Session.DUPS_OK_ACKNOWLEDGE);

        // create a queue sender
        QueueSender queueSender = queueSession.createSender(queue);
        queueSender.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

        // create a simple message to say "Hello"
        TextMessage message = queueSession.createTextMessage("Hello");

        // send the message
        queueSender.send(message);

        // print what we did
        System.out.println("sent: " + message.getText());

        // close the queue connection
        queueConn.close();
    }
} 
```

Eclipse 没有报告上述代码中的任何错误——我能够成功编译。但是，当我尝试运行它时，出现以下异常：

```
Exception in thread "main" javax.naming.NoInitialContextException: Need to specify       
class name in environment or system property, or as an applet parameter, or in an  application resource file:  java.naming.factory.initial
  at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
  at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
  at javax.naming.InitialContext.getURLOrDefaultInitCtx(Unknown Source)
  at javax.naming.InitialContext.lookup(Unknown Source)
  at Sender.main(Sender.java:21) 
```

任何人都可以帮我修复错误吗？我尝试修复它几个小时，但仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-03T05:34:15.417

我们需要指定 JNDI 的 INITIAL_CONTEXT_FACTORY、PROVIDER_URL、USERNAME、PASSWORD 等来创建`InitialContext`.

在独立应用程序中，您可以指定如下

```
Hashtable env = new Hashtable();
env.put(Context.INITIAL_CONTEXT_FACTORY, 
    "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, "ldap://ldap.wiz.com:389");
env.put(Context.SECURITY_PRINCIPAL, "joeuser");
env.put(Context.SECURITY_CREDENTIALS, "joepassword");

Context ctx = new InitialContext(env); 
```

但是，如果您在 Java EE 容器中运行代码，这些值将由容器获取并用于创建`InitialContext`如下

```
System.getProperty(Context.PROVIDER_URL); 
```

和

这些值将在启动容器时设置为 JVM 参数。因此，如果您在容器中运行代码，则以下内容将起作用

```
InitialContext ctx = new InitialContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T09:24:12.900

如果使用 EJB 客户端库：

您需要提及获取初始上下文的论点。

```
InitialContext ctx = new InitialContext(); 
```

如果不这样做，它将在项目文件夹中查找属性文件。您还可以在类文件本身中包含属性凭据或值，如下所示：

```
Properties props = new Properties();
props.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
props.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
props.put(Context.PROVIDER_URL, "jnp://localhost:1099");

InitialContext ctx = new InitialContext(props); 
```

**URL_PKG_PREFIXES：**保存环境属性名称的常量，用于指定在 URL 上下文工厂中加载时要使用的包前缀列表。

EJB 客户端库是调用远程 EJB 组件的主要库。
这个库可以通过 InitialContext 使用。为了调用 EJB 组件，该库通过 URL 上下文工厂创建 EJB 客户端上下文。唯一需要的配置是解析 java.naming.factory.url.pkgs 属性的值 org.jboss.ejb.client.naming 以实例化 InitialContext。

# selenium-ide - 如何从下拉列表中选择数据动态数据？

> ID：15779512
> 
> 赞同：0
> 
> 时间：2013-04-03T05:26:43.030
> 
> 标签：selenium-ide

我是 selenium IDE 的新手，当我在 maps.google 网站上执行一些测试时，当我在搜索框中输入数据时，它会显示与此相关的数据。例如：当我输入“印度”时，它将显示与所提供数据相关的附加数据列表，如“印度银行”“印度信息热线”等。假设我想从下拉列表中选择任何特定数据成为那个命令和目标。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:58:45.653

Try this code and let me know it work for you or not.

```
 <tr>
       <td>open</td>
       <td>https://maps.google.co.in/</td>
       <td></td>
   </tr>
   <tr>
            <td>assertTitle</td>
           <td>Google Maps</td>
            <td></td>
   </tr>
   <tr>
            <td>type</td>
            <td>id=gbqfq</td>
            <td>indian restaurant</td>
   </tr>
   <tr>
       <td>pause</td>
       <td>1000</td>
       <td></td>
   </tr>
   <tr>
    <td>storeEval</td>
        <td>javascript:prompt(&quot; Enter what you want to from dropdown&quot;)
    </td> 
        <td>dropdown</td>
   </tr>
   <tr>
   <td>type</td>
   <td>id=gbqfq</td>
   <td>${dropdown}</td>
   </tr>
   <tr>
          <td>click</td>
      <td>id=gbqfb</td>
      <td></td>
   </tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:47:10.937

```
<tr>
    <td>open</td>
    <td>https://maps.google.co.in/</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>javascript:prompt(&quot; Enter what you want to search&quot;)</td>
    <td>search</td>
</tr>
<tr>
    <td>type</td>
    <td>id=gbqfq</td>
    <td>${search}</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>javascript:prompt(&quot;Enter which you want from drop down&quot;)</td>
    <td>googlesearch</td>
</tr>
<tr>
    <td>type</td>
    <td>id=gbqfq</td>
    <td>${googlesearch}</td>
</tr>
<tr>
    <td>click</td>
    <td>id=gbqfb</td>
    <td></td>
</tr> 
```

谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:32:58.040

1) 使用 typekeys 输入“india”（它更接近键盘输入）

2) WaitForElementPresent ([your xpath][1] or [your xpath] index=1) - 包括下拉列表的第一个元素以确保它存在。请记住，Selenium 通常比您的应用程序和/或浏览器运行得更快，因此请在您刷新或加载某些内容时使用 WaitForElementPresent。

3) 选择你的元素 select [your xpath] index=1

但请确保输入的值应导致非空列表（您可能没有“印度”记录）。

====================

这是您应该使用的代码（我在我这边检查过）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://www.google.com.ua/" />
<title>New Test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>
<tr>
<td>open</td>
<td>/</td>
<td></td>
</tr>
<tr>
<td>waitForElementPresent</td>
<td>gbqfq</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>gbqfq</td>
<td>bitragunta</td>
</tr>
<tr>
<td>waitForElementPresent</td>
<td>//html/body/div5/table/tbody/tr/td/div</td>
<td>index=1</td>
</tr>
<tr>
<td>mouseOver</td>
<td>//html/body/div5/table/tbody/tr/td/div</td>
<td></td>
</tr>
<tr>
<td>mouseDown</td>
<td>//html/body/div5/table/tbody/tr/td/div</td>
<td></td>
</tr>
</tbody></table>
</body> 
```

1）请在我的初始代码中将一行从`<link rel="selenium.base" href="https://www.google.com.ua/" />`更改为`<link rel="selenium.base" href="http://maps.google.com/" />` 如果没有帮助，试试这个：

2) 尝试使用这个定位器：//div[@id='hm']/table/tbody/tr/td/div

如果不起作用，那么试试这个

3）尝试逐步执行我的脚本（使用菜单操作 - 执行此命令）。当列表显示时，使用 Firebug 或类似工具探索它以找出它的 xpath。也许谷歌针对不同的国家有不同的页面？

==================================================== =

1）关于error.[error] Element //html/body/div5/table/tbody/tr/td/div not found：这个元素只有在列表展开时才能找到（即在搜索文本框中键入内容后）

2）你问正确的方法是什么意思？当然，我不会建议任何对我来说听起来不对的事情。您可能想要更改的唯一一件事是对列表使用更简单的定位器。但试着让它先工作。

3）您无法添加哪些代码？请更具体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-16T22:10:40.390

我有同样的问题，并想出了这个解决方案：

```
storeText | Xpath (ex: //div[3]/div/select/option[4]) | variable

selectAndWait| id=(drop down)|label=${variable} 
```

由于每次页面加载时下拉列表中的选项都会更改，因此每次测试时存储选项然后调用该变量将每次从下拉列表中选择正确的选项。唯一的限制是下拉菜单中的选项不总是相同的顺序。如果您只是想始终选择第一个选项，请在 Xpath 中使用

```
.../option[1] 
```

希望这可以帮助

# v8 - V8 如何转换 v8::Persistent 到 v8::Primitive？

> ID：15779517
> 
> 赞同：1
> 
> 时间：2013-04-03T05:27:09.707
> 
> 标签：v8

我正在使用 V8 javascript 引擎并使用以下方法将一些值存储在 C++ 对象中：

```
v8::Persistent<v8::Primitive>  m_Value; 
```

我想使用保存的值来设置另一个 Primitive 并像这样返回：

```
bool 
MyClass::Convert(v8::Primitive& oValue)
{
   oValue.Clear();  //<--Is Not a value method for Primitive. How can I clear it or set it to Null or Undefined?
   oValue= m_Value;
} 
```

这第二行导致编译器错误：二进制“=”：未找到采用“v8::Persistent”类型的右侧操作数的运算符（或没有可接受的转换）

如何从 Persistent 中取回 Primitive 值？我试图取消引用 m_Value。没运气。这必须很简单......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:00:52.240

由于 V8 原语是垃圾回收的，因此您必须通过句柄访问它们。在您的代码中，`m_Value`是一个句柄，但您的方法的输出也应该是一个句柄：

```
bool
MyClass::Convert(Handle<Primitive>& oValue)
{
    oValue = Local<Primitive>::New(m_Value);
    return true;
} 
```

此外，根据您的方案，您可能希望创建两种方法，一种显式输出本地句柄，另一种输出持久句柄。或者您可以使用方法模板。

# android - Android TextView 和 ImageView 直到循环结束才更新

> ID：15779522
> 
> 赞同：0
> 
> 时间：2013-04-03T05:27:56.083
> 
> 标签：android, textview, imageview

所以我很确定我正确地使用了它们，但由于某种原因，我只得到了最后一次更新。

```
for(int i=0; i<numImages; i++)
{
    // Stuff processes here including getting a new Bitmap bmp image
    imageView.setImageBitmap(bmp);

    text.setText(text.getText()+"image "+i+" a success!\n");
    Log.d("update", text.getText()+"image "+i+" a success!\n");
} 
```

日志消息按预期显示，但我只看到序列中的最终文本更新和最终图像。我不确定我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:34:32.783

由于您正在更新 same`ImageView: imageView`和 same `TextView: text`，因此只会看到最后一个 Bitmap 和 Text。

您是否尝试将所有位图和相应的文本添加到布局中？

**执行以下操作：**

```
for(int i=0; i<numImages; i++)
{
// Stuff processes here including getting a new Bitmap bmp image
ImageView imageView = new ImageView(this);
imageView.setImageBitmap(bmp);
parent.addView(imageView);

TextView text = new TextView(this);
text.setText(text.getText()+"image "+i+" a success!\n");
parent.addView(text);
Log.d("update", text.getText()+"image "+i+" a success!\n");
} 
```

如果您想每隔几秒向 ImageView 添加一个位图：

```
private Timer timer = new Timer();
private TimerTask timerTask;
timerTask = new TimerTask() {
 public void run() {
runOnUiThread(new Runnable() {
@Override
public void run() {
         //Keep a count and change the ImageView and Text depending on that count
        }
});   
 }
};
timer.schedule(timerTask, 0, 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:34:52.210

您需要创建一个缓冲区，然后每次都将您的字符串附加到缓冲区。然后最后显示它示例

```
StringBuffer buff = new StringBuffer();

for(int i=0; i<numImages; i++)
{
    // Stuff processes here including getting a new Bitmap bmp image
    imageView.setImageBitmap(bmp);
    buff.append (text.getText()+"image "+i+" a success!\n");
}
Log.d(buff.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:39:37.677

当我想更新我的列表视图时，我遇到了这样的问题。
我的日志显示成功执行了几个 notifyDataSetChanged() 但只有最后一次调用更改了列表视图，结果我将计算放在了主线程中，这阻塞了 UI 操作。

因此，请确保您的代码在单个线程中运行，仅在主线程中执行 UI 相关操作。您可以尝试将所有代码放在一个新线程中并放入 `text.setText(text.getText()+"image "+i+" a success!\n");`runOnUiThread

# java - Web 应用程序的真实世界用户活动记录策略

> ID：15779523
> 
> 赞同：1
> 
> 时间：2013-04-03T05:28:03.257
> 
> 标签：java, multithreading, tomcat

我有一个 Web 应用程序，我的客户要求他想知道。

我提出了两个想法。
我想验证我的想法是否正确。

这些是客户的要求。

who：访问者是谁（例如 remoteAddress-IP）
when：访问者什么时候在 Web 应用程序上
做了什么什么：访问者采取了什么确切的操作，例如“按下打印按钮”
where：哪个页面，例如 URL访问者访问

我的想法 1.
只需发出一个 SQL 查询来记录访问该网站的每个人的用户活动。如果访问者单击页面链接，Web 应用程序会将用户活动写入数据库并呈现请求的页面。
我认为这会对用户体验产生不好的影响。页面渲染可能会变慢，因为它必须做额外的工作。这种方法最终会发出过多的 SQL 查询并最终成为一个坏主意吗？

我的想法 2.
为每个用户或每个用户活动（例如单击打印按钮）启动一个新线程。页面渲染以自己的速度进行，日志记录将在线程中单独完成。
我认为这可能会创建太多线程。这是一个好主意还是最终会使用太多资源？

我想知道这些是否是一个好的，现实世界的做法。如果有更好的方法，请分享。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:42:42.523

建议 1：使用和不使用数据库日志记录系统来分析您的应用程序。您可能会发现 DB 日志记录可以满足您的性能需求，而无需进行重大的架构更改或性能调整。

如果您发现您能够维持您的吞吐量要求，但偶尔会在高峰期备份，您可以将 DB 日志记录移动到单个线程中，并使用来自`java.util.concurrent`. 这将比为每个日志事件分叉一个单独的线程更有效。

我的怀疑是，如果您发现性能问题，您会发现瓶颈是数据库。但这只是一种预感——你必须分析你自己的设置以找到优势和劣势。

注意：要比较启用和不启用日志记录的性能，您可以在启动时将开/关布尔值或特定日志级别配置为最终静态变量。如果保证这些条件为假，JIT 将优化包含在`if (loggingEnabled)`or块中的任何代码。`if (logLevel > 3)`这使您可以在使用和不使用日志记录的情况下运行相同的代码，而不会在分析当前（非日志记录）方法时为日志记录代码支付性能损失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-29T13:34:21.427

出于性能原因，最好将日志处理与页面呈现分开，最好使用 JMS 来完成。

当用户执行某些操作时，您需要做的就是创建日志对象并使用消息源发送 JMS 消息（JMS 队列应该是合适的）。

在另一端（消息接收器），您需要设置一个接收消息并记录它们的消息接收器（在您的情况下到 DB）。

这种解耦可确保对用户活动的影响最小，并为使用操作提供可靠的日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:30:43.160

想法1很好。创建一个实用方法以将条目记录到数据库中。所以每次你想记录一些事件时，只需调用这个方法。不应占用过多的服务器资源，也不会显着减慢响应时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:50:20.923

您的问题描述似乎符合**生产者/消费者**模式。

您有许多线程处理用户请求，这些请求将*产生*将信息写入数据库的请求。您将有一个（或多个）线程来*处理*这些请求并将数据写入数据库。

在 Java 中有很多方法可以实现这一点。你可以：

*   每次要将一条信息记录到数据库中时启动一个新线程
*   与有限数量的线程一起使用共享`ExecutorService`，这将被重用并避免多种开销
*   使用共享`BlockingQueue`，您将在其中放置来自您的 servlet 的日志请求，并`take()`在一个循环中拥有一个（或多个）线程元素，并根据您采用的元素将数据写入数据库

在任何情况下，我都会将此逻辑封装在一个`RequestLogger`类中，例如：

```
public class RequestLogger {
  private final Thread thread;
  private final BlockingQueue<LogRequest> logRequestQueue = new LinkedBlockingQueue<>();
  public RequestLogger() {
    this.thread = new Thread(new Runnable() {
      @Override public void run() {
        try {
          while (!Thread.currentThread().isInterrupted()) {
            final LogRequest req = logRequestQueue.take();
            // ... log it to the database somehow ...
          }
        } catch (Exception e) { ... do something ... }
      }
    });
  }

  public void start() { thread.start(); }
  public void stop() { thread.interrupt(); }
  public void log(...) {
    logRequestQueue.offer(new LogRequest(...));
  }
} 
```

你实例化这个类一次，调用`.start()`，你就可以记录你想要的一切了。

如果您愿意（例如，因为您看到日志请求积累得太快），您可以更改`while(...)`循环中的逻辑以一次接收更多请求（如果可用），并使您的代码发出一次写入数据库，或写入单个事务，或类似的东西。

这实际上取决于您的特定场景，但如果您遇到性能问题，那么瓶颈将是数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-02T12:26:51.710

现代日志框架支持异步登录的思想。[例如，LogBack](https://logback.qos.ch/manual/appenders.html#AsyncAppender)中有一个日志附加器，它支持异步日志记录，响应时间非常好。

# r - 将矩阵加入数组

> ID：15779527
> 
> 赞同：0
> 
> 时间：2013-04-03T05:28:40.020
> 
> 标签：r, matrix

我有几个矩阵，我想将它们加入一个数组，如下所示：

```
> mat1
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

> mat2
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

> mat3
     [,1] [,2] [,3]
[1,]   13   15   17
[2,]   14   16   18 
```

我试过这个：

```
dime=dim(mat1)
Array=array(mat1, mat2,mat3,dim(dime)) 
```

出现以下错误：

```
Error in array(mat1, mat2, mat3, dim(dime)) : 
  unused argument(s) (dim(dime)) 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:38:31.510

## 更新：

从评论看来，所需要的只是`cbind`三个矩阵：

```
> cbind(mat1, mat2, mat3)
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
[1,]    1    3    5    1    3    5    1    3    5
[2,]    2    4    6    2    4    6    2    4    6 
```

我想如果你有很多这些，将它们安排在一个列表中然后一起使用它们是有意义`do.call`的`cbind`：

```
mlist <- list(mat1, mat2, mat3) ## simulate matrices stored as a list

## cbind them via a `do.call` call
do.call(cbind, mlist) 
```

产生

```
> do.call(cbind, mlist)
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
[1,]    1    3    5    1    3    5    1    3    5
[2,]    2    4    6    2    4    6    2    4    6 
```

## 原来的

您希望如何在数组中排列矩阵并不是很清楚。如果您的意思是像一堆纸一样堆叠矩阵，每页纸都是一个矩阵，那么我们可以简单地将矩阵连接成一个向量，`c`然后`array`用适当的`dim`参数将其传递给。例如

```
> mat1 <- mat2 <- mat3 <- matrix(1:6, ncol = 3)
> array(c(mat1, mat2, mat3), dim = c(2,3,3))
, , 1

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

, , 2

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

, , 3

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6 
```

# java - Java swing 文件选择器日期过滤器或文件对话框日期过滤器

> ID：15779534
> 
> 赞同：0
> 
> 时间：2013-04-03T05:29:07.950
> 
> 标签：java, swing, filedialog, filechooser

给出在文件选择器或文件对话框中获取当前日期或请求日期文件的示例代码？我需要在文件对话框中过滤带有日期的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:47:06.940

首先，我不确定是否存在使用日期的现有文件过滤器，所以对我来说最好和快速的解决方案是实现我自己的过滤器：

```
public class DateFileFilter extends FileFilter  
{    
     public boolean accept(File file)  
     {   
          GregorianCalendar date = new GregorianCalendar();//I get the today value  

          GregorianCalendar fileDate = new GregorianCalendar();  
          fileDate.setTimeInMillis(file.lastModified());//Here I get date info of the file 

          //Compare the current month and year  
          //with the month and yearthe file was  
          //last modified  
          return (((date.get(GregorianCalendar.MONTH) ==  
                fileDate.get(GregorianCalendar.MONTH)) &&  
               (date.get(GregorianCalendar.YEAR)  ==  
                fileDate.get(GregorianCalendar.YEAR))) ||  
               file.isDirectory());  
    }   

    public String getDescription()  
    {  
        return "This is my filter for dates (:";  
    }  
} 
```

然后您可以将过滤器添加到 JFileChooser：

```
JFileChooser jf = new JFileChooser();
jf.setFileFilter(/*HERE MY DATE FILTER*/); 
```

对于文件对话框，过程应该类似：

```
DateFileFilter filter = new DateFileFilter();
FileDialog dialog = new FileDialog(parent, "Choose File");   

        dialog.setFilenameFilter(filter);  

        dialog.show();  

        String selectedFile = dialog.getFile(); 
```

但我认为您也可以实现“过滤器”接口而不是“扩展”。

希望它有所帮助，最好的问候（：

# c++ - 将两个列表混在一起，在第二个列表中不重复

> ID：15779537
> 
> 赞同：2
> 
> 时间：2013-04-03T05:29:27.467
> 
> 标签：c++, algorithm, c++11

我有 2 个字符串向量（一个大约是另一个的 1/3）。我正在尝试实现一种算法，将两个向量随机混洗在一起。在结果向量中，先前在向量 A 中的项目可以相互跟随，但在向量 B 中的项目不能。

例如，如果向量 A 中的每个元素都是“FOO”，向量 B 中的每个元素都是“BAR”，那么结果向量可能是 {"FOO","FOO","BAR","FOO","BAR", "FOO","FOO","BAR"}

如您所见，“FOO”可能会重复，但“BAR”不能重复

到目前为止，这大致是我所拥有的：

```
#include <string>
#include <chrono>
#include <algorithm>
#include <random>
#include <vector>

std::vector<std::string> a(1000, "FOO");
std::vector<std::string> b(300, "BAR");
std::vector<std::string> result;

bool resultIsValid();

void mergeVectors()
{
    unsigned seed = std::chrono::system_clock::now().time_since_epoch().count();
    std::mt19937 generator(seed);

    result = a;
    result.insert(result.end(), b.begin(), b.end());
    while (!resultIsValid())
    {
        std::shuffle(a.begin(), a.end(), generator);
    }
}

bool resultIsValid()
{
    for(int i=0; i<result.size()-2; ++i)
        if (result[i] == "BAR" && result[i+1] == "BAR")
            return false;
    return true;
} 
```

这不是实际的代码，但这应该给出一个想法。当我运行这个程序时，程序进入无限循环，因为字符串的实际数量要高得多（在 10000 范围内）并且它永远不会获得有效的向量。总是有至少一个“BAR”按顺序重复。任何人都可以提出更好的替代方案，然后继续重新检查创建的向量中是否存在“BAR”的重复项？我是否让这变得比它必须的更复杂？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:28:53.537

结果列表由`"BAR","FOO"`和`"FOO"`元素组成。例如

```
{"FOO","FOO","BAR","FOO","BAR","FOO","FOO","BAR","FOO"} 
```

可以拆分为

```
"FOO" | "FOO" | "BAR","FOO" | "BAR","FOO" | "FOO" | "BAR","FOO" 
```

可以压缩到

```
{0, 0, 1, 1, 0, 1} 
```

其中 0 表示单个元素，1 表示从`"BAR"`到的过渡`"FOO"`。

`0`s 和s的数量`1`是不变的，因此可以生成一个包含这些的向量并将其打乱。

唯一的问题是在结尾处，其中单个`"BAR"`也是有效的（如果您将`"BAR","FOO"`其视为原始元素，则会在开头出现同样的问题）。

`"FOO"`如果包含的向量增加 1 个虚拟元素（哨兵），则可以解决此问题。结果列表总是以元素结尾，`"FOO"`但实际上是随机的。但是我们可以安全地删除最后一个元素，因为这是我们的虚拟对象。

实现该算法的简单代码（没有在迭代器和分配器上进行模板化）可能如下所示：

```
std::vector<std::string> mergeVectors(std::vector<std::string> const& canvas,
                                      std::vector<std::string> const& sprinkle)
{
  assert (canvas.size() + 1>= sprinkle.size()); // otherwise impossible

  std::vector<int> transitions; // 1 for [sprinkle, canvas]
                                // 0 for single [canvas]

  // sprinkle.size() times [canvas, sprinkle]
  transitions.insert(transitions.end(), sprinkle.size(), 1);
  // rest is [canvas].
  transitions.insert(transitions.end(), canvas.size() - sprinkle.size() + 1, 0);

  // There is a problem with the last element since this always is from canvas
  // as well.  So we set the last canvas to a sentinel element which is always removed.
  // This way, we can ensure that the result is truly randomly distributed.

  std::mt19937 generator(std::chrono::system_clock::now().time_since_epoch().count());
  std::shuffle(transitions.begin(), transitions.end(), generator);

  bool last_is_sprinkle = transitions.back(); transitions.pop_back();

  std::vector<std::string> result;
  auto canvas_it   = canvas.begin();
  auto sprinkle_it = sprinkle.begin();

  for (auto t : transitions) {
    if (t) result.push_back(*sprinkle_it++);
    result.push_back(*canvas_it++);
  }
  if (last_is_sprinkle)
    result.push_back(*sprinkle_it);
  return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:58:56.370

我们可以根据从 A 和 B 中分配的剩余元素数量计算结果向量中的下一个元素应该来自 A 或 B 的概率，并根据该概率从 A 或 B 中随机选择下一个元素.

如果选择的最后一个元素来自列表 B，则从列表 A 中选择下一个元素的概率始终为 100%（这会阻止 B 中的连续元素）。

如果 A 中剩余的元素数等于 B 中剩余的元素数，如果添加到结果列表中的最后一个元素来自 A，那么从 B 中获取下一个元素的概率是 100%。

`(A.length() - B.length())/A.length()`否则，从 A 中选择元素的概率应该等于 我们可以通过根据这个概率测试一个介于 0 和 1 之间的随机生成的值来确定元素应该来自列表 A 还是列表 B。

这应该保证 As 和 B 被均匀地洗牌，可以通过多次运行程序并比较结果向量的每一半中的 B 数量来测试这一点。

（编辑）

我认为在 Python 中测试这个算法会更快，所以这是我的 Python 实现：

```
from random import random

def intersperse(a,b):
    la = len(a)
    lb = len(b)
    ia = 0
    ib = 0
    bWasLast = False
    res = []
    while (ia < la) or (ib < lb):
        if bWasLast:
            res.append(a[ia])
            ia += 1
            bWasLast = False
        elif ((lb - ib) > (la - ia)) and not bWasLast:
            res.append(b[ib])
            ib += 1
            bWasLast = True
        else:
            laRemaining = la - ia
            lbRemaining = lb - ib
            probA = (laRemaining - lbRemaining)/laRemaining
            if random() < probA:
                res.append(a[ia])
                ia += 1
                bWasLast = False
            else:
                res.append(b[ib])
                ib += 1
                bWasLast = True
    return res 
```

测试代码如下：

```
A = 'a'*10000
B = 'b'*3000

sumBLeft = 0
sumBRight = 0

for n in range(100):
    r = intersperse(A,B)
    sumBLeft += sum([1 for x in r[:len(r)//2] if x == 'b'])
    sumBRight += sum([1 for x in r[len(r)//2:] if x == 'b'])

print (sumBLeft/sumBRight) 
```

该程序的输出显示，在我的测试运行中，结果左侧的“b”数量仅比结果右侧的“b”数量多 0.08%，证实了“b”的分布通过结果向量是偶数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:19:13.310

据我从你的代码中可以看出，你正在为好运而洗牌，直到你得到的组合是有效的。我的方法如下：

是`foo`带有“FOO”项目`bar`的向量和带有“BAR”项目的向量，并且是`F`和`B`它们各自的大小。
任何条形项之前都必须有一个“FOO”项，除非“BAR”项是结果序列中的第一项。因此，如果我们将“BAR”和它们前面的“FOO”画在一起，我们会得到`B`“FOOBAR”序列（或者`B-1`，如果我们以“BAR”开头）和`F-B`（或`F-(B-1)`）介于两者之间的“FOO”。结果序列以“BAR”项开头的概率是`B/(F+1)`。

我首先为“BAR”和“FOO”项目的混合制作一个模式向量，然后将真实结果向量混合在一起。该模式将由“FOOBAR”和“FOO”项组成，因为“BAR”项必须以“FOO”开头，除非结果序列以“BAR”开头

伪代码：

```
bool startsWithBar = B < (random * (F+1));
//if the sequence starts with a BAR, there are B-1 FOOBAR items
int nFOOBAR = B - (startsWithBar ? 1 : 0); 
int nFOO = F - nFOOBAR;

vector<char> pattern(nFOOBAR, 'm'); //m for mix - FOOBAR = FOO followed by a BAR
pattern.insert(pattern.end(), nFOO, 'f');

shuffle(pattern);
shuffle(foo);
shuffle(bar);

vector<string> result;
result.reserve(F+B);

auto itBar = begin(bar);
auto itFoo = begin(foo);

//fill the result according to the pattern
if (startsWithBar)
  result.push_back(*itBar++);

for (char patt : pattern)
{
  switch (patt)
  {
    case 'f': //"FOO"
      result.push_back(*itFoo++);
      break;
    case 'm': //"FOOBAR"
      result.push_back(*itFoo++);
      result.push_back(*itBar++);
      break;
  }
} 
```

例如`{"FOO","FOO","BAR","FOO","BAR","FOO","FOO","BAR"}`，模式将是`{'f', 'm', 'm', 'f', 'm'}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:08:11.867

如果您的第二个向量`v2`短于`v1`您必须将每个元素复制`v2`到输出向量`vout`中并每次附加一个或多个元素`v1`。一种解决方案是，枚举所有可能的索引`v1`并随机擦除它们，直到只剩下与 中的元素一样多的索引`v2`。因此，两个相邻索引之间的差异是您在 的元素之后`v1`插入的元素数量。例如：`vout``v2`

```
 using size_type = std::vector<std::string>::size_type;

    std::vector<size_type> vid(v1.size());
    std::iota(begin(vid), end(vid), 0);
    std::random_shuffle(begin(vid), end(vid));
    vid.erase(std::next(begin(vid), v2.size()), end(vid));
    std::sort(begin(vid), end(vid));

    size_type id_last = 0;
    for(size_type i = 0; i < vid.size(); ++i) {
        vout.insert(end(vout), std::next(begin(v1), id_last),
                                                 std::next(begin(v1), vid[i]));
        vout.push_back(v2[i]);
        id_last = vid[i];
    }
    vout.insert(end(vout), std::next(begin(v1), vid.back()), end(v1)); 
```

这可能不是最快的方法，但它应该概述其背后的想法。我相信整个索引管理也可以使用一些迭代器适配器来重写，比如[boost](http://www.boost.org/doc/libs/1_53_0/libs/iterator/doc/index.html)。另外，如果合并后不需要原始字符串向量，可以移动字符串而不是复制它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:26:45.957

一个想法是这样做：

*   洗牌A。
*   将生成的向量 C 初始化为混洗后的 B。此时 C 中的元素是`|B|`，并且您知道您必须至少将`|B|-1`A 中的元素放在它们之间。
*   从打乱后的 A 向量中弹出元素，将它们插入到 C 内的适当位置，以避免在 C 内重复 B 元素。
*   使用 A 中的剩余元素在随机位置完成`|A|-(|B|-1)`对 C 向量的插入。

假设你有：

```
A = {FOO1, FOO2, FOO3, FOO4, FOO5}
B = {BAR1, BAR2, BAR3} 
```

第 1 步和第 2 步：

```
A = {FOO4, FOO3, FOO1, FOO5, FOO2}
C = {BAR3, BAR1, BAR2} 
```

第 3 步：

```
A = {FOO1, FOO5, FOO2}
C = {BAR3, FOO4, BAR1, FOO3, BAR2} 
```

第4步：

```
C = {FOO1, FOO5, BAR3, FOO4, BAR1, FOO3, FOO2, BAR2} 
```

# java - 如何在列表视图项目上向左/向右滑动

> ID：15779546
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:29:53.187
> 
> 标签：java, android

如何创建类似的列表视图![在此处输入图像描述](https://i.stack.imgur.com/4tZS7.jpg)

向左或向右滑动通话时的项目，以及分别用动画执行的短信动作？

请如果你能帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:59:11.643

[Android Custom Views](http://androidcustomviews.com/)是一个很好的开源自定义视图库。

有**[自定义滑动视图](http://androidcustomviews.com/android-swipelistview/)**示例。

![在此处输入图像描述](https://i.stack.imgur.com/IhdtQ.png)

GitHub

*   [https://github.com/47deg/android-swipelistview](https://github.com/47deg/android-swipelistview)

# java - 音频：java JFRAME中的背景音乐

> ID：15779554
> 
> 赞同：0
> 
> 时间：2013-04-03T05:30:33.707
> 
> 标签：java, file, audio, filestream

我的代码有什么问题？它有关于 SUN API 的警告。它说，它可能会在未来的版本中删除。

```
import java.io.*;
import java.net.*; 

 import sun.audio.AudioData;
 import sun.audio.AudioPlayer;
 import sun.audio.AudioStream;
 import sun.audio.ContinuousAudioDataStream;

AudioPlayer myBackgroundPlayer = AudioPlayer.player;
ContinuousAudioDataStream myLoop = null;
            //use a try block in case the file doesn't exist.
          try {

              AudioStream myBackgroundMusic = new AudioStream(new FileInputStream("Audio/loop2.wav"));
              AudioData myData = myBackgroundMusic.getData();
              myLoop = new ContinuousAudioDataStream(myData);
              }
              catch(Exception error) {JOptionPane.showMessageDialog(null, "Invalid file!");}

              //play background music.
              myBackgroundPlayer.start(myLoop); 
```

当我运行此代码时它说的无效文件..

# assembly - 串口，RTS CTS，组件

> ID：15779555
> 
> 赞同：0
> 
> 时间：2013-04-03T05:30:34.610
> 
> 标签：assembly, serial-port, chat, interruption

我正在使用程序集进行聊天，我正在使用高级虚拟 COM 端口在我的电脑上创建一个 COM2 和一个 COM3 并将它们连接在一起。我正在测试一个发送和接收程序，它们工作正常，但只有一次。

我的意思是，首先，在我发送第一个字符字符串之前，高级虚拟 COM 端口告诉我两个 COM 都有这行：DTR、RTS、DSR、CTS 和 DCD。但是在我发送第一个字符串并显示在接收程序中之后，接收程序 COM 关闭 RTS，发送字符串的程序关闭 CTS。

之后我可以继续写，但什么都没有发送或接收，那么，我该怎么做才能让 COM 再次工作？为了让他们知道传输正确并且他们可以回到以前的状态，我使用的是 INT14h。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:31:31.070

我只是重新发布对我的问题的 alexey frunze 评论，因为那是答案，但他没有将其发布为一个。

当您准备好接收更多数据时，您应该禁用（忽略）此 CTS/RTS 信号或设置 CTS（或者是 RTS？）。就是这样

# android-activity - 如何在android的一半屏幕中打开一个活动？

> ID：15779559
> 
> 赞同：3
> 
> 时间：2013-04-03T05:30:47.393
> 
> 标签：android-activity

我想在屏幕的一半中打开一个活动，以便可以看到一半的后台活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:58:20.950

**Approach-1**如果你想在另一个活动的顶部显示一个活动，然后在其布局中将顶部活动设置为透明或半透明的主题，它会给你类似的外观和感觉。但背景元素将不可点击。

**Approach-2**您可以使用多个片段来获得相似的外观，好处是背景元素也可以点击

# android - 在 org.json.JSON.typeMismatch(JSON.java:107)

> ID：15779560
> 
> 赞同：1
> 
> 时间：2013-04-03T05:30:50.240
> 
> 标签：android, json

**下面是我的代码：**

```
public class JSON extends Activity {
    TextView json;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String twitterTimeline = getTwitterTimeline();
        try {
            String tweets = "";
            JSONObject jObj = new JSONObject(twitterTimeline);
            JSONArray jsonArray = jObj.getJSONArray("results");
            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject jsonObject = jsonArray.getJSONObject(i);
                int j = i+1;
                tweets +="*** " + j + " ***\n";
                tweets += "Date:" + jsonObject.getString("trends") + "\n";
                tweets += "Post:" + jsonObject.getString("name") + "\n\n";
            }
            json= (TextView)findViewById(R.id.json);
            json.setText(tweets);
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
    public String getTwitterTimeline() {
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("https://api.twitter.com/1/trends/23424848.json");
        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
            } else {
                //Couldn't obtain the data
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return builder.toString();
    }
} 
```

**我收到错误消息：**

> cookie 标头无效：“set-cookie：guest_id=v1%3A136496691433468960；Domain=.twitter.com；Path=/；Expires=Fri，2015 年 4 月 3 日 05:28:34 UTC”。无法解析过期属性：Fri, 03-Apr-2015 05:28:34 UTC org.json.JSONException: Value [{"as_of":"2013-04-03T05:28:34Z","trends":[{ "事件":null,"query":"%22Finding+Dory%22","url":"http://twitter.com/search?q=%22Finding+Dory%22","promoted_content":null, "name":"Finding Dory"},{"events":null,"query":"%23MentionADislike","url":"http://twitter.com/search?q=%23MentionADislike","promoted_content" :null,"name":"#MentionADislike"},{"events":null,"query":"%23PSG","url"

谁能指导我哪里做错了？

这个 JSON 格式如何解析和显示

```
[
{
"trends":[
{
"name":"#PappuCII",
"url":"http:\/\/twitter.com\/search?q=%23PappuCII",
"promoted_content":null,
"query":"%23PappuCII",
"events":null
},
{
"name":"#ReplaceMovieNamesWithKamina",
"url":"http:\/\/twitter.com\/search?q=%23ReplaceMovieNamesWithKamina",
"promoted_content":null,
"query":"%23ReplaceMovieNamesWithKamina",
"events":null
}, 
```

请帮帮我，我现在很困惑..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:33:28.877

如 logcat 结果：

> JSONArray 无法转换为 JSONObject

因为您`JSONArray`在当前 json 字符串中作为根元素而不是`JSONObject`. 因此，您需要先将当前字符串转换为 JSONArray，然后从中提取所有 JSONObject。将您的代码更改为：

```
JSONArray jArray = new JSONArray (twitterTimeline); //<convert string to JSONArray 
for (int i = 0; i < jArray .length(); i++) {
  // get all JSONObject from jArray  here..
 } 
```

您当前的 json 格式是：

```
[    //<<<< this is JSONArray 
  {  //<<<< this is JSONObject  inside JSONArray 

  },
 .....
] 
```

# wcf - 如何按约定设置基于 Azure 内容的路由？

> ID：15779561
> 
> 赞同：1
> 
> 时间：2013-04-03T05:30:59.693
> 
> 标签：wcf, azure, nservicebus, servicebus, azureservicebus

无论如何，天蓝色是否可以根据消息类型将消息路由到适当的处理程序/操作/订阅者？

在 NServiceBus 中，当一个事件被发布时，只有能够处理该事件的订阅者才会被调用。Azure 服务总线如何实现这一点，因为 WCF 是一个 RPC 框架，并且不是特别“面向消息”的，它往往具有

1.  [单子](http://en.wikipedia.org/wiki/Monadic)处理程序，例如。NServiceBus、ServiceStack 和
2.  POCO 消息，而不是本机消息。

话虽这么说，我应该发送 Type 消息，`MyMessage`AzureServiceBus 怎么知道只将此消息传递给`MyMessageHandler`WCF 服务？我可以配置消息属性和路由，但这是一个真正的 PITA，因为像 NServiceBus 中的简单约定对于 99% 的用例都非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:27:42.337

首先，我当然同意您的观点，即基于底层类型的路由应该是 azure SB 的开箱即用功能。

NSB 允许基于类型的路由，方法是在消息上公开一个名为 EnclosedMessageTypes 的标头属性。

因为 ASB 依赖 BrokeredMessage 类型来启用消息路由，默认情况下不会将包含的类型公开为属性，所以我不知道在发送消息之前不自己提升属性的情况下，没有办法启用这种路由：

```
myMessage.Properties.Add("type", typeof(myUnderlyingType)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:18:26.693

为此，您可以使用 Service Bus 中的[CorrelationFilter](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.correlationfilter.aspx)。默认情况下，如果您只指定一个字符串，则它与消息上的[CorrelationId](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.brokeredmessage.correlationid.aspx)属性匹配。[或者，您可以为任何其他系统属性（如ContentType](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.correlationfilter.contenttype.aspx)）指定值，或使用您自己的用户[属性](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.correlationfilter.properties.aspx)进行过滤。

*这是我写*的一篇博客文章，描述了您可以使用的不同类型的模式：http: [//abhishekrlal.com/2012/02/07/enterprise-integration-patterns-with-service-bus-part-1/](http://abhishekrlal.com/2012/02/07/enterprise-integration-patterns-with-service-bus-part-1/)

以下是展示使用不同过滤器的示例：http: [//code.msdn.microsoft.com/windowsazure/Brokered-Messaging-6b0d2749](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-6b0d2749)

```
// Create a topic and 3 subscriptions. 
        TopicDescription topicDescription = namespaceManager.CreateTopic(Program.TopicName); 
        Console.WriteLine("Topic created."); 

        // Create a subscription for all messages sent to topic. 
        namespaceManager.CreateSubscription(topicDescription.Path, SubsNameAllMessages, new TrueFilter()); 
        Console.WriteLine("Subscription {0} added with filter definition set to TrueFilter.", Program.SubsNameAllMessages); 

        // Create a subscription that'll receive all orders which have color "blue" and quantity 10\. 
        namespaceManager.CreateSubscription(topicDescription.Path, SubsNameColorBlueSize10Orders, new SqlFilter("color = 'blue' AND quantity = 10")); 
        Console.WriteLine("Subscription {0} added with filter definition \"color = 'blue' AND quantity = 10\".", Program.SubsNameColorBlueSize10Orders); 

        // Create a subscription that'll receive all high priority orders. 
        namespaceManager.CreateSubscription(topicDescription.Path, SubsNameHighPriorityOrders, new CorrelationFilter("high")); 
        Console.WriteLine("Subscription {0} added with correlation filter definition \"high\".", Program.SubsNameHighPriorityOrders); 
```

# telerik - 如何从 RadComboBox 获取最后选择的值

> ID：15779562
> 
> 赞同：0
> 
> 时间：2013-04-03T05:31:15.130
> 
> 标签：telerik, radcombobox

无论如何要从 C# 中的 RadCombobox 获取最后选择的值。请指教

我做了这样的事情

```
protected void cboTest_SelectedIndexChanged(object o, Telerik.Web.UI.RadComboBoxSelectedIndexChangedEventArgs e)
{
Session["CurrentItem"] = e.value;
}

public int GetLastSelectedItem
{
    set { Session["CurrentItem"] = value;}
}

then i need to access the session
int productId = 0;
productId = //need to assigned previous selected radcombo value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:01:10.833

你可以试试下面的代码

```
string old_value = "";
string new_value = "";
protected void cboTest_SelectedIndexChanged(object o, Telerik.Web.UI.RadComboBoxSelectedIndexChangedEventArgs e)
{
    old_value = e.OldValue;
    new_value = e.Value;
    //do whatever you want with these values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:17:18.933

Ummar 是对的，现在如果你想通过应用你的代码来做到这一点，试试这个：

我建议使用 ViewState，Session 变量总是很难处理，如果你只需要这种形式，它也没有意义。

像这样的东西：

```
string LastSelectedValue
{
  get { return ViewState["LastSelectedValue"] as string; }
  set { ViewState["LastSelectedValue"] = value; }
}

protected void cboTest_SelectedIndexChanged(object o, Telerik.Web.UI.RadComboBoxSelectedIndexChangedEventArgs e)
{
    if(string.IsNullOrEmpty(this.LastSelectedValue))
    {
        //This is the first time the user changes the index
    }
    else
    {
        //The last selected Value is stored in this.LastSelectedValue
    }

    // last line of your code must be this one
    this.LastSelectedValue = this.cboTest.SelectedValue;
} 
```

# c# - 在 WPF 中调整图像大小

> ID：15779564
> 
> 赞同：7
> 
> 时间：2013-04-03T05:31:21.820
> 
> 标签：c#, wpf, image, image-resizing

我有一张图片，我想重新调整它的大小，需要保存在我的临时文件夹中。

我尝试过的如下：

```
UIElement uie = CanvasHost.Child;
int width = 800;
int height = (int)((width / (double)((FrameworkElement)uie).Width) * (int)((FrameworkElement)uie).Height);          
RenderTargetBitmap rtb = new RenderTargetBitmap(width, height, 96, 96, PixelFormats.Pbgra32);
rtb.Render(uie);

string dir = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) + @"\temp\";
if (!Directory.Exists(dir))
      Directory.CreateDirectory(dir);

long size = 0;

string filePath = dir + DateTime.Now.Ticks.ToString() + (isPng ? ".png" : ".jpg");
BitmapEncoder enc = null;

using (FileStream fs = File.Create(filePath))
{
    if (isPng)
        enc = new PngBitmapEncoder();
    else
        enc = new JpegBitmapEncoder();

    enc.Frames.Add(BitmapFrame.Create(rtb));
    enc.Save(fs);

    size = fs.Length;
} 
```

但是当我像这样创建图像时，它会将图像的一部分保存在临时文件夹中。（如上图所示）

![在此处输入图像描述](https://i.stack.imgur.com/hIfS2.jpg)

我怎样才能调整完整图像的大小？我在这里错过了什么？

**编辑：** 正如 Erti-Chris Eelmaa 提到的上述答案中所述，我已将代码更改如下。它有效......

```
UIElement uie = CanvasHost.Child;
int width = DataCache.Instance.CurrentProject.MaxPhotoEdgeSize;
int height = (int)((width / (double)((FrameworkElement)uie).Width) * (int)((FrameworkElement)uie).Height);

RenderTargetBitmap rtb = new RenderTargetBitmap((int)((FrameworkElement)uie).Width, (int)((FrameworkElement)uie).Height, 96, 96, PixelFormats.Pbgra32);
rtb.Render(uie);

ImageSource im = (ImageSource)rtb.Clone();
BitmapFrame bp = CreateResizedImage(im, width, height, 1); //method suggested by Erti-Chris Eelmaa
string dir = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) + @"\temp\";

if (!Directory.Exists(dir))
    Directory.CreateDirectory(dir);

long size = 0;

string filePath = dir + DateTime.Now.Ticks.ToString() + (isPng ? ".png" : ".jpg");
BitmapEncoder enc = null;

using (FileStream fs = File.Create(filePath))
{
    if (isPng)
         enc = new PngBitmapEncoder();
    else
         enc = new JpegBitmapEncoder();

    enc.Frames.Add(BitmapFrame.Create(bp));
    enc.Save(fs);

    size = fs.Length;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-06-25T21:49:28.240

至于调整大小本身，使用 WPF`TransformedBitmap`似乎更容易一些：

```
var bitmap = new TransformedBitmap(bitmapSource, 
    new ScaleTransform(
        newWidth / bitmapSource.PixelWidth, 
        newHeight / bitmapSource.PixelHeight)); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-03T06:02:15.460

只需使用此方法获取 BitmapFrame，然后使用 PngBitmapEncoder 将其保存到 HDD 即可。

```
private static BitmapFrame CreateResizedImage(ImageSource source, int width, int height, int margin)
{
    var rect = new Rect(margin, margin, width - margin * 2, height - margin * 2);

    var group = new DrawingGroup();
    RenderOptions.SetBitmapScalingMode(group, BitmapScalingMode.HighQuality);
    group.Children.Add(new ImageDrawing(source, rect));

    var drawingVisual = new DrawingVisual();
    using (var drawingContext = drawingVisual.RenderOpen())
        drawingContext.DrawDrawing(group);

    var resizedImage = new RenderTargetBitmap(
        width, height,         // Resized dimensions
        96, 96,                // Default DPI values
        PixelFormats.Default); // Default pixel format
    resizedImage.Render(drawingVisual);

    return BitmapFrame.Create(resizedImage);
} 
```

# asp.net-mvc - 在 MVC 应用程序中的控制器之间共享 Unity 容器的最佳方式是什么？

> ID：15779567
> 
> 赞同：1
> 
> 时间：2013-04-03T05:31:27.770
> 
> 标签：asp.net-mvc, inversion-of-control, unity-container

我在 MVC 应用程序中为 IoC 使用 Unity 框架，并使用 LoadConfiguration 方法（从配置文件中读取接口/类型映射）填充 UnityContainer。

在我的应用程序中的不同控制器之间共享此容器的最佳方法是什么？

如果我在应用程序（Global.asax）上使用公共属性，我应该担心线程同步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:48:45.670

我同意 Zabavsky 关于注入服务的观点。这是我所做的：

我将我的 MVC 应用程序分成几个不同的项目。

*   AppName.Configuration：处理应用程序的任何配置（即拉入 web.config/app 设置等）
*   AppName.Data：这是执行所有数据库访问的数据层（无业务逻辑）。DBML/EDMX 在这里，我的存储库类也在这里。
*   AppName.Models：这是我为 MVC 定义的所有 ViewModel 以及整个应用程序所需的其他模型对象的地方。
*   AppName.Services：这是我的业务层，一切都必须经过这里才能到达数据层或表示层。ViewModels 是从数据库对象构建的，数据验证发生在这里，等等。
*   AppName.Web：这将是 MVC 应用程序。
*   AppName.Data.Test：数据应用的单元测试
*   AppName.Services.Test：服务的单元测试
*   AppName.Web.Test：MVC 控制器的单元测试
*   AppName.Web.UI.Test：Web 用户界面的单元测试（使用 WATIN）

我还有一组打包到 NuGet 包中的类，如果需要，我可以将它们添加到我的应用程序中，即（对于本示例）：

*   CompanyName.Data：数据层逻辑的通用库
*   CompanyName.MVC：用于 ASP.NET MVC 集成的通用库
*   CompanyName.Utilities：杂项实用程序的公共库

我的控制器除了从服务层获取视图模型以发送到视图，然后在从视图发布时接收数据并将其发送到服务层进行验证并保存回存储库之外什么都不做。

这是一个基本示例：

这是将在此示例中使用的视图模型：

```
public class CreateFocusViewModel
{
    public int CareerPlanningFormID { get; set; }

    public int PerformanceYear { get; set; }

    public IList<FocusModel> Focuses { get; set; }

    public string ResultsMeasuresFocusComments { get; set; }

    public byte MaximumFocusesAllowed { get; set; }
}

public class FocusModel
{
    public int FocusID { get; set; }

    public string FocusText { get; set; }

    public bool IsPendingDeletion { get; set; }
} 
```

带有 GET 和 POST 操作方法的示例控制器：

```
public class CPFController : Controller
{
    private readonly ICareerPlanningFormService careerPlanningFormService;

    public CPFController(ICareerPlanningFormService careerPlanningFormService)
    {
        this.careerPlanningFormService = careerPlanningFormService;
    }

    [HttpGet]
    public ViewResult CreateFocus(int careerPlanningFormID)
    {
        var model = this.careerPlanningFormService.BuildCreateFocusViewModel(careerPlanningFormID);
        return this.View(model);
    }

    [HttpPost]
    public ActionResult CreateFocus(int careerPlanningFormID, string button)
    {
        var model = this.careerPlanningFormService.BuildCreateFocusViewModel(careerPlanningFormID);
        this.TryUpdateModel(model);

        switch (button)
        {
            case ButtonSubmitValues.Next:
            case ButtonSubmitValues.Save:
            case ButtonSubmitValues.SaveAndClose:
                {
                    if (this.ModelState.IsValid)
                    {
                        try
                        {
                            this.careerPlanningFormService.SaveFocusData(model);
                        }
                        catch (ModelStateException<CreateFocusViewModel> mse)
                        {
                            mse.ApplyTo(this.ModelState);
                        }
                    }

                    if (!this.ModelState.IsValid)
                    {
                        this.ShowErrorMessage(Resources.ErrorMsg_WEB_ValidationSummaryTitle);
                        return this.View(model);
                    }

                    break;
                }

            default:
                throw new InvalidOperationException(string.Format(Resources.ErrorMsg_WEB_InvalidButton, button));
        }

        switch (button)
        {
            case ButtonSubmitValues.Next:
                return this.RedirectToActionFor<CPFController>(c => c.SelectCompetencies(model.CareerPlanningFormID));

            case ButtonSubmitValues.Save:
                this.ShowSuccessMessage(Resources.Msg_WEB_NotifyBarSuccessGeneral);
                return this.RedirectToActionFor<CPFController>(c => c.CreateFocus(model.CareerPlanningFormID));

            case ButtonSubmitValues.SaveAndClose:
            default:
                return this.RedirectToActionFor<UtilityController>(c => c.CloseWindow());
        }
    }
} 
```

构建 ViewModel 并验证/保存数据的服务层：

```
public class CareerPlanningFormService : ICareerPlanningFormService
{
    private readonly IAppNameRepository repository;
    private readonly IPrincipal currentUser;

    public CareerPlanningFormService(IAppNameRepository repository, IPrincipal currentUser)
    {
        this.repository = repository;
        this.currentUser = currentUser;
    }

    public CreateFocusViewModel BuildCreateFocusViewModel(int careerPlanningFormID)
    {
        var cpf = this.repository.GetCareerPlanningFormByID(careerPlanningFormID);

        // create the model using cpf
        var model = new CreateFocusViewModel
        {
            CareerPlanningFormID = cpf.CareerPlanningFormID,
            PerformanceYear = cpf.PerformanceYearID,
            ResultsMeasuresFocusComments = cpf.ResultsMeasuresFocusComments,
            MaximumFocusesAllowed = cpf.PerformanceYear.MaximumCareerPlanningFormFocusesAllowed
            // etc., etc...
        };

        return model;
    }

    public void SaveFocusData(CreateFocusViewModel model)
    {
        // validate the model
        this.ValidateCreateFocusViewModel(model);

        // get the current state of the CPF
        var cpf = this.repository.GetCareerPlanningFormByID(model.CareerPlanningFormID);

        // bunch of code saving focus data here...

        // update the ResultsMeasuresFocusComments
        cpf.ResultsMeasuresFocusComments = string.IsNullOrWhiteSpace(model.ResultsMeasuresFocusComments) ? null : model.ResultsMeasuresFocusComments.Trim();

        // commit the changes
        this.repository.Commit();
    }

    private void ValidateCreateFocusViewModel(CreateFocusViewModel model)
    {
        var errors = new ModelStateException<CreateFocusViewModel>();

        {
            var focusesNotPendingDeletion = model.Focuses.Where(f => f.IsPendingDeletion == false);

            // verify that at least one of the focuses (not pending deletion) has a value
            {
                var validFocuses = focusesNotPendingDeletion.Where(f => !string.IsNullOrWhiteSpace(f.FocusText)).ToList();
                if (!validFocuses.Any())
                {
                    var index = model.Focuses.IndexOf(model.Focuses.Where(f => f.IsPendingDeletion == false).First());
                    errors.AddPropertyError(m => m.Focuses[index].FocusText, Resources.ErrorMsg_CPF_OneFocusRequired);
                }
            }

            // verify that each of the focuses (not pending deletion) length is <= 100
            {
                var focusesTooLong = focusesNotPendingDeletion.Where(f => f.FocusText != null && f.FocusText.Length > 100).ToList();
                if (focusesTooLong.Any())
                {
                    focusesTooLong.ToList().ForEach(f =>
                    {
                        var index = model.Focuses.IndexOf(f);
                        errors.AddPropertyError(m => m.Focuses[index].FocusText, Resources.ErrorMsg_CPF_FocusMaxLength);
                    });
                }
            }
        }

        errors.CheckAndThrow();
    }
} 
```

存储库类：

```
public class AppNameRepository : QueryRepository, IAppNameRepository
{
    public AppNameRepository(IGenericRepository repository)
        : base(repository)
    {
    }

    public CareerPlanningForm GetCareerPlanningFormByID(int careerPlanningFormID)
    {
        return this.Repository.Get<CareerPlanningForm>().Where(cpf => cpf.CareerPlanningFormID == careerPlanningFormID).Single();
    }
} 
```

仓库界面：

```
public interface IAppNameRepository : IRepository
{
    CareerPlanningForm GetCareerPlanningFormByID(int careerPlanningFormID);
} 
```

CompanyName.Data 公共库中的类：

```
public abstract class QueryRepository : IRepository
{
    protected readonly IGenericRepository Repository;

    protected QueryRepository(IGenericRepository repository)
    {
        this.Repository = repository;
    }

    public void Remove<T>(T item) where T : class
    {
        this.Repository.Remove(item);
    }

    public void Add<T>(T item) where T : class
    {
        this.Repository.Add(item);
    }

    public void Commit()
    {
        this.Repository.Commit();
    }

    public void Refresh(object entity)
    {
        this.Repository.Refresh(entity);
    }
}

public interface IGenericRepository : IRepository
{
    IQueryable<T> Get<T>() where T : class;
}

public interface IRepository
{
    void Remove<T>(T item) where T : class;
    void Add<T>(T item) where T : class;
    void Commit();
    void Refresh(object entity);
} 
```

我有 LinqToSQL 和 EF，这是 LinqToSQL 的设置：

```
internal sealed class LinqToSqlRepository : IGenericRepository
{
    private readonly DataContext dc;

    public LinqToSqlRepository(DataContext dc)
    {
        this.dc = dc;
    }

    public IQueryable<T> Get<T>() where T : class
    {
        return this.dc.GetTable<T>();
    }

    public void Remove<T>(T item) where T : class
    {
        this.dc.GetTable<T>().DeleteOnSubmit(item);
    }

    public void Add<T>(T item) where T : class
    {
        this.dc.GetTable<T>().InsertOnSubmit(item);
    }

    public void Commit()
    {
        this.dc.SubmitChanges();
    }

    public void Refresh(object entity)
    {
        this.dc.Refresh(RefreshMode.OverwriteCurrentValues, entity);
    }
} 
```

这也在 CompanyName.Data 公共库中。它具有注册 LinqToSQL 或 EntityFramework 的方法

```
public static class UnityContainerExtensions
{
    public static IUnityContainer RegisterEntityFrameworkClasses<TDbContext>(this IUnityContainer container, string nameOrConnectionString) where TDbContext : DbContext
    {
        var constructor = typeof(TDbContext).GetConstructor(new Type[] { typeof(string) });
        container.RegisterType<DbContext>(new HierarchicalLifetimeManager(), new InjectionFactory(c => constructor.Invoke(new object[] { nameOrConnectionString })));
        container.RegisterType<IGenericRepository, EntityFrameworkRepository>();
        return container;
    }

    public static IUnityContainer RegisterLinqToSqlClasses<TDataContext>(this IUnityContainer container, string connectionString) where TDataContext : DataContext
    {
        var constructor = typeof(TDataContext).GetConstructor(new Type[] { typeof(string) });
        container.RegisterType<DataContext>(new HierarchicalLifetimeManager(), new InjectionFactory(c => constructor.Invoke(new object[] { connectionString })));
        container.RegisterType<IGenericRepository, LinqToSqlRepository>();
        return container;
    }
} 
```

在 CompanyName.Utilities 库中：

```
public interface IUnityBootstrap
{
    IUnityContainer Configure(IUnityContainer container);
} 
```

AppName.Data 中的 Unity 引导

```
public class UnityBootstrap : IUnityBootstrap
{
    public IUnityContainer Configure(IUnityContainer container)
    {
        var config = container.Resolve<IAppNameConfiguration>();

        return container.RegisterLinqToSqlClasses<AppNameDataContext>(config.AppNameConnectionString)
                        .RegisterType<IAppNameRepository, AppNameRepository>();
    }
} 
```

AppName.Services 中的 Unity 引导

```
public class UnityBootstrap : IUnityBootstrap
{
    public IUnityContainer Configure(IUnityContainer container)
    {
        new CompanyName.Security.UnityBootstrap().Configure(container);
        new AppName.Data.UnityBootstrap().Configure(container);

        container.RegisterSecureServices<AuthorizationRulesEngine>(typeof(UnityBootstrap).Assembly);

        return container.RegisterType<ICareerPlanningFormService, CareerPlanningFormService>()
                        .RegisterType<IStaffService, StaffService>();
    }
} 
```

AppName.Web 中的 Unity 引导

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        // Standard MVC setup
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);

        // Application configuration 
        var container = new UnityContainer();
        new CompanyName.Mvc.UnityBootstrap().Configure(container);
        new AppName.Configuration.UnityBootstrap().Configure(container);
        new AppName.Data.UnityBootstrap().Configure(container);
        new AppName.Services.UnityBootstrap().Configure(container);

        // Default MVC model binder is pretty weak with collections
        ModelBinders.Binders.DefaultBinder = new DefaultGraphModelBinder();
    }

    protected void Application_Error()
    {
        HttpApplicationEventHandler.OnError(this.Context);
    }

    protected void Application_EndRequest()
    {
        HttpApplicationEventHandler.OnEndRequest(this.Context);
    }
} 
```

# android - 如何完成另一项活动

> ID：15779571
> 
> 赞同：0
> 
> 时间：2013-04-03T05:31:59.617
> 
> 标签：android

> 我有两个活动，例如 test1 和 test2。我想在 test1 活动中关闭 test2 活动。我需要在 test1 活动按钮单击中关闭 test2 活动。怎么做，

```
test1activitybutton.setOnClickListener(new OnClickListener() {          

        public void onClick(View v) 
        {

         // need to close test2 activity    
        }
    }); 
```

> 我需要像上面那样关闭另一个班级活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:43:16.457

在类声明之后的 test1 活动中。

```
Activity t1; 
```

和 test1 活动的 oncreate

```
t1=this; 
```

在 onclick 侦听器内的 test2 活动中

```
Yourtes1activityobject.t1.finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:34:07.380

你不能也不应该这样做。一次，只有一个活动在前台，其他活动暂停。因此，后台活动不活跃，并且无法执行此类活动的任何代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:40:06.457

在 Activity2 中完成 Activity1 是不可能的。在进入 Activity2 之前，可以采用一种方法，您必须使用**finish()**销毁 Activity1 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:46:33.643

在***test2*** Activity 中，您可以创建***public static method()***，其中包含一个运算符***finish() ...然后只需从 Activity*** ***test1***调用此方法

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T05:49:19.127

你能试试这个吗？我不确定它是否有效。

```
startActivityForResult(intent, requestCode);//here start activity t2

public void onClick(View v) 
        {

         finishActivity(requestCode);  //it will finish your t2 activity requestCode should be same. 
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T05:57:36.020

您可能不需要按钮：如果您转动屏幕，您将返回到 Activity 子类的另一个实例。:)

你看到这个了吗： [从另一个活动中完成一个活动](https://stackoverflow.com/questions/10379134/finish-an-activity-from-another-activity?rq=1) ？此外， [从另一个活动完成活动](https://stackoverflow.com/questions/15556138/finishing-activity-from-another-activity?rq=1)*

# mysql - 删除后数据库内存浪费

> ID：15779573
> 
> 赞同：2
> 
> 时间：2013-04-03T05:32:00.773
> 
> 标签：mysql, memory-management, auto-increment

我有 30 个甚至更多的表，并且所有表的主键都设置为自动递增，所以每当我执行删除操作（如从 10 个表中删除 30 条记录）时，删除后 300 个内存单元将始终保持空白，因为主键设置为auto-increment。所以想想非常大的数据库的同样情况，那么如何解决这个问题并再次重用这些内存单元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:49:32.450

主键不引用任何类型的“内存单元”，它只是一个计数器，为每一行提供一个唯一的数字。

理论上可以使用所有可能的键，但是我不确定 MySQL 是否会尝试使用已删除的旧值（它不应该）。但是考虑到未签名的 BIGINT 字段可以达到 18,446,744,073,709,551,615（18 quintillion），您不太可能遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:29:39.827

好吧，它已经自动递增了，所以你无法帮助它。这没有内存浪费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:32:18.393

自动增量只是一个计数器。它与记忆无关。PK 列不是完整的数学系列这一事实与性能完全无关。delete 唯一影响的是回滚日志。如果您要删除表中的所有数据，最好将其截断。

mysql内存模型很复杂。有关概述，您可以查看 mysql 开发文档中的[这篇文章](http://dev.mysql.com/doc/refman/5.0/en/memory-use.html)。

# angularjs - $resource 更新方法行为异常

> ID：15779574
> 
> 赞同：3
> 
> 时间：2013-04-03T05:32:01.760
> 
> 标签：angularjs, angular-resource

对于特定的 $resource，读取/创建/删除都可以正常工作，但是编辑并不顺利。

在我的应用程序配置中，我有：

```
$httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';
$httpProvider.defaults.headers.put['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8'; 
```

这对 POST/PUT 都适用，也许值得一提。

我的 $resource 定义如下所示：

```
app.factory('Project', function($resource) {
    return $resource('project/:id',{},{
        query: { method: 'GET', isArray: false },
        update: { method: 'PUT' }
    });
}); 
```

然后在 ProjectEditCtrl 中：

```
var ProjectEditCtrl = function ($scope, $routeParams, Project, $location) {
    var id = $routeParams.id;
    $scope.projectForm = Project.get({id: id});
    $scope.projectDo = function() {
        var params = $.param($scope.projectForm);
        Project.update({id: id}, params);
    }
} 
```

现在，当我实际运行时，`$scope.projectDo()`我会收到一串请求，而不仅仅是 PUT，显示在此屏幕截图中：

![在此处输入图像描述](https://i.stack.imgur.com/W4Jf4.png)

为什么除了 之外还有其他调用`PUT project/1`？请注意，正在发生 DELETE 500，因为`:id`路径中没有。

**更新**：

只是为了好玩，我决定将整个 $resource 定义更改为以下内容：

```
query: { method: 'GET', isArray: false },
update: { method: 'PUT' },
save: { method: 'GET' },
delete: { method: 'GET' },
get: { method: 'GET' } 
```

使用此定义进行测试确认添加/删除控制器尊重它，并尝试将 GET 用于`Project.delete`和`Project.save`。

现在跑步`Project.update`似乎减少了奇怪的呼叫。和以前一样：

*   发布 x1
*   得到 x2
*   删除 x2
*   放 x2

在强制除`update()`GET 之外的所有内容之后，我现在看到：

*   **没有 POST**
*   得到 x2
*   删除**x1**
*   放 x2

仍然很困惑，但可能有用的信息。

**更新 2**：

决定尝试放弃 PUT 方法，因此`Project.update()`改用 POST，但是类似的问题出现在大量不受欢迎的请求中。

另请注意，所有这些请求都在同一时间点触发，这意味着它们都不是顺序的或对另一个请求的完成做出反应。

**更新 3**：

尝试使用不同的词，而不是`update`查看我是否以某种方式践踏现有代码，但`Project.whaaaat()`效果相同。

**更新 4**：

好吧，现在离真相更近了一点。尝试了未定义的方法，并且发生了相同的行为。我想当我调用一个无法识别的方法时，我只是触发了每个定义的方法？

**更新 5**：

看起来问题是由这两行的组合引起的：

```
$scope.projectForm = Project.get({id: id});
var params = $.param($scope.projectForm); 
```

`$.param`在它返回的对象上运行时，`Project.get`它会调用所有`Project`方法，因为它们实际上是属性。

`projectForm`在属性上运行一个循环，`typeof`显示：

name 是一个字符串 id 是一个数字 $get 是一个函数 $save 是一个函数 $query 是一个函数 $remove 是一个函数 $delete 是一个函数 $update 是一个函数

有没有办法在对象上运行 $.param 并防止不可序列化属性的序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:20:34.453

非常感谢您发布您的发现。$.param() 在与 $httpProvider 一起使用以将 x-www-form-urlencoded 数据发送到我的服务器时造成了严重破坏。想知道所有这些疯狂的后台请求是从哪里来的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T20:28:49.133

我最近使用 angularjs 和 codeigniter 遇到了同样的问题。事实证明，这取决于您如何定义参数。

```
var param1 = {'name':'some name'}; 
var param2 = { name :'some name'}; 
$http.post('some url/',$.param(param1),....); // babies die
$http.post('some url/',$.param(param2),....); // nuclear war averted 
```

# mongodb - 带有java的mongodb

> ID：15779576
> 
> 赞同：1
> 
> 时间：2013-04-03T05:32:04.480
> 
> 标签：mongodb, java-ee-6

我正在尝试使用 java 连接 mongodb，但出现以下异常

```
Apr 3, 2013 10:55:41 AM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException 
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container java.lang.NoClassDefFoundError: com/mongodb/DB
at prime.task.TaskServices.save(TaskServices.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60) 
```

如果有人告诉我如何解决这个问题，这对我很有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T00:51:47.617

它表明您的 IDE 没有正确引用 mongodb java 驱动程序，请尝试使用不同的驱动程序版本，清除 eclipse 项目，或在不同的工作区中创建项目，或在控制台添加 -cp 命令行参数手动运行项目。

问候， 莫西

# math - 计算点在直线的哪一侧

> ID：15779577
> 
> 赞同：0
> 
> 时间：2013-04-03T05:32:13.743
> 
> 标签：math, geometry, line, point

我看了这个问题：[stackoverflow question](https://stackoverflow.com/questions/3461453/determine-which-side-of-a-line-a-point-lies)

我尝试用三角法证明公认的答案方程：![在此处输入图像描述](https://i.stack.imgur.com/OJn22.png)

AB是线，C是点。

在上述问题的公认答案中，如果方程的差为 0，则点是共线的，因此在上图中，证明它是正确的，因为 theta 相同，到目前为止一切都很好。

然后在下图中，c 位于行的右侧：![在此处输入图像描述](https://i.stack.imgur.com/RsHD9.png)

fi 角小于 theta，因此差异为正。因此，在我的程序中，如果我将 > 0 作为右侧点的条件，那么如果点在右侧，则差异应该始终大于 0。

但是我的下一个图显示，即使该点在线的右侧，差异也可能是负数：![在此处输入图像描述](https://i.stack.imgur.com/1ONSy.png)

在图 3 中，即使点在直线的右侧，fi 也大于 theta，因此差异为负。

在接受的答案中，如果我对右侧的点取正差，那么上述情况将给出错误的结果。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:39:52.897

你的比率实际上是你的角度的棕褐色。

但是你做错了：

首先，您需要保持角度一致 - 如果您从负 Ox 方向开始，然后在第一种情况下是 C，然后是 A，那么您应该在第二种情况下做同样的事情。因此，您需要 180-theta 而不是 theta。

其次，当 tan 函数从 < 90 变为 > 90 时，它并没有增加（它实际上是不连续的）。因此，如果您将 fi（小于 90）与 180-theta（大于 90）进行比较，您不能说第一个的 tan 小于第二个的 tan。它可以是任何一种方式。

# sql - 通过用户界面处理多个列表框选项作为存储程序的输入

> ID：15779578
> 
> 赞同：0
> 
> 时间：2013-04-03T05:32:17.243
> 
> 标签：sql, sql-server, database, tsql

VB6的用户界面有多种数据选择，如列表框、组合框等，用户根据这些选择刷新和获取数据，而且大部分不是强制参数。我的解决方案：创建表 dbo。并在刷新按钮上删除现有数据并根据上面提到的选择填充这些表，然后在存储过程中从这些临时表中检索数据示例如下：

```
 select * from jobs where jobs in (select distinct jobs from dbo.tempJobs) 
```

我确信这不是正确的方法，因为对于不同类型的列表框，不同的表正在执行删除和插入，然后在存储过程中使用这些表。

那么这种工作的标准方式是什么？提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:01:22.990

您是否研究过表值参数？对不起，我没有明确的例子，但我认为这就是你所追求的。

您没有提及哪个版本的 SQL Server - 您需要 SQL 2008，但这里有一些示例：

[存储过程中的经典 ADO 和表值参数](https://stackoverflow.com/questions/1883852/classic-ado-and-table-valued-parameters-in-stored-procedure)

[http://geekswithblogs.net/Bunch/archive/2011/11/03/using-table-valued-parameters.aspx](http://geekswithblogs.net/Bunch/archive/2011/11/03/using-table-valued-parameters.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:46:53.863

如果这些表（作业、临时作业）不是很大，则您的查询没有任何问题。但是你可以使用；

*   `Object.AddItemitem, Index`- 用于在运行时添加项目
*   `Object.RemoveItem index`- 用于在运行时删除项目

这是链接 [http://visualbasic.freetutes.com/learn-vb6/lesson9.html](http://visualbasic.freetutes.com/learn-vb6/lesson9.html)

我希望我理解你的问题是正确的。

# asp.net - 在 Jqgrid 中过滤记录时，FooterRow 摘要值没有改变

> ID：15779581
> 
> 赞同：1
> 
> 时间：2013-04-03T05:32:57.047
> 
> 标签：asp.net, jqgrid

我有一个函数可以计算特定列的摘要并将其加载到网格的页脚中。这是代码..

```
$(function () {
            var gridData = null;
            var nn = null;

            grid = $("#gridId"),
            calculateTotal = function () {
                var gridData = grid.jqGrid('getGridParam', 'data'),
                i = 0, totalAmount = 0, totalduration = 0;

                for (; i < gridData.length; i++) {
                    var rowData = gridData[i];
                    totalAmount += Number(rowData.price);
                    totalduration += Number(rowData.duration);
                }
                grid.jqGrid('footerData', 'set', { name: "TOTAL", duration: totalduration, price: totalAmount });
            };
        }); 
```

现在我在这里调用这个摘要函数......

```
$.ajax({
            url: 'Default.aspx/MyMethod',
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            type: 'POST',
            success: function (ReportDataNew, textStatus, XMLHttpRequest) {
                //debugger;
                gridData = JSON.parse(ReportDataNew.d);
                console.log(gridData);
                //alert(gridData.length);

                $("#gridId").jqGrid({
                    data: gridData,
                    datatype: "local",
                    height: '100%',
                    autowidth: true,
                    ignoreCase: true,
                    rowNum: 50,
                    rowList: [50, 100, 200],
                    colNames: ['UserName',  'Duration', 'Destination', 'Price'],
                    colModel: [
                            { name: 'username', index: 'username', width: 100, sortable: true, align: 'center' },
                            { name: 'duration', index: 'duration', width: 100, sortable: true, align: 'center' },
                            { name: 'destination', index: 'destination', width: 100, sortable: true, align: 'center' },
                            { name: 'price', index: 'price', width: 100, sortable: true, align: 'center', formatter: 'currency' }

                        ],
                    pager: '#gridpager',
                    viewrecords: true,
                    toppager: true,
                    loadtext: 'Loading...',
                    footerrow: true,
                    userDataOnFooter: true,
                    loadComplete: function () {
                        calculateTotal();
                    }

                }); 
```

但是在从过滤器工具栏过滤记录时，页脚行的汇总值保持不变......我需要在从过滤器工具栏过滤或搜索后更新页脚的汇总值......

任何帮助将不胜感激/。提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:48:20.803

您用于`grid.jqGrid('getGridParam', 'data')`计算页脚行（摘要行）的值。如果您需要访问*独立于所用过滤器的所有页面的所有本地数据，*这很实用。如果您需要从当前显示的数据页面（并应用过滤器）计算摘要，您应该使用`grid.jqGrid('getRowData')`。

# android - Android Expandablelistview 与 listview 作为子视图

> ID：15779584
> 
> 赞同：1
> 
> 时间：2013-04-03T05:33:02.637
> 
> 标签：android, listview, scrollview, expandablelistview

如何在可扩展列表视图项单击中将列表视图添加为子项？

类似于下图的东西

在这里，当从可扩展列表中单击项目时，它将展开具有固定高度和滚动的列表视图。就像简单的可扩展列表一样，唯一的区别是我想打开只显示很少数据的列表视图，并且用户可以在该列表中滚动以查找其他项目。

由于声誉较低，无法发布图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:42:46.697

你检查[过 Github 中的 This Expandable List Animation Example](https://github.com/Udinic/SmallExamples/tree/master/ExpandAnimationExample)

您可以根据需要自定义它并在您的项目中使用它

# java - 对单例方法的多个线程调用会影响局部变量？

> ID：15779585
> 
> 赞同：0
> 
> 时间：2013-04-03T05:33:05.157
> 
> 标签：java, memory-management, methods

我创建了一个具有多个方法的类，并且这个类在任何时候都可以只有一个实例，就像单例行为和没有任何实例变量的类一样。

现在我很困惑，如果对单个方法的多次调用会产生预期的结果，如果方法只有参数会受到多个线程的影响？
Bcoz一旦分配内存，方法就在堆栈中，然后线程同时调用该方法，结果是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T05:36:07.843

每个线程都有自己的、独立的、私有的堆栈。当一个线程进入一个方法时，所有的参数和局部变量都在该线程的本地栈中，没有其他线程可以访问它。

因此，如果两个线程进入同一个方法，但是这个方法只访问它的参数和它的局部变量（并且两个线程中的参数并不指向同一个对象），那么一个线程的执行不可能干扰另一个线程的执行。线程执行。它几乎就像两个独立的 java 进程。

# jsp - JSP 单选按钮值

> ID：15779588
> 
> 赞同：1
> 
> 时间：2013-04-03T05:33:10.827
> 
> 标签：jsp, button, null, radio

我想知道如何获取单选按钮值。所以假设，我有一个有两个单选按钮的表单。我想获取与按钮关联的值。但是，当我尝试这样做时，我得到了 null。

表格部分

```
<form method="post" action="insert.jsp" enctype=text/plain>
<table>
<INPUT TYPE="radio" name="command" value="0">Run<INPUT TYPE="radio" NAME="command" VALUE="1">Walk<BR> 
```

Insert.jsp 部分

```
String sCommand=(String)request.getParameter("command");
out.println(sCommand); 
```

所以反过来，它打印出 null

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:46:41.717

使用`GET`方法代替，`POST`您的代码将运行。（如果你想使用'text/plain'）并且还看到@divyabharathi给出的正确`enctype`的POST方法的答案。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form method="get" action="insert.jsp" enctype=text/plain>
<INPUT TYPE="radio" name="command" value="0"/>Run
<INPUT TYPE="radio" NAME="command" VALUE="1"/>Walk
<INPUT TYPE="submit" VALUE="submit" />
</form>
<%
String sCommand = request.getParameter("command");
out.println(sCommand);
%>
</body>
</html> 
```

但我强烈建议你不要`scriplets`在你的 JSP 中使用，看看[How to Avoid Java Code in JSP-Files?](https://stackoverflow.com/a/3180202/1551233)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:39:48.023

的`null`返回值是由于您在 jsp`request.getParameter("command")`中使用的事实。`enctype="plain/text"`

HTTP post 请求的默认编码（您的 servlet 所期望的）是 application/x-www-form-urlencoded；不是文本/纯文本。

# kendo-ui - 选择 DateTimePicker 范围无法正常工作

> ID：15779596
> 
> 赞同：2
> 
> 时间：2013-04-03T05:33:51.967
> 
> 标签：kendo-ui, kendo-grid

kendo DatePicker 中是否有任何默认方法可以确保 To 日期始终大于或等于 From 日期。[这是我尝试过的代码](http://jsfiddle.net/5bchz/58/)：

我的范围选择代码：

```
function startChange() {
    var startDate = startdatetimepicker.value(),
            endDate = enddatetimepicker.value();

    if (startDate) {
        startDate = new Date(startDate);
        startDate.setDate(startDate.getDate());
        enddatetimepicker.min(startDate);
    } else if (endDate) {
        startdatetimepicker.max(new Date(endDate));
    } else {
        endDate = new Date();
        startdatetimepicker.max(endDate);
        enddatetimepicker.min(endDate);
    }
}

function endChange() {
    var endDate = enddatetimepicker.value(),
            startDate = startdatetimepicker.value();

    if (endDate) {
        endDate = new Date(endDate);
        endDate.setDate(endDate.getDate());
        startdatetimepicker.max(endDate);
    } else if (startDate) {
        enddatetimepicker.min(new Date(startDate));
    } else {
        endDate = new Date();
        startdatetimepicker.max(endDate);
        enddatetimepicker.min(endDate);
    }
} 
```

我收到此错误-->“属性‘值’od 对象 3 不是函数”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:21:59.143

你`startdatepicker`是一个`HTML input object`并且没有`value`方法但是`property`。所以你应该使用：`startdatetimepicker.value`.

尽管如此，我还是建议使用 Kendo UI 日期时间选择器将其更改为：

```
function startChange() {
    var startDate = k_startdatetimepicker.value(),
            endDate = k_enddatetimepicker.value();

    if (startDate) {
        startDate = new Date(startDate);
        startDate.setDate(startDate.getDate());
        k_enddatetimepicker.min(startDate);
    }
    else if (endDate) {
        k_startdatetimepicker.max(new Date(endDate));
    }
    else {
        endDate = new Date();
        k_startdatetimepicker.max(endDate);
        k_enddatetimepicker.min(endDate);
    }
}

function endChange() {
    var endDate = k_enddatetimepicker.value(),
            startDate = k_startdatetimepicker.value();
    console.log(endDate, startDate);

    if (endDate) {
        endDate = new Date(endDate);
        endDate.setDate(endDate.getDate());
        k_startdatetimepicker.max(endDate);
    }
    else if (startDate) {
        k_enddatetimepicker.min(new Date(startDate));
    }
    else {
        endDate = new Date();
        k_startdatetimepicker.max(endDate);
        k_enddatetimepicker.min(endDate);
    }
} 
```

在哪里`k_startdatetimepicker`和`k_enddatetimepicker`是：

```
var k_startdatetimepicker = $("#startdatetimepicker").kendoDateTimePicker({
    change: startChange,
    showSecond: true,
    dateFormat: "dd-mm-yy",
    timeFormat: "HH:mm:ss",
    format: "dd-MM-yy HH:mm:ss"
}).data("kendoDateTimePicker");

var k_enddatetimepicker = $("#enddatetimepicker").kendoDateTimePicker({
    change: endChange,
    showSecond: true,
    dateFormat: "dd-mm-yy",
    timeFormat: "HH:mm:ss",
    format: "dd-MM-yy HH:mm:ss"
}).data("kendoDateTimePicker"); 
```

[在这里](http://jsfiddle.net/OnaBai/5bchz/81/)运行 JSfiddle

# android - 如何从 Android 应用程序使用云存储？

> ID：15779601
> 
> 赞同：0
> 
> 时间：2013-04-03T05:34:06.713
> 
> 标签：android

在我的应用程序中，我想将一些文本内容保存在云中并在需要时检索它。那么，我该如何在android中做到这一点？任何人都可以展示一些使用云的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:37:21.893

看看这个库

[https://github.com/mlina/DropboxSDK-for-Android](https://github.com/mlamina/DropboxSDK-for-Android)

它允许您利用 DropBox API 来存储和检索数据，例如存储在平面文件中的文本内容。如果您正在寻找数据库解决方案，您会寻找其他地方。希望有帮助！

# magento - 如何在 MAGENTO SOAP API 调用中获取类别图像的 URL？

> ID：15779608
> 
> 赞同：2
> 
> 时间：2013-04-03T05:35:08.643
> 
> 标签：magento, magento-1.6

我一直在尝试通过 magento SOAP API 获取类别图像。当我访问 catalog_category.info 方法时，它只传递图像名称，而不是图像的 URL。

如何使用 SOAP API 调用获取类别图像的完整 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T15:05:51.237

类别图像位于 magentohost/magento/media/catalog/category/ 文件夹中，因此完整 url 为 magentohost/media/catalog/category/image_name

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-25T20:01:01.163

如果有人想找出他们特定的 Magento 安装的位置——假设你知道图像文件名——转到终端并使用命令`locate [file-name]`。它应该返回图像位置的完整路径。我的是`[magento-root-dir]/pub/media/catalog/category/[file-name]` 我希望这会有所帮助。干杯!

# memory-management - ID_FUNCCAP_EXTEND_MEM 什么时候生效？

> ID：15779610
> 
> 赞同：2
> 
> 时间：2013-04-03T05:35:21.650
> 
> 标签：memory-management, windows-phone-8, windows-phone

ID_FUNCCAP_EXTEND_MEM能力是不是只有在应用签名认证后才能生效？或者在将 xap 侧加载到解锁设备时也可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:23:54.447

我不知道您问题的确切答案，但您可以通过使用本页提到的**DeviceExtendedProperties.GetValue(String)**方法检查**ApplicationWorkingSetLimit**值来弄清楚：http: [//msdn.microsoft.com/ en-us/library/windowsphone/develop/jj681682(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681682(v=vs.105).aspx)。如果它返回 380MB 作为答案（对于高内存手机），那么它很可能在安装/执行应用程序时生效。

 **在此处获取有关 DeviceExtendedProperties.GetValue 的更多信息：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties.getvalue (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties.getvalue(v=vs.105).aspx)

您可以在此处找到扩展属性名称列表：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties(v=vs.105).aspx)**

# java - 通过 Java 代码使用 JasperReports 创建 PDF 报告时的 Unicode 问题

> ID：15779619
> 
> 赞同：1
> 
> 时间：2013-04-03T05:36:15.553
> 
> 标签：java, unicode, utf-8, jasper-reports, report

我开发了基于 Spring 的 Web 应用程序，它使用 JasperReports Library 5.0.0 创建报告。首先，当我使用 iReport 4.5.1 设计报告时，我遇到了 Unicode 字符问题。我在这里找到[了这个](https://stackoverflow.com/questions/5715473/jasper-reports-with-pdf-and-unicode-greek-characters)问题，解决方案是使用字体扩展。我按照[此处](http://mdahlman.wordpress.com/2010/05/28/jaspersoft-v3-7-font-extensions/)所述进行了所有操作（“创建报告并指定字体”）。我将“Tahoma”字体安装到 iReport，选中“将此字体嵌入 PDF 文档”并选择“Identity-H（水平书写的 Unicode）”作为 PDF 编码。当我使用 iReport 执行并将报告保存为 PDF 时，它解决了我的问题。但是当我在我的 Java 代码中使用 iReport 编译的“jasper”文件时，我再次遇到了与 Unicode 字符相关的问题。生成的报告不包含某些特定于语言的字符。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:19:40.243

我在[这里](http://jasperstarter.sourceforge.net/unicode-pdf-export.html#Using_a_font_outside_of_iReport)找到了解决方案。

*   只需再次打开 iReports 的选项对话框。
*   选择 iReport 部分（如果尚未选择）。
*   单击字体选项卡。
*   选择以前安装的字体，然后单击“导出为扩展名”按钮。
*   选择以 .jar 结尾的文件夹和文件名

现在您有了一个可以与 JasperReports 一起使用的即用型字体 jar。只需将其添加到应用程序的类路径中即可。

# python - python中的Opencv 2.4.3估计RigidTransform

> ID：15779620
> 
> 赞同：5
> 
> 时间：2013-04-03T05:36:23.480
> 
> 标签：python, opencv, python-2.7, numpy

这对我来说真是一团糟，我很难解决这个问题。我想在 Python 中使用带有 numpy 数组的方法 cv2.estimateRigitTransform ，但我无法在任何地方找到解释所需 src 和 dst numpy 数组格式的示例或其他内容。

有人可以给我一个可以使用这种方法的这两个数组的小例子吗？我有所有的数据（当然是二维的），但找不到如何在一个 numpy 数组中塑造它。

请帮我。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:10:12.210

这是一个尝试对齐两组随机 10 个点的基本示例

```
import numpy as np
import cv2
shape = (1, 10, 2) # Needs to be a 3D array
source = np.random.randint(0, 100, shape).astype(np.int)
target = source + np.array([1, 0]).astype(np.int)
transformation = cv2.estimateRigidTransform(source, target, False) 
```

[文档在这里](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#estimaterigidtransform)。

# android - Android - 位置管理器 - 奇怪的崩溃问题

> ID：15779621
> 
> 赞同：1
> 
> 时间：2013-04-03T05:36:33.280
> 
> 标签：android, locationmanager

我有点迷路了。基本上我需要以最快、最轻、可能的方式获取用户的大致位置。这是我的代码

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);                 
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_COARSE);
criteria.setAltitudeRequired(false);
criteria.setBearingRequired(false);
criteria.setCostAllowed(false);
criteria.setPowerRequirement(Criteria.POWER_LOW);

provider = locationManager.getBestProvider(criteria, true);
Location location = locationManager.getLastKnownLocation(provider);
Log.d(TAG,"Lat - " + (location.getLatitude()) + " long - " + (location.getLongitude())); 
```

昨天它对我来说非常有效，但今天我在`Log.d`尝试访问时收到空指针错误`location`。我将应用程序发送给了两个朋友，它在他们的手机上运行良好。有什么我可以更改以使代码更健壮的吗？什么可能导致我的手机崩溃？

编辑 - 我在地图中获得了 gps 锁定并返回我的应用程序，但它仍然崩溃..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:40:39.933

```
Location location = locationManager.getLastKnownLocation(provider); 
```

这并不总是返回一个位置。事实上，它给了很多次`NULL`。

您必须始终检查位置是否为`NULL`.

```
if(location != null){
      Log.d(TAG,"Lat - " + (location.getLatitude()) + " long - " + (location.getLongitude()));
} 
```

空位置的原因可能是`provider's` **LastKnownLocation**已过期（旧时间戳）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:40:26.230

如果您在此处查看参考[https://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String)](https://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String))；你会看到`getLastKnownLocation`：

> 返回提供者的最后一个已知位置，或 null

所以是的，你的`location`对象有时可能是空的。我不知道为什么会这样，但确实如此。我有一种感觉，在设备长时间未使用定位服务后，这种情况会更频繁地发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T05:43:15.690

您的标准很可能导致网络位置，当 Wifi 不可用时，使用手机信号塔，因此如果您使用的数据超过限制，可能会产生费用。因此对于网络来说，成本是真实的。因此，如果你改变

```
criteria.setCostAllowed(true); 
```

你会没事的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:43:31.693

您的位置为空，因此您可能会收到错误

```
if(location != null){
      Log.d(TAG,"Lat - " + (location.getLatitude()) + " long - " + (location.getLongitude()));
} 
```

[位置演示](http://niravranpara.blogspot.in/2013/04/android-get-current-gps-location.html)

# php - OS登录php脚本修改

> ID：15779622
> 
> 赞同：0
> 
> 时间：2013-04-03T05:36:33.900
> 
> 标签：php, session, include, login-script

我正在尝试修改我发现的以下操作系统登录脚本，以便当用户具有有效会话或“记住我的 cookie”时包含文件 A.php，如果他们未登录，则包含文件 B.php。

我似乎无法自己解决这个简单的任务......任何帮助都会很棒。谢谢你。

```
if (!isset($_SESSION['user_id']) && !isset($_SESSION['user_name']) ) 
{
    if(isset($_COOKIE['user_id']) && isset($_COOKIE['user_key'])){
    /* we double check cookie expiry time against stored in database */

    $cookie_user_id  = filter($_COOKIE['user_id']);
    $rs_ctime = mysql_query("select `ckey`,`ctime` from `users` where `id` ='$cookie_user_id'") or die(mysql_error());
    list($ckey,$ctime) = mysql_fetch_row($rs_ctime);
    // coookie expiry
    if( (time() - $ctime) > 60*60*24*COOKIE_TIME_OUT) {

        logout();
        }
/* Security check with untrusted cookies - dont trust value stored in cookie.       
/* We also do authentication check of the `ckey` stored in cookie matches that stored in database during login*/

     if( !empty($ckey) && is_numeric($_COOKIE['user_id']) && isUserID($_COOKIE['user_name']) && $_COOKIE['user_key'] == sha1($ckey)  ) {
          session_regenerate_id(); //against session fixation attacks.

          $_SESSION['user_id'] = $_COOKIE['user_id'];
          $_SESSION['user_name'] = $_COOKIE['user_name'];
        /* query user level from database instead of storing in cookies */  
          list($user_level) = mysql_fetch_row(mysql_query("select user_level from users where id='$_SESSION[user_id]'"));

          $_SESSION['user_level'] = $user_level;
          $_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);

          include('file A.php');
       } 
       else {
       logout();
       }

  } else {
    exit();
    }
}
}

function logout()
{
global $db;
session_start();

if(isset($_SESSION['user_id']) || isset($_COOKIE['user_id'])) {
mysql_query("update `users` 
            set `ckey`= '', `ctime`= '' 
            where `id`='$_SESSION[user_id]' OR  `id` = '$_COOKIE[user_id]'") or die(mysql_error());
}           

/************ Delete the sessions****************/
unset($_SESSION['user_id']);
unset($_SESSION['user_name']);
unset($_SESSION['user_level']);
unset($_SESSION['HTTP_USER_AGENT']);
session_unset();
session_destroy(); 

/* Delete the cookies*******************/
setcookie("user_id", '', time()-60*60*24*COOKIE_TIME_OUT, "/");
setcookie("user_name", '', time()-60*60*24*COOKIE_TIME_OUT, "/");
setcookie("user_key", '', time()-60*60*24*COOKIE_TIME_OUT, "/");

include('file B.php');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:43:12.797

如果用户有会话或者用户有 cookie，您希望它能够工作吗？如果是这样，脚本将在第一行停止工作。

如果用户**有**一个活动会话，脚本就停在那里。您可能希望将核心代码移动到另一个函数并在 else 条件下调用它。

```
if session exists
 do this
else if cookie exists
 do that
else
 do it 
```

第 39 行还有一个额外的 }。

更新 -

```
<?
if (isset($_SESSION['user_id']) && isset($_SESSION['user_name']) ) 
{
    include 'file A.php';
}
else if(isset($_COOKIE['user_id']) && isset($_COOKIE['user_key'])){
    /* we double check cookie expiry time against stored in database */

    $cookie_user_id  = filter($_COOKIE['user_id']);
    $rs_ctime = mysql_query("select `ckey`,`ctime` from `users` where `id` ='$cookie_user_id'") or die(mysql_error());
    list($ckey,$ctime) = mysql_fetch_row($rs_ctime);
    // coookie expiry
    if( (time() - $ctime) > 60*60*24*COOKIE_TIME_OUT) {

        logout();
        }
/* Security check with untrusted cookies - dont trust value stored in cookie.       
/* We also do authentication check of the `ckey` stored in cookie matches that stored in database during login*/

     if( !empty($ckey) && is_numeric($_COOKIE['user_id']) && isUserID($_COOKIE['user_name']) && $_COOKIE['user_key'] == sha1($ckey)  ) {
          session_regenerate_id(); //against session fixation attacks.

          $_SESSION['user_id'] = $_COOKIE['user_id'];
          $_SESSION['user_name'] = $_COOKIE['user_name'];
        /* query user level from database instead of storing in cookies */  
          list($user_level) = mysql_fetch_row(mysql_query("select user_level from users where id='$_SESSION[user_id]'"));

          $_SESSION['user_level'] = $user_level;
          $_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);

          include 'file A.php';
       } 
       else {
          logout();
       }

  } else {
  logout();
}

function logout()
{
global $db;

if(isset($_SESSION['user_id']) || isset($_COOKIE['user_id'])) {
mysql_query("update `users` 
            set `ckey`= '', `ctime`= '' 
            where `id`='$_SESSION[user_id]' OR  `id` = '$_COOKIE[user_id]'") or die(mysql_error());
}           

/************ Delete the sessions****************/
unset($_SESSION['user_id']);
unset($_SESSION['user_name']);
unset($_SESSION['user_level']);
unset($_SESSION['HTTP_USER_AGENT']);
session_unset();
session_destroy(); 

/* Delete the cookies*******************/
setcookie("user_id", '', time()-60*60*24*COOKIE_TIME_OUT, "/");
setcookie("user_name", '', time()-60*60*24*COOKIE_TIME_OUT, "/");
setcookie("user_key", '', time()-60*60*24*COOKIE_TIME_OUT, "/");

include 'file B.php';
}

?> 
```

我已将 exit() 更改为 logout()。如果用户没有登录并且您仍然希望他看到文件 B，这可能是您想要的。否则，您可以用 exit() 替换它。另外，请注意我已经改变了第一个条件。

这是做什么的

```
if user has an active session
 show file A
else if user has an active cookie
 if all conditions have met show file A 
 else show file B
else
 show file B 
```

# parsing - 通过 SimplePie 解析自定义节点值

> ID：15779631
> 
> 赞同：1
> 
> 时间：2013-04-03T05:38:04.507
> 
> 标签：parsing, rss, simplepie

我正在通过`SimplePie`库解析雅虎媒体 rss 提要。我需要将名为`<category>`子节点的自定义节点添加到`<title>`. 现在我需要每次通过循环解析该节点的内容......这是我的提要的结构

```
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
   .....
   .....
    <item>
      <title></title>
      <link></link>
      ....
      <media:content>
      ...
      </media:content>
      <category>one</category> 
    </item>
    <item>
      <title>...</title>
      <link>...</link>
      ....
      <media:content>
      ...
      </media:content>
      <category>two</category> 
    </item> 
  </channel>
</rss> 
```

我的任务是使用以下方式解析`<category>`我尝试过的节点的内容，但没有运气，我得到了回报`$item->get_item_tags()``null`

```
$cat_get= $item->get_item_tags('http://search.yahoo.com/mrss/',
            'item');
            $cat_get_node = $category1[0]['child']['http://search.yahoo.com/mrss/']['category'];
            $cat_content = $category2[0]['data']; 
```

任何方向都会有所帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:40:25.313

试试这个，因为元素在根命名空间中。

```
$cat = $item->get_item_tags(SIMPLEPIE_NAMESPACE_RSS20, 'category');
$cat_content = $cat[0]['child']; 
```

# java - 使用Java在句子中查找确切的单词

> ID：15779632
> 
> 赞同：2
> 
> 时间：2013-04-03T05:38:04.903
> 
> 标签：java, string

我正在编写一个代码来识别文本中的国家名称。我正在使用带有国家名称的字典说`India, America, Sri Lanka, ...`。我目前正在使用字典中的`text.contains(key)`with `key`。但是，即使对于像`Indiana`. 我尝试将句子中的单词放在一个数组中，然后进行包含，类似的方法可以考虑使用 equals，但它们真的很慢。你能想到其他更快的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T05:47:47.863

尝试使用[单词边界](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)类`\b`

```
s.matches(".*\\b" + key + "\\b.*") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:54:36.847

也许您应该使用一些文本处理库。

这是一个正则表达式解决方案：

```
import java.util.regex.*;
import static java.lang.System.*;
public class SO {
    public static void main(String[] args) {
        String[] dict={"india","america"};
        String patStr=".*\\b(" + combine(dict,"|") + ")\\b.*";
        out.println("pattern: "+patStr+"\n");
        Pattern pat=Pattern.compile(patStr);

        String input1="hello world india indiana";
        out.println(input1+"\t"+pat.matcher(input1).matches());

        String input2="hello world america americana";
        out.println(input2+"\t"+pat.matcher(input2).matches());

        String input3="hello world indiana amercana";
        out.println(input3+"\t"+pat.matcher(input3).matches());
    }
    static String combine(String[] s, String glue){
      int k=s.length;
      if (k==0) return null;
      StringBuilder out=new StringBuilder();
      out.append(s[0]);
      for (int x=1;x<k;++x)
        out.append(glue).append(s[x]);
      return out.toString();
    }
} 
```

输出：

```
pattern: .*\b(india|america)\b.*

hello world india indiana       true
hello world america americana   true
hello world indiana amercana    false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:46:29.857

`contains()`应该工作。你也可以试试`String.indexOf(String)`。如果它返回 -1 以外的任何值，则该查询字符串存在于所述字符串中，否则不存在。

# mysql - 从一个表插入数据到另一个表不起作用

> ID：15779634
> 
> 赞同：0
> 
> 时间：2013-04-03T05:38:07.203
> 
> 标签：mysql

我有两个 mysql 表 t1 & t2

t1 有一个名为“名称”的字段

' t2 有两个字段名为 'name' 和 'date'，其中 'date' 字段默认设置为当前**时间戳**

我需要将所有数据从 t1 导入到 t2

> 插入 T2 SELECT * FROM t1

查询不起作用，它说字段数不一样

如何修改此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:40:55.363

INSERT INTO t2 (NAME)SELECT Name FROM t1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:42:19.787

插入 t2 从 t1 中选择名称

试着让我知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:48:01.620

插入 t2（名称）（从 t1 中选择名称）

# c++ - 如何为 IP 地址条目计算适当的 wxTextCtrl 小部件宽度？

> ID：15779643
> 
> 赞同：0
> 
> 时间：2013-04-03T05:38:43.230
> 
> 标签：c++, user-interface, wxwidgets

我正在使用 wxTextCtrl 从用户那里获取 IP 地址。显然，没有任何 IP v4 地址可能超过 15 个字符，但字形大小取决于环境（操作系统、用户设置等），所以我对于为我使用的 wxTextCtrl 设置一些固定大小有点犹豫。

在这种情况下，计算控件大小的最佳方法是什么？

# user-controls - vb6.0中的UserControl在Windows 7中获得边框

> ID：15779663
> 
> 赞同：0
> 
> 时间：2013-04-03T05:40:24.767
> 
> 标签：user-controls, vb6

在我的 VB6 应用程序中，`UserControl`使用了 a 。最近，我们从 Windows XP 迁移到了 Windows 7。在 Windows 7 中`UserControl`，顶部和左侧都有边框。请告诉我如何删除这些边框。

我附上了下面的图片。在上面`UserControl`有一个`ListBox`。在 上`UserControl`，顶部和左侧边框是可见的。

![在此处输入图像描述](https://i.stack.imgur.com/uRFBs.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:34:18.863

没有代码很难分辨，但也许您在绘画中使用的是 Width 和 Height 而不是[ScaleWidth 和 ScaleHeight ？](http://msdn.microsoft.com/en-us/library/aa445663%28v=vs.60%29.aspx)后者将为您提供您正在使用的客户区域的大小。

同样，只是猜测，直到我们看到一些代码。

# android - Android：如何扭曲图像？

> ID：15779669
> 
> 赞同：20
> 
> 时间：2013-04-03T05:40:52.660
> 
> 标签：android, image-processing

我想像这样扭曲图像：

![示例图片](https://i.stack.imgur.com/IcWcW.jpg)

*添加 08-04-2013*：我使用了这段代码，但它不能正常工作：

```
 private static final int WIDTH = 20;
    private static final int HEIGHT = 20;
    private static final int COUNT = (WIDTH + 1) * (HEIGHT + 1);

    private final Bitmap mBitmap;
    private final float[] mVerts = new float[COUNT*2];
    private final float[] mOrig = new float[COUNT*2];

    private final Matrix mMatrix = new Matrix();
    private final Matrix mInverse = new Matrix();

    private static void setXY(float[] array, int index, float x, float y) {
        array[index*2 + 0] = x;
        array[index*2 + 1] = y;
    }

    public SampleView(Context context) {
        super(context);
        setFocusable(true);

        mBitmap = BitmapFactory.decodeResource(getResources(),
                                                 R.drawable.ic_launcher);

        float w = mBitmap.getWidth();
        float h = mBitmap.getHeight();
        // construct our mesh
        int index = 0;
        for (int y = 0; y <= HEIGHT; y++) {
            float fy = h * y / HEIGHT;
            for (int x = 0; x <= WIDTH; x++) {
                float fx = w * x / WIDTH;                    
                setXY(mVerts, index, fx, fy);
                setXY(mOrig, index, fx, fy);
                index += 1;
            }
        }

        mMatrix.setTranslate(10, 10);
        mMatrix.invert(mInverse);
    }

    @Override protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFCCCCCC);

        canvas.concat(mMatrix);
        canvas.drawBitmapMesh(mBitmap, WIDTH, HEIGHT, mVerts, 0,
                              null, 0, null);
    }

    private void warp(float cx, float cy) {
        final float K = 10000;
        float[] src = mOrig;
        float[] dst = mVerts;
        for (int i = 0; i < COUNT*2; i += 2) {
            float x = src[i+0];
            float y = src[i+1];
            float dx = cx - x;
            float dy = cy - y;
            float dd = dx*dx + dy*dy;
            float d = FloatMath.sqrt(dd);
            float pull = K / (dd + 0.000001f);

            pull /= (d + 0.000001f);
         //   android.util.Log.d("skia", "index " + i + " dist=" + d + " pull=" + pull);

            if (pull >= 1) {
                dst[i+0] = cx;
                dst[i+1] = cy;
            } else {
                dst[i+0] = x + dx * pull;
                dst[i+1] = y + dy * pull;
            }
        }
    }

    private int mLastWarpX = -9999; // don't match a touch coordinate
    private int mLastWarpY;

    @Override public boolean onTouchEvent(MotionEvent event) {
        float[] pt = { event.getX(), event.getY() };
        mInverse.mapPoints(pt);

        int x = (int)pt[0];
        int y = (int)pt[1];
        if (mLastWarpX != x || mLastWarpY != y) {
            mLastWarpX = x;
            mLastWarpY = y;
            warp(pt[0], pt[1]);
            invalidate();
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T09:15:29.123

有一种比自己编写代码更简单的方法。请参阅[TransitionDrawable](http://developer.android.com/reference/android/graphics/drawable/TransitionDrawable.html)

> LayerDrawables 的扩展，旨在在第一层和第二层之间交叉淡入淡出。要开始转换，请调用 startTransition(int)。要仅显示第一层，请调用 resetTransition()。
> 它可以在带有 <transition> 元素的 XML 文件中定义。过渡中的每个 Drawable 都在嵌套的 <item> 中定义

你可以在网上找到很多例子，**[这里](http://www.vogella.com/articles/AndroidDrawables/article.html)**有一个：

```
<?xml version="1.0" encoding="utf-8"?>
<transition xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:drawable="@drawable/first_image" />
  <item android:drawable="@drawable/second_image" />
</transition> 
```

和代码

```
final ImageView image = (ImageView) findViewById(R.id.image);
final ToggleButton button = (ToggleButton) findViewById(R.id.button);
button.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(final View v) {
    TransitionDrawable drawable = (TransitionDrawable) image.getDrawable();
    if (button.isChecked()) {
      drawable.startTransition(500);
    } else {
      drawable.reverseTransition(500);
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-18T12:09:51.107

这可以通过 OpenCV 来实现，所以试试[这个](http://github.com/MasteringOpenCV/code%20.)

# spring - 如何在 viewpreparer 类中获取 HttpServletRequest

> ID：15779675
> 
> 赞同：2
> 
> 时间：2013-04-03T05:41:10.073
> 
> 标签：spring, spring-mvc, tiles

我正在使用 Spring MVC 框架并使用视图准备器来加载菜单。我需要在 viewpreparer 类中获取请求对象。为此，我在视图准备器中使用以下代码

```
@Service
public class MenuViewPreparer implements ViewPreparer {

   HttpServletRequest request = ServletActionContext.getRequest();
  // HttpSession session = request.getSession();
 public void execute(TilesRequestContext tilesContext,
         AttributeContext attributeContext) throws PreparerException {

         // MenuList fetches the list of all the main menus by calling the getMenuList() method present in MenuServiceDAOImpl
         // which is of type MenuDTO
         String user=null;
         System.out.println("Menu :"+request.hashCode());
         UserDTO userDTO = UserName.getUserName(request);
         user=userDTO.getUserId();
}
} 
```

我需要执行方法中的请求对象。但所有人都以空值进入请求对象。所以得到一个例外。谁能告诉我如何得到它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T07:24:01.700

如果您将磁贴与弹簧安全性一起使用，请尝试以下代码：

```
 Object reqObj = tilesRequestContext.getRequestObjects()[0];
    ServletRequest reqq;
    if (SecurityContextHolderAwareRequestWrapper.class.isInstance(reqObj)) {
        SecurityContextHolderAwareRequestWrapper schaqw = (SecurityContextHolderAwareRequestWrapper) reqObj;
        reqq = schaqw.getRequest();
    } else if(PageContext.class.isInstance(reqObj)){
        PageContext context = (PageContext) reqObj;
        reqq = context.getRequest();
    } else {
        throw new ImpossibleException("tilesRequestContext.getRequestObjects[0] has unknow type: "+ reqObj.getClass().getName());
    } 
```

这对我有用。

PS ImpossibleException 是我在不可能的情况下的自定义异常。我不知道这是否真的不可能，但无论如何例外都是必需的信息。而且这个变种肯定比其他变种更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T12:59:50.823

由于tilesContext.getRequest() 似乎已被弃用，我被迫寻找替代方案。以下对我有用：

```
Object[] requests = (Object[]) tilesContext.getRequestObjects();
PageContext pageContext = null;
HttpServletRequest request = null;
if(requests.length > 0){
     pageContext = (PageContext) requests[0];
     request = (HttpServletRequest) pageContext.getRequest();
} 
```

让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:12:26.223

你有没有尝试过 ？？

```
public class MenuPreparer implements ViewPreparer {

public void execute(TilesRequestContext tilesContext, 
                  AttributeContext attributeContext) throws PreparerException {

    HttpServletRequest request = (HttpServletRequest) tilesContext.getRequest();
} 
```

# delphi - Delphi中的Ole初始化

> ID：15779680
> 
> 赞同：3
> 
> 时间：2013-04-03T05:41:47.880
> 
> 标签：delphi, twebbrowser

将 OleInitialization 调用添加到项目的主要形式有什么缺点吗？例如：

```
initialization
  OleInitialize(nil);
finalization
  oleuninitialize; 
```

（添加到应用程序的主窗体）似乎是允许将选定文本从 TWebBrowser（在另一个窗体上）复制到剪贴板的必要添加。但是我想知道根据我是否添加这些行，我的程序中是否会面临任何意想不到的后果？MSDN 对[OleInitialize](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690134%28v=vs.85%29.aspx)的描述表明对线程/并发模型有影响，但我并不完全理解这些差异的重要性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:27:12.310

这是来自 Embarcadero 的一篇文章，确认您确实需要调用 OleInitialize：[http ://edn.embarcadero.com/article/20468](http://edn.embarcadero.com/article/20468)

按照你的方式称呼它是没有问题的。这就是它的意思。

# odbc - 更好地理解 ODBC ODBC 驱动程序

> ID：15779682
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:41:54.207
> 
> 标签：odbc

如果我给出一个 sql 语句`'select * from"`，那么 ODBC 和 ODBC 驱动程序在获取数据方面的作用是什么，例如：datatable？

我还想知道为什么没有可用于所有 DMBS 的标准驱动程序？
是否有可能有一个标准的 ODBC 驱动程序可以在任何数据库引擎中无缝使用？不同的驱动程序在操作上是否存在很大差异？

即使我没有对该主题进行广泛的研究。在发布这篇文章之前，我做了一些谷歌搜索。此外，我必须在我的应用程序中使用单独的 DB ，因此我发现很难将每个驱动程序软件与它一起打包。这就是为什么我一直在寻找更好的理解

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:39:06.583

ODBC 的重点在于它提供了标准 API，使您可以编写应用程序，以便以后可以添加驱动程序（由用户添加，不必随应用程序一起提供）。驱动程序的作用是将标准的 ODBC api 映射到数据库特定的数据库 api/网络接口。所以不，所有数据库的标准驱动程序都会错过重点，您需要在元驱动程序下方再增加一层才能实际与数据库对话。

# java - hadoop程序在集群上运行错误

> ID：15779686
> 
> 赞同：0
> 
> 时间：2013-04-03T05:41:58.100
> 
> 标签：java, linux, unix, hadoop, mapreduce

我在执行并行文件索引的hadoop程序之后编写了

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class ParallelIndexation {
    //public static native long Traveser(String Path);

    //public static native void Configure(String Path);

    //static {
    //  System.loadLibrary("nativelib");
    //}
    public static class Map extends MapReduceBase implements
            Mapper<LongWritable, Text, Text, LongWritable> {
        private final static LongWritable zero = new LongWritable(0);
        private Text word = new Text();

        public void map(LongWritable key, Text value,
                OutputCollector<Text, LongWritable> output, Reporter reporter)
                throws IOException {
            Configuration conf = new Configuration();
            FileSystem fs = FileSystem.get(conf);
            Path localPath = new Path("/export/hadoop-1.0.1/bin/input/paths.txt");
            Path hdfsPath=new Path("hdfs://192.168.1.8:7000/user/hadoop/paths.txt");
            Path localPath1 = new Path("/usr/countcomputers.txt");                
            Path hdfsPath1=new Path("hdfs://192.168.1.8:7000/user/hadoop/countcomputers.txt");
            if (!fs.exists(hdfsPath))
            {
                fs.copyFromLocalFile(localPath, hdfsPath);
            };
            if (!fs.exists(hdfsPath1))
            {
                fs.copyFromLocalFile(localPath1, hdfsPath1);
            };          
            FSDataInputStream in = fs.open(hdfsPath);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String line = br.readLine();
            // String line = value.toString();
            BufferedReader br1=new BufferedReader(new InputStreamReader(fs.open(hdfsPath1)));
            int CountComputers;
            /* FileInputStream fstream = new FileInputStream(
                    "/usr/countcomputers.txt");

            BufferedReader br = new BufferedReader(new InputStreamReader(fstream)); */
            String result=br1.readLine();
            CountComputers=Integer.parseInt(result);
            // in.close();
            // fstream.close();
            ArrayList<String> paths = new ArrayList<String>();
            StringTokenizer tokenizer = new StringTokenizer(line, "|");
            while (tokenizer.hasMoreTokens()) {
                paths.add(tokenizer.nextToken());
            }
            String[] ConcatPaths = new String[CountComputers];
            int NumberOfElementConcatPaths = 0;
            if (paths.size() % CountComputers == 0) {
                for (int i = 0; i < CountComputers; i++) {
                    ConcatPaths[i] = paths.get(NumberOfElementConcatPaths);
                    NumberOfElementConcatPaths += paths.size() / CountComputers;
                    for (int j = 1; j < paths.size() / CountComputers; j++) {
                        ConcatPaths[i] += "\n"
                                + paths.get(i * paths.size() / CountComputers
                                        + j);
                    }
                }
            } else {
                NumberOfElementConcatPaths = 0;
                for (int i = 0; i < paths.size() % CountComputers; i++) {
                    ConcatPaths[i] = paths.get(NumberOfElementConcatPaths);
                    NumberOfElementConcatPaths += paths.size() / CountComputers
                            + 1;
                    for (int j = 1; j < paths.size() / CountComputers + 1; j++) {
                        ConcatPaths[i] += "\n"
                                + paths.get(i
                                        * (paths.size() / CountComputers + 1)
                                        + j);
                    }
                }
                for (int k = paths.size() % CountComputers; k < CountComputers; k++) {
                    ConcatPaths[k] = paths.get(NumberOfElementConcatPaths);
                    NumberOfElementConcatPaths += paths.size() / CountComputers;
                    for (int j = 1; j < paths.size() / CountComputers; j++) {
                        ConcatPaths[k] += "\n"
                                + paths.get((k - paths.size() % CountComputers)
                                        * paths.size() / CountComputers
                                        + paths.size() % CountComputers
                                        * (paths.size() / CountComputers + 1)
                                        + j);
                    }
                }
            }
            for (int i = 0; i < ConcatPaths.length; i++) {
                word.set(ConcatPaths[i]);
                output.collect(word, zero);
            }
            in.close();
        }
    }

    public static class Reduce extends MapReduceBase implements
            Reducer<Text, LongWritable, Text, LongWritable> {
        public native long Traveser(String Path);

        public native void Configure(String Path);

        public void reduce(Text key, Iterator<LongWritable> value,
                OutputCollector<Text, LongWritable> output, Reporter reporter)
                throws IOException {
            long count=0;
            String line = key.toString();
            ArrayList<String> ProcessedPaths = new ArrayList<String>();
            StringTokenizer tokenizer = new StringTokenizer(line, "\n");
            while (tokenizer.hasMoreTokens()) {
                ProcessedPaths.add(tokenizer.nextToken());
            }
            Configure("/export/hadoop-1.0.1/bin/nsindexer.conf");
            for (int i = 0; i < ProcessedPaths.size(); i++) {
                count = Traveser(ProcessedPaths.get(i));
            }
            output.collect(key, new LongWritable(count));
        }

        static {
            System.loadLibrary("nativelib");
        }
    }

    public static void main(String[] args) throws Exception {
        JobConf conf = new JobConf(ParallelIndexation.class);
        conf.setJobName("parallelindexation");
        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(LongWritable.class);
        conf.setMapperClass(Map.class);
        conf.setCombinerClass(Reduce.class);
        conf.setReducerClass(Reduce.class);
        conf.setInputFormat(TextInputFormat.class);
        conf.setOutputFormat(TextOutputFormat.class);
        FileInputFormat.setInputPaths(conf, new Path(args[0]));
        FileOutputFormat.setOutputPath(conf, new Path(args[1]));
        JobClient.runJob(conf);
    }
} 
```

我还尝试在 4 台机器上在集群上启动它，仅在 2 台上执行 Datanode 和 TaskNode 的恶魔。在程序启动之前，我将 /export/hadoop-1.0.1/bin/input/paths.txt 文件复制到 hdfs://192.168.1.8:7000/user/hadoop/paths.txt 和 /usr/countcomputers.txt 文件中在 hdfs://192.168.1.8:7000/user/hadoop/countcomputers.txt 通过命令

```
./hadoop fs -put /export/hadoop-1.0.1/bin/input/paths.txt /user/hadoop/paths.txt
./hadoop fs -put /usr/countcomputers.txt /user/hadoop/countcomputers.txt 
```

我还通过命令创建了文件夹

```
./hadoop fs -mkdir /export/hadoop-1.0.1/bin/input 
```

（我自己在集群计算机上启动了所有恶魔）。通过命令执行的结果

```
./hadoop jar ParallelIndexation.jar org.myorg.ParallelIndexation /export/hadoop-1.0.1/bin/input /export/hadoop-1.0.1/bin/output 1> resultofexecution.txt 2>&1 
```

我收到以下错误消息

```
13/04/02 13:15:48 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/04/02 13:15:48 INFO mapred.FileInputFormat: Total input paths to process : 0
13/04/02 13:15:49 INFO mapred.JobClient: Running job: job_201304012201_0015
13/04/02 13:15:50 INFO mapred.JobClient:  map 0% reduce 0%
13/04/02 13:15:58 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_m_000001_0, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:33 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:33 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:34 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_r_000002_0, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:34 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_m_000001_1, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:34 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_m_000001_2, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:34 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_m_000000_0, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:34 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:35 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_r_000001_0, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:35 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:35 WARN mapred.JobClient: Error reading task outputmyhost3
13/04/02 13:16:42 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_m_000000_1, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:42 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:42 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:48 INFO mapred.JobClient: Task Id : attempt_201304012201_0015_m_000000_2, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

13/04/02 13:16:48 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:48 WARN mapred.JobClient: Error reading task outputmyhost2
13/04/02 13:16:54 INFO mapred.JobClient: Job complete: job_201304012201_0015
13/04/02 13:16:54 INFO mapred.JobClient: Counters: 4
13/04/02 13:16:54 INFO mapred.JobClient:   Job Counters 
13/04/02 13:16:54 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=30679
13/04/02 13:16:54 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
13/04/02 13:16:54 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
13/04/02 13:16:54 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=8131
13/04/02 13:16:54 INFO mapred.JobClient: Job Failed: JobCleanup Task Failure, Task: task_201304012201_0015_m_000000
Exception in thread "main" java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265)
    at org.myorg.ParallelIndexation.main(ParallelIndexation.java:146)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

提示如何消除这些错误。这是文件`hadoop-hadoop-tasktracker-myhost2.log`和hadoop的内容- `hadoop-tasktracker-myhost3.log`（类似）

`hadoop-hadoop-tasktracker-myhost2.log`

```
2013-04-07 19:29:25,151 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304070459_0003_m_000001_1 task's state:UNASSIGNED
2013-04-07 19:29:25,151 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304070459_0003_m_000001_1 which needs 1 slots
2013-04-07 19:29:25,151 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304070459_0003_m_000001_1 which needs 1 slots
2013-04-07 19:29:25,239 INFO org.apache.hadoop.mapred.JobLocalizer: Initializing user hadoop on this TT.
2013-04-07 19:29:25,509 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304070459_0003_m_2012583632
2013-04-07 19:29:25,510 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304070459_0003_m_2012583632 spawned.
2013-04-07 19:29:25,512 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304070459_0003/attempt_201304070459_0003_m_000001_1/taskjvm.sh
2013-04-07 19:29:25,553 WARN org.apache.hadoop.mapred.DefaultTaskController: Exit code from task is : 126
2013-04-07 19:29:25,553 INFO org.apache.hadoop.mapred.DefaultTaskController: Output from DefaultTaskController's launchTask follows:
2013-04-07 19:29:25,553 INFO org.apache.hadoop.mapred.TaskController: 
2013-04-07 19:29:25,554 INFO org.apache.hadoop.mapred.JvmManager: JVM Not killed jvm_201304070459_0003_m_2012583632 but just removed
2013-04-07 19:29:25,554 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304070459_0003_m_2012583632 exited with exit code 126\. Number of tasks it ran: 0
2013-04-07 19:29:25,555 WARN org.apache.hadoop.mapred.TaskRunner: attempt_201304070459_0003_m_000001_1 : Child Error
java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)
2013-04-07 19:29:29,555 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-07 19:29:31,172 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304070459_0003_m_000001_2 task's state:UNASSIGNED
2013-04-07 19:29:31,173 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304070459_0003_m_000001_2 which needs 1 slots
2013-04-07 19:29:31,173 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304070459_0003_m_000001_2 which needs 1 slots
2013-04-07 19:29:31,210 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304070459_0003_m_1529309377
2013-04-07 19:29:31,212 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304070459_0003_m_1529309377 spawned.
2013-04-07 19:29:31,217 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304070459_0003/attempt_201304070459_0003_m_000001_2/taskjvm.sh
2013-04-07 19:29:31,278 WARN org.apache.hadoop.mapred.DefaultTaskController: Exit code from task is : 126
2013-04-07 19:29:31,279 INFO org.apache.hadoop.mapred.DefaultTaskController: Output from DefaultTaskController's launchTask follows:
2013-04-07 19:29:31,279 INFO org.apache.hadoop.mapred.TaskController: 
2013-04-07 19:29:31,280 INFO org.apache.hadoop.mapred.JvmManager: JVM Not killed jvm_201304070459_0003_m_1529309377 but just removed
2013-04-07 19:29:31,281 WARN org.apache.hadoop.mapred.TaskRunner: attempt_201304070459_0003_m_000001_2 : Child Error
java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)
2013-04-07 19:29:31,281 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304070459_0003_m_1529309377 exited with exit code 126\. Number of tasks it ran: 0
2013-04-07 19:29:34,281 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-07 19:29:37,186 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304070459_0003_m_000001_3 task's state:UNASSIGNED
2013-04-07 19:29:37,186 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304070459_0003_m_000001_3 which needs 1 slots
2013-04-07 19:29:37,187 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304070459_0003_m_000001_3 which needs 1 slots
2013-04-07 19:29:37,214 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304070459_0003_m_786434533
2013-04-07 19:29:37,215 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304070459_0003_m_786434533 spawned.
2013-04-07 19:29:37,218 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304070459_0003/attempt_201304070459_0003_m_000001_3/taskjvm.sh
2013-04-07 19:29:37,269 WARN org.apache.hadoop.mapred.DefaultTaskController: Exit code from task is : 126
2013-04-07 19:29:37,269 INFO org.apache.hadoop.mapred.DefaultTaskController: Output from DefaultTaskController's launchTask follows:
2013-04-07 19:29:37,270 INFO org.apache.hadoop.mapred.TaskController: 
2013-04-07 19:29:37,270 INFO org.apache.hadoop.mapred.JvmManager: JVM Not killed jvm_201304070459_0003_m_786434533 but just removed
2013-04-07 19:29:37,271 WARN org.apache.hadoop.mapred.TaskRunner: attempt_201304070459_0003_m_000001_3 : Child Error
java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)
2013-04-07 19:29:37,272 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304070459_0003_m_786434533 exited with exit code 126\. Number of tasks it ran: 0
2013-04-07 19:29:41,271 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-07 19:29:43,203 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304070459_0003_m_000000_0 task's state:UNASSIGNED
2013-04-07 19:29:43,203 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304070459_0003_m_000000_0 which needs 1 slots
2013-04-07 19:29:43,203 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304070459_0003_m_000000_0 which needs 1 slots
2013-04-07 19:29:43,203 INFO org.apache.hadoop.mapred.TaskTracker: Received KillTaskAction for task: attempt_201304070459_0003_m_000001_3
2013-04-07 19:29:43,222 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304070459_0003_m_79286369
2013-04-07 19:29:43,223 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304070459_0003_m_79286369 spawned.
2013-04-07 19:29:43,225 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304070459_0003/attempt_201304070459_0003_m_000000_0/taskjvm.sh
2013-04-07 19:29:43,266 WARN org.apache.hadoop.mapred.DefaultTaskController: Exit code from task is : 126
2013-04-07 19:29:43,266 INFO org.apache.hadoop.mapred.DefaultTaskController: Output from DefaultTaskController's launchTask follows:
2013-04-07 19:29:43,266 INFO org.apache.hadoop.mapred.TaskController: 
2013-04-07 19:29:43,267 INFO org.apache.hadoop.mapred.JvmManager: JVM Not killed jvm_201304070459_0003_m_79286369 but just removed
2013-04-07 19:29:43,267 WARN org.apache.hadoop.mapred.TaskRunner: attempt_201304070459_0003_m_000000_0 : Child Error
java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)
2013-04-07 19:29:43,268 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304070459_0003_m_79286369 exited with exit code 126\. Number of tasks it ran: 0
2013-04-07 19:29:47,268 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-07 19:29:49,219 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304070459_0003_r_000001_0 task's state:UNASSIGNED
2013-04-07 19:29:49,219 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304070459_0003_r_000001_0 which needs 1 slots
2013-04-07 19:29:49,219 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304070459_0003_r_000001_0 which needs 1 slots
2013-04-07 19:29:49,239 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304070459_0003_r_383744348
2013-04-07 19:29:49,240 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304070459_0003_r_383744348 spawned.
2013-04-07 19:29:49,241 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304070459_0003/attempt_201304070459_0003_r_000001_0/taskjvm.sh
2013-04-07 19:29:49,265 WARN org.apache.hadoop.mapred.DefaultTaskController: Exit code from task is : 126
2013-04-07 19:29:49,265 INFO org.apache.hadoop.mapred.DefaultTaskController: Output from DefaultTaskController's launchTask follows:
2013-04-07 19:29:49,266 INFO org.apache.hadoop.mapred.TaskController: 
2013-04-07 19:29:49,266 INFO org.apache.hadoop.mapred.JvmManager: JVM Not killed jvm_201304070459_0003_r_383744348 but just removed
2013-04-07 19:29:49,266 WARN org.apache.hadoop.mapred.TaskRunner: attempt_201304070459_0003_r_000001_0 : Child Error
java.io.IOException: Task process exit with nonzero status of 126.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)
2013-04-07 19:29:49,267 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304070459_0003_r_383744348 exited with exit code 126\. Number of tasks it ran: 0
2013-04-07 19:29:52,267 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-07 19:30:16,294 INFO org.apache.hadoop.mapred.TaskTracker: Received 'KillJobAction' for job: job_201304070459_0003
2013-04-07 19:30:16,299 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304070459_0003 for user-log deletion with retainTimeStamp:1365474616294 
```

# php - jQuery没有在选择上加载数据

> ID：15779687
> 
> 赞同：1
> 
> 时间：2013-04-03T05:42:00.103
> 
> 标签：php, javascript, jquery

我有一个主要的 PHP 页面，它使用 jQuery 加载用户可以执行的操作的不同页面。

![主页](https://i.stack.imgur.com/96zbK.png)

这是用户做所有事情的地方。它有一个 jQuery 脚本，当您单击橙色元素时`<p>`。

当您单击“Solicitar Software”时，jQuery 会加载“solicitudes.php”。这个 php 页面有它自己的脚本。

![在此处输入图像描述](https://i.stack.imgur.com/x78V4.png)

当“solicitudes.php”页面加载时，它的 PHP 脚本运行。

```
require('conexion.php');
$conexion = new connection();

$query = "SELECT * FROM Carreras";
$resultado = mysql_query($query, $conexion -> conn) or die('ERROR:' .$query);

?> 
```

该脚本加载数据库中的所有职业并将它们添加到`<select>`您可以看到的：

![在此处输入图像描述](https://i.stack.imgur.com/DQCBt.png)

问题就在这里，当我点击一个carrer时，它不会加载与职业相关的列表主题。但是，如果我单独访问 PHP 文件，它运行良好。

![在此处输入图像描述](https://i.stack.imgur.com/OzwfE.png)

这是jQuery代码：

```
$(document).ready(function() {
    $("#carrera").change( //Select a carrer
        function()
        {
                var carreraId = $('#carrera option:selected').val();
                var queryMaterias = "carreraid=" + carreraId + "&valor=" + $("#valor").val();

                jQuery.ajax({
                  url: 'acciones.php',
                  type: 'GET',
                  dataType: 'text',
                  data: queryMaterias,
                  success: function(data) 
                  {
                    $("#lmateria").empty();
                    $("#lmateria").append(data); //Add subjects to the <select>
                    // $("#lmateria").html(data);
                  },
                  error: function(xhr, textStatus, errorThrown) {
                    //called when there is an error
                    alert(errorThrown);
                  }, 
                });

        }
);
}); 
```

难道我做错了什么？可能是什么问题？谢谢您的帮助。

主页：

```
<html>
        <head>
        <meta charset="utf-8">
        <title>Sistema de Administración</title>
        <link rel="stylesheet" type="text/css" href="//necolas.github.com/normalize.css/2.1.0/normalize.css">
        <link rel="stylesheet" type="text/css" href="css/administrador.css">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript" src="scripts/administrador.js"></script> 

    </head>
    <body>

    <div id="acciones">
        <p id="logo">
            <img src="images/logo1.jpg" alt="logo">
        </p>
        <p id="division">Agregar Division</p>
        <p id="carrera">Agregar Carrera</p>
        <p id="materia">Agregar Materia</p>
        <p id="software">Agregar Software</p>
        <p id="profesor">Agregar Profesor</p>
        <p id="ssoftware">Solicitar Software</p>
        <p id="solicitudes">Lista de Solicitudes</p>
        <center><input type="button" id="logout" value="Salir" onclick="window.location.href='acciones.php?valor=5'"></center>
    </div>
    <div id="resultado">

    </div>

</body>
</html> 
```

jQuery 在`<div> resultado`.

Solicitud.php：

```
<!doctype html>

<?php  

require('conexion.php');
$conexion = new connection();

$query = "SELECT * FROM Carreras";
$resultado = mysql_query($query, $conexion -> conn) or die('ERROR:' .$query);

?>

<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/solicitud.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/solicitud.js"></script> 

</head>

<body>
    <header>
        <h2>Solicitud de Software</h2>
    </header>
    <form action="acciones.php" id="solicitud" method = "GET">
        <select name="carrera" id="carrera">
            <option value="">Seleccione una carrera</option>
            <?php 
                while ($datos = mysql_fetch_assoc($resultado)) #MUESTRA LOS ROLES
                            { 
            ?>
                <option value="<?php echo $datos['id'];?>"><?php echo utf8_encode($datos['Carrera']);?></option>
            <?php 
                            }
            ?>
        </select>

        <select name="materias" id="lmateria">
            <option value="">Potato</option>
        </select>

        <!-- <input type="text" placeholder="Nombre" id="nombre" name="nombre">
        <input type="text" placeholder="Codigo" id="codigo" name="codigo">
        <input type="button" value="Agregar" id="enviar"> -->
        <input type="hidden" id="valor" name="valor" value='17'>
    </form>
    <h3 id="exito">Agregado!</h3>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:10:11.690

在没有看到 HTML 的情况下，我不确定这是否 100% 正确，但应该为您指明正确的方向：

```
$(document).ready(function() {
    $("#carrera").change(function() {
        jQuery.ajax({
            url: 'acciones.php',
            type: 'GET',
            dataType: 'text',
            data: {
                carreraid: $('#carrera').val(),//possibly?
                valor: $("#valor").val()
            },
            success: function(data) {
                //In my experince, this is the safe way to replace (or append) options.
                $("#lmateria").find("option").each(function(i, opt) {
                    $(this).remove();
                });
                //Wrap in <select>...</select> only if not already included in data.
                $("<select>" + data + "</select>").find("option").each(function(i, opt) {
                    $("#lmateria").append(opt);
                });
            },
            error: function(xhr, textStatus, errorThrown) {
                //called when there is an error
                alert(errorThrown);
            }, 
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:48:13.853

这可能很愚蠢……这一直是我的错误。

我有 2 个名为“carrera”的元素，所以 jQuery 不知道该怎么做。只是改变它，它的工作。

在 Main 上，我有一个名为“carrera”的元素，而在“Solicitud.php”上，我有另一个元素，这就是为什么它在一个页面上工作而不在另一页面上工作的原因。

谢谢大家！。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:10:36.033

尝试在 ajax 调用中使用绝对 url。`url: '/path/to/acciones.php'`

# android - android中的外部存储问题

> ID：15779690
> 
> 赞同：1
> 
> 时间：2013-04-03T05:42:13.093
> 
> 标签：android, android-sdcard

我正在使用路径`"/mnt/sdcard/myfolder/myfile"`将我的文件存储在 android 应用程序中。当应用程序在没有任何 sdcard 插槽的手机（像 Nexus S 的手机）上运行时，它会给出任何错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T05:45:42.623

您必须检查外部存储是否可用

```
private static boolean isExternalStorageAvailable() {
    String extStorageState = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(extStorageState)) {
        return true;
    }
    return false;
} 
```

[演示](http://niravranpara.blogspot.in/2013/03/android-internal-and-external-storage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:49:45.953

请检查此[链接](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)：

```
boolean mExternalStorageAvailable = false;
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    mExternalStorageAvailable = mExternalStorageWriteable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    mExternalStorageAvailable = true;
    mExternalStorageWriteable = false;
} else {
    // Something else is wrong. It may be one of many other states, but all we need
    //  to know is we can neither read nor write
    mExternalStorageAvailable = mExternalStorageWriteable = false;
} 
```

# asp.net-mvc-3 - MVC3—麻烦绑定复杂模型

> ID：15779691
> 
> 赞同：0
> 
> 时间：2013-04-03T05:42:13.680
> 
> 标签：asp.net-mvc-3, asp.net-ajax, model-binding, asp.net-mvc-viewmodel

我需要用地址的**IList**更新公司类。这些是我的数据模型。

```
// Entity class Company — managed by Nhibernate
public class Company
{
  public virtual IList<Address> _addresses { get; set; }

  public Company()
  {
    _addresses = new List<Address>();
  }
}

// Entity class Address — managed by Nhibernate
public class Address
{
  public virtual string line1 { get; set; }
  public virtual string line1 { get; set; }
} 
```

我将数据从 Entity 类打包到控制器的 GET 操作中的 Viewmodel 中，并且我将 Viewmodel 中的数据解包回控制器的 POST 操作中的 Entity 类。

这是我的视图模型。

```
// Class CompanyRequest
public class CompanyRequest
{
  public IList<AddressRequest> AddressRequests;
}

//Class AddressRequests
public class AddressRequest
{
  public string line1 { get; set; }
  public string line1 { get; set; }
} 
```

我正在使用局部视图来显示每个地址框。对于 AddressRequests 中的每个**AddressRequest**，**我**将对象传递给具有正确设置前缀的局部视图。

 **```
for(var i = 0 ; i < AddressRequests.Count() ; i++)
{
  ViewData["Prefeix"] = String.Format("AddressRequests[{0}]", i);
  Html.RenderPartial("_addressPartial", AddressRequests[i]);
} 
```

我需要能够添加“**添加新地址**”按钮，以便用户可以将新地址添加到此列表中。这必须在不刷新页面的情况下完成。当用户单击该按钮时，会出现另一个地址框（我猜是相同的部分）。然后用户编辑该框并按下“**保存**”按钮。这个保存按钮应该保存整个*公司*数据，而不仅仅是*地址*。

有没有办法做到这一点？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:08:51.790

答案是您使用客户端技术（即[javascript](http://en.wikipedia.org/wiki/JavaScript) ）在 UI 中动态加载附加地址，然后在数据准备好保存时通过[ajax 技术](http://www.w3schools.com/ajax/ajax_intro.asp)将数据传回服务器端进行处理。

有很多 javascript 库可以执行 ajax 请求。我更喜欢[jQuery 库](http://jquery.com/)。

这里有一些关于如何使用 mvc 执行 ajax 的文章：

*   [http://codebetter.com/petervanooijen/2010/01/18/why-choose-between-ajax-or-mvc-together-they-kiss-so-sweet/](http://codebetter.com/petervanooijen/2010/01/18/why-choose-between-ajax-or-mvc-together-they-kiss-so-sweet/)
*   [在 MVC 4 中使用 $.ajax 发出 AJAX 请求](https://stackoverflow.com/questions/13019778/make-an-ajax-request-using-ajax-in-mvc-4)
*   [http://weblogs.asp.net/srkirkland/archive/2009/09/08/using-jquery-ajax-methods-in-asp-net-mvc-get-and-getjson-vs-post.aspx](http://weblogs.asp.net/srkirkland/archive/2009/09/08/using-jquery-ajax-methods-in-asp-net-mvc-get-and-getjson-vs-post.aspx)

当然：[http ://bit.ly/XWYE5P](http://bit.ly/XWYE5P)**

# android - Android - 使用 layoutparams 调整父视图和子视图的大小

> ID：15779692
> 
> 赞同：1
> 
> 时间：2013-04-03T05:42:15.250
> 
> 标签：android, android-layout, zooming, android-view, layoutparams

您好，我有一个可以调整大小的自定义视图，并且视图中有很多子视图

我想问的是如何使用布局参数一起调整父母和孩子的大小？怎么做？我已经尝试使用它来获取视图的宽度，`view.getWidth`但`view.getHeight`它总是返回零，所以我无法缩放它，以及如何调整子视图的大小与父视图相同？

我希望我的问题足够清楚，但如果您需要其他解释，请将其留在评论中，我将编辑我的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:46:22.143

```
private void resizeChildren(ViewGroup parent, int newWidth, int newHeight) {
    // size is in pixels so make sure you have taken device display density into account
    int childCount = parent.getChildCount();
    for(int i = 0; i < childCount; i++) {
        View v = parent.getChildAtIndex(i);
        if (v instanceof ViewGroup) {
            ((ViewGroup)v).LayoutParams = new ViewGroup.LayoutParams(newWidth, newHeight);
        }
    }
} 
```

当父级的边界发生变化时调用上述方法并将父级传递给它。所有属于`ViewGroup`类型的子项都将调整大小。如果需要，您也可以在每个孩子身上递归地调用它。在调整孩子的大小后，您可能需要调用`requestLayout()`父母。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T06:58:08.233

使用此代码，您可以使用 LayoutParams ...

```
LinearLayout header;
LinearLayout.LayoutParams headerParam;

header = (LinearLayout) findViewById(R.id.topheaderimage);
headerParam = new LinearLayout.LayoutParams(200, 100);
TextView headertext = (TextView) findViewById(R.id.text);
header.addView(headerimage, headerParam); 
```

# scala - 类型与包含位运算符的 If 语句不匹配

> ID：15779694
> 
> 赞同：0
> 
> 时间：2013-04-03T05:42:20.543
> 
> 标签：scala, types, bitwise-operators, type-mismatch

我是 scala 的新手，但我遇到了以下代码的问题：

```
var c:Int = 0
var j:Int = 0

for( c <- 0 to 100){
  for( j <- 0 to 100){

   /* Check if jth bit in c is set,
    if( (c & (1<<j)) )  // this line is the line where i get the error
    xs :+ (ys(j))   // this is copying element j from list ys to list xs     
  }
} 
```

我得到的错误是：类型不匹配；找到：需要 Int：布尔值

代码 `(c & (1<<j))` 应该将 1 左移 j 位，然后将结果按位与变量 c 中的 int 相乘以获得布尔结果。

我完全有可能做错了什么。我学习 Scala 已经 3 天了，我对我的 java 非常生疏。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:47:49.423

Scala 中的按位运算（实际上在任何语言中）都会返回 type 的结果`Int`，您的 if 表达式需要`Boolean`. Scala 不会`Boolean`像 C 那样处理值，您的代码可以正常工作。

`Boolean`您可以通过显式测试来使您的表达式返回 a `1`：

```
if((c & (1 << j)) != 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:52:41.803

与 C（或 C++）不同，Scala 的`if`语句（就像 Java）只接受一个`Boolean`表达式，并且没有从整数类型到`Boolean`. 所以你需要明确你想要什么，并替换`if( (c & (1<<j)) )`为`if( (c & (1<<j)) != 0)`

# asp.net-mvc - 出现错误：“指定的包含路径无效。EntityType 字段'未声明导航属性”

> ID：15779701
> 
> 赞同：1
> 
> 时间：2013-04-03T05:42:42.727
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

创建方法：

```
 public List<Field> GetScheduleDetails()
 {    
     var schedulefields = DBcontextFactory.Context.Set<Field>).Include("ScheduleField").ToList();
 } 
```

使用上述方法，我试图从两个表中获取所有加入的（field.fieldid=schedulefield.fieldid）记录。字段表与 schedulefield 表相关。抱歉，如果我不熟悉技术术语。

现场型号：

```
public partial class Field : DOIEntity
{

    public Field()
    {
        this.FilerResponses = new HashSet<FilerResponse>();
        this.ScheduleFields = new HashSet<ScheduleField>();
    }

    public int FieldId { get; set; }
    public string FieldDisplayName { get; set; }
    public int FieldTypeId { get; set; }
    public string HelpText { get; set; }
    public Nullable<bool> OtherTextAllowed { get; set; }
    public Nullable<int> ChoiceGroupId { get; set; }

    public virtual FieldType FieldType { get; set; }
    public virtual ICollection<FilerResponse> FilerResponses { get; set; }
    public virtual ICollection<ScheduleField> ScheduleFields { get; set; }
} 
```

ScheduleField 模型：

```
public partial class ScheduleField
{

    [Key]
    public int ScheduleId { get; set; }
    public int FieldId { get; set; }
    public byte SortOrder { get; set; }
    public Nullable<bool> IsMandatory { get; set; }
    public Nullable<int> ParentFieldId { get; set; }
    public Nullable<int> ParentChoiceId { get; set; }

    public virtual Field Field { get; set; }
    public virtual Schedule Schedule { get; set; }
} 
```

当我调用该方法时，我收到此错误：

> 指定的包含路径无效。EntityType 'WorldBank.DOI.Data.Field' 没有声明名为 'ScheduleField' 的导航属性。

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T15:27:45.233

您必须在 Include 字符串中使用 Field 类的属性名称：

```
public List<Field> GetScheduleDetails()
{    
     var schedulefields = DBcontextFactory.Context.Set<Field>).Include("ScheduleFields").ToList();
} 
```

这将急切加载与 Field 对象关联的 ScheduleField 对象。

请注意，您还可以预先加载多个级别。例如，如果您想预先加载 ScheduleField 对象的时间表，您可以这样做：

```
public List<Field> GetScheduleDetails()
{    
   var schedulefields = DBcontextFactory.Context.Set<Field>).Include("ScheduleFields.Schedule").ToList();
} 
```

# ruby-on-rails - 列出 Rails 2 项目中的路线

> ID：15779702
> 
> 赞同：1
> 
> 时间：2013-04-03T05:42:44.687
> 
> 标签：ruby-on-rails, routing

如何在 rails 2 项目中以编程方式获取路线列表。在 Rails 3 项目中， `Rails.application.routes.routes`做了我想做的事。但是当我在 Rails 2 网站上尝试这个时。它失败并显示消息`No application method defined on Rails object`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:54:01.557

你可以在下面查看 rake routes 任务的代码

```
/gems/rails/2.3.x/lib/tasks/routes.rake for Rails 2\. 

ActionController::Routing::Routes.routes 
```

更详细地查看 rake 任务以获得更好的想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:53:43.167

你可以试试，

```
rake routes 
```

这给出了所有的路线

更新：

或开`Rails 3+`

```
bundle exec rake routes 
```

# c# - 在c#中使用http post发送文件

> ID：15779704
> 
> 赞同：1
> 
> 时间：2013-04-03T05:42:47.157
> 
> 标签：c#, .net, http-post

我正在用 c# 处理文件发布。我使用 ajax 从客户端发布了一个文件，代码如下

```
<script type="text/javascript">
  function send() {
    var fd = new FormData();
    fd.append("fileToUpload", document.getElementById('filecontrol').files[0]);
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "getFile.aspx");
    xhr.send(fd);
      }
</script>
<input type="file" id="filecontrol" />
<input type="button" onclick="getFile()" value="Upload File" /> 
```

在服务器端，我使用代码检索了该文件，

```
 HttpPostedFile hpf = Request.Files[0]; 
```

我需要使用 http post 将此文件发送到另一个域。是否可以使用 http post 发送该 hpf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:14:56.707

我认为你应该能够做到这一点。有很多方法可以做到这一点。这是[使用 HTTPWebrequest (multipart/form-data) 上传文件的链接](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

# php - 将多个条目从同一表单插入到表中

> ID：15779708
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:42:56.970
> 
> 标签：php, mysql, database, insert

这是我的表格，很简单。我有 3 个文本字段，将在其中输入问题，我想将其中的每一个都放入数据库中。

**questFormtest.php：**

```
<html>
<head><title> Test Quest</title></head>
<body>
<form id= "qform" method="post" action="quest.php">
<h3>Enter Questions</h3><br><br>
<h3>Question 1: Five marks each.<br></h3>

    a) <input type="text" name="field1[][field1]" size=45>* <br><br>
    b) <input type="text" name="field1[][field1]" size=45>* <br><br>
    c) <input type="text" name="field1[][field1]" size=45>* <br><br>

<p><input  type="submit" name="submit" value="Submit" align="center" />
<input type='reset' name='Cancel' value='Cancel' /></p>
</form>
</body>
</html>

My php file is as follows: 
```

**任务.php：**

```
<?php
include('connectionfile.php');
$cnt = count($_POST['field1']);

if ($cnt > 0) {
    $insertArr = array();
    for ($i=0; $i<$cnt; $i++) {
        $insertArr[] = "('" .$_POST['field1'][$i]. "')";
    }

    $query = "INSERT INTO paper (field1) VALUES " . implode(", ", $insertArr);
    mysql_query($query) or trigger_error("Insert failed: " . mysql_error());
}

mysql_close($id_link);
?> 
```

当我运行该文件时，它给了我以下错误：

```
Insert failed: Unknown column 'field1' in 'field list' in quest.php on line 15 
```

有人可以告诉我查询中是否有错误以及如何解决？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:21:13.770

发布的值在此索引中：$_POST['field1'][$i]['f​​ield1']。因此，您在 for 循环中使用此代码： $insertArr[] = "('" .$_POST['field1'][$i]['f​​ield1']. "')" ；

# ruby - http_request.set_form_data ：获取 json 参数的字符串的未定义方法映射

> ID：15779713
> 
> 赞同：2
> 
> 时间：2013-04-03T05:43:16.263
> 
> 标签：ruby, json, http, jruby, net-http

我正在尝试将 json 表示传递给 set_form_data 并遇到以下错误：

```
undefined method `map' for "{\"first_name\":\"bill\",\"last_name\":\"gates\"}":String 
```

这是我创建请求的方式：

```
 Net::HTTP::Post.new(uri.request_uri).set_form_data({"first_name" => "steve","last_name" => "jobs"}.to_json) 
```

有什么我想念的吗？

错误来自以下行：

```
/jruby/jruby-1.6.2/lib/ruby/1.9/net/http.rb:1593:in `set_form_data' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:00:33.230

我使用了，`request.body=form_data`而不是`request.set_form_data`并且有效。
但是我不确定为什么`set_form_data`不起作用。

将此标记为答案，因为这是迄今为止对我有用的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:58:09.640

[set_form_data](http://apidock.com/ruby/Net/HTTPHeader/set_form_data)想要一个哈希，而不是一个 json，所以跳过`to_json`它应该会更好。

IE：

```
some_data = {:foo => :bar, :meh => :muh}
Net::HTTP::Post.new(uri.request_uri).set_form_data(some_data) 
```

# c++ - 警告 LNK4217 和错误 LNK2022

> ID：15779719
> 
> 赞同：0
> 
> 时间：2013-04-03T05:43:33.457
> 
> 标签：c++, windows, visual-studio-2010

我收到链接器警告

`warning LNK4217: locally defined symbol lzma_check_is_supported imported in function "void __cdecl parse_real(struct args_info *,int,char * *)" (?parse_real@@YAXPAUargs_info@@HPAPAD@Z)`

`lzma_check_is_supported`函数存在于另一个目录中的某个其他 .cpp 文件中。`parse_real`存在于不同的一个。我`-I../src/common`在编译源代码时给出了路径（其中包含此函数的定义）。但是，它似乎不起作用并且应用程序崩溃。

此外，如果我将代码粘贴到`lzma_check_is_supported`包含应用程序崩溃的文件中`parse_real`，但这次崩溃发生得更远一些（在 windbg 中看到了这一点）。

我猜测链接器无法使用函数定义，因此它可能正在导入。起初，我忽略了这个警告，但后来我发现这是主要问题。

MSDN [http://msdn.microsoft.com/en-us/library/aa3se25k(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa3se25k(v=vs.80).aspx)说用`/clr`. 但后来我得到`error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: lzma_coder_s; fields: <alignment member>): (0x04000003).`

我提到了其他帖子说要删除调试文件夹并重新构建（不起作用）。我只想解决链接器警告。我通过使用`/clr`标志编译是否正确？

如果是，那么我该如何修复元数据错误？

谢谢

# javascript - 使用css在div中仅显示图像的一部分

> ID：15779722
> 
> 赞同：3
> 
> 时间：2013-04-03T05:43:56.737
> 
> 标签：javascript, html, css, image

**我所拥有的：**
我有一个宽度为 200 像素 X 200 像素的 div，
其中的图像大小为 400 像素 X 400 像素。

**我想要做什么：**
我只想在 div 中显示图像的一部分是否可以仅使用 css.If 不？那么其他方法是什么
（注意：我不想将图像设置为div的背景）

**到目前为止我所做的：**
小提琴：http: [//jsfiddle.net/5Hbr3/1/](http://jsfiddle.net/5Hbr3/1/)

```
<div id="sample">
    <img src="image.jpg" /> 
</div> 
```

我想显示从 100,100 到 300,300 的图像。
滚动条应该消失。
任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T05:47:25.673

`position: relative`在父元素和`position: absolute`子图像上使用。

```
#sample {
  width: 200px;
  height: 200px;
  overflow: hidden;
  position: relative;
  border: 1px solid black;
}

#sample img {
  position: absolute;
  top: -100px;
  left: -100px;
}
```

```
<div id="sample">
  <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBg8PDw8QEBQREA8PEBAQEA8NDhAQEA4PFRAVFBgQEhQXHSYfFxkjGRISHy8gIycpLiwtFR8xNTAqNSYrLCkBCQoKDgwOGg8PGiwkHiUsLSkuLCktLCwsLSoqKSwsLS0tLCwsLCwsKSksLCwsKSksLCksLCwsLiksKS0sKSwsLP/AABEIAOEA4QMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAAAwECBAUGBwj/xABAEAACAQICBwQHBgQFBQAAAAAAAQIDEQQSBQYTITFBUWFxgZEiMkJSobHBBxQVI1NyM2LR8EOCkqLhY3ODk/H/xAAbAQABBQEBAAAAAAAAAAAAAAAAAQIEBQYDB//EADMRAAIBAwEEBwgDAAMAAAAAAAABAgMEETEFEhMhIkFRYXGBkQYyUqGx0eHwFELBFSPx/9oADAMBAAIRAxEAPwD3EAAAAAAAAAAFG7b3uS5vkc1pjXmhRvGj+dUW66dqcX2y5+A2U4xWWdaVGpWe7BZOmNTj9acJQupTUpL2aXpv4bl4s890nrFicTfaTeX9OHow8UuPjc11yHO6+FF3R2P11ZeS+52mL+0N8KVJLpKrK7/0r+pqcRrjjJ/4igulOEV8XdmhzDMR5VpvrLOFhbw0ivPn9TPq6YxEvWq1X/5Jf1MeWIk+MpPvk2QZhmOe82SVTitEidV5J3UpJ9VJ3J6elq8fVq1V3VJf1MHMMwZYOnF6o3mH1uxkP8RyXSpGMvjxNrhPtCqK21pRkubpycX5O/zOOzDMPVaa0ZGnY0J6wXly+h6dgNcMJWss+zk/ZrLL8eHxN1GSaut6fBremeL3M3R2mq+Hd6U5RXuN3g/8r3EiF0/7Ira2x1rSl5P7nrgOT0Rr9SnaOIWyl+pHfTffzj8TqqdRSSlFqUXvTi7prsZMhOM1lMpa1vUovE1guAA84AAAAAAAAAAAAAAAAADA0xpujhIZqst79WC3zm+iX14GBrPrXTwccsbTryV4w5RXvT6Ls5nmeNx9SvN1KsnOcuLfLsS5LsI1auoclqW1js2Vfpz5R+b/AHtNrpzWuvi203s6PKlB7n+9+18jT5iPMMxXSk5PLNTTowpR3YLCJMwzEeYZho/BJmGYjzDMAYJMwzEeYZgDBJmGYjzDMAYJMwzEeYZgDBJmGYjzDMAYJMxstD6xV8JL8uV4N+lSnvhLu919qNTmGYcm4vKGzpRqR3ZLKPW9B6yUMZH0HlqJelSl6y7V1XajbHiNDEypyU4NxnF3jKLs0z0bVXXKOJtSrWhiOT4Rrd3SXZ5FhRuFLlLUzF9sx0enT5x+a/B1AAJRTAAAAAAAAAAA5/WzWmOCp5YWliJr0IvhBcNpLs7OZnawachg6Eqs979WnC++pN8I93N9iPHsdj516k6tR5pzd2/kl0SI1etuLC1LjZlh/Ilvz91fN/btK18RKpKU5tynJ3lKT3t9SzMR5hmK01yjjkiTMMxHmGYBcEmYZiPMMwBgkzDMR5hmAMEmYZiPMMwBgkzDMR5hmAMEmYZiPMMwBgkzDMR5hmAMEmYZiPMMwBgkzCM2mmm000007NNc0R5hmAMHp2pmtv3lKhWa+8RXoy4baK5/uXPzOrPCKVeUJRnBuMotSjKO5xkuDR63qnrHHG0buyrU7RqxXXlNdj/qixt6290ZamT2ps/gvi010Xr3P7G8ABKKQAAABSUkk29yW9t8kVOY150vsqKoxdp1r5rcVSXHze7zGTmoRcmc6k1Ti5M4vXTSzxdVzi3sqV4048nHnO3V2v3HNqZt7GnxVLJJrlxXd0Kffc22y99mtpcaLtqj5rmvDrXk/k+4uzDMRKZXMBscEmYZiPMMwBgkzDMR5hmAMEmYZiPMMwBgkzDMWQbk8qvKXuxV35Iy6OiMVP1aFd99CpH5oVJvQbKUY+88GPmGYzXq/jF/gVv/AFsjehsT+lU8YjJTjD3njxGqrTekl6oxswzGT+D4n9KfkPwfE/pT8hnHp/EvVC78PiXqY2YZjJ/B8T+lPyH4Pif0p+Qcen8S9UG/D4l6mNmGYyfwfE/pT8h+D4n9KfkHHp/EvVBvw+JepjZhmMn8HxP6U/Ifg+J/Sn5Bx6fxL1Qb8PiXqY2Y2GgtNzwdeFaN2luqQX+JTfGPfzXaiD8HxP6U/Ifg+J/Sn5Cq4pp5Ul6oZPhTi4yaw+89wwuJhVhCpBqUJxUoyXNNXJTh/s4xleEZ4WtCcYr06MpLdv8AWp/JrvfQ7guqNWNWG9F5MHdUOBVcM57H3AAHUjlGzyjT2knicRUqezfLD/tx3Lz4+J6BrbpDYYSo1ulP8uPfLi/K55eV15PSHmVd/U0gvEGNjsPnhu9aO9f08TJBATwQ7a4nbVY1qeqef3xOdUy9TJdJ0Mk7r1Z7+6XNfXzMPMdtT2O0uYXNGNaGjX6vLQyMwzESmVzCEzBJmGYjzG71Y1ZqY2d3eFCD9Opzk/ch29vIdGLk8I5VakKMHObwkYejNF1sVPJRjma9aT3Qh2yly+Z3Gifs+o07SxEnWn7qvCkuy3GXi/A6TAYClQpxp0oqEI8Eub5tvm31ZiY/T1OleMfTmuSforvZZUbTuyzG322qk8qD3Y/N/vcZuGwdOkstOEIJcoRUfkTNnJYjTdaftZV0hu+PEw5Vm+Lb73cs42j62Zyd5l518TuEyk6afFJ96OHVS3D4GVQ0tWhwm7dJPMviJOyysZz4iRu1nmjo62jIv1fRfTijX1qMoO0lb5PuJMFrHGVlUWR+8vV8ehtpwjNb7NP+7ozG0PZ+lUy6a3JfJ+X29C0oXvflfM0QJ8XhHTfWL4P6MgMJWozoTdOosNFtGSksoAqosqqZxyOLQSKmiqQmQI1FlVTJAJkUrReSUZLjFpo66lUUoqS4SSaOQN9oKvmpuPOD+D/tmo9nLrdqyoPR814r7r6EG8hmKl2GzABtysOG+0bGenQorglKpJdreWPyl5nHXNvrlic+OrdIZaa8Iq/xbNMmUtd71Rsz9zLeqyf7yL7lSy5dc4nAixWHVSDi+fB9HyZzbum09zTs10Z1NzT6cwtmqq4O0Z9/KX08h8H1Gw9l9o8Kq7Wb5S5rul2ef1Xea7MXqZBcXOh6MuRtdC6Kni68KEN2bfOf6dNcZfFJdrR7FgcDToU4UqSywgrJfVvm3xbOZ+zjQ6pYZ4iS/MxNmuyjG+VeN3LxXQ2usulNjTUIu06l1dcYw5v6FnaUW8drMRtu/wCJUcE+jH5vr+y/Jh6c09dulSdkt05rm/dT6dpos5jZxtDQQpqCwjHTqObyzJ2gzmNtBtB+BmTJ2g2hjbQbQMBkydobLRGnJUXlld0nxXFw7Y/0NJtBtBsoKSwx0ZuLyj0dqNSPKUZK6a4NdUaurRyNry7UYGqmld7oSfG8qd/jH6+ZvcfSvHNzj8jE+0OzeJSc0ulHn4x6/v8A+mhsbjOOx/U14APOi6AAAAAAAGw0JVy1be+mvFb/AKM15LhamWpCXSS8rkywq8G5pz7GvR8n8jnVjvQaOsAB6oUR43petnxOIl1rVH/vZiplK0rzk+spfMpco5c2ZuXNtl6ZVMsTKpjBpJcpUgpRcXvTTTXYUTKpiCxk4tSjqjl8RRdOcoPjF8eq5MpRoOpOFOO6VScKafRzkop/E3GmsLmhnXrQ425w5+XHzINUaSnpDBxe9bZS8YRlNfGKJEOlg9b2dtNXdnx/7RT3l3pf7qj2jD0FThCEd0YRUUuxKxwWsOO2mJqPlB7OPdHd87no1CPrTfCCb72lc8f2zlvfF733veaazjzbPO72bwl2mRtBtDHzjOWOCuyZG0G0MfOM4YDJkbQbQx84zhgMmRtBtDHzjOGAyZmHxbpzjOPGElJeD4HpkJqcU16s4pruav8AU8nznp+r7z4DDT6U8j7otwXyIF7BOKb8CdZy5tGFJWbXR2KEuJVpy7yI8Ur0+HVlDsbXozYReYpgAHIcAAAAAABv/wAQ7fmDTZZ+98wegf8ALxKr+Mec1fWl+6XzLUzI0tTyYnER92tVX+9mKmdWsMyElh4JLlUyO5cmNGl6ZdcjTKpiCElzC1bw+x0rhF7Mqksnc6U1l8G/kZaZSKSqUKnOhWpVU1xtCabXik14j6ct2SZcbJvv4tSUJPozTi+7K5Py+mT2bY/lSjzlGXm0eF06m5dy+R75F3Sa4PgeHaxYJ4fF4ilayjUk4/sl6UbeDXkauyfNober3WY20G0MfOM5YldkyNoNoY+cZwDJkbQbQx84zgGTI2g2hj5xnAMmRtD1zUmN9HUE+cZvwlOUl8zxyF5NRW+Umkl1bdkj2/QOGVGjClypU6cf9MbX+BBvXiKROslmTZp8YrVJro7fAhL69TNOUvek35ssPE7maqVpzXW2/VmygsRSAAOA4AAAAAACXav3X5g2/wBw7H5sG9/4dFX/ACTzfXTDbPH11ym41F/mir/FM0tzs/tPwVquHrJbpwlTk+2LzL4Sl5HFJk6rHE2ZWvHdqNF9y65GmVucTgSJlUyxMqmIBImVuRplyYgh6pqbpX7xhYXd6lH8qfXct0vFW+JzX2qaCbjDGwXqLZ17L2L+jN9zbX+ZdDUar6d+511J/wAKdo1Uvdvumu1fVnqk4Qq02nlnTqRs1xjOEl8U0y6srjGH1rUtqTVxR3Hqv1M+ec4zm51z1Uno+s7Xlhqj/KqP2f8ApzfVdedjndoaSMlNZRWSi4vdepk5xnMbaDaDhuTJzjOY20G0AMmTnGcxtoZ+hdEVcZVVKku2c36tKPvS+i5iNpLLFSbeEdDqDoh18RtpL8rD778pVX6sfBXfkem1q+SjN85tQXlv+Bh6K0XTwtGFGn6sFvb4ylznLtZBi8Rna92N0vqzF7f2kqVF41lyj/r8vrg0mz7bGE/FkAAPMTQAAAAAAACTDU804R6yS+JGZ+haWasn7qb+n1JdjS41zTh2tenX8jnVluwbOiAB6qURz2vWjdvgalleVG1aPX0b5l/pcjyRM97lFNNPemrNPmuh4jp3RbwuJq0XwhJuD603vi/Ky70yFcw5qRW3sOan5GImVTLLlUyGV5ImVTI0y5MQQvTKpllyqYghImdXqhrf93tQrv8AIfqT50X0f8vy+XJJlUxYScHlD6c5U5b0T2bSGCp4mk4yUakJx4O0ozizyrWH7NatNueDe0hx2M3apHsjJ7pLvs+8ydA61V8G8q/Mo330pt2XbB+z8jtcFrJhMVbJLZ1XxpVrRbfY+D8GXFte7ujx3Mst+lcLEuTPC8RSnSk4VIypzXGNSLjLyZHtD37GaPpVllrU4VI+7VhGa+Jpa+oGjZu7oKL/AOnUqQXlF2LeN9H+yOMrCX9WeN7QrGTbSV3J8FFNt9yR7BS+zvRkXfYuX761WS8nI3GB0PhsP/BpUqXV06cYt974sJX0OpMSNjPraPMtA/Z7isQ1KtfDUtz9NfmyX8sOXe/JnpeitE0MJS2dGKhBb5N8ZO3rTlzZDpLWPD0LqUs8/cp+lLx5LxOR0jpzEY6apR9CnJ2yRfFdZvmuzgVN3tBYbk9Or7nePCoco85fP8HTPS/3iUlS/gwdnP8AVn0j/KuvN92+4iwuGjShGEfVirLt7X2kp5df3krus6j00XcjUW9J04JPXr8QACCSAAUuAFSly1yKOQ5IC5yN9q/QtCU37bsu5f8ANzn6cHKSiuMmkvE7GhSUIxiuEUkaf2dtd6q6z0isLxf4+pBvJ4io9pIADblYDiftL0JtKUcVBelR9GpbnSb4+D+DZ2xbVpRnGUZJOMk4yT4NNWaGzjvLBzqQU4uLPAky5M2Ws2g5YLEzpO+zfpUZP2qb5d64Pu7TVJlW44eGUcouLwyRMqmWJlUxo0kTKpkaZcmIIX3LrkaZcmIBfcqWJlbjcCGdhtLYin6lWpFdMzcV4PcZ9PW7GL24y/dTh9EjRpl1xynJaNj1UnHRs3k9bsW/bjH9tOH1TNZitL4ir69Wcl0zWj5KyMaUtxGmDnJ6tg6k5atl502rWjssXVl601aPZDr4/RGk0TgNvVUfZXpTf8vTx4HbJWVlwRn9r3W7Hgx1evh+f3Uu9j2m9LjS0Wnj+P3QqClyjkZrBpy65RyLHItchyiBe5FrkWORRyHqIFzkWuRa5EmFoSqzjCPGT49FzbO0KTk1GK5sRtJZZt9XMHeTqvhH0Y9/N/31OhI8PQVOEYR4RVv+SQ9HsbVWtFU1r1+JSVanEk5AAE05AAABptatXY47DuG5VYelRm/Zn0fY+D/4PGq9CdOcqc04zhJxlF8YyXI9+OR151P+9Rdeil95hHfHht4L2f3Lk/Duj1qW9zWpDuaG+t6Op5YmXJlkk02mmmm001Zprk1yKpkEqi9MuTI0yqYgEiZVMsTKpiCEiZVMjTLkxohemXJkaZW4ghWbKFrZuNXNH7SptJepTe6/tT5eXHyOVarGjTc5dR3oUZVpqnHrN9oTR+wpJP15+lPsfKPh/Uz3Itci1yMPUlKrNzlqzdUqcaUFCOiLnIo5FjkWuQKJ0L3Itci1yLXI6KIFzkUcixyLXI6KIF9zrdB6L2MM0v4k+P8AKvdMLV/Q1rVqi38YRfL+Z9p0BrtkbO4X/fUXPqXZ3+LKy6r73QjoAAaIggAAAAAAAAAHH65ajRxV69C0cTb0o8I17deku3nz7PLqtKUJShOLhOLtKMlaUX0aPoE0Os2qFDHRu/y66Xo1orf+2a9qP9oj1KO9zWpDr2290o6njaZVMztN6AxGCnlrRsm7QqRu6dTul17HvNemQmmuTKxpp4ZemXJkaZVMaNJEyqZYmVTEEJLlWyxMpJiASUKTnKMI75SaSR3OCwsaNONOPCK3vq+b8zSasaPsnWlxd4wv05y+n/03zkZralxxJ8KOi+v4NTsm14cOLLV6eH5+xe5FrkWORRyKpRLouci1yLXItcjoogXuRa5FjkS4XCVKsstOLk+duC7W+R1hTcnhLLBtJZZHc6TQmr9rVKy38Y03y7ZdvYZeidAQo2lL06nXlH9q+ptjVbP2SqeKlbXqXZ495WV7re6MNAADQEEAAAAAAAAAAAAAAAACLE4WFWEoVIxnCStKM0mmu44PT32Xp3ng5W57Cq93dCfLud+89BAyUFLU51KUai6SPBMfo6th55K8JUpclNWUv2vg/Ax0z37E4WnVi4VIxqQfGM4qUX4M5XSf2Z4Srd0XLDyfKPp0/wDS+Hg0RpW76iBOzkvdeTy1MqmdTjvs0x1O+z2dePLJLJN/5ZbviaLFaCxdH+JQrR7dnJrzV0cHCS1RFlSnHVGImZGj8G69WMFw4yfSK4v++piSlbju79x1ugcBsqeaS/MqWcuqXKPx+JAvK/AptrV8l+9xKsbX+RV3Xoub/e82kIqKUVuSSSS5Jcg5FrkW5jKY7TaJYLnIo5F9LCVZ+rCcu6LsZ+H1axE+KjBfzy3+SuS6VpVqe5Bvy/3QZKpCOrNXmLqVKU3linKT5RV2dPhdU6cd9STm+i9GP9TcYfDQpq0IqK6RVvMt6GxakudV7q9X9vqRZ3kV7vM5zR+qsnaVZ5V7kd8n3vkdHhsLClHLCKiui+b6koNBbWdK3XQXPt6yBUrTqe8wACWcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAADmdZ/VZqJcF/fMAz+2fdiS7L3peRSHB9z+RvtD8F4fIA5bI1O91odAADSlaAAAAAAAAAAAAAAAAAAAAf/Z"
  />
</div>
```

要使滚动条消失，请使用`overflow: hidden`（如在 JSFiddle 中）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T06:26:11.210

这是解决您的问题的方法：

[http://jsfiddle.net/5Hbr3/5/](http://jsfiddle.net/5Hbr3/5/)

```
#sample{
    background: url(image-data.jpg);
    background-position: -100px -100px;
    width: 200px;
    height: 200px;
} 
```

此方法允许您使用一个元素而不是两个元素来实现相同的结果，并且还可以[跨浏览器兼容](https://developer.mozilla.org/en/docs/CSS/background-position)。我推荐这种方法，而不是将图像绝对定位在容器 div 内。

# linux-kernel - 内核模块在运行时由应用程序加载的要求是什么

> ID：15779724
> 
> 赞同：2
> 
> 时间：2013-04-03T05:44:00.300
> 
> 标签：linux-kernel, kernel, kernel-module

有时我观察到，当应用程序运行或调用任何内核模块函数时，会自动加载相应的内核模块。

我想构建一个类似的内核模块，它会在我的应用程序执行并调用它的 ioctls 时自动加载。

实际上我想知道，我需要在我的内核模块中编写什么，以便我的应用程序在运行时自动加载它。

我找了很多，但没有找到任何令人满意的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:37:56.987

要搜索的关键字是`kmod`，作为 Linux 内核的一部分，它处理动态加载内核模块的请求。

此处的答案中有太多细节无法列出，但请查看[Linux Device Drivers, 2nd Edition' book, 第 11 章](http://www.xml.com/ldd/chapter/book/ch11.html)，其中详细介绍了内核模块自动加载。

请注意，模块加载请求必须来自内核。因此，如果您在自定义模块中有设备驱动程序但未加载，则内核无法知道如何将 ioctl 请求与您的驱动程序匹配。但是假设你有一个驱动程序和一些ioctl函数拆分成不同的模块A和B，可以插入主模块A来提供设备接口，然后当驱动程序A请求ioctl时，它可以自动加载包含使用 kmod 机制的 ioctl 函数的附加模块 B

# c++ - 文件读写产生valgrind错误

> ID：15779735
> 
> 赞同：0
> 
> 时间：2013-04-03T05:45:22.837
> 
> 标签：c++, file-io, valgrind

在我的`createFileAddRecordAndRead()`函数中，我创建了一个`FixedLengthRecordFile`对象的实例（它处理文件 I/O），然后使用它向文件中写入一条记录，然后再次读取它。

```
 FixedLengthRecordFile file;

   // The following opens the file in "wb+" mode because 
   // in order to write a record I need to read something else first
    file.create("fixedfile.txt",record.getRecordSize(),1);

    file.write(0,record); // Write the record in the offset 0

    file.close();

    file.open("fixedfile.txt","rb");

    file.read(0,readRecord); // Read record 0 and store it in a variable 
```

但它不起作用（实际上，它确实起作用，因为记录被写入并回读，但`valgrind`抱怨）。但是，如果我分别执行写和读的任务（即有两个实例——一个写，一个读），`valgrind`不会抱怨。

这是`FixedLengthRecordFile`该类的一些代码...

```
int FixedLengthRecordFile :: create (std::string fileName, int recSize, int p_maxRecs)
{
    // Initialize file attributes
    recordSize = recSize;
    maxRecs = p_maxRecs;

    file = fopen(fileName.c_str(),"wb+");
    if (file == NULL) 
        return RES_ERROR;

    if (initFileHeader() == RES_OK) 
    {
        if (initEmptyRecords() == RES_OK)
            return RES_OK;
    }

    return RES_ERROR;       
}

int FixedLengthRecordFile :: open (std::string fileName, std::string mode)
{
    file = fopen(fileName.c_str(),mode.c_str());
    if (file == NULL) {
        return RES_ERROR;
    }

    struct header head;
    if (getFileHeader(head) == RES_ERROR) {
        return RES_ERROR;
    }

    recordSize = head.h_recordSize;
    maxRecs = head.h_maxRecords;

    return RES_OK;
}

int FixedLengthRecordFile :: close ()
{   
    int result = fclose(file);

    if (result == 0) {
        std::cout << "File closed. " << std::endl;
        return RES_OK;
    }

    return RES_ERROR;   
}

int FixedLengthRecordFile :: write (const int numRec, const FixedLengthFieldsRecord & rec)
{
    int positioning = seek (numRec);
    if (positioning == RES_RECORD_DOESNT_EXIST || positioning == RES_ERROR)
        return RES_ERROR;

    char flag;
    int res = fread(&flag,sizeof(flag),1,file);
    if (res != 1) {
        std::cout << "Couldn't read record flag of " << numRec << std::endl;
        return RES_ERROR;
    }

    if (flag == 'O') // "occupied"
        return RES_RECORD_EXISTS;

    seek(numRec);

    return rec.write(file);
}

int FixedLengthRecordFile :: read (int numRec, FixedLengthFieldsRecord & rec) 
{
    int positioning = seek (numRec);
    if (positioning == RES_RECORD_DOESNT_EXIST)
        return RES_RECORD_DOESNT_EXIST;

    char flag;
    int res = fread(&flag,sizeof(char),1,file);
    if (res != 1) {
        std::cout << "Couldn't read record flag of " << numRec << std::endl;
        return RES_ERROR;
    }

    if (flag != 'O')
        return RES_RECORD_DOESNT_EXIST;

    return rec.read(file);
} 
```

这是`FixedLengthFieldsRecord`课堂上的相关代码......

```
int FixedLengthFieldsRecord :: read (FILE* file)
{
    int res = fread(&record,recordSize,1,file);
    if (res != 1) {
        std::cout << "Couldn't read record. " << std::endl;
        return RES_ERROR;
    }

    std::cout << "Record read successfully! " << std::endl;
    return RES_OK;  
}

int FixedLengthFieldsRecord :: write (FILE* file) const
{
    char flag = 'O';

    int res = fwrite(&flag,sizeof(flag),1,file);
    if (res != 1) {
        std::cout << "Couldn't mark record as occupied. " << std::endl;
        return RES_ERROR;
    }

    res = fwrite(&record,recordSize,1,file);
    if (res != 1) {
        std::cout << "Couldn't write record. " << std::endl;
        return RES_ERROR;
    }

    std::cout << "Record written successfully! " << std::endl;
    return RES_OK;  
} 
```

...这是来自的输出`valgrind`：

```
X@notebook:~/Desktop/FixedRecordFile$ valgrind --leak-check=full --track-origins=yes --show-reachable=yes ./flrfile
Record written successfully! 
==20368== Syscall param write(buf) points to uninitialised byte(s)
==20368==    at 0x422A443: __write_nocancel (syscall-template.S:82)
==20368==    by 0x41BCBA4: _IO_file_write@@GLIBC_2.1 (fileops.c:1289)
==20368==    by 0x41BCA83: new_do_write (fileops.c:543)
==20368==    by 0x41BE0FD: _IO_do_write@@GLIBC_2.1 (fileops.c:516)
==20368==    by 0x8049DED: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==  Address 0x4035021 is not stack'd, malloc'd or (recently) free'd
==20368==  Uninitialised value was created by a stack allocation
==20368==    at 0x8049C97: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368== 
File closed. 
Record read successfully! 
==20368== Invalid read of size 4
==20368==    at 0x41B131C: fclose@@GLIBC_2.1 (iofclose.c:60)
==20368==    by 0x8049F09: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==20368== 
==20368== 
==20368== Process terminating with default action of signal 11 (SIGSEGV)
==20368==  Access not within mapped region at address 0x8
==20368==    at 0x41B131C: fclose@@GLIBC_2.1 (iofclose.c:60)
==20368==    by 0x8049F09: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==  If you believe this happened as a result of a stack
==20368==  overflow in your program's main thread (unlikely but
==20368==  possible), you can try to increase the size of the
==20368==  main thread stack using the --main-stacksize= flag.
==20368==  The main thread stack size used in this run was 8388608.
==20368== 
==20368== HEAP SUMMARY:
==20368==     in use at exit: 478 bytes in 5 blocks
==20368==   total heap usage: 22 allocs, 17 frees, 1,112 bytes allocated
==20368== 
==20368== 12 bytes in 1 blocks are still reachable in loss record 1 of 5
==20368==    at 0x402A5E6: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==20368==    by 0x8048D2E: FixedLengthFieldsRecord::FixedLengthFieldsRecord(int, int) (FixedLengthFieldsRecord.cpp:44)
==20368==    by 0x8049CDF: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368== 
==20368== 12 bytes in 1 blocks are definitely lost in loss record 2 of 5
==20368==    at 0x402A5E6: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==20368==    by 0x8048D2E: FixedLengthFieldsRecord::FixedLengthFieldsRecord(int, int) (FixedLengthFieldsRecord.cpp:44)
==20368==    by 0x8049E9D: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368== 
==20368== 51 bytes in 1 blocks are still reachable in loss record 3 of 5
==20368==    at 0x402A5E6: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==20368==    by 0x8048D14: FixedLengthFieldsRecord::FixedLengthFieldsRecord(int, int) (FixedLengthFieldsRecord.cpp:43)
==20368==    by 0x8049CDF: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368== 
==20368== 51 bytes in 1 blocks are definitely lost in loss record 4 of 5
==20368==    at 0x402A5E6: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==20368==    by 0x8048D14: FixedLengthFieldsRecord::FixedLengthFieldsRecord(int, int) (FixedLengthFieldsRecord.cpp:43)
==20368==    by 0x8049E9D: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368== 
==20368== 352 bytes in 1 blocks are still reachable in loss record 5 of 5
==20368==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==20368==    by 0x41B1D17: __fopen_internal (iofopen.c:76)
==20368==    by 0x8049E53: createFileAddRecordAndRead() (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368==    by 0x8049FE3: main (in /home/X/Desktop/FixedRecordFile/flrfile)
==20368== 
==20368== LEAK SUMMARY:
==20368==    definitely lost: 63 bytes in 2 blocks
==20368==    indirectly lost: 0 bytes in 0 blocks
==20368==      possibly lost: 0 bytes in 0 blocks
==20368==    still reachable: 415 bytes in 3 blocks
==20368==         suppressed: 0 bytes in 0 blocks
==20368== 
==20368== For counts of detected and suppressed errors, rerun with: -v
==20368== ERROR SUMMARY: 4 errors from 4 contexts (suppressed: 0 from 0)
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:25:44.153

您的错误在于指针的使用。

```
res = fwrite(&record,recordSize,1,file); 
```

应该

```
res = fwrite(record,recordSize,1,file); 
```

因为记录已经是一个指针。

相似地

```
int res = fread(&record,recordSize,1,file); 
```

应该

```
int res = fread(record,recordSize,1,file); 
```

可能值得重命名该变量，因此很明显它是一个指针。在阅读代码时，我最初认为它是某种结构，所以我没有发现错误。

# java - 使用 JBoss EWS 2.0 进行集群

> ID：15779736
> 
> 赞同：2
> 
> 时间：2013-04-03T05:45:26.410
> 
> 标签：java, tomcat, jboss, session-replication

在我们的生产环境中，我们使用[JBoss Enterprise Web Server 2.0](http://www.redhat.com/products/jbossenterprisemiddleware/web-server/)，它基本上是 Apache HTTP Server 和稍微修改的 Tomcat 7 的捆绑。我们有两个节点，在不同的服务器上，我们正在尝试设置集群节点之间的会话故障转移（复制）。我最初的想法是简单地遵循[Tomcat 7 Clustering How-To](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html)。但是按照上述指南（使用示例中的配置）并启动服务器会出现此错误：

```
java.lang.ClassNotFounException: org.apache.catalina.ha.tcp.SimpleTcpCluster 
```

同样在日志中：

```
INFO: Cluster RuleSet not found due to [java.lang.ClassNotFoundException: org.apache.catalina.ha.ClusterRuleSet]. Cluster configuration disabled. 
```

因此，JBoss EWS 附带的 Tomcat 7 版本似乎没有附带标准的 Tomcat 7 集群库。相反， Tomcat安装的文件夹中似乎有很多`mod_cluster-*.jar`文件。`lib`

我在这个主题上找到的所有文档都是如何在 Apache HTTP Server 级别配置集群。但是我们前面并没有真正使用Apache HTTP，所以它不适用。现在我想知道我是否应该从标准的 Tomcat 7 安装中添加集群库，或者是否有另一种“标准”方式使用 JBoss EWS 配置集群？有人用 JBoss EWS 设置集群吗？欢迎任何见解。

**编辑：**

[我在文档JBoss Enterprise Web Server Component Details](https://access.redhat.com/knowledge/articles/111723)中找到了这个注释

> Apache Tomcat 7 - 集群已被删除 - Red Hat® 认为此功能不适用于中型或大型生产部署。

这就解释了为什么 Tomcat 集群库不可用。

**编辑：**

更多信息，可在[JBoss EWS 2.0.0 的发行说明中找到](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Web_Server/2/html-single/2.0.0_Release_Notes/index.html)

> Tomcat 集群已从 Apache Tomcat 6 和 7 组件中排除。特别是 catalina-tribes.jar 和 catalina-ha.jar 文件已被删除。这消除了会话复制的可能性。

最后一句话特别扎心……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:36:19.310

是的，JBoss EWS 1.0 和 2.0 中都没有标准的 Catalina 集群 JAR。

您可以手动添加它们，但我建议您改用[http://code.google.com/p/memcached-session-manager/](http://code.google.com/p/memcached-session-manager/)。在 Tomcat 6（和硬件 LB）上非常适合我们。

应该同样适用于 Tomcat 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T07:57:13.873

根据 RedHat 的官方回应，JBoss EWS 不支持会话复制。我猜会话复制不是 RedHat 的“企业”功能......如果我们希望以受支持的方式进行会话复制，我们需要升级到 JBoss EAS。

当然，这并不意味着不能使用 JBoss EWS 进行会话复制。只是不会被支持。因此可以将 catalina 集群库复制到 JBoss EWS 中，并按照 Tomcat 7 集群方法中描述的方式设置集群和复制。或者按照@Jukka 的建议使用其他会话复制框架。

# mysql - 带有“NOT IN”条件的查询太慢了

> ID：15779739
> 
> 赞同：3
> 
> 时间：2013-04-03T05:45:30.610
> 
> 标签：mysql, sql, query-optimization

我有一个查询，它从一个表中读取大约 342 条记录，并检查记录是否不存在于另一个大约有 32000 条记录的表中。为此，我使用了“NOT IN”条件以及使用“NOT IN”条件更快地运行查询的最佳方法是什么，如下所示，似乎该过程要占用我的一生！

```
SELECT fname,lname,position 
FROM employees 
WHERE employees.id NOT IN(select projects.empid where projects.id='BRS213F-013') 
```

我真的应该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T05:47:14.850

如何使用`LEFT JOIN`，

```
SELECT  a.fname, a.lname, a.position 
FROM    employees a
        LEFT JOIN projects b
            ON  a.ID = b.emp_ID AND
                b.id = 'BRS213F-013'
WHERE   b.emp_ID IS NULL 
```

确保`Employees.ID`并且`projects.emp_ID`必须在其上定义键以提高性能。

* * *

`Employees.ID`如果尚未实现，则制作主键，

```
ALTER TABLE Employees ADD CONSTRAINT tb_pk PRIMARY KEY (ID) 
```

如果尚未实现，则制作`projects.emp_ID`一个引用的外键`Employees.ID`

```
ALTER TABLE Projects 
ADD CONSTRAINT tb_fk FOREIGN KEY (EmpID) REFERENCES Employees (ID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:17:41.610

```
SELECT fname,lname,position 
FROM employees 
WHERE NOT EXISTS
(select * where projects.id='BRS213F-013' AND employees.id = projects.empid) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:19:51.827

NOT EXISTS 比 not 更有效

# git - 如何更新我的 fork 以与 github 上的原始存储库具有相同的分支和标签？

> ID：15779740
> 
> 赞同：54
> 
> 时间：2013-04-03T05:45:40.137
> 
> 标签：git, github

当您在 github 上 fork 存储库时，您的 fork 存储库包含所有分支和标签。

随着时间的推移，这些分支和标签会过时。

使用 fork 很简单如何确保您的 fork 具有所有分支和标签而无需重新克隆？

即一个 git magicpull --rebase upstream/* myremote/*

这将获取上游的所有分支和标签，并确保 myremote 中存在相同的分支和标签。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-03T07:20:47.693

这假设您的“上游”遥控器被命名为“origin”，并且您的用户名下有您的自定义分支（即“maxandersen”）

当您让您的克隆运行以下单行程序时（将[所有远程 git 分支刷新为本地分支](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches/6300386#6300386)：

```
remote=origin ; for brname in `git branch -r | grep origin | grep -v master | grep -v HEAD | sed -e 's/.*\///g'`; do git branch --track $brname  $remote/$brname ; done 
```

这将为在名为“origin”的远程中找到的所有分支设置跟踪分支。如果您已经使用此分支名称结帐，它不会更改任何内容，除非确保跟踪到位。

（可选）现在确保您的所有分支都是最新的（如果您已经签出分支，这很有用）：

```
git pull --rebase --all 
```

现在所有分支都设置为跟踪和更新推送分支*和*标签到您的远程（用您的远程名称替换“maxandersen”）：

```
git push --all maxandersen
git push --tags maxandersen 
```

在此之后，您的分叉是同步的。

以下脚本会执行所有这些操作，包括要求确认：

```
## Checkout all branches from remote as tracking branches. Based on    https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches/6300386#6300386

UPSTREAM=$1
MYREPO=$2

usage() {
   echo "Usage:"
   echo "$0 <upstream-remote> <target-remote>"
   echo ""
   echo "Example which ensures remote named 'maxandersen' have all the same branches and tags as 'origin'"
   echo "$0 origin maxandersen"
   exit 1
}

if [ -z "$UPSTREAM" ]
then
 echo Missing upstream remote name.
 usage
fi

if [ -z "$MYREPO" ]
then
 echo Missing target remote name. 
 usage
fi

read -p "1\. This will setup '$MYREPO' to track all branches in '$UPSTREAM' - Are you sure ?" -n 1 -r

if [[ $REPLY =~ ^[Yy]$ ]]
then
 for brname in `git branch -r | grep "$UPSTREAM" | grep -v master | grep -v HEAD | sed -e 's/.*\///g'`; do git branch --track $brname  $UPSTREAM/$brname ; done
fi

read -p "2\. This will push all local branches and tags into '$MYREPO' - Are you sure ?" -n 1 -r

if [[ $REPLY =~ ^[Yy]$ ]]
then
 git push --all $MYREPO
 git push --tags $MYREPO
fi 
```

将其保存为“updateallbranchestags.sh”并执行：

```
sh updateallbranches.sh origin maxandersen 
```

并且来自“origin”的所有分支/标签都将在名为“maxandersen”的远程中提供

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-03T05:53:47.543

您仍然需要一个本地克隆，它将：

*   获取所有上游分支并将其更新到本地分支（git fetch upstream，上游是对您分叉的原始存储库的引用）
    请参阅“[如何使用 Git 克隆所有远程分支？](https://stackoverflow.com/q/67699/6309) ”以获取有关将所有远程分支作为本地分支的更多信息分支机构。
    我使用“将所有远程[git](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches/6300386#6300386)[分支作为本地分支跟踪](https://stackoverflow.com/q/379081/6309)”问题中的这一行。
    另请参阅“ [GitHub 中的](https://stackoverflow.com/a/9257901/6309)[和有](https://stackoverflow.com/a/9257901/6309)[什么区别`origin``upstream`](https://stackoverflow.com/a/9257901/6309)”

![上游和分叉](https://i.stack.imgur.com/rIZ8v.png)

*   `git push --all origin`（起源是你的叉子）：假设：
    *   您有所有本地分支跟踪所有上游分支（参见上一步）。
        否则，您将默认只推送一个本地分支，因为克隆只会创建一个本地分支（默认分支）
    *   你还没有在这些分支上推送你自己的提交。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-24T12:58:31.073

您可以直接推送远程参考。显然这并没有考虑到分叉的变化，但它仍然回答了这个问题。如果更改受到限制，那么您可以使用本地分支轻松合并/重新设置它们。

```
git push -f origin refs/remotes/upstream/*:refs/heads/* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-09T14:32:02.787

我已将[Max](https://stackoverflow.com/users/71208/max-rydahl-andersen)出色答案中给出的 Bash 脚本翻译成 Batch 脚本，以防万一您在 Windows 上需要它。唯一的问题是，要在 Windows 上运行它，您需要在首选终端应用程序中提供 grep 和 sed 工具（我个人使用[Scoop](https://scoop.sh/)和 Windows Terminal）。

```
@echo off

set UPSTREAM=%~1
set MYREPO=%~2

if "%UPSTREAM%" == "" (
    echo Missing upstream remote name.
    goto :usage
)

if "%MYREPO%" == "" (
    echo Missing target remote name.
    goto :usage
)

set /p REPLY="Setup '%MYREPO%' to track all branches in '%UPSTREAM%' [y/n]? "

set "_YES=0"
if "%REPLY%" == "y" set "_YES=1"
if "%REPLY%" == "Y" set "_YES=1"
if %_YES% equ 1 (
    for /f "tokens=1" %%G in ('git branch -r ^| grep %UPSTREAM% ^| grep -v master ^| grep -v HEAD ^| sed -e "s/.*\///g"') do (
        git branch --track %%G %UPSTREAM%/%%G
    )
)

set /p REPLY="Push all local branches in '%MYREPO%' [y/n]? "

set "_YES=0"
if "%REPLY%" == "y" set "_YES=1"
if "%REPLY%" == "Y" set "_YES=1"
if %_YES% equ 1 (
    git pull --rebase --all
    git push --all %MYREPO%
    git push --tags %MYREPO%
)

exit /B %ERRORLEVEL%

:usage
echo Usage:
echo %~0 upstream-remote target-remote
echo Example which ensures remote named 'origin' have all the same branches and tags as 'upstream'
echo %~0 upstream origin
exit 1 
```

# javascript - HTML 演示幻灯片，元素调整大小以保持比例

> ID：15779742
> 
> 赞同：3
> 
> 时间：2013-04-03T05:45:46.230
> 
> 标签：javascript, html, css

我对 HTML 很陌生，对 HMTL 术语（英语也是如此：）不是很流利。我正在尝试创建演示幻灯片（类似于 MS Office 中的 Powerpoint）。功能应该是：

1.  当幻灯片调整大小时，幻灯片内的所有内容（文本、图片等）都必须保持相对于幻灯片的位置、大小和比例。
2.  幻灯片的分辨率为 4:3。
3.  幻灯片应该通过`<div>`元素来实现。
4.  幻灯片停留在屏幕中间。
5.  幻灯片内不应使用内联样式。
6.  必须使用纯 Javascript、css 和 HTML。

到目前为止，我已经设法设计了这个：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;
charset=utf-8" />
<title>
Image Resize Test
</title>
<style type="text/css">
*
{
   margin: 0;
}
body
{
   background-color: black;
   width: 100%;
   height: 100%;
}
#wrapper
{
   font-size:100%;
   background-color: white;
   display: block;
   position: absolute;
   left: 50%;
}
#content
{
   font-family:"Times New Roman";
   font-size:80%;
}

h1 {font-size:2.5em;}
h2 {font-size:1.875em;}
p {font-size:0.875em;}
</style>
<script>
   window.onload = function()
   {
      window.onresize();
   }

   window.onresize = function()
   {
        var width = window.innerWidth;
        var height = window.innerHeight;

        if (width / 4 > height / 3)
        {
           width = height / 3 * 4;
        }
        else
        {
           height = width / 4 * 3;
        }
        var wrapper = document.getElementById("wrapper");
        wrapper.style.height = height + "px";
        wrapper.style.width = width + "px";
        wrapper.style.marginLeft = (-width/2) + "px";
        wrapper.style.fontSize = (height) + "%";
   }
</script>
</head>
<body>
<div id="wrapper">
  <div id="content">
  <H1>
  aaaa
  </H1>
  <H2>
  bbbb
  </H2>
  <p>cccc</p>
    text
  </div>
</body>
</html> 
```

这是解决我的问题的好方法，还是有更简单/更有效/更强大或更“专业”的方法来做到这一点？

没有Javascript可以解决吗？至少部分。

有没有一种方法可以轻松地为幻灯片中的任何元素（可能作为属性）指定相对于侧面的 x/y 偏移量？

如何为幻灯片元素树中不同深度的元素应用样式？

对我提出的任何问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:49:26.703

这与您的基本相同，但没有`margin`在 javascript 中明确设置。所以删除那部分并`margin: 0 auto;`在包装上制作。

[http://jsfiddle.net/btevfik/VuqJX/](http://jsfiddle.net/btevfik/VuqJX/)

* * *

似乎您可以仅使用 css 和 html 保持纵横比，但据我所知，这仅在您调整窗口宽度时才有效。当你改变高度时，它不会工作。

[使用 CSS 保持 div 的纵横比](https://stackoverflow.com/questions/1495407/css-a-way-to-maintain-aspect-ratio-when-resizing-a-div)

# javascript - 无法设置自定义对象属性

> ID：15779743
> 
> 赞同：0
> 
> 时间：2013-04-03T05:45:51.043
> 
> 标签：javascript, javascript-objects

我有一个 javascript 类 JsonOptions。我不明白为什么我无法设置 OnSuccess 属性。我在 ajaxJSON 函数中写出来的尝试是空的。

```
function JsonOptions()
{
    this.Url = "";
    this.OnSuccess = "";
}

function ajaxJSON(sender, e)
{
    e.preventDefault();
    var url = sender.href;
    var onsuccess = $(sender).attr('data-ajax-onsuccess');

    var options = new JsonOptions();
    options.Url = url;
    options.OnSucccess = onsuccess;
    //options.OnSucccess = "Setting a straight string";
    console.log('WORKS onsuccess ' + onsuccess);
    console.log('BLANK! o.OnSuccess ' + options.OnSuccess);
    //...ommitted
} 
```

奇怪的是，`Url`工作。

我试图制作小提琴，但无法复制。某处发生冲突？我应该寻找什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:51:02.937

行中的错字：`options.OnSucccess = onsuccess;`

你的意思是它应该是，你在*“options.OnSuccess”*`options.OnSuccess = onsuccess;`中有1个太多的*c*

# jquery - 来自 jquery-ui 的 datepicker 图像

> ID：15779747
> 
> 赞同：1
> 
> 时间：2013-04-03T05:46:28.903
> 
> 标签：jquery, css, datepicker

我正在使用 jquery ui datepicker。但我刚刚复制了 n 粘贴了使用 datepicker 所需的 css n js 文件。

```
$("#birth_date").datepicker(
{
  changeMonth: true,
  changeYear: true,
  yearRange: "1990:2050",
  dateFormat: 'yy-mm-dd'
}); 
```

在将它应用到文本框时，我这样做了，我在 css 中所做的一项更改是我刚刚更改了 .ui-datepicker 类的宽度

所以现在我面临两个问题

1 - .ui-state-disabled 被应用，使下一个和上一个 div 的图像进入禁用形式。

2 - 当我将鼠标悬停在这些按钮（下一个和上一个）上时，图像消失。

所以现在请任何人告诉我如何获得所需的 css 图像以及为什么禁用类被应用。

**请帮忙**

提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T05:56:52.757

按钮可能没有href。[此外，您可以在http://jqueryui.com/download/](http://jqueryui.com/download/)进行自定义下载 jquery-ui 以仅获取日期选择器和依赖项（包括 css 和图像）

# iphone - 无法使用 ASIHttpFormDataRequest 上传视频 --- iPhone

> ID：15779755
> 
> 赞同：0
> 
> 时间：2013-04-03T05:47:08.933
> 
> 标签：iphone, asihttprequest, multipartform-data

我想以这种格式在 maultipartform 中提出请求——

```
<form action="http://xyz.com/web/video/formupload/01f7e4d2-9484-44ed-9e5d-bb4b7ff67739" method="post"
      enctype="multipart/form-data" ">
    <input id="uploadedFile" type="file" name="uploadedFile"/>
    <input type="hidden" name="token" value="TOKEN"/>
    <input type="submit" value="go" />
</form> 
```

我为此目的使用 asiformdatarequest 类..这是我下面的代码

```
ASIFormDataRequest *videoUploadRequest = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:[tokenValue objectForKey:@"url"]]];
    [videoUploadRequest setPostFormat:ASIMultipartFormDataPostFormat];
    [videoUploadRequest addData:[tokenValue objectForKey:@"token"] forKey:@"token"];
    [videoUploadRequest addData:video withFileName:@"New Video" andContentType:(@"video/*") forKey:@"uploadedFile"];

[videoUploadRequest startSynchronous];

NSError *error = [videoUploadRequest error];

if (!error)
{
    NSString *response = [videoUploadRequest responseString];
    NSLog(@"upload response: %@", response);
}
else
{
    NSLog(@"Eror -- %@", error);
} 
```

我收到一条错误消息

```
Eror -- Error Domain=ASIHTTPRequestErrorDomain Code=3 "Authentication needed" UserInfo=0x1e5ee090 {NSLocalizedDescription=Authentication needed} 
```

请任何人告诉我代码是否有问题..请求的格式或其他任何内容..

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:22:46.400

得到了答案！以不正确的格式发送令牌。这里是 ！

```
NSString *string = [NSString stringWithFormat:[tokenValue objectForKey:@"url"]]; 
NSURL *url = [NSURL URLWithString:string];

ASIFormDataRequest *videoUploadRequest = [ASIFormDataRequest requestWithURL:url];
[videoUploadRequest setPostFormat:ASIMultipartFormDataPostFormat];

[videoUploadRequest addPostValue:[tokenValue objectForKey:@"token"] forKey:@"token"];
[videoUploadRequest addData:video withFileName:@"uploadedFile" andContentType:(@"video/*") forKey:@"uploadedFile"];

[videoUploadRequest startSynchronous];

NSError *error = [videoUploadRequest error];

if (!error)
{
    NSString *response = [videoUploadRequest responseString];
    NSLog(@"upload response: %@", response);
}
else
{
    NSLog(@"Error -- %@", error);
} 
```

# java - 是否可以在 unix 中查看序列化 hashmap 的内容

> ID：15779756
> 
> 赞同：0
> 
> 时间：2013-04-03T05:47:12.970
> 
> 标签：java, unix, data-structures

我在 Unix 上使用了 objectstream 并将 hashmap 序列化为一个文件。是否可以使用一些命令/工具查看这个序列化文件的内容，而不必再次编写另一个代码来使用 objectstream 加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:58:03.190

您可以使用任何标准的 Unix 工具查看它。但是，您将看到的是二进制文件，而不是可理解的哈希图。要查看后者，您必须编写一些 Java 代码。

# c# - 如何以实例为键搜索字典

> ID：15779758
> 
> 赞同：1
> 
> 时间：2013-04-03T05:47:14.767
> 
> 标签：c#, dictionary

这是我的字典声明：

```
public IDictionary<MYType<IMyType>, IList<MYType<IMyType>>> SomeList {
    get;
    set;
} 
```

`MYType<T>`有性质`MyTypeId`和`MyTypeParentId`。

1.  如果我想在 上搜索密钥`MyTypeParentId`，这可能吗？

2.  还是我应该只声明`MyTypeParentId`为`int`而不是使我的密钥为 a `MYType<T>`？

我有点希望键是一种类型，`MyType<IMyType>`因为它在该实例中具有其他有用的属性。

因此，将该实例用作键，我认为可以让我关闭其中存在的几个不同属性，`MYType<T>`我可以匹配...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:56:39.087

Dictionary 的优点是通过键（任何类型）的*哈希码*进行快速搜索，而不是键的一个（或多个）属性。当然，您可以通过`Keys`集合搜索 Key 类型的属性，但这不会是一个*快速*搜索。

如果要搜索`MyTypeParentId`，请使用 int 键创建字典，并`MyTypeParentId`用作键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:07:26.767

Only use your type as the key if you will be looking up instances of that type. If you need to look up values corresponding to an int ID, build your dictionary with int keys.

Perhaps maintaining multiple dictionaries will help you (e.g. one keyed on type ID and one keyed on patent type ID).

# delphi - 用于 windows 的 displaySwitch.exe 代码替换 (pre windows 7)

> ID：15779760
> 
> 赞同：2
> 
> 时间：2013-04-03T05:47:16.140
> 
> 标签：delphi, winapi, windows-7, windows-xp, delphi-7

我正在编写一个应用程序**，我希望在 XP 上向后兼容，或者至少在 windows vista 上向后兼容。**

编辑清楚：我需要能够做下面的第一个代码片段所做的事情，但在 XP 中。**“鉴于 USER32.DLL 中没有这些功能，有人知道在 XP 下采用的最佳方法吗？”**

我在 windows 7 上的初始原型代码只是调用了 CreateProcess 来启动 displayswitch.exe，它与 windows 7 一起部署。

如果您不熟悉它，它是一个方便的小实用程序，当您按下 windows 键和字母 P 时会调用它。您可以[在此处阅读有关它](http://www.missingremote.com/guide/tips-and-tweaks-simple-screen-switching-using-displayswitch)的更多信息。

虽然这已经足够了，但我随后需要感知当前状态（例如内部与外部或扩展与克隆），所以我现在编写了一个在 windows 7 上运行良好的 winapi 解决方案（我假设是 8）。它涉及在 User32.DLL 中调用[SetDisplayConfig](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569533%28v=vs.85%29.aspx)和[QueryDisplayConfig](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569215%28v=vs.85%29.aspx)

它的相关部分在这里（减去我必须用原始克林贡语的帕斯卡代码手工制作的许多结构）。

```
function getTopology : DISPLAYCONFIG_TOPOLOGY_ID ;
var  NumPathArrayElements,
   NumModeInfoArrayElements : UINT32;

var  PathArrayElements_Size,
   ModeInfoArrayElements_Size : UINT32;

error :  Longint;
paths :  PDISPLAYCONFIG_PATH_INFO_array;
info  :  PDISPLAYCONFIG_MODE_INFO_array;
begin

    NumModeInfoArrayElements := 0;
    Result := DISPLAYCONFIG_TOPOLOGY_EXTERNAL;
    inc(result);

    error := GetDisplayConfigBufferSizes(QDC_DATABASE_CURRENT,NumPathArrayElements,NumModeInfoArrayElements);
    case error of
        ERROR_SUCCESS :
        begin

            PathArrayElements_Size := sizeof(DISPLAYCONFIG_PATH_INFO) * NumPathArrayElements ;
            ModeInfoArrayElements_Size :=  sizeof(DISPLAYCONFIG_MODE_INFO) * NumModeInfoArrayElements;

            GetMem(paths,PathArrayElements_Size);
            try
                GetMem(info,ModeInfoArrayElements_Size );
                try
                    error := QueryDisplayConfig(QDC_DATABASE_CURRENT,NumPathArrayElements, paths,NumModeInfoArrayElements, info,result);
                    case error of
                        ERROR_SUCCESS :;
                    else
                        Result := DISPLAYCONFIG_TOPOLOGY_EXTERNAL;
                        inc(result);
                    end;

                finally
                    FreeMem(info,ModeInfoArrayElements_Size );
                end;
            finally
                FreeMem(paths,PathArrayElements_Size);
            end;
        end;
    end;

end;

function setTopology ( top : DISPLAYCONFIG_TOPOLOGY_ID) : boolean;
var flags : dword;
begin
    result := false;
    flags := DecodeDISPLAYCONFIG_TOPOLOGY_ID_SDC(top);
    if flags <> 0 then
    begin
        result := SetDisplayConfig(0,nil,0,nil,SDC_APPLY or flags) = ERROR_SUCCESS;
    end;
end; 
```

由于这些功能在 XP 中不存在（据我所知），我正在寻找一种在 XP 中实现类似功能的稳定方法。虽然我在 Delphi 中编码，但没有必要这样呈现解决方案。我很高兴看到它是如何完成的，或者阅读适当步骤的描述，然后自己实现它。

（删除了完整列表，因为它看起来不像一个问题，因此混淆了问题）

# jsf - 无法从 portlet 获取 HttpServletResponse

> ID：15779763
> 
> 赞同：1
> 
> 时间：2013-04-03T05:47:24.410
> 
> 标签：jsf, portlet, httpresponse

我尝试了以下代码：

```
PortletResponse response1 = (PortletResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();
        HttpServletResponse response = (HttpServletResponse)response1; 
```

在上一个[问题](https://stackoverflow.com/questions/3274996/get-httpservletresponse-from-liferay-portal)中，答案是，`PortalUtil.getHttpServletResponse(portletResponse)` 但问题是`response.getOutputStream()`
我的完整代码上的空指针异常是

```
FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();
        //here is my code
        PortletResponse portalResponse = (PortletResponse) externalContext.getResponse();
        HttpServletResponse response = PortalUtil.getHttpServletResponse(portalResponse); 

        File file = new File(getFilePath(), getFileName());
        BufferedInputStream input = null;
        BufferedOutputStream output = null;

        try {

            input = new BufferedInputStream(new FileInputStream(file), DEFAULT_BUFFER_SIZE);

            response.reset();
            response.setHeader("Content-Type", "application/pdf");
            response.setHeader("Content-Length", String.valueOf(file.length()));
            response.setHeader("Content-Disposition", "inline; filename=\"" + getFileName() + "\"");
            //here where nullException is returned from response.getOutputStream()
            output = new BufferedOutputStream(response.getOutputStream(), DEFAULT_BUFFER_SIZE);

            byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
            int length;
            while ((length = input.read(buffer)) > 0) {
                output.write(buffer, 0, length);
            }

            output.flush();
        } finally {

            close(output);
            close(input);
        }
        facesContext.responseComplete(); 
```

这是由@BalusC 在

[pdf-handling](http://balusc.blogspot.com/2006/05/pdf-handling.html)
我的问题是如何在 portlet 中得到这个响应

# sql - windows phone 8 编辑/更新本地数据库

> ID：15779765
> 
> 赞同：0
> 
> 时间：2013-04-03T05:47:26.633
> 
> 标签：sql, linq, windows-phone-8, local-storage

WP8、VS12 和 C#

我已经开始创建一个应用程序，它允许我使用 LINQ to SQL 将关系数据存储在本地数据库中。

我接下来想做的是能够更新现有数据...我将单击应用栏中的图标并转到以前保存的数据，以便我可以更新它。

我查看了 msdn... [Windows Phone 的本地数据库](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202860%28v=vs.105%29.aspx#BKMK_UsingtheDatabase)，我想知道我在**使用数据库 > 更新数据**部分看到的以下代码是否有效，因为我的 LINQ to SQL 设置。如果是这样，我该如何添加此代码以允许更新？

```
 protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    { 

    //Call base method
    base.OnNavigatedFrom(e);

    //Save changes to the database
    toDoDB.SubmitChanges();
    } 
```

如果有人能指出一个工作示例或帮助我连接更新数据的能力，我将不胜感激。

非常感谢，

ķ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T18:59:34.310

使用 Sqlight -- 这是一个很好的例子[http://code.msdn.microsoft.com/wpapps/Using-Sqlite-with-WP8-52c3c671](http://code.msdn.microsoft.com/wpapps/Using-Sqlite-with-WP8-52c3c671)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T10:02:49.003

你好，不知道你是否还在为你的项目工作，但我有一个解决方案给你。

从您的网站（msdn），我在这里找到了：

> 首先，在数据库中查询要更新的对象。然后，根据需要修改对象。最后，调用 SubmitChanges 方法将更改保存到本地数据库。

因此，您需要查询您的数据库（来自我自己的 VB.net 代码的示例）

```
Dim monContact = From contact As Authentification In bddGLI.TableAuth Select contact 
```

执行查询并在集合中获取结果

```
Dim resultCollection = New ObservableCollection(Of Authentification)(monContact) 
```

使用 ForEach 循环运行此集合并修改您的对象

```
For Each elem As Authentification In resultCollection
                elem.Mail = txtEmail.Text
                elem.Nom = txtNom.Text
                elem.Prenom = txtPrenom.Text
            Next 
```

不要忘记保存你的数据库

```
bddGLI.SubmitChanges() 
```

现在，如何检查您是否真的更新了数据？在我创建数据库的地方，我在表中插入了一些数据测试

```
Using db As New GeoLiveInfoDataContext(GeoLiveInfoDataContext.DBConnectionString)
            If db.DatabaseExists() = False Then
                db.CreateDatabase()
                Dim contact As New Authentification
                With contact
                    .Nom = ""
                    .Prenom = ""
                    .Mail = ""
                End With
                db.TableAuth.InsertOnSubmit(contact)                   
                db.SubmitChanges()
            End If
        End Using 
```

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286408(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286408(v=vs.105).aspx)
转到 C:\Program Files (x86)\Microsoft SDKs\Windows
Phone\v8.0 \Tools\IsolatedStorageExplorerTool
SHIFT + right clic => 在此处打开提示
ISETool.exe ts xd {ID APP HERE FROM MANIFEST } {PATH}
不要忘记在模拟器或设备上安装您的应用程序（不是调试）

现在在您的路径中，您有一个可以使用 SQL Server Compact Edition 打开的 .sdf。

在更新前后执行此命令并检查差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T08:58:43.130

更新数据库中的数据的重要一点是，您使用相同的对象处理从数据库中产生查询并且不要复制它。您可以将查询结果中的对象传递给其他对象或函数，但要确保它仍然是堆上的同一个对象。就在这种情况下，SubmitChanges 有效。我第一次做错了，为页面对象复制了它，然后把它传回去，SubmitChanges 不起作用。

# mvvm - KendoUI - 您可以将视图模型创建为函数吗

> ID：15779773
> 
> 赞同：4
> 
> 时间：2013-04-03T05:48:05.300
> 
> 标签：mvvm, kendo-ui

使用 Knockout 有几种潜在的视图模型创建模式，一种是使用文字：

```
var viewModel = {
    firstname: ko.observable("Bob")
};

ko.applyBindings(viewModel ); 
```

另一种是使用函数：

```
var viewModel = function() {
    this.firstname= ko.observable("Bob");
};

ko.applyBindings(new viewModel ()); 
```

如本问题所述：

[声明为对象文字与函数的淘汰视图模型之间的区别](https://stackoverflow.com/questions/9589419/difference-between-knockout-view-models-declared-as-object-literals-vs-functions)

我的偏好一直是使用函数，因为它本质上为您提供了一个“工厂”，允许您创建同一视图模型的多个实例。

使用 KendoUI，我看到的所有示例都使用文字语法：

```
var viewModel = kendo.observable({
     firstname: "Bob"
});

kendo.bind(document.body, viewModel); 
```

我的问题是，使用 Kendo 是否可以通过函数模拟视图模型创建的 Knockout 风格？这将允许我创建同一视图模型的多个实例，添加“私有”功能等......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T08:42:23.507

经过一番思考，我意识到“这当然是可能的！” ...

```
ViewModel = function() {
     this.firstname = "Bob";

     return kendo.observable(this);
};

var viewModel = new ViewModel();

kendo.bind(document.body, viewModel); 
```

尽管您必须小心在构造函数中对“this”的引用，因为根据它们的执行时间，它们可能会引用不可观察的对象：

```
ViewModel = function() {
     firstname = "Bob";

     this.doSomething = function() {
         // here 'this' does not point to an obervable, but 'that' does!
         that.set("forename", "Craig");
     }

     var that = kendo.observable(this);
     return that;
};

var viewModel = new ViewModel();

kendo.bind(document.body, viewModel); 
```

# windows - ½的ASCII码是什么？

> ID：15779778
> 
> 赞同：10
> 
> 时间：2013-04-03T05:48:22.710
> 
> 标签：windows, unix, ascii, iso-8859-1

我想在文件中打印值“½”。我搜索了它的 ascii 值，因为 Alt+(ascii Value) 会给你同样的结果。令我惊讶的是，我在各种站点中发现了这个符号的 2 个 ascii 值。一个是171，另一个是189。

我尝试使用 171 和 189 来写这个符号。再次令我惊讶的是，如果我在 Windows 中编写，171 会给我这个符号。但是如果我在 UNIX 中写作，189 会给我这个符号。

我知道同一个符号不能有 2 个 ASCII 值。但是我在不同的操作系统中获得了相同符号的 2 个有效代码。那么谁能说出符号½的真正ASCII码是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-03T05:49:42.730

½ 不是[ASCII 字符集中](http://en.wikipedia.org/wiki/ASCII)的字符。

您在网上找到的值可能不同，因为它们使用不同的字符集。例如，在 Unicode 发明之前，Windows 的本地化版本都使用不同的[代码页](http://en.wikipedia.org/wiki/Windows_code_pages)，其中基本的 ASCII 集被扩展了一些额外的字符。

现在，当然，一切都是（或应该是）完全 Unicode。可以在[此处](http://www.fileformat.info/info/unicode/char/bd/index.htm)找到该字符的详细 Unicode 信息（粗俗分数的一半） 。请注意，同一数值也有多种*表示形式（例如，以 10 为底、十六进制、二进制等）。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-21T11:09:32.710

在 Windows 中，如果您使用 ALT 代码，3 位数字将插入等效的“代码页 850”字符，因此`ALT`+`1``7``1`将插入 ½ 符号

189 是 ½ 符号的 ANSI/UTF-8/WIN-1252/ISO8859-1 值。要为 ANSI 使用 ALT 代码，您必须先按`0`，因此`ALT`+`0``1``8``9`插入 ½ 符号

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T05:52:33.113

请阅读[ASCII](http://en.wikipedia.org/wiki/ASCII)维基百科页面。您将了解到 ASCII 没有“半”字符。

如今，大多数系统都可以配置为使用[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码（这是“默认”或至少是 Web 和 Unix 系统上最常用的编码）。

UTF-8 是 Unicode 的可变[长度](http://en.wikipedia.org/wiki/Unicode)*编码*。这么多的字符或字形由几个字节表示。对于（官方是*粗俗分数的一半*unicode 字符），它的 UTF8 编码是两个十六进制字节 0Xc2 0xBD 所以在 C 表示法中`½`*`\302\275`*

 *我正在使用 Linux Gnome Character Map 实用程序`gucharmap`来查找所有内容。

您可能对[UTF-32](http://en.wikipedia.org/wiki/UTF-32)（使用 32 位字符的固定长度编码，其中 ½ 由 0x000000BD 表示）或什[至 UTF-16](http://en.wikipedia.org/wiki/UTF-16)感兴趣，其中许多字符是 16 位（特别`½`是 0x00BD，例如一个 16 位字符） UTF-16），但不是全部。您可能还对[宽字符](http://en.wikipedia.org/wiki/Wide_character)感兴趣，即`wchar_t`最近的*C*或*C++*标准（在 Windows 上是 UTF-16，在许多 Unix 上是 UTF-32）。

FWIW，Qt 使用[QChar](http://qt-project.org/doc/qt-5.0/qtcore/qchar.html)作为 UTF-16（Java 也有 UTF-16 `char`...），但 Gtk 使用 UTF-8 即可变长度字符。

请注意，对于像 UTF-8 这样的可变长度字符编码，在字符串中获取第 N 个字符（不是第 N 个字节！）需要扫描字符串。此外，某些字节组合不是有效的 UTF-8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-21T14:18:05.520

正如其他人指出的那样：它不在 ASCII 表中（值 0..127）。

但它有一个*Unicode*代码：

*   ½ U+00BD*普通分数二分之一*

也可以使用 unicode U+2044 Fraction Slash 将其放入文本中：

*   您的文本包含三个代码点：`1``⁄</kbd>`2``
*   但它被渲染为 1⁄2

这具有适用于任何分数的优点：

*   1⁄2
*   3⁄5
*   22⁄7
*   355⁄113
*   355⁄113 - 1⁄3748629

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-15T08:53:58.347

我很确定它确实是 ASCII 表的一部分：

在 Windows 中，确保“NumLock”已打开，然后尝试 [ALT + (NumPAD)171] = ½。1/4 使用 [ALT + 172]*

# java - Java：没有为 Scanner(int) 找到合适的构造函数

> ID：15779779
> 
> 赞同：0
> 
> 时间：2013-04-03T05:48:35.973
> 
> 标签：java, object, netbeans, int, java.util.scanner

我正在开发一个程序，该程序需要生成一个三位数的随机数，然后扫描每个数字以与猜谜游戏的输入进行比较。

我确实初始化了实例变量，只是没有把它们放在这里。我也有其他方法，我认为这不会影响我现在遇到的问题。

老实说，我对编程和 Java 还很陌生，所以它可能没有我想象的那么复杂。但我的问题是，当我创建一个名为 randScan 的 Scanner 对象并尝试将其设置为扫描我的 secretNumber 对象（随机生成）时，我收到一条错误消息，提示“没有为 Scanner(int) 找到合适的构造函数...”和然后是它下面的许多其他错误（输入太多）。我只是不明白为什么它不会扫描随机数，因为它是一个整数。

任何帮助将不胜感激！:)

```
import java.util.Random;
import java.util.Scanner;
import javax.swing.JOptionPane;     

// Generates three random single digit ints.  The first cannot be zero
// and all three will be different. Called by public method play()
public String generateSecretNumber()
{

    do 
    {   
        secretNumber = (int)(generator.nextInt(888)+101) ;              
        // scan the random integer
        Scanner randScan = new Scanner(secretNumber) ;  //<- THIS IS THE PROBLEM!
        num1 = randScan.nextInt();                      // scan the first digit
        num2 = randScan.nextInt() ;                     // scan the second digit
        num3 = randScan.nextInt() ;                     // scan the third digit
    }   
    while ( num1 == 0 || num1 == num2 ||
         num2 == num3 || num1 == num3) ;   // re-generate if any digits are the same

    return number ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:51:28.607

如果您只是想获得`secretNumber`（作为整数值）的三位数字，您可以使用：

```
num1 = secretNumber / 100;
num2 = (secretNumber / 10) % 10;
num3 = secretNumber % 10; 
```

此处无需转换为使用字符串。另一方面，如果你不需要`secretNumber`它自己，当然你只需要生成 1 到 9 之间的三个数字。最简单的方法*是*使用类似的东西：

```
List<Integer> digits = new ArrayList<Integer>();
for (int i = 1; i <= 9; i++) {
    digits.add(i);
}
Collections.shuffle(digits, generator); 
```

...然后使用列表中的前三个值：

```
num1 = digits.get(0);
num2 = digits.get(1);
num3 = digits.get(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:52:22.667

你应该`secretNumber`处理

```
String secretNumberString = new String(secretNumber); 
```

作为字符串，然后您需要 根据文档尝试[Scanner#hasNextInt](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt%28%29)

```
Returns true if the next token in this scanner's input can be 
interpreted as an int value in the default radix using the nextInt() method.
The scanner does not advance past any input. 
```

所以我想它可能会解决你的问题
所以你的代码就像

```
secretNumber = (int)(generator.nextInt(888)+101) ;              
       String secretNumberString = new String(secretNumber);
       Scanner randScan = new Scanner(secretNumberString) ;  
        if(randScan.hasNextInt())
            num1 = randScan.nextInt();
           //Remaining code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:52:15.783

[扫描仪的可用构造函数](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)：

```
Scanner(File source) 
Scanner(File source, String charsetName) 
Scanner(InputStream source) 
Scanner(InputStream source, String charsetName) 
Scanner(Readable source) 
Scanner(ReadableByteChannel source)
Scanner(ReadableByteChannel source, String charsetName)
Scanner(String source) 
```

对于个位数，您可能应该传递一个字符串`String.valueOf(yourInt)`

# mysql - 如何在 MySql 中同时按 2 列排序

> ID：15779780
> 
> 赞同：2
> 
> 时间：2013-04-03T05:48:40.743
> 
> 标签：mysql, newrelic

以下查询工作正常，但在 New Relic 工具中显示错误。

错误信息：

> MysqlError: 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“ORDER BY q.display_order, a.display_order ASC”附近使用正确的语法

SQL查询：

```
SELECT q.question_id,
       a.answer_id, 
       q.question_name, 
       a.option_name, 
       q.display_order AS ques_order,
       a.correct, 
       a.display_order AS opt_order
FROM questions q 
JOIN answers a 
ON (a.question_id = q.question_id) 
WHERE test_id = 24
ORDER BY q.display_order, a.display_order ASC 
```

# c# - IMAP 使用 c# - AE.Net.Mail

> ID：15779790
> 
> 赞同：0
> 
> 时间：2013-04-03T05:49:47.773
> 
> 标签：c#, .net, email, imap

我一直在尝试使用以下链接中提供的解决方案：
[using c# .net librarires to check for IMAP messages from gmail servers](https://stackoverflow.com/questions/545724/using-c-sharp-net-librarires-to-check-for-imap-messages-from-gmail-servers)

但是我一直报错：
*连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应*

有什么我在这里想念的吗。我的代码：

```
 public List<MailMessage> ReadMail()
    {
        List<MailMessage> msgs;
        using (var ic = new AE.Net.Mail.ImapClient("imap.gmail.com", "username@gmail.com", "pass-to-gmail", ImapClient.AuthMethods.Login, 993, true))
        {
            ic.SelectMailbox("INBOX");
            msgs = new List<MailMessage>(ic.GetMessageCount());
            msgs = ic.GetMessages(0, 100, false, true).ToList();

            ic.Disconnect();
        }
        return msgs;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:00:03.433

使用这段代码连接到 gmail。

```
ImapX.ImapClient client = null;
client = new ImapX.ImapClient("imap.gmail.com", 993, true);

if (!client.Connection())
{
    MessageBox.Show("Couldn't connect to gmail. Check your internet connection and try again");
    client = null;
    return false;
 }

 if (!client.LogIn(email, password))
 {
     MessageBox.Show("Email And/Or password incorrect");
     client = null;
     return false;
 } 
```

# bash - 将带有空格的参数值传递给从 Shell 脚本构建的 Perl 脚本

> ID：15779794
> 
> 赞同：0
> 
> 时间：2013-04-03T05:50:19.940
> 
> 标签：bash, shell, command-line-arguments

我有一个调用 perl 脚本的 shell 脚本。shell 脚本是一个包装器，它构建要传递给 perl 脚本的参数。perl 脚本使用给定的参数执行一些代码。

shell脚本是这样的。

```
#!/bin/bash    
value=1
opt2value="someValue"
params="-opt3 someOption"
if [ $value = 1 ] 
then
  params=${params}" -opt4 Y -opt5 \"This is 1\""
elif [ $value = 2 ]
then
  params=${params}" -opt4 Y -opt5 \"This is 2\""
else
  params=${params}" -opt4 N" 
fi
perl -E'say for 0+@ARGV, @ARGV;' -- -opt1 optValue -opt2 ${opt2value} ${params} 
```

Perl 脚本检索所有其他传递的参数，但它只检索opt5 参数的**“This”**，而不是传递的整个值。

perlScript 用于检索值

```
use Getopt::Long;
$result = GetOptions(
"opt1=s"  => \$opt1,
"opt2=s"  => \$opt2,
"opt3=s"  => \$opt3,
"opt4=s"  => \$opt4,
"opt5=s"  => \$opt5
} 
```

我怎样才能做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:51:52.817

选项 1 `eval`：。

更灵活。（类似于 Perl 的`system($SHELL_COMMAND)`.）

```
#!/bin/bash
value=1
opt2value="someValue"
params="-opt3 someOption"
if [ "$value" = 1 ]
then
  params="$params -opt4 Y -opt5 \"This is 1\""
elif [ "$value" = 2 ]
then
  params="$params -opt4 Y -opt5 \"This is 2\""
else
  params="$params -opt4 N"
fi
eval "perl -E'say for 0+@ARGV, @ARGV;' -- "\
  "-opt1 optValue -opt2 $opt2value $params" 
```

选项 2：数组。

更简单。（类似于 Perl 的`system($PROG, @ARGS)`.）

```
#!/bin/bash
value=1
opt2value="someValue"
params=(-opt3 someOption)
if [ "$value" = 1 ]
then
  params=("${params[@]}" -opt4 Y -opt5 "This is 1")
elif [ "$value" = 2 ]
then
  params=("${params[@]}" -opt4 Y -opt5 "This is 2")
else
  params=("${params[@]}" -opt4 N)
fi
perl -E'say for 0+@ARGV, @ARGV;' -- \
  -opt1 optValue -opt2 "$opt2value" "${params[@]}" 
```

输出：

```
10
-opt1
optValue
-opt2
someValue
-opt3
someOption
-opt4
Y
-opt5
This is 1 
```

# c# - 如何在不重定向到 facebook 的情况下获取用户访问令牌或授权码

> ID：15779797
> 
> 赞同：2
> 
> 时间：2013-04-03T05:50:32.797
> 
> 标签：c#, facebook, facebook-graph-api

我正在创建一个可以在后端工作的 .Net 应用程序，我需要添加在我的 facebook 页面上创建帖子的功能。我也为此创建了 facebook APP，但我发现在重定向到 facebook 窗口后一直在 facebook 页面上创建一个帖子。但我不想添加任何此类功能来重定向，即我不想将用户重定向到我的应用程序到任何其他窗口或应用程序。为了解决这个问题，我需要您的帮助才能知道是否有其他方法可以执行此操作意味着无需公开 facebook 端即可验证用户身份。

如果您对此有任何解决方案，请告诉我，并尽快回复我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:00:30.443

您可以为此使用 javascript SDK。

为了在不使用 javascript SDK 的情况下获取用户令牌，您需要使用 OAuth 对话框重定向对用户进行身份验证。

**请点击此链接：**

[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

# github - 使用 Github 部署 Jekyll 网站

> ID：15779800
> 
> 赞同：2
> 
> 时间：2013-04-03T05:50:40.743
> 
> 标签：github, jekyll

我使用 Github 页面来托管我的 jekyll 网站，我想知道我的部署工作流程是否有更好的解决方案。

目前我构建了站点，然后我删除了 git repo 文件夹中除 .git 之外的所有内容，然后将 _site/ 中的所有内容复制到 repo 中，提交并推送。

有没有办法让 jekyll 将站点直接构建到 git repo 中而无需擦除 .git 文件夹？

我一直在谷歌上搜索它并看到了同步技术等等，但希望有一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:34:08.640

只需将您的 Jekyll 站点放入您的页面仓库即可。GitHub 会检测到您正在使用 Jekyll 并自动为您生成站点。

# jquery - jQuery：将 div css 从 display:none 更改为 display:block 不起作用

> ID：15779804
> 
> 赞同：3
> 
> 时间：2013-04-03T05:51:02.620
> 
> 标签：jquery, css

我正在根据复选框值更改 div 的内容。div 的值是除一个复选框选项之外的所有内容的简单文本。在异常情况下，div 的值是另一个 div（比如说 childDiv）。

因此，当单击其他两个选项时，我将更改 childDiv ( `display: none`through ) 的可见性，并将其更改为单击异常选项时。`jQuery.css()``display: block`

当我更改复选框选项时，childDiv 变为隐藏。但是，当我希望它可见时，它不会再次显示。

小提琴在这里：http: [//jsfiddle.net/sandeepy02/jLgyp/](http://jsfiddle.net/sandeepy02/jLgyp/)

代码是

```
 <div class="switch switch-three candy blue" id="reachout">
                <input name="reachout" type="radio" id="tab-41" value="1" checked="checked"/>
                    <label for="tab-41">Experience</label>
                <input name="reachout" type="radio" id="tab-42" value="2"/>
                    <label for="tab-42">Contact Us</label>
                <input name="reachout" type="radio" id="tab-43" value="3"/>
                    <label for="tab-43">Why?</label>
                <div id="test1234">
                    <div id="test12345">
                        Option Start
                    </div>
                </div>
                <span class="slide-button"></span>
            </div> 
```

和

```
 jQuery("input[name='reachout']",jQuery('#reachout')).change(
        function(e)
        {                   
            if(jQuery(this).val()=="1") 
            {
                jQuery("#test1234").html("");
                jQuery("#test12345").css("display","block");
            }
            if(jQuery(this).val()=="2") 
            {
                jQuery("#test1234").html("Option 2");
                jQuery("#test12345").css("display","none");
            }
            if(jQuery(this).val()=="3") 
            {
                jQuery("#test1234").html("Option 3");
                jQuery("#test12345").css("display","none");
            }
        }); 
```

我什至试过

```
 jQuery("#test12345").css('position', 'absolute');
            jQuery("#test12345").css('z-index', 3000); 
```

之后，`display: block`但这没有用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T05:55:49.190

当您设置为 parent 的 html 时，您正在覆盖 div，因此您试图显示一个不存在的 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:05:58.057

看看你的问题是什么：

这`jQuery("#test1234")`是父级`jQuery("#test12345")`，你正在做的是用这些代码行覆盖它的 html：

```
jQuery("#test1234").html("");
jQuery("#test1234").html("Option 2");
jQuery("#test1234").html("Option 3"); 
```

在这个脚本的执行之前看到`HTML`是这样的：

```
 <div id="test1234">
                <div id="test12345">
                    Option Start
                </div>
            </div> 
```

现在，当您的脚本被执行时，它看起来像这样：

通过这个`jQuery("#test1234").html("");`输出就像：

```
 <div id="test1234">

            </div> 
```

通过这个`jQuery("#test1234").html("Option 2");`输出就像：

```
 <div id="test1234">
                Option 2
            </div> 
```

通过这个`jQuery("#test1234").html("Option 2");`输出就像：

```
 <div id="test1234">
                Option 3
            </div> 
```

**因此，您正在执行`display : block`脚本执行后 dom 中不存在的元素。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:57:50.167

jquery 中只有一个变化！！

```
jQuery("input[name='reachout']",jQuery('#reachout')).change(
                function(e)
                {                   
                    if(jQuery(this).val()=="1") 
                    {
            --> change in this line         jQuery("#test1234").html("Option Start");
                        jQuery("#test12345").css('position', 'absolute');
                        jQuery("#test12345").css("display","block");
                        jQuery("#test12345").css('z-index', 3000);
                    }
                    if(jQuery(this).val()=="2") 
                    {
                        jQuery("#test1234").html("Option 2");
                        jQuery("#test12345").hide();
                    }
                    if(jQuery(this).val()=="3") 
                    {
                        jQuery("#test1234").html("Option 3");
                        jQuery("#test12345").hide();
                    }
                }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T05:58:53.457

根据安德鲁的评论，我决定将 div 分开而不是父子。

此后，它可以按我的意愿正常工作。

代码的变化是：

```
<div class="switch switch-three candy blue" id="reachout">
                        <input name="reachout" type="radio" id="tab-41" value="1" checked="checked"/>
                            <label for="tab-41">Experience</label>
                        <input name="reachout" type="radio" id="tab-42" value="2"/>
                            <label for="tab-42">Contact Us</label>
                        <input name="reachout" type="radio" id="tab-43" value="3"/>
                            <label for="tab-43">Why?</label>
                        <div id="test1234">
                        </div>
                            <div id="test12345">
                                Option Start
                            </div>
                        <span class="slide-button"></span>
                    </div> 
```

和

```
 jQuery("input[name='reachout']",jQuery('#reachout')).change(
            function(e)
            {                   
                if(jQuery(this).val()=="1") 
                {
                    jQuery("#test1234").hide();
                    jQuery("#test12345").show();
                }
                if(jQuery(this).val()=="2") 
                {
                    jQuery("#test1234").html("Option 2");
                    jQuery("#test1234").show();
                    jQuery("#test12345").hide();
                }
                if(jQuery(this).val()=="3") 
                {
                    jQuery("#test1234").html("Option 3");
                    jQuery("#test1234").show();
                    jQuery("#test12345").hide();
                }
            }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T06:01:43.403

你的身份证对吗？

```
jQuery("#test1234").html("");
jQuery("#test12345").css("display","block") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T06:10:08.987

像下面这样使用

```
// xxx is your div id
$('#xxx').hide();
$('#xxx').show(); 
```

它会正常工作的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T06:15:08.057

我已经用一些建议重新配置了你的代码，它现在应该可以工作了。

[http://jsfiddle.net/jquery4u/nPMvV/](http://jsfiddle.net/jquery4u/nPMvV/)

```
(function ($) {

    $("input[name='reachout']").on('change', function (e) {
        var checkVal = $(this).val();
        console.log(checkVal);

        //cache elements which are used often
        var $test1234 = $("#test1234"),
            $test12345 = $("#test12345");

        //use a switch statement instead of long winded if else
        switch (checkVal) {
            case "1":
                $test1234.html("Option 1");
                $test12345.show();
                break;
            case "2":
                $test1234.html("Option 2");
                $test12345.hide();
                break;
            case "3":
                $test1234.html("Option 2");
                $test12345.hide();
                break;

        }
    });
})(jQuery); 
```

# amazon-web-services - 通过 salesforce 从 Amazon Web Services (AWS) 访问数据

> ID：15779807
> 
> 赞同：0
> 
> 时间：2013-04-03T05:51:21.020
> 
> 标签：amazon-web-services, salesforce

我是salesforce开发的新手。我想调用亚马逊的网络服务。我在 Amazon S3 中创建了存储桶。现在，如果我想从 Amazon S3 获取数据，如何通过**Salesforce**获取数据？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:06:53.123

适用于 Amazon Web Services的[Force.com 工具包](http://aws.amazon.com/solutions/global-solution-providers/salesforce/)可能正是您所需要的。看看它。

# iphone - 如何在 iPhone 应用程序中创建“每日消息”？

> ID：15779808
> 
> 赞同：0
> 
> 时间：2013-04-03T05:51:24.977
> 
> 标签：iphone, ios, uitextfield

是否可以每天从某种提要中提取以在文本字段中显示不同的报价？我有一个 365 个报价列表，我希望每天在应用程序中显示这些报价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:53:48.157

用你的所有消息制作一个 json 文件，解析它们，迭代它们并每天显示一个。

应该不会太难！

# c++ - cin / cout 被跳过

> ID：15779824
> 
> 赞同：-1
> 
> 时间：2013-04-03T05:52:47.823
> 
> 标签：c++, cout, cin

我一直在编写一个示例程序来比较一些算法的运行时间，这个程序给我带来了一些麻烦。出于某种原因，整个程序的各个部分都随机跳过了 cin / cout，我不完全确定为什么。这是代码，有问题的行已注释。find_element 已被注释掉以进行调试，但也不起作用。任何建议都会很棒！

```
#include <iostream>
#include <vector>

using namespace std;

void sort_vect( vector< int >& );
// int find_element( vector< int > );
void print_vect( vector< int > );

int main()
{
    vector< int > int_vect;
    int input;
    int result;

    char garbage;

    cout << "Enter a number into the vector (Q to quit) > ";

    while(cin >> input && input != 'Q' && input != 'q')
    {
        int_vect.push_back(input);
        cout << "> ";
    }

    // The following doesn't help
    // cin >> garbage;
    // cout << "Garbage : " << garbage << endl;

    if (int_vect.size() == 0)
    {
        cout << "Vector empty" << endl;
        return 1;
    }

    sort_vect(int_vect);
    print_vect(int_vect);

    cout << "What value do you want > ";
    cin >> input;   

    cout << "Result : " << int_vect[input-1] << endl;

    return 0;
} // main()

void sort_vect( vector< int >& int_vect)
{
    vector< int >::iterator vect_iterator;
    vector< int >::iterator temp_iterator;

    int temp_store = NULL;

    for(vect_iterator = int_vect.begin(); vect_iterator != int_vect.end(); vect_iterator++)
    {
        for (temp_iterator = vect_iterator; temp_iterator != int_vect.begin(); temp_iterator--)
        {
            while(*temp_iterator < *(temp_iterator-1))
            {
                temp_store = *temp_iterator;
                *temp_iterator = *(temp_iterator-1);
                *(temp_iterator-1) = temp_store;
            }
        }
    }

    cout << "Vector sorted." << endl << endl;
}

// int find_element( vector< int > int_vect)
// {
//  int input;
//  char garbage;
//  
//  cout << "Enter value to be returned (5 = 5th smallest) > ";
//  cin >> input;
//  cout << "Value for input : " << input << endl;
//      
//  return int_vect[input-1];
// }

void print_vect( vector< int > int_vect )
{
    vector< int >::iterator vect_iterator = int_vect.begin();

    while(vect_iterator != int_vect.end())
    {
        cout << *vect_iterator << endl;
        vect_iterator++;
    }
} // print_vect() 
```

根据请求，输出（注意：输入错误，因为我忘记正确使用输入作为索引，但目前这不是问题）：

```
Enter a number into the vector (Q to quit) > 1
> 2
> 4
> 6
> 5
> 3
> 4
> q
Vector sorted.

1
2
3
4
4
5
6
What value do you want > Result : 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:37:32.553

您的代码跳过第二个输入的原因是您终止第一个输入循环的方式。

您的第一个循环终止不是因为您检测到用户输入了“q”，而是因为“q”不是一个有效的整数。任何字母、'q'、'x'、'z' 或任何东西都会停止你的循环。

尝试从字母中读取整数会导致`cin`. 一旦发生该错误，`cin`将不会再读取任何内容，因此它会“跳过”剩余的输入。

要查看是这种情况，请尝试更改您的代码，以便输入 -1 退出，如下所示

```
cout << "Enter a number into the vector (-1 to quit) > ";

while(cin >> input && input >= 0)
{
    int_vect.push_back(input);
    cout << "> ";
} 
```

现在您不再导致错误，`cin`因为一切都是整数，您的第二个输入现在可以工作。

要获得正确的修复，您需要查看我在评论中提出的建议。基本上，当您尝试读取整数和/或字母时，您需要先读取字符串，然后再转换为整数。

# ios - 将“1987 年 1 月 1 日”格式的 Facebook user_birthday 转换为“dd-MM-yyyy”格式？

> ID：15779825
> 
> 赞同：-3
> 
> 时间：2013-04-03T05:52:49.430
> 
> 标签：ios, date, implicit-conversion

这可能是一个非常简单的问题，但我无法将“1987 年 1 月 1 日”类型的字符串转换为“dd-MM-yyyy”格式，该格式从 Facebook 返回值“user_birthday”。请帮忙！先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:56:57.700

非常简单：需要两种 dateFormatter 格式：

```
NSString *string=@"January 1, 1987"; // type string into "dd-MM-yyyy"
NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"MMM dd, yyyy"];
NSDate *date=[dateFormatter dateFromString:string];
NSLog(@"%@",date);
[dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSString *stringDate=[dateFormatter stringFromDate:date];
NSLog(@"%@",stringDate); 
```

# java - 为什么我没有收到正确的返回信息？

> ID：15779826
> 
> 赞同：0
> 
> 时间：2013-04-03T05:52:57.140
> 
> 标签：java

下面我有一个我不会工作的代码片段。我在我的主要方法中获得输入，然后将该输入传递给另一个方法以检查验证。但它并没有真正正确地检查。如果我输入`99`for`month`并且`day`我希望它给我消息`Check Month`。

相反，我得到： `THIS THIS`

如果我输入`02`月份和`99`日期，我希望它会给我以下信息：`Check day`. 相反，我得到`THIS THIS`

如果我同时输入`02`两者，我希望它能够运行并继续运行其他方法。相反，我得到`THIS THIS`.

```
public class Date {

private Calendar parsedDate;

public static void main(String[] args) 
{
    Date main = new Date();
        System.out.println("Enter a date (use the format -> (MM/DD/YYYY)");

    //declare Scanner
    Scanner in = new Scanner (System.in);

    System.out.println("Enter a month (MM): ");
    String month = in.nextLine();

    System.out.println("Enter a day (DD): ");
    String day = in.nextLine();

    System.out.println("Enter a year (YYYY): ");
    String year = in.nextLine();

    if (main.isValidDate(month, day, year) == true) 
    {
        main.newFormat(month, day, year);
        main.isLeapYear(year);
        main.dayNumber(month, day);
    }
    else if (main.isValidDate(month, day, year) == false)
    {
        System.out.println("Invalid Input");
    }
}//end of main

private boolean isValidDate(String month, String day, String year) 
{
    //check month       
    if(month == "01" || month == "03" || month == "04" ||
       month == "05" || month == "06" || month == "07" || month == "08" ||
       month == "09" || month == "10" || month == "11" || month == "12")
    { 
        //check day
        if(day == "01" || day == "02" || day == "03" || day == "04" ||
           day == "05" || day == "06" || day == "07" || day == "08" ||
           day == "09" || day == "10" || day == "11" || day == "12" ||
           day == "13" || day == "14" || day == "15" || day == "16" ||
           day == "17" || day == "18" || day == "19" || day == "20" ||
           day == "21" || day == "22" || day == "23" || day == "24" ||
           day == "25" || day == "26" || day == "27" || day == "28" ||
           day == "29" || day == "30" || day == "31")
        {
            return true;
        }
        else
        {
            System.out.println("Check Day");
            return false;
        }
    }//end of check month
    else if (month == "02")
    {
        if (day == "28" || day == "29")
        {
            return true;
        }
    }//end of month 2
    else
    {
        System.out.println("THIS");
        return false;
    }

    parsedDate = null;// if it's valid set the parsed Calendar object up.
    return true;
}//end of isValidDate 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T05:55:14.510

您应该使用 equals 方法来比较字符串。使用`==`运算符时，您比较的是字符串的地址，而不是它们的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T05:54:20.253

这`month == "01"`不是`String`在 Java 中比较 s 的正确方法。

您正在尝试比较两个变量的内存位置，这两个变量不太可能相等。

相反，您应该使用`month.equals("01")`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T05:57:28.183

虽然答案解释了它*目前*不工作的原因 - 使用`==`而不是`equals`- 我建议你*不要*只是开始使用`equals`.

*相反，首先将用户输入解析为数字，然后验证它们……用数字*而不是字符串执行数字比较要容易得多。就像是：

```
private boolean isValidDate(int year, int month, int day) {
    // Adjust for whatever bounds you want
    if (year < 1900 || year > 2100) {
        System.out.println("Check year");
        return false;
    }

    if (month < 1 || month > 12) {
        System.out.println("Check month");
        return false;
    }

    Calendar calendar = Calendar.getInstance();
    calendar.clear();
    calendar.set(year, month - 1, 1);
    if (day < 1 || day > calendar.getActualMaximum(Calendar.DAY_OF_MONTH)) {
        System.out.println("Check day");
        return false;
    }
    calendar.set(Calendar.DAY_OF_MONTH, day);
    // Store calendar somewhere if you want...
    return true;
} 
```

此外，如果可以的话，我强烈建议使用[Joda Time](http://joda-time.sf.net)作为更好的日期/时间 API。

编辑：你的下一个问题似乎是这个块：

```
if (main.isValidDate(month, day, year) == true) 
{
    main.newFormat(month, day, year);
    main.isLeapYear(year);
    main.dayNumber(month, day);
}
else if (main.isValidDate(month, day, year) == false)
{
    System.out.println("Invalid Input");
} 
```

现在我提供的代码已经检查了所有内容*并*构造了 a `Calendar`- 不清楚`if`块中的方法是什么意思。但是你不需要`isValidDate`第二次打电话。您只需：

```
// Assuming you're using my new method...
if (isValidDate(year, month, day)) {
    // Do whatever you need to do
} else {
    System.out.println("Invalid input");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T06:04:40.923

有两个大错误

1.  您正在将字符串与 equals 进行比较，这将比较内存而不是内容，因此该行 `if(month == "01")`应该是`if("01".equals(month))`

2.  检查有效日期的条件`if (main.isValidDate(month, day, year) == true)`应该是 `if (main.isValidDate(month, day, year))`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T05:59:31.300

将字符串转换为整数然后检查（例如，然后您`int monthVal = Integer.parseInt(month);`可以检查（a）它是否正确解析，使用 try/catch 并（b）测试价值与`if (monthVal > 0 && monthVal< 13) { /* month is good */}`

# vim - 如何让 Vim 向后处理我的命令？

> ID：15779836
> 
> 赞同：2
> 
> 时间：2013-04-03T05:53:45.560
> 
> 标签：vim

假设我有 5 行文本，如果我输入一些命令让 vim 处理每一行，Vim 将一个接一个地处理文本，第一行，第二行，...最后一行。我想要的是让 Vim 以相反的顺序处理我的文本。即先是最后一行，然后是第 4 行，最后是第一行。

为什么我需要这个？我有以下文字

```
1234567890
abc
123
def
1234567890
123456789 
```

我想从包含 3 个字符的行中删除换行符（\n）。所以处理后，我会得到以下文字

```
1234567890
abc123def1234567890
123456789 
```

好像小菜一碟，我用下面的命令

```
:%s/\v(^\w{3})\n/\1/ 
```

但我得到的是

```
1234567890
abc123
def1234567890
1234567890 
```

为什么？我猜vim首先从第二行删除\n，然后这一行有文本abc123，现在vim不会在123之后删除\n，因为它现在不是3个字符，所以vim处理下一行def，并从中删除\n ，这就是我得到的结果。

如果 vim 可以从后向前处理，就不会发生这种情况，我可以得到我想要的结果。

顺便说一句，我可以通过其他方式得到预期的结果，我只是想知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:00:18.343

可以使用perl实现：

```
while (<>) {
  chomp if (/^...$/);
  print;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:16:09.760

显式地向后循环行的范围（例如视觉选择的行），然后在每一行上执行命令。我在`:join`这里使用了而不是`:substitute`换行符：

```
:for i in range(line("'>"), line("'<"), -1)| silent execute i . 'g/^\w\{3}$/join!' | endfor 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:17:09.017

`:global`在这种情况下，使用该命令连接行更容易。

```
:g/^\w\{3}$/normal! gJ 
```

该命令`gJ`将当前行与下一行连接起来，而不插入任何空格。上面的全局命令调用`gJ`每行只包含三个字符。它通过在执行操作之前首先标记所有匹配项来工作，因此避免了循环问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T08:48:39.360

这条线应该做你想做的事：

```
:%s/\v(\_^\w{3}\n)+/\=substitute(submatch(0),"\n","","g")/ 
```

如果您想使用外部命令更简单，例如 awk，您可以：

```
%!awk '{printf "\%s", length($0)==3? $0:$0"\n"}' 
```

# rest - 有谁知道如何将 Salesforce 中的文件上传到现有的 Box 文件夹？

> ID：15779839
> 
> 赞同：1
> 
> 时间：2013-04-03T05:53:52.563
> 
> 标签：rest, file-upload, salesforce, apex-code, box-api

我们在 Salesforce 客户端中使用 Box Widget，这使我们的用户可以轻松地将文件上传到 Box 的系统。但是，我们还需要上传用户可能添加的文件作为各种对象的附件。

到目前为止，我看到的每个示例都显示了一个 Rest 服务发送一个表单 POST，其中使用标签从浏览器中接收到预期的文件。但是，顶点方法不是由 FormPost 触发的。

当然我们可以检索 Attachment 对象，并且我知道如何创建一个 Rest Service 来调用 Box 的 API，但是当我们只有要发送的顶点 Blob 时，我不知道如何模拟文件上传。

# ios - NSManagedObjectContextDidSaveNotification 合并和删除对象

> ID：15779840
> 
> 赞同：2
> 
> 时间：2013-04-03T05:53:57.870
> 
> 标签：ios, core-data

我有一个有趣的问题，我似乎无法找到解决方案 - 我有两个托管对象上下文，“主要”和“支持”。'Main' 使用 NSMainQueueConcurrencyType 创建，'backing' 使用 'NSPrivateQueueConcurrencyType' 创建。此外，'backing' 已被设置为 main 的父级。

我想在支持 MOC 上执行（可能很昂贵）写入操作，然后将这些更改（完成时）冒泡到主上下文，因此由于使用了 NSFetchedResultsController 而使我的 UI 更新。我的问题如下 - 似乎在调用 mergeChangesFromContextDidSaveNotification 后，主 MOC 上的 deletedObjects 属性填充了使用后备队列在后台操作中删除的所有对象。

例如，这里有一些代码。

```
[appDelegate.backingContext performBlock:^{

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Parent"];
    NSArray *objects = [appDelegate.backingContext executeFetchRequest:fetchRequest error:nil];
    for(Parent *parent in objects) {
        NSMutableOrderedSet *children = [parent mutableOrderedSetValueForKey:@"children"];
        for(Child *child in children) {
            [appDelegate.backingContext deleteObject:child];
        }
        [children removeAllObjects];

        for(int i=0;i<3;i++) {
            Child *child = [NSEntityDescription insertNewObjectForEntityForName:@"Child"
                                                         inManagedObjectContext:appDelegate.backingContext];
            child.name = [NSString stringWithFormat:@"Child #%i", i];
            [children addObject:child];
        }
    }

    [appDelegate.backingContext save:nil];
}]; 
```

在我的应用委托上

```
- (void)mergeContextChanges:(NSNotification *)notification {
    [self.mainContext performBlock:^{
       NSLog(@"Before merge: updates - %i, inserts - %i, deletes - %i",
             self.mainContext.updatedObjects.count,
             self.mainContext.insertedObjects.count,
             self.mainContext.deletedObjects.count);
       [self.mainContext mergeChangesFromContextDidSaveNotification:notification];
       NSLog(@"After merge: updates - %i, inserts - %i, deletes - %i",
             self.mainContext.updatedObjects.count,
             self.mainContext.insertedObjects.count,
             self.mainContext.deletedObjects.count);
   }];
} 
```

这是合并更改后的日志内容-

```
2013-04-03 00:51:40.476 CoreDataTest[41617:c07] Before merge: updates - 0, inserts - 0, deletes - 0
2013-04-03 00:51:40.477 CoreDataTest[41617:c07] After merge: updates - 0, inserts - 0, deletes - 3 
```

您会注意到主上下文报告了 3 个待删除的对象。据我所知，这是不正确的 - 不应该 mergeContextChanges: 导致（否则完全未触及）上下文的状态不显示挂起的更改吗？此方法的要点是更改已提交到持久存储。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:47:23.123

的文档`mergeChangesFromContextDidSaveNotification:`说：

> 此方法刷新已在其他上下文中更新的任何对象，任何新插入的对象中的故障，**并在已删除的对象上调用 deleteObject** :。

这（正如我所读）与您的结果一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:31:30.843

这些对象可能是在主上下文中获取的（在它们删除之前）。
由于您的 mainContext 父级是支持，您可以将这些更改提交到父级上下文（在 mainContext 上执行保存）。
保存不应该花费很长时间，因为它没有提交到持久存储，只提交到父上下文。

您可以将这些项目保留在主上下文中，直到它被应用程序中的另一个流保存。
您的 UI 将响应这些项目的删除。

# java - 如何在 Java 中使用 KeyPressed

> ID：15779849
> 
> 赞同：1
> 
> 时间：2013-04-03T05:54:49.547
> 
> 标签：java, swing, jframe, jpanel, jbutton

我正在处理我的 Java 作业。我必须创建一个虚拟键盘，而我的教授没有教我们 KeyPressed，我现在被困了几天。

我的问题是，如果我希望用户在 JTextFiled 中键入某些内容，并且希望在用户键入键盘上可用的任何字符时将 JButton 的背景更改为以不同的颜色显示，我该怎么做？

例如，如果用户按下空格键，我希望框架上空格键的颜色显示为黑色，当用户释放按钮时，颜色会变为原来的背景颜色。

我知道如何创建 JFrame、JButton、JLabel 和 JPanel。

这是我创建的一个简单代码。

```
import javax.swing.*;
import java.awt.*;

public class Assignment extends JFrame {

  private JButton jbtnSpace = new JButton(" ");
  private JPanel jpnl1 = new JPanel();

  private JTextArea txta = new JTextArea(10,62);

  public Assignment(){

  jpnl1.add(txta);

  jpnl1.add(jbtnSpace);

  this.add(jpnl1);

  }

  public static void main(String[] args) {

        Assignment jfrm = new Assignment();

        jfrm.setTitle("Assignment");
        jfrm.setSize(710,440);
        jfrm.setVisible(true);
        jfrm.setDefaultCloseOperation(EXIT_ON_CLOSE);

    }

} 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T17:52:05.613

尝试这个：

```
private void jTextField1KeyTyped(java.awt.event.KeyEvent evt) {                                     

    int i=evt.getKeyChar();
    if(i==KeyEvent.VK_SPACE)     //or any Key Constant
    {
        //your code of changing the color
    }
} 
```

我希望这有帮助。您必须了解其工作原理，如评论之一所述。

# android - 登录时 Android Tweet Api 错误

> ID：15779852
> 
> 赞同：0
> 
> 时间：2013-04-03T05:55:09.080
> 
> 标签：android, oauth, twitter

我在许多教程中都遇到了一个错误，现在我正在尝试[这个教程](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)，问题是当资源管理器打开时，我登录到 Twitter，当 twitter 要求授权时，我点击了登录按钮，但没有任何反应，比如我说，我在很多教程中都有这个问题，不只是这个，我做错了什么？

顺便说一句，我添加了这个类来修复 NetworkOnUI 错误：

```
private class Logintw extends AsyncTask<Void, Void, Uri> {

    @Override
    protected Uri doInBackground(Void... params) {
        try {
            requestToken = twitter
                    .getOAuthRequestToken(TWITTER_CALLBACK_URL);
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return Uri.parse(requestToken.getAuthenticationURL());
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
     */
    @Override
    protected void onPostExecute(Uri result) {
        Intent in = new Intent(Intent.ACTION_VIEW, result);
        in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        getApplicationContext().startActivity(in
                );
        super.onPostExecute(result);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:18:01.270

```
protected void onNewIntent(Intent intent) {
    Uri uri = intent.getData();
        if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
            String verifier = uri
                .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);
            try {
                // Get the access token
                AccessToken accessToken = twitter.getOAuthAccessToken(TrequestToken, verifier);
                // Shared Preferences
                mPrefs=getPreferences(MODE_PRIVATE);
                Editor e = mPrefs.edit();
                // After getting access token, access token secret store them in application preferences
                e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                e.putString(PREF_KEY_OAUTH_SECRET,accessToken.getTokenSecret());
                // Store login status - true
                e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                e.commit(); // save changes
                long userID = accessToken.getUserId();
                User user = twitter.showUser(userID);
                String username = user.getName();
                TwitterLogin=true;
                checkloginstatus();
                new updateTwitterStatus().execute(username+ " is using http://AllPagesManager.com , Try it Now!!!");
                } catch (Exception e) {
                    // Check log for login errors
                    Log.e("Twitter Login Error", "> " + e.getMessage());
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:09:46.793

```
private void loginToTwitter() {
    // Check if already logged in
    if (!isTwitterLoggedInAlready()) {
        try {
        ConfigurationBuilder builder = new ConfigurationBuilder();
        builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
        builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
        Configuration configuration = builder.build();
        TwitterFactory factory = new TwitterFactory(configuration);
        twitter = factory.getInstance();
            TrequestToken = twitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);
            this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(TrequestToken.getAuthenticationURL())));
        } catch (TwitterException e) {
            e.printStackTrace();
        }
    } else {
        Toast.makeText(getApplicationContext(),"Already Login to twitter!-----", Toast.LENGTH_SHORT).show();
        TwitterLogin=true;
        checkloginstatus();

    }
} 
```

# php - TCPDF 将底部边距设置为零

> ID：15779856
> 
> 赞同：20
> 
> 时间：2013-04-03T05:55:22.580
> 
> 标签：php, pdf, margin, tcpdf

我正在使用 php 中的 TCPDF 创建 pdf，我需要将我的数据包含在没有底部边距的 pdf 中，数据将包含在页面的末尾。

```
$pdf->SetLeftMargin(14);
$pdf->SetTopMargin(6);
$pdf->SetFont($fontname, '', '9');
$pdf->setPrintHeader(false);
$pdf->SetFooterMargin(0);
$pdf->setPrintFooter(false);

$pdf->AddPage();
$pdf->writeHTML($html, true, 0, true, 0); 
```

我正在使用上面的代码。有人知道如何使用 tcpdf 从 pdf 中删除边距空间吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-03T06:36:36.127

您看到的边距是由于 pageBreak 边距

添加这个`$pdf->SetAutoPageBreak(TRUE, 0);` 肯定会从底部删除边距

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T06:03:59.500

试试这个

```
 $pdf->setCellPaddings(0,0,0,0); 
```

阅读这个......你会有所了解...... [http://www.tcpdf.org/examples/example_022.phps](http://www.tcpdf.org/examples/example_022.phps)

# twitter-bootstrap - Bootstrap Tooltip 隐藏了触发它的链接

> ID：15779857
> 
> 赞同：0
> 
> 时间：2013-04-03T05:55:29.173
> 
> 标签：twitter-bootstrap

我创建了一个工具提示，这是标记

```
<a href="search?id=34535" rel="tooltip" title="This is a Reddit App">Reddit App</a> 
```

我通过这样的Javascript触发它

```
jQuery('body').tooltip({
    selector: '[rel=tooltip]',
    placement: "right"
}); 
```

问题是当我的鼠标离开链接以及工具提示时，它也会隐藏链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T18:16:01.627

这是与工具提示插件的 javascript 库冲突。您可以通过在链接中使用以下 css 来修复它...

```
显示：内联块！重要；
```

这将防止链接消失，但真正的问题是 js 库冲突。

# jquery - CSS 子菜单显示在 jQuery UI 选项卡下

> ID：15779858
> 
> 赞同：1
> 
> 时间：2013-04-03T05:55:41.243
> 
> 标签：jquery, css, jquery-ui

我为网页左侧创建了一个 css 垂直菜单，其中也包括子菜单，然后我使用了包含在网页右侧（在 asp.net 中）的 jQuery UI 选项卡，但这里的问题是我的子菜单显示在 jQuery 选项卡下（在背面），如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/c3qhA.jpg)

我在 CSS 和设计方面非常糟糕，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:02:57.843

使用下面的 z-index 示例.....

```
<div class="main">
    <div class="menu"></div>
    <div class="content"></div>    
</div> 
```

它的 CSS

```
.menu{position:relative; z-index:99;}
.content{position:relative; z-index:0;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T05:48:37.570

你应该像这样使用......使用下面的z-index示例......

```
<div class="main">
    <div class="menu"></div>
    <div class="content"></div>    
</div> 
```

# ruby - 多字节字符是否会干扰正则表达式中的结束行字符？

> ID：15779859
> 
> 赞同：16
> 
> 时间：2013-04-03T05:55:42.347
> 
> 标签：ruby, regex, encoding, multibyte, ruby-2.0

使用这个正则表达式：

```
regex1 = /\z/ 
```

以下字符串匹配：

```
"hello" =~ regex1 # => 5
"こんにちは" =~ regex1 # => 5 
```

但使用这些正则表达式：

```
regex2 = /#$/?\z/
regex3 = /\n?\z/ 
```

他们表现出不同：

```
"hello" =~ regex2 # => 5
"hello" =~ regex3 # => 5
"こんにちは" =~ regex2 # => nil
"こんにちは" =~ regex3 # => nil 
```

什么是干扰？字符串编码为 UTF-8，操作系统为 Linux（即`$/`is `"\n"`）。多字节字符是否干扰`$/`？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:03:46.047

当编码允许多字节字符时，您报告的问题绝对是 1.9 的错误，`Regexp`但`RUBY_VERSION #=> "2.0.0"`在以前的 1.9 中已经存在，例如`__ENCODING__ #=> #<Encoding:UTF-8>`

不依赖于 Linux ，也可以在 OSX 和 Windows 中重现相同的行为。

在[修复错误 8210](http://bugs.ruby-lang.org/issues/8210)的同时，我们可以通过*隔离*和*了解*问题发生的情况来提供帮助。当适用于特定情况时，这对于任何*解决方法*也很有用。

我了解在以下情况下会出现问题：

*   **在字符串结尾** 之前搜索某些内容`\z`。
*   并且字符串的最后一个字符是**multi-byte**。
*   而之前的搜索使用**零个或一个**模式`?`
*   但搜索到的**零或一个**字符的数量少于最后一个字符的**字节数。**

该错误可能是由于正则表达式引擎实际检查的字节数和字符数之间的误解造成的。

几个例子可能会有所帮助：

## 测试 1：最后一个字符：“は”是 3 个字节：

```
s = "んにちは" 
```

### 在字符串结尾之前测试 ん [3 个字节] 的零个或一个：

```
s =~ /ん?\z/u   #=> 4"       # OK it works 3 == 3 
```

### 当我们尝试使用 ç [2 字节]

```
s =~ /ç?\z/u   #=> nil       # KO: BUG when 3 > 2
s =~ /x?ç?\z/u #=> 4         # OK it works 3 == ( 1+2 ) 
```

### 当测试 \n [1 个字节] 的零或之一时

```
s =~ /\n?\z/u #=> nil"      # KO: BUG when 3 > 1
s =~ /\n?\n?\z/u #=> nil"   # KO: BUG when 3 > 2
s =~ /\n?\n?\n?\z/u #=> 4"  # OK it works 3 == ( 1+1+1) 
```

通过 TEST1 的结果，我们可以断言： *如果字符串的最后一个多字节字符是 3 个字节，那么“之前的零或一”测试仅在我们之前测试至少 3 个字节（而不是 3 个字符）时才有效。*

## 测试 2：最后一个字符**“ç”**是 2 个字节

```
s = "in French there is the ç" 
```

### 检查 ん [3 个字节] 中的零个或一个”

```
s =~ /ん?\z/u #=> 24        # OK 2 <= 3 
```

### 检查 é [2 个字节] 中的零个或一个

```
s =~ /é?\z/u #=> 24         # OK 2 == 2
s =~ /x?é?\z/u #=> 24       # OK 2 < (2+1) 
```

### 测试 \n [1 个字节] 中的零个或一个

```
s =~ /\n?\z/u    #=> nil    # KO 2 > 1  ( the BUG occurs )
s =~ /\n?\n?\z/u #=> 24     # OK 2 == (1+1)
s =~ /\n?\n?\n?\z/u #=> 24  # OK 2 < (1+1+1) 
```

通过 TEST2 的结果，我们可以断言：*如果字符串的最后一个多字节字符是 2 个字节，那么“之前的零或一”测试仅在我们之前检查至少 2 个字节（而不是 2 个字符）时才有效。*

当多字节字符不在字符串末尾时，我发现它可以正常工作。

[带有我的测试代码的公共要点可在此处获得](https://gist.github.com/anonymous/5339185)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:26:01.103

在[Ruby trunk](http://bugs.ruby-lang.org/issues/8210)中，该问题现在已被接受为错误。希望它会得到修复。

更新：在 Ruby 主干中发布了两个补丁。

# ruby-on-rails - 使用 rvm 或亮盒 gem 升级到 ruby 1.9.3

> ID：15779860
> 
> 赞同：2
> 
> 时间：2013-04-03T05:55:44.207
> 
> 标签：ruby-on-rails, ruby, ubuntu, rvm

我目前在我的开发盒（osx）上使用 rvm，但我在我的服务器上使用系统 ruby​​（Ubuntu 10.04 上的 1.8.7）

我想将服务器升级到 1.9.3，并且一直在研究最好的方法。该服务器运行了大约四个 Rails 应用程序，都在 3.2.11 版本上。

我的选择似乎是使用 rvm 或使用 1.9.3 deb 包和 BrightBox 提供的 ruby​​-switch gem（也提供乘客包）

Brightbox 软件包似乎是一种干净的方式，但我想我会在这里问一个问题，看看这两种方法是否有我没有考虑过的优点或缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:15:26.917

Rvm is useful when you need to have two or more versions of Ruby on the *same machine*. Development machines tend to have this. There is no need to use a version manager if your production box only requires one version of Ruby.

To this effect, I'd suggest you're correct in doing a single installation from the deb package. I can see the ruby-switch gem gives similar functionality to rvm - up to you as to whether that's important. But if you're using three apps on the same version of ruby, it may not be!

# ruby-on-rails - 在 Ubuntu 12.10 上运行 bundle install - without production 时出错

> ID：15779866
> 
> 赞同：0
> 
> 时间：2013-04-03T05:56:16.417
> 
> 标签：ruby-on-rails, ubuntu, bundle

我目前正在尝试在 Ubuntu 12.10 上运行 bundle install - without production

这就是我得到的

> oyebimbola@ubuntu:~/rails_projects/first_app$ bundle install --without production :1:in `require': cannot load such file -- rubygems.rb (LoadError) from <internal:gem_prelude>:1:in`'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:48:32.270

尝试使用以下命令更新 ruby​​gems：

```
gem update --system 
```

之后安装最新版本的捆绑器

```
gem update bundler 
```

# extjs - 文本框值在 ext js 3 中查看为 url

> ID：15779868
> 
> 赞同：0
> 
> 时间：2013-04-03T05:56:30.167
> 
> 标签：extjs, extjs3

我有 ExtJs 文本框。我想将文本框值视为 URL。但 url 视图作为痛苦文本。我想在文本框中查看 url。我提交的文本如下

```
MyTextField3Ui = Ext.extend(Ext.form.TextField, {
    fieldLabel: 'Web Site',
    anchor: '100%',
    boxMaxWidth: 500,
    readOnly: true,
    id: 'website',
    initComponent: function() {
        MyTextField3Ui.superclass.initComponent.call(this);
    }
}); 
```

我对 ExtJs 很陌生，很抱歉问每个小问题。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:30:32.590

最好的方法是从 Ext.BoxComponent 而不是 Ext.form.TextField 定义一个小部件，并像这样注册一些 xtype。 `Ext.reg('hreffield', "extended class name will go here");` 并在扩展类中定义一个属性 `defaultAutoCreate : {tag: "div"/"text" whatever you like},` ，这将允许您进行更改。

用法将是

```
xtype: "hreffield",
id: "myid",
fieldLabel: "link",
width: 200,
tabIndex: 1,
value: "google.com" 
```

# django - django表单显示下拉列表导致typeError

> ID：15779871
> 
> 赞同：0
> 
> 时间：2013-04-03T05:56:40.803
> 
> 标签：django, forms, typeerror

在我的应用程序中，我需要用户从下拉列表中选择一个整数值。我想我会为此创建一个表单，如下所示

```
class CIForm(forms.Form):
    intervaloption = forms.ChoiceField(choices = [x for x in range(1,10)],label='Days taken') 
```

但是，当我尝试在 django shell 中使用 as_p() 显示它时，它抛出了一个 TypeError

```
In [29]: f= CIForm()

In [30]: f
Out[30]: <__main__.CIForm object at 0xaa93eec>

In [31]: print f.as_p()

ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (41, 0))

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: 'int' object is not iterable 
```

我无法弄清楚我做错了什么..你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:05:31.450

从[ChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ChoiceField.choices)文档中：

> 选择
> 
> 2 元组的可迭代（例如，列表或元组）用作该字段的选择。此参数接受与模型字段的选择参数相同的格式。有关更多详细信息，请参阅有关选项的模型字段参考文档。

像这样的东西应该工作：

```
class CIForm(forms.Form):
    intervaloption = forms.ChoiceField(choices = [(str(x), str(x)) for x in range(1,10)], label='Days taken') 
```

# c# - String 数组类型方法返回类型错误

> ID：15779873
> 
> 赞同：-5
> 
> 时间：2013-04-03T05:56:55.383
> 
> 标签：c#, arrays, string

```
public String[][] GetAllItems() 
    {
        FoodCityData.ShoppingBuddyEntities fdContext = new FoodCityData.ShoppingBuddyEntities();

        IQueryable<Item> Query =
       from c in fdContext.Item
       select c;

        List<Item> AllfNames = Query.ToList();
        int arrayZise = AllfNames.Count;
        String[,] xx = new String[arrayZise,2];
        int i = 0;
        int j = 0;
        foreach(Item x in AllfNames)
        {

                xx[i,0] = x.ItemName.ToString();
                xx[i, 1] = x.ItemPrice.ToString();
                i++;

        }

        return xx[2,2];  // how do i write return type?
    } 
```

我在此代码段返回类型中遇到错误。我可以知道如何正确编写此方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:58:29.763

你有[Jagged Array](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)返回类型，你需要返回二维[Rrectangular Array](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)，你可以像这样返回二维数组。

```
public String[,] GetAllItems() 
{
    //your code 
    String[,] xx = new String[arrayZise,2];
    //your code 
    return xx;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:59:02.657

您的方法假设返回[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)，而您试图返回[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)

将您的方法签名修改为：

```
public String[,] GetAllItems() 
```

目前您的方法返回一个字符串，这就是错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:59:11.953

您正在返回 a`string`但您的返回类型是 a `string[][]`。我认为您想要做的是返回 a `string[,]`：

```
public string[,] GetAllItems() 
{
    ...
    return xx;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:00:34.863

您的方法返回类型是*[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)*，并且由于您`xx[2,2]`是 a `string`，因此您的方法返回 simple `string`，这就是您收到错误的原因。

只需返回*[两个维度数组即可](http://msdn.microsoft.com/en-us/library/2yd9wwz4.aspx)*；

```
public String[,] GetAllItems() 
{
  .....
  return xx[2,2];    
} 
```

# ruby-on-rails-3 - 如何使用 capistrano 从生产部署中卸载 gem

> ID：15779875
> 
> 赞同：1
> 
> 时间：2013-04-03T05:57:03.163
> 
> 标签：ruby-on-rails-3, rvm, capistrano, bundler, rvm-capistrano

我正在将一个 Rails 应用程序部署到生产环境中，因此 gems 进入共享/捆绑。mysql2 gem 在 Ubuntu12.04 中似乎有问题，所以我想删除它并重新安装，但我该怎么做呢？我不能只是打电话`gem uninstall mysql2`。我试过`bundle exec gem uninstall mysql2 --path shared/bundle`但得到了错误`Could not locate Gemfile`。我将如何删除它？如果您需要更多信息，请联系 lmk。

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:41:15.960

您必须在包含 的目录`Gemfile`（例如您部署的项目的`current`目录）中才能`bundle exec`工作。`cd /path/to/your/project/current`先试，再试`bundle exec gem uninstall mysql2`。

如果这仍然不起作用，您可以随时手动删除 gem。只需转到您的捆绑目录以及`rm -rf`与该 gem 相关的所有文件/子目录。

# magento - 你能按价格对产品进行分类吗，从最贵的开始。在 magento 中

> ID：15779876
> 
> 赞同：0
> 
> 时间：2013-04-03T05:57:03.837
> 
> 标签：magento, search

您将如何对最昂贵的产品进行排序？

我目前将它设置为按价格排序，但它从最便宜的开始，然后逐步上升。有没有办法让它反过来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:09:54.797

Magento 目前不允许您从后端配置中定义排序顺序。但是，它们允许您选择可以排序的内容。要更改默认排序顺序，您必须执行以下操作：

1.  复制`app/code/core/Mage/Catalog/Block/Product/List/Toolbar.php`到`app/code/local/Mage/Catalog/Block/Product/List/Toolbar.php`

2.  打开`app/code/local/Mage/Catalog/Block/Product/List/Toolbar.php`

3.  寻找`protected $_direction = 'asc';`

4.  改成`protected $_direction = 'desc';`

5.  保存文件，清除缓存。

要将默认排序依据更改为价格，请执行以下操作：

1.  在 Magento Admin 中，转到系统 > 配置 > 目录

2.  将产品列表排序方式更改为价格

3.  点击保存配置

# java - 在 JPanel 内旋转 BufferedImage

> ID：15779877
> 
> 赞同：1
> 
> 时间：2013-04-03T05:57:21.523
> 
> 标签：java, swing, rotation, jpanel, bufferedimage

我正在尝试旋转 a`BufferedImage`并将其显示在 a 内`JLabel`（在 a 内`JPanel`）。当前结果会生成一个在黑色背景上旋转 10 度的白色正方形，但正方形内不存在图像。我知道`myPicture`不是空白，因为`myPicture`它本身`JPanel`在未旋转时正确显示。

这是代码：

```
int w = myPicture.getWidth();    

int h = myPicture.getHeight();  

BufferedImage newImage = new BufferedImage(w, h, myPicture.getType());

Graphics2D graphic = newImage.createGraphics();

graphic.rotate(Math.toRadians(10), w/2, h/2);

graphic.drawImage(myPicture, null, 0, 0);

picLabel.setIcon(new ImageIcon(newImage)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T06:12:04.943

没有太多事情要做，但有两件事浮现在脑海中。图像在旋转后可能没有被渲染到正确的位置，两个，`Graphics`当你完成它时你没有处理上下文（不是我相信它应该有效果，但你永远不知道）。

这是一个通过 渲染结果的简单示例`paintComponent`，但概念是相同的。

它使用一个`AffineTransformation`来旋转图像。

![在此处输入图像描述](https://i.stack.imgur.com/9AH2a.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.UIManager;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestRotateImage {

    public static void main(String[] args) {
        new TestRotateImage();
    }

    public TestRotateImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JSlider slider;
        private BufferedImage image;

        public TestPane() {
            setLayout(new BorderLayout());

            try {
                image = ImageIO.read(new File("/path/to/your/image"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            slider = new JSlider();
            slider.setMinimum(0);
            slider.setMaximum(360);
            slider.setMinorTickSpacing(5);
            slider.setMajorTickSpacing(10);
            slider.setValue(0);
            add(slider, BorderLayout.SOUTH);
            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    repaint();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? new Dimension(200, 200) : new Dimension(image.getWidth(), image.getHeight());
        }

        public double getAngle() {

            return Math.toRadians(slider.getValue());

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            g2d.setColor(Color.RED);
            g2d.drawLine(getWidth() / 2, 0, getWidth() / 2, getHeight());
            g2d.drawLine(0, getHeight() / 2, getWidth(), getHeight() / 2);

            g2d.setColor(Color.BLACK);
            int x = (getWidth() - image.getWidth()) / 2;
            int y = (getHeight() - image.getHeight()) / 2;
            AffineTransform at = new AffineTransform();
            at.setToRotation(getAngle(), x + (image.getWidth() / 2), y + (image.getHeight() / 2));
            at.translate(x, y);
            g2d.setTransform(at);
            g2d.drawImage(image, 0, 0, this);
            g2d.dispose();

        }
    }
} 
```

**使用 JLabel 更新**

![在此处输入图像描述](https://i.stack.imgur.com/tBsRJ.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.UIManager;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestRotateImage {

    public static void main(String[] args) {
        new TestRotateImage();
    }

    public TestRotateImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JSlider slider;
        private BufferedImage image;
        private JLabel label;

        public TestPane() {
            setLayout(new BorderLayout());

            label = new JLabel();
            label.setHorizontalAlignment(JLabel.CENTER);
            label.setVerticalAlignment(JLabel.CENTER);

            try {
                image = ImageIO.read(new File("/path/to/your/image"));
                label.setIcon(new ImageIcon(image));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            add(label);

            slider = new JSlider();
            slider.setMinimum(0);
            slider.setMaximum(360);
            slider.setMinorTickSpacing(5);
            slider.setMajorTickSpacing(10);
            slider.setValue(0);
            add(slider, BorderLayout.SOUTH);
            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    double radians = Math.toRadians(slider.getValue());
                    double sin = Math.abs(Math.sin(radians));
                    double cos = Math.abs(Math.cos(radians));
                    int newWidth = (int)Math.round(image.getWidth() * cos + image.getHeight() * sin);
                    int newHeight = (int)Math.round(image.getWidth() * sin + image.getHeight() * cos);

                    BufferedImage rotate = new BufferedImage(newWidth, newHeight, BufferedImage.TYPE_INT_ARGB);
                    Graphics2D g2d = rotate.createGraphics();
                    int x = (newWidth - image.getWidth()) / 2;
                    int y = (newHeight - image.getHeight()) / 2;
                    AffineTransform at = new AffineTransform();
                    at.setToRotation(getAngle(), x + (image.getWidth() / 2), y + (image.getHeight() / 2));
                    at.translate(x, y);
                    g2d.setTransform(at);
                    g2d.drawImage(image, 0, 0, TestPane.this);
                    g2d.dispose();
                    label.setIcon(new ImageIcon(rotate));
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? new Dimension(200, 200) : new Dimension(image.getWidth(), image.getHeight());
        }

        public double getAngle() {

            return Math.toRadians(slider.getValue());

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:31:24.337

我解决了我自己的问题。问题在于代码：

```
myPicture.getType() 
```

由于您可以放入程序的图像类型存在很大差异，因此当您开始绘制新的 BufferedImage 时，结果将是不可预测的。我通过明确设置类型解决了这个问题，在我的情况下需要

```
BufferedImage.TYPE_INT_ARGB 
```

所以完整的声明如下：

```
BufferedImage newImage = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB); 
```

# sql - 如何将一个表的记录保存在另一个临时表中？

> ID：15779885
> 
> 赞同：0
> 
> 时间：2013-04-03T05:58:01.777
> 
> 标签：sql, sql-server

我有一个场景，比如：有一个`ErrorLog`表，如果该表中有当前日期的任何行（`GETDATE()`）我想将这些行保存在另一个临时表中，并且需要在执行存储后删除该表中的当前行程序。我想知道实现这个的逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:06:57.997

Since you mentioned GETDATE() function , I am assuming database is SQL Server.

```
Select * Into #currentErrorLogTable
from ErrorLogTable
where convert(varchar(11),createdDate,101)=convert(varchar(11),getdate(),101)

Delete From ErrorLogTable
Where convert(varchar(11),createdDate,101)=convert(varchar(11),getdate(),101)

Select * from #currentErrorLogTable

drop table #currentErrorLogTable 
```

# c# - 异步 TcpClient 没有及时读取所有数据

> ID：15779889
> 
> 赞同：2
> 
> 时间：2013-04-03T05:58:28.553
> 
> 标签：c#, .net, asynchronous, tcpclient, beginread

如果来自服务器的数据不多，或者如果有很多数据并且我取消注释该`Thread.Sleep(500)`行，则下面的代码可以工作。但是我不想使用该`Thread.Sleep`行，但如果我删除它，程序将在从服务器读取所有数据之前完成。似乎问题在于`EndRead()`在读取所有数据之前不会阻塞，这是可以理解的并且应该通过对 的递归调用来修复`ReceiveCallback`，但事实并非如此。

我有一个在 Linux 上使用 C/C++ 编写的工作客户端。我正在尝试使其与 c# 和 .Net 一起使用。我在 Linux 上使用 MonoDevelop 和 .Net 4.0。我感谢任何有关如何解决此问题的帮助。

```
cli.send("command");
// Thread.Sleep(500); 
cli.receive();
Console.WriteLine("response: {0}", cli.Response); 
```

```
 private Static ManualResetEvent recvEvt = new ManualResetEvent(false);

    public static void receive() {
        StateObject state = new StateObject();
        try {
            state.stream = client.GetStream();
            state.stream.BeginRead(state.buffer, 0, state.bufferSize, new AsyncCallback(ReceiveCallback), state);
            recvEvt.WaitOne();
            recvEvt.Reset();
        }
        catch (ArgumentNullException ne) { errorMessage = ne.ToString(); }
        catch (ArgumentException ae) { errorMessage = ae.ToString(); }
        catch (ObjectDisposedException oe) { errorMessage = oe.ToString(); }
        catch (InvalidOperationException ie) { errorMessage = ie.ToString(); }
        catch (SocketException se) { errorMessage = se.ToString(); }
    }

   private static void ReceiveCallback(IAsyncResult ar) {
        StateObject state = (StateObject)ar.AsyncState;
        try {
            int bytesRead = state.stream.EndRead(ar);
            if (bytesRead > 0 ) {
                state.sb.Append(Encoding.ASCII.GetString(state.buffer, 0, bytesRead));
                response = state.sb.ToString();
                if (state.stream.DataAvailable) {
                    state.stream.BeginRead(state.buffer, 0, state.bufferSize, new AsyncCallback(ReceiveCallback), state);
                    recvEvt.WaitOne();
                    recvEvt.Reset();
                }else
                    recvEvt.Set();
            }else
                recvEvt.Set();
        }
        catch (ArgumentNullException ne) { errorMessage = ne.ToString(); }
        catch (ArgumentException ae) { errorMessage = ae.ToString(); }
        catch (ObjectDisposedException oe) { errorMessage = oe.ToString(); }
        catch (InvalidOperationException ie) { errorMessage = ie.ToString(); }
        catch (SocketException se) { errorMessage = se.ToString(); }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:12:00.177

问题是应用程序无法确定是否有更多数据通过网络传入。它只知道它是否收到了任何数据。将告诉您`DataAvailable`的是是否已收到可以从网络流中读取的数据。远程端尚未发送给您的数据和它已发送但尚未通过网络传递给您的数据对于您的应用程序来说本质上是未知的。

您将不得不`BeginRead`再次重复呼叫，直到您或远程端挂断。稍微简化`ReceiveCallback`一下看起来像这样：

```
private static void ReceiveCallback(IAsyncResult ar) {
    StateObject state = (StateObject)ar.AsyncState;
    int bytesRead = state.stream.EndRead(ar);
    if (bytesRead > 0 ) {
        state.sb.Append(Encoding.ASCII.GetString(state.buffer, 0, bytesRead));
        state.stream.BeginRead(state.buffer, 0, state.bufferSize, new AsyncCallback(ReceiveCallback), state);
    } else {
        response = state.sb.ToString();
    }
} 
```

一旦接收到数据或连接终止，将调用回调。一旦连接关闭，响应就完成了。

# mahout - 在 Mahout 中，如何在矩阵乘法中生成 itemId 以及 userId 和偏好值

> ID：15779893
> 
> 赞同：1
> 
> 时间：2013-04-03T05:58:51.090
> 
> 标签：mahout, recommendation-engine, mahout-recommender

我们有两个矩阵：

*   U->用户特征，包含用户根据项目的 20 个特征的评分（比如电影是项目，它的特征可能是动作、悲剧......） 6x20。
*   M->项目特征（包含项目的特征评级（如果行动，那么它的评级，如果悲剧......）10x20）。

使用 Mahout 算法 matrixmult 取两者的点积。对于每个项目，它都显示相应的 userId 和 prefValue。我们还需要与它们一起生成 ItemId。输出是这样的：

```
{1:2.8565926935818617,2:2.8814964873086852,3:2.3773543936434685,4:2.496325304186463,5:2.5705926376370076,6:2.1250241960704033}
{1:4.013041997061508,2:4.8002775481850515,3:3.9784440113314012,4:4.166481182599563,5:3.9695193417407655,6:3.1884041114544}
{1:3.651782747107523,2:4.388020478870542,3:4.779716339815735,4:4.1679196459740515,5:3.4571455995298668,6:3.173926716763791}
{1:1.460713098843009,2:1.755208191548217,3:1.9118865359262938,4:1.6671678583896208,5:1.3828582398119467,6:1.2695706867055168}
{1:0.7303565494215045,2:0.8776040957741085,3:0.9559432679631469,4:0.8335839291948104,5:0.6914291199059734,6:0.6347853433527582}
{1:3.665260265121202,2:4.392557489548237,3:3.9839325032084063,4:4.789440462322372,5:3.5796149241077186,6:2.899968609025724}
{1:1.4661041060484805,2:1.7570229958192944,3:1.5935730012833615,4:1.9157761849289485,5:1.4318459696430867,6:1.1599874436102895}
{1:2.7611810536133348,2:3.061568194855434,3:2.417510062701028,4:2.6187515401236525,5:2.8459602149193564,6:2.302795567224229}
{1:1.8407873690755552,2:2.0410454632369546,3:1.6116733751340164,4:1.745834360082434,5:1.8973068099462367,6:1.5351970448161516}
{1:1.7657295572889784,2:1.902295838215425,3:1.7169047303913343,4:1.6411563771362838,5:1.7813697244603068,6:1.880839700488139} 
```

其中有 6 个用户和 10 个项目。这里，对于每个项目，显示用户 id n 偏好值，但不显示项目 id

# python - 如何使用python检查一个值是否在另一个值的10以内

> ID：15779903
> 
> 赞同：3
> 
> 时间：2013-04-03T05:59:29.733
> 
> 标签：python, python-3.x

我知道有人问过类似的问题，但请多多包涵。我正在帮助我的表弟在 python 中创建一个程序，其中硬币被翻转 1000 次，“玩家”可以这么说猜测出现了多少次正面。然后，她想检查猜测是否在正面出现次数的 10 以内，并相应地做出回应（骗子你（回答 - 猜测）关闭）或（干得好（回答 - 猜测）关闭）。我习惯于使用 UNIX，而 python 似乎以非常不同的方式处理项目。这是代码可能以某种方式使用范围来检查猜测是否在范围内？

```
#Guess how many times heads will occur when a coin is flipped 1000 time
import random
import time

print('I will flip a coin 1000 times. Guess how many times it will come up heads.     (Press enter to begin)')
int(guess) = input()
flips = 0
heads = 0
while flips < 1000:
    if random.randint(0, 1) == 1:
        heads = heads + 1
    flips = flips + 1

    if flips == 900:
        print('900 flips and there have been ' + str(heads) + ' heads.')
        time.sleep(5)
    if flips == 100:
        print('At 100 tosses, heads has come up ' + str(heads) + ' times so far.')
        time.sleep(2)
    if flips == 500:
        print('Half way done, and heads has come up ' + str(heads) + ' times.')
        time.sleep(2)

print()
print('Out of 1000 coin tosses, heads came up ' + str(heads) + ' times!')
time.sleep(2)
print('Were you close?')
int(answer) = input() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T06:01:54.363

```
if heads - 10 <= int(guess) <= heads + 10: 
```

或者

```
if abs(heads - int(guess)) <= 10: 
```

# string - 小写球拍中的整个字符串

> ID：15779906
> 
> 赞同：7
> 
> 时间：2013-04-03T05:59:32.757
> 
> 标签：string, scheme, racket, lowercase

[有没有办法在Racket](http://racket-lang.org/)中将字符串中的所有字符转换为小写？

我能想到的唯一方法是将 char-downcase 但它不适用于字符串

我正在使用初学者语言，所以我无法使用某些功能

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T13:57:23.197

在实践中，您将使用以下[`string-downcase`](http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-downcase%29%29)过程：

```
(string-downcase "ABCDE")
=> "abcde" 
```

但是你正在使用初学者的语言，所以这里是解决它的一般思路 - 我会给你一些提示，如果你尝试自己解决问题会更好。首先，让我们将问题分为两部分：一个将字符串转换为字符列表的过程，调用执行实际转换的辅助过程，最后将转换后的列表转换回字符串：

```
(define (lowercase str)
  (<???>           ; convert the list of chars into a string
   (convert        ; call the helper procedure
    (<???> str)))) ; convert the string into a list of chars 
```

该`convert`过程是一个助手，它完成繁重的工作并将字符列表中的每个字符转换为小写：

```
(define (convert strlst)
  (if <???>                  ; if the list of chars is empty
      <???>                  ; return the empty list
      (cons                  ; else `cons`
       (<???> <???>)         ; convert to lowercase the first char in list
       (convert <???>))))    ; advance recursion over list 
```

该解决方案的关键部分是操作[字符串](http://docs.racket-lang.org/reference/strings.html)和[字符](http://docs.racket-lang.org/reference/characters.html)的程序，单击链接并研究文档。

# android - 如何通过android中的代码选择sim

> ID：15779907
> 
> 赞同：4
> 
> 时间：2013-04-03T05:59:35.047
> 
> 标签：android, android-intent

我正在开发 SMS 应用程序。如何为选择 sim 选项的使用提供选项。我在用 ：

```
smsManager.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
```

用于发送短信。

# c++ - 复制回调？

> ID：15779908
> 
> 赞同：0
> 
> 时间：2013-04-03T05:59:35.540
> 
> 标签：c++, callback, scope

是否可以将一个对象的回调复制到另一个对象中？

现在我正在处理一个具有如下成员的数据结构：

```
class Obj
{
  // some unrelated variables
  // some unrelated functions
  void (*callback)(Obj& r, void* user);
  void* callback_data;
} 
```

回调分配如下：

```
o->callback = AFunctionInAnotherScope; 
```

`Obj`保留一个向量，但`clear()`每次迭代都必须在该向量上调用一个。

回调函数在另一个范围内，它也分配了回调。

当前范围无法访问回调函数，但我想创建新的 Obj 并为它们分配相同的回调。有没有办法做到这一点？

e：到目前为止，我已经尝试过使用`memcpy(&copyObj, &vectorOfObj.at(0), sizeof(Obj));`，但我认为我没有正确使用它。

提前致谢。

更新：这是创建 Obj 的文件的样子：

**调用者.cpp**

```
#include "SomeClass.h"

void Callback(Obj& r, void* dummy_data)
{
   // do things
}

int main( int argc, char* argv[] )
{
   for(int i = 0; i < SomeClass::vectorOfOBj.size(); ++i)
   {
      vectorOfObj.at(i).callback = Callback;
   }
} 
```

稍后，在另一个无权访问 Caller.cpp 但有权访问 SomeClass.h 的文件中

```
#define VAR(V,init) __typeof(init) V=(init)
#define FOR_EACH(I,C) for(VAR(I,(C).begin());I!=(C).end();I++)

void Run()
{
   FOR_EACH(o, vectorOfObjects)
   {
     Obj &b = *o;
     r->callback(b, o->callback_data);
   }

   vectorOfObjects.clear();

   // repopulate vectorOfObject, might not be the same size as before. Could be bigger
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:03:11.643

您的回调只是一个指针，那么简单地复制它有什么问题？

```
copyObj.callback = vectorOfObj.at(0).callback; 
```

在您的情况下，也许只是在清除向量之前存储指针：

```
typedef void (*callback_t)(Obj& r, void* user);

callback_t cb = vectorOfObj.at(0).callback;
vectorOfObj.clear();

// later...
Obj o;
o.callback = cb; 
```

# perl - 替换文件中的一些字符串并保存

> ID：15779909
> 
> 赞同：0
> 
> 时间：2013-04-03T05:59:46.410
> 
> 标签：perl

我想替换文件中的一些字符串并将其保存回来。我已经有代码可以打开文件，找到字符串并替换它。但是文件没有被保存。它有什么问题？

```
open MYINPUTFILE, $EventLog;
my @lines = <MYINPUTFILE>; # read file into
my @errors = ();
my $size = $#lines + 1;
for ($i = 0; $i < $size; $i++) {
    if ($lines[$i] =~ m/$s1(.*)$s2/) {
        $lines[$i] =~ s/$s1(.*)$s2/$s1.($1+4).$s2/eg;
        print $lines[$i] ;
    }
}
close MYINPUTFILE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:00:38.550

您的脚本以读取模式打开文件，并打印到 STDOUT。您需要打开第二个临时文件，将更改后的输出写入其中。最后，删除第一个文件并将临时文件重命名为最终文件。

另外，我会这样做：

替换文件句柄：

```
open my $input_file, '<', $EventLog or die $!; 
```

不要将整个文件读入数组（对于大文件来说这是个坏主意）。逐行阅读并妥善处理：

```
while( my $line = <$input_file> ) {
   #...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:13:27.030

Perl FAQ 中有关于这个主题的好建议。

[如何在文件中更改、删除或插入一行，或附加到文件的开头？](http://perldoc.perl.org/5.16.1/perlfaq5.html#How-do-I-change%2c-delete%2c-or-insert-a-line-in-a-file%2c-or-append-to-the-beginning-of-a-file%3f)

# scala - 在编译时使用宏创建类型良好的实例

> ID：15779919
> 
> 赞同：2
> 
> 时间：2013-04-03T06:00:38.107
> 
> 标签：scala, scala-macros

我希望能够使用基于某些类名的宏创建类型良好的实例。例如，我希望能够`Long`像这样创建一个实例：

```
def fromName[T](typeName: String) = macro FromNameMacro.impl[T]

// will typecheck ok
fromName("scala.Long") ==== 0L
// will not typecheck ok
fromName("scala.Long") ==== "" 
```

实现将类似于：

```
import scala.reflect.macros.Context

object FromNameMacro {
  def impl[T: c.WeakTypeTag](c : Context)(klassName: c.Expr[String]): c.Expr[T] = {
    import c.{universe => u}; import u._
    val name = klassName.tree match { case Literal(Constant(n)) => n.toString }

    // of course this doesn't work...
    reify(this.getClass.getClassLoader.loadClass(name).newInstance.asInstanceOf[T])
  }
} 
```

我的问题是：

*   鉴于类型取决于参数，我需要做什么才能让宏返回正确类型的对象？

*   甚至可以使用 Scala 2.10 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:13:26.480

在 2.10.x 中让宏返回正确类型的结果相当简单，

```
import scala.language.experimental.macros
import scala.reflect.macros.Context

object fromName {
  def apply(tpe: String): Any = macro fromNameImpl

  def fromNameImpl(c: Context)(tpe: c.Expr[String]): c.Expr[Any] = {
    import c.universe._

    c.Expr(tpe.tree match {
      case Literal(Constant("scala.Long")) => Literal(Constant(0L))
      case Literal(Constant("java.lang.String")) => Literal(Constant(""))
      case _ => Literal(Constant(()))
    })
  }
} 
```

示例 REPL 会话，

```
scala> fromName("scala.Long")
res0: Long = 0

scala> fromName("java.lang.String")
res1: String = "" 
```

# linux - setenv/clearenv + procfs 环境

> ID：15779923
> 
> 赞同：5
> 
> 时间：2013-04-03T06:00:59.663
> 
> 标签：linux, procfs, setenv

`/proc/pid/environ`如果进程修改了其环境，是否可以从文件中获取相关信息？我的测试表明`setenv/putenv/clearenv`不更新`environ`文件。但是，`bash`可以调用`unset ENV`并查看 procfs 的变化。

# android - Android动态显示下载图片

> ID：15779926
> 
> 赞同：0
> 
> 时间：2013-04-03T06:01:03.923
> 
> 标签：android, bitmap, android-imageview

我想提供良好的用户体验，即动态显示下载的图像。我的意思是即使在从远程服务器下载位图期间也应该显示位图。一些图像网站具有此功能。例如，如果我从远程服务器下载了一半的位图数据，它可以在 imageview 中显示一半的位图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:06:47.560

您可以使用**“Android-Query”**库来显示来自 Internet 的图像。请看我的这个答案并按照Android-Query的**wiki页面一步一步来**

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview/14827292#14827292)

显示图像的所有信息都在 Wiki 页面上。[https://code.google.com/p/android-query/wiki/ImageLoading](https://code.google.com/p/android-query/wiki/ImageLoading)

```
 aq.id(imageview).progress(this).image(imageUrl, true, true, **50, 0**, new BitmapAjaxCallback(){

                       @Override
                       public void callback(String url, ImageView iv, Bitmap bm, AjaxStatus status){

                           iv.setImageBitmap(bm);

                       }

               }); 
```

# objective-c - 可变参数函数中的 void*

> ID：15779927
> 
> 赞同：2
> 
> 时间：2013-04-03T06:01:06.080
> 
> 标签：objective-c, void-pointers, variadic-functions

我正在尝试创建一个接受任意数量参数的方法，这些参数将用于创建 NSInvocation（方法周围的对象包装器）。void 指针是否可以作为可变参数函数中的参数传递，或者编译器是否需要提前知道传递的类型的大小？NSInvocation 实例方法“setArgument:(void*) atIndex:index”通常是这样做的。

```
-(void)addArguments:(void *)argument, ... {
    va_list args;
    va_start(args, argument);

    int index = 2;
    void *value;
    [self.invocation setArgument:argument atIndex:index];
    index++;

    while ((value = va_arg(args, void*)))
    {
        [self.invocation setArgument:value atIndex:index];
        index++;
    }
    va_end(args);
    return;
} 
```

# c++ - 如何像这样在 QListWidget 下添加这样的组按钮？

> ID：15779929
> 
> 赞同：0
> 
> 时间：2013-04-03T06:01:14.023
> 
> 标签：c++, linux, qt, user-interface

我学习编写一个简单的 Player 使用 Qt。

我想问一下，如何创建这样的组按钮：

![在此处输入图像描述](https://i.stack.imgur.com/uTNBW.png)

使用`QGroupButton`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:31:48.580

Qt 中没有 QGroupButton 类。有一个`QButtonGroup`类，但它不提供任何视觉表示。

在您的情况下，您可以将按钮放入`QHBoxLayout`间距设置为 0 ( `QLayout::setSpacing(int)`)

# ios - 从 UIViewController 使用 refreshControl

> ID：15779931
> 
> 赞同：0
> 
> 时间：2013-04-03T06:01:22.393
> 
> 标签：ios, objective-c, pull-to-refresh, uirefreshcontrol

我目前有一个`UIViewController`有两个`UIViews`，通过隐藏和取消隐藏它们`segmentedControl`。我希望能够实现该`pull-to-refresh`功能，如果我有一个`UITableViewController`. 但我现在没有那个，所以我很不知道该怎么做。

这显然会给我错误，因为`UIViewController`没有`refreshControl`

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
refreshControl.tintColor = [UIColor magentaColor];
self.refreshControl = refreshControl; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-24T07:59:51.687

UIRefreshControl 只能在 UITableViewController 类中使用。

# java - 如何在 Eclipse 中作为 .jar 运行

> ID：15779934
> 
> 赞同：1
> 
> 时间：2013-04-03T06:01:38.230
> 
> 标签：java, eclipse, jar

我现在已经编程了大约 6 个月，我刚刚开始使用 eclipse 导出 jar 文件（我之前使用的是 cmd）。我知道您可以使用`export function`导出到 a `jar`，但我想知道是否有办法让 eclipse 在我单击`Run`按钮时自动执行此操作。我做了一些*谷歌搜索*，看起来我需要使用`Run Configuration`或`External Tools`，但我没有找到任何关于如何将其设置为导出到 jar 然后运行它的分步说明或示例，而且我太菜鸟（不是n00b，有区别）仍然无法自己弄清楚。举个例子就好了，循序渐进会更好，但我会尽量不挑剔。谢谢你的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:16:59.953

由于您已经使用了命令行，您可以在外部工具配置中输入相同的配置（使用下拉箭头）。双击左侧的程序以创建新配置。然后你只需要提供工作目录和参数。

这个页面给出了一个带有图片的例子：http: [//developer4life.blogspot.be/2012/08/save-time-with-eclipse-external-tools.html](http://developer4life.blogspot.be/2012/08/save-time-with-eclipse-external-tools.html)

# python - 芹菜工人迷路了

> ID：15779936
> 
> 赞同：2
> 
> 时间：2013-04-03T06:01:40.853
> 
> 标签：python, celery, django-celery, celery-task, celeryd

我们的部署过程使用终止进程列表中的所有 celery 进程来重新启动 celery。

有时我会在芹菜原木中看到“工人丢失”。如果发生这种情况时任务正在运行，该任务会重新运行还是会丢失？我们正在使用redis。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:49:21.130

基本上，您应该向每个 celery worker 发送 SIGTERM。[http://docs.celeryproject.org/en/latest/userguide/workers.html#stopping-the-worker](http://docs.celeryproject.org/en/latest/userguide/workers.html#stopping-the-worker)。

如果你想杀死你的进程并重新启动任务，你可以设置设置 ACK_LATE，这将返回任务以查询工作人员是否无法成功完成任务并停止。 [http://docs.celeryproject.org/en/latest/configuration.html?highlight=acks_late#celery-acks-late](http://docs.celeryproject.org/en/latest/configuration.html?highlight=acks_late#celery-acks-late)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-17T13:06:17.593

您可以将这些标志设置为 true

*   `CELERY_TASK_REJECT_ON_WORKER_LOST`（**这负责将丢失的任务重新排队，因为突然退出**）
*   `CELERY_ACKS_LATE`
*   `CELERY_ACKS_ON_FAILURE_OR_TIMEOUT`（默认出现）

[https://docs.celeryproject.org/en/stable/userguide/configuration.html#task-reject-on-worker-lost](https://docs.celeryproject.org/en/stable/userguide/configuration.html#task-reject-on-worker-lost) [https://docs.celeryproject.org/en/stable/userguide/configuration.html#task -acks-late](https://docs.celeryproject.org/en/stable/userguide/configuration.html#task-acks-late) [https://docs.celeryproject.org/en/stable/userguide/configuration.html#task-acks-on-failure-or-timeout](https://docs.celeryproject.org/en/stable/userguide/configuration.html#task-acks-on-failure-or-timeout)

# javascript - 如何使用 Google Apps 脚本自动下载 Google 电子表格数据

> ID：15779941
> 
> 赞同：2
> 
> 时间：2013-04-03T06:02:02.670
> 
> 标签：javascript, google-apps-script

我是使用 Google Apps 脚本的新手。我想知道我是否可以创建一个备份程序，在每次更改 15 分钟后自动将电子表格数据下载到 csv 文件中。我必须创建某种 cronjob 吗？我创建了一个以下脚本，它从当前工作表中读取所有数据并创建一个 csv 文件。

```
/**
 * Adds a custom menu to the active spreadsheet, containing a single menu item
 * for invoking the readRows() function specified above.
 * The onOpen() function, when defined, is automatically invoked whenever the
 * spreadsheet is opened.
 * For more information on using the Spreadsheet API, see
 * https://developers.google.com/apps-script/service_spreadsheet
 */
function onOpen() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var entries = [{
    name : "Download Data",
    functionName : "saveAsCSV"
  }];
  sheet.addMenu("Script Center Menu", entries);
};

function saveAsCSV() {
  // Prompts the user for the file name
  var fileName = Browser.inputBox("Save CSV file as (e.g. myCSVFile):");

  // Check that the file name entered wasn't empty
  if (fileName.length !== 0) {
    // Add the ".csv" extension to the file name
    fileName = fileName + ".csv";
    // Convert the range data to CSV format
    var csvFile = convertRangeToCsvFile_(fileName);
    // Create a file in the Docs List with the given name and the CSV data
    DocsList.createFile(fileName, csvFile);
  }
  else {
    Browser.msgBox("Error: Please enter a CSV file name.");
  }
}

function convertRangeToCsvFile_(csvFileName) {
  try {
    var csvFile = undefined;

    var sheet = SpreadsheetApp.getActiveSheet();
    var rows = sheet.getDataRange();
    var numRows = rows.getNumRows();
    var data = rows.getValues();

    // Loop through the data in the range and build a string with the CSV data
    if (data.length > 1) {
      var csv = "";
      for (var row = 0; row < data.length; row++) {
        for (var col = 0; col < data[row].length; col++) {
          if (data[row][col].toString().indexOf(",") != -1) {
            data[row][col] = "\"" + data[row][col] + "\"";
          }
        }

        // Join each row's columns
        // Add a carriage return to end of each row, except for the last one
        if (row < data.length-1) {
          csv += data[row].join(",") + "\r\n";
        }
        else {
          csv += data[row];
        }
      }
      csvFile = csv;
    }
    return csvFile;
  }
  catch(err) {
    Logger.log(err);
    Browser.msgBox(err);
  }
} 
```

我想定期运行这个脚本。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:47:04.220

代码将是相同的。使用只需在电子表格上添加触发器。只需转到脚本编辑器 -> 资源 -> 所有触发器并添加一个新触发器，使其成为时间驱动并选择间隔即可。:)

```
function saveAsCSV() {
  // Prompts the user for the file name
  var fileName = SpreadsheetApp.getActiveSheet().getSheetName();

  // Check that the file name entered wasn't empty
  if (fileName.length !== 0) {
    // Add the ".csv" extension to the file name
    fileName = fileName + ".csv";

    // Convert the range data to CSV format
    var csvFile = convertRangeToCsvFile_(fileName);
    // Create a file in the Docs List with the given name and the CSV data
    DocsList.createFile(fileName, csvFile);
  }
  else {
    Browser.msgBox("Error: Please enter a CSV file name.");
  }
}

function convertRangeToCsvFile_(csvFileName) {
  try {
    var csvFile = undefined;

    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var sheet = ss.getSheets()[10];
    var rows = sheet.getDataRange();
    var numRows = rows.getNumRows();
    var data = rows.getValues();

    // Loop through the data in the range and build a string with the CSV data
    if (data.length > 1) {
      var csv = "";
      for (var row = 0; row < data.length; row++) {
        for (var col = 0; col < data[row].length; col++) {
          if (data[row][col].toString().indexOf(",") != -1) {
            data[row][col] = "\"" + data[row][col] + "\"";
          }
        }

        // Join each row's columns
        // Add a carriage return to end of each row, except for the last one
        if (row < data.length-1) {
          csv += data[row].join(",") + "\r\n";
        }
        else {
          csv += data[row];
        }
      }
      csvFile = csv;
    }
    return csvFile;
  }
  catch(err) {
    Logger.log(err);
    Browser.msgBox(err);
  }
} 
```

# c# - 在字符串中添加斜线

> ID：15779943
> 
> 赞同：-1
> 
> 时间：2013-04-03T06:02:16.500
> 
> 标签：c#, string

我想替换这样的字符串

```
'10001' 
```

进入

```
\'10001\' 
```

以下代码不起作用：

```
Console.WriteLine(content);
content.Replace("'", "\\'");
Console.WriteLine(content); 
```

甚至这个：

```
Console.WriteLine(content);
content.Replace("'", "\\\\'");
Console.WriteLine(content); 
```

`content`前后的值完全一样`replace`，即`'10001'`

我正在使用 VC# 2010 Express。感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:04:05.020

你必须写：

```
content = content.Replace("'", "\\'"); 
```

`string`是不可变类型，这意味着它不能被修改。相反，像`Replace`,`Insert`等方法总是返回一个新的字符串实例。[请参阅此处](http://msdn.microsoft.com/en-us/library/s1wwdcbf.aspx#Immutability)了解更多信息。

顺便说一句：如果您使用的是 ReSharper（或者类似的工具），它会在您调用`string.Replace()`而不分配/使用方法的返回值时向您发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:05:21.380

试试这个。

`content = content.Replace("'", "\\\\'");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:08:56.497

```
content = content.Replace("'", "\\'") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:11:44.927

你想输出json字符串吗？看起来你正试图这样做。如果是这种情况，您可以使用 json 序列化程序将普通字符串序列化为 json 字符串，就像您要求的那样。

# git - 重置版本标签 Heroku

> ID：15779945
> 
> 赞同：2
> 
> 时间：2013-04-03T06:02:21.780
> 
> 标签：git, heroku

现在在 Heroku 上我的应用程序是 v62，我只是将它放入私人测试版，所以理论上应该是 v0，有什么办法可以重置 heroku 上的版本标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:24:25.107

我认为您是在谈论 Heroku 在您部署或对应用程序进行插件更改时应用的发布标签？Heroku 对此进行管理，因此您可以执行回滚等，这不是您可以重置的。如果你想管理版本，我建议使用真正的 git 标签，然后将标签版本部署到 Heroku 并保留对标签内容的引用。

# php - 安卓+mysql+登录

> ID：15779950
> 
> 赞同：1
> 
> 时间：2013-04-03T06:02:59.000
> 
> 标签：php, android, mysql, error-handling

我正在使用 php 和 mysql 为登录过程创建一个测试，以连接到 android 上的数据库，但我得到了我的日志 cat 错误，并且在模拟器上强制关闭有人可以帮助我吗？

# AndroidLogin.java

```
package com.sencide;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;

import android.os.Bundle;
import android.os.StrictMode;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidLogin extends Activity implements OnClickListener {

     Button ok,back,exit;
     TextView result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

     // Login button clicked
        ok = (Button)findViewById(R.id.btn_login);
        ok.setOnClickListener(this);

        result = (TextView)findViewById(R.id.lbl_result);

    }

    public void postLoginData() {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
         Log.e("Responce-->","after httpclient");
        /* login.php returns true if username and password is equal to saranga */
        HttpPost httppost = new HttpPost("http://192.168.1.64/login.php");
        Log.e("Responce-->","after httppost");
        try {
            // Add user name and password
         EditText uname = (EditText)findViewById(R.id.txt_username);
         String username = uname.getText().toString();

         EditText pword = (EditText)findViewById(R.id.txt_password);
         String password = pword.getText().toString();

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            Log.e("Responce-->","after using the list name pair");

            // Execute HTTP Post Request
            Log.w("SENCIDE", "Execute HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);
            Log.e("Responce-->","after execute the http response");
          //  String str = inputStreamToString(response.getEntity().getContent()).toString();
            String str = EntityUtils.toString(response.getEntity(), HTTP.UTF_8);
            //Log.w("SENCIDE", str);

            Log.e("Responce-->",""+str);

            if(str.toString().equalsIgnoreCase("true"))
            {
             Log.w("SENCIDE", "TRUE");
             result.setText("Login successful");  
            }else
            {
             Log.w("SENCIDE", "FALSE");
             result.setText(str);            
            }

        } catch (ClientProtocolException e) {
         e.printStackTrace();
        } catch (IOException e) {
         e.printStackTrace();
        }
    } 

    private StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
         while ((line = rd.readLine()) != null) {
           total.append(line);
         }
        } catch (IOException e) {
         e.printStackTrace();
        }
        // Return full string
        return total;
       }

        /* login.php returns true if username and password is equal to saranga */

    @Override
    public void onClick(View view) {
        // TODO Auto-generated method stub
        if(view == ok){
             Thread t = new Thread(){
                    public void run(){
                        postLoginData();
                    }
                };
                t.start();

          }
    }

} 
```

# 日志猫

```
 04-03 06:38:32.182: E/Responce-->(1222): after httpclient
04-03 06:38:32.472: E/Responce-->(1222): after httppost
04-03 06:38:32.522: E/Responce-->(1222): after using the list name pair
04-03 06:38:32.522: W/SENCIDE(1222): Execute HTTP Post Request
04-03 06:38:49.141: E/Responce-->(1222): after httpclient
04-03 06:38:49.151: E/Responce-->(1222): after httppost
04-03 06:38:49.163: E/Responce-->(1222): after using the list name pair
04-03 06:38:49.163: W/SENCIDE(1222): Execute HTTP Post Request
04-03 06:38:49.324: E/Responce-->(1222): after httpclient
04-03 06:38:49.324: E/Responce-->(1222): after httppost
04-03 06:38:49.331: E/Responce-->(1222): after using the list name pair
04-03 06:38:49.331: W/SENCIDE(1222): Execute HTTP Post Request
04-03 06:38:51.662: E/Responce-->(1222): after httpclient
04-03 06:38:51.662: E/Responce-->(1222): after httppost
04-03 06:38:51.662: E/Responce-->(1222): after using the list name pair
04-03 06:38:51.662: W/SENCIDE(1222): Execute HTTP Post Request
04-03 06:38:52.742: E/Responce-->(1222): after httpclient
04-03 06:38:52.742: E/Responce-->(1222): after httppost
04-03 06:38:52.762: E/Responce-->(1222): after using the list name pair
04-03 06:38:52.762: W/SENCIDE(1222): Execute HTTP Post Request 
```

# 登录.php

```
<?php
$host="localhost"; // Host name
$username="root"; // Mysql username
$password="root"; // Mysql password
$db_name="testlogin"; // Database name
$tbl_name="members"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form
$myusername=$_POST['username'];
$mypassword=$_POST['password'];

// To protect MySQL injection
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
echo "true";
}
else {
echo "Login Failed";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:38:25.493

查看 log_cat 中的时间（甚至是您编辑之前的旧时间），似乎`httpclient.execute`呼叫永远不会回来/超时。

模拟器是否可以访问 login.php，并且 login.php 工作正常？检查模拟器上的浏览器

除此之外，您不应该在 onClick 处理程序中做任何耗时的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:13:16.703

您的代码很完美，只需执行以下操作：

如果您在上面使用，`3.0 android OS`则将其放入`onCreate`

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
```

或者您可以使用`AsyncTask`检查此[链接](http://developer.android.com/reference/android/os/AsyncTask.html)

安装了这个

```
String str = inputStreamToString(response.getEntity().getContent()).toString(); 
```

利用

```
String str = EntityUtils.toString(response.getEntity(), HTTP.UTF_8); 
```

打印日志首先检查你得到了什么

```
Log.e("Responce-->",""+str); 
```

# java - Web 应用程序中的 Jboss Drools

> ID：15779951
> 
> 赞同：2
> 
> 时间：2013-04-03T06:02:58.970
> 
> 标签：java, spring, web-applications, struts2, drools

我们有巨大的网络应用程序，我们正在向它添加新功能。由于它是 Web 应用程序，它使用 Struts2、Spring 框架。

我用谷歌搜索了很多，在 Web 应用程序中找不到任何关于 Jboss Drools 使用的教程。

任何人都可以向我展示基于 Web 应用程序/项目的 Drools 教程。

是否可以配置 Drools，如果用户在 JSP 中选择几个选项，基于选定的选项，我可以启动 Drools 引擎吗？通过触发，我应该能够动态更改视图。

假设购物车 [查看页面] 中有三个产品。如果用户选择 A 产品，我应该向他展示更多选项，如果用户同时选择 A 和 B，则禁用选择第 3 个产品等... [从 Drools 中查看控制]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:51:34.880

试图扩展我上面的评论：我帮助一些同事发展和部署了一个基于`Struts2`/`Spring`和大量`.drl`文件（133 个文件，每个文件从 500 到 3000 行）的巨大、丑陋的 Web 应用程序。

我可以肯定地说我现在知道如何不使用`Jboss Drools`：表示逻辑、工作流管理等等。

`Jboss Drools`不是垃圾。`Jboss Drools`是一个很棒的工具......如果它用于它的设计：帮助您处理应用程序的逻辑规则。

问题在于，人们通常会根据这些技术看起来很酷或有一个响亮的名字来选择需要将哪些技术放入他们的堆栈中，而不是真正需要使用它们，也不是在获得一些好处之后（或至少，执行）侦察。

`Drools`它不是（那么）快速学习，（肯定）不是快速集成，不是（那）容易维护，如果它被用于错误的目的，它将*吞噬*数周/数月的工作以获得可能不同的结果（可能更低）超出预期。

从官方`Drools Expert`文档（还有其他文档`Drools`，请查看），您可以在其中找到示例以及您在此问题中提出的所有问题： http: [//docs.jboss.org/drools/release/5.2.0.Final/drools -专家文档/html/ch01.html](http://docs.jboss.org/drools/release/5.2.0.Final/drools-expert-docs/html/ch01.html)

> **1.2.2。什么时候应该使用规则引擎？**
> 
> 对此的最短回答是“当没有令人满意的传统编程方法来解决问题时”。鉴于这个简短的答案，需要更多解释。没有“传统”方法的原因可能是以下之一：
> 
> *   这个问题对于传统代码来说太麻烦了。
>     
>     
>     
>     问题可能并不复杂，但您看不到为它构建解决方案的可靠方法。
>     
>     
> *   这个问题超出了任何明显的算法解决方案。
>     
>     
>     
>     这是一个需要解决的复杂问题，没有明显的传统解决方案，或者基本上没有完全理解问题。
>     
>     
> *   **逻辑经常变化**
>     
>     
>     
>     逻辑本身甚至可能很简单，但规则经常变化。在许多组织中，软件版本很少而且相距甚远，可插拔规则可以帮助以合理安全的方式提供所需和预期的“敏捷性”。
>     
>     
> *   领域专家（或业务分析师）随时可用，但不是技术性的。
>     
>     
>     
>     领域专家通常拥有丰富的业务规则和流程知识。它们通常是非技术性的，但可能非常合乎逻辑。规则可以让他们用自己的方式表达逻辑。当然，他们仍然需要批判性地思考并具备逻辑思维能力。许多非技术职位的人没有接受过形式逻辑方面的培训，所以要小心并与他们一起工作，因为通过将业务知识编入规则中，您经常会暴露当前理解业务规则和流程的方式中的漏洞。

最后一句话就像一张三美元的钞票一样假。

如果您认为项目经理或秘书会在不涉及开发人员的情况下更改规则，因为“它们只是规则，而不是 Java 文件”......继续希望：D

除了编程技能外，规则还需要相当好的分析技能，恕我直言，“Java”更容易。*非技术人员*（通常指 PM）通常无法掌握修改所需的知识，也无法理解规则。

相反，加粗的点是*真正*的附加值。

如果您正在开发一个应用程序来处理抵押贷款等问题，并且每个月都会更改数学规则（利息税、系数等），那么使用`Drools`它是很好的选择。您无需更改应用程序的逻辑，只需更改公式，奇迹就会发生。

但是如果你使用它是`Drools`因为你认为它会阻止你的 webapp 被部署（阅读：降低发布管理的成本），那么你应该三思而后行。

我建议在做出决定之前至少进行几周的侦察；这是一种可能会在你手中*自动*爆炸的东西：/

从上面链接的相同文档中：

> **1.2.3。何时不使用规则引擎**
> 
> 定期引用 Drools 邮件列表：
> 
> * * *
> 
> **在我看来，在使用规则引擎的兴奋中，人们忘记了规则引擎只是复杂应用程序或解决方案的一部分。规则引擎并非真正旨在处理工作流或流程执行，也不是旨在执行规则的工作流引擎或流程管理工具。为工作使用正确的工具。当然，一把钳子可以在紧要关头用作锤击工具，但这不是它的设计目的**。——戴夫·哈姆
> 
> * * *
> 
> 由于规则引擎是动态的（在规则可以作为数据存储、管理和更新的意义上是动态的），**它们通常被视为部署软件问题的解决方案**。（大多数 IT 部门的存在似乎是为了防止软件推出。）**如果这是您希望使用规则引擎的原因，请注意，当您能够编写声明性规则时，规则引擎工作得最好。**作为替代方案，您可以考虑数据驱动设计（查找表）或脚本处理引擎，其中脚本在数据库中进行管理并且能够即时更新。

最后的想法是，您描述的要求在我看来似乎是静态的，不能发展*那么*多

1) 用户选择一个对象

2）用户选择多个对象

这几乎不会变得不同，我从未见过应用程序或网站以不同的方式在`2`, `3`or`10`元素之间处理多选。它是`==1`，或者它是`>1`。

如果它会发展，那么您也需要更改代码；如果今天您将为 执行一项操作`>1`，明天您将为`>1 && <=5`和 for `>5`...执行两项不同的操作，那么您也必须编写这些新操作。

这不是 Drools 的本意，在我谦虚的观点中。

# java - 检测系统时间编辑

> ID：15779952
> 
> 赞同：0
> 
> 时间：2013-04-03T06:03:06.183
> 
> 标签：java, macos, datetime, operating-system, unix-timestamp

我想知道用户是否更改了 Mac OS X 中的系统时间？有什么方法可以检测到吗？Java 解决方案将是首选，但我会接受任何。实际上，每当用户更改系统时间时，我都需要在我的应用程序中重置一个值，因此我正在寻找一个回调函数或 API，它可以通知我系统时间不是自动被用户强制更改的。

# html - 文本框中带有按钮的搜索框

> ID：15779957
> 
> 赞同：16
> 
> 时间：2013-04-03T06:03:17.297
> 
> 标签：html, css

我想创建一个里面有一个按钮的文本框，就像我在某些网站上看到的那样，通常有一个文本框，在右上角有一个带有手镜图像的按钮，当点击按钮时，表单被提交。我曾尝试使用 div 创建类似的东西，但我似乎没有得到它。它是如何用 css 完成的，或者它有一些 jquery 魔法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-03T06:08:14.447

## 使用包装器

您所指的技术实际上通常在文本框中没有按钮，按钮和文本框的边框和背景只是与包装器 div 混合在一起。这是一个基本示例：

[jsFiddle](http://jsfiddle.net/nxt4z/)

![在此处输入图像描述](https://i.stack.imgur.com/rTZ7m.png)

**HTML**

```
<div class="wrapper">
    <input type="text" />
    <button>GO</button>
</div> 
```

**CSS**

```
.wrapper {
    border:1px solid #000;
    display:inline-block;
}

input,
button {
    background-color:transparent;
    border:0;
} 
```

## 使用`position:absolute`

另一种方法是绝对定位按钮并将其附加到右侧。这样做的一个好处是您可以更轻松地在文本框周围实现焦点/活动边框。`padding-right`您可以通过提供文本框来绕过按钮问题下的文本。

[jsFiddle](http://jsfiddle.net/JW7g7/)

![在此处输入图像描述](https://i.stack.imgur.com/Plgzs.png)

```
.wrapper {
    border:1px solid #000;
    display:inline-block;
    position:relative;
}

input,
button {
    background-color:transparent;
    border:0;
}

button {
    position:absolute;
    right:0;
    top:0;
}

input {
    padding-right:30px; /* button padding */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:14:12.697

这不一定是您最好的方式。但是，这就是您所要求的。看看这个 jsFiddle。使按钮位置：绝对；

[http://jsfiddle.net/j8bbj/](http://jsfiddle.net/j8bbj/)

```
<input type="text" />
<button>si</button>

input[type="text"]
{
    width:200px;
    height:40px;
}

button
{
    position:absolute;
    left:165px;
    top:10px;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T19:15:25.350

您可以将 a`<button>`放在文本框内，但它看起来不太好。搜索框就在您认为它位于文本框内的文本框旁边。我使用了这个 HTML 代码：

```
<input type="search">
<input type="button" value="Search" id="mySearch"> 
```

和CSS：

```
#mySearch {
margin-left: -4px; // I put margin-left -4px because the left border of the button will be in contact with the search box's right border. This will make it look like the button is right inside the input field but it's not.
border-width: 1px; // border-width: 1px; because the input's default border-width is 1px.
background-color: white; //White because the input's default background-color is white.
border-color: black; //Black because the input's default border-color is black. 
```

如您所见，搜索按钮的边框、背景颜色、边框宽度应与搜索字段的默认设置相匹配。

[这是一个 JSFiddle 示例。](https://jsfiddle.net/uaetssqw/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-30T13:34:08.543

简单的 CSS 代码使其成为可能：

```
<!DOCTYPE html>
<html>
<title>Search</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">

<body>
<br>
<div class="w3-container" style="position:relative">
  <form action="yoursearch.php" method="post" enctype="multipart/form-data">
  <input type="text" class='w3-input w3-border' name='sendmsg' id='sendmsg'  required placeholder="type search here">
  <button  class="w3-btn w3-blue w3-border  w3-round-xlarge " style="position:absolute;top:2px;right:16px;" >Go</button>
  </form>
</div>

</body>
</html>
```

![在此处输入图像描述](https://i.stack.imgur.com/1C7Ap.png)

# highcharts - 如何自定义highchart

> ID：15779959
> 
> 赞同：0
> 
> 时间：2013-04-03T06:03:21.187
> 
> 标签：highcharts

我想对 Highcharts 进行一些自定义。我想让高图表看起来像图像，请看图像：

![所需外观](https://i.stack.imgur.com/D05rv.png)

如何通过 Highcharts 实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:30:49.657

试试这个：http: [//jsfiddle.net/HAB7t/](http://jsfiddle.net/HAB7t/)

```
chart: {
    type: 'bar'
} 
```

如需更多帮助，您可以查看 Highcharts API [http://api.highcharts.com/highcharts](http://api.highcharts.com/highcharts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:46:49.903

您应该使用启用数据标签的条形图。[http://www.highcharts.com/demo/bar-basic](http://www.highcharts.com/demo/bar-basic) 每个柱之间的间隙，可以通过 groupPadding/pointPadding/pointWidth 来定义。所有这些都可以在文档中找到。[http://api.highcharts.com/highcharts](http://api.highcharts.com/highcharts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:45:42.227

你的 jsfiddle 快到了。尝试添加这个：

```
xAxis: {
  lineWidth:0,
  tickLength:0, 
```

要更改条形宽度，请结合使用 pointWidth 和 pointPadding

```
plotOptions:{
    bar:{
        pointWidth:10,
        pointPadding:10
    }
} 
```

# sql - SQL Server 条件插入

> ID：15779960
> 
> 赞同：1
> 
> 时间：2013-04-03T06:03:21.503
> 
> 标签：sql, sql-server-2008, tsql, insert

我有一个表格，其中包含有关零件供应商的信息

背景：这张表是

*   零件主记录，其中包含
    *   零件编号、零件名称和默认供应商。
*   另一个表是供应商信息表，其中包含
    *   针对供应商的零件编号记录及其对零件的报价（我在此示例中遗漏了额外的信息）

在此表中，某些零件的默认供应商为 NULL。对于这些记录，我想插入一条新记录作为占位符，即下面的#3

有些零件有默认供应商，但没有可能供应商的记录（带报价）。对于这些记录，我还想插入一条新记录作为占位符。即下面的#1

当前表

```
+-------+-----------+-------------------+-------------------+------------+------------+
|PART   |PART NAME  |Default Supplier   |Possible Suppliers |Quote       |InfoComplete|
+-------+-----------+-------------------+-------------------+------------+------------+
|#1     |Part 1     |Supplier 5         |Supplier 1         |25.0        |0           |
|#1     |Part 1     |Supplier 5         |Supplier 2         |20.5        |0           |
|#2     |Part 2     |Supplier 10        |Supplier 10        |10.4        |1           |
|#3     |Part 3     |NULL               |Supplier 3         |9.5         |0           |
|#3     |Part 3     |NULL               |Supplier 4         |11.5        |0           |
+-------+-----------+-------------------+-------------------+------------+------------+ 
```

所需输出（为清楚起见显示空间）

```
+-------+-----------+-------------------+-------------------+------------+------------+
|PART   |PART NAME  |Default Supplier   |Possible Suppliers |Quote       |InfoComplete|
+-------+-----------+-------------------+-------------------+------------+------------+
|#1     |Part 1     |Supplier 5         |Supplier 1         |25.0        |0           |
|#1     |Part 1     |Supplier 5         |Supplier 2         |20.5        |0           |
|#2     |Part 2     |Supplier 10        |Supplier 10        |10.4        |1           |
|#3     |Part 3     |NULL               |Supplier 3         |9.5         |0           |
|#3     |Part 3     |NULL               |Supplier 4         |11.5        |0           |
|       |           |                   |                   |            |            |     
|#1     |Part 1     |Supplier 5         |**MISSING**        |NA          |0           |
|#3     |Part 3     |**MISSING**        |**MISSING**        |NA          |0           |
+-------+-----------+-------------------+-------------------+------------+------------+ 
```

从我读过的内容来看，合并语句可能是一个解决方案，但我根本无法让它工作。

**编辑：**

抱歉，我在最初的帖子中应该更清楚一点，正在导出信息以供用户查看丢失的数据。没有计划替换数据库中的 NULL 值。

我只是想操纵数据，让用户更清楚地理解数据。

根据反馈，我正在寻找更好的方式向用户显示信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:13:25.797

考虑使用触发器

```
CREATE TRIGGER NULL_DEFAULTSUPP
AFTER INSERT ON TABLE-NAME
FOR EACH ROW BEGIN
WHERE NEW.Default Supplier IS NULL
BEGIN
INSERT INTO TABLE-NAME VALUES(NEW.PART, NEW.PART-NAME, "**MISSING**", ....);
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:30:17.277

我决定不等听你想用[魔术字符串](http://en.wikipedia.org/wiki/Magic_string)替换 Null 的理由。我只能假设您想要这样做，因为您希望您的查询简单，并且`**MISSING**`只要默认供应商为 NULL 就输出该短语。有更好的方法以非重复的方式完成该任务，而不是将您的供应商外键（假设您甚至有一个）转换为从不包含空值的可为空的 varchar 字段。

如果是这样的情况，我建议您使用视图来访问这些数据：

```
IF ( OBJECT_ID('dbo.vw_PartsSuppliers') IS NOT NULL ) 
   DROP VIEW dbo.vw_PartsSuppliers
GO

CREATE VIEW dbo.vw_PartsSuppliers
AS
  SELECT 
         p.PartId,
         p.PartName,
         ISNULL(s.SupplierName, '**MISSING**'),
         ISNULL(s.Quote, 'NA'),
         s.InfoComplete
  FROM
         dbo.Part p
         LEFT JOIN dbo.Supplier s ON p.DefaultSupplierId = s.SupplierId            
GO 
```

这种方法灵活且可重复使用，并为您提供所需的格式。此外，一旦查询出现，您需要在没有默认供应商的情况下识别零件（您可能会这样做），您将不会遭受性能损失，因为您不是在搜索`**MISSING**`魔术字符串，而是在搜索 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:23:16.277

在这种情况下，SupplierId 用作表 dbo.Supplier 的 PRIMARY KEY 和表 dbo.SupplierInfo 的 Id PRIMARY KEY，它与 FOREIGN KEY DefSupplierId 上的表 dbo.Supplier 关联

```
DECLARE @SupplierId TABLE(SupplierId int)

INSERT dbo.Supplier(Part, PartName, DefaultSupplier)
OUTPUT inserted.SupplierId INTO @SupplierId(SupplierId) 
SELECT DISTINCT s.Part, s.PartName, ISNULL(s.DefaultSupplier, '**MISSING**')       
FROM dbo.Supplier s LEFT JOIN dbo.SupplierInfo i ON s.SupplierId = i.DefSupplierId
WHERE s.DefaultSupplier IS NULL OR i.PossibleSuppliers IS NULL

INSERT dbo.SupplierInfo
SELECT SupplierId, '**MISSING**', 0, 0
FROm @SupplierId 
```

[**SQLFisddle**](http://sqlfiddle.com/#!3/d4a54/2)上的演示[](http://sqlfiddle.com/#!3/d4a54/2)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:34:38.690

这是一个稍微简化的示例，您可以如何使用 MERGE 来实现所需的输出。只有一个表`PartsSuppliersInfo`包含有关零件和供应商的数据，如上例所示。

**[SQLFiddle 演示](http://sqlfiddle.com/#!6/96117/1)**

```
;WITH trgtCTE AS 
(
    SELECT Part, PartName, DefaultSupplier, PossibleSuppliers, Quote, InfoComplete FROM PartsSuppliersInfo
    WHERE DefaultSupplier = '**MISSING**' OR [PossibleSuppliers] = '**MISSING**'
)
MERGE trgtCTE AS trgt
USING
(
    SELECT DISTINCT Part, PartName, '**MISSING**' AS DefaultSupplier,'**MISSING**' AS PossibleSuppliers, NULL AS Quote, 0 AS InfoComplete  FROM PartsSuppliersInfo
    WHERE DefaultSupplier IS NULL
    UNION 
    SELECT DISTINCT p.Part, PartName, DefaultSupplier,'**MISSING**' AS PossibleSuppliers, NULL AS Quote, 0 AS InfoComplete FROM PartsSuppliersInfo p
    WHERE DefaultSupplier IS NOT NULL AND InfoComplete = 0  
) src
ON src.part = trgt.part AND src.DefaultSupplier = trgt.DefaultSupplier AND src.PossibleSuppliers = trgt.PossibleSuppliers
WHEN NOT MATCHED BY TARGET THEN
    INSERT (Part, PartName, DefaultSupplier, PossibleSuppliers, Quote, InfoComplete)
    VALUES (Part, PartName, DefaultSupplier, PossibleSuppliers, Quote, InfoComplete)
WHEN NOT MATCHED BY SOURCE THEN
    DELETE; 
```

目标部分`MERGE`是 CTE，只有行具有`**MISSING**`关键字。第一次它是空的，但每次下一次运行语句，它都会有上一次运行的结果。

源部分是带有逻辑的子查询，如何计算`**MISSING**`应该存在哪些行。

最后两部分删除不再需要的行（如果不再缺少部分），然后插入新行。**

# c# - Checking exceptions thrown by external Class

> ID：15779961
> 
> 赞同：0
> 
> 时间：2013-04-03T06:03:21.730
> 
> 标签：c#, asp.net, oop

I have a data form that performs some calculations upon button press. Once this button is pressed, an object of a static class is instantiated. This object calls different methods in various other classes too.

I have designed these classes in such a way that if any error is thrown, the exception would be handled and the class method would display the error message in asp:ValidationSummary.
Now, when from this data form, i try to save my values, even though, the validationSummary is displaying errors on the forms, the invalid values get saved in the database.

I can create a static property called IsValid in this external class, which is set to false everytime an exception is thrown by the method, however since these methods are repeatedly called by the objects, this property is set back to true if there isn't any exception thrown, thus resulting in bypass of IF condition.

Is there a way to handle such scenario?

Here is the method that is throwing exceptions. This method belongs to a class ClsOmChallan. The .dll file is refered in my project, nothing else.

```
public static double getResultFromAstmTables(string TableName, double ObserveTemp, double ObserveGravity)
    {
        SqlConnection conn = new SqlConnection(clsConnection.ConnectionString);
        SqlCommand cmd = new SqlCommand();
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Connection = conn;
        cmd.CommandText = "select result from astm_tables where table_no = '" + TableName + "' and temperature = '" + ObserveTemp + "' and gravity = '" + ObserveGravity + "'";

        try
        {

            conn.Open();

            double result1;
            result1 = Convert.ToDouble(cmd.ExecuteScalar());
            isValid = true;
            return result1;
        }
        catch (Exception ex)
        {
            ValidationError.Display("clsAstmTables + getResultsFromAstmTables " + ex.Message.ToString());
            isValid = false;
            return 0;

        }
        finally
        {
            if (conn.State == System.Data.ConnectionState.Open) conn.Close();
            cmd.Dispose();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:11:26.033

您可以尝试使用将在服务器端调用您的验证方法的验证器。验证器知道显示验证摘要并停止页面处理。

另外，你可以试试

```
 public override void Validate() {
            //put your logic here
            // Now perform validation

            base.Validate();
        } 
```

有关更多详细信息，请查看[此](http://msdn.microsoft.com/en-us/library/aa479045.aspx)。

# .net - 哪种编程语言最容易（对于用户）用作集成脚本语言？

> ID：15779963
> 
> 赞同：2
> 
> 时间：2013-04-03T06:03:41.137
> 
> 标签：.net, user-interface, scripting, scripting-language

我正在为教师编写多项选择题测试程序。分数的公式是：

```
(points awarded) / (maximum score) * 5 + 1. 
```

这给出了 [1,6] 范围内的标记。

现在我想添加一种脚本语言，老师可以用它自己定义标记公式。

假设老师是一个对编程知之甚少的人，那么哪种编程语言将是集成为脚本语言的最佳选择（从使用简单性的角度来看）？

一些可能的选择是：

*   JavaScript
*   Python
*   卢阿
*   VB.NET
*   C＃
*   红宝石
*   瓦拉

我的自然倾向是 JavaScript 或 Python。但是，我有点谨慎，因为这两种语言是区分大小写的编程语言。

我知道的唯一不区分大小写的选项是 VB.NET。还有其他好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:31:18.390

为什么需要一门完整的编程语言来计算分数？

只需使用您选择的编程语言来创建一个很好的界面，让教师有一定的灵活性。

例如，您可以有一个简单的输入并允许教师输入您已经定义的一些变量，可能是 $points 和 $max_score 以及一些基本的数学运算符 (*/-+)，然后您可以读取输入并解释它。

或者，您可以使用下拉菜单和其他控件来进行更精细的控制，此处的选项实际上仅受您的想象力限制。

# java - read and delete a file

> ID：15779965
> 
> 赞同：1
> 
> 时间：2013-04-03T06:03:46.340
> 
> 标签：java, fileinputstream

i have tried something like below to write a file, read it and delete. is this a best way ?

```
public class WriteFileExample {

private void createFile(String filename){
        FileOutputStream fop = null;
        File file;
        String content = "This is the text content";

        try {

            file = new File(filename);
            fop = new FileOutputStream(file);

            // if file doesnt exists, then create it
            if (!file.exists()) {
                file.createNewFile();
            }

            // get the content in bytes
            byte[] contentInBytes = content.getBytes();

            fop.write(contentInBytes);
            fop.flush();
            fop.close();

            System.out.println("Done");

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fop != null) {
                    fop.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

}

private void readAndDeleteFile(String filename){
   try {
            DeleteOnCloseFileInputStream  fis = new DeleteOnCloseFileInputStream(new File(filename));

            System.out.println("Total file size to read (in bytes) : "
                    + fis.available());

            int content;
            while ((content = fis.read()) != -1) {
                // convert to char and display it
                System.out.print((char) content);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fis != null)
                    fis.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

    }

    public static void main(String[] args) {
        WriteFileExample  exe = new WriteFileExample ();

        exe.createFile("c:/mytestfile.txt");
        readAndDeleteFile("c:/mytestfile.txt");
    }
} 
```

Second class extending FileInput stream

```
public class DeleteOnCloseFileInputStream extends FileInputStream {
   private File file;
   public DeleteOnCloseFileInputStream(String fileName) throws FileNotFoundException{
      this(new File(fileName));
   }
   public DeleteOnCloseFileInputStream(File file) throws FileNotFoundException{
      super(file);
      this.file = file;
   }

   public void close() throws IOException {
       try {
          super.close();
       } finally {
          if(file != null) {
             file.delete();
             file = null;
         }
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:23:07.430

当您读取文件时，使用缓冲区以获得更高的效率。

```
InputStream is = BufferedInputStream(new FileInputStream(new File(fileName))); 
```

希望能帮到你。

# iphone - Results coming on main thread, but not on background thread

> ID：15779966
> 
> 赞同：0
> 
> 时间：2013-04-03T06:03:55.017
> 
> 标签：iphone, ios

I am making a call to a service from a main thread, and getting the results. But when the same call is made from background, i am not getting results. Any thoughts?

Here is my code :

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                             (unsigned long)NULL), ^(void) {
        self.pathRequest = [[PathRequest alloc] initWithUserId:[userInfobase userId]

        self.pathRequest.target = self;
        self.pathRequest.successSelector = @selector(success:);
        self.pathRequest.errorSelector = @selector(failure:);
        [self.pathRequest execute];
    }); 
```

In my class PathRequest, i have defined delegate methods for handling server response

```
 - (void) execute
{    
     [restClient loadData:@"/path"];
}

- (void)restClient: (AFRestClient *) client loadedData: (AFMetaData *) metadata { 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:35:32.653

运行运行循环，以便`NSConnection`工作

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                         (unsigned long)NULL), ^(void) {
    [[NSRunLoop currentRunLoop] run];
    self.pathRequest = [[PathRequest alloc] initWithUserId:[userInfobase userId]

    self.pathRequest.target = self;
    self.pathRequest.successSelector = @selector(success:);
    self.pathRequest.errorSelector = @selector(failure:);
    [self.pathRequest execute];
}); 
```

# r - 拟合一条平滑线，范围从 0 到 1

> ID：15779972
> 
> 赞同：1
> 
> 时间：2013-04-03T06:04:11.187
> 
> 标签：r, smoothing

抱歉，我的 R 似乎已经很生锈了，因为我上次来这里。随着时间的推移，我有几个系列的比率数据，如下所示：

```
years <- c(1890, 1891, 1894, 1896, 1899, 1905, 1917)
ratio <- c(0.8,   0.9,  0.5, 0.25,  0.1, 0.02,    0)
plot(ratio~years) 
```

叠加在散点图上，我需要一条尊重比率数据的 0 到 1 限制的平滑线。直截了当`lines(predict(loess(ratio~years))~years)`有点太生涩了，我尝试了一些方法来平滑它，有时我的真实数据会低于零。我在这里需要什么功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:04:08.887

看起来你的模型是指数衰减的。您可以使用非线性最小二乘回归估计这一点，使用`nls()`：

```
fit <- nls(ratio ~ exp(-b*(years-1890)), start=list(b=0.5))
fit

Nonlinear regression model
  model:  ratio ~ exp(-b * (years - 1890)) 
   data:  parent.frame() 
     b 
0.2051 
 residual sum-of-squares: 0.05669

Number of iterations to convergence: 5 
Achieved convergence tolerance: 5.016e-06 
```

现在绘制结果：

```
plot(ratio~years, ylim=c(0,1))
newdata <- data.frame(years=1890:1917)
lines(newdata$years, predict(fit, newdata=newdata), col="red") 
```

![在此处输入图像描述](https://i.stack.imgur.com/Pczk2.png)

# javascript - Javascript - 如何动态地将对象添加到 kendo ui 网格中的列数组？

> ID：15779973
> 
> 赞同：1
> 
> 时间：2013-04-03T06:04:24.237
> 
> 标签：javascript, kendo-ui, kendo-grid

正如标题所暗示的那样，我正在尝试在列数组中生成对象，尽管我还没有找到工作方法。

```
alert( "Value 1: " + temporaryArray[1] + " - " + finalArray[1].values ); 
alert( "Value 2: " + temporaryArray[2] + " - " + finalArray[2].values ); 
var myGrid =  $("#grid").kendoGrid( 
{
    columns: 
    [
        {
            title: temporaryArray[0] + " ",
            field: gridArray[0].values + " "
        }
    ],
    dataSource: 
    {
        data:finalArray,
        pageSize:10
    },
    scrollable:false,
    pageable:true 
}); 
```

我尝试了以下方法来添加对象：

```
for( var x = 0; x < finalArray.length; x++ )
{
    myGrid[columns] = { temporaryArray[x]:finalArray[x] };
} 
```

*和*

```
for( var x = 0; x < finalArray.length; x++ )
{
    myGrid.columns[values]= finalArray[x].values;
} 
```

**没有成功...**

以下看起来像我想要动态实现的对象内部的对象数组：

```
columns: 
[
    {
        title: temporaryArray[0] + " ",
        field: gridArray[0].values + " "
    },
    {
        title: temporaryArray[1] + " ",
        field: gridArray[1].values + " "
    },
    {
        title: temporaryArray[2] + " ",
        field: gridArray[2].values + " "
    }
], 
```

*例如：*

```
for( var x = 0; x < finalArray.length; x++ )
{
    myGrid[columns] = { temporaryArray[x]:finalArray[x] };
} 
```

*我想使用 for 循环生成对象，以在列数组内生成对象数组。*

我想知道的是，这是否可以动态执行？还是完全有可能没有硬编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:42:24.437

你能行的。让我们将 Titles 存储在中`titleDefs`，并将`field`名称存储在`fieldDef`. 那么你应该这样做：

```
// Title Definitions
var titleDefs = [
    "First Name", "Last Name", "Title"
];
// Field Definition
var fieldDefs = [
    "FirstName", "LastName", "Title"
];
// Lets compute column definition
var columnDefs = [];
for (var i = 0; i < titleDefs.length; i++) {
    columnDefs.push({ title : titleDefs[i], field: fieldDefs[i] });
}
// Now, create the grid using columnDefs as argument
var grid = $("#grid").kendoGrid({
    dataSource: {
        data    : dataArray,
        pageSize: 10
    },
    columns   : columnDefs
}).data("kendoGrid"); 
```

**NOTE**: In this example I've defined a DataSource that is a JavaScript `array` in memory but you can get the data from a server changing the `DataSource` definition.

**NOTE**: In your code, you were adding extra white space to the `title` definition and that is not correct: column definitions are JavaScript code and not `strings` so you don't have to format it as you were going to display it.

# c++ - Linux中的COM端口检测

> ID：15779978
> 
> 赞同：1
> 
> 时间：2013-04-03T06:04:57.363
> 
> 标签：c++, c, embedded, linux-device-driver, udev

请让我知道是否有任何 API、系统调用、函数（在 Linux 中），我可以使用我的 C 程序动态检测 COM 端口，即，只要将 USB 调制解调器加密狗插入端口中，我就能够检测到该 COM 端口使用我的 C 程序中的 API、系统调用或函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T06:14:21.540

根据您的调制解调器，USB 串行端口设备可能显示为`/dev/ttyUSBn`或`/dev/ttyACMn`，其中`n`某个数字从 开始`0`。

您可以配置`udev`规则以自动对插入或移除的设备做出反应。

如果你想在 C 中自己做，你需要使用`netlink(7)`套接字。如果您不想摆弄它们，可能更简单的方法是简单地使用`udevadm`udev 包提供的实用程序（udevadm 在`netlink`内部使用），如下所示：

```
 udevadm monitor --kernel 
```

如果要在 C 程序中使用它，只需像这样在管道中调用它：

```
 stdbuf -o0 udevadm monitor --kernel 
```

并设置`select`循环，因此它可以立即做出反应。`stdbuf`为了避免 udevadm 提供的缓冲，必须进行回绕。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T06:10:59.140

在 Linux 中，串行端口不称为 COMx。它们（真正的串行端口）通常被命名`/dev/ttySx`，其中 x 是一个数字，从 COM1 的 0 开始，COM2 的 1 开始，等等。

如果你想要一个列表，你应该寻找`/dev`设备`ttyS`。

这是Linux上串口编程的非常详细的页面：

*   [串行编程 HOWTO](http://www.tldp.org/HOWTO/Serial-Programming-HOWTO/)
*   [串行 HOWTO](http://www.tldp.org/HOWTO/Serial-HOWTO.html)

最后，请注意，对于此类一般性问题，快速的[Google 搜索大有帮助！](https://www.google.com/search?q=linux%20serial%20port%20programming)

# android - How to save Canvas to Bitmap according to Path

> ID：15779979
> 
> 赞同：2
> 
> 时间：2013-04-03T06:04:58.333
> 
> 标签：android, canvas

I am working on an Image Cropper. User pass a bitmap and could use an oval to clip the bitmap.

My Code:

```
public class CropView extends View{

    @Override
    protected void onDraw(Canvas canvas) {
           //Draw user's image to canvas
           canvas.drawBitmap(mBitmap, mMatrix, mPaint1);

           //Draw an oval shape.Contents inclued this shape should be clip and then save.
           //Please ignore method generateOvalPath(), it just generate a resizeable oval
           Path ovalPath = generateOvalPath();
           canvas.drawPath(ovalPath,mPaint2);

           **//How to save the contents included within the oval to a Bitmap?**
    }

} 
```

![enter image description here](https://i.stack.imgur.com/uaGYR.png)

# jquery - Jquery Carousel 多次显示一篇文章

> ID：15779986
> 
> 赞同：0
> 
> 时间：2013-04-03T06:05:46.337
> 
> 标签：jquery, carousel

我正在使用以下 jQuery carousel 来显示 4 个帖子。我有 6 个帖子。它工作正常。但是当我点击下一个按钮时，接下来的 2 个帖子以及第一张幻灯片中的帖子都会出现。

```
jQuery(function($) {
$('#foo2').carouFredSel({
    prev: '#prev2',
    next: '#next2',
    auto: false,
    items: 4,
});
}); 
```

下面的图片会告诉你到底发生了什么。 ![在此处输入图像描述](https://i.stack.imgur.com/sKMyH.jpg) 此图像显示页面加载时发生的情况。

![在此处输入图像描述](https://i.stack.imgur.com/Ta0pa.jpg) 这是单击下一步时发生的情况。

有人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:11:32.237

```
jQuery(function($) {
$('#foo2').carouFredSel({
    prev: '#prev2',
    next: '#next2',
    auto: false,
    items: 4,
    circular:false
});
}); 
```

尝试`circular:false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:11:55.583

您的轮播以循环模式运行，关闭循环，一切都会按预期工作。

```
jQuery(function($) {
$('#foo2').carouFredSel({
    prev: '#prev2',
    next: '#next2',
    circular: false,
    infinite: false,
    auto: false,
    items: 4,
});
}); 
```

# postgresql - 如何从 libpq 获取 sql 状态？

> ID：15779991
> 
> 赞同：2
> 
> 时间：2013-04-03T06:06:01.343
> 
> 标签：postgresql

我用 libpq.so 编程。我想获得在 SQL Standard 中称为 sql state 的错误代码。我应该如何在我的 c 代码中获得它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:18:58.713

[显而易见的 Google 搜索`libpq get sqlstate`](http://google.com/search?q=libpq+get+sqlstate)会找到[libpq-exec 文档](http://www.postgresql.org/docs/current/static/libpq-exec.html)。搜索该部分中的`SQLSTATE`发现。`PG_DIAG_SQLSTATE``PQresultErrorField`

因此，您可以看到您可以调用`PQresultErrorField(thePgResult, PG_DIAG_SQLSTATE)`以获取`SQLSTATE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-03T09:19:05.243

*由于声誉原因，这只是补充，我不能以评论的形式离开。*

请注意，对于在`PQconnectdb`. 理论上，您可以读取包含正确值的`pg_conn`（内部结构）字段。`last_sqlstate`

例如，如果您尝试使用无效的登录名/密码进行连接，它将为您提供`28P01`. 对于错误的数据库，它将包含`3D000`.

我希望他们为这个领域定义了公开可用的 getter。

你也可以检查这个： [libpq: How to get the error code after a failed PGconn connection](https://stackoverflow.com/questions/23349086/libpq-how-to-get-the-error-code-after-a-failed-pgconn-connection)

# jackson - Jackson mixin的选择与继承

> ID：15779998
> 
> 赞同：5
> 
> 时间：2013-04-03T06:06:27.923
> 
> 标签：jackson

我对 Jackson mixin 和继承有疑问。我有两个目标班级，一个父母和一个孩子。对于这两个目标类，我定义了两个相互没有继承关系的 MixIn 类（接口）。我还用一个扩展另一个 MixIn 接口进行了测试，但结果没有区别。当 Jackson 序列化父类时，它使用正确定义的 mixin 进行序列化配置，并且一切正常。然而，当 Jackson 序列化子类时，它将使用父类 mixin 定义来序列化存在于父类和子类中的属性。然后它使用子类 mixin 定义来序列化在子类中定义但不在父类中定义的属性。

现在的问题是，在序列化子类的对象时，有什么方法可以指示 Jackson 只使用子类的 mixin 定义？是的，我想为两个单独的用例保留两个 mixin 定义，所以仅仅删除父类 mixin 映射并不能解决我的问题。

下面的示例代码以及预期和实际输出 JSON。

环境：Jackson 版本 2.1.4 Tomcat 版本 7.0.34.0

他们实现的目标类和接口：

```
public interface TestI {

  public String getName();  
}

public interface TestExtendI extends TestI {

   public Integer getAge(); 
}

public class Test implements TestI {

  String name;

  public Test(String name) {
    this.name = name;
  }

  @Override
  public String getName() {
    return name;
  }  
}

public class TestExtend extends Test implements TestExtendI {

  private Integer age;

  public TestExtend(String name) {
    super(name);
  }

  public TestExtend(String name, Integer age) {
    super(name);
    this.age = age;
  }

  @Override
  public Integer getAge() {
    return age;
  }
} 
```

混合定义

```
public interface TestMixIn {

  @JsonProperty("base-name")
  public String getName();
}

public interface TestExtendMixIn {

  @JsonProperty("ext-name")
  public String getName();

  @JsonProperty("ext-age")
  public Integer getAge();
} 
```

如果两个 mixin 都添加到映射器中，则输出 JSON 为：

```
{
  "base-name": "5", // from parent class mixin definition
  "ext-age": 50     // from child class mixin defition
} 
```

使用 TestI.class 的 mixin 评论一切都按预期工作，输出 JSON 是（这是我想要实现的）：

```
{
  "ext-name": "5",  // from child class mixin defition
  "ext-age": 50     // from child class mixin defition
} 
```

对象映射器配置

```
@Provider
@Produces(MediaType.APPLICATION_JSON)
public class JacksonObjectMapper implements ContextResolver<ObjectMapper> {

  private ObjectMapper mapper;

  public JacksonObjectMapper() {
    mapper = new ObjectMapper();
    mapper.addMixInAnnotations(TestI.class, TestMixIn.class);
    mapper.addMixInAnnotations(TestExtendI.class, TestExtendMixIn.class);    
  }  

  public ObjectMapper getContext(Class<?> type) { 
    return this.mapper; 
  }
} 
```

用于处理请求/响应的 REST api

```
@Path("api/test/{id}")
public class TestRestApi {
  @GET
  @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
  public TestI getTest(@PathParam("id") String id) {

    TestI ret = new TestExtend(id, 50);    
    return ret;
  }
} 
```

**解决方案**

正如 pgelinas 在第一个响应中所描述的，该问题的解决方案是在子接口中再次定义应该由“子”混合处理的方法。对于上面的示例代码，这意味着对 TestExtendI 接口的更改：

```
public interface TestExtendI extends TestI {

  public Integer getAge();

  // override the method from the parent interface here
  @Override
  public String getName();
} 
```

这将解决问题，并且不会在解决方案中添加太多样板代码。此外，它不会改变接口契约，因为子接口已经扩展了父接口。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T14:24:07.703

这是一个棘手的问题；您的具体问题的答案是否定的，您不能告诉子类不要使用应用于父类的 Mixin。

`getName()`但是，这里解决您的问题的一个简单方法是在 TestExtendI 接口中重新声明该方法。我相信 MixIn 注释解析不遵循通常的父子覆盖（就像普通注释的情况一样），而是更喜欢应用于声明该方法的类的 MixIn。这可能是 Jackson 中的错误或设计选择，您可以随时在[github](https://github.com/FasterXML/jackson-databind/issues)上填写问题。