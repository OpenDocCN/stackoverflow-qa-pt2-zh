# StackOverflow 问答 15401000-15401999

# clojure - 无法将我的 compojure 应用程序连接到 postgres db（遵循 heroku 教程）

> ID：15401000
> 
> 赞同：0
> 
> 时间：2013-03-14T04:04:26.730
> 
> 标签：clojure, postgresql-9.1, leiningen, compojure

我正在关注[heroku compojure 教程](https://devcenter.heroku.com/articles/clojure-web-application#connecting-to-postgresql-with-clojurejavajdbc)。当我到达教程中创建表的地方时，我收到以下错误消息：

```
user=> (require '[clojure.java.jdbc :as sql])
nil
user=> (sql/with-connection (System/getenv "DATABASE_URL")
  #_=> (sql/create-table :testing [:data :text]))
IllegalArgumentException db-spec postgresql://localhost:5432/lord is missing a required  parameter  clojure.java.jdbc.internal/get-connection (internal.clj:147) 
```

我已经尝试将我创建数据库的 linux 用户的名称和用户的密码添加到 DATABASE_URL 但没有运气。我在这里遗漏了一些东西，我不确定它是什么。db-spec 定义在哪里可能是正确的问题，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T20:51:40.100

尝试将连接放入这样的地图中（这是 mysql 特定的，但你明白了要点）：

```
 (def db-conn {
           :classname "com.mysql.jdbc.Driver" ;must be in classpath
           :subprotocol "mysql"
           :subname (str "//" DBHOST ":" DBPORT "/" db-name)
           ; Any additional keys are passed to the driver as driver-specific properties.
           :user DBUSER
           :password DBPASS})
  (sql/with-connection db-conn 
    (sql/create-table :testing [:data :text])))) 
```

希望这可以帮助。

# ember.js - Ember.computed 在方法中定义时未按预期运行

> ID：15401002
> 
> 赞同：4
> 
> 时间：2013-03-14T04:04:40.027
> 
> 标签：ember.js

我正在尝试使用 Ember.computed 从我的视图方法之一中设置计算属性。我尝试使用这个小提琴中显示的语法，但正如你所看到的，它似乎并没有真正做到我希望的那样。任何指向正确方向的指针都将不胜感激。

[http://jsfiddle.net/skane/H5ma5/1/](http://jsfiddle.net/skane/H5ma5/1/)

```
this.set('myComputed', Ember.computed(function() {return "funky"}).property()); 
```

史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:22:00.893

这不会以这种方式工作，因为 Ember 必须执行一些它的魔法。我查看了 Ember 的来源，发现[了这个](https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/properties.js#L78)：

```
// define a computed property
  Ember.defineProperty(contact, 'fullName', Ember.computed(function() {
    return this.firstName+' '+this.lastName;
  }).property('firstName', 'lastName'));

  @method defineProperty
  @for Ember
  @param {Object} obj the object to define this property on. This may be a prototype.
  @param {String} keyName the name of the property
  @param {Ember.Descriptor} [desc] an instance of `Ember.Descriptor` (typically a
    computed property) or an ES5 descriptor.
    You must provide this or `data` but not both.
  @param {anything} [data] something other than a descriptor, that will
    become the explicit value of this property. 
```

因此，以下内容应该适用于您的情况：

```
Ember.defineProperty(this, 'myComputed', Ember.computed(function() {
    return "funky";
}).property()); 
```

# javascript - 未知任意深度的 Javascript 对象导致脚本停止执行

> ID：15401006
> 
> 赞同：2
> 
> 时间：2013-03-14T04:05:09.253
> 
> 标签：javascript

我可能会收到这样的 JSON 结构

```
foo: {} 
```

或者我可能喜欢这样：

```
foo: {bar: {baz: 1} } 
```

当我像这样检查第一个数据结构是否存在时：

```
if ( data.foo.bar.baz ) { } 
```

脚本完全停止运行。我在浏览器或任何东西上看不到任何 javascript 错误。它只是停止。无论哪种方式，能够执行上述操作而不是：

```
if ( data.foo && data.foo.bar && data.foo.bar.baz ) { } 
```

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:28:32.047

假设您不能影响正在使用的 JSON，那么您检查的方式几乎是唯一的方法。虽然我更喜欢检查`!== undefined`. 这纯粹是我的编程特质，因为我不喜欢考虑`if (object)`检查`object`. 我总是将这条线等同于 ，`if(object === true)`从布尔逻辑的角度来看，这并不是一回事。

```
if ( data.foo !== undefined && data.foo.bar !== undefined && data.foo.bar.baz !== undefined) { } 
```

您可能可以不检查而侥幸逃脱`data.foo !== undefined`，因为您说 foo 可能是一个空对象。

如果您的代码将进行大量此类检查，您可以在收到 JSON 数据时预先进行一项检查并填写任何缺失的对象：

```
if ( data.foo === undefined) data.foo = {};
if ( data.foo.bar === undefined) data.foo.bar = {};
if ( data.foo.bar.baz === undefined) data.foo.bar.baz = null;  // or skip this, I suppose... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:29:25.917

如果您试图在深度嵌套的对象上捕获所有可能的错误，那么您可以使用多个`if`条件：

```
 if (data && data.foo && data.foo.bar && data.foo.bar.baz ) { } 
```

或者，如果失败不是预期的情况，您可以使用异常处理程序：

```
try {
    var item = data.foo.bar.baz;
    // operate on item
} catch(e) {
    // perform any actions when it failed
} 
```

有时，使用单个异常处理程序保护代码块可以大大简化您的错误处理。当异常触发时，异常的性能比`if`测试差，所以你应该记住这一点，但意外失败通常是异常最擅长处理的，它们有时可以真正简化你的代码的其余部分。

似乎有些开发人员基本上不想编写异常代码，而是更喜欢使用大量`if`测试，但他们在语言中存在，因为他们非常擅长帮助解决某些类型的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:00:09.710

丑陋、讨厌、可怕的方法是使用`eval`or 或`try..catch`. 一种更强大的方法是使用`typeof`：

```
if (typeof foo != 'undefined' && foo !== Null &&
   typeof foo.bar != 'undefined' && foo.bar !== Null && 
   ... 
) {
    // stuff
} 
```

但是，只有当最终属性的值不是时才有效`undefined`（即，如果属性存在但具有未定义的值，它将失败）。

您可以创建更准确的通用属性测试器来测试自己的属性：

```
function testChain(obj) {

    for (var i=1, iLen=arguments.length; i<iLen; i++) {

        if (obj.hasOwnProperty(arguments[i])) {
          obj = obj[arguments[i]];

        } else {
          return false;
        }
    }
    return true;
}

alert( testChain({a:{b:'b'}}, 'a', 'b') ); // true 
```

但这不会检查继承的属性。要检查这些，您可以使用`propertyIsEnumerable`，但这不会检查不可枚举的属性（例如，内置对象的本机方法）。

所以真的没有通用的解决方案，你只能针对特定情况定制一个。

# iphone - 如何在 iOS 的一个证书中分发两个应用程序？

> ID：15401008
> 
> 赞同：1
> 
> 时间：2013-03-14T04:05:45.087
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我有一个问题是如何在一个生产证书中分发两个应用程序？但是第一个应用程序使用的是苹果推送消息服务，而第二个应用程序不是？否则两个应用程序都在使用推送消息服务？

我觉得很尴尬我该怎么办？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:57:30.687

你不能这样做。每个推送通知证书都绑定到一个应用程序。Apple probisioning 门户网站非常清楚地说明了这一点，为了创建证书，您首先必须定义一个唯一的应用程序 ID。

# php - 正则表达式包含以 @ 开头但不在字符串中间的字符串？

> ID：15401010
> 
> 赞同：1
> 
> 时间：2013-03-14T04:05:54.280
> 
> 标签：php, regex

我正在尝试匹配类似于 twitter 的@username。我现在使用的正则表达式： **"([@])(\S+)"**非常适合这个。

但是限制如下 test@test.com 匹配 test.com

现在我想完全排除 test@test.com

但是，我的一些用户的用户名是 test@test.com，如果他们在该电子邮件用户名前确实有一个 @，则希望将它们包括在内。

所以@test@test.com 应该匹配

**总结：需要匹配：**

@用户名

@测试

@test@test.com

**不想匹配：**

test@test.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:51:14.423

我建议使用负面的lookbehind，例如：

```
(?<!\S)@(\S+) 
```

这不会在 之前包含任何可能的空格`@foo`，因此您可以毫无问题地替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:11:22.197

作为答案，您不想`@`在文本中间检查，但它前面需要一个空格，所以使用`(\s|^)+([@])(\S+)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:10:26.067

正则表达式看起来像这样：`^@.*`^ 会将您锚定到行首或字符串的开头。请务必查看[OverAPI Regex](http://overapi.com/regex/)，他们的备忘单非常好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:13:00.003

^@.* 上面的正则表达式匹配你要找的

# python - Python 中 import 和 __import__ 的区别

> ID：15401012
> 
> 赞同：8
> 
> 时间：2013-03-14T04:06:02.157
> 
> 标签：python, python-import

我正在查看一个项目的一些提交，我在一个文件中看到了以下更改：

```
-       import dataFile
+       dataFile = __import__(dataFile) 
```

编码器替换`import dataFile`为`dataFile = __import__(dataFile)`.

它们之间究竟有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T04:08:48.137

```
import dataFile 
```

大致翻译为

```
dataFile = __import__('dataFile') 
```

显然，开发人员决定他们想要使用字符串来识别他们想要导入的模块。这大概是因为他们可以动态更改他们想要导入的模块......

# ember.js - 重定向到 ArrayController 中的第一项

> ID：15401013
> 
> 赞同：5
> 
> 时间：2013-03-14T04:06:04.140
> 
> 标签：ember.js

我正在尝试重定向到 ArrayController 中的第一项。我发现了一些与此相关的其他问题，但没有一个答案似乎有效（已经发生了很多变化，所以这是可以理解的）。

Yehuda[在这里](https://stackoverflow.com/a/14306796/1157494)给出了一个特别的答案：

```
App.DoctorsRoute = Ember.Route.extend({
  model: function() {
    return App.Doctor.find();
  },

  redirect: function() {
    var doctor = this.modelFor('doctors').get('firstObject');
    this.transitionTo('doctor', doctor);
  }
}); 
```

我“认为”我重新创建了这个场景，但我一定做错了什么......

非常感谢任何对我做错了什么的洞察力。

[此处](http://jsbin.com/uxifus/2/edit)为 JSBin 示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T10:06:16.420

这里的问题是您的模型列表尚未从服务器加载。根据您的需要，我建议您使用 Promis 让 rout 等到您的模型加载完毕。

```
App.DoctorsRoute = Ember.Route.extend({
  model: function() {
    return App.Doctor.find().then(function (list) {
       return list.get('firstObject');
    });
  },

  redirect: function() {
    var doctor = this.modelFor('doctors');
    this.transitionTo('doctor', doctor);
  }
}); 
```

当然.. wel 这会使重定向有点愚蠢，所以如果您只想等待列表加载，您可以尝试：

```
App.DoctorsRoute = Ember.Route.extend({
  model: function() {
    return App.Doctor.find();
  },

  redirect: function() {
    var self = this;
    this.modelFor('doctors').then(function (list) {
           return list.get('firstObject');
       }).then(function (doctor){
           if(!doctor)
              self.transitionTo('doctor', doctor);
       });
  }
}); 
```

# java - 安卓蓝牙文件传输失败

> ID：15401022
> 
> 赞同：2
> 
> 时间：2013-03-14T04:06:47.900
> 
> 标签：java, android, file-transfer, android-networking, rfcomm

在这里，我试图通过蓝牙发送文件，但它不发送任何数据。这里的主要问题是它没有通过两个设备发送或接收任何数据，但它们相互连接。

发送代码：

```
File myFile = new File(message.toURI());
Double nosofpackets = Math.ceil(((int) myFile.length() )/4096);
System.out.println(nosofpackets);
BufferedInputStream bis = new BufferedInputStream(new FileInputStream(myFile));
byte[] send = new byte[4096];
for(double i = 0; i < nosofpackets; i++)
{
    send = null ;
    a=bis.read(send, 0, send.length);
    Log.d("BluetoothChat", "data packet " + i);
    if(a == -1)
    {
        break;
    }
    mChatService.write(send);
} 
```

接收代码：

```
while((bytes = mmInStream.read(buffer)) > 0)
{
    Log.d(TAG, "data is there for writing");
    bos.write(buffer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T18:23:55.923

您可能想查看[这个库](https://github.com/simonguest/android-btxfr)，以便使用蓝牙在 Android 设备之间发送文件和其他数据（免责声明：我是作者）

# lua - 使用不同设备时自动改变物体的位置

> ID：15401024
> 
> 赞同：2
> 
> 时间：2013-03-14T04:07:10.190
> 
> 标签：lua, coronasdk

我还是 lua 和 corona 的新手（确切地说是 3 天），我正在尝试使用多个设备在屏幕上显示我的对象。据我了解，要使对象自动重新定位，我需要获取屏幕尺寸并对其进行一些计算以进行必要的调整。这是我正在尝试做的一个示例：

```
obj1 = display.contentWidth*0.50 
```

然后这会将我的对象放在屏幕中间，但是在某些情况下这似乎并不有效，所以我的问题是，自动重新定位我的对象的更好方法是什么？尤其是不再位于屏幕中心的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:30:03.557

我正在以不同的方式做这件事。我想这可能会对你有所帮助。在我看来，只需为宽度和高度创建乘数值（根据您在哪个模拟器中编码），然后将每个宽度或高度参数与此相乘（如下所示）：

```
--------------------------------------------------------------------------
       -- choosing xMultiplier and yMultiplier values --
--------------------------------------------------------------------------
  local xMultiplier = display.contentWidth/320  
  local yMultiplier = display.contentHeight/480
     --[[ I used 320 here because i'm using iPhone Simulator 
         (320 is the width of the simulator you are coding in)
          I used 480 here because i'm using iPhone Simulator 
          (480 is the height of the simulator you are coding in)--]]

--------------------------------------------------------------------------
       -- creating background and positioning it --
--------------------------------------------------------------------------
  local bg = display.newImageRect("bg.png",320*xMultiplier,480*yMultiplier)
  bg.x = 160*xMultiplier ; bg.y = 240*yMultiplier

--------------------------------------------------------------------------
       -- creating object and positioning it -- 
--------------------------------------------------------------------------
  local rect = display.newImageRect(0,0,50*xMultiplier,50*yMultiplier)
  rect.x = 160*xMultiplier ; rect.y = 100*yMultiplier

-------------------------------------------------------------------------- 
```

**注意**：如果您在项目中使用 config.lua 文件，这可能不起作用。

**优点**：这只需要一张图片。

**缺点**：它可能会影响高分辨率设备中图像的清晰度。因此，请选择具有合适分辨率的图像。

继续编码... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:52:18.697

我这样做的方式是基于事物将根据设备的一侧或从中心定位的原理。顺便说一句，我将为此使用水平应用程序。

有些东西需要锚定在左边缘或右边缘。有些东西需要固定在屏幕顶部，而其他东西需要离中心有一段距离。

考虑这张图片： ![游戏截图](../Images/4198db739892266c5539d873e9249f56.png)

主页图标和设置图标需要距离左边缘几个像素。它们还需要从顶部向下几个像素。我会使用一个固定的数字来定位它们：

```
homeIcon.x = 32
homeIcon.y = 32
gearIcon.x = 32
gearIcon.y = 64  -- or whatever numbers they really are. 
```

右边的分数需要离右边缘和顶部有固定的距离：

```
scoreText.x = display.contentWidth - 64
scoreText.y = 32 
```

底部的火鸡位置不应该根据设备宽度的形状而改变，但可以根据设备的高度移动。

```
turkey.x = display.contentCenterX
turkey.y = display.contentHeight - 64 
```

在本例中，在比 iPhone 更窄的 iPad 上，home、gear 和 score 按钮最终会更靠近中心。在 iPhone 5 或宽屏 Android 上，它们分散开来。

上面的例子对一些居中的想法没有真正的帮助。我没有这方面的屏幕截图，但假设您正在为一个正在收集用户名和密码的游戏布置登录表单，并且您有一个提交按钮。您可以将它们定位为：

```
 usernameField.y = display.contentCenterY - 64
 passwordField.y = display.contentCenterY 
 submitButton.y = display.contentCenterY + 64 
```

然后无论设备的高度如何，这些 UI 元素都将与中心保持相同的距离，从而使您的表单看起来不错。如果您使用与顶部的固定距离，则表单将根据设备的大小移动。在这里，他们的位置保持不变。

# python - UnicodeEncodeError：“ascii”编解码器无法在位置 31 编码字符“\xe9”：安装金字塔期间序数不在范围内（128）

> ID：15401029
> 
> 赞同：0
> 
> 时间：2013-03-14T04:08:01.997
> 
> 标签：python, pyramid

当我尝试将金字塔安装到生产服务器（CentOS 6.4）时，使用以下

```
 [~]# env/bin/easy_install pyramid 
```

它将显示以下堆栈跟踪

[http://bpaste.net/show/83631/](http://bpaste.net/show/83631/)

我在安装过程中采取的步骤：

1.  ssh 作为帐户名（不是 root ）
2.  光盘~
3.  mkdir 选择
4.  光盘选择
5.  下载并安装python3.2.3
6.  光盘~
7.  opt/Python-3.2.3/bin/python3.2distribute_setup.py
8.  opt/Python-3.2.3/bin/python3.2 virtualenv
9.  opt/Python-3.2.3/bin/virtualenv --no-site-packages env
10.  光盘环境
11.  bin/easy_install 金字塔

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:45:41.067

解决这个问题真的很简单

在本地机器的终端

```
 $ pico .bash_profile 
```

在最后一行，添加以下内容：

```
 export LC_CTYPE=en_US.UTF-8 
    export LC_ALL=en_US.UTF-8 
```

# lua - 如何通过方法名调用lua方法

> ID：15401034
> 
> 赞同：1
> 
> 时间：2013-03-14T04:08:32.153
> 
> 标签：lua

有一个对象`client`有很多方法，方法可以被调用`client:hget(key, field)`等等`client:exists(key)`。

现在，我需要实现一个功能`client_holder.call(cmd, ...)`

```
local client = client_instance;
function call(cmd, ...)
    client[cmd](client, ...) // will this work??
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:39:51.930

是的，这应该有效。正如 Lua 手册[所述](http://www.lua.org/manual/5.2/manual.html#3.4.9)，冒号符号只是语法糖：

> 表格
> 
> ```
> functioncall ::= prefixexp ‘:’ Name args 
> ```
> 
> 可以用来调用“方法”。调用 v:name(args) 是 v.name(v,args) 的语法糖，除了 v 只计算一次。

# php - 使用 php 将“时间戳”格式的条目插入到 mySQL 表中

> ID：15401041
> 
> 赞同：0
> 
> 时间：2013-03-14T04:08:49.573
> 
> 标签：php, sql, insert, format, timestamp

我有一个 mySQL 表，其中有一列格式化为“时间戳”。我正在尝试使用 php 脚本插入一个值，但无济于事。下面我展示了一些不成功的方法，任何人都可以演示如何使用 php 生成格式正确的值吗？

```
$insert = mysql_query("INSERT INTO `tableName`(`timeColumnName`) VALUES ('".strtotime("now")."')") or die(mysql_error());

$insert = mysql_query("INSERT INTO `tableName`(`timeColumnName`) VALUES (now())") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:21:30.253

你可以使用`date()`函数 in `php`，像这样，

`$insert = mysql_query("INSERT INTO tableName(timeColumnName) VALUES ('".date("Y-m-d H:i:s")."')") or die(mysql_error());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:22:54.483

这是一个插入时间戳的简单示例。这取决于您希望将哪种时间格式存储在 MySQL 数据库中。

```
$mysqldate = date( 'Y-m-d H:i:s', now() );
$query = "UPDATE table SET datetimefield = $mysqldate WHERE..."; 
```

如果您希望将时间戳存储为数字，则必须将 DB 中的字段类型更改为数字类型。

# oracle - 基于xml属性的Oracle xmltype列索引

> ID：15401043
> 
> 赞同：4
> 
> 时间：2013-03-14T04:09:02.077
> 
> 标签：oracle, indexing, xmltype, xmlindex, oracle-xml-db

我正在为 xmltype 列使用结构化存储类型。我正在尝试在属性上创建索引，但不知何故，Oracle 没有获取索引并进行全表扫描。我已经检查了[http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_indexing.htm#CHDCJIJB](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_indexing.htm#CHDCJIJB)上的文档，但它没有给出在属性上创建索引的示例。有人可以给我一个在属性上创建 xml 索引的例子吗？

谢谢凯文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T08:18:57.103

你需要在这里显示一些代码。

`xmlindex`这是在属性（及其后代节点）上创建的示例：

```
SQL> create table xmltest ( a xmltype);

Table created.

SQL> insert into xmltest values ('<root>
  2   <a test="foo" test2="asd">
  3     <b>hi</b>
  4   </a>
  5   <a test="foo2" test2="asd2">hi</a>
  6  </root>');

1 row created.

SQL> commit;

Commit complete.

SQL> create index test_xmlindex on xmltest (a)
  2  indextype is XDB.XMLIndex
  3  parameters ('paths (include (/root/a/@test))');

Index created.

SQL> set pagesize 100 lines 200 heading off
SQL> explain plan for select * from xmltest where xmlexists('/root/a[@test="foo"]' passing a);

Explained.

SQL> select * from table(dbms_xplan.display());

Plan hash value: 2925043098

-------------------------------------------------------------------------------------------------------------------
| Id  | Operation                        | Name                           | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                 |                                |     1 |  2026 |     6  (17)| 00:00:01 |
|   1 |  NESTED LOOPS                    |                                |     1 |  2026 |     6  (17)| 00:00:01 |
|   2 |   VIEW                           | VW_SQ_1                        |     1 |    12 |     4   (0)| 00:00:01 |
|   3 |    HASH UNIQUE                   |                                |     1 |  5046 |            |          |
|   4 |     NESTED LOOPS                 |                                |       |       |            |          |
|   5 |      NESTED LOOPS                |                                |     1 |  5046 |     4   (0)| 00:00:01 |
|*  6 |       TABLE ACCESS BY INDEX ROWID| SYS82641_TEST_XMLIN_PATH_TABLE |     1 |  3524 |     2   (0)| 00:00:01 |
|*  7 |        INDEX RANGE SCAN          | SYS82641_TEST_XMLIN_VALUE_IX   |     1 |       |     1   (0)| 00:00:01 |
|*  8 |       INDEX RANGE SCAN           | SYS82641_TEST_XMLIN_PIKEY_IX   |     1 |       |     1   (0)| 00:00:01 |
|*  9 |      TABLE ACCESS BY INDEX ROWID | SYS82641_TEST_XMLIN_PATH_TABLE |     1 |  1522 |     2   (0)| 00:00:01 |
|  10 |   TABLE ACCESS BY USER ROWID     | XMLTEST                        |     1 |  2014 |     1   (0)| 00:00:01 |
------------------------------------------------------------------------------------------------------------------- 
```

by indexing `paths (include (/root/a/@test))` it would contain the child `<b>` node in the index but not the `test2` attribute. ommitting `/@test` would have the index pick up the `test2` attribute as well.

# javascript - 在 li 之间附加文本？

> ID：15401050
> 
> 赞同：-3
> 
> 时间：2013-03-14T04:10:16.143
> 
> 标签：javascript, jquery

jQuery 函数会将 li 之间的文本附加到 div("#title")。

就像是

```
$(function () {
    $("#videos li a").click(function() {
        $(this).attr('id', 'active');
          $('#title').text($(this).text());
    });
}); 
```

但它会将id“活动”附加到单击的li 上，并在单击另一个时将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:18:38.037

您可以使用以下代码获取值并将其放入 div 中

```
$("#examplediv").html( $("#menu>li>a").html()); 
```

[单击此处查看 jsfiddle 演示](http://jsfiddle.net/arjuncc/9w8Ah/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:14:57.137

像这样试试

```
$(document).ready(function(){
   $('ul#menu li').text('My Text');
}) 
```

你的html应该是这样的

```
<ul id="menu">
   <li><a href="">real</a></li>
</ul> 
```

因为它在你的问题中被打破了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:14:59.060

要获取文本`li`：

```
$('ul#menu li a').text() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:15:58.367

用这个：

**HTML：**

```
<ul id="menu">
    <li id="menu-li"><a href="">real</a></li>
</ul>
<div id="examplediv"></div> 
```

**查询：**

```
$(document).ready(function(){
 $("#examplediv").text($("#menu-li").text());
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T04:25:05.087

将此添加到您的 document.ready 处理程序：

```
$('#menu a').click(function(){
    $('#examplediv').text($(this).text());
}); 
```

# mysql - 此 SQL 查询是否创建临时表？

> ID：15401052
> 
> 赞同：0
> 
> 时间：2013-03-14T04:10:25.207
> 
> 标签：mysql, sql, optimization, temp-tables

```
选择 *
从 （
        (SELECT table1.id1,​​ table1.id1_type AS id1,
         FROM 子 AS table2 STRAIGHT_JOIN 父 AS table1 ON table1.id1=table2.id1
         AND table1.id2=table2.id2
         AND table1.time=table2.time
         在哪里 table1.id1=123456
           AND ((table1.time>=0
                 AND table1.time<=1361936895)))
      联合所有
        （选择 table1.id1 作为 id1，table1.id1_type
         FROM child AS table2 STRAIGHT_JOIN step_parent AS table1 ON table1.id1=table2.id1
         AND table1.id2=table2.id2
         AND table1.time=table2.time
         在哪里 table1.id1=123456
                 AND table1.time<=1361936895)))) AS T
没有 id1_type 的地方 (15)
按时间 DESC LIMIT 2000 排序
```

我正在使用以下 sql 查询（两个联接，一个联合全部），并且在内部添加联接后，我看到延迟严重增加。我可以看到我的机器上的存储空间使用量猛增，我想知道是不是因为我正在创建临时表？

作为添加的上下文，当我添加连接时，我还添加了“table1”、“table2”别名，这样我可以在选择列时避免歧义，我开始看到这些空间使用量增加了。

任何有关此添加或整个查询为何会导致这些查询出现巨大存储峰值的建议将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:17:17.337

由数据库引擎决定它认为什么是完成查询的最佳策略。假脱机到临时表绝对是它的选项之一。

表别名真的不应该与它有任何关系，右列是右列，无论您使用什么标签。

出于兴趣，您是否尝试使用 join 而不是 Straight_join？您通过指定 straight_join 来限制查询优化器的选项。

# mysql - MySQL 计数不会在我的其余数据中返回空计数。

> ID：15401054
> 
> 赞同：0
> 
> 时间：2013-03-14T04:10:28.110
> 
> 标签：mysql, count, null

问题：我无法让我的数据库为存在于数据库中但没有在 tbl_inventory 中分配任何项目的 location_id 返回 0/NULL。在添加到已分配项目的 location_id 的计数中。

**tbl_inventory：（仅发布相关列）**

```
location_id, shop_id, ...
1          | 100
1          | 100
3          | 106
4          | 100
10         | 102
2          | 100 
```

**tbl_location：（发布所有列）**

```
location_id, location_desc, shop_id
1          | Shop Stock   | 100
2          | Crash Kit    | 100
3          | Site 4       | 106
4          | Radar Site   | 102
5          | New Location | 100
...
10         | Fire Stn 2   | 100 
```

**询问**

```
SELECT
tbl_location.location_desc, 
tbl_inventory.location_id, 
COALESCE(COUNT(tbl_location.location_id), 0) as 'idCnt'
FROM tbl_location 
LEFT OUTER JOIN tbl_inventory
ON tbl_location.location_id = tbl_inventory.location_id
WHERE tbl_inventory.shop_id = 110
GROUP BY tbl_location.location_id; 
```

**结果**

```
location_desc, location_id, idCnt
Shop Stock   | 1          | 2
Crash Kit    | 2          | 1
Fire stn 2   | 10         | 1 
```

**这里缺少**的是来自 tbl_location 的 location_id 5

```
New Location | 5          | 0 (or Null, because there are none in tbl_inventory) 
```

**解释：**

我的 tbl_location 是由我们网络中的各个商店分配（和创建）的容器标签表。然后，商店拥有该容器的所有权，并可以将零件分配给它 (tbl_inventory.location_id) 用于库存目的。

我的 PHP 应用程序使用此查询生成可用位置列表，并根据分配给它的项目数量授予选项。如果项目数量为 0，我希望能够删除该位置。

**更糟**

如果我要删除 GROUP BY，整个查询就会被搞砸。只返回 1 个 location_id/desc 并将整个总数加到该行上。

```
location_desc, location_id, idCnt
Shop Stock   | 1          | 5 
```

我不确定这里实际发生了什么（在更糟糕的块中） - 但是我已经手动计算并且原始查询返回正确的计数我只是无法让它描绘**实际上**存在的位置在数据库中，但实际上没有分配任何项目。

任何人有任何见解？我发现的所有修复程序都还没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:12:36.877

移动

```
WHERE tbl_inventory.shop_id = 110 
```

条件加入条件

```
 ON tbl_location.location_id = tbl_inventory.location_id
AND tbl_inventory.shop_id = 110 
```

在您的`FROM`and`LEFT JOIN`子句起作用之后-那里有一行`0`，但`WHERE`将其过滤掉，因为`tbl_inventory.shop_id = 110`该行中没有

PS：在选择它应该是`tbl_location.location_id`，不是`tbl_inventory.location_id`

# ios - 在嵌套块中保留对象的正确方法是什么

> ID：15401058
> 
> 赞同：3
> 
> 时间：2013-03-14T04:10:37.703
> 
> 标签：ios, multithreading, thread-safety, objective-c-blocks

我想为表格视图中的每一行下载图像，所以我编写了一个方法来通过使用块来做到这一点。

我认为 indexPath 和 tableView 可能不会被完成块复制，因为它们是在 If-Statement 中使用的。所以我在完成块执行之前保留它们。

代码是：

```
- (void)downloadImageAtURL:(NSString *)imageURL name:(NSString *)name serial:(BOOL)serial forTableView:(UITableView *)tableView indexPath:(NSIndexPath *)indexPath
{
    NSMutableDictionary *cachedImagesOfURLs = self.cachedImagesOfURLs;

    UITableView *strongTableView = [tableView retain];
    NSIndexPath *strongIndexPath = [indexPath retain];

    [self.downloadManager downloadImageAtURL:imageURL
                                  identifier:[self identifierForIndexPath:indexPath]
                                      serial:serial
                                  completion:^(UIImage *image) {
                                      if (image) {
                                          [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                                              [cachedImagesOfURLs setObject:image forKey:imageURL];

                                              id cell = [strongTableView cellForRowAtIndexPath:strongIndexPath];
                                              if ([cell respondsToSelector:@selector(didDownloadImage:withName:)]) {
                                                  [cell didDownloadImage:image withName:name];
                                              }
                                          }];
                                      }

                                      [strongTableView release];
                                      [strongIndexPath release];
                                  }];
} 
```

但结果是，当完成块执行并尝试创建一个块并在主线程中运行它时，它会崩溃。调试器打印“ **-[XXX cellForRowAtIndexPath:]: unrecognized selector sent to instance** ”。我似乎 tableView 和 indexPath 被释放了。

但我不知道为什么，我试图留住他们。有人可以告诉我如何防止这种崩溃发生吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:26:55.510

我觉得这就够了

```
- (void)downloadImageAtURL:(NSString *)imageURL name:(NSString *)name serial:(BOOL)serial forTableView:(UITableView *)tableView indexPath:(NSIndexPath *)indexPath
{
    NSMutableDictionary *cachedImagesOfURLs = self.cachedImagesOfURLs;

    [self.downloadManager downloadImageAtURL:imageURL
                                  identifier:[self identifierForIndexPath:indexPath]
                                      serial:serial
                                  completion:^(UIImage *image) {
                                      if (image) {
                                              [cachedImagesOfURLs setObject:image forKey:imageURL];

                                              id cell = [tableView cellForRowAtIndexPath:indexPath];
                                              if ([cell respondsToSelector:@selector(didDownloadImage:withName:)]) {
                                                  [cell didDownloadImage:image withName:name];
                                              }
                                      }
                                  }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:31:26.977

甚至更少的代码。不确定您引用的代码位如何工作，但从名称来看，我猜以下内容就足够了：

```
- (void)downloadImageAtURL:(NSString *)imageURL name:(NSString *)name serial:(BOOL)serial forTableView:(UITableView *)tableView indexPath:(NSIndexPath *)indexPath {

    NSMutableDictionary *cachedImagesOfURLs = self.cachedImagesOfURLs;

    [self.downloadManager downloadImageAtURL:imageURL identifier:[self identifierForIndexPath:indexPath] serial:serial completion:^(UIImage *image) {
        if (image) {
            [cachedImagesOfURLs setObject:image forKey:imageURL];
            id cell = [strongTableView cellForRowAtIndexPath:strongIndexPath];
            if ([cell respondsToSelector:@selector(didDownloadImage:withName:)]) {
                [cell didDownloadImage:image withName:name];
            }
        }
    }];
} 
```

# ruby-on-rails - 如何在 Rails 中处理用户撤销 LinkedIn 访问权限

> ID：15401060
> 
> 赞同：0
> 
> 时间：2013-03-14T04:10:46.567
> 
> 标签：ruby-on-rails, oauth, omniauth, linkedin

我应该如何处理用户撤销我对其 LinkedIn 帐户的访问权限？我正在使用 Ruby on Rails`Omniauth`和gem `Omniauth-LinkedIn`（`linkedin`后者包含`oauth`gem）。

我的控制器代码

```
if !@user[:lnk_token].nil?
  client = LinkedIn::Client.new("xxxx","xxxx")
  client.authorize_from_access(@user[:lnk_token].strip,@user[:lnk_access_token_secret].strip)
  @lnk = client.profile(:fields => ["picture-url", "positions", "educations"])
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:02:20.777

使用简单的错误处理程序：

```
if !@user[:lnk_token].nil?
  client = LinkedIn::Client.new("xxxx","xxxx")
  client.authorize_from_access(@user[:lnk_token].strip,@user[:lnk_access_token_secret].strip)
  begin
    @lnk = client.profile(:fields => ["picture-url", "positions", "educations"])
  rescue
    @lnk = nil
  end
end 
```

进一步阅读：[http ://rubylearning.com/satishtalim/ruby_exceptions.html](http://rubylearning.com/satishtalim/ruby_exceptions.html)

# ruby-on-rails - 如何在 Ruby 中创建自定义排序方法

> ID：15401061
> 
> 赞同：15
> 
> 时间：2013-03-14T04:11:09.287
> 
> 标签：ruby-on-rails, ruby

我想指定一个自定义块方法，通过评估两个属性来对对象数组进行排序。但是，经过多次搜索，我没有找到任何没有`<=>`运算符的示例。

我想`a`比较`b`：

```
if a.x less than b.x return -1
if a.x greater than b.x return 1
if a.x equals b.x, then compare by another property , like a.y vs b.y 
```

这是我的代码，它不起作用：

```
ar.sort! do |a,b|
   if a.x < b.y return -1
   elseif a.x > b.x return 1
   else return a.y <=> b.y
end 
```

此块在函数内，`return`正在退出函数并返回`-1`。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-14T05:28:18.553

`x`这将为您提供then for 的升序`y`：

```
points.sort_by{ |p| [p.x, p.y] } 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-14T04:23:10.200

[最佳答案](https://stackoverflow.com/questions/15401061/custom-sort-method-in-ruby#answer-15401861)由以下@AJcodez 提供：

```
points.sort_by{ |p| [p.x, p.y] } 
```

我最初提供的“正确”答案虽然在技术上有效，但不是我建议编写的代码。我记得我的回答是为了适应问题对`if`/的使用，`else`而不是停下来思考或研究 Ruby 是否有一种更具表现力、更简洁的方式，当然，它确实如此。

* * *

声明`case`：

```
ar.sort do |a, b|
  case
  when a.x < b.x
    -1
  when a.x > b.x
    1
  else
    a.y <=> b.y
  end
end 
```

使用三元：

```
ar.sort { |a,b| a.x < b.x ? -1 : (a.x > b.x ? 1 : (a.y <=> b.y)) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T17:45:00.460

这似乎有效：

```
# Ascending
ar.sort! do |a,b|
  (a-b).abs() > 0 ? a-b : 0
end

# Descending
ar.sort! do |a,b|
  (a-b).abs() > 0 ? b-a : 0
end 
```

不需要 spaceship 运算符 ( `<=>`) - 它在 Ruby 中似乎是多余的（就语法效率而言），因为 Ruby 认为`0`是正确的，并且对于这种用法特别是（上面），您可以将显式`0`放在三元中操作员。

# jquery - 在带有 turbolink 的 Rails 中使用 jQuery 进行长轮询

> ID：15401064
> 
> 赞同：3
> 
> 时间：2013-03-14T04:11:22.400
> 
> 标签：jquery, ruby-on-rails, polling, turbolinks

我正在按照说明在[此处](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)使用 jQuery AJAX 请求创建长轮询。下面是我的代码：

```
:javascript
  (function poll(){
      $.ajax({ url: $("comment").data("url"), success: function(data){
          alert(data.comment);
      }, dataType: "json", complete: poll, timeout: 8000 });
  })(); 
```

但是这段代码不是超时 8 秒，而是连续轮询。我做错了什么，或者这是否与`turbolink`我在 Rails 3.2 中使用的 gem 冲突？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:23:38.993

为什么它再次轮询，因为您在完整回调中再次调用函数 poll

```
 (function poll(){
          $.ajax({ url: $("comment").data("url"), success: function(data){
              alert(data.comment);
          }, dataType: "json", complete: poll, timeout: 8000 });
-----------------------------------------^ //here
      })(); 
```

也不要混淆`timeout`with `setTimeout`，这里超时意味着如果 ajax 调用在 8 秒内没有返回，它将触发错误回调

[现场演示](http://jsfiddle.net/D6JXX/1/)

# python - 为什么 Python 在对象之前销毁类变量？

> ID：15401066
> 
> 赞同：8
> 
> 时间：2013-03-14T04:12:01.923
> 
> 标签：python, class, scope, destructor

我了解 Python 不保证程序结束时对象的销毁顺序，甚至不保证它会发生。

所以我明白一个类的析构函数不能依赖全局变量，包括其他模块。

但我会认为类的对象必须在类被销毁之前被销毁。显然不是：

```
class A(object):
    count = 0
    def __init__(self):
        A.count += 1
        print 'Creating object, there are now', A.count
    def __del__(self):
        A.count -= 1
        print 'Destroying object, there are now', A.count

a1 = A()
a2 = A() 
```

在 Windows 7 x64 Python v2.7.3 上，我得到：

```
Creating object, there are now 1
Creating object, there are now 2
Exception AttributeError: "'NoneType' object has no attribute 'count'" in <bound
 method A.__del__ of <__main__.A object at 0x0234B8B0>> ignored
Exception AttributeError: "'NoneType' object has no attribute 'count'" in <bound
 method A.__del__ of <__main__.A object at 0x0234BE90>> ignored 
```

我了解[如何正确清理 Python 对象的含义？](https://stackoverflow.com/questions/865115/how-do-i-correctly-clean-up-a-python-object "https://stackoverflow.com/questions/865115/how-do-i-correctly-clean-up-a-python-object"). 但这种情况适用于类（我的 C++ 朋友的共享或“静态”）变量。实例肯定有对类变量的引用，它不应该首先被销毁，因为我们仍然有对它的引用？

在该类的对象之前销毁该类是问题还是错误？也许我的问题是“类共享变量实际存储在哪里？”

（是的，我知道这可以使用上下文管理器来纠正，甚至简单地：

```
del a1
del a2 
```

在类被销毁之前销毁对象。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T04:16:47.213

> 也许我的问题是“类共享变量实际存储在哪里？”

如果这是您的问题，答案是“在课堂上”。

为了解决您更大的问题：正如您所指出的，`__del__`不能依赖全局变量 - 但`A`它是一个全局变量，因此您不能依赖它。有趣的是，我在文档中找不到关于这一点的官方声明，但互联网上有各种关于`__del__`不能使用全局变量的事实的参考。 [这](http://bytes.com/topic/python/answers/31449-calling-destructor-python-multiply-inherited-class)是一个：

> 当 Python 程序终止时，每个模块中的全局变量都设置为 None。发生这种情况的顺序未定义

`self.__class__.count`如果您通过而不是访问计数，它将起作用`A.count`。（这也是为什么它在你使用时起作用的原因`self.count`。）

# c++ - 关于移动构造函数

> ID：15401072
> 
> 赞同：1
> 
> 时间：2013-03-14T04:12:32.670
> 
> 标签：c++, move-constructor

我有三个问题：

1.  A::str 的内存分配在函数 f 的范围内。将其移动到全局变量 vec 中的元素后，超出 f 范围的内存块是否仍然安全？

2.  对于 struct B，没有明确给出移动构造函数，是否有像 struct A 这样的默认构造函数？

```
struct A
{
    A(const char* p):str(p){}
    A(const A&& a) : str(std::move(a.str))
    {
    }

    string str;
};

struct B
{
    B(const char* p):str(p){}

    string str;
};

vector<A>vec;

void f()
{
    vec.emplace_back(A("hello")); //in vc2010 it will invoke emplace_back(T&&)
}

int _tmain(int argc, _TCHAR* argv[])
{
    f();
    const char* p = vec[0].str.c_str();
    cout << p << endl;
    return 0;
} 
```

3.我可以确认这种危险情况在STL容器中从未发生过吗？

```
struct String
{
    char* pStr; //allocate on heap
    int* someptr; //if point to allocate on stack 
    size_t len;

    String (const String&& s)
    {
    //  something like this:
        pStr = s.pStr;  //ok,safe
        len = s.len; 
        s.pStr = nullptr;

        someptr = s.someptr; //danger
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:06:29.800

1.  这是安全的，因为分配给临时 A 对象的内存被“移动”到向量元素中。

2.  在 VC++ 2010 中不会自动生成移动构造函数，但 VC++ 2010 是在 C++11 标准完成之前发布的，移动构造函数/赋值运算符的规则有所改变。我不确定 VC++ 2012 是否会生成它们，但无论哪种方式都是安全的（唯一的区别是它可以被复制或移动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:03:26.327

1.  内部分配的任何内存`A::str`都由它控制，并且不受`A`创建时有效范围的任何影响。所以你的代码是完全安全的。

2.  当您既未定义复制构造函数也未定义移动构造函数（也未定义复制/移动赋值运算符）时，编译器将为您生成它们。所以有一个与'`B`相同的移动默认生成的构造函数。`A`

# android - Android-布局的正确定位

> ID：15401073
> 
> 赞同：3
> 
> 时间：2013-03-14T04:12:35.033
> 
> 标签：android, android-layout, android-linearlayout

我似乎无法按照我想要的方式正确定位我的布局。我的布局是这样的：

```
LinearLayout
  LinearLayout
      ListView

  LinearLayout
      TextView
      TextView
      TextView
      Button 
```

**我的目标是这样：**

![在此处输入图像描述](../Images/5df98b59e42dbaeb8d4d766a25a6dad7.png)

请对我将使用哪些布局有任何想法？

帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:29:58.540

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/homeTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
     >

 <LinearLayout
     android:layout_centerInParent="true"
     android:layout_width="fill_parent"
    android:layout_height="100dip"
    android:background="@android:color/holo_blue_dark"
    >
    <!-- arrange your lables and button here -->

    </LinearLayout>
   <LinearLayout
    android:layout_width="100dip"
    android:layout_height="fill_parent" 
    android:background="@android:color/holo_purple"
    android:layout_marginLeft="20dip"
    >
       <ListView
           android:layout_width="fill_parent" 
           android:layout_height="fill_parent"

           ></ListView>
   </LinearLayout>
</RelativeLayout> 
```

看下面的线框。您可以设置角半径并在其中添加控件。
![在此处输入图像描述](../Images/4b937580b0891f7075f1a32ad3076962.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:23:32.873

您可以为此使用相对布局，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/first_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="20dip" >

        <Button
            android:id="@+id/btn1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <Button
            android:id="@+id/btn2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btn1" />

        <Button
            android:id="@+id/btn3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btn2" />

        <Button
            android:id="@+id/btn4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btn3" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/second_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_toRightOf="@+id/first_layout" >

        <GridView
            android:id="@+id/gridview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </GridView>

        <Button
            android:id="@+id/btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:25:43.717

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/layout2"
    android:layout_width="fill_parent"
    android:layout_height="200dip"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="100dip"
        android:layout_weight="1" >
    </ListView>
</LinearLayout>

<LinearLayout
    android:id="@+id/layout1"
    android:layout_width="100dip"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />
</LinearLayout>

</RelativeLayout> 
```

# three.js - 三.js-如何在WebGL中愉快地表示对象？

> ID：15401077
> 
> 赞同：0
> 
> 时间：2013-03-14T04:12:51.730
> 
> 标签：three.js, webgl, collada

我正在使用 Three.Js 来表示建筑物的 3D 模型。数据是一个 collada 文件，我正在使用 collada 加载程序。

我有两个主要问题：

1-当我旋转建筑物时，一些墙在某些视图中消失了，而在其他视图中又出现了。红色圆圈中有一些墙壁，但在此视图 {Image (1)} 中没有渲染它们。在另一种观点中，它们是有代表性的。. ![图片 (1)](../Images/582cc41fc493acbb720cb6bc55879643.png)

2-当我有两个接近的表面（如建筑物中的墙壁和空间）时，它会渲染两个表面，这使得它不愉快。墙壁颜色为黄色，空间颜色为灰色。但是我想展示黄色的墙壁，当我关闭墙壁时，看看空间。

![图片 (2)](../Images/8c9995275093465ca8b38a6910e501c2.png)

谢谢你的帮助。

# coffeescript - 中间人服务器不编译咖啡脚本

> ID：15401084
> 
> 赞同：0
> 
> 时间：2013-03-14T04:14:07.667
> 
> 标签：coffeescript, middleman

我过去曾使用 Middleman 来处理静态项目，并在这些项目中使用过 CoffeeScript。在这种情况下，它似乎不起作用。我的印象是 CoffeeScript 编译应该可以在不对项目设置进行任何额外更改的情况下工作。

我创建了项目，创建了一个名为 file.js.coffee 的文件，并启动了中间人服务器。查看 localhost:4567/file.js 后，该文件不存在。但是，localhost:4567/file.js.coffee 似乎仍然存在。

我错过了一个明显的步骤吗？我不记得上次为启用 CoffeeScript 做过任何额外的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:27:19.057

试试放到`source/javascripts`文件夹里？

# php - extract icon for each tag from database

> ID：15401088
> 
> 赞同：2
> 
> 时间：2013-03-14T04:14:43.097
> 
> 标签：php, mysql, tags

I want to display icons for each tag, just like Stackoverflow does. ![Heroku](../Images/1efafc3252fb5792fd052d4046d6068f.png) ![Android](../Images/477a7a4a1185173df49d0e3c65ad4fc4.png) ![Jetty](../Images/2555f283e89e7a6fc82fe32f8ed1a367.png)

There are 2 tables related, table_icon and table_event.

table_event is for recording the events happened, of course tags to each event; table_tag is for storing tags and icons to them.

Here's the structure of table_icon:

```
tag_id
tag_name
icon (an url to an img) 
```

Here's the structure of table_event:

```
event_id
name
modtime
tag 
```

In table_event, tag is stored "tag1,tag2,tag3" in tag cell.

To make it clearer, Here's an example -

Event: "Kobe Got Hurt", related tags: Kobe, Lakers, Injure

table_event:

```
event_id ---- 1
name -------- Kobe Bryant got hurt
modtime ----- Mar. 13, 2013
tag --------- Kobe,Lakers,injure 
```

Corresponding table_tag: (say we have those data in table_tag before hand)

```
tag_id ------ 24
tag_name ---- Kobe
icon -------- .../icon/kobe.png

tag_id ------ 123
tag_name ---- Lakers
icon -------- .../icon/NBA_team_lakers.png

tag_id ------ 36
tag_name ---- injure
icon -------- .../icon/red_cross.png 
```

This is how I extract each tag in PHP:

```
... // Link to Db and table and call smarty.
$t_sql = mysql_query("SELECT * FROM event WHERE 1");

$id = array();
$name = array();
$tag = array();
$icon = array();

while($t_row = mysql_fetch_array($t_sql)){
    array_push($id, $t_row['event_id']);
    array_push($name, $t_row['name']);
    $tag_array = explode(',', $t_row['tag']);
    array_push($tag, $tag_array);
        // Don't know how to extract icon for each tag.
}

$smarty->assign('tid', $tid);
$smarty->assign('name', $name);
$smarty->assign('tag', $tag);
$smarty->display('event.html'); 
```

Any suggestion? Thx in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:23:15.920

Use MySQL `join` with `IN` clause.

```
SELECT table_event.*
FROM table_event
WHERE
    EXISTS
    (
        SELECT 1
        FROM table_tag
        WHERE
        table_tag.tag_id IN(table_event.tag)
    ) 
```

# javascript - 防止折叠的导航栏重新排序右拉元素？

> ID：15401093
> 
> 赞同：2
> 
> 时间：2013-03-14T04:15:01.657
> 
> 标签：javascript, css, twitter-bootstrap, responsive-design

我有以下代码（[页面的完整来源](http://pastebin.com/sgVSnL7u)）：

```
<div class="navbar">
<div class="navbar-inner">
<div class="container">

  <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>

  <!-- Be sure to leave the brand out there if you want it shown -->
  <span class="brand" href="#">Test</span>

  <!-- Everything you want hidden at 940px or less, place within here -->
  <div class="nav-collapse collapse">
   <ul class="nav">
     <li class="{% active request "^/$" %}"><a href="#">Home</a></li>
     <li class="{% active request "^/about$" %}"><a href="#">About</a></li>
   </ul>

    <form class="navbar-search pull-right">
      <input type="text" class="search-query" placeholder="Search...">
    </form>
    <div class="navbar-form pull-right">
     <a href="{% url "login" %}" class="btn">Log in</a>
     <a href="#" class="btn btn-primary">Sign up</a>
    </div>
  </div>
  </div>

    <!-- .nav, .navbar-search, .navbar-form, etc -->
  </div>
</div> 
```

当作为桌面加载时，我得到这个： ![加载为桌面](../Images/ec48791c9e16915e464cfc2a5d7d098d.png) 请注意，“登录”和“注册”按钮位于搜索栏之前。

但是，当我调整浏览器的大小并且导航栏响应时，我得到了这个： ![手机版](../Images/388449c113cbab641b4adfe2f0634114.png)

现在，“登录”和“注册”按钮位于搜索栏之后。这是因为它们是右拉元素。

我尝试将按钮和搜索栏包装在`float: right`父 div 中。这会使它们保持正确的顺序，但会导致它们奇怪地偏向一边。这是不可取的。有没有人有一个解决方案导致他们的订单不被颠倒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T15:41:25.987

导航栏不再使用 .pull-left 或 .pull-right，而是使用 .navbar-left 和 .navbar-right。这避免了由于链接类而导致的特殊性问题，并使样式更容易。

见[http://blog.getbootstrap.com/2013/08/13/bootstrap-3-rc2/](http://blog.getbootstrap.com/2013/08/13/bootstrap-3-rc2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:58:39.620

问题是一旦逻辑启动，浮点数`navbar-form`就会`navbar-search`被设置为无`nav-collapse`。与其依赖浮点数，不如使用`display: inline-block`. 以下似乎工作合理（您应该创建自己的类而不是应用内联样式）：

```
 <div class="pull-right">
    <!-- .btn's already have display: inline-block so don't need to apply it manually -->
    <!-- margin-left: 15px is applied so that the buttons align with the 
        search field -->
        <a style="margin-left: 15px;" href="#" class="btn">Log in</a>
        <a href="#" class="btn btn-primary">Sign up</a>
        <form class="navbar-form" style="display:inline-block">
            <input type="text" class="search-query" placeholder="Search...">
        </form>     
    </div> 
```

# java - 显示 ListView 的子项和标题

> ID：15401098
> 
> 赞同：5
> 
> 时间：2013-03-14T04:15:47.097
> 
> 标签：java, android, android-listview, android-adapter

我有一个`ListView`并且无法显示列表中的子项目...它只显示一个或另一个，但不能同时显示。如果我从下面删除数字，它将显示字符串（标题）：

我想同时显示项目和子项目。

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    this.loadData();

    String []titles_str = titles.toArray(new String[titles.toArray().length]);
    this.setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_2, android.R.id.text1, titles_str));

    Number []subtitles_str = lengths.toArray(new Number[lengths.toArray().length]);
    this.setListAdapter(new ArrayAdapter<Number>(this,
            android.R.layout.simple_list_item_2, android.R.id.text2, subtitles_str));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-09T10:04:26.317

您正在使用“this.setListAdapter”两次，只有第二次“this.setListAdapter”会反映。

根据您的要求，请使用

```
1)custom arrayadapter<customObject> 
      or 
2)simpleadapter. 
```

1）使用自定义arrayadapter，请查看[http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/](http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/)

2）使用简单适配器：

```
List<Map<String, String>> data = new ArrayList<Map<String, String>>();
for (int i=0; i<titles_str.length; i++) {
    Map<String, String> datum = new HashMap<String, String>(2);
    datum.put("title", titles_str[i]);
    datum.put("subtitle", String.valueof(subtitles_str[i]));
    data.add(datum);
}
SimpleAdapter adapter = new SimpleAdapter(this, data,
                                      android.R.layout.simple_list_item_2,
                                      new String[] {"title", "subtitle"},
                                      new int[] {android.R.id.text1,
                                                 android.R.id.text2});
this.setListAdapter(adapter); 
```

# mysql - 很快返回第 5 个对象并将其设为长整数

> ID：15401102
> 
> 赞同：1
> 
> 时间：2013-03-14T04:16:08.663
> 
> 标签：mysql, function

我想返回第 5 个字符或 ID 号。
前任。我有 ID 号 PID-15，我想在“-”之后返回查询，所以在这个例子中 15 然后把这个 aa 设为整数或长整数。我怎样才能做到这一点？有什么特别的功能可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:29:45.477

我认为你可以使用`SUBSTRING_INDEX`

```
SELECT SUBSTRING_INDEX(id,'-',-1) from your_table; 
```

[**SQLFiddle 演示**](http://sqlfiddle.com/#!2/b621f/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:27:24.747

试试这个代码

如果您想使用 SQL 将其从表中删除，请查看以下对您有帮助的函数：SUBSTRING 和 CHARINDEX。您可以使用它们来修剪您的条目。

可能的查询将如下所示（其中 col 是包含图像目录的列的名称：

```
SELECT SUBSTRING(col, LEN(SUBSTRING(col, 0, LEN(col) - CHARINDEX ('/', col))) + 1, LEN(col) - LEN(SUBSTRING(col, 0, LEN(col) - CHARINDEX ('/', col))) - LEN(SUBSTRING(col, CHARINDEX ('.', col), LEN(col)))); 
```

# c - 将新行写入文件

> ID：15401103
> 
> 赞同：2
> 
> 时间：2013-03-14T04:16:08.837
> 
> 标签：c, file, file-io, newline, file-descriptor

我目前正在使用以下命令写入程序的输出文件。我想获取存储在二维数组中的字符串并将其写入我设置的输出文件，即“url_storage.txt”。

下面的示例显示了我如何在程序开始附近设置文件（即初始文件描述符声明和对 open(...) 的调用）并显示对 write(...) 的主要调用，它发生在一个while循环（从二维数组中的每个槽写入，或字符串/字符数组的集合）。我的问题是我想在每个字符串之后插入一个 NEWLINE 字符，但是，以下代码不会产生一个文件，每个字符串（或每次写入的结果）都在单独的行上。有没有什么简单的方法可以让 write 函数识别我希望它遵守换行符？我还发现有一个函数 lseek(...) 可以调整我的文件位置指针（看起来它对于换行调整并不是很有用）。关于如何让它指向下一行的任何建议？

```
int fd2 = open("/directory/path/to/target/output/file/url_storage.txt", O_WRONLY, O_CREAT, 00777);

...
while(...){
      ...
      (void) write(fd2, (" %s \n", matches[ind]), strlen(matches[ind]));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:19:52.200

这：

```
write(fd2, (" %s \n", matches[ind]), strlen(matches[ind])); 
```

不做你认为它做的事。你混淆`printf()`了`write()`. “格式字符串”`" %s \n"`是逗号表达式的第一部分，实际上被丢弃了。仅将字符串写入文件。您必须单独编写换行符：

```
if (write(fd2, " ", 1) != 1 ||
    write(fd2, matches[ind], strlen(matches[ind])) != strlen(matches[ind]) ||
    write(fd2, " \n", 2) != 2)
    ...something went wrong... 
```

[`dprintf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dprintf.html)或者考虑使用类似于`fprintf()`但写入文件描述符而不是文件流的POSIX 。

```
if (dprintf(fd2, " %s \n", matches[ind]) != strlen(matches[ind])+3)
    ...something went wrong... 
```

我试图遵循您的意图，在字符串之前和之后添加一个空格，但如果它是我的代码，至少会省略尾随空格（几乎在任何情况下都不需要换行符之前的空格 -除了`--`在电子邮件中标记签名开始的那个之后。前面的空格可能需要将字符串与之前的字符串分开。但是，我可能会写：

```
if (dprintf(fd2, "%s\n", matches[ind]) != strlen(matches[ind])+1)
    ...something went wrong... 
```

`write()`或具有单独调用的等效项。

* * *

顺便说一句，你写了相当于：

```
 const char path[] = "/directory/path/to/target/output/file/url_storage.txt";
 int fd2 = open(path, O_WRONLY, O_CREAT, 00777); 
```

由于复杂的历史原因，原型[`open()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html)是`int open(const char *path, int flag, ...);`，但只有 2 或 3 个参数是有效的，并且您使用了 4。您应该这样写：

```
 int fd2 = open(path, O_WRONLY|O_CREAT, 0777); 
```

但是编译器不能轻易地诊断出错误；毕竟，原型说的是“任意数量的参数”。此外，除非您正在编写 shell 脚本，否则该文件不应该是可执行的（所以 0666 而不是 0777），我愿意争辩说它也不应该是公开可写的，所以 0664 甚至 0644 会更好，尽管`umask`值的可用性。顺便说一句，使用类似变量`path`而不是文字的一个优点是，如果您不必重复字符串文字，则使用文件名更容易报告有意义的错误消息。

# python - 这个 python 语法是怎么回事？(c == c in s)

> ID：15401111
> 
> 赞同：10
> 
> 时间：2013-03-14T04:16:53.733
> 
> 标签：python, python-2.7

有人刚刚向我展示了这个奇怪的 Python 语法示例。为什么 [4] 有效？

我本来希望它评估为 [5] 或 [6]，但两者都不起作用。这里是否有一些不应该的过早优化？

```
In [1]: s = 'abcd'

In [2]: c = 'b'

In [3]: c in s
 Out[3]: True

In [4]: c == c in s
Out[4]: True

In [5]: True in s
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-e00149345694> in <module>()
----> 1 True in s

TypeError: 'in <string>' requires string as left operand, not bool

In [6]: c == True
Out[6]: False 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T04:24:30.617

这与允许 python 将多个运算符（如`<`）链接在一起的语法糖相同。

例如：

```
>>> 0 < 1 < 2
True 
```

这等价于`(0<1) and (1<2)`，除了中间表达式只计算一次。

该语句`c == c in s`同样等价于`(c == c) and (c in s)`，其计算结果为`True`。

为了突出前面的一点，中间的表达式只计算一次：

```
>>> def foo(x):
...     print "Called foo(%d)" % x
...     return x
...
>>> print 0 < foo(1) < 2
Called foo(1)
True 
```

有关更多详细信息，请参阅[Python 语言参考](http://docs.python.org/2/reference/expressions.html#not-in)。

# actionscript-3 - 当我使用 -raw-metadata 参数时，Flex 编译器会中断

> ID：15401113
> 
> 赞同：1
> 
> 时间：2013-03-14T04:17:05.783
> 
> 标签：actionscript-3, apache-flex, actionscript, metadata, mxmlc

所以我有这个 shell 脚本，可以将我的 AS3 类编译为 SWF 格式。

今天我想在元数据列表的“日期”参数中添加一个精美的时间戳。我正在尝试使用编译器选项`-raw-metadata`，但每次我尝试编译它都会给我这个错误：

```
Adobe Flex Compiler (mxmlc)
Version 4.6.0 build 23201
Copyright (c) 2004-2011 Adobe Systems, Inc. All rights reserved.

command line: Error: default arguments may not be interspersed with other options

Use 'mxmlc -help' for information about using the command line. 
```

你们知道为什么会发生这种情况吗？我在做傻事吗？如果我不使用`-raw-metadata`但单独设置每个参数，它工作正常。

这是我的构建过程（Makefile）：

```
# 
# Rafael Rinaldi (rafaelrinaldi.com)
# Feb 20, 2013
# 

# Flex compiler.
mxmlc=/Users/rafaelrinaldi/Code/Flash/SDK/flex_sdk_4.6/bin/mxmlc

# Flash player.
player=/Applications/Adobe\ Flash\ CS6/Players/Debug/Flash\ Player\ Debugger.app

# Setup.
main=./src/Main.as
libraries=./libs
swc=./swc
source-path=./src
output=./bin/static/Main.swf
run=$(output)

# .swf settings.
fp=11.1
fps=60
bg=0xFFFFFF
dimension=865,720

# Flags.
as3=true
debug=true
strict=true

# Application info.
title=Main
creator=Rafael Rinaldi (rafaelrinaldi.com)
publisher=Rafael Rinaldi (rafaelrinaldi.com)
description=My application.
language=en-US
date=$(shell date +'%B %d, %Y')
timestamp=$(shell date +'%D %T')

# SWF meta data.
define swf_metadata
<metadata>
    <title>$(title)</title> 
    <description>$(description)</description> 
    <publisher>$(publisher)</publisher> 
    <creator>$(creator)</creator> 
    <language>$(language)</language>
    <date>$(timestamp)</date>
</metadata>
endef

export swf_metadata

all: compile run

# Compile main file into a .swf
compile:
    @echo "\nCompiling '$(main)'...\n"
    @$(mxmlc) \
    -as3=$(as3) \
    -debug=$(debug) \
    -strict=$(strict) \
    -target-player=$(fp) \
    -default-frame-rate=$(fps) \
    -default-background-color=$(bg) \
    -default-size=$(dimension) \
    -static-link-runtime-shared-libraries=true \
    -source-path=$(source-path) \
    -source-path+=$(libraries) \
    -library-path=$(swc) \
    $(main) \
    -raw-metadata=$$swf_metadata \
    -o $(output)
    @echo "\nCompiled '$(output)' at `date "+%H:%M of %d/%m"`."

# Runs the application.
run:
    @echo "\nRunning '$(run)'\n"
    @open -a $(player) $(run)

# Aliases.
c: compile
r: run

.PHONY: all 
```

# ruby - 萝卜 - 有漂亮的格式化程序吗？

> ID：15401115
> 
> 赞同：1
> 
> 时间：2013-03-14T04:17:16.910
> 
> 标签：ruby, rspec

在开发测试时，很高兴看到打印的测试步骤很漂亮，就像黄瓜一样。

当我使用 --format 文档运行测试时，它会像这样打印出来

```
I  go  to the  messages  page -> I  should  see page  title "messages" -> I  should  see  today's  date 
```

是否有一个格式化程序可以产生更像黄瓜 --format 的输出？

我无法从萝卜中找到任何样品，以了解我所看到的是否符合我的预期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:34:19.067

我已经发布了[turnip_formatter](https://github.com/gongo/turnip_formatter)。

## 安装。

```
$ gem install turnip_formatter 
```

## 用法

```
$ rspec -r turnip_formatter --format RSpecTurnipFormatter --out report.html 
```

并打开“report.html”，可以查看漂亮格式的HTML。

使用这个，可以轻松查看多个步骤（通过、失败和待处理）。

请尝试。谢谢

# php - 使伪类在 MPDF 中工作

> ID：15401118
> 
> 赞同：1
> 
> 时间：2013-03-14T04:17:43.160
> 
> 标签：php, mpdf

MPDF 是一个 PHP 类，可以将 html 转换为 pdf [http://www.mpdf1.com/mpdf/index.php](http://www.mpdf1.com/mpdf/index.php) 这在 mpdf 中不起作用：

HTML：

```
<div class="fillme"></div> 
```

CSS：

```
.fillme:after {
    content: 'Here I am, filling you oh div'
} 
```

生成的 pdf 中没有出现文本“我在这里，填写你哦 div”。如果您帮助我使其正常工作，我将不胜感激。这个 html/css 完全兼容 IE 8 +，所以我很惊讶流行的 MPDF 不支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:04:44.260

根本不可能做到这一点。等待更新，但与此同时，尝试模拟效果，例如带有边框底部的透明 div 的下划线。

# matlab - Matlab绘制啁啾的对数幅度

> ID：15401123
> 
> 赞同：2
> 
> 时间：2013-03-14T04:18:31.187
> 
> 标签：matlab, signal-processing, fft, frequency-analysis

[我创建了一个与matlab 帮助页面](http://www.mathworks.com/help/signal/ref/chirp.html)上完全相同的对数啁啾。

```
t = 0:0.001:10;      % 10 seconds @ 1kHz sample rate
fo = 10; f1 = 400;   % Start at 10Hz, go up to 400Hz
X = chirp(t,fo,10,f1,'logarithmic');
figure(2);
spectrogram(X,256,200,256,1000,'yaxis'); 
```

![频谱图](../Images/99e4e41d72df60f86ff873fbe4b73272.png)

然后我使用以下代码将它带到频域，该代码适用于我的其他应用程序。

```
fft_prep = fftshift(fft(X));
fft_mag = abs(fft_prep);
pos_fft = fft_mag(1:ceil(length(fft_mag)/2));
db_fft = 20*log10(pos_fft);
figure(1);
plot(db_fft); 
```

我很惊讶地看到下图在 1kHz-5kHz 时似乎令人兴奋：

![频谱分析仪](../Images/588255b36400b90857ef7d82da6ea857.png)

我对 matlab 中的啁啾函数不太熟悉，想知道是否有人看到我遗漏的明显内容。欢迎任何其他指针。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T07:22:54.217

功能没什么问题`chirp`...

您只需要根据频率值绘制 db_fft，而不是矢量索引 =)。

```
plot(linspace(fo,f1,length(db_fft)), db_fft); 
```

![在此处输入图像描述](../Images/680c895d47bd8c162a3c27e93f8a0d8c.png)

我还测试了使用我的其他 FFT 方法计算信号的 FFT，它们也指示了 0 到 400 Hz 之间的范围。

更新：

IMO，我发现不以 dB 或功率（周期图）绘制在视觉上更容易。这是一个很好的例子，也是我计算时域信号 FFT 的 goto 方法：mathworks.se/help/matlab/ref/fft.html

回复：

经过一番思考，我同意我上面的回答是不正确的，但不是因为你说的原因。频域中的 x 轴不应达到啁啾的实际长度（或一半，或 dubbel 或类似的东西）。频域中的 x 轴应该达到信号采样率 (Fs/2) 的一半，并且您有义务确保您以两倍于您希望/希望的最大频率的采样频率对信号进行采样解决。

换句话说，假设您的 FFT 与您的时域信号的长度相同/两倍/一半是不正确的，因为我们可以选择任意数量的频率区间来表示 FFT，最佳实践是长度 = N^2 ( 2) 的幂，用于快速计算。想一想，为什么在计算 FFT 时还需要知道时间值？你没有！您只需要采样频率（应设置为 Fs = 1000 btw，而不是 Fs = 0.001）。

我上面的回答是不正确的，应该是：

```
plot(linspace(0, Fs/2, length(db_fft)), db_fft) 
```

而不是 Fs/2，你写的是 length(t)/(2*Tfinal)。它（几乎）与 Fs/2 的值相同，但它不是正确的方法 =)。

这是我的 goto FFT 方法（值不是以 dB 为单位）。

```
function [X,f] = myfft(x,Fs,norm)
    % usage: [X, f] = myfft(x,Fs,norm);
    %        figure(); plot(f,X)
    % norm: 'true' normalizes max(amplitude(fft))=1, default=false.
    if nargin==2
        norm=false;
    end
    L = length(x); NFFT = 2^nextpow2(L);
    f = Fs/2*linspace(0,1,NFFT/2+1);
    %f =0:(Fs/NFFT):Fs/2;
    X = fft(x,NFFT)/L; X = 2*abs(X(1:NFFT/2+1));
    if norm==true; X = X/max(abs(X)); end
end 
```

这是 [Xfft, f] = myfft(X,Fs); 的结果图 情节（f，Xfft）；请注意，根据 NyQuist 定理，返回频率 bin 向量具有 max(f) = Fs/2（无法解析任何高于 Fs/2 的频率）。

![在此处输入图像描述](../Images/f399020f73076a50d8a2b38544a3168e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:02:50.683

我有几个错误，但并非所有错误都已修复。在尝试了更多代码之后，这是我想出的解决方案。

我添加了更多变量以使设置更加模块化。

```
Tfinal = 10;
Fs = 1/1000;
t = 0:Fs:Tfinal;      % 10 seconds @ 1kHz sample rate
fo = 10; f1 = 400;   % Start at 10Hz, go up to 400Hz
X = chirp(t,fo,Tfinal,f1,'linear'); 
```

当我绘制幅度与 linspace 的关系时，linspace 需要匹配实际啁啾信号的长度，而不仅仅是从低频到高频。因为向量`t`的长度为 1000，并且在 FFT 之后我们使用正半部分，所以啁啾信号的长度为 500，而不是 linspace`f1`建议的 400。

```
fft_prep = fftshift(fft(X));
fft_mag = abs(fft_prep);
pos_fft = fft_mag(ceil(length(fft_mag)/2)+1:length(fft_mag));
db_fft=20*log10(pos_fft);
figure(1);
plot(linspace(0,length(t)/(2*Tfinal),length(db_fft)), db_fft); 
```

我还进行了前面提到的修复，以获得 FFT 的正面而不是负面。这情节：

![在此处输入图像描述](../Images/961a1f84c5db3b00f6fce964e41b6c9d.png)

这准确地描绘了 10Hz-400Hz 的啁啾激励。通过极端情况并使其线性化，您可以更清楚地看到它。尝试采样频率为 100，范围为 10-25，**不**进行 linspace 校正：

![在此处输入图像描述](../Images/2314b653ab44e982ed7aecdf2c6889eb.png)

**修正**后：****

 **![在此处输入图像描述](../Images/36029aa96b3424c2fca164f89c2b5176.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T02:58:49.340

顺便说一句，从 FFT 中提取原始啁啾幅度可能很有用。例如，如果您正在对某个设备的频率进行音频扫描，并且您想知道每个频率处响应的幅度和相位（就像 Pspice 给您的那样）。简而言之，幅度是 a^2 = abs(FFT)^2 *4 * 线性调频带宽 /(Fs * N) 其中 Fs 是采样频率，N 是 FFT 中的点数。例如，从 200 到 400Hz 的啁啾的带宽是 200Hz。

如果你想知道导数，从 Parseval 的定理开始：时间信号的均值 sqr = PSD 下的面积。因此，a^2/2 = sum(abs(FFT)^2) / N^2 其中a 是扫频信号（例如啁啾）的峰值幅度。如果啁啾在频率分布上是线性的而不是对数的，那么 FFT 是平坦的，如上图所示。因此，我们可以用 Nb * abs(FFT)^2 / N^2 替换总和，其中 Nb 是啁啾占据的频率区间数，abs(FFT) 是 FFT 的幅度，对于所有啁啾占据的频率区间。利用一个频点的带宽为 Fs/N 这一事实，我们得到啁啾的带宽为 Nb * Fs /N。上面的结果现在很容易从这里推导出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T10:27:17.633

MATLAB 的[文档](http://nl.mathworks.com/help/matlab/ref/fft.html?searchHighlight=fft&s_tid=doc_srchtitle)实际上提供了`fft`简单的指令，这些指令通常适用于任何选择`chirp`（例如，二次或线性）：

```
Fs = 1000;            % Sampling frequency                    
T = 1/Fs;             % Sampling period       
L = 1500;             % Length of signal
t = (0:L-1)*T;        % Time vector 
```

要分析的信号示例：

```
S = 0.7*sin(2*pi*50*t) + sin(2*pi*120*t);
X = S + 2*randn(size(t)); 
```

计算 FFT：

```
Y   = fft(X);       % Calculate FFT
P2  = abs(Y/L);
P1  = P2(1:L/2+1);
P1(2:end-1) = 2*P1(2:end-1); 
```

频率向量计算为

```
f = Fs*(0:(L/2))/L; 
```

如果您想生成波德幅度图，您首先应将频率转换为 [rad/s]，并将 fft 的结果转换为 [dB]：

```
fRad = f*2*pi;
Pdb = 20*log10(P1); 
```

然后制作一个波特图（考虑到结果的潜在噪声性质，我建议使用散点图）

```
figure
scatter(fRad,Pdb)
set(gca,'xscale','log') 
grid on; grid minor
xlabel('Frequency [rad/s]')
ylabel('Magnitude [dB]') 
```**

# c++ - 指针不匹配和问题

> ID：15401125
> 
> 赞同：1
> 
> 时间：2013-03-14T04:18:45.150
> 
> 标签：c++, pointers

尝试创建一个指针向量，然后将每个指针设置为 NULL。然后我想让向量的某个部分连接到我分配的节点。我在不匹配方面遇到了一些困难。我还想将已经存在的内容添加到新节点的后面。任何反馈都会很友好。我不断收到段错误。

```
struct Node{
    int x;
    Node* rest;
};

void HTadd (int k, Node *ptr)
{

    Node* temp = new Node
    temp->x = k;
    temp->rest= ptr;
    ptr = temp;
}

int main ()
{
    vector <Node *> tableP;
    for (int i = 0; i < 10; i++){
    tableP.push_back(NULL);}

    Node * buggy = tableP[0];
    HTadd(26, buggy);
    cout << buggy->key << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:33:42.780

请注意，我更改了 的函数声明`HTAdd`以接收指向 a 的指针的指针`Node`。由于您想修改向量的第一个元素（即 a ）的内容`Node*`，因此您需要传入`Node**`to `HTAdd`。

编辑：我的原始代码并没有真正改变要连接到您要添加的节点的第 0 个向量元素。下面是你将如何做到的。如您所见，最后两个`cout`语句打印向量 和 的第 0 个元素的内容`buggy`，它们指向同一个地址。

```
#include <iostream>
#include <vector>

using namespace std;

struct Node {
    int x;
    Node* rest;
};

void HTadd (int k, Node **ptr) {
    Node* temp = new Node;
    temp->x = k;
    temp->rest= *ptr;
    *ptr = temp;
}

int main ()
{
    vector<Node*> tableP;

    for (int i = 0; i < 10; i++){
        tableP.push_back(NULL);
    }

    HTadd(26, &tableP[0]);
    Node *buggy = tableP[0];

    cout << tableP[0]->x << endl;
    cout << buggy->x << endl;

    cout << tableP[0] << endl;
    cout << buggy << endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T04:35:07.897

buggy 是 NULL 并且你正在尊重它。您通过值而不是通过引用传递指针，因此您更改了它的内容，而不是它指向的内容。更改 HTAdd 以将指针的引用作为其第二个参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T05:12:00.000

像这样使用 HTadd 的定义

```
void HTadd (int k, Node *&ptr) 
```

像你一样正常调用它。

原因：引用变量意味着为同一位置赋予不同的名称。如果你使用 just `Node * ptr`then 你只是按值传递。ie`ptr`是一个局部变量，它将具有`buggy`（即`null`）中的值的副本。你做什么`ptr`不影响`buggy`。因此要更改`buggy`何时`ptr`更改，请通过`buggy`引用传递。所以`ptr`应该声明为`reference to a pointer to Node`

编辑：现在根据下面的评论`Node * buggy = tableP[1];`将使越野车保持由`new node`（tableP [1] 保持此地址）返回的地址。现在在调用 之后， (coz temp = new node)为`HTadd(26,buggy);`buggy 赋予了一个新值。`ptr = temp`现在 buggy 指向别的东西，但 tableP[1] 没有改变，即`tableP[1]->rest`仍然`NULL`如此 tableP[1]->rest->x 没有意义。因此段错误。为什么 tableP[1] 没有挂起？因为 tableP[1] 是一个变量，`buggy`也是 Node * 类型的另一个变量，所以`Node * buggy = tableP[1]`只需将 tableP[1] 的内容复制到 buggy；

# java - 滑动拼图代码

> ID：15401128
> 
> 赞同：0
> 
> 时间：2013-03-14T04:19:15.937
> 
> 标签：java, eclipse, puzzle, sliding

我们的小组项目是使用 Java Eclipse 创建一个滑动益智游戏。我们有代码来创建一个具有相同图片的 3x3 网格（它应该是一张图片，但分成 9 块，但稍后会很好地学习）。我的部分是创建一个鼠标侦听器，该侦听器单击选定的“磁贴”，然后显示一条消息测试以查看是否正确单击了选定的磁贴。（例如：如果用户单击 tile 1，消息显示“tile 1 is clicked”）我想我必须为每个 tile 创建单独的鼠标侦听器。有什么建议么？

继承人的代码：

```
 import javax.swing.*;
   import javax.swing.event.*;
   import java.awt.*;
   import java.awt.event.*;

   public class Puzzle 
   {
// Initialize the Frame for the Puzzle
private JFrame frame = new JFrame("Puzzle");
private JPanel puzzlePanel = new JPanel( null );
private JLabel status;

// Itemize Menu
private JMenuBar menu = new JMenuBar();
private JMenu menuFile = new JMenu("File");
private JMenuItem menuFileNew = new JMenuItem("New Game");
private JMenuItem menuFileQuit = new JMenuItem("Quit");
private JMenu menuHelp = new JMenu("Help");
private JMenuItem menuHelpAbout = new JMenuItem("About");

// Variables
// Easy(3) Medium(4) Hard(5)
private int dimm = 3;
private int spacing = 5;
private int tileDimm = 96;

// Constructor
public Puzzle() 
{
    status = new JLabel("Default");
    frame.add(status,BorderLayout.SOUTH);

    // Build Menu
    frame.setJMenuBar(menu);
    menuFile.add(menuFileNew);
    menuFile.add(menuFileQuit);
    menuHelp.add(menuHelpAbout);
    menu.add(menuFile);
    menu.add(menuHelp);

    // Panel
    puzzlePanel.setPreferredSize(new Dimension((dimm*tileDimm)+(spacing*(dimm+1)),(dimm*tileDimm)+(spacing*(dimm+1))) );
    frame.add(puzzlePanel);

    // Puzzle Logic
    PuzzleLogic puzzleLogic = new PuzzleLogic(dimm);

    Tile[][] tiles = puzzleLogic.createTileArray();
    puzzleLogic.shuffleTiles(tiles);
    for(int i = 0; i < dimm; i++) 
    {
        for(int ii = 0; ii < dimm; ii++) 
        {
            puzzlePanel.add(tiles[i][ii].getLabel());
            int x = i*tileDimm+(spacing*(i+1));
            int y = ii*tileDimm+(spacing*(ii+1));
            tiles[i][ii].getLabel().setBounds(x,y,tileDimm,tileDimm);

            System.out.print(tiles[i][ii].getContent() + " ");
        }
    }

    HandlerClass handler = new HandlerClass();
    puzzlePanel.addMouseListener(handler);
}

// create listener - inner class
class HandlerClass implements MouseListener
{

    public void mouseClicked(MouseEvent e)
    {

        status.setText(String.format("Tile 1 is clicked"));
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent e) 
    {
        status.setText(String.format(" "));

    }

    @Override
    public void mousePressed(MouseEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // TODO Auto-generated method stub  
    }

}

public void launch() 
{
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack(); //Adjusts panel to components for display
    frame.setVisible(true);
    frame.setResizable(false);
}

// Calls Everything to Action
public static void main(String[] args) 
{
    Puzzle puzzle = new Puzzle();
    puzzle.launch();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:29:07.443

您已经编写的代码为整个谜题提供了一个侦听器。因此，在`mouseClicked`处理程序中，您可以计算鼠标相对于拼图中位置的位置，计算它是否位于顶部/底部/中间三分之一和左侧/右侧/中间三分之一，然后您可以从那里计算出玩家点击了哪一块？

您可以使用`e.getX()`和获取鼠标位置的坐标`e.getY()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:43:53.543

您可以获取鼠标单击的 X 和 Y 坐标，然后分别除以宽度和高度，您可以获得块编号.. 但它会返回 X: 0,1,2 Y:0,1,2 [对于 3x3 块] ..所以请确保在最后添加一个（+1）。您的代码看起来像：

`Xblock = event.getX()/blockwidth + 1;`同样对于 Y

您可能需要获取边框宽度和其他内容才能获得正确的单击位置，以使拼图的左上角为 0,0；

# c# - 如何从数据库 Mysql 中选择数据并将其添加到 DataGridView？

> ID：15401137
> 
> 赞同：-5
> 
> 时间：2013-03-14T04:20:09.697
> 
> 标签：c#, mysql, database, select

这样做的目的是，如果您已经加载了数据，并且您想使用`textbox`该人的姓名、号码等进行搜索并输入他的姓名，它将通过单击按钮直接添加到一个空的数据网格视图中。

```
 string box = txtSearch.Text;
            string table = "reservations";
            string query = "SELECT FROM reservations WHERE Client like '%" + box;
            connection.Open();
            MySqlDataAdapter da_res = null;
            DataSet ds_res = null;
            ds_res = new DataSet();
            da_res = new MySqlDataAdapter(query, connection);
            da_res.Fill(ds_res, table);

            dgvUser.DataSource = ds_res.Tables[table]; 
```

这是代码，实际上我有 6 个列，到目前为止我只尝试了一个。错误发生在 `da_res.Fill(ds_res, table);`

这是错误的详细信息：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“FROM reservations WHERE Client like '%name client'附近使用正确的语法”

```
MySqlConnection connection = null;
            string hostname = "localhost";
            string database = "aparece_hoteldb";
            string username = "root";
            string password = "";
            connection = new MySqlConnection("host=" + hostname +
                                            ";database=" + database +
                                            ";username=" + username +
                                            ";password=" + password + ";"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:36:41.960

改变这个：

```
string query = "SELECT FROM reservations WHERE Client like '%" + box; 
```

对此：

```
string query = "SELECT * FROM reservations WHERE Client like '%" + box +"%'"; 
```

您没有选择任何列。

正如你在这里问的那样，这是一个适合你的例子（你真的需要学习使用谷歌）......

```
private void MainClass_Load(object sender, System.EventArgs e)
{
    string connectionString = @"Driver={MySQL};SERVER=localhost;DATABASE=NorthwindMySQL;";

    OdbcConnection conn= new OdbcConnection(connectionString);
    conn.Open();

    OdbcDataAdapter da = new OdbcDataAdapter ("SELECT CustomerID, ContactName, ContactTitle FROM Customers", conn);            

    DataSet ds = new DataSet("Cust");     
    da.Fill(ds, "Customers");

    dataGrid1.DataSource = ds.DefaultViewManager;
    conn.Close();
} 
```

# file - 在 python 中从文件中读取 `byte` 与 `bytearray` 的含义

> ID：15401138
> 
> 赞同：0
> 
> 时间：2013-03-14T04:20:11.030
> 
> 标签：file, python-3.x, bytearray, byte

从文件中读取时，我经常遇到错误`bytes`，如果我使用它们`ord()`或`chr()`. 可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:20:11.030

如果你`byte`从文件中读取一个，它将被表示为一个字节字符（你应该使用`ord()`它）：

```
>>> print(index_file.read(1))
b'\x0a' 
```

如果您读取一个字节数组，即`bytearray`，数组的每个成员都会很简单`int`（并且您应该使用`chr()`它）：

```
>>> print(index_file.read(2)[0])
10 
```

# sql - SQL server 2000 和水晶报表中的日期变量

> ID：15401139
> 
> 赞同：0
> 
> 时间：2013-03-14T04:20:11.563
> 
> 标签：sql, sql-server, crystal-reports, sql-server-2000

由于我现在的限制，我仍在使用 SQL Server 2000，问题是客户端想要一个应该检索日期变量（即 date_from 和 Date_to）的报告。日期应该只考虑水晶报表中的日期部分

![水晶报表的一部分](../Images/d88686fc91dfd23847a3fb1ba464c4a1.png)

所以这里的问题是，我怎样才能制作水晶报告，只接受日期部分而不接受时间部分。

编辑：这些是参数，我需要一个只接受日期的数据类型。我正在使用 SQL SERVER 2000。如果我必须创建数据类型，如何创建？

编辑：@AndrewLazarus 抱歉，先生回复晚了。我想让我的水晶报告变量只接受日期先生。我真的很抱歉造成混乱。为了向你展示我的意思，我想要一些类似的东西

![在此处输入图像描述](../Images/f145729d8845c816a7d263dadb993766.png)

我从上面的屏幕截图中截取了一些图片，但我希望它可以给你一张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:55:46.797

您可以在报告选择公式中进行比较

[http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp?topic=%2Fcom.businessobjects.integration.eclipse.designer.doc%2Fhtml%2Ftopic683.html](http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp?topic=%2Fcom.businessobjects.integration.eclipse.designer.doc%2Fhtml%2Ftopic683.html)

[http://customerfx.com/pages/reporting/2009/11/19/working-with-the-datepart-function-in-crystal.aspx](http://customerfx.com/pages/reporting/2009/11/19/working-with-the-datepart-function-in-crystal.aspx)

或者

您可以在 sqlserver 中的 sp 中定义字符串参数变量而不是日期（在 sqlserver 中易于管理），并从您的代码或预览中将 datepart 值传递给 sqlserver。

# multithreading - CUDA 和开放 MP

> ID：15401145
> 
> 赞同：1
> 
> 时间：2013-03-14T04:20:36.817
> 
> 标签：multithreading, cuda, openmp, nvidia

我目前没有Fermi，但目标平台是tesla/Fermi，我想问的是Fermi是否支持这样的Open MP：

```
#pragma omp parallel for num_threads(N)

for (int i=0; i<1000; ++i)
{
  int threadID=omp_get_thread_num();
  cudafunctions<<<blocks, threads, 1024, streams[threadID]>>>(input+i*colsizeofinput);
}//where there are N streams created. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:13:11.093

是的，这样的事情[是可能的](https://stackoverflow.com/questions/5234038/cuda-4-0-rc-many-host-threads-per-one-gpu-cudastreamquery-and-cudastreamsync/5244380#5244380)。OpenMP 在尝试将多个内核启动到同一设备（超出流提供的范围）时并没有提供任何特定的好处，并且如果您的意图是实现内核的并发执行，则它不是必需的。

OpenMP 与 CUDA 的典型用例是[管理多个设备](http://docs.nvidia.com/cuda/cuda-samples/index.html#cudaopenmp)。

# iphone - 通过 WIFI 将文件从 iPhone 应用程序导出到计算机 -

> ID：15401154
> 
> 赞同：4
> 
> 时间：2013-03-14T04:21:48.677
> 
> 标签：iphone, ios, xcode, wifi

我希望有人能指出我正确的方向，因为我没有网络编程经验。我需要让用户能够通过 WIFI（如 FTP 服务器）将文件导出到他们的计算机，就像 AirSharing 等某些应用程序通过显示用户只需键入的网址（例如 192.168.3.1:8080）所做的那样进入他们的计算机网络浏览器以访问文件。

但是我在互联网上找不到任何可以指导我如何实现这一点的东西。我已经按照代码使用 Apple 的 NSNetSerice 和 CFNetService 编程指南发布了网络服务，虽然它可以构建和运行，但它并没有出现在我的 Mac 上的任何地方，而且我不知道如何指定网址。我不了解 TCP 或它的作用。

此外，Apple 提供的示例项目（WiTap、BonjourWeb、Cryptoblahblah）似乎都不能帮助我做我想做的事情（而且它们也很复杂）

有谁知道我是否走在正确的轨道上，或者我是否可以遵循任何建议？如果您愿意，我很乐意发布一些示例代码。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T08:07:32.180

是的 。您可以使用此示例代码执行此操作

[iPhoneHttpServer 项目](http://github.com/vodkhang/CocoaHTTPServer-Iphone)

注意：随意使用，风险自负，但如果您有任何疑问，请随时给我发送电子邮件。vodkhang@gmail.com 或访问我的博客：vodkhang.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T03:54:45.820

您可以尝试示例传输 wifi

[https://github.com/vodkhang/CocoaHTTPServer-Iphone](https://github.com/vodkhang/CocoaHTTPServer-Iphone)

# java - 无法让 HttpClient 执行 Imgur API v3 发布请求

> ID：15401156
> 
> 赞同：2
> 
> 时间：2013-03-14T04:22:10.087
> 
> 标签：java, android, api, upload, imgur

我正在尝试构建一个匿名上传到 Imgur API v3 的应用程序，这似乎会导致`NullPointerException`. 我的清单中确实添加了 Internet 权限，所以我不确定为什么这不起作用。由于`client-id`显而易见的原因，将其删除。任何建议将不胜感激。

```
public HttpResponse uploadImage(String image_contents) {
    /* defining imgur api location */
    String API = ("https://api.imgur.com/3/image.json");
    Uri imgurAPI = (Uri.parse(API));

    // url encoding for bitmap

    // String dev_key = ("anon-dev-key-removed");
    String client_id = ("client-id-removed");
    /* String client_secret = ("secret-id-removed"); */
    /* constructing query */
    // spawning apache httpclient and post instance
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(API);
    // defining namevaluepairs for post data and setting entity
    // httpclient help from this url:
    // http://www.vogella.com/articles/ApacheHttpClient/article.html
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("image", image_contents));
    /* for debugging purposes */
    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }
    /* end for debugging purposes */
    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // adding oauth2 header with clientid
    httppost.addHeader("Authorization", "Client-ID " + client_id);
    // execute the post and collect the response as a httpresponse object

    HttpResponse response = null;
    changeText(httppost.toString());
    try {
        response = httpclient.execute(httppost);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    /* shut down http client */
    httpclient.getConnectionManager().shutdown();

    return response;
} 
```

`uploadImage()`不会崩溃，但是当我尝试处理时，`HttpResponse`我得到`NullPointerException`：

```
public void provideURL(HttpResponse response) {
    int responseCode=response.getStatusLine().getStatusCode();
    changeText("test");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T06:51:57.487

它最近可能发生了变化……但是要使用带有 imgur 3.0 API 的 Apache HTTP 客户端（至少在我为它编码时）。您必须为您的 HTTP 客户端添加一些特殊的 SSL 处理代码。如果你不这样做，你的请求应该失败：

```
 // io exception with the message: (hostname in certificate didn't match: <api.imgur.com>    != <imgur.com> OR <imgur.com>) 
```

你可以在这里看到你到底需要做什么（我向其他人解释了这个问题）： [https ://groups.google.com/forum/#!topic/imgur/RQytzya5aa4](https://groups.google.com/forum/#!topic/imgur/RQytzya5aa4)

在发出请求时（在您的 catch 块中）您是否看到任何异常？如果没有，也许 SSL 配置不再是问题。

# powershell - 将 48 小时添加到 CSV 文件中的时间戳

> ID：15401157
> 
> 赞同：1
> 
> 时间：2013-03-14T04:22:13.667
> 
> 标签：powershell, csv, timestamp

我有一个 CSV 文件，它的时间戳采用 DD.MM.YYYY HH:MM 24 小时格式，我需要在 Powershell 中添加 48 小时并以 DD 月、YYYY HH:MM 格式返回。

因此 13.03.2013 23:12 将返回为 2013 年 3 月 15 日 23:12，或 14.03.2013 10:00 将返回为 2013 年 3 月 16 日 10:00。

我试过使用

`$newDate = [DateTime]::$_.Timestamp.AddHours(48)`

但是 Powershell 一直告诉我—— ***“你不能在空值表达式上调用方法。”***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:11:26.393

要解析您的日期，您可以使用：

```
$a = [datetime]::parse("13.03.2013 23:12") 
```

所以以下工作：

```
$b = $a.AddHours(48) 
```

您可以使用以下格式对其进行格式化：

```
$b.ToString("MMMM dd, yyyy HH:MM:ss") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:04:56.130

如果日期格式与您的文化设置匹配，那么您应该能够使用 Get-Date 解析日期字符串：

```
$date = Get-Date '13.03.2013 23:12' 
```

如果没有，您将需要使用 ParseExact 方法：

```
$date = [DateTime]::ParseExact('13.03.2013 23:12','dd.MM.yyyy HH:mm',$null) 
```

现在，您可以为其添加 48 小时，然后根据需要对其进行格式化：

```
$date.AddHours(48).ToString('dd, yyyy HH:mm') 
```

* * *

*从@gjettison 评论更新*

时间戳不是美国格式，我不得不稍微玩弄一下文化，以下完成了我正在寻找的东西

```
$stampCulture = [Globalization.cultureinfo]::GetCultureInfo("en-GB")   
$timeStamp = [datetime]::Parse($_.Timestamp, $stampCulture)   
$expire = $timeStamp.AddHours(48).ToString("MMMM dd, yyyy HH:MM") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:17:59.263

在添加小时数之前检查 的值，`$_.Timestamp`因为消息建议它为空。

如果值可能不包含日期，则可以使用 TryParse。

```
[string]$originalString = "25.12.2013 18:00"
[DateTime]$originalDate = Get-Date

if ([DateTime]::TryParse($originalString,  [ref]$originalDate))
{

    Write-Host "got date: $originalDate" -ForegroundColor Green
    Write-Host "plus 48 hours:" $originalDate.AddHours(48) -ForegroundColor Green
}
else
{
    Write-Host "error" -ForegroundColor Red
} 
```

# java - Java 图像处理

> ID：15401158
> 
> 赞同：3
> 
> 时间：2013-03-14T04:22:18.763
> 
> 标签：java, image

我有一个项目，我必须以多种方式处理图像。我被困在像素化上。

对于像素化，我必须采用一组 10x10 的像素并返回一个单元格，该单元格分别平均了 RGB 颜色。目前，我得到的只是跑步者程序中的红色图像。谢谢您的帮助。

```
public static Photograph pixelated(Photograph photo) {
        int red = 0;
        int green = 0;
        int blue = 0;
        int interval = 10;
        Photograph p = null;
        p = new Photograph(photo.getWidth(),photo.getHeight());
        for (int row=0; row<photo.getHeight(); row +=interval) {
            for (int col=0; col<photo.getWidth(); col +=interval) {

                for (int row2=row; row2<row+10; row2++) {
                    for (int col2=col; col2<col+10; col2++) {
                    red = red + photo.getPixel(col, row).getRed();
                    green = green + photo.getPixel(col, row).getGreen();
                    blue = blue + photo.getPixel(col, row).getBlue();   
                    }
                }
            red = red / interval;
            green = green / interval;
            blue = blue / interval;

            Pixel rgb = new Pixel(red,green,blue);
            for (int row3=0; row<interval; row++) {
                for (int col3=0; col<interval; col++) {
                    p.setPixel(col3, row3, rgb);
        }}}}
        return p;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:41:16.977

你有几个错误在那里。您不会在每个块之间重置红色绿色蓝色值，良好的做法是仅将变量用于所需的范围。

间歇性地使用间隔。

此外，正如指出的那样，您没有正确获得平均值，您可能还需要考虑舍入问题，此代码会截断。

需要注意的一件事是，红绿蓝有时可能是整数，有时是浮点数，如果你把它们混合起来，你会遇到问题。

```
public static Photograph pixelated(Photograph photo) {
    int interval = 10;
    Photograph p = null;
    p = new Photograph(photo.getWidth(),photo.getHeight());
    for (int row=0; row<photo.getHeight(); row +=interval) {
        for (int col=0; col<photo.getWidth(); col +=interval) {
            // declare and reset variables here
            int red = 0;
            int green = 0;
            int blue = 0;

            for (int row2=row; row2<row+interval; row2++) {
                for (int col2=col; col2<col+interval; col2++) {
                    // i assume these functiosn return an int 0 <= x < 256 ?
                    red = red + photo.getPixel(col, row).getRed();
                    green = green + photo.getPixel(col, row).getGreen();
                    blue = blue + photo.getPixel(col, row).getBlue();   
                }
            }
            // you have a square not a line
            red = red / (interval * interval);
            green = green / (interval * interval);
            blue = blue / (interval * interval);

            // i assume this constructor takes ints 0 <= x < 256 ?
            Pixel rgb = new Pixel(red,green,blue);
            // interval needs to be used here
            for (int row3=row; row3< row+interval; row3++) {
                for (int col3=col; col3<col+interval; col3++) {
                    p.setPixel(col3, row3, rgb);
                }
            }
        }
    }
    return p;
} 
```

# asp.net-mvc-4 - JQuery getJSON 在 MVC4 项目中不起作用

> ID：15401159
> 
> 赞同：0
> 
> 时间：2013-03-14T04:22:27.380
> 
> 标签：asp.net-mvc-4, getjson

我不知道我需要在 MVC4 项目中做什么。它在 MVC3 项目中运行良好。

我试图调用控制器方法来获取 Json 结果。我想在客户端输入用户名后显示名字和姓氏。我使用 getJson 从控制器类中获取 Json。它可以在 mvc3 项目中找到，但是在我移到 MVC4 之后，JQuery 方法没有运行。

我的控制器：

```
public JsonResult PopulateDetails(EditUserModel model)
    {
        EditUserModel userResultModel = new EditUserModel();

        userResultModel.LastName = "John";
        userResultModel.FirstName = "Marry";

        return Json(userResultModel, JsonRequestBehavior.AllowGet);
    } 
```

我的观点：

```
<script type="text/javascript">

function PopulateData() {
        var user = {};
        user.UserName = $("#UserName").val();
        $.getJSON("PopulateDetails", user, updateFields);   // Call the Function from Controller

    };

    updateFields = function (data) {

        $("#FirstName").val(data.FirstName);
        $("#LastName").val(data.LastName);

    }; 
```

```
<div class="editor-field">
        @*@Html.EditorFor(model => model.UserName)*@
         @Html.TextBoxFor(model => model.UserName, new { tabindex = "1", onblur = "javascript:PopulateData();"  } )
        @Html.ValidationMessageFor(model => model.UserName)
    </div>

 <div class="editor-label">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div> 
```

请让我知道 MVC4 项目中有什么问题。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:50:16.600

我将所有脚本放入

```
@section Scripts { 

           <script type="text/JavaScript"> {  // My Function  } } 
```

然后为我工作。

# php - 使用选择标签和输入字段搜索

> ID：15401162
> 
> 赞同：0
> 
> 时间：2013-03-14T04:22:48.027
> 
> 标签：php, mysql, jquery

这是我的表1

![表格1](../Images/19f827ac2a5a8f0d21363924d584d2af.png)

这是我的表2 ![在此处输入图像描述](../Images/6da9c4584fa3f94d02f7a2b336318414.png)

这是选择字段和输入搜索字段的表单

```
<form name="search_form" method="get" action="">
    <div class="search_job">
        <div class="heading">
            Search Jobs:
        </div>
        <?php $jobcat = DAOFactory::getTblCategoriesDAO()->queryAll();
        ?>
        <select name="loctopcities" id="loctopcities" class="job_place_input" >
            <option value="" >Select Job Type</option>
            <?php for($k=0;$k<count($jobcat);$k++){
            ?>
            <option id = "catName" value="<?php echo $jobcat[$k]->categoryName; ?>" ><?php echo $jobcat[$k]->categoryName; ?></option>
            <?php } ?>
        </select>
        <input  class="job_area_input populate" name="key" id="key"  type="text"  onKeyUp="suggest_jobs(this.value);" onBlur="fill_reguser();" >
        <input name="btn_submit" value="Search" class="search_button" type="submit" >
        <div class="suggestionsBox" id="suggestions" style="display: none;">
            <div class="suggestionList" id="suggestionsList">
            </div>
        </div>
    </div>
</form> 
```

这是搜索建议的脚本

```
<script>
function suggest_jobs(inputString,selectString){
    if(inputString.length == 0 ){
        $('#suggestions').fadeOut();
    } else {
        $('#key').addClass('load')
        $('#catName').addClass('load')
        $.post("suggestionforjobs.php", {queryString: ""+inputString+"",catName: ""+selectString+""}, function(data){
            //alert("testing : "+data+" :: data length : "+data.length)
            if(data.length >10) {
                $('#suggestions').fadeIn()
                $('#suggestionsList').html(data)
                $('#key').removeClass('load')
                $('#catName').removeClass('load')
            } else {
                $('#suggestions').fadeOut()
                $('#key').removeClass('load')
                $('#catName').removeClass('load')
            }
        });
    }
}
function fill_reguser(thisValue) {
    $('#key').val(thisValue);
    setTimeout("$('#suggestions').fadeOut();", 1000);
}
</script> 
```

这是suggestforjobs.php的代码

```
<?php
include_once("include_dao.php");
if(isset($_POST['queryString']) ||  isset($_POST['catName']) ) 
{
    $value = $_POST['queryString'];
    $catname = $_POST['catName'];
    if(strlen($queryString) >0) 
    {
        $c = DAOFactory::getTblJobsDAO()->querysearchjobs($value,$catname);
        $countm=count($c);
        if($c) 
        {
            echo '<ul>';
            for($m=0;$m<$countm;$m++)
            {
            ?>
            <li onClick="fill_reguser('
            <?PHP echo $c[$m]->jobPosition; ?>')">
                <?PHP echo $c[$m]->jobPosition; ?> 
            </li>
            <?php
            }
            echo '</ul>';
        } else {
            echo 'No Related Search Content Available with this starting letter';
        }
    } else {
        // do nothing
    }
} else {
    echo 'There should be no direct access to this script!';
}
?> 
```

我的查询是：

```
SELECT * FROM tbl_jobs cc INNER JOIN tbl_categories c ON cc.job_category_id = c.category_id WHERE job_position LIKE '%$value%' AND c.category_name LIKE '%$catname%' ORDER BY job_id" 
```

我需要的是：如果我在选择框中选择一个值，它应该传递`query(c.category_name LIKE '%$catname%')`给要在脚本中编写的一些代码，除了`catName: ""+selectString+""`在脚本中一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:46:27.517

```
SELECT * FROM tbl_jobs cc INNER JOIN tbl_categories c ON cc.job_category_id = c.category_id WHERE job_position LIKE '%$value%' AND (column name) LIKE '%$value%' ORDER BY job_id" 
```

# datatable - 具有空数据列表的检票表

> ID：15401170
> 
> 赞同：1
> 
> 时间：2013-03-14T04:23:30.587
> 
> 标签：datatable, wicket

我正在使用 Wicket DataTable 来显示表格。如果包含要在表格中显示的数据的数据列表为空，则表格将呈现所有列标​​题和第一行中的标签，显示“未找到记录”。

如果数据列表为空且仅显示列标题，有什么方法可以删除此标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:11:10.623

输出由`NoRecordsToolbar`. 似乎您没有使用普通`DataTable`的，而是在其构造函数`DefaultDataTable`中添加了a 。`NoRecordsToolbar`

你有（至少）三个选项：

*   创建一个`DataTable`不添加`NoRecordsToolbar`.
*   将资源键设置`datatable.no-records-found`为空值。
*   使用`DefaultDataTable`但删除`NoRecordsToolbar`. 使用`dataTable.getBottomToolbars().visitChildren(NoRecordsToolbar.class)`和删除它。这不是我最喜欢的选择，因为它看起来有点太脆弱了。

# php - PHP解析CSV只返回第一行

> ID：15401173
> 
> 赞同：0
> 
> 时间：2013-03-14T04:23:42.293
> 
> 标签：php, parsing, csv

我正在尝试在 PHP 中解析一个 CSV 文件并使用这些值，但是我的代码仅从 CSV 文件的第一行返回数据。

CSV 文件如下所示

```
C,  QXM0039326, ,           X6, 2288314208
C,  QXP0039226, 7021130,    X6,     100013427 
```

php 看起来像这样：

```
if (($handle = fopen("easy.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",", "\n")) !== FALSE) 
    {
        // do something with the data here
        echo $data[0] . " - ". $data[1] . " - ". $data[2] . "</br>" ;
    }

    fclose($handle);
} 
```

这会产生 $data[0] 等的预期结果，但只会产生 csv 的第一行。所以我得到这样的输出结果：

```
C - QTM0039326 - 2288314208 
```

这正是我想要的输出，但是对于 CSV 中的每一行。

我试图像这样迭代 $data

```
if (($handle = fopen("easy.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",", "\n")) !== FALSE) 
    {
        // do something with the data here
        foreach ($data as $row){
            echo $row[0] . " - ". $row[1] . " - ". $row[4] . "</br>" ;
    }   
    fclose($handle);
}

} 
```

但这给了我一个像这样的非常糟糕的结果（继续）：

```
C - - 
Q - T - 0
- - 
X - 6 - 
2 - 2 - 3 
```

我该怎么做才能获得我想要的结果（即 C - QTM0039326 - 2288314208 ）但对于 CSV 的每一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:32:20.813

您已经关闭了循环内的文件句柄，因此下一次迭代中没有任何内容......

应该看起来像：

```
if (($handle = fopen("easy.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",", "\n")) !== FALSE) 
    {
        // do something with the data here
        echo $data[0] . " - ". $data[1] . " - ". $data[2] . "</br>" ;
    }

    fclose($handle);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:58:29.867

尝试更改这一行。可能是换行有问题。

```
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) 
```

# objective-c - 破解 iPad 或 iPhone 的 UDID

> ID：15401175
> 
> 赞同：1
> 
> 时间：2013-03-14T04:23:49.407
> 
> 标签：objective-c, iphone, ipad, udid

我们能否保证没有人可以通过入侵 iPhone 或 iPad 的操作系统来更改设备 UDID。因为我们使用该 UDID 来验证我们的用户。我们想知道黑客无法更改它来访问我们的系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:40:01.907

不要这样做！而且，不，你不能说。

UDID 在用户空间中已弃用。

越狱的 UDID 伪造者正是这样做的。它们通过移动基板拦截对 UDID 的调用并返回它们自己的值。您唯一能做的就是检测越狱手机并完全阻止它们。

另外，您如何判断他们是否在应用程序和互联网连接之间有代理并即时更改此值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:34:57.587

从 IOS 5 开始，开发人员不推荐使用 IOS 设备 UDID。有关生成 UDID 的替代方法的更多详细信息，请参阅以下链接。 [UIDevice uniqueIdentifier 已弃用 - 现在该怎么办？](https://stackoverflow.com/questions/6993325/uidevice-uniqueidentifier-deprecated-what-to-do-now)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:37:43.753

就目前而言，不清楚您所说的“我们正在使用该 UDID 对我们的用户进行身份验证”是什么意思。这是否意味着只有来自您预先批准与您的服务器通信的设备的 UDID 才能访问它？如果黑客向您的系统提供“更改的 UDID”，那将如何授予访问权限？如果您通过 Apple 的 API 获取 UDID（这些 API 已被弃用，并且在您审查应用程序时可能会导致标记），那么您将受制于给定 API 返回给您的任何内容，否则您将如何获取 UDID？

一般来说，使用单一技术来防止黑客入侵并不是一个好主意。仅传递后端已知的 UDID 不足以获得访问权限。您可能会考虑其他机制，例如客户端 SSL 证书（只有具有给定证书的客户端才能将自己呈现给您的服务器等）或安全令牌供应商。

# android - 资产文件夹中的 Sqlite 数据库

> ID：15401177
> 
> 赞同：2
> 
> 时间：2013-03-14T04:23:54.310
> 
> 标签：android, sqlite

理解概念有问题。

我正在 android 中创建一个 SQLite 示例应用程序。目前我正在使用路径`/data/data/packname/databases`来存储数据库。

我的资产文件夹中没有任何内容，我想知道如何将数据库从我的内部路径复制到`assets`文件夹中。

**原因**：- 我想查看数据库文件`onupgrade()`。

我发现很多与此相关的问题，但对答案不满意。

有什么建议么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:37:53.567

您不能将任何内容复制到`assets`APK 内的文件夹中，因为 APK 无法在运行时更改。

做相反的事情，就是在你的assets文件夹中打包一个数据库并写入磁盘，你可以使用这个项目：[https](https://github.com/jgilfelt/android-sqlite-asset-helper) ://github.com/jgilfelt/android-sqlite-asset-helper 你在开发时使用这个，但不是运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:23:55.983

您可以在运行时将数据库从资产文件夹复制到模拟器或设备。如果您想查看更新的数据库，您必须从模拟器获取数据库到您的系统

```
data/data/packagename/databases 
```

我认为不可能在运行时更改资产文件夹中的数据。我试图这样做，但没有成功。如果您找到解决方案，请发布它，以便我可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T05:10:50.810

我从您的问题中了解到的是您对如何查看 SQLite 数据库的小误解，因此，如果您必须查看数据库文件，则无需将数据库保存在资产文件夹中。数据库文件位于数据>数据>您的应用程序包>数据库。您可以从您的设备推送文件并查看它。因此，如果您必须查看您的数据库，请[按照我对这个问题的回答](https://stackoverflow.com/questions/31137022/how-to-see-sqlite-db-with-out-android-device-moniter/31137674#31137674)。我在哪里简要描述了您如何查看数据库。

# javascript - 如何仅使用 css 显示字符串的一部分

> ID：15401179
> 
> 赞同：13
> 
> 时间：2013-03-14T04:24:19.057
> 
> 标签：javascript, html, css, hide

我希望能够显示最多 10 个字符的字符串。如果字符串超过 10 个字符，我想在末尾附加“...”。

例如，如果我有字符串：

```
'helloworldmynameisryan' 
```

我希望它像这样显示：

```
'helloworld...' 
```

我只是在这样的 div 中显示我的字符串：

```
<div>DisplayMessage</div> 
```

是否有一个我可以创建的类仅在字符串超过 10 个字符时才适用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T04:38:47.090

不幸的是，没有一个好的跨浏览器方法可以只使用 CSS 来做到这一点。'text-overflow' 依赖于字符串的宽度，而不是您需要的字符串长度。

您可以在 javascript 中使用字符串的 .length 属性来实现这一点

```
function ellipsify (str) {
    if (str.length > 10) {
        return (str.substring(0, 10) + "...");
    }
    else {
        return str;
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T05:45:11.470

Firefox 实际上现在确实支持这一点，您只需要确保您尝试“截断”的任何内容都具有块级格式和宽度 - 这可能是父级。

```
.ellipsis {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display:block;
    width : 100px; /* this could be defined on any parent */
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T04:27:16.667

不使用任何`serverside`脚本或者`javascript`你不能这样做。

使用以下功能。

```
function LimitCharacter($data,$limit = 20)
{
    if (strlen($data) > $limit)
    {
        $data = substr($data, 0, strrpos(substr($data, 0, $limit), ' ')) . '...';
        return $data;
    }
    else
    {
        return $data;
    }
} 
```

称它为`LimitCharacter($yourString,5);`

**Javascript**

```
var str = 'Some very long string';
if(str.length > 10) str = str.substring(0,10)+"..."; 
```

**CSS**

```
.limtiCharClass {
    -o-text-overflow: ellipsis;   /* Opera */
    text-overflow:    ellipsis;   /* IE, Safari (WebKit) */
    overflow:hidden;              /* don't show excess chars */
    white-space:nowrap;           /* force single line */
    width: 300px;                 /* fixed width */
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T04:27:10.407

它称为省略号，您可以在块元素上使用它。

但是它在 Firefox 中不起作用，并且您不能将宽度设置为正好 10 个字符，因为您不能在 css 中指定字符宽度。

如果您想要正好 10 个字符和 Firefox 兼容性，则必须使用 javascript 或服务器端解决方案。

检查省略号：[http ://www.quirksmode.org/css/textoverflow.html](http://www.quirksmode.org/css/textoverflow.html)

或试试这个：

```
.ellipsis{
 white-space:nowrap;
 overflow:hidden;
}

.ellipsis:after{
  content:'...';
} 
```

用于此的 jQuery 插件：

[http://devongovett.wordpress.com/2009/04/06/text-overflow-ellipsis-for-firefox-via-jquery/](http://devongovett.wordpress.com/2009/04/06/text-overflow-ellipsis-for-firefox-via-jquery/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T04:29:28.413

省略号是一个 css3 函数，在不同的浏览器中进行测试时会出现问题。一个快速的解决方法是定义一个特定的 div 或 span 并隐藏溢出，然后添加一个背景图像，上面写着“......”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-05T12:10:03.673

最好的方法是使用：

```
text-overflow: ellipsis; 
```

在你的 CSS

这会将您的文本限制为容器的宽度。如果文本超出宽度，则会显示为省略号 (...)。

这可能会有所帮助： [https ://www.w3schools.com/cssref/tryit.asp?filename=trycss3_text-overflow](https://www.w3schools.com/cssref/tryit.asp?filename=trycss3_text-overflow)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-14T04:36:06.950

根据[quirksmode](http://www.quirksmode.org/oddsandends/wbr.html)，如果有像这样的长文本

```
 <div>11111111111111111111111111111111111111111111111111111111</div> 
```

要包装它，你有很多方法，使用`<wbr>`如下标签

```
 <div>111111111111111111111111111<wbr>11111111111111111111111111111</div> 
```

它将显示为
1111111111111111111111 1111111111111111111111 或使用`&shy;`代替 ，输出将是

```
 111111111111111111111-
 1111111111111111111111 
```

或者，如果您正在寻找 JS 解决方案，请使用[此](https://code.google.com/p/hyphenator/).

# python - 使用 __getattr__ 并满足子类的预期行为

> ID：15401180
> 
> 赞同：5
> 
> 时间：2013-03-14T04:24:20.293
> 
> 标签：python

我是 MongoDB 的[一个简单数据库层](https://github.com/Calama/kale/blob/master/kale.py)（受[minimongo](https://github.com/slacy/minimongo)启发）的作者——而且目前几乎绝对是唯一的用户，如果在多个项目中，称为`kale`. 我目前`__getattr__`在模型基类中的使用导致了一些难以跟踪的错误。

我遇到的问题是去年 6 月 David Halter 在这个网站上简明扼要地[阐述的。](https://stackoverflow.com/questions/11116896/python-why-is-getattr-catching-attributeerrors)讨论很有趣，但没有提供任何解决方案。

简而言之：

```
>>> class A(object):
...     @property
...     def a(self):
...         print "We're here -> attribute lookup found 'a' in one of the usual places!"
...         raise AttributeError
...         return "a"
...     
...     def __getattr__(self, name):
...         print "We're here -> attribute lookup has not found the attribute in the usual places!"
...         print('attr: ', name)
...         return "not a"
... 
>>> print(A().a)
We're here -> attribute lookup found 'a' in one of the usual places!
We're here -> attribute lookup has not found the attribute in the usual places!
('attr: ', 'a')
not a
>>> 
```

请注意，这种矛盾的行为并不是我阅读[官方 python 文档](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)所期望的：

> **`object.__getattr__(self, name)`**
> 
> 当属性查找在通常的位置没有找到该属性时调用（即它不是实例属性，也不是在 self 的类树中找到）。name 是属性名称。

`AttributeError`（如果他们提到这是“属性查找”知道是否在“通常的地方”找到属性的方法，那就太好了。澄清的括号在我看来充其量是不完整的。）

`@property`在实践中，这会导致跟踪由于在描述符事物中引发 AttributeError 的编程错误引起的错误的问题。

```
>>> class MessedAttrMesser(object):
...     things = {
...         'one': 0,
...         'two': 1,
...     }
...     
...     def __getattr__(self, attr):
...         try:
...             return self.things[attr]
...         except KeyError as e:
...             raise AttributeError(e)
...     
...     @property
...     def get_thing_three(self):
...         return self.three
... 
>>> 
>>> blah = MessedAttrMesser()
>>> print(blah.one)
0
>>> print(blah.two)
1
>>> print(blah.get_thing_three)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 11, in __getattr__
AttributeError: 'get_thing_three'
>>> 
```

在这种情况下，通过检查整个班级很明显会发生什么。但是，如果您依赖堆栈跟踪中的消息`AttributeError: 'get_thing_three'`，那将毫无意义，因为显然，`get_thing_three`它看起来与它们一样有效。

的目的`kale`是为构建模型提供一个基类。因此，基本模型代码对最终程序员来说是隐藏的，并且像这样掩盖错误的原因并不理想。

最终程序员（*咳咳*）可能会选择`@property`在他们的模型上使用描述符，并且他们的代码应该以他们期望的方式工作*和失败。*

**问题**

如何允许`AttributeError`s 通过已定义的基类传播`__getattr__`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T04:53:55.170

基本上，你不能——或者至少，不能以简单和万无一失的方式。正如您所指出的，`AttributeError`Python 用来确定属性是否“在通常的地方找到”的机制。尽管`__getattr__`文档没有提到这一点，但在文档中更清楚地说明了这一点`__getattribute__`，如您已链接到的问题的[答案中所述。](https://stackoverflow.com/questions/11116896/python-why-is-getattr-catching-attributeerrors/11117902#11117902)

您可以覆盖`__getattribute__`并捕获`AttributeError`那里，但是如果您捕获了一个，您将没有明显的方法来判断它是“真正的”错误（意味着确实没有找到该属性），还是用户代码在执行期间引发的错误查找过程。从理论上讲，您可以检查回溯以查找特定事物，或进行各种其他黑客攻击以尝试验证属性的存在，但这些方法将比现有行为更加脆弱和危险。

另一种可能性是编写您自己的基于 的描述符`property`，但会捕获 AttributeErrors 并将它们重新提升为其他内容。但是，这将要求您使用此属性替换而不是 builtin `property`。此外，这意味着从内部描述符方法引发的 AttributeErrors 不会作为 AttributeErrors 传播，而是作为其他东西传播（无论你用什么替换它们）。这是一个例子：

```
class MyProp(property):
    def __get__(self, obj, cls):
        try:
            return super(MyProp, self).__get__(obj, cls)
        except AttributeError:
            raise ValueError, "Property raised AttributeError"

class A(object):
    @MyProp
    def a(self):
        print "We're here -> attribute lookup found 'a' in one of the usual places!"
        raise AttributeError
        return "a"

    def __getattr__(self, name):
        print "We're here -> attribute lookup has not found the attribute in the usual places!"
        print('attr: ', name)
        return "not a"

>>> A().a
We're here -> attribute lookup found 'a' in one of the usual places!
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    A().a
  File "<pyshell#6>", line 6, in __get__
    raise ValueError, "Property raised AttributeError"
ValueError: Property raised AttributeError 
```

这里 AttributeErrors 被 ValueErrors 替换。如果您只想确保异常“突破”属性访问机制并可以传播到下一个级别，这可能会很好。但是，如果您有复杂的异常捕获代码期望看到一个 AttributeError，它会错过这个错误，因为异常类型已经改变。

（另外，这个例子显然只处理属性 getter，而不是 setter，但应该清楚如何扩展这个想法。）

我想作为此解决方案的扩展，您可以将此`MyProp`想法与自定义`__getattribute__`. 基本上，您可以定义一个自定义异常类，例如`PropertyAttributeError`，并让属性替换将 AttributeError 重新提升为 PropertyAttributeError。然后，在您的自定义`__getattribute__`中，您可以捕获 PropertyAttributeError 并将其重新引发为 AttributeError。基本上`MyProp`和`__getattribute__`可以充当“分流器”，通过将错误从 AttributeError 转换为其他内容，然后在“安全”时再次将其转换回 AttributeError 来绕过 Python 的正常处理。但是，我的感觉是这样做不值得，因为`__getattribute__`可能会对性能产生重大影响。

一个小附录：在 Python 错误跟踪器上已经提出了[一个错误](http://bugs.python.org/issue1615)，并且最近有关于可能解决方案的活动，因此它可能会在未来的版本中得到修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T04:54:08.377

您的代码中会发生什么：

第一个案例`A`：

`>>>print(A().a)`

1.  创建一个实例`A`
2.  `'A'`访问实例上调用的属性

现在python，按照它的数据模型，试图找到`A.a`using `object.__getattribute__`（因为你还没有提供你的 custom `__getattribute__`）

然而 ：

```
@property
def a(self):
    print "We're here -> attribute lookup found 'a' in one of the usual places!"
    raise AttributeError # <= an AttributeError is raised - now python resorts to '__getattr__'
    return "a" # <= this code is unreachable 
```

所以，由于`__getattribute__`查找以 结束`AttributeError`，它调用你的`__getattr__`：

```
 def __getattr__(self, name):
...         print "We're here -> attribute lookup has not found the attribute in the usual places!"
...         print('attr: ', name)
...         return "not a" #it returns 'not a' 
```

你的第二个代码会发生什么：

您`blah.get_thing_three`通过访问`__getattribute__`。由于`get_thing_three`failed(no `three`in `things`) 带有 AttributeError，现在您`__getattr__`尝试查找`get_thing_three`in ，这也失败了 -因为它具有更高的优先级，所以`things`您会得到异常。`get_thing_three`

你可以做什么 ：

你必须写自定义`__getattribute__`和`__getattr__`两者。但是，在大多数情况下，它不会让您走得太远，并且使用您的代码的其他人不会期望某些自定义数据协议。

好吧，我有一个建议给你（我写了一个我在内部使用的粗略的 mongodb orm）：不要依赖你`__getattr__`内部的文档到对象映射器。使用直接访问类中的文档（我认为这不会损害任何封装）。这是我的例子：

```
class Model(object):
  _document = { 'a' : 1, 'b' : 2 }
  def __getattr__(self, name): 
     r"""syntactic sugar for those who are using this class externally. 
     >>>foo = Model()
     >>>foo.a
     1"""

  @property
  def ab_sum(self):
     try :
        return self._document[a] + self._document[b]
     except KeyError:
        raise #something that isn't AttributeError 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:52:49.237

我希望我仍然可以在这里得到更多的想法。还没有满足我的要求！这可能是不可能的，但至少我离得更近了一点：

```
>>> class GetChecker(dict):
...     def __getattr__(self, attr):
...         try:
...             return self[attr]
...         except KeyError as e:
...             if hasattr(getattr(type(self), attr), '__get__'):
...                 raise AttributeError('ooh, this is an tricky error.')
...             else:
...                 raise AttributeError(e)
...     
...     @property
...     def get_thing_three(self):
...         return self.three
... 
>>> 
>>> blah = GetChecker({'one': 0})
>>> print(blah.one)
0
>>> print(blah.lalala)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 6, in __getattr__
AttributeError: type object 'GetChecker' has no attribute 'lalala'
>>> print(blah.get_thing_three)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 7, in __getattr__
AttributeError: ooh, this is an tricky error.
>>> 
```

至少有了这个，我可以提供一条错误消息，提示如何追踪问题，而不是看起来像问题......

不过我还不满意。我很乐意接受可以做得更好的答案！

# javascript - 如何从javascript中的switch语句调用函数

> ID：15401186
> 
> 赞同：1
> 
> 时间：2013-03-14T04:24:41.130
> 
> 标签：javascript, switch-statement

我对 javascript 很陌生，所以我可能看不清楚我的问题。我正在尝试创建一个搜索栏，只搜索 3 个不同的项目。我已经构建了我试图调用的函数，但我无法让它在 switch 语句函数中显示该函数。

```
function doSearch() { //start doSearch
searchvalue = document.searchbox.searchterm.value 

switch (searchvalue){ //start switch statement
    case "4426": buildProduct(); //this is the part that I can't get to work properly.
                 break
    case "88123": buildProduct();
                  break
    case "2400X": buildProduct();

    default:  alert("Sorry, please try again.")
              break 
 } //end switch statement

} //end doSearch 
```

搜索框显示很好，它甚至会提醒`default`很好，但是当我输入`4426`并单击时，它什么也不做。我能够让它工作的唯一方法是添加 a`document.writeln (buildProduct);`而不是`buildProduct()`. 表单的 HTML 是

```
<FORM NAME="searchbox">
    <INPUT TYPE="TEXT" NAME="searchterm">
    <INPUT TYPE="BUTTON" VALUE="Search" ONCLICK="Javascript:doSearch()">
</FORM> 
```

编辑：这是完整的代码。

```
function makeHeader() {
     var data = "<B>"
     data +="<H1>Computers for Sale:</H1>"
     data +="</B>"
     return(data)
}
function makeFooter() {
     var data = "<B>"
     data +="<small>Copyright 2013 ComputersforSale</small>"
     data +="</B>"
     return(data)
}
function buildProduct(prodName, prodID, prodDescription) { //start buildProduct
var data ="<TABLE style='width:100%' BORDER=1 CELLPADDING=10><tr><td>" 
data += makeHeader()
data += "</td></tr>"
data += "<tr><td>"
data += prodName + '</br>' + prodID + '<br>' + prodDescription  
data += "</td></tr>"
data += "<tr><td>"
data += makeFooter()
data += "</td></tr>"
data += "</table>"
return(data)
document.writeln(buildProduct)
document.close()

} //end buildProduct

function doSearch() { //start doSearch
searchvalue = document.searchbox.searchterm.value
switch (searchvalue){ //start switch statement
case "4426":
  buildProduct();
  break;

case "88123": 
  buildProduct();
  break;

case "2400X": 
  buildProduct();
  break;

default: 
  alert("Sorry, please try again.")
  break;
} //end switch statement

} //end doSearch 
```

该函数的 HTML 链接：

```
<a href= "Javascript:buildProduct('HP 4426', '4426','Newest and Best Laptop from HP Computer')">Item #1 HP 4426</a></br>
<a href= "Javascript:buildProduct('IBM 88123 ThinkPad', '88123','IBM micro Laptop Computer')">Item #2 IBM 88123 ThinkPad</a></br>
<a href= "Javascript:buildProduct('Dell Dimension 2400', '2400X','A fast 2.4 ghz computer, 80 GB HD, 256 Meg, CDRW and DVD.')">Item #3 Dell Dimension 2400</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:29:08.157

我认为在 switch 语句中**break 需要分号（;）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:35:32.653

你忘了`break`进去`case "2400X"`也打破了需要`;`

```
 function doSearch(){
        searchvalue = document.searchbox.searchterm.value 
        switch (searchvalue){
            case "4426":
            buildProduct(); //this is the part that I can't get to work properly.
            break;

            case "88123": 
            buildProduct();
            break;

            case "2400X": 
            buildProduct();
            break;

            default: 
            alert("Sorry, please try again.")
            break; 
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-30T14:49:50.377

我想我理解这个问题。考虑这个代码块：

```
 switch (expression) {
        case expression:

            break;
        default:

    } 
```

您的 case 表达式需要与 switch 表达式期望的值相匹配。

因此，如果运行以下代码：

```
var minerals = ['dirt', 'rock', 'gold'];

for (var i = 0; i < minerals.length; i++) {

    var mineral = minerals[i];

    switch (mineral) { // this will see a string value, in this example, for each item of the array
        case isGold (mineral):
            console.log('We struck gold!')
            break;
        default:
            console.log('No gold found. :(')
    }

}

function isGold (mineral) {
    if (mineral === 'gold') {
        return 'gold'; // this needs to match what the switch expression sees, which is a string in this case, not a Boolean.
    }
} 
```

这将是输出：

```
// -> No gold found. :(
// -> No gold found. :(
// -> We struck gold! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-01T14:26:14.787

如果在其他地方不需要该函数（只是为了避免重复代码），您也可以使用[IIFE （立即调用函数表达式）**。](https://developer.mozilla.org/en-US/docs/Glossary/IIFE)而且您不需要添加中断，因为 IIFE 将立即返回。

```
function reducer (state,action) {
    switch (action.type) {
      case 'increment':
        (function () {
          // do something
        })()
      case 'decrement': 
        return {count: state.count - action.payload}
      case 'reset': 
        return init(action.payload)
      default: 
        throw new Error();
    }
  } 
```

# java - 在读取打印条件时打印 ArrayList

> ID：15401192
> 
> 赞同：1
> 
> 时间：2013-03-14T04:25:20.150
> 
> 标签：java, loops, printing, arraylist, anagram

我有两个`ArrayList<String>`s。一个包含带有标点符号和大写的单词，另一个则删除了这些。

清单 1：

```
File word: it's
File word: Sit
File word: yes-man
File word: murdered
File word: ok
File word: DereDrum
File word: Hello
File word: Friend 
```

清单 2：

```
Edited word: its
Edited word: sit
Edited word: yesman
Edited word: murdered
Edited word: ok
Edited word: deredrum
Edited word: hello
Edited word: friend 
```

这个想法是检查并查看哪些单词是彼此的字谜。如果是的话，我想做的就是重新打印它们，但在同一行上的字谜词：

```
it's Sit

yes-man

murdered DereDrum

ok

hello

friend 
```

我试着这样做：

```
 for (int i = 0; i < words.size(); i++)
        {
            System.out.print(words.get(i));
            for (int j = i+1; j < grams.size(); j++)
            {
                anagramChecker(grams.get(i),"",grams.get(j),words.get(j));
            }
            System.out.println();
        } 
```

我想到的方式是这个 for 循环持续 List1(words) 的大小并打印它正在查看的单词。然后我使用我的 anagramChecker：

```
public static void anagramChecker(String s1,String s2,String checked,String word)
{
    if(s1.length() == 0)
    {
        if(s2.equals(checked))
        {
            System.out.println(" " + word);
            return;
        }
    }
    for(int i = 0 ; i < s1.length() ; i++)
    {
        anagramChecker(s1.substring(0, i) + s1.substring(i+1, s1.length()),s2 + s1.charAt(i),checked,word);
    }
} 
```

这种方法不起作用，它的输出是这样的：

```
it's
Sit yes-man
 yes-man
 yes-man
 yes-man
 yes-man
 yes-man
 yes-man
 yes-man

yes-man
murdered
ok
DereDrum Hello

Hello
Friend 
```

我尝试使用地图，以便在单词本身在第二个列表中按字母顺序排序后，我可以按字母顺序对单词进行排序。这具有大致相同的外观输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:54:19.723

[从这里](https://codereview.stackexchange.com/a/1704)重新使用字谜逻辑。

```
public boolean areAnagrams(String s1, String s2) {
    //TODO : Strip punctuations from s1 and s2
    char[] ch1 = s1.toCharArray();
    char[] ch2 = s2.toCharArray();
    Arrays.sort(ch1);
    Arrays.sort(ch2);
    return Arrays.equals(ch1,ch2);
} 
```

遍历两个列表并检查是否为`areAnagrams`真，然后打印出来。

```
for (int i=0;i<size;i++) {  
    String first = firstList.get(i);
    String second = secondList.get(i);
    if (areAnagrams (first, second) {
        System.out.println(first + " " + second);
    }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:38:53.270

试试下面的代码。

```
import java.util.ArrayList;
import java.util.List;

public class Client {

    public static void main(String[] args) {

        List<String> lst1 = new ArrayList<String>();
        List<String> lst2 = new ArrayList<String>();

        lst1.add("it's");
        lst1.add("Sit");
        lst1.add("yes-man");
        lst1.add("murdered");
        lst1.add("ok");
        lst1.add("DereDrum");
        lst1.add("Hello");
        lst1.add("Friend");

        lst2.add("its");
        lst2.add("sit");
        lst2.add("yesman");
        lst2.add("murdered");
        lst2.add("ok");
        lst2.add("deredrum");
        lst2.add("hello");
        lst2.add("friend");

        for (int i = 0; i < lst2.size(); i++) {
            String original = lst2.get(i);
            StringBuffer buff = new StringBuffer(original);
            buff.reverse();
            if (lst2.contains(buff.toString())) {
                System.out.println(lst1.get(i) + " "
                        + lst1.get(lst2.indexOf(buff.toString())));
                lst1.remove(lst2.indexOf(buff.toString()));
                lst2.remove(buff.toString());
            } else {
                System.out.println(lst1.get(i));
            }

        }

    }

} 
```

输出将是。

```
it's
Sit
yes-man
murdered DereDrum
ok
Hello
Friend 
```

您可以通过单击下面的链接在线运行和检查。

[示例 Java 在线运行小提琴](http://ideone.com/g3wMzM)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:18:24.923

再做一次……其他人已经告诉你关键点了。把它放到 char 数组中，排序，比较，完成。

```
package array;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;

public class Anagrams {

    private static ArrayList<Character> convert(String txt) {
    ArrayList<Character> alph = new ArrayList<Character>();
    for (int i = 0; i < txt.length(); i++)
        if (Character.isLetter(txt.charAt(i)))
        alph.add(Character.toLowerCase(txt.charAt(i)));
    Collections.sort(alph);
    return alph;
    }

    public static void main(String[] args) {
    ArrayList<String> first = new ArrayList<String>();
    first.add("it's");
    first.add("Sit");
    first.add("yes-man");
    first.add("murdered");
    first.add("ok");
    first.add("DereDrum");
    first.add("Hello");
    first.add("Friend");

    ArrayList<String> second = new ArrayList<String>();
    second.add("its");
    second.add("sit");
    second.add("yesman");
    second.add("murdered");
    second.add("ok");
    second.add("deredrum");
    second.add("hello");
    second.add("friend");

    ArrayList<Integer> checked = new ArrayList<Integer>();

    for (int i = 0; i < first.size(); i++) {
        String line = "";
        if (!checked.contains(i))
        line += first.get(i) + " ";

        ArrayList<Character> firstChrAry = convert(first.get(i));

        for (int j = i + 1; j < second.size(); j++) {
        ArrayList<Character> secondChrAry = convert(second.get(j));
        if (firstChrAry.size() == secondChrAry.size()) {
            if (firstChrAry.equals(secondChrAry)) {
            line += first.get(j);
            checked.add(j);
            }
        }
        }
        if (!line.equals(""))
        System.out.println(line);
    }

    }
} 
```

在此处添加我的输出结果：

这是坐

好的

谋杀 DereDrum

行

你好

朋友

# string - .htcaccess 脚本

> ID：15401193
> 
> 赞同：0
> 
> 时间：2013-03-14T04:25:32.250
> 
> 标签：string, .htaccess

所以我的个人资料页面遇到了这个（希望很简单）问题。

目前，链接是`http://sound-booth.com/profile/?id=1`

在 .htcaccess 文件的帮助下，我想让链接看起来像这样：`http://sound-booth.com/profile?id=1`

问题是，我不知道一盎司的.htcaccess。介意花一点时间来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:29:36.853

这一定是`http://sound-booth.com/profile/someFile.html?id=1`因为您在`?`. 它必须默认为 index.html 或 home.html 或其他东西。

# python - 编写一个以 bisect_left 作为其一部分的函数来接受迭代输入

> ID：15401198
> 
> 赞同：0
> 
> 时间：2013-03-14T04:25:48.270
> 
> 标签：python, function, matplotlib, iteration, range

我在python中编写了一个函数如下：

```
from bisect import basect_left
    def find(i):
        a=[1,2,3]
        return bisect_left(a,i); 
```

我希望这个函数接受迭代作为输入并生成迭代作为输出。特别是我正在使用 numpy 并且我希望能够使用 linspace 作为输入并获取此代码的输出：

```
import matplotlib.pyplot as plt
t=scipy.linspace(0,10,100)
plt.plot(t,find(t)) 
```

更新!!!：我意识到我得到的错误是：

```
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

这是`bisect_left`从`bisect`图书馆给出的。我怎么解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:43:41.213

您的代码实际上可以正常工作，但是我给出了一些评论：

```
def sqr(i):
  return i*i;                      # you don't need the ";" here 

import matplotlib.pyplot as plt
import scipy                       # you should use "import numpy as np" here
t=scipy.linspace(0,10,100)         # this would be "np.linspace(...)" than
plt.plot(t,sqr(t)) 
```

![simple_figure.png](../Images/722e8e1c94365bd95bc5e61088eb2910.png)

通过您的调用`scipy.linspace(0,10,100)`，您正在创建一个 numpy 数组（scipy 从 numpy 导入 linspace），它内置了对矢量化计算的支持。Numpy 提供了矢量化，如果您需要更复杂的计算[`ufuncs`](http://docs.scipy.org/doc/numpy/reference/ufuncs.html#available-ufuncs)，您可以将其与[索引一起使用。](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#indexing)Matplolib 接受 numpy 数组作为输入并绘制数组中的值。

这是一个[`ipython`](http://ipython.org/)用作交互式控制台的示例：

```
In [27]: ar = np.arange(10)

In [28]: ar
Out[28]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

In [29]: ar * ar
Out[29]: array([ 0,  1,  4,  9, 16, 25, 36, 49, 64, 81])

In [30]: np.sin(ar)
Out[30]: 
array([ 0\.        ,  0.84147098,  0.90929743,  0.14112001, -0.7568025 ,
       -0.95892427, -0.2794155 ,  0.6569866 ,  0.98935825,  0.41211849])
In [31]: ar.mean()
Out[31]: 4.5

In [32]: ar[ar > 5] 
Out[32]: array([6, 7, 8, 9])

In [33]: ar[(ar > 2) & (ar < 8)].min()
Out[33]: 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:32:52.233

您可以使用生成器表达式`plt.plot(t, (sqr(x) for x in t))`
**编辑：**您也可以输入函数：

```
def sqr(t):
    return (i*i for i in t); 
```

或者你可以编写一个带有 yield 语句的[生成器：](http://wiki.python.org/moin/Generators)

```
def sqr(t):
   for i in t:
      yield i*i 
```

# ruby-on-rails - 带有自定义包装器的 simple_form 自定义输入

> ID：15401199
> 
> 赞同：13
> 
> 时间：2013-03-14T04:25:53.363
> 
> 标签：ruby-on-rails, simple-form

我正在尝试在我的应用程序中为货币进行自定义输入。我有那些引导包装器等（我认为它带有 simple_form 或引导 gem ......），所以，我可以做类似的事情：

```
<%= f.input :cost, wrapper => :append do %>
      <%= content_tag :span, "$", class: "add-on" %>
      <%= f.number_field :cost %>
<% end %> 
```

它按预期工作。问题是：我在很多地方都需要同样的东西，我不想到处复制/粘贴。

所以，我决定创建一个自定义输入。

到目前为止，我得到了以下代码：

```
class CurrencyInput < SimpleForm::Inputs::Base

  def input
    input_html_classes.unshift("string currency")
    input_html_options[:type] ||= input_type if html5?

    @builder.input attribute_name, :wrapper => :append do |b|
      # content_tag(:span, "$", class: "add-on")
      b.text_field(attribute_name, input_html_options)
    end
  end
end 
```

但是我遇到了一些错误。看起来不像`b`预期的那样来，所以，它只是不起作用。

真的有可能做到这一点吗？我找不到任何示例，也无法自己完成。

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T13:03:51.337

该块变量不存在，您的输入法必须是这样的：

```
class CurrencyInput < SimpleForm::Inputs::Base

  def input
    input_html_classes.unshift("string currency")
    input_html_options[:type] ||= input_type if html5?

    template.content_tag(:span, "$", class: "add-on") +
      @builder.text_field(attribute_name, input_html_options)
  end
end 
```

现在，您可以在 Simple Form 初始化程序中将默认包装器注册到此自定义输入：

```
config.wrapper_mappings = { :currency => :append } 
```

你可以这样使用：

```
<%= f.input :cost, :as => :currency %> 
```

# iphone - 哪些 obj 文件可以添加到 nglview？

> ID：15401201
> 
> 赞同：0
> 
> 时间：2013-03-14T04:26:31.333
> 
> 标签：iphone, xcode, 3d

我正在根据本教程[http://www.icodeblog.com/2012/09/07/3856/](http://www.icodeblog.com/2012/09/07/3856/)制作一个 iphone 应用程序，但是，当尝试用我的一些 obj 文件替换 3d obj(earth) 时，它没有工作，对添加的obj文件有什么具体要求`nglview`吗？这是 viewdidload 部分：

```
 NGLView *tmpView = [[NGLView alloc] initWithFrame:CGRectMake(110, 110, 140, 140)];
// Set its delegate to self so the drawview method is used.

    tmpView.delegate = self;
// Add the new view on top of our existing view. 

    [self.view addSubview:tmpView];
    tmpView.contentScaleFactor = [[UIScreen mainScreen] scale];
    // Setup some initial environment states to be applied to our mesh.
   NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
              kNGLMeshOriginalYes, kNGLMeshKeyOriginal,
              @"1", kNGLMeshKeyNormalize, nil];

// Initialize the mesh which includes the model file to import (.obj or .dae).

_mesh = [[NGLMesh alloc] initWithFile:@"PAN.obj" settings:settings delegate:nil];

// Initialize the camera used to render the scene.
_camera = [[NGLCamera alloc] initWithMeshes:_mesh, nil];

// If a trasparent background of the NGLView is needed
   tmpView.backgroundColor = [UIColor clearColor];
   nglGlobalColorFormat(NGLColorFormatRGBA);
   nglGlobalFlush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:06:05.417

`nglview`是**[NinevehGL](http://nineveh.gl)**框架的一部分。

`NinevehGL`是纯Obj-C打造的3D引擎

这是[初学者的社区论坛](http://nineveh.gl/community/forum/beginners)

[你可以在这里](http://nineveh.gl/docs/tutorials/)找到基础课程

# python - 从美分到美元的数字格式

> ID：15401202
> 
> 赞同：1
> 
> 时间：2013-03-14T04:26:40.537
> 
> 标签：python, python-2.7, number-formatting

我正在尝试使用 Python 2.7 的字符串格式以美元输出十个苹果的成本，其中单价以美分提供。

我希望`total_apple_cost`to 的值是`"10.00"`，但它是`"1.001.001.001.001.001.001.001.001.001.00"`.

我已经对其他变量进行了测试，以表明它们都按预期出现：

```
# define apple cost in cents
apple_cost_in_cents = 100
# define format string
cents_to_dollars_format_string = '{:,.2f}'
# convert 100 to 1.00
apple_cost_in_dollars = cents_to_dollars_format_string.format(apple_cost_in_cents / 100.)
# assign value of 'apple_cost_in_dollars' to 'apple_cost'
apple_cost = apple_cost_in_dollars
# calculate the total apple cost
total_apple_cost = 10 * apple_cost

# print out the total cost
print 'total apple cost: ' + str(total_apple_cost) + '\n'

#testing
print 'cost in cents: ' + str(apple_cost_in_cents) + '\n'
print 'cost in dollars: ' + str(apple_cost_in_dollars) + '\n'
print 'apple cost: ' + str(apple_cost) + '\n' 
```

**解决方案：**

感谢您在下面的答案都表明变量“apple_cost_in_dollars”是一个字符串。

我的解决方案是让它浮动并保持其余代码几乎相同：

```
apple_cost_in_cents = 100
cents_to_dollars_format_string = '{:,.2f}'
apple_cost_in_dollars = float(cents_to_dollars_format_string.format(apple_cost_in_cents / 100.))
apple_cost = apple_cost_in_dollars
total_apple_cost = 10 * apple_cost

print 'cost in cents: ' + str(apple_cost_in_cents) + '\n'

print 'cost in dollars: $''{:,.2f}'.format(apple_cost_in_dollars) + '\n'

print 'apple cost: $''{:,.2f}'.format(apple_cost) + '\n'

print 'total apple cost: $''{:,.2f}'.format(total_apple_cost) + '\n' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:29:41.847

这是因为`apple_cost_in_dollars`是一个字符串，见下文

```
In [9]: cost = '1'

In [10]: cost * 10
Out[10]: '1111111111'

In [11]: cost = int('1')

In [12]: cost * 10
Out[12]: 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T04:35:37.970

`apple_cost`是一个字符串，您将其乘以 10（它只是将字符串重复 10 次）。在将其格式化为字符串之前先转换为美元。

```
>>> apple_cost_in_cents = 100
>>> cents_to_dollars_format_string = '{:,.2f}'
>>> total_apple_cost_in_dollars_as_string = cents_to_dollars_format_string.format(10*apple_cost_in_cents/100.0)
>>> total_apple_cost_in_dollars_as_string
'10.00' 
```

如果您想进一步格式化货币，您可以查看[语言环境](http://docs.python.org/library/locale.html)模块，特别是该`locale.currency`功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T04:50:35.387

```
>>> import locale
>>> apple_cost_in_cents = 100
>>> locale.setlocale(locale.LC_ALL, '')
'en_US.UTF-8'
>>> locale.currency(apple_cost_in_cents * 10 / 100)
'$10.00' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T04:51:09.510

它被格式化为字符串（文本）。所以如果你写 10 * string_variable，它只会重复那个字符串 10 次。最简单的方法是更改​​此行：

`total_apple_cost = 10 * apple_cost`

到：

`total_apple_cost = cents_to_dollars_format_string.format(10 * apple_cost_in_cents/100)`

# c - 在 C 中，如何读取地址之前的内存块

> ID：15401208
> 
> 赞同：1
> 
> 时间：2013-03-14T04:27:08.700
> 
> 标签：c, pointers, memory

给定一个结构对象或指向一个的指针，我如何读取对象之前的 x 字节内存？例如，如果我知道对象从地址 10 开始，我如何从地址 10-x 读取 x 字节到地址 9？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:31:05.947

就像**Nitzan Shaked**在评论中所说的那样，将指针转换为，`(char *)`以便您可以在字节级别进行指针算术。然后做指针算术（减去你需要减去的字节数），然后将它转换回你需要读取它的事物类型的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:32:30.500

从任何地址读取字节都很容易：只需将指针转换为 a `char*`，减去所需的字节数，然后开始读取，如下所示：

```
struct MyStruct {
    int x;
    int y;
} test[100];
...
void *ptr = &test[50];
...
char *start = (char*)prt;
start -= 10;
// You can read from the start pointer now 
```

您需要确保您尝试读取的内存对于您的应用程序访问是合法的。内存需要是您静态或动态分配的更大结构的一部分。否则，它是未定义的行为，可能导致崩溃。

# javascript - Date() 与 Date().getTime()

> ID：15401211
> 
> 赞同：21
> 
> 时间：2013-03-14T04:27:23.420
> 
> 标签：javascript, date

`new Date()`使用和`new Date().getTime()`减去两个时间戳有什么区别？（[jsFiddle上的测试脚本](http://jsfiddle.net/TSapP/1/)）

以下两个给出相同的结果：

```
var prev1 = new Date();
setTimeout(function() {
    var curr1 = new Date();
    var diff1 = curr1 - prev1;
}, 500);

var prev2 = new Date().getTime();
setTimeout(function() {
    var curr2 = new Date().getTime();
    var diff2 = curr2 - prev2;
}, 500); 
```

有什么理由我应该更喜欢一个而不是另一个？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-14T04:31:43.303

我知道这不在您的问题中，但您可能想考虑`Date.now()`哪个最快，因为您不需要实例化新`Date`对象，请参阅以下内容以比较不同版本：http: [//jsperf.com /date-now-vs-new-date-gettime/8](http://jsperf.com/date-now-vs-new-date-gettime/8)

上面的链接显示 using `new Date()`is faster than `(new Date()).getTime()`，但这`Date.now()`比它们都快。

浏览器支持`Date.now()`甚至还不错（IE9+）：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T04:42:54.873

日期算术将日期转换为纪元时间（自 1970 年 1 月 1 日以来的毫秒数），这就是两个代码片段在功能上相同的原因。

至于哪个更快，Jamund Ferguson 的回答是正确的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T04:31:51.607

当您创建一个新的 Date() 对象时，它会自动初始化为当前时间。

来自 W3Schools：

```
new Date() // current date and time
new Date(milliseconds) //milliseconds since 1970/01/01
new Date(dateString)
new Date(year, month, day, hours, minutes, seconds, milliseconds) 
```

getTime() 函数只是返回那个时间。

来自 W3Schools：

```
Date.getTime() // method returns the number of milliseconds between midnight of January 1, 1970 and the specified date. 
```

[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

# java - Java -> TCP -> node.js（字符串数据传输）

> ID：15401215
> 
> 赞同：1
> 
> 时间：2013-03-14T04:27:49.143
> 
> 标签：java, node.js, sockets, tcp

客户端（Java）

```
Socket tcpClient = new Socket("localhost", 6000); 
String msg ="test";
DataOutputStream os = new DataOutputStream(tcpClient.getOutputStream());
PrintWriter pw = new PrintWriter(os);
pw.println(msg);
pw.flush(); 
```

服务器（node.js JavaScript）

```
var net = require('net');
var server = net.createServer(function (c)
{ //'connection' listener
    log('Java client connected to this nodeServer');
    c.on('data', function (data)
    {
        console.log(data);   
    });
    c.on('end', function ()
    {
        console.log('nodeServer disconnected');
    });
});
server.listen(6000, function ()
{ //'listening' listener
    console.log('nodeServer listening port:6000');
}); 
```

结果

```
nodeServer listening port:6000

Java client connected to this nodeServer

<Buffer 74 65 73 74 0a> 
```

连接成功，但显然，我需要 Result 中的 'test' 字符串。

对于数据，到目前为止，我使用字符串来简化我的问题，但是，能够传输任何对象是理想的。

也许，我需要使用 JSON 框架（用于非二进制对象）通过 Java/TCP 发送，但不确定。

* * *

PS。这可以通过简单地修改为

```
 var data1 = data.toString('utf-8');
 console.log(data1); 
```

只是为了分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:27:49.143

这可以通过简单地修改为

```
 var data1 = data.toString('utf-8');
 console.log(data1); 
```

只是为了分享。

# ruby-on-rails - UserMailer 在 <% end %> 内的 <% end %> 上出错，这是为什么？

> ID：15401217
> 
> 赞同：0
> 
> 时间：2013-03-14T04:28:05.073
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个文本的 UserMailer 模板。在文本视图中，我有以下内容：

```
<% if !@thing.empty? %>
  <% @thing.each do |id, count| %>
    <%= #{count}%> <%= #{id} %> 
  <% end %>
<% end %> 
```

这似乎很好，但它错误？

```
ActionView::Template::Error: /app/views/user_mailer/user_daily_activity.text.erb:12: unterminated string meets end of file
/app/views/user_mailer/myfile.text.erb:12: syntax error, unexpected $end, expecting ')' 
```

知道为什么 rails 会出错吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:31:23.903

该`#{count}`格式仅用于字符串中，不能作为独立参考。由于您没有在字符串中使用它，因此将`#`被解释为注释。

试试这个：

```
<%= count %> <%= id %> 
```

这也将是等效的：

```
<%= "#{count} #{id}" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T04:33:41.777

这是由于您`.html.erb`认为评论。您的第三行充当评论。

```
<% if !@thing.empty? %>
  <% @thing.each do |id, count| %>
    <%= "#{count}" %> <%= "#{id}" %> 
  <% end %>
<% end %> 
```

# regex - 对 awk 正则表达式匹配数字 [0-9] 感到困惑

> ID：15401221
> 
> 赞同：0
> 
> 时间：2013-03-14T04:28:15.763
> 
> 标签：regex, awk

我对 awk 编程很陌生，我尝试通过以下方式提取进程运行时间

```
$ ps -o etime -p 18613 | awk /[0-9][0-9]:[0-9][0-9]:[0-9][0-9]/
 1-00:05:52 
```

我知道如果超过一天，它将采用 dd-hh:mm:ss 格式，但我只是觉得混淆了正则表达式 /[0-9][0-9]:[0-9][0-9] :[0-9][0-9]/ 也会提取“dd-”，为什么不只在我的结果中显示“00:05:52”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:36:37.563

正如西蒙在他对您的问题的评论中所说，`awk`当以这种方式使用时，只会打印完整的匹配行。

对于您的特定情况，我认为只需打印第二行就足够了，减去前三个字符（即从第四个字符开始），您可以这样做：

```
ps -o etime -p 18613 | awk 'NR == 2 { print substr($0, 4); }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:47:42.303

要使用 RE 执行您尝试执行的操作：

```
ps -o etime -p 18613 |
awk 'match($0,/[0-9][0-9]:[0-9][0-9]:[0-9][0-9]/) { print substr($0,RTSTART,RLENGTH) }' 
```

或者在 GNU awk 中，如果每一行都与您的 RE 匹配：

```
ps -o etime -p 18613 |
awk '{print gensub(/.*([0-9][0-9]:[0-9][0-9]:[0-9][0-9]).*/,"\\1","") }' 
```

# android - 每当模拟器在 Android 中启动时删除用户数据

> ID：15401225
> 
> 赞同：0
> 
> 时间：2013-03-14T04:28:33.390
> 
> 标签：android, database, sqlite, emulation

我正在使用一个小型 Android 应用程序。我通过在其中创建自己的 sqlite 数据库和表来保存所有用户数据。该应用程序在模拟器上运行良好。我能够看到 DDMS 上的所有数据。第二天，当我在 DDMS 上启动应用程序并运行它时，我找不到我的数据库。我观察到我所有的用户数据都被清除了。不知道这是怎么发生的。

谁能建议我解决这个问题。我想保留我的数据库，直到我删除或卸载我的应用程序。

帮助将不胜感激。请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:34:21.283

启动模拟器时不应擦除用户数据。检查下图![在此处输入图像描述](../Images/aee2bcba1a366bb8d208c9e6c0c8c7c3.png)

取消选中擦除用户数据，然后启动您的模拟器，它将维护用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:56:22.373

关闭您的模拟器进程，然后检查 c:\Users\%UserName%\.android\avd\{您的模拟器名称}\（在 Windows 中，或放置您的模拟器图像的位置）中的 *.lock 文件，如果 *.lock文件存在那里，然后删除它们，然后重新启动模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:30:07.413

您一定已经启动了一个新的模拟器。您是在其中看到这些数据的模拟器的同一个实例吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T21:04:19.507

我也有同样的问题。我在带有 Android 5.1.1 API 的 Ubuntu 14.04 上运行。如果应用程序崩溃等，您需要找到 .lock 文件并在模拟器关闭的情况下将其删除。然后重新启动。有时它们似乎在没有崩溃的情况下仍然存在，只是在断电时。我会评论，但它不会让我。

# php - 为什么使用包含路径时 file_put_contents 和 fopen 无法创建？

> ID：15401227
> 
> 赞同：2
> 
> 时间：2013-03-14T04:28:38.883
> 
> 标签：php, fopen

使用[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)在相对位置的文件夹中创建和填充文件。

注意到与包含路径和文件创建相关的一些奇怪的怪癖。

**简短版本：查看迭代 2 和迭代 3。为什么后者工作而前者失败？**

**迭代 1**

```
file_put_contents('../../public/remixes/screenshots/test.txt', $data); 
```

这工作得很好。

**迭代 2**

但是，我在这个模块的“根”中有公共目录，并且想使用预先设置的包含路径更直接地引用它。例如：

```
echo(get_include_path()); // this outputs "../../"
file_put_contents('public/remixes/screenshots/test.txt', $data, FILE_USE_INCLUDE_PATH); 
```

错误：“无法打开流：没有这样的文件或目录”

**迭代 3**

很好，PHP 包含路径很不稳定，所以让我们做一些奇怪的事情，看看会发生什么。我会先尝试使用[fopen](http://www.php.net/manual/en/function.fopen.php)来实际创建文件。

```
fopen('../../public/remixes/screenshots/test.txt', 'w');
file_put_contents('public/remixes/screenshots/test.txt', $data, FILE_USE_INCLUDE_PATH); 
```

这又有效了... WAT？

**迭代 4**

有趣的; 我可以先做一个 fopen 但我希望它也使用包含路径：

```
fopen('public/remixes/screenshots/test.txt', 'w', 1);
file_put_contents('public/remixes/screenshots/test.txt', $data, FILE_USE_INCLUDE_PATH); 
```

这会产生两个“无法打开流”错误。情况越来越糟糕。

**迭代 5**

我将自己保留包含路径“魔术”并直接用它构建路径

```
file_put_contents(get_include_path().'public/remixes/screenshots/test.txt', $data); 
```

这行得通，是我能得到的最好的。

**结论**

我想知道为什么迭代 2 失败而迭代 3 成功。

迭代 4 暗示这是 fopen 的问题（因为 file_put_contents 显然只是 fopen / fwrite / fclose 的包装器）

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:57:48.320

刚刚花了一些时间检查[PHP 源代码](https://github.com/php/php-src)。

fopen 解析到[/main/streams/streams.c的第 2007 行](https://github.com/php/php-src/blob/a666285bc2488b7f7362368c388e41428610ad1d/main/streams/streams.c#L2007)

我会为您省去达到这一点的堆栈。

代码的以下部分（第 2026 行）处理 FILE_USE_INCLUDE_PATH 参数：

```
if (options & USE_PATH) {
    resolved_path = zend_resolve_path(path, strlen(path) TSRMLS_CC);
    if (resolved_path) {
        path = resolved_path;
        /* we've found this file, don't re-check include_path or run realpath */
        options |= STREAM_ASSUME_REALPATH;
        options &= ~USE_PATH;
    }
} 
```

事实上，正如 Passerby 在他的评论中指出的那样，这种逻辑将尝试解决路径。如果路径正确解析（到现有文件），则原始路径字符串将替换为“包含化”路径。

如果包含化路径不指向现有文件，则原始路径不会被替换，并且 include_path 将被完全忽略。

该文档并未明确表明这是预期的行为，但正如对该答案的评论中所指出的那样，这并不是那么疯狂。

谜团已揭开。

# android - 显示重复联系人条目的 Android 设备联系人

> ID：15401229
> 
> 赞同：4
> 
> 时间：2013-03-14T04:28:49.850
> 
> 标签：android, contacts

我打算开发一个有助于获取设备联系人并显示在列表中的 android 应用程序。

我正在使用以下代码获取设备联系人，它工作正常，但显示重复的联系人条目。

```
//FETCH DEVICE CONTACTS
public void fetchDeviceContacts(){

    Constant.progressDialog = ProgressDialog.show(ContactListActivity.this,"", "Please wait...");

    Uri contactsUri = ContactsContract.Contacts.CONTENT_URI;
    // Querying the table ContactsContract.Contacts to retrieve all the contacts
    final Cursor contactsCursor = getContentResolver().query(contactsUri, null, null, null,
            ContactsContract.Contacts.DISPLAY_NAME + " ASC ");

    if(contactsCursor.moveToFirst()){
        do{
            long contactId = contactsCursor.getLong(contactsCursor.getColumnIndex("_ID"));

            Uri dataUri = ContactsContract.Data.CONTENT_URI;

            // Querying the table ContactsContract.Data to retrieve individual items like
            // home phone, mobile phone, work email etc corresponding to each contact
            Cursor dataCursor = getContentResolver().query(dataUri, null,
                    ContactsContract.Data.CONTACT_ID + "=" + contactId,
                    null, null);

            String nickName="";
            String homePhone="";
            String mobilePhone="";
            String workPhone="";
            byte[] photoByte=null;
            String homeEmail="";
            String workEmail="";
            String companyName="";
            String title="";

            if(dataCursor.moveToFirst()){
                // Getting Display Name
                contactName= dataCursor.getString(dataCursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME ));
                do{

                    // Getting NickName
                    if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Nickname.CONTENT_ITEM_TYPE))
                        nickName = dataCursor.getString(dataCursor.getColumnIndex("data1"));

                    // Getting Phone numbers
                    if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)){
                        switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                        case ContactsContract.CommonDataKinds.Phone.TYPE_HOME :
                            homePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            break;
                        case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE :
                            mobilePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            break;
                        case ContactsContract.CommonDataKinds.Phone.TYPE_WORK :
                            workPhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            break;
                        }
                    }

                    // Getting EMails
                    if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE ) ) {
                        switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                        case ContactsContract.CommonDataKinds.Email.TYPE_HOME :
                            emailId =homeEmail= dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            break;
                        case ContactsContract.CommonDataKinds.Email.TYPE_WORK :
                            emailId=workEmail = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            break;
                        }
                    }

                    // Getting Organization details
                    if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)){
                        companyName = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                        title = dataCursor.getString(dataCursor.getColumnIndex("data4"));
                    }

                    // Getting Photo
                    if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)){
                        photoByte = dataCursor.getBlob(dataCursor.getColumnIndex("data15"));

                        if(photoByte != null) {
                            Bitmap bitmap = BitmapFactory.decodeByteArray(photoByte, 0, photoByte.length);

                            // Getting Caching directory
                            File cacheDirectory = getBaseContext().getCacheDir();

                            // Temporary file to store the contact image
                            File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+contactId+".png");

                            // The FileOutputStream to the temporary file
                            try {
                                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                                // Writing the bitmap to the temporary file as png file
                                bitmap.compress(Bitmap.CompressFormat.PNG,100, fOutStream);

                                // Flush the FileOutputStream
                                fOutStream.flush();

                                //Close the FileOutputStream
                                fOutStream.close();

                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                            photoPath = tmpFile.getPath();

                        }
                    }

                    //CREATE CONTACT LIST
                    _contactBean=new ContactBean();
                    if(contactName!=null){
                        _contactBean.setName(contactName);
                    }
                    if(photoPath!=null){
                        _contactBean.setPhotoPath(photoPath);
                    }if(emailId!=null){
                        _contactBean.setEmailId(emailId);
                    }
                    if(contactName!=null){
                        _contactArrayList.add(_contactBean);
                    }

                    //////////////////////

                }while(dataCursor.moveToNext());
                /*String details = "";

                        // Concatenating various information to single string
                        if(homePhone != null && !homePhone.equals("") )
                            details = "HomePhone : " + homePhone + "\n";
                        if(mobilePhone != null && !mobilePhone.equals("") )
                            details += "MobilePhone : " + mobilePhone + "\n";
                        if(workPhone != null && !workPhone.equals("") )
                            details += "WorkPhone : " + workPhone + "\n";
                        if(nickName != null && !nickName.equals("") )
                            details += "NickName : " + nickName + "\n";
                        if(homeEmail != null && !homeEmail.equals("") )
                            details += "HomeEmail : " + homeEmail + "\n";
                        if(workEmail != null && !workEmail.equals("") )
                            details += "WorkEmail : " + workEmail + "\n";
                        if(companyName != null && !companyName.equals("") )
                            details += "CompanyName : " + companyName + "\n";
                        if(title != null && !title.equals("") )
                            details += "Title : " + title + "\n";*/

                // Adding id, display name, path to photo and other details to cursor

            }

        }while(contactsCursor.moveToNext());
    }

    runOnUiThread(new Runnable() {
        public void run() {
            Constant.progressDialog.cancel();
            contactsCursor.close();
        }
    });
} 
```

帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:33:52.307

您看到重复是因为同一个联系人可能属于不同的组。例如电子邮件帐户 1 和电子邮件帐户 2。您可以在[http://developer.android.com/guide/topics/providers/contacts-provider.html的子标题](http://developer.android.com/guide/topics/providers/contacts-provider.html)**原始联系人数据来源中**
获取更多信息

# html - 使用 nokogiri 解析带有嵌套循环的 html 树

> ID：15401234
> 
> 赞同：0
> 
> 时间：2013-03-14T04:29:17.850
> 
> 标签：html, ruby, html-parsing, nokogiri

嗨，我是 nokogiri 的新手，正在尝试解析具有不同树结构的 HTML 文档。关于如何解析它的任何建议都会很棒。我想捕获此页面上的所有文本。

```
<div class = "main"> Title</div>
<div class = "subTopic">
    <span = "highlight">Sub Topic</span>Stuff
</div>

<div class = "main"> Another Title</div>
<div class = "subTopic">
    <span class = "highlight">Sub Topic Title I</span>Stuff<br>
    <span class = "highlight">Sub Topic Title II</span>Stuff<br>
    <span class = "highlight">Sub Topic Title III</span>Stuff<br>
</div> 
```

我试过这个，但它只是把每个完整的数组都放出来，我什至不知道如何进入“Stuff”部分。

```
content = Nokogiri::HTML(open(@url))
content.css('div.main').each do |m|
    puts m .text
    content.css('div.subTopic').each do |s|
        puts s.text
        content.css('span.highlight').each do |h|
            puts h.text
        end
    end
end 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:01:49.083

类似的东西会解析你的给定文档结构：

数据

```
<div class="main"> Title</div>
<div class="subTopic">
    <span class="highlight">Sub Topic</span>Stuff
</div>

<div class = "main"> Another Title</div>
<div class = "subTopic">
    <span class = "highlight">Sub Topic Title I</span>Stuff<br>
    <span class = "highlight">Sub Topic Title II</span>Stuff<br>
    <span class = "highlight">Sub Topic Title III</span>Stuff<br>
</div> 
```

代码：

```
require 'nokogiri'
require 'pp'

content = Nokogiri::HTML(File.read('text.txt'));

topics = content.css('div.main').map do |m|
    topic={}
    topic['title'] = m.text.strip
    topic['highlights'] = m.xpath('following-sibling::div[@class=\'subTopic\'][1]').css('span.highlight').map do |h|
      topic_highlight = {}
      topic_highlight['highlight'] = h.text.strip
      topic_highlight['text'] = h.xpath('following-sibling::text()[1]').text.strip
      topic_highlight
    end
    topic
end

pp topics 
```

将打印：

```
[{"title"=>"Title",
  "highlights"=>[{"highlight"=>"Sub Topic", "text"=>"Stuff"}]},
 {"title"=>"Another Title",
  "highlights"=>
   [{"highlight"=>"Sub Topic Title I", "text"=>"Stuff"},
    {"highlight"=>"Sub Topic Title II", "text"=>"Stuff"},
    {"highlight"=>"Sub Topic Title III", "text"=>"Stuff"}]}] 
```

# regex - 使用正则表达式使用下划线和 perl 检索部分字符串？

> ID：15401250
> 
> 赞同：0
> 
> 时间：2013-03-14T04:31:01.103
> 
> 标签：regex, perl

我有一串这样的文本：

```
20130312214255_HD7870Crossfire_Crysis3_1920x1080
20130312221402_HD7870Crossfire_SleepingDogs_1920x1080
20130313133415_HD7870CrossFire_Crysis3_5760x1080 
```

我要返回的是：

```
Crysis3_1920x1080

SleepingDogs_1920x1080

Crysis3_5760x1080 
```

我对正则表达式的经验很少，可以使用一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:57:48.897

```
perl -lne 'print $1 if(/Crossfire_(.*)/)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:50:07.560

一种非常简短的方法，根据要求使用正则表达式：

```
perl -ple'($_)=/([^_]+_[^_]+$)/' file 
```

或者

```
perl -ple's/.*_(?=[^_]+_)//' file 
```

（不要像其他一些答案那样假设只有两个部分可以删除。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:13:58.163

因为在您的示例中偏移量始终相同，您也可以使用[substr](http://perldoc.perl.org/functions/substr.html)来执行此操作：

```
perl -ple'$_=substr$_,31' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T15:11:58.927

他没有说它必须是一个正则表达式......

```
use strict;
use warnings;

my $string = '20130312221402_HD7870Crossfire_SleepingDogs_1920x1080';
my ($datetime, $card, $game, $resolution) = split /_/, $string; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T04:36:33.060

对于单个字符串，您可以使用：

```
my $str = "20130312214255_HD7870Crossfire_Crysis3_1920x1080";
$str =~ s/^(?:[^_]*_){2}//; 
```

如果它包含多个字符串，您可以执行以下操作：

```
my $str = <<'_STR_';
20130312214255_HD7870Crossfire_Crysis3_1920x1080
20130312221402_HD7870Crossfire_SleepingDogs_1920x1080
20130313133415_HD7870CrossFire_Crysis3_5760x1080
_STR_

my @result = $str =~ /^(?:[^_]*_){2}(\S+)/gm; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T04:39:00.077

单程：

```
perl -F_ -ape '$_=join "_",@F[-2,-1];' file 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T09:42:03.923

```
$a="20130312214255_HD7870Crossfire_Crysis3_1920x1080";
if($a=~m/Crossfire_(.*)/){
    print $1;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-14T04:42:12.710

根据您的示例，使用正则表达式尝试此模式

```
[^_ ]*_[0-9]{4}[xX][0-9]{4} 
```

# iphone - 特定日期的 NSDate 为空

> ID：15401255
> 
> 赞同：0
> 
> 时间：2013-03-14T04:31:22.173
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

我得到一个特定日期的空字符串，即 13/03/2013。这是我的代码：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];
NSDate *myDate = [formatter dateFromString:@"12/03/2013 5:47:00 AM"];
NSDate *myDate1 = [formatter dateFromString:@"13/03/2013 6:25:48 AM"];           

NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
[df setDateFormat:@"yyyy-MM-dd HH:mm"];
NSString *datestr = [df stringFromDate:myDate];
NSString *datestr1 = [df stringFromDate:myDate1];
NSLog(@"date object %@,%@",datestr,datestr1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:47:00.370

问题是您的日期格式是`MM/dd/yyyy HH:mm:ss a`. 你添加了一个日期，如：`13/03/2013 6:25:48 AM`。

只有12个月，没有13个月。

将格式更改为：`dd/MM/yyyy HH:mm:ss a`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T04:34:44.740

如果您查看日期格式的标准会更好。[日期和时间格式](http://www.w3.org/TR/NOTE-datetime)

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd/MM/yyyy hh:mm:ss a"];
    NSDate *myDate = [formatter dateFromString:@"12/03/2013 5:47:00 AM"];
    NSDate *myDate1 = [formatter dateFromString:@"13/03/2013 6:25:48 AM"];  

    [formatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
    [formatter setDateFormat:@"yyyy-MM-dd HH:mm"];
    NSString *datestr = [formatter stringFromDate:myDate];
    NSString *datestr1 = [formatter stringFromDate:myDate1];
    NSLog(@"date object %@,%@",datestr,datestr1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T04:36:29.183

因为没有第 13 个月。

13/03/2013 是无效日期，因为您使用格式化程序作为 MM/dd//yyyy。

试试这个

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd/MM/yyyy HH:mm:ss a"];
NSDate *myDate = [formatter dateFromString:@"12/03/2013 5:47:00 AM"];
NSDate *myDate1 = [formatter dateFromString:@"13/03/2013 6:25:48 AM"];

NSLog(@"%@",myDate1);

NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
[df setDateFormat:@"yyyy-MM-dd HH:mm"];
NSString *datestr = [df stringFromDate:myDate];
NSString *datestr1 = [df stringFromDate:myDate1];

NSLog(@"date object %@,%@",datestr,datestr1); 
```

# html - 如何单击没有名称的按钮

> ID：15401266
> 
> 赞同：0
> 
> 时间：2013-03-14T04:33:07.817
> 
> 标签：html, vbscript, form-submit

我正在尝试使用以下代码单击带有 VBScript 的按钮：

```
Set IE = CreateObject("InternetExplorer.Application") 
Set WshShell = WScript.CreateObject("WScript.Shell") 
IE.Navigate "google.com" 
IE.Visible = True 
Wscript.Sleep 2000 
IE.Document.All.Item("uss").Value = "username" 
IE.Document.All.Item("pass").Value = "pass" 
IE.Document.All.Item("character").Value = "character"
IE.Document.All("").Click() 
```

我怎么能点击一个没有名字的按钮？

这是`submit`我要选择的按钮：

```
<td colspan="2" align="right"><input type="submit" value="Submit Now!"></td> 
```

请注意该按钮没有名称。如果我尝试使用提交功能，scipt 不起作用或网页没有响应。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:16:56.943

在这种情况下，您没有任何选择，因此请按标签名称获取。

```
For Each btn In IE.Document.getElementsByTagName("input")
    If btn.type = "submit" Then btn.Click()
Next 
```

# android - onTabSelected 不刷新片段

> ID：15401267
> 
> 赞同：1
> 
> 时间：2013-03-14T04:33:20.173
> 
> 标签：android, android-fragments, refresh, android-actionbar, android-fragmentactivity

嗨，我正在尝试开发一个操作栏导航屏幕，其中显示两个选项卡。我正在激活 onTabselected 侦听器中的片段。但是直到我调用 fagementtransaction.commit() 更改才反映。它只工作一次，我的意思是，如果我切换到 tab2 并再次回到 tab1，片段不会刷新。当切换到 tab2 时，tab2 的内容是绘制在 tab1 的顶部，看起来像重叠。我在这里发布我的代码，请帮助我解决这个问题。

这是我的课：

```
public class ContentActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle arg0) {
     this.requestWindowFeature(Window.FEATURE_ACTION_BAR);
       // this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND,
               // WindowManager.LayoutParams.FLAG_DIM_BEHIND);
     //this.getWindow().setDimAmount((float) 30.0);
        LayoutParams params = this.getWindow().getAttributes(); 
        params.height = LayoutParams.WRAP_CONTENT; //fixed height
        params.width = LayoutParams.MATCH_PARENT; //fixed width

       this.getWindow().setGravity(Gravity.START);
        this.getWindow().setAttributes((android.view.WindowManager.LayoutParams) params); 
    super.onCreate(arg0);
    setContentView(R.layout.layout_content);

    ActionBar actionbar = getActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab BookMarkTab = actionbar.newTab().setText("BookMarks");
    ActionBar.Tab NotesTab = actionbar.newTab().setText("Notes");

//  Fragment bookMarkFragment = new BookMarkFragment();
    //Fragment notesFragment = new NotesFragment();

    BookMarkTab.setTabListener(new ContentTabListner(BookMarkFragment.class,"BookMarks"));
    NotesTab.setTabListener(new ContentTabListner(NotesFragment.class,"Notes"));

    actionbar.addTab(BookMarkTab);
    actionbar.addTab(NotesTab);
}

class ContentTabListner implements ActionBar.TabListener {
    private Fragment fragment;
    private Class  mclz;
    private String mTag;
    android.support.v4.app.FragmentTransaction fft = ContentActivity.this
            .getSupportFragmentManager().beginTransaction();

    public ContentTabListner(Class clazz,String tag) {
        mclz = clazz;
        mTag = tag;

        fragment = ContentActivity.this.getSupportFragmentManager().findFragmentByTag(mTag);
            if (fragment != null && !fragment.isDetached()) {
                android.support.v4.app.FragmentTransaction ft = ContentActivity.this.getSupportFragmentManager().beginTransaction();
                ft.detach(fragment);
                ft.commit();
            }
    }

    @Override
    public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {

    }

    @Override
    public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {
        if(fragment == null){
            fragment = Fragment.instantiate(ContentActivity.this, mclz.getName(),null);
            fft.add(android.R.id.content,fragment, mTag);
            fft.commit();
        }else{
            fft.attach(fragment);
        }
    }

    @Override
    public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
        if(fragment != null){
            fft.detach(fragment);
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:13:25.523

我建议使用 Activity 而不是 FragmentActivity。希望它有效

# sql - 使用动态列创建表

> ID：15401268
> 
> 赞同：7
> 
> 时间：2013-03-14T04:33:25.243
> 
> 标签：sql, sql-server, sql-server-2008, azure-sql-database, azure-storage

我需要在临时表中插入一些数据。

我有一些***基于条件的列，例如`Salary`,`Code`***。

如何为基于条件的列创建表？**我不想用** **`SELECT INTO #tempTable`**

这是代码：

```
DECLARE @sql NVARCHAR(MAX)
,@sqlSelect NVARCHAR(MAX) = ''
,@sqlFrom NVARCHAR(MAX) =''

CREATE TABLE #myTempTable (Id INT, DeptId INT, DeptName VARCHAR(100))

SET @sqlSelect ='INSERT INTO #myTempTable
SELECT EMP.Id, EMP.DeptId, EMP.DeptName'

SET @sqlFrom =' FROM dbo.EMPLOYEE AS EMP'

IF (someCondition)
BEGIN
    SET @sqlSelect = @sqlSelect +', EMP.Salary, EMP.Code'            
END

SET @sql =  @sqlSelect +@sqlFrom 

EXEC sp_executesql @sql 
```

关于我能做得更好的任何帮助/建议？

* * *

**更新：**

最初我在`SELECT INTO #TempTable`没有指定列的情况下使用，由于 SQL Azure 不支持，我决定使用`INSERT INTO`. 但不确定如何在已定义的结构中添加动态列。其完全动态的 SQL :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:44:39.190

How many dynamic columns do you need?

What about having a column called `Dynamic` of type `nvarchar(MAX)` or something of the like, and then you can just put your data in there and format as appropriate.

Another option is to create a table with `NULL` columns.

To do this in SQL, you can do the following:

```
CREATE TABLE tblPerson
(
    PersonId INT,
    FirstName NVARCHAR(256),
    LastName NVARCHAR(256) NULL,
    PRIMARY KEY (PersonId)
) 
```

Notice the `NULL` column above also.

See here for further explanation on creating tables with `Primary Keys` and `NULL` columns in SQL:

[Create tables in SQL](http://www.w3schools.com/sql/sql_primarykey.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T23:47:07.690

正如所提到的，您最好的选择是可能创建您需要的所有列，并在可选的情况下使它们为 NULLable。所以：

```
CREATE TABLE #myTempTable (Id INT, DeptId INT, DeptName VARCHAR(100), Salary INT NULL, EmpCode VARCHAR(45) NULL); 
```

和

```
IF (someCondition)
BEGIN
    SET @sqlSelect = @sqlSelect +', EMP.Salary, EMP.Code'            
END
ELSE
BEGIN
    SET @sqlSelect = @sqlSelect +', NULL, NULL'            
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T12:46:14.447

这是另一个具有完全动态列的解决方案：

```
DECLARE @sql NVARCHAR(MAX)
,@sqlTableName NVARCHAR(MAX) = ''
,@sqlColumnsDefinitions NVARCHAR(MAX) =''
,@sqlColumnsList NVARCHAR(MAX) =''
,@sqlFrom NVARCHAR(MAX) =''

SET @sqlTableName = 'myTempTable'
SET @sqlFrom = 'FROM dbo.EMPLOYEE AS EMP'

--conditions to define columns
IF (1=1)
    set @sqlColumnsDefinitions='Col1 int, Col2 int, Col3 int'
else
    set @sqlColumnsDefinitions='Col1 int, Col2 int, Col3 int, Col4 int, Col5 int'

--new table with dynamic fields creation
SET @sql = 'if (object_id('''+@sqlTableName+''') is not null) DROP TABLE '+@sqlTableName+'
CREATE TABLE '+@sqlTableName+' ('+@sqlColumnsDefinitions+')'+char(10)
print (@sql)
exec (@sql)

--get columns list
select @sqlColumnsList=STUFF((SELECT ',' + column_name
from INFORMATION_SCHEMA.COLUMNS where table_name like @sqlTableName+'%' FOR XML PATH('')), 1, 1, '')

--main insert
SET @sql = 'INSERT INTO '+@sqlTableName+char(10)+'SELECT '+@sqlColumnsList+char(10)+@sqlFrom
print (@sql)
exec  (@sql) 
```

如果因为 SQL 引擎而用 #myTempTable 替换 myTempTable，这将不起作用。要修复它并获得正确的列名列表，您可能会使用一些超出范围的技巧。但它仍然适用于非临时表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T22:44:51.500

使用代码并告诉我它是否有效？

```
-----------------------------------------------------

DECLARE @sql NVARCHAR(MAX)
,@sqlSelect NVARCHAR(MAX) = ''

,@sqlFrom NVARCHAR(MAX) =''

IF (someCondition)
BEGIN
    CREATE TABLE #tblInfo (Id INT, DeptId INT, DeptName VARCHAR(100))    
END
ELSE
BEGIN
    CREATE TABLE #tblInfo (Id INT, DeptId INT, DeptName VARCHAR(100),Salary numeric(18,2), Code INT)    
END

SET @sqlSelect ='INSERT INTO #tblInfo 
SELECT EMP.Id, EMP.DeptId, EMP.DeptName'

SET @sqlFrom =' FROM dbo.EMPLOYEE AS EMP'

IF (someCondition)
BEGIN
    SET @sqlSelect = @sqlSelect +', EMP.Salary, EMP.Code'            
END

SET @sql =  @sqlSelect +@sqlFrom 

EXEC sp_executesql @sql

------------------------------------ 
```

我希望它会工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-08T13:34:53.463

我认为你真正想要的对于 SQL 来说是不可能的。我不明白您想为例如满足条件的元组添加列。所以我认为你需要一些其他的数据库引擎，比如 NoSQL（我对 NoSQL 不是很熟悉，但据我所知它可以水平扩展）

如果你不想从 sql 切换，我认为你应该重新考虑你的设计。
如果你坚持你的设计，你可以做一些事情，例如添加一个列，名称“列名”和另一列“列数据”，并在需要时填充它。但是正如你所看到的，它有自己的约束，比如“列数据”的数据应该是相同的类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-19T12:48:54.217

您可以在满足条件时更改临时表（我假设您知道此时所需的列？）

```
IF (someCondition)
BEGIN
    ALTER TABLE #myTempTable ADD Salary VARCHAR(20), Code VARCHAR(20)
    SET @sqlSelect = @sqlSelect +', EMP.Salary, EMP.Code'            
END 
```

您可能需要先测试该列是否存在，如果您有多个可以激活的条件 - 您可以这样做：

```
IF COL_LENGTH('#myTemptable','Salary') IS NULL
BEGIN
     -- do something if salary doesn't exist
     ALTER TABLE #myTempTable ADD Salary NUMERIC(6,2)
END 
```

正如其他人所指出的，您可以预先将列创建为可为空的 - 或在满足条件后创建表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-27T11:57:16.490

下面的代码可能对你有用。

```
DECLARE @sql NVARCHAR(MAX)
,@sqlSelect NVARCHAR(MAX) = ''

,@sqlFrom NVARCHAR(MAX) =''

IF (someCondition)
BEGIN
    CREATE TABLE #myTempTable (Id INT, DeptId INT, DeptName VARCHAR(100))    
END
ELSE
BEGIN
    CREATE TABLE #myTempTable (Id INT, DeptId INT, DeptName VARCHAR(100),Salary numeric(18,2), Code INT)    
END

SET @sqlSelect ='INSERT INTO #myTempTable
SELECT EMP.Id, EMP.DeptId, EMP.DeptName'

SET @sqlFrom =' FROM dbo.EMPLOYEE AS EMP'

IF (someCondition)
BEGIN
    SET @sqlSelect = @sqlSelect +', EMP.Salary, EMP.Code'            
END

SET @sql =  @sqlSelect +@sqlFrom 

EXEC sp_executesql @sql 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-10T14:49:34.590

If this table is BIG I think your and in your logic you make JOINS with this table you need to create indexes in TARGET TABLE

You can go around with Physical table not TEMP

```
DECLARE @guid NVARCHAR(64), @sql NVARCHAR(MAX)
,@sqlSelect NVARCHAR(MAX) = ''
,@sqlFrom NVARCHAR(MAX) ='', @sqlSchema NVARCHAR(MAX) =''

SET @guid = NEWID()  

declare @tableName NVARCHAR(64)= 'myTempTable'+ @guid

select @tableName

--use some transaction

set @sql = 'CREATE TABLE ' + @tableName  
set @sqlSchema = '(Id INT, DeptId INT, DeptName VARCHAR(100)'  -- DO INDEXES IF YOU ARE JOIN 

SET @sqlSelect ='INSERT INTO ' + @tableName +
'SELECT EMP.Id, EMP.DeptId, EMP.DeptName'

IF (1=1) -- your condition
BEGIN
  SET @sqlSchema = @sqlSchema +', EMP.Salary, EMP.Code'            
END

SET @sqlSchema =   @sqlSchema + ')' -- close last )

set @sql =  @sql +@sqlSchema --create the TargetTable

--DO YOUR logic

EXEC sp_executesql @sql

set @sql = N'DROP TABLE ' + @tableName

EXEC sp_executesql @sql 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-30T12:34:42.613

你能用

```
sp_RENAME 'TableName.[OldColumnName]' , '[NewColumnName]', 'COLUMN' 
```

命令更改先前定义的占位符列的名称。
例如，使用额外的字段创建, `#tempTable`,等。如果您需要使用该字段，请将其重命名为所需的名称，以便您的代码稍后可以通过非隐蔽名称引用该列。`"VCHAR100_1"``"BOOL_1"``"Int_1"`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-20T13:27:49.243

请参见下面的示例：

```
declare @sql nvarchar(400)
declare @ColFlag int
set @ColFlag = 1
if(@ColFlag = 0)

set  @sql= 'CREATE TABLE #myTempTable (Id INT, DeptId INT, DeptName VARCHAR(100)); 
    INSERT INTO #myTempTable SELECT 1,2,''DeptName1''; 
    SELECT * FROM #myTempTable'
else
set  @sql= 'CREATE TABLE #myTempTable (Id INT, DeptId INT, DeptName VARCHAR(100), MyNewColHere VARCHAR(25)); 
    INSERT INTO #myTempTable SELECT 1,2,''DeptName1'', ''MyNewColHereValue''; 
    SELECT * FROM #myTempTable'

 exec (@sql) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-08T19:58:33.577

尝试这个。

```
开始转

IF（某些条件）

    开始
      CREATE TABLE #myTempTable (Id INT, DeptId INT, DeptName VARCHAR(100), Salary money , Code Int)

        插入#myTempTable（Id，DeptId，DeptName，Salary，代码）
        选择 Emp.Id、Emp.DeptID、Emp.DeptName、EMP.Salary、EMP.Code
        来自 dbo.Employee 作为 Emp

        从 dbo.Employee 中选择 Id、DeptID、DeptName、Salary、Code
              删除表 #myTempTable     
    结尾

    别的

    开始

      CREATE TABLE #myTempTable2（Id INT、DeptId INT、DeptName VARCHAR(100)）

        插入#myTempTable（Id，DeptId，DeptName）
        选择 Emp.Id、Emp.DeptID、Emp.DeptName
        来自 dbo.Employee 作为 Emp

        从 dbo.Employee 中选择 Id、DeptID、DeptName

                    删除表 #myTempTable2
    结尾

提交事务

```

# augmented-reality - 从增强现实标记生成 Flash 游戏

> ID：15401269
> 
> 赞同：0
> 
> 时间：2013-03-14T04:33:26.647
> 
> 标签：augmented-reality, flash-cs4

我想问一下，是否可以从 AR 标记生成 Flash 游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:44:49.000

是的你可以。看看这两个：

[http://www.metaio.com/products/web-sdk/](http://www.metaio.com/products/web-sdk/)

和

[http://www.adobe.com/devnet/flash/articles/augmented_reality.html](http://www.adobe.com/devnet/flash/articles/augmented_reality.html)

# asp.net-mvc - 将选中的复选框值从视图传递到控制器

> ID：15401270
> 
> 赞同：0
> 
> 时间：2013-03-14T04:33:27.520
> 
> 标签：asp.net-mvc

我有这样的看法：

```
@model SCWW.Areas.OnlineBookings.Models.Updates.UpdateDetailsModel

@using (Html.BeginForm("Apply", "Updates", new { area = "OnlineBookings", consignmentKey = Model.ConsignmentKey }, FormMethod.Post, new { id = "updateableForm" }))
{
<fieldset>
    <legend>Updateable - @Html.DisplayFor(model => model.ConsignmentKey)</legend>
    <div class="well well-small ">
        @Html.HiddenFor(m => m.ConsignmentKey)

        <table id="updateDetails" class="table table-bordered table-striped table-hover dataTable">
            <tbody>
                <tr>
                    <td>Completed Date</td>
                    <td>@Html.CheckBoxFor(m => m.Apply)</td>
                    <td class="table-input">@Html.TextBoxFor(m => m.CompletedDate, new { Disabled = "Disabled" })</td>
                </tr>
                <tr>
                    <td>Cancelled Date</td>
                    <td>@Html.CheckBoxFor(m => m.Apply)</td>
                    <td class="table-input">@Html.TextBoxFor(m => m.CancelDate, new { Disabled = "Disabled" })</td>
                </tr>
                <tr>
                    <td>Booking Number</td>
                    <td>@Html.CheckBoxFor(m => m.Apply)</td>
                    <td class="table-input">@Html.TextBoxFor(m => m.BookingNumber, new { Disabled = "Disabled" })</td>
                </tr>

            </tbody>
        </table>
        <button type="submit" id="applyProxy" name="action" value="@FormAction.Apply" class="btn btn-success">Update</button>
    </div>

</fieldset> 
```

}

控制器：

```
 [HttpPost]
    public ActionResult Apply(UpdateDetailsModel model, FormAction action)
    {
        if (!ModelState.IsValid)
        {
            return View("Submit",     GenerateViewModel(model.ConsignmentKey));
        }

        updateableService.Update(model.ConsignmentKey,"CompletedDate", model.ToDto());

        return RedirectToActionWithHash("Details", "otherActionsTab", "Bookings",
                                       new { consignmentKey = model.ConsignmentKey });
    } 
```

在我看来，有 3 行，每行有一个复选框。当我单击视图上的“更新”按钮时，只选择了一个复选框。我如何知道选择了哪个复选框？如何将选定的复选框值从视图传递到控制器 - 控制器中的 Apply(UpdateDetailsModel model, FormAction action)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:38:31.640

您使用相同的模型属性 3 次。您需要为每个条件创建单独的属性。

# php - 当其键是字符串时如何打印多维数组？

> ID：15401275
> 
> 赞同：0
> 
> 时间：2013-03-14T04:33:54.093
> 
> 标签：php, arrays, multidimensional-array

```
Array ( 
    [Team1] => Array ( 
        [win] => 1 
        [draw] => 0 
        [lost] => 0 
    ) 
    [Team2] => Array ( 
        [win] => 1 
        [draw] => 1 
        [lost] => 1 
    ) 
    [Team3] => Array ( 
        [win] => 1 
        [draw] => 0 
        [lost] => 1 
    ) 
    [AnotherTeam] => Array ( 
        [win] => 0 
        [draw] => 0 
        [lost] => 1 
    ) 
    [LastTeam] => Array ( 
        [win] => 0 
        [draw] => 1 
        [lost] => 0 
    ) 
) 
```

以上是生成数组的示例。想象一下，有一些足球俱乐部的胜场数和输球数。

我想将此数组打印为表格的行和列，如下所示；

```
Team   |  Win |  Draw  |  Lost
Team 1    1      0        0
Team 2    1      1        1 
```

我有一个使用提取方法的建议。但是没有好好想清楚。希望任何人都可以给我一个线索。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:03:12.240

```
$teamArr=Array ('Team1' => Array ('win' => 1 ,'draw' => 0,'lost' => 0),
'Team2' => Array ('win' => 1 ,'draw' => 0,'lost' => 0) ,
'Team3' => Array ('win' => 1 ,'draw' => 0,'lost' => 0),
'Another team' => Array ('win' => 1 ,'draw' => 0,'lost' => 0),
'Last Team' => Array ('win' => 1 ,'draw' => 0,'lost' => 0));

echo '<table width=100%><tr><th>Teams</th><th>Win</th><th>Draw</th><th>Lost</th> </tr>';
foreach($teamArr as $key => $value) {

 echo "<tr> <th>$key</th>";
        foreach($value as $status) {
          echo "<th>$status</th>";
        }
 echo "</tr>";

}

echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:47:40.087

试试这个：

```
echo '<table><tr><th>Teams</th><th>Win</th><th>Draw</th><th>Lost</th></tr>';
foreach($teamsArray as $key => $value) {

 echo "<tr> <td>$key</td>";
            foreach($value as $status) {
              echo "<td>$status</td>";
            }
 echo "</tr>";

}

echo '</table>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:49:03.990

试试这个 ：

```
<table>
<tr><td>Team</td><td>Win</td><td>Draw</td><td>Lost</td></tr>
<?php foreach($your_array as $key=>$val){ ?>
<tr><td><?php echo $key;?></td><td><?php echo $val['win'];?></td><td><?php echo $val['draw'];?></td><td><?php echo $val['lost'];?></td></tr>
<?php } ?>
</table> 
```

# xna-4.0 - Xna 游戏参考更新中的游戏

> ID：15401277
> 
> 赞同：0
> 
> 时间：2013-03-14T04:34:00.407
> 
> 标签：xna-4.0

嗨，我的 XNA 游戏有问题，我试图在另一个类中引用 Game，但是每次我尝试某些东西时，它都会说没有合适的方法来覆盖它，所以我可以使用 Mouse.SetPosition(window.ClientBounds.Width / 2, window.ClientBounds .高度/2); 在 game1.cs 以外的另一个类中，我的 game1 代码是

```
namespace _3d
{
/// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    MouseState mState;

    List<gameObject> gameobjectlist = new List<gameObject>();

    terrain Terrain;
    Camera mycam;

    Turret_Base turretBase;
    Turret_Barrel turretBarrel;
    //physicsObject Missile;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    /// <summary>

    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize()
    {
        // TODO: Add your initialization logic here

        mycam = new Camera(MathHelper.ToRadians(45.0f),
            (float)graphics.GraphicsDevice.Viewport.Width / 
        (float)graphics.GraphicsDevice.Viewport.Height,
        1.0f, 10000.0f, Vector3.Zero, Vector3.Up);
        mycam.Position = new Vector3(0.0f, 53.0f, 155.0f);

        //MouseState mouseState = Mouse.GetState();
        //Vector3 mousePosition = new Vector3(mouseState.Y, mouseState.X, 0.0f);

        base.Initialize();
    }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);
        Terrain = new terrain("models/terrain/desert", Content);
        turretBase = new Turret_Base("models/turret/Turret_Base", Content);
        turretBarrel = new Turret_Barrel("models/turret/Turret_Barrel", Content);
        //Missile = new physicsObject("models/turret/ammo", Content);

        gameobjectlist.Add(Terrain);
        gameobjectlist.Add(turretBase);
        gameobjectlist.Add(turretBarrel);
        gameobjectlist.Add(mycam);

        // TODO: use this.Content to load your game content here
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void update(GameTime gameTime)
    {

        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        foreach (gameObject go in gameobjectlist)
        {
        }

        mycam.update(gameTime);

        Terrain.update(gameTime);
        turretBase.update(gameTime);
        turretBarrel.update(gameTime);

        if (exitGame() == false)
        {
            base.Update(gameTime);
        }

        // TODO: Add your update logic here

    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        foreach (gameObject go in gameobjectlist)
        {
        }

        // TODO: Add your drawing code here

        Terrain.draw(mycam);
        turretBase.draw(mycam);
        turretBarrel.draw(mycam);

        base.Draw(gameTime);
    }

    bool exitGame()
    {
        if (Keyboard.GetState().IsKeyDown(Keys.Escape))
        {
            Exit();
            return true;
        }
        return false;
    }
    } 
   } 
```

我要上的课是>>

```
{
class Turret_Base : gameObject 

 {
    Turret_Barrel Parent;

    public Turret_Base(string fileName, ContentManager content, Turret_Barrel parent =      
    null)
        : base(fileName, content)
    {

        GameWindow window;
        Parent = parent;
        Pitch = 25;
        Yaw = 0;
        Roll = 0;
        Position = new Vector3(0, 50, 120);
        Scale = 0.1f; //Base Transform

    }

    public override void update(GameTime gametime)
    {
        float dt = (float)gametime.ElapsedGameTime.TotalSeconds;

        // mouse movement
        //MouseState mState = Mouse.GetState();

        //Vector3 newPos = new Vector3(mState.X, Position.Y, mState.Y);

        //Position = newPos;

        KeyboardState keyboardstate = Keyboard.GetState();
        if (keyboardstate.IsKeyDown(Keys.W))
            Position -= Vector3.UnitZ * 25.0f * dt;
        if (keyboardstate.IsKeyDown(Keys.A))
            Position -= Vector3.UnitX * 25.0f *dt;
        if (keyboardstate.IsKeyDown(Keys.S))
            Position += Vector3.UnitZ * 25.0f * dt;
        if (keyboardstate.IsKeyDown(Keys.D))
            Position += Vector3.UnitX * 25.0f * dt;

        base.update(gametime);

    }
} 
```

}

抱歉，如果这是一个明显的错误

谢谢

# macos - 我如何知道我的 Mac (Snow leopard) 上是否安装了 ifort？

> ID：15401278
> 
> 赞同：0
> 
> 时间：2013-03-14T04:34:13.887
> 
> 标签：macos, gfortran, intel-fortran

我有一个需要与“gfortran/ifort”编译器一起安装的程序。我有一个 Mac OSX 10.6.8（雪豹）。我知道我已经安装了 gcc，因为我安装了我自己（从 Xcode 安装程序中的 gcc 包，所以我不必安装整个 xcode），在终端输入“which gcc”后我也得到了目录。

我还从 gnu 安装了 gfortran，在终端输入“which gfortran”后，我得到了目录。

但是，由于我在这个过程中学习，我不确定当我安装 gfortran 时是否也安装了“ifort”，或者我也必须自己安装它。如何检查 ifort 是否安装？如果没有安装，我可以从哪里获得 Snow Leopard？如果我安装了整个xcode然后“命令行工具”可以安装吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:43:02.483

`ifort`是英特尔 Fortran 编译器的常用简称。如果以下任何一项为真，您就知道您已经安装了它：

1.  当您`ifort`在终端命令行键入时，您会得到响应，例如`ifort: command line error: no files specified ...`
2.  Fortran 项目的 XCode 构建设置包括项目列表，例如`Intel Fortran Compiler ... Code Generation`.
3.  `ifort`您可以在磁盘上的某处找到一个名为的可执行文件；它通常位于其中，`/usr/bin`但您可能已将其安装在其他地方。

请注意，您可能已安装但无法使用它，因为您没有许可证。英特尔 Fortran 需要花钱，获得副本的方法是直接从英特尔或当地经销商处购买。

# css - 元素前后的 CSS 类

> ID：15401280
> 
> 赞同：0
> 
> 时间：2013-03-14T04:34:17.953
> 
> 标签：css

我有一个简单的问题

这两种说法有什么区别？

前任：

```
.job-des li{
//you styles here
} 
```

和

```
li.job-des{
//you styles here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:37:23.057

**解释**

**首先** `.job-des li{`，这将适用于`LI`which is child of `.job-des`class。

**例子**

```
<div class="job-des"><li></li></div> 
```

**其次** `li.job-des {`，这将适用于`LI`拥有工作类。

**例子**

```
<li class="job-des"></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:35:46.883

第一个是`<li>`包含在任何具有 class的元素中的元素`.job-des`，而第二个是任何`<li>`本身具有 class .job-des 的元素

例如，第一个会打这个：

```
<div class='job-des'>
    <ul>
        <li>It hits me</li>
    </ul>
</div> 
```

而第二个会击中这个：

```
<ul>
    <li class='job-des'>It hits me</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:42:52.223

```
 .job-des li{
 //This style will apply in li of the element have class .jobs-des
 } 
```

和

```
 li.job-des{
 //This style will apply on li which have class .job-des
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:49:29.327

```
.job-des li{
//you styles here
} 
```

在这段代码中

`li`can 位于类的元素中的任何`job-des` 位置

```
<div class="job-des">
    <ul>
        <li>This is selected as per the conditions  </li>
        <li>This is selected as per the conditions  </li>
        <li>and this one too   </li>
    </ul>
</div> 
```

在此代码中，它将选择`li's`特定类中的所有内容

并且在这个

```
li.job-des{
//you styles here
} 
```

只有那些`li's`给定类的才会被风格化`.job-des`

```
<div class="any class">
        <ul>
            <li>  i am not selected</li>
            <li class="job-des">i am selected as per the conditions  </li>
            <li> and this one too is not selected  </li>
        </ul>
    </div> 
```

# backbone.js - 如何从主干中的另一个视图绑定元素上的事件

> ID：15401288
> 
> 赞同：2
> 
> 时间：2013-03-14T04:34:56.183
> 
> 标签：backbone.js, binding, views, underscore.js, models

我正在尝试附加事件来自另一个视图

我有两种看法

*   标题视图
*   内容视图

我的 headerView 使用 Header 模型，每次模型更改时，我都会渲染（）我的 headerView。

像大多数 iPhone 的应用程序一样，我在标题中使用两个按钮进行导航，根据您所在的位置，图像可以更改。

这就是为什么当我初始化一个随机的 contentView 时，我可以访问 headerView 中的模型并更改一个属性。

我需要做的最后一件事是为这个按钮创建一个点击事件。

我正在尝试在我的内容视图中绑定（这更有意义）

```
events: {
   "click .h_left": "newLocation",
} 
```

事件没有触发，只有当我将此事件放在 headerView 中时才会出现这种情况，是否有推荐的干净解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T10:21:48.093

整个要点`Backbone.View`是将 DOM 子树的修改和事件处理封装到 View 类中。因此，Backbone 不支持您的方案。

您有几种选择可以实现相同的最终结果。

**简单（但错误）的方法**：使用 jQuery 监听标头的事件：

```
var ContentView = Backbone.View.extend({
   initialize: function() {
     $(".h_left").on('click', this.newLocation);
   },

   remove: function() {
     $(".h_left").off('click', this.newLocation);
     Backbone.View.prototype.remove.call(this);
   }
}); 
```

这打破了标题元素的封装，并将内容视图与标题元素的实现紧密耦合。换句话说：意大利面。

**正确方法**：使用调解器将消息从标头传递到其他视图：

```
var HeaderView = Backbone.View.extend({
  events: {
    "click .h_left": "onLeftButtonClick"
  },

  onLeftButtonClick: function() {
    //You can use the root Backbone object as a global event bus
    //Publish a message
    Backbone.trigger('header:leftbutton');
  }
});

var ContentView = Backbone.View.extend({
   initialize: function() {
     //Subscribe to a message. If you use listenTo, the subscription is 
     //automatically cleared when your content view is destroyed.
     this.listenTo(Backbone, 'header:leftbutton', this.newLocation);
   },

   newLocation: function() {
     //..
   }
}); 
```

# jstree - 请帮助我从 JSTREE 获取 ID

> ID：15401298
> 
> 赞同：3
> 
> 时间：2013-03-14T04:35:41.730
> 
> 标签：jstree

这是我处理这个问题的最后手段。

问题是我无法从下面的示例数据中获取具体值。

我很着急，所以如果你能给我这个问题的任何答案，我将不胜感激。

这是我的代码。

```
 $("#organize").jstree(
  {
      "core": {'animation': 100},
      "json_data": {
          "data": [
          {
              "data": "J",
              "id": "10600_10600",
              "metadata": {
                  "id": "10600_10600",
                  "name": "10600_10600"
              }
          }]
      },
      "themes": {
          "theme": "classic",
          "url": "<%=request.getContextPath()%>/approval/css/jstree.css"
      },
      "plugins": ["themes", "json_data", "ui"]

  }).bind("dblclick.jstree", function (e)
  {
      alert($('#organize').jstree('get_selected').attr('id'));
      ////////////TODO: Can not get ID here/////////////////
  });

  $('#add').click(function ()
  {

      //HERE I can get 'name' of the selected node but 'id' is undefined.
      var name = $("#organize").jstree('get_selected').text();
      var id = $("#organize").jstree('get_selected').attr('data');

  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:03:55.020

JS 树使用“attr”JSON 属性将属性和值附加到节点。所以将您的数据部分更改为如下所示：

```
$("#organize").jstree(
  {
      "core": {'animation': 100},
      "json_data": {
          "data": [
          {
              "data": "J",
              "attr": {
                  "id": "10600_10600",
                  "name": "10600_10600"
              }
          }]
      },
      ..... 
```

# javascript - jquery点击事件处理

> ID：15401301
> 
> 赞同：2
> 
> 时间：2013-03-14T04:35:47.837
> 
> 标签：javascript, jquery

当我单击 TD 时，应选择内部的输入元素，反之亦然，

我使用 jquery 编写了下面的代码，它工作正常，但是当我点击复选框时，它不像复选框的工作方式那样工作，任何想法如何处理这个

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function (){
    $(".mainTable td").click(function (){
        var obj = $(this).children('input[type=checkbox]');
        var bool = obj.prop("checked");
        if(obj.length > 0){
           obj.attr("checked",!bool); 
        }
    });
});
</script>

<table cellpadding=10 border=1 class='mainTable'>
<tr>
<td><input type="checkbox" /></td>
<td><input type="checkbox" /></td>
</tr>
<table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:40:18.923

那是因为事件冒泡了，你可以使用`stopPropagation`方法。

```
$(document).ready(function (){
    $(".mainTable td").click(function (){
        $('input[type=checkbox]', this).prop('checked', function(i, checked){
           return !checked; 
        })
    }).find('input[type=checkbox]').click(function(e){
        e.stopPropagation();
    })
}); 
```

[http://jsfiddle.net/vs4ma/](http://jsfiddle.net/vs4ma/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:40:36.790

```
$(".mainTable td").click(function (event){
    if (event.target.nodeName === 'INPUT') {
        return;
    } else {
        var obj = $(this).children('input[type=checkbox]');
        var bool = obj.prop("checked");
        if(obj.length > 0){
           obj.attr("checked",!bool); 
        }
    }
}); 
```

# objective-c - 如何在 xcode 4.6 中使用 Xml 文件作为数据源

> ID：15401303
> 
> 赞同：0
> 
> 时间：2013-03-14T04:35:52.967
> 
> 标签：objective-c, ios6, xcode4.6

我是 xcode 的新手。我需要知道我们如何**在 xcode 4.6**中使用 xml 文件作为数据源，例如我有一个这样的 xml 文件

```
<Catalog>
    <Title>title1</Title>
    <Description>desc2</Description>
</Catalog> 
```

**我有 2 个标签**，我需要使用 xml 文件将**它们的文本设置为 title1 和 desc2**如何在 xcode 4.6 中实现这一点。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:47:14.947

You can use `NSXMLParser` to convert the xml data into `NSDictionary` and use that dictionary data for showing in required labels.

# c - 带指针的二维数组

> ID：15401306
> 
> 赞同：5
> 
> 时间：2013-03-14T04:36:24.877
> 
> 标签：c

在下面有人可以解释执行时获得的输出：

```
#include<stdio.h>
void main()
{
char a[5][10]={"one","two","three","four","five"};
char **str=a;
printf("%p ", &a[0]);
printf("\n%p ", &str[0]);
printf("\n%p ", &str[3]);
printf("\n%p ", &str[1][56]);
printf("\n%p ", &(*(*(str+4)+1)));
} 
```

下面是观察到的输出：

```
0xbf7f6286 
0xbf7f6286 
0xbf7f6292 
0x38 
0x1 
```

*   &a[0] 是数组的起始地址的地址
*   &str[0] 相同

    有人能解释一下 str[3] 的地址是 0xbf7f6292 吗？根据我的理解， &str[0] 和 &str[3] 应该相差 30 个字节。

    还请有人解释其他两种情况的输出。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T05:29:45.697

**非常简短的答案**：

改变这个：

```
char **str; 
```

要这样：

```
char (*str)[10]; 
```

并在之后修复代码中的任何错误。的类型`str`与您的二维数组的类型不兼容。我冒昧地将返回类型固定为`int`for `main()`（根据 C 标准，不允许使用 void）。我还标记了您在技术上具有未定义行为的来源：

```
#include <stdio.h>
int main()
{
    char a[5][10]={"one","two","three","four","five"};
    char (*str)[10] = a;
    printf("%p ", &a[0]);
    printf("\n%p ", &str[0]);
    printf("\n%p ", &str[3]);
    printf("\n%p ", &str[1][56]);       // this is undefined behaviour
    printf("\n%p ", &(*(*(str+4)+1)));
    return 0;
} 
```

您还应该注意最后一个`printf()`语句有一个多余`&(*(...))`的不需要。它可以被剥离成这样，它是等价的：

```
 printf("\n%p ", *(str+4)+1); 
```

**输出（取决于系统）**

```
0x7fff5fbff900 
0x7fff5fbff900 
0x7fff5fbff91e 
0x7fff5fbff942 
0x7fff5fbff929 
```

* * *

**非常（非常，*非常*）长答案**

您认为二维数组与指针等价的假设是不正确的。它们仅在使用语法上相似。以下是数组`a`在内存中如何描绘的粗略布局

```
char a[5][10]

    0   1   2   3   4   5   6   7   8   9 
  -----------------------------------------
0 | o | n | e | 0 |   |   |   |   |   |   |
  -----------------------------------------
1 | t | w | o | 0 |   |   |   |   |   |   |
  -----------------------------------------
2 | t | h | r | e | e | 0 |   |   |   |   |
  -----------------------------------------
3 | f | o | u | r | 0 |   |   |   |   |   |
  -----------------------------------------
4 | f | i | v | e | 0 |   |   |   |   |   |
  ----------------------------------------- 
```

请注意，第二行的起始地址，即 ，比第一行的起始地址`&a[1]`晚十个字节， （*这*`&a[0]`不是巧合的是整个数组的起始地址）。下面演示了这一点：

```
int main()
{
    char a[5][10] = { "one", "two", "three", "four", "five" };

    printf("&a    = %p\n", &a);
    printf("&a[0] = %p\n", &a[0]);
    printf("a[0]  = %p\n", a[0]);
    printf("&a[1] = %p\n", &a[1]);
    printf("a[1]  = %p\n", a[1]);
    return 0;
} 
```

**输出**

```
&a    = 0x7fff5fbff8e0
&a[0] = 0x7fff5fbff8e0
a[0]  = 0x7fff5fbff8e0
&a[1] = 0x7fff5fbff8ea
a[1]  = 0x7fff5fbff8ea 
```

请注意，地址位于数组开头之后的`a[1]`10 个字节（十六进制）处。`0x0a`但为什么？要回答这个问题，必须了解类型指针算术的基础知识。

* * *

**类型指针算术如何工作？**

`void`在 C 和 C++ 中，除了类型之外的所有指针。具有与指针关联的基本数据类型。例如。

```
int *iptr = malloc(5*sizeof(int)); 
```

`iptr`以上指向分配为五个整数大小的内存区域。像我们通常寻址数组一样寻址它看起来像这样：

```
iptr[1] = 1; 
```

但我们可以像这样轻松地解决它：

```
*(iptr+1) = 1; 
```

结果是一样的；将值 1 存储在第二个数组槽中（0 槽是第一个）。我们知道解引用运算符`*`允许通过地址（存储在指针中的地址）进行访问。但是如何`(iptr+1)`知道跳过四个字节（如果您的`int`类型是 32 位，如果它们是 64 位，则跳过八个字节）来访问下一个整数槽？

答：因为*类型指针算法*。编译器知道指针的基础*类型*有多宽（以字节为单位）（在这种情况下，是类型的宽度`int`）。当您向/从指针中添加或减去缩放器值时，编译器会生成适当的代码来解释这种“类型宽度”。它也适用于用户类型。如下所示：

```
#include <stdio.h>

typedef struct Data
{
    int ival;
    float fval;
    char buffer[100];
} Data;

int main()
{
    int ivals[10];
    int *iptr = ivals;
    char str[] = "Message";
    char *pchr = str;
    Data data[2];
    Data *dptr = data;

    printf("iptr    = %p\n", iptr);
    printf("iptr+1  = %p\n", iptr+1);

    printf("pchr    = %p\n", pchr);
    printf("pchr+1  = %p\n", pchr+1);

    printf("dptr    = %p\n", dptr);
    printf("dptr+1  = %p\n", dptr+1);

    return 0;
} 
```

**输出**

```
iptr    = 0x7fff5fbff900
iptr+1  = 0x7fff5fbff904
pchr    = 0x7fff5fbff8f0
pchr+1  = 0x7fff5fbff8f1
dptr    = 0x7fff5fbff810
dptr+1  = 0x7fff5fbff87c 
```

`iptr`注意和之间*的*地址差异`iptr+1`不是一个字节；它是*四个*字节（我系统上的宽度）。接下来，用和作为一个字节来演示单个的宽度。最后，我们自定义的数据类型带有它的两个指针值，并显示它是 0x6C，即 108 字节宽。（由于结构填充和字段对齐，它可能会更大，但我们很幸运地看到了这个例子，事实并非如此）。这是有道理的，因为该结构包含两个 4 字节的数据字段（an和 a ）和一个 100 个元素宽的 char 缓冲区。**`int``char``pchr``pchr+1``Data``dptr``dptr+1``int``float`**

 **顺便说一句，反过来也是正确的，即使是有经验的 C/C++ 程序员也常常*不会*考虑。它是类型化的指针*差分*。如果在有效内存的连续区域中有两个指定类型的有效指针：

```
int ar[10];
int *iptr1 = ar+1;
int *iptr5 = ar+5; 
```

你认为你会得到什么结果：

```
printf("%lu", iptr5 - iptr1); 
```

答案是`4`…… 哎呀，你说。没有大碍？*你不相信吗*。这在使用指针算法来确定特定元素的缓冲区中的偏移量时*非常方便。*

总之，当您有这样的表达式时：

```
int ar[5];
int *iptr = ar;

iptr[1] = 1; 
```

你可以知道它相当于：

```
*(iptr+1) = 1; 
```

用外行的话来说，这意味着“获取`iptr`变量中保存的地址，向其添加 1*（以字节为单位的宽度`int`）字节，然后将值存储`1`在通过返回的地址取消引用的内存中。”

站点栏：这也可以。看看你能不能想到*为什么*

```
1[iptr] = 1; 
```

* * *

回到您的（我们的）示例数组，现在看看当我们`a`通过双指针引用 的相同地址时会发生什么（这是完全不正确的，您的编译器至少应该警告您有关分配的情况）：

```
char **str = a; // Error: Incompatible pointer types: char ** and char[5][10] 
```

好吧，那是行不通的。但是让我们暂时假设它确实如此。`char **`是指向字符指针的指针。这意味着变量本身只包含一个指针。它没有基本行宽等概念。因此假设您将地址`a`放在 double-pointer`str`中。

```
char **str = (char **)(a); // Should NEVER do this, here for demonstration only.
char *s0 = str[0];  // what do you suppose this is? 
```

我们的测试程序略有更新：

```
int main()
{
    char a[5][10] = { "one", "two", "three", "four", "five" };
    char **str = (char **)a;
    char *s0 = str[0];
    char *s1 = str[1];

    printf("&a    = %p\n", &a);
    printf("&a[0] = %p\n", &a[0]);
    printf("a[0]  = %p\n", a[0]);
    printf("&a[1] = %p\n", &a[1]);
    printf("a[1]  = %p\n", a[1]);

    printf("str   = %p\n", str);
    printf("s0    = %p\n", s0);
    printf("s1    = %p\n", s1);

    return 0;
} 
```

给我们以下结果：

```
&a    = 0x7fff5fbff900
&a[0] = 0x7fff5fbff900
a[0]  = 0x7fff5fbff900
&a[1] = 0x7fff5fbff90a
a[1]  = 0x7fff5fbff90a
str   = 0x7fff5fbff900
s0    = 0x656e6f
s1    = 0x6f77740000 
```

好吧，`str`看起来这是我们想要的，但那是什么`s0`？为什么，这就是字母的 ASCII 字符值。哪个？快速检查一个像样的[ASCII 表](http://en.cppreference.com/w/cpp/language/ascii)显示：

```
0x65 : e
0x6e : n
0x6f : o 
```

那是反向的“一”一词（反向是由我的系统上的多字节值的字节序处理引起的，但我希望问题很明显。那第二个值呢：

```
0x6f : o
0x77 : w
0x74 : t 
```

对，就是“二”。那么为什么我们将数组中的*字节作为指针呢？*

嗯.. 是的，正如我在评论中所说。无论谁告诉您或向您暗示双指针和二维数组是同义词，都是不正确的。回想一下我们对类型指针算术的中断。记住这一点：

```
str[1] 
```

和这个：

```
*(str+1) 
```

是同义词。出色地。指针的*类型*是什么？`str`它指向的类型是一个`char`指针。因此，这之间的字节数差异：

```
str + 0 
```

和这个

```
str + 1 
```

将是 a 的大小`char*`。在我的系统上是 4 个字节（我有 32 位指针）。这就解释了为什么表观*地址*是我们原始数组基数的四个字节`str[1]`的*数据。*

因此，回答您的第一个基本问题（是的，我们*终于*明白了）。

为什么`str[3]`是`0xbf7f6292`

答：这个：

```
&str[3] 
```

相当于：

```
(str + 3) 
```

但是我们从上面知道这`(str + 3)`只是存储在 中的地址`str`，然后将类型`str`指向的宽度的 3 倍，即 a `char *`，以字节为单位添加到该地址。出色地。我们从你的第二个`printf`知道那个地址是什么：

```
0xbf7f6286 
```

我们知道您系统上的指针宽度是 4 个字节（32 位指针）。所以...

```
0xbf7f6286 + (3 * 4) 
```

或者....

```
0xbf7f6286 + 0x0C = 0xbf7f6292 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T04:56:36.797

前两个 printf 显然是打印相同的地址，即二维数组的第一个元素，它是一个一维数组。所以毫无疑问，它们都指向数组的开头，即a[0][0]。

char **str 是一个指针，因此当您执行 str[3] 时，它的内部意思是 (str+3) 并且很可能您的代码在 32 位机器上运行，因此它会根据指针 airthematic 提前跳到 12 个字节。不要与数组混淆，str 是二维指针而不是数组。

0xbf7f6286 str[0] 0xbf7f6292 str[3] diff 是 0xc，如预期的那样是正确的。

printf("\n%p", &str[1][56]); printf("\n%p", &( *(* (str+4)+1)));

由于您对指针 airthematic 的错误理解，您试图打印最后两个声明。

我希望它有助于解决您的疑问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:22:03.903

```
char a[5][10]={"one","two","three","four","five"};
char **str=a; 
```

让我解释一下两个起始指针的工作原理，以及它与数组的关系，以便您有更好的机会尝试自己解决问题。

传统上，双星指针分配有另一个指针的“地址”。

例子

```
char   a =  5;
char  *b = &a;
char **c = &b; 
```

所以当你取消引用 c 一次

```
printf("\n%d",*c) 
```

，你会得到 'b' 所包含的值，也就是 'a' 的地址。

当您取消引用 c 两次时

```
printf("\n%d",**c) 
```

，你会直接得到'a'的值。

现在来谈谈数组和指针之间的关系。

数组的名称是其地址的同义词，这意味着数组的名称是其自身的位置。

例子：

```
int array [5] = {1,2,3,4,5};
printf("\n%p",array);
printf("\n%p",&array);
printf("\n%p",&array[0]); 
```

他们都将打印相同的地址。

因此这是一个无效的指针分配

```
char **str=a; 
```

因为 **str 需要一个持有地址的指针的地址，但您只是传递了一个地址[数组名称 = a]。

**所以简而言之，一个两星指针，不应该用来处理一个二维数组。**

**这个[问题](https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array?rq=1)涉及处理带有指针的二维数组。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:07:01.877

当你说 str+3 时，它的意思是 str+(3*sizeof(char **))。因此，如果“char **”的大小为 4 字节，则 str 增加 12 字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T05:07:35.150

如果你想打印一个二维数组，你应该使用两个循环（我建议两个'for'循环），并且一个嵌套在另一个里面。

至于输出，它们是（我不是说显而易见的）所有地址，因为当您在访问数组元素之前键入“&”时，您是在询问它的地址。

由于您将数组 a 设置为等于 str，因此实际上将指针 str 设置为数组“a”指向的地址。

当您使用访问运算符 [int n] 时，您实际上是在告诉您的计算机查看数组（或指针）实际指向的位置之外的“n”个地址槽。因此，为什么它比前两名多 16 个。

最后两个看起来像十六进制，我不完全确定最后两个输出行。**

# asp.net - 异常处理程序代码中发生异常：在 net.pipe://localhost/... 处没有侦听可以接受消息的端点

> ID：15401313
> 
> 赞同：0
> 
> 时间：2013-03-14T04:37:08.107
> 
> 标签：asp.net, wcf

我无法弄清楚为什么它找不到这个服务端点。该服务位于与我的 Web 项目相同的解决方案中的另一个项目中。显然这适用于其他开发人员，但我觉得很难相信，我按照他们给我的一些步骤，从 svn，yada yada 下载了该站点。当我运行该网站时，它没有找到并解决此服务。

这是我在 web.config 中注册服务后的样子。这是应该适用于 localhost 的现有配置文本：

```
<client>

  <endpoint address="net.pipe://localhost/WcfBusinessService" binding="netNamedPipeBinding" bindingConfiguration="PipeBestPerformance" contract="WcfBusinessFacadeContract.IBusinessFacade" />

</client> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:24:56.497

您可能没有在 IIS 中启用 net.pipe。打开 IIS 管理器，右键单击您的站点并选择“管理网站”->“高级设置”。查看“启用的协议”设置。我猜它可能设置为“http”。如果是这样，请将其更改为“http,net.pipe”并尝试您的应用程序。

# php - 向服务器添加大量记录

> ID：15401319
> 
> 赞同：0
> 
> 时间：2013-03-14T04:37:31.280
> 
> 标签：php, mysql

我们有一个电子商务系统，我们有一个单独的库存系统。我们使用 php 和 mysql。我们需要向电子商务服务器提供库存详细信息。我们每 1 小时有大约 7500 条记录要推送到服务器。我们在电子商务系统上创建了一个 api，通过它我们可以添加库存。但由于两台服务器位于不同的位置，因此需要大量时间。有没有更快的方法可以将这个库存推送到服务器。即向服务器上的特定表添加记录，并且只有 2 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:42:06.600

你能告诉我们瓶颈在哪里吗？您的 API 是否被数据库占用？您在一次调用中通过 API 推送了多少项？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:47:00.683

您正在表中的每一行执行一个 API 请求。这引入**了很多**开销。

相反，使用 7.500+ 行（不好但仍优于 1/1）或多个`n`记录请求发出巨大请求。`n`根据性能量身定制。

# 编辑

由于您从未命名您的电子商务解决方案，我假设它是内部的，您可以修改 API。如果这不是真的，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T04:48:12.667

在 MySQL 中，如果您在单个表中添加大量数据，您可以`INSERT`为多个`ROWS`. 这种方式要快得多。

```
INSERT INTO inventory VALUES (2, 'Lamp'), (1, 'Bike'), (8, 'TV'); 
```

[您可以在MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)中找到有关`INSERT`优化的文档。

该文档还显示了您可能要考虑的替代解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T05:10:45.850

它们必须有很多 MySQL 方面的选项，例如 rsync、LOAD DATA INFILE、INSERT MULTIPLE ROWS（如 Thomas 所说）等。

对于 PHP 端，您可以使用[准备好的语句](http://php.net/manual/en/pdo.prepare.php)，它应该会更快。在这里，您只绑定参数并循环执行。虽然查询定义在循环之外。但是仍然 MySQL 解决方案在您的情况下必须更有效。

# matlab - 翻转向量的最后 3 位

> ID：15401322
> 
> 赞同：3
> 
> 时间：2013-03-14T04:37:40.333
> 
> 标签：matlab, binary

我有一个 uint16 向量，我需要翻转每个数字的最后 3 位。

我已经这样做了，但我认为必须有一个更简单的解决方案来做到这一点。这是我的代码。

```
%Turn the vector to binary
V_bin = dec2bin(V,16);
for i=1:length(V)
  %Get the last 3 bits
  tmp = V_bin(14:end);
  %Convert the string to decimal
  tmpdec = bin2dec(tmp);
  %Do the flip
  tmpflip = bitcmp(uint8(tmpdec));
  %Flipped to binary
  tmpbin = dec2bin(tmpflip);
  %Replace the flipped bits in the original string
  V_bin(14:end) = tmpbin(6:end);
end
V = bin2dec(V_bin); 
```

如您所见，一个简单的操作有很多行，我想知道是否有更有效的方法来做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T04:57:51.940

我对matlab不熟悉，但是[bitxor](http://www.mathworks.com.au/help/matlab/ref/bitxor.html)函数看起来很适合你，即

```
V = bitxor(V, 7); 
```

# iphone - 使用ARC如何在Objective c中知道对象是否还活着

> ID：15401324
> 
> 赞同：4
> 
> 时间：2013-03-14T04:37:52.597
> 
> 标签：iphone, uitableview, search, automatic-ref-counting

嗨，在我的 iPad 应用程序中，我正在使用搜索栏和 tableview，搜索完成后，我在 tableview 中显示结果。为了用新的搜索结果更新表格，我正在调用 reloadData 方法。它工作正常，但在少数情况下，应用程序在 [tableviewobject reloaddata] 方法处崩溃，我在控制台中收到此错误

对象 0x95a0300 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试。

通过观察上述错误，我了解到 tableviewobject 已从内存中删除。我将消息发送到释放的对象。为了克服这个问题，我所做的是在将消息 reloadData 传递给 tableviewobject 之前分配内存

```
tableviewObject=[[UITableView alloc]init];
tableviewObject.delegate=self;
tableview.datasource=self;
[tableviewObject reloaddata];. 
```

在这种情况下，结果数据没有在 tableview 中更新。现在我想知道的是如何知道对象是活着的还是从内存中释放出来的。如果它释放了如何为表视图对象分配内存以重新加载搜索结果数据。如果有人有任何想法，请为此提供解决方案。提前谢谢请帮助我。

**注意：在我的项目中，我使用的是 ARC。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:29:01.180

您是否注意到第三行中 UITableView 的名称拼写错误？

```
tableviewObject=[[UITableView alloc]init];
tableviewObject.delegate=self;
tableview.datasource=self;
[tableviewObject reloaddata]; 
```

应该是 tableviewObject.datasource=self;

此外，为什么每次都创建新对象？你会因此失去旧的！只需第一次也是唯一一次在 viewDidLoad 方法中初始化它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T12:04:47.743

作为解决方案的更通用方法：

如果您使用 ARC，则需要保留对象，否则它们将为您释放。
在上面的示例中（假设您还打算分配 tableviewObject.datasource），您将需要一些属性或类成员来保存对您的 tableviewObject 的引用。例如：

```
@interface MyViewController()  //anonymous private properties inside your .m
@property(nonatomic,strong) UITableView *tableviewObject;
@end

@implementation MyViewController
@synthesize tableviewObject;
// rest of your implementation ...
@end 
```

这样您就可以使用*self.tableviewObject*但只要具有该属性的 UIViewController 处于活动状态，它将保持可用。

*要记住的一般事情很简单，如果您不想阻止 ARC 发布某些人必须使用它的东西（引用或成员属性算作**“使用”**）。*

在这方面，thalador / user2413007 的答案也是正确的，因为出口将引用加载的 XIB 中的 tableview，它基本上具有相同的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-23T09:57:16.950

不要在代码中创建 UITableView 对象，你会失去视图之间的链接，如果你创建这样的对象，它不会帮助你创建这样的属性

```
@property(nonatomic,strong)IBOutlet UITableView *tableView; 
```

我认为这将解决您的问题。

# ruby - 将字符串拆分为指定大小的块而不破坏单词

> ID：15401326
> 
> 赞同：12
> 
> 时间：2013-03-14T04:38:06.347
> 
> 标签：ruby, string

我需要根据特定的大小将字符串拆分成块。我不能在块之间打断单词，所以我需要在添加下一个单词时捕捉到会超过块大小并开始下一个（如果块小于指定大小也没关系）。

这是我的工作代码，但我想找到一种更优雅的方法来做到这一点。

```
def split_into_chunks_by_size(chunk_size, string)
  string_split_into_chunks = [""]
  string.split(" ").each do |word|
    if (string_split_into_chunks[-1].length + 1 + word.length > chunk_size)
      string_split_into_chunks << word
    else
      string_split_into_chunks[-1] << " " + word
    end
  end
  return string_split_into_chunks
end 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T04:48:42.847

怎么样：

```
str = "split a string into chunks according to a specific size. Seems easy enough, but here is the catch: I cannot be breaking words between chunks, so I need to catch when adding the next word will go over chunk size and start the next one (its ok if a chunk is less than specified size)." 
str.scan(/.{1,25}\W/)
=> ["split a string into ", "chunks according to a ", "specific size. Seems easy ", "enough, but here is the ", "catch: I cannot be ", "breaking words between ", "chunks, so I need to ", "catch when adding the ", "next word will go over ", "chunk size and start the ", "next one (its ok if a ", "chunk is less than ", "specified size)."] 
```

@sawa 评论后更新：

```
str.scan(/.{1,25}\b|.{1,25}/).map(&:strip) 
```

这更好，因为它不需要以 \W 结尾的字符串

它会处理超过指定长度的单词。实际上它会分裂它们，但我认为这是期望的行为

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T10:20:51.483

@Yuriy，你的交替看起来很麻烦。怎么样：

```
str.scan /\S.{1,24}(?!\S)/
#=> ["split a string into", "chunks according to a", "specific size. Seems easy", "enough, but here is the", "catch: I cannot be", "breaking words between", "chunks, so I need to", "catch when adding the", "next word will go over", "chunk size and Start the", "next one (its ok if a", "chunk is less than", "specified size)."] 
```

# xtext - 如何解决“生成的包可能不是空的”错误

> ID：15401330
> 
> 赞同：5
> 
> 时间：2013-03-14T04:38:38.480
> 
> 标签：xtext

我有一个名为的语法`leach.xtext`，当我将它放入我的文件中的 Xtext 时，我`myDsl.xtext`收到以下错误：

> 生成的包 'leach' 可能不是空的。

通过查看其他示例，他们都在 xtext 文件的开头添加了一些“规则”，然后指向语法中的第一个原始规则。但我不明白该怎么做。下面是整个语法，虽然我认为只有前几行应该是相关的。

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.common.Terminals

generate leach "http://www.xtext.org/example/mydsl/MyDsl" //error appears here..

start : ('Prepare' ':' '{' ingredients '}')+ (procdef) cook;
cook  : 'Cook' ID ':' '{' instructions serve ';' '}';

ingredients : ingredient ( ',' ingredient)*;
ingredient : amount food;
quality : 'large' | 'sliced' | 'finelySliced' | 'chopped' | 'fresh' | 'grated' |
            'ground' | 'unsalted' | 'fluffy' | 'goldenBrown' ;

amount : INT (unit);
unit : 'l' | 'ml' | 'cl' | 'oz' | 'g' | 'kg' | 'tesp' | 'tbsp';

temperature : INT heat;
heat : 'c' | 'f';

tlength : tunit '(' INT ')';
tunit : 'sec' | 'min';

hobheat : 'LOW' | 'MEDIUM' | 'HIGH';
hob : 'hob1' | 'hob2' | 'hob3' | 'hob4';

food : 'cookingApples' | 'sugar' | 'shortcrustPastry' | 'wensleydaleCheese' | 'whippedCream' |
    'bacon' | 'redOnion' | 'doubleCream' | 'flatleatParsley' | 'parmesan' | 'greenSalad' |
    'tomatoKetchup' | 'blackPepper' | 'goldenSyrup' | 'vanillaExtract' | 'brownSugar' | 'eggs' | 
    'pecanNuts' | 'lard' | 'vegetableOil' | 'butter' | 'readyPastry' | 'salt' | ID ;

instructions : (instruction);
instruction : 'if' '(' expr ')' '{' instructions '}' ( 'else' '{' instructions '}')  | 
    whil '(' expr ')' '{'  instructions '}' |
    'do' '{' instructions '}' whil '(' expr ')' |
    process ';' | 
    assign ';' |
    cook;

whil : 'while' | 'until';
assign : 'set' varname '=' expr;
varname : '@' ID;

process : 'Preheat' '(' temperature ')' | 
    'AddToOven' '(' container ')' |
    'Slice' '(' food ',' amount ')' |
    'RemoveFromHeat' '(' container ')' |
    'Drain' '(' container ')' |
    'Grease' '(' container ',' food ')' |
    'Layer' '(' container ',' food ')' |
    'SetHeat' '(' ( (hobheat ',' hob) | temperature ) ')' |
    'Whisk' '(' container ')' |
    'Stir' '(' container ')' |
    'AddTo' '(' container ',' food ',' amount ')' |
    'PutOnHub' '(' container ','  hob ')' |
    'Wait' '(' (expr | tlength)+ ')' |
    'EmptyTo' '(' container ',' container ')' |
    'MoveTo' '(' container ',' food ',' amount ')' |
    '~' ID '(' (expr (',' expr) ) ')' ;

procdef : 'function' ID '(' (expr (',' expr) ) ')' block;
block : '{' instructions (retur)? '}';
serve : 'serve' (container | '@'ID);
retur : 'return' expr ';' ;

container : 'bowl' | 'saucePan' | 'fryingPan' | 'bakingTray' | 'pieDish' | 'plate';
expr : e1 ('~~' e1 | 
    '<' e1 |
    '<=' e1 |
    '>' e1 |
    '>=' e1 |
    '==' e1 |
    '!=' e1 )*;

e1 : e2 ('^' e2)*;

e2 : e3 ('|' e3)*;
    e3 : e4 ('&' e4)*;
    e4 : e5 ('+' e5 | '-' e5)*;
    e5 : e6  ('*' e6 | '/' e6 | '&' e6)*;
    e6 : ('!') e7;
    e7 : e8 ('**' e7);
    e8 : 'true' | 'false' | INT | quality | food | container | process | '(' expr ')'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:06:41.047

您的语法看起来不像是合理有效的 Xtext 语法。您的所有规则都是数据类型规则，因此不会推断出产生错误消息的类型。请查看手册，尤其是关于作业的部分。

您的语法可能应该从以下几行开始：

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.common.Terminals

generate leach "http://www.xtext.org/example/mydsl/MyDsl" //error appears here..

Start : ('Prepare' ':' '{' ingredients+=Ingredients '}')+ (def=Procdef) cook=Cook;
Cook  : 'Cook' name=ID ':' '{' instructions=Instructions serve=Serve ';' '}';

Ingredients : ingredients+=Ingredient ( ',' ingredients+=Ingredient)*; 
```

请注意，规则通常以大写字母开头，并且您必须使用分配，例如`=`为了`+=`从输入中生成正确的 AST。

# machine-learning - 使用高斯混合模型的二元分类

> ID：15401331
> 
> 赞同：1
> 
> 时间：2013-03-14T04:38:38.893
> 
> 标签：machine-learning, pattern-matching, speech-recognition, speaker

我想为决策边界实现 T=Log( f ( x | client) ) - Log( f ( x | impostor) )。我的训练和测试特征是 20*12。我已经应用了voicebox matlab 工具箱。我编写了以下 MATLAB 代码：

```
if max(lp_client)- max(lp_impostor) >0.35
   disp('accept');
else
   disp('reject');
end 
```

我应该使用对数概率的平均值还是对数概率的最大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:36:34.837

由于估计的概率性质，您应该使用 lp_client 的总和。如果您有一系列独立事件（此模型中通常假设特征独立），则概率是每个事件的概率的乘积：

P (Seq | X ) = P(feat1 | x) * P(feat2 | X) ...

或在日志域中

logP (Seq | X) = logP (feat1 | x) + logP(feat2 | X)

所以实际上

logP (x | client) = sum (lp_client)

和

logP(x | impostor) = sum (lp_impostor)

# objective-c - 如何在 mac os x 上获取默认邮件客户端版本？

> ID：15401334
> 
> 赞同：0
> 
> 时间：2013-03-14T04:38:47.463
> 
> 标签：objective-c, c, macos, system-information

我刚来这地方。我在 mac os x 上搜索了默认邮件客户端信息。我在这里找到了一些帮助 [How do I get the default mail client using applescript？](https://stackoverflow.com/questions/3986512/how-do-i-get-the-default-mail-client-using-applescript) 但我没有得到我想要的所有信息。我得到了默认的邮件客户端名称，但无法获得我在 Mail.app 的“关于邮件”部分看到的版本（启动时）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:06:40.803

[LaunchServices](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/LaunchServicesConcepts/LSCTasks/LSCTasks.html#//apple_ref/doc/uid/TP30000999-CH203-SW4)是 OS X API，包含有关用户首选应用程序的信息。

该[`LSGetApplicationForURL()`函数](https://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/Reference/reference.html#//apple_ref/c/func/LSGetApplicationForURL)将返回您查找的数据。这是其使用的简短示例：

```
#include <CoreFoundation/CoreFoundation.h>
#include <ApplicationServices/ApplicationServices.h>

int main(int argc, char *argv[])
{
  CFURLRef mailURL = CFURLCreateWithString(kCFAllocatorDefault, CFSTR("mailto://"), NULL);
  CFURLRef mailAppURL = NULL;
  OSStatus ret = 0;
  if((ret = LSGetApplicationForURL(mailURL, kLSRolesAll, NULL, &mailAppURL)) == 0)
  {
    CFStringRef path = CFURLCopyFileSystemPath(mailAppURL, kCFURLPOSIXPathStyle);
    CFShow(path);

    CFRelease(path);
    CFRelease(mailAppURL);
  }
  else
  {
    fprintf(stderr, "LaunchServices error %d\n", ret);
  }

  CFRelease(mailURL);
  return ret;
} 
```

在我的系统上，打印`/Applications/Mail.app`. 如果您想了解有关退货商品的更多信息，可以使用on 上的[`LSCopyItemInfoForURL()`功能](https://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/Reference/reference.html#//apple_ref/c/func/LSCopyItemInfoForURL)`mailAppURL`。

# android - 在android上添加谷歌地图对象

> ID：15401335
> 
> 赞同：0
> 
> 时间：2013-03-14T04:38:48.543
> 
> 标签：android, android-xml, google-maps-android-api-2

因此，当用户点击“添加圆圈”按钮时，我想将对象添加到我拥有的地图中，例如圆圈，但是当我尝试从 xml 获取地图时，当它执行任何修复或解决方法时，我会`NullPointerException`得到一个? 示例代码很有帮助。`.getmap()``newCircle()`

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;

import com.google.android.gms.maps.*;
import com.google.android.gms.maps.model.CircleOptions;
import com.google.android.gms.maps.model.LatLng;

public class GoogleMaps extends FragmentActivity {
    GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_google_maps);
        makeCircleButton();
    }

    private void makeCircleButton() {
        OnClickListener onClickListener = new OnClickListener() {
            @Override
            public void onClick(View v) {
                newCircle();
            }
        };

        Button button = (Button) findViewById(R.id.add_circular_area);
        button.setOnClickListener(onClickListener);
    }

    public void newCircle() {
        mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();

        // Instantiates a new CircleOptions object and defines the center and
        // radius
        CircleOptions circleOptions = new CircleOptions().center(
                new LatLng(37.4, -122.1)).radius(1000); // In meters
        mMap.addCircle(circleOptions);

        // Get back the mutable Circle
        // Circle circle = mMap.addCircle(circleOptions);
    } 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        layout="@layout/fragment" />

    <ScrollView
        android:id="@+id/map_scrollview"
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:fadingEdge="none"
        android:scrollbarAlwaysDrawVerticalTrack="true" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <Button
                android:id="@+id/button1"
                android:layout_width="245dp"
                android:layout_height="wrap_content"
                android:text="Add rectangular area" />

            <Button
                android:id="@+id/add_circular_area"
                android:layout_width="245dp"
                android:layout_height="wrap_content"
                android:text="Add circular area" />

        </LinearLayout>

    </ScrollView>

</RelativeLayout> 
```

xml 包括：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment
        xmlns:android="http://schemas.android.com/apk/res/android" 
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        map:uiTiltGestures="false"
        map:mapType="hybrid"
        /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:58:25.013

你已经使用了你的片段名称，`com.google.android.gms.maps.SupportMapFragment`所以你不能得到`MapFragment`你应该使用`getSupportFragmentManager()`而不是`getFragmentManager()`并将其转换为`SupportMapFragment`。

改变

```
 mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap(); 
```

到

```
mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap(); 
```

希望它会有所帮助。

# django - Django 邮件发送错误：[错误 10061]

> ID：15401339
> 
> 赞同：0
> 
> 时间：2013-03-14T04:39:14.587
> 
> 标签：django, email

我跟着 The Django Book 到了第 7 章。当我尝试联系的例子时，我遇到了这个邮件发送错误。

有谁知道如何解决这一问题？

这是错误信息：

/contact/ 出现错误
[Errno 10061]
请求方法：POST

```
Request URL:    http://127.0.0.1:8000/contact/<br> 
```

Django 版本：1.5
异常类型：错误
异常值：[Errno 10061]
异常位置：C:\Python27\lib\socket.py in create_connection，第 571 行
Python 可执行文件：C:\Python27\python.exe
Python 版本：2.7.2
Python 路径：
['D:\Workspace\DJhello',
'D:\Workspace\DJhello',
'D:\Workspace\DJhello\src',
'C:\Python27\DLLs',
'C:\Python27\lib' ,
'C:\Python27\lib\plat-win',
'C:\Python27\lib\lib-tk',
'C:\Python27',
'C:\Python27\lib\site-packages',
'C: \Python27\lib\site-packages\win32',
'C:\Python27\lib\site-packages\win32\lib',
'C:\Python27\lib\site-packages\Pythonwin',
'C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg-info',
'C:\Windows\system32\python27.zip']
服务器时间: Thu, 14 Mar 2013 12:08 :14 +0800`enter code here`

这是我的代码：

```
def contact(request):
    errors = []
    if request.method == 'POST':
        if not request.POST.get('subject', ''):
            errors.append('Enter a subject.')
        if not request.POST.get('message', ''):
            errors.append('Enter a message.')
        if request.POST.get('email') and '@' not in request.POST['email']:
            errors.append('Enter a valid e-mail address.')
        if not errors:
            send_mail(
                request.POST['subject'],
                request.POST['message'],
                request.POST.get('email', 'noreply@example.com'),
                ['siteowner@example.com'],
            )
            return HttpResponseRedirect('/contact/thanks/')
    return render_to_response('contact_form.html',
        {'errors': errors, 
        'subject': request.POST.get('subject', ''),
        'message': request.POST.get('message', ''), 
        'email': request.POST.get('email', '')}, 
        context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T17:00:59.723

检查您的电子邮件设置是否正确：

设置.py：

DEFAULT_FROM_EMAIL = "youremail@gmail.com"

EMAIL_HOST = "smtp.gmail.com"

EMAIL_HOST_USER = "你的邮箱@gmail.com"

EMAIL_HOST_PASSWORD = "你的邮箱账户密码"

电子邮件端口 = 587

EMAIL_USE_TLS = 真

**据我所知，这些是 gmail 的设置。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-31T08:31:08.990

在您发送邮件之前，您必须在您的 : 中设置一些变量`settings.py`：

```
EMAIL_HOST = 'smtp.163.com' # replace with your smtp server's address
EMAIL_POST = 25 # replace with your smtp server's port
EMAIL_HOST_USER = 'username' # replace with your smtp server account username
EMAIL_HOST_PASSWORD = 'abc' # replace with your smtp server account password 
```

**注意：您应该有一个 smtp 服务器或一个 smtp 服务器帐户。**

**如何获得免费的 smtp 服务器帐户？** [本网站提供免费的 smtp 服务。](http://www.serversmtp.com)

也许您想深入研究 django 文档，[https: //docs.djangoproject.com/en/dev/ref/settings/#std:setting-EMAIL_HOST](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-EMAIL_HOST)

# php - 创建 Base64 编码器和解码器工具 (PHP)

> ID：15401355
> 
> 赞同：-3
> 
> 时间：2013-03-14T04:41:18.153
> 
> 标签：php, base64

你好吗？我有一个网站，我有一些网站管理员工具。我有 PHP base64 的解码器和编码器。这些工具来自外部网站…… 我使用 iframe。但是不专业。我不是 php 专业人士，但我希望在我的网站上拥有这样的工具……我只需要表单代码和 php 代码即可获取 uncode 或代码 base64。有人可以帮我解决这个问题吗？

问候，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:42:49.990

PHP内置了base64。玩得开心:)

[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

[http://www.php.net/manual/en/function.base64-decode.php](http://www.php.net/manual/en/function.base64-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:50:27.613

我刚做了这个；它工作简单。

```
<?php
//this is a first-draft, untested
$encode = $_POST['encode'];
$decode = $_POST['decode'];
?>
<html>
<head>
<title>
Awesome Base64 Transcoder
</title>
</head>
<body>
<form action="" method="POST">
To encode: <input type="text" name="encode" value="<?php echo base64_decode($decode);?>">
<input type="submit" value="Encode">
</form>
<br />
<form action="" method="POST">
To decode: <input type="text" name="decode" value="<?php echo base64_encode($encode);?>">
<input type="submit" value="Decode">
</form>
</body> 
```

# ios - 程序（应用程序）未使用 xcode 在 iPhone 上运行

> ID：15401356
> 
> 赞同：0
> 
> 时间：2013-03-14T04:41:20.507
> 
> 标签：ios, objective-c, ios6

我已将我的 iPhone OS 从 6.0.1 升级到 6.1.2，现在当我在 Xcode 中运行我的程序（应用程序）时，我收到以下错误消息：

> “没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。”

以前我所有的应用程序都可以正常运行，但现在我无法使用 Xcode 在我的 iPhone 上运行任何应用程序。我的配置文件有问题吗？我在 Provisioning Portal 中再次添加了我的设备，但我仍然没有解决方案。

有什么方法可以在我的 iPhone 上运行我的应用程序（程序）吗？

或者如何将我的 iPhone OS 降级到 6.0.1？

我没有保存 SHSH blob，我也尝试过其他方法......它们都不适合我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:42:50.500

安装最新的 Xcode 4.6 版。Xcode 4.2 不支持 iPhone OS 6.1.2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:40:27.040

除了升级您的 xCode 之外，您还必须更新您的配置文件以更新您的测试手机 iOS 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T04:44:21.637

您无法在设备上降级您的 iOS 版本。你使用的是什么版本的 Xcode 和 iOS SDK？确保您使用的是最新版本（Xcode 4.6）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T05:17:05.203

你必须更新你的sdk和simulitar版本。在xcode的菜单中，选择xcode->Preferences...，它会打开一个窗口。你可以选择“Downloads”项，升级组件和文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T06:19:58.743

您需要 Xcode 4.6 才能在最新的 iOS 版本 6.1.2 上运行。我的设备也有同样的问题，但升级后它运行良好。和越狱没关系。显然你不能降级 iPhone OS，所以唯一的选择是升级 Xcode。

希望我有所帮助。

# sql-server - SQL Server 触发器中的多行

> ID：15401357
> 
> 赞同：0
> 
> 时间：2013-03-14T04:41:24.963
> 
> 标签：sql-server, triggers

我想编写一个触发器来审计 SQL Server 中表行的插入、更新和删除。根据 MSDN，SQL Server 触发器运行“每表”而不是“每行”，就像它们在 Oracle 和 Sqlite 中那样。

这是否意味着您只会在以下情况下在“插入”和“删除”临时表中获得多条记录

1.  在事务内部或外部的 SINGLE insert 语句会导致创建多行。

2.  事务内部或外部的 SINGLE 更新语句会导致多次更新。

3.  在事务内部或外部的 SINGLE delete 语句会导致多次删除行。

当触发器可能被称为“插入”或“删除”> 1 在这些场景之外时，是否还有其他场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:47:00.057

这些表是由触发器评估的每个语句特定的，是的。

MERGE 语句有点不同，因为触发器将在合并中的每个操作后触发。

更多信息：http: [//msdn.microsoft.com/en-us/library/ms191300.aspx](http://msdn.microsoft.com/en-us/library/ms191300.aspx)

具体到这里的 MERGE：[http ://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

# javascript - 更改 Kendo Grid 中过滤列标题的颜色

> ID：15401360
> 
> 赞同：4
> 
> 时间：2013-03-14T04:42:03.640
> 
> 标签：javascript, css, kendo-ui, kendo-grid

我正在使用剑道控件做一个项目，并且我正在使用一个剑道网格。我的要求是当我对一列应用过滤时，我想更改过滤后的列标题的颜色。我的剑道网格代码是：

```
 var grid = $("#grid").kendoGrid({
        dataSource: {
            type           : "odata",
            transport      : {
                read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
            },
            schema         : {
                model: {
                    fields: {
                        OrderID  : { type: "number" },
                        Freight  : { type: "number" },
                        ShipName : { type: "string" },
                        OrderDate: { type: "date" },
                        ShipCity : { type: "string" }
                    }
                }
            },
            pageSize       : 10
        },
        filterable: true,
        sortable  : true,
        pageable  : true,
        columns   : [
            {
                field     : "OrderID",
                filterable: false
            },
            "Freight",
            {
                field : "OrderDate",
                title : "Order Date",
                width : 100,
                format: "{0:MM/dd/yyyy}"
            },
            {
                field: "ShipName",
                title: "Ship Name",
                width: 200
            },
            {
                field: "ShipCity",
                title: "Ship City"
            }
        ]
    }).data("kendoGrid"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:33:25.777

当您过滤 Grid 时，过滤器图标实际上会改变颜色，但您希望整个标题都改变？

我在网格上看不到任何允许您指定此事件或任何您可以挂钩的过滤器事件的配置，但这并不是不可能的。

查看网格中发生的情况，当您过滤列时，会`.k-state-active`在列标题的过滤器图标中添加一个额外的类。我们可以应用一些 CSS 来轻松更改该类的背景颜色，但它不适用于整个标题（父 TH 元素），并且 CSS 中没有父选择器。

我认为为了做到这一点，您可能必须覆盖 Kendo FilterMenu 小部件的刷新功能，将其替换为您自己的函数，然后调用原始函数。完成此操作后，您可以扩展 FilterMenu 以向整个标题添加一个附加类。

```
// Grab old refresh function
var filterMenu = kendo.ui.FilterMenu.fn;
filterMenu.oldRefresh = filterMenu.refresh;

// Replace it with our own
filterMenu.refresh = function () {
   filterMenu.oldRefresh.apply(this, arguments);

   // Add an additional class to the column header
   if (this.link.hasClass('k-state-active')) {
      this.link.parent().addClass('k-state-active');
   } else {
      this.link.parent().removeClass('k-state-active');
   }
}; 
```

然后，您可以使用 CSS 调整`.k-state-active`网格标题内的背景颜色。

```
#grid thead .k-state-active {
  background-color: crimson;
} 
```

[你可以在这里](http://jsbin.com/elavoq/1)看到它的作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T21:49:14.440

不幸的是，仅当您的 kendogrid 具有该属性时，接受的答案才有效`columnMenu: false`。如果您激活了列菜单，`k-state-active`则不会添加任何类。你可以在这里看到它：[http](http://demos.kendoui.com/web/grid/column-menu.html) ://demos.kendoui.c​​om/web/grid/column-menu.html 。

* * *

**解决方案**在 kendogrid 声明中 设置`dataBound: dataBound`并调用该函数

```
function dataBound(e) {
    var filter = this.dataSource.filter();
    this.thead.find(".k-header-column-menu.k-state-active").removeClass("k-state-active");
    if (filter) {
        var filteredMembers = {};
        setFilteredMembers(filter, filteredMembers);
        this.thead.find("th[data-field]").each(function () {
            var cell = $(this);
            var filtered = filteredMembers[cell.data("field")];
            if (filtered) {
                cell.find(".k-header-column-menu").addClass("k-state-active");
            }
        });
    }     
}      

function setFilteredMembers(filter, members) {
    if (filter.filters) {
        for (var i = 0; i < filter.filters.length; i++) {
            setFilteredMembers(filter.filters[i], members);
        }         
    }
    else {
        members[filter.field] = true;        
    }
} 
```

现在它将正确地将`k-state-active`类添加到`.k-header-column-menu`过滤列

*来源：[http ://www.kendoui.c​​om/forums/kendo-ui-complete-for-asp-net-mvc/grid/columnmenu-how-to-show-applied-filter.aspx#wGDLlf8GqkuGtkRiIx2Azg](http://www.kendoui.com/forums/kendo-ui-complete-for-asp-net-mvc/grid/columnmenu-how-to-show-applied-filter.aspx#wGDLlf8GqkuGtkRiIx2Azg)*

* * *

另一方面，如果您像我一样喜欢**仅突出显示菜单图标**，则可以找到包含菜单图标的子跨度，从而更改行

```
this.thead.find(".k-header-column-menu.k-state-active").removeClass("k-state-active"); 
```

至：

```
this.thead.find(".k-header-column-menu > span").removeClass("k-state-selected"); 
```

当然还有这条线

```
cell.find(".k-header-column-menu").addClass("k-state-active"); 
```

至：

```
cell.find(".k-header-column-menu").find("span").addClass("k-state-selected"); 
```

在我的示例中，我使用的是内置`k-state-selected`类

# iphone - 在非当前线程的 IOS 中检索线程名称

> ID：15401363
> 
> 赞同：13
> 
> 时间：2013-03-14T04:42:22.583
> 
> 标签：iphone, ios, objective-c, c, multithreading

![线程名称示例：'com.apple.coremedia.player.async'](../Images/076f0b87f19afc305ec69b9fd0c6f00f.png)

你如何检索线程的“名称”？

（请参阅应用程序暂停的 xcode 图片，其中，我所说的“名称”以黄色突出显示，“com.apple.coremedia.player.async”......我可以检索正在运行的线程，并尝试了以下, 没有运气

```
mach_msg_type_number_t count, i;
thread_act_array_t list;

task_threads(mach_task_self(), &list, &count);
for (i = 0; i < count; i++) {
    if (list[i] == mach_thread_self()) continue;

    char theName[16];

    memset(theName, 0x00, sizeof(theName));
    pthread_getname_np(list[i], theName);
    printf("The thread name is %s.\n", theName);

} 
```

注意：我不是在询问当前线程的线程名称。我有兴趣从一组正在运行的线程中获取线程名称（参见上面的示例）。所以关于 [NSThread currentThread] 的解决方案将不起作用

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T08:22:25.510

您的问题很简单：`task_threads`返回一个 Mach 端口数组，而不是一个`pthread_t`. 在您对 的调用中`pthread_getname_np`，您将 Mach 端口视为`pthread_t`. 但是 Mach 端口不是`pthread_t`. 您需要将每个转换为`pthread_t`using `pthread_from_mach_thread_np`：

```
static void dumpThreads(void) {
    char name[256];
    mach_msg_type_number_t count;
    thread_act_array_t list;
    task_threads(mach_task_self(), &list, &count);
    for (int i = 0; i < count; ++i) {
        pthread_t pt = pthread_from_mach_thread_np(list[i]);
        if (pt) {
            name[0] = '\0';
            int rc = pthread_getname_np(pt, name, sizeof name);
            NSLog(@"mach thread %u: getname returned %d: %s", list[i], rc, name);
        } else {
            NSLog(@"mach thread %u: no pthread found", list[i]);
        }
    }
} 
```

我的测试程序的输出：

```
2013-03-14 03:21:45.908 hole[28315:c07] url connection complete
2013-03-14 03:21:46.787 hole[28315:c07] mach thread 3079: getname returned 0: 
2013-03-14 03:21:46.789 hole[28315:c07] mach thread 6147: getname returned 0: 
2013-03-14 03:21:46.790 hole[28315:c07] mach thread 6915: getname returned 0: 
2013-03-14 03:21:46.792 hole[28315:c07] mach thread 7683: getname returned 0: WebThread
2013-03-14 03:21:46.794 hole[28315:c07] mach thread 13059: getname returned 0: com.apple.NSURLConnectionLoader
2013-03-14 03:21:46.796 hole[28315:c07] mach thread 16131: getname returned 0: 
2013-03-14 03:21:46.798 hole[28315:c07] mach thread 17667: getname returned 0: 
2013-03-14 03:21:46.801 hole[28315:c07] mach thread 18187: getname returned 0: com.apple.CFSocket.private
2013-03-14 03:21:46.802 hole[28315:c07] mach thread 20227: getname returned 0: 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T04:54:12.007

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003746](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003746)

`[[NSThread currentThread] name]`应该做的伎俩，我相信。

# css - CSS @media 检查是否不是 Webkit

> ID：15401375
> 
> 赞同：6
> 
> 时间：2013-03-14T04:44:06.507
> 
> 标签：css, webkit, media-queries

我正在尝试创建一个 CSS 文件，如果浏览器使用的是 webkit，则应用一种样式，如果不是，则应用另一种样式。我阅读了如何检查它是否正在使用 Webkit：

```
@media (-webkit-min-device-pixel-ratio:0) 
```

但是，我不知道如何检查它是否没有使用 Webkit。我尝试`not`在媒体查询前面添加，但它似乎不起作用。有人有解决方案或更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T06:23:36.460

我仍然坚持我的评论，但这是我能想到的最好的。再一次，`not`是不是没有错对。你试着弄清楚那个。

所以：

```
html, body {
    background: blue;
}
@media all -webkit-device-pixel-ratio {
    body {
        background: black;
        color: red;
        font: bold 28px monospace;
    }
}
@media not -webkit-device-pixel-ratio {
    body {
        background: lime;
    }
} 
```

[http://jsfiddle.net/userdude/pyvYA/4/](http://jsfiddle.net/userdude/pyvYA/4/)

**编辑**

这也被建议为工作：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {} 
```

真正奇特的是，Chrome 让你不为所动，并提升了你所有人。当然，它认为两者都匹配没有错，而 Firefox 尽职尽责地看起来有点石灰。

美好的时光。您可能可以调整顺序并通过移动它来让所有覆盖不；请记住，它继承了这一点，因为您知道，Chrome 会做它想做的事。

使用 yepnope.js 和 selectivzr.js 试试 Modernizr。这些都执行得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:40:53.410

您可以尝试使用 min：

```
@media screen (-webkit-min-device-pixel-ratio: 0) 
```

和最大值：

```
@media screen (-webkit-max-device-pixel-ratio: 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T04:31:17.687

我在处理 时遇到了这个问题`-webkit-line-clamp`，目前这似乎是 webkit 唯一的功能。

所以我为此创建的 scss mixin 是

```
@mixin line-clamp($line) {
  height: calc(1.3em * #{$line});
  &:after {
    content: '...';
  }

  @media screen and (-webkit-min-device-pixel-ratio:0) {
    display: -webkit-box;
    overflow: hidden;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: $line;
  }

  @media screen and (min--moz-device-pixel-ratio:0) {
    display: block;
    text-overflow: ellipsis;
    overflow: hidden;
    position: relative;
    padding-right: 10px;
    &:after {
      position: absolute;
      bottom: 0;
      right: 0;
    }
  }
} 
```

它使用不同的媒体查询来区分 webkit 和 firefox 的 scss。

# python - Python lambda函数计算一个数字的阶乘

> ID：15401376
> 
> 赞同：8
> 
> 时间：2013-03-14T04:44:09.353
> 
> 标签：python, python-2.7, lambda

我刚开始学习python。我遇到了 lambda 函数。在其中一个问题上，作者要求为数字的阶乘编写一个单行 lambda 函数。

这是给出的解决方案：

```
num = 5
print (lambda b: (lambda a, b: a(a, b))(lambda a, b: b*a(a, b-1) if b > 0 else 1,b))(num) 
```

我无法理解奇怪的语法。a(a,b) 是什么意思？

有人可以解释吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T04:48:33.380

阶乘本身几乎与您预期的一样。您推断`a`is... 阶乘函数。`b`是实际参数。

```
<factorial> = lambda a, b: b*a(a, b-1) if b > 0 else 1 
```

这一点是阶乘的应用：

```
<factorial-application> = (lambda a, b: a(a, b))(<factorial>, b) 
```

`a`是阶乘函数本身。它将自己作为第一个参数，将评估点作为第二个参数。`recursive_lambda`只要您不介意，这可以概括`a(a, b - 1)`为`a(b - 1)`：

```
recursive_lambda = (lambda func: lambda *args: func(func, *args))
print(recursive_lambda(lambda self, x: x * self(self, x - 1) if x > 0 else 1)(6))
# Or, using the function verbatim:
print(recursive_lambda(lambda a, b: b*a(a, b-1) if b > 0 else 1)(6)) 
```

所以我们有外部：

```
(lambda b: <factorial-application>)(num) 
```

如您所见，调用者必须通过的只是评估点。

* * *

如果你*真的*想要一个递归 lambda，你可以[命名 lambda](https://stackoverflow.com/questions/481692/can-a-lambda-function-call-itself-recursively-in-python)：

```
fact = lambda x: 1 if x == 0 else x * fact(x-1) 
```

如果没有，您可以使用[简单的辅助函数](http://ideone.com/wPq1BH)。您会注意到这`ret`是一个可以引用自身的 lambda，这与之前的代码中没有 lambda 可以引用自身不同。

```
def recursive_lambda(func):
    def ret(*args):
        return func(ret, *args)
    return ret

print(recursive_lambda(lambda factorial, x: x * factorial(x - 1) if x > 1 else 1)(6))  # 720 
```

这两种方式你都不必求助于将 lambda 传递给自身的荒谬方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-29T09:03:22.337

就是这么简单：

```
n=input()

print reduce(lambda x,y:x*y,range(1,n+1)) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-14T04:52:27.190

让我们像洋葱一样剥开这个衬里。

```
print (lambda b: (Y))(num) 
```

我们正在创建一个匿名函数（关键字 lambda 表示我们将键入一系列参数名称，然后是一个冒号，然后是一个使用这些参数的函数），然后将其传递 num 以满足其一个参数。

```
 (lambda a, b: a(a, b))(X,b) 
```

在 lambda 内部，我们定义了另一个 lambda。调用这个 lambda Y。这个有两个参数，a 和 b。a 是用 a 和 b 调用的，所以 a 是一个可调用的，它接受自己和一个其他参数

```
 (lambda a, b: b*a(a, b-1) if b > 0 else 1
            ,
            b) 
```

这些是 Y 的参数。第一个是 lambda 函数，称为 X。我们可以看到 X 是阶乘函数，第二个参数将成为它的数字。

也就是说，如果我们上去看看 Y，我们可以看到我们会调用：

```
X(X, b) 
```

这会做

```
b*X(X, b-1) if b > 0 else 1 
```

并调用自身，形成阶乘的递归部分。

一直往外看，我们可以看到 b 是我们传递给最外层 lambda 的 num。

```
num*X(X, b-1) if num > 0 else 1 
```

这有点令人困惑，因为它被写成一个令人困惑的单行：)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T05:54:37.863

这个功能有两个难点。
1 `lambda a, b: b*a(a, b-1) if b > 0 else 1`..
2\. 1 后面的“b”。

对于1，无非是：

```
def f(a, b):
    if b > 0:
        b * a(a, b - 1)
    else:
        1 
```

对于 2，这个 b

```
(lambda b: (lambda a, b: a(a, b))(lambda a, b: b*a(a, b-1) if b > 0 else 1,b))(num)
                                                                      (this one) 
```

实际上是这个b：

```
(lambda b: (lambda a, b: a(a, b))(lambda a, b: b*a(a, b-1) if b > 0 else 1,b))(num)
   (this one) 
```

原因是它不在第二个和第三个 lambda 的定义中，所以它指的是第一个 b。

在我们应用 num 并剥离外部函数之后：

```
(lambda a, b: a(a, b))  (lambda a, b: b*a(a, b-1) if b > 0 else 1, num) 
```

它只是将一个函数应用于一个元组， (lambda a, b: b*a(a, b-1) if b > 0 else 1, num)
我们称这个元组为 (f, num) （f 的定义在上面）应用`lambda a, b: a(a, b)`它，我们得到

f（f，数字）。

假设你的 num 是 5。
根据 f 的定义，它首先计算为

```
5 * f(f, 4) 
```

然后到：

```
5 * (4 * f(f, 3)) 
```

一直到

```
5 * (4 * (3 * (2 * (1 * f(f, 0))))) 
```

f(f, 0) 变为 1。

```
5 * (4 * (3 * (2 * (1 * 1)))) 
```

来吧，5的阶乘。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-04T09:38:18.717

我们可以使用下面的 lambda 表达式

```
 fact = lambda n:1 if n==0 else n*fact(n-1)
     print(fact(5)
     >>> 120 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-06T06:09:36.017

递归 lambda 的广义定义如下

```
recursive_lambda = (lambda func: lambda *args: func(func, *args)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-02T19:28:13.173

很好解释！只有一个小修复：如果 b > 1 NOT 如果 b > 0

结果相同，但逻辑上更正确，因为它正在执行一个不必要的附加循环（即使乘以 1）

Wikipedia => n!，是所有小于或等于 n 的正整数的乘积

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-06T19:42:40.797

如果您想使用 lambda 表达式进行阶乘，那么您需要设置 if else 条件，例如：

```
if x==1: 
    return 1 
else 
    return x*function_name(x-1) 
```

例如`fact`是我的 lambda 表达式：

`fact( lambda x:1 if x==1/else x*fact(x-1) )`

# 这是递归的 if else 条件

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-07T04:46:31.457

**使用 Lambda 函数查找阶乘的简单方法**

```
fac = lambda x : x * fac(x-1) if x > 0 else 1

print(fac(5)) 
```

输出：120

**查找阶乘的用户输入**

```
def fac():

    fac_num = int(input("Enter Number to find Factorial "))

    factorial = lambda f : f * factorial(f-1) if f > 0 else 1

    print(factorial(fac_num))

fac() 
```

输入数字以查找阶乘：5

120

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-03T15:59:29.990

有问题的代码：

```
lambda b : (lambda a, b : a(a, b)) (lambda a, b : b * a(a, b-1) if b > 0 else 1,  b) 
```

为了更清楚，让我`replace variable names a with f, and b with n`。

```
lambda n : (lambda f, n : f(f, n)) (lambda f, n : n * f(f, n-1) if n > 0 else 1,  n) 
```

Recursive Factorial 是一个将调用自身或应用于自身的函数，例如 f(f)。让我们设置`Factorial(n) to be f(f,n)`和计算如下：

```
def func(f, n):  # takes a function and a number, return a number.
        if n > 0 :
            return n * f(f, n-1)
        else :
            return 1 
```

将上述 def func 转换为 lambda 表示法：

```
func is     lambda f, n : n * f(f, n-1) if n > 0 else 1 
```

func is then to be applied to itself along with integer n.

Back to beginning statement, `Factorial(n) is f(f,n), or f(func,n) when func is applied into f.`

```
def Factorial(n):  
    # return f (func, n)  # next, substitute f and func with their corresponding lambdas.
    return (lambda f, n : f(f, n))  (lambda f, n : n * f(f, n-1) if n > 0 else 1, n) 
```

and using lambda instead of def Factorial, the whole thing becomes:

```
lambda n : (lambda f, n : f(f, n)) (lambda f, n : n * f(f, n-1) if n > 0 else 1, n) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-05-13T12:13:32.440

```
while True: 
    #It is this simple:
    from functools import reduce
    n=input('>>')
    n=int(n)
    if n==0:
        print('factorial: ',1)
    elif n<0:
        print('invalid input')
    else:
        print('factorial: ',(reduce(lambda x,y:x*y,list(range(1,n+1))))) 
```

# syntax - Vim Syntax Modify

> ID：15401377
> 
> 赞同：0
> 
> 时间：2013-03-14T04:44:19.950
> 
> 标签：syntax, vim, vim-plugin

I am trying to color different levels of parentheses differently in vim -like rainbow parentheses. But I couldn't do it without breaking, for example, css highlighting.

Problem is that: syntax of whatever text goes into curly braces for a css file, very reasonably defined as "contained", like:

```
syn keyword cssColor contained aqua
syn region cssDefinition transparent start='{' end='}' contains=cssColor 
```

With this definition, "aqua" keyword is highlighted if it's in the braces , but not otherwise.

Now, when I define regions for braces like:

```
syn region brace1 transparent contains=brace2
syn region brace2 transparent contained contains=brace3
syn region brace3 transparent contained contains=brace1 
```

to be able to color them differently, I am breaking containment of cssColor by cssDefinition. saying contains ALL obviously not working.

So the question is, is it possible to write a code to get the elements that original syntax group for braces contain, and add them to freshly defined syntax groups? I know this doesn't make real sense for css files, but it does in general.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:46:13.940

当您集成到现有的（文件类型）语法中时，您必须考虑其结构；你不能只是把你的定义“放在首位”，并希望一切正常。当然，在编写像*彩虹括号*这样的通用插件功能时，这很困难。

我认为您必须将各种“异常”和特殊情况合并到您的插件中，或者转移到可用于突出显示的其他机制，即`matchadd()`/`matchdelete()`函数。不幸的是，您没有 的自动嵌套功能`:syn region`，因此可能很难实现。

# sql-server - 将 Microsoft Access 数据库连接到另一个 Sql Server

> ID：15401382
> 
> 赞同：1
> 
> 时间：2013-03-14T04:44:41.173
> 
> 标签：sql-server, database, ms-access

我有一个 Microsoft Access 2013 数据库，它已将表链接到 Microsoft Sql Server(Server1)。

我需要将连接从 Server1 更改为 Server2。我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:28:50.833

好的，我只有2010，但应该是类似的。
在功能区上，转到**External Data**，然后转到**Linked Table Manager**。这将为您提供所有链接表的列表。**选择 All**，然后在底部选中“**始终提示输入新位置”*****框***，然后单击**OK**。 然后它会要求您选择新位置。它会为每个当前连接字符串执行一次。就您而言，只需一次，因为您的所有内容都指向一台服务器。 然后它将所有表重新链接到新服务器。一旦你知道你在做什么，这大约需要 30 秒。

# .net - Blend opens with no Language and no version

> ID：15401384
> 
> 赞同：2
> 
> 时间：2013-03-14T04:44:45.830
> 
> 标签：.net, wpf, visual-studio-2012, expression-blend, blend

Ihave installed Blend with VS 2012\. While I am opening Blend I cannot select Language and Versions. There data is not available. How can I resolve the issue? ![enter image description here](../Images/d16ca5fa4f0986daffb74912d4c7e7d1.png)

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:57:03.810

**Blend for Visual Studio**目前仅用于开发[Windows 应用商店应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/jj129478.aspx)，因此需要在 Windows 8 上运行。您可以下载用于非 Windows 应用商店应用程序的 Blend 预览版，名为[**Blend + SketchFlow Preview for Microsoft Visual Studio 2012 年**](http://www.microsoft.com/en-us/download/details.aspx?id=30702)。这将允许您在 Windows 7 和 8 中进行 Wpf 和 Silverlight 设计。它是预览版，没有上线许可证。就发布最终位的时间而言，我看到的最后一件事是它们将包含在[Visual Studio Update 2](http://www.microsoft.com/expression/)中。

# c# - Using CDN in MVC script bundle. What am I missing?

> ID：15401387
> 
> 赞同：45
> 
> 时间：2013-03-14T04:45:04.137
> 
> 标签：c#, asp.net-mvc, cdn

I am trying to use a CDN for loading jquery. I have read [this](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification) article and this seems like it should be very straightforward.

My script bundle is defined as follows.

```
bundles.UseCdn = true;
bundles.Add(new ScriptBundle("~/bundles/jquery", "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js").Include(
                        "~/Scripts/jquery-{version}.js")); 
```

I am including it on the page as follows:

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

But when I look at firebug it seems that jquery is being loaded from localhost. ![firebug inspection](../Images/e1c4253e50d8be38d320a2f7dd1f5f48.png)

I have tried with both realease and debug builds. What am I missing? I think this should be quite straightforward. Thanks.

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-14T05:45:02.887

在模式下运行您的应用程序`debug="false"`或使用`BundleTable.EnableOptimizations = true;`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-05-13T09:32:54.993

实际上，当使用最新版本的 ASP.NET MVC 时，您可以更短地编写 @RaviGadag 他的方法。这样您就不必自己在布局中编写回退：

```
public static void RegisterBundles(BundleCollection bundles)
{

  bundles.UseCdn = true;

  var jqueryCdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.3.min.js";
  var jqueryBundle = new ScriptBundle("~/bundles/jquery", jqueryCdnPath).Include("~/Scripts/jquery-{version}.min.js");
  jqueryBundle.CdnFallbackExpression = "window.jQuery";
  bundles.Add(jqueryBundle);

  // ...

  BundleTable.EnableOptimizations = true;
} 
```

内容交付网络 (CDN) 中可用的 jquery 版本： [http ://www.asp.net/ajax/cdn#jQuery_Releases_on_the_CDN_0](http://www.asp.net/ajax/cdn#jQuery_Releases_on_the_CDN_0)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-14T05:00:18.153

确保您未处于调试模式。

```
 bundles.Add(new ScriptBundle("~/bundles/jquery", "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js") 
```

set `BundleTable.EnableOptimizations = true;`// 如果你想使用调试模式

> 在发布模式下会从 CDN 请求 jQuery，并且在调试模式下会在本地获取 jQuery 的调试版本。使用 CDN 时，您应该有一个回退机制，以防 CDN 请求失败。

如果 CDN 请求失败，那么您可以提供回调

```
<script type="text/javascript">
            if (typeof jQuery == 'undefined') {
                var e = document.createElement('script');
                e.src = '@Url.Content("~/Scripts/jquery-1.7.1.js")';
                e.type = 'text/javascript';
                document.getElementsByTagName("head")[0].appendChild(e);

            }
        </script> 
```

# c - I am getting the error 'stray '\160' in program ' for my program

> ID：15401388
> 
> 赞同：0
> 
> 时间：2013-03-14T04:45:11.890
> 
> 标签：c, arrays

I am getting the error 'stray '\160' in program ' for my program.

```
#include <stdio.h>

void main() {

    int x[500], n, my_numb, j, found;

    do {
        printf("Enter n < 10\n");
        scanf("%d",&n);
    } while ((n < 1) || (n > 10));
} 
```

Unable to post entire program, but part of my program is as above.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:10:07.503

听起来你找到[了其中之一](http://www.fileformat.info/info/unicode/char/a0/index.htm)。这是一个不间断的空间。例如，如果您从网站复制代码，这将对应于  。不幸的是，很难看到它，因为它是一个 unicode 空格。如果您碰巧在 *nix 系统上，请尝试使用`cat -vte`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:04:25.183

您的源文件中是否可能有杂散控制代码？您使用的是显示不可打印字符的编辑器，还是文件中嵌入的 Unicode？我对您的程序进行了一些更改，并且在这里可以干净地编译。并且运行没有错误。还稍微更改了 while 循环中的逻辑，使其与所要求的内容相匹配。

```
#include <stdio.h>

int main(void)
{
   int x[500], n, my_numb, j, found;

   do {
      printf("Enter 0 < n < 10\n");
      scanf(" %d", &n);
   } while ((n < 1) || (n >= 10));
   return 0;
} 
```

如果您将其复制到您自己系统上的新文件中，您是否仍然看到错误消息？我怀疑你已经损坏了它，或者不小心在你的原始程序中嵌入了某种控制序列。

# python - Is there any support for a Python program to be able to write a human-readable configuration file from which it can restore its state later?

> ID：15401390
> 
> 赞同：1
> 
> 时间：2013-03-14T04:45:44.597
> 
> 标签：python, configuration, save, state, human-readable

*Update:*

Based on the responses as of 3/16/2013 (or lack thereof), I get the impression that nothing anything like what I have in mind exists already. Thus I will build such a mechanism for myself using the configparser module which was suggested by John Y and which does look to be helpful.

*Original:*

I am not talking about a checkpoint or a core dump. I seek help for a solution which provides a portable text file which can be used by instances of the same program running on entirely different machines and OSes.

I am primarily interested in addressing this question in the context of Python. A few years ago I had written a fairly complex Java program for which the user interface was highly configurable. I wanted to make it easy for a user to save whatever state he had configured and be able to make that his default for the next time he used the program. Furthermore, I wanted the file written for this purpose to be human readable and editable, so that alteration of the file itself could be another approach to setting up different configurations for the program. I solved the problem by a rather brute force solution which required writing specific code for each kind of relevant data structure, both to output it and to read it back in. It was a good solution to the problem; but it was tedious to implement. I was recently looking at a Java program written by someone else, and I saw that he had a much more elegant solution to the problem. (Though the underlying data base for describing an instance of his interface was not quite as elaborate as mine was.)

Now I am writing another such program which will be even more configurable. I am writing it in Python. I am but a beginner when it comes to Python; but I must say that I really like it. I have programmed in a great many languages ranging from assembly languages and Fortran to Lisp and APL; and I must say that learning Python has provided the most pleasant experience yet. Nevertheless, I keep running across very nice extensions and capabilities of which I was not yet aware. Most of the times I did a search to answer some question I had about Python, I would discover that the issue had been addressed comprehensively here at stackoverflow. Thus I am hopeful that some folks here will get the idea of what I seek, and, if possible, point me to some tools that will facilitate the process.

We are talking about a configuration file. Instances of it can be used with a distribution to set up different possible default configurations for the first time a person uses the program. The program itself can write such a file, which, when interpreted, will set up the same configuration as when state was saved. (Note that I am not talking about the application data which the program manipulates. That can be treated as a binary file which can be saved and restored rather easily. Different problem.) It is not as simple as saving particular parameters which can be set by using Widgets in the GUI, though that is part of it. (I am using Tkinter.) The problem is further complicated by the fact that the user can freely create additional objects, each with its own window, and each of which has its own configuration to deal with.

So far, I have written quite a bit of the low level code, without getting involved in making the GUI for all the things I want to be configurable. So I am asking the question here now, because the answer may have some impact on how I go about implementing the GUI. E.g., there may be 'things' I can attach to Widgets that say, "This parameter is something that needs to be saved in the configuration file for a state-save operation." And then it happens automatically when such a save is initiated. Furthermore, mechanisms for interpreting the output when the configuration is read back in are automatically created.

If I were to undertake this entirely myself, I am thinking I would have the program write a Python script, which, when interpreted, would restore the state. In some cases, there would be direct assignments to values in some of the modules. In other cases, there would be invocations of functions which would set some things up in the same manner that applied at the time of the save. Such a file could still be interpreted to a great extent and edited to some extent even by persons not really familiar with Python.

Anyway, I am interested in other ideas about how to attack this problem. I am hopeful that some tools may exist to facilitate a solution because I don't think that what I want to accomplish is an unusual thing to want. I apologize for the long-winded explanation; but I thought that there were a number of directions in which it was possible to misinterpret what I seek, and I wanted to be sure that folks understood where I was coming from. I would appreciate any pointers.

*Added:*

I think that, ideally, what I seek would work like this: I would take responsibility in the code for identifying all those bits of data which constitute configuration information in the sense I have in mind. (E.g., I might have a function that does something like "Add the setting of this Widget to the list of Widget-settable parameters that need to be saved for the configuration." Or the Thingy class on instantiation might want to say "Here is another instance of Thingy in the configuration and these are its attributes which are configurable.") Then, with that knowledge at the time a state-saving operation was requested, a separate tool would take over the task of dumping a description of all the information so-identified to a file. Another separate tool could be used to read that file and restore all the data. I am prepared to write those tools; but I am hoping something like this may already have been done.

*responding to luc -*

I realized that I had overemphasized the word "GUI" in my description, so I edited the description above to fix that.

I am not concerned with what the Widgets look like or how they are managed geometrically. The program will take care of all that. ptkgen seems more concerned about the appearance of the Widgets and their layout than about what their settings mean from the user's point of view. I am concerned with the settings of things that are configurable via the GUI, and the effects of actions the user has taken which affect things like what windows exist and where they are on the screen.

I do see that Python has support for encoding and decoding JSON, but that seems to be at a low level - a level so low that it does not address the larger issue. You would still have to make the particular calls to dump the particular set of things that constitute the state of the application and know what you are loading at that level when the file was read. At that level, I can invent my own format which would actually be easier to write and interpret than it would be using JSON.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:04:31.440

JSON 是将数据存储为配置文件的好方法。它是人类可读的。Python 支持它。

您可能对[pytkgen](https://github.com/tmetsch/pytkgen)感兴趣，它可以从 JSON 定义文件创建 Tkinter GUI。

我自己没试过，但看起来很有趣。

我希望它有帮助

# java - JVM option XX:UseFastEmptyMethods/XX:UseFastAccessorMethods

> ID：15401391
> 
> 赞同：8
> 
> 时间：2013-03-14T04:45:47.017
> 
> 标签：java, optimization, jvm-arguments

While looking at [possible JVM flags for optimizing launching startup time](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse) of my RCP product, I found these attractively-named `-XX:UseFastEmptyMethods` and `-XX:UseFastAccessorMethods`.

It seems that those flags were available on JDK-6 (and on by default), while they were defaulted to off on JDK-7\. Also, I read that the trade-off for this optimization is that they do not increase method invocation counters.

What is the impact of not using invocation counters? Does that affect garbage collection?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T05:01:55.317

这是为了正确获取方法的调用计数，以便 VM 可以更好地识别代码中的热点。

从[这里开始讨论](http://mail.openjdk.java.net/pipermail/hotspot-dev/2012-May/005809.html)

> 如果您使用的是 JDK6，则可能需要在目标 Java 应用程序中包含这两个 VM 标志：
> **-XX:-UseFastEmptyMethods** **-XX:-UseFastAccessorMethods**
> 
> 否则**空**方法和访问器方法将不会显示在列表中，因为“快速”版本不会增加这些方法的调用计数器。在 JDK7 中，这两个标志默认为 false，因此您不必费心将它们显式设置为 false。

* * *

也可以看看 ：

[UseFastEmptyMethods/UseFastAccessorMethods 被认为是有害的](http://bugs.sun.com/view_bug.do?bug_id=6385687)

# php - MySql Php Update is not working?

> ID：15401393
> 
> 赞同：0
> 
> 时间：2013-03-14T04:46:26.250
> 
> 标签：php, mysql

I am facing some issue with update in Mysql Php..

Here is the code I am using

```
 $email = $_REQUEST['email'];
    $name  = $_REQUEST['name'];
    $char ='this is chara'; //$_REQUEST['character'];
    $des  = $_REQUEST['des'];
    $id = $_REQUEST['id'];

$sql_update = "UPDATE cast SET name ='".$name."',Gendor ='".$email."', character = \'ashokkumar2\',description ='".$des."' WHERE id = '".$id."'";
$result=mysql_query( $sql_update);
if ($result){
    echo 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:55:33.147

首先，不要使用 mysql_* 函数，而是使用[PDO ，因为您的脚本对](http://www.php.net/manual/en/book.pdo.php)[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)是完全开放的。

```
character = \'ashokkumar2\' 
```

应该

```
`character` = 'ashokkumar2' 
```

`character`是MySQL 中[的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此您需要使用 tildas 对该字进行转义。避免保留字问题的另一种方法是用下划线分隔的多个单词命名列，例如`character_name`.

如果您需要更多信息，请在运行查询后打印[mysql_error()的输出。](http://www.php.net/manual/en/function.mysql-error.php)

请记住，不要使用 mysql_* 而是使用[PDO](http://www.php.net/manual/en/book.pdo.php)或[MySQLi](http://www.php.net/manual/en/book.mysqli.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:51:24.127

尝试这个

```
$sql_update = "UPDATE cast SET name=$name,Gendor=$email,character='$char',description=$des WHERE id = $id";
$result=mysql_query($sql_update);
if ($result){
    echo 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:56:21.927

如果上述答案不起作用，您可以复制并粘贴以下输出： print $sql_update

或许这给了我们更清楚的答案。

# mysql - IFNULL in mysql speed issue

> ID：15401396
> 
> 赞同：0
> 
> 时间：2013-03-14T04:46:34.023
> 
> 标签：mysql, database-performance, ifnull

```
select IFNULL(col1, (select col2 from table2 where ...)) from table1 
```

Will it run select for table2 if table1 would have not null value? This is a speed issue question. I have no appropriate database to check.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-11T01:45:44.217

只有当 col1 为 null 但每次都为 null 时，才会执行子查询。因此，如果 col1 中有许多空值，这将变得非常慢。

以下可能更适合您：

```
select coalesce(col1,col2) from table1,table2 
                     where (relationship between both tables) 
```

# sql - Tsql nvarchar date update

> ID：15401397
> 
> 赞同：0
> 
> 时间：2013-03-14T04:46:40.077
> 
> 标签：sql, sql-server, tsql, date, nvarchar

I have a table(`tabl`) with column(`Col`) that is `nvarchar(10)` data type.

I am not suppose to change the data type or data length. The column contains date in this format `yyyy-mm-dd` (2012-04-24) I need to update that column to `mm/dd/yyyy`(04/24/2012).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:59:34.723

这是一组可怕的约束，但你要问的是可能的：

```
UPDATE tabl SET col = CONVERT(nvarchar(10), CAST(col AS datetime), 101) 
```

最后`101`是从该页面获取的适当日期样式：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

但是，结果是您将拥有难以排序且格式不明确的日期。作为 a 存储`datetime`是值得尊敬的事情。

# javascript - How to send the error message alert in Jquery DataTable

> ID：15401398
> 
> 赞同：0
> 
> 时间：2013-03-14T04:46:41.963
> 
> 标签：javascript, jquery, asp.net-mvc, exception, datatable

I am using the JQuery Data Table in mvc format. Binding the JQuery data table, using condition. But i don't know how to else the condition , show the error message. I need to show the error alert message server side are client side. My sample Code:

```
 public ActionResult Action(string EmpNo)
        {
            if (condition)
            {
               // data table passing
            }
            else
            {
                //here how to show the error message client side or server side 
            }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T17:37:54.457

您应该返回`JsonResult`与 DataTables 的预期返回签名匹配的任意对象（或真实对象，如果您创建了一个）。就像是：

```
var result = // do something, get a list of stuff etc

return new JsonResult {
    // `Data` is the thing that turns into your json response
    Data = new {
        error = result.Success ? "" : result.Message,
        fieldErrors = new bool[0], // just to fake an empty array
        data = new bool[0],
        aaData = result.Success ? result.Items.Select(o => new {
            //use arbitrary column names if you've specified them in config with `aoColumns` and `mDataProp`, see comment below
            OrderID = o.ID,
            ChannelID = o.Partner,
            ReferenceKey = o.PartnerReferenceKey,
            o.CustomerEmail,
            Status = o.Status.ToString(),
            Value = o.Total,
            CreatedOn = o.CreatedOn.ToString("yyyy-MM-dd HH:mm:ss"), // provide in interpretable format
        }) : (object) new bool[0], // must return an empty list in order for it to understand errors
        iTotalRecords = result.TotalCount,
        iTotalDisplayRecords = result.TotalCount, // should be different if filtering
        sEcho // this is provided by the request, not sure what it means...
    }
}; 
```

对于来自 ajax 响应的自定义列名，您需要查看：

*   [http://datatables.net/blog/Extended_data_source_options_with_DataTables](http://datatables.net/blog/Extended_data_source_options_with_DataTables)
*   [http://datatables.net/beta/1.8/examples/ajax/objects.html](http://datatables.net/beta/1.8/examples/ajax/objects.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:04:05.247

你可以返回一个 JavascriptResult。[JavaScript结果](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.javascript%28v=vs.98%29.aspx)

```
return Javascript("yourJS COde"); 
```

像这样的东西

```
public ActionResult TestJavaScript() {
    string s = "$('#divResultText').html('JavaScript Passed');";
    return JavaScript(s);
} 
```

# php - MySQLi prepared results array

> ID：15401404
> 
> 赞同：0
> 
> 时间：2013-03-14T04:47:13.650
> 
> 标签：php, arrays, mysqli

I have been trying to find a solution to MySQLi stmt not having a fetch array function and I came upon this interesting bit of code. Do you think this code is worth using, no huge security flaws?

```
/*
 * Utility function to automatically bind columns from selects in prepared statements to
 * an array
 */
function bind_result_array($stmt)
{
    $meta = $stmt->result_metadata();
    $result = array();
    while ($field = $meta->fetch_field())
    {
        $result[$field->name] = NULL;
        $params[] = &$result[$field->name];
    }

    call_user_func_array(array($stmt, 'bind_result'), $params);
    return $result;
}

/**
 * Returns a copy of an array of references
 */
function getCopy($row)
{
    return array_map(create_function('$a', 'return $a;'), $row);
} 
```

credit: [http://gunjanpatidar.wordpress.com/2010/10/03/bind_result-to-array-with-mysqli-prepared-statements/](http://gunjanpatidar.wordpress.com/2010/10/03/bind_result-to-array-with-mysqli-prepared-statements/)

Requested by common sense:

```
 $db = new PDO("mysql:host='localhost';dbname='testing'", 'username', 'password') or die('Could not connect to server');
$get_posts = mysqli_stmt_init($db);
mysqli_stmt_prepare($get_posts, 'select * from Chatposts where Chatid = ? and CPid > ? and Deleted = ? order by CPid desc limit ?');
mysqli_stmt_bind_param($get_posts, 'iiii', $chatroomid, $lastpost, $deleted, $limit);
mysqli_stmt_execute($get_posts);
mysqli_stmt_bind_result($get_posts, $newcolumn['ID'], $newcolumn['Chatid'], $newcolumn['Name'], $newcolumn['URL'], $newcolumn['Text'], $newcolumn['Datetime'], $newcolumn['IPaddress'], $newcolumn['Deleted']);
mysqli_stmt_store_result($get_posts);
mysqli_stmt_fetch($get_posts); // Trying to fetch array
mysqli_stmt_close($get_posts); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:36:05.677

尽管我在这段代码中没有看到“巨大的安全漏洞”，但我认为无论如何都不值得使用。看，mysqli 让你无处可去。旧的 mysql 没有这样的问题，PDO 没有这样的问题。只有 mysqli 无缘无故地让你的生活变得复杂。

有时你可以通过使用来解决这个问题`get_result()`，但它**不能保证**工作，甚至不绑定到 PHP 版本 - 所以，你甚至不能事先告诉它。

更不用说尝试*将任意数量的占位符绑定到查询*时会遇到同样的问题，甚至没有半可行的解决方案！

所以，再一次 - 与其解决所有这些问题 - 为什么不使用像 PDO 这样的合理驱动程序呢？
使用 PDO，您可以直接使用熟悉的 fetch()，而无需像上面的代码这样的拐杖。

另一种解决方案是避免使用本机准备好的语句，并使用它们手动解析的等效语句，使用`mysqli_query()`它在任何方面都类似于旧的好 mysql_query。
但是这种方法对于普通用户来说似乎太复杂了——所以，使用[PDO](https://stackoverflow.com/tags/pdo/info)再好不过了。

这是您使用 PDO 的代码

```
$dsn = "mysql:host=localhost;dbname=test;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
    PDO::ATTR_EMULATE_PREPARES   => FALSE,
);
$pdo = new PDO($dsn,'root','', $opt);

$stm = $pdo->prepare('select * from Chatposts where Chatid = ? and CPid > ? and Deleted = ? order by CPid desc limit ?');
$stm->execute(array($chatroomid, $lastpost, $deleted, $limit));
$posts = $stm->fetchAll();
// now you have all requested posts in $posts array 
```

# orchardcms - Using Content Picker Field Tokens in Projection Layout

> ID：15401408
> 
> 赞同：1
> 
> 时间：2013-03-14T04:47:42.477
> 
> 标签：orchardcms

I'm attempting to rewrite the output of a projection. This projection will be rendering items that have the Content Picker field. I would like to include a link to the selected content item. It seems I should be able to use tokens to rewrite the output of a property in my layout, but I can't find the magical incantation necessary.

It seems the Content Picker provides a token to get the selected content, but I'm not sure how to use it. Also, I'm not really familiar with how to chain token calls so I can then get the display url.

The variations I'm trying have returned nothing. Anyone know how this is done?

# php - Update same input name using backbone.js

> ID：15401410
> 
> 赞同：0
> 
> 时间：2013-03-14T04:47:50.057
> 
> 标签：php, javascript, jquery, codeigniter, backbone.js

How to update multiple input with the same name using backbone.js. I just want to update each input per td with their corresponding doc_id using jquery. ANy suggestion or help...

Here is my html code:

```
<td>
<input type="hidden" value="1" name="doc_id"/>
<input type="text" class="abc" name="docs_nos[]" id="inputDocs_nos" value=""/> 
<input type="text" class="abc" name="date_issued[]" id="inputstart" placeholder="mm/dd/yyy" value=""/> 
<input type="text" class="abc" name="date_expired[]" id="inputend" placeholder="mm/dd/yyy" value=""/> 
<input type="text" class="abc" name="remaks[]" id="inputRemaks" value="" />
</td>
<td>
<input type="hidden" value="2" name="doc_id"/>
<input type="text" class="abc" name="docs_nos[]" id="inputDocs_nos" value=""/> 
<input type="text" class="abc" name="date_issued[]" id="inputstart" placeholder="mm/dd/yyy" value=""/> 
<input type="text" class="abc" name="date_expired[]" id="inputend" placeholder="mm/dd/yyy" value=""/> 
<input type="text" class="abc" name="remaks[]" id="inputRemaks" value="" />
</td> 
```

Here is my javascript code:

```
saveDocs: function(e) {
  var that = this
  var d = array;
  $.map($('input.abc, select.abc').serializeArray(), function(n, i) {
   d[n['name']] = n['value'];
  });

  documents = new Documents();
  documents.set('id', $('input[type=hidden]').val());

  documents.save(d, {
    success: function (model, response) {
       alert = new AlertView({type: 'success', message: 'Update success.'});
       alert.render();
    },
    error: function (model, response) {
       alert = new AlertView({type: 'error', message: response});
       alert.render();
    }
  });  
} 
```

# python - ImportError：没有名为 numpy 的模块

> ID：15401411
> 
> 赞同：5
> 
> 时间：2013-03-14T04:47:52.450
> 
> 标签：python, numpy

我正在尝试运行一个需要安装 Numpy 的程序。我以为是，因为如果我尝试`sudo apt-get install python-numpy`它会告诉我

```
sudo apt-get install python-numpy

Reading package lists... Done
Building dependency tree       
Reading state information... Done
python-numpy is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. 
```

但是当我去安装我正在尝试的程序时（在 setup.py 所在的那个程序目录中）我得到：

```
python setup.py install
Traceback (most recent call last):
   File "setup.py", line 20, in <module>
    from weblogolib import __version__
  File "/home/chris/Documents/IS/Bioinformatics-Software/weblogo-3.3/weblogolib/__init__.py", line 108, in <module>
     from numpy import array, asarray, float64, ones, zeros, int32,all,any, shape
ImportError: No module named numpy 
```

当我查看 Python-2.7.3/Lib/site-packages 目录时，里面唯一的东西就是一个 README 文件。那里不应该有 Numpy 的东西（以及其他安装 Python 模块）吗？

我正在使用 Python 2.7 运行 Ubuntu 12.04

使用`dpkg -l python-numpy`我得到：

```
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name           Version        Description
+++-==============-==============-============================================
ii  python-numpy   1:1.6.1-6ubunt Numerical Python adds a fast array facility 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:02:23.880

你没有提到你在哪里运行命令。对于命令，我猜你正在使用`Ubuntu 12.10`.

在 Ubuntu 12.10 中，默认值为 Python3（使用 进行检查`python --version`）。因此，当您运行时`python setup ...`，您正在使用可用的默认 python 运行它。值得一提的是，weblog 3.3 需要 Python 2.5、2.6 或 2.7。

此外，您可以检查 python-numpy 的安装位置（使用 进行检查`dpkg -L python-numpy`）。

我的出手是：

```
$ python2.7 setup.py install 
```

如果你没有安装 python2.7，你应该安装它（很可能，shell 会建议它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-12T09:30:35.587

我通过使用以下命令在我的 Ubuntu 系统中安装 numpy 模块来解决它。

在 debian/ubuntu 上：

```
aptitude install python-numpy 
```

# python - Regex Python findall. Making things nonredundant

> ID：15401415
> 
> 赞同：1
> 
> 时间：2013-03-14T04:48:20.890
> 
> 标签：python, regex, sequence, redundancy

So what I'm trying to do is have a function that finds a sequence 'ATG' in a string and then from there moves along the string in units of 3 until it finds either a 'TAA', 'TAG', or 'TGA' (ATG-xxx-xxx-TAA|TAG|TGA)

To do this, I wrote this line of code (where `fdna` is the input sequence)

```
ORF_sequences = re.findall(r'ATG(?:...)*?(?:TAA|TAG|TGA)',fdna) 
```

I then wanted to add 3 requirements:

1.  Total length must be 30
2.  Two places before the ATG there must be either an A or a G to be detected (A|G-x-x-A-T-G-x-x-x)
3.  The next place after the ATG would have to be a G (A-T-G-G-x-x)

To execute this part, I changed my code to:

```
ORF_sequence_finder = re.findall(r'[AG]..ATGG..(?:...){7,}?(?:TAA|TAG|TGA)',fdna) 
```

**What I want instead of having all of these limits would be to have requirement 1 (greater or equal to 30 characters) and then have EITHER requirement 2 (A|G-x-x-A-T-G-x-x-x) OR requirement 3 (A-T-G-G-x-x) OR both of those.**

*If I split the above line up into two and appended them to a list, they get out of order and have repeats.*

Here are a few examples of the different cases:

```
sequence1 = 'AGCCATGTGGGGGGGGGGGGGGGGGGGGGGGGGGGGGTGAAAA'
sequence2 = 'ATCCATGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGTAG'
sequence3 = 'AGCCATGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGTAG'    
sequence4 = 'ATGGGGTGA' 
```

* * *

```
sequence1 = 'A**G**CC*ATG*TGGGGGGGGGGGGGGGGGGGGGGGGGGGGG*TGA*AAA' 
```

`sequence1` would be accepted by criteria because it follows requirement 2 (A|G-x-x-A-T-G-x-x-x) and its length is >= 30.

```
sequence2 = 'ATCC*ATG***G**GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG*TAG* 
```

`sequence2` would be accepted because it follows requirement 3 (A-T-G-G-x-x) and its length is >=30

```
sequence3 = 'A**G**CC*ATG***G**GGGGGGGGGGGGGGGGGGGGGGGGGGGGG*TGA*AAA' 
```

`sequence3` would be accepted because it fulfills both requirement 2 and 3 while also having >=30 character.

```
sequence4 = 'ATGGGGTGA' 
```

`sequence4` would NOT be accepted because its not >= 30, does not follow requirement 2 or requirement 3.

**So basically, I want it to accept sequences that either follow requirement 2 AND/OR requirement 3 (or both) while satisfying requirement 1.**

*How can I split this up without then adding duplicates (in cases where both occur) and getting out of order?*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:10:37.677

如果可能`[AG]..`应包含在长度要求中，您可以使用：

```
r'(?x) (?: [AG].. ATG | ATG G.. )  (?:...){7,}? (?:TAA|TAG|TGA)' 
```

或者，如果您不想包含`[AG]..`在比赛中，您可以使用环视：

```
r'(?x) ATG (?: (?<=[AG].. ATG) | (?=G) ) (?:...){8,}? (?:TAA|TAG|TGA)' 
```

# mysql - Mysql中的热门项目

> ID：15401419
> 
> 赞同：1
> 
> 时间：2013-03-14T04:48:47.637
> 
> 标签：mysql, sql, select, sum

我有两个表，我想使用它们来确定 stream_post 的“受欢迎程度”。Stream_Post_Comment 和 Stream_Post_Like。

```
stream_post_comment_id  stream_post_id  user_id
1                             1            1        
2                             2            1        
3                             2            4        
4                             2            1    

stream_post_like_id stream_post_id  user_id
1                           1           1   
2                           2           3   
3                           3           2   
4                           3           1 
```

我在概念化会输出如下内容的查询时遇到问题：

```
stream_post_id popularity
      1            1
      2            3 
      3            2 
```

其中 user_id 在给定帖子的流行度得分中仅计一次。例如，如果他们评论并喜欢某个帖子，他们只会算作“1”的人气得分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:52:12.007

试试这个：

```
SELECT
  stream_post_id,
  COUNT(DISTINCT user_id) AS popularity
FROM
(
   SELECT stream_post_id, user_id
   FROM stream_post_comment
   UNION ALL
   SELECT stream_post_id, user_id
   FROM stream_post_like
) AS sub
GROUP BY stream_post_id; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/a5b2c/1)

这会给你：

```
| STREAM_POST_ID | POPULARITY |
-------------------------------
|              1 |          1 |
|              2 |          3 |
|              3 |          2 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:52:17.967

似乎这应该是存储的东西，并在触发评论或喜欢时更新。

您可以编写一个 PHP 脚本来最初计算和填充“流行度”字段，然后使用触发器在每次发生新情况时更新计数 - 这将在其中进行检查以确保它不会增加它如果用户已经有一个喜欢或评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:53:00.920

试试这个查询

```
SELECT 
      stream_post_id, 
      count(user_id) AS 'popularity'
FROM 
       (SELECT 
              stream_post_id, 
              user_id 
       FROM 
              Stream_Post_Comment 
       UNION
       SELECT 
              stream_post_id, 
              user_id 
       FROM 
              Stream_Post_Like) tbl
GROUP BY 
       stream_post_id 
```

希望这可以帮助

# apache2 - 无 Cookie 域 - 另一个端口上的 IP？

> ID：15401425
> 
> 赞同：0
> 
> 时间：2013-03-14T04:49:42.100
> 
> 标签：apache2, ip-address, cookieless

我正在尝试在我的家庭虚拟 Web 服务器上建立一个没有域名，只有一个 IP 地址的[无 Cookie 域。](https://developers.google.com/speed/docs/best-practices/request)

我一直在尝试通过在路由器上打开另一个端口并告诉 Apache 监听它来模拟无 cookie 域。一切都正确加载，但它似乎不是无 cookie（这是有道理的，因为它是相同的域名，只是不同的端口）。

有什么方法可以在没有域名且只有 1 个 IP 地址的虚拟服务器上设置无 Cookie 域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:51:42.313

我个人一直认为，浏览器会将在相同域名或 IP 地址的不同端口上运行的站点视为不相关的站点，例如 cookie 或同源策略，但您的经验似乎表明情况并非如此。

所以我认为你的问题的答案是：不，这是不可能的。我建议研究某种动态 DNS 设置。

# qt - QTWeb上传文件位置

> ID：15401426
> 
> 赞同：3
> 
> 时间：2013-03-14T04:49:43.520
> 
> 标签：qt, qtwebkit

我正在使用 QTWeb 为窗口实现一个 Web 应用程序。在网络视图中，我使用`<input type=file>`将图像从本地磁盘上传到我的网络。我捕捉到此控件的动作上传并修补到我的应用程序。问题是我从 webview 获得的文件路径始终是 C:\fake path...，所以我的应用程序无法将确切的文件复制到目标路径。我想知道无论如何都有得到“真正的”路径。

非常感谢任何帮助。

——团

# python - 鸭子打字和hasattr的使用

> ID：15401428
> 
> 赞同：1
> 
> 时间：2013-03-14T04:49:50.920
> 
> 标签：python, duck-typing, hasattr

我见过很多次这样的事情：

```
def parse(text):
    if hasattr(text, 'read'):
        text = text.read()

    # Parse the text here... 
```

但是如果我传递以下类的实例，它肯定会失败：

```
class X(object):
    def __init__(self):
        self.read = 10 
```

我的问题是：**最pythonic**的处理方式是什么？

我一直在考虑两种主要方法：

```
if hasattr(text, 'read') and callable(text.read):
    text = text.read() 
```

和

```
try:
    text = text.read()
except ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:53:36.343

pythonic 的方式是**假设`text`任何类型都是合适的**。仅在您**知道**在不同时间将是完全不同的事情时才使用`try-except`/`hasattr`**`text`**

 **换句话说，**不要验证**. 仅在您打算使用时使用`if`，`else`并且`try`如果您真的想要在 中进行特殊处理`except`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:16:03.753

pythonic 方式根本*不*检查对象的类型。一方面，该语言足够复杂，以至于您很难确保不包含任何以后无论如何都会失败的对象（您帖子中的明显示例：您不检查函数是否接受 0 个参数，甚至不想想返回类型），而且——更糟糕的是——你很容易错误地排除有效代码。

最好只假设输入值是好的，如果结果不是，稍后会失败。

实际上只有一个例外：假设您对不同类型（例如字符串/列表）有不同的代码路径，在这种情况下，您必须检查类型以决定采用哪条路径。但同样：尝试最适合您的通用检查（即不要检查`isinstance(l, list)`是否`isinstance(l, collections.Iterable)`也可以完成这项工作）。如果后来发现“字符串”不够严格，那么你总是会失败。**

# html - 浏览器调整大小时文本溢出div？

> ID：15401432
> 
> 赞同：1
> 
> 时间：2013-03-14T04:50:08.063
> 
> 标签：html, css, google-chrome

我有一个 div 我想保留我的文本，但是当我缩小窗口时，文本会分解并溢出底部。这似乎只是 chrome 中的一个问题，我希望有人可以帮助我。

```
.about{
    float: left;
    margin-left: 50px;
    margin-bottom: 20px;
    max-height: 226px;
    max-width: 515px;
    font-size: 16px;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
} 
```

HTML：

```
<div class=about>
    <h3>Welcome:</h3>
    <p> All my Text goes here that keeps spilling out.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:06:19.567

这是预期的行为。当你放大时，你实际上是在增加像素大小，即降低分辨率，所以一切看起来都很大，即现在你的元素具有相同的像素宽度和高度，覆盖了更多的空间。当您将缩放级别增加到足够高时，您的内容（即文本）不能容纳在一行中，它会分解到下一行。所以这符合预期。

根据实践，你应该给你的 div 一个宽度和一个字体大小，它可以适应各种分辨率（低或高）。

虽然如果您希望文本保持水平，您可以为其容器提供静态宽度，这样当您放大时，会出现水平滚动，因为 div 是一个块元素。

这些中的任何一个也是如此-

*   不要让您的应用程序兼容无限缩放，它应该适用于给定的范围，最好的测试方法是使其兼容您机器上所有可用的分辨率。
*   为了达到上述目的，请尝试以百分比形式给出宽度，以便在不同的分辨率下不会出现不合适的水平滚动
*   如果宽度总是低于 500 像素，则给它一个静态宽度，因为大多数屏幕都可以容纳该宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:08:29.780

尝试使用 em 调整所有内容的大小。我的意思是，从字体到边框、边距等的所有内容。这将是一个很好的响应式设计。

另外，尝试设置高度。对于初学者，如果您坚持使用像素，请从 600 px 开始，或者尝试 200 ems。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:09:23.287

如果您不想断线，可以使用`white-space`属性设置为`nowrap`

```
.about{

white-space:nowrap; 

} 
```

所以你的文字不会中断

并设置你的最大宽度它也可能是一个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:55:10.253

只在你的类中添加 width:515px 而不是 max-width 在这里你去

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>

    <body>
    <style type="text/css">
        .about{
    float: left;
    margin-left: 50px;
    margin-bottom: 20px;
    max-height: 226px;
    width:515px;
    //max-width: 515px;
    font-size: 16px;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
        }
    </style>
     <div class=about>
        <h3>Welcome:</h3>
        <p> All my Text goes here that keeps spilling out.</p>
        </div>
    </body>
    </html> 
```

# listview - VB 6 列表视图 substring_index

> ID：15401434
> 
> 赞同：1
> 
> 时间：2013-03-14T04:50:33.723
> 
> 标签：listview, vb6, substring

我在 vb6 中有一个包含列 ID 的列表视图，ID 的值是 PID-id，其中 id 等于我的数据库中的 id。前任。PID-56，PID-57。我想要的是当我得到列 id 的值时，我的 listview 中的第一个值，比如说 PID-56，我只想要等于 56 的 ID 部分。

前任。

```
 value=.text --> PID-56
 newvalue=56 --> PID- is not included so 56 now can be a integer. 
```

考虑到我在 vb6 中使用 LIstview，如何删除“PID-”。

我应该使用什么功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:16:08.930

如果您知道字符串*始终*以开头`PID-`并且该格式永远不会*改变*，那么您可以使用基本字符串操作函数之一。在这种情况下，您可能希望将`Right`函数与`Len`函数配对。该`Len`函数将返回字符串的长度（它包含的字符总数），该`Right`函数将返回指定长度的子字符串，从整个字符串的右侧开始。

最后，您需要使用标准值转换之一将该字符串值转换为数值。在这种情况下，自然需要`CInt`操作员。

例如：

```
Private Function ExtractIDFromString(ByRef str As String) As Integer
    Const prefixLength As Long = 4  ' length of the "PID-" prefix

    Dim strID As String
    strID = Right$(str, Len(str) - prefixLength)

    Return CInt(strID)
End Function 
```

# list - Python Dijkstra：从未访问的错误中删除当前节点：list.remove（x）：x不在列表中

> ID：15401443
> 
> 赞同：0
> 
> 时间：2013-03-14T04:51:36.923
> 
> 标签：list, dijkstra, remove-method

我希望你能帮我解决一些困扰我的事情。我真的试图自己解决这个问题，但几个小时后，我觉得完全卡住了。

所以，我是 python（我的第二语言）的新手，我正在编写一个 Dijkstra 算法的实现，作为我本科研究的一部分。

出于某种奇怪的原因，当我尝试使用 Unvisited.remove(Current) 从未访问集中删除当前节点时，出现以下错误：

```
Traceback (most recent call last):
Current Node: 
  File "H:\DijkstraShortestPath\src\Main.py", line 92, in <module>
    Unvisited.remove(Current)
ValueError: list.remove(x): x not in list
1
Unvisited Nodes: 
['1', '2', '3', '4', '5', '6', '7', '8']
Current Node: 
8
Unvisited Nodes: 
['2', '3', '4', '5', '6', '7', '8'] 
```

请注意，Current 是从列表中提取的值，而 Unvisited 是列表。

在浏览了这里的几个线程并以其他方式搜索互联网之后，我决定发布我的整个代码以避免任何混淆。当嵌套在循环中时，我注意到 list.remove(x) 存在某种问题（我的也嵌套在 for 循环中），但我不明白所有技术术语下面发生了什么。

有人可以向我解释为什么这是一个问题吗？我能做些什么来修复它？

```
#Main File
#Excecutes the Dijkstra Shortest Path Algorithm

#import Create_Network #Generates Network with 5 OD pairs as replications

testfile = "\DijkstraShortestPath\Backup And Tests\TEST"
Arcfile = testfile + "\Arcs.txt"
ODfile = testfile + "\ODpairs.txt"
Nodefile = testfile + "\Nodes.txt"

#INITIALIZE ALGORITHM
#Populate label, visited, and unvisited sets
#For initial conditions, label is infinite for all nodes except origin
#For initial conditions, all nodes are unvisited (including origin)

LabelArray = [] #Stores the distance labels for each of the nodes; has length
                #equal to the number of nodes in the network
Unvisited = [] #Stores unvisited nodes, by NodeID
Visited = [] #Stores visited nodes, by NodeID
ODArray = [] #Stores Origin and Destination Pairs

#Get the origin and destination pair
with open(ODfile,'r') as f:
    for line in f:
        ODArray = line.strip().split(",")
Origin = ODArray[0]
Destination = ODArray[1]
#Set the first current node as the origin
Current = Origin

#Generate Unvisited nodes and Labels (all infinite, except origin)
with open(Nodefile,'r') as f:
    for line in f:
        LabelArray.append(float("inf")) #make all node distance labels infinite
        NodeID = line.strip().split(",")[0]
        Unvisited.append(NodeID) #Add NodeID to Unvisited

#Set distance for origin to zero
LabelArray[int(ODArray[0])-1] = float(0) #float(0) to match float("inf")

#Count number of lines and items in each line
#i.e., find out how many nodes and params for storage in ArcParams list
numarcs = 0
with open(Arcfile,'r') as f:
    for line in f:
        if line != '\n':
            numarcs = numarcs + 1 #integer
            numparams = len(line.strip().split(",")) #integer

#Store arc origin, destination, length to ArcParams list
ArcParams = [[0 for i in range(numparams)] for i in range(numarcs)]

with open(Arcfile,'r') as f:

    for line in f:
        params = line.strip().split(",")
        ArcParams[int(params[0])-1][0] = params[0]
        ArcParams[int(params[0])-1][1] = params[1]
        ArcParams[int(params[0])-1][2] = params[2]
        ArcParams[int(params[0])-1][3] = float(params[3])

#END INITIALIZATION

#BEGIN DIJKSTRA SHORTEST PATH, LOOPING OVER NODES IN NETWORK

for node in Unvisited:

    #Find the nodes adjacent to Current AND in Unvisited
    Adjacent = []

    for i in range(numarcs):
        if ArcParams[i][1] == Current: #search for origin = current
            if ArcParams[i][1] in Unvisited: #checks if nodes found are in Unvisited
                if ArcParams[i][1] != ArcParams[i][2]: #excludes Current as adjacent
                    Adjacent.append(ArcParams[i][2]) #Add node to Adjacent

    #For each adjacent node, update distance labels

    for node in Adjacent:
        temp = float(LabelArray[int(Current)-1]) + float(ArcParams[int(node)][3])

        if temp < LabelArray[int(node)-1]:
            LabelArray[int(node)-1] = temp

    #Add current node to Visited set
    print "Current Node: "
    print Current
    print "Unvisited Nodes: "
    print Unvisited

    Visited.append(Current)
    Unvisited.remove(Current)

    #Check for end-conditions; has destination entered Visited?
    #Or is the smallest tentative distance infinite? Stop both ways.

    if Destination in Visited:
        if LabelArray[int(Destination)-1] == inf:
            print "There is no feasible path"
        print "Shortest distance found!"
        print "Distance is: " + str(LabelArray[Destination-1])

    #Select the Unvisited node marked with smallest tentative distance
    MinDist = min(LabelArray[1:])
    MinNode = LabelArray.index(MinDist) + 1

    #Clear existing Current, set new Current
    Current = MinNode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:38:07.470

您的代码基本上是这样做的：

```
for item in container:
    # stuff
    container.remove(item)
    # more stuff 
```

在迭代容器时修改容器通常会破坏您的代码。Java 标准库有一个特定的异常（ConcurrentModificationException），它通常会让你的程序摆脱这类问题，但不幸的是 Python 没有；你的循环只会做错事。

这里的情况有点像老笑话，病人：“我这样做的时候很痛。” 医生：“不要那样做。”

尝试这样的事情：

```
container = [6, 7, 8]

while len(container) > 0:
    item = container.pop()
    # do something useful with item 
```

这首先处理最后使用的项目。例如，第一次迭代会给你 8，然后是 7，然后是 6。如果你喜欢从左到右处理，你应该使用 collections.deque 类：

```
import collections

container = collections.deque([6, 7, 8])

while len(container) > 0:
    item = container.popleft()
    # do something useful with item 
```

此外，还有一些关于您的代码的风格挑剔：

*   您的代码违反了 PEP 8 编码风格指南。您的变量应使用 words_separated_by_underscores 命名。只有当它们是类名时，它们才应该以大写字母开头。请参阅[http://www.python.org/dev/peps/pep-0008/#global-variable-names](http://www.python.org/dev/peps/pep-0008/#global-variable-names)。（我建议的类 deque 也违反了本指南，但我认为这是因为它是在 Python 的早期阶段创建的，在 PEP 8 被广泛接受之前，并且由于向后兼容性而无法更改。为什么它是在 Py3K 中没有改变，我不知道。）

*   您对反斜杠的使用也值得怀疑。对于包含反斜杠的字符串，您应该使用 Python 的原始字符串功能，如下所示：

    testfile = r"c:\新文件夹"

替代方法包括使用正斜杠（Windows 文件系统使用它们）、使用 os.path.join 以实现跨平台兼容性、在命令行参数中接受文件名或使用双反斜杠。

# mysql - 组合两个快速查询会导致查询极慢

> ID：15401444
> 
> 赞同：0
> 
> 时间：2013-03-14T04:51:40.383
> 
> 标签：mysql

查询一：

```
SELECT  a.name,a.id
FROM name_list AS a 
WHERE   a.created_time BETWEEN "2013-03-14 00:00:00" AND "2013-03-14 23:59:59" 
```

查询 2：

```
SELECT address_nr
FROM address_list
WHERE user_id="1117770"
LIMIT 1 
```

要执行查询 1 和 2，我只需要 0.003 秒。但是当我将它们组合起来并将第二个查询作为子查询时，如下所示：

```
SELECT  a.name,a.id,(SELECT address_nr FROM address_list WHERE user_id=a.id LIMIT 1) as 'address'
    FROM name_list AS a 
    WHERE   a.created_time BETWEEN "2013-03-14 00:00:00" AND "2013-03-14 23:59:59" 
```

我需要 1 秒来执行它。当我检索数千个数据时，它需要数千秒。

有人可以指导我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:56:37.200

尝试连接，而不是使用子查询。这应该明显更快：

```
SELECT a.name,a.id,b.address_nr address
    FROM name_list a
    LEFT JOIN address_list b ON a.id=b.user_id
    WHERE a.created_time BETWEEN "2013-03-14 00:00:00" AND "2013-03-14 23:59:59" 
```

您的子查询花费这么长时间的原因是因为它不仅运行两个查询，它还运行一个主查询和主查询结果集中每一行的子查询。如果表 a 有 1000 行，则您正在运行 1001 个查询。

# php - 将 youtube url 更改为在 php 中嵌入 url

> ID：15401445
> 
> 赞同：4
> 
> 时间：2013-03-14T04:51:40.900
> 
> 标签：php, regex, youtube, preg-replace

我找到了这段代码（[交换所有 youtube url 以通过 preg_replace() 嵌入](https://stackoverflow.com/questions/10435645/swap-all-youtube-urls-to-embed-via-preg-replace)）来交换 youtube url（[http://www.youtube.com/watch?v=CfDQ92vOfdc](http://www.youtube.com/watch?v=CfDQ92vOfdc)或[http://www.youtube.com/v/ CfDQ92vOfdc](http://www.youtube.com/v/CfDQ92vOfdc)）到 youtube 嵌入网址（[http://www.youtube.com/embed/CfDQ92vOfdc](http://www.youtube.com/embed/CfDQ92vOfdc)），但它似乎没有工作？有任何想法吗？我对正则表达式了解不多。

这是代码：

```
$string     = 'http://www.youtube.com/watch?v=CfDQ92vOfdc';
$search     = '#<a (?:.*?)href=["\\\']http[s]?:\/\/(?:[^\.]+\.)*youtube\.com\/(?:v\/|watch\?(?:.*?\&)?v=|embed\/)([\w\-\_]+)["\\\']#ixs';
$replace    = 'http://www.youtube.com/embed/$2';
$url        = preg_replace($search,$replace,$string); 
```

但它仍然显示为：

```
http://www.youtube.com/watch?v=CfDQ92vOfdc 
```

代替：

```
http://www.youtube.com/embed/CfDQ92vOfdc 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T05:12:13.507

一个问题是您的表达式期望地址周围有 a-href 标记。另一个问题是您的 $replace 字符串使用了不会解析 $2 的单引号。

这个更简单的表达式应该可以工作：

```
$string     = 'http://www.youtube.com/watch?v=CfDQ92vOfdc';
$search     = '/youtube\.com\/watch\?v=([a-zA-Z0-9]+)/smi';
$replace    = "youtube.com/embed/$1";    
$url = preg_replace($search,$replace,$string);
echo $url; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T05:04:55.597

**要么改变**

`$string = 'http://www.youtube.com/watch?v=CfDQ92vOfdc';`

到

`$string = '<a href="http://www.youtube.com/watch?v=CfDQ92vOfdc" ></a>';`

**或者**

```
$search     = '#<a (?:.*?)href=["\\\']http[s]?:\/\/(?:[^\.]+\.)*youtube\.com\/(?:v\/|watch\?(?:.*?\&)?v=|embed\/)([\w\-\_]+)["\\\']#ixs'; 
```

到

```
$search     = '#(.*?)(?:href="https?://)?(?:www\.)?(?:youtu\.be/|youtube\.com(?:/embed/|/v/|/watch?.*?v=))([\w\-]{10,12}).*#x'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T12:06:38.090

如果有人仍在寻找更好的直接解决方案，那么我只是在玩你的代码，直到它给了我一个简单的解决方案。

```
$string     = $content; 
```

`$search = '/www.youtube\.com\/watch\?v=([a-zA-Z0-9]+)/smi';`

`$replace = "<iframe width='560' height='315' src='https://youtube.com/embed/$1' frameborder='0' allowfullscreen></iframe> ";
$content = preg_replace($search,$replace,$string);`

注意：要选择您希望如何处理链接，只需编辑该`$search`部分，如果您将从 www.youtube.com 进行处理，它将是 `$search = '/www.youtube\.com\/watch\?v=([a-zA-Z0-9]+)/smi';`

否则，如果您希望它只处理 youtube.com 链接，只需删除`www. $search = '/youtube\.com\/watch\?v=([a-zA-Z0-9]+)/smi';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-30T20:01:40.860

这是我写的一个函数，你回显了结果：

```
function youtube_url_to_embed($youtube_url) {
    $search = '/youtube\.com\/watch\?v=([a-zA-Z0-9]+)/smi';
    $replace = "youtube.com/embed/$1";
    $embed_url = preg_replace($search,$replace,$youtube_url);
    return $embed_url;
} 
```

# facebook-graph-api - 如何使用 javascript sdk 代表用户创建 facebook 事件

> ID：15401446
> 
> 赞同：0
> 
> 时间：2013-03-14T04:51:48.753
> 
> 标签：facebook-graph-api, user-permissions

我试图将分散在文档中的信息和不同的代码块拼凑起来，说明如何实现这一点，因为没有很好的例子。我知道我必须首先获得使用此代码获得的 create_event 扩展权限：

```
FB.login(function(response) {
   // handle the response
 }, {scope: 'create_event'}) 
```

;

我知道我还必须使用 create_event 权限和必要的参数向“PROFILE_ID/events”发出 HTTP POST 请求。我的问题是： 1.我不知道一旦获得 create_event 权限后如何收集。如果我运行上面的代码，会打开一个对话框，询问权限，但一旦我接受，就会出现一个空白页。2\. 如果一切都按照权限请求和发布请求的方式进行，我的应用程序是否会看到一个创建事件页面，就像我从我的个人资料中自己创建一个事件一样？从应用程序中可以看到什么界面？我可以将用户从我的应用程序直接带到 facebook 创建事件页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:48:44.163

> 1.  一旦获得 create_event 权限，我不知道如何收集。如果我运行上面的代码，会打开一个对话框，询问权限，但一旦我接受，就会出现一个空白页。

这就是它的工作原理。成功登录后要向用户显示的所有内容，都必须自己实现。

> 1.  如果一切都按照权限请求和发布请求的方式进行，我的应用程序是否会像我从个人资料中自己创建事件一样看到创建事件页面？从应用程序中可以看到什么界面？

根本没有“界面”——由你来构建它。

> 我可以将用户从我的应用程序直接带到 facebook 创建事件页面吗？

用户可以自己去。为什么需要你的应用程序呢？

# android - Android中的解析错误

> ID：15401450
> 
> 赞同：1
> 
> 时间：2013-03-14T04:52:07.423
> 
> 标签：android, integer, android-activity

我将一组数字存储为字符串（我从共享首选项中获取字符串），然后尝试解析它。但是当我使用 parseInt 时，我的应用程序崩溃了。活动 Second 由 Main 类调用。

```
 public class Second extends Activity {

public int[] x = new int[50];
public int[] y = new int[50];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    SharedPreferences data= getSharedPreferences("data",0);
    SharedPreferences.Editor editor= data.edit();

    StringBuilder str = new StringBuilder();
    str.append(data.getString("val", "0")).append(",").append(getIntent().getExtras().getString("thetext"));
    String end = str.toString();
    editor.putString("val", end);
    editor.commit();

    //EditText et1= (EditText) findViewById(R.id.editText2);

    //et1.
    String savedString = data.getString("val", "0");
    savedString.replaceAll("\\s","");
    String[] st = savedString.split(",");
    int i;
    for(i=0;i<st.length;i++){
        st[i].trim();
        Log.d("Debug" , "st["+i+"] = "+st[i]);
        x[i] = Integer.valueOf(st[i]);
       y[i]=i;}
}

public void lineGraphHandler (View view)
{
    LineGraph line = new LineGraph();
    Intent lineIntent = line.getIntent(this);
    startActivity(lineIntent);
} 
```

}

它哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:54:44.653

在这些之间添加一条线

```
 st[i].replaceAll("\\s",""); 
```

* * *

```
 Log.d("Debug" , "st["+i+"] = "+st[i]) 
```

* * *

```
 x[i] = Integer.parseInt(st[i]); 
```

看看那是不是一个可转换的字符串，或者有一些不小心插入的字母不能转换为int？

# javascript - 为什么jQuery load() 方法带有多个精灵（即一个布尔值）？

> ID：15401451
> 
> 赞同：0
> 
> 时间：2013-03-14T04:52:07.640
> 
> 标签：javascript, jquery, sprite

我正在开发一个需要加载两个精灵图像的程序。我现在使用不同的实现，但我首先有：

```
$(sprite1 && sprite2).load(function() {
    // code to run on load
}); 
```

我意识到我实际上是在一个 bool 上调用 load()，理论上我认为它不应该工作 - 但它确实有效，或者至少看起来有效。

关于为什么以这种方式使用 load() 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:54:05.577

根据文档。 [jQuery 加载（）](http://api.jquery.com/load/)

> 如果选择器没有匹配任何元素（在这种情况下，如果文档不包含 id="result" 的元素），则不会发送 Ajax 请求。

1.  所以你的 load 方法不会调用 ajax 请求。
2.  .load() 将匹配元素的 HTML 内容设置为返回的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:55:55.250

`[**`.load()`**](http://api.jquery.com/load/)`

**描述：**从服务器加载数据并将返回的 HTML 放入匹配的元素中。

# crystal-reports - 水晶报表无法在 iis 管理器上运行

> ID：15401456
> 
> 赞同：0
> 
> 时间：2013-03-14T04:52:36.030
> 
> 标签：crystal-reports, report

Crystal 报表无法在 iis 上运行，它在开发中运行良好。`deploying`打开时`IIS`显示错误

```
"Failed to open the connection. Failed to open the connection. 
CrystalReport3 {42D76915-6C05-4970-A03D-B3ED787AE0FC}.rpt". 
```

什么是解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T12:22:18.240

我得到了解决方案。我刚刚将用户 DNS 更改为服务器 DSN。它现在工作。谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:50:14.153

你问的是你自己的电脑还是其他电脑。如果是其他电脑，则可能会出现此错误。1.这可能是你的远程sqlserver没有连接 2.你的报告版本可能不是其他电脑的正确版本。

检查这个。 [http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=11696](http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=11696) [http://forums.asp.net/t/997655.aspx/1](http://forums.asp.net/t/997655.aspx/1)

# javascript - Javascript正则表达式匹配以数字结尾的字符串不一致

> ID：15401457
> 
> 赞同：4
> 
> 时间：2013-03-14T04:52:46.747
> 
> 标签：javascript, jquery, regex, string, numbers

我有以下正则表达式模式，它们与URL 列表中以数字结尾的所有**“行为”相匹配。**

正则表达式模式`/\/ch(\d+)\/act(\d+)/gi`

Javascript代码

```
pageSrc[1] = "../ch01/index.html";
pageSrc[2] = "../ch01/act01/1.html";
pageSrc[3] = "../ch01/act01/2.html";
pageSrc[4] = "../ch01/act02/1.html";
pageSrc[5] = "../ch01/act02/2.html";
pageSrc[6] = "../ch01/actx/1.html";

var pattern = /\/ch(\d+)\/act(\d+)/gi;
for(var i=0; i<pageSrc.length; ++i){
  var hasAct = pattern.test(pageSrc[i]);
  console.log(hasAct);
} 
```

预期结果和实际结果

```
|   String   | Expected Result |   Actual Result  |
| pageSrc[1] |       false     |     false        |
| pageSrc[2] |       true      |     true         |
| pageSrc[3] |       true      |     *FALSE       |
| pageSrc[4] |       true      |     true         |
| pageSrc[5] |       true      |     *FALSE       |
| pageSrc[6] |       false     |     false        | 
```

不知道为什么`pageSrc[3]`不回来`true`。我在 gskinner.com 上使用了 regEx 测试器，它运行良好，这是链接[http://gskinner.com/RegExr/?344ap](http://gskinner.com/RegExr/?344ap)

有人可以帮我看看吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T04:55:38.527

您正在使用`/g`. 删除该标志以使其工作。

该`g`标志使正则表达式从`pattern.lastIndex`（上一个匹配结束的索引）开始匹配，直到失败，然后从 0 开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T04:56:54.760

删除`g`标志。从[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)[中：`RegExp.test`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)

> 与`exec`（或与其结合）一样，`test`在同一个全局正则表达式实例上多次调用将超过前一个匹配项。

重用这样的模式时，您不希望进行全局搜索。

```
> var pageSrc = [];
> pageSrc[1] = "../ch01/index.html";
  pageSrc[2] = "../ch01/act01/1.html";
  pageSrc[3] = "../ch01/act01/2.html";
  pageSrc[4] = "../ch01/act02/1.html";
  pageSrc[5] = "../ch01/act02/2.html";
  pageSrc[6] = "../ch01/actx/1.html";

  var pattern = /\/ch(\d+)\/act(\d+)/i;
  for(var i=0; i<pageSrc.length; ++i){
    var hasAct = pattern.test(pageSrc[i]);
    console.log(i, hasAct);
  }
  0 false
  1 false
  2 true
  3 true
  4 true
  5 true
  6 false 
```

# javascript - （并非如此）聪明的密钥导致 Node JS 中的 SHA512 Hmac 出现问题

> ID：15401459
> 
> 赞同：8
> 
> 时间：2013-03-14T04:53:00.013
> 
> 标签：javascript, node.js, hmac, sha512

这是一个奇怪的问题，但我已经为此工作了几个小时并且没有取得太大进展。我希望这里有人可以提供建议...

我正在将脚本从 php 移植到节点。php 脚本使用了这个函数：

```
hash_hmac('sha512', $text, $key); 
```

我已经使用加密模块在节点中复制了这个：

```
var hash = crypto.createHmac( "sha512", key );
hash.update( text );
return hash.digest( "hex" ); 
```

我已经验证了这些函数在给定相同的文本和密钥时会产生相同的哈希值。

除了...

在 php 中用作键的字符串看起来类似于：（不要问）

```
define("SITE_KEY", "
                                           __
     ,                                   ,' e`---o
    ((                                  (  | ___,'
     \\~-------------------------------' \_;/
     (                                     /
     /) ._______________________________.  )
    (( (                               (( ( 
     ``-'                               ``-'

"); 
```

我试图在 Javascript 中重现它，如下所示：

```
var key = "\
                                           __\
     ,                                   ,' e`---o\
    ((                                  (  | ___,'\
     \\\\~-------------------------------' \\_;/\
     (                                     /\
     /) ._______________________________.  )\
    (( (                               (( ( \
     ``-'                               ``-'\
\
"; 
```

但它不起作用。（我认为它必须与换行符有关）。

如下所示用“\r\n”或“\n”替换换行符也不起作用：

```
var key = "\r\n                                           __\r\n     ,                                   ,' e`---o\r\n    ((                                  (  | ___,'\r\n     \\\\~-------------------------------' \\_;/\r\n     (                                     /\r\n     /) ._______________________________.  )\r\n    (( (                               (( ( \r\n     ``-'                               ``-'\r\n\r\n"; 
```

有关如何解决此问题的建议？（不幸的是，摆脱狗不是一种选择。）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:49:23.950

为什么不存储 BASE64 编码的字符串？这样您就不必担心换行符、空格等类似问题。

看到您的 php 代码（显然）正确存储了密钥，请尝试以下脚本：

```
<?
$doggy_key = ....;
echo base64_encode($doggy_key); 
```

从命令行运行它，复制编码的密钥，然后在你的 javascript 中使用它。例如，解码 base64 字符串是一个简单的问题； [客户端 Javascript 中的 Base64 编码和解码](https://stackoverflow.com/questions/2820249/base64-encoding-and-decoding-in-client-side-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:42:17.257

据我所知，原始字符串中没有换行符。最后的反斜杠告诉 PHP 下一行只是上一行的延续。为了测试我是否正确，您可以让 PHP 打印出字符串并查看它是否有换行符。但我怀疑你可以用 JavaScript 用一个长的或连接的字符串来写这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T04:57:36.123

`\n`尝试用JS 版本中的（并且没有换行符）替换 PHP 版本中的所有换行符。如果这不起作用，请尝试将它们全部替换为`\r\n`- 我敢打赌 PHP 不会在 windows 格式的源代码中翻译多行文字:)

# postgresql - 将 postgres_ext（或 Rails 4）数组与关联相结合

> ID：15401464
> 
> 赞同：6
> 
> 时间：2013-03-14T04:53:16.247
> 
> 标签：postgresql, rails-activerecord, ruby-on-rails-4, postgres-ext

我正在尝试使用每个项目上的类型字段在标签（`tags`表中）和项目（表中）之间建立多对多关系。`items``integer[]`

我知道 Rails 4（和通过 postgres_ext 的 Rails 3）通过`:array => true`参数支持 Postgres 的数组功能，但我不知道如何将它们与 Active Record 关联结合起来。

`has_many`有这个选项吗？有这个宝石吗？我应该放弃并建立一种`has_many :through`关系（尽管我期望的关系数量可能无法管理）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-09T17:00:41.613

在这一点上，没有办法在 Rails 中使用与数组的关系。但是，使用选定的答案，您将遇到 N+1 选择问题。假设你得到你的帖子，然后在每个帖子上使用类中定义的“标签”方法为其添加标签。对于您调用标签的每个帖子，您将招致另一个数据库命中。

希望这在未来会有所改变，我们可以摆脱连接表（特别是考虑到 Postgres 9.4 将包括对数组中外键的支持）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T12:10:18.010

你真正需要做的就是

```
def tags
  Tag.where(id: tag_ids)
end

def add_tag(tag)
  self.tag_ids += [tag.id] unless tag_ids.include?(tag.id)
end 
```

至少我现在是这样做的。我用哈希（hstore）和权限做了一些很酷的东西。处理标签的一种方法是通过创建 has_many 并将标签保存在字符串数组列中，因为它们是为了方便和性能而添加的（不必为了获取名称而查询 2 个相关表）。我不一定要使用活动记录来对数据库做一些很酷的事情。

# excel - Excel：名称管理器中的偏移公式

> ID：15401472
> 
> 赞同：0
> 
> 时间：2013-03-14T04:54:05.527
> 
> 标签：excel, excel-formula, excel-2010

我为常用公式定义了名称，如下所示：

> 指针 =DataSheet!$A$1
> sh1X0 =OFFSET(DataSheet!C7,0,0,DataSheet!pointer+1,1)
> sh1X0 =OFFSET(DataSheet!F7,0,0,DataSheet!pointer+1,1)

![输入的名称](../Images/75aadc3a54272341d8005162d181e563.png)

我关闭名称管理器。
我正在使用它们制作图表系列。一切正常。
到目前为止，活动单元格是 B4。
我选择了一个不同的单元格，比如 B5，所有偏移公式都相对于所选范围发生了变化（损坏）。上述公式变为：

> sh1X0 =OFFSET(DataSheet!C8,0,0,DataSheet!pointer+1,1)
> sh1X0 =OFFSET(DataSheet!F8,0,0,DataSheet!pointer+1,1)

如果 C5 是选择，那么

> sh1X0 =OFFSET(DataSheet!D8,0,0,DataSheet!pointer+1,1)
> sh1X0 =OFFSET(DataSheet!G8,0,0,DataSheet!pointer+1,1)

![损坏的名称](../Images/c60058ed9e22ca46c70363d4db61e8b4.png)

为什么公式会发生变化？
如何使它们独立于细胞的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:51:19.137

正如你所说，你的公式是相对的。您需要使用美元符号使它们成为绝对值，例如：

sh1X0`=OFFSET(DataSheet!$C$7,0,0,DataSheet!pointer+1,1)`

请注意，您可以选择 C7 部分并点击`F4`几次以正确显示美元符号。

此[Jan Karel Pieterse 页面](http://www.jkp-ads.com/articles/ExcelNames03.asp)对已定义名称中的绝对和相对引用进行了解释。

# javascript - 使用背景图像保存画布

> ID：15401476
> 
> 赞同：1
> 
> 时间：2013-03-14T04:54:19.610
> 
> 标签：javascript, html, canvas, html5-canvas

我有一个带有背景图像的 HTML5 画布元素。允许用户在图像上绘图，然后需要将完整的画布元素与背景一起保存。我使用下面的代码来保存部分，但它只获取画布绘图而不是背景图像。我还能做些什么来获取背景图片？

```
var canvas = document.getElementById('your_canvas');
             var context = canvas.getContext('2d');
             // save canvas image as data url (png format by default)
             var dataURL = canvas.toDataURL();

             // set canvasImg image src to dataURL
             // so it can be saved as an image
             document.getElementById('canvasImg').src = dataURL; 
```

更新：

我的 HTML

```
<div name='coords1' class='canvas-area input-xxlarge' disabled
placeholder='Shape Coordinates' id='imgDiv'
data-image-url='BackGround.jpg'></div> 
```

我的 HTML 页面中有上述 div。然后我动态创建画布并在其上绘制。代码有点长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:53:10.550

不要在 上使用图像，在..`div`上绘制图像`canvas`

使用以下代码在画布上绘制图像，

```
var img=new Image();
img.src=/*image src*/;
var ctx=canvas.getContext("2d");
img.onload=function()
{
    ctx.drawImage(img,x,y,width,height);
} 
```

在回调完成图像绘制后`img.onload`，允许用户在画布上绘制......

现在保存画布绘图....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:04:02.267

**获取带有背景图像的画布**

```
context.globalCompositeOperation="destination-over";
drawImage(yourBackgroundImage,0,0); 
```

# javascript - angular.js 和 d3.js - 几何示例

> ID：15401482
> 
> 赞同：4
> 
> 时间：2013-03-14T04:55:29.527
> 
> 标签：javascript, angularjs, geometry, d3.js

我用（见[jsfiddle ）画了一个](https://jsfiddle.net/mrcactu5/fRgtF/2/)[Limaçon](http://mathworld.wolfram.com/Limacon.html)。当您沿 x 轴移动该点时（我称此变量为形状会发生一些变化。`d3.js``px`

[![](../Images/db71e6d4a85a61bf3c8c7df5c198cf10.png)](https://i.stack.imgur.com/Xz8OG.gif)
[（来自 MathWorld - Wolfram 网络资源：[wolfram.com](http://mathworld.wolfram.com/images/eps-gif/LimaconEnvelope_800.gif)）]

我想复制一个 angular.js 示例（[jsfiddle](https://jsfiddle.net/martinwolf/Jpk7x/3/)，使用滑块更改 div 的 RGB 颜色）；滑块与`px`我的 d3.js 代码中的变量绑定。

如何修改我的 jsfiddle 以添加此用户交互？是这样`onclick()`吗？

我想移动滑块并更改脚本中的变量“px”，它水平移动一个点。然后我必须重新计算一堆圆的半径。

* * *

我知道这里有一点：[AngularJS 应用程序中的 D3](https://stackoverflow.com/questions/11141528/d3-within-an-angularjs-app)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:43:40.077

您可以在此处查看工作示例：http: [//jsfiddle.net/fRgtF/3/](http://jsfiddle.net/fRgtF/3/) 基本上您需要在控制器内针对范围执行所有操作：

```
function Controller($scope){
    $scope.$watch("px",function(){
        d3.select('svg').remove();
        var limacon = d3.select(".limacon").append("svg");

x0 = 300;
y0 = 250;

r = 50;
px = $scope.px;

limacon.append("circle")
    .attr("cx", x0)
    .attr("cy", y0)
    .attr("r", r)
    .attr("stroke", "#FFCC66")
    .attr("stroke-width", 2)
    .attr("fill", "none");

for (var k = 0; k < 20; k++) {
    limacon.append("circle")
        .attr("cx", x0 + r * Math.cos(2 * Math.PI * 0.05 * k))
        .attr("cy", y0 + r * Math.sin(2 * Math.PI * 0.05 * k))
        .attr("r", r * Math.sqrt(Math.sin(2 * Math.PI * 0.05 * k) * Math.sin(2 * Math.PI * 0.05 * k) + (Math.cos(2 * Math.PI * 0.05 * k) - px / r) * (Math.cos(2 * Math.PI * 0.05 * k) - px / r)))
        .attr("stroke", "steelblue")
        .attr("stroke-width", 1)
        .attr("fill", "none");
}

limacon.append("circle")
    .attr("cx", x0 + px)
    .attr("cy", y0)
    .attr("r", 1)
    .attr("stroke", "#66CC66")
    .attr("stroke-width", 2)
    .attr("fill", "#66CC66");
    });

} 
```

您的滑块正在修改范围上的 px 值，这就是我们使用的值。我们在示波器上观察 px 值，并根据新的 px 值重做 d3 工作。

# unit-testing - Play Framework 2.0，更新日期，Ebeam 导致 Data has changed 错误

> ID：15401485
> 
> 赞同：1
> 
> 时间：2013-03-14T04:55:38.633
> 
> 标签：unit-testing, date, playframework, playframework-2.0, ebean

我正在尝试对我的 Play 2.0 应用程序进行单元测试。

我有一个名为耐心的课程，下面是我的课程的简化版本：

```
public class Patient extends Model{
    @Id
    public Long id;

    @Required
    public String gender;

    public Date updatedOn;

    public void update(Object o){
        this.updatedOn = new Date();
        super.update(0);
    }
} 
```

如果我在浏览器中更新 Patient，它工作得非常好，但是当我编写单元测试并执行

```
 Patient patient = new Patient();        
    patient.gender = "M"
    patient.save();
    assertThat(patient.id).isNotNull();
    Long id = patient.id;

    patient = Patient.find.byId(id);
    assertThat(patient).isNotNull();
    assertThat(patient.gender).isEqualTo("M");

    patient.gender = "F";
    assertThat(patient.gender).isEqualTo("F");

    patient.update(patient.id); 
```

它会导致错误：

> [错误] 测试模型。PatientModelTest.updatePatient 失败：数据已更改。更新 [0] 行 sql[更新患者集 updated_on=? 哪里id=？和 date_of_birth=? 和性别=？和 updated_on=?] bind[null] [error] at com.avaje.ebeaninternal.server.persist.dml.DmlHandler.checkRowCount(DmlHandler.java:103) [error] at com.avaje.ebeaninternal.server.persist.dml .UpdateHandler.execute(UpdateHandler.java:88) [error] at com.avaje.ebeaninternal.server.persist.dml.DmlBeanPersister.execute(DmlBeanPersister.java:86) [error] at com.avaje.ebeaninternal.server.persist .dml.DmlBeanPersister.update(DmlBeanPersister.java:66) [error] at com.avaje.ebeaninternal.server.persist.DefaultPersistExecute.executeUpdateBean(DefaultPersistExecute.java:91) [error] at com.avaje.ebeaninternal.server.core .PersistRequestBean。

这让我很头疼...请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:09:16.890

找到了解决方案。使用像 object.setVariable(newVariable) 这样的 getter 和 setter 来更新变量，而不是像 object.variable = newVariable 这样直接从对象调用。Play 将自动为所有实体生成 getter 和 setter（尽管在您的源代码中没有看到）。

# twitter - Twitter 流 API 不跟踪 URL

> ID：15401487
> 
> 赞同：2
> 
> 时间：2013-03-14T04:55:53.933
> 
> 标签：twitter

已通过[https://dev.twitter.com/docs/streaming-apis/parameters](https://dev.twitter.com/docs/streaming-apis/parameters)

根据文档，它应该能够跟踪诸如 example.com/foobarbaz 之类的 URL，但我似乎无法跟踪此类 URL。当我推特这个 URL 并使用 Streaming API 跟踪它时，它只是没有返回任何结果。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-30T14:58:20.257

很晚了，但我在谷歌上找到了这个，所以这可能对某人有帮助......

对此有几个答案。主要的答案是 Twitter 对待 URL 的方式与其他任何东西都不同。

首先，确保您不包含“www”。

> Twitter 目前在执行匹配之前将域“www.example.com”规范化为“example.com”，因此从 URL 跟踪术语中省略“www”。

对我来说，将轨道参数发送为“example.com/foobarz”，然后发推文“测试，请忽略：[http](http://example.com/foobarz) ://example.com/foobarz ”效果很好。

通常，您不能要求 URL 的子字符串：

> 出于匹配的目的，URL 被视为单词，这意味着必须将整个域和路径包含在跟踪查询中，以便包含要匹配的 URL 的推文。

但是，如果您愿意从整个域中获取每条推文（以及更多边缘情况），Twitter 将适应：

> 最后，为了解决您可能想要跟踪特定域名的所有提及的常见用例（即，无论子域或路径如何），您应该使用“example com”作为“example.com”的跟踪参数（注意track 参数中“example”和“com”之间缺少句点）。

所有报价均来自 Twitter 文档：[https ://dev.twitter.com/streaming/overview/request-parameters#track](https://dev.twitter.com/streaming/overview/request-parameters#track)

他们有更多信息，包括示例。

祝你好运！

# asp.net-mvc-4 - 我无法隐藏 URL 参数，

> ID：15401491
> 
> 赞同：0
> 
> 时间：2013-03-14T04:56:12.887
> 
> 标签：asp.net-mvc-4

```
@Html.ActionLink("LotNumberDetails", "Index", "LotNumber", new { id = item.lotNUmber }, null) 
```

这是我在表格中的操作链接，当我单击 LotNumber ActionLink 时，它会生成以下 URL：

```
http://servername.com/LotNumber/Index/1111_100868781211 
```

控制器中的方法如下：

```
[HttpGet]
    public ActionResult Index(string id)
    {
        var TupleResult = objLotNumberModel.GetLotNumberValuesEnumerable(id);
        return View("Index", TupleResult);
    } 
```

一切正常，但是当我将 ActionLink 更改为 Ajax.ActionLink ...

```
@Ajax.ActionLink("LotNumber", "Index", "LotNumber", new { id = item.lotNUmber }, new AjaxOptions { HttpMethod = "POST"}) 
```

和控制器方法...

```
[HttpPost]
    public ActionResult Index(string id)
    {
        var TupleResult = objLotNumberModel.GetLotNumberValuesEnumerable(id);
        return View("Index", TupleResult);
    } 
```

该方法正在触发，但我无法移动到相应的页面。

我的想法是隐藏 LotNumber 的 ID，即在单击 ActionLink 时，我只想获取像“ [http://servername.com/LotNumber/Index](http://servername.com/LotNumber/Index) ”这样的 URL。

# python - 如何使用 NLTK BigramAssocMeasures.ch_sq

> ID：15401497
> 
> 赞同：2
> 
> 时间：2013-03-14T04:56:27.433
> 
> 标签：python, nlp, classification, nltk

我有单词列表，我想通过考虑它们的共现来计算两个单词的相关性。从一篇论文中我发现它可以使用*Pearsson chi-square test*来计算。我还发现`nltk.BigramAssocMeasures.ch_sq()`用于计算卡方值。

我可以用它来满足我的需要吗？如何使用 nltk 找到卡方值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:09:32.337

看看[Streamhacker 的这个博客](http://streamhacker.com/tag/chi-square/)，它通过代码示例给出了很好的解释。

> 信息增益的最佳指标之一是卡方。NLTK 将此包含在度量包的 BigramAssocMeasures 类中。要使用它，首先我们需要为每个单词计算几个频率：它的整体频率和它在每个类别中的频率。这是通过 FreqDist 来完成的，用于单词的整体频率，以及 ConditionalFreqDist，其中条件是类标签。一旦我们有了这些数字，我们就可以使用 BigramAssocMeasures.chi_sq 函数对单词进行评分，然后按分数对单词进行排序并取前 10000 个单词。然后我们将这些单词放入一个集合中，并在我们的特征选择函数中使用集合成员资格测试来仅选择出现在集合中的那些单词。现在每个文件都根据这些高信息词的存在进行分类。

# node.js - Reactive-Extensions / RxJS 对 node.js 的实现

> ID：15401506
> 
> 赞同：4
> 
> 时间：2013-03-14T04:57:17.907
> 
> 标签：node.js, reactive-extensions-js, rxjs

我只是想实现

[https://github.com/Reactive-Extensions/RxJS](https://github.com/Reactive-Extensions/RxJS)

到我的节点项目。

当然，有可用的 npm-package，但我看到它更新较少，模块较少，并且只使用了 min. 文件，所以我想使用来自 git 源的 rxjs。

我下载了 RxJS-master 并将目录下的整个文件复制到 ../myProject/lib/rx/

我懂了

**这些文件中的**rx.node.js****

 **```
var Rx = require('./rx');
require('./rx.aggregates');
require('./rx.binding');
require('./rx.coincidence');
require('./rx.experimental');
require('./rx.joinpatterns');
require('./rx.testing');
require('./rx.time');
module.exports = Rx; 
```

所以，**我的 app.js**代码是这样的

```
var rx = require("./lib/rx/rx.node.js")

function test()
{
    var as = new rx.AsyncSubject()
    setTimeout(function ()
    {
        as.onNext("works!")
        as.onCompleted()
    }, 500)
    return as
}

var a = test().subscribe(function (result)
{
    console.log("Got result: " + result)
}) 
```

这会产生如下错误，

```
.../rx/lib/rx/rx.binding.js:173
    var BehaviorSubject = Rx.BehaviorSubject = (function (_super) {
                          ^
ReferenceError: Rx is not defined
    at .../rx/lib/rx/rx.binding.js:173:27
    at Observable (.../rx/lib/rx/rx.binding.js:14:26)
    at Object.<anonymous> (.../rx/lib/rx/rx.binding.js:18:2)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (.../rx/lib/rx/rx.node.js:3:1)

Process finished with exit code 1 
```

怎么了？

* * *

如果我将 **rx.node.js**修改为

```
var Rx = require('./rx');
module.exports = Rx; 
```

代码按预期工作，因此显然*require* - *sub modules*部分进展不顺利。

* * *

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:13:53.297

从最新版本开始修复，我通过[此提交删除了有问题的错误版本](https://github.com/Reactive-Extensions/RxJS/commit/19471ad947a08be1d3927a9a9325aa1432c0d034)

NPM 已相应更新以删除 2.1.1 并替换为未损坏的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:06:37.163

这看起来像是您正在运行的构建的问题，我假设它是 2.1.1。我遇到了同样的问题，以下 npm 命令为我修复了它。

```
npm remove rx
npm install rx@2.1.0 
```

编辑：我看到你正在使用主人。对困惑感到抱歉。此解决方案可能适用于运行 2.1.1 的其他人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-30T07:33:25.377

我认为你可以做到这一点。如果这个命令：

```
$ which npm
/usr/local/bin/npm 
```

你可以这样做：

```
$ npm remove rx
$ npm install -g rx 
```

如果您对“which npm”一无所知，则必须删除带有[此问题](https://stackoverflow.com/questions/11177954/how-do-i-completely-uninstall-node-js-and-reinstall-from-beginning-mac-os-x#11178106)的节点（最佳答案）并使用 brew（使用 MacOS）或您的包管理器重新安装：

```
$ brew update
$ brew uninstall node
$ brew install node 
```

你必须使用它：

```
$ brew postinstall node 
```

根据对[这个问题](https://github.com/npm/npm/issues/3125)的讨论。**

# c - 通用标记语言解析器

> ID：15401509
> 
> 赞同：0
> 
> 时间：2013-03-14T04:57:49.600
> 
> 标签：c, html-parsing

我想解析一个 html 页面并从中提取标签。我需要一些关于在 C 中执行此操作的好算法的建议吗？我曾尝试寻找库，但它们中的大多数似乎都支持 python、ruby 或 java，但遗憾的是 C 没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:29:45.493

尝试使用 HTML 整洁

更多参考可以在这里找到： [http ://curl.haxx.se/libcurl/c/htmltidy.html](http://curl.haxx.se/libcurl/c/htmltidy.html)

# sharepoint - 通过沙盒解决方案中的代码更改 webpart 中的属性

> ID：15401511
> 
> 赞同：2
> 
> 时间：2013-03-14T04:58:04.093
> 
> 标签：sharepoint, sharepoint-2010, sandbox-solution

这是我在场解决方案中保存 Web 部件属性的**方式**：

```
SPContext.Current.Web.AllowUnsafeUpdates = true;
SPFile file = SPContext.Current.File;
SPLimitedWebPartManager mgr = file.GetLimitedWebPartManager(PersonalizationScope.Shared);

for (int index = 0; index < mgr.WebParts.Count; index++)
{
    if (mgr.WebParts[index].ID == this.ID)
    {
        ((MyWebpartType) mgr.WebParts[index]).MyStringProperty = "Hello World!";
        mgr.SaveChanges(mgr.WebParts[index]);
    }
}
SPContext.Current.Web.AllowUnsafeUpdates = false; 
```

工作正常。

**现在我必须在沙盒**解决方案中实现相同的目标，但没有`SPLimitedWebPartManager`可用的。

那么如何通过沙盒解决方案 webpart 中的代码更改 webpart 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:41:02.470

找到解决方案，`SetPersonalizationDirty()`在 webpart 中调用保存所有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:22:54.640

您可以定义自己的自定义 webpart 属性，如下所示：

```
 public partial class BannerSlider : System.Web.UI.WebControls.WebParts.WebPart
    { 
        [WebBrowsable(true),
        Personalizable(PersonalizationScope.Shared),
        WebDescription("My WebPart Property"),
        Category("Custom Properties"),
        WebDisplayName("My WebPart Property")]
        public string MyProperty
        {
            get { return __myProperty; }
            set { _myProperty= value; }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
             this.MyProperty = "Hello World"; 
```

# mysql - 在 ubuntu 中授予问题

> ID：15401513
> 
> 赞同：1
> 
> 时间：2013-03-14T04:58:09.043
> 
> 标签：mysql, database, ubuntu, stored-procedures, grant

我正在使用 Ubuntu 12.04（精确）64 位由于我是 Ubuntu 新手，我遇到了授权问题，我在 Ubuntu 示例中使用以下 cmd 授权

> sudo mysql -u root -p 创建由“pass”标识的用户用户名
> 
> 将 Db.* 上的所有权限授予用户名

如果检查授权使用

> 显示用户名的授权

| 授予所有特权*。*用密码识别的“用户名”|

现在，如果我以用户名登录，它不会要求输入密码，如果我输入用户密码，它将直接登录而无需密码，它会给我错误消息：

> sudo mysql -u 用户名 -p

ERROR 1045 (28000): 拒绝访问用户用户名（使用密码：是）

登录后如果我给

> 显示数据库（它不会显示任何被授予的数据库）

请用一个例子指导我

而且我还想知道如果存储过程是在 root 中创建的，即使我将特定存储过程的授权授予其他用户，如何获取其他用户的访问权限与定义器有什么关系

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:15:37.153

您无需运行`sudo`即可以 root 身份连接到 MySQL。

创建数据库：

```
$ mysqladmin create mydatabase -uroot -p 
```

以 root 或其他可以授予权限的用户身份连接

```
$ mysql -D mydatabase -uroot -p 
```

允许`foouser`从同一台机器连接

```
mysql> grant all privileges on mydatabase.* to 'foouser'@'localhost' identified by 'pass';
Query OK, 0 rows affected (0.00 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)

mysql> quit
Bye 
```

以新用户身份连接：

```
$ mysql -D mydatabase -u foouser -p
Enter password: pass
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 129
Server version: 5.5.29-0ubuntu0.12.04.2 (Ubuntu) 
```

# java - 全局对象在不应该被修改时被修改

> ID：15401514
> 
> 赞同：0
> 
> 时间：2013-03-14T04:58:10.560
> 
> 标签：java, android

我扩展了`Application`该类以允许我存储应用程序范围的对象。其中一个对象是`JSONObject`从应用程序本地的 JSON 文件中读取的。这`EnvConfig`是我编写的一个自定义类，它只返回那个 JSON 配置对象。这个`ExtendedBase`课程让我可以在全球范围内使用它。

我的问题是，当我进行活动时，我会执行以下操作来获取 config `JSONObject`。在其中，我抓取了一个模板并对其`JSONObject(pageJSON)`进行了`AsyncTask`修改，并将其用作 RESTful API 调用的主体来检索资源。

```
myApp = (ExtendedBase) getApplicationContext();
JSONConfig = myApp.getConfig();
JSONObject page = JSONConfig.getJSONObject("singlePages").getJSONObject(pageTitle);
JSONObject pageJSON = page.getJSONObject("json"); 
```

这样可行。我从 RESTful API 获取资源，然后从自定义类中做同样的事情。`pageJSON`在异步任务中从全局可用`getApplicationContext()`的 MODIFY中获取`pageJSON`，并进行另一个 RESTful API 调用以更新资源。哪个有效。但是当我再次启动该过程时（返回活动并尝试通过获取`pageJSON`模板对象进行 API 调用以检索另一个资源），它以某种方式反映了我在进行更新 API 调用时所做的更改。`JSONObject`根本不应该更改原始的全局。就像我正在更新全局可用对象而不是`JSONObjects`像我认为应该做的那样创建新对象。

有人知道如何解决这个问题吗？

```
import org.json.JSONObject;

import android.app.Application;

public class ExtendedBase extends Application {

    private EnvConfig envConfig;
    private JSONObject JSONConfig;
    public static Record record = null;
    public static Boolean hasSavedRecord = false;

    @Override
    public void onCreate() {
        envConfig = new EnvConfig();
        JSONConfig = envConfig.getEnvConfig(this);
        super.onCreate();
    }

    public JSONObject getConfig() {
        return JSONConfig;
    }

    public void setRecord(Record mRecord){
        this.record = mRecord;
    }

    public Record getRecord(){
        return record;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:11:04.710

更改`getConfig()` 以获取最新值而无需再次创建 Application 实例：

```
public JSONObject getConfig() {

 JSONConfig = envConfig.getEnvConfig(this);//call here instead of inside onCreate()
 return JSONConfig;
} 
```

并确保您没有在`EnvConfig`类构造函数中进行任何 API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:09:16.023

公共类 GlobalApplication 扩展应用程序 { 私有 JSONObject globalVariable;

```
 public JSONObject getGlobalInstance() {
         return globalVariable;
 }

 public void setGlobalInstance(JSONObject globalVariable) {
         this.globalVariable = globalVariable;
 }
 @Override
 public void onCreate() {
         //reinitialize variable
 } 
```

在您的活动中设置全局价值

```
((GlobalApplication)getApplication()).setGlobalInstance(jsonObject); 
```

变成这样

```
jsonObject=((GlobalApplication)getApplication()).getGlobalInstance(); 
```

}

同样，您可以存储多个全局值并以相同的方式检索。

**不要忘记将 Application 添加到清单文件中**

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:name="package.GlobalApplication" > 
```

希望这会帮助你。

# php - 我想生成一个列名数组以将其分配为我的类的属性..有什么想法吗？

> ID：15401515
> 
> 赞同：2
> 
> 时间：2013-03-14T04:58:17.190
> 
> 标签：php, mysql

这是我的数组：

```
protected static $db_fields = array('id', 'username', 'password'); 
```

这是我如何使用它：

```
protected function attributes(){
    $attributes = array();
    foreach(static::$db_fields as $field){
        $attributes[$field] = $this->$field;
    }
    return $attributes;
} 
```

这是我使用属性的方式：

```
protected function create(){
    global $database;
    $attributes = $this->sanitized_attributes();

    $sql = "INSERT INTO " . static::$table_name . " (";
    $sql .= join(", ", array_keys($attributes));
    $sql .= ") VALUES ('";
    $sql .= join("', '", array_values($attributes));
    $sql .= "')";

    if($database->query($sql)){
        $this->id = $database->inserted_id();
        return TRUE;
    }else{
        return FALSE;
    }
} 
```

我需要做的就是直接从数据库中生成 db_fields 数组，而不是像我所做的那样手动分配它。我玩弄了“SHOW COLUMNS FROM”表名，但没有任何运气。

显示列：

```
function attributes(){
    global $database;
    $attributes = array();
    $sql = "SHOW COLUMNS FROM " . static::$table_name;
    $result = $database->query($sql);
    $db_fields = mysql_fetch_assoc($result);

    for($i = 0; $i < mysql_num_rows($result); $i++){
        while ($db_fields = mysql_fetch_assoc($result)) {
          $attributes[] = $db_fields['Field'];
        }
    }

    return $attributes;
} 
```

我的最终方法应该是一个数组，如：

```
$db_fields = ('column1_name', 'column2_name', 'column3_name') 
```

我当前的“SHOW COLUMNS”播放的结果是它使用户名的值：用户名，密码：密码......就像列的名称一样。

我相信这是我如何将这些列名称分配给我的数组的问题。那么制作这样一个数组的正确查询是什么？

最后我解决了它：

```
protected static $db_fields;

function __construct(){
    self::generate_attributes();
}

protected static function generate_attributes(){
    $sql = "SHOW COLUMNS FROM admins";
    $result = mysql_query($sql);
    $rows = mysql_fetch_assoc($result);

    for($i = 0; $i < mysql_num_rows($result); $i++){
        while ($rows = mysql_fetch_assoc($result)) {
          self::$db_fields[] = $rows['Field'];
        }
    }
    return self::$db_fields;
}
protected function attributes(){
    $attributes = array();
    foreach(static::$db_fields as $field){
        $attributes[$field] = $this->$field;
    }
    return $attributes;
} 
```

感谢大家尝试提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:07:59.843

试试怎么样

```
SELECT `column_name` FROM `information_schema`.COLUMNS WHERE TABLE_NAME = 'yourtable'; 
```

您的 db 用户将需要对 information_schema 的读取访问权限。

如果需要，您还可以使用 GROUP_CONCAT 创建逗号分隔的字符串。

```
SELECT GROUP_CONCAT(c.column_name) FROM `information_schema`.COLUMNS c WHERE TABLE_NAME = 'yourtable'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:32:31.567

尝试这个：

```
function attributes(){
    global $database;
    $attributes = array();
    $sql = "SELECT column1_name,column2_name,column3_name FROM " . static::$table_name;//your columns
    $result = $database->query($sql);
    $db_fields = array('column1_name', 'column2_name', 'column3_name') ;
    $i=0;
    if(mysql_num_rows($result)){
        while ($rows = mysql_fetch_row($result)) {
           for($j=0;$j<count($db_fields);$j++)
           {
               $attributes[$i][$db_fields[$j]] = $rows[$j] ;
           }
           $i++;
        }
    }
    return $attributes;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:19:17.870

尝试这些使用您的表名和架构来获取有关列的所有详细信息。

```
SELECT `column_name`  FROM `information_schema`.COLUMNS WHERE TABLE_NAME = 'table_name' AND TABLE_SCHEMA = 'database_name' 
```

你可以使用`*`而不是`column_name`

检查 inaformation_schema 表，它有很多要知道的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:05:59.643

```
$query = "SELECT * from myTable LIMIT 1";
if ($result = mysqli_query($link, $query)) {
$finfo = mysqli_fetch_fields($result);

foreach ($finfo as $val) {
   print_r($val);
}
mysqli_free_result($result);
} 
```

# java - java中的UNICODE正则表达式

> ID：15401519
> 
> 赞同：2
> 
> 时间：2013-03-14T04:58:36.677
> 
> 标签：java, regex, unicode, pattern-matching

在组合的正则表达式中，它看起来像在工作，但在模式中使用它时却失败了。请帮忙。

```
^(?=.*\\p{Nd})(?=.*\\p{L})(?!.*(.{2,})\\1).{5,12}$ 
```

这似乎有效，但是当我拆分时它失败了。

```
^(?=.*\\p{Nd})(?=.*\\p{L}) 
```

此外，我正在寻找 UNICODE 验证以忽略任何特殊字符，只接受字母/字母和数字的混合（至少一个字母和一个数字）

```
public void setValidations(){
        validation1 = "^(?=.*\\p{Nd})(?=.*\\p{L})"; //this is failing
        validation2 = "^.{5,12}$";
        validation3 = "(\\S+?)\\1";
        p1 = Pattern.compile(validation1);
        p3 = Pattern.compile(validation3);
    }
    public boolean validateString(String str){
        matcher1 = p1.matcher(str);
        matcher3 = p3.matcher(str);
        if(matcher1.find()){ //Expecting string passed "invalid" to fail (no numeric in it)
            System.out.println(str + " String must have letters & number at least one");
            return false;
        }
        if (!str.matches(validation2)){
            System.out.println(str  + " String must be between 5 and 12 chars in length");
            return false;
        }
        if (matcher3.find()){
            System.out.println(str + " got repeated: " + matcher3.group(1) + " String must not contain any immediate repeated sequence of characters");
            return false;    
        }
        return true;
    }
public static void main(String[] args) {
    StringValidation sv = new StringValidation();
    String s2[] = {"1newAb", "A1DOALDO", "1234567AaAaAaAa", "123456ab3434", "$1214134abA", "invalid"};
    boolean b3;
    for(int i=0; i<s2.length; i++){
       b3 = s2[i].matches("^(?=.*\\p{Nd})(?=.*\\p{L})(?!.*(.{2,})\\1).{5,12}$");

       System.out.println(s2[i] +  "  "+ b3); // string "invalid" returning false (expected)
    }
    for (String str : s2) {
            if(sv.validateString(str))
                System.out.println(str + "String is Valid");
    }
} 
```

我也希望 "$1214134abA" 这个字符串失败，因为它有 $

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:21:18.630

看来你忘了使用否定

```
if(matcher1.find()){ //Expecting
    ... 
    return false;
} 
```

如果找不到匹配项，它应该返回***false***。尝试

```
if(!matcher1.find()){ //Expecting... 
```

另外，因为您想检查整个字符串是否基于字母和数字而不是`.{5,12}`最后 try `[\\p{L}\\p{Nd}]{5,12}`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:27:23.993

`Pattern.compile("^(?=.*\\p{Nd})(?=.*\\p{L})").matcher("invalid").find()`返回 false，因为`"invalid"`不包含数字。因此，`if`条件被评估为假，并且该块被跳过。

用于`^(?=[\\p{Nd}\\p{L}]*\\p{Nd})(?=[\\p{Nd}\\p{L}]*\\p{L})`避免使用字母和数字以外的字符。

它不会接受`$1214134abA`，因为它包含`$`.

# php - 如何将 Img src 转换为字符串，将其放入数组并使用 json 编码？

> ID：15401520
> 
> 赞同：0
> 
> 时间：2013-03-14T04:58:38.953
> 
> 标签：php, javascript, sql

您好我正在使用函数 json_encode 通过关联数组从数据库中检索数据。但是我想问一下如何将 img 标签转换为字符串并将其放入关联数组中，然后让 json 对其进行编码并吐出所有内容，同时将 img 标签保持为字符串？

```
 while($row=$result->FetchRow())
{
  $id= (float)$row['id'];
  $name = $row['name'];
  $color1 = $row['color'];
  $type1 = $row['type'];
  $to= (float)$row['to']; 
  $thumb =$row['thumb']; //image path

  $array = array(
  "adjacencies" => array( array(
  "nodeTo" => "$to",
  "nodeFrom" => "$id",
  "data" => array() )),
  "data" => array(
   "$"."color" => $color1,
   "$"."type" => $type1 ),
  "id" => $id,
  "name" => "<img src='$thumb' height='30' width='30' alt='root'/><label>$name</label> ");
}
$json = json_encode($array);
print "$json";
return $json; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:10:55.523

使用 htmlspecialchars 确保转义任何有问题的字符 ( [http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php) )。除此之外，在您将其插入 DOM 之前，它只是字符串数据。

我假设在循环的每次迭代中，您都打算向数组中添加另一个元素 $array。您想在循环之前初始化 $array 变量

```
$array = array() 
```

而不是

```
$array = array(
...
) 
```

在循环中，做

```
$array[$key] = array(
...
) 
```

其中 $key 是您要用于索引数组的键。我假设您想为此使用 $id 。您也可以增加一个整数并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:06:11.527

尝试这个：

```
$array=array();
while($row=$result->FetchRow())
{
    $id= (float)$row['id'];
    $name = $row['name'];
    $color1 = $row['color'];
    $type1 = $row['type'];
    $to= (float)$row['to']; 
    $thumb =$row['thumb']; //image path

    $array = array(
        "adjacencies" => array( array(
            "nodeTo" => "$to",
            "nodeFrom" => "$id",
            "data" => array() 
        )),
        "data" => array(
            "$"."color" => $color1,
            "$"."type" => $type1 ),
        "id" => $id,
        "name" =>htmlspecialchars("<img src='".$thumb."' height='30' width='30' alt='root'/><label>".$name."</label>")
    );
}
$json = json_encode($array);
echo $json;
return $json; 
```

阅读[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:08:49.000

首先，每次通过循环时都会覆盖 $array 。考虑修复以下行

```
...
$thumb =$row['thumb']; //image path

$array = array(
"adjacencies" => array( array(
"nodeTo" => "$to",
... 
```

至

```
...
$thumb =$row['thumb']; //image path

$array[] = array(
"adjacencies" => array( array(
"nodeTo" => "$to",
... 
```

除此之外，只是用一些默认变量尝试了你的代码

```
$id = $to = 1;
$color1 = 'green';
$type1 = 'type1';
$thumb = 'image.jpg';
$name = 'image name';
$array = array(
    "adjacencies" => array(
        array(
            "nodeTo" => $to,
            "nodeFrom" => $id,
            "data" => array()
        )
    ),
    "data" => array(
        "$"."color" => $color1,
        "$"."type" => $type1
    ),
    "id" => $id,
    "name" => "<img src='$thumb' height='30' width='30' alt='root'/><label>$name</label> "
);
echo json_encode($array); 
```

将这个 JSON 返还给我，这似乎是您正在寻找的？

```
{
    "adjacencies": [
        {
            "nodeTo": 1,
            "nodeFrom": 1,
            "data": []
        }
    ],
    "data": {
        "$color": "green",
        "$type": "type1"
    },
    "id": 1,
    "name": "<img src='image.jpg' height='30' width='30' alt='root'/><label>image name</label> "
} 
```

# nuget - 如何打开 NuGet 包的自述文件 URL？

> ID：15401521
> 
> 赞同：7
> 
> 时间：2013-03-14T04:59:03.843
> 
> 标签：nuget, nuget-package

在 NuGet 中，您可以将 readme.txt 放在 pacakge 的根目录中，它会自动打开。但是，我看到 NuGet 包在安装时会打开一个 URL。这是如何完成的（您可以查看[此 NuGet 包](http://goo.gl/0y31F)的示例）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T07:40:40.827

它是通过包的 tools\install.ps1 文件中的 PowerShell 脚本完成的。[下载 Glimpse 软件包](https://www.nuget.org/api/v2/package/Glimpse/1.0.1)，解压缩存档，查找 tools\install.ps1 文件。

在底部，您将找到以下执行导航的脚本：

```
$DTE.ItemOperations.Navigate("http://getglimpse.com/Version/Install/?" + $package.Id + "=" + $package.Version) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:07:27.287

您需要在包中添加一个 powershell 脚本：

*   `Init.ps1`首次将软件包安装到解决方案中时运行
*   `Install.ps1`每次将包安装到项目中时运行。

资料来源：[http ://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Automatically_Displaying_a_Readme.txt_File_During_Package_Installation](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Automatically_Displaying_a_Readme.txt_File_During_Package_Installation)

# xcode - 使用 xcode 4.6 从 URL 下载 .epub 或 .pdf 文件到 ios 设备

> ID：15401525
> 
> 赞同：0
> 
> 时间：2013-03-14T05:00:02.790
> 
> 标签：xcode, pdf, ios6, epub

我是新来的，请帮助我。我想从给定的 url 下载 .epub 或 .pdf （例如： www.example.com./file.pdf ）并将其以特定名称（整数）存储到我的 iOS 设备中，如果我想打开那本书，我可以能够检查它是否是我想要的书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:21:11.397

将此代码添加到您的视图确实加载或任何其他方法

```
NSData *pdfData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.feedbooks.com/book/3471.epub"]];

//Store the Data locally as epub  File if u want pdf change the file extension  

NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];

NSString *filePath = [resourceDocPath stringByAppendingPathComponent:@"3471.epub"];

[pdfData writeToFile:filePath atomically:YES];
NSLog(@"%@",filePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:21:25.480

> 如果您正确地使用谷歌搜索，有几种解决方案可用。

但无论如何，您可以使用[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)或[https://github.com/pokeb/asi-http-request](https://github.com/pokeb/asi-http-request) 来满足您的目的。

还有一些示例您可以查看并参考[https://github.com/PSPDFKit/PSPDFKit-Demo](https://github.com/PSPDFKit/PSPDFKit-Demo)和[https://github.com/steipete/AFDownloadRequestOperation](https://github.com/steipete/AFDownloadRequestOperation)

对于 epub 阅读器，您可能可以点击此链接[http://ideveloperworld.blogspot.in/2011/02/epub-reader.html](http://ideveloperworld.blogspot.in/2011/02/epub-reader.html)

# python - 期望 Python 中的预期块

> ID：15401526
> 
> 赞同：3
> 
> 时间：2013-03-14T05:00:12.023
> 
> 标签：python, python-3.x

我完全是一个新手，我不知道我的代码有什么问题。我尝试对其进行多次调整，但没有奏效，并且`expected an intended block`在我运行代码时一直发出警报。

```
def abc(words_list):

number1 = 0
number2 = 0

for L in words_list:
    if L[0] in 'aeiou':
        number1 = number1 + 1

    else:
        number2 = number2 + 1
        first_char = L[0]

        for i in range(1,len[L]):
            L[i-1] = L[i]
        L[-1] = first_char
    L = L + 'ay'

return(number1, number2) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T05:04:08.083

在函数 ( `def`) 开始后，您需要缩进一次代码。如：

```
def abc(words_list):

    number1 = 0
    number2 = 0

    for L in words_list:
        if L[0] in 'aeiou':
            number1 = number1 + 1

        else:
            number2 = number2 + 1
            first_char = L[0]

            for i in range(1,len[L]):
                L[i-1] = L[i]
            L[-1] = first_char
        L = L + 'ay'

    return(number1, number2) 
```

此外，任何空行都需要有正确的缩进。例如，当从堆栈溢出复制粘贴时，您可能会丢失空格的缩进，但 python 认为它们也很重要。例如，后面的两个空行`def`需要与开头的行在相同的缩进`number1`。

notepad++ 等程序可以让您查看空行的缩进情况，任何好的 python IDE 也应该可以工作。

# jsf-2 - 仅向选项列表目标添加一个值 (PrimeFaces)

> ID：15401527
> 
> 赞同：0
> 
> 时间：2013-03-14T05:00:14.497
> 
> 标签：jsf-2, primefaces

我有一个搜索系统的搜索功能。执行搜索后，我正在更新搜索结果以选择列表。每次我搜索我都会更新pickList源。现在我的问题是我想以这样一种方式进行验证，即如果将超过 1 个值添加到选择列表目标它应该给我错误消息并检查选择列表目标中的重复条目。

下面是 xhmtl 中选择列表的代码

```
 <p:pickList id="primaryContactBean" value="#{addSystemManagedBean.primaryContactList}" var="contact" itemLabel="#{contact.firstName}" itemValue="#{contact}" converter="contactConverter" >
   <p:ajax event="transfer" listener="#{addSystemManagedBean.onTransfer}" process="@this"          update="sysMsg3" />
  <p:column>
     #{contact.firstName} #{contact.lastName}
   </p:column>
</p:pickList> 
```

并 onTransfer 调用以下方法

```
public int primaryOwnerCount = 0;
    public void onTransfer(TransferEvent event) {
        PickList picklist = (PickList) event.getComponent();
            for(Object item : event.getItems()) {  
                ContactBean cb = (ContactBean)item;
                if(picklist.getId().equals("primaryContactBean")){
                    if(event.isAdd())
                    primaryOwnerCount++;
                    if(primaryOwnerCount>1){
                        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,"Only one primary owner can exist!!","If you want to add owner, please remove from the list and then proceed.."));
                        for (Iterator iterator = primaryContactList.getTarget().iterator(); iterator
                                .hasNext();) {
                            ContactBean type = (ContactBean) iterator.next();
                            System.out.println("target:"+type.getFirstName());
                        }

                    }

                    else
                        primaryContactTarget.add(cb);
                } 
```

# c++ - 通过 ActiveX 在 WPF 中使用 OpenGL？

> ID：15401530
> 
> 赞同：0
> 
> 时间：2013-03-14T05:00:25.057
> 
> 标签：c++, wpf, opengl, activex

我计划在 WPF 中嵌入一个非托管的 C++ OpenGL 查看器。要求是（除了健壮性和易于开发）

*   适当调整大小
*   OpenGL 查看器区域的上下文菜单（仅适用于查看器相关操作）
*   事件（例如，通过在 OpenGL 查看器中选择对象触发）
*   WPF 对话框应绘制在 OpenGL 空间之上

到目前为止，我已经找到了一些关于使用托管 WinForm 控件（通过 C++/CLI 包装器）的博客和讨论，但是要完成我的所有上述要求（如果可能的话）似乎有点棘手（甚至有点小技巧）。

如何创建一个 ActiveX 控件？尽管没有创建 ActiveX 控件的经验，但其优势之一是它可以在自己的进程中运行。

这是一个好主意还是我会遇到更多的修补？

编辑：我应该更清楚 OpenGL 查看器。这是一个基于 C++ 3D 引擎的现有应用程序，仅支持 OpenGL。移植到支持 DirectX 的引擎被认为是最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:39:21.353

虽然我没有使用 ActiveX，但我已经完成了我相信您正在努力实现的目标。两条信息帮助我走上了这条路。

1.  混合托管和非托管代码

    *   事实证明，托管 C++ 的编译方式与非托管 C++ 完全不同，并且数据存储在完全不同的堆上。幸运的是，您可以使用...将代码段标记为托管或非托管...

    `#pragma managed`
    `#pragma unmanaged`

    *   [在这篇文章](http://www.windowsdevcenter.com/pub/a/dotnet/2003/03/03/mcppp2.html?page=1)中查看更多信息

2.  OpenGL上下文管理

    *   我遵循了类似于[本文中描述的方法](http://www.codeproject.com/Articles/16051/Creating-an-OpenGL-view-on-a-Windows-Form)
    *   如果您需要管理多个 OpenGL 窗口，wglMakeCurrent 和 wglShareLists 将是您的伙伴

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:44:33.410

为什么你想要一个activex？有一些基于 PInvoke 的托管包装器，因为[SharpGL](http://sharpgl.codeplex.com/)可以完成您需要 easyear 的工作。而且，既然你正在使用 WPF 并且你有一个[Viewport3d](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewport3d.aspx)对象，为什么不使用它呢？如果您熟悉 3d 引擎，您会欣赏这种简洁性（即使在速度方面存在一些缺陷）。

另一点，因为[根据这里的这个问题](https://stackoverflow.com/questions/15113901/starting-a-new-user-session-from-a-service)，由于 Opengl 可以使用纯软件模式[在会话 0](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463353.aspx)中渲染，我被迫放弃 WPF 3d 渲染以支持 OpenGl 。如果您计划在服务或应用程序的屏幕外位图中呈现某些内容，则这是一项要求`asp.net`。

# c# - 如果一个对象失败，EntityFramework 回滚所有事务

> ID：15401531
> 
> 赞同：4
> 
> 时间：2013-03-14T05:00:43.337
> 
> 标签：c#, entity-framework

我有这种情况，我即将连续向 5 个或更多表添加记录。保存机制应该严格，任何对象失败，所有数据库更改都不会提交或回滚。如果所有对象都插入没有问题，那么所有记录都应该保存到数据库中。贝娄是我的示例代码。请帮忙。

```
_dbContext.Table1.AddObject(object1);//if insert fails rollback
_dbContext.SaveChanges();

_dbContext.Table2.AddObject(object2);//if insert fails rollback this and object1 transactions
_dbContext.SaveChanges();

_dbContext.Table3.AddObject(object3);//if insert fails rollback this and previous other transactions
_dbContext.SaveChanges();

_dbContext.Table4.AddObject(object4);//if insert fails rollback this and previous other transactions
_dbContext.SaveChanges();

_dbContext.Table5.AddObject(object5);//if insert fails rollback this and previous other transactions
_dbContext.SaveChanges();

//if all objects were inserted without exceptions then commit all changes 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T05:02:30.680

看起来你可以这样做：

```
_dbContext.Table1.AddObject(object1);
_dbContext.Table2.AddObject(object2);
_dbContext.Table3.AddObject(object3);
_dbContext.Table4.AddObject(object4);
_dbContext.Table5.AddObject(object5);
_dbContext.SaveChanges(); // if fails will roll back all objects 
```

# android - Android 应用程序来设置另一个应用程序

> ID：15401535
> 
> 赞同：1
> 
> 时间：2013-03-14T05:01:31.143
> 
> 标签：android, configuration, mobile-website

我想知道，我们可以在 Android 上创建一个应用程序，我们可以在其中配置另一个应用程序的设置。我希望有一个应用程序的行为类似于服务器，在该服务器中完成更改并将设置加载到主应用程序中。想知道如果可能的话谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:04:31.350

阅读您的问题后，我想到了一个想法，自己尝试一下，但它 100% 会起作用。

创建一个将配置数据存储到 SharedPreference 中的应用程序。将此 SharedPreference 设为公开，以便您可以轻松地从另一个应用程序中读取。

现在在您的另一个应用程序中，您可以使用此 SharedPreference 的数据作为配置。

# google-apps-script - 将数据输出到单元格

> ID：15401536
> 
> 赞同：1
> 
> 时间：2013-03-14T05:01:32.447
> 
> 标签：google-apps-script

```
SpreadsheetApp.getActive().getSheetByName('Sheet1').appendRow([new Date(), VARname]) 
```

我知道上面的代码会将变量输出到一个单元格，但是你如何将它输出到一个特定的单元格，比如 B50 或 A4 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:38:45.230

代替

```
.appendRow 
```

在您上面的代码中使用

```
.getRange(row#, column#).setValue(variable); 
```

在你的情况下 B50 将是

```
.getRange(50,2).setValue(VARname); 
```

# apache - Apache-无法使用本地主机在浏览中访问我的页面

> ID：15401541
> 
> 赞同：0
> 
> 时间：2013-03-14T05:01:41.173
> 
> 标签：apache, .htaccess, httpd.conf

我在 Windows 7 中运行 Apache 2.0.64。我访问了很多有关 Apache 安装和配置的站点。我的配置文件没问题（我认为）。我可以毫无问题地停止并重新启动服务器，但是当尝试访问页面（本地主机/市场）时，我得到了“哎呀！Google Chrome 无法连接到 localhost 的消息。我已经在 httpd.conf 中编写了我的 RewriteRule 并且我在 htdocs 文件夹中没有 .htaccess 文件

我的 httpd.config 的一些值可能对你有帮助

```
ServerName localhost
Listen 80
DocumentRoot "C:/Apache/Apache2/htdocs"
<Directory "C:/Apache/Apache2/htdocs">
RewriteEngine On
RewriteRule  ^(market|stock|mutual)$ stackoverflow/$1 [L]

Options Indexes FollowSymLinks
AllowOverride None
Order allow,deny
Allow from all

</Directory>
AccessFileName .htaccess 
```

请帮我

我不知道该怎么办了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:10:33.167

如果您无法使用 localhost 访问您的页面，请尝试使用 127.0.0.1 IP 地址访问它，因为该 IP 地址指向 localhost。如果不是，则使 .htaccess 文件可写。希望能帮助到你。

# iphone - 如何在 iPhone 中使用 XMPPFramework 创建 MultiUserChatRoom

> ID：15401543
> 
> 赞同：3
> 
> 时间：2013-03-14T05:01:46.230
> 
> 标签：iphone, xmppframework

我正在 iPhone 中使用 XMPPFramwwork 开发聊天应用程序。我成功完成了一对一聊天，现在我想在我的应用程序中开发多用户聊天。

我尝试了下面的代码，但没有调用 XMPPRoomDelegate 的任何委托方法。我怎样才能开始创建聊天室。何时以及如何调用 roomdelegate 方法....任何回复谢谢提前。

```
XMPPStream *xmppStream = [[XMPPStream alloc] init];

XMPPRoomCoreDataStorage *xmppRoomStorage  = [XMPPRoomCoreDataStorage sharedInstance];

XMPPJID *roomJID = [XMPPJID jidWithString:@"vvreddy50@gmail.com"];

xmppRoom = [[XMPPRoom alloc] initWithRoomStorage:xmppRoomStorage jid:roomJID dispatchQueue:dispatch_get_main_queue()];

[xmppRoom   activate:xmppStream];
[xmppRoom   fetchConfigurationForm];
[xmppRoom   configureRoomUsingOptions:nil];
[xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];
[xmppRoom   addDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:49:45.587

两个问题：

1.  XMPPFramework 主要是异步的。这意味着您需要`-fetchConfigurationForm`在您的`-xmppStreamDidAuthenticate:`方法中通过身份验证后调用。
    如果这两个调用需要按顺序进行，则调用`-configureRoomUsingOptions`.`-xmppRoom:didFetchConfigurationForm:`

2.  `-connect:`除非您在流上调用，否则什么都不会发生。确保以该方法实现`-xmppStreamDidConnect:`并启动与服务器的身份验证。

# python - 素数生成器花费太多时间

> ID：15401550
> 
> 赞同：4
> 
> 时间：2013-03-14T05:02:09.050
> 
> 标签：python, prime-factoring

我正在解决问题：

> 通过列出前六个素数：2、3、5、7、11 和 13，我们可以看到第 6 个素数是 13。
> 第 10 001 个素数是什么？

```
def checkPrime(x):
    facs = 0
    for i in range(1,x):
        if x%i==0:
            facs = facs + 1
    if facs == 2:
        return True
    else :
        return False

i = 1
noPrime = 0
done = False
while(done==False):
    i = i + 1
    print "i = {0} and noPrime={1}".format(i,noPrime)
    if checkPrime(i)==True:
        noPrime = noPrime + 1
        if noPrime==10001 :
            print i
            done=True 
```

但这需要很多时间。
我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T05:18:30.830

一种使用素数测试的方法：

```
def isPrime(n):
    if n == 2: return True
    if n % 2 == 0 or n < 2: return False
    for i in range(3, int(n**0.5)+1, 2):
        if n % i == 0: return False
    return True
if __name__ == "__main__":
    n = count = 1
    while count < 10001:
        n += 2
        if isPrime(n): count += 1
    print n 
```

在 0.2 秒内运行。对这个问题没关系，但正如其他人所说，筛子更有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T05:29:33.593

您可以使用[素数定理](http://mathworld.wolfram.com/PrimeNumberTheorem.html)来很好地估计您必须走多远。（估计程序中数组 p 的大小）。`pi(n)`, 小于`n`, 的素数个数是渐近的`n%^.n`（`n`除以`ln n`）。对于第 10001 个素数，等式是，并且为您`10001=n%^.n`求解得到介于 1.1e5 和 1.2e5 之间。`n``n`

因此，您可以缩小检查值的范围并仅检查范围的数字。这种技术减少了程序的运行时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T05:12:43.400

**您不需要为此使用埃拉托色尼筛**（尽管您将在未来的问题中使用）。找到 10001 素数相对较快。

注意事项：

*   只测试奇数（除了#2）
*   您只需测试不超过该值平方根的除数。

*下面的剧透 - 假设你已经解决了这个问题，但它只需要很长时间*

C#中的示例（对不起，不知道python）：

```
class Program
{
    static bool IsPrime(int value)
    {
        if (value == 2) return true;
        if (value % 2 == 0) return false;

        // Test for divisors up to the square root of "value", increment by 2.
        for (int i = 3; i <= Math.Sqrt(value); i += 2)
        {
            if (value % i == 0)
                return false;
        }
        return true;
    }

    static void Main(string[] args)
    {
        int primeCount = 1; // #2

        // Test only odd numbers.
        for (int i = 3; ; i += 2)
        {
            if (IsPrime(i))
            {
                primeCount++;
                if (primeCount == 10001)
                {
                    Console.WriteLine(i.ToString());
                    break;
                }
            }
        }
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T05:27:17.230

由于其他人都在发布他们的解决方案，我想我会对简单的除法方法进行一些明显的改进：

```
def is_prime(nr):
    if nr < 2: return false
    if nr < 4: return true
    if nr % 2 == 0: return false
    if nr < 9: return true
    if nr % 3 == 0: return false
    for i in range(5, int(nr**0.5) + 1, 6):
        if number % i == 0: return false
        if number % (i + 2) == 0: return false
    return true 
```

通过摆脱一个不必要的模运算，这改进了简单的解决方案。

# css - 单选按钮没有动态应用样式

> ID：15401555
> 
> 赞同：0
> 
> 时间：2013-03-14T05:02:33.833
> 
> 标签：css, jquery-mobile, radio-button

每次用户访问选项卡菜单时，我都会尝试刷新单选按钮列表。第一次访问样式还可以，但它们的行为类似于复选框，并且在单击其他单选按钮时不能取消选中。

我试图把`refresh();`方法，但它仍然不起作用。

你可以在[JSFIDDLE上看到演示](http://jsfiddle.net/w4gQa/1/)

有什么建议吗？谢谢。

```
$('.export_tab').click(function(){
    $("#radios_wrapper").children().remove(); //Remove all previous radio buttons
    for(var i in localStorage) //Looping through the localStorage
        {
            dataIndex = JSON.parse(localStorage[i]).index;
            dataName = JSON.parse(localStorage[i]).name;
                    //Then insert a new one
            $("#radios_wrapper").append('<input type="radio" value="'+dataIndex+'" name="'+dataIndex+'" id="radio'+dataIndex+'"/><label for="radio'+dataIndex+'">'+dataName+'</label>');
        }
}); 
```

这是HTML

```
<div data-role="fieldcontain">
     <fieldset data-role="controlgroup" id='radios_wrapper'>

     </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:06:33.717

单选按钮需要相同的名称才能成为一个组。所以：

```
'<input type="radio" value="'+dataIndex+'" name="'+dataIndex+'"/>' 
```

不是正确的方法。您要分组的所有无线电的名称应该相同。它应该是：

```
'<input type="radio" value="'+dataIndex+'" name="allTheSame"/>' 
```

这是您的[Fiddle](http://jsfiddle.net/w4gQa/2/)的更新。

要告诉 jQuery 重绘，请使用触发器函数，例如`.append('whatever').trigger('create')`. [http://jquerymobiledictionary.pl/faq.html](http://jquerymobiledictionary.pl/faq.html)。更新[了小提琴](http://jsfiddle.net/w4gQa/4/)。

# python - Python 请求库 - 分块数据和 iter_lines

> ID：15401557
> 
> 赞同：1
> 
> 时间：2013-03-14T05:02:45.380
> 
> 标签：python, python-requests

这里的任何人都使用过分块数据编码的请求和 HTTP 流。

我想知道 Requests 是否天生就知道服务器提供的块大小，并在 requests.iter_lines() 中使用它作为块大小。我发现如果我减小默认块大小，它的处理速度会更快，但是与服务器发回的内容是否有任何关联，我不应该到处乱设置它。请注意，我正在实时获取来自 DataSift 的社交数据馈送，并最终将它们拍摄到标准输出。

代码是：

```
#!/usr/bin/env python

import requests
import json

headers={'Auth': 'username:api_key'}
r = requests.get('http://stream.datasift.com/988098098sd09fsd89fsd0f7',headers=headers, stream=True)

for line in r.iter_lines(chunk_size=128):
    if line: 
        print line 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:40:54.250

查看源代码（models.py 第[531](https://github.com/kennethreitz/requests/blob/c4f9340fb4df41d7a8be66ee41c40bfed64ec6d6/requests/models.py#L531)和[31](https://github.com/kennethreitz/requests/blob/c4f9340fb4df41d7a8be66ee41c40bfed64ec6d6/requests/models.py#L31)行），预配置的值 512 只是一个“合理的默认值”。

# hadoop - 如何估算一个 Hadoop 集群？

> ID：15401558
> 
> 赞同：-1
> 
> 时间：2013-03-14T05:02:50.440
> 
> 标签：hadoop

任何人都可以帮助我获得一些有用的想法来估计hadoop集群和集群硬件的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:13:07.393

好吧，这一切都取决于您正在处理的数据量以及您正在迎合什么。[但是，您可以在此处](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDAQFjAA&url=http://bigdata.googlecode.com/files/Hadoop%2520The%2520Definitive%2520Guide%25202nd%2520Edition.pdf&ei=wFpBUbWpO8KHrAfy7YHYBg&usg=AFQjCNEUBmk-aImn8iz07qj8koVXwQ6xag&sig2=FkHs-mkZ1RN2osIYWiBkTg&bvm=bv.43287494,d.bmk&cad=rja)参考此 pdf ，以更深入地了解如何进行估算。

# django - 远程 Web 服务器连接问题

> ID：15401559
> 
> 赞同：-1
> 
> 时间：2013-03-14T05:02:55.590
> 
> 标签：django, apache, ssh, ubuntu-12.04, mod-python

我已经为我们的 Django Web 应用程序设置了一个服务器，以便我们局域网中的每个人都可以访问它们。我已经安装了 Ubuntu 12.04 和 apache 版本 2.2.22 和 modpython 版本 3.3.1。在我们局域网中的一些系统中，服务器无法通过 url 和 ssh 访问，而在其他一些系统中，有时可以访问。当我们远程连接到系统时，这会导致很多问题。请帮助我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:40:16.703

这种类型的问题非常难以回答，因为可能性几乎是无穷无尽的。但是，根据您的说法，如果某些机器可以访问服务器而某些机器不能，则问题与网络有关，而不是与服务器软件（或 Django）有关。

*虽然它可能与您在回复中未提及的一些奇怪的访问规则设置有关。*

所以，有几点需要验证：

1.  无法通过 HTTP 访问应用程序的机器可以通过其 IP 地址 ping 它们所在的服务器吗？如果他们不能，你有一个网络问题。可能是路由问题，可能是防火墙问题。
2.  要查看是否是路由问题，请`traceroute`从其中一台无法访问您的服务器的机器上执行一次操作，然后看看会发生什么。traceroute 是否停止在您网络上的特定路由器上？那么，这可能是一个问题。
3.  要查看是否是防火墙问题，请尝试将其中一台无法访问服务器的机器的 IP 地址更改为可以访问的机器。它奏效了吗？好的，你有防火墙问题。

# jquery - JQGrid 列选择器

> ID：15401560
> 
> 赞同：0
> 
> 时间：2013-03-14T05:02:59.943
> 
> 标签：jquery, jqgrid

在 jqGrid 中设置列​​和其他必需的东西后，我添加了以下代码

```
.navGrid('#pager', { search: false, view: false, del: false, add: false, edit: false },
       {}, // default settings for edit
       {}, // default settings for add
       {}, // delete instead that del:false we need this
       {closeOnEscape: true, multipleSearch: true, closeAfterSearch: true }, // search options
       {} /* view parameters*/
     ).jqGrid ('navButtonAdd', '#pager', { caption: "", buttonicon: "ui-icon-calculator", title: "choose columns",
         onClickButton: function() {
             grid.jqGrid('columnChooser');
         }}).trigger("reloadGrid"); 
```

网格加载正常。我正在尝试实现列选择器。当我点击按钮时`"Grid is undefined"`。我错过了任何文件还是我编码的方式错误？

我被困在这里。如果我做错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:21:38.203

只需在声明声明之前添加 gridId ，以便可以相对于网格识别它，如下所示：

```
$("#grid_name").navGrid('#pager', { search: false, view: false, del: false, add: false, edit: false },
       {}, // default settings for edit
       {}, // default settings for add
       {}, // delete instead that del:false we need this
       {closeOnEscape: true, multipleSearch: true, closeAfterSearch: true }, // search options
       {} /* view parameters*/
     ).jqGrid ('navButtonAdd', '#pager', { caption: "", buttonicon: "ui-icon-calculator", title: "choose columns",
         onClickButton: function() {
             grid.jqGrid('columnChooser');
     }}).trigger("reloadGrid"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:23:01.427

基本错误。

我正在使用下面的代码

```
jQuery('#list1').jqGrid 
```

但是如果我们想在其他地方使用网格，我们需要使用

在顶部添加

```
 var grid = jQuery('#list1'); 
```

# jsf - 如何在带有 Icefaces 的 jsf 操作中使用 Javascript 来更新页面状态？

> ID：15401563
> 
> 赞同：1
> 
> 时间：2013-03-14T05:03:11.147
> 
> 标签：jsf, icefaces, icefaces-3

如何在完成时触发服务器端或客户端事件处理程序`h:commondButton` `action`？此服务器端过程需要一些时间才能完成。当我单击按钮时，需要一些时间来完成工作并更新 UI。当 UI 更新时，我想触发一些东西。我是 JSF 的新手。请帮我解决一下这个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:46:20.373

Icefaces 有一个 javascript 库，可以在客户端对事件进行排队。Icefaces 会在动作完成后刷新 DOM，这样你就可以在动作方法结束时对事件进行排队。

这是我在 Icefaces 1.8.x 和 2.0 中使用的东西。我不太确定 Icefaces 3 是否添加了任何特殊的组件/代码来捕获 DOM 更新事件。

xhtml

```
<script>
function toggleDisplay(id,style)
{
  document.getElementById(id).style.display = style;  
}
</script>
    <div id="msgDiv" style="display:none">Processing ..</div>
    <h:commandButton action="#{mybean.doUpdate}"
          onclick="toggleDisplay('msgDiv','visible')"/> 
```

您的托管 Bean

```
 public class MyBean{
    ....
    doUpdate(ActionEvent e){
    //do stuff
     JavascriptContext.addJavascriptCall(FacesContext.getCurrentInstance(),
        "toggleDisplay('msgDiv','none');")
    }
} 
```

您还可以通过在 h:commandButton 上使用 f:ajax 并在 ajax call 期间重新呈现您的消息来非常轻松地做到这一点。

[http://www.mkyong.com/jsf2/jsf-2-0-ajax-hello-world-example/](http://www.mkyong.com/jsf2/jsf-2-0-ajax-hello-world-example/)

# c# - C# EF4.0 POCO - 如何使用来自不同 DbContext 的实体设置导航属性？

> ID：15401571
> 
> 赞同：0
> 
> 时间：2013-03-14T05:04:07.230
> 
> 标签：c#, entity-framework-4, domain-driven-design, poco, entities

我想在实体上设置外键。我在我的用户控件中公开了外部实体，并希望通过 WinForms 数据绑定对其进行设置。

这是一个问题 - 外部实体最初是从另一个存储库/DbContext 加载的，因为用户控件使用自己的存储库独立地填充自身。

不幸的是，这不能“开箱即用”，如本例所示：

```
var repository1 = GetRepository();
var categoryFromRepository1 = repository1.GetAll<Category>().First();

var repository2 = GetRepository();
var appointmentFromRepository2 = repository2.GetNewAppointment();

appointmentFromRepository2 .Category = categoryFromRepository1;

repository2.Add(appointmentFromRepository2);

repository2.SaveChanges(); 
```

这在 Add() 处失败，并出现以下错误：

```
An entity object cannot be referenced by multiple instances of IEntityChangeTracker. 
```

好的，所以 repository2 无法自动附加 Category，因为它已附加到 repository1。太好了，所以让我们先分离：

```
repository1.Detach(categoryFromRepository1); 
```

由于验证错误而在 SaveChanges() 上失败 - 哎呀，原来 repository2 认为它是一个已添加的条目并尝试插入。太好了，所以让我们附上以避免这种情况：

```
repository2.Attach(categoryFromRepository1); 
```

这行得通！问题解决了。我现在已将 repository2-entity 属性设置为 repository1-entity，瞧。

除了这个解决方案吸水……我们在整​​个程序中有许多数据绑定的自填充用户控件，并且在 SaveChanges() 之前手动分离/重新附加所有外部实体引用是一个可怕的解决方案。此外，假设我们正在保存的存储库碰巧已经附加了对象，那么当我们 Attach() 时会出现此错误：

```
An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key. 
```

我能想到的解决方案都不是那么好：

1) 在 SaveChanges() 上的通用存储库类中，扫描所有已修改实体上的所有外部引用以查找 DbContext 外实体引用，将它们动态更改为 DbContext 内实体引用（必要时从 DB 加载）

2）根本不设置导航属性，只设置外键ID字段（sucks0rz yo' b0x0rz）

3) 在保存之前手动进行这些检查（违反 DRY 和持久性无知原则）

4）放弃对这些属性的数据绑定，手动设置属性并从主存储库加载实体（可怕 - 意味着对数据库的额外查询以获取我们已经拥有的数据）

5）捏造用户控件，以便他们可以在需要时从给定存储库加载数据（糟糕的解决方案，违反了一些基本设计原则......但可行）

任何其他想法，请？

问候，

-布伦丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:45:55.727

鉴于存在多个`DbContext`实例，您似乎有多个有界上下文在起作用。具体来说，有多个聚合在起作用，即`Category`和`Appointment`。由于您遇到的问题，最好只使用标识值来实现聚合之间的引用 - 没有直接的对象引用。如果仅通过 ID`Appointment`引用`Category`，您将不会遇到此问题。尽管您可能需要整个 Category 聚合来进行显示。这个要求可以通过使用[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)来解决。

查看[有效的聚合设计](http://dddcommunity.org/library/vernon_2011/)以了解更多信息。

# javascript - 未声明的 Javascript 函数

> ID：15401575
> 
> 赞同：0
> 
> 时间：2013-03-14T05:04:27.053
> 
> 标签：javascript, jquery

我确定我的函数声明有问题

```
$(window).ready(function(){

if isScrolledIntoView(".my_class"){
    $("#some_id").hide();
}

});

function isScrolledIntoView(elem)
{
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
} 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:05:43.310

`()`如果条件也使用`window.load`or ，您会忘记环绕`document.ready`。

```
$(window).load(function(){

if (isScrolledIntoView(".my_class")){
    $("#some_id").hide();
}

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:06:06.723

```
if (isScrolledIntoView(".my_class")){ 
```

# python - Tkinter 退出按钮使 exe 没有响应

> ID：15401576
> 
> 赞同：0
> 
> 时间：2013-03-14T05:04:28.840
> 
> 标签：python, tkinter

我用 Tkinter 创建了一个窗口。当我单击退出按钮时，Windows 显示 exe 停止工作。谁能告诉我为什么会这样？我认为问题是self.quit，但我不知道原因。

这是代码。

```
from Tkinter import *
class App(Frame):
    def __init__(self, master = None):
        Frame.__init__(self, master)
        self.pack()
        self.createWidgets()
    def createWidgets(self):
        self.Quit = Button(self, text = "QUIT", command = self.quit)
        self.Quit.pack(side = LEFT)

root = Tk()
app =App(master = root)
app.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:33:38.593

在退出按钮中，您正在`quit()`调用`Frame`. 取而代之的是，您需要调用`destroy()`根元素才能正确完成主循环。

```
self.Quit = Button(self, text = "QUIT", command = self.master.destroy) 
```

# c# - 通过 c# 在特定行上方插入修改 web.config

> ID：15401577
> 
> 赞同：1
> 
> 时间：2013-03-14T05:04:29.820
> 
> 标签：c#, asp.net, web-config

我创建了一个 aspx 页面，我可以在其中将名称输入到 texbox 中，它会在我的 web.config 文件中的“自动化”部分下添加一行（例如“允许用户 =“彼得”'），问题是该行总是添加在'deny users=" *"'下面，它会自动阻止在该行下面添加的任何用户登录。有没有办法*通过我的C#代码找到'deny users=""'行并插入'allow users'上面的线？

谢谢

Default.aspx.cs（添加用户代码）

```
protected void btnWrite_Click(object sender, EventArgs e)
{

    System.Configuration.Configuration configuration = WebConfigurationManager.OpenWebConfiguration("~");
    AuthorizationSection authorization = (AuthorizationSection)configuration.GetSection("system.web/authorization");
    AuthorizationRule accessRule = new AuthorizationRule(AuthorizationRuleAction.Allow);
    accessRule.Users.Add(txtAddUser.Text);
    authorization.Rules.Add(accessRule);
    configuration.Save(ConfigurationSaveMode.Minimal); 
} 
```

Web.config（授权部分）

```
 <authentication mode="Forms">
    <forms name=".ASPNET" loginUrl="login.aspx" defaultUrl="Default/default.aspx" />
  </authentication>
  <authorization>
      <allow users="john" />
      <deny users="*" />
      <allow users="peter" />
      <allow users="david" />
  </authorization> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:11:56.350

你可以使用这样的东西

```
XDocument xDoc = new XDocument(@"your config file name. extention"); 
xDoc.Element("authorization")
.Elements("allow")
.Where(item => item.Attribute("users").Value == "john").FirstOrDefault()
.AddAfterSelf(new XElement("allow", new XAttribute("users", "put the user name your want here"))); 
```

要使用它，您需要在顶部添加 using 语句（使用 system.linq）

希望您能理解这一点，请根据需要替换字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:26:16.940

您可以使用 linq 选择授权的后代，并将元素添加到您想要的第一个或最后一个元素

# c# - 索引许多相似字符串的子字符串

> ID：15401579
> 
> 赞同：1
> 
> 时间：2013-03-14T05:04:33.810
> 
> 标签：c#, string, indexing

我有大量数据，在这种情况下，想象一个`String`包含所有文件路径的 80,000 多个数组。

作为文件路径，这意味着它们中的大部分以相同的路径开始，例如，我有超过 50,000 个文件以`"/dataset1/subsetAA/childX/"`.

我想允许对这些路径进行自由文本搜索。现在我用一个看起来像这样的简单谓词来做到这一点：

```
foreach(String term in terms)
    if( path.IndexOf( term, StringComparison.OrdinalIgnoreCase ) == -1 )
        return false;
return true; 
```

我确实会在输入时保存搜索结果，因此您输入的越多越快，但是最初的几次搜索（例如“ `f`”>“ `fo`”>“ `foo`”）甚至可能需要 3 或 4 秒一台快速的机器。

我想建立一个子字符串索引，以消除我使用的需要`IndexOf`，最好是利用公共路径来减少索引大小的索引，我不想消耗太多内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:07:47.813

阅读称为 Trie 的数据结构：[http ://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

它完全符合您的要求，它需要许多字符串并使用字符串从公共前缀中构建一棵树，每个叶子都是一个字符串，遵循其父级中的一系列前缀（您可以通过将其所有父级连接到什么来构建在叶子中，以节省空间）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:18:27.143

> 然而，最初的几次搜索（例如“f”>“fo”>“foo”）即使在速度很快的机器上也可能需要 3 或 4 秒。

那是你唯一需要优化的东西。创建一个由三个散列集组成的非常简单的结构——单个字符、两个字符和三个字符。单字符哈希索引的每个元素都将包含一个包含索引字符的元素列表；两字符哈希索引的每个元素都将包含一个元素列表，其中包括索引的字符对；三字符索引也会这样做。

当键入搜索的初始部分时，使用索引进行查找。例如，当`f`键入时，您`f`将从第一个哈希表中获取包含的项目列表。当用户继续键入时，您将从第二个索引中获取项目`"fo"`，然后从第三个索引中获取项目`"foo"`。

一旦获得四个或更多字符，就返回基于 的搜索`IndexOf`，使用搜索词的最后三个字符根据三个字符的子字符串在散列中查找初始列表。您从列表中获得的项目数量相对较少，因此搜索速度应该更快。

另一个优化应该是在您有足够的项目显示给用户时立即停止搜索。例如，如果用户键入`"tas"`(from `"dataset"`)，您的三字符索引将为您提供 50000 次点击。抓取前 20 个（或您需要显示的任意数量），并跳过其余的：用户将很快优化他们的搜索，因此其他项目可能很快就会被丢弃。

# android - 从资产复制 sqlite 数据库时出错

> ID：15401587
> 
> 赞同：1
> 
> 时间：2013-03-14T05:05:48.917
> 
> 标签：android, database, sqlite, android-sqlite

在我的应用程序中，我必须从资产文件夹中检索 sqlite 数据库。但是当我这样做时，我得到了错误。

这是我用来从资产中复制数据库的编码

```
 public class DataBaseHelper extends SQLiteOpenHelper 
{ 
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window 
//destination path (location) of our database on device 
private static String DB_PATH = "";  
private static String DB_NAME ="(student).sqlite";// Database name 
private SQLiteDatabase mDataBase;  
private final Context mContext; 

public DataBaseHelper(Context context)  
{ 
    super(context, DB_NAME, null, 1);// 1? its Database Version 
    DB_PATH = "/data/data/" + context.getPackageName() + "/databases/"; 
    Log.i(TAG, DB_PATH);
    this.mContext = context; 
}    

public void createDataBase() throws IOException 
{ 
    //If database not exists copy it from the assets 

    boolean mDataBaseExist = checkDataBase(); 
    if(!mDataBaseExist) 
    { 
        this.getReadableDatabase(); 
        this.close(); 
        try  
        { 
            //Copy the database from assests 
            copyDataBase(); 
            Log.e(TAG, "createDatabase database created"); 
        }  
        catch (IOException mIOException)  
        { 
            throw new Error("ErrorCopyingDataBase"); 
        } 
    } 
} 
    //Check that the database exists here: /data/data/your package/databases/Da Name 
    private boolean checkDataBase() 
    { 
        File dbFile = new File(DB_PATH + DB_NAME); 
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists()); 
        return dbFile.exists(); 
    } 

    //Copy the database from assets 
    private void copyDataBase() throws IOException 
    { 
        InputStream mInput = mContext.getAssets().open(DB_NAME); 
        String outFileName = DB_PATH + DB_NAME; 
        OutputStream mOutput = new FileOutputStream(outFileName); 
        byte[] mBuffer = new byte[1024]; 
        int mLength; 
        while ((mLength = mInput.read(mBuffer))>0) 
        { 
            mOutput.write(mBuffer, 0, mLength); 
        } 
        mOutput.flush(); 
        mOutput.close(); 
        mInput.close(); 
    } 

    //Open the database, so we can query it 
    public boolean openDataBase() throws SQLException 
    { 
        String mPath = DB_PATH + DB_NAME; 
        //Log.v("mPath", mPath); 
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY); 
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
        return mDataBase != null; 
    } 

    @Override 
    public synchronized void close()  
    { 
        if(mDataBase != null) 
            mDataBase.close(); 
        super.close(); 
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    } 

} 
```

调用数据库编码

```
public class TestAdapter {
protected static final String TAG = "DataAdapter";

private Context mContext;
public static SQLiteDatabase mDb;
private DataBaseHelper mDbHelper;
public static TestAdapter instance;

public TestAdapter(Context context) {
    this.mContext = context;
    mDbHelper = new DataBaseHelper(mContext);
    createDatabase();
    open();
}

public static TestAdapter getTestAdaptor(Context context) {
    if (instance == null) {
        instance = new TestAdapter(context);
        // createDatabase();
        // open();
    }
    return instance;
}

private void createDatabase() throws SQLException {
    try {
        mDbHelper.createDataBase();
    } catch (IOException mIOException) {
        Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
        throw new Error("UnableToCreateDatabase");
    }

}

private void open() throws SQLException {
    try {
        mDbHelper.openDataBase();
        mDbHelper.close();
        mDb = mDbHelper.getReadableDatabase();
    } catch (SQLException mSQLException) {
        Log.e(TAG, "open >>" + mSQLException.toString());
        throw mSQLException;
    }
}

public void close() {
    mDbHelper.close();
} 
```

这是我得到的错误

```
 03-14 10:18:03.731: E/AndroidRuntime(788): FATAL EXCEPTION: main
03-14 10:18:03.731: E/AndroidRuntime(788): java.lang.Error: ErrorCopyingDataBase
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.example.voicereg.DataBaseHelper.createDataBase(DataBaseHelper.java:49)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.example.voicereg.TestAdapter.createDatabase(TestAdapter.java:38)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.example.voicereg.TestAdapter.<init>(TestAdapter.java:23)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.example.voicereg.TestAdapter.getTestAdaptor(TestAdapter.java:29)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.example.voicereg.VoiceActivity.onOptionsItemSelected(VoiceActivity.java:186)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.app.Activity.onMenuItemSelected(Activity.java:2502)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:950)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:163)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.widget.AbsListView$1.run(AbsListView.java:3168)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.os.Handler.handleCallback(Handler.java:605)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.os.Looper.loop(Looper.java:137)
03-14 10:18:03.731: E/AndroidRuntime(788):  at android.app.ActivityThread.main(ActivityThread.java:4424)
03-14 10:18:03.731: E/AndroidRuntime(788):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 10:18:03.731: E/AndroidRuntime(788):  at java.lang.reflect.Method.invoke(Method.java:511)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-14 10:18:03.731: E/AndroidRuntime(788):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-14 10:18:03.731: E/AndroidRuntime(788):  at dalvik.system.NativeStart.main(Native Method) 
```

谁能帮我在编码部分做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:17:12.877

在 createDatabase 中，您关闭数据库，因此您无法复制

```
this.getReadableDatabase(); 
    this.close(); 
```

应该只是

```
this.getReadableDatabase(); 
```

# python - get particular date in django template Django

> ID：15401591
> 
> 赞同：1
> 
> 时间：2013-03-14T05:06:08.540
> 
> 标签：python, django, date

Hi i need to check the 10th of each month in my django template file , can anybody tell me how can i check this accentually i need to show some data before the 10th of each month and hide that after 10th

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T07:18:26.107

A few things to understand:

1.  Django's templating language isn't really designed around "real" programming. At it's core, it's just building strings.
2.  It doesn't support real "expressions".
3.  …but it does support basic conditionals and loops.
4.  So while you can check if a value is equal to or greater than or less than another value, you can't do much more than that.
5.  Unless you use a filter or a custom template tag.
6.  Filters can transform values from one thing to another.
7.  Template tags can do way more complicated things, that are beyond the scope of this question.
8.  While either a filter or a custom template tag could get where you want to go, they'd be overkill.

So, in my opinion, the easiest way to do this would be to:

1.  Calculate the day of the current date in your view.
2.  Pass that value to your template.
3.  Do a simple "if greater than" check on the passed in value against the number 10.

So, our view would look something like:

```
def sample_view(request, *args, **kwargs):
    from datetime import date
    current_date = date.today()
    current_day = int(current_date.day) # force a cast to an int, just to be explicit
    return render_to_response("template", {'day_of_the_month': current_day }) 
```

And in our template we would do:

```
{% if day_of_the_month > 10 %}
    <!-- Stuff to show after the 10th -->
{% else %}
    <!-- Stuff to show before the 10th -->
{% endif %} 
```

This does expose stuff to your template you might be hiding based on the date for security reasons. *You should never hide secure things in a template based on an if/then check.*

If you need to do additional checks, you could just pass in `current_date`, and check `current_date.day` against the number 10 instead of specifically passing in that day. It'd be less explicit, but more generic and flexible.

# iphone - TableView 中的 UIImageview

> ID：15401600
> 
> 赞同：1
> 
> 时间：2013-03-14T05:07:18.557
> 
> 标签：iphone, ios5, uitableview, ios6

我必须在 tableview 中显示图像，我得到了所有图像但它不显示。这里 Array 包含 3 个图像，这些图像来自服务器。当索引路径中的行单元格调用时，它仅显示第三张图像，即最后一张图像，第一行和第二行将是空白的，但是当它从下到上滚动我的表格视图时，只显示第一张和第二张图像。

-

```
 (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = nil;
    static NSString *CellIdentifier = @"Cell";

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.selectionStyle = UITableViewCellSeparatorStyleNone;
    cell.backgroundColor = [UIColor clearColor];
    if (appDelegate.array_xml != (id)[NSNull null])
    {
        ObjMore = [appDelegate.array_xml objectAtIndex:indexPath.row];

        //imageview
        NSString *str_img = ObjMore.iconurl;
        str_img = [str_img stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        NSLog(@"str_img: %@", str_img);

        self.imageicon = [[UIImageView alloc]initWithFrame:CGRectMake(10, 10, 50, 50)];
        NSURL *url = [NSURL URLWithString:str_img];
        NSLog(@"url %@",url);
        [[AsyncImageLoader sharedLoader]cancelLoadingURL:url];
        self.imageicon.imageURL = url;
        self.imageicon.userInteractionEnabled = YES;
        self.imageicon.tag = indexPath.row;
        self.imageicon.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview:self.imageicon];

 }
       return  cell;
} 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:15:38.853

我建议你使用这个[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)。我用过它，效果很好。要调用此 API：

```
ASyncImage *img_EventImag = alloc with frame;
NSURL *url = yourPhotoPath;
[img_EventImage loadImageFromURL:photoPath];
[self.view addSubView:img_EventImage]; // In your case you'll add in your TableViewCell. 
```

这与使用 UIImageView 相同。很简单，它可以为您完成大部分工作。AsyncImageView 包括 UIImageView 上的一个简单类别，用于在 iOS 上异步加载和显示图像，以便它们不会锁定 UI，以及用于更高级功能的 UIImageView 子类。AsyncImageView 与 URL 一起使用，因此它可以与本地或远程文件一起使用。

加载/下载的图像缓存在内存中，并在出现内存警告时自动清理。AsyncImageView 独立于 UIImage 缓存运行，但默认情况下，位于应用程序包根目录中的任何图像都将存储在 UIImage 缓存中，以避免缓存图像的任何重复。

该库还可用于独立于 UIImageView 加载和缓存图像，因为它提供对底层加载和缓存类的直接访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:29:34.447

请更改您的代码 -

[[AsyncImageLoader sharedLoader]cancelLoadingURL:self.imageicon.imageURL];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:39:41.740

您创建对象 AsyncImageView 而不是 UIImageView

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:14:16.477

获取图像后，您是刷新图像视图还是重新加载表格行？

还要确保在主线程中刷新 UI。

# c# - 保持简单的成员资格 OAuth 会话有效

> ID：15401603
> 
> 赞同：5
> 
> 时间：2013-03-14T05:07:29.800
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, simplemembership

我们正在使用带有 ASP.NET MVC 4 的 Simple Membership Provider，并且我们正在使用 Facebook 客户端来提供 Facebook 登录支持（类似于[http://www.asp.net/mvc/overview/getting-started/using- oauth-providers-with-mvc](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc)）。

我们已经完成了这项工作，但是会话总是在一天之内超时，我们希望登录是持久的，这样用户就可以登录并使用该服务一次。

在开箱即用的*ExternalLoginCallback*函数中，我尝试将*createPersistentCookie*参数设置为 true，但它不会使登录保持活动状态。这是我正在打的电话：

```
OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: true) 
```

我是否必须手动设置表单身份验证 cookie 才能完成持久登录？或者是否有另一种方式来做到这一点，同时仍然利用开箱即用的 Facebook 登录功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:13:06.870

ASPXAUTH [cookie](https://stackoverflow.com/questions/423467/what-is-aspxauth-cookie)用于确定用户是否经过身份验证。您可以使用 firebug 或任何其他 Web 调试工具跟踪过期时间。在您的项目中，cookie 在 ExternalLoginCallback 中设置。这是设置 cookie 过期超时的示例屏幕。![](../Images/a2677ae88e54142f68a864670bcbacf6.png)

我要做的就是使用 SSL，并在 web.config 中更改 cookie 超时。这是超时设置为 1 分钟的示例。不要忘记将 requireSSL 标记为 true。

```
<authentication mode="Forms">
   <forms loginUrl="~/Account/Login" timeout="1" requireSSL="true"/>
</authentication> 
```

但在你的情况下，我认为问题在于来自 facebook 的短期访问令牌（默认为 2 小时左右）。如果问题出在访问令牌[这里是链接](https://stackoverflow.com/questions/12101445/c-sharp-facebook-sdk-extend-an-accesstoken-to-60-days)如何延长访问令牌的生命周期。

# php - 声明数组 PHP

> ID：15401604
> 
> 赞同：0
> 
> 时间：2013-03-14T05:07:31.137
> 
> 标签：php

我有一个小问题，我在方法中声明数组是否错了？

```
function parseJsonString($string, &$table = []) {
....
} 
```

错误结果是“解析错误：语法错误，第 10 行 D:\AppServ\www\test\parser.php 中的意外 '['”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:08:40.717

在 PHP 中，空数组文字`array()`不是`[]`.

正如下面评论中提到的，`[]`在 PHP 5.4 及更高版本中有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:10:46.127

在 php 中，您应该将其声明为：

```
function parseJsonString($string, &$table = array()) {
 ....
} 
```

看到这个[http://php.net/manual/en/functions.arguments.php](http://php.net/manual/en/functions.arguments.php)

只有当您的 php 版本 >= 5.4 时，您才能使用您的语法

# macos - OSX 用户空间设备文件

> ID：15401606
> 
> 赞同：3
> 
> 时间：2013-03-14T05:07:37.237
> 
> 标签：macos, iokit, block-device

有没有办法通过 OSX（10.8+）中的用户空间创建块设备，没有 3rd 方库（FUSE 等）？

我正在尝试创建一个用户空间工具。这个想法是用户向工具提供一个文件，并且该工具创建一个虚拟界面。每当写入接口时，该工具都会对数据应用操作，然后写入原始文件。每当读取接口时，该工具都会从原始文件中读取并应用逆操作。

我不一定需要块设备。该工具需要创建某种可以被视为文件的虚拟界面，即它可以被另一个应用程序打开和保存。

我查看了 I/O Kit 的用户空间例程，但似乎没有什么适用的，因为创建虚拟 USB/FireWire/MMC/SCSI 设备似乎太过分了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:49:56.070

在不进入内核空间的情况下，我能想到的最接近的东西是 fifo 或命名管道——这本质上是一个带有文件名的管道。不幸的是，作为一个管道，你不能寻找，等等 - 你可以打开 fifo 以便在一个进程中读取并在另一个进程中写入。您可以使用`mkfifo`命令行实用程序或`mkfifo()` C 函数来创建它们。

还有 UNIX 域套接字，它们类似于 IP 套接字，但同样由文件名标识，而不是网络结构。这些可以从两端读取和写入，但同样不能搜索。

至于实际实现 vnode 的 ops 函数（OSX 中文件的内核表示），我相信您确实必须放弃内核。请注意，对于创建块设备来说，I/O 工具包并不是绝对必要的——如果 BSD 设备节点足够，并且您不需要支持硬件或弹出卷等。您可以简单地创建一个节点`bdevsw_add()`，提供ops 向量作为参数。（对于基于 I/O Kit 的存储设备，它`IOMediaBSDClient`会自动执行此操作，同时使用 创建字符设备`cdevsw_add_with_bdev()`）另一个更复杂的选项是实现您自己的文件系统。

# php - 在php中比较2次

> ID：15401608
> 
> 赞同：1
> 
> 时间：2013-03-14T05:07:45.927
> 
> 标签：php, datetime, compare

我需要比较事件的开始和结束时间，然后再将它们存储在我的数据库中。事件日期和时间大于或等于当前时间，然后我才将它们存储在数据库中

我正在使用以下代码来比较时间和日期。但它不起作用。有什么办法可以比较这些时间吗？

```
$date = date("m/d/Y");
$dates = $_POST['date'];
$time = date("g:i:a");
$time1 = $_POST['time'];
$meridiem = $_POST['meridiem'];
$c_time = $time1.':'.$meridiem; //eg: 1:00:am
if(($dates >= $date) && (strtotime($c_time) > strtotime($time))){
//block of code
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:12:50.780

确保`$_POST['time'];`给你一个类似的结果，`m/d/Y`并 `$_POST['meridiem'];`给你一个类似于`g:i a`(1:00 am) 的结果。由于该功能，代码在开始时`strtotime()`不起作用。它可能无法识别您的字符串是否为日期。

```
$date = date("m/d/Y");
$time = date("g:i a");
$time1 = $_POST['time'];
$meridiem = $_POST['meridiem'];
$c_time = $time1.' '.$meridiem; //eg: 1:00 am
if(($dates >= $date) && (strtotime($c_time) > strtotime($time))){
//block of code
} 
```

此外，您没有`$dates`在查询中定义。您可以定义如下以使您的代码工作：

```
$dates = date('m/d/Y g:i a'); 
```

# python - Python在同一行中获取Numpy相等的结果

> ID：15401611
> 
> 赞同：2
> 
> 时间：2013-03-14T05:07:57.963
> 
> 标签：python, numpy

我确定有一个功能，但我找不到它。

我正在做如下计算：

```
# L = large iterator of lots of numpy arrays
def replace_error_nan(data):
    data[data == ERROR_VALUE] = np.nan
    return data
L = (replace_error_nan(l) for l in L) 
```

我想执行所有由 replace_error_nan 完成的操作，而不需要使用该函数。我敢肯定这是非常简单的事情。

谢谢！

* * *

**留下“小”评论的人已经回答了问题。我对自己做了一个回答。谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:16:18.993

没有错：

```
for l in L:
  l[l == ERROR_VALUE] = np.nan 
```

如果你坚持单衬它，你可以`__setitem__`在理解中使用。但是不要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:42:29.850

您可以使用`numpy.place()`：

```
L = (np.place(l, l==ERROR_VALUE, np.nan) or l for l in L) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T05:23:47.803

**回答**

```
L = (where(l!=ERROR_VALUE, l, np.nan) for l in L) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T05:24:35.600

如果您尝试进行*迭代器*操作，那么@wim 的方法不好，因为这意味着您的迭代器不再是惰性的，我认为您的方法是完全合理的。定义小函数并不是最糟糕的事情。

也就是说，我认为这些替代方案应该可以工作，尽管我在平板电脑上并且没有测试过它们：

```
L = (l for l in L if not l.__setitem__(l == ERROR_VALUE, np.nan)) 
```

和

```
L = (l.__setitem__(l == ERROR_VALUE, np.nan) or l for l in L) 
```

它们很可爱（依赖于`__setitem__`返回`None`），但我仍然可能会在实际代码中采用您原来的方法。

* * *

更新，因为您与`np.where`我的同时发布了一个解决方案：这可能是最好的解决方案，尽管它确实复制了这些解决方案没有的副本。离开这个是因为我有点喜欢可爱，不过。

# android - Android 中的应用意图

> ID：15401612
> 
> 赞同：0
> 
> 时间：2013-03-14T05:07:59.530
> 
> 标签：android

我需要从命令行启动一个应用程序

```
am start com.project.app 
```

但它说无法解决意图。

我知道我需要提供意图，但我不知道意图是什么。我只想启动应用程序。有什么方法可以列出应用程序的意图，找出已经启动的应用程序的意图是什么，或者从主屏幕上的快捷方式中找出意图？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:13:29.037

要启动任何包的活动，您需要提供该包的组件名称。它类似于 /。或在 AndroidManifest.xml 中定义

例如，包名称：com.me.test，活动名称为 com.me.test.app.TestActivity。然后你需要写

```
am start -n com.me.test/.app.TestActivity 
```

# javascript - 当我们点击子复选框时如何获取父节点的父ID

> ID：15401614
> 
> 赞同：0
> 
> 时间：2013-03-14T05:08:05.897
> 
> 标签：javascript, jquery, asp.net-mvc, kendo-ui, kendo-treeview

我有一个带有复选框模板的剑道树视图。

我的html代码

```
<div id="treeview-left" style=" height: 375px; position: absolute;top: 30px;"></div> 
```

我已将树视图定义为：

```
var treeview1 = $('#treeview-left').kendoTreeView({
            select: onSelect,
            checkboxTemplate: kendo.template($("#treeview-checkbox-template").html()),            
            dragAndDrop: true,
            dataSource: parent, 
            dataTextField: ["parentName", "childName"]
        }).data("kendoTreeView"); 
```

复选框模板的定义如下：

```
<script id="treeview-checkbox-template" type="text/kendo-ui-template">
            <input type="checkbox" />
</script> 
```

数据源将是

```
var parent = new kendo.data.HierarchicalDataSource({
            type: "POST",
            dataType: "json",
            transport: {
                read: {
                    url: "/Projects/leftdisplay"
                }
            },
            schema: {
                model: {
                    id: "parentid",
                    hasChildren: "childName",
                    children: child
                }
            }
        }); 
```

现在父母的孩子会像：

```
 var child = {
            type: "POST",
            dataType: "json",
            transport: {
                read: {
                    url: function (options) {
                        return kendo.format("/projects/modulesleftdisplay?parentid=" + options.parentid + "&roleid=" + rolevalue + "&projectid=" + projectid + "");
                    }
                }
            },
            schema: {
                model: {
                    id: "childid",
                    hasChildren: function () {
                        return false;
                    }
                }
            }
        }; 
```

现在，当我单击子复选框时，我想获取所选子项的父 ID。我怎么能得到那个。

我写过类似的代码

```
$("#treeview-left [type=checkbox]").live('change', function (e) {      
    var chkBox = $(this)
    var parentid = chkBox.parent();
    var date = $('#treeview-left').data('kendoTreeView').dataItem(parent_id);
    var parid = date.id;
    var childid = $('#treeview-left').data('kendoTreeView').dataItem(parentid);
}); 
```

但parid没有得到。如何获取所选孩子的父 ID。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:12:33.320

尝试这个：

```
// Find all the checkboxes:
var checkboxes = Array.prototype.slice.call(document.querySelectorAll('#yourFormsID input[type=checkbox]'));

checkboxes.forEach(function(checkbox) {                //<== loop through checkboxes
    checkbox.addEventListener('change', function() {   //<== When clicked:
        console.log(this.parentNode.id);               //<== Log the id of the checkbox's parentNode in the console.
    }, false);
}); 
```

[这是一个演示](http://jsbin.com/aheqev/1/edit)。一定要打开控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:15:12.800

你可以用这个

```
 var parentId = $(this).parent().closest(parent element).attr('id') 
```

例子：

```
 var parentId  = $(this).parent().closest('li').attr('id') 
```

代替

```
 var chkBox = $(this)

 var parentid = chkBox.parent(); 
```

获取父 ID。

# c++ - C++ 使用指针创建数组

> ID：15401616
> 
> 赞同：0
> 
> 时间：2013-03-14T05:08:19.550
> 
> 标签：c++, arrays, pointers

我目前正在学习 C++，如果我看起来有点傻，很抱歉。

我目前坚持的练习要求我编写一个函数 IndexArray(int n)，它返回一个指向具有 n 个元素的动态分配的整数数组的指针，每个元素都初始化为自己的索引。（从工作表复制）。

我已经读了好几遍了，并没有完全理解它，但他们举了一个例子：

假设 intPtr 被声明为

```
int *intPtr; 
```

该声明

```
intPtr = IndexArray(10); 
```

应该产生以下内存配置：

```
intPtr ->  0 1 2 3 4 5 6 7 8 9 
```

从这个例子我猜我的函数需要创建一个大小为 n 的数组，值从 0 到 n-1，然后另一个指针需要指向该数组。

这是他们的测试代码：

```
int *values1;
values1 = IndexArray(10); 
```

我知道如何轻松创建数组，但我对指针的理解还不够充分，无法真正知道该怎么做。我认为返回一个数组会起作用：

```
int *IndexArray(int n) {
    cout << n << endl;
    int arrayTemp[n];
    for(int i = 0; i < n; i++) {
        arrayTemp[i] = i;
    }
    return arrayTemp;
} 
```

但是，在测试时，values1 数组不包含 0-9 的值（尽管 arrayTemp 在它返回之前就包含了）。

任何帮助都会很棒，希望我已经提供了您需要帮助的一切。谢谢！:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:14:00.450

```
int arrayTemp[n]; 
```

请注意，该语句在函数中，因此当函数终止时，arrayTemp[] 将不再可用，它可以被删除：它是一个#local# 变量！

所以，如果你想这样做，你可以使用：

```
int * arrayTemp = new int[n]; 
```

*注意*：您必须删除它以避免内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:14:55.843

**你不可以做这个：**

```
int *IndexArray(int n) {
    cout << n << endl;
    int arrayTemp[n]; //declare a local array
    for(int i = 0; i < n; i++) {
        arrayTemp[i] = i;
    }
    return arrayTemp; //return a pointer to a local
} 
```

**您不能返回指向本地的指针。一旦你回来，当地人就不复存在了。指针现在指向垃圾。**

相反，您必须使用`malloc`(C or C++) 或(C++) 为 10 个整数动态创建存储，并且由于这是在堆上动态创建的，因此它会在返回后持续存在（如果ed`new`则需要d 或d 如果它是一个用 . 制作的数组。对于用你制作的单个对象，只需使用)`free``malloc``delete[]``new``new``delete`

# macros - Mutt 宏：如何在一个宏中设置然后使用变量？

> ID：15401622
> 
> 赞同：9
> 
> 时间：2013-03-14T05:08:56.130
> 
> 标签：macros, mutt

我正在尝试编写一个小的 mutt 宏来设置一个变量，然后在同一个宏中重新使用该变量。

我真正想做的是在 To: 地址（稍后我将动态填充）中撰写一条消息和 sub 。

这是在我的 .muttrc

```
set my_to = "bobby@test.com"
macro index E "<enter-command> set my_to = barry@test.com<enter>mn\$my_to" 
```

我的问题是变量**my_to**永远不会从**bobby@...**变为**barry@...**

我相信这与在配置解析期间被解释的**$**有关，并且手册建议使用 escape 。但如果我这样做，只会出现文字**“$my_to”**。

我究竟做错了什么？

*更新：* 我仍然无法像上面那样设置/获取变量，但我错过了一个明显的 Mutt 解决方案来解决我的问题*ESC* -e 将根据现有的电子邮件创建一个新电子邮件。类似于 Thunderbird 中的新编辑。

# groovy - 像这样的事情的时髦单线是什么？

> ID：15401623
> 
> 赞同：1
> 
> 时间：2013-03-14T05:08:58.840
> 
> 标签：groovy

我编写了以下函数，它遍历数组的每个元素，以查看该元素包含在（子字符串）我的名为 name 的测试变量中。我确信 groovy 有一种简单的方法可以让我内联它而不是单独的方法。任何人都可以帮忙吗？

```
boolean testArray (array, name)  
{       
  for (elem in array)
  {
    if (name.contains (elem))
      return true
  }
  return false
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:26:37.530

怎么样 ：

```
array.any { name.contains it } 
```

# django - 文件写入问题

> ID：15401625
> 
> 赞同：0
> 
> 时间：2013-03-14T05:09:08.937
> 
> 标签：django, file-io, python-2.7, django-views

我已经为此苦苦挣扎了几个小时。我想将 Django 生成的文本文件发送到另一台服务器。为此，我使用 scp 和`subprocess.call()`. 一切顺利，我得到了一个`return_code == 0`，但 scp 发送了 0 个字节。在服务器端创建的文件是空的。

我打印了执行的确切命令，路径是正确的，如果我放入 shell，它可以完美运行。

这是代码：

```
form = SubmitForm(request.POST or None)
context['form'] = form
if request.method == 'POST':
    if form.is_valid():
        # write file in ~/hipercic/apps/dcor/jobs/
        params_file = open('apps/dcor/jobs/job_' + datetime.today().strftime("%Y%m%d_%H%M%S") + '_params.txt', 'wb')
        for key, val in form.cleaned_data.iteritems():
            params_file.write(str(val) + ' \n')
        params_file.close       
        cmd = 'scp /home/guillet/hipercic/' + params_file.name + ' guillet@helios.public.stolaf.edu:'
        context['cmd'] = cmd
        return_code = subprocess.call(cmd, shell=True)
        context['return_code'] = return_code
        return render(request, 'base_pending.html', context) 
```

我想到了一个可能的竞争条件，文件在发送之前没有时间完全写入，但是 time.sleep(3) 没有任何变化。

此外，如果我尝试在关闭文件后立即重新打开并读取文件，那么文件确实很奇怪，也是问题的核心，该文件是空的：

```
with open('/home/guillet/hipercic/' + params_file.name, 'rb') as f:
    print f.read() # prints nothing!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:12:08.563

你已经做了`params_file.close`而不是`params_file.close()`

正确关闭文件会将数据刷新到您要写入的文件中

`with`处理文件对象时最好使用关键字。这样做的好处是文件在其套件完成后正确关闭。

# java - Java，检查字符串是否是回文。不区分大小写

> ID：15401630
> 
> 赞同：4
> 
> 时间：2013-03-14T05:09:22.080
> 
> 标签：java, string, compare

如果字符串是回文，我想编写一个 java 方法来返回 true。

这是我到目前为止所拥有的：

```
String palindrome = "...";
boolean isPalindrome = palindrome.equals(
   new StringBuilder(palindrome).reverse().toString()); 
```

我的问题是它不考虑这样的词：`Race car`成为回文。

```
Doc, note, I dissent. A fast never prevents a fatness. I diet on cod. 
```

测试这是否是回文的最佳方法是什么，不区分大小写并忽略标点符号。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T05:17:43.913

使用此正则表达式删除所有标点符号和空格并将其转换为小写

```
String palindrome = "..." // from elsewhere
boolean isPalindrome = palindrome.replaceAll("[^A-Za-z]", "").toLowerCase().equals(new StringBuilder(palindrome.replaceAll("[^A-Za-z]", "").toLowerCase()).reverse().toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:12:55.660

尝试这个 ..

```
public static void main(String[] args) {

    boolean notPalindrome = false;
    String string = "Doc, note, I dissent. A fast never prevents a fatness. I diet on cod";

    string = string.replaceAll("[^a-zA-Z]+","").toLowerCase();

    char[] array = string.toCharArray();
    for(int i=0, j=array.length-1; i<j; i++, j--) {
        if(array[i] != array[j]) {
            notPalindrome = true;
            break;
        }
    }
    System.out.println(string + " is palindrome? " + !notPalindrome);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:03:37.567

1.  转换为小写

2.  使用正则表达式删除除字母以外的所有内容

3.  使用[StringBuilder反转字符串](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)

4.  比较字符串是否相等

代码：

```
/**
 *  Returns true if s is a palindrome, ignoring whitespace
 *  punctuation, and capitalization.  Returns false otherwise.  
 */

public boolean isPalindrome(String s) {
    String forward = s.toLowerCase().replaceAll("[^a-z]", "");
    String reverse = new StringBuilder(forward).reverse().toString();
    return forward.equals(reverse);
} 
```

有关详细信息，请参阅[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)和[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)的文档：

*   [String.toLowerCase()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toLowerCase%28%29)
*   [String.replaceAll()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)
*   [StringBuilder.reverse()](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#reverse%28%29)

您也可以通过谷歌搜索“ *Java 7 String* ”并单击第一个结果来找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:21:37.290

如果需要，使用下面的正则表达式将偶数`numeric`字符保留在回文中。否则，您可以`0-9`从正则表达式中删除。

```
String palindrome = "..." // from elsewhere
String regex = "[^A-Za-z0-9]";
boolean isPalindrome = palindrome.equals(new StringBuilder(palindrome.replaceAll(regex, "").toLowerCase()).reverse().toString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T05:26:53.423

这是一个非`regex`解决方案。

```
public class so4
{
public static void main(String args[])
{
    String str = "Doc, note, I dissent. A fast never prevents a fatness. I diet on cod";
    char c[] =str.toCharArray();
    String newStr="";
    for(int i=0;i<c.length;i++)
    {
        if( (c[i]>=65 && c[i]<=90) || (c[i]>=97 && c[i]<=122))  //check ASCII values (A-Z 65-90) and (a-z 97-122)
        {
            newStr = newStr + c[i]; 
        }
    }
    boolean isPalindrome = newStr.toLowerCase().equals(new StringBuilder(newStr.toLowerCase()).reverse().toString());
    System.out.println(isPalindrome);
}
} 
```

# ios - 为什么UIViewController的view的坐标是（0,20）以及如何改变（iPad）

> ID：15401632
> 
> 赞同：0
> 
> 时间：2013-03-14T05:09:31.263
> 
> 标签：ios, cocoa-touch

我发现 UIViewController 的视图坐标是 (0,20)，大小是 1024*748 在 MainStoryboard_iPad.storyboard ，我不能改变。我怎样才能改变视图到 (0,0) 和大小是 1024*768 ，所以我可以全屏显示视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:15:36.967

这是由于顶部存在大小为 20 的状态栏。在情节提要中，您可以转到属性检查器并将状态栏更改为无。这将显示大小（1024、768）的完整视图，这有助于通过情节提要设置视图。而不是在视图控制器的 .m 文件中写入以下方法：

```
-(void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
[[UIApplication sharedApplication]setStatusBarHidden:YES withAnimation:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:13:28.893

这可能是因为状态栏。您可以这样隐藏状态栏`[[UIApplication sharedApplication] setStatusBarHidden:YES animated:YES];`

# eclipse - Eclipse Juno 更新后无法启动

> ID：15401633
> 
> 赞同：1
> 
> 时间：2013-03-14T05:09:40.110
> 
> 标签：eclipse, eclipse-juno

我见过其他问题，例如[Eclipse juno can't start after update](https://stackoverflow.com/questions/13320583/eclipse-juno-cant-start-up-after-update)。我的问题与那个类似，但错误日志略有不同。正如在另一个问题中看到的，我已经删除了`.lock`文件，没有`.snap`文件并开始了`eclipse -clean`，但问题仍然存在。我`eclipse`已从终端执行，但未显示任何消息并显示以下消息。

![Eclipse 启动时出错](../Images/70822b9584fe273ae5d81a43b0b87879.png)

日志文件的开头如下。

```
 !SESSION 2013-03-14 10:45:43.362 -----------------------------------------------
eclipse.buildId=M20130204-1200
java.version=1.7.0_15
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
Command-line arguments:  -os linux -ws gtk -arch x86_64

!ENTRY org.eclipse.equinox.ds 4 0 2013-03-14 10:45:44.307
!MESSAGE [SCR] Exception while activating instance org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngineManager@28fed5b1 of component org.eclipse.e4.ui.css.swt.theme  
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
    at java.lang.Class.getDeclaredMethods(Class.java:1810)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.getMethod(ServiceComponent.java:126)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.activate(ServiceComponent.java:213)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.activate(ServiceComponentProp.java:146)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:345)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)
    at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)
    at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)
    at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)
    at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)
    at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.widgets.Display
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 15 more

!ENTRY org.eclipse.equinox.ds 4 0 2013-03-14 10:45:44.309
!MESSAGE [SCR] Exception while activating instance org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngineManager@28fed5b1 of component org.eclipse.e4.ui.css.swt.theme  
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
    at java.lang.Class.getDeclaredMethods(Class.java:1810)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.getMethod(ServiceComponent.java:126)
    at org.eclipse.equinox.internal.ds.model.ServiceComponent.activate(ServiceComponent.java:213)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.activate(ServiceComponentProp.java:146)
    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:345)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)
    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)
    at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)
    at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)
    at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)
    at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)
    at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.widgets.Display
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 15 more

!ENTRY org.eclipse.osgi 4 0 2013-03-14 10:45:44.833
!MESSAGE An error occurred while automatically activating bundle org.eclipse.ui.workbench (499).
!STACK 0
org.osgi.framework.BundleException: The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:172)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
    at java.lang.Class.getConstructor0(Class.java:2723)
    at java.lang.Class.newInstance0(Class.java:345)
    at java.lang.Class.newInstance(Class.java:327)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
    at java.lang.Class.getConstructor0(Class.java:2723)
    at java.lang.Class.newInstance0(Class.java:345)
    at java.lang.Class.newInstance(Class.java:327)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    ... 37 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 43 more
Root exception:
java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
    at java.lang.Class.getConstructor0(Class.java:2723)
    at java.lang.Class.newInstance0(Class.java:345)
    at java.lang.Class.newInstance(Class.java:327)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
    at java.lang.Class.getConstructor0(Class.java:2723)
    at java.lang.Class.newInstance0(Class.java:345)
    at java.lang.Class.newInstance(Class.java:327)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 43 more

!ENTRY org.eclipse.osgi 2 0 2013-03-14 10:45:46.608
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.608
!MESSAGE Bundle reference:file:plugins/org.eclipse.pde.ui_3.7.2.v20130121-093123.jar was not resolved.
!SUBENTRY 2 org.eclipse.pde.ui 2 0 2013-03-14 10:45:46.608
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.608
!MESSAGE Bundle reference:file:plugins/org.eclipse.mylyn.java.tasks_3.8.2.v20120916-1200.jar was not resolved.
!SUBENTRY 2 org.eclipse.mylyn.java.tasks 2 0 2013-03-14 10:45:46.608
!MESSAGE Missing required bundle org.eclipse.debug.ui_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.608
!MESSAGE Bundle reference:file:plugins/org.eclipse.ant.ui_3.5.301.v20121210-210948.jar was not resolved.
!SUBENTRY 2 org.eclipse.ant.ui 2 0 2013-03-14 10:45:46.608
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.6.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.datatools.sqltools.routineeditor.ui_1.0.3.v201211200616.jar was not resolved.
!SUBENTRY 2 org.eclipse.datatools.sqltools.routineeditor.ui 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.m2e.editor.xml_1.3.1.20130219-1424.jar was not resolved.
!SUBENTRY 2 org.eclipse.m2e.editor.xml 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required capability Require-Capability: osgi.ee; filter="(|(&(osgi.ee=JavaSE)(version=1.5))(&(osgi.ee=JavaSE)(version=1.6)))".
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.springsource.ide.eclipse.commons.frameworks.ui_3.1.0.201210040458-RELEASE.jar was not resolved.
!SUBENTRY 2 org.springsource.ide.eclipse.commons.frameworks.ui 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.datatools.sqltools.debugger.core.ui_1.0.0.v201003161000.jar was not resolved.
!SUBENTRY 2 org.eclipse.datatools.sqltools.debugger.core.ui 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.ui.externaltools_3.2.100.v20120530-1753.jar was not resolved.
!SUBENTRY 2 org.eclipse.ui.externaltools 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.jdt.ui_3.8.2.v20130107-165834.jar was not resolved.
!SUBENTRY 2 org.eclipse.jdt.ui 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.m2e.launching_1.3.1.20130219-1424.jar was not resolved.
!SUBENTRY 2 org.eclipse.m2e.launching 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_0.0.0.
!SUBENTRY 2 org.eclipse.m2e.launching 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required capability Require-Capability: osgi.ee; filter="(|(&(osgi.ee=JavaSE)(version=1.5))(&(osgi.ee=JavaSE)(version=1.6)))".
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.m2e.refactoring_1.3.1.20130219-1424.jar was not resolved.
!SUBENTRY 2 org.eclipse.m2e.refactoring 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required capability Require-Capability: osgi.ee; filter="(|(&(osgi.ee=JavaSE)(version=1.5))(&(osgi.ee=JavaSE)(version=1.6)))".
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.jdt.junit_3.7.100.v20120523-1543.jar was not resolved.
!SUBENTRY 2 org.eclipse.jdt.junit 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.jdt.debug.ui_3.6.100.v20120530-1425.jar was not resolved.
!SUBENTRY 2 org.eclipse.jdt.debug.ui 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.8.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.eclipse.wst.sse.ui_1.3.102.v201301162301.jar was not resolved.
!SUBENTRY 2 org.eclipse.wst.sse.ui 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing required bundle org.eclipse.debug.ui_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.609
!MESSAGE Bundle reference:file:plugins/org.springframework.ide.eclipse.ui_3.1.0.201210040510-RELEASE.jar was not resolved.
!SUBENTRY 2 org.springframework.ide.eclipse.ui 2 0 2013-03-14 10:45:46.609
!MESSAGE Missing imported package org.eclipse.debug.ui_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-03-14 10:45:46.610 
```

完整的日志可以在[gist.github.com](https://gist.github.com/TheKojuEffect/5158958#file-eclipse-juno-startup-error)中找到。

我该如何解决这个问题？我已经安装了我想保留并且不想重新安装的插件。

谢谢。

# php - mcrypt_encrypt 的输出大小

> ID：15401639
> 
> 赞同：1
> 
> 时间：2013-03-14T05:10:34.493
> 
> 标签：php, encryption, base64, mcrypt

我有一个带有字段**名称**的表。我想将名称数据加密存储到字段中。名称可以是 128 个字符。那么字段的类型应该是什么（例如：varchar(256) 或文本）。

我用于加密/解密的以下功能。

```
<?php

$salt ='whatever_you_want';

function simple_encrypt($text) {
    return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $salt, $text, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
}

function simple_decrypt($text) {
    return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $salt, base64_decode($text), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:28:34.933

为什么不在您的代码中运行几个 128 个字符长度的字符串，显示输出的最大大小并相应地设置您的字段长度？使用这个现有的密钥，它`172`每次都返回长度。

```
<?php

function rand_string( $length ) {
    $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";  

    $size = strlen( $chars );
    for( $i = 0; $i < $length; $i++ ) {
        $str .= $chars[ rand( 0, $size - 1 ) ];
    }

    return $str;
}

$salt ='whatever_you_want';

function simple_encrypt($text) {
    return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $salt, $text, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
}

function simple_decrypt($text) {
    return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $salt, base64_decode($text), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)));
}

for($i=0;$i<100;$i++)
{
$word=rand_string(128);
$e=simple_encrypt($word);
echo strlen($e)."<br>";
}

?> 
```

# php - PDO 类和 PDOStatement 类的关系

> ID：15401641
> 
> 赞同：2
> 
> 时间：2013-03-14T05:10:37.953
> 
> 标签：php, mysql, pdo, cursor, pdostatement

我是一个 php 和 mysql 初学者，我目前正在自学 PDO 并且混淆了一些概念：

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
$sql = "SELECT * FROM users";
$users = $dbh->query($sql); 
```

1.PDO类和PDOStatement类是什么关系？

`$dbh`是类[PDO](http://www.php.net/manual/en/class.pdo.php)的新对象，但为什么 $users 是[PDOStatement](http://www.php.net/manual/en/class.pdostatement.php)对象？`fetchAll()`是类里面的函数`PDOStatement`，但是你可以这样使用它`$users->fetchAll()`，是`$users`a`PDO`还是`PDOStatement`object？

2.有人说$users是游标，一旦被消费，就不会回退到结果集的开头。

```
foreach ($users as $row) {
    print $row["name"] . "<br/>";
} 
```

但是为什么你可以在`foreach`声明中使用它呢？`foreach`提供了一种遍历数组的方法。光标实际上是什么？光标是指针吗？

3.对于[pdostatement](http://www.php.net/manual/en/class.pdostatement.php)类，文档说：

```
PDOStatement implements Traversable { ... } 
```

为什么这个类实现 Traversable 接口？是空界面吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:32:33.503

根据[文档](http://www.php.net/manual/en/class.traversable.php)，该`Traversable`接口允许您将对象用于`foreach`循环，并且只应该在内部使用。将其视为使用 PDOStatement 的一种便捷方式。

基本上，使用 PDO 有两种方法可以执行查询，一种是使用[PDO::prepare()](http://www.php.net/manual/en/pdo.prepare.php)和[PDOStatement::execute()](http://www.php.net/manual/en/pdostatement.execute.php)，另一种是使用[PDO::query()](http://www.php.net/manual/en/pdo.query.php)。后者在一次调用中准备/执行。

`PDO::query()`并且`PDO::execute()`不会返回结果，另一方面 PDOStatement 对象将允许您指定要返回的数据。[PDOStatement::fetchAll()](http://www.php.net/manual/en/pdostatement.fetchall.php)将允许定义您希望如何组织数据。

乍一看似乎更复杂，但它提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:22:38.363

所有这些乱七八糟的东西都被称为“语法糖”，旨在让开发人员的生活变得甜蜜，尽管实际上它会让味道太甜到令人厌恶的地步。

所以，有*两种*对象的特征——自然的和非自然的。
而你所有的困惑都来自后者。

在你的位置，我会直接忘记它们，直接使用对象。

> 1.PDO类和PDOStatement类是什么关系？

那是2个不同的班级。它们服务于不同的目的。就像在旧的 mysql 中一样，你有连接资源和结果资源。您只有一个连接/PDO 实例，但可以有任意数量的实际查询结果/stmt 类。

> 但是为什么你可以在 foreach 语句中使用它呢？

这就是我上面谈到的语法糖。他们只是在语句对象中添加了这种可能性。

# ios - 子视图是来自主线程以外的线程的布局

> ID：15401642
> 
> 赞同：0
> 
> 时间：2013-03-14T05:10:40.140
> 
> 标签：ios

错误信息如下： bool _WebTryThreadLock(bool), 0xf28fbd0: 试图从除主线程或网络线程之外的线程获取网络锁。这可能是从辅助线程调用 UIKit 的结果。现在崩溃...

```
1   _ZL17_WebTryThreadLockb

2   WebThreadLock

3   -[UIWebTiledView layoutSubviews]

4   -[UIWebDocumentView layoutSubviews]

5   -[UIView(CALayerDelegate) layoutSublayersOfLayer:]

6   -[NSObject performSelector:withObject:]

7   -[CALayer layoutSublayers]

8   CA::Layer::layout_if_needed(CA::Transaction*)

9   CA::Context::commit_transaction(CA::Transaction*)

10  CA::Transaction::commit()

11  CA::Transaction::pop()

12  +[CATransaction commit]

13  FigLayerSynchronizerSynchronizeToMoment

14  itemremote_TimebaseSynchronizationUpdate

15  FigPlayerRemoteCallbacksServer_TimebaseSynchronizationUpdate

16  _XTimebaseSynchronizationUpdate

17  figmoviecallbacks_server

18  fpr_ClientPortCallBack

19  FigExpressNotificationThread

20  figThreadMain

21  _pthread_start

22  thread_start 
```

**我知道这是由于在主线程以外的线程中更新 UI 引起的。但我不知道为什么它不是在主线程中更新**

以下是描述： 只是类似于应用程序包风影音。支持自动播放，最小化播放界面，关闭播放界面。当我点击picWall中的一张图片时，它跳转到一个uiviewcontroller **A**，并播放音频文件，显示音频文件内容并更新progressview的进度。

**A**由自定义视图和movieplaycontroller 变量组成。

自定义 UIView 由 textview（显示音频文件内容）、progressView 、图片、最小化按钮、关闭按钮组成。

因为当我点击最小化按钮时它应该继续播放当前音频，而当音频正在播放时，我应该在我的自定义 UIView 中更新进度条的进度，所以我将 movieplaycontroller 变量和自定义视图定义为全局变量。

movieplaycontroller 变量是在 appdelegate 文件中初始化的，但自定义视图是在**A**中初始化的。

当我点击最小化按钮和关闭按钮时，我会消失A，同时释放自定义视图。

**以上是我的功能需求和我的实现。当它进入 * *A****时，我没有创建新线程，所以我认为自定义视图不会被不在主线程中的线程更新。但是当我反复点击不同的音频播放时它会崩溃。我总是发生这种情况重复了几次，没有纪律。iPhone4上会出现，iPhone4s，iphone 5上没看到。我没有iPhone 3gs，不知道会不会也出现。**

```
Now I modify my code to add the custom view by the function  ”performSelectorOnMainThread“ in A's init function.It seemed solved. 
```

我发布了这个问题，因为我想知道导致我的自定义视图从主线程以外的线程更新的原因。如果有人知道，请告诉我！谢谢

# c# - 如何在 MVC 中添加 DropDownList

> ID：15401643
> 
> 赞同：1
> 
> 时间：2013-03-14T05:10:40.230
> 
> 标签：c#, asp.net-mvc

我是 MVC 的新手。

我的数据库中有两个表，分别称为“公司”和“部门”，所以一个公司有很多部门。

在我的项目中，我将我的数据库作为 ADO.net 实体模型添加到模型中。我创建主键和锻造键。因此，当我创建一个新部门时，我想在下拉列表中显示公司列表。

我不知道该怎么做？

我试试这样

```
 @Html.DropDownListFor(model => model.tblCompany.PKComID, Model.tblCompany) 
```

但它不起作用我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:15:18.013

假设你有这样的东西

```
public class Company
{
    public int PKComID { get; set; }
    public string Name { get; set; }
} 
```

在控制器中填充`ViewBag.AllCompanies`属性。然后在您的视图中使用此代码：

```
@{
    var allCompanies = ViewBag.AllCompanies as IEnumerable<Company>;
}
@Html.DropDownListFor(n => n.tblCompany.PKComID, new SelectList(allCompanies, "PKComID", "Name")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:23:48.077

你可以试试这个

在模型类中添加选择列表为

```
public SelectList Company { get; set; } 
```

在控制器中填写公司表，如

```
model.Company = new SelectList(CompanyList , "Id", "Name", PKComID); 
```

最后，您可以在视图中绑定为

```
@Html.DropDownListFor(m => model.tblCompany.PKComID, Model.Company , "--Select Company--") 
```

我希望它会有所帮助。

# java - “包括其他布局”会导致在模拟器中构建失败。没有错误或相关警告

> ID：15401650
> 
> 赞同：0
> 
> 时间：2013-03-14T05:10:48.517
> 
> 标签：java, android, eclipse, android-layout

我使用图形编辑器中的“包含其他布局”向活动的主布局添加了几个小的相对布局。但是，由于某种原因，当我尝试在模拟器中加载活动时，它失败了。除了 LogCat 中的一堆通用内容之外，没有任何警告，这些内容看起来与我遇到错误时的任何其他内容完全相同。在此活动的 .Java 文件中，我成功地引用了这些包含的布局中的视图，没有任何问题。

这是 Activity 的 .xml 文件中包含布局的元素。

```
<include
    android:id="@+id/include1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/lblParklandAssistDesc"
    android:layout_below="@+id/lblParklandAssistDesc"
    layout="@layout/parklandweight" />

<include
    android:id="@+id/include2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/include1"
    android:layout_below="@+id/include1"
    layout="@layout/parklandbsa" /> 
```

这些是包含的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<Button
    android:id="@+id/btnWeightUp"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/Up" />

<Button
    android:id="@+id/brnWeightDown"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/btnWeightUp"
    android:text="@string/Down" />

<TextView
    android:id="@+id/lblParklandWeightTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/btnWeightUp"
    android:text="@string/lblWeight"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/txtWeight"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/lblParklandWeightTitle"
    android:layout_toRightOf="@+id/btnWeightUp"
    android:ems="10"
    android:inputType="number"
    android:text="100" >

    <requestFocus />
</EditText>

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/lblParklandWeightTitle" >

    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/lb" />

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/kg" />
</RadioGroup>

</RelativeLayout> 
```

然后是另一个。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<Button
    android:id="@+id/btnBSADown"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btnBSAUp"
    android:layout_below="@+id/btnBSAUp"
    android:text="@string/Down" />

<TextView
    android:id="@+id/lblParklandBSAtitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="58dp"
    android:text="@string/lblParklandBSAtitle"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/btnBSAUp"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/Up" />

<EditText
    android:id="@+id/txtBSA"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/lblParklandBSAtitle"
    android:layout_below="@+id/lblParklandBSAtitle"
    android:ems="10"
    android:inputType="number"
    android:text="3" />

</RelativeLayout> 
```

对于可能发生的事情，或者坦率地说，甚至在哪里看，我都没有最模糊的想法。我已经使用 eclipse 和 java 和 android 工作了将近两个星期，制作了一个应用程序，并且很幸运，并且很容易学习一切。这让我很困惑。任何帮助将不胜感激！

新添加（添加 .Java 内容，因为似乎 xml 布局本身可能不是问题）：

在活动类的顶部，我声明了将处理其他布局的变量，如下所示：

```
View parklandWeight;
View parklandBSA; 
```

然后，当我将对象分配给它时 - 我这样做：

```
parklandWeight = (View) findViewById(R.layout.parklandweight);
parklandBSA = (View) findViewById(R.layout.parklandbsa); 
```

LogCat 中似乎来自此 activity.java 的唯一错误发生在第二次分配之后。在另一个指代其中一个布局内的按钮的分配上：

```
btnWeightUp = (Button) parklandWeight.findViewById(R.id.btnWeightUp); 
```

这可能是我问题的根源吗？我已经在 StackOverflow 中阅读了至少五六个不同的线程，建议这样做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:29:06.153

我试过这些代码运行完美......试试这些。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
tools:ignore="HardCodedText" >

<include
    android:id="@+id/include2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/include1"
    android:layout_alignParentTop="true"
    android:layout_below="@+id/include1"
    layout="@layout/top" />

<Button
    android:id="@+id/btnWeightUp"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/include2"
    android:text="Up" />

<Button
    android:id="@+id/brnWeightDown"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btnWeightUp"
    android:text="Down" />

<TextView
    android:id="@+id/lblParklandWeightTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/include2"
    android:layout_toRightOf="@+id/btnWeightUp"
    android:text="lblWeight"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/txtWeight"
    android:layout_width="55dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/lblParklandWeightTitle"
    android:layout_toRightOf="@+id/btnWeightUp"
    android:ems="10"
    android:inputType="number"
    android:text="100" >

    <requestFocus />
</EditText>

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/include2"
    android:layout_toRightOf="@+id/lblParklandWeightTitle" >

    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="lb" />

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="kg" />
</RadioGroup>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:05:02.920

我输入的布局变量错误。而不是使用

```
View layoutVariable; 
```

我需要按如下所示的实际布局类型输入。

```
RelativeLayout parklandWeight;
RelativeLayout parklandBSA; 
```

然后，当将实际布局对象分配给变量时，我当然应该将其键入为布局类型。但是，更重要的是，在 findViewById 方法中，我使用的是 R.layout.layout_id，而我应该使用 R.id.layout_id。我还指的是 xml 文件名，我应该指的是在 xml 文件的 include 标记中使用的相同 +id。这是我应该这样做的方式：

```
parklandWeight = (RelativeLayout) findViewById(R.id.include1);
parklandBSA = (RelativeLayout) findViewById(R.id.include2); 
```

我希望这可以帮助遇到同样问题的任何 android 开发新手。我希望你们都有一个令人难以置信的一天！

# jquery - 有没有办法选择这个父母？

> ID：15401653
> 
> 赞同：1
> 
> 时间：2013-03-14T05:11:13.213
> 
> 标签：jquery, html

```
<div class="chatbox-window">
    <div class="chatbox-title">
        <div class="chatbox-username"></div><div class="chatbox-close"><span class="chatbox-close-button"></span></div>
    </div>
    <div class="chatbox-content"><div class="chatbox-msg"></div></div>
    <div id="chatbox-posting"></div>
</div> 
```

* * *

```
 $(".chatbox-close-button").click(function(){
        $(this).parent(".chatbox-close").parent(".chatbox-title").parent(".chatbox-window").remove();
    }); 
```

* * *

下面，我使用：

```
$(this).parent(".chatbox-close").parent(".chatbox-title").parent(".chatbox-window") to get the ".chatbox-window" 
```

但：

有没有更短的方法来获得`.chatbox-window`

附言。在不更改`HTML`代码的情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:14:21.747

利用`parents()`

### [**官方文件**](http://api.jquery.com/parents/)

**描述：**获取当前匹配元素集中每个元素的祖先，可选地由选择器过滤。

```
$(this).parents(".chatbox-window").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:17:22.867

使用[.closest()](http://api.jquery.com/closest/)

> 对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

```
$('.chatbox-close-button').click(function(){
    $(this).closest('.chatbox-window').remove();
}); 
```

演示：[菲德尔](http://jsfiddle.net/arunpjohny/kLthS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:17:28.023

```
 $(this).parents('div:eq(0)').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:17:41.480

您可以使用 jquery 最接近（）。文档[在这里](http://api.jquery.com/closest/)

```
$(this).closest('.chatbox-window').remove() 
```

# xml - 我如何用一些 ANY 子元素和一些已知的元素来描述一个元素？

> ID：15401654
> 
> 赞同：1
> 
> 时间：2013-03-14T05:11:20.373
> 
> 标签：xml, xsd

我如何描述模式文件中的“内容”元素，以便知道孩子的顺序，但在“元数据”之后和“内容部分”之前可以放置任何元素？

基本上我想做下面例子中描述的事情。这，粗略地说，是行不通的。我会将 1 个或多个元素放置在当前位置。

```
<xs:element name="content">
    <xs:complexType>
      <xs:sequence> 
       <xs:element name="metadata" minOccurs="0" maxOccurs="unbounded"></<xs:element>
       <xs:any>
       <xs:element name="content-section" minOccurs="0" maxOccurs="unbounded">/<xs:element>  
       <xs:element name="content-footer" minOccurs="0" maxOccurs="unbounded">
   </<xs:element>    
 </xs:element> 
```

XML:

```
 <content>
    <metadata></metadata>
    <h1>Not in schema</h1>
    <p>also not in schema</p>
    <content-section></content-section>
    <content-footer></content-footer>
  </content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:04:53.253

使用`Any`with`processContents="skip"`以您的方式工作..

我举了一个更好的例子：

```
<?xml version="1.0" encoding="utf-8"?>
<content>
  <metadata></metadata>
  <h1>Not in schema</h1>
  <p>also not in schema</p>
  <content-section></content-section>
  <content-footer>Do not validate this as well</content-footer>
</content> 
```

以及相关的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="content" type="content"/>
  <xs:complexType name="content">
    <xs:sequence>
      <xs:element name="metadata" type="xs:string"/>
      <xs:any processContents="skip" minOccurs="2" maxOccurs="2"/>
      <xs:element name="content-section"  type="xs:string"/>
      <xs:any processContents="skip" minOccurs="1" maxOccurs="1"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:10:46.210

您可能遇到的问题之一称为唯一粒子属性。这完全取决于`any`您想要的那些元素可能属于哪些名称空间。

最坏的情况是任何命名空间。因此，满足您的要求（与 InfantPro'Aravind' 不同，它通过在您希望它是可选的地方将内容部分规定为强制性的，并将您的任何元素的 maxOccurs 限制为任意数字来解决问题）这就是我们开始的地方（**坏模式，违反 UPA**）。首先，修复任何的 maxOccurs 以允许`1 or more elements to be placed in the location`：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="content">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="metadata" minOccurs="0" maxOccurs="unbounded"/>
                <xsd:any maxOccurs="unbounded"/>
                <xsd:element name="content-section" minOccurs="0" maxOccurs="unbounded"/>
                <xsd:element name="content-footer" minOccurs="0" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

错误是：

```
Error occurred while loading [how-can-i-describe-an-element-with-some-any-child-element-and-some-known.xsd], line 8 position 6.
Wildcard '##any' allows element 'metadata', and causes the content model to become ambiguous. A content model must be formed such that during validation of an element information item sequence, the particle contained directly, indirectly or implicitly therein with which to attempt to validate each item in the sequence in turn can be uniquely determined without examining the content or attributes of that item, and without any information about the items in the remainder of the sequence. 
```

现在你需要解决这个问题。这些是您的选择：

1) 将任何名称空间限制为其他内容（例如##other）：

```
<xsd:any maxOccurs="unbounded" namespace="##other"/> 
```

如果你不能限制你的命名空间，这些是你的选择：

2）将内容包装`any`到另一个元素（称为扩展）：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="content">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="metadata" minOccurs="0" maxOccurs="unbounded"/>
                <xsd:element name="extension"/>
                <xsd:element name="content-section" minOccurs="0" maxOccurs="unbounded"/>
                <xsd:element name="content-footer" minOccurs="0" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

所有其他都涉及移动`any`底部的内容。

3)`any`在底部向右移动，并在其前面加上一个强制元素。

如果您希望这种类型是全局的并允许它不是最终的，那么您将进入其他模式。

# android - android中Edittext的振动

> ID：15401658
> 
> 赞同：27
> 
> 时间：2013-03-14T05:11:41.857
> 
> 标签：android, android-edittext

我想创建一个编辑文本，如果给定的输入无效，它将振动。例如，如果数字错误，例如包含 9 位数字，则编辑数字文本，而不是编辑文本将变得清晰并会振动一段时间如何创建？提前致谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-14T05:16:31.147

在资源中创建动画文件夹，然后创建名为shake.xml的文件并粘贴以下代码

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0" android:toXDelta="10" android:duration="1000"
    android:interpolator="@anim/cycle_7" /> 
```

和另一个文件cycle_7.xml

```
<?xml version="1.0" encoding="utf-8"?>
<cycleInterpolator xmlns:android="http://schemas.android.com/apk/res/android" android:cycles="7" /> 
```

然后在你的java文件中

```
if(invalid)//check your input
{
   Animation shake = AnimationUtils.loadAnimation(Login.this, R.anim.shake);
   editText.startAnimation(shake);
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-07-17T10:26:13.053

如果有人正在寻找一种方法来以编程方式执行[@Priya](https://stackoverflow.com/users/1900651/priya)建议的操作，那么您可以试试这个。

```
public TranslateAnimation shakeError() {
        TranslateAnimation shake = new TranslateAnimation(0, 10, 0, 0);
        shake.setDuration(500);
        shake.setInterpolator(new CycleInterpolator(7));
        return shake;
} 
```

进而：

```
myEditText.startAnimation(shakeError()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T05:16:15.410

对于振动，请使用以下代码。

```
Vibrator vibe = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE); 
```

然后，在 OnTextChanged Listener 方法中使用以下代码。

```
vibe.vibrate(50); // 50 is time in ms 
```

并且不要忘记您需要将权限添加到清单（在`</application>`标记之后）：

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-25T05:15:25.543

`shake.xml`在anim文件夹下创建

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:fromXDelta="-10"
        android:toXDelta="10"
        android:repeatCount="5"
        android:repeatMode="reverse"
        android:interpolator="@android:anim/linear_interpolator"
        android:duration="70" />
</set> 
```

在此之后为按钮添加动画。为了简单起见，我用 Kotlin 编写了这段代码。

```
button.setOnClickListener {
      button.startAnimation(AnimationUtils.loadAnimation(context, R.anim.shake)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T05:35:21.093

您应该将此侦听器添加到 EditText 以进行所需的验证，

```
editText.addTextChangedListener(new  TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before, int count) {
            // Write your logic here
                    if(condition satisfy)
                    // call vibrate();  
            }
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }
            public void afterTextChanged(Editable s) {

            }
        });

        public void vibrate()
        {
                Vibrator vibrate= (Vibrator)context.getSystemService(Context.VIBRATOR_SERVICE) ;
                           vibrate.vibrate(50);
        } 
```

# iphone - iOS - 无需使用笔尖即可支持 iPad 和 iPhone

> ID：15401659
> 
> 赞同：2
> 
> 时间：2013-03-14T05:11:55.553
> 
> 标签：iphone, ios, ipad, nib

我正在尝试在不使用**nib**的情况下编写应用程序，我将以编程方式完成所有操作。

现在的问题是，我要如何同时支持**iPad**和**iPhone**？显然，我不能这样做

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    // load iPad nib
} else {
    // load iPhone nib
} 
```

如果我创建 2 **ViewControllers**，那么`IBAction`将是多余的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:44:44.233

您可能应该只弄清楚设备类型，`applicationDidFinishLaunching` 然后为每个设备加载单独的控制器。但是，如果您只想为所有设备提供一个实现，请执行以下检查：

```
 if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
{
    //do some iPad stuff
}
else
{
    CGFloat screenH = [UIScreen mainScreen].bounds.size.height;

    if([UIScreen mainScreen].scale == 2.f && screenH == 568.0f)
    {
        //do iPhone 5 stuff
    }
    else
    {
        //do iPhone 4S and iPhone 4 stuff

        //the dimensions are the same however, if you want to do iPhone 4S specific stuff
        // you'll need to do additional checks against video resolution or other differences etc
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:16:09.603

```
CGFloat height = [UIscreen mainScreen].bounds.size.height;

if(height==568.00 || height == 480.0)
{
//For iphone 5 and iphone 4

}
else
{
 //For ipad
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:37:57.507

您可以在 AppDelegate 中使用此代码

```
- (BOOL) isPad() 
{   

    if(UI_USER_INTERFACE_IDIOM)
    {  
        return (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad);
    }
   else
   {
        return NO;
   }

} 
```

这个链接提供了一些关于成语[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/macro/UI_USER_INTERFACE_IDIOM的信息](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/macro/UI_USER_INTERFACE_IDIOM)

或者

您可以检查屏幕的高度和宽度，以了解它是 iPhone 还是 iPad

```
CGRect screen = [[UIScreen mainScreen] bounds];
CGFloat width = CGRectGetWidth(screen);
CGFloat height = CGRectGetHeight(screen); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:47:34.083

如果您不使用任何笔尖，那么一切都以编程方式完成，您不想为 iphone 和 ipad 创建两个视图控制器。记住不要依赖于任何静态值。即您的计算应该根据`self.view.bounds`类似的东西进行（我的意思是创建视图/子视图）。然后，如果某些仅在 iPad 中支持的特定功能进行检查

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) 
```

一个视图控制器为您完成了所有工作。

# android - 从 logcat 禁用 system.out.print 日志

> ID：15401663
> 
> 赞同：2
> 
> 时间：2013-03-14T05:12:04.470
> 
> 标签：android, logcat

有没有办法从 logcat 禁用 system.out.print 日志？

我使用 progaurd 禁用了 Log.v 语句。系统输出也有类似的方法吗？应用程序中使用了很多这样的语句。请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:54:36.990

一种方法是，在 eclipse 中进行文件搜索，输入 'System.out.print' 并替换为 '//System.out.print' 。

它取代了整个项目的所有系统输出.. ;)

# javascript - 如何实现谷歌饼图（带有图例显示和对应值）

> ID：15401668
> 
> 赞同：0
> 
> 时间：2013-03-14T05:12:32.433
> 
> 标签：javascript, json, html, google-api

我使用数据库中的 json 数据创建了谷歌饼图。饼图是用图例名称创建的，但我也想显示带有值的图例，即除了饼图之外的带有值的名称。我正在尝试不同的东西，但我完全被这个难住了。

我正在实现的谷歌饼图代码是（片段）： -

```
 function drawChart(data)
{
    var hi_cnt = data.length;
    var gdata = new google.visualization.DataTable();
    var total = 0;
    gdata.addColumn('string', 'Task');
    gdata.addColumn('number', 'Hours Per Day');
    gdata.addRows(hi_cnt);
     for  (var i= 0;i < hi_cnt; i++)
     {
        gdata.setCell(i, 0, data[i]['name']);
        gdata.setCell(i, 1, parseInt(data[i]['count']));

     }

     var options = {
        title: 'Number of Issues By Type',
        'width': 750,
        'height': 450,
        backgroundColor: '#EEE', 
        legend: {position: 'right'},
        areaOpacity: 1.0,
        sliceVisibilityThreshold:0,
        //vAxis: {format: '# $'},
        //hAxis: {title: '????', titleTextStyle: {color: 'blue'}, slantedText: true, viewWindow: {min: 39, max: 52}},
        //colors: ['CCFFCC', '66CC66', 'FF9999'],
        //animation: {duration: 1000, easing: 'out'}
     };

    var chart = new google.visualization.PieChart(document.getElementById('outer_tableDiv'));
    chart.draw(gdata, options);
 }  

function getHealthReport() 
{ 
  var dataString = {auth_token: sessionStorage.auth_token,};
  var mh_url = MH_HOST + '/reports/get_health_issues_report.json';

  $.ajax(
  {
    type: "POST",
    url: mh_url,
    data: dataString,
    dataType: "json",
    success: function (data) 
    { 
        drawChart(data);    
    },
    error: function (data) 
    {
        alert("fail");
    }    
  });  
} 
```

谁能帮帮我吗..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:55:53.830

我的猜测是您可以尝试以下方法：-

```
var total = 0;
for (var i = 0; i < data.getNumberOfRows(); i++) {

    total += data.getValue(i, 1);

    // get the data
    var label = data.getValue(i, 0);
    var value = data.getValue(i, 1);
    var percent = Math.ceil(1000 * value / total) / 10;

    // This will create legend list for the display
    lis[i] = document.createElement('li');
    lis[i].id = 'legend_' + data.getValue(i, 0);
    lis[i].innerHTML = '<div class="legendMarker" style="background-color:' + colors[i] + ';"></div>' + label + ': ' + value + ' (' + percent + '%)</span>';

    legend.appendChild(lis[i]);
} 
```

请让我知道它是否正确。

# php - 递归基本上会走到“堆栈”的底部然后反弹回来吗？

> ID：15401671
> 
> 赞同：2
> 
> 时间：2013-03-14T05:12:42.570
> 
> 标签：php, recursion

如果这不适合这种问题/答案格式，我很抱歉，但因为它是肯定的/否，希望没关系。SO向我推荐了没有帮助但格式相似的问题，所以我想我应该没问题。

我正在使用从在线教程（[http://devzone.zend.com/283/recursion-in-php-tapping-unharnessed-power/](http://devzone.zend.com/283/recursion-in-php-tapping-unharnessed-power/)）中获得的以下代码，并试图了解发生了什么。我所收集的是，从逻辑的角度来看，正在发生的事情是函数进入“内部”，一直挖掘到循环链的底部，直到它被提供一个“可靠”的返回值（不调用另一个函数），然后将值传递回链到开头。换句话说，它下潜然后反弹回来。那准确吗？如果对理解没有任何帮助，我们将不胜感激，因为这显然是一个非常重要的概念。谢谢！

```
 function factorial($number) {
        if ($number < 2) {
            return 1;
        } else {
                    print("$number * factorial($number-1)<br />");
            return ($number * factorial($number-1));
        }
    }

print factorial(6); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:14:42.410

是的。你说的一切都是正确的，我需要输入 30 个字符。

# sql - Visual Basic Access: 参数太少。预计 1

> ID：15401673
> 
> 赞同：2
> 
> 时间：2013-03-14T05:12:49.087
> 
> 标签：sql, vba, sql-order-by, inner-join

```
 Private Sub createSequenceDataFiles_Sequence(sPath As String, sTableName As String, iSeqNo As Integer)
        Dim RST As DAO.Recordset
        Dim nIL As Long, nLastIL As Long
        Dim sSQL As String
        '
        ' Get the data from the table
        '
        sSQL = _
    " SELECT [“ & sTableName & “].IL, “ & _
    “ [XL]-[FIRST_XL]+1 AS XL_IDX, “ & _
    “ [“ & sTableName & “] “ & _
    “ FROM [“ & sTableName & “] “ & _
    “ INNER JOIN TBL_FIRST_XL_FOR_IL “ & _
    “ ON [“ & sTableName & “].IL = TBL_FIRST_XL_FOR_IL.IL “ & _
    “ ORDER BY [“ & sTableName & ”].IL, [XL]-[FIRST_XL]+1”
        Set RST = CurrentDb.OpenRecordset(sSQL)
        While Not RST.EOF
            nIL = RST("IL").Value
            If Not (nLastIL = nIL) Then
                '
                ' If we've already done one, close the file
                '
                If nLastIL > 0 Then Close #1
                '
                ' Open the file for the current in-line
                '
                Open sPath & "\WBS1\IL_" & Format(nIL, "0000") & ".pks" For Append As 1
            End If
            '
            ' Write the data
            '
            Write #1, iSeqNo, RST(“XL_IDX”).value + 1, RST("TIME").Value
            nLastIL = nIL
            RST.MoveNext
        Wend
        '
        ' Close
        '
        Set RST = Nothing
        Close
    End Sub 
```

我收到此错误

这有什么问题吗？

这是整个代码，现在我很确定问题出在 SQL 位上，也许我的表名是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:38:03.030

SQL 查询中的表和/或字段名与您的数据库结构不匹配。

这包括`sTableName`参数中的任何值。

只需检查并确保所有字段完全匹配，您就应该找到罪魁祸首。

**编辑**：刚刚在 SELECT 部分注意到了这一点

```
 “ [“ & sTableName & “] “ & _ 
```

你不应该在`SELECT`你的语句部分引用整个表，如果你从 SQL 语句中删除这一行会发生什么？

# javascript - 使用 Href 标记时 SpringMVC 资源路径更改

> ID：15401676
> 
> 赞同：0
> 
> 时间：2013-03-14T05:12:56.340
> 
> 标签：javascript, jquery, spring-mvc, jquery-webcam-plugin

我有一个 Spring MVC 应用程序它使用`jquery.webcam.js`这个文件位于 WAR 资源目录中的 js 文件夹中`-resources -js,css.. - WEB-INF.`这就是 js 目录中的基本结构有一个`jquery.webcam.js.`

当使用的表单`jquery.webcam.js`和其他自定义 js 文件被触发时，它会找到所有 js 文件。但是，在该表单上，我单击一个按钮，然后将我发布到另一个页面，在此页面上，我有一个超链接，其 url 为`"getData/${id}.htm".`当我单击 hlink 时，我被带到具有此 url 映射的控制器：

```
 @RequestMapping(value="getData/{id}.htm", method = RequestMethod.GET) 
```

在控制器中，从数据库中执行选择，并将对象返回到上一页（第一种形式 - 使用 jquery.webcam.js）。当我返回该页面时，我将进入 firebug`404 error for the jquery.webcam.js`文件。

经过进一步检查，我的资源位置的 url 已从更改 `http://localhost:8080/myApp/jquery.webcam.js`为`http://localhost:8080/myApp/getData/jquery.webcam.js`

为什么 getData 现在成为资源 url 的一部分，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:35:47.527

脚本文件应该像下面这样加载..

如果您`js folder`在资源文件夹下。

`<script src="<%=request.getContextPath()%>/js/jquery.webcam.js"></script>`

# php - Ajax 调用与服务器端调用

> ID：15401677
> 
> 赞同：0
> 
> 时间：2013-03-14T05:12:56.627
> 
> 标签：php, jquery, twitter, client-side, server-side

我正在为 Wordpress 构建一个 twitter 提要小部件，我必须处理的问题之一是 Twitter 的速率限制（每个帐户每小时 150 条推文）。我注意到，当我使用服务器端调用（例如`file_get_contents()`）获取推文时，很快就会达到限制，尤其是在共享主机上。我尝试使用带有 jQ​​uery`getJSON`函数的客户端调用来获取推文，但达到速率限制需要更长的时间。

*   在 Twitter 速率限制方面，客户端调用和服务器端调用之间存在这种差异的原因是什么？
*   对于这种情况，哪种方法更可取？

**更新**
我应该注意到，推文被缓存以避免达到速率限制，但是当调用是从共享主机进行时，这无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:30:14.740

当您使用服务器端调用时，所有调用都来自同一个 IP；所有用户共享相同的 150 tweat/小时配额。

当您使用客户端调用时，它们的调用来自每个客户端的不同 IP。每个客户端每小时获得 150 次推文，因此所有客户端加起来可以获得更大的音量。

# java - 存在自定义包时Java添加外部库失败

> ID：15401678
> 
> 赞同：0
> 
> 时间：2013-03-14T05:13:02.213
> 
> 标签：java, jar, import, package, external

最近我遇到了一些对我来说似乎有点奇怪的问题。

为了使用一些预定义的类，我导入了两个**.jar**文件，分别是**foo.jar**和**bar.jar**（都是别人写的）

我的源代码如下：

```
package jerry.deque
public class Deque {
    .....
    .....
    Foo item = new Foo();   //Already defined in the foo.jar
    .....
} 
```

我添加的外部库与[*如何在 Eclipse 中导入 Jar*](https://stackoverflow.com/questions/3280353/how-to-import-a-jar-in-eclipse) 完全一样。但是当我尝试使用**foo.jar**中定义的类时， Eclipse 向我显示**“Foo 无法解析为类型”。**

我花了很多时间来解决这个问题，在我删除了我的类文件开头的子句后终于成功了： **“package jerry.deque” 。**

我觉得这很奇怪，因为就在几天前，当我在做一些 Android 开发时，我按照同样的方式添加了一个 Twitter API 库。即使我在 .java 文件的开头声明了**“package jerry.search_twittes” ，它也能正常工作。**我对这个问题感到困惑，无法弄清楚出了什么问题。有人可以帮我详细解释一下吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:20:43.803

Foo 在默认包中。默认包中的类不能直接导入。因此，当您删除代码中的包声明时，您不会收到错误消息。您可以在该类的默认包中查找反射 api 或编写代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:18:36.050

> `Check that Foo is same package as Deque class`. 如果它们不是同一个包，则需要在 Deque 类中导入 Foo 类。

例如，

```
package jerry.deque;
import packagename.foo; // packagename.foo
public class Deque {
    .....
    .....
    Foo item = new Foo();   //Already defined in the foo.jar
    .....
} 
```

* * *

**添加说明**

**我希望您仔细检查 Foo 类的访问修饰符。**

> 顶级（类）访问控制有 2 个访问级别。这些是公共的或包私有的（没有明确的修饰符）。

您的 Foo 类在默认包（未指定包）下，可能没有显式访问修饰符。希望如此！然后，默认包下的所有类都可以访问 Foo 类。这就是为什么当您删除包 jerry.deque 子句时，它会起作用。

同样，我希望您检查 Android 开发 Java 代码，即使您声明了“**包 jerry.search_twittes** ”，它也能正常工作。在这种情况下，Twitter API 库的访问修饰符中的类是公共的。因此您可以从任何地方访问它。

有关更多信息，您可以阅读[此](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)信息。这些信息有用吗？？？

# javascript - __proto__ 属性在 javascript 中的位置

> ID：15401680
> 
> 赞同：0
> 
> 时间：2013-03-14T05:13:03.293
> 
> 标签：javascript

当我们创建某种类型的对象时

```
function Creater(a,b){

  this.a = a;
  this.b = b;

}

Creater.prototype.full = function (){ 
            alert(this.a + " " + this.b );
}

prs1 = new Creater('jhon','Doe');
pes1.full(); 
```

`full`所以现在 pes1 可以通过原型链 访问方法，我从`Creater`构造函数创建的每个对象都有一个`__proto__`属性，通过该属性进行查找，但是它`__proto__`在构造函数的哪里存在是它在函数的原型对象上`Creater`还是只是一个属性功能`Creater`？因为函数也是一个对象，我们可以向它添加属性/方法。

# c - 使用驱动程序进行 PCI Express 验证

> ID：15401684
> 
> 赞同：4
> 
> 时间：2013-03-14T05:13:15.740
> 
> 标签：c, testing, driver, pci, pci-e

我正在使用 Windriver Jungo 测试连接到我的 PC 的 PCI Express 设备。我可以在 8/16/32/64 位模式下读/写内存，并且板子响应非常好。但我怀疑的是，根据 PCI Express 规范，我们可以发送一个从 128 字节到 4096 字节的 TLP 数据包。如何使用驱动程序实现此传输。现在它只传输 8 字节（64 位模式）数据。如果我要发送更多数据，那么它将数据拆分为 8 字节数据包，然后发送。请清除我的疑问并建议 Windows 或 Linux 中 PCI Express 的任何其他驱动程序选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:22:27.067

您正在尝试 PIO 读写，而不是 DMA。PIO 读/写 TLP 在数据包中只有双字长度数据。对于突发数据传输（数据高达 4096 字节，但可能会被主板芯片组限制为 128 字节），您必须启动从 PCIE 设备到 PC 的读/写，而不是从 PC 到 PCIE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:22:55.127

我之前使用 windriver 与 PCIE FPGA 套件通信，它适用于程序指定的任何有效负载（128-4K）。这可能是您写入 BAR 位置的方式。检查您是否将数据发送到相同的 BAR 地址位置或不同的 BAR 地址位置。

# perl - Catalyst 全局 moose 哈希返回 MIME 类型 httpd/unix-directory

> ID：15401685
> 
> 赞同：1
> 
> 时间：2013-03-14T05:13:24.477
> 
> 标签：perl, hash, mime-types, moose, catalyst

我正在尝试在我的[Catalyst](http://www.catalystframework.org/)应用程序中创建一个[Moose](https://metacpan.org/module/Moose)哈希，以便我可以全局访问它：`my_app.pm`

```
has 'hash' => ( 
    is => 'rw', 
    isa => 'Hashref'
); 
```

但是，一旦我尝试添加默认值：

```
has 'hash' => ( 
    is => 'rw', 
    isa => 'Hashref',
    default => sub { { 
        'key' => 'val',
      }
    },
); 
```

然后我在我的 chrome 开发者工具控制台中收到这条消息：

```
Resource interpreted as Document but transferred with MIME type httpd/unix-directory 
```

每当我尝试加载页面时。然后我的页面无法正确加载，并试图在我加载页面时强制我下载一个空文件。是否不能使用`Moose`带有默认值的哈希`my_app.pm`？有谁知道我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:49:34.087

1.  您的应用程序设置方式存在某种问题；当您应该看到错误页面时，您会看到上面的错误。

2.  您的默认设置无效。`sub { 'key' => 'val' }`不返回 hashref；它返回两个项目（'key' 和 'val'）的列表。试试`default => sub { +{ 'key' => 'val' } }`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:43:04.650

所以我发现我做错了什么，不幸的是，这是那些“doh”时刻之一:)

将`Moose`属性定义为哈希时，您必须这样做：

```
has 'hash' => ( 
    is => 'rw', 
    isa => 'HashRef'
); 
```

我不小心拼错`HashRef`并使用了`Hashref`. 感谢所有的帮助！:)

# java - 在android中提取xml标签之间的字符串而不解析xml

> ID：15401692
> 
> 赞同：2
> 
> 时间：2013-03-14T05:13:58.700
> 
> 标签：java, android, regex, string, split

我有一个非常简单的 XML，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://icacec.com/">TRUE,Hrithik Sharma,201301-11</string> 
```

现在，我只想在**3 个单独的变量中提取****TRUE** , **Hrithik Sharma** , **201301-11**。

 **我可以根据**“，”**拆分字符串，如下所示：

```
String[] parts = responseBody.split(",");
String response_auth = parts[0];
String user_name = parts[1];    
String user_number=parts[2]; 
```

但我面临的问题是，字符串没有被独立提取。更准确地说，没有 XML 标记。我应该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:30:57.740

这可以解决这个简单的情况，但不解析你将如何处理其他条件？

```
public static void main(String[] args) {
    String raw = "<string xmlns=\"http://icacec.com/\">TRUE,Hrithik Sharma,201301-11</string>";
    raw = raw.substring(0, raw.lastIndexOf("<"));
    raw = raw.substring(raw.lastIndexOf(">") + 1, raw.length());
    String [] contents = raw.split(",");
    for (String txt : contents)
        System.out.println(txt);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:28:44.453

除非你真的知道你在 XML 中得到了什么，否则这是非常不鼓励的

响应体：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://icacec.com/">TRUE,Hrithik Sharma,201301-11</string> 
```

代码：

```
String[] parts = responseBody.split(">");
String tagsFirst= parts[0];
String usefull = parts[2];    

String[] actualBody = usefull.split("<");

String content = actualBody[0];
String[] contentParts=content.split(",");
//now you can have the three parts:
String truefalse=contentParts[0];
String name=contentParts[1];
String date=contentParts[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:36:30.753

试试这个正则表达式 -

```
"<string xmlns=\"http://icacec.com/\">(.+),(.+),(.+)</string>" 
```

捕获组 1、2 和 3 将包含您的三个项目，即：

```
Pattern pattern = Pattern.compile("<string xmlns=\"http://icacec.com/\">(.+),(.+),(.+)</string>");
Matcher matcher = pattern.matcher("<string xmlns=\"http://icacec.com/\">TRUE,Hrithik Sharma,201301-11</string>");

if(matcher.matches())
{
    System.out.println("Bool: " + matcher.group(1));
    System.out.println("Name: " + matcher.group(2));
    System.out.println("Date: " + matcher.group(3));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:40:56.170

尝试拆分如下：

```
String[] strTemp = strXMLOutput.split("<TagName>");
strTemp = strTemp[1].split("</TagName>");
String strValue = strTemp[0] 
```

100% 会起作用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T05:49:11.430

你可以试试这个：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {

    public static void main(String[] args) {
        String responseBody = null;
        String inputString = "<?xml version=\"1.0\" encoding=\"utf-8\"?><string xmlns=\"http://icacec.com/\">TRUE,Hrithik Sharma,201301-11</string>";
        String regex = "<string[^>]*>(.+?)</string\\s*>";
        Pattern pattern = Pattern.compile(regex);
        Matcher matcher = pattern.matcher(inputString);
        while(matcher.find()) {
            responseBody = matcher.group(1);
            System.out.println(responseBody);
        }

        String[] splits = responseBody.split(",");
        System.out.println(splits[0]);/*prints TRUE*/
        System.out.println(splits[1]);/*prints Hrithik Sharma*/
        System.out.println(splits[2]);/*201301-11*/

    }

} 
```**

# java - Intellij IDEA 在同一个项目中使用多种语言

> ID：15401694
> 
> 赞同：7
> 
> 时间：2013-03-14T05:14:07.253
> 
> 标签：java, actionscript-3, sdk, intellij-idea

在 intellij IDEA 中，我在同一个项目中使用 Java 和 ActionScript。Java SDK 是项目的默认设置。当我想在 ActionScript 中编程时，有几个类不可用（例如 String）。前一点的发生是因为该项目没有使用 ActionScript SDK，我猜。那么我的问题是：是否可以在同一个 IntelliJ IDEA 项目中使用多种语言（在这种情况下为两种）？如果答案是“是”，那我该怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:09:09.197

如果您的 ActionScript 类位于单独的模块中，您可以在`Project Settings > Modules > yourModule > Dependencies tab > Module SDK`.

当然，您不必更改 Java 模块的 SDK（它将保持 JDK xyz）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:25:23.420

不确定这是否是您正在寻找的，仍然试一试。

[http://www.jetbrains.com/mps/concepts/index.html](http://www.jetbrains.com/mps/concepts/index.html)

# php - 检索 Facebook 订单详情

> ID：15401697
> 
> 赞同：-2
> 
> 时间：2013-03-14T05:14:17.517
> 
> 标签：php, facebook, facebook-graph-api, curl

如何在 facebook 上获取订单详情。当我发送 GET https://graph.facebook.com/[order_id] 时显示以下错误：

```
{
"error": {
  "message": "An access token is required to request this resource.",
  "type": "OAuthException",
  "code": 104
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:25:21.310

就像错误代码中提到的那样，您需要拥有访问令牌。访问令牌是通过 OAuth 生成的。如果您正在生成订单，那么您已经在生成访问令牌。您只需要将它与您的 Graph API 调用一起传递。

生成访问令牌的教程：http: [//developers.facebook.com/docs/howtos/login/server-side-login/](http://developers.facebook.com/docs/howtos/login/server-side-login/)

不同之处在于，对于订单，您需要使用应用程序访问令牌而不是用户访问令牌。[一个相关的问题](https://stackoverflow.com/questions/9814517/this-method-must-be-called-with-an-app-access-token)。

# java - 执行具有时间间隔的可运行对象列表

> ID：15401705
> 
> 赞同：6
> 
> 时间：2013-03-14T05:14:47.860
> 
> 标签：java, multithreading

我有一个问题要解决。在其中我需要在每次请求执行时运行可运行对象列表，但会有一些延迟。

说前任我有一个如下列表

```
List<MyReqObject> myReqObjects=new ArrayList<MyReqObject>(); 
```

我已经创建了一个具有 X 线程数的执行程序，如下所示

```
ExecutorService execute=Executors.newFixedThreadPool(X) 
```

现在使用 `execute.invokeAl(myReqObjects);`我试图调用所有这些请求......

但我应该在这些之间有所延迟。为了实现这一点，我尝试了

```
ScheduledExecutorService scheduler =Executors.newScheduledThreadPool(1);
scheduler.scheduleAtFixedRate(myObject, 2, 7, SECONDS); 
```

但在这里我不能发送列表作为参数，所以我可以执行相同的请求 7 秒，延迟 2 秒......

那么有没有办法解决我的问题请建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:02:52.560

创建一个定时器：

```
Timer timer = new Timer(); 
```

如果您需要运行一次：

```
timer.schedule(new TimerTask() {
   @Override
   public void run() {
   // Your code here
   }
}, 2*1000); 
```

重复运行：

```
 timer.scheduleAtFixedRate(new TimerTask() {
   @Override
   public void run() {
   // Your code here
   }
}, 2*1000); 
```

[在此处](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)查看 Timer 和 TimerTask 的一些编码示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:18:05.337

一个问题。这些 Runnables 是否需要*在*其前一个可运行对象完成后 N 秒或前一个被调度后 N 秒执行。

如果是后者，您可以连续安排和增加时间计数器。

```
int timeToWait = 2000;

ScheduledExecutorService scheduler =Executors.newScheduledThreadPool(1);
scheduler.scheduleAtFixedRate(myObject, 2, 7, SECONDS); 
for(int i = 1; i <= runnables.size(); i++){
   scheduler.schedule(r, timeToWait * i, TimeUnit.MILLISECONDS);
} 
```

前者有点棘手。你需要有可运行的计划它

```
final int timeToWait = 2000;
class SchedulingRunnable implements Runnable{
   private final Iterator<Runnable> runnables;
   private final ScheduledExecutorService scheduler

   public SchedulingRunnable(Iterator<Runnable> rs, ScheduledExecutorService es){..}

   public void run(){
      runnables.next().run(); //assuming runnables.hasNext()
      if(runnables.hasNext()){
          scheduler.schedule(this, timeToWait, TimeUnit.MILLISECONDS);
      }
   } 
}
ScheduledExecutorService scheduler =Executors.newScheduledThreadPool(1);
scheduler.schedule(new SchedulingRunnable(runnables.iterator(),schedule), timeToWait, TimeUnit.MILLISECONDS); 
```

这个例子有一个包装器 Runnable 执行下一个可用的`run`，然后在指定的等待时间之后安排下一个可用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:01:17.767

您可以制作一个 Runnable，它是您的 Runnable 列表的包装器，并跟踪发送的内容。然后将单个 Runnable 作为调度程序的对象。

```
public class RunnableList implements Runnable {

    private List<Runnable> runList = Collections.synchronizedList(
                                                  new ArrayList<Runnable>());

    public void addRunnable(Runnable r) {
        runList.add(r);
    }

    @Override
    public void run() {
        if(!runList.isEmpty()) {
            runList.remove(0).run();
        }
    }   
} 
```

本质上是一个集合对象，它本身就是一个 Runnable。请注意，如果你走 Executor 路线，你会用 Callable 做类似的事情。

# c# - 无法让我的图表绑定到 C#.net 中的数据库

> ID：15401710
> 
> 赞同：1
> 
> 时间：2013-03-14T05:15:08.497
> 
> 标签：c#, database, data-binding, charts

我对此完全是新手，但我正在尝试在 Windows 窗体中制作一个图表，该图表将接受来自我设置的 compactSQL 数据库的数据。我的应用程序可以将数据输入数据库，但现在我想将该数据绑定到图表的 x 轴。我尝试只使用可视化工具和图表属性来执行此操作，但我得到的只是一个红色 X，我的图表应该在哪里。我现在已经查看了一些示例图表并尝试使用数据绑定对我的图表进行编码。以下是我到目前为止所得到的。同样，我对此完全陌生，所以我什至不完全理解其中一些在做什么。

当我运行这段代码时，它在“myReader”行给了我一个未处理的异常。它说：“解析查询时出错。[令牌行号 = 1，令牌行偏移量 = 24，错误中的令牌 = 数据库]”

关于我遗漏的任何想法，或者我的代码有什么问题？

```
 string dataFile = @"Test\Database1.sdf";

        string myConnectionString = @"Data Source=C:\Users\zfam\My   Projects\programming\visual studio\Database Test\Database " + dataFile;

        string mySelectQuery = "SELECT test3 FROM Test Database";

        SqlCeConnection myConnection = new SqlCeConnection(myConnectionString);

        SqlCeCommand myCommand = new SqlCeCommand(mySelectQuery, myConnection);

        myCommand.Connection.Open();

        MessageBox.Show(myConnection.State.ToString());
        DataSet dataSet = new DataSet();

        SqlCeDataReader myReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection);

        chart1.Series["Default"].Points.DataBindXY(myReader, "test3");

        myReader.Close();
        myConnection.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:36:14.810

尝试将查询重写为：

```
string mySelectQuery = "SELECT test3 FROM Test"; 
```

# ruby-on-rails - 将 ruby 脚本转换为始终运行的作业

> ID：15401714
> 
> 赞同：1
> 
> 时间：2013-03-14T05:15:19.090
> 
> 标签：ruby-on-rails, mailman

我创建了一个需要不断运行的程序。它目前位于脚本/邮递员。我开始这样做：

```
sudo bundle exec rails runner script/mailman & 
```

在我注销服务器后，它似乎停止了。这是我的邮递员程序的内容：

```
#!/usr/bin/env ruby
require "rubygems"
require "bundler/setup"
require "mailman"
require "rb-inotify"

Mailman.config.logger = Logger.new("/var/log/mailman.log")
Mailman.config.maildir = '/var/mail'
require File.dirname(__FILE__) + "/../../config/application"
Rails.application.require_environment!
Mailman::Application.run do
   default do
       begin
           Bin.receive_mail(message)
       end
   end
end 
```

自动启动该程序并使其始终运行的好方法是什么？我在 Ubuntu 上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:24:01.900

我发现`daemons`这颗宝石很适合这个。

假设您发布的代码存在`script/mailman.rb`，您可以创建一个文件`script/mailman_ctl`：

```
#!/usr/bin/env ruby
require 'rubygems'
require 'daemons'
Daemons.run('mailman.rb') 
```

我通常会为`{:backtrace => true, :monitor => true}`调用提供选项`Daemons.run`，以便我更好地了解如果进程终止会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:24:07.057

使用此处建议的“守护进程”gem：
[让 Ruby 程序成为守护进程？](https://stackoverflow.com/questions/3688550/make-a-ruby-program-a-daemon)

[似乎在 RubyToolbox https://www.ruby-toolbox.com/categories/daemonizing](https://www.ruby-toolbox.com/categories/daemonizing)上也很受欢迎

# java - 如何给每个节点唯一的名称

> ID：15401715
> 
> 赞同：0
> 
> 时间：2013-03-14T05:15:20.587
> 
> 标签：java, android, treeview, expandablelistview

我想显示一棵树，它具有其父节点、第二个节点及其子节点的单独名称。我已经使用 Google 帮助进行了编码。此代码显示树具有同名的所有第二个和子节点。如何为树的每个节点赋予唯一的名称？

我的Java代码是：

```
 package com.example.tree;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.LinearLayout.LayoutParams;

public class MainActivity extends Activity {

        ExpandableListView explvlist;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            explvlist = (ExpandableListView)findViewById(R.id.ParentLevel);
            explvlist.setAdapter(new ParentLevel());

        }

        public class ParentLevel extends BaseExpandableListAdapter
        {

      @Override
      public Object getChild(int arg0, int arg1) 
      {   
       return arg1;
      }

      @Override
      public long getChildId(int groupPosition, int childPosition) 
      {
       return childPosition;
      }

      @Override
      public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) 
      {
       CustExpListview SecondLevelexplv = new CustExpListview(MainActivity.this);
       SecondLevelexplv.setAdapter(new SecondLevelAdapter());
       SecondLevelexplv.setGroupIndicator(null);   
       return SecondLevelexplv;
      }

      @Override
      public int getChildrenCount(int groupPosition) 
      {   
       return 4;
      }

      @Override
      public Object getGroup(int groupPosition) 
      {
       return groupPosition;
      }

      @Override
      public int getGroupCount() 
      {   
       return 1;
      }

      @Override
      public long getGroupId(int groupPosition) 
      {   
       return groupPosition;
      }

      @Override
      public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) 
      {
       TextView tv = new TextView(MainActivity.this);
       tv.setText("Unit Testing");
       tv.setBackgroundColor(Color.BLUE);
       tv.setPadding(10, 7, 7, 7); 

       return tv;
      }

      @Override
      public boolean hasStableIds() 
      {
       return true;
      }

      @Override
      public boolean isChildSelectable(int groupPosition, int childPosition) 
      {
       return true;
      }     
        }

        public class CustExpListview extends ExpandableListView
        {

      int intGroupPosition, intChildPosition, intGroupid;

      public CustExpListview(Context context) 
      {
       super(context);     
      }

      protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
      {
       widthMeasureSpec = MeasureSpec.makeMeasureSpec(960, MeasureSpec.AT_MOST);
       heightMeasureSpec = MeasureSpec.makeMeasureSpec(600, MeasureSpec.AT_MOST);
       super.onMeasure(widthMeasureSpec, heightMeasureSpec);
      }  
        }

        public class SecondLevelAdapter extends BaseExpandableListAdapter
        {

      @Override
      public Object getChild(int groupPosition, int childPosition) 
      {   
       return childPosition;
      }

      @Override
      public long getChildId(int groupPosition, int childPosition) 
      {   
       return childPosition;
      }

      @Override
      public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) 
      {
       TextView tv = new TextView(MainActivity.this);
       tv.setText("Campaign Page should not be null");
       tv.setPadding(15, 5, 5, 5);
       tv.setBackgroundColor(Color.RED);
       tv.setLayoutParams(new ListView.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
       return tv;
      }

      @Override
      public int getChildrenCount(int groupPosition) 
      {
       return 2;
      }

      @Override
      public Object getGroup(int groupPosition) 
      {   
       return groupPosition;
      }

      @Override
      public int getGroupCount() 
      {
       return 1;
      }

      @Override
      public long getGroupId(int groupPosition) 
      {
       return groupPosition;
      }

      @Override
      public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) 
      {
       TextView tv = new TextView(MainActivity.this);
       tv.setText("Get Campaign");
       tv.setPadding(12, 7, 7, 7);
       tv.setBackgroundColor(Color.CYAN);

       return tv;
      }

      @Override
      public boolean hasStableIds() {
       // TODO Auto-generated method stub
       return true;
      }

      @Override
      public boolean isChildSelectable(int groupPosition, int childPosition) {
       // TODO Auto-generated method stub
       return true;
      }

        }

} 
```

我希望树的每个第二个和子节点都有一个唯一的名称和不同的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:38:12.700

意味着您想根据父名称查看数据树。？所以你使用了可扩展的列表视图。？对..？

使用这些代码..

main.xml 有

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:ignore="HardCodedText" >

<ExpandableListView
    android:id="@+id/expandableListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="40dip"
    android:groupIndicator="@null"
    android:scrollbars="none" >
</ExpandableListView>
</RelativeLayout> 
```

并创建一个 ExpandListGroup.java 文件并添加这些代码

```
public class ExpandListGroup {

private String Name;
private ArrayList<ExpandListChild> Items;

public ExpandListGroup(String name, ArrayList<ExpandListChild> items) {
    super();
    Name = name;
    Items = items;
}

public String getName() {
    return Name;
}

public void setName(String name) {
    Name = name;
}

public ArrayList<ExpandListChild> getItems() {
    return Items;
}

public void setItems(ArrayList<ExpandListChild> items) {
    Items = items;
}

} 
```

为孩子添加另一个 ExpandListChild.java 文件

```
public class ExpandListChild {

private String Name;
private String Tag;

public ExpandListChild(String name, String tag) {
    super();
    Name = name;
    Tag = tag;
}

public String getName() {
    return Name;
}

public void setName(String name) {
    Name = name;
}

public String getTag() {
    return Tag;
}

public void setTag(String tag) {
    Tag = tag;
}

} 
```

并将这些代码添加到您的 MainActivity.java

```
public class ConfigureMyOrderItem extends MainActivity {

private ArrayList<ExpandableConfigureGroup> group_list;
private ArrayList<ExpandableConfigureChild> child_list;
ExpandableListView mExpandableListView;
ConfigureMyOrderAdapter adapter;
Button btn_confirm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_configure_my_order_item);

    initView();

}

public void initView() {
    mExpandableListView = (ExpandableListView) findViewById(R.id.expandableListViewConfigure);
    btn_confirm = (Button) findViewById(R.id.btn_Confirm_order);
    btn_confirm.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(ConfigureMyOrderItem.this,
                    MyOrderActivity.class);
            startActivity(intent);
        }
    });

    group_list = SetStandardGroups();

    adapter = new ConfigureMyOrderAdapter(ConfigureMyOrderItem.this,
            mExpandableListView, group_list);

    mExpandableListView.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater()
            .inflate(R.menu.activity_configure_my_order_item, menu);
    return true;
}

public ArrayList<ExpandableConfigureGroup> SetStandardGroups() {

    group_list = new ArrayList<ExpandableConfigureGroup>();
    child_list = new ArrayList<ExpandableConfigureChild>();

    group_list.add(new ExpandableConfigureGroup("Group", child_list));
    child_list.add(new ExpandableConfigureChild("Child1"));
    child_list.add(new ExpandableConfigureChild("Child2"));
    child_list.add(new ExpandableConfigureChild("Child3"));
    child_list.add(new ExpandableConfigureChild("Child4"));

    child_list = new ArrayList<ExpandableConfigureChild>();
    group_list.add(new ExpandableConfigureGroup("Category",
            child_list));
    child_list.add(new ExpandableConfigureChild("Item1"));
    child_list.add(new ExpandableConfigureChild("Item2"));
    child_list.add(new ExpandableConfigureChild("Item3"));
    child_list.add(new ExpandableConfigureChild("Item4"));

}

public void HomeButton(View v) {
    startActivity(new Intent(v.getContext(), MainActivity.class));
}

@Override
public void onClickQuickView(View v) {
    // TODO Auto-generated method stub
    super.onClickQuickView(v);
}

@Override
public void onClickQuickViewStatus(View v) {
    // TODO Auto-generated method stub
    super.onClickQuickViewStatus(v);
}

} 
```

同时创建 ConfigureMyOrderAdapter.java 文件

```
public class ConfigureMyOrderAdapter extends BaseExpandableListAdapter {

private Context context;
private ArrayList<ExpandableConfigureGroup> groups;
private ExpandableListView mExpandableListView;
private int[] groupStatus;

public ConfigureMyOrderAdapter(Context context,
        ExpandableListView mExpandableListView,
        ArrayList<ExpandableConfigureGroup> groups) {
    this.context = context;
    this.groups = groups;
    this.mExpandableListView = mExpandableListView;
    groupStatus = new int[groups.size()];

    setListEvent();
}

private void setListEvent() {

    mExpandableListView
            .setOnGroupExpandListener(new OnGroupExpandListener() {
                @Override
                public void onGroupExpand(int arg0) {
                    // TODO Auto-generated method stub
                    groupStatus[arg0] = 1;
                }
            });

    mExpandableListView
            .setOnGroupCollapseListener(new OnGroupCollapseListener() {
                @Override
                public void onGroupCollapse(int arg0) {
                    // TODO Auto-generated method stub
                    groupStatus[arg0] = 0;
                }
            });
}

public void addItem(ExpandableConfigureChild item,
        ExpandableConfigureGroup group) {
    if (!groups.contains(group)) {
        groups.add(group);
    }
    int index = groups.indexOf(group);
    ArrayList<ExpandableConfigureChild> ch = groups.get(index).getItems();
    ch.add(item);
    groups.get(index).setItems(ch);
}

public Object getChild(int groupPosition, int childPosition) {
    ArrayList<ExpandableConfigureChild> chList = groups.get(groupPosition)
            .getItems();
    return chList.get(childPosition);

}

public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean arg2, View view, ViewGroup arg4) {
    ExpandableConfigureChild child = (ExpandableConfigureChild) getChild(
            groupPosition, childPosition);

    if (view == null) {
        @SuppressWarnings("static-access")
        LayoutInflater infalInflater = (LayoutInflater) context
                .getSystemService(context.LAYOUT_INFLATER_SERVICE);
        view = infalInflater.inflate(
                R.layout.configure_list_raw_group_item, null);
    }
     TextView tv_price = (TextView) view.findViewById(R.id.item_price);
     tv_price.setText(child.getTag().toString());
     tv_price.setTag(child.getTag());

    return view;

}

@Override
public int getChildrenCount(int groupPosition) {
    ArrayList<ExpandableConfigureChild> chList = groups.get(groupPosition)
            .getItems();
    return chList.size();
}

@Override
public Object getGroup(int groupPosition) {
    return groups.get(groupPosition);
}

@Override
public int getGroupCount() {
    return groups.size();
}

@Override
public long getGroupId(int groupPosition) {
    return groupPosition;
}

@SuppressWarnings("static-access")
@Override
public View getGroupView(int groupPosition, boolean arg1, View view,
        ViewGroup arg3) {
    ExpandableConfigureGroup group = (ExpandableConfigureGroup) getGroup(groupPosition);
    if (view == null) {
        LayoutInflater inf = (LayoutInflater) context
                .getSystemService(context.LAYOUT_INFLATER_SERVICE);
        view = inf.inflate(R.layout.configure_list_raw_group, null);
    }
    TextView tv = (TextView) view.findViewById(R.id.txtRestaurantMenuName);
    tv.setText(group.getName());

    ImageView img = (ImageView) view.findViewById(R.id.img_rightarrow);
    if (groupStatus[groupPosition] == 0) {
        img.setImageResource(R.drawable.navigation_next);
    } else {
        img.setImageResource(R.drawable.navigation_expandable);
    }
    return view;
}

@Override
public boolean hasStableIds() {
    return true;
}

@Override
public boolean isChildSelectable(int arg0, int arg1) {
    return true;
}

} 
```

并为自定义 configure_list_raw_group.xml 布局创建两个 xml。所以它是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="45dip"
android:orientation="horizontal"
android:weightSum="100"
tools:ignore="HardCodedText" >

<LinearLayout
    android:layout_width="0dip"
    android:layout_height="45dip"
    android:layout_marginLeft="4dip"
    android:layout_weight="88"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtRestaurantMenuName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RestaurantMenu Name"
        android:textSize="14sp" />
</LinearLayout>

<ImageView
    android:id="@+id/img_rightarrow"
    android:layout_width="0dip"
    android:layout_height="45dip"
    android:layout_gravity="center_vertical"
    android:layout_weight="7"
    android:contentDescription="@string/hello_world"
    android:src="@drawable/navigation_next_item" />

</LinearLayout> 
```

第二个是组configure_list_raw_group_item.xml 的孩子。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/groupItem"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:clickable="true"
android:orientation="horizontal"
android:weightSum="100"
tools:ignore="HardCodedText" >

<TextView
    android:id="@+id/item_title"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15dp"
    android:layout_weight="75"
    android:text="sample"
    android:textSize="12sp" />

</LinearLayout> 
```

# asp.net - ASP.NET 网页中汇总值的对齐方式

> ID：15401716
> 
> 赞同：0
> 
> 时间：2013-03-14T05:15:31.397
> 
> 标签：asp.net, web

我有一个网页，它从用户那里获取一些值，然后进行计算。这些大型计算集显示在表单上。有时，这些值是临时保存的，这意味着只有少数汇总值会被隐藏，而其他值会被显示。

表格看起来不太好，可能是我设计得不好，但我过度使用表格来对齐和排序这些文本框和标签。我感觉表单加载也很慢。其他开发人员如何设计显示大量值的表单？有没有人知道一个好的网站来了解网站设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:36:43.390

基本上你所说的并不是绝对正确的。
您使用的天气`tables`或`div`.
您可以使用[firbug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)和[Whyslow](https://addons.mozilla.org/en-us/firefox/addon/yslow/) MozilaFirefox 并查看每个组件所花费的时间。
以下是有关Whyslow 的更多详细信息
[http://yslow.org/](http://yslow.org/)
您还可以在您的应用程序中使用 G-zip 压缩。
[在 asp.net 中设置 gzip 压缩](https://stackoverflow.com/questions/1324481/setting-the-gzip-compression-in-asp-net)
[如何在 ASP.NET 中实现 GZip 压缩？](https://stackoverflow.com/questions/552317/how-to-implement-gzip-compression-in-asp-net)

# google-maps - 谷歌地图过境时间似乎从几秒到几小时不等

> ID：15401720
> 
> 赞同：1
> 
> 时间：2013-03-14T05:15:37.980
> 
> 标签：google-maps, google-maps-api-3

有没有其他人注意到通过方向 api 请求时 TRANSIT 的持续时间不正确？

我制作了一个[示例小提琴](http://jsfiddle.net/w2HgF/)来尝试演示这个问题，所以我可以得到一些确认，这不仅仅是我错过了一些东西。

```
var start = 'Liverpool,England';
var end = '51.47688,-0.000329';
var request = {
    origin: start,
    destination: end,
    travelMode: google.maps.TravelMode.TRANSIT,
    provideRouteAlternatives: true
};
directionsService.route(request, function (response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
    }
}); 
```

小提琴中有一个链接可以转到具有相同结果集的谷歌地图页面，以尝试演示“持续时间”的差异。

在我看来，连接之间的等待时间似乎没有被添加到他们的计算中。所以说你有三个连接，每个等待一个小时，结果实际上是三个小时！

我试着寻找其他提到这一点的人，但我所有的支票都空了回来，我不可能是唯一一个注意到这一点的人。

有人能看出我的推理有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T15:53:59.703

我没有看到小提琴和[谷歌地图](https://maps.google.co.uk/maps?saddr=Liverpool,England&daddr=51.47688,-0.000329&dirflg=r)之间有任何区别。小提琴给出了 4 条路线，范围从 3:24 到 3:41。谷歌地图也是如此。看起来他们已经解决了你的问题。

还是你说他们现在都错了？

# php - 如何使用主干和rest api上传2个文件

> ID：15401723
> 
> 赞同：0
> 
> 时间：2013-03-14T05:16:00.327
> 
> 标签：php, jquery, ajax, rest, backbone.js

如何使用主干和rest api（codeignitier）上传文件。以下是我的 html 表单数据：-

```
<form class="form-horizontal" id="upgrade_firmware" method="get" enctype="multipart/form-data">
           <div class="control-group">
               <label class="control-label muted">IMG</label>
               <div class="controls">
                   <input type="file" id="fu-img" value="" name="fu-img" >
               </div>
           </div> 
           <div class="control-group">
               <label class="control-label muted">MD5</label>
               <div class="controls">
                   <input type="file" id="fu-md5" value="" name="fu-md5">
               </div>
           </div>   
</form> 
```

我怎样才能在我的视图文件中上传这个。如果它是创建或删除的表单，我可以在主干中使用 model.save 并将其传递给 rest api。但在这种情况下，这是一个上传，所以我如何使用主干和 rest api 来做到这一点。

1.  如果我单击上传按钮，我可以将其上传到 /home/upload 目录，它应该是一个 get 调用，为什么因为我需要检查文件是否已经存在..如果我调用 get，我将得到后端响应为 {" file":true} ，这意味着文件已经存在，所以我退出。
2.  如果通话成功，我会重定向到进度页面，{"progress": 40%}

可以这样上传吗？使用 get 调用上传文件并从后端获取适当的响应？使用主干和休息 api。

```
<?php defined('BASEPATH') OR exit('No direct script access allowed');

require(APPPATH.'/libraries/REST_Controller.php');

class FRM_Upload extends REST_Controller
{   

    function api_get()
    {

        //upload to /home/upload dir
       $message = json_decode(file_get_contents("assets/json/firmware_progress.json"));
        $this->response($message, 200);
    }
} 
```

# http - “无缓存”与“max-age=0，必须重新验证，代理重新验证”

> ID：15401727
> 
> 赞同：5
> 
> 时间：2013-03-14T05:16:10.313
> 
> 标签：http, caching, browser-cache, cache-control, rfc2616

`Cache-Control: no-cache`HTTP 响应与vs有什么区别`Cache-Control: max-age=0, must-revalidate, proxy-revalidate`？

浏览器是否将其视为*相同*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-15T16:55:00.353

一般来说，不同的浏览器的行为并不完全相同。HTTP 缓存标头。

我记得的一个小区别（找不到来源，所以我不是 100% 这是确切的行为描述）是 Chrome（公平）对待`max-age=0`就像你指定`max-age=10`的一样（假设行为差异足够小，但性能影响还是有意义的）。

无论如何，以下是浏览器之间 HTTP 缓存行为差异的一些其他示例：

*   有些人会优先考虑 HTTP 1.0 缓存标头 ( `Pragma`)，其他人会优先考虑 HTTP 1.1 缓存标头
*   某些浏览器 (FF + ?)[不遵守](https://stackoverflow.com/questions/15209514/firefox-no-cache-not-honored) `no-store`指令并将数据存储在加密缓存中
*   一些浏览器在 之后指定了忽略`no-cache`指令`public`，而另一些则没有。
*   [IE 忽略](http://jakearchibald.com/2014/browser-cache-vary-broken/) `max-age`存在时`vary`。
*   等等

我的总体建议是同时使用`Cache-Control: no-cache, must-revalidate, proxy-revalidate`, `pragma: no-cache`(HTTP 1.0) 并`Expires: 0`确保所有浏览器都不会缓存带有这些标头的内容。

# spring - Spring 什么时候进行构造函数注入，什么时候进行参数注入

> ID：15401730
> 
> 赞同：3
> 
> 时间：2013-03-14T05:16:17.620
> 
> 标签：spring, inversion-of-control

我是新手，最近开始学习Spring。在spring依赖注入中，我们可以通过两种方式注入一个bean，一种是通过构造函数，另一种是通过setter方法。我的问题是，什么情况下构造函数注入更好，在什么情况下setter方法注入更好。我的重点只在哪里用？如果可能的话给我一个例子...等待您的宝贵答复..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:42:28.417

我会说去`constructor injection`。

在某些情况下，`setter injection`如果依赖是可选的。

如果你强制使用 setter 注入并使用 Spring，则使用`@Required`要求 Spring 强制执行。

在所有情况下应用常识:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T06:49:18.850

还有第三种方式：现场注入。

您可以直接应用 Annotation `@Resource`，`@Inject`或者`@Autowire`在（甚至是私有的）字段中应用。这个字段甚至不需要有一个 getter 或 setter。

如果您正在构建一个 Spring 应用程序，并且没有计划在非 Spring 应用程序或库中使用这些类，那么字段注入对于 90% 的类来说就足够了。我更喜欢它，因为它的代码更少。

*当然，如果您将构造函数用于强制引用，那么在创建新实例时就无法忘记其中之一。但是（这是我的观点，这与 Alef Arendsen 在他 3 岁的 Spring 2.0 博客文章“ [Setter injection vs constructor injection and the use of @Required”中的不同](http://blog.springsource.com/2007/07/11/setter-injection-versus-constructor-injection-and-the-use-of-required/)）你有一个 spring bean 而不是一个简单的类。而且这个bean是spring创建的，不是你直接创建的。因此，如果您使用 `@Resource`,`@Inject`或`@Autowire`用于字段或设置器，spring 也会检查它们，并且如果不能满足所有引用，则不要将 bean 和整个应用程序投入使用。*

# c# - 在 C# 中以编程方式创建无线接入点

> ID：15401735
> 
> 赞同：1
> 
> 时间：2013-03-14T05:16:48.530
> 
> 标签：c#, windows, wireless

我想通过 C#.NET 以编程方式在我的机器上创建一个无线接入点。
我一直试图找到一种方法来实现这一点，但无法得到一个好的解决方案。

我遇到的大多数解决方案只允许我有足够的控制权来连接到一个接入点，而不是创建一个。

此代码应适用于 Windows 7 及更高版本。虽然，如果它可以在 Windows XP 上运行，那将是一个很大的优势（但不是必需的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:22:29.513

最简单的方法是使用内置功能。从您的程序中调用这些 shell 命令：

```
netsh wlan set hostednetwork mode=allow ssid=<NetworkName> key=<AccessKey> keyUsage=persistent
netsh wlan start hostednetwork 
```

# c# - 自定义终结点行为未在具有服务参考的 WCF 客户端中使用

> ID：15401738
> 
> 赞同：5
> 
> 时间：2013-03-14T05:17:04.723
> 
> 标签：c#, wcf, soap, soap-client, wcf-endpoint

我有一个问题，我不太确定它是如何开始的。我相当肯定它以前工作正常，但不记得做过任何更改。

首先，请不要过分关注设置，除非它直接影响它为什么不工作。我不是在寻找批评，而是在寻找导致它不起作用的原因。

我公开了一个使用 HTTP 标头身份验证的 API。我在我的解决方案中使用来自此 API 的操作。为了避免样板代码，我创建了一个要初始化服务的 ClientFactory，使用**CustomClientMessageInspector****和**负责将标头添加到消息的**CustomCredentialBehavior 。**

这个想法是，当我需要使用服务时，代码看起来类似于：

```
IClientCredentials credentials = ClientCredentials.FromToken();
var service = ClientFactory.CreateClientInstance<API.Clients.ClientServiceClient>(credentials); 
```

ClientFactory 如下图（请不要过多判断）。

```
public class ClientFactory
{
    public static T CreateClientInstance<T>(IClientCredentials clientCredentials)
    {

        T t = Activator.CreateInstance<T>();
        var factory = t.GetType().GetProperty("ChannelFactory");
        using (var scope = new OperationContextScope((IContextChannel) t.GetType().GetProperty("InnerChannel").GetValue(t,null)))
        {

            var endpointBehavior = new CustomCredentialBehavior(clientCredentials);
            if (((ChannelFactory) factory.GetValue((t),null)).Endpoint.Behaviors.Any(p => p.GetType() == typeof(CustomCredentialBehavior)))
            {
                var behavior =
                    ((ChannelFactory) factory.GetValue((t),null)).Endpoint.Behaviors.FirstOrDefault(
                        p => p.GetType() == typeof (CustomCredentialBehavior));
                ((ChannelFactory) factory.GetValue((t),null)).Endpoint.Behaviors.Remove(behavior);
            }

            ((ChannelFactory)factory.GetValue((t),null)).Endpoint.Behaviors.Add(endpointBehavior);

            return t;
        }
    }
} 
```

自定义端点行为：

```
public class CustomCredentialBehavior:IEndpointBehavior
{
    private IClientCredentials _clientCredentials { get; set; }

    public CustomCredentialBehavior(IClientCredentials clientCredentials)
    {
        _clientCredentials = clientCredentials;
    }

    public void Validate(ServiceEndpoint endpoint)
    {

    }

    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {

    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {

    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
            clientRuntime.MessageInspectors.Add(new ClientCredentialMessageInspector(_clientCredentials));
    }
} 
```

ClientMessageInspector：

```
public class ClientCredentialMessageInspector:IClientMessageInspector
{
    private IClientCredentials _clientCredentials;

    public ClientCredentialMessageInspector(IClientCredentials clientCredentials)
    {
        _clientCredentials = clientCredentials;
    }

    public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {
            var buffer = request.CreateBufferedCopy(Int32.MaxValue);
            request = buffer.CreateMessage();

            HttpRequestMessageProperty messageProperty =
                (HttpRequestMessageProperty) request.Properties["httpRequest"];
            messageProperty.Headers.Add("AccessKey", _clientCredentials.AccessKey.ToString());
            messageProperty.Headers.Add("ClientKey", _clientCredentials.ClientKey.ToString());
            messageProperty.Headers.Add("AuthorizationKey", _clientCredentials.AuthorizationKey);
        return null;
    }

    public void AfterReceiveReply(ref Message reply, object correlationState)
    {

    }
} 
```

我面临的问题是，即使我可以看到从 ClientFactory 返回的服务具有正确的端点行为，但 ApplyClientBehavior() 永远不会被调用。出于某种原因，它似乎并没有像原来那样使用 WCF 管道。

如何让 ClientFactory 创建实例以便使用我添加的 EndpointBehavior？

**编辑**只是为了显示我正在查看的内容，这是调用服务操作之前监视窗口的屏幕截图。它显示了使用所有正确值初始化的我的 CustomCredentialBehavior。

![在此处输入图像描述](../Images/4bb682171d8d24f18d1fa1fb274fe978.png)

**编辑**我接受了 Carlos 的建议（在评论中）并简化了调用，并使用了以下调用来代替它。我很高兴它可以工作，但是，我想找出问题出在我的原始代码中，这样我就不必每次需要使用服务引用时都调用样板代码。

以下代码有效：

```
 API.Clients.Client client = new API.Clients.Client();
        client.Active = true;
        client.Enabled = true;
        client.Name = model.ClientName;

        API.Clients.ClientServiceClient service = new ClientServiceClient();
        service.ChannelFactory.Endpoint.Behaviors.Add(new CustomCredentialBehavior(ClientCredentials.FromToken()));
        var response = service.CreateClient(new CreateClientRequest() { Client = client }); 
```

知道为什么初始代码不起作用，而这个代码起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:24:42.487

我可能在这里遗漏了一些东西，但我真的不明白你为什么要走这么复杂的路线。

如果您有接口（不是客户端类）合同，只需执行以下操作：

```
var factory = new ChannelFactory<T>(); //T is the interface of the service 
```

`factory.Endpoint.Behaviors.Add()`将为您提供添加行为的方法。然后创建您刚刚调用的实际服务，该服务`factory.CreateChannel()`返回一个`T`.

总而言之：

```
public T Create<T>()
{
    var factory = new ChannelFactory<T>();
    factory.Endpoint.Behaviors.Add(<here goes your behavior>);
    return factory.CreateChannel();
} 
```

还要记住相应地处理客户端通道。如果您使用 IoC，则容器可能可以为您处理（例如 Autofac 可以）。

# iphone - 如何通过按图像保存在 NSArray 中的顺序单击缩略图来在滚动视图中打开图像？

> ID：15401742
> 
> 赞同：1
> 
> 时间：2013-03-14T05:17:14.593
> 
> 标签：iphone, ios, objective-c, uiscrollview, uicollectionview

在我的应用程序中，我有缩略图视图，我希望用户使用 imageview 转到下一个视图并显示单击的特定缩略图。但是此图像视图通过分页和 UIPagecontrol 附加到 UIScroll。所以我希望打开特定图像并在特定索引处打开，以便用户可以向左或向右滑动以查看其他图像。这需要完全像 iPhone 的照片应用程序。

我该如何解决这个问题？

我的代码是，

集合视图.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"])
    {
        NSIndexPath *selectedIndexPath = [[self.gallerycollection indexPathsForSelectedItems] objectAtIndex:0];

        // load the image, to prevent it from being cached we use 'initWithContentsOfFile'
        NSString *imageNameToLoad = [NSString stringWithFormat:@"interior_%d", selectedIndexPath.row];
        NSString *pathToImage = [[NSBundle mainBundle] pathForResource:imageNameToLoad ofType:@"jpg"];
        UIImage *image = [[UIImage alloc] initWithContentsOfFile:pathToImage];

        GalleryImageScrollViewController *gallerydetailViewController = [segue destinationViewController];
        gallerydetailViewController.FullScreenImageScroller=image ;
    }
} 
```

GalleryImageScrollViewcontroller.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray *mutablearray = [NSMutableArray array];
    data=[MyDatabase new];
    slideImages=[data OpenMyDatabase:@"SELECT pic_name_big FROM interior":@"pic_name_big"];
    [mutablearray addObjectsFromArray:slideImages];
    temparr = [[NSMutableArray alloc]init];
    temparr=[NSMutableArray arrayWithArray:mutablearray];
        [self putImageViewsInScrollView:[temparr count]];
}

-(void) putImageViewsInScrollView:(int)numberOfImageViews
{
   for(int i=0 ;i<= numberOfImageViews; i++)
    {
       // UIImageView *fullScreenImageView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:[temparr objectAtIndex:i]]];
        fullScreenImageView.frame = CGRectMake((WIDTH_OF_IMAGE * i)  , 0, WIDTH_OF_IMAGE, HEIGHT_OF_IMAGE);
        [self.FullScreenImageScroller addSubview:fullScreenImageView];

    }

    [self.FullScreenImageScroller setContentSize:CGSizeMake(WIDTH_OF_SCROLL_PAGE * ([temparr count]), HEIGHT_OF_IMAGE)];
    [self.FullScreenImageScroller setContentOffset:CGPointMake(0, 0)];
    [self.FullScreenImageScroller scrollRectToVisible:CGRectMake(WIDTH_OF_IMAGE,0,WIDTH_OF_IMAGE,HEIGHT_OF_IMAGE) animated:NO];
    self.FullScreenImageScroller.delegate=self;

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:37:36.030

首次将图像添加到缩略图时，您可以将数组中图像的索引映射到缩略图视图的“标签”

```
ThumbnailView *thumb = [UIView alloc] init];
thumb.image = [imagesArray objectAtIndex:i];
thumb.tag = i; 
```

并且在选择拇指视图时，您可以根据标签从数组中获取图像

```
UIImage *image = [imagesArray objectAtIndex:thumb.tag]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:20:22.887

这可以帮助

[KTPhotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)

[TTT拇指](https://github.com/doonot/TTThumbsViewController-in-a-TabBar-App)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:22:28.520

您可以使用 Three20 库或 Apple 的 UICatalog 示例作为参考。以下是链接：

[https://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html)

[https://github.com/facebook/three20](https://github.com/facebook/three20)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:28:08.763

尝试这样可能有效

1.对于缩略图图像，当您单击缩略图图像时，将该标签值传递给下一个视图控制器（detailviewControllerObj.index=image.tag）。

2.将所有全屏图像（尺寸320 * 480）添加到详细页面的滚动视图中，并将该滚动视图添加到视图中。

3.当您单击缩略图时，您可以将索引值传递到详细屏幕。

4.然后在详细屏幕中设置滚动视图内容偏移量。

```
[scroll setContentOffset:CGPointMake(320*index, 0)]; 
```

当您当时创建缩略图时，请给予喜欢

```
for(int i=0;i<[imgarr count];i++)
{
    UIImageView *imageView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 50, 50)];
    imageView.image=[imgarr objectAtIndex:i];
    imageView.tag=i;
    [self.view addSubview:imageView];
} 
```

之后，详细视图将一个整数值作为索引，并在您单击该特定图像时合成该变量，如下所示

detailviewControllerObj.index=image.tag

# android - 如何检测是否安装了 Google Play？（不是市场）

> ID：15401748
> 
> 赞同：6
> 
> 时间：2013-03-14T05:17:49.023
> 
> 标签：android, google-play

无论安装的应用是 Google Play 还是 Market，包名都是一样的`com.android.vending`。

我需要能够检测应用程序是 Google Play 还是 Market，我已经检查了 PackageInfo，除了可以提供帮助之外什么都`versionCode`没有`versionName`。

有谁知道Google Play 应用程序的第一个`versionCode`是什么？`versionName`

如果有人知道任何其他检测方法，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T06:14:55.207

我想出了如何检查应用程序标签。我正在使用调试器查看所有返回的内容，`packageInfo`这就是为什么我最初没有看到它。

```
public static boolean isGooglePlayInstalled(Context context) {
    PackageManager pm = context.getPackageManager();
    boolean app_installed = false;
    try
    {
           PackageInfo info = pm.getPackageInfo("com.android.vending", PackageManager.GET_ACTIVITIES);
           String label = (String) info.applicationInfo.loadLabel(pm);
           app_installed = (label != null && !label.equals("Market"));
    }
    catch (PackageManager.NameNotFoundException e)
    {
           app_installed = false;
    }
    return app_installed;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T13:43:20.367

您也可以尝试这个非常简化的解决方案：

```
public boolean isGooglePlayAvailable() {
        boolean googlePlayStoreInstalled;
        int val= GooglePlayServicesUtil.isGooglePlayServicesAvailable(LocationActivity.this);
        googlePlayStoreInstalled = val == ConnectionResult.SUCCESS;
        return googlePlayStoreInstalled;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-31T13:01:21.653

在我的应用程序中，我检查在开火之前打开 Play 商店的可能性，例如：

```
 public static boolean isResolveActivity(Intent intent) {
            return App.getInstance().getPackageManager().resolveActivity(intent, PackageManager.GET_RESOLVED_FILTER) != null;
        }

   public void isResolveActivity(String appPackage) {
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + appPackage));

      if(isResolveActivity(intent)){
      ...open intent
      }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-01T09:05:11.587

您可以使用这段简单的代码，它既简单又切中要害，并考虑不使用以下方法重新发明轮子`GooglePlayServicesUtil`：

```
public static boolean isPlayStoreInstalled(Context context){
try {
    context.getPackageManager()
            .getPackageInfo(GooglePlayServicesUtil.GOOGLE_PLAY_STORE_PACKAGE, 0);
    return true;
} catch (PackageManager.NameNotFoundException e) {
    return false;
}
} 
```

这将要求您将其添加到您的依赖项中：

```
compile 'com.google.android.gms:play-services-base:[PLAY_SERVICES_VERSION]' 
```

现在最新`play-services`版本是：`10.0.1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T13:56:52.730

这可能是一个更好的例子，因为它允许用户可以对其执行某些操作的状态，即重新验证或更新。基于[GCM 客户端示例项目](https://developer.android.com/google/gcm/client.html)中的代码：

```
 public static boolean checkPlayServices(Activity activity) {
        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(activity);
        if (resultCode != ConnectionResult.SUCCESS) {
            if (GooglePlayServicesUtil.isUserRecoverableError(resultCode)) {
                GooglePlayServicesUtil.getErrorDialog(resultCode, activity,
                        PLAY_SERVICES_RESOLUTION_REQUEST).show();
            } else {
                Toast.makeText(activity.getApplicationContext(), "This device is not supported.", Toast.LENGTH_LONG).show();
                activity.finish();
            }
            return false;
        }
        return true;
    } 
```

# javascript - 是否有可以读取 csv 格式的 javascript 网格？

> ID：15401754
> 
> 赞同：0
> 
> 时间：2013-03-14T05:18:21.613
> 
> 标签：javascript, jquery, csv, import

是否有一个带有网格小部件的 javascript 框架可以直接在 csv 中导入数据，其中一行键后跟一行数据？

"key1","key2","key3"
1,2,3
2,4,6
3,6,9

我正在使用 jqgrid，我必须将所有内容转换为 key:value 格式，如下所示：

"key1":1,"key2":2,"key3":3,...
问题在于，对于大型数组，执行这些转换所需的时间很长，有时足以使脚本超时。我想知道dojo或其他人是否会更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:00:07.233

我认为这个 jQuery 插件应该适合你：[http ://code.google.com/p/js-tables/](http://code.google.com/p/js-tables/)

有一个例子：[http ://code.google.com/p/js-tables/wiki/Table](http://code.google.com/p/js-tables/wiki/Table)

# appfabric-cache - 获取appfabric中的所有命名缓存

> ID：15401762
> 
> 赞同：3
> 
> 时间：2013-03-14T05:19:04.287
> 
> 标签：appfabric-cache

我们有一个缓存服务器。在此基础上，我们创建了多个命名缓存。随着时间的推移，我们创建了多个命名缓存。

是否有任何命令可以返回我创建的所有命名缓存？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:41:58.797

如此处所指定[，](http://msdn.microsoft.com/en-us/library/ff718177%28v=azure.10%29.aspx)您可以使用 cmdlet `Get-Cache`。

# php - 正则表达式 Preg_match_all 匹配所有模式

> ID：15401764
> 
> 赞同：1
> 
> 时间：2013-03-14T05:19:24.240
> 
> 标签：php, regex, preg-match-all

这是我的担心，我有一个字符串，我需要两个两个提取字符。

`$str = "abcdef"`应该返回`array('ab', 'bc', 'cd', 'de', 'ef')`。我想使用`preg_match_all`而不是`loops`. 这是我正在使用的模式。

```
$str = "abcdef";
preg_match_all('/[\w]{2}/', $str); 
```

问题是，它返回`Array('ab', 'cd', 'ef')`。它错过了`'bc'`和`'de'`。

如果我想提取一定数量的单词，我也会遇到同样的问题

```
$str = "ab cd ef gh ij";
preg_match_all('/([\w]+ ){2}/', $str); // returns array('ab cd', 'ef gh'), I'm also missing the     last part 
```

我错过了什么？还是根本不可能这样做`preg_match_all`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:26:04.460

对于第一个问题，您要做的是匹配**重叠字符串**，这需要*零宽度*（不消耗文本）环顾四周来抓取字符：

```
/(?=(\w{2}))/ 
```

上面的正则表达式将捕获第一个捕获组中的匹配项。

[**演示**](http://www.regex101.com/r/dK5kA0)

对于第二个问题，您似乎也想要重叠字符串。使用相同的技巧：

```
/(?=(\b\w+ \w+\b))/ 
```

请注意，`\b`添加以检查单词的边界。由于匹配不消耗文本，因此将在下一个索引（位于第一个单词的中间）尝试下一个匹配，而不是在第二个单词的末尾。我们不想从单词中间捕获，所以我们需要边界检查。

请注意，`\b`的定义是基于 的`\w`，因此，如果您更改了单词的定义，则需要使用前瞻和后视来模拟单词边界，并使用相应的字符集。

[**演示**](http://www.regex101.com/r/cK7zS4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:28:35.453

如果您需要**非正则表达式**解决方案，试试这个...

```
<?php

$str = "abcdef";
$len = strlen($str);

$arr = array();
for($count = 0; $count < ($len - 1); $count++)
{
    $arr[] = $str[$count].$str[$count+1];
}

print_r($arr);

?> 
```

请参阅**[键盘](http://codepad.org/P6jnZuP8)**。

# artificial-intelligence - 股票市场预测的遗传算法适应度函数

> ID：15401765
> 
> 赞同：0
> 
> 时间：2013-03-14T05:19:39.800
> 
> 标签：artificial-intelligence

我已经研究了几个月的股市预测，但找不到任何相关信息。我用谷歌搜索并找到了一些研究论文，但不幸的是他们只提到了遗传算法的工作。我已经知道了。

我需要设计一个适应度函数来预测股市我已经从股市中获得了真实数据

`Open High Low Close Volume`

`253.8 255.8 253.8 255.8 809300`

`250.8 250.8 243.05 247.8 2041000`

`248.1 254.9 248.19 254 4550500`

`254 261.39 252.35 259.54 9926000`

`259.54 260.60 253.5 253.94 5425700`

`253.94 257.25 248.05 256.10 7504500`

`256.1 258.35 248.30 251 10933400`

`251 253.64 249.25 250.44 5478500`

`250.44 252.89 248.60 252.25 6316600`

`252.25 254.85 252 254.05 6332500`

`254.05 255.35 252 252.25 6961600`

`253.5 259.5 253.5 259.25 10216200`

`259.25 260.20 257.10 257.89 6071400`

谁能帮我获得相关的健身功能

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T22:17:07.027

您的适应度函数将是您的预测与实际的接近程度。所以你有一群预测明天价格的代理商。就像，代理 #12683 通过他的模型预测明天鸡蛋的价格会上涨 0.5%。你把他们的预测（+0.5%）从实际价格中减去，然后取绝对值。零分是完美的。

您将使用历史数据来提供学习集。

你会比已经做到这一点的量化开发者落后十年，并且比那些利用这些系统赚钱的量化开发者落后几年。欢迎来到股市。

# java - Java EE 中的数据访问对象设计模式

> ID：15401766
> 
> 赞同：-1
> 
> 时间：2013-03-14T05:19:51.323
> 
> 标签：java, database, design-patterns

我从维基百科找到了一些设计模式 DTO 的信息。我在其他 StackOverflow 讨论中看到了一些讨论。但是无法以编程方式了解如何创建和使用 DTO。

我想知道：

1.  是什么让它成为“设计模式”？
2.  什么时候使用这种模式？

任何可能有助于新手学习 DTO 的资源都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:56:41.653

1、**DTO**不是设计模式。准确地说，它只是一种技术。
*DTO*代表数据传输对象。
2、你需要使用将数据从数据库转移到其他地方不用**`ResultSet`**，DTO可能是更好的选择。
3、DTO在多层架构软件开发中的一般应用，如MVC。

前任：

```
class User{
    private String id;
    private String age;
    private String name;
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getAge() {
        return age;
    }
    public void setAge(String age) {
        this.age = age;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
}    

class DateAccess{   
    public User getUserInfo(String id){   
        User user= new User();
        String sql ="select id,name ,age from user where id =?";
        ResultSet rs = query(sql,id);
        while(rs!=null&&rs.next()){
            user.setId(rs.getString("id"));
            user.setName(rs.getString("name"));
            user.setAge(rs.getString("age"));
        }
        return user;
  }
} 
```

# ruby-on-rails - Rails 路由 ActiveRecord::RecordNotFound 错误

> ID：15401767
> 
> 赞同：2
> 
> 时间：2013-03-14T05:19:53.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

我添加了一个新的控制器动作并添加了对应的路由

```
 def students
    @students = Swimming::Student.all
    render :json => @students
  end

  namespace :swimming do 
    resources :classschedules do
        get 'students', :action => 'students', :as => :students ,:on => :collection
      end 
  end 
```

但是当我访问这个页面时

```
http://localhost:3000/swimming/classschedules/students 
```

我收到了这个错误

```
ActiveRecord::RecordNotFound in Swimming::ClassschedulesController#show

Couldn't find Swimming::Classschedule with id=students 
```

看起来rails试图加载另一条路线

```
GET    /swimming/classschedules/:id(.:format)            swimming/classschedules#show 
```

我正在附加所有相关路线

```
 swimming_classschedules GET    /swimming/classschedules(.:format)                swimming/classschedules#index
                                 POST   /swimming/classschedules(.:format)                swimming/classschedules#create
      new_swimming_classschedule GET    /swimming/classschedules/new(.:format)            swimming/classschedules#new
     edit_swimming_classschedule GET    /swimming/classschedules/:id/edit(.:format)       swimming/classschedules#edit
          swimming_classschedule GET    /swimming/classschedules/:id(.:format)            swimming/classschedules#show
                                 PUT    /swimming/classschedules/:id(.:format)            swimming/classschedules#update
                                 DELETE /swimming/classschedules/:id(.:format)            swimming/classschedules#destroy

    date_swimming_classschedules GET    /swimming/classschedules/date/:date(.:format)     swimming/classschedules#date
students_swimming_classschedules GET    /swimming/classschedules/students(.:format)       swimming/classschedules#students
editnote_swimming_classschedules POST   /swimming/classschedules/editnote/:date(.:format) swimming/classschedules#editnote
                                 GET    /swimming/classschedules(.:format)                swimming/classschedules#index
                                 POST   /swimming/classschedules(.:format)                swimming/classschedules#create
                                 GET    /swimming/classschedules/new(.:format)            swimming/classschedules#new
                                 GET    /swimming/classschedules/:id/edit(.:format)       swimming/classschedules#edit
                                 GET    /swimming/classschedules/:id(.:format)            swimming/classschedules#show
                                 PUT    /swimming/classschedules/:id(.:format)            swimming/classschedules#update
                                 DELETE /swimming/classschedules/:id(.:format)            swimming/classschedules#destroy 
```

如何解决这个问题？

**更新****已修复**

问题是因为我有两个块

```
 namespace :swimming do 
    resources :classschedules do

     end 

   end 
```

在路线.rb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T05:22:25.180

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 问题是因为我有两个块
> 
> ```
> namespace :swimming do 
>   resources :classschedules do
> 
>   end 
> end 
> ```
> 
> 在路线.rb

〜回答每个[wwli](https://stackoverflow.com/users/2126032/wwli)

# jquery - 滑入和滑出图像

> ID：15401768
> 
> 赞同：4
> 
> 时间：2013-03-14T05:20:13.427
> 
> 标签：jquery, jquery-ui

我试图实现一个平滑的效果，当一个图像滑出时，另一个图像滑入。这个动画需要以一种方式，当一个东西滑出时，另一个东西滑入，这样它们都占用了内部空间同时div。

像[这样](http://www.mykindofphone.com/)或[这样的东西](http://www.ibm.com/in/en/)

我创建了一个[简单的 jsFiddle](http://jsfiddle.net/C62uC/3/)，描述了他面临的问题。

```
 $("#googleLogo").hide("slide", {
        direction: "right"
    }, 500 );
    $("#yahooLogo").show("slide", {
        direction: "left"
    }, 500 ); 
```

我基本上是在我开始滑入另一个东西之前滑出一个东西。我想我在某个地方犯了一个愚蠢的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T05:37:45.863

这取决于您的标记和样式结构：

### CSS：

```
#imageSliding {
   position:relative;
   height:100px;
}
#imageSliding img {
   position:absolute;
   left:0;
   top:0;
}
#yahooLogo {
  display:none;
} 
```

### [CHECKOUT FIDDLE](http://jsfiddle.net/C62uC/14/)，可能是你想要这样的东西。

# magento - 没有小数点的magento权重属性

> ID：15401771
> 
> 赞同：0
> 
> 时间：2013-03-14T05:20:52.243
> 
> 标签：magento

我需要在前端的管理面板中显示没有任何小数点的重量属性，这工作正常，但我需要从站点管理员输入产品详细信息的管理面板中删除 4 个小数点。

在代码或数据库更改方面的任何帮助将不胜感激。

图片网址：[http ://sale24by7.com/weight.png](http://sale24by7.com/weight.png)

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:48:16.757

您可以使用事件

```
adminhtml_catalog_product_edit_prepare_form 
```

捕获表单输出并根据需要进行修改！

该方法将如下所示：

```
 public function renderWeight( Varien_Event_Observer $observer )
    {
        $form = $observer->getForm();
        $element = $form->getElement('weight'); // Weight attribute from the Form Data
        if($element){
            $oldWeight = $element->getValue(); // Weight Value you want to modify
            $values['weight'] = (int) $oldWeight; // Assign the new Weight Value
            $form->addValues($values); // Add it to the form
        }
    } 
```

我已经创建了你从这里下载的模块[下载](http://meabed.net/eproduct.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T13:16:51.233

我只是用这个：

.$this->htmlEscape(number_format($weight));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T18:41:03.390

要更改 backend_type 设置为小数的属性的小数精度，

您必须更改此表中值的类型：

```
catalog_product_entity_decimal 
```

如果你还没有改变，你应该看到：

```
decimal(12,4) 
```

你应该替换为

```
decimal(12,0) 
```

# fortran - Fortran：CHARACTER 声明中的语法错误

> ID：15401774
> 
> 赞同：0
> 
> 时间：2013-03-14T05:21:03.923
> 
> 标签：fortran, gfortran

我正在尝试在远程超级计算机上运行一个在我的笔记本电脑上运行良好的程序。但是程序没有在那里编译。试图追踪问题，我将程序减少到最低限度，但它仍然给我一个编译错误。有人知道这里可能出了什么问题吗？

```
[k00603@fe01p08 python_utilities]$cat test.f90
program test
character(:), allocatable :: out  
end program test
[k00603@fe01p08 python_utilities]$gfortran test.f90
In file test.f90:3

character(:), allocatable :: out
         1
Error: Syntax error in CHARACTER declaration at (1) 
```

我猜gfortran运行良好，因为当我执行以下操作时，它可以工作：

```
[k00603@fe01p08 python_utilities]$cat test.f90
program test
print *, "Hello World!"
end program test
[k00603@fe01p08 python_utilities]$gfortran test.f90
[k00603@fe01p08 python_utilities]$./a.out 
Hello World! 
```

超级计算机上的编译器是：

```
[k00603@fe01p08 256]$gfortran --version
GNU Fortran (GCC) 4.1.2 20080704 (Red Hat 4.1.2-51)
Copyright (C) 2007 Free Software Foundation, Inc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:46:35.587

`CHARACTER(:)...`是 Fortran 2003 的一个特性，称为延迟长度字符。它只是最近才添加到 gfortran 中，并且在某些领域（延迟长度字符组件）的支持仍然不完整。

您的超级计算机可能正在运行不支持此功能的旧版本的编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:46:19.760

`character(:), allocatable :: out`正在声明一个可分配的缩放器。这是 Fortran 2003 的一个新特性。超级计算机上的编译器可能不支持这个新特性。

您暗示您正在使用 gfortran。 [http://gcc.gnu.org/wiki/GFortran](http://gcc.gnu.org/wiki/GFortran)列出了 gfortran 4.5 版中添加的可分配缩放器（参见 4.5 / Fortran 2003）。当前的发布版本是 4.7。

# database - 如何在 tablegateway ZF2 中添加带有 JOIN ON 子句的 IN 语句

> ID：15401779
> 
> 赞同：3
> 
> 时间：2013-03-14T05:21:14.870
> 
> 标签：database, join, zend-framework2, in-clause

到目前为止获得所有结果，直到我添加了带有 join ON 子句的“IN”语句

我的代码是这样的：

```
// $this->table = 'category';
$sql = $this->getSql();
$select = $sql->select();
$select->join('user_category_subscriptions', 'user_category_subscriptions.category_id = category.id AND user_category_subscriptions.status IN (1,2,3,4)', array(), 'left');
$select->where(array('category.user_id = 2 OR (user_category_subscriptions.status IN (2,4))')); 
```

错误

```
ZEND\DB\ADAPTER\EXCEPTION\INVALIDQUERYEXCEPTION
File:E:\htdocs\myproj\vendor\zendframework\zendframework\library\Zend\Db\Adapter\Driver\Pdo\Statement.php:245
Message:Statement could not be executed 
```

使用 'echo $select->getSqlString();' 打印查询：

```
SELECT "categories".* FROM "categories" 
LEFT JOIN "user_category_subscriptions" 
ON "user_category_subscriptions"."category_id" = "categories"."category_id" AND "user_category_subscriptions"."status" IN ("1""," "2""," "3""," "4")
WHERE category.user_id = 2 OR (user_category_subscriptions.status IN (2,4)) 
```

所以问题是 zend 自动将**(1,2,3,4)**转换成**("1"","2"","3"","4")**

有什么办法解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:12:11.880

我认为您可以传递表达式而不是连接字符串：

```
// $this->table = 'category';
$sql = $this->getSql();
$select = $sql->select();

$join = new Expression('user_category_subscriptions.category_id = category.id AND user_category_subscriptions.status IN (1,2,3,4)');

$select->join('user_category_subscriptions', $join, array(), 'left');
$select->where(array('category.user_id = 2 OR (user_category_subscriptions.status IN (2,4))')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T05:44:03.363

尝试这个

```
$select->where
       ->AND->NEST->equalTo('category.user_id', 2)
       ->addPredicate(new Sql\Predicate\In('user_category_subscriptions.status', array(2,4))); 
```

# java - 如何将sitemesh3命名空间添加到jsp？

> ID：15401787
> 
> 赞同：0
> 
> 时间：2013-03-14T05:21:46.820
> 
> 标签：java, xml, jsp, xml-namespaces, sitemesh

根据帖子[http://permalink.gmane.org/gmane.comp.web.sitemesh.sitemesh3.general/137](http://permalink.gmane.org/gmane.comp.web.sitemesh.sitemesh3.general/137) sitemesh3 不绑定到 jsp。所以没有与 sitemesh3 标签关联的标签库。任何解决方法？

如何将 sitemesh3 命名空间添加到 jsp 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:21:53.780

只需添加类似的东西`<sitemesh:write property='title' />`，它应该可以工作。

# html - 删除包含活动链接的 div 的边框

> ID：15401789
> 
> 赞同：1
> 
> 时间：2013-03-14T05:21:59.233
> 
> 标签：html, css

好的，我的网站顶部菜单中有一个链接列表，每个链接都在一个类 div 中。我想将活动链接（当前页面）的边框设置为无；但我似乎在代码中有一些问题！

顶部菜单链接

```
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/general';?>" >General</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/contact';?>" >Contact</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/Relations';?>" >Relations</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/Work';?>" >Work</a></div> 
```

我的CSS：

```
.emp_details_link{
  border:1px solid #000000;
  width:100px;
  height:20px;
  float:left;
}
.emp_details_link a{
  text-decoration:none;
}
.emp_details_link > a:active{ // poiting to the parent div
  border:1px solid red;
  border-bottom:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:27:06.500

你想要达到的，可以通过这种方式完成。

创建一个单独的类`.active`

```
.active
{
    border:none;
} 
```

并通过 jQuery/javascript 将其应用于您单击的锚点（并从前一个中删除）：

见[小提琴](http://jsfiddle.net/manishmishra256/rkDFP/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:55:18.880

您需要 Jquery 来解决这个问题，使用一些类作为活动链接并使用 jquery 删除活动类这是一个方法示例如下

脚本

```
$('.emp_details_link a').on('click',function(){
   $('div').removeClass('active');
   $(this).parent().addClass('active');
}); 
```

PHP

```
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/general';?>" >General</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/contact';?>" >Contact</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/Relations';?>" >Relations</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/Work';?>" >Work</a></div> 
```

css

```
.emp_details_link{
  border:1px solid #000000;
  width:100px;
  height:20px;
  float:left;
}
.emp_details_link a{
  text-decoration:none;
}
.emp_details_link > a:active{ // poiting to the parent div
  border:1px solid red;
  border-bottom:none;
}
.active
{
    border:none;
} 
```

另一个不使用 jquery 的方法是直接使用适当页面中的类，就像我现在假设联系人是活动页面一样

css

```
.emp_details_link{
  border:1px solid #000000;
  width:100px;
  height:20px;
  float:left;
}
.emp_details_link a{
  text-decoration:none;
}
.emp_details_link > a:active{ // poiting to the parent div
  border:1px solid red;
  border-bottom:none;
}
.active
{
    border:none;
} 
```

php

```
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/general';?>" >General</a></div>
<div class="emp_details_link active"><a href="<?php echo base_url().'index.php/hr/employee_details/contact';?>" >Contact</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/Relations';?>" >Relations</a></div>
<div class="emp_details_link"><a href="<?php echo base_url().'index.php/hr/employee_details/Work';?>" >Work</a></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:27:36.720

改为使用当前页面的类。

:active 仅在您单击链接时才起作用-因此该链接现在处于活动状态..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:28:07.097

您可以使用`border:none;`.it 将解决您的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T05:33:01.673

目前没有办法在 CSS 中选择元素的父级。

给边框，`a`以便它可以删除自己的样式

```
.emp_details_link{

  width:100px;
  height:20px;
  float:left;
}
.emp_details_link a{
  text-decoration:none;
  border:1px solid #000000;
}
.emp_details_link a:active{
  border:1px solid red;
  border-bottom:none;
    // something like this
} 
```

或为此创建一个单独的类并将其添加到该元素`JS`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T06:24:13.710

给`a`标签主边框而不是`div`

```
.emp_details_link{  
  width:100px;
  height:20px;
  float:left;
}
.emp_details_link a{
  text-decoration:none; border:1px solid #000000; display:block
} 
.emp_details_link > a:active{ // poiting to the parent div
  border:1px solid red;
  border-bottom:none;
} 
```

**[演示](http://jsfiddle.net/2JLtd/1/)**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T06:42:25.143

如果您包含所有页面的链接文件，请像这样

一般的

```
<?php
$general='active';
include('link.php');
?> 
```

接触

```
<?php
$contact='active';
include('link.php');
?> 
```

关联

```
<div class="emp_details_link <?php if(isset($general)) echo $general;?>"><a href="<?php echo base_url().'index.php/hr/employee_details/general';?>" >General</a></div>
<div class="emp_details_link <?php if(isset($contact)) echo $contact;?>"><a href="<?php echo base_url().'index.php/hr/employee_details/contact';?>" >Contact</a></div>
<div class="emp_details_link <?php if(isset($Relations)) echo $Relations;?>"><a href="<?php echo base_url().'index.php/hr/employee_details/Relations';?>" >Relations</a></div>
<div class="emp_details_link <?php if(isset($Work)) echo $Work;?>"><a href="<?php echo base_url().'index.php/hr/employee_details/Work';?>" >Work</a></div> 
```

# php - Photoshop 中是否有类似 Spot 修复工具的 JQuery 插件？

> ID：15401799
> 
> 赞同：0
> 
> 时间：2013-03-14T05:23:05.723
> 
> 标签：php, javascript, jquery, image-processing

我似乎找不到任何像 Photoshop 中的斑点修复工具一样的 jquery 插件。如果有人遇到或发现类似的东西，请分享。

基本上，我想将其应用于照片编辑网络应用程序中，用户可以在其中上传照片，并且可以去除皱纹或面部线条，例如面部提升。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:44:35.457

这似乎是 HTML5 的工作`<canvas>`。查看这篇文章[http://www.html5rocks.com/en/tutorials/canvas/imagefilters/](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)以获取照片处理的一些演示。

首先，您应该尝试将图像数据加载到`<canvas>`元素中，并查看如何在您单击/拖动的区域上或周围读取像素数据。在模拟 Photoshop 的点修复工具的情况下，这与对目标周围的像素进行采样并计算给定邻近区域中相似像素的频率有很大*关系*。

最重要的是，`<canvas>`可以轻松地将画布的状态导出为图像。请参阅这篇文章：[http](http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-url/) ://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-url/ 。

希望对一些人有所帮助。

# command-line - 如何删除所有文件但不包括特定文件（批处理文件）

> ID：15401813
> 
> 赞同：0
> 
> 时间：2013-03-14T05:24:15.333
> 
> 标签：command-line, batch-file, cmd

我知道以前这里有这样的问题，但在我的情况下，指定要在“删除”操作中排除的文件有特殊条件。

文件名示例：

A_001.xml
A_002.xml
B_001.xml
B_002.xml
B_003.xml
C_009.xml
D_002.xml

上面的文件在一个目录中，我需要删除所有文件，但保留每个文件的一份副本，文件名中的最高计数器是 A_002.xm、B_003.xml、C_009.xml 和 D_002.xml。

这可能吗？我是批处理文件创建的新手，所以请帮助我。我已经知道如何删除文件，甚至排除特定的文件扩展名，但我不知道在这种情况下该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:34:12.693

```
@ECHO OFF

SETLOCAL enabledelayedexpansion
::
:: establish target directory
:: initialise PREFIX to a name that's invalid in a filename
::
SET target=.
SET prefix=:
FOR /f "tokens=1*delims=_" %%i IN (
 'dir /b/a-d/o-n "%target%\*_*.xml'
 ) DO (
IF !prefix!==%%i ECHO DEL "%target%\%%i_%%j"
SET prefix=%%i
) 
```

此解决方案依赖于目标目录中 *xml 文件的名称中是否存在“_”。我在批处理开发目录中的一些虚拟文件上对其进行了测试，因此我`.`用于`the current directory`

DIR 命令生成目标目录中与模式匹配的文件列表。`*_*.xml`开关`/b`表示`filename only`,`/a-d`表示`no directory names, even if they match`和`/o-n`表示`in the reverse order of name`因此，名称将出现在第一个之后的部分的最高数值`_`。

FOR 读取此输出并将文件名的前缀`%%i`和其余部分分配给`%%j`由于`prefix`被初始化为文件名中的无效字符，它不可能匹配`%%i`遇到的第一个文件，因此`DEL`不会执行。然后将存储最后遇到的前缀。仅当下一个文件名具有匹配的前缀时才会`DEL`执行

请注意，我`ECHO`在`DEL`. 这是万一发生错误时的安全装置。PROPOSED`DEL`操作将报告到屏幕上，而不是 EXECUTED。一旦您对批次正确感到满意，请移除 ，`ECHO`然后删除操作将继续。

观察点：

*   一些编辑在去除或保留尾随空格方面相当随意。通常，这是无害的，但`SET` 批处理命令中的尾随空格会导致混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:43:08.637

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
set newprefix=_
for /F %%a in ('dir /on /b /a-d *.xml') do (
for /F "delims=_" %%i in ("%%a") do (
   IF NOT *%%i*==*!newprefix!* (
   for /F %%q in ('dir /on /b /a-d %%i*.xml') do set lastitem=%%q
   attrib +r !lastitem!  > NUL
   del /s /q %%i*.xml 1>NUL 2>NUL 
   attrib -r !lastitem!  > NUL
   set newprefix=%%i
   )
)
) 
```

对于 xml 文件的每个前缀，列出所有带有相关前缀的文件，以获取列表中的最后一个。然后将最后一个标记为只读。除只读外，删除所有具有给定模式的内容。重置只读标志并为下一个前缀重新开始。

# python - Python SimpleHTTPServer

> ID：15401815
> 
> 赞同：6
> 
> 时间：2013-03-14T05:24:16.820
> 
> 标签：python, ember.js, simplehttpserver

有没有办法让 Python SimpleHTTPServer 支持 mod_rewrite？

我正在尝试使用 Ember.js 并利用 History API 作为位置 API，为了使其工作，我必须：

```
1) add some vhosts config in WAMP (not simple), or
2) run python -m simpleHTTPServer (very simple) 
```

因此，当我在浏览器中打开它`localhost:3000`并单击导航（例如关于和用户）时，它运行良好。这些 URL 由 Ember.js 分别更改为`localhost:3000/about`和`localhost:3000/users`。

但是当我尝试`localhost:3000/about`直接在新选项卡中打开时，python web 服务器只是返回 404。

我让我的 .htaccess 将所有内容重定向到 index.html，但我怀疑 python 简单 Web 服务器并没有真正读取 htaccess 文件（我是对的吗？）

我尝试下载 PHP 5.4.12 并运行内置的 Web 服务器，url 和 htaccess mod_rewrite 运行良好。但是我仍然不愿意从稳定的 5.3 升级到（可能仍然不够不稳定）5.4.12，所以如果有办法在 python 简单的 Web 服务器中支持 mod_rewrite，那将是可取的。

感谢你的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-20T03:01:56.350

通过修改 pd40 的答案，我想出了这个不会重定向的方法，它会执行您传统的“发送 index.html 而不是 404”。根本没有优化，但它适用于我所需要的测试和开发。

```
import SimpleHTTPServer, SocketServer
import urlparse, os

PORT = 3456

class MyHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
   def do_GET(self):

       # Parse query data to find out what was requested
       parsedParams = urlparse.urlparse(self.path)

       # See if the file requested exists
       if os.access('.' + os.sep + parsedParams.path, os.R_OK):
          # File exists, serve it up
          SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self);
       else:
          # send index.hmtl
          self.send_response(200)
          self.send_header('Content-Type', 'text/html')
          self.end_headers()
          with open('index.html', 'r') as fin:
            self.copyfile(fin, self.wfile)

Handler = MyHandler

httpd = SocketServer.TCPServer(("", PORT), Handler)

print "serving at port", PORT
httpd.serve_forever() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T05:33:08.063

[SimpleHTTPServer](http://docs.python.org/2/library/simplehttpserver.html)不支持 apache 模块并且不尊重 .htaccess，因为它不是 apache。它也不适用于php。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-15T01:25:04.510

如果您知道需要重定向的情况，您可以[继承 SimpleHTTPRequestHandler](http://docs.python.org/2/library/simplehttpserver.html#SimpleHTTPServer.SimpleHTTPRequestHandler)并进行重定向。这会将任何丢失的文件请求重定向到**/index.html**

```
import SimpleHTTPServer, SocketServer
import urlparse, os

PORT = 3000

class MyHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
   def do_GET(self):

       # Parse query data to find out what was requested
       parsedParams = urlparse.urlparse(self.path)

       # See if the file requested exists
       if os.access('.' + os.sep + parsedParams.path, os.R_OK):
          # File exists, serve it up
          SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self);
       else:
          # redirect to index.html
          self.send_response(302)
          self.send_header('Content-Type', 'text/html')  
          self.send_header('location', '/index.html')  
          self.end_headers()

Handler = MyHandler

httpd = SocketServer.TCPServer(("", PORT), Handler)

print "serving at port", PORT
httpd.serve_forever() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T02:26:47.830

恐怕 Python 服务器中没有 mod_rewrite，除非你在 Apache 服务器后面运行 python 脚本，这是一个资源昂贵的解决方案。

试试 Cherrypy ( [http://www.cherrypy.org/](http://www.cherrypy.org/) )，它允许您管理页面处理程序，并且非常简单地生成干净的 URL。

# python - 使用分类器查找相似的 HTML 页面

> ID：15401816
> 
> 赞同：-1
> 
> 时间：2013-03-14T05:24:20.590
> 
> 标签：python, svm, scikit-learn

我正在尝试根据标题和正文的内容查找类似的 HTML 页面。*相似*，我的意思是*语义相似*，即与相同的内容/主题/主题相关。

***我有一个可靠的“验证器”方法来断言一对***HTML 页面的语义接近性，即一次只为两个 HTML 页面工作。然而，该数据集包含大约 100 万个 HTML 页面，并且比较两个页面的所有可能组合是非常不可行的......

因此，我正在寻找**一种相对快速但*不完美*的“分类器”来为基于对的验证器生成“候选者”列表**。这样的分类器/过滤器会从数据集中生成一个 [相对较短的] HTML 页面列表，这些页面*可能*在语义上接近给定的 HTML 页面。然后，第一层过滤器的输出将成对地馈送到现有的验证器方法，以生成与参考页面有效相似的 HTML 页面子集。

就其精度与召回特性而言，第一层过滤器可能不完美，但当然，虽然它的精度差是可以接受的（即产生相对较多的误报），但它的召回率不应该太小，以免遗漏太多有效相似的页面。

### 选择这些候选人的最佳方式是什么？

背景信息：
为了支持现有的验证器逻辑，数据集中的每个 HTML 页面都经过预处理，将标题和正文标记为一元和二元。如果添加处理的计算成本与其为提高过滤器逻辑的有效性提供的支持相称，则欢迎提出额外预处理的建议。

虽然，虽然这可能对第一层过滤器的设计影响不大，但“验证器”的工作原理如下：
对于一对 HTML 页面，我正在生成与它们对应的特征向量并将其提供给分类器，所以以获取它们是否相似。
我使用 python 进行编码，使用 SVM 作为分类器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:08:41.840

这是一项无监督的任务，而不是分类任务。我要尝试的第一件事是对从页面构建的 tf-idf 向量进行简单的旧余弦相似度（即老式信息检索）。

即，您将矢量化整个文档集（应该是可行的；在大规模情况下，考虑 a [`HashingVectorizer`](http://scikit-learn.org/stable/modules/feature_extraction.html#vectorizing-a-large-text-corpus-with-the-hashing-trick)）以获得一个矩阵`Xtrain`，然后使用相同的矢量化器对传入的文档进行矢量化以产生`Xnew`，确保两者都是 CSR 格式（散列处理这也是）并计算它们之间的余弦相似度：

```
cosine_sim = (Xtrain * Xnew.T).toarray() 
```

这是一个相似度分数的`n_train`×`n_new`矩阵。您可以通过与测试文档的相似性对训练文档进行排序`i`：

```
most_similar = np.argsort(cosine_sim[:, i])[::-1]
candicates = most_similar[:100]  # or however many you desire 
```

另一种方法是将*k*均值模型拟合到训练文档，并选择与传入文档最相似的文档集群作为候选。如果你有一个*k* -means 模型`km`，那就是：

```
# get closest clusters for new documents
closest = km.predict(Xnew) 
```

并且对于每个文档/行`Xnew[i, :]`，`np.where(km.labels_ == closest[i])`给出候选人。

考虑使用[`MiniBatchKMeans`](http://scikit-learn.org/dev/modules/generated/sklearn.cluster.MiniBatchKMeans.html); scikit-learn 的前沿版本可以处理非常大的文档集。设置参数`n_clusters`有点像魔法，因此可能需要反复试验。

# pagination - Cakephp Group By 分页不起作用

> ID：15401817
> 
> 赞同：1
> 
> 时间：2013-03-14T05:24:32.087
> 
> 标签：pagination, group-by, cakephp-1.3

当我使用“group by”查询时，分页没有显示出来..只有第一页显示...如果有人对此有解决方案，请发布示例..提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:27:43.437

添加 GROUP BY 子句

```
var $paginate = array(
    'MyModel' => array(
        'limit' => 20,
        'order' => array('week' => 'desc'),
        'group' => array('week', 'home_team_id', 'away_team_id')
    )
); 
```

或在行动中即时进行

```
function index() {
    $this->paginate = array(
        'MyModel' => array(
            'limit' => 20,
            'order' => array('week' => 'desc'),
            'group' => array('week', 'home_team_id', 'away_team_id')
        )
    );

} 
```

# spotify - 获取 SPAlbum 的名称和其他属性

> ID：15401821
> 
> 赞同：0
> 
> 时间：2013-03-14T05:25:10.117
> 
> 标签：spotify, cocoalibspotify-2.0

只是一个关于 SPTrack 和 SPAlbum 的快速问题

假设我有一个存储在 myTracks 中的 SPTrack 数组

我可以通过做得到这首歌的名字

```
[[myTracks objectAtIndex:0] name]; 
```

然而; 当我尝试像这样获取专辑的名称时

```
[myTracks objectAtIndex:0] album]; 
```

返回一个 SPAlbum 对象。这是有道理的，但我无法像这样访问 SPAlbum 的 name 属性：

```
[[[myTracks objectAtIndex:0] album] name]; 
```

name 属性在 SPAlbum.m 中定义为 NSString。我是否试图错误地访问它？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:23:19.390

你`nil`回来了吗？

如果是这样，您需要确保首先加载您的对象，使用`SPAsyncLoading`.

```
[SPAsyncLoading waitUntilLoaded:[[myTracks objectAtIndex:0] album] timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedItems, NSArray *notLoadedItems) {

    if (loadItems.count == 0) return; // Album didn't load!

    NSLog(@"%@", [[[myTracks objectAtIndex:0] album] name]);
}]; 
```

# matlab - 欧几里得距离

> ID：15401825
> 
> 赞同：3
> 
> 时间：2013-03-14T05:25:27.710
> 
> 标签：matlab, matrix, euclidean-distance

我有两点

```
 x1 = (a1,b1,c1,d1,e1);    //5 dimensional point
 x2 = (a2,b2,c2,d2,e2);    //5 dimensional point 
```

那么这是计算欧几里得距离的正确方法吗？

```
 d = sqrt(sqr(a1-a2)+sqr(b1-b2)+sqr(c1-c2)+sqr(d1-d2)+sqr(e1-e2)) 
```

现在我想知道是否`pdist(X)`会给我同样的结果？

这里`X = (x1,x2)`ie`X`是一个 5x2 矩阵。

我也想要方阵形式的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T05:56:45.953

对此有很多答案。一般来说，是的，你有正确的数学，虽然不是正确的 Matlab 语法。

正如你所描述的，给定一些 X：

```
X = [1 3 4 2 1; 8 2 3 5 4] 
```

这是您写出的方程式的语法：

```
d1 = sqrt((X(1,1)-X(2,1))^2+(X(1,2)-X(2,2))^2+(X(1,3)-X(2,3))^2+(X(1,4)-X(2,4))^2+(X(1,5)-X(2,5))^2) 
```

这里有几个更惯用的方法来格式化这个等式：

```
d2 = sqrt(sum(  (X(1,:) - X(2,:)).^2  ))
d3 = sqrt(sum(       diff(X,[],1).^2)) 
```

这是一种更实用的计算方法

```
euclidDistance = @(x,y)  sqrt(sum( (x-y).^2));
d4 = euclidDistance(X(1,:), X(2,:)) 
```

请注意，所有这些方法都返回相同的结果：`d1=d2=d3=d4 = 8.3066`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T05:55:25.693

是的。这是正确的方法。

对于 MATLAB 使用`pdist2(x1,x2,'euclidean')`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-27T07:43:06.647

由于两个向量之间的欧几里得距离是它们差的二范数，您可以使用：

```
d = norm( x1 - x2, 2 ) 
```

计算它。如果缺少第二个参数，则假定为 2 范数。

# python - 子处理管道写入文件故障

> ID：15401836
> 
> 赞同：1
> 
> 时间：2013-03-14T05:26:18.417
> 
> 标签：python, shell, unix, subprocess, pipe

在 shell 中执行它会给我带来切实的结果：

```
wget -O c1 --no-cache "http://some.website" | sed "1,259d" c1 | sed "4,2002d" 
```

在 Python 中执行此操作对我一无所获：

```
subprocess.call(shlex.split("wget -O c1 --no-cache \"http://some.website/tofile\""))
c1 = open("c1",'w')
first = subprocess.Popen(shlex.split("sed \"1,259d\" c1"), stdout=subprocess.PIPE)

subprocess.Popen(shlex.split("sed \"4,2002d\""), stdin=first.stdout, stdout=c1)
c1.close() 
```

这样做也没有结果：

```
c1.write(subprocess.Popen(shlex.split("sed \"4,2002d\""), stdin=first.stdout, stdout=subprocess.PIPE).communicate()[0]) 
```

“让我一无所获”是指文件中的空白输出。有没有人看到这里有什么不寻常的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:46:14.827

我总是使用[铅锤](http://plumbum.readthedocs.org/en/latest/)来运行外部命令。它提供了一个非常直观的界面，当然，它会为我提供转义。

看起来像：

```
from plumbum.cmd import wget, sed
cmd1 = wget['-O', 'c1']['--no-cache']["http://some.website"]
cmd2 = sed["1,259d"]['c1'] | sed["4,2002d"]
print cmd1
cmd1()  # run it
print cmd2
cmd2()  # run it 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:47:43.630

该语句`c1 = open("c1",'w')`打开文件`c1`以进行写入并截断任何现有数据，因此 wget 写入文件的所有内容都会在您调用 sed 之前被删除。

反正我觉得`shlex.split`一般都挺尴尬的。我更喜欢手动构建 args 列表：

```
from subprocess import Popen, PIPE

p0 = Popen(['wget', '-O', '-', 'http://www.google.com'], stdout=PIPE)
p1 = Popen(['sed', '2,8d'], stdin=p0.stdout, stdout=PIPE) 
with open('c1', 'w') as c1:
    p2 = Popen(['sed', '2,7d'], stdin=p1.stdout, stdout=c1)
    p2.wait() 
```

但是，没有明显的理由让 Python 程序员不得不调用 sed。Python 有字符串方法和正则表达式。此外，您可以使用 wget 而不是`urllib2.urlopen`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T06:18:51.850

为什么不只在管道中完成所有操作并将输出发送到文件？

```
wget -O - "http://www.google.com" | sed "1,259d" | sed "4,2002d" > c1 
```

或者，如果您不想将其发送到文件，而是希望将其放在标准输出上：

```
wget -O - "http://www.google.com" | sed "1,259d" | sed "4,2002d" 
```

如果你想在 Python 中做到这一点：

```
pipe = subprocess.Popen(shlex.split("wget -O - \"http://www.google.com\" | sed \"1,259d\" | sed \"4,2002d\""), stdout=subprocess.PIPE)
result = pipe.communicate()[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T06:42:13.477

为了让那些或多或少遇到相同类型问题的人的生活更轻松，我决定发布最终修订的代码，其中考虑了`c1`对数据的评论和覆盖。特别令人感兴趣的是它的使用`communicate()`有助于完全消除僵尸进程的任何表现，这非常令人恼火。`subprocess.call`此外，我发现在不需要管道的部分使用它很有用。最终没有`wait()`必要。最终，远离`sed`并且`wget`是一个好主意，尤其是使用 Python 的内置工具和`urllib2`.

```
p0 = subprocess.call(shlex.split("wget -Oc1 --no-cache \"http://Some.website/tofile\""))
p1 = subprocess.Popen(shlex.split("sed \"1,261d\" c1"), stdout=subprocess.PIPE)

with open("cc1", 'w') as cc1:
    p2 = subprocess.Popen(shlex.split("sed \"3,2002d\""), stdin=p1.stdout, stdout=cc1)
    p2.communicate()
    p1.communicate()
    p3 = subprocess.call(shlex.split("mv cc1 c1")) 
```

# java - 身份验证是怎么弹出来的

> ID：15401838
> 
> 赞同：3
> 
> 时间：2013-03-14T05:26:31.877
> 
> 标签：java, tomcat, servlets

我有一个非常简单的疑问，我知道你们中的大多数人可能会对这个问题投反对票。但由于我对 Web 应用程序非常陌生，所以我不知道它是如何出现的。

问题：每当我登录某个 Web 应用程序时，我都会收到一个要求进行身份验证的弹出窗口。类似的东西，

> 警告：此服务器要求以不安全的方式发送您的用户名和密码（没有安全连接的基本身份验证）。

为此在哪里设置？我试图为我的 Hello World 应用程序做类似的事情。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:42:06.497

这是Servlet 技术支持的**基本身份验证。**这就是您在 web.xml 中为 Web 资源定义基本身份验证的方式。

```
<login-config>
      <auth-method>BASIC</auth-method>
      <realm-name>default</realm-name>
</login-config> 
```

**请在这里找到一个完整的例子：**

```
<?xml version='1.0' encoding='UTF-8'?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<web-app>
      <welcome-file-list>
           <welcome-file>welcome.jsp</welcome-file>
      </welcome-file-list>

      <security-constraint>
            <web-resource-collection>
                  <web-resource-name>Success</web-resource-name>
                  <url-pattern>/secured/*</url-pattern>
                 <http-method>GET</http-method>
                 <http-method>POST</http-method>
            </web-resource-collection>
            <auth-constraint>
                <role-name>secured</role-name> 
            </auth-constraint>
      </security-constraint>

      <login-config>
          <auth-method>BASIC</auth-method>
          <realm-name>default</realm-name>
      </login-config>

       <security-role>
           <role-name>secured</role-name>
       </security-role>
</web-app> 
```

请阅读以下链接以进一步了解 Servlet 技术支持的几种身份验证机制：

[标准形式的认证 Java servlet](https://stackoverflow.com/questions/11182356/standard-form-authentification-java-servlets/11183774#11183774)

# ruby-on-rails - 方法 ID 的 Static_pages#home 中的 NoMethodError

> ID：15401840
> 
> 赞同：0
> 
> 时间：2013-03-14T05:26:41.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

又是 Rails 的新手。按照 Michael Hartl 的 rails 教程，我试图通过最后一部分，但我收到了这个错误

```
undefined method `id' for #<String:0x3794b80> 
```

它来自我的 _feed_item.html.erb，我不明白为什么会出现此错误。

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>

  <% if current_user?(feed_item.user) %>
    <%= link_to "delete", feed_item, method: :delete, data: { confirm: "You sure?" }, title: feed_item.content %>
  <% end %>
</li> 
```

嘿，伙计们，我感到很抱歉；后睡着了。

在查看我所有的控制器时，我并没有特别看到它是在哪里定义的，但是它在我开始最后一个任务之前确实有效，所以我不知道中间发生了什么。

这是用户控制器

```
class UsersController < ApplicationController
before_filter :signed_in_user, only: [:index, :edit, :update]
before_filter :correct_user, only: [:edit, :update]
before_filter :admin_user,     only: :destroy
def new
@user=User.new
end

def create
@user=User.new(params[:user])

if @user.save
  #Handle a save
  sign_in @user
  flash[:success] = "Welcome to the Sample App!"
  redirect_to @user
else
  render 'new'
 end
end

def show 
@user=User.find(params[:id])
@microposts=@user.microposts.paginate(page: params[:page])
end

 def edit
 @user=User.find(params[:id])
 end

 def update
 @user=User.find(params[:id])
 if @user.update_attributes(params[:user])
  flash[:success]="Successfully updated your profile"
  sign_in @user
  redirect_to @user

 else
  render 'edit'
 end
 end

def correct_user
@user=User.find(params[:id])
redirect_to(root_path) unless current_user?(@user)
end

def index
@users=User.paginate(page: params[:page])
end

def destroy
User.find(params[:id]).destroy
flash[:success]="User destroyed"
redirect_to users_url
end

def admin_user
redirect_to(root_path) unless current_user.admin?
end

def following
@title="Following"
@user=User.find(params[:id])
@users=@user.followed_users.paginate(page: params[:page])
render 'show_follow'
end

def followers
@title="Followers"
@user=User.find(params[:id])
@users=@user.followers.paginate(page: params[:page])
render 'show_follow' 
```

结束结束

micropost_controller

```
class MicrpostsController< ApplicationController
before_filter :signed_in_user, only: [:create, :destroy] 
```

定义索引

结尾

```
 def create
@micropost=current_user.microposts.build(params[:micropost])
if @micropost.save
  flash[:success]="Micropost Created!"
  redirect_to root_url

  else
  @feed_items = []
  render 'static_pages/home'
  end
  end

def destroy
@micropost.destroy
redirect_to root_url
end

def correct_user
@micropost=current_user.microposts.find_by_id(params[:id])
redirect_to root_url if @micropost.nil?
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:53:49.310

我得到它来工作的人。问题出在我的微博模型中。

```
def self.from_users_followed_by(user)
followed_user_ids= "SELECT followed_id FROM relationships WHERE follower_id=:user_id",
where("user_id IN (#{followed_user_ids}) OR user_id=:user_id", user_id: user)
end 
```

应该是def self.from_users_followed_by（user）followed_user_ids =“从关系中选择follower_id =：user_id” where（“user_id IN（#{followed_user_ids}）或user_id =：user_id”，user_id：user.id）结束

# java - 使用 Java 分析系统内存/cpu 统计信息

> ID：15401842
> 
> 赞同：0
> 
> 时间：2013-03-14T05:26:57.860
> 
> 标签：java, jsp, unix, google-visualization

我想在我的 Unix 系统上获得简单的结果，例如总内存、可用内存、CPU 使用率等。目前我正在使用 shell 命令`top`。

**Java中是否有任何功能可以做同样的事情？**

我的目标是通过 Google Gauge Charts 在网络应用程序中显示结果。很明显，我使用 Java 会更容易，而不是在 Java 中执行 Unix 命令。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:40:07.327

```
OperatingSystemMXBean operatingSystemMXBean = 
    ManagementFactory.getOperatingSystemMXBean();

for (Method method: operatingSystemMXBean.getClass ().getMethods ()) 
{
    method.setAccessible (true);
    String methodName = method.getName ();
    if (methodName.startsWith ("get")
        && Modifier.isPublic (method.getModifiers ())
        && OperatingSystemMXBean.class.isAssignableFrom (
            method.getDeclaringClass ())) {
        try
        {
            System.out.println (
                methodName.substring (3) + ": " + 
                method.invoke (operatingSystemMXBean));
        }
        catch (Throwable ex)
        {
            // Ignore
        }
    }
} 
```

在不同的操作系统和 Java 版本上，输出是不同的。这是 Linux 上 JDK 1.7 的输出：

```
FreeSwapSpaceSize: 2172059648
FreePhysicalMemorySize: 1757573120
CommittedVirtualMemorySize: 26741071872
MaxFileDescriptorCount: 8192
OpenFileDescriptorCount: 4
ProcessCpuLoad: 2.0251808355598717E-10
ProcessCpuTime: 60000000
SystemCpuLoad: 0.03673989450920194
TotalPhysicalMemorySize: 101439979520
TotalSwapSpaceSize: 4294950912
Name: Linux
ObjectName: java.lang:type=OperatingSystem
AvailableProcessors: 12
Arch: amd64
SystemLoadAverage: 1.86
Version: 2.6.32.54-0.3-default 
```

与命令上报的值`SystemLoadAverage`相同。`load average``top`

# ios - UIScrollView 不会自动调整大小

> ID：15401848
> 
> 赞同：3
> 
> 时间：2013-03-14T05:27:35.283
> 
> 标签：ios, xcode, uiscrollview, autosize

我读到的关于在 iOS 5+ 上支持 UIScrollView 的所有内容都表明我应该能够使用 Xcode 的 Size Inspector 中的自动调整大小功能来自动调整我的视图大小。

使用 Storyboards，我有一个 TabBarViewController，其中一个选项卡有一个 UIScrollView 和一个页面控件。

在幕后，我以编程方式设置了 UIView 中页面的处理（我不知道是否有必要发布代码，但为了清楚起见我还是会这样做）。

从 iPhone 3.5 英寸切换到 iPhone 4 英寸时，自动调整大小不起作用。*在使用 3.5 英寸屏幕时，我希望 UIScrollView 和 Page 控件可见。*

我应该注意到 iPad 版本（见下面的代码）在我的子视图中没有正确捕捉。（这可能是一个完全不同的问题）。

**4寸屏幕** ![4寸屏幕](../Images/5eaa5e48ef2d5bf4f457ff850cbbf0f4.png)

**3.5寸屏幕** ![3.5寸屏幕](../Images/3e045ef36abc90f4816468dab1ed0b35.png)

以防万一，这是我的 .m 文件：

```
#import "TutorialViewController.h"

@interface TutorialViewController ()
@property (nonatomic, strong) NSArray *pageImages;
@property (nonatomic, strong) NSMutableArray *pageViews;

- (void)loadVisiblePages;
- (void)loadPage:(NSInteger)page;
- (void)purgePage:(NSInteger)page;

#ifdef UI_USER_INTERFACE_IDIOM
#define IS_IPAD() (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#else
#define IS_IPAD() (false)
#endif

@end

@implementation TutorialViewController

@synthesize scrollView = _scrollView;
@synthesize pageControl = _pageControl;

@synthesize pageImages = _pageImages;
@synthesize pageViews = _pageViews;

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // 1
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {
        // 2
        CGRect frame = self.scrollView.bounds;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0.0f;

        // 3
        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]];
        newPageView.contentMode = UIViewContentModeScaleAspectFill;
        newPageView.frame = frame;
        [self.scrollView addSubview:newPageView];
        // 4
        [self.pageViews replaceObjectAtIndex:page withObject:newPageView];
    }
}

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // Remove a page from the scroll view and reset the container array
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
    }
}

- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Update the page control
    self.pageControl.currentPage = page;

    // Work out which pages you want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }

    // Load pages in our range
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }

    // Purge anything after the last page
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }

}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Load the pages that are now on screen
    [self loadVisiblePages];
    // NSLog(@"Scroll View Did Scroll");
}

- (void)viewDidLoad {
    [super viewDidLoad];

    // Step 1
    if (IS_IPAD())
    {
        self.pageImages = [NSArray arrayWithObjects:
                           [UIImage imageNamed:@"1536x2048 tutorial_1.png"],
                           [UIImage imageNamed:@"1536x2048 tutorial_2.png"],
                           [UIImage imageNamed:@"1536x2048 tutorial_3.png"],
                           [UIImage imageNamed:@"1536x2048 tutorial_4.png"],
                           nil];
    }
    else
    {
        self.pageImages = [NSArray arrayWithObjects:
                           [UIImage imageNamed:@"640x960 tutorial_1.png"],
                           [UIImage imageNamed:@"640x960 tutorial_2.png"],
                           [UIImage imageNamed:@"640x960 tutorial_3.png"],
                           [UIImage imageNamed:@"640x960 tutorial_4.png"],
                           nil];
    }

    NSInteger pageCount = self.pageImages.count;

    // Step 2
    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageCount;

    // Step 3
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // Step 4
    // 3.5in height = 388
    // 4in height = 476
    CGSize pagesScrollViewSize = self.scrollView.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height);

    // Step 5
    [self loadVisiblePages];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T05:31:31.533

![在此处输入图像描述](../Images/84a80035d6fbbf0c00723af701975169.png)

像这样使用

或者

![在此处输入图像描述](../Images/d59db0e743ce437045798de07d04054c.png)

像这样你的问题会解决

或在 .m 文件中编写单行代码

```
 scrollview.frame = CGRectMake(x, y, 320, self.view.bounds.size.height); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T06:27:03.743

只需检查您添加滚动视图的视图是否启用了 AutoResizeSubviews。如果不是，它不会根据屏幕大小调整滚动视图。

其次，根据 3.5 英寸屏幕调整滚动视图，AutoResizing 将调整为 4 英寸屏幕。不要反其道而行之。

对于页面控制，这样做。它将始终位于您视图的底部。

![](../Images/be4439b0aa1a7abcd8d5bfedac5f6dec.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T10:12:20.260

在 Supporting Files 文件夹中选择 yourappname.pch 并在文件底部的最后一个 #endif 之前添加此行以检查设备...。

`#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES)`

然后把它写在你的 ViewWillAppear()

```
 if (IS_IPHONE5)
    {
        scrollView.contentSize = CGSizeMake(width,height );
    } 
```

# javascript - 在 HTML 中设置下拉菜单的默认值 - 特殊情况

> ID：15401850
> 
> 赞同：0
> 
> 时间：2013-03-14T05:27:43.623
> 
> 标签：javascript, ruby-on-rails, html, erb

我的 Rails 视图 (index.html.erb) 中有多个下拉框。代码如下所示：

```
......
......
<td>
<% @builds.each_with_index do |row,index|
    if row2[0].to_s == row_s[0] %> 
      (When this condition is true I want to set the value of the dropdown list)
          (The value could be PASS, FAIL or PENDING which comes from the database as row_s[7])

       <form id=<%= "build_status_form#{index}" %>>
           <select name="condition" 
             id=<%= "build_status#{index}" %>  onchange="this.form.submit()">
                   <option value="PENDING">PENDING</option>
                   <option value="PASS">PASS</option>
                   <option value="FAIL">FAIL</option>
           </select>
       </form>

    <% end %>
<% end %>
</td> 
```

如何动态设置每个下拉列表的默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:49:19.030

这可以使用 rails 助手在一行中完成

```
<form id=<%= "build_status_form#{index}" %>>
  <%= select_tag :condition, options_for_select(%w[PENDING PASS FAIL], row_s[7]), id: "build_status#{index}", onchange: 'this.form.submit()' %>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:29:55.513

假设如果要设置默认值`PASS`使用`selected`

```
 <form id=<%= "build_status_form#{index}" %>>
       <select name="condition" 
         id=<%= "build_status#{index}" %>  onchange="this.form.submit()">
               <option value="PENDING">PENDING</option>
               <option value="PASS" selected="selected">PASS</option
               <option value="FAIL">FAIL</option>
       </select>
   </form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:30:11.290

```
<form id=<%= "build_status_form#{index}" %>>
           <select name="condition" 
             id=<%= "build_status#{index}" %>  onchange="this.form.submit()">

                   if(your value is true)
                   {
                       if value is pending then 
                         <option selected="selected" value="PENDING">PENDING</option>
                       else
                        <option  value="PENDING">PENDING</option>

                       like this you can write
                  } 
           </select>
       </form> 
```

我在这里像 javascript 一样写。你可以根据需要在 ralis 中写。

# iphone - 如何在iphone中将数据从一个视图传递到另一个视图

> ID：15401852
> 
> 赞同：-2
> 
> 时间：2013-03-14T05:27:49.663
> 
> 标签：iphone, ios, objective-c, uiviewcontroller

我想将 int 或 string 数据从一个视图传递到另一个视图，请帮助我

```
NSUInteger i1 = [array indexOfObject:username];
SSPUserLogedInViewController *logInView = [[SSPUserLogedInViewController alloc] init];
logInView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:logInView animated:YES completion:nil]; 
```

我可以查看下一个视图，但无法传递数据。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:37:54.527

1.  为将数据传递到下一个视图中创建一个变量。
2.  使用下一个视图的实例，访问您在下一个视图中创建的变量
3.  将您的值分配给变量

对于你的情况，前任；

1.  假设你想传递一个 int 的值

    在下一个视图控制器中：将其复制到`**.h**`文件中

> @property（分配）int temp；

2\. SSPUserLogedInViewController *logInView = [[SSPUserLogedInViewController alloc] init]; >

```
 logInView.modalTransitionStyle = UIModalTransitionStyleCoverVertical; 
```

> ```
>  logInView.temp = <YOUR_VALUE>
>         [self presentViewController:logInView animated:YES completion:nil]; 
> ```

1.  在下一个视图控制器中：将其复制到`**.m**`文件 中

> -(void)viewWillAppear
> 
> {
> 
> ```
>  NSLog(@"My Value = %i",_temp); 
> ```
> 
> }

享受编程！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:32:40.223

写一些函数，比如`- (void)doSomeThing:(NSString) data`在你的`SSPUserLogedInViewController`课堂上

并打电话

```
[logInView doSomeThing:yourDetails]; 
```

后

`SSPUserLogedInViewController *logInView = [[SSPUserLogedInViewController alloc] init];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:45:41.643

定义 NSMutableString *string; 具有 SSPUserLogedInViewController 类中的属性。视图中的 alloc init 确实加载了。您可以像这样设置字符串。

```
NSString *i1 = [NSString stringWithFormat:@"%@",[array objectAtIndex:indexPath.row]];
SSPUserLogedInViewController *logInView = [[SSPUserLogedInViewController alloc] init];
[logInView.string setString:i1];
logInView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:logInView animated:YES completion:nil]; 
```

# javascript - Chrome 扩展解析 RSS

> ID：15401853
> 
> 赞同：2
> 
> 时间：2013-03-14T05:27:57.903
> 
> 标签：javascript, jquery, google-chrome-extension, rss-reader, jfeed

我正在开发使用 RSS 解析器的 Chrome 扩展程序，但是我使用了几种不同的方法，但我不断收到错误消息：“XMLHttpRequest 无法加载 Example.rss。原始 chrome 扩展程序：//djhppbppokfmldecpcfbcmchagimpmpc Access 不允许 -控制-允许-来源。”

尝试在下面的第一个答案中使用 AJAX 提要和 jFeed 方法，但都不适合我。

[如何使用 JavaScript 解析 RSS 提要？](https://stackoverflow.com/questions/10943544/how-to-parse-a-rss-feed-using-javascript)

这是我的 JavaScript 函数：

```
 jQuery.getFeed({
   url: 'http://example.rss',
   success: function(feed) {
       alert(feed.title);
   }}); 
```

我的 Manifest.JSON 看起来像

```
"manifest_version": 2,
"version": "1.0",
"permissions": ["http://*/", "tabs"],
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:41:18.863

您指定的主机权限缺少`path`.

更改`http://*/`为`http://*/*`

有关详细信息，请参阅有关[匹配模式](http://developer.chrome.com/extensions/match_patterns.html)的 chrome 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:54:54.400

您需要在清单中添加 CSP。类似于此行，但将 example.com 更改为您的提要：

```
content_security_policy": "script-src 'self' https://example.com; object-src 'self' 
```

有关更多信息，请阅读：[Chrome 扩展中的 CSP](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

# c - 如何从磁盘保存和加载一个巨大的哈希表来回？

> ID：15401854
> 
> 赞同：2
> 
> 时间：2013-03-14T05:27:59.593
> 
> 标签：c, search, data-structures, hash, indexing

我正在尝试为大量收藏编写搜索引擎，以用于学习目的。我从自己的直觉开始。然后我研究并最终得出了一个工作模型。

我正在构建一个巨大的哈希表来保存我收藏中的所有术语。从集合中构建它是非常昂贵的。一旦我计算了表，我想将它保存到磁盘，这样每当我想在我的程序中访问这个哈希表时，我就可以从磁盘再次加载它。

**有什么标准的方法吗，还是我必须发明自己的文件格式和技巧才能做到这一点？**

**注意**：has-table 仅用于存储所有术语出现，我打算将主要排名数据存储在一个帖子文件中，并将其指针设置在哈希表的相应术语中。

我在 C 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:43:28.117

[BDB](http://docs.oracle.com/cd/E17076_02/html/programmer_reference/index.html)是一个用于有效管理平面文件数据库的库。特别是支持哈希表格式。如果需要有序访问，也可以使用 B 树。

# javascript - 我可以将 IE10 调试栏切换到 iframe 吗？就像 Firebug 中的 cd(frames[0])。有没有类似的命令？

> ID：15401858
> 
> 赞同：1
> 
> 时间：2013-03-14T05:28:10.713
> 
> 标签：javascript, internet-explorer, javascript-debugger

我需要在 IE10 中调试 JavaScript。当我在脚本源代码中放置“调试器”关键字时，它不会停止。所以我决定在调试面板本身设置调试点。但是要做到这一点，我需要找到带有源代码的文件，该文件已加载到 iframe。所以我需要以某种方式切换到那个框架。:) 当我说“切换”时，我的意思是获取 iframe 的上下文而不是主窗口的上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T09:41:25.567

每当加载 iframe 内容时，您都可以从位于工具栏正下方的下拉框中选择任何包含的脚本文件，靠近垂直拆分器。

我在图片上围绕它放置了一个红框。

当您的脚本加载到左侧面板中时，您可以使用常用工具对其进行调试：断点`F10`等`F11`。

看![在此处输入图像描述](../Images/a4dc52f8eb04bcf294227f1afdb51593.png)

# asp.net - 在 machine.config 文件中存储数据库服务器名称

> ID：15401862
> 
> 赞同：0
> 
> 时间：2013-03-14T05:28:26.557
> 
> 标签：asp.net, web-config, database-connection, connection-string, machine.config

在 web.config 我们存储连接字符串，如：

```
 connectionString="Server=serverName;Database=dbName;Username=xyz;Password=xyz" 
```

但是每次，服务器名称都在不断变化......我的意思是很多时候数据库从一台服务器转移到另一台服务器。所以我们需要在所有应用程序中更改连接字符串

是否可以将服务器名称存储在 machine.config 文件和连接字符串的其他部分，即数据库名称、用户名、密码在 web.config 文件中？

如果可能的话如何？...我们可以添加类似“key”的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:50:46.753

您可以将连接字符串直接存储在 machine.config

这是一个讨论该选项的线程：[Storing connection strings in machine.config vs storage them in web.config](https://stackoverflow.com/questions/1184187/storing-connection-strings-in-machine-config-vs-storing-them-in-web-config)

# r - R中矩阵中块数量的计算

> ID：15401863
> 
> 赞同：2
> 
> 时间：2013-03-14T05:28:26.767
> 
> 标签：r

我对 R 中的数据操作有一个非常普遍的问题，我正在寻找一种方便快捷的方法。假设我有一个维度为 (R)-by-(nxm) 的矩阵，即 R 行和 n 次 m 列。

```
set.seed(999)
n = 5; m = 10; R = 100
ncol = m*n
mat = matrix(rnorm(n*m*R), nrow=R, ncol=ncol) 
```

现在我想要一个`new.mat`维度为 (R)-by-(m)`mat`的新`n`矩阵（称为下一个`n`元素，依此类推。这样，第一行`mat`以`m`数字结束。每隔一行做同样的事情`mat`。

对于上面给出的示例，新矩阵第一行的第一个元素`new.mat`应该是`sum(mat[1,1:5])`，第二个元素是`sum(mat[1,6:10])`，最后一个元素是`sum(mat[1,46:50])`。第 2 行`new.mat`是`(sum(mat[2,1:5]), sum(mat[2,6:10),...)`.

如果可能，最好避免`for`循环。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:37:46.003

`rowsum`在这里是一个有用的功能。你将不得不做一些`t`转换才能得到你想要的

您需要创建一个分组向量，类似于`c(1,1,1,1,1,2,2,2,2,2,....,10,10,10,10,10)`

```
grp <- rep(seq_len(ceiling(ncol(mat)/5)), each = 5, length.out = ncol(mat))
# this will also work, but may be less clear why.
# grp <- (seq_len(ncol(mat))-1) %/%5 
```

`rowsum`为分组变量的每个级别计算数值矩阵类对象的行之间的列总和

您正在寻找跨列的行总和，因此您必须转置您的结果（和您的输入）

```
 t(rowsum(t(mat),grp)) 
```

# c++ - 多维数组的越界检查

> ID：15401876
> 
> 赞同：0
> 
> 时间：2013-03-14T05:29:28.280
> 
> 标签：c++

我正在读一本关于安全 C++ 的书。在这里，作者提到了如何避免超出范围的数组读取。在这里，提到了我们如何避免多维数组的超出范围的数组读取。这里作者使用`operator()`如下链接所示的函数代替`operator[]`并给出了以下解释。

[https://github.com/vladimir-kushnir/SafeCPlusPlus/blob/master/scpp_matrix.hpp](https://github.com/vladimir-kushnir/SafeCPlusPlus/blob/master/scpp_matrix.hpp)

请注意，要访问多维数组，我们要么需要使用多个`[]`运算符，例如 matrix[i][j]，要么需要使用单个`()`运算符，例如 matrix(i,j)。

`[]`如果我们让运算符返回一个`T*`指向第 i 行第零个元素的指针，则可以实现第一种方法。但是，这否定了我们对列索引越界的诊断，这违背了在运行时捕获错误的目的。当然，我们可以创建一些包含对行的智能引用的模板类，返回使用第一个运算符（`[i]`）的实例，然后在第二个运算符（`[j]`）中使用边界检查。

我的问题是作者所说的“**创建一些包含对行的智能引用的模板类，返回使用第一个运算符（`[i]`）的实例，然后在第二个运算符（`[j]`）中使用边界检查”是什么意思。**? 请求提供示例代码我们如何在 C++ 中实现上述逻辑？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T05:53:34.940

基本思想如下所示：

```
#include <vector>
#include <iostream>

template <class T>
class matrix { 
    size_t cols;
    size_t rows;
    std::vector<T> data;

    class row_proxy {  // This class is the part the question really asked about
        size_t row;
        matrix &m;
    public:
        row_proxy(matrix &m, size_t row) : row(row), m(m) {}

        T &operator[](size_t col) {
            if (row >= m.rows || col >= m.cols) // Note: row & col are indices not array count
                throw std::logic_error("Bad index");
            return m.data[row * m.cols + col];
        }
    };

public:

    matrix(size_t cols, size_t rows) : rows(rows), cols(cols), data(rows*cols) {}

    row_proxy operator[](size_t row) { 
        return row_proxy(*this, row);
    }
};

int main() { 
    matrix<int> m(3, 3);

    for (int i=0; i<3; i++)   // fill the matrix with identifiable numbers
        for (int j=0; j<3; j++)
            m[i][j] = i * 100 + j;

    for (int i=0; i<3; i++) { // show the content
        for (int j=0; j<3; j++)
            std::cout << m[i][j] << "\t";
        std::cout << "\n";
    }

    try {                     // test the bounds checking.
        m[4][1] = 21;
    }
    catch(std::logic_error &e) { 
        std::cerr << e.what(); 
    }

    return 0;
} 
```

因此，当我们创建一个矩阵时，我们将其大小保存在`rows`和中`cols`。当我们`operator[]`在矩阵上使用时，它不会尝试直接返回对矩阵中项目的引用——而是返回一个代理类的实例，该类跟踪行和矩阵，*并*提供`operator[]`其自己的。

因此，当您使用 时`matrix[a][b]`，第一个只是保存`a`并`matrix`进入代理对象。然后`[b]`在该代理对象上调用该部分。这会检查`a`和`b`都在我们为矩阵保存的范围内，如果是，则返回对向量中正确对象的引用。否则，它会抛出一个`std::Logic_error`（可能不是最好的选择——只是我想到的第一个）。

我应该补充一点，这个一般想法有很多变化。仅举一个例子，您可以在编译时指定数组的大小，但将大小作为模板参数传递。这可能有一些优点——例如，`matrix<int, 2, 3>`它们`matrix<int, 3, 2>`是完全不同的类型，所以你不能不小心将一个分配给另一个。它也可能有一些缺点（最明显的是，您*需要*在编译时知道大小，否则它根本不起作用）。

# java - 为动态创建的 CheckBox 添加 onClick 动作监听器

> ID：15401889
> 
> 赞同：1
> 
> 时间：2013-03-14T05:30:16.190
> 
> 标签：java, android

我在 Android Class ***(Not Activity)***中动态创建 CheckBoxes 。所以我需要将`onClick`Action Listener 添加到我的复选框中，如何实现这一点。

我正在使用以下代码。

```
public class DataBaseAdapter extends SQLiteOpenHelper
{
    ...//onCreate and onUpdate
    ...
    ...
    public TableLayout getAllAlarmList(Context con)
    {
            TableLayout tb = new TableLayout(con);
            TableRow[] tr = new TableRow[maxCount]; //maxCount is the number of rows 
            CheckBox[] check = new CheckBox[maxCount]; //maxCount is the number of rows in the database.
            for(int i=0;i<maxCount;i++)
            {
                tr[i]=new TableRow(con);
                check[i]= new CheckBox(con); //con is Context class passed as argument.
                check[i].setText(Integer.toString(i));
                check[i].setId(100+i);
                // I have to add onClick Action Listener here.
                tr[i].addView(check[i]);
                tb.addView(tr[i]);
            }
            return tb;
    }

} 
```

为此，我还跟踪复选框的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:40:34.457

您还可以将任何侦听器设置为非活动类的视图。试试看：

```
check[i].setId(100+i);
check[i].setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

   @Override
   public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {

      switch(buttonView.getId()) {
        case R.id.checkbox_meat:
         // do your code here...
          break;
        case R.id.checkbox_cheese:
         // do your code here...
          break;
       // TODO: Veggie sandwich
      }

   }
}); 
```

# java - 数组并在我的主程序中实现我的 CDList 方法？

> ID：15401894
> 
> 赞同：0
> 
> 时间：2013-03-14T05:30:55.380
> 
> 标签：java, arrays, main

这可能有点复杂，但我会尽力解释

好吧，让我先把我的 CDList 类

* *MAIN:* *现在这是主程序问我的问题 主程序是测试 CDList 功能。您可以硬编码 5 次调用 add，然后 add() 将提示用户输入。您的主程序应该调用所有 CDlist 公共方法，并生成带标签的输出，清楚地解释 Page 2 of 2 输出试图演示的内容。这就是我到目前为止所拥有的 main ......只是为了测试 CDList 中的 add 方法......

**输出：** 这个程序的输出是一个完整的捕获测试会话，主程序产生标签说，“测试删除：”（或其他），然后显示结果。让评分员清楚地看到结果。您要 1) 将 5 张 CD（具有合理数据，每张至少 3 首曲目）添加到 CDList，2) 显示按艺术家排序的数据，3) 显示按标题排序后的列表，以及 4) 显示之前的列表并在从列表中删除其中一张 CD 之后。要获得满分，输出必须清楚地标记，CD 列表显示必须整洁且易于阅读。

编辑 5：我的 CDList 类

```
 package cd;

import java.util.Scanner;

public class CDList {

    public int cdnum;
    private CD[] CDlist;
    private int front, rear;
    //private String artist;      
    //private String title;

    public CDList(int size) {
        CDlist = new CD[size];
        cdnum = 0;
        front = 0;
        rear = size - 1;
    }

   public boolean add() {
        boolean result = false;
        Scanner input = new Scanner(System.in);

        System.out.println("Please enter the Artist name and the CD title: ");
        CD yourCD = new CD(input.nextLine(), input.nextLine());
        System.out.println("Enter the number of songs: ");
        int songNum = input.nextInt();
        System.out.println("Enter the name of the songs: ");

        for (int i = 0; i <= songNum; i++) {
            yourCD.addTrack(input.nextLine());
        }
        CDlist[cdnum] = yourCD;

        if (rear == front) {
            result = false;
        } else {
            if (CDlist[rear] != null) {
                rear--;
            } else {
                CDlist[rear] = yourCD;
            }
            result = true;
        }

        return result;    

    }

    public void delete() {
        Scanner deleteInput = new Scanner(System.in);
        System.out.println("Which artist you would like to delete? ");
        System.out.println("Enter artist name and title to be deleted:");
        String artist = deleteInput.nextLine();
        String title = deleteInput.nextLine();

        for (int i = 0; i <= CDlist.length - 1; i++) {

            if ((CDlist[i].getArtist().equals(artist))
                    && (CDlist[i].getTitle().equals(title))) {
                System.out.println("Found: " + CDlist[i].getArtist());
                System.out.println(CDlist[i].getTitle());

                if (deleteInput.nextInt() == 1) {
                    CDlist[i] = null;
                    cdnum--;
                }
            } else {
                System.out.println("CD not found in the list.");
            }
        }

    }

    public void SortArtist() {

        CD temp = new CD(" "," ");
        for (int i = 0; i <= CDlist.length; i++) {
            if (i < CDlist.length-1) {
                if (CDlist[i].getArtist().compareTo(CDlist[i+1].getArtist())<0){
                temp = CDlist[i];
                CDlist[i] = CDlist[i + 1];
                CDlist[i + 1] = temp;
            }
        }
    }
    }

    public void SortTitle() {
        CD temp1 ;
        for (int i = cdnum; i > 0; i--) {
            int x = 0;
            for (int j = 1; j <= i; j++) {
                if (CDlist[i].getTitle().compareTo(CDlist[i+1].getTitle())<0) {
                    x = j;
                }
            }
            temp1 = CDlist[x];
            CDlist[x] = CDlist[i];
            CDlist[i] = temp1;
        }
    }

    public void Display() {
        for (int i = 0; i <= cdnum; i++) {
            while (CDlist[i] == null) {
                i++;
            }
            CDlist[i].display();
        }
    }

    public int size() {
        return cdnum;
    }
} 
```

输出错误：

> 是否要添加新CD 请输入艺术家姓名和CD 标题：eminem recovery 输入歌曲数量：3 输入歌曲名称：空间有限 不怕爱你说谎的方式 请输入艺术家姓名和CD 标题：micheal jackson 惊悚片 输入歌曲数量：3 输入歌曲名称：beat it 惊悚片 baby be mine 请输入艺术家姓名和 CD 标题：sean paul tomahawk technology 输入歌曲数量：3 输入名称歌曲：她不介意放在你身上 请输入艺术家姓名和CD名称：Manafest Glory 输入歌曲数量：3 输入歌曲名称：你在哪里失控的梦想 请输入艺术家姓名和 CD 标题：kj-52 合作 输入歌曲数量： 3 输入歌曲名称：亲爱的苗条 你在哪里 为什么
> 
> cd.Main.main(Main.java:17) 处 cd.CDList.SortArtist(CDList.java:86) 处的线程“main”java.lang.NullPointerException 异常 Java 结果：1
> 
> 这是第 86 行： if (CDlist[i].getArtist().compareTo(CDlist[i+1].getArtist())<0)
> 
> 第 17 行和第 17 行：list.SortArtist();
> 
> * * *

主要的

```
 package cd;

public class Main {

    public static void main(String[] args) {

        System.out.println("Would you like to add a new CD");
        CDList list = new CDList(5);
        for (int i = 0; i < 5; i++) {
            list.add();
        }
        list.SortArtist();
        list.Display();
        list.SortTitle();
        list.Display(); 
        list.delete();
        list.Display();

    }
} 
```

EDIT3：我的 CD 课

```
package cd; 
```

公开课 CD {

```
private String artist;      //stores artist name
private String title;       //stores CD title
private String track;
private tracklist list;            //tracklist variable

// constructor, sets artist and title, creates tracklist array
public CD(String artistname, String titlename) {
    artist = artistname;
    title = titlename;
    list = new tracklist();

}

public String getArtist() {
    return artist;

}

public String getTitle() {
    return title;
}

// adds a new track, return true if less than 100, flase if no space
public boolean addTrack(String trackinfo) {
    if (list.count < 100) {
        list.add(trackinfo);
        return true;
    } else {
        return false;
    }
}

public int numTracks() {
    return list.count;
}

public void display() {
    System.out.println("Artist:  \t" + artist);
    System.out.println("CD Title: \t" + title);
    list.display(5);
} 
```

}

EDIT4：曲目列表类

```
 package cd;

public class tracklist {

    public String[] lists;  //array
    private String tNum;
    private String tName;
    int numElements;        // Counter to keep track of the used slots
    int count;              //loop counter

// constructor, creats array for tracks
    public tracklist() {

        numElements = 0;
        lists = new String[100];

    }

// adds tracks to tracklist
    public boolean add(String track) {
        if (numElements < 100) {
            lists[numElements] = track;
            numElements++;
            return true;
        } else {
            System.out.println("The tracklist is full.");
            return false;
        }
    }

//returns the number of elements in array
    public int count() {
        return numElements;
    }

//displays tracklist in required form
    public void display(int indent) {
        tName = "%" + indent + "s";
        tNum = "%" + (indent - 2) + "d";

        System.out.printf(tName, "Track #");
        System.out.println("\t\tSong Title");

        for (count = 0; count < numElements; count++) {
            System.out.printf(tNum, count + 1);
            System.out.println("\t\t" + lists[count]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:37:22.027

我认为这是错误的

```
 int songNum = input.nextByte(); 
```

你需要使用`nextInt()`

我没有在您的代码中找到**main 方法或任何静态块。**

你还没有调用他的 add 方法

```
 CD[i]= new CDList(5);

CD[i].add() or  call add() method in the CD constructor 
```

添加

您的完整工作代码：

**像这样更改 SortArtist**

公共无效排序艺术家（）{

```
 CD temp = new CD(" ", " ");
    for (int i = 0; i <= CDlist.length; i++) {
        if(i<CDlist.length-1){
        if (CDlist[i].getArtist().compareTo(CDlist[i + 1].getArtist()) < 0) {
            temp = CDlist[i];
            CDlist[i] = CDlist[i + 1];
            CDlist[i + 1] = temp;
        }
    }
    }
} 
```

* * *

**添加方法**：：

```
 public boolean add() {
        boolean result = false;
        Scanner input = new Scanner(System.in);

        System.out.println("Please enter the Artist name and the CD title: ");
        CD yourCD = new CD(input.nextLine(), input.nextLine());
        System.out.println("Enter the number of songs: ");
        int songNum = input.nextByte();
        System.out.println("Enter the name of the songs: ");

        for (int i = 0; i <= songNum; i++) {
            yourCD.addTrack(input.nextLine());
        }
        CDlist[cdnum] = yourCD;

        if (rear == front) {
            result = false;
        } else {
            if (CDlist[rear] != null) {
                rear--;
            } else {
                CDlist[rear] = yourCD;
            }
            result = true;
        }
        return result;    

    } 
```

* * *

重要的是

更改 Main.java

```
public class Main {

public static void main(String[] args) {

   System.out.println("Would you like to add a new CD");
 CDList list=new CDList(2);  // Two is the No of CDs you can prompt the user to enter by reading the input and pass it to the constructor
    for (int i=0; i < 2 ; i++) {
        list.add();
    }   
    list.SortArtist();
    list.Display();

} 
```

}

**预期输出**：

```
Would you like to add a new CD
Please enter the Artist name and the CD title: 
Ram
Charan
Enter the number of songs: 
1
Enter the name of the songs: 
song1
Please enter the Artist name and the CD title: 
Ram
Racha
Enter the number of songs: 
2
Enter the name of the songs: 
song1
song2
Artist:     Ram
CD Title:   Racha
Track #     Song Title
  1     
  2     song1
  3     song2 
```

# javascript - 关于 requirejs 动态加载模块或在我的情况下使用优化/捆绑工具的建议

> ID：15401897
> 
> 赞同：2
> 
> 时间：2013-03-14T05:31:11.520
> 
> 标签：javascript, requirejs, amd, r.js

我正在构建一个新的 Web 应用程序，该应用程序将包含完全不同的界面/用户体验，具体取决于刚刚验证/登录的用户类型。让我们称这些用户为管理员和代表。

管理员和代表在此应用程序中具有完全不同的功能。我的模块中只有一小部分会被两者使用。它本质上是连接到我的后端的两个不同的客户端应用程序。

我是否应该使用优化器创建两个不同的构建文件`RequireJS`，然后根据用户执行登录时服务器返回的内容将它们中的任何一个注入页面？或者我应该更多地关注requirejs的动态模块加载，只在需要时加载我需要的模块（因此会遇到很多额外的http请求：/）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:33:37.860

我们有一个 Backbone 应用程序，它共享大量视图和模型，但并非所有客户端都具有所有导航点，并且某些模型的行为不同。

因此，首先我们为每个客户端设置一个 require 入口点和一个 require.config。

**引导-client1.js**

```
requirejs.config({
  baseUrl: 'js/cfe/app',
  paths: {
    'common/ViewA': 'clients/client1/ViewA',
    'common/ModelB': 'clients/client1/ModelB',
    'common/ColletionC': 'clients/client1/CollectionC'
  }
});

requirejs([
  'common/App',
  'common/BaseSetup'],

  function(app, BaseSetup) {
    $(function() {

      BaseSetup.start();

      app.start();
    });
  }
); 
```

因此，稍后当我们使用需要`ModelB`它的共享视图时，将替换为我们的`client1/ModelB`实现。

对于生产，我们使用 r 编译器为每个客户端构建一个单独的编译版本，并`data-main`在客户端请求 html 文件时更改 html 文件中属性的来源。

# appfabric - AppCache 中的小对象占用的最小大小

> ID：15401899
> 
> 赞同：0
> 
> 时间：2013-03-14T05:31:18.023
> 
> 标签：appfabric, appfabric-cache

Get-CacheStatistics 命令显示任何小对象（即使是 1 个整数）在缓存内存中至少占用 1024 个字节。它是否正确，有没有办法调整 AppCache 以更有效地处理小对象的内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:37:04.917

其实你的理解是有错误的。

确实，对象以序列化的形式存储在缓存中，但缓存中还有其他需要内存的内部数据结构：键、持续时间、命名缓存、区域、标签、通知……查看[容量指南](http://msdn.microsoft.com/en-us/library/hh334304%28v=azure.10%29.aspx)。

没有办法管理内部缓存数据结构。

# function - LUA - 如何使用 _G[x]() 方法从字符串调用函数

> ID：15401904
> 
> 赞同：0
> 
> 时间：2013-03-14T05:31:33.087
> 
> 标签：function, lua, minecraft

我的代码有问题，我不知道发生了什么，我在网上搜索过，建议 _Gx 方法是最好的方法，而不是像 loadstring(x) 这样的方法......虽然我会很高兴，不能让任何一个工作。我想要做的是，在 ComputerCraft 中，将函数名称和参数发送给海龟，我通过将两个值保存到表中并跨表发送，然后在海龟的程序中，有一个大列表函数，并使用命令，从发送的字符串中调用它们并插入 arg。我的错误是“尝试调用 nil”，我不太明白它为什么这么说......在此先感谢！

**编辑**

按照要求，我已经编辑了我的代码，以表明即使剥离所有其他内容，这仍然失败。我什至可以通过将变量完全取出并将字符串直接放入_G来进一步剥离它。即使这样做仍然失败。我决定保留它，因为这就是我以后实际使用它的方式。调用该函数通常可以正常工作。我正在使用 Luaj-jse 2.0.3 版本

```
function foo ()
  print ("HI!")
end

print (_VERSION) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:58:45.703

我不知道是什么`rednet`，但似乎您将函数名称传递给另一个 Lua VM，该 VM 对该函数一无所知（该函数在该 VM 的全局表中不存在）。
因此，将函数定义作为字符串传递并由接收器执行它`loadstring`是唯一的解决方案。

# javascript - difference between javascript function declaration

> ID：15401907
> 
> 赞同：0
> 
> 时间：2013-03-14T05:31:50.010
> 
> 标签：javascript, function

I know this type of question gets asked a lot, but I haven't seen any question with this type of declaration

```
(function(){
    myFuncName=function(myVar){
       // some logic
    };
}()); 
```

how does that differ from

```
function myFuncName(myVar){
// some logic
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:49:05.740

What your doing is creating an anonymous function that also has a closure in it. [Read more about closures here](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures).

Basically a closure means that you have declared a function inside of another function. Which will let you access local variables after the first function exits.

Normally you would not be able to do this since they would be out of scope.

As for the other part. You can find a very useful guide to what's happening here [Why do you need to invoke an anonymous function on the same line?](https://stackoverflow.com/questions/1140089/how-does-an-anonymous-function-in-javascript-work).

To sum it up though, you have created an anonymous self-invoking function expression.
The self-invoking comes from the fact that `()` immediately follows the function expression.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:00:11.280

The first one is an anonymous function and there is no way you can reference to and call it later on, so you just executes instantly ( ) once it had been created!

```
(function(){
    alert(1)
}()) 
```

The second one is a reference function that you can call it anytime later. It wont gets executed unless you call it explicitly

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:48:39.890

Here's [a link](https://stackoverflow.com/questions/13323237/anonymous-function-vs-normal-function) which explains the the function declarations in javascript.

# codeigniter - 在codeigniter中通过url传递变量的方法

> ID：15401911
> 
> 赞同：1
> 
> 时间：2013-03-14T05:32:21.270
> 
> 标签：codeigniter, get, pagination

我的 Codeigniter 项目中有一个很大的搜索模块。好吧，我只是将变量传递给像

```
<a href=<?php echo site_url('controller/view/1');  ?>>View List</a> 
```

并在控制器中获取其数据，例如

```
$id=$this->uri->segment(3); 
```

用于分页

```
http://wwww.site.com/controller/view/<filter id>/<page from> 
```

这在简单查询的情况下非常有效。

现在我得到了更多的过滤器查询，例如

1.  国家
2.  状态
3.  城市
4.  客户类型等

那么网址应该是

```
http://wwww.site.com/controller/view/1/id2/id3/i4/id5 
```

这是执行此过程的正确方法吗？如果不是，请给一点建议......我是codeigniter的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:16:01.143

您面临的问题我最近找到了解决方案。

当您第一次通过 url 发送参数时，请改用 POST。当您获取参数时，您可以将它们以变量类型传递给会话。下次分页时从会话中获取类型值并将其放入查询中以获得所需的结果。如果您有超过 1 个参数，您可以将它们放在会话中并在某些条件下取消设置它们，这样它们就不会在每个查询中被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:18:49.977

我认为最好的方法是在控制器中创建另一个方法，例如过滤视图，它接受过滤器 ID 和页码，并且该方法将使用提供的过滤器从数据库中获取数据，您将像往常一样使用分页类. 希望这有帮助。

# javascript - 错误：SyntaxError：JSON.parse：意外字符 + OAuth

> ID：15401917
> 
> 赞同：0
> 
> 时间：2013-03-14T05:32:41.583
> 
> 标签：javascript, c#-4.0, sharepoint-2010, oauth

我收到此错误：

> 错误：错误：SyntaxError：JSON.parse：意外字符
> 
> _serviceURl = sharepoint02/LMSRest.svc/rest/GetDemoOAuthPlan?LMSUsername=bfolmer&oauth_consumer_key=Sec&oauth_nonce=8765121&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1363238520&oauth_version=1.0&PageNumber=1&PageSize=5&SortColumn=Curriculum&SortDirection=True&oauth_signature=V35lYfuMNUxrzVWfUKdOchcbTEQ="

如果从浏览器收到 URL 结果：

```
{
    "MyLearningList": [
        {
            "LearningId": 26,
            "Curriculum": "Administrative Law",
            "CurriculumURL": null,
            "TrainingStatus": "InProgress",
            "StartDate": "10/15/2012",
            "EndDate": "10/15/2013"
        },
        {
            "LearningId": 2,
            "Curriculum": "Architecture",
            "CurriculumURL": null,
            "TrainingStatus": "InProgress",
            "StartDate": "10/15/2012",
            "EndDate": "11/15/2013"
        },
        {
            "LearningId": 11,
            "Curriculum": "Audit",
            "CurriculumURL": null,
            "TrainingStatus": "InProgress",
            "StartDate": "10/15/2012",
            "EndDate": "10/15/2013"
        },
        {
            "LearningId": 21,
            "Curriculum": "Automobile Engg.",
            "CurriculumURL": null,
            "TrainingStatus": "InProgress",
            "StartDate": "10/15/2012",
            "EndDate": "10/15/2013"
        },
        {
            "LearningId": 32,
            "Curriculum": "B. A. M. S. (Bachelor of Ayurvedic Medicine and Surgery)",
            "CurriculumURL": null,
            "TrainingStatus": "InProgress",
            "StartDate": "10/15/2012",
            "EndDate": "10/5/2013"
        }
    ],
    "PageSize": 5,
    "CurrentPageNumber": 1,
    "TotalRecordCount": 39,
    "TotalPageCount": 8,
    "NextPageUrl": "sharepoint02:50000/LMSRest.svc/rest/GetDemoOAuthPlan?LMSUsername=bfolmer&PageNumber=2&PageSize=5&SortColumn=Curriculum&SortDirection=True",
    "PreviousPageUrl": ""
} 
```

以下是我的 JavaScript 代码：

```
function BindGrid<%=Tag %>(_serviceURL) {

    //Append the Loading
    $('#tbl<%=Tag %>').append('<tr class="loading"><td colspan="5"><img src="/Style Library/LMS/images/loading.gif" align="top" />&nbsp;&nbsp;Loading...</td></tr>');
    $.support.cors = true;    
    $.ajax({
        type: "GET",
        url: _serviceURL,
        contentType: "application/json",
        timeout: 17000,
        dataType: "json",
        success: function (_result) {

            //Bind the Header
            BindHeader<%=Tag %>();

            if( _result == null || _result == "")
            {
                $('#tbl<%=Tag %>').append('<tr class="bottom"><td colspan="5" class="table-data-error">Error : Some problem fetching the data. Please contact IT team.</td></tr>');
                return ;
            }

            ///Catalog
            var _myObject = (typeof _result) == 'string' ? eval('(' + _result + ')') : _result;

            //Bind the values
            $("input[id*='txtPageSize'][Tag='<%=Tag %>']").val(_myObject.PageSize);
            $("input[id*='txtCurrentPageNumber'][Tag='<%=Tag %>']").val(_myObject.CurrentPageNumber);
            $("input[id*='txtTotalRecordCount'][Tag='<%=Tag %>']").val(_myObject.TotalRecordCount);
            $("input[id*='txtTotalPageCount'][Tag='<%=Tag %>']").val(_myObject.TotalPageCount);
            $("input[id*='txtNextPageUrl'][Tag='<%=Tag %>']").val(_myObject.NextPageUrl);
            $("input[id*='txtPreviousPageUrl'][Tag='<%=Tag %>']").val(_myObject.PreviousPageUrl);

            //Bind the grid
            if (_myObject.MyLearningList == null || _myObject.MyLearningList.length == 0) {
                $('#tbl<%=Tag %>').append('<tr class="bottom"><td colspan="5" class="table-data-message">No course found.</td></tr>');
                return;
            }

            //ITEM START
            for (i = 0; i < _myObject.MyLearningList.length; i = i + 1) {
                //Get the values
                var Curriculum = _myObject.MyLearningList[i].Curriculum;
                var _Status = _myObject.MyLearningList[i].TrainingStatus;
                var _startDate = _myObject.MyLearningList[i].StartDate;
                var _endDate = _myObject.MyLearningList[i].EndDate;

                var _css = "odd";
                if ((i + 1) % 2 == 0)
                { _css = "even"; }

                //Append
                $('#tbl<%=Tag %>').append("<tr class='" + _css + "'><td>" + Curriculum + "</td><td>" + _Status + "</td><td>" + _startDate + "</td><td>" + _endDate + "</td></tr>");
            }
            //ITEM END                    

            //PAGING START
            var _trFooter = "";
            if( _myObject.TotalRecordCount > 0 )
            {
                if( _myObject.PreviousPageUrl != "" )
                {
                    _trFooter = _trFooter + '<td style="width:25%;"><a href="javascript:Previous<%=Tag %>();"><< Previous</a><td>';
                }
                else{
                    _trFooter = _trFooter + '<td style="width:25%;">&nbsp;<td>';
                }

                _trFooter = _trFooter + "<td style='width:50%;font-weight:bold;text-align:center;' nowrap='nowrap'>Page No : "+ _myObject.CurrentPageNumber +" of "+ _myObject.TotalPageCount +"</td>";

                if( _myObject.NextPageUrl != "" )
                {
                    _trFooter = _trFooter + '<td style="width:25%;text-align:right;"><a style="float:right;width:50px;" href="javascript:Next<%=Tag %>();">Next >></a></td>';
                }
                else{
                    _trFooter = _trFooter + '<td style="width:25%;">&nbsp;<td>';
                }

                $('#tbl<%=Tag %>').append('<tr class="bottom"><td colspan="4" class="table-data-paging"><table cellspacing="0" border="0" cellpadding="0" style="width:100%;"><tr>'+ _trFooter +'</tr></table></td></tr>');
            }
            //PAGING END
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {

            //Binds the header
            BindHeader<%=Tag %>();

            //Show the error
            $('#tbl<%=Tag %>').append('<tr class="bottom"><td colspan="5" class="table-data-error">Error : Some error occoured fetching the data. Please contact IT team. Error :'+errorThrown+'</td></tr>');
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:25:20.247

您的 Json 是正确的，您可以使用 JSONLint 进行验证。我还尝试使用 JQuery **parseJSON**方法解析它并且它有效。

代码示例

```
var _result =
   '{"MyLearningList": [{"LearningId": 26,"Curriculum": "Administrative Law","CurriculumURL": null, "TrainingStatus": "InProgress","StartDate": "10/15/2012","EndDate": "10/15/2013"},{"LearningId": 2,"Curriculum": "Architecture","CurriculumURL": null,"TrainingStatus": "InProgress","StartDate": "10/15/2012","EndDate": "11/15/2013"},{"LearningId": 11,"Curriculum": "Audit","CurriculumURL": null,"TrainingStatus": "InProgress","StartDate": "10/15/2012","EndDate": "10/15/2013"},{"LearningId": 21,"Curriculum": "Automobile Engg.","CurriculumURL": null,"TrainingStatus": "InProgress","StartDate": "10/15/2012","EndDate": "10/15/2013"},{"LearningId": 32,"Curriculum": "B. A. M. S. (Bachelor of Ayurvedic Medicine and Surgery)","CurriculumURL": null,"TrainingStatus": "InProgress","StartDate": "10/15/2012","EndDate": "10/5/2013"}],"PageSize": 5,"CurrentPageNumber": 1,"TotalRecordCount": 39,"TotalPageCount": 8,"NextPageUrl": "sharepoint02:50000/LMSRest.svc/rest/GetDemoOAuthPlan?LMSUsername=bfolmer&PageNumber=2&PageSize=5&SortColumn=Curriculum&SortDirection=True","PreviousPageUrl": ""}';

var obj = $.parseJSON(_result);

alert(obj.PageSize);
alert(obj.NextPageUrl); 
```

[在此处](http://jsfiddle.net/2FV6n/1/)使用您的 JSON 的工作示例

编辑 1：甚至 eval() 工作正常

看[这里](http://jsfiddle.net/2FV6n/2/)

# javascript - 使用 jquery 搜索对象数组

> ID：15401920
> 
> 赞同：1
> 
> 时间：2013-03-14T05:33:07.730
> 
> 标签：javascript, jquery

我有一个日志分析脚本来填充复杂的可视化。

想象一个 Activity 对象的数组（称为“log”），每个对象都采用以下形式：

```
{
 name:foo,
 activities:[
             {time:t, action:a},
             {time:t, action:a},
             {time:t, action:a},
             ...
            ]
} 
```

数组中最多有 75 个活动对象，每个包含 400-600 个动作的数组（自前一天午夜起每 5 分钟一个时间段）。

给定已知的活动名称（上面的 foo）和活动数组中已经存在的时间，我需要更新关联的操作。

每个名称都是唯一的，并且每次在数组中以 5 分钟为增量按升序排列。

因为每次更新图表时我都必须这样做超过 1000 次（所以平均要更新 1000 个值和要绘制 1000*500*60 点），性能是一个相当关键的问题......

在 jq 中循环比我能写的任何东西都要高效，所以，目前，我有

```
n = "foo";
t = new Date(y,mm,d,h,m).toLocaleString() // matches a time stamp in the log

$.grep($.grep(log, function(n, i)
 {
  return (n.name == n)
  }
  )[0].activities, function(n, i) 
  {
   return (n.time == t)
  }
 )[0].action = "bar"; 
```

这似乎奏效了，但我花了这么长时间，而且我和自己发生了很多争论，以至于我没有信心。

我错过了更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:55:56.900

我不会`loop method`为您的问题提供更好的解决方案，因为您提出的任何循环都不会*比*上一个更好。

如果您真的想要一个能够提高性能的解决方案，您应该考虑完全重新排列您的对象。如果`name`每个日志和`time`每个活动数组中的每一个都是唯一的，则可以更改对象设置以将这些值设置为`the key of each subobject`.

使用这种方法，您只需进行键查找，无需循环。

**新的 LOG 对象**

```
 var log =
    {
      unique_name : {
        "activities" : {
          time_1 : action_1,
          time_2 : action_2,
          time_3 : action_3,
          etc...
        }
      },
      unique_name_2 : {
        "activities" : {
          etc...
        }
      }
    } 
```

现在有了`var u_name = "foo";`，`var t = "some time";`你可以简单地做......

`log[u_name][t] = "some action";`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:46:02.447

似乎您想要第一个匹配日志的第一个匹配活动。

在这种情况下，您应该在找到第一个匹配项后中断循环。您可以使用`.some()`.

```
n = "foo";
t = new Date(y,mm,d,h,m).toLocaleString() // matches a time stamp in the log

log.some(function(ob, i) {
  if (ob.name == n) {
      ob.activities.some(function(ob2, i)  {
          if (ob2.time == t) {
              ob2.action = "bar";
              return true;
          }
      });
      return true;
  }
}); 
```

此外，您的`n`参数隐藏了您的`n`变量，因此我将参数更改为`ob`.

* * *

但是`for`循环通常会比函数方法快很多。

```
n = "foo";
t = new Date(y,mm,d,h,m).toLocaleString() // matches a time stamp in the log

for (var i = 0; i < log.length; i++) {
  var ob = log[i];
  if (ob.name == n) {
      for (var j = 0; j < ob.activities.length; j++) {
          var ob2 = ob.activities[j];
          if (ob2.time == t) {
              ob2.action = "bar";
              break;
          }
      }
      break;
  }
} 
```

* * *

* * *

如果您决定在内循环上找不到匹配项时应保持外循环继续运行，请将代码更改为以下之一：

```
n = "foo";
t = new Date(y,mm,d,h,m).toLocaleString() // matches a time stamp in the log

log.some(function(ob, i) {
  if (ob.name == n) {
      return ob.activities.some(function(ob2, i)  {
          if (ob2.time == t) {
              ob2.action = "bar";
              return true;
          }
      });
  }
}); 
```

* * *

```
n = "foo";
t = new Date(y,mm,d,h,m).toLocaleString() // matches a time stamp in the log

OUTER:
for (var i = 0; i < log.length; i++) {
  var ob = log[i];
  if (ob.name == n) {
      for (var j = 0; j < ob.activities.length; j++) {
          var ob2 = ob.activities[j];
          if (ob2.time == t) {
              ob2.action = "bar";
              break OUTER;
          }
      }
  }
} 
```

# iphone - 如何使用otool检测iphone和ipad中的非公开api

> ID：15401922
> 
> 赞同：3
> 
> 时间：2013-03-14T05:33:15.010
> 
> 标签：iphone, ipad, xcode4.5

我的应用第一次提交被拒绝，因为使用了非公共的api。所以我想确保我避免在我的代码中使用私有的api。我通过google发现我可以使用otool来检测非公共apis 在我们的代码中。但是我很困惑如何使用它。我在任何地方都找不到它。我使用的是 Xcode 4.5

如何使用它来检测代码中的私有 api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:44:01.410

```
Open Terminal ( Ctrl + Space -> Type 'Terminal')..

and print example:

otool -MVv yourlib.a
for help:

otool --help 
```

# c# - 类库中文件的路径

> ID：15401925
> 
> 赞同：17
> 
> 时间：2013-03-14T05:33:26.220
> 
> 标签：c#, asp.net-mvc, class-library

我有一个返回文件内容的类库项目（NotificationTemplate）：

```
public static class Template
{
    public static string NotificatioEmail
    {
        get { return File.ReadAllText("Templates\\NotificatioEmail.cshtml"); }
    }
} 
```

在这个项目中，位于`Templates`带有`NotificatioEmail.cshtml`文件的文件夹中。

另外，我有两个应用程序：控制台应用程序和 ASP.NET MVC 应用程序。该文件在控制台应用程序中返回正常，但在 MVC 中出现错误`file not found`。怎么写万能？
我试过这个：

```
Path.Combine(System.AppDomain.CurrentDomain.BaseDirectory, "Templates",
             "NotificatioEmail.cshtml") 
```

但`BaseDirectory`不包括`bin`文件夹。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-14T05:36:35.553

正如您所说`BaseDirectory`，适用于控制台应用程序。对于 MVC 应用程序，请[`RelativeSearchPath`](http://msdn.microsoft.com/en-us/library/system.appdomain.relativesearchpath.aspx)改用。

因此，您可以将此代码用于两个平台

```
var appDomain = System.AppDomain.CurrentDomain;
var basePath = appDomain.RelativeSearchPath ?? appDomain.BaseDirectory;
Path.Combine(basePath, "Templates", "NotificatioEmail.cshtml"); 
```

# mongodb - 在 MongoDB 中检索文档数组

> ID：15401928
> 
> 赞同：0
> 
> 时间：2013-03-14T05:33:42.923
> 
> 标签：mongodb, mongo-java

我有一个 MongoDB 文档，如下所示

```
{
"_id":1,
"name":"XYZ"

ExamScores:[
{ExamName:"Maths", UnitTest:1, Score:100},
{ExamName:"Maths", UnitTest:2, Score:80},
{ExamName:"Science", UnitTest:1, Score:90}
]
} 
```

我需要检索此文档，以便它只显示数学数组。如下

```
{
    "_id":1,
    "name":"XYZ"

    ExamScores:[
    {ExamName:"Maths", UnitTest:1, Score:100},
    {ExamName:"Maths", UnitTest:2, Score:80},        
    ]
    } 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:29:41.483

正如@karin 所说，没有正常的查询方法来执行此操作。

在 2.2 版中，您可以`$elemMatch`用来投影第一个匹配结果，`ExamScores`但不能得到多个。

话虽如此，聚合框架可以做到这一点：

```
db.col.aggregate([
    {$unwind: '$ExamScores'},
    {$match: {'ExamScores.ExamName':"Maths"}},
    {$group: {_id: '$_id', name: '$name', ExamScores: {$push: '$ExamScores'}}}
]) 
```

反正是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:40:33.490

在 MongoDB 查询之前已经问过这个问题，[以根据 condition 限制值](https://stackoverflow.com/questions/4845191/mongodb-query-to-limit-values-based-on-condition)，唯一的答案说这是不可能的，但是有一个实现它的[请求。](http://jira.mongodb.org/browse/SERVER-142)

# java - 停止询问用户输入的循环

> ID：15401933
> 
> 赞同：0
> 
> 时间：2013-03-14T05:33:59.317
> 
> 标签：java

这里的问题是我们希望程序在用户输入'-1'时停止循环/停止询问整数，它不必获得我们数组的最大长度

```
import java.util.Scanner;
public class DELETE DUPLICATES {
public static void main(String[] args) {
        UserInput();
        getCopies(maxInput);
        removeDuplicates(maxInput);
}
static int[] maxInput= new int[20];
static int[] copies = new int[20];
static int[] duplicate = new int[20];
//get user's input/s    
public static void UserInput() {
  Scanner scan = new Scanner(System.in);
        int integer = 0;
        int i = 0;
  System.out.println("Enter Numbers:  ");
        while(i < maxInput.length)
        {
                integer = scan.nextInt();         
                maxInput[i] = integer;
                        i++; 
                        if (integer == -1) 
                            break;  
        }
                  int j = 0;
        for(int allInteger : maxInput) {
                System.out.print(allInteger+ "  ");
                j++;
        }
}
//to get value/number of copies of the duplicate number/s
public static void getCopies(int[] Array) {
   for(int allCopies : Array) {
    copies[allCopies]++;
}

for(int k = 0; k < copies.length; k++) {
    if(copies[k] > 1) {
        System.out.print("\nValue " + k  + " : " +  copies[k] + " copies are detected");

    }
        }
        }
//remove duplicates
public static void removeDuplicates(int[] Array) {
 for(int removeCopies : Array) {
     duplicate[removeCopies]++;
    }

    for(int a = 0; a < duplicate.length; a++) {
        if(duplicate[a] >= 1) {
            System.out.print("\n"+a);

        }
            }
  }
 } 
```

示例：如果我们输入：1 2 3 3 4 5 -1

```
 The result of our program is : 1  2  3  3  4  5  -1  0  0  0  0  0  0  0  0  0  0  0  0  0
 We want the result to be like: 1  2  3  3  4  5 
```

我们需要你的帮助，伙计。练习我们的编程1主题希望我们能在这里得到一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:40:12.163

您可以进行以下更改以打印所需的值：

```
for(int allInteger : maxInput)  
{
    if(allInteger == -1)
        break;

    System.out.print(allInteger+ "  ");
    j++;
} 
```

但是，更好的改变是重新考虑数据结构的设计和使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:41:14.053

maxInput 数组的指定大小为 20，因此它将具有该值。元素并打印 int 的默认值。

您可以改用 List 并检查最大输入和退出循环的大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:41:58.623

如果您*不需要*使用数组，那么 a`Collection`有很多优点。让我们使用一个`List`：

```
static int maxInputCount = 20;
static ArrayList<Integer> input= new ArrayList<>(); 
```

...

```
 for (int i = 0; i < maxInputCount; i++)
    {
            integer = scan.nextInt();
            if (integer == -1)
                break;
            input.add(integer);
    }
    for(int integer : input) {
            System.out.print(integer+ "  ");
    } 
```

# sql - 移动 SQL 表中的小数位

> ID：15401934
> 
> 赞同：0
> 
> 时间：2013-03-14T05:34:13.030
> 
> 标签：sql, sql-server-2005, floating-point

我的 SQL Server 2005 数据库中有 1500 多行，在一个表中。该列是 PK 类型`float`。

数据如下：

```
130226.1 
130226.2 
.... 
130226.9 
```

我想做的是：将其转换为

```
130226.001
130226.002 
```

有没有一种有效的方法来做到这一点？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:55:04.800

这将做：

```
Update table1 set column1 = floor(column1) + (Column1 - floor(column1)) / 100 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/c2119/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:58:26.633

使用类似`DECIMAL(13,3)`允许小数点前10位和小数点后3位的东西

# vb.net - 检查重复名称并插入用户 vb.net

> ID：15401936
> 
> 赞同：0
> 
> 时间：2013-03-14T05:34:45.453
> 
> 标签：vb.net, insert

我正在做一个用户正在写他的用户名并从按钮列表中选择的表单。在插入之前，我需要检查用户名是否已经存在。服务器端代码为：

```
Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click
    'Duplicate username
    Dim username As String = tbUsername.Text.Trim()
    Dim tempUser As Byte = CByte(rblDept.SelectedIndex)
    Dim query1 As String = "Select cUserName FROM Intranet.dbo.Gn_ISCoordinators WHERE cUserName = @cUserName"

    Dim haha As DataTable = New DataTable()
    Using adapter = New SqlDataAdapter(query1, ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
        adapter.Fill(haha)
        If haha.Rows.Count <> 0 Then
            lblmessage.Text = "Error! user name is already exist"
            Return
        End If
    End Using

    'Insert new user
    Dim query As String = "Insert into Intranet.dbo.Gn_ISCoordinators (cUserName,lDeptUser) Values ('" & username & "'," & tempUser & ")"
    Dim hehe As DataTable = New DataTable()
    Using adapter1 = New SqlDataAdapter(query, ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
        adapter1.Fill(hehe)
        lblmessage.Text = "User has been added"
    End Using
End Sub 
```

因此，当用户按下按钮时，如果一切正常，它首先检查重复的用户名，然后插入该行。顺便说一句，当我按下提交按钮时会发生错误，它在线给了我`Must declare the scalar variable "@cUserName".`这个`adapter.Fill(haha)`。

请我想知道我的代码有什么问题。帮我

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:53:30.807

您正在使用参数 @cUserName 但您没有对其进行初始化或将值传递给它。

```
Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
conn.Open()

Dim query1 As String = "Select cUserName FROM Intranet.dbo.Gn_ISCoordinators WHERE cUserName = @cUserName"

Dim command As New SqlCommand(query1, conn)
command.Parameters.AddWithValue("@cUserName",username)

Using adapter = New SqlDataAdapter(command) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:39:35.253

错误消息显示了解决该问题所需知道的一切。您`@cUserName`在查询中使用了参数，但它从未设置过。

```
Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
conn.Open()

Dim query1 As String = "Select cUserName FROM Intranet.dbo.Gn_ISCoordinators WHERE cUserName = @cUserName"

Dim command As New SqlCommand(query1, conn )
Dim param As New SqlParameter()
param.ParameterName = "@cUserName"
param.Value = username 
command.Parameters.Add(param)

Using adapter = New SqlDataAdapter(command) 
```

# bash - 无法使用 bash 作为 Sensu 插件来获取 jstat 指标

> ID：15401937
> 
> 赞同：5
> 
> 时间：2013-03-14T05:34:49.560
> 
> 标签：bash, shell, monitoring, sensu

我创建了 bash 脚本，它采用我的 jvm 实例的 jstat 指标！

这是输出示例：

```
demo.server1.sms.jstat.eden 24.34   0
demo.server1.lcms.jstat.eden    54.92   0
demo.server1.lms.jstat.eden 89.49   0
demo.server1.tms.jstat.eden 86.05   0 
```

但是当 Sensu 客户端运行这个脚本时，它会返回

```
Could not attach to 8584
Could not attach to 8588
Could not attach to 17141
Could not attach to 8628
demo.server1.sms.jstat.eden     0
demo.server1.lcms.jstat.eden    0
demo.server1.lms.jstat.eden     0
demo.server1.tms.jstat.eden     0 
```

这是 check_cron.json 的示例

```
{
  "checks": {
    "jstat_metrics": {
      "type": "metric",
      "handlers": ["graphite"],
      "command": "/etc/sensu/plugins/jstat-metrics.sh",
      "interval": 5,
          "subscribers": [ "webservers" ]
    }
  }
} 
```

还有我的 bash 脚本

```
jvm_list=("sms:$sms" "lcms:$lcms" "lms:$lms" "tms:$tms" "ums:$ums")
for jvm_instance in ${jvm_list[@]}; do
    project=${jvm_instance%%:*}
    pid=${jvm_instance#*:}
        if [ "$pid" ]; then
          metric=`jstat -gc $pid|tail -n 1`
          output=$output$'\n'"demo.server1.$project.jstat.eden"$'\t'`echo $metric |awk '{ print $3}'`$'\t0'
        fi
done
echo "$output" 
```

我发现问题出在 jstat 上，我尝试编写完整的 jstat 路径，`/usr/lib/jvm/java-1.7.0-openjdk.x86_64/bin/jstat -gc $pid|tail -n 1`但没有帮助！

顺便说一句，如果我要评论这一行，“**无法附加到 8584** ”之类的输出就会消失！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T16:55:47.027

我不是 Java 或 Sensu 用户，但我可以猜到会发生什么。

最有可能的是，sensu-client 以不同于您手动测试时使用的用户身份运行您的脚本，后者无权“附加”（无论这意味着什么）到您的 jvm 实例。

要验证这一点，您可以在脚本中添加“whoami”调用，再次从 sensu-client 运行它，查看它在哪个用户下运行您的脚本，如果不同，请尝试以该用户身份运行您的脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-12T04:38:38.730

是的，你是对的 sensu 以 sensu 用户身份运行所有脚本。要使用 jstat，您必须将 sensu 添加到 sudoers。

> 只需添加文件 /etc/sudoers.d/sensu

例子：

> 默认值：sensu !requiretty
> 
> 默认值：sensu secure_path = /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
> 
> sensu ALL = NOPASSWD：/etc/sensu/plugins/jsat-metrics.rb

# iphone - 暂停/恢复从 iphone 上传到服务器的文件

> ID：15401941
> 
> 赞同：2
> 
> 时间：2013-03-14T05:35:12.017
> 
> 标签：iphone, ios, http, file-upload

我正在通过 HTTP 发布将视频上传到服务器。

**如何通过单击某些按钮来暂停和恢复此上传过程**

我正在使用以下代码

```
 NSString *urlString =@"http://sampleurl.com/upload_video";

  NSMutableURLRequest *request= [[[NSMutableURLRequest alloc] init] autorelease];
 [request setURL:[NSURL URLWithString:urlString]];
 [request setHTTPMethod:@"POST"];

  [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"user_id\"\r\n\r\n%@", appDelegate.userid] dataUsingEncoding:NSUTF8StringEncoding]];
 [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

 [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"video\"; filename=\"%@\"\r\n", @"a.mov"] dataUsingEncoding:NSUTF8StringEncoding]];
 [postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
 [postbody appendData:[NSData dataWithData:file]];
 [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
 [request setHTTPBody:postbody];

 conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
  if (conn) {
   webData = [[NSMutableData data] retain];
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:07:56.870

有一个可以使用的连接委托方法

```
(void)connection:(NSURLConnection *)connection   didSendBodyData:(NSInteger)bytesWritten  totalBytesWritten:(NSInteger)totalBytesWritten   totalBytesExpectedToWrite (NSInteger)totalBytesExpectedToWrite; 
```

您可以存储**暂停**连接时发送的总字节数，然后将其余数据字节发送到 Web 服务。但请记住，您的 Web 服务还应该能够收集数据，然后从中创建图像。

希望我有所帮助。

# php - 如何使用 PHPUnit Selenium2 扩展选择多个元素

> ID：15401942
> 
> 赞同：0
> 
> 时间：2013-03-14T05:35:12.747
> 
> 标签：php, webdriver, phpunit, selenium-webdriver

我想使用 PHPUnit 的 Selenium2 扩展来单击具有相同类的多个链接。我正在尝试使用以下方法选择多个元素：

```
$elements = $this->byClassName('link_class'); 
```

但是，这只选择了一个元素。如何选择所有元素并遍历它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:37:44.117

因此，经过大量深入挖掘，我找到了答案。所有用于选择元素的高级函数仅使用单元素选择策略。在 Session.php（截至 2013 年 3 月 3 日）中，您可以看到所有高级方法的使用

```
protected function by($strategy, $value)
{
    return $this->element($this->using($strategy)->value($value));
} 
```

我添加了一个使用 $this->elements 而不是 $this->element 的小方法。然后我能够迭代。祝你好运！

# iphone - iPhone 是否支持小区广播？

> ID：15401943
> 
> 赞同：0
> 
> 时间：2013-03-14T05:35:13.333
> 
> 标签：iphone, ios, broadcastreceiver, broadcast, broadcasting

iPhone是否支持小区广播

如果是：如何启用它 如果不是：有什么方法可以手动创建一些方法或任何预定义的 api，我们可以通过这些方法接收服务提供者的广播消息 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T16:38:15.990

默认情况下，手机广播在 iPhone 上可用。您无需打开或关闭它。

# c# - 如何使用 Selenium webdriver 使用 MouseOver 测试工具提示文本

> ID：15401945
> 
> 赞同：5
> 
> 时间：2013-03-14T05:35:30.750
> 
> 标签：c#, selenium, webdriver, tooltip

我有一个小行李图标，当将鼠标悬停在图标上时，会显示一个工具提示文本。我想通过在 Visual Studio 中编写 C# 代码来测试这一点。

下面是行李图标在 html 中的显示方式：

```
<div class="icon_png information icon_baggageyes" title="1 piece included in this fare."></div> 
```

这是我测试工具提示的代码：

```
Actions a = new Actions(driver);
IWebElement tooTipObject = driver.FindElement(By.XPath("//div[@class='icon_png information icon_baggageyes']"));
a.MoveToElement(tooTipObject).Click().Build().Perform(); 
```

问题是当我逐步调试上面的代码时，会显示工具提示文本。但是当我运行测试时，工具提示文本现在确实显示了。

通过在互联网上搜索，有人说原因是鼠标没有在行李图标上停留足够长的时间来显示工具提示文本。

但是如何解决这个问题呢？我一直在寻找解决方案，但找不到适合我的解决方案。

另一个问题是我的代码：工具提示文本只有在我输入此代码`a.MoveToElement(tooTipObject).Click().Build().Perform();` 时才会显示。`.Click()`但我正在测试鼠标悬停功能，不应该是点击图标。这太奇怪了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:57:30.190

由于工具提示是由`div`' 的`title`属性触发的，所以只检查该属性值怎么样？它将依赖于假设所有浏览器`title`在悬停时都显示为工具提示（据我所知，所有桌面浏览器都会这样做）。

简单地谷歌搜索一下，似乎这些方面的东西应该有效：

```
WebElement element = driver.FindElement(
     By.XPath("//div[@class='icon_png information icon_baggageyes']"));
string titleText = element.getAttribute("title"); 
```

之后，您可以验证是否`titleText`符合预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T08:04:00.400

使用 Java Robot 进行 UI 交互；机器人在这里用于控制鼠标动作。

```
WebElement targetElement = driver.findElement(By.id("value"));
Point coordinates = targetElement.getLocation();
Robot robot = new Robot(); 
robot.mouseMove(coordinates.getX(), coordinates.getY() + 65); //Number 65 should vary

Thread.sleep(3000);
String tooltip = driver.findElement(By.id("value"")).getAttribute("title");
System.out.println(tooltip); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T16:40:04.973

我可能有点晚了，但我发现工作的是：

```
IWebElement elementToHover = graphRegion.FindElement(By.CssSelector(CSSSelector));
Actions hover = new Actions(driver);

hover.MoveToElement(elementToHover);
Thread.Sleep(2000);
hover.Perform(); 
```

我主要在 Chrome 中跨许多操作系统组合进行测试，浏览器最大化，并且在没有睡眠的情况下，我遇到了工具提示显示时间长度的问题，主要是在 Linux 中（Mac 上的可靠性差）。

我有点不确定为什么将 Thread.Sleep(2000) 作为“操作”的一部分执行。我尝试了几种不同的自定义等待方法，但我只能通过 2 秒或更长时间的显式睡眠来获得所需的可靠性。

我相信有更好的选择，但这对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:18:45.893

我有同样的问题。如果你说的是正确的 OP 你没有在元素上悬停足够长的时间那么我很困惑为什么该方法被称为“移动到元素”而不是“移动到元素然后立即远离元素”

此外，单击并按住对我来说表现出与移动到元素相同的行为。我认为这可能是硒的错误。

这令人失望。我想我只会使用点击，但点击元素会触发另一组我不想触发的动作，而悬停应该帮助我只显示一个工具提示。

我正在使用chromedriver。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T22:30:45.050

我使用机器人将鼠标悬停在图标上。不过，我必须校准机器人以使用 selenium，以便更轻松地点击元素。

有关使用硒校准机器人的信息，请参见此处的答案。

# c - 使用多字符定界符解析字符串并在 c 中的第二次调用中获取垃圾数据以及结果

> ID：15401946
> 
> 赞同：1
> 
> 时间：2013-03-14T05:35:32.287
> 
> 标签：c, string, split, malloc, buffer

我写了一个代码来用多个字符分隔符分割字符串。

第一次调用此函数工作正常

但我第二次调用它时，它会用一些不需要的符号重新调整正确的单词。

我认为出现这个问题是因为没有清除缓冲区。我尝试了很多但无法解决这个问题。请帮我解决这个问题。

```
char **split(char *phrase, char *delimiter) {
    int i = 0;
    char **arraylist= malloc(10 *sizeof(char *));
    char *loc1=NULL;
    char *loc=NULL;
    loc1 = phrase;
    while (loc1 != NULL) {
    loc = strstr(loc1, delimiter);
    if (loc == NULL) {
            arraylist[i]=malloc(sizeof(loc1));
            arraylist[i]=loc1;
            break;
    }
    char *buf = malloc(sizeof(char) * 256);    // memory for 256 char
    int length = strlen(delimiter);
    strncpy(buf, loc1, loc-loc1);
    arraylist[i]=malloc(sizeof(buf));
    arraylist[i]=buf;
    i++;
    loc = loc+length;
    loc1 = loc;
}
return arraylist;
} 
```

第一次调用这个函数

```
char **splitdetails = split("100000000<delimit>0<delimit>hellooo" , "<delimit>"); 
```

它给

```
splitdetails[0]=100000000
splitdetails[1]=0
splitdetails[2]=hellooo 
```

但我第二次打电话

```
char **splitdetails = split("20000000<delimit>10<delimit>testing" , "<delimit>");

splitdetails[0]=20000000��������������������������
splitdetails[1]=10����
splitdetails[2]=testing 
```

更新：-

感谢@fatelerror。我已将我的代码更改为

```
 char** split(char *phrase, char *delimiter) {
    int i = 0;
    char **arraylist = malloc(10 *sizeof(char *));
    char *loc1=NULL;
    char *loc=NULL;
    loc1 = phrase;
    while (loc1 != NULL) {
    loc = strstr(loc1, delimiter);
    if (loc == NULL) {
            arraylist[i]=malloc(strlen(loc1) + 1);
            strcpy(arraylist[i], loc1);
            break;
    }
    char *buf = malloc(sizeof(char) * 256);    // memory for 256 char
    int length = strlen(delimiter);
    strncpy(buf, loc1, loc-loc1);
    buf[loc - loc1] = '\0';
    arraylist[i]=malloc(strlen(buf));
    strcpy(arraylist[i], buf);
    i++;
    loc = loc+length;
    loc1 = loc;
   }
} 
```

在调用者函数中，我将其用作

```
char *id
char **splitdetails = split("20000000<delimit>10<delimit>testing" , "<delimit>");
id = splitdetails[0];
//some works done with id
//free the split details with this code.
for(int i=0;i<3;i++) {
    free(domaindetails[i]);
}free(domaindetails);
domaindetails=NULL; 
```

然后我给第二个打了电话，

```
char **splitdetails1= split("10000000<delimit>1000<delimit>testing1" , "<delimit>"); 
```

它会出错，我无法释放该功能。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:51:10.263

您的问题归结为三个基本问题：

1.  `sizeof`不是`strlen()`
2.  赋值不会复制 C 中的字符串。
3.  `strncpy()`并不总是以 nul 结尾的字符串。

所以，当你说这样的话：

```
arraylist[i]=malloc(sizeof(loc1));
arraylist[i]=loc1; 
```

这不会复制字符串。第一个分配 的大小`loc1`，即 a `char *`。换句话说，您分配了指针的大小。您想分配存储来存储字符串，即使用`strlen()`：

```
arraylist[i]=malloc(strlen(loc1) + 1); 
```

还要注意`+ 1`，因为您还需要空终止符的空间。然后，复制您要使用的字符串`strcpy()`：

```
strcpy(arraylist[i], loc1); 
```

你拥有它的方式只是为你的旧字符串分配一个指针（并且在这个过程中你刚刚分配的内存）。`strdup()`结合这两个步骤也很常见，即

```
arraylist[i] = strdup(loc1); 
```

这很方便，但`strdup()`不是官方 C 库的一部分。在考虑使用代码之前，您需要评估代码的可移植性需求。

**此外，使用`strncpy()`，您应该知道它并不*总是*nul 终止：**

```
strncpy(buf, loc1, loc-loc1); 
```

这复制的字节数少于原始字符串中的字节数，并且不会终止`buf`。因此，有必要自己包含一个 nul 终止符：

```
buf[loc - loc1] = '\0'; 
```

**这是您看到垃圾**的根本原因。**由于您没有 nul 终止，因此 C 不知道您的字符串在哪里结束，因此它会继续读取内存中发生的任何内容。**

# android - 在使用 Android 中的 eclipse 导出向导创建密钥库之前，我是否需要导出未签名的 .apk？

> ID：15401947
> 
> 赞同：2
> 
> 时间：2013-03-14T05:35:32.923
> 
> 标签：android, code-signing

我正在使用导出向导为我的 android 应用程序创建密钥库。我指定了目标文件夹和名称来创建密钥库，然后我填写了所需的文件，如密码、别名、exp time 等。然后向导提示我浏览**Enter destination for APK file**。我的问题是，**我需要导出未签名的 apk 还是需要从项目的 bin 目录中复制 .apk 文件？***
**编辑**

> 简而言之，我应该从哪里浏览 .apk 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:37:11.727

您无需浏览 apk。它询问您需要在哪里保存您的签名 apk。

您需要`sign apk`在签名 apk 的那一步提供目标路径。这是您签署的 apk，您必须使用它在 google play store 上发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:54:18.520

不，你想签署apk。如果你签署意味着如果你做了任何更改，它将被更新

未来。如果您给出了密钥库的默认目的地，它将位于 Eclipse 位置。例如：

你的日食位置在 C 盘。C/eclipse/你想要的 apk 的密钥库和目的地

选择路径位置。

记住第一次发布不会有问题，在第二版中，如果你做了任何更改并上传。不要忘记更改清单。

```
android:versionCode="1"
android:versionName="1.0" it will be initial release. 
```

下一个版本，更改版本代码和名称。

```
android:versionCode="2"
android:versionName="1.1" 
```

请记住版本名称应为十进制，版本代码应为整数。

# node.js - Nodejs更新后charCodeAt出错

> ID：15401948
> 
> 赞同：0
> 
> 时间：2013-03-14T05:35:34.060
> 
> 标签：node.js, updates, passport.js

所以我一直在节点 0.8.20 上开发我的应用程序，并一直在使用护照进行谷歌身份验证。

我将节点更新到最新版本 0.10，但出现错误

```
_modules\passport-openid\node_modules\openid\lib\convert.js:33
  if(i.charCodeAt(0) > 127)
       ^
TypeError: Object n++n++:?n++9rn++??n++n+++ón++1??7q~n++n++qn++v#s?fn++?n++Z.'n+
 has no method 'charCodeAt' 
```

我已经更新到最新版本的护照和护照谷歌模块，它似乎有帮助。

护照社区也没有就此提出任何问题。所以我认为这与我的代码有关。

**更新：** 好的，似乎此错误并非特定于节点 0.10。它从[0.9](https://github.com/jaredhanson/passport/issues/80)开始存在。建议的解决方法是迁移到 google oauth。还没有解决方案

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:16:47.900

It seems like the crypto module in node returns buffer objects instead of binary strings as default since version 0.9.0.

This diff will fix the problem:

```
diff --git node_modules/passport-google/node_modules/passport-openid/node_modules/openid/openid.js node_modules/passport-google/node_modules/passport-openid/node_modules/openid/openid.js
index 1431dd7..798f741 100644
--- node_modules/passport-google/node_modules/passport-openid/node_modules/openid/openid.js
+++ node_modules/passport-google/node_modules/passport-openid/node_modules/openid/openid.js
@@ -634,9 +634,9 @@ openid.associate = function(provider, callback, strict, algorithm)
   if(algorithm.indexOf('no-encryption') === -1)
   {
     dh = _createDiffieHellmanKeyExchange(algorithm);
-    params['openid.dh_modulus'] = _toBase64(dh.getPrime());
-    params['openid.dh_gen'] = _toBase64(dh.getGenerator());
-    params['openid.dh_consumer_public'] = _toBase64(dh.getPublicKey());
+    params['openid.dh_modulus'] = _toBase64(dh.getPrime("binary"));
+    params['openid.dh_gen'] = _toBase64(dh.getGenerator("binary"));
+    params['openid.dh_consumer_public'] = _toBase64(dh.getPublicKey("binary"));
   }

   _post(provider.endpoint, params, function(data, headers, statusCode)
@@ -713,10 +713,10 @@ openid.associate = function(provider, callback, strict, algorithm)
       else
       {
         var serverPublic = _fromBase64(data.dh_server_public);
-        var sharedSecret = convert.btwoc(dh.computeSecret(serverPublic));
+        var sharedSecret = convert.btwoc(dh.computeSecret(serverPublic, "binary", "binary"));
         var hash = crypto.createHash(hashAlgorithm);
         hash.update(sharedSecret);
-        sharedSecret = hash.digest();
+        sharedSecret = hash.digest("binary");
         var encMacKey = convert.base64.decode(data.enc_mac_key);
         secret = convert.base64.encode(_xor(encMacKey, sharedSecret));
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:28:25.870

Oki，所以这个错误似乎已经修复。但是找到了一种解决方法，可以使用passport-google模块下的现有代码

[https://github.com/jaredhanson/passport-google-oauth/tree/master/examples/oauth2](https://github.com/jaredhanson/passport-google-oauth/tree/master/examples/oauth2)

问题已在护照 github 中[提出。](https://github.com/jaredhanson/passport-google/issues/4)但是他们已经关闭指向解决方法而不是修复

# php - 为什么我的 $_GET 表单不能将数据（使用 PHP）插入到 MySql 数据库或表中？

> ID：15401949
> 
> 赞同：1
> 
> 时间：2013-03-14T05:35:40.210
> 
> 标签：php, mysql, forms, insert

这是html表单：

```
<form action="register.php" METHOD=GET align="center">
<table border="2" align="center">
<tr>
<td>Desired Username:</td><td><input name="username" type="text" size"20"></input></td>
</tr>
<tr>
<td>Your Email:</td><td><input name="email" type="text" size"30"></input></td>
</tr>
<tr>
<td>Desired Password:</td><td><input name="password" type="password" size"20"></input>                                       </td>
</tr>
<tr>
<td>Confirm Password:</td><td><input name="password2" type="password" size"20"></input>          </td>
</tr>
</table>
<input type="submit" value="Register!" align="center"></input>
</FORM> 
```

这是 register.php 上的 PHP 代码：

```
<?php
$myServer = "localhost";
$myUser = "Censored";
$myPass = "Censored";
$myDB = "Censored";

//connection to the database
$conn = "mssql_connect($myServer, $myUser, $myPass)
or die('Couldn't connect to SQL Server on $myServer')"; 

//select a database to work with
$selected = "mssql_select_db($myDB, $conn)
or die('Couldn't open database $myDB')"; 

//add new user to DB
if($_GET["username"] && $_GET["email"] && $_GET["password"] && $_GET["password2"] )
{
if($_GET["password"]==$_GET["password2"])
{
$sql="INSERT INTO Users(Username, Password, Email)              VALUES('$_GET[username]','$_GET[password]','$_GET[email]')";
$result="mysql_query($sql,$conn) or die (mysql_error())";
}

if ($result)
{
echo "<h1 align='center'>Registration Successful!</h1>";

echo "<p align='center'>Click<a href='index.php'> here</a> to log in.</p>";

}
else echo "Oops! Something went wrong. Please <a       href='http://www.canilosa.zxq.net/index.php'>go back</a> and fix it.";
}
?> 
```

我是 PHP 和 MySql 的初学者。我检查并重新检查了所有用户名、密码、数据库等。回显有效，它说注册成功，但是当我检查我的数据库时没有数据。

* * *

非常感谢所有回答的人！！！它现在工作正常:)。正如我所说，我对所有这些都是新手，所以大部分代码都来自教程片段，我只是略读了一下，看看它是否有意义。再次感谢！（我正在创建一个包含大量 PHP-MySql 的游戏网站......所以我可能很快就会回到这里 xD）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:37:12.563

改变这个

```
<form action="register.php" METHOD=GET align="center"> 
```

到

```
<form action="register.php" METHOD="GET" align="center">
                                   ^   ^ 
```

也应该是

```
$conn = mysql_connect($myServer, $myUser, $myPass) or die("Couldn't connect to SQL Server on $myServer"); 

//select a database to work with
$selected = mysql_select_db($myDB, $conn) or die("Couldn't open database $myDB"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:38:39.060

你已经使用了`mssql_connect`and`mssql_select_db`但实际的命令是`mysql_connect`and`mysql_select_db`

只需用此替换您的代码

```
//connection to the database
$conn = mysql_connect($myServer, $myUser, $myPass)
or die('Couldn't connect to SQL Server on $myServer'); 

//select a database to work with
$selected = mysql_select_db($myDB, $conn)
or die('Couldn't open database $myDB'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:43:43.743

您使用的 Mysql 函数不正确...

改变

```
mssql_connect($myServer, $myUser, $myPass) 
```

到

```
mysql_connect($myServer, $myUser, $myPass) 
```

和

```
mssql_select_db($myDB, $conn) 
```

到

```
mysql_select_db($myDB, $conn) 
```

文档链接[http://www.w3schools.com/php/php_ref_mysql.asp](http://www.w3schools.com/php/php_ref_mysql.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:39:23.573

更正。

1.  `attribute`表单中的关闭方法`method="GET"`
2.  插入语句如下

    `"INSERT INTO Users(Username, Password, Email) VALUES('".$_GET['username']."','".$_GET['password']."','".$_GET['email']."')";`

3.  `mssql_connect`应该是`mysql_connect`而且`mssql_select_db`应该是`mysql_select_db`

4.  `$result= mysql_query($sql,$conn) or die (mysql_error());`

**不同之处。**

`$_GET['username']`这将查找在 url 中作为参数传递的用户名值。

`$_GET[username]`这将查找可能未在代码中定义的用户名常量。

# freebsd - 如何将列添加到 ps cammand linux freebsd 并开发它？

> ID：15401951
> 
> 赞同：0
> 
> 时间：2013-03-14T05:35:44.213
> 
> 标签：freebsd, ps

如何在 FreeBSD 中显示 ps 命令的新列输出？

我应该更改以下目录中的 ps.c 或 print.c，重新构建内核并安装它吗？

usr/src/bin/ps

代码的哪一部分应该改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:06:23.330

这取决于*您*要显示的内容。

如果您想要的信息已经可以在[手册页](http://www.freebsd.org/cgi/man.cgi?query=ps&sektion=1)的 KEYWORDS 部分找到，您可以使用该`-O`选项来显示它。

否则，您将不得不破解源代码，或者完全使用另一个实用程序。当您决定编辑源时，我认为您应该从`keyword.c`, 开始为您想要显示的任何内容添加一个新关键字。

# sql-server - SQL 服务器更新错误 - 消息 2627

> ID：15401952
> 
> 赞同：1
> 
> 时间：2013-03-14T05:35:47.050
> 
> 标签：sql-server, sql-update

我正在尝试更新我的表“招标”。

它有这些列：

*   申请编号(rq_no)
*   申请年份(rq_year)
*   招标编号(te_no)
*   te_date
*   te-due_date
*   投标状态（te_status）
*   te_year

我尝试了以下代码：

```
update tender 
set te_status='D'
where rq_no like 'Q052401C' AND te_year like '2012' and te_no like 'n0066' 
```

如果我将任何其他字符代替`'D'`in `te_status`，则更新成功，但 'D' 除外，例如：

```
set te_status='S' 
```

当我跑

```
SELECT * FROM TENDER
WHERE
    rq_no LIKE 'Q052401C' AND te_year LIKE '2012' AND te_no LIKE 'n0066' 
```

，它返回一行。

它向我显示以下错误：

> 消息 2627，级别 14，状态 1，第 1 行违反主键约束“PK_tender”。无法在对象“dbo.tender”中插入重复键。重复值为 (N0066, Q052401C, D, 2012) 语句已终止。

所有这些是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:46:20.540

这意味着您在该表上定义了一个主键，其中包含与其显示的值相关的字段 - 即（N0066，Q052401C，D，2012） - 如果您将 te-status 字段更改为 D 在行上您正在更新，那么这会导致一个已经存在的主键。

根据您使用的数据库，您有时无法更新主键字段 - 您应该删除旧行并插入更改的行（使用新键）。

# c - 包含动态数组的结构

> ID：15401954
> 
> 赞同：4
> 
> 时间：2013-03-14T05:36:01.527
> 
> 标签：c

我在大学里学习 C，也通过“Learn C the Hard Way”。这个问题特别与[Learn C the Hard Way - 练习17有关](http://c.learncodethehardway.org/book/ex17.html)

在我编写的代码中，使用了一个结构数据库：

```
#define MAX_ROWS 100
...
...
struct Address {
    int id;
    int set;
    char name[MAX_DATA];
    char email[MAX_DATA];
};
...
...
struct Database {
    struct Address rows[MAX_ROWS];
} 
```

本练习的“额外功劳”部分要求“更改代码以接受 MAX_DATA 和 MAX_ROWS 的参数，将它们存储在 Database 结构中，并将其写入文件，从而创建一个可以任意大小的数据库。”

现在忽略 MAX_DATA，因为我想一次只关注一个。

注意：这是我的完整代码

```
#include <stdio.h>
#include <assert.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

#define MAX_DATA 512
#define MAX_ROWS 100

struct Address {
    int id;
    int set;
    char name[MAX_DATA];
    char email[MAX_DATA];
};

struct Database {
    struct Address rows[MAX_ROWS];
};

struct Connection {
    FILE *file;
    struct Database *db;
};

void die(const char *message, struct Connection *conn)
{
    if(errno) {
        perror(message);
    } else {
        printf("ERROR: %s\n", message);
    }

    free(conn->file);
    free(conn->db);
    free(conn);

    exit(1);
}

void Address_print(struct Address *addr)
{
    printf("%d %s %s\n",
            addr->id, addr->name, addr->email);
}

void Database_load(struct Connection *conn)
{
    int rc = fread(conn->db, sizeof(struct Database), 1, conn->file);
    if(rc != 1) die("Failed to load database.", conn);
}

struct Connection *Database_open(const char *filename, char mode)
{
    struct Connection *conn = malloc(sizeof(struct Connection));
    if(!conn) die("Memory error", conn);

    conn->db = malloc(sizeof(struct Database));
    if(!conn->db) die("Memory error", conn);

    if(mode == 'c') {
        conn->file = fopen(filename, "w");
    } else {
        conn->file = fopen(filename, "r+");

        if(conn->file) {
            Database_load(conn);
        }
    }

    if(!conn->file) die("Failed to open the file", conn);

    return conn;
}

void Database_close(struct Connection *conn)
{
    if(conn) {
        if(conn->file) fclose(conn->file);
        if(conn->db) free(conn->db);
        free(conn);
    }
}

void Database_write(struct Connection *conn)
{
    rewind(conn->file);

    int rc = fwrite(conn->db, sizeof(struct Database), 1, conn->file);
    if(rc != 1) die("Failed to write database.", conn);

    rc = fflush(conn->file);
    if(rc == -1) die("Cannot flush database.", conn);
}

void Database_create(struct Connection *conn)
{
    int i = 0;

    for(i = 0; i < sizeof(conn->db->rows) / sizeof(*conn->db->rows); i++) {
        // make a prototype to initialize it
        struct Address addr = {.id = i, .set = 0};
        // then just assign it
        conn->db->rows[i] = addr;
    }
}

void Database_set(struct Connection *conn, int id, const char *name, const char *email)
{
    struct Address *addr = &conn->db->rows[id];
    if(addr->set) die("Already set, delete it first", conn);

    addr->set = 1;

    char *res = strncpy(addr->name, name, MAX_DATA);
    addr->name[MAX_DATA - 1] = '\0';
    if(!res) die("Name copy failed", conn);

    res = strncpy(addr->email, email, MAX_DATA);
    addr->email[MAX_DATA - 1] = '\0';
    if(!res) die("Email copy failed", conn);
}

void Database_get(struct Connection *conn, int id)
{
    struct Address *addr = &conn->db->rows[id];

    if(addr->set) {
        Address_print(addr);
    } else {
        die("ID is not set", conn);
    }
}

void Database_delete(struct Connection *conn, int id)
{
    struct Address addr = {.id = id, .set = 0};
    conn->db->rows[id] = addr;
}

void Database_list(struct Connection *conn)
{
    int i = 0;
    struct Database *db = conn->db;

    for(i = 0; i < sizeof(conn->db->rows) / sizeof(*conn->db->rows); i++) {
        struct Address *cur = &db->rows[i];

        if(cur->set) {
            Address_print(cur);
        }
    }
}

int main(int argc, char *argv[])
{
    char *filename = argv[1];
    char action = argv[2][0];
    int id = 0;
    struct Connection *conn = Database_open(filename, action);

    if(argc < 3) die("USAGE: ex17 <dbfile> <action> [action params]", conn);

    if(argc > 3) id = atoi(argv[3]);
    if(id >= sizeof(conn->db->rows) / sizeof(*conn->db->rows)) die("There's not that many records.", conn);

    switch(action) {
        case 'c':
            Database_create(conn);
            Database_write(conn);
            break;

        case 'g':
            if(argc != 4) die("Need an id to get", conn);

            Database_get(conn, id);
            break;

        case 's':
            if(argc != 6) die("Need id, name, email to set", conn);

            Database_set(conn, id, argv[4], argv[5]);
            Database_write(conn);
            break;

        case 'd':
            if(argc != 4) die("Need id to delete", conn);

            Database_delete(conn, id);
            Database_write(conn);
            break;

        case 'l':
            Database_list(conn);
            break;
        default:
            die("Invalid action, only: c=create, g=get, s=set, d=del, l=list", conn);
    }

    Database_close(conn);

    return 0;
} 
```

我的第一个想法是不要让“数据库”成为一个全局结构，而是将它放在我的主函数中，以便它可以流过程序的其余部分，但这似乎很尴尬，不得不在整个程序中传递这个变量。然而，这让我意识到我将不得不通过每个需要它的函数调用传递一个指向它的指针，这不是额外功劳所暗示的。

我觉得作为一个 C 新手我错过了一些东西。我的问题可能含糊不清，因为我不完全了解我所谈论的术语。

如果我的问题不清楚 - 我如何实际添加此功能？？？我真的很茫然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:52:23.647

该练习意味着将您的更改`Database`如下：

```
struct Database {
    int max_rows;
    struct Address *rows;
}; 
```

你可以让你的数据库保持全局，但现在它的`rows`内部必须使用`malloc`. 当然，为了做到这一点，您需要知道要分配多少行。这就是“接受参数`MAX_DATA`和`MAX_ROWS`”的全部内容：添加代码`main`以解释`max_rows`参数，将其存储在`max_rows`您的中，并根据该数字进行`struct Database`分配。`rows`

您`Database_load`的`Database_write`, 和`Database_close`需要更改以读​​取和写入`max_rows`数据库文件。读取大小后负责`Database_load`分配；将负责调用.`rows``malloc``Database_close``free()``rows`

# c# - 我想在 C# 的文本框中突出显示或选择一个字符

> ID：15401960
> 
> 赞同：0
> 
> 时间：2013-03-14T05:36:29.187
> 
> 标签：c#, .net, winforms, textbox, selection

我的程序使用堆栈来检查编程语句或公式是否具有平衡括号。一切正常，除了我的生活我似乎无法找到一种方法在我按下按钮检查 Parens 时输入的同一个文本框中突出显示和不平衡的一对 Parens。

这是我的参考代码：

```
private void btnCheckParens_Click(object sender, EventArgs e)
{
    Stack leftParens = new Stack();
    Stack rightParens = new Stack();
    string expression = txtParens.Text;
    string ch;
    int indexOfParens; 
    for ( int i = 0; i < expression.Length; i++)
    {
    ch = expression.Substring(i,1);

    if (isParenthesis(ch))
    {
        if (ch == "(")
            leftParens.Push(ch);
        else
            rightParens.Push(ch);

    }

}
    if (!(leftParens.Count == rightParens.Count))
    {
        if (leftParens.Count > rightParens.Count)
        {
            indexOfParens = expression.LastIndexOf("(");
            txtParens.SelectionStart = indexOfParens;
            txtParens.SelectionLength = 1;
        }
        else
            indexOfParens = expression.LastIndexOf(")");
        txtParens.SelectionStart = indexOfParens;
        txtParens.SelectionLength = 1;
    }
    else
        MessageBox.Show("Number of parens are balanced!","success");

    } 
```

static bool isParenthesis(string ch) { bool flag; if ( ch == "(" || ch == ")") flag = true; 否则标志=假；返回标志；}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:10:53.690

[Fendy](https://stackoverflow.com/questions/15401960/i-want-to-highlight-or-select-one-character-out-of-my-textbox-in-c-sharp#comment21774840_15401960)在评论中发布了解决方案：

> 首先使用将焦点设置到文本框`txtParens.Focus();`

您必须这样做的原因是因为 Windows 控件（默认情况下）不显示当前选择，除非它们具有焦点。这也适用于文本框。

您可以在“运行”对话框中自己验证这一点。当它第一次打开时，“打开”文本框具有焦点，并且它包含的任何文本都被选中并突出显示。但是，如果您按下`Tab`键将焦点移动到底部的按钮之一，则选择突出显示会立即消失。文本框中的文本仍处于选中状态（如果您`Tab`返回，将再次突出显示），但由于控件失去焦点，所选内容未突出显示。

[`HideSelection`您可以通过修改property](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.hideselection.aspx)的值来更改此行为，您可以在设计器中使用 Properties Window 或通过代码执行此操作：

```
txtParens.HideSelection = false; 
```

设置`HideSelection`为 true 使用默认行为：当控件失去焦点时，选定的文本不会突出显示。将其设置为`false`可确保所选文本*始终*保持突出显示，即使控件失去焦点也是如此。

# c++ - 与 snprintf 和 size_t len 混淆

> ID：15401979
> 
> 赞同：0
> 
> 时间：2013-03-14T05:37:47.267
> 
> 标签：c++, module, printf

抱歉我的第 10 亿个问题，但我无法弄清楚我的实施需要什么。

我有一个名为 fmttimetest.cc（包含 main）的测试文件，它是包含 fmttime.h 和 fmttime.cc（实现文件）的模块的一部分

在 fmttime.cc 我有这个功能

```
 28 ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime)
 29 {
 30     tzset();                                    // Corrects timezone
 31
 32     int epochT = (tv->tv_sec) - timezone;       // Epoch seconds with
 33     int epochUT = tv->tv_usec;                  // Timezone correction
 34
 35     int seconds = epochT % 60;
 36     epochT /= 60;
 37     etime->et_sec = seconds;
 38     etime->et_usec = epochUT;
 39
 40     int minutes = epochT % 60;
 41     epochT /= 60;
 42     etime->et_min = minutes;
 43
 44     int hours = (epochT % 24) + daylight;       // Hours with DST correction
 45     epochT /= 24;
 46     etime->et_hour = hours;
 47
 48
 49     printf("%d,%d,%d\n", seconds, minutes, hours);
 50     printf("%d\n", epochUT);
 51     printf("%d\n", timezone);
 52     printf("%d\n", daylight);
 53     return etime;
 54
 55 }
 56
 57 char* formatTime(struct timeval* tv, char* buf, size_t len)
 58 {
 59
 60 struct ExpandedTime etime2;
 61 localTime(tv, &etime2);
 62 snprintf();
 63 } 
```

*注意包含结构扩展时间的最上面的代码行是截止的，但我向您保证它们已正确实施

现在在我的主测试文件 fmttimetest.cc 中，我调用了 formatTime 函数。但是我对缓冲区和 size_t len 应该如何交互感到困惑。我在一定程度上知道 size_t len 是什么……可以说它给你一个对象的大小。所以在我的主要 test.cc 我有这个

```
 6 #include <curses.h>
  7 #include <sys/time.h>
  8 #include <time.h>
  9 #include "fmttime.h"
 10
 11 struct timeval tv;
 12
 13 int main()
 14 {
 15 char buf[] = {"%d"};
 16 size_t len;
 17 gettimeofday(&tv, NULL);
 18 formatTime(&tv, buf, len);
 19 } 
```

所以这就是我感到困惑的地方。我需要传递此缓冲区，以便我的实现程序可以将纪元时间以人类可读格式写入此缓冲区，例如日、小时、分钟、秒。我不知道该怎么做。我无法更改它们按原样提供的任何函数原型，并且预计将按原样使用......

我也不确定如何在使用 snprintf() 将时间打印到传递的缓冲区的上下文中使用它....

再次感谢阅读本文的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:10:49.453

调用 formatTime 的正确方法是：

```
int main()
{
    char buf[64];
    size_t len = sizeof(buf);
    gettimeofday(&tv, NULL);
    formatTime(&tv, buf, len);
} 
```

所以你传入缓冲区及其长度。然后由 formatTime 写入缓冲区内容。

编辑：缓冲区当然需要有一些足够的长度:)

要将 snprintf 与您的时间结构一起使用，您可以执行以下操作（未经测试）：

```
snprintf(buf, len, "%02i:%02i:%02i", etime2.et_hour, etime2.et_min, etime2.et_sec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:01:31.163

缓冲区，是一个字符数组。在您的情况下，它代表一个字符串。c 中的字符串定义为以 '\0' 结尾的字符数组。缓冲区的大小是字符串的长度 + '\0' 符号。

让我们进一步检查一下：

```
char buf[] = {"%d"};
size_t len;
len = strlen(buf); // strlen returns the length without the zero terminating char.
len = sizeof(buf); // Because buf is preallocated in compilation, you can get it's length, this includes the zero at the end. 
```

# scala - 将闭包传递给 Scala 编译器插件

> ID：15401982
> 
> 赞同：6
> 
> 时间：2013-03-14T05:38:01.837
> 
> 标签：scala, scalac, scala-compiler

我正在尝试编写一个允许非常通用代码生成的 Scala 编译器插件：类似于 C 预处理器的通用性，但更安全（我不确定这是否是一个糟糕的想法，但这是一个有趣的练习）。我的理想用例如下所示：

```
// User code. This represents some function that might take some args
// and outputs an abstract syntax tree.
def createFooTree(...): scala.reflect.runtime.universe.Tree = ...

// Later user code (maybe separate compilation?). Here the user generates
// code programmatically using the function call to |createFooTree| and inserts
// the code using insertTree.
insertTree(createFooTree(...)) 
```

重要的插件代码可能如下所示（基于[this](https://gist.github.com/ochafik/4978627)）：

```
class InsertTreeComponent(val global: Global)
  extends PluginComponent
  with TypingTransformers {
  import global._
  import definitions._

  override val phaseName = "insertTree"

  override val runsRightAfter = Some("parser")
  override val runsAfter = runsRightAfter.toList
  override val runsBefore = List[String]("typer")

  def newPhase(prev: Phase): StdPhase = new StdPhase(prev) {
    def apply(unit: CompilationUnit) {
      val onTransformer = new TypingTransformer(unit) {
        override def transform(tree: Tree): Tree = tree match {
          case orig @ Apply(
            function,
            // |treeClosure| is the closure we passed, which should
            // evaluate to a Tree (albeit a runtime Tree).
            // The function.toString bit matches anything that looks like a
            // function call with a function called |insertTree|.
            treeClosure) if (function.toString == "insertTree") => {
            // This function evaluates and returns the Tree, inserting it
            // into the call site as automatically-generated code.
            // Unfortunately, the following line isn't valid.
            eval(treeClosure): Tree
          }   
  ... 
```

知道怎么做吗？请不要说“只使用宏”；至少在 2.10 中，它们还不够通用。

顺便说一句，我发现我概述的方法存在两个问题：1）编译器插件采用 AST，而不是闭包。它需要某种创建闭包的方法，可能会添加对用户代码的构建依赖项。2）用户无权访问 scala.reflect.internal.Trees.Tree，只能访问 scala.reflect.runtime.universe.Tree，因此插件需要在两者之间进行转换。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T13:33:35.030

您面临的实现困难部分是 2.10 中的宏不够通用的原因。它们看起来非常具有挑战性，甚至是根本性的，但我乐观地认为它们最终会被击败。以下是一些棘手的设计问题：

1）你怎么知道你调用的函数是正确的`insertTree`？如果用户编写了自己的名为的函数`insertTree`怎么办？那么您如何区分对您的特殊函数的魔术调用和对用户定义函数的正常调用？为确保您需要对函数的引用进行类型检查。但这并不容易（见下文）。

2）您如何准确评估`createFooTree(...)`电话？和以前一样，您需要对`createFooTree`部件进行类型检查以找出它代表什么，这并不容易。

3) 然后还有一个问题。如果`createFooTree`在您当前正在编译的文件之一中定义了怎么办？然后，您需要以某种方式将它及其依赖项与程序的其余部分分开，将其放入不同的编译运行中，编译然后调用它。然后，如果函数或这些依赖项之一的编译导致宏扩展，这应该会改变编译器的某些全局状态。我们如何将它传播到程序的其余部分？

4）我一直在谈论类型检查。那是问题吗？显然，是的。如果你的宏可以在任何地方扩展成任何东西，那么类型检查就变得非常棘手。例如，你如何检查这个：

```
class C {
  insertTree(createFoo(bar)) // creates `def foo = 2`, requires `bar` to be defined to operate
  insertTree(createBar(foo)) // creates `def bar = 4`, requires `foo` to be defined to operate
} 
```

5) 不过，好消息是您不必使用`scala.reflect.runtime.universe.Tree`. 您可能已经`createFooTree`依赖类型：`def createFooTree[U <: scala.reflect.api.Universe with Singleton](u: Universe): u.Tree`. 这个，或者`scala.reflect.macros.Context`我们在 Scala 2.10 中使用的方法。不是很漂亮，但解决了宇宙不匹配的问题。

作为底线，我目前的感觉是静态类型语言中的宏（尤其是在面向对象的语言中，因为 OO 为代码片段之间的相互依赖带来了许多惊人的方式）真的很棘手。尚未发现用于修改正在编译的程序中的任意片段的类型宏的健壮模型。

如果您希望我们可以通过电子邮件进行更详细的讨论。我们还可以合作以实现适当宏的想法。或者，如果您可以分享您的用例，我可以尝试帮助您找到适合您特定情况的解决方法。

# android - 在 Maps API v2 中完全禁用 onMarkerClickListener

> ID：15401988
> 
> 赞同：16
> 
> 时间：2013-03-14T05:38:13.537
> 
> 标签：android, onclick, maps, marker

我想禁用单击/点击`map markers`. 我知道你可以`disable default behavior`通过设置一个空`map.setOnMarkerClickListener`并返回true；但是，这仍然需要点击标记。我想将水龙头传递给`onMapClickListener`.

在我的应用程序中，点击地图会移动一个标记，如果您在靠近标记的位置点击，它只会认为您正在点击标记！你会认为有一种`Marker.setClickable`方法，但没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-04T11:15:17.097

只需覆盖 onclick 事件：

```
map.setOnMarkerClickListener(new OnMarkerClickListener() {
    public boolean onMarkerClick(Marker arg0) {
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T17:45:12.210

我有两个建议：

如果我理解正确，您想提供在地图上放置标记的功能，对吧？！如果您无法删除`setOnMarkerClickListener`，您是否尝试在地图上[绘制](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Circle)并最终将您的绘图“转换”为 a `Marker`。（从绘图中获取“LatLng”并创建一个`Marker`）。

实际上第二个建议并不是一个很好的建议（取决于您是否可以缩放/移动地图）。我有一个类似的任务，我们在地图上使用了透明覆盖，它处理所有用户输入并委托它。但是我们没有缩放和移动的功能，这会很痛苦......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-03T05:50:17.443

应用于`OnMarkerClickListener`您的地图。实现`onMarkerClick()`方法并返回`false`

```
googleMap.setOnMarkerClickListener(new OnMarkerClickListener() {
    public boolean onMarkerClick(Marker marker) {
        return true;
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-28T10:44:20.263

```
class MyInfoWindowAdapter implements GoogleMap.InfoWindowAdapter
{
     @Override
     public View getInfoContents(Marker mar)
     {
         return null;
     }
     @Override
     public View getInfoWindow(Marker mar)
     {
         return null;
     }
} 
```

`gmap.setInfoWindowAdapter(new MyInfoWindowAdapter);`

试试上面的这段代码。这会将您的信息窗口设置为空。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-21T16:53:39.667

`map.setOnMarkerClickListener(null);`尝试这个

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-10-28T10:05:52.467

不需要实现 OnMarkerClickListner。只是尝试删除此声明

```
map.setOnMarkerClickListner(this) 
```

从你的代码，我希望它能解决你的问题。

# wpf - 在数据网格中使用 WindowsFormsHost，超出滚动区域

> ID：15401990
> 
> 赞同：2
> 
> 时间：2013-03-14T05:38:25.337
> 
> 标签：wpf, datagrid, scrollbar, windowsformshost

在数据网格中使用 WindowsFormsHost 时，我的控件超出了网格的可滚动区域。

我尝试使用此处提到的解决方案，[ScrollViewer 在 WPF WindowsFormHost 中不起作用](https://stackoverflow.com/questions/14080580/scrollviewer-is-not-working-in-wpf-windowsformhost)。

我还可以使用 ScrollableWindowsFormsHost 类将控件限制在滚动区域。然而，除非我在单元格内单击两次（第一次单击单元格上的焦点，第二次单击绘制我的组合框），否则我的 Winforms 控件（这是从 Winforms 组合框派生的控件）不会显示，它在窗口重绘时再次消失.

来自 xml：

```
 <toolkit:DataGridTemplateColumn>
                <toolkit:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <controls:HostedWinformsCombobox>
                        </controls:HostedWinformsCombobox>
                    </DataTemplate>
                </toolkit:DataGridTemplateColumn.CellTemplate>
            </toolkit:DataGridTemplateColumn> 
```

来自 ScrollableWindowsFormsHost 的代码。

```
 //--------------------------------------------------------------------------------
    /// <summary>Scroll handler manages the clipping of this windows forms host.</summary>
    /// <param name="sender">Sender</param>
    /// <param name="ea">Event argument</param>
    private void ScrollHandler(Object sender, ScrollChangedEventArgs ea)
    {
        PresentationSource presentationSource = HwndSource.FromVisual(this);
        if (presentationSource == null)
        {
            return;
        }
        Visual rootVisual = presentationSource.RootVisual;
        if (rootVisual == null)
        {
            return;
        }
        ScrollViewer scrollViewer = (ScrollViewer)sender;
        if (!scrollViewer.IsDescendantOf(rootVisual))
        {
            return;
        }

        // calculate the rect of scrollview with 0/0 at upper left corner of root visual
        GeneralTransform transform = scrollViewer.TransformToAncestor(rootVisual);
        Rect scrollRect = transform.TransformBounds(new Rect(0, 0, scrollViewer.ViewportWidth, scrollViewer.ViewportHeight));

        // calculate the rect of the scrollable windows forms host instance with 0/0 at upper left corner of root visual
        transform = this.TransformToAncestor(rootVisual);
        Rect hostRect = transform.TransformBounds(new Rect(this.Padding.Left, this.Padding.Right,
          this.RenderSize.Width, this.RenderSize.Height));

        // calculate the intersection of the two rect
        Rect intersectRect = Rect.Intersect(scrollRect, hostRect);

        Int32 topLeftX = 0;
        Int32 topLeftY = 0;
        Int32 bottomRightX = 0;
        Int32 bottomRightY = 0;
        if (intersectRect != Rect.Empty)
        {
            // calculate the HRGN points with 0/0 at upper left corner of scrollable windows forms host instance
            //topLeftX = (Int32)(intersectRect.TopLeft.X - hostRect.TopLeft.X);
            //topLeftY = (Int32)(intersectRect.TopLeft.Y - hostRect.TopLeft.Y);
            //bottomRightX = (Int32)(intersectRect.BottomRight.X - hostRect.TopLeft.X);
            //bottomRightY = (Int32)(intersectRect.BottomRight.Y - hostRect.TopLeft.Y);

            //modified from original function - this one draws it correctly without                    drawing over the title bar etc.
            topLeftX = (Int32)(intersectRect.TopLeft.X);
            topLeftY = (Int32)(intersectRect.TopLeft.Y);
            bottomRightX = (Int32)(intersectRect.BottomRight.X);
            bottomRightY = (Int32)(intersectRect.BottomRight.Y);
        }

        // because the CreateRectRgn / SetWindowRgn api calls are slow we call them only if it has a visual effect
        if (_topLeftX != topLeftX || _topLeftY != topLeftY || _bottomRightX != bottomRightX || _bottomRightY != bottomRightY)
        {
            _topLeftX = topLeftX;
            _topLeftY = topLeftY;
            _bottomRightX = bottomRightX;
            _bottomRightY = bottomRightY;
            // create HRGN object and set it to the windows forms host instance
            IntPtr hrgn = CreateRectRgn(_topLeftX, _topLeftY, _bottomRightX, _bottomRightY);
            SetWindowRgn(this.Handle, hrgn, true);

            // I tried the following to fix the issue, but neither ones worked
            this.UpdateLayout();    //doesn't work

            this.Child.Show();      //doesn't work
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:41:55.133

这段代码对我有用。

```
public class DataGridWindowsFormsHost : WindowsFormsHost
{
    private Int32 _topLeftX = -1;
    private Int32 _topLeftY = -1;
    private Int32 _bottomRightX = -1;
    private Int32 _bottomRightY = -1;

    private const int _titleBarHeight = 25;  // must leave the space for the title bar in DataGrid
    private const int _scrollbarHeight = 5;  // must leave space for horizontal scroll area in the bottom

    //--------------------------------------------------------------------------------
    /// <summary>Creates a DataGridWindowsFormsHost.</summary>
    public DataGridWindowsFormsHost()
    {
        // Register the event handler
        EventManager.RegisterClassHandler(typeof(ScrollViewer), ScrollViewer.ScrollChangedEvent, new ScrollChangedEventHandler(ScrollHandler));
    }

    [DllImport("GDI32.DLL", EntryPoint = "CreateRectRgn")]
    private static extern IntPtr CreateRectRgn(Int32 x1, Int32 y1, Int32 x2, Int32 y2);
    [DllImport("User32.dll", SetLastError = true)]
    private static extern Int32 SetWindowRgn(IntPtr hWnd, IntPtr hRgn, Boolean bRedraw);

    private DataGrid _dGrid;
    public DataGrid DGrid
    {
        get
        {
            if(_dGrid == null)
            {
                PresentationSource presentationSource = HwndSource.FromVisual(this);
                Visual rootVisual = presentationSource.RootVisual;
                _dGrid = VisualTreeHelperExt.FindChildByName<DataGrid>(_rootVisual, "myDataGrid") as DataGrid;
            }

            return _dGrid;
        }
    }

    //--------------------------------------------------------------------------------
    /// <summary>Scroll handler manages the clipping of this windows forms host.</summary>
    /// <param name="sender">Sender</param>
    /// <param name="ea">Event argument</param>
    private void ScrollHandler(Object sender, ScrollChangedEventArgs ea)
    {
        PresentationSource presentationSource = HwndSource.FromVisual(this);
        Visual rootVisual = presentationSource.RootVisual;

        GeneralTransform transform = DGrid.TransformToAncestor(rootVisual);
        // leave the space for title bar and horizontal scrollbar at the bottom
        Rect gridRect = transform.TransformBounds(new Rect(0, _titleBarHeight, 
            DGrid.ActualWidth - _scrollbarHeight, DGrid.ActualHeight - _titleBarHeight));

        transform = this.TransformToAncestor(_rootVisual);
        // find the rect of the hosting control
        Rect hostRect = transform.TransformBounds(new Rect(this.Padding.Left, this.Padding.Right,
          this.RenderSize.Width, this.RenderSize.Height));

        var intersectRect = Rect.Intersect(gridRect, hostRect);
        Int32 topLeftX = 0;
        Int32 topLeftY = 0;
        Int32 bottomRightX = 0;
        Int32 bottomRightY = 0;
        if (intersectRect != Rect.Empty)
        {
            // calculate the HRGN points with 0/0 at upper left corner of scrollable windows forms host instance
            topLeftX = (Int32)(intersectRect.TopLeft.X - hostRect.TopLeft.X);
            topLeftY = (Int32)(intersectRect.TopLeft.Y - hostRect.TopLeft.Y);
            bottomRightX = (Int32)(intersectRect.BottomRight.X - hostRect.TopLeft.X);
            bottomRightY = (Int32)(intersectRect.BottomRight.Y - hostRect.TopLeft.Y);
        }

        // because the CreateRectRgn / SetWindowRgn api calls are slow we call them only if it has a visual effect
        if (_topLeftX != topLeftX || _topLeftY != topLeftY || _bottomRightX != bottomRightX || _bottomRightY != bottomRightY)
        {
            _topLeftX = topLeftX;
            _topLeftY = topLeftY;
            _bottomRightX = bottomRightX;
            _bottomRightY = bottomRightY;

            // create HRGN object and set it to the windows forms host instance
            IntPtr hrgn = CreateRectRgn(_topLeftX, _topLeftY, _bottomRightX, _bottomRightY);
            SetWindowRgn(this.Handle, hrgn, true);
        }
    }
} 
```

# javascript - 如何在 UIwebview 上添加注释和突出显示

> ID：15401992
> 
> 赞同：0
> 
> 时间：2013-03-14T05:38:34.287
> 
> 标签：javascript, ios, objective-c, uiwebview

我想实现一个功能，比如在 UIWebview 上添加一个选定文本的注释作为 iBooks 和 Kobosoft 阅读器

我已经创建了 UIMenuItem。但是，我不知道如何实现这个方法。有人可以在这方面提供帮助吗？

我不知道使用什么功能来实现添加注释和突出显示文本以及存储和检索

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:51:32.930

UIWebView 以这样一种方式实现，您可以将注释添加到加载到视图中的网页或 PDF 文本的特定部分，但由于 API 不允许突出显示，因此无法突出显示。iBooks 和 Kobo（在某种程度上还有 kindle）利用[CGPDF](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html#//apple_ref/doc/uid/TP30001066-CH214-TPXREF101) API 和一点核心动画魔法来突出 PDF，并将其存储在 PDF 的元数据中。读取和写入元数据存储很容易，但是渲染亮点是一个挑战，涉及一些[有趣的数学](https://stackoverflow.com/questions/5403610/handle-pdf-text-matrix-tm-values-obtained-with-cgpdfscanner-on-iphone-ipad)。

# blackberry - 如何创建自定义滚动始终从底部开始

> ID：15401993
> 
> 赞同：0
> 
> 时间：2013-03-14T05:38:37.217
> 
> 标签：blackberry

在这里，我正在创建一个包含顶部栏、自定义垂直滚动管理器、`Editfield`发送消息和**发送**按钮的聊天屏幕。

现在我创建一个消息布局：它有`VerticalFieldManager`并且它包含`EditField`可聚焦和只读的，以及两个`LabelField`用于名称和日期的 s。此垂直字段管理器是根据聊天消息的数量动态创建的。这一切都在自定义滚动中列出。

我需要滚动才能从屏幕底部开始。现在，它在屏幕顶部工作。

在屏幕底部，我有一个`BasicEditField`发送**按钮**。

每 7 秒刷新一次页面，刷新页面时，我重新创建整个布局。`BasicEditField`因此，每当我的页面刷新时，我都需要关注。而且我还希望滚动反向工作。

这是我的垂直滚动管理器类

```
public class VerticalScrollManager extends VerticalFieldManager implements
    ScrollChangeListener {

public VerticalScrollManager() {
    this(VERTICAL_SCROLL | NO_VERTICAL_SCROLLBAR|DOWNWARD, Integer.MAX_VALUE, Integer.MAX_VALUE);
}

public VerticalScrollManager(int w, int h) {
    this(VERTICAL_SCROLL | NO_VERTICAL_SCROLLBAR|DOWNWARD, w, h);
}

public VerticalScrollManager(long style) {
    this(style, Integer.MAX_VALUE, Integer.MAX_VALUE);
}

public VerticalScrollManager(long style, int w, int h) {
    super(style);
    maxVisibleHeight = h;
    maxVisibleWidth = w;

    setScrollListener(this);
}

protected void sublayout(int w, int h) {

    isScrolling = ((getStyle() & VERTICAL_SCROLL) == VERTICAL_SCROLL);

    int scrollbarWidth = isScrolling ? SCROLLBAR_WIDTH + SCROLLBAR_LEFT_MARGIN + SCROLLBAR_RIGHT_MARGIN : 0;

    visibleHeight = Math.min(h, maxVisibleHeight);
    visibleWidth = Math.min(w, maxVisibleWidth);

    int myWidth = visibleWidth - scrollbarWidth;
    super.sublayout(myWidth, visibleHeight);

    visibleHeight = getHeight();
    totalHeight = getVirtualHeight();
    visibleWidth = getWidth() + scrollbarWidth;

    setExtent(visibleWidth, visibleHeight);

    setVirtualExtent(visibleWidth, totalHeight);

    isScrolling = (visibleHeight < totalHeight);

    if (isScrolling) {
        sliderHeight = visibleHeight * visibleHeight / totalHeight;
        sliderHeight = Math.max(sliderHeight, 1);    // show at least one pixel!

        sliderXPosition = visibleWidth - SCROLLBAR_WIDTH - SCROLLBAR_RIGHT_MARGIN;

    }
}

public void scrollChanged(Manager mgr, int newX, int newY) {
if (mgr == this) {
       invalidate(newX + sliderXPosition, newY, SCROLLBAR_WIDTH + SCROLLBAR_RIGHT_MARGIN, getVisibleHeight());

}
} 
```

}

这是我处理用户界面和功能的屏幕

```
public class ChatScreen extends MainScreen implements FieldChangeListener, FocusChangeListener {

    class MainTask implements Runnable
    {

        public MainTask()
        {}

        public void run() {

            try
            {
                if(textMsg.getText().equals(""))
                {   
                    IssueHTTPPostL();
                }
                else
                {
                    IssueHTTPPostChat(textMsg.getText());
                }
                UiApplication.getUiApplication().invokeLater(new Runnable() {

                    public void run() {
                        if(replyCode.equalsIgnoreCase("success"))
                        {   

                            if(chatMsgData!=null && chatMsgData.length>0 )
                            {

                                for( int i=0; i<chatMsgData.length; i++)
                                {

                                    final String name = chatMsgData[i].name;
                                    final String email = chatMsgData[i].email;
                                    final String date = chatMsgData[i].date;
                                    final String msg = chatMsgData[i].message;
                                    final String vappUser = chatMsgData[i].vappUser;

                                    if(chatMsgData[i].isReply.equals("0"))
                                    {   

                                        vfm = new VerticalFieldManager(VerticalFieldManager.FIELD_RIGHT)
                                        {
                                            protected void paintBackground(Graphics g) 
                                            {

                                                g.setColor(Color.WHITE);
                                                g.fillRoundRect(30, 0, getWidth()-30, getHeight(), 12, 12);
                                                g.setColor(0X626262);
                                                g.drawRoundRect(30, 0, getWidth()-30, getHeight(), 12, 12);
                                                //g.drawBitmap(0,0,getWidth(),getHeight(),imgRight,0,0);
                                            }   

                                        };

                                        lblName = new LabelField(name, LabelField.FIELD_LEFT|DrawStyle.LEFT)
                                        {
                                            protected void paint(Graphics g) 
                                            {
                                                g.setColor(Color.BLACK);
                                                super.paint(g);
                                            };
                                        };

                                        if(name.equals("")||name.equals("Name"))
                                        {
                                            lblName.setText(email);
                                        }

                                        lblDate = new LabelField(date, LabelField.FIELD_RIGHT|DrawStyle.RIGHT);
                                        lblDate.setFont(font.derive(Font.PLAIN, dateFontSize));
                                        lblName.setFont(font.derive(Font.BOLD, nameFontSize));
                                        JustifiedHorizontalFieldManager hfm = new JustifiedHorizontalFieldManager(lblName, lblDate, true);

                                        hfm.setMargin(10, 10, 10, 50);

                                            lblMsg = new EditField(EditField.FOCUSABLE|EditField.READONLY)
                                            {
                                                protected void paint(Graphics g) 
                                                {
                                                    g.setColor(0x626262);
                                                    super.paint(g);
                                                };
                                            };

                                        lblMsg.setText(msg);
                                        lblMsg.setMargin(10, 10, 10, 50);
                                        lblMsg.setFont(font.derive(Font.PLAIN, msgFontSize));
                                        vfm.add(hfm);

                                        vfm.add(lblMsg);
                                        vfm.setMargin(10, 20, 10, 0);
                                    }
                                    else
                                    {

                                        vfm = new VerticalFieldManager(VerticalFieldManager.FIELD_LEFT)
                                        {
                                            protected void paintBackground(Graphics g) 
                                            {
                                                g.setColor(Color.WHITE);
                                                g.fillRoundRect(0, 0, getWidth()-30, getHeight(), 12, 12);
                                                g.setColor(Color.BLACK);
                                                g.drawRoundRect(0, 0, getWidth()-30, getHeight(), 12, 12);
                                                //g.drawBitmap(0,0,getWidth(),getHeight(),imgLeft,0,0);
                                            }
                                        };

                                        lblName = new LabelField(vappUser, LabelField.FIELD_LEFT|DrawStyle.LEFT)
                                        {
                                            protected void paint(Graphics g) 
                                            {
                                                g.setColor(Color.BLACK);
                                                super.paint(g);
                                            };
                                        };

                                        if(name.equals("")||name.equals("Name"))
                                        {
                                            lblName.setText(email);
                                        }

                                        lblDate = new LabelField(date, LabelField.FIELD_RIGHT|DrawStyle.RIGHT)
                                        {
                                            protected void paint(Graphics g) 
                                            {
                                                g.setColor(0X626262);
                                                super.paint(g);
                                            };
                                        };
                                        lblDate.setFont(font.derive(Font.PLAIN, dateFontSize));
                                        lblName.setFont(font.derive(Font.BOLD, nameFontSize));
                                        JustifiedHorizontalFieldManager hfm = new JustifiedHorizontalFieldManager(lblName, lblDate, true);

                                        //hfm.setMargin("top", "right", "bottom", "left");
                                        hfm.setMargin(10, 50, 10, 10);

                                            lblMsg = new EditField(EditField.FOCUSABLE|EditField.READONLY)
                                            {
                                                protected void paint(Graphics g) 
                                                {
                                                    g.setColor(0x626262);
                                                    super.paint(g);
                                                };
                                            };

                                        lblMsg.setText(msg);
                                        lblMsg.setMargin(10, 40, 10, 10);
                                        lblMsg.setFont(font.derive(Font.PLAIN, msgFontSize));
                                        vfm.add(hfm);

                                        vfm.add(lblMsg);

                                        vfm.setMargin(10, 10, 20, 0);

                                    }

                                    vsm.add(vfm);

                                }   

                            }
                            add(vsm);

                            add(sendHfm);
                        }

                        else
                        {

                            timer.cancel();
                            UiApplication.getUiApplication().popScreen(ChatScreen.this);
                            UiApplication.getUiApplication().pushScreen(new ChatListScreen());
                        }
                    }
                });

            }
            catch(Exception e)
            {e.printStackTrace();}
        }

    }

} 
```

![在此处输入图像描述](../Images/3a1821b75247a625b965753b7b99e816.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:56:12.513

如果我理解正确，您`VerticalFieldManager`在屏幕中间有一个（顶部栏下方，发送按钮上方）。您希望该管理器从其内容的底部开始。对？

为此，请尝试使用

```
vsm.setVerticalScroll(vsm.getVirtualHeight()); 
```

`vsm`包含旧只读消息的垂直字段管理器在哪里。

任何时候发生的事情（比如页面刷新）可能会让你失去注意力`BasicEditField`，你可以用

```
textMsg.setFocus(); 
```

`textMsg`编辑字段在哪里。显然，为了使其工作，您需要保留`vsm`和`textMsg`作为成员变量，而不是仅仅将它们创建为局部变量并使用`add()`.

# ruby-on-rails - ActiveAdmin 未初始化常量

> ID：15401998
> 
> 赞同：5
> 
> 时间：2013-03-14T05:39:00.660
> 
> 标签：ruby-on-rails, activeadmin

将我的应用程序部署到我的 VPS 后，我收到以下错误。ActiveAdmin 在我的本地开发环境中运行良好，但是一旦我使用 capistrano 进行部署，它看起来好像没有安装 gem？

```
E, [2013-03-14T01:27:04.901577 #24972] ERROR -- : uninitialized constant ActiveAdmin (NameError)
/home/deployer/apps/papaya/releases/20130314052558/config/initializers/active_admin.rb:1:in `<top (required)>' 
```

我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'bootstrap-sass'
gem 'font-awesome-sass-rails'
# gem 'acts_as_tree', :git => 'git://github.com/amerine/acts_as_tree.git'
gem 'closure_tree'
gem 'kaminari'
gem 'friendly_id'
gem 'slim'
gem 'gmaps4rails'
gem 'devise'
gem 'omniauth'
gem 'oauth2'
gem 'omniauth-facebook'
gem 'omniauth-twitter'
gem 'simple_form'
gem 'pg_search'
gem 'stamp'
gem 'acts-as-taggable-on', '~> 2.3.1'
gem 'rmagick'
gem 'carrierwave'
gem 'select2-rails'
# gem 'roo'
gem 'activeadmin'
gem "meta_search",    '>= 1.1.0.pre'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
  gem 'compass-rails'
  gem 'turbo-sprockets-rails3'
end 
```

我能够毫无问题地运行控制台并且需要`activeadmin`

```
deployer@pareto:~/apps/papaya/current$ RAILS_ENV=production bundle exec irb
irb(main):001:0> require 'activeadmin'
=> true
irb(main):002:0> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-18T19:11:58.013

### 发生了什么？

当需要定义常量（如`ActiveAdmin`or ）的 gem 时`ActiveAdmin::Comment`，如果在定义该常量期间由于某种原因出现问题，Bundler 会留下该常量未定义并且不会重新引发异常。

### 可能的原因

`ActiveAdmin`依赖`ExecJS`并`ExecJS`需要一个工作的 JavaScript 运行时。在定义常量`ExecJS`时会抛出这样的错误。`ActiveAdmin`

```
ExecJS::RuntimeUnavailable: Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. 
```

在这种情况下，只需安装 Node.js。`sudo apt-get install nodejs`

## 如何调试这样的问题

1.  尝试运行 Rails 控制台。`bundle exec rails console`
2.  如果失败，请尝试在内部手动 require 有问题的 gem`irb`并处理其依赖项。
3.  如果应该定义但没有定义，则需要 gem 或部件。当需要手动 Rubygems 时会抛出描述问题的异常。
4.  处理异常并修复它们，直到问题得到解决。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-29T17:04:28.293

尝试重新启动 Rails 服务器。有类似的问题，重启后就解决了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-22T11:02:20.363

我`require 'activeadmin'`在我的 active_admin.rb 初始化程序中添加了一个，它可以工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T06:13:24.680

可能您可能没有在您的生产环境中运行 bundle install 。

尝试`bundle install`在生产环境中运行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-01T15:49:36.073

@alexBrand 的解决方案对我不起作用。

相反，`require 'activeadmin/cancan_adapter'`在配置块中添加对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-25T16:47:24.797

只需转到您的`routes`并删除`active_admin routes`并运行`rails destroy active_admin:install`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-19T06:05:05.100

从 gem-file 中取消注释 (gem 'therubyracer', platforms: :ruby) gem 然后 bundle..it 工作