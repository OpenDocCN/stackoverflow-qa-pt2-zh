# StackOverflow 问答 16117000-16117999

# jquery - jQuery - both if else statements executing on page load

> ID：16117001
> 
> 赞同：0
> 
> 时间：2013-04-20T05:32:00.347
> 
> 标签：jquery

Edit: both if else statements executing. - I have a table with buttons in it. On page load, if the label of the button is 'Hello', I want to change it to something else. I have if-else statement but all the time, both if else statements are being executed. I do not what is wrong here.

```
 $(document).ready( function() {

   if($('button').val() == "Hello" ) {
      alert("Hello I am in if");
      $(this).removeClass('btn-danger');
      $(this).addClass('btn-primary');
      $(this).text('ifif');
    }
    else {
     alert("Hello I am in else");
     $(this).removeClass('btn-primary');
     $('button').addClass('btn-danger');
     $('button').text('elseelse');
    }
  }); 
```

Everytime, the label of the button changes to elseelse even when the initial label of button is 'Hello'. First it goes inside if and changes the label to ifif and then goes inside else too.It works fine if I put it in a click event function. But on page load it does not work correctly.

Your responses will be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:36:39.220

您应该使用`text()`方法，而不是`val()`获取按钮文本的方法。另外，请注意，这`$('button')`将选择您页面中的所有按钮，这可能不是您想要的。

```
$('button').text() == "Hello" 
```

另外，我注意到您`$(this)`在文档就绪处理程序中使用，这似乎是错误的，因为`this`不会引用您的按钮。您应该执行以下操作：

```
$(document.ready(function () {
    var $btn = $('#your_button_id');

    if ($btn.text() === 'Hello') {
        $btn.removeClass('btn-danger');
        //...
    }
}); 
```

> “其实我希望所有的按钮都被选中。”

根据这些不同的要求，您可以执行以下操作：

[http://jsfiddle.net/WpJpV/1/](http://jsfiddle.net/WpJpV/1/)

HTML

```
<button class="btn-danger">Hello</button>
<button class="btn-danger">Hello</button>
<button class="btn-danger">Hello></button>
<button class="btn-danger">Hello></button>
<button class="btn-primary">Yo</button> 
```

JS

```
$(function () {
    var classes = 'btn-danger btn-primary';

    $('button:not(:contains(Hello))').toggleClass(classes).text('elseelse');
    $('button:contains(Hello)').toggleClass(classes).text('ifif');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:40:24.900

尝试

```
$(function(){
    $('button').not(':contains(Hello)').removeClass('btn-primary').addClass('btn-danger').text('elseelse');

    $('button:contains(Hello)').removeClass('btn-danger').addClass('btn-primary').text('ifif');
}); 
```

演示：[小提琴](http://jsfiddle.net/gDXg5/3/)

或者

```
$(function(){
    $('button').each(function(){
        var $this = $(this);
        if($this.text() == 'Hellow'){
            $this.removeClass('btn-danger').addClass('btn-primary').text('ifif');
        } else {
            $this.removeClass('btn-primary').addClass('btn-danger').text('elseelse');
        }
    })
}); 
```

演示：[小提琴](http://jsfiddle.net/gDXg5/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:11:37.757

你应该使用`.each()`函数，演示：http: [//jsfiddle.net/UCEAw/1/](http://jsfiddle.net/UCEAw/1/)

```
$('button').each(function () {
    if ($(this).val() == 'hello') {
        $(this).text('Hello');
    } else {
        $(this).text('World');
    }
}); 
```

# iphone - 使用 UICollectionView 网格视图时所有项目均未正确显示

> ID：16117002
> 
> 赞同：0
> 
> 时间：2013-04-20T05:32:09.773
> 
> 标签：iphone

我正在开发一个应用`xcode4.2`程序`IOS6`

我`UICollectionView`用来在网格视图中显示项目。我想以 3x3 格式显示项目，但目前有 15 个项目，因此项目应按以下方式显示

```
Page 1

Item1 Item2 Item3

Item4 Item5 Item6

Item7 Item8 Item9

Page 2

Item10 Item11 Item12

Item13 Item14 Item15

Here page 1 should be displayed default while page 2 on screen swiping

But currently these are displayed in following way

Page 1

Item1 Item4 Item7

Item2 Item5 Item8 

Item3 Item6 Item9

Page 2

Item7 Item10 Item13

Item8 Item11 Item14

Item9 Item12 Item15 
```

似乎 UICollectionView 垂直而不是水平排列项目。你能帮忙解决这个问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T06:30:59.847

我通过选择水平方向并动态地从左到右排列项目来实现。默认情况下，项目是从上到下排列的，我根据索引号更改了项目，因此项目看起来像从左到右排列并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:15:45.770

您可以将滚动方向更改为水平。在属性检查器下有一个更改滚动方向的选项。将其更改为水平。

希望这可以帮助。

# c# - 点的 C# 程序加法运算符

> ID：16117006
> 
> 赞同：1
> 
> 时间：2013-04-20T05:33:14.673
> 
> 标签：c#

我正在使用 C# XNA，当我尝试将两点相加时发现它不会让我这样做。有什么方法可以添加到 Point 类中以允许此代码运行。

```
Point a = new Point(3,4);
Point b = new Point(6,2);
Point c = a + b; //Should equal new Point(9,6); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:38:38.327

您可以简单地重载`+`运算符 - 如下所示：

```
class Point
{
    public int X { get; private set; }
    public int Y { get; private set; }

    public Point(int x, int y)
    {
        X = x;
        Y = y;
    }

    public static Point operator +(Point p1, Point p2)
    {
        return new Point(p1.X + p2.X, p1.Y + p2.Y);
    }
} 
```

现在，您的代码可以按照您的预期进行编译：

```
Point a = new Point(3, 4);
Point b = new Point(6, 2);
Point c = a + b; //Should equal new Point(9,6); - and it is :) 
```

有关运算符重载的更多信息可以在[MSDN](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)上找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:39:55.883

添加到单独的类。

```
public static void Add(this Point a, Point b){
     a.X += b.X;
     a.Y += b.Y;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T05:40:36.123

您可以将**Size**结构添加到**Point** struct ，并通过将 Point 传递给 Size 构造函数轻松地在它们之间进行转换，如下所示：

```
c = a + (new Size(b)); 
```

为什么 DOT NET 选择在密集元组和扩展元组之间实施这种微妙的区别，这超出了我的理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T06:14:33.610

您可以使用如下所示的**扩展方法**

```
class Program
{
    static void Main(string[] args)
    {
        Point a = new Point(1, 2);
        Point b = new Point(2, 4);

        Point c=a.AddPoints(b);
    }
}

public static class MyExtensions
{
    public static Point AddPoints(this Point x, Point y)
    {
        return new Point(x.X + y.X, x.Y + y.Y);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T08:30:48.830

从技术上讲，您可以使用静态方法、扩展方法，甚至可能是运算符重载，正如其他答案所暗示的那样。

但是，.NET 同时具有`Point`和`Size`来捕捉*语义上*的区别：

*   `Point`指一个点，通常与任意参考点进行比较。
*   `Size`指的是向量 - 有方向的距离，或距离 X 和距离 Y。

添加`Point`s 将毫无意义。例如，如果`Point`s 指的是地理地图上的坐标——它们的含义是什么？“50°纬度”+“60°纬度”=“110°纬度”？这就是.NET 明智地选择不实现加法运算符的原因。

但是，添加`Point`和`Size`可以具有合理的含义-“50°纬度”+“1°纬度距离”=“51°纬度”是一个很好的答案。

**PS。**`DateTime`注意与和之间的区别的相似性`TimeSpan`。

**TL;DR** - 你的一个或两个`Point`s 实际上应该是 a `Size`- 在最早的位置更改它。

# jquery - 在 display:none 时给元素一个宽度；

> ID：16117008
> 
> 赞同：0
> 
> 时间：2013-04-20T05:33:26.370
> 
> 标签：jquery, css

我有一个小 CSS 过渡，我想用它来让一个元素从其父元素后面滑出。

元素：

```
#contact-form{
    background: #f2f2f2;
    text-align: center;
    top:-20em;
    display:none;
    position: relative;
    padding: 2em 0;
    width:100%;

    -webkit-transition: top 0.2s ease;
    -moz-transition: top 0.2s ease;
    -ms-transition: top 0.2s ease;
    -o-transition: top 0.2s ease;
    transition: top 0.2s ease;
} 
```

jQuery：

```
$('#contactBtn').click(function(){
    $('#contact-form').css('top', 0).toggle('display');
}); 
```

正如您可能已经猜到的那样，这会导致元素从左上角滑入，而不仅仅是从顶部滑入（因为当元素“不显示”时，它没有宽度）。

确保过渡仅针对元素的高度而不是宽度的最佳方法是什么？它需要从 top:-20 开始，因为它附加到出现在页面中间的导航栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:41:48.083

你可以试试

```
$("#contact-form").slideToggle(); 
```

也许这个例子会有所帮助：http: [//jsfiddle.net/dJS4g/](http://jsfiddle.net/dJS4g/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:42:46.610

看看这是否可以使您的工作。

```
div
{
visibility:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:44:32.407

[http://codepen.io/jsdev/pen/nrKBi](http://codepen.io/jsdev/pen/nrKBi)

```
$('#contactBtn').click(function(){
  $('#contact-form').css({
    top: 0,
    height: ''
  });
});

$('#closeContactBtn').click(function(){
    $('#contact-form').css({
      top: '',
      height: 0
    });
}); 
```

您不需要在表单上设置宽度 100%

# android - 在android中流式传输音频时连接所花费的时间？

> ID：16117011
> 
> 赞同：0
> 
> 时间：2013-04-20T05:34:13.797
> 
> 标签：android, android-mediaplayer, audio-streaming, shoutcast

我在 android 应用程序中使用简单的音频流，如下所示：

```
 try   {
    MediaPlayer media = new MediaPlayer();
    media.setAudioStreamType(AudioManager.USE_DEFAULT_STREAM_TYPE);
    media.setDataSource("http://indiespectrum.com:9000");
    media.prepare();
    media.start();

}
catch(Exception e)
{
    //Getting Exception
} 
```

我在哪里使用四个不同的 URL。当我开始播放广播时，需要一段时间才能开始播放。有时需要 5-6 秒，有时大约需要 40-45 秒才能开始播放广播。我只是想知道我是否可以加快这些时间。由于所有这些使用 Shoutcast 无论如何我都可以加快连接速度，或者它取决于某种比特率或其他东西。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:41:41.880

加快速度的一种方法是利用 UIMain 线程并使用[AsyncTask](https://www.google.com.cu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://developer.android.com/reference/android/os/AsyncTask.html&ei=HSpyUbmuD4KrPJ7ogPgO&usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&bvm=bv.45512109,d.ZWU)进行音频流处理，这样可以正确且轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

# java - return 语句后如何从 ArrayList 中删除索引？

> ID：16117012
> 
> 赞同：2
> 
> 时间：2013-04-20T05:34:18.000
> 
> 标签：java

我在课堂实验室工作，遇到了一些麻烦。我们被要求编写一个带有以下说明的方法：

“Dog getRandomDog() - 随机选择一条狗，将其返回，然后将其从狗舍中移除。如果没有狗，则返回 null。”

这是我写的方法（不起作用）：

```
public Dog getRandomDog(){
    if(dogs.size() >= 0){
        Random random = new Random();
        int index = random.nextInt(dogs.size());
        return dogs.get(index);
        dogs.remove(index);
   }
    else {
    return null;
   }
} 
```

我明白你不能在返回后有一个可执行的语句，但是你该怎么做呢？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:37:28.763

我来自一个老派的思想*一进一出*

```
public Dog getRandomDog(){
    Dog dog = null;
    if(dogs.size() >= 0){
        Random random = new Random();
        int index = random.nextInt(dogs.size());
        dog = dogs.remove(index);
    }
    return dog;
} 
```

这基本上意味着您允许方法的一个入口点（Java 中的一点静音）和一个出口点（或一个`return`）。这使该方法更易于理解，因为您无需担心该方法在中途退出。当该方法可以运行多个屏幕长度时真的很痛苦......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:35:35.583

之后`return`代码不会运行

```
return dogs.get(index);
dogs.remove(index);  // <--- This will not execute after return 
```

尝试`return`结果`remove`：

```
return dogs.remove(index); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T05:37:05.237

dog.remove(index) 本身将删除索引处的 Dog 对象并将其返回。

```
return dogs.remove(index) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:35:42.990

您需要在return语句之前删除

```
 public Dog getRandomDog(){
    Dog d = null;
    if(dogs.size() >= 0){
        Random random = new Random();
        int index = random.nextInt(dogs.size());
        d = dogs.remove(index);
    }
    return d;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T05:45:01.517

除了上面的大多数答案之外，这也将起作用

```
public Dog getRandomDog(){
if(!dogs.isEmpty()){
    Random random = new Random();
    int index = random.nextInt(dogs.size());
    try{
    return dogs.get(index);
    }finally{
    dogs.remove(index);
   }
}
 else {
  return null;
 }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T06:16:27.487

我投票支持@MadProgrammer。

```
public Dog getRandomDog() {
    return dogs.isEmpty() ?
        null : dogs.remove(new Random().nextInt(dogs.size()));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-20T05:39:30.680

如果 dog 是一种类型的集合在调用 remove 时返回对象本身，您可以简单地执行以下操作：

int index = random.nextInt(dogs.size()); 返回 dog.remove(index);

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-20T05:41:58.083

最紧凑的版本是：

```
Dog d = dogs.remove(getRandomDog());  

public Dog getRandomDog()  {  
    return dogs.size() > 0 ?  dogs.get((int)(Math.random()*dogs.size())) : null;  
} 
```

# perl - 使 sed 不按行缓冲

> ID：16117015
> 
> 赞同：4
> 
> 时间：2013-04-20T05:34:45.740
> 
> 标签：perl, unix, io, sed, stdio

我并不是要阻止 sed 进行块缓冲！我希望它甚至没有行缓冲区。

我不确定这是否可能。

基本上，从原始伪终端与它们交互时的行为`sed`和行为之间存在很大差异：当它通过 STDIN 接收插入的字符时，会立即吐回插入的字符，而即使在原始模式下也不会。`cat``cat``sed`

可以进行一个思想实验：给定一个简单的 sed 命令，例如`s/abc/zzz/g`，向 sed 发送输入流`123ab`意味着`sed` *充其量*可以提供超过标准输出的字符`123`，因为它*还不知道*a`c`是否会到达并导致结果string to be `123zzz`，而任何其他字符都会让它准确打印进来的内容（如果你愿意的话，允许它“赶上”）。所以在某种程度上很明显为什么`cat`会立即响应；它负担得起。

所以当然这就是它在理想世界中`sed`的工作方式，在这个世界中，作者实际上关心这种用例。

我怀疑情况并非如此。实际上，通过我不太详尽的方法，我看到`sed`无论如何都会行缓冲（这使得它总是能够确定是否打印 3 z），除非你告诉它你关心匹配您的正则表达式过去/超过换行符，在这种情况下，它只会在提供任何输出之前缓冲整个该死的东西。

我理想的解决方案是找到一个`sed`能够吐出它已经完成解析的*所有*文本，而无需等到行尾才这样做。在我上面的小例子中，它会立即吐出字符`1`, `2`, 和`3`, 而在输入`a`and `b`（输入）时，它什么也没说，直到`c`看到 a （打印`zzz`）或`X`看到任何其他字符，在这种情况下`abX`被打印，或者在 EOF 的情况下`ab`被打印。

我是索尔吗？我应该只是用我想要的功能逐步实现我的 Perl 代码，还是有机会通过某种配置获得这种神奇的美味功能？

有关我为什么想要这个的更多详细信息，请参阅[我的另一个问题。](https://stackoverflow.com/questions/16114749/regular-expression-incremental-parsing)

因此，一个潜在的解决方法是手动建立输入组以在调用之间“拆分” `sed`（或者在我的情况下，因为我已经在处理 Perl 脚本，perl 的正则表达式替换运算符），以便我可以手动执行冲洗。但这无法达到相同水平的响应能力，因为它需要我仔细考虑表达式来描述“缓冲”发生的点，而不是让正则表达式解析器自动完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T20:47:12.630

有一个工具可以将输入流与多个正则表达式并行匹配，并在确定匹配后立即执行。这不是 sed。是莱克斯。或者 GNU 版本，flex。

为了使这个演示工作，我必须定义一个`YY_INPUT`宏，因为 flex 默认是行缓冲输入。即使在`stdio`级别没有缓冲，即使在“交互”模式下，也有一个假设是您不希望一次处理少于一行。

所以这可能不能移植到其他版本的 lex。

```
%{
#include <stdio.h>

#define YY_INPUT(buf,result,max_size) \
   { \
   int c = getchar(); \
   result = (c == EOF) ? YY_NULL : (buf[0] = c, 1); \
   }
%}

%%

abc  fputs("zzz", stdout); fflush(stdout);
.    fputs(yytext, stdout); fflush(stdout);

%%

int main(void)
{
  setbuf(stdin, 0);
  yylex();
} 
```

用法：将该程序放入一个名为`abczzz.l`并运行的文件中

```
flex --always-interactive -o abczzz.c abczzz.l
cc abczzz.c -ll -o abczzz
for ch in a b c 1 2 3 ; do echo -n $ch ; sleep 1 ; done | ./abczzz ; echo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T18:27:53.613

您实际上可以在 sed 中编写整个程序。这是一种将整个文件放入编辑缓冲区的方法。我添加了 -n 来抑制打印和 $p 所以它只会在最后打印缓冲区，在我切换我一直在用我正在编辑的当前缓冲区建立的保持空间之后。

```
 sed -n 'H;$x;$p' FILENAME 
```

您可以根据遇到的模式有条件地建立保持空间：

```
'/pattern/{H}' 
```

您也可以有条件地打印缓冲区

```
'/pattern/{p}' 
```

如果你觉得很有趣，你甚至可以嵌套这些条件块。

您可以使用 `g' 的组合（将保留空间复制到模式空间，从而覆盖它），然后使用 s/(.).*/\1/ 等来获取单个字符。

我希望这至少能提供信息。我建议你用不同的语言编写一个工具。

# matlab - 是否可以从我的代码中删除 for 循环？

> ID：16117018
> 
> 赞同：2
> 
> 时间：2013-04-20T05:35:05.603
> 
> 标签：matlab, vectorization

我想从我的代码中删除嵌套的 for 循环？我无法删除它们。

```
k = 3;    
Data = rand(100,5);    
m = zeros(size(Data));    
N = size(Data,2); % number of features
M = size(Data,1); % number of objects
bound = zeros(N,k+1);

MAX = max(Data);
MIN = min(Data);

for ii = 1:N
    bound(ii,:) = linspace(MIN(ii), MAX(ii), k+1);
end

bound(:,end) = bound(:,end)+eps;

tic;
for ii = 1:M
    for jj=1:N
        for kk=1:k
            if bound(jj,kk)<=Data(ii,jj) && Data(ii,jj)<bound(jj,kk+1)
                m(ii,jj) = kk;
            end
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:38:38.857

另一种选择是`histc()`，它是专门为装箱而设计的：

```
for jj = 1:N
   [~, m(:,jj)] =  histc(Data(:,jj),bound(jj,:));
end 
```

该解决方案与此解决方案相当，`bsxfun()`但它不是一个非常有意义的比较，因为这里的循环是跨列的，而 bsxfun 是跨界的。因此，根据经验，`histc()`如果我的列数少于边界，我会选择，否则`bsxfun()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:20:21.307

您可以取消嵌套达到一定的限制。

乍一看，由于`jj`索引在嵌套循环内的操作中似乎是统一的，您可以替换

```
for ii = 1:M
    for jj=1:N
        for kk=1:k
            if bound(jj,kk)<=Data(ii,jj) && Data(ii,jj)<bound(jj,kk+1)
                m(ii,jj) = kk;
            end
        end
    end
end 
```

通过简单

```
for ii = 1:M
    for kk=1:k
        m(ii,(bound(:,kk)<=Data(ii,:)' & Data(ii,:)'<bound(:,kk+1))) = kk;
    end
end 
```

这将为您提供与以前完全相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T13:27:51.153

由于您最长的循环结束了`ii=1:M`，我们应该优先考虑将这个向量化为其他循环。最小的循环已经结束，`kk=1:k`所以这个循环可能会留下来而不用担心太多。您可以`bsxfun`在这种矢量化中使用到很好的效果：

```
for kk = 1:k
    ind = bsxfun(@le, bound(:, kk)', Data) & bsxfun(@gt, bound(:, kk+1)', Data);
    m(ind) = kk;
end 
```

这给出了与上述代码相同的结果。

# javascript - XMLHttpRequest 无法加载文件。Access-Control-Allow-Origin 不允许 Origin null

> ID：16117030
> 
> 赞同：1
> 
> 时间：2013-04-20T05:36:35.290
> 
> 标签：javascript, jquery

```
 $.getJSON('test1.json', function(data) 
  {
  for (i in data.conferences) {
  var item = data.conferences[i];
  array1.push({
  cid:item.id,
  confName: item.cname,
  confStart:item.start
  }); }
}); 
```

我使用该函数将值从 java 获取到 jquery。在 chrome 和 opera 中显示相同的错误，但它适用于 IE 和 mozilla。
请给我一个解决方案。

> XMLHttpRequest 无法加载 file:///C:/Users/winnova1/Desktop/tree/conferences/test1.json。Access-Control-Allow-Origin 不允许 Origin null。
> 未捕获的类型错误：无法读取 null 的属性“会议”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:40:40.213

出于安全原因，您不能在 Chrome 和 Opera 上使用它`XMLHttpRequest`来加载本地文件。
您必须在 Web 服务器上运行它，即使该 Web 服务器运行在`localhost`.

# c# - Tweetsharp HTTP 403

> ID：16117034
> 
> 赞同：2
> 
> 时间：2013-04-20T05:36:57.343
> 
> 标签：c#, asp.net, twitter, twitterizer

我在使用 ASP.NET 4 C# 和 Twitterizer 登录 Twitter 时遇到问题。首先，我创建 TwitterService 对象

```
TwitterService Service = new TwitterService(key , secret); 
```

然后请求令牌：

```
OAuthRequestToken requestToken = Service.GetRequestToken(
                    "http://127.0.0.1:16608/CallbackHandlers/TwitterCallback.ashx"); 
```

然后获取uri：

```
Uri uri = Service.GetAuthorizationUri(requestToken); 
```

并重定向：

```
HttpContext.Current.Response.Redirect(uri.ToString()); 
```

我的应用程序被重定向到 Twitter。当我输入我的用户 ID 和密码时，我收到 HTTP 403 错误。如果我按下浏览器上的后退按钮，Twitter 不再要求我输入 USERID 和 PWD，而是只有授权按钮。当我按下授权按钮时，Twitter 会重定向回我的网站，一切都按预期进行。

如果没有收到 403 错误，我似乎无法成功输入 USERID 和 PWD。当我收到错误时，浏览器地址显示：-

*[https://api.twitter.com/oauth/authorize](https://api.twitter.com/oauth/authorize)*

请注意，回调 URL 是我的 twitter 应用程序设置与上面的 GetRequestToken 调用中的设置相同。

似乎 Twitter 不知道下一步该去哪里！！！。

任何援助都将受到极大的欢迎。

罗伯特。

# c# - C#中的正则表达式替换

> ID：16117043
> 
> 赞同：44
> 
> 时间：2013-04-20T05:37:39.543
> 
> 标签：c#, regex

我对使用正则表达式还很陌生，并且根据我读过的一些教程，我无法在 Regex.Replace 中正确格式化这一步。

这是我正在处理的场景...当我从列表框中提取数据时，我想将其格式化为类似[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)的格式，然后保存文件。使用替换选项是这种情况的理想解决方案吗？

在正则表达式格式化示例之前。

```
FirstName LastName Salary    Position
-------------------------------------
John      Smith    $100,000.00  M 
```

正则表达式替换后的建议格式

```
John Smith,100000,M 
```

当前格式化状态输出：

```
John,Smith,100000,M 
```

*注意 - 有没有办法可以用空格替换第一个逗号？

我的代码片段

```
using(var fs = new FileStream(filepath, FileMode.OpenOrCreate, FileAccess.Write))
{
    using(var sw = new StreamWriter(fs))
    {
        foreach (string stw in listBox1.Items)
        {
            StringBuilder sb = new StringBuilder();
            sb.AppendLine(stw);

            //Piecing the list back to the original format
            sb_trim = Regex.Replace(stw, @"[$,]", "");
            sb_trim = Regex.Replace(sb_trim, @"[.][0-9]+", "");
            sb_trim = Regex.Replace(sb_trim, @"\s", ",");
            sw.WriteLine(sb_trim);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-20T05:50:34.407

你可以用两个替换来做到这一点

```
//let stw be "John Smith $100,000.00 M"

sb_trim = Regex.Replace(stw, @"\s+\$|\s+(?=\w+$)", ",");
//sb_trim becomes "John Smith,100,000.00,M"

sb_trim = Regex.Replace(sb_trim, @"(?<=\d),(?=\d)|[.]0+(?=,)", "");
//sb_trim becomes "John Smith,100000,M"

sw.WriteLine(sb_trim); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-20T05:57:04.333

尝试这个：：

```
sb_trim = Regex.Replace(stw, @"(\D+)\s+\$([\d,]+)\.\d+\s+(.)",
    m => string.Format(
        "{0},{1},{2}",
        m.Groups[1].Value,
        m.Groups[2].Value.Replace(",", string.Empty),
        m.Groups[3].Value)); 
```

至少对于正则表达式，这与您将获得的答案一样干净。

*   `(\D+)`: 第一个捕获组。一个或多个非数字字符。
*   `\s+\$`: 一个或多个空格字符，然后是文字美元符号 ($)。
*   `([\d,]+)`: 第二个捕获组。一位或多位数字和/或逗号。
*   `\.\d+`：小数点，然后至少一位数字。
*   `\s+`: 一个或多个空格字符。
*   `(.)`: 第三个捕获组。任何非换行符。

第二个捕获组还需要去掉逗号。您可以使用另一个正则表达式来执行此操作，但这确实是不必要的并且对性能不利。这就是为什么我们需要使用 lambda 表达式和字符串格式来拼凑替换。如果不是这样，我们可以用它来代替 lambda 表达式：

```
"$1,$2,$3" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T05:52:26.540

添加以下 2 行

```
var regex = new Regex(Regex.Escape(","));
sb_trim = regex.Replace(sb_trim, " ", 1); 
```

如果 sb_trim= **John,Smith,100000,M**上面的代码将返回 "John Smith,100000,M"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-03T11:14:21.677

这必须完成工作：

```
var result=Regex.Replace("John      Smith    $100,000.00  M", @"^(\w+)\s+(\w+)\s+\$([\d,\.]+)\s+(\w+)$","$1,$2,$3,$4");

//result: "John,Smith,100,000.00,M" 
```

# python - 即使在互联网连接断开后也保持脚本运行

> ID：16117044
> 
> 赞同：0
> 
> 时间：2013-04-20T05:37:52.047
> 
> 标签：python, shell, python-2.7, putty

我在一台服务器上安装了 putty，并在该服务器上运行了一个可用的 python 脚本。该脚本继续在终端上抛出输出。后来，我的互联网连接断开了，但即便如此，我还是希望我的脚本能够完成它的工作，因为脚本正在该服务器上运行。但是当互联网连接恢复时，我发现脚本没有完成它的工作。
这是预期的吗？如果是，那么即使互联网连接中断，如何确保脚本在服务器上运行？

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:50:34.540

您应该使用[screen](http://www.thegeekstuff.com/2010/07/screen-command-examples/)让您从您所在的实际终端“分离”您的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:53:05.677

在服务器上，您可以安装`tmux`或筛选。这些程序在后台运行程序并使您能够打开一个“窗口”，如果我使用 tmux：

**打开 tmux：** `tmux`

**分离（在后台运行）：**按 Ctrl-b d

**重新附加（打开一个“窗口”）：** `tmux attach`

# python - 使用 celery (Broker redis) 在 django 中实现 zeromq 发布者

> ID：16117047
> 
> 赞同：4
> 
> 时间：2013-04-20T05:38:05.163
> 
> 标签：python, django, celery, zeromq, django-celery

我需要在 django 和 celery 中使用 redis 作为代理来实现 zmq 发布者。但我的客户没有收到任何东西。

**任务.py**

```
 from celery import task
  import zmq

  try:
      context = zmq.Context()
      publisher = context.socket(zmq.PUB)
      publisher.bind('tcp://192.168.0.14:9997')
  except:
      pass

  def app_delivery():
      publisher.send("testid : I am a task ")
      return "Passed"
  @task.task(ignore_result=True)
  def add():
      print "I am going to push message "
      return app_delivery() 
```

**视图.py**

```
from django.http import HttpResponse
from notification_core.tasks import add

def resp(request):
    param = request.GET.get('param')
    param = int(param)
    i=0
    while i<param:
        add.delay()
        i+=1
    return HttpResponse("Done") 
```

**然后使用命令运行工人——**

```
python manage_back.py celery worker --loglevel=info 
```

**工人控制台输出**

```
[2013-04-20 10:37:06,400: WARNING/PoolWorker-2] I am going to push message
[2013-04-20 10:37:06,400: INFO/MainProcess] Task notification_core.tasks.add[6d44bb48-799e-43dc-af3e-278c0db732c4] succeeded in 0.000511169433594s: 'Passed'
[2013-04-20 10:37:06,575: INFO/MainProcess] Got task from broker: notification_core.tasks.add[8a787b31-5375-4c05-9ddc-2fc66b54ee19]
[2013-04-20 10:37:06,575: WARNING/PoolWorker-3] I am going to push message
[2013-04-20 10:37:06,576: INFO/MainProcess] Task notification_core.tasks.add[8a787b31-5375-4c05-9ddc-2fc66b54ee19] succeeded in 0.000941038131714s: 'Passed'
[2013-04-20 10:37:06,751: INFO/MainProcess] Got task from broker: notification_core.tasks.add[d73ebcdf-9765-43f6-823a-ad03881afa50]
[2013-04-20 10:37:06,752: WARNING/PoolWorker-4] I am going to push message
[2013-04-20 10:37:06,752: INFO/MainProcess] Task notification_core.tasks.add[d73ebcdf-9765-43f6-823a-ad03881afa50] succeeded in 0.000416040420532s: 'Passed' 
```

**zmq_client 文件**

```
import zmq
context = zmq.Context()

subscriber = context.socket(zmq.SUB)
subscriber.connect('tcp://192.168.0.14:9997')
subscriber.setsockopt(zmq.SUBSCRIBE, "testid")
while True:
    message = subscriber.recv()
    print "=========="
    print message
    print "==========" 
```

我在客户端没有得到任何输出，需要一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T18:19:09.260

你是先启动你的客户吗？通常，您希望在 PUB 之前启动 SUB。此外，您可能会发现使用信封很有帮助，尽管在这里看起来有点矫枉过正。

[http://zguide.zeromq.org/page%3aall#Pub-Sub-Message-Envelopes](http://zguide.zeromq.org/page%3aall#Pub-Sub-Message-Envelopes)

如果您不只是像前面提到的那样简单地吃一个相关的例外，希望这能给我们一些帮助。

# java - 我可以使用在 Java 中的数组中调用的方法的参数吗

> ID：16117051
> 
> 赞同：1
> 
> 时间：2013-04-20T05:38:26.487
> 
> 标签：java, arrays, methods, parameters

这是在`main()`方法中：

```
Movie[] list = new Movie[6];

list[0] = new Animated(.25, 700.000, "Mulan", "Barry Cook", 1998, 15.000);
list[1] = new Animated(.23, 45.000, "TMNT", "Steve Barron", 1990, 12.000);
list[2] = new Documentary(12, 7.000, "Nixon", "Oliver Stone", 1995, 50.000);
list[3] = new Documentary(10, 4.500, "JFK", "Oliver Stone", 1991, 35.000);
list[4] = new Drama(3.500, 8.25, "Belly", "Hype Williams", 1998, 20.000);
list[5] = new Drama(4.500, 9.00, "42", "Brian Helgeland", 2013, 16.000);

System.out.print(menu());
System.out.print("Select and menu option 1-5: ");
choice = input.nextInt();
do
{
    switch(choice)
    {
        case 1: movieList(list);
        break; 
```

我正在调用`movieList(list)`外部类中存在的方法`main`：

```
public static void movieList(Movie[] a)
{
    System.out.printf("\n\n%-10s %-10s %-10s %-10s %-10s", "TITLE", "YEAR",
    "REVENUE", "PROFIT", "CATEGORY");
    System.out.printf("\n\n%-10s", Movie[0].getTitle());
} 
```

这是我正在调用的方法`case 1`，我一直在尝试使用一个参数，但我在 Movie 上的指针出现“找不到符号”错误。我一直在寻找，我开始认为我不能以这种方式访问​​这个值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T05:41:06.423

`Movie[]`方法中参数的名称`movieList`是`a`，因此请尝试使用`a[0].getTitle()`而不是`Movie[0].getTitle()`。方法中的参数总是通过它的名字来访问，而不是它的类型。

# jquery - 返回 false 在 jquery 中不起作用需要字段验证

> ID：16117057
> 
> 赞同：0
> 
> 时间：2013-04-20T05:39:18.613
> 
> 标签：jquery

我有一个下拉列表（.color）要使用 jquery 进行验证。这个下拉列表的默认值是**VÆLG**。我想在锚标记单击（.viewmore）中验证它。我的代码是这样的

```
 $(".viewmore").on('click',function(event){
      requiredValidation($(this).parents('.box01').find(".color"));

      });

         function requiredValidation(ddl) {

    ddl = $(ddl);

    var isValid = true;
    if (jQuery.trim(ddl.val()) == 'VÆLG' ) {
        isValid = false;
        ddl.addClass("error");

    }
    else {
        ddl.removeClass("error");
    }
   alert(isValid)
    return isValid;
} 
```

最后警报消息我得到的值是**false**正确。但页面仍然重定向到锚标记的给定 url。谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:42:06.720

您的 onclick 方法没有返回 true 或 false。试试这个：

```
 $(".viewmore").on('click',function(event){
      return requiredValidation($(this).parents('.box01').find(".color"));

  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:42:47.660

试试这个

```
return requiredValidation($(this).parents('.box01').find(".color")); 
```

# database - GridView 和超链接

> ID：16117058
> 
> 赞同：0
> 
> 时间：2013-04-20T05:39:21.433
> 
> 标签：database, vb.net, gridview, hyperlink

我是 VB 和一般编程的新手，但是，我目前正在尝试开发一个简单的应用程序，您可以在其中添加每日记录并将其保存到数据库中。数据库表中的一列将用于输入我计算机中文件的路径/目录（例如 C:\Users\M\Documents）。当我输入文件位置并运行应用程序时，列内容被视为文本而不是超链接。有人可以解释如何将指定列中的文本转换为超链接（可点击）吗？

![在此处输入图像描述](https://i.stack.imgur.com/OAs0v.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:16:21.770

有一个列类型 DataGridViewLinkColumn，但您不能在运行时在 DataGridView 中编辑单元格内容（仅来自源代码）。

另一种解决方案：

*   使用 DataGridViewTextBoxColumn 列类型。

*   链接样式：您可以使用单元格 DefaultCellStyle 属性来制作蓝色文本。

*   鼠标图标：当鼠标悬停在链接列上时，您可以处理 DataGridView 的 CellMouseEnter 事件来更改 DataGridView.Cursor 属性。

*   使用 DataGridView 的 CellClick 或 CellContentClick 事件，您可以处理点击链接。

# c# - 组标题 Crystal 报表中详细信息的总和

> ID：16117065
> 
> 赞同：6
> 
> 时间：2013-04-20T05:39:55.490
> 
> 标签：c#, visual-studio, crystal-reports, crystal-reports-2008

我正在 ASP.NET/C# 网站中生成水晶报告。我需要组标题中的分组总和，当我添加 SUM 字段（运行总计字段）显示记录的第一个条目时，有没有办法在同一组的标题中详细显示所有记录的总数?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-20T18:34:30.017

由于评估方式的原因，运行总计不适用于组标题部分。相反，您可以只使用常规摘要函数并将其放在组标题中。您可以通过右键单击要汇总的字段，选择“插入”，然后选择“汇总”或创建公式来执行此操作：

`sum({table.field_to_summarize},{table.field_you_are_grouping_on})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:04:51.077

使用子报表并链接它们并在子报表中显示该组的总和。将您的子报表放在主报表的组标题中
从数据库设计一个查询并在需要的字段中获取组的总和。
例如：按 GID 从客户组中选择 GId,Sum(Salary) 作为 SSalary

并通过右键单击在主报告中创建子报告，然后选择插入和子报告->选择上一步数据集->接下来，您必须将它们与组 ID 链接起来，并且在填充报告中，您必须用足够的数据填充主报告的子报告 [0]从他的数据集中获取详细信息，请参阅[子报告](http://publib.boulder.ibm.com/infocenter/iadthelp/v7r0/index.jsp?topic=/com.businessobjects.integration.eclipse.designer.doc/designer/Subreports9.html)

# android - 如何从服务器下载文件并将其保存在 Android 中 SD 卡的特定文件夹中？

> ID：16117067
> 
> 赞同：24
> 
> 时间：2013-04-20T05:39:59.883
> 
> 标签：android, android-input-method, android-download-manager

我的 Android 应用程序有一个要求。我需要以编程方式下载文件并将其保存在 SD 卡的特定文件夹中。我已经开发了源代码，即

```
String DownloadUrl = "http://myexample.com/android/";
     String fileName = "myclock_db.db";

    DownloadDatabase(DownloadUrl,fileName);

    // and the method is

public void DownloadDatabase(String DownloadUrl, String fileName) {
    try {
        File root = android.os.Environment.getExternalStorageDirectory();
        File dir = new File(root.getAbsolutePath() + "/myclock/databases");
        if(dir.exists() == false){
             dir.mkdirs();  
        }

        URL url = new URL("http://myexample.com/android/");
        File file = new File(dir,fileName);

        long startTime = System.currentTimeMillis();
        Log.d("DownloadManager" , "download url:" +url);
        Log.d("DownloadManager" , "download file name:" + fileName);

        URLConnection uconn = url.openConnection();
        uconn.setReadTimeout(TIMEOUT_CONNECTION);
        uconn.setConnectTimeout(TIMEOUT_SOCKET);

        InputStream is = uconn.getInputStream();
        BufferedInputStream bufferinstream = new BufferedInputStream(is);

        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
        int current = 0;
        while((current = bufferinstream.read()) != -1){
            baf.append((byte) current);
        }

        FileOutputStream fos = new FileOutputStream( file);
        fos.write(baf.toByteArray());
        fos.flush();
        fos.close();
        Log.d("DownloadManager" , "download ready in" + ((System.currentTimeMillis() - startTime)/1000) + "sec");
        int dotindex = fileName.lastIndexOf('.');
        if(dotindex>=0){
            fileName = fileName.substring(0,dotindex);

    }
    catch(IOException e) {
        Log.d("DownloadManager" , "Error:" + e);
    }

} 
```

现在问题只是文件名 myclock_db.db 的空文件保存在路径中。但我需要下载文件内容并将其保存在特定文件夹中。尝试了几种方法来获取文件下载，但我不能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-20T05:50:29.933

您的下载 URL 不是任何文件的链接。这是一个目录。确保它是一个文件并且存在。还要检查您的 logcat 窗口中的错误日志。还有一个建议，在 catch 块而不是 Logs 中执行 printStackTrace() 总是更好。它提供了错误的更详细视图。

更改此行：

```
 URL url = new URL("http://myexample.com/android/"); 
```

至：

```
 URL url = new URL("http://myexample.com/android/yourfilename.txt"); //some file url 
```

接下来，在 catch 块中，添加以下行：

```
e.printStackTrace(); 
```

同样在目录路径中，它应该是这样的：

```
File dir = new File(root.getAbsolutePath() + "/mnt/sdcard/myclock/databases"); 
```

代替

```
File dir = new File(root.getAbsolutePath() + "/myclock/databases"); 
```

接下来，确保您已获得在 Android 清单中写入外部存储的权限。

# c# - 三元运算符中的意外行为

> ID：16117068
> 
> 赞同：4
> 
> 时间：2013-04-20T05:40:01.747
> 
> 标签：c#, .net

当我将 if-else 更改为返回语句的三元运算符时，我遇到了一种奇怪的行为。

我在这里简化了代码：

```
class Foo
{
    private bool condition;
    private int intValue = 1;
    private decimal decimalValue = 1M;

    public object TernaryGet
    {
        get
        {
            return condition ? decimalValue : intValue;
        }
    }

    public object IfElseGet
    {
        get
        {
            if (condition)
                return decimalValue;
            return intValue;
        }
    }

    public Foo(bool condition)
    {
        this.condition = condition;
    }
}

class Program
    {
        static void Main(string[] args)
        {
            var fooTrue = new Foo(true);
            var fooFalse = new Foo(false);

            Console.WriteLine("{0}, {1}", fooTrue.TernaryGet.GetType(), fooTrue.IfElseGet.GetType());
            Console.WriteLine("{0}, {1}", fooFalse.TernaryGet.GetType(), fooFalse.IfElseGet.GetType());
        }        
    } 
```

输出是：

```
System.Decimal, System.Decimal
System.Decimal, System.Int32 
```

我希望第二行在两个 getter 上都输出 Int32，但是对于三元组，我为 int 得到了不正确的 CLR 类型。

别管代码和它试图做什么——我很好奇为什么会这样，所以如果有人能解释一下，我会很感激的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T05:43:25.300

三元（条件）运算符的结果始终是单一类型 - 一个/两个选项被强制转换为通用类型：

```
var result = condition ? decimalValue : intValue; 
```

类型`result`必须在编译时静态知道。由于存在从`int`to类型转换`decimal`，`decimal`因此选择类型作为整个`? :`运算符的类型。

所以你的整个函数可以写成（显示自动转换）：

```
public object TurnaryGet
{
    get
    {
        /*decimal*/ var result = condition ? decimalValue : (decimal)intValue;
        return (object)result;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T05:46:58.167

```
condition ? decimalValue : intValue; 
```

方法

```
condition ? decimalValue : (decimal) intValue; 
```

试试这个是否可行：（我对 C# 很陌生，但在 Java 中可以使用）

```
condition ? (object) decimalValue : (object) intValue; 
```

# joomla2.5 - 通过 POST 发送数据的 Joomla 简单文本区域

> ID：16117073
> 
> 赞同：0
> 
> 时间：2013-04-20T05:40:39.877
> 
> 标签：joomla2.5

我正在开发我的 Joomla！2.5 组件。

通过管理区域传递的用户名和密码，它可以连接到通过 XML 发送信息的网络服务器。

我可以毫无问题地在前端的任何部分显示这个组件。

现在我需要在最终用户的前端插入一个文本区域，用户可以在其中插入一个值（例如，他们的卡号[它是一个忠诚度组件]），并且这个值必须传递给前一个组件。

ATM 我不需要 AJAX 调用，页面可以刷新。

所以处理它必须 textarea => 插入数据 => 按提交 => 显示组件结果（页面刷新，没问题）。

我需要开发一个插件吗？我需要“扩展”组件？在网上看到了几个主题，但我没有找到任何显示（我认为）像我这样简单的案例。

我需要你的帮助，才能走上正确的道路。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:21:07.620

在您的主控制器文件中，您可以访问帖子并获取值，所以

您要放置输入的位置：只需创建一个指向您的组件的表单，并使用适当的

```
<form action="index.php?option=com_yourcomp" method="get"
  <input type="text" name="your_text_input"... 
```

添加您需要的所有额外字段。

在 com_yourcomp 的 controller.php 中，您将能够访问用户数据

JRequest::getVar('your_text_input') 或您喜欢的 jInput。

关于 method="get" 的注意事项：如果您希望您的用户能够为页面添加书签或者您计划在您的组件中进行重定向，则可以这样做。用户输入必须限制为最多几千个字符。否则使用 post，这真​​的取决于你的需要。

# android - java.lang.UnsatisfiedLinkError: debugLevel

> ID：16117075
> 
> 赞同：2
> 
> 时间：2013-04-20T05:40:47.593
> 
> 标签：android, unsatisfiedlinkerror

好吧，我一直在左右浏览帖子试图找出这个错误..我已经设法修复了一些错误，但这只是让我发疯..它几乎没有信息..或者至少没有对我来说有任何意义。

```
 D/dalvikvm(431): Trying to load lib /data/data/com.hyperlinkup.manglerbt/lib/libventrilo_interface.so 0x405156c8
D/dalvikvm(431): Added shared lib /data/data/com.hyperlinkup.manglerbt/lib/libventrilo_interface.so 0x405156c8
D/dalvikvm(431): No JNI_OnLoad found in /data/data/com.hyperlinkup.manglerbt/lib/libventrilo_interface.so 0x405156c8, skipping init
D/dalvikvm(431): GC_EXTERNAL_ALLOC freed 61K, 53% free 2565K/5379K, external 1027K/1038K, paused 89ms
W/dalvikvm(431): No implementation found for native Lcom/hyperlinkup/manglerbt/VentriloInterface;.debuglevel (I)I
D/AndroidRuntime(431): Shutting down VM
W/dalvikvm(431): threadid=1: thread exiting with uncaught exception (group=0x40015560)
E/AndroidRuntime(431): FATAL EXCEPTION: main
E/AndroidRuntime(431): java.lang.UnsatisfiedLinkError: debuglevel
E/AndroidRuntime(431):  at com.hyperlinkup.manglerbt.VentriloInterface.debuglevel(Native Method)
E/AndroidRuntime(431):  at com.hyperlinkup.manglerbt.ServerList.onCreate(ServerList.java:96)
E/AndroidRuntime(431):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(431):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
E/AndroidRuntime(431):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
E/AndroidRuntime(431):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(431):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
E/AndroidRuntime(431):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(431):  at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(431):  at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(431):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(431):  at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(431):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(431):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(431):  at dalvik.system.NativeStart.main(Native Method)
I/Process(431): Sending signal. PID: 431 SIG: 9 
```

我正在尝试重新设计 Mangler 应用程序以使用蓝牙录音（通过 startBluetoothSco），但我想确保原件在合并蓝牙功能之前可以正常工作。我将非常感谢我能在这件事上获得的任何帮助。

编辑：想也许我的问题是 jni_wrappers.c .. 前 3 个#include 没有解决.. 原始版本是在 linux 系统上出现的，所以它正在寻找 jni.h、stdint.h 和 ventrilo3.h

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:48:48.927

答案在 Logcat Stacktrace 本身

**未找到本机 Lcom/hyperlinkup/manglerbt/VentriloInterface;.debuglevel (I)ID/AndroidRuntime(431) 的实现：关闭 VM**

中调用`debuglevel`了一个 Native 方法`VentriloInterface`。你还没有实现那个方法。因此，VM 抛出`java.lang.UnsatisfiedLinkError`.

# windows - 在多个服务器上执行 RDP 连接

> ID：16117079
> 
> 赞同：0
> 
> 时间：2013-04-20T05:41:41.467
> 
> 标签：windows, batch-file, mstsc

我们的网络中有数千台 Windows 服务器。对于某种工作，我们需要登录 100 多台服务器。我们正在手动进行。输入服务器名称并提供凭据。是否可以创建批处理文件/脚本，所以这项工作可以自动化。就像我们简单地创建一个文本文件或 csv 并运行脚本一样。脚本可以打开 mstsc 会话并将凭证放入 mstsc。我们可以在脚本中定义用户名和密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:21:41.673

这将为所有服务器启动远程桌面，但您仍然需要输入凭据。您可以通过多种方式实现[单点登录](http://technet.microsoft.com/en-us/library/cc742808.aspx)，但它仅适用于 Windows 2008 和 2008 R2。mstsc 没有任何用户名或密码开关，因此无法编写脚本。因为你不能使用 sendkeys 到远程桌面窗口，所以甚至没有破解它。

创建一个每行一个服务器名称的文件，并将其放在与批处理文件相同的目录中。

创建以下批处理文件

```
@echo off
setlocal

cd /d %~dp0
set file=Servers.txt

for /f %%a in (%file%) do (
    echo mstsc /v:%%a 
) 
```

删除回声以实际启动远程桌面。至少它需要 1 步，并且您始终可以保存您的凭据，因此它不会提示它们，这比将它们放在文件中更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:06:27.930

考虑使用远程桌面管理器-remotedesktopmanager.com，它允许您创建多个预定义的远程桌面，为它们保存不同的rdp设置，并以更方便的方式在桌面之间切换。

此外，当您通过通常的 mstsc 连接时，您可以将其保存为单独的 rdp 文件，并要求它在第一次连接时记住凭据，然后以这种方式存储单独的 rdp 文件。

# android - 如何在android中将布局视图保存为图像或pdf到sd卡？

> ID：16117085
> 
> 赞同：9
> 
> 时间：2013-04-20T05:41:59.580
> 
> 标签：android, android-layout, android-view

在我的应用程序中，我有一个包含客户详细信息的视图，我想将该视图保存为图像或 PDF 到 SD 卡，然后通过第三方应用程序打印该视图（否则可以直接通过打印机打印该视图）。

我不知道如何将视图保存为图像或 PDF。谁能知道请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-20T05:51:57.003

在清单文件中添加权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

使用下面的代码

```
LinearLayout content = findViewById(R.id.rlid);
content.setDrawingCacheEnabled(true);
Bitmap bitmap = content.getDrawingCache();
File file,f;                    
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) 
    {  
         file =new File(android.os.Environment.getExternalStorageDirectory(),"TTImages_cache");
         if(!file.exists())
        {
          file.mkdirs();

         } 
         f = new File(file.getAbsolutePath()+file.seperator+ "filename"+".png");
    }
  FileOutputStream ostream = new FileOutputStream(f);                                   
  bitmap.compress(CompressFormat.PNG, 10, ostream);
  ostream.close();

 } 
 catch (Exception e){
 e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T13:59:53.320

上面的代码可以正常工作，但是由于名称相同，所以图像覆盖，为了避免这个问题，添加以下行：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy_MM_dd_hh_mm_ss");

Date now = new Date();

String fileName = formatter.format(now);

f = new File(file.getAbsolutePath()+file.separator+ "image_"+fileName+".png"); 
```

# android - 运行应用程序时未加载Android按钮背景

> ID：16117090
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:42:45.910
> 
> 标签：android, android-layout, android-button

我在我的主菜单中为其中的四个设置了按钮的背景图像（单独的），它们的大小分别为`640*150`，在可绘制的 hdpi、mdpi`320*75`和`160*38.5`ldpi 文件夹中。

早些时候，我使用 a`100*100`作为所有按钮的背景，它工作正常。

图形布局显示了我所做的更改，但是当我在模拟器或移动设备中运行应用程序时，我得到一个空白背景。

请帮忙。我已经尝试重新安装、清理并在调试中运行，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:06:24.187

明白了..我实际上设置了一个 button_pressed.xml 来改变按钮背景 n 点击它改变了默认的背景配置

# livecode - 如何限制基本表字段的列数？

> ID：16117093
> 
> 赞同：0
> 
> 时间：2013-04-20T05:43:02.213
> 
> 标签：livecode

我有一个基本的表格字段。
我只需要三列，但它显示更多。
如何将其限制为三个？
以及如何设置列的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:22:27.483

如果您有一个名为“Data”的 600 像素宽的字段，其中包含制表符分隔的数据；

```
set the tabStops of field "Data" to "200,400,600" 
```

将设置列宽。600 处的最后一个制表位会将第三列之外的任何内容抛出该字段的可见区域之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:35:06.090

```
set the tabStops of fld "Data" to 100,0,150,0,0 
```

将隐藏第 2 列和第 4、5、6、...、n 列。

如果要隐藏列，请将其宽度设置为 0。如果最后一个参数为 0，则其余列将不可见，并且将缺少最后一个可见列的垂直线。如果您想在最后一个字段之后添加垂直线，请添加额外的 0 [set ... to 100,0,200,0,0]

# python - 使用 SQLAlchemy 和 PostgreSQL 进行烧瓶单元测试会耗尽数据库连接

> ID：16117094
> 
> 赞同：3
> 
> 时间：2013-04-20T05:43:15.793
> 
> 标签：python, unit-testing, sqlalchemy, flask, flask-sqlalchemy

我正在使用 Flask、SQLAlchemy 和 PostgreSQL 运行一套相当简单的测试用例。使用应用程序工厂，我定义了一个基本单元测试类，如下所示：

```
class BaseTestCase(unittest.TestCase):
    def setUp(self):
        self.app = create_app()
        self.app.config.from_object('app.config.test')
        self.api_base = '/api/v1'

        self.ctx = self.app.test_request_context()
        self.ctx.push()

        self.client = self.app.test_client()
        db.create_all()

    def tearDown(self):
        db.session.remove()
        db.drop_all(app=self.app)
        print db.engine.pool.status()
        if self.ctx is not None:
            self.ctx.pop() 
```

一些单元测试一切顺利，直到：

```
OperationalError: (OperationalError) FATAL:  remaining connection slots are reserved for non-replication superuser connections 
```

似乎池中只有 1 个连接（每个测试的 db.engine.pool.status() 显示：池大小：5 池中的连接：1 当前溢出：-4 当前已签出连接：0），但不知何故该应用程序永远不会断开连接。显然，为每个测试用例创建了一个新的应用程序实例，根据文档，这似乎很好。如果我将应用程序创建移动到模块级别，它可以正常工作。

有谁知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T19:22:11.753

Add `db.get_engine(self.app).dispose()` after db.drop_all()

# javascript - 如何根据窗口大小调整 HTML 表格中的行数并按时间间隔交换数据？

> ID：16117099
> 
> 赞同：2
> 
> 时间：2013-04-20T05:43:52.093
> 
> 标签：javascript, html

我有一组要在表格中显示的元组。如果元组的数量超出了窗口的容量，我想缩短表格并只显示那么多元组（行），然后定期交换数据（允许数据显示在投影仪屏幕上例如）。

如果我知道从哪里开始，我可以使用 Javascript 来做这件事，但我没有太多在浏览器中编程的经验。即我什至不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:48:37.093

使用表格宽度和行宽作为百分比，例如，

```
<table width='100%'>
  <tr>
     <td width='10%'></td>
     ..................
  <tr>
</table> 
```

# ios - ios: 比较 NSString 到 " "不工作

> ID：16117101
> 
> 赞同：12
> 
> 时间：2013-04-20T05:44:03.890
> 
> 标签：ios, json, null, nsstring

我正在使用返回**JSON**的 Web 服务。我得到的值之一是`"< null >"`.

当我运行以下代码时，如果不应该执行 if 语句，它仍然会被执行。

有什么理由吗？

```
NSDictionary *location = [dictionary valueForKey:@"geoLocation"];       //get the product name
NSString *latitude = [location valueForKey:@"latitude"];
NSLog(@"%@", latitude);

NSString *longitude = [location valueForKey:@"longitude"];

if (![latitude isEqual: @"<null>"] && ![longitude isEqual: @"<null>"]) {
    NSLog(@"%d", i);
    CLLocationCoordinate2D coordinate;
    coordinate.longitude = [latitude doubleValue];
    coordinate.longitude = [longitude doubleValue];
    [self buildMarketsList:coordinate title:title subtitle:nil]; //build the browse list product
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-20T05:50:09.330

> 我正在使用返回 JSON 的 Web 服务。我得到的值之一是“< null >”

啊哈。两种可能：

一、JSON不包含经纬度信息。在这种情况下，它们的键不存在于您要返回的字典中，因此您实际上正在获取一个`nil`（或`NULL`）指针。当消息`nil`返回零时，两个条件都会触发（由于应用了否定）。试试这个：

```
if (latitude != nil && longitude != nil) 
```

并且**永远不要依赖对象的描述。**

二、可能 JSON 包含`null`值，并且您使用的 JSON 解析器`null`变成`[NSNull null]`，然后您尝试将字符串与该`NSNull`. 在这种情况下，试试这个：

```
if (![latitude isEqual:[NSNull null]] && ![longitude isEqual:[NSNull null]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T05:53:53.900

我有同样的问题，但解决如下，用下面的替换你的，

```
if (![latitude isKindOfClass:[NSNull class]] && ![longitude isKindOfClass:[NSNull class]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:52:33.817

通常，如果您在 JSON 响应中得到 null，则需要检查`NSNull`.

在您的情况下，您应该执行以下操作：

```
if ( [location valueForKey:@"longitude"] == [NSNull null]) {
     // is null object
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T06:10:02.467

```
if ([latitude isEqual:[NSNull null]])
{
 //do something
 latitude = @"";
}
else
{
 //do something else
 latitude = json value
} 
```

这就是我要做的。这是因为即使返回 null，我也需要存储该值。

# jquery - 选择器数组：for 循环与 $.each

> ID：16117105
> 
> 赞同：2
> 
> 时间：2013-04-20T05:44:21.620
> 
> 标签：jquery

给定以下选择器数组（每个都`display: none`在我们的 css 中）和 for 循环：

```
var arr = ['#home', '#news', '#tidy'];

for (i=0;i<=arr.length;i++){
    $(arr[i]).toggle();
} 
```

使用 $.each （大概是 $(this) ）的等价物是什么？

**编辑**

好的，我理解使用加入：

```
var s = arr.join();
$(s).toggle(); 
```

我没有意识到“像许多其他 jQuery 方法一样切换在内部调用每个方法，所以不需要使用每个方法”所以 +1 给你@undefined，但是......

这个问题是最初提出的，因为即使我：

```
$.each(arr, function(){
    $(this).text("my id is " + this + ".");
}); 
```

我收到未定义的（！）错误。（公平地说，有 .toggle 和 .insertAfter 等，我试图简化）为什么以上不等同于：

```
$('#home').text('my id is #home.');
$('#news').text('my id is #news.');
$('#tidy').text('my id is #tidy.'); 
```

?

**编辑 2**

好的，这是一个语法问题 -`$(this)`需要一个前置`'' +`：

```
$('' + this).text('My id is ' + this + '.') 
```

是否有关于何时`$(this)`需要这种治疗的规定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T05:48:07.013

尝试

```
var arr = ['#home', '#news', '#tidy'];
$(arr.join(',')).toggle(); 
```

$(arr.join(',')) => $('#home, #news, #tidy')，它选择所有 3 个元素，然后 toggle() 对所有选择的元素进行操作。

* * *

如果你这样做

```
$.each(arr, function(){
    $(this).text("my id is " + this + ".");
}); 
```

这`this`实际上是一个字符串对象而不是字符串原语，因此您在返回形式中得到的`$(this)`是一个包装字符串对象的 jQuery 对象，而不是选择器将匹配的元素。将字符串原语添加`''`到字符串对象会为您提供字符串原语，这就是它以这种方式工作的原因。
如果一定要`$.each`更好的使用传递给回调函数的参数，第一个参数是数组的索引，第二个是索引处的值。

```
$.each(arr, function(index, value){
    $(value).text("my id is " + this + ".");
}); 
```

[http://jsfiddle.net/2TPLD/](http://jsfiddle.net/2TPLD/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T05:48:33.530

您可以使用 Array 对象的`join`方法：

```
$(arr.join()).toggle(); // => $('#home, #news, #tidy').toggle(); 
```

`toggle`像许多其他 jQuery 方法一样在内部调用`each`方法，因此无需使用`each`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:46:07.437

试试这个

您可以使用数组连接方法：

```
 var arr = ['home', 'news', 'tidy'];

for (i=0;i<=arr.length;i++){
    $('#'+arr[i]).toggle();
} 
```

或者

```
$.each(arr, function() {
 $("#" + this).toggle();
}); 
```

或者

```
 var arr = ['#home', '#news', '#tidy'];
 $(arr.join(',')).toggle(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:46:34.570

您可以按如下方式使用 foreach 循环

```
var arr = [ "one", "two", "three", "four", "five" ];
jQuery.each(arr, function() {
    $("#" + this).text("My id is " + this + ".");

}); 
```

或者在你的情况下

```
var arr = ['#home', '#news', '#tidy'];
  jQuery.each(arr, function() {
    $(this).text("My id is " + this + ".");

}); 
```

# python - 如何将 nfcpy 源代码构建到 python 模块？

> ID：16117111
> 
> 赞同：0
> 
> 时间：2013-04-20T05:45:34.333
> 
> 标签：python, nfc

我想使用[nfcpy](http://bazaar.launchpad.net/~stephen-tiedemann/nfcpy/trunk/files)库来读/写 NFC 标签。但我只是得到了一些python的源代码。

如何将它构建到可以添加`import nfc`到程序中的 python 模块中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:20:51.557

这里解释了如何制作 Python 代码的模块：http: [//learnpythonthehardway.org/book/ex40.html](http://learnpythonthehardway.org/book/ex40.html)

你的模块（这里应该是你的python代码）：

```
# this goes in mystuff.py
def apple():
    print "I AM APPLES!" 
```

以这种方式访问​​它：

```
import mystuff
mystuff.apple() 
```

# hex - 将小端转换为大端，包括 0（零）

> ID：16117115
> 
> 赞同：0
> 
> 时间：2013-04-20T05:46:24.750
> 
> 标签：hex, endianness

我试图将小端转换为大端并遇到麻烦。我有一个数组，它有 2 个字节的 unsigned char，它是十六进制值。我想通过零来使它成为大端，我无法得到我想要的值。

例如，我的目标是获得

```
array[0] = 0b
array[1] = 40
output = 0b40 so i can see this value as 2880 when %d 
```

所以我用

```
output = (array[1]>>4) | (array[0]<<4); 
```

但实际上，我看到

```
printf("output = %x04\n", output);
output = 00b4 
```

我希望输出为 0b40，这样我可以得到 2880

```
printf("output = %x\n", output);
output = 0b40

printf("output = %d\n", output);
output = 2880 
```

谢谢大家任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:49:34.433

您需要将底部向上移动八位，而不是四位，并且不移动顶部：

```
output = (array[0]<<8) | array[1]; 
```

有关更多讨论和代码，请参阅[在 C 中将大端转换为小端。](https://stackoverflow.com/questions/2182002/convert-big-endian-to-little-endian-in-c-without-using-provided-func)

# c++ - C++ 程序中的向量错误

> ID：16117123
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:47:11.743
> 
> 标签：c++, vector, compiler-errors

我目前正在研究一个杂项剧院座位计划！我刚刚开始学习 C++，但我无法弄清楚这些错误。我试图让程序商店用户在两个向量中输入行号和行座位（仅当它是多个座位时）；矢量座位行（）和矢量座位号（）。我知道错误在说明什么，但我不知道如何处理这种情况。对不起，如果我太不清楚了，但老实说，我不知道还包括什么。请看一下我的代码，感受一下我的程序，并让我有任何想法。请保持答案简单一些；再说一次，我不是 C++ 高手

附言

抱歉显示了整个代码...我真的不知道要包含什么，不包含什么；我希望人们能够通过自己测试来感受这个程序......再次感谢！

```
/* 
 * This is a program built by a team of students
 * to help local movie theaters sell tickets
 * 
 * File: main.cpp
 * Author(s):
 *
 * 
 * Created on April 15, 2013, 11:10 AM
 */

#include <cstdlib>
#include <vector>
#include <string>
#include <fstream>
#include <iostream>
#include <cctype>
#include <iomanip>

using namespace std;

//Function Prototypes
void Title_Card();
void seating_prices();
void seating_chart();
void pick_seating();
void purchase_history();
void quit();
void update_file();
void Show_Menu();
void picking_seats();
void display_seating();
void display_name();
void display_number_of_seats();
void display_correct1(string, int);
void display_seats();
void display_correct2(string, int, int, int);
void display_correct2_alt(string, int, vector<int>, vector<int>);
void display_correct3(string);
void multiple_seats(string, int, vector<int>, vector<int>);
void display_rows_seats(string, int);
void display_finished(string);
void display_purchase_seats(string, int, int);
void display_purchase_seats_alt(string, int, vector<int>, vector<int>);

int readSeating (const char*, vector<char>&); //Reads SeatingChart.txt
int readPrices(string, vector<double>&); //Reads SeatingPrices.txt
vector<double> prices(15); //For SeatPrices.txt
vector<char> seating(450); //For SeatingChart.txt

vector<int> seat_row(); //For storing multiple seat rows
vector<int> seat_number(); //For storing multiple seat numbers

//Actual Program
int main() {
    Title_Card(); //Calls Title Page

    readSeating("SeatingChart.txt", seating); //Reads SeatingChart.txt
    readPrices("SeatPrices.txt", prices); //Reads SeatPrices.txt
    Show_Menu(); //Shows Introductory Menu

    system ("pause");
    return 0;
}

//**************************************************************
// Definition of the ShowMenu function. Shows introductory menu*
// and controls where user ends up in the program.             *
//**************************************************************

void Show_Menu() {
int choice;
string password;

      cout << "Welcome to the our theater program! Made for a person" << endl;
      cout << "who is looking for seating, purchasing a ticket, and" << endl;
      cout << "searching for other miscellaneous things... We hope" << endl;
      cout << "you enjoy the program!" << endl << endl;
      cout << "Below is a list of options the user can choose from:" << endl << endl;
      cout << "1.\tSeating Prices" << endl;
      cout << "2.\tSeating Chart" << endl;
      cout << "3.\tPick Seating" << endl;
      cout << "4.\tPurchase History" << endl;
      cout << "5.\tQuit" << endl << endl;
      cout << "Enter a choice... (1-5): ";
      cin >> choice; 

      while (choice < 1 || choice > 5){
            cout << endl << "You have entered an invalid choice!" << endl;
            cout << "Enter a choice... (1-5): ";
            cin >> choice;

                }

        switch (choice){
             case 1:
                  seating_prices();

             case 2:
                  seating_chart();

             case 3:
                  pick_seating();

             case 4:
                  purchase_history();

             case 5:
                  quit();
                  }
                  }

//**************************************************************
// Definition of the seating_prices function. Displays to the  *
// user, SeatPrices.txt                                        *
//**************************************************************

void seating_prices(){
    system ("cls");
    cout << "The Current Seating Prices Are:" << endl << endl;
    for (int count = 0; count < 4; count++){
    cout << " " << setprecision(4) << showpoint <<  prices[count] << " | Row " << (count + 1) << endl;
    }
    for (int count = 4; count < prices.size(); count++){
    cout << "  " << setprecision(3) << showpoint <<  prices[count] << " | Row " << (count + 1) << endl;
    }
    cout << endl;
    system ("pause");
    system ("cls");
    Show_Menu();
}

//**************************************************************
// Definition of the seating_chart function. Function for      *
// displaying the seating chart by itself                      *
//**************************************************************

void seating_chart(){

     system ("cls");
     int counter = 30;
     int row_counter = 0;

    cout << "The Current Seating Chart Is:" << endl << endl << endl << "           1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0" << endl << endl;
    cout << "         ---------------------------------------------------------------" << endl; 
    cout << " Row " << (row_counter + 1) << "     ";

    //Displaying Seating Chart
     for (int index = 0; index < 270; index++){

         if (index == counter){
            row_counter = (row_counter + 1);
            counter = (counter + 30);
            cout << "" << endl << " Row " << (row_counter + 1) << "     ";

            }

         cout << seating[index] << " ";
         }     

     for (int index = 270; index < seating.size(); index++){

         if (index == counter){
            row_counter = (row_counter + 1);
            counter = (counter + 30);
            cout << "" << endl << " Row " << (row_counter + 1) << "    ";

            }

         cout << seating[index] << " ";
         }
     cout << endl << "         ---------------------------------------------------------------" << endl; 

         cout << endl << endl;
         system ("pause");
         system ("cls");
         Show_Menu();
         }

//**************************************************************
// Definition of the pick_seating function. Displays the       *
// current seating chart and allows the user to pick their seat*
//**************************************************************

void pick_seating(){  //Not Finished

    system ("cls");
    display_seating();

}

//**************************************************************
// Definition of the purchase_history function. Displays the   *
// current the total sum of all movie ticket purchases         *
//**************************************************************

void purchase_history(){         //Not finished
     system ("cls");
     system ("pause");
     system ("cls");
     Show_Menu();
}

//**************************************************************
// Definition of the quit function. Allows the user to quit the*
// program entirely                                            *
//**************************************************************

void quit(){
     update_file();
     exit(0);
     }

//**************************************************************
// Definition of the update_file function. Designed to update  *
// the seating chart upon leaving the pick_seating function    *
//**************************************************************

void update_file(){  //Not finished

     //This function is supposed to
     //Update the seating chart
     //upon exit of the pick_seating function
     }

//**************************************************************
// Definition of the read_Prices function. Reads SeatPrices.txt  *
// and stores the pre-determined prices into a vector named    *
// prices.                                                     *
//**************************************************************

int readPrices(string myFile, vector<double>& vect) {

    //input file
    ifstream SeatPrices;                   

    SeatPrices.open(myFile.c_str());

    //if file cannot be found
    if (!SeatPrices) 
    cout << "Cannot find the file!" << endl;

    for (int index = 0; index < vect.size(); index++){
        SeatPrices >> vect[index];   //Reading the file "SeatPrices.txt"
        }

    SeatPrices.close();  //Closes the file
    return 0;
}

//**************************************************************
// Definition of the readSeating function. Reads a text file   *
// with a seating chart in it.                                 *
//**************************************************************

int readSeating(const char* myFile, vector<char>& vect){

    //input file
    ifstream SeatingChart;
    SeatingChart.open(myFile);

    //if file cannot be found
    if (!SeatingChart)
    cout << "Cannot find the file!" << endl;

    for (int index = 0; index < vect.size(); index++){
        SeatingChart >> vect[index];  //Reading the file "SeatingChart.txt"
        }

    SeatingChart.close(); //Closes the file
    return 0;
}

//**************************************************************
// Definition of the display_seating function. Function for    *
// simplifying the pick_seating function                       *
//**************************************************************

void display_seating(){

     int counter = 30;
     int row_counter = 0;

    //Displaying Seating Chart
    cout << "           1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0" << endl << endl;
    cout << "         ---------------------------------------------------------------" << endl; 
    cout << " Row " << (row_counter + 1) << "     ";

    //Displaying Seating Chart
     for (int index = 0; index < 270; index++){

         if (index == counter){
            row_counter = (row_counter + 1);
            counter = (counter + 30);
            cout << "" << endl << " Row " << (row_counter + 1) << "     ";

            }

         cout << seating[index] << " ";
         }     

     for (int index = 270; index < seating.size(); index++){

         if (index == counter){
            row_counter = (row_counter + 1);
            counter = (counter + 30);
            cout << "" << endl << " Row " << (row_counter + 1) << "    ";

            }

         cout << seating[index] << " ";
         }
     cout << endl << "         ---------------------------------------------------------------" << endl << endl; 

     cout << "In the seating chart... All hashtags (#'s) are seats already taken" << endl;
     cout << "and all stars (*'s) are available seats..." << endl << endl;
     system ("pause");

     display_name(); //Continues the program, helps loop if necessary
     }

//**************************************************************
// Definition of the display_name function. Function for       *
// simplifying the pick_seating function                       *
//**************************************************************

void display_name(){

     string name;

     //Picking your seat
    cout << endl << endl << "To pick your own seat(s), follow the instructions below:" << endl << endl;
    cout << "What is the name of the recipient of the seat(s)? ";
    cin >> name;

    display_correct3(name);
    }

//**************************************************************
// Definition of the display_number_of_seats function. Function*
// for simplifying the pick_seating function                   *
//**************************************************************

void display_number_of_seats(string name){

     int number_of_seats;
     int available_seats = 450; //Amount of remaining seats out of 450

     cout << "Alright " << name << "!" << endl;
     cout << "How many seats are you purchasing today? ";
     cin >> number_of_seats;

        while (number_of_seats < 1 || number_of_seats > available_seats){
              cout << endl << endl << "You have entered an invalid number of seats!" << endl;
              cout << "This might be because your number is zero or less," << endl;
              cout << "or that the number you entered is more than the amount" << endl;
              cout << "of remaining seats! Try again!" << endl << endl;
              cout << "How many seats are you purchasing today? ";
              cin >> number_of_seats;
              }

        display_correct1(name, number_of_seats);
        }

//**************************************************************
// Definition of the display_correct1 function. Function for   *
// simplifying the pick_seating function                       *
//**************************************************************

void display_correct1(string name, int number_of_seats){

     int correct;

     cout << endl << "Alright " << name << ", you are purchasing " << number_of_seats << " seat(s)?" << endl;
     cout << "Is this correct? Enter a '0' for 'no', or a '1' for yes: ";
     cin >> correct;

        while (correct < 0 || correct > 1){
        cout << "You have entered an invalid number!" << endl;
        cout << "Enter a '0' for 'no', or a '1' for yes: ";
        cin >> correct;
        }

        if (correct == 0){
           cout << endl << endl;
           display_number_of_seats(name);
           }

        if (correct == 1){
           cout << endl << endl;

           if (number_of_seats > 1)
           multiple_seats(name, number_of_seats, seat_row, seat_number);

           display_rows_seats(name, number_of_seats);
           }

     }

//**************************************************************
// Definition of the multiple_seats function. Function only    *
// used if user chooses to purchase multiple seats             *
//**************************************************************

void multiple_seats(string name, int number_of_seats, vector<int> vect, vector<int> vect2){

     for (int index = 1; index <= number_of_seats; index++){

     for (int count = 0; count < number_of_seats; count++){

     cout << "For Seat #" << index << "..." << endl;

     cout << "Enter the row number you would like to be in: (1-15): ";             
     cin >> vect[count];

         while (vect[count] < 1 || vect[count] > 15){
          cout << endl << "You have entered an invalid row number!" << endl;
          cout << "Enter the row number you would like to be in (1-15): ";
          cin >> vect[count];
          }

          cout << "Enter the seat number you would like to have (1-30): ";
          cin >> vect2[count];

              while (vect2[count] < 1 || vect2[count] > 30){
              cout << endl << "You have entered an invalid seat number!" << endl;
              cout << "Enter the seat number you would like to have (1-30): ";
              cin >> vect2[count];
              }
     cout << endl;
     }
     }
     display_correct2_alt(name, number_of_seats, seat_row, seat_number);
     }

//**************************************************************
// Definition of the display_rows_seats function. Function for *
// simplifying the pick_seating function                       *
//**************************************************************

void display_rows_seats(string name, int number_of_seats){

     int seat_choice;
     int row_choice; 

     cout << "Enter the row number you would like to be in: (1-15): ";             
     cin >> row_choice;

         while (row_choice < 1 || row_choice > 15){
          cout << endl << "You have entered an invalid row number!" << endl;
          cout << "Enter the row number you would like to be in (1-15): ";
          cin >> row_choice;
          }

          cout << "Enter the seat number you would like to have (1-30): ";
          cin >> seat_choice;

              while (seat_choice < 1 || seat_choice > 30){
              cout << endl << "You have entered an invalid seat number!" << endl;
              cout << "Enter the seat number you would like to have (1-30): ";
              cin >> seat_choice;
              }

     display_correct2(name, number_of_seats, row_choice, seat_choice); //Helps looping if necessary

     }

//**************************************************************
// Definition of the display_correct2_alt function. Alternate  *
// function if user enters multiple seats                      *
//**************************************************************

void display_correct2_alt(string name, int number_of_seats, vector<int> vect, vector<int> vect2){

     int correct;
     int counter = 1;
     int counter_2 = 1; //For minor details for looks

     for (int index = 1; index <= number_of_seats; index++){  

     for (int count = 0; count < number_of_seats; count++){

     if (counter_2 != number_of_seats && counter_2 == 1){         //For first seat

     cout << endl << endl << "Alright " << name << ";" << endl;
     cout << "For Seat #" << index << "; you chose " << "Row #" << vect[count];
     cout << " and Seat #" << vect2[count] << "?" << endl;
     cout << "Is this correct? Enter a '0' for 'no', or a '1' for yes: ";
     cin >> correct;

     }

     if (counter_2 != number_of_seats && counter_2 > 1){         //For all seats after first, except last seat

     cout << endl << endl;
     cout << "Next, for Seat #" << index << "; you chose " << "Row #" << vect[count];
     cout << " and Seat #" << vect2[count] << "?" << endl;
     cout << "Is this correct? Enter a '0' for 'no', or a '1' for yes: ";
     cin >> correct;

     }

     if (counter_2 == number_of_seats){         //For last seat

     cout << endl << endl;
     cout << "And for your last seat, Seat #" << index << "; you chose " << "Row #" << vect[count];
     cout << " and Seat #" << vect2[count] << "?" << endl;
     cout << "Is this correct? Enter a '0' for 'no', or a '1' for yes: ";
     cin >> correct;
     }
     }

        while (correct < 0 || correct > 1){
        cout << "You have entered an invalid number!" << endl;
        cout << "Enter a '0' for 'no', or a '1' for yes: ";
        cin >> correct;
        }

        if (correct == 0){
           cout << endl << endl;

           if (number_of_seats > 1)
           multiple_seats(name, number_of_seats, seat_row, seat_number);

           display_rows_seats(name, number_of_seats);
           }

        if (correct == 1){
           if (counter == number_of_seats)
           display_purchase_seats_alt(name, number_of_seats, seat_row, seat_number);
           }

        counter = (counter + 1);
        counter_2 = (counter_2 + 1);

     }
     }

//**************************************************************
// Definition of the display_correct2 function. Function for   *
// simplifying the pick_seating function                       *
//**************************************************************

void display_correct2(string name, int number_of_seats, int row_choice, int seat_choice){

     int correct;

     cout << endl << endl << "Alright " << name << ", you chose " << "Row #" << row_choice;
     cout << " and Seat #" << seat_choice << "?" << endl;
     cout << "Is this correct? Enter a '0' for 'no', or a '1' for yes: ";
     cin >> correct;

        while (correct < 0 || correct > 1){
        cout << "You have entered an invalid number!" << endl;
        cout << "Enter a '0' for 'no', or a '1' for yes: ";
        cin >> correct;
        }

        if (correct == 0){
           cout << endl << endl;

           if (number_of_seats > 1)
           multiple_seats(name, number_of_seats, seat_row, seat_number);

           display_rows_seats(name, number_of_seats);
           }

        if (correct == 1)
           display_purchase_seats(name, row_choice, seat_choice);

     }

//**************************************************************
// Definition of the display_purchase_seats function. Function *
// user to purchase his chosen seats                           *
//**************************************************************

void display_purchase_seats(string name, int row_choice, int seat_choice){

     int total_cost = 0; //Not set up yet; supposed to calculate the row price

     system ("cls");
     cout << name << ", now it is time to pay for your chosen seats!" << endl;
     cout << "Since you chose Row #" << row_choice << ", and Seat# " << seat_choice << "..." << endl;
     cout << "Your total cost is: S" << total_cost << endl << endl;

     system ("pause"); 
     display_finished(name);
     }

//**************************************************************
// Definition of the display_purchase_seats_alt function.      *
// Alternate function used for purchasing multiple seats       *
//**************************************************************

void display_purchase_seats_alt(string name, int number_of_seats, vector<int> vect, vector<int> vect2){

     int total_cost = 0; //Not set up yet; supposed to calculate the row price

     system ("cls");
     cout << name << ", now it is time to pay for your chosen seats!" << endl;
     cout << "Since you chose " << number_of_seats << " seats:" << endl << endl;

     for (int index = 0; index <= number_of_seats; index++){

     cout << "Seat #" << index << " being in Row #" << seat_row[index] << ";" << endl;
     }

     cout << endl << "Your total cost is: $" << total_cost << endl << endl;
     system ("pause"); 
     display_finished(name);
     }     

//**************************************************************
// Definition of the display_correct3 function. Function for   *
// simplifying the pick_seating function                       *
//**************************************************************

void display_correct3(string name){

     int correct;

     cout << endl << "Alright, you chose the name " << name << "?" << endl;
     cout << "Is this correct? Enter a '0' for 'no', or a '1' for yes: ";
     cin >> correct;

        while (correct < 0 || correct > 1){
        cout << "You have entered an invalid number!" << endl;
        cout << "Enter a '0' for 'no', or a '1' for yes: ";
        cin >> correct;
        }

        if (correct == 0){
           system ("cls");
           display_seating();
           }

        if (correct == 1){
           cout << endl;
           display_number_of_seats(name); //Helps if looping is necessary
           }

     }

//**************************************************************
// Definition of the display_finished function. Function for   *
// simplifying the pick_seating function                       *
//**************************************************************

void display_finished(string name){

     system ("cls");

     cout << "Congratulations " << name << "! You have picked your seat!" << endl;
     cout << "The Seating Chart will update momentarily..." << endl << endl;
     update_file();
     system ("pause");
     system ("cls");
     Show_Menu();

     }

//**************************************************************
// Definition of the Title_Card function. Starts the program   *
// with a title card, showing a little introductory title      *
//**************************************************************

void Title_Card(){
     cout << endl << endl << endl << endl;
     cout << "\t\t" << "************************************************\n";
     cout << "\t\t" << "*               THEATER SEATING!               *\n";
     cout << "\t\t" << "*                                              *\n";
     cout << "\t\t" << "*     A program created by a team of three     *\n";
     cout << "\t\t" << "*     students to help small theaters sell     *\n";
     cout << "\t\t" << "*                 more tickets                 *\n";
     cout << "\t\t" << "*                                              *\n";
     cout << "\t\t" << "*              Team of Students:               *\n";
     cout << "\t\t" << "*                                              *\n";
     cout << "\t\t" << "*                                              *\n";
     cout << "\t\t" << "*                                              *\n";
     cout << "\t\t" << "*                                              *\n";
     cout << "\t\t" << "*                                              *\n";
     cout << "\t\t" << "************************************************\n";
     cout << endl << endl;
     system ("pause");
     system ("cls");
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:58:04.980

你的错误在这里

```
vector<int> seat_row(); //For storing multiple seat rows
vector<int> seat_number(); //For storing multiple seat numbers 
```

它应该是

```
vector<int> seat_row; //For storing multiple seat rows
vector<int> seat_number; //For storing multiple seat numbers 
```

这是一个非常常见的错误，您试图声明两个名为 seat_row 和 seat_number 的向量，但是因为您使用了空括号而不是声明了两个返回向量的*函数。*

这是一个摘要

```
vector<int> a(10); // vector, size 10
vector<int> b(0);  // vector, size 0
vector<int> c;     // also vector size 0
vector<int> d();   // FUNCTION!! taking no arguments and returning a vector 
```

# google-chrome - 在页面中间显示 Chrome 扩展弹出窗口

> ID：16117128
> 
> 赞同：0
> 
> 时间：2013-04-20T05:48:14.313
> 
> 标签：google-chrome, google-chrome-extension

我是编写 chrome 扩展的新手，想知道如何执行以下操作。

如何使弹出窗口（当有人点击扩展图标时）显示在网页的中心，而不是在右上角显示弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:12:41.980

使用 chrome.browserAction.onClicked.addListener()，它[会在“单击浏览器操作图标时”触发。](https://developer.chrome.com/extensions/browserAction.html#event-onClicked)然后使用 chrome.tabs.executeScript() 之类的东西手动将弹出窗口注入到提供的选项卡的 DOM 中。

还可以考虑添加一个[上下文菜单项](https://developer.chrome.com/extensions/contextMenus.html)，这可能对用户更有意义，具体取决于您的扩展程序实际执行的操作。

# java - 如何摆脱 main 方法中的 showUsage() 方法？

> ID：16117129
> 
> 赞同：0
> 
> 时间：2013-04-20T05:48:14.647
> 
> 标签：java

每次我运行我的程序时，它都会直接进入 if 语句中的 showUsage 方法。这是为什么？如何在不卡在 showUsage 方法中的情况下继续程序？我希望能够运行这个程序，这样我就可以将数据输入到 txt 文件中，但不幸的是，我陷入了 showUsage() 方法中。

```
public class DataGenerator 
{
    public static void main(String[] args) 
    {

        if ( args.length != 1)
       {
           showUsage();
           System.exit(0);
       }

       String target = args[0];  
       switch (target)
       {
          case "trans" :
             generateTransactionRecords();
             break; 
          case "master" :
             generateAccountRecords(); 
             break;
          default : 
              showUsage();     
       }

    }

    private static void showUsage()
    {
    System.out.println("Usage: DataGenerator trans|master");
    System.out.println(" trans to generate trans.txt representing transcations data");
    System.out.println(" master to generate oldmast.txt representing account recorddata");      
    }

    /**
     * In a loop, prompts the user to enter transaction record one at time. 
     * Figure out a way to enable user to exit the loop
     * Write out all the transaction records in a text file called trans.txt  
     * 
     */
    private static void generateTransactionRecords()
    {
        System.out.println("generateTransactionRecords() called");
        Scanner keyboard= new Scanner (System.in);
        String [] args = new String [1];
        args[0] = "trans.txt";
        //String fileName = arg[0];//"trans.txt";
        //String fileName = "";
        PrintWriter outputStream = null;

        try
        {
        outputStream = new PrintWriter(args[0]);//fileName);

        }
        catch(FileNotFoundException e)
        {
            System.out.println("Error opening the file" + args[0]);
            System.exit(0);
        }

        outputStream.println ("Transaction file" + "        " + "Transaction");
        outputStream.println ("account number" +   "        " + "    amount");
        boolean keepGoing = true;
        while (keepGoing)
        {

            System.out.println("What is the account number?");
            int accountNum = keyboard.nextInt();
            System.out.println("What is the transaction amount?");
            double TransAction = keyboard.nextDouble();
            outputStream.println(accountNum + "                        " + TransAction);

            System.out.println("Do you want to enter more information?");
            String answer;
            answer = keyboard.next();
            if(answer.equalsIgnoreCase("no"))
            {
                keepGoing = false;
            }

        }
        outputStream.close();       
    }

    /**
     * In a loop, prompts the user to enter customer account record one at time. 
     * Figure out a way to enable user to exit the loop
     * Write out all the account records in a text file called oldmast.txt  
     * 
     */
    private static void generateAccountRecords()
    {
        System.out.println("generateAccountRecords() called");
        Scanner keyboard= new Scanner (System.in);

        String [] args = new String [1];
        args[0] = "trans.txt";
        PrintWriter outputStream = null;

        try
        {
        outputStream = new PrintWriter(args[0]);

        }
        catch(FileNotFoundException e)
        {
            System.out.println("Error opening the file" + args[0]);
            System.exit(0);
        }

        outputStream.println ("Master file");
        outputStream.println  ("account number" +   "       Name" + "      Balance");
        boolean keepGoing = true;
        while (keepGoing)
        {
            System.out.println("What is the account number?");
            int accountNum = keyboard.nextInt();
            System.out.println("What is the name?");
            String name = keyboard.nextLine();
            System.out.println("What is the name?");
            int Balance = keyboard.nextInt();
            outputStream.println(accountNum +      "                   " +name+"          " +        Balance);

            System.out.println("Do you want to enter more information?");
            String answer;
            answer = keyboard.nextLine();
            if(answer.equalsIgnoreCase("no"))
            {
                keepGoing = false;
            }

        }
        outputStream.close();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:51:35.700

运行程序为：

```
java DataGenerator someArgument 
```

回到你的代码：

```
public static void main(String[] args) 
{
   // here you are checking for the length of the args array not equal to 1
   // If its not equal to one then, enter the if block
   // To avoid the if block, you need to run the program with exactly 1
   // command line argument
   if ( args.length != 1)
   {
       showUsage();
       System.exit(0);
   }
 ...............

} 
```

`args`是一个`String`称为[命令行参数](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)的数组。所以，如果你从命令行运行你的程序 as `java DataGenerator someX someY`，那么`args`将包含`[someX,someY]`并且`args.length`将是 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:51:52.290

如果您正在输入该`showUsage`方法，则意味着您没有提供*确切*的一个参数。

尝试打印参数的副本以查看提供的内容：

```
for (String s : args) {
  System.out.println(s);
} 
```

在命令行上，您需要运行`java DataGenerator foo`（`foo`您的参数在哪里）。如果您使用的是 IDE，请查看帮助以了解如何指定运行时参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T05:52:19.563

我将继续猜测这是因为您在运行程序时没有传递任何命令行参数。`String[] args`填充了您在运行时传递给程序的命令行参数。

如果没有任何参数，该`if`语句将被评估`true`并`showUsage()`运行，然后`System.exit(0)`退出程序。

# javascript - 如何使用 Jquery 获取（这个）父母的孩子

> ID：16117130
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:48:31.063
> 
> 标签：javascript, jquery, selector

例子：

```
<div id="parent">
  <div id="child"></div>
</div> 
```

我们都知道，当我们想要获取父母的孩子的值时，我们可以使用这样的选择器`("#parent #child")`。但是，我怎样才能使用这种方法得到孩子。`(this+'#child')`不做这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:51:05.500

出色地！！如果您使用的是`id`选择器，则不需要使用，`context`因为 id 应该是唯一的......所以`$('#child')`否则它会是 $('childselector', this)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:49:14.323

您需要使用[选择器上下文](http://api.jquery.com/jQuery/#jQuery-selector-context)模型`this`作为上下文值传递

```
$('#child', this) 
```

# c# - How to use the both JavaScript validation and asp.net validation for a control

> ID：16117137
> 
> 赞同：3
> 
> 时间：2013-04-20T05:48:59.713
> 
> 标签：c#, asp.net, c#-4.0

I use a button click with the asp.net validation group and client side validation (javascript). It give the first preference to javascript validation if it returns true means it directly go to the serverside button click event not check the asp.net validations.

```
<asp:ImageButton ID="img_btn_register" runat="server"
    ImageUrl="~/images/Register1.png"
    **OnClientClick="return validat_form()"** OnClick="img_btn_register_Click1" 
    **ValidationGroup="qa"** /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T05:53:21.913

Based on your question I understand that- You need your field validations should occur first and then script should execute.

You can call `Page_ClientValidate`() in your client script to explicitly execute all validations and if it successful then only Client Script should be executed.

Here is a small demo on the same:

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <script type="text/javascript" language="javascript">
        function ClientScript() { 
            if (Page_ClientValidate("qa"))**// first check the validators in ValidationGroup "qa"**
            {
                alert("Save all Modification?");
            }
        }
    </script>

</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ValidationGroup="qa"  runat="server" ControlToValidate="TextBox1"
            Text="*" ErrorMessage="Value in Textbox1 is required!">
        </asp:RequiredFieldValidator>
        <asp:Button ID="Button1" runat="server" ValidationGroup="qa" Text="Test Validation" OnClientClick="ClientScript()" />
    </div>
    </form>
</body>
</html> 
```

# android - 屏幕过渡效果android

> ID：16117138
> 
> 赞同：2
> 
> 时间：2013-04-20T05:49:03.223
> 
> 标签：android, android-intent, android-animation

我正在尝试在屏幕一中从左到右滑动转换按钮单击以及从屏幕 2 到屏幕一的从右到左转换。以下是代码

屏幕一：

```
Intent intent = new Intent(CustomActivityTransitionActivity.this, SecondActivity.class);
overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_left);
startActivity(intent); 
```

屏幕 2：

```
Intent intent = new Intent(SecondActivity.this, CustomActivityTransitionActivity.class);
overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_right);
startActivity(intent); 
```

相应的动画如下所示，

Slide_in_left

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <translate
        android:duration="200"
        android:fromXDelta="-100%"
        android:fromYDelta="0%"
        android:toXDelta="0%"
        android:toYDelta="0%" />

</set> 
```

Slide_out_left

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <translate
        android:duration="200"
        android:fromXDelta="0%"
        android:fromYDelta="0%"
        android:toXDelta="-100%"
        android:toYDelta="0%" />

</set> 
```

Slide_in_right

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <translate
        android:duration="200"
        android:fromXDelta="100%"
        android:fromYDelta="0%"
        android:toXDelta="0%"
        android:toYDelta="0%" />

</set> 
```

Slide_out_right

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <translate
        android:duration="200"
        android:fromXDelta="0%"
        android:fromYDelta="0%"
        android:toXDelta="100%"
        android:toYDelta="0%" />

</set> 
```

它提供了一些顶部过渡，但是如果我只使用一个说从左到右滑动并禁用从右到左，它的工作。请指导我要替换的值在哪里出错。

# python - 嵌套循环中的输出长度不匹配？

> ID：16117145
> 
> 赞同：0
> 
> 时间：2013-04-20T05:49:56.160
> 
> 标签：python, arrays, indexing, nested-loops

我遇到了循环输出数量的问题。

```
neighbours=[]#this array will hold the distance to the k-th neighbour

for i in range(0, len(selection)-1):#208 values in selection

      n2 =[]#this array will hold the distance to all the other 207 points
      for k in range(0, len(selection)-1):

          d = {}
          if i != k:#to remove the same point being considered
              ra_diff = selection[i]['ra']-selection[k]['ra']
              dec_diff= selection[i]['dec']-selection[k]['dec']
              d=float(math.hypot(ra_diff , dec_diff))#finds the distance
              n2.append(d)  
      n2.sort()
      neighbours.append(n2[6])#passes the 7th value to the array 
```

这是查找 k 最近邻居的代码的一部分。选择有 208 个值，嵌套循环应该计算到所有点的距离并找到到每个点的第 7 个最近点。

迭代后，neighbors 数组仅保存 207 个值（即 len(neighbours)=207），但所有 208 个值应该有第 7 个最近邻。谁能指出问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:02:43.267

这一行：

```
for i in range(0, len(selection)-1): 
```

和

```
for k in range(0, len(selection)-1): 
```

可能是问题，`range`不包括 stop 参数，因此`- 1`缺少最后一个元素。

例如。

```
>>> L = [1, 2, 3]
>>> range(len(L)) # goes from 0 to N - 1, where N is len(L)
[0, 1, 2] 
```

但

```
>>> range(len(L) - 1) # goes from 0 to N - 2
[0, 1] 
```

# java - 动态更改架构

> ID：16117149
> 
> 赞同：3
> 
> 时间：2013-04-20T05:50:30.953
> 
> 标签：java, postgresql, spring-jdbc

如何在 Java 中动态设置 Postgres 模式？我试着做：

```
this.getDataSource().getConnection().setSchema("mySchema"); 
```

我正在使用 spring-jdbc 并且`this`是一个`JdbcDaoSupport`实例。

注意：我不想去数据库两次，所以 set`search_path`并不能有效地解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:31:04.087

运行语句：

```
set schema 'myschema'; 
```

更改当前架构

或者简单地设置搜索路径，以便您可以访问例如 public 和 myschema 中的表：

```
set search_path to public, myschema; 
```

（注意在两个语句中指定模式名称的不同：第一个必须使用单引号，第二个不需要）

您还可以使用 永久更改特定用户的搜索路径`alter user...`。

# php - 使用 Ajax 将 Javascript 变量传递给 PHP

> ID：16117152
> 
> 赞同：-2
> 
> 时间：2013-04-20T05:50:43.683
> 
> 标签：php, javascript, ajax

我想使用 Ajax 将一个 JavaScript 变量传递给 php... 因为我想通过它 onclick。我将 onclick 值添加到变量行。帮助将不胜感激 :) 谢谢

```
<script type="text/javascript">
function updateTable(row) {
    alert (row);
    var row = (row);
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:00:43.583

你试过这个吗？

```
 $.ajax({
    url: 'do.php',
    type: 'POST',
    data: "userID=" + onlyID,
    success: onMemberSucces,
    error:onMemberError
  });

function onMemberSucces(data) {
alert(data);
}

function onMemberError() {
alert("Error!!");
} 
```

其中 do.php 是您的 php 文件，onlyID 是您的 javascript 变量。

这是你要找的吗？

# css - twitter bootstrap span 未正确对齐

> ID：16117153
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:50:44.263
> 
> 标签：css, twitter-bootstrap

出于某种原因，当我应用跨度时，跨度不会将自己对齐到适当的网格中。我将跨度应用于哪种类型的元素似乎并不重要，在这种情况下它是输入。我显然希望他们调整自己，我做错了什么？

在这里小提琴：http: [//jsfiddle.net/fKQsj/](http://jsfiddle.net/fKQsj/)

```
 <div class="row-fluid">
                <div class="span12">
                    <input type="text" class="span4" placeholder="First" />
                    <input type="text" class="span4" placeholder="Middle" />
                    <input type="text" class="span4" placeholder="Last" />
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <input type="text" class="span4" placeholder="City" />
                    <input type="text" class="span2" placeholder="State" />
                    <input type="text" class="span2" placeholder="Zip5" />
                    <input type="text" class="span4" placeholder="Store" />
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div class="span4 offset8">
                        <button class="btn btn-success pull-right">Search</button>
                    </div>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:53:36.893

取自手册

> ```
> For multiple grid inputs per line, use the .controls-row modifier class for proper spacing. 
> It floats the inputs to collapse white-space, sets the proper margins, and clears the float. 
> ```

# c - 是否可以在运行时更改结构的定义？

> ID：16117154
> 
> 赞同：0
> 
> 时间：2013-04-20T05:50:47.353
> 
> 标签：c, struct, runtime

我不知道您为什么*要这样做*，但我很好奇是否有人知道答案。是否可以在运行时使用一个结构定义一段时间，然后再更改该定义？

IE

```
typedef struct
{
    int a;
    int b;
}my_struct; 
```

后来……

```
typedef struct
{
    int a;
    int b;
    int c;
}my_struct; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:55:03.113

不，您不能更改给定类型的定义，但是将其转换为完全*不同*的类型并没有错，假设基础数据的布局相似并且在其他方​​面兼容。

例如，考虑：

```
struct s_xyzzy {
    int a;
    int b;
};

struct s_plugh {
    int a;
    char b0;
    char b1;
    char b2;
    char b3;
};

struct s_xyzzy *xyzzy = malloc (sizeof (*xyzzy));
((struct s_plugh *)xyzzy)->b0 = 'x'; 
```

通过转换`xyzzy`为不同但兼容的类型，您可以以不同的方式访问字段。

请记住，兼容性很重要，您必须知道底层内存将在两个结构之间正确对齐。

您也可以通过使用重叠内存将两个结构放入一个联合中来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T05:58:37.793

如果你在谈论*运行时多态性*，那么它可以工作，但你必须知道你在做什么。阅读Axel Schreiner 的[ooc.pdf](http://www.cs.rit.edu/~ats/books/ooc.pdf)。

# jquery - 在单个锚标记点击事件中验证两个下拉列表

> ID：16117157
> 
> 赞同：1
> 
> 时间：2013-04-20T05:51:26.360
> 
> 标签：jquery

我必须在锚标记点击事件中验证两个下拉列表。

```
$(".viewmore").on('click',function(event){
    return   requiredValidation($(this).parents('.box01').find(".color"));
    return   requiredValidation($(this).parents('.box01').find(".size"));

});
function requiredValidation(ddl) {

    ddl = $(ddl);

    var isValid = true;
    if (jQuery.trim(ddl.val()) == 'VÆLG' ) {
        isValid = false;
        ddl.addClass("error");

    }
    else {
        ddl.removeClass("error");
    }

    return isValid;
} 
```

但只有第一个在这里验证。任何人都可以提供任何线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:53:09.607

利用

```
$(".viewmore").on('click',function(event) {
    var valid1 =  requiredValidation($(this).parents('.box01').find(".color"));
    var valid2 =   requiredValidation($(this).parents('.box01').find(".size"));
    return valid1 && valid2;
}); 
```

您在验证第一个选择后不久返回，您需要验证两个输入字段然后组合结果

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T05:54:43.407

为了一件事，您在函数中有两个 return 语句。因此，实际上只有第一个会执行并返回。也就是说，你为什么要回来？根据您在验证或缺少验证时要执行的操作，您可能希望在验证失败时显示错误消息或类似的内容。

```
if (!requiredValidation($(this).parents('.box01').find(".color")))
   alert("Error: color");
if (!requiredValidation($(this).parents('.box01').find(".size")))
   alert("Error: size"); 
```

# c# - 在c#中创建安装文件时自动安装access数据库

> ID：16117161
> 
> 赞同：0
> 
> 时间：2013-04-20T05:51:59.173
> 
> 标签：c#, ms-access, installation

我已经创建了使用 access 数据库的 ac# 应用程序。
我已成功部署应用程序。
我想要的是自动在其他用户的计算机上自动安装访问数据库。

我试图更改 app.config 文件的连接字符串，但没有用..:(
帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:08:38.290

不确定您的意思，但如果您的数据库是解决方案的一部分，您可以将其复制到输出目录：

![在此处输入图像描述](https://i.stack.imgur.com/3fgo9.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T09:43:52.200

如果您想创建使用**MS Access DATA BASES的****Dot Net**应用程序的 .exe 安装项目。然后只需按照以下步骤操作。在继续这些步骤之前，请先阅读这篇文章。[与 Dot net 中的 MS Access 数据库连接](https://stackoverflow.com/questions/19275557/c-sharp-inserting-data-from-a-form-into-an-access-database/22140884#22140884)。当你要创建exe文件时，你的数据库连接字符串应该是这样的（意味着@"数据源中应该没有目录，直接输入你的数据库名称，因为在.exe文件中添加时您的数据库文件，则它位于同一目录中。

 **```
 System.Data.OleDb.OleDbConnection conn = new System.Data.OleDb.OleDbConnection();
    conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;" +
     @"Data source=MyDataBase.accdb"; 
```

1.  右键单击您的解决方案文件。*（如在解决方案资源管理器“解决方案'MyProject'”中）*
2.  选择添加 --> 新建项目 --> 其他项目类型
3.  选择“设置”
4.  将添加一个名为 setup 的新项目（*在编辑器中添加一个新选项卡作为文件系统）*
5.  现在右键单击应用程序文件夹->选择添加->选择文件夹新文件夹将添加到应用程序文件夹下*现在右键单击新添加的文件夹->选择添加->选择文件*将弹出添加文件对话框
6.  选择您的 Db 文件*（意味着从“浏览”按钮那里去选择您的访问数据库）*
7.  选择安装项目并构建。现在您的安装程序将拥有您的数据库。
8.  您也可以从那里安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:05:36.230

你必须更具体。您是否使用安装程序安装了应用程序？复制和粘贴？

也许这些会有所帮助：

1.  [StackOverflow - “如何在未安装 Office 2010 的计算机上安装带有 MS Access 数据库的 Visual Studio 2010 安装项目？”](https://stackoverflow.com/q/13854698/1909995)
2.  [CodeProject - 部署您的应用程序和数据库](http://www.codeproject.com/Articles/16231/Deploy-your-Application-and-Database)
3.  [MSDN 论坛 - “如何将 sql 数据库文件附加到在 c# 中创建 .exe 设置”](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5808f536-f48d-4869-adf2-13b876984ae9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:30:27.270

使用设置将访问数据库复制到程序数据中的文件夹。在您的代码中连接到此数据库。如果不允许用户指定数据库路径，则不需要 app.config 中的连接字符串。

```
Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData); 
```

您的设置应该能够部署到 programdata 文件夹。**

# macos - 在 mac 中为 libc 生成 ctags

> ID：16117163
> 
> 赞同：1
> 
> 时间：2013-04-20T05:52:16.263
> 
> 标签：macos, vim, ctags, libc

我正在尝试通过vim在mac（Mountain Lion）上使用libc库的标签。我已经从( )`*.c`中的文件生成了标签。我已设置包含生成的标签文件 ( )。但是，如果我尝试访问某个函数上的标签，它会说“未找到标签”。我该如何解决这个问题？`/usr/include``ctags -R /usr/include/*.h``tags``set tags+=tags``fseek()`

编辑：

我已经尝试过`ctags /usr/lib/libc.dylib`，现在它会导致错误提示文件未排序。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T06:29:42.123

使用这一行来生成一个可用的`tags`文件：

```
ctags -R --c++-kinds=+p --fields=+iaS --extra=+q /usr/include 
```

完成后，`:tag fseek`应该工作，以及`<C-]>`在`fseek`通话中。

请务必`:h tags`仔细阅读`:h ctags`。

# php - 如何更改登录后的wordpress索引页面？

> ID：16117168
> 
> 赞同：0
> 
> 时间：2013-04-20T05:53:01.723
> 
> 标签：php, wordpress

我想更改登录 worpress 后加载的默认索引页面？我想将新页面设置为索引页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:53:58.150

您可以使用 Peter 的登录重定向插件来实现此功能。 [http://wordpress.org/extend/plugins/peters-login-redirect/](http://wordpress.org/extend/plugins/peters-login-redirect/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:52:55.213

转到**Dashboard > Settings > Reading**，您可以在其中设置要显示为首页的静态页面。

您可以使用特定页面或帖子用作静态页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:24:55.133

如果您能够编辑您的主题，这里有一些其他选项可以直接放入主题中。

1）这将显示整个登录表单，在用户`http://www.mysite.com/?page_id=2`登录后将其重定向到：

```
<?php
if ( !is_user_logged_in() ) {
  $redirect_args = array('redirect' => 'http://www.mysite.com/?page_id=2');
  wp_login_form($redirect_args);
}
?> 
```

2）这将显示一个*登录*链接，将用户带到正常的登录表单，然后`http://www.mysite.com/?cat=1`在他们登录后将他们重定向到：

```
<?php
if ( !is_user_logged_in() ) {
  $redirect_to = '/?cat=1';
  echo '<a href="' . wp_login_url($redirect_to) . '" title="Login">Login</a>';
}
?> 
```

# rdlc - 从其他数据源制作rdlc数据源过滤器

> ID：16117173
> 
> 赞同：2
> 
> 时间：2013-04-20T05:53:12.397
> 
> 标签：rdlc, localreport

所以总结一下这个问题，我有一个有两个数据源的报告——实际上是两个相互粘在一起的报告。我希望报告的第二部分根据报告的第一部分显示的内容显示数据。

更详细地说，情况如下。我有两个数据库表 - 一个是客户，另一个是订单。

客户包含有关客户的数据。Orders 包含指向客户的链接并包含此人的订单。

报告本身应该在第 1 部分显示某种字母：

“您好 [CustomerName]，您有 [TotalBalance] bla bla bla 的持续余额......”以及他在第 2 部分中下的所有订单的列表“订单 1：项目 1：1 欧元订单 2：项目 2： 2欧元……”

最初，这些是两个单独的报告，我们一次生成一个记录，输出为 pdf 文件并使用第三方软件将它们合并，使字母和订单列表彼此相邻。问题是这个系统需要一次生成数百个，而且需要很长时间。所以现在我想传递一对大型数据源并分批生成它们（一次调用它们 600 个） - 这工作得更快。

那么，如何强制使用不同数据源的第二个 tablix 根据第一个 tablix 中的内容和自己的数据源进行过滤？

我查看了子报表，但它们只能使用报表服务器工作，而且这些是本地报表。

有什么我能做的吗？我担心这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:16:06.887

没有理由子报表不能与本地报表一起使用。

我建议您从该站点[ReportViewer Samples](http://archive.msdn.microsoft.com/reportviewer)下载示例。名为“SupplyingData”的项目展示了如何将数据加载到子报表中。

# php - 刷新javascript计算而不重新加载页面

> ID：16117174
> 
> 赞同：0
> 
> 时间：2013-04-20T05:53:13.727
> 
> 标签：php, javascript, jquery

我有一个提交按钮，它使用 javascript xmlhttp 请求来调用 php 页面，该页面的唯一功能是在我的主页上为谷歌地球窗口编写一个 kml 文件。php 页面在 Web 浏览器中无法以 html 格式查看。

php 文件中的公式按预期工作。我遇到的问题是，在我第一次手动按下提交后，我希望脚本继续每 5 秒重复一次，直到我手动重新加载页面（或按下按钮停止脚本）。因为我计划让多个用户同时查看该页面，每个用户被分配一个随机的 5 位数字来保存他们的会话信息并在新创建的会话文件夹中创建 kml 文件，直到他们重新加载页面（然后将创建用户的新会话号）。

因为每个用户都被指定了一个唯一的会话 id，所以页面不能在 php 计算重复时重新加载。因此，我的 javascript 函数末尾有一个 return false 行。

我希望能够使用 javascript 调用 setInterval 来重复该功能而无需重新加载页面。如果页面要重新加载刚刚创建的 kml 文件，现在将无法在新会话中查看。让我知道是否有人有任何建议。以下是适用的代码。

主 index.php 页面上的 DIV id

```
<div>
  <form id="KMLsubmit" name=KMLsubmit >
    <input class="KMLsubmit" type="submit" value="Create KML" onclick="createKML()"/>
  </form>
</div> 
```

主 index.php 页面上的 JavaScript 函数

```
function createKML() {
    $('#KMLsubmit').submit(function () {
        $.get("generateKML.php",function(data,status){
        });
        //alert("Generating your KML files!");
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("kmldetails").innerHTML=xmlhttp.responseText;
            }
        }
  xmlhttp.open("POST","generateKML.php?session=" + session,true);
  xmlhttp.send();
  return false; 
    });
  } 
```

让我知道是否有人对如何执行此操作有任何建议。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:04:25.977

尝试

```
$(function(){
    $('#KMLsubmit').submit(function () {
        $.get("generateKML.php",function(data,status){
        });

        update();

        return false; 
    });

    function update(){
        $.ajax({
            url: 'generateKML.php',
            data: {
                session: session
            }
        }).done(function(result){
            $('#kmldetails').html(result);

            setTimeout(update, 5000)
        });
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:29:02.873

制作`createKML()`外部，在`KMLsubmit`提交事件上调用它，设置5秒的超时功能并在下次提交时清除超时，然后像这样重新启动过程：

```
var myTimer = false;

function createKML() {
    var xmlhttp = (window.XMLHttpRequest) ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("kmldetails").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("POST", "generateKML.php", true);
    xmlhttp.send("session=" + session);
    myTimer = setTimeout(function(){createKML()}, 5000);
}

document.getElementById('KMLsubmit').onsubmit = function(event){
    (event.preventDefault) ? event.preventDefault() : event.returnValue = false; //prevent the form from submitting and reloading the page
    if(myTimer) clearTimeout(myTimer);
    createKML();
} 
```

# c# - 为什么文本框文本没有从 C# 中的起始位置显示？

> ID：16117177
> 
> 赞同：1
> 
> 时间：2013-04-20T05:53:30.273
> 
> 标签：c#, winforms, textbox

我真的很困惑。请考虑以下情况。

**场景：**
我有一个 C# Winform 应用程序，其中包含几个文本框控件。现在，当我在这些文本框中输入数据时，例如“这是我的示例文本框”，它与文本框的可见区域重叠并显示为“AMPLE TEXTBOX”。但我希望文本从起始位置显示，如“这是我的 S”，然后如果需要，重叠。我怎样才能做到这一点？我在下面尝试过，但没有运气。请帮忙。谢谢。

```
(sender as TextBox).TextAlign = HorizontalAlignment.Left; 
```

**编辑**
我也在使用`AutoCompleteMode.Suggest`，这样当我按下任意键时，将显示类似于下拉列表的相应列表。但是这个列表的第一项是默认选中的，这是我不想要的。你也可以在这方面提出建议吗？谢谢。

**最终解决方案**
我正在使用它来解决问题

```
(sender as TextBox).TextAlign = HorizontalAlignment.Left;
(sender as TextBox).Select(0, 0); 
```

感谢@Har Har。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T06:13:59.207

我找到了解决方案，要将光标定位在 TextBox 控件内容的开头，调用 Select 方法并指定选择开始位置为 0，选择长度为 0。

```
private void Form1_Load(object sender, EventArgs e)
    {
        textBox1.Text = "Hello this is a sample application";
        textBox1.Select(0, 0);
    } 
```

它将在 0 索引处显示光标位置，它正在工作。

# php - 我想更正 SHIFT-JIS 和 UTF-8 外国字体的 PHPLIST 上的 PHP 编码问题

> ID：16117189
> 
> 赞同：0
> 
> 时间：2013-04-20T05:55:22.563
> 
> 标签：php, encoding, utf-8, phplist, shift-jis

我`PHPLIST`的服务器上有编码**日文字体**的卡。

我安装了外语包，但仍然无法编码`SHIFT-JIS`和`UTF-8`.

如何使用编码定义行更正文件中的 PHP 编码以更正 PHP 制作的每个页面中的编码？

*我认为问题在于程序的脚本没有为每个页面定义编码，因为程序版本的编码更正*。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-20T07:16:39.747

2 possible source of problems: PHP script itself and database at the back (if any).

By sending the approiate header **before** any content has been sent to the client (simply speaking, headers must be sent at the beginning of your code as possible), the encoding could be "defined" by

```
<?php header('Content-Type: text/html; charset=utf-8');?> 
```

* * *

**EDIT!**

Esailija gave a review and correction (see comments below) on my answer which is not correct for your question. As suggested by Esailija, you should check transmission encoding instead on the storage encoding itself.

My original answer is kept here as a "hall of shame".

> Note that if you are using DBMS like MySQL, the encoding in the database should be set properly as well (`utf8_general_ci` recommended, **backup your data completely** before you applying any changes to the existing data and do it on an independent testing server first, as changing the encoding in your database could be a disaster).

# c++ - 检查 C++ 程序中的非数字输入

> ID：16117191
> 
> 赞同：0
> 
> 时间：2013-04-20T05:55:40.480
> 
> 标签：c++, visual-studio-2010

如何使用 C++ 检查非数字输入？我正在使用 cin 读取浮点值，并且我想检查是否通过标准输入输入了非数字输入。我曾尝试使用 %d 指示符来使用 scanf，但我的输出已损坏。使用 cin 时，我得到了正确的格式，但是当我输入诸如“dsffsw”之类的字符串时，我得到了一个无限循环。注释代码是我尝试捕获浮点数，并将其类型转换为字符串，并检查它是否是有效的浮点数，但检查总是错误的。

我尝试使用在留言板上找到的其他方法，但他们想在 C 中使用 scanf 而不是在 C++ 中使用 cin。你如何在 C++ 中做到这一点？或者如果它不可行，则在 C 中。

```
while (!flag) {
        cout << "Enter amount:" << endl;
        cin >> amount;

    cout << "BEGIN The amount you entered is: " << strtod(&end,&pend) << endl;

        //if (!strtod(((const char *)&amount), NULL))   {
        //  cout << "This is not a float!" << endl;
        //  cout << "i = " << strtod(((const char *)&amount), NULL) << endl;
        //  //amount = 0.0;
        //}

        change = (int) ceil(amount * 100);

        cout << "change = " << change << endl;

        cout << "100s= " << change/100 << endl;
        change %= 100;
        cout << "25s= " << change/25 << endl;
        change %= 25;
        cout << "10s= " << change/10 << endl;
        change %= 10;
        cout << "5s= " << change/5 << endl;
        change %= 5;
        cout << "1s= " << change << endl;
        cout << "END The amount you entered is: " << amount << endl;
}
return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:07:10.160

```
int amount;

cout << "Enter amount:" << endl;

while(!(cin >> amount)) {
   string garbage;
   cin.clear();
   getline(cin,garbage);
   cout << "Invalid amount. "
        << "Enter Numeric value for amount:" << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:17:19.327

我认为您的任务与所谓的**防御性编程**有关，其中一个想法是防止像您描述的那样的情况（函数需要一种类型，而用户输入另一种类型）。

**我建议您使用返回流状态**的方法来判断输入是否正确，即`good()`，
所以我认为它看起来像这样：

```
int amount = 0;
while (cin.good()) {
        cout << "Enter amount:" << endl;
        cin >> amount; 
```

# php - jquery函数与其他插件jquery函数冲突

> ID：16117193
> 
> 赞同：0
> 
> 时间：2013-04-20T05:55:46.867
> 
> 标签：php, jquery-plugins, wordpress

我在两个不同的 WordPress 插件中使用相同的**jquery 函数。**
两个插件单独工作正常，问题是如果我同时激活两个插件，那么脚本适用于一个插件，另一个插件不工作（第二个插件不工作）。

谁能给我一个解决方案并告诉我问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:31:18.537

你应该`jQuery.noConflict();`在你的jquery的beaning中使用。
更多细节：- [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

类似的问题
[How Can I remove Conflict in my Jquery?](https://stackoverflow.com/questions/8149129/how-can-i-remove-conflict-in-my-jquery)
[如何成为 jQuery no.conflict 专家？](https://stackoverflow.com/questions/2721815/how-to-be-a-jquery-no-conflict-expert)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:58:19.367

1) 不要包含 jquery 两次
2) 如有必要，使用 $ = jQuery.noConflict()

# python - 访问 wiki 刮板的数据并将其存储在本地数据库中

> ID：16117196
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:56:30.987
> 
> 标签：python, python-2.7, scraperwiki

嗨，我在 scraper-wiki 上编写了一个爬虫，它抓取网页并将数据存储在 scraper-wiki 数据库中。现在我想用 python 编写一个程序，它将转到 scraper-wiki API 并获取数据并存储在一个本地机器的 sq lite 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:26:20.880

首先，您需要查询您想要的数据。这是文档：[1](https://scraperwiki.com/docs/python/python_help_documentation/) [2](https://scraperwiki.com/docs/python/python_datastore_guide/)

然后，您需要使用 sqlite 库来存储它，它的文档可以在 python 的官方文档站点找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:29:53.163

嘿伙计们，幸运的是我得到了答案 在 scraper wiki 上，这里有一个 API [https://scraperwiki.com/docs/api#sqlite](https://scraperwiki.com/docs/api#sqlite)，它将生成您想要访问的特定 wiki scraper 表的 URI，然后您可以打开它在 python 的 urllib 模块的帮助下作为 url

```
import urllib

def access_data():

f= urllib.urlopen('https://api.scraperwiki.com/api/1.0/datastore/sqlite?format=csv&name=example&query=select%20*%20from%20%60table%60')

data=f.read()
s = open('example.csv','w')
s.write(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T13:09:06.170

在您的爬虫概述页面上还有一个下载链接，您可以在其中将数据下载为 sqlite 文件，无需代码。然后，您可以在本地处理数据。

# c - C - 将多个指针作为参数传递给 pthread_create

> ID：16117201
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:57:22.597
> 
> 标签：c, string, pointers, struct

我是 C 新手，这些指针的概念让我非常困惑。我正在尝试做一些看起来很简单的事情，但是我遇到了很多编译错误。

我想生成一个新线程并将多个指针作为参数传递给它（似乎在c中使用全局变量的唯一方法是通过指针），所以我创建了一个包含所有这些指针的结构，但它似乎不会编译不管我改变什么。

这是我的代码（我取出了大部分代码，除了我的问题似乎在哪里）

```
//want to store the pointers in pointers, so when I change a pointer it changes the "global" variable

void request_handler(params *parameters) {
    params parameter = *parameters;
    int *numberOfOtherServers = parameter.numberOfServers;
    int *clientSock = parameter.clientSock;
    char ***serverList = parameters.serverList;
    struct function **functionList[10] = parameters.functionList[10];
}

typedef struct {
    int *clientSock;
    int *numberOfServers;
    char **serverList;
    struct function *functionList[10];
} params;

struct function {
    char name[20];
    int parameterNumer;
    int canDo;
    char *otherServers[10];

};

int main(int argc, const char * argv[])
{
    int client_sock_desc;

    pthread_t handler_thread;

    struct function functionList[10] = {{"",0, 0, {}}};
    int i =0, numberofOtherServers;
    char *serverList[10];

    //create a struct to pass as the parameters
    struct params parameters;
    parameters.clientSock = &client_sock_desc;
    parameters.functionList[10] = functionList;
    parameters.numberOfServers = &numberofOtherServers;
    parameters.serverList = serverList;

    //create a thread for the new clients request to be handled
    if(pthread_create(&handler_thread, NULL, request_handler, parameters) != 0) {
        perror("pthread_create failed");
    }
} 
```

C 是迄今为止使用过的最混乱的语言。这个任务应该很简单，但我很迷茫，因为我猜想我应该在一个变量上放多少个 * 或 & 来调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:03:16.770

您应该`parameters`通过`request_handler`. `pthread_create`但是由于它是一个局部变量，所以不适合传递它的地址。

因此将其定义为指针并为其分配内存。

```
struct params *parameters = malloc(sizeof(*parameters)); 
```

使用 适当地设置成员`->`，并按原样传递。

更新：更多错误

*   将定义移至函数`params`之前的顶部`request_handler`。
*   在 main 中定义`parameters`一个`params *parameters`not`struct params *parameters`
*   用于`parameters->`访问成员而不是`parameters.`指针所在的位置。

# iphone - UITableViewCellSelectionStyleGray 是如何实现的？

> ID：16117203
> 
> 赞同：2
> 
> 时间：2013-04-20T05:57:38.827
> 
> 标签：iphone, xcode, uitableview

我想在代码中模仿这种风格，更具体地说是在 setSelected 中。

假设我使用的是自定义单元格，是否有人知道我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:42:23.493

所有单元格选择样式都是通过设置`selectedBackgroundView`单元格的属性来实现的。对于系统蓝色和白色的，这些是带有蓝色和灰色渐变的内置视图。将单元格选择样式设置为蓝色或灰色只是告诉单元格使用这些视图之一作为其选定的背景。

假设您已将所有单元格内容添加到内容视图，您仍然可以将这些样式用于自定义单元格。

您可以创建自己的视图（通常是可拉伸图像或自定义绘图视图）并将其设置为自定义效果的选定背景视图。

当单元格被选中时，如果可以的话，它还会告诉它的任何内容视图子视图（标签等）被突出显示。`highlightedTextColor`您可以通过在任何标签上设置 来控制其外观。

您无需触摸即可实现这一切`setSelected`。这一切都由基本实现完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T10:26:37.503

找到了一个完全符合`UIColor`Apple 实施的帖子`UITableViewCellSelectionStyleGray`：

```
UIColor* selectedColor = [UIColor colorWithRed:217.0/255.0 
                                         green:217.0/255.0 
                                          blue:217.0/255.0 alpha:1.0]; 
```

要更改选择内容，只需在自定义扩展中实现您`setSelected:(BOOL)selected`的方法。`UIButton`这看起来像这样：

```
- (void)setSelected:(BOOL)selected{
    [super setSelected:selected];
    if( selected ){
        // change things here on highlight
    } else {
        // change things here on unhighlight
        NSLog(@"unselected");
    }    
} 
```

要进入此模式，您应该将单元格设置为`selected = YES`.

[原始帖子可以在这里找到。](https://stackoverflow.com/a/20958966/1141395)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T06:13:14.000

试试这个可能对你有帮助

```
UIView *selectedBackgroundViewForCell = [UIView alloc]init];
[selectedBackgroundViewForCell setBackgroundColor:[UIColor grayColor]];
theCell.selectedBackgroundView = selectedBackgroundViewForCell; 
```

（或者）

```
cell.selectedBackgroundView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"SelectedCellBackground.png"]] autorelease]; 
```

# javascript - 如何使用 scoll 加载剩余的更多结果到 div 的末尾？

> ID：16117213
> 
> 赞同：1
> 
> 时间：2013-04-20T05:58:34.773
> 
> 标签：javascript, jquery, html

我正在处理向下滚动事件以在**滚动条向下**到标记末尾时**显示更多结果。**我有一个可以附加的**除法（div）**

******滚动条向下到末尾时的标记。为此，我编写了以下代码。******

 ******### 在脚本中：

```
<script>
 $(document).ready(function () {
  $(window).scroll(function () {        
    if ($(window).scrollTop() + $(window).height() > $('#main').height() - 200 ) {
        fun();
    }
  });
  var fun= function(){    
    $('p').appendTo("#main");
    setTimeout(fun2, 100);      
  }
  var fun2=function(){
   $("#main").append("<p>Hello Scroll me</p>");  
  }
 });

</script> 
```

### 在身体里：

```
<div id="main">
  <p  style='height:100px;'>Hello Scroll me</p><p  style='height:100px;'>Hello Scroll   me</p><p  style='height:100px;'>Hello Scroll me</p><p  style='height:100px;'>Hello Scroll me</p><p  style='height:100px;'>Hello Scroll me</p><p  style='height:100px;'>Hello Scroll me</p><p  style='height:100px;'>Hello Scroll me</p><p  style='height:100px;'>Hello Scroll me</p><p  style='height:100px;'>Hello Scroll me</p>

</div> 
```

我已经实现了这一点，但我真正需要的是：

我在一个除法（）中有 100 个“p”标签，我想首先显示**10 个 p**，当我将滚动条向下移动到末尾时，我想显示**下一个 10（共 20 个）** ……依此类推。为此，我不知道该怎么做。

任何人都可以帮助我**不要**提及任何 scoll 插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:31:33.523

**HTML**

```
<div id="main">
  <!-- <p> tags here -->
</div>
<span id="indicator"></span> 
```

**CSS**

```
.hidden {
  display: none;
} 
```

**jQuery**

```
$(document).ready(function() {
  $("#main p").addClass("hidden");
  while ($("#main").outerHeight() < window.innerHeight) {
    showNextTen();
  }

  $(window).scroll(function(e) {
    if (($("span").offset().top - $(window).scrollTop()) <= window.innerHeight) {
      showNextTen();
    }
  });
});

function showNextTen() {
  $("#main p.hidden").slice(0, 10).removeClass("hidden");
} 
```

div的`span`外部`#main`用作指示器，用于检查滚动条是否已到达页面底部。

顺便说一句，我只是使用`while`循环来加载前 10`p`秒，因为如果只加载前 10 秒，则它们的长度可能不足以产生滚动条，因此可以触发滚动事件，这一切都会发生没用。但是，如果您只想要前 10 个，您可以删除`while`循环并`showNextTen()`立即调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:33:32.003

这取决于您的标记方式，但如果您使用的是类，您可以从该类的前 10 个实例中删除该类，然后是接下来的 10 个实例，依此类推。

```
$(window).scroll(function () {        
   if ($(window).scrollTop() + $(window).height() > $('#main').height() - 200 ) {
       $('.hidden:lt(9)').removeClass('hidden');
   }
}); 
```

这是一个[小提琴](http://jsfiddle.net/YcwPe/)******

# c - 如何找出代码何时读取父进程或子进程以及它们如何在 C 中进行通信

> ID：16117220
> 
> 赞同：1
> 
> 时间：2013-04-20T05:59:13.720
> 
> 标签：c, linux, shell, unix, linux-kernel

我有一个 shell 程序，其中创建了一个 fork，然后使用两个 if else 语句来分隔父进程和子进程。

我的示例程序在这里，我有几个问题

```
while(true)
{
    /* read command line input */

    x = fork();

    if( x > 0)
        {
         wait(&status);      
        }
    else
        {
         /* run the exec() command  */
        }
} 
```

从上面的代码中，它会在 fork 之后首先执行哪个语句，父级如何知道子级 exec 命令执行成功或不成功，父级何时停止等待以及在何种条件下以及如何执行。以及 wait(&status) 代码将如何工作。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T06:36:18.027

![叉（）。](https://i.stack.imgur.com/zS8Yl.png)

这应该让您更好地了解 fork() 系统调用的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-10T09:56:55.713

* * *

我们无法决定应该首先执行哪个进程（父进程或子进程）。如果一个孩子已经终止并且是一个僵尸，wait 会立即返回该孩子的状态。vfork() 保证子进程先运行，直到子进程调用 exec 或 exit

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T06:26:41.117

根据[POSIX 规范](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html)，`fork`运行父进程或子进程没有优先级。所以，事实上，你不能指望一个在另一个之前。

但是，如果您使用的是 Linux，则始终在 fork 之后首先安排子节点。主要是因为实施的原因。因此，父级是在之后启动的。但是，您还必须了解它们一旦启动就会同时运行。请参阅[fork 手册页](http://man7.org/linux/man-pages/man2/fork.2.html)。

# php - PHP文件上传错误

> ID：16117221
> 
> 赞同：1
> 
> 时间：2013-04-20T05:59:23.790
> 
> 标签：php

现在，我遇到了另一个问题。我正在尝试使用此代码上传文件：-

```
<form action="up.php" method="post">
    <input type="hidden" name="MAX_FILE_SIZE" value="200000" />
    Choose a file to upload: <input name="uploadedfile" type="file" /><br />
    <input type="submit" name="submit" value="Upload!"/>  
</form> 
```

这是 up.php:-

```
if(!isset($_FILES["uploadedfile"])) die("No file found"); 
```

在上面的代码中，它显示“未找到文件”。为什么没有文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:01:45.043

您需要`enctype="multipart/form-data"`在表单中添加。

```
<form action="up.php" method="post" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T06:02:58.520

将**enctype="multipart/form-data"**添加到表单标签

```
<form action="up.php" method="post" enctype="multipart/form-data">
  <input type="hidden" name="MAX_FILE_SIZE" value="200000" />
  Choose a file to upload: <input name="uploadedfile" type="file" /><br />
  <input type="submit" name="submit" value="Upload!"/>
</form> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T06:03:49.800

在你的`form tag`.

```
<form action="up.php" method="post" enctype="multipart/form-data"> 
```

# c# - 从客户端脚本调用代码隐藏中的方法

> ID：16117227
> 
> 赞同：0
> 
> 时间：2013-04-20T06:00:41.977
> 
> 标签：c#, javascript, asp.net, ajax

我正在使用`asp.net.`

我想在不向服务器发送页面请求的情况下更新我的页面的一部分（不是整个页面）。我想在客户端执行此操作。

为此，我认为我应该使用`AJAX`and `javascript`。

我创建了一个处理程序页面：`handler.ashx`

我发送请求并以纯文本形式获得响应：

**Javascript**

```
 XMLHttpRequest.open("GET", url);
//ApplyUpdate is a function that get the response in client side.
  XMLHttpRequest.onreadystate = ApplyUpdate; 
  XMLHttpRequest.send(null); 
```

**handler.ashx 上的**代码****

 **```
response.write("plain text as response"); 
```

现在在 ApplyUpdate 函数中，我可以使用纯文本并在客户端浏览器中显示它。

但问题是这样的：

我在 asp.net 中有一个 placeholder1 控件：

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder> 
```

如何将纯文本（响应！）分配给标签控件并将标签添加到 `placeholder1`控件！？我的意思是如何在客户端使用这些代码：

```
Label lb1 = new Lable();
lb1.text = plaintext;
placeholder1.controls.add(lb1); 
```

这些代码在`c#`（代码隐藏）中，但我如何使用这些代码？我不能通过`javascript`代码做同样的事情！

原谅我不好的解释。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T06:50:52.887

使用响应文本在 JavaScript 中创建元素并将其附加到占位符。如果占位符明确用于此标签，您可以将其删除并将其附加到其父级。

这是您创建元素的方式：[https ://developer.mozilla.org/en-US/docs/DOM/document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)**

# c# - WinbioEnrollment 返回 8009802C？

> ID：16117231
> 
> 赞同：0
> 
> 时间：2013-04-20T06:01:13.017
> 
> 标签：c#, windows-7, fingerprint, biometrics

我**在 Windows 7 中**为WBF 开发了**指纹管理应用程序**。

 **它在 Windows 7 中运行良好。

但是在 VMWare 中使用 windows 7 它会返回`8009802C`.

> 8009802C 告诉 请求的操作对于会话或生物特征单元的当前状态无效。

那么如何解决这个问题呢？

**注意：在 VMWare 中，我使用的是 Windows7 Home Basic。****

# java - 突出显示被点击的图像部分

> ID：16117236
> 
> 赞同：1
> 
> 时间：2013-04-20T06:01:24.137
> 
> 标签：java, android, eclipse, image, tablet

[![书的诗句](https://i.stack.imgur.com/XskoH.jpg)](https://i.stack.imgur.com/XskoH.jpg)

我有古兰经的图像。每个图像都有不同的经文（一个完整的句子）。有些经文在一行，有些在 2 行，有些在 3 行。请查看附件图片。如果用户单击第 4 节，则应突出显示完整的节段（在不透明度较低的节段上绘制一些叠加层，因此显示为节段被突出显示。）

1.  我该怎么做？
2.  我应该如何获得选择哪节经文。由于android有不同的设备屏幕和不同的分辨率。一些大的小等。

这可能吗 ？

注意：我们有图片，没有文字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:57:23.777

在这种情况下，我建议如下：创建一个由单独的诗句图像组成的布局，并使用图像选择器来突出图像。

# php - 如何检查数据库列中存在的字符串？

> ID：16117239
> 
> 赞同：3
> 
> 时间：2013-04-20T06:02:22.087
> 
> 标签：php, mysql, sql, mysql-error-1054

我有带有字段`id`,和 的文档表`sender_id`，`receiver_id`并且`receiver_id`包含字符串值，例如**U12,U13,U14**现在我当前登录用户，我想查找所有`receiver_id`包含我的`user_id`意思的记录 my `user_id`is `U13`。现在如何编写查询来获取记录。

我的查询是：

```
$selDoc="SELECT * FROM documents WHERE sender_id='U".$_SESSION['userId']."' OR  "U".$_SESSION['userId']." IN (receiver_id) ORDER BY id DESC"; 
```

但我在“where 子句”中收到错误未知列“U13”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T06:05:17.543

您的字符串连接搞砸了，应该是：（*进一步简化*）

```
$selDoc="SELECT * FROM documents WHERE 'U".$_SESSION['userId']."' IN (senderID,receiver_id) ORDER BY id DESC"; 
```

当上面的语句被解析时，它将如下所示：

```
SELECT * 
FROM   documents 
WHERE  'UXX' IN (senderID,receiver_id)  // where XX is the userID
ORDER  BY id DESC 
```

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:07:11.673

你错过了那里的报价。此外，您应该考虑在查询中使用绑定变量（将要查找的值分配给变量，然后在查询中使用占位符）以避免 SQL 注入问题（如果您不知道那是什么，请查一下，这非常重要要知道！）

# facebook - facebook 在仪表板中使用什么图形/仪表板产品：PUE 和 WUE

> ID：16117241
> 
> 赞同：1
> 
> 时间：2013-04-20T06:02:31.943
> 
> 标签：facebook, charts, dashboard

我喜欢 Facebook 仪表板：PUE 和 WUE。很漂亮

谁能指出是否有提供类似风格的开源或商业产品？

这是链接 [https://www.facebook.com/ForestCityDataCenter?sk=app_288655784601722&app_data](https://www.facebook.com/ForestCityDataCenter?sk=app_288655784601722&app_data)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:56:02.467

所以我刚刚为你阅读了 29,888 行 javascript。我见过的最大的 js 文件。看起来他们使用包括[tween.js](https://github.com/sole/tween.js/)在内的各种工具自己制作了该图。与制作它的人聊天会很有趣。轮图对象的代码从第 27,266 行开始，文本为`var GraphComponent = Class.extend({`。您可以在[https://www.fbpuewue.com/assets/application-3a3af20f7fa3591229c79442ae3d1c26.js](https://www.fbpuewue.com/assets/application-3a3af20f7fa3591229c79442ae3d1c26.js)找到源代码。对不起，如果它让您失望，它不是一个我们都可以轻松使用的很棒的插件：/我分享您的痛苦。如果您有任何问题，请告诉我：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T00:28:40.887

[我们刚刚在https://github.com/facebook/puewue-frontend](https://github.com/facebook/puewue-frontend)上开源了这个仪表板代码

您可能会在[https://github.com/facebook/puewue-frontend/tree/master/lib/javascripts中找到您要查找的内容](https://github.com/facebook/puewue-frontend/tree/master/lib/javascripts)

希望你觉得它有用！

# android - jeremy feinstein 的 SlidingMenu 的实现

> ID：16117244
> 
> 赞同：0
> 
> 时间：2013-04-20T06:02:54.493
> 
> 标签：android, android-sliding

我正在尝试使用 Jeremy Feinstein 的 SlidingMenu 库开发一个应用程序。我所做的一切都是按照 Github 说明中所述的正确方式完成的。一切运行良好，但问题是当我单击操作栏主页按钮打开滑块时，它会覆盖整个屏幕。我希望它像 Facebook 应用程序中的 Facebook 滑块一样半开。我的代码如下：

```
public class MainActivity extends SlidingFragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    //Hide title bar
    getSupportActionBar().setDisplayShowTitleEnabled(true);

    //Enable home button
    getSupportActionBar().setHomeButtonEnabled(true);

    //Home as up display
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);

   // getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    setBehindContentView(R.layout.menu_frame);

    //SlidingMenu menu=getSlidingMenu();
    SlidingMenu menu=new SlidingMenu(this);
    //menu = new SlidingMenu(MainActivity.this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
    setSlidingActionBarEnabled(true);
    menu.setShadowWidth(5);
    menu.setFadeDegree(0.0f);
    menu.attachToActivity(MainActivity.this, SlidingMenu.SLIDING_CONTENT);
    menu.setBehindWidth(10);
    menu.setBehindOffset(10);
    menu.setBehindScrollScale(0.25f);
    menu.setMenu(R.layout.menu_frame);

}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
        toggle();
        return true;
    }
    return super.onOptionsItemSelected(item);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:09:33.910

您可以使用`behindOffset`,`behindWidth`或`touchModeAbove`. 如果您将其用作视图，则可以这样做（在您的布局文件中）：

```
sliding:behindOffset="@dimen/YOUR_OFFSET"
sliding:behindWidth="@dimen/YOUR_WIDTH"
sliding:touchModeAbove="margin" 
```

**进一步解释**

`touchModeAbove`- 一个枚举，指定显示上述视图时屏幕的哪个部分是可触摸的。边距仅表示左边距。全屏是指整个屏幕。默认为边距。

`behindOffset`- 一个维度，表示您希望在显示后视图时显示上述视图的像素数。默认值为 0。

`behindWidth`- 表示后视图宽度的尺寸。默认是屏幕的宽度（相当于 behindOffset = 0）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-02T16:06:03.797

在您的代码中：

// SlidingMenu menu=getSlidingMenu();
滑动菜单菜单=新滑动菜单（此）；

只需在第一行删除//，因为此时您需要一个实例化的对象。

删除第二行，仅此而已。在第二行，您正在实例化一个新对象，这不是必需的....一旦您设置在内容视图后面，滑动菜单对象就会实例化。

我遇到了同样的问题并以这种方式解决了这个问题。

# c# - WPF 多个复选框选中/取消选中

> ID：16117251
> 
> 赞同：3
> 
> 时间：2013-04-20T06:03:44.213
> 
> 标签：c#, wpf, xaml

我有 4 个复选框，一个全选，另外三个是子复选框。当我检查全部时，我想检查所有三个子复选框，当我取消选择一个复选框时，主复选框检查全部将被取消选中。

```
<Window x:Class="checkboxWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350"
        Width="525">

  <Grid Name="grdOne">
    <CheckBox Content="Check"
              Checked="checkBox1_Checked"
              Unchecked="checkBox1_Unchecked"
              Height="16"
              HorizontalAlignment="Left"
              Margin="39,23,0,0"
              Name="checkBox1"
              VerticalAlignment="Top">
    </CheckBox>
    <CheckBox Content="One"
              Unchecked="checkBox2_Unchecked"
              IsChecked="{Binding Path=Ischecked, ElementName=checkBox1, Mode=TwoWay}"
              Height="16"
              HorizontalAlignment="Left"
              Margin="117,67,0,0"
              Name="checkBox2"
              VerticalAlignment="Top" />
    <CheckBox Content="Two"
              Unchecked="checkBox3_Unchecked"
              IsChecked="{Binding Path=Ischecked, ElementName=checkBox1, Mode=TwoWay}"
              Height="16"
              HorizontalAlignment="Left"
              Margin="118,103,0,0"
              Name="checkBox3"
              VerticalAlignment="Top" />
    <CheckBox Content="Three"
              IsChecked="{Binding Path=Ischecked, ElementName=checkBox1, Mode=TwoWay}"
              Height="16"
              HorizontalAlignment="Left"
              Margin="117,145,0,0"
              Name="checkBox4"
              VerticalAlignment="Top" />
    <CheckBox Content="Four"
              IsChecked="{Binding Path=Ischecked, ElementName=checkBox1, Mode=TwoWay}"
              Height="16"
              HorizontalAlignment="Left"
              Margin="118,190,0,0"
              Name="checkBox5"
              VerticalAlignment="Top" />
  </Grid>
</Window> 
```

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

        }

        private void checkBox1_Checked(object sender, RoutedEventArgs e)
        {
            if (checkBox1.IsChecked == true)
            {
                checkBox2.IsChecked = true;
                checkBox3.IsChecked = true;
            }
        }

        private void checkBox1_Unchecked(object sender, RoutedEventArgs e)
        {
            //if (checkBox1.IsChecked == false)
            //{
            //    checkBox2.IsChecked = false;
            //    checkBox3.IsChecked = false;
            //}
        }

        private void checkBox2_Unchecked(object sender, RoutedEventArgs e)
        {
            if (checkBox2.IsChecked == false)
            {
                checkBox1.IsChecked = false;
            }
        }

        private void checkBox3_Unchecked(object sender, RoutedEventArgs e)
        {
            if (checkBox3.IsChecked == false)
            {
                checkBox1.IsChecked = false;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:27:37.690

我的`CheckBox grid`样子：

```
 <Grid Name="grdOne">
    <CheckBox Content="Check" Height="16" HorizontalAlignment="Left" Margin="24,44,0,0" Name="checkBox1" VerticalAlignment="Top" Checked="checkBox1_Checked" Unchecked="checkBox1_Unchecked" />
    <CheckBox Content="One" Height="16" HorizontalAlignment="Left" Margin="64,77,0,0" Name="checkBox2" VerticalAlignment="Top" Checked="checkBox1_Checked" Unchecked="checkBox1_Unchecked" />
    <CheckBox Content="Two" Height="16" HorizontalAlignment="Left" Margin="64,99,0,0" Name="checkBox3" VerticalAlignment="Top" Unchecked="checkBox1_Unchecked" Checked="checkBox1_Checked" />
    <CheckBox Content="Three" Height="16" HorizontalAlignment="Left" Margin="64,121,0,0" Name="checkBox4" VerticalAlignment="Top" Checked="checkBox1_Checked" Unchecked="checkBox1_Unchecked" />
    <CheckBox Content="Four" Height="16" HorizontalAlignment="Left" Margin="64,143,0,0" Name="checkBox5" VerticalAlignment="Top" Checked="checkBox1_Checked" Unchecked="checkBox1_Unchecked" />
</Grid> 
```

我有两个事件，一个用于`checked`，另一个用于`unchecked`：

```
bool m_bChkUpdating = false; 
```

布尔 m_bUnChkUpdating = false;

```
private void checkBox1_Checked(object sender, RoutedEventArgs e)
{
    CheckBox chk = (CheckBox)sender;

    if (!m_bChkUpdating)
    {
        m_bChkUpdating = true;
        switch (chk.Name)
        {
            case "checkBox1":
                checkBox2.IsChecked = true;
                checkBox3.IsChecked = true;
                checkBox4.IsChecked = true;
                checkBox5.IsChecked = true;
                break;
            default:
                //  chk.IsChecked = true;
                if (checkBox2.IsChecked == true &&
                    checkBox3.IsChecked == true &&
                    checkBox4.IsChecked == true &&
                    checkBox5.IsChecked == true)
                {
                    checkBox1.IsChecked = true;
                }
                else
                {
                    checkBox1.IsChecked = false;
                }
                break;
        }
        m_bChkUpdating = false;
    }

}

private void checkBox1_Unchecked(object sender, RoutedEventArgs e)
{
    CheckBox chk = (CheckBox)sender;
    if (!m_bUnChkUpdating)
    {
        m_bUnChkUpdating = true;

        switch (chk.Name)
        {
            case "checkBox1":
                checkBox2.IsChecked = false;
                checkBox3.IsChecked = false;
                checkBox4.IsChecked = false;
                checkBox5.IsChecked = false;
                break;
            default:
                // chk.IsChecked = false;
                if (checkBox2.IsChecked == false ||
                    checkBox3.IsChecked == false ||
                    checkBox4.IsChecked == false ||
                    checkBox5.IsChecked == false)
                {
                    checkBox1.IsChecked = false;
                }
                else
                {
                    checkBox1.IsChecked = true;
                }
                break;
        }

        m_bUnChkUpdating = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T11:13:27.827

我建议您使用 MVVM 实现。模型类在哪里保存标签、选择状态和子项模型的集合。通过这种方式，您可以将检查事件传播到子项。这可能是一个实现：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Checks
{
    class ChecksModel : INotifyPropertyChanged
    {
        public ChecksModel(string label, bool status)
        {
            Children = new ObservableCollection<ChecksModel>();
            Label = label;
            IsChecked = status;
        }
        public ChecksModel(string label)
            : this(label, false)
        {
        }

        public ChecksModel()
        {
            Children = new ObservableCollection<ChecksModel>();
        }
        public void AddChild(ChecksModel child)
        {
            Children.Add(child);
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }

        private ObservableCollection<ChecksModel> _Children;
        public ObservableCollection<ChecksModel> Children
        {
            get
            {
                return _Children;
            }
            set
            {
                _Children = value;
                OnPropertyChanged("Children");
            }
        }
        private string _Label;
        public string Label
        {
            get
            {
                return _Label;
            }
            set
            {
                _Label = value;
                OnPropertyChanged("Label");
            }

        }
        private bool _IsChecked;
        public bool IsChecked
        {
            get
            {
                return _IsChecked;
            }
            set
            {
                _IsChecked = value;
                OnPropertyChanged("IsChecked");
                CheckNodes(value);
            }
        }
        private void CheckNodes(bool value)
        {
            foreach (ChecksModel m in _Children)
            {
                m.IsChecked = value;
            }
        }
    }
} 
```

然后在您的 XAML 中，您可以为刚刚创建的模型类定义一个 DataTemplate，然后将模型类的一个实例设置为 ContentControl DataContext，如下所示。

```
 xmlns:local="clr-namespace:Checks"

    Title="MainWindow">
<Window.Resources>
    <DataTemplate 
          DataType="{x:Type local:ChecksModel}">
        <StackPanel>
            <CheckBox 
                    IsChecked="{Binding IsChecked, Mode=TwoWay}" 
                    Content="{Binding Label, Mode=OneWay}"/>
            <ItemsControl Margin="10,0,0,0" 
                     ItemsSource="{Binding Children}"/>
        </StackPanel>
    </DataTemplate>

</Window.Resources>
<Grid Name="grdOne">

    <ContentControl Content="{Binding}"/>

</Grid> 
```

这是代码隐藏

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

using System.Collections.ObjectModel;

namespace Checks
{
    /// <summary>
    /// Logica di interazione per MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            ChecksModel model = new ChecksModel("Main");
            ChecksModel m1 = new ChecksModel("Branch");
            m1.AddChild(new ChecksModel("1st"));
            m1.AddChild(new ChecksModel("2nd"));
            model.AddChild(m1);
            model.AddChild(new ChecksModel("3rd"));
            model.AddChild(new ChecksModel("4th"));

            DataContext = model;
        }
    }
} 
```

这就是它的样子

![在此处输入图像描述](https://i.stack.imgur.com/8DqMB.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:15:03.243

我认为你需要`CheckBox`，`TreeView`这篇文章会帮助你：

[在 WPF TreeView 中使用复选框](http://www.codeproject.com/Articles/28306/Working-with-Checkboxes-in-the-WPF-TreeView)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-28T06:04:53.213

很简单的点击事件。

这是一个带有 2 个复选框的示例：

*   ***chbox_pres***是第一个*Checkbox*。
*   ***chbox_dev***是第二个*Checkbox*。
*   **valor_pres**和**valor_dev**是保存每个*Checkbox*值的全局变量。

* * *

```
private void Chbox_Click(object sender, RoutedEventArgs e)
{
    CheckBox chk = (CheckBox)sender;

    string name = chk.Name;

    if (name == "chbox_pres")
    {
        valor_pres = chbox_pres.IsChecked ?? false;
        chbox_dev.IsChecked = !valor_pres;
        valor_dev = !valor_pres;
        Debug.WriteLine("<< pres: pres = " + valor_pres + ", dev= " + valor_dev);
    }
    else
    {
        valor_dev = chbox_dev.IsChecked ?? false;
        chbox_pres.IsChecked = !valor_dev;
        valor_pres = !valor_dev;
        Debug.WriteLine("<< dev: pres = " + valor_pres + ", dev= " + valor_dev);
    }            
} 
```

**您可以根据需要适应任意数量。**

# c# - 在 windows phone 8 中用于评级目的的速率控制星

> ID：16117258
> 
> 赞同：1
> 
> 时间：2013-04-20T06:04:55.970
> 
> 标签：c#, windows-phone-7, visual-studio-2012, windows-phone-8

我正在为我的项目进行速率控制，用户可以在其中对图片进行评分。所以我需要速率控制星来进行评分。当我搜索它时，我发现了这个 [Link] [http://wp7wonders.wordpress.com/2010/10/15/use-the-rating-control-in-windows-phone-7/](http://wp7wonders.wordpress.com/2010/10/15/use-the-rating-control-in-windows-phone-7/)和 [Link] [http:// /j4ni.com/blog/?p=79](http://j4ni.com/blog/?p=79) 。第一个链接不是很有帮助，我能够创建星，但无法获取诸如 3/5 或 2/5 等的评级数字第二个链接我能够创建星，但我无法在模拟器屏幕上看到星星，但是当我单击保存星星的区域时，我能够查看我单击的星星。有没有其他方法可以做到这一点。由于我是 Windows Phone 框架的新手，因此有助于理解 Windows Phone。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:00:18.773

在您的第一个链接中，每个 ratingitem 控件都有一个名为 DisplayValue 的属性，该属性为 0 或 1。当它设置为 1 时，表示它被选中。如果您检查每个评级项目，您可以获得一个数字。实际的评级控件 ControlsToolkit:Rating 有一个 Value 属性，它是您要查找的数字。

例如。

添加 `<ControlsToolkit:Rating Height="40" Grid.Row="1" Value="0.6" ItemCount="0" x:Name="ctRating">` 后面的代码可以检查 ctRating.Value 选择所有 5 给你一个 1.0 值

# javascript - 无法使本机 javascript reduce() 函数工作

> ID：16117262
> 
> 赞同：0
> 
> 时间：2013-04-20T06:05:29.493
> 
> 标签：javascript, aggregate, javascript-objects, reduce

我正在尝试使用`reduce()`javascript 中的函数聚合数据（类似于[这个问题](https://stackoverflow.com/questions/11199653/javascript-sum-and-group-by-of-json-data)）：

**HTML**

```
Product 1: <button id="product1">Add one</button>
Product 2: <button id="product2">Add one</button> 
```

**JS**

```
$('button').on('click', function() {
            var pid = $(this).attr('id');

            cart[cart.length] = {id:pid, qty:1}

            var result = cart.reduce(function(res, obj) {
                    if (!(obj.id in res))
                        res.__array.push(res[obj.id] = obj);
                    else {
                        res[obj.id].qty += obj.qty;
                    }
                    return res;
                }, {__array:[]})

            console.log(result)
    });
}); 
```

我无法使其工作，因为返回的数组不包含`qty`数据。例如：

```
Object {__array: Array[1], product1: Object}
Object {__array: Array[1], product1: Object}
Object {__array: Array[2], product1: Object, product2: Object} 
```

我正在寻找的结果更像是：

```
Object {product1: 1}   //click on product1, quantity = 1
Object {product1: 2}   //click on product1 again, quantity = 1 + 1 = 2
Object {product1: 2, product2: 1}  //click on product2 
```

我错过了什么？

[http://jsfiddle.net/C4WuG/4/](http://jsfiddle.net/C4WuG/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:24:50.670

这不能解决您的问题`reduce`，但`reduce`不是正确的工具。我可以为此建议您采用不同的方法吗？`cart`这里不是每次添加产品时循环整个，我们只是保持每次添加的计数同步。

*在这里，我假设您一次添加一个产品，但`product.qty`如果需要，您可以增加一个。*

[http://jsfiddle.net/C4WuG/6/](http://jsfiddle.net/C4WuG/6/)

```
var cart = [], count = {};

$(document).ready(function () {

    $('button').on('click', function () {
        var pid = $(this).attr('id');

        cart.push({
            id: pid,
            qty: 1
        });

        count[pid] = (count[pid] || 0) + 1;

        console.log(count);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:27:25.347

使用[.reduce()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)的解决方案，我认为这不是最好的方法

```
var cart = new Array();

$(document).ready(function(){

    $('button').on('click', function() {
        var pid = $(this).attr('id');

        cart[cart.length] = {id:pid, qty:1}

        var result = cart.reduce(function(res, obj) {
            if(res.__array){
                res = {};
            }

            if(!res[obj.id]){
                res[obj.id] = {
                    qty: 0
                }
            }

            res[obj.id].qty += obj.qty;

            return res;
        }, {__array:[]})

        console.log(result)
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/38CuS/1/)

或者

一个更简单的使用[.forEach()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

```
var cart = new Array();

$(document).ready(function(){

    $('button').on('click', function() {
        var pid = $(this).attr('id');

        cart[cart.length] = {id:pid, qty:1}

        var result = {};
        cart.forEach(function(obj, index){
            if(!result[obj.id]){
                result[obj.id] = { qty: 0 }
            }
            result[obj.id].qty += obj.qty;
        });

        console.log(result)
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/PEHxf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:44:15.433

如果你想要输出喜欢`Object {product1: 2, product2: 1}`和使用`reduce`方法，试试下面。它将初始值传递为`{}`

reduce 方法的语法是这样的

```
[].reduce(
   function( previousValue, currentValue, index,  array ){},
   initialValue 
); 
```

我们的解决方案是

```
var cart = [];

$(document).ready(function(){

     $('button').on('click', function() {

            cart.push( { id:$(this).attr('id'), qty:1 } );

            var result = cart.reduce(function(res, obj) {

                if (!(obj.id in res )) {
                    res[obj.id] = 0
                }     

                return ( res[obj.id] += obj.qty ) && res ; 

            }, {} )

            console.log( result )
    });
}); 
```

和小提琴[http://jsfiddle.net/C4WuG/8/](http://jsfiddle.net/C4WuG/8/)

# javascript - 为什么 Javascript 中的 switch 和 if 语句对待布尔值不同，感到困惑

> ID：16117274
> 
> 赞同：1
> 
> 时间：2013-04-20T06:06:57.580
> 
> 标签：javascript, if-statement, switch-statement

我有一个开关，如果 Javascript 出现问题，代码如下。

```
var a=0;

if(a){
    console.log("a is true");
} else if(!a) {
    console.log("a is false");
} else {
    console.log("a is not true or false");
}

switch(a){
    case true:
        console.log("switch... a is true");
        break;
    case false:
        console.log("switch... a is false");
        break;
    default:
        console.log("switch... a is not true or false");
} 
```

当我运行上面的代码时，我在控制台中得到了结果，这让我很困惑：

```
a is false
switch... a is not true or false 
```

我认为应该是这样的：

```
a is false
switch... a is false 
```

有谁知道为什么会这样？非常感谢任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T06:13:02.243

如果 (!0) 评估为真。通常有一个规则，任何非零的 if 将评估为真，反之亦然。

但是对于 switch 0 将根据 case 值进行显式检查，并且 0 既不是 true 也不是 false ，因此会执行默认语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:17:08.887

[switch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)：*程序首先查找带有与表达式值匹配的标签的 case 子句，然后将控制权转移到该子句。*

由于`a=0`不匹配任何一种情况：`true`或`false`. 因此`default`被执行。

[if-else](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)：*如果指定条件为真，则执行语句。如果条件为假，则可以执行另一条语句。*

因为`a=0`，所以`!a`是真的。[这](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)就是评估条件的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T06:09:19.387

0 既不是真也不是假，但它是 !a

# ios - NSURLErrorDomain 错误 -1021

> ID：16117275
> 
> 赞同：1
> 
> 时间：2013-04-20T06:06:58.320
> 
> 标签：ios, iphone, dropbox, nsurl, nsurlerrordomain

如果我集成了 Dropbox，我正在开发一个应用程序。登录已正确完成，我也可以在 dropBox 中创建文件夹。但是当我尝试加载文件时出现错误

我得到以下错误

```
error making request to /1/files_put/dropbox/Info.plist - Error
Domain=NSURLErrorDomain Code=-1021 "The operation couldn’t be
completed. (NSURLErrorDomain error -1021.)" UserInfo=0x6859bc0
{destinationPath=/Info.plist,
sourcePath=/Users/bcod/Library/Application Support/iPhone
Simulator/5.0/Applications/0E1EE43C-8F6B-40FA-8696-D3992DA2DCE5/DBRoulette.app/Info.plist} 
```

我在创建文件夹时没有收到此错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T10:05:05.447

我在 iPhone 上使用 iOS 5.0 时遇到了同样的问题，但 iPhone 6.1 模拟器工作时没有创建错误消息。

我查看了 DropboxSDK / DBRESTClient.m，尤其是 uploadFile:toPath:fromPath:params 的最后几行，并在 DBRequest 上实现了一个类别“ExBody”以添加连接：needNewBodyStream 方法：

```
#import "DBRequest+ExBody.h"

@implementation DBRequest (ExBody)

#pragma mark NSURLConnection delegate methods

- (NSInputStream *)connection:(NSURLConnection *)connection needNewBodyStream:(NSURLRequest *)req {

    NSString * sourcePath = [userInfo objectForKey:@"sourcePath"];
    NSLog(@"%@ needs newBodyStream!", sourcePath);
    return [NSInputStream inputStreamWithFileAtPath:sourcePath];
}

@end 
```

这对我有用。该方法是在 iOS5 上调用的，而不是在 iOS6 上调用的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T06:12:00.757

错误 -1021 是一个`NSURLErrorRequestBodyStreamExhausted`错误。

根据[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)，您缺少委托方法：

> **NSURLErrorRequestBodyStreamExhausted**
> 当需要正文流但客户端没有提供时返回。这会影响 iOS 上使用正文流发送 POST 请求但未实现 NSURLConnection 委托方法 connection:needNewBodyStream 的客户端。在 OS X v10.7 及更高版本中可用。

# ios - ios：向mapView添加注释不起作用

> ID：16117281
> 
> 赞同：0
> 
> 时间：2013-04-20T06:07:50.037
> 
> 标签：ios, mkmapview

嗨，我有一个带有注释对象的 NSMutableArray，以下代码不会添加注释：

在 .h 我有

```
 @property (retain, nonatomic) MarketsDataController *marketList; 
```

在 .m 中我有（添加注释不起作用。地图上没有显示任何内容）

```
 _marketList = [_marketService.marketsDataController retain];
    NSLog(@"%@!!!", [_marketList objectInListAtIndex:0].title);
    [mapView addAnnotation:[_marketList objectInListAtIndex:0]];
    [mapView addAnnotation:[_marketList objectInListAtIndex:1]];
    [mapView addAnnotation:[_marketList objectInListAtIndex:2]]; 
```

MarketsListDataController 如下所示：

```
 #import "MarketsDataController.h"

    //The following interface is used for private methods
    @interface MarketsDataController ()
    - (void)initializeMarketsList;
    @end

    @implementation MarketsDataController

    //Set initial values for instance variables
    - (id)init {
        NSLog(@"init MarketsDataController");
        if (self = [super init]) {
            [self initializeMarketsList];
            return self;
        }
        return nil;
    }

    - (void)initializeMarketsList{
        NSMutableArray *marketsList = [[NSMutableArray alloc] init]; //Initialize the product list
        _marketsList = marketsList;                      //Set the markets list to the markets list
    }

    //Return the number of products
    - (NSUInteger)countOfList {
        return [_marketsList count];
    }

    //Return a product within the list
    - (MapAnnotation *)objectInListAtIndex:(NSUInteger)theIndex {
        return [_marketsList objectAtIndex:theIndex];
    }

    - (void)addAnnotationToList:(MapAnnotation *)mapAnnotation{
        NSLog(@"Adding market");
        [_marketsList addObject:mapAnnotation];
    }

    - (void)dealloc {
        NSLog(@"DEALLOC MarketsDataController");
        [_marketsList release];
        [super dealloc];

    }

    @end 
```

MapAnnotation .m 看起来像：

```
#import "MapAnnotation.h"

@implementation MapAnnotation

@synthesize coordinate, title, subtitle;

- (id)init{
    CLLocationCoordinate2D location;
    location.latitude = 0;
    location.longitude = 0;
    return [self initWithCoordinate:coordinate title:nil subtitle:nil];
}

- (id)initWithCoordinate:(CLLocationCoordinate2D) c title:(NSString *)t subtitle:(NSString *)st{
    self = [super init];
    coordinate = c;
    title = [t retain];
    subtitle = [st retain];
    return self;
}

- (void) dealloc{
    [title release];
    [subtitle release];
    [super dealloc];
}

@end 
```

我创建它们并将它们添加到另一个类中，例如：

```
if (![latitude isEqual:[NSNull null]] && ![longitude isEqual:[NSNull null]]) {
                     NSLog(@"%d", i);
                    NSLog(@"%@", title);
                    CLLocationCoordinate2D coordinate;
                    coordinate.longitude = [latitude doubleValue];
                    coordinate.longitude = [longitude doubleValue];
                    [self buildMarketsList:coordinate title:title subtitle:@""]; //build the browse list product

                } 
```

方法如下：

```
- (void)buildMarketsList:(CLLocationCoordinate2D)c title:(NSString *)t subtitle:(NSString *)st{
    MapAnnotation *mapAnnotation = [[MapAnnotation alloc]initWithCoordinate:c title:t subtitle:st];
    [_marketsDataController addAnnotationToList:mapAnnotation];
    [mapAnnotation release];
} 
```

如何添加实现 <MKAnnotation> 的注释对象数组？我没有收到任何错误，也不会显示任何注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:09:25.660

发现问题：

改变：

```
 coordinate.longitude = [latitude doubleValue];
                coordinate.longitude = [longitude doubleValue]; 
```

至：

```
 coordinate.latitude = [latitude doubleValue];
                coordinate.longitude = [longitude doubleValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:51:00.870

_marketsList 不是带有数组的对象。它*是*一个数组。

如果您有一个`marketsList`名为 _marketsList 的变量支持的属性

```
@property (nonatomic, retain) NSMutableArray * marketsList; //in your .h

@synthesize marketsList = _marketsList; //in your .m 
```

那么你应该做这样的事情：

```
- (void)initializeMarketsList{
    marketsList = [[NSMutableArray alloc] init]; //Initialize the product list

    [marketsList addObject:myAnnotation];//ad some annotations
} 
```

然后将您的注释数组添加到地图视图

```
[mapView addAnnotations:marketsList]; 
```

# c - 为什么我收到此格式错误“%c”需要类型“int”

> ID：16117282
> 
> 赞同：-1
> 
> 时间：2013-04-20T06:08:04.787
> 
> 标签：c, syntax, typeerror

为什么我的函数会出现此错误或类型冲突？其中玩家只是我只想输出的角色，以显示下一个玩家

错误

```
tictac.c:94: warning: format ‘%c’ expects type ‘int’, but argument 2 has type ‘char *’
tictac.c:94: warning: format ‘%c’ expects type ‘int’, but argument 2 has type ‘char *’ 
```

代码

```
void move(char player)
{
        int place;
        printf("player %c, enter placement: \n", &player);
        scanf("%d", &place);

        if (place == 1)
                board[0][0] = player;
        else if (place == 2)
                board[0][1] = player;
        else if (place == 3)
                board[0][2] = player;

        else if (place == 4)
                board[1][0] = player;
        else if (place == 5)
                board[1][1] = player;
        else if (place == 6)
                board[1][2] = player;

        else if (place == 7)
                board[2][0] = player;
        else if (place == 8)
                board[2][1] = player;
        else if (place == 9)
                board[2][2] = player;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:09:49.453

你不应该`&player`使用`printf`

改变

```
printf("player %c, enter placement: \n", &player); 
```

至

```
printf("player %c, enter placement: \n", player); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:09:39.013

尝试简单

```
 printf("player %c, enter placement: \n", player); 
```

没有任何地址`&`运算符。

# javascript - 在 div 元素中显示 javascript 函数的结果

> ID：16117290
> 
> 赞同：8
> 
> 时间：2013-04-20T06:08:39.150
> 
> 标签：javascript, html

我有一个 Javascript 函数，它执行以下操作：

*   它从用户选择的列表框中获取值并将值分配给变量
*   然后它获取用户在列表框中选择的数字并将其存储在变量中。
*   然后它将值与数字相乘以获得总数
*   最后，它在总数中增加了 15% 的增值税
*   然后总计显示在警报框中

但是，我不想在警报框中显示结果，而是在表单下的网页上的 DIV 元素中显示结果。有什么想法可以做到这一点吗？

我的代码如下所示：

```
<script type="text/javascript">
function calc()
{
var total = 0;
var course = 0;
var nrOfLessons = 0;
var vat = 0;

course = Number(document.getElementById("course").value)
nrOfLessons = Number(document.getElementById("nrOfLessons").value)

total =(course * nrOfLessons)
vat = total * 0.15
total = total+ vat;
window.alert(total)
}
</script>

 <form id="booking">
 <strong>COURSE: </strong>
 <select id="course">
 <optgroup label="English Courses">
 <option value="500">Beginner English</option>
 <option value="700">Mid-Level English</option>
 <option value="1000">Business English</option>
 </optgroup>
 <optgroup label="Thai Courses">
 <option value="500">Introduction to Thai</option>
 <option value="700">Pasa Thai</option>
 <option value="1000">Passa Thai Mak</option>
</optgroup>

</select>

<select id="nrOfLessons">
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>

</select> 
```

提前感谢所有帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-20T06:11:39.677

使用内部 HTML

```
<script type="text/javascript">
function calc()
{
var total = 0;
var course = 0;
var nrOfLessons = 0;
var vat = 0;

course = Number(document.getElementById("course").value)
nrOfLessons = Number(document.getElementById("nrOfLessons").value)

total =(course * nrOfLessons)
vat = total * 0.15
total = total+ vat;
document.getElementById('total').innerHTML = total;
}
</script>

<div id="total"></div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T06:11:47.693

给你`<div>`一个id，比如...

```
<div id="resultDiv"></div> 
```

然后在你的javascript中设置`.innerHTML`属性...

```
document.getElementById("resultDiv").innerHTML = total.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T06:12:52.040

您可以使用

```
 <div id="resultDiv"></div>

document.getElementById("resultDiv").innerHTML = total.toString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-09T08:41:44.653

```
$(document).ready(function(){
  $("#serachimg").click(function(){
    $("#search").slideToggle();
  });
});
 function content(){
    var div = document.getElementById("textDiv");
    div.textContent = "my text";
    var text = div.textContent;
	var div = document.getElementById("textDiv");
	div.style="font-size:24px";
 }
```

```
<div id="textDiv"><script> content();</script></div>
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-05-07T09:14:02.460

```
window.onload = function () {
var display = document.querySelector('#total');
total(display);
};

<div>The grand total is <span id="total"></span></div> 
```

# jquery - 进度条不工作

> ID：16117292
> 
> 赞同：0
> 
> 时间：2013-04-20T06:09:10.463
> 
> 标签：jquery

谁能告诉我进度条是如何工作的？在我的 HTML

```
<html>
   <head>
      <link rel="stylesheet" type="text/css" href="mystyle.css">
      <script type="javascript/text">
         var progress = setInterval(function() {
             var $bar = $('.bar');

             if ($bar.width()==400) {
                clearInterval(progress);
                $('.progress').removeClass('active');
             } else {
                $bar.width($bar.width()+40);
             }
             $bar.text($bar.width()/4 + "%");
         }, 800);
      </script>
    </head>
<body>
   <div class="container">
     <div class="progress progress-striped active">
        <div class="bar" style="width: 0%;"></div>
     </div>
   </div>
</body> 
```

在我的 CSS 中：

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
   margin-top: 30px;
   width: 400px;
} 
```

它出什么问题了？运行后我什么都得不到。我也在服务器上运行它。我从这里得到它：http: [//jsfiddle.net/xXM2z/](http://jsfiddle.net/xXM2z/) 请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:25:14.873

您不包含`bootstrap.js`在您的代码中 - 在提琴手中，这是由左侧的复选框动态包含的。在您的独立代码中正确安装 bootsrap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:22:38.250

尝试在您的代码中使用`<script type='text/javascript'>`而不是...`<script type='javascript/text'>`

或者即使`<script>`没有 type 属性，现在几乎所有的浏览器都会将其解释为 javascript。

编辑-@killer_PL 也有一点-该文件也需要包含在内。没想到...

# jquery - 单击按钮动态获取 td 的值

> ID：16117293
> 
> 赞同：1
> 
> 时间：2013-04-20T06:09:11.527
> 
> 标签：jquery

我需要从`<td id='itemCadaPreco'>`单击 ID 为“btnRemover”的按钮时获取值：。

这是一个 jsFiddle：http: [//jsfiddle.net/6APAx/](http://jsfiddle.net/6APAx/)

```
<tr id='itemCada'>
    <td id='itemCadaId'>1</td>
    <td>descrição aqui</td>
    <td id='itemCadaQtd'>12</td>
    <td id='itemCadaPreco'>R$ 10,00</td>
    <td>R$ 12000,00</td>
    <td style='width: 15px;'><button id="btnRemover">X</button></td>
</tr>

$(function(){
    $("#btnRemover").click(function(){        
        alert($(this).closest("#itemCadaPreco").text());
    });
}); 
```

**编辑：** 伙计们，这将在循环中动态生成，并且 id“itemCadaPreco”将重复，因此点击时调用 id 将不起作用，我们需要使用“closest”之类的东西或类似的东西。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:58:27.767

你可能想要的是

```
$(function(){
    $("#btnRemover").click(function(){        
        alert($(this).closest("tr").find('#itemCadaPreco').text());
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rpHap/1/)

我假设它是一个`tr`重复相同结构的列表，那么我们遇到了一个问题，因为您将有多个具有相同 id 的元素。元素的`id`应该在页面中是唯一的，因此我建议您将所有`id`属性更改为`class`.

```
<table id="tblItemData">
    <tr class='itemCada'>
        <td class='itemCadaId'>1</td>
        <td>descrição aqui</td>
        <td class='itemCadaQtd'>12</td>
        <td class="itemCadaPreco">R$ 10,00</td>
        <td>R$ 12000,00</td>
        <td style='width: 15px;'><button class="btnRemover">X</button></td>
    </tr>
</table>

$(function(){
    $('#tblItemData').on('click', '.btnRemover', function(){
        alert($(this).closest("tr").find('.itemCadaPreco').text());
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rpHap/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:25:47.993

您需要将行放在`<table>`标签内。

你只需要使用`alert($("#itemCadaPreco").text());`

请看这个工作示例。

[http://jsfiddle.net/vLAQj/](http://jsfiddle.net/vLAQj/)

# javascript - 如何在 HTML 网页中显示 $ 登录图形值

> ID：16117300
> 
> 赞同：0
> 
> 时间：2013-04-20T06:10:01.597
> 
> 标签：javascript, html, graph

我正在创建一个运行良好的图表，但我希望条形图上方显示的值应该具有 $ 值，因此知道如何将美元符号添加到值中。

这是我想要的图表图像，它应该显示 17 美元并且任何值都会出现。 ![在此处输入图像描述](https://i.stack.imgur.com/zPCfZ.png)

这是我的 HTML 代码

```
 <!DOCTYPE HTML>
   <html> 
   <head>
   <title>Graph 2</title>
   <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
   <script type="text/javascript" src="graph_script.js"></script>
   </head>
   <body>
   <div id="container" style="  height:285px; width:400px;float:left;margin:200px 0 0 335px; position:absolute;">

   </div>

     <script type="text/javascript">

 $(document).ready(function(){   
            var b;
            b=17;
    bb=17.60;
            cc=21;
            a=10; 
            var n=$;
        var chart = new Highcharts.Chart({

     chart: {

    renderTo: 'container',

    defaultSeriesType: 'column'

      },

     xAxis: {

categories: [''],

     title: {

        text: '',

        style: {

           color: '#767575'

        }}

,

labels: {

            align: 'right',

            style: {

                font: 'normal 11px Verdana'

            },

            x: 34,

        }

        },

yAxis: {

                    min: 0,

                   startOnTick: false,

    labels: {

        formatter: function() {

return this.value + '%';            

},

        style: {

           color: '#767575'

        }

     },

     title: {

        text: 'Prevalence rate %',

        style: {

           color: '#767575'

        }

     }

     },
        plotOptions: {
            column: {
                dataLabels: {
                    enabled: true
                }
            }
        },

series: [{

            name: 'Prevalence rate %',

            data: [b]

        }, {

            name: 'Prevalence rate %',

            data: [bb]

        },{

            name: 'Prevalence rate %',

            data: [cc]

        },{

            name: 'Prevalence rate %',

            data: [a]

        }]   

});});

   </script>

   </form>
   </body>
   </html> 
```

这是graph_script.js的链接

[http://pastebin.com/FHQYxTsq](http://pastebin.com/FHQYxTsq)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:07:00.603

您可以像这样向系列添加格式化程序：

```
plotOptions: {
            column: {
                dataLabels: {
                    enabled: true,
                    formatter: function() {
                        return '$' + this.y ;            
                    }
                }
            }
        }, 
```

**更新：整个代码应该是这样的；**

```
<!DOCTYPE HTML>
<html> 
    <head>
        <title>Graph 2</title>
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="graph_script.js"></script>
    </head>
    <body>
        <div id="container" style="  height:285px; width:400px;float:left;margin:200px 0 0 335px; position:absolute;"></div>

        <script type="text/javascript">

            $(document).ready(function(){   
            var b;
            b=17;
            bb=17.60;
            cc=21;
            a=10; 
            var n=$;
            var chart = new Highcharts.Chart(
            {

            chart: {
                renderTo: 'container',
                defaultSeriesType: 'column'
            },
            xAxis: {
            categories: [''],
            title: {
                text: '',
                style: {
                   color: '#767575'
                }},
            labels: {
                    align: 'right',
                    style: {
                        font: 'normal 11px Verdana'
                    },
                    x: 34,
                }},
            yAxis: {
                    min: 0,
                    startOnTick: false,
            labels: {
                formatter: function() {
                    return this.value + '%';            
            },
            style: {
               color: '#767575'
            }},
            title: {
                text: 'Prevalence rate %',
                style: {
                    color: '#767575'
                }}},
            plotOptions: {
                column: {
                    dataLabels: {
                        enabled: true,
                        formatter: function() {
                            return '$' + this.y ;            
                        }
                    }
                }
            },
            series: [
                        {name: 'Prevalence rate %', data: [b]}, 
                        {name: 'Prevalence rate %', data: [bb]}, 
                        {name: 'Prevalence rate %', data: [cc]},
                        {name: 'Prevalence rate %', data: [a]}
                    ]
                });
            });

        </script>
    </body>
</html> 
```

# c - 为什么 kfifo.h 中充满了#define 语句

> ID：16117304
> 
> 赞同：1
> 
> 时间：2013-04-20T06:10:12.187
> 
> 标签：c, linux-kernel

[kfifo.h](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/kfifo.h)几乎完全由`#define`. 这是为什么？为什么他们没有像“通常”那样在 h 文件中声明函数。

[编辑]

从学习的角度来看，我的问题似乎很容易被解释为对实现的质疑，而不是我要问的问题，为什么这个实现更好。无论如何，由于我不知道我正在查看“类似函数的宏”，因此我投票关闭，因为它显然是重复的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:19:27.737

允许有很多宏。为什么这让你感到困扰？

像这样的宏

```
 #define STRUCT_KFIFO_PTR(type) \
   struct __STRUCT_KFIFO_PTR(type, 0, type) 
```

不是类似函数的宏。

像这样的宏

```
 #define kfifo_initialized(fifo) ((fifo)->kfifo.mask) 
```

也可以在某些作业的左侧使用（即使您可能不应该这样做）。并且比对应的`inline`函数写的更短

```
 static inline unsigned kfifo_initialezed_f(struct __kfifo *fifo) {
    return fifo->kfifo.mask;
 } 
```

更重要的是，宏`kfifo_initialized`可以处理其`fifo`实际参数的几个不同声明（它在某种有限的意义上是“通用的”）。

像这样的宏

```
 #define __STRUCT_KFIFO(type, size, recsize, ptrtype) \
    { \
   __STRUCT_KFIFO_COMMON(type, recsize, ptrtype); \
        type    buf[((size < 2) || (size & (size - 1))) ? -1 : size]; \
    } 
```

`buf[-1]`如果给定 a `size`of ，它将扩展为等效于数组的声明`3`，这会使编译器大喊大叫。（最近的 C++2011 标准也有`static_assert`这种用途）。

所以我不明白你为什么感到惊讶。*C*预处理器很有用（恕我直言，它甚至还不够强大）。为什么要避免使用它？

这是**免费软件**；如果您不喜欢该源文件，您可以**努力改进它**（这需要时间）以提出更好的解决方案。我很喜欢现在的那个。

# mysql - 合并两个具有相同列名的MYSQL表

> ID：16117306
> 
> 赞同：6
> 
> 时间：2013-04-20T06:10:23.270
> 
> 标签：mysql

我有两张桌子

表一是时间表

```
id    |   edition    | time   | 
1     |       1      | 9:23am |
2     |       2      | 10:23am| 
```

表二是实际时间

```
id    | edition  | time    |
1     |    1     | 10:23am |
2     |    2     | 11:23am | 
```

我想结果为

```
Caption    | Edition    | Time    |
Scheduleed |    1       |  9:23am |
actual     |    1       |  10:23am |
Scheduleed |    2       |  10:23am |
actual     |    2       |  11:23am | 
```

如何在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T06:18:07.547

```
SELECT  Caption, Edition, Time
FROM
        (
            SELECT  'Scheduled' Caption, Edition, time
            FROM    scheduleTime
            UNION   ALL
            SELECT  'Actual' Caption, Edition, time
            FROM    scheduleTime
        ) subquery
ORDER   BY Edition, FIELD(Caption, 'Scheduled', 'Actual') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e2c0d/1)
*   [SQLFiddle Demo（*不使用`FIELD()`，简单`ORDER BY...DESC`*）](http://sqlfiddle.com/#!2/e2c0d/2)

输出

```
╔═══════════╦═════════╦═════════╗
║  CAPTION  ║ EDITION ║  TIME   ║
╠═══════════╬═════════╬═════════╣
║ Scheduled ║       1 ║ 9:23am  ║
║ Actual    ║       1 ║ 9:23am  ║
║ Scheduled ║       2 ║ 10:23am ║
║ Actual    ║       2 ║ 10:23am ║
╚═══════════╩═════════╩═════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:38:17.483

您可以使用 ：-

```
select * from(
select 'Scheduleed' as Caption ,edition,time from scheduletime

union all

select 'actual' as Caption,edition,time from actualtime
)x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:15:52.897

```
select * from
(select 'Scheduleed' as Caption, Edition as Edition, Time as Time from scheduletime

union all

select 'actual' as Caption, Edition as Edition, Time as Time from actualtime) as a

order by Edition 
```

也许这会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T06:17:52.667

尝试这个：

```
SELECT 
    'Scheduleed' AS Caption, 
    Edition, 
    time 
FROM scheduletime
UNION ALL
SELECT 
    'actual' AS Caption, 
    Edition, 
    time 
FROM actualtime
ORDER BY Edition, Caption DESC 
```

输出：

```
|    CAPTION | EDITION |    TIME |
----------------------------------
| Scheduleed |       1 |  9:23am |
|     actual |       1 | 10:23am |
| Scheduleed |       2 | 10:23am |
|     actual |       2 | 11:23am | 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/086157/8)

# sql-server - 将扩展存储过程转换为用户定义函数

> ID：16117309
> 
> 赞同：0
> 
> 时间：2013-04-20T06:11:13.117
> 
> 标签：sql-server, function, stored-procedures, dll, user-defined-functions

我有一个使用扩展存储过程附加到 SQL Server 的 .dll。

有没有办法在函数中使用dll？

# ruby-on-rails - 设计自己坏了？/users/edit 转到 404

> ID：16117320
> 
> 赞同：1
> 
> 时间：2013-04-20T06:12:34.180
> 
> 标签：ruby-on-rails, ruby, devise, routes

单击昨天使用的用户配置文件链接`edit_user_registration_path`( ) 时。`http://localhost:3000/users/edit`今天出现一个 404 错误，看起来像这样。

```
 Routing Error

    No route matches {:controller=>"devise/ideas"}
    Try running rake routes for more information on available routes. 
```

我检查了`rake routes`，我得到了

```
 like_idea GET    /ideas/:id/like(.:format)      ideas#like
        comment_idea POST   /ideas/:id/comment(.:format)   ideas#comment
               ideas GET    /ideas(.:format)               ideas#index
                     POST   /ideas(.:format)               ideas#create
            new_idea GET    /ideas/new(.:format)           ideas#new
           edit_idea GET    /ideas/:id/edit(.:format)      ideas#edit
                idea GET    /ideas/:id(.:format)           ideas#show
                     PUT    /ideas/:id(.:format)           ideas#update
                     DELETE /ideas/:id(.:format)           ideas#destroy
    new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
        user_session POST   /users/sign_in(.:format)       devise/sessions#create
destroy_user_session GET    /users/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
   user_registration POST   /users(.:format)               devise/registrations#create
new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                     PUT    /users(.:format)               devise/registrations#update
                     DELETE /users(.:format)               devise/registrations#destroy
                root        /                              home#index 
```

看起来正确的人可以看到正确的路线，因为`edit_user_registration_path` 我是 Ruby 新手，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:18:44.607

问题不是您的 edit_user_registration_path 。

如果您查看错误消息，Rails 正在设计文件夹（即“devise/ideas”）中寻找一个想法控制器。如果您在那里没有控制器，则意味着您在某处调用了不正确的路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T06:20:23.477

`edit_user_registration_path`需要用户 ID。

所以你需要类似的东西`edit_user_registration_path(@user)`

# c - C中while循环内的switch语句

> ID：16117322
> 
> 赞同：8
> 
> 时间：2013-04-20T06:12:58.180
> 
> 标签：c, loops, while-loop, switch-statement, infinite-loop

有几篇关于 while 循环中的 switch 语句的帖子，除了它们都不是在 C 中完成的，至少从我所看到的来看。C++ 可以创建布尔表达式，我知道，但在 C 中却不行。我有一个包含开关控件的 while 循环。但是，当我在 switch 中编写 break 语句时，它会回到循环的开头并使我的程序永远运行。忽略我使用的功能，因为它们确实有效。我只需要澄清一下我对嵌套的处理。谢谢！

```
Here is my main.c:

while(1)
{
    printf("0) Exit\n1) List Tasks\n2) Add Task\n");                                            
    printf("3)Delete Task\n4) Add Task From File\n");                                           
    printf("What would you like to do?\n");
    fgets(buf1, 50, stdin);                                                                     
    p = atoi(buf1);
    switch(p)
    {
          case 0: 
            break;
          case 1: 
            printTaskList(pTaskList);
            break;
          case 2:
            printf("Enter task name: ");
            fgets(buf2,100,stdin);
            printf("Enter task priority: ");
            fgets(buf3,100,stdin);
            printf("Enter task start date: ");
            fgets(buf4,50,stdin);
            pTask = makeTask(buf2,buf4,buf3);
            addTaskToEnd(pTaskList,pTask);
            break;
          case 3:
            printTaskList(pTaskList);
            printf("What task would you like to delete? ");
            fgets(buf6,50,stdin);
            taskNum = atoi(buf6);
            removeTask(pTaskList,taskNum);
            break;
          case 4:
            printf("Enter the filename ");
            fgets(buf7,50,stdin);
            break;
          default:
            printf("ERROR: %d: Incorrect menu option\n", p);
     }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-20T06:16:11.680

`break;`将退出最近的封闭`switch`或循环。要跳转两个级别，您必须使用 dreaded`goto`或重新组织 a`return`以完成所需的语义。

```
while(1) {
    switch(x) {
    case 0: goto EndWhile;
    }
}
EndWhile: ; 
```

或者

```
void loop() {
    while(1) {
        switch(x) {
        case 0: return;
        }
    }
}
//...
loop();
//... 
```

您完全可以在 C 中使用*布尔表达式*。只需使用`int`.

```
int quit = 0;
while(!quit) {
    switch(x) {
    case 0: quit = 1; break;
    }
} 
```

如果你真的想要的话，C 也有一个布尔数据类型。

```
#include <stdbool.h>

bool quit = false;
while(!quit) {
    switch(x) {
    case 0: quit = true; break;
    }
} 
```

还有一个选择，对于*完全疯狂的人。*

```
#include <setjmp.h>

jmp_buf jbuf;
if (!setjmp(jbuf))
    while(1) {
        switch(x) {
        case 0: longjmp(jbuf, 1);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:18:42.960

您也可以在 C 中使用布尔表达式。1999 年的 C 标准具有**stdbool.h**标头和数据类型**bool**。在较旧的 C 方言中，例如 Visual Studio 2012 (!) 中的方言，没有布尔数据类型，因此您需要改用纯整数：

```
int keep_looping = 1;
while (keep_looping) {
    ....
    if (....)
        keep_looping = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:38:53.630

> C++ 可以创建布尔表达式，我知道，但在 C 中不行。

哦？那么`0 == 0`，如果不是布尔表达式，那又是什么呢？如果您指的是类型的变量，请`bool`确保您是`#include <stdbool.h>`.

> 但是，当我在 switch 中编写 break 语句时，它会回到循环的开头并使我的程序永远运行。忽略我使用的功能，因为它们确实有效。我只需要澄清一下我对嵌套的处理。谢谢！

不，它不会回到循环的开头。从 switch 语句的末尾继续执行（紧接在`switch`es 右大括号之后`}`）。在您的情况下，这在功能上与*返回循环的开头*相同。

有几个选项可供您使用。其他人建议使用唯一变量来控制您的循环。这将是一个好主意，但他们建议使用*新*变量，尽管变量已经存在于您的逻辑中。如果您想以这种方式解决问题，请考虑：

```
do {
    /* ... */
} while (p != 0); 
```

或者，`return`当您想要退出时从 main 或`exit(0);`从其他函数调用。如果您想运行额外的清理/输出代码，这并不是很有帮助。

在这种情况下，`switch`控制结构实际上并不比`if`/ `else if`/`else`分支链好。如果您要使用`if`//分支`else if`，`else`您将能够`break;`更轻松地跳出循环。`switch`当我希望执行流向其他情况时，我会使用控制结构。

作为另一种选择，您可以使用`goto`表达式跳出循环到 main 之外的标签。当循环中有多个可能的退出点时，这将是最好的，例如分配错误后的处理和清理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T06:16:00.163

你永远不会退出循环。休息只会破坏你的开关。你应该更换

```
while(1) 
```

其他暗示应该退出while循环的东西

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T06:16:54.070

你的 break 只留下 switch 语句，然后在

```
while(1) 
```

永远循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-15T16:24:39.173

使用**退出（0）；**
无论你想离开哪里。

`In this partcular case you have to put the condition in the while loop parameter`

从while循环中出来的其他方法可能是使用： `return`语句。但这也会退出当前函数。

适当的解决方案可能是`goto label;`在开关内部使用，然后`label: statement;`在 while 循环外部使用。

例如：

```
while(1){
  switch(x){

   case 0:goto label;

   default:break;
   }
}
label:
printf("out of while loop"); 
```

# c++ - 缺少类模板“复杂”的参数列表

> ID：16117325
> 
> 赞同：4
> 
> 时间：2013-04-20T06:13:40.090
> 
> 标签：c++, class, templates

我有一个 isEqualTo 函数，它通过使用模板来比较几种数据类型。当我第一次将所有内容放在 main.cpp 文件中时，一切都很好，但是一旦我将 Complex 类拆分为它的标题并且它是 cpp 文件，我收到一条错误消息，指出“类模板“Complex”的参数列表丢失” . 所以当然我会检查我的默认构造函数是否有复杂的类，它是：

```
**main.cpp**

#include <iostream>
#include <string>   objects
#include "Complex.h"
using namespace std;

template <class T>      
class Complex<T>
bool isEqualTo(T a, T b)        
{
    if(a==b)
    {
    cout << a << " is EQUAL to " << b << endl;
    return true;
    }
else cout << a << " is NOT EQUAL to " << b << endl;
return false;
}

int main()
{
    //Comparing Complex class
Complex<int> complexA(10, 5), complexB(10, 54), complexC(10, -5), complexD(-10, -5);        //Creating complex class objects
cout << endl << endl << "******Comparing Complex Objects:****** \n";
isEqualTo(complexA, complexA);      //true
isEqualTo(complexA, complexB);      //false
isEqualTo(complexC, complexA);      //false
isEqualTo(complexD, complexD);      //true
}

**Complex.h**
#ifndef COMPLEX_H
#define COMPLEX_H
#include <iostream>
using namespace std;

template <class T>
class Complex
{
  public:
    //default constructor for class Complex
    Complex(int realPart, int imaginaryPart) : real(realPart), imaginary(imaginaryPart)

    //Overloading equality operator

    bool operator==(const Complex &right) const     //address of our cosnt right operand will have two parts as a complex data type, a real and imaginary
    {
        return real == right.real && imaginary==right.imaginary;        //returns true if real is equal to BOTH of its parts right.real and right.imaginary
    }

    //overloading insertion operator
    friend ostream &operator<<(ostream&, Complex<T>&);  
private:    //private data members for class Complex
    int real;       //private data member real
    int imaginary;  //private data member imaginary
};

#endif

**Complex.cpp**

#include "Complex.h"
#include <iostream>;
using namespace std;

template<class T>
ostream &operator<<(ostream& os, Complex,T.& obj)
{
if(obj.imaginary > 0)//If our imaginary object is greater than 0
    os << obj.real << " + " << obj.imaginary << "i";        
else if (obj.imaginary == 0)    //if our imaginary object is ZERO
    os << obj.real; //Then our imaginary does not exist so insert only the real part
else    //If no other condition is true then imaginary must be negative so therefor
{
    os << obj.real << obj.imaginary << "i";     //insert the real and the imaginary
}
return os;      //return the ostream object

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-20T06:25:04.857

Complex 是一个模板类。所以它在构造时需要一个模板参数。

```
Complex<int> complexA(10, 5);
        ^^^^ 
```

# c++ - 无法编译，需要左值，在函数 main

> ID：16117326
> 
> 赞同：2
> 
> 时间：2013-04-20T06:13:41.327
> 
> 标签：c++

我想编译这个，但它给了我错误，即使我改变了引号，头文件中是否有任何错误，请告诉我

```
#include<iostream.h>
#include<conio.h>

void main()
{
char st[20];

cin>>st;

cout<<st<<endl;

if (st = 'a')
cout<<"This is a";

if (st = 'b')
cout<<"This is b";

getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:15:33.547

`=`不是为了比较，

```
if (st = 'a') 

if (st = 'b') 
```

它将尝试更改`st`，并且上述比较的结果始终为`true`.

尝试使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)：

```
#include <string>

...

std::string st;

std::cin >> st;

cout<<st<<endl;

if (st == "a")
  cout<<"This is a";

if (st == "b")
  cout<<"This is b"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T06:16:02.940

以下内容不太正确：

```
if (st = 'a')
if (st = 'b') 
```

首先，`=`是赋值而不是比较。其次`'a'`，and`'b'`不是`char`字符串文字。

上面的正确写法是

```
if (strcmp(st, "a") == 0)
if (strcmp(st, "b") == 0) 
```

也就是说，我鼓励您不要使用 C 字符串，`std::string`而是使用 C 字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T06:23:27.180

```
if (st = 'a')
if (st = 'b') 
```

在上述两行中，l-value(left value) 'st' 指向数组的开头，其地址不能更改。这就是为什么你在编译中得到 l-value 的错误。使用相等（==）运算符而不是赋值（=）和取消引用 st 来更改 If 条件以获取开头的值。

```
if (*st == 'a')
if (*st == 'b') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T12:56:23.820

嗯，在我的学习线上。您正在使用赋值运算符“=”导入 string.h 指令，并使用该`strcmp();`库的功能希望这会有所帮助

# driver - 用户模式虚拟 Midi 电缆驱动程序

> ID：16117327
> 
> 赞同：1
> 
> 时间：2013-04-20T06:13:53.030
> 
> 标签：driver, midi, umdf

我正在寻找一种创建用户模式虚拟 MIDI 电缆驱动程序的方法。

不幸的是，在 MSDN 上什么都没有，在 MSDN 论坛上，我问没有人知道它应该如何实现。

首先，可能吗？

其次，我不确定[MSDN](http://msdn.microsoft.com/en-us/library/windows/hardware/ff537520%28v=vs.85%29.aspx)上的信息是否适用于 UMDF。

谁有比我更多的线索？

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:11:47.933

这是（不幸的是）在 Windows 中完成的一项相当困难的任务。您最好的选择是使用[MIDIOX 的 Yoke Junction](http://www.midiox.com/index.htm?http://www.midiox.com/myoke.htm)创建一个虚拟设备进行通信。

# android - 当布局超过android中的屏幕尺寸时如何捕获整个布局

> ID：16117335
> 
> 赞同：0
> 
> 时间：2013-04-20T06:15:51.663
> 
> 标签：android, android-layout

在我的应用程序中，当我缩放我的布局时，我正在缩放我的布局，我想捕获我的布局。我尝试了下面的代码，但它只捕获了屏幕中可见的内容。请帮助我如何捕获布局。

```
 View content = findViewById(R.id.main_container);
    content.setDrawingCacheEnabled(true);
    Bitmap bitmap = content.getDrawingCache();
    // actual width of the image (img is a Bitmap object)
    // int width = bitmap.getWidth();
    // int height = bitmap.getHeight();

    // recreate the new Bitmap and set it back

        bitmap = Bitmap.createBitmap(Bitmap.createBitmap(
                l1.getWidth() * 2, l1.getHeight() * 2,
                Bitmap.Config.ARGB_8888));

    // Bitmap mb = bitmap.copy(Bitmap.Config.ARGB_8888, true);
    Canvas bitmapCanvas = new Canvas();
    bitmapCanvas.setBitmap(bitmap);
    bitmapCanvas.scale(2.0f, 2.0f);
    content.draw(bitmapCanvas);
    ByteArrayOutputStream out = new ByteArrayOutputStream();

    bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);

    File imagesFolder = new File(Environment.getExternalStorageDirectory(),
            "saved_images");
    imagesFolder.mkdirs();
    String fileName = "final-" + String.valueOf(n) + ".jpg";
    File output = new File(imagesFolder, fileName);
    while (output.exists()) {
        n++;
        fileName = "final-" + String.valueOf(n) + ".jpg";
        output = new File(imagesFolder, fileName);
    }
    Uri uriSavedImage = Uri.fromFile(output);
    OutputStream imageFileOS;
    try {
        imageFileOS = getContentResolver().openOutputStream(uriSavedImage);
        imageFileOS.write(out.toByteArray());
        imageFileOS.flush();
        imageFileOS.close();

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    content.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:31:51.000

这是获取布局屏幕截图的另一种方法。我正在写这个，所以代码可能包含一些错误（现在无法验证）；

```
ViewGroup bg = (ViewGroup) findViewById(R.id.your_layout_id);
Bitmap screenshot = Bitmap.createBitmap(vg.getWidth(), vg.getHeight(),
                                        Bitmap.Config.RGBA8888);
Canvas c = new Canvas(screenshot);
vg.draw(c); 
```

现在我不确定这是否更好，但至少应该根据文档绘制一些东西。

# c++ - A *a = 新 A(); 这会创建一个指针还是一个对象？

> ID：16117339
> 
> 赞同：21
> 
> 时间：2013-04-20T06:16:06.510
> 
> 标签：c++

```
A *a = new A(); 
```

这会创建一个指针还是一个对象？

我是 C++ 初学者，所以我想了解这种差异。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-20T06:17:57.063

两者：您创建了`A`（一个对象）的一个新实例，并创建了一个指向它的指针，称为`a`.

你可以把它分成两个语句：

```
A *a;        // Declare `a` of type: pointer to `A`

a = new A(); // create a new instance of `A` and
             // assign the resulting pointer to `a` 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-20T06:17:36.993

这会在堆上创建一个类型的对象`A`，并将指向它的指针存储在`a`（存储在堆栈上）中。

`delete a`PS当你完成它时不要忘记调用它，这样它就`A`可以被销毁并将它的内存返回给堆。更好的是，`a`变成一个智能指针。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-20T06:19:41.830

它创造了两者。
它`A*`在堆栈上创建类型对象，`A`在堆上创建类型对象。

相当于

```
A *a;
a = new A(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-20T08:24:24.527

它将创建对象和指针。

首先调用 new A() ，如果您有默认构造函数，那么它会调用该构造函数并使用默认值初始化该对象，否则它将使用默认值初始化。因为我们使用的是新的密钥，所以它将为堆上的对象 A 分配内存. `New`关键字用于在堆上动态分配内存。`NEW`返回对象的起始地址。

之后 A 类型指针将具有`new`操作员返回的对象 A() 的地址。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-20T13:07:43.283

正如其他人所说，它创造了两者。但是对象 A 是在免费商店中创建的，现在您必须记住手动操作`delete`它。请记住，C++ 中的任何函数都可以抛出异常，除非它被声明为`noexcept`. 所以现在你不仅要记住`delete`什么时候没有抛出异常，你现在还需要想象代码可以采用的所有路径，并编写适当的`try-catch`块来手动处理`delete`你的对象。

你正在做的事情被称为赤裸裸的新，这是一个简单的方法来射击自己的脚。

值得庆幸的是，C++11 有一个解决这个问题的方法：智能指针。考虑指针的语义，它是由一个实体拥有还是在多个实体之间共享？在前一种情况下，您需要`std::unique_ptr`：

```
#include <memory>

std::unique_ptr<A> a(new A{}); 
```

现在你不需要调用`delete`，内存管理已经为你处理好了。在后一种情况下，您需要`std::shared_ptr`

```
#include <memory>

std::shared_ptr<A> a(new A{}); 
```

但是 C++ 序列点的定义可能不能保证这种创建智能指针的方式总是安全的，无需详细说明：

```
std::shared_ptr<A>(new A{new B, new C}); 
```

可能会产生内存泄漏，为避免这种情况，请使用`std::make_shared`

```
#include <memory>

auto a = std::make_shared<A>(); // a now holds a shared_ptr to A 
```

不幸的是，在最终确定 C++11 时，委员会忘记了`std::make_unique`. 这应该在 C++14 中修复：

```
#include <memory>

auto a = std::make_unique<A>(); // a now holds a unique_ptr to A 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-20T08:41:09.287

它创造了两者。

首先创建一个 A 类型的对象，然后存储一个指向它的指针

有关指针的更多信息，请查看[此处](http://www.cplusplus.com/doc/tutorial/pointers/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-20T18:01:24.930

一个对象和指针。该对象必须有一个指针供您引用，但是，您可以让一个对象由多个指针指向。

# ruby-on-rails - Rails 服务器运行时关闭的终端现在无法再次运行？

> ID：16117344
> 
> 赞同：0
> 
> 时间：2013-04-20T06:16:46.293
> 
> 标签：ruby-on-rails, database, terminal

所以我目前正在学习 Ruby on Rails 并决定在这里做他们的入门指南：http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

我创建了我的测试应用程序，在他们的教程中是一个博客。我不必配置数据库，因为它说如果您使用预先制作的数据库，则无需进行任何更改（SQLite3）。

因此，我使用创建了数据库`rake db:create`，然后使用它启动了服务器，`rails server`当我去那里时，一切都运行良好，`http://localhost:3000/`我的“欢迎登机”消息就在那里。无论如何，在我回到终端后，我不小心执行了 Command + Q，它在服务器运行时退出了终端。我打开终端备份并连接到我的博客，`cd blog`然后输入`rails server`希望再次启动它，但它不起作用......当我去的时候，`http://localhost:3000/`我只是得到“无法连接到服务器”错误。我什至去删除了包含所有文件的博客文件夹，然后重新启动并再次创建博客，但仍然没有运气。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:29:55.810

转到活动监视器，找到“ruby”进程并全部退出：

![活动监视器](https://i.stack.imgur.com/21Eho.png)

# eclipse - Eclipse 构建“当前项目”从菜单工作，但不使用快捷方式

> ID：16117353
> 
> 赞同：1
> 
> 时间：2013-04-20T06:17:43.017
> 
> 标签：eclipse, build, shortcut

我已将 CTRL-F7 分配给“全部构建”，效果很好。但是，由于我的项目由子项目组成，所以我不想在处理库部分时编译所有内容，因为依赖项目无论如何都会失败。

我还为“构建项目”分配了一个快捷方式 F7，但这没有任何作用。当我使用菜单“Project -> Build project”时，它会构建我正在处理的部分。我还可以在菜单中看到分配了我的快捷方式，因为它显示在那里，但是当我按下它时它不会触发。

这是 Eclipse（Juno 4.3.0）中的错误还是我在这里遗漏了什么？

在快捷方式编辑器中，“Where”子句设置为“In Windows”，与“Build All”快捷方式相同。我也尝试将它设置为 C++ Editor 和其他，但似乎没有一个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:41:16.537

我还在 Eclipse Indigo 中，我已将 F7 分配给 Build Project。有用。可能存在回归，因为我发现了这个错误： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=383497](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383497)

阅读错误以查看是否找到解决方案。尝试清理一次日食。使用 eclipse -clean 启动它或将其添加到您的快捷方式中（不要忘记删除之后的参数，因为 init 非常慢）。
如果它不起作用并且您的源代码受源代码控制，请创建一个临时工作区，在那里复制一堆项目并重试。有时我的工作区已损坏，但很少见。

如果您需要编译许多项目并且它们不会经常更改，那么一种解决方案是创建 jar，指向 jar 并关闭项目。

# c# - 我可以获得一个 MouseOver 事件来显示 ListViewControl 中某个项目的小对话框吗？

> ID：16117362
> 
> 赞同：2
> 
> 时间：2013-04-20T06:18:57.477
> 
> 标签：c#, winforms

**[编辑] - 请参阅下面的编辑，我想我已经弄清楚了！**

我想做与此类似的事情 =>[如何在 Windows.Forms 中制作浮动（工具提示）控件？](https://stackoverflow.com/questions/2461448/how-to-make-a-floating-tooltip-control-in-windows-forms)但想知道现在是否有更好的方法？我已经尝试过这种方法，但我的窗口似乎挂了，而且我通常遇到问题。

我知道如何为表单控件制作工具提示（[此处](https://stackoverflow.com/questions/1339524/c-how-do-i-add-a-tooltip-to-a-control)），但 listView 中的项目似乎并不明显。

对于我的特定用途，我在 ListView 控件中有一个项目列表。如果在***ItemMouseHover***上我能得到那个黄色的小工具提示框，我会很高兴，它用于显示与相关项目相关的一些信息或一些文本。

我创建了一个工具提示（我认为），它只是不会触发。我当然得到了事件，但没有得到工具提示。显然我没有正确地做到这一点。我尝试了以下变体，但似乎都失败了。

```
private void ShowLittleBox(object sender, ListViewItemMouseHoverEventArgs e)
{
    toolTip1 = new ToolTip
    {ToolTipTitle = "File Summary",AutomaticDelay = 10,BackColor = Color.Yellow};
    RichTextBox rtb = new RichTextBox //I needed some window - I used a lot of them
    {AutoSize = true,Visible = true,Text="Please note, only first 5 lines are shown"};

    string myTextDerivedFromObject = "Eventually this will be dynamic ... ";
    toolTip1.Show(myTextDerivedFromObject,rtb); //Also tried activewindow, my listview control etc.

} 
```

不用说，我已经在这个“秋千”上待了大约 4 个小时，需要一点点推动......

[编辑]：我想我破解了 - 我发现 ListView a 包含一个单独的属性，允许每个项目都有自己的工具提示。[ListViewItem.ToolTipText 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.tooltiptext%28v=vs.100%29.aspx) 所以最后，我只需将其设置为 true 并在构建时添加项目工具提示文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:33:57.277

我做了同样的事情，我在表单上放置了一个带有标签控件的面板，并在面板的可见属性上设置了错误，然后在任何对象的 mouseEnter 事件上，我得到 X、Y 位置并在该位置显示面板。

```
Point locationOnForm = AnyObject.FindForm().PointToClient(AnyObject.Parent.PointToScreen(AnyObject.Location));
lblQue.Text = "Text to be shown";
panel8.Location = new Point(locationOnForm.X, locationOnForm.Y+27);
panel8.Size = new Size(470, 30);
panel8.BackColor = Color.SkyBlue;
this.Controls.Add(panel8);
panel8.BringToFront();
panel8.Show(); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:56:43.417

好的，如上所述，我在 ListView 控件中有一个文件列表。为了抢先了解文件中的内容，我最终使用了[ListViewItem.Tag 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.tag.aspx)，曾经有一位 SO 用户告诉我该怎么做[（来自我的另一个问题）](https://stackoverflow.com/questions/16115364/can-i-access-properties-of-a-listviewitem-tag-rather-than-just-the-tostring-me)一旦我附加了一个对象（加载的文件在这种情况下）并在加载时提取了前几行并将它们设置为[ListViewItem.ToolTipText](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.tooltiptext.aspx)属性。

下面是一个人为的示例，可以从 listViewItems 显示工具提示：（对于那些对 C#/VisualStudio*非常*陌生的人：您需要创建一个表单“form1”，并添加一个 ListView 控件“listView1”和一个按钮“button1”）。

```
 namespace SneakPeak
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void Form1_Load(object sender, EventArgs e)
            {
                listView1.ShowItemToolTips = true;

                ListViewItem ItemA = new ListViewItem("my item A");
                myObject ObjectA = new myObject("the description for A");
                ItemA.Tag = ObjectA;
                ItemA.ToolTipText = ((myObject) (ItemA.Tag)).ToString();

                ListViewItem ItemB = new ListViewItem("my item B"); 
                myObject ObjectB = new myObject("the description for B");
                ItemB.Tag = ObjectB;
                ItemB.ToolTipText = ((myObject)(ItemB.Tag)).ToString();

                ListViewItem ItemC = new ListViewItem("my item C"); 
                myObject ObjectC = new myObject("the description for C");
                ItemC.Tag = ObjectC;
                ItemC.ToolTipText = ((myObject)(ItemC.Tag)).ToString();

                ListViewItem ItemD = new ListViewItem("my item D");
                myObject ObjectD = new myObject("the last of the descriptions - description for D that goes off the side of the window");
                ItemD.Tag = ObjectD;
                ItemD.ToolTipText = ((myObject)(ItemD.Tag)).ToString();

                listView1.Items.Add(ItemA);
                listView1.Items.Add(ItemB);
                listView1.Items.Add(ItemC);
                listView1.Items.Add(ItemD);

            }

            public class myObject
            {
                public string filePreview = "";
                public override string ToString()
                {
                    return filePreview;
                }
                public myObject(string s)
                {
                    filePreview = s;
                }
            }

            private void button1_Click(object sender, EventArgs e)
            {
                Close();
            }
        }
    } 
```

理想情况下，我希望能够通过“富文本框”来控制字体等，该文本框的行为类似于工具提示，但还没有找到理想的方法。

有没有更简单的方法告诉我！！！

[编辑：] 做完这一切之后，我现在在 SO [How to set tooltip for a ListviewItem上找到了一个类似的问题](https://stackoverflow.com/questions/2730931/how-to-set-tooltip-for-a-listviewitem)

# java - 使用 Java 发送邮件附件

> ID：16117365
> 
> 赞同：51
> 
> 时间：2013-04-20T06:19:30.737
> 
> 标签：java, email, gmail, email-attachments

我正在尝试使用 Java 和 Gmail 发送电子邮件。我已将我的文件存储在云中，并将存储的文件作为附件发送到我的电子邮件。

它应该将这些文件添加到此邮件中，而不是这些文件的链接。

我怎样才能发送这样的附件？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-20T06:30:22.553

工作代码，我用过Java Mail 1.4.7 jar

```
import java.util.Properties;
import javax.activation.*;
import javax.mail.*;

public class MailProjectClass {

public static void main(String[] args) {

    final String username = "your.mail.id@gmail.com";
    final String password = "your.password";

    Properties props = new Properties();
    props.put("mail.smtp.auth", true);
    props.put("mail.smtp.starttls.enable", true);
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
            new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(username, password);
                }
            });

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("from.mail.id@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse("to.mail.id@gmail.com"));
        message.setSubject("Testing Subject");
        message.setText("PFA");

        MimeBodyPart messageBodyPart = new MimeBodyPart();

        Multipart multipart = new MimeMultipart();

        String file = "path of file to be attached";
        String fileName = "attachmentName";
        DataSource source = new FileDataSource(file);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(fileName);
        multipart.addBodyPart(messageBodyPart);

        message.setContent(multipart);

        System.out.println("Sending");

        Transport.send(message);

        System.out.println("Done");

    } catch (MessagingException e) {
        e.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-06-13T11:30:20.533

由于未知原因，当我向我的 gmail 地址发送电子邮件时，接受的答案部分有效。我有附件，但没有电子邮件的文本。

如果您想要附件和文本，请根据接受的答案尝试此操作：

```
 Properties props = new java.util.Properties();
    props.put("mail.smtp.host", "yourHost");
    props.put("mail.smtp.port", "yourHostPort");
    props.put("mail.smtp.auth", "true");             
    props.put("mail.smtp.starttls.enable", "true");

    // Session session = Session.getDefaultInstance(props, null);
    Session session = Session.getInstance(props,
              new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication("user", "password");
                }
              });

    Message msg = new MimeMessage(session);
    try {
        msg.setFrom(new InternetAddress(mailFrom));
        msg.setRecipient(Message.RecipientType.TO, new InternetAddress(mailTo));
        msg.setSubject("your subject");

        Multipart multipart = new MimeMultipart();

        MimeBodyPart textBodyPart = new MimeBodyPart();
        textBodyPart.setText("your text");

        MimeBodyPart attachmentBodyPart= new MimeBodyPart();
        DataSource source = new FileDataSource(attachementPath); // ex : "C:\\test.pdf"
        attachmentBodyPart.setDataHandler(new DataHandler(source));
        attachmentBodyPart.setFileName(fileName); // ex : "test.pdf"

        multipart.addBodyPart(textBodyPart);  // add the text part
        multipart.addBodyPart(attachmentBodyPart); // add the attachement part

        msg.setContent(multipart);

        Transport.send(msg);
    } catch (MessagingException e) {
        LOGGER.log(Level.SEVERE,"Error while sending email",e);
    } 
```

* * *

**更新 ：**

如果您想以 html 格式的内容发送邮件，您必须这样做

```
 MimeBodyPart textBodyPart = new MimeBodyPart();
    textBodyPart.setContent(content, "text/html"); 
```

所以基本上`setText`是用于原始文本，并且会很好地显示在包括 gmail 在内的每封服务器电子邮件上，`setContent`更多的是用于 html 模板，如果您的内容被格式化为 html，它可能也适用于 gmail

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-03T07:14:40.797

使用 Spring Framework，您可以添加许多附件：

```
package com.mkyong.common;

import javax.mail.MessagingException;
import javax.mail.internet.MimeMessage;

import org.springframework.core.io.FileSystemResource;
import org.springframework.mail.MailParseException;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMessageHelper;

public class MailMail
{
    private JavaMailSender mailSender;
    private SimpleMailMessage simpleMailMessage;

    public void setSimpleMailMessage(SimpleMailMessage simpleMailMessage) {
        this.simpleMailMessage = simpleMailMessage;
    }

    public void setMailSender(JavaMailSender mailSender) {
        this.mailSender = mailSender;
    }

    public void sendMail(String dear, String content) {

       MimeMessage message = mailSender.createMimeMessage();

       try{
        MimeMessageHelper helper = new MimeMessageHelper(message, true);

        helper.setFrom(simpleMailMessage.getFrom());
        helper.setTo(simpleMailMessage.getTo());
        helper.setSubject(simpleMailMessage.getSubject());
        helper.setText(String.format(
            simpleMailMessage.getText(), dear, content));

        FileSystemResource file = new FileSystemResource("/home/abdennour/Documents/cv.pdf");
        helper.addAttachment(file.getFilename(), file);

         }catch (MessagingException e) {
        throw new MailParseException(e);
         }
         mailSender.send(message);
         }
} 
```

要了解如何配置您的项目来处理此代码，请完成阅读[本教程](http://www.mkyong.com/spring/spring-sending-e-mail-with-attachment/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-22T11:28:18.613

这对我有用。

在这里，我假设我的附件是`PDF`类型格式。

发表评论以清楚地理解它。

```
public class MailAttachmentTester {
    public static void main(String[] args) {
        // Recipient's email ID needs to be mentioned.
        String to = "test@gmail.com";
        // Sender's email ID needs to be mentioned
        String from = "tester@gmail.com";
        final String username = "tester@gmail.com";//change accordingly
        final String password = "test";//change accordingly
        // Assuming you are sending email through relay.jangosmtp.net
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");
        // Get the Session object.
        Session session = Session.getInstance(props,
                new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication(username, password);
                    }
                });
        try {
            // Create a default MimeMessage object.
            Message message = new MimeMessage(session);
            // Set From: header field of the header.
            message.setFrom(new InternetAddress(from));
            // Set To: header field of the header.
            message.setRecipients(Message.RecipientType.TO,
                    InternetAddress.parse(to));
            // Set Subject: header field
            message.setSubject("Attachment");
            // Create the message part
            BodyPart messageBodyPart = new MimeBodyPart();
            // Now set the actual message
            messageBodyPart.setText("Please find the attachment below");
            // Create a multipar message
            Multipart multipart = new MimeMultipart();
            // Set text message part
            multipart.addBodyPart(messageBodyPart);
            // Part two is attachment
            messageBodyPart = new MimeBodyPart();
            String filename = "D:/test.PDF";
            DataSource source = new FileDataSource(filename);
            messageBodyPart.setDataHandler(new DataHandler(source));
            messageBodyPart.setFileName(filename);
            multipart.addBodyPart(messageBodyPart);
            // Send the complete message parts
            message.setContent(multipart);
            // Send message
            Transport.send(message);
            System.out.println("Email Sent Successfully !!");
        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-03T13:09:08.977

如果您允许，**它也适用于 multi-attachments**，即 NINCOMPOOP 的上述第一个答案，只需稍作修改，如下所示：

```
DataSource source,source2,source3,source4, ...;  
source = new FileDataSource(myfile);  
messageBodyPart.setDataHandler(new DataHandler(source));  
messageBodyPart.setFileName(myfile);  
multipart.addBodyPart(messageBodyPart);  

source2 = new FileDataSource(myfile2);  
messageBodyPart.setDataHandler(new DataHandler(source2));  
messageBodyPart.setFileName(myfile2);  
multipart.addBodyPart(messageBodyPart);  

source3 = new FileDataSource(myfile3);  
messageBodyPart.setDataHandler(new DataHandler(source3));  
messageBodyPart.setFileName(myfile3);  
multipart.addBodyPart(messageBodyPart);  

source4 = new FileDataSource(myfile4);  
messageBodyPart.setDataHandler(new DataHandler(source4));  
messageBodyPart.setFileName(myfile4);  
multipart.addBodyPart(messageBodyPart);  

...

message.setContent(multipart); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-17T12:24:40.330

要发送 html 文件，我在项目中使用了以下代码。

```
final String userID = "usermail@gmail.com";
final String userPass = "userpass";
final String emailTo = "mailto@gmail.com"

Properties props = new Properties();
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.port", "465");

Session session = Session.getDefaultInstance(props,
        new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(userID, userPass);
            }
        });
try {

    Message message = new MimeMessage(session);
    message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(emailTo));
    message.setSubject("Hello, this is a test mail..");

    Multipart multipart = new MimeMultipart();
    String fileName = "fileName";

    addAttachment(multipart, fileName);

    MimeBodyPart messageBodyPart1 = new MimeBodyPart();
    messageBodyPart1.setText("No need to reply.");
    multipart.addBodyPart(messageBodyPart1);

    message.setContent(multipart);

    Transport.send(message);
    System.out.println("Email successfully sent to: " + emailTo);

} catch (MessagingException e) {
    e.printStackTrace();
}

private static void addAttachment(Multipart multipart, String fileName){
    DataSource source = null;
    File f = new File("filepath" +"/"+ fileName);
    if(f.exists() && !f.isDirectory()) {
        source = new FileDataSource("filepath" +"/"+ fileName);
        BodyPart messageBodyPart = new MimeBodyPart();
        try {
            messageBodyPart.setHeader("Content-Type", "text/html");
            messageBodyPart.setDataHandler(new DataHandler(source));
            messageBodyPart.setFileName(fileName);
            multipart.addBodyPart(messageBodyPart);
        } catch (MessagingException e) {
            e.printStackTrace();
        }
    }
} 
```

# asp.net-mvc - 用于多个控制器的 Mvc 路由

> ID：16117376
> 
> 赞同：0
> 
> 时间：2013-04-20T06:20:50.037
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我的全局文件中有两条路线。propertydetails 的路线运行良好，但不适用于预订 我使用的链接是。知道为什么它不起作用

```
 @Html.ActionLinkWithSpan("BookNow", "Create", "Booking", new {item.ProductId,item.ProductName},"gradient-button")

      @Html.ActionLinkWithSpan("MoreDetails", "Index", "PropertyDetails", new        {item.ProductId,item.ProductName},"") 
 routes.MapRoute(
                   "Booking",
                   "Book/{ProductId}/{ProductName}",
                    new { controller = "BookingController", action = "Create", ProductName = UrlParameter.Optional }
               );

        routes.MapRoute(
                    "PropertyDetails",
                    "Details/{ProductId}/{ProductName}",
                     new { controller = "PropertyDetails", action = "Index", ProductName = UrlParameter.Optional }
                ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:35:49.163

好的，我明白了...刚刚更换

```
 routes.MapRoute(
            name: "Booking",
            url: "{controller}/{ProductId}/{ProductName}",
            defaults: new { controller = "BookingController", action = "Create", ProductId = UrlParameter.Optional }
        ); 
```

# javascript - 我可以使用什么 javaScript 代码以使 tab 键跳过一个 tabindex 而 carrage return 键跳过 X tabindexes？

> ID：16117383
> 
> 赞同：0
> 
> 时间：2013-04-20T06:22:07.707
> 
> 标签：javascript, html, webforms

我是一名业余编码员和 javaScript 新手（或更少），我正在尝试构建一个具有多个（许多）`<textarea>`输入的在线表单。

为了论证，我们假设它是 3 x 3 类型方向：

由于其他功能和性能的原因，我必须使用`<textarea>`而不是`<inputs>`.

![带有文本区域输入的简单示例 html 表单](https://i.stack.imgur.com/MLfzA.png)

如果有人按下 [TAB]，那么正如预期的那样，标签索引会毫无顾虑地遵守 ( A1 --> B1 )。

如果有人按下 [RETURN]，因为它是 a `<textarea>`，它会添加 \n 分隔符，换行并保持在仍然聚焦的`<textarea>`.

我想要发生的是，当一个人按下 [RETURN] 时，三个选项卡索引被“跳过”（如果这是正确的词），焦点转到`<textarea>`前一个焦点的正下方`<textarea>`。

例子：我在A1；我写/输入一些东西；我按[返回]；我被直接带到A2。

[[更新]]

HTML 文本区域代码示例：

```
<textarea data-id="0" class="inputArea colorInput" id="dataInput_0" name="colorInput_row_1" onFocus="classFocused();" onBlur="classBlured();" onKeyUp="splitInput();"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:27:28.173

使用 jQuery javascript 框架，将按键事件侦听器附加到您的文本区域，如果按下的键是 [ENTER]（键代码 13），那么您将焦点转移到您想要的字段（最好为文本区域设置 ID 以轻松识别它们）。

HTML

```
<textarea class="ta" data-id="1"></textarea>
<textarea class="ta" data-id="2"></textarea>
<textarea class="ta" data-id="3"></textarea>

<textarea class="ta" data-id="4"></textarea>
<textarea class="ta" data-id="5"></textarea>
<textarea class="ta" data-id="6"></textarea>

<textarea class="ta" data-id="7"></textarea>
<textarea class="ta" data-id="8"></textarea>
<textarea class="ta" data-id="9"></textarea> 
```

Javascript

```
$(document).ready(function(){

    //attach the event listener on your text areas
    $('.ta').keypress(function(e){
        if (e.keyCode == 13) //check if [enter] was pressed
        {
            var currentID = $(this).attr('data-id'); //get the ID of the text area where this happened
            if (currentID < 7) $('.ta[data-id="' + (currentID + 3) + '"]').focus(); //if there are other text areas down the line, shift the focus
        }
    });

}) 
```

# android - 获取列表视图中的 Json Array 数据

> ID：16117387
> 
> 赞同：0
> 
> 时间：2013-04-20T06:22:38.813
> 
> 标签：android, listview, arrays

我遇到了`json array`数据问题，我尝试了以下代码，我可以得到`json response`完美的结果，但是`listview`即使在响应中我也得到了单个数据，我也得到了单个项目，为什么？

这是代码：

```
URL = "some url";

HttpClient mHttpClient = new DefaultHttpClient();
HttpGet mGetMethod = new HttpGet(URL);
HttpResponse mReponseMessage = mHttpClient.execute(mGetMethod);

String Response = EntityUtils.toString(mReponseMessage.getEntity());
Log.d("TAG", "O/P Response is " + Response);

JSONArray responseObject = new JSONArray(Response);
System.out.println("responseObject="+responseObject);

for(int i=0; i<responseObject.length(); i++) {                      
    obj = responseObject.getJSONObject(i);
} 
```

这是我的 json 回复

```
[{"dmessage":"sfsfs","message":"sfsf","mp3":"Kalimba.mp3","user_message_id":"85","category":"Lottery","title":"dgfs"},{"dmessage":"prueba","message":"prueba","mp3":"NA","user_message_id":"80","category":"Lottery","title":"prueba"},{"dmessage":"prueba","message":"prueba","mp3":"NA","user_message_id":"79","category":"Lottery","title":"prueba"}, 
```

这里 obj 是`response object`，在响应对象中，我也得到了单个值

谁能帮我解决这个问题谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T06:26:16.443

在您的 for 循环中，您将遍历数组中的所有值并将其存储在同一个变量中，该变量每次都替换该值并且仅包含最后一个值。

**解决方案 ：**

```
ArrayList<HashMap<String, String, String, String, String, String>> mp3List = new ArrayList<HashMap<String, String, String, String, String, String>>();
for(int i=0; i<responseObject.length(); i++) 
{                      
    JSONObject obj = responseObject.getJSONObject(i);
    String dmessage= obj.getString("dmessage");
    String message= obj.getString("message");
    String mp3= obj.getString("mp3");
    String userMessageID= obj.getString("user_message_id");
    String category= obj.getString("category");
    String title= obj.getString("title");

    //making use of obtained strings by adding it to some ArrayList to display in the ListView

    HashMap<String, String, String, String, String, String> map = new HashMap<String, String, String, String, String, String>();

     // adding each child node to HashMap key => value
     map.put("dmessage", dmessage);
     map.put("message", message);
     map.put("mp3", mp3);
     map.put("userMessageID", userMessageID);
     map.put("category", category);
     map.put("title", title);

     // adding HashList to ArrayList
     mp3List.add(map);
}

//you have all the data in mp3List. Display it in ListView
ListAdapter adapter = new SimpleAdapter(this, mp3List, custom_listitem_layout_id, new String[] { "dmessage", "message", "mp3", "userMessageID", "category", "title"}, new int[] { dmessage_textview_id, message_textview_id, mp3_textview_id, userMessageID_textview_id, category_textview_id,title_textview_id });
listview.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:27:43.690

看看这个并对解析有一些清晰的了解

> [json解析器](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:27:58.627

您需要正确解析。首先将响应转换为字符串，然后将其解析为 JSON 对象。

用这个：

```
HttpClient mHttpClient = new DefaultHttpClient();
HttpGet mGetMethod = new HttpGet(URL);
HttpResponse mReponseMessage = mHttpClient.execute(mGetMethod);
HttpEntity entity = mResponseMessage.getEntity();
InputStream is = entity.getContent(); 
```

接着

```
try {
BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
}
is.close();
String json = sb.toString();
}
catch(Exception e)
{
 // 
} 
```

下一个，

```
JSONObject jObj = new JSONObject(json);
responseObject=JObj.getJSONArray("array_name");// if passed as an array
for(int i=0; i<responseObject.length(); i++) {                      
JSONObject obj = responseObject.getJSONObject(i);
String dmessage,message,mp3,user_message_id,category,title;
dmessage= obj.getString("dmessage");
message= obj.getString("message");
mp3= obj.getString("mp3");
user_message_id= obj.getString("user_message_id");
category= obj.getString("category");
title= obj.getString("title");

// here you can add it to the list
} 
```

# r - k-正则图的分类性值是多少？

> ID：16117388
> 
> 赞同：0
> 
> 时间：2013-04-20T06:22:42.200
> 
> 标签：r, graph, social-networking, igraph

我想知道特殊类型图表的分类价值。

存在一些用于分析图结构和计算它们的一些度量的工具（这些度量也用于社交网络和一般复杂网络领域）。我生成了一些无向 K-Regular 图并运行 R 的 igraph 库来计算分类性，但其库的结果对于我生成的所有图都是 NAN（非数字）。

我不知道理论上这个值实际上是没有定义的还是正确的值是 1 或 0，并且在这个库的实现和编程中的某些情况下存在限制。

我通过使用 R 的 igraph 包使用此代码是由 SNAP 项目（ [http://snap.stanford.edu/](http://snap.stanford.edu/)`assortativity.degree(sg, directed=FALSE)`
`sg` ）生成的 K-Regular 图，它从文件加载，整个过程针对其他类型的网络和分类完成计算正确，但对于 K-Regular 图存在这个问题。 我还看到这个[页面](https://groups.google.com/group/networkx-discuss/browse_thread/thread/a36ce5e342cc9aa3/48ece23e158ac148?pli=1)提到了环形图的相同问题和一些关于分类价值的注释，但最后我无法完全解决我的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:08:20.033

分类性的定义意味着所有度数相等的*任何图都**将*是未定义的，因为[分类性公式](http://en.wikipedia.org/wiki/Assortativity#Assortativity_coefficient)的分母将为零。换句话说，对于常规图，分类性度量没有明确定义。

# java - 一个代码后字符串拆分性能下降

> ID：16117389
> 
> 赞同：-1
> 
> 时间：2013-04-20T06:22:44.397
> 
> 标签：java, string, split

我在下面测试 sting.split。

```
import java.io.File;

public class TestSplit3 {
  private static final String PROCFS = "/proc/";

  public static void main(String[] args) {
    //split();
    testfile(Integer.parseInt(args[0]) > 0);
    split();
  }

  private static void testfile(Boolean flag) {
    long start = System.currentTimeMillis();
    if (flag) {
      for (int i = 0; i < 1000; i++) {
        new File(PROCFS + i);
      }
    }
    System.out.println("newfile:" + (System.currentTimeMillis() - start));
  }

  public static void split() {
    long start = System.currentTimeMillis();
    for (int j = 0; j < 1000; j++) {
      for (int i = 0; i < 1000; i++) {
        String str = "asas asa s asas asas asa sa sas as as as a a"
            + "asa sasa sa sa sas as as asas as as as as as as"
            + "as as a sas asdasdas dasd asda sd ada d";
        str.toString().split(" ");
      }
    }
    System.out.println("split:" + (System.currentTimeMillis() - start));
  }
} 
```

```
和测试结果：
[mapred@r03c02038 更长]$ ~/opt/taobao/install/jdk-1.7.0_10/bin/java TestSplit3 0
新文件：0
分裂：1772
[mapred@r03c02038 更长]$ ~/opt/taobao/install/jdk-1.7.0_10/bin/java TestSplit3 1
新文件：6
拆分：1763
[mapred@r03c02038 更长]$ ~/jdk-1.6.0_32/bin/java TestSplit3 0
新文件：0
拆分：2833
[mapred@r03c02038 更长]$
[mapred@r03c02038 更长]$ ~/jdk-1.6.0_32/bin/java TestSplit3 1
新文件：5
拆分：3416

```

e，在jdk7中，运行时间是一致的。但是在jdk6中，'TestSplit3 0'比'TestSplit3 1'快。谁能告诉我为什么？以及如何在jdk6中改进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:39:46.713

这很可能是由于您的基准测试存在缺陷。

Java 中的基准测试需要考虑开始执行程序时发生的“JVM 预热”效应这一事实：

*   代码可以“按需”加载。
*   类是“按需”初始化的。
*   方法在执行一段时间后被 JIT 编译。
*   默认情况下，堆从“小”开始，并且可能会在每个 GC 周期后增长。

这些影响意味着您从基准循环中获得的初始结果可能是异常的。您的代码只进行了一次测量，并且无法判断“热身”效果是否会扭曲它。

参考：

*   [如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

# django - 无法使用 Select 作为小部件迭代 ChoiceField

> ID：16117393
> 
> 赞同：4
> 
> 时间：2013-04-20T06:23:39.403
> 
> 标签：django, choicefield

我在遍历*ChoiceField*并从值和标签构建自己的 HTML 时遇到问题。将“widget”参数指定为*Select*时，该字段不再可迭代。

*但是，如果我将其指定为RadioSelect*，它工作正常。

表格：

```
class MyFormCreate( Form ) :
    QUOTES = (
            (34, "Hi, Patrick. Wait, I'M PATRICK!"),
            (21, "I like pie."), 
            (76, "No, this is Patrick!"),
    )
    patrick = ChoiceField(choices = QUOTES, widget = Select) 
```

和模板：

```
<select name="{{form.patrick.name}}">
    {% for option in form.patrick %}
    <option value="{{option.choice_value}}">{{option.choice_label}}</option>
    {% endfor %}
</select> 
```

我究竟做错了什么？

（Python 2.7.3 和 Django 1.4.5）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:26:45.280

这会是你要找的吗？

```
<select name="{{ form.patrick.name }}">
    {% for value, text in form.patrick.field.choices %}
        <option value="{{ value }}">{{ text }}</option>
    {% endfor %}
</select> 
```

此外，空白是您的朋友。:)

# php - 如何在 .htacess 文件上将 https:// 重定向到 https://www？

> ID：16117395
> 
> 赞同：3
> 
> 时间：2013-04-20T06:24:25.637
> 
> 标签：php, apache, .htaccess, ftp, opencart

我正在修改.htacess。我尝试使用以下代码将[https://mydomain.com](https://mydomain.com)更改为[https://www.mydomain.com 。](https://www.mydomain.com)哪个失败了。

```
# REDIRECT HTTPS:// TO HTTPS://WWW.
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^my___domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.my___domain.com/$1 [R=301,L] 
```

我究竟做错了什么？

* * *

作为说明：

如果这有帮助，将 IP 和原始 3_$ (_">http://my3_$.com) 重定向到 _">http://www.3__$.com 我在开始时使用了这些代码，其中工作。

```
# REDIRECT IP TO WWW.
RewriteCond %{HTTP_HOST} ^xxx\.xxx\.xxx\.xxx
RewriteRule (.*) http://www.my___domain.com/$1 [R=301,L]

# REDIRECT HTTP:// TO HTTP://WWW.
RewriteCond %{HTTP_HOST} ^my___domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.my___domain.com/$1 [R=301,L] 
```

我正在尝试重定向 https://，因为在成功修改上述两个之后，我无法登录，因为那些是 https:// 页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:29:59.443

而不是`http://www.___.com/$1`，使用`//www.___.com/$1`. 它将使用 http 或 https，以原始请求中使用的为准。目前，您正在强制使用 http，这似乎与您想要的相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:57:58.450

我用这个重写来重定向`http`到`https`：

```
RewriteCond %{SERVER_PORT} ^80$
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

我想在你的情况下添加这样的东西可以完成这项工作：

```
RewriteCond %{HTTP_HOST} ^domain\.com$
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

唔？

# javascript - 如何强制 jQuery“监听”并激活未来的 AngularJS ng-repeat 元素上的插件？

> ID：16117397
> 
> 赞同：5
> 
> 时间：2013-04-20T06:24:42.123
> 
> 标签：javascript, jquery, angularjs

对 jQuery 有丰富的经验，AngularJS 的新手。

我有一个带有附加jQuery颜色选择器（由类“.colorpicker”标记）的颜色列表（可变编号）的页面。在静态的、PHP 生成的页面版本上，效果很好；但是将其转换为 ng-repeat，jQuery 不会捕获未来的事件。

有没有可以用 $.on() 捕获的事件，或者是否有其他一些偷偷摸摸的最佳实践方法来用 AngularJS 完成这个？我四处搜索，但我找到的每个答案都是如何设置 $.on('click') 或类似的。

```
<ul class="unstyled">
  <li ng-repeat="color in showcolors">
    <input type="color" class="input-mini colorpicker" ng-model="color.hex"> {{color.category}}
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:53:08.010

任何时候想要操作 DOM 或使用 jQuery 功能/插件；是时候下指令了。您可以在 ng-repeat 中添加一个指令，在将 jQuery 颜色选择器添加到 DOM 时将其绑定到输入字段。就像是：

```
<ul class="unstyled">
  <li ng-repeat="color in showcolors">
    <input data-jq-colorpicker type="color" class="input-mini colorpicker" ng-model="color.hex"> {{color.category}}
  </li>
</ul> 
```

然后添加指令：

```
yourApp.directive('jqColorpicker', function(){
    var linkFn = function(scope,element,attrs){
        // element here = $(this)
        // bind your plugin or events (click, hover etc.) here
        element.colorpicker();
        element.bind('click', function(e){
          // do something
        });
    }

    return {
        restrict:'A',
        link: linkFn
    }
}); 
```

请注意，这是未经测试的，但应该可以解决您的问题。如果您设置了 Plunker 或 JSFiddle，我会看看。

另外，请务必查看[Angular UI 的 jQuery passthrough 功能](http://angular-ui.github.io/#directives-jq)。

# php - 如何在 PHP 中使用数组进行 MYSQL 查询？

> ID：16117401
> 
> 赞同：0
> 
> 时间：2013-04-20T06:25:03.123
> 
> 标签：php, mysql, arrays

如果它们在数组中，如何使用先前查询的结果查询数据库？以下是我到目前为止所拥有的。

```
$query = "SELECT * from searchtestdb where engname in ( SELECT synonyms.synonym  FROM words  LEFT JOIN synonyms ON synonyms.word_id = words.word_id WHERE word LIKE '%$searchBox%') ";

while($result = mysql_fetch_array($query)) 
        {
            echo $result['engname'];
            echo "<br> ";
            echo "<br> ";
        } 
```

如何获取 $result['engname'] 并再次查询？我在想类似的东西

```
SELECT * from searchtestdb where engname LIKE '%$result['engname']%'; 
```

但这显然行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:30:16.677

```
while($result = mysql_fetch_array($query)) 
{
   $query2 = "SELECT * from searchtestdb where engname LIKE '%".$result['engname']."%';";
   $result2 = mysql_query($query2);
   while($row = mysql_fetch_array($result2)) 
   {
       echo $row["somthing"];
   }
} 
```

# apache - 修改bootmetro模板创建web商业网站

> ID：16117404
> 
> 赞同：0
> 
> 时间：2013-04-20T06:25:08.780
> 
> 标签：apache, microsoft-metro

我可以修改 BootMetro 模板并使用它来创建商业网站吗？想使用 BootMetro 创建的 css 和 js 文件。它在以下许可下 - [http://www.apache.org/licenses/LICENSE-2.0.txt](http://www.apache.org/licenses/LICENSE-2.0.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:03:07.890

In short, the Apache license makes no distinction on personal or commercial use, you are bound by the terms no matter how you're distributing it.

[This FAQ may help](http://www.apache.org/foundation/license-faq.html), particularly the [non-legalize writeup](http://www.apache.org/foundation/license-faq.html#WhatDoesItMEAN). Note however that it cautions, `Describing legal documents in non-legalese is fraught with potential for misinterpretation`, so if in doubt, consult a lawyer.

# php - PHP 获取文件内容

> ID：16117406
> 
> 赞同：0
> 
> 时间：2013-04-20T06:25:32.627
> 
> 标签：php, image, url, syntax-error, image-resizing

我遇到了一个我无法弄清楚的错误，我正在做的是我有一个字符串或一堆 url，我将它们放入一个数组中，然后循环数组并调整大小并上传图像，但我收到这个错误。任何帮助将不胜感激！

**错误**

```
file_get_contents(http://a513.phobos.apple.com/us/r1000/094/Purple/v4/d4/e4/02/d4e402a3-a485-4d4c-cf9b-90b0af391626/mzl.wbbwbbab.png ) 
[function.file-get-contents]: failed to open stream: HTTP request failed! 
HTTP/1.0 400 Bad Request in "My File" on line 53 
```

**PHP**

```
include("picture-resize.php");

    $image = $_POST['thumbnail'];
    $slug = $_POST['slug'];
    $images = $_POST['screenshots'];
    $list = explode(",", $images);      
    $listlength = count($list);

    $i = 0;

    $image = $_POST['thumbnail'];

    $path = parse_url($image, PHP_URL_PATH);

    $filename = $slug.'-'.$i;

    $extension = pathinfo($path, PATHINFO_EXTENSION);

    $file = $filename.'.'.$extension;

    file_put_contents('../tmp/' . $file, file_get_contents($image));

    $picture = new pic_resize();

    $picture->load('../tmp/'.$file);

    $picture->resizeToWidth(125);

    $picture->save('../images/125x125/'.$file, $picture->image_type);

    unlink('../tmp/'.$file);

    $thumbnail = $file;

    $new_list = array();

    while($listlength > $i) {

        $path = parse_url($list[$i], PHP_URL_PATH);

        $extension = pathinfo($path, PATHINFO_EXTENSION);

        $file = $filename.'.'.$extension;

        file_put_contents('../tmp/' . $file, file_get_contents($list[$i]));

        $picture = new pic_resize();

        $picture->load('../tmp/'.$file);

        $picture->resizeToWidth(640);

        $picture->save('../images/640x320/'.$file, $picture->image_type);

        $picture->resizeToWidth(310);

        $picture->save('../images/310x205/'.$file, $picture->image_type);

        unlink('../tmp/'.$file);

        array_push($new_list, $file);

        $i++;
    }
    $screenshots = implode($new_list, ','); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:30:21.337

```
$a = file_get_contents("http://a513.phobos.apple.com/us/r1000/094/Purple/v4/d4/e4/02/d4e402a3-a485-4d4c-cf9b-90b0af391626/mzl.wbbwbbab.png");
echo strlen($a); 
```

对我有用。它可能是您的环境中的错误（防火墙、wiruses、ISP 修改的 HTTP 请求等）。尝试将此链接粘贴到浏览器中：

`http://a513.phobos.apple.com/us/r1000/094/Purple/v4/d4/e4/02/d4e402a3-a485-4d4c-cf9b-90b0af391626/mzl.wbbwbbab.png`

您看到图像或错误吗？您可以尝试其他工具来下载图像，例如`wget`unix ot [php cUrl](http://pl1.php.net/manual/en/book.curl.php)上的命令。请注意，这不是代码错误 - 此 ia**服务器响应**HTTP 代码 400 - 错误请求，因此您已连接到图像服务器，但生成的 HTTP GET 请求`file_get_contents`无效。

# java - 使用 Http 客户端

> ID：16117414
> 
> 赞同：0
> 
> 时间：2013-04-20T06:26:31.607
> 
> 标签：java, web-services, http, httpclient

我是 Web 服务的新手，但是在阅读了一些文档后，我是如何设法创建 Web 服务的。我还可以通过闲置的位置获取 wsdl 文件： **//?wsdl。** 生成的 WSDL 还包含我的方法（API），我可以使用 SOAP UI 进行测试。但是现在我需要在浏览器中获得响应，所以我决定使用 HTTP 客户端作为休闲方式：-

HttpClient httpClient = new DefaultHttpClient();

```
 HttpGet getRequest = new HttpGet(
    "http://<localhost>/<serviceName>/getCustomerAttributesById?CustomerId=60000");
    HttpResponse response = httpClient.execute(getRequest);

    BufferedReader rd = new BufferedReader
      (new InputStreamReader(response.getEntity().getContent()));

    String line = "";
    while ((line = rd.readLine()) != null) {
      System.out.println("o/p Line:"+line);
    } 
```

但是 o/p 行总是空的。可能是什么原因。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:06:14.497

如果 url 正确并且服务实际上返回了一些东西，那看起来应该可以工作。您可能想检查响应状态，看看它是否真的返回 200（OK）。或者将 URL 粘贴到浏览器中，然后查看返回的内容。

如果一切都失败了，您可能需要为 httpclient 打开调试日志记录。[http://hc.apache.org/httpcomponents-client-ga/logging.html](http://hc.apache.org/httpcomponents-client-ga/logging.html)

顺便提一句。您可能要考虑使用 ResponseHandler，您的代码可能无法正确释放连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:50:15.043

您可以尝试在 http 连接上设置超时。这是示例代码。

```
HttpGet getRequest = new HttpGet(
"http://<localhost>/<serviceName>/getCustomerAttributesById?CustomerId=60000");

HttpParams httpParameters = new BasicHttpParams();
int timeout = 50000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeout);
HttpConnectionParams.setSoTimeout(httpParameters, timeout);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpResponse response = httpClient.execute(getRequest);

BufferedReader rd = new BufferedReader
  (new InputStreamReader(response.getEntity().getContent()));

String line = "";
while ((line = rd.readLine()) != null) {
  System.out.println("o/p Line:"+line);
} 
```

# css - 使用 margin:auto 在段落中的 img 居中不起作用

> ID：16117416
> 
> 赞同：1
> 
> 时间：2013-04-20T06:26:47.363
> 
> 标签：css

我试图在`<p>` 我使用的这个网站[http://www.w3.org/Style/Examples/007/center.en.html 中将](http://www.w3.org/Style/Examples/007/center.en.html)图像居中，并且还在这里找到了类似的示例，但似乎没有任何效果。

我的 HTML 代码是

```
<div class="span4">
     <h3 class="aglow" id="h3Body">Forms</h3>
     <p>
        <a class="btn btn-link "href="teacher_forms_list.html">
           <img class="operationsButtons" src="NewForms.png" alt="forms">
        </a>
     </p>
</div> 
```

和我的 CSS

```
 img.operationsButtons {
       display: block;
       margin-left: auto;
       margin-right: auto;    
   } 
```

但由于某种原因，图像仍然在左侧（附上图像的图片和居中的 h3）

![不居中](https://i.stack.imgur.com/TlJlz.png)

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:30:44.347

简单的说

```
p
{
text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:40:48.323

正如@Tamil Selvan 回答的那样，您可以简单地使用`text-align: center;`-[**演示**](http://jsfiddle.net/b9rCf/)

如果您正在使用，则`margin: auto;`需要为`img`元素定义宽度以及默认情况下是内联元素`display: block;`-[**演示**](http://jsfiddle.net/q3MYH/)`img`[](http://jsfiddle.net/q3MYH/)

# iphone - Objective C 中的条件运算符

> ID：16117417
> 
> 赞同：-5
> 
> 时间：2013-04-20T06:26:49.813
> 
> 标签：iphone, objective-c, conditional-statements, conditional-operator

我们可以像在 C++ 中一样在目标 C 中使用条件运算符吗？我只是尝试这样实现（条件）？真陈述：假陈述；

```
 if(page==1)?(buttonPrev.hidden=TRUE):(buttonPrev.hidden=FALSE); 
```

但它会导致错误“预期表达式”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T06:30:14.667

是的，你可以使用。尝试这样，不要保留 if 语句来检查您的情况是否存在问题。

```
 (page==1)?(buttonPrev.hidden=TRUE):(buttonPrev.hidden=FALSE); 
```

如果您想直接分配值，那么只需使用

```
buttonPrev.hidden=(page==1)?TRUE:FALSE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T06:30:08.210

像这样使用

```
buttonPrev.hidden = (page==1)?TRUE:FALSE; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T06:30:52.053

你了解 的概念`"Conditional operators"`吗？

**句法 ：** `(Condition) ? (Response for TRUE) : (Response For FALSE) ;`

删除`IF`是您问题的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T06:30:23.667

```
buttonPrev.hidden = (page==1) ? TRUE : FALSE; 
```

# php - 使用 jQuery AJAX 通过 FormData 上传文件

> ID：16117420
> 
> 赞同：1
> 
> 时间：2013-04-20T06:26:56.627
> 
> 标签：php, javascript, jquery, ajax, html

我想仅使用 jQuery 上传单个文件，然后将上传表单替换为处理文件上传的 PHP 脚本的输出。

目前，在我单击提交后，我收到了来自 PHP 脚本的空白响应。我认为这是因为表单数据（文件和上传输入）被上传数据覆盖？

非常感谢任何解决此问题的帮助！

这是我的代码：

**HTML**

```
<div id="container">
    <form id="form" enctype="multipart/form-data">
        <input name="file" type="file">
        <input type="hidden" name="upload">
    </form>
    <a href="javascript:void(0)" onclick="uploadData($('#form').serialize(), 'upload.php', '#container'); return false;">Upload &gt;</a>
</div> 
```

**JavaScript**

```
function uploadData(data, url, container) {

    var formData = new FormData($(data)[0]);

    $.ajax({
        type: 'POST',
        url: url,
        data: formData,
        cache: false,
        contentType: false,
        processData: false,
        success: function(response) {
            $(container).html(response);
        },
        error: function() {
            alert('Error!');
        },
    });

    return false;
}; 
```

**PHP**

```
if (isset($_POST['upload'])) {

    // check the file has been uploaded
    if (isset($_FILES['file'])) {

        // check if there was an error uploading the file
        if ($_FILES['file']['error'] > 0) {

            // display error
            echo 'Error: ' . $_FILES['file']['error'];
        } else {

            // move and store file (overwrite if it already exists)
            $fileName = '/upload/' . $_FILES['file']['name'];
            move_uploaded_file($_FILES['file']['tmp_name'], $fileName);

            echo 'File uploaded successfully';
        }
    } else {

        die ('Error: No file selected for upload');
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:41:56.337

我不认为 ajax 可以处理文件上传。您是否检查过该文件实际上已上传？

如果为真，则您的响应为空，因为`isset($_POST['upload'])`返回`false`。尝试添加最后一个 else 语句，以检查我在说什么：

```
if (isset($_POST['upload'])) {
    ...
} else {
    die ('Error: AJAX cannot handle file uploads');
} 
```

# magento - 获取多级类别名称

> ID：16117423
> 
> 赞同：0
> 
> 时间：2013-04-20T06:27:09.377
> 
> 标签：magento, magento-1.7

我在一个网站上工作，我得到了一个类别的父类别的名称。但是如何获取包含多个子类别的主类别的名称。就像一个主类别“A”有“B”作为子类别，而“C”作为子类别，它作为另一个子类别称为“D”。如果产品属于“B”类，我设法获得了“A”类的名称。但如果产品属于“D”类别，则不了解如何获取类别名称“A”。请在这方面提供帮助。我获取父名称的代码是这样的。

```
$currentCat = Mage::registry('current_category');
$parentId = Mage::registry('current_category')->getParentId();
$parent = Mage::getModel('catalog/category')->load($parentId);
$parentname = $parent->getName(); 
```

上面的代码将获取当前类别的父类别名称。但是如何获得多级父名。请帮助我。我是magento的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:22:07.853

```
`
 $parentId = Mage::registry('current_category')->getParentId();
 $parent = Mage::getModel('catalog/category')->load($parentId);
 while($parentId != 0) {//check for root category
     $parent_cat_array[] = $parent->getName();
     $parentId = $parent->getParentId();
     $parent = Mage::getModel('catalog/category')->load($parentId);
 }

 print_r($parent_cat_array);
 ` 
```

只需与每个父级迭代它，直到它到达根类别

# sqlite - SenchaTouch2中使用sqlite数据库

> ID：16117429
> 
> 赞同：-2
> 
> 时间：2013-04-20T06:28:08.060
> 
> 标签：sqlite, sencha-touch, sencha-touch-2

如何在 senchatouch2 中使用 sqlite 数据库。在我使用的模型中，

> 代理：{类型：“sql”，数据库：“ContactsDB”}

出现错误..请提供示例代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T16:02:57.723

这正是我所拥有的。我只是把它放在模型的配置中。

```
config: {
    identifier: {
        type: 'uuid'
    },
    fields: [
        {name: 'username', type: 'string'}, 
        {name: 'password', type: 'string' },
    ],
    proxy: {
       type: "sql",
       database: "FullContact",
    }
}, 
```

请记住包括参考：

要求：['Ext.data.identifier.Uuid','Ext.data.proxy.Sql',],

# c++ - 如何在运行时将值推回融合向量？

> ID：16117436
> 
> 赞同：0
> 
> 时间：2013-04-20T06:29:03.660
> 
> 标签：c++, boost, boost-fusion

如何在运行时将值推回融合向量？

```
 typedef boost::fusion::vector<A*, B*, C*> vec_t;

  vec_t vec_;

  vec_.push_back(new A()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:10:51.397

在 a 上完成的序列操作都是`fusion::vector`仅编译时的。一旦在编译时计算了类型，a`fusion::vector`就变成了一个元组。

如果你想要一个运行时可变向量，那么你应该使用`std::vector`.

# c - 我的程序逻辑有什么问题？

> ID：16117439
> 
> 赞同：0
> 
> 时间：2013-04-20T06:29:35.817
> 
> 标签：c, while-loop, logic

我的程序逻辑有什么问题。由于某种原因，当我在玩家之间交替回合时，当它到达第二回合时，它会跳过它，并且游戏似乎少了一步。数组是否会改变，即使我在主函数上方声明它？tictactoe 游戏的位置是

1 |2 | 3

* * *

4 | 5 | 6

* * *

6 | 8 | 9

代码

```
#include <stdio.h>
int check(char player);
void move(char player);
void outprint(void);
char board[3][3] ;

int main(void)
{
int first;
char player1, player2;

        printf("Player 1: Choose your symbol: \n");
        player1 = getchar();
        getchar();

        printf("Player 2: Choose your symbol: \n");
        player2 = getchar();
        getchar();

int i=0;
int win;
char turn;
while(win == 0)
{
        if((i%2) == 0){
                turn = player1;
                move(player1);
                win = check(player1);
                outprint();}
        else {
                turn = player2;
                move(player2);
                win = check(player2);
                outprint();}
        i++;
}

        if (i == 8)
                printf("its a tie");
        else
                printf("the winner is %c", turn);

return 0;
}

/*printing the board that takes in a placement int*/
void outprint(void)
{
        int r;
        printf("\n");
        for (r = 0; r < 3; r++){
                printf(" %c | %c | %c \n" , board[r][0], board[r][2], board[r][3]);
        if (r != 2)
                printf("___________\n");
        } printf("\n");
return;
}

/*check to see if someone won*/
int check(char player)
{
        int r, c;

        for ( r = 0 ; r <3 ; r++)
        {
                if ((board[r][0] == player) && (board[r][1] == player) && (board[r][2] == player))
                        return 1;
        }

        for ( c = 0 ; c <3 ; c++)
        {
                if ((board[0][c] == player) && (board[1][c] == player) && (board[2][c] == player))
                        return 1;
        }

        if((board[0][0] == player) && (board[1][1] == player) && (board[2][2] == player))
                return 1;

        if((board[0][2] == player) && (board[1][1] == player) && (board[2][0] == player))
                return 1;

        return 0;
}

void move(char player)
{
        int place;
        printf("player %c, enter placement: \n", player);
        scanf("%d", &place);

        if (place == 1)
                board[0][0] = player;
        else if (place == 2)
                board[0][1] = player;
        else if (place == 3)
                board[0][2] = player;

        else if (place == 4)
                board[1][0] = player;
        else if (place == 5)
                board[1][1] = player;
        else if (place == 6)
                board[1][2] = player;

        else if (place == 7)
                board[2][0] = player;
        else if (place == 8)
                board[2][1] = player;
        else if (place == 9)
                board[2][2] = player;
} 
```

输出

```
Player 1: Choose your symbol: 
x
Player 2: Choose your symbol: 
o
player x, enter placement: 
1

 x |  |  
___________
  |  |  
___________
  |  |  

player o, enter placement: 
2

 x |  |  
___________
  |  |  
___________
  |  |  

player x, enter placement: 
3

 x | x |  
___________
  |  |  
___________
  |  |  

player o, enter placement: 
4

 x | x | o 
___________
 o |  |  
___________
  |  |  

player x, enter placement: 
5

 x | x | o 
___________
 o |  |  
___________
  |  |  

player o, enter placement: 
6

 x | x | o 
___________
 o | o |  
___________
  |  |  

player x, enter placement: 
7

 x | x | o 
___________
 o | o | x 
___________
 x |  |  

the winner is x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:39:19.647

1，在`void outprint(void)`，改变

```
printf(" %c | %c | %c \n" , board[r][0], board[r][2], board[r][3]); 
```

进入

```
printf(" %c | %c | %c \n" , board[r][0], board[r][1], board[r][2]); 
```

2、在`int main(void)`中，`int win;`变为`int win = 0;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:35:04.040

看起来您需要将板初始化为空格。

```
char board[3][3] = { "   ", "   ", "    " }; 
```

看起来你什么都没有打印。可能来自未初始化数据的不可打印垃圾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:16:58.897

尝试在您的 move() 函数中的 scanf("%d", &place) 中添加 getchar() ，就像您在第一个输入条目中所做的那样：

```
void move(char player)
{
    int place;
    printf("player %c, enter placement: \n", player);
    scanf("%d", &place);
    getchar(); 
```

# lisp - 如何编译和运行用 T（Lisp 方言）编写的程序

> ID：16117444
> 
> 赞同：1
> 
> 时间：2013-04-20T06:30:10.140
> 
> 标签：lisp, scheme, vax

我想在 1980 年代编译并运行一个用 T 编程语言（Lisp 方言）编写的程序。我检查了[T 项目](http://mumble.net/~jar/tproject/)，但它似乎只适用于 VAX 机器（和随附的编译器）？

T 有没有现代的编译器？还是一些兼容的现代方言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T13:04:08.893

此[页面](http://web.archive.org/web/20070103020434/http://mumble.net/~campbell/t/t.html)列出了 T 已移植到的以下平台：

*   Ultrix (vax)
*   阿波罗域/操作系统 (m68k)
*   HP/UX (m68k)
*   Mac/AUX (m68k)
*   下一个 (m68k)
*   SunOS 3 (m68k)
*   SunOS 4 及更高版本 / Solaris (sparc)
*   安可 Multimax (n32k)
*   DEC3100 (pmax mips)
*   SGI 虹膜 (mips)
*   连接机器 5 上的 Unix (sparc)

同一页面提供了 Sparc 图像，所以我会寻找 Sparc 模拟器。对于后者，请查看：[在 X86-64 上运行 Solaris Sparc 软件](http://blog.boreas.ro/2008/03/runing-solaris-sparc-software-on-x86-64.html)

另外，我会向 T Revival 项目背后的人发送邮件。

*   Taylor R. Campbell：（格式 '#f "~A@~A.net" "campbell" "mumble"）
*   Brian Mastenbrook：（格式 '#f "~A@cs.~A.edu" "bmastenb" "indiana"）

# android - JAVA - 在 android 中通过 GCM 发送类

> ID：16117456
> 
> 赞同：3
> 
> 时间：2013-04-20T06:31:13.737
> 
> 标签：android, google-cloud-messaging

假设我有一个名为“MyClass”的课程。我需要通过 GCM 将它从我的服务器发送到 Android 手机。现在，我通过分别发送其所有字段并在手机上再次构建 MyClass 来做到这一点。有没有办法直接通过 GCM 发送对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T15:29:06.520

无需单独发送所有字段，您可以将它们编码为您喜欢的序列化格式（XML、JSON 等），并在单个字段中传递对象的字符串表示形式。然后，您的应用程序需要有一种方法来反序列化该字段中的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T11:03:15.950

没搞清楚你。但是，如果您的意思是只需要通过 GCM 发送一组字段，请创建一个 JSONObject 并发送它。据我所知，您需要将类编码为 JSONObject 并将 Object 再次解码为类对象。

# css - 需要帮助了解我应该如何定义 oocss 对象和皮肤

> ID：16117459
> 
> 赞同：2
> 
> 时间：2013-04-20T06:31:31.027
> 
> 标签：css, oocss, bem

在我问这个问题之前，这是我所指的代码：

## 盒子对象

用于在 Bootstrap 中将内容框起来，例如岛屿或小岛。

```
.box { margin-bottom: 24px; padding: 12px; }    
.box--s { padding: 8px 12px; }  
.box--l { padding: 24px 12px; } 
```

## 圆形皮肤

制作圆角。它被几个抽象类使用，例如box。

```
.round { border-radius: 4px; }  
.round--s { border-radius:2px; }    
.round--l { border-radius:8px; } 
```

在对抽象进行蒙皮的代码中，您将编写：

```
<div class="round box">  Example </div> 
```

我还有其他扩展框的皮肤，例如灰色、警报和标签。

* * *

# 现在的问题

我正在研究一个按钮对象。但是既然它和box有同样的规则和修饰符，并且可以有同样的round修饰符，我应该把它声明为一个皮肤吗？所有按钮所做的都是为“外观”添加大约四个规则如果它与边距或填充混淆，我会说它应该是一个对象。

在你会写的代码中

```
<a class="round btn box">  Example </a> 
```

或将其调整为更小

```
<a class="round btn box box--s">  Example </a> 
```

保持这种干燥过度吗？让我担心的是按钮是页面上如此常见的元素 - 但实际上它只是扩展了一个对象和我已经编写的修饰符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T11:57:36.673

这一切都归结为我们是否应该有全局修饰符（如.round、.box）的问题。至于我，那些与它们相关的语义太少了，我更喜欢将它们集成到单独的对象中，总是。诸如“.hidden”、“.round”或“.green”之类的全局事物不应该作为独立实体可重用。

所以，我更喜欢有一个在语义上与“盒子”不同的“按钮”对象。该按钮的所有修改都将是该按钮的组成部分，而不是某些全局类。如果您需要使事物变圆，请在特定对象上使用修饰符；为了统一值，你总是有你的 CSS 预处理器，它不必在语义（即基于类名）级别上公开。

顺便说一句，这完全是我个人的看法。

# c - 与 Ubuntu 相比，我的 C 代码在 Mac 中运行缓慢

> ID：16117462
> 
> 赞同：-1
> 
> 时间：2013-04-20T06:31:45.247
> 
> 标签：c, performance, macos, gcc

我用 C 编写了科学代码。我在 Ubuntu 中使用 gcc 4.7.2 编译代码，在 MBP 中使用 gcc 4.2 编译代码。我的 Makefile 看起来像这样：

```
CC = gcc
CFLAGS = -c -fPIC -Wall -O3 -lpthread -g
BaseDir = /Users/admin/
libName = libTTVS.so
Include = -I$(BaseDir)UMFPACK/Include -I$(BaseDir)AMD/Include -I$(BaseDir)SuiteSparse_config
Lib = -L$(BaseDir)UMFPACK/Lib -L$(BaseDir)AMD/Lib -L$(BaseDir)SuiteSparse_config -L$(BaseDir)GotoBLAS2
AddFiles = -lumfpack -lamd -lsuitesparseconfig -lgoto2
StaticLibs = $(BaseDir)UMFPACK/Lib/libumfpack.a $(BaseDir)AMD/Lib/libamd.a $(BaseDir)SuiteSparse_config/libsuitesparseconfig.a $(BaseDir)GotoBLAS2/libgoto2.a
all: AlgebraFuncs.o QSP.o UpdateAlgVars.o AlgVarsJac.o ExtraRoutines.o SolveMultiStepSolverC.o TTVS.o TTVS.h
        $(CC) $(Include) $(Lib) $(AddFiles) -shared -lpthread -o $(libName) $^ -lm -g $(StaticLibs)

AlgebraFuncs.o: AlgebraFuncs.c TTVS.h
        $(CC) $(Include) $(CFLAGS) $^

QSP.o: QSP.c TTVS.h
        $(CC) $(Include) $(CFLAGS) $^

UpdateAlgVars.o: UpdateAlgVars.c TTVS.h
        $(CC) $(Include) $(CFLAGS) $^

AlgVarsJac.o: AlgVarsJac.c TTVS.h
        $(CC) $(CFLAGS) $^

ExtraRoutines.o: ExtraRoutines.c TTVS.h
        $(CC) $(CFLAGS) $^

SolveMultiStepSolverC.o: SolveMultiStepSolverC.c TTVS.h
        $(CC) $(Include) $(CFLAGS) $^

TTVS.o: TTVS.c TTVS.h
        $(CC) $(Include) $(CFLAGS) $^ 
```

如您所见，我使用 -O3 来编译源代码。

问题是编译后的代码在 Mac 中非常慢。在 Ubuntu 中，代码在 0.89 秒内执行，而在 MBP 中，需要 7.8 秒。我还在 MATLAB 中实现了代码，结果如下：Ubuntu：4 秒，MBP：5.5 秒。如您所见，C 代码的运行速度甚至比 MATLAB 还要慢，这是没有意义的。虽然 gcc 版本在两个平台上并不相同，但我希望它们至少接近。我的主要问题是我什至不知道从哪里开始解决问题或我应该检查什么。

这是两台机器的规格： Ubuntu：Core i7 2600 @3.4GHz，四核，8GB Ram MBP：Core i5 @2.5GHz，8GB Ram

我知道 Ubuntu 具有更强大的 CPU，但考虑到 MATLAB 的结果，我不明白为什么 C 代码在 Ubuntu 中要快得多。它应该更快，但不是 8 倍！

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T06:46:26.377

您使用的旧编译器对 CPU 支持的指令没有优化支持。尝试改用 Clang，Apple 前段时间停止支持 GCC，并在新版本的 Xcode 中切换到此编译器。

# ruby-on-rails - Rails 方法在控制台中有效，但在浏览器中无效

> ID：16117469
> 
> 赞同：0
> 
> 时间：2013-04-20T06:32:39.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wget, delayed-job

这是我在模型中所做的：

```
:after_save after_save

def after_save
    self.delay.do_thing
end

def do_thing
    Dir.mkdir("#{Rails.root}/my/path")
    system("cd #{Rails.root}/my/path && wget -with-some-flags")
end 
```

这在开发中完美无缺。但是，在生产中，什么都没有发生。没有错误，什么都没有。

我检查了几件事，例如：

*   在运行之前将命令发送到日志以确保它实际上是正确构建的
*   手动运行命令以检查它是否正常工作
*   打开一个生产 Rails shell 并执行`myobject.do_thing`，这也有效！
*   在反引号和命令之间切换`system()`，以检查它是否与子外壳有关
*   添加绝对命令路径，例如`/usr/bin/wget`，它也适用于命令行，但不适用于 Web 浏览器。
*   检查它保存到的文件夹的权限

我知道该`do_thing`方法正在运行，因为它还在 do 的过程中创建了一个文件夹，该文件夹`thing`确实出现在文件系统中，而不是 wget 的结果。

我真的被难住了。有任何想法吗？

# asp.net - 由于 UrlRewrite 未找到 ScriptManager 的 AXD 资源

> ID：16117470
> 
> 赞同：0
> 
> 时间：2013-04-20T06:32:48.470
> 
> 标签：asp.net, url-rewriting

我用来从文件`UrlRewrite`中删除。`.aspx`我正在使用的规则：

```
<rule name="RewriteASPX">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll">
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="{R:1}.aspx" />
</rule> 
```

在我的一个 Web 表单中，我使用`ScriptManager`. 当页面加载时，一些`.axd`文件也被链接，例如：

`WebResource.axd?d=LONG_STRING`

但是，它告诉我上面的文件没有找到，请求的 URL 是： `/WebResource.axd.aspx`

我认为我的规则中的条件应该过滤这样的案例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:12:47.840

我设法解决了这个问题。

我这样改变了规则：

```
<match url="^[^.]+$" /> 
```

现在它不像我提到的那样将规则应用于文件，而只应用于无扩展名的文件。

# javascript - js / jquery：如何随机化图像

> ID：16117472
> 
> 赞同：0
> 
> 时间：2013-04-20T06:33:16.713
> 
> 标签：javascript, jquery, html, image, random

我有一个脚本，每次倒计时达到 0 时都会替换图像。虽然我想知道这是否可能，以及如何让这些图像（我只是按顺序列出）在每次刷新页面时随机化等.

这是所有代码*（图像位于“//在此数组中填充图像”之前）*：

```
<div id="counter_2" class="counter">     
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript" charset="UTF-8"></script>
    <script src="js/jquery.countdown.js" type="text/javascript" charset="UTF-8"></script>
    <script type="text/javascript">
        <!-- The ready() function will force the browser to run wait running the javascript until the entire page has loaded -->
        $(document).ready(function() {
        // The jquery code for constructing and starting the counter
        // has been wrapped inside a function so we can call it whenever we want to
        function startCounter(imageLoader){
            $('#counter_2').countdown({
                 image: 'img/digits.png',
                 startTime: '00:10',
                 timerEnd: function(){ callback(imageLoader) },
                 format: 'mm:ss'
            })
        }
        // Takes care of whatever need to be done everytime
        function callback(imageLoader){
            // Replace image
            $('#image').attr('src', imageLoader.nextImage());
            $('#counter_2').empty(); // Clear the finished counter, so a new can be constructed in its place
            startCounter(imageLoader); // Construct a new counter and starts it
        }
        function ImageLoader(images){
            this.images = images;
            this.current = 0;                 
            this.nextImage = function(){
                this.current = (this.current+1) % this.images.length;
                return this.images[this.current];;
            }
        }
        // Fill in images in this array
        imageLoader = new ImageLoader(['img/wallpapers/2.jpg', 'img/wallpapers/3.jpg', 'img/wallpapers/4.jpg', 'img/wallpapers/5.jpg', 'img/wallpapers/6.jpg', 'img/wallpapers/7.jpg', 'img/wallpapers/9.jpg', 'img/wallpapers/10.jpg', 'img/wallpapers/11.jpg', 'img/wallpapers/12.jpg', 'img/wallpapers/13.jpg', 'img/wallpapers/14.jpg',  'img/wallpapers/15.jpg', 'img/wallpapers/16.jpg', 'img/wallpapers/17.jpg', 'img/wallpapers/18.jpg', 'img/wallpapers/19.jpg', 'img/wallpapers/20.jpg', 'img/wallpapers/21.jpg', 'img/wallpapers/22.jpg', 'img/wallpapers/23.jpg', 'img/wallpapers/24.jpg', 'img/wallpapers/25.jpg', 'img/wallpapers/26.jpg', 'img/wallpapers/27.jpg', 'img/wallpapers/28.jpg', 'img/wallpapers/29.jpg', 'img/wallpapers/30.jpg', 'img/wallpapers/31.jpg', 'img/wallpapers/32.jpg', 'img/wallpapers/33.jpg', 'img/wallpapers/34.jpg', 'img/wallpapers/35.jpg', 'img/wallpapers/36.jpg', 'img/wallpapers/37.jpg', 'img/wallpapers/38.jpg', 'img/wallpapers/39.jpg', 'img/wallpapers/40.jpg', 'img/wallpapers/41.jpg']);
        startCounter(imageLoader); // Set everything off! (Construct a new counter and starts it)
        });       
    </script>
<div id="middle_wallpaper-actual">              
            <img id="image" src="img/wallpapers/1.jpg" alt="wallpapers">                
          </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:36:39.070

代替

```
this.current = (this.current+1) % this.images.length; 
```

和

```
this.current = Math.floor(Math.random() * this.images.length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:10:42.390

您可以使用该`Math.random`函数生成随机数。例如，要生成 和 之间的随机数`0`，`9`您可以执行以下操作：

`var num = Math.floor(Math.random() * 10);`

我已经实现了一个`ImageLoader`将返回随机图像并且**在它们全部显示之前永远不会返回相同图像的方法**。

[http://jsfiddle.net/dUZSZ/2/](http://jsfiddle.net/dUZSZ/2/)

```
function ImageLoader(images) {
    this.images = images;
    this.usedIndexes = {};
    this.displayedCount = 0;
}

ImageLoader.prototype.nextImage = function () {
    var self = this,
        len = self.images.length,
        usedIndexes = self.usedIndexes,
        lastBatchIndex = self.lastBatchIndex,
        denyLastBatchIndex = self.displayedCount !== len - 1,
        index;

    if (this.displayedCount === len) {
        lastBatchIndex = self.lastBatchIndex = self.lastIndex;
        usedIndexes = self.usedIndexes = {};
        self.displayedCount = 0;
    }

    do {
        index = Math.floor(Math.random() * len);
    } while (usedIndexes[index] || (lastBatchIndex === index && denyLastBatchIndex));

    self.displayedCount++;
    usedIndexes[self.lastIndex = index] = true;

    return self.images[index];
}; 
```

# iphone - 如何找到任何整数值的排列和组合？

> ID：16117473
> 
> 赞同：1
> 
> 时间：2013-04-20T06:33:31.147
> 
> 标签：iphone, ios, objective-c, xcode

我想在 Objective CI 中找到排列和组合，但它们在我的代码中存在一些问题，我不明白它发生在哪里。实际上我想在文本字段中打印值，但它会打印我输入的最后一个值。我使用了下面给出的代码。请任何人帮助我..

```
 typedef enum{Power,Exponent,nCr,nPr} CalcOperation;
    NSString *storage;
    CalcOperation operation;
   -(IBAction)combination{ 
    operation = nPr; 
    storage = label.text;
    textField.text=@"";
    label.text = @"";
    }

   -(int) factorial:(int)n{
   int d = n;
   int temp = 1;
   for(int b = 2; b <= d; b++){
    temp = temp*b;
   }
  //NSLog(@"the factorials is = %i",temp);

  return temp;
 }

 -(IBAction)equalButton{
  float tempo = [storage floatValue];
  float b = [label.text floatValue];
  NSString *val = [[NSString alloc]initWithFormat:@"%f" , b];  

    switch(operation) {
     case nCr:

     textField.text = [[NSString alloc]initWithFormat:@"%f",[self factorial:tempo] / ([self factorial:[val floatValue]] * [self factorial:tempo-[val floatValue]])]; 
            //textField.text = [[NSString alloc]initWithFormat:@"%f",[val floatValue]+tempo+10];
          NSLog(@"combination %d",[self factorial:tempo] / ([self factorial:[val floatValue]] * [self factorial:tempo-[val floatValue]]));
            break;
    case nPr:

            textField.text = [[NSString alloc]initWithFormat:@"%f",[self factorial:tempo] / [self factorial:tempo-[val floatValue]]]; 
           NSLog(@"permutations %d",[self factorial:tempo] / ([self factorial:tempo-[val floatValue]]));
            break;  `
                  }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:12:50.123

//计算 nCr 其中 n = tempo, r = b

```
int tempo = [storage intValue];
int b = [label.text intValue];

float tempCb =  (float)[self factorial:tempo] / ([self factorial:b] * [self factorial:tempo-b])]; 

            break; 
```

# blackberry - 即使关闭黑莓如何运行应用程序

> ID：16117475
> 
> 赞同：1
> 
> 时间：2013-04-20T06:33:57.173
> 
> 标签：blackberry

如何在黑莓中制作闹钟应用程序？

这意味着我有一个时间选择器，用户可以在其中选择时间，然后我保存该时间并在系统时间与该时间匹配时显示一个对话框。

我已经使用过`RealtimeClockListener`，该方法`clockUpdated()`每分钟都会给我时间。现在当我关闭应用程序时，该方法也关闭了

如果应用程序已关闭，我想执行该方法

```
public void clockUpdated() 
{
    int hour = Calendar.getInstance().get(Calendar.HOUR_OF_DAY);
    int minute = Calendar.getInstance().get(Calendar.MINUTE);
    //System.out.println("----"+Calendar.getInstance().get(Calendar.AM_PM));
    String am = ""+Calendar.getInstance().get(Calendar.AM_PM); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:58:29.787

您必须使用备用入口点并在设备启动时启动后台应用程序以侦听 RealTimeClockListener 事件。使用持久化存储和共享闹钟时间数据。

有关更多详细信息，请参阅[在后台运行第 1](http://devblog.blackberry.com/2010/06/super-apps-java-series-running-in-the-background-part-1/)部分和[第 2 部分](http://devblog.blackberry.com/2010/06/running-in-the-background-part-2/)以及[创建始终在线的体验](http://docs.blackberry.com/en/developers/deliverables/23567/Always_on_1380986_11.jsp)。

# objective-c - 无法强制设备更改 UIOrientation

> ID：16117479
> 
> 赞同：0
> 
> 时间：2013-04-20T06:34:35.393
> 
> 标签：objective-c, uiimagepickercontroller, uiinterfaceorientation

我有一个 vc，它以模态方式添加一个图像选择器控制器，然后在选择 pic 时返回到同一个 vc。通过 PickerController 获取图像后，我将图像添加到屏幕上，如果图片是横向的，我希望设备自动更改为横向，如果图片是纵向，我希望设备自动更改为纵向。

我没有成功尝试这两种方法来强制设备进入横向

```
1\. 

[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft];

2\. 
[UIViewController attemptRotationToDeviceOrientation]; 

-(NSUInteger)supportedInterfaceOrientations
{

if (!isPortrait) //isPortrait is false when pic is landscape
    return UIInterfaceOrientationMaskLandscape;

} 
```

或者，我想知道是否最好只为图片实例化一个单独的 vc。在这个[问题之后我已经避免了它](https://stackoverflow.com/questions/15997238/correct-view-controller-to-deal-with-picture-from-uiimagepickercontroller)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:47:44.337

我的猜测是你必须在 ViewController`[[UIApplication sharedApplication] setStatusBarOrientation:`的方法内部调用.`viewWillAppear:``UIImagePickerController`

为此，您需要首先了解图像方向，您可以执行以下操作：

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    if(myOrientation>0)
        [UIApplication sharedApplication].statusBarOrientation = myOrientation;
}

- (void)presentPicker {
    UIImagePickerController* imgPicker = [[UIImagePickerController alloc] init];
    imgPicker.delegate = self;
    [self presentViewController:imgPicker animated:YES completion:nil];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    UIImage* image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    if(image.size.width>image.size.height)
        myOrientation = UIInterfaceOrientationLandscapeLeft;
    else
        myOrientation = UIInterfaceOrientationPortrait;

    [picker dismissViewControllerAnimated:YES completion:nil];
} 
```

另外，不要忘记在 plist 中设置初始和支持的界面方向（第一个支持的方向必须等于初始方向）

# iphone - 在作为 UIScrollview 的子视图的 UIImageview 上添加 UIPinchGestureRecognizer

> ID：16117482
> 
> 赞同：0
> 
> 时间：2013-04-20T06:34:50.477
> 
> 标签：iphone

我正在使用一个 UIScrollview 和 UIimageview，这是 UIScrollview 的子视图，我想在 UIImageview 上使用 UIPinchgesturerecognizer，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:38:05.033

很简单，你可以像这样使用它：

```
yourImageView = [[UIImageView alloc] initWithImage:yourImage];
[yourScrollView addSubview:yourImageView];
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
[yourImageView addGestureRecognizer:singleTap];
[sibgleTap release]; 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:54:03.960

谷歌搜索后我得到了答案，我禁用了滚动视图的所有手势，然后设置 UIImageview 的用户交互是的，我使用此代码禁用了 UIScrollview 的手势

```
 for (UIGestureRecognizer* recognizer in [scrollviewFrame1 gestureRecognizers]) {
            if ([recognizer isKindOfClass:[UIPinchGestureRecognizer class]]) {
                [recognizer setEnabled:NO];
            }
        } 
```

# jquery - 添加到购物车不起作用

> ID：16117483
> 
> 赞同：0
> 
> 时间：2013-04-20T06:35:03.103
> 
> 标签：jquery, magento

我正在为magento开发一个主题，我有两个问题。一种是当我单击一个项目以查看其页面并单击添加到购物车时，它不会加起来。在控制台中查看时，我发现“productaddtocartform 未定义”，当我去结账时，逐步手风琴不起作用。我相信这两件事是相互关联的？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:24:05.397

检查您的 jquery 是否与原型冲突。为此使用 noConflict。

我认为这会解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:11:53.507

你在你的主题中安装了 jQuery 吗？检查你是否有 no.Conflict 文件，并尝试先加载 jQuery，然后 jQuery 没有冲突，最后是 Prototype。由于这个原因，我曾经遇到过类似的问题。我希望这有帮助！

PS：还要检查您是否有一次或多次加载 jQuery！

# jquery - 使用 jquery 显示/隐藏元素

> ID：16117490
> 
> 赞同：2
> 
> 时间：2013-04-20T06:36:01.503
> 
> 标签：jquery, html, show-hide

我有元素（div），

命名：元素1，元素2，元素3

默认情况下：element1 可见，element2 可见，element3 隐藏

这是我使用的代码

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#element3').hide();
        $('#element1').click(function () {
            $('#element3').toggle(400);
        });
    });
</script> 
```

当我单击 element1 时，我使用上面的代码使 element3 可见。

我的问题

1.  当我单击 element1 时，如何使 element2 隐藏并且元素 3 可见？

2.  在 element1 中再次单击后如何恢复默认值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T06:38:58.080

尝试

```
$(document).ready(function () {
    $('#element3').hide();
    $('#element1').click(function () {
        $('#element3').toggle(400);
        $('#element2').toggle(400);
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/LKQ53/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-10T18:13:54.840

您可以使用以下解决方案来解决您的问题：

根据您的要求，您何时单击，`element1`然后在每次交替单击时分别切换。下面的代码应该可以解决您的问题。`element3``element2`

```
$(document).ready(function () {
    $('#element3').hide();
    $('#element1').click(function () {
        $('#element3').toggle(400);
        $('#element2').toggle(400);
    }); 
}); 
```

另请参阅[此链接](http://aspdotnetraining.blogspot.in/2013/11/jquery-hide.html)以获取更多信息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-20T06:48:10.413

试试这个

```
<script>
     $(document).ready(function(){
       $('#element1').click(function(){
         $('#element3').toggle();
         $('#element2').toggle();
       }); 
    });
</script> 
```

# mysql - 在 MySql 中使用 IN 子句的不同方法

> ID：16117492
> 
> 赞同：19
> 
> 时间：2013-04-20T06:36:29.923
> 
> 标签：mysql, sql

今天我发布了一个这样的查询的答案

```
SELECT * FROM table_name where column_name IN (val1,val2,...) 
```

另一个用户发布了这样一个查询的答案

```
SELECT * FROM table_name where val1 IN (column_name) 
```

正如您在此处看到的， column_name 的位置和值是互换的。

## 来自 Mysql 文档

> expr IN（值，...）
> 
> 如果 expr 等于 IN 列表中的任何值，则返回 1，否则返回 0。如果所有值都是常量，则根据 expr 的类型对它们进行评估并排序。然后使用二进制搜索完成对项目的搜索。这意味着如果 IN 值列表完全由常量组成，则 IN 非常快。

```
mysql> SELECT 2 IN (0,3,5,7);
-> 0

mysql> SELECT 'wefwf' IN ('wee','wefwf','weg');
-> 1 
```

正如它清楚地表明上述（我的查询）是正确的。但上述两个查询都产生相同的输出。

另外，为什么不在**[Mysql 文档](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)**中列出的其他方法？

> [此问题可作为有关使用 IN 的规范信息源。其目的是提供详细、高质量的答案，详细说明在查询中正确使用 IN。]

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T06:43:15.580

你提出了一个与我的回答相关的[**问题**](https://stackoverflow.com/a/16117259/491243)。

在下面使用此语句的简单解释中，

```
SELECT * FROM TableName WHERE column1 IN (1, 2, 3, 4)
-- versus
SELECT * FROM TableName WHERE 1 IN (column1, column2, column3, column4) 
```

第一条语句仅涉及*与多个值*进行比较的**一列**。

 *```
SELECT  *
FROM   TableName
WHERE  column1 = 1 OR
       column1 = 2 OR
       column1 = 3 OR
       column1 = 4 
```

而第二条语句是与*多个列进行比较***的 VALUE**。

 *```
SELECT  *
FROM   TableName
WHERE  column1 = 1 OR
       column2 = 1 OR
       column3 = 1 OR
       column4 = 1 
```

*这有点不同。*

* * *

**更新 1**

`IN`这是从句的第三种形式：

*   [多列 IN 子句 – 意外的 MySQL 问题](http://www.mysqlperformanceblog.com/2008/04/04/multi-column-in-clause-unexpected-mysql-issue/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T07:10:04.903

如问题中所述，MySQL文档将 IN 子句的形式提供为：

```
expr IN (value,...) 
```

`expr`是一个表达式，对于给定的行只能有一个值 - 这个值可以是一个常量（例如 2），一个列的名称（例如`column_name`来自问题），它将在给定的行上具有特定的值，或任何表达式，包括为给定行生成单个值的函数、运算符、常量和 column_names。

括号的内容 - `value,...`- 包含一个表达式，该表达式可以被评估为提供一个值列表（可能包括一个空值列表，在这种情况下，`in`条件将被评估为假）。此值列表可能是：

*   以一系列明确的一个或多个常量（例如`val1,val2,...`）和/或给定行的一个或多个单值列名称（例如`column_name`）和/或一系列表达式的形式，每个表达式为给定行；*或者*
*   以`select`子句的形式返回一组值（例如`select column_name from table where ...`），然后可以将其与`expr`（紧接在`IN`运算符之前的）的值进行比较。

总结一下：`expr`必须评估为单个值（对于给定的行），而要匹配的括号中的值集可以评估为 0、1 或更多值。

在这方面，MySQL 的运行方式与我使用的任何其他 SQL 变体相同。

MySQL的不同之处在于整个子句*本身*`expr IN (value,...)`评估为 0 或 1，MySQL 分别将其视为 false 或 true - 在大多数 SQL 变体中，整个子句将评估为布尔值 FALSE 或 TRUE。**

# facebook - 使用 Facebook 应用程序在我的网站上获取用户的联系人和个人资料详细信息，它适用于某些用户，而不适用于其他用户

> ID：16117498
> 
> 赞同：0
> 
> 时间：2013-04-20T06:37:13.307
> 
> 标签：facebook, cakephp-2.0

我集成了用于导入 Facebook 联系人和个人资料详细信息的 Facebook API。它以前工作得很好。现在它允许少数用户同步，一些用户无法获取任何 Facebook 详细信息。我正在使用 CakePHP 进行开发，并且代码之前可以正常工作。现在对于少数用户来说，会得到以下错误

发生错误。请稍后再试。

对于某些用户，我收到以下错误

应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

对于某些用户，没有错误消息但未获取帐户详细信息，而有些用户则能够成功同步其帐户并获取详细信息。

请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:53:58.653

FB 最近更新了隐私政策，可能会导致错误。如果有人有私人资料，FB 可能不允许这样做。检查他们的个人资料状态（它是私人的吗？）。谷歌搜索，**应用程序的设置不允许一个或多个给定的 URL。它必须与网站 URL 或画布 URL 匹配，**您将获得许多结果。它可能会帮助你。

# android - 使用带有 GridView 的 ImageView 来设置在行和列中显示的图像数量

> ID：16117502
> 
> 赞同：4
> 
> 时间：2013-04-20T06:37:48.130
> 
> 标签：android, android-imageview, android-gridview

我想使用 ImageView 类在 GridView 布局中布局 8x8 图像网格，实际上只是 40x40px 图标。

我尝试过使用 ImageView 类的*setLayoutParams*和*setScaleType*方法，但未能达到预期的效果。这就是我所拥有的，但我只尝试了一个 3x3 的小图标网格，直到我掌握了它。

主要活动：

```
package com.topherwilso.ropasci;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.GridView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        GridView gv = (GridView) findViewById(R.id.gridview);
        gv.setAdapter(new ImageAdapter(getApplicationContext()));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

还有我的 ImageAdapter 类：

```
package com.topherwilso.ropasci;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;

public class ImageAdapter extends BaseAdapter {

    int[] images = {
            R.drawable.one, R.drawable.two,
            R.drawable.three, R.drawable.four,
            R.drawable.five, R.drawable.six,
            R.drawable.seven, R.drawable.eight,
            R.drawable.nine
    };
    private Context context;

    public ImageAdapter(Context applicationContext){
        context=applicationContext;
    }

    @Override
    public int getCount() {
        //Number of data elements to be displayed
        return images.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView iv;
        if(convertView != null){
            iv = (ImageView) convertView;
        }
        else{
            iv = new ImageView(context);
            iv.setLayoutParams(new GridView.LayoutParams(120, 120));
            iv.setScaleType(ScaleType.CENTER);
            iv.setPadding(0, 0, 0, 0);
        }
        iv.setImageResource(images[position]);
        return iv;
    }

} 
```

这就是现在的样子

![我现在拥有的](https://i.stack.imgur.com/544E6.png)

这是我想要的，

![在此处输入图像描述](https://i.stack.imgur.com/P3ic1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:54:30.903

试试下面

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/gridview"
android:padding="40dp"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:columnWidth="0dp"
android:numColumns="3" // set the number of columns to 3
android:verticalSpacing="20dp"
android:horizontalSpacing="20dp" 
android:gravity="center"
/> 
```

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

[http://developer.android.com/reference/android/widget/GridView.html](http://developer.android.com/reference/android/widget/GridView.html)

无法指定行数。如果上述方法不起作用，您可以使用 TableLayout 而不是 gridview。在您的情况下，您有 9 个图标，因此将列号设置为 3 应该可以。

对于表格布局

[http://developer.android.com/reference/android/widget/TableLayout.html](http://developer.android.com/reference/android/widget/TableLayout.html)

# php - 将结果组合成一个变量

> ID：16117516
> 
> 赞同：0
> 
> 时间：2013-04-20T06:39:32.733
> 
> 标签：php, loops

我的 php 脚本中有一个 foreach 循环，可以导出我需要的结果。

我希望将这些结果组合成一个变量，而不是为我打印每个结果。我什至不知道我正在尝试做的功能被称为，

但我知道它是这样的：

```
 if($mins) {
      $ips .= $item++;
   } else {
      $has .= $item++;
   } 
```

因此，我想像这样用 $mins 打印出所有 $items：

```
"$item $item $item $item $item" 
```

我希望 $ips 等于/保持整个`"$item $item $item $item $item"`而不仅仅是单数。

非常感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:20:41.447

Similarly you can do this with

```
$ips = null;
$has = null;
foreach ( (array) $Arr AS $key => $val){
if ($mins){
    $ips .= $key;
}
    $has .= $key;
}
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:51:45.813

（由于现在更清晰的问题，答案完全改变了）

将结果添加到相关数组：

```
if($mins) {
   $ips[]=$item;      
} else {
   $has[]=$item;  
} 
```

用explode打印结果：

```
echo ("ips: ".explode(" ",$ips)."\n");
echo ("has: ".explode(" ",$has)); 
```

explode() 函数的第一个参数是一个字符串，它将插入到第二个参数数组的元素之间，在这种情况下是一个空格。

# ios - 无法访问精灵的 userdata 属性

> ID：16117518
> 
> 赞同：1
> 
> 时间：2013-04-20T06:40:06.187
> 
> 标签：ios, objective-c, xcode, cocoa-touch, cocos2d-iphone

在我的项目中，我有 10 个精灵，每个精灵都有一个唯一的 userData 值。在 ccTouch 方法中，我将一个精灵复制到新精灵，

但我无法获得精灵用户数据值。

我的编码是

```
 for (int i=1; i<=10; i++)
      {
       CCSprite *zig=[CCSprite spriteWithFile:[NSString stringWithFormat:@"zig%d.png",i]];
        zig.position=ccp(325,60);
        zig.tag=i+1;
        zig.userData=[NSString stringWithFormat:@"%@",[zigpositionarray objectAtIndex:i-1]];
        [self addChild:zig z:2];
       [zigblurarray addObject:zig];
            NSLog(@"Userdata%@",zig.userData);
      } 
```

在 cctouchBegan 方法中：

```
 for(CCSprite *s in zigblurarray)
  { 
   if (CGRectContainsPoint(s.boundingBox, Newpt1))
   {
       temp=s;
       temp.userData=s.userData;
       NSLog(@"%d",temp.tag);
        NSLog(@"Userdata%@",temp.userData);
    } 
```

最后我得到 lldb 错误

0x170409b: movl 8(%edx), %edi EXC_BAD_ACCESS

请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:10:36.110

该字符串是自动释放的。该`userData`属性是 void* 类型，不会保留对象。请改用该`userObject`属性（如果在您的 cocos2d 版本中可用）或保留该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:04:21.660

将一个对象分配给另一个变量不会复制它。请记住，对象只是表示为指向对象的指针。

后

```
temp=s; 
```

`temp`也指向`s`. `t.userData`已经是`s.userData`因为它们是同一个对象。

尝试

```
temp = [s copy]; 
```

# ios - 如何在 Sparrow 中创建游戏循环并在每个帧周期刷新显示？

> ID：16117524
> 
> 赞同：2
> 
> 时间：2013-04-20T06:41:18.400
> 
> 标签：ios, sparrow-framework

在过去的两天里，我一直在网上搜索，试图找到一个完整的例子，说明如何使用 Sparrow 中内置的游戏循环功能进行 ios 开发。我正在为一个学校项目开发塔防类型的游戏。玩家控制屏幕中央的炮塔，而坦克从所有 4 个侧面随机进入屏幕。这是屏幕截图的链接：

[https://www.dropbox.com/s/sqleuqza9dcgiqs/iOS%20Simulator%20Screen%20shot%20Apr%2019%2C%202013%2010.53.54%20PM.png](https://www.dropbox.com/s/sqleuqza9dcgiqs/iOS%20Simulator%20Screen%20shot%20Apr%2019%2C%202013%2010.53.54%20PM.png)

我有一个“TankManager”类，它通过将 Tank 的实例存储在一个名为“activeTanks”中来创建和处理我的“Tank”类的实例`NSMutableArray`，并将我的“tankImage”放入嵌套在“tankManagerSprite”中的“tankSprite”中它嵌套在我的主要“_contents”精灵中。正如您在上面链接的图片中看到的那样，它们显示得很好。

我想为坦克制作动画。从我的阅读中，我了解到我需要一个游戏循环，它每隔几分之一秒调用一个方法。根据 Sparrow wiki ( [http://wiki.sparrow-framework.org/manual/animation](http://wiki.sparrow-framework.org/manual/animation) )，要使用 Sparrow 的内置游戏循环功能，我会执行类似以下操作：

将此代码添加到我要使用它的类中的 init 函数中（该类需要是一个`SPEvent`:)

```
// e.g. in the init-method
[self addEventListener:@selector(onEnterFrame:) atObject:self forType:SP_EVENT_TYPE_ENTER_FRAME]; 
```

然后把这段代码放在某个地方（我选择把它放在我的 TankManager.m 文件中，但我不知道这是否正确）：

```
- (void)onEnterFrame:(SPEnterFrameEvent *)event
{
    for (Tank *thisTank in activeTanks)
    {
        [thisTank move:event.passedTime];
    }
} 
```

然后在`-(void)move:(double)timeElapsed;`我的“坦克”类的“”函数中：

```
-(void)move:(double)timeElapsed{
    NSLog(@"xCoord: %f", tankVector.vertex.xCoord);
    NSLog(@"yCoord: %f", tankVector.vertex.xCoord);
    tankVector.vertex.xCoord += (timeElapsed *20);
    tankVector.vertex.yCoord += (timeElapsed *20);
} 
```

结果，我得到`NSLog()`如下所示的输出（仅生成一个坦克）：

```
2013-04-20 00:35:43.449 Tank Turret Game[7815:c07] xCoord: 172.677765
2013-04-20 00:35:43.450 Tank Turret Game[7815:c07] yCoord: 172.677765
2013-04-20 00:35:43.482 Tank Turret Game[7815:c07] xCoord: 173.343170
2013-04-20 00:35:43.483 Tank Turret Game[7815:c07] yCoord: 173.343170
2013-04-20 00:35:43.516 Tank Turret Game[7815:c07] xCoord: 174.010696
2013-04-20 00:35:43.516 Tank Turret Game[7815:c07] yCoord: 174.010696
2013-04-20 00:35:43.549 Tank Turret Game[7815:c07] xCoord: 174.679245
2013-04-20 00:35:43.550 Tank Turret Game[7815:c07] yCoord: 174.679245
2013-04-20 00:35:43.583 Tank Turret Game[7815:c07] xCoord: 175.349762
2013-04-20 00:35:43.584 Tank Turret Game[7815:c07] yCoord: 175.349762
2013-04-20 00:35:43.616 Tank Turret Game[7815:c07] xCoord: 176.020950
2013-04-20 00:35:43.616 Tank Turret Game[7815:c07] yCoord: 176.020950
2013-04-20 00:35:43.649 Tank Turret Game[7815:c07] xCoord: 176.679245
2013-04-20 00:35:43.650 Tank Turret Game[7815:c07] yCoord: 176.679245 
```

到目前为止，一切都很好。但是当我看着屏幕时，什么都没有动。我无计可施。我知道解决这个问题可能非常简单，但对于我来说，我找不到它。任何帮助将不胜感激。

# c++ - 将双精度转换为字符串函数 - 内存问题？

> ID：16117528
> 
> 赞同：1
> 
> 时间：2013-04-20T06:41:49.607
> 
> 标签：c++, double, stdstring, memory-efficient

我发现自己不得不 std::cout 各种双变量。我制作了一个简单的函数来将双精度转换为 std::string，然后我可以将其与 std::cout 等一起使用。

```
// Convert a double to a string.
std::string dtos(double x) {
    std::stringstream s;
    s << x;
    return s.str();
} 
```

该功能似乎工作正常，但我的问题是：这种方法是否有任何（坏）记忆影响，即。我是在分配不必要的内存，还是留下任何“悬空”的东西？

谢谢大家皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:44:24.010

不，你的代码是可以的，阅读代码上的注释：

```
std::string dtos(double x) {
    std::stringstream s;  // Allocates memory on stack
    s << x;
    return s.str();       // returns a s.str() as a string by value
                          // Frees allocated memory of s
} 
```

另外，你可以直接传递一个`double`to `cout`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:10:58.537

很惊讶没有人提到这一点，但是您可以使用模板将该算法概括为任何类型。

像这样：

```
template<typename T>
std::string to_string(const T& obj)
{
    std::ostringstream s;
    s << obj;
    return s.str();
} 
```

这样您就可以轻松地转换为字符串，如下所示：

```
int x = 5;
to_string(x); // will convert the integer to a string

to_string(32); // constants works
to_string<double>(302); // you can explicitly type the type you wish to convert 
```

示例用法在此[链接](http://ideone.com/C2WLOE)上。

此外，正如其他人所说，没有记忆可以去任何地方。另外，我想提一下，由于您只是在写入字符串流，也许您应该使用[std::ostringstream](http://www.cplusplus.com/reference/sstream/ostringstream/)来（1）当人们阅读您的代码时进一步澄清和（2）使用 >> 没有错误<<

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T06:47:43.270

您不必将双打更改为字符串即可使用`std::cout`。

```
cout << x; 
```

可以正常工作

```
cout << dtos(x); 
```

如果您出于其他原因想将 double 更改为字符串，那么您可以在 C++11 中使用[std::to_string 。](http://en.cppreference.com/w/cpp/string/basic_string/to_string)

除此之外，您的代码很好。

# php - php中的高级javascript游戏

> ID：16117531
> 
> 赞同：-1
> 
> 时间：2013-04-20T06:42:43.390
> 
> 标签：php, javascript, wordpress

我的目标是将这个 javascript 代码放入 wordpress php 中，但我不知道如何在不收到错误消息的情况下执行此操作。最终目标是将 javascript 游戏简单地嵌入到 wordpress 页面上。我已经检查了几十篇其他文章，但没有一篇对这样的代码足够具体。我希望包含在 php 中的代码仅在下面带有虚拟网站链接。希望你能帮助我！提前致谢。

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script> 
  var attributes = {
     codebase: 'my_website',
     code: 'vNES.class',
     archive: 'my_website',
     width: 512,
     height: 480
  };
  var parameters = {
     sound: "on",
     timeemulation: "on",
     fps: "off",
     stereo: "off",
     rom: "my_website/game.zig",
     showsoundbuffer: "off",
     scale: "on",
     scanlines: "off",
     nicesound: "on",
     romsize: 40976
  };
  deployJava.setInstallerType('online');
  // deployJava.setInstallerType('kernel');
  if (deployJava.versionCheck('1.5+')) {
     deployJava.runApplet(attributes, parameters, '1.5');
  } else {
     document.write("<br />");
     document.write("<b style='color: red;'>Your browser does not appear to have Java installed.</b>");
     document.write("<b><a href='#' onclick='javascript:deployJava.installLatestJRE();'>Click here to install the Java run-time.</a></b><br /><br />");
     if (navigator.userAgent.indexOf("Chrome") != -1 && navigator.userAgent.indexOf("Mac OS X") != -1) {
       document.write("<b style='color: red;'>");
       document.write("Please note that Google Chrome under MacOS X does currently not support Java applets, so consider temporarily switching to Firefox or Safari if you are a MacOS X user.<br /><br />");
       document.write("</b>");
     }
     document.write("This page has been tested and works with the latest versions of the following Windows browsers: Firefox, Google Chrome, Internet Explorer, Opera and Safari.<br /><br />");
    document.write("This page has been tested and works with the latest versions of the following MacOS X browsers: Firefox, Opera and Safari.<br /><br />");
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:00:02.550

您可以发布您收到的错误消息吗？根据我使用 wordpress 的经验，这应该非常简单。您希望在 wordpress 中的哪个位置出现？在索引页上？

如果是这种情况，您可以回显每一行，也可以使用关闭和打开 php 标记来转义脚本。思路和上面的一样 document.write("...");

只需要转义 " 标记

```
echo"<script src=\"http://www.java.com/js/deployJava.js\"></script>"; 
```

也...可以添加如下代码

```
<?php  (php code...) ?>

<script type="text/javascript">
window.location = "http://www.google.com/"
</script>

<?php  (php code continues...) ?> 
```

希望这会有所帮助。在 wordpress 中，我会进入文件并编辑索引文件，但也取决于您想在 wordpress 中放置它的位置。无论哪种方式，您都必须编辑文件才能使其正常工作。

你也可以在你的wordpress中添加一个新页面......

在您的主题文件夹中复制 post.php（在 /wp-content/themes/themename/ 下）。

将文件重命名为 someNameYouWant.php

现在在顶部添加：

```
<?php
/*
Template Name: templatename
*/
?> 
```

您可以修改此文件（使用 php）以包含其他文件或任何您需要的文件。

然后在您的 wordpress 博客中创建一个新页面，在页面编辑屏幕中，您将在右侧的“属性”小部件中看到一个“模板”下拉菜单。选择新模板并发布页面。

您的新页面将使用 templatename.php 中定义的 php 代码

# drag-and-drop - 在 YUI3 拖动中创建动态自定义代理元素

> ID：16117534
> 
> 赞同：1
> 
> 时间：2013-04-20T06:42:55.310
> 
> 标签：drag-and-drop, yui, yui3

我目前正在尝试使用 YUI3 实现拖放。我的要求是，当用户拖动特定分区时，`image inside that division`必须将其用作 a `proxy`，当我放下它时，必须创建一个与原始分区不同的新 div。我想知道如何创建与原始部门不同的代理？我在其中看到一个克隆属性，`ddProxy`但如何创建不同的代理？

# c++ - 基本猎人/猎物练习中的“不完整类型的无效使用”

> ID：16117546
> 
> 赞同：1
> 
> 时间：2013-04-20T06:44:38.573
> 
> 标签：c++

所以我目前的任务是做一个基本的猎人和猎物模拟，在遇到其他几个问题后，我的教授建议我把所有东西都放进`main.cpp`去，让这个东西现在可以正常工作。

我当前的问题是，在`Creature::Find()`函数中它声称`Grid`该类是不完整的，即使它已在文件顶部预先声明。我最初的想法是将`Grid`类放在之前`Creature`，但这会导致更多或相同的错误（指的`Creature`是不完整），因为`Grid`本质上是一个二维`Creature`指针数组。下面是代码的相关部分，整个文件可以在 Dropbox 上[找到](https://www.dropbox.com/s/ehu4geckwufr6bo/main.cpp)。

* * *

```
class Grid;  //*** error: forward declaration of 'class Grid'

//Other stuff...

class Creature
{
public:
    Grid* theGrid;
    Coords position;
    int stepBreed;
    int stepHunger;
    char face;
    bool hasMoved;

    Creature(Grid* _grid, Coords _position, char _face)  //Constructor
    {
        theGrid = _grid;
        position = _position;
        face = _face;
        stepBreed = stepHunger = 0;
        hasMoved = false;
    }

    vector<Coords> Find(char thisFace)  //Returns a list of coords with prey on them
    {
        vector<Coords> result;
        for(int i = position.x-1; i <= position.x+1; i++)
            for(int j = position.y-1; j <= position.y+1; j++)
            {
                Coords temp(i,j);
                if(theGrid->Occupant(temp) == thisFace) //*** error: invalid use of incomplete type 'class Grid'
                    result.push_back(temp);
            }
        return result;
    }

    virtual Coords Move() = 0;  //Allows the creature type to define it's own movement
    virtual Coords Breed() = 0;  //Allows the creature type to define it's own breeding
    virtual bool Starve() = 0;  //Allows the creature type to starve of its own accord
};

class Grid
{
public:
    Creature* grid[MAX_X][MAX_Y];

    Grid() //Initalizes the grid and spawns random creatures
    {
        cout<<endl<<"grid init"<<endl;
        for(int i = 0; i < MAX_X; i++)
            for(int j = 0; j < MAX_Y; j++)
                grid[i][j] = NULL;
    }

    void Move() //Tells each creature on the grid to move
    {
        cout<<endl<<"---  Grid::Move() TOP  ---"<<endl<<endl;
        ResetMoved();

        for(int i = 0; i < MAX_X; i++)
            for(int j = 0; j < MAX_Y; j++)
                if(grid[i][j])
                    grid[i][j]->Move();
        cout<<endl<<"---  Grid::Move() BOTTOM  ---"<<endl<<endl;
    }

    void Breed() //Tells each creature to breed (if it can)
    {

    }

    void Kill()  //Tells each creature to die (if it's old)
    {

    }

    char** Snapshot()  //Creates a char array "snapshot" of the board
    {
        char** result = new char*[MAX_X];
        for(int i = 0; i < MAX_X; i++)
        {
            result[i] = new char[MAX_Y];
            for(int j = 0; j < MAX_Y; j++)
            {
                result[i][j] = Occupant(Coords(i, j));
            }
        }
        return result;
    }

    Creature* Get(Coords here)  //Returns a pointer to the object at the specified position
    {
        return grid[here.x][here.y];
    }

    char Occupant(Coords here) //Returns the character of the specified position
    {
        if(!Get(here))
            return FACE_EMPTY;
        return Get(here)->face;
    }

    void Clear(Coords here)  //Deletes the object at the specified position
    {
        cout<<endl<<"---  Grid::Clear() TOP  ---"<<endl<<endl;

        if(!Get(here))
        {
            cout<<"   inside if"<<endl;
            delete Get(here);
        }
        cout<<"   outside if"<<endl;
        grid[here.x][here.y] = NULL;

        cout<<endl<<"---  Grid::Clear() BOTTOM  ---"<<endl<<endl;
    }

    void ResetMoved()
    {
        for(int i = 0; i < MAX_X; i++)
            for(int j = 0; j < MAX_Y; j++)
                if(grid[i][j])
                    grid[i][j]->hasMoved = false;
    }
}; 
```

编辑：预览和标记工具栏由于某种原因无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T06:51:31.200

你有一个循环依赖（我似乎记得你以前有过这个问题）。将内容放在同一个文件中并不能真正解决问题（尽管也许它可以帮助您更清楚地看到问题）。您需要做的是正确排序，以便每个函数都在它需要的类之后定义。

在这种情况下，我会这样做

```
class Grid;

class Creature
{
public:
    Grid* theGrid;
    ...
    vector<Coords> Find(char thisFace);
    ...
};

class Grid
{
public:
    Creature* grid[MAX_X][MAX_Y];
    ...
};

vector<Coords> Creature::Find(char thisFace)
{
   ...
} 
```

`Creature::Find`需要`Creature`类（显然）和`Grid`类，所以它必须在两个类都被完全定义之后。

如果您最终将`Creature::Find`定义放在头文件中，则必须添加`inline`关键字，否则您将获得多个定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:52:12.150

前向声明适用于声明指针。但是编译器还不知道您的前向声明的类包含什么。所以你不能指望它允许像

```
class Grid;
//
theGrid->Occupant(temp) 
```

* * *

您需要包含包含 Grid 的整个定义的文件。或者**，您可以将`Creature::find`函数的定义移动到包含 Grid.h 的另一个文件中。例如在`Grid.cpp`**

# ruby - 在 Ruby Array#shuffle/sample 中使用自定义随机数生成器

> ID：16117548
> 
> 赞同：4
> 
> 时间：2013-04-20T06:45:08.413
> 
> 标签：ruby

使用 Array#shuffle 时，Ruby 允许使用自定义随机发生器，甚至提供`Random`使用它的类。以下示例使用种子值为 48 的类。

```
array = [1,2,3,4,5,6,7,8,9,10]
array.shuffle(random: Random.new(48))  # => [8,6,3,7,10,9,5,2,4,1] 
```

我写了一个小的单位测试来查看一个值首先出现在洗牌数组中的次数。

```
deck = (1..10).to_a
counts = Hash.new(0)

rng = Random.new

50000.times do
  counts[deck.shuffle(random: rng).first] += 1
end

1.upto(10) do |card|
  puts "#{card}:\t#{counts[card]}"
end 
```

输出类似于以下内容：

```
1:  4942
2:  5100
3:  4938
4:  4960
5:  5024
6:  4992
7:  5184
8:  4930
9:  4916
10: 5014 
```

假设我想用一个新类替换伪随机数生成器。由于 Array#shuffle 在上面的示例中似乎使用了 Random#rand，因此实现一个新类作为随机播放的 RNG 似乎很简单。在这里，我实现了一个新的伪随机数生成器，它实际上只是一个非常简单的包装器`rand`：

```
deck = (1..10).to_a
counts = Hash.new(0)

class FooRandom
  def rand(max=nil)
    max.nil? ? Kernel::rand : Kernel::rand(max)
  end
end

rng = FooRandom.new

50000.times do
  counts[deck.shuffle(random: rng).first] += 1
end

1.upto(10) do |card|
  puts "#{card}:\t#{counts[card]}"
end 
```

然而，这并没有按预期运行。`FooRandom#rand`被调用，但改组产生以下分布：

```
1:  0
2:  5423
3:  5562
4:  5544
5:  5512
6:  5569
7:  5535
8:  5595
9:  5524
10: 5736 
```

如您所见，数组值 1 在数组洗牌后永远不会出现在数组的第一个位置。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:44:05.540

[Ruby 2.0.0p0](https://bugs.ruby-lang.org/issues/7935)中有一个错误，限制为 1。

这已在 Ruby 2.0.0p195 中修复，因此您应该升级您的安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:42:12.617

在 ruby​​ 1.9.3 中，最大值为零。在 Ruby 2.0.0 中，max 被传递给 rand。通过将 rand 方法更改为以下内容，我能够使其工作。

```
class FooRandom
  def rand(max=nil)
    max.nil? ? Kernel::rand : Kernel::rand(max+1)
  end
end 
```

之前就差一档了。

[这是来自http://ruby-doc.org/core-2.0/Array.html#method-i-shuffle](http://ruby-doc.org/core-2.0/Array.html#method-i-shuffle)的 C 源代码的摘录

```
i = RARRAY_LEN(ary);
ptr = RARRAY_PTR(ary);
while (i) {
    long j = RAND_UPTO(i);
    VALUE tmp;
    tmp = ptr[--i];
    ptr[i] = ptr[j];
    ptr[j] = tmp;
}
return ary; 
```

}

# javascript - 单击菜单项时显示导航下拉菜单

> ID：16117549
> 
> 赞同：0
> 
> 时间：2013-04-20T06:45:21.653
> 
> 标签：javascript, jquery, twitter-bootstrap, navigation

我喜欢 Twitter 引导程序，但不需要所有功能。不过，其中有一个我正在尝试复制的下拉功能。

这是我的 HTML：

```
<nav class="navigation" role="navigation">
    <ul class="a">
        <li><a class="" href="">Page 1</a></li>
        <li><a class="" href="">Page 2</a></li>

        <li>
            <a class="" href="">Page 3</a>
            <ul class="drop_down">
                <li><a href="#">List 1</a></li>
                <li><a href="#">List 2</a></li>
                <li class="nav_divider"></li>
                <li><a href="#">List 3</a></li>
                <li><a href="#">List 4</a></li>
                <li><a href="#">List 5</a></li>
            </ul>
        </li>

        <li><a class="" href="">Page 4</a></li>
        <li><a class="" href="">Page 5</a></li>
    </ul>
</nav> 
```

到目前为止，我的 javascript（不多）：

```
$('nav.navigation li a').on('click', function() {
    if( $('nav.navigation li').has('ul.drop_down') ) {
        // Don't know how to add class to the clicked item,
        // and not all 'a' in the nav.
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:48:20.447

```
$('nav.navigation li a').on('click', function(event) {
    if( $('nav.navigation li').has('ul.drop_down') ) {
        // Don't know how to add class to the clicked item,
          alert(event.target.id); //here do stuff  with that id 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:49:28.340

首先应该是

```
$(function(){

  $('nav.navigation li a').on('click', function() {
    var $this = $(this);
    if( $this.parent('li').children('ul.drop_down').length ) {
        $this.addClass('someclass');
    }
  });

}); 
```

演示：[Plunker](http://plnkr.co/edit/DAhZED?p=preview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:00:29.090

```
$('nav.navigation li a').on('click', function(e) {
    if($(this).parent().has('ul.drop_down')) {
        $(this).siblings('ul.drop_down').addClass("className");
        e.preventDefault();
    }
}); 
```

调用`e.preventDefault();`将阻止重定向，因为当您只想显示下拉列表时，我认为您不希望这样做。

# c++ - 为什么输入1.w时下面的验证码卡在cin.ignore上，输入w.1时进入死循环？

> ID：16117554
> 
> 赞同：2
> 
> 时间：2013-04-20T06:46:09.127
> 
> 标签：c++, visual-studio-2010

为什么输入1.w时下面的验证码卡在cin.ignore上，输入w.1时进入死循环？
我正在尝试创建验证数字输入的代码。我已经根据其他帖子中给出的建议创建了代码，但我仍然遇到问题。

```
//The code is validation code used to check if input is numerical (float or integer). 
#include <iostream>
#include <string>
#include <limits> // std::numeric_limits
using namespace std;
int main ()
{
    string line;
    float amount=0;
    bool flag=true;

//while loop to check inputs
while (flag){ //check for valid numerical input
    cout << "Enter amount:";
    getline(cin>>amount,line);
//use the string find_first_not_of function to test for numerical input
    unsigned test = line.find_first_not_of('0123456789-.');

    if (test==std::string::npos){ //if input stream contains valid inputs
        cout << "WOW!" << endl;
        cout << "You entered " << line << endl;
        cout << "amount = " << amount << endl;
    }

    else{ //if input stream is invalid
        cin.clear();
        // Ignore to the end of line
        cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    }
  }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:06:06.460

首先，`'0123456789-.'`应该是`"0123456789-."`（注意双引号）。前者是多字节字符文字。

当您输入`1.w`：

*   `1`被 提取`cin>>amount`。
*   `.w`被提取`getline`
*   流是空的，所以`ignore`等待输入

当您输入`w.1`：

*   `cin>>amount`失败，`failbit`被设置
*   `getline`流不好时无法提取，因此`line`保持为空
*   `test`等于`npos`，所以我们永远不会进入`else`块来清除流
*   从头再来

# java - 运行 jar 文件时出现 FileNotFoundException

> ID：16117557
> 
> 赞同：2
> 
> 时间：2013-04-20T06:46:51.373
> 
> 标签：java, file, filenotfoundexception

我得到了这条路`.\\src\\aee\\user\\scorePercentage.csv`。当我在 Netbeans 中执行它时它正在运行。但是当我创建一个jar文件时，`scorePercentage.csv`找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:51:17.280

您应该将其导出到运行应用程序的目录，或者使用 Class.getResource 并将其嵌入到 jar 中。如果您`src`在代码中的任何位置使用该目录，则说明您做错了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T06:52:50.200

.jar 文件的工作目录是`/src`目录。`getClass().getResources(String);`
你可以用Ex表示资源：`getClass().getResources("/aee/user/scorePercentage.csv");`

# ruby-on-rails - 如何在 ruby on rails 中为实例变量附加一些值？

> ID：16117558
> 
> 赞同：4
> 
> 时间：2013-04-20T06:46:52.520
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller, instance-variables

这是我在家庭控制器中尝试做的事情：

```
def view
    @product= Product.find(params[:id])
    rand_price = rand(202- @product.price.to_i) + @product.price.to_i
    old_price = rand_price + @product.price.to_i

    @product << old_price  #error line
end 
```

我想在`old_price`我的变量中再添加一个值，而不在`Product`模型中添加相同的列。错误是：

```
undefined method `<<' for #<Product:0x7f1362cc5b88> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:04:49.893

在模型中使用序列化器：

```
class Product << ActiveRecord::Base
  serialize :prices, Array

  ...
end 
```

数据库中的列 products.prices 应该是字符串。

在控制器中

```
def update
  @product= Product.find(params[:id])
  rand_price = rand(202- @product.price.to_i) + @product.price.to_i
  new_price = rand_price + @product.price.to_i

  @product.prices << new_price
  @product.save!
end 
```

你可以使用它：

```
 @product.prices # => array of all prices.
  @product.prices.last # => current price 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:50:52.017

你可以说

```
class << @product
  attr_accessor :old_price
end
@product.old_price = old_price 
```

它将一个属性注入到实例变量中。

`<<`您引用它的方式为数组添加了一个值，这不是您想要做的。

另一种方法是添加：

`attr_accessor :old_price`

到你的`Product`模型。这将添加`old_price`到所有实例，`Product`而不是表中的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:51:21.907

错误，因为 @product 是 Product 对象而不是数组。

<< 与数组对象一起使用

并且 Ruby 无权通过这种方式添加属性（如 Javascript）。

您应该声明一个 attr_accessor 'old_price'

# java - 如何使用 netbeans 数据库而不必每次使用不同的计算机时都创建它？

> ID：16117563
> 
> 赞同：0
> 
> 时间：2013-04-20T06:48:04.070
> 
> 标签：java, database, netbeans

我在 netbeans 服务选项卡下有一个数据库，但是如果我将它发送到另一台计算机，我希望能够运行我的应用程序，而不必再次创建数据库。我怎样才能做到这一点？

谢谢

# timer - 用系统定时器的第二个通道模拟时钟？

> ID：16117565
> 
> 赞同：0
> 
> 时间：2013-04-20T06:48:17.943
> 
> 标签：timer, x86

是否可以使用系统计时器的第二个通道来模拟时钟（秒、分、小时）？在 x86 架构上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:36:49.250

如果您询问 8253/8254 定时器，您可以尝试，但只有第一个定时器（在 8253/8254 芯片的 3 个中）会产生中断。然后，您可能不应该触摸可能涉及内存再生的那个，而最后一个只需要用于此目的，而不是用于扬声器。

# asp.net - 使用外部 OAuth 提供程序进行 MVC4 身份验证，无需成员资格或数据库

> ID：16117569
> 
> 赞同：2
> 
> 时间：2013-04-20T06:48:37.663
> 
> 标签：asp.net, asp.net-mvc-4, oauth, asp.net-membership

我目前正在学习 MVC4 和所有周边技术。

模板和丰富的功能非常强大，但对于我的应用程序，我知道：

1.  SQL 数据库不是一种选择，它们太多了，供应商收取了一定的费用
2.  我希望能够通过 OAuth 和 Dropbox 支持 Facebook 身份验证（如果他们愿意，允许用户存储文档和配置等）。

开箱即用有很多现有的模板和代码可以`OAuthWebSecurity`在`AuthConfig.cs`文件中使用来实现这一点，但这基本上完全以实体框架为重点（考虑到 SQL 在 Microsoft 领域的流行和商业利益，这并不奇怪）。

我知道您可以使用 web.config 文件等进行一些穷人的身份验证，但我想知道我是否仍然可以使用内置的 OAuth 身份验证工具，但减去所有的实体框架和数据库大惊小怪？我仍然会在 XML 文件等中存储一些最少的数据（访问令牌等）。

# cocoa - mouseDragged：是不是传下来了两个子视图？

> ID：16117572
> 
> 赞同：1
> 
> 时间：2013-04-20T06:49:02.533
> 
> 标签：cocoa, mouseevent, nstextview, mousedown, responder-chain

我正在编写一个程序，该程序具有许多子类 NSView（Frame），它们具有不同的内容，可以通过鼠标在其父视图中拖动。所有视图都包含一个名为 contentView 的子视图，该子视图又可以包含更复杂的层次结构。

如果我有一个不可编辑的 NSTextField 作为 contentView，则 mouseDown: 和 mouseDragged: 事件将毫无问题地传递到其超级视图，并且拖动工作正常。

```
mouseDown:    ---> [NSTextField] ---> [Frame]
mouseDragged: ---> [NSTextField] ---> [Frame] 
```

如果 contentView 是 NSView 的子类，而该子类又包含许多 NSTextField，则 mouseDragged: 事件不会从 NSTextField 传递到父视图。

```
mouseDown:    ---> [NSTextField] ---> [subclassed NSView] ---> [Frame]
mouseDragged: ---> [NSTextField] -x-> 
```

mouseDown: 事件被框架接收。单击 NSTextFields 之间的间隙并直接拖动 contentView 效果很好。

NSTextFields 在 contentView 中是这样设置的：

```
NSTextField *textfield = [[NSTextField alloc] initWithFrame:rect];
[textfield setBordered:NO];
[textfield setSelectable:NO];
[textfield setEditable:NO];
[textfield setTextColor:[NSColor blackColor]];
[textfield setBackgroundColor:[NSColor clearColor]];
[textfield setDrawsBackground:NO];
[textfield setAlignment:NSRightTextAlignment];
[textfield setFont:[NSFont fontWithName:@"Helvetica" size:14]];
[self addSubview:textfield];
[textfield release]; 
```

我尝试将 mouseDragged: 方法添加到子类 NSTextField 和子类 NSView 中，并且不使用该方法。两者都没有改变。处于同一子视图级别的其他 NSControl 也存在此问题。

```
- (void)mouseDragged:(NSEvent *)theEvent
{
    [super mouseDragged:theEvent];
} 
```

或者

```
- (void)mouseDragged:(NSEvent *)theEvent
{
    [self.superview mouseDragged:theEvent];
} 
```

目前，这种行为对我来说似乎完全不直观。有什么我想念的吗？（我在 Mountain Lion 上使用 Xcode 4.6.2。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:50:50.137

NSTextView 对鼠标有特殊处理。不确定 NSTextField，但它可能表现出相同的行为。例如没有 mouseUp 事件。mouseDown 事件进入本地循环（可能用于拖动内容）。你可以尝试在你的类中覆盖 mouseDown 并调用 NSView 的 mouseDown 来规避 NSTextField 的鼠标按下。请参阅[此 SO question](https://stackoverflow.com/questions/5102847/how-to-call-a-method-of-super-super)以了解如何执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T07:26:54.543

好的，我找到了答案。它与切断任何鼠标事件的任何 NSTextFields 无关。当我单击 NSView 时，会调用一个例程来检查内容是否仍然准确。这将释放所有子视图并重新布局整个视图。这自然会从同一子视图的 mouseDown 事件中切断任何拖动事件（不再存在）。

我通过检查 NSView 是否已经被激活以进行拖动来解决了这个问题，我应该首先这样做。所以，如果没有我的整个源代码，我的错误和其他任何人都无法解决......

# wordpress - 在 wordpress 中订购收到的邮件

> ID：16117576
> 
> 赞同：0
> 
> 时间：2013-04-20T06:49:34.497
> 
> 标签：wordpress

我在 wordpress 中有一个用于付款的购物车，最后它生成带有感谢消息和用户在购物时输入的一些信息的页面。我只想构建用户可以将信息发送（电子邮件）给他的 xyz 朋友的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:47:37.863

添加隐藏字段并在 html 中创建一个表单，在 onSubmit 事件中传递该值。

使用 WP_main 函数发送电子邮件。

# android - 如果设备已经唤醒，是否会在 BroadcastReceiver 中为 AlarmManager 调用 onReceive

> ID：16117579
> 
> 赞同：0
> 
> 时间：2013-04-20T06:49:53.077
> 
> 标签：android, alarmmanager

我无法让我的 BroadcastReceiver 工作。onReceive 没有被调用。我没有使用服务。我在我的活动的 onCreate 方法中设置警报。我也在使用 RTC_WAKEUP。但是，如果我的设备已经唤醒了怎么办？无论如何都会调用 onReceive 吗？即使设备处于唤醒状态，我也希望调用 onReceiver。通常，即使设备处于睡眠状态，我也需要调用接收器，但我也想执行接收器在手动启动活动时执行的代码。这是我开始闹钟的方式：

```
AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(context, ServiceStarter.class);
PendingIntent pi = PendingIntent.getActivity(context, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);
am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),  pi); 
```

在清单中：

```
<receiver  android:process=":remote" android:name=".ServiceStarter" android:exported="true"></receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:52:22.320

> 但是，如果我的设备已经唤醒了怎么办？无论如何都会调用 onReceive 吗？

是的。

> 这是我开始闹钟的方式：

您正在使用`getActivity()`. 该组件不是`Activity`. 它是一个`BroadcastReceiver`. 用于`getBroadcast()`构建`PendingIntent`将触发`BroadcastReceiver`.

> 在清单中：

删除`android:process="remote"`，因为您不需要它，它会通过浪费 RAM 来伤害用户。此外，删除`android:exported="true"`，因为您不需要它，它允许任何人触发您的`BroadcastReceiver`.

# python - 如何在平铺地图上进行运动？

> ID：16117583
> 
> 赞同：2
> 
> 时间：2013-04-20T06:50:29.683
> 
> 标签：python, html, python-imaging-library, mapnik

我有兴趣做这样的事情：

[http://hint.fm/wind/gallery/oct-30.js.html](http://hint.fm/wind/gallery/oct-30.js.html)

它看起来像一个瓦片地图，瓦片是动画 gif 吗？如果不是，如何实现这个动画？

我想使用 PIL 来生成 gif 并使用 mapnik/tilestache 提供它，但 tilestache 似乎不支持 .gif 瓷砖。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:06:10.160

如果您愿意使用 Javascript，我建议您使用这里提供的优秀 d3 库：http: [//d3js.org/](http://d3js.org/) 特别是，它对地图有很好的支持。查看此示例并告诉我它是否与您想要实现的目标相似：http: [//bl.ocks.org/karmi/raw/2366285/](http://bl.ocks.org/karmi/raw/2366285/)

# c# - 如何在 web 表单中使用 asp.net 3.5 中的路由

> ID：16117584
> 
> 赞同：0
> 
> 时间：2013-04-20T06:50:30.887
> 
> 标签：c#, asp.net, query-string, url-routing

我使用了以下代码，但我无法访问我的查询字符串......

```
public class RouteHandler : IRouteHandler
{
    string _virtualPath;
    public RouteHandler(string virtualPath)
    {
        _virtualPath = virtualPath;
    }
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        foreach (var value in requestContext.RouteData.Values)
        {
            //requestContext.HttpContext.Items[value.Key] = value.Value;
           // requestContext.HttpContext.
           //System.Web.HttpContext.Items[value.Key] = value.Value;
        }
        return (Page)BuildManager.CreateInstanceFromVirtualPath(_virtualPath, ypeof(Page));
    } 
```

全球.asax.......

```
private void RegisterRoutes(RouteCollection routes)
{
    routes.Add("home", new Route("home", new RouteHandler("default.aspx")));
    datatable dt = getmyurl();
    if (dt != null && dt.Rows.Count > 0)
    {
        foreach (DataRow dr in dt.Rows)
        {    try
            {
               routes.Add(dr["tag"].ToString() + "/" + dr["Ntag"].ToString(), new Route("{Pid}/{Cid}", new RouteHandler("~/test1/test1.aspx")));
            }
            catch (Exception exx){}
        }
    }
} 
```

现在我无法查询字符串。我认为我的自定义 RouteHandler 编码不好。我的默认页面上有一个按钮，用于重定向我的页面

```
Response.Redirect(dt.Rows[0]["tag"].ToString() + "/" + dt.Rows[0]["Ntag"].ToString());//    
response.redirect("goa/agra"); 
```

请帮我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-21T13:02:34.363

以下代码对我有用..

```
Page.RouteData.Values["ID"] 
```

# ruby-on-rails-3 - 回复：飞行狮身人面像和 Sidekiq

> ID：16117585
> 
> 赞同：0
> 
> 时间：2013-04-20T06:50:47.270
> 
> 标签：ruby-on-rails-3, indexing, thinking-sphinx, sidekiq, delta

恐怕我已经到了完全无助的地步：飞行狮身人面像和 Sidekiq。Sidekiq 和 FS 似乎无法在生产中进行通信。

我在 TS3 中并使用 Sidekiq 运行增量索引 - 它在开发中效果很好，并且昨天在生产中实际工作了一段时间。但是今天当我跑步时：

```
heroku run bundle exec sidekiq -q ts_delta 
```

我收到以下错误：

> 未定义的局部变量或方法“decode_frame”
> 
> # WebSocket::Frame::Incoming::Server:0x000000048cac40

最后是一长串：

尝试断开连接...未连接 尝试断开连接...未连接 尝试断开连接...未连接 尝试断开连接...未连接 尝试断开连接...未连接 尝试断开连接...未连接 尝试断开连接...未连接 断开连接尝试...未连接 尝试断开连接...未连接 尝试断开连接...未连接 尝试断开连接...未连接

我可以提供有关此问题的更多信息，以便我们一起解决 - 今天凌晨 2 点左右我都在我的电脑前（这已经是漫长的一天），并且可以提供任何必要的信息！

我只是不想马上让信息过载。

十指交叉，

劳伦特。

PS：包括来自new relick的错误报告：

```
action.rb: 22:in sleep' …flying-sphinx-e1395e724afb/lib/flying_sphinx/action.rb: 22:inblock in perform'
/usr/local/lib/ruby/1.9.1/timeout.rb: 58:in timeout' …flying-sphinx-e1395e724afb/lib/flying_sphinx/action.rb: 15:inperform'
…flying-sphinx-e1395e724afb/lib/flying_sphinx/action.rb: 5:in perform' …ng-sphinx-e1395e724afb/lib/flying_sphinx/controller.rb: 37:inindex'
…/lib/thinking_sphinx/deltas/sidekiq_delta/delta_job.rb: 14:in perform' …uby/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb: 49:inblock (3 levels) in process'
….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 109:in call' ….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 109:inblock in invoke'
….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 111:in block in invoke' …idekiq-2.10.1/lib/sidekiq/middleware/server/timeout.rb: 14:incall'
….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 111:in block in invoke' …-2.10.1/lib/sidekiq/middleware/server/active_record.rb: 6:incall'
….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware//app/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rbchain.rb: 111:in block in invoke' …kiq-2.10.1/lib/sidekiq/middleware/server/retry_jobs.rb: 50:incall'
….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 111:in block in invoke' …idekiq-2.10.1/lib/sidekiq/middleware/server/logging.rb: 11:inblock in call'
…/ruby/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/logging.rb: 22:in with_context' …idekiq-2.10.1/lib/sidekiq/middleware/server/logging.rb: 7:incall'
….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 111:in block in invoke' ….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 114:incall'
….1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb: 114:in invoke' …uby/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb: 48:inblock (2 levels) in process'
…uby/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb: 87:in stats' …uby/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb: 47:inblock in process'
…uby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb: 23:in call' …uby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb: 23:inpublic_send'
…uby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb: 23:in dispatch' …by/1.9.1/gems/celluloid-0.12.4/lib/celluloid/future.rb: 18:inblock in initialize'
…1/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb: 48:in call' …1/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb: 48:inblock in create 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:06:09.960

通过支持渠道直接与 Laurent 讨论了这个问题。这里的主要问题是 websocket（由 fly-sphinx gem 使用）使用自动加载，它不能很好地与 Sidekiq 配合使用。将生产 Rails 环境切换为线程安全必须在自动加载中进行一些调整，因为它解决了这个问题。

所以：如果您使用 Sidekiq，请确保您的环境启用了线程安全，甚至更好的是，不要使用自动加载（Matz 计划[在 Ruby 2.0 之后](http://www.ruby-forum.com/topic/3036681)将其删除）。

# c# - 未知的数据库连接器错误

> ID：16117591
> 
> 赞同：0
> 
> 时间：2013-04-20T06:51:06.030
> 
> 标签：c#, sql, crystal-reports

当我单击按钮显示报告（水晶）时，服务器计算机出现问题

此错误已显示：

> 文件 List_Vagozari_Ensheab_Ab {6B911DD4-2B53-4005-9372-522C74B17AD0}.rpt 中的未知数据库连接器错误错误：未知数据库连接器错误

当我右键单击数据库字段--->数据库专家...并单击 Oledb(ADO) 时出现以下错误：未知数据库连接器错误。并且无法创建或查看连接...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:10:17.220

Crystal 报表文件从 DataTable Rows 填充，您必须调整 Connection 对象上的连接属性。检查步骤：1-您的应用程序连接到服务器（如果没有检查服务器和客户端选项，例如防火墙和防病毒和 DBMS 服务器以及连接字符串和...） 2-您的服务器命令很好（语法和结果）请确定您的编程语言

# mongodb - MongoDB Shell：通过 BinData 查找

> ID：16117592
> 
> 赞同：7
> 
> 时间：2013-04-20T06:51:12.237
> 
> 标签：mongodb, mongo-shell

我在 MongoDB 中有一个文档，例如

```
{ "_id" : ObjectId("51723a2f2b9b90e9eb190c45"), "d" : BinData(0,"c9f0f895fb98ab9159f51fd0297e236d") } 
```

字段“d”已编入索引，但如何在 mongo shell 中通过其值找到？

例如

```
db.test.find( {"d": BinData(0,"c9f0f895fb98ab9159f51fd0297e236d") } ) 
```

不工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-05T19:27:23.883

Bindata 是二进制字符串的 base64 表示。必须实例化。

```
db.test.find( {"d": new BinData(0,"c9f0f895fb98ab9159f51fd0297e236d") } ) 
```

# c++ - 锐化图像 - 访问相邻像素

> ID：16117597
> 
> 赞同：2
> 
> 时间：2013-04-20T06:51:29.597
> 
> 标签：c++, visual-studio-2010, image, opencv, image-processing

我正在处理以下代码：

```
#include <iostream>
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>

using namespace std;
using namespace cv;

void Sharpen(Mat &,Mat);

int main()
{
    Mat image,result;

    try
    {
        image = imread("C:/Users/Public/Pictures/Sample Pictures/Desert.jpg");

        if(!image.data)
        {
            throw 1;
        }
    }
    catch(int i)
    {
        cout << "Image is unable to reae" << endl;
    }

    Sharpen(image,result);
    waitKey(0);
}

void Sharpen(Mat &image,Mat result)
{
    //result = image.clone();
    result.create(image.size(), image.type());

    //For all rows except first and last
    for(int i=1;i<image.rows-1;i++)
    {
        const uchar *previous = image.ptr<const uchar>(i-1);
        const uchar *next = image.ptr<const uchar>(i+1);
        const uchar *current = image.ptr<const uchar>(i);

        uchar *output = result.ptr<uchar>(i);

        //For all columns except first and last
        for(int a=1;a<image.cols-1;a++)
        {
            *output++ = cv::saturate_cast<uchar>(5*current[a]-current[a-1]-current[a+1]-previous[a]-next[a]);
        }

    }

    result.row(0).setTo(cv::Scalar(0));
    result.row(result.rows-1).setTo(cv::Scalar(0));
    result.col(0).setTo(cv::Scalar(0));
    result.col(result.cols-1).setTo(cv::Scalar(0));

    namedWindow("Original");
    imshow("Original",image);

    namedWindow("Duplicate");
    imshow("Duplicate",result);
} 
```

在这里，我想做的是，尝试锐化图像。以下是图像锐化的公式。

```
resultPixel = 5*currentPixel-previousPixel-nextPixel-upperPixel-belowPixel 
```

无论如何，以下是我得到的输出

![在此处输入图像描述](https://i.stack.imgur.com/onPBR.jpg)

如您所见，我没有得到预期的结果。做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:40:21.230

你的第一个问题是每个像素有 3 个字节，所以你只迭代了三分之一的图像。你的另一个问题是你不能做 *output++ 因为你想跳过第一个像素。将这两件事放在一起会产生以下代码，它会给出您正在寻找的结果。

```
#include <iostream>
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>

using namespace std;
using namespace cv;

void Sharpen(Mat &image,Mat& result)
{
    result.create(image.size(), image.type());

    //For all rows except first and last
    for(int i=1;i<image.rows-1;i++)
    {
        const uchar *previous = image.ptr<const uchar>(i-1);
        const uchar *next = image.ptr<const uchar>(i+1);
        const uchar *current = image.ptr<const uchar>(i);

        uchar *output = result.ptr<uchar>(i);

        //For all columns except first and last
        for(int a=3;a<(image.cols-1)*3;a++)
        {
            output[a] = cv::saturate_cast<uchar>(5*current[a]-current[a-1]-current[a+1]-previous[a]-next[a]);
        }

    }

    result.row(0).setTo(cv::Scalar(0));
    result.row(result.rows-1).setTo(cv::Scalar(0));
    result.col(0).setTo(cv::Scalar(0));
    result.col(result.cols-1).setTo(cv::Scalar(0));

    namedWindow("Original");
    imshow("Original",image);

    namedWindow("Duplicate");
    imshow("Duplicate",result);

}

int main()
{
    Mat image,result;

    try
    {
        image = imread("C:/Users/Public/Pictures/Sample Pictures/Desert.jpg");

        if(!image.data)
        {
            throw 1;
        }
    }
    catch(int i)
    {
        cout << "Image is unable to reae" << endl;
    }

    Sharpen(image,result);
    waitKey(0);
} 
```

# php - 如何使用 cURL 和 ajax curl 请求获得相同的远程会话？

> ID：16117598
> 
> 赞同：0
> 
> 时间：2013-04-20T06:51:29.917
> 
> 标签：php, session, cookies, curl, mod-proxy

我有一个 php 站点，它是 curl 的远程 php 应用程序，它带有 mod rewrite 代理，它使用会话来存储应用程序状态。页面的一些 php 代码是从带有 mod 代理和 curl 的远程服务器加载的（在中心框中，所以没有 htm 和 head 标签通过 curl）

我用这种方法保存了 curl 远程会话，它工作正常： [https](https://stackoverflow.com/a/6989705/2278155) : //stackoverflow.com/a/6989705/2278155 谢谢@Scuzzy！

但是我的应用程序也有几个简单的 ajax（不是 jquery，而是普通的 httpRequest），它们似乎与 php / curl 不共享相同的会话！ajax 调用也通过相同的 mod 代理和 curl。当我做了一个计数器时，很明显 ajax 调用和正常的页面刷新槽 curl 有不同的会话。

我怎样才能使它们相同？我可以添加一些像 sid= 这样的 url 参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T09:51:23.053

我面临着和你一样的问题。我正在开发一个应用程序，可以通过 Webbrowser (WebServer1) 或作为 iPad 和 Android 的 HTML5_App 访问。因为我的应用程序的核心是 (APIServer2) 我也有两个不同的 SID。

我的登录工作如下：

-> 对 API 服务器的 Ajax 请求以进行登录。如果成功，将用户 SID 存储在 APIServer 的数据库中。-> APIServer 将 SID 返回给客户端，这会刷新页面并将 SID 传输到 WebServer1 的 WebURL -> WebServer1 检查 SID 是否有效并在数据库中找到。如果是，则选择并存储该用户。

现在我可以处理我的所有操作，即使我有两个不同的 SID。

希望这可以帮助！

问候

# sql-server - 这项复杂工作的查询是什么

> ID：16117603
> 
> 赞同：-2
> 
> 时间：2013-04-20T06:52:03.517
> 
> 标签：sql-server

我有以下表格

```
Materials Groups
-------------------------------
|GrpID | GrpName | GrpParentID |
-------------------------------

Materials
--------------------------------------
|MatID | MatName | MatGroupID |Price |
--------------------------------------

Stores
-----------------------------
|StID | StName | StParentID |
-----------------------------

BillType
--------------------
|TypeID | TypeName |
-------------------- 
```

这些是类型

```
Store Out
Store In/Price
Sales Return
First Period Inventory
Sales
End Period Inventory
Store Out/Price
Purchase
Store In
Ready Product In
Purchase Return
Sales Return1
Raw Materials Out

Bills
----------------------------------
|BillID | BillType| Client..|....|
----------------------------------

BillItems
---------------------------------
|ItemID| MatID| quantity|BillID |
--------------------------------- 
```

要求以这种形式显示报告 ![报告设计](https://i.stack.imgur.com/0v3fY.png)

我认为这是一个很大的小姐，我不知道该怎么办

## 我尝试了 joins ， pivots ，但是我得到了不完整的报告，我认为这很复杂

**这是我最近的尝试**

```
declare @table1 table
(
    MatGUID uniqueidentifier,
    TypeGUID uniqueidentifier,
    Qty int
)
declare @table2 table
(
    MatGroup varchar(250),
    MatName varchar(250),
    BillTypeName varchar(250),
    Qty int
)
insert into @table1
select fatoraitem.MatGUID, fatora.TypeGUID, SUM(fatoraitem.Qty) as Qty
from bi000 fatoraitem
left join bu000 as fatora on fatora.GUID = fatoraitem.ParentGUID
left join bt000 as fatoratype on fatoratype.GUID = fatora.TypeGUID
group by fatoraitem.MatGUID, fatora.TypeGUID

insert into @table2
select gr000.Name as MatGroup, mt000.Name MatName, bt000.Name as BillTypeName, t1.Qty from @table1 t1
left join mt000 on mt000.GUID = t1.MatGUID
left join bt000 on bt000.GUID = t1.TypeGUID
left join gr000 on mt000.GroupGUID = gr000.GUID

declare
    @StoreCols nvarchar(max),
    @BillTypeCols nvarchar(max),
    @stmt nvarchar(max)

select @BillTypeCols = isnull(@BillTypeCols + ', ', '') + '[' + T.BillTypeName + ']' from (select distinct BillTypeName from @table2) as T

IF OBJECT_ID('tempdb..#Results') IS NOT NULL
    DROP TABLE #Results
select * into #Results from @table2
select @stmt = 'select * from #results as T
        pivot 
        (
            sum(T.Qty)
            for T.BillTypeName in (' + @BillTypeCols + ')
        ) as P'

exec sp_executesql  @stmt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:12:09.843

我不知道为什么人们投票反对？而不是编辑问题，在评论中提供建议或回答人们投票反对的问题。

我终于解决了它不是100％解决它是90％，换句话说商店的积累不起作用[它计算商店中材料的数量，但对于父商店它不和子商店相加]这是sql

```
create PROCEDURE [dbo].[AdvancedBillMatReport]
@ParamUserGuid AS UNIQUEIDENTIFIER = NULL,
@ParamMaterialguid AS UNIQUEIDENTIFIER = 0X0,
@ParamGroupLevel AS int = 0,
@ParamStoreGuid AS UNIQUEIDENTIFIER = 0X0,
@ParamDisplayType AS int = 1,
@ParamPriceType AS int = 0, 
@ParamBillTypesGuidsStr AS varchar(max)  = NULL
AS
SET NOCOUNT ON
IF OBJECT_ID('tempdb..#Result') IS NOT NULL
    DROP TABLE #Result
IF OBJECT_ID('tempdb..#Results') IS NOT NULL
    DROP TABLE #Results
IF OBJECT_ID('tempdb..#SecViol') IS NOT NULL
    DROP TABLE #SecViol
IF OBJECT_ID('tempdb..#SecViols') IS NOT NULL
    DROP TABLE #SecViols
CREATE TABLE [#SecViol] (Type [INT], Cnt [INT])
CREATE TABLE [#SecViols] (Type [INT], Cnt [INT])
--BILLTYPES
declare @BillTYpesGuids table
(
    TypeGUID uniqueidentifier,
    TypeName varchar(250)
)
insert into @BillTYpesGuids
select t1.GUID AS TypeGUID, bt000.Name AS TypeName from splitstring ( @ParamBillTypesGuidsStr, ';' ) t1 left join bt000 on bt000.GUID = t1.GUID

--MATRIALS the actual vertical part of thetable
declare @Materials table
(
    MatGUID uniqueidentifier,
    GroupGuid uniqueidentifier,
    Code varchar(250),
    Name varchar(250),
    LatinName varchar(250),
    [Level] int,
    [Path] [VARCHAR](8000),
    [Type] int
)
insert into @Materials
exec  repMattreeReport

--/////////////FILTER MATERIALS///////////////////////////////
DELETE FROM @Materials WHERE (Level < @ParamGroupLevel)
IF @ParamMaterialguid <> 0X0
BEGIN
    DELETE FROM @Materials WHERE MatGUID <> @ParamMaterialguid
END
SELECT * INTO #Result FROM @Materials
exec prcCheckSecurity @ParamUserGuid
DELETE FROM @Materials WHERE MatGUID NOT IN (SELECT MatGUID FROM #Result)
DROP TABLE #Result
INSERT INTO #SecViols SELECT * FROM #SecViol
TRUNCATE TABLE #SecViol
--/////////////DONE FILTERING//////////////////////////

--STORES the repeated Horizontal parts of table
declare @stores table
(
    StoreGuid uniqueidentifier,
    Name varchar(250),
    ParentGUID uniqueidentifier,
    Level int
)
insert into @stores(StoreGuid, Name, ParentGUID, Level)
SELECT T1.GUID AS StoreGuid, st000.Name, st000.ParentGUID, T1.Level FROM fnGetStoresListTree(@ParamStoreGuid, 1) AS T1 LEFT JOIN st000 ON T1.GUID = st000.GUID 

--/////////////FILTER STORES///////////////////////////

SELECT * INTO #Result1 FROM @stores
exec prcCheckSecurity @ParamUserGuid,0,0,'#Result1'
DELETE FROM @stores WHERE StoreGuid NOT IN (SELECT StoreGuid FROM #Result1)
DROP TABLE #Result1
INSERT INTO #SecViols SELECT *FROM #SecViol
TRUNCATE TABLE #SecViol
--/////////////DONE FILTERING//////////////////////////

--the grouped bill items
declare @MatData table
(
    MatGUID uniqueidentifier,
    StoreGUID uniqueidentifier,
    TypeGUID uniqueidentifier,
    GroupGuid uniqueidentifier,
    Qty int
)
insert into @MatData
select fatoraitem.MatGUID, fatoraitem.StoreGUID, fatora.TypeGUID, mada.GroupGUID, ISNULL(SUM(fatoraitem.Qty),0) as Qty
from bi000 fatoraitem
left join bu000 as fatora on fatora.GUID = fatoraitem.ParentGUID
left join mt000 as mada on mada.GUID = fatoraitem.MatGUID
group by fatoraitem.MatGUID, fatoraitem.StoreGUID, fatora.TypeGUID, mada.GroupGUID

INSERT INTO @Materials([Type], MatGUID, GroupGuid, Name,Path) VALUES(2, 0X0, 0X0, 'المجموع الكلي', (SELECT MAX(PATH) FROM @Materials))--FOR THE TOTAL
SELECT [Type], [Level], MatGUID, GroupGuid, Name INTO #ResultS FROM @Materials ORDER BY Path

DECLARE SelectedBillTypes CURSOR LOCAL FOR
SELECT TypeGUID, TypeName FROM @BillTYpesGuids

DECLARE STORESITERATOR CURSOR LOCAL FOR
SELECT StoreGuid, Name FROM @STORES

DECLARE MatIterator CURSOR LOCAL FOR
SELECT MatGuid, Name, Level, Type FROM @Materials

OPEN SelectedBillTypes--BILLS-TYPES
    DECLARE @TypeGuid UNIQUEIDENTIFIER
    DECLARE @TypeName varchar(250)
    FETCH NEXT FROM SelectedBillTypes into @TypeGuid, @TypeName
    WHILE(@@FETCH_STATUS = 0)
        BEGIN
            OPEN STORESITERATOR--STORES
                DECLARE @StoreGuid UNIQUEIDENTIFIER
                DECLARE @StoreName varchar(250)
                FETCH NEXT FROM STORESITERATOR into @StoreGuid, @StoreName
                WHILE(@@FETCH_STATUS = 0)
                BEGIN
                    DECLARE @ColumnQName VARCHAR(MAX)
                    DECLARE @ColumnPName VARCHAR(MAX)
                    DECLARE @AlterStatement VARCHAR(MAX)
                    set @ColumnQName = '[' + @TypeName + '.' + @StoreName + '.Q]'
                    SET @AlterStatement = 'ALTER TABLE #Results ADD ' + @ColumnQName + ' INT NOT NULL DEFAULT(0)'
                    Execute(@AlterStatement)
                    IF(@ParamDisplayType = 1)--EXPANED DISPLAY
                    BEGIN
                        set @ColumnPName = '[' + @TypeName + '.' + @StoreName + '.P]'
                        SET @AlterStatement = 'ALTER TABLE #Results ADD ' + @ColumnPName + ' INT NOT NULL DEFAULT(0)'
                        Execute(@AlterStatement)
                    END
                    OPEN MatIterator--MATS AND GROUPS
                    DECLARE @MatGuid uniqueidentifier, @MatName varchar(250), @MatLevel int, @MatType int
                    FETCH NEXT FROM MatIterator INTO @MatGuid, @MatName, @MatLevel, @MatType
                    WHILE(@@FETCH_STATUS = 0)
                    BEGIN
                        DECLARE @Price INT, @Quantity INT
                        DECLARE @InsertStatement varchar(MAX)

                        select @Price = CASE WHEN @ParamPriceType = 0X4 THEN Whole
                                             WHEN @ParamPriceType = 0x8 THEN Half
                                             WHEN @ParamPriceType = 0x10 THEN Export
                                             WHEN @ParamPriceType = 0x20 THEN Vendor
                                             WHEN @ParamPriceType = 0x40 THEN Retail
                                             WHEN @ParamPriceType = 0x80 THEN EndUser
                                        END
                                        from mt000 where GUID = @MatGuid
                        IF @MatType = 1
                            SELECT @Quantity = ISNULL(SUM(Qty), 0) FROM @MatData AS T1 WHERE (T1.MatGUID = @MatGUID AND T1.StoreGUID = @StoreGuid And T1.TypeGUID = @TypeGuid)
                        ELSE
                            SET @Quantity = 0
                        set @Price = @Price * @Quantity
                        SET @InsertStatement = 'UPDATE #Results SET ' + @ColumnQName + ' = ' + CAST(@Quantity as VARCHAR(50)) 
                        IF(@ParamDisplayType = 1)--EXPANED DISPLAY
                        BEGIN
                            SET @InsertStatement += ', ' + @ColumnPName + ' = ' + CAST(@Price AS VARCHAR(50))
                        END
                        SET @InsertStatement +=   ' WHERE MatGUID = ''' + CAST(@MatGuid AS VARCHAR(50)) + ''''
                        EXECUTE(@InsertStatement)
                        FETCH NEXT FROM MatIterator INTO @MatGuid, @MatName, @MatLevel, @MatType
                    END
                    CLOSE MatIterator
                    DECLARE @UpdateStatemENT VARCHAR(MAX)
                    DECLARE @Total VARCHAR(MAX)
                    DECLARE @MaxLevel INT
                    SELECT @MaxLevel = ISNULL(MAX(Level),0) FROM #ResultS
                    SET @Total = 'UPDATE #ResultS SET ' + @ColumnQName + ' = ' +
                                '(SELECT ISNULL(SUM(' + @ColumnQName + '), 0) FROM #ResultS AS T2 WHERE T2.Type = 1)'
                    IF(@ParamDisplayType = 1)--EXPANED DISPLAY
                    BEGIN
                        SET @Total += ', ' + @ColumnPName + ' = ' + '(SELECT ISNULL(SUM(' + @ColumnPName + '), 0) FROM #ResultS AS T2 WHERE T2.Type = 1) '
                    END
                    SET @Total +=' WHERE [TYPE] = 2'
                    EXECUTE(@Total)

                    WHILE (@MaxLevel>-1)
                    BEGIN
                        SET @UpdateStatemENT = 'UPDATE #ResultS SET ' + @ColumnQName + ' = ' +
                                               '(SELECT ISNULL(SUM(' + @ColumnQName + '), 0) FROM #ResultS AS T2 WHERE T2.GroupGuid = #ResultS.MatGUID)'
                        IF(@ParamDisplayType = 1)--EXPANED DISPLAY
                        BEGIN
                            SET @UpdateStatemENT += ', ' + @ColumnPName + ' = ' + '(SELECT ISNULL(SUM(' + @ColumnPName + '), 0) FROM #ResultS AS T2 WHERE T2.GroupGuid = #ResultS.MatGUID) '
                        END
                        SET @UpdateStatemENT += ' WHERE [TYPE] = 0 AND Level = ' + CAST(@MaxLevel AS VARCHAR(50))
                        EXECUTE(@UpdateStatemENT)
                        set @MaxLevel -= 1
                    END
                    FETCH NEXT FROM STORESITERATOR into @StoreGuid, @StoreName
                END
            CLOSE STORESITERATOR
            FETCH NEXT FROM SelectedBillTypes into @TypeGuid, @TypeName
        END
CLOSE SelectedBillTypes
SELECT * FROM #ResultS 
```

这是结果 ![在此处输入图像描述](https://i.stack.imgur.com/IOYHz.png)

表头是在 C++ 中构建的，我从列名列名中获取名称 = billtypename.storename.q 为数量或 billtypename.storename.p 为价格。在c ++中，我遍历表中的列名并将它们拆分并处理表主体中的标题我将它们放在来自服务器的位置

# android - Android 应用在 Rooted SAMSUNG SIII (d2can/d2vzw/d2spr) 上失败

> ID：16117605
> 
> 赞同：0
> 
> 时间：2013-04-20T06:52:13.847
> 
> 标签：android, samsung-mobile, rooted-device

我有一个已发布的包含音频处理的 Android 应用程序，例如 RAW 格式的录制/播放。我的 RAW 文件录制代码基于 URBAN STEW 的 Rehersal Assistant 应用程序，我的应用程序在非 root 三星设备上运行良好。Rooted Samsung Siii 设备似乎存在问题。我的大部分 1 星评论都来自三星 Galaxy Siii (d2can/d2vzw/d2spr) 用户。为什么“生根”会影响音频处理？我如何修改我的应用程序以在有根手机上无缝工作？是否可以检测设备何时被植根？

# c++ - 让函数返回字符串而不是整数是不是很糟糕？(C++)

> ID：16117606
> 
> 赞同：2
> 
> 时间：2013-04-20T06:52:14.847
> 
> 标签：c++, string, function, int, return

我对编程还是比较陌生。我正在使用 SDL 开发游戏，我发现自己想知道我在哪里使用了坏习惯。

例如，我有一个名为 titleScreen() 的函数，用户可以在其中决定进入哪种游戏模式。

我可以返回一个 0-3 的值，然后通过 if/else/else/else 语句对其进行处理，以决定他们选择的模式。

**或者**

我可以返回一个字符串，例如“STORYMODE”、“FREEPLAY”、“TUTORIAL”或“QUIT”，并使用它来决定哪种模式。

我喜欢第二种模式，因为它消除了试图弄清楚选择哪种模式时的最初困惑，但我有一种感觉，这样做会有问题。

在我的情况下，返回值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T06:54:26.223

在这种情况下，您应该使用`enum`列出所有状态来实现可读性而不影响性能。例如：

```
enum  mode {
    STORYMODE,
    FREEPLAY,
    TUTORIAL,
    QUIT
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T06:57:46.233

您应该为此使用枚举，这实际上是 int 但更具可读性。所以我会创建：

```
enum GameMode { STORYMODE, FREEPLAY, TUTORIAL, QUIT }; 
```

并有方法返回类型 GameMode。

**编辑2：**

如果每个游戏模式都有按钮，只需在单击按钮时返回 enum 或使用 enum 参数调用其他方法。与您现在使用字符串的方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:05:31.443

如果返回一个指向游戏对象的共享指针呢？下面是一些伪代码，可以帮助您入门以及对返回的对象进行的任何`titleScreen`调用。`operator()`

```
class GameI {
public:
    virtual ~GameI() {};
    void operator() = 0;
}

typedef std::shared_ptr<GameI> SharedGame;

class GameStory {
public:
    void operator();
}

void GameStory::operator()
{
    ...
}

SharedGame titleScreen()
{
    ...
    return SharedGame(new GameStory());
} 
```

# fedora - NIS 配置中的端口映射器故障

> ID：16117607
> 
> 赞同：-2
> 
> 时间：2013-04-20T06:52:22.100
> 
> 标签：fedora, yum, nis

我正在处理`fedora 17`，我正在尝试配置，我通过 ' **yum**`NIS server` ' 命令安装了**ypser、rpcbind、ypbind**包，一切都很好，但是在最后一步，当主机名必须存储在数据库中时，然后按**ctrl+ d**和 ' **y** ' 我收到端口映射器故障，但主机已成功添加到数据库中。

 ******我收到以下错误..

```
At this point, we have to construct a list of the hosts which will run NIS servers. dlp is in the list of NIS server hosts. Please continue to add the names for the other hosts, one per line. When you are done with the

list, type a   control D.

next host to add: vinita

next host to add:                  # Ctrl + D key

The current list of NIS servers looks like this:

vinita

Is this correct? [y/n: y] y        # answer yes

We need a few minutes to build the databases...

Building /var/yp/server.world/ypservers...

Running /var/yp/Makefile...

gmake[1]: Entering directory `/var/yp/server.world'

Updating passwd.byname...

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating passwd.byid.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating shadow.byname.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating group.byname.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating group.bygid.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating hosts.byname.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating hosts.byaddr.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating rpc.byname.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating rpc.bynumber.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating service.byname.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating service.byservicename.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating netid.byname.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating protocols.bynumber.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating protocols.byname.

Failure to send 'clear' to loca ypserv : RPC : port mapper failureUpdating mail.aliases.

Failure to send 'clear' to loca ypserv : RPC : port mapper failure# netgrp shadow publickey.

Failure to send 'clear' to loca ypserv : RPC : port mapper network ethers bootparams printcap.

gmake[1]: Leaving directory `/var/yp/server.world'

vinita has been set up as a NIS master server.

Now you can run ypinit -s vinita on all slave server. 
```

* * *

谁能帮我解决这个问题，由于这个问题，客户端无法连接到我的服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T15:43:21.127

这不是配置和安装 NIS 服务器等的问题。您面临的问题是您的操作系统。我建议您在安装/配置 ypbind、ypserv 和其他软件包之前将这些**shell 命令**放在您的 fedora 终端中。

```
$ user@user sudo su 
```

然后输入你的密码

```
# root@user apt-get clean
# root@user apt-get autoclean
# root@user apt-get update
# root@user apt-get upgrade
# root@user apt-get dist-upgrade
# root@user reboot 
```

然后你就可以使用你所有的`ypserv`和`ypbind`命令了，试试这个，我相信它一定会奏效的。******

# html - 带有文本的缩略图翻转

> ID：16117609
> 
> 赞同：0
> 
> 时间：2013-04-20T06:52:34.820
> 
> 标签：html, css, image, rollover

我正在使用以下 CSS 代码对文本进行翻转效果：

```
.thumb {
    position:relative;
}

.thumb img:hover {
    filter:alpha(opacity=0);
    -moz-opacity:0;
    -khtml-opacity:0;
    opacity:0;
}

.thumb:hover {
    background:#f00;
}

.thumb span {
    z-index:-10;
    position:absolute;
    top:10px;
    left:10px;
}

.thumb:hover span {
    z-index:10;
    color:#fff;
} 
```

HTML 代码：

```
<div class="thumb">
    <a href="http://domain.com/"><img src="thumbnail.jpg" /></a>
    <span>Text</span>
</div> 
```

除了当我将鼠标悬停在文本上时，一切都运行良好：翻转效果消失了，我可以再次看到图像。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:59:32.537

我想对于简单的叠加效果来说，样式太多了，如果你有兴趣看我从头开始制作的演示，那就去吧

[**演示**](http://jsfiddle.net/W6rKL/)

HTML

```
<div class="wrap">
    <img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" />
    <div class="overlay">Hello This Is So Simple</div>
</div> 
```

CSS

```
.wrap {
    position: relative;
    display: inline-block;
}

.overlay {
    opacity: 0;
    background: rgba(0,0,0,.8);
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    transition: opacity 1s;
    color: #fff;
    text-align: center;
}

.wrap:hover .overlay {
    opacity: 1;

} 
```

# c - 将文件描述符与 readlink() 一起使用

> ID：16117610
> 
> 赞同：2
> 
> 时间：2013-04-20T06:52:41.367
> 
> 标签：c, filenames, file-descriptor

我有一种情况需要获取文件名，以便调用 readlink() 函数。我所拥有的只是一个整数，它最初通过 open() 命令存储为文件描述符。问题是，我无权访问执行 open() 命令的函数（如果我这样做了，那么我就不会发布这个）。open() 的返回值存储在我可以访问的结构*中*。

```
char buf[PATH_MAX];

char tempFD[2]; //file descriptor number of the temporary file created
tempFD[0] = fi->fh + '0';
tempFD[1] = '\0';

char parentFD[2]; //file descriptor number of the original file
parentFD[0] = (fi->fh - 1) + '0';
parentFD[1] = '\0';

if (readlink(tempFD, buf, sizeof(buf)) < 0) {
    log_msg("\treadlink() error\n");
    perror("readlink() error");
} else 
    log_msg("readlink() returned '%s' for '%s'\n", buf, tempFD); 
```

这是 FUSE 文件系统的一部分。该结构称为fi，文件描述符存储在fh中，其类型为uint64_t。由于该程序的执行方式，我知道两个链接文件的文件描述符编号始终相隔 1。至少这是我的工作假设，我试图用这段代码来验证。

这可以编译，但是当我运行它时，我的日志文件每次都显示读取链接错误。我的文件描述符中存储了正确的整数值，但它不起作用。

有谁知道我如何从这些整数值中获取文件名？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:54:42.507

如果您的代码变得不可移植并且与在某种现代版本的 Linux 上运行相关联是可以接受的，那么您可以使用`/proc/<pid>/fd/<fd>`. 但是，我建议不要在 fd 中添加“0”作为获取表示数字的字符串的方法，因为它使用 fd < 10 的假设。

但是，如果您能够只获取文件名而不是依赖`/proc`. 至少，您可以使用链接器标志将对库函数的调用替换为包装函数。使用示例是`gcc program.c -Wl,-wrap,theFunctionToBeOverriden -o program`，对库函数的所有调用都将链接到 __wrap_theFunctionToBeOverriden; 原始函数可在名称 __real_theFunctionToBeOverriden 下访问。有关详细信息，请参阅此答案[https://stackoverflow.com/a/617606/111160](https://stackoverflow.com/a/617606/111160)。

但是，回到不涉及链接重新路由的答案：你可以这样做

```
 char fd_path[100];
 snprintf("/proc/%d/fd/%d", sizeof(fd_path), getpid(), fi->fh); 
```

您现在应该使用这个`/proc/...`路径（它是一个软链接）而不是使用它链接到的路径。

您可以调用`readlink`以查找文件系统中的实际路径。但是，这样做会引入安全漏洞，我建议不要使用路径`readlink`返回。

当描述符指向的文件被删除，取消链接时，您仍然可以通过`/proc/...`路径访问它。但是，当您`readlink`使用它时，您会得到原始路径名（附加一个“（已删除）”文本）。

如果您的文件是`/tmp/a.txt`并且它被删除，`readlink`则在`/proc/...`路径上返回`/tmp/a.txt (deleted)`. 如果此路径存在，您将能够访问它！，而您想访问不同的文件 ( `/tmp/a.txt`)。攻击者可能能够在`/tmp/a.txt (deleted)`文件中提供恶意内容。

另一方面，如果您只是通过`/proc/...`路径访问文件，您将访问正确的（未链接但仍然存在）文件，即使该路径声称是指向其他内容的链接。

# php - 在 php 中调用 javascript 函数并传递 php 变量？

> ID：16117611
> 
> 赞同：1
> 
> 时间：2013-04-20T06:52:44.133
> 
> 标签：php, javascript

假设我有 3 个变量，id，name，number，在 php 脚本上，$name，$number，$id

在 PHP 上，我创建了一个按钮

```
 print "<td><form><input type='button' name='edit' id='edit' onclick=ed($name, $number, $id) value='Edit' /></td>"; 
```

我希望将这 3 个变量发送到我的 javascript。

如果我使用，函数调用似乎工作得很好

```
onclick=ed(this.id) 
```

并修改函数头，这会传递字符串“edit”，但这不是很有用。

javascript中的函数头是

```
function ed(name, number, id) {
//stuff here
} 
```

无论使用这段代码有什么价值，都会让我在 html 上出现错误，在 html 文档的第 2 行出现意外的 }。

编辑：我应该澄清我说代码给了我错误，所以有人不只是说“好用这个！” 当我已经预料到它不起作用时。

使用这个：

```
<input type='button' id='$id' onclick=ed(this.id) value='Edit' /> 
```

允许我将 $id 中的值发送到 javascript 函数，因为它保存在 id 字段中。沿着这些路线的东西是我所希望的，但我无法找到是否有任何方法可以做到这一点。编辑：对于 3 个变量。

再次编辑：

使用：

```
<form><input type='button' name='$name' id='$id' title='$number' onclick='ed(this.name,this.title,this.id)' value='Edit' /></form> 
```

将所有 3 个 php 变量的值发送到 javascript 函数。

它不漂亮，但它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:58:35.813

对于自定义属性定义`data-attributes`，例如[Mozilla Dev](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)上所示：

```
<div id="user" data-id="1234567890" data-user="johndoe" data-date-of-birth>John Doe
</div>

var el = document.querySelector('#user');

// el.id == 'user'
// el.dataset.id === '1234567890'
// el.dataset.user === 'johndoe'
// el.dataset.dateOfBirth === ''

el.dataset.dateOfBirth = '1960-10-03'; // set the DOB.

// 'someDataAttr' in el.dataset === false

el.dataset.someDataAttr = 'mydata';
// 'someDataAttr' in el.dataset === true 
```

在您的情况下，您似乎只需要`data-number`其他两个是 DOM 元素的标准属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:02:06.373

我认为问题出在你的报价上，所以试试这个

```
 print '<td><form><input type="button" name="edit" id="edit" onclick=ed('.$name.','.$number.','.$id.') value="Edit" /></td>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:04:25.993

您只能像这样发送 3 个值：-

```
onclick="javascript:func_name('<?php echo $var1 . "," . $var2 . "," . $var3;?>'); 
```

在 js 函数中只取一个参数，然后使用“，”作为分隔符拆分 3 个值。

# javascript - 如何在目录 product_list Prestashop 中使用 jQuery Zoomy 插件

> ID：16117615
> 
> 赞同：0
> 
> 时间：2013-04-20T06:53:17.760
> 
> 标签：javascript, jquery, prestashop

我想在这里制作[http://www.templatemonster.com/prestashop-themes.php](http://www.templatemonster.com/prestashop-themes.php)。我将此脚本 sunsean.com/zoomi/zoomi.js 添加到标题中，然后更改 product_list

```
 <div class="center_block">
        <a href="{$product.link|escape:'htmlall':'UTF-8'}" class="product_img_link" title="{$product.name|escape:'htmlall':'UTF-8'}">
            <img class="zoomi" src="{$link->getImageLink($product.link_rewrite, $product.id_image, 'home_default')}" alt="{$product.legend|escape:'htmlall':'UTF-8'}" {if isset($homeSize)} width="{$homeSize.width}" height="{$homeSize.height}"{/if} />
                {if isset($product.new) && $product.new == 1}<span class="new">{l s='New'}</span>{/if}
        </a>
        <h3>
            <a href="{$product.link|escape:'htmlall':'UTF-8'}" title="{$product.name|escape:'htmlall':'UTF-8'}">{$product.name|escape:'htmlall':'UTF-8'|truncate:35:'...'}
            </a>
        </h3>
            <p class="product_desc">
                <a href="{$product.link|escape:'htmlall':'UTF-8'}" title="{$product.description_short|strip_tags:'UTF-8'|truncate:360:'...'}" >{$product.description_short|strip_tags:'UTF-8'|truncate:360:'...'}
                </a>
            </p>
    </div> 
```

但它不起作用。这是我所拥有的：

```
<img class="zoomi" width="124" height="124" alt="" src="http://kids.int/img/p/1/5/15-home_default.jpg" style="position: relative; z-index: 8;">    
<img class="zoom2" src="http://kids.int/img/p/1/5/15-home_default.jpg" style="position: absolute; z-index: 20; display: block; left: 1127px; top: 581px;"> 
```

# jquery - 如何使用 jquery ui 通过拖放交换表格单元格

> ID：16117617
> 
> 赞同：1
> 
> 时间：2013-04-20T06:53:40.040
> 
> 标签：jquery, jquery-ui

我想在拖放时交换表格的列。

```
<table>
 <tr>
  <td class='1'>
   First
  </td>
  <td class='2'>
   Second
  </td>
 </tr>
 <tr>
  <td class='3'>
   Third
  </td>
  <td class='4'>
   Fourth
  </td>
 </tr> 
```

现在我可以使用该`draggable`功能

```
 $(".1").draggable(); 
```

如果我将其拖到`class='1'` `td`，`class='4'` `td`那么两者`td's`都会互换。我怎么能做到这一点`jqueryui`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-20T18:57:35.707

我认为您需要`sortable`JQueryUI 中的功能

[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

从 API 中提取的示例：http: [//jsfiddle.net/D8Wgv/](http://jsfiddle.net/D8Wgv/)

# cookies - Github 页面和 jquery cookie；仅保存在页面级别的状态

> ID：16117618
> 
> 赞同：1
> 
> 时间：2013-04-20T06:53:42.830
> 
> 标签：cookies, github, github-pages

所以我只是在github上放了一个旧项目。它是用 PHP 编写的，并且有一些 cookie 的魔力，因此当您“反转”颜色时，它会留在网站上。我为 github 保存了该站点的渲染 HTML 版本，并将所有 cookie 魔法切换到 jquery.cookie 以便它可以在没有服务器端组件的情况下工作

下面有一个网站链接。

[http://reggi.github.io/csi-bp](http://reggi.github.io/csi-bp)

因此，似乎 github 页面在页面级别设置了 cookie，并且它们似乎没有在页面之间传输。是这样吗？我很好奇我错过了什么。

我知道他们只是出于 cookie / 安全目的将域从 github.com 切换到 github.io，但我不知道它会导致这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:19:31.240

这可能是来自 GitHub（4 月 18 日）的最新安全措施的副作用：

“[内容安全策略](https://github.com/blog/1477-content-security-policy)”

> [内容安全策略](http://www.w3.org/TR/CSP/)是一个新的 HTTP 标头，它提供了一个可靠的安全网来抵御 XSS 攻击。
> 它通过**阻止内联脚本**和**限制其他脚本可以从中加载的域来**做到这一点。

# php - 如何在php中仅获取两个没有模数的数字之间的除法结果

> ID：16117629
> 
> 赞同：1
> 
> 时间：2013-04-20T06:55:33.370
> 
> 标签：php, division

```
$a = 100;

$b = 40;

$result = $a/$b;

echo $result; 
```

为此，结果显示为 2.5，但我希望它为 2

如何在此删除除法结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:57:16.167

试试下面的代码。在 PHP 中，您需要使用函数`intval()`将浮点数转换为整数。

```
$a = 100; 
$b = 40; 
$result = intval($a/$b); 
echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:57:16.523

使用该`intval`函数将结果转换为整数（自然数）。

```
$a = 100;
$b = 40;
$result = intval($a/$b);
echo $resulk; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:58:49.597

你可以给

```
$a = 100;
$b = 40;

echo floor($a/$b); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T06:59:23.500

或者，您可以使用地板功能[http://www.php.net/manual/en/function.floor.php](http://www.php.net/manual/en/function.floor.php)

```
$a = 100;
$b = 40;
$result = floor($a/$b);
echo $result; 
```

# c++ - C++ 游戏加载对象/全局对象

> ID：16117630
> 
> 赞同：1
> 
> 时间：2013-04-20T06:55:56.113
> 
> 标签：c++, object, load, globalization, extern

我还是 C++ 新手，所以如果我的问题非常明显，请原谅我。我正在（尝试）编写一个 RPG 游戏。目前一切都很好地编译，但是我现在必须考虑如何在游戏打开时加载我的所有对象（对于单元类、项目等）。

我已经看到有关在头文件中使用 extern 的 DLL 和全局对象的线程，但我想知道哪个是最实用/最有效的方法？（因为游戏本身只会这么大）

就目前而言，我的代码非常笨拙且实现得不好（在尝试使用函数在单独的函数中声明我的对象并想知道为什么它们不可访问之前我什至没有想过），我应该使用 extern 而不是必须在 main() 中声明我的对象才能实例化它们（见下文）。

```
#include <iostream>
#include <string>
#include "Unit.h"
#include "UClass.h"

using namespace std;

// Seperate function at program start to load class list.
void loadClass(UClass& obj)
{
    obj.load("Peasant");

}

int main() {

    //Load classes...
    cout << "Creating peasant...\n";
    UClass peasant;
    loadClass(peasant);
    cout << peasant.show() << endl;

    cout << "\nCreating unit...\n";
    Unit man;
    man.SetLvl();
    man.SetClass(peasant);
    man.ShowInfo();

    return 0;
} 
```

再次抱歉，这是我第一次尝试多文件项目，提前感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:48:36.593

Take a look into std library where you have defined such structures as for example list. My idea would be for you to create list of objects that you load to your game, and while in resolving geometry or other logic you want you would iterate through the list. I think this is good for start. If I got your concerns correctly.

# opencv - 由于大量 Object-C 错误，无法构建 OpenCV2

> ID：16117632
> 
> 赞同：1
> 
> 时间：2013-04-20T06:56:15.040
> 
> 标签：opencv

伙计们

我正在尝试根据[这个](http://opencv.willowgarage.com/wiki/InstallGuide)官方安装指南在 OS X 10.8.3 上构建 OpenCV2。

配置步骤工作正常：

```
cmake -D:CMAKE_BUILD_TYPE=RELEASE .. 
```

但是当我用make构建它时：

```
make -j 8 
```

有很多像这样的 Object-C 错误：

```
/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:260: error: expected ';' before '__attribute__'
/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:261: error: expected ':' before '(' token
/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:261: error: expected type-specifier before '(' token
/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:261: error: expected ')' before '(' token
/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:261: error: expected identifier before '(' token
/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:261: error: expected ';' before '(' token
/System/Library/Frameworks/Foundation.framework/Headers/NSString.h:262: error: expected ';' before '__attribute__'

In file included from /System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:52,
                 from /System/Library/Frameworks/QTKit.framework/Headers/QTError.h:8,
                 from /System/Library/Frameworks/QTKit.framework/Headers/QTKit.h:11,
                 from /Users/kuankuan/Desktop/RoysData/Workspace/opencv/opencv-2.4.5/modules/highgui/src/cap_qtkit.mm:34:
/System/Library/Frameworks/Foundation.framework/Headers/NSPointerArray.h:57: error: expected ';' before '__attribute__'
/System/Library/Frameworks/Foundation.framework/Headers/NSPointerArray.h:58: error: expected ';' before '__attribute__'
In file included from /System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:54,
                 from /System/Library/Frameworks/QTKit.framework/Headers/QTError.h:8,
                 from /System/Library/Frameworks/QTKit.framework/Headers/QTKit.h:11,
                 from /Users/kuankuan/Desktop/RoysData/Workspace/opencv/opencv-2.4.5/modules/highgui/src/cap_qtkit.mm:34:
/System/Library/Frameworks/Foundation.framework/Headers/NSPort.h:68: error: expected constructor, destructor, or type conversion before '-' token[ 42%] 
/System/Library/Frameworks/Foundation.framework/Headers/NSPort.h:115: error: expected constructor, destructor, or type conversion before '-' token
In file included from /System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:57, 
```

我已经安装了 XCode 和 xcode 命令行工具。我该如何处理这个问题？我将在 C++ 下使用 opencv。

非常感谢 ！

# php - mysql在sha512加密中检查数据

> ID：16117635
> 
> 赞同：1
> 
> 时间：2013-04-20T06:56:37.833
> 
> 标签：php, mysql, sha512

我需要通过 MYSQL 查询和 PHP 检查 sha512 加密中的数据

我可以像这样通过 md5 做到这一点：

```
SELECT * FROM text WHERE md5(id) = '$id' 
```

但是，在 sha512 中呢？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:00:02.617

mysql 5.5+

```
SELECT * FROM text WHERE SHA2(id, 512) =  '$id' 
```

## 更多细节 ：

[`SHA2(str, hash_length)`](http://dev.mysql.com/doc/refman/5.6/en/encryption-functions.html#function_sha2)

> 计算 SHA-2 系列哈希函数（SHA-224、SHA-256、SHA-384 和 SHA-512）。第一个参数是要散列的明文字符串。第二个参数表示结果所需的位长度，其值必须为 224、256、384、512 或 0（相当于 256）。如果任一参数为 NULL 或哈希长度不是允许值之一，则返回值为 NULL。否则，函数结果是包含所需位数的哈希值。请参阅本节开头有关有效存储哈希值的注释。
> 
> 返回值是连接字符集中的非二进制字符串。

```
mysql> SELECT SHA2('abc', 224);
        -> '23097d223405d8228642a477bda255b32aadbce4bda0b3f7e36c9da7' 
```

> 此功能仅在 MySQL 已配置 SSL 支持时有效。请参见第 6.3.9 节，“使用 SSL 进行安全连接”。
> 
> SHA2() 可以被认为在密码学上比 MD5() 或 SHA1() 更安全。

# ios - 联系人从通讯录添加到 sqlite 数据库后应用程序崩溃

> ID：16117638
> 
> 赞同：0
> 
> 时间：2013-04-20T06:56:46.563
> 
> 标签：ios, addressbook

这就是我从通讯录中在我的数据库中添加联系信息的方式

```
ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeopleName = ABAddressBookCopyArrayOfAllPeople(addressBook);
    CFIndex nPeopleName = ABAddressBookGetPersonCount(addressBook);
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"MM/dd/yyyy"];

    for( int i = 0 ; i < nPeopleName ; i++ )
    {
        ABRecordRef ref = CFArrayGetValueAtIndex(allPeopleName, i );
        NSString* personName = (__bridge_transfer NSString*) ABRecordCopyValue(ref, kABPersonFirstNameProperty);
        NSDate* Date = (__bridge_transfer NSDate*) ABRecordCopyValue(ref, kABPersonBirthdayProperty);

        CFStringRef value, label;
        ABMutableMultiValueRef multi = ABRecordCopyValue(ref, kABPersonEmailProperty);
        CFIndex count = ABMultiValueGetCount(multi);
        if (count == 1) {
            value = ABMultiValueCopyValueAtIndex(multi, 0);
            NSString* emailAddress =    (NSString*)value;
            [emailAddress retain];
            CFRelease(value);
            [_Emailarray addObject:emailAddress];
            NSLog(@"_Emailarray%@",_Emailarray);

        } else {
            for (CFIndex i = 0; i < count; i++) {
                label = ABMultiValueCopyLabelAtIndex(multi, i);
                value = ABMultiValueCopyValueAtIndex(multi, i);

                // check for home e-mail label
                // you can put some if else here like there is already you checking for home but you can check for more like work and that and this and all which can provoide email id to you so as you can see the code which is below you do else if there and get email id from where ever you can got it?

                if (label && CFStringCompare(label, kABHomeLabel, 0) == 0) {
                    NSString* emailAddress = (NSString*)value;
                    [emailAddress retain];

                    NSLog(@"date%@",Date);
                    if (Date != nil) {

                    [_Emailarray addObject:emailAddress];

                    }
                    NSLog(@"_Emailarray%@",_Emailarray);
                    break;
                }

                CFRelease(label);
                CFRelease(value);
            }
        }
        if (_Emailarray.count == i) {
            NSLog(@"_Emailarray.count %d",_Emailarray.count);

            [_Emailarray addObject:[NSString stringWithString:@"Add Email"]];

            NSLog(@"_Emailarray%@",_Emailarray);
        }
        CFRelease(multi);

        NSString *birthdayDate = [dateFormat stringFromDate:Date]; 

        ABMultiValueRef phones = (ABMultiValueRef)ABRecordCopyValue(ref, kABPersonPhoneProperty);
        NSString* mobile=@"";
        NSString* mobileLabel;
        for (int i=0; i < ABMultiValueGetCount(phones); i++) {
            //NSString *phone = (NSString *)ABMultiValueCopyValueAtIndex(phones, i);
            //NSLog(@"%@", phone);
            // right now you are you getting mobile number from some plcaes but check for all the condition which are available in the addressbook and get the phone number just put some more else if condition and there you go got it ?

            mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
            if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel]) {
                NSLog(@"mobile:");
            } else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel]) {
                NSLog(@"iphone:");
            } else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhonePagerLabel]) {
                NSLog(@"pager:");
            }
            [mobile release];
            mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"%@", mobile);
            NSCharacterSet* charactersToRemove = [[NSCharacterSet decimalDigitCharacterSet] invertedSet] ;
            mobile = [[mobile componentsSeparatedByCharactersInSet:charactersToRemove] componentsJoinedByString:@""] ;

        }   
        NSString *holderString = [[NSString alloc]initWithString:@"Add Number"];

        if (birthdayDate != nil){

            [_birthdateincontects addObject:birthdayDate];
            NSLog(@"_birthdateincontects%@",_birthdateincontects);

            if([mobile isEqualToString:@""]){
                [_Phonearray addObject:holderString];
                  NSLog(@"_Phonearray%@",_Phonearray);

            }

            else{
                [_Phonearray addObject:mobile];
                NSLog(@"_Phonearray%@",_Phonearray);

            }
            if(personName != nil){

                [_namesincontects addObject:personName];
                NSLog(@"_namesincontects%@",_namesincontects);

            }
            else{
                [_namesincontects addObject:@"No Name"];
                 NSLog(@"_namesincontects%@",_namesincontects);

            }

        }

        NSLog(@"_namesincontects%@",_namesincontects);
        NSLog(@"_birthdateincontects%@",_birthdateincontects);
        NSLog(@"_Phonearray%@",_Phonearray);
        NSLog(@"_Emailarray%@",_Emailarray);

    }

    contentString = [[NSMutableString alloc]init];

    char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates,Phonenumber,Email,Profilepic) values(?,?,?,?,?);";
    sqlite3_stmt *stmt;
    int x;

    if ((x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil)) != SQLITE_OK)
    {
        NSLog(@"%s: prepare failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
        return;
    }

    for (int i = 0; i < _birthdateincontects.count; i++)
    {

        [contentString appendString:[_namesincontects objectAtIndex:i]];
        if(i !=_birthdateincontects.count-1){
        [contentString appendString:@", "];
        }

        sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 3, [[NSString stringWithFormat:@"%@",[_Phonearray objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 4, [[NSString stringWithFormat:@"%@",[_Emailarray objectAtIndex:i]] UTF8String],-1, NULL);

        sqlite3_bind_text(stmt, 5,[[NSString stringWithFormat:@"%@",@"No Image"] UTF8String],-1, NULL);        
        if ((x = sqlite3_step(stmt)) != SQLITE_DONE) {
            NSLog(@"%s: step failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
        }

        sqlite3_reset(stmt);
    }

    sqlite3_finalize(stmt);

      NSLog(@"contentString%@",contentString);

    if([contentString length] != 0){

        [[[UIAlertView alloc] initWithTitle:@"Friends added from AddressBook:" 
                                    message:contentString 
                                   delegate:nil 
                          cancelButtonTitle:@"OK" 
                          otherButtonTitles:nil] 
         show];

    }

    [_namesincontects removeAllObjects];
    [_birthdateincontects removeAllObjects];
    [_Phonearray removeAllObjects];
    [_Emailarray removeAllObjects];

    [UIAlertView release];
    [contentString release]; 

} 
```

数据被添加到 sqlite 数据库中，一切正常，然后出现 uialertview，当我放置断点时，一切都卡住了，然后它到达 main.m

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

并说 exe_bad_access

在安慰它说

```
 Single stepping until exit from function objc_release, 
which has no line number information.
(gdb) 
```

你能检查我的代码，你能更新一些东西吗？我试图解决这个问题很长时间，但没有任何帮助

注意：应用程序 10 次中有 2 次没有崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:35:50.493

```
ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeopleName = ABAddressBookCopyArrayOfAllPeople(addressBook);
    CFIndex nPeopleName = ABAddressBookGetPersonCount(addressBook);
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"MM/dd/yyyy"];

    for( int i = 0 ; i < nPeopleName ; i++ )
    {
        ABRecordRef ref = CFArrayGetValueAtIndex(allPeopleName, i );
        NSString* personName = (__bridge_transfer NSString*) ABRecordCopyValue(ref, kABPersonFirstNameProperty);
        NSDate* Date = (__bridge_transfer NSDate*) ABRecordCopyValue(ref, kABPersonBirthdayProperty);

        CFStringRef value, label;
        ABMutableMultiValueRef multi = ABRecordCopyValue(ref, kABPersonEmailProperty);
        CFIndex count = ABMultiValueGetCount(multi);
        if (count == 1) {
            value = ABMultiValueCopyValueAtIndex(multi, 0);
            NSString* emailAddress =    (NSString*)value;
            [emailAddress retain];
            CFRelease(value);
            [_Emailarray addObject:emailAddress];
            NSLog(@"_Emailarray%@",_Emailarray);

        } else {
            for (CFIndex i = 0; i < count; i++) {
                label = ABMultiValueCopyLabelAtIndex(multi, i);
                value = ABMultiValueCopyValueAtIndex(multi, i);

                // check for home e-mail label
                // you can put some if else here like there is already you checking for home but you can check for more like work and that and this and all which can provoide email id to you so as you can see the code which is below you do else if there and get email id from where ever you can got it?

                if (label && CFStringCompare(label, kABHomeLabel, 0) == 0) {
                    NSString* emailAddress = (NSString*)value;
                    [emailAddress retain];

                    NSLog(@"date%@",Date);
                    if (Date != nil) {

                    [_Emailarray addObject:emailAddress];

                    }
                    NSLog(@"_Emailarray%@",_Emailarray);
                    break;
                }

                //CFRelease(label);
               // CFRelease(value);
            }
        }
        if (_Emailarray.count == i) {
            NSLog(@"_Emailarray.count %d",_Emailarray.count);

            [_Emailarray addObject:[NSString stringWithString:@"Add Email"]];

            NSLog(@"_Emailarray%@",_Emailarray);
        }
       // CFRelease(multi);

        NSString *birthdayDate = [dateFormat stringFromDate:Date]; 

        ABMultiValueRef phones = (ABMultiValueRef)ABRecordCopyValue(ref, kABPersonPhoneProperty);
        NSString* mobile=@"";
        NSString* mobileLabel;
        for (int i=0; i < ABMultiValueGetCount(phones); i++) {
            //NSString *phone = (NSString *)ABMultiValueCopyValueAtIndex(phones, i);
            //NSLog(@"%@", phone);
            // right now you are you getting mobile number from some plcaes but check for all the condition which are available in the addressbook and get the phone number just put some more else if condition and there you go got it ?

            mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
            if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel]) {
                NSLog(@"mobile:");
            }
            else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel]) {
                NSLog(@"iphone:");
            }

            else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneMainLabel]) {
                NSLog(@"main:");

            } 
            else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhonePagerLabel]) {
                NSLog(@"pager:");
            }
        //    [mobile release];
            mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"%@", mobile);
            NSCharacterSet* charactersToRemove = [[NSCharacterSet decimalDigitCharacterSet] invertedSet] ;
            mobile = [[mobile componentsSeparatedByCharactersInSet:charactersToRemove] componentsJoinedByString:@""] ;

        }   
        NSString *holderString = [[NSString alloc]initWithString:@"Add Number"];

        if (birthdayDate != nil){

            [_birthdateincontects addObject:birthdayDate];
            NSLog(@"_birthdateincontects%@",_birthdateincontects);

            if([mobile isEqualToString:@""]){
                [_Phonearray addObject:holderString];
                  NSLog(@"_Phonearray%@",_Phonearray);

            }

            else{
                [_Phonearray addObject:mobile];
                NSLog(@"_Phonearray%@",_Phonearray);

            }
            if(personName != nil){

                [_namesincontects addObject:personName];
                NSLog(@"_namesincontects%@",_namesincontects);

            }
            else{
                [_namesincontects addObject:@"No Name"];
                 NSLog(@"_namesincontects%@",_namesincontects);

            }

        }

        NSLog(@"_namesincontects%@",_namesincontects);
        NSLog(@"_birthdateincontects%@",_birthdateincontects);
        NSLog(@"_Phonearray%@",_Phonearray);
        NSLog(@"_Emailarray%@",_Emailarray);

    }

    contentString = [[NSMutableString alloc]init];

    char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates,Phonenumber,Email,Profilepic) values(?,?,?,?,?);";
    sqlite3_stmt *stmt;
    int x;

    if ((x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil)) != SQLITE_OK)
    {
        NSLog(@"%s: prepare failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
        return;
    }

    for (int i = 0; i < _birthdateincontects.count; i++)
    {

        [contentString appendString:[_namesincontects objectAtIndex:i]];
        if(i !=_birthdateincontects.count-1){
        [contentString appendString:@", "];
        }

        sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 3, [[NSString stringWithFormat:@"%@",[_Phonearray objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 4, [[NSString stringWithFormat:@"%@",[_Emailarray objectAtIndex:i]] UTF8String],-1, NULL);

        sqlite3_bind_text(stmt, 5,[[NSString stringWithFormat:@"%@",@"No Image"] UTF8String],-1, NULL);        
        if ((x = sqlite3_step(stmt)) != SQLITE_DONE) {
            NSLog(@"%s: step failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
        }

        sqlite3_reset(stmt);
    }

    sqlite3_finalize(stmt);

      NSLog(@"contentString%@",contentString);

    if([contentString length] != 0){

        UIAlertView *alertForAddressbook=[[UIAlertView alloc] initWithTitle:@"Friends added from AddressBook:"  message:contentString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertForAddressbook show];

      // [alertForAddressbook release];
        //[contentString release]; 
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T05:53:04.823

```
d obj = [arr objectAtIndex:1];
if ([obj isKindOfClass:[NSString class])
{
    // It's an NSString, do something with it...
    NSString *str = obj;
    ...
} 
```

# android - Android：谷歌地图坐标

> ID：16117641
> 
> 赞同：0
> 
> 时间：2013-04-20T06:57:03.293
> 
> 标签：android, maps, coordinates

我有获取坐标并返回到谷歌地图的应用程序。我只有一个问题。当我放坐标时，指针不是很正确。我有一种方法，但我认为不适合这份工作。

对不起，我的英语不好。

提前致谢。

```
 touchedPoint=map.getProjection().fromPixels((int) cord,(int) cord1);

       CustomPoint custom = new CustomPoint(d, Maps.this);

        OverlayItem overlayItem = new OverlayItem(touchedPoint, null, null);

         custom.insertPoints(overlayItem);
        overlayList.add(custom); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:15:10.483

请使用谷歌地图 v2。这已被弃用，并且密钥在 3 月丢失。[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

[您可以在http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)找到教程

# php - PHP MYSQL SUM 直到一行然后停止

> ID：16117645
> 
> 赞同：0
> 
> 时间：2013-04-20T06:57:17.777
> 
> 标签：php, mysql, sum, case

基本上我正在创建一种支票账户类型查询。这将相当容易，除非我希望它分成页面。

所以我有一个被调用的字段，`amount`它可以是正数或负数。

问题是，如果我在记录 75-100 上，我需要查询总和，`amount`直到记录 75 并给我总数。然后我可以对记录 75-100 运行查询，并像这样遍历它们的金额：（假设包括 74 在内的总和为 500 美元）

```
record#    Amount    Total
75         25.00     525.00
76         35.00     560.00
77         40.00     600.00

etc. 
```

我在想的是获取记录 75 的 idnum 并总结，直到找到它： SUM(case when `idnum`!= $until then `amount`else 0 end)

然而，这只是继续。它不会在 75 处停止，它只是跳过 75，然后求和 76、77 等。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:33:05.847

```
SET @total=0;
SELECT
     recordno, 
     amount,    
     @total:= @total+ amount AS total
FROM table1 
LIMIT 75, 75 
```

或者

```
SELECT 
      cur.id, cur.amount, sum(prev.amount)
FROM table1 cur
left join table1 prev
    on cur.id >= prev.id
group by cur.id 
LIMIT 75, 75 
```

这里限制函数开始记录从 76 条记录到另外 75 条记录，您可以将其作为参数发送

# c++ - 通过 select() 实现非阻塞 udp 套接字

> ID：16117646
> 
> 赞同：1
> 
> 时间：2013-04-20T06:57:32.463
> 
> 标签：c++, c, sockets, select

我想创建一个异步/非阻塞 udp 客户端服务器应用程序，其中客户端和服务器应该相互聊天而无需等待对方轮到对方。我开始知道这可以通过 select() 来完成...

这是我的服务器（仅提及通信部分）：

```
fd_set readfds,writefds;

while(1){
    FD_ZERO(&readfds);
    FD_ZERO(&writefds);
    FD_SET(sd,&readfds);
    FD_SET(sd,&writefds);

    int rv = select(n, &readfds, NULL, NULL, NULL);
    if(rv==-1) 
    {
        printf("Error in Select!!!\n");
        exit(0);
    }
    if(rv==0) 
    {
        printf("Timeout occurred\n");
    }
    if (FD_ISSET(sd, &readfds))
    {     
        int client_length = (int)sizeof(struct sockaddr_in);
        memset(&buffer,0,sizeof(buffer));
        int bytes_received = recvfrom(sd, buffer,SIZE, 0, (struct sockaddr *)&client, &client_length);
        if (bytes_received < 0) {
            fprintf(stderr, "Could not receive datagram.\n");
            closesocket(sd);
            WSACleanup();
            exit(0);
        }
    }

    printf("\nClient says: %s",buffer);
    printf("\nWrite :");
    fgets(buffer,SIZE,stdin); 
    if(FD_ISSET(sd,&writefds)) {
        int client_length = (int)sizeof(struct sockaddr_in);
        if(sendto(sd, buffer,strlen(buffer), 0, (struct sockaddr *) &client,client_length)<0) {
            printf("Error sending the file! \n");
            printf("%d\n",WSAGetLastError());
            exit(1);
        }
    }
}
closesocket(sd);
WSACleanup();

return 0; 
```

}

这是我的客户：

```
fd_set readfds,writefds;
while(1)
{
    FD_ZERO(&readfds);
    FD_ZERO(&writefds);
    FD_SET(cs,&readfds);
    FD_SET(cs,&writefds);
    int rv=select(n,&readfds,&writefds,NULL,NULL);
            if(rv==-1)
    {
        printf("Error in Select!!!\n");
        exit(0);
    }
    if(rv==0)
    {
        printf("Timeout occurred\n");
    }
    printf("\nWrite  ");

    fgets(send_buffer,SIZE,stdin);
    if(FD_ISSET(cs,&writefds))
    {
        int server_length = sizeof(struct sockaddr_in);
        FD_CLR(cs,&writefds);

        if (sendto(cs, send_buffer, (int)strlen(send_buffer) + 1, 0, (struct sockaddr *)&server, server_length) == -1)
        {
            fprintf(stderr, "Error transmitting data.\n");
            closesocket(cs);
            WSACleanup();
            exit(0);
        }
    }

    char file_buffer[SIZE];
    //Reply reception from the server:"Ready to receive file"
    int data2=0;
    if (FD_ISSET(cs, &readfds))
    {
        FD_CLR(cs,&readfds);
        int server_length = sizeof(struct sockaddr_in);
        data2=recvfrom(cs,file_buffer,strlen(file_buffer)-1,0,(struct sockaddr *)&server,&server_length);
        //file_buffer[data2]='\0';
        if(data2<0)
        {
            printf("Server is not on:(\n");
            exit(0);
        }
    }
    //printf("%d",data2);
    printf("\nServer says:");
    for(int i=0;i<data2;i++)
    {
        putchar(file_buffer[i]);
    } 
}

return 0;
} 
```

起初在服务器端我写道：`int rv = select(n, &readfds, &writefds, NULL, NULL);`

但这导致服务器初始化时在服务器控制台上打印整个空数组，此外服务器和客户端之间的通信不正确。删除“&writefds”确实删除了冗余数据，但不正确的通信问题仍然存在......所以如果有人帮助我，我将非常感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:19:35.580

I see a couple of problems with your code.

First of all, if you want to wait for input from both the socket and the terminal, you should put both of those fds into the `readfds` set:

```
FD_SET(cs, &readfds);
FD_SET(stdin, &readfds); 
```

Since you're not doing any writing, you shouldn't be using `writefds`.

Next, you should make sure that you're only trying to read from the terminal if it has input ready. So, you should be doing something like:

```
if (FD_ISSET(stdin, &readfds)) {
    // Read in from terminal...
} 
```

You're currently trying to read each time, no matter what happens.

Last, you're measuring the size of your `file_buffer` incorrectly when you make your `recvfrom` call. `strlen` only works once you've already put data into it. You should be using `sizeof(file_buffer)`.

# c# - Windows Phone - 导航到其他页面

> ID：16117649
> 
> 赞同：1
> 
> 时间：2013-04-20T06:58:03.027
> 
> 标签：c#, navigation, windows-phone

假设我有一个 5 页的 windows phone 应用程序：

1.  登录
2.  主菜单（成功登录后）
3.  付款（从主菜单访问）
4.  输入信用卡详细信息（从主菜单访问）
5.  查看以前的付款（从主菜单访问）

用户可以在 Windows Phone 应用程序中使用某种 URL 导航到他喜欢的任何页面吗？例如，在网站中，用户可以通过在地址栏中键入 URL 来导航到任何页面。然后由程序员检查会话以查看用户是否有权查看页面。

此方案是否适用于 Windows Phone 应用程序？还是限制用户按照开发人员的指示遵循程序流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:38:55.873

用户不能在 Windows Phone 应用程序中自由导航，它必须遵循开发人员定义的路径。您必须定义交互。我能找到的唯一问题是向后导航。

# javascript - 当JSON对象名称不是原子时如何从JSON中提取数据

> ID：16117662
> 
> 赞同：1
> 
> 时间：2013-04-20T06:59:50.837
> 
> 标签：javascript

下面是一个使用 Xstream 创建的简单 JSON 对象。它是一个有效的 JavaScript 对象吗？实际上我想问如何访问第一个人的信息，如 id ，用户名，密码等。但是当我在浏览器中查看这个文件时，显示的网页没有显示“21”。我希望该页面应显示 21。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script>
        var obj = {"records":[
                     {"beans.Person":[
                        {"id":21,"name":"Name21","username":"Username21","password":"password21","age":41,"sex":true},
                        {"id":22,"name":"Name22","username":"Username22","password":"password22","age":42,"sex":true},
                        {"id":23,"name":"Name23","username":"Username23","password":"password23","age":43,"sex":true},
                        {"id":24,"name":"Name24","username":"Username24","password":"password24","age":44,"sex":true},
                        {"id":25,"name":"Name25","username":"Username25","password":"password25","age":45,"sex":true},
                        {"id":26,"name":"Name26","username":"Username26","password":"password26","age":46,"sex":true},
                        {"id":27,"name":"Name27","username":"Username27","password":"password27","age":47,"sex":true},
                        {"id":28,"name":"Name28","username":"Username28","password":"password28","age":48,"sex":true},
                        {"id":29,"name":"Name29","username":"Username29","password":"password29","age":49,"sex":true},
                        {"id":30,"name":"Name30","username":"Username30","password":"password30","age":50,"sex":true}
                       ]
                     }
                    ]
                  } 

          document.write(obj.records[0].beans.Person[0].id);
     </script>
  </head>
  <body>

  </body>
</html> 
```

但是当我在浏览器中查看这个文件时，显示的网页没有显示**21**。我希望该页面应显示 21。

您可以复制并粘贴源代码并尝试一下。它不显示**21**。我如何访问这些值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:08:42.590

您的问题是`"."`标识符中的使用`"beans.Person"`意味着您必须引用它，如下所示：

```
obj.records[0]["beans.Person"][0].id 
```

`document.write`除非您有充分的理由并且知道自己在做什么，否则请避免使用。

```
<div id="result"></div>

var obj = {
    "records": [{
        "beans.Person": [{
            "id": 21,
            "name": "Name21",
            "username": "Username21",
            "password": "password21",
            "age": 41,
            "sex": true
        }, {
            "id": 22,
            "name": "Name22",
            "username": "Username22",
            "password": "password22",
            "age": 42,
            "sex": true
        }, {
            "id": 23,
            "name": "Name23",
            "username": "Username23",
            "password": "password23",
            "age": 43,
            "sex": true
        }, {
            "id": 24,
            "name": "Name24",
            "username": "Username24",
            "password": "password24",
            "age": 44,
            "sex": true
        }, {
            "id": 25,
            "name": "Name25",
            "username": "Username25",
            "password": "password25",
            "age": 45,
            "sex": true
        }, {
            "id": 26,
            "name": "Name26",
            "username": "Username26",
            "password": "password26",
            "age": 46,
            "sex": true
        }, {
            "id": 27,
            "name": "Name27",
            "username": "Username27",
            "password": "password27",
            "age": 47,
            "sex": true
        }, {
            "id": 28,
            "name": "Name28",
            "username": "Username28",
            "password": "password28",
            "age": 48,
            "sex": true
        }, {
            "id": 29,
            "name": "Name29",
            "username": "Username29",
            "password": "password29",
            "age": 49,
            "sex": true
        }, {
            "id": 30,
            "name": "Name30",
            "username": "Username30",
            "password": "password30",
            "age": 50,
            "sex": true
        }]
    }]
}

document.getElementById("result").textContent = obj.records[0]["beans.Person"][0].id; 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/faFGc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T07:04:06.087

用于`JSON.parse()`从 JSON 字符串获取 javascript 对象。[您可以在此处](http://www.json.org/js.html)获得更多信息。

**编辑：**

```
var objectID = obj.records[0]['beans.Person'][0]['id']; 
```

一个很好的阅读，[使用方括号表示法](http://www.javascripttoolbox.com/bestpractices/#squarebracket)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T07:57:16.223

试试这个，我相信它会工作

```
document.write(obj.records[0]['beans.Person'][0]['id']); 
```

检查控制台，我很确定你有错误。它带着豆子和人两个不同的对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-08T12:54:23.767

这是后端代码 C# 中的对象示例

```
public Class Learner
{
     public string Name {get; set;}
     public string Surname {get; set;}
} 
```

然后在 JavaScript 中从 JsonResult 读取对象时

```
 var leanerName = obj[0].Name;
 var leanerSurname = obj[0].Surname; 
```

希望这可以帮助

# cgal - 如何在 Windows 中安装 MPFI 库？

> ID：16117668
> 
> 赞同：2
> 
> 时间：2013-04-20T07:00:23.353
> 
> 标签：cgal, mpfi

那里！

我想执行示例程序 Surface_reconstruction_points_3。

我认为该程序还需要第三个库 MPFI。

所以我从[http://mpfi.gforge.inria.fr/](http://mpfi.gforge.inria.fr/)下载了这个库。

我将其解压缩到正确的文件夹并将其链接到系统路径。

使用 cmake-gui 配置示例程序后，

我发现了一些错误消息，“找不到 MPFI（缺少：MPFI_LIBRARIES）”。

如何使用 Visual Studio 2008 在 Window 中安装 MPFI 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T03:12:01.690

由于 MPFI 是一个 GNU 库，因此它在 Windows 上完全受支持。

CGAL 在其安装中提供了这个第三方库，但 Windows 有自己的替代品。

我用 Visual Studio 正确安装了它，但是您需要取消选中那些第三方库，这样 CGAL 就不会弄乱自己的 Windows 替换。

对于安装中的所有示例代码，可能进行这种安装并不适用，但它适用于开发。我在没有 Voronoi 以及 2D 和 3D 三角剖分的第三个库的情况下使用 CGAL，它工作正常。

对于全新安装，请删除之前安装的所有内容，确保新安装不会与之前的错误安装相混淆。

**编辑：**

关于不使用 Windows 的这些可选库，我刚刚通过 CGAL 邮件列表收到了一封类似的邮件，这些可能是更新版本的 CGAL (>4.2) 的步骤：

您必须在 CMake 机器中注释 3 行：

*   在 CGAL-4.1/CMakeList.txt 你必须评论：

    *   `#list (INSERT CGAL_ESSENTIAL_3RD_PARTY_LIBRARIES 0 GMP MPFR)`
    *   `#hide_variable(CGAL_ESSENTIAL_3RD_PARTY_LIBRARIES)`
*   在 CGAL-4.1/cmake/modules/UseCGAL.cmake 你必须评论：

    *   `#use_essential_libs()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-29T13:04:35.297

另一方面，您可以在 Internet 上搜索 MPFI 的预编译版本。例如，您可以在[http://vegas.loria.fr/rs/](http://vegas.loria.fr/rs/)上找到适用于 Windows 的预编译 GMP、MPFR 和 MPFI 。

# extjs - 动态更改字段的属性

> ID：16117670
> 
> 赞同：2
> 
> 时间：2013-04-20T07:00:31.367
> 
> 标签：extjs, extjs4

在我的应用程序的视口中，我正在显示表单面板，其中包含中心区域的字段列表和东部区域的属性网格。

我需要在选择字段时在属性网格中显示该字段的属性列表。用户可以更改属性。现在我的要求是将属性动态应用于该字段。

有没有通用的方法来实现这一点？

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:48:58.283

一些属性具有 getter 和 setter 函数，但不是全部，我怀疑它们对于您正在尝试做的事情是否足够一致。

我的建议是为每个字段存储配置对象，配置对象将具有您希望能够使用属性网格更改的每个属性。当属性更改时，从表单中删除该字段。[使用Ext.create](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext-method-create)重新创建它，并将您的配置对象作为第二个参数传递。然后只需将对象重新插入表单。

编辑：您可能可以通过使用表单面板上的[插入](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.form.Panel-method-insert)功能跳过使用 Ext.create，它似乎能够直接接受配置对象。

# html - 你如何将 CSS 代码与 HTML 代码结合起来？我想合并它们？

> ID：16117671
> 
> 赞同：-2
> 
> 时间：2013-04-20T07:00:34.300
> 
> 标签：html, css

您能否使用最终代码复制并粘贴您的答案？这是一个带有 HMTL 的图像的图像映射代码，我现在想给它添加一个 CSS 阴影。

*这是代码：*

```
<style>
{
-moz-box-shadow: 15px 15px 15px #888;
-webkit-box-shadow: 15px 15px 15px #888;
box-shadow: 15px 15px 15px #888;
}

</style> 
```

*下面是我需要将 CSS 阴影代码添加到其中的图像的 HTML 代码：*

```
<div style="text-align:center; width:1130px; auto; auto;">
<img id="Image-Maps_9201304191940558" src="http://images.mylot.com/userImages/images/postphotos/2080106.jpg" usemap="#Image-Maps_9201304191940558" border="0" width="1130" height="2808" alt="" />

<map id="_Image-Maps_9201304191940558" name="Image-Maps_9201304191940558">
<area shape="rect" coords="293,566,385,603" href="http://www..com/about" alt="about" title="about" />
<area shape="rect" coords="631,568,720,603" href="http://www..com/contact" alt="contact" title="contact" />

</map>

</div> 
```

所以我只想将代码组合在一起！我最初在雅虎答案上问过这个问题，所以现在我在这里问它，因为没有人可以帮助那里。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:03:36.753

您没有为 CSS 声明使用任何选择器

```
div {
    -moz-box-shadow: 15px 15px 15px #888;
    -webkit-box-shadow: 15px 15px 15px #888;
    box-shadow: 15px 15px 15px #888; 
} 
```

如果您需要定位 img 标签，您可以使用`div img {}`选择器，最好使用类而不是使用元素选择器

[**演示**](http://jsfiddle.net/L76AR/)

注意 - 阴影位于底部，因此您需要向下滚动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T07:16:10.957

'正确'的方法是将css放在一个文件中，将html放在另一个文件中，然后从`<head>`html文件的部分链接css文件（出于多种原因，我们尝试维护最佳实践，但主要原因是代码可维护性和可重用性——通过拆分这些文件，您可以使代码更具可读性和可维护性，并允许自己在多个 HTML 文件中重用 css 文件）。

例如：

索引.html：

```
<html>
<head>
    ...
    <link rel='stylesheet' type='text/css' href='styles.css'>
</head>
<body>
    <div id='stylediv'>
        <img id="Image-Maps_9201304191940558" src="http://images.mylot.com/userImages/images/postphotos/2080106.jpg" usemap="#Image-Maps_9201304191940558" border="0" width="1130" height="2808" alt="" />

        <map id="_Image-Maps_9201304191940558" name="Image-Maps_9201304191940558">
            <area shape="rect" coords="293,566,385,603" href="http://www.google.com/about" alt="about" title="about" />
            <area shape="rect" coords="631,568,720,603" href="http://www.google.com/contact" alt="contact" title="contact" />
        </map>

    </div>
</body>
</html> 
```

样式.css：

```
#stylediv {
    text-align:center; 
    width:1130px; 
    margin: auto;
    -moz-box-shadow: 15px 15px 15px #888;
    -webkit-box-shadow: 15px 15px 15px #888;
    box-shadow: 15px 15px 15px #888;
} 
```

允许将样式置于行内。您甚至可以将它们放在标签的`style=`属性中，但以上是最佳实践。`<div>`

请注意，这`id`是唯一的，因此如果您想将上述 css 应用于多个 div，您将改为使用css`class=stylediv`并将其更改`#stylediv`为`.stylediv`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T07:05:48.117

**HTML**

```
<div>
  <img id="Image-Maps_9201304191940558" src="http://images.mylot.com/userImages/images/postphotos/2080106.jpg" usemap="#Image-Maps_9201304191940558" border="0" width="1130" height="2808" alt="" />
  <map id="_Image-Maps_9201304191940558" name="Image-Maps_9201304191940558">
    <area shape="rect" coords="293,566,385,603" href="http://www.google.com/about" alt="about" title="about" />
    <area shape="rect" coords="631,568,720,603" href="http://www.google.com/contact" alt="contact" title="contact" />
  </map>
</div> 
```

**CSS**

```
div {
  text-align: center;
  width: 1130px;
}

img {
  -moz-box-shadow: 15px 15px 15px #888;
  -webkit-box-shadow: 15px 15px 15px #888;
  box-shadow: 15px 15px 15px #888;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T07:07:06.120

您需要用 div 的名称命名 css

```
<style>
#divName{
-moz-box-shadow: 15px 15px 15px #888;
-webkit-box-shadow: 15px 15px 15px #888;
box-shadow: 15px 15px 15px #888;
}
<style> 
```

然后你的 html div 需要有匹配的 divName

id 使用 # 而 class 使用 .

```
<div id="divName"> Pic with Shadow </div> 
```

需要在 CSS 中使用选择器 #divName

# ruby-on-rails - Rake db:migrate - 我如何知道是否存在未运行的迁移

> ID：16117673
> 
> 赞同：3
> 
> 时间：2013-04-20T07:00:55.367
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, migration

我正在开发现有的 Rails 应用程序，进行更改并更新它。

如何检查其中是否有未运行的 rake db:migrate？有直接命令吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:47:03.357

Running this:

```
rake db:migrate:status 
```

Would give you this:

```
 up     20130415141113  Rename coupon to discount coupon
   up     20130416144722  Create ratings
  down    20130419102623  Add published to product
  down    20130419124429  Add attachment photo to users 
```

Anything that is 'down' has NOT been migrated.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:03:36.490

```
rake db:migrate:status 
```

会给你这些信息

# java - 笔记本电脑插拔电源适配器上的 Java 事件

> ID：16117674
> 
> 赞同：2
> 
> 时间：2013-04-20T07:01:02.897
> 
> 标签：java, windows-7, power-management, battery

我希望我的应用程序能够响应将电源适配器插入/拔出笔记本电脑。Java 中是否有适合该操作的库或类？操作系统是Win7

# java - 通过套接字从 Java 发送 int 到 C - 奇怪的结果

> ID：16117681
> 
> 赞同：0
> 
> 时间：2013-04-20T07:02:56.893
> 
> 标签：java, c, sockets, network-programming

我有一个用 Java 编写的简单服务器，它只向连接的客户端发送一个整数。我有一个用 C 编写的客户端，它连接到服务器并打印出接收到的整数。

我的问题是结果各不相同。大约一半的时间执行客户端我得到正确的结果（234），但其他时候我得到 8323072。

这是服务器：

```
class TCPServer {
  public static void main(String args[]) throws Exception {
     ServerSocket welcomeSocket = new ServerSocket(6789);

     while(true)
     {
        Socket connectionSocket = welcomeSocket.accept();
        System.out.println("welcomeSocket.accept() called");
        DataInputStream inFromClient = new DataInputStream(connectionSocket.getInputStream());
        DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());

        outToClient.writeInt(234);
     }
  } 
```

}

这是客户端：

```
int main(int argc, char *argv[])
{
    if(argc != 4){
        printUsage();
        return;
    }

    char* serverIP = argv[1];
    char* serverPortC = argv[2];
    char* integerToSendC = argv[3];

    int serverPort = atoi(serverPortC);
    int integerToSend = atoi(integerToSendC);

    int socketDesc = socket(AF_INET, SOCK_STREAM, 0);

    if(socketDesc < 0) {
        printf("Error when creating socket\n");
        return;
    } 

    struct sockaddr_in serverAddr;
    serverAddr.sin_family = AF_INET;
    serverAddr.sin_port = htons(serverPort);
    inet_pton(AF_INET, serverIP, &serverAddr.sin_addr);

    int connection = connect(socketDesc, (struct sockaddr*) &serverAddr, sizeof serverAddr);

    if(connection < 0) {
        printf("Error when establishing connection\n");
        return;
    }

    char intBuffer[4];

    if(recv(socketDesc, intBuffer, sizeof intBuffer, 0) == -1){
        printf("Error while receiving Integer\n");
    }

    int receivedInt = ntohl(*((int *) &intBuffer));

    printf("Received int: %d\n", receivedInt);

    close(socketDesc);
} 
```

提前感谢您的帮助！

编辑：所以最后我做了这样的事情，只是为了任何有同样问题的人：

```
while(receivedBytes < 4){
    int readBytes = read(receiverSocket, &intBuffer, (sizeof intBuffer) - receivedBytes, receivedBytes);
    receivedInteger += (intBuffer << (8*receivedBytes));
    receivedBytes += readBytes;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:25:03.590

你能确定你`sizeof intBuffer`在客户端收到了字节吗？不，您不能，因为`recv()`可能返回的字节数少于请求的字节数。

`recv()`只要收到少于请求的字节并且没有发生错误，您的代码就会循环。

请注意，`recv()`ing`0`字节表示连接已被另一方关闭。

还要确保服务器端以网络字节顺序发送。

另外^2：初始化变量（`intBuffer`这里）是个好主意，至少在开发阶段会说：在调整阶段之前。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T07:09:52.793

您的问题可能是由于各种数据类型的子边界。

在 Java 中，分配 4 个字节，分配`int`2 个字节`short`。
在 C 中，4 个字节是 for`long`和 2 个字节 for `int`。

这意味着`Java int`->`C long`和`Java short`-> `C int`。
现在这取决于您的优先事项在哪里。

如果您想在 Java 中执行密集的数学计算并通过套接字将结果发送到 C，我建议您这样做，`Java int -> C long`或者
如果您只想发送少量数字并在 C 中完成密集的计算，请执行`Java short`->`C int`转换。

希望有帮助。

# php - 将“LIKE”与“=”标准一起使用

> ID：16117682
> 
> 赞同：0
> 
> 时间：2013-04-20T07:02:59.387
> 
> 标签：php, mysql, search

我不知道如何在以下代码中将“=”标准与“LIKE”结合起来。

该代码用于使用多个条件进行搜索。使用这个 cat_id 的搜索是好的，希望我不希望它的标准成为“LIKE”标准的一部分；相反，它应该是“=”，以便我可以在搜索中获得完全匹配。您的帮助将不胜感激。

```
$criteria = array('ctitle', 'csubject', 'creference', 'cat_id', 'cmaterial', 'ctechnic', 'cartist', 'csource', 'stolen');
$likes = "";
$url_criteria = '';
foreach ( $criteria AS $criterion ) {
        if ( ! empty($_POST[$criterion]) ) {
                $value = ($_POST[$criterion]);
                switch ($criterion) {
                    case 'cat_id':
                        $likes .= " AND `$criterion`='$value'";
                        break;

                    default:
                        $likes .= " AND `$criterion` LIKE '%$value%'";
                        break;
                $url_criteria .= '&amp;'.$criterion.'='.htmlentities($_POST[$criterion]);
            } }
        } elseif ( ! empty($_GET[$criterion]) ) {
                $value = mysql_real_escape_string($_GET[$criterion]);
                switch ($criterion) {
                    case 'cat_id':
                        $likes .= " AND `$criterion`='$value'";
                        break;

                    default:
                        $likes .= " AND `$criterion` LIKE '%$value%'";
                        break;
                $url_criteria .= '&amp;'.$criterion.'='.htmlentities($_GET[$criterion]);
        } //var_dump($likes);
}

$sql = "SELECT * FROM collections WHERE c_id>0" . $likes . " ORDER BY c_id ASC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:14:16.283

`switch`是你的朋友。

```
$criteria = array('ctitle', 'csubject', 'creference', 'cat_id', 'cmaterial', 'ctechnic', 'cartist', 'csource', 'stolen');
$likes = "";
$url_criteria = '';
foreach ($criteria as $criterion) {
        if (isset($_POST[$criterion]) && !empty($_POST[$criterion])) {
                $value = mysql_real_escape_string($_POST[$criterion]);
                switch ($criterion) {
                    case 'cat_id':
                        $likes .= " AND `$criterion`='$value'";
                        break;

                    default:
                        $likes .= " AND `$criterion` LIKE '%$value%'";
                        break;
                } 
```

Better'n`if`语句或三元运算符，因为它在未来很容易扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:27:07.200

```
 if($criterion=='cat_id')
        $likes .= " AND `$criterion` = '$value'"
    else
        $likes .= " AND `$criterion` LIKE '%$value%'"; 
```

# android - 在 onCreateView 开始之前

> ID：16117683
> 
> 赞同：0
> 
> 时间：2013-04-20T07:03:08.567
> 
> 标签：android, android-fragments

在 PageFragment 中；我在 onCreateView 中膨胀了一个布局。但我想在 onCreateView 加载之前膨胀这个布局。它可以膨胀一次/或每个片段；不重要。

我怎样才能实现它？

```
public class PageFragment extends Fragment {  
@Override  
     public void onCreate(Bundle savedInstanceState) {  
         super.onCreate(savedInstanceState);  
     }  

     @Override  
     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  

         View view = inflater.inflate(R.layout.page_quiz, container, false);  
          tv = (TextView) view.findViewById(R.id.Text);  

         LinearLayout ll = (LinearLayout) view.findViewById(R.id.questionList);

         return view;  
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:13:09.170

您只需要提供一个布局作为 in 的返回参数`onCreateView()`，这并不意味着您必须在那里对其进行膨胀。布局可以来自任何地方。`onAttach()`您可以在或 中膨胀布局`onCreate()`。

用于`getActivity()`获取`LayoutInflater`实例：

```
View layout = LayoutInflater.from(getActivity()).inflate(........); 
```

# iphone - 如何在 iphone 中使用 CATextLayer 设置视频中的文本位置？

> ID：16117684
> 
> 赞同：0
> 
> 时间：2013-04-20T07:03:12.247
> 
> 标签：iphone, ios, ios4, cocos2d-iphone, iphone-sdk-3.0

我在使用 AVMutableComposition 的视频中使用 CATextLayer 设置文本，并且正在显示文本，但我无法在屏幕上设置其位置...使用此代码正在显示文本，但它显示在屏幕的左侧并被减半...

有没有人可以帮我解决这个问题。我真的被击中了，找不到解决方案..请帮帮我

我使用的代码是...

AVAssetTrack *clipVideoTrack = [[videoAsset trackingWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

```
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:clipVideoTrack atTime:kCMTimeZero error:nil];

[compositionVideoTrack setPreferredTransform:[[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] preferredTransform]];

CGSize videoSize = [clipVideoTrack naturalSize];

UIImage *myImage = [UIImage imageNamed:[arrClipArt objectAtIndex:selectedClipArt.tag-200]];//<=======================code to set the Image using CALayer
CALayer *aLayer = [CALayer layer];
aLayer.contents = (id)myImage.CGImage;
aLayer.frame = CGRectMake(selectedClipArt.frame.origin.x-imgMovieThumbnail.frame.origin.x, selectedClipArt.frame.origin.y-imgMovieThumbnail.frame.origin.y, 400, 400);
aLayer.opacity = 1.0;
CALayer *parentLayer = [CALayer layer];
CALayer *videoLayer = [CALayer layer];
parentLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
videoLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
[parentLayer addSublayer:videoLayer];
[parentLayer addSublayer:aLayer];

CATextLayer *titleLayer = [CATextLayer layer];//<========code to set the text
titleLayer.string = txtIntro.text;
titleLayer.font = (__bridge CFTypeRef)(txtFont.text);
titleLayer.fontSize = 100;
//?? titleLayer.shadowOpacity = 0.5;
titleLayer.alignmentMode = kCAAlignmentCenter;
titleLayer.bounds = CGRectMake(400,0, 600, videoSize.height/2); //You may need to adjust this for proper display 
```

// titleLayer.frame=CGRectMake(100, 100, 50, 30); [parentLayer addSublayer:titleLayer];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T07:39:45.543

尝试设置titleLayer的位置。

```
titleLayer.position = CGPointMake (100,100); 
```

titleLayer.frame 确实对我有用。

# html - 目标ie和非ie不行？我的ie版本的ie10

> ID：16117686
> 
> 赞同：0
> 
> 时间：2013-04-20T07:03:33.443
> 
> 标签：html, target, internet-explorer-10

这是我的代码。使用 ie 时，我希望它显示“请更换您的浏览器！”，并且只有非 ie 浏览器才能看到其他代码。但它在 ie10 中不起作用（即 10 不显示 h1 但其他代码）我的代码有什么问题？

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Sisu|Swap</title>
<link type="text/css" rel="stylesheet" href="1.css">
</head>
<body>
<!--[If IE]> 
<h1 style="color: white">please change your browser!</h1>
<![endif]-->
<!--[if !IE]>--> 
  <header>
    <img src="imgs/header.jpg" />
  </header>

  <footer>

  </footer>

</body>
</html>
<!--<![endif]--> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:05:55.577

Internet Explorer 10 不支持条件注释，请参阅[有关条件注释的 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)。

> **重要**  从 Internet Explorer 10 开始，标准模式不再支持条件注释。使用功能检测为浏览器不支持的网站功能提供[有效的后备策略。](http://msdn.microsoft.com/en-us/library/hh273396(v=vs.85).aspx)有关标准模式的更多信息，请参阅[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)。

# c# - 如何在 C# 中正确使用 DataGridView

> ID：16117691
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:04:11.040
> 
> 标签：c#, sql, winforms, datagridview

嗯，这是一个非常非常广泛的问题。我做了很多研究，但我仍然感到困惑。

所以，我的问题是我有一个连接到 SQL 数据库的小 C# 程序。通过C#接口我可以将数据插入我的SQL数据库（我知道是因为我在MySQLWorkbench中检查过，数据都在那里），但我想看到它，所以我可以根据需要进行编辑、更新和擦除；为此，我需要使用 DataGridView，但就是这样，太复杂了，我看过很多信息，这让我更加困惑。

我将对我的 C# 程序进行几乎完整的复制粘贴：

```
private void Form1_Shown(object sender, EventArgs e)
    {
        conexion.Open();
        textBox2.Focus();
        try
        {
            DataSet ds = new DataSet();
            MySqlDataAdapter da = new MySqlDataAdapter("SELECT cveestado, nombre FROM tbestados", conexion);
            da.Fill(ds, "FillDropDown");
            comboBox1.DisplayMember = "Nombre";
            comboBox1.ValueMember = "CveEstado";
            comboBox1.DataSource = ds.Tables["FillDropDown"];
            conexion.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        Guardar();
    }

    private void Guardar()
    {
        if (textBox2.Text == "")
        {
            MessageBox.Show("Ingrese un nombre", "Error");
            textBox2.Focus();
        }
        else if (comboBox1.SelectedItem.ToString() == "")
        {
            MessageBox.Show("Elija un estado", "Error");
            comboBox1.Focus();
        }
        else
        {
            conexion.Open();
            try
            {
                cmd.CommandText = "insert into tbmunicipios (nombre, cveestado) values ('" + textBox2.Text + "', '" + comboBox1.SelectedValue.ToString() + "')";
                cmd.ExecuteNonQuery();
                cmd.Clone();
                MessageBox.Show("Datos Guardados", "Mensaje");
                conexion.Close();
                textBox2.Text = "";
                comboBox1.Text = "";
                textBox2.Focus();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
    } 
```

上面我显示了一个“Nombre”{name}，但我在一个组合框中获得了一个“Clave”{Id}；我想对我的 DataGridView 做同样的事情；但我再说一遍，我看过很多信息，但这一切都让我更加困惑。

而且，为了清楚起见，我还要复制粘贴我的 SQL 代码：

```
Create table tbEstados
(
    CveEstado int not null,
    Nombre varchar (45) not null,
    Constraint pkCveEstado Primary Key (CveEstado)
)Engine=Innodb;
Create table tbMunicipios
(
    CveMunicipio int not null AUTO_INCREMENT,
    Nombre varchar (45) not null,
    CveEstado int not null,
    Constraint pkCveMunicipio Primary Key (CveMunicipio),
    Constraint fkCVeEdo Foreign Key (CveEstado) references tbEstados (CveEstado)
)Engine=Innodb; 
```

提前感谢您的任何答案：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:23:49.403

兄弟，我推荐的是使用`DataTable`而不是像这样并在你的 UI 上`DataSet`拖一个`DataGridView`

```
private void Form1_Shown(object sender, EventArgs e)
{
    conexion.Open();
    textBox2.Focus();
    try
    {
        DataTable dt = new DataTable();
        MySqlDataAdapter da = new MySqlDataAdapter("SELECT cveestado, nombre FROM tbestados", conexion);
        da.Fill(dt);
        //Here Comes your DataGridView
        DataGridView1.DataSource = dt;
        conexion.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
    }

} 
```

我正在做的最佳实践是在`Form_Load`事件中调用此方法

# objective-c - 将集群类作为单例？

> ID：16117697
> 
> 赞同：4
> 
> 时间：2013-04-20T07:05:29.233
> 
> 标签：objective-c, cocoa, singleton

**对不起这篇文章的长度；这是为了记录我遇到这个问题的旅程。**

我有一个关于 Cocoa 应用程序中需要不时更改的共享对象以及如何最好地存储它以便可以从几个不同的地方访问它的问题。忍受我。

**类实现**

共享对象被实现为一个类集群（即[https://stackoverflow.com/a/2459385/327179](https://stackoverflow.com/a/2459385/327179)），如下所示（注意这`Document`只是一个类名；它不一定表示我的实际类做）：

在`Document.h`：

```
typedef enum {
    DocumentTypeA,
    DocumentTypeB
} DocumentType;

@interface Document : NSObject {}
- (Document *) initWithDocumentType:(NSUInteger)documentType;
- (void) methodA;
- (void) methodB;
@end 
```

在`Document.m`：

```
@interface DocumentA : Document

- (void) methodA;
- (void) methodB;

@end

@interface DocumentB : Document

- (void) methodA;
- (void) methodB;

@end

@implementation Document

- (Document *)initWithDocumentType:(NSUInteger)documentType;
{
    id instance = nil;
    switch (documentType) {
        case DocumentTypeA:
            instance = [[DocumentA alloc] init];
            break;
        case DocumentTypeB:
            instance = [[DocumentB alloc] init];
            break;
        default:
            break;
    }

    return instance;
}

- (void) methodA
{
    return nil;
}

- (void) methodB
{
    return nil;
}

@end

@implementation DocumentA

- (void) methodA
{
    // ...
}

- (void) methodB
{
    // ...
}

@end

@implementation DocumentB

- (void) methodA
{
    // ...
}

- (void) methodB
{
    // ...
}

@end 
```

**用户如何与`Document`**

通过菜单项，用户可以随意在 DocumentA 和 DocumentB 之间切换。

**发生“切换”时会发生什么**

例如，当用户从 切换`DocumentA`到 时`DocumentB`，我需要发生两件事：

1.  我的主要`NSViewController`( `MainViewController`) 需要能够使用新对象。
2.  我`AppDelegate`需要更新一个`NSTextField`恰好位于主窗口内容边框中的内容。（FWIW，我似乎只能为`NSTextField`in分配一个出口`AppDelegate`）

**问题**

我已经看到很多提到单例作为一种获得全局参考的方法，而不会弄乱一个`AppDelegate`（主要是[这里](http://www.cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)和[这里](http://jason.agostoni.net/2012/01/22/ios-best-practices-singletons/)）。也就是说，我没有看到太多关于覆盖这样一个单例的信息（在我们的例子中，当用户切换`DocumentA`到`DocumentB`[或反之亦然] 时，这个全局引用将需要保存新对象）。我不是设计模式方面的专家，但我确实记得听说过单例并不意味着被销毁和重新创建......

所以，鉴于这一切，这是我的问题：

1.  你将如何存储我的类集群（这样`MainViewController`并且`AppDelegate`可以适当地访问它）？
2.  我是否通过让`MainViewController`（谁`Document`大量使用）和`AppDelegate`（谁管理主窗口[因此，我的`NSTextField`]）都知道`Document`？

如果我对这个问题的思考有误，请随时告诉我；我希望这个实现尽可能正交和正确。

谢谢！

* * *

**状态更新 #1**

感谢@JackyBoy 的建议，这是我采取的路线：

*   `Document`是在“切换”时“通知”`AppDelegate`并`MainViewController`通过将新创建的实例传递给它们的那个。
*   两者都`AppDelegate`可以根据需要通过 Singleton 实例`MainViewController`更新对象。`Document`

这是我的新文件（已简化，以便大家看到问题的症结所在）：

在`Document.h`：

```
#import <Foundation/Foundation.h>
@class AppDelegate;
@class MainViewController;

typedef enum {
    DocumentTypeA,
    DocumentTypeB
} DocumentType;

@interface Document : NSObject

@property (weak, nonatomic) MainViewController *mainViewControllerRef;
@property (weak, nonatomic) AppDelegate *appDelegateRef;

+ (Document *)sharedInstance;
- (id)initWithParser:(NSUInteger)parserType;

@end 
```

在`Document.m`：

```
#import "AppDelegate.h"
#import "Document.h"
#import "MainViewController.h"

@interface DocumentA : Document

// ...

@end

@interface DocumentB : Document

// ...

@end

@implementation Document

@synthesize appDelegateRef;
@synthesize mainViewControllerRef;

+ (Document *)sharedInstance
{
    static XParser *globalInstance;
    static dispatch_once_t predicate;
    dispatch_once(&predicate, ^{
        // By default, I return a DocumentA object (for no particular reason).
        globalInstance = [[self alloc] initWithDocumentType:DocumentA];
    });

    return globalInstance;
}

- (id)initWithDocumentType:(NSUInteger)documentType
{
    Document *instance = nil;
    switch (parserType) {
        case DocumentTypeA:
            instance = [[DocumentA alloc] init];
            break;
        case DocumentTypeB:
            instance = [[DocumentB alloc] init];
            break;
        default:
            break;
    }

    // QUESTION: Is this right? Do I have to store these references
    // every time a new document type is initialized?    
    self.appDelegateRef = (AppDelegate *)[NSApp delegate];
    self.mainViewControllerRef = self.appDelegateRef.mainViewController;

    [self.appDelegateRef parserSwitchedWithParser:instance];
    [self.mainViewControllerRef parserSwitchedWithParser:instance];

    return instance;
}

@end

@implementation Xparser_NSXML

// ...

@end

@implementation DocumentA

// ...

@end 
```

我应该为`Document`知道 and 的存在而`AppDelegate`烦恼`MainViewController`吗？`Document`此外，当对象更新时，它会重新通知*和* （即使其中一个启动了更新）`AppDelegate`，我是否应该对此感到困扰？`MainViewController`

与往常一样，我感谢大家对此的关注，因为我对理想实施的追求仍在继续。:)

* * *

**状态更新 #2**

@Caleb 的评论帮助我理解，`NSNotification`对于这个特定问题，基于 - 的设置将不那么笨拙。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:22:19.190

> 我确实记得听说过单例不应该被销毁和重新创建......

好吧，您可以在其中包含引用，因此您实际上并不是在“破坏”单例，而是他指向的对象。我倾向于在没有应用程序逻辑的情况下离开 App Delegate，所以我通常把它放在其他地方。就您而言，由于您需要从不同的地方访问某些东西，因此拥有一个是有意义的。关于集群，你仍然可以拥有它，你只需让单例访问它并返回适当的对象，如下所示：

```
Document *myDocument = [[MySingleton defaultManager] createObjectWithType:aType]; 
```

你从中获得了一些东西：

1.  您可以从应用程序中的任何位置访问您的集群

2.  您将事物解耦，只有一个实体知道您的集群。

3.  在 Singleton 中，您可以引用 AppDelegate 并与之交互。

4.  在 Singleton 中，您可以引用正在使用的对象（文档 A、文档 B）

还有一件事，我建议将集群访问方法作为类方法（而不是实例方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T07:40:29.413

我认为他在这里不需要共享对象，更不用说单例了。您真的需要在任意时间从许多不同的对象中找到当前文档吗？似乎您只有两个对象（应用程序委托和视图控制器）都需要了解当前文档。**通知提供了一种简单的管理方法：**每当发生切换时，您都可以发布包含新文档的 NSNotification。任何需要了解当前 Document 的对象都将注册“文档切换”通知，并且当通知到达时，它们可以将指向 Document 的指针存储在实例变量或属性中。

# mysql - 无法从数据源获取 JDBC 连接

> ID：16117699
> 
> 赞同：1
> 
> 时间：2013-04-20T07:05:46.340
> 
> 标签：mysql, sql, jdbc, gradle

我试图在 gradle 中运行以下命令，它给了我以下错误：

```
 c:\gsoc\mifosx\mifosng-provider>gradle migrateTenantListDB -PdbName=mifosplatfor
m-tenants
Listening for transport dt_socket at address: 8005
:migrateTenantListDB FAILED

FAILURE: Build failed with an exception.

* Where:
Build file 'C:\gsoc\mifosx\mifosng-provider\build.gradle' line: 357

* What went wrong:
Execution failed for task ':flywayMigrate'.
> Unable to obtain Jdbc connection from DataSource

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug
option to get more log output.

BUILD FAILED

Total time: 13.843 secs 
```

脚本文件在这里，行号。of error 显示为 357，但我不知道为什么它显示错误。是否与mysql服务器中的配置不正确有关，请在此处帮助我：脚本：

```
task migrateTenantListDB<<{
    description="Migrates a Tenant List DB. Optionally can pass dbName. Defaults to 'mifosplatform-tenants' (Example: -PdbName=someDBname)"

    def filePath = "filesystem:$projectDir" + System.properties['file.separator'] + '..' + System.properties['file.separator'] + 'mifosng-db' + System.properties['file.separator'] + 'migrations/list_db'
    def tenantsDbName = 'mifosplatform-tenants';
    if (rootProject.hasProperty("dbName")) {
        tenantsDbName = rootProject.getProperty("dbName")
    }

    flyway.url= "jdbc:mysql://localhost:3306/$tenantsDbName"
    flyway.locations= [filePath]

    flywayMigrate.execute()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:43:34.403

该项目的 gradle 脚本已将 mysql 密码硬编码为 mysql。在尝试此命令之前，您需要将 localhost 密码设置为 mysql 并检查连接。

# php - 如何保护隐藏字段数据？

> ID：16117705
> 
> 赞同：-3
> 
> 时间：2013-04-20T07:06:47.840
> 
> 标签：php, hidden

我有一个表格，其中有两个隐藏字段。我想保护隐藏字段中的数据，以便没有人可以通过页面源看到它并触发错误。我已经使用过会话并且它正在工作，但我不能使用它。我需要替代它请帮忙。

```
<form name="android" method="post" action="http://apps.createcoolapps.com/c2dm_send.ashx" target="_blank" onSubmit="return valid();">
<table align="center">  
<?php $qry_id=mysql_query("select * from users where u_name='$_SESSION[u_name]'");
                    while($id_fetch=mysql_fetch_assoc($qry_id)){
            ?>

      <input type="hidden" name="publisherid" value="createcoolapps" />
<input type="hidden" name="username" value="<?php echo $query_id[manager_uname];?>" />
<input type="hidden" name="pass" value="<?php echo $query_id[manager_pass];?>" />
    <tr align="center">
    <td style="width: 100px; font-family: Helvetica,Arial,sans-serif; font-weight: bold;">Select Appid:<br>
      <select name="appid" style="border-style:hidden">
    <option value="">Select any one</option>
    <option value="QRScanner">app1</option>
    <option value="app3">app3</option>
    <option value="app4">app4</option>
    </select>
    </tr> 
    <tr align="center">
    <td style="width: 100px; font-family: Helvetica,Arial,sans-serif; font-weight: bold;">Notification Message:<br>
      <textarea name="pushmessage" style="width: 300px;"></textarea><br />
    </tr>
    <?php }?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:17:23.500

This is not possible. Firebug just reads the DOM in it's actual state, so even if it's added in a later stage, it can still be retrieved.

This way of security is called Security through obscurity and is a kind of non-security. You would have to solve it another way, like letting the server do the request in stead.

You let the user submit the form to the server. Then with curl, you make the call to the webservice with the correct user code.

For further info [Best way to hide a form input field from being accessed using firebug?](https://stackoverflow.com/questions/3510011/best-way-to-hide-a-form-input-field-from-being-accessed-using-firebug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:14:52.507

隐藏字段和安全？不可能。会话和服务器端代码是安全的。您可以进行加密和解密。但这可能会被打破。使用带有会话的数据库来处理数据。

# c# - 如何在服务器端使用 C# 从 html 字符串中查询和提取特定标记？

> ID：16117706
> 
> 赞同：2
> 
> 时间：2013-04-20T07:06:59.707
> 
> 标签：c#, asp.net-mvc, html-parsing

我有 html 字符串驻留在服务器中的文件中，对于每个用户请求，我必须`ID`从提到的文件中选择一些标记并将它们发送到客户端。我想知道，是否有任何 .NET 库可以完成这种工作我！？。我到底想要实现的是这样的事情（使用Jquery）：

```
var sometag = $("#id"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:10:42.060

您可能想查看[CsQuery](https://github.com/jamietre/CsQuery)。

> CsQuery 是 .NET 4 的 jQuery 端口。它实现了所有 CSS2 和 CSS3 选择器、jQuery 的所有 DOM 操作方法以及一些实用方法。大多数 jQuery 测试套件（从 1.6.2 开始）已移植到 C#。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:09:26.870

试试[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)。我还需要 7 个字符才能发布。

# android - 在没有服务的情况下使用 AlarmManager

> ID：16117710
> 
> 赞同：2
> 
> 时间：2013-04-20T07:07:10.423
> 
> 标签：android, service, alarmmanager

是否可以在不使用服务的应用程序的情况下使用 AlarmManager 来运行警报。AlarmManager 必须让设备退出睡眠模式并在 onReceive 中执行我的代码。实际上，我在这里看到的每个代码示例都显示了正在使用的服务。然而，Android 文档并没有提到需要服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:45:52.107

这是一个工作示例，

activity_alarm_manager.xml 文件的代码

```
<linearlayout android:layout_height="match_parent"
   android:layout_width="match_parent" android:orientation="vertical"
   xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools">

   <button android:id="@+id/btStart" android:layout_height="wrap_content"
     android:layout_width="match_parent" android:onclick="startRepeatingTimer"
     android:padding="@dimen/padding_medium" android:text="@string/btStart"  
     tools:context=".WidgetAlarmManagerActivity"/>
   <button android:id="@+id/btCancel" android:layout_height="wrap_content"
     android:layout_width="match_parent" android:onclick="cancelRepeatingTimer" 
     android:padding="@dimen/padding_medium" android:text="@string/btCancel"
     tools:context=".WidgetAlarmManagerActivity"/>
    <button android:id="@+id/btOneTime" android:layout_height="wrap_content"
    android:layout_width="match_parent" android:onclick="onetimeTimer"
    android:padding="@dimen/padding_medium" android:text="@string/btOneTime"  
    tools:context=".WidgetAlarmManagerActivity"/>
  </linearlayout> 
```

BroadcastReceiver的代码，

```
public class AlarmManagerBroadcastReceiver extends BroadcastReceiver {

 final public static String ONE_TIME = "onetime";

 @Override
 public void onReceive(Context context, Intent intent) {
   PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
         PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "YOUR TAG");
         //Acquire the lock
         wl.acquire();

         //You can do the processing here.
         Bundle extras = intent.getExtras();
         StringBuilder msgStr = new StringBuilder();

         if(extras != null && extras.getBoolean(ONE_TIME, Boolean.FALSE)){
          //Make sure this intent has been sent by the one-time timer button.
          msgStr.append("One time Timer : ");
         }
         Format formatter = new SimpleDateFormat("hh:mm:ss a");
         msgStr.append(formatter.format(new Date()));

         Toast.makeText(context, msgStr, Toast.LENGTH_LONG).show();

         //Release the lock
         wl.release();
 }

 public void SetAlarm(Context context)
    {
        AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, AlarmManagerBroadcastReceiver.class);
        intent.putExtra(ONE_TIME, Boolean.FALSE);
        PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
        //After after 5 seconds
        am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 5 , pi);
    }

    public void CancelAlarm(Context context)
    {
        Intent intent = new Intent(context, AlarmManagerBroadcastReceiver.class);
        PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        alarmManager.cancel(sender);
    }

    public void setOnetimeTimer(Context context){
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, AlarmManagerBroadcastReceiver.class);
        intent.putExtra(ONE_TIME, Boolean.TRUE);
        PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
        am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), pi);
    }
} 
```

AndroidManifest.xml 的代码

```
<manifest android:versioncode="1" android:versionname="1.0"
       package="com.rakesh.alarmmanagerexample"
       xmlns:android="http://schemas.android.com/apk/res/android">

   <uses-sdk android:minsdkversion="10" android:targetsdkversion="15"/>
   <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <application android:icon="@drawable/ic_launcher"
       android:label="@string/app_name" android:theme="@style/AppTheme">
        <activity android:label="@string/title_activity_alarm_manager"
           android:name="com.rakesh.alarmmanagerexample.AlarmManagerActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER" />
          </intent-filter>
        </activity>
        <receiver android:name="com.rakesh.alarmmanagerexample.AlarmManagerBroadcastReceiver">
        </receiver>
    </application>
</manifest> 
```

AlarmManagerActivity.java 文件的代码

```
public class AlarmManagerActivity extends Activity {

 private AlarmManagerBroadcastReceiver alarm;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_alarm_manager);
        alarm = new AlarmManagerBroadcastReceiver();
    }

    @Override
 protected void onStart() {
  super.onStart();
 }

    public void startRepeatingTimer(View view) {
     Context context = this.getApplicationContext();
     if(alarm != null){
      alarm.SetAlarm(context);
     }else{
      Toast.makeText(context, "Alarm is null", Toast.LENGTH_SHORT).show();
     }
    }

    public void cancelRepeatingTimer(View view){
     Context context = this.getApplicationContext();
     if(alarm != null){
      alarm.CancelAlarm(context);
     }else{
      Toast.makeText(context, "Alarm is null", Toast.LENGTH_SHORT).show();
     }
    }

    public void onetimeTimer(View view){
     Context context = this.getApplicationContext();
     if(alarm != null){
      alarm.setOnetimeTimer(context);
     }else{
      Toast.makeText(context, "Alarm is null", Toast.LENGTH_SHORT).show();
     }
    }

 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_widget_alarm_manager, menu);
        return true;
    }
} 
```

来自[Github的参考链接](https://github.com/rakeshcusat/Code4Reference/tree/master/AndroidProjects/AlarmManagerExample)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:16:08.427

我认为`Activity`通过传递它来设置周期性事件`Context`并不重要，并且传递哪个上下文似乎并不重要。

pass`context`仅用于获取`PendingIntent`from`PendingIntent.getBroadcast`和 from 查看[4.2.2 的源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/app/PendingIntent.java#PendingIntent.getBroadcast%28android.content.Context,int,android.content.Intent,int%29)：

```
/**
 * Retrieve a PendingIntent that will perform a broadcast, like calling
 * {@link Context#sendBroadcast(Intent) Context.sendBroadcast()}.
 *
 * @param context The Context in which this PendingIntent should perform
 * the broadcast.
 * @param requestCode Private request code for the sender (currently
 * not used).
 * @param intent The Intent to be broadcast.
 * @param flags May be {@link #FLAG_ONE_SHOT}, {@link #FLAG_NO_CREATE},
 * {@link #FLAG_CANCEL_CURRENT}, {@link #FLAG_UPDATE_CURRENT},
 * or any of the flags as supported by
 * {@link Intent#fillIn Intent.fillIn()} to control which unspecified parts
 * of the intent that can be supplied when the actual send happens.
 *
 * @return Returns an existing or new PendingIntent matching the given
 * parameters.  May return null only if {@link #FLAG_NO_CREATE} has been
 * supplied.
 */
public static PendingIntent getBroadcast(Context context, int requestCode,
        Intent intent, int flags) {
    return getBroadcastAsUser(context, requestCode, intent, flags,
            new UserHandle(UserHandle.myUserId()));
}

/**
 * @hide
 * Note that UserHandle.CURRENT will be interpreted at the time the
 * broadcast is sent, not when the pending intent is created.
 */
public static PendingIntent getBroadcastAsUser(Context context, int requestCode,
        Intent intent, int flags, UserHandle userHandle) {
    String packageName = context.getPackageName();
    String resolvedType = intent != null ? intent.resolveTypeIfNeeded(
            context.getContentResolver()) : null;
    try {
        intent.setAllowFds(false);
        IIntentSender target =
            ActivityManagerNative.getDefault().getIntentSender(
                ActivityManager.INTENT_SENDER_BROADCAST, packageName,
                null, null, requestCode, new Intent[] { intent },
                resolvedType != null ? new String[] { resolvedType } : null,
                flags, null, userHandle.getIdentifier());
        return target != null ? new PendingIntent(target) : null;
    } catch (RemoteException e) {
    }
    return null;
} 
```

你可以看到，passed`context`仅用于获取包名和解析类型，并没有存储在`PendingIntent`或任何可能导致一些问题和泄漏的东西中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:24:20.510

你可以：

1.  给出`AlarmManager`一个`PendingIntent`带有 Intent 的特定过滤器`BroadCastReciever`。

2.  在应用程序的清单中声明此接收器以及意图过滤器。

3.  该接收器`onRecieve()`将被调用`AlarmManager`。

不涉及任何服务。

# java - 如何在 Java 正则表达式中拆分此字符串？

> ID：16117716
> 
> 赞同：1
> 
> 时间：2013-04-20T07:08:27.160
> 
> 标签：java, regex, split

这是字符串：

```
String strPro = "(a0(a1)(a2 and so on)...(aN))"; 
```

son-() 中的内容可能是 ""，或者只是 strPro 的值，或者类似该模式，递归地，所以 sub-() 是一个子树。

预期结果：

```
str1 is "a0(a1)"
str2 is "(a2 and so on)"
...
strN is "(aN)" 
```

str1, str2, ..., strN 是数组中的元素

如何拆分字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:14:41.923

您可以使用`substring()`去掉外部括号，然后使用*lookbehind*和*lookahead*（`?<=`和`?=`）拆分它：

```
String strPro = "(a0(a1)(a2 and so on)(aN))";
String[] split = strPro.substring(1, strPro.length() - 1).split("(?<=\\))(?=\\()");
System.out.println(Arrays.toString(split)); 
```

这打印

> [a0(a1), (a2 等), (aN)]

# jquery - 使用 Jquery datepicker 添加选定日期的日期

> ID：16117718
> 
> 赞同：5
> 
> 时间：2013-04-20T07:08:33.150
> 
> 标签：jquery, datepicker, jquery-ui-datepicker

我一直在尝试为另一个日期字段添加一天，并选择当前字段的日期

```
 ,
 onSelect: function(date) {
     var date2 = $('.currDate').datepicker('getDate');
       date2.setDate(date2.getDate()+1); 
       $('.nextDt').datepicker('setDate', date2);
    } 
```

但是我得到了`date2.setDate(date2.getDate()+1);`

```
Message: Object doesn't support this property or method 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T07:12:26.693

这是因为，`currDate`可能是空的。

如果`currDate`是 emtpy`$('.currDate').datepicker('getDate')`将返回`null`，在这种情况下 `date2.setDate(date2.getDate()+1);`可能会抛出错误

更新：

```
$(function() {
    $('#nxtDate').datepicker({
        dateFormat: "dd-M-yy", 
    });
    $("#currDate").datepicker({
        dateFormat: "dd-M-yy", 
        minDate:  0,
        onSelect: function(date){
            var date2 = $('#currDate').datepicker('getDate');
            date2.setDate(date2.getDate()+1);
            $('#nxtDate').datepicker('setDate', date2);
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T07:27:00.540

`setDate`并且`getDate`是 js 支持的函数`Date()`，而您从 datepicker getDate 它返回为字符串，因此您需要对其进行转换或尝试以下代码：

```
onSelect: function(date) {  
     if(date!=undefined){
         var dateObject=new Date(date);
         dateObject.setDate(dateObject.getDate()+1);                                 
         $('.nextDt').datepicker('setDate', dateObject);
      }
    } 
```

这是[警报当前和下一个日期的演示](http://jsfiddle.net/GHKRS/7/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-11-29T08:18:54.757

```
echo date('d-m-Y', strtotime("+".$nod." days")); 
```

nod=天数

# c# - Firebird，c#中的查询，不同值的不同查询，如何构造和简化？

> ID：16117722
> 
> 赞同：0
> 
> 时间：2013-04-20T07:08:49.057
> 
> 标签：c#, firebird

有月份复选框，年份复选框和以下代码（伪代码）：

```
if(month.checked) query = select* from tab where month=month.text;
if(year.checked) query = select* from tab where year=year.text;
if(month.checked and year.checked) query = select * from tab where month=month.value and year=year.value
if(!month.checked and !year.checked) query = select* from tab 
```

如您所见，有 4 个不同的查询。是否可以在一个查询中更快地完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:28:00.860

从技术上讲，您可以对此进行一次查询，但查询会变得更加复杂，这通常会导致查询速度变慢。除非您有令人信服的理由这样做，否则请坚持使用单独的查询。

类似下面的查询可以解决问题：

```
SELECT *
FROM tab
WHERE ? IS NOT NULL AND month = ?
OR ? IS NOT NULL AND year = ?
OR ? IS NULL AND ? IS NULL 
```

这里参数 1 和 5 是检查月份的指示符（NULL 表示不检查，值表示检查），参数 2 是 month.text 的值，参数 3 和 6 是检查年的指示符，参数 4 是年的值。文本。

# iphone - CALayer 蒙版减慢 iPhone 4 的视图转换

> ID：16117723
> 
> 赞同：0
> 
> 时间：2013-04-20T07:08:49.993
> 
> 标签：iphone, ios, objective-c, uikit, core-animation

我使用 CAShapeLayer 蒙版为圆形进度条的绘制设置动画：

```
CGMutablePathRef path = CGPathCreateMutable();
CGPathAddArc(path, Nil, 99.65, 99.25, 84, radians(startAngle), radians(endAngle), 0);

CAShapeLayer *layer = [CAShapeLayer layer];
layer.path = path;
layer.strokeColor = [UIColor redColor].CGColor;
layer.lineWidth = 21;
layer.lineCap = kCALineCapRound;
layer.lineJoin = kCALineJoinRound;
layer.fillColor = [UIColor clearColor].CGColor;

_progressBar.layer.mask = layer;

// Configure animation
CABasicAnimation *drawAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
drawAnimation.duration            = ANIMATION_DURATION;
drawAnimation.repeatCount         = 1.0;
drawAnimation.removedOnCompletion = YES;
drawAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
drawAnimation.toValue   = [NSNumber numberWithFloat:1];
[layer addAnimation:drawAnimation forKey:@"drawCircleAnimation"]; 
```

动画效果很好，圆形进度条从空到满平滑。问题是当我在进度动画完成后从这个视图转换时。当下一个视图滑入时，或者此视图滑入以查看 segue 过渡动画时断断续续。

我已将问题缩小到掩码'_progressBar.layer.mask = layer;'。当我删除它时，过渡再次平滑。

在蒙版或图像层上设置 layer.shouldRasterize = YES 似乎没有帮助。

我不确定如何优化这一点，所以转场过渡很顺利。测试设备为 iPhone 4。

**更新** 在 iPhone 3GS 上测试：更流畅但不完美，绝对优于 4！在 iPhone 5 上测试：当然流畅，这款手机非常快。

iPhone 4 似乎有掩码操作问题如果有人知道解决方法很想听听。

# javascript - 在特定位置将字符串中的数字相乘

> ID：16117724
> 
> 赞同：1
> 
> 时间：2013-04-20T07:08:54.543
> 
> 标签：javascript, arrays, string, numbers

我正在尝试解决第 8 个 Project Euler 问题。

找出 1000 位数字中连续五位数字的最大乘积。

我很确定我已经走了。我还尝试了一个更简单的程序，它使用了一个每次都返回 1 的 while 循环。我提供的代码每次也返回 1。

请不要为我提供解决方案。如果可以的话，给我一个地方看看。这是我的代码：

```
var bigNum = "73167176531330624919225119674426574742355349194934
96983520312774506326239578318016984801869478851843
85861560789112949495459501737958331952853208805511
12540698747158523863050715693290963295227443043557
66896648950445244523161731856403098711121722383113
62229893423380308135336276614282806444486645238749
30358907296290491560440772390713810515859307960866
70172427121883998797908792274921901699720888093776
65727333001053367881220235421809751254540594752243
52584907711670556013604839586446706324415722155397
53697817977846174064955149290862569321978468622482
83972241375657056057490261407972968652414535100474
82166370484403199890008895243450658541227588666881
16427171479924442928230863465674813919123162824586
17866458359124566529476545682848912883142607690042
24219022671055626321111109370544217506941658960408
07198403850962455444362981230987879927244284909188
84580156166097919133875499200524063689912560717606
05886116467109405077541002256983155200055935729725
71636269561882670428252483600823257530420752963450";

var pos1, pos2, pos3, pos4, pos5;

for(var i=1;i<=1000;i+=5) {
   for(var j=0;j<=995;j++) {
       pos1 = bigNum[j];
   }
   for(var k=1;k<=996;k++) {
       pos2 = bigNum[k];
   }
   for(var l=2;l<=997;l++) {
       pos3 = bigNum[l];
   }
   for(var m=3;m<=998;m++) {
       pos4 = bigNum[m];
   }
   for(var n=4;n<=999;n++) {
       pos5 = bigNum[n];
   }
   prod = pos1 * pos2 * pos3 * pos4 * pos5;
   if(prod>sum) {
       sum = prod;
   }
}
console.log(sum); 
```

这是我改进的代码：

```
var prod;
var largest =1;
for(var i=0;i<=995;i++) {
   prod=num[i] * num[i +1] * num[i +2] * num[i +3] * num[i + 4];
   if(prod>largest) {
     largest = prod;
   }
}

console.log(largest); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:22:08.870

想想你的代码中发生了什么。

您进入第一个 for 循环。然后进入第二个。您分配 pos1 = j，然后循环（j 仍然 <= 995）。

其他 4 个循环也是如此。所以每次 prod = 996*997*998*999*1000

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:55:23.973

我不确定没有示例可以说什么，这确实会导致解决方案。

我要做的是遍历字符串，取 5 个字符的切片，拆分这 5 个字符并在必要时将它们转换为数字，找到它们的乘积，检查它是否是迄今为止最大的，如果是则存储，取下一个5、冲洗并重复。

我不知道为什么你有这么多循环，而你只需要 1

```
no code displayed 
```

对于那些希望看到的人来说， [jsfiddle](http://jsfiddle.net/Xotic750/YyuVt/)上有一个解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:31:53.150

您应该尝试一种更系统的方法来解决这个问题，而不是一次性深入研究代码。

首先，看看你是否可以用更小的输入手动解决问题。因此，例如，取原始输入字符串的前 10 位数字：`7316717653`. 现在尝试在纸上解决问题（也许用计算器，呵呵）。它可能会像这样

```
7*3*1*6*7 = 882
3*1*6*7*1 = 126
1*6*7*1*7 = 294
6*7*1*7*6 = 1764
7*1*7*6*5 = 1470
1*7*6*5*3 = 630
1764 
```

下一步是我们如何将其转换为代码。让我们从写下我们上面所做的开始：

```
1) Start from the leftmost point
2) Take the next five numbers
3) Multiply them
4) Store the output
5) Shift to the right once
6) Repeat starting at 2), until there aren't five numbers left to process
7) Look through all of the products (the output of the multiplication)
8) Output the max 
```

现在的挑战是将其转换为代码。由于您不想要解决方案，因此我将其留给您。但是您似乎在循环构造方面遇到了一些问题，所以也许我可以给您一个提示：

```
for(var i=1; i <= 1000; i+=5) {
    // code here
} 
```

那段代码说：

```
1) Take a variable 'i' and set it to 1
2) While 'i' is less than or equal to 1000 execute "code here"
3) Increment 'i' by 5 
```

因此，在问题的上下文中，您可能需要一个循环来跟踪当前最左边的点。它将从 0 开始，每次递增 1，并从末尾停止*五个*插槽，这意味着：

```
...823257530420752963450
                   ^ 
```

那里。

最后，我要补充一点，您按照我的建议生成的代码效率有点低。但是当你浏览代码时，你会发现一些简单的方法可以让它更快，感觉棒极了！希望你能解决它。但是请记住，项目 euler 没有时间限制，并且上述解决方案仍然会运行得非常快（在 javascript 中可能需要几秒钟？在 C 中肯定少于一秒钟）。

# sql - Oracle PLSQL 合并临时表中的记录

> ID：16117725
> 
> 赞同：0
> 
> 时间：2013-04-20T07:09:23.763
> 
> 标签：sql, oracle, plsql

我在 PLSQL 中有一个填充临时表的过程。数据如下所示：

```
BUYER_NAME  QUANTITY   AMOUNT
-------------------------------
JOHN        10         1200
JOHN        12         1310
ALAN        15         1450
ALAN        10         1200
JOHN        20         2400 
```

我需要总结每个买家的数量和金额，然后删除现有数据并再次填写表格，以便每个买家名称仅出现一次总数量和金额。

我知道如果我创建另一个临时表并通过它传输数据，就可以做到这一点。但是，**有没有一种方法可以合并同一个临时表**（以及同一个会话）中的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:16:09.817

It sounds like the problem here is with the initil pl/sql procedure that fills the table. Why not modify it to do this as well? I suspect that the answer would be that it makes much use of pl/sql -- if so, make every effort to convert it to SQL instead, or turn it into a pipelined function that you can select from and aggregate the output of.

That aside, I would just aggregate the result into a different table. I assume that these are global temporary tables, so there is really not much overhead in doing so as a direct path insert to a GTT would be much more efficient than modifying a table already in place.

# java - Android：InputStream.read() 及其“-1”返回有多可靠？

> ID：16117727
> 
> 赞同：1
> 
> 时间：2013-04-20T07:09:37.810
> 
> 标签：java, android

我的问题与**InputStream.read()**方法有关- 套接字编程。

我发现的每个来源都指出，当服务器或客户端关闭连接时，会返回“-1”。

但是，“如果”，只是说，“如果”连接*关闭*但**read()**不返回“-1”？我们依赖别人的代码。我担心的原因是因为为了读取远程端的输入，必须创建一个无限循环，而我一直被认为远离无限循环。然而，对于 Java，我似乎别无选择！这是一个示例：

```
int b = 0;
    while (true)
    {
      b = inputStream.read()
      if (b == -1) break; // connection closed
    } 
```

或者

```
 while (b > -1)
 b = inputStream.read() 
```

*如果*发生了什么事，而 -1 永远不会变成真的怎么办？最终会陷入无限循环，增加某人设备的温度并浪费 CPU 周期！怎么可能确定？

参考文献：[http://developer.android.com/reference/java/io/InputStream.html#read%28%29][1] 和 [http://docs.oracle.com/javase/6/docs/ api/java/io/InputStream.html#read%28byte[],%20int,%20int%29][2]

我想进行故障安全检查。我在循环中所做的也是检查套接字是否变为空，如果是，则中断循环。

```
 while (b > -1)
    {
      b = inputStream.read()

      if (socket == null) break;
      if (outputStream == null) break;
    } 
```

如果“-1”永远不会变为真，我还能做些什么来确保循环存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:19:48.727

> 最终会陷入无限循环，增加某人设备的温度并浪费 CPU 周期！

这不是真的，我认为你问这个问题的主要原因。`read()`如果没有要读取的内容，则**不会**忙于等待（即不断地请求 CPU）。因此，在实践中，如果不返回 -1 就不会有大问题。

`read()``IOException`如果阅读出现问题（例如，如果`InputStream`关闭） ，也会抛出一个。确保在 try-block 中有循环并检查 -1 足以确保它退出循环，如下所示：

```
try {
    int b;
    while ((b=inputStream.read() > -1)
    {
       //Do something
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:57:58.450

> what if”，只是说，“what if” 连接关闭但 read() 不返回“-1

没有这样的条件。这在术语上是矛盾的。

> 如果发生了什么事，而 -1 永远不会变成真的怎么办？

它不能。

> 最终会陷入无限循环，增加某人设备的温度并浪费 CPU 周期！

不真实。如果这种不可能的情况发生，read() 将无限期地阻塞而不消耗任何 CPU。

> 怎么可能确定？

你可以相信规范，而不是问自相矛盾的问题。

NB 在您尝试读取并且没有异常或 EOS无效*之后*测试套接字或输入流是否为空。

# c - C 程序未编译

> ID：16117729
> 
> 赞同：-3
> 
> 时间：2013-04-20T07:09:51.480
> 
> 标签：c

我需要找到最大的数字（双数）。我的程序有什么问题？它没有编译。

```
#include<stdio.h>
#include<stdlib.h>

void dobig(double *parr[5],int *len,double *big);

void main()
{
    double *big;
    double arr[5]={1.00,2.321,3.54337,4.333333,5.5555555};
    double *parr=&arr[5];
    int size=sizeof(arr)/sizeof(int);
    int *len=&size;
    dobig(parr,len,big);
    printf("the largest number is %p/n",*big);
    system("pause");
}

void dobig(double *parr,int *len,double *big)
{
    int i;
    double pbig=*parr;
    for(i=0;i>*len;i++)
    {
        if(pbig<*(parr+i))
        {
            pbig=*(parr+i);
        }
        *big=pbig;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:12:19.833

这里有一个问题：

```
double *parr=&arr[5]; 
```

`arr`只有5个元素。所以有效的索引范围是 0 - 4。

我在代码中评论了这些问题：

```
#include<stdio.h>
#include<stdlib.h>

void dobig(double *parr,int *len,double *big); // Prototype didn't match. You want to 
       // pass a pointer, not an array of pointers.

    int main(int argc, char *argv[]) // Standard way to write main()
    {
    double big;
    double arr[5]={1.00,2.321,6.54337,4.333333,5.5555555};

    double *parr=&arr[0]; // If you want to loop through the array 
           //in dobig(), you have to pass the pointer to the first element or 
           //char   *parr=arr; is also fine.

    int size=sizeof(arr)/sizeof(double); // You want to know how many double's 
                  // are there in the array. So use sizeof(double)
    int *len=&size;
    dobig(parr,len,&big);
    printf("the largest number is %f\n",big); // To print a double, 
                                   //use %f. %p is for pointer.
    }

    void dobig(double *parr,int *len,double *big)
    {
    int i;
    double pbig=*parr;
    for(i=0;i<*len;i++)  // Here it doesn't enter the
                // loop at all due to incorrect condition.
    {
        if(pbig<*(parr+i))
        {
           pbig=*(parr+i);
        }
    }
    *big=pbig;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:15:00.703

改变

```
void dobig(double *parr[5],int *len,double *big); 
```

进入

```
void dobig(double *parr, int *len, double *big); 
```

注意：我建议不要使用`void main`但是`int main`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T07:23:51.647

U 正在传递一个数组，因此您需要在 dobig 函数中使用双指针

这是您的代码，并进行了必要的更正。

```
 #include<stdio.h>
  #include<stdlib.h>

void dobig(double *parr[5],int *len,double *big);

int  main()
{
double *big;
double arr[5]={1.00,2.321,3.54337,4.333333,5.5555555};
double **parr=&arr[5];
int size=sizeof(arr)/sizeof(int);
int *len=&size;
dobig(parr,len,big);
printf("the largest number is %p/n",*big);
system("pause");
}

void dobig(double **parr,int *len,double *big)
{
int i;
double pbig=**parr;
for(i=0;i>*len;i++)
{
if(pbig<**(parr+i))
{
   pbig=**(parr+i);
}
*big=pbig;
}
} 
```

# shell - 案例陈述不起作用

> ID：16117741
> 
> 赞同：1
> 
> 时间：2013-04-20T07:11:48.167
> 
> 标签：shell, case

它是我程序的一部分，

```
output="$(./t1)"        // output=5

echo $output            // It displays 5

if test $output -eq 5
then
echo "five"             // this if statement works and displays 'five'
fi

case $output in          **// this case is not working and giving just default value**

1) echo "one" ;;

2) echo "two" ;;

3) echo "three" ;;

4) echo "four";;

5) echo "five";;

*) echo "wrong choice" ;;

esac                    // output is wrong choice though it works proper in if statement 
```

我的 bash 脚本有什么错误吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:17:35.310

This works for me:

```
output=$(./t1)
echo $output
if test $output -eq 5; then echo "five"; fi
case $output in
  1) echo "one" ;;
  2) echo "two" ;;
  3) echo "three" ;;
  4) echo "four";;
  5) echo "five";;
  *) echo "wrong choice" ;;
esac 
```

When you had the `"` around `$(./t1)` the result was a string, not a numeric value. This worked with `test`, but not `case`. Also you has a couple of missing `;` in the post and `//` is not valid for comments in bash.

# elasticsearch - 带有elasticsearch的Django haystack，索引问题

> ID：16117742
> 
> 赞同：7
> 
> 时间：2013-04-20T07:12:04.010
> 
> 标签：elasticsearch, django-haystack

我将 django-haystack 与 elasticsearch 一起使用，但索引存在问题。重建我的索引时

```
python manage.py rebuild_index
```

引发以下错误：

```
回溯（最近一次通话最后）：
  文件“/home/palo/.virtualenvs/toro/local/lib/python2.7/site-packages/haystack/management/commands/update_index.py”，第 210 行，在 handle_label
    self.update_backend（标签，使用）
  文件“/home/palo/.virtualenvs/toro/local/lib/python2.7/site-packages/haystack/management/commands/update_index.py”，第 256 行，在 update_backend
    do_update（后端，索引，qs，开始，结束，总计，self.verbosity）
  文件“/home/palo/.virtualenvs/toro/local/lib/python2.7/site-packages/haystack/management/commands/update_index.py”，第 78 行，在 do_update
    后端.更新（索引，current_qs）
  文件“/home/palo/.virtualenvs/toro/local/lib/python2.7/site-packages/haystack/backends/elasticsearch_backend.py”，第 177 行，更新中
    self.conn.bulk_index(self.index_name, 'modelresult', prepped_docs, id_field=ID)
  文件“/home/palo/.virtualenvs/toro/src/pyelasticsearch/pyelasticsearch/client.py”，第 95 行，在装饰中
    返回函数（*args，query_params=query_params，**kwargs）
  文件“/home/palo/.virtualenvs/toro/src/pyelasticsearch/pyelasticsearch/client.py”，第 366 行，在 bulk_index
    查询参数=查询参数）
  文件“/home/palo/.virtualenvs/toro/src/pyelasticsearch/pyelasticsearch/client.py”，第 221 行，在 send_request
    **({'data': request_body} if body else {}))
  文件“/home/palo/.virtualenvs/toro/src/requests/requests/sessions.py”，第 387 行，在帖子中
    return self.request('POST', url, data=data, **kwargs)
  文件“/home/palo/.virtualenvs/toro/src/requests/requests/sessions.py”，第 345 行，在请求中
    resp = self.send(prep, **send_kwargs)
  发送中的文件“/home/palo/.virtualenvs/toro/src/requests/requests/sessions.py”，第 448 行
    r = adapter.send(request, **kwargs)
  文件“/home/palo/.virtualenvs/toro/src/requests/requests/adapters.py”，第 324 行，在发送中
    提高超时（e）
超时：HTTPConnectionPool(host='127.0.0.1', port=9200)：请求超时。（超时=10）
超时：HTTPConnectionPool(host='127.0.0.1', port=9200)：请求超时。（超时=10）

```

我使用了 django-haystack - 2.0.0-beta，pyelasticsearch - 0.5，elasticsearch 0.20.6，java 版本“1.6.0_24”

**干草堆设置**

```
    HAYSTACK_CONNECTIONS = {
        '默认'： {
            '引擎': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine',
            '网址': 'http://127.0.0.1:9200/',
            'INDEX_NAME': '干草堆',
        },
    }

```

而且我确定我的弹性搜索服务正在运行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-23T10:37:00.013

这并不一定意味着您的 es 服务器已关闭，尤其是当您通过`curl -I "127.0.0.1:9200"`. 更有可能的是，鉴于所涉及的连接速度，您的请求根本没有得到足够的时间。

有趣的是，pyelasticsearch 中设置的默认超时时间是 60 秒，`def __init__(self, urls, timeout=60, max_retries=0, revival_delay=300):`参见[https://github.com/rhec/pyelasticsearch/blob/master/pyelasticsearch/client.py](https://github.com/rhec/pyelasticsearch/blob/master/pyelasticsearch/client.py)。[但是，根据https://github.com/toastdriven/django-haystack/blob/master/haystack/backends/__init__.py](https://github.com/toastdriven/django-haystack/blob/master/haystack/backends/__init__.py)`self.timeout = connection_options.get('TIMEOUT', 10)`中的规定，haystack 会使用其默认设置（即 10 秒）覆盖它。

正如您所看到的，haystack 允许您通过添加`'TIMEOUT': 60,`到引擎配置来轻松修改设置。

并解决了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T10:13:38.227

我也有类似的问题

须藤服务弹性搜索重启

然后它起作用了

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-24T17:12:35.940

你在跑步吗

```
bin/elasticsearch -f 
```

我认为您没有运行搜索引擎。

# php - PHP 中的谷歌分析

> ID：16117749
> 
> 赞同：-2
> 
> 时间：2013-04-20T07:12:40.683
> 
> 标签：php, google-analytics

我有一个显示电影时间的网站。`(e.g. movieTime.php?movieID=1)`

我想跟踪两件事。

1.  访问了多少次movieTime.php
2.  访问了多少次 movieID=1（movieID=2、movieID=3 等也是如此）

我该怎么做？

我之前做了以下`</head>`但没有得到结果。

```
<!-- Google Analytics Tracking -->
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
            _gaq.push(['_setCustomVar', 1, 'MovieID', <?php echo $movieID; ?>, 1]);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script> 
```

我还更改了我的 accountID 属性，所以这不是问题。:|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:48:25.497

由于这条线，您没有得到结果：

```
 _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']); 
```

UA-XXXXXXXX-X 需要替换为属性 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:55:42.397

您不需要推送自定义变量。如果您没有明确过滤掉 movieID 参数，那么现有设置将正常工作，并且不同的 URI 将显示在您的内容部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:14:58.773

不知道您为什么要为此使用 Google Analytics。只需使用 INSERT 查询来跟踪页面（和特定 ID）被访问的次数。

# javascript - 使用 Ajax 方法检索数据时显示加载

> ID：16117754
> 
> 赞同：1
> 
> 时间：2013-04-20T07:13:06.723
> 
> 标签：javascript, jquery, ajax, post

我正在使用ajax，有时从我的数据库中加载所有数据需要时间，因此我需要找到一种方法来显示（正在加载...），而数据尚未完成。下面是我的示例代码，我正在寻找数据仍在处理中的一些事件。

```
$.ajax({
   type: "POST",
   url: "some.php",
   data: "name=John&location=Boston",
   success: function(data){
     $('#para').html(data);
   }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:17:59.377

It is very simple..

before you call the ajax start your loading image..& after the success hide the image for eg :

```
$.fancybox.showLoading();
$.ajax({
   type: "POST",
   url: "some.php",
   data: "name=John&location=Boston",
   success: function(data){
     $.fancybox.hideLoading();
     $('#para').html(data);
   }
}); 
```

here

> $.fancybox.showLoading()

is my function in which I have the property of displaying the loader,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:18:44.767

This will be **internally called** whenever an ajax call is made.

```
$.ajaxStart(function() {
    $("img#loading").show();
});

$.ajaxComplete(function() {
    $("img#loading").hide();
}); 
```

**HTML**

```
<img src="../images/loading.gif" alt="wait" id="loading"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:21:58.287

```
<div id="loading">LOADING...</div>

var loading = $("#loading");

loading.hide();

function doAjax() {
    loading.show();
    $.ajax({
        url: "/js/beautifier.js",
        success: function (data) {
            loading.hide();
        }
    });
}

doAjax(); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/c6WGX/)

# java - 在正则表达式中获取非法字符范围：java

> ID：16117762
> 
> 赞同：2
> 
> 时间：2013-04-20T07:13:45.063
> 
> 标签：java, regex, escaping, string-matching

我有一个简单的正则表达式模式来验证名称。但是当我运行它时，我得到非法字符范围错误。我认为通过转义“\s”可以留出一个空格，但编译器仍在抱怨。

```
public boolean verifyName(String name) {
    String namePattern = "^[\\p{L}]++(?:[',-\\s][\\p{L}]++)*+\\.?$";
    return name.matches(namePattern);
} 
```

这是我认为不应该发生的错误，因为名称可能包含这些`[',-\\s]`

所以我哪里不明白？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T07:15:22.173

你不能有一个“从`,`到空白”的范围。也许你的意思是逃跑`-`？

`\s`不是空格，而是`[ \t\r\n\v\f]`（空格、制表符、回车符、换行符、垂直制表符或换页）。

可行的事情：

```
"[ ',-]"

"[',\\- ]" 
```

# lightbox - 在 Kirby CMS 上为博客文章创建灯箱

> ID：16117765
> 
> 赞同：0
> 
> 时间：2013-04-20T07:14:02.440
> 
> 标签：lightbox, kirby

我有一个关于[Kirby CMS的](http://getkirby.com)[博客](http://philgr.com)。我在博客文章中附加了图片，img 的样式包含 max-width: 100%，每张图片都有一个指向自身的 URL……我想将这些链接作为灯箱而不是页面打开。问题是我不能在这些情况下使用 PHP，因为它不是静态页面，我相信我只有 CSS、HTML 和 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:35:22.517

[Lightbox](http://lokeshdhakar.com/projects/lightbox2/)利用 CSS 和 JavaScript 在模式窗口中显示图像。您只需要在模板中使用 jQuery 加载 Lightbox JavaScript 和 CSS 文件，然后将属性添加`rel="lightbox"`到您的图像即可使其正常工作。

为什么这对你不起作用？

# android - 视频不会上传到 facebook wall android

> ID：16117768
> 
> 赞同：1
> 
> 时间：2013-04-20T07:14:19.560
> 
> 标签：android, facebook, android-facebook

我正在使用以下代码上传视频

```
Request.Callback callback5 = new Request.Callback() {
    public void onCompleted(Response response) {    
    // response will have an id if successful
    Log.e("HackBook", "Response = "+response);
    }
};
File tempFile;
try {
    tempFile = createTempFileFromAsset(getApplicationContext(), "video.mp4");
    Request request5 = Request.newUploadVideoRequest(Session.getActiveSession(),
            tempFile, callback5);
    RequestAsyncTask task5 = new RequestAsyncTask(request5);
    task5.execute();
} catch (IOException e) {
    Log.e("HackBook", "failed to create temp file");
    e.printStackTrace();
}

public static File createTempFileFromAsset(Context context, String assetPath) 
        throws IOException {
    InputStream inputStream = null;
    FileOutputStream outStream = null;

    try {
    AssetManager assets = context.getResources().getAssets();
    inputStream = assets.open(assetPath);

    File outputDir = context.getCacheDir(); // context being the
                        // Activity pointer
    File outputFile = File.createTempFile("prefix", assetPath,
        outputDir);
    outStream = new FileOutputStream(outputFile);

    final int bufferSize = 1024 * 2;
    byte[] buffer = new byte[bufferSize];
    int n = 0;
    while ((n = inputStream.read(buffer)) != -1) {
        outStream.write(buffer, 0, n);
    }

    return outputFile;
    } finally {
    com.facebook.internal.Utility.closeQuietly(outStream);
    com.facebook.internal.Utility.closeQuietly(inputStream);
    }
} 
```

它返回以下错误消息

```
 {Response:  responseCode: 400, graphObject: null, error: {HttpStatus:
 400, errorCode: 2500, errorType: OAuthException, errorMessage: An
 active access token must be used to query information about the
 current user.}, isFromCache:false} 
```

你能指导我怎么了吗？

# jquery - 带有ajax调用和html()的jquery计时

> ID：16117776
> 
> 赞同：0
> 
> 时间：2013-04-20T07:15:05.820
> 
> 标签：jquery

我在 ajax 调用中通过 perl 将列表加载到 div 中。加载列表后，我将触发对第一行的点击：

```
success: function(data) {
  $('#newsList').html(data);
  $("#newsList .EDITrow").first().trigger('click');
}, 
```

但问题是时间......在上面的代码中没有任何反应。

html() 是一个同步操作，所以我猜它没有及时加载触发器来完成它的工作。

为了测试这一点，我将触发线包裹在 1000 的 setTimeout 中，它运行良好。即第一行被点击，与点击相关的一切都正常工作。

由于 html() 没有回调，所以正确的方法是什么……显然超时当然不是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:53:50.200

尝试使用`$("#newsList .EDITrow").delay(1000).first().trigger('click');`

# php - Composer 检查本地存储库，而不是像 Maven 这样的在线存储库

> ID：16117788
> 
> 赞同：1
> 
> 时间：2013-04-20T07:16:10.710
> 
> 标签：php, composer-php

如何让 composer [http://getcomposer.org](http://getcomposer.org)在 java 中像 maven 一样工作。它可以从本地存储库获取，而不是在线获取存储库。所以，我们不必再次下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T09:50:53.303

我不知道 Maven，但我想到作曲家世界中至少有两个选择：

**访问本地 git 存储库**

假设您想使用braincrafted 引导包的本地git 存储库。将以下条目添加到您的 composer.json：

```
"repositories": [
    {
        "type": "vcs",
        "url": "/home/user/braincrafted/bootstrap-bundle"
    }
]
"require":{
     "braincrafted/bootstrap-bundle":"dev-master"
} 
```

**萨蒂斯**

另一种选择是 Satis - 让你拥有你的私人 packagist.com 它在[文档中进行了解释](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md)

本次演讲值得观看以了解更多关于 Composer、SAtis 等的信息：[https ://www.youtube.com/watch?v=P3NwF8RV1lY](https://www.youtube.com/watch?v=P3NwF8RV1lY)

# php - 如何禁用文件上传器？

> ID：16117791
> 
> 赞同：0
> 
> 时间：2013-04-20T07:16:44.357
> 
> 标签：php, file-upload

我想做类似的事情，当用户上传文件时，我想让该文件上传器禁用。换句话说，一旦文件被上传，用户将不允许上传另一个文件。

我努力了

```
<script type="text/javascript">
document.getElementById(file1).disabled = true;
</script>

<input type="file" name="submission_file" id="file1"> 
```

但它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:20:14.770

您没有在 id 上放置单个 qoutes

```
document.getElementById('file1').disabled = true; 
```

详细解答

```
<script>
function diableField()
{
    document.getElementById('file1').disabled = true;
}
window.onload=diableField;

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:19:46.683

您没有正确引用元素 ID。尝试这个：

```
document.getElementById('file1').disabled = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:19:59.040

尝试这个-

```
<script type="text/javascript">
function disableThis(){
document.getElementById("file1").disabled = true;
}
</script>

<input type="file" name="submission_file" id="file1" onchange="disableThis()"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T07:47:37.910

请使用此代码，我也遇到过此类问题，此代码对我有用。希望它也对你有用..

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>File Upload</title>
</head>
<body>
<script type="text/javascript">

function disableFileUpload(){

document.getElementById("file1").disabled = true;

}
</script>
<input type="file" name="submission_file" id="file1" onchange="disableFileUpload()">
</body>
</html> 
```

谢谢...

# javascript - Checking if window size has changes and performance/optimalization

> ID：16117792
> 
> 赞同：0
> 
> 时间：2013-04-20T07:16:48.793
> 
> 标签：javascript, jquery, performance, optimization, plugins

today I'm implementing slider plugin and I have one question about it:

I want to make it responsive, but to achive that (depending on my current implementation) I should add another function which will detect if browser window size has changed - and here's my question - is it good for overall performance? Or maybe I should re-think about my solution and try to build it with pure css?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:28:42.127

浏览器调整大小只是暂时的，就我个人而言，我认为在那个阶段出现轻微的小问题并不会有很大的麻烦。

由于您引用 jquery，您可以添加

```
$(window).resize(function() { ... }); 
```

在准备好文档的情况下添加它，您可以在加载时调用它。做就是了

```
$(window).resize(); 
```

就性能而言，您是正确的，每个小插件都会对性能产生影响，但前提是它处于活动状态。当窗口未调整大小时，不会触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:35:06.090

`<div id="resized"></div>`

```
function display() {
    var p = document.createElement("p");

    p.textContent = "resize event";
    document.getElementById("resized").appendChild(p);
}

$(window).on("resize", display); 
```

或使用 javascript

```
function display() {
    var p = document.createElement("p");

    p.textContent = "resize event";
    document.getElementById("resized").appendChild(p);
}

window.addEventListener("resize", display, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/Q8zN6/)

# python - 如何去除干扰 Beautiful Soup 返回带有指定文本的链接的字符？

> ID：16117798
> 
> 赞同：0
> 
> 时间：2013-04-20T07:17:47.860
> 
> 标签：python, python-2.7, beautifulsoup, strip

我正在尝试用[Beautiful Soup](https://en.wikipedia.org/wiki/Beautiful_Soup)做两件事：

1.  查找并打印特定类的 div
2.  查找并打印包含特定文本的链接

第一部分正在工作。第二部分是返回一个空列表，即`[]`. 在尝试解决此问题时，我创建了以下按预期工作的内容：

```
from bs4 import BeautifulSoup

def my_funct():
    content = "<div class=\"class1 class2\">some text</div> \
        <a href='#' title='Text blah5454' onclick='blahblahblah'>Text blah5454</a>"
    soup = BeautifulSoup(content)
    thing1 = soup("div", "class1 class2")
    thing2 = soup("a", text="Text")
    print thing1
    print thing2

my_funct() 
```

在[SciTE](http://en.wikipedia.org/wiki/SciTE)编辑器中查看原始内容（我的实际实现）的来源之后。但是，一个区别是在链接文本之间和之间的新行上有一个`LF`和四个，例如：`->``Text``blah5454`

![在此处输入图像描述](https://i.stack.imgur.com/zqkdP.png)

因此，我认为这就是我变得空虚的原因`[]`。

我的问题是：

1.  这是可能的原因吗？
2.  如果是这样，“剥离”这些字符的最佳解决方案是什么？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:59:47.430

该`text`参数仅匹配*整个*文本内容。您需要改用正则表达式：

```
import re

thing2 = soup("a", text=re.compile(r"\bText\b")) 
```

`\b`单词边界锚确保您只匹配整个单词，而不是部分单词。请注意`r''`这里使用的原始字符串文字，当解释为普通字符串时`\b`意味着*不同的东西；*如果您在这里不使用原始字符串文字，则必须将反斜杠加倍。

演示：

```
>>> from bs4 import BeautifulSoup
>>> content = "<div class=\"class1 class2\">some text</div> \
...         <a href='#' title='wooh!' onclick='blahblahblah'>Text blah5454</a>"
>>> soup = BeautifulSoup(content)
>>> soup("a", text='Text')
[]
>>> soup("a", text=re.compile(r"\bText\b"))
[<a href="#" onclick="blahblahblah" title="wooh!">Text blah5454</a>] 
```

# asp.net - How to generate a print preview in a single button click in report viewer?

> ID：16117804
> 
> 赞同：0
> 
> 时间：2013-04-20T07:18:12.200
> 
> 标签：asp.net, ajaxcontroltoolkit, reportviewer

This is my aspx page..................

```
 <asp:Panel ID="UpdatePanel1" runat="server" Visible="false" >   
           <rsweb:ReportViewer ID="ReportingForPrintingReportViewer" runat="server"
           Width="100%" Height="100%" Font-Names="Verdana" Font-Size="8pt"
           InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana"
           WaitMessageFont-Size="14pt">  
           <LocalReport ReportPath="Report.rdlc">
           <DataSources>
           <rsweb:ReportDataSource DataSourceId="ObjectDataSource2" Name="DataSet1" />
           </DataSources>
           </LocalReport>
           </rsweb:ReportViewer>  
           <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" 
             SelectMethod="GetData" TypeName="DataSet1TableAdapters.tblTotalFeeTableAdapter">
           </asp:ObjectDataSource>
                 </asp:Panel>
<asp:Button ID="btnSubmit" runat="server" Text="Submit" Width="150px"
           onclick="btnSubmit_Click" />
       <asp:Button ID="btnReset" runat="server" Text="Reset" Width="150px" />
       <asp:Button ID="btnCreateBill" runat="server" Text="CreateBill" Width="150px" 
           onclick="btnCreateBill_Click"/>

       <asp:PopupControlExtender ID="btnCreateBill_PopupControlExtender" OffsetX="-1100" OffsetY="115" 
           runat="server" DynamicServicePath="" Enabled="True" ExtenderControlID="" 
           TargetControlID="btnCreateBill" PopupControlID="UpdatePanel1">
       </asp:PopupControlExtender> 
```

This is my cs page

```
 protected void btnCreateBill_Click(object sender, EventArgs e)
    {
        DisplayReport();
        UpdatePanel1.Visible = true;

    }
    private DataTable TotalInfoData()
    {
        try
        {
            //DataClassesDataContext db = null;
            //db = new DataClassesDataContext();
            //var s = from p in db.tblTotalFeess
            //        where p.Class == ClassDropDownList.SelectedItem.Value && p.StudentID == Convert.ToInt32(StudentNameDropDownList.SelectedValue)
            //        select p;

            //DataTable dt = new DataTable();
            //SQLHelper sqhlpr = new SQLHelper();
            //sqhlpr.SqlText = "select * from tblTotalFee where Class='" + ClassDropDownList.SelectedItem.Value + "'" + "and StudentID='" + StudentNameDropDownList.SelectedValue + "'";
            //DataTable dt = sqhlpr.getDataTable(false);
            //return dt;
            try
            {
                // Open Sql Connection  
                SqlConnection SqlCon = new SqlConnection(@"Data Source=PRATIKPC;Initial Catalog=dbbilling2.0;Integrated Security=True");
                SqlCon.Open();

                // Create a Command  
                SqlCommand SqlComm = new SqlCommand();
                SqlComm.Connection = SqlCon;
                SqlComm.CommandType = CommandType.Text;
                SqlComm.CommandText = "select * from tblTotalFee where Class='" + ClassDropDownList.SelectedItem.Value + "'" + "and StudentID='" + StudentNameDropDownList.SelectedValue + "'";

                // Create instance of Northwind DataSetXSD  
                DataSet1.tblTotalFeeDataTable dtbl = new DataSet1.tblTotalFeeDataTable();

                // Set a Data Commands  
                SqlDataAdapter SqlDa = new SqlDataAdapter(SqlComm);
                SqlDa.Fill(dtbl); // Fill Data in NorthwindDataSet Object.  

                return dtbl;

            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }  

        } 

        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
    }
    private void DisplayReport()
    {
        try
        {
            // Clear the Data Source   
            ReportingForPrintingReportViewer.LocalReport.DataSources.Clear();

            // Set a DataSource to the report  

            // First Parameter - Report DataSet Name  
            // Second Parameter - DataSource Object i.e DataTable  
            ReportingForPrintingReportViewer.LocalReport.DataSources.Add(new ReportDataSource("DataSet1", TotalInfoData()));

            // OR Set Report Path  
            ReportingForPrintingReportViewer.LocalReport.ReportPath = HttpContext.Current.Server.MapPath("~/Report.rdlc");

            // Refresh and Display Report  
            ReportingForPrintingReportViewer.LocalReport.Refresh();

        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
    } 
```

I have to click btnCreateBill twice to generate report viewer. Why? And how can I generate report viewer in a single click of a button?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:34:37.880

这是.aspx文件............

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"
    CodeBehind="AccountReportParameter.aspx.cs" Inherits="TexERP.ReportSSRS.AccountReportParameter" %>

<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">  <asp:UpdatePanel ID="updpnlLiteral" runat="server">
        <ContentTemplate>
            <asp:Panel ID="pnlAddRecord" runat="server" BackColor="White" Height="150px" Width="600px"
                Visible="true">
<td align="right" colspan="4">
                            <asp:Button ID="btnSubmit" runat="server" Text="Show Report" OnClick="btnSubmit_Click"
                                ValidationGroup="FinalSave" />
                            <asp:Button ID="btnCancel" runat="server" Text="Reset" UseSubmitBehavior="false"
                                OnClick="btnCancel_Click" />
            </asp:Panel>
            <rsweb:ReportViewer ID="rptvwMain" runat="server" Width="907px" Height="850px" Font-Names="Verdana"
                Font-Size="8pt" ProcessingMode="Remote" ShowCredentialPrompts="false" InteractiveDeviceInfos="(Collection)"
                ShowZoomControl="true">
            </rsweb:ReportViewer>
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Content> 
```

这是cs文件…………

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Net;
using BusinessAccessLevel;
using BusinessAccessLevel.Masters;
using Microsoft.Reporting.WebForms;

namespace TexERP.ReportCrystal
{
    public partial class AccountReportParameter : System.Web.UI.Page
    {       
        AccountReportBAL objAccountReportBAL;
        clsSession objSession;
        string pstrType;
        protected void Page_Load(object sender, EventArgs e)
        {
            objAccountReportBAL = new AccountReportBAL();
            objSession = new clsSession();

            pstrType = Request.QueryString["Type"];
            if (Session["objSession"] != null)
            {
                objSession = Session["objSession"] as clsSession;               
            }
            objAccountReportBAL = new AccountReportBAL();

            if (!IsPostBack)
            {

                RadDtpFromDate.SelectedDate = Convert.ToDateTime(objSession.FyFromDate);
                RadDtpToDate.SelectedDate = Convert.ToDateTime(objSession.FyToDate);

            }
            rptvwMain.LocalReport.Refresh();
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            string pstrType;
            pstrType = Request.QueryString["Type"];           
            LoadReport();
        }

        public class CustomReportCredentials : Microsoft.Reporting.WebForms.IReportServerCredentials
        {
            // local variable for network credential.
            private string _UserName;
            private string _PassWord;
            private string _DomainName;
            public CustomReportCredentials(string UserName, string PassWord, string DomainName)
            {
                _UserName = UserName;
                _PassWord = PassWord;
                _DomainName = DomainName;
            }
            public System.Security.Principal.WindowsIdentity ImpersonationUser
            {
                get
                {
                    return null;  // not use ImpersonationUser
                }
            }
            public System.Net.ICredentials NetworkCredentials
            {
                get
                {
                    // use NetworkCredentials
                    return new NetworkCredential(_UserName, _PassWord, _DomainName);
                }
            }
            public bool GetFormsCredentials(out Cookie authCookie, out string user, out string password, out string authority)
            {
                // not use FormsCredentials unless you have implements a custom autentication.
                authCookie = null;
                user = password = authority = null;
                return false;
            }
        }

        void LoadReport()
        {
            string strCompanyName = objSession.SelCompanyName;
            string strHeading = "";
            string strBranchName = objSession.SelBranchName;
            rptvwMain.ProcessingMode = ProcessingMode.Remote;
            rptvwMain.ServerReport.ReportServerCredentials = new CustomReportCredentials(AppConfig.ReportServerUserName, AppConfig.ReportServerPassword, AppConfig.ReportServerDomain);
            string strReportServerUrl = AppConfig.ReportServerUrl + AppConfig.ReportServerFolder;
            rptvwMain.ServerReport.ReportServerUrl = new Uri(strReportServerUrl);
            List<ReportParameter> parameters = new List<ReportParameter>();
            if(pstrType == "GL")
            {
                strHeading = "General Ledger";
                rptvwMain.ServerReport.ReportPath = "/Account/AccountGeneralLedger";
            }

            parameters.Add(new ReportParameter("FyId", Convert.ToInt16(objSession.FyId).ToString()));
            parameters.Add(new ReportParameter("AccountGroupId", cmbAccountGroup.SelectedValue));
            parameters.Add(new ReportParameter("LedgerId", cmbLedgerId.SelectedValue));
            parameters.Add(new ReportParameter("BranchId", Convert.ToInt64(objSession.BranchId).ToString()));
            parameters.Add(new ReportParameter("StDate", Convert.ToDateTime(RadDtpFromDate.SelectedDate).ToString()));
            parameters.Add(new ReportParameter("EnDate", Convert.ToDateTime(RadDtpToDate.SelectedDate).ToString()));
            parameters.Add(new ReportParameter("CompanyName", strCompanyName.ToString()));
            parameters.Add(new ReportParameter("BranchName", strBranchName.ToString()));
            parameters.Add(new ReportParameter("Heading",strHeading.ToString()));
            rptvwMain.ServerReport.SetParameters(parameters);

            rptvwMain.ServerReport.SetDataSourceCredentials(new[] { new DataSourceCredentials() { Name =AppConfig.ReportServerDataSource , UserId = AppConfig.ReportServerDSUserName, Password = AppConfig.ReportServerDSPassword } });
            rptvwMain.ShowZoomControl = true;
            rptvwMain.ServerReport.Refresh();
        }
    }
} 
```

试试这个代码作为参考代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:35:12.700

您是否在 !ispostback 内部调用 Get Data 方法（您的数据源加载方法）？

看看这个

```
protected void Page_Load(object sender, EventArgs e)
{    
    if (!Page.IsPostBack)
        {   
             GetData()// Your Data Source load method
        }
} 
```

# c - Why do I get a different value of "a". To get the same value what needs to be done?

> ID：16117816
> 
> 赞同：-3
> 
> 时间：2013-04-20T07:20:16.587
> 
> 标签：c

```
#include<stdio.h>
void func(int x[]);
main()
{
    int a[]={1,2,3,4};
    printf("size of %d \n",sizeof(a));  // Some value I'm getting
    func(a);
}
void func(int a[]) 
{
    printf("size of %d",sizeof(a));  // Value is changing
} 
```

Both times, the value of 'a' is not printing the same. To get the same value by maintaining this code, what more code need to be added or any changes required?

I don't want to change the signature of any function. Without changing the signature, what extra code is needed to be added inside `func(int a[])`?.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T07:24:07.567

数组函数参数衰减为指针，这意味着参数`func`的类型为`int*`。因此，您只能`sizeof(int*)`在里面计算`func`。

如果要传递数组大小，可以将其作为单独的参数传递

```
func(a, sizeof(a)/sizeof(a[0]));
....
void func(int* a, int num_elems); 
```

或初始化`a`以包含一个标记数组结束的标记值并遍历元素，直到在`func`.

# php - Authentication Required error while sending email using PHP

> ID：16117817
> 
> 赞同：0
> 
> 时间：2013-04-20T07:20:21.323
> 
> 标签：php

I am trying to send email using following PHP code.But I get the following error:

Warning: mail(): SMTP server response: 530-5.5.1 Authentication Required. Learn more at 530 5.5.1 [http://support.google.com/mail/bin/answer.py?answer=14257](http://support.google.com/mail/bin/answer.py?answer=14257)

```
<?php
    $to = "jaynanavati@gmail.com";
    $subject = "Test mail";
    $message = "Hello! This is a simple email message.";
    $from = "jaynanavati@gmail.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
    echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:35:54.537

很明显，您的 SMTP 服务器要求您进行身份验证。使用更强大的工具来发送邮件，例如 PHPMailer。

# c++ - 如何重载运算符<<

> ID：16117818
> 
> 赞同：1
> 
> 时间：2013-04-20T07:20:40.713
> 
> 标签：c++, windows, qt, operators, operator-overloading

我尝试`operator <<`在 Qt 中重载。

```
class MyCryptographicHash : public QCryptographicHash
{
public:
    MyCryptographicHash(Algorithm method);

    void addData(const QString &data );

    friend MyCryptographicHash& operator<< (MyCryptographicHash &obj, const QString &value);

private:
    QByteArray _data;
};

MyCryptographicHash& operator<<(MyCryptographicHash &obj, const QString &value) {
    obj.addData(value);
    return obj;
}

    MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
{
    MyCryptographicHash *hash1 = new MyCryptographicHash(QCryptographicHash::Sha1);
    MyCryptographicHash *hash2 = new MyCryptographicHash(QCryptographicHash::Sha1);
    hash1->addData("abc1234");
    QString a;
    a = "qweer321";
    hash2<<a;
    qDebug() << "HASH1: " << hash1->result();
    qDebug() << "HASH2: " << hash2->result();
} 
```

但我得到错误：

```
no match for 'operator<<' in 'hash2 << a' 
```

我试图将运算符声明为类的成员，但也得到了错误。

```
error: 'MyCryptographicHash& MyCryptographicHash::operator<<(MyCryptographicHash&, const QString&)' must take exactly one argument 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:27:39.540

你的代码应该是

```
*hash2 << a; 
```

hash2 是一个指针，而不是一个对象。

但是，在您发布的代码中，没有明显的理由*说明*hash2 是指针。所以你可以写

```
{
    MyCryptographicHash hash1(QCryptographicHash::Sha1);
    MyCryptographicHash hash2(QCryptographicHash::Sha1);
    hash1.addData("abc1234");
    QString a;
    a = "qweer321";
    hash2 << a;
    qDebug() << "HASH1: " << hash1.result();
    qDebug() << "HASH2: " << hash2.result();
} 
```

这也将具有不泄漏内存的优点。

但也许这不仅仅是您发布的代码。

# php - 从 MySQL 填充 PHP 数组以供 Amcharts 使用

> ID：16117820
> 
> 赞同：0
> 
> 时间：2013-04-20T07:20:47.313
> 
> 标签：php, mysql, amcharts

我正在尝试为公司 Intranet 网页设置一些简单的 Amcharts 图表。在过去的两周里，我创建了 HTML/JS 并使用 Amcharts 制作了一个漂亮的图形（用于演示目的的数据硬编码在 HTML 中）。我还安装了 XAMPP 并创建了一个 MySQL 数据库，其中填充了表和一些从 csv 文件导入的数据。

到目前为止，一切正常——我可以显示漂亮的图形，我可以收集数据以向图形提供数据。但是，我一直在从两个方面解决这个问题（将源数据放入数据库并在网页上的图表中显示数据）。现在我需要连接这两个端点，这样我就可以为 Amcharts 提供来自 MySQL 的数据。

我知道我需要使用 PHP 从 MySQL 中获取数据并将其放入 Amcharts 可以使用的数组中，但我的 PHP 知识非常基础，我正在努力编写代码。

我所拥有的是成功连接到 MySQL 并提取数据以显示在浏览器中的 PHP 代码 - 可以。我只是不知道如何以 Amcharts 绘制图形所需的格式将该数据放入多维数组中。

如果你们能在这里给我一些帮助并填补缺失的部分，那就太好了。我有一些用于创建数组逻辑的伪代码作为“真实”php 代码的基础。

这是填充数组的伪代码：

> ;charset=UTF-8', '', '', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
> 
> ```
> $stmt = $db->query("SELECT * FROM <mytable> WHERE <mycondition>");
> 
> $prevweek = "9999";
> $headrowdone = 0;
> 
> while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
>   if ($prevweek < $row['WeekNumber']) {
>       // New week so write out Category X Label ('Week') with the week number of the following data rows
>       chartData.push($DataRow);
>       $headrowdone = 0;
>   } 
>   if (!$headrowdone) {
>       $DataRow = "Week: "+$row['WeekNumber'];
>       $headrowdone = 1;
>   }
>   // Write out the X-Axis Category value and the Y-Axis value
>   $DataRow = $DataRow+$row['XAxisCategory']+": "+$row['YAxisCategory'];
>   $prevweek = $row['WeekNumber'];
> }
> chartData.push($DataRow); ?> 
> ```

SQL 表如下所示：

> CREATE TABLE ( WeekNumber varchar(4), XAxisCategory varchar(50), YAxisValue integer);
> 
> 并具有如下数据：'1301','A',10 '1301','B',20 '1301','C',24 '1302','A',11 '1302','B',22 '1302','C',27 '1303','A',14 '1303','B',23 '1303','C',28 ...等

amcharts 的数据数组需要如下所示：

> var chartData = [{周：“1301”，A：10，B：20，C：24}，{周：“1302”，A：11，B：22，C：27}，{周：“1303” ，A：14，B：23，C：28 ....等}]；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:36:34.567

```
// This is spoofing your fetch via pdo
$rows [] = array('WeekNumber'=>1301, 'A'=>10);
$rows [] = array('WeekNumber'=>1301, 'B'=>20); 
$rows [] = array('WeekNumber'=>1301, 'C'=>25);

$rows [] = array('WeekNumber'=>1302, 'A'=>12);
$rows [] = array('WeekNumber'=>1302, 'B'=>22); 
$rows [] = array('WeekNumber'=>1302, 'C'=>27);
//var_dump($rows);

// set up some vars
$lastweek = '';
$ctr = 0;
$data = array();

// loop thru the vars, build another array
foreach( $rows as $row){

if($row['WeekNumber'] !== $lastweek){
  $ctr++;
  $data[$ctr] = array('Week'=>$row['WeekNumber']);
  $lastweek= $row['WeekNumber'];
}
// this could be nicer, but for now will do
if( isset($row['A']) ) $data[$ctr]['A'] = $row['A'];
if( isset($row['B']) ) $data[$ctr]['B'] = $row['B'];
if( isset($row['C']) ) $data[$ctr]['C'] = $row['C'];

}

var_dump($data); 
```

然后使用 json_encode() 进入你想要的格式。

这个答案有点笨拙，但至少可以避免构建字符串来制作 json。

# php - 具有睡眠功能的简单 PHP 脚本不起作用，浏览器提示下载 .php 文件

> ID：16117821
> 
> 赞同：0
> 
> 时间：2013-04-20T07:20:50.133
> 
> 标签：php, performance, timeout

当我执行以下 php 文件（一段时间后）时，浏览器会要求下载文件

```
<?php
    ini_set("max_execution_time", 0);
    set_time_limit(0);
    for($i=0;$i<10;$i++){
       echo time();
       echo "<Br>";
       $sec=rand(15,30);
       sleep($sec);
    }
?> 
```

在浏览器中没有`echo`提示下载 PHP 文件（如果文件需要大约 2 分钟或更长时间才能执行，而不是发生此问题）

![](https://i.stack.imgur.com/AOJfi.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:26:32.097

如果服务器决定将 php 源代码扔给您而不是运行它，那么您的服务器设置就会混乱。

不确定它是如何搞砸的，因为您的屏幕截图暗示您正在使用 XAMPP。在这种情况下，请尝试重新安装 XAMPP。

# gwt - Loading multiple images using http request GWT

> ID：16117823
> 
> 赞同：2
> 
> 时间：2013-04-20T07:21:15.943
> 
> 标签：gwt

I need to load about 400-500 images to the on single page at a time. Is there a quick way of doing so. I can, in fact, load the images using a for loop but that takes very long?

Many thanks in advance Umesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:47:10.127

由于 IE 渲染速度很慢...请不要一次添加所有图像...

正如您在评论中提到的图像大小，用户一次无法看到所有图像......所以他必须向下滚动才能看到剩余的图像......所以我们为什么不能使用滚动事件......

在第一个镜头循环第一组图像（比如说50）..从那时你可以使用窗口滚动事件..

在滚动时，您可以附加下一组 50 张图像...

这将增加文档加载时间......不仅在 Internet Explorer 中，而且在其余浏览器中......

# javascript - javascript 检查图像是否在浏览器缓存中

> ID：16117826
> 
> 赞同：0
> 
> 时间：2013-04-20T07:21:43.357
> 
> 标签：javascript, google-chrome

我有以下代码来检查外部图像是否被缓存

```
<script type="text/javascript">
    function cached(url){
       var test = document.createElement("img");
       test.src = url;
       return test.complete || test.width+test.height > 0;
    }
    var base_url = "http://www.google.com/images/srpr/nav_logo80.png"
    alert("Expected: true or false\n" +
        cached(base_url)
        + "\n\nExpected: false (cache-busting enabled)\n" +
        cached(base_url + "?" + new Date().getTime()));         
</script> 
```

我得到以下结果假假，然后在 Firefox 和 IE 上为真假（我假设它首先触发假假，然后在它抓取图像后，它触发真，假，但在 chrome 中它是假的，总是假的

有什么理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:25:03.633

[这个问题](https://stackoverflow.com/questions/7844982/using-image-complete-to-find-if-image-is-cached-on-chrome)的答案似乎适用于 Chrome。

```
function cached(url){
    var test = document.createElement("img");
    test.src = url;
    return test.complete || test.width+test.height > 0;
}
var base_url = "http://www.google.com/images/srpr/nav_logo80.png"
alert("Expected: true or false\n" +
  cached(base_url)
  + "\n\nExpected: false (cache-busting enabled)\n" +
  cached(base_url + "?" + new Date().getTime())); 
```

回答该问题的副本/粘贴，而不是我的工作。

# android - 如何删除 Google Maps Android API v2 中的折线？

> ID：16117831
> 
> 赞同：1
> 
> 时间：2013-04-20T07:22:13.270
> 
> 标签：android, google-maps-markers, google-maps-android-api-2, polyline, google-polyline

所以基本上我有两个标记：一个用于目的地（这只是静态的，意味着它不会移动），另一个标记是动态的，并根据当前位置更新其位置。

我能够在两个标记之间的路线上绘制一条折线。唯一的问题是在更新当前位置时，从动态标记的先前位置绘制的先前多段线仍然存在。

这是图像：

![在此处输入图像描述](https://i.stack.imgur.com/f3iHm.png))

正如您在图像中看到的，标记是指向当前位置的动态标记，并且标记先前位置的折线位于图像中标记的右上角位置的圣卡洛斯大学。此图像中未显示目标标记。

如何删除以前的折线？我尝试使用 Polyline 类中的 remove() 方法，但它不起作用。

我基于此链接的代码： [答案：使用 Google Maps Android API v2 在两点之间绘制路径](https://stackoverflow.com/questions/14702621/answer-draw-path-between-two-points-using-google-maps-android-api-v2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T23:21:55.283

创建包含所有标记/点和折线的数组。稍后，在删除时，进行以下操作：

```
Polyline pTemp = mPolylines.remove(mPolylines.size() - 1);
pTemp.remove() 
```

# c# - 按钮上的滑动效果

> ID：16117833
> 
> 赞同：1
> 
> 时间：2013-04-20T07:22:20.413
> 
> 标签：c#, xaml, windows-runtime, microsoft-metro, winrt-xaml

我有一个看起来像这样的用户控件：

![主要用户控制](https://i.stack.imgur.com/vHpHM.png)

我想实现这样的效果，即当用户单击一个按钮时，每个其他按钮都会向一侧滑动，并且根据单击的按钮的一些内容会出现在剩余的可用空间中。像这样的东西：

![用户单击肤色按钮](https://i.stack.imgur.com/WqxMF.png)

和这个：

![用户点击时间按钮](https://i.stack.imgur.com/SI6Hi.png)

我怎样才能达到这个效果？我正在使用 C# 和 XAML ...

# xml - R xmlParse() 索引

> ID：16117840
> 
> 赞同：0
> 
> 时间：2013-04-20T07:22:58.820
> 
> 标签：xml, r

我有从`xmlParse()`. 我能够获得对名为的 XMLNode 的引用`root`

```
> class(root)
[1] "XMLInternalElementNode" "XMLInternalNode"        "XMLAbstractNode" 
```

当我做

```
> root[[2]][[1]]
<tr class="party-republican race-winner"><th rowspan="5" class="results-county">Autauga <span class="precincts-reporting">100.0% Reporting</span></th>&#13;
                                &#13;
                                <th scope="row" class="results-candidate">M. Romney</th>&#13;
                                <td class="results-party"><abbr title="Republican">GOP</abbr></td>&#13;
                                <td class="results-percentage">72.6%</td>&#13;
                                <td class="results-popular">    17,366</td>&#13;
                            </tr> 
```

我尝试引用标签中的值：

```
<td class="results-percentage"> 
```

但是做`root[[1]][[2]][["<td class='results-percentage'>]]`返回null

我做错了什么导致我无法访问 72.6% 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:59:03.613

你应该给出一个有效的`xpath`，像这样的东西：

```
 //td[@class='results-percentage'] ## preeceeding by td and cotaining a certain class 
```

使用您的数据：

```
library(XML)
dd <- xmlParse('<tr class="party-republican race-winner"><th rowspan="5" class="results-county">Autauga <span class="precincts-reporting">100.0% Reporting</span></th>&#13;
  &#13;
  <th scope="row" class="results-candidate">M. Romney</th>&#13;
  <td class="results-party"><abbr title="Republican">GOP</abbr></td>&#13;
  <td class="results-percentage">72.6%</td>&#13;
  <td class="results-popular">    17,366</td>&#13;
  </tr> ',asText=TRUE) 
```

然后应用 xpath

```
getNodeSet(dd, "//td[@class='results-percentage']/text()")[[1]]
72.6% 
```

或使用`xpathSApply`：

```
xpathSApply(dd, "//td[@class='results-percentage']",xmlValue)
[1] "72.6%" 
```

# c# - 类型“StoredProcedures”已经定义了一个名为“AddNumber”的成员，具有相同的参数类型

> ID：16117845
> 
> 赞同：-5
> 
> 时间：2013-04-20T07:23:44.363
> 
> 标签：c#, sqlclr, database-project

我创建了一个 Visual C# SQL CLR 数据库项目。我添加了两个[存储过程](http://en.wikipedia.org/wiki/Stored_procedure)：`test1.cs`和`test2.cs`。我在`test1.cs`as中有一个函数`AddNumber`。

在`test2.cs`中，我想要一个具有相同名称的函数来执行其他操作，但这是我在重建它后得到的错误：

> 类型“StoredProcedures”已经定义了一个名为“AddNumber”的成员，具有相同的参数类型。

**test1**的代码如下所示：

```
public partial class StoredProcedures {
    [Microsoft.SqlServer.Server.SqlProcedure]
    public static void test1(string Path) {
        // Put your code here
    }

    private static void AddNumbers(int a, int b) {

    }
}; 
```

**测试 2**

```
public partial class StoredProcedures {
    [Microsoft.SqlServer.Server.SqlProcedure]
    public static void test2(string Path) {
        // Put your code here
    }

    private static void AddNumbers(int a, int b) {

    }
}; 
```

我不想更改名称，因为我有多个具有相同名称的其他函数。此外，两个文件中也有许多具有相同名称的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:57:22.073

> 我尝试在其中一个文件中添加命名空间，但在部署时出现错误“语法不正确”在 sql server 中部署它们的代码是：
> 
> CREATE PROCEDURE ADD_NUMBER (@Path nvarchar(400)) 作为外部名称 Test.StoredProcedures.test1 去

我不确定你为什么从你的问题中删除了这一点。如果类`StoredProcedures`在命名空间`Namespace`和程序集中`Test`，您可以使用`EXTERNAL NAME Test.[Namespace.StoredProcedures].test1`. 就 SQL 而言，完整的类型名称需要是单个标识符，并且由于完整的类型名称包含一个点，因此需要用引号引起来。

请注意，这将导致多个不同类型具有相同的名称`StoredProcedures`。这没有问题，但它与重命名`StoredProcedures`为单独的类`StoredProcedure1`和具有相同的效果`StoredProcedure2`，并且重命名是您想要避免的一件事（尽管我不明白为什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:01:47.277

我想你想接口抛出调用你的类方法。这是一种简单而有条理的方式。

通过显式实现接口，如下所示：

```
public interface ITest {
    void Test();
}
public interface ITest2 {
    void Test();
}
public class Dual : ITest, ITest2
{
    void ITest.Test() {
        Console.WriteLine("ITest.Test");
    }
    void ITest2.Test() {
        Console.WriteLine("ITest2.Test");
    }
} 
```

请注意，这些函数是类私有的，因此您必须将该类的对象分配给定义为该特定接口的变量：

```
var dual = new Dual();
ITest test = dual;
test.Test();
ITest2 test2 = dual;
test2.Test(); 
```

我的回答的出发点是[对 Stack Overflow 问题*Inheritance from multiple interface with the same method name in C#*](https://stackoverflow.com/a/2371203/2218635)的回答。

# c++ - 如何在 MFC 中支持多种文档类型，例如 MS Office 应用程序或 Visual Studio

> ID：16117853
> 
> 赞同：0
> 
> 时间：2013-04-20T07:24:57.557
> 
> 标签：c++, mfc, document-view

如何使我的 MFC 应用程序支持多种文档类型，如 MS Office 和 Visual Studio，当您单击新文件时，将出现一个支持所有类型的窗口，从中进行选择，然后打开相应的文档/视图。**我在 MFC 文档/视图架构方面没有经验**。我读过的大部分书都没有涵盖这部分。它们在文档/视图上都是相同的，它们通过绘制一些三角形、圆形、正方形来涵盖基础知识。我想掌握 mfc 文档/视图架构，最好的书或教程是什么？

另一件事是如何创建一个不支持文档/视图的 MDI 应用程序，并且 [它不处理文档] 它处理数据库，例如 mdi 子项是带有控件的表单，如何在 C# 中做到这一点很容易将父级设置为 mdi 父级和 mdi 子级，显示，它会正常显示如何在 mfc 中实现？使用什么类型的对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:13:20.333

没有魔法，只是很多工作。如果要支持文档类型 X、Y 和 Z，则需要确定需要哪些模型来表示它们。相似的文档类型可能共享相似的模型。例如，在 Visual Studio 中，VB.Net 解决方案和 C# 解决方案可能共享相同的模型，因为它们都是 .Net 解决方案。然而，本机 C++ 可能需要不同的模型。（请记住，作为类的模型可以从基类继承，因此您可以有效地共享相似的代码）。

# c# - SMTP 邮件错误

> ID：16117855
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:25:14.970
> 
> 标签：c#, email, smtpclient

我正在开发一个 C# 应用程序来使用我们公司邮件的 SMTP 服务器发送邮件。以下是代码。

```
MailMessage mail = new MailMessage();
SmtpClient SmtpServer = new SmtpClient("10.203.195.48");

mail.From = new MailAddress("");
mail.To.Add("");
mail.Subject = "filename";
mail.Body = "Report";

SmtpServer.Host = "ip address fo smtp mail server.";
SmtpServer.Port = 25;
SmtpServer.Credentials = new System.Net.NetworkCredential("", "");

SmtpServer.Send(mail); 
```

但我得到这个错误：

> 邮箱不可用。无法中继。系统没有互联网连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:38:12.027

以下代码适用于使用端口 587 的[Gmail](http://en.wikipedia.org/wiki/Gmail) [SMTP](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)。您只需更改端口和 SMTP。

添加命名空间

```
using system.net
MailMessage MyMailMessage = new MailMessage();
MyMailMessage.From = new MailAddress("emailid");
MyMailMessage.To.Add("To");
MyMailMessage.Subject = "Feedback Form";
MyMailMessage.Body = "This is the test message";
MyMailMessage.IsBodyHtml = true;

SmtpClient SMTPServer = new SmtpClient("smtp.gmail.com");
SMTPServer.Port = 587;
SMTPServer.Credentials = new System.Net.NetworkCredential("Username","password");
SMTPServer.EnableSsl = true;

try
{
    SMTPServer.Send(MyMailMessage);
}

catch (Exception ex)
{
    ex.message("error");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:39:57.263

来自*[错误：邮箱不可用。服务器响应为 5.7.1 Unable to relay for (email)](http://forums.devshed.com/net-development-87/error-mailbox-unavailable-the-server-response-was-5-7-1t-315971.html)*：

> 通常，当您拥有来自一个域的邮件服务器（例如 mailserver.com），而地址来自其他域时，就会发生这种情况。From 或 To 地址需要属于域（myname@mailserver.com 或 yourname@mailserver.com）。如果两个地址都不属于邮件服务器“拥有”的域，那么你就是在中继，这是一种垃圾邮件技术，现在通常是不允许的。”

另请参阅博客文章*[邮箱不可用。服务器响应为： 5.7.1 Unable to relay sendername](http://ashrafur.wordpress.com/2008/01/17/mailbox-unavailable-the-server-response-was-571-unable-to-relay-sendername/)*。

# asp.net-mvc - angularjs 和 ASP.NET MVC：客户端模型的最佳策略

> ID：16117856
> 
> 赞同：9
> 
> 时间：2013-04-20T07:25:18.027
> 
> 标签：asp.net-mvc, angularjs, asp.net-web-api

我目前正在研究客户端模型绑定到 HTML 模板，尤其是使用 angularjs。我想知道从服务器检索客户端视图模型的最佳策略是什么，例如，视图模型不仅包含要编辑的数据，还包含选择列表或下拉列表等的数据。

在我看来，一个人有几个选择

1.  使用例如 web api 从服务器检索一个视图模型，其中包含视图模型所需的所有数据
2.  将客户端视图模型呈现为服务器端 html 中的 javascript
3.  使用多个 web api 调用检索视图模型的数据，例如，一个用于要编辑的主要数据，一个用于每个附加数据（选择列表）

我没有遇到很多选项 1 的示例，因为似乎 web api 主要用于返回一种类型对象的特定数据的 crud 操作，例如 Person 或 Order

选项 2 符合使用 asp.net mvc 的服务器端视图模型的实践，但我没有看到很多将这种技术与 angularjs 结合使用的示例

如果考虑分离关注点，选项 3 看起来很干净，但具有多个较小的 ajax 请求的缺点。

你能分享你的想法和经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:21:27.223

就个人而言，我使用选项#3。该应用程序将请求“准备编辑器”，例如填充下拉列表，并请求获取您要编辑的数据（或者，如果您正在创建一个新对象，则为任何默认初始值）。我认为这比选项＃1更好地分离了关注点，选项＃1将“模型”数据和“支持”数据联系在一起。

但是正如您所指出的，这确实会产生额外的调用，并且如果它们非常多，可能会显着减慢页面速度。（或增加复杂性；在具有许多依赖字段的大表单上，排序可能变得很重要）。

我通常做的是让服务器提供“组合”api（例如`/editor/prepare-all`），同时还提供小块（例如`/editor/prepare-dropdown-1`，`/editor/prepare-dropdown-2`）。当您的编辑器加载时，您使用组合的；如果字段之间存在依赖关系，您可以只请求依赖字段的数据（例如`/editor/prepare-dropdown-2?dropdown1-value=123`）。我相信这对服务器的复杂性影响不大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:35:52.027

我会同意圣。从来没有并且肯定使用过选项#3，我认为结合 $resource 和 Web API 将是一个完美的 RAD 组合。但是，我也曾在非常复杂的屏幕上工作过，我需要亚秒级的响应时间，所以我采取了优化整个开发“列”的方法——我使用 SQL Server 作为后端数据库进行开发，所以我使用了它对 XML 的本机支持从存储过程返回结构化 XML，然后我将其序列化为 .Net 模型 (POCO)，然后将其传递给 Json 序列化器以传输到浏览器。我可能需要针对 POCO 执行一些额外的业务处理，但这仍然会导致非常简单的代码结构来传输相当复杂的数据结构。通常它也非常快，因为我

# cakephp-2.0 - 使用插件的 Cakephp 表单验证

> ID：16117858
> 
> 赞同：1
> 
> 时间：2013-04-20T07:25:32.513
> 
> 标签：cakephp-2.0

我在我的 cakephp 表单中使用 jQuery。我想使用添加插件的方式添加验证。将 required 放在选定的输入元素上会自动对其进行验证。无论我是否添加插件。我已经包含了 js 助手..

```
public $helpers = array('Html', 'Form', 'Js'=>'jQuery', 'Text'); 
```

像这样。我想停止自动验证所遵循的传统方式。并根据我的要求进行验证。我知道 cakephp 1.x 版本它遵循我想要的相同方式。但是在 cakephp 2.x 版本中已经对其自动验证进行了更改？我怎么能阻止呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:38:16.417

## HTML5 表单验证

根据您使用的浏览器，您看到的验证消息可能是*浏览器*执行的 HTML5 验证的一部分。最新版本的 Chrome 将自动对具有`required`属性的输入元素执行表单验证。

您可以通过向标签添加属性来*禁用*HTML5 验证。`novalidate``<form>`

有关更多信息，请参阅此问题：

[禁用 HTML5 表单元素的验证](https://stackoverflow.com/questions/3090369/disable-validation-of-html5-form-elements)

**笔记**

尽管使用 jQuery 进行验证可能是一个很好的补充（从用户界面的角度来看），但您**永远不应该***仅*依赖于浏览器中的验证。始终确保执行正确的服务器端验证。在 CakePHP 中，这是在模型中完成的，请参阅[数据验证](http://book.cakephp.org/2.0/en/models/data-validation.html#data-validation)

# java - 将（二叉搜索树）的递归插入更改为非递归？

> ID：16117860
> 
> 赞同：0
> 
> 时间：2013-04-20T07:25:37.763
> 
> 标签：java, recursion, while-loop, binary-search-tree

我正在尝试将 BST 的递归插入方法更改为非递归（可能是 While 循环）更改的原因是因为我想看看它是否可能。

下面是插入代码：

```
public void insert(String value)
{
    //The node is stored in the root
    root = insert(value,root);
}

private Character insert(String value,Character current)
{   
    if(current == null)
    {
        //Add the root if the tree empty 
     current = new Character(value);
    }
    else
        //If the value that we want to insert < root value, then keep going to left till 
        //it's empty then inserted at left end. Done by recursion 
        if(value.compareTo(current.getElement())<=-1)
        {
            current.setLeft(insert(value,current.getLeft()));
        }
        else
            //If the value that we want to insert > root value, then keep going to right till 
            //it's empty then inserted at right end. Done by recursion 
            if(value.compareTo(current.getElement())>=1)
            {
                current.setRight(insert(value,current.getRight()));
            }
            else
            {
                //Else, the number we want to insert in already in the tree
                System.out.println("Duplicate numbers inserted" + current.getElement());
            }
    //returning the node tree so that we store it in the root 
    return current;
} 
```

**我可以将此代码更改为非递归吗？**

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:37:34.447

是的，您可以非递归地定义您的插入函数。

但是，要做到这一点，您的插入函数必须为 BST 定义按顺序遍历迭代器，该迭代器是递归定义的。

我相信有一种方法可以非递归地定义按顺序遍历，但是根据实现，这可能非常低效。

BST 本身基本上是递归定义的，递归定义插入函数总是很有效的。（如果你真的需要我可以写一些伪代码，但我认为它有点没有意义，我不知道你的中序遍历迭代器的实现细节）

请不要忘记选择这个作为答案:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:41:15.960

是的，但是您需要稍微更改数据结构才能使其正常工作。节点必须知道它的左孩子和右孩子。

该算法如下所示：

```
current = root;
while(current != null){
   if(value.compareTo(current.getElement())<=-1)
   {
        current = current.left_child;
   }else if(value.compareTo(current.getElement())>=1){
        current = current.right_child;
   }else{
        // Duplication
   }
} 
```

其实之前有一些很好的例子，你可能想先检查一下：

*   [使用常数空间和 O(n) 运行时间编写二叉搜索树的非递归遍历](https://stackoverflow.com/questions/5496464/write-a-non-recursive-traversal-of-a-binary-search-tree-using-constant-space-and)
*   [C中的非递归/迭代二叉搜索树（作业）](https://stackoverflow.com/questions/4504541/nonrecursive-iterative-binary-search-tree-in-c-homework)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-27T16:35:49.883

使用 while 循环插入

```
public Node insert(Node root,int n) {
  while (true) {
    if (root.data>n) {
      if (root.left==null) {
          root.left= new Node(n);
          return (root.left);
      }

      root=root.left;
    }
    else if (root.data<n) {
      if (root.right == null) {
          root.right= new Node(n);
      }
    }
  }
} 
```

# jquery - 如何让多个 div 接受拖放图像？

> ID：16117862
> 
> 赞同：2
> 
> 时间：2013-04-20T07:26:07.110
> 
> 标签：jquery, drag-and-drop

*示例* [http://jsfiddle.net/7DeFn/1](http://jsfiddle.net/7DeFn/1)

```
<div id="container">       
    <body>
        <div id="clone_wrapper">
            <div class="right">
                <div id="pricebox1">
                    <div id="pricebox2">
                        <input id="coin" type="text" id="text" name="text_name" style="width: 35px; style=" height: 21px; maxlength=3 />
                        <div id="selectbox1">
                            <div id="selectbox2">
                                <div id="selectbox3">
                                    <select name="qty">
                                        <option value="Each" selected>Each</option>
                                        <option value="All"> All</option>
                                        <option value="Any 2">Any 2</option>
                                        <option value="Any 3">Any 3</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="pricebox3">
                            <div id="pricebox4">
                                <div id="pricebox5"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="clone_wrapper">
            <div class="right">
                <div id="pricebox1">
                    <div id="pricebox2">
                        <input id="coin" type="text" id="text" name="text_name" style="width: 35px; style=" height: 21px; maxlength=3 />
                        <div id="selectbox1">
                            <div id="selectbox2">
                                <div id="selectbox3">
                                    <select name="qty">
                                        <option value="Each" selected>Each</option>
                                        <option value="All"> All</option>
                                        <option value="Any 2">Any 2</option>
                                        <option value="Any 3">Any 3</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="pricebox3">
                            <div id="pricebox4">
                                <div id="pricebox5"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>         
        <div id='inventrightside1'><div id='inventrightside2'><p1><img src="images/invent1.png "/></p>
<select id="filter"><option>Select Item</option>
    <option value="glasses" />Glasses<br />
    <option value="afro" />Afros<br />
    <option value="alien" />Alien<br />
    <option value="antler" />Antlers<br />
    <option value="army" />Army<br />
</select>
<div class="inventholding">
                    <div id="itembox1">
                        <div id="itembox3">
                            <div id="itembox4">
                                <img src="images/3dglasses_black.png" class="glasses" id="price" alt="Black 3D Glasses" />
                                <img src="images/3dglasses_white.png" class="glasses" id="price" alt="White 3D Glasses" />
                                <img src="images/afro_black.png" class="afro" id="price" alt="Black Afro" />
                                <img src="images/afro_blue.png" class="afro" id="price" alt="Blue Afro" />
                                <img src="images/afro_green.png" class="afro" id="price" alt="Green Afro" />
                                <img src="images/afro_orange.png" class="afro" id="price" alt="Orange Afro" />
                                <img src="images/afro_pink.png" class="afro" id="price" alt="Pink Afro" />
                                <img src="images/afro_purple.png" class="afro" id="price" alt="Purple Afro" />
                                <img src="images/afro_rainbow.png" class="afro" id="price" alt="Rainbow Afro" />
                                <img src="images/afro_red.png" class="afro" id="price" alt="Red Afro" />
                                <img src="images/afro_white.png" class="afro" id="price" alt="White Afro" />
                                <img src="images/alienhead_blue.png" class="alien" id="price" alt= "Blue Alien Head" />
                                <img src="images/alienhead_brown.png" class="alien" id="price" alt= "Brown Alien Head" />
                                <img src="images/alienhead_green.png" class="alien" id="price" alt= "Green Alien Head" />
                                <img src="images/alienhead_grey.png" class="alien" id="price" alt= "Grey Alien Head" />
                                <img src="images/alienhead_purple.png" class="alien" id="price" alt= "Purple Alien Head" />
                                <img src="images/alienhead_red.png" class="alien" id="price" alt= "Red Alien Head" />
                                <img src="images/antlers_brown.png" class="antler" id="price" alt="Brown Antler" />
                                <img src="images/antlers_gold.png" class="antler" id="price" alt="Gold Antler" />
                                <img src="images/armytrousers_black.png" class="army" id="price" alt="Black Army Pants" />
                                <img src="images/armytrousers_blue.png" class="army" id="price" alt="Blue Army Pants" />
                                <img src="images/armytrousers_green.png" class="army" id="price" alt="Green Army Pants" />
                                <img src="images/armytrousers_pink.png" class="army" id="price" alt="Pink Army Pants" />
                                <img src="images/armytrousers_purple.png" class="army" id="price" alt="Purple Army Pants" />
                                <img src="images/armytrousers_sand.png" class="army" id="price" alt="Sand Army Pants" />

                            </div>
                        </div>
                    </div>
                </div>
            </div>

function itemInSpot(drag_item,spot)
{
var oldSpotItem = $(spot).find('img');
if(oldSpotItem.length>100) {
    oldSpotItem.appendTo('#itembox4').draggable({ revert: 'invalid' });
}
var item = $('<img />');
item.attr('src',drag_item.attr('src')).attr('class',drag_item.attr('class')).appendTo(spot).draggable({ revert: 'invalid' });
drag_item.remove(); // remove the old object
}

 $(document).ready(function() {
$("img").draggable({ revert: 'invalid'});

$("#itembox4").droppable()
$("#pricebox5").droppable({ accept: 'img'})
$('#pricebox5').droppable({ accept: 'img'});
$('#pricebox5,#pricebox5,#itembox4').bind('drop', function(ev,ui) {  itemInSpot(ui.draggable,this); });
 $('#itembox4 img').hide();
$('#clone_button').click(function() {
    $('#clone_wrapper div:#pricebox5')
        .clone()
        .append('')
        .appendTo($('#clone_wrapper'));
})
});
$(function() {$('#filter').change(function(){
    $('#itembox4 img').hide();
    $('.'+$(this).val()).show();});
});

$(function() {$('#button').click(function () {
    var clone = $('#pricebox1').clone().appendTo('#container');
    clone.find('[new*="one"]').attr('class', 'one');
    clone.find('[new*="two"]').attr('class', 'two');
    clone.find('[new*="three"]').attr('class', 'three');
    clone.find('[id]').removeAttr('id');
});}); 
```

**我想达到什么目的？**
我正在尝试为用户创建 4-5 个框，以便将任何图像添加到选定的框中。

**有什么问题？**
当我复制并粘贴价格框时，无论我尝试做什么，只有第一个框允许将图像拖放到其中。

**我需要保留哪些功能？**
图像需要保留为拖放。
图像应该能够在任何盒子库存/价格框/新价格框之间来回移动。
所有图像必须保留在过滤器下。

提前感谢任何可以帮助我解决此问题的人。

**修复了我自己**
，我最终更改了`#pricebox5`to `.pricebox5`，它允许他们在更改 jquery 的同时进入。

# ios - 使用 SQLite BLOB 中的 AVAudio Record 播放音频

> ID：16117863
> 
> 赞同：0
> 
> 时间：2013-04-20T07:26:11.133
> 
> 标签：ios, objective-c, ipad, avaudioplayer

我在 UITableViewCell 中有一个 UIButton 连接到一个播放 AVAudio 文件的方法，如下所示：

```
cell.playButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
cell.playButton.tag = indexPath.row;
[cell.playButton addTarget:self action:@selector(useSelectedFile:) forControlEvents:UIControlEventTouchUpInside]; 
```

useSelectedFile 方法如下所示：

```
-(void) useSelectedFile:(id)sender{

    int tag = [(UIButton *)sender tag];
    NSDictionary *audioFileInformation = [audioCellsArray objectAtIndex:tag];
    NSData *selectedAudioFile = [audioFileInformation objectForKey:@"Data"];
    NSError *error;

    NSString *filePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"sound.caf"];
    [[NSFileManager defaultManager] removeItemAtPath:filePath error:nil];
    [selectedAudioFile writeToFile:filePath atomically:YES];
    NSURL *file = [NSURL fileURLWithPath:filePath]; 

    _audioPlayerForButton = [[AVAudioPlayer alloc] initWithContentsOfURL:file error:&error];
    if (error)
        NSLog(@"Error: %@",
              [error localizedDescription]);
    else
        [_audioPlayerForButton play];

} 
```

我可以记录文件并将它们保存在数据库中并可以很好地提取数据，但是我无法播放它们。使用当前代码，我得到：错误：操作无法完成。（OSStatus 错误 1954115647。）

当我尝试使用时：

```
_audioPlayerForButton = [[AVAudioPlayer alloc] initWithData:selectedAudioFile error:&error]; 
```

点击播放按钮时我会收到此错误：错误：操作无法完成。（OSStatus 错误 2003334207。）

检查我从模拟器写入磁盘的文件，它似乎已损坏？文件系统不会像普通的 .caf 文件那样将其显示为音频文件（带有音符的黑色），而是显示为带有 QuickTime 符号的白色小文件，QuickTime 不会播放。

我尝试在命令行上使用 macerror 状态码，但它只返回“未知错误”。

有人对如何解决此问题并播放我的文件有任何想法或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:35:35.827

事实证明我是对的，在比较文件后我可以清楚地看到数据不同，所以我从将文件存储为 a 更改为`BLOB`使用`TEXT`base64*类*从这里对它们进行编码：[iPhone SDK base64 encode / decode](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)

# iphone - 在ios中加载应用程序时预缓存网页

> ID：16117864
> 
> 赞同：0
> 
> 时间：2013-04-20T07:26:19.530
> 
> 标签：iphone, objective-c, web-applications, ios6, uiwebview

我在ios中遇到问题，第一次在UIWebView中加载网页太慢。加载应用程序时可以预先缓存特定的网页，然后在应用程序中我想要的位置显示预缓存的网页。如何修复它 ？或请给出任何指导方针...

# c# - 如何打开 CMYK tif 图像并读取像素 CMYK 值？

> ID：16117872
> 
> 赞同：1
> 
> 时间：2013-04-20T07:27:29.240
> 
> 标签：c#, tiff, cmyk

我四处搜索，可以看到很多关于转换值的问题，但我找不到一个可以给我 CMYK 值的库，我只能看到获得 RGB 值的示例？

如果有可以打开 CMYK tif 文件并执行此操作的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:31:11.923

一种选择是使用[LibTiff.Net](https://bitmiracle.com/libtiff/)库（免责声明：我是它的开发人员之一）。该库可以在不转换数据的情况下提供对 TIFF 数据的访问。

以下方法可能对您有用：

*   [Tiff.ReadScanline](https://bitmiracle.github.io/libtiff.net/help/api/BitMiracle.LibTiff.Classic.Tiff.html#BitMiracle_LibTiff_Classic_Tiff_ReadScanline_System_Byte___System_Int32_)（对按扫描线分组的解码但未转换的样本的通用访问）
*   [Tiff.ReadEncodedStrip](https://bitmiracle.github.io/libtiff.net/help/api/BitMiracle.LibTiff.Classic.Tiff.html#BitMiracle_LibTiff_Classic_Tiff_ReadEncodedStrip_System_Int32_System_Byte___System_Int32_System_Int32_)（与上面相同，但用于条带）
*   [Tiff.ReadEncodedTile](https://bitmiracle.github.io/libtiff.net/help/api/BitMiracle.LibTiff.Classic.Tiff.html#BitMiracle_LibTiff_Classic_Tiff_ReadEncodedTile_System_Int32_System_Byte___System_Int32_System_Int32_)（与上面相同，但用于瓷砖）

还有[入门](https://bitmiracle.github.io/libtiff.net/help/articles/KB/getting-started.html)教程和一些[示例](https://github.com/BitMiracle/libtiff.net/tree/master/Samples)。

# php - 如何使用 php 获取网页的标题？

> ID：16117877
> 
> 赞同：0
> 
> 时间：2013-04-20T07:27:44.720
> 
> 标签：php, html

我编写了以下代码来获取网页的标题。但是代码不起作用并输出此错误消息：`Object of class DOMElement could not be converted to string`

```
$html = file_get_contents("http://mysmallwebpage.com/");
$dom = new DOMDocument;
@$dom->loadHTML($html);

$links = $dom->getElementsByTagName('title');

foreach ($links as $title)
{               
    echo (string)$title."<br>";
} 
```

你能给我举个例子吗？

# jquery - 通过属性值获取元素的子元素

> ID：16117883
> 
> 赞同：10
> 
> 时间：2013-04-20T07:28:07.147
> 
> 标签：jquery, dom, selector

我有一个代表 DIV 的 jQuery 对象：

```
$rel = $('#rel_'+rel.id); 
```

在那个 DIV 中，有一个按钮，我的自定义属性“rid”设置为 rel.id

我需要选择那个按钮，它的工作原理是这样的：

```
$("[rid='"+rel.id+"']").html(); 
```

但我认为这不是最快的解决方案，因为它需要为此解析整个 DOM，并且因为我知道按钮总是在 DIV 内，所以我可以避免这种情况。

我尝试使用以下代码：

```
$rel.children("[rid='"+rel.id+"']").html(); 
```

但这没有用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-20T07:30:08.233

如果它可能不是直系子女，您将需要[`find`](http://api.jquery.com/find)而不是`children`（仅查看直系子女）：

```
$rel.find("[rid='"+rel.id+"']").html(); 
```

# html - 背景图像不透明度的 CSS3 渐变

> ID：16117884
> 
> 赞同：2
> 
> 时间：2013-04-20T07:28:16.143
> 
> 标签：html, css

我正在处理的网站上有一个英雄元素的背景图片。我想让 .hero div 中的背景图像处于从透明度到边缘完全不透明度的渐变上，以便两个 div 的背景相互融合。

为了说明，这是我现在在我的正文中使用的代码`index.html`：

```
<div class="hero">
    <div class="hero-inner">
         <h1>My awesome hero element</h1>
    </div>
</div> 
```

...这就是我的`style.css`

```
.hero {
    background-color: black;
    width: 800px;
}

.hero-inner {
    width: 700px;
    height: 200px;
    margin: auto;
    background-image: url('http://i.imgur.com/PXzVXmR.png');
}
.hero-inner h1 {
    position: absolute;
    font-family: Arial, sans-serif;
    color: white;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.7);
    left: 50px;
    top: 20px;
    font-size: 48px;
} 
```

[这是 jsFiddle](http://jsfiddle.net/X3K83/)。如何使背景图像与边缘`.hero-inner`的背景颜色混合？`.hero`我对完成这项工作的 Photoshop 也有类似的效果，但我想知道这是否可以通过 CSS3 渐变来完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:47:34.687

You can draw radial background gradient, but code is really ugly and looks heavy.

Here is a gradient editor that may be useful: [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

```
background: -moz-radial-gradient(center, ellipse cover, rgba(255,48,48,1) 23%, rgba(205,57,71,1) 40%, rgba(80,79,130,0) 83%, rgba(30,87,153,0) 100%);
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(23%,rgba(255,48,48,1)), color-stop(40%,rgba(205,57,71,1)), color-stop(83%,rgba(80,79,130,0)), color-stop(100%,rgba(30,87,153,0)));
background: -webkit-radial-gradient(center, ellipse cover, rgba(255,48,48,1) 23%,rgba(205,57,71,1) 40%,rgba(80,79,130,0) 83%,rgba(30,87,153,0) 100%);
background: -o-radial-gradient(center, ellipse cover, rgba(255,48,48,1) 23%,rgba(205,57,71,1) 40%,rgba(80,79,130,0) 83%,rgba(30,87,153,0) 100%);
background: -ms-radial-gradient(center, ellipse cover, rgba(255,48,48,1) 23%,rgba(205,57,71,1) 40%,rgba(80,79,130,0) 83%,rgba(30,87,153,0) 100%);
background: radial-gradient(ellipse at center, rgba(255,48,48,1) 23%,rgba(205,57,71,1) 40%,rgba(80,79,130,0) 83%,rgba(30,87,153,0) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff3030', endColorstr='#001e5799',GradientType=1 ); 
```

# php - MySQL：如何将文本预先附加到现有列中的数据？

> ID：16117887
> 
> 赞同：2
> 
> 时间：2013-04-20T07:28:44.163
> 
> 标签：php, mysql

我有一个填充的 MySQL 表，我需要在其中为名称字段预先附加文本“NEW_”。（说来话长，但这是现在需要做的。）

我想这可以通过更新来完成，但我不确定如何将“NEW_”添加到“名称”列的开头。我也在 PHP 中工作，所以我需要在 PHP 中读取每条记录，提取“名称”字段，添加它，然后为记录执行更新？或者这一切都可以在 MySQL 中完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T07:32:14.517

使用这个查询

```
UPDATE table_name set `name` = CONCAT('NEW_',`name`) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T07:31:05.207

你可以`CONCAT`这样使用：

```
UPDATE tbl SET name=CONCAT('NEW_',name)
WHERE name NOT LIKE 'NEW\_%'; 
```

第二行将停止对开头已经有 NEW_ 的列进行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:33:58.243

你可以这样做：

`UPDATE myTable SET name = CONCAT('NEW_',name);`

正如我自己之前发布的那样，这将不起作用：

`UPDATE myTable SET name = 'NEW_' + name;`

# android - 无法在 android 中正确实现 textwatcher

> ID：16117893
> 
> 赞同：3
> 
> 时间：2013-04-20T07:29:37.637
> 
> 标签：android

我正在寻找一种方法来找出用户输入的内容，`EditText`然后我偶然发现了`TextWatcher`. 问题是我不明白函数中的参数指的是什么。我想逐个字母地跟踪用户输入的文本。我不知道哪个参数是正确的下标号。我尝试了不同的变化，但没有任何运气。

**本质上，我想保存在数组中输入的文本，直到用户按下“，”按钮或超过 24 个字符的限制。** 请指教。

```
public class Main extends Activity implements OnClickListener {

    // inputans.setOnKeyListener(this);

    Button go;
    TextView answer;
    TextView check;
    EditText inputans, inputq;
    boolean done1 = false;
    char[] ans = new char[30];
    String predef = "Please answer my question";
    char[] predefc = predef.toCharArray();
    int len = predefc.length;
    int i = 0;
    char[] substring = new char[30];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initialisevars();
        go.setEnabled(false);
        go.setOnClickListener(this);

        inputans.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

                if ((count - before) > 0) {
                    char current = s.charAt(before);                   
                    if (current == '.' || i >= 24) { // 24 check
                        // ans[i]='\0';
                        // inputans.setText(predef,
                        // TextView.BufferType.EDITABLE);
                        check.setText(predef);
                        go.setEnabled(true);
                    } else {

                        ans[i] = current;
                        i++; // char[] substring = char[30]; back button
                                // problem,check if prev length - current length
                                // >0

                        int m;
                        for (m = 0; m <= i; m++) {
                            substring[m] = predefc[m];
                        }

                        check.setText(substring.toString());
                        // substring[m]='\0';
                        /*
                         * inputans.setText(substring.toString(),
                         * TextView.BufferType.EDITABLE);
                         */

                    }
                }

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

                // TODO Auto-generated method stub
            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        });

    }

    private void initialisevars() {
        // TODO Auto-generated method stub
        go = (Button) findViewById(R.id.bGo);
        answer = (TextView) findViewById(R.id.tvAns);
        inputans = (EditText) findViewById(R.id.etTricky);
        inputq = (EditText) findViewById(R.id.etQues);
        check = (TextView) findViewById(R.id.textView1);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bGo: {

            answer.setText(ans.toString()); 

        }
            break;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:46:15.670

[`beforeTextChanged()`](http://developer.android.com/reference/android/text/TextWatcher.html#beforeTextChanged%28java.lang.CharSequence,%20int,%20int,%20int%29)在任何更改发生之前调用，在这里您可以获取即将更改的旧内容：

```
public void beforeTextChanged(CharSequence s, int start, int count, int after) {

  String toBeChanged = s.subSequence(start,start+count).toString();

} 
```

* * *

要获取替换以前内容的内容，请使用[`onTextChanged()`](http://developer.android.com/reference/android/text/TextWatcher.html#onTextChanged%28java.lang.CharSequence,%20int,%20int,%20int%29)，这在替换完成时调用：

```
public void onTextChanged(CharSequence s, int start, int before, int count) {

  String replacement = s.subSequence(start,start+count).toString();

} 
```

* * *

*如果您对正在更改的内容*不感兴趣，只是想知道*更改*的内容，只是为了保存、比较、验证等，您可以使用第三种方法[`afterTextChanged()`](http://developer.android.com/reference/android/text/TextWatcher.html#afterTextChanged%28android.text.Editable%29)。当您不想干扰用户编辑一个或多个字符时，可以使用此方法：

```
public void afterTextChanged(Editable s) {
  String newString = s.toString(); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T07:46:17.943

在 Android 文档中，您可以阅读：

> public abstract void onTextChanged (CharSequence s, int start, int before, int count) 在 API 级别 1 中添加
> 
> 调用此方法是为了通知您，在 内`s`，以`count` 开头的字符`start`刚刚替换了具有 length 的旧文本`before`。尝试通过此回调对 s 进行更改是错误的。

代表着：

*   `s`已经是修改过的文本（您可以通过 获取它的长度 `s.length()`）
*   `count`是已添加的字符数
*   `start`是添加新字符的位置
*   `before`是更改前的文本长度

基本上为了实现你想要的，我宁愿使用这种方法而不是数组：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initialisevars();
    go.setEnabled(false);
    go.setOnClickListener(this);

    inputans.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            if ((s.length() - before) > 0) {  // Check if text is longer than before changing
                char current = s.charAt(before);                   
                if (current == '.' || s.length() >= 24) {
                    check.setText(predef);
                    go.setEnabled(true);
                } else {
                    check.setText(s);
                }
            }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

            // TODO Auto-generated method stub
        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });
} 
```

就那么简单。

# mysql - 在 SQL 日期函数中为前 2 个月

> ID：16117895
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:29:47.787
> 
> 标签：mysql, sql

我在下面提到了数据库表结构，

```
name, expired_date, address, payment_date
----------------------
name1, 2013/06/02, address1,2013/07/23
name2, 2013/06/02, address2,2013/07/23
name3, 2013/04/02, address3,2013/07/23
name4, 2013/05/02, address4,2013/07/23
name5, 2013/06/02, address5,2013/07/24
...
name6, 2013/06/02, address6,..... 
```

在此表中，我以`yyyy/mm/dd`格式更新日期。当前月份是四月，但我只需要两条记录。例如，我只需要 06 个月的记录。

我需要为此进行 SQL 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:41:27.793

假设您要按 expired_date 查询：

以下查询从当前日期起两个月后获取记录：

```
SELECT * FROM tableName where expired_date>=DATE_ADD(CURDATE(), INTERVAL 1 MONTH) 
```

如果您特别想要 6 月的记录：

```
SELECT * FROM tableName where expired_date>='2013-06-01' AND expired_date<'2013-07-01' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:44:14.350

试试看。

```
Select [fields] from [yourtable] where Month([yourDateField]) = [Value, ex: for June : 6] 
```

实施

我假设你想检查 expired_date

```
Select * from Table1 where Month(expired_date) = 6 
```

如果你还想检查年份，假设年份是 2013 年。

```
Select * from Table1 where Month(expired_date) = 6 and Year(expired_date) = 2013 
```

# perl - Term::ReadKey，原始模式下的非阻塞读取：检测 EOF？

> ID：16117896
> 
> 赞同：2
> 
> 时间：2013-04-20T07:29:47.387
> 
> 标签：perl, unix, io, terminal, stdio

当我将东西输入我的程序时，它似乎没有像 0x4 这样的字符来指示 EOF。

```
$ echo "abc" | map 'cat'
saw a: \x61
saw b: \x62
saw c: \x63
saw
: \x0A
zzzbc
^C 
```

我必须按 Ctrl+C 才能退出，但我不确定 Ctrl+C 的作用是什么。可能是让 shell 向管道发送 SIGINT？我不知道管道在那个级别上是如何工作的。

这是我的程序`map`：

```
#!/usr/bin/env perl

use strict;
use warnings;

use IO::Pty::Easy;
use Term::ReadKey;
use Encode;

$#ARGV % 2 and die "Odd number of args required.\n";

if ($#ARGV == -1) {
    warn ("No args provided. A command must be specified.\n");
    exit 1;
}

# be sure to enter the command as a string
my %mapping = @ARGV[-@ARGV..-2];

my $interactive = -t STDIN;

# my %mapping = @ARGV;
# my @mapkeys = keys %mapping;

# warn @mapkeys;
if ($interactive) {
    print "Spawning command in pty: @ARGV\n"
    # print "\nContinue? (y/n)";
    # my $y_n;
    # while (($y_n = <STDIN>) !~ /^(y|n)$/) {
    #     print '(y/n)';
    # }
    # exit if $y_n eq "n\n";
}

my $pty = IO::Pty::Easy->new();
my $spawnret = $pty->spawn("@ARGV")."\n";

print STDERR "Spawning has failed: @ARGV\n" if !$spawnret;

ReadMode 4;
END {
    ReadMode 0; # Reset tty mode before exiting
}

my $i = undef;
my $j = 0;

{
    local $| = 1;
    while (1) {
        myread();

        # responsive to key input, and pty output may be behind by 50ms
        my $key = ReadKey(0.05);
        # last if !defined($key) || !$key;
        if (defined($key)) {
            my $code = ord($key); # this byte is...
            if ($interactive and $code == 4) {
                # User types Ctrl+D
                print STDERR "Saw ^D from term, embarking on filicide with TERM signal\n";
                $pty->kill("TERM", 0); # blocks till death of child
                myread();
                $pty->close();
                last;
            }
            printf("saw %s: \\x%02X\n", $key, $code);

            # echo translated input to pty
            if ($key eq "a") {
                $pty->write("zzz"); # print 'Saw "a", wrote "zzz" to pty';
            } else {
                $pty->write($key); # print "Wrote to pty: $key";
            }
        }
    }
}

sub myread {
    # read out pty's activity to echo to stdout
    my $from_pty = $pty->read(0);
    if (defined($from_pty)) {
        if ($from_pty) {
            # print "read from pty -->$from_pty<--\n";
            print $from_pty;
        } else {
            if ($from_pty eq '') {
                # empty means EOF means pty has exited, so I exit because my fate is sealed
                print STDERR "Got back from pty EOF, quitting\n" if $interactive;
                $pty->close();
                last;
            }
        }
    }
} 
```

这可以解释为什么它会产生“zzzbc”。

现在我的问题是我怎样才能`map`知道`echo "abc"`已经到达输入的末尾？参看。`echo "abc" | cat`自行完成。ReadKey 似乎没有提供用于确定这种情况的 API。

同样，我不确定如何将 EOF 传递给 pty 中的孩子。我认为当命令要写入文件或其他内容时，这可能会导致问题，因为 EOF 与发送终止信号是正确写入文件与不干净退出之间的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T14:41:05.160

尝试从 STDIN 读取而不是 $pty 对象。您通过外壳创建的管道将数据传递给您的 STDIN 文件描述符 0，在 perl 中就是您的句柄。

$pty，我认为那是你的终端。这就是脚本挂起的原因（我猜）。

# android - 在 0:0 Android 中支持视频时如何查找上一个视频？

> ID：16117900
> 
> 赞同：1
> 
> 时间：2013-04-20T07:30:08.637
> 
> 标签：android, android-videoview

我使用 Videoview 播放视频，我使用 seekto 在视频中搜索。现在我想在使用 mediaControler 和 pree back 键和 Arrived 00:00 视频时停止并且之前的视频 Begging 播放视频。如何找到该视频是 00:00 时间？

![在此处输入图像描述](https://i.stack.imgur.com/eFpDN.png)

# asp.net - 我应该在共享托管服务器中使用事务范围吗？

> ID：16117904
> 
> 赞同：0
> 
> 时间：2013-04-20T07:30:53.013
> 
> 标签：asp.net, entity-framework, transactionscope

假设我必须使用不同的方法并将它们放在`transaction scope`. 但是每种方法都会打开它的连接。所以我需要`MSDTC service`在 windows server 中启用。但它是一个共享托管服务器，我无法启用它。

```
class Debit
{
  public void InsertA()
  {
    //InsertCode
  }
}
class Credit
{
   public void InsertB()
  {
   // InsertCode
  }
}
using (TransactionScope ts = new TransactionScope(TransactionScopeOption.Required))

        {
            DebitBAL debit = new DebitBAL();
            CreditBAL credit = new CreditBAL();
            debit.InsertA();
            credit.InsertB();
            ts.complete();
} 
```

我`entity framework`用于我的陈述。`transaction scope`在共享托管服务器中使用是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:08:21.033

请参阅此链接以了解如何将[事务范围与实体框架一起使用](http://www.programminginterviews.info/2012/06/entity-framework-transaction-scope.html)

在此链接中，解释了在更新多个实体期间发生错误时使用事务范围显示回滚的三种情况：

1：当您对上下文有多个保存调用时；

2：当你有多个对象的单个保存时；

3：以及跨多个上下文的事务。

# javascript - 我找不到改变画布大小的方法

> ID：16117907
> 
> 赞同：0
> 
> 时间：2013-04-20T07:31:15.037
> 
> 标签：javascript, html, canvas, web

我在网上找到了这个惊人的代码（创作者的道具），我一直在玩它，但我找不到如何更改画布大小。喜欢它的宽度和长度。

这是控制画布的Java。如何更改宽度/高度？

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js" type="text/javascript"></script>
<script>
var glitcher = {
init: function () {
setTimeout((function () {

      this.canvas = document.getElementById( 'stage' );
      this.context = this.canvas.getContext( '2d' );

      this.initOptions();
      this.resize();
      this.tick();
}).bind(this), 100);
},
initOptions: function () {

    var gui = new dat.GUI(1),
            current = gui.addFolder('Current'),
            controls = gui.addFolder('Controls');

    this.width = document.documentElement.offsetWidth;
    this.height = window.innerHeight;

    this.font = 'bold 12vw Arial';
this.context.font = this.font;
    this.text = "Bryan Chicas";
    this.textWidth = (this.context.measureText(this.text)).width;

    this.fps = 60;

    this.channel = 0; // 0 = red, 1 = green, 2 = blue
    this.compOp = 'lighter'; // CompositeOperation = lighter || darker || xor

    this.phase = 0.0;
    this.phaseStep = 0.05; //determines how often we will change channel and amplitude
    this.amplitude = 0.0;
    this.amplitudeBase  = 2.0;
    this.amplitudeRange = 2.0;
    this.alphaMin = 0.8;

    this.glitchAmplitude = 20.0;
    this.glitchThreshold = 0.9; 
    this.scanlineBase = 40;
    this.scanlineRange = 40;
    this.scanlineShift = 15;

    current.add(this, 'channel', 0, 2).listen();
    current.add(this, 'phase', 0, 1).listen();
    current.add(this, 'amplitude', 0, 5).listen();

    var text = controls.add(this, 'text');
    text.onChange((function (value) {
        this.textWidth = (this.context.measureText(this.text)).width;
    }).bind(this));
    controls.add(this, 'fps', 1, 60);
    controls.add(this, 'phaseStep', 0, 1);
    controls.add(this, 'alphaMin', 0, 1);
    controls.add(this, 'amplitudeBase', 0, 5);
    controls.add(this, 'amplitudeRange', 0, 5);
    controls.add(this, 'glitchAmplitude', 0, 100);
    controls.add(this, 'glitchThreshold', 0, 1);
    controls.open();
    // gui.add(fizzyText, 'noiseStrength', 0, 100).listen();

},
tick: function () {
    setTimeout((function () {

        this.phase += this.phaseStep;

        if( this.phase > 1 ) {
            this.phase     = 0.0;
            this.channel   = (this.channel === 2) ? 0 : this.channel + 1;
            this.amplitude = this.amplitudeBase + (this.amplitudeRange * Math.random());
        }

        this.render();
        this.tick();

    }).bind(this), 1000 / this.fps);
},
render: function () {
    var x0 = this.amplitude * Math.sin( (Math.PI * 2) * this.phase ) >> 0,
            x1, x2, x3;

    if( Math.random() >= this.glitchThreshold ) {
        x0 *= this.glitchAmplitude;
    }

    x1 = this.width - this.textWidth >> 1;
    x2 = x1 + x0;
    x3 = x1 - x0;

    this.context.clearRect( 0, 0, this.width, this.height );
    this.context.globalAlpha = this.alphaMin + ((1-this.alphaMin) * Math.random());

    switch( this.channel ) {
        case 0: this.renderChannels(x1, x2, x3); break;
        case 1: this.renderChannels(x2, x3, x1); break;
        case 2: this.renderChannels(x3, x1, x2); break;
    }

    this.renderScanline();
},
renderChannels: function (x1, x2, x3) {
this.context.font = this.font;
    this.context.fillStyle = "rgb(255,0,0)";
    this.context.fillText(this.text, x1, this.height/2);

    this.context.globalCompositeOperation = this.compOp;

    this.context.fillStyle = "rgb(0,255,0)";
    this.context.fillText(this.text, x2, this.height/2);
    this.context.fillStyle = "rgb(0,0,255)";
    this.context.fillText(this.text, x3, this.height/2);
},
renderScanline: function () {
    var y = this.height * Math.random() >> 0,
  o = this.context.getImageData( 0, y, this.width, 1 ),
  d = o.data,
  i = d.length,
  s = this.scanlineBase + this.scanlineRange * Math.random() >> 0,
  x = -this.scanlineShift + this.scanlineShift * 2 * Math.random() >> 0;

    while( i-- > 0 ) {
        d[i] += s;
    }

    this.context.putImageData( o, x, y );
},
resize: function () {
 if(this.canvas) {
        this.canvas.width = document.documentElement.offsetWidth;
        this.canvas.height = window.innerHeight;
 }
}
};

glitcher.init();
window.onresize = glitcher.resize;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:48:35.227

Modify theses lines:

```
this.width = 100; //document.documentElement.offsetWidth;
this.height = 500; //window.innerHeight; 
```

with your values for the dimensions. If you want in this line:

```
this.font = 'bold 8vw Arial'; 
```

change the font family and size.

Good Luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T23:50:56.837

您是否仅在 javascript 代码中指定了宽度和高度？您可以在画布标签内添加宽度和高度，如下所示：

```
<canvas id="canvas1" width="500" height="500"> 
```

当然，这些属性可以写在#canvas1（在我的例子中）的css文件中，你知道的。无论如何，试试这个并告诉我们是否一切顺利。

# php - 如何在浏览器中显示日志文件 YII

> ID：16117908
> 
> 赞同：0
> 
> 时间：2013-04-20T07:31:34.263
> 
> 标签：php, logging, yii

我需要在浏览器中显示日志文件。我想做类似的事情

```
 if(isset($_Get['showlog'] && $_Get['showlog']==1){
          $this_>redner('output', application.log);
    } 
```

在 yii 中可以做到这一点吗？我该怎么做？

非常感谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:31:54.100

```
if (isset(Yii::app()->request->getQuery('showlog')) {
          $this->render('output', application.log);
} 
```

[文件](http://www.yiiframework.com/doc/api/1.1/CHttpRequest#getQuery-detail)

# android - 具有不同时间响应的两个不同菜单项

> ID：16117911
> 
> 赞同：0
> 
> 时间：2013-04-20T07:32:31.963
> 
> 标签：android, image, share, menuitem, viewflipper

我有两个不同的菜单项（翻转和共享），它们共享一个活动。它们中的每一个都可以完美而流畅地工作，但是当我将它们放在一起时，翻转动作需要很长时间才能响应。我能做些什么？谢谢你的帮助。

翻转动作：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    // Add either a "photo" or "finish" button to the action bar, depending on which page
    // is currently selected.
   MenuItem item = menu.add(Menu.NONE, R.id.action_flip, Menu.NONE,
           mShowingBack
                   ? R.string.action_photo
                   : R.string.action_info);

   item.setIcon(mShowingBack
           ? R.drawable.ic_action_photo
         : R.drawable.ic_action_info);
   item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    return true;
} 
```

分享行动

```
public boolean onPrepareOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.share_menu, menu);
    MenuItem item = menu.findItem(R.id.menu_item_share);
    mShareActionProvider = (ShareActionProvider) item.getActionProvider();
    mShareActionProvider.setShareIntent(getDefaultShareIntent());
    return super.onPrepareOptionsMenu(menu);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T00:53:54.103

我把这个问题留了下来，我忘记了。不过，我又看了一遍，记得我是怎么解决的。我做错了。在这样的事情之前，我必须调用 super.onPrepareOptionsMenu(menu) ：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.share_menu, menu);
    MenuItem item = menu.findItem(R.id.menu_item_share);
    mShareActionProvider = (ShareActionProvider) item.getActionProvider();
    mShareActionProvider.setShareIntent(getDefaultShareIntent());

    return true;
} 
```

# objective-c - 在可可中对具有浮点值的字符串 NSTableView 列进行排序

> ID：16117912
> 
> 赞同：2
> 
> 时间：2013-04-20T07:32:34.270
> 
> 标签：objective-c, cocoa, sorting, nstableview

我有一个具有字符串类型属性的列的 NSTableView。字符串列中显示的值是浮点数。我无法通过单击列标题对该列进行排序。

# sql - 需要帮助才能使用 SSIS 执行 ETL 任务

> ID：16117914
> 
> 赞同：0
> 
> 时间：2013-04-20T07:33:00.910
> 
> 标签：sql, ssis, etl

我想使用其 IP 地址连接到服务器。然后，我想执行保存在该服务器驱动器上的 .sql 文件。我还想将此 sql 的结果存储在服务器本身的文本文件中。我应该将其作为 sql 任务执行还是作为从数据库中提取或其他内容运行？我不知道该怎么做。我需要有关如何进行的提示。

使用的数据库是 SQL server 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:50:57.340

On SSIS, you can execute SQL and export it to text file(csv).

Please refer this article. [http://dwbi1.wordpress.com/2011/06/05/ssis-export-query-result-to-a-file/](http://dwbi1.wordpress.com/2011/06/05/ssis-export-query-result-to-a-file/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T15:40:49.293

在 SQL Server 上将 SSIS 解决方案创建为平面文件。

打开 Microsoft Visual Studio 单击 Create Project 选择 Integration Services Project 为项目命名 (x2) 设置位置，例如 C:\SSISPackages\ 单击 OK

单击数据流选项卡 单击以创建新的数据流任务 单击工具箱选项卡（左下角） 将 OLE DB 源拖到数据流部分 将平面文件目标（例如）拖到数据流部分 拖动绿色箭头以连接 OLE DB平面文件目标的源

双击 OLE DB 源 单击 OLE DB 连接管理器旁边的新建 选择 YOURSERVER\YOURDB 并单击确定 将数据访问模式更改为 SQL 命令 在 SQL 命令文本下输入过程和参数（例如）单击解析查询以确认 SQL命令有效，点击确定

双击 Flat File Destination 单击 Flat File Connection Manager 旁边的 New 选择 Ragged Right（如果标准固定宽度，每行末尾带有 CR/LF）并单击 OK 单击 Browse 并选择输出的目标和文件名，然后单击确定两次单击映射并确认输入和目标列正确，然后单击确定

要将当前日期附加到文件名： 单击 Package Explorer 选项卡（中心窗格的右上角） 单击 Variables 选项卡（左下角）添加一个名为 path 的变量，Scope = Package，Data Type = String，Value = 文件路径（不包括文件名的 YYYYMMDD.txt 部分）

在平面文件连接管理器的属性（底部中心，右键单击）中，打开表达式，并将属性设置为 ConnectionString 并将表达式设置为：

```
@[User::path]+
(DT_STR,4,1252) DatePart("yyyy",getdate()) +
Right("0" + (DT_STR,4,1252) DatePart("m",getdate()),2) +
Right("0" + (DT_STR,4,1252) DatePart("d",getdate()),2) + ".txt" 
```

（或者您需要格式化日期和文件名）

单击评估表达式以确保它看起来正常。

# android - 从 Android 将图像上传到 Azure

> ID：16117917
> 
> 赞同：0
> 
> 时间：2013-04-20T07:33:22.083
> 
> 标签：android, azure

是否有任何库可以将图像从 Android 平台上传到 Azure。我一直在寻找教程，但找不到任何教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:26:53.970

如果您使用的是移动服务，这里有一个很好的浏览：http: [//chrisrisner.com/Android-and-Mobile-Services-and-Windows-Azure-Storage](http://chrisrisner.com/Android-and-Mobile-Services-and-Windows-Azure-Storage)

# windows-phone-8 - Windows Phone 8：支持本机 Unicode（马拉雅拉姆语）？

> ID：16117918
> 
> 赞同：5
> 
> 时间：2013-04-20T07:33:34.867
> 
> 标签：windows-phone-8

我想让我的 windows phone 8 应用程序支持马拉雅拉姆语 Unicode

我想在我的 Windows Phone 应用程序中使用本地语言。我已经通过将字体文件加载到资产文件夹来在 android 中完成它。Windows中是否有任何相同的方式来支持本机语言？如何在 windows phone 8 中实现这一点？如果有任何想法请帮助我。

我想构建一个这样的应用[程序](http://www.windowsphone.com/en-in/store/app/malayalam-reader/2505fc6c-b4e4-4d78-bf49-1adf1befee92?signin=true)。这是一个使用 MALAYALAM 一种印度语言的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:14:07.293

以下步骤可能会对您有所帮助：

1.  在您的项目中创建一个名为“fonts”的文件夹（不带引号）
2.  将字体文件 (*.ttf) 复制到该文件夹​​中。例如 Arial.ttf（字体名称 Arial UI）
3.  将“复制到输出目录”属性设置为“如果较新则复制”
4.  并使用以下语法在您的 XAML 中访问该字体

因此，如果您有包含 Hello World 字体的 Malayalam.ttf 文件，它将看起来像 FontFamily="fonts/Malayalam.ttf#Hello World"

您可以在这里找到更多信息：[http ://blog.kulman.sk/using-custom-fonts-in-windows-phone-apps/](http://blog.kulman.sk/using-custom-fonts-in-windows-phone-apps/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T16:04:37.953

[Windows Phone 8 字体](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202920%28v=vs.105%29.aspx)

你正在寻找

> 尼尔玛用户界面

这是内置的 Windows 8 Phone 字体之一。

![在此处输入图像描述](https://i.stack.imgur.com/lcYf6.png)

# php - 循环在框架中的数字之前未显示零

> ID：16117919
> 
> 赞同：0
> 
> 时间：2013-04-20T07:33:35.593
> 
> 标签：php, mysql, string, frameworks

我正在自定义框架中制作一个表单，当用户输入 2 个数字时，例如开始数字和结束数字。循环显示这些数字之间的所有数字。例如，如果用户输入 0300 和 0309，结果将显示

> 0300
> 
> 0301
> 
> 0302
> 
> 0303
> 
> 0304
> 
> 0305
> 
> 0306
> 
> 0307
> 
> 0308
> 
> 0309

但它显示

> 0300
> 
> 301
> 
> 302
> 
> 303
> 
> 304
> 
> 305
> 
> 306
> 
> 307
> 
> 308
> 
> 309

我的循环有问题吗？

```
function did_ehmad_sec_submit($editForm) {
$count=0;
$start=$editForm['from_to'];
$end=$editForm['to_range'];
$desc=$editForm['description'];

for ($i=$start;$i<=$end;$i++)
{
$result = mysql_query("INSERT into did_number(did_number, description) VALUES ('$i','$desc')");
}

return $result; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:40:38.723

**礼貌**：[在 PHP 中，如何添加到零填充的数字字符串并保留零填充？](https://stackoverflow.com/q/718229/1288198)

尝试使用这个..

```
sprintf('%04d', $num); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:43:37.473

虽然您没有将您的问题标记为 MySQL，但这显然是正在使用的。

因此，如果您想用一组数字（包括前面的零）将数字存储在数据库中，一种解决方案是使用该`ZEROFILL`属性。（有关更多信息，请参阅 MySQL[数字类型属性](http://dev.mysql.com/doc/refman/4.1/en/numeric-type-attributes.html)手册页。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:43:38.463

0 被自动删除。因此，您可以手动追加或使用 ZEROFILL 作为数字列

# css - 滚动 div 剪辑嵌套 div 时溢出-y

> ID：16117922
> 
> 赞同：1
> 
> 时间：2013-04-20T07:34:12.197
> 
> 标签：css, scroll, clipping

我有一个水平滚动的 div，它使用 jQuery 连接到一些按钮。这工作正常，问题是我在可滚动内容中有一个嵌套的 div，当它与容器重叠时它会被剪裁。我需要在 x 轴上溢出，而不是在 y 轴上。overflow-x: hidden, overflow-y visible 应该可以解决这个问题，但不能。如果我删除溢出，我确实可以工作，但我需要溢出-x 来滚动 div。

下面简化了 html / css - 没有滚动逻辑，因为这不是这里的问题......应该很容易吗？

谢谢一百万 :) 安迪

```
 <!DOCTYPE html>
    <html>
        <head>
            <title>TestDiv</title>
        </head>
        <body>
            <div style="width:100%; height:150px; border:1px solid blue">
               TOP DIV
           </div>
           <div class="slide" style="height:150px; width:800px;  border: 1px solid blue; background-color: pink;">
               <div style="border: 1px solid blue; width:1200px; height:150px;" class="inner" id="slider">
                    <table  cellspacing="0" cellpadding="0" border="2" style="table-layout:fixed; width: 1200px; height:150px">
                    <tr><td>AAAAAAAAA</td><td>BBBBBBBBB</td><td><div class="container"><div class="testDiv">XXX</div></div>CCCCCCCCC</td><td>DDDDDDDDDD</td><td>EEEEEEEEEE</td><td>FFFFFFFFF</td><td>GGGGGGGGGG</td><td>GGGGGGGGGG</td><td>GGGGGGGGGG</td><td>GGGGGGGGGG</td><td>GGGGGGGGGG</td><td>GGGGGGGGGG</td><td>GGGGGGGGGG</td><td>GGGGGGGGGG</td></tr>
                </table>
            </div>
           </div>
            <div style="width:100%; height:150px; border:1px solid green;">
                BOTTOM
            </div>
        </body>
    </html>
<style scoped="scoped">
    .slide
    {
        position:relative;
        overflow-x: hidden;
        overflow-y:visible;
    }

    .slide .inner
    {
        overflow-y:visible;
        position:absolute;
        left:0;
        bottom:0;
        padding:0px;
    }
    .container
    {
        width: 20px;
        height: 20px;
        background-color: black;
        position: relative;
    }
    .testDiv
    {
        width: 235px;
        position: absolute;
        z-index: 999;
        left:20px;
        top: -180px;
        height: 200px;
        background-color: greenyellow;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T12:02:53.253

问题是您使用的是“固定”定位。这仅适用于“相对”定位。要转换为相对定位，您需要记住 Top 位置是相对于前一个兄弟元素的，而 left 是相对于父元素的。

# java - 无法确定类型：java.util.List

> ID：16117923
> 
> 赞同：1
> 
> 时间：2013-04-20T07:34:15.183
> 
> 标签：java, hibernate

我对 Hibernate 很陌生，事实证明这不是一个简单的技术学习......在项目中，我使用 hibernate 版本 4.2.0.CR1。我正在尝试为所有数据库实体创建一个基类，因为它们都应该包含一些标识符和创建日期。奇怪的是，起初，我在没有任何基类的情况下创建了类 User 和 UserPicture 并且它工作得非常好，现在我添加了它，即使它应该像以前一样工作，它没有 o_O 并且它继续抛出关于我的图片列表的一些奇怪的异常，之前没有抛出......所以我继续关注堆栈跟踪：

```
org.hibernate.MappingException: Could not determine type for: java.util.List, at table: User, for columns: [org.hibernate.mapping.Column(profilePicture)]
at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:314)
at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:292)
at org.hibernate.mapping.Property.isValid(Property.java:239)
at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:469)
at org.hibernate.mapping.UnionSubclass.validate(UnionSubclass.java:61)
at org.hibernate.cfg.Configuration.validate(Configuration.java:1283)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1734)
at love.commons.database.DBManager.<init>(DBManager.java:28)
at love.commons.database.DBManagerTest.<clinit>(DBManagerTest.java:19)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

抽象实体：

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class AbstractEntity implements Serializable{

private static final long serialVersionUID = 1L;

protected Long id;

protected Date creationDate = new Date();

@Id
@Column(name="id")
@GeneratedValue(strategy=GenerationType.TABLE)
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

@Column
@NotNull
@Temporal(TemporalType.DATE)
public Date getCreationDate() {
    return creationDate;
}

public void setCreationDate(Date creationDate) {
    this.creationDate = creationDate;
}
} 
```

用户：

```
@Entity
@Table(name="User")
public class User extends AbstractEntity {

private static final long serialVersionUID = 1L;

@Column (unique=true, length=30)
@NotNull
private String login;

@Column (length=32)
@NotNull
private String password;

@NotNull
@Email
@Column (unique=true, length=80)
private String email;

@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="owner")
private List<UserPicture> profilePictures = new LinkedList<UserPicture>();

public String getLogin() {
    return login;
}

public void setLogin(String login) {
    this.login = login;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

@Transient
public void encryptPassword() {
    this.password = md5(password);
}

public List<UserPicture> getProfilePicture() {
    return Collections.unmodifiableList(profilePictures);
}

public void addProfilePicture(UserPicture profilePicture) {
    profilePicture.setOwner(this);
    profilePictures.add(profilePicture);
}

@Transient
private String md5(String input) {

    String md5 = null;

    if(null == input) return null;

    try {
        MessageDigest digest = MessageDigest.getInstance("MD5");
        digest.update(input.getBytes(), 0, input.length());
        md5 = new BigInteger(1, digest.digest()).toString(16);

    } catch (NoSuchAlgorithmException e) {

        e.printStackTrace();
    }
    return md5;
}   
} 
```

用户图片：

```
@Entity
public class UserPicture extends AbstractEntity {

private static final long serialVersionUID = 1L;

@Column(length=734004)
private byte [] picture = null;

@ManyToOne(fetch=FetchType.LAZY)
@Column(name="owner")
@JoinColumn(nullable=false,name="id")
private User owner;

public UserPicture() {
    picture = null;
}

public UserPicture(InputStream stream) {
    try {
        this.picture = new byte[stream.available()];
        stream.read(picture);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public UserPicture(byte [] picture) {
    this.picture = picture;
}

public byte[] getPicture() {
    return picture;
}

public void setPicture(byte[] picture) {
    this.picture = picture;
}

public User getOwner() {
    return owner;
}

public void setOwner(User owner) {
    this.owner = owner;
}   
} 
```

那么我做错了什么？为什么我不断收到异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T07:44:14.223

AbstractEntity 不能用`@Entity`and注释`@Inheritance`。必须用 注释`@MappedSuperclass`。确实，这种继承只是用来继承公共属性，这就是`MappedSuperclass`它的用途。

您得到的异常是由于映射注释的位置缺乏连贯性引起的。基础超类注释了 getter，子类注释了字段。Hibernate 使用 Id 注解的位置来确定实体的访问类型。由于@Id 在 getter 上，它只考虑放置在 getter 上的注解，而忽略那些放在字段上的注解。将所有注释放在字段（我会推荐）或吸气剂上。

此外，您的吸气剂命名不当。它应该是`getProfilePictures()`而不是`getProfilePicture()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-18T23:52:51.170

从[休眠 5.2 文档](https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#access)：

> 默认情况下，@Id 注释的位置提供了默认访问策略。

对于您的情况，休眠将`AccessType.PROPERTY`同时使用 for`UserPicture`和`User`实体，因此例外，要使用字段映射策略，您应该明确定义[@Access](https://docs.oracle.com/javaee/7/api/javax/persistence/Access.html)策略：

```
@Entity
@Table(name="User")
@Access( AccessType.FIELD )
public class User extends AbstractEntity {
    ...
}

@Entity
@Access( AccessType.FIELD )
public class UserPicture extends AbstractEntity {
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T14:05:27.127

我遇到了同样的问题，我发现hibernate试图使用属性访问器来使用Parent所以我通过使用@Access注释来强制使用字段解决了这个问题

```
@Entity
@Table(name = "MyTable")
@Access(AccessType.FIELD)
public class MyEntity{
     ......
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T22:23:08.167

您可以尝试在 List 声明上方添加 @ElementCollection 映射。

# css - CSS issue - margin top - Google Chrome

> ID：16117926
> 
> 赞同：4
> 
> 时间：2013-04-20T07:34:52.263
> 
> 标签：css, google-chrome, joomla

On my [Joomla site](http://www.wellnessinfo.info) I have a problem with the margin-top only in Google Chrome. Firefox & IE are ok. There are 27 pixels, the menu is above. I use a theme from Yootheme (but they are not able to solve the problem).

If I enter this style:

```
ul.menu.menu-dropline {
  margin-top:27px;
} 
```

Google Chrome version is ok; but not Firefox & IE anymore.

Unfortunately I am not the CSS profi - hopefully you can help.

Kind regards winfo

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T07:50:32.703

I found these lines in your CSS code. Probably they cause the difference in behavior between FF and Webkit browsers.

```
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
-webkit-padding-start: 40px; 
```

Quick solution: Add the following to your CSS code.

```
ul.menu.menu-dropline {
    -webkit-margin-before: 27px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:54:48.713

The code is a bit strange. You have a few things that doesn't make much sense.

You have on your `nav` wrapper `#menubar` a `margin-top` set for 27 pixels on *custom.css* then in the same file, another negative `margin-top` value for your `nav` element of -20 pixels.

You should **remove** those two **attributes and/or rules**:

```
#menu {
  margin-top: -20px;
}

#headerbar + #menubar {
  margin-top: -27px;
} 
```

# bash - 找不到文件时for循环执行错误

> ID：16117935
> 
> 赞同：2
> 
> 时间：2013-04-20T07:35:54.440
> 
> 标签：bash, file-extension, for-in-loop

我有这个 bash“for in”循环，它在目录中查找 pdf 文件并提示它们（为示例而简化）

```
#!/bin/bash
for pic in "$INPUT"/*.pdf
do
    echo "found: ${pic}"
done 
```

当 $INPUT 目录中有 pdf 文件时，此脚本运行良好，但是，当目录中没有 pdf 文件时，我得到：

> 找到：/home/.../input-folder/*.pdf

这是预期的行为吗？如何使用 for in 循环处理它？我需要使用 ls 还是 find ？

我试过在“$INPUT”周围加引号和不加引号。文件名和目录名中没有空格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T08:11:24.837

这是预期的行为。根据[bash 手册页](http://linux.die.net/man/1/bash)，在路径名扩展部分：

> 分词后，除非设置了 -f 选项，否则 bash 会在每个单词中扫描字符 *、? 和 [。如果出现这些字符之一，则该词被视为一个模式，并替换为按字母排序的与该模式匹配的文件名列表。**如果未找到匹配的文件名，并且未启用 shell 选项 nullglob，则单词保持不变。**

因此，如果没有`"$INPUT"/*.pdf`找到匹配的 for，则循环将在模式本身上执行。但是在手册页的下一句话中：

> 如果设置了 nullglob 选项，但没有找到匹配项，则删除该单词。

那正是你想要的！所以就这样做：

```
#!/bin/bash
shopt -s nullglob
for pic in "$INPUT"/*.pdf
do
    echo "found: ${pic}"
done 
```

（但请注意，这可能会以意想不到的方式改变其他事物的行为。例如，尝试运行`shopt -s nullglob; ls *.unmatchedextension`，看看会发生什么。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:43:22.397

我会像这样添加一个文件存在测试：

```
#!/bin/bash
if test -e `echo "$INPUT"/*.pdf | cut -d' ' -f1`
then
    for pic in "$INPUT"/*.pdf
    do
        echo "found: ${pic}"
    done
fi 
```

# hibernate - 使用谷歌应用引擎部署struts2 + hibernate应用程序

> ID：16117938
> 
> 赞同：0
> 
> 时间：2013-04-20T07:36:13.393
> 
> 标签：hibernate, google-app-engine, struts2

这对我来说现在很麻烦...

我已经使用 struts2 和 hibernate (mysql) 开发了一个应用程序，它与 apache tomcat 一起工作得很好。

现在我想将它部署在 Google App Engine 上。我认为我必须将我的 java 动态 web 项目转换为 google web 项目。这样做之后，当我在谷歌为 Eclipse 提供的服务器上测试它时，它没有运行。它显示了休眠的异常。我遇到的第一个异常是**jdbcException: Not able to open connection**。我听说 google app engine(GAE) 不支持 mysql。这是真的吗？有哪些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T19:42:16.530

默认情况下，GAE 不使用 MySQL 或任何类型的关系数据库来存储数据，如果您想在应用程序中使用关系数据库，那么您应该选择“Google Cloud SQL”。通过使用它，您可以将数据存储在云上的关系数据库中，并可以从基于 GAE 的 Java 应用程序访问它。

这两种服务（GAE 和 Cloud SQL）都是免费提供的，但也有一些限制。像免费版本一样，存储空间有限。

有关更多详细信息，请查看：[https ://cloud.google.com/products/cloud-sql](https://cloud.google.com/products/cloud-sql)

# solr - SOLR排名中权重的确切含义

> ID：16117943
> 
> 赞同：2
> 
> 时间：2013-04-20T07:36:45.503
> 
> 标签：solr

我一直在 SOLR dismax 和 edismax 排名上尝试不同的权重，我想知道这些权重是什么意思？例如，您可以像这样指定 qf 参数：

```
qf:title^2.0 body^1.0 ... 
```

这些权重是什么意思？它是每个字段的文本分数的乘积吗？还是加法？

还有pf参数怎么样？

```
pf:title^2.0 body^0.5 
```

它也是乘法还是加法？

如果有人能提供一些启示，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T09:49:28.567

qf -> 用于测量单个术语得分的查询字段。boost 将权重乘以该字段的单个匹配分数

例如`qf:title^2.0 body^1.0`，在标题字段上匹配的文档将获得两倍的分数，然后在 boby 上匹配的文档（假设所有其他因素都相同）

pf -> 用于短语查询，它测量短语术语的分数

例如查询`internet banking`和配置`qf:title^2.0 body^1.0`和`pf:title^2.0 body^0.5`

应该导致查询：-

```
title:internet^2 title:banking^2  
body:internet^1 body:banking^1  
title:"internet banking"^2 body:"internet banking"^0.5 
```

# android - 在 Android 中结束第二次通话时未收到电话状态事件

> ID：16117945
> 
> 赞同：2
> 
> 时间：2013-04-20T07:37:09.557
> 
> 标签：android, xamarin

我注册了一个 PHONE_STATE 监听器，以检测用户何时开始和结束呼叫。万一有人想知道，我这样做完全是为了好玩和学习，所以没有隐私问题。

无论如何，我在尝试使用 telnet 和模拟器时发现了一个问题。在特定情况下，当一个呼叫处于保持状态并且第二个呼叫（活动呼叫）结束时，我的侦听器没有收到任何事件。我期待它至少在第一个呼叫再次激活时收到另一个 OFFHOOK，如果不是 IDLE + OFFHOOK 的话。但是什么都没有。

在相关的说明中，我还注意到没有为保持通话定义电话状态事件，这对我来说也有点奇怪。

当然，Android 日志条目正确地反映了这些事件。问题是，我怎样才能在代码中可靠地检测到它们？我应该监控日志本身（不确定这是否可能）而不是依赖电话状态监听器？

**我正在通过 Xamarin Studio 在模拟器上测试 API 15，所以我的代码是 Mono 上的 C# + Xamarin.Android，而不是直接使用 Java。**可能这种行为只是其中一个层中的错误或遗漏，但更有可能我只是遗漏了一些明显的东西。

FWIW，我还没有在真实设备上测试我的代码。我知道某些硬件的行为可能与我在模拟器中看到的有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:11:23.073

是的，这是一个问题。当有多个呼叫时很难检测到：

第一呼叫可以被检测到，即被拨或呼入`idle to offhook`。`ringing to offhook`现在，当电话响起时，`offhook to ringing`我们知道第二个电话打来了。如果您拨打第二个电话，`offhook to offhook`则无法从此处检测到它。（您可以收听拨号广播）。现在，如果第二个电话被拒绝，我们会得到`ringing to offhook`与接听电话的混淆。

恕我直言，仅 3 个状态不足以跟踪多个调用，但这就是 API 暂时支持的。

# php - php全局变量未显示正确答案

> ID：16117956
> 
> 赞同：0
> 
> 时间：2013-04-20T07:39:03.760
> 
> 标签：php, function, variables, global

它的代码非常简单，但我不明白这是什么意思:(

```
function aaa($b){
$a = 30;
global $a,$c;
return $c=($b+$a);}
echo aaa(40); //Output is 40 
```

为什么输出是 40 ？当我在函数之外调用 $a 时，它给了我想要的答案，那有什么意义呢？

```
$a = 30;
function aaa($b){
global $a,$c;
return $c=($b+$a);
}
echo aaa(40); //Output is 70

function aaa($b){
global $a,$c;
$a = 30;
return $c=($b+$a);
}
echo aaa(40); //Output is 70 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:45:36.667

See what the `global` keyword stands for here:

```
function aaa($b) {
    $a = 30;               # local variable, will be overwritten just in the next line
    global $a, $c;         # importing $a from the global scope - NULL
    return $c = ($b + $a); # $c = (40 + NULL)
} 
```

The manual at [http://php.net/global](http://php.net/global) reminds that a global variable influences the function if it is used inside there. That is not only for the first call but also for all subsequent calls.

This makes the function non-deterministic, so less useful code and you might - as you just did - get irritated by it.

An easy way out is: Instead of putting parametric values of that function into global variables, turn them into parameters:

```
function aaa($a, $b, &$c) {
    return $c = ($b + $a);
}

echo aaa(30, 40, $c); //Output is 70 
```

The code is not only much easier to read but also *deterministic*. It will always behave the same when called. That means less guessing.

This example still has the problem of returning a value by a parameter (by reference), however you might see as well that this is not really necessary any longer:

```
function aaa($a, $b) {
    return ($b + $a);
}

echo $c = aaa(30, 40); //Output is 70 
```

Lessons to take away:

*   Do not use global variables inside functions - they only stand in your way.
*   Reduce the number of parameters a function has (that are about *all* incomming values, so global counts as well).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T09:52:13.123

当使用 example`global $a;`时，PHP 会覆盖该变量`$a`并为其分配一个引用，就好像该语句被替换为：

```
$a = &$GLOBALS["a"]; // and the same with every other variable which is used in global 
```

正如`$a`您的第一个示例中未定义的那样，`$GLOBALS["a"]`评估为`null`，因此`$a`成为对持有`null`值的变量的引用。

尝试`var_dump($GLOBALS);`在函数调用之后和之前。它将向您显示一个以`a`函数调用命名的新索引（带有值`null`或您分配给它的值）。

（Ps：实际上它是对主范围内的变量进行直接引用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:48:37.257

```
in php a variable Scope priority is 
 1- local variable
 2- global variable 
```

even you determine global $a in function body but local variable $a used when it apear. refer to [Php variable reference](http://www.w3schools.com/php/php_variables.asp) if you want use global variable with same name of your local variable you must user $GLOBALS['c']=$GLOBALS['a']+$b; if $c and $a is global definition hope this help

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T07:57:26.293

我认为，在第一种情况下 $a 是未定义的。首先写入 $a 的值，然后调用函数。使用页面顶部的 error_reporting(E_ALL) 来了解脚本中的错误。

# c++ - C ++无法转换'类名 ' 以 'int' 作为回报

> ID：16117958
> 
> 赞同：-3
> 
> 时间：2013-04-20T07:39:21.990
> 
> 标签：c++

我正在尝试将模板应用到原始类程序中。但是我得到了不能将'Move'转换为'int'的错误作为回报。请帮忙....

这是模板。错误在第 40 行

```
#ifndef MOVE0_H_  
#define MOVE0_H_
template <typename Type>

class Move
{
    private:
        double x;
        double y;
    public:
        Move(double a = 0, double b = 0); // sets x, y to a, b
        void showmove() const; // shows current x, y values
        int add(const Move & m) const;
        // this function adds x of m to x of invoking object to get new x,
        // adds y of m to y of invoking object to get new y, creates a new
        // move object initialized to new x, y values and returns it
        void reset(double a = 0, double b = 0); // resets x,y to a, b
};

template<typename Type>
Move<Type>::Move(double a, double b)
{
    x = a;
    y = b;
}

template<typename Type>
void Move<Type>::showmove() const
{
    std::cout << "x = " << x << ", y = " << y;
}

template<typename Type> 
int Move<Type>::add(const Move &m) const
{
    Move temp;
    temp.x = x + m.x;
    temp.y = y + m.y;

    return temp;
}

template<typename Type>
void Move<Type>::reset(double a, double b)
{
    x = 0;
    y = 0;
}
#endif 
```

下面是主程序，程序在第23行

```
#include <iostream>
#include <string>
#include "move0.h"

int main()
{
    using namespace std;
    Move<int> origin, obj(0, 0);
    int temp;
    char ans='y';
    int x, y;

    cout<<"Origianl point: ";
    origin.reset(1,1);
    origin.showmove();
    cout<<endl;
    while ((ans!='q') and (ans!='Q'))
    {
          cout<<"Please enter the value to move x: ";
          cin>>x;
          cout<<"Please enter the value to move y: ";
          cin>>y; 
          obj= obj.add(temp);
          obj.showmove();
          cout<<endl;
          cout<<"Do you want to continue? (q to quit, r to reset): ";
          cin>>ans;
          if ((ans=='r') or (ans=='R'))
             {
             obj.reset(0, 0);
             cout<<"Reset to origin: ";
             obj.showmove();
             cout<<endl;
             }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:41:24.343

好吧，我猜

```
int add(const Move & m) const; 
```

应该

```
Move add(const Move & m) const; 
```

同样地

```
template<typename Type> 
int Move<Type>::add(const Move &m) const 
```

应该

```
template<typename Type> 
Move<Type> Move<Type>::add(const Move &m) const 
```

从错误消息中似乎很清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T07:41:31.727

您的`add`成员函数返回 int：

```
int add(const Move & m) const; 
```

但是您正在返回一个`Move`对象：

```
template<typename Type> 
int Move<Type>::add(const Move &m) const
{
    Move temp;
    ...
    return temp;
} 
```

没有从`Move`到的转换`int`。您似乎很可能想要返回`Move`：

```
Move add(const Move & m) const; 
```

# hadoop - Hadoop 和 Hive 作为仓库：日常数据交付

> ID：16117968
> 
> 赞同：1
> 
> 时间：2013-04-20T07:40:46.967
> 
> 标签：hadoop, hive, hdfs, data-warehouse

我正在评估 hadoop 和 hive (& impala) 的组合作为大型数据仓库的替换。我已经设置了一个版本，并且在读取访问方面表现出色。

有人可以给我任何提示，应该使用什么概念来将日常数据传递到表格？我在 hive 中有一个基于我放入 hdfs 的文件的表。但是现在我每天都有新的事务数据进来。我如何将它们添加到 hive 中的表中。插入是不可能的。HDFS 不能追加。那么我需要遵循的一般概念是什么。

对文档的任何建议或指导表示赞赏。

最好的祝福！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:24:08.777

Hive 允许将数据附加到表中——这在 HDFS 中如何发生的底层实现并不重要。您可以执行许多附加数据的操作：

1.  `INSERT`- 您可以将行追加到现有表中。
2.  `INSERT OVERWRITE`- 如果您必须处理数据，您可以执行`INSERT OVERWRITE`重新写入表或分区。
3.  `LOAD DATA`- 您可以使用它向表中批量插入数据，并且可以选择使用`OVERWRITE`关键字清除任何现有数据。
4.  [对数据进行分区](http://www.brentozar.com/archive/2013/03/introduction-to-hive-partitioning/)。
5.  将数据加载到新表中并交换分区

如果您知道您将执行基于日期的搜索并让您能够在表或分区级别使用选项 1、2 和 3，那么分区非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T03:11:26.427

```
 Inserts are not possible 
```

插入是可能的，就像您可以创建一个新表并将数据从新表插入到旧表一样。

但简单的解决方案是您可以使用以下命令将文件[数据加载到 Hive 表中。](https://cwiki.apache.org/Hive/languagemanual-dml.html#LanguageManualDML-Loadingfilesintotables)

```
load data inpath '/filepath' [overwrite] into table tablename; 
```

如果您使用覆盖，那么只有现有数据用新数据替换，否则它只是附加。

您甚至可以通过创建 shell 脚本来安排脚本。

# java-me - 如何在 j2me 中将画布保存为图像？

> ID：16117974
> 
> 赞同：0
> 
> 时间：2013-04-20T07:41:39.463
> 
> 标签：java-me, nokia-s40

我想将画布的当前状态保存为图像，因为我将在下一个指针事件中使用它。如果我使用重绘，它将清除画布，我无法获得画布的先前状态。所以，我想将它保存为图像，然后一遍又一遍地迭代它，以便最终我可以找出我想要的东西。最后一个问题是如何将画布保存为图像？或者是否有可能将 Graphics 对象转换为字节数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:41:01.250

您无法将画布另存为图像。

您必须先创建图像，然后才能在该图像上绘画。

基本上这意味着您的 midlet 将做更多的工作，因为您首先必须在图像上绘制，然后必须将该图像绘制到画布上。但这是你可以做你想做的事情的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:22:45.797

创建一个[`Image`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html)具有相同大小（宽度和高度）的屏幕。当您要保存画布状态时调用[`Canvas.paint`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html#paint%28javax.microedition.lcdui.Graphics%29)传递图像`Graphics`。

```
class MyCanvas extends Canvas {
  private Image lastScreen;

  protected void sizeChanged(int w, int h) {
    if (lastScreen == null || w != lastScreen.getWidth()
        || h != lastScreen.getHeight) {
      lastScreen = Image.createImage(w, h);
    }
  }

  protected void paint(Graphics g) {
    // paint the whole screen
  }

  protected void pointerReleased(int x, int y) {
    paint(lastScreen.getGraphics());
  }
} 
```

# android - 如何从 Java 中的 HTML 代码中获取带有 javascript 代码的子字符串？

> ID：16117976
> 
> 赞同：1
> 
> 时间：2013-04-20T07:41:43.937
> 
> 标签：android, string, split, substring

我解析一个网页，需要获取滑块元素的最小值和最大值。我用 Jsoup 解析的所有页面，但是这个值我无法得到它..它们在 javascript 块中。

```
<script>
    $(function(){ $("#p_slider").slider({ range:true, step:1000, min:2000, max:49490.00, values:[2000,49490.00], slide:function(event, ui) {
    $("#p_from").val((ui.values[0] != 2000)?ui.values[0]:"");
    $("#p_to").val((ui.values[1] != 49490.00)?ui.values[1]:"");
    $("#p_from").change();
    $("#p_to").change();
} }); });
</script>
<script>
    $(function() { $("#filter_543_slider").slider({ range:true, step:1000, min:0, max:17600.000, values:[0,17600.000], slide:function(event, ui) {
                    $("#f543_from").val((ui.values[0] != 0)?ui.values[0]:"");
                    $("#f543_to").val((ui.values[1] != 17600.000)?ui.values[1]:"");
                    $("#f543_from").change();
                    $("#f543_to").change();
                } }); });
</script> 
```

我需要获取#p_slider 和#filter_543_slider 的最小值和最大值

现在我尝试使用此代码：

```
String min = bodyHTML.split("[$(\"#"+searchingIdent+"\").slider({]")[1].split("[min:]")[1].split(",")[0];
String max = bodyHTML.split("[$(\"#"+searchingIdent+"\").slider({]")[1].split("[max:]")[1].split(",")[0]; 
```

但我发现错误：err:length=1; 索引=1

而且这种分裂时间太长了.. +5-10秒

请告诉我如何正确快速地获得所需的子字符串。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:10:40.373

我建议使用正则表达式。我在这里为你写了这个：

```
\$\("#([a-z0-9_]+)"\)\.slider\([^\)]+min:([0-9\.]+)[^\)]+max:([0-9\.]+) 
```

这会检查一个 jquery 行，它需要一个 id（或更好的 # 符号），然后是一个滑块函数，其中参数 min 和 max 在里面。

也试试这个[提琴手](http://fiddle.re/ucej6)来检查我的结果。

第一个结果是 id，第二个是最小值，第三个是最大值。

# ios - 如何正确呈现视图控制器？

> ID：16117977
> 
> 赞同：1
> 
> 时间：2013-04-20T07:41:47.830
> 
> 标签：ios, uiviewcontroller, presentmodalviewcontroller, nsexception

我有一个非常简单的应用程序`UIViewControllers`（比如**VC_A**和**VC_B**）。每个屏幕都有一个按钮，允许切换到另一个屏幕（不`UINavigation`使用）。

应用程序安排一个本地通知，当它过期时，应该呈现另一个视图控制器（**VC_N** - 无论当前哪个屏幕处于活动状态）。

问题是有时应用程序会抛出：

```
'NSInternalInconsistencyException', reason: 'Attempting to begin a modal transition from  
<VC_A: 0x2021e0> to <VC_N: 0xf84b970> while a transition is already in progress. 

Wait for viewDidAppear/viewDidDisappear to know the current transition has completed' 
```

实现这种行为的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:58:24.097

A. 使用 UIViewController 的新 presentViewController:animated:completion 来呈现所有三个控制器，而不是旧的 modal 方法。

B. 创建一个布尔标志并将其初始化为 NO。

C. 在任何视图控制器演示之前，检查这个标志。如果是，设置为否。然后介绍VC。在完成块中，再次将标志设置为 YES。

D. 当呈现初始视图控制器（无论是 VC_A 还是 VC_B）时，应用程序应忽略此标志。

一个陷阱是，如果一个按钮被按下或本地通知过期，而视图控制器已经处于转换状态，那么新的 VC 将不会被呈现。如果需要，可以改进此逻辑以在之后呈现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:00:47.607

当计时器到期时，不要在该计时器处理程序方法中调用视图表示。而是尝试将视图演示调用放在单独的方法中并使用 [self performSelector: withObject: afterDelay:] 调用该方法（延迟可能为 0.1]。这应该在当前转换完成时完成视图演示。

# .net - 使用事件侦听器迭代 ListBox 的 Visual Basic

> ID：16117978
> 
> 赞同：3
> 
> 时间：2013-04-20T07:41:52.213
> 
> 标签：.net, vb.net

我有一个包含项目列表的列表框，我想知道如何创建一个处理程序，该处理程序可以在事件发生时迭代列表框。
我有以下代码将文件读入列表框。

```
Private Sub Load_File_To_ListBox(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Load_File_To_ListBox.Click
    Dim r As New IO.StreamReader("C:\Users\resu\Desktop\test.txt")
    While (r.Peek() > -1)
        lb1.Items.Add(r.ReadLine)
    End While
    r.Close()
End Sub 
```

这是我的事件处理程序代码：

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    TextBox1.Text = " "
    TextBox1.Text &= ListBox1.SelectedItems.Item(i).ToString
    i = i + 1
End Sub 
```

`i`被声明为全局变量以跟踪`ListBox`. 我想要的是从 中读取下一项`Listbox`并将其放入`TextBox`每当单击 Button2 时。

请帮助我修改我的代码以使其正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T10:27:35.237

如果我理解正确，您的问题在于以下代码行：

```
'This line of code looks at all of the items that have been 
'selected in the list box, and out of all of the selected 
'items it will select the item at index i.
TextBox1.Text &= ListBox1.SelectedItems.Item(i).ToString 
```

因为代码只查看***选定的项目***而不是***所有项目***，所以代码的行为与您预期的不同。相反，请使用以下代码行：

```
TextBox1.Text &= ListBox1.Items(i).ToString() 
```

# python - Python有序字典到常规字典

> ID：16117982
> 
> 赞同：3
> 
> 时间：2013-04-20T07:42:47.563
> 
> 标签：python

我有类似的东西

```
[('first', 1), ('second', 2), ('third', 3)] 
```

我想要一个内置函数来制作类似的东西

```
{'first': 1, 'second': 2, 'third': 3} 
```

有没有人知道一个内置的python函数提供它而不是有一个循环来处理它？

需要使用 python >= 2.6

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T07:43:25.170

[`dict`](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)可以获取元组列表并将它们转换为键值对。

```
>>> lst = [('first', 1), ('second', 2), ('third', 3)]
>>> dict(lst)
{'second': 2, 'third': 3, 'first': 1} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T07:43:45.400

只需申请`dict()`列表：

```
In [2]: dict([('first', 1), ('second', 2), ('third', 3)])
Out[2]: {'first': 1, 'second': 2, 'third': 3} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:12:38.587

不像`dict(my_list)`波动率的回答所提出的那样优雅/简单......

我还建议：

```
my_list = [('first', 1), ('second', 2), ('third', 3)]
my_dict = {k:v for k,v in my_list} 
```

当您必须从原始序列中过滤一些元素时，它会更有用。

```
my_list = [('first', 1), ('second', 2), ('third', 3)]
my_dict = {k:v for k,v in my_list if k!='third'} 
```

或者

```
my_dict = {k:v for k,v in my_list if test_value(v)} # test_value being a function return bool 
```

正如评论所说，它仅适用于 python >= 2.7

# javascript - Javascript 鼠标悬停元素闪烁和未捕获的类型错误

> ID：16117984
> 
> 赞同：0
> 
> 时间：2013-04-20T07:43:02.083
> 
> 标签：javascript, html, dom, addeventlistener

我正在尝试使用 javaScript mouseover 和 mousout 函数从 DOM 中获取元素。从那个 event.target 获取子元素并将样式添加到与指定类名匹配的 childNode。

正在发生的问题：

错误：**未捕获的类型错误：无法读取未定义的属性“样式”**

显示的类闪烁。即使在鼠标中移动鼠标时，也会在当前 DOM 元素上。

我试图通过标签名称和childNodes过滤来获取元素，以便statemant应用css，但仍然存在问题

它可能是一个简单的修复，但我感到困惑。

任何帮助都会很棒。

**的HTML**

```
<!doctype HTML>
<html>
<head>
    <title>Gmail Label List</title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="func.js"></script>
</head>
<body>
    <div id="sideBar-left">
        <div class="SbInner-body">
            <ul id="label-list">
                <li class="lb_li">
                    <div class="lb-title">Label List 1</div>
                    <div class="lb-a-icon">
                        <img src="chevron_expand.png">
                    </div>
                </li>
                <li class="lb_li">
                    <div class="lb-title">Label List 1</div>
                    <div class="lb-a-icon">
                        <img src="chevron_expand.png">
                    </div>
                </li>
                <li class="lb_li">
                    <div class="lb-title">Label List 1</div>
                    <div class="lb-a-icon">
                        <img src="chevron_expand.png">
                    </div>
                </li>
                <li class="lb_li">
                    <div class="lb-title">Label List 1</div>
                    <div class="lb-a-icon">
                        <img src="chevron_expand.png">
                    </div>
                </li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

**CSS**

```
body

{
    background-color: #f0f0f0;
}

div#sideBar-left{
    position:relative;
    float:left;
    width:180px;
}

div.SbInner-body{}
 ul#label-list{
    background-color: #898989;
    width:auto;
    height:auto;
    overflow: hidden;
}
ul#label-list li {
    list-style: none;
    cursor:pointer;
    background-color: #989898;
    width:100%;
    height:auto;
    overflow: hidden;
}
div.lb-title{
    position:relative;
    float:left;
    height:auto;
    width:auto;
    padding:5px;
}

div.lb-a-icon{
    position:relative;
    float:right;
    height:15px;
    padding:10px;
    width:16px;
    border:1px solid black;
    display: none;
} 
```

**JS**

```
function showLabel_icon(element)
{
        element.target.getElementsByClassName('lb-a-icon')[0].style.display="block";
}

function closeLabel_icon(element)
{
        element.target.getElementsByClassName('lb-a-icon')[0].style.display="none";
}

//[ Listeners]
function Add_DOM_listeners(){
    if(window.addEventListener){
        var lb = document.getElementById('label-list')
        var lb_child = lb.getElementsByClassName('lb_li');
        for(var i = 0; i < lb_child.length; i++){
            lb_child[i].addEventListener('mouseover',showLabel_icon, false);
        }// end for

        var lc = document.getElementById('label-list')
        var lc_child = lc.getElementsByClassName('lb_li');
        for(var j = 0; j < lc_child.length; j++){
            lc_child[j].addEventListener('mouseout',closeLabel_icon, false);
        }// end for

    }// end if 
}//end function

window.onload = function(){
    Add_DOM_listeners();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:20:29.403

## 建议的解决方案

我认为，除非问题中没有描述其他逻辑，否则整个 JavaScript 部分都可以替换为以下 CSS 声明：

```
/* By default the icon is not rendered: */
.lb-a-icon {
    display: none;
}
/* When <li> is hovered, its icon child is displayed: */
.lb_li:hover .lb-a-icon {
    display: block;
} 
```

演示：http: [//jsfiddle.net/CHTKM/](http://jsfiddle.net/CHTKM/)

你也可以玩弄`visibility: hidden;`和`visibility: visible;`

## 类型错误的原因

`event.target`引用光标指向的元素。假设您将事件侦听器添加到`<li>`具有以下 HTML 结构的您的...

```
<li class="lb_li">
    <div class="lb-title">Label List 1</div>
    <div class="lb-a-icon">
        <img src="chevron_expand.png">
    </div>
</li> 
```

现在，当您将鼠标悬停在`<li>`内容`event.target`上时，例如，可以指向`<div class="lb-title">Label List 1</div>`没有任何具有`lb-a-icon`类的元素。尝试获取那些不存在的元素会导致`undefined`显然没有`style`属性，因此会引发错误。

要解决这个问题，您可以使用`this`（但不是在 IE6-8 中！），它引用了添加事件侦听器的元素。

```
function showLabel_icon() {
    // In this particular case "this" is <li class="lb_li">
    this.getElementsByClassName('lb-a-icon')[0].style.display = 'block';
} 
```

## JavaScript 建议

如果你想坚持使用 JavaScript，而不是：

```
window.onload = function () {
    Add_DOM_listeners();
} 
```

最好这样写：

```
window.addEventListener('load', add_DOM_listeners); 
```

这样做，您将不会有创建附加函数的开销。您还将避免无意中覆盖`onload`页面上存在的任何其他侦听器。

此外，您的`Add_DOM_listeners`功能可以简化为以下内容：

```
function Add_DOM_listeners() {
    var labelList = document.getElementById('label-list'),
        labelChildren = labelList.getElementsByClassName('lb_li'),
        ii = labelChildren.length,
        i;

    for (i = 0; i < ii; i += 1) {
        labelChildren[i].addEventListener('mouseover', showLabel_icon);
        labelChildren[i].addEventListener('mouseout', closeLabel_icon);
    }
} 
```

## 兼容性

当然，对于 IE6-8，您需要`attachEvent`和`window.event.srcElement`.

# javascript - 如果不使用 JavaScript 中的 parseFloat，则无法正确添加两个数字

> ID：16117985
> 
> 赞同：3
> 
> 时间：2013-04-20T07:43:11.070
> 
> 标签：javascript, jquery, add

我遇到了这个问题。它使用 parseFloat 或 parseInt 添加数字。如果 textbox1 值为 4 并且 textbox2 值为 2 然后我得到输出（见脚本）

我的疑问是为什么**另外**单独

> `parseFloat($('#txt1').val()) + parseFloat($('#txt2').val())`

给出正确的值但

> `parseFloat($('#txt1').val() + $('#txt2').val())`

没有给出正确的值，而

*   `parseFloat($('#txt1').val() - $('#txt2').val())`,
*   `parseFloat($('#txt1').val() / $('#txt2').val())`,
*   `parseFloat($('#txt1').val() * $('#txt2').val())`

给出正确的值。它很简单，但我找不到解决方案。

=====jQuery

```
 function Calculate() {                                              //--> Output
     $('#lbl1').html(parseFloat($('#txt1').val() + $('#txt2').val())); //--> 42
     $('#lbl2').html(parseFloat($('#txt1').val()) + parseFloat($('#txt2').val())); //--> 6
     $('#lbl3').html(parseFloat(4 + 2));                               //--> 6

     $('#lbl4').html(parseFloat($('#txt1').val() - $('#txt2').val())); //--> 2
     $('#lbl5').html(parseFloat($('#txt1').val() * $('#txt2').val())); //--> 8
     $('#lbl6').html(parseFloat($('#txt1').val() / $('#txt2').val())); //--> 2
  } 
```

=====HTML

```
<table>
        <tr>
            <td>
                <input type="text" id="txt1" />
            </td>
            <td>
                <input type="text" id="txt2" />
            </td>
        </tr>
        <tr>
            <td>
                <input type="button" value="Calculate"  onclick="Calculate()" />
            </td>
            <td>
                <label id="lbl1">
                </label>
                |
                <label id="lbl2">
                </label>
                |
                <label id="lbl3">
                </label>
                |
                <label id="lbl4">
                </label>
                |
                <label id="lbl5">
                </label>
                |
                <label id="lbl6">
                </label>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T07:47:33.833

`$.val()` returns a string value.

So in your first example you convert both returned strings to numbers and the calculation is fine.

If you use `parseFloat($('#txt1').val() + $('#txt2').val())` the `+` does not work as the arithmetic operator, but as a string concatenation. So you concatenate both strings and convert them afterwards, which gives a wrong result.

The examples using `-` will work, as there is no string operation using `-` and by thus alls values get implicitly converted to a number *before* the operation is applied.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:45:42.510

`$('#txt1').val() + $('#txt2').val()` it gives String value

you can not use - , * , /operator on strings

`parseFloat($('#txt1').val()), parseFloat($('#txt2').val())` returns numbers not strings

# linux - linux中的数据包jpeg优化

> ID：16117988
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:43:33.737
> 
> 标签：linux, find, sh

我的服务器上有许多 JPEG 图像，它们每天都在添加。我需要优化这些图像。

为了优化它，我使用了下一个命令

```
find . -iname "*.jpg" -exec jpegoptim -m85 --strip-all {} \; 
```

但是 find 命令会查找所有图像，而不仅仅是新图像！我知道，我可以指定 -ctime 和 -mtime 参数，但是当 jpegoptim 优化图像时，图像创建时间会更改为现在！因此我无法为 find 命令指定最后一次修改时间。

我认为，该解决方案是将已处理的文件名保存在文本文件中，并在 find 命令再次运行时排除已处理的文件。

我怎样才能做到这一点？如何在文本文件中添加找到的文件名，以及如何检查下一个路径中文本文件中的文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:15:41.963

您可以使用`inotifywait`inotify [-tools](https://github.com/rvoicilas/inotify-tools)（或其他一些`inotify`前端）来持续监控包含 jpeg 的文件夹，并在上传后立即对其进行转换。

```
$ inotifywait -mrq --format '%w%f' -e create . | while read file; do
      [ "${file##*.}" = "jpg" ] || continue;
      [ -f "${file}" ] || continue;
      echo "jpegoptim -m85 --strip-all '$file'";
  done 
```

`-e create .`这会以递归方式 ( ) 监视当前文件夹 ( ) 中的所有文件创建，`-r`并且您必须自己检查文件扩展名 ( `.jpg`)，如图所示，这意味着如果同一文件夹中有大量非 jpeg 创建，这是不必要的开销。如果这对您来说是个问题，您可以使用该`--exclude`参数并指定一个否定的正则表达式来过滤掉与所需扩展名不匹配的文件（这很麻烦并且看起来不是很好和直接），或者您可以检查当前来自 git repo 的版本，它提供了一个`--include`过滤器（`v3.14`没有它）并且`inotifywait`只有报告文件已经符合您的条件。

另请注意，这将静默跳过文件名中带有换行符的文件。

# python - Django Queryset 按order_by 和relatedManager 排序

> ID：16117997
> 
> 赞同：1
> 
> 时间：2013-04-20T07:44:44.530
> 
> 标签：python, database, django, django-related-manager

我正在尝试对对象进行排序。这是我的代码：

```
ratings = Rate.objects.order_by(sortid)
locations = Location.objects.filter(locations_rate__in=ratings).order_by('locations_rate').distinct('id') 
```

这是我的模型：

```
class Rate(models.Model):
  von_location= models.ForeignKey(Location,related_name="locations_rate")
  price_leistung = models.IntegerField(max_length=5,default=00)
  bewertung = models.IntegerField(max_length=3,default=00) 
```

我怎样才能以等于的顺序获得所有位置`ratings`？

我上面的东西不起作用。
**编辑**：

```
def sort(request):
  sortid = request.GET.get('sortid')
  ratings = Rate.objects.all()
  locations = Location.objects.filter(locations_rate__in=ratings).order_by('locations_rate__%s' % sortid).distinct('id')
  if request.is_ajax():
    template = 'resultpart.html'
    return render_to_response(template,{'locs':locations},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:54:29.437

您必须指定用于对`Rate`对象进行排序的字段，例如：

```
ratings = Rate.objects.all()
locations = Location.objects.filter(
    locations_rate__in=ratings
).order_by('locations_rate__%s' % sortid).distinct('id') 
```

您不需要`ratings`事先排序。

该[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.order_by)提供了`order_by`在相关字段上使用的示例。

# css - jQuery 模态高度太小

> ID：16117999
> 
> 赞同：-1
> 
> 时间：2013-04-20T07:45:15.877
> 
> 标签：css, jquery-ui, height

我有一个弹出的对话框`$(document).ready(function() {`，它用`modal : true`.

```
 $(function () {
            $("#dialog").dialog({
                show: { effect: 'drop', direction: "up" },
                hide: "explode",
                modal: true,
                draggable: false,
                resizable: false
            });
        }); 
```

问题是当`$(document).ready(function() {`触发时，页面中的所有图像可能都没有加载。

它导致叠加层的高度小于页面的实际高度。

（例如：）您有一个包含 2 张图片（高度为 100 像素）的页面。触发时`$(document).ready(function() {`，您的高度为 800 像素，然后覆盖层出现，高度为 800 像素。之后，当图像有时间加载时，你有一个 1000px 的页面......所以如果我向下滚动，底部有 200px 未被覆盖层阻挡。

* * *

我想要做的是，什么时候`$(window).load(function() {`会触发（所以一切都会被加载）**，如果对话框当然没有关闭，刷新覆盖的高度**。

我注意到，一旦加载了所有图像，如果我缩放 +/- 或如果我打开 Chrome 的开发人员工具，它会刷新覆盖高度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:17:55.503

我修复了它，我想知道是否有更有效的方法来做到这一点..

```
 $(function () {
        $("#dialog").dialog({
            show: { effect: 'drop', direction: "up" },
            hide: "explode",
            modal: true,
            draggable: false,
            resizable: false
        });
    });

    $(window).load(function() {
        $(window).resize();
    }); 
```

所以我弹出对话框，然后在加载图像时，我只是刷新大小..