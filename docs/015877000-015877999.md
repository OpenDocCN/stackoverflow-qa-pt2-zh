# StackOverflow 问答 15877000-15877999

# android - 如何通过意图传递警报对话框

> ID：15877003
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:37:55.640
> 
> 标签：android, android-intent, android-alertdialog

我有一个登录页面。当用户正确登录时，我想显示一个警告对话框，说明您的登录详细信息已经过验证。单击继续继续。现在我希望在登录后的下一个活动页面上显示此警告对话框.请在这里帮帮我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:55:49.807

将 Activity 更改为您当前的课程并实施它确保工作......

声明这个

```
SharedPreferences my_preferences; 
```

在创建方法中

```
 this.my_preferences = PreferenceManager
            .getDefaultSharedPreferences(this); 
```

////////登录完成后

```
if (SaveOn_preferences.getBoolean("Login", true)) {

SharedPreferences.Editor editor = my_preferences.edit();

 editor.putBoolean("Login", false);
 editor.commit();

 AlertDialog.Builder builder = new Builder(Activity.this);
    builder.setTitle("Attention!");
    builder.setMessage("your login details have been verified");
    builder.setPositiveButton("continue", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
//continue activity here....

        }
    });
    builder.setNeutralButton("No", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();

    //cancel activity here      

        }
    });
    builder.create().show(); 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:59:44.177

您不需要将警报对话框从一项活动传递到另一项活动。这是错的。您只需使用 Intent 的 Extras 传递您想传递的任何信息。现在，在第二个活动中，您只需创建警报对话框并将信息传递给它。就是这样，伙计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:39:38.690

不要通过`Dialog`- 这是错误的。传递信息，以便下一个活动知道它将显示该对话框。将您想要的内容放入您`Intent`的附加内容中，下一个活动将检查这些数据是否存在并按照您的意愿行事。

# ember.js - 将 grunt 把手与 ember 一起使用，将模板拆分为单独的文件

> ID：15877005
> 
> 赞同：6
> 
> 时间：2013-04-08T10:38:03.777
> 
> 标签：ember.js, handlebars.js, gruntjs

我正在尝试将我的 ember.js 车把模板拆分为多个文件，以使代码库更易于管理。

由于我们使用的是 yeoman/grunt，所以我遇到了[这个车把插件](https://npmjs.org/package/grunt-contrib-handlebars)。我已将其配置如下：

```
 handlebars: {
        compile: {
            options: {
                namespace: 'JST'
            },
            files: {
                '<%= yeoman.dist %>/scripts/templates.js': [
                    '<%= yeoman.app %>/templates/*.hbs'
                ],
            }
        }
    } 
```

正如插件的“使用示例”部分中所建议的那样。这按预期工作，生成一个`dist/scripts/templates.js`文件。但是将模板放在“JST”命名空间中会使 Ember 无法再访问它们。这是我得到的错误：

```
Uncaught Error: assertion failed: You specified the templateName application for <App.ApplicationView:ember312>, but it did not exist. 
```

一些问题：

*   如何“初始化”现在位于 中的车把模板，`templates.js`以便 Ember 可以找到它们？
*   我如何告诉 ember 在 DOM 中放置模板的位置，因为模板现在不在文档正文中？

这是我的 index.html：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title></title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width"/>

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/bootstrap.min.css"/>
    <link rel="stylesheet" href="styles/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="styles/font-styles.css"/>
    <link rel="stylesheet" href="styles/main.css"/>
    <!-- endbuild -->

  </head>
  <body>

    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->

    <!-- Add your site or application content here -->

    <!-- My templates used to be here, but now they are in templates.js -->

      <div class="pagination">
          <ul>
              <li><a href="#">Prev</a></li>
              <li><a href="#">1</a></li>
              <li><a href="#">2</a></li>
              <li><a href="#">3</a></li>
              <li><a href="#">4</a></li>
              <li><a href="#">Next</a></li>
          </ul>
      </div>
    </script>

    <!-- build:js scripts/scripts.js -->
    <script src="scripts/vendor/jquery-1.9.1.js"></script>
    <script src="scripts/vendor/handlebars.1.0.rc.3.js"></script>
    <script src="scripts/vendor/ember-1.0.0-rc.2.js"></script>
    <script src="scripts/vendor/ember-data.js"></script>
    <script src="scripts/vendor/bootstrap.min.js"></script>
    <script src="scripts/templates.js"></script>
    <script src="scripts/main.js"></script>
    <!-- endbuild -->

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T12:30:13.557

> 由于我们使用的是 yeoman/grunt，所以我遇到了这个车把插件。

这就是让你绊倒的原因。您正在尝试使用[grunt-contrib-handlebars](https://github.com/gruntjs/grunt-contrib-handlebars)插件，结果编译的模板没有被添加到`Ember.TEMPLATES`. 可以进行配置`grunt-contrib-handlebars`以实现这一点，但它可能更容易使用 (grunt-ember-templates)[ [https://github.com/dgeb/grunt-ember-templates]](https://github.com/dgeb/grunt-ember-templates])。

请参阅[Ember.js 如何引用 Grunt.js 预编译的 Handlebars 模板？](https://stackoverflow.com/questions/15607008/how-does-ember-js-reference-grunt-js-precompiled-handlebars-templates)了解更多详情

> 我怎样才能“初始化”把手模板，它们是正确的，也不在templates.js中，以便Ember可以找到它们？

Ember 不关心事情是如何进入 Ember.TEMPLATES 的。您可以手动添加/删除模板。例如：

```
Ember.TEMPLATES['myFunkyTemplate'] = Ember.Handlebars.compile('Hello {{personName}}'); 
```

> 我如何告诉 ember 在 DOM 中放置模板的位置，因为模板现在不在文档正文中？

不管你的模板来自哪里，所有的 ember 都会看到模板的 id。模板将`application.hbs`被渲染到应用程序的根元素（默认为 document.body），所有其他模板通过视图助手等渲染到 ​​outlet。

# java - StringBuilder 子字符串和反向 - Java

> ID：15877007
> 
> 赞同：3
> 
> 时间：2013-04-08T10:38:09.877
> 
> 标签：java

谁能帮我写一个Java方法，它接受一个字符串的子字符串，反转它并打印结果？

我猜 StringBuilder 比 String 好，但我的问题是 StringBuilder.substring() 返回一个字符串。要继续使用 StringBuilder，我需要创建一个新的 StringBuilder 对象来执行 StringBuilder.reverse() 部分。

有人对此有更好的解决方案吗？

```
 public static void main(String[] args) {
    StringBuilder sb = new StringBuilder("abcdefgh");

    sb = new StringBuilder(sb.subSequence(2, 5));

    sb.reverse(); 
    System.out.println(sb.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:39:37.900

你可以用这个

```
public String reverseString(String normalString) {
   StringBuilder sb = new StringBuilder();
   for(int i = normalString.length() - 1; i >= 0; --i)
     sb.append(normalString.charAt(i));
   return sb.toString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:17:22.777

你可以尝试这样的事情：

```
String s = "Achintya";
List<String> myList = new ArrayList<String>(Arrays.asList(s.split("")));
Collections.sort(myList, Collections.reverseOrder());
System.out.println(myList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T15:11:46.343

你的回答已经足够好了。如果您想使用子字符串方法，这也可以，

```
public static void main(String[] args) 
{
StringBuilder revWord = new StringBuilder("abcdefgh".substring(2,5));
revWord.reverse(); 
System.out.println(revWord);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:06:53.653

如果您希望用户输入非反转字符串的`start`和索引，您可以通过重新映射索引值轻松实现此目的。`end`

`StringBuilder`以下是您要求的 1 的工作示例：

```
public static void main(String[] args) {
    final StringBuilder sb = new StringBuilder("abcdefgh");
    final int startIndex = 2;
    final int endIndex = 5;

    sb.reverse();
    final String output = substring(sb.toString(), startIndex, endIndex);
    System.out.println("Result: " + output);
}

//Retrieve the substring of a reversed string
private static String substring(String input, int start, int end) {
    start = map(start, 0, input.length(), input.length(), 0);
    end = map(end, 0, input.length(), input.length(), 0);

    String substring = input.substring(end, start);
    return substring;
}

//Map value from the min,max range, to the new minRange-maxRange range.
private static int map(float value, float min, float max, float minRange, float maxRange) {
    return Math.round(minRange + (maxRange - minRange) * ((value - min) / (max - min)));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T00:06:36.513

只需反转您的操作：

```
StringBuilder sb2 = new StringBuilder("abcdefgh");
sb2.reverse();
System.out.println(sb2.subSequence(sb2.length()-5, sb2.length()-2)); 
```

# windows-phone-7 - 如何在点击省略号之前隐藏应用程序栏上的图标

> ID：15877011
> 
> 赞同：0
> 
> 时间：2013-04-08T10:38:30.220
> 
> 标签：windows-phone-7

始终显示一组图标很容易，然后当我们点击省略号时，我们将同时看到图标和其他菜单项。在单击省略号之前，我们如何才能不显示任何内容？[开发中心应用程序](http://www.windowsphone.com/en-gb/store/app/dev-center/2d3063c2-4b29-4e69-9c03-50b67b0e6aec)会执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:31:25.270

检查这些属性：

[MiniSize](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.applicationbar.minisize%28v=vs.105%29.aspx)：当 Mode 属性设置为 Minimized 时，获取应用程序栏延伸到页面中的距离。

[Mode](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.applicationbar.mode%28v=vs.105%29.aspx)获取或设置应用程序栏的大小。

# jquery - 在渲染之前使用jquery隐藏表格行

> ID：15877014
> 
> 赞同：0
> 
> 时间：2013-04-08T10:38:43.300
> 
> 标签：jquery

我知道“ $( document).ready ”在导航器加载页面上的所有内容后触发。我的目标是在页面中呈现一个大表格，并在第一个“n-th”之后隐藏每一行。所以，**¿我怎样才能在渲染之前触发一个 JQuery 实例，以避免“闪烁”表格和页面的滚动？**

我知道我可以首先将表格的样式显示为“可见：无”，但这首先不是“有效”的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:47:02.140

您通常无法在**客户**端执行此操作。JQuery 仅适用于 DOM 中可用的对象（或将来可用 - 在初始文档加载后）。

我在这里看到两个选项：
a.）**限制服务器端的记录数量**
b.）按照 Bogieman 所说的做（加载它们隐藏并稍后显示）=> 这对我来说听起来不太好，因为您可能正在加载大量数据（一般）。

如果我正确理解了您的问题:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T10:42:16.317

$(文档).load(); 可能是你要找的，这发生在 $(document).ready(); 之前 它应该在元素被渲染之前发生。

如果这不起作用，您可能需要查看要加载的 ajax 调用，然后在页面加载后呈现表格。

# php - 已发送 Http 标头

> ID：15877022
> 
> 赞同：-2
> 
> 时间：2013-04-08T10:39:23.063
> 
> 标签：php, facebook, html

所以我正在制作一个用户使用 facebook 登录的网页。如果用户已经登录，则页面重定向到另一个页面。但是最近我遇到了著名的 http headers already sent 错误。现在通常我知道如何解决这个问题，但我无法在我的文件中找到错误。以下是页面：

完整错误：

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/streetst/public_html/scripts/fb/fbaccess.php:1) in /home/streetst/public_html/scripts/fb/src/facebook.php on line 49 
```

索引.php

```
<?php include 'scripts/fb/fbaccess.php'; ?>
<!DOCTYPE HTML>
<html>
    <head>
        <title>Streetstash - Streetwear, Accessories & Skateboarding, samlet på et sted</title>
        <link rel="stylesheet" type="text/css" href="stylesheet.css">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>

        <meta name='description' content='Alle dine yndlings butikker, tøj, accessories og skateboarding samlet på et sted.' />
        <meta charset="utf-8">

        <?php if($_GET['welcome']=='no'){?>
            <script language="javascript">
                window.location.href = "scripts/log_user.php"
            </headersalreadscript>
        <?php } ?>

        <script>
            $(document).ready(function() {
                $('h1.title').fadeIn(1500);
                $('h3.subtitle').delay(1500).fadeIn(2000);

                setTimeout(function() {
                    $('html, body').animate({ 
                        scrollTop: $('div.sub-body').offset().top 
                    }, 2000);
                }, 4000);
            });
        </script>
    </head>

    <body>
        <div class='content'>
            <div class='head'>
            </div>
            <div class='body'>
                <h1 class='title'>Streetstash</h1><br>
                <h3 class='subtitle'>Streetwear, Accessories & Skateboarding</h3>
                <div class='sub-body'>
                    <div class='title'><h2 class='title'>Streetstash</h2><br><h3 class='subsubtitle'>Streetwear, Accessories & Skateboarding</h3></div>
                    <div class='table'>
                        <div class='table_left'>
                            <h2>Hvad er det?</h2>
                            <p>Streetstash er en ny måde at handle tøj, accessories og skateboarding varer på internettet.<br><br>Streetstash samler alle de butikker du normalt handler på over internettet på et sted og tilbyder en platform, hvor du nemt og hurtigt kan finde de bedste tilbud på dine favorit varer.</p>
                        </div>
                        <div class='table_right'>
                            <h2>Tilmeld</h2>
                            <p>Støt projektet, tilmeld dig forud og modtag nyheder, opdateringer og vær klar til at shoppe de fedeste varer så snart vi åbner.</p><br>
                            <?php
                                if($user_info == null){
                                    echo '<a href="'.$loginUrl.'"><img src="resources/img/fb_button.png"></a>';
                                }else{
                                    echo '<p class="success">Tak for tilmeldingen '.$user_info['first_name'].'!</p>';
                                }
                            ?>
                        </div>
                    </div>
                    <div class='vertline'>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

/scripts/log_user.php

```
<?php
    include 'fb/fbaccess.php';
    include 'db_connect.php';

    $check_query = mysql_query('SELECT * FROM users WHERE user_id = '.$user_info['id'].'');
    $check_user_existence = mysql_num_rows($check_query);
    echo $check_user_existence;
    if($check_user_existence == 1){
        echo 'User already exists';
    }else{
        mysql_query("INSERT INTO users (id, first_name, last_name, user_id, email) VALUES (NULL, '$user_info[first_name]', '$user_info[last_name]', '$user_info[id]', '$user_info[email]')") or die(mysql_error);
    }

    echo "
        <script type='text/javascript'>
        <!--
            window.location = '../../index.php'
        //-->
        </script>
    ";
?> 
```

/scripts/fb/fbaccess.php

```
<?php
//Application Configurations
$app_id     = "265869100216640";
$app_secret = "47a0c95c974f6bab011824549e196bd2";
$site_url   = "http://streetstash.dk/index.php?welcome=no";

try{
    include_once "src/facebook.php";
}catch(Exception $e){
    error_log($e);
}

// Create our application instance
$facebook = new Facebook(array(
    'appId'     => $app_id,
    'secret'    => $app_secret,
    ));

// Get User ID
$user = $facebook->getUser();
// We may or may not have this data based
// on whether the user is logged in.
// If we have a $user id here, it means we know
// the user is logged into
// Facebook, but we don’t know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if($user){
//==================== Single query method ======================================
    try{
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    }catch(FacebookApiException $e){
        error_log($e);
        $user = NULL;
    }
//==================== Single query method ends =================================
}

if($user){
    // Get logout URL
    $logoutUrl = $facebook->getLogoutUrl();
}else{
    // Get login URL
    $loginUrl = $facebook->getLoginUrl(array(
        'scope'     => 'email, publish_stream, publish_actions, read_friendlists, user_location',
        'redirect_uri'  => $site_url,
        ));
}

if($user){
    // Proceed knowing you have a logged in user who has a valid session.

//========= Batch requests over the Facebook Graph API using the PHP-SDK ========
    // Save your method calls into an array
    $queries = array(
        array('method' => 'GET', 'relative_url' => '/'.$user),
        array('method' => 'GET', 'relative_url' => '/'.$user.'/friends'),
        );

    // POST your queries to the batch endpoint on the graph.
    try{
        $batchResponse = $facebook->api('?batch='.json_encode($queries), 'POST');
    }catch(Exception $o){
        error_log($o);
    }

    //Return values are indexed in order of the original array, content is in ['body'] as a JSON
    //string. Decode for use as a PHP array.
    $user_info      = json_decode($batchResponse[0]['body'], TRUE);
    $friends_list   = json_decode($batchResponse[1]['body'], TRUE);
//========= Batch requests over the Facebook Graph API using the PHP-SDK ends =====
}
?> 
```

/scripts/fb/src/facebook.php

```
<?php
/**
 * Copyright 2011 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License. You may obtain
 * a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */

require_once "base_facebook.php";

/**
 * Extends the BaseFacebook class with the intent of using
 * PHP sessions to store user ids and access tokens.
 */
class Facebook extends BaseFacebook
{
  const FBSS_COOKIE_NAME = 'fbss';

  // We can set this to a high number because the main session
  // expiration will trump this.
  const FBSS_COOKIE_EXPIRE = 31556926; // 1 year

  // Stores the shared session ID if one is set.
  protected $sharedSessionID;

  /**
   * Identical to the parent constructor, except that
   * we start a PHP session to store the user ID and
   * access token if during the course of execution
   * we discover them.
   *
   * @param Array $config the application configuration. Additionally
   * accepts "sharedSession" as a boolean to turn on a secondary
   * cookie for environments with a shared session (that is, your app
   * shares the domain with other apps).
   * @see BaseFacebook::__construct in facebook.php
   */
  public function __construct($config) {
    if (!session_id()) {
      session_start();
    }
    parent::__construct($config);
    if (!empty($config['sharedSession'])) {
      $this->initSharedSession();
    }
  }

  protected static $kSupportedKeys =
    array('state', 'code', 'access_token', 'user_id');

  protected function initSharedSession() {
    $cookie_name = $this->getSharedSessionCookieName();
    if (isset($_COOKIE[$cookie_name])) {
      $data = $this->parseSignedRequest($_COOKIE[$cookie_name]);
      if ($data && !empty($data['domain']) &&
          self::isAllowedDomain($this->getHttpHost(), $data['domain'])) {
        // good case
        $this->sharedSessionID = $data['id'];
        return;
      }
      // ignoring potentially unreachable data
    }
    // evil/corrupt/missing case
    $base_domain = $this->getBaseDomain();
    $this->sharedSessionID = md5(uniqid(mt_rand(), true));
    $cookie_value = $this->makeSignedRequest(
      array(
        'domain' => $base_domain,
        'id' => $this->sharedSessionID,
      )
    );
    $_COOKIE[$cookie_name] = $cookie_value;
    if (!headers_sent()) {
      $expire = time() + self::FBSS_COOKIE_EXPIRE;
      setcookie($cookie_name, $cookie_value, $expire, '/', '.'.$base_domain);
    } else {
      // @codeCoverageIgnoreStart
      self::errorLog(
        'Shared session ID cookie could not be set! You must ensure you '.
        'create the Facebook instance before headers have been sent. This '.
        'will cause authentication issues after the first request.'
      );
      // @codeCoverageIgnoreEnd
    }
  }

  /**
   * Provides the implementations of the inherited abstract
   * methods.  The implementation uses PHP sessions to maintain
   * a store for authorization codes, user ids, CSRF states, and
   * access tokens.
   */
  protected function setPersistentData($key, $value) {
    if (!in_array($key, self::$kSupportedKeys)) {
      self::errorLog('Unsupported key passed to setPersistentData.');
      return;
    }

    $session_var_name = $this->constructSessionVariableName($key);
    $_SESSION[$session_var_name] = $value;
  }

  protected function getPersistentData($key, $default = false) {
    if (!in_array($key, self::$kSupportedKeys)) {
      self::errorLog('Unsupported key passed to getPersistentData.');
      return $default;
    }

    $session_var_name = $this->constructSessionVariableName($key);
    return isset($_SESSION[$session_var_name]) ?
      $_SESSION[$session_var_name] : $default;
  }

  protected function clearPersistentData($key) {
    if (!in_array($key, self::$kSupportedKeys)) {
      self::errorLog('Unsupported key passed to clearPersistentData.');
      return;
    }

    $session_var_name = $this->constructSessionVariableName($key);
    unset($_SESSION[$session_var_name]);
  }

  protected function clearAllPersistentData() {
    foreach (self::$kSupportedKeys as $key) {
      $this->clearPersistentData($key);
    }
    if ($this->sharedSessionID) {
      $this->deleteSharedSessionCookie();
    }
  }

  protected function deleteSharedSessionCookie() {
    $cookie_name = $this->getSharedSessionCookieName();
    unset($_COOKIE[$cookie_name]);
    $base_domain = $this->getBaseDomain();
    setcookie($cookie_name, '', 1, '/', '.'.$base_domain);
  }

  protected function getSharedSessionCookieName() {
    return self::FBSS_COOKIE_NAME . '_' . $this->getAppId();
  }

  protected function constructSessionVariableName($key) {
    $parts = array('fb', $this->getAppId(), $key);
    if ($this->sharedSessionID) {
      array_unshift($parts, $this->sharedSessionID);
    }
    return implode('_', $parts);
  }
} 
```

真的需要这个指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:18:33.363

尝试打开`Output Buffering`使用`ob_start()`

# ios - APNS：证书被吊销

> ID：15877023
> 
> 赞同：0
> 
> 时间：2013-04-08T10:39:23.867
> 
> 标签：ios, asp.net, certificate, apple-push-notifications, mmc

当新文档上传到服务器时，我的 iPad 应用程序使用 ASP.Net 服务器向应用程序发送 APNS 消息（使用 MoonAPNS）。

上周（星期四）我使用 MMC 导入新证书，并让它与应用程序的临时分发版本一起使用。

今天，我尝试将新文档上传到服务器并收到错误：

```
Server Error in '/' Application.

The certificate is revoked 
```

事情是，从上周四到今天，我没有撤销任何证书/配置文件等。

任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:55:55.300

我最终放弃了尝试解决这个问题，并通过删除然后更新所有服务器证书来暴力修复它。

仍然不知道是什么导致了最初的问题，但这至少是一种解决方法。

# asp.net-mvc - asp.net MVC中的IAuthenticationFilter接口实现

> ID：15877029
> 
> 赞同：3
> 
> 时间：2013-04-08T10:39:33.303
> 
> 标签：asp.net-mvc

我正在浏览 ASP.NET MVC 中的 Controller 类，发现它实现了 IAuthenticationFilter 接口。但是我无法理解如何在我的控制器中实现其方法 OnAuthentication() 和 OnAuthenticationChallenge() 以及何时调用它们。

如果有人可以向我解释或与我分享任何解释这一点的链接，那将非常有帮助。即使我在 MSDN 中也找不到任何相关资源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-03T22:16:09.920

用于`OnAuthentication`设置或修改当前请求的主体。

用于`OnAuthenticationChallenge`验证当前主体并允许执行当前请求。例如：

```
public class CustomAuthenticatioFilter : ActionFilterAttribute, IAuthenticationFilter
{
     public void OnAuthentication(AuthenticationContext filterContext)
     {
         //Here you are setting current principal
         filterContext.Principal = new ClaimsPrincipal();
     }

     public void OnAuthenticationChallenge(AuthenticationChallengeContext filterContext)
     {
         //Here you're checking current action and redirecting to ErrorPage
         filterContext.Result = new RedirectToRouteResult("ErrorPage",null);
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-07T08:33:32.813

您可以使用自己的值临时更改 HttpContext.User Iprincipal 后代对象。只需要通过AuthenticationContext传递一个新的IPrincipal。我认为，代表另一个用户（临时）行事会很有用。例如：何时更换某人度假，或处于开发阶段。因此，您可以在 VS2013 预览 MVC 5 项目中使用。

例如在您的控制器中（作为 IAuthenticationFilter）：

```
protected override void OnAuthentication(System.Web.Mvc.Filters.AuthenticationContext filterContext) 
{

 //fill userPrincipal…

  filterContext.Principal = new RolePrincipal(userPrincipal); 

  //Or pass an ActionResult, if you want   

  filterContext.Result = new RedirectResult("http://www.stackoverflow.com");

} 
```

# asp.net - Asp.Net MVC4 阻止人们向我的 API 请求或发布数据

> ID：15877034
> 
> 赞同：0
> 
> 时间：2013-04-08T10:39:45.133
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, security

我希望能够在我的 MVC4 应用程序中使用 AJAX 获取/发布到 API 控制器。

但是，我不希望任何人能够设置网页并获取/发布到控制器 - 仅来自从我的服务器提供的网页。

那么，我应该只使用普通控制器并返回数据，而不是 API 控制器吗？（或者我是否误解了使用 API 控制器会打开 Web 应用程序以访问任何 Get/Post？）

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:15:31.030

这可能与[我的问题在这里](https://stackoverflow.com/q/15366436/304832)重复。简而言之，保护 API 端点的唯一方法是让客户端以某种方式进行身份验证。如果您使用 [Authorize] 属性装饰控制器/操作，则可以使用普通的 ASP.NET 身份验证 cookie 来完成此操作。您还可以使用 API 密钥或白名单 IP 地址推出自己的解决方案。有关选项的清单，[请参阅此链接。](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)

我对自己的问题发布的答案确实使我的网络应用程序的非消费者更难调用 API 端点，尽管正如 Darin 指出的那样，它可以被规避。用户可以访问网络应用程序获取加密的 AnonymousID 和自定义加密 cookie，将它们插入 Fiddler2（或任何其他客户端），然后在 24-48 小时内尽可能多地访问 API。

# jsf - 在 RAD 8.5 中将 JSF 2.0 项目方面升级到 JSF 2.1

> ID：15877039
> 
> 赞同：2
> 
> 时间：2013-04-08T10:39:57.580
> 
> 标签：jsf, jsf-2, websphere, websphere-8

我的桌面上有 IBM RAD 8.5.1 和 WAS 8.5 服务器。当我尝试在向导中创建动态 Web 项目时，在配置下拉菜单中，项目方面只有 JSF 2.0 可用。我想把它升级到 2.1。如何安装或升级 JSF 项目方面到 2.1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:48:01.723

你不需要。只需提供 JSF 2.1 库就可以了。JSF 2.1 中没有什么新东西需要新的 IDE 魔法来使工作更轻松。但是 JSF 2.2 可以（Faces Flows 等），但这不是您当前关心的问题。项目方面的版本只是告诉 IDE 它应该识别哪些功能并为其提供适当的向导（“魔术”）。它不会导致最终构建/部署的 webapp 以某种回退方式运行。毕竟，您仍然可以 100% 控制代码。

# c - OpenMP 竞争条件？

> ID：15877040
> 
> 赞同：0
> 
> 时间：2013-04-08T10:39:58.467
> 
> 标签：c, openmp, race-condition

我读过 OpenMP 中的变量默认是共享的。这是否意味着在下面的代码中，应该对从 0 到 N-1 的所有数字求和，存在竞争条件？

```
int sum = 0,i;
#pragma omp parallel for
for (i = 0; i < N; i++)
    sum+=i; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:43:22.080

是的，有一个竞争条件。您应该添加`reduction(+:sum)`到编译指示。这将有效地在每个线程中创建不可见的私有副本，然后在循环后对它们进行求和。

# android - 我如何将长文本视图（字符串）显示到 android 的多个页面中

> ID：15877042
> 
> 赞同：4
> 
> 时间：2013-04-08T10:40:03.627
> 
> 标签：android, textview

我正在开发一个看起来像电子书阅读器（.text、pdf 文件等）的应用程序。我有一个巨大的文本，分为不同的章节或页面。

现在的问题是如何将整个内容分成几页并一页一页地显示。我怎么知道要适应屏幕的字符数（取决于屏幕大小和字体大小）。我完全不知道从哪里开始以及如何进行。请举个例子来帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-30T14:10:43.490

这是一个简单的示例应用程序，以防其他人需要它[https://github.com/koros/AndroidReader](https://github.com/koros/AndroidReader)

```
import android.content.Context;
import android.os.AsyncTask;
import android.text.TextPaint;

public class PagerTask extends AsyncTask<MainActivity.ViewAndPaint,      MainActivity.ProgressTracker, Void> {

private Context mContext;

public PagerTask(Context context){
    this.mContext = context;
}

protected Void doInBackground(MainActivity.ViewAndPaint... vps) {

    MainActivity.ViewAndPaint vp = vps[0];
    MainActivity.ProgressTracker progress = new MainActivity.ProgressTracker();
    TextPaint paint = vp.paint;
    int numChars = 0;
    int lineCount = 0;
    int maxLineCount = vp.maxLineCount;
    int totalCharactersProcessedSoFar = 0;

    // contentString is the whole string of the book
    int totalPages = 0;
    while (vp.contentString != null && vp.contentString.length() != 0 )
    {
        while ((lineCount < maxLineCount) && (numChars < vp.contentString.length())) {
            numChars = numChars + paint.breakText(vp.contentString.substring(numChars), true, vp.screenWidth, null);
            lineCount ++;
        }

        // Retrieve the String to be displayed in the current textview
        String stringToBeDisplayed = vp.contentString.substring(0, numChars);
        int nextIndex = numChars;
        char nextChar = nextIndex < vp.contentString.length() ? vp.contentString.charAt(nextIndex) : ' ';
        if (!Character.isWhitespace(nextChar)) {
            stringToBeDisplayed = stringToBeDisplayed.substring(0, stringToBeDisplayed.lastIndexOf(" "));
        }
        numChars = stringToBeDisplayed.length();
        vp.contentString = vp.contentString.substring(numChars);

        // publish progress
        progress.totalPages = totalPages;
        progress.addPage(totalPages, totalCharactersProcessedSoFar, totalCharactersProcessedSoFar + numChars);
        publishProgress(progress);

        totalCharactersProcessedSoFar += numChars;

        // reset per page items
        numChars = 0;
        lineCount = 0;

        // increment  page counter
        totalPages ++;
    }

    return null;
}

    @Override
    protected void onProgressUpdate(MainActivity.ProgressTracker... values) {
        ((MainActivity)mContext).onPageProcessedUpdate(values[0]);
    }

} 
```

[![在此处输入图像描述](https://i.stack.imgur.com/kIbq7.gif)](https://i.stack.imgur.com/kIbq7.gif)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:57:27.883

以下是[PageTurner](https://github.com/nightwhistler/pageturner)的做法。它需要一个滚动视图来显示长文本字符串。但是，滚动手势被覆盖。因此，当您执行“向左滑动手势”时，它将执行 Page Flip 动画并向下滚动视图（按屏幕高度）。因此，当您基本上手动滚动到视图底部时，用户感觉好像页面已经翻转。天才不是吗？而且您不必担心字体大小、段落间距、被剪切的单词等。该应用程序可在[google play](https://play.google.com/store/apps/details?id=net.nightwhistler.pageturner.ads)上找到。

# mysql - MYSQL：一个查询以多对多关系复制新项目的分配

> ID：15877043
> 
> 赞同：0
> 
> 时间：2013-04-08T10:40:06.920
> 
> 标签：mysql

您好我的情况是用户被分配到多对多关系的项目中。每次我添加新用户时，我希望为他复制现有的分配，换句话说，将他分配给所有项目，其他用户也被分配。目前我复制整个表，然后按如下方式重新插入，但想知道是否可以在一个查询中排序？

```
# tmp_assignments already exist and have same fields as assignment
truncate tmp_assignments;
INSERT tmp_assignments SELECT * FROM assignments;
# 38 is new user id
insert into assignments (project,user)
  select a.project,38
  from tmp_assignments as a group by project; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:06:25.183

这样做有什么问题：

```
insert into assignments (project, user) select project, 38 from assignments group by project 
```

# c - tolower() 和 toupper() 不起作用

> ID：15877048
> 
> 赞同：-3
> 
> 时间：2013-04-08T10:40:34.527
> 
> 标签：c, string, uppercase, lowercase

我的代码在这里：

```
char* kropecka(char* tab)
{
    int a=0,b=0;
    char* zwr;
    zwr=(char*)malloc(30*sizeof(char));

    for(a;strlen(tab);a++)
    {
        if(tab[a]!='.')
        {
            if(isupper(tab[a]))
                zwr[b]=tolower(tab[a]);
            if(islower(tab[a]))
                zwr[b]=toupper(tab[a]);
            b++;
        }
    }
    zwr[b]='\0';
    return zwr;
} 
```

没有错误、警告或类似的东西。但是当我给他一些字符串时程序崩溃了：

> -------------------------- Microsoft Visual C++ 调试库 ------------------ --------- 调试断言失败！
> 
> 程序：...s\Visual Studio 2010\Projects\C_homework\Debug\C_homework.exe 文件：f:\dd\vctools\crt_bld\self_x86\crt\src\isctype.c 行：56
> 
> 表达式：（无符号）（c + 1）<= 256
> 
> 有关您的程序如何导致断言失败的信息，请参阅有关断言的 Visual C++ 文档。
> 
> （按重试调试应用程序）
> 
> ## --------------------------------------- 中止 重试 忽略

编译器：Visual Studio 2010 包含的库：stdio.h、string.h、ctype.h、stdlib.h（用于 main() 中的 system() 函数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:49:18.687

来自 C 标准：

> 标头`<ctype.h>`声明了几个对字符分类和映射有用的函数。在所有情况下，参数都是一个 int，其值应表示为无符号字符或应等于宏 EOF 的值。如果参数有任何其他值，则**行为是 undefined**。

强调我的。

[MSDN`toupper()`对此的提示](http://msdn.microsoft.com/en-us/library/45119yx3%28v=vs.100%29.aspx)描述：

> 为了让 toupper 给出预期的结果，__isascii 和 isupper 必须都返回非零值。

[isascii()](http://msdn.microsoft.com/en-us/library/5wcd48xw%28v=vs.100%29.aspx)：

> 如果 c 是 ASCII 字符（在 0x00 – 0x7F 范围内），__isascii 返回一个非零值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T10:42:25.623

循环的退出测试是错误的。 `strlen(tab)`将始终返回 false 或 true（取决于`tab`）。这意味着您继续写入`zwr`超出其分配的长度。这样做的影响是不确定的，但它最终崩溃也就不足为奇了。

您可以通过将循环更改为来解决此问题

```
for(a;a<strlen(tab);a++)
//    ^^ 
```

另一个可能的错误原因`zwr`是硬编码为 30 个字节。这显然不足以满足所有可能的值，`tab`因此您可以将代码更改为

```
size_t len = strlen(zwr)+1;
zwr=malloc(len);
for(;a<len;a++) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T10:42:56.667

这将永远运行：

```
for(a;strlen(tab);a++) 
```

我想你的意思是：

```
for(a;a < strlen(tab);a++) 
```

或者更好（因为`strlen`是 O(n)）：

```
for(;tab[a];a++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:52:46.133

检查调用堆栈 - 希望它将带您找到问题的根源。

```
int __cdecl _chvalidator(
    int c,
    int mask
    )
 {
    _ASSERTE((unsigned)(c + 1) <= 256);
    return ( _pctype[c] & mask);
 } 
```

这个方法看起来像一个检查字符值边界的方法......

isctype.c -

```
/***
* __chvalidator
*
* Purpose:
*      This function is called by character testing functions in debug
*      versions. This function test for validation of c as character.
*      For improvement in performance, it is not used in non-debug
*      version.  It is available in the static single-thread non-debug
*      build, though, just in case C code that includes ctype.h is compiled
*      /D_DEBUG /ML.
*
*******************************************************************************/ 
```

简单来说，您似乎溢出了一个变量，即 Unsigned Char 可以取最大值 255。如果您将 1 添加到现有值 255 - 您会溢出它。

希望能帮助到你。

# java - KeyListener 不起作用

> ID：15877052
> 
> 赞同：1
> 
> 时间：2013-04-08T10:40:46.977
> 
> 标签：java, swing, keylistener, key-bindings, java-canvas

我正在编写类似炸弹人的游戏，但我的 KeyListener 有问题。

问题是，当游戏运行时，KeyListener 没有响应，但当它不运行时，它会按照我告诉他的去做。

这是我的代码

```
public class direction extends Canvas implements KeyListener {

static float bmx = 35;
static float bmy = 35;
static float v = 0.03f;

public static BufferStrategy strategie;
public static BufferedImage image;

public direction()  {                                           //pas sûr de ce que ça fait
    GraphicsEnvironment ge =                                    //on m'a dit de le mettre           
            GraphicsEnvironment.getLocalGraphicsEnvironment();  //le programme marche très bien sans
    GraphicsDevice gd = ge.getDefaultScreenDevice();
    GraphicsConfiguration gc = gd.getDefaultConfiguration();
    image =  gc.createCompatibleImage(700,  700);
    setSize(700, 700);

}

    static boolean gauche;
    static boolean droite;
    static boolean haut;
    static boolean bas;

    public void keyPressed(KeyEvent e) {

        if (e.getKeyCode() == KeyEvent.VK_LEFT) {
            gauche = true;
        }
        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            droite = true;
            System.out.println("lal");
        }
        if (e.getKeyCode() == KeyEvent.VK_DOWN) {
            bas = true;
        }
        if (e.getKeyCode() == KeyEvent.VK_UP) {
            haut = true;
        }
    }
    public void keyReleased(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_LEFT) {
            gauche = false;
        }
        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            droite = false;
        }
        if (e.getKeyCode() == KeyEvent.VK_DOWN) {
            bas = false;
        }
        if (e.getKeyCode() == KeyEvent.VK_UP) {
            haut = false;
        }
    }
    public void keyTyped(KeyEvent e) {
    }

public static void draw(){

    Graphics2D g = (Graphics2D) strategie.getDrawGraphics();

    for(int ligne= 0 ; ligne < board.gridHauteur; ligne++){
        for(int colonne= 0 ; colonne < board.gridLargeur ; colonne++){

            switch (board.plateau1[ligne][colonne]) {
            case 0 : g.setColor(Color.lightGray);
            g.fillRect( 30*ligne, 30*colonne , 30, 30);
            break;
            case 1 : g.setColor(Color.black);              //dessine et donne la propriété 'BLOCKED' à certains bloques
            g.fillRect( 30*ligne, 30*colonne , 30, 30);
            board.plateau1[ligne][colonne] = board.BLOCKED;
            break;
            case 2 : g.setColor(Color.darkGray);
            g.fillRect( 30*ligne, 30*colonne , 30, 30);
            board.plateau1[ligne][colonne] = board.BLOCKED;
            break;
            }
        }
    }
    g.setColor(Color.red);
    g.fillRect((int)bmx, (int)bmy, 20, 20);   //dessine le "joueur"
    strategie.show();
}

public static void run() {

    long dernierTempsLoop = System.currentTimeMillis();   // avec cette ligne, nous demandons un t0

    while(true) {

        long delta = (System.currentTimeMillis() - dernierTempsLoop); // puis, à chaque nouvel boucle
        dernierTempsLoop = System.currentTimeMillis();               //nous calculons le temps que la 
                                                                    //boucle à mise pour s'effectuer

        for (int i=0;i<delta / 5;i++) {
            logic(5);                   //permet d'appeler à ce qu'il y ait peu de mouvements si la boucle est rapide
        }                               // et plus de mouvements si elle est plus lente ce qui garantit une vitesse constante
                                        // quelle que soit le temps que la boucle met pour s'effectuer
        if ((delta % 5) != 0) {
            logic(delta % 5);
        }

        draw();     //dessine le terrain et le rectangle

        try { Thread.sleep(10); } catch (Exception e) {};   //permet au programme de ne pas "surchauffer"
    } 
```

} }

然后

```
public board()
{
    super("Bomberman");
    setSize(fenLargeur,fenHauteur);
    g = new direction();
    g.setFocusable(true);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    getContentPane().setBackground(Color.BLACK);

    JPanel content = new JPanel();
    content.setLayout(new BorderLayout());
    content.add(g, BorderLayout.CENTER);
    g.addKeyListener(g);                            // <=== c'est CA qui me pose problème
    setContentPane(content);
    setVisible(true);

    g.createBufferStrategy(2);
    Bm.direction.strategie = g.getBufferStrategy();

}` 
```

和...

```
dispose();
        board b = new board();
        b.g.createBufferStrategy(2);
        direction.strategie = b.g.getBufferStrategy();

        direction.run(); 
```

我希望我可以理解，并感谢您的阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:47:13.967

我认为您的问题可能是在绘制结束时您可能需要做的所有事情：

```
g.setFocusable(true);
g.requestFocusInWindow(); 
```

不仅 ：

```
g.setFocusable(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:47:31.367

尝试在单独的类中实现 KeyListener 接口。

 **```
public class MyListener implements KeyListener{

    @Override
    public void keyPressed(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyReleased(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent e) {
    // TODO Auto-generated method stub

    }

} 
```*  *并将此界面添加到您的图形上下文中。

 **```
g.addKeyListener(new MyListener ()); 
```****

# visual-studio-2012 - 在 Visual Studio 2012 中创建桌面应用程序安装程序

> ID：15877060
> 
> 赞同：0
> 
> 时间：2013-04-08T10:41:15.507
> 
> 标签：visual-studio-2012, installation

我正在使用 VS 2012 开发一个 .net 项目，该项目需要一个安装程序，以便用户能够在他们的计算机中安装应用程序。但是，我在新项目对话框中找不到通常的 VS 2010 之类的安装程序项目。在网上看了一会儿后，我发现 VS 2012 不再包含该选项。那么，我应该如何创建安装程序？Microsoft 是否提供任何替代方案？在这种情况下，我可以使用哪些其他可用选项？任何形式的帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:47:37.917

[设置和部署项目已](http://msmvps.com/blogs/installsite/archive/2010/09/23/microsoft-will-retire-visual-studio-installer.aspx)停用。有替代方案：

*   WiX 工具集（在上面的链接中提到）
*   InstallShield LE（直接替换设置和部署项目）

此外，还有许多用于构建安装包的商业软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:50:57.543

您可以尝试创建一个`ClickOnce`安装程序。但是，这只是一个快速建议，绝不会取代完整的安装程序项目（如 VS2010 中可用的项目）。但是，如果您只想将一些文件放在目标机器上并让用户运行它们，那么这就足够了。`ClickOnce`安装任何（大多数？）先决条件有一点额外的好处。

![发布 = ClickOnce](https://i.stack.imgur.com/CvlA7.png)

# wcf - 基于 SSL 的 Azure Web 服务返回不正确的肥皂地址位置

> ID：15877064
> 
> 赞同：0
> 
> 时间：2013-04-08T10:41:21.403
> 
> 标签：wcf, azure, wcf-binding

我在 Azure 上有一个通过 SSL 运行的云服务；我可以浏览到该服务并`wsdl`通过 SSL 获取它，但是当我这样做时`soap address location`返回错误 - 而不是使用绑定到证书的域名，我得到了服务器名称

> <soap:address location="http://rd00155d45cc3c/Amazon.svc"/>

我期待看到

> <soap:address location="https://azure.mydomain.com/Amazon.svc"/>

我的配置

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>                
            <binding name="AzureBinding">
                <security mode="Transport" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <services>
        <service name="MyService">
            <endpoint address="" binding="basicHttpBinding" 
                      contract="StudentServiceWCF.IAmazon" 
                      bindingConfiguration="AzureBinding" />
            <endpoint address="mex" binding="mexHttpsBinding" 
                      contract="IMetadataExchange" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior>
               <serviceMetadata httpsGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

我的 app.config 客户端端点已配置

```
<endpoint address="https://azure.mydomain.com/Amazon.svc"
          binding="basicHttpBinding" 
          bindingConfiguration="BasicHttpBinding_IOutOfDateSecure"
          contract="AzureService.IAmazon" name="BasicHttpBinding_IAmazon" />

<binding name="BasicHttpBinding_IAmazon">
    <security mode="Transport" />
</binding> 
```

我不知道如何影响地址位置，因此它使用我证书中的域名。因为它返回的是 http 位置，所以测试客户端会抛出异常：

> 位于 http://rd00155d45cc3c/Amazon.svc 的 HTTP 服务不可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:17:17.577

所以，评论有点陈旧，但请查看[这篇文章](http://msdn.microsoft.com/en-us/spazuretrainingcourse_azurefromsponpremusingjquery_topic2.aspx)。

`step 6`描述要添加的行为 ( `UseRequestHeadersForMeatadataAddress`) 以及何时引入：KB981002- WCF：修补程序汇总更新。这将解决您的问题。

KB981001 是 Windows 的官方修补程序/更新。它必须安装在您的开发机器和部署服务的 Windows Azure 实例上。但是，如果您没有明确针对旧[客户操作系统（特定 osVersion）](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx)，则必须已安装该修补程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:34:41.117

`useRequestHeadersForMetadataAddress`正如@astaykov 所建议的那样，我为解决方案提供了一些方法，但是为了能够获得`wsdl`我需要添加的过度 https

```
<protocolMapping>
    <add scheme="https" 
         binding="basicHttpBinding" 
         bindingConfiguration="BasicHttpBinding_IService1" />
</protocolMapping> 
```

到`system.serviceModel`我的配置中的部分，这为我在`soap:address location`Azure 生成的 wsdl 中的元素中提供了正确的结果。

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="AzureBinding">
                <security mode="Transport">
                    <transport clientCredentialType="None" />
                </security>
            </binding>                
        </basicHttpBinding>
    </bindings>
    <services>
        <service name="MyService">
            <endpoint address="" binding="basicHttpBinding" 
                      contract="StudentServiceWCF.IAmazon" 
                      bindingConfiguration="AzureBinding" />
            <endpoint address="mex" binding="mexHttpsBinding" 
                      contract="IMetadataExchange" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <serviceMetadata httpsGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <useRequestHeadersForMetadataAddress>
                    <defaultPorts>
                        <add scheme="https" port="443" />
                    </defaultPorts>
                </useRequestHeadersForMetadataAddress>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <protocolMapping>
        <add scheme="https" binding="basicHttpBinding" 
             bindingConfiguration="BasicHttpBinding_IService1" />
    </protocolMapping>
</system.serviceModel> 
```

# pandas - MultiIndex 和 read_table 具有单独的索引和数据

> ID：15877067
> 
> 赞同：1
> 
> 时间：2013-04-08T10:41:34.380
> 
> 标签：pandas

我正在尝试在文件的单独部分中读取带有分层索引的空格分隔文件。这就是我想出的：

```
import pandas as pd
o = open(doc, 'rU')
for i in o:
    if i.startswith("DATA="):
        meta_ends=o.tell() + 5
        break
dp = pd.read_table(o, delim_whitespace=True, 
  lineterminator='\n', header=None, index_col=None) 
```

文件如下所示：

```
 META (the exact structure is probably not relevant for this example)
 DATA=1 2 3 4
 5 6 7 9
 10 11 12 13 
```

数据具有空格分隔的列和换行符分隔的行。

我用 为行和列创建了 MultiIndexes，`pd.MultiIndex.from_arrays`我分别对其进行解析。这就是我应该结束的：

```
 Column 1                Column 2
Row label 1 Row label 2
Koko maa    1989               2008231.0               4891866.0   
            1990               2036693.0               4924388.0   
Akaa        1989                  6436.0                 15637.0   
            1990                  6548.0                 15775.0   
Alajärvi    1989                  3777.0                 11653.0   
            1990                  3831.0                 11747.0 
```

我以前的方法是将数据部分读入内存，然后像这样创建一个 DataFrame：

```
col_index = pd.MultiIndex.from_arrays(cols)
row_index = pd.MultiIndex.from_arrays(rows)
return pd.DataFrame(data, index=row_index, columns=col_index) 
```

使用 500Mb+ 数据和 5M 行标签和 50+ 列 Pandas 读取所有可用内存（16Gt 带交换，这不起作用）。使用 read_table，我可以通过只读取一次数据部分来节省内存。

我的问题是如何将行和列的 MultiIndexes 设置为现有的 DataFrame？

或者有没有办法给 read_table 一个外部的 MultiIndex？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:39:57.197

您可以在事后使用设置列和行索引

```
df.index = row_index
df.columns = col_index 
```

例如，

```
import pandas as pd
import io

content = '''\
    176.792 -2.30523 0.430772 32016 1 1 2
    177.042 -1.87729 0.430562 32016 1 1 1
    177.047 -1.54957 0.431853 31136 1 1 1
    177.403 -0.657246 0.432905 31152 1 1 1
'''
df = pd.read_table(io.BytesIO(content), sep='\s+', header=None)
arrays = [['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'],
          ['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two']]
tuples = zip(*arrays)
row_index = pd.MultiIndex.from_tuples(tuples[:len(df)])
col_index = pd.MultiIndex.from_tuples(tuples[:len(df.columns)])
df.index = row_index
df.columns = col_index
print(df) 
```

产量

```
 bar                 baz         foo       qux
             one       two       one    two  one  two  one
bar one  176.792 -2.305230  0.430772  32016    1    1    2
    two  177.042 -1.877290  0.430562  32016    1    1    1
baz one  177.047 -1.549570  0.431853  31136    1    1    1
    two  177.403 -0.657246  0.432905  31152    1    1    1 
```

# php - 在 Windows 7 64 位上使用 ssh2_connect() 未定义函数 php 5.4.3 时出错

> ID：15877069
> 
> 赞同：0
> 
> 时间：2013-04-08T10:41:38.720
> 
> 标签：php, windows, libssh2

我正在使用 wampserver 2.2 apache 2.2.22 php 5.4.3 mysql 5.5.24，我已经为 php 5.4 安装了 php_ssh2.dll 扩展，并将其添加到 php.ini 中， `extension=php_ssh2.dll`然后重新启动所有服务。我尝试使用`ssh2_connect()`但它不起作用，我真的不明白为什么导致该版本与 php 5.4.3 兼容。

如果您有任何提示，请告诉我这里是我下载 [ssh2.dll的链接](http://www.apachehaus.com/forum/index.php?topic=839.0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:25:06.143

老实说，我只是推荐[phpseclib，一个纯 PHP SSH2 实现](http://phpseclib.sourceforge.net/)。[与您使用的相比，](https://stackoverflow.com/a/14305875/569976)它具有许多优势。除其他外，它更便携且更易于安装。

# matlab - 用 lsqcurvefit 拟合曲线

> ID：15877070
> 
> 赞同：0
> 
> 时间：2013-04-08T10:41:39.150
> 
> 标签：matlab, curve-fitting, nonlinear-optimization

我有一个特定的功率谱阵列保存为`test`，取决于频率阵列`f`。

这个功率谱一般如下图所示 ![在此处输入图像描述](https://i.stack.imgur.com/N3nXD.png)

需要注意的是，上述功率谱源于模拟时间序列。

原则上，我想要做的是拟合一条接近模拟功率谱的曲线，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/QMP5D.png)

我知道理论功率谱可以定义如下：

```
function ps_theo = ps_th(L,Uhub,f)

const = L/Uhub;
f_x = 6.*f.*(L/Uhub);
exp = 5/3;
ps_theo = (4*const)./((1 + f_x).^exp);

end 
```

其中`L`是恒定长度尺度，`Uhub`，恒定速度和`f`频率矢量。

问题是：我不知道 'L' 的值，因此我正在考虑使用优化**的非线性分辨率**`lsqcurvefit`。

我一直在进行如下：

```
xdata = f;
ydata = test;
Uhub = 10;

fit_func = @(L) ps_th(L,Uhub,f);

L_opt = lsqcurvefit(@fit_func,330.2,xdata,ydata) 
```

`fit_func`它检索有关函数输入变量数量的错误消息。

你介意发光吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:24:40.693

您要拟合的函数只能接受两个参数。你可以这样重写`ps_th`：

```
function ps_theo = ps_th(x0,f)
L = x0(1);
Uhub = x0(2);

const = L/Uhub;
f_x = 6.*f.*(L/Uhub);
exp = 5/3;
ps_theo = (4*const)./((1 + f_x).^exp);

end 
```

然后用这样的方法调用 lsqcurvefit：

```
x0Start = [330.2,10]; % vector of initial parameters
x0_opt = lsqcurvefit(@ps_th,x0Start,xdata,ydata); 
```

# mysql - mysql更新查询案例

> ID：15877072
> 
> 赞同：0
> 
> 时间：2013-04-08T10:41:51.513
> 
> 标签：mysql

```
+---------------------+--------------+-------------------------------------------+
| Host                | User         | Password                                  |
+---------------------+--------------+-------------------------------------------+
| localhost           | root         | *5372A5B70C563P98F01F290FB1DCAA165EA32AFA |
| sam01               | root         |                                           |
| john01              | root         |                                           |
+--------------------------------------------------------------------------------+ 
```

考虑上面的示例表条目。我一直在尝试制作一个脚本来更新密码字段，其中密码字段为空的条目的默认值。我想创建一个 mysql 查询来使用密码为空的主机的默认密码更新密码字段。但是用户字段是所有条目的根。主机名可以从服务器更改为服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:45:22.463

```
UPDATE table SET `password`='DEFAULTPASS' WHERE `password` IS NULL 
```

你也可以使用alter table

```
ALTER TABLE  `table` CHANGE  `password`  `password` VARCHAR( 255 ) NOT NULL DEFAULT  'default_password'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:56:12.550

```
update table set password ='DefaultPassword' where password is null 
```

它将使用默认密码更新空密码

# javascript - 图片库旋转木马

> ID：15877077
> 
> 赞同：0
> 
> 时间：2013-04-08T10:42:05.283
> 
> 标签：javascript, jquery, html, carousel

我尝试使用旋转木马 FredSel 画廊。但是当我点击按钮打开时什么也没发生。我选择的图库是滑动图库，我已经从该站点下载了库。我尝试了很多东西，但没有任何效果。

有人可以帮助我吗？我是 jquery 的新手

我不知道我做错了什么。

这是我的代码。

```
<script src="jquery.carouFredSel-6.2.0-packed.js"></script>
<script src="jquery.touchSwipe.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.css"> 
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script> 
```

JAVASCRIPT：

```
<script>
$("#foo4").carouFredSel({
    auto        : false,
    swipe       : {
        onTouch     : true,
        onMouse     : true
    }
});
</script> 
```

HTML5

```
<div data-role="header" data-position="fixed" data-fullscreen="true" data-id="footer">                      
         <a href="#p1" data-icon="home" data-iconpos="notext">Home</a>
         <h1>HOME</h1>
         <a href="#foo4" data-icon="grid" data-iconpos="notext" data-inline="true" class="ui-btn-right" data-direction="reverse" style="margin-right:70px">GALLERY</a>
</div>

    <div id="image_carousel">
        <div id="foo4">
            <img src="images/small/1.jpg" alt="basketball" width="140" height="140" />
            <img src="images/small/2.jpg" alt="beachtree" width="140" height="140" />
            <img src="images/small/3.jpg" alt="cupcackes" width="140" height="140" />
            <img src="images/small/4.jpg" alt="hangmat" width="140" height="140" />
            <img src="images/small/5.jpg" alt="new york" width="140" height="140" />
            <img src="images/small/6.jpg" alt="laundry" width="140" height="140" />
            <img src="images/small/7.jpg" alt="mom son" width="140" height="140" />
            <img src="images/small/8.jpg" alt="picknick" width="140" height="140" />
            <img src="images/small/9.jpg" alt="shoes" width="140" height="140" />
            <img src="images/small/10.jpg" alt="paris" width="140" height="140" />
            <img src="images/small/11.jpg" alt="sunbading" width="140" height="140" />
            <img src="images/small/12.jpg" alt="yellow couple" width="140" height="140" />
        </div>
        <div class="clearfix"></div>
    </div> 
```

CSS：

```
#image_carousel {
    padding: 15px 0 15px 40px;
}
#image_carousel img {
    border: 1px solid #ccc;
    background-color: white;
    padding: 9px;
    margin: 7px;
    display: block;
    float: left;
}
#clearfix {
    float: none;
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:15:05.060

重新排列顺序

```
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script>
<script src="jquery.carouFredSel-6.2.0-packed.js"></script>
<script src="jquery.touchSwipe.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.css"> 
```

然后尝试

# jsf-1.2 - 如何从 websphere 7.0 中删除 JSF 1.2？

> ID：15877078
> 
> 赞同：0
> 
> 时间：2013-04-08T10:42:05.650
> 
> 标签：jsf-1.2, websphere-7

我们可以从 websphere 7 中删除 JSF 1.2 库吗？我尝试在 Websphere 服务器安装目录中搜索 JSF 库，但找不到它们。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:20:44.670

JSF 1.2 是 Java EE 5 的一部分。WebSphere 与 Jave EE 5 兼容，因此我怀疑您是否可以删除部分 Jave EE 逻辑。

不过，您可以使用 JSF 2。只需确保首先使用 JSF 2 加载应用程序库。检查[https://stackoverflow.com/a/2211960/1022141](https://stackoverflow.com/a/2211960/1022141)以及。

# php - Yii Booster - 包含进度条时的 td 单元格高度

> ID：15877084
> 
> 赞同：0
> 
> 时间：2013-04-08T10:42:23.997
> 
> 标签：php, css, twitter-bootstrap, yii, progress-bar

我正在使用 Yii 和 YiiBooster 创建应用程序。当我将 TbProgress 小部件放入`td`单元格时 - 它的高度似乎有某种底部填充（如 20-30 像素）。它看起来很糟糕，因为它导致我的表格行比它们应该的要高。

有一个`margin-bottom`定义`40px`（在`bootstrap.css`文件中），但我删除了它 - 它仍然很高。

有谁知道我在哪里可以更改它？

这是我的代码：

```
$this->widget('bootstrap.widgets.TbGridView', array(
    'id' => 'invite-grid',
    'type' => 'striped condensed',
    'dataProvider' => $dataProvider,
    'columns' => array(
        'idProject',
        'name',
        array(
            'header' => 'Postęp',
            'value' => function($data)
            {
                Controller::widget('bootstrap.widgets.TbProgress', array(
                    'percent' => ($data->projectInvites +1 )/ $data->projectMaxInvites * 100,
                    ));
            },
            'htmlOptions' => array (
                'style' => ''
            ),
        ),
        array(
            'class' => 'bootstrap.widgets.TbButtonColumn'
        )
    )
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:35:05.017

您可以将`margin-bottom:0 !important;`页面内的任何 css 文件定义为该元素的类。

更改 bootsrap.css 后是否清除了资产目录，如果要更改影响，则必须这样做。可能这就是问题所在。

寻找父元素或相同元素的填充，可能有填充而不是边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T07:22:04.900

我找到了解决方案。我不得不在代码中添加“margin-bottom：-20px”：

```
Controller::widget('bootstrap.widgets.TbProgress', array(
    'percent' => $data->projectInvites == 0 ?  0 : 
                 ($data->projectConfirms / $data->projectInvites) * 100,
    'htmlOptions' => array(
        'style' => 'height: 20px; margin-bottom: -20px',
        ),                          
    )); 
```

# java - 在 java 中使用 ssh 读取远程 Ubuntu 目录？

> ID：15877094
> 
> 赞同：1
> 
> 时间：2013-04-08T10:42:38.747
> 
> 标签：java, file-io, ssh, remote-access, smb

我想使用 读取远程目录的内容`java`。

该目录位于运行 Ubuntu 的机器上。右键单击该文件夹应该会提供共享文件夹选项及其安装的 samba 客户端以用于 Windows 共享，但我没有任何运行 Windows 的机器。

我正在寻找一个**java api 库**来访问远程目录内容？

用户将只提供用户名、密码、ip 和文件夹名称。

例如`[//172.17.0.1/sharefolder/demo/]`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:40:01.810

**对于 Samba 共享：** 即使是 linux 中的 SAMBA 共享也使用与 Windows 共享相同的协议。所以这里的帖子可以提供帮助：[如何在 Java 中安装 Windows 驱动器？](https://stackoverflow.com/questions/208839/how-can-i-mount-a-windows-drive-in-java) 基本上，您可以使用“net use”命令将共享位置安装为网络驱动器。您可以通过 Windows 控制台或通过 Java 进程调用它。

**对于 SFTP 位置：**

如果调用/使用外部命令没有问题，则可以使用 sshfs（通过 java 或通过 Process）将远程目录挂载到本地文件夹中。

请参阅： http: [//numberformat.wordpress.com/2010/03/01/how-to-mount-a-remote-ssh-filesystem-using-sshfs/](http://numberformat.wordpress.com/2010/03/01/how-to-mount-a-remote-ssh-filesystem-using-sshfs/)

如果您想要纯 java 来了解如何访问 SFTP，我读到一个名为 JSch 的库可用于直接从 java 访问 SFTP。看：

*   [http://chrisjordan.ca/post/15052396308/java-sftp](http://chrisjordan.ca/post/15052396308/java-sftp)
*   [http://jcraft.com/jsch/examples/Sftp.java.html](http://jcraft.com/jsch/examples/Sftp.java.html)

**如果是其他类型请注明**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:46:18.880

您可能会发现[Java CIFS 客户端库](http://jcifs.samba.org/)具有您需要的 API - 它对服务器和客户端都很有用。

这是从他们的文档中获取的用于检索文件的示例：

```
import jcifs.smb.*;

jcifs.Config.setProperty( "jcifs.netbios.wins", "192.168.1.220" );
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("domain", "username", "password");
SmbFileInputStream in = new SmbFileInputStream("smb://host/c/My Documents/somefile.txt", auth);
byte[] b = new byte[8192];
int n;
while(( n = in.read( b )) > 0 ) {
    System.out.write( b, 0, n );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:26:12.020

对于 SFTP，请考虑使用 JSCAPE 的[Secure FTP Factory](http://www.jscape.com/products/components/java/secure-ftp-factory/)。可以在[此处](http://files.jscape.com/sftp/docs/html/index.html?overview16.html)找到带有代码示例的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T09:21:28.530

[jsch-nio](https://github.com/lucastheisen/jsch-nio)是一个基于 ssh 的功能齐全的 unix/linux java FileSystemProvider。

# jquery - 用于解析 XML 的 jQuery

> ID：15877096
> 
> 赞同：0
> 
> 时间：2013-04-08T10:42:49.733
> 
> 标签：jquery, xml, xml-parsing

```
 <script>
            $(document).ready(function(){
            var xml = "<rss version='2.0'><channel><title>MyTitle</title></channel></rss>";
            var data = $.parseXML(xml);
            console.log(data);
            $(data).find('rss').each(function(){
            var name = $(this).attr('version');
            $('<div class="items"></div>').html('<a href="'+name+'"></a>').appendTo('#page-wrap');
            });
        });
    </script>
<body>
    <div id="page-wrap">
        </div>
</body> 
```

上面的代码有什么问题？我只是得到一个空白页。它甚至没有超出 var 数据声明。

编辑：现在我将正确的 xml 传递给 parseXML() 但仍然没有结果。还缺少什么？

EDIT2：知道为什么下面的代码不会在 Chrome 浏览器上显示任何输出吗？尽管将脚本和 html 代码放入 JSFiddle 时会产生正确的结果。

EDIT3：使用 jquery-1.9.0 使它工作。感谢大家的帮助和支持。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <script type="text/javascript" src="jquery.js">

$(document).ready(function(){
            var xml = "<rss version='2.0'><channel><title>MyTitle</title></channel></rss>";
            var data = $.parseXML(xml);
            console.log(data);
            $(data).find('rss').each(function(){
            var name = $(this).attr('version');
            $('<div class="items"></div>').html('<a href="'+name+'">'+name+'</a>').appendTo('#page-wrap');
            });
        });

     </script>
</head>
<body>
    <div id="page-wrap"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:46:43.203

请参阅[jquery 文档](http://api.jquery.com/jQuery.parseXML/)。输入 `parseXML`应该是格式良好的 xml 字符串，而不是文件位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:45:10.413

您的浏览器进程无法直接从您的文件系统打开文件，如果可以的话，这将是一个容易被利用的安全漏洞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:24:23.003

你搞错了。

1.  您正在寻找`method`xml 中实际上不存在的节点。
2.  attr('name') 是什么？它属于谁？
3.  `<a>`标签确实具有显示为链接的文本。例如`<a href="url">The Text</a>`
4.  最后，由于您要附加（包装在 a 中），因此我简化了您的代码。

遵循以下小提琴：[JS Fiddle to your code](http://jsfiddle.net/VWP8C/3/)

# java - 将多个值从一页传递到另一页

> ID：15877107
> 
> 赞同：2
> 
> 时间：2013-04-08T10:43:24.187
> 
> 标签：java, html, apache, jsp, tomcat

我有以下问题，如何将多个值从一个 jsp 页面传递到另一个页面？我在这里有一段代码，它工作正常，但它只将一个值从一页发送到另一页（年份）：

```
<form method="post" action="Display data.jsp" name="inputpage" >
<select name="year">
<option value="2010">2010</option>
<option value="2011">2011</option>
</select> 
```

例如，如果我有另一个值，例如

```
String str = "value"; 
```

是否也可以使用表单发布方法发送它？我用谷歌搜索了它，我发现的答案包括循环和太多代码，有没有短而简单的方法呢？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:46:38.023

当您提交表单时，表单的所有值都会被传递，它们只需要在表单内部。您可以使用以下方法正常读取其他值：

```
 request.getParameter(ParamName) 
```

看看[这篇文章](http://www.tutorialspoint.com/jsp/jsp_form_processing.htm)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:49:01.267

您可以使用表单中的隐藏输入来使用表单帖子传递其他数据吗？

```
<input type='hidden' id='myExtraData' value='hello' /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:51:14.093

您可以通过表单方法发送任意数量的变量。

要发送 String 的值，请将`Str`其值分配给隐藏字段，如下所示：

```
<input type="hidden" id="hidden1" value=<c:out value="${variableName}" /> 
```

其中变量名=str。

# java - Java 安卓应用。从数据库加载所有信息，但只显示某些信息

> ID：15877108
> 
> 赞同：0
> 
> 时间：2013-04-08T10:43:27.963
> 
> 标签：java, php, android, database

好的，有一段时间我一直在从数据库中获取“**名称**”和“**位置**”并将它们列在一个表中。一个接一个地使用循环，直到全部显示，总共有 22 个。

例如。

```
name 1 | location 1
name 2 | location 2 
name 3 | location 3 
```

我想要的是不加载背景中的信息，因为我已经是，但只在需要时选择数据，所以我可以有图片 txt 然后是数据。

例如。

```
{Picture}                          {Picture}
{txt}{name 1}                      {txt}{name 2} 
```

而不是将所有内容一个接一个地列出以使页面看起来更智能。顺便说一句，这是我的一级方程式应用程序的结果页面。

**GetDataFromDB2.java** ------

```
package com.test.test;

import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

public class GetDataFromDB2 {

public String getDataFromDB() {
    try {

        HttpPost httppost;
        HttpClient httpclient;
        httpclient = new DefaultHttpClient();
        httppost = new HttpPost(
                "http://192.168.1.69/GetResults.php"); // change this to your URL.....
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        final String response = httpclient.execute(httppost,
                responseHandler);

        return response.trim();

    } catch (Exception e) {
        System.out.println("ERROR : " + e.getMessage());
        return "error";
    }
}
} 
```

这是显示的**Results.java**

```
package com.test.test;

import java.util.ArrayList;
import java.util.Iterator;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.   graphics.   Color;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TableRow.LayoutParams;
import android.widget.TextView;

public class Results extends Activity {

String data = "";
TableLayout tl;
TableRow tr;
TextView label;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.results);

    tl = (TableLayout) findViewById(R.id.maintable);

    final GetDataFromDB2 getdb = new GetDataFromDB2();
    new Thread(new Runnable() {
        public void run() {
            data = getdb.getDataFromDB();
            System.out.println(data);

            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    ArrayList<Users> users = parseJSON(data);
                    addData(users);                     
                }
            });

        }
    }).start();
}

public ArrayList<Users> parseJSON(String result) {
    ArrayList<Users> users = new ArrayList<Users>();
    try {
        JSONArray jArray = new JSONArray(result);
        for (int i = 0; i < jArray.length(); i++) {
            JSONObject json_data = jArray.getJSONObject(i);
            Users user = new Users();
            user.setId(json_data.getInt("idresults"));
            user.setName(json_data.getString("driver"));
            user.setPlace(json_data.getString("local"));
            users.add(user);
        }
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());  
    }
    return users;
}

void addHeader(){
    /** Create a TableRow dynamically **/
    tr = new TableRow(this);

    /** Creating a TextView1 to add to the row **/
    label = new TextView(this);
    label.setText("DRIVERS");
    label.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    label.setPadding(20, 5, 5, 5);
    label.setBackgroundColor(Color.argb(255, 25, 25, 25));
    label.setTextColor(Color.argb(-19, 246, 255, 0));
    LinearLayout Ll = new LinearLayout(this);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT);
    params.setMargins(0, 0, 0, 0);
    //Ll.setPadding(10, 5, 5, 5);
    Ll.addView(label,params);
    tr.addView((View)Ll); // Adding textView to tablerow.

    /** Creating textview2 Button **/
    TextView place = new TextView(this);
    place.setText("GRAND PRIX");
    place.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    place.setPadding(20, 5, 5, 5);
    place.setBackgroundColor(Color.argb(255, 25, 25, 25));
    place.setTextColor(Color.argb(-19, 246, 255, 0));
    Ll = new LinearLayout(this);
    params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT);
    params.setMargins(0, 0, 0, 0);
    //Ll.setPadding(10, 5, 5, 5);
    Ll.addView(place,params);
    tr.addView((View)Ll); // Adding textview to tablerow.

     // Add the TableRow to the TableLayout
    tl.addView(tr, new TableLayout.LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
}

@SuppressWarnings({ "rawtypes" })
public void addData(ArrayList<Users> users) {

    addHeader();

    for (Iterator i = users.iterator(); i.hasNext();) {

        Users p = (Users) i.next();

        /** Create a TableRow dynamically **/
        tr = new TableRow(this);

        /** Creating a TextView to add to the row **/
        label = new TextView(this);
        label.setText(p.getName());
        label.setId(p.getId());
        label.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        label.setPadding(20, 5, 5, 5);
        label.setBackgroundColor(Color.argb(255, 25, 25, 25));
        label.setTextColor(Color.argb(255, 0, 198, 255));
        LinearLayout Ll = new LinearLayout(this);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT);
        params.setMargins(0, 1, 1, 0);
        //Ll.setPadding(10, 5, 5, 5);
        Ll.addView(label,params);
        tr.addView((View)Ll); // Adding textView to tablerow.

        /** Creating Qty Button **/
        TextView place = new TextView(this);
        place.setText(p.getPlace());
        place.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        place.setPadding(20, 5, 5, 5);
        place.setBackgroundColor(Color.argb(255, 25, 25, 25));
        place.setTextColor(Color.argb(255, 0, 198, 255));
        Ll = new LinearLayout(this);
        params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT);
        params.setMargins(0, 1, 1, 0);
        //Ll.setPadding(10, 5, 5, 5);
        Ll.addView(place,params);
        tr.addView((View)Ll); // Adding textview to tablerow.

         // Add the TableRow to the TableLayout
        tl.addView(tr, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
    }
}
} 
```

如果你能弄明白，你会看到它创建了自己的表格并进行了布局。我想要的只是在页面中的某些时间使用数据。ps 每个数据库条目作为它们的“id”例如

```
ID - 1\. name 1\. location 1\.   id - 2\. name 2\. locations 2  the id is just 1 - 22 would it be easyer using the id ? 
```

# sql - 子串的子串

> ID：15877109
> 
> 赞同：0
> 
> 时间：2013-04-08T10:43:31.230
> 
> 标签：sql, tsql, sql-server-2008-r2

我在 SQL Server 2008 中有一个存储 KPI 目标数据的文本字段（“Employs”表中名为“BiographyText”的字段）：

```
rebfirst60,
reifirst1.3,
retfirst50 
```

第一个目标是 RebFirst 的 60，第二个目标是 ReiFirst 的 1.3，第三个 RetFirst 的目标是 50。

我希望能够返回 3 个不同的数值，因为这些数值将被视为某个员工的每个 kpi 的目标。

我有一个完整的思维障碍，试图找出最好的方法来做到这一点，有什么建议/帮助吗？

总的来说，我试图找到 kpiname（“rebfirst”），然后检索接下来的 2 个字符/数字

我尝试了以下方法，但它在第一个子字符串的函数 2 上出错，因为它是非数字的：

```
select SUBSTRING(biographytext,SUBSTRING('rebfirst',1,2),2) from employs 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:12:20.760

试试这个

```
SELECT 
    CASE WHEN PatIndex('%[a-z]%',REVERSE(BiographyText)) > 0
      THEN RIGHT(BiographyText,PatIndex('%[a-z]%',REVERSE(BiographyText))-1)
      ELSE '' END AS target 
FROM employs 
```

并**[使用函数检查另一个解决方案](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/extracting-numbers-with-sql-server)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:07:27.987

从 Post***第一个目标是 60，对于 RebFirst，第二个是 ReiFirst 的 1.3，第三个目标是 50，RetFirst。***

从评论***我不需要实际的 kpiname 只是值***

下面`Query`将给你答案。

```
select case column_name when 'rebfirst60' then 60
       when 'reifirst1.3' then 1.3
       when 'retfirst50' then 50
from employs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:21:42.457

我现在通过使用以下内容获得了这个：

```
select 
SUBSTRING(SUBSTRING(biographytext,1,10),9,2) as RebookingFirst,
SUBSTRING(SUBSTRING(biographytext,11,20),12,3) as ReInventFirst,
SUBSTRING(SUBSTRING(biographytext,21,30),16,3) as ReCreateFirst,
SUBSTRING(SUBSTRING(biographytext,31,40),20,2) as RetentionFirst,
SUBSTRING(SUBSTRING(biographytext,41,50),23,2) as ReferralsFirst
from employs 
```

这给了我每个 kpi 的结果

# magento - Magento中的SetData（）错误？

> ID：15877115
> 
> 赞同：0
> 
> 时间：2013-04-08T10:43:45.823
> 
> 标签：magento

我正在尝试更新magento中customer_entity的自定义字段我正在使用以下代码：

```
$customer = Mage::getModel('customer/customer')->load($customerId);

     print_r($customer->getData());
     try {   
                     $customer->setData('field', $flag);
         $insertId = $customer->save()->getId();
             echo "Data successfully inserted. Insert ID: ".$insertId;
                      print_r($customer->getData());
        } catch (Exception $e){
         echo $e->getMessage();  
        } 
```

现在我不明白为什么它没有保存在数据库中，当我写日志时客户数据有更新的值，但是当我尝试在数据库中查看时它没有反映。

任何想法？

编辑：

```
$write = Mage::getSingleton("core/resource")->getConnection("core_write");
        $sql = "update `customer_entity` set `field` = ".$flag." where`entity_id` =".$customerId;
        $write->query($sql); 
```

此代码具有魅力，但顶部的上述代码确实有效。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T17:43:49.567

第 1 步：- 检查 config.xml 文件中的资源表名称，并清除 /var 文件夹中的缓存文件夹，然后检查。

第 2 步：- 如果第 1 步不起作用，则重新索引您的项目并进行检查。

步骤 3：- 如果步骤 1 和 2 不起作用，请检查您的表引擎类型（如果它是 InnoDB），然后将其更改为 MyISAM 并检查。

更多信息[请点击这里](http://magentoo.blogspot.com/2014/01/error-in-setdata-in-magento.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:54:26.647

首先检查以下 1\. 检查你在资源模型中的config.xml 中定义的数据库表。2.获取 $flag 的值并检查该字段是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:15:01.407

尝试清除一次缓存并从 magento 管理员重新索引！希望它有效

# python - 是否存在任何实用程序来获取给定目录下叶子文件的所有绝对路径？

> ID：15877118
> 
> 赞同：1
> 
> 时间：2013-04-08T10:43:50.543
> 
> 标签：python, directory-structure

os.listdir(path) 可以返回给定路径目录下的所有文件。我想知道是否存在任何可以进行深度遍历并返回给定目录下叶子文件的所有路径的实用程序函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:44:46.593

当然！您正在寻找[os.walk](http://docs.python.org/2/library/os.html#os.walk)：

```
import os
for root, dirs, files in os.walk(path):
    for filename in files:
        filename = os.path.join(root, filename)
        print(filename) 
```

# php - 以天为单位计算 MySQL 和 PHP 日期差异

> ID：15877121
> 
> 赞同：0
> 
> 时间：2013-04-08T10:43:58.050
> 
> 标签：php, mysql, date

我正在尝试使用 MySQL 和 PHP 日期计算日期差异。

**我的代码**

```
$ArrivalDate = $variants_data['ArrivalDate'];
$daydiff=floor((abs(strtotime(date("d/m/Y")) - strtotime($ArrivalDate))/(60*60*24))); 
```

**输出**

```
<td>'.$daydiff.'</td> 
```

**结果** 我得到了 93 天而不是 26 天（使用这个计算器得到了 26 天[http://easycalculation.com/date-day/number-of-days.php](http://easycalculation.com/date-day/number-of-days.php)）

**来自 MySQL 表的ArrivalDate**值 = 2013-05-03，并且由于传输延迟等原因而发生变化。

我怎样才能在 PHP 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:57:46.803

试试这个

```
$daydiff=floor((abs(strtotime(date("Y-m-d")) - strtotime($ArrivalDate))/(60*60*24))); 
```

只需更改您当前的日期函数格式，它就会给出您正确的答案，即 26 天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:47:52.250

使用 DateTime 类：

```
$today = new DateTime;
$oneWeekLater = clone $today;
$oneWeekLater->modify('+1 week');

$diff = $today->diff($oneWeekLater);
echo $diff->format('Y-m-d H:i:s'); 
```

[http://www.php.net/manual/en/class.datetime.php](http://www.php.net/manual/en/class.datetime.php)

[http://www.php.net/manual/en/class.dateinterval.php](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:46:45.600

```
$diff = strtotime(date("d/m/Y")) - strtotime($ArrivalDate);
echo "Difference is $diff seconds\n";
$days = floor($diff/(3600*24));
echo "Difference is $days days\n"; 
```

您也可以使用 DATEDIFF() 函数在数据库级别执行此操作。

[http://www.w3schools.com/SQl/func_datediff_mysql.asp](http://www.w3schools.com/SQl/func_datediff_mysql.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T10:59:45.810

```
$days = date("d", $timestamp1) - date("d", $timestamp2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T11:09:12.243

试试这个

```
$ArrivalDate = '2013-05-03';
echo $daydiff=floor((abs(strtotime(date("Y-m-d")) - strtotime($ArrivalDate))/(60*60*24))); 
```

您的日期函数与到达日期的格式不正确

# html - Gmail 简报中的 HTML 列

> ID：15877122
> 
> 赞同：2
> 
> 时间：2013-04-08T10:44:00.267
> 
> 标签：html, gmail, campaign-monitor

我一直在为一位客户编写这份时事通讯。一切看起来都很完美，完全符合我的要求。甚至 Outlook 也能理解时事通讯，但是……Gmail ……我真的不明白浏览器中的 Gmail 有什么问题。我有这段代码。

```
<table class="w650" width="650" cellpadding="0" cellspacing="0" border="0">
    <tbody>
        <tr>
            <td height="20"></td>
        </tr>

        <tr>
            <td width="225" bgcolor="#e1822d" valign="top" align="left">
                <div style="padding:12px 20px 0px 20px;">
                    <div style="font-family:arial;font-size:20px;color:#FFFFFF;line-height:36px;">
                        <singleline label="Title">Tenerife</singleline>
                    </div>
                    <div style="font-family:arial;font-size:11px;color:#FFFFFF;line-height:20px;">
                        <multiline label="Description">Click to see all properties <br /> Lorem Ipsum Dolor sit amet</multiline>
                    </div>
                </div>
            </td>
            <td width="425" valign="top" align="left">
                <img editable="true" src="images/side_image_01.jpg" label="Image" width="425" border="0" style="border:none;" alt="Image" />
            </td>
        </tr>
    </tbody>
</table> 
```

在所有其他邮件客户端中，它的输出如下： ![在此处输入图像描述](https://i.stack.imgur.com/pKoV0.png)

但在 Gmail 和 Gmail 中，它仅在橙色列中以额外大小输出：

![在此处输入图像描述](https://i.stack.imgur.com/2Kuq6.png)

我知道专注于它是愚蠢的，但我的 HTML 代码是防弹的，即使是旧的 Outlook 邮件客户端也能正确显示它，但 Gmail 却扭曲了它，这让我很恼火。

有谁知道我应该在 inline css 或 head css 或任何东西中输入什么 - 让 Gmail 理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:50:51.063

添加`display: block;`到图像标签的`style`属性，或者`img { display: block; }`如果您在`<style>`任何地方都有一个部分并且还需要将其应用于其他图像。

由于某种原因，Gmail 为未明确指定为`display: block`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:40:47.470

每个邮件客户端都有不同的 HTML 呈现技术。

我无法真正找出这两个图像的区别。我看到两个图像是相同的。

据我了解，我只能说，您可以设置固定宽度内联，以强制 Gmail 使用您的样式。`!important`可以帮助你强制造型。

# eclipse - Eclipse RCP：以编程方式将文件类型与编辑器关联？

> ID：15877123
> 
> 赞同：3
> 
> 时间：2013-04-08T10:44:03.267
> 
> 标签：eclipse, eclipse-plugin, editor, eclipse-rcp, file-association

**如何以编程方式将文件类型与编辑器关联？**

这就是 Eclipse-RCP Java 代码可以做的事情，通过以下 UI 交互归档：

```
Window -> Preferences
General -> Editors -> File Associations
Add... > File type: *.json
Select *.json file type 
Add... (Associated editors) > JavaScript Editor
Make it default 
```

与 Q有关
[https://stackoverflow.com/questions/12429221/eclipse-file-associations-determine-which-editor-in-list-of-associated-editors](https://stackoverflow.com/questions/12429221/eclipse-file-associations-determine-which-editor-in-list-of-associated-editors)
[Eclipse：将编辑器与内容类型](https://stackoverflow.com/questions/5859641/eclipse-associate-an-editor-with-a-content-type)
[关联 获取关联的文件扩展名一个 Eclipse 编辑器](https://stackoverflow.com/questions/10052864/get-associated-file-extensions-for-an-eclipse-editor)
[打开一个默认编辑器，在 treeviewer 选择 eclipse rcp 上（例如：因为 eclipse 知道 j.java 文件必须在文本编辑器中打开）](https://stackoverflow.com/questions/14374921/opening-a-default-editor-on-a-treeviewer-selection-eclipse-rcpeg-as-eclipse-k)

[xml配置文件的eclipse rcp更改图标](https://stackoverflow.com/questions/11483161/eclipse-rcp-change-icon-for-xml-configuration-file)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:33:12.893

我知道您的问题是“以编程方式”说的，但我会完整介绍这些方法。

如果您正在编写提供编辑器的插件，那么您应该简单地在您的 plugin.xml 中声明扩展。

```
   <扩展名
         point="org.eclipse.ui.editors">
      <编辑器
            ...
            扩展="json"
            ...

```

如果您正在分发一个完整的 RPC 应用程序，您可以编辑提供编辑器的插件的 plugin.xml 或添加一个仅引用该编辑器的插件。

但是，*如果*您必须以编程方式执行此操作，那么您就是在操纵 RPC 实例的内部。Eclipse 没有为此提供公共 API，但这段代码可以做到：

```
 // error handling is omitted for brevity
    String extension = "json";
    String editorId = "theplugin.editors.TheEditor";

    EditorRegistry editorReg = (EditorRegistry)PlatformUI.getWorkbench().getEditorRegistry();
    EditorDescriptor editor = (EditorDescriptor) editorReg.findEditor(editorId);
    FileEditorMapping mapping = new FileEditorMapping(extension);
    mapping.addEditor(editor);
    mapping.setDefaultEditor(editor);

    IFileEditorMapping[] mappings = editorReg.getFileEditorMappings();
    FileEditorMapping[] newMappings = new FileEditorMapping[mappings.length+1];
    for (int i = 0; i < mappings.length; i++) {
        newMappings[i] = (FileEditorMapping) mappings[i];
    }
    newMappings[mappings.length] = mapping;
    editorReg.setFileEditorMappings(newMappings); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T05:39:27.660

关联文件类型意味着将您的编辑器的内容与预定义的内容关联。这可以通过 plugin.xml 轻松实现。只需点击以下链接：-

Eclipse 帮助文档

[http://help.eclipse.org/indigo/index.jsp](http://help.eclipse.org/indigo/index.jsp)

并搜索 org.eclipse.core.contenttype.contentTypes。

# java - 在android中嵌套倒数计时器

> ID：15877126
> 
> 赞同：0
> 
> 时间：2013-04-08T10:44:09.063
> 
> 标签：java, android, timer

我想`CountDownTimer`在一个`countdownTimer`完成它的执行时调用它。我尝试从另一个方法调用一个，`countdowntimer`但是当我运行这段代码时它给了我。`countdown timer``onFinish()``nullpointer exception`

```
public void First_Timer(){
    Timer_Off =false;

    dialog = new Dialog(context,android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
    dialog.setCancelable(false);
    dialog.setContentView(R.layout.backwash_timer_dialog);

    final ToggleButton togglebtn_BW_timer = (ToggleButton)dialog.findViewById(R.id.togglebtn_BW_timer);
    final ProgressBar bar = (ProgressBar)dialog.findViewById(R.id.progressBar1);
     textView1 = (TextView)dialog.findViewById(R.id.textView1);
     btn_BW_timer_stop = (Button)dialog.findViewById(R.id.btn_BW_timer_stop);
    /** CountDownTimer starts with 2 minutes and every onTick is 1 second */
    cdt = new CountDownTimer(twoMin, 1000) { 

        public void onTick(long millisUntilFinished) {

            bar.setProgress((int) ((millisUntilFinished / 1000) ));
           messageHandler.sendMessage(Message.obtain(messageHandler,(int) ((millisUntilFinished / 1000) ) ));

        }

        public void onFinish(){
            textView1.setText("Time Up! ");
            cdt.cancel();
            Timer_Off =true;
            dialog.dismiss();

           // Call Second Timer Here

            Second_Timer();

        }
    }.start();

    btn_BW_timer_stop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            cdt.cancel();
            bar.setProgress(0);
            textView1.setText("0");
            Timer_Off=true;
            dialog.dismiss();
            //onBackwashStopped();
        }
    });
    dialog.show();

} 
```

另一个计时器的代码是，

```
 public void Second_Timer(){
    Timer_Rinse_Off =false;

    dialog_Rinse = new Dialog(context,android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
    dialog_Rinse.setCancelable(false);
    dialog_Rinse.setContentView(R.layout.rinse_timer_dialog);

    final ProgressBar bar = (ProgressBar)dialog.findViewById(R.id.progressbar_Rinse);
    txtRinse_TimerVal = (TextView)dialog.findViewById(R.id.txtRinse_TimerVal);
     btn_Rinse_timer_stop = (Button)dialog.findViewById(R.id.btn_Rinse_timer_stop);
    /** CountDownTimer starts with 2 minutes and every onTick is 1 second */
    cdt_Rinse = new CountDownTimer(twoMin, 1000) { 

        public void onTick(long millisUntilFinished) {

            bar.setProgress((int) ((millisUntilFinished / 1000) ));
           messageHandler.sendMessage(Message.obtain(messageHandler,(int) ((millisUntilFinished / 1000) ) ));

        }

        public void onFinish(){
            txtRinse_TimerVal.setText("Time Up! ");
            Timer_Rinse_Off =true;
            dialog_Rinse.dismiss();
        }
    }.start();

    btn_Rinse_timer_stop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            cdt_Rinse.cancel();
            bar.setProgress(0);
            txtRinse_TimerVal.setText("0");
            Timer_Rinse_Off=true;
            dialog_Rinse.dismiss();
            //onBackwashStopped();
        }
    });
    dialog_Rinse.show();

} 
```

# linux-kernel - pause() 系统调用的系统调用处理程序在哪里？

> ID：15877132
> 
> 赞同：0
> 
> 时间：2013-04-08T10:44:30.867
> 
> 标签：linux-kernel, system-calls

我可以在 syscall_table 中找到声明和条目，但我找不到任何架构的任何定义。

[http://lxr.linux.no/linux+v2.6.36/include/linux/syscalls.h#L384](http://lxr.linux.no/linux+v2.6.36/include/linux/syscalls.h#L384)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:50:10.873

它定义在`kernel/signal.c`：

```
SYSCALL_DEFINE0(pause)
{
    while (!signal_pending(current)) {
        current->state = TASK_INTERRUPTIBLE;

    /* .... */ 
```

# android - 自己调用 onLocationChange

> ID：15877134
> 
> 赞同：0
> 
> 时间：2013-04-08T10:44:36.647
> 
> 标签：android, locationlistener

我有一个简单的问题。正如 Android 开发者[文档](http://developer.android.com/guide/topics/location/strategies.html#Updates)所述：

> 您可以使用第二个和第三个参数控制您的侦听器接收更新的频率——第二个是通知之间的最小时间间隔，第三个是通知之间的最小距离变化——将两者都设置为零请求位置通知尽可能频繁.

但我从来没有见过`onLocationChange`自己调用。不会`onLocationChange`被自己调用。无论是基于时间还是基于距离。如果是，如何复制它。

我在我的代码中添加了这一行`locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 200000, 100, locListener);`

但`location`永远不会自行改变。我是否还需要添加一些其他的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:59:24.710

您必须添加该事件。

```
`LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
 locListener = new LocationListener() {
        public void onLocationChanged(Location location) {
               try {

                   lat = location.getLatitude ();
                   lon = location.getLongitude ();

                   mapView.getController().setCenter(new GeoPoint(lat, lon));
                   //or something

                 }
                 catch (NullPointerException e){
                   lat = -1.0;
                   lon = -1.0;
                 }
        }` 
```

并在某些事件中添加它（onCreate、onClick 等）

# android - 如何更改 ViewPagers 页面内的视图

> ID：15877138
> 
> 赞同：0
> 
> 时间：2013-04-08T10:44:47.543
> 
> 标签：android, layout, android-viewpager

这是来自我的**自定义 PageAdapter：**

```
public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View view = null;
    switch (position) {
    case 0: view = dMngr.GetView(inflater); 
        break;
    case 1: view = mMngr.GetView(inflater); 
        break;
    case 2: view = cMngr.GetView(inflater); 
        break;
    }   
    ((ViewPager) collection).addView(view, 0);
    return view;
} 
```

这是**cMngr.GetView**代码：

```
public View GetView(LayoutInflater inflater){
    View view = null;
    if (showCamDetail){
        view = inflater.inflate(R.layout.cam_view, null);
        ((Button)view.findViewById(R.id.button1)).setOnClickListener(myhandler2);
    } else {
        view = inflater.inflate(R.layout.cams_view, null);  
        ((ImageView)view.findViewById(R.id.imageView1)).setOnClickListener(myhandler);
    }
    return view;
}

View.OnClickListener myhandler = new View.OnClickListener() {
    public void onClick(View v) {
        showCamDetail = true;
        hPageAdapter.notifyDataSetChanged();
    }
};
View.OnClickListener myhandler2 = new View.OnClickListener() {
    public void onClick(View v) {
        showCamDetail = false;
        hPageAdapter.notifyDataSetChanged();
    }
}; 
```

`layout`仅当我滑动到第一页然后回到第三页时，此代码才会在第三页上更改。`layout`单击我的`ImageView`或后，我需要立即更改它`Button`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:55:10.733

如果两个视图状态之间的差异不是太复杂，请将它们都包含在同一布局中，`View.setVisibility(View.GONE)`并`View.setVisibility(View.VISIBLE)`根据需要选择性地隐藏/显示其中的一部分。您可以`setTag()`在充气后进行布局，以便以后更容易找到它，`findViewByTag()`并且您可以应用可见性更改。

# xamarin.ios - 在 MvvmCross 上为多个平台共享颜色转换器 (mvvmcross v3)

> ID：15877139
> 
> 赞同：2
> 
> 时间：2013-04-08T10:44:47.953
> 
> 标签：xamarin.ios, xamarin.android, mvvmcross

在这个问答中回答的问题是我们如何使用 mvvmcross 在我们的 UI 项目上显示颜色，当我们有一个带有例如枚举属性的 ViewModel 时，不需要有 Color 属性，也没有每个平台的 ValueConverter。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T10:44:47.953

假设你有一个像这样的视图模型

```
public enum MyEnum
{
   Value1,
   Value2
}
public class MyViewModel : MvxViewModel
{
   public MyEnum MyEnumProp { get... set...}
} 
```

假设你想为 Value1 显示 Azure 颜色，为 Value2 显示黑色，你可以在你的核心项目上实现这个转换器。

```
public class MyEnumToColorConverter: MvxValueConverter<MyEnum, object>
{
    protected override object Convert (Multiplier value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        MvxColor mvxColor = null;
        switch (value) {
        case MyEnum.Value1:
            mvxColor = new MvxColor(240,255,255);
            break;
        case MyEnum.Value2:
            mvxColor = new MvxColor(0,0,0);
            break;
        default:
            mvxColor = new MvxColor(0,0,0);
            break;
        }

        var nativeColorConv = Mvx.Resolve<IMvxNativeColor>();

        return nativeColorConv.ToNative (mvxColor);
    }
} 
```

诀窍是打电话`Mvx.Resolve<IMvxNativeColor>()`。在您的 UI 项目中，如果您加载了正确的颜色插件，您将自动为您的平台获得正确的颜色实现。

请记住将此行添加到您的 Setup.cs（如果添加颜色插件 Nuget 包，它会自动将其添加到 Bootstrap 文件夹，则不需要）。

```
Cirrious.MvvmCross.Plugins.Color.PluginLoader.Instance.EnsureLoaded(); 
```

# ios - iCarousel 旋转模式滚动视图一一/分页

> ID：15877143
> 
> 赞同：3
> 
> 时间：2013-04-08T10:45:05.837
> 
> 标签：ios, icarousel

我在旋转模式下使用 iCarousel。我想让我的视图以分页的方式一一滚动。我尝试了很多设置，但无法做到这一点。

我正在寻找的设置有点像 UIScrollView 中的“pagingEnabled”，但另外一个滑动动作不应该滚动超过一个视图。我试图在“carouselCurrentItemIndexDidChange”方法中执行“[停止动画]”，但没有运气。

我首先认为 stopAtItemBoundary 属性可以让我这样做，但事实并非如此。我只是说轮播会停在一个项目上，但我让用户一次滑动多个。

任何人 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:50:50.810

将 decelerationRate 设置为较低的值，例如 0.5。

您可能需要调整此值以适合您的视图大小，但它会减少旋转木马在轻弹时移动的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-14T17:11:26.650

设置'isPagingEnabled = true'。这会有所帮助

这在最新版本的 iCarousel 中可用。但它不会帮助自动滚动。

# ios - 标签边框不出现 (iOS)

> ID：15877144
> 
> 赞同：1
> 
> 时间：2013-04-08T10:45:08.987
> 
> 标签：ios, objective-c, uilabel, border

我`title_label`在 Interface Builder 中创建了一个文本标签 ( )，我已经在我的`FirstViewController.h`文件中声明了它，现在我想给它添加一个边框。我已经添加了执行此操作的代码，但是当我运行应用程序时，边框根本不会出现。

这是代码：

```
#import "FirstViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface FirstViewController ()

@end

@implementation FirstViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    title_label.layer.borderColor = [UIColor greenColor].CGColor;
    title_label.layer.borderWidth = 4.0;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

这是的内容`FirstViewController.h`：

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController {

IBOutlet UILabel *title_label;

}

@end 
```

![故事板](https://i.stack.imgur.com/T7Kri.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:32:06.370

```
#import <QuartzCore/QuartzCore.h>

- (void)viewDidLoad
{
    [super viewDidLoad];
    UILabel *title_label = [[UILabel alloc]initWithFrame:CGRectMake(20, 30, 150, 40)];
    title_label.text = @"Text Which Comes";
    title_label.layer.borderColor = [UIColor greenColor].CGColor;
    title_label.layer.borderWidth = 4.0;
    title_label.layer.cornerRadius = 5.0;
    [self.view addSubview:title_label];
} 
```

**进口** `QuartzCore` **框架**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:57:22.487

我已经尝试过使用相同的代码，对我来说它工作正常。我想你可能会忘记

![在此处输入图像描述](https://i.stack.imgur.com/Xl7vj.png)

1.用`IBOutlet`and声明

2.用xib标签连接。

再次检查

# google-apps-script - Google 电子表格：突出显示最后一行

> ID：15877146
> 
> 赞同：0
> 
> 时间：2013-04-08T10:45:13.867
> 
> 标签：google-apps-script, google-sheets

如何让我的 Google 电子表格自动以不同颜色突出显示工作表的最后一行，通常是总计？

我收到以下错误：-

TypeError：在对象 85 中找不到函数 setBackgroundColor。（第 19 行，文件“代码”）

我正在使用下面的脚本没有运气..

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();

var last_row = sheet.getLastRow()
last_row.setBackgroundColor("green"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:09:50.630

[getLastRow()](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getLastRow%28%29)返回一个整数，表示工作表中最后填充的行的编号，因此这只是开始。您需要[使用此数字获取范围对象](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getRange%28Integer,Integer,Integer,Integer%29)才能应用 set 方法。

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
var last_row = sheet.getLastRow(); //last populated row in sheet
var last_col = sheet.getLastColumn(); // last populated column in sheet
var range = sheet.getRange(last_row, 1, 1, last_col); //gets the range corresponding with the last populated row in the sheet
range.setBackground("green"); 
```

[顺便说一句](https://developers.google.com/apps-script/reference/spreadsheet/range#getBackgroundColor%28%29)，现在不推荐使用[setBackgroundColor()](https://developers.google.com/apps-script/reference/spreadsheet/range#setBackground%28String%29) ，请改用 setBackground() 。

# asp.net-mvc - 创建强类型自定义 html 助手？

> ID：15877150
> 
> 赞同：1
> 
> 时间：2013-04-08T10:45:29.357
> 
> 标签：asp.net-mvc, razor, html-helper

我为出生日期创建了自定义助手，如下所示。

> 自定义 Html Helper 方法

```
public static MvcHtmlString DateOfBirthFor(this HtmlHelper html, string id ,int minYear, int maxYear, object htmlAttribute = null)
    {
        RouteValueDictionary attributes = new RouteValueDictionary(htmlAttribute);

        var days = Enumerable.Range(1, 31).Select(x => new SelectListItem
        {
            Value = x.ToString(),
            Text = x.ToString()
        });
        var months = Enumerable.Range(1, 12).Select(x => new SelectListItem
        {
            Value = x.ToString(),
            Text = x.ToString()
        });
        var years = Enumerable.Range(minYear, maxYear-(minYear-1)).Select(x => new SelectListItem
        {
            Value = x.ToString(),
            Text = x.ToString()
        });

        var mainDivTag = new TagBuilder("div");
        mainDivTag.MergeAttribute("id", id);
        mainDivTag.MergeAttributes(attributes);
        mainDivTag.InnerHtml = string.Concat(
            html.DropDownList("Day", days, new { style="width : 40px "}).ToHtmlString(),
            html.DropDownList("Month", months, new { style = "width : 40px " }).ToHtmlString(),
            html.DropDownList("Year", years, new { style = "width : 60px " }).ToHtmlString()
        );

        return new MvcHtmlString(mainDivTag.ToString());
    } 
```

我还为同一个控件编写了自定义活页夹。

```
protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
    {
        if (propertyDescriptor.Name == "DateOfBirth")
        {
            DateTime dob = new   DateTime(int.Parse(controllerContext.HttpContext.Request.Form["Year"]), int.Parse(controllerContext.HttpContext.Request.Form["Month"]), int.Parse(controllerContext.HttpContext.Request.Form["Day"]));
            propertyDescriptor.SetValue(bindingContext.Model, dob);
        } 
```

}

但是，现在我必须为同一个控件制作强烈的自定义助手。所以，我不必编写自定义绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:41:21.753

如果没有自定义模型绑定器，就无法实现这一目标。这样做的原因是因为在您编写的自定义帮助程序中，下拉列表与特定名称（日、月和年）绑定，并且默认模型绑定器无法将这 3 个值绑定到单个 DateTime 实例。

# ios - 将 RTF 文件解析为 NSArray - 目标 C

> ID：15877151
> 
> 赞同：1
> 
> 时间：2013-04-08T10:45:36.880
> 
> 标签：ios, objective-c, nsarray, rtf, text-parsing

我正在尝试将 RTF 文件中的英语词典解析为数组。

我最初让它工作，但我不知道为什么现在不行。

在字典中，每个单词都由一个新行 (\n) 分隔。到目前为止，我的代码是：

```
//loading the dictionary into the file and pull the content from the file into memory
NSData *data = [NSData dataWithContentsOfFile:@"wordList.rtf"];

//convert the bytes from the file into a string
NSString *string = [[NSString alloc] initWithBytes:[data bytes]
                                             length:[data length]
                                           encoding:NSUTF8StringEncoding];
//split the string around newline characters to create an array
NSArray *englishDictionary = [string componentsSeparatedByString:@"\n"]; 
```

当我尝试使用 NSLog 它时，它只是出现（null）......

我已经看过：[Objective-C：逐行读取文件](https://stackoverflow.com/questions/1044334/objective-c-reading-a-file-line-by-line)

但无法通过 Yoon Lee 正常工作得到答案。它在末尾打印出两个反斜杠，并且在开头打印出许多不必要的东西！

任何帮助将不胜感激！干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:49:53.613

尝试使用纯文本 (txt) 文件而不是 rtf。RTF 文件还包含有关文本的格式信息。那是您在阅读内容后看到的不必要的东西。

# django - /boardeditor/ 处的 MultiValueDictKeyError

> ID：15877155
> 
> 赞同：0
> 
> 时间：2013-04-08T10:45:48.590
> 
> 标签：django

我有一个生成 2 个表单的模板。表单用于通过 POST 检索数据

问题是当用户通过 POST 篡改数据时，例如删除名为 process 的输入属性名称。

-----------------------------4827543632391\r\n内容-处置：表单-数据；name="csrfmiddlewaretoken"\r\n\r\nYWSIqoP9MjdKYlauwT5fSdxtFH2rcoaH\r\n-----------------------------4827543632391\r\ nContent-Disposition：表单数据；名称="板"\r\n\r\n\r\n-----------------------------4827543632391\r\ nContent-Disposition：表单数据；name="进程"\r\n\r\ndelete\r\n-----------------------------4827543632391--\ r\n

如果用户从名称中删除值过程，我会收到此错误。

如何解决此错误并防止用户篡改表单。

```
MultiValueDictKeyError at /whiteboardeditor/

Key 'process' not found in <QueryDict: {u'': [u'delete'], u'csrfmiddlewaretoken':     [u'YWSIqoP9MjdKYlauwT5fSdxtFH2rcoaH'], u'board': [u'2']}>
File "C:\o\17\mysite\pet\views.py" in WhiteBoardEditor
  362\.             if request.POST['process'] == 'primary':
File "C:\Python26\lib\site-packages\django\utils\datastructures.py" in __getitem__
  258\.             raise MultiValueDictKeyError("Key %r not found in %r" % (key, self))

Exception Type: MultiValueDictKeyError at /whiteboardeditor/
Exception Value: Key 'process' not found in <QueryDict: {u'': [u'delete'],     u'csrfmiddlewaretoken': [u'YWSIqoP9MjdKYlauwT5fSdxtFH2rcoaH'], u'board': [u'2']}> 
```

我的html

```
 <form method="POST" enctype="multipart/form-data">
     {% csrf_token %}
    {{ boardpicture.as_p }}
<input type = "hidden" name="process" value= "primary" />
<input type = "submit" value= "save" />
 </form>

      {% for p in picture %}
 <li><a href ="{% url world:delpic p.id 1 %}">{{p.description}}</a>
 {% endfor %}

 <form method="POST" enctype="multipart/form-data">
     {% csrf_token %}
    {{ picturedelete.as_p }}
    <input type = "hidden" name="process" value= "delete" />
    <input type = "submit" value= "save" />

 </form>

 </form>
 {% for pi in pict %}
 <li><a href ="{% url world:delpic pi.id 2 %}">{{ pi.description }}</a>
 {% endfor %} 
```

我的观点.py

```
def WhiteBoardEditor(request):
    if not request.user.is_authenticated():
    return HttpResponseRedirect(reverse('world:LoginRequest'))
picture = {}
pict = {}

if request.method == "POST":
        forms = WhiteBoardPictureForm(request.user,request.POST,)
        formss = PictureDeleteForm(request.user,request.POST,)
        if request.POST['process'] == 'primary':
            if forms.is_valid():
                board = forms.cleaned_data['board']
            if board:
                boards = forms.cleaned_data['board']
                picture = Picture.objects.filter(board=boards)
            return render(request,'boardeditor.html',{
                'picture':picture, 
                'boardpicture':WhiteBoardPictureForm(request.user), 
                'picturedelete':PictureDeleteForm(request.user)})

        elif request.POST['process'] == 'delete':
            if formss.is_valid():
                pooh = formss.cleaned_data['board']
                if pooh:
                    pooh = formss.cleaned_data['board']
                    pict = Picture.objects.filter(board=pooh)
            return render(request,'boardeditor.html',{
            'pict':pict, 
            'boardpicture':WhiteBoardPictureForm(request.user), 
            'picturedelete':PictureDeleteForm(request.user)})

            return render(request,'boardeditor.html',{'board':WhiteBoardNameForm(request.user),'boardpicture':WhiteBoardPictureForm(request.user),'picturedelete':PictureDeleteForm(request.user)}) 
```

我的观点.py

```
class WhiteBoardPictureForm(forms.ModelForm):

        def __init__(self, user, *args, **kwargs):
                super(WhiteBoardPictureForm, self).__init__(*args, **kwargs)
                self.fields['board'].queryset = Board.objects.filter(user=user)

    class Meta:
        model = Picture 
        fields = ('board',)

class PictureDeleteForm(forms.ModelForm):

        def __init__(self, user, *args, **kwargs):
                super(PictureDeleteForm, self).__init__(*args, **kwargs)
                self.fields['board'].queryset = Board.objects.filter(user=user)

    class Meta:
        model = Picture 
        fields = ('board',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:51:11.290

您应该在处理之前验证表单`form.is_valid()`，如果它无效，则返回带有表单和错误的适当页面。

如果表单`form.cleaned_data`对发布的数据有效，而不是`request.POST`.

以下是如何[使用表单 在视图中使用表单](https://docs.djangoproject.com/en/dev/topics/forms/#using-a-form-in-a-view)

因此，您可以`process`在表单中添加输入字段。

或者对于这个特定的实例，您可以在处理表单之前在视图中添加一个检查

```
if request.POST.has_key('process'):
    # return error 
```

# php - 无法让 Highcharts x 轴日期工作

> ID：15877157
> 
> 赞同：0
> 
> 时间：2013-04-08T10:45:53.540
> 
> 标签：php, json, date, highcharts

我已经在 Stackoverflow 中搜索了高低，以解决这个日期问题。我真的很难让日期显示在图表上，并且正确设置了点。

这是JS脚本：

```
$(document).ready(function() {
                            var options = {
                                chart: {
                                        renderTo: 'drawing',
                                        zoomType: 'x',
                                        width: 900,
                                        height: 222
                                    },
                                    exporting: {
                                      enabled: true      
                                    },
                                    title: {
                                        text: url+' - '+keyword
                                    },
                                    credits: {
                                        text: 'Testing',
                                        href: ''
                                    },
                                    xAxis: {
                                        type: 'datetime'
                                    },
                                    yAxis: [{
                                        allowDecimals: false,
                                        reversed: true,
                                        title: {
                                            text: 'Rankings'
                                        }
                                    },],
                                    tooltip: {
                                        crosshairs: true,
                                        shared: true
                                    },
                                    series: [{}]
                            };  

                                var url =  "****/chart.php";
                                $.getJSON(url,  function(data1){                            

                                options.series = data1;
                                var chart = new Highcharts.Chart(options);
                            });                          
                        }); 
```

这就是我们为 JSON 生成的 PHP 脚本

```
[{"name":"Google Rank","data":[["Date.UTC(2013, 3, 08)",23],["Date.UTC(2013, 3, 05)",24],["Date.UTC(2013, 3, 04)",23],["Date.UTC(2013, 3, 03)",22],["Date.UTC(2013, 3, 02)",24],["Date.UTC(2013, 3, 01)",26],["Date.UTC(2013, 2, 31)",24],["Date.UTC(2013, 2, 30)",24],["Date.UTC(2013, 2, 29)",25],["Date.UTC(2013, 2, 28)",25],["Date.UTC(2013, 2, 27)",25],["Date.UTC(2013, 2, 26)",26],["Date.UTC(2013, 2, 25)",25],["Date.UTC(2013, 2, 24)",24],["Date.UTC(2013, 2, 23)",0],["Date.UTC(2013, 2, 22)",10],["Date.UTC(2013, 2, 21)",10],["Date.UTC(2013, 2, 20)",10],["Date.UTC(2013, 2, 19)",10],["Date.UTC(2013, 2, 18)",10],["Date.UTC(2013, 2, 17)",10],["Date.UTC(2013, 2, 16)",9],["Date.UTC(2013, 2, 15)",9],["Date.UTC(2013, 2, 14)",9],["Date.UTC(2013, 2, 13)",9]],"visible":true,"pointInterval":86400000,"showInLegend":true},{"name":"Bing Rank","data":[["Date.UTC(2013, 3, 08)",0],["Date.UTC(2013, 3, 05)",0],["Date.UTC(2013, 3, 04)",0],["Date.UTC(2013, 3, 03)",0],["Date.UTC(2013, 3, 02)",0],["Date.UTC(2013, 3, 01)",0],["Date.UTC(2013, 2, 31)",0],["Date.UTC(2013, 2, 30)",0],["Date.UTC(2013, 2, 29)",0],["Date.UTC(2013, 2, 28)",0],["Date.UTC(2013, 2, 27)",0],["Date.UTC(2013, 2, 26)",0],["Date.UTC(2013, 2, 25)",0],["Date.UTC(2013, 2, 24)",0],["Date.UTC(2013, 2, 23)",0],["Date.UTC(2013, 2, 22)",0],["Date.UTC(2013, 2, 21)",0],["Date.UTC(2013, 2, 20)",0],["Date.UTC(2013, 2, 19)",0],["Date.UTC(2013, 2, 18)",0],["Date.UTC(2013, 2, 17)",0],["Date.UTC(2013, 2, 16)",0],["Date.UTC(2013, 2, 15)",0],["Date.UTC(2013, 2, 14)",0],["Date.UTC(2013, 2, 13)",0]],"visible":true,"pointInterval":86400000,"showInLegend":true},{"name":"Yahoo Rank","data":[["Date.UTC(2013, 3, 08)",0],["Date.UTC(2013, 3, 05)",0],["Date.UTC(2013, 3, 04)",0],["Date.UTC(2013, 3, 03)",0],["Date.UTC(2013, 3, 02)",0],["Date.UTC(2013, 3, 01)",0],["Date.UTC(2013, 2, 31)",0],["Date.UTC(2013, 2, 30)",0],["Date.UTC(2013, 2, 29)",0],["Date.UTC(2013, 2, 28)",0],["Date.UTC(2013, 2, 27)",0],["Date.UTC(2013, 2, 26)",0],["Date.UTC(2013, 2, 25)",0],["Date.UTC(2013, 2, 24)",0],["Date.UTC(2013, 2, 23)",0],["Date.UTC(2013, 2, 22)",0],["Date.UTC(2013, 2, 21)",0],["Date.UTC(2013, 2, 20)",0],["Date.UTC(2013, 2, 19)",0],["Date.UTC(2013, 2, 18)",0],["Date.UTC(2013, 2, 17)",0],["Date.UTC(2013, 2, 16)",0],["Date.UTC(2013, 2, 15)",0],["Date.UTC(2013, 2, 14)",0],["Date.UTC(2013, 2, 13)",0]],"visible":true,"pointInterval":86400000,"showInLegend":true}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:12:21.907

在 JSON 中，您不能使用 Date.UTC() 之类的函数，因此我建议使用时间戳编号。

# c# - 对类型化数据集进行排序

> ID：15877163
> 
> 赞同：0
> 
> 时间：2013-04-08T10:46:14.147
> 
> 标签：c#, sql, linq, strongly-typed-dataset

我有一个报告工具的服务器-客户端架构，服务器生成报告，客户端显示它。

我创建了一个带有一个表的强类型数据集，并用数据行填充它。数据集始终是断开连接的，因为我用与 LINQ to Entities 一起运行的代码填充它。数据集的目的是显示在报告中，我使用的是类型化数据集，以便服务器和客户端在列名、类型等方面保持同步......

现在，我希望数据集中的数据按某些列排序，我知道如何使用数据视图来执行此操作，但是由于没有强类型的数据视图，因此使用无类型的数据视图似乎违背了使用类型数据集的目的.

我将不胜感激有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:58:59.927

这个建议不是正确的方法，使用数据视图要好得多，因为您只会处理数据的单个副本。

```
MyDataSet.MyDataRow[] drArray = (MyDataSet.MyDataRow[]) myDataTable.Select(filterString, sortString, DataViewRowState.OriginalRows);
MyDataSet.MyDataTable dt = (MyDataSet.MyDataTable) myDataTable.Clone();
if (dr.Length != 0) 
{
    foreach (MyDataSet.MyDataRow dr in drArray) 
    {
        dt.ImportRow(dr);
    }
} 
```

参考来自：[http ://social.msdn.microsoft.com/Forums/en-US/adodotnetdataset/thread/da8793cc-5227-4871-a5aa-dfb59c74d8d4/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataset/thread/da8793cc-5227-4871-a5aa-dfb59c74d8d4/)

# c# - 使用 asp:FileUpload (ASP.NET - C#) 在上传期间调整大小时如何保持图像的纵横比

> ID：15877165
> 
> 赞同：1
> 
> 时间：2013-04-08T10:46:17.120
> 
> 标签：c#, asp.net, image-resizing, image-uploading, aspect-ratio

这是我的 aspx 代码：

```
<asp:FileUpload ID="FileUpload2" runat="server" Width="500px" />
            <asp:Button ID="btnUploadImg" runat="server" onclick="btnNahrajObrazek_Click" Text="Nahrát obrázek" Height="35px" Width="150px" /> 
```

这是我背后的代码：

```
protected void btnUploadImg_Click(object sender, EventArgs e)
    {
        string input = Request.Url.AbsoluteUri;
        string output = input.Substring(input.IndexOf('=') + 1);
        string fileName = Path.GetFileName(FileUpload2.PostedFile.FileName);

        int width = 800;
        int height = 600;
        Stream stream = FileUpload2.PostedFile.InputStream;

        Bitmap image = new Bitmap(stream);

        Bitmap target = new Bitmap(width, height);
        Graphics graphic = Graphics.FromImage(target);
        graphic.DrawImage(image, 0, 0, width, height);
        target.Save(Server.MapPath("~/Uploads/" + output + "/") + fileName);
    } 
```

我想保持正在上传的图像的纵横比，所以我只需要设置宽度或设置宽度，如 100% 和高度 400 或类似的东西？但是不知道怎么做。

如果这是不可能的，图像裁剪就足够了，但我想先更好。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:00:43.493

所以这是我根据我在这里找到的解决方案：http: [//www.nerdymusings.com/LPMArticle.asp?ID=32](http://www.nerdymusings.com/LPMArticle.asp?ID=32)

```
string input = Request.Url.AbsoluteUri;
        string output = input.Substring(input.IndexOf('=') + 1);
        string fileName = Path.GetFileName(FileUpload2.PostedFile.FileName);

        Stream stream = FileUpload2.PostedFile.InputStream;

        Bitmap sourceImage = new Bitmap(stream);

        int maxImageWidth = 800;

        if (sourceImage.Width > maxImageWidth)
        {
            int newImageHeight = (int)(sourceImage.Height * ((float)maxImageWidth / (float)sourceImage.Width));
            Bitmap resizedImage = new Bitmap(maxImageWidth, newImageHeight);
            Graphics gr = Graphics.FromImage(resizedImage);
            gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
            gr.DrawImage(sourceImage, 0, 0, maxImageWidth, newImageHeight);
            // Save the resized image:
            resizedImage.Save(Server.MapPath("~/Uploads/" + output + "/") + fileName);
        }
        else
        {
            sourceImage.Save(Server.MapPath("~/Uploads/" + output + "/") + fileName);
        } 
```

我认为这很简单，也很有效。

# php - 剑道自动补全问题

> ID：15877169
> 
> 赞同：0
> 
> 时间：2013-04-08T10:46:26.947
> 
> 标签：php, kendo-ui

我正在处理剑道自动完成。但它不能正常工作。我不明白问题是什么。这是我的代码。请帮我解决这个问题。

```
$("#autocomplete").kendoAutoComplete({
   minLength : 1,
       dataSource: new kendo.data.DataSource({
       serverFiltering: true,
       dataType: "json",
           transport: {
               read:  {
                        url: "data/emp_det.php",
            parameterMap: function(options, operation) {
                                return {
                                    StartsWith: options.filter.filters[0].value
                                }
                            }
               },
           },
           schema: {
               data: "data"
           },

   }),
   dataTextField: "user_name",
     });

})(jQuery, kendo); 
```

我的 php 文件是

```
<?php
$db = new PDO('mysql:host=localhost;dbname=abc', 'root', '');
    $arr = array();
    $stmt = $db->prepare("SELECT id, user_name FROM employee WHERE user_name LIKE ?");
if ($stmt->execute(array($_GET["StartsWith"]. "%"))) {
    while ($row = $stmt->fetch()) {
        $arr[] = $row;    
    }
    }
    header("Content-type: application/json");
    echo "{\"data\":" .json_encode($arr). "}";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:06:39.377

`parameterMap`是[这里](http://docs.kendoui.com/api/framework/datasource#configuration-transport.parameterMap)`transport`的文档而不是来自`read`文档的对象。

它应该是：

```
$("#autocomplete").kendoAutoComplete({
    minLength : 1,
    dataSource: new kendo.data.DataSource({
        serverFiltering: true,
        dataType: "json",
        transport: {
            read:  {
                url: "data/emp_det.php"
            },
            parameterMap: function(options, operation) {
                return {
                    StartsWith: options.filter.filters[0].value
                }
            }
        },
        schema: {
            data: "data"
        }
    }),
    dataTextField: "user_name"
}); 
```

# android - 操作栏样式问题

> ID：15877181
> 
> 赞同：2
> 
> 时间：2013-04-08T10:47:01.870
> 
> 标签：android, styles, android-actionbar, actionbarsherlock

我需要在操作栏中添加一个下拉列表。我尝试了很多不同的方法来做到这一点，但每一种都展示了它的特定缺陷。这是其中 2 次尝试的结果。

![在此处输入图像描述](https://i.stack.imgur.com/BUjMs.png)

鞋面是一个微调器，通过 . 添加到操作栏中`actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);`。除了整个应用程序主题（即`@style/Theme.Sherlock`. （应用程序必须在新旧设备上看起来一致，因此使用了 ActionBarSherlock。）如您所见，此方法在深色/黑色背景上生成黑色文本颜色。所选元素在操作栏中以黑色字体在黑色背景上“显示”。（默认情况下它是`android.R.layout.simple_spinner_item`和`android.R.layout.simple_spinner_dropdown_item`布局，但我也尝试了引用不同可用样式的自定义布局）。

例如：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, test);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
actionBar.setListNavigationCallbacks(adapter, new ActionBar.OnNavigationListener()
... 
```

第二个是菜单。就颜色而言，它看起来还可以。我想在微调器中使用相同的样式（颜色、字体大小、对齐方式）。但是在玩了很多在互联网上找到的建议后，我无法得到这个，特别是在 SO 上。请注意，我不想在自定义样式中指定硬编码颜色。我想从现有样式（系统或 Sherlock 的全息主题）中继承它们。在 API 级别 10 上应该知道父样式。无论如何，这些是菜单可接受的样式。我只需要把它移到微调器上。

菜单方法可能是一种解决方法，但它缺少右下角的小三角形，表示将向用户呈现下拉菜单。我知道它来自可绘制的微调器状态列表，我可以将相同的背景应用于菜单项。但是，它会影响所有菜单项，而我只需要在带有子菜单的项目上显示三角形。

我很欣赏任何一个方向的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:54:46.683

尝试示例中的代码：

```
 mLocations = getResources().getStringArray(R.array.locations);

    Context context = getSupportActionBar().getThemedContext();
    ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.locations, R.layout.sherlock_spinner_item);
    list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this); 
```

取自：[http ://bit.ly/19mJdLK](http://bit.ly/19mJdLK)

# java - 从聊天中删除用户 (Java)

> ID：15877187
> 
> 赞同：1
> 
> 时间：2013-04-08T10:47:15.253
> 
> 标签：java, arrays, multithreading, hashtable

我使用 Java 开发了一个客户端/服务器聊天应用程序，我想知道如何从数组中删除用户。当特定客户端登录时，用户名保存在用户名数组中，客户端 ID 保存在客户端数组中。为了让服务器接受多个客户端，我使用线程。现在任何人都可以指导我如何从阵列中删除用户并关闭该用户的连接。

添加新客户端并将 ID 保存在客户端数组中

```
public class AddClient implements Runnable {

    Thread t;

    AddClient(String tot) {
        t = new Thread(this, tot);
        t.start();
    }

    public void run() {
        while (true) {
            try {
                try {
                    waitClient();
                } catch (Exception ex) {
                    ex.printStackTrace();

                }

                for (int i = 0; i < client.length; i++) {
                    if (client[i] == 0) {
                        client[i] = i + 1;
                        id = i;
                        break;
                    }
                }

                //set stream to send and receive data
                out[client[id]] = new ObjectOutputStream(connect.getOutputStream());
                out[client[id]].flush();
                in[client[id]] = new ObjectInputStream(connect.getInputStream()); 
```

用户名保存在用户名数组中

```
username[client[id]] = cm.sender; //Add user in username[] array 
```

删除用户

```
public synchronized void removeUser(int number) {
    int position = number;
    System.out.println("Server removing user " + username[number] + "which is client " + number);

    for (int i = 0; i <= client.length; i++) {
        if (position == client[i]) {
            System.out.println("User to be remove found");
            try {
                client[i + 1] = client[i];
                in[position].close();
                out[position].close();
                username[position] = null;
                position = position - 1;

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

我正在尝试使用 HashTable 添加和删除客户端

```
public class ChatServerProtocol {
private String nick;
private AddClient a;

private Hashtable<String, AddClient> nicks = new Hashtable<String, AddClient>();

private boolean add_nick(String nick, AddClient a) {
    if (nicks.containsKey(nick)) {
        return false;
    } else {
        nicks.put(nick, a);
        return true;
    }
}

private boolean remove_nick(String nick, AddClient a) {
    if (!(nicks.containsKey(nick))) {
        return false;
    } else {
        nicks.remove(nick);
        return true;
    }
}

public ChatServerProtocol(AddClient a) throws IOException {
    nick = null;
    a = a;
} 
```

但是现在我如何调用方法 add_nick。每当客户端登录时，用户名都会发送到服务器，服务器会将其读取为 cm.sender。我还需要包含线程变量。那么如何添加用户名以便稍后我可以删除它。

```
 ChatServerProtocol.add_nick(cm.sender); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:14:23.670

不，保存在数据库中不是一个好主意。请记住，您只保存会话长度的详细信息，数据库的基本概念是在会话之后使用它。如果您的会话由于网络问题等而中断，会发生什么？

只需使用 Map 而不是普通数组，使用 key 作为客户端 ID，使用 value 作为用户名。删除用户名将是一个普通调用，例如 map.remove(clientID);

**按您的要求进行编辑：**请注意，此代码不完整，仅与您提供的一样多..

公共类 AddClient 实现 Runnable { Thread t;

```
private Map<int, String> users = new HashMap <int, String>();

AddClient(String tot) {
    t = new Thread(this, tot);
    t.start();
}

public void run() {
    while (true) {
        try {
            try {
                waitClient();
            } catch (Exception ex) {
                ex.printStackTrace();

            }

            int clientId = users.size() + 1;
            users.put(clientId, cm.sender);

            //set stream to send and receive data
            out[clientId] = new ObjectOutputStream(connect.getOutputStream());
            out[clientId].flush();
            in[clientId] = new ObjectInputStream(connect.getInputStream()); 
```

**删除用户方法**

公共同步无效删除用户（整数）{

```
 if(users.containsKey(number)) {
               System.out.println("Server removing user " + users.get(number) + "which is client " + number);
               users.remove(number);
            } else {
               System.out.println("User not in session");
            }
} 
```

# machine-learning - 如何基于weka聚类预测行为

> ID：15877189
> 
> 赞同：2
> 
> 时间：2013-04-08T10:47:30.223
> 
> 标签：machine-learning, weka, correlation, collaborative-filtering

我已经对以下格式的数据执行了分层集群：

```
userid keyword
1  test
2  tester
3  test
4  thisisatest
5  user 
```

这种格式有数千个条目，当我使用可视化工具时，输出如下：

![在此处输入图像描述](https://i.stack.imgur.com/Kydd5.png)

我如何解释这个图表？我可以结合这个层次集群并使用协同过滤来预测用户可能使用的其他关键字吗？

# sql-server - 在 SQL Server 中使用 DATEDIFF 的最准确方法是什么？

> ID：15877194
> 
> 赞同：4
> 
> 时间：2013-04-08T10:47:34.803
> 
> 标签：sql-server, tsql, sql-server-2005, datediff

我有两个具有以下表达式的计算列（MonthsInService 和 YearsInService）。

服务月数 =`(datediff(month,[DateEngaged],getdate()))`

服务年限 =`(datediff(month,[DateEngaged],getdate())/(12))`

现在，例如 DateEngaged = 2012-April-09 且 getdate() 为 2013-April-08，MonthsInService 返回 12 而 YearsInService 为 1。

我的申请要求 YearsInService 为零，因为距离员工一周年还有一天时间。

我什至不确定如何最好地处理 MonthsInService 列，因为月份的天数不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:39:12.553

不幸的是，`DATEDIFF`它计算元素的*转换*次数，而不是通常的人类直觉对两个日期之间的差异（例如`DATEDIFF(year,'20121231','20130101')`是 1，尽管没有多少人会说有一年的差异）。

我使用的解决方案有点重复，但不需要单独的函数，并且总是得到正确的闰年：

```
declare @T table (
    DateEngaged datetime not null,
    MonthsInService as CASE
        WHEN DATEADD(month,DATEDIFF(month,DateEngaged,GETDATE()),DateEngaged) > GETDATE()
            THEN DATEDIFF(month,DateEngaged,GETDATE()) - 1
            ELSE DATEDIFF(month,DateEngaged,GETDATE())
        END,
    YearsInService as CASE
        WHEN DATEADD(year,DATEDIFF(year,DateEngaged,GETDATE()),DateEngaged) > GETDATE()
            THEN DATEDIFF(year,DateEngaged,GETDATE()) - 1
            ELSE DATEDIFF(year,DateEngaged,GETDATE())
        END
)

insert into @T (DateEngaged) values ('20120409'),('20120408')

select * from @T 
```

产生：

```
DateEngaged             MonthsInService YearsInService
----------------------- --------------- --------------
2012-04-09 00:00:00.000 11              0
2012-04-08 00:00:00.000 12              1 
```

它的工作原理是询问“如果我们采用由 产生的幼稚答案`DATEDIFF`，它给出的答案是否太高了 1？” - 如果是这样，我们只需从它给出的答案中减去一个。`DATEDIFF`应该只超过 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:59:41.207

通过使用`day`，您可以达到结果：

```
select 
datediff(month,'2012-April-09','2013-April-08') MonthsInService
,datediff(day,'2012-April-09','2013-April-08')/365 YearsInService 
```

**输出**：

```
12  0 
```

或使用函数以获得最大精度：

```
CREATE FUNCTION [dbo].[getFullYears] 
(
    @dateX datetime,
    @dateY datetime
)  
RETURNS int
AS  
BEGIN 
    DECLARE @y int
    SET @y =DATEDIFF(year,@dateX,@dateY)
    IF (@dateY < DATEADD(year, @y, @dateX)) SET @y = @y -1
    RETURN @y
END

select dbo.getFullYears('2012-April-09','2013-April-09') --1
select dbo.getFullYears('2012-April-09','2013-April-08') --0 
```

对于月份计算，您可以参考这里：[Calculating number of full months between two dates in SQL](https://stackoverflow.com/questions/1106945/calculating-number-of-full-months-between-two-dates-in-sql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-25T18:30:06.150

试试这个查询：

```
DATEDIFF(DAY, CONVERT(date, dtmDOB),                         
  CONVERT(date, GETDATE()))*(12.0/365.25)),1))                      
  AS TotalMonths, 
```

# actionscript-3 - 使用 AntiAliasType.ADVANCED 的内容；

> ID：15877195
> 
> 赞同：1
> 
> 时间：2013-04-08T10:47:35.410
> 
> 标签：actionscript-3, flash

我们正在使用以下代码在动态经典文本字段中显示 html 文本。

```
var txtFld = new TextField();

txtFld.x = 10;

txtFld.y = 0;

txtFld.wordWrap = txtFld.multiline = true;

txtFld.width = 1190;

txtFld.autoSize= "left";

txtFld.embedFonts = true;

txtFld.antiAliasType=AntiAliasType.ADVANCED;

txtFld.htmlText  = (Dynamic text); 
```

如果使用“Normal” AntiAliasType 而不是 Advanced，那么一切正常。但是应用程序的文本质量不好，所以我使用了“AntiAliasType.ADVANCED”来使文本质量更好。

通过使用“AntiAliasType.ADVANCED”，我们遇到了很多问题，比如长文本文本的可见性，无法嵌入“GGSubscript”字体等。

此外，如果我使用 Flash Player 10.3 或更高版本，则文本也可见，但字体未嵌入其中。

我已经尝试了多个 Flash 播放器版本。请建议这是否可以正确一些。

谢谢，

阿什梅什·塔库尔

# c++ - 重载 C++ 赋值运算符

> ID：15877196
> 
> 赞同：1
> 
> 时间：2013-04-08T10:47:37.303
> 
> 标签：c++, operator-overloading, variable-assignment, assignment-operator, overloading

我想扩展`std::string`一些功能，所以我从中得到了我`String`的。为了使代码像`String str = stdStr;`工作一样，我试图重载赋值运算符，但由于某种原因我的代码没有被调用。我该如何解决？

```
#include <string>

class String
    :
        public std::string
{

    public:
        /*
        I do know that this constructor will solve the problem, but is it possible to use the operator?

        String ( const std::string& stdString )
        {

            ...

        }
        */

        String& operator= ( const std::string& stdString )
        {
            ...
            return *this;
        }

};

int main()
{

    std::string foo = "foo";
    String bar = foo;

    return 1;

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T10:51:14.820

```
String bar = foo; 
```

它是复制初始化（相当于

```
String bar(String(foo)); 
```

)，而不是赋值。您应该为此工作实现复制构造函数（或默认初始化变量然后分配`foo`给`bar`）。

无论如何，从标准 C++ 类型派生是个坏主意，因为这些类型没有虚拟析构函数。组合比继承更好，在你的例子中，你应该使用组合。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T10:51:27.640

它不是赋值的那一行`String bar = foo`，它实际上是等价于`String bar(foo)`. 如果你写

```
String bar;
bar = foo; 
```

正如预期的那样，您的赋值运算符将被调用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-08T10:53:47.827

这里的问题是你的线

```
String bar = foo; 
```

不调用赋值运算符，因为您没有要赋值的对象（`bar`尚未创建）；它调用一个构造函数。实际上，如果可用，它会调用您注释掉的构造函数。

如果你真的想使用你的运营商，你必须写：

```
String bar;
bar = foo; // Now bar exists and you can assign to it 
```

顺便说一句，继承自`std::string`并不是一个好主意，因为与标准库中的大多数其他类一样，该类并非旨在继承自。具体来说，它缺少一个虚拟析构函数，如果你以多态方式使用它会导致麻烦，例如：

```
std::string* str = new String();
delete str; // Oops; the wrong destructor will be called 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T10:51:34.283

在您的情况下，despte = present，将创建新的 String 对象，因此需要

```
String ( const std::string& stdString ) 
```

取消注释。另一种选择是做类似的事情

```
String bar;  
bar = foo; 
```

但这听起来不是一个好主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T10:54:27.853

这样做使用复制构造函数：

```
String foo("foo");
String foo="hello";//assignment operator here 
```

但这不会：

```
String foo;
String foo="hello";//copy constructor used here since foo was not initialized 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T10:55:17.383

其他赞成的答案是消息灵通的。

为了直接回答您的问题，您正在尝试这样做。

```
 String& operator= ( const std::string& stdString )
    {
        // Call the base implementation
        return std::string::operator= ( stdString );
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-08T11:33:51.490

std::string foo = "foo"; 字符串 bar = foo;

您在 main 中尝试的操作不会调用复制赋值运算符。它相当于调用复制构造函数。

最好避免继承 std::string 因为它没有定义虚拟析构函数。

# python - 将表单集与 ContentType 一起使用

> ID：15877199
> 
> 赞同：1
> 
> 时间：2013-04-08T10:47:48.343
> 
> 标签：python, django, view, formsets

我在将 UpdateView 用于由表单和表单集组成的视图时遇到问题。

我有以下模型：项目和图片。

图片定义为：

```
class Picture(models.Model):

    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=255, blank=False)

    content_type = models.ForeignKey(ContentType, verbose_name="content type",
                related_name="content_type_set_for_%(class)s")
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey("content_type", "object_id") 
```

我有几个包含图片的模型。例如，在 Item 模型中：

```
class Item(models.Model):

    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=255, blank=False)
    pictures = generic.GenericRelation(Picture) 
```

我有以下 ItemCreateForm：

```
class ItemCreateForm(ModelForm):

    def __init__(self, *args, **kwargs):
        super(ItemCreateForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Item 
```

图片形式：

```
class PictureForm(forms.ModelForm):

    id  = forms.IntegerField(widget=forms.HiddenInput)

    def __init__(self, *args, **kwargs):
        super(PictureForm, self).__init__(*args, **kwargs)

    def save(self):
         data = self.cleaned_data
         obj = Picture(**data);
         # do something to obj
         # obj.save() 

    class Meta:
        model = Picture
        fields = ['id', 'name'] 
```

和观点：

```
class ItemUpdateView(UpdateView):
    form_class = ItemCreateForm
    template_name = 'item/new.html'
    model = Item
    success_url = '/items/'

    def get_context_data(self, **kwargs):
        context = super(ItemUpdateView, self).get_context_data(**kwargs)
        item = context['object']

        # Dont' create any extra forms when showing an update view
        PictureFormSet = formset_factory(PictureForm, extra=0)

        return {'form': kwargs['form'],
                'picture_formset': UploadFormSet(initial = [ model_to_dict(a) for pic in item.pictures.all()])}

    def post(self, request, *args, **kwargs):

       self.object = self.get_object()

       item_form = ItemCreateForm(request.POST, instance=self.object)

       if item_form.is_valid():
           item = item_form.save(commit=False)
           item.save()

           # How do update the pictures? 
```

这是我的 urls.py：

```
url(r'^items/(?P<pk>\d+)/update/$', ItemUpdateView.as_view(), name='item_update') 
```

模板：

```
<form action="" method="post" enctype="multipart/form-data">

{% for field in form %}
    # do something
{% endfor %}

{{ picture_formset.management_form }}
{% for form in picture_formset.forms %}
    # do something
{% endfor %}

<input  name="commit" type="submit" value="Submit" />
</form> 
```

我是 Django 的新手。

用户可以通过用于显示项目和多张图片的单个模板中的图片表单动态（通过 jQuery）添加/删除图片。

1 我必须将 id 作为图片的隐藏字段包含在内，否则将插入图片而不是更新。**QN：有没有更好的方法来做到这一点？**

2 如何更新图片模型？目前`request.POST`没有模型中的所有字段，因此模型抱怨 NULL 字段？我完全迷失了如何在 UpdateView 中处理 formset 并且不是主要形式，就像在 url 中带有 pk 的 UpdateView 的简单示例。

```
PictureFormSet = formset_factory(PictureForm)
picture_formset = PictureFormSet(request.POST, request.FILES)

for picture_form in picture_formset.forms:
      picture_form.save() 
```

# c# - WPF 在一个文档中打印文本和图像

> ID：15877204
> 
> 赞同：4
> 
> 时间：2013-04-08T10:48:05.413
> 
> 标签：c#, wpf, image, xaml, printing

我想打印一个包含文本和图像的文档。我正在使用带有表格和 BlockUIContainers 的 FlowDocument。在视觉工作室中，图像显示，但是当我想在运行时打印图像部分时，它是空白的

```
<BlockUIContainer>
      <Grid>
          <Image 
                Grid.Column="0"
                Source="/Resources/company.jpg"
                Height="97"
                Width="184"
                HorizontalAlignment="Left" />
      </Grid>
</BlockUIContainer>

 private void Button_Click_1(object sender, RoutedEventArgs e)
 {
     PrintDialog printDialog = new PrintDialog();
     if (printDialog.ShowDialog() == true)
     {
            printDialog.PrintDocument(((IDocumentPaginatorSource)flowdocument).DocumentPaginator, "Flow Document Print Job");
     }
 } 
```

这种行为有什么理由吗？有什么解决办法吗？

我在想我必须把所有东西都放在 Canvas 中，然后我会执行 printVisual 函数？

# python - 如何从文件中的某处提取一定数量的行

> ID：15877205
> 
> 赞同：0
> 
> 时间：2013-04-08T10:48:07.343
> 
> 标签：python

我有一个看起来像这样的输入文件：

```
#nP 4
#mP 0.0262
#mH     10
#HP various info:
14  H   0.026
19  P   0.054
20  H   0.012
512 H   0.005
#xP
#kP
99
89
90 
```

我想从第 5 行开始提取 4 行（因为第一行中的 np = 4），所以输出将是这样的：

```
14  H   0.026
19  P   0.054
20  H   0.012
512 H   0.005 
```

我试过这个：

```
import sys

head = sys.stdin.readline()
head = head.strip()
head = head.split('\t')
cntHetPos = int(head[1])
if "#HP" in sys.stdin.readlines():
  lines = sys.stdin.readlines()[0:cntHetPos]
  print lines 
```

但它不会打印出这些行，也不会给出错误消息。我基于之前在这里找到的答案：[从第 2 行读取文件或跳过标题行](https://stackoverflow.com/questions/4796764/read-file-from-line-2-or-skip-header-row) 想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:03:57.360

`readlines()`第一次调用它时返回所有行的列表，但第二次它是空的，因为所有行都已被读取和使用。将它们存储在一个变量中：

```
lines = sys.stdin.readlines() 
```

将其放在顶部，因为您不妨使用它`head`从以下位置读取变量：

```
head = lines[0] 
```

另一个问题是您需要遍历所有行以查找`#HP`令牌，并且您需要跟踪行号以便正确分割列表：

```
for i, line in enumerate(lines):
  if "#HP" in line:
    lines = lines[i+1 : i+1+cntHetPos] 
```

最后，如果要打印行而不是格式化列表，则需要加入它们（注意行尾字符已经在其中）：

```
 print ''.join(lines), 
```

而且，为了更好的衡量，我们可以在找到正确的线路`break`后立即停止，所以我们会在`print`.

总结一下：

```
import sys

lines = sys.stdin.readlines()
head = lines[0]
head = head.strip()
head = head.split('\t')
cntHetPos = int(head[1])
for i, line in enumerate(lines):
  if "#HP" in line:
    lines = lines[i+1 : i+1+cntHetPos]
    print ''.join(lines),
    break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:02:39.600

这是一个非常难看的匹配模式，但它可能符合您的需求；

```
/#nP.*?#HP.*?$.*?(\d+ +\w +[\d\.]+).*?(\d+ +\w +[\d\.]+).*?(\d+ +\w +[\d\.]+).*?(\d+ +\w +[\d\.]+)/gsm 
```

它会将您想要抓取的 4 行的结果分组并将它们分组。您甚至可以对结果进行分组，以便立即获得`14 H 0.026`单独的结果。就像是;

```
(\d+) +(\w) +([\d\.]+) 
```

**例子**

```
import re

string = '''#nP 4
#mP 0.0262
#mH     10
#HP various info:
14  H   0.026
19  P   0.054
20  H   0.012
512 H   0.005'''

result = re.findall('#nP.*?#HP.*?$.*?(\d+ +\w +[\d\.]+).*?(\d+ +\w +[\d\.]+).*?(\d+ +\w +[\d\.]+).*?(\d+ +\w +[\d\.]+)', string, re.S | re.M)

print(result) 
```

**输出**

```
[('14  H   0.026', '19  P   0.054', '20  H   0.012', '512 H   0.005')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:24:36.877

也许是这样的：

```
from itertools import islice

with open('yourfile') as fin:
    count = int(next(fin).split()[1])
    non_comments = (line for line in fin if not line.startswith('#'))
    print list(islice(non_comments, None, count))
    # ['14  H   0.026\n', '19  P   0.054\n', '20  H   0.012\n', '512 H   0.005\n'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:33:03.613

[linecache 模块](http://docs.python.org/2/library/linecache.html)专为高效地从文件中读取行而设计：

> [linecache 模块](http://docs.python.org/2/library/linecache.html)允许从任何文件中获取任何行，同时尝试使用缓存进行内部优化，这是从单个文件中读取多行的常见情况。回溯模块使用它来检索源代码行以包含在格式化的回溯中。

假设调用了文本文件`blah`，并且文件数据从第五行开始：

```
#!/usr/bin/python   

import linecache

starting_line_number = 5   
number_of_lines      = int(linecache.getline('blah',1).split()[1])
for line_num in range(starting_line_number, starting_line_number+number_of_lines):
    print linecache.getline('blah',line_num), 
```

# excel - 为什么 JExcel 在分配的货币符号 (£) 上强制使用单元格的正前缀 ($)？

> ID：15877206
> 
> 赞同：1
> 
> 时间：2013-04-08T10:48:09.820
> 
> 标签：excel, numbers, jexcelapi

我有一个程序，它使用 JExcel 库来读取 excel 表并对其进行一些处理。

我注意到的一次令人不安的事情（在我们的一位用户通知之后）是 JExcel 似乎*强制*将格式化为货币单元格的单元格转换为使用 $ 符号。我已经进行了很多挖掘，但我看不到下一步该去哪里。跳到底部看看问题的症结所在。

本质上，我们有这个方法：

```
import java.io.File;
import java.io.IOException;
import java.util.Locale;

import jxl.Cell;
import jxl.Sheet;
import jxl.Workbook;
import jxl.WorkbookSettings;
import jxl.read.biff.BiffException;

public class Launcher {

    /**
     * @param args
     */
    public static void main(String[] args) {
        nothingSpecifc("D:\\Documents and Settings\\castone\\My Documents\\JExcelCurrencyExample.xls");
    }
    public static void nothingSpecifc(String excelFilePath){
       try { 
           File myFile = new File(excelFilePath);
           Locale myLocal = Locale.UK;
           WorkbookSettings wbkSettings = new WorkbookSettings();
           wbkSettings.setLocale(myLocal);
           wbkSettings.setEncoding("UTF-8");
           wbkSettings.setExcelDisplayLanguage("UK");
           Workbook workbook = Workbook.getWorkbook(myFile,wbkSettings);
           Sheet mySheet = workbook.getSheet(0);
           Cell[] myRow = mySheet.getRow(0);
           String myCellA1 = myRow[0].getContents();
           System.out.println(myCellA1);
        } catch (BiffException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

我的示例 .xls 文件在 A1 中有这个值：

![excel文件的屏幕截图，格式化窗口打开](https://i.stack.imgur.com/yW5Mu.png)

但是运行后，我得到了这个值！

![Eclipse 的屏幕截图，输出格式不佳](https://i.stack.imgur.com/2u2tN.png)

现在我无法理解为什么会发生这种情况。令人不安的是，我担心我实施的任何修复都会*强制*将其他货币符号转换为 £ 符号。

查看 Workbook.java，我正在调用此方法：

```
 /**
   * A factory method which takes in an excel file and reads in the contents.
   *
   * @exception IOException
   * @exception BiffException
   * @param file the excel 97 spreadsheet to parse
   * @param ws the settings for the workbook
   * @return a workbook instance
   */
  public static Workbook getWorkbook(java.io.File file, WorkbookSettings ws)
    throws IOException, BiffException
  {
    FileInputStream fis = new FileInputStream(file);

    // Always close down the input stream, regardless of whether or not the
    // file can be parsed.  Thanks to Steve Hahn for this
    File dataFile = null;

    try
    {
      dataFile = new File(fis, ws);
    }
    catch (IOException e)
    {
      fis.close();
      throw e;
    }
    catch (BiffException e)
    {
      fis.close();
      throw e;
    }

    fis.close();

    Workbook workbook = new WorkbookParser(dataFile, ws);
    workbook.parse();

    return workbook;
  } 
```

所以本质上，这个类只是文件 I/O 处理和 excel 之间的一个聪明的包装器/接口。我正在研究 WorkbookSettings 和 WorkbookParser 的默认构造函数。

一、WorkbookSettings：

```
 /**
   * Default constructor
   */
  public WorkbookSettings()
  {
    initialFileSize = DEFAULT_INITIAL_FILE_SIZE;
    arrayGrowSize = DEFAULT_ARRAY_GROW_SIZE;
    localeFunctionNames = new HashMap();
    excelDisplayLanguage = CountryCode.USA.getCode();
    excelRegionalSettings = CountryCode.UK.getCode();
    refreshAll = false;
    template = false;
    excel9file = false;
    windowProtected = false;
    hideobj = HIDEOBJ_SHOW_ALL;

    // Initialize other properties from the system properties
    try
    {
      boolean suppressWarnings = Boolean.getBoolean("jxl.nowarnings");
      setSuppressWarnings(suppressWarnings);
      drawingsDisabled        = Boolean.getBoolean("jxl.nodrawings");
      namesDisabled           = Boolean.getBoolean("jxl.nonames");
      gcDisabled              = Boolean.getBoolean("jxl.nogc");
      rationalizationDisabled = Boolean.getBoolean("jxl.norat");
      mergedCellCheckingDisabled =
        Boolean.getBoolean("jxl.nomergedcellchecks");
      formulaReferenceAdjustDisabled =
                                Boolean.getBoolean("jxl.noformulaadjust");
      propertySetsDisabled = Boolean.getBoolean("jxl.nopropertysets");
      ignoreBlankCells = Boolean.getBoolean("jxl.ignoreblanks");
      cellValidationDisabled = Boolean.getBoolean("jxl.nocellvalidation");
      autoFilterDisabled = !Boolean.getBoolean("jxl.autofilter"); 
             // autofilter currently disabled by default
      useTemporaryFileDuringWrite = 
        Boolean.getBoolean("jxl.usetemporaryfileduringwrite");
      String tempdir =
        System.getProperty("jxl.temporaryfileduringwritedirectory");

      if (tempdir != null)
      {
        temporaryFileDuringWriteDirectory = new File(tempdir);
      }

      encoding = System.getProperty("file.encoding");
    }
    catch (SecurityException e)
    {
      logger.warn("Error accessing system properties.", e);
    }

    // Initialize the locale to the system locale
    try
    {
      if (System.getProperty("jxl.lang")    == null ||
          System.getProperty("jxl.country") == null)
      {
        locale = Locale.getDefault();
      }
      else
      {
        locale = new Locale(System.getProperty("jxl.lang"),
                            System.getProperty("jxl.country"));
      }

      if (System.getProperty("jxl.encoding") != null)
      {
        encoding = System.getProperty("jxl.encoding");
      }
    } 
    catch (SecurityException e)
    {
      logger.warn("Error accessing system properties.", e);
      locale = Locale.getDefault();
    }
  } 
```

这里似乎没有任何问题，我已将编码、本地和显示语言设置为英国特定/兼容的。默认情况下，区域设置已经是英国。

现在对于 WorkbookParser：

```
public class WorkbookParser extends Workbook
  implements ExternalSheet, WorkbookMethods
{
  /**
   * The logger
   */
  private static Logger logger = Logger.getLogger(WorkbookParser.class);

  /**
   * The excel file
   */
  private File excelFile;
  /**
   * The number of open bofs
   */
  private int bofs;
  /**
   * Indicates whether or not the dates are based around the 1904 date system
   */
  private boolean nineteenFour;
  /**
   * The shared string table
   */
  private SSTRecord sharedStrings;
  /**
   * The names of all the worksheets
   */
  private ArrayList boundsheets;
  /**
   * The xf records
   */
  private FormattingRecords formattingRecords;
  /**
   * The fonts used by this workbook
   */
  private Fonts fonts;

  /**
   * The sheets contained in this workbook
   */
  private ArrayList sheets;

  /**
   * The last sheet accessed
   */
  private SheetImpl lastSheet;

  /**
   * The index of the last sheet retrieved
   */
  private int lastSheetIndex;

  /**
   * The named records found in this workbook
   */
  private HashMap namedRecords;

  /**
   * The list of named records
   */
  private ArrayList nameTable;

  /**
   * The list of add in functions
   */
  private ArrayList addInFunctions;

  /**
   * The external sheet record.  Used by formulas, and names
   */
  private ExternalSheetRecord externSheet;

  /**
   * The list of supporting workbooks - used by formulas
   */
  private ArrayList supbooks;

  /**
   * The bof record for this workbook
   */
  private BOFRecord workbookBof;

  /**
   * The Mso Drawing Group record for this workbook
   */
  private MsoDrawingGroupRecord msoDrawingGroup;

  /**
   * The property set record associated with this workbook
   */
  private ButtonPropertySetRecord buttonPropertySet;

  /**
   * Workbook protected flag
   */
  private boolean wbProtected;

  /**
   * Contains macros flag
   */
  private boolean containsMacros;

  /**
   * The workbook settings
   */
  private WorkbookSettings settings;

  /**
   * The drawings contained in this workbook
   */
  private DrawingGroup drawingGroup;

  /**
   * The country record (containing the language and regional settings)
   * for this workbook
   */
  private CountryRecord countryRecord;

  private ArrayList xctRecords;

  /**
   * Constructs this object from the raw excel data
   *
   * @param f the excel 97 biff file
   * @param s the workbook settings
   */
  public WorkbookParser(File f, WorkbookSettings s)
  {
    super();
    excelFile = f;
    boundsheets = new ArrayList(10);
    fonts = new Fonts();
    formattingRecords = new FormattingRecords(fonts);
    sheets = new ArrayList(10);
    supbooks = new ArrayList(10);
    namedRecords = new HashMap();
    lastSheetIndex = -1;
    wbProtected = false;
    containsMacros = false;
    settings = s;
    xctRecords = new ArrayList(10);
  } 
```

我在这里看不到任何会影响工作簿创建/访问的内容。

* * *

再往下看，通过床单和单元格，我发现了两件有趣的事情：

1.  单元格的格式有这个参数 |value`positivePrefix|"$" (id=709)`
2.  这个货币*是*正确的。看这个：
    ![变量形成 Eclipse 调试窗口，将货币显示为 GBP/£](https://i.stack.imgur.com/kLfR8.png)

所以我的问题是，当该`getContents()`方法在单元格上运行时，为什么它不与货币一起返回（给，我想*是 £$#####*，因为它仍然有 postivePrefix）以及为什么这个的正前缀无论如何都要设置`$`？

我看不到在 src 文档中创建单元格的位置，或者在哪里实现了 getContents() 方法（我发现它是声明），所以我无法进一步挖掘，但我希望其他人知道这个原因问题”，或者至少可以解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-25T00:04:40.660

这为我做到了。进行一些设置。使用 WorkbookSettings 作为第二个参数获取工作簿。我认为编码对你来说很重要。

```
 WorkbookSettings wbs = new WorkbookSettings(); 
    wbs.setExcelRegionalSettings("GB");
    wbs.setExcelDisplayLanguage("GB");
    Locale l = new Locale("en_GB");
    wbs.setLocale(l);
    wbs.setEncoding("ISO8859_1");

    Workbook workbook = Workbook.getWorkbook(new File("experimental-in.xls"), wbs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:48:38.613

我无法弄清楚为什么会这样。但是，如果您无法修复系统，那就破解它！

对于 100 的单元格“值”，我以下列形式之一获得回报：

*   `100`- 普通号码
*   `[£$ -42] 100`- 前缀货币无法识别
*   `100 [£$ -42]`- 后缀货币无法识别
*   `"?" 100`- 前缀符号不可渲染
*   `100 "?"`- 后缀符号不可渲染

因此，我决定`cell.getContent()`一旦确定我有一个数字，就应该将返回的数字正则表达式。

* * *

### 识别数字格式：

```
public static boolean isNumberFormat(Cell cell){
    CellType myCellType = cell.getType();
    return myCellType.equals(CellType.NUMBER);
} 
```

### 使用正则表达式捕获数字

对于上述每个，我得到了正则表达式形式[text2re](http://www.text2re.com)的“样式” ，然后使用[debuggex](http://www.debuggex.com/)直到我将它们组合起来。这导致了以下`regex`表达式：

```
(?:\"..*?\"|\[.*?\])*?\s*(\d+,?\d*?\.\d*)\s*(?:\[..*?]|".*?")*? 
```

这看起来像一场噩梦，但我会分解它，就像我的代码一样：

`String digits="(\\d+,?\\d?\\.\\d*)";`

一位或多位数字，带有逗号和小数位。

`String sbraceGroup="\\[.*?\\]";`

匹配用方括号括起来的零个或多个字符的组

`String quotationGroup="\"..*?\"";`

匹配零个或多个用引号括起来的字符的组

`String junk = "(?:"+sbraceGroup+"|"+quotationGroup+")*?";`

*我们不*想要的正则表达式的字符串，用于`(?:.....)`将其封闭为非匹配组，以及`*?`不贪婪的零->多匹配。

我现在可以编译我的模式：

`Pattern p = Pattern.compile(junk+"\\s*"+digits+"\\s*"+junk,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);`

其中`\s*`是零-> 许多空白字符（制表符、空格等）。

现在一起：

```
String myCellA1 = myRow[rowCounter].getContents();
String digits="(\\d+,?\\d?\\.\\d*)";    // Non-greedy match on digits
String sbraceGroup="\\[.*?\\]"; //  non-greedy match on square Braces 1
String quotationGroup="\"..*?\""; //    non-greedy match on things in quotes
String junk = "(?:"+sbraceGroup+"|"+quotationGroup+")*?";
Pattern p = Pattern.compile(junk+"\\s*"+digits+"\\s*"+junk,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
Matcher m = p.matcher(myCellA1);
String match = "";
if (m.find())
{
    match=m.group(1).toString();
}else
{
    match = myCellA1;
} 
```

现在我已经解决了我的问题

# javascript - 有没有更有效的方法用 angularjs 序列化表单？

> ID：15877212
> 
> 赞同：26
> 
> 时间：2013-04-08T10:48:28.737
> 
> 标签：javascript, serialization, angularjs

有没有办法为angularjs序列化函数？

我的帖子现在看起来像这样。

```
$scope.signup_submit = function () {
  var formData = {
    username: $scope.username,
    full_name: $scope.full_name,
    email: $scope.email,
    password: $scope.password,
    confirm_password: $scope.confirm_password
  }

  $http({
    method: "POST",
    url: '/signup',
    data: formData,
  }).success(function (data) {
    if (data.status == 'success') {
      alert('all okay');
    } else {
      alert(data.msg)
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-08T16:23:28.210

这不是您应该使用 AngularJS 访问表单数据的方式。表单中的数据应在范围内绑定。

所以使用一个对象，例如 $scope.formData，它将包含你所有的数据结构，然后你的每个表单元素都应该使用 ng-model 绑定到这个对象。

例如：

[http://jsfiddle.net/rd13/AvGKj/13/](http://jsfiddle.net/rd13/AvGKj/13/)

```
<form ng-controller="MyCtrl" ng-submit="submit()">
    <input type="text" name="name" ng-model="formData.name">
    <input type="text" name="address" ng-model="formData.address">
    <input type="submit" value="Submit Form">
</form>

function MyCtrl($scope) {
    $scope.formData = {};

    $scope.submit = function() {   
        console.log(this.formData);
    };
} 
```

提交上述表单时，$scope.formData 将包含您的表单对象，然后可以在您的 AJAX 请求中传递该对象。例如：

```
Object {name: "stu", address: "england"} 
```

要回答您的问题，没有更好的方法可以使用 AngularJS 来“序列化”表单数据。

但是，您可以使用 jQuery：$element.serialize()，但如果您想正确使用 Angular，请使用上述方法。

# php - PHP FATAL 导致“500”服务器错误

> ID：15877214
> 
> 赞同：0
> 
> 时间：2013-04-08T10:48:31.117
> 
> 标签：php

我有一个运行“下一代”系谱软件 => LAMP 的远程托管站点。

我会定期下载完整的站点并安装在我的“本地主机”上，作为备份和测试升级等的测试平台。

已经这样做了 5 年没有问题.. 但是，在过去的一周里，我使用 Mint 14.1 构建了一个新服务器，并遵循相同的历史程序在内部传输远程站点......但是，我一直得到一个'根据 apache2 日志，由 FATAL PHP 问题引起的 500 - 服务器错误。

```
PHP Fatal error:  Call to undefined function session_register() in /home/griadooss/www/genetracer.net/globallib.php on line 5 
```

所述“globallib.php”文件中的第5行包含；

```
1 <?php
2 @ini_set( "session.bug_compat_warn", "0" );
3 @ini_set( "allow_url_fopen", "0" );
4 session_start();
5 session_register('session_language');
6 session_register('session_charset');
7 $session_language = $_SESSION[session_language];
8 $session_charset = $_SESSION[session_charset];
9 session_register('assignedtree');
.
.
. 
```

Apache2、mySql 和 php 是其存储库提供的最新版本.. 通过 apt-get 调用安装没有问题。数据库很好...... phpMyAdmin 连接没有问题。数据库类型 = MyISAM；排序规则 = latin1_swedish_ci。出现的唯一异常是这个“500”错误

我不知道从哪里开始..我已经从头开始重新安装了系统三次，结果相同...如果有人能帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:53:12.127

发生这种情况是因为您现在拥有更新版本的 php。

检查[这个 php 文档](http://php.net/manual/en/function.session-register.php)。它表示 php 5.4++ 不再支持您尝试使用的功能。

谢谢！

@leo

# php - 替换字符串中的嵌套双引号

> ID：15877216
> 
> 赞同：2
> 
> 时间：2013-04-08T10:48:33.440
> 
> 标签：php, regex, typography

所以我是一个排版纳粹（它们就像类固醇上的语法纳粹），并且我有一个字符串，其中可能包含**多个级别的双引号**，例如：

```
$str = 'Outer text "first level "second level "third level" second level" first level" outer text'; 
```

在我的母语中，最多三个级别的引用在印刷上是正确的，每个级别都有自己的引号。我想将所有双引号*对***替换**为其对应的实体，例如：

 **   第一级：“文本”（`&bdquo;`和`&rdquo;`）
*   第二级：»text«（`&raquo;`和`&laquo;`）
*   第三级：'文本'（`&rsquo;`）
*   任何附加级别：'text' ( `&rsquo;`)

所以上面的文本将输出为：

> 外部文本“第一级”第二级“第三级”第二级«第一级”外部文本

此外，字符串中可能存在兄弟`""`对：

```
$str = 'Quote from my book: "She didn\'t feel "depressed", "tired" or "sad"."'; 
```

所以这将输出为：

> 引用我书中的一句话：“她没有感到“沮丧”、“疲倦”或“悲伤”。”

（这可能很棘手，但我们知道 a`"`之后或之前总是有空格`或标点符号`,`, `.`, `;`, `?`, `!`）`

 `最后，`$str`也可能包含 HTML，其中属性的引号不应更改：

```
$str = '<p class="quote">The error said: <span class="error_msg">"Please restart your "fancy" computer!"</span></p>'; 
```

我听说使用*递归正则表达式*可能是一种解决方案，但我正在寻找一种更**有效**的方法，因为字符串可能是长 HTML 文本。

***更新：***似乎我跳过了 CSS 的`quotes`属性和`<q>`元素。这使得内联引号更加优雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:15:38.723

试试这`"#\"(([^()]+|(?R))*)\"#"`是正则表达式递归

样本

```
class Replace1{
   public $Out,$Depth=0;
   function __construct($Query){
        $this->Depth=0;
        $this->Out=$this->Reaplce($Query);  
   }
   function Reaplce($Query){
      //echo "**********".$Query.$this->Depth."\n";
       $Query = preg_replace_callback("#\"(([^()]+|(?R))*)\"#",function($m){
             $this->Depth++;
             $R=$this->Reaplce($m[1]);
             $this->Depth--;
            return $R;
        },$Query);  
        switch($this->Depth){
          case 0:
             return $Query;
          case 1:
             return '&bdquo;'.$Query.'&rdquo;';
          case 2:
             return '&raquo;'.$Query.'&laquo;'; 
          case 3:
             return '&rsquo;'.$Query.'&rsquo;';  
          default:
             return '&rsquo;'.$Query.'&rsquo;';                     
        }
        return $Query;

  }

}
$obj=new Replace1('Outer text "first level "second level "third level" second level" first level" outer text');
echo $obj->Out; 
```

旧的 php

```
function R($m){
        Replace1::$Depth++;
        $R=Replace1::Reaplce($m[1]);
        Replace1::$Depth--;
        //echo "***".$R.$this->Depth."\n";
        return $R;
}
class Replace1{
public static $Out,$Depth=0;

    function __construct($Query){
    self::$Depth=0;
    self::$Out=self::Reaplce($Query);   
}

static function Reaplce($Query){
    //echo "**********".$Query.$this->Depth."\n";

    $Query = preg_replace_callback("#\"(([^()]+|(?R))*)\"#","R",$Query);
    //echo "**********".$Query.$this->Depth."\n";   
    switch(self::$Depth){
        case 0:
           return $Query;
        case 1:
           return '&bdquo;'.$Query.'&rdquo;';
        case 2:
           return '&raquo;'.$Query.'&laquo;'; 
        case 3:
           return '&rsquo;'.$Query.'&rsquo;';  
        default:
           return '&rsquo;'.$Query.'&rsquo;';         

    }
    return $Query;

}

}
$obj=new Replace1('Outer text "first level "second level "third level" second level" first level" outer text');
echo Replace1::$Out; 
```

输出是

```
Outer text „first level »second level ’third level’ second level« first level” outer text 
```

html视图

```
Outer text &bdquo;first level &raquo;second level &rsquo;third level&rsquo; second level&laquo; first level&rdquo; outer text 
```

如果删除回显注释`//`，输出将是

```
 **********Outer text "first level "second level "third level" second level" first level" outer text0
 **********first level "second level "third level" second level" first level1
 **********second level "third level" second level2
 **********third level3
 Outer text &bdquo;first level &raquo;second level &rsquo;third level&rsquo; second level&laquo; first level&rdquo; outer text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T15:09:32.333

解析 HTML 以执行这种智能引用即使不是不可能，也是一项非常棘手的任务。

我已经构建[了 JoliTypo](https://github.com/jolicode/JoliTypo)`\DomDocument`，它使用 DOM 加载器（在法语中，我们也有不同的引号层次结构，所以它肯定在我的待办事项列表中。

虽然@mohammad 解决方案适用于简单的字符串，但与 JoliTypo 相结合，您可能有机会以可靠的方式为大型 HTML 文档获得所需的内容。

请问这种引用 ( `Outer text „first level »second level ’third level’ second level« first level” outer text`) 在哪个语言环境中使用？`*

# c# - 如何在代码中启用 WCF 调试

> ID：15877221
> 
> 赞同：4
> 
> 时间：2013-04-08T10:48:50.670
> 
> 标签：c#, .net, wcf

我有一个自托管的 WCF 服务。我没有 app.config 文件，而是在运行时在代码中执行所有配置。但我不知道如何在代码中启用调试。

**更新**

我有一个包含两个项目的 VS 解决方案：

1.  托管在 WinForms 应用程序中的 WCF 服务
2.  使用服务的简单控制台客户端

我希望能够在 Visual Studio 中启动调试会话，调试客户端，在服务应用程序中设置和命中断点。当我使用 app.config 文件时，我能够做到这一点，但现在我想在没有它们的情况下做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:53:10.357

将调试器附加到运行 wcf 服务的进程。

如果在`IIS`你将不得不附加到相应的 w3p.exe 进程。

如果在独立应用程序或 Windows 服务中，请附加到您的 exe 名称。

在调试器选项中的 VS 中有子选项“ `attach to process`”。您需要将刹车点设置为适当的代码并调用导致该代码路径执行的服务。

可以参考这个链接：

[http://msdn.microsoft.com/en-us/library/aa702726.aspx](http://msdn.microsoft.com/en-us/library/aa702726.aspx)

以及这个：

[http://www.codeproject.com/Articles/17258/Debugging-WCF-Apps](http://www.codeproject.com/Articles/17258/Debugging-WCF-Apps)

这可能对您有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:53:14.420

如果您需要从代码中启动调试器，请编写以下行：

```
System.Diagnostics.Debugger.Launch(); 
```

我经常将这种技术用于调试目的。但最好在发布版本中删除它。

如果要附加到已经运行的进程，请打开 Visual Studio，转到菜单`Debug > Attach to process`，找到托管进程并单击“附加”按钮。

# ios - 在 HTML 字符串中查找字符串的显示高度

> ID：15877225
> 
> 赞同：-2
> 
> 时间：2013-04-08T10:49:02.023
> 
> 标签：ios, cocoa-touch, uiwebview

我有一些 HTML，包括文本和图像。

我在`UIWebView`表格视图单元格内显示它，所以我需要能够计算单元格的高度。

有什么方法可以在不使用`UIWebView`第一个的情况下计算渲染高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:13:56.673

```
 NSString *htmlString = @"<p>There are different kinds books</p><p>boos are as follows</p><ul><li>Based on Maths</li><li>Based on science</li><li>Based on Geography</li</ul>";
NSScanner *scanner = [NSScanner scannerWithString:htmlString];
[scanner setCharactersToBeSkipped:[NSCharacterSet characterSetWithCharactersInString:@">"]];
NSMutableString *textFromHTMLString = [[NSMutableString alloc] init];
NSMutableString *holder = [[NSMutableString alloc] init];
while(![scanner isAtEnd]){
    [scanner scanUpToString:@">" intoString:nil];
    [scanner scanUpToString:@"<" intoString:&holder];

    [textFromHTMLString appendString:holder];
}

NSLog(@"%@", textFromHTMLString); 
```

# javascript - 将来用什么替换 Components.lookupMethod？

> ID：15877229
> 
> 赞同：1
> 
> 时间：2013-04-08T10:49:11.763
> 
> 标签：javascript, firefox-addon

看起来`Components`对象已被弃用，我得到`The Components object is deprecated. It will soon be removed.`了 Firefox 20。

已经检查了[在线文档](https://developer.mozilla.org/en-US/docs/Components_object)，看起来它不是最新的，它没有提到任何内容。

那么，未来会用什么代替它呢？我只需要打电话`Components.lookupMethod`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:13:20.507

不推荐使用的是`Components`内容代码的可访问性。扩展不受影响。

# c++ - 无法通过 Evernote Api 授权

> ID：15877232
> 
> 赞同：0
> 
> 时间：2013-04-08T10:49:26.433
> 
> 标签：c++, evernote

我想为 Evernote 创建一个小客户端。

我从该站点获得了消费者密钥和秘密并编写了以下代码：

```
struct user_data {
    std::string login;
    std::string pass;
};

struct evernote_data {
    user_data user;
    std::string consumer_key;
    std::string consumer_secret;
};

struct service_data
{
    std::string host;
    std::string path;
    int port;
};

void connect(const evernote_data& account, const service_data&  service)
{
    try
    {
        boost::shared_ptr<TSSLSocketFactory> sslSocketFactory(new TSSLSocketFactory());
        boost::shared_ptr<TSSLSocket> sslSocket=sslSocketFactory->createSocket(service.host, service.port);
        boost::shared_ptr<TBufferedTransport> bufferedTransport(new TBufferedTransport(sslSocket));
        boost::shared_ptr<TTransport> http_client(new THttpClient(bufferedTransport, service.host, service.path));
        http_client->open();
        boost::shared_ptr<TBinaryProtocol> user_store_protocol(new TBinaryProtocol(http_client));
        evernote::edam::UserStoreClient user_store(user_store_protocol, user_store_protocol);

        evernote::edam::AuthenticationResult auth_result;
        user_store.authenticate(auth_result, account.user.login, account.user.pass, account.consumer_key, account.consumer_secret);
        cout << "Some info: " ;
        cout << auth_result.user.username << endl << auth_result.user.name << endl << auth_result.user.email << endl;
    }
    catch(evernote::edam::EDAMUserException& error)
    {
        cout << "catch EDAMUserException" << endl;
        cout << "ErrorCode: " << error.errorCode << endl;
        cout << "What: " << error.what() << endl;
        cout << "Parameter: " << error.parameter << endl;
    }
    catch(::apache::thrift::TException& error)
    {
        cout << "catch thrift::TException " << endl;
        cout << "What: " << error.what() << endl;
    }
    catch(...)
    {
        cout << "boom !!!" << endl;
    }
}

int main()
{
    const user_data user = { "**Login**", "**password**"};
    const evernote_data account = { user, "***Key***", "**Secret**" };
    const service_data service = {"sandbox.evernote.com", "/edam/user", 443 };
    connect(account, service);

    std::cout << "Exit" << std::endl;
    cin.get();
    return 0;
} 
```

程序输出：

> ```
> Catch EDAMUserException 
> ErrorCode: 8 
> What: Default TException.
> Parameter: consumerKey 
> ```

并始终捕获有关错误消费者密钥的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:21:15.887

自去年 11 月以来，第三方开发者无法使用 UserStore#authenticate。 [http://dev.evernote.com/documentation/reference/UserStore.html#Fn_UserStore_authenticate](http://dev.evernote.com/documentation/reference/UserStore.html#Fn_UserStore_authenticate)

请改用 OAuth。 [http://dev.evernote.com/start/core/authentication.php](http://dev.evernote.com/start/core/authentication.php)

# sql - 在 Oracle SQL 中以逗号分隔的列中的计数或求和值

> ID：15877233
> 
> 赞同：0
> 
> 时间：2013-04-08T10:49:29.343
> 
> 标签：sql, oracle

我希望有一个人可以帮助我。

我正在寻找 excel 中同一字段的多个值的总和，这可能吗？

我的示例专栏是：

```
0,0,1,1,1,2 
```

我想将所有这些值加在一起，并在输出中有一个总列

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T11:24:54.773

```
select 
  id, 
  list,
  sum(regexp_substr(list, '\d+', 1, occ)) as total
from 
  your_table,
  (select level occ from dual connect by level < 2000)
group by id, list
order by 1 
```

[小提琴](http://www.sqlfiddle.com/#!4/7e403/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:58:29.017

请试试：

```
SET SERVEROUTPUT ON
DECLARE
  lv_formula VARCHAR2(1000):='0,0,1,1,1,2';
  result NUMBER;
BEGIN
    lv_formula:=replace(lv_formula, ',', '+');
    EXECUTE IMMEDIATE 'BEGIN :out := '||lv_formula||'; END;' USING OUT result;
    DBMS_OUTPUT.PUT_LINE('Answer is...' || result);
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:35:23.747

以@techdo 的回答为基础（请投票或接受他的回答——我所做的只是充实这一点），这是一种方法：

首先，构建一个函数来实现@techdo 的代码：

```
CREATE OR REPLACE FUNCTION SUM_CSV(pin_Csv IN VARCHAR2)
  RETURN NUMBER
  DETERMINISTIC
IS
  strFormula VARCHAR2(1000);
  nResult    NUMBER;
BEGIN
  strFormula := REPLACE(pin_Csv, ',', '+');
  EXECUTE IMMEDIATE 'BEGIN :out := ' || strFormula || '; END;' USING OUT nResult;
  RETURN nResult;
END SUM_CSV; 
```

请注意，该函数必须是确定性的——也就是说，对于给定的输入值，它总是产生相同的结果。

然后创建一个包含调用函数 SUM_CSV 的虚拟列的表：

```
CREATE TABLE csv_test
  (text  VARCHAR2(1000),
   total NUMBER AS (SUM_CSV(text)));  -- virtual column 
```

现在，插入表中：

```
INSERT INTO CSV_TEST(TEXT) VALUES('1,2,3,4,5'); 
```

提交插入，然后取回值：

```
SELECT * FROM CSV_TEST; 
```

你得到

```
TEXT            TOTAL
1,2,3,4,5       15 
```

分享和享受。

# mysql - 将 .txt 文件作为 Blob 从 ASP.Net MVC3 存储到 Mysql

> ID：15877236
> 
> 赞同：1
> 
> 时间：2013-04-08T10:49:50.770
> 
> 标签：mysql, asp.net-mvc, asp.net-mvc-3, blob

目前我正在研究 ASP.NET MVC 3 项目。我需要将文本（.txt）文件作为 Blob 存储到 MySQL 中。MySQL 对我来说是新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:54:21.510

应该是[这样](http://www.c-sharpcorner.com/uploadfile/Ashush/working-with-binary-large-objects-blobs/)的（应该修改连接字符串）：

```
string filePath = @"C:\\MyFile.ext";

//A stream of bytes that represnts the binary file
FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read);

//The reader reads the binary data from the file stream
BinaryReader reader = new BinaryReader(fs);

//Bytes from the binary reader stored in BlobValue array
byte[] BlobValue = reader.ReadBytes((int)fs.Length);

fs.Close();
reader.Close();

SqlConnection BlobsDatabaseConn = new SqlConnection("Data Source = .; Initial Catalog = BlobsDatabase; Integrated Security = SSPI");
SqlCommand SaveBlobeCommand = new SqlCommand();
SaveBlobeCommand.Connection = BlobsDatabaseConn;
SaveBlobeCommand.CommandType = CommandType.Text;
SaveBlobeCommand.CommandText = "INSERT INTO BlobsTable(BlobFileName, BlobFile)" + "VALUES (@BlobFileName, @BlobFile)";

SqlParameter BlobFileNameParam = new SqlParameter("@BlobFileName", SqlDbType.NChar); 
SqlParameter BlobFileParam = new SqlParameter("@BlobFile", SqlDbType.Binary);
SaveBlobeCommand.Parameters.Add(BlobFileNameParam);
SaveBlobeCommand.Parameters.Add(BlobFileParam);
BlobFileNameParam.Value = filePath.Substring(filePath.LastIndexOf("\\") + 1);
BlobFileParam.Value = BlobValue;
try
{
    SaveBlobeCommand.Connection.Open();
    SaveBlobeCommand.ExecuteNonQuery();
    MessageBox.Show(BlobFileNameParam.Value.ToString() + " saved to database.","BLOB Saved", MessageBoxButtons.OK, MessageBoxIcon.Information);
}

catch(Exception ex) 
{
    MessageBox.Show(ex.Message, "Save Failed", MessageBoxButtons.OK, MessageBoxIcon.Error);
}

finally 
{
    SaveBlobeCommand.Connection.Close();
} 
```

看一眼：

[将 BLOB 值写入数据库](http://msdn.microsoft.com/en-us/library/4f5s1we0%28v=vs.71%29.aspx)

# c# - 直到 endOfStream 才调用 HttpWebRequest、BeginGetResponse

> ID：15877239
> 
> 赞同：4
> 
> 时间：2013-04-08T10:50:06.040
> 
> 标签：c#, windows-phone-8

我正在开发一个客户端，该客户端使用网络服务来获取一些事件推送 - 网络服务的设计是这样的，在客户端发布订阅命令时，它会发回一些感兴趣的事件并继续这样做，只要客户端保持连接。

发布命令时，服务会（立即）以带有这些标头的初始答案进行响应

```
Keep-Alive: timeout=5, max=98
Connection: Keep-Alive
Transfer-Encoding: chunked 
```

然后保持连接打开直到超时（30秒后，如果客户端没有发送一些保持活动的数据）

由于它是 POST + 必须读取响应 + 保持连接打开直到 endOFStream 的混合，看来我必须使用 HttpWebRequest 和 BeginGetRequestStream（到 POST）和 BeginGetResponse 来读取响应并采取行动。

我的问题是 BeginGetResponse 回调直到输入流被服务器/服务实际关闭（30 秒后）才被调用，尽管 AllowReadStreamBuffering 被设置为 false。

文档在 AllowReadStreamBuffering 上有这样的说法：

> AllowReadStreamBuffering 属性影响何时调用 BeginGetResponse 方法的回调。当 AllowReadStreamBuffering 属性为 true 时，将在整个流下载到内存后引发回调。当 AllowReadStreamBuffering 属性为 false 时，一旦流可用于读取（可能在所有数据到达之前），就会引发回调。

我已经看到一些建议，无论 AllowReadStreamBuffering 设置为什么，HttpWebRequest 在缓冲区填满之前都不会调用 BeginGetResponse - 但我无法在文档中找到任何内容。

有没有人知道如何控制这种缓冲行为或者建议我在处理这种网络服务时应该尝试的另一种方法？

我目前使用的相关代码片段，如下所示：

```
public void open()
{
    string url = "http://funplaceontheinternet/webservice";

    HttpWebRequest request = WebRequest.CreateHttp(url);
    request.Method = "POST";
    request.Credentials = new NetworkCredential("username", "password");
    request.CookieContainer = new CookieContainer();
    request.AllowReadStreamBuffering = false;         
    request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);
}

void GetRequestStreamCallback(IAsyncResult result)
{
    Debug.WriteLine("open.GetRequestStreamCallback");

    HttpWebRequest webRequest = (HttpWebRequest)result.AsyncState;
    // End the stream request operation
    Stream postStream = webRequest.EndGetRequestStream(result);

    // Create the post data
    byte[] byteArray = Encoding.UTF8.GetBytes(_xmlEncodedSubscribeCommand);

    // Add the post data to the web request
    postStream.Write(byteArray, 0, byteArray.Length);
    postStream.Close();

    // Start the web request
    webRequest.BeginGetResponse(new AsyncCallback(BeginGetResponseCallback), webRequest);
}

void BeginGetResponseCallback(IAsyncResult result)
{
    HttpWebRequest request = (HttpWebRequest)result.AsyncState;
    HttpWebResponse response = null;
    if (request != null)
        response = (HttpWebResponse)request.EndGetResponse(result);
    else
        Debug.WriteLine("request==null :-(");
    if (response != null)
    {
        using (var reader = new StreamReader(response.GetResponseStream()))
        {
            while (!reader.EndOfStream)
            {
                string line = reader.ReadLine();
                Debug.WriteLine("BeginGetResponseCallback - received: " + line);
            }
            Debug.WriteLine("BeginGetResponseCallback - reader.EndOfStream");
        }
    }
    else
        Debug.WriteLine("response==null :-(");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T09:09:16.977

您已经提到该服务是 Web 服务，但不是哪个平台。如果这是一个“正常”的 Web 服务，那么我假设 XML 是传输格式。

如果是这样，我怀疑问题可能在于这种通信方式并不适合流媒体。在所有数据可用之前，服务器端的 Web 服务基础架构可能不会创建 SOAP 信封和有效负载。如果您想像这样进行流式传输，最好在服务器端使用一些自定义服务，而不是 Web 服务。

您确定服务器确实在流式传输响应吗？（例如用wireshark之​​类的东西确认？）

如果您真的想使用 Web 服务，那么我建议您在第一个事件可用时完成请求，并且不要等待超时。这仍将实现我假设您尝试获得的延迟减少。

# asp.net - ASP.Net Web 窗体 SignalR 对象没有方法

> ID：15877242
> 
> 赞同：2
> 
> 时间：2013-04-08T10:50:12.630
> 
> 标签：asp.net, signalr

我将 SignalR 添加到现有的 ASP.Net 4 Web 窗体应用程序中。创建了一个名为 Hubs 的新文件夹并添加了一个 Hub，如下所示：

```
[HubName("UpdatesHub")]
public class UpdatesHub : Hub
{
    public void DownloadUpdates()
    {
        // Code Removed
    }
} 
```

添加了 RouteTable.Routes.MapHubs(); 到 Application_Start 并将以下内容添加到页面：

```
<script src="/Scripts/jquery-1.9.1.js"></script>

<script src="/Scripts/jquery.signalR-1.0.1.js"></script>

<script src="/signalr/hubs"></script>
<script type="text/javascript">
    $(function () {
        // Declare a proxy to reference the hub. 
        var upd = $.connection.UpdatesHub;

        // Code Removed

        // Start the connection.
        $.connection.hub.start().done(function () {
            $('#btnDownload').click(function () {
                upd.server.DownloadUpdates();
            });
        });

    });

</script> 
```

但是每当我单击按钮时，我只会得到“未捕获的类型错误：对象 # 没有方法 'DownloadUpdates'”。我已尝试通过 NuGet 删除和读取信号器，但似乎无法使其正常工作，求助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:58:27.143

[SignalR camelCases 服务器上的方法名称。](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs#invoking-methods-on-the-server)尝试检查是否`downloadUpdates()`存在。

# extjs - Sencha Touch2：将复选框添加到 itemTpl

> ID：15877244
> 
> 赞同：1
> 
> 时间：2013-04-08T10:50:16.047
> 
> 标签：extjs, sencha-touch-2.1

嗨，我是 Sencha touch2 的新手，正在解析 json 数据的 url 并显示在列表中。如何为每个列表项添加复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:51:16.363

嗨，只需将 html 添加到您的模板，试试这个：

```
itemTpl: '<input type="checkbox" id="myId" <tpl if="active">checked="checked"</tpl>/>{field from json data}', 
```

# perl - Cpan模块安装错误

> ID：15877245
> 
> 赞同：-3
> 
> 时间：2013-04-08T10:50:16.693
> 
> 标签：perl

我正在尝试安装 cpan 模块。但是出现以下错误

请为此提供解决方案

```
cpan[3]> install xml::xpath
Going to read '/Users/user/.cpan/Metadata'
  Database was generated on Sun, 07 Apr 2013 09:53:02 GMT
Warning: Cannot install xml::xpath, don't know what it is.
Try the command

    i /xml::xpath/

to find objects with matching identifiers.

cpan[4]> i/xml::xpath/
Catching error: "Can't locate object method \"xpath/\" via package \"i/xml\" (perhaps you forgot to load \"i/xml\"?) at /System/Library/Perl/5.12/CPAN.pm line 375, <FIN> line 4.\cJ" at /System/Library/Perl/5.12/CPAN.pm line 391
    CPAN::shell() called at /System/Library/Perl/5.12/App/Cpan.pm line 295
    App::Cpan::_process_options('App::Cpan') called at /System/Library/Perl/5.12/App/Cpan.pm line 364
    App::Cpan::run('App::Cpan') called at /usr/bin/cpan5.12 line 12

cpan[5]> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:53:54.363

这*不是*安装错误。您似乎忘记了 和 正则表达式之间的空格`i`。

要搜索模块，我推荐[MetaCPAN 站点](https://metacpan.org/search?q=XML%3A%3AXPath)。

Perl 模块区分大小写。模块的正确名称是`XML::XPath`.

* * *

cpan 模块似乎做了一些元编程，你把它弄错了：

命令的第一个非空格字符串被视为方法名称，因此

```
cpan[n]> foo 
```

会做

```
my $method = "foo";
$shell->$method; # like $shell->foo 
```

但是，您可以使用方法的完全限定名称来调用其他包中的方法。一个常见的情况是`SUPER`伪包：

```
MyClass->SUPER::new(@args); 
```

仅仅因为你不能声明包含特殊字符的包和子类并不意味着不可能使用它们。所以完全限定的方法名`i/xml::xpath/`被分成一个包名`i/xml`和一个子名`xpath/`。

在常规 Perl 代码中使用这样的名称是不可能的，但是由于使用变量作为方法名称的技巧，可以绕过解析器。

# winrt-xaml - WinRT中是否有树状控件？

> ID：15877247
> 
> 赞同：1
> 
> 时间：2013-04-08T10:50:20.270
> 
> 标签：winrt-xaml

我想显示一个分层数据，如 Windows 8 邮箱中的树视图。你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:55:41.943

我想，这篇文章会回答你的问题。

[Windows 8 商店应用程序中的 TreeView 在 XAML 中](https://stackoverflow.com/questions/14977451/treeview-in-windows-8-store-app-in-xaml)。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:00:35.077

[在这个](https://ux.stackexchange.com/a/30551)问题上有相当彻底的讨论。

从本质上看，微软似乎决定放弃传统的树形视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:17:19.110

WinRT XAML Toolkit 中有一个[TreeView 控件](https://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c540adbd6952821a351d9ffa4d1d99#WinRTXamlToolkit/Controls/TreeView/TreeView.cs)，它是从 Silverlight Toolkit 移植的。

# android - PutExtras 更改我的日期？

> ID：15877249
> 
> 赞同：1
> 
> 时间：2013-04-08T10:50:25.463
> 
> 标签：android, calendar, android-pendingintent

我有一个`Service`创建 a 的 a `Notification`，其中 Date 以 a `String`、 through的形式传递，`putExtra`这样：

```
Calendar cal=Calendar.getInstance();        
cal.set(2013, 3, 27);
Date d=new Date(cal.getTimeInMillis());
SimpleDateFormat format=new SimpleDateFormat("dd/MM/yyyy");
String fechafinal=format.format(d);
Intent notIntent=new Intent(c, AlertsActivity.class);
notIntent.putExtra("fechafin",fechafinal);//Along with other values, I pass this one
PendingIntent contIntent = PendingIntent.getActivity(
            c, 0, notIntent, 0);
Builder notif = new NotificationCompat.Builder(c); 
```

使用 a `Log.i`，我可以看到那里的`fechafinal`值设置正确，正确的值是 27-04-2013。如果我是正确的，`Activity`当用户点击`Notification`, 时调用的是`AlertsActivity`.

在`AlertsActivity class`（重要的部分）：

```
SimpleDateFormat formatofecha = new SimpleDateFormat("dd/MM/yyyy");
    String fecha;
    bundle=getIntent().getExtras();
    fecha=formatofecha.format(Calendar.getInstance().getTime());
    String fechaFin;                        
    fechaFin=bundle.getString("fechafin");              
    Notificacion noti=new Notificacion(bundle.getString("nombre"),                                         bundle.getString("lugar"), 
fecha, 
fechaFin,
bundle.getString("dinero"),
                                       bundle.getBoolean("buzoneo"),
                                       bundle.getString("desc"),
                                       bundle.getString("labor"),
                                       bundle.getString("horainicio"),
                                       bundle.getString("horafin")); 
```

PD：“Notificacion”是我存储将在某种工作机会的详细视图中呈现的值的类，它不是 Notification 的 Android 类。

如果我在`Log.i`这里放一个...我看到里面`fechafin`是“2013/12/12”，我不知道为什么。它快把我逼疯了！

有人有同样的问题吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:53:37.067

我解决了它，只需这样做：

```
String fechafinal=format.format(d).toString(); 
```

为什么如果我 Log.i 它显示得很好，而在没有 .toString() 方法的情况下分配它却没有，这超出了我的理解。

# php - 获取正方形对象的成员

> ID：15877250
> 
> 赞同：0
> 
> 时间：2013-04-08T10:50:25.727
> 
> 标签：php, sql, wordpress, object

```
public function get_Gol($idComp, $idSq){
    global $wpdb;
    $row = $wpdb->get_results($wpdb->prepare("SELECT count(F_id_gioc_Gol) FROM `ASD_Partite` p
        LEFT JOIN ASD_CALCIO_Partite_Gol cpg ON p.id = cpg.F_id_dett_partita
        WHERE p.F_id_comp = %d AND (p.F_id_sq1 = %d OR p.F_id_sq2 = %d) AND F_id_gioc_Gol = %d", $idComp, $idSq, $idSq, $this->idGioc));
    foreach ($row as $key => $v){

        return $v->count(F_id_gioc_Gol);
    } 
```

问题是那`$v->count(F_id_gioc_Gol);`行不通。我怎样才能访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:56:40.447

尝试以下操作：

```
SELECT count(F_id_gioc_Gol) as gioc_count  ... 
```

...

```
return $v->gioc_count; 
```

命名变量应该便于访问它。您还可以使用调试器或 var_dump 来查看如何在不命名的情况下访问获取的计数。

# objective-c - 带有客户端证书和 NTLM 的 NSURLConnection

> ID：15877257
> 
> 赞同：7
> 
> 时间：2013-04-08T10:50:59.543
> 
> 标签：objective-c, nsurlconnection, ssl-certificate, ntlm

我正在尝试访问受 NTLM 身份验证保护并需要客户端证书的服务器。我正在使用 NSURLConnection 的委托方法进行身份验证，并使用 UIWebview 检索结果。

当服务器需要客户端证书时，我已经设法开发用于 NTLM 身份验证和身份验证的代码：

```
- (void) connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {    

    authMethod = challenge.protectionSpace.authenticationMethod;

    if ( [challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust] )
    {
        [challenge.sender useCredential:[NSURLCredential credentialForTrust: challenge.protectionSpace.serverTrust] forAuthenticationChallenge: challenge];
        return;
    }

    if ( [challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodClientCertificate] )
    {
        [... code to extract certificate ...]  
        NSURLCredential *credential = [NSURLCredential credentialWithIdentity:myIdentity certificates:(NSArray*)certsArray persistence:NSURLCredentialPersistencePermanent];
        [challenge.sender useCredential:credential forAuthenticationChallenge:challenge];
        return;
    }

    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodNTLM])
    {
        NSURLCredential *credential;
        credential = [NSURLCredential
                      credentialWithUser:@"user"
                      password:@"password"
                      persistence:NSURLCredentialPersistencePermanent];
        [challenge.sender useCredential:credential forAuthenticationChallenge:challenge];
        return;
    }
    [[challenge sender] performDefaultHandlingForAuthenticationChallenge:challenge];
} 
```

当服务器分别需要 NTLM 身份验证或客户端证书时，一切正常。当一起需要时，证书信息和 NTLM 凭据都在服务器端接收，但 IIS7 返回一个 403 页面，要求提供客户端证书......

您可能需要知道 willSendRequestForAuthenticationChallenge 按此顺序调用四次：

```
willSendRequestForAuthenticationChallenge: NSURLAuthenticationMethodServerTrust
willSendRequestForAuthenticationChallenge: NSURLAuthenticationMethodClientCertificate
willSendRequestForAuthenticationChallenge: NSURLAuthenticationMethodNTLM
willSendRequestForAuthenticationChallenge: NSURLAuthenticationMethodClientCertificate 
```

如果你有什么想法？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T17:20:55.670

在 iOS 7 中有效，在 iOS 8 中无效。您使用的是 iOS 8 吗？使用 iOS 7 进行测试（例如在模拟器上）以确认它只是 iOS 8 的问题。它与您可能在日志窗口中看到的“流在打开之前发送事件”错误有关。还要等到它在 iOS 中修复，但我仍然在最新的 8.2 beta 3 中看到它。

# regex - 如何匹配 "key://string?list" 或 value="key://string?detail" 字符串？

> ID：15877258
> 
> 赞同：-2
> 
> 时间：2013-04-08T10:51:02.127
> 
> 标签：regex

我怎么能有一个匹配字符串的正则表达式：

```
value="key://string?list" 
```

或者

```
value="key://string?detail" 
```

我尝试过类似的东西：

```
new Regex("value=\\w.") 
```

String 是一个字符串值，而不是常量值 String。前任 将会

```
value="samplekey://samplestring?list" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:53:42.130

使用这个正则表达式`value="key://string\?\w+"`

编辑：

`value="\w+://\w+?\?\w+"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:25:07.213

请不要认为这是光顾，但我认为您应该练习测试驱动开发。它将帮助您定义问题的规范。

例如，在您陈述问题的方式中，这可能是一个答案：

```
value="\w+://\w+\?(list|detail)" 
```

或在斯卡拉：

```
scala> val r = """value="\w+://\w+\?(list|detail)"""".r
r: scala.util.matching.Regex = value="\w+://\w+\?(list|detail)" 
```

请注意，这些匹配：

```
value="key1://string1?list"
value="key1://string1?detail" 
```

但这些不匹配：

```
value="my-key://my-string?list" // hint: it's the "-". \w does not match it
value="mykey://mystring?test" // hint: list or details are matched but "test" is not 
```

可能还有很多其他极端情况（您是否想要区分大小写的匹配？等号周围是否可以有空格，例如 value = "？）这就是为什么最好用 "这应该有效，这应该被拒绝”。它将帮助您避免在程序中进一步出现细微问题。

# c++ - Qt：更改html标签的颜色不起作用

> ID：15877260
> 
> 赞同：0
> 
> 时间：2013-04-08T10:51:05.290
> 
> 标签：c++, html, css, qt

我在 qt 中制作了一个文本编辑器，它用 html 替换单词（为 html 标签着色），但我无法更改 html 标签的颜色

`string.replace("<home>","<lo style='color:#0066ff;'><home></lo>");`

它适用于文字，但是当我使用 html 标签时，它什么也没做我不想突出显示我想用 css 更改颜色#

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:45:50.840

您正在尝试显示 html 标签，使用 html 突出显示，但 qt 的 html 解析器将隐藏所有 html 标签。为了显示它们，您应该将 all 替换`<`为`&#60;`并且 all`>`替换为`&#62;`。

# variables - 将参数从蝙蝠传递给蝙蝠（环境变量）

> ID：15877261
> 
> 赞同：0
> 
> 时间：2013-04-08T10:51:11.280
> 
> 标签：variables, parameters, batch-file, environment

我需要将一些参数从一个 bat 传递`file1.bat`给另一个 bat `file2.bat`，. 问题是`@echo %2`inside从提示命令中`file2.bat`显示，因此内部定义`""`的变量没有按应有的方式发送，而第一个参数始终发送成功。`secondVar``file1.bat`

我被困在这里，因此我无法继续。调用 file2.bat "aFile" !secondVar 的目标！正在为每个 secondVar 将 secondVar 变量搜索到 aFile 中。

请有人可以告诉我发生了什么并给我一些正确的东西。非常感谢您！

**file2.bat**看起来像：

```
@echo off
echo %2
Set arg1=%1
echo %arg1%
cscript process.vbs %1>result
more +1  %1|findstr /I /r /b /C:"^T.*=%2">viewout 
```

**file1.bat**看起来像：

```
@echo off & setLocal
SETLOCAL EnableDelayedExpansion
set secondVar=%secondVar%

for /f "tokens=*" %%a in (myFile) do (set secondVar="%%a"
echo !secondVar!
call file2.bat "aFile" !secondVar!
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:03:21.043

在**File1.bat**中，更改

```
set secondVar="%%a" 
```

至

```
set secondVar="%%~a" 
```

*波浪号*字符的使用首先删除封闭的双引号......

您还可以使用：设置“secondVar=%%~a”

# html - CSS 语音气泡边框问题

> ID：15877267
> 
> 赞同：1
> 
> 时间：2013-04-08T10:51:27.750
> 
> 标签：html, css

我正在调整用于创建语音气泡的 CSS。CSS 源是[http://forrst.com/posts/How_to_Make_a_Pure_CSS_Speech_Bubble_With_a_Drop-PU1](http://forrst.com/posts/How_to_Make_a_Pure_CSS_Speech_Bubble_With_a_Drop-PU1)。

我将气泡的背景更改为白色，并添加橙色边框。我的问题是我无法显示气泡底部三角形周围的边框。三角形本身应为白色 (#fff)，边框为 #DD4814。

下面的屏幕截图和这里的小提琴：http: [//jsfiddle.net/tuGHT/](http://jsfiddle.net/tuGHT/)。请问有人对适当的CSS有想法吗？

![在此处输入图像描述](https://i.stack.imgur.com/eIQWs.png)

**CSS**

```
.bubble {
background-color: #fff;
border-radius: 7px;
border: 2px solid #DD4814;
box-shadow: inset 0 1px 1px hsla(0,0%,100%,.5),
            4px 4px 0 hsla(0,0%,0%,.1);
color: #333;
display: inline-block;
font-family: Ubuntu, sans-serif;
font: 16px/25px;
padding: 15px 25px;
position: absolute;
right: 20px;
}

.bubble:after, .bubble:before {
border-bottom: 25px solid transparent;
border-right: 25px solid #fff;
bottom: -25px;
content: '';
position: absolute;
right: 25px;
}
.bubble:before {
border-right: 25px solid hsla(0,0%,0%,.1);
bottom: -28px;
right: 22px;
} 
```

**HTML**

```
<span class="bubble">Speech bubble right</span> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T11:20:36.157

这就是我通常的做法：[DEMO](http://jsfiddle.net/eH4zs/)

基本上，您需要另一个稍大一些的元素`:before`或`:after`位于第一个元素后面的元素。

```
.bubble:before {
    border-right: 25px solid hsla(0,0%,0%,.1);
    bottom: -28px;
    right: 22px;
    z-index: 1;
}
.bubble:before {
    border-right: 27px solid #DD4814;
    border-bottom: 27px solid transparent;
    bottom: -29px;
    right: 23px;
    z-index: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T07:47:24.217

这是你的**CSS** 代码中的地方

```
.bubble:before:after {
top: 45px;
left: -14px;
bottom: auto;
border-width: 15px 21px 0 0;
border-color: transparent #ebea85;
} 
```

它显示气泡始终放置在固定位置

# java - Android 4.1.x 流式传输 rtsp

> ID：15877269
> 
> 赞同：0
> 
> 时间：2013-04-08T10:51:29.223
> 
> 标签：java, android, streaming, video-streaming, rtsp

我有一个带有 rtsp 链接的 ip 摄像头，我去本地和远程播放这个流一个 android 设备。使用 android 4.0.x（galaxy tab 10）它可以正常工作，但使用 android 4.1.x（galaxy note II）它只能在本地工作。这是我的课

```
public class Test extends Activity {   

VideoView vw;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.class_videosurf);
    vw = (VideoView) findViewById(R.id.videoview);
    //local works fine with all android versions
    //SrcPath = "rtsp://192.168.1.10/nphMpeg4/g726-640x480";
    //remote works only with android 4.0.x
    SrcPath = "rtsp://xx.xx.xx.xx/nphMpeg4/g726-640x480";
    vw.setVideoPath(SrcPath);
    vw.requestFocus();
    vw.start();

}
} 
```

# playframework - Play Framework 2.1 移除一个核心依赖

> ID：15877272
> 
> 赞同：2
> 
> 时间：2013-04-08T10:51:41.233
> 
> 标签：playframework, dependencies, jodatime, core, playframework-2.1

几天以来，我正在尝试在游戏项目中使用 Joda-time 1.6.2。我知道播放框架已经随 Joda-time 2.1 一起提供，根据 joda-time 站点，它应该与 1.6.2 兼容。

我正在尝试编写一个应用程序，该应用程序向用户询问 LocalDateTime 并使用 morphia 将具有属性的类保存在 MongoDB 上。

我遇到了一个问题，我必须使用当前正在使用 joda-time 1.6.2 的类，并且我无法更改它的依赖关系，也无法将其更新到 2.1。由于我没有使用 joda-Time 2.1，是否有可能从 Play Framework 2.1 中删除这种依赖关系？所以我可以使用 1.6.2？或者至少告诉 play 我只想在我的项目中使用 1.6.2 版本？

到目前为止我已经尝试过：

*   从缓存依赖项中删除 jodatime 文件夹（当然这不会起作用，因为它总是会再次下载）。
*   在项目依赖项上插入 joda-time 1.6.2（手动和管理方式）。
*   搜索调用核心依赖项的位置，以便我可以删除它（到目前为止还没有运气）。

忘了提到我面临的问题是当数据到达要保存的 morphia 时，我创建了一个具有 4 个 joda-time 字段的全新且格式良好的类并不断收到此错误：

```
[MappingException: Error mapping field:TimeOfDay.TimeStart] 
```

这发生在`MorphiaObject.datastore.save(pAccess);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:03:11.140

我也一直在研究依赖管理： [Play Framework core dependency management/exclusion](https://stackoverflow.com/questions/15891679/play-framework-core-dependency-management-exclusion/15914029)

并有一个指向正确方向的指针。

基本上你想修改你的 Build.scala，并使用显式的 deps 重新定义你的 appDependencies 并使用 .exclude()。您可能需要将 play 本身声明为依赖项（如上面的链接中所示），然后明确排除冲突的 joda 时间。

您还可以使用“依赖项”命令在播放控制台中查看每个依赖项带来了什么。

# excel - VBA删除包含相同值的数组中的重复值

> ID：15877273
> 
> 赞同：2
> 
> 时间：2013-04-08T10:51:42.497
> 
> 标签：excel, vba

有一种方法可以使用 VBA 删除数组中的所有重复项，**也是第一个值**。只保留不重复的值

**例子：**

```
Array_1 ['pedro','maria','jose','jesus','pepe','pepe','jose'] 
```

**结果：**

```
Array_1 ['pedro','maria','jesus'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:19:19.510

试试这个代码：

```
Sub Remove_All_Duplicated()
Dim Array_1
    Array_1 = Array("pedro", "maria", "jose", "jesus", "pepe", "pepe", "jose")
Dim Array_2()

Dim eleArr_1, x
x = 0
For Each eleArr_1 In Array_1
    If UBound(Filter(Array_1, eleArr_1)) = 0 Then
        ReDim Preserve Array_2(x)
        Array_2(x) = eleArr_1
        x = x + 1
    End If
Next

End Sub 
```

**作为函数的**附加解决方案**`Filter`不关心“完全匹配”。这个新的需要参考 VBA 项目中的 Microsoft Scripting Runtime。**

 **```
Sub alternative()
Dim Array_1
    Array_1 = Array("pedro", "pedro maria", "maria", "jose", "jesus", "pepe", "pepe", "jose")
Dim Array_2()
Dim Array_toRemove()

Dim dic As New Scripting.Dictionary
Dim arrItem, x As Long
For Each arrItem In Array_1
    If Not dic.Exists(arrItem) Then
        dic.Add arrItem, arrItem
    Else
        ReDim Preserve Array_toRemove(x)
        Array_toRemove(x) = dic.Item(arrItem)
        x = x + 1
    End If
Next
For Each arrItem In Array_toRemove
    dic.Remove (arrItem)
Next arrItem
Array_2 = dic.Keys

'quic tests to remove when unnecessary
Debug.Print UBound(Array_2), UBound(Array_toRemove)
Debug.Print Join(Array_2, "/")

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T20:55:22.430

如何使用 Filter() VBA 函数创建不重复的新 A_temp1()：

```
 Dim A_temp1() As String
    Dim NUMERO1 As Long
    Dim NUMERO2 As Long
    Dim DATO1 As Variant

NUMERO1 = 0
For Each DATO1 In Array_1
    If UBound(Filter(Array_1, DATO1)) > 0 Then
        Array_1(NUMERO1) = vbNullString
    End If
    NUMERO1 = NUMERO1 + 1
Next DATO1

NUMERO2 = 0
For NUMERO1 = LBound(Array_1) To UBound(Array_1)
    If Array_1(NUMERO1) <> vbNullString Then
    ReDim Preserve A_temp1(NUMERO2)
    A_temp1(NUMERO2) = Array_1(NUMERO1)
    NUMERO2 = NUMERO2 + 1
    End If
Next NUMERO1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T21:54:55.920

这是另一个版本：

```
Public Sub ShortVersion()
    Dim varInput: varInput = Array("pedro", "pedro maria", "maria", "jose", "jesus", "pepe", "pepe", "jose")
    Dim colOutput As Collection: Set colOutput = New Collection
    Dim i As Long: For i = LBound(varInput) To UBound(varInput)
        If UBound(Split(Chr(1) & Join(varInput, Chr(1) & Chr(1)) & Chr(1), Chr(1) & varInput(i) & Chr(1))) = 1 Then
            colOutput.Add varInput(i)
        End If
    Next i
End Sub 
```

好处：

*   更短的代码
*   决策标准独立于循环的后续迭代，因此如果您在算法中构建它，您可以继续处理第一个元素，而无需等待关于后续元素的决定
*   不依赖 MS 脚本运行时

缺点：

*   对于较大的阵列效率较低
*   输出集合而不是数组（如果需要，需要循环转换为数组）
*   假设数组只包含文本并且 ASCII 1 (SOH) 没有出现在任何地方（但是这很可能）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-06T04:06:11.473

```
Function no_dupl_array(src As Variant) As Variant
' 1d array
Dim i As Integer, j As Integer, temp As Variant, n As Integer, k As Integer
ReDim temp(0)
    Do While k < UBound(src)
        temp(k) = src(k)
            j = k
        For i = k To UBound(src)
            If src(i) <> temp(k) Then
                j = j + 1
                ReDim Preserve temp(j)
                temp(j) = src(i)
            End If
        Next
        src = temp
        k = k + 1
        ReDim Preserve temp(k)
    Loop
no_dupl_array = src
End Function 
```

这段代码对我来说足够快**

# php - MySQL 排序未按预期工作

> ID：15877274
> 
> 赞同：1
> 
> 时间：2013-04-08T10:51:44.253
> 
> 标签：php, mysql, sorting

我有一张名为公司的表，如下所示。

```
CREATE TABLE IF NOT EXISTS `companies` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `name` varchar(40) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ; 
```

该表的 MySQL 表数据如下。

```
INSERT INTO `companies` (`id`, `user_id`, `name`) VALUES
(1, 2, 'Mylan'),
(2, 1, 'Intas'),
(3, 48, 'Glenmark'),
(4, 21, 'Amipharma'),
(5, 1, 'XEPA SOUL'); 
```

现在，当我使用以下查询对记录进行排序时

```
SELECT * FROM companies ORDER BY name ASC; 
```

我回来了。

*   XEPA 灵魂
*   阿米制药
*   格伦马克
*   英塔斯
*   迈兰

这是错误的，因为`X`它首先出现，它必须最后显示。

我不知道为什么会这样。

请给出一些提示或解释，以便我可以纠正这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:53:56.137

您可以使用 LTRIM() 删除左边的空格，

```
 SELECT * FROM companies ORDER BY LTRIM(name) ASC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:55:37.837

为了获得最佳效果，您可以使用 orderby 作为 id

SELECT * FROM Companies ORDER BY id ASC;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:14:17.890

正如评论中的其他人所说，我认为您在 XEPA SOUL 前面有一个额外的空白。如果你愿意，你可以在条款中[修剪](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)你的数据`ORDER BY`：

```
SELECT * FROM companies ORDER BY TRIM(name) ASC; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T11:20:48.837

默认字符集和排序规则是 latin1 和 latin1_swedish_ci，因此默认情况下非二进制字符串不区分大小写。这是排序规则设置的问题。试试这个

SELECT * FROM Companies ORDER BY CONVERT (name USING latin2) ASC

# css - 使 JQuery UI 选项卡看起来像按钮

> ID：15877278
> 
> 赞同：-2
> 
> 时间：2013-04-08T10:52:02.237
> 
> 标签：css, jquery-ui

我希望有一个类似于此页面中的选项卡式界面：

[http://jqueryui.com/tabs/#default](http://jqueryui.com/tabs/#default)

除了我希望标签看起来更像按钮，例如：

[http://jqueryui.com/button/#radio](http://jqueryui.com/button/#radio)

选项卡组看起来像上面的单选按钮组。有没有办法可以改变标签的外观，使它们看起来更像第二个链接上的“单选”按钮？还是您建议使用另一种方法使选项卡看起来像按钮？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:51:28.260

这是您想要的 html + css.classes

```
<div id="radio" class="ui-buttonset">
    <input type="radio" name="radio" id="radio1" class="ui-helper-hidden-accessible"><label for="radio1" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left ui-state-active" role="button" aria-disabled="false" aria-pressed="true"><span class="ui-button-text">Choice 1</span></label>
    <input type="radio" checked="checked" name="radio" id="radio2" class="ui-helper-hidden-accessible"><label for="radio2" class="ui-button ui-widget ui-state-default ui-button-text-only" role="button" aria-disabled="false" aria-pressed="false"><span class="ui-button-text">Choice 2</span></label>
    <input type="radio" name="radio" id="radio3" class="ui-helper-hidden-accessible"><label for="radio3" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-right" role="button" aria-disabled="false" aria-pressed="false"><span class="ui-button-text">Choice 3</span></label>
</div> 
```

这是一个 jQuery-ui 选项卡

```
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
    <li class="ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="tabs-1" aria-labelledby="ui-id-1" aria-selected="true"><a href="#tabs-1" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-1">Nunc tincidunt</a></li>
    <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-2" aria-labelledby="ui-id-2" aria-selected="false"><a href="#tabs-2" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">Proin dolor</a></li>
    <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-3" aria-labelledby="ui-id-3" aria-selected="false"><a href="#tabs-3" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-3">Aenean lacinia</a></li>
</ul> 
```

现在，您要显示 TABS 具有 ui-buttonset .. 只需通过重新设计您的 html 来重新使用这些类。

```
<ul class="ui-buttonset">
    <li class="ui-helper-hidden-accessible"><a href="" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left ui-state-active" role="button" aria-disabled="false" aria-pressed="true"><span class="ui-button-text"> 
```

但这对于“回收”jQuery-ui 类可能是一个苛刻的要求。

我建议您重写自己的 .css 以覆盖相关的样式。我的意思是，重写 jQuery-ui TABS 样式而不是尝试回收 .css 类。

# audio - 使用 FFT 的实时混响算法

> ID：15877280
> 
> 赞同：1
> 
> 时间：2013-04-08T10:52:12.567
> 
> 标签：audio, fft, convolution

我正在尝试使用 FFT 创建/实现实时混响算法。我尝试过 FDN 和其他更简单的算法，但它们听起来还不够好。因此，通过将变换后的信号和变换后的脉冲响应相乘来进行快速卷积是有效的，而且听起来很棒。

我看到的问题是，如果我想要一个持续几秒钟的混响，那么脉冲响应包含 100 000+ 个值，并且由于我的输入缓冲区是 256 个样本，所以卷积的结果是 100 255+ 个结果值，必须与之前的卷积结果相加，更不用说为 256 个输入样本的每个缓冲区计算 100 000+ 个值的 FFT。

这个问题必须有更好的解决方案。是否可以仅计算 256 个值的 FFT（+ 256 个填充零，因为它不是循环信号）。混响不必绝对正确，只要听起来不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:03:33.573

您可能希望考虑“频率延迟线”，或者称为分区卷积。简而言之，您可以将混响 IR 分成几个分区，进行 FFT，与输入信号进行卷积，然后以设置为相关分区延迟的延迟将其插入输出。对于几秒钟的完整 IR，这仍然是 CPU 密集型的，所以......

其他技巧包括将头部相关传递函数 (HRTF) 输入到更传统的混响合成算法中。这体现了房间的频率响应在第一组反射中表示的理念。然后可以将 HRTF 输入到更传统的平坦响应混响合成算法中，以创建多重反射。使用 HRTF 代替传统的梳状滤波器。

更具体地指出您的问题，请查看 Fons Adriaensen 的工作。 [http://kokkinizita.linuxaudio.org/papers/aella.pdf](http://kokkinizita.linuxaudio.org/papers/aella.pdf) [http://kokkinizita.linuxaudio.org/papers/index.html](http://kokkinizita.linuxaudio.org/papers/index.html)（更多有趣的论文）

探索他的网站以获取其他有趣的插件和源代码。

CCRMA（斯坦福）的 Julius O Smith 也有很多很好的信息。

我无法在这里详细回答，但我希望 Fons 的论文能回答你的问题。

# c# - C#异步调用阻塞窗口

> ID：15877281
> 
> 赞同：0
> 
> 时间：2013-04-08T10:52:14.043
> 
> 标签：c#, asynchronous

我使用 a`informationWindow(iw)`来显示一些命令结果。`iw`隐藏在主窗口后面，并且主窗口被禁用，直到异步调用完成。由于它是异步调用，我不知道为什么窗口会隐藏。

```
 LKProcess.AsyncDelegate caller = new LKProcess.AsyncDelegate(LKProcess.RunCommands);
    IAsyncResult result = caller.BeginInvoke(cmds, null, null);
    //result.AsyncWaitHandle.WaitOne();

    iw.Show();
    iw.Topmost=true;

    var resultList = caller.EndInvoke(result);
    string combindedString = string.Join(",", resultList);       
    iw.tbkMessageBox.Inlines.Add(combindedString ); 
```

**更新：** 我将 iw.Show() 移出异步调用，但没有任何改变，委托方法（在我的情况下为 CMD 进程）是否阻塞了主窗口？

```
iw.Show();
iw.Topmost=true;
LKProcess.AsyncDelegate caller = new LKProcess.AsyncDelegate(LKProcess.RunCommands);
IAsyncResult result = caller.BeginInvoke(cmds, null, null);        
        var resultList = caller.EndInvoke(result);
        string combindedString = string.Join(",", resultList); 
```

**更新** 我做了进一步的测试，现在我的 AsyncDelegate 是这样的：

```
public static class LKProcess
    {
        public delegate IEnumerable<string> AsyncDelegate(params string[] commands);
        public static IEnumerable<string> RunCommands(params string[] commands)
        {
            Thread.Sleep(5000);
            var result = new List<string>();
            Return result;
        }
    } 
```

我的主要看起来像：

```
iw.Show();
            iw.Topmost = true;
            iw.tbkMessageBox.Inlines.Add("IT's Start");
            LKProcess.AsyncDelegate caller = new LKProcess.AsyncDelegate(LKProcess.RunCommands);
var resultList = caller.EndInvoke(result); 
```

现在 iw 显示，闪烁，然后在调用异步调用时隐藏，5 秒后，iw 显示在顶部。说“它的开始”。调用不是阻塞主窗口，而是接管舞台......

# xml - 如何在 osx 上安装 php-xml？

> ID：15877283
> 
> 赞同：1
> 
> 时间：2013-04-08T10:52:20.147
> 
> 标签：xml, macos, php

> 致命错误：在...中找不到类“DropDead\HomeBundle\Controller\DOMDocument”。

我需要安装 php-xml。我正在使用 OS X。无法找到如何安装此扩展程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T11:08:47.143

你确定，你做对了吗？dom 扩展通常是默认编译的。

看起来您遇到了命名空间问题。尝试

```
$foo = new \DomDocument(); 
```

而不仅仅是 DomDocument() ，它应该有望运行。

# c# - 如何通过 Windows 服务调用和执行 SSIS 包

> ID：15877284
> 
> 赞同：0
> 
> 时间：2013-04-08T10:52:27.447
> 
> 标签：c#, c#-4.0, ssis, windows-services

我正在尝试通过 Windows 服务加载和执行 SSIS 包。如果我使用命令提示符手动运行它，它工作得很好。但是，如果我尝试使用 Windows 服务，它每次都会失败。

```
private void PackageExecute()
    {
        try
        {
            TraceService("Another entry at " + DateTime.Now);
            //Instansiate an DTS RunTime Application Object
            Application app = new Application();
            TraceService("loading system From File system");
            //Create package Container to hold the package.
            //And Load the Package Using the Application Object.
            Package package = app.LoadPackage(@"C:\Users\kavita.verma\Documents\Visual Studio 2012\Projects\WindowsServiceTest\WindowsServiceTest\Package1.dtsx", null);

            TraceService("Execution Started");
            DTSExecResult result = package.Execute();
            // print the result
            TraceService(result.ToString());
            TraceService("Execution Completed");
        }
        catch (Exception ex)
        {
            TraceService("Execution Error" + ex);
        }

    } 
```

# ios - RestKit 删除和更新功能不起作用

> ID：15877285
> 
> 赞同：0
> 
> 时间：2013-04-08T10:52:28.177
> 
> 标签：ios, objective-c, restkit

目前我正在使用一个使用 RestKit 进行通信的 iOS 应用程序。我成功检索并添加了数据。但是从数据库中更新和删除数据不起作用。

我正在使用以下代码向数据库添加新条目：

```
[[RKClient sharedClient] get:@"/tblTests" delegate:self];
RKObjectMapping *venueMapping = [RKObjectMapping mappingForClass:[Venue class]];
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://10.10.3.101/WcfService1/WcfDataService1.svc/"];
RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
objectManager.client.baseURL = baseURL;

[venueMapping mapKeyPathsToAttributes:@"Name",@"name", nil];
[objectManager.mappingProvider setMapping:venueMapping forKeyPath:@"value"];
[objectManager loadObjectsAtResourcePath:@"/tblTests/" delegate:self];
RKObjectMapping* venueMappingS = [RKObjectMapping mappingForClass:[Venue class]];
venueMappingS.setDefaultValueForMissingAttributes = YES;
[venueMappingS mapKeyPath:@"Name" toAttribute:@"name"];

RKObjectRouter *router = [[RKObjectRouter alloc] init];
[router routeClass:[Venue class] toResourcePath:@"/tblTests/"];
[router routeClass:[Venue class] toResourcePath:@"/tblTests/" forMethod:RKRequestMethodPOST];

[[[RKObjectManager sharedManager] mappingProvider] setMapping:venueMappingS forKeyPath:@"value"];
[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[venueMappingS inverseMapping] forClass:[Venue class]];
[RKObjectManager sharedManager].router = router;
[RKObjectManager sharedManager].serializationMIMEType = RKMIMETypeJSON;
[RKObjectManager sharedManager].acceptMIMEType = RKMIMETypeJSON;

Venue *venueName = [[Venue alloc] init];
venueName.name = @"Midhun MP";
venueName.Id  = 12;
[[RKObjectManager sharedManager] postObject:venueName delegate:self]; 
```

它工作得很好，然后我使用了相同的代码，只更改了这两行：

```
[router routeClass:[Venue class] toResourcePath:@"/tblTests/" forMethod:RKRequestMethodPOST];
[[RKObjectManager sharedManager] postObject:venueName delegate:self]; 
```

到

```
[router routeClass:[Venue class] toResourcePath:@"/tblTests/" forMethod:RKRequestMethodDELETE];
[[RKObjectManager sharedManager] deleteObject:venueName delegate:self]; 
```

这不工作！

我的场地课程：

```
@interface Venue : NSObject

@property (strong, nonatomic) NSString *name;
@property (nonatomic) int Id;

@end 
```

我的 JSON 看起来像：

```
{"value":[{"Id":1,"Name":"Midhun"},{"Id":12,"Name":"Midhun MP"}]} 
```

我找不到任何问题，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:22:15.917

当您更新/删除一个对象并使用一个安静的网络服务时，您需要告诉哪个对象（带有它的 ID）应该被更新。在 RestKit 中，您可以通过告诉路由器使用给定的`:attribute`.

```
[router routeClass:[Venue class] toResourcePath:@"/tblTests/:Id" forMethod:RKRequestMethodPOST]; 
```

顺便说一句，您使用的 RestKit 0.10 似乎很快就会过时。更新到 0.20 并找到一些更简单的方法和块的使用会容易得多。

# jquery - jQuery：根据浏览器窗口大小禁用和启用插件？

> ID：15877286
> 
> 赞同：3
> 
> 时间：2013-04-08T10:52:32.363
> 
> 标签：jquery, responsive-design

我有以下代码根据浏览器大小添加功能，但是如果调整浏览器大小，如何删除此插件的效果？（目前它仅在页面以特定大小加载时才有效，而不是在调整大小时才有效）

```
$(document).ready(function(){
   $(window).resize(function() {
      if ($(window).width() >= 420) {
          // Enable the plugin to make the tab functionality...
          $( "#tabs" ).tabs();
      }
      else {
        // Code needed to completely disable the tab functionality??
      }
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:30:41.530

我通常使用插件创建脚本，在一个`DIV`带有特定的内部`ID`，所以当我想清除时，只需删除它`ID`就会`SCRIPT`和他一起去。

在你的情况下..

```
$(document).ready(function(){
   $(window).resize(function() {
      if ($(window).width() >= 420) {
          // Enable the plugin to make the tab functionality...
          var tempScript = '<div id="newTempId"><script type="text/javascript" src="../js/plugInScript.js"></script></div>';
          $('body').append(tempScript); // append the DIV with the PlugIn script inside
          $( "#tabs" ).tabs();
      }
      else {
        // Code needed to completely disable the tab functionality??
        $( "#tabs" ).tabs({ disabled: [ 0, 2 ] }); // see API info at http://api.jqueryui.com/tabs/#option-disabled
        $('newTempId').remove(); // Remove the DIV that include the script
      }
   });
}); 
```

OR/And... 包含一个基于窗口大小的响应式 CSS 文件。

```
<link href="../css/responsive_style.css" rel="stylesheet" type="text/css" media="screen and (min-width:419px)" /> 
```

希望对你有帮助，祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:40:11.327

如果您使用的是 jQuery UI 选项卡插件（我猜是这样）：

```
var $win = $(window),
    $tabs = $( "#tabs" );

$win.resize(function() {
  if ($win.width() >= 420 && !$tabs.is('.tabbed') {
      // Enable the plugin to make the tab functionality...
      $tabs.tabs().addClass('tabbed').removeClass('destroyed');
  } else if(!$tabs.is('.destroyed')) {
      // remove plugin functionality and add class
      // so we don't try to execute this on every resize
      $tabs.tabs('destroy').addClass('destroyed').removeClass('tabbed');
  }
}); 
```

# php - symfony2 教义 expr 子查询：错误：参数号无效

> ID：15877287
> 
> 赞同：5
> 
> 时间：2013-04-08T10:52:34.383
> 
> 标签：php, symfony, doctrine, subquery

试图获得用户喜欢的状态。

```
public function getLikedStatuses(User $user)
{
    $qb = $this->_em->createQueryBuilder();
                $qb
                ->select('s.id')
                ->from('WallBundle:Likes','l')
                ->innerJoin('l.status', 's')
                ->where('l.user = :user')
                ->setParameter('user', $user)
                ->orderBy('s.id','DESC')
            ;

    $qb2=  $this->_em->createQueryBuilder()
        ->select('st')
        ->from('WallBundle:Status','st');

       $qb2 ->andWhere($qb2->expr()->in('st.id',$qb->getDQL()));

    return $qb2->getQuery()->getResult();
} 
```

> 错误：无效的参数号：绑定变量的数量与标记的数量不匹配

顺便说一句：当我转储 $qb->getDQL() 时：

```
string 'SELECT s.id FROM TB\WBundle\Entity\Likes l LEFT JOIN l.status s WHERE l.user = :user' (length=87) 
```

BTW2：当我将 '$qb->getDQL()' 替换为 (12073) （状态 ID）时，它可以工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:54:31.280

实际上，您可能可以进行更简单的查询，具体取决于您如何进行注释。

就像是 ：

```
$qb =  $this->_em->createQueryBuilder()
    ->select('s')
    ->from('WallBundle:Status','st')
    ->innerJoin('st.like','l')
    ->where('l.user = :user')
    ->setParameter('user', $user)
    ->getQuery()
    ->getResult(); 
```

这应该做同样的事情，更短并且更容易理解，因为只有一个查询。

* * *

**更新：**我遇到了与您今天完全相同的问题，并通过将两者`setParameters`放在第二个查询中解决了它。因此我找到了另一种解决方法！

我做了完全一样的事情：

```
$qb = $this->_em->createQueryBuilder()
    ->select('s.id')
    ->from('WallBundle:Likes','l')
    ->innerJoin('l.status', 's')
    ->where('l.user = :user')
    ->orderBy('s.id','DESC')
    ->getDQL()
;

$qb2=  $this->_em->createQueryBuilder()
    ->select('st')
    ->from('WallBundle:Status','st');
    ->where('st.like IN('.$qb.')')
    ->setParameter('user', $user)
    ->getQuery()
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:19:34.740

尝试为此替换`->where('l.user = :user')`并`where('l.user = ?1')` 添加`$qb->setParameter(1, $yourValue);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:56:09.480

尝试改变这一点

```
$qb2=  $this->_em->createQueryBuilder()
        ->select('st')
        ->from('WallBundle:Status','st');
$qb2 ->andWhere($qb2->expr()->in('st.id',$qb->getDQL())); 
```

到

```
 $qb2=  $this->_em->createQueryBuilder()
        ->select('st')
        ->from('WallBundle:Status','st');
        ->where($qb2->expr()->in('st.id',$qb->getDQL())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-26T17:35:16.367

由于在使用子查询时学说不支持限制（[请看我的评论](https://stackoverflow.com/questions/9622002/symfony2-subquery-within-doctrine-entity-manager?answertab=active#tab-top)），一种可能的解决方案是执行两个单独的查询，这并不理想但有效。

```
/**
 * @param User $user
 * @param int $limit
 * @param int $offset
 * @return User[]
 */
public function getUserFollowers(User $user, $limit = 20, $offset = 0)
{
    $_followersIds = $this->getEntityManager()
        ->createQueryBuilder()
        ->select('IDENTITY(r.followeduser)')
        ->from($this->getEntityName(), 'r')
        ->where('r.followeeuser = :user')
        ->andWhere('r.followeduser !=:user')
        ->setParameter('user', $user)
        ->orderBy('r.id', 'DESC')
        ->setFirstResult($offset)
        ->setMaxResults($limit)
        ->getQuery()
        ->getResult();

    $_usersQb = $this->getEntityManager()->createQueryBuilder();
    $_usersQb
        ->select('u')
        ->from('UserBundle:User', 'u')
        ->where('u.id IN (:followersIds)')
        ->setParameter('followersIds', array_values($_followersIds));

    return $_usersQb->getQuery()->getResult();
} 
```

# plugins - netbeans 7.3 的简单代码覆盖工具

> ID：15877291
> 
> 赞同：1
> 
> 时间：2013-04-08T10:52:41.743
> 
> 标签：plugins, netbeans, code-coverage

我正在寻找一个体面的代码覆盖工具，它可以与 Netbeans 7.3 和 jdk 1.7 一起用于基于 Web 的项目。不幸的是，由于某些情况，我无法使用 maven。

[我已经从这里http://plugins.netbeans.org/plugin/38945](http://plugins.netbeans.org/plugin/38945)搜索、下载并安装了插件。重新启动后，我的项目的覆盖选项在那里，但它不可选。

在网上搜索了一些之后，结果发现帮助运行插件的“emma”还不支持 JDK 1.7。在其他地方我读到这也可能是因为我正在处理的项目是一个 Web 应用程序（Apache Wickets）。所以我实际上可能有两个问题：/。

我还下载了一些 Cobertura 插件（用于 Netbeans 7.2，但我还是安装了它），但我找不到使用它的简单方法。寻找使用此插件的方法涉及一些构建脚本调整，如果我没看错，您需要为每个项目都这样做......这似乎不是很有效。

我想知道其他人是否对这种情况有一些有用的东西，或者是否有更新，因为 StackOverflow 上有一个关于 Netbeans 7.0 的代码覆盖率的线程。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T12:47:36.733

这是最近为 NetBeans IDE 7.3 创建的插件：http: [//plugins.netbeans.org/plugin/48570/tikione-jacocoverage](http://plugins.netbeans.org/plugin/48570/tikione-jacocoverage)

# javascript - 单击按钮时隐藏图像

> ID：15877294
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:52:49.353
> 
> 标签：javascript, jquery, css

我正在使用淡入淡出来闪烁图像。

```
 <i id="abc" class="icon-thumbs-up glowed"></i>
  <br /><i id="abc1" class="icon-thumbs-up glowed"></i>
  <br /><i id="abc2" class="icon-thumbs-up glowed"></i>

  <br /><br />
  <input type="button" value="abc" onclick="ShowImage('abc')" />
  <input type="button" value="abc1" onclick="ShowImage('abc1')" />
  <input type="button" value="abc2" onclick="ShowImage('abc2')" /> 
```

它工作正常，但我想在单击某个按钮时隐藏该图像如何做到这一点

我试过了

```
$("#" + id).hide(); //To hide
document.getElementById(id).style.display = "none"; 
```

但有时会自动显示图像

我在这里试过。

[http://jsbin.com/atofif/105/edit](http://jsbin.com/atofif/105/edit)

```
loop("abc");
loop("abc1");
loop("abc2");

function loop(id){
    $('#' + id).fadeIn(700, function(){
      $(this).fadeOut(700,loop(id));
    });
}

function ShowImage(id){
   $("#" + id).hide();
} 
```

请帮助隐藏图像。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:04:02.120

`.stop(1,1)`应该做的伎俩！

`**[LIVE DEMO](http://jsbin.com/atofif/120/edit)**`

```
function loop(id){
    $('#'+ id).fadeIn(700, function(){
          $(this).fadeOut( 700, loop(id) );
    });
}

function HideImage(id){
   $("#" + id).stop(1,1).hide();
}

loop("abc");
loop("abc1");
loop("abc2"); 
```

# pdf - 使用python搜索和替换pdf中的字符串

> ID：15877297
> 
> 赞同：3
> 
> 时间：2013-04-08T10:52:54.427
> 
> 标签：pdf, python-2.7, replace

我有一个多页 pdf 文档，我正在尝试在其中找到特定的字符串模式（可能是一行或多行）并使用 python 将其替换为其他字符串。是否可以使用 python 执行此操作？

谢谢！

# javascript - 从json加载JSTree Ajax，再次呈现单击的节点，作为第一个子节点

> ID：15877299
> 
> 赞同：0
> 
> 时间：2013-04-08T10:53:06.307
> 
> 标签：javascript, ajax, jstree

我的 MVC 方法接受一个 id 参数并返回一个节点及其直接子节点。然后单击一个子节点再次返回该节点及其子节点。

但这最终看起来像这样（点击了child2）

根

--child1

--child2

----孩子2

------child2a

------child2b

--child3

我可以让 mvc 方法只返回子节点而不返回根节点，这是可行的，但我确实需要最初将根节点放在树的顶部。

这是我的 JS

```
 "json_data": {
            "ajax": {
                "url": "/sandbox/NodeTree/",
                "data": function (n) {
                    return { id: n.attr ? n.attr("id") : id };
                },
                "progressive_render": true
            }
        } 
```

# javascript - 在javascript中的同一函数上单击事件后如何调用鼠标悬停事件

> ID：15877305
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:53:21.377
> 
> 标签：javascript

我需要在 JavaScript 而不是 jQuery 中单击鼠标后调用鼠标悬停事件，主要是该功能仅在单击相同功能事件后才会发生变化，并且其新事件是鼠标悬停可能吗？

```
<a href="javascript:void(0);" id="digit" 
   onClick="javascript:return swapClass(val,val2);" 
   class="GetDivCount" onMouseOver="javascript:return swapClass(val,val2);"> 
```

好的，所以这里需要先在单击事件上调用 swapClass()，然后在单击事件之后，相同的函数将调用 onmouseover 事件，但请记住该函数是参数化的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:24:42.293

如果我理解正确，您只想在单击事件发生后等待观察`onmouseover`...为此，您将不得不摆脱内联事件处理程序。下面的例子应该可以工作。您必须区分浏览器是否可以使用`addEventListener`，因为旧版本的 IE 不支持它。

HTML：

```
<a href="javascript:void(0);" id="digit" class="GetDivCount">Hi</a> 
```

JS：

```
var a = document.getElementById('digit');
if (a.addEventListener) {  // Most browsers....
    a.addEventListener('click', function test() {
        // Add code to determine val and val2
        swapClass(val,val2);
        a.removeEventListener('click', test, false); // Remove click listener
        a.addEventListener('mouseover', function() { // Add mouseover listener
            swapClass(val,val2);
        }, false);
    }, false);
} else { // Older versions of IE only support attachEvent :(
    a.attachEvent('onclick', function test() {
        // Add code to determine val and val2
        swapClass(val,val2);
        a.detachEvent('onclick', test);
        a.attachEvent('onmouseover', function() {
            swapClass(val,val2);
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T11:17:29.353

这里有两种可能的解决方案，使用 jQuery 和不使用 jQuery：[**JSFiddle**](http://jsfiddle.net/YWKgy/1/)

没有：

```
var control = "";
var first  = document.getElementById("first");
var second = document.getElementById("second");

first.onclick = function(){
    control = true;
    alert("clicked | doSomething Here");
}
second.onmouseover = function(){
        if(control==true){
        alert("mouseovered after click | doSomething Here");
        //if you want again click and after mouseover evenet
        //you have to put here
        //control=""; 
    }
} 
```

和：

```
$("#first").on("click",function(){
    control = true;
    alert("cilcked | doSomething Here");
});

$("#second").on("mouseover",function(){
    if(control==true){
        alert("mouseovered | doSomething Here");
        //if you want again click and after mouseover evenet
        //you have to put here
        //control="";
    }
}); 
```

# objective-c - 分配已分配的内存

> ID：15877306
> 
> 赞同：0
> 
> 时间：2013-04-08T10:53:28.737
> 
> 标签：objective-c, c, memory, allocation

我正在开发一个 Objective-C (iOS) 应用程序，它在应用程序的基于 C 的部分中使用非常大的数组（大小 > 10 000）。

在执行的那一刻，我制作了一个我制作的小结构的 malloc，我有消息：

```
 malloc: *** error for object 0x6505a4: incorrect checksum for freed object - object was probably modified after being freed 
```

消息给出的地址已被我在此调用之前使用的数组占用：

```
 write in address : 0x6505a0  - im_x[12]  // im_x is my array 
 write in address : 0x6505a8  - im_x[13]  // im_x is my array 
```

为什么 iOS 会尝试分配已使用的内存？

欢迎任何帮助:)

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:01:09.977

```
 malloc: *** error for object 0x6505a4: incorrect checksum for freed object - object was probably modified after being freed 
```

是一条消息，它告诉我您在某处损坏了堆的数据结构（缓冲区溢出、下溢、其他一些奇怪的魔法）。

尝试使用`valgrind`（如果这是一个选项）调试您的程序，或者如果不尝试隔离内存损坏可疑代码并使用 valgrind 进行调试，那么您必须在某个地方有一个错误，它会覆盖任何地方的一些基本数据结构。

**进入堆**

为了解释这个奇怪的错误信息，这里有一些有趣的 ASCII 艺术

*   F：空闲块/字节
*   M : 内存管理结构

    FFFFFFFF

现在应用程序分配了两次内存（A 和 B）

我们得到类似的东西

```
AMBBBMFF 
```

如果我们现在在内存中写

```
AMBBBMFF
 ^
here 
```

我们破坏了堆的数据结构，因此 A 或 B 的校验和是错误的，因此它会发出错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:37:45.163

谢谢大家，我发现了我的问题：

其中一种算法要求具有特殊大小并且没有对其进行测试（这不是我自己的代码），因此它从数组中写入。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-08T10:59:45.490

如果您的程序产生大量 malloc ，它可以重新限制为您的程序专用的内存。当您不再需要它时，您可能会释放内存。尝试增加程序内存限制。

# c++ - G++、clang++ 和 std::function

> ID：15877307
> 
> 赞同：10
> 
> 时间：2013-04-08T10:53:34.020
> 
> 标签：c++, c++11, g++, clang++

我只是在玩 C++11 中的新 std::function，我写了一个使用 clang++ 3.2 和英特尔 C++ 编译器 13.1 编译但不使用 g++ 4.8 编译的示例。在我将此报告为错误之前，我想我会检查我没有做一些非常愚蠢的事情并且这应该实际编译。那么，以下代码是有效的 c++11 吗？

```
template <typename C>
void map(C& c, std::function<typename C::value_type(typename C::value_type)> f)
{
    for(auto& x : c) {
        x = f(x);
    }
}

int main()
{
    std::vector<int> v;
    v.push_back(1);
    v.push_back(2);
    v.push_back(3);
    map(v, [](int x) { return x+2; });

    for(auto x : v) {
        std::cout << x << std::endl;
    }
} 
```

我意识到这段代码不是很有用，但令我感到奇怪的是，clang 和英特尔 C++ 编译了它而 gcc 没有。

编辑：gcc 在传递 map 仿函数或函数指针时也不会编译相同的代码：

```
struct {
    int operator() (int a) {
        return a+2;
    }
} add2s;
map(v, add2s);

int add2 (int a) {
    return a+2;
}
map(v,add2); 
```

clang 和 icpc 也编译这两个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T11:53:16.117

这是一个 G++ 错误，它可以简化为以下不使用的示例`std::function`（或标准库中的任何内容）：

```
template<typename T>
struct function
{
    function(int)
    { }
};

struct V {
  typedef int value_type;
};

template <typename C>
void map(C&, function<typename C::value_type>)
{
}

int main()
{
  V v;
  map(v, 1);
} 
```

我已将其作为[PR 56874](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56874)报告给 bugzilla 。该问题与 lambda 无关，而是与非推导上下文中的类型错误地导致参数推导失败有关。

# java - 使用 javamail 批量读取电子邮件

> ID：15877308
> 
> 赞同：1
> 
> 时间：2013-04-08T10:53:34.230
> 
> 标签：java, jakarta-mail

我有以下代码，我想批量检索（例如：获取前 50 条消息，处理它，然后获取下 50 条）。目前它获取所有消息并将其存储在一个数组中。Javamail 支持吗？如果不是如何批量检索？

感谢您的回答。

```
Properties props = System.getProperties();
props.setProperty("mail.store.protocol", "imaps");

Session session = Session.getDefaultInstance(props, null);
Store store = session.getStore("imaps");
store.connect(host, userName, password);

Folder inbox = null;
inbox = store.getFolder("Inbox");
inbox.open(Folder.READ_WRITE);
Message[] messages = inbox.search(new FlagTerm(
        new Flags(Flag.SEEN), false));
FetchProfile fp = new FetchProfile();
fp.add(FetchProfile.Item.ENVELOPE);
fp.add(FetchProfile.Item.CONTENT_INFO);
inbox.fetch(messages, fp);
for (int i = 0; i < messages.length; i++)
{
    //Process a message
} 
```

更新：

我试图按如下方式实现批处理，但它没有按预期工作。

问题是：

*   假设收件箱中有 24 封电子邮件，然后`totalUnread`显示正确，但`Message[] messages = inbox.search(new FlagTerm(new Flags(Flag.SEEN), false), inbox.getMessages(batchStart, batchEnd));`只返回 5 条记录，而不是 10 条记录，因为`BATCH_SIZE`IS 10。

*   另一个问题是即使被调用，已处理的电子邮件也没有标记为已读`getContent()`。

    ```
    private static final int BATCH_SIZE = 10;
    Properties props = System.getProperties();
    props.setProperty("mail.store.protocol", "imaps");
    AuthenticationService authenticationService = null;
    Session session = Session.getDefaultInstance(props, null);
    Store store = session.getStore("imaps");
    store.connect(host, userName, password);
    Folder inbox = null;
    inbox = store.getFolder("Inbox");
    int totalUnread = inbox.getUnreadMessageCount();
    if (totalUnread != 0)
    {
        inbox.open(Folder.READ_WRITE);
        int batchStart = 1;
        int batchEnd = (totalUnread > BATCH_SIZE ? BATCH_SIZE
                : totalUnread);
        int batchCount = 0;
        while (true)
        {
            processABatch(inbox, batchStart, batchEnd, batchCount);
            batchStart = batchEnd + 1;
            if (batchStart > totalUnread)
            {
                break;
            }
            batchEnd = ((batchEnd + BATCH_SIZE) < totalUnread ? (batchEnd + BATCH_SIZE)
                    : totalUnread);
            batchCount++;
        }

    }
    inbox.close(true);
    store.close();
    }

    private void processABatch(Folder inbox, int batchStart, int batchEnd, int batchCount)
            throws MessagingException
    {
        Message[] messages = inbox.search(new FlagTerm(new Flags(Flag.SEEN),
                false), inbox.getMessages(batchStart, batchEnd));
        FetchProfile fp = new FetchProfile();
        fp.add(FetchProfile.Item.ENVELOPE);
        fp.add(FetchProfile.Item.CONTENT_INFO);
        inbox.fetch(messages, fp);
        for (int i = 0; i < messages.length; i++)
        {
            processMessage(messages[i], inbox);
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:05:34.980

与其做`inbox.search(new FlagTerm(...))`，不如做`inbox.search(new FlagTerm(...), getMessages(start, end))`。它使用[`getMessages(int, int)`](http://docs.oracle.com/javaee/6/api/javax/mail/Folder.html#getMessages%28int,%20int%29)允许您检索当前所有消息的子集的方法`Folder`。

确实`getMessages(start, end)`适用于完整的`Folder`. 根据该方法的 Javadoc，`Message`对象应该提供轻量级，因为它们只是对实际消息的引用。

因此，也许您可​​以编写一个返回第一`50`条未读消息的方法，方法是不断获取消息并将它们放入 a`List`或类似的东西中，直到其中有 50 条消息或到达`Folder`. 该消息的结果将是“批次”。

之后，您可以对消息进行常规处理。

# asp.net-mvc - 从局部视图 mvc razor 中获取值

> ID：15877311
> 
> 赞同：2
> 
> 时间：2013-04-08T10:53:47.407
> 
> 标签：asp.net-mvc, razor, master-pages, partial

我使用登录表单创建了一个网站。首先，我创建登录表单只是为了在帐户/登录下进行测试。然后一些需要更改所有页面应该显示登录。所以我创建了一个部分并在_Layout.cshtml下面调用，

```
<div id="logindisplay">
  @{ Html.RenderPartial("_LogOnPartial");  }
</div> 
```

**_LogOnPartial.cshtml：**

```
@model HOP2013.Models.LogOnModel

@{
  ViewBag.Title = "Log On";
 }

 @if(Request.IsAuthenticated) {
<text>Welcome <b>@Context.User.Identity.Name</b>!
[ @Html.ActionLink("Log Off", "LogOff", "Account") ]</text>
  }
   else {
       @: @Html.ActionLink("Log On", "LogOn", "Account") 
    }
          @Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.")

   @using (Html.BeginForm()) {

    <fieldset>
        <legend>Account Information</legend>
        <div id="user" class="user">
        <div class="editor-label">
            @Html.LabelFor(m => m.UserName)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.UserName, new { @title = "UserName" })
            @Html.ValidationMessageFor(m => m.UserName)
        </div>
        </div>
        <div id="password" class="password">
        <div class="editor-label">
            @Html.LabelFor(m => m.Password)
        </div>
        <div class="editor-field">
            @Html.PasswordFor(m => m.Password, new { @title = "UserName" })
            @Html.ValidationMessageFor(m => m.Password)
        </div>
        <div class="editor-label">
            @Html.CheckBoxFor(m => m.RememberMe)
            @Html.LabelFor(m => m.RememberMe)
        </div>
        </div>

        <p>
            <input type="submit" class="login" value="Log On" />
        </p>

        <p>New @Html.ActionLink("Register", "SignUp", "Account")Here</p>
    </fieldset>

 } 
```

但我无法登录。如果我使用单独的页面（LogOn.cshtml）登录意味着它正在成功登录。我不知道为什么会这样..任何人都可以澄清我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:56:07.887

您需要在表单中明确指定控制器操作：

```
@using (Html.BeginForm("LogOn", "Account")) {
    ...
} 
```

原因是当您使用`Html.BeginForm()`不带任何参数的帮助程序时，它使用当前 url 作为表单的操作。但是当前的 url 可能完全不同，因为可以从任何控制器提供此视图。通过显式指定您希望表单提交到的控制器操作，帮助程序将生成正确的操作属性：

```
<form action="/Account/LogOn" method="post">
    ...
</form> 
```

# php - php从表单更新sql

> ID：15877314
> 
> 赞同：6
> 
> 时间：2013-04-08T10:53:53.737
> 
> 标签：php, mysql

我有一个我正在尝试开始工作的 php 脚本，我基本上只是从教程中提取并进行了更改以满足我的需要。这是我第一次尝试 php，所以请放轻松。

我有 3 个文件

1.  list_records.php
2.  更新.php
3.  update_ac.php

List_records 从 mysql 中的表中读取数据。list_records 中的表有一个编辑功能，可将您带到 update.php，在其中显示 db 表中的数据。

Update.php 有一个提交按钮，用于使用 update_ac.php 更新 mysql，其中包含您使用 $_GET['id] 使用 url 中的 id 字段更改的任何信息。

我知道这个脚本对 slq 注入非常开放，但我打算只在本地环境中使用它，它不会暴露在互联网上，只有我自己和另一个人会使用这个页面，所以它不是一个真正的问题。

无论如何，我已经确认了几件事：-

1.  id 确实使用 $_Get 获取，我输入了一个 echo 并将其打印在 update.php 页面上。
2.  我可以在 php 中运行更新命令并更改值，但在使用 $_GET[id] 时它不起作用

谁能指出我正确的方向？

这是更改了数据库连接详细信息的 3 个文件

list_records.php

```
<title>Ports</title>
</head>

<?php

// Connect to server and select database.
mysql_connect("localhost", "username", "passsword")or die("cannot connect"); 
mysql_select_db("porting")or die("cannot select DB");

$sql="SELECT * FROM ports";
$result=mysql_query($sql);

?>
<body>

<table width="1200" border="1" cellspacing="1" cellpadding="0">
<tr>
<td>
<table width="1200" border="1" cellspacing="1" cellpadding="3">
<tr>
<td colspan="50"><strong>Pending Port Requests 2</strong> </td>
</tr>

<tr>
<td align="center"><strong>Customer</strong></td>
<td align="center"><strong>Number</strong></td>
<td align="center"><strong>Type</strong></td>
<td align="center"><strong>Completed</strong></td>
<td align="center"><strong>Update</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td><?php echo $rows['Customer']; ?></td>
<td><?php echo $rows['Number']; ?></td>
<td><?php echo $rows['Type']; ?></td>
<td><?php echo $rows['Completed']; ?></td> 
<td align="center"><a href="update.php?id=<?php echo $rows['id']; ?>">update</a></td>
</tr>

<?php
}
?>

</table>
</td>
</tr>
</table>
</body>
</html> 
```

更新.php

```
<title>update</title>
</head>

<?php
// Connect to server and select database.
mysql_connect("localhost", "username", "password")or die("cannot connect"); 
mysql_select_db("porting") or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database 
$sql="SELECT * FROM porting.ports WHERE id = '$id'";
$result=mysql_query($sql);
$rows=mysql_fetch_array($result);
?>
<body>

<table width="1200" border="0" cellspacing="1" cellpadding="0">
<tr>
<form name="form1" method="post" action="update_ac.php">
<td>
<table width="100%" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>&nbsp;</td>
<td colspan="6"><strong>Update Porting Details</strong> </td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center"><strong>Customer</strong></td>
<td align="center"><strong>Number</strong></td>
<td align="center"><strong>Type</strong></td>
<td align="center"><strong>Completed</strong></td>
</tr>
<tr>
<td>&nbsp;</td>
<td align="center">
<input name="Customer" type="text" id="Customer" value="<?php echo $rows['Customer']; ?>"size= "15"/>
</td>
<td align="center">
<input name="Number" type="text" id="Number" value="<?php echo $rows['Number']; ?>" size="15"/>
</td>
<td align="center">
<input name="Type" type="text" id="Type" value="<?php echo $rows['Type']; ?>" size="15"/>
</td>
<td align="center">
<input name="Comments" type="text" id="Completed" value="<?php echo $rows['Comments']; ?>" size="15"/>
</td>
<tr>
</table>
<input name="id" type="hidden" id="id" value="<?php echo $rows['id']; ?>"/>
<input type="submit" name="Submit" value="Submit" /></td>
<td align="center">&nbsp;</td>
</td>
</form>
</tr>
</table>
</body>
</html> 
```

update_ac.php

```
<?php
// Connect to server and select database.
mysql_connect("localhost", "username", "password")or die("cannot connect"); 
mysql_select_db("porting")or die("cannot select DB");

// update data in mysql database 
$sql="UPDATE ports SET Customer='Customer', Number='Number' WHERE id='id'" or die ("this stuffed up");
$result=mysql_query($sql) or die ("this stuffedup");

// if successfully updated. 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='list_records.php'>View result</a>";
}

else {
echo "ERROR";
}

?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T10:59:54.743

您的更新查询应该是

```
// update data in mysql database 
$sql="UPDATE ports SET Customer='".$_POST['Customer']."', Number='".$_POST['Number']."' WHERE id='".$_POST['id']."'";

$result=mysql_query($sql)or 
die ("this stuffedup"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:09:09.930

```
1.You have to pass a id when clicking a submit in update.php by
<a href="update_ac.php?id=<?php echo $rows['id']; ?>"><input type="submit" name="submit" value="Submit"></a>.

2.The line $id=$_GET['id'] is used in update_ac.php before insert query. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:02:27.503

```
$sql="UPDATE ports SET Customer='Customer', Number='Number' WHERE id='id'" ; 
```

这一行是错误的，你用 STRING 而不是整数来更新它。你应该把

```
$sql="UPDATE ports SET Customer='Customer', Number='Number' WHERE id='".intval($_REQUEST['id'])."'" 
```

# arrays - 获取有关已安装字体的信息

> ID：15877319
> 
> 赞同：0
> 
> 时间：2013-04-08T10:54:05.500
> 
> 标签：arrays, vb.net, visual-studio, fonts, font-family

我想检索已安装字体的信息，我尝试过这种方式：

```
Private Function Get_Installed_Fonts() As Array
    Dim AllFonts As New Drawing.Text.InstalledFontCollection ' Get the installed fonts collection.
    Dim FontFamilies() As FontFamily = AllFonts.Families()   ' Get an array of the system's font familiies.
    Return FontFamilies ' Return the array
End Function 
```

然后我可以做...：

```
 For Each Font As FontFamily In Get_Installed_Fonts()
       MsgBox(Font.Name)
   Next 
```

但我找不到这样做的方法：

```
 For Each Font As FontFamily In Get_Installed_Fonts()
        MsgBox(Font.IsSystemFont)
        MsgBox(Font.OriginalFontName)
        MsgBox(Font.SizeInPoints)
    Next 
```

我在那里缺少什么？

这就是我将获得的东西，我还需要一种方法来搜索是否安装了字体，例如：

```
If FontsArray.contains("FontName") Then... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:39:10.473

问题是 .IsSystemFont、.OriginalFontName 和 .SizeInPoints 属性是 Font 类的成员，而不是 FontFamily。FontFamily 用于创建 Font，此时您可以使用上述语言获取信息。

所以，你可以做...

```
For Each FontFam As FontFamily In Get_Installed_Fonts()
    Dim tFont as new Font(FontFam.Name, 8)
    MsgBox(tFont.IsSystemFont)
    MsgBox(tFont.OriginalFontName)
    MsgBox(tFont.SizeInPoints)
    'tFont = nothing
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:40:47.847

```
Private Function Get_Installed_Fonts() As FontFamily()
    Using AllFonts As New Drawing.Text.InstalledFontCollection 
        Return AllFonts.Families
    End Using
End Function 
```

# javascript - 连续数字排列的算法 - Javascript

> ID：15877322
> 
> 赞同：-6
> 
> 时间：2013-04-08T10:54:18.390
> 
> 标签：javascript, algorithm

我需要数字排列算法或javascript代码来处理以下情况

```
input :  [0,0,1,1,3,3,5,5,7,8,8,8,10]

output : [0,0,1,1,2,2,3,3,4,5,5,5,6] 
```

谢谢我尝试以下片段

```
var array=[];
array[0]=0;
array[1]=0;
array[2]=2;
array[3]=2;
array[4]=5;
array[5]=5;
array[6]=6;

$.each(array,function(i,val){  
   if(i==0){
     prev=eval(val);
   }else{
     if(prev!=val){
       if(val!=eval(prev)+1){          
      array[i]=eval(prev+1);
      prev=eval(prev+1);;
       }else{
          prev=val;
       }
     }
   }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:01:59.893

您可以[`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)为此使用：

```
var c = 0,
    array_in = [0,0,1,1,3,3,5,5,7,8,8,8,10],
    array_out = [];
array_out = array_in.map(function(a,i,arr){return (arr[i] > arr[i-1])?++c:c});

// array_out == [0,0,1,1,2,2,3,3,4,5,5,5,6] 
```

[看例子](http://jsfiddle.net/BcTQB/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T11:03:59.570

这可以在元素按顺序排列时完成。

```
A[n]=[0,0,1,1,3,3,5,5,7,8,8,8,10] // as these these are in sorted order .
int B[n];

for(int i=1,B[0]=0;i<n;i++)
{
   if(A[i]==A[i-1])
      B[i]=B[i-1];
   else 
      B[i]=B[i-1]+1;
} 
```

最后你会得到 B[n]=[0,0,1,1,2,2,3,3,4,5,5,5,6];

# windows - 使用加密 API 导入 DER 编码的公钥

> ID：15877325
> 
> 赞同：3
> 
> 时间：2013-04-08T10:54:23.923
> 
> 标签：windows, rsa, public-key, cryptoapi, der

是否可以使用 MS 加密 API 导入 DER 编码的公钥？所以我可以验证签名？我需要一段代码或帮助 MS Crypto API 来导入 DER 编码的公钥/证书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:25:44.940

以下三个步骤将允许您导入您的公钥证书

1.  [使用CertCreateCertificateContext](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa376033%28v=vs.85%29.aspx)获取证书上下文

2.  [使用CertOpenStore](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa376559%28v=vs.85%29.aspx)为 ADDRESSBOOK打开其他人证书存储

3.  [使用CertAddCertificateContextToStore](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376009%28v=vs.85%29.aspx)将证书上下文添加到其他人证书存储区

# debugging - 使用 Play Framework 1 的 c3p0 日志？

> ID：15877326
> 
> 赞同：2
> 
> 时间：2013-04-08T10:54:23.903
> 
> 标签：debugging, logging, log4j, playframework-1.x, c3p0

有没有办法让 Play framework 1.2.5 显示 c3p0 调试日志？

有人在[Play 电子邮件列表](https://groups.google.com/forum/#!topic/play-framework/o6dQymbq4hg/discussion)中问过这个问题；至少将以下内容添加到 log4j.properties 不起作用：

```
log4j.logger.com.mchange.v2.c3p0=DEBUG
log4j.category.com.mchange=DEBUG
log4j.logger.com.mchange=DEBUG 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:57:30.367

通过阅读一些 Play 源代码，[DBPlugin:onApplicationStart](http://grepcode.com/file/repo1.maven.org%24maven2@com.google.code.maven-play-plugin.org.playframework%24play@1.2.5@play%24db%24DBPlugin.java)似乎具有以下内容：

```
...
System.setProperty("com.mchange.v2.log.MLog", "com.mchange.v2.log.FallbackMLog");
System.setProperty("com.mchange.v2.log.FallbackMLog.DEFAULT_CUTOFF_LEVEL", "OFF");
ComboPooledDataSource ds = new ComboPooledDataSource();
... 
```

在注释掉这些 System.setProperty 行并构建一个本地 jar 之后，我能够看到 c3p0 日志记录。

不知道除此之外是否还有其他方法可以启用日志记录？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:38:43.167

您是否在任何地方看到 c3p0 日志记录信息？它是通过标准输出还是通过 java.util.logging？

无论如何，要尝试的一件事是

```
com.mchange.v2.log.MLog=com.mchange.v2.log.log4j.Log4jMLog 
```

您可以将其放在 c3p0.properties 文件中，或将其设置为系统属性（或创建一个名为 mchange-log.properties 的文件）。看到[这里](http://www.mchange.com/projects/c3p0/#configuring_logging)更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:13:04.317

您是否在 application.conf 文件中尝试过此操作？

```
# Debug SQL statements (logged using DEBUG level):
jpa.debugSQL=true 
```

不确定它是否会为您提供所需的日志，但值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:31:59.680

在讨论中，avfl 和 Scott 发现了 OnApplicationStart 作业的另一种方法：

```
package jobs;

import play.jobs.*;
import play.Logger;

@OnApplicationStart
public class C3p0Logging extends Job {

    public void doJob() {
        Logger.info("Setting custom c3p0 log level");
        com.mchange.v2.log.log4j.Log4jMLog.getLogger().setLevel(com.mchange.v2.log.MLevel.FINEST);
    }   
} 
```

这似乎以 c3p0 FallbackMLog -> System.err 告终。还没有找到使用这种方法将日志获取到 log4j 的方法。

# php - 将脚本生成的复选框值设置为多维数组

> ID：15877335
> 
> 赞同：0
> 
> 时间：2013-04-08T10:54:49.690
> 
> 标签：php, multidimensional-array, submit

希望有人能理解这...

我对 php 还是很陌生，我被卡住了。

我有一个问题...我有一个带有由 foreach 循环生成的复选框的列表，每个框都应该有一个多维数组作为它的值。

```
<input type='checkbox' name='unit[]' value='multidimensional array' /> 
```

我有一个包含这样的数组的文件：

```
$disclaimer = disclaimer;
$unit = array(
//EXTRAS
"0" => array("key0_key0" => "<h1>key0_key0_VALUE</h1>",
         "key0_key1" => "<li>key0_key1_VALUE</li>",
         "key0_key2" => "<li>key0_key2_VALUE</li>",
         "key0_key3" => "<li>key0_key3_VALUE</li>",
         "key0_key4" => "<li>key0_key4_VALUE</li>",                  
         "key0_key5" => "<li>key0_key_VALUE</li>",

         "key0_key6" => array("key0_key6_key1" => "<h1>key0_key6_key1_VALUE</h1>",
                              "key0_key6_key2" => "<li>key0_key6_key2_VALUE</li>"
                                                         ),
                                        ),
                  ),

//UNIT 1
"1" => array("key1_key0" => "<h1>key1_key0_VALUE</h1>",
         "key1_key1" => "<li>key1_key1_VALUE</li>",
         "key1_key2" => "<li>key1_key2_VALUE</li>",
         "key1_key3" => "<li>key1_key3_VALUE</li>",
         "key1_key4" => "<li>key1_key4_VALUE</li>",                  
         "key1_key5" => "<li>key1_key_VALUE</li>",

         "key1_key6" => array("key1_key6_key1" => "<h1>key1_key6_key1_VALUE</h1>",
                              "key1_key6_key2" => "<li>key1_key6_key2_VALUE</li>"
                                                         ),
                                        ),
                  ),    
//UNIT 2
"2" => array("key2_key0" => "<h1>key2_key0_VALUE</h1>",
         "key2_key1" => "<li>key2_key1_VALUE</li>",
         "key2_key2" => "<li>key2_key2_VALUE</li>",
         "key2_key3" => "<li>key2_key3_VALUE</li>",
         "key2_key4" => "<li>key2_key4_VALUE</li>",                  
         "key2_key5" => "<li>key2_key_VALUE</li>",

         "key2_key6" => array("key2_key6_key1" => "<h1>key2_key6_key1_VALUE</h1>",
                              "key2_key6_key2" => "<li>key2_key6_key2_VALUE</li>"
                                                         ),
                                        ),
); 
```

我将它们放在一个单独的包含文件中，我将这些文件包含在我可能需要显示它们的地方。

然后在我的页面上，我将其包含在内，然后是一个 foreach 循环，以显示每个带有一个复选框，该复选框将每个单元数组的复选框值增加一个。

```
$i = 0;

foreach($unit as $unit_no){
echo"<div class='pricelist-container'>";

if (is_array($unit_no)){

    foreach ($unit_no as $unit_details){

        if (is_array($unit_details)) {

            foreach ($unit_details as $unit_contents){

                if (is_array($unit_contents)){

                    foreach ($unit_contents as $extra){
                        echo $extra;
                    }
                }
                else{
                    echo $unit_contents;
                }
            }
        }

        else{
            echo $unit_details;
        }
    }
}
else{
    echo $unit_no;
}
echo"
$disclaimer
//below is where my problem seems to start.
<p class='fine'> <input type='checkbox' name='unit[]' value='" . "$" . "unit" . "[" . $i++ . "];' checked='checked' /> please uncheck to remove list</p>
<br />
</div>";
} 
```

这是我的问题...但是由于我对此很陌生，因此我可能大错特错。

我需要这些复选框来生成 $var[key] 作为值，然后在提交表单后，它需要能够将这些变量传递到一个新页面，在该页面中我再次包含了数组文件，这样我就可以遍历复选框并将它们再次显示在候选名单上。但我不能以这样的方式编写代码，即每次将一个单元添加到包含文件时，我都需要添加小循环来回显这些单元中的每一个，因为我会将这个包含文件更改为数据库文件并创建一个上传页面让网站所有者创建他/她自己的新单元，而无需编辑任何内容以在网站上显示。

```
if(isset($_POST['unit'])){
            if (is_array($_POST['unit'])){
                foreach ($_POST['unit'] as $print_unit){
                    echo $print_unit;
                }
            }
        }
//this loop will echo out the $var[key] as strings. 
```

上面的 foreach 会将 $var 作为字符串回显，但不会作为带有递增键的 $var 回显。

它基本上是一个产品列表，其中每个产品的内容都在一个数组中，带有复选框以从可打印列表中添加或删除它们。除了创建复选框值之外，一切正常......

```
value='" . "$" . "unit" . "[" . $i++ . "];' 
```

这将为我在包含中的每个数组创建名称 $unit[1] 但它会生成一个字符串 $unit[1] 但不是实际数组，它是第一个键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:37:29.423

我的一个朋友帮助我解决了这个问题，我将在我有限的知识范围内尽我所能回答我自己的问题。

如果专业人士可以阅读此答案并确认没问题，那就太好了。

ARRAY SETUP 保存在包含文件中，例如（data.php）：

```
$Number = 1;

$unit[$Number]['id']="id";
$unit[$Number]['img']="image";
$unit[$Number]['name']="name";
$unit[$Number]['price']=00.00;
$unit[$Number]['contents'][1]="content1";
$unit[$Number]['contents'][2]="content2";
$unit[$Number]['contents'][3]="content3";
$unit[$Number]['contents'][4]="content4.";

$Number = 2;

$unit[$Number]['id']="id";
$unit[$Number]['img']="image";
$unit[$Number]['name']="name";
$unit[$Number]['price']=00.00;
$unit[$Number]['contents'][1]="content1";
$unit[$Number]['contents'][2]="content2";
$unit[$Number]['contents'][3]="content3";
$unit[$Number]['contents'][4]="content4.";

//END OF PRODUCT/UNIT ARRAYS 
```

第一个列表显示循环在实际网页上显示价格表：

包含您的数据文件后，例如：

```
<!--OPEN FORM-->
<form method='post' action='SCRIPT FILE NAME.php'>

<?php 

  include('data.php'); 

  /*Set INCREMENT.*/
   $i = 1;

  /*DISPLAY LOOP*/
   foreach ($unit as $UNIT) 
   //ECHO SOME HTML FOR A LAYOUT CONTAINER DIV
     echo "<div class='####'>";
     //image
     echo "<img class='#' src='location_folder_details/".$UNIT['img']."'>";
     //name
     echo $UNIT['name'];
     //price
     echo "Dollar/Pound symbol".number_format ($UNIT['price'] , 2, '.' , ' ' );
     //contents

     //SECOND ARRAY LOOP FOR CONTENT
       if (is_array($UNIT['contents'])){
         foreach ($UNIT['contents'] as $unit_contents){
           echo "<li>".$unit_contents."</li>"; 
          }
        }
        else {
          echo "NO DETAILS AVAILABLE";
        }

     echo "<p class='fine' ><input type='checkbox' name='unit_$i' value='".$UNIT['id']."' checked='checked'> please uncheck to remove.</p>";
  //CLOSE HTML LAYOUT CONTAINER DIV.
   echo "</div>";
  //Increment $i
   $i ++;
  }
  //ADD HIDDEN FIELD TO REMEMBER INCREMENT 
   echo "<input type='hidden' name='count' value='$i'>";
?>

<!--ADD SUBMIT AND END FORM-->
 <input class='send' action='###.php' type='submit' name='NAME' value='SUBMIT'  />
 </form> 
```

然后怎么处理

```
//ADD INCLUDE FILE 
include ('data.php');

//POST HIDDEN COUNT FIELD
$count = $_POST['count'];
//RE-SET INCREMENT 
$i = 1;

<?php    
  while ($i < $count){
    $var_name = "unit_$i";

  if (isset($_POST[$var_name])) {
    // The tickbox "value", is the UNIT ID... Check include.php
      $unit_id = $_POST["$var_name"];

  foreach ($unit as $UNIT) {
        if ($UNIT['id'] == $unit_id) {
      //HTML LAYOUT ECHO
           echo "<div class='####'>";
      //image
           echo "<img class='####' src='LOCATION/PATH/".$UNIT['img']."'>";
      //name
       echo $UNIT['name'];
      //price
        echo "DOLLAR/POND SYMBOL".number_format ($UNIT['price'] , 2, '.' , ' ' );

      //SECOND ARRAY LOOP FOR CONTENT
           if (is_array($UNIT['contents'])){
             foreach ($UNIT['contents'] as $unit_contents){
              //CONTENTS
               echo "<li>".$unit_contents."</li>"; 
                  }
           }
           else {
             echo "NO DETAILS AVAILABLE";
           }
           //HTML LAYOUT ECHO
             echo "</div>";
          }

        }
    }
    $i++;
  }
?> 
```

我希望这对其他初学者有用，因为我为此苦苦挣扎了好几天，但我无法弄清楚。

# node.js - NodeJS + Express - 将会话中间件应用于某些路由

> ID：15877342
> 
> 赞同：23
> 
> 时间：2013-04-08T10:55:13.290
> 
> 标签：node.js, session, express

我有一个带有一些路由的 Express 应用程序，其中只有两个需要支持会话。我到处读到中间件定义 (app.use(express.session({...) 仅适用于它之后的路由，所以我创建了这个示例：

```
var express = require('express');
var app = express();
app.use(express.bodyParser());

app.get('/path1', function (req, res) {
    res.send('text response');
});

app.use(express.cookieParser());
app.use(express.session({
    secret: 'secret',
    cookie: { maxAge: new Date(Date.now() + 2 * 60 * 1000) }
}));

app.get('/path2', function (req, res) {
    res.session.test = { "test": "test" };
    res.send('text response');
});

app.listen(8088); 
```

但这不起作用：在 /path2 res.session 中未定义。
如果我将会话中间件定义向上移动 - 一切正常，但我看到在调用 /path1 时正在创建会话（这是我想要避免的）

有人可以解释**单个应用程序如何仅在****某些路由**中使用会话。

谢谢！

///// 更新 //////

经过更多的挖掘 - 我想通了：

不要使用：`app.use(express.session({ ... }));`
而是 - 定义以下内容：

```
var sessionMiddleware = express.session({
    //session configurations
});

function sessionHandler(req, res, next) { sessionMiddleware(req, res, next); } 
```

然后将处理程序应用于需要会话支持的特定路由：

```
app.get('/path_that_need_session', sessionHandler, function (req, res) {                     
 /* Do somthing with req.session */  
}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-05T15:12:42.127

不要使用`app.use(express.session({ ... }))`.

相反，初始化会话中间件，保存对结果函数的引用，然后将其直接包含在您想要的路由中。

```
var express = require('express'),
    app = express();

var session = express.session({
    //session configuration
});

app.use(app.router);

// must come after app.use(app.router);
app.get('/your/route/here', session, function(req, res){
    // code for route handler goes here
}); 
```

比更新中包含的答案略简单（您不需要包装函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:23:38.903

问题实际上是您在使用*之前*`/path1`定义的路线。 *`express.session`*

 *当您在 Express 中声明路由处理程序时，此时`router`中间件（处理所有路由）将被插入到中间件链中。这意味着，如果您还没有`app.use`'d 任何将被未来路由使用的中间件（例如您的处理程序 for `/path2`），则在处理任何路由时它们将永远不会被调用。

如果您将处理程序移动`/path1`到 after `app.use(express.session(...))`，它将无需使用技巧即可工作。*

# apache-camel - Apache Camel 使用来自的 HTTP 定义路由

> ID：15877346
> 
> 赞同：2
> 
> 时间：2013-04-08T10:55:25.977
> 
> 标签：apache-camel

如何为“来自”端点定义带有 HTTP 的 Camel Route？

我的目标是定义一个路由，当有 HTTP 请求时，一条消息将在 ActiveMQ 队列中排队。

我尝试了以下路由定义：

```
<route>
  <from uri="http://localhost:8181/cxf/crm/customerservice/customers" />
  <to uri="activemq:queue:LOG.ME" />
</route> 
```

从浏览器中，我访问 URL：

```
http://localhost:8181/cxf/crm/customerservice/customers/123 
```

我已验证 HTTP 请求已到达 Web 服务“customerservice”，因为我收到了来自 Web 服务的 XML 响应。但是，ActiveMQ 队列中没有消息入队。

下面是处理来自 ActiveMQ 队列的消息的路由定义。

```
<route>
  <from uri="activemq:queue:LOG.ME" />
  <multicast>
    <pipeline>
      <bean ref="processor1" method="handle" />
      <to uri="mock:result" />
    </pipeline>
    <pipeline>
      <bean ref="processor2" method="handle" />
      <to uri="mock:result" />
    </pipeline>
  </multicast>
</route> 
```

我验证了 ActiveMQ 没有排队，因为我的 bean“processor1”和“processor2”的“handle”方法没有被执行。

如何为“来自”端点定义带有 HTTP 的 Camel Route？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:35:15.483

如果您想监听 HTTP 请求，那么您需要使用[servlet](http://camel.apache.org/servlet)组件（如果您在 Web 应用程序中运行）或嵌入简单 http 服务器的[jetty组件。](http://camel.apache.org/jetty)

两者都有很好的文档和示例。

http 和 http4 组件仅供生产者使用 ( `<to ... />`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:06:18.943

要监听传入的 http 请求，可以使用 jetty 或 cxf 组件设置代理，然后调用 Web 服务并将消息记录到 activemq。

例如，

```
from("jetty:http://localhost:8282/xxx").
     to("http://localhost:8181/cxf/crm/customerservice/customers").
          to("activemq:queue:LOG.ME"); 
```

现在，要访问 Web 服务，可以调用代理`http://localhost:8282/xxx`，而不是直接调用 Web 服务。也可以使用 cxf 组件设置代理，它有据可查。

# apache - WSO2 ESB 并发线程 vfs-worker

> ID：15877355
> 
> 赞同：0
> 
> 时间：2013-04-08T10:55:52.093
> 
> 标签：apache, wso2, wso2esb, synapse, apache-commons-vfs

我是 WSO2 和 Apache Synapse 的新手。我做了一个代理服务来将一些文件路由到另一个文件夹，但是当我查看 JConsole 时，只有一个线程在工作。

如何配置设置以使多个线程同时工作并处理同一个源文件夹？我像这样配置线程池：

```
-Dsnd_t_core=3 \
-Dsnd_t_max=5000 \
-Dsnd_qlen=-1 \ 
```

我的代理服务如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://ws.apache.org/ns/synapse">
   <registry provider="org.wso2.carbon.mediation.registry.WSO2Registry">
      <parameter name="cachableDuration">15000</parameter>
   </registry>
   <proxy name="Service1"
          transports="vfs"
          startOnLoad="true"
          trace="enable"
          statistics="enable">
      <description/>
      <target>
         <inSequence>
            <log level="custom">
               <property name="Message" value="Routing start"/>
               <property name="filename"
                         expression="fn:concat(get-property('transport', 'FILE_NAME'), '.xml')"/>
            </log>
         </inSequence>
         <outSequence>
            <property name="OUT_ONLY" value="true"/>
         </outSequence>
      </target>
      <parameter name="transport.vfs.Streaming">false</parameter>
      <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
      <parameter name="transport.PollInterval">1</parameter>
      <parameter name="transport.vfs.FileURI">file:///home/user/test/target2</parameter>
      <parameter name="transport.vfs.MoveAfterProcess">file:///home/user/test/target</parameter>
      <parameter name="transport.vfs.MoveAfterFailure">file:///home/user/test/failure</parameter>
      <parameter name="transport.vfs.Locking">disable</parameter>
      <parameter name="transport.vfs.FileNamePattern">.*.*</parameter>
      <parameter name="transport.vfs.ContentType">text/plain</parameter>
      <parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
   </proxy>
   <sequence name="fault">
      <log>
         <property name="MESSAGE" value="Executing default &#34;fault&#34; sequence"/>
         <property name="ERROR_CODE" expression="get-property('ERROR_CODE')"/>
         <property name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')"/>
      </log>
      <drop/>
   </sequence>
   <sequence name="main">
      <in>
         <filter source="get-property('To')" regex="http://localhost:9000.*">
            <send/>
         </filter>
      </in>
      <out>
         <send/>
      </out>
      <description>The main sequence for the message mediation</description>
   </sequence>
</definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:18:06.383

正如我从您的问题中了解到的那样，您正在尝试做的是并行提供相同的消息并将它们存储在并行执行的文件中。

如果是这样，实现此目的的方法是使用克隆中介。克隆中介会将消息拆分为多个相同的消息，这些消息将并行处理

您可以通过 [1] 参考克隆中介文档。

根据您的场景，您可以使用 iterate mediator 根据您的 parant 消息中的文件名进行迭代，iterate mediator 上的示例可以在 [2] 中找到，并且示例在 [3]

[1]。[http://docs.wso2.org/wiki/display/ESB460/Clone+Mediator](http://docs.wso2.org/wiki/display/ESB460/Clone+Mediator)

[2]。[http://docs.wso2.org/wiki/display/ESB460/Sample+400%3A+Message+Splitting+and+Aggregating+the+Responses](http://docs.wso2.org/wiki/display/ESB460/Sample+400%3A+Message+Splitting+and+Aggregating+the+Responses)

[3]。[http://docs.wso2.org/wiki/display/ESB460/Iterate+Mediator](http://docs.wso2.org/wiki/display/ESB460/Iterate+Mediator)

谢谢你，达沙那。

# c# - 以编程方式选择列表视图中的项目

> ID：15877356
> 
> 赞同：4
> 
> 时间：2013-04-08T10:56:02.977
> 
> 标签：c#, listview

我在 Windows 窗体中有一个列表视图。`_listView1`. 我希望以编程方式在列表视图中选择一个项目。我说`_listView1.Items[i].Select=true;`

但这并不能解决问题。该项目没有被选中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:58:14.123

该属性是[`Selected`，不是`Select`](http://msdn.microsoft.com/en-GB/library/system.windows.forms.listviewitem.selected.aspx)：

```
_listView1.Items[i].Selected = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:58:26.687

试试这个：_listView1.selectedIndex = i;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:58:50.263

只使用[`ListViewItem.Selected`](http://msdn.microsoft.com/en-GB/library/system.windows.forms.listviewitem.selected.aspx)属性；

```
_listView1.Items[i].Selected = true; 
```

> 获取或设置一个值，该值指示项目是否被选中。

# dictionary - 在 Typescript 中声明和初始化字典

> ID：15877362
> 
> 赞同：336
> 
> 时间：2013-04-08T10:56:38.190
> 
> 标签：dictionary, initialization, typescript

给定以下代码

```
interface IPerson {
   firstName: string;
   lastName: string;
}

var persons: { [id: string]: IPerson; } = {
   "p1": { firstName: "F1", lastName: "L1" },
   "p2": { firstName: "F2" }
}; 
```

为什么初始化不被拒绝？毕竟，第二个对象没有“lastName”属性。

* * *

## 回答 #1

> 赞同：387
> 
> 时间：2013-04-08T12:42:39.147

**编辑**：这已在最新的 TS 版本中得到修复。引用@Simon_Weaver 对 OP 帖子的评论：

> 注意：这已被修复（不确定哪个确切的 TS 版本）。正如您所料，我在 VS 中遇到了这些错误：`Index signatures are incompatible. Type '{ firstName: string; }' is not assignable to type 'IPerson'. Property 'lastName' is missing in type '{ firstName: string; }'.`

* * *

显然，在声明时传递初始数据时这不起作用。我猜这是 TypeScript 中的一个错误，所以你应该在项目站点提出一个错误。

您可以通过在声明和初始化中拆分示例来使用类型化字典，例如：

```
var persons: { [id: string] : IPerson; } = {};
persons["p1"] = { firstName: "F1", lastName: "L1" };
persons["p2"] = { firstName: "F2" }; // will result in an error 
```

* * *

## 回答 #2

> 赞同：132
> 
> 时间：2017-07-19T10:44:15.823

要在打字稿中使用字典对象，您可以使用如下接口：

```
interface Dictionary<T> {
    [Key: string]: T;
} 
```

并且，将其用于您的类属性类型。

```
export class SearchParameters {
    SearchFor: Dictionary<string> = {};
} 
```

使用和初始化这个类，

```
getUsers(): Observable<any> {
        var searchParams = new SearchParameters();
        searchParams.SearchFor['userId'] = '1';
        searchParams.SearchFor['userName'] = 'xyz';

        return this.http.post(searchParams, 'users/search')
            .map(res => {
                return res;
            })
            .catch(this.handleError.bind(this));
    } 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2013-04-08T16:14:38.070

我同意 thomaux 的观点，即初始化类型检查错误是一个 TypeScript 错误。但是，我仍然想找到一种方法，通过正确的类型检查在单个语句中声明和初始化 Dictionary。这个实现更长，但是它增加了额外的功能，比如`containsKey(key: string)`和`remove(key: string)`方法。我怀疑一旦 0.9 版本中提供了泛型，这可以简化。

首先，我们声明基本 Dictionary 类和接口。索引器需要该接口，因为类无法实现它们。

```
interface IDictionary {
    add(key: string, value: any): void;
    remove(key: string): void;
    containsKey(key: string): bool;
    keys(): string[];
    values(): any[];
}

class Dictionary {

    _keys: string[] = new string[];
    _values: any[] = new any[];

    constructor(init: { key: string; value: any; }[]) {

        for (var x = 0; x < init.length; x++) {
            this[init[x].key] = init[x].value;
            this._keys.push(init[x].key);
            this._values.push(init[x].value);
        }
    }

    add(key: string, value: any) {
        this[key] = value;
        this._keys.push(key);
        this._values.push(value);
    }

    remove(key: string) {
        var index = this._keys.indexOf(key, 0);
        this._keys.splice(index, 1);
        this._values.splice(index, 1);

        delete this[key];
    }

    keys(): string[] {
        return this._keys;
    }

    values(): any[] {
        return this._values;
    }

    containsKey(key: string) {
        if (typeof this[key] === "undefined") {
            return false;
        }

        return true;
    }

    toLookup(): IDictionary {
        return this;
    }
} 
```

现在我们声明 Person 特定类型和 Dictionary/Dictionary 接口。在 PersonDictionary 中，请注意我们如何覆盖`values()`并`toLookup()`返回正确的类型。

```
interface IPerson {
    firstName: string;
    lastName: string;
}

interface IPersonDictionary extends IDictionary {
    [index: string]: IPerson;
    values(): IPerson[];
}

class PersonDictionary extends Dictionary {
    constructor(init: { key: string; value: IPerson; }[]) {
        super(init);
    }

    values(): IPerson[]{
        return this._values;
    }

    toLookup(): IPersonDictionary {
        return this;
    }
} 
```

这是一个简单的初始化和使用示例：

```
var persons = new PersonDictionary([
    { key: "p1", value: { firstName: "F1", lastName: "L2" } },
    { key: "p2", value: { firstName: "F2", lastName: "L2" } },
    { key: "p3", value: { firstName: "F3", lastName: "L3" } }
]).toLookup();

alert(persons["p1"].firstName + " " + persons["p1"].lastName);
// alert: F1 L2

persons.remove("p2");

if (!persons.containsKey("p2")) {
    alert("Key no longer exists");
    // alert: Key no longer exists
}

alert(persons.keys().join(", "));
// alert: p1, p3 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2020-06-30T05:22:57.530

Typescript 在您的情况下失败，因为它希望所有字段都存在。使用**Record 和 Partial**实用程序类型来解决它。

**`Record<string, Partial<IPerson>>`**

```
interface IPerson {
   firstName: string;
   lastName: string;
}

var persons: Record<string, Partial<IPerson>> = {
   "p1": { firstName: "F1", lastName: "L1" },
   "p2": { firstName: "F2" }
}; 
```

*解释。*

1.  **记录**类型创建一个字典/哈希图。
2.  **部分**类型表示可能缺少某些字段。

*备用。*

如果您希望姓氏可选，您可以附加一个 ? Typescript 会知道它是可选的。

```
lastName?: string; 
```

[https://www.typescriptlang.org/docs/handbook/utility-types.html](https://www.typescriptlang.org/docs/handbook/utility-types.html)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-01-06T13:08:15.013

这是受@dmck启发的更通用的字典实现

```
 interface IDictionary<T> {
      add(key: string, value: T): void;
      remove(key: string): void;
      containsKey(key: string): boolean;
      keys(): string[];
      values(): T[];
    }

    class Dictionary<T> implements IDictionary<T> {

      _keys: string[] = [];
      _values: T[] = [];

      constructor(init?: { key: string; value: T; }[]) {
        if (init) {
          for (var x = 0; x < init.length; x++) {
            this[init[x].key] = init[x].value;
            this._keys.push(init[x].key);
            this._values.push(init[x].value);
          }
        }
      }

      add(key: string, value: T) {
        this[key] = value;
        this._keys.push(key);
        this._values.push(value);
      }

      remove(key: string) {
        var index = this._keys.indexOf(key, 0);
        this._keys.splice(index, 1);
        this._values.splice(index, 1);

        delete this[key];
      }

      keys(): string[] {
        return this._keys;
      }

      values(): T[] {
        return this._values;
      }

      containsKey(key: string) {
        if (typeof this[key] === "undefined") {
          return false;
        }

        return true;
      }

      toLookup(): IDictionary<T> {
        return this;
      }
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-09T08:55:22.517

如果您想忽略某个属性，请通过添加问号将其标记为可选：

```
interface IPerson {
    firstName: string;
    lastName?: string;
} 
```

# node.js - express 是否解决“阻塞代码”？

> ID：15877364
> 
> 赞同：2
> 
> 时间：2013-04-08T10:56:44.963
> 
> 标签：node.js, express

我正在从[Node Beginner Book](http://www.nodebeginner.org/)和随后的电子书购买中学习 node.js。在书中，Manuel Kiessling 解释了这样一行阻塞代码：

```
fs.readFileSync(blah); 
```

将阻止整个节点进程和所有请求进入。这对于多用户网站来说**真的很糟糕！**

这是示例，Kiessling 使用：

```
exec("ls -lah", function( error, stdout, stderr ) {
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write(stdout);
    response.end();
}); 
```

这是欺骗我的代码。他说，`ls -lah`可以很容易地用更耗时的操作（如`find / -name "*"`数据库查找）代替。我假设由于异步回调，昂贵的阻塞操作会以某种方式在后台显式运行。

所以我必须用这段代码来测试我的理论：

```
var http = require("http");
var url = require("url");

badSleep = function(ms) {
    var now = new Date();
    var finishAtDate = now.getTime() + ms;
    console.log("CPU burning sleep for " + ms + " milliseconds");
    while(new Date() < finishAtDate) {
       // do nothing
    }
};

asyncWrapper = function(callback) {
    //badSleep(3000);
    callback();
}

http.createServer(function(request, response) {
    var pathname = url.parse(request.url).pathname;
    console.log("Serve up " + pathname);
    if (pathname == '/favicon.ico') {
        response.writeHead(404);
        response.end();
    } else {
        asyncWrapper(function() {
            badSleep(3000);
            response.writeHead(200, {"Content-Type": "text/plain"});
            response.write("\nI was wrong " + new Date());
            response.end();
        });
    }
}).listen(8888); 
```

问题是，无论我把睡眠放在哪里，它**仍然会阻塞**节点事件循环。回调并**不能解决**阻塞问题。SO的好用户也在评论中告诉我这一点。

那怎么`exec`做？？？我很困惑，所以我去查看了[github 上的子进程代码](https://github.com/joyent/node/blob/master/lib/child_process.js)。我发现`exec`打电话了`spawn`！！！它使一个子进程！谜团已揭开。异步代码并不能“解决”阻塞问题，但 spawn 可以。

这引出了我的问题。express 是否以某种方式解决了阻塞问题，还是您仍然需要担心它？

### PS：这个问题是一个重大的重写。我想请求以下 SO 用户的原谅，并感谢他们对我的耐心。我肯定在这里学到了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:11:02.327

> 有人发表了关于理解节点js事件循环的评论。对，就是这样。如果将其包装在异步调用中，则可以发出阻塞调用，因为您没有阻塞节点事件循环。

如果你用异步调用包装同步调用，你仍然会遇到阻塞。例如，如果你写这样的东西：

```
fs.readFile("file1.txt", function(err, data1) {
   var data2 = fs.readFileSync("file2.txt");
}); 
```

该进程在读取 file1.txt 时不会被阻塞，因为您使用的是异步调用，但是，一旦完成读取 file1 并到达读取 file2 的行，**它就会阻塞**。

通过在异步/非阻塞调用中发出同步/阻塞调用，您只是在**延迟**阻塞。

你是对的，阻止整个网站真的很糟糕，这就是为什么你不应该经常发出阻止呼叫的原因。由于 node.js 是从头开始编写的，因此大多数 I/O 调用默认情况下都是异步的，您应该尽可能多地使用它们而不是同步调用。

> 问题是，快递会自动为您处理这个问题，还是您仍然需要担心？

你仍然需要担心它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:19:30.323

> 问题是，快递会自动为您处理这个问题，还是您仍然需要担心？

你仍然需要担心它。NodeJS 是单线程的，这意味着每个同步操作都会完全阻塞它，无论它在哪里调用。Express 和任何其他框架都不能在不阻塞服务器的情况下使用同步操作。简单的

```
var x = 1; 
```

已经阻塞了整个服务器，直到它完成创建新变量并为其分配新值。

异步架构的全部意义在于它比线程更有效。不要被愚弄，异步编程比线程更难，因为没有隔离。如果一个线程失败，其他线程仍然可以工作，而在异步服务器中，一个异常可能会破坏**整个**服务器。

> 问题是您可能会阻塞主节点事件循环！

这句话表明 NodeJS 除了主事件循环之外还有更多的东西。这不是真的。每个代码都在主循环中调用。

也看看这个：

[事件循环与多线程阻塞 IO](https://stackoverflow.com/questions/953428/event-loop-vs-multithread-blocking-io)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:19:48.600

*任何*对非异步函数的调用都会“阻塞”，即使它被包装在另一个函数中。唯一的例外是包装函数是否可以将处理推迟到另一个线程/进程（例如，像`cluster`API）。

# python - Python NameError：未定义名称'ctypes'

> ID：15877365
> 
> 赞同：8
> 
> 时间：2013-04-08T10:56:45.770
> 
> 标签：python, windows, dll, ctypes

我正在尝试从自定义 .dll 文件中调用一个函数。但是当我尝试加载我的库 SDK.dll 时，我收到以下错误。我正在遵循此处的指示：[Python import dll](https://stackoverflow.com/questions/5253854/python-import-dll)

有谁知道问题是什么？我只为 MAC 环境找到了这个问题的参考资料。

```
>>> from ctypes import *
>>> lib = ctypes.WinDLL('C:/Develop/test/SDK.dll')

Traceback (most recent call last):
  File "<pyshell#19>", line 1, in <module>
    lib = ctypes.WinDLL('C:/Develop/test/SDK.dll')
NameError: name 'ctypes' is not defined 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T10:58:37.750

通过这样做`from ctypes import *`，您将所有内容从`ctypes`模块拉到本地命名空间，因此您应该直接调用`WinDLL`：

```
>>> from ctypes import *
>>> lib = WinDLL('C:/Develop/test/SDK.dll') 
```

另一种（正如 NPE 提到的通常更好）的方法是只导入`ctypes`：

```
>>> import ctypes
>>> lib = ctypes.WinDLL('C:/Develop/test/SDK.dll') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T10:58:33.253

改变

```
from ctypes import * 
```

到

```
import ctypes 
```

前者将所有名称从`ctypes`当前命名空间导入。这通常被认为是一种不好的做法，最好避免。

# javascript - 重置谷歌浏览器扩展后台页面变量

> ID：15877368
> 
> 赞同：1
> 
> 时间：2013-04-08T10:56:48.870
> 
> 标签：javascript, google-chrome, google-chrome-extension

我创建了 Google Chrome 扩展程序。我的后台页面的脚本文件 (background.js) 中有一些状态变量

关闭并重新打开浏览器后，该变量的值不会重置。关闭浏览器后如何重置这些变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:39:24.473

If js variables in the background page keep their values, that means the chrome process has not exited. Probably some chrome window is still open. Maybe you have developer tools for the background page open?

If don't find any chrome window that's still open, check for the chrome process using task manager if you are using windows, or with ps in other environments. If the process is still running there maybe something that's preventing from ending properly.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T14:08:20.877

```
chrome.windows.onRemoved.addListener(function(windowId) {
    Init(); });

function Init() {    //clear variables } 
```

# c# - 使用从后面的代码注入的 javascript 重定向不起作用

> ID：15877369
> 
> 赞同：0
> 
> 时间：2013-04-08T10:56:59.870
> 
> 标签：c#, javascript, asp.net

这是给我站点根路径的属性

```
public static string SiteRootPath
    {
        get
        {
            string host = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority);
            string appRootUrl = HttpContext.Current.Request.ApplicationPath;
            if (string.IsNullOrEmpty(appRootUrl) || appRootUrl == "/")
            {
                return host + "/";
            }
            else
            {
                return host + appRootUrl + "/";
            }
        }
    } 
```

我喜欢这个

```
string path = EMS.DAL.DALHelper.SiteRootPath + "Home.aspx"; 
```

然后我这样做

```
string script = "<script language='javascript' >alert('User registered successfully');window.location.replace('" + path + "');</script>";
Page.RegisterStartupScript("alert", script); 
```

这会将我重定向到主页，并且在 localhost 上运行良好，但在发布站点的 IIS 上却不行。

当我检查页面源时，仅发现“警报（'用户注册成功'）；” 里面的脚本标签？？

没办法解决。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:20:20.523

我是否理解这在您的 IIS 中可以正常工作`localhost`？您是否可能有此应用程序的先前版本`alert()`，但没有`window.location.replace()`？

在我看来，好像您在该站点上托管的应用程序版本不正确/未更新，并且正在显示过时的版本。否则，我看不出您的源代码的一部分是如何不包括在内的。

我会尝试清空与服务器上的应用程序相关的所有缓存和临时文件 (DLL)，然后清理、重建并重新发布它。

查找：**`Temporary ASP.NET Files`**在类似于以下位置的文件夹下调用，然后清空它们（当然，注意不要删除临时文件以外的任何内容）：

*   C:\Windows\Microsoft.NET\Framework64\v2.0.50727\
*   C:\Windows\Microsoft.NET\Framework64\v4.0.30319\
*   C:\Windows\Microsoft.NET\Framework\v4.0.30319\
*   (...)

# php - 自定义简码不呈现

> ID：15877376
> 
> 赞同：0
> 
> 时间：2013-04-08T10:57:34.317
> 
> 标签：php, wordpress, shortcode

使用来自互联网的代码示例制作短代码以返回特定页面。但是，短代码似乎没有呈现，而是显示了短代码文本。该函数已在内部定义`functions.php`。

代码如下：

```
/* Code taken from: 
 * http://alex.leonard.ie/2010/09/09/wordpress-shortcode-to-insert-content-of-another-page/
 */

function pa_insertPage($atts, $content = null) {
     // Default output if no pageid given
     $output = NULL;
     // extract atts and assign to array
     extract(shortcode_atts(array(
     "page" => '' // default value could be placed here
     ), $atts));
     // if a page id is specified, then run query
     if (!empty($page)) {
     $pageContent = new WP_query();
     $pageContent->query(array('page_id' => $page));
     while ($pageContent->have_posts()) : $pageContent->the_post();
     // assign the content to $output
     $output = get_the_content();
     endwhile;
     }
     return $output;
}
add_shortcode('insert_page', 'pa_insertPage'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:24:37.023

不是问题的答案^(（问题出在其他地方，不在代码中）)，而是代码的优化版本。以社区 Wiki 模式发布，因此不会因反对票或反对票而产生意外声誉。

```
add_shortcode( 'insert_page', 'insert_page_so_15877376' );

function insert_page_so_15877376( $atts, $content = null ) 
{
    // Default output if no pageid given
    $output = '';

    // Access $atts directly, no need of extracting
    if( !isset( $atts['page'] ) )
        return $output;

    // Grab the page directly, no need of WP_Query
    // get_post() could be used as well
    $get_page = get_page( $atts['page'] );
    if( !$get_page )
        return $output;

    // Do Shortcode in case the other page contains another shortcode
     $output = do_shortcode( $get_page->post_content );
     return $output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:02:22.577

感谢您的帮助.. 短代码现在似乎正在呈现（问题可能是错误的 function.php 文件:)）..

似乎主题有另一个要使用的functions.php文件..（不确定主题是否复制或被开发人员错误地完成了..:)）..

问候

# html - 在 Visual Studio 中将 HTML 转换为 ASP.NET

> ID：15877377
> 
> 赞同：-1
> 
> 时间：2013-04-08T10:57:37.683
> 
> 标签：html

我有一个用 HTML 完成的项目，但现在需要在 Visual Basic 中使用它，因为它将在 ASP.Net 中编码。

任何想法就 HTML 标记而言将更改为 ASP.Net 标记。我知道按钮和表格的语法不同。

将项目转换到 Visual Studio 的最快方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:00:14.213

您是 ASP.NET MVC，因此 99% 的标记将适用。ASP.NET MVC 是一个 ASP.NET 应用程序，所以它应该适用。简单教程在[这里](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:05:11.193

要在 VS 中打开您的网站，只需转到文件 -> 打开 -> 网站并找到您的网站文件夹。

从那里开始，更改取决于您。如果网站是纯 HTML，则网站应该无需任何额外更改即可运行，但任何 VB 添加都必须从头开始。您可以使用网站上现有的控件并将它们转换为服务器的 [runat="server"]（在简单的情况下）并将它们复制到新创建的 Web 表单页面。

这个问题很笼统......在当前状态下，最好的答案可能是“至少在这里学习 ASP.NET 的基础知识：[ASP.NET 网站](http://www.asp.net/web-forms)”

# python - 在 Python 数组中找到最小值

> ID：15877379
> 
> 赞同：2
> 
> 时间：2013-04-08T10:57:47.170
> 
> 标签：python, arrays, sorting

我有两个数组说`x = [110, 10, 1000 ....]`和`y = ['adas', 'asdasqe', 'ae1e' ....]`

这两个数组的长度相同。我的问题是或者打印 10 个值，`y`使得 10 的对应值`x`是最大的 10 个。

在平均测试用例中`x`，`y`长度为 4000-5000。所以速度至关重要。你能告诉我一种使用python的一些内置函数来做到这一点的方法，以便操作尽可能快。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T11:02:59.840

如果您想要数千个列表中的前十个元素，您可以尝试[`heapq`](http://docs.python.org/2/library/heapq.html)：

```
import heapq

heapq.nlargest(10, zip(x, y)) 
```

# jquery - 使用 wysihtml5 创建后，停止滚动到 textarea 元素的顶部

> ID：15877382
> 
> 赞同：2
> 
> 时间：2013-04-08T10:58:08.373
> 
> 标签：jquery, wysihtml5

我正在使用 javascript 向页面动态添加更多 wysihtml5 编辑器。

我遇到的问题是当编辑器添加到页面中时，窗口会滚动到添加的编辑器的顶部。

```
 make_new_editor:function(textarea_id, toolbar_id){
    var editor = new wysihtml5.Editor(textarea_id, {
      toolbar:      toolbar_id,
      stylesheets:  "/assets/app/text.css",
      parserRules:  wysihtml5ParserRules
    });
  } 
```

我只是希望在不影响滚动位置的情况下添加编辑器并且不知道如何添加。

我正在使用 wysihtml5 v0.4.0pre

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T14:30:43.040

我意识到我的浏览器中的网址最后有一个 # 。删除哈希后，它在 chrome 中运行良好，但在 Firefox 中仍然跳了一点。

# r - 打印一列带有行名的数据框

> ID：15877388
> 
> 赞同：34
> 
> 时间：2013-04-08T10:58:33.137
> 
> 标签：r, dataframe

考虑一个具有自定义行名的数据框：

```
> data <- data.frame(a=1:3,b=2:4,c=3:5,row.names=c("x","y","z"))
> data
  a b c
x 1 2 3
y 2 3 4
z 3 4 5 
```

如果我选择**多于一列**，R 将它们与行名一起打印：

```
> data[,c("a","c")]
  a c
x 1 3
y 2 4
z 3 5 
```

但是，如果我**只选择一列**，R 会将其打印为一个简单的向量，而没有行名：

```
> data[,"c"]
[1] 3 4 5 
```

我的问题是，我如何告诉 R 以与打印多列相同的方式打印**一**列，即**使用行名**？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-08T11:03:48.007

您可以使用该`drop`参数（另请参阅`?'['`）：

```
data[,"c", drop=FALSE] 
```

给你一个`data.frame`

```
 c
x 3
y 4
z 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-03-17T18:16:52.670

更简单的方法是`data['c']`，这将产生相同的输出：

```
 c
x 3
y 4
z 5 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-07-25T08:05:41.260

与 data.frames 相比，从 R 中的矩阵获取列似乎保留了它们的（行）名称。我在 R 中发现的（很多！）奇怪的不一致之一......要获得一个命名向量，其中一个似乎有效：

```
as.matrix(data['c'])[,1] 
```

或者

```
array(data['c'], dimnames=list(rownames(data))) 
```

# joomla - 在 joomla 2.5 上安装 virtumart 2.0.20 时遇到困难？

> ID：15877391
> 
> 赞同：0
> 
> 时间：2013-04-08T10:58:35.850
> 
> 标签：joomla, joomla2.5

我从其官方网站 com_virtumart.2.0.20b_extract_first 下载了 virtumart 扩展 2.0.20b，这是一个 3.88 MB 的 Zip 存档。现在的问题是，当我尝试从扩展管理器安装 virtumart 时，它会生成以下错误。所以请帮助我摆脱这种情况。
![在此处输入图像描述](https://i.stack.imgur.com/eMv3U.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:12:19.020

这可能是因为文件大小大于 2MB。

`upload_max_filesize`你应该在你的指令中设置`php.ini`让我们说`"5MB"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:17:24.870

我认为你没有解压`com_virtumart.2.0.20b_extract_first.zip`并尝试直接安装这个文件，所以我想告诉它在手册中明确提到，首先你需要解压`com_virtumart.2.0.20b_extract_first.zip`然后你有两个zip文件，然后你必须上传两个zip通过扩展管理器文件。

此外，如果您直接将其上传到服务器，那么您需要检查站点中的文件夹权限，例如

1.  管理员->组件，
2.  管理员->语言，
3.  组件，
4.  语言
5.  插件，
6.  模块
7.  tmp 和日志

将这些文件夹权限设置`(777)`为片刻，直到您成功安装扩展程序。

还要检查您的服务器设置`upload_max_filesize`, `post_max_size`, `max_execution_time`。希望这会帮助你。

**更新：** 如果您无法更改`php.ini`设置，`file_upload`则可以使用`.htaccess`file 尝试，只需将以下行添加到您的`.htaccess`文件中。

```
php_flag file_uploads 1 
```

**要修复安全路径警告，请参阅此链接：**

[如何修复 VirtueMart 中的安全路径为空错误？](http://www.gavick.com/magazine/how-to-fix-safe-path-is-empty-error-in-virtuemart.html)

# javascript - 在 Google Adwords 脚本中加载外部 JS 文件

> ID：15877394
> 
> 赞同：6
> 
> 时间：2013-04-08T10:58:45.043
> 
> 标签：javascript, google-ads-api

我正在寻找一种将外部 Javascript 库加载到我的 Google Adwords Scripts IDE 的方法。我在文档中找不到任何内容或通过 URLFetchApp API ( [https://developers.google.com/apps-script/reference/url-fetch/](https://developers.google.com/apps-script/reference/url-fetch/) ) 执行 JS。有没有人试过这个或有任何想法？

我知道可以在例如 JQuery 中做到这一点，但从我在源代码中可以看到，他们实现它的方式是添加一个 HTML 脚本标签并让浏览器加载它。由于我不在此环境中的浏览器中，因此这是不可能的。我猜我在某些 V8 引擎环境中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T11:14:14.947

我设法通过以下方式使它工作：

```
function main() {
  var url = "http://example.com/asdf.js";
  eval(UrlFetchApp.fetch(url).getContentText());
} 
```

eval 显然没有被沙箱化！:)

# c++ - JUnit/Jenkins 就像在 cpp/Visual Studio 中一样

> ID：15877398
> 
> 赞同：0
> 
> 时间：2013-04-08T10:58:52.847
> 
> 标签：c++, testing, tdd

假设您在 Visual Studio 中有一个 C++ 项目并且您想做测试驱动开发

java JUnit/Jenkins 的最佳等价物是什么？

目前我想我会使用 Visual Studio 中包含的测试工具并使用 Jenkins 的插件

有没有人有更好的解决方案？

# c - pthread 程序中例程的额外执行时间是什么成本？

> ID：15877403
> 
> 赞同：6
> 
> 时间：2013-04-08T10:59:21.847
> 
> 标签：c, linux, multithreading, pthreads, runtime

我编写了四个不同的程序来计算两个文件中的总字数。这四个版本看起来基本相同。前三个版本使用两个线程进行计数，只是三个语句的顺序不同。最后一个版本使用一个线程来计数。我将首先列出每个版本的不同部分和共同部分，然后是每个版本的输出和我的问题。

不同的部分：

```
// version 1
count_words(&file1); 
pthread_create(&new_thread, NULL, count_words, &file2);
pthread_join(new_thread, NULL);

// version 2
pthread_create(&new_thread, NULL, count_words, &file2);
count_words(&file1);
pthread_join(new_thread, NULL);

// version 3
pthread_create(&new_thread, NULL, count_words, &file2);
pthread_join(new_thread, NULL);
count_words(&file1);

// version 4
count_words(&file1);
count_words(&file2); 
```

公共部分：（**将不同的部分插入到这个公共部分中，形成一个完整的版本**）

```
#include <stdio.h>
#include <pthread.h>
#include <ctype.h>
#include <stdlib.h>
#include <time.h>

#define N 2000

typedef struct file_t {
    char *name;
    int words;
} file_t;

double time_diff(struct timespec *, struct timespec *);
void *count_words(void *);

// Usage: progname file1 file2
int main(int argc, char *argv[]) {
    pthread_t new_thread;
    file_t file1, file2;

    file1.name = argv[1];
    file1.words = 0;
    file2.name= argv[2];
    file2.words = 0;

    // Insert different part here

    printf("Total words: %d\n", file1.words+file2.words);
    return 0;
}

void *count_words(void *arg) {
    FILE *fp;
    file_t *file = (file_t *)arg;
    int i, c, prevc = '\0';
    struct timespec process_beg, process_end;
    struct timespec thread_beg, thread_end;
    double process_diff, thread_diff;

    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &process_beg);
    clock_gettime(CLOCK_THREAD_CPUTIME_ID, &thread_beg);

    fp = fopen(file->name, "r");
    for (i = 0; i < N; i++) {
        while ((c = getc(fp)) != EOF) {
            if (!isalnum(c) && isalnum(prevc))
                file->words++;
            prevc = c;
        }
        fseek(fp, 0, SEEK_SET);
    }
    fclose(fp);

    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &process_end);
    clock_gettime(CLOCK_THREAD_CPUTIME_ID, &thread_end);

    process_diff = time_diff(&process_beg, &process_end);
    thread_diff = time_diff(&thread_beg, &thread_end);
    printf("count_words() in %s takes %.3fs process time and" 
           "%.3fs thread time\n", file->name, process_diff, thread_diff);
    return NULL;
}

double time_diff(struct timespec *beg, struct timespec *end) {
    return ((double)end->tv_sec + (double)end->tv_nsec*1.0e-9)
         - ((double)beg->tv_sec + (double)beg->tv_nsec*1.0e-9);
} 
```

笔记

1.  file1 是一个包含 10000 个单词的“word”文件。file2 是 file1 的副本，由 cp 命令创建。
2.  为了使执行时间足够长，程序会重复计算单词。N 是循环数。所以结果不是总单词的准确数量，而是乘以 N。
3.  请不要过分强调计数算法。我只关心这个例子中的执行时间。
4.  **重要信息**：该机器是 Intel® Celeron(R) CPU 420 @ 1.60GHz。一个核心。操作系统是 Linux 3.2.0。正如其他人所说，也许**一个核心**是导致这种奇怪现象的原因。但我还是想弄清楚。

程序统计字数，使用clock_gettime()计算例程count_words()的进程cpu时间和线程cpu时间，然后输出次数和字数。以下是输出和我对问题的评论。如果有人能解释花费额外时间的原因，我将不胜感激。

```
// version 1
count_words() in file1 takes 2.563s process time and 2.563s thread time
count_words() in file2 takes 8.374s process time and 8.374s thread time
Total words: 40000000 
```

注释：原线程完成 count_words() 并等待新线程死亡。当 count_words() 在新线程中运行时，不会发生上下文切换（因为进程时间 == 线程时间）。**为什么需要这么多时间？新线程中的 count_words() 会发生什么？**

```
// version 2
count_words() in file1 takes 16.755s process time and 8.377s thread time
count_words() in file2 takes 16.753s process time and 8.380s thread time
Total words: 40000000 
```

评论：这里有两个线程并行运行。发生上下文切换，因此进程时间>线程时间。

```
// version 3
count_words() in file2 takes 8.374s process time and 8.374s thread time
count_words() in file1 takes 8.365s process time and 8.365s thread time
Total words: 40000000 
```

注释：新线程首先计数，原始线程等待它。新线程加入后，原线程开始计数。**他们都没有上下文切换，为什么要花这么多时间，尤其是新线程加入后的计数？**

```
// version 4
count_words() in file1 takes 2.555s process time and 2.555s thread time
count_words() in file2 takes 2.556s process time and 2.556s thread time
Total words: 40000000 
```

评论：最快的版本。没有创建新线程。两个 count_words() 都在一个线程中运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T12:06:59.363

这可能是因为创建任何线程都会强制 libc 在`getc`. 这使得这个函数显着变慢。以下示例对我来说与版本 3 一样慢：

```
void *skip(void *p){ return NULL; };
pthread_create(&new_thread, NULL, skip, NULL);
count_words(&file1); 
count_words(&file2); 
```

要解决此问题，您可以使用缓冲区：

```
for (i = 0; i < N; i++) {
    char buffer[BUFSIZ];
    int read;
    do {
        read = fread(buffer, 1, BUFSIZ, fp);
        int j;
        for(j = 0; j < read; j++) {
            if (!isalnum(buffer[j]) && isalnum(prevc))
                file->words++;
            prevc = buffer[j];
        }
    } while(read == BUFSIZ);
    fseek(fp, 0, SEEK_SET);
} 
```

在此解决方案中，很少调用 IO 函数以使同步开销微不足道。这不仅解决了奇怪的计时问题，而且还让它快了好几倍。对我来说，它是从（无线程`0.54s`）或`0.85s`（有线程）减少到`0.15s`（在这两种情况下）。

# asp.net - 如何仅获取浏览器地址栏的内容，而不是完整的 URI

> ID：15877404
> 
> 赞同：0
> 
> 时间：2013-04-08T10:59:24.367
> 
> 标签：asp.net

有谁知道是否有一种干净的方法来获取浏览器地址栏的内容，而不是绝对 URI？

我知道您可以使用它`Request.Url.AbsoluteUri`来获取完整的请求，通常这样就可以了。但是，在这种情况下，我需要知道用户是否已通过站点的基本 DNS 登陆页面。

例如，如果我的站点被调用`http://www.mysite.com`，并且默认页面是 page1.aspx，那么`http://www.mysite.com/page1.aspx`如果用户从`http://www.mysite.com`. 在这种情况下，我想要得到的是：`http://www.mysite.com`. 这可能吗？

这背后的原因是，如果网站是通过基本 URL 访问的，我可以让网站在根页面上嵌入统计 JavaScript 代码，而不是如果该页面包含在地址栏中。这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:03:20.030

您正在查找的术语是**URL 重写**

参考[本](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)教程

# jquery - 完整日历：为事件设置动画

> ID：15877417
> 
> 赞同：0
> 
> 时间：2013-04-08T10:59:56.193
> 
> 标签：jquery, fullcalendar

我想在更改颜色的日历中为事件设置动画。
所以

1.  我从数据库中选择我的日期警报，我比较日期（日期警报，今天）

2.  我改变颜色事件

3.  我动画事件

    ```
    eventRender: function(event, element) { 

    function compareDates() {

    var d = new Date();
    var today = d.format("yyyy-mm-dd HH:MM:ss");
    <?php 
    mysql_connect("","","");
    mysql_select_db("");
           $requete = mysql_query('SELECT * FROM evenement where id_user=1 ') ;
           while ($ligne=mysql_fetch_array($requete))
           {
            $date=$ligne['dateAlert'];
            $id=$ligne['id_event'];

            ?>

    var dateAlert = '<?php echo $date;?>';
    if(dateAlert == today){
    var id='<?php echo $id;?>';

    alert('alert ID rdv:'+id);

    var rdv=$('#calendar').fullCalendar( 'clientEvents');
    for (i=0; i<=rdv.length-1; i++) {

    if(rdv[i].id==id){
    rdv[i].backgroundColor='red';
    rdv[i].borderColor='red';

        $('#calendar').fullCalendar('renderEvent', id );

            }

    }
      //where i put this ligne?

     setInterval(function(){ element.fadeOut(900).delay(300).fadeIn(800);
                            },2000);
    }

     <?php }?>

    }
        myvar=setInterval(function(){compareDates()},1000);

    }, 
    ```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:51:31.370

查看演示希望这符合您的要求。

```
 var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        Date.prototype.formatMMDDYYYY = function(){
            return this.getMonth() + 
            "/" +  this.getDate() +
            "/" +  this.getFullYear();
        }

        var todaysDate = new Date();

        var rdv = $('#calendar').fullCalendar({
                    header: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'month,agendaWeek,agendaDay'
                    },
                    editable: true,
                    events: [
                        {
                              "title":"Hello World",
                              "start":"Wed, 08 Apr 2013 09:00:00 EST",
                              "end":"Wed, 08 Apr 2013 10:00:00 EST"
                        },
                        {
                              "title":"Good Afternoon",
                              "start":"Wed, 03 Apr 2013 13:00:00 EST",
                              "end":"Wed, 03 Apr 2013 17:00:00 EST"
                        },
                    ],
                    eventRender: function(event, element) {
                        var eventDate = new Date(event.start);
                        if(todaysDate.formatMMDDYYYY() === eventDate.formatMMDDYYYY()) {
                            setInterval(function(){
                                element.fadeOut(900).delay(300).fadeIn(800);
                            },2000);
                        }

                    }
                }); 
```

[**演示**](http://jsfiddle.net/maheshsapkal/rCAnK/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:01:44.137

```
setInterval(function(){
    rdv[i].fadeOut(900).delay(300).fadeIn(800);
},2200); 
```

# javascript - 声明前作用域内的函数

> ID：15877422
> 
> 赞同：0
> 
> 时间：2013-04-08T11:00:22.803
> 
> 标签：javascript

我读过一本关于函数声明的书。代码是这样的。

```
function outer(){
    assert(typeof inner === "function", "inner() in scope before declaration");
    function inner(){}
    assert(typeof inner === "function", "inner() in scope after declaration");
    assert(typeof window.inner === "undefined", "inner() undefined in global space")
} 
```

当测试运行时，所有三个语句都被断言为 true，表明 inner() 函数在其声明之前存在于范围内。我关于 javascript 的概念是脚本是逐行执行的，并且应该在调用之前声明函数。

问题是内部函数在声明之前如何存在于作用域中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:03:17.677

> 我关于 javascript 的概念是脚本是逐行执行的，并且应该在调用之前声明函数。

这是不正确的。在 JavaScript 中，执行上下文中的所有函数*声明*都会在进入该执行上下文时进行处理，然后再执行任何分步代码。因此，函数内的函数声明在函数被调用时在进入函数时进行处理，并且在执行任何全局逐步代码之前处理全局范围的函数声明。这有时被称为“提升”（因为函数声明被有效地“提升”[提升]到它们声明的范围的顶部）。（旁注：`var`也被吊起，更多在我的博客上：[*可怜的被误解了`var`*](http://blog.niftysnippets.org/2008/03/poor-misunderstood-var.html)。）

这与函数表达式不同，函数*表达式*与所有表达式一样，在代码的逐步执行中进行评估。

这是一个函数声明：

```
function foo() { } 
```

这里有三个函数表达式，请注意，在每种情况下，它们都用作*右手值*（例如，它们被分配给 var 或属性、传递给函数、在包含表达式中使用等），其中是什么让他们表达而不是声明：

```
var x = function foo() { };
obj = {
   b: function bar() { }
};
doSomethingWith(function() { }); 
```

在那里，我展示了两个*命名*函数表达式和一个*匿名*函数表达式。如果您要为 IE8 及更早版本编写代码，您可能希望避开*命名*函数表达式，因为 IE 的“JScript”解释器会出错；更多（也是我的博客）：[*双重拍摄*](http://blog.niftysnippets.org/2010/09/double-take.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T08:51:26.003

Javascript 在两个 Pass 中执行一个函数，考虑一下：

有两种方法可以使用函数

```
1st: function quack(num){
      for(var i=0; i<num ; i++)
       {
        console.log("quacking")
       }
      } - this is a function declaration.   

2nd:   var fly = function(num){
        for(var i=0; i<num ; i++)
        {
         console.log("Flying!!!")
        }
       } - This is a function expression. 
```

现在在第一遍中，javascript寻找函数声明
，它是

```
 function quack(num){
          for(var i=0; i<num ; i++)
           {
            console.log("quacking")
           }
          } 
```

因此，它将 quack 的引用分配给与该方法同名的变量，即.. quack。因此，如果您在声明它之前调用 quack()，它可以正常工作。

但是，在第二遍中，它会查找函数表达式，这
意味着您不能在评估它之前调用 fly。我希望这能给出更好的解释。

# cakephp - 使用 cakephp 在控制器中再添加一个条件

> ID：15877423
> 
> 赞同：1
> 
> 时间：2013-04-08T11:00:30.157
> 
> 标签：cakephp

我在控制器中创建了以下功能：

```
 function beg($status_id = null) {
    if(!empty($status_id)){
        $conditions = array('winner_id >' => 0, 'Product.beginner' => '1', 'Product.status_id' => $status_id);
    }else{
        $conditions = array('winner_id >' => 0, 'Product.beginner' => '1');
    }
    $this->paginate = array('conditions' => $conditions, 'limit' => $this->appConfigurations['adminPageLimit'], 'order' => array('end_time' => 'asc'), 'contain' => array('Product' => array('Category'), 'Status', 'Winner'));

    $this->set('products', $this->paginate('Product'));
    $this->set('statuses', $this->Product->Status->find('list'));
    $this->set('selected', $status_id);
    $this->set('extraCrumb', array('title' => __('Product List', true), 'url' => 'beg'));

    $this->render('beg');
} 
```

我想在其中再添加一个条件，即：

从Accounts 表中搜索winner_id 与accounts 表中的'user_id' 匹配，并且只在Accounts 表中获胜者ID 的列表中添加产品（accounts 表中的'user_id'）。

任何人都知道如何添加条件`$conditions = array('winner_id >' => 0, 'Product.beginner' => '1', 'Product.status_id' => $status_id);`

我添加了更多条件，如下所示

```
 $acc_id = $this->Account->find('all', array('Account.user_id'));
$conditions += array('Product.winner_id' => $acc_id); 
```

但它不起作用，请任何人告诉我我哪里出错了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:23:25.350

如果您想向 中添加一个条件，则`$conditions`可以尝试使用代码

`$conditions += array('Product.status_id' => $status_id);`

希望它会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:12:26.913

是的，您可以使用如下代码添加它

```
if ($account_user){
      $conditions['accounts.user_id'] = $account_userid;
} 
```

上面的代码将在同一个数组 $conditions 中再添加一个条件。

# ruby-on-rails - Rails STI 设计和解决错误

> ID：15877424
> 
> 赞同：2
> 
> 时间：2013-04-08T11:00:35.063
> 
> 标签：ruby-on-rails, devise, runtime-error, sti, rolify

我正在使用 Devise 和 Rolify 开发 Rails 3.2.13 应用程序，我需要有 3 种用户类型，如下所示：

```
class User < ActiveRecord::Base
  rolify
  ...
end

class UserTypeOne < User
  ....
end

class UserTypeTwo < User
  ....
end

class UserTypeThree < User
  ....
end 
```

当我尝试为我的数据库播种时，用户的创建工作正常，但在尝试向其中任何一个添加角色时会出错：

```
user = UserTypeOne.find_or_create_by_email :name => 'User one', :email => 'userone@test.com', :password => 'userone', :password_confirmation => 'userone'
user.confirm!
user.add_role :admin

rake aborted!
undefined method `find_or_create_by' for nil:NilClass 
```

但是用户插入正确......我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T10:56:00.013

在 ActiveRecord 中使用 STI 时，Rolify 只知道查看当前类而不是父类。

这是问题所在： [https ://github.com/EppO/rolify/issues/138](https://github.com/EppO/rolify/issues/138)

上面的 Ethans 答案应该可以，但这是[Rolify](https://github.com/EppO/rolify/wiki/FAQ#does-rolify-support-sti-) FAQ 中的答案。

就个人而言，我不喜欢这两种解决方案。当类被继承时，也许 Rolify 可以传递适配器。就像是：

```
def self.inherited(klass)
    klass.adapter = self.adapter
    super # EDIT: added super call to prevent ActiveRecord error (NoMethodError: undefined method `synchronize' for nil:NilClass)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T15:41:01.203

尝试添加

```
self.adapter = User.adapter 
```

到每个继承的类。

例子：

```
class UserTypeOne < User
  self.adapter = User.adapter 
  ....
end 
```

这对我有用。

# android - WMS-C 与 osmdroid

> ID：15877436
> 
> 赞同：1
> 
> 时间：2013-04-08T11:01:25.107
> 
> 标签：android, osmdroid, wms

我正在使用 Stephen Potell 提供的代码在 osmdroid 中显示 WMS 磁贴。（[https://groups.google.com/forum/?fromgroups=#!topic/osmdroid/WtRrQCIfYVk](https://groups.google.com/forum/?fromgroups=#!topic/osmdroid/WtRrQCIfYVk)）

起初，瓷砖似乎显示正确。添加我的位置叠加或路径叠加后，图块或叠加显示不正确。假设叠加层是正确的，看起来图块要么是一个缩放级别错误，要么图块显示为“在 y 方向上偏移一个图块”。

当在 OSMDroid 中启用 multitouchControls 并且几乎不放大（只需轻轻一点）并“按住缩放”时，图块和叠加层位于正确的位置。如果放大或缩小一个缩放级别，则叠加层再次定位错误。

我尝试过使用 WMSMapTileSource 中的值，但没有运气。任何帮助，将不胜感激。

奥莱·T。

# vhdl - Verilog 中的 Mealy 和 Moore 实现

> ID：15877439
> 
> 赞同：0
> 
> 时间：2013-04-08T11:01:43.890
> 
> 标签：vhdl, verilog, digital

谁能说出verilog/VHDl中这些实现之间的区别？我的意思是 Mealy 和 Moore 如何详细合成电路？任何链接也将证明是有用的。我对此很熟悉 ![在此处输入图像描述](https://i.stack.imgur.com/wFPwj.png)

谢谢

但这是它实现的方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:25:42.870

合成器将实现与您编写的代码相匹配的逻辑。如果您有未注册的输出（即，未从时钟块写入），那么这就是合成器将为您提供的。

更重要的是——为什么有人在乎？学者们似乎无缘无故地教 Mealy vs Moore。在我从事 2 年专业电子设计的过程中，我从来不必关心我得到的是什么“类型”的状态机。我只是描述行为并让工具产生电路。这些工具也不在乎（检查日志文件，它不会在任何地方说“找到 Mealy 状态机”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:06:37.807

合成器是否将您的代码识别为 FSM 以及它在硬件中实现 FSM 的方式取决于您使用的合成器！检查相应的文档。例如，对于 Xilinx XST，请参阅[XST 用户指南](http://www.xilinx.com/support/documentation/sw_manuals/xilinx14_4/xst_v6s6.pdf)，然后搜索 FSM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T14:57:33.157

我知道这已经 3 周大了，但这里有一个答案[，](http://maia-eda.net/index.php?option=com_content&task=view&id=149&Itemid=331)详细说明了 XST 中各种样式的合成内容。该示例实际上是一个 Moore 机器，但某些样式具有组合输出，这将使您了解 Mealy 机器会发生什么。有一些惊喜——例如，XST 可以将组合输出推回状态寄存器。

# magento - 使用多个 _prepareCollection()

> ID：15877440
> 
> 赞同：0
> 
> 时间：2013-04-08T11:01:43.990
> 
> 标签：magento, collections

得到这个代码（在：app/code/local/Mage/Adminhtml/Block/Sales/Order/Grid.php）：

```
protected function _prepareCollection()
    {
        $collection = Mage::getResourceModel($this->_getCollectionClass());
        $collection->getSelect()->join('sales_flat_order_item', '`sales_flat_order_item`.order_id=`main_table`.entity_id', array('skus'  => new Zend_Db_Expr('group_concat(`sales_flat_order_item`.sku SEPARATOR "<br>")')))->group('sales_flat_order_item.entity_id');
        $collection->getSelect()->join('sales_flat_order_payment', 'main_table.entity_id = sales_flat_order_payment.parent_id',array('method'))->group('sales_flat_order_payment.parent_id');
        $this->setCollection($collection);
        return parent::_prepareCollection();
    } 
```

当我评论 COL 1 或 COL 2 下面的行时，这工作正常，但我希望它们同时工作，*这*是如何完成的？（如果我同时使用它们，我会收到错误消息`Integrity constraint violation: 1052 Column 'entity_id' in group statement is ambiguous`：）

**更新答案：**

```
protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()->join('sales_flat_order_item', '`sales_flat_order_item`.order_id=`main_table`.entity_id', array('skus'  => new Zend_Db_Expr('group_concat(`sales_flat_order_item`.sku SEPARATOR "<br>")')));
    $collection->getSelect()->join('sales_flat_order_payment', 'main_table.entity_id = sales_flat_order_payment.parent_id',array('method'))->group('main_table.entity_id');
    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:32:31.247

答案在错误中，无法确定应用组的表。您需要明确定义表：

```
...->group('sales_flat_order_item.entity_id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:07:32.203

使用 echo (string) $collection->getSelect() 回显您的查询；你会在这里得到一个普通的 sql 查询。在数据库中触发该查询并检查您是否以您想要的方式获得结果。最后但并非最不重要的 Group 也会产生问题。[在 magento 中使用 group() 中断 getSelectCountSql](https://stackoverflow.com/questions/3485455/using-group-breaks-getselectcountsql-in-magento)看看下面的链接

# codeigniter - CodeIgniter 连接邮件服务器失败

> ID：15877443
> 
> 赞同：1
> 
> 时间：2013-04-08T11:01:58.343
> 
> 标签：codeigniter

我正在使用 Wamp 服务器（本地主机）

## 错误信息

**遇到 PHP 错误 严重性：警告消息：mail() [function.mail]：无法在“localhost”端口 25 连接到邮件服务器，请验证 php.ini 中的“SMTP”和“smtp_port”设置或使用 ini_set()文件名：libraries/Email.php 行号：1553**

**控制器**

```
if ($this->form_validation->run() == TRUE)
        {

        //Email Verification  

            $key = md5(uniqid());
            $this->load->library('email',array('mailtype'=>'html'));
            $this->email->from ('info@worldquotes.in','Admin');
            $this->email->to($this->input->post('email'));
            $this->email->Subject('Confirm YOur Account');

            $message = "<p> thank you for Signing Up </p>"; 
            $message .= "<p> <a href= '".base_url()."main/register_user/$key '> Click here </a> to Confirm Your Account  </p>";
            $this->email->message($message);
            if ($this->email->send()) {

            echo "Then Email has been Send";

            }else echo "Could ot send the Email, Contact info@worldquotes.in";

        }
        else
        {
            $this->load->view('signup');
        }

} 
```

**我可以知道为什么出现该错误消息以及如何解决吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:18:32.093

您需要先配置服务器以进行邮件发送。看看这个方便的教程，你应该在路上。

[http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)

If you're having trouble figuring out your ISP's SMTP server, you could take a look in this catalog: [http://www.arclab.com/products/amlc/list-of-smtp-and-pop3-servers-mailserver-list.html](http://www.arclab.com/products/amlc/list-of-smtp-and-pop3-servers-mailserver-list.html)

Hope this helps!

# .htaccess - 使用 .htaccess 阻止对 url 的访问

> ID：15877448
> 
> 赞同：3
> 
> 时间：2013-04-08T11:02:22.957
> 
> 标签：.htaccess

如何阻止用户查看位于主域文件夹中的站点？例如：主域是 www.maindomain.com。当我在 cPanel 中为另一个帐户创建子域时，它会创建文件夹，如果有人键入例如 www.maindomain.com/subdomain，它就可以访问。我想阻止某些文件夹，但保留其他文件夹，因为我在文件夹中有页面：wwwmaindomain/contact-us。我怎样才能做到这一点？希望它足够清楚:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:11:16.580

尝试在您的 .htaccess 中遵循 RewriteRule

```
RewriteEngine On
RewriteRule ^subdomain/(.*) /index.php [R=403,NC,L] 
```

这将使用禁止的响应代码将任何 /subdomain 请求重定向到您的 index.php

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:09:30.767

在文档根目录的 htaccess 文件中添加这些规则（对于**maindomain.com**）：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?maindomain.com$ [NC]
RewriteRule ^(subdomain1|subdomain2|subdomain3) - [L,F] 
```

如果您尝试从 maindomain.com 主机访问`/subdomain1`、`/subdomain2`或，这将返回“403 Forbidden”。`/subdomain3`如果不想返回 403，也可以重定向：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?maindomain.com$ [NC]
RewriteRule ^(subdomain1|subdomain2|subdomain3) / [L,R=301] 
```

这会将对子域的任何访问从 maindomain.com 主机重定向到文档根目录。

* * *

添加到**子域文件夹**中的 htaccess 文件顶部的规则：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?maindomain.com$ [NC]
RewriteRule ^ - [L,F] 
```

或者

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?maindomain.com$ [NC]
RewriteRule ^ / [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:19:44.990

非常有效的方法是在您不想显示的文件夹中放置一个空白 index.php 文件，这样就不需要弄乱 htaccess，或者您可以使用此代码创建一个新的 .htaccess

```
deny from all 
```

将此保存为您不想显示给公共的特定文件夹的 .htaccess，但是我更喜欢第一个选项。

# android - 相机参数的 NullPointerException 错误

> ID：15877450
> 
> 赞同：1
> 
> 时间：2013-04-08T11:02:25.907
> 
> 标签：android, nullpointerexception, android-camera

我有以下代码：

```
Line Code
 193 private Camera mCamera;
 <!-- NO CALLS TO mCamera HERE -->
 229 mCamera = Camera.open();
 230 Camera.Parameters p = mCamera.getParameters(); 
```

当我运行应用程序时，我得到以下堆栈跟踪：

```
04-08 20:56:45.330: E/AndroidRuntime(570): FATAL EXCEPTION: main
04-08 20:56:45.330: E/AndroidRuntime(570): java.lang.NullPointerException
04-08 20:56:45.330: E/AndroidRuntime(570):  at com.soloman.cbc.FullscreenActivity$MySurfaceView.surfaceCreated(FullscreenActivity.java:230)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.SurfaceView.updateWindow(SurfaceView.java:569)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.SurfaceView.access$000(SurfaceView.java:86)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:174)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:680)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1842)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.Choreographer.doFrame(Choreographer.java:532)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.os.Handler.handleCallback(Handler.java:725)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.os.Looper.loop(Looper.java:137)
04-08 20:56:45.330: E/AndroidRuntime(570):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-08 20:56:45.330: E/AndroidRuntime(570):  at java.lang.reflect.Method.invokeNative(Native Method)
04-08 20:56:45.330: E/AndroidRuntime(570):  at java.lang.reflect.Method.invoke(Method.java:511)
04-08 20:56:45.330: E/AndroidRuntime(570):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-08 20:56:45.330: E/AndroidRuntime(570):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-08 20:56:45.330: E/AndroidRuntime(570):  at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用的代码来自[如何操作相机预览？](https://stackoverflow.com/questions/6478375/how-can-i-manipulate-the-camera-preview)

我有在`CAMERA permission`中的`AndroidManifest.xml`，所有`imports`的都占了。有人对如何解决此错误有任何建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:21:00.080

在没有后置摄像头的设备上`Camera.open()`返回`null`。尝试`Camera.open(0)`获得前置摄像头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:07:20.730

如果 android 版本早于 3.0，请使用

`getHolder().setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);`

# cassandra - Cassandra 长期运行时遇到 OutOfMemory 问题（Java 堆空间）

> ID：15877451
> 
> 赞同：2
> 
> 时间：2013-04-08T11:02:26.260
> 
> 标签：cassandra, datastax-enterprise

我们正在通过尝试一些长时间运行的测试用例（压力测试）对 Cassandra 进行一些试验，并且我们在任何给定时间都在集群的一个节点上遇到了一些内存问题（它可能是集群上的任何机器！）

我们在装有 Windows Server 2008 和 8 GB RAM 的机器上运行带有 Cassandra 1.1.6 的 DataStax Community。此外，我们将堆大小配置为 2GB，而不是默认值 1GB。

日志中的一个片段：

java.lang.OutOfMemoryError：Java 堆空间

将堆转储到 java_pid2440.hprof ...

已创建堆转储文件 [11.713 秒内 1117876234 个字节]

错误 22:16:56,756 线程 Thread[CompactionExecutor:399,1,main] 中的异常

java.lang.OutOfMemoryError：Java 堆空间

在 org.apache.cassandra.io.util.FastByteArrayOutputStream.expand(FastByteArrayOutputStream.java:104)

在 org.apache.cassandra.io.util.FastByteArrayOutputStream.write(FastByteArrayOutputStream.java:220)

在 java.io.DataOutputStream.write（未知来源）

任何指示/帮助来调查和解决这个问题。？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:50:14.003

通过长时间运行负载测试，您正在做正确的事情，但在生产用例中，您不会像这样编写数据。

当需要压缩它们时，您的行可能会变得太大而无法放入 RAM。压缩需要整行才能放入 RAM。

每行也有 20 亿列的硬性限制，但实际上你不应该让行增长那么宽。通过将数据集中的日期或服务器名称或其他一些常见的值添加到行键来存储它们。

对于“经常写入几乎从不读取”的工作负载，您可以拥有非常宽的行，但您不应接近 20 亿列标记。通过分桶保持数百万。

对于频繁读取整行的写入/读取混合工作负载，即使数百列也可能太多。

如果您正确对待 Cassandra，您将轻松处理每个节点每秒数以千计的读写操作。我看到我的主集群上每个节点同时进行大约 2.5k 读取和写入。

# c# - 松耦合视图模型理论

> ID：15877455
> 
> 赞同：0
> 
> 时间：2013-04-08T11:02:37.953
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

谁能解释一下创建松散耦合视图模型的理论。

我在下面附上了一些示例代码来尝试解释我的意思。

我有 2 个示例类仅用于此示例

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Web.UI.Models
{
    public class EmployerAddress
    {
        public string address { get; set; }
        public string city { get; set; }
        public string region { get; set; }
        public string country { get; set; }
        public string postZipCode { get; set; }
    }

    public class EmployerDetails
    {
        public string position { get; set; }
        public string gender { get; set; }
        public string dob { get; set; }
    }

    public class DisplayEmployerAddress : IDisplayEmployerAddress
    {
        public IEnumerable<EmployerAddress> employerAddr()
        {
            List<EmployerAddress> Data = new List<EmployerAddress>();
            Data.Add(new EmployerAddress
            {
                address = "address1",
                city = "city1",
                region = "region1",
                country = "country1",
                postZipCode = "post zip1"
            });
            return Data;
        }
    }

    public class DisplayEmployerDetails : IDisplayEmployerDetails
    {
        public IEnumerable<EmployerDetails> employerDetails()
        {
            List<EmployerDetails> Data = new List<EmployerDetails>();
            Data.Add(new EmployerDetails
            {
                position = "trainee",
                gender = "male",
                dob = "22-08-1964"
            });
            Data.Add(new EmployerDetails
            {
                position = "trainee2",
                gender = "male2",
                dob = "22-08-1970"
            });
            return Data;
        }
    }
} 
```

上面的代码有接口：

```
IEnumerable<EmployerAddress> employerAddr();
IEnumerable<EmployerDetails> employerDetails(); 
```

然后我使用 Ninject 来绑定上面的内容。

```
kernel.Bind<IDisplayEmployerAddress>().To<DisplayEmployerAddress>().InSingletonScope();
kernel.Bind<IDisplayEmployerDetails>().To<DisplayEmployerDetails>().InSingletonScope(); 
```

此时一切正常，我可以更改 DisplayEmployerAddress 等，只要所有方法等都匹配，代码仍然可以工作。

然后我创建一个视图模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Web.UI.Models
{
    public class EmployerDetailsViewModel
    {
        public string age { get; set; }
        public IEnumerable<EmployerAddress> EmployerAddress { get; set; }
        public IEnumerable<EmployerDetails> EmployerDetails { get; set; }
    }
} 
```

但是现在这会导致一个问题，因为 EmployerAddress 现在是紧密耦合的，所以如果我更改代码，现在必须在 2 个地方更新它。

在我的控制器中，我有

```
public class HomeController : Controller
    {
        private readonly IDisplayEmployerAddress _address;
        private readonly IDisplayEmployerDetails _details;

        public HomeController(IDisplayEmployerAddress address,
                              IDisplayEmployerDetails details)
        {
            _address = address;
            _details = details;
        }
        public ActionResult Index()
        {
            ViewBag.Title = "Title";
            var Address = _address.employerAddr();
            var Details = _details.employerDetails().AsEnumerable();
            var Age = _details.employerDetails().FirstOrDefault().dob;
            var employerModel = new EmployerDetailsViewModel
            {
                EmployerAddress = Address,
                EmployerDetails = Details,
                age = age.calAge(Age)
            };
            return View(employerModel);
        } 
```

我使控制器保持轻量级，因为我读过的所有书籍都说在控制器中保留尽可能少的代码，因此为了计算年龄，我使用了一个静态类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Web.UI.Models
{
    public static class age
    {
        public static string calAge(string dob)
        {
            //Would cal age here
            return "48";

        }
    }
} 
```

所以我的问题是三个部分。

1.  这个例子是正确的方法吗？
2.  由于我的视图模型现在紧密耦合，我如何使其松散耦合。
3.  如果我不想使用 foreach 循环，我如何才能从说 EmployerDetails 中获取每个项目

    该雇主担任@Model.EmployerDetails.position 职位，性别为@Model.EmployerDetails.gender

    ```
    <ul>
    @foreach (var d in Model.EmployerAddress)
    {
       <li>@d.address</li>
        <li>@d.city</li>
        <li>@d.country</li>
        <li>@d.region</li>
        <li>@d.postZipCode</li> 
    }
        </ul>

    <ul>
    @foreach (var dd in Model.EmployerDetails)
    {
       <li>@dd.position</li>
        <li>@dd.gender</li>
        <li>@dd.dob</li>
    }
        </ul> 
    ```

至今

该雇主担任@Model.EmployerDetails.position 职位，性别为@Model.EmployerDetails.gender

解决了问题 3，将代码更改为**@Model.EmployerDetails.FirstOrDefault().position**

希望上面的例子对我想要学习的东西有意义

谢谢

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:19:56.920

```
public class Employer
{
    public int Id { get; set; }
}

public class EmployerAddress
{
    public string Address { get; set; }
    public string City { get; set; }
    public string Region { get; set; }
    public string Country { get; set; }
    public string PostZipCode { get; set; }

    public int EmployerId { get; set; }
}

public class EmployerDetails
{
    public string Position { get; set; }
    public string Gender { get; set; }
    public string Dob { get; set; }

    public int EmployerId { get; set; }
}

public class MyRepository : IMyRepository
{
    public IEnumerable<Employer> GetEmployers()
    {
        return new List<Employer>
            {
                new Employer {Id = 1},
                new Employer {Id = 2}
            };
    }

    public IEnumerable<EmployerAddress> GetEmployeeAddresses()
    {
        return new List<EmployerAddress>
            {
                new EmployerAddress
                    {
                        EmployerId = 1,
                        Address = "address1",
                        City = "city1",
                        Region = "region1",
                        Country = "country1",
                        PostZipCode = "post zip1"
                    },
                new EmployerAddress
                    {
                        EmployerId = 2,
                        Address = "address2",
                        City = "city2",
                        Region = "region2",
                        Country = "country2",
                        PostZipCode = "post zip2"
                    }
            };
    }

    public IEnumerable<EmployerDetails> GetEmployeeDetails()
    {
        return new List<EmployerDetails>
            {
                new EmployerDetails
                    {
                        EmployerId = 1,
                        Position = "trainee",
                        Gender = "male",
                        Dob = "22-08-1964"
                    },
                new EmployerDetails
                    {
                        EmployerId = 2,
                        Position = "trainee2",
                        Gender = "male2",
                        Dob = "22-08-1970"
                    }
            };
    }
}

public class EmployerChangedEvent
{
    public EmployerChangedEvent(Employer selectedEmployer)
    {
        Employer = selectedEmployer;
    }

    public Employer Employer { get; set; }
}

public class EmployerViewModel
{
    private readonly IEventAggregator _events;
    private Employer _selectedEmployer;

    // Configure Ninject properly to get those types
    public EmployerViewModel(IEventAggregator events, IMyRepository myRepository)
    {
        _events = events;
        Employers = myRepository.GetEmployers().ToList();
        EmployerAddressViewModel = new EmployerAddressViewModel(_events, myRepository);
        EmployerDetailsViewModel = new EmployerDetailsViewModel(_events, myRepository);
    }

    public List<Employer> Employers { get; set; }

    public EmployerAddressViewModel EmployerAddressViewModel { get; set; }
    public EmployerDetailsViewModel EmployerDetailsViewModel { get; set; }

    public Employer SelectedEmployer
    {
        get { return _selectedEmployer; }
        set
        {
            _selectedEmployer = value;
            // this notifies the dependent view models in a loosley coupled way
            _events.Publish(new EmployerChangedEvent(_selectedEmployer));
        }
    }
}

public class EmployerAddressViewModel :
    IHandle<EmployerChangedEvent> // specifies which events shall be caught
{
    private readonly IMyRepository _myRepository;
    private Employer _selectedEmployer;

    public EmployerAddressViewModel(IEventAggregator events, IMyRepository myRepository)
    {
        _myRepository = myRepository;
        // this subscribes this view model to the passed event aggregator
        // from your main view model (EmployerViewModel)
        events.Subscribe(this);
    }

    public EmployerAddress EmployerAddress { get; set; }

    public void Handle(EmployerChangedEvent message)
    {
        _selectedEmployer = message.Employer;
        EmployerAddress = _myRepository.GetEmployeeAddresses()
                                       .FirstOrDefault(e => e.EmployerId == _selectedEmployer.Id);
    }
}

public class EmployerDetailsViewModel :
    IHandle<EmployerChangedEvent> // specifies which events shall be caught
{
    private readonly IMyRepository _myRepository;
    private Employer _selectedEmployer;

    public EmployerDetailsViewModel(IEventAggregator events, IMyRepository myRepository)
    {
        _myRepository = myRepository;
        // this subscribes this view model to the passed event aggregator
        // from your main view model (EmployerViewModel)
        events.Subscribe(this);
    }

    public EmployerDetails EmployerDetails { get; set; }

    public void Handle(EmployerChangedEvent message)
    {
        _selectedEmployer = message.Employer;
        EmployerDetails = _myRepository.GetEmployeeDetails()
                                       .FirstOrDefault(e => e.EmployerId == _selectedEmployer.Id);
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        // do this with Ninject
        var employerViewModel = new EmployerViewModel(new EventAggregator(), new MyRepository());

        // this selection should actually be user input
        employerViewModel.SelectedEmployer = employerViewModel.Employers.First();

        // select another one
        employerViewModel.SelectedEmployer = employerViewModel.Employers.Last();
    }
} 
```

由于我不熟悉 ASP.NET，我的回答并不意味着任何 UI 通知。

我在这里推荐 Caliburn.Micro 的[事件聚合器](http://caliburn.codeplex.com/wikipage?title=The%20Event%20Aggregator)类，因为它很好地解决了你的耦合问题。这个库对于学习 MVVM 模式来说还是值得一看的。

The `IEventAggregator` allows you to subscribe with instance of a class to an instance of the aggregator. If multiple view models share an instance of the event aggregator you can easily send events from one to another in a loosley coupled way.

I refactored your original code, to make it more fitting for the actual MVVM pattern (*your first question*, let's say this implementaion is more proper). I've added an `Employer` class, which is basically the main object. It only has an id. The `EmployerDetails` and `EmployerAddress` also have a new property `EmployerId` which is a reference to the `Employer` they belong to.

I have put all the stuff to query data in the `MyRepository` class!

For each of those three classes exist three **seperate** view models and they're only coupled through the event aggregator they share (*answers your 2nd question*). The `EmployerViewModel` manages the main data objects of type `Employer` and publishes an event as soon as the selected `Employer` changes. The new value is passed into the `EmployerChangedEvent` which then is caught by the view models which handle this certain kind of event (`IHandle<EmployerChangedEvent`). In their `Handle()` implementation the passed employer is put into a private field of the receiving view model.

This is just a console application which simulates user input, though try with putting break points on both of the handle methods, as the `SelectedEmployer` changes.

I think some kind of stuff I do in my `Main()` method should be done in your controllers. I have to mention that this code is just for showing the benefits of the MVVM pattern, it might be over abstracted in some cases. Also things like querying the repository efficiently are not covered at all!

I think my answer also solves your 3rd question, as I see no `foreach` is anymore needed.

Remember to reference `Caliburn.Micro` if you'd like to run this code. Just get it through NuGet or download it [here](http://caliburn.codeplex.com/).

# android - 如何在 Android 中添加或忽略 Admob 广告的 AdActivity？

> ID：15877461
> 
> 赞同：0
> 
> 时间：2013-04-08T11:02:57.983
> 
> 标签：android, android-activity

我有添加或忽略广告的`AdActivity`要求`Admob`。我正在使用 a`TabActivity`并且在选项卡内导航的活动保存在`ArrayList`. 当我导航到选项卡中的第三个活动然后返回时集成广告后，而不是返回上一个活动（在集成广告之前发生），我将退出应用程序。在将活动添加到时，`ArrayList`我将意图标志设置为`FLAG_ACTIVITY_CLEAR_TOP`. 您能否告诉我如何克服在第 3 次后按时退出应用程序`activity`而能够进入第 2 次`activity`然后进入第 1 次`activity`？

谢谢你。

编辑：

```
04-10 13:19:32.519: E/AndroidRuntime(1392): FATAL EXCEPTION: main
04-10 13:19:32.519: E/AndroidRuntime(1392): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.admob/com.example.admob.activity.MainTabActivity}: java.lang.NullPointerException
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.os.Looper.loop(Looper.java:137)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at java.lang.reflect.Method.invoke(Method.java:511)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at dalvik.system.NativeStart.main(Native Method)
04-10 13:19:32.519: E/AndroidRuntime(1392): Caused by: java.lang.NullPointerException
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at com.google.ads.AdView.<init>(SourceFile:87)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at com.google.ads.doubleclick.DfpAdView.<init>(SourceFile:27)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at com.example.admob.activity.MainTabActivity.onCreate(MainTabActivity.java:80)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.Activity.performCreate(Activity.java:4465)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-10 13:19:32.519: E/AndroidRuntime(1392):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-10 13:19:32.519: E/AndroidRuntime(1392):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:42:23.407

我终于找到了解决方案！问题在于布局。我相应地改变了它并且它起作用了。以下是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dip" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <com.google.ads.doubleclick.DfpAdView
            android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="50dip"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            ads:adSize="BANNER"
            ads:adUnitId="AD_UNIT_ID"
            ads:loadAdOnCreate="true"
            android:focusable="false" />
    </RelativeLayout>
</FrameLayout> 
```

# fossil - 从 ignore-glob 中排除某些目录

> ID：15877462
> 
> 赞同：2
> 
> 时间：2013-04-08T11:02:57.970
> 
> 标签：fossil

有没有办法从 ignore-glob 中排除某些目录，这样（例如）.dll 文件通常会被忽略，除非它们位于某些特定目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:36:57.443

恐怕您必须指定您不想在其中看到文件的所有目录*，*并`.dll`确保包含*所需*DLL 的目录与任何现有的 ignore-glob 条目都不匹配...

请问，你的用例是什么？

# html - 在网页中循环播放背景 MIDI 文件

> ID：15877467
> 
> 赞同：1
> 
> 时间：2013-04-08T11:03:34.207
> 
> 标签：html, object, audio, embed, midi

我从没想过，我不得不问这个问题：

是否有无需插件即可在网站中播放背景 MIDI 文件的跨浏览器方式？

（现在，**请**不要回答“不要这样做！这太烦人了！”。这是针对儿童页面的，他们喜欢这些东西......我会选择打开或关闭它。 ..)

我发现了几种方法，每种方法都有自己的问题：

*   `<bgsound ...>`-tag：仅限 IE；必须小心不要与 IE 也可能解释的其他标签一起使用
*   `<embed ...>`-tag：在 Chrome 中不起作用。Firefox 需要一个插件，它甚至无法自动安装...
*   `<object ...>`-tag：Chrome 和 Firefox 需要插件。两者都建议使用 QuickTime，但都没有正确安装它......
*   `<audio ...>`-tag：需要 HTML 5；也不确定它是否支持跨浏览器的 MIDI ......
*   使用 Java 小程序：并非随处可用，而且似乎有点矫枉过正

有什么方法可以跨浏览器（最低：当前的 Firefox、Chrome、Safari、Opera、IE6+、Android、iOS）**而不**需要任何插件？可能是上面列出的所有标签的巧妙组合？

我真的很惊讶这似乎如此困难。MIDI 被弃用了吗？还是一般网站中的背景音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:05:32.517

您可能想要追求的一种选择是[SoundManager2](http://www.schillmania.com/projects/soundmanager2/)。基于 JavaScript 的音频项目。我在我的许多网络项目中使用它，到目前为止它看起来不错。需要一点学习曲线，但是 API 非常丰富和清晰，以及如何在各种情况下安装和使用它。

[http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

通过在您的网站中为音频构建一个 JavaScript 包，您不必担心前端用户可能需要为他们的机器安装的其他插件。它适用于新旧浏览器、MIDI 文件、MP3 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:08:33.050

为什么不是 HTML 5 音频。毕竟所有最新的浏览器都支持它。（Firefox/Opera 可能对 H.264 文件有问题）。如果是移动浏览器，它应该是更好的选择。

# delphi - ReWrite失败后如何恢复？

> ID：15877470
> 
> 赞同：1
> 
> 时间：2013-04-08T11:03:43.263
> 
> 标签：delphi, delphi-xe2

我想以随机访问的方式打开一个键入的文件。这是通过设置`FileMode`in来完成的`fmOpenReadWrite`。这要求文件存在，我测试文件是否存在，如果不存在，`ReWrite`则关闭它。请参阅下面的代码。

```
 var fl: file of _some_record_type_;
      fn: string;

  AssignFile (fl, fn);
  if not FileExists (fn) then
  begin
     ReWrite (fl);
     CloseFile (fl); // Now an empty file exists
  end; // if

  FileMode := fmOpenReadWrite;
  Reset (FTrack_File);
  // ...further rad and write operations... 
```

这很好用，除非`fn`是非法文件名，例如在指定不存在的驱动器时。它在`ReWrite`. 我无法通过包围`ReWrite`by从错误中恢复，`try..except`因为对该文件或*任何其他文件*的任何引用都会引发访问冲突异常。似乎已经设置了一些条件来阻止任何文件 i/o。

有人知道如何处理这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:58:33.163

您可以切换到使用异常（使用`{$I+}`），然后使用`try..except`. （它通常是默认设置，除非您`I/O Checking`在“项目选项”对话框（`Project->Options->Delphi Compiler->Compiling->Runtime Errors->I/O checking`从主菜单中）中取消选中。

如果未选中该框，它会设置选项`{$I-}`，它使用[`IOResult`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.IOResult)。

如果您想继续使用`IOResult`，您需要在使用文件功能后进行检查。检查它会自动将 InOutRes 变量重置为`0`，清除先前的错误值。

```
AssignFile (fl, fn);
if not FileExists (fn) then
begin
  ReWrite (fl);
  if IOResult <> 0 then
    // You've had an error.
  CloseFile (fl); // Now an empty file exists
end; // if 
```

`IOResult`可以在`System`单位找到。

You really should be moving away from the old style IO routines, BTW. They're ancient, and don't properly work with Unicode data. You can accomplish the same thing using a `TFileStream`, which would give you proper exception handling and support for Unicode. Here's a quick console app sample (tested with XP3 on Win 7):

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, Classes, Windows;

type
  TMyRec = record
    anInt: Integer;
    aBool: Boolean;
    aByte: Byte;
  end;

var
  FS: TFileStream;
  MyRec: TMyRec;
const
  TheFile = 'C:\TempFiles\test.dat';

begin
  MyRec.anInt := 12345;
  MyRec.aBool := True;
  MyRec.aByte := 128;
  FS := TFileStream.Create(TheFile, fmCreate or fmOpenReadWrite);
  try
    FS.Write(MyRec, SizeOf(TMyRec));
    // Clear the content and confirm it's been cleared
    FillChar(MyRec, SizeOf(TMyRec), 0);
    WriteLn('anInt: ', MyRec.anInt, ' aBool: ', MyRec.aBool, ' aByte: ', MyRec.aByte);

    FS.Position := 0;
    FS.Read(MyRec, SizeOf(TMyRec));
  finally
    FS.Free;
  end;
  // Confirm it's read back in properly
  WriteLn('anInt: ', MyRec.anInt, ' aBool: ', MyRec.aBool, ' aByte: ', MyRec.aByte);
  ReadLn;
end. 
```

# variables - IntelliJ 更新路径变量

> ID：15877474
> 
> 赞同：3
> 
> 时间：2013-04-08T11:03:50.947
> 
> 标签：variables, path, intellij-idea, dependencies

这是我第一次给 IntelliJ 一个机会，老实说，进展并不顺利……

我已经导入了我的 Eclipse 子项目。它们使用外部 .jar 依赖项，并使用变量指定，即：$EXTERNAL_LIBS/derby.jar

当我导入我的项目时，IntelliJ 识别出该变量并要求我给它一个值，但我错误地指向了错误的路径。现在我在子项目属性上看到所有模块依赖项都指向错误的路径。

我转到文件 - 设置并将我的 EXTERNAL_LIBS 的值更改为正确的路径，但所有当前依赖项似乎都没有反映更改。他们仍然指向第一条错误的道路。

我要一个一个去吗？我不明白 IntelliJ 如何管理路径变量...当我尝试添加一个新的模块依赖项时，它会强制我从硬盘驱动器中选择它，并且不会更改使用这些变量中的任何一个...。文档也很差....

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T11:30:29.077

路径变量可以在`File`| `Settings`| `Path Variables`.

IDE 在项目加载和项目保存时透明地处理它们。

当项目加载并包含路径变量时，IDE 将用设置中定义的实际路径替换它们。如果还没有定义路径变量，IDE 会要求您定义它。

当项目文件保存在磁盘上时，IDE 将透明地、静默地用变量名替换与定义的变量匹配的所有路径。

它完全自动工作，用户无需在任何 IDE 设置中显式定义变量，只需使用库中的实际路径，它们将在项目保存时替换为相应的变量，以便您的项目文件可移植，其他用户可以首次打开此项目时为路径变量定义不同的值。

# c# - 如何在gridview中使用复选框？

> ID：15877479
> 
> 赞同：1
> 
> 时间：2013-04-08T11:03:57.833
> 
> 标签：c#, asp.net

我有一个 asp.net 表单，使用网格视图显示来自 Oracle 数据库的用户详细信息。我什至设法使用以下模板在网格视图中获得了一个复选框字段。

```
 <asp:TemplateField>
    <ItemTemplate>
      <asp:CheckBox runat="server" ID="chck"/>
    </ItemTemplate>
    </asp:TemplateField> 
```

我希望管理员能够使用复选框选择多个条目并对它们执行特定操作。对于删除操作，我尝试使用以下内容

```
for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            if (Convert.ToBoolean(GridView1.Rows[i].Cells[1].Value == true))
                GridView1.Rows.RemoveAt[i];
        } 
```

但是，这显示了一个错误。显然，每一行上的每个复选框都必须有自己的唯一索引。我怎么去呢？任何形式的帮助将不胜感激。谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:21:01.343

这是 Aspx 文件：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
    BackColor="White" BorderColor="#336699" BorderStyle="Solid" BorderWidth="1px"  
    CellPadding="0" CellSpacing="0" DataKeyNames="CategoryID" Font-Size="10"
    Font-Names="Arial" GridLines="Vertical" Width="40%">

            <Columns>            
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:CheckBox ID="chkStatus" runat="server"
                            AutoPostBack="true" OnCheckedChanged="chkStatus_OnCheckedChanged"
                            Checked='<%# Convert.ToBoolean(Eval("Approved")) %>'
                            Text='<%# Eval("Approved").ToString().Equals("True") ? " Approved " : " Not Approved " %>' />
                    </ItemTemplate>                   
                </asp:TemplateField>

                <asp:BoundField DataField="CategoryID" HeaderText="CategoryID" />                   
                <asp:BoundField DataField="CategoryName" HeaderText="CategoryName"  />
            </Columns>

    <HeaderStyle BackColor="#336699" ForeColor="White" Height="20" />

</asp:GridView> 
```

这是 CS 文件：

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
  {
    LoadData();
  }
}

private void LoadData()
{
  string constr = @"Server=.\SQLEXPRESS;Database=TestDB;uid=waqas;pwd=sql;";
  string query = @"SELECT CategoryID, CategoryName, Approved FROM Categories";

  SqlDataAdapter da = new SqlDataAdapter(query, constr);
  DataTable table = new DataTable();
  da.Fill(table);

  GridView1.DataSource = table;
  GridView1.DataBind();
}

public void chkStatus_OnCheckedChanged(object sender, EventArgs e)
{
    CheckBox chkStatus = (CheckBox)sender;
    GridViewRow row = (GridViewRow)chkStatus.NamingContainer;

    string cid = row.Cells[1].Text;
    bool status = chkStatus.Checked;

    string constr = @"Server=.\SQLEXPRESS;Database=TestDB;uid=waqas;pwd=sql;";
    string query = "UPDATE Categories SET Approved = @Approved WHERE CategoryID = @CategoryID";

    SqlConnection con = new SqlConnection(constr);
    SqlCommand com = new SqlCommand(query, con);

    com.Parameters.Add("@Approved", SqlDbType.Bit).Value = status;
    com.Parameters.Add("@CategoryID", SqlDbType.Int).Value = cid;

    con.Open();
    com.ExecuteNonQuery();
    con.Close();

    LoadData();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:07:46.847

您需要使用 findControl 在 gridview 行中找到控件

```
for (int i = 0; i < GridView1.Rows.Count; i++)
{
     CheckBox cb1 = (CheckBox)GridView1.Rows[i].FindControls("chck");
        if(cb1.Checked)
            GridView1.Rows.RemoveAt[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:10:30.390

使用查找控件获取复选框：

```
for (int i = 0; i < GridView1.Rows.Count; i++)
   {

        CheckBox chck = (CheckBox)GridView1.Rows[i].FindControl("chck");

       if (chck  != null)
       {
         if (chck.Checked)
         {
            GridView1.Rows.RemoveAt[i];
         }
       }
  } 
```

# bash - 从另一个目录获取 bash 文件并返回到当前目录的别名

> ID：15877485
> 
> 赞同：3
> 
> 时间：2013-04-08T11:04:20.133
> 
> 标签：bash, firefox-addon-sdk

我正在尝试`source`Firefox[插件 sdk](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/installation.html)。为此，我必须`cd`进入 sdk 的目录，然后运行`source bin/activate`​​. 如果我不`cd`进入该目录，而是直接从我当前所在的任何路径获取，则会发生以下情况：

```
$ source ~/src/devtools/addon-sdk/bin/activate
欢迎使用附加 SDK。运行“cfx docs”以获得帮助。
$cfx
-bash：cfx：找不到命令

```

我想为此设置一个别名，将其 cd 放入 sdk，获取它，然后返回到我的当前目录：

`alias acfx='cd ~/src/devtools/addon-sdk && source bin/activate && cd "$(dirname "$0")"'`

这正确地获取了 sdk，但可惜不会返回到我调用别名的目录：

```
$acfx
欢迎使用附加 SDK。运行“cfx docs”以获得帮助。
dirname: 非法选项 -- b
用法：目录名路径

```

我在这里迷路了，如何回到原来的目录？或者指定一个“工作目录” `source`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T11:09:17.953

您可以像这样在子 shell 中执行 cd 和后续命令：

```
(cd ~/src/devtools/addon-sdk && source bin/activate) 
```

如果由于某种原因您不想创建子外壳，请使用`cd -`将目录更改为上一个目录：

```
cd ~/src/devtools/addon-sdk && source bin/activate && cd - 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:06:55.903

您可以使用`pushd`和`popd`shell 内置函数：

```
alias acfx='pushd ~/src/devtools/addon-sdk && source bin/activate && popd' 
```

该`$(dirname "$0")`技巧仅在从脚本调用时才有效；在提示符下，`$0`will be `bash`，因此您将尝试返回`.`（因为`dirname bash`prints `.`）。在你的情况下，我猜`$0`是不同的东西；也许`-bash`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:10:42.837

您可以保存以前的路径，然后转到它：

```
prev_dir=$(pwd); ... your commands ... ; cd $prev_dir 
```

在你的情况下：

```
alias acfx='prev_dir=$(pwd); cd ~/src/devtools/addon-sdk; source bin/activate; cd $prev_dir' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:25:33.900

I am not curious if this solves your original problem. can you try cd to that dir, source , cd to some other temp dir, and then try cfx ? i mean sourcing should not be different whether done from the current dir, or some specific dir. If the script assumes the user to be present in the current dir, then it's wrong. May be in that case adding `export PATH=~/src/devtools/addon-sdk:$PATH` in script might help

# java - 不能将 A[T] 隐式转换为 AT，其中 A[T] 扩展 AT

> ID：15877486
> 
> 赞同：6
> 
> 时间：2013-04-08T11:04:24.513
> 
> 标签：java, scala, generics

该问题与 Java 和 Scala 之间的集成有关。我已经简化了一点，以使事情更清楚。

我有两个用 Java 编写的类：

```
class A<T>{}

class AT extends A<Boolean> {} 
```

在 Java 中，我有一个以下列方式使用类的方法：

```
public  A<Boolean> a(){
    return new AT();
} 
```

我想在scala中做同样的事情。但是下面的代码无法编译。

```
def a(): A[Boolean] = {
    return new AT();
} 
```

消息说：“类型不匹配；发现：org.rarry.sample.AT 需要：org.rarry.sample.A[Boolean]”

任何人都可以解释为什么会这样，以及如何去做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:49:25.750

要了解您的代码无法编译的原因，请首先注意 Java 使用`java.lang.Boolean`盒装布尔类型，而 Scala 使用`scala.Boolean`. 大多数情况下，当您想使用其中一个，而一个方法返回另一个（或方法参数需要另一个）时，将执行隐式转换，并使用正确的类型。

您在 Scala 中编写的方法`a`确实返回`A[java.lang.Boolean]`. `A[java.lang.Boolean]`因为and之间没有隐式转换，所以在这种情况下`A[scala.Boolean]`它不会自动返回。`A[scala.Boolean]`

为了验证情况是否如此，我们可以看到这个方法编译没有问题：

```
def a: A[java.lang.Boolean] = new AT() 
```

重申这一点，因为我们没有隐式转换，所以这也不起作用（您将在下面看到如何修复）：

```
val instanceOfA: A[Boolean] = a
def a = new AT()
// Error: AT doesn't conform to A[Boolean] 
```

To fix it, you could implicitly convert to the needed type by casting it:

```
implicit def toScalaABoolean(a: A[java.lang.Boolean]): A[Boolean] =
        a.asInstanceOf[A[Boolean]] 
```

With that done, you don't even have to declare the return type of `a` method anymore:

```
implicit def toDifferentBoolean(a: A[java.lang.Boolean]): A[Boolean] = 
     a.asInstanceOf[A[Boolean]]
val instanceOfA: A[Boolean] = a
def a = new AT() 
```

# jquery - 窗口滚动更改菜单链接样式

> ID：15877487
> 
> 赞同：0
> 
> 时间：2013-04-08T11:04:45.083
> 
> 标签：jquery, css, styles, scrollto, onscroll

我正在尝试使用窗口滚动功能，以便菜单链接将其样式更改为用户滚动到的相关部分。

一旦他们滚动到投资组合部分，我就会提醒用户。但是链接的样式呢？

代码有点超出我的范围：

```
$(function(){
  $(window).scroll(function(){
    var aPortfolio = $('.portfoliowrapper').height();
    if($(this).scrollTop()>=aPortfolio){
        alert('portfolio just passed.');
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:22:12.977

您应该创建一个覆盖链接样式的类并添加/删除它：

**CSS**

```
.linkPortfolio {
    // styles
} 
```

**JS**

```
$(function(){
  var $targetAnchor = $('#linkID');

  $(window).scroll(function(){
    var aPortfolio = $('.portfoliowrapper').height();
    if($(this).scrollTop()>=aPortfolio){
        alert('portfolio just passed.');
        $targetAnchor.addClass('linkPortfolio');
    } else {
        $targetAnchor.removeClass('linkPortfolio');
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:09:43.317

你只需要使用[css](http://api.jquery.com/css/)：

```
if($(this).scrollTop()>=aPortfolio){
    alert('portfolio just passed.');
    $("yourlink").css({
        // Whatever styles you want here
    });
} 
```

# css - CSS渐变会被缓存吗？

> ID：15877489
> 
> 赞同：0
> 
> 时间：2013-04-08T11:04:49.423
> 
> 标签：css, caching, gradient

我当前的项目使用了很多基于 CSS 的背景渐变。它们并非用于每个元素，但它们对于用户界面非常重要。在整合它们时，我无法找到这些梯度如何影响性能的详细答案。

显然，当第一次绘制相应的元素时，具有多个渐变将使用处理能力。是否知道这种梯度生成是否也可以是硬件加速的，还是仅限 CPU？

此外，IMO 更重要的是，它们是否被缓存？如果是这样，两个元素必须相同才能共享相同的“生成”渐变？我的第一个猜测是 css-statement 和 element-size 必须相同（即使包含此语句的类不同）。它也有可能是按类缓存的，但是元素大小可能不同，因此需要另一个渐变。

例如，如果我有一个包含 15 个列表项 (li) 的列表 (ul)，每个列表项都有一个背景渐变并包括三个也具有背景渐变的元素，那么每个元素类型都有一个恒定的大小。浏览器会生成 15 或 60 个渐变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:16:11.103

Pankucins 是对的——浏览器会在下载时缓存整个 CSS 文件。然后在页面加载时呈现样式。

每个渐变都会单独渲染；但我真的不认为这会是一个太大的问题。

# objective-c - Objective-c 检查日历是否存在

> ID：15877491
> 
> 赞同：0
> 
> 时间：2013-04-08T11:05:02.393
> 
> 标签：objective-c, nscalendar

我搜索了很多，即使这个问题看起来很简单，似乎也没有明确的答案。如何以编程方式检索日历？如果已经保存，我需要保存一个并避免创建它。

我做了类似的事情：

```
myEventStore = [[EKEventStore alloc] init];
EKEvent *myEvent = [EKEvent eventWithEventStore:myEventStore];
[myEvent setCalendar:[myEventStore calendarWithIdentifier:@"Infinity"]]; 
```

并检查“myEvent”是否为零，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:27:11.007

您可以列出日历`[EKEventStore calendars]`，在 iOS 6 中不推荐使用`[EKEventStore calendarsForEntityType:]`。

# git - CCNET中的GIT源代码控制在触发发生时构建了所有项目

> ID：15877493
> 
> 赞同：1
> 
> 时间：2013-04-08T11:05:09.720
> 
> 标签：git, cruisecontrol.net

我已经在 Windows 7Ent 上安装了 CCNET，以便从 GIT（Ubuntu）服务器生成自动构建源。一切都很好，但我有一个大问题：

我的回购结构：

```
enter code here
  REPO1
        --module 1
        --module 2
        --module 3
        --module 4 
```

当 CCNET 检测到触发器时，它将从第一个模块构建到最后一个模块。我不想这样做。只需构建已修改的模块。你能告诉我怎么做吗？

我的 ccnet 配置：

```
<project name="DA 5.0" queue="01" queuePriority="01" category="01">
<artifactDirectory>&pathToArtifactsDirectory;Dashboard 5.0\</artifactDirectory>
&workingDirectory;
<webURL>http://&buildServerAddress;/ccnet/server/&buildServerName;/project/Da /ViewLatestBuildReport.aspx</webURL>
&modificationDelaySeconds;
<triggers>
  <intervalTrigger seconds='30' buildCondition='IfModificationExists'/>
  <scheduleTrigger time='03:00' buildCondition='ForceBuild' name='Scheduled'/>
  <scheduleTrigger time='11:00' buildCondition='ForceBuild' name='Scheduled'/>
</triggers>
<state type="state" directory="&pathToStatesDirectory;Dashboard 5.0\" />

    <sourcecontrol type="git">
      <repository>&gitAddress;</repository>
      <branch>master</branch>
      <autoGetSource>true</autoGetSource>
      <fetchSubmodules>true</fetchSubmodules>
      <executable>C:\Program Files (x86)\Git\cmd\git.exe</executable>
      <tagOnSuccess>false</tagOnSuccess>
      <commitBuildModifications>false</commitBuildModifications>
      <commitUntrackedFiles>false</commitUntrackedFiles>
       <workingDirectory>&pathDB5MainCheckoutDirectory;framework</workingDirectory>
      <timeout>3000000</timeout>
    </sourcecontrol>

<tasks>
  <nant>
    <executable>&pathToNantFile;</executable>
    <baseDirectory>&pathToBuildScriptsDirectory;Da\</baseDirectory>
    <buildArgs>-D:projects_to_build=framework</buildArgs>
    <buildFile>cruise.build</buildFile>
    <targetList>
      <target>automate</target>
    </targetList>
    <buildTimeoutSeconds>3000</buildTimeoutSeconds>
  </nant>

</tasks>
<publishers>
  <merge>
    <files>
      <file>&pathDB5MainCheckoutDirectory;framework\build\test-reports\*Test.dll-results.xml</file>
      <file>&pathDB5MainCheckoutDirectory;framework\build\test-reports\Test*.dll-results.xml</file>
      <file>&pathDB5MainCheckoutDirectory;framework\build\test-reports\simian.xml</file>
    </files>
  </merge>
  <xmllogger />
</publishers> 
```

# php - Ajax 选择控制 PHP MySQL？

> ID：15877495
> 
> 赞同：0
> 
> 时间：2013-04-08T11:05:14.737
> 
> 标签：php, javascript, mysql, ajax

在这里，我在 PHP 中遇到 AJAX 和 MYSQl 的问题，谁能帮助我？

我在表单中有选择控件：

```
 <form action="index.php" method="post" name="pretraga" class="border">
    <p>Mesto:</p>
                 <div class="spry-select">
                   <select name="mesto" id="select_x">
                   <option value="Novi Sad">Novi Sad</option>
                   <option value="">nesto</option>
                   <option value="">nesto</option>
                   </select></div>
    <div id="Rezultat">
<select name="podrucje" >
</select>
    </div> 
```

当有人点击诺维萨德时，我想做这样的 Mysql 查询

```
$result = mysql_query("SELECT deo_grada FROM usluga 
WHERE deo_grada='{$_POST['mesto']}'");
while ($red=mysql_fetch_object ($result))
                {
echo'<option value="'.$red->deo_grada.'">'.$red->deo_grada.'</option>';
                } 
```

退出的结果想要进入 id Rezultat？请问有什么帮助吗？

这不走运:(

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function (){
$('#select_x').change(function() {
  $.ajax({
  type: "POST",
  url: "some.php",
  data: { mesto: $("select_x option:selected")[0].val() }
}).done(function( msg ) {
  $("#Rezultat").html(msg);
});
});
   });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:11:57.097

更改 `<select name="mesto">` 为 `<select name="mesto" id="select_x">`

```
$('#select_x').change(function() {
  $.ajax({
  type: "POST",
  url: "some.php",
  data: { mesto: $("select_x option:selected")[0].val() }
}).done(function( msg ) {
  $("#Rezultat").html(msg);
});
}); 
```

此示例需要 JQUERY。

您可以阅读更多内容：

[http://api.jquery.com/change/](http://api.jquery.com/change/)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

当文档准备好时，你也应该绑定事件。

```
$(function (){ //document is ready bind events }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:24:05.850

包含 jQuery 并粘贴以下代码：

```
 $(function(){
   var res = $("#Rezultat");
   $("#selectid").change(function(){
     $.ajax({
      url:"index.php",
      method:"POST",
      data:{this.na`enter code here`me:this.value},
      success:function(data){
         res.html(data);
       }
     })
   })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:07:46.107

改变

```
WHERE deo_grada='$_POST['mesto']'" 
```

至

```
WHERE deo_grada='".$_POST['mesto']."'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:09:51.810

```
$result = mysql_query("SELECT deo_grada FROM usluga 
WHERE deo_grada='{$_POST['mesto']}'"); 
```

注意 sql 注入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T12:31:41.817

这个 javascript:)

```
function xmlhttpPost(strURL,formname,responsediv,responsemsg) {

        var xmlHttpReq = false;

        var self = this;

        // Xhr per Mozilla/Safari/Ie7

        if (window.XMLHttpRequest) {

            self.xmlHttpReq = new XMLHttpRequest();

        }

        // per tutte le altre versioni di IE

        else if (window.ActiveXObject) {

            self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");

        }

        self.xmlHttpReq.open('POST', strURL, true);

        self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

        self.xmlHttpReq.onreadystatechange = function() {

            if (self.xmlHttpReq.readyState == 4) {

                // Quando pronta, visualizzo la risposta del form

                updatepage(self.xmlHttpReq.responseText,responsediv);

            }

            else{

                // In attesa della risposta del form visualizzo il msg di attesa

                updatepage(responsemsg,responsediv);

            }

        }

        self.xmlHttpReq.send(getquerystring(formname));

    }

    function getquerystring(formname) {

        var form = document.forms[formname];

        var qstr = "";

        function GetElemValue(name, value) {

            qstr += (qstr.length > 0 ? "&" : "")

                + escape(name).replace(/\+/g, "%2B") + "="

                + escape(value ? value : "").replace(/\+/g, "%2B");

                //+ escape(value ? value : "").replace(/\n/g, "%0D");

        }

        var elemArray = form.elements;

        for (var i = 0; i < elemArray.length; i++) {

            var element = elemArray[i];

            var elemType = element.type.toUpperCase();

            var elemName = element.name;

            if (elemName) {

                if (elemType == "TEXT"

                        || elemType == "TEXTAREA"

                        || elemType == "PASSWORD"

                        || elemType == "BUTTON"

                        || elemType == "RESET"

                        || elemType == "SUBMIT"

                        || elemType == "FILE"

                        || elemType == "IMAGE"

                        || elemType == "HIDDEN")

                    GetElemValue(elemName, element.value);

                else if (elemType == "CHECKBOX" && element.checked)

                    GetElemValue(elemName, 

                        element.value ? element.value : "On");

                else if (elemType == "RADIO" && element.checked)

                    GetElemValue(elemName, element.value);

                else if (elemType.indexOf("SELECT") != -1)

                    for (var j = 0; j < element.options.length; j++) {

                        var option = element.options[j];

                        if (option.selected)

                            GetElemValue(elemName,

                                option.value ? option.value : option.text);

                    }

            }

        }

        return qstr;

    }

    function updatepage(str,responsediv){

        document.getElementById(responsediv).innerHTML = str;

    } 
```

这是HTML

```
 <div class="spry-select">
                       <select name="mesto" onclick="xmlhttpPost('obrada.php', 'pretraga', 'Rezultat', ''); return false;"/>
                       <option value="Novi Sad">Novi Sad</option>
                       <option value="">nesto</option>
                       <option value="">nesto</option>
                       </select></div>
<select id="Rezultat" name="podrucje" >

               </select> 
```

Txanks 很多 @作者：Simone Rodriguez aka Pukos < [http://www.SimoneRodriguez.com](http://www.SimoneRodriguez.com) >

# ios6 - 如何制作通行证的推送通知

> ID：15877496
> 
> 赞同：3
> 
> 时间：2013-04-08T11:05:17.380
> 
> 标签：ios6, push-notification, passbook

我已经做了一个通行证网络服务。接下来，我需要在我的通行证更新时发出推送通知。来自更新passkit编程指南，没有详细说明。你能详细解释一下吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-08T11:54:14.383

[Push Notification Programming Guide](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html%23//apple_ref/doc/uid/TP40008194-CH100-SW9)中记录了推送通知的要求和协议。

Passbook 有一些特殊的注意事项：

1.  所有 Pass 推送请求都必须发送到生产 APNS 服务器（端口 2195 上的 gateway.push.apple.com）
2.  您必须使用您的 Pass Type ID 证书和密钥向 APNS 服务器进行身份验证（不要使用 App APNS 证书）
3.  无需处理设备注册，您只需使用`pushToken`您的网络服务在设备注册通行证时收到的
4.  有效载荷应该是空的 - 例如`{"aps":""}`
5.  `alert`, `badge`,`sound`和自定义属性键都被忽略 - 推送的唯一目的是通知 Passbook 您的 Web 服务有一个新的传递。通知文本将由 pass.json 中的`changeMessage`键以及新旧 .pkpass 包之间的差异确定
6.  如果您希望显示密钥的内容，则该`changeMessage`字符串应包含。除了变量之外，更改消息可能还有静态文本，例如：. 如果未提供，则会显示一条带有通行证类型的通用消息：。`%@``value``%@``"changeMessage":"New updates: %@"``%@``"Store card changed"`
7.  从 iOS9 开始，如果您一次修改多个字段，锁定屏幕上只会显示一条通用消息。
8.  您仍然需要定期查询反馈服务并从数据库中清除过期/无效的 pushToken

请注意，推送更新可以独立于您的 Web 服务实施。Apple 在[此处的清单 5-1](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)中提供了一些示例 Objective-c 代码。

# jquery - jquery/pdfobject 没有在 rails 应用程序中显示 pdf

> ID：15877505
> 
> 赞同：0
> 
> 时间：2013-04-08T11:05:37.393
> 
> 标签：jquery, ruby-on-rails-3, pdf

嗨，我正在研究轨道。我想在我的网站上显示 PDF。我试过**[PDFOBJECT](http://pdfobject.com/)** jQuery 插件。我下载了 pdfobject.js 并通过 application.js 要求它。我使用的 javascript 部分在文档中给出如下。

```
<div id="pdfObject">

</div>

<script type="text/javascript">
 var url = "<%= "#{Rails.root}/AJITH.pdf" %>";
 console.log('url:'+url);
 window.onload = function(){
 var myPDF = new PDFObject({ url: url, pdfOpenParams: { view: "FitV" }     }).embed("pdfObject");
 }; 
```

但是在浏览器中它没有显示pdf。它只显示一个灰色框。在检查元素时它显示

```
<div id="pdfObject">
  <object data="rails_root/AJITH.pdf#view=FitV" type="application/pdf" width="100%" height="100%"></object>
</div> 
```

在 javascript 控制台中，它显示如下错误

获取 localhost:4000/rails_root/AJITH.pdf 404（未找到）

我无法找到解决方案，谁能帮我找到解决方案

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:32:36.437

将 PDF 文件放在您的公共目录中，并仅使用 Javascript 指向它：

```
var url = "/AJITH.pdf" 
```

# java - 制作一个简单的文本编辑器

> ID：15877508
> 
> 赞同：-3
> 
> 时间：2013-04-08T11:05:43.397
> 
> 标签：java, jeditorpane

我需要在我的 Java 应用程序中制作一个简单的文本编辑器。我在网上搜索，发现 JEditorPane 可能适合我的需要。

我需要的是以下内容：让用户有机会通过 JEditorPane 上方的 3 个按钮设置文本粗体、下划线和斜体（如果可能，也可以链接）。但它看起来并不那么简单。你有一些关于如何制作它的建议和简单的例子吗？也许JeditorPane不是最好的选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:30:47.190

JEdi​​torPane 支持 html 和一些 RTF（通过 text/rtf）。这是一个例子：

```
JEditorPane textarea = new JEditorPane("text/html", "");
textarea.setText(textarea.getText + "I'm regular <i>i'm italic</i>"); 
```

# sql - 复杂的sql查询辅助wordpress

> ID：15877509
> 
> 赞同：0
> 
> 时间：2013-04-08T11:05:45.747
> 
> 标签：sql

我必须将其他两个表中的两个条件添加到此查询中，但我不知道该怎么做。

```
SELECT SQL_CALC_FOUND_ROWS * FROM wp_posts  WHERE 1=1  AND ( (
                SELECT COUNT(1)
                FROM wp_term_relationships
                WHERE term_taxonomy_id IN (2,3)
                AND object_id = wp_posts.ID
                ) = 2 ) AND wp_posts.post_type = 'packages' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC LIMIT 0, 10 
```

其他表：

> 表 1 (name:packages_dates) 有三个字段：post_id,date_from(date),date_to(date)
> 
> 表 2 (name:packages_price) 有两个字段：post_id,price(numeric)

条件是：

我有一个日期输入，它必须在 date_from 和 date_to 之间

> 表格1

;

第二个输入是一个价格范围，必须包括价格

> 表 2

;

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:55:00.687

如果您的数据库允许内部连接，那么在我看来应该这样工作：

```
SELECT SQL_CALC_FOUND_ROWS * FROM wp_posts inner join packages_dates on wp_posts.ID=packages_dates.post_id inner join packages_price on wp_posts.ID=packages_price.post_id WHERE 1=1  AND ( (
            SELECT COUNT(1)
            FROM wp_term_relationships
            WHERE term_taxonomy_id IN (2,3)
            AND object_id = wp_posts.ID
            ) = 2 ) AND wp_posts.post_type = 'packages' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') AND packages_dates.date_from >=DateInput and packages_dates.date_to<=DateInput and packages_price between InputLowRange and InputHighRange GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC LIMIT 0, 10 
```

# c - SDL 中的瓷砖迷宫

> ID：15877512
> 
> 赞同：0
> 
> 时间：2013-04-08T11:06:07.827
> 
> 标签：c, sdl, maze

我正在尝试根据我的二维数组绘制一个迷宫。它只打印在窗口顶部，没有其他地方。

```
#include "SDL.h"
#include "SDL_gfxPrimitives.h"
#include <conio.h>

int main( int argc, char* args[] )
{

char caMaze[20][20] = { //the array for the maze
{"###################"},
{"#+#####  #        #"},
{"#    ## ###########"},
{"## #    #####     #"},
{"## ## ####### #####"},
{"## ## ####### #####"},
{"## ##     #      ##"},
{"##   ##     ## ####"},
{"########### ## ####"},
{"####        ## ####"},
{"#### ### ##### ####"},
{"#  #  ## ####  ####"},
{"## ## ##  ### #####"},
{"## ##  ##     #####"},
{"## ### #### #######"},
{"##   #    #  ######"},
{"#### #### #########"},
{"#########        =#"},
{"###################"},
};

int x1 = -40;
int x2 = 0;
int y1 = -40;
int y2 = 0;

SDL_Surface *screen = NULL;

SDL_Init(SDL_INIT_EVERYTHING);

screen = SDL_SetVideoMode(800, 600, 32, SDL_SWSURFACE);
int loop = 0;

    for(int i = 0; i < 20; i++)
    {
        y1 += 40;
        y2 += 40;
        for(int j = 0; j< 20; j++)
        {
            x1 += 40;
            x2 += 40;
            if( caMaze[i][j] == '#')
            {
                boxRGBA(screen, x1, y1, x2, y2, 255, 0, 0, 255);
            }
            if( caMaze[i][j] ==  ' ')
            {
                boxRGBA(screen, x1, y1, x2, y2, 255, 0, 255, 255);
            }

            if(caMaze[i][j] == '+')
            {
                boxRGBA(screen, x1, y1, x2, y2, 0, 0, 255, 255);
            }

            if (caMaze[i][j] == '=')
            {
                boxRGBA(screen, x1, y1, x2, y2, 0, 255, 0, 255);
            }
        }

    }

    if(SDL_Flip(screen) == -1)
    {
        return 1;
    }

getch();
SDL_Quit();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:34:01.233

您永远不会重置`x1`and`x2`值。一旦到达行尾并增加`y1`，`y2`对于下一行，您的 x1 和 x2 继续超过 800。

第一个 for 循环应该包括

```
int x1 = -40;
int x2 = 0; 
```

# air - 视频播放器控件（播放/暂停等）显示为叠加

> ID：15877515
> 
> 赞同：1
> 
> 时间：2013-04-08T11:06:14.997
> 
> 标签：air, flex4, flash-builder, overlay, video-player

我正在使用 Windows 7 上的 SDK 4.1 在 Flash Builder 中创建自定义视频播放器。

我在 HBox 中创建了视频播放器控件，例如播放/暂停、进度条等。

现在我想在用户鼠标悬停在显示对象上时显示这些控件，就像在[vimeo.com](http://www.vimeo.com/)视频播放器中一样，并在悬停时删除/禁用。

我当前的 .mxml 页面结构类似于[http://i48.tinypic.com/15x4w7a.png](http://i48.tinypic.com/15x4w7a.png)

我只是通过提供 HBox 高度来显示/隐藏视频容器鼠标悬停事件上的视频播放器控件 HBox。

如何在视频播放器中实现叠加功能？

任何网络链接和源代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:42:25.967

解决方案是使用一个 Flex 容器，它允许将内容分层在其他内容之上。按照设计，`VBox`和`HBox`容器不允许这样做。他们在垂直或水平布局中布局其内容，没有重叠。

您可以使用`Canvas`或`Group`容器将组件覆盖在其他组件之上。由于您使用的是 Flex 4，我建议使用`Group`而不是`Canvas`... 和`VGroup`而不是`VBox`... 和`HGroup`而不是`HBox`.

这是您可以使用 Flex 4 类进行的简单布局：

```
<s:Group>
    <s:VideoDisplay top="0" bottom="0" left="0" right="0" />
    <s:HGroup bottom="0" left="0" right="0"/>
</s:Group> 
```

该`VideoDisplay`组件是您用来显示视频的任何内容。请注意，top/bottom/left/right 属性告诉父`Group`对象布局此组件，使其顶部距父（组）的顶部边缘 0 像素（对于底部/左侧/右侧边缘类似）。

`HGroup`组件是保存播放器控件的容器。`HGroup`定位为距父容器的底部、左侧和右侧边缘 0 像素。

不应在鼠标悬停时更改播放器控件容器的高度，而应将可见属性`HGroup`（或`HBox`）容器设置为 false。

As they say, a picture is worth a thousand words. But on StackOverflow, code is worth a thousand pictures. If this answer doesn't help, you should edit your question and add the actual code you're using :)

# nlp - wordnet 是否直接呈现同义词集之间的相似性？

> ID：15877518
> 
> 赞同：0
> 
> 时间：2013-04-08T11:06:41.037
> 
> 标签：nlp, wordnet, text-analysis

我遇到了几个库，它们根据不同的算法计算 Wordnet 中各种同义词集之间的相似性。我的基本问题是 Wordnet 是否也提供了同义词集之间的相似性度量，或者这种相似性度量总是使用第三方实现的某种算法计算得出的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:50:26.017

不。

见：[http ://wordnet.princeton.edu/wordnet/documentation/](http://wordnet.princeton.edu/wordnet/documentation/)

这是一个很棒的工具，但它应该被用作数据库。计算相似度的算法可能正在查看同义词集之间各种链接的计数和类型（有很多）。

# javascript - 水平平移 D3.js

> ID：15877519
> 
> 赞同：1
> 
> 时间：2013-04-08T11:06:47.093
> 
> 标签：javascript, jquery, d3.js

我是 D3 的新手，实际上我正在尝试条形图的水平平移选项。我尝试了以下[示例](http://jsfiddle.net/nverba/Mf457/11/)，其中水平平移可以完美运行，但我可以看到某些问题。因为我想限制图表中特定范围内存在的数据的平移（不想水平平移到无穷大），请帮助我完成此操作。是否有在线可用的工作示例。谢谢你。

JS代码：

```
 var data = [
      {"date":"2011-12-31","num":5},
      {"date":"2012-01-05","num":10},
      {"date":"2012-01-10","num":22},
      {"date":"2012-01-15","num":72},
      {"date":"2012-01-20","num":87},
      {"date":"2012-01-25","num":90}
];

function draw(){

    var location = "#post"
    var month_names = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    var graph_width = 500;
    var graph_height = 200;

    var values = _.pluck(data, 'num');
    var max_val = d3.max(values);
    var v_scale = graph_height / max_val;
    var data_counts = data.length;
    var bar_width = graph_width / data_counts;
    var minDate = new Date(data[0]["date"]);
    var maxDate = new Date(data[data.length - 1]["date"]);

    var y = d3.scale.linear()
        .domain([0, max_val])
        .range([graph_height, 0]);

    console.log(minDate);
    var x = d3.time.scale().domain([minDate, maxDate]).range([0, graph_width]);

    var chart = d3.select(location).append("svg")
        .attr("class", "chart")
        .attr("width", graph_width + 20)
        .attr("height", graph_height + 20).
        call(d3.behavior.zoom().x(x).scaleExtent([1, 8]).on("zoom", zoom));

    var lines = chart.selectAll("line");

    var lines_y = lines
        .data(x.ticks(5))
        .enter().append("line")
        .attr("x1", x)
        .attr("x2", x)
        .attr("y1", function(d) {
        return graph_height - 20 - d;})
        .attr("y2", graph_height)
        .style("stroke", "#ccc");

    var lines_x = lines
        .data(y.ticks(10))
        .enter().append("line")
        .attr("x1", 0)
        .attr("x2", graph_width)
        .attr("y1", y)
        .attr("y2", y)
        .style("stroke", "#ccc");

    xAxis = d3.svg.axis().scale(x);
    yAxis = d3.svg.axis().scale(y).orient("left");

    chart.append("svg:g")
        .attr("class", "xaxis")
        .attr("transform", "translate(0,200)")
        .call(xAxis);

    chart.append("svg:g")
        .attr("class", "yaxis")
        .attr("transform", "translate(25,0)")
        .call(yAxis);

    var rect = chart.selectAll("rect")
        .data(data).enter()
        .append("rect")
        .attr("x", function(d, i) {return x(new Date(d["date"])) + 20;})
        .attr("y", function(d, i) {return graph_height - (d["num"] * v_scale);})
        .attr("width", x(new Date(data[1]["date"])))
        .attr("height", function(d, i) {return d["num"] * v_scale;});

    function zoom() {
        chart.select(".xaxis").call(xAxis);
        chart.select(".yaxis").call(yAxis);
        chart.selectAll(".chart rect").attr("transform", "translate(" + d3.event.translate[0] + ",0)scale(" + d3.event.scale + ", 1)");
    }

    }
draw(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T09:42:11.053

Here's a general purpose solution for anyone who needs it. By looking at the range rather than the domain of the X scale, this works with date/time axes too.

```
var zoom = d3.behavior.zoom()
    .scaleExtent([1,Infinity])
    .on("zoom", function () {
        var t = zoom.translate(),
            max = d3.max(x.range()),
            tx = Math.max( Math.min(0, t[0]), width - max * zoom.scale() );

        zoom.translate([ tx, t[1] ]);

        draw();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:17:17.507

To restrict the panning, simply check the value of the translation before applying it. Note that the translation value will be the inverse of the direction that you're panning in. That is, if you pan in the positive `x` direction, the translation value for `x` will be negative.

The code will look something like this.

```
function zoom() {
    if(d3.event.translate[0] > -100) {
        // translate
    }
} 
```

The actual value (`-100` above) will depend on what you actually want. You might want to pass a value in your input domain to restrict the panning to e.g. the edge of the graph.

# java - Java中的引用传递与值传递

> ID：15877521
> 
> 赞同：4
> 
> 时间：2013-04-08T11:06:56.820
> 
> 标签：java, c++, c, parameter-passing

我来自 C/C++ 世界。我注意到在许多帖子中人们不接受说在 Java 中有“通过引用传递”（对于非基元）；他们的论点是，在这种情况下，引用的副本被获取。我无法理解这个理由，因为当我们通过引用传递时，这实际上是 C 中发生的事情（获取了指针的副本）。对于我对Java的一点了解，我会说：

*   原始类型按值传递。
*   非原始类型通过引用传递。

我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:11:55.170

在 C++ 中，考虑函数：`void func(Type &arg);`. 在这里，如果你改变`arg`了（不是*arg 的内容，*而是实际的变量），调用者对传入参数的看法已经改变了——完全改变了。这是通过引用传递。与之对比`void func(Type *arg);`。在这里，您可以更改的内容，`arg`但如果您分配`arg`给某些内容，则由于指针的按值传递，这只是局部更改。

在 Java 中，您在所有复杂类型上使用传递（不可见）指针。

# c# - 回发 Infragistics Ultra Web Grid 后缺少列

> ID：15877522
> 
> 赞同：0
> 
> 时间：2013-04-08T11:06:59.430
> 
> 标签：c#, asp.net, infragistics

我有一个简单的网页，将在 ultrawebgrid 中显示数据。该页面在开始时运行良好，直到我更改下拉列表的值。在下拉列表中选择新值后，其他列不会显示。下面是我在 ultrawebgrid ASP.Net 上的代码：

```
<igtbl:UltraGridBand AllowColSizing="Free">
                    <Columns>
                        <igtbl:UltraGridColumn BaseColumnName="CONTAINERID" IsBound="True" Key="CONTAINERID"
                            Hidden="true">
                            <Header Caption="CONTAINERID">
                                <RowLayoutColumnInfo OriginX="1" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="1" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="WIPLOTHISTORYID" IsBound="True" Key="WIPLOTHISTORYID"
                            Hidden="true">
                            <Header Caption="WIPLOTHISTORYID">
                                <RowLayoutColumnInfo OriginX="1" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="1" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="WIPTRACKINGGROUPKEYID" IsBound="True" Key="WIPTRACKINGGROUPKEYID"
                            Hidden="true">
                            <Header Caption="WIPTRACKINGGROUPKEYID">
                                <RowLayoutColumnInfo OriginX="2" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="2" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="SPECID" IsBound="True" Key="SPECID" Hidden="true">
                            <Header Caption="SPECID">
                                <RowLayoutColumnInfo OriginX="3" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="3" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="insertionnumber" Key="insertionnumber"
                            Width="65px">
                            <Header Caption="Insertion #">
                                <RowLayoutColumnInfo OriginX="4" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="4" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="insertionreasonname" Key="insertionreasonname"
                            Width="150px">
                            <Header Caption="Insertion Reason">
                                <RowLayoutColumnInfo OriginX="5" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="5" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="Operation" IsBound="True" Key="Operation"
                            Width="200px" Hidden="True">
                            <Header>
                                <RowLayoutColumnInfo OriginX="6" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="6" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="Transaction Information" IsBound="True" Key="Transaction Information"
                            Width="200px">
                            <Header Caption="Transaction Information">
                                <RowLayoutColumnInfo OriginX="7" />
                            </Header>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="7" />
                            </Footer>
                        </igtbl:UltraGridColumn>
                        <igtbl:TemplatedColumn Width="280px">
                            <Header Caption="Details">
                                <RowLayoutColumnInfo OriginX="8"></RowLayoutColumnInfo>
                            </Header>
                            <CellTemplate>
                                <table style="vertical-align: middle; width: 100%">
                                    <tr>
                                        <td valign="middle" style="width: 75%">
                                            <div>
                                                <%# Eval("Details").ToString().Replace("break", "<br/>") %></div>
                                        </td>
                                        <td valign="middle" style="width: 25%">
                                            <div style="text-decoration: Underline">
                                                <%# Eval("Values").ToString().Replace("break", "<br/>")%></div>
                                        </td>
                                    </tr>
                                </table>
                            </CellTemplate>
                            <Footer>
                                <RowLayoutColumnInfo OriginX="8"></RowLayoutColumnInfo>
                            </Footer>
                        </igtbl:TemplatedColumn>
                        <igtbl:UltraGridColumn BaseColumnName="Status" Key="Status" Hidden="true">
                            <Header Caption="Lot Status">

                                <RowLayoutColumnInfo OriginX="9" />

                            </Header>

                            <Footer>
                                <RowLayoutColumnInfo OriginX="9" />
                            </Footer>

                        </igtbl:UltraGridColumn>
                        <igtbl:UltraGridColumn BaseColumnName="Date" DataType="System.DateTime" IsBound="True"
                            Width="150px" Key="Date">
                            <Header Caption="Date">

                                <RowLayoutColumnInfo OriginX="10" />

                            </Header>

                            <Footer>
                                <RowLayoutColumnInfo OriginX="7" />
                            </Footer>

                        </igtbl:UltraGridColumn>
                    </Columns>
                    <AddNewRow Visible="NotSet" View="NotSet">
                    </AddNewRow>
                </igtbl:UltraGridBand> 
```

我在 C# 上的代码是：

```
ddlInsertion.Items.Clear();
            sqldsInsertionCount.SelectCommand = "SELECT containerid , w.insertionnumber FROM (SELECT wipdata.containerid, wipdata.insertionnumber FROM (SELECT DISTINCT c.containerid , wl.insertionnumber FROM container c JOIN a_wiplot wl ON c.containerid = wl.containerid JOIN a_wiplotdetails wld ON wld.wiplotid = wl.wiplotid JOIN a_wiplotdetailsdata wldd ON wldd.wiplotdetailsid = wld.wiplotdetailsid WHERE c.containername = '" + txtLot.Text + "' AND wl.wiptrackinggroupkeyid = '" + wipkey.ToString() + "' AND wldd.iswaferdata = 0 AND wldd.wipdatanamename != 'WAFER SCRIBE ID')wipdata GROUP BY wipdata.containerid , wipdata.insertionnumber UNION ALL SELECT wipdata.containerid , wipdata.insertionnumber FROM (SELECT DISTINCT c.containerid , wl.insertionnumber FROM CONTAINER c JOIN a_wiplothistory wl ON c.containerid = wl.containerid JOIN a_wiplotdetailshistory wld ON wld.wiplothistoryid = wl.wiplothistoryid JOIN a_wiplotdetailsdatahistory wldd ON wldd.wiplotdetailshistoryid = wld.wiplotdetailshistoryid WHERE c.containername = '" + txtLot.Text + "' AND wl.wiptrackinggroupkeyid = '" + wipkey.ToString() + "' AND wldd.iswaferdata = 0 AND wldd.wipdatanamename != 'WAFER SCRIBE ID' )wipdata GROUP BY wipdata.containerid , wipdata.insertionnumber)w GROUP BY w.containerid , w.insertionnumber ORDER BY w.insertionnumber DESC";
            ddlInsertion.Items.Insert(0, new System.Web.UI.WebControls.ListItem("%", "%"));

            uwgDataCollection.Clear();            

            uwgDataCollection.DataSourceID = whdsDataCollection.ID;
            uwgDataCollection.DataBind();
            uwgDataCollection.ExpandAll();
            CustomizeColumns(txtSpec.Text.Substring(0, 4));
            ExpirePageCache(); 
```

再次感谢大家的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:59:26.450

事实证明，.Clear() 语句删除了网格上的所有波段。一旦我尝试删除它，一切都运行顺利。感谢 alhalama 对此发表评论。我欠你啤酒人:)

# java - ResponseBody 和 SessionAttribute 不兼容？

> ID：15877524
> 
> 赞同：0
> 
> 时间：2013-04-08T11:07:14.643
> 
> 标签：java, spring

我在 Spring 的控制器 @ResponseBody 中有一个方法并更新模型

```
 @SessionAttribute ("myModel")
    ...
    @RequestMapping(value = "addPoint", method = RequestMethod.POST)
    public @ResponseBody String addImgProvOption(
    @RequestParam("iRow") int iRow,
    @RequestParam("point") String point,
    @RequestParam("size") String size,
    @RequestParam("side") String side,
    @RequestParam("type") String type,
    @RequestParam("percentage") String percentage,
    @ModelAttribute("myModel") MyModel myModel,
    Model model)
    {
      OptionsRow userRow = new OptionsRow (point,size,side, type, 25);
      myModel.addOptionsRow (userRow, 0);
      model.addAttribute("myModel", myModel);
      return "addPoint"";
    }
} 
```

这样做的问题是，如果我离开 ResponseBody 标签，myModel 不会正确更新（我需要它，因为另一边的 AJAX 等待答案），我认为因为当使用 @ResponseBody 时，SessionAtributes 显然不起作用（因此我的更改丢失了）。使用 ResponseBody 时，在此方法之后，在需要“myModel”的地方实例化一个新的 MyModel 实例。

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:18:24.683

解决了。这个问题描述和可能的解决方法可以在这里找到[http://forum.springsource.org/showthread.php?93859-SessionAttributes-not-working-when-used-with-ResponseBody](http://forum.springsource.org/showthread.php?93859-SessionAttributes-not-working-when-used-with-ResponseBody)。

我以另一种方式解决了它，删除了 ResponseBody 并将带有 HTTPStatus 的 ResponseEntity 返回到 ACCEPTED。这样 AJAX 客户端就被成功通知了。现在，在没有 ResponseBody 的情况下，ModelAttribute 中的更改被确认，因此未来的 RequestMapping 方法将按预期看到它们。

```
@RequestMapping(value = "addPoint", method = RequestMethod.POST)
public ResponseEntity<byte[]> addImgProvOption(
@RequestParam("iRow") int iRow,
@RequestParam("point") String point,
@RequestParam("size") String size,
@RequestParam("side") String side,
@RequestParam("type") String type,
@RequestParam("percentage") String percentage,
@ModelAttribute("myModel") MyModel myModel,
Model model)
{
  OptionsRow userRow = new OptionsRow (point,size,side, type, 25);
  myModel.addOptionsRow (userRow, 0);
  return new ResponseEntity<byte[]>(HttpStatus.ACCEPTED);
} 
```

# java - 重新启动 java 控制台应用程序代码

> ID：15877525
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:07:17.953
> 
> 标签：java, console, restart, relaunch

我在互联网上搜索了几个小时，但找不到适合我的正确答案。

所以.. 我制作了一款名为“seabattle”的游戏 玩完该游戏后，控制台出现了再次玩的问题。

```
System.out.println("Well done! " + whosturn.getName() + ". A ship down!" );
                        System.out.println("Hurraaaaaayyyyy, All boats down!!");
                        System.out.println("Do you want to play this game again? (y/n) ");
                        input = scanner.next().toLowerCase();
                        if(input == "y"){
                            System.out.println("The game should start again now..");
                            System.out.println("Butttttttt, I don't know how to...");
                        }

                        else{
                            System.out.println("Thank you for player Battleships!");
                            System.out.println("See you next time ;)");
                        }
                    }
                    else{
                        FiredPosition.setDisplayValue('*');
                        System.out.println("Good job, you hit a ship!");
                        switchTurn();
                    } 
```

如果用户在控制台中输入 y。游戏应该重新开始。

我读了一些关于 Main(args) 或类似的东西。这对我不起作用，因为这是另一门课。

我希望你们能帮助我吗？

巧欧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:31:33.953

一个简单的答案是：无论你在开始游戏时做了什么，当你检测到“y”时再做一次。

但是，更深入的答案涉及使用对象来存储和更新游戏状态，从您的描述中无法完全清楚您当前是否正在这样做。因此，如果它是战舰类型的游戏，则该对象可能包含游戏区域的 2d 数组，并且可能包含一个变量来存储轮到谁了。该对象将具有“初始化”方法，您可以在其中随机选择船只在游戏区域中的位置，设置轮到谁的值等。

你的 main 方法会与这个对象交互，所以它会调用游戏对象的初始化方法，并且在每回合之后它会调用另一个方法（例如'isGameFinished'）来检查游戏是否结束。isGameFinished 方法将检查是否所有船只都已被摧毁，如果是则返回 true。如果它返回 true，那么将提示用户进行新游戏。如果他们输入'y​​'，那么你可以创建一个全新的游戏状态对象，或者只是再次调用游戏状态的初始化方法。然后，您将拥有一个新的游戏状态来开始新的游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:15:26.807

如果你的主班 SeaBattle 目前是这样的：

```
public class SeaBattle {
 public static void main(String[] args) {
   ...
 }
} 
```

您可以通过以下方式更改它：

```
public class SeaBattle {
 private static String[] args;
 public static void run() {
   //do the same than main() previously
 }
 public static void main(String[] args) {
   SeaBattle.args = args;
   run();
 }
} 
```

然后重新启动游戏，

```
SeaBattle.run(); 
```

# titanium - 如何从钛应用程序打开本机日历？

> ID：15877535
> 
> 赞同：1
> 
> 时间：2013-04-08T11:07:38.513
> 
> 标签：titanium, titanium-alloy

如何从适用于 Android 和 iOS 的钛应用程序打开本机日历？例如，单击一个按钮，我想在 ipad 上打开本机日历。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T18:22:14.210

在 android 中，您可以使用本机意图打开它，如此[处所述](https://stackoverflow.com/questions/5104691/open-calendar-in-android/5104726#5104726)

低于和高于 Gingerbread 的版本之间存在差异。[如本](https://groups.google.com/forum/#!topic/android-developers/kJo-XYl4WMA)问题末尾所述，由于 HTC Sense 软件，HTC 设备也存在差异。

这是我测试过的 Titanium 代码：

```
 if (Titanium.Platform.osname=="android"){

        //Params needed to create the android intent.
        var packageStr = "com.google.android.calendar";
        var classStr = "com.android.calendar.LaunchActivity";
        var actionStr = Ti.Android.ACTION_VIEW;

        var model = Ti.Platform.model;

        if ((model.indexOf("HTC") != -1) || (model.indexOf("htc") != -1)){
            //If it's a HTC device
            packageStr = "com.htc.calendar";
            classStr = "com.htc.calendar.MonthActivity";
            actionStr = Ti.Android.ACTION_MAIN;
        }
        else {
            //For android versions before Gingerbread (2.3)
            var version = parseFloat(Ti.Platform.version);
            if (version < 2.4) packageStr = "com.android.calendar";
        }

        //Launch native calendar
        var intent = Ti.Android.createIntent({
            action: actionStr,
            packageName: packageStr,
            className: classStr
        });
        Ti.Android.currentActivity.startActivity(intent);
    } 
```

您还可以通过与上面的代码相同的方式为 Titanium调整[它来打开本机日历的“创建事件”屏幕](https://stackoverflow.com/questions/4373074/how-to-launch-android-calendar-application-using-intent-froyo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T09:00:35.177

只需使用：

```
Titanium.Platform.openURL('CALSHOW://'); 
```

# graphics - 提高 Scratch 播放器的性能

> ID：15877537
> 
> 赞同：1
> 
> 时间：2013-03-10T17:20:33.027
> 
> 标签：graphics, flash

我写了一个“康威生命游戏”的 Scratch 版本作为说明性工具 - 它需要更多改进，但计算代码都在那里：见[http://scratch.mit.edu/projects/adrianmcmenamin/3163145](http://scratch.mit.edu/projects/adrianmcmenamin/3163145)

使用 Flash 播放器在 Scratch 网站上运行它，它会一直运行，但会留下每个死单元格的令人讨厌的回声，而使用 Java 播放器时，它更干净但速度很慢。

我的问题是 - 我如何确保我绘制的形状（无论是当前的 X 还是任何其他形状）在 Flash 播放器中被干净地覆盖。不幸的是，Scratch 的设计方式并不是我可以在这里发布代码段，但是如果一个单元格“活着”，则代码本质上会绘制一个红色的叉，如果它已经死亡，则该代码会绘制一个白色的叉 - 定位位置的代码任何一个十字架都是一样的。

**更新**：我想我可以通过询问“有没有办法强制 Scratch 以真正一致的方式输出光栅图形，例如线的粗细等？”来更简单地重新构建这个问题？

# xml - 删除元素中的空命名空间声明

> ID：15877544
> 
> 赞同：2
> 
> 时间：2013-04-08T11:08:10.467
> 
> 标签：xml, xslt, xslt-2.0

我得到了一个 XML，我将其转换为另一个，但在翻译之后，我得到了一些具有空命名空间声明 ( `xmlns=""`) 的元素，我想删除这些元素。

其次，我还希望在元素中`xmlns:xsi`声明。`InterChangeHead`

**输入 XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<PostenInterchange type="tag">
    <heInterchangeType>PostenInterchange</heInterchangeType>
    <heVersion>1.4-rev3</heVersion>
    <heTestindicator>1</heTestindicator>
    <InterChangeHead type="tag">
        <heVersion>1</heVersion>
        <heSenderid>SENDID</heSenderid>
        <heRecipientid>RECIPID</heRecipientid>
        <heXmlnsxsi>"http://www.w3.org/2001/XMLSchema-instance"</heXmlnsxsi>
        <heXmlns>"posten.xsd"</heXmlns>
        <Shipment type="tag">
            <heShipmenttype>IMP</heShipmenttype>
            <Shipper type="tag">
                <name>Shipper</name>
            </Shipper>
            <Consignee type="tag">
                <name>Consignee</name>
            </Consignee>
            <GoodsData type="tag">
                <heSequencenumber>2</heSequencenumber>
                <GrossWeight>0.000</GrossWeight>
                <NetWeight>0.660</NetWeight>
            </GoodsData>
        </Shipment>
    </InterChangeHead>
</PostenInterchange> 
```

**当前 XSLT**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" exclude-result-prefixes="xs fn">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <!-- Identity template -->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>

    <!-- Copy local names -->
    <xsl:template match="*">
        <xsl:element name="{name()}">
            <xsl:apply-templates select="@*|node()" />
        </xsl:element>
    </xsl:template>

    <!-- Rename elements beginning with "he" to elements without the "he" -->
    <xsl:template match="node()">
        <xsl:choose>
            <xsl:when test="substring(local-name(), 1, 2) = 'he'">
                <xsl:element name="{substring(local-name(), 3)}">
                    <xsl:apply-templates select="@*|node()" />
                </xsl:element>
            </xsl:when>
            <xsl:otherwise>
                <xsl:copy>
                    <xsl:apply-templates select="@*|node()" />
                </xsl:copy>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- Correct InterChangeHead element -->
    <xsl:template match="InterChangeHead">
        <xsl:element name="InterChangeHead" namespace="posten.xsd">     
            <!-- Copy childs -->
            <xsl:apply-templates select="child::node()" />
        </xsl:element>
    </xsl:template>

    <!-- Remove type attribute -->
    <xsl:template match="@type"/>

    <!-- Remove unnecessary elements -->
    <xsl:template match="heXmlnsxsi" />
    <xsl:template match="heXmlns" />
</xsl:stylesheet> 
```

**电流输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<PostenInterchange>
    <InterchangeType>PostenInterchange</InterchangeType>
    <Version>1.4-rev3</Version>
    <Testindicator>1</Testindicator>
    <InterChangeHead xmlns="posten.xsd">
        <Version xmlns="">1</Version>
        <Senderid xmlns="">SENDID</Senderid>
        <Recipientid xmlns="">RECIPID</Recipientid>
        <Shipment xmlns="">
            <Shipmenttype>IMP</Shipmenttype>
            <Shipper>
                <name>Shipper</name>
            </Shipper>
            <Consignee>
                <name>Consignee</name>
            </Consignee>
            <GoodsData>
                <Sequencenumber>2</Sequencenumber>
                <GrossWeight>0.000</GrossWeight>
                <NetWeight>0.660</NetWeight>
            </GoodsData>
        </Shipment>
    </InterChangeHead>
</PostenInterchange> 
```

**期望的输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<PostenInterchange>
    <InterchangeType>PostenInterchange</InterchangeType>
    <Version>1.4-rev3</Version>
    <Testindicator>1</Testindicator>
    <InterChangeHead xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="posten.xsd" >
        <Version>1</Version>
        <Senderid>SENDID</Senderid>
        <Recipientid>RECIPID</Recipientid>
        <Shipment>
            <Shipmenttype>IMP</Shipmenttype>
            <Shipper>
                <name>Shipper</name>
            </Shipper>
            <Consignee>
                <name>Consignee</name>
            </Consignee>
            <GoodsData>
                <Sequencenumber>2</Sequencenumber>
                <GrossWeight>0.000</GrossWeight>
                <NetWeight>0.660</NetWeight>
            </GoodsData>
        </Shipment>
    </InterChangeHead>
</PostenInterchange> 
```

谁能帮我解决最后一点？我添加了下一个模板，因为我认为这将删除空的命名空间声明：

```
<!-- Copy local names -->
<xsl:template match="*">
    <xsl:element name="{name()}">
        <xsl:apply-templates select="@*|node()" />
    </xsl:element>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:33:15.903

请记住，`xmlns="..."`声明为其所附加的元素*及其所有后代*设置了默认命名空间，除非被`xmlns="..."`树下更远的另一个元素取消。因此，在您想要的输出中，所有后代元素`<InterChangeHead xmlns="posten.xsd" >`也在`posten.xsd`命名空间中，您的模板需要反映这一点。由于您使用的是 XSLT 2.0，因此您可以使用条件作为 XPath 表达式的一部分来轻松执行此操作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <!-- Copy elements, fixing up names and namespaces as required -->
    <xsl:template match="*">
        <xsl:element name="{if(substring(local-name(), 1, 2) = 'he')
                            then substring(local-name(), 3) else local-name()}"
                     namespace="{if(ancestor-or-self::InterChangeHead)
                                 then 'posten.xsd' else ''}">
            <xsl:apply-templates select="@*|node()" />
        </xsl:element>
    </xsl:template>

    <!-- specific template for InterChangeHead to add the (unused) xsi
         namespace declaration -->
    <xsl:template match="InterChangeHead">
      <InterChangeHead xmlns="posten.xsd"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <xsl:apply-templates select="@*|node()" />
      </InterChangeHead>
    </xsl:template>

    <xsl:template match="@* | text()">
      <xsl:copy-of select="." />
    </xsl:template>

    <!-- Remove type attribute -->
    <xsl:template match="@type"/>

    <!-- Remove unnecessary elements -->
    <xsl:template match="heXmlnsxsi" />
    <xsl:template match="heXmlns" />
</xsl:stylesheet> 
```

I have added a specific template to declare the `xsi` namespace on `InterChangeHead`, though I'm not sure why it's necessary to include that declaration as it isn't used anywhere in the output XML document. If it turns out not to be necessary you can simply remove the `<xsl:template match="InterChangeHead">` altogether, as the template matching `*` will also handle `InterChangeHead`, setting the namespace correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:22:56.027

您需要更改每个元素节点的命名空间，因此更改模板

```
<!-- Correct InterChangeHead element -->
<xsl:template match="InterChangeHead">
    <xsl:element name="InterChangeHead" namespace="posten.xsd">     
        <!-- Copy childs -->
        <xsl:apply-templates select="child::node()" />
    </xsl:element>
</xsl:template> 
```

到

```
<!-- Correct InterChangeHead element and descendants -->
<xsl:template match="InterChangeHead | InterChangeHead//*">
    <xsl:element name="{local-name()}" namespace="posten.xsd">     
        <!-- Copy childs -->
        <xsl:apply-templates select="@* | node()" />
    </xsl:element>
</xsl:template> 
```

这是一个简化代码的完整样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" exclude-result-prefixes="xs fn">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <!-- Identity template -->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>

    <!-- Correct InterChangeHead element -->
    <xsl:template match="InterChangeHead | InterChangeHead//*">
        <xsl:element name="{local-name()}" namespace="posten.xsd">     
            <!-- Copy childs -->
            <xsl:apply-templates select="@* | node()" />
        </xsl:element>
    </xsl:template>

    <!-- Rename elements beginning with "he" to elements without the "he" -->
    <xsl:template match="InterChangeHead//*[substring(local-name(), 1, 2) = 'he']" priority="5">
                <xsl:element name="{substring(local-name(), 3)}" namespace="posten.xsd">
                    <xsl:apply-templates select="@*|node()" />
                </xsl:element>
    </xsl:template>

    <!-- Remove type attribute -->
    <xsl:template match="@type"/>

    <!-- Remove unnecessary elements -->
    <xsl:template match="heXmlnsxsi" priority="6"/>
    <xsl:template match="heXmlns" priority="6"/>
</xsl:stylesheet> 
```

# windows - IPython Notebooks - 如何让 INLINE 命令行选项适用于图像？

> ID：15877546
> 
> 赞同：0
> 
> 时间：2013-04-08T11:08:21.507
> 
> 标签：windows, google-chrome, inline, ipython-notebook, simplecv

我在 Windows Vista 下将 SimpleCV 框架与 IPython 笔记本一起使用。

我无法在笔记本正文中显示结果图像，它们只是出现在单独的弹出窗口中。

我正在运行一个批处理文件来启动 IPyhton 并尝试了以下操作但没有成功：

```
 ipython notebook --pylab inline

 ipython notebook --pylab=inline 
```

SmartCV1.3“开发者”IPython 0.13.2 Windows Vista/Chrome 26

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:59:42.213

我会尝试从开发分支与超级包运行，pylab 传递在 1.3 版本中不存在（这在牙齿中变得相当长）。官方不支持 Windows Vista，我们也不会定期对其进行测试，因为大多数核心开发人员都使用 OSX 和 Linux。我们正在积极寻找 Windows 开发人员来帮助我们在 Windows 上进行测试（如果您有兴趣）。我建议你试试[simplecv 帮助论坛](http://help.simplecv.org)。

# java - 覆盖不能按应有的方式工作

> ID：15877548
> 
> 赞同：0
> 
> 时间：2013-04-08T11:08:30.447
> 
> 标签：java, android

我有一个扩展类，`SherlockFragmentActivity`应该提供`actionBar`给其他类。不知何故，当我覆盖某些方法时，它们并没有按应有的方式工作。这是原始`overriden`方法

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case android.R.id.home:
        final Intent intent = new Intent(getApplicationContext(),
                MainScreen.class);
        intent.putExtra("Back", true);
        startActivity(intent);
        break;

    default:
        break;
    }

    return super.onOptionsItemSelected(item);
} 
```

在这里，我`override`在我的`Activity`.

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case android.R.id.home:
        final Intent intent = new Intent(Terms.this, CarDetailed.class);
        Log.d("ActionBar in Terms", "Home button pressed");
        intent.putExtra("Back", true);
        startActivity(intent);
        break;

    default:
        break;
    }

    return super.onOptionsItemSelected(item);
} 
```

日志说它正在调用 home `button`，但不知何故我总是被重定向到`MainScreen.class`. 我究竟做错了什么？

**解决了**

我返回了超级方法，那是我的错误。

# c++ - 相机自动白平衡

> ID：15877552
> 
> 赞同：5
> 
> 时间：2013-04-08T11:08:36.750
> 
> 标签：c++, c, image-processing, camera-calibration

我正在开发一个示例相机，我可以直接控制图像传感器。传感器发出拜耳图像，我需要将图像显示为实时视图。

我查看了去拜耳代码和白平衡。C/C++ 中是否有任何库可以在这个过程中帮助我？

因为我需要实时取景，所以我需要非常快地完成这些事情，因此我需要非常快的算法。

例如，我可以更改传感器上的 RGB 增益，因此我需要一种在该级别上起作用的算法，而不是对生成的图像起作用。

是否有任何库可以帮助以原始格式保存图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:06:38.827

simplecv has a function for white balance control:

[simplecv project web site](http://simplecv.org/)

# c# - WPF中如何实现页面过渡效果

> ID：15877553
> 
> 赞同：0
> 
> 时间：2013-04-08T11:08:37.663
> 
> 标签：c#, .net, wpf

我是 wpf 的新手。需要用淡入淡出之类的过渡来显示每个页面，并且它应该从左到右移动。提出实现这一目标的方法。

这是我尝试 [演示](http://www.codeproject.com/Articles/199014/Page-Transition-Control-for-WPF)的链接。

在这里，他们使用了一个用户控件，他们在其中显示了带有过渡效果的用户控件。

但我的申请有超过 15 页。因此，将所有页面作为用户控制是不好的。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:57:32.377

Take a look at the `TransitionPresenter` control in the [WPF Bag of tricks](https://github.com/thinkpixellab/bot)

Basic usage:

```
 <bot:TransitionPresenter Content="{Binding SomeViewModelForWhichYouHaveADataTemplateDefined}">
      <bot:TransitionPresenter.Transition>
          <bot:FadeTransition Duration="00:00:00.3"/>
      </bot:TransitionPresenter.Transition>
  </bot:TransitionPresenter> 
```

# session - Meteor 中的会话

> ID：15877554
> 
> 赞同：4
> 
> 时间：2013-04-08T11:08:43.757
> 
> 标签：session, meteor

经过研究，似乎 Meteor 会话在刷新页面或在新选项卡中打开网站后被重置，即它们不是通常的服务器端会话，而是客户端上的全局 javascript 变量。有些人建议使用 AmplifyJS，但我不确定它是否会像其他框架/语言中的常规会话一样工作，而且它也是第三方库，所以有什么正常的方法可以在 Meteor 中使用会话，即保持用户-服务器上的具体数据？

目前我正在使用自定义集合来处理这个问题，但这不是一种理想的方式，因为需要手动从集合中删除过期值，这会带来额外的麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T11:46:17.290

是的，这是正确的。尽管名称`Session`一点也不像 cookie，而只是存储在 hashmap 中的变量的反应形式

要在选项卡之间保持数据持久性，您需要使用集合（因为这是在选项卡之间被动共享数据的唯一方法） - Cookie 无法工作，因为它们不能被响应，因为需要将数据发送到服务器以有变化时通知客户。目前确实没有其他方法，因为发布/订阅方法目前只能从集合中发送数据。

您可以将您现在拥有的设置与您的自定义集合一起使用。您可以使用服务器端 cron 作业删除过期数据（使用[Meteor.setInterval](http://docs.meteor.com/#meteor_setinterval)或[Tom Coleman 的 cron](https://github.com/tmeasday/meteor-cron)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T10:13:08.227

有一个专门为此开发的包：[https ://atmospherejs.com/u2622/persistent-session](https://atmospherejs.com/u2622/persistent-session)

安装后，您可以使用以下功能来设置持久会话：

```
//store a persistent session variable which is stored across templates
Session.setPersistent(key, value);

//same as above, but automatically deletes session data when user logs out
Session.setAuth(key, value); 
```

我试过这个包，它就像魅力一样。

# c - 使用三元运算符进行数组初始化？

> ID：15877560
> 
> 赞同：11
> 
> 时间：2013-04-08T11:09:06.033
> 
> 标签：c, ternary-operator

我无权访问 C11 规范，因此无法调查此错误。

以下声明在编译期间引发错误：

```
int why[2] =  1 == 1 ? {1,2} : {3,4}; 
```

错误是： { 之前的预期表达式和： 之前的预期表达式：

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T11:15:24.817

这不是有效的 C11。

您只能使用初始化列表而不是表达式来初始化数组。

```
int why[2] = { ... };  // initializer-list {} 
```

此外，`1 == 1 ? {1,2} : {3,4}`不是有效的 C 表达式，因为`{1, 2}`不是 C 表达式。

仅对于使用复合文字的信息，您可以使用指针对象获得接近您想要的内容：

```
int *why = (1 == 1) ? (int[2]) {1,2} : (int[2]) {3,4}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:20:37.087

来自查尔斯·贝利 (Charles Bailey) 的回答：[来自条件表达式的语法](https://stackoverflow.com/questions/1082655/conditional-operator-differences-between-c-and-c)

```
 conditional-expression:
        logical-OR-expression
        logical-OR-expression ? expression : conditional-expression 
```

和

```
 1 == 1 ? {1,2} : {3,4}; 
           ^        ^       are not expressions 
```

这就是编译器给出如下错误的原因：

```
error: expected expression before ‘{’ token    // means after ?
error: expected expression before ‘:’ token    // before : 
```

**编辑**为@Rudi Rüssel 评论：

以下是 c 中的有效代码：

```
int main(){
    {}
    ;
    {1,2;}
} 
```

我们用来组合C`{}`中的语句。`;`

**注意：**如果我写`{1,2}`那么它的错误`(*expected ‘;’ before ‘}’ token*)`，因为`1,2`是一个表达式而*不是*一个语句。

对于 OP：什么是[C 中的表达式语句](http://msdn.microsoft.com/en-us/library/1t054cy7(v=vs.80).aspx)，什么是[块语句](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc08csor.htm)和[表达式语句](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc08csor.htm)

edit2：
注意：@ouah 如何使用 typecase 将其转换为表达式，是的：

要了解运行此代码：

```
int main(){
 printf("\n Frist = %d, Second =  %d\n",((int[2]){1,2})[0],((int[2]) {1,2})[1]);
} 
```

它的工作原理如下：

```
~$ ./a.out 

 Frist = 1, Second =  2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-18T07:46:38.293

初始化器列表不是表达式，因此不能在表达式中使用。

我建议您保持数组未初始化并使用 memcpy。

```
int why[2];
memcpy( why, 1 == 1 ? (int[2]){1,2} : (int[2]){3,4}, sizeof why ); 
```

# ios - 如何在 IOS 上识别没有 UDID 的非续订订阅的现有购买

> ID：15877565
> 
> 赞同：1
> 
> 时间：2013-04-08T11:09:14.097
> 
> 标签：ios, subscription, in-app-purchase, udid, subscriptions

有很多关于 UDID 和识别应用程序用户的问题，我们的应用程序使用 UDID 来识别用户的手机，这就是我们如何将他们的非续订订阅购买绑定到设备

Apple 现在已经禁止在应用商店中使用 UDID，因为我们的应用使用了 UDID，我们发现自己处于无法识别现有客户的境地——还有其他人发现自己处于同样的境地吗？

关于我们如何识别客户购买的订阅的任何想法？很遗憾，恢复事务方法不适用于非续订订阅。

我想我们将不得不让客户输入他们的收据编号并将其与我们拥有的收据数据进行比较（我希望它们是相同的！）但社区的任何想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T03:38:28.700

您可以尝试使用设备的 MAC 地址，只要您获得用户的许可。

# ruby-on-rails - (CRON) 错误（孙#26321 失败，退出状态为 127）

> ID：15877567
> 
> 赞同：2
> 
> 时间：2013-04-08T11:09:21.677
> 
> 标签：ruby-on-rails, cron, rvm, passenger

[每当 gem](https://github.com/javan/whenever)我的 schedule.rb 内容是

> 每 2 分钟运行一次“Refinery::Page.update_publishing_date_to_list_in_menu”结束

我通过 crontab -l 得到这个

```
# Begin Whenever generated tasks for: /home/harssh/Documents/Aptana Studio 3 Workspacwinbox/wineboxnew/config/schedule.rb

0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58
* * * * /bin/bash -l -c 'cd /home/harssh/Documents/Aptana\ Studio\ 3\ Workspacwinbox/wineboxnew && RAILS_ENV=production bundle exec rake page:publish --silent'

# End Whenever generated tasks for: /home/harssh/Documents/Aptana Studio 3 Workspacwinbox/wineboxnew/config/schedule.rb 
```

这在我的 ubuntu 10.10 上运行良好

但是我`(CRON) error (grandchild #26321 failed with exit status 127)`在我的 debian 服务器上使用 apache 和使用 rvm 的乘客使用 Ruby 1.9.3

如果我在 debian 的终端中使用脚本，它也可以正常运行，但自动 cron 任务会出错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T13:35:40.563

我也面临同样的问题，最后我解决了这个问题。

**问题 1：**脚本/运行器文件中的 Ruby 路径

脚本/运行器文件中的 ruby​​ 路径：

#！**/usr/local/bin/ruby**

您可以将**(/usr/local/bin/ruby** ) 替换为您的机器 ruby​​ 路径。您可以在机器中使用以下命令检查 ruby​​ 路径：

**哪个红宝石**

**问题2：**我认为你的跑步者没有执行权限。

您可以通过以下方式设置运行程序文件的执行权限：

Ruby 项目路径/脚本> chmod +x ruuner

# javascript - jQuery DataTables“应用过滤器”按钮

> ID：15877570
> 
> 赞同：1
> 
> 时间：2013-04-08T11:09:23.113
> 
> 标签：javascript, jquery, ajax, datatables

我正在使用您的 jQuery DataTavles 插件，并设法轻松获得所需的大部分功能。一项突出的要求是仅在单击“应用过滤器”按钮后才应用过滤器的能力。我通过遍历我的每个过滤器并调用 fnFilter 来让它工作

```
$("#btnApplyFilters").click(function () {

      $("thead input[type=text]").each(function (i) {
          alert("about to add")
          oTable.fnFilter(this.value, $("thead input[type=text]").index(this));
          alert("added")
      });
      oTable.fnDraw();
  }); 
```

不幸的是，对 fnFilter 的调用会导致 AJAX 调用重新填充网格。因此，如果用户尝试应用 3 个过滤器，则每次调用 fnFilter 都会导致调用服务器。

有什么方法可以让我一键应用所有过滤器？

# java - 使程序休眠，直到 Windows 任务完成

> ID：15877574
> 
> 赞同：0
> 
> 时间：2013-04-08T11:09:34.533
> 
> 标签：java, eclipse

我有一个小程序，可以备份一些重要文件，然后卸载程序。一旦完成，它将安装一堆新东西并备份旧文件并配置所有内容。它工作正常，但问题是当我运行程序时它只是加载了一堆安装程序并在程序安装之前恢复备份文件。

我知道发生这种情况是因为 java 不负责安装其 windows 作业的程序，但是有没有办法延迟程序，以便在最后一个完成之前它不会进入下一步？我可以大致猜测完成一个步骤并使用 thread.sleep() 需要多长时间，但我想要更准确的东西。当它完成一项任务时，有没有办法以某种方式从 Windows 中找出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:16:09.417

如果您使用 启动安装程序，`ProcessBuilder`那么您会`Process`在调用`start()`.

如果你然后调用你[`waitfor()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html#waitFor%28%29)的`Process`线程将等到安装程序完成。

# java - 如何通过电子邮件将 xslt 报告发送到 xls 文件中给出的用户列表？

> ID：15877575
> 
> 赞同：1
> 
> 时间：2013-04-08T11:09:36.043
> 
> 标签：java, xml, xslt, webdriver, testng

成功完成（执行）构建（通过/失败）后，我能够生成 XSLT 报告。我想将此报告通过电子邮件发送到 Excel 表中提到的电子邮件地址。电子邮件地址不多，但它们是固定的，即只有一组特定的电子邮件地址会收到此报告。我需要编写一个目标，我将从终端通过 ant 命令调用它来发送报告。

```
<target name="run"> 

            <antcall target="clean" />

            <antcall target="init" />
            <antcall target="compile" />

            <antcall target="runTests" />
            <!-- <antcall target ="makeXsltReports"/> -->

            <antcall target ="testng-xslt-report"/>
            <antcall target="openReport" />
            <Fetch the excel sheet's cell one >> get the email address >> send the email.

</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T21:10:59.130

使用以下过程：

*   安装[Apache poi](http://poi.apache.org/)
*   [使用 poi](http://javabeginnerstutorial.com/code-base/write-excel-file/)读取 Excel 文件
*   使用[Ant 邮件任务写一封电子邮件](https://ant.apache.org/manual/Tasks/mail.html)

**参考**

*   [使用 HSSF 读取 excel 文件](https://stackoverflow.com/questions/15654338/133772)
*   [用于 Selenium 数据驱动测试的 Apache POI | 处理二进制 [.xls] 工作簿](http://seleniumworks.blogspot.com/2014/01/apache-poi-for-selenium-data-driven.html)
*   [Apache POI API 文档](https://poi.apache.org/apidocs/overview-summary.html)
*   [使用 POI 读写 Excel 文件](http://www.onjava.com/lpt/a/3387)

# node.js - 在节点中返回 JSON 数组

> ID：15877577
> 
> 赞同：1
> 
> 时间：2013-04-08T11:09:37.793
> 
> 标签：node.js, asynchronous, express

我仍在尝试了解 Node.js 中的异步流程。我试图读取 db 中的文件列表并将结果转换为 json 数组并返回。该代码适用于一个 json 对象。但是读取完整数组时没有输出

所以这是代码

函数调用 - 从浏览器接收 ajax 请求并返回结果

```
module.retrieveSourceContent(req, res, result, function(err, result){
                if(err){
                  console.log(err);
                  return;
                }
                console.log(result);
                res.contentType('json');
                res.write(JSON.stringify(result));
                res.end();
            }); 
```

代码

```
 retrieveSourceContent : function(req, res, sourceList, callback){
        var sourceContent = new Array();
        MongoClient.connect(config.mongoPath+config.dbName, function(err, db) {
           if(err){
             return callback(new Error("Unable to Connect to DB"));
           }
           var collection = db.collection(config.source);
           for( i=0;i<sourceList['sources_FOR'].length;i++){
              //build the source JSON Array
              collection.find({'_id':sourceList['sources_FOR'][i]}).nextObject(function(err, doc) {
                if(err)
                  return callback(new Error("Error finding data in DB"));
                    var sourceObject = {
                        title     :doc.name,
                        tagCount  :doc.tag.length,
                        tags      :doc.tag,       
                        format    :doc.type,     // Differentiate text, image, video and urls
                        content   :doc.data      // Content
                    };
                    sourceContent.push(sourceObject);
                    //if(i == sourceList['sources_FOR'].length - 1)
                      return callback(null, sourceContent);

              });
           }
        });
      } 
```

此代码将一个 json 对象返回给客户端。如果我取消注释`if(i == sourceList['sources_FOR'].length - 1)`我没有输出也没有错误。但`sourceContent.push(sourceObject);`确实成功创建了 json 数组。

由于此流程适用于其他语言，我怀疑它与节点的异步流程有关。我不知道如何解决这个问题。

任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:39:22.963

由于格式的原因，跟随程序的流程有点困难。但我认为你是正确的假设这与异步行为有关。如果我没有被格式所迷惑，那么在我看来，您在循环的每次迭代中都在进行回调，这仅适用于第一次迭代。我不确定你`sourcesList`是什么，但我会尝试构建一个包含`sourcesList`. 那么你就不需要for循环了。也许您可以使用[`$in`](http://docs.mongodb.org/manual/reference/operator/in/)运算符。

# batch-file - 在批处理文件中，如何使用正则表达式查找一行中的最后一个单词

> ID：15877579
> 
> 赞同：0
> 
> 时间：2013-04-08T11:09:45.523
> 
> 标签：batch-file

str = "The is the end of line" 如何在上面的字符串融合批处理脚本中搜索最后一个单词“line”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:13:50.713

试试这个：

```
@echo off &setlocal
for %%i in (The is the end of line) do set "TheEnd=%%i"
echo(%TheEnd% 
```

# .htaccess - 配置 .htaccess

> ID：15877580
> 
> 赞同：-4
> 
> 时间：2013-04-08T11:09:50.167
> 
> 标签：.htaccess, opencart

我在 www.farmaciagimeno.com 下托管了一个 opencart 站点（在根 html 路径中，没有子文件夹）。我已经尝试了一切，但它就是行不通。我的 .htaccess 文件如下所示：

```
Options +FollowSymlinks

# Prevent Directoy listing 
Options -Indexes

# Prevent Direct Access to files
<FilesMatch "\.tpl">
 Order deny,allow
 Deny from all
</FilesMatch>

#<FilesMatch "\.ini">
 #Order deny,allow
 #Deny from all
#</files>

# SEO URL Settings
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule ^(.*)\?*$ index.php?_route_=$1 [L,QSA]
RewriteRule ^(.*) index.php [L,QSA] 
```

该页面给了我以下错误： **HTTP 500（内部服务器错误）** 好吧，您可以在 www.farmaciagimeno.com 上自己查看

你知道可能是什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:02:48.727

尽管有反对意见，但我将发布解决我问题的方法：

这是 .htaccess 文件的 f.%&@ing 编码和换行符转换。

将编码设置为 ANSI 并将换行符转换为 UNIX，它开始工作。

# matlab - 获取屏幕单元matlab以保存为pdf

> ID：15877583
> 
> 赞同：2
> 
> 时间：2013-04-08T11:09:55.997
> 
> 标签：matlab

我想将此图片导出为 pdf 格式：

![在此处输入图像描述](https://i.stack.imgur.com/jvJe8.png)

P2_波浪号 =

```
0.1029    0.4118    0.0245    0.1814    0.2794
0.3925    0.0234    0.0280    0.4626    0.0935
0.0928    0.1237    0.2680    0.2990    0.2165
0.0699    0.2219    0.0182    0.5106    0.1793
0.2611    0.0887    0.0837    0.3251    0.2414

figure('color',[1,1,1])

hBar2=bar3(P2_tilde);
colormap('pink')

set(hBar2,{'CData'},C);   
set(gca,'xticklabel',surfaces)
set(gca,'yticklabel',surfaces)
surfaces={'Equipment','Patient','Hygiene products','Near-bed','Far-bed'};
colorbar
zlabel('Probability');

colormap('pink')
colorbar('location','southOutside')
set(gca,'xticklabel',surfaces)
set(gca,'yticklabel',surfaces)
surfaces={'Equipment','Patient','Hygiene products','Near-bed','Far-bed'};
zlabel('Probability'); 
```

**要导出为 PDF 格式：**

```
currentScreenUnits=get(gcf,'Units')     % Get current screen units
currentPaperUnits=get(gcf,'PaperUnits') % Get current paper units
set(gcf,'Units',currentPaperUnits)      % Set screen units to paper units
plotPosition=get(gcf,'Position')        % Get the figure position and size
set(gcf,'PaperSize',plotPosition(3:4))  % Set the paper size to the figure size
set(gcf,'Units',currentScreenUnits)     % Restore the screen units

print -dpdf ptilde      % PDF called "ptilde.pdf" 
```

完全脱离页面。任何想法如何将图形在画布上居中并使其只有图形的大小？不然怎么修剪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:07:04.920

我无法完全复制您的数字（代码中的错误：需要 C 的定义）但使用

```
f=figure('color',[1,1,1]);
%rest of figure code....
set(f,'PaperPositionMode','auto')
print -dpdf ptilde 
```

另外，我不确定如何从 MATLAB 中裁剪 pdf，但如果您想要裁剪的矢量图形，请使用 -depsc 或 -depsc2 作为打印标志。请参阅 MATLAB 打印帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:10:47.437

该`PaperSizer`参数需要是将要打印的纸张的实际尺寸（将显示的 pdf 文件）而不是 Matlab 图形出现在屏幕上的尺寸。例如，如果您将其更改为：

```
set(gcf,'PaperSize',[9,11]) 
```

你会得到一些看起来合理的东西。

# ruby - 尽管 preload_app=true，但通过 Heroku 的 Newrelic 不会从 Unicorn 中运行的 Ruby 实例接收数据

> ID：15877587
> 
> 赞同：2
> 
> 时间：2013-04-08T11:10:11.053
> 
> 标签：ruby, heroku, unicorn, newrelic, grape

我在 heroku 上运行一个带有葡萄（无导轨）的 ruby​​ 应用程序，并且正在使用新的 relic 插件。该应用程序与独角兽分叉。[如此处](https://newrelic.com/docs/ruby/no-data-with-unicorn)所述，我将此选项集成到我的配置中。这是我的设置：

```
unicorn.rb:
worker_processes 3
preload_app true
timeout 30

config.ru:
if ENV['RACK_ENV'] == 'production'
  require 'newrelic_rpm'
end 
```

heroku 上的环境设置为生产环境，因此应正确包含该文件。此外，heroku 日志文件表明新的 relic 代理已成功启动：

```
2013-04-08T10:47:47+00:00 heroku[deployhooks]: Notified New Relic about the deploy
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Reading configuration from config/newrelic.yml
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Environment: production
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Dispatcher: unicorn
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Application: mobile-v1-ruby
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Connecting workers after forking.
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Installing Net instrumentation
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Installing Unicorn instrumentation
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Detected Unicorn, please see additional documentation: https://newrelic.com/docs/troubleshooting/im-using-unicorn-and-i-dont-see-any-data
2013-04-08T10:47:49+00:00 app[web.1]: ** [NewRelic][04/08/13 10:47:49 +0000 eea5ecfd-86be-4b88-8b2a-6b7564aa9943 (2)] INFO : Finished instrumentation
2013-04-08T10:47:49+00:00 app[web.1]: Hey there - I started in environment: production
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.798057 #2]  INFO -- : listening on addr=0.0.0.0:58224 fd=9
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.798299 #2]  INFO -- : worker=0 spawning...
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.809140 #2]  INFO -- : worker=1 spawning...
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.812632 #5]  INFO -- : worker=0 spawned pid=5
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.816144 #2]  INFO -- : worker=2 spawning...
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.819594 #5]  INFO -- : worker=0 ready
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.821252 #9]  INFO -- : worker=1 spawned pid=9
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.823869 #2]  INFO -- : master process ready
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.826441 #9]  INFO -- : worker=1 ready
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.831072 #13]  INFO -- : worker=2 spawned pid=13
2013-04-08T10:47:49+00:00 app[web.1]: I, [2013-04-08T10:47:49.836053 #13]  INFO -- : worker=2 ready
2013-04-08T10:47:50+00:00 heroku[web.1]: State changed from starting to up 
```

对我来说，一切似乎都很好。但在新遗物上，我只收到部署通知。有人有想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:00:58.247

我现在能够解决它。感谢您的所有帮助，伙计们！它与**开发者模式**、**葡萄**请求显示和通过**mongoid**对 mongodb的**数据库请求**一起工作。

 **猜猜看：最糟糕的问题之一是我的条件加载中的字符串比较：

```
if ENV['RACK_ENV'] == "production" 
```

**==**的 quals似乎不起作用。我将其更改为**.eql?()** 方法加上一些使用 newrelic 仪器重新加载的东西，现在一切都神奇地工作了：D 太棒了！

```
if ENV['RACK_ENV'].eql?("production") 
```

这是我的工作设置：

**宝石文件**

```
gem "newrelic-grape"
gem "newrelic_moped"
gem "newrelic_rpm" 
```

**配置.ru**

```
run MyApp.new

if ENV["NEW_RELIC_ENABLE"].eql?("true")

    if ENV["RACK_ENV"].eql?("development")
      puts "Loading NewRelic in developer mode ..."
      require "new_relic/rack/developer_mode"
      use NewRelic::Rack::DeveloperMode
    end

    if !ENV["RACK_ENV"].eql?("test")
        NewRelic::Agent.manual_start
        DependencyDetection.detect!
    end

end 
```

如果正确定义了**RACK_ENV**，这将在开发人员模式下加载新的遗物。否则，它会定期启动，除非处于测试模式。

这里最大的问题是缺少命令**NewRelic::Agent.manual_start**和**DependencyDetection.detect！**

如果启用了新的relic，**则 api.rb**类现在包括 Rack 工具。

**api.rb**

```
if !ENV['RACK_ENV'].eql?("test") && ENV['NEW_RELIC_ENABLE'].eql?("true")
    include NewRelic::Agent::Instrumentation::Rack
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:07:50.197

New Relic（当前）没有自动检测 Grape，因此您可能必须自己[安装 NR rack 中间件](https://newrelic.com/docs/ruby/rack-and-metal-support-in-the-ruby-agent)。这应该只是在您的 Grape::API 类中包含的问题：

```
class My::API < Grape::API
  include NewRelic::Agent::Instrumentation::Rack

  # ...

end 
```

有关更深入的详细信息，[Rack 工具的 API 文档](http://rdoc.info/github/newrelic/rpm/master/NewRelic/Agent/Instrumentation/Rack)是一个很好的起点。**

# php - 在电子邮件中使用视图模板。如何更轻松地应用模板？

> ID：15877599
> 
> 赞同：1
> 
> 时间：2013-04-08T11:11:03.297
> 
> 标签：php, zend-framework2

我已经能够加载视图模板并使用它来创建电子邮件的正文。代码类似于这里的答案： [How to render a mail template with layout in ZF2?](https://stackoverflow.com/questions/14375869/how-to-render-a-mail-template-with-layout-in-zf2)

但现在我希望获取此代码并将其移动到一个模块中，以帮助我的应用程序的其余部分发送电子邮件。我想我想让所有电子邮件的视图尽可能简单/透明。

所以基本问题是，**我如何设置代码来接受渲染模板和发送电子邮件所需的信息？**

我已经在服务定位器中保存了我的运输信息，并且发送电子邮件工作正常。我主要关心的是模板解析器所需的凌乱代码：

```
$view = new PhpRenderer();
$resolver = new TemplateMapResolver();
$resolver->setMap(array(
                'mail' => __DIR__ . '/../../../view/communication/email/new-project.phtml'
        ));
$view->setResolver($resolver); 
```

我可以将所有 *.phtml 用于保存在新模块中的电子邮件。无需从应用程序中发送临时电子邮件（我们使用应用程序内部的通信）。

**有没有办法使用`module.config.php 'view_manager' => 'template_map'`并绕过创建一个的需要`new resolver()`？** 在这种情况下，我可以设置电子邮件代码以接受应该在该地图中的命名模板。

```
'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'             => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index'   => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'                 => __DIR__ . '/../view/error/404.phtml',
            'error/index'               => __DIR__ . '/../view/error/index.phtml',
        ), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:19:17.753

您只需`viewrenderer`通过`ServiceManager`.

```
 $viewRenderer = $this->getServiceLocator()->get('viewrenderer');

 $mailView = new ViewModel();
 $mailView->setTemplate('my-namespace/controller/mailtemplate.phtml');

 $mailView->setVariables(array(
    //k=>v paired data
 ));

 $renderedOutput = $viewRenderer->render($mailView);

 $mail->setBody($renderedOutput); 
```

差不多就是这样。显然，尽管从这个示例中删除了具体的邮件处理，但鉴于您的描述，您主要关注的是另一个问题。

# php - 骨干网和codeigniter休息服务器问题

> ID：15877602
> 
> 赞同：2
> 
> 时间：2013-04-08T11:11:19.263
> 
> 标签：php, codeigniter, backbone.js

我的前端是主干，前端是带有 Phil Sturgeon 的 REST 控制器的 codeigniter。

我有一个模型：Publisher 和一个集合：Publishers

```
App.Collections.Publishers = Backbone.Collection.extend({
    model: App.Models.Publisher,
    url: '/restpublisher'
}); 
```

我的 RestPublisher 控制器有：

```
 function index_post(){
    $this->response('in pulisher_post');

}

function index_delete(){
    $this->response('in pulisher_delete');

}

function index_put(){
    $this->response('in pulisher_put');
} 
```

问题在于 this.model.save(); 触发的 url 是：[http://pubhub.local/restpublisher/1111](http://pubhub.local/restpublisher/1111)其中 1111 是 id。

问题是我得到 404。如果我只是模拟对[http://pubhub.local/restpublisher/](http://pubhub.local/restpublisher/)的放置请求，一切正常，我想我可以从 request->put() 获取参数

有没有办法解决这个问题？

问题2：有人可以解释一下为什么动作的名称应该以index开头吗？为什么我不能只写操作：publishers_post 保存集合时会获取数据？

多谢！罗伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:09:07.793

我将从第二个问题开始：我想它更容易解析，而且它只是样板文件，那么为什么不 index_ 呢？

现在，继续有趣的部分。如果您使用集合中的模型，Backbone 作为默认行为，将使用集合的 URL 为您的模型构建默认的 URL ( *collection.url/model.id* )。但是，您可以通过为模型的 URL 设置一个值来覆盖它：`url: '/restpublisher'`。

[来源](http://backbonejs.org/#Model-url)

**编辑：**
为了让您大致了解它的工作原理，引用 Backbone 的 Model#url 代码更容易：

```
url: function() {
  var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();
  if (this.isNew()) return base;
  return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id);
} 
```

所以基本上，如果你覆盖`url`模型中的属性，这个函数将被删除，你不想要的行为也会被删除。

# c# - DateTimePicker 仅使用 DropDown 选择

> ID：15877607
> 
> 赞同：2
> 
> 时间：2013-04-08T11:11:35.253
> 
> 标签：c#, .net, winforms, controls, datetimepicker

我想在我的表单中使用 DateTimePicker，但我需要用户仅使用 DropDown 选择日期，并且我试图禁用 DateTimePicker 本身的选择（例如，通过按 KeyUp/Down）。

```
//this.dtp_datum_pracVykaz.ValueChanged += new System.EventHandler(this.dtp_datum_pracVykaz_ValueChanged);
this.dtp_datum_pracVykaz.DropDown += dtp_datum_pracVykaz_DropDown;
this.dtp_datum_pracVykaz.CloseUp += dtp_datum_pracVykaz_CloseUp; 
```

在哪里

```
 void dtp_datum_pracVykaz_DropDown(object sender, System.EventArgs e)
    {
        this.dtp_datum_pracVykaz.ValueChanged += new System.EventHandler(this.dtp_datum_pracVykaz_ValueChanged);
    }

    void dtp_datum_pracVykaz_CloseUp(object sender, System.EventArgs e)
    {
        this.dtp_datum_pracVykaz.ValueChanged -= new System.EventHandler(this.dtp_datum_pracVykaz_ValueChanged);
    } 
```

问题是 DTP 已启用，因此用户可以在没有 DropDown 的情况下更改日期（但不会生效）。我想要类似 DTP.Enabled = False; 但必须启用 DropDown 的图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:41:19.887

使用 keydown 事件 -

```
 private void dateTimePicker1_KeyDown(object sender, KeyEventArgs e)
    {
        e.SuppressKeyPress = true;
    } 
```

这样，用户按下的任何键都将被忽略，从而有效地禁用用户键盘输入。

# c# - 沙盒 Paypal 错误代码 10747 Asp.net C#

> ID：15877615
> 
> 赞同：0
> 
> 时间：2013-04-08T11:12:03.523
> 
> 标签：c#, asp.net, paypal, sandbox

我正在尝试在我的 asp.net C# 应用程序中实现直接付款它返回错误“10747 无法处理此交易。” 我在 Paypal 上搜索了这个问题，它说我在请求中使用的 IP 地址无效，但我在请求中发送了有效的 IP 地址，但问题仍然存在。

我在 req 中传递这个字符串

> USER=zubairM2_api1.gmail.com&PWD=1363863579&SIGNATURE=AdEe9v7mbAer1GkOkSH-kFPUdzT5A5hUkaOZ9uanrK0fBmplr9Qlk6.a&METHOD=DoDirectPayment&CREDITCARDTYPE=&ACCT=4111111111111111&EXPDATE=062016&CVV2=123&AMT=56&FIRSTNAME=Muhammad&LASTNAME=ZUbair&IPADDRESS= 255.255.255.255&STREET=jaranwala&CITY=Faislabad&STATE=AZ&COUNTRY=USA&ZIP=69000&CURRENCYCODE=USD&VERSION=50.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:45:22.007

您需要使用不同的卡号。您使用的卡号是 Payflow 测试卡号。您需要使用从沙盒生成的测试卡号。尝试在页面顶部使用这些[卡号之一。](http://ccaples.com/index.php/misc/tools-and-stuff/cc-num-gen)

# ruby-on-rails - 使用 Observer 从 Rails 应用程序发送电子邮件

> ID：15877617
> 
> 赞同：2
> 
> 时间：2013-04-08T11:12:13.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, observers

我正在尝试从我的应用程序发送电子邮件。当我不使用观察者时，会发送电子邮件。当我使用观察者时，我收到以下错误：

```
undefined local variable or method ` UserMailer' for #<UserObserver:0x7f5730c07400> 
```

这是我的 UserMailer

```
class UserMailer < ActionMailer::Base
  default :from => "from@me.com"    
  def welcome_email(user)
    @user = user
    @url  = "website.com/home"
    mail(:to => user.email, :subject => "Welcome to My Awesome Site")
  end
end 
```

观察者代码

```
require "#{Rails.root}/app/mailers/user_mailer.rb" 

class UserObserver < ActiveRecord::Observer
    observe :user

  def after_save(user)
     UserMailer.welcome_email(user).deliver
  end

end 
```

任何帮助将不胜感激。我是铁轨上的红宝石。TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:53:22.250

Rails 4 中删除了观察者。
这意味着，即使您仍然可以[将它们与 gem 一起使用](https://github.com/rails/rails-observers)，但它们已被弃用，您不应使用它们。

其主要原因是观察者使您的应用程序对于新开发人员来说是一团糟。

我建议您使用服务（看看[这篇文章](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)，其中提到了如何正确重构您的 AR 模型），并在其中一个中发送您的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:43:36.783

您的 application.rb 文件中是否有以下行设置？

> config.active_record.observers = :user_observer

# c# - 将数组中的数据分组在一起

> ID：15877621
> 
> 赞同：-3
> 
> 时间：2013-04-08T11:12:35.430
> 
> 标签：c#, arrays

在不使用 List、ArraySort、Classes、Structs、Objects、LINQ 等任何东西的情况下，我将如何组合在一起说出我从调查中获取的年龄列表，数组中的每个元素代表一个人的年龄。

然后有一个方法来计算每个年龄有多少人，然后将这些人分为 5 个年龄组，0-18、18-30、31-45、46-64 和 65 岁及以上。假设有 8 个 18-30 岁的人是这样的。

我认为我通过结合两种方法来解决这个问题，首先是通过数组与数据递增计数数组，另一种是使用 while 循环对数据进行分组，但它似乎只是显示年龄本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:33:22.590

初始化

```
int[] input = new int[] { 5, 10, 20, 35, 50, 68 };
int[,] ageGroups = new int[5, input.Length];
int[] ageCounters = new int[5]; 
```

分组

```
foreach(int age in input)
{
    if(age >= 0 && age < 18)
    {
        ageGroups[0, ageCounters[0]] = age;
        ageCounters[0]++;
    }
    else if(age >= 18 && age <= 30)
    {
        ageGroups[1, ageCounters[1]] = age;
        ageCounters[1]++;
    }
    else if(age >= 31 && age <= 45)
    {
        ageGroups[2, ageCounters[2]] = age;
        ageCounters[2]++;
    }
    else if(age >= 46 && age <= 64)
    {
        ageGroups[3, ageCounters[3]] = age;
        ageCounters[3]++;
    }
    else if(age >= 65)
    {
        ageGroups[4, ageCounters[4]] = age;
        ageCounters[4]++;
    }
} 
```

显示

```
for(int i = 0; i < 5; i++)
{
    for(int j = 0; j < ageCounters[i]; j++)
    {
        Console.Write(ageGroups[i, j] + " ");
    }
    Console.WriteLine();
} 
```

# java - 如何从具有接口引用的类中获取简单的类名？

> ID：15877622
> 
> 赞同：3
> 
> 时间：2013-04-08T11:12:36.800
> 
> 标签：java, gwt

如果一个类实现了一个接口，如果没有完全限定的包，我如何获得类实现的名称？

```
interface HasText;
class Base extends HasText;

List<HasText> texts;

for (HasText text : texts) {
     //Error: The method getSimpleName() is undefined for the type Class<capture#1-of ? extends HasText>
     Sysout(text.getClass().getSimpleName());

     //prints: my.package.to.Base
     Sysout(text.getClass().getName());
} 
```

如何在没有包声明的情况下仅获取“Base”作为输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:19:38.987

因此，这通常应该有效，我只提出了以下解决方法：

```
String name = text.getClass().getName();
name = name.substring(name.lastIndexOf(".") + 1); 
```

如果我可能做得更好，请评论...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T11:40:22.317

如果您使用 >2.4 的 GWT SDK，即`2.5.x` `Class.getSimpleName()` 现在[支持](https://developers.google.com/web-toolkit/release-notes).

# php - 通过ajax检查php会话

> ID：15877627
> 
> 赞同：0
> 
> 时间：2013-04-08T11:12:54.613
> 
> 标签：php, jquery, mysql, ajax, session

我想`INSERT`通过 ajax 运行查询。该查询需要来自 php 会话的值，但 js 请求没有看到该值。为什么会这样？我该怎么办 ？

下面的一些代码：

JS：

```
$('div#content').on( "submit" , "form" , function ( event ){
        event.preventDefault();
        var href        = "ajaxRequest.php" + $(this).attr("action");
        var method      = $(this).attr("method");
        var values      = $(this).serializeArray();

        $.ajax({
            url         : href,
            data        : values,
            type        : method,
            dataType    : "html",
            cache       : false,
            success     : function ( content ){
                alert( content );
            }
        });

    }); 
```

PHP：

```
public function addBoard( $params = null )
        {
            $ID_user            =   $_SESSION[ 'user_id' ];
            $board_model        =   $params[ 'board_model' ];

            $query = "INSERT INTO `".prefix."boards` (                      
                        `ID_user` ,
                        `board_model`
                        )
                    VALUES (
                        '$ID_user', '$board_model');";

            if( $this->SQL->dbquery( $query ) )
                echo 'Added';
            else
                echo 'Failed';
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:14:43.160

写`session_start();`在`PHP`页面顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:22:52.020

对于服务器而言，ajax 请求与常规页面请求没有什么不同。会话的行为方式与它在页面请求中的行为方式相同。

您需要做的就是在响应 ajax 请求的 php 文件中启动会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:28:17.740

您可能需要在页面顶部开始会话。在这里，您似乎在 ajax 文件中定义了该函数但未调用。那么你有没有在ajax文件中调用那个函数

# java - 在类（不是活动）之间传递数据会导致 nullpointerexception

> ID：15877629
> 
> 赞同：0
> 
> 时间：2013-04-08T11:13:01.070
> 
> 标签：java, android, class

我有一个活动`ShowList`，我有一些`edittext`领域和`buttons`. 我有一个`button`“ `get location`”，它得到了`current location`with `GPS`。

（`ShowList activity`效果很好，我可以得到`location`）：

```
 public class ShowList extends Activity implements OnClickListener{

GPSTracker gps;   //i use GPSTracker to get the location (it is not an activity)
     .........

 case R.id.getlocation:
    // create class object
   gps = new GPSTracker(ShowList.this);

  // check if GPS enabled
 if(gps.canGetLocation()){

          double latitude = gps.getLatitude();
          double longitude = gps.getLongitude();

Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();
                    }else{
                        ...
                    } 
```

我有一个**自定义适配器**：

```
 public class myAdapter extends BaseAdapter{   
         ShowList locationclass=new ShowList();
         .....
        TextView Location = (TextView) convertView.findViewById(R.id.text_location);

            String lat=Double.toString(locationclass.gps.getLatitude());
            String lo=Double.toString(locationclass.gps.getLongitude());
            String coordinates="Lat: " + lat + "  Long: " + lo;
            Location.setText(coordinates); 
```

我收到了`nullpointer`" **String lat..."**。

那么，我怎样才能传递`location`from`ShowList activity`到`adapter`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:25:38.687

**你不能实例**化`Activity`via `new`。否则，您应该传递上下文；`Adapter`您的构造函数的纬度和经度：

```
public class myAdapter extends BaseAdapter{   
         private String latitude;
         private String longitude;
         private ArrayList<Item> items;
         private Context context; // TODO: use it for layoutInflater

        //the constructor
        public myAdapter(Context context, ArrayList<myItems> list, String latitude, String longitude) {
            this.items = list;
            this.latitude = latitude;
            this.longitude = longitude;
            this.context = context;
        }
         .....
        TextView Location = (TextView) convertView.findViewById(R.id.text_location);
            String coordinates="Lat: " + this.latitude + "  Long: " + this.longitude;
            Location.setText(coordinates); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:19:24.427

您不应将活动实例创建为

```
ShowList locationclass=new ShowList(); 
```

相反，使用要传递的参数调用适配器

```
MyAdapter myAdapter = new MyAdaper(latitude, longitude); 
```

并相应地更改构造函数`MyAdapter`。

请注意：不要以小写字母开头类名。遵循正确的命名约定。

编辑：（回复OP的评论）

如果您在活动 ShowList.java 中创建适配器类的对象，则将调用更改为：

```
MyAdapter theAdapter = new MyAdaper(latitude, longitude); 
```

并更改类`MyAdapter.java`如下：

```
public class myAdapter extends BaseAdapter{ 
    Strig latitude, longitude;  

    public MyAdapter(String lat, String long)
    {
        this.latitude=lat;
        this.longitude = long;
    }
    TextView Location = (TextView) convertView.findViewById(R.id.text_location);

    String lat=Double.toString(latitude);
    String lo=Double.toString(longitude);
    String coordinates="Lat: " + lat + "  Long: " + lo;
    Location.setText(coordinates); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:17:32.903

考虑到这`ShowList`是一项活动，您很可能实现`onCreate`了所有初始化的方法。但是，当您使用 创建类时`new ShowList()`，不会调用您的`onCreate`方法，而是调用默认构造函数`ShowList`（如果已定义）。我怀疑你没有定义它，因此你的`gps`成员变量是`null`- 导致你的 NPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:27:08.397

首先：

我们不会像这样在 android 中创建 Activity

```
ShowList locationclass=new ShowList(); 
```

Os 通过其提供的委托（如 startActivity 和 startActivityForResult）创建 Activity 实例。您必须使用相同的实例来承载数据并传递从相同引用读取的数据。

在您的情况下，您的适配器需要携带原始活动参考。

第二。

GPS位置跟踪有时需要几秒钟到几分钟。有时它永远不会根据您的设备是否可以使用开放天空来为您提供位置更新。并取决于其他一些环境因素。

因此，只有在位置管理器通过位置更新通知您的活动后，您才应该调用适配器来显示位置。不过，您必须在此之前请求位置更新。一旦你得到了位置。取消获取进一步更新的请求。

您需要更多地搜索 GPS 在 Android 中的工作原理以及与之相关的最佳实践。希望能帮助到你

# java - 读取 Outlook .msg 文件

> ID：15877633
> 
> 赞同：2
> 
> 时间：2013-04-08T11:13:21.557
> 
> 标签：java, email, outlook, apache-poi

我正在尝试使用 Apache POI 包编写代码来读取 Outlook .msg 邮件文件

我正在尝试获取目录中所有 .msg 文件的 messageIds。但是对于某些 .msg 文件，这些 messageId 为空。经过一番观察，我意识到这些是**回复消息（那些以“回复”作为正文中第一个单词的消息）**。对于其他 To 和 From 消息，我正确地获取了消息 ID。为什么会这样？

**代码**

```
private String getMsgIds(String srcDir) throws IOException
{
    String cfile; //current files - temporary string to hold file name in for loop
    String msgIds = ""; //message Ids for all messages
    MAPIMessage msg = null; //temporary message variable to hold message while iterating        
    String msgId = "";

    File folder = new File(srcDir);
    File[] listOfFiles = folder.listFiles();

    for (int i = 0; i < listOfFiles.length; i++) 
    {

      if (listOfFiles[i].isFile())  
      {           
          cfile = listOfFiles[i].getName();
          if (cfile.endsWith(".msg") || cfile.endsWith(".MSG"))
          {
              msg = new MAPIMessage(srcDir + "\\" + cfile);
          }
          try
          {
              Chunks chks = msg.getMainChunks();
              StringChunk strMsgId = chks.messageId;

              if(strMsgId != null)
              {
                  msgId = strMsgId.getValue();
                  msgIds += cfile+": "+msgId+"\n";
              }
              else
                  msgIds += cfile+": \n";
          }
          catch(NullPointerException e)
          {
              //ignore
          }

      }
    }

    return msgIds;
} 
```

**输出**

```
12.msg: 
Brand ABC.msg: <093F1AED3DF94C4D878DBB625FC76805FFA809@xyz.abc.com>
RE  Test sent mail rule sent on behalf 1.msg: 
RE  Test sent mail rule sent on behalf 2.msg: 
Test mail to check sent rule on Ramprasad 2.msg: <2909CF96D97FDD43BC5EF34B2E2B8A317E5C3A@xyz.abc.com>
Test sent mail rule 1.msg: <B9EF3A9EC5BE2E4297FB08558016D9510F1B2A@xyz.abc.com>
Test sent mail rule 2.msg: <B9EF3A9EC5BE2E4297FB08558016D9510F1B3F@xyz.abc.com>
Test sent mail rule sent on behalf 1.msg:      <B9EF3A9EC5BE2E4297FB08558016D9510F1B51@xyz.abc.com>
Test sent mail rule sent on behalf 2.msg: <B9EF3A9EC5BE2E4297FB08558016D9510F1B6D@xyz.abc.com>
Test wth CC.msg: <EE6C216DE13B484EB4D860361A19C1D7D47905@xyz.abc.com>
test.msg: <EE6C216DE13B484EB4D860361A19C1D7D4780F@xyz.abc.com> 
```

请注意，上面没有获取第 1、3 和 4 条消息的 messageId。 **我可以知道回复消息是否在他们的文件中没有 MessageIds 吗？或者如果 Apache POI 无法从回复消息中读取消息 ID？**

**更新**

我尝试使用 BufferedReader 和 InputStream 获取原始字符流。在观察字符流时，显示这些文件没有 MessageId 而其他文件有。那么可能是什么问题？

# c# - 使用 System.ServiceModel 时出现 System.TypeLoadException

> ID：15877635
> 
> 赞同：1
> 
> 时间：2013-04-08T11:13:24.963
> 
> 标签：c#, xamarin.ios, xamarin.android

我正在使用 Core 项目为我的 Android 项目和我的 IOS 项目提供所有数据。

所以在核心项目中我使用了`WSHttpBinding`绑定。它要求使用“ `System.ServiceModel`”。

当应用程序执行“”时，“”行`using System.ServiceModel`给我“ ”。`System.TypeLoadException``using System.ServiceModel`

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:59:10.467

它还没有完全实施。你可以[`Mono System.ServiceModel`在这里查看班级状态，这是 Mono 和 .Net 之间的区别。不过，](http://go-mono.com/status/status.aspx?reference=4.5&profile=4.5&assembly=System.ServiceModel) [Mono 的页面](http://www.mono-project.com/WCF_WSHttpBindingHacking)上有一些`WSHttpBinding`黑客行为。

此外，还有一个类似的问题，接受的答案[是](https://stackoverflow.com/a/5687394/620138)：

> Mono 目前不支持 WSHttpBinding，这是一项正在进行中的工作，支持非常参差不齐。

# c# - Windows 窗体中的 EntityDataSource 控件

> ID：15877637
> 
> 赞同：2
> 
> 时间：2013-04-08T11:13:48.897
> 
> 标签：c#, .net, entity-framework, ado.net

我正在创建一个`windows form application`和`ADO.Net Entity Framework`。
我试图在我的工具栏中获取**EntityDataSource**控件，但没有这样做。
请任何人都可以指导我这样做。

我正在使用**VS 2010**和**Framework 4.0**

PS：

1.  我在互联网上搜索，发现当我们选择创建 Web 应用程序时，控件变得可见。
2.  `datagrid view`我要解决的真正问题是在下拉项目中显示参考数据（ `Combobox`）

有什么办法可以让我在 Windows 窗体中使用该控件？

# xaml - WinRT 中是否有类似 Windows Phone 的跳转列表控件？

> ID：15877640
> 
> 赞同：0
> 
> 时间：2013-04-08T11:13:52.227
> 
> 标签：xaml, microsoft-metro, windows-runtime, windows-store-apps, winrt-xaml

我确实希望在某个时候为我的项目提供这种控制。例如，我希望它在我的应用程序处于快照模式时显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:27:20.173

您可以为此目的使用语义缩放。

[语义缩放指南](http://msdn.microsoft.com/en-in/library/windows/apps/hh465319.aspx)

[XAML GridView 分组和 SemanticZoom 示例](http://code.msdn.microsoft.com/windowsapps/GroupedGridView-77c59e8e)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:57:47.747

我使用语义缩放实现了跳转列表。如果有人感兴趣，可以写博客。

# batch-file - 使用包含空格的参数调用批处理文件

> ID：15877642
> 
> 赞同：0
> 
> 时间：2013-04-08T11:14:10.133
> 
> 标签：batch-file, whitespace, command-line-arguments, space

我有一个非常简单的问题：

```
call myBatch.bat "K:\dir name with spaces\eatThis.xml" 
```

哪个行不通，它将停止

```
K:\dir does not exist 
```

您能否指出解决此类问题的 SO 问题？我已经研究了很多关于批处理文件和参数中的空格的 SO 问题，但我想我的问题的解决方案一定是被意外忽略了。

--

好的，经过一些调试，结果发现不是批处理文件有问题，而是调用`String.split(" ");`以将多个参数彼此分开的 Java 应用程序。因此，当一个参数在其路径中包含空格时，应用程序逻辑就会崩溃。由于最初的问题不再描述真正的问题是什么，我应该完全重写它还是写一个新的？无论如何，我的错，请随意投反对票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:31:07.417

我创建了以下内容`mybatch.bat`并使用输出开始它`call myBatch.bat "K:\dir name with spaces\eatThis.xml"`是：

```
"K:\dir name with spaces\eatThis.xml" 
```

我的批处理.bat：

```
echo off&setlocal
echo "%~1" 
```

# c - 是否需要转换字符串的字节顺序？

> ID：15877643
> 
> 赞同：3
> 
> 时间：2013-04-08T11:14:14.793
> 
> 标签：c, endianness

发送和接收字符串时是否需要转换为网络/主机字节顺序。可用的函数（例如 htons()）仅适用于 16 位和 32 位整数。我也知道一个 char 不应该有所作为的事实，一般来说，它是一个字节大。但是字符串呢？

以下是代码片段

```
 int len; recv(fd, &len, sizeof (int), 0); 
 len = ntohl(len);

 char* string = malloc(sizeof (char) * (len + 1)); 
 int received = recv(fd, string, sizeof (char) * len, 0); 
 string[len] = '\0'; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T11:16:34.200

这取决于字符串的编码。

如果它是面向字节的格式（普通的旧 ASCII 或 UTF-8），那么没关系。

如果它使用大于单个字节的“代码点”，那么它很重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T11:16:38.970

C 字符串只是一个单字节值的数组，约定使用单字节特殊值来终止它们，因此没有什么可以交换的。Shorts 和 int 是多个字节值，它们根据硬件要求以不同的方式存储，因此需要标准化它们在网络上的存储顺序（以防接收器具有不同的硬件架构）。

# xml - 如何在 FLEX 中将 XMLList 转换为 XML

> ID：15877645
> 
> 赞同：0
> 
> 时间：2013-04-08T11:14:14.790
> 
> 标签：xml, apache-flex, xmllist

我已经参考了以下链接，但找不到适合我的方案的解决方案。

[Actionscript 3 - 如何从 XMLList 转换为 XML？](https://stackoverflow.com/questions/8458469/actionscript-3-how-can-i-convert-from-xmllist-to-xml)

我的xml变量如下：

```
private var checkXml:XML = new XML(
<universe>
<item name="cat 2">
     <item name = "All"/>
     <item name = "item 1"/>
     <item name = "item 2"/>
  </item>
  <item name="cat 2">
     <item name = "All"/>
     <item name = "item 3"/>
     <item name = "item 4"/>
     <item name = "item 5"/>
     <item name = "item 5"/>
  </item>
  <item name="cat 3">
     <item name = "All 33"/>
     <item name = "item 34"/>
     <item name = "item 44"/>
  </item>
</universe>); 
```

我使用过滤器函数来删除上述 xml 中的重复值：

```
private function filter(xmlSample:XML):XMLList 
{
     var seen:Object={};
     return xmlSample..@name.(!seen[valueOf()]&&(seen[valueOf()]=true));
} 
```

它返回 XMLList 数据。当我使用它来获取 XML 格式时：

```
var thisXml:XMLList = filter(checkXml);
Alert.show(thisXml.toXMLString()); 
```

我没有得到 XML 格式的输出；我是这样得到的。：

```
 cat 2
     All
     item 1
     item 2
     item 3
     item 4
     item 5
     cat 3
     All 33
     item 34
     item 44 
```

如何在 Flex 中获得相同的 XML 格式，就像我的 XML 变量“checkXml”一样，这样我就可以保留所有父节点和子节点，从而删除重复项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:42:29.570

这是一个快速的建议：

```
function clean(xml:XML):XML{
    var paths:Dictionary = new Dictionary(true);//keep track of paths
    var result = new XML("<"+xml.localName()+" />");//make new xml
    for each(var child:XML in xml.*){//travers 1st level
        var path:String = child.parent().localName()+"/"+child.localName()+"@"+child.@name;//get a path (I formatted it like)
        if(!paths[path]) {//if it's a new node
            paths[path] = child;//store it in the dictionary
            result.appendChild(child.copy());//add it to the result
        }else {//otherwise copy children
            for each(var clone:XML in child.*)//check for duplicates, otherwise insert, NOTE this does not merge child nodes yet :(
                if(result[child.localName()][0].*.(@name == clone.@name).length() == 0) result[child.localName()][0].appendChild(clone);
        }
    }
    trace(result.toXMLString());
    return result;
} 
```

有了基本的xml，你就可以完成这项工作，但它不是很灵活。它应该合并重复的子节点，也许应该是递归的，但我没有时间 atm。

**更新：** 我为您准备了另外两个版本。进入子节点的一个级别：

```
function clean(xml:XML):XML{
    var paths:Dictionary = new Dictionary(true);//keep track of 
    var result = new XML("<"+xml.localName()+" />");
    for each(var child:XML in xml.*){
        var path:String = child.parent().localName()+"/"+child.localName()+"@"+child.@name;
        if(!paths[path]) {
            paths[path] = child;
            result.appendChild(child.copy());
        }else
            for each(var clone:XML in child.*)
                if(result[child.localName()][0].*.(@name == clone.@name).length() == 0) result[child.localName()][0].appendChild(clone);
                else result[child.localName()][0].*.(@name == clone.@name)[0].appendChild(clone.*);
    }
    return result;
} 
```

所以像这样的xml：

```
var data:XML = <universe>
<item name="cat 2">
     <item name = "All">
        <item name="item child 1" />
        <item name="item child 3">
            <item name="item grandchild 1" />
        </item>
     </item>
     <item name = "item 1">
        <item name = "item child 1" />
     </item>
     <item name = "item 2"/>
  </item>
  <item name="cat 2">
     <item name = "All">
        <item name="item child 2" />
        <item name="item child 3">
            <item name="item grandchild 2" />
        </item>
     </item>
     <item name = "item 3"/>
     <item name = "item 4"/>
     <item name = "item 5"/>
     <item name = "item 5"/>
  </item>
  <item name="cat 3">
     <item name = "All 33"/>
     <item name = "item 34"/>
     <item name = "item 44"/>
  </item>
</universe>; 
```

产生这样的输出：

```
<universe>
  <item name="cat 2">
    <item name="All">
      <item name="item child 1"/>
      <item name="item child 3">
        <item name="item grandchild 1"/>
      </item>
      <item name="item child 2"/>
      <item name="item child 3">
        <item name="item grandchild 2"/>
      </item>
    </item>
    <item name="item 1">
      <item name="item child 1"/>
    </item>
    <item name="item 2"/>
    <item name="item 3"/>
    <item name="item 4"/>
    <item name="item 5"/>
  </item>
  <item name="cat 3">
    <item name="All 33"/>
    <item name="item 34"/>
    <item name="item 44"/>
  </item>
</universe> 
```

请注意，根节点中的属性会丢失（如果有）。可能最好的选择仍然是使用递归，如下所示：

```
function cleanNodes(nodes:XMLList):XML{
    var parent:XML = nodes.parent();
    var result:XML = new XML("<"+parent.localName()+" />");//copy parent node name
    for each(var a:XML in parent.attributes()) result['@'+a.name()] = parent.attribute(a.name());//and attributes
    //merge duplicates at one level
    var found:Dictionary = new Dictionary(true);
    for each(var child:XML in nodes){
        var name:String = child.@name;
        if(!found[name]) {
            found[name] = child;
            result.appendChild(child);
        }else{//merge
            found[name].appendChild(child.*);
        }
    }
    //recurse
    for each(var kid:XML in result.*){//for each child node
        if(kid.*.length() > 0){//if it has children
            var clean:XML = cleanNodes(kid.*);//get a clean copy of each child node
            delete result.*[kid.childIndex()];//remove the original
            result.appendChild(clean);        //add the cleaned one (replace)
        }
    }
    return result;  
} 
```

我不确定这是否是最干净/最优雅的解决方案，但它有效：

```
trace(cleanNodes(data.*)); 
```

产生：

```
<universe>
  <item name="cat 2">
    <item name="item 2"/>
    <item name="item 3"/>
    <item name="item 4"/>
    <item name="item 5"/>
    <item name="All">
      <item name="item child 1"/>
      <item name="item child 2"/>
      <item name="item child 3">
        <item name="item grandchild 1"/>
        <item name="item grandchild 2"/>
      </item>
    </item>
    <item name="item 1">
      <item name="item child 1"/>
    </item>
  </item>
  <item name="cat 3">
    <item name="All 33"/>
    <item name="item 34"/>
    <item name="item 44"/>
  </item>
</universe> 
```

请注意，具有相同名称的节点会递归折叠（如“All”和“item child 3”），但不幸的是节点顺序有点不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:08:59.663

如果您只想过滤子层，请尝试以下操作：

![在此处输入图像描述](https://i.stack.imgur.com/uz061.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" creationComplete="init(event)">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;
        private var checkXml:XML = new XML(
            <universe>
            <item name="cat 2">
                 <item name = "All"/>
                 <item name = "item 1"/>
                 <item name = "item 2"/>
              </item>
              <item name="cat 2">
                 <item name = "All"/>
                 <item name = "item 3"/>
                 <item name = "item 4"/>
                 <item name = "item 5"/>
                 <item name = "item 5"/>
              </item>
              <item name="cat 3">
                 <item name = "All 33"/>
                 <item name = "item 34"/>
                 <item name = "item 44"/>
              </item>
            </universe>);

        private function filter(xmlSample:XML):XMLList 
        {
            var seen:Object={};
            return xmlSample.item.item.(!seen[@name.valueOf()]&&(seen[@name.valueOf()]=true));
        }

        protected function init(event:FlexEvent):void
        {
            var thisXml:XMLList = filter(checkXml);
            Alert.show(thisXml.toXMLString());
        }

    ]]>
</fx:Script>

</s:Application> 
```

**编辑**

如果要过滤分离的两个级别的项目，可以使用此功能：

```
 private function filter(xmlSample:XML):XMLList 
        {
            var seen:Object={};
            var seen_child:Object={};
            return xmlSample.item.(!seen[@name.valueOf()]&&(seen[@name.valueOf()]=true)).item.(!seen_child[@name.valueOf()]&&(seen_child[@name.valueOf()]=true));
        } 
```

在这种情况下，过滤器会擦除第二个节点“cat 2”以及其余节点中子节点之间的所有重复项。

**编辑2**

如果要过滤两个层并且不想丢失二维结构，请执行以下操作：

```
 private function filter(xmlSample:XML):XMLList 
        {
            var seen:Object={};
            var firstLevel:XMLList = xmlSample.item.(!seen[@name.valueOf()]&&(seen[@name.valueOf()]=true));

            var secondLevel:XMLListCollection = new XMLListCollection();

            var seen_child:Object={};

            for each (var xmlItem:XML in firstLevel)
            {
                var tempXMLList:XMLList = xmlItem.item.(!seen_child[@name.valueOf()]&&(seen_child[@name.valueOf()]=true));
                xmlItem.setChildren(tempXMLList);
                secondLevel.addItem(xmlItem);
            }

            return secondLevel.source;
        } 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/eFXtF.png)

# codeigniter - CodeIgniter 从 WAMP 传输到主机子文件夹错误

> ID：15877650
> 
> 赞同：1
> 
> 时间：2013-04-08T11:14:31.183
> 
> 标签：codeigniter

我在我的 WAMP 上创建了一个简单的 CodeIgniter 站点，并且运行良好。

但是当上传到主机时，它说`CI_Controller not found in CodeIgniter.php`

```
Fatal error: Class 'CI_Controller' not found in /home/<myhost>/public_html/pms/system/core/CodeIgniter.php on line 233 
```

我检查了所有路径，看起来是对的，我什至去了`CodeIgniter.php`文件。

我的数据库从本地迁移到主机，设置了配置，仍然出现此错误。

有什么我想念的吗？我真的无法在网上找到任何可以让我理解为什么它返回错误的东西。

希望有人可以帮助理解这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:24:34.450

致命错误：在第 233 行的 /home//public_html/pms/system/core/CodeIgniter.php 中找不到类“CI_Controller”

路径不正确 /home/public_html/pms/system/core/CodeIgniter.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:50:39.230

CodeIgniter 很可能会自己找出 base_url：

```
$config['base_url'] = ''; 
```

... 应该管用。

# batch-file - 批处理...执行循环脚本

> ID：15877655
> 
> 赞同：0
> 
> 时间：2013-04-08T11:14:44.200
> 
> 标签：batch-file

请检查这个...

它递归地为 x 个文件创建一个文件夹，但 MOVE 命令还会检查destination_folder=Destination 文件夹的子文件夹并创建错误数量的空文件夹。如何从 For...Do 中排除 destination_folder？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:05:55.493

只需添加一个检查以查看是否`%destination_folder%`存在于`%%~pF`.

```
FOR /R "%folder%" %%F IN (*.*) DO (

    rem --- add this ---
    set "loopfolder=%%~pF"
    if "%%~pF"=="!loopfolder:%destination_folder%=!" (
    rem ----------------

        if !n!==1 (
        etc. 
```

...这基本上意味着，在`%destination_folder%`从路径的值中剥离值之后`%%F`，如果*没有任何变化*，则路径不包括目标文件夹。继续。

# java - 如何通过 ContentProvider 向 Facebook 提供图片？

> ID：15877656
> 
> 赞同：2
> 
> 时间：2013-04-08T11:14:48.517
> 
> 标签：java, android, android-intent, android-contentprovider

我正在实现一个`ContentProvider`以便将数据发送到其他应用程序而不将它们写入外部存储。（请参阅[如何实现 ContentProvider 以向 Gmail、Facebook、Evernote 等提供图像](https://stackoverflow.com/questions/15865979/how-to-implement-a-contentprovider-for-providing-image-to-gmail-facebook-evern)）。然而，Facebook 的表现似乎并不好（或者我不知道如何回答好）。它在 my 上执行查询`ContentProvider`，并在其查询的列列表中包含“_data”( `MediaStore.MediaColumns.DATA`)，但它从不调用`openFile`. 期望如何从 my 获取数据`ContentProvider`？只是尝试直接打开 _data 列中返回的文件而不是访问 _data 列是否不正确`ContentProvider`？我有什么办法可以在不将图像写入外部存储的情况下向 Facebook 提供图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T01:24:09.963

My "solution" was to make files readable `file.setReadable(true, false);` No need for android external storage permissions.

FB never asks for a file with `openFile(Uri uri, String mode)` and acceses files directly.

Probably there is some flag or xml param in provider, but i tested everything i could find and had no luck with FB. Every other share app worked fine.

Here is [**GitHub Demo**](https://github.com/varren/Screenshoter/tree/master/app/src/main/java/com/varren/screenshoter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-23T23:54:29.620

我不知道这是否解决了您的具体问题，但我遇到了类似的问题：

1.  我为我的应用程序私有目录中的图像提供了一个 Uri。
2.  通过 ContentProvider，我通过返回以下内容来提供对它的访问`openFile()`：

    ```
    return ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY); 
    ```

3.  分享到 Facebook 时，图像不会出现。但是，其他所有应用程序都可以正常工作。调试对我的 ContentProvider 的调用，我看到 Facebook 确实查询了 ContentProvider，并且`openFile()`被命中了。然而，图像并没有出现。

经过多次挠头，我意识到我`null`以 MIME 类型返回。我将结果更改`getType()`为返回“image/png”，就是这样：Facebook 接受了我的图片。

[另请参阅我的问题和答案。](https://stackoverflow.com/questions/38547465/sharing-image-from-app-private-storage-to-facebook/38547466#38547466)

# ruby-on-rails - 如何使用 Net::HTTP (Rails) 发送完整的 POST 请求

> ID：15877657
> 
> 赞同：3
> 
> 时间：2013-04-08T11:14:53.500
> 
> 标签：ruby-on-rails, ruby

我想发送一个完整的请求，如下所示：

```
POST /2012-09-25/jobs HTTP/1.1
Content-Type: application/json; charset=UTF-8
Accept: */*
Host: elastictranscoder.amazonaws.com:443
x-amz-date: Mon, 14 Jan 2013 17:49:52 GMT
Authorization: AWS4-HMAC-SHA256 
           Credential=AccessKeyID/request-date/Elastic Transcoder endpoint/ets/aws4_request,
           SignedHeaders=host;x-amz-date;x-amz-target,
           Signature=calculated-signature
Content-Length: number of characters in the JSON string
{
"Input":{
  "Key":"AAAA",
  "FrameRate":"auto",
  "Resolution":"auto",
  "AspectRatio":"auto",
  "Interlaced":"auto",
  "Container":"auto"
},
"Output":{
  "Key":"BBBB",
  "ThumbnailPattern":"pattern",
  "Rotate":"auto",
  "PresetId":"12345"
},
"PipelineId":"987654"
} 
```

如何`Net::HTTP`在 Rails 中实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:35:03.480

查看这些，POST 表单请求，文件上传 - 输入 type="file" 样式

[http://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)

[https://github.com/augustl/net-http-cheat-sheet](https://github.com/augustl/net-http-cheat-sheet)

# java - 通过 Oracle SQL Developer 工具加载 Java 文件

> ID：15877663
> 
> 赞同：2
> 
> 时间：2013-04-08T11:15:13.717
> 
> 标签：java, oracle, oracle-sqldeveloper

我是*Oracle SQL Developer*的新手。我有一个通过 Oracle SQL Developer 工具连接的 Oracle 数据库。我有一个 DB 函数，它又调用一个 Java 方法。我在 Function 选项卡下创建了一个 DB 函数。我正在尝试在 Java 选项卡下加载 Java 方法，但它给出了以下错误。

> ```
> java.sql.SQLException: ORA-29516: Aurora assertion failure: Assertion
> failure at joez.c:3377  Bulk load of method java/lang/Object.<init>
> failed; insufficient shm-object space ORA-06512: at line 1 
> ```

谁能帮我将此文件加载到 SQL Developer 工具中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-09T10:39:16.267

## 环境

*   `Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production`
*   码头工人
*   Linux -`/bin/bash`

# 解决方案

```
SQL> show parameter java
NAME                                 TYPE           VALUE
------------------------------------ -----------    -------------
java_jit_enabled                        boolean     TRUE
java_max_sessionspace_size              integer     0
java_pool_size                          big integer 0
java_soft_sessionspace_limit            integer     0

SQL > alter session set java_jit_enabled=FALSE;
Session altered.

SQL >  Alter system set java_jit_enabled=FALSE scope=both;
System altered

SQL > shut immediate
SQL > startup 
```

*注意：我也修改了`/dev/shm`文件，但我认为这不起作用*

### 链接

*   [http://idba-oracle.blogspot.com/2013/02/ora-29516-aurora-assertion-failure.html](http://idba-oracle.blogspot.com/2013/02/ora-29516-aurora-assertion-failure.html)
*   [https://oradbvn.wordpress.com/2013/08/13/new-jvm-jit-feature-in-11g-may-cause-ora-29516-error-on-linux/](https://oradbvn.wordpress.com/2013/08/13/new-jvm-jit-feature-in-11g-may-cause-ora-29516-error-on-linux/)

# javascript - 如何在arshaw的完整日历中添加印度假期列表？

> ID：15877665
> 
> 赞同：0
> 
> 时间：2013-04-08T11:15:17.953
> 
> 标签：javascript, jquery, google-calendar-api

我正在使用[Arshaw 的 Jquery 日历](http://arshaw.com/js/fullcalendar-1.6.0/demos/gcal.html)，我需要添加印度假期列表。[完整日历](http://arshaw.com/js/fullcalendar-1.6.0/demos/gcal.html)中提供了美国假期列表的示例。我需要在网页的脚本部分添加链接，如下所示：

```
$(document).ready(function() {

        $('#calendar').fullCalendar({

            // US Holidays - I need Indian Holidays instead of this
            events: 'http://www.google.com/calendar/feeds/usa__en%40holiday.calendar.google.com/public/basic',

            eventClick: function(event) {
                // opens events in a popup window
                window.open(event.url, 'gcalevent', 'width=700,height=600');
                return false;
            },

            loading: function(bool) {
                if (bool) {
                    $('#loading').show();
                }else{
                    $('#loading').hide();
                }
            }

        });

    }); 
```

我在谷歌日历中尝试了印度假期的以下链接，但它不起作用：

```
events: 'https://www.google.com/calendar/embed?src=en.indian%23holiday@group.v.calendar.google.com&ctz=America/Denver' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T09:47:28.803

您是否正确设置了 Google 日历（按照[说明](http://arshaw.com/fullcalendar/docs/google_calendar/)）？试试下面的链接：

`http://www.google.com/calendar/feeds/indian__en%40holiday.calendar.google.com/public/basic`

# ruby-on-rails-3 - 使用 javascript(coffeescript/jQuery) 从弹出窗口进行 Oauth Google 客户端身份验证

> ID：15877679
> 
> 赞同：1
> 
> 时间：2013-04-08T11:16:20.317
> 
> 标签：ruby-on-rails-3, popup, coffeescript, client-side

我在我的 Rails 应用程序中使用 oauth gem。

```
gem 'omniauth-facebook', '1.4.0'
gem "omniauth-google-oauth2" 
```

Facebook 客户端身份验证工作正常。我跟着，

[http://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication)

谷歌的客户端身份验证不起作用，或者我无法处理它。

我看到这个咖啡脚本负责 facebook 客户端身份验证，

```
jQuery ->
  $('body').prepend('<div id="fb-root"></div>')

  $.ajax
    url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
    dataType: 'script'
    cache: true

window.fbAsyncInit = ->
  FB.init(appId: 145280228983243, cookie: true)

  $('#sign_in').click (e) ->
    e.preventDefault()
    FB.login (response) ->
      window.location = '/auth/facebook/callback' if response.authResponse

  $('#sign_out').click (e) ->
    FB.getLoginStatus (response) ->
      FB.logout() if response.authResponse
    true 
```

**谷歌客户端身份验证应该怎么做？**

> 我只想当用户点击“用谷歌登录”时出现一个弹出窗口并询问用户 ID 和密码，在询问之前，它应该检查用户信息是否已经在浏览器上可用（客户端) 如果可用，不要提示输入用户 ID 和密码，继续登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:49:39.513

我有同样的问题，似乎omniauth-google-oauth2不像facebook gem那样支持客户端身份验证。

在构建 access_token 时，omniauth-facebook gem 会检查签名请求是否存在以及是否有效，然后它使用 request.params 或 cookie 提供的 access_token。否则，它会使用提供的授权码从 Facebook 查询 access_token。

omn​​iauth-google-oauth2 gem 只执行第二个操作，因为 redirect_uri 在初始和验证请求中必须相同，因此您不能以这种方式使用 gem 的当前版本。

我找到了一个叉子[https://github.com/pivotal-geotellar/omniauth-google-oauth2/tree/client_login](https://github.com/pivotal-geostellar/omniauth-google-oauth2/tree/client_login)示例[http://pivotallabs.com/facebook-and-googleplus-javascript-sdk-sign-in -with-devise-ror/](http://pivotallabs.com/facebook-and-googleplus-javascript-sdk-sign-in-with-devise-ror/)但是从 request.params 读取 access_token 而不在服务器端验证它是不安全的。

**更新**

我找到了一种通过 id_token 验证 access_token 的方法，并向 gem [https://github.com/zquestz/omniauth-google-oauth2/pull/50发出拉取请求](https://github.com/zquestz/omniauth-google-oauth2/pull/50)

# intuit-partner-platform - Intuit Open 身份验证和电子邮件地址

> ID：15877682
> 
> 赞同：1
> 
> 时间：2013-04-08T11:16:28.020
> 
> 标签：intuit-partner-platform

在[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0030_Integrate_your_app/0030_Signing_Into_and_out_of_Intuit_From_Within_Your_App/Sign-in/Implement_SSO_and_OpenID_in_Your_App](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0030_Integrate_your_app/0030_Signing_Into_and_out_of_Intuit_From_Within_Your_App/Sign-in/Implement_SSO_and_OpenID_in_Your_App)

它说：

“Intuit 不会验证与用户的 OpenID 帐户关联的用户电子邮件地址。因此，不要使用电子邮件地址进行身份验证，也不要根据电子邮件地址链接用户帐户。”

“不使用电子邮件地址进行身份验证”是什么意思？我的意思是，用户是否已经通过 OpenId 进行了身份验证。

它还说用户电子邮件地址未经过验证。但是，如果我的应用程序需要向通过 OpenId 登录的用户发送电子邮件怎么办。我如何确定用户会真正收到电子邮件？处理该问题的推荐模式是什么？

谢谢

编辑：另外，我可以使用电子邮件来唯一标识用户吗？如果不能，我应该使用什么来唯一标识来自 open id 响应的用户？

编辑 2：另外，当用户使用开放 ID 登录并且 36 天试用期到期时，开发人员是否会收费？还是只是在使用“连接到快速手册”时向开发人员收费，在这种情况下，开放身份验证本身是免费的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:50:34.230

克莱门特，
这意味着当客户访问 Intuit Appcenter 并创建一个帐户时，电子邮件不会立即得到验证，因此如果他们已经在您的系统中拥有一个帐户，则您不能仅根据他们的电子邮件地址单点登录用户。您需要提示他们登录一次以映射两个帐户。

如果它们是全新的，那么您可以在您身边自动配置一个帐户并单点登录，如果您要求客户验证他们的电子邮件地址，那么您可以向他们发送验证电子邮件。

谢谢贾里德
_

# pentaho - 在 Kettle 转换中循环

> ID：15877688
> 
> 赞同：1
> 
> 时间：2013-04-08T11:16:39.443
> 
> 标签：pentaho, kettle

我想重复执行如下所示的 SQL 查询：

```
SELECT '${date.i}' AS d, 
  COUNT(DISTINCT xid) AS n
FROM table 
WHERE date 
  BETWEEN DATE_SUB('${date.i}', INTERVAL 6 DAY) 
    AND '${date.i}'
; 
```

它基本上是按时间跨度分组，只是那些是相交的，这阻止了 GROUP BY 的使用。

这就是为什么我想在特定时间跨度内每天重复执行查询的原因。但我不确定我应该如何实现循环。你会建议什么解决方案？

Kettle 变量 date.i 从全局变量初始化。转换只是同一个转换包中的几个之一。“停止交通”可能会通过不重新进入循环来隐含地实现。

这是流程图：

![在此处输入图像描述](https://i.stack.imgur.com/ShuoQ.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:14:19.257

转换流程：

![在此处输入图像描述](https://i.stack.imgur.com/Tn4rD.png)

在步骤“INPUT”中，我创建了一个包含三个相同字段的结果集，将日期从`${date.from}`直到`${date.until}`（Kettle 变量）。（有关此技术的详细信息，请查看我的文章 -[在 MySQL 中为 JOIN 操作生成虚拟表](http://www.joyofdata.de/blog/generating-virtual-tables-for-join-operations-in-mysql/)）。

在步骤“SELECT”中，我设置了要使用的数据源（“INPUT”），并且我希望为服务结果集中的每一行执行“SELECT”。因为 Kettle 通过一个不露面的问号将参数 1 映射到 1，所以我必须为每次使用提供三倍相同的参数。

“文本文件输出”最终以通用方式输出结果。只需设置一个文件名。

2013-01-01 到 2013-01-05 的结果文本输出的内容：

```
d;n
2013/01/01 00:00:00.000;3038
2013/01/02 00:00:00.000;2405
2013/01/03 00:00:00.000;2055
2013/01/04 00:00:00.000;2796
2013/01/05 00:00:00.000;2687 
```

我不确定这是否是最巧妙的解决方案，但它确实有效。

* * *

![在此处输入图像描述](https://i.stack.imgur.com/wMbeL.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:45:23.973

在 Kettle 中，您希望避免循环，它们可能会在转换中造成真正的麻烦。相反，您应该通过添加一个步骤来执行此操作，该步骤将为您想要的每个日期在流中放置一行（将值存储在字段中），然后在查询中使用该字段值。

*ETA：*流是在步骤之间移动行（记录）的东西。将其视为由每个跃点处的一个表组成，该表在步骤之间临时保存行可能会有所帮助。

您希望避免循环，因为 Kettle 转换仅在行级别是顺序的：行可能并行处理且无序处理，唯一的保证是行将按顺序通过步骤。因此，转换中的循环不会像您直观期望的那样起作用。

仅供参考，如果您仍然不清楚流是什么，听起来您可能需要阅读一些 Kettle 教程。

# iphone - iOS 中的增强现实应用程序

> ID：15877692
> 
> 赞同：0
> 
> 时间：2013-04-08T11:16:58.737
> 
> 标签：iphone, ios, objective-c, augmented-reality

我正在尝试创建一个 ios 应用程序，使用它我们可以使用 iPhone 的相机将现实生活中的对象（例如沙发、桌子）转换为 3D 对象。这些 3D 对象信息可以保存在数据库中，当 iPhone 摄像头指向房间的其他部分时，可以显示为增强现实对象。

我已经搜索了互联网，但找不到任何关于从哪里开始将现实生活对象转换为 3D 对象以作为增强现实对象查看的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:23:55.177

检查下面的链接，您在其中找到了 SDK 以及实现 AR 的示例代码

[http://quickblox.com/developers/IOS](http://quickblox.com/developers/IOS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T16:47:48.933

我认为无论您采取何种方式，这将是一项艰巨的任务。但是，我使用[OpenCV](http://opencv.org)取得了类似目标的良好结果。

它有一个 iOS SDK，但是是用 C++ 编写的。不幸的是，我认为没有任何东西可以让您使用纯 Obj-C 或 Swift 实现这一目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T17:23:59.077

您可以通过以下链接

1.  [https://www.qualcomm.com/products/vuforia](https://www.qualcomm.com/products/vuforia)
2.  [http://www.t-immersion.com/ar-key-words/augmented-reality-sdk#](http://www.t-immersion.com/ar-key-words/augmented-reality-sdk#)
3.  [http://dev.metaio.com/sdk/](http://dev.metaio.com/sdk/)
4.  [https://www.layar.com](https://www.layar.com)

# mysql - mysql全文精确短语慢

> ID：15877698
> 
> 赞同：3
> 
> 时间：2013-04-08T11:17:28.690
> 
> 标签：mysql, performance, full-text-search

我在表上使用 InnoDB 全文搜索。我创建了 400.000 个虚拟报告并创建了全文。搜索一个单词的速度非常好。

```
SELECT count(*) from report where MATCH (reporttext) AGAINST ('dolor' IN BOOLEAN MODE) LIMIT 0, 1000
1 row(s) returned   0.717 sec / 0.000 sec

count(*)
199629 
```

在解释查询时：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  report  fulltext    FTReportText    FTReportText    0   NULL    1   "Using where" 
```

到目前为止，我想说的是，现在当我们运行以下查询时：

```
SELECT count(*) from report where MATCH (reporttext) AGAINST ('"porttitor vulputate"' IN BOOLEAN MODE) LIMIT 0, 1000    1 row(s) returned
50.732 sec / 0.000 sec

count(*)
22947 
```

解释 ：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
 1  SIMPLE  report  fulltext    FTReportText    FTReportText    0   NULL    1   "Using where" 
```

正如您现在看到的第二个查询，时间大约是 50 秒。精确词组搜索那么贵吗？

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:23:44.100

我不确定完全匹配查询的性能，但您可以试试下面的查询，看看性能如何？

```
SELECT COUNT(*) 
FROM   report 
WHERE  MATCH (reporttext) AGAINST ('porttitor vulputate' IN BOOLEAN MODE)   
  AND  reporttext LIKE '%porttitor vulputate%' LIMIT 0, 1000 
```

# c# - 如何在 navigateURL 属性中传递 HyperLink 控件中的隐藏字段值？

> ID：15877702
> 
> 赞同：3
> 
> 时间：2013-04-08T11:17:45.660
> 
> 标签：c#, asp.net

谁能告诉我如何使用超链接控件在查询字符串中传递任何隐藏的字段值。请参阅以下代码中的问题：

```
<asp:HyperLink ID="hlnkComment" runat="server" 
    onclick="return GB_show('Comment', this.href, 500, 650)" 
    ImageUrl="~/Images/Resources/forum.png" ToolTip="Comment" Text="Comment" 
    NavigateUrl="~/Recruiter/ViewForumComment.aspx?Id=<% hdnReqId.Value %>&Type=R">
</asp:HyperLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:24:38.107

查询字符串对用户可见。您可以使用[URL 重写](https://stackoverflow.com/questions/15877702/how-to-pass-hidden-field-value-in-hyperlink-control-in-navigateurl-attibute)

或者

只需将它们作为会话对象传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:25:50.907

Jquery 会为之做事。在您的 js 方法中执行重定向代码，例如：

```
 function GB_show(Comment, url, t1, t2) {
            ////YourCode
            location.href = url + "&q=" + $("#hdnValue").val();
            return false;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:51:53.117

用这个：

```
<asp:HyperLink ID="hlnkComment" runat="server" onclick="return GB_show('Comment', this.href, 500, 650);" ImageUrl="~/Images/1.jpg" ToolTip="Comment" Text="Comment" ></asp:HyperLink> 
```

在页面加载写：

```
url = string.Format("~/Recruiter/ViewForumComment.aspx?Id={0}&Type=R", hdnReqId.Value);
hlnkComment.NavigateUrl = url; 
```

# java - ZIP 目录 AES 加密

> ID：15877705
> 
> 赞同：1
> 
> 时间：2013-04-08T11:18:01.560
> 
> 标签：java, android, encryption, zip

是否可以加密包含目录但不包含文件的 zip 文件？或者如果这是不可能的，如何加密目录本身？

我有一个带有子目录的目录。我需要加密它。我读了一个建议先压缩它然后加密压缩文件。

我也不想要一个压缩文件的压缩包。以防万一有人建议。我真的需要加密目录或它的 zip 文件。还是这是唯一可能的方法？

我怎么知道我的文件已被加密？

我的程序是用java编写的。并在android中应用。

非常感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:33:22.687

据我所知，ZIP 规范允许对每个文件的内容进行加密，并且理论上每个文件都有一个单独的密码。

如果要加密目录及其下的所有文件，则需要存档目录并加密存档。目录不被视为可加密项目，因为它只是一个占位符 - 与目录相关的所有信息都是 zip 条目属性的一部分，并且不可加密，因为只有文件的内容被加密（这是根据压缩规范）。

要确定文件是否已加密，您可以尝试使用 zip 工具进行解压缩，而无需指定密码。程序应提示输入加密文件的密码。**请注意**，在撰写本文时，所有 info-zip 工具都不支持 AES 加密，因此您可能无法使用此方法测试提取文件。

使用 zipinfo 查看“状态”列，如果全部大写，则已加密（良好的经验法则）：

```
host:~/bin% zip hello.zip radio    
updating: radio (deflated 30%)
host:~/bin% zipinfo hello.zip
Archive:  hello.zip   307 bytes   1 file
-rwxr-xr-x  3.0 unx      211 tx defN  9-Jun-09 11:33 radio
1 file, 211 bytes uncompressed, 147 bytes compressed:  30.3% 
```

`tx`注意非密码保护条目的小写字母

```
host:~/bin% zip -P fred hello.zip radio
  adding: radio (deflated 30%)
host:~/bin% zipinfo hello.zip
Archive:  hello.zip   335 bytes   1 file
-rwxr-xr-x  3.0 unx      211 TX defN  9-Jun-09 11:33 radio
1 file, 211 bytes uncompressed, 147 bytes compressed:  30.3% 
```

注意密码保护条目的大写`TX`。

jar 工具产生了令人敬畏的消息（ymmv）：

```
host:~/bin% zip -P fred hello.zip radio
updating: radio (deflated 30%)
host:~/bin% jar tvf hello.zip          
java.util.zip.ZipException: invalid CEN header (encrypted entry)
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:214)
    at java.util.zip.ZipFile.<init>(ZipFile.java:144)
    at java.util.zip.ZipFile.<init>(ZipFile.java:115)
    at sun.tools.jar.Main.list(Main.java:1004)
    at sun.tools.jar.Main.run(Main.java:245)
    at sun.tools.jar.Main.main(Main.java:1177) 
```

# jquery - 删除应用于特定类型元素的 css

> ID：15877706
> 
> 赞同：0
> 
> 时间：2013-04-08T11:18:04.103
> 
> 标签：jquery, css, overriding

我的 css 文件有一个为所有锚定义的类，如下所示，我无法修改它。

```
.div a{
    color: red;
} 
```

因此，我页面上的所有锚点都采用这种颜色。我需要为页面上的一些（比如 20 个中的 10 个）锚点抑制这个，最好是通过编写一些其他类（一些 js 也可以）。但是，我不想指定新颜色是什么。它应该继承自包含该锚点的元素（例如，具有指定不同颜色的相应 css 类的其他一些 div）。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:20:09.000

```
div a.specific { color: inherit; } 
```

这样，您可以在具有 class="specific" 的锚标记处“清除”特定级别的颜色设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:20:19.677

将另一个类应用于这些元素

```
div a.classname { color: inherit; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:24:20.210

这就是[`inherit`](https://developer.mozilla.org/en-US/docs/CSS/inherit)目的。来自 Mozilla 开发者网络：

> 每个 CSS 属性都允许使用该`inherit`值。它使为其指定的元素从其父元素中获取属性的 Computed 值。

因此，如果您的锚点应该与父元素指定的颜色相同，那就是要走的路。

`[**JSBin Demo**](http://jsbin.com/orenic/2/edit)`

# cygwin - 最小的 Cygwin 安装 + Perl + Gcc

> ID：15877709
> 
> 赞同：1
> 
> 时间：2013-04-08T11:18:22.163
> 
> 标签：cygwin

我希望将特定的 Cygwin 安装作为一个 zip 文件存档，以便随后部署在不同的 Windows PC 上。在调查了问题之后，建议的执行方法是“试错”Cygwin 安装和软件包选择（[我应该使用 Cygwin 安装哪些软件包以使其不臃肿，但也拥有我作为开发人员所需的一切？](https://stackoverflow.com/questions/392812/what-packages-should-i-install-with-cygwin-to-make-it-not-bloated-but-also-have)）可能是更具体的要求会有所帮助：**我需要最少的 Cygwin 安装 + Perl + 著名的 Perl 库（Win32::API 等） + GNU make + Gcc 编译工具**。安装 Cygwin 时应该选择哪些软件包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-28T19:00:01.930

我一直在尝试 Cygwin，试图获得一个“简单的”，最小的安装。我确实发现安装 grep、gawk、sed 和类似工具等实用程序依赖于 cygwin、base-Cygwin，有时还依赖于不需要的工具，如 bash、coreutils 等，

我只想安装工具及其所需的 dll 并开始检查 Cygwin 包。我发现不使用 Cygwin 提供的 setup.exe 是完成最小 Cygwin 安装的另一种方法。

这就是我完成它的方式。

1.  仅使用 ftp 或 http 从任何 Cygwin 镜像站点下载所需的软件包。或者，您可以使用 Cygwin 提供的 setup.exe 下载所有软件包 - 仅下载而不安装。
2.  下载成功后，会在 x86/release 或 x86_64/release 目录下找到 zlib、gawk、grep、libiconv 等单个包。 .
3.  要安装 sed 或 gawk 等特定工具，只需提取工具可执行文件及其依赖项 (.dll)

在您尝试以下操作之前，请确保您拥有 7z.exe、xz.exe、bzip2 或其他能够解压缩 .xz 或 bzip 存档的工具

安装 gawk 示例如下：

1.  使用以下命令从 gawk-4.1.3-1.tar.xz 存档中提取 gawk.exe - 7z.exe e -so gawk-4.1.3-1.tar.xz | 焦油 xvf -
2.  完成后，您通常应该在子文件夹中找到 gawk.exe，即 release/gawk 文件夹下的 usr/bin
3.  查找 gawk 的依赖项 - 您可以通过多种方式执行此操作。

检查在 x86 或 x86_64 文件夹中找到的 Cygwin setup.ini 文件。查看字符串'@ gawk'，在此行之后的行中，您应该找到一个列出依赖项的“requires:”行。我的读法是这样的-“需要：bash cygwin libgmp10 libintl8 libmpfr4 libreadline7”

要运行 gawk，bash 不是必须的，因为我们有 windows 命令 shell。（包含 bash 以获取 gawk 所需的其他一些 dll。但是，这会导致安装更多不必要的文件）。其他依赖项包含 gawk 需要运行的文件。

使用 7z 或 xz 等工具将上述每个包提取到单独的文件中。

提取所有依赖项后，将所需的工具（grep/sed/gawk）复制到文件夹和所有依赖的 .dll

您现在应该能够使用准系统 cygwin 安装中所需的最少 .dll 集来运行您的工具。

> > **注意：仅提取 setup.ini 中列出的每个工具的依赖项可能还不够。有时，您可能需要执行/运行该工具以发现需要更多 dll。**

还有其他方法可以找出 .exe 所需的 dll - 您可以使用 MS 中的 dumpbin 或 dependency walker、ndepends 或类似工具来查找依赖 dll 的列表

咨询 -[如何检测应用程序所需的 DLL？](https://stackoverflow.com/questions/362560/how-do-i-detect-the-dlls-required-by-an-application) [如何找出可执行文件将加载哪些 dll？](https://stackoverflow.com/questions/475148/how-do-i-find-out-which-dlls-an-executable-will-load)

我还通过仅运行该工具并通过从所需的包中提取来一一安装缺少的 dll 来强制使用此 dll 信息。

当您运行一个工具并且它因缺少 .dll 消息而出错时，请在此处搜索包含该 dll 的包 - [https://cygwin.com/cgi-bin2/package-grep.cgi](https://cygwin.com/cgi-bin2/package-grep.cgi)。输入缺少的 dll 的全名/部分名称以查找包含该 dll 的包的名称。

最终，我完成了一个简单的 cygwin 安装，只安装了我需要的工具和 dll。

示例：gawk - gawk.exe 和以下 dll - cygwin1.dll、cyggmp-10.dll、cygiconv-2.dll、cygintl-8.dll、cygmpfr-4.dll、cyggcc_s-seh-1.dll、cygncursesw- 10.dll、cygreadline7.dll sed - sed.exe 和 dll - cygwin1.dll、cygintl-8.dll

希望这是有用的。Cywin 安装程序也做了 dll re-basing，我不会在这里冒险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:48:02.283

使用 Cygwin 的依赖系统，你应该重新安装，取消选择每个包，然后选择 Perl、make 和 gcc，它只会安装所需的包。我认为一些依赖包只是推荐而不是必需的，但是 Cygwin 安装程序方便地将它们标记为推荐。

# yql - 雅虎财经有多可靠？

> ID：15877710
> 
> 赞同：3
> 
> 时间：2013-04-08T11:18:23.810
> 
> 标签：yql, yahoo-api, yahoo-finance

雅虎金融有多可靠？

例如以下请求： http: [//developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/?q=show%20tables&env=store://datatables.org/alltableswithkeys#h=select%20) ?q=show%20tables&env=store: //datatables.org/alltableswithkeys#h=select%20 *%20from%20yahoo.finance。引号%20where%20symbol%20in%20%28%22YHOO%22%2C%22AAPL%22%2C%22GOOG%22%2C%22MSFT%22%29

间歇性返回响应：“当前表 'yahoo.finance.quotes' 已被阻止。它超出了时间或指令的分配配额”

这是完整的回复：

```
<?xml version="1.0" encoding="UTF-8"?>
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
    yahoo:count="0" yahoo:created="2013-04-08T11:16:18Z" yahoo:lang="en-US">
    <diagnostics>
        <publiclyCallable>true</publiclyCallable>
        <url execution-start-time="24" execution-stop-time="25"
            execution-time="1" proxy="DEFAULT"><![CDATA[http://www.datatables.org/yahoo/finance/yahoo.finance.quotes.xml]]></url>
        <cache execution-start-time="27" execution-stop-time="27"
            execution-time="0" method="GET" type="MEMCACHED"><![CDATA[13c4f8eac77ad886bade5a711c8c1ef5]]></cache>
        <javascript name="yahoo.finance.quotes" verb="select"><![CDATA[The current table 'yahoo.finance.quotes' has been blocked. It exceeded the allotted quotas of either time or instructions]]></javascript>
        <user-time>28</user-time>
        <service-time>1</service-time>
        <build-version>35405</build-version>
    </diagnostics> 
    <results/>
</query> 
```

要获得可靠的服务，我需要注册并付款吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T18:03:19.333

> 要获得可靠的服务，我需要注册并付款吗？

以下是限制：

```
 Public  OAuth with API Key
Hourly Cap          2,000   20,000
Daily Cap           None    100,000 
```

> 为了更好地理解上表中的速率限制，让我们使用以下示例。假设您创建的应用程序每小时从每个用户生成大约 3,000 个请求。尽管您注意到用户使用公共端点最多可以调用 2,000 次，因此您向 Yahoo! 注册了一个 API 密钥。使用经过身份验证/授权的端点。现在，您的用户每小时可以发出 20,000 个请求，每天最多可以发出 100,000 个请求。

oAuth 是[免费](https://developer.yahoo.com/apps/create/)的。

**参考**

*   [YQL 概述 - 雅虎开发者网络](https://developer.yahoo.com/yql/guide/overview.html)

*   [公共 API 停机检测器](http://downdetector.com/)

# ant - 蚂蚁目标调用

> ID：15877714
> 
> 赞同：8
> 
> 时间：2013-04-08T11:18:35.587
> 
> 标签：ant

我想调用 target backup.yes 仅当条件为真时。

```
<condition property="directory.found.yes">
<equals arg1="${directory.found}" arg2="true"/>
</condition>

<antcall target="update.backup"/> 
```

有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T15:00:29.663

而不是`<antcall/>`，请执行以下操作：

想象一下，您正在调用 target `foo`，并且您想在之前进行备份，但前提是该条件存在：

```
<target name="foo"
    depends="update.backup">
    <..../>
</target>

<target name="update.backup.test">
    <condition property="directory.found.yes">
         <equals arg1="${directory.found}" arg2="true"/>
    </condition>
</target>

<target name="update.backup"
    depends="update.backup.test"
    if="directory.found.yes">
    <.../>
</target> 
```

问题`<antcall/>`在于它在 Ant 使用的依赖矩阵被破坏时使用，它用于强制在另一个任务完成之前完成一个任务。当真正被滥用时，你最终会多次调用同一个任务。我在这里有一个项目，它实际上将每个目标调用了 10 到 14 次，并且有超过两打目标。我重写了整个构建`<antcall/>`，并通过使用真正的依赖设置，将构建时间减少了 75%。

根据我的经验，90%`<antcall/>`是由于目标依赖管理不善造成的。

假设您要执行 target `foo`。（用户想要真正执行的目标），并且在`foo`调用之前，您想要进行备份，但前提是该目录实际存在。

在上面，`foo`被称为。这取决于`update.backaup`. 目标`update.backup`被调用，但这取决于`update.backup.test`哪个将测试目录是否实际存在。

如果目录存在，则任务`if`上的子句`update.backup`为真，任务将实际执行。否则，如果目录不存在，它将不会执行。

请注意，`update.backup`首先调用任何依赖项**，然后**再检查是否检查了实体的`if`or`unless`参数上的属性。`target`这允许目标在尝试执行之前调用测试。

这不仅仅是副作用，而是内置于 Ant 的设计中。事实上，Ant Manual on Targets]( [http://ant.apache.org/manual/targets.html](http://ant.apache.org/manual/targets.html) ) 专门给出了一个非常相似的例子：

```
<target name="myTarget" depends="myTarget.check" if="myTarget.run">
    <echo>Files foo.txt and bar.txt are present.</echo>
</target>

<target name="myTarget.check">
    <condition property="myTarget.run">
        <and>
            <available file="foo.txt"/>
            <available file="bar.txt"/>
        </and>
    </condition>
</target> 
```

并指出：

> **重要**： if 和 unless 属性仅启用或禁用它们所附加的目标。它们不控制条件目标所依赖的目标是否被执行。事实上，在目标即将执行之前，它们甚至都不会被评估，并且它的所有前辈都已经运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T12:19:40.103

您可以执行以下操作

**在另一个目标中：**

```
<antcall target="update.back">
    <param name="ok" value="${directory.found.yes}"/>
</antcall> 
```

**在 update.backup 目标中：**

```
<target name="update.backup" if="ok"> 
```

但我认为您也可以使用 ant-contrib 的if[语句](http://ant-contrib.sourceforge.net/)[执行](http://ant-contrib.sourceforge.net/tasks/tasks/if.html)以下操作：

```
<if>
     <equals arg1="${directory.found.yes}" arg2="true" />
     <then>
           <antcall target="update.back" />
     </then>     
 </if> 
```

# apache-flex - 执行 SELECT 语句时的 sqlite 磁盘 i/o 错误

> ID：15877715
> 
> 赞同：1
> 
> 时间：2013-04-08T11:18:39.127
> 
> 标签：apache-flex, sqlite, air, adobe

我有以下 sql 语句；

```
SELECT customer_name, cst_id 
FROM master_customer 
ORDER BY cst_id DESC;

*** ERROR *** : Error #3128: Disk I/O error occurred. 
```

我检查了数据库访问权限：好的

我做了完整性检查：好的

1.  这是什么原因？
2.  有哪些可能的解决方案？

注意：我没有任何防病毒程序可以在执行扫描时保存我的数据库。

# windows - 有没有类似于fromelf的工具在windows上提取二进制图片

> ID：15877716
> 
> 赞同：0
> 
> 时间：2013-04-08T11:18:45.473
> 
> 标签：windows, arm, elf

我想将基于地址范围的 ELF 系统映像中的图像提取集成到 Windows 上的工具中。有什么方法可以在类似于使用 ARM 工具链中的 fromelf 工具的 Windows 上执行此操作？

我将不胜感激有关此的任何指示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:29:41.713

您可以将[objcopy](http://sourceware.org/binutils/docs/binutils/objcopy.html)与[cygwin一起使用，或者从](http://www.cygwin.com/)[MinGW](http://sourceforge.net/projects/mingw/files/MinGW/Base/binutils)下载本机 Windows 二进制文件。

# java - 基于 Java 的适配器 - 找不到返回值

> ID：15877718
> 
> 赞同：1
> 
> 时间：2013-04-08T11:18:54.960
> 
> 标签：java, ibm-mobilefirst

我在 worklight 中使用基于 java 的适配器。我有一个返回字符串值的方法。我可以调用该函数，结果将转到适配器中的成功处理程序，但我无法找到有关返回值的任何信息。我在响应 JSON 中的任何地方都看不到返回的字符串。谁能帮我这个？

这是我的响应 JSON：

> {"status":200,"invocationContext":null,"invocationResult":{"responseID":"16","isSuccessful":true}}

当我在上执行“调用适配器程序”时，我已经看到以下示例 [http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/docs/Module_05_5_-_Using_Java_in_Adapters.pdf](http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/docs/Module_05_5_-_Using_Java_in_Adapters.pdf)代码示例，我得到了这个结果。

> { "isSuccessful": true, "result": -9 } 其中**result**是适配器中 java 方法的返回值。

但是当我为我的应用程序做同样的事情时，我得到以下信息

> { "isSuccessful": true }

**Java-adapter.impl 代码**

> 函数 getXML() { 返回 {结果：com.worklight.javaCode.FileIOPlugin.getXML() }; }

**Java 类方法**

> 公共类 FileIOPlugin { public static String getXML() { return "SUCCESS"; } }

```
function getXML()
{
var invocationData ={
adapter: 'JavaAdapter',
procedure: 'getXML'
};

WL.Client.invokeProcedure(invocationData,{
onSuccess: successHandler,
onFailure: failureHandler
)};

 function successHandler(data) {alert(JSON.stringify(data));}
 function failureHandler(data) {alert("Error to get data");} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:45:17.070

return 必须是一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T18:33:10.673

我尝试在最近发布的 Worklight 6.0 中重现您的问题，并且在复制和粘贴您的代码后，我发现一切正常。

我所做的唯一更改是在用于调用适配器方法的 invocationData 对象上添加空参数。

这是我的确切代码：
**FileIOPlugin.java**（在 server/conf 下，在包 com.worklight.javacode 中）

```
package com.worklight.javacode;

public class FileIOPlugin {
    public static String getXML() {
        return "SUCCESS";
    }
} 
```

**JavaAdapter.xml**（HTTP 适配器定义，在适配器文件夹下）

```
<?xml version="1.0" encoding="UTF-8"?>
<wl:adapter name="JavaAdapter"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:wl="http://www.worklight.com/integration"
    xmlns:http="http://www.worklight.com/integration/http">

    <displayName>JavaAdapter</displayName>
    <description>JavaAdapter</description>
    <connectivity>
        <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
            <protocol>http</protocol>
            <domain>rss.cnn.com</domain>
            <port>80</port> 
            <!-- Following properties used by adapter's key manager for choosing specific certificate from key store  
            <sslCertificateAlias></sslCertificateAlias> 
            <sslCertificatePassword></sslCertificatePassword>
            -->     
        </connectionPolicy>
        <loadConstraints maxConcurrentConnectionsPerNode="2" />
    </connectivity>

    <procedure name="getXML"/>  
</wl:adapter> 
```

**JavaAdapter-impl.js**（JavaAdapter.xml 旁边）

```
function getXML() {
    return {
        result : com.worklight.javacode.FileIOPlugin.getXML()
    };
} 
```

> 我将我的应用程序称为 javaAdapterApp，因此这些文件名是：

**javaAdapterApp.js**（在 apps/javaAdapterApp/common/js 下）

```
function wlCommonInit(){
}

function getXML() {
    var invocationData = {
        adapter : 'JavaAdapter',
        procedure : 'getXML',
        parameters : []
    };

    WL.Client.invokeProcedure(invocationData, {
        onSuccess : successHandler,
        onFailure : failureHandler
    });
}

function successHandler(data) {
    alert(JSON.stringify(data));
}
function failureHandler(data) {
    alert("Error to get data");
} 
```

最后 **是 javaAdapterApp.html**（在 apps/javaAdapterApp/common 下）

```
<!DOCTYPE HTML>
<html>
        <head>
            <meta charset="UTF-8">
            <title>javaAdapterApp</title>
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
            <link rel="shortcut icon" href="images/favicon.png">
            <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
            <link rel="stylesheet" href="css/javaAdapterApp.css">
            <script>window.$ = window.jQuery = WLJQ;</script>
        </head>
        <body id="content" style="display: none;">
            <button onClick="getXML()">GET XML</button>

            <script src="js/initOptions.js"></script>
            <script src="js/javaAdapterApp.js"></script>
            <script src="js/messages.js"></script>
        </body>
</html> 
```

我在测试服务器上运行它，成功处理程序中 JSON.stringify(data) 的结果如下所示：

> {"status":200,"invocationContext":null,"invocationResult":{"responseID":"9","re​​sult":"SUCCESS","isSuccessful":true}}

**在invocationResult.result**中有您正在寻找的“SUCCESS”字符串。

希望这有助于
奥兰多

# java - 如何在同一构建目录中的netbeans中设置文件路径？

> ID：15877721
> 
> 赞同：0
> 
> 时间：2013-04-08T11:19:06.693
> 
> 标签：java, file, netbeans, path, stream

我想为我要读取的文件设置路径，而不必指定根目录或整个路径。像这样：`File file = new File("Text01.txt");` 或者`Path file = Paths.get("Accounts.txt");` 代替：`Path file = Paths.get("C:\\Users\\B_HITMAN\\Documents\\NetBeansProjects\\BankAccountGUI\\src\\bankaccountgui\\Accounts.txt");` 我什至尝试将文件放在netbeans的构建目录中，但它也不起作用。它显示了这条消息：

```
Exception in thread "main" java.io.FileNotFoundException: Text01.txt (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:138)
at assignment01.Assignment01.main(Assignment01.java:19)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:21:37.803

将您的文件放在`BankAccountGUI`目录中（项目的根目录）。然后尝试像这样访问文件：-

```
File file = new File("Text01.txt"); 
```

**注意：-**您的文件应与`src`文件夹处于同一级别。

# c - 如何在函数中获取我的主机名？

> ID：15877723
> 
> 赞同：0
> 
> 时间：2013-04-08T11:19:11.237
> 
> 标签：c, hostname

unix`hostname`程序为我提供了一种非常简单的方法来获取我的“真实”主机名（不是 localhost。例如，对我来说它是 current `unknown74e5[...]df7.att.net`）。但是如何在我自己的代码中使用 C 系统调用来做到这一点呢？我想得到一个`char *`里面有这个字符串的，这样我就可以把它传递给`gethostbyname`类似的东西。

在此期间，我还想知道如何使用 UNIX 系统调用而不是依赖程序（或更糟糕的是 whatismyip.com）来获取我的 IP 地址......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:23:00.510

`gethostname(2)`是为程序提供动力的 POSIX 授权的 C 库函数`hostname`：

```
 int gethostname(char *name, size_t len); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:21:33.613

您可以使用[`uname(2)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/uname.html)它来获取[`struct utsname`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_utsname.h.html)信息。你有兴趣`nodename`

```
struct utsname {
    char sysname[];    /* Operating system name (e.g., "Linux") */
    char nodename[];   /* Name within "some implementation-defined network". */ 
```

* * *

POSIX 也提到了函数和结构，并且几乎在所有平台上都可用`uname`。`utsname`正如 Thomas 在评论中提到的，glibc 实现`gethostname`为对`uname(2)`.

# apache - HTACCESS 除了指定目录

> ID：15877724
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:19:15.917
> 
> 标签：apache, .htaccess, redirect, directory

我目前有一个`RewriteRule`设置，以便域之后的任何内容都作为变量传递给 pages.php

```
RewriteEngine on
RewriteRule ^([^/\.]+)/?$ pages.php?alias=$1 
```

因此，例如，`http://www.example.com/contactus`显示其中的内容`http://www.example.com/pages.php?alias=contactus`工作正常。

是否可以继续上述操作，但排除应该“正常”运行的特定目录。

所以，`http://www.example.com/shop`实际上去`http://www.example.com/shop`并且没有被重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:40:27.530

如果你想要它这样规则不会被应用到*任何*现有的文件或目录，你会想要：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/?$ pages.php?alias=$1 
```

如果你想要它，那么规则*只*忽略`shop`目录，那么：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/shop
RewriteRule ^([^/\.]+)/?$ pages.php?alias=$1 
```

# intuit-partner-platform - Intuit Anywhere .net 示例

> ID：15877735
> 
> 赞同：1
> 
> 时间：2013-04-08T11:19:36.940
> 
> 标签：intuit-partner-platform

由于某种原因，我无法下载[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0030_Integrate_your_app/0030_Signing_Into_and_out_of_Intuit_From_Within_Your_App/Sign-in/Implement_SSO_and_OpenID_in_Your_App提供的任何 .net/java 示例](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0030_Integrate_your_app/0030_Signing_Into_and_out_of_Intuit_From_Within_Your_App/Sign-in/Implement_SSO_and_OpenID_in_Your_App)

是 code.intuit.com 坏了还是什么？我已经尝试了几台机器和浏览器，但连接无法连接到该站点。

否则，是否有任何好的 asp.net 示例（最好是 mvc）。我找到了那些 [https://github.com/IntuitDeveloperRelations/IPP_Sample_Code](https://github.com/IntuitDeveloperRelations/IPP_Sample_Code)但没有我希望的那么多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:42:41.827

所以官方示例现在在[https://github.com/IntuitDeveloperRelations/IPP_Sample_Code](https://github.com/IntuitDeveloperRelations/IPP_Sample_Code)

有一个 Web 表单示例，但我从 Intuit 收到一条消息，说 mvc 示例应该很快就会提供。

# ruby-on-rails - 无法连接到 heroku 的 postgres

> ID：15877736
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:19:38.520
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku

这是我得到的错误

```
 2013-04-08T11:14:02+00:00 app[web.1]:  from /app/config.ru:3:in `block in <main>'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands/server.rb:70:in `start'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands/server.rb:46:in `app'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-04-08T11:14:02+00:00 app[web.1]:   from script/rails:6:in `require'
2013-04-08T11:14:02+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-04-08T11:14:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-04-08T11:14:04+00:00 heroku[web.1]: Process exited with status 1
2013-04-08T11:14:04+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-08T11:14:25+00:00 heroku[api]: Release v18 created by email123@gmail.com
2013-04-08T11:14:25+00:00 heroku[api]: Deploy 1e1f3c4 by email123@gmail.com
2013-04-08T11:14:25+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-08T11:14:26+00:00 heroku[slugc]: Slug compilation finished
2013-04-08T11:14:28+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 11206`
2013-04-08T11:14:31+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-08T11:14:31+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-08T11:14:32+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-04-08T11:14:32+00:00 app[web.1]: => Rails 3.2.13 application starting in production on http://0.0.0.0:11206
2013-04-08T11:14:32+00:00 app[web.1]: => Booting WEBrick
2013-04-08T11:14:32+00:00 app[web.1]: => Call with -d to detach
2013-04-08T11:14:32+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
2013-04-08T11:14:32+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `initialize': FATAL:  role "ctvgjnlklcweaz" is not permitted to log in (PG::Error)
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `n
ew'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
2013-04-08T11:14:32+00:00 app[web.1]: Exiting
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:324:in `initialize'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:418:in `_run__1840128634652434605__prepare__2621832742962076453__callbacks'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `connect'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/model_schema.rb:308:in `clear_cache!'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-04-08T11:14:32+00:00 app[web.1]:   from script/rails:6:in `require'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands/server.rb:70:in `start'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands/server.rb:46:in `app'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/railtie.rb:104:in `block (2 levels) in <class:Railtie>'
2013-04-08T11:14:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
2013-04-08T11:14:32+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-04-08T11:14:34+00:00 heroku[web.1]: Process exited with status 1
2013-04-08T11:14:34+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-08T11:14:35+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=my_host.org fwd="223.206.224.25" dyno= connect= service= status=503 bytes=
2013-04-08T11:14:36+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=my_host.org fwd="223.206.224.25" dyno= connect= service= status=503 bytes= 
```

**宝石文件**

```
source 'https://rubygems.org'

ruby '1.9.3'
gem 'rails', '3.2.13'
gem 'jquery-rails'
gem 'haml-rails'
gem 'devise'
gem 'bcrypt-ruby'
gem 'curb'
gem 'nokogiri'
gem 'pg'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  # gem 'therubyracer', :platforms => :ruby
  gem 'twitter-bootstrap-rails'
  gem 'uglifier'
end

group :development do
  gem "pry"
  gem "pry-nav"
end 
```

**数据库.yml**

```
development:
  adapter: postgresql
  database: my_db123
  encoding: unicode
  pool: 5
  port: 5432
  host: localhost
  timeout: 5000
  username: postgres
  password: 1234a

test: 
```

在本地主机上它运行良好。我什至根本不使用 db。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:28:58.673

# vb.net - 刷新表单时防止在数据库中插入重复记录

> ID：15877738
> 
> 赞同：1
> 
> 时间：2013-04-08T11:19:40.160
> 
> 标签：vb.net, c#-4.0

我有一个小项目，它有一个表格，那个表格包含 5 个文本框。当我单击提交按钮时，网格视图中添加了一个新条目。

它工作正常，但问题是当我手动刷新页面时，使用相同的数据在数据库中进行双重输入。如何防止这种情况？

提前致谢

# spring - Spring集成消息处理程序：ActiveMQTextMessage

> ID：15877741
> 
> 赞同：0
> 
> 时间：2013-04-08T11:19:46.833
> 
> 标签：spring, jdbc, integration, activemq, serializable

我在 spring-int 聚合器组件中使用 jdbc-store 时遇到问题。

我的流程是这样的：

ActiveMQ -> 聚合器 -> jdbc-message-store -> ftp

但是在处理消息时，我面临 java.io.NotSerializableException，因为 ActiveMQTextMessage 不可序列化。

当我使用 simpleMessageStore （在内存中）时，这个解决方案正在工作，但我现在无法让它工作。

我是否需要创建自己的 MessageHandler 实现以将 ActiveMQTextMessage 转换为正确的可序列化消息，还是我做错了什么？

谢谢。

```
<int-jms:message-driven-channel-adapter id="inputQueueAdapter" 
                        channel="mqChannel"
                        max-concurrent-consumers="3" 
                        cache-level="3"
                        extract-payload="true"
                        connection-factory="jmsConnectionFactory"
                        destination-name="test.xdr.queue"/>

<int:aggregator         id="XDRAggegator"
                        ref="xdrAggregator"
                        input-channel="mqChannel"
                        output-channel="publishChannel"
                        message-store="jdbc-messageStore"
                />

<int-jdbc:message-store id="jdbc-messageStore" data-source="dataSource"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:38:03.990

你确定你有`extract-payload="true"`这里显示的吗？

如果为假，则 JMS 消息本身就是有效负载，而如果为真，则使用消息转换器进行转换（例如，将 JmsTextMessage 转换为字符串）。

打开`DEBUG`日志记录并检查`mqChannel`.

# javascript - HTML 标记 does not work after being moved in DOM using appendChild In the following example the flash in my HTML would not show after moving it's parent element in DOM. I use appendChild on enclosing div o 问问题 问问题 2013-04-08T11:19:56.837 345 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. In the following example the flash in my HTML would not show after moving it's parent element in DOM. I use appendChild on enclosing div of my object element to move it somewhere else in the DOM hierarchy, but after the move is complete the containing flash would not show. I get this error in IE 10 and firefox, in Chrome there seems to be no problem. This error happened in much larger project, but I managed to distill it to the following little example. <html> <head> <script> window.onload = function() { var copy = document.getElementById("s"); document.getElementById("newparent").appendChild(copy); //if I comment out this line, example works } </script> </head> <body> <div id="newparent"> <!-- here will the object be appended --> </div> <div id="s"> <object width="50%" height="50%" data="http://www.w3schools.com/tags/helloworld.swf">SWF Not shown</object> </div> </body> </html> If I comment out the second line of my onload function, the flash shows properly (but it is not moved around). I am not able to google anything. Perhaps I am not able to describe my problem, I am pretty new to HTML. Thanks in advice. OK, so thanks to you guys, I had an idea of what to look for and I stumbled upon this article. The problem I have seems to be that for some ?security? reasons the flash would not load after being moved. I devised this dirty workaround, simply I force browser to parse and recalculate the object tag. Is it so? I hope I understand well what am I doing. <html> <head> <script> window.onload = function() { var copy = document.getElementById("s"); document.getElementById("newparent").appendChild(copy); copy.innerHTML = copy.innerHTML; //dirty workaround } </script> </head> <body> <div id="newparent"> <!-- here will the object be appended --> </div> <div id="s"> <object width="50%" height="50%" data="http://www.w3schools.com/tags/helloworld.swf">SWF Not shown</object> </div> </body> </html> javascripthtmlflash 4 1 回答 1 This answer is useful 0 好的，多亏了你们，我知道要寻找什么，我偶然发现了这篇文章。 我遇到的问题似乎是一些？安全？移动后闪光灯无法加载的原因。我设计了这个肮脏recalculate的解决方法，只是强制浏览器解析和object标记。是这样吗？我希望我能很好地理解我在做什么。 <html> <head> <script> window.onload = function() { var copy = document.getElementById("s"); document.getElementById("newparent").appendChild(copy); copy.innerHTML = copy.innerHTML; //dirty workaround } </script> </head> <body> <div id="newparent"> <!-- here will the object be appended --> </div> <div id="s"> <object width="50%" height="50%" data="http://www.w3schools.com/tags/helloworld.swf">SWF Not shown</object> </div> </body> </html> 于 2013-04-08T13:29:19.577 回答 Related 1 firefox - 无需重启即可更新 Firefox Addon SDK 扩展文件 1 sql - SQL Server 2005 删除查询慢 1 php - Handlebar 通过带有子数组的 json 迭代/循环 1 export-to-excel - 将数据导出到服务器端的多个 excel 文件 1 php - 仅允许 POST 请求并使用 .htaccess 拒绝所有其他 REQUEST_METHOD 1 django - 在 django 中，我如何同时订购多个“儿童”模型 1 php - ImageMagick 多次转换同一图像？ 1 api - 如何使用 YouTube API 获取 YouTube 精选视频 URL？ 4 c# - x：在用户控件库中找不到类型 2 javascript - ES5 | 何时使用 null 何时使用 undefined Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15877743
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, html, flash

In the following example the flash in my HTML would not show after moving it's parent element in DOM. I use `appendChild` on enclosing `div` of my `object` element to move it somewhere else in the DOM hierarchy, but after the move is complete the containing flash would not show.

I get this error in `IE 10` and `firefox`, in `Chrome` there seems to be no problem.

This error happened in much larger project, but I managed to distill it to the following little example.

```
<html>
<head>
<script>
  window.onload = function() {
     var copy = document.getElementById("s");
     document.getElementById("newparent").appendChild(copy); //if I comment out this line, example works
  }
</script>
</head>

<body>
  <div id="newparent"> <!-- here will the object be appended -->
  </div>
  <div id="s">
    <object width="50%" height="50%" data="http://www.w3schools.com/tags/helloworld.swf">SWF Not shown</object>
  </div>
</body>
</html> 
```

If I comment out the second line of my `onload` function, the flash shows properly (but it is not moved around). I am not able to google anything. Perhaps I am not able to describe my problem, I am pretty new to HTML. Thanks in advice.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:29:19.577

好的，多亏了你们，我知道要寻找什么，我偶然发现了[这篇](http://www.donatofurlani.it/category/programming/34/js_DOM_Flash_InternetExplorer)文章。

我遇到的问题似乎是一些？安全？移动后闪光灯无法加载的原因。我设计了这个肮脏`recalculate`的解决方法，只是强制浏览器解析和`object`标记。是这样吗？我希望我能很好地理解我在做什么。

```
<html>
<head>
<script>
  window.onload = function() {
     var copy = document.getElementById("s");
     document.getElementById("newparent").appendChild(copy);
     copy.innerHTML = copy.innerHTML; //dirty workaround
  }
</script>
</head>

<body>
  <div id="newparent"> <!-- here will the object be appended -->
  </div>
  <div id="s">
    <object width="50%" height="50%" data="http://www.w3schools.com/tags/helloworld.swf">SWF Not shown</object>
  </div>
</body>
</html> 
```

# java - Selenium Webdriver - Debian Lenny 上的 FirefoxDriver 问题（错误无显示）

> ID：15877746
> 
> 赞同：6
> 
> 时间：2013-04-08T11:20:07.930
> 
> 标签：java, selenium, selenium-webdriver

我正在使用 Selenium 测试我的网站，它使用 Firefox 打开一个 URL，登录并在页面上执行一些操作，然后注销并关闭 Firefox。这一切都在 Windows 7 上运行良好。代码以：

```
WebDriver driver = new FirefoxDriver();
driver.get(URL); 
```

现在我将我的 jar 部署在运行 Debian lenny 的 linux 盒子中，它上面有 iceweasel。一个 cron 作业启动程序，该程序在尝试打开 Firefox 时抛出以下错误：

> org.openqa.selenium.firefox.NotConnectedException：45000 毫秒后无法连接到端口 7055 上的主机 127.0.0.1。Firefox 控制台输出：错误：无法打开显示：：0 错误：无法打开显示：：0
> 
> 在 org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:106) 在 org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:244) 在 org.openqa.selenium.remote.RemoteWebDriver .(RemoteWebDriver.java:110) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:190) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:183) 在 org.openqa.selenium .firefox.FirefoxDriver.(FirefoxDriver.java:179) at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:92) at auth.Authenticator.authenticate(Authenticator.java:15) at reader.ReaderThread.run( ReaderThread.java:67) org.openqa.selenium.WebDriverException: 无法连接到端口 7055 上的二进制 FirefoxBinary(/usr/bin/firefox)；过程输出如下：错误：
> 
> 构建信息：版本：'未知'，修订：'未知'，时间：'未知'系统信息：os.name：'Linux'，os.arch：'i386'，os.version：'2.6.26-2- 686', java.version: '1.6.0_26' 驱动程序信息: driver.version: FirefoxDriver at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:118) at org.openqa.selenium.firefox。 FirefoxDriver.startClient(FirefoxDriver.java:244) 在 org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:110) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:190) 在 org.openqa .selenium.firefox.FirefoxDriver.(FirefoxDriver.java:183) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:179) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:92) 在 auth.Authenticator.authenticate(Authenticator.java:15) 在 reader.ReaderThread.run(ReaderThread.java:67)

我的 Xvfb 在框中运行正常，并且我已将变量 DISPLAY 设置为 0。我四处搜索，但没有一个解决方案（如设置 env 变量）起作用。

XVfb 不应该作为浏览器启动并执行必要操作的非图形环境工作吗？是什么阻止它启动？

我正在使用最新的 Selenium 版本 2.31 和 Firefox 3.0.6 Iceweasel。

**编辑：**更新到 Firefox 14 并且仍然看到同样的问题。我什至将超时限制提高到 60 秒。

driver.manage().timeouts().pageLoadTimeout(60, TimeUnit.SECONDS);

**已解决：**通过使用 xvfb 包装器运行它，xvfb-run 如下所示：

```
export DISPLAY=:0.0
xvfb-run --auto-servernum --server-num=0 nohup java - jar X.jar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:32:35.570

通过这样做解决：

```
export DISPLAY=:0.0 xvfb-run --auto-servernum --server-num=0 nohup java - jar X.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T04:01:17.080

我已经看到了类似的问题，这仅适用于 firefox，对于其他浏览器，一切正常，我在 Chrome 上尝试过。这是解决方案1.检查FF的版本，如果是最新的，则选择较低版本的FF。建议更稳定。2\. 你应该总是尝试从 selenium 网站获取最新的 selenium 二进制文件。有关更多详细信息，请尝试此解决方案：http: [//khyatisehgal.wordpress.com/2014/09/09/at-org-openqa-selenium-firefox-internal-newprofileextensionconnection-startnewprofileextensionconnection-java106/](http://khyatisehgal.wordpress.com/2014/09/09/at-org-openqa-selenium-firefox-internal-newprofileextensionconnection-startnewprofileextensionconnection-java106/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T12:12:50.193

尝试更新您的网络驱动程序或降级您的 Firefox。此问题与 selenium 服务器无法连接到您的 Firefox 有关。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-26T12:59:36.817

升级到最新的 Selenium jar 后，此问题得到解决。

# java - 如何从属性文件中获取相对路径

> ID：15877750
> 
> 赞同：2
> 
> 时间：2013-04-08T11:20:17.437
> 
> 标签：java, path, log4j, relative-path

我的应用程序中有一个属性文件，我将绝对路径作为键和值现在我想在我的 log4j.xml 文件中获取此路径以用于文件附加程序。但我无法从那里获取路径，如何在系统的设置属性中设置此属性文件。

```
#properties File

folderPrefix = D:\\MyProject

# path for logfiles

logfilePath = ${folderPrefix}/Framework/logs

<appender name="allLog" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${logfilePath}/log.log" />
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                value="%-5p - %m%n [%c:%M] (%F:%L)%n" />
        </layout> 
    </appender> 
```

# c# - 两个队列为单个端点提供数据

> ID：15877757
> 
> 赞同：0
> 
> 时间：2013-04-08T11:20:43.480
> 
> 标签：c#, .net, thread-safety, fifo

假设我有两个队列，其中包含要发送到端点的相似消息类型。其中一个队列（队列 A）具有最高优先级，因此必须始终首先发送其消息。第二个队列（队列 B）中的消息具有较低的优先级，只能在队列 A 为空时发送。我需要编写一些包含这两个队列的代码，并根据上述逻辑发送它们的内容。我假设我应该使用一个新线程来执行此操作，以便在清空队列以及等待新消息到达时系统不会挂起。我想知道，这有什么好的模式吗？我应该使用 C#“队列”类型吗？关于不做什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:33:21.257

[ConcurrentQueue<T> 类](http://msdn.microsoft.com/en-us/library/dd267265.aspx)提供队列的线程安全实现。您可以将两个实例粘合在一起以形成您的优先级队列并实现[IProducerConsumerCollection<T> 接口](http://msdn.microsoft.com/en-us/library/dd287147.aspx)，以便将其包装在[BlockingCollection<T> 类](http://msdn.microsoft.com/en-us/library/dd267312.aspx)中。然后任何线程都可以将项目添加到队列中，并且一个线程使用[GetConsumingEnumerable 方法](http://msdn.microsoft.com/en-us/library/dd287186.aspx)消耗这些项目。

```
enum Priority
{
    Low,
    High,
} 
```

```
struct Prioritized<T>
{
    public Priority Priority;
    public T Item;
} 
```

```
class PriorityQueue<T> : IProducerConsumerCollection<Prioritized<T>>
{
    private readonly ConcurrentQueue<T> low;
    private readonly ConcurrentQueue<T> high;

    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:43:19.227

将 a[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)用于您的队列，并用 a 支持它[`ConcurrentPriorityQueue<T>`](http://code.msdn.microsoft.com/Samples-for-Parallel-b4b76364/sourcecode?fileId=44488&pathId=1696822056)

您将创建您的`ConcurrentPriorityQueue`并将其传递[给`BlockingCollection`接受`IProducerConsumerCollection`](http://msdn.microsoft.com/en-us/library/dd287133.aspx)

那么无论生产者线程以何种顺序添加不同优先级的工作项，消费者线程都会先移除高优先级的项目。

# php - 如何比较表格并找出差异

> ID：15877758
> 
> 赞同：0
> 
> 时间：2013-04-08T11:20:45.573
> 
> 标签：php, mysql

我有一些问题要比较我的两个表。通常我会展示我如何解决问题的尝试，但在这里我不知道该怎么做。通常，我在 php.ini 中执行此操作。所以我从 2 个表中获取所有信息，然后进行比较。但我想在 MySQL 中做到这一点。我希望你能帮忙。

第一个表是我的交易表。这是人们在餐馆用卡的地方。

第二张桌子是我的预订桌。这是人们在餐厅预订的地方。

我想比较这些表，这样我就可以找到那些没有使用预订的人

事务 mySQL

```
SELECT t.*, em.* FROM transactions as t
  left join exp_members as em on (t.cardid-10000000 = em.member_id) 
  left JOIN exp_member_data emd on em.member_id = emd.member_id ORDER BY t.created DESC 
```

交易表。

```
Trans_ID     TransactionTime         Name            Restaurant 
1852         2013-04-08 12:45:21     Christian       La Canton
1851         2013-04-08 12:41:00     Zaz             Parken 
```

预订 mySQL

```
SELECT b.* from exp_menucard_booking as b; 
```

预订表：

```
ID      BookingTime          Name            NumberOfPeople  Restaurant 
270     2013-04-09 14:45:00  Christian       2               La Canton
269     2013-04-08 12:17:00  Toby            4               La Raz 
```

如您所见，预订表中的托比没有使用他的卡（交易表）。我怎样才能让他离开我的餐桌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:30:23.030

如果您想选择所有已经预订的人（预订表中有一个条目）但在事务表中没有条目，您可以尝试以下查询：

```
SELECT * 
FROM `Booking` B 
WHERE NOT EXISTS (
    SELECT * 
    FROM `Transaction` T 
    WHERE T.name = B.name
); 
```

`User_ID`顺便说一句，如果您使用一些而不是`name`识别人员会更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:32:58.260

这是您可以选择所有未使用预订的记录的方式。它被称为排除左连接或左排除连接。[http://www.magecorner.com/mysql-joins-explained/](http://www.magecorner.com/mysql-joins-explained/)

我不确定这是否会比 WHERE NOT EXISTS 更快，但考虑到它有一个子查询，我认为这会更快。

```
SELECT emb.*
FROM   exp_menucard_booking emb
LEFT JOIN transactions      t
  ON (
    t.Name       = emb.Name AND
    t.Restaurant = emb.Restaurant
  )
WHERE t.Trans_ID IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:43:53.767

```
SELECT * FROM Booking WHERE NAME NOT IN (SELECT NAME FROM Transaction ); 
```

# maven - 通过命令行执行特定版本的 Maven 插件

> ID：15877762
> 
> 赞同：9
> 
> 时间：2013-04-08T11:20:57.697
> 
> 标签：maven, maven-3

如果我有（例如）同一个 Maven 插件的 2 个版本 -`versions-maven-plugin`例如。我的存储库中已经有 1.0 和 2.0 版本。当我执行以下命令时，它看起来像是执行了 1.0 版本：

> mvn -e 版本：显示插件更新

如何明确指定使用 2.0 版本？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-08T18:57:56.563

简单的解决方案是定义 groupId/artifactId，当然还有如下版本：

```
mvn -e org.codehaus.mojo:versions-maven-plugin:2.0:display-plugin-updates 
```

# joomla - 在 Joomla 中放置自定义类的位置（组件、插件、模块？）

> ID：15877765
> 
> 赞同：0
> 
> 时间：2013-04-08T11:21:03.550
> 
> 标签：joomla, joomla1.5, joomla-component

我是 Joomla 的新手（一个经验丰富的 WP 开发人员），我几乎没有设法将我的头脑围绕在组件和插件上。

问题是，我想包含一个共享组件（一个类），它应该可以从组件和插件中调用。

有任何想法吗？也许是图书馆？在这种情况下，我可以在 Joomla 安装程序[包中捆绑一个库吗？](http://docs.joomla.org/Package)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:32:16.593

`lib_yourlib.xml`如果您在根目录中创建文件并指定：

```
<extension type="library">
<files folder="yourlib"> 
```

它应该像任何软件包一样可以安装，并且`libraries/yourlib`在安装后将被复制。

# java - 测量 Android 应用程序中 Web 服务的性能

> ID：15877768
> 
> 赞同：0
> 
> 时间：2013-04-08T11:21:29.307
> 
> 标签：java, android, performance, web-services

我想`response`测量`web services`. 我有一个使用这些的 Android 应用程序`services`，我想注册 a`request`和 a之间的时间`response`。那些时候有没有任何形式可以做一些事情，比如在文本文件中创建和写入？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:03:25.857

我怀疑您在 Android 应用程序中进行 HTTP 调用。由于这也会导致网络延迟，具体取决于服务器所在的位置、所有中间设备（路由器、网络基础设施等）和技术（3G 与 wifi），这并不是 Web 服务性能的一个很好的指标。

除了请求日志之外，还应在服务器端进行监控，以便查看负载、请求数量、内存使用情况、cpu 使用情况等变量。

具体来说，您可以从您的应用程序中测量的是： - 发送 HTTP 请求和接收设备上的响应之间的延迟。

如果您只对计算延迟感兴趣，您可以获取发出请求时的时间戳，然后用收到响应时的时间戳减去它。您可以使用 System.System.currentTimeMillis() 来获取 MS 中的 UNIX 时间。请参阅：[Java 中的时间测量开销](https://stackoverflow.com/questions/5640409/time-measuring-overhead-in-java)

为了实际测量网络服务的性能，我建议：

1.  在您的网络服务器上运行诸如 JMelody (Tomcat) 之类的监控应用程序
2.  使用 JMeter 等工具模拟许多请求
3.  分析您的算法
4.  检查与处理时间、内存使用等相关的许多变量。

# javascript - 控制按钮的可见性取决于 AjaxToolKit:TabControl 上的活动选项卡

> ID：15877770
> 
> 赞同：0
> 
> 时间：2013-04-08T11:21:36.803
> 
> 标签：javascript, asp.net, tabcontainer

我有一个 ASP.NET 页面，其中包含一个按钮、一个 AjaxToolKit TabControl 和两个 TabPanel。如果选择/激活任何其他选项卡，我希望在选择和禁用选项卡 #0 时启用按钮。

但是，我什至没有正确编译代码。

我的尝试是

```
<asp:Content ID="Foobar" ContentPlaceHolderID="MainContentPlaceHolder" runat="Server">
<script  type="text/javascript">
    function CanSave(sender,e)) {
        var tabContainer = window.$get('<%=tcMain.ClientID%>');
        if (tabContainer != undefined && tabControl != null) {
            tabContainer = tabControl.control;
            document.getElementById('<%=ButtonSave.ClientID %>').disabled = (tabContainer.ActiveTabIndex == 0);
        }
    }
</script> 
    <asp:Button ID="ButtonSave" runat="server" Enabled="false" OnClick="ButtonSave_Click" Text="Save" Width="8.8em" />
    <ajaxToolkit:TabContainer runat="server" ID="tcMain" OnActiveTabChanged="CanSave">
       <ajaxToolkit:TabPanel ID="tpOne" runat="server" HeaderText="One">
         <ContentTemplate>
         ...                    
         </ContentTemplate>
       <ajaxToolkit:TabPanel ID="tpTwo" runat="server" HeaderText="Two">
         <ContentTemplate>
         ...                    
         </ContentTemplate>
    </ajaxToolkit:TabContainer>

</asp:Content> 
```

脚本的东西都是从互联网上收集的。我不得不承认，我对 jscript、ASP.NET 等一无所知，但我必须找到一种方法来切换该按钮的可见性`ButtonSave`。

请给我一些正确方向的提示。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:32:53.880

`OnActiveTabChanged`不是客户端事件。您必须在代码隐藏文件中编写代码才能使其正常工作。请注意，此事件将导致回发，并在更改选项卡时刷新您的页面。

```
protected void tbcRatingMaster_ActiveTabChanged(object sender, EventArgs e)
{
 if (tbcRatingMaster.ActiveTabIndex == 0) //First tab
 {
   ButtonSave.Enabled = false;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:53:20.123

这是我的解决方案。诀窍是使用`OnClientActiveTabChanged`事件。很明显，不是吗？

```
<asp:Content ID="Foobar" ContentPlaceHolderID="MainContentPlaceHolder" runat="Server">
<script  type="text/javascript">
    function CanSave(sender,e)) {
        var tabContainer = window.$get('<%=tcMain.ClientID%>');
        if (tabContainer != undefined && tabControl != null) {
            tabContainer = tabControl.control;
            document.getElementById('<%=ButtonSave.ClientID %>').disabled = (tabContainer.get_activeTabIndex() == 0);
        }
    }
</script> 
    <asp:Button ID="ButtonSave" runat="server" Enabled="false" ... />
    <ajaxToolkit:TabContainer 
       runat="server" 
       ID="tcMain" 
       OnClientActiveTabChanged="CanSave"> 
```

...

# neo4j - Neo4j：锁存储

> ID：15877772
> 
> 赞同：0
> 
> 时间：2013-04-08T11:21:41.437
> 
> 标签：neo4j, spring-data-neo4j

我正在使用存储库方法开发一个基于 Spring Data Neo4j 的项目。问题是我不能同时读取和写入图表（这在我的应用程序中是必需的），否则我会收到此错误。我的 Neo4j 服务器实例没有运行，但我有不同的进程正在尝试使用数据库（即：相同的应用程序上下文以不同的主要方法加载，这可能是问题所在，我不知道）。我习惯了关系数据库，几乎不理解这种行为。哪个是摆脱这个问题的最佳方法？或者，真的有可能吗？

这是我的应用程序上下文文件的一部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:context="http://www.springframework.org/schema/context"
          xmlns:mongo="http://www.springframework.org/schema/data/mongo"
          xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
          xsi:schemaLocation=
          "http://www.springframework.org/schema/context
          http://www.springframework.org/schema/context/spring-context-3.0.xsd
          http://www.springframework.org/schema/data/mongo
          http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
          http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/data/neo4j
          http://www.springframework.org/schema/data/neo4j/spring-neo4j-2.0.xsd">

          <!-- Neo4j -->
          <neo4j:config storeDirectory="/data/production/graph.db"/>
          <neo4j:repositories base-package="org.domain.project.repositories.neo4j"/> 
```

在这种情况下，我可以在我的自定义 neo4j 存储库实现中访问 neo4jOperations 接口并毫无问题地构建查询。另一方面，当前用户有权访问数据文件夹，所以这应该不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:37:09.833

您不能从两个进程写入同一个 Neo4j 数据库。相反，您应该设置一个 Neo4j HA 集群，并使用其中一个集群实例作为 SDN 的嵌入式数据库。复制等将对您的应用程序透明。有关详细信息，请参阅[https://groups.google.com/forum/?fromgroups=#!topic/neo4j/6mxSvhemd8M](https://groups.google.com/forum/?fromgroups=#!topic/neo4j/6mxSvhemd8M)。

# html - VBS：我可以通过它的 tabIndex 和它的 div 位置来定位一个字段吗？

> ID：15877773
> 
> 赞同：0
> 
> 时间：2013-04-08T11:21:41.983
> 
> 标签：html, input, vbscript, tabindex

这里是新手，使用 VBS 帮助将数据输入到 Web 输入表单。将不胜感激任何建议。我经常使用这样的行来根据其名称设置字段的值：

```
IE.Document.All.Item("field1").Value = "test" 
```

但是，我有一组非常尴尬的字段，其**名称**随每条记录而变化。他们的物理位置保持不变（视觉上）；他们的 tabIndexes 保持不变（1,2,3,4），所以我想知道是否有可能做这样的事情：

```
IE.Document.All.getElementByTabIndex(1).Value = "test" 
```

...但我不确定是吗？此外，即使这确实有效，tabIndex1 也会用于同一网页上的另一个字段。然而，我感兴趣的字段都位于一个 div 上。div 的 ID 是“form_div”。所以我试图定位一个位于 div "form_div" 上的字段，它的 tabIndex 是 1 ......你认为这可能吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:44:49.497

所以你有一个设置为 1 的`DIV`元素，`tabIndex`但你不知道它`Name`，`ID`对吗？然后做这样的事情：

```
Set oDivs = IE.Document.getElementsByTagName("div")
Set myDiv = Nothing
For Each od In oDivs
    If od.tabIndex = "1" Then
        Set myDiv = od
        Exit For
    End If
Next
If Not myDiv Is Nothing Then
    'do what needs here...
    MsgBox myDiv.Name
End If 
```

**PS**好吧，我在您的设计中看到了 2 个缺点。

1.  `tabIndex`应该是唯一的。
2.  在 IE 中按名称搜索元素并不是那么完美。如果您的元素只有`Name`而没有，`ID`那么`getElementsByName`将失败。更好地使用`ID`，它甚至可以简化编码：

    ```
    Set myDiv = IE.Document.All.form_div 
    ```

按名称查找它是：

```
Set oDivs = IE.Document.getElementsByTagName("div")
Set myDiv = Nothing
For Each od In oDivs
    If od.Name = "form_div" Then
        Set myDiv = od
        Exit For
    End If
Next 
```

一旦你拥有了元素......

```
If Not myDiv Is Nothing Then
    Set nodes = myDiv.childNodes
    For i = 0 To nodes.Length-1 Step 2
        If nodes(i).tabIndex = "1" Then
            'do what need here...
            nodes(i).Value = nodes(i).tabIndex
            Exit For
        End If
    Next
End If 
```

# extjs - 如何将日期设置为默认时区

> ID：15877777
> 
> 赞同：0
> 
> 时间：2013-04-08T11:21:48.757
> 
> 标签：extjs, timezone

我想将日期设置为默认时区。此时我的日期看起来像这样：2013-04-08T22:00:00 +02:00。我需要将日期设置为 +00:00。

我试图得到我的日期的偏移量，我收到了 -120。是否可以设置时间偏移？有没有更好的解决方案？

有人有想法吗？

我正在使用 EXT JS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:32:55.730

JavaScript 的 Date 对象绑定到计算机本身的时区。无法以编程方式将区域偏移更改为任意值。

将这个功能添加到[Moment.js](http://momentjs.com/)库中正在进行一些工作，但[仍在进行中](https://github.com/timrwood/moment/issues/611)。

如果您只是想以 ISO 格式获取 UTC 时间，您可以使用`.toISOString()`

如果您正在谈论特定于 ExtJS 中的[Ext.Date 对象](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Date)的代码，请编辑您的问题并发布一些示例代码，以便我们更好地了解您在说什么。谢谢。

# javascript - 在 JavaScript 中转义引号的函数

> ID：15877778
> 
> 赞同：12
> 
> 时间：2013-04-08T11:21:49.233
> 
> 标签：javascript, search, escaping, elasticsearch

首先，我没有做太多的 JavaScript 并且是一个完整的新手，现在已经不碍事了。我有一个小问题我试图从我的搜索应用程序中的用户输入中转义引号：

```
function getQString()
{
var query_str = 'q=' + $('input[name=q]').val().trim();
return  query_str;
} 
```

这是作为 gsp 文件中的一个方法完成的，是否有与 JavaScript 中的 .escape() 等效的东西？

这个查询后来被发送到弹性搜索，并且由于引号特别是像 a"b..

我正在使用 ES 0.20.6

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T11:23:54.540

```
query_str = query_str.replace(/"/g, '\\\"'); 
```

..将导致；`"`到`\"`

**或者**

```
query_str = query_str.replace(/"/g, '\\\\\"'); 
```

..将导致；`"`to `\\"`，这将使打印的报价仍然被转义到`\"`。

此代码；

```
var test = 'asdasd " asd a "';

console.log(test.replace(/"/g, '\\\"'));
console.log(test.replace(/"/g, '\\\\\"')); 
```

..输出；

```
asdasd \" asd a \"
asdasd \\" asd a \\" 
```

您可以根据最终解释器读取字符串并将其打印出来的方式来调整替换。

# android - 当 OnClickListener.onClick 中出现 NullPointerException 时 Android 冻结（其他任务无法启动）

> ID：15877784
> 
> 赞同：11
> 
> 时间：2013-04-08T11:22:09.967
> 
> 标签：android, onclick, android-activity, android-anr-dialog

我有一个简单的设置：

*   `CrashHandler`- 一个实现的类`Thread.UncaughtExceptionHandler`；
*   `CrashActivity`- 可以发送用户报告的活动；
*   `MainActivity`- 用户应该与之交互的主应用程序。

`MainActivity`当线程或任何线程中存在未捕获的异常时，`CrashHandler`拦截它并创建一个通知以启动`CrashActivity`：

```
Intent it = new Intent("CrashReporter" + SystemClock.currentThreadTimeMillis());
it.setClass(context, CrashActivity.class);
it.setFlags(it.getFlags() | Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

与此同时，Android 显示“应用程序崩溃”消息，用户单击确定，应用程序关闭，然后用户可能会单击`notification`. 如果`notification`单击 ，则`CrashActivity`启动并显示。

这段代码已经在许多不同的情况下工作了很长时间（主线程崩溃， a`handler`崩溃，后台崩溃`thread`......）。但是，我最近发现，如果在`OnClickListener.onClick`附加`button`到`MainActivity`. 情况如下：

1.  我执行的代码故意抛出`NullPointerException`;
2.  `CrashHandler`拦截它并创建一个`notification`（如图所示）；
3.  Android 不显示任何消息（例如，没有“应用程序崩溃”，应该是可见的）；
4.  被`MainActivity`冻结；
5.  如果用户单击通知以启动`CrashActivity`，则会显示黑屏并且一切都冻结（未显示所需的活动）。

`Logcat`表明启动有超时，甚至在`OnCreate`我的代码之前或任何代码之前：

```
I/ActivityManager(11826): START u0 {act=CrashHandler1196 flg=0x14000000 cmp=mycompany.myapp/.CrashActivity bnds=[0,102][720,230] (has extras)} from pid -1
W/KeyguardViewMediator(11826): verifyUnlock called when not externally disabled
W/ActivityManager(11826): Activity pause timeout for ActivityRecord{41f4d988 u0 mycompany.myapp/.MainActivity}
W/ActivityManager(11826): Launch timeout has expired, giving up wake lock!
W/ActivityManager(11826): Activity idle timeout for ActivityRecord{4225eeb8 u0 mycompany.myapp/.CrashActivity} 
```

*   如果在单击`notification`I kill the app from之前`ADB`，`notification`效果很好。
*   如果在点击之前`notification`我在冻结的应用程序上做了一些点击和手势，几秒钟后我收到一条消息`ANR`：

    ```
     E/ActivityManager(11826): ANR in mycompany.myapp (mycompany.myapp/.MainActivity)
     E/ActivityManager(11826): Reason: keyDispatchingTimedOut
     E/ActivityManager(11826): Load: 0.63 / 0.57 / 0.49 
    ```

*   如果我单击“是，杀死它”，然后单击`notification`，它可以完美运行。

*   如果我在创建通知后添加`System.exit`(-1) `CrashHandler`，应用程序会立即退出并且通知工作正常（不幸的是，我无法在生产中使用此解决方案）。

我有两个问题：

1.  为什么一个`NullPointer exception`in`OnClickListener.onClick`不会导致应用程序崩溃，而是将其与操作系统一起冻结并阻止其他活动启动？
2.  一般来说，如何避免它，或者至少，如何`CrashActivity`在这些条件下开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T22:14:00.583

在没有看到您的代码的情况下，您应该调试您的 CrashHandler 类。JVM 将忽略此中的所有异常

```
void uncaughtException(Thread t, Throwable e) 
```

“此方法引发的任何异常都将被 Java 虚拟机忽略。” （Java 文档）。

我不是说这就是答案，但如果这种方法引发异常，它可能是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-24T05:58:38.223

为什么不能用 [https://developer.android.com/reference/android/os/Process.html#sendSignal(int](https://developer.android.com/reference/android/os/Process.html#sendSignal(int) , int) 杀死自己的应用程序进程？

# jquery - 在动画的 Event() 中调用 Ajax 后加载不工作

> ID：15877789
> 
> 赞同：0
> 
> 时间：2013-04-08T11:22:44.883
> 
> 标签：jquery, ajax, events

我有一个脚本帽子在ajax之后加载所有数据，在那个响应数据上`likeObj('#like'+postid).effect("bounce", {times:1,distance:25},400);`

这将给出 likeObj 不是函数的错误。

我该怎么办，帮帮我。

谢谢

```
 if(response=='OK')
                            {
                                    if(likeval==1)
                                    {
                                        var commentCount=likeobj("#firstPost"+postid+'1').text();
                                        //var newcount=+commentCount + +1;
                                        var  newcount=parseInt(commentCount) + parseInt(1);
                                        //likeobj('#like'+postid).effect("bounce", {times:1,distance:25},400);                                          
                                        likeobj("#firstPost"+postid+'1').html("<img alt='Image' src='images/like_icon.gif'> "+newcount);
                                        likeobj("#ullikesuser_"+user_id+"_"+postid).fadeIn(300, function() { likeobj("#ullikesuser_"+user_id+"_"+postid).append(likeobj("<li><?=getUserProfileImage($_SESSION['user_id'])?></li>").attr('id','lilikesuser_'+user_id+'_'+postid)); });
                                        //likeobj("#ullikesuser_"+user_id+"_"+postid).append(likeobj("<li><?=getUserProfileImage($_SESSION['user_id'])?></li>").attr('id','lilikesuser_'+user_id+'_'+postid));
                                        likeobj("#like"+postid).html(showhtml);
                                    }else{
                                        var commentCount=likeobj("#firstPost"+postid+'1').text();
                                        var  newcount=parseInt(commentCount) - parseInt(1); 
                                        //likeobj('#like'+postid).effect("bounce", {times:1,distance:25},400);
                                        likeobj("#firstPost"+postid+'1').html("<img alt='Image' src='images/like_icon.gif'> "+newcount);
                                        //$(this).fadeOut(500, function() { $(this).remove(); });
                                        likeobj("#lilikesuser_"+user_id+"_"+postid).fadeOut(200, function() { likeobj("#lilikesuser_"+user_id+"_"+postid).remove(); });
                                        likeobj("#like"+postid).html(showhtml);
                                        //likeobj("#like"+postid).html(response);
                                    }
                            } 
```

.

从ajax得到响应后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:32:57.500

看起来您的代码中没有包含 jQuery ui 文件。添加 jQuery UI 并尝试。

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

# delphi - E2251 对“Pos”System.pas 的模糊重载调用（28005）

> ID：15877795
> 
> 赞同：2
> 
> 时间：2013-04-08T11:23:18.633
> 
> 标签：delphi, pascal, delphi-xe3

```
 [dcc32 Error] psystr.pas(249): E2251 Ambiguous overloaded call to 'Pos'
    System.pas(28005): Related method: function Pos(const string; const string; Integer):         Integer;
    System.pas(28165): Related method: function Pos(const WideString; const WideString;     Integer): Integer; 
```

我在以下功能上收到上述错误。我怎样才能解决这个问题？代码是由另一个编码器给我的，但我是一个完全的业余爱好者，所以简单的答案将不胜感激！

```
function ExplodeStr(const AString: WideString; AWordIndex: Integer; AChar: Char): WideString;
var
  Index, Counter: Integer;
begin
  Result  := Trim(AString);
  Counter := 0;
  Index   := Pos(AChar + AChar, Result);
  while Index > 0 do
  begin
    Delete(Result, Index, 1);
    Index := Pos(AChar + AChar, Result);
  end;
  Index := Pos(AChar, Result);
  while ((Counter < AWordIndex) and (Index > 0)) do
  begin
    Delete(Result, 1, Index);
    Index := Pos(AChar, Result);

    Counter := Counter + 1;
  end;
  if (Counter < AWordIndex) then
    Result := '';
  Index    := Pos(AChar, Result);
  if Index > 0 then
    Delete(Result, Index, MaxInt);
end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T11:34:39.747

系统中有 POS 的重载版本，您只需要告诉编译器他必须使用哪个版本，例如通过调用

```
Index := Pos(WideString(AChar + AChar), Result); 
```

# iphone - TapJoy 崩溃 iPhone 应用程序

> ID：15877796
> 
> 赞同：0
> 
> 时间：2013-04-08T11:23:22.697
> 
> 标签：iphone, ios, objective-c, tapjoy

我正在为我的 iPhone 应用程序进行 tapjoy 发布者 SDK 集成。我工作正常，但在更新到最新的 SDK 9.0.3 后，它开始在这条线上崩溃。

```
[TapjoyConnect requestTapjoyConnect:TAPJOY_ID secretKey:TAPJOY_SECRET_KEY]; 
```

**崩溃描述。**

***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 closeButton 的键值编码不兼容。”

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:41:02.097

确保您添加了 TapjoyPublisherLibrary 而不是广告库。

这是[8.x 到 9.x 升级说明](https://knowledge.tapjoy.com/en/integration/8-x-to-9-x-upgrade-guide)。

```
#import "TapjoyConnect.h"

[TapjoyConnect requestTapjoyConnect:TAPJOY_APP_ID secretKey:TAPJOY_APP_SECRECT_KEY];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getFullScreenAd:) name:TJC_FULL_SCREEN_AD_RESPONSE_NOTIFICATION object:nil];

- (void)getFullScreenAd:(NSNotification*)notifyObj
{
    // Displays a full screen ad, showing the current featured app.
    [TapjoyConnect showFullScreenAd];

}

-(void)showTapJoyAds
{
    // This method asks the tapjoy server for the featured app object.
    [TapjoyConnect getFullScreenAd];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:26:53.390

尝试将 iOS 目标更改为另一个版本，或阅读 Tapjoy 规范，了解 iOS 对它的要求。

# perl - perl：有时无法打开文件进行读取

> ID：15877799
> 
> 赞同：0
> 
> 时间：2013-04-08T11:23:42.427
> 
> 标签：perl

如果目录中的文件与某些命名法匹配，则将对其进行处理。

我对以下代码有疑问：

```
if ($fichier =~ /0284\-\d{4}-\w{6}\.0284\.UPDREQ\.\d{4}\.\d{10}/)
{
 my $msg = "Processing file is : $fichier \n";
 Trace($EXP, __FILE__, __LINE__, "$msg");
}
if(!open (FILE, "< $fichier"))
{
 my $cmd = "mv $REP_FLOTS/$fichier $REP_UPDREQ_ARCH/err_$fichier";
 system("$cmd");
}
$lines++ while (<FILE>);
close FILE; 
```

它有时能够打开和阅读内容，有时会失败。我在这段代码中缺少什么？因为它有时工作得很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T11:27:59.980

你为什么不问系统本身出了什么问题？变量`$!`保存上一个系统调用的最后一个错误，所以如果打开失败，只需打印它：

```
if(!open (FILE, "< $fichier"))
{
 warn "unable to open '$fichier' for reading: $!\n";
 my $cmd = "mv $REP_FLOTS/$fichier $REP_UPDREQ_ARCH/err_$fichier";
 system("$cmd");
} 
```

# perl - 如何连接sql server和linux？

> ID：15877801
> 
> 赞同：1
> 
> 时间：2013-04-08T11:23:45.397
> 
> 标签：perl, freetds

每当我运行 Perl 代码时，都会出现以下错误：

```
DBI connect('SQLSERVER','rti_dbuser',...) failed: [unixODBC][Driver Manager]Data source name not found, and no default driver specified (SQL-IM002) at /usr/WINAST/RTI/AGI/M_TEST.pl line 14
Coudn't Connect SQL at /usr/WINAST/RTI/AGI/M_TEST.pl line 14. 
```

配置文件如下：

odbc.ini

```
[SQLSERVER]
description = Asterisk ODBC for SQL SERVER
;driver = FreeTDS 
Driver = /usr/local/lib/libtdsodbc.so
server = 10.2.20.42\APSHCL
Database = RTI
port = 1433
tds_version = 9.0
try domain login = yes
try server login = yes
nt domain = DOMAIN
language = us_english 
```

odbcinst.ini

```
[FreeTDS]
Description = FreeTDS ODBC driver for MSSQL
Driver = /usr/local/lib/libtdsodbc.so
Setup = /usr/local/lib/libtdsS.so
FileUsage = 1 
```

我的代码

```
use DBI;
use Data::Dumper;
use Asterisk::AGI;
my $agi = new Asterisk::AGI;
$first_param  = $ARGV[0];

my $DSN = q/dbi:ODBC:SQLSERVER/;
my $uid = q/username/;
my $pwd = q/password/;

my $DRIVER = "Freetds";
my $dbh = DBI->connect($DSN,$uid,$pwd) or die "Coudn't Connect SQL";
my $servernumber = 2;

my $sql = "EXEC usp_check_black_list '".$first_param."'" ;

my $sth = $dbh->prepare($sql);
$sth->execute();

$return = $sth->fetchrow();
$agi->set_variable('result',$return);
print Dumper($return);
$sth->finish;
$dbh->disconnect; 
```

每当我执行我的 perl 代码时，找不到驱动程序。我已经定义了驱动程序，但它没有使用该驱动程序....

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T01:02:37.787

尝试使用 DBD::Sybase。MSSQL 是 Sybase 代码的一个分支，尽管 YMMV，DBD::Sybase 仍然运行良好。

# jquery - 不可拖动外溢

> ID：15877804
> 
> 赞同：1
> 
> 时间：2013-04-08T11:23:52.427
> 
> 标签：jquery, jquery-ui

我有一个带图像的 div；图像需要可拖动到 div 板。

我的问题是如果有太多图像（所以溢出会显示）图像不能被拖到 div 之外。如果没有溢出，一切都很好，但如果溢出，站点就会失败。

我用：

```
 overflow-y:scroll; 
```

始终保持布局相同，因此总会有溢出。

我怎样才能避免这个溢出问题？

没有溢出：http: [//jsfiddle.net/Z7Ume/1/](http://jsfiddle.net/Z7Ume/1/)

我的溢出示例：http: [//jsfiddle.net/Z7Ume/](http://jsfiddle.net/Z7Ume/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:40:57.650

默认情况下，拖动助手被附加到与可拖动对象相同的容器中。您可以指定`appendTo`选项，它将用作可拖动助手的容器进行拖动。

例子：

```
$(".Item").draggable({
    helper: "clone",
    containment: "#Inhoud",
    revert: "invalid",
    appendTo: "body"
}); 
```

文档：[http ://api.jqueryui.com/draggable/#option-appendTo](http://api.jqueryui.com/draggable/#option-appendTo)

工作小提琴：http: [//jsfiddle.net/Z7Ume/3/](http://jsfiddle.net/Z7Ume/3/)

类似问题：[jQuery Draggable and overflow issue](https://stackoverflow.com/questions/811037/jquery-draggable-and-overflow-issue)

# android - 在 Eclipse 中找到使用 onClick 方法的视图

> ID：15877808
> 
> 赞同：0
> 
> 时间：2013-04-08T11:24:03.383
> 
> 标签：android, xml, eclipse

我有一个`button`用 XML 声明的，它使用`android:onClick="myOnClickMethod"`. 在 Activity 中有`myOnClickMethod(View Button)`.

现在我想知道是否支持一个函数，该函数在 正在使用`Eclipse`的函数中查找并显示，反之亦然。`View``layout``myOnClickMethod(View Button)`

`layout`/的 ID 的大小写相同`view`。

这可以节省一些时间搜索正确的`view`/ `method`。

我认为无论如何都不可能，但我试一试。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T11:28:41.107

不，Eclipse 没有这样的功能。只有在布局设计器属性面板中，才能看到 View 的 onClick 属性。

# javascript - 需要js的基本循环来总结两个字段，因为它们是多个组

> ID：15877810
> 
> 赞同：1
> 
> 时间：2013-04-08T11:24:17.573
> 
> 标签：javascript, arrays

我需要一个基本循环来总结两个字段。**我只是让它为一组工作**，但其他组保持不变。我知道我需要某种数组来解决这个问题，但我无法解决。（*注意，它们是原始项目中的 50 个组，但我只是添加了 2 个*）这是代码：

HTML

```
<label>Value 1:</label><input type="text" name="value1[]" id="txtval1"><br>
<label>Value 2:</label><input type="text" name="value2[]" id="txtval2"><br>
<label>Total:</label><input type="text" name="total[]" id="txttotal"><br><br>
<label>Value 1:</label><input type="text" name="value1[]" id="txtval1"><br>
<label>Value 2:</label><input type="text" name="value2[]" id="txtval2"><br>
<label>Total:</label><input type="text" name="total[]" id="txttotal">
<br><br>
<button type="button" onclick="myFunction(); return false;">Get Total</button> 
```

Javascript

```
<script type="text/javascript">
function myFunction()
{
var val1 = document.getElementById('txtval1').value;
var val2 = document.getElementById('txtval2').value;
var total = document.getElementById('txttotal');
var sum = parseInt(val1) + parseInt(val2);
if (val1.value!='' && val2.value!=''){
total.value='';
total.value = total.value + sum;
}
   }
</script> 
```

我不知道为什么这在我的小提琴上不起作用，但在我的本地机器上起作用。这是[小提琴](http://jsfiddle.net/neqqc/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:39:43.987

我认为给两个元素提供相同的 ID 这是错误的。

您必须为每个元素提供不同的 ID 并将它们传递给。

看看这个`fiddle`：

**[http://jsfiddle.net/83m6e/](http://jsfiddle.net/83m6e/)**

**编辑**：我改变了 option2 的小提琴：

[http://jsfiddle.net/83m6e/3/](http://jsfiddle.net/83m6e/3/)

您也可以将每个段放入一个 div 中，然后不要更改名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:47:22.953

您不能添加数组以添加它们的元素。你必须一件一件地去做。试试这个代码：

```
<html>
 <head>
  <script type="text/javascript">
   function myFunction()
   {
    var count = 3;
    var val1, val2, sum;
    for (var i = 0; i < count; i++)
    {
     val1 = document.getElementById('txtval1_' + i).value;
     val2 = document.getElementById('txtval2_' + i).value;
     sum = parseInt(val1) + parseInt(val2);
     document.getElementById('txttotal_' + i).value = sum;
    }
   }
  </script>
 </head>
 <body>
  <label>Value 1:</label><input type="text" id="txtval1_0"><br>
  <label>Value 2:</label><input type="text" id="txtval2_0"><br>
  <label>Total:</label><input type="text" id="txttotal_0"><br><br>
  <label>Value 1:</label><input type="text" id="txtval1_1"><br>
  <label>Value 2:</label><input type="text" id="txtval2_1"><br>
  <label>Total:</label><input type="text" id="txttotal_1"><br><br>
  <label>Value 1:</label><input type="text" id="txtval1_2"><br>
  <label>Value 2:</label><input type="text" id="txtval2_2"><br>
  <label>Total:</label><input type="text" id="txttotal_2"><br><br>
  <button type="button" onclick="myFunction(); return false;">Get Total</button>
 </body>
</html> 
```

# java - Java：如何使用 RandomAccessFile 将字符串作为字节写入 .txt

> ID：15877811
> 
> 赞同：0
> 
> 时间：2013-04-08T11:24:17.647
> 
> 标签：java, file-io, randomaccessfile

首先，我阅读了很多关于这个问题的信息。但是，它们都不是我的解决方案。我正在尝试从控制台读取字符串并将其作为字节写入 .txt。

我试过 FileWriter/BurfferWriter。但是，例如，我从控制台输入“abcd”，然后我将其设为字节 []。在for循环中，我将它写在txt文件中。这些似乎没问题。但是，当我查看txt文件时，我看到它写得很正常，“abcd”。我期待它被写成[http://s24.postimg.org/uid0tt0g5/byte.png](http://s24.postimg.org/uid0tt0g5/byte.png) 我不希望任何人在他/她打开我的 .txt 文件时阅读它。

然后，我尝试了 RandomAccessFile。在这个时候，我编写了这样的代码：

```
for(int i=0; i<tableName.length(); i++){
    file.writeChar(tableName.charAt(i));
} 
```

但是此时，它将 abcd 写入[http://s14.postimg.org/j1k26qqnx/byte2.png](http://s14.postimg.org/j1k26qqnx/byte2.png)如您所见，abcd 在字节之间。而且正常情况下，abcd只有4个字节，当我写在.txt中时，txt文件变成了8个字节。

这就是问题。我不想在 txt 文件中看到任何字符。

解决办法是什么？谢谢

# java - DOM 中什么是元素，什么不是元素？

> ID：15877812
> 
> 赞同：0
> 
> 时间：2013-04-08T11:24:19.553
> 
> 标签：java, html, dom, jsoup

我正在编写一个代码，它对 DOM 执行一些操作。到目前为止，我认为元素和节点都是相同的。

但是在编写代码时，我知道两者都有一些区别。我读了很多博客，论坛答案。但我并没有真正理解它们的含义。所以请深入解释这些术语并举一些例子。这样我就很清楚了。

提前致谢。寻找您的善意回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:26:36.393

*你经历过这个 - [XML 中的元素和节点有什么区别？](https://stackoverflow.com/questions/132564/whats-the-difference-between-an-element-and-a-node-in-xml)*

节点是 DOM 中的基本数据类型——节点可以包括元素、文档等。

> 根据 DOM，XML 文档中的所有内容都是一个节点。
> 
> DOM 说：
> 
> 整个文档是一个文档节点。每个 XML 元素都是一个元素节点。XML 元素中的文本是文本节点。每个属性都是一个属性节点。评论是评论节点。

来自[w3.org](http://www.w3.org/TR/DOM-Level-3-Core/core.html)：

**[节点](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1950641247)：**

> Node 接口是整个文档对象模型的主要数据类型。它表示文档树中的单个节点。虽然所有实现 Node 接口的对象都公开了处理子级的方法，但并非所有实现 Node 接口的对象都可能有子级。例如，Text 节点可能没有子节点，将子节点添加到此类节点会导致引发 DOMException。

**[元素](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-745549614)：**

> Element 接口表示 HTML 或 XML 文档中的元素。元素可能具有与之关联的属性；由于 Element 接口继承自 Node，因此可以使用通用 Node 接口属性属性来检索元素的所有属性的集合。Element 接口上有一些方法可以按名称检索 Attr 对象或按名称检索属性值。在 XML 中，属性值可能包含实体引用，应检索 Attr 对象以检查表示属性值的可能相当复杂的子树。另一方面，在 HTML 中，所有属性都具有简单的字符串值，因此可以安全地使用直接访问属性值的方法来方便。

另请阅读 - [w3schools 节点类型](http://www.w3schools.com/dom/dom_nodetype.asp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:25:59.840

元素是一种节点，其他包括注释和文本。

的HTML：

```
<p> Example <!-- foo --> Example <span></span> </p> 
```

...将创建一个 HTML P 元素节点，其中包含一个文本节点、一个注释节点、另一个文本非节点和一个 HTML SPAN 元素节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:28:44.647

在 Dom 中，元素扩展了节点的功能。Dom 中的一切都是一个节点。

`interface Element : Node`

节点：

[http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1950641247](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1950641247)

元素：

[http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-745549614](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-745549614)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:50:02.620

Element 是 Node 的一个特例。

# iphone - ScrollView 与 TableView 单元中的分页

> ID：15877815
> 
> 赞同：0
> 
> 时间：2013-04-08T11:24:31.043
> 
> 标签：iphone, ios, scrollview, tableview

我必须创建一个表格视图，其中一个单元格具有启用分页和分页控制的滚动视图。我已经尝试过关注。

我在 IB 中创建了一个 TableView 单元，其中有两件事 1.ScrollView 2.Page 控件和运行时放置在滚动视图每个页面上的一些标签，我已经在普通视图中测试了这个滚动视图和分页控件，它按预期工作。

我在 ScrollViewCell.h 中有以下代码

```
#import <UIKit/UIKit.h>

@interface ScrollViewCell : UITableViewCell<UIScrollViewDelegate>
{
UIPageControl* pageControl;
UIScrollView* scrollView;
BOOL pageControlBeingUsed;
}

@property (nonatomic, retain) IBOutlet UIScrollView* scrollView;
@property (nonatomic, retain) IBOutlet UIPageControl* pageControl;
- (IBAction)changePage;

@end 
```

以及 ScrollViewCell.m 中的以下代码

```
#import "ScrollViewCell.h"

@implementation ScrollViewCell

@synthesize scrollView;
@synthesize pageControl;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString*)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor],    [UIColor blueColor], nil];
    for (int i = 0; i < colors.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [UIColor grayColor];

        [self.scrollView addSubview:subview];

        // add buttons
        CGRect Frame= CGRectMake(frame.origin.x,frame.origin.y,200,50);
        //set your x and y position whatever u want.

        UIButton *Button = [UIButton buttonWithType:UIButtonTypeCustom];
        Button.frame = Frame;

        UIImage *Img = [UIImage imageNamed:@"second.png"];
        [Button setBackgroundImage:Img forState:UIControlStateNormal];

        [scrollView addSubview: Button];

        // add text
        UILabel *label = [[UILabel alloc]    initWithFrame:CGRectMake(frame.origin.x,frame.origin.y+60,200,50)];
        label.textAlignment = UITextAlignmentCenter;
        label.text = @"Here you write your text";
        label.textColor = [UIColor blackColor];

        [scrollView addSubview:label ];
        [subview release];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * colors.count, self.scrollView.frame.size.height);

}
 return self;
}
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];

// Configure the view for the selected state
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
if (!pageControlBeingUsed) {
    // Switch the indicator when more than 50% of the previous/next page isvisible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
}
}
- (IBAction)changePage {
// update the scroll view to the appropriate page
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;

[self.scrollView scrollRectToVisible:frame animated:YES];
pageControlBeingUsed = YES;

}

@end 
```

我在表格视图中加载此单元格，如下所示

```
static NSString *CellIdentifier = @"ScrollViewCell";

ScrollViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[ScrollViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier] autorelease];

}

return cell; 
```

当我运行这个应用程序时，它会显示一个具有所需高度但没有任何内容的空表。我的方法正确吗？如果是，有什么遗漏？

谢谢问候维沙尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:36:54.693

`UIScrollView`您正在尝试添加自定义`UITableViewCell`类本身，我不确定它是否会起作用。

`UITableView`而是在你的课堂上尝试这样`cellForRowAtIndexPath`，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString * CellIdentifier = @"GroupButtonCell";
    CustomCell * cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        NSArray * customcellArray = [[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:self options:nil];
        for(id customcellObject in customcellArray){
            if([customcellObject isKindOfClass: [UITableViewCell class]]){
                cell = (CustomCell *)customcellObject;
                break;
            }
        }
    }

// Customize your UIScrollView here..

    [cell.scrollView setDelegate:self];
    [cell.scrollView setPagingEnabled:YES];

    NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor],[UIColor blueColor], nil];
    cell.scrollView.contentSize = CGSizeMake(cell.scrollView.frame.size.width * colors.count,cell.scrollView.frame.size.height);
    for (int i = 0; i < colors.count; i++) {
        CGRect frame;
        frame.origin.x = cell.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = cell.scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [colors objectAtIndex:i];
        [cell.scrollView addSubview:subview];
    }
    // Configure the cell...

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:41:11.947

在 ScrollViewCell.m 里面的 init 方法中试试这个。

```
 [self.contentView addSubview:scrollView]; 
```

您应该在单元格上添加滚动视图。检查 M 不确定。我没有时间尝试项目。

# scala - Tarjan的强连通分量算法的功能实现

> ID：15877819
> 
> 赞同：18
> 
> 时间：2013-04-08T11:24:41.243
> 
> 标签：scala, clojure, functional-programming, graph-algorithm, tarjans-algorithm

我继续在 Scala 中[实现](https://github.com/pathikrit/scalgos/blob/master/src/main/scala/com/github/pathikrit/scalgos/Graph.scala#L139)了[Tarjan 的 SCC 算法的教科书版本。](http://en.algoritmy.net/article/44220/Tarjans-algorithm)但是，我不喜欢这段代码——它是非常命令式/程序化的，有很多变异状态和簿记索引。该算法是否有更“功能”的版本？我相信命令式算法版本隐藏了算法背后的核心思想，与函数式版本不同。我发现[其他人在使用这个特定算法时遇到了同样的问题](http://clj-me.cgrand.net/2013/03/18/tarjans-strongly-connected-components-algorithm/)，但我无法将他的 Clojure 代码翻译成惯用的 Scala。

注意：如果有人想尝试，我有一个很好的设置，可以生成随机图并[测试你的 SCC 算法与运行 Floyd-Warshall](https://github.com/pathikrit/scalgos/blob/master/src/test/scala/com/github/pathikrit/scalgos/GraphSpec.scala#L82)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T15:23:45.423

请参阅David King 和 John Launchbury[的 Haskell 中的惰性深度优先搜索和线性图算法。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.45.3876)它以函数式风格描述了许多图形算法，包括 SCC。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T21:28:24.100

以下功能性 Scala 代码生成一个映射，该映射为图形的每个节点分配一个代表。每个代表标识一个强连通分量。该代码基于 Tarjan 的强连接组件算法。

为了理解算法，理解`dfs`函数的折叠和契约就足够了。

```
def scc[T](graph:Map[T,Set[T]]): Map[T,T] = {
  //`dfs` finds all strongly connected components below `node`
  //`path` holds the the depth for all nodes above the current one
  //'sccs' holds the representatives found so far; the accumulator
  def dfs(node: T, path: Map[T,Int], sccs: Map[T,T]): Map[T,T] = {
    //returns the earliest encountered node of both arguments
    //for the case both aren't on the path, `old` is returned
    def shallowerNode(old: T,candidate: T): T = 
      (path.get(old),path.get(candidate)) match {
        case (_,None) => old
        case (None,_) => candidate
        case (Some(dOld),Some(dCand)) =>  if(dCand < dOld) candidate else old
      }

    //handle the child nodes
    val children: Set[T] = graph(node)
    //the initially known shallowest back-link is `node` itself
    val (newState,shallowestBackNode) = children.foldLeft((sccs,node)){
      case ((foldedSCCs,shallowest),child) =>
        if(path.contains(child))
          (foldedSCCs, shallowerNode(shallowest,child))
        else {
          val sccWithChildData = dfs(child,path + (node -> path.size),foldedSCCs)
          val shallowestForChild = sccWithChildData(child)
          (sccWithChildData, shallowerNode(shallowest, shallowestForChild))
        }
    }

    newState + (node -> shallowestBackNode)
  }

  //run the above function, so every node gets visited
  graph.keys.foldLeft(Map[T,T]()){ case (sccs,nextNode) =>
    if(sccs.contains(nextNode))
      sccs
    else
      dfs(nextNode,Map(),sccs)
  }
} 
```

我只在维基百科页面上的示例图上测试了代码。

## 与命令式版本的区别

与原始实现相比，我的版本避免显式展开堆栈，而只是使用适当的（非尾）递归函数。堆栈由一个名为的持久映射表示`path`。在我的第一个版本中，我使用了`List`as 堆栈；但这效率较低，因为必须搜索包含元素。

## 效率

该代码*相当*有效。对于每条边，您必须更新和/或访问不可变映射`path`，总成本`O(log|N|)`为`O(|E| log|N|)`. 这与`O(|E|)`命令式版本实现的相反。

## 线性时间实现

Chris Okasaki 的答案中的论文在 Haskell 中提供了一个线性时间解决方案，用于查找强连接组件。他们的实现是基于 Kosaraju 的用于寻找 SCC 的算法，该算法基本上需要两次深度优先遍历。这篇论文的主要贡献似乎是在 Haskell 中实现了一个惰性的线性时间 DFS。

他们实现线性时间解决方案所需的是拥有一组带有`O(1)`单例添加和成员资格测试的集合。这基本上与使此答案中给出的解决方案具有比命令式解决方案更高的复杂性的问题相同。他们使用 Haskell 中的状态线程来解决它，这也可以在 Scala 中完成（参见 Scalaz）。因此，如果愿意让代码变得相当复杂，可以将 Tarjan 的 SCC 算法实现为功能`O(|E|)`版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:56:17.077

看看[https://github.com/jordanlewis/data.union-find](https://github.com/jordanlewis/data.union-find)，该算法的 Clojure 实现。它有点伪装成数据结构，但算法就在那里。当然，它纯粹是功能性的。

# c# - ASP.NET MVC C# Razor 缩小

> ID：15877824
> 
> 赞同：11
> 
> 时间：2013-04-08T11:24:55.437
> 
> 标签：c#, asp.net-mvc, razor

有没有人知道如何从 Razor 引擎输出缩小的 HTML 和 JavaScript，同时保持自定义编码样式？

例如：我想要以下代码：

```
<div
    @if (Model.Name != string.Empty)
        @:id="@Model.Name"
>
</div> 
```

输出为`<div id="DivId"></div>`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T11:49:26.547

查看[http://arranmaclean.wordpress.com/2010/08/10/minify-html-with-net-mvc-actionfilter/](http://arranmaclean.wordpress.com/2010/08/10/minify-html-with-net-mvc-actionfilter/)。有一个从 WhiteSpaces 创建自定义操作过滤器清除 html 的示例

**更新**：上面引用的源代码。

用于删除“空白”的流类

```
using System;
using System.IO;
using System.Text;
using System.Web.Mvc;
using System.Text.RegularExpressions;

namespace RemoveWhiteSpace.ActionFilters
{
    public class WhiteSpaceFilter : Stream
    {

        private Stream _shrink;
        private Func<string, string> _filter;

        public WhiteSpaceFilter(Stream shrink, Func<string, string> filter)
        {
            _shrink = shrink;
            _filter = filter;
        }

        public override bool CanRead { get { return true; } }
        public override bool CanSeek { get { return true; } }
        public override bool CanWrite { get { return true; } }
        public override void Flush() { _shrink.Flush(); }
        public override long Length { get { return 0; } }
        public override long Position { get; set; }
        public override int Read(byte[] buffer, int offset, int count)
        {
            return _shrink.Read(buffer, offset, count);
        }
        public override long Seek(long offset, SeekOrigin origin)
        {
            return _shrink.Seek(offset, origin);
        }
        public override void SetLength(long value)
        {
            _shrink.SetLength(value);
        }
        public override void Close()
        {
            _shrink.Close();
        }

        public override void Write(byte[] buffer, int offset, int count)
        {
            // capture the data and convert to string 
            byte[] data = new byte[count];
            Buffer.BlockCopy(buffer, offset, data, 0, count);
            string s = Encoding.Default.GetString(buffer);

            // filter the string
            s = _filter(s);

            // write the data to stream 
            byte[] outdata = Encoding.Default.GetBytes(s);
            _shrink.Write(outdata, 0, outdata.GetLength(0));
        }
    }
} 
```

`ActionFilter`班级：

```
public class WhitespaceFilterAttribute : ActionFilterAttribute
{

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {

        var request = filterContext.HttpContext.Request;
        var response = filterContext.HttpContext.Response;

        response.Filter = new WhiteSpaceFilter(response.Filter, s =>
                {
                    s = Regex.Replace(s, @"\s+", " ");
                    s = Regex.Replace(s, @"\s*\n\s*", "\n");
                    s = Regex.Replace(s, @"\s*\>\s*\<\s*", "><");
                    s = Regex.Replace(s, @"<!--(.*?)-->", "");   //Remove comments

                    // single-line doctype must be preserved 
                    var firstEndBracketPosition = s.IndexOf(">");
                    if (firstEndBracketPosition >= 0)
                    {
                        s = s.Remove(firstEndBracketPosition, 1);
                        s = s.Insert(firstEndBracketPosition, ">");
                    }
                    return s;
                });

        }

} 
```

最后使用上面的用法：

```
[HandleError]
[WhitespaceFilter]
public class HomeController : Controller
{
     ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T11:31:35.707

我认为没有任何方法可以实现这一目标。为了避免标签汤，我通常更喜欢编写自定义助手：

```
@using(Html.MyDiv(Model.Name))
{
    ... put the contents of the div here
} 
```

下面是自定义助手的样子：

```
public static class HtmlExtensions
{
    private class Div : IDisposable
    {
        private readonly ViewContext context;
        private bool disposed;

        public Div(ViewContext context)
        {
            this.context = context;
        }

        public void Dispose()
        {
            this.Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!this.disposed)
            {
                this.disposed = true;
                context.Writer.Write("</div>");
            }
        }
    }

    public static IDisposable MyDiv(this HtmlHelper html, string id)
    {
        var div = new TagBuilder("div");
        if (!string.IsNullOrEmpty(id))
        {
            div.GenerateId(id);
        }
        html.ViewContext.Writer.Write(div.ToString(TagRenderMode.StartTag));
        return new Div(html.ViewContext);            
    }
} 
```

或者你也可以做一个标签汤：

```
<div@Html.Raw(Model.Name != string.Empty ? string.Format(" id=\"{0}\"", Html.AttributeEncode(Model.Name)) : string.Empty)>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T11:42:12.547

也许您正在寻找[Meleze.Web](http://nuget.org/packages/Meleze.Web)

> Meleze.Web 是一个优化 ASP.NET MVC 3.0 和 MVC 4.0 应用程序的工具箱。
> 它提供了 Razor 视图的 HTML、JS 和 CSS 缩小以及返回页面的缓存。

**Darin Dimitrov**在这里写下它：[ASP.Net MVC Razor Views - Minifying HTML at build time](https://stackoverflow.com/questions/6623348/asp-net-mvc-razor-views-minifying-html-at-build-time)

但我认为启用`gzip`是更好的解决方案，你可以在这里阅读：[Minify HTML output from an ASP.Net MVC Application](https://stackoverflow.com/questions/2104513/minify-html-output-from-an-asp-net-mvc-application)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-20T22:41:49.033

对于任何对此感兴趣的人，我构建了一个可以与 MVC 5 一起使用的简单 HTML 缩小库：

[https://github.com/tompazourek/RazorHtmlMinifier.Mvc5](https://github.com/tompazourek/RazorHtmlMinifier.Mvc5)

它在编译时而不是运行时运行，因此不会增加任何性能开销。缩小非常简单（只需用一个空格替换很多空格）。

即使在缩小的 HTML 之上启用了 GZIP，它[仍然可以减小有效负载大小](https://madskristensen.net/blog/effects-of-gzipping-vs-minifying-html-files/)。

# html - 在 IE9+ 中支持 RGBa

> ID：15877825
> 
> 赞同：0
> 
> 时间：2013-04-08T11:25:04.733
> 
> 标签：html, css, internet-explorer, rgb, rgba

如何调整 RGBa 以在 IE9+ 中工作？

这是我用于 IE 的代码：

```
 background:none;
    -ms-filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#500000ff,endColorstr=#500000ff);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#500000ff,endColorstr=#500000ff);
    zoom: 1; 
```

PS。在 IE8 中工作得很好

# c# - 如何实现 Matlab 的“速率转换”（在 C# 中）

> ID：15877828
> 
> 赞同：1
> 
> 时间：2013-04-08T11:25:10.290
> 
> 标签：c#, matlab, simulink, resampling

我有一个以 10 000 Hz 的速率采样的信号，我需要将其重新采样到 4 000 Hz。在 MATLAB 中，我使用具有三个简单块的 simulink 模型：“From Workspace”，具有指定的采样时间（0.0001 s）->“Rate Transition”，指定的输出采样时间为 0.00025 s ->“To Workspace”来保存输出数据。（一个速率转换块我看到“No Op”）。

我认为可以使用诸如“interp1”之类的Matlab函数来插入数据，但没有运气。我已经尝试了所有方法，但我仍然不知道如何实现“速率转换”具有的相同功能。

我需要用 C# 编写这个数据重采样，我的问题是：这个 simulink 的底层算法是什么，将数据从一个采样频率移植到另一个采样频率？或者我怎样才能得到我需要的效果？

谢谢，KP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:47:39.143

您可以通过这种方式进行插值：

```
% Sampling frequency
Fs1 = 10e3;
Fs2 = 4e3;

% Load your data
y = load('yourdata'); %y=sin(0:1/Fs1:1);
Ttime = (length(y)-1)*(1/Fs1);

% X-Axis
x  = 0:1/Fs1:Ttime;
xi = 0:1/Fs2:Ttime;

% Interpolate
method = 'cubic';
yi = interp1(x,y,xi,method);

% Plot
figure
hold on
scatter(x,y,'b');
scatter(xi,yi,'r');
hold off
legend('Fs=10k','Fs=4k') 
```

主要步骤是执行一维插值的“interp1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:35:21.310

[Rate Transition](http://www.mathworks.se/help/simulink/slref/ratetransition.html)模块似乎没有进行任何插值。当输入中的采样频率高于输出中的采样频率时，它的行为类似于零阶保持。因此，你可以试试这个：

```
% Sampling frequency
Fs1 = 10e3;
Fs2 = 4e3;

% Load your data
y = load('yourdata'); %y=sin(0:1/Fs1:1);
Ttime = (length(y)-1)*(1/Fs1);

% X-Axis
x  = 0:1/Fs1:Ttime;
xi = 0:1/Fs2:Ttime;

% Zero-order hold
yi = zeros(length(xi),1);
jj = 1;
xi(1) = x(1);
for ii=2:length(y)
    % Update value
    if (x(ii)>=xi(jj)),
        yi(jj) = y(ii-1);
        jj = jj+1;
    end
end

% Plot
figure
hold on
scatter(x,y,'b');
scatter(xi,yi,'r');
hold off
legend('Fs=10k','Fs=4k') 
```

对前面代码的唯一修改是从零阶保持估计 yi（y 轴插值）。

# mysql - 将唯一数据添加到 sql 表

> ID：15877829
> 
> 赞同：0
> 
> 时间：2013-04-08T11:25:23.243
> 
> 标签：mysql, sql

我正在学习sql数据库。我正在使用mysql。

我设计了表格和查询。我现在正在编写将内容放入数据库的代码。

当我有一个文本字段时，我无法弄清楚如何确保记录是唯一的。我试图将不是 pk（主键）的记录部分标记为唯一的，但是当它是文本时，它抱怨它不是固定长度。然后我在存储过程中尝试了条件的想法，但无法让它工作。

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `experiment1`.`add_zzzz`$$
CREATE PROCEDURE `experiment1`.`add_zzzz` (IN v INT, IN n TEXT)
BEGIN

IF EXISTS (
  SELECT value, name 
  FROM zzzz 
  WHERE value=v AND name=n
)
THEN
ELSE
  INSERT INTO zzzz(value,name)
  VALUES v,n;
END IF;

END$$

DELIMITER ; 
```

所以有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:42:45.813

VARCHAR 不固定，您可以使用唯一索引

更多关于[http://www.w3schools.com/sql/sql_unique.asp](http://www.w3schools.com/sql/sql_unique.asp)

您也可以使用 INSERT 忽略

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# java - 创建字符串二进制终止符

> ID：15877831
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:25:27.547
> 
> 标签：java, string

我需要在我的字符串中放置终结符。终结符可能是字节 11（或 0x0B）或将来可能是任何其他字节。将字节添加到我的字符串的最佳方法是什么？

我想做类似的事情：

```
String s = "122456"+char(11); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:02:36.467

在 Java 中，您应该为此使用常量。尝试

```
public final static char TERMINATOR = 0x0B; 
```

然后，您可以在代码中像这样使用它：

```
"122456" + TERMINATOR 
```

这使代码可读，并且还可以轻松地用不同的符号替换终止符（不是在您的情况下，但通常是）或查找使用该符号的所有位置。

如果您需要终止符是可变的，请使用字段和访问器方法：

```
private char terminator = 0x0b;
public void setTerminator( char terminator ) { this.terminator = terminator; }
public char getTerminator() { return terminator; } 
```

这允许您更改终止符。

我还建议为您计划发送的每条消息创建一个 Java 类型。该类型应该知道如何创建字节数组，然后您可以使用“IO 服务”进行传输。因此，为消息的每个部分创建访问器方法，然后创建一个`encode()`方法：

```
public byte[] encode() {
     String message = data1 + terminator + data2 + terminator + ...

     return message.getBytes("ISO-88591-1");
} 
```

这样，您可以逐步构建消息，然后将其转换为字节流以在完成后发送。

# javascript - clearInterval 不 clearInterval

> ID：15877832
> 
> 赞同：0
> 
> 时间：2013-04-08T11:25:33.610
> 
> 标签：javascript, function, setinterval, dom-events, clearinterval

```
var timer;

function check_element_load(){
    timer = window.setInterval(function(){
        console.log("still working"); // keeps running forever
        if(document.getElementById("comments")){
            console.log("FOUND"); // this actually runs
            document.getElementsByTagName("fb:comments")[0].setAttribute('order_by', 'social');
            window.clearInterval(timer); // < not effective
        }
    }, 50);
}

check_element_load(); 
```

我试图在顶部放置一个脚本以继续检查特定元素是否已成功加载到浏览器中，它可以工作*（控制台记录了“FOUND”）*，但是当我编写另一个控制台日志以查看间隔是否仍在运行时。确实如此，它永远不会停止并且`clearInterval`完全被忽略

有什么我错过的吗？我还尝试使用所有其他解决方案，包括`settimeout`现在最接近我的解决方案是书面的，我只想`clearinterval`在条件返回 true 后生效。

有没有类似的东西`clearinterval`更有效，杀死整个功能或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:40:12.570

就目前而言，您的[代码是逻辑正确](http://jsfiddle.net/vU9dm/)的，但是如果

```
document.getElementsByTagName("fb:comments")[0].setAttribute('order_by', 'social'); 
```

抛出错误，（当然）[永远不会清除](http://jsfiddle.net/vU9dm/1/)超时。你[可以](http://jsfiddle.net/vU9dm/2/)[改用`SetTimeout`](http://jsfiddle.net/vU9dm/2/).

最有可能的调用`getElementsByTagName("fb:comments")`返回一个空集，给您一个“未定义的元素上不存在方法 setAttribute”类型错误。

# mainframe - 使用 DFSORT 删除列

> ID：15877834
> 
> 赞同：1
> 
> 时间：2013-04-08T11:25:34.143
> 
> 标签：mainframe, dfsort

例如，我有以下可变长度（**RECFM=VB**）的输入文件：

```
AAAAABBBBBCCCCCDDDDDEEEEEFFFFF

AAAAABBBBBCCCCCDDDDDEEEEEFFFFF

AAAAABBBBBCCCCCDDDDDEEEEEFFFFF 
```

我试图通过跳过 A 列来获取如下输出文件。有没有办法可以使用 DFSORT 做到这一点？（outrec？！）

```
BBBBBCCCCCDDDDDEEEEEFFFFF

BBBBBCCCCCDDDDDEEEEEFFFFF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:23:25.433

当然

```
 OPTION COPY
  INREC BUILD=(1,4,6) 
```

1,4 是 RDW（记录描述符字），对于可变长度记录，在 BUILD 中始终是必需的。“6”表示“从起始位置 6 到变量记录的结尾”。DFSORT 将相应地调整 RDW 中的记录长度，并且您在 SORTOUT 上的输出应该是您想要的。

它与 OUTREC 而不是 INREC 相同，但除非需要 OUTREC（在 SORT 之后并且处理依赖于它），否则我使用 INREC。

使用 OUTFIL 也可以，但同样适用（对我而言）。

编辑：

为了进行比较，这里删除了固定长度记录的前五个。我将使用 80 的 LRECL：

```
 OPTION COPY
  INREC BUILD=(6,75,5X) 
```

5X 将在 75 字节数据后放置 5 个空格，如果 LRECL 保持不变，则将其关闭。

DFSORT 手册可从 IBM 在线获得，包括一个很好的“入门”。手册中有很多例子。对于更复杂的操作，请参阅 IBM 的“Smart DFSORT Tricks”出版物。

编辑：

从您的评论中，从这里开始阅读：

[http://publib.boulder.ibm.com/infocenter/zos/v1r13/index.jsp?topic=%2Fcom.ibm.zos.r13.iceg200%2Fice1cg6025.htm](http://publib.boulder.ibm.com/infocenter/zos/v1r13/index.jsp?topic=%2Fcom.ibm.zos.r13.iceg200%2Fice1cg6025.htm)

和这里：

这些字段在讨论中是“固定的”，不要将其与固定长度的记录混淆。固定长度字段是您具有起始位置和长度的地方。可变字段是您只有开始位置（在可变长度记录上）或定义 PARSEd 字段时的位置。

该文档也提供 PDF 格式，ice1cg60.pdf 是当前文档，但值得找到与您的 DFSORT 版本/级别相匹配的文档。

# java - 字符串数组方法不返回数组对象 - Selenium WebDriver

> ID：15877835
> 
> 赞同：1
> 
> 时间：2013-04-08T11:25:36.923
> 
> 标签：java, selenium-webdriver, testng, pageobjects

请找到我的代码，它不返回数组对象值，它只返回一个数组对象

```
public String[] verify_userRole(String[] Expected_role) {
        String[] actual_role = new String[4];
        String first;
        WebElement role_table = driver.findElement(By
                .xpath("//*[@id='tblListView']/tbody[1]"));
        List<WebElement> allRows = role_table.findElements(By.tagName("tr"));

        for (WebElement row : allRows) {
            List<WebElement> cells = row.findElements(By.tagName("td"));

            for (WebElement cell : cells) {
                first = cell.getText().toString();
                actual_role = new String[] {first};

                }
        }
        return actual_role;
    } 
```

变量首先包含四个值（“name”，“name1”，“name2”，“name3”），然后将此字符串值转换为数组（actual_role），然后仅返回一个值（“name”）

请澄清上述代码的问题是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:27:07.133

您在循环中的每一步都重新初始化字符串数组。

你应该只做一次。

```
 ArrayList<String> actual_role = new ArrayList<String>( )
   for (WebElement row : allRows) {
        List<WebElement> cells = row.findElements(By.tagName("td"));

        for (WebElement cell : cells) {
            first = cell.getText().toString();
            actual_role.add(first);

        }
    }

    return (String[]) actual_role.toArray( new String[ actual_role.size() ] ); 
```

顺便说一句，我已将您的示例转换为使用中间 ArrayList，因为您不知道实际数据大小，并且动态重新初始化数组很容易出错。

如果您正在实现的方法的签名不是由外部框架规定的，我建议您使用`List<String>`作为返回类型而不是`String[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:28:09.027

你总是在循环内实例化你的数组：

```
actual_role = new String[] {first}; 
```

改为尝试：

```
actual_role[i] = first; 
```

当 i 是当前索引时。

# android - 字节数组的长度小于位图

> ID：15877841
> 
> 赞同：0
> 
> 时间：2013-04-08T11:25:44.860
> 
> 标签：android, bitmap, byte

我将位图转换为字节数组：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

例如，我的位图`213x350 = 74550`像素，
所以长度 byteArray `74550*4 = 298200`。

但是`byteArray.length returned 57+ thousand`。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:32:26.847

您的位图为 213x350 像素，但您的字节数组包含压缩的 PNG 图像数据，每个像素不使用 4 个字节。随着您的数据被压缩，PNG 文件的总大小会变小。

要直观地查看它，只需打开任何图形编辑器（例如 gimp）并创建一个 213x350 像素的新图像。然后将此图像保存为 PNG 文件并查看其大小。

# javascript - jquery选择器中的转义引号不起作用

> ID：15877846
> 
> 赞同：0
> 
> 时间：2013-04-08T11:25:53.010
> 
> 标签：javascript, jquery

在下面的代码中，如何转义`"`myClass中的双引号`"`

我尝试了`\"`myClass`\"` 但它不起作用

```
var s = '<span onclick="$($(this).text()).addClass("myClass")">test</span>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:37:40.070

恕我直言，这是对 jQuery 功能的严重滥用。明智的做法是这样的：

```
var s = $("<span>test</span>");
s.on("click", function(){
    $($(this).text()).addClass("myClass");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:42:14.490

比利马修斯所说的，但这是实际的例子：

```
var s = '<span onclick="$($(this).text()).addClass(&quot;myClass&quot;)">test</span>'; 
```

`&quot;`修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:29:42.403

你将不得不使用`&quot;`

但是，这仍然是错误的，因为这会将双引号放在你的双引号 onclick 中。改为使用`&apos;`单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:27:49.253

要在 HTML 属性中转义引号，请使用`&quot;`.

# php - 选择具有最新时间戳的mysql记录

> ID：15877848
> 
> 赞同：0
> 
> 时间：2013-04-08T11:25:55.510
> 
> 标签：php, mysql

好的，所以我有一个这样的表：

```
ID    Number     State     Gender         tstamp
==----======----=======----======----===================
1     01        Open       Male      2013-04-06 10:27:26
2     01        Open       Female    2013-04-07 10:28:23
3     04        Open       Male      2013-04-07 11:23:13
4     04        Closed     Male      2013-04-07 11:26:45
5     01        Open       Male      2013-04-07 12:23:21
5     04        Open       Female    2013-04-08 13:27:55
6     04        Open       Male      2013-04-08 13:28:53
7     01        Open       Female    2013-04-09 13:29:23
8     01        Open       Female    2013-04-09 13:30:36 
```

我需要生成一些 SQL/PHP 来计算每个数字的状态为 Open 的男性记录。然后我需要检查记录的性别之前是否已更改并忽略之前设置的状态。所以如上所述，当记录号 01 从男性变为女性，再次变回男性，然后再次变回女性时，我需要它忽略旧的性别，只计算男性记录，所以它只会计算：

```
6     04        Open       Male      2013-04-08 13:27:65
8     01        Open       Female    2013-04-09 13:27:65 
```

然后将返回 2 作为计数。

我不知道该怎么做，我尝试了一个 while 循环来检查状态是否相同，性别是否与最后的记录相同，但我无法让它做我想做的事。我敢肯定，如果有人向我展示了解决方案，那么这一切都会突然变得有意义。

我会非常感谢一些帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:34:14.083

如果我能很好地理解问题，你需要这样的东西。

```
SELECT COUNT(*) FROM your_table_name t1  WHERE state='Open' GROUP BY ID ORDER BY tstamp DESC 
```

或者您需要首先在此连接中的两个相同表之间进行连接，您只需选择 1 个 ID 值（按 tstamp 排序 DESC）并计算这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:46:21.417

首先，您需要获取每个数字的最后一条记录。这需要一个连接：

```
select t.*
from t join
     (select t.number, max(id) as maxid
      from t
      group by t.number
     ) tmax
     on t.id = tmax.maxid 
```

然后，不要选择所有记录，而是执行所需的计数：

```
select t.number, sum(case when gender = 'male' and state = 'open' then 1 else 0 end) as NumMales
from t join
     (select t.number, max(id) as maxid
      from t
      group by t.number
     ) tmax
     on t.id = tmax.maxid
group by t.number 
```

您可能还要求为每个数字设置一个 0/​​1 标志，表明是否存在男性/公开记录。为此，您可以执行以下操作：

```
select t.number, max(case when gender = 'male' and state = 'open' then 1 else 0 end)
from t
group by t.number 
```

# mysql - mysqldump 使用 --extended-insert 选项

> ID：15877849
> 
> 赞同：1
> 
> 时间：2013-04-08T11:25:59.483
> 
> 标签：mysql, mysqldump

mysqldump 的 --extended-insert 选项是否有任何特定范围，它将 1024 条语句分组，然后使用另一个扩展插入。

我的表在转储数据时有超过 1000 万行我没有更改最大允许数据包大小（它设置为 100 MB）并且我的表大小超过 10 GB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:36:00.240

我认为您正在寻找[`--net_buffer_length`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_net_buffer_length)和/或[`--max_allowed_packet`](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_max_allowed_packet). 它们是一般客户端设置，但它们控制每个包的大小，即使对于 mysqldump 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-01T15:59:09.167

我知道这有点过时了，但如果有人再次陷入困境，这将对他有所帮助。这里的问题是mysql引擎在执行mysqldump命令后会将所有表缓存在RAM中，完成后会写入磁盘。当表缓存大于服务器 RAM 的大小时，我们将遇到问题。为了桥接使用***--quick***选项（例如：*mysqldump -h sitename.com -u root -ppass_word -x --all-databases --quick > dump_file_name.sql*），它将直接写入磁盘。除了选项名称之外，此选项并不比带缓冲区的**BU快。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T15:22:40.427

我最近遇到了同样的问题，1.1gb 数据库导出`--opt`但有很多记录，而且导入速度非常慢，我离开了一夜，第二天早上它仍在导入，所以我决定停下来重新开始。

发现这有很大帮助[https://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-bulk-data-loading.html](https://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-bulk-data-loading.html)

我进入 mysql shell 并运行：

```
mysql> SET autocommit=0;
mysql> SET unique_checks=0;
mysql> SET foreign_key_checks=0;
mysql> SOURCE my_database.sql; 
```

并开始看到：

```
Query OK, 12315 rows affected (0.34 sec)
Records: 12315  Duplicates: 0  Warnings: 0 
```

等等..基本上每秒运行大约 36k 次插入，但加班速度确实变慢了..

```
Query OK, 12305 rows affected (1.68 sec)
Records: 12305  Duplicates: 0  Warnings: 0 
```

解释很简单，自动提交基本上在每次插入时都会刷新到磁盘，即使使用`--extended-insert`（默认情况下使用 with `--opt`）但禁用它会在提交到磁盘之前尽可能多地分组，所以我能够在刷新之前对大约 12k 条记录进行分组，其他选项禁用关键检查以提高性能。

以这个速度，我可以在半小时甚至更短的时间内导入 1300 万条记录，我没有检查 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T04:22:06.610

如果要分组 1024 个插入语句，首先获取语句的长度。例如，长度为 50 个字符，总长度为 50K。在这种情况下，请尝试

```
$ mysqldump --net_buffer_length=50K [and your other arguments] 
```

正如 Andreas 指出的那样，您应该设置`net_buffer_length`并观看`max_allowed_packet`。`mysqldump`with`net_buffer_length = 50K`创建长达 50K 的扩展插入语句。4K 是`net_buffer_length`. 您也可以将选项放入

```
my.cnf

[mysqldump]
net_buffer_length = 50K 
```

您的 Mysql 服务器系统的值必须大于您为客户端设置的值。`my.cnf` `[mysqld]` `net_buffer_length = 1M`例如。它的最大值是`1M`。

`max_allowed_packet`必须比这大得多。这是您的客户端/服务器将通信的单个语句的数据包大小。`max_allowed_packet`的默认值为MySQL 5.7`16M`最高可达`1G`。

# c# - 当前上下文中不存在名称“WM_DEVICECHANGE”

> ID：15877851
> 
> 赞同：3
> 
> 时间：2013-04-08T11:26:04.627
> 
> 标签：c#, windows-messages

我正在尝试检测 USB 到达事件。我试图覆盖`wndproc()`以获取我的消息。但我正面临 Windows 消息的错误。

错误是：

```
The name 'WM_DEVICECHANGE' does not exist in the current context

The name 'DBT_DEVICEARRIVAL' does not exist in the current context 
```

这也是我尝试过的代码。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows.Forms;         
using System.IO;
using Microsoft.Win32.SafeHandles; 

namespace USBCheckerApp
{
    public partial class Form1 : Form
    {
        bool bDeviceFound = false;

        public Form1()
        {
            InitializeComponent();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            if (!bDeviceFound)
            {
                button1.Enabled = false;
            }

        }
        [System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
        protected override void WndProc(ref Message m)
        {
            switch (m.Msg)
            {
                case WM_DEVICECHANGE:
                    if (m.WParam == DBT_DEVICEARRIVAL)
                    {
                        MessageBox.Show("MEDIA FOUND");
                    }
            }

        }

    }
} 
```

添加以便您可以建议任何更新。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T11:32:52.470

您必须声明和定义常量的值：

```
private const int DBT_DEVICEARRIVAL = 0x8000;
private const int WM_DEVICECHANGE = 0x0219; 
```

# php - 许多网址的Javascript iframe加载时间功能

> ID：15877852
> 
> 赞同：4
> 
> 时间：2013-04-08T11:26:08.370
> 
> 标签：php, javascript

有一个非常简单的函数来检查 iframe 的加载时间：

```
function loadTime() {
        var beforeLoad = (new Date()).getTime();        
        $('#loading_iframe').one('load', function () {
            var afterLoad = (new Date()).getTime();
            var result = (afterLoad - beforeLoad) / 1000;
            $("#loadingtime").html(result + " sec");
        }); 
    } 
```

我像这样加载我的框架（其中 $url = 一些链接））：

```
<iframe style="visibility:hidden;display:none" id="loading_iframe" src="<?php echo $url;?>"></iframe> 
```

之后，我将结果放入 div：

```
<div id="loadingtime"></div> 
```

这对于单个 url 非常有效，我希望它适用于一组 url。这是我想要的结构（这可能吗？）：

```
foreach ($url_array as $i)
  iframe gets loaded with url
    javascript that gets the loadtime of the url
      passint the javascript value to php varriable
        write the php varriable to a database
close foreach and begin the next loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:10:42.640

是的，你想做的事是完全可能的。

如果您使用 IFrame 的 ID，您应该考虑到这些 ID 对于每个 iframe 应该是唯一的，否则当您创建具有相同 ID 的新 iframe 时，您将失去对旧 iframe 的引用。

您还可以创建一个全局`load`事件侦听器和一个使用 URL 作为唯一键的对象，以将数据映射到每个 IFrame。

为此，使用 URL 键和对象创建一个对象作为存储开始时间和负载处理程序的值。每次`load`触发全局侦听器时，您检查目标是否是 IFrame，如果是，则使用它`src`在该地图中查找，获取开始时间，计算您也可以存储在该对象中的持续时间。

祝你好运！

# r - 将数据框转换为 R 中的 1 和 0 矩阵

> ID：15877854
> 
> 赞同：-2
> 
> 时间：2013-04-08T11:26:19.050
> 
> 标签：r

我有以下数据框“j”......并且想要转换为一个由零和一个组成的矩阵，如下所示，但我正在寻找一种更简单的方法来在 R 中转换它......矩阵表示数据框的值，..例如矩阵是（81x3）......如果我在df中有一个“1”，一个“1”将写入矩阵的第一列，如果有在df中得到一个“2”，一个“1”将写入矩阵的第二列......谢谢！

```
g <- h <- i <- c(1:3)
j<-expand.grid(g,h,i)
j
     Var1 Var2 Var3
1     1    1    1
2     2    1    1
3     3    1    1
4     1    2    1
5     2    2    2
.
.
.
m<-matrix(0,81,3)
m[1,1]=m[1,1]+1;m[2,1]=m[2,1]+1;m[3,1]=m[3,1]+1
m[4,2]=m[4,2]+1;m[5,1]=m[5,1]+1;m[6,1]=m[6,1]+1
m[7,3]=m[7,3]+1;m[8,1]=m[8,1]+1;m[9,1]=m[9,1]+1
m[10,1]=m[10,1]+1;m[11,2]=m[11,2]+1;m[12,1]=m[12,1]+1
m[13,2]=m[13,2]+1;m[14,2]=m[14,2]+1;m[15,1]=m[15,1]+1
m[16,2]=m[16,2]+1;m[17,2]=m[17,2]+1;m[18,2]=m[18,2]+1
head(m)
     [,1] [,2] [,3]

 [1,]    1    0    0
 [2,]    1    0    0
 [3,]    1    0    0
 [4,]    0    1    0
 [5,]    1    0    0
 [6,]    1    0    0
 [7,]    0    0    1
 [8,]    1    0    0
 [9,]    1    0    0
[10,]    1    0    0
[11,]    0    1    0
[12,]    1    0    0
[13,]    0    1    0
[14,]    0    1    0
[15,]    0    1    0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:37:29.160

感觉很奇怪，但这是我想出的：

```
g <- h <- i <- c(1:3)
j<-expand.grid(g,h,i)

tmp<-c(0,0,0)
t(sapply(t(j),function(x,tmp){ tmp[x]<-1;tmp }, tmp)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T09:57:45.207

@ndoogan 的方法有效，但似乎只使用矩阵索引会更有意义：

这是你的 "j" `data.frame`：

```
j <- expand.grid(replicate(3, 1:3, FALSE)) 
```

而你的空`matrix`，“m”：

```
m <- matrix(0, 81, 3) 
```

"i" 就是`1:nrow(m)`，你可以用简单的. 把你的 "j"`data.frame`变成 a 。是获取您显示的订单所必需的，否则也可以使用。`vector``c(t(j))``t``unlist`

这是在实践中：

```
m[cbind(1:81, c(t(j)))] <- 1
head(m, 10)
#       [,1] [,2] [,3]
#  [1,]    1    0    0
#  [2,]    1    0    0
#  [3,]    1    0    0
#  [4,]    0    1    0
#  [5,]    1    0    0
#  [6,]    1    0    0
#  [7,]    0    0    1
#  [8,]    1    0    0
#  [9,]    1    0    0
# [10,]    1    0    0 
```

# webview - 如何将远程图像 URL 适合/显示到 webview Appcelerator Titanium 中？

> ID：15877856
> 
> 赞同：0
> 
> 时间：2013-04-08T11:26:21.967
> 
> 标签：webview, titanium, imageurl

我正在尝试使用 Appcelerator Titanium 在 iPhone 和 Android 中将远程图像 url 显示到 webview 中。远程图像显示在 webview 中，但完整图像不适合应用程序中的 webview。

代码：

```
var webView = Ti.UI.createWebView({
        url : 'https://cloudinary-a.akamaihd.net/dhl5ctlq1/image/upload/v1364796700/business_logo_4_53_1364308382.jpg',
        top : 0,
        left : x(60),
        height : '80dp',
        width : '80dp',
        scalesPageToFit : true,
        showScrollbars : false,
        scrollsToTop:false,
        backgroundColor : "red"
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:02:25.313

不要使用 WebView，WebView 用于显示 Web 内容（阅读：HTML），而只是使用 ImageView，这些支持远程 URL，请记住，在 iOS 上这些远程图像被缓存，但在 Android 上它们不是（对加速器侧）。试试这个：

```
var image = Ti.UI.createImageView({
        image : 'https://cloudinary-a.akamaihd.net/dhl5ctlq1/image/upload/v1364796700/business_logo_4_53_1364308382.jpg',
        top : 0,
        left : x(60),
        height : '80dp',
        width : '80dp'
        backgroundColor : "red"
    }); 
```

# javascript - 如何制作 Gridview 或 Listview

> ID：15877857
> 
> 赞同：0
> 
> 时间：2013-04-08T11:26:22.767
> 
> 标签：javascript, css, jquery-mobile

我如何制作一个 jQuery Mobile Gridview，一旦单击按钮，它就可以从数据库中弹出值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:08:06.067

创建 2 个 div，1 个用于弹出窗口（剑道窗口），1 个用于网格。

这是制作**窗口**的方法：

```
var header = "CIR Details";

 $("#popupDiv").kendoWindow(
 {
    title:header,
    width:"600px",
    visible:true,
    resizable:false,
    modal:true
 });
 dataManagementWindow = $("#popupDiv").data("kendoWindow");
kendoWindow.center(); 
```

和**网格**：

```
$("#grid").kendoGrid(
{
dataSource: 
{
    data: columnDefs,
    pageSize: 10
},
columns: columnDefs,
scrollable: false,
pageable: true
}).data("kendoGrid"); 
```

**这是网格**的数据源示例：

```
columnDefs({ field: "Title 1", template: "value 1" },
           { field: "Title 2", template: "value 2" },
           { field: "Title 3", template: "value 3" }); 
```

# javascript - 使用 Google Maps API v3 添加多个标记

> ID：15877862
> 
> 赞同：1
> 
> 时间：2013-04-08T11:26:38.827
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我有以下功能来添加一个标记，但我想通过单击地图来添加多个标记。我已经用谷歌搜索了，但我无法得到任何关于如何解决这个问题的直接答案。

```
function placeMarker(location) {
    if(marker) {
        marker.setPosition(location);
    } else {
        marker = new google.maps.Marker({
            position: location,
            map: gm_map,
            draggable: true
        });
    }
} 
```

我知道我需要使用`Array()`，但我不知道具体如何。我该如何解决我的问题？

**DEMO** : 因为问题已经解决所以删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:53:39.383

您需要在函数`marker`之外使用变量吗？`placeMarker`您的函数没有删除标记，它正在检查标记变量是否存在并使用该`setPosition`函数移动标记。如果您希望存在多个标记，则需要删除该行。

```
function placeMarker(location) {
   //marker variable will only exist inside this function
   var marker = new google.maps.Marker({
       position: location,
       map: gm_map,
       draggable: true
   });        
} 
```

这是一个例子：http: [//jsfiddle.net/bryan_weaver/aEyfW/](http://jsfiddle.net/bryan_weaver/aEyfW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:31:34.620

好的，您需要为地图上的“点击”事件设置一个事件侦听器。这需要将当前单击的位置传递给您的 placeMarker 函数。试试这个（在你初始化地图的地方添加这个事件监听器）

```
google.maps.event.addListener(gm_map, 'click', function(event) {
      placeMarker(event.latLng);
}); 
```

并修改您的 placeMarker 函数，因此每次单击时不要使用一个全局变量标记，而是每次创建一个新标记：

```
function placeMarker(location) {
    var marker = new google.maps.Marker({
            position: location,
            map: gm_map,
            draggable: true
        });
} 
```

# intuit-partner-platform - 随处可见 - 开放式 ID 要求和登录问题

> ID：15877869
> 
> 赞同：0
> 
> 时间：2013-04-08T11:26:57.880
> 
> 标签：intuit-partner-platform

我正在开发一个应用程序，我希望它能够出现在 intuit Anywhere 应用程序中心门户中。但是，我对开放 ID 要求感到困惑。

我的理解是，当用户通过开放 ID 登录时，我必须使他们能够在我的应用程序中自动设置一个帐户。对？

但是，如果我需要的不仅仅是电子邮件/姓名，该怎么办？例如，国家？推荐的模式是在用户第一次通过开放 ID 登录后立即询问额外信息吗？

另外，如果用户已经通过我自己的应用程序“正常”注册机制进行了注册，会有什么后果？可以吗，还是所有用户都必须通过开放 ID 进行身份验证？

你看，对于我的应用程序，应该可以连接到 Quickbooks，但是，并不是我的所有用户都会使用 Quickbooks，因此对于拥有 Quickbooks 帐户的用户来说，这应该只是一个额外的选择。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:49:47.693

> 我的理解是，当用户通过开放 ID 登录时，我必须使他们能够在我的应用程序中自动设置一个帐户。对？

正确的。

> 但是，如果我需要的不仅仅是电子邮件/姓名，该怎么办？

然后，您可以在他们首次登录时提示他们输入更多信息。

> 另外，如果用户已经通过我自己的应用程序“正常”注册机制进行了注册，会有什么后果？

没关系，然后您可以将他们登录到他们的普通帐户。

# flexslider - Flexslider 更改按钮

> ID：15877875
> 
> 赞同：10
> 
> 时间：2013-04-08T11:27:10.830
> 
> 标签：flexslider

无论如何我可以将小导航按钮更改为flexslider上的文本按钮吗？我在互联网上的任何地方都找不到它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-07T06:41:47.330

要将图像用作导航按钮：

```
.flex-direction-nav a:before  { 
    content: " ";
    display: block;
    background: url('../path-to-image/flexslider-left.png') no-repeat;
    width: 40px;
    height: 40px;
}
.flex-direction-nav a.flex-next:before  { 
    content: " ";
    display: block;
    background: url('../path-to-image/flexslider-right.png') no-repeat;
    width: 40px;
    height: 40px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T18:35:54.040

您可以像这样使用 prevText 和 nextText 属性（我使用的是箭头，但您可以更改为您想要的任何文本）：

```
$('.flexslider').flexslider({
    prevText: "&#8592;",
    nextText: "&#8594;"
}); 
```

然后从 中`flexslider.css`删除`background-image`和`text-indent`属性`.flex-direction-nav a`。

希望能帮助到你。

# android - 插入数据库约束失败

> ID：15877877
> 
> 赞同：2
> 
> 时间：2013-04-08T11:27:16.097
> 
> 标签：android, database, android-sqlite

我在将数据插入表时遇到问题。所以这就是我正在做的事情。我正在将音乐专辑添加到收藏夹表中，还将该专辑中的歌曲添加到称为歌曲的不同表中。所以我从 logCat 得到这个：

```
04-08 13:19:58.846: E/SQLiteDatabase(6120): Error inserting album_id=1 mp4= mp3=http://nelu.burduja.com/musica/songs_with/with_515c34d1bbde7.mp3 title=Super hit artist=Gherghe Topa thumb=snwith_515c34d1aeee1.jpeg
04-08 13:19:58.846: E/SQLiteDatabase(6120): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:113)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1718)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1591)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at com.myapp.functions.DatabaseHelper.addSongs(DatabaseHelper.java:179)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at com.myapp.functions.DatabaseHelper.addFavorite(DatabaseHelper.java:215)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at com.myapp.functions.AlbumLazyAdapter$1.onClick(AlbumLazyAdapter.java:94)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.view.View.performClick(View.java:3511)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.view.View$PerformClick.run(View.java:14105)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.os.Handler.handleCallback(Handler.java:605)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.os.Looper.loop(Looper.java:137)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at android.app.ActivityThread.main(ActivityThread.java:4440)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at java.lang.reflect.Method.invoke(Method.java:511)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-08 13:19:58.846: E/SQLiteDatabase(6120):     at dalvik.system.NativeStart.main(Native Method) 
```

首先我插入一张专辑：

```
public void addFavorite(Albums album) {

        ContentValues values = new ContentValues();
        values.put(ALB_GENRE, album.getTAG_GENRE());
        values.put(ALB_ID, album.getTAG_ID());
        values.put(ALB_MIX, album.getTAG_MIX());
        values.put(ALB_NAME, album.getTAG_NAME());
        values.put(ALB_SINGER, album.getTAG_SINGER());
        values.put(ALB_THUMB, album.getTAG_THUMB());
        // Inserting Row
        addSongs(album.getSongs(), album.getTAG_ID());
        database.insert(TABLE_FAVORITES, null, values);

    } 
```

然后我通过以下方式插入该专辑中的歌曲：

```
public void addSongs(ArrayList<Songs> arrayList, String albumID) {
        ContentValues values = new ContentValues();
        for (int i = 0; i < arrayList.size(); i++) {
            values.put("title", arrayList.get(i).getSONG_TITLE());
            values.put("artist", arrayList.get(i).getSONG_ARTIST());
            values.put("mp3", arrayList.get(i).getSONG_MP3());
            values.put("mp4", arrayList.get(i).getSONG_MP4());
            values.put("thumb", arrayList.get(i).getSONG_THUMB());
            values.put("album_id", albumID);
            database.insert("songs", null, values);
        }
    } 
```

最后我的表查询：

```
private static final String DATABASE_CREATE_SONGS = "create table "
            + TABLE_SONGS + "(title text "
            + ", artist text, mp3 text, mp4 text, thumb text,"
            + " album_id text REFERENCES " + TABLE_FAVORITES + "(id));";

private static final String DATABASE_CREATE = "create table "
            + TABLE_FAVORITES + "(" + ALB_ID + " text primary key, " + ALB_NAME
            + " text, " + ALB_SINGER + " text, " + ALB_GENRE + " text, "
            + ALB_MIX + " text, " + ALB_THUMB + " text" + ");"; 
```

那么有人可以帮帮我吗！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:52:54.527

你在做什么？

您尝试在 FAVORITES 之前插入歌曲？和歌曲应该引用不存在的FAVORITE？

换个顺序...

从

```
 addSongs(album.getSongs(), album.getTAG_ID());
    database.insert(TABLE_FAVORITES, null, values); 
```

到

```
 database.insert(TABLE_FAVORITES, null, values);
    addSongs(album.getSongs(), album.getTAG_ID()); 
```

* * *

开始使用**AUTOINCREMENT**。我不知道你在哪里取值，`album.getTAG_ID()`但无论如何你的解决方案都是错误的。应该改为类似的东西：

```
 final long id = database.insert(TABLE_FAVORITES, null, values);
    addSongs(album.getSongs(), id); 
```

和表：

```
private static final String DATABASE_CREATE = "create table "
        + TABLE_FAVORITES + "(" + ALB_ID + " INTEGER primary key AUTOINCREMENT, " + ALB_NAME
        + " text, " + ALB_SINGER + " text, " + ALB_GENRE + " text, "
        + ALB_MIX + " text, " + ALB_THUMB + " text" + ");"; 
```

当然还有方法签名：

```
public void addSongs(ArrayList<Songs> arrayList, long albumID)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:31:05.877

确保您没有将空值传递到您声明为非空的列中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:26:24.590

哈，你错过了一些非常重要的东西，基本列 _ID ！这必须是 INTEGER 而不是 NULL。您也可以将其分配给 AUTOINCREMENT。

请查看此站点：[https](https://developer.android.com/training/basics/data-storage/databases.html) ://developer.android.com/training/basics/data-storage/databases.html （关于 SQlite 数据库的 Android 开发人员指南）

而且，本教程还可以帮助您：第 1 部分：[http ://www.smashingmagazine.com/2010/10/25/get-started-developing-for-android-with-eclipse/](http://www.smashingmagazine.com/2010/10/25/get-started-developing-for-android-with-eclipse/)

第 2 部分：[http ://www.smashingmagazine.com/2011/03/28/get-started-developing-for-android-with-eclipse-reloaded/](http://www.smashingmagazine.com/2011/03/28/get-started-developing-for-android-with-eclipse-reloaded/)

# android - 从内部 SQLite 数据库创建列表视图

> ID：15877880
> 
> 赞同：1
> 
> 时间：2013-04-08T11:27:23.517
> 
> 标签：android, sqlite

我希望`ListView`从现有数据库中创建一个（尽管我看到的所有教程都在代码中创建了一个数据库）

我有一个名为 Favorites 的内部 SQLite 数据库，它只包含用户最喜欢的运动列表，如何将代码链接到该数据库，而不是每次都创建一个新数据库并将其链接到一个`Listview`？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:49:59.640

假设您已经在`SQLite Browser`或任何其他`SQLiteGUI Tool`...

在 中创建一个`SQLHELPER`类`Your package`。只需复制粘贴下面的一个

只需在行中添加您的详细信息

```
 private static String DB_PATH="data/data/com.AZone.egba/databases/";

    //replace it(com.AZone.egba) with your package name

    //Create a folder named "Database" inside assets folder
    private static final String DATABASE_NAME="abc.db"; // your database name here 
```

其余的班级会记住相同的

```
package com.AZone.egba.SqlHelper;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.R.string;
import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase;
import android.database.Cursor;
import android.database.DatabaseUtils;
import android.database.SQLException;
import android.media.JetPlayer.OnJetEventListener;
import android.util.Log;
import android.widget.Toast;

public class SQLHelper extends SQLiteOpenHelper {

    private static String DB_PATH="data/data/com.AZone.egba/databases/";

    //replace it(com.AZone.egba) with your package name

    //Create a folder named "Database" inside assets folder
    private static final String DATABASE_NAME="abc.db"; // your database name here
    private static final String DATABASE_PATH_ASSETS="Database"+File.separator;
    private static final int SCHEMA_VERSION=1;

    public SQLiteDatabase myDataBase;
    private final Context myContext;

    public SQLHelper(Context context) {
        super(context, DATABASE_NAME,null,SCHEMA_VERSION);
        this.myContext=context;
        // TODO Auto-generated constructor stub
    }

    public void createDataBase() throws IOException{
        boolean dbExist=checkDatabase();

        if(dbExist){

        }
        else {
            this.getReadableDatabase();
            try{

                copyDataBase();

            }catch (IOException e) {
                throw new Error("Error Copying Database");
            }
        }
    }

    private boolean checkDatabase(){
        SQLiteDatabase checkDB=null;
        try{
            String myPath=DB_PATH+DATABASE_NAME;
            checkDB=SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

        }
        catch (SQLiteException e) {
            // TODO: handle exception
        }

        if(checkDB!=null){
            checkDB.close();
        }
        return checkDB !=null?true:false;
    }

    private void copyDataBase() throws IOException{
        InputStream myInput= myContext.getAssets().open(DATABASE_PATH_ASSETS+DATABASE_NAME);
        String outFileName=DB_PATH+DATABASE_NAME;
        OutputStream myOutput=new FileOutputStream(outFileName);
        byte[] buffer=new byte [1024];
        int length;
        while((length=myInput.read(buffer))>0){
            myOutput.write(buffer,0,length);
        }

        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public void openDataBase() throws SQLException {
        String mypath= DB_PATH+DATABASE_NAME;
        myDataBase=SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READWRITE);
    }
     @Override
        public synchronized void close() {

                if(myDataBase != null)
                    myDataBase.close();  
                super.close();

        }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

/////////////////////////////////////////CUSTOM FUNCTIONS/////////////////////////////////////////////  

    public Cursor GetFavouritesList(){

        try
        {
            return(getReadableDatabase().rawQuery("SELECT _id,Name,Code FROM tblfavourites",null));
        }
        catch(SQLiteException e)
        {
            Log.e("tblfavourites", e.toString());
        }
        return null;

    }

} 
```

为了使其工作，您必须将数据库保存在资产文件夹中（这里我在文件夹数据库中创建了进一步的步骤）

![在此处输入图像描述](https://i.stack.imgur.com/RX1JB.png)

之前为 SQLHelper 创建实例`onCreate`

```
SQLHelper helper=null; 
```

然后在您的活动的 onCreate() 中调用以下方法

```
public void initialazeDatabase()
{
helper=new SQLHelper(this);

        try{
            helper.createDataBase();
        }catch (IOException ioe) {
            throw new Error("Unable To Create Database");
        }
        try{
             helper.openDataBase();
        }catch (SQLException sqle) {
            throw sqle;
        }
} 
```

称呼

在`onDestroy`活动中

```
helper.close(); 
```

现在您可以访问 SQLHelper 中定义的方法以从数据库中获取值

`helper.GetFavouritesList()`在任何地方 使用

`helper.GetFavouritesList()`将在光标中返回数据....

用于`Adapter`将游标数据绑定到`List view`..（网上有各种教程如何绑定`listview`数据库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:31:24.820

您不需要在每次运行时都创建数据库。SQLiteOpenHelper 类只创建一次数据库。所以只需创建一个 DatabaseAdapter 来查询数据库。

编辑：

创建一个类 DatabaseAdapter，如下所示：

```
public class DatabaseAdapter {
    protected SQLiteDatabase database;  
    public DatabaseAdapter(Context context) {
        MyDatabaseHelper databaseHelper = new MyDatabaseHelper(context, "my_db");
        database = databaseHelper.getWritableDatabase();        
    }

    protected class MyDatabaseHelper extends SQLiteOpenHelper {
        public MyDatabaseHelper(Context context, String name) {
            super(context, name, null, 1);
        } 

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_DATABASE_QUERY);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }       
    }

    // Your methods that works with database comes here
} 
```

MyDatabaseHelper 类的 onCreate 方法仅在第一次创建数据库时被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:43:51.897

那是你要的吗？

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

希望这能有所帮助。

并填写列表视图：[http ://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)

# ruby-on-rails - 向现有模型添加新的 has_many 关系

> ID：15877881
> 
> 赞同：7
> 
> 时间：2013-04-08T11:27:25.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, migration, has-many

我想在我的应用程序中添加一个 has_many 关系到两个现有的表/模型，我不太确定如何去做？

当我之前使用新模型执行此操作时，rails generate 命令为我处理了所有事情，只是`rails generate model Photo image:string hikingtrail:references`它创建了以下迁移

```
class CreatePhotos < ActiveRecord::Migration
  def change
    create_table :photos do |t|
      t.string :image
      t.references :hikingtrail

      t.timestamps
    end
    add_index :photos, :hikingtrail_id
  end
end 
```

现在我想在`users`&`photos`与 each之间建立关系`user` `has_many :photos`。

当我生成迁移以实现此目的时，它不包括`add_index :photos, :user_id`，这是我应该手动执行的操作还是以下步骤足以在我的数据库中设置此关系？

`rails g migration AddUserIdToPhotos user_id:integer`

这创造了...

```
class AddUserIdToPhotos < ActiveRecord::Migration
  def change
    add_column :photos, :user_id, :integer
  end
end 
```

然后运行...

耙分贝：迁移

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T11:38:01.153

建立你的关系就足够了。您可以添加索引来提高记录搜索的速度。事实上，有些人建议为所有外键建立索引。但是现在不用担心这个，我猜你不会有那么多记录来使用索引。

如果您已经迁移了所有内容并想要添加索引，请执行以下操作：

```
 rails g migration AddIndexToUserIdToPhotos 
```

并在里面添加索引列：

```
class AddUserIdToPhotos < ActiveRecord::Migration
  def change
    add_index :photos, :user_id
  end
end 
```

# sql - SSIS XML Source：通过变量的XML内容和XSD内容

> ID：15877891
> 
> 赞同：1
> 
> 时间：2013-04-08T11:28:28.973
> 
> 标签：sql, ssis

我想通过 SSIS 变量传递 XML 文件和 XSD 文件数据。在 XML Source 组件中，我可以从变量中选择 XML 数据。之后如何将 XSD 脚本保存在 SSIS 变量中？有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:43:08.143

我认为这会奏效

`1\. Create the variable`

`2\. In the properties of the data flow task where you are using the xml file go to expressions`

`3\. Create an expression for the [<Component>].[XMLSchemaDefinition]`

`4\. In the expression builder use your variable`

应该是这样的

# ssis - 动态文件夹命名 SSIS

> ID：15877896
> 
> 赞同：3
> 
> 时间：2013-04-08T11:29:17.157
> 
> 标签：ssis, task

有没有一种方法可以在不使用脚本任务的情况下在 SSIS 执行期间动态创建目标文件夹，例如。我有代码 123、133、143，如果不存在，我想在下面创建一个文件夹位置

```
D:\Outbox\ACI\123
D:\Outbox\ACI\133
D:\Outbox\ACI\143 
```

D:\Outbox\ACI 是静态的，而 123、133、143 只是由于执行 SQL 查询组件而脱落。

请问有人吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T12:04:49.707

您需要编写`expression`以获取文件夹名称的动态值。假设您有一个如下所示的包裹

![在此处输入图像描述](https://i.stack.imgur.com/yoEF7.png)

第一个组件是`execute SQL Task`从表值中检索 ID，例如`123, 133, 143`

`ForEach component`枚举这些值并传递`individual ID`给`File System Task`（创建文件夹）以创建具有动态名称的文件夹。

第 1 步：在 SSIS 中创建 3 个变量

```
Name        DataType  Expression
ID           Int32
FolderPath   String   "D:\\Outbox\\ACI\\" + (DT_WSTR, 10) @[User::ID] 
FileID       Object 
```

对于变量 FolderPath 设置`EvaluateAsExpression`为 True

第 2 步：配置执行 SQL 任务以从表中获取 ID

![在此处输入图像描述](https://i.stack.imgur.com/y6Y81.png)

第 3 步：将 ID 存储到`FileID`变量中

![在此处输入图像描述](https://i.stack.imgur.com/3TFPT.png)

第 4 步：配置`ForEach`组件

![在此处输入图像描述](https://i.stack.imgur.com/m5u0f.png)

![在此处输入图像描述](https://i.stack.imgur.com/GPVIL.png)

步骤 5：配置文件系统任务以创建一个`directory`

![在此处输入图像描述](https://i.stack.imgur.com/3aQAm.png)

# excel - 如何在 Excel 图表中不显示空白行？

> ID：15877903
> 
> 赞同：0
> 
> 时间：2013-04-08T11:29:39.730
> 
> 标签：excel, diagram, pivot-table

我正在从 PowerPivot 获取数据到 Excel 表。它具有可变长度。我旁边还有一些计算的列。我想用它做一个图表。

问题是，当我指定数据范围等时，我必须过大，以防返回的数据提供更多行。（例如，在这种情况下，我的数据直到 a20，但在另一种情况下，我的数据可能直到 a30 或更多。所以我选择 a40 的范围是安全的。）我必须手动指定（而不是从枢轴中选择）表），因为计算的列和其他标签和例外。

在图中，它显示了这些空白行。这是不必要的。 ![在此处输入图像描述](https://i.stack.imgur.com/A1lmz.png)

我怎样才能指示excel，而不是显示那些空白的行？（即使我删除了所有公式，并且行完全空白，它仍然会显示它。）

谢谢您的帮助。西罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:26:51.920

当我遇到类似的问题时，我创建了命名的动态范围，并让图表引用了这些范围。

下面是我如何为 Sheet1 中从 A2 到 A40 范围内存储的数据系列创建动态范围。

1.  在“引用”输入框中使用如下公式为您的动态范围定义名称：

    =OFFSET('Sheet1'!$A$2,0,0,COUNTA('Sheet1'!$A$2:$A$40),1)

2.  现在让您的系列值引用您为动态范围指定的名称。如果您已将范围命名为“Sales”，则应使图表系列值参考：“='Sheet1'!Sales”。重要的是您还要参考工作表的名称，否则它将不起作用。

# c - 在 C 中提取格式化数据的有效方法

> ID：15877905
> 
> 赞同：1
> 
> 时间：2013-04-08T11:29:43.703
> 
> 标签：c, string

我有一个 `[S{i,j} : this is stack overflow]` 我想提取的形式的字符串`i,j`和`this is stack overflow`两个单独的字符串。sscanf 在这里不起作用，因为要提取的字符串可以有空格。

谁能建议一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T11:31:34.883

如果字符串不能包含结束方括号，您绝对可以使用`sscanf()`：

```
int i, j;
char text[128];

if( sscanf(input, "[S{%d,%d} : %127[^]]", &i, &j, text) == 3 )
{
  printf("got it all!\n");
} 
```

有关鲜为人知的转换说明符的更多信息`[`，请参见[本手册页](http://linux.die.net/man/3/sscanf)。基本上，转换`%[^]]`意味着“除了右方括号之外的所有字符，它是一种特殊形式的语法，使用否定 ( `^`) 和加倍右括号以将其包含在否定字符集中。

**更新**如果您真的是指“在两个单独的字符串中”，那么上面的内容当然是错误的，因为它将数字解析为`int`-type 变量。要将对作为字符串，请使用以下内容：

```
char ij[32], text[128];

if( sscanf(input, "[S{%31[^}]} : %127[^]]", ij, text) == 2 )
{
} 
```

# ruby - 获取 HTTP 重定向页面的状态码

> ID：15877906
> 
> 赞同：1
> 
> 时间：2013-04-08T11:29:45.340
> 
> 标签：ruby, curl, curb

我正在使用 Ruby 测试一些 URL：

```
require 'curb'

def test_url()
  c = Curl::Easy.new("http://www.wikipedia.org/wiki/URL_redirection") do |curl|
    curl.follow_location= true
    curl.head = true
  end

  c.perform
  puts "status => " + c.status
  puts "body => " + c.body_str
  puts "final url => " + c.last_effective_url
end

test_url 
```

这输出：

```
status => 301 Moved Permanently
body => 
final url => http://en.wikipedia.org/wiki/URL_redirection 
```

在这种情况下，`www.wikipedia.org/wiki/URL_redirection`重定向到`en.wikipedia.org/wiki/URL_redirection`.

如您所见，我获得了 301 状态。如何获取最终响应代码的状态？

在这种情况下，它是 200，因为找到了文档。我检查了 libcurl 文档，发现了一个 flag `CURLINFO_RESPONSE_CODE`。

路边库中的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:55:01.443

找到了。

我克隆了路边源并为：

```
last_effective_url 
```

在下面的函数中，它是响应代码的等效项，在 curb_easy.c 的第 2435 行。

注意自己，“使用源卢克”！

更新：

答案是`response_code` 在我的情况下，代码如下所示：

```
c = Curl::Easy.new(HOST_NAME) do |curl|
    curl.follow_location = true
    curl.head = true
  end

  c.perform
  puts url + " => " + c.response_code.to_s 
```

# ios - iOS：NSString 的可逆哈希？

> ID：15877911
> 
> 赞同：0
> 
> 时间：2013-04-08T11:30:15.137
> 
> 标签：ios, nsstring

我想用我自己的自定义键在 iOS 上“散列”一个字符串；重要的是也要做相反的事情，例如

```
NSString *secretWord = @"Hello World!";

secretWord = [self hashWithKey:@"customKey"];

// secret Word is now something unreadable, like 'kjwlekjfoaijfoijwef'

NSLog(@"%@", [secretWord unhashWithKey:@"customKey"]); // prints 'Hello World!' 
```

我怎样才能实现这样的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:33:47.260

它不是散列（这是单向的），而是您要求的加密。

您可以为此目的使用 RNCryptor：[https ://github.com/rnapier/RNCryptor](https://github.com/rnapier/RNCryptor)

如果（二进制）结果对您来说似乎不可读，并且您需要人类可读的内容，请尝试对其进行 Base64 编码。

# java - Java 覆盖两个可互换整数的 equals() 和 hashcode()

> ID：15877914
> 
> 赞同：10
> 
> 时间：2013-04-08T11:30:30.083
> 
> 标签：java, equals, hashcode, hash-code-uniqueness

我正在为两个整数的简单容器对象覆盖 equals 和 hashcode 方法。每个 int 都反映了另一个对象的索引（无论该对象是什么）。类的重点是表示两个对象之间的连接。

连接的方向无关紧要，因此无论两个整数在对象中的哪个方向，equals 方法都应该返回 true。

```
connectionA = new Connection(1,2);
connectionB = new Connection(1,3);
connectionC = new Connection(2,1);

connectionA.equals(connectionB); // returns false
connectionA.equals(connectionC); // returns true 
```

这是我所拥有的（从 Integer 的源代码修改）：

```
public class Connection {
    // Simple container for two numbers which are connected.
    // Two Connection objects are equal regardless of the order of from and to.

    int from;
    int to;

    public Connection(int from, int to) {
        this.from = from;
        this.to = to;
    }

    // Modifed from Integer source code
    @Override
    public boolean equals(Object obj) {
        if (obj instanceof Connection) {
            Connection connectionObj = (Connection) obj;
            return ((from == connectionObj.from && to == connectionObj.to) || (from == connectionObj.to && to == connectionObj.from));
        }
        return false;
    }

    @Override
    public int hashCode() {
        return from*to;
    }
} 
```

这确实有效，但我的问题是：有没有更好的方法来实现这一目标？

我主要担心的是 hashcode() 方法将为任何两个乘以等于相同数字的整数返回相同的哈希码。例如

```
3*4 = 12
2*6 = 12 // same! 
```

文档[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#hashCode()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#hashCode())指出

> 如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。

如果有人能看到一种减少匹配哈希码数量的简单方法，那么我将不胜感激。

谢谢！

蒂姆

PS 我知道有一个 java.sql.Connection 可能会导致一些导入烦恼。该对象实际上在我的应用程序中具有更具体的名称，但为简洁起见，我在此处将其缩短为 Connection。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T12:13:21.233

已经提出了三种“有效”的解决方案。（通过工作，我的意思是它们满足哈希码的基本要求......不同的输入给出不同的输出......并且它们还满足 OP 的额外“对称”要求。）

这些都是：

```
 # 1
   return from ^ to;

   # 2
   return to*to+from*from;

   # 3
   int res = 17;
   res = res * 31 + Math.min(from, to);
   res = res * 31 + Math.max(from, to);
   return res; 
```

第一个问题是输出范围受实际输入值范围的限制。^(因此，例如，如果我们假设输入都是分别小于或等于 2 i)和 2 ^j的非负数，那么输出将小于或等于 2 ^(max(i,j))。这可能会在您的哈希表中给您带来较差的“分散” ¹ ......以及更高的冲突率。（也有问题`from == to`！）

第二个和第三个比第一个好，但是如果`from`和`to`很小，您仍然可能会遇到比预期更多的碰撞。

* * *

`from`如果对于和的小值最小化冲突至关重要，我会建议第 4 种选择`to`。

```
 #4
  int res = Math.max(from, to);
  res = (res << 16) | (res >>> 16);  // exchange top and bottom 16 bits.
  res = res ^ Math.min(from, to);
  return res; 
```

这样做的好处是，如果`from`和`to`都在 0..2 ^(16) -1 范围内，您将获得每个不同（无序）对的唯一哈希码。

* * *

^(1 - 我不知道这是否是正确的技术术语...)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T11:32:38.920

这是被广泛接受的方法：

```
@Override
public int hashCode() {
    int res = 17;
    res = res * 31 + Math.min(from, to);
    res = res * 31 + Math.max(from, to);
    return res;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T11:38:40.523

我想，像

```
@Override
public int hashCode() {
    return to*to+from*from;
} 
```

足够好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T11:40:44.910

通常我使用 XOR 作为哈希码方法。

```
@Override
public int hashCode() {
    return from ^ to;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-15T14:32:18.030

我想知道为什么没有人提供通常最好的解决方案：*规范化您的数据*：

```
 Connection(int from, int to) {
      this.from = Math.min(from, to);
      this.to = Math.max(from, to);
 } 
```

如果这是不可能的，那么我会建议类似

```
 27644437 * (from+to) + Math.min(from, to) 
```

*   通过使用不同于 31 的乘数，您可以避免像[这个问题](https://stackoverflow.com/q/13785353/581205)中那样的碰撞。
*   通过使用大乘数，您可以更好地分散数字。
*   通过使用奇数乘法器，您可以确保乘法是双射的（即，不会丢失任何信息）。

*   通过使用*素数*，您将*一无所获*，但每个人都这样做并且没有劣势。

# jquery - 使用 JQuery 定位 css 类的单个实例

> ID：15877915
> 
> 赞同：2
> 
> 时间：2013-04-08T11:30:31.843
> 
> 标签：jquery, css

我需要使用 JQuery 来定位一个类的单个实例，因为我需要在页面上的一个元素之后（或之前）插入一个新的 html 代码块。我的第一个想法是使用“inserAfter”方法。但是，我很快意识到这是一个在文档中多次使用的通用类。默认语法是这样的，我相信：

```
$('<p>Test</p>').insertAfter('.inner'); 
```

我读到您可以使用兄弟姐妹方法，但我不知道如何组合 insertAfter/Before，而且该类的实例是相同的 - 从正文到实际内容。因此，它是针对 5 个（实例）或其他东西中的第二个实例并插入 bla，bla 代码。

是否可以？还是我应该重新考虑整个计划并……做点别的？感谢您的任何想法、提示或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:31:35.853

您可以使用`eq()`基于索引的类的特定实例来定位。因为它从零开始，`eq(1)`将是类的第二个实例`.inner`：

```
$('.inner').eq(1).after('<p>Test</p>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:33:01.187

试试这个：

```
$('.inner:nth-of-type(2)').after('<p>Test</p>'); 
```

**来源**

[jQuery API - nth-of-type() 选择器](http://api.jquery.com/nth-of-type-selector/)

# java - 如何创建批处理文件来执行 sql 脚本

> ID：15877916
> 
> 赞同：1
> 
> 时间：2013-04-08T11:30:32.630
> 
> 标签：java, mysql, batch-file, inno-setup

我在最后一步创建带有 inno 设置的 java swing 应用程序的安装。在这个安装中，我调用了一个批处理文件来安装 mysql 。我的问题是我想从批处理文件中调用一个 sql 脚本，这就是我所做的，但它不起作用：

```
@echo off
C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql -u root -p password < dbase.sql; 
```

**（ * *'dbase.sql*** *' 在这个脚本中创建带有表的数据库）。**

在这里我在 inno setup 中执行该批处理文件：

```
[Run]

Filename: "C:\Documents and Settings\esolutions\Mes documents\dumps\install.bat"; Flags: shellexec waituntilterminated 
```

所以当我安装程序时。我运行mysql命令行，发现脚本没有执行（没有创建数据库）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:44:57.497

您也必须省略 -p 之后的空格。

```
@echo off
"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql" -u root -ppassword < dbase.sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:35:21.337

如下更改您的脚本

```
@echo off
"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql" -u root -p password < dbase.sql; 
```

# performance - 使用 MongoDB 复合索引进行排序

> ID：15877917
> 
> 赞同：1
> 
> 时间：2013-04-08T11:30:40.820
> 
> 标签：performance, mongodb, sorting

我正在考虑使用 MongoDB 并将我的数据从 MySQL 转移。我将使用 MongoDB 的嵌入式数组，并添加了 100,000 个示例文档。这是文档的架构和一些示例数据：

```
array(
   "a" => array("a", "c", "d"),
   "b" => 200
)

array(
    "a" => array("b", "e", "d"),
    "b" => 300
)

array(
    "a" => array("f", "c", "d"),
    "b" => 400
)

array(
    "a" => array("o", "l", "g"),
    "b" => 500
)

array(
"a" => array("x","c","b"),
"b" => 600
) 
```

一个示例查询是这样的：要获取 200 到 500 之间的所有 x 记录，

```
array("a" => "x", "b" => array('$gte' => 200, '$lte' => 500)) 
```

当我将 (a,b) 索引在一起并将其限制为 10 时，我得到“nscanned”和“n”10，这是完美的。但是，正如我从文章中读到的，跳过的成本很高，所以我必须根据它们的“_id”对它们进行排序，并用“$gt”对下一个文档进行分页。

在此之后，我将 (a,b,_id) 索引在一起，并且我也尝试了反向 _id 复合索引组合。但是 (a,_id(-1),b) 给了我最好的结果，但是 nscanned 还是太多了。我从 MongoDB 文档中阅读，它说如果你将排序字段放在复合索引中，它会很好地排序，但它没有很好地排序。我该如何管理？

# php - 检查会话是否过期，然后重定向（Joomla）

> ID：15877920
> 
> 赞同：1
> 
> 时间：2013-04-08T11:30:49.943
> 
> 标签：php, joomla, joomla2.5

我想做的事情很简单，但我找不到如何实现它的线索。

我有一个由几个 php 文件组成的巨大表单，这些文件使用 AJAX 调用，用户必须填写，我想要实现的是：

1) 在此表单的每一页上测试会话是否已过期。

2）如果会话过期，我想将他重定向到一个特定的 URL，比如说[http://www.example.com](http://www.example.com)

在此先感谢您的帮助。问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:55:41.657

您可以通过使用检查会话是否处于活动状态

```
$session = JFactory::getSession();

if ($session->isActive()) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:51:22.703

我想到的第一件事是检查会话 cookie 是否存在。如果会话处于活动状态，则默认情况下 PHP 会话机制使用默认名称为“PHPSESSID”的 cookie。因此，如果 cookie PHPSESSID 存在，则您的会话处于活动状态。

您可以像这样检查会话 cookie 是否存在：

```
if(isset($_COOKIE['PHPSESSID'])) {
    echo 'Session is active!';
} else {
    echo 'Session is not active!';
} 
```

要重定向，您可以使用以下命令：

```
header('Location: http://example.com'); 
```

要检查会话 cookie 名称，请使用以下命令：

```
session_start();
echo 'Session cookie name is: ' . session_name(); 
```

默认情况下它的“PHPSESSID”，但您或服务器管理员可以更改它，所以检查一下！

希望这可以帮助！

# c# - 在 WPF 窗口中确定窗口关闭发件人

> ID：15877922
> 
> 赞同：2
> 
> 时间：2013-04-08T11:30:56.707
> 
> 标签：c#, wpf, event-handling, wpf-controls

当用户通过单击关闭按钮（红色 X 按钮）取消我的对话框时，我想执行特定操作

![在此处输入图像描述](https://i.stack.imgur.com/Y6FiO.jpg)

而不是当表单由于其他一些操作而关闭时。我如何确定是否

```
private void Window_Closing(object sender, CancelEventArgs e) 
```

事件由按钮引发？

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="60" Width="284" WindowStartupLocation="CenterScreen" 
    BorderBrush="#FFCCCCCC"
    BorderThickness="2"
    Background="#FFE0E0E0"
    WindowStyle="SingleBorderWindow" 
    ShowInTaskbar="False" ResizeMode="NoResize" Closing="Window_Closing"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:48:41.980

我的问题是关闭此窗口的其他方法是什么？我的理解是发件人永远是窗口。

我将执行以下操作 - 对于所有按钮或基于用户的关闭 - 在 Window 上设置一个公共属性（类似于 bool ClosedByUser）并将其设置为“true”，然后调用 Close()。

对于其他情况（例如单击“X”关闭），该属性默认设置为 false。在关闭事件处理程序中，使用该属性做出决定。

请注意： StackOverflow 上还有其他[类似的问题和答案。](https://stackoverflow.com/questions/1866537/wpf-how-to-know-whether-window-was-closed-by-x-button)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:03:18.797

```
 public MainWindow()
    {
        InitializeComponent();
        this.Closing+=new System.ComponentModel.CancelEventHandler(MainWindow_Closing);

    }
    private void MainWindow_Closing(object sender, EventArgs e)
    {
        MessageBox.Show("salman");

    } 
```

# php - 如何修复 PHP 表单验证器错误？

> ID：15877924
> 
> 赞同：0
> 
> 时间：2013-04-08T11:30:59.410
> 
> 标签：php, javascript, forms, validation, validationerror

我的 PHP 表单的验证不起作用。这是我在表单中使用的代码。数据正在存储，`DB`但单独验证不起作用。提交表单后，我检查了错误控制台，它只是显示`Type Error document.getElementById('..')null`.

我不知道它是什么以及如何解决此错误。我是这个 php 领域的新手，所以不要介意我的错误。

这是我的代码：

```
<script type="text/javascript">
 function art_category()
 {

    document.getElementById('halloween_website_directory1').style.display = "none"; 
    document.getElementById('hallo_web_name1').style.display = "none"; 

    document.getElementById('hallo_web_desc1').style.display = "none"; 
    document.getElementById('hallo_web_tags1').style.display = "none";
    document.getElementById('msgpost1').style.display = "none";

    if(document.getElementById('halloween_website_directory').value=="")
    {
      document.getElementById('halloween_website_directory1').style.display = "block"; 
      return false;
    }
    else if(document.getElementById('hallo_art_name').value=="")
    {
      document.getElementById('hallo_art_name1').style.display = "block"; 

      return false;
    }

    else if(document.getElementById('hallo_art_desc').value=="")
    {
      document.getElementById('hallo_art_desc1').style.display = "block"; 
      return false;
    }
    else if(document.getElementById('hallo_art_tags').value=="")
    {
      document.getElementById('hallo_art_tags1').style.display = "block"; 
      return false;
    }
    else if(document.getElementById('msgpost').value=="")
    {
      document.getElementById('msgpost1').style.display = "block"; 
      return false;
    }

    else {
    document.artcategory.submit();
     return true;
    }
   }
  </script>
<form name="artcategory" id="artcategory" method="post" enctype="multipart/form-data" onSubmit="return art_category();">
    <table align="center" width="69%" height="75%" border="0" bordercolor="#663300";>
        <tr style="width:60px; height:60px;">
            <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Select Category:<span style="color:#FF0000;">*</span></FONT></p>
            </td>
            <td width="67%" height="60%">
        &nbsp;&nbsp;&nbsp;<select name="halloween_website_directory" id="halloween_website_directory">
                            <option value="">Select Website Category</option>
                            <?PHP
                                  $web_cat = mysql_query("SELECT * FROM halloween_website_directory ORDER BY web_cat_name;");
                                  while($cat = mysql_fetch_array($web_cat))
                                  {
                            ?>
                            <option value="<?PHP echo $cat['web_cat_id'] ?>"><?PHP echo $cat['web_cat_name'] ?></option>
                            <?PHP } ?>
                        </select>
                        <span id="halloween_website_directory1" style="color:#FF0000; display:none;">* Select Category</span>
            </td>
        </tr>
        <tr style="width:60px; height:60px;">
            <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Article Title:<span style="color:#FF0000;">*</span></FONT></p>
            </td>
            <td width="67%" height="60%">
        &nbsp;&nbsp;&nbsp;<input type="text" name="hallo_art_name" id="hallo_art_name"/>
                        <span id="hallo_art_name1" style="color:#FF0000; display:none;">* Please enter the title of your Article</span>
            </td>
        </tr>
        <tr style="width:60px; height:60px;">
               <TD align="center" WIDTH="33%" style="color:#FFFFFF;"><P><FONT SIZE="-1" FACE="Verdana">Article Description:<span style="color:#FF0000;">*</span></FONT></P>
               </TD>
               <TD WIDTH="68%"><P>&nbsp;&nbsp;&nbsp;<FONT SIZE="-2" FACE="Verdana" color="#FFCC66">&nbsp;Max 300 Characters<BR>
         &nbsp;&nbsp;&nbsp;&nbsp;<TEXTAREA NAME="hallo_art_desc" id="hallo_art_desc" ROWS=5 COLS=33 WRAP="virtual"></TEXTAREA>
         <span id="hallo_art_desc1" style="color:#FF0000; display:none;">* Enter Description</span>
                                             <BR>
                                                </FONT> &nbsp;&nbsp;&nbsp;<FONT SIZE="-2" FACE="Verdana" COLOR="#FFCC66"> Do not use "See web site" as
                                                  your description.</FONT></P>
          </TD>
      </TR>

      <tr style="width:60px; height:60px;">
                <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Article tags:<span style="color:#FF0000;">*</span></FONT></p>
                </td>
                <TD WIDTH="68%"><P><FONT SIZE="-1" FACE="Verdana" color="#FFFFFF">
    &nbsp;&nbsp;&nbsp;<input type="text" name="hallo_art_tags" id="hallo_art_tags" value="" size=30>
    <span id="hallo_art_tags1" style="color:#FF0000; display:none;">* Article Tags</span>
      </FONT><FONT SIZE="-2" FACE="Verdana" color="#FFCC66"><br>
      <font>
    &nbsp;&nbsp;&nbsp;Use a comma to separate each
    keyword.</font><BR>
          </FONT></P>
                </TD>
        </tr>

        <tr style="width:60px; height:60px;">
            <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Article Body:<span style="color:#FF0000;">*</span></FONT></p>
            </td>
            <td width="67%" height="60%">
         &nbsp;&nbsp;&nbsp;<textarea name="msgpost" id="msgpost" rows="10"/></textarea>
         <span id="msgpost1" style="color:#FF0000; display:none;">* Enter the Article content</span>    
          </td>
        </tr>

        <tr style="width:60px; height:60px;">
             <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Agree
                                              to our Submission
                                              Policy</font></p></Td>
                                            <TD WIDTH="68%"><P><FONT SIZE="-2" FACE="Verdana">
                                              &nbsp;&nbsp;&nbsp;<INPUT TYPE="checkbox" NAME="policy" VALUE="Y" CHECKED>
                                            </FONT></P></TD>
                                          </TR>

        <tr style="width:60px; height:60px;">
            <td align="center" colspan="3" width="67%" height="60%">
         &nbsp;&nbsp;&nbsp;<input type="submit" name="add_article" id="add_article" value="Submit Article"/>      
            </td>
        </tr>

</table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:40:52.003

您的脚本中有许多元素在您的 HTML 中不存在。例如，hallo_web_name1、hallo_art_name、hallo_web_desc1 等，这就是您收到此错误的原因。

如果这些元素基于某些条件出现在您的 HTML 代码中，则首先检查它们是否存在，如果存在，则获取它们的值，如下所示

```
if (document.getElementById('hallo_web_name1'))
     document.getElementById('hallo_web_name1').style.display = "none"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:49:53.640

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<title>Untitled Document</title>

<script>
function art_category()
{

    document.getElementById('halloween_website_directory1').style.display = "none"; 
    document.getElementById('hallo_art_name1').style.display = "none"; 
    document.getElementById('hallo_art_desc1').style.display = "none"; 
    document.getElementById('hallo_art_tags1').style.display = "none"; 
    document.getElementById('msgpost1').style.display = "none"; 
    document.getElementById('chkbox').style.display = "none"; 

    if(document.getElementById('halloween_website_directory').value==""){
      document.getElementById('halloween_website_directory1').style.display = "block"; 
      return false;
    }

    if(document.getElementById('hallo_art_name').value==""){
      document.getElementById('hallo_art_name1').style.display = "block"; 
      return false;
    }

    if(document.getElementById('hallo_art_desc').value==""){
      document.getElementById('hallo_art_name1').style.display = "none"; 
      document.getElementById('hallo_art_desc1').style.display = "block"; 
      return false;
    }
    if(document.getElementById('hallo_art_tags').value==""){
      document.getElementById('hallo_art_name1').style.display = "none"; 
      document.getElementById('hallo_art_desc1').style.display = "none"; 
      document.getElementById('hallo_art_tags1').style.display = "block"; 
      return false;
    }
    if(document.getElementById('msgpost').value==""){
      document.getElementById('hallo_art_name1').style.display = "none"; 
      document.getElementById('hallo_art_desc1').style.display = "none"; 
      document.getElementById('hallo_art_tags1').style.display = "none"; 
      document.getElementById('msgpost1').style.display = "block"; 
      return false;
    }

    if(document.getElementById('policy').checked == false){
      document.getElementById('hallo_art_name1').style.display = "none"; 
      document.getElementById('hallo_art_desc1').style.display = "none"; 
      document.getElementById('hallo_art_tags1').style.display = "none"; 
      document.getElementById('msgpost1').style.display = "none"; 
      document.getElementById('chkbox').style.display = "block"; 
      return false;
    }
}
</script>
</head>

<body>
<form name="artcategory" id="artcategory" method="post" enctype="multipart/form-data" onSubmit="return art_category();">
  <table align="center" width="69%" height="75%" border="0" bordercolor="#663300";>
    <tr style="width:60px; height:60px;">
      <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Select Category:<span style="color:#FF0000;">*</span></FONT></p></td>
      <td width="67%" height="60%">&nbsp;&nbsp;&nbsp;
        <select name="halloween_website_directory" id="halloween_website_directory">
          <option value="">Select Website Category</option>
          <?PHP $web_cat = mysql_query("SELECT * FROM halloween_website_directory ORDER BY web_cat_name;");
                while($cat = mysql_fetch_array($web_cat)){
           ?>
          <option value="<?PHP echo $cat['web_cat_id'] ?>"><?PHP echo $cat['web_cat_name'] ?></option>
          <?PHP } ?>
        </select>
        <span id="halloween_website_directory1" style="color:#FF0000; display:none;">* Select Category</span> </td>
    </tr>
    <tr style="width:60px; height:60px;">
      <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Article Title:<span style="color:#FF0000;">*</span></FONT></p></td>
      <td width="67%" height="60%">&nbsp;&nbsp;&nbsp;
        <input type="text" name="hallo_art_name" id="hallo_art_name"/>
        <span id="hallo_art_name1" style="color:#FF0000; display:none;">* Please enter the title of your Article</span> </td>
    </tr>
    <tr style="width:60px; height:60px;">
      <TD align="center" WIDTH="33%" style="color:#FFFFFF;"><P><FONT SIZE="-1" FACE="Verdana">Article Description:<span style="color:#FF0000;">*</span></FONT></P></TD>
      <TD WIDTH="68%"><P>&nbsp;&nbsp;&nbsp;<FONT SIZE="-2" FACE="Verdana" color="#FFCC66">&nbsp;Max 300 Characters<BR>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <TEXTAREA NAME="hallo_art_desc" id="hallo_art_desc" ROWS=5 COLS=33 WRAP="virtual"></TEXTAREA>
          <span id="hallo_art_desc1" style="color:#FF0000; display:none;">* Enter Description</span> <BR>
          </FONT> &nbsp;&nbsp;&nbsp;<FONT SIZE="-2" FACE="Verdana" COLOR="#FFCC66"> Do not use "See web site" as
          your description.</FONT></P></TD>
    </TR>
    <tr style="width:60px; height:60px;">
      <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Article tags:<span style="color:#FF0000;">*</span></FONT></p></td>
      <TD WIDTH="68%"><P><FONT SIZE="-1" FACE="Verdana" color="#FFFFFF"> &nbsp;&nbsp;&nbsp;
          <input type="text" name="hallo_art_tags" id="hallo_art_tags" value="" size=30>
          <span id="hallo_art_tags1" style="color:#FF0000; display:none;">* Article Tags</span> </FONT><FONT SIZE="-2" FACE="Verdana" color="#FFCC66"><br>
          <font> &nbsp;&nbsp;&nbsp;Use a comma to separate each
          keyword.</font><BR>
          </FONT></P></TD>
    </tr>
    <tr style="width:60px; height:60px;">
      <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Article Body:<span style="color:#FF0000;">*</span></FONT></p></td>
      <td width="67%" height="60%">&nbsp;&nbsp;&nbsp;
        <textarea name="msgpost" id="msgpost" rows="10"/></textarea>
        <span id="msgpost1" style="color:#FF0000; display:none;">* Enter the Article content</span> </td>
    </tr>
    <tr style="width:60px; height:60px;">
      <td width="33%" height="60%" style="color:#FFFFFF;"><p align="center"><FONT SIZE="-1" FACE="Verdana">Agree
          to our Submission
          Policy</font></p></Td>
      <TD WIDTH="68%"><P><FONT SIZE="-2" FACE="Verdana"> &nbsp;&nbsp;&nbsp;
          <INPUT TYPE="checkbox" NAME="policy" id="policy" VALUE="Y" />
          </FONT></P>
          <span id="chkbox" style="color:#FF0000; display:none;">* Please check policy</span> 
          </TD>
    </TR>
    <tr style="width:60px; height:60px;">
      <td align="center" colspan="3" width="67%" height="60%">&nbsp;&nbsp;&nbsp;
        <input type="submit" name="add_article" id="add_article" value="Submit Article"/>
      </td>
    </tr>
  </table>
</form> 
```

# javascript - 未调用 Angular 模块配置

> ID：15877925
> 
> 赞同：26
> 
> 时间：2013-04-08T11:30:59.827
> 
> 标签：javascript, angularjs

我试图让我的头脑围绕 AngularJS 并遇到了一个问题。

```
var myApp = angular.module('myApp', ['myApp.services']);

myApp.config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {

    console.log('Configuring module "myApp"');

    $routeProvider.when('/dashboard', {templateUrl: 'partial/dashboard', controller: DashboardController});
    $routeProvider.when('/menu', {templateUrl: 'partial/other', controller: OtherController});
    $routeProvider.otherwise({redirectTo: '/dashboard'});

    $locationProvider.html5Mode(true);
 }]); 
```

据我了解，应该在加载模块时调用配置函数。**但事实并非如此！**

我在标签上有`ng-app="myApp"`指令。`<body>`并且脚本以正确的顺序在正文结束标记之前加载（就这一点而言）。

```
 <script src="angular.js"></script>      
    <script src="app.js"></script>
    <script src="services.js"></script>
    <script src="controllers.js"></script>
</body> 
```

我很确定我必须在这里忽略一些微不足道的事情。应该有一条消息打印到控制台。但它仍然是空的，没有任何错误或警告。

**不依赖于路线的应用程序部分运行良好。**

### 更新：我的 service.js 的简化版本

```
'use strict';

angular.module('myApp', function ($provide) {
    $provide.factory('myService', function ($http) {
        var service = function () {
            ...
            service implementation
            ...
        };

        return new service();
    });
}); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-08T13:18:46.917

我用来定义服务的方法似乎覆盖了我的`myApp`模块。

**这是最重要的线**

```
angular.module('myApp', function ($provide) ... 
```

此代码只是重新定义`myApp`模块并添加一个函数来配置该模块。

* * *

我将 service.js 重构为这个简化版本，它开始工作了。

```
var myApp = angular.module('myApp');

myApp.factory('securityService', function () {
    return SomeFancyServiceObject();
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-17T14:11:59.200

我在我的 html 标记中缺少 ng-app="myApp" - 我在阅读您的问题时意识到了这一点:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:48:47.243

我通常看到通过将它们链接在一起来应用路由：

```
$routeProvider
    .when('/dashboard', {templateUrl: 'partial/dashboard', controller: DashboardController})
    .when('/menu', {templateUrl: 'partial/other', controller: OtherController})
    .otherwise({redirectTo: '/dashboard'}); 
```

看不出为什么你的不起作用，但可能值得一试。

# php - PHP SQL Server - 动态表行和列？

> ID：15877930
> 
> 赞同：1
> 
> 时间：2013-04-08T11:31:18.717
> 
> 标签：php, sql-server-2008, pivot

我有一个与我以前的问题类似的问题 - [Pivot Tables PHP/MySQL](https://stackoverflow.com/questions/10649419/pivot-tables-php-mysql)

在那个查询中，我知道将调用行标题，并且只需要动态创建列标题。但是，现在我也不知道行标题。

所以我有一个疑问

```
select eng, count, weekof from dbo.RPT_ENG_WEEK ('2013-03-03', '2013-03-16', '2013-03-03', '2013-03-16') order by eng, weekof asc 
```

即返回以下数据：

```
eng     count   weekof
James   11      2013-03-03  
James   12      2013-03-10  
Bill    2       2013-03-03  
Gary    15      2013-03-03  
Gary    5       2013-03-10  
Fred    3       2013-03-03  
Fred    2       2013-03-10 
```

所以我想把它变成每英语一行和每周一列，如下所示

```
week:  2013-03-03    2013-03-10
James:     11              12       
Bill:      2               0         
Gary:      15              5            
Fred:      3               2 
```

如果我将 eng 的名称作为静态行放入，我在上一个问题中得到的答案很有魅力，但可能有 100 个左右的 eng 它可以返回并且真的不想手动保留更新列表！

我可能可以通过 SQL 函数中的游标来解决它，但是有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T11:46:46.390

将数据从行转换为列称为[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)。由于您使用的是 SQL Server，因此您可以使用数据透视函数来获取结果。

有几种方法可以做到这一点。如果您有已知数量的`weekof`值，则可以对查询进行硬编码：

```
select eng, 
  coalesce([2013-03-03], 0) [2013-03-03],  
  coalesce([2013-03-10], 0) [2013-03-10]
from
(
  select eng, [count], weekof
  from RPT_ENG_WEEK
) d
pivot
(
  sum([count])
  for weekof in ([2013-03-03], [2013-03-10])
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/b44fc/9)。

但是，如果您有未知数量的值，那么您将需要实现动态 SQL 来获得结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(cast(weekof as date)) 
                    from RPT_ENG_WEEK
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT distinct ', coalesce(' + QUOTENAME(cast(weekof as date))+', 0) as '+ QUOTENAME(cast(weekof as date))
                    from RPT_ENG_WEEK
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT eng, ' + @colsNull + ' 
            from 
            (
                select eng, [count], cast(weekof as date) weekof
                from RPT_ENG_WEEK
            ) x
            pivot 
            (
                sum([count])
                for weekof in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/b44fc/10)。两者都给出结果：

```
|   ENG | 2013-03-03 | 2013-03-10 |
-----------------------------------
|  Bill |          2 |          0 |
|  Fred |          3 |          2 |
|  Gary |         15 |          5 |
| James |         11 |         12 | 
```

# php - 与 SQL 斗争

> ID：15877931
> 
> 赞同：1
> 
> 时间：2013-04-08T11:31:21.050
> 
> 标签：php, sql

我在同一个数据库中有两个表：hlstats_Events_Connects 和 hlstats_PlayerUniqueIds。

在 hlstats_Events_Connects 中，我有一个我希望获得的值，但是与它相关的 ID 我需要使用我拥有的“uniqueId”从另一个表中的数据中获取。例子：

```
**hlstats_Events_Connects**

playerId     eventTime
----------------------
8           2013-04-05 05:44:14

**hlstats_PlayerUniqueIds**

playerId     uniqueId
---------------------
8            0:0:84901 
```

所以我将“uniqueId”作为变量，我想说的是，获取人员 uniqueId 的 playerId，然后从 playerId 中获取 eventTime。目前我有一些类似下面的内容，但无法弄清楚 Where 子句。

```
SELECT c.eventTime, c.playerId, u.uniqueId, u.playerId
FROM  c.hlstats_Events_Connects, u.hlstats_PlayerUniqueIds
WHERE ...? 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:33:28.933

看起来你只是缺少`JOIN`. 您将加入`playerId`列上的表：

```
SELECT c.eventTime, c.playerId, u.uniqueId, u.playerId
FROM  c.hlstats_Events_Connects c
INNER JOIN u.hlstats_PlayerUniqueIds u
  ON c.playerId = u.playerId 
```

请注意，我更新了查询以使用 ANSI JOIN 语法，在本例中为`INNER JOIN`. 这是标准 SQL 语法，而不是表之间的逗号和`WHERE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:34:44.363

`JOIN`像这样使用

```
SELECT c.eventTime, c.playerId, u.uniqueId, u.playerId
FROM  c.hlstats_Events_Connects, u.hlstats_PlayerUniqueIds
WHERE c.playerId = u.playerId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:42:17.467

您不需要为表名添加前缀，而是应该在表名之后指定这些前缀，并且您也可以只加入`playerId`列（如果这些是大表，我建议为这些列添加索引。）

```
SELECT
    c.eventTime, c.playerId, u.uniqueId, u.playerId
FROM
    hlstats_Events_Connects c,
    hlstats_PlayerUniqueIds u
WHERE
    u.uniqueId = "0:0:84901" and
    u.playerId = c.playerId 
```

# cakephp - 无法从 Lib 加载类

> ID：15877944
> 
> 赞同：0
> 
> 时间：2013-04-08T11:31:48.033
> 
> 标签：cakephp

我正在使用 cakephp，我想从 Lib/Facebook 目录中包含一个文件，我正在使用 App::uses('Facebook', 'Lib/Facebook'); 但这不起作用，我检查了语法是否正确，可能存在一些配置错误。我收到错误

> 错误：找不到类“Facebook”。

这在 Windows 上正常工作，但现在我转移到 linux 并且我收到了这个错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:11:59.380

如果它在 Windows 中而不是在 linux 上按预期工作，那么最可能的原因是文件名大小写不正确。Windows 有不区分大小写的文件系统，而 linux 没有。确保您的文件名是准确的`Facebook.php`，而不是类似`facebook.php`.

# c++ - C++中多维数组的大小

> ID：15877945
> 
> 赞同：0
> 
> 时间：2013-04-08T11:31:51.643
> 
> 标签：c++

这是我的代码

```
#include <iostream>
#include <windows.h>
using namespace std;
int main()
{
    int x,y, size;
    int array[][2] = {{1,2}, {5,6}, {13, 16}, {17, 69}, {100, 200}};
    for(x=0; x<5; x++){
        for(y=0; y<2; y++){

            cout<<array[x][y];
        }
        cout<<" ";
    }
    system("pause>nul");
    return 0;
} 
```

代码工作正常。但是，当我将第 7 行替换*`int array[][2]`*为 时*`int array[][1]`*，显示如下错误消息：

```
64 E:\path\array_multi2.cpp:8 too many initializers for 'int [1]' 
```

什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:33:20.540

`int array[][1]`声明一个在其第二维中只有一个元素的数组。然后，您不能使用`{1,2}`or初始化第一个维度中的每个元素`{5,6}`，因为这需要*两个*元素。

例如，您可以像这样初始化它：

```
int array[][1] = {{1}, {2}, {3}}; 
```

# eclipse - Aptana Studio 3.3.2 - 没有更新站点

> ID：15877946
> 
> 赞同：-1
> 
> 时间：2013-04-08T11:31:55.387
> 
> 标签：eclipse, aptana, aptana3

我刚刚安装了 Aptana Studio 3.3.2 并单击了*帮助*菜单下的*检查更新。*

 *有一个弹出窗口说

> 没有要搜索的更新站点。您希望打开“可用软件站点”首选项吗？否/是

单击“*是*”表明“可用软件站点”列表中确实没有列出任何站点。

在 Internet 上搜索 Aptana Studio 的更新 URL 时，我只找到了 Eclipse 3.2 的旧 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:50:32.683

我不知道您的安装发生了什么，但如果您进入，`Window > Preferences > Install/Update > Available Software Sites`您可以添加 Aptana Studio 3 更新站点：http: [//download.aptana.com/studio3-rcp/plugin/update/](http://download.aptana.com/studio3-rcp/plugin/update/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T20:37:50.083

我的安装也有同样的问题。我去了`Window > Preference > Install/Update > Available Software Sites`，网站应该在那里，你只需要检查一下。

![在此处输入图像描述](https://i.stack.imgur.com/yjBcf.png)*

# git - Bitbucket 无法合并不相关的分支

> ID：15877947
> 
> 赞同：20
> 
> 时间：2013-04-08T11:31:55.903
> 
> 标签：git, bitbucket

我在 Bitbucket 上有存储库（比如说 A）和分叉存储库 A-dev。3个月来一切都很好。但最近，当我尝试在 A-dev 中创建拉取请求时，它说：

无法合并不相关的
分支

为什么会发生这种情况以及如何解决？我该如何解决？

## 编辑

![错误截图](https://i.stack.imgur.com/ubWFw.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-08T00:09:45.560

这意味着如果它试图合并，就会有合并冲突。您必须合并“回购 A”并解决冲突。然后推回 BitBucket，以便它可以关闭拉取请求。示例工作流程：

```
git remote add repo_a https://url.com/path/to/repo
git fetch repo_a
git merge repo_a/dev
# resolve conflicts
git commit -am "Merge in repo_a/dev and resolved conflicts"
git push origin dev 
```

如果您从未在 Git 中处理过合并冲突，请查看这个[SO question](https://stackoverflow.com/questions/161813/how-do-i-fix-merge-conflicts-in-git)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-18T13:19:38.860

尝试一个：

```
git rebase origin/[BRANCH-NAME] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-02-23T23:45:59.947

这是我的解决方案：

```
git checkout branchA
git pull origin branchB --allow-unrelated-histories 
```

...并解决合并冲突。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-24T00:52:22.983

在处理现有**应用程序的****新副本**时，我遇到了同样的问题。

 **我将现有应用程序的**新副本**作为 zip 文件获取，然后将其解压缩到一个新文件夹中。

然后我只是将现有应用程序的**旧副本**的一些内容复制到**现有应用程序****的****新副本**的目录中。

 **之后，我删除了现有**应用程序的****旧副本**，然后尝试将现有应用程序的**新副本**推送到Bitbucket 上现有**应用****程序**的远程存储库。

 ******然后它抛出了错误：

```
Unable to merge 
Unrelated branches 
```

**这是我解决它的方法**：

问题是我没有将**现有应用程序的****旧副本**的`.git`目录复制到**新副本**中。git 目录存储有关远程源存储库的信息。**当我丢弃现有应用程序的****旧副本**时，此信息丢失了。

 ******我所要做的就是从我的垃圾箱中恢复**现有应用程序的****旧副本**，然后将目录复制到**现有应用程序的****新副本**中。**`.git`**

 ******这次我尝试推送到**现有应用程序**的远程源存储库，它工作得非常好。

另一种解决方法是从远程存储库中重新创建`git clone`现有**应用程序**，然后将`.git`目录从中复制到现有应用程序的**新副本**中。之后，我可以推送回远程存储库。

就这样。

**我希望这有帮助************************

# javascript - CKEditor 4 Inline：如何按需隐藏工具栏？

> ID：15877948
> 
> 赞同：5
> 
> 时间：2013-04-08T11:31:57.197
> 
> 标签：javascript, ckeditor

通常，当您单击页面中编辑区域以外的其他位置时，工具栏会隐藏，现在我需要在用户命令（例如用户按下快捷方式）时隐藏工具栏。

我尝试`hide`在ckeditor工具栏div上调用jQuery方法，但是一旦隐藏，即使用户专注于编辑区域，它也永远不会变得可见。

关于如何实现这一目标的任何想法？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:00:48.047

当焦点回到编辑区域时，您是否尝试过执行 jQuery Show？

您还可以附加到焦点和模糊事件以显示和隐藏工具栏：

```
// Call showToolBarDiv() when editor get the focus
    editor.on('focus', function (event)
    {
               showToolBarDiv( event );
     });
    // Call hideToolBarDiv() when editor loses the focus
    editor.on('blur', function (event)
    {
               hideToolBarDiv( event );
    });

    //Whenever CKEditor get focus. We will show the toolbar DIV.
     function showToolBarDiv( event )
     {
      // Select the correct toolbar DIV and show it.
      //'event.editor.name' returns the name of the DIV receiving focus.
        $('#'+event.editor.name+'TBdiv').show();
     }

     //Whenever CKEditor loses focus, We will hide the corresponding toolbar DIV.
     function hideToolBarDiv( event )
     {
        // Select the correct toolbar DIV and hide it.
        //'event.editor.name' returns the name of the DIV receiving focus.
        $('#'+event.editor.name+'TBdiv').hide();
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-21T07:01:00.043

在其中创建 ckedito 的实例使用下面的代码。editor.id 用于 ckeditor、工具栏、编辑区域、页脚的三个部分，例如，如果 editor.id 的工具栏 div id 为 'cke_12_top' 的值为 'cke_12'。请注意，这是针对 iframe 模式的。

```
CKEDITOR.replace(divId, {toolbar: [
         { name: 'clipboard', items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']},
        {name: 'editing', items: ['Format', 'Font', 'FontSize', 'TextColor', 'BGColor' , 'Bold', 'Italic', 'Underline', 'Strike', '-', 'RemoveFormat'] }
    ]});

//use for loop because i have multi ckeditor in page.
    for (instance in CKEDITOR.instances) {
        var editor = CKEDITOR.instances[instance];
        if (editor) {
            // Call showToolBarDiv() when editor get the focus
            editor.on('focus', function (event) {
                showToolBarDiv(event);
            });

            // Call hideToolBarDiv() when editor loses the focus
            editor.on('blur', function (event) {
                hideToolBarDiv(event);
            });

            //Whenever CKEditor get focus. We will show the toolbar span.
            function showToolBarDiv(event) {
                //'event.editor.id' returns the id of the spans used in ckeditr.
                $('#'+event.editor.id+'_top').show();
            }

            function hideToolBarDiv(event) {                    
                //'event.editor.id' returns the id of the spans used in ckeditr.
                $('#'+event.editor.id+'_top').hide()
            }
        }
    } 
```

# python - Python - .format() 的正确语法

> ID：15877950
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:08.923
> 
> 标签：python, django, formatting

我需要像这样写一个 .format() ：

```
"{% display_cookies_accepted {} %}".format(self.client.cookies) 
```

{} - 需要替换为 self.client.cookies

{%, %} - 是 django 语法中的模板标签。

如何让它工作？

```
"{{% display_cookies_accepted {} %}}".format(self.client.cookies) 
```

也失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:33:34.983

只需先格式化内容，然后添加 django 标签。

```
"{%" + " display_cookies_accepted {} ".format(self.client.cookies) + "%}" 
```

或者也将标签放在格式中。

```
"{} display_cookies_accepted {} {}".format('{%', self.client.cookies, '%}') 
```

# android - 选择在android中定期与服务器同步数据的方法

> ID：15877952
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:09.197
> 
> 标签：android, task

A 有一个显示来自服务器的一些数据的应用程序。我还需要定期从服务器获取数据（尽管有不同的暂停）来缓存它，并且在某些情况下发送通知。

通知可能**非常重要**，所以当我使用服务并且由于某些原因它被杀死并且缓存时间被跳过时的情况不应该出现*（或者，如果不可能，我应该尽量减少跳过的时间）*。此缓存过程应在系统启动后启动*（无论应用程序是否正在运行）*，并始终在设备打开时执行。

那么我应该使用什么方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:48:22.120

我用过这样的服务

这可能会帮助你

```
public class MyService extends Service {

int counter = 0;
static final int UPDATE_INTERVAL = 60 * 1000; // / 1000 = 1 second
private Timer timer = new Timer();
JsonParsers jsonParser = new JsonParsers();
private static final String TAG_SUCCESS = "success";
private static String url_create_product = "http://ayyappagold.com/ayyappa/index.php";

@Override
public IBinder onBind(Intent intent) {
    // Not implemented...this sample is only for starting and stopping
    // services.
    // Service binding will be covered in another tutorial
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    // Announcement about starting
    Toast.makeText(this, "Starting the Service", Toast.LENGTH_SHORT).show();
    // Start a Background thread
    doSomethingRepeatedly();

    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
}

private void doSomethingRepeatedly() {
    timer.scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub

            doIn();

            Calendar c = Calendar.getInstance();

            String month = String.valueOf(c.get(Calendar.MONTH) + 1);
            String year = String.valueOf(c.get(Calendar.YEAR));
            String day = String.valueOf(c.get(Calendar.DAY_OF_MONTH));

            String months = null;
            if (month.startsWith("0") || month.startsWith("1")) {
                if (day.startsWith("0") || day.startsWith("1")
                        || day.startsWith("2") || day.startsWith("3")) {
                    months = year + "-" + month + "-" + day;
                }
            } else {
                months = year + "-" + "0" + month + "-0" + day;
            }
            loadJewelDetails(months);

        }
    }, 0, UPDATE_INTERVAL);

}

@Override
public void onDestroy() {
    super.onDestroy();

    if (timer != null) {
        timer.cancel();
    }
    Toast.makeText(this, "Stopping the Service", Toast.LENGTH_SHORT).show();
}

public void set_alarm(int year, int month, int day, String title,
        String text, String billno) {
    Calendar cal = Calendar.getInstance();

    cal.set(Calendar.MONTH, month - 1);
    cal.set(Calendar.YEAR, year);
    cal.set(Calendar.DAY_OF_MONTH, day);

    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);

    Intent intent = new Intent(getApplicationContext(), AlarmActivity.class);
    intent.putExtra("title", title);
    intent.putExtra("text", text);
    intent.putExtra("billno", billno);

    PendingIntent pendingIntent = PendingIntent.getBroadcast(
            getApplicationContext(), 1234, intent,
            PendingIntent.FLAG_UPDATE_CURRENT);

    @SuppressWarnings("static-access")
    AlarmManager alarmManager = (AlarmManager) getApplicationContext()
            .getSystemService(getApplicationContext().ALARM_SERVICE);

    alarmManager.cancel(pendingIntent); // cancel any existing alarms

    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
            cal.getTimeInMillis(), AlarmManager.INTERVAL_DAY,

            pendingIntent);

    Database db = new Database(getApplicationContext());
    db.insertFlg(1, billno);
}

public void loadJewelDetails(String month) {

    try {

        Cursor cursor = null;

        Database db = new Database(getApplicationContext());

        cursor = db.getGoldPush(month);
        if (cursor.getCount() != 0) {
            if (cursor.moveToFirst()) {
                do {
                    String billno = cursor.getString(cursor
                            .getColumnIndex("id"));
                    String title = "Ayyappa Gold";
                    String name = cursor.getString(cursor
                            .getColumnIndex("items"));

                    String dates = cursor.getString(cursor
                            .getColumnIndex("date"));

                    String yr = dates.substring(0, 4);
                    int year = Integer.parseInt(yr);
                    String mon = dates.substring(5);
                    String mo = mon.substring(0, 2);
                    int months = Integer.parseInt(mo);
                    String da = dates.substring(9);
                    int day = Integer.parseInt(da);

                    String tex = name.replace("*", "\n");

                    String text = tex;

                    // Ask our service to set an alarm for that date,
                    // this
                    // activity talks to the client that talks to the
                    // service
                    int flg = getFlag(billno);
                    if (flg == 0) {
                        set_alarm(year, months, day, title, text, billno);
                    }
                    System.out.println(dates);

                } while (cursor.moveToNext());

            }

        }
        cursor.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // looping through All Contacts

}

public int getFlag(String bill) {
    int flag = 0;
    try {

        Cursor cursor = null;

        Database db = new Database(getApplicationContext());

        cursor = db.getFlag(bill);
        if (cursor.getCount() != 0) {
            if (cursor.moveToFirst()) {
                do {

                    flag = Integer.parseInt(cursor.getString(cursor
                            .getColumnIndex("flag")));

                } while (cursor.moveToNext());

            }

        }
        cursor.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // looping through All Contacts
    return flag;
}

public void doIn() {

    // Building Parameters
    int id = getId();
    String name = String.valueOf(id);
    Database db = new Database(getApplicationContext());
    System.out.println("read the Gold and Silver rate details");

    JSONArray jsonarr = null;

    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("start", name));

    // getting JSON Object
    // Note that create product url accepts POST method
    JSONObject json = jsonParser.makeHttpRequest(url_create_product,
            "POST", params);

    // check log cat fro response
    Log.d("Create Response", json.toString());

    // check for success tag
    try {
        int success = json.getInt(TAG_SUCCESS);

        if (success == 1) {
            // Getting Array of Contacts
            jsonarr = json.getJSONArray("ayyappagolddetails");

            for (int i = 0; i < jsonarr.length(); i++) {
                JSONObject c = jsonarr.getJSONObject(i);

                String billno = c.getString("id");
                String item = c.getString("items");
                String date = c.getString("date");
                String time = c.getString("time");
                db.addGoldItemDetails(billno, item, date, time);

            }
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

}

public int getId() {
    int id = 0;
    try {
        System.out.println("read the id value");
        Cursor cursor = null;

        Database db = new Database(getApplicationContext());

        cursor = db.getId();
        if (cursor.getCount() != 0) {
            if (cursor.moveToFirst()) {
                do {

                    id = Integer.parseInt(cursor.getString(cursor
                            .getColumnIndex("id")));

                } while (cursor.moveToNext());

            }

        }
        cursor.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // looping through All Contacts
    System.out.println("last id value is" + id);
    return id;
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:40:49.353

在您的情况下，最合适的方法是使用`Service`for 不断更新数据源中的数据。至于数据本身，我认为在您的情况下，您最好创建一个`SQLite`数据库，以便在系统重新启动时保留您的数据。

# cocosbuilder - 打开 CocosBuilder 项目时的目录过多

> ID：15877955
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:13.480
> 
> 标签：cocosbuilder

当我添加一些新目录后再次打开 cocosbuilder 项目时，它会弹出一个对话框，上面写着

> 目录太多
> 
> 您已经创建或打开了一个项目，该项目位于具有很多子目录的目录中。请将您的项目文件与您在项目中使用的资源一起保存在一个目录中。

我知道这是因为目录太多。

但我想知道除了删除我新添加的目录之外，是否还有其他方法可以解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:27:22.073

只要你使用 github 版本，你总是可以直接在 CocosBuilder 源代码中删除警告并重新构建它。

否则，您可以在 github 上[请求 MK 请求的更改。](https://github.com/cocos2d/CocosBuilder/issues/303)

违规代码位于`CocosBuilderAppDelegate.m`~1155 行附近

```
[[CocosBuilderAppDelegate appDelegate] modalDialogTitle:@"Too Many [...] 
```

您必须至少在两个地方删除这条线。

```
- (void) checkForTooManyDirectoriesInCurrentDoc
{
    if (!currentDocument) return;

    if ([ResourceManager sharedManager].tooManyDirectoriesAdded)
    {
        // Close document if it has too many sub directories
        NSTabViewItem* item = [self tabViewItemFromDoc:currentDocument];
        [tabView removeTabViewItem:item];

        [ResourceManager sharedManager].tooManyDirectoriesAdded = NO;

        // Notify the user
        [[CocosBuilderAppDelegate appDelegate] modalDialogTitle:@"Too Many Directories" message:@"You have created or opened a file which is in a directory with very many sub directories. Please save your ccb-files in a directory together with the resources you use in your project."];
    }
}

- (BOOL) checkForTooManyDirectoriesInCurrentProject
{
    if (!projectSettings) return NO;

    if ([ResourceManager sharedManager].tooManyDirectoriesAdded)
    {
        [self closeProject];

        [ResourceManager sharedManager].tooManyDirectoriesAdded = NO;

        // Notify the user
        [[CocosBuilderAppDelegate appDelegate] modalDialogTitle:@"Too Many Directories" message:@"You have created or opened a project which is in a directory with very many sub directories. Please save your project-files in a directory together with the resources you use in your project."];
        return NO;
    }
    return YES;
} 
```

## 更新：

在**CocosBuilder/ccBuilder/ResourceManager.h**

有一个marco定义如下：

```
#define kCCBMaxTrackedDirectories 50 
```

所以我们可以简单地改成`50`更大**的数字**，问题就可以解决了。

# java - Gerrit/git：将 java 类重命名为现有（删除中间人）

> ID：15877958
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:19.690
> 
> 标签：java, git, rename, gerrit

我们使用 git，将 Gerrit 作为代码审查工具，我们有一个模型类 (MyModelImpl) 和关联接口 (MyModel)。我们已经意识到这个设置是多余的，所以我们想删除接口。我们还希望在代码中保留 MyModel 类名。所以我们要删除“MyModel.java”并将“MyModelImpl.java”重命名为“MyModel.java”，并更改内容以使所有内容都能编译。我们希望保持以前称为“MyModelImpl.java”的文件的历史完整。

是否可以在一次提交中执行此操作？

我们当然试过了，我们在 Gerrit 中看到的是“MyModelImpl.java”被删除了，“MyModel.java”被彻底改变了。并且“MyModelImpl.java”的历史丢失了。

我们希望在单个提交中执行此操作，因为仅删除“MyModel.java”会导致提交无法编译，并且在提交时将 MyModel 的所有用法转换为 MyModelImpl，然后将 MyModelImpl 重命名为 MyModel 进行第二次提交会导致大量提交（主要是相互抵消），这对代码审查来说是一件痛苦的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:16:08.227

您的第一种方法是完全正确的 - 历史应该仍然完好无损`MyModel.java`。但是，您不能运行`git log MyModel.java`，而是运行`git log --follow MyModel.java`。如果您对第二种方法感觉更舒服，您可以通过交互式 rebase 来“压缩”提交（使多个提交一次提交）`git rebase -i`：. 不过，在您的情况下，这应该不是必需的。如果您决定不使用`git rebase`，您仍然应该阅读有关它的手册页。这是一个了不起的命令！

# php - 用于 HTML 和 CSS 的 PHP DOM 解析器

> ID：15877960
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:25.670
> 
> 标签：php, domparser, css-parsing

是否有任何用于 PHP 的 HTML/CSS DOM 解析器，我可以直接提供实时 URL，它给了我以下两件事。

1.  组件的任何类/ID 的 HTML。
2.  应用于任何类/id 的自定义 CSS。

我知道 num:1 有这么多可用的 DOM 解析器是可能的，但我也想要与它们关联的 CSS 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:37:36.587

尝试使用[html_dom_parser](http://simplehtmldom.sourceforge.net/)

这将为您提供所有 html 查找支持

# iphone - 通过 didReceivedData 导入图片

> ID：15877966
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:40.233
> 
> 标签：iphone, ios, objective-c, xcode, nsurlconnection

我正在开发一个应用程序，用户可以通过它共享图像。使用 php 文件我在服务器上上传文件并使用 php 文件下载。当我下载文件时需要很长时间。我如何让它有点快。

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
NSString *data1 = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
NSArray *arrImg = [data1 componentsSeparatedByString:@"@@@"];
    int i;
    NSMutableArray *receivedUrlArr = [[NSMutableArray alloc]init];
    NSString *str,*strNew,*path;
    NSData *imageData;
    ImagesClass *obj;
    int count;
    for ( i=0; i<[arrImg count]-1; i++) {
        [receivedUrlArr addObject:[arrImg objectAtIndex:i]];

        str = [NSString stringWithFormat:@"http:////receive_images/%@",[receivedUrlArr objectAtIndex:i]];
        strNew = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        UIImage *myImage = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:strNew]]];  
        obj = [[ImagesClass alloc]init];
        obj.imageId = i+1;
        obj.imageName = [[arrImg objectAtIndex:i] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        obj.thumbImage = myImage;

        [[DBModel database]inserttoReceivedList:obj receiverMobNo:mobileno];

        path = [RECEIVEDIMAGE_DIR stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",obj.imageName]];
        imageData = UIImagePNGRepresentation(obj.thumbImage);
        [imageData writeToFile:path atomically:YES];
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:47:22.377

无论存储图像的方法多么有效，连接速度总是会成为瓶颈。

但是，您似乎以错误的方式进行此操作。-connection:didReceiveData 用于增量接收数据。似乎您假设收到数据后，您已经完成了图像的加载，然后进行了一些复杂的处理以保存部分下载的图像。相反，您的 NSURLConnection 委托应该实现 -connectionDidFinishLoading。在此方法中，您会将连接的数据转换为图像并保存。

以下是我的设置方式：假设您有一个控制器类，它显示图像/需要下载更多图像。现在，创建一个名为“ImageDownloader”的类，它实现了 NSURLConnection Delegate。初始化此类时，您将为它提供图像名称和需要下载的图像的 URL。在 ImageDownloader 中，您需要一个 NSMutableData 属性。最后，您将需要一个诸如 -startDownload 之类的方法来让事情顺利进行。

-startDownload 应首先确保您的 NSMutableData 属性为空并已初始化。完成后，您可以开始 NSURLConnection 的下载。请务必将委托设置为您的 ImageDownloader 实例。在 -connection:didReceiveData 中，将接收到的数据附加到您的 NSMutableData 属性中。在 -connectionDidFinishLoading 中，将该 NSMutableData 属性转换为图像并使用控制器提供的图像名称保存它。从那里，让控制器实例知道图像是通过委托方法调用或通知保存的。

希望这可以帮助。

编辑：IIRC，Apple 提供了一些名为“ImageDownloader”的示例代码，如果这种解释令人困惑，它非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:12:39.950

我开发了一个名为 File Downloader 的类，如下所示：

第 1 步：创建一个“FileDownloader.h”并将其添加到其中。

```
#import <Foundation/Foundation.h>

@protocol fileDownloaderDelegate <NSObject>

@optional
- (void)downloadProgres:(NSNumber*)percent forObject:(id)object;

@required

- (void)downloadingStarted;
- (void)downloadingFinishedFor:(NSURL *)url andData:(NSData *)data;
- (void)downloadingFailed:(NSURL *)url;

@end

@interface FileDownloader : NSObject
{

@private
    NSMutableURLRequest *_request;
    NSMutableData *downloadedData;
    NSURL *fileUrl;

    id <fileDownloaderDelegate> delegate;

    double totalFileSize;
}

@property (nonatomic, strong) NSMutableURLRequest *_request;
@property (nonatomic, strong) NSMutableData *downloadedData;
@property (nonatomic, strong) NSURL *fileUrl;

@property (nonatomic, strong) id <fileDownloaderDelegate> delegate;

- (void)downloadFromURL:(NSString *)urlString;

@end 
```

第 2 步：创建一个“FileDownloader.m”并编写以下内容

```
#import "FileDownloader.h"

@implementation FileDownloader

@synthesize _request, downloadedData, fileUrl;
@synthesize delegate;

- (void)downloadFromURL:(NSString *)urlString
{
    [self setFileUrl:[NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];

    self._request = [NSMutableURLRequest requestWithURL:self.fileUrl cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60.0f];
    NSURLConnection *cn = [NSURLConnection connectionWithRequest:self._request delegate:self];
    [cn start];
}

#pragma mark - NSURLConnection Delegate
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    if([delegate respondsToSelector:@selector(downloadingStarted)])
    {
        [delegate performSelector:@selector(downloadingStarted)];
    }

    totalFileSize = [response expectedContentLength];    
    downloadedData = [NSMutableData dataWithCapacity:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [downloadedData appendData:data];

    if([delegate respondsToSelector:@selector(downloadProgres:forObject:)])
    {
        [delegate performSelector:@selector(downloadProgres:forObject:) withObject:[NSNumber numberWithFloat:([downloadedData length]/totalFileSize)] withObject:self];
    }
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    if([delegate respondsToSelector:@selector(downloadingFailed:)])
    {
        [delegate performSelector:@selector(downloadingFailed:) withObject:self.fileUrl];
    }    
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    if([delegate respondsToSelector:@selector(downloadingFinishedFor:andData:)])
    {
        [delegate performSelector:@selector(downloadingFinishedFor:andData:) withObject:self.fileUrl withObject:self.downloadedData];
    }
}

@end 
```

第 3 步：现在在您的视图控制器中导入“#import "FileDownloader.h"" 并在 .h 文件中导入 "fileDownloaderDelegate" 委托

第 4 步：创建对象，设置委托和 URL 以下载文件。

```
FileDownloader *objDownloader = [[FileDownloader alloc] init];
[objDownloader setDelegate:self];
[objDownloader downloadFromURL:@"yourURL"]; 
```

第 5 步：不要忘记在视图控制器中实现 Delegate 方法以获取有关下载进度的通知。请享用..

# perl - 2路客户端-服务器

> ID：15877969
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:47.077
> 
> 标签：perl, sockets, client-server

谁能指导我使用 IO::Socket::INET 开发的 2 路客户端-服务器脚本来**发送和接收文本消息？** 我需要研究它的流程和工作。泰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:05:27.557

它就像任何其他文件句柄一样。

```
while (<$socket>) {    # Receiving
   print $socket $_;   # Sending
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:57:00.983

这是上述问题的最简单解决方案：

**服务器脚本**

```
#!/usr/bin/perl

use strict;
use warnings;
use IO::Socket::INET;

my $socket;
my  $clientsocket;
my $serverdata;
my $clientdata;

$socket = new IO::Socket::INET (
    LocalHost => '127.0.0.1',
    LocalPort => '0155',
    Proto => 'tcp',
    Listen => 1,
    Reuse => 1
) or die "Oops: $! \n";
print "Waiting for the Client.\n";

$clientsocket = $socket->accept();

print   "Connected from : ", $clientsocket->peerhost();     # Display messages
print   ", Port : ", $clientsocket->peerport(), "\n";

# Write some data to the client  
$serverdata = "This is the Server speaking :)\n";
print $clientsocket "$serverdata \n";

# read the data from the client
$clientdata = <$clientsocket>;
print "Message received from Client : $clientdata\n";

$socket->close(); 
```

**客户端脚本：**

```
#!/usr/bin/perl

use strict;
use warnings;
use IO::Socket::INET;

my $socket;
my $serverdata;
my $clientdata;

$socket = new IO::Socket::INET (
  PeerHost => '127.0.0.1',
  PeerPort => '0155',
  Proto => 'tcp',
) or die "$!\n";

print "Connected to the Server.\n";

# read the message sent by server.
$serverdata = <$socket>;
print "Message from Server : $serverdata \n";

# Send some message to server.
$clientdata = "This is the Client speaking :)";
print $socket "$clientdata \n";

$socket->close(); 
```

# php - 计算十年的结束

> ID：15877971
> 
> 赞同：1
> 
> 时间：2013-04-08T11:32:47.683
> 
> 标签：php

给定年份作为字符串计算“下一个”十年的最简单方法是什么？例如：

```
"2011" -> "2020"
"2012" -> "2020"
"2013" -> "2020"
 ...
"2020" -> "2020"
"2021" -> "2030"
 ... etc. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T11:36:43.177

试试这个：

```
$endOfDecade = $year - ( $year % 10 ) + ($year % 10 ? 10 : 0); 
```

最后一部分处理十年后的最后一年。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T11:35:58.553

```
$date = '2013';
echo ceil($date/10)*10; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T11:35:06.127

只需尝试：

```
$year = 2013;
$endOfDecade = $year - ( $year % 10 ) + 10; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T11:36:05.443

```
<?php
    $x = date('Y'); 
    while($x % 10 !=0)
    {
        $x++;
    }
    echo $x;
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T11:36:36.733

```
<?php
$year=2013;

 $decade=$year+((($year%10)>0)?(10-($year%10)):0);
 echo $decade;

?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T11:37:32.677

我不知道这是否是最优雅的解决方案，这对于 SO 来说不是一个合适的问题，但这里有一个解决您问题的算法：

```
$year = 2013;
$end = $year + (10 - $year%10) 
```

# c# - 取消订阅后事件处理程序不起作用

> ID：15877972
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:50.177
> 
> 标签：c#, windows-phone-7, event-handling, windows-phone-8

我正在`Page.onNavigatedTo`像这样在我的方法上调用一个事件处理程序

```
 oBooks.OnStatusChanged += oBooks_OnStatusChanged; 
```

它工作正常而且我也在我的页面`OnNavigatedFrom`事件上取消订阅这个事件处理程序，就像这样

```
oBooks.OnStatusChanged -= oBooks_OnStatusChanged; 
```

它也工作正常。但是可以说它是我的 MainPage，我导航到其他页面，然后导航回此页面，它尝试订阅我的方法，但这次它没有触发我的事件处理程序。

我在哪里失踪或做错了？

# php - 在域后添加额外路径

> ID：15877977
> 
> 赞同：0
> 
> 时间：2013-04-08T11:32:58.297
> 
> 标签：php, url, redirect

如果尝试在我的所有网址中的域之后的网址中添加额外的路径

```
$extra = "en";
$domain = "http://domain.com";
$current = currentURL();
$rest_path = str_replace($domain,'',$current);
$result = $domain."/".$extra.$rest_path;

// $result is "http://domain.com/en/mysub/mysub" 
```

在此之后，我通过使用 PHP 重定向重定向我的网站

**获取当前网址就像..**

```
function currentURL() {
    $pageURL=(@$_SERVER["HTTPS"]=="on")?"https://":"http://";
        if($_SERVER["SERVER_PORT"]!="80"){
            $pageURL.=$_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
        }else{
            $pageURL.=$_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
        }
        return $pageURL;
} 
```

这看起来像很多步骤，这样做更容易吗？或查看我糟糕的编码。

PS：尝试不使用`.htaccess`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:38:04.263

我只会使用：

```
$extra = "en";
$domain = "http://domain.com";
$result = $domain."/".$extra.$_SERVER['REQUEST_URI']; 
```

因为您没有使用协议或域名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:42:55.690

```
$extra = 'en';
$domain = $_SERVER['SERVER_NAME'].'/'.$_SERVER['REQUEST_URI'];
$new_url=str_replace('.com','.com/'.$extra,$domain); 
```

不？

# ios - 从表格视图中删除单元格时崩溃

> ID：15877979
> 
> 赞同：0
> 
> 时间：2013-04-08T11:33:03.517
> 
> 标签：ios, tableview

```
- (void)tableView:(UITableView *)tv commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
forRowAtIndexPath:(NSIndexPath *)indexPath {
    if(editingStyle == UITableViewCellEditingStyleDelete) {

        //Get the object to delete from the array.
        NSLog(@"%@",[[_arrayForTable valueForKey:@"IDS"] objectAtIndex:[indexPath row]] );

        NSInteger myInteger = [[[_arrayForTable valueForKey:@"IDS"] objectAtIndex:[indexPath row]] integerValue];
      NSNumber *selRow = [NSNumber numberWithInt:myInteger];
        NSLog(@"%@",selRow);
        [self removeCell:selRow]; // this is working perfectly it gets remove from database

        //Delete the object from the table.
        // app get crash here crash report is pested below 
        [self.table deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    }
}

- (void) removeCell:(NSNumber *)selRow{

       NSLog(@"_arrayForTable%@",_arrayForTable);
 NSInteger myInteger = [selRow integerValue];

    [_arrayForTable removeObjectAtIndex:myInteger];

    NSLog(@"_arrayForTable%@",_arrayForTable);

    if(deleteStmt == nil) {
        const char *sql = "delete from PersonNamesAndBirthDates where ID = ?";
        NSLog(@"%s",sql);
        if(sqlite3_prepare_v2(database1, sql, -1, &deleteStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating delete statement. '%s'", sqlite3_errmsg(database1));
    }
    NSLog(@"%d",myInteger);

    //When binding parameters, index starts from 1 and not zero.
    sqlite3_bind_int(deleteStmt, 1, myInteger );

    if (SQLITE_DONE != sqlite3_step(deleteStmt)) 
        NSAssert1(0, @"Error while deleting. '%s'", sqlite3_errmsg(database1));

    sqlite3_reset(deleteStmt);
} 
```

> *** 断言失败 -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1912.3/UITableView.m:1046 2013-04-08 17:01:13.069 生日提醒 2[583:15803] ***由于未捕获的异常而终止应用程序'NSInternalInconsistencyException'，原因：'无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (12) 必须等于更新前该节中包含的行数 (12 )，加上或减去从该节插入或删除的行数（0 插入，1 删除），加上或减去移入或移出该节的行数（0 移入，0 移出）。

请提出一些建议

我的 numberofrow 方法如下

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.

    return _arrayForTable.count;

} 
```

应用程序不是每次都崩溃有时有时工作有时崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:03:23.443

好的，正如我所看到的，您正在获取特定行的 ID：

```
NSInteger myInteger = 
    [[[_arrayForTable valueForKey:@"IDS"] objectAtIndex:[indexPath row]] integerValue];
NSNumber *selRow = [NSNumber numberWithInt:myInteger]; 
```

然后，您使用该特定行的 ID 作为将其从数组中删除的索引。

```
NSInteger myInteger = [selRow integerValue];
[_arrayForTable removeObjectAtIndex:myInteger]; 
```

这就是事情出错的地方。如果数组的顺序与您的 TableView 相同，则需要从中删除`indexPath.row`。该 ID 是您的数据库所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:45:08.010

试试这个：

```
- (void)tableView:(UITableView *)tv commitEditingStyle :(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if(editingStyle == UITableViewCellEditingStyleDelete) {

        //Get the object to delete from the array.
        NSLog(@"%@",[[_arrayForTable valueForKey:@"IDS"] objectAtIndex:[indexPath row]] );

        NSInteger myInteger = [[[_arrayForTable valueForKey:@"IDS"] objectAtIndex:[indexPath row]] integerValue];
        NSNumber *selRow = [NSNumber numberWithInt:myInteger];
        NSLog(@"%@",selRow);

        [self.table beginUpdates];        

        [self removeCell:selRow]; // this is working perfectly it gets remove from database

        //Delete the object from the table.
        // app get crash here crash report is pested below 
        [self.table deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

        [self.table endUpdates];

    }
} 
```

注意改变 tableview 的代码行`[self.table beginUpdates];`和`[self.table endUpdates];`周围的代码行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T13:16:58.923

IT"S WORKING at and of your commitEditingStyle 方法添加这一行

```
[TableViewForFirstView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

# jquery-ui - 选择具有多个类名的隐藏元素

> ID：15877981
> 
> 赞同：1
> 
> 时间：2013-04-08T11:33:05.363
> 
> 标签：jquery-ui, jquery, jquery-plugins

在下面的 html 代码中，其中一个 div 是隐藏的，而另一个不是。我的问题是

1.如何选择具有隐藏属性的多个类名的任何元素

2.html隐藏或显示时如何获取内部html

我试过，

```
 $('.middle-cont,.float-lft,.content-height').html() 

 $('.middle-cont,.float-lft,.content-height:hidden').html() //will this work 
```

html

```
<div class="middle-cont float-lft content-height">
 some html
</div>

<div class="middle-cont float-lft content-height" > //This div is hidden
 some html123
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:33:30.610

没有逗号，逗号将选择具有任一类的所有元素，而删除逗号将选择具有所有类的元素：

```
$('.middle-cont.float-lft.content-height').html() 
```

不管它是否隐藏对此都没有影响。

[**小提琴**](http://jsfiddle.net/DKjaZ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:34:04.303

您不需要`,`选择具有多个类的元素`html()`..用于获取内容..（隐藏与否无关紧要）

```
$('.middle-cont.float-lft.content-height').html() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:34:35.147

逗号使用 as`OR`运算符，这里不需要它，所以：

```
$('.middle-cont.float-lft.content-height').html() 
```

您的元素是否隐藏并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T11:45:42.663

像这样试试

```
 var innerHtml = $(".middle-cont").filter(".float-lft").filter(".content-height").html();
 alert(innerHtml); 
```

[演示](http://jsfiddle.net/dtN7y/1/)

# sql-server-2008 - 为 sp_MSforeachtable 执行的 DROP 语句计数

> ID：15877983
> 
> 赞同：0
> 
> 时间：2013-04-08T11:33:11.943
> 
> 标签：sql-server-2008, drop-table

![在此处输入图像描述](https://i.stack.imgur.com/UIcA4.jpg)我正在使用删除数据库中的所有表名

```
EXEC sp_MSforeachtable 'DROP TABLE ?' 
```

有没有办法我可以计算丢弃的表数。

谢谢，秘鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:34:47.603

```
DECLARE @before int;

SELECT @before = COUNT(*) FROM sys.tables;
EXEC sp_MSforeachtable 'DROP TABLE ?'
SELECT @before - COUNT(*) FROM sys.tables 
```

# perforce - 提交搁置变更列表的最快方式

> ID：15877984
> 
> 赞同：21
> 
> 时间：2013-04-08T11:33:13.733
> 
> 标签：perforce

我搁置了一个变更列表（比如 X），并确保了它的正确性。现在我想提交更改列表。我可以

1.  p4 unshelve -s X -c Y 其中 Y 是我在执行此命令之前创建的新更改列表。然后 p4 shelve -c X -d 最后 p4 submit -c Y
2.  否则我可以取消搁置 X，删除搁置 X 并将本地副本移动到更改列表 X（p4 重新打开 -c X ）并提交 X。
3.  最后一个选项是取消搁置 X，删除搁置 X，p4 更改（和编辑描述），最后 p4 提交

您对以下方面有什么建议：-

1.  使用 1/3，但复制粘贴 X 已经拥有的描述到新的变更列表
2.  使用 2 但在命令 p4 重新打开时手动复制每个打开的文件。

2 优于 1 和 3 的唯一优点是我不必删除 X（因为它原来是我提交的更改列表，而在其他情况下它仍然是“待定”）。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-11T09:46:22.800

最短的方法是：

```
$ p4 shelve -c #changelist -d
$ p4 submit -c #changelist 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T13:43:30.243

在新的 2013.1 版本的 Perforce 服务器中，您现在可以执行“p4 submit -e X”，直接提交架子，无需先取消架子。

试试看，这是一个很棒的功能！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T11:53:50.100

根据我使用 Perforce 的经验，我会取消搁置更改列表，删除搁置的文件并提交。只需确保更改列表的描述准确无误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-08T15:19:48.190

使用 Perforce 2013.1 或更高版本，您可以直接提交搁置的更改列表“12345”：

```
p4 submit -e 12345 
```

在以前的版本中，使用以下组合：

```
p4 unshelve -s 12345
p4 submit ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-22T09:58:41.310

由于是 2018 年，这里是更新的 perforce 版本（2013.1 和更新版本）的更新答案

```
p4 submit -e 123456 
```

如果您已经在某些树中打开了该搁置列表，则此命令将失败，如下所示：

```
Change 123456 has shelved files --  cannot submit 
```

`-C client_name_where_shelvelist_is_open`在这种情况下，在运行上述命令之前，获取该树的根（或使用）并恢复更改，如下所示：

```
p4 revert -c 123456 ...
p4 submit -e 123456 
```

# jquery - 我可以将 jQuery sortable 'sortstop' 事件绑定到一个项目吗？

> ID：15877990
> 
> 赞同：0
> 
> 时间：2013-04-08T11:33:22.960
> 
> 标签：jquery, events, jquery-ui-sortable

我需要将'sortstop'事件绑定到`li`树中的项目，而不是`ol`..这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:51:07.097

您可以在 上绑定一个事件`li`，并通过执行以下操作来触发它：

```
$('li').on( 'sortstop', function( e, ui ) {
  // Do stuff
} );

$('ol').sortable( {
  stop: function( e, ui ){
    ui.item.trigger( e.type, ui );
  }
} ); 
```

# c++ - 具有不同返回类型和参数的函数 C++

> ID：15877991
> 
> 赞同：0
> 
> 时间：2013-04-08T11:33:23.580
> 
> 标签：c++, function, types, parameters, return

我需要这个 C++ 问题的答案，我已经解决了，但显然我错过了一些东西，到目前为止我也会发布我的答案......

编写一个程序来计算和打印工资单。

用户输入的是员工姓名、工作小时数和小时工资率。

您必须声明三个函数：

1) 一个用于输入；

2) 一、计算员工工资；和

3）一张打印工资单

用户必须在变量和中输入员工姓名`theEmployee`、工作小时数和小时工资率。变量是 a ，其他两个变量的类型是。由于 theEmployee、theHoursWorked 和 thePayRate 的值将在此函数中更改，.`theHoursWorked``thePayRate``employee``string``float``reference parameters need to be used`

计算函数将接收代表工作小时数和小时工资率的两个参数，进行计算并返回员工的工资。工作时间超过 40 小时的员工，每加班一小时的工资是每小时工资的 1.5 倍。由于函数中的参数没有改变，所以它们应该是值参数。该函数应该返回一个`float`代表工资的值。

输出函数必须显示用户输入的员工姓名、工作小时数、加班小时数和小时工资率以及员工的工资。为了

例子：

粉红豹的工资单

工作时间：43.5小时

加班时间：3.5小时

时薪：R125.35

支付：R5672.09

主要功能包括一个 for 循环，允许用户重复计算五名员工的工资单。

```
int main()
{
string theEmployee;
float theHoursWorked;
float thePayRate;
int thePay;

for (int i = 0; i < 5; i++)
{
    getData(theEmployee, theHoursWorked, thePayRate);
    thePay = calculatePay (theEmployee, theHoursWorked, thePayRate);
    printPaySlip(theEmployee, theHoursWorked, thePayRate, thePay);
}

return 0;
} 
```

那就是他们给的，这是我到目前为止所做的，我想我在参考参数上苦苦挣扎？

```
#include <iostream>
#include <string>

using namespace std;

int getData (string & theEmployee , float & theHoursWorked, float & thePayRate)
{
cout<< "Enter your name and surname: "<< endl;
getline(cin, theEmployee);

cout << "Include the numbers of hours you worked: " << endl;
cin >> theHoursWorked;

cout << "What is your hourly pay rate?" << endl;
cin >> thePayRate;

return theEmployee, theHoursWorked, thePayRate;

}

float calculatePay( string & theEmployee, float & theHoursWorked, float & thePayRate)
{
float tempPay, thePay, overtimeHours;
if (theHoursWorked > 40)
    {
    tempPay = 40 * thePayRate;
    overtimeHours = theHoursWorked - 40;
    thePay = tempPay + overtimeHours;}
else
    thePay = theHoursWorked * thePayRate;
    return thePay;
}

int printPaySlip( string & theEmployee, float & theHoursWorked, float &    
thePayRate, float thePay)
{
float overtimeHours;
cout << "Pay slip for " << theEmployee <<endl;
cout << "Hours worked: "<< theHoursWorked << endl;
if (theHoursWorked > 40)
    overtimeHours = theHoursWorked - 40;
else
    overtimeHours = 0;
cout << "Overtime hours: "<< overtimeHours << endl;
cout << "Hourly pay rate: " << thePayRate << endl;
cout << "Pay: " << thePay << endl;
cout << endl;

}

int main()
{
string theEmployee;
float theHoursWorked;
float thePayRate;
int thePay;

for (int i = 0; i < 5; i++)
{
    getData(theEmployee, theHoursWorked, thePayRate);
    thePay = calculatePay (theEmployee, theHoursWorked, thePayRate);
    printPaySlip(theEmployee, theHoursWorked, thePayRate, thePay);
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:38:20.053

getData 函数中无需返回。这应该工作

```
void getData (string & theEmployee , float & theHoursWorked, float & thePayRate)
{
    cout<< "Enter your name and surname: "<< endl;
    getline(cin, theEmployee);

    cout << "Include the numbers of hours you worked: " << endl;
    cin >> theHoursWorked;

    cout << "What is your hourly pay rate?" << endl;
    cin >> thePayRate;

} 
```

请注意，getData 函数被声明为 void，这意味着严格来说它不返回值。在您的问题规范中，“return”被松散地用于表示函数计算然后返回给调用函数的值，这并不意味着您必须`return`在代码中有实际值。

顺便说一句，不是你问的问题，但你会遇到麻烦，因为你正在`getline`与`>>`. 请参阅[此处](https://stackoverflow.com/questions/9336209/mixing-ifstream-getline-and)以获取解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:44:14.430

首先，`getData`函数`printPaySlip`不应该返回任何东西——返回类型应该从 更改`int`为`void`。

其次，该行`return theEmployee, theHoursWorked, thePayRate`是一个错误，应该删除 - C++ 不允许多个返回值，而是使用引用参数。这意味着允许该函数修改其参数。您已经正确阅读了它们，因此只需删除该`return`行。

第三，`calculatePay`and`printPaySlip`函数不需要引用，因为它们不修改参数。甚至问题陈述都说它们应该取值，所以只需删除`&`'s.

第四，您的`calculatePay`函数错误地计算了加班时间的费率 - 它只是将加班时间加到总工资中，而没有将其乘以`thePay * 1.5`。

# python - Django：为什么我应该使用一个包进行 Twitter 引导集成？

> ID：15877995
> 
> 赞同：6
> 
> 时间：2013-04-08T11:33:31.133
> 
> 标签：python, django, twitter-bootstrap, django-templates

我阅读了几篇关于使用哪个引导程序包的帖子（主要是 Crispy-form VS django-toolkit-integration）

但是我对 Django 还是很陌生，我仍然不明白这些包的真正需求是什么。我的意思是，Twitter 引导程序只不过是 css/js 文件。所以，我想通过将我的 Django 表单和字段链接到 HTML 类来使用引导程序（使用 .py 表单的小部件，并直接在其他字段的 .html 模板中）

那么，这些套餐有什么好处呢？如果我选择不使用它只是方便还是我真的错过了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T13:37:33.403

这只是表格的便利。它为您提供模板标签。Django 提供了两个方法 as_p、as_ul 和 as_table，但它们都不能与 bootstrap 一起顺利运行。所以你使用类似的东西。

```
{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
    {% form|crispy %}
{% endblock %} 
```

它还提供了一些方便的类来在 Django 表单中进行配置。

因此，这不是必需的，但它会为您节省一些配置表单的麻烦。您可以在没有它们的情况下开始，当问题出现时，您会发现它们很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:38:51.147

正如您自己所说，Twitter Bootstrap 只是 CSS 和 JS 文件，您将在 HTML 结构中应用它们并获得其元素的新面貌。Bootstrap 提供了许多现成的元素和样式。

许多网站都使用 Bootstrap 准备好结构，甚至是网站模板，例如：[Bootsnipp](http://bootsnipp.com/snipps)、[Bootswatch](http://bootswatch.com)、[Wrapbootstrap](https://wrapbootstrap.com/)等等。我看到的最大优势是不会在样式上浪费时间（我不是在贬低设计师），而是更多地关注编程。

我的最后一点是：给 Twitter Bootstrap 一个机会，它在更快地创建模型和样式方面非常有用，更专注于最终产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:50:39.110

其中一些包可以用 Less（语言）编写你的 CSS，并自动编译它们。此外，有些可能会添加资产的压缩和串联。

由于 Bootstrap 只不过是一堆 CSS 和 Javascript 文件（而且我不使用 Less），因此我所需要的只是表单集成，这很容易通过以下方式实现：

注意：这是我自己的代码的一个非常具体的例子，但你明白了。

```
<div class="row">
    <div class="span6 offset3">

    <form id="form-history" class="form-horizontal text-center"
          action="/somepath/" method="post">
        <fieldset>
            <legend><h3>History</h3></legend>

    {% for field in form %}
        <div class="row">
            <div class="span3">{{ field.label }}</div>
            <div class="span3">{{ field }}</div>
        </div>
    {% endfor %}

        <div class="row pull-right">
            <button class="btn btn-primary btn-large" type="submit">
                <i class="icon-ok icon-white"></i> Find
            </button>
        </div>

        </fieldset>
    </form> 
```

# c# - 如何在表格布局面板中设置具有特定绝对大小的列数？

> ID：15877997
> 
> 赞同：0
> 
> 时间：2013-04-08T11:33:40.843
> 
> 标签：c#, winforms, tablelayoutpanel

我需要在具有特定大小的表格布局面板中设置列数。用户控件的大小被锁定。当我最大化表单时，我想更改一行中的列数。

如何通过获取表格布局面板的新宽度并设置列数来做到这一点？

在这种情况下，我可以连续更改用户控件的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:03:02.373

调整大小时设置列数 -

`tableLayoutPanel1.ColumnCount = tableLayoutPanel1.Width / 100;`

并设置列大小样式 -

`tableLayoutPanel1.ColumnStyles[ColIndex].SizeType = SizeType.Absolute; tableLayoutPanel1.ColumnStyles[ColIndex].Width = *DesiredWidth*;`

请注意，如果有 6 列，然后您调整它的大小以使仅存在 3 列，则放置在这些列中的控件将丢失。

[MSDN - TableLayoutPanel 类](http://msdn.microsoft.com/en-us/library/2t82c7dk.aspx)