# StackOverflow 问答 12657000-12657999

# iphone - Obj-C，在 NSObject 类的类型对象上找不到属性“navigationController”？

> ID：12657004
> 
> 赞同：2
> 
> 时间：2012-09-29T22:17:02.020
> 
> 标签：iphone, objective-c, ios, xcode

我收到以下错误

```
Property 'navigationController' not found on object of type 
```

我继承了这个项目，不知道发生了什么。

在我的 didSelectRowAtIndexPath 文件中，我有

```
[self.navigationController pushViewController:nextController animated:YES]; 
```

在我访问应用程序委托导航控制器（即插座）之前，这不是问题。但是，我不得不放弃这种方法，因为它给我带来了问题。我已经转换了我的项目的其余部分。但是在这种情况下，项目没有使用普通的表格视图，导航控制器看起来不可用。我在其他 7 个视图中有这个问题。希望我能解决这个问题，并保持这个更干净的代码？

![在此处输入图像描述](../Images/fd680b3c46e7ad5e68b6f52913385605.png) 我对此感到非常困惑，我认为这是因为 SetsStyleSectionController 不是视图控制器而是 NSObject。

但是，即使将此设置为 UIViewController，代码也会运行，但也不会推送。将 SetsSectionController 从 NSObject 更改为 UIViewController 不可用。

我不确定如何进行？

我正在远离应用程序委托的推送。

编辑：下面讨论的屏幕截图 2 ![在此处输入图像描述](../Images/79f1d8be7a59034608c4fca4c36ff08f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:45:49.910

我在这里看到了几个问题。您对协议和类有误解，并且您还有一个与协议接口的应用程序，虽然出于善意，但实际上使您的生活变得比需要的要困难得多。

您要处理的第一个问题是理解协议和类之间的差异，以及采用协议和从类继承之间的一些问题。这完全没问题，这东西不容易。基本上，协议只是对象的接口，而类既提供接口又提供实现。换句话说，协议只是可以调用的方法列表，而类既是方法列表又是执行这些方法的代码。要获得更完整的解释，也许您最好直接查看源代码 - Apple 的[“Objective-C 编程语言”](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)可能会对您有所帮助，因此请阅读那里的类和协议。我认为这样做你会明白为什么你`id<SetSectionController>``navigationController`没有明确定义的属性。但是，如果您之后对此有具体问题，请告诉我。

更难解决的问题是这个`SetSectionController`协议。它有几个问题，描述它们都超出了这个答案的范围。事情是这样的——实现基本上需要实现这个协议的对象来知道哪个导航控制器与表格视图相关联。到目前为止，这已经通过将它们耦合到应用程序的委托来提供*deus ex machina*，您可以删除这种耦合。但是现在您必须找到另一种方法来将正确的数据填充到视图控制器中，以将其推送到导航堆栈上。

我认为您应该将推送逻辑移动到视图控制器中，现在让节控制器提供一个接口，为视图控制器提供所需的信息。所以说部分控制器有一个像这样的伪代码的实现：

```
- (void)...didSelectRow...
{
    id detailsForIndexPath = self.dataForRows[indexPath.row];
    DetailViewController *vc = [DetailViewController new];
    vc.details = detailsForIndexPath;
    [APPDELEGATE.navigationController push:vc];
} 
```

然后我会添加一个方法来`SetSectionController`调用类似的东西`-dataForRow:`，其实现就像上面方法的第一行一样。然后，在您的视图控制器中，`...didSelectRow...`像这样实现：

```
- (void)...didSelectRow...
{
    id<SetSectionController> sc = self.sectionControllers[indexPath.section];
    id details = [sc dataForRow:indexPath.row];
    DetailViewController *vc = [DetailViewController new];
    vc.details = details;
    [self.navigationController push:vc];
} 
```

如果您的部分控制器正在做其他有用的事情，`...didSelectRow...`请确保将其移动到视图控制器或`...didSelectRow...`现在转发到部分控制器。

虽然我很欣赏尝试通过多态性使复杂的表部分更容易管理，但这个协议并不是正确的方法。它盲目地复制方法，`UITableViewDelegate`而不`UITableViewDataSource`考虑这些是否是正确的问题来询问负责单个表的单个部分的内容。如果您仍然想使用它，我认为需要进行一些重大的重构才能使其成为真正让您的生活更轻松而不是更难的形状。根据每个部分逻辑偏差的复杂性，我可能会完全放弃它。但这确实是另一个问题。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:12:47.693

你是什​​么意思它“不可用”？你的意思是你不想/不允许继承 UIViewController，或者你得到一个编译器错误？根据您对问题的评论：

`SetsSectionController.h:12:34: Cannot find protocol declaration for 'UIViewController'`

你正在改变错误的东西来改变你的子类。举个例子：

```
#import <Foundation/Foundation.h>

@protocol foo <NSObject>
- (void) bar;
@end

@interface lolcats : NSObject <foo>
@end 
```

要更改您的超类，请在冒号后更改类名。前任。

```
@interface lolcats : NSObject <foo> 
```

变成

```
@interface lolcats : UIViewController <foo> 
```

你就跑起来了。但是，如果您不小心更改了协议的协议要求

```
@protocol foo <NSObject> 
```

到

```
@protocol foo <UIViewController> 
```

相反，或者更改您遵守的协议`<UIViewController>`，您最终会得到您得到的确切错误。你可能会感到困惑，因为协议说遵守它的对象也必须遵守 NSObject 协议，而 NSObject 也是一种对象。对象和协议是分开的东西，所有的对象都继承自NSObject，从而继承了协议。基本上，它是说“使用此协议的对象必须是对象”。

你为什么期望这会起作用？该对象只是一个标准的 NSObject，它声明它遵循包含一些方法的协议。为什么它会有一个导航控制器属性？它没有从任何东西继承它。无论如何，根据您的错误，您可能只是更改了错误的内容。确保在冒号后更改超类的类名。

# java - 检测单击自定义 ListView 布局中的复选框？

> ID：12657005
> 
> 赞同：0
> 
> 时间：2012-09-29T22:17:03.600
> 
> 标签：java, android, listview, checkbox, onitemclicklistener

我知道关于同一主题还有很多其他线程，但它们似乎都不适用于我的场景，我无法让我的列表视图与他们的代码一起使用。基本上，我使用 SimpleCursorAdapter 用数据库中的项目填充列表视图。每个列表视图行都使用一个自定义布局，该布局由一个复选框和一行简单文本组成。如何检测对复选框的点击？我知道我需要使用 OnItemClickListener，但我不知道如何将其合并到我的代码中。这是我的代码：

```
remindersCursorAdapter = new SimpleCursorAdapter(this,
                         R.xml.view_reminders_item_layout,
                         remindersCursor, new String [] { RemindersDAO.NAME },
                         new int[] { R.id.view_reminders_item_text } );

viewRemindersListView.setAdapter(remindersCursorAdapter); 
```

R.xml.view_reminders_item_layout 是自定义列表视图布局文件。如何从此文件中捕获复选框并为其设置点击侦听器？感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:25:03.203

如果要在单击项目时选中复选框，可以通过在 onItemClick 方法中设置 Checkbox 的选中状态来实现。

```
 @Override
  public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {

       // now get the checkbox view. Then set the checked status.
        CheckBox checkbox = (CheckBox) view.findViewById(R.id.check_box);
        checkBox.setChecked(!checkbox.isChecked());
  } 
```

如果要检测仅单击复选框，则在 xml 中设置可聚焦的 true。// 在您的自定义列表视图项中。它采用当前视图焦点。

```
 <Checkbox>
          android:focusable="true"
      </Checkbox> 
```

# c# - 如何使用 EPPlus 检查它是否是受密码保护的 excel 文件？

> ID：12657006
> 
> 赞同：1
> 
> 时间：2012-09-29T22:17:08.700
> 
> 标签：c#, excel, epplus

当我尝试打开受保护的文档时，我遇到了这个异常

```
System.Exception : Can not open the package. Package is an OLE compound document. If this is an encrypted package, please supply the password 
```

我写了这个很难的测试方法

```
public bool HasPassword()
        {
            try
            {
                if(File.Exists(FileName))
                {
                    var fileStream = File.Open(FileName, FileMode.Append);
                    var package = new ExcelPackage();
                    package.Load(fileStream);
                }
            }
            catch(Exception)
            {
                return true;
            }
            return false;
        } 
```

但我认为这是错误的做法。

如何检查它是否是受密码保护的 excel 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:44:47.997

如果 EEPlus 不是强制性的，您可以简单地使用 Workbook.HasPassword 属性。

```
Workbook book = ****xyz****;
if (book.HasPassword)
{
    book.Password = Properties.Settings.Default.ExcelFilePW;
    MessageBox.Show("Excel file is encrpyted");
} 
```

因此，您需要创建对可在 .NET/COM 中找到的 Office Interop Excel 组件的引用（有时）。然后使用 using 指令将其嵌入到您的项目中。

# css - 没有红宝石的 Sass 或 Compass？

> ID：12657008
> 
> 赞同：105
> 
> 时间：2012-09-29T22:17:33.420
> 
> 标签：css, sass, compass-sass

有没有办法在没有 Ruby 的情况下使用 Sass 或 Compass 或类似的东西？

我一直在寻找谷歌和这个网站，找不到任何东西，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-29T23:02:26.010

Sass 最初是为 Ruby 编写的，但现在他们创建了[libSass](http://sass-lang.com/libsass)，它是 Sass 引擎的一个`C/C++`端口，这使得将引擎集成到 IDE 或其他语言中变得更加容易。此时，您可以在 Ruby、[Node.js](https://www.npmjs.org/package/node-sass)、[Python](http://dahlia.kr/libsass-python/)、[PHP](https://packagist.org/packages/leafo/scssphp)、[Java](https://github.com/warmuuh/libsass-maven-plugin)、[.NET](https://github.com/darrenkopp/libsass-net)等中使用 Sass 引擎。有关更多信息，请访问[libSass](http://sass-lang.com/libsass)。此外，您的 IDE 可能有一个支持 Sass 的插件，而不需要使用 libSass 的 ruby​​。

下面的原始答案可能适用于您的情况，也可能不适用于您的情况（取决于您的语言是否实现了对 libSass 的支持）。出于存档原因，我决定将其保留原样。

* * *

Sass（需要 Ruby）

> Sass 是用 Ruby 编写的，因此您还需要安装 Ruby。 [取自 sass 的网站](http://sass-lang.com/download.html)

Compass（需要 Ruby，因为它基于 SASS）

> Compass 是一个开源 CSS 创作框架，它使用 Sass 样式表语言使编写样式表变得强大而简单。 [取自指南针的网站](http://compass-style.org/help/)

Less（用js编写，需要页面中包含node.js或less.js）

> LESS 扩展了 CSS 的动态行为，例如变量、mixin、操作和函数。LESS 使用 Node.js 和 Rhino 在客户端（Chrome、Safari、Firefox）和服务器端运行。[取自 Less 的网站](http://lesscss.org/)

这些是我所知道的主要处理器。您可以为任何其他选择的语言编写自己的解析器/端口。

换句话说，不，你不能在没有 Ruby 的情况下使用 sass/compass，因为程序本身（sass 和 compass）是用 Ruby 编写的。所以你肯定需要它来运行它。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-01-22T21:03:09.930

实际上有一个库为 Node.js 提供绑定到 libsass，即 Sass 的 C 版本：[https ://npmjs.org/package/node-sass](https://npmjs.org/package/node-sass)

它允许您在不安装 Ruby 的情况下以令人难以置信的速度将 .scss 文件本地编译为 css。

要安装只需运行：

```
npm install node-sass 
```

如果需要，还有一个 Grunt 扩展：[https](https://github.com/sindresorhus/grunt-sass) ://github.com/sindresorhus/grunt-sass （这是我在这个问题中一直在寻找的）

了解更多信息：[https ://github.com/andrew/node-sass](https://github.com/andrew/node-sass)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-04-20T00:20:11.933

确实这个问题不够清楚，但我会尝试解决一些问题。还有其他不依赖 Ruby 的 CSS 预处理器（我现在想到的两个是*Less* [，](http://lesscss.org)我使用过并喜欢，但不如 Sass 强大，还有[Stylus](http://learnboost.github.io/stylus)，我没有使用过，两者都基于 JavaScript），但是当您特别询问 Sass + Compass 时，并且我仍在寻找相同的答案时，我将讨论这个问题。

@JamundFerguson 说：

> 有没有办法在没有 Ruby 的情况下编译 Sass？依靠。

## 有

Sass 是一种预处理语言。有一个用 Ruby 内置的编译器，任何人都可以用任何语言编写编译器。有一个名为[libsass](https://github.com/hcatlin/libsass)的 Sass 编译器的 C 实现，可用于任何允许导入 C 库的语言。[它是node-sass](https://github.com/andrew/node-sass)使用的库，它是一个内置于[Node.js](http://nodejs.org)的编译器，我还没有尝试过，也不知道它是如何工作的，以及它是否可以用于生产。移植 Compass 可能是一个时间问题（也许你最终会这样做？），因此我们可以拥有一个不依赖于 Ruby gem 的编译器（目前，有一个[node-compass](https://github.com/nathggns/node-compass)模块*确实*依赖于红宝石宝石）。

## 其他语言

到目前为止，我已经提到了 Node.js 编译器的可能性，您可能知道，它是一个 JavaScript 环境，是 Web 的语言和我选择的语言。但是您没有指定您希望将编译器写入哪种语言。我认为可能有多种语言构建的编译器，例如，@EricMeyer 提到了[Python](http://www.python.org)编译器。也许他正在使用[pyScss](https://github.com/Kronuz/pyScss)？这似乎内置了对 Compass 的支持。但是你需要一个 Python 环境。所以问题是：除非您运行本机编译的二进制文件，否则您*将需要**一些**编译器环境。*（Less 有 less.js 可以包含在页面中以运行客户端并避免编译步骤，但它并不意味着在生产中使用它。）

## 原生应用

[我已经使用CodeKit](http://incident57.com/codekit)工作了一年，它非常好，编译 Sass/Compass、Less、Stylus 和 Haml、Slim、Jade 等模板语言。当它们自动更改时重建您的资产，您会立即在浏览器上看到更改。我唯一不喜欢的是，当移动到另一台计算机、安装 CodeKit、签出项目并尝试使用它时，我必须重新配置项目设置，我必须记住这些设置，以便进行构建就像我在另一台电脑上做的一样。此外，我开始与一个团队合作，他们还必须使用相同的设置配置项目（有时没有相同的项目配置会导致丑陋的不一致），而且使用 Ubuntu 的团队成员也无法使用它。那'一下子，就爱上了。正如@Dave 提到的，有[Scout](http://mhs.github.io/scout-app)也有[LiveReload](http://livereload.com)，但没有使用它们。

## 结论

结论是我没有一个强有力的结论。我仍在寻找相同的答案，但我希望这个答案能对在 Ruby 环境之外编译 Sass/Compass 的状态有所了解。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-07T19:33:51.643

只需对此进行一点更新，您就可以使用 SCSS/SASS 文件并即时生成正确的文件，而无需使用名为 Scout 的程序安装 Ruby。

Scout 有自己独立的 ruby​​ 环境，并且是用 java 编码的，所以在使用之前确保你的 java 是最新的。[林奇在这里。](http://mhs.github.com/scout-app/)

问候 ：）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-15T22:41:17.217

您实际上可以在没有 ruby​​ 的情况下解析 sass，您可以使用 node-sass。详细信息：[https ://github.com/andrew/node-sass](https://github.com/andrew/node-sass)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-25T11:22:32.663

如果这是针对 .NET 的，那么现在[有一个 libsass 的包装器](https://github.com/TBAPI-0KA/NSass)。可从[Nuget 获得](http://www.nuget.org/packages/NSass.Core/)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-18T08:11:51.063

[**Adobe Brackets**](http://brackets.io/)（免费、开源）可以在文件更改时编译 LESS、SASS 和 Stylus，并在实时预览期间更新样式，您只需从扩展管理器安装所需的扩展。获取[**括号**](http://brackets.io/)并享受！

编辑：正如其他问题所暗示的，如果您已经安装了 nodejs，[**node-sass也是一个不错的选择。**](https://www.npmjs.com/package/node-sass)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-17T09:42:04.913

macOS 用户可以通过运行以下命令安装**Dart Sass ：**

```
$ brew install sass/sass/sass 
```

Windows 用户可以通过运行以下命令安装**Dart Sass ：**

```
$ choco install sass 
```

更多信息： [https ://github.com/sass/dart-sass](https://github.com/sass/dart-sass)

# iphone - 从 iPhone 应用程序链接到 iBook 商店中的一本书

> ID：12657009
> 
> 赞同：2
> 
> 时间：2012-09-29T22:17:33.670
> 
> 标签：iphone, objective-c, ios, xcode, itunes

环顾四周后，我无法直接回答以下案例：我可以在不集成应用内购买 API 的情况下从我的 iphone 应用链接到 iBook 商店中的一本书吗？

据我所知，iBooks 确实会向您收取放置图书的费用，所以我的逻辑是这应该是可能的，否则您将被收取两次费用。

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T00:45:53.523

如果您的应用程序面向 iOS 6.0，您可以使用新`SKStoreProductViewController`功能允许用户直接从您的应用程序购买 iTunes、App Store 和 iBooks 内容，而无需离开它。

以下是如何从`UIViewController`. 您必须[将](https://stackoverflow.com/a/3377682/1378694)StoreKit.framework 添加到您的应用程序中。

`ViewController.h`

```
#import <StoreKit/StoreKit.h>

@interface UIViewController : UIViewController <SKStoreProductViewControllerDelegate>

@end 
```

`ViewController.m`

```
-(void)showProductPageForProductID:(NSInteger)productID {

    SKStoreProductViewController *sv = [[SKStoreProductViewController alloc] init];
    sv.delegate = self;

    NSDictionary *product = @{ SKStoreProductParameterITunesItemIdentifier: @(productID)};
    [sv loadProductWithParameters:product completionBlock:^(BOOL result, NSError *error) {

            if(result)
                [self presentModalViewController:sv animated:YES];
            else {
               //product not found, handle appropriately
            }
        }];

}    
-(void)productViewControllerDidFinish:(SKStoreProductViewController *)viewController {
            [viewController dismissModalViewControllerAnimated:YES];
 } 
```

如果您的目标设备低于 iOS 6.0，您可以使用：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://itunes.apple.com/us/book/the-casual-vacancy/id518781282?mt=11"]]; 
```

只需将该 URL 字符串替换为您的链接，它就会离开您的应用程序并进入显示该产品的 iBooks 应用程序。

如果您想同时针对 iOS 6.0 及更低版本，您可以`SKStoreProductViewController`使用以下条件检查它们是否有新的

```
 if([SKStoreProductViewController class]) {
     //show the SKStoreProductViewController
}
else {
     //use UIApplication's openURL:
} 
```

* * *

要获取产品的 Apple 产品 ID，您只需检查产品的 URL，例如：

`http://itunes.apple.com/us/book/the-casual-vacancy/id518781282?mt=11`

产品编号为`518781282`。它`id`位于 URL 中的部分之后。不要在`?`其后包含 或任何内容。

# java - for循环在字符串中查找辅音

> ID：12657015
> 
> 赞同：0
> 
> 时间：2012-09-29T22:18:36.227
> 
> 标签：java, string, for-loop

使用 for 循环，如何使字符串中的所有辅音都大写？

我想我应该做这样的事情：

```
 String str = "fish$"     

    String strConsonants = "f, s, h"; 

    for (int x = 0; x < str.length(); x++) 
    {
       if(((str.charAt(x) == (strConsonants))
       {
          System.out.print("FiSH$");
       }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:20:41.983

使用[String API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)中的 String.contains() 方法。以下代码适用于您当前的输入。通常，如果您想查找所有辅音，请使用 char[] 的辅音或带有所有辅音的字符串并进行检查。

```
String str = "fish$";     
String strConsonants = "f, s, h"; 
String temp="";
for (int x = 0; x < str.length(); x++){
temp+= str.charAt(x);   
   if(!strConsonants.contains(temp)) {
    consonentsUCase+=temp.toUpperCase();
   }
   temp="";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:41:06.043

我刚刚写好了。

输出：鱼$

**适用于任何单词！;)**

接口方法： `printStringWithUpperConsonant`

```
 import java.util.HashSet;
   import java.util.Set;

   public class ConsonantUtils {

        private Set<Character> vowels = getVowels();

        private String analysedString;

        public ConsonantUtils(String analysedString) {
            this.analysedString = analysedString;
        }

        public static void main(String[] args) {
            new ConsonantUtils("fish$").printStringWithUpperConsonant();
        }

        public void printStringWithUpperConsonant() {
            for (int i = 0; i < getAnalysedString().length(); i++) {
                printChar(getCurrentChar(i));
            }
        }

        private char getCurrentChar(int i) {
            return getAnalysedString().charAt(i);
        }

        private void printChar(char currentChar) {
            if (isConsonant(currentChar)) {
                System.out.print(makeCharUpperCase(currentChar));
            }
            else{
                System.out.print(currentChar);
            }
        }

        private Set<Character> getVowels() {
            Set<Character> vowels = new HashSet<Character>();
            vowels.add('a');
            vowels.add('e');
            vowels.add('i');
            vowels.add('o');
            vowels.add('u');
            return vowels;
        }

        private char makeCharUpperCase(char character) {
            return Character.toUpperCase(character);
        }

        private boolean isConsonant(char currentChar) {
            return !vowels.contains(currentChar);
        }

        private String getAnalysedString(){
            return analysedString;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:20:56.437

您可以使用[`Character.toUpperCase()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#toUpperCase%28int%29).

```
String vowels = "aeiouAEIOU";
char[] charArr = str.toCharArray(); //turn the string into char array
for(int i=0; i<charArr.length; i++) { //for loop
    if(vowels.indexOf(charArr[i]) == -1) { // if not a vowel
        charArr[i] = Character.toUpperCase(charArr[i]); //replace with upper case
    }
}
Sting rslt = String.valueOf(charArr); //finally turn the array back to string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T22:42:42.160

```
String str = "fish$";   
String strVowels = "aeiouAEIOU";
String out = "";

for (Character c : str.toCharArray()) 
{
    if(!strVowels.contains(""+c))
    {
        out = out + Character.toUpperCase(c);
    }
    else
    {
        out = out + c;
    }
}
System.out.println(out); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T23:02:19.763

这对我有用：

```
 List<Character> constants = Arrays.asList('f', 's', 'h');
     String str = "fish$";

     for (Character c : constants) {             
           str = str.replace(c, Character.toUpperCase(c));
      } 
```

# json - NSNumber 到 NSString 与 stringValue 的转换失败

> ID：12657018
> 
> 赞同：0
> 
> 时间：2012-09-29T22:18:49.010
> 
> 标签：json, class, nsstring, nsnumber

好的，所以我在 SO 上发现了另一个类似的问题，但是那个人正在向数组发送 stringValue 消息，我有不同的情况。

这是即将死去的代码行：

```
AppModel.instance.loginDataObject.uid.stringValue 
```

仅出于调试目的，我将其放入 NSLog 中，如下所示：

```
NSLog(@"uid stringValue: %@", AppModel.instance.loginDataObject.uid.stringValue); 
```

被抛出的异常是：

```
-[__NSCFString stringValue]: unrecognized selector sent to instance 0xa8525d0 
```

现在，“uid”是一个 NSNumber，在 loginDataObject 的头文件中声明：

```
#import "Jastor.h"

@interface LDLoginData : Jastor
@property (nonatomic, strong)   NSString    *api_login_key;
@property (nonatomic, strong)   NSString    *clazz_reg_code;
@property (nonatomic, strong)   NSNumber    *current_clazz;
@property (nonatomic, strong)   NSString    *mail;
@property (nonatomic, strong)   NSString    *name;
@property (nonatomic, strong)   NSString    *profile_first_name;
@property (nonatomic, strong)   NSString    *profile_last_name;
@property (nonatomic, strong)   NSNumber    *teacher_id;
@property (nonatomic, strong)   NSNumber    *uid;
@property (nonatomic, strong)   NSString    *user_type;
@property (nonatomic, strong)   NSNumber    *va_user_clazz_id;
@end 
```

请注意，我使用[Jastor](https://github.com/elado/jastor)类来填充 loginDataObject。

此外，调试器命令显示它是一个 NSNumber：

```
po AppModel.instance.loginDataObject.uid
(NSNumber *) $1 = 0x0a8525d0 7593 
```

但不知何故，它不响应 stringValue 选择器：

```
po AppModel.instance.loginDataObject.uid.stringValue
error: property 'stringValue' not found on object of type 'NSNumber *'
error: 1 errors parsing expression 
```

尽管此方法已[明确记录在案](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/stringValue)。

现在，如果我在 uid 对象上调用描述方法：

```
po AppModel.instance.loginDataObject.uid.description
error: property 'description' not found on object of type 'NSNumber *'
error: 1 errors parsing expression 
```

它在控制台中不喜欢它，但是如果我将代码更改为：

```
NSLog(@"uid stringValue: %@", AppModel.instance.loginDataObject.uid.description); 
```

代码执行，我在控制台中得到了这个：

```
2012-09-29 15:02:11.829 MyApp[28661:c07] uid stringValue: 7593 
```

那么，发生了什么事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:18:49.010

我在写它的时候回答了我自己的问题，所以我想我还是继续发布它，然后发布答案。

我忽略的关键点是异常本身：

```
-[__NSCFString stringValue]: unrecognized selector sent to instance 0xa8525d0 
```

因此，我发送 -stringValue 的“uid”对象实际上是一个 NSString 对象，即使它已被转换为 NSNumber。

发生这种情况的原因是因为数据源。我的应用程序下载一个 JSON blob，将其反序列化为 NSDictionary、NSArray、NSString 和 NSNumber 对象，然后将其传递给 Jastor，Jastor 将其泵入我设置的“框架”类结构中（纯粹由属性组成，一个示例在上面在我的问题中）。

所以顺序是：

JSON -> NSDictionary -> loginDataObject

问题出现在我编写 loginDataObject 的类时，我将 uid 设为 NSNumber（它一直是数字）。

但是，由于某种原因，我从中下载 blob 的网站上的 JSON 序列化程序会在此 uid 值周围加上引号，使其成为字符串。然后，当我反序列化 JSON 时，它变成了 NSString 而不是 NSNumber。Jastor 对此一无所知，将一个指向字符串的指针插入我的 NSNumber *uid 属性中，剩下的就是历史了。

确实，教训是要更加注意引发的确切异常，并更仔细地检查正在反序列化的 JSON。

# php - 从以下数据库设计中发送和接收数据的 php/MySql 查询应该是什么

> ID：12657019
> 
> 赞同：-1
> 
> 时间：2012-09-29T22:18:47.683
> 
> 标签：php, mysql, database

这是我为 ques n ans 页面设计的数据库。用户可以提出尽可能多的问题，并获得对单个问题的尽可能多的答案。IE。一问多答。

我只想知道获取特定数据库的答案所需的*mysql 查询。*还有将涉及发送和检索结果的*php 代码。*

数据库设计：

```
create table user (
 name varchar(14) not null.
 id int(11) auto_increment;

CREATE TABLE questions (
 question_id int(11) NOT NULL AUTO_INCREMENT,
 user_id int(11) references user(id),
title varchar(255),
content text, 
PRIMARY KEY (question_id);

CREATE TABLE answers (
answer_id int(11) NOT NULL AUTO_INCREMENT,
question_id int(11) REFERENCES questions(question_id),
content text,
PRIMARY KEY (answer_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:30:38.103

如果您已经知道特定问题的 ID，那么您需要做的就是选择`answers`包含该 question_id 的所有记录。如果您根据问题的其他属性进行选择，那么您将从中选择该问题`questions`以`LEFT JOIN answers on questions.question_id = answers.question_id`获得所有相关答案。

至于 PHP 代码，请阅读 mysqli 或 PDO。这应该是运行查询然后获取结果的教科书案例。查看[此页面上的示例 1，](http://www.php.net/manual/en/pdo.construct.php)了解如何创建数据库连接，[查看此页面上的示例 1，](http://php.net/manual/en/pdo.query.php)了解非常简单的查询示例。但请注意，如果您正在搜索用户提供的字符串，那么像这样的简单查询会产生巨大的安全漏洞！您应该改用 prepare() 函数。

# html - 运算符 '+' 在类型为 ' 的操作数上不明确 ' 和 ' ' 在网络网格中

> ID：12657023
> 
> 赞同：0
> 
> 时间：2012-09-29T22:19:06.390
> 
> 标签：html, sql, asp.net-mvc, concatenation, webgrid

我想在 webgrid 列中显示一些连接字段并在连接字段具有空值时收到此错误

SQL查询：

```
 SELECT *, T.Name AS Title, PT.Name AS PropertyType
 FROM Properties AS P
 LEFT OUTER JOIN Owners_Properties AS OP ON OP.PropertyId = P.PropertyId
 LEFT OUTER JOIN Owners AS O ON O.OwnerId = OP.OwnerId
 LEFT OUTER JOIN PropertyTypes AS PT ON PT.PropertyTypeId = P.PropertyTypeId
 LEFT OUTER JOIN Titles AS T ON T.TitleId = O.TitleId      
 WHERE P.CondoId=@0 AND P.PropertyId=@1 
```

HTML 标记：

```
propertyGrid.Column("Propriétaire", format: (item) => item.Title+ ' ' + item.FirstName+ ' ' + item.LastName) 
```

当“两个连续字段”为 NULL 时会出现此问题

我尝试通过以下方式修改我的 HTML 代码：

```
 propertyGrid.Column("Owner", format: (item) => @Html.Raw((item.Title=!null) ? (item.Title+ ' ') : "")+ (item.FirstName=!null) ? (item.FirstName+ ' ') : "")+ ((item.LastName=!null) ? item.LastName : ""))) 
```

也应该可以避免返回这些 NULL 值，但在 SQL 查询方面，但我也没有成功。生活很艰难;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:03:50.703

我建议您使用视图模型并在其上添加一个属性来格式化值：

```
public string FormattedOwner
{
    get
    {
        return string.Format("{0} {1} {2}", Title, FirstName, LastName);
    }
} 
```

现在在您的视图中，只需使用这个新的视图模型属性将列绑定到：

```
propertyGrid.Column(columnName: "FormattedOwner", header: "Propriétaire") 
```

如果您不想遵循良好实践并使用视图模型，您可以随时将您的视图转换为意大利面条代码：

```
propertyGrid.Column(
    header: "Propriétaire",
    format: @<text>@string.Format("{0} {1} {2}", item.Title, item.FirstName, item.LastName)</text>
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:38:00.000

替换=！通过 != 在 HTML 标记中。

在 SQL 中，您可以使用 ISNULL (SQL Server)、IFNULL (MySQL) 或类似的其他数据库将 NULL 替换为“”。

例如：SELECT ISNULL(T.Name, '') AS Title, ...

# java - 区分同一个表单中的两个按钮方法

> ID：12657025
> 
> 赞同：0
> 
> 时间：2012-09-29T22:20:23.873
> 
> 标签：java, servlets

我在同一个表单方法中有两个提交按钮（它们需要相同的信息），但是每个按钮必须对信息做不同的事情，所以我的问题是，当我在响应 servlet 中时，我如何知道哪个按钮来自request servlet 触发了表单？（我正在研究java）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:44:52.100

我认为您可以有一个额外的隐藏值来指示在 html 表单中单击了哪个按钮。这是一个例子

```
<html>
<head>
    <title>What</title>
<script>
function fun1(num)
{
    if (num == 1)
    {
        document.getElementById('mybutton').value = "1";
    }
    else
    {
        document.getElementById('mybutton').value = "2";
    }
}
</script>
</head>
<body>
<form name="form1" method="get" action="">
<input type="hidden" id="mybutton" name="mybutton" value="x"/>
<input type="submit" value="send" onclick="fun1(1)"/>
<input type="submit" value="send" onclick="fun1(2)"/>
</form>
</body>
</html> 
```

现在，当您从 servlet (req.getParameter()) 方法检查 mybutton 的值时。这将指示单击了哪个按钮。

谢谢...

# jquery - jquery / css：使div内的文本像新闻收报机一样水平滚动没有插件

> ID：12657029
> 
> 赞同：8
> 
> 时间：2012-09-29T22:21:00.867
> 
> 标签：jquery, css

任何人都有一些关于如何使 div 内的文本以“新闻自动收报机”方式从右到左水平滚动而无需使用插件的技巧。这是我正在尝试完成的一个示例（这是一个插件解决方案：http: [//www.maaki.com/scrollingText.html](http://www.maaki.com/scrollingText.html)）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T23:08:38.873

这是一个快速的解决方案：http: [//jsfiddle.net/4mTMw/8/](http://jsfiddle.net/4mTMw/8/)

```
var marquee = $('div.marquee');
marquee.each(function() {
    var mar = $(this),indent = mar.width();
    mar.marquee = function() {
        indent--;
        mar.css('text-indent',indent);
        if (indent < -1 * mar.children('div.marquee-text').width()) {
            indent = mar.width();
        }
    };
    mar.data('interval',setInterval(mar.marquee,1000/60));
});​ 
```

使用`text-indent`css 属性，您可以很简单地做到这一点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-17T20:43:27.037

我最近用 CSS 关键帧动画解决了这个问题。

本质上，您的股票代码需要一个隐藏了溢出的包装 div。包含项目的代码应该显示 inline-block 以便它们在一行中：

```
<div class="ticker-wrap">
    <div class="ticker">
        <div class="ticker__item">Letterpress chambray brunch.</div>
        <div class="ticker__item">Vice mlkshk crucifix beard chillwave meditation hoodie asymmetrical Helvetica.</div>
        <div class="ticker__item">Ugh PBR&B kale chips Echo Park.</div>
    </div>
</div> 
```

示例 CSS：

```
.ticker-wrap {
    position: fixed;
    bottom: 0;
    width: 100%;
    overflow: hidden;
    height: 4rem;
    background-color: rgba(51, 51, 51, 0.5);
    padding-left: 100%; // offsets items to begin
}

.ticker {
    display: inline-block;
    height: 4rem;
    line-height: 4rem;
    white-space: nowrap;
    padding-right: 100%; // taken from container as display inline-block
}

.ticker__item {
    display: inline-block;
    padding: 0 2rem;
    font-size: 2rem;
    color: white;
} 
```

我有[一个演示](http://codepen.io/lewismcarey/full/GJZVoG/)，它使用 css 关键帧动画然后将内容从一侧无限地转换到另一侧。nb 未显示供应商前缀版本。

```
@keyframes ticker {
    0% {
        -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);

    }
    100% {
        -webkit-transform: translate3d(-100%, 0, 0);
                transform: translate3d(-100%, 0, 0);
    }
} 
```

您需要的唯一调整是设置动画持续时间并将其应用于 .ticker。

```
.ticker {
    animation-name: ticker;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
    animation-duration: 25s; // tweak based on number of items/desired speed
} 
```

你可以看到[完整的演示](http://codepen.io/lewismcarey/full/GJZVoG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T06:48:34.337

要使其从下到上滚动，请将 left 属性替换为 top。这对我有用

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T22:52:50.150

你可以做这样的事情

```
<div id="scrollcontainer" style="postion:relative; overflow:hidden; width:100%;">
  <span id="scrolltext" style="position:absolute; white-space:nowrap">this is the scrolling text</span>
</div> 
```

和一个js函数

```
function scroll() {
  $('#scrolltext').css('left', $('#scrollcontainer').width());
  $('#scrolltext').animate({
    left: '-='+($('#scrollcontainer').width()+$('#scrolltext').width())
  }, 2000, function() {
    scroll();
  });
}

scroll(); 
```

测试。可以在这里找到：http: [//jsfiddle.net/zrW5q/85/](http://jsfiddle.net/zrW5q/85/)

# c++ - 在 C++ 中的进程之间共享 CGAL 的几何图形

> ID：12657030
> 
> 赞同：4
> 
> 时间：2012-09-29T22:21:04.643
> 
> 标签：c++, geometry, ipc, shared-memory, cgal

我正在寻找在进程之间发送 CGAL 几何的最快方法（C++）。假设我们有 2 个进程 - A 和 B。进程 A 正在生成几何图形，进程 B 正在显示它。我想以最快的方式连接它们。几何形状为 CGAL 多面体类型。

我知道我可以使用共享内存，但是我遇到了一些问题：

1.  当我想将几何图形从进程 A 复制到共享内存时，我可以使用流式多面体到/从 OFF 格式，但我对此不感兴趣，因为转换到这种格式对于我的目的来说太慢了。
2.  我可以创建共享内存并使用“placement new”在共享内存中创建我的对象并克服流式传输和转换的开销，但是我无法通过内部多面体函数进一步控制内存分配。（例如，当使用 Polyhedron_incremental_builder_3 添加新顶点时，我无法指定它应该放置在内存中的确切位置 - 我可以调用 B.add_vertex( Point( 0, 0, 0)); 并且在该方法中处理内存分配内部）

有没有办法在共享内存的特定位置创建对象并确保它及其动态结构将“存在”在该内存中？

或者也许还有另一种在两个进程之间共享动态数据（即半边结构）的快速方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:08:11.140

> 我无法通过内部多面体函数进一步控制内存分配。

你确实有控制权。

参考手册说：

> Polygon_2 类实现了多边形。Polygon_2 由特征类和容器类参数化。后者可以是任何满足 STL 容器要求的类。它默认为矢量类。

*除了对*多边形本身使用placement new 之外，您还需要一个可以放置在共享内存中的容器。您可以尝试使用`boost::interprocess::vector`，或滚动您自己的容器类。

如果使用`boost::interprocess::vector`，则需要为它创建一个包装类，因为与 STL 容器不同，它的构造函数需要一个分配器*对象*。`Polygon_2`将无法正确构建它。因此，您必须从某种全局变量中获取共享内存分配器对象。例如：

```
using namespace boost::interprocess;
typedef allocator<int, managed_shared_memory::segment_manager>  ShmemAllocator;
ShmemAllocator some_global_shmem_allocator;
template <typename T>
class my_shared_memory_vector : vector<T, ShmemAllocator>
{
public:
  my_shared_memory_vector() : vector(some_global_shmem_allocator) {}
}; 
```

免责声明：我自己实际上并没有做过任何这些。如果您的计算机因此而着火并且您的房子被烧毁，请不要让我负责。明智的做法是仔细检查（通过查看 GCAL 源）`Polygon_2`分配的任何内存实际上是由容器管理的。

**编辑**：我误读了这个问题，它询问的是多面体，而不是多边形。请参阅下面的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:45:14.850

当然，最明显的做法是使用线程而不是进程。这将毫不费力地解决整个问题。

除此之外，除了破解编译器的运行时库来替换其内存管理之外，您实际上可以覆盖一个类的“operator new”，和/或您可以提供一个全局的。这将使您可以用自己的内存分配代码替换“新”调用。您可以使用在进行 CGAL 调用之前设置的全局标志并在之后重置，以告诉内存分配器您要使用哪个内存堆（您显然必须对共享内存进行某种形式的堆管理）。

当然，覆盖 new 运算符仅适用于“新”调用。通过 malloc() 或某些系统调用分配的任何内容都不会通过您的代码。您可以尝试提供自己的 malloc() 和 free() 调用（包含在目标文件中的函数优先于库中的函数）以查看这是否可行，但这些可能必须处理操作系统以进行内存管理因为你失去了库函数。肯定会很乱。

# mysql - MySQL 中的查询和子查询，向客户展示购买的产品

> ID：12657031
> 
> 赞同：0
> 
> 时间：2012-09-29T22:21:18.243
> 
> 标签：mysql, nested

我有一个问题这是我的简单图表：

[![关系图](../Images/c27fe402cb9ca4da793fcf4abc2889c2.png)](https://i.stack.imgur.com/T9YYQ.png)

好吧，我尝试了很多，但我无法做我需要的事情，我需要显示已购买的客户列表，例如每次购买中购买的产品最多

客户编号 1 ---> 购买：

*   4鸡汤
*   3肉汤
*   2虾汤

2号客户--->购买：

*   1鸡汤
*   1肉汤
*   2虾汤

3号客户--->购买：

*   4鸡汤
*   8肉汤
*   1个虾汤

我的查询结果必须是：

[![查询结果](../Images/41ba738c282ed6e35da9fcc0db89ca50.png)](https://i.stack.imgur.com/OUZ4l.png)

请帮我正确地进行这个mysql查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:05:10.683

我可以想到两种方法。第一种是使用子选择来查询每个客户最热门的商品：

```
SELECT nameCustomer AS customer_name, (
    SELECT idItem
      FROM detailSale
      INNER JOIN sales on sales.idDetail = detailSale.idDetail
      WHERE sales.idCustomer = cliente.idCustomer
      GROUP BY idItem
      ORDER BY SUM(amountBuyItem) DESC
      LIMIT 1
  )
  FROM cliente 
```

请注意，此查询是不完整的，因为它只向您显示项目的 id，因此您需要加入 itemForSale 表以检索其名称。

另一种方法是从一个查询开始，该查询将按受欢迎程度向您显示每个客户的所有商品：

```
SELECT idCustomer, idItem, SUM(amountBuyItem) AS totalBuyItem
  FROM detailSale
  INNER JOIN sales on sales.idDetail = detailSale.idDetail
  GROUP BY idCustomer, idItem
  ORDER BY idCustomer, idItem DESC 
```

然后，您可以创建此查询的聚合以查找最受欢迎项目的计数，然后再加入它以找出是哪个项目。这样做的缺点是可能为每位顾客返回多于一行。

# python - 如何自动生成网站的PDF？

> ID：12657034
> 
> 赞同：0
> 
> 时间：2012-09-29T22:21:52.677
> 
> 标签：python, ruby, pdf

我有一个网站，上面有一些使用 JavaScript 库制作的图表。在服务器端自动生成 HTML、CSS 和 JS，然后以 PDF/PNG/JPG 格式捕获结果的好方法是什么？我想自动生成报告并将它们通过电子邮件发送给我的用户。

任何编程语言都可以，但 Ruby/Rails 最好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:38:51.880

我听说过[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)项目。在 webkit 渲染引擎的帮助下，它从网页生成 PDF。它提供 Python 绑定。Ruby 绑定也可用：[PDFKit](https://github.com/pdfkit/PDFKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:29:05.180

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)是一个很好用的工具。我刚刚使用它使用 rake 任务在一天内生成了 500 多个 pdf 文档。如果您对利用 wkhtmltopdf 的 gem 感兴趣，那么您可以尝试[WickedPDF](http://github.com/mileszs/wicked_pdf)或[PDFKit](https://github.com/pdfkit/PDFKit)。

# bash - 在 bash 中使用替换进行参数扩展

> ID：12657037
> 
> 赞同：0
> 
> 时间：2012-09-29T22:22:44.127
> 
> 标签：bash

我对 bash 中的正则表达式有一个小问题。

```
#!/bin/bash
FNAME=$1
echo ${FNAME//.*\/tests\//} 
```

我想删除 /test/ 之前的所有内容，包括 /test/ 。由于某些原因，“。*”不起作用。

```
$ ./eclipse/unittest.sh /foo/tests/bar
/foo/tests/bar 
```

如何在 bash reg exp 中选择任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:26:59.357

您可以使用`#`后跟模式来删除包括模式在内的所有内容。它将使用最短匹配：

```
function f {
    echo ${1#*/tests/}
}

$ f /foo/tests/bar
bar
$ f /foo/tests/bar/tests/last
bar/tests/last 
```

如果你想使用最长的匹配，你可以使用`##`：

```
function f {
    echo ${1##*/tests/}
}

$ f /foo/tests/bar
bar
$ f /foo/tests/bar/tests/last
last 
```

# r - 与数据框的整列相同的单个元素分配

> ID：12657039
> 
> 赞同：4
> 
> 时间：2012-09-29T22:23:23.967
> 
> 标签：r

为什么我不能为数据框的整个列赋值，然后在同一个“within”语句中的单个元素？编码：

```
foo <- data.frame( a=seq(1,10) )

foo <- within(foo, {
  b <- 1  # set all of b to 1
})

foo <- within(foo, {
  c <- 1  # set all of c to 1
  c[2] <- 20  # set one element to 20
  b[2] <- 20
})

foo 
```

给出：

```
 a  b  c
1   1  1  1
2   2 20 20
3   3  1  1
4   4  1 20
5   5  1  1
6   6  1 20
7   7  1  1
8   8  1 20
9   9  1  1
10 10  1 20 
```

b 的值是我所期望的。c 的值很奇怪。如果对整个列的赋值（即 b <- 1）与对单个元素的赋值（即 b[2] <- 20）在不同的“内部”语句中，它似乎符合我的预期。但如果它们在同一个“内部”中，则不是。

这是一个错误，还是我对 R 不了解的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:32:03.160

我的猜测是，新列的分配是在您“离开”该功能时完成的。做的时候

```
c <- 1
c[2] <- 20 
```

你真正创造的只是一个向量`c <- c(1, 20)`。当 R 必须将其分配给新列时，向量将被回收，创建您所看到的 1,20,1,20,... 模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T22:33:15.483

这是一个有趣的。

它与仅定义到长度 2 的事实有关`c`，然后典型的 R“回收规则”接管并重复`c`，直到它与数据帧的长度匹配。（顺便说一句，这仅适用于整数倍数：您将无法在 10 个 10 行的数据框中复制长度为 3 或 4 的向量。）

回收有其批评者。我认为它是动态类型解释语言 R 的一项资产，尤其是当人们想要交互式地探索数据时。“扩展”数据以适应容器和表达式通常是一件好事——即使它在这里给出了奇怪的谜题。

# javascript - Javascript：连接html和js文件

> ID：12657040
> 
> 赞同：-1
> 
> 时间：2012-09-29T22:23:27.807
> 
> 标签：javascript

我想了解如何将我的 html 与另一个文件 js 连接起来，但问题在于这个软件调用 topsytle4 它是一个基本的线索，但由于某种原因它显示了文件但没有任何功能可以成为我们可以使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:25:58.383

`<head>`在和之间添加这一行`</head>`：

```
<script src="your_js_path_here"></script> 
```

# python - 使用 lxml 解析 xml - 提取元素值

> ID：12657043
> 
> 赞同：10
> 
> 时间：2012-09-29T22:23:50.967
> 
> 标签：python, xml, xpath, lxml

假设我们有一个结构如下的 XML 文件。

```
<?xml version="1.0" ?> 
<searchRetrieveResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.loc.gov/zing/srw/ http://www.loc.gov/standards/sru/sru1-1archive/xml-files/srw-types.xsd" xmlns="http://www.loc.gov/zing/srw/">
  <records xmlns:ns1="http://www.loc.gov/zing/srw/">
    <record>
      <recordData>
        <record xmlns="">
          <datafield tag="000">
            <subfield code="a">123</subfield>
            <subfield code="b">456</subfield>
          </datafield>
          <datafield tag="001">
            <subfield code="a">789</subfield>
            <subfield code="b">987</subfield>
          </datafield>
        </record>
      </recordData>
    </record>
    <record>
      <recordData>
        <record xmlns="">
          <datafield tag="000">
            <subfield code="a">123</subfield>
            <subfield code="b">456</subfield>
          </datafield>
          <datafield tag="001">
            <subfield code="a">789</subfield>
            <subfield code="b">987</subfield>
          </datafield>
        </record>
      </recordData>
    </record>
  </records>
</searchRetrieveResponse> 
```

我需要解析：

*   “子字段”的内容（例如上例中的 123）和
*   属性值（例如 000 或 001）

我想知道如何使用 lxml 和 XPath 来做到这一点。下面粘贴的是我的初始代码，我恳请有人解释一下，如何解析出值。

```
import urllib, urllib2
from lxml import etree    

url = "https://dl.dropbox.com/u/540963/short_test.xml"
fp = urllib2.urlopen(url)
doc = etree.parse(fp)
fp.close()

ns = {'xsi':'http://www.loc.gov/zing/srw/'}

for record in doc.xpath('//xsi:record', namespaces=ns):
    print record.xpath("xsi:recordData/record/datafield[@tag='000']", namespaces=ns) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T22:57:35.343

我会在你的 XPath 中更直接：直接找到你想要的元素，在这种情况下`datafield`。

```
>>> for df in doc.xpath('//datafield'):
        # Iterate over attributes of datafield
        for attrib_name in df.attrib:
                print '@' + attrib_name + '=' + df.attrib[attrib_name]

        # subfield is a child of datafield, and iterate
        subfields = df.getchildren()
        for subfield in subfields:
                print 'subfield=' + subfield.text 
```

此外，lxml 似乎让您忽略名称空间，可能是因为您的示例仅使用一个名称空间？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T22:54:57.780

尝试以下工作代码：

```
import urllib2
from lxml import etree

url = "https://dl.dropbox.com/u/540963/short_test.xml"
fp = urllib2.urlopen(url)
doc = etree.parse(fp)
fp.close()

for record in doc.xpath('//datafield'):
    print record.xpath("./@tag")[0]
    for x in record.xpath("./subfield/text()"):
        print "\t", x 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-29T23:13:50.623

我会去的

```
for df in doc.xpath('//datafield'):
    print df.attrib
    for sf in df.getchildren():
        print sf.text 
```

你也不需要 urllib，你可以直接用 HTTP 解析 XML

```
url = "http://dl.dropbox.com/u/540963/short_test.xml"  #doesn't work with https though
doc = etree.parse(url) 
```

# python - 检查数字（mod 2）是否余数为 0 的功能不起作用

> ID：12657048
> 
> 赞同：2
> 
> 时间：2012-09-29T22:24:25.743
> 
> 标签：python, python-2.6

我正在尝试制作一个简单的程序来检查用户输入的数字是否余数为 0。

```
foundN=input("Enter number: ")

def test(foundN):
    if foundN%2 == 0:
        print "The number ", foundN, "is ok."
    else:
        print "Try another number. " 
```

当我输入数字时，它不会输出任何内容。此外，当我发出另一个命令时，它会执行它，只是跳过功能测试。谁能告诉我为什么？我没有将数字导入到 foundN 变量中吗？

我试过输入这样的数字：`foundN=int(raw_input('..'))`. 它没有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T22:27:59.367

你还没有调用函数！

```
def test(foundN):
    if foundN%2 == 0:
        print "The number ", foundN, "is ok."
    else:
        print "Try another number. "

foundN = input("Enter number: ")
test(foundN) 
```

# jqgrid - jqgrid - 动态启用分组

> ID：12657053
> 
> 赞同：2
> 
> 时间：2012-09-29T22:25:27.757
> 
> 标签：jqgrid

我能够从 jqgrid 演示页面中的示例中实现分组功能。但我不想默认启用分组，但在更改选择列表时我想启用分组功能。我尝试了几个选项，但没有一个成功？有人可以在这里帮助我吗，可能是我遗漏了一些东西。这是我的代码...

```
$("#dynamicGrouping").change(function() { 
    var value = $(this).val(); 
    if(value) { 
        if(value == '') { 
            $('#grid').jqGrid('groupingRemove', true); 
        } else { 
            $('#grid').jqGrid('setGridParam', { grouping:true });
            $('#grid').jqGrid('groupingGroupBy', value);
            $('#grid').trigger('reloadGrid');
        } 
    }
}); 
```

我的网格定义：

```
jQuery(function() {
    $('#grid').jqGrid({
            .....
            .....
        grouping: false,
        groupingView : { 
                groupField : ['field_name'], 
            groupColumnShow : [true], 
            groupText : ['<b>{0} - {1} Item(s)</b>'], 
            groupCollapse : false, 
            groupOrder: ['asc'], 
            groupDataSorted : true 
            },
        .......
        .......
    });
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T12:10:22.310

我想你在代码中犯了一些错误。您发布的代码似乎我是正确的，但是您不需要另外设置`grouping:true`和触发`reloadGrid`，因为`groupingGroupBy`您会自动执行此操作。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/SetGroupingDynamically.htm)演示了动态设置或删除分组。

![在此处输入图像描述](../Images/0dcc2caa6eec843f6906e3408f870c55.png)

所以你可以使用

```
$("#dynamicGrouping").change(function () {
    var groupingName = $(this).val();
    if (groupingName) {
        $('#grid').jqGrid('groupingGroupBy', groupingName);
    } else {
        $('#grid').jqGrid('groupingRemove');
    }
}); 
```

或更高级的版本

```
$("#dynamicGrouping").change(function () {
    var groupingName = $(this).val();
    if (groupingName) {
        $('#grid').jqGrid('groupingGroupBy', groupingName, {
            groupOrder : ['desc'],
            groupColumnShow: [false],
            groupCollapse: true
        });
    } else {
        $('#grid').jqGrid('groupingRemove');
    }
}); 
```

**更新**：一切都适用于 JSON 数据：请参阅[演示](http://www.ok-soft-gmbh.com/jqGrid/SetGroupingDynamically1.htm)。

**更新 2**：我再次查看代码，发现**在网格初始化时**`gridview`将设置为：请参阅[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L2159-2165)。如果您最初没有 并使用过，那么您将无法仅更改. [您还必须正确设置分组限制中的](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:grouping#limitations)其他参数。`true` **`gridview: true``grouping: false``grouping: true`**

 **所以你必须自己保持规则不受限制：

```
scroll: false,
rownumbers: false,
treeGrid: false,
gridview: true, 
```

顺便说一句，我建议**始终使用`gridview: true`**，因为性能更好。**

# ios - 在 cocos2d 中用平方纹理填充多边形形状的精灵

> ID：12657059
> 
> 赞同：0
> 
> 时间：2012-09-29T22:26:07.353
> 
> 标签：ios, cocos2d-iphone, textures, polygons, tiling

我想知道是否可以使用 cocos2d 用方形/矩形纹理填充多边形形状的精灵。我想我将不得不重写该`draw`方法，但我不知道如何实现这一点，也无法在网上找到任何有用的资源。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:04:35.193

在 cocos2D 中实现该效果的最简单方法是使用 CCProgressTime 来显示颜色填充效果。

```
 CCProgressTimer    *mProgressMeter;
 mProgressMeter = [CCProgressTimer progressWithSprite:[CCSprite spriteWithFile:TEX_SYRINGE_LAYER]];
 mProgressMeter.color = ccc3(102,0,204);
 mProgressMeter.percentage = 0.0f;
 [mProgressMeter stopAllActions];
 [mProgressMeter runAction:[CCProgressTo actionWithDuration:2.0f percent:80.0f]]; 
```

# c# - C# 将 SSL 证书放入 X509Certificate 并出现“禁止”错误

> ID：12657062
> 
> 赞同：0
> 
> 时间：2012-09-29T22:27:04.787
> 
> 标签：c#, ssl, x509certificate

我在尝试获取一些 SSL 证书信息时遇到问题。

通常，代码工作正常，但在某些情况下，我收到 403 Forbidden 错误。即使发生这种情况，我也想获取证书信息。在某些情况下，我也获得了无效的登录凭据。

`X509Certificate`无论这些问题如何，我都想获得该对象。

如果我使用 IE 浏览它们，它会为我提供证书信息，而不管消息如何。

因此对于示例代码，两者`request`和`response`都定义为对象变量，并且`request`在调用`getRequest()`.

如果没有 web 错误，此代码可以正常工作，但如果有错误，则变量`response`为`null`.

是否有另一种方法可以`X509Certificate`进入一个名为 的对象变量`cert`，即使看到这些错误？

老实说，我不在乎我是否得到响应，我只关心`X509Certificate`.

```
// callback used to validate the certificate in an SSL conversation
private static bool ValidateRemoteCertificate(
    object sender,
    X509Certificate certificate,
    X509Chain chain,
    SslPolicyErrors policyErrors
) {
    // allow any old dodgy certificate...
    log.write(0, "entering ValidateRemoeCertificate ");
    return true;
}

// getRequest 
private int getRequest()
{
    try {
        log.write(1, "Validating " + webHostName);
        // request.Method = method;
        ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateRemoteCertificate);
        response = (HttpWebResponse)request.GetResponse();
        response.Close();
    } catch (Exception w) {
        if (w.Message.Contains("401"))
        {
            log.write(4, "Web Site Authentication Required for " + host + ":" + port);
            return 401;
        }
        else if (w.Message.Contains("403"))
        {
            log.write(4, "Forbidden Access for " + host + ":" + port);
            return 403;
        }
        else
        {
            log.write(4, "Error Reading Web Site " + host + " Port " + port + " " + w.Message);
            return 400;
        }
    }
    return 0;
} 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:15:28.773

请改用[SslStream](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)类。使用接受[RemoteCertificateValidationCallback委托的](http://msdn.microsoft.com/en-us/library/system.net.security.remotecertificatevalidationcallback.aspx)[构造函数，该委托在](http://msdn.microsoft.com/en-us/library/ms145056.aspx)[AuthenticateAsClient](http://msdn.microsoft.com/en-us/library/ms145060.aspx)期间调用以检查服务器的证书。

# c - send() 是否总是发送整个缓冲区？

> ID：12657063
> 
> 赞同：12
> 
> 时间：2012-09-29T22:27:33.400
> 
> 标签：c, linux, sockets

`send()`应返回发送的字节数或错误代码，但我发现的所有示例仅使用错误代码检查它，而不是发送的字节数。

```
//typical example
int cnt=send(s,query,strlen(query),0);
if (cnt < 0) return(NULL);
//Hey, what about cnt < strlen(query)? 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-29T22:29:56.620

问：“send()”是否总是返回整个缓冲区？

答：不，不一定。

来自 Beej 的指南：* [http://beej.us/guide/bgnet/html/multi/syscalls.html#sendrecv](http://beej.us/guide/bgnet/html/multi/syscalls.html#sendrecv)

> send() 返回实际发送的字节数——这可能小于你告诉它发送的字节数！看，有时你告诉它发送一大堆数据，它就是无法处理。它会尽可能多地发送数据，并相信您稍后会发送其余的数据。请记住，如果 send() 返回的值与 len 中的值不匹配，则由您决定发送字符串的其余部分。好消息是：如果数据包很小（小于 1K 左右），它可能会设法一次性发送整个数据包。同样，错误时返回 -1，并将 errno 设置为错误号。

问：“recv()”是否总是读取整个缓冲区？

答：不，绝对不是。你*永远不*应该假设你收到的缓冲区是“整个消息”。或者假设您收到的消息来自*一个**单一*的消息。

这是一个很好的简短解释。它适用于 Microsoft/C#，但适用于*任何*语言的*所有*套接字 I/O ：

 **   [http://blogs.msdn.com/b/joncole/archive/2006/03/20/simple-message-framing-sample-for-tcp-socket.aspx](http://blogs.msdn.com/b/joncole/archive/2006/03/20/simple-message-framing-sample-for-tcp-socket.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T22:32:22.350

答案在另一部分`man 2 send`：

```
 When the message does not fit into  the  send  buffer  of  the  socket,
   send()  normally blocks, unless the socket has been placed in nonblock‐
   ing I/O mode.  In nonblocking mode it would fail with the error  EAGAIN
   or  EWOULDBLOCK in this case.  The select(2) call may be used to deter‐
   mine when it is possible to send more data. 
```

或者，POSIX 版本 ( `man 3p send`)：

```
 If  space is not available at the sending socket to hold the message to
   be transmitted, and the socket file descriptor does not have O_NONBLOCK
   set,  send()  shall  block  until  space is available.  If space is not
   available at the sending socket to hold the message to be  transmitted,
   and  the  socket file descriptor does have O_NONBLOCK set, send() shall
   fail. The select() and poll() functions can be used to  determine  when
   it is possible to send more data. 
```

因此，虽然`read`部分数据很常见，`send`但不应该发生部分处于阻塞模式的情况（除非实现细节）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T22:30:06.520

不，它没有。

有关参考，请参阅[send 的手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html)：

> 当消息不适合套接字的发送缓冲区时，send() 通常会阻塞，除非套接字已被置于非阻塞 I/O 模式。在非阻塞模式下，它会因错误 EAGAIN 或 EWOULDBLOCK 而失败。select(2) 调用可用于确定何时可以发送更多数据。*

# php - 会话集上的“标头已发送”

> ID：12657066
> 
> 赞同：-1
> 
> 时间：2012-09-29T22:27:49.097
> 
> 标签：php, codeigniter, session, localization, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

**索引.php**

```
<?php

/*
 *---------------------------------------------------------------
 * APPLICATION ENVIRONMENT
 *---------------------------------------------------------------
 *
 * You can load different configurations depending on your
 * current environment. Setting the environment also influences
 * things like logging and error reporting.
 *
 * This can be set to anything, but default usage is:
 *
 *     development
 *     testing
 *     production
 *
 * NOTE: If you change these, also change the error_reporting() code below
 *
 */
    define('ENVIRONMENT', 'development');
/*
 *---------------------------------------------------------------
 * ERROR REPORTING
 *---------------------------------------------------------------
 *
 * Different environments will require different levels of error reporting.
 * By default development will show errors but testing and live will hide them.
 */

if (defined('ENVIRONMENT'))
{
    switch (ENVIRONMENT)
    {
        case 'development':
            error_reporting(E_ALL);
        break;

        case 'testing':
        case 'production':
            error_reporting(0);
        break;

        default:
            exit('The application environment is not set correctly.');
    }
}

/*
 *---------------------------------------------------------------
 * SYSTEM FOLDER NAME
 *---------------------------------------------------------------
 *
 * This variable must contain the name of your "system" folder.
 * Include the path if the folder is not in the same  directory
 * as this file.
 *
 */
    $system_path = 'system';

/*
 *---------------------------------------------------------------
 * APPLICATION FOLDER NAME
 *---------------------------------------------------------------
 *
 * If you want this front controller to use a different "application"
 * folder then the default one you can set its name here. The folder
 * can also be renamed or relocated anywhere on your server.  If
 * you do, use a full server path. For more info please see the user guide:
 * http://codeigniter.com/user_guide/general/managing_apps.html
 *
 * NO TRAILING SLASH!
 *
 */
    $application_folder = 'application';

/*
 * --------------------------------------------------------------------
 * DEFAULT CONTROLLER
 * --------------------------------------------------------------------
 *
 * Normally you will set your default controller in the routes.php file.
 * You can, however, force a custom routing by hard-coding a
 * specific controller class/function here.  For most applications, you
 * WILL NOT set your routing here, but it's an option for those
 * special instances where you might want to override the standard
 * routing in a specific front controller that shares a common CI installation.
 *
 * IMPORTANT:  If you set the routing here, NO OTHER controller will be
 * callable. In essence, this preference limits your application to ONE
 * specific controller.  Leave the function name blank if you need
 * to call functions dynamically via the URI.
 *
 * Un-comment the $routing array below to use this feature
 *
 */
    // The directory name, relative to the "controllers" folder.  Leave blank
    // if your controller is not in a sub-folder within the "controllers" folder
    // $routing['directory'] = '';

    // The controller class file name.  Example:  Mycontroller
    // $routing['controller'] = '';

    // The controller function you wish to be called.
    // $routing['function'] = '';

/*
 * -------------------------------------------------------------------
 *  CUSTOM CONFIG VALUES
 * -------------------------------------------------------------------
 *
 * The $assign_to_config array below will be passed dynamically to the
 * config class when initialized. This allows you to set custom config
 * items or override any default config values found in the config.php file.
 * This can be handy as it permits you to share one application between
 * multiple front controller files, with each file containing different
 * config values.
 *
 * Un-comment the $assign_to_config array below to use this feature
 *
 */
    // $assign_to_config['name_of_config_item'] = 'value of config item';

// --------------------------------------------------------------------
// END OF USER CONFIGURABLE SETTINGS.  DO NOT EDIT BELOW THIS LINE
// --------------------------------------------------------------------

/*
 * ---------------------------------------------------------------
 *  Resolve the system path for increased reliability
 * ---------------------------------------------------------------
 */

    // Set the current directory correctly for CLI requests
    if (defined('STDIN'))
    {
        chdir(dirname(__FILE__));
    }

    if (realpath($system_path) !== FALSE)
    {
        $system_path = realpath($system_path).'/';
    }

    // ensure there's a trailing slash
    $system_path = rtrim($system_path, '/').'/';

    // Is the system path correct?
    if ( ! is_dir($system_path))
    {
        exit("Your system folder path does not appear to be set correctly. Please open the following file and correct this: ".pathinfo(__FILE__, PATHINFO_BASENAME));
    }

/*
 * -------------------------------------------------------------------
 *  Now that we know the path, set the main path constants
 * -------------------------------------------------------------------
 */
    // The name of THIS file
    define('SELF', pathinfo(__FILE__, PATHINFO_BASENAME));

    // The PHP file extension
    // this global constant is deprecated.
    define('EXT', '.php');

    // Path to the system folder
    define('BASEPATH', str_replace("\\", "/", $system_path));

    // Path to the front controller (this file)
    define('FCPATH', str_replace(SELF, '', __FILE__));

    // Name of the "system folder"
    define('SYSDIR', trim(strrchr(trim(BASEPATH, '/'), '/'), '/'));

    // The path to the "application" folder
    if (is_dir($application_folder))
    {
        define('APPPATH', $application_folder.'/');
    }
    else
    {
        if ( ! is_dir(BASEPATH.$application_folder.'/'))
        {
            exit("Your application folder path does not appear to be set correctly. Please open the following file and correct this: ".SELF);
        }

        define('APPPATH', BASEPATH.$application_folder.'/');
    }

/*
 * --------------------------------------------------------------------
 * LOAD THE BOOTSTRAP FILE
 * --------------------------------------------------------------------
 *
 * And away we go...
 *
 */
require_once BASEPATH.'core/CodeIgniter.php';

$ci=& get_instance();

$ci->load->model("language_model");
$ci->language_model->setLanguage();

//init s3 stuff
//instantiate the class

/*$ci=& get_instance();
if ($ci->uri->segment(1) == 'add_referee'){

    $ci->s3->putBucket($ci->config->item("bucket"), S3::ACL_PUBLIC_READ);
}*/

/* End of file index.php */
/* Location: ./index.php */ 
```

**在 index.php 末尾调用的模型**

```
<?php if ( ! defined('BASEPATH')) exit('');

class language_model extends CI_Model {

    function __construct(){
        parent::__construct();
    }

    function allowedLanguages(){
        $data = array(
            'en',
            'de'
        );

        return $data;
    }

function setLanguage(){
    $uri_lang = trim($this->input->get("lang"));

    if ($uri_lang != ''){
        if (in_array($uri, $this->allowedLanguages())){
            $this->session->set_userdata('locale', $uri_lang);
        }else{
            $this->session->set_userdata('locale', 'en');
        }
    }else{
        $this->session->set_userdata('locale', 'en');
    }

}

} 
```

所以基本上我正在尝试将用户选择的语言设置为会话并使用它将网站提供给用户语言，但我得到了

> 消息：无法修改标头信息 - 标头已发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:28:36.513

如前所述，您应该（几乎）永远不要更改 CodeIgniters index.php。您需要做的是在核心中创建一个名为 MY_Controller 的文件，并在其中添加您的模型负载。然后你必须让每个控制器都扩展 My_Controller

/application/core 中的 MY_Controller 示例

```
class MY_Controller extends CI_Controller {

public function __construct() {
parent::__construct(); //Makes every controller that extends MY_Controller load Language_model and runs function setLanguage()
$this->load->model("language_model");
$this->language_model->setLanguage();
}
} 
```

然后你**所有**的控制器必须像这样开始：

```
class Controller_name extends MY_Controller { 
```

我将修改我的答案以适应更多需要的解释

# java - MS Word 类似页面管理

> ID：12657070
> 
> 赞同：0
> 
> 时间：2012-09-29T22:28:08.377
> 
> 标签：java, swing, jpanel

这更像是一个逻辑问题/讨论。

我有一个类似于 MS Wrod 的文本编辑程序。它的文档由页面组成。

一页是保存页面内容的JPanel (A)。在该 JPanel (A) 上添加页面内容，即其他 JPanel (B)。页面的最后一个元素始终是填充所有未占用空间的填充物。

我要做的是管理 JPanel (B) 迁移。当页面被填满时，最后一个应该移动到下一个，并且当页面上的空间被释放时，我必须检查下一个的第一个元素是否适合该空间并将其向上移动。

我尝试通过附加到 Filler 的组件侦听器来实现这一点。如果 Fillers 高度达到零，则页面已满，如果它放大，则从页面中删除（或降低其高度）元素。

看起来很简单，但也存在一些问题。JPanel (B) 的大小并不相同。

这意味着，当从页面中删除一个 JPanel (B) 时，来自下一页的多个 JPanel(B) 可能适合该空间。这也意味着如果页面的第一个 JPanel (B) 的高度减小了，它也可能适合前一页（如果它的新高度小于前一页的 Filler 上的高度），并且如果减小是足够大，可以将更多来自下一页的 JPanel (B) 附加到当前页面。

考虑到所有这些，可以在此基础上编写相当多的代码。但这一切都非常笨拙，因为这一切都是在组件侦听器中完成的。

移动 JPanel (B) 将触发上一页/下一页的组件侦听器。我可以通过在侦听器代码执行时将布尔值设置为 true 来避免这种情况，并使侦听器仅在该布尔值为 false 时才运行，但这根本不会调用其他页面侦听器，这又不好，它们必须是最后被调用。

我还想在这里添加一个子问题：如果我从另一个侦听器调用侦听器，它会立即运行还是在侦听器完成后运行？如果答案是之后，如果我多次调用它，它会只运行一次还是多次？如果从自身调用监听器怎么办？

我的主要问题是，有没有一种方法可以在 Java 中以更简单的方式实现这种类似 Word 的页面内容管理？以某种方式创建一组组件，这些组件以它们自动管理所有这些的方式排列（在 JTextArea 中类似于自动换行）？

我只是 Java 和 Swing 的初学者，所以也许有一些组件可以用于此，或者当几个组件正确组合在一起时会像这样？也许一些布局管理？

如果我创建一些高 JPanel，我可以根据页码增加/减少它的高度，也许我可以添加某种垂直条作为分隔符，如果在它之前添加了一个组件，如果它的高度大于留给分隔符的空间，它会自动放在它后面吗？这样我就可以创造出页面的错觉。

这些只是一些想法，我希望其中一些是可能的，或者有人有更好的解决方案......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T13:36:57.453

这就是答案 java-sl.com/articles.html 在这里阅读 4 篇关于分页的文章

# c# - 日历控件，DayRender 函数未执行

> ID：12657071
> 
> 赞同：0
> 
> 时间：2012-09-29T22:28:46.133
> 
> 标签：c#, asp.net, visual-studio, calendar-control

我的 aspx 页面中有一个日历，如下所示：

```
<asp:Calendar ID="Calendar1" runat="server"></asp:Calendar> 
```

而且后面的代码很简单。

```
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
   {

    Response.Write("test");
    if (!e.Day.IsToday)
    {
        Label aLabel = new Label();
        aLabel.Text = " <br>test";
        e.Cell.Controls.Add(aLabel);
        date.Text = e.Day.ToString();
    }     
} 
```

我的最终目标是从数据库中为事件添加文本，但目前我什至无法让函数本身执行。response.writes 在页面上没有任何位置，并且除了今天之外的所有日期都没有出现“测试”一词（这是我的理解应该发生的事情）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:43:51.337

您可以按如下方式注册render方法，从而节省您为注册编写代码：

```
<asp:Calendar ID="Calendar1" OnDayRender="Calendar1_DayRender" runat="server">
</asp:Calendar> 
```

[注意](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.ondayrender.aspx)：

"因为在渲染Calendar控件时会引发DayRender事件，所以不能添加同样可以引发事件的控件，比如LinkBut​​ton。只能添加静态控件，比如System.Web.UI.LiteralControl、Label、图像和超链接。”

**更新：**

[Calendar.OnDayRender 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.ondayrender.aspx)

[Calendar.DayRender 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.dayrender.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:33:45.333

该`DayRender`事件需要映射事件处理程序。您尚未在代码中显示这一点。您需要在`Page_Init`活动期间添加它（而不是 Page 构造函数）：

```
public override void OnInit(Object sender, EventArgs e) {
    this.Calendar1.DayRender += new EventHandler( Calendar1_DayRender );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T06:06:54.090

```
 **

        In source View
        --------------

        **

        <asp:Calendar runat="server" ID="cld_date_required" BackColor="White" BorderColor="#999999"CellPadding="4" DayNameFormat="Shortest"
 Font-Names="Arial" Font-Size="8pt" ForeColor="Black" 
 OnDayRender="DayRender" Height="180px" Width="270px"></asp:Calender>

        In Code View
        ------------

     protected void DayRender(object sender, DayRenderEventArgs e)
            {
                if (e.Day.Date < System.DateTime.Today)
                {
                    e.Day.IsSelectable = false;
                    e.Cell.ForeColor = System.Drawing.Color.LightGray;
                }
            } 
```

# jquery - jQuery的fadeToggle问题

> ID：12657073
> 
> 赞同：0
> 
> 时间：2012-09-29T22:29:15.807
> 
> 标签：jquery, toggle

我正在尝试使用 jQuery 做一个简单的 fadeToggle() 并且由于某种原因代码没有触发。我想单击第一个链接以`<li>`显示其他四个列表项。

这是HTML：

```
 <ul>
        <li><a id="filters-switch" href="javascript:void(0)">filters</a></li>
        <li class="filters"><a href="http://cargocollective.com/dzangtech/filter/event/">events</a></li>
        <li class="filters"><a href="http://cargocollective.com/dzangtech/filter/release/">releases</a></li>
        <li class="filters"><a href="http://cargocollective.com/dzangtech/filter/misc/">misc.</a></li>
        <li class="filters"><a href="http://cargocollective.com/dzangtech">all</a></li>
 </ul> 
```

这是JavaScript：

```
<script type="text/javascript">
  $("#filters-switch").click(function() {
  $(".filters").fadeToggle("slow", "linear");
});
</script> 
```

如果它有助于查看，这也是该网站： http: [//cargocollective.com/dzangtech](http://cargocollective.com/dzangtech)。链接在左上角。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:31:34.687

您正在使用**jQuery v1.4.2**，显然它没有功能`fadeToggle`- 更新到最新版本。

编辑：是的，[`fadeToggle`](http://api.jquery.com/fadeToggle/)在 1.4.4 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T22:35:30.027

.fadeToggle() 是在 jQuery 1.4.4 中添加的——看起来您的网站使用的是 jQuery 1.4.2。尝试升级 jQuery，否则你只需要常规的 ol'fadeIn/fadeOut。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:31:13.547

将事件绑定到文档就绪

```
$(document).ready(function(){
  $("#filters-switch").click(function() {
    $(".filters").fadeToggle("slow", "linear");
   });
}); 
```

# php - mysqli 绑定参数数据类型

> ID：12657076
> 
> 赞同：1
> 
> 时间：2012-09-29T22:29:49.837
> 
> 标签：php, mysql, mysqli

我目前正在研究一小组 php 中的数据库访问和管理类。在试图更好地理解我们众所周知的 mysqli 时，我仍然无法理解为什么以及如何在 mysqli_stmt::bind_param 中定义的变量类型能够并且会增强当前应用程序中的安全性/实用性。

使用 mysql 语句的优点是显而易见的。查询和值在两个不同的路径上提交，这当然使应用程序更安全，更防错！但是这些变量会发生什么……这些是在 php 之前检查还是在 mysql 之后检查？

只是mysqli因为做类似的事情而懒惰吗？

```
!is_numeric($v) && ( !is_null($v) || $v != “NULL”) ? “‘$v’” : $v 
```

或者我不知道 mysql 端是否有任何 var 类型定义？

```
“PREPARE stmt_name FROM … “;
“SET @var1 = 3”;
“SET @var2 = ‘foo’”;
“EXECUTE stmt_name USING @var1, @var2”; 
```

**这个值似乎没有太多变化。几乎所有作为字符串传递的东西都被正确评估了……那为什么还要麻烦呢？**

即使与这个问题相关，还有另一个问题：有什么方法可以复制 mysqli 在数据包中发送 blob 字符串的方式？

谢谢再见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:57:17.567

因为还没有人给出答案……我现在有一个！bind_param 中的数据类型定义不仅仅将这些引号添加到查询中，尽管变量的绑定级别比 php 脚本所能做到的要低！正式通过除 mysqli/pdo 之外的任何不同路径意味着通过字符串传输所有数据！

就是这样，干杯！

# mysql - 如何在 WAMP 上更改 mysql 数据库目录

> ID：12657081
> 
> 赞同：7
> 
> 时间：2012-09-29T22:30:13.970
> 
> 标签：mysql, windows, wamp

我正在使用 Windows 7 和 Ubuntu 运行双启动服务器。在 Ubuntu 上，一切都按照我的意愿进行配置。在 Windows 上，我需要知道如何更改我的 MySQL 数据库目录，以便它使用我在 Ubuntu 上使用的相同目录。我该怎么做呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-30T04:01:04.340

希望这张图片能指导清楚。您可以单击并选择查看图像以清楚地查看我的答案

[![](../Images/145ea2daa441dfda4e9d54825ef7d15b.png)](https://i.stack.imgur.com/7H40Z.png)

**请不要忘记在这些步骤之后重新启动 wamp/xampp 然后它将被应用**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T03:13:33.347

[WAMP 服务器 2.2中的](http://www.wampserver.com/en/)[1](http://www.wampserver.com/en/) [在windows 中]，

转到**C:\wamp\bin\mysql\mysql5.5.24\my.ini**

[2] 你会发现这样，

**datadir= *c:/wamp/bin/mysql/mysql5.5.24/data***

[3] 改变这个

“ **datadir =*你的 Ubuntu MySql 数据目录路径***”。

[4]**然后重启 wamp server**。

我希望这将有助于解决您的问题。

谢谢。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-07-09T10:59:52.307

我有更好的主意...打开 phpmyadmin 页面...并选择您的数据库...在操作选项卡和重命名数据库部分...写下您的新数据库名称。你会看到拖曳消息。两者都按是按钮

# html - 使网页中心对齐

> ID：12657086
> 
> 赞同：0
> 
> 时间：2012-09-29T22:31:04.030
> 
> 标签：html, css

> **可能重复：**
> [网页的中心内容](https://stackoverflow.com/questions/882344/center-contents-of-webpage)

我已经按照使网页中心对齐的方式，但该网站仍然是左对齐的。请帮忙。谢谢

```
#parent{
      margin:0 auto;
      width: 960px;  
}
<div id="parent">
          <!--more code goes here-->
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T22:34:46.487

在某些浏览器中，您仍然需要`text-align`在 body 上加上 a 才能使其工作：

```
body {
    text-align: center; /* this helps some browsers align the #parent element */
}

#parent{
    margin:0 auto;
    width: 960px; /* a fixed width is mandatory for margin auto to work */
    text-align: left; /* this resets the contents alignment */
} 
```

# matlab - 在matlab中求解非线性方程

> ID：12657087
> 
> 赞同：0
> 
> 时间：2012-09-29T22:31:06.747
> 
> 标签：matlab, math, equation, nonlinear-functions

我需要知道如何求解一个非线性方程组但改变一个参数，这样每次你改变那个参数都会给我那个系统的结果（需要所有结果），我想到了一个 for，它正在改变参数，求解方程并将每个结果存储在电子表格中，问题是由于您无法求解系统，因此我抛出非符号数值，它们为您提供了一个必须求解的系统示例：

```
0 = 125 +100 * cos (x) -25 * cos (a) -175 * cos (y)
0 = 100 * sin (x) -25 * sin (a) -175 * sin (y) 
```

在要更改的参数中`a`，要保持电子表格中的`x`和的相应值。`y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:36:13.547

您需要知道如何求解非线性方程。这意味着选择一个起点，创建一个增量的、迭代的解决方案，并提供停止的容差。您需要知道，并非每个非线性方程都有解。您对起点和迭代策略的选择可能对您能否找到解决方案和流程的效率产生深远的影响。

你在这里解决什么问题？你有两个方程；我将假设两个未知数（x，y）。

在使用 Matlab 之类的工具之前，您需要更多基本信息。它可能会为您封装很多细节，但不会为您做出算法选择。你仍然需要知道一些东西，尤其是关于你的方程组。

从阅读以下内容开始：

[http://www.physicsforums.com/archive/index.php/t-106606.html](http://www.physicsforums.com/archive/index.php/t-106606.html)

我建议在 x 和 y 的范围内绘制你的方程。在开始之前，您应该知道地形是什么样的。您正在处理三角函数，因此 x 和 y 从零变化到 2π，然后重复。绘制几个 x 和 y 周期，看看你得到了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T09:51:41.730

如果你有符号工具箱，你可以使用 Matlab 的符号求解器...

```
syms x y a
b(1)  = 100 * sin (x) -25 * sin (a) -175 * sin (y)
b(2)  = 125 +100 * cos (x) -25 * cos (a) -175 * cos (y)
z     = solve(b,x,y)
Xsoln = simplify(z.x)
Ysoln = simplify(z.y) 
```

其中`Xsoln`和`Ysoln`表示根据 的值编写的解`a`。`a`然后，您可以通过以下任一方式评估多个值的解决方案

```
aval = 0.5; % or whatever value you want
subs(Xsoln,a,aval) 
```

或通过将解决方案转换为函数句柄并以这种方式对其进行评估（如果您需要在许多点进行评估，这是首选方法）：

```
xf = matlabFunction(Xsoln)
xf(0.5) 
```

# c# - 从数据上下文的本地视图中卸载项目

> ID：12657088
> 
> 赞同：0
> 
> 时间：2012-09-29T22:31:09.773
> 
> 标签：c#, wpf, entity-framework, entity-framework-4.1

我正在从数据库加载注释以将它们绑定到 WPF 控件，如下所示：

```
this.DBContext.Notes.Where(n => n.ID == selectedNote.ID).Load();
this.notesBox.DataContext = this.DBContext.Notes.Local; 
```

如果我想从本地视图中删除一个项目...

```
this.DBContext.Local.Notes.Remove(selectedNote);
this.notesBox.DataContext = this.DBContext.Notes.Local; 
```

...它不再显示在 notesBox 中，但是如果我再次选择该便笺，我将无法再将其加载到本地视图中。

**问题：鉴于 .Load() 将一组数据加载到本地视图中，从本地视图中卸载它们的正确方法是什么，以便稍后我可以重新加载它们？**

（我假设 Local.Remove(entity) 如果我要运行 DBContext.SaveChanges() 实际上会从数据库中删除该项目，这就是我无法重新加载它的原因）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:47:31.447

您是正确的，从本地删除也会将其从 DbSet 中删除，因此将从数据库中删除。

如果您想修改一个不会导致数据库更改的集合，您应该从 Notes 查询中创建一个新的可观察集合并绑定到它：

```
var collection = new ObservableCollection<Note>(this.DBContext.Notes.Where(n => n.ID == selectedNote.ID)); 
this.notesBox.DataContext = collection; 
```

这样，您可以在不修改数据库的情况下删除/修改新集合。

# ios - 从子视图控制器呈现主视图控制器

> ID：12657090
> 
> 赞同：0
> 
> 时间：2012-09-29T22:31:14.563
> 
> 标签：ios, uiviewcontroller

我有一个主视图控制器，并且正在呈现一个子视图。对于孩子内部的其中一项设置，我需要再次调用主视图控制器。它只会让事情变得容易得多。

以下导致层次结构问题：

```
#define appDelegate (MyAppDelegate *)[[UIApplication sharedApplication] delegate]

[self presentViewController:[appDelegate mainViewController] animated:YES completion:^{}]; 
```

有什么方法可以轻松调用 mainViewController 而不会丢失子视图的状态？

**编辑**

这是我呈现子视图的方式。

```
ChildViewController *childViewController = [[ChildViewController alloc] init];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:childViewController];
[childViewController release];
[self presentModalViewController:navigationController animated:NO];
[navigationController release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:45:32.627

您不能呈现已经呈现或位于导航堆栈中的视图控制器。什么是主视图控制器？你实例化了吗？已经添加到屏幕上了吗？

如果两者都是，您要么需要回到它（解雇它），要么先将它从它的父级中删除，然后再呈现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:35:16.300

在您的子视图中，您应该可以访问您的应用程序委托及其 mainViewController 属性，如下所示：

```
 MyApplicationDelegate *appDelegate = (MyApplicationDelegate *)[[UIApplication sharedApplication] delegate]; 
```

# php - 注销后保留用户名的 Facebook 登录

> ID：12657091
> 
> 赞同：1
> 
> 时间：2012-09-29T22:31:17.887
> 
> 标签：php, facebook-login

只是想了解 Facebook 登录背后的理念。

1.  如果我登录到 Facebook，我的网站会收到此信息并自动让我登录。
2.  如果我退出 Facebook，那么我没有在 Facebook 中进行身份验证，网站仍然可以使用
3.  如果我通过我的网站或 Facebook 登录，我已通过身份验证，我可以使用 Facebook 或我的网站作为经过身份验证的用户
4.  如果我然后注销 Facebook，我的应用程序仍然经过身份验证，但不是 Facebook。
5.  如果我注销我的应用程序并终止所有会话并手动删除 cookie，我可以成功注销。

注销两者后我遇到的问题是，`$facebook->getUser();`仍然`getAccessToken();`维护我使用的 id 和令牌。这些是从哪里来的？

我正在使用 PHP SDK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:15:42.010

当您使用 Facebook 登录到您的应用程序时，您的应用程序会请求 Facebook 对您进行身份验证。身份验证成功后，Facebook 会告诉您的应用程序您已通过身份验证。然后，您的应用程序会维护自己的会话。

您在 Facebook 帐户或应用程序中所做的事情可能不会相互反映更改。例如，当您注销 Facebook 帐户时，您的应用程序不会知道，因为就您的应用程序而言，您已经通过了身份验证。同时，当您注销 Facebook 时，Facebook 并没有告诉您的应用程序您已经注销。

应用程序和 Facebook（或其他 OAuth 提供者）维护自己的单独会话。

对于您的问题：

1.  是的，您的网站会将访问者重定向到 Facebook 中的链接，该链接会自动告诉您的客户您已登录。您不再看到提示，因为您在第一次尝试使用 Facebook 帐户访问应用程序时已授予您的应用程序权限。

2.  由于单独的会话，这将起作用。当您退出 Facebook 时，您仍会登录该应用程序。除非应用程序尝试通过 Facebook 再次验证您的身份 - 在这种情况下，身份验证将失败。

3.  这是正确的，但是如果不登录 Facebook，您将无法登录您的应用程序，除非您有另一种方式在没有 Facebook 的情况下对您的应用程序进行身份验证（例如使用链接帐户的替代登录）。但是，在这种情况下，您仍然需要使用他们的登录表单登录 Facebook。您无法通过您的应用程序登录 Facebook。

4.  那是对的。如果您退出 Facebook，您将退出 Facebook。由于单独的会话，您也需要注销您的应用程序。

5.  也正确。

您的情况可能发生的是：

1.  您退出了您的应用程序
2.  你被重定向到你的主页
3.  您的主页尝试对您进行身份验证，因为您未登录
4.  您被重定向到 Facebook
5.  Facebook 确认您的身份并重定向到应用程序
6.  应用程序再次对您进行身份验证

为了解决这个问题，您的主页不应自动验证。应该有一个用户必须单击的按钮 - 在您启动 Facebook 身份验证之前，类似于“使用 Facebook 登录”。

您也不能“强制注销”用户退出 Facebook。因此，在使用您的应用程序后，您的用户必须注销您的应用程序和 Facebook。如果您的应用程序使用会话 cookie，则在关闭浏览器时用户将被注销。

# ubuntu - apache2服务器上的多个站点

> ID：12657096
> 
> 赞同：2
> 
> 时间：2012-09-29T22:32:13.023
> 
> 标签：ubuntu, apache2

我正在尝试在同一个 IP 上为多个站点提供服务。这些是 /etc/apache2/sites-available 下的配置

**默认配置：**

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www/
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
            # This directive allows us to have apache2's default start page
            # in /apache2-default/, but still have / go to the right place
            RedirectMatch ^/$ /apache2-default/
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>

    ErrorLog /var/log/apache2/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
    ServerSignature On

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory> 
```

**第一个站点：**

```
<VirtualHost *:80>
ServerAdmin techm3@gmail.com
ServerName site1.ws
ServerAlias *.site.ws

# Index file and document Root (where the public files are located)
DirectoryIndex index.html
DocumentRoot "/var/www/vhosts/site1.ws/htdocs"

# Custom log file locations
LogLevel warn
ErrorLog /var/www/vhosts/site1.ws/log/error.log
CustomLog /var/www/vhosts/site1.ws/log/access.log combined

<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory "/var/www/vhosts/site1/htdocs">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory> 
```

**第二个站点：**

```
<VirtualHost *:80>
ServerAdmin techm3@gmail.com
ServerName me.site2.com
ServerAlias me.site2.com

# Index file and document Root (where the public files are located)
DirectoryIndex index.html
DocumentRoot "/var/www/vhosts/site2.com/htdocs/"

<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory "/var/www/vhosts/site2.com/htdocs">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory> 
```

每当我尝试加载 site2 时，它都会给我 site1 的内容。我究竟做错了什么？

**注意：**我将 Godaddy 的域和子域重定向到端口 80 上的服务器 ip。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-17T08:13:49.163

在 /etc/hosts 文件中注册您的两个站点

# javascript - 使用 grunt -> RangeError 编译咖啡脚本：超出最大调用堆栈大小

> ID：12657098
> 
> 赞同：1
> 
> 时间：2012-09-29T22:32:21.737
> 
> 标签：javascript, coffeescript, gruntjs

我尝试使用[grunt-contrib-coffee](https://npmjs.org/package/grunt-contrib-coffee)插件用 grunt 编译我的咖啡脚本文件。但是运行`grunt coffee`，我总是得到这个错误：

```
RangeError: Maximum call stack size exceeded 
```

这是我的 grunt.js 文件：

```
/*global module:false*/
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    meta: {
      version: '0.1.0',
      banner: '/*! PROJECT_NAME - v<%= meta.version %> - ' +
        '<%= grunt.template.today("yyyy-mm-dd") %>\n' +
        '* http://PROJECT_WEBSITE/\n' +
        '* Copyright (c) <%= grunt.template.today("yyyy") %> ' +
        'YOUR_NAME; Licensed MIT */'
    },
    lint: {
      files: ['grunt.js', 'lib/**/*.js', 'test/**/*.js']
    },
    qunit: {
      files: ['test/**/*.html']
    },
    concat: {
      dist: {
        src: ['<banner:meta.banner>', '<file_strip_banner:lib/FILE_NAME.js>'],
        dest: 'dist/FILE_NAME.js'
      }
    },
    min: {
      dist: {
        src: ['<banner:meta.banner>', '<config:concat.dist.dest>'],
        dest: 'dist/FILE_NAME.min.js'
      }
    },
    watch: {
      files: '<config:lint.files>',
      tasks: 'lint qunit'
    },
    jshint: {
      options: {
        curly: true,
        eqeqeq: true,
        immed: true,
        latedef: true,
        newcap: true,
        noarg: true,
        sub: true,
        undef: true,
        boss: true,
        eqnull: true,
        browser: true
      },
      globals: {}
    },
    uglify: {},
    coffee: {
      compile: {
        files: {
          'javascript/result.js': 'lib/grayScott.coffee'
        }
      }
    }
  });

  // Default task.
  grunt.registerTask('default', 'lint qunit concat min');
  grunt.registerTask('coffee', 'coffee');

}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T21:43:51.463

将以下行添加到您的 grunt.js 文件以加载`grunt-contrib-coffee`任务（在安装任务之后，即`npm install grunt-contrib-coffee`：

`grunt.loadNpmTasks('grunt-contrib-coffee');`

然后删除此行：`grunt.registerTask('coffee', 'coffee');`. 该行正在尝试将咖啡任务注册到自身，并且可能是`RangeError`.

# android - 每月设置一次重复闹钟

> ID：12657103
> 
> 赞同：0
> 
> 时间：2012-09-29T22:32:56.513
> 
> 标签：android, android-alarms

我正在使用警报管理器和广播接收器。我可以设置警报等等。但我不知道如何解决我的问题。我需要能够设置重复警报，这里的技巧是让它在每个月的 14 日下午 4:00 重复一次（所以每月警报）。

我该怎么做？我知道如何让它每天或每周重复，因为很容易计算一周中有多少毫秒，但是当我们每月谈论时，每个月都有不同的天数，所以我不能用固定间隔。

这里有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:04:21.127

根据要求。您在上面提供了，我一次只安排一个警报，只需在触发前一个警报时计算新的时间值。您还想做的一件事是设置一个服务来监听启动完成事件。警报不会在重新启动后持续存在。您可以在此处找到有关如何执行此操作的信息[如何在启动时启动应用程序？](https://stackoverflow.com/questions/6391902/how-to-start-an-application-on-startup)

# c# - XAML 中的数据绑定（多路绑定？）

> ID：12657105
> 
> 赞同：3
> 
> 时间：2012-09-29T22:33:32.790
> 
> 标签：c#, .net, wpf, xaml, binding

假设我有一个 ListBox 绑定到代码隐藏中的内容：

```
<ListBox x:Name="list">
   <ListBox.ItemTemplate>
      <DataTemplate>
         <ListBoxItem Content="{Binding Name}" />
      </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox>

<TextBox x:Name="name" Text="{Binding ElementName=list, Path=SelectedItem.Name, Mode=TwoWay" />
<TextBox x:Name="contents" Text="{Binding ElementName=list, Path=SelectedItem.Contents, Mode=TwoWay" /> 
```

后面的代码：

```
public class Dude
{
   public String Name { get; set; }
   public String Contents { get; set; }
} 
```

现在上面的内容正是我想要的。当列表框中的项目被选中时，文本框会更新以显示在列表框中选择的内容。

但是我现在要做的是通过向其添加 Dictionary 来扩展我的 Dude 类：

```
public class Dude
{
   public string Name { get; set; }
   public string Contents { get; set; }
   public Dictionary<String, String> Tasks { get; set; }
} 
```

希望我能：

> 单击 ListBox 中的一个项目，使相应项目的名称和内容属性显示在它们各自的文本框中，然后将字典内容的键/值附加到内容文本框。

但我不知道我怎么能走得那么深。感觉就像我要去多个层次一样，像多维绑定这样的东西是我需要的吗？

您有或看过任何（简单的）样本吗？文档、文章、教程？

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T08:28:44.093

你想要的可以在 WPF 中完成（在 Wp7 或 WinRT 等其他 XAML 技术中更难），但***我不确定它是否是你需要的***......

**使用 MultiBinding**将 Contents 字符串和 Tasks 字典绑定到第二个文本框，然后编写自己的 IMultiValueConverter 来构建要显示的字符串。

在此处阅读[有关 MultiBindings 的教程](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-multibindings)，粗略的代码应如下所示：

```
<TextBox>
   <TextBox.Text>
      <MultiBinding Converter="{StaticResource YourAppendingConverter}">
         <Binding ElementName="list" Path="SelectedItem.Contents" />
         <Binding ElementName="list" Path="SelectedItem.Tasks" />
      </MultiBinding>
   </TextBox.Text>
</TextBox> 
```

你的转换器应该类似于：

```
public class YourAppendingConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, 
      System.Globalization.CultureInfo culture){
       StringBuilder sb = new StringBuilder(values[0].ToString());
       sb.AppendLine("Tasks:");
       foreach (var task in (Dictionary<string,string>)values[1]){
         sb.AppendLine(string.Format("{0}: {1}", task.Key, task.Value));
       }
       return sb.ToString();
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, 
      System.Globalization.CultureInfo culture){
        throw new NotSupportedException();
    } 
```

为什么我认为这是你需要的？

1.  如果需要，写一个 ConvertBack 是地狱 - 所以这个 TextBox 应该是只读的
2.  字典没有通知。如果底层字典在您显示时发生变化，则不会发生任何变化

如果您考虑清楚这些，那么 MultiBinding 可能是您需要的工具。

# iphone - 在 iPhone 应用程序中记录错误/事件的最佳做法是什么？

> ID：12657108
> 
> 赞同：7
> 
> 时间：2012-09-29T22:33:53.523
> 
> 标签：iphone, ios

在 iPhone 应用程序中记录错误/事件的最佳做法是什么？我不是在谈论调试，而是在发布应用程序之后。我的意思是，当应用程序以发布模式（而非调试模式）运行时，我想收集错误/事件日志。（当需要时，我可以要求用户自愿将文件发送到我的服务器进行分析。）

（如果 NSLog 没有在调试中运行，它是否有任何影响？如果是，它会写入哪里？以及，如何以编程方式清除任何内容？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:21:22.780

我在这里发布了一个类似问题的答案：[Include custom data into iOS crash dumps](https://stackoverflow.com/questions/8488894/including-custom-data-into-ios-crash-dumps/8511100#8511100)

NSLog 不应该用于生产应用程序中的详细日志记录，因为它会减慢您的应用程序。NSLog 每次调用时都会打开与系统记录器的连接，并同步执行此操作，因此会阻塞当前线程。

而是使用异步记录的[CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack)，它非常快，并且提供了日志级别的支持，甚至可以在运行时通过一些额外的努力进行更改（参见它的 wiki 页面）。此外，它还支持多个输出目的地，如文件、控制台或 Xcode 控制台等。

另一个很棒的日志库是[NSLogger](https://github.com/fpillet/NSLogger)，它提供了一个 Mac 应用程序来通过 Bonjour 流式传输日志数据。这两个库可以一起使用，这意味着通过使用此连接器将日志数据从 CocoaLumberjack 流式传输到 NSLogger Mac 应用程序：[https ://github.com/steipete/NSLogger-CocoaLumberjack-connector](https://github.com/steipete/NSLogger-CocoaLumberjack-connector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:48:43.770

我更喜欢使用 [http://www.flurry.com](http://www.flurry.com) 或 [https://testflightapp.com](https://testflightapp.com)

# java - 隐马尔可夫模型，对先前实现的澄清

> ID：12657109
> 
> 赞同：2
> 
> 时间：2012-09-29T22:33:54.413
> 
> 标签：java, hidden-markov-models

我正在尝试隐藏马尔可夫模型。我真的没有与他们合作的经验，所以我决定查看一些实现示例。

看看下面的实现，我对 Baum-Welch 算法（在 train 方法下找到）采取可变步骤的目的有点困惑。我理解提供训练集，但不提供步骤。有没有人对此有解释，因为我从文档中不明白。

这是原始代码的链接[http://cs.nyu.edu/courses/spring04/G22.2591-001/BW%20demo/HMM.java](http://cs.nyu.edu/courses/spring04/G22.2591-001/BW%20demo/HMM.java)因为代码在我的帖子中没有很好地呈现。

```
import java.text.*;

/** This class implements a Hidden Markov Model, as well as
the Baum-Welch Algorithm for training HMMs.
@author Holger Wunsch (wunsch@sfs.nphil.uni-tuebingen.de) 
*/
public class HMM {
  /** number of states */
  public int numStates;

  /** size of output vocabulary */
  public int sigmaSize;

  /** initial state probabilities */
  public double pi[];

  /** transition probabilities */
  public double a[][];

  /** emission probabilities */
  public double b[][];

  /** initializes an HMM.
  @param numStates number of states
  @param sigmaSize size of output vocabulary 
  */

 public HMM(int numStates, int sigmaSize) {
   this.numStates = numStates;
   this.sigmaSize = sigmaSize;

   pi = new double[numStates];
   a = new double[numStates][numStates];
   b = new double[numStates][sigmaSize];
 }

 /** implementation of the Baum-Welch Algorithm for HMMs.
  @param o the training set
  @param steps the number of steps
 */
  public void train(int[] o, int steps) {
     int T = o.length;
     double[][] fwd;
     double[][] bwd;

     double pi1[] = new double[numStates];
     double a1[][] = new double[numStates][numStates];
     double b1[][] = new double[numStates][sigmaSize];

     for (int s = 0; s < steps; s++) {
      /* calculation of Forward- und Backward Variables from the
 current model */
      fwd = forwardProc(o);
      bwd = backwardProc(o);

      /* re-estimation of initial state probabilities */
      for (int i = 0; i < numStates; i++)
    pi1[i] = gamma(i, 0, o, fwd, bwd);

      /* re-estimation of transition probabilities */ 
      for (int i = 0; i < numStates; i++) {
    for (int j = 0; j < numStates; j++) {
     double num = 0;
     double denom = 0;
     for (int t = 0; t <= T - 1; t++) {
       num += p(t, i, j, o, fwd, bwd);
       denom += gamma(i, t, o, fwd, bwd);
     }
   a1[i][j] = divide(num, denom);
  }
    }

  /* re-estimation of emission probabilities */
  for (int i = 0; i < numStates; i++) {
for (int k = 0; k < sigmaSize; k++) {
  double num = 0;
  double denom = 0;

  for (int t = 0; t <= T - 1; t++) {
    double g = gamma(i, t, o, fwd, bwd);
    num += g * (k == o[t] ? 1 : 0);
    denom += g;
  }
  b1[i][k] = divide(num, denom);
}
  }
  pi = pi1;
  a = a1;
  b = b1;
}
}

  /** calculation of Forward-Variables f(i,t) for state i at time
  t for output sequence O with the current HMM parameters
  @param o the output sequence O
  @return an array f(i,t) over states and times, containing
          the Forward-variables. 
  */

  public double[][] forwardProc(int[] o) {
int T = o.length;
double[][] fwd = new double[numStates][T];

/* initialization (time 0) */
for (int i = 0; i < numStates; i++)
  fwd[i][0] = pi[i] * b[i][o[0]];

/* induction */
for (int t = 0; t <= T-2; t++) {
  for (int j = 0; j < numStates; j++) {
fwd[j][t+1] = 0;
for (int i = 0; i < numStates; i++)
  fwd[j][t+1] += (fwd[i][t] * a[i][j]);
fwd[j][t+1] *= b[j][o[t+1]];
  }
}

return fwd;
} 
```

我的另外两个问题是关于 Forward 方法的，它实现了 Forward-Backward 算法的 Forward 部分。通过阅读 HMM，我了解到，在训练我的模型之后，我应该使用这种方法来预测未来的观察结果。那么参数 O（表示输出序列）是否只是到目前为止的观察序列？

通过对这种方法的一些实验，我返回了文档所说的正向变量，它看起来就像一堆概率。这些如何转化为未来的观察？

我正在深入研究对我来说非常困难的编程领域，所以我非常感谢你帮助我理解这些东西！

# java - 如何从 TypeMirror 对象中获取类型描述符（JNI 风格）字符串（注解处理）

> ID：12657112
> 
> 赞同：5
> 
> 时间：2012-09-29T22:33:57.653
> 
> 标签：java, java-native-interface, annotation-processing, typedescriptor

我想得到一个像这样的字符串：

```
Ljava/lang/Class;.getName()Ljava/lang/String; 
```

（JNI 风格的类型/方法描述，或称为类型描述符）

从 中的一个`javax.lang.model.type.TypeMirror`对象`AnnotationProcessor`。是否有任何 Convenience 方法或库可以解析`TypeMirror`对象并生成像上面这样的字符串？

我想使用 String `org.objectweb.asm.Type`从类型描述符字符串构造一个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-21T21:59:13.787

我意识到这已经有将近十年的历史了，但我已经编写了一个库来将 TypeMirror/Element 支持添加到 ASM 库中。请参见此处：[https](https://github.com/soabase/asm-mirror-descriptor) ://github.com/soabase/asm-mirror-descriptor - 使用此库，您现在可以执行以下操作：

```
MirrorClassReader reader = new MirrorClassReader(processingEnv, element);
reader.accept(myClassVisitor);  // standard ASM ClassVisitor 
```

或者

```
String signature = SignatureMirrorType.getSignature(processingEnv, element); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-29T13:19:11.130

打开控制台，转到您已经编译的类 fe ： cd ./build/classes 。然后输入 javap -s NameOfYourCompiledClass.class （在控制台中），你会得到你的描述符。对于您的情况，我将使用您的自定义类扩展此 TypeMirror 类，重载所有方法，编译项目并按照以下说明操作新类

# php - 将这两个查询组合成一个，首先需要第二个查询的值

> ID：12657118
> 
> 赞同：2
> 
> 时间：2012-09-29T22:35:09.983
> 
> 标签：php, mysql

我有两个 SQL 查询：

```
$res1 = mysql_query("SELECT * FROM `table1` WHERE `user`='user'");
$i = mysql_fetch_assoc($res1);    
$value1 = $i['num']; 
```

和：

```
$res2 = mysql_query("INSERT INTO `table2` (`name`,`num`) VALUE ('name','$value1')"); 
```

如何将两个 SQL 查询合二为一？我需要从第一个请求的第二个查询中获取变量的值。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T22:39:35.490

这个带有子查询的查询应该可以很好地为您解决问题：

```
insert into table 2 (`name`, `num`) 
    values ('name', (select `num` from table1 where `user`='user')); 
```

这假设您除了`num`第二个查询之外没有使用任何东西，因为它似乎没有在您的原始代码中使用。

编辑：另外，我看到这是一个插入，而不仅仅是一个选择语句，但你可能会从阅读我提出的一个相当长的[问题和答案](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)中受益，它涵盖了多个表和 SQL，涵盖联合、连接、子查询和一堆更多东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T22:40:34.850

你可以使用 INSERT INTO ... SELECT ... 语法吗？

例如：

```
INSERT INTO table2 (name, num)
SELECT 'name', num
FROM table1
WHERE user='user' 
```

（未经测试，所以请原谅这里的任何小错误......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:41:19.180

废了这个。

最好的答案是让 PHP 拥有 MYSQL 需要的数据。以任何其他方式进行都会导致瓶颈并且效率低下。

# ios - NSFetchedResultsController - 与部分名称不同的排序顺序

> ID：12657121
> 
> 赞同：16
> 
> 时间：2012-09-29T22:35:32.653
> 
> 标签：ios, core-data, nsfetchedresultscontroller

对于分组的 UITableView 中的部分，我有一个 NSManagedObject。该对象具有属性“name”和“createdAt”。我想在 te UI 中使用“名称”作为部分标题，但按“createdAt”排序。根据文档，第一个 sortDescriptor 键也必须是 NSFetchedResultsController 的 sectionNameKeyPath。

我建议使用两个 sortDescriptor，但它不起作用。这些部分仍按名称排序。

```
- (NSFetchedResultsController *)fetchedResultsController {
  if (_fetchedResultsController != nil) {
      return _fetchedResultsController;
  }

  NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
  NSEntityDescription *entity = [NSEntityDescription entityForName:@"Object" inManagedObjectContext:[CoreDataHelper instance].managedObjectContext];
  [fetchRequest setEntity:entity];

  NSSortDescriptor *sortName = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
  NSSortDescriptor *sortDate = [[NSSortDescriptor alloc] initWithKey:@"createdAt" ascending:YES];

  [fetchRequest setSortDescriptors:[NSArray arrayWithObjects:sortName, sortDate, nil]];

  [fetchRequest setFetchBatchSize:20];

  NSFetchedResultsController *theFetchedResultsController =
  [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:[CoreDataHelper instance].managedObjectContext sectionNameKeyPath:@"name"
                                               cacheName:@"Root"];
  self.fetchedResultsController = theFetchedResultsController;

  return _fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-30T09:05:13.227

获取结果控制器 (FRC) 仅使用第一个排序描述符将对象分组（和排序）到部分中。可以添加第二个排序描述符来对每个部分中的对象进行排序。

此外，排序描述符的键路径必须与`sectionNameKeyPath`FRC 的相同（或至少生成相同的相对排序）。

另请参阅“核心数据编程指南”中的[创建获取结果控制器：](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/nsfetchedresultscontroller.html)

> ...在本例中，您向 NSFetchRequest 实例添加了一个 NSSortDescriptor 实例。您在 NSFetchedResultsController 的初始化中设置与新排序描述符中的 sectionNameKeyPath 相同的键。fetched results 控制器使用这个初始排序控制器将数据分成多个部分，因此要求键匹配。

在您的情况下，您可以执行以下操作：

1.  在第一个排序描述符中使用`createdAt`as`sectionNameKeyPath` *和。*

2.  修改`titleForHeaderInSection`委托函数以返回`name`属性而不是`createdAt`：

    ```
     - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { 
         id <NSFetchedResultsSectionInfo> sectionInfo = [[self.controller sections] objectAtIndex:section];
         return [[[sectionInfo objects] objectAtIndex:0] name];
     } 
    ```

*注意：*如果您有多个具有相同`name`但不同`createAt`值的对象，这些对象将使用上述方法分组到不同的部分。我不知道这对你来说是不是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:40:09.460

您快到了。您需要在 initWithFetchRequest 调用中定义 sectionNameKeypath。

```
 NSSortDescriptor *sortDate = [[NSSortDescriptor alloc] initWithKey:@"createdAt" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDate]];

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[CoreDataHelper instance] sectionNameKeyPath:@"name"]; 
```

# erlang - Erlang gen_tcp 延迟发送

> ID：12657125
> 
> 赞同：1
> 
> 时间：2012-09-29T22:37:34.883
> 
> 标签：erlang, gen-tcp

我将以下代码作为 Erlang Web 服务器的一部分，用于许多长期并发连接。

```
SockOpts = [
    binary,
    {active, false},
    {packet, http_bin},
    {reuseaddr, true},
    {packet_size, 16384},
    {recbuf, 16384},
    {backlog, 100},

    {delay_send, false},
    {nodelay, true}
],
gen_tcp:listen(Port, SockOpts) 
```

尽管我添加了`delay_send`and`nodelay`选项，但它似乎在缓冲数据，因此在发送更大的数据块或服务器被终止之前不会发送小块数据。为什么会这样，我怎样才能强制它立即发送所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:46:23.853

原来是 iPad 客户端中的 NSURLConnection 缓冲数据，而不是立即传递数据。

我切换到 CFNetwork，这很有趣。

# javascript - javascript获取下拉列表中值的索引

> ID：12657129
> 
> 赞同：0
> 
> 时间：2012-09-29T22:38:47.983
> 
> 标签：javascript

我正在向下拉列表传递一个值，如何获取下拉列表值的索引并使用 javascript 设置它？

```
 document.getElementById("ddlColors").selectedIndex = ? 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T22:42:38.627

循环是唯一的方法，真的：

```
var options = document.getElementById('ddlColors').options;

for(var i = 0; i < options.length; i++) {
    if(options[i].value === someValue) {
        options[i].selected = true;
        break;
    }
} 
```

[这是一个演示。](http://jsfiddle.net/minitech/mUuGh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T23:04:52.110

我想我误解了你的问题，因为如果我没有回答太前卫：使用值 [http://jsbin.com/urezor/2/edit](http://jsbin.com/urezor/2/edit)

# java - 对布局管理器的使用感到困惑

> ID：12657132
> 
> 赞同：0
> 
> 时间：2012-09-29T22:39:24.333
> 
> 标签：java, swing, user-interface, awt, layout-manager

我正在使用 Java 创建一个简单的游戏。我使用 JFrame 创建了游戏菜单。我对用于将菜单按钮（开始、高分、说明、退出）放置在中心的布局感到困惑。我想到了一种方法：创建一个三列的网格布局，并在中间列中添加一个位于该列中心的框布局（具有菜单按钮）。

我应该使用这种方法吗？如果没有，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:55:41.343

用一个[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

![在此处输入图像描述](../Images/92f8c7390b4bf9c49bf9c2a132817139.png)

```
JButton startButton = new JButton("Start");
JButton scoreButton = new JButton("High Score");
JButton instructButton = new JButton("Instructions");
JButton exitButton = new JButton("Exit");

GridBagConstraints gbc = new GridBagConstraints();
gbc.fill = java.awt.gbc.HORIZONTAL;
gbc.insets = new java.awt.Insets(2, 2, 2, 2);
gbc.gridx = 0;
gbc.gridy = 0;
getContentPane().add(startButton, gbc);

gbc.gridy = 1;
getContentPane().add(scoreButton, gbc);

gbc.gridy = 2;
getContentPane().add(instructButton, gbc);

gbc.gridy = 3;
getContentPane().add(exitButton, gbc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:55:06.433

Madprogrammer 是对的，使用 gridbaglayout。我自己实际上懒得和布局管理器混在一起，所以我使用 WindowBuilder for Eclipse SDK。在谷歌上搜索它。WindowBuilder 具有双向代码生成功能（即，它可以解析摆动代码，然后根据您在 gui 中执行的操作生成它），并且所有这些都可以拖放。

# arrays - 空引用异常 - 从 CSV 读取

> ID：12657134
> 
> 赞同：0
> 
> 时间：2012-09-29T22:39:37.463
> 
> 标签：arrays, vb.net, csv, nullreferenceexception

我必须编写一个从 csv 文件读取的大学 WPF 应用程序。当我想将 CSV 行的部分输出到数组中时，我得到一个空引用异常。您可以在评论中找到错误发生的行。这是代码。

```
Imports System.Windows.Forms
Imports System.IO
Imports System.Globalization

Class MainWindow
Private foldername As String
Private arrGemeenten As String()
Private arrOppervlakte As Double()
Private arrInwoners As Integer()
Private arrDeelgemeenten As Integer()

Private Sub cboProvincie_SelectionChanged(ByVal sender As System.Object, ByVal e As System.Windows.Controls.SelectionChangedEventArgs) Handles cboProvincie.SelectionChanged
    CSVInlezen()
End Sub

Private Sub MainWindow_Loaded(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles Me.Loaded

    FileBrowserAanmaken()
    comboBoxVullen()

End Sub

Private Sub comboBoxVullen()
    For Each file As String In IO.Directory.GetFiles(foldername)

        If file.EndsWith(".csv") Then
            Dim filenaam As String = System.IO.Path.GetFileNameWithoutExtension(file)
            cboProvincie.Items.Add(filenaam)
        End If

    Next
End Sub

Private Sub FileBrowserAanmaken()
    'folderbrowserdialog aanmaken
    Dim fbd As New FolderBrowserDialog

    fbd.SelectedPath = AppDomain.CurrentDomain.BaseDirectory

    ' Show the FolderBrowserDialog. 

    Dim result As DialogResult = fbd.ShowDialog()

    If (result = Forms.DialogResult.OK) Then
        foldername = fbd.SelectedPath
    End If
End Sub

Private Sub CSVInlezen()
    Dim filepath As String = foldername & "\" & cboProvincie.SelectedValue & ".csv"
    If File.Exists(filepath) Then
        fileInlezenHulpMethode(filepath)
    End If
End Sub

Private Sub fileInlezenHulpMethode(ByVal path As String)
    'declarations
    Dim sr As New StreamReader(path)
    Dim iTeller As Integer = 0
    Dim arrLijn As String()
    Dim culture As New System.Globalization.CultureInfo("nl-BE")

    'eerste lijn meteen uitlezen, dit zijn kolomkoppen en hebben we niet nodig
    'read out first line, these are titles and we don't need them
    sr.ReadLine()

    Do While sr.Peek <> -1
        Dim lijn As String = sr.ReadLine()
        arrLijn = lijn.Split(";")
        arrGemeenten(iTeller) = Convert.ToString(arrLijn(0)) 'HERE I GET THE ERROR!
        arrOppervlakte(iTeller) = Double.Parse(arrLijn(2), NumberStyles.AllowDecimalPoint, culture.NumberFormat)
        arrInwoners(iTeller) = Integer.Parse(arrLijn(3), NumberStyles.Integer Or NumberStyles.AllowThousands, culture.NumberFormat)
        arrDeelgemeenten(iTeller) = Convert.ToString(arrLijn(4))
    Loop
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:49:25.360

你还没有创建数组，你只是为它创建了一个引用。要创建数组，您需要指定一个大小，例如：

```
Private arrGemeenten As String(100) 
```

但是，要指定大小，您需要在创建数组时知道大小。（好吧，实际上您将所有数据都放在第一项中，所以只是大小`1`可以防止它崩溃，但我不认为那是您想要的。）您可能想要使用列表来代替：

```
Private gemeenten As New List(Of String)() 
```

然后您使用该`Add`方法将项目添加到列表中：

```
gemeenten.Add(Convert.ToString(arrLijn(0))) 
```

* * *

此外，考虑将数据放在自定义对象的单个列表中，而不是具有多个松散耦合数据列表。

# java - 打印列表时出现乱码

> ID：12657143
> 
> 赞同：0
> 
> 时间：2012-09-29T22:41:15.877
> 
> 标签：java

> **可能重复：**
> [Java 对象默认 toString](https://stackoverflow.com/questions/4712139/java-object-default-tostring)

为什么当我从文件阅读器打印我的列表时它是 [myServiceOrder@3bc1cac, myServiceOrder@32fe621e, myServiceOrder@5adbb9b9, myServiceOrder@f7e4f49, myServiceOrder@2d874991, myServiceOrder@ceee5f1, myServiceOrder@183a37d9]

```
public class myServiceOrder implements ServiceOrder, Comparable<myServiceOrder>{

private int number=0;
private String ownerName="";
private String make="";
private String model="";
private int year=0;

public myServiceOrder(int number, String ownerName, String make, String model,  int year) {
    this.number=number;
    this.ownerName=ownerName;
    this.make=make;
    this.model=model;
    this.year=year;
}

public myServiceOrder() {
    // TODO Auto-generated constructor stub
}

@Override
public void setOrderNum(int orderNumber) {
    number=orderNumber;
}

@Override
public void setYear(int year) {
    this.year=year;
}

@Override
public void setOwner(String ownerName) {
    this.ownerName=ownerName;
}

@Override
public void setMake(String make) {
    this.make=make;
}

@Override
public void setModel(String model) {
    this.model=model;

}

@Override
public String getOwner() {
    return ownerName;
}

@Override
public String getMake() {
    return make;
}

@Override
public String getModel() {
    // TODO Auto-generated method stub
    return  model;
}

@Override
public int getOrderNum() {
    // TODO Auto-generated method stub
    return number;
}

@Override
public int getYear() {
    // TODO Auto-generated method stub
    return year;
}

@Override
public String getMakeModelYear() {
    // TODO Auto-generated method stub
    return make+ " "+ model+ " "+ year+ " ";
}

@Override
public boolean equals(ServiceOrder otherServiceOrder) {
        if (getOrderNum()==otherServiceOrder.getOrderNum())
            return true;
        else
    return false;
}

@Override
public int compareTo(ServiceOrder otherServiceOrder, int key) {
    int comparisonResult=0;
    if(key==1)
    {
        if(getOrderNum()< otherServiceOrder.getOrderNum())
            comparisonResult= -1;
        if(getOrderNum()== otherServiceOrder.getOrderNum())
            comparisonResult= 0;
        if(getOrderNum()> otherServiceOrder.getOrderNum())
            comparisonResult= 1;
    }
        else if(key==2)
        {
            comparisonResult = getOwner().compareTo(otherServiceOrder.getOwner());                      
        }

        else if(key==3)
        {
         comparisonResult = getOwner().compareTo(otherServiceOrder.getOwner());
        }
    return comparisonResult;

}

@Override
public int compareTo(myServiceOrder arg0) {
    // TODO Auto-generated method stub
    return 0;
}

}

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Collections;
import java.util.LinkedList;
import java.util.Scanner;
import javax.swing.JOptionPane;

public class List extends LinkedList<myServiceOrder> {
private static  LinkedList<myServiceOrder> newList = new LinkedList();

 public  void  Print() throws Exception
 {
     System.out.println(newList);
 }
public   LinkedList<myServiceOrder> createServiceOrder(File inFile) throws Exception {
    int number=0;
     String ownerName="";
     String make="";
     String model="";
     int year=0;
     myServiceOrder serviceList = new myServiceOrder();    
        Scanner fileScan=new Scanner(inFile);
            while (fileScan.hasNext())
            {
                String ignore;

                number = fileScan.nextInt();
                //System.out.println(number);
                ignore = fileScan.nextLine(); // ignore the newline
                ownerName = fileScan.nextLine();
            //  System.out.println(ownerName);
                make = fileScan.nextLine();
        //      System.out.println(make);
                model = fileScan.nextLine();
            //  System.out.println(model);
                year = fileScan.nextInt();
        //      System.out.println(year);
                ignore = fileScan.nextLine(); // ignore the newline
                  serviceList = new myServiceOrder( number,  ownerName,  make,        model,  year);         
                  newList.add(serviceList);

            }
        fileScan.close();

     //   System.out.println(newList.viewAll());
        return newList; 
    }

} 
```

好吧，我明白了，我很密集。我还有第二个问题：我必须以三种不同的方式对列表进行排序，具体取决于我在 GUI 中选择的选项，我假设我实现`Comparable`了 ，但在我的`compareTo`界面中它是`compareTo(Object o, int key)`. 如果排序方法只是 Object o，我如何使用该键。我应该尝试使用`Comparator`吗？如果我`key=1`怎么能告诉它在我的 List 类中以这种方式排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T22:43:59.983

myServiceOrder 类中缺少覆盖 toString() 方法的经典案例。

[在此处](http://www.javapractices.com/topic/TopicAction.do?Id=55)查看实施中的示例。[此页面](http://www.javabeat.net/2007/08/overriding-the-tostring-method-in-object-class/)和[Rohit 的回答](https://stackoverflow.com/a/12657173/1708136)解释了*为什么*需要覆盖 toString()。

Argh 直到现在很晚才看到您的第二个问题：

请参阅[this question](https://stackoverflow.com/questions/1440134/java-what-is-the-difference-between-implementing-comparable-and-comparator)和[this question](https://stackoverflow.com/questions/2266827/when-to-use-comparable-and-comparator)`Comparable`关于使用界面与使用界面之间的区别`Comparator`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T22:48:24.210

Java 怎么知道您希望如何打印 myService 对象？您可以通过覆盖 toString 来告诉它：

```
@Override
public String toString() {
    return "myServiceObject#" + number + "[" + ownername + ", " + make + ", " + model + ", " + year + "]";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T22:45:26.243

打印的实际上是您在不覆盖 toString 方法的情况下打印的对象的哈希码。现在由于您正在打印`LinkedList`，您不能这样做..相反，您可以遍历列表并打印单个元素：-

```
public  void  Print() throws Exception
 {
    for (myServiceOrder so: newList) {
         System.out.println(so)
    }
 } 
```

现在，因为`serviceOrder`它本身就是一个对象..你需要`toString()`在那个类中覆盖你的..

```
@Override
public String toString() {
    return this.ownerName + this.make + "[" +  this.model + " - " + String.valueOf(this.year) + "]";            
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T22:49:06.620

```
System.out.println(newList); 
```

这会自动调用类的`toString()`方法，`LinkedList`然后调用`toString()`列表中的每个引用（`ServiceOrder`在这种情况下是您的对象）。由于您没有提供自己的`toString()`方法，因此使用默认的方法`Object`。这给出了有趣的输出`myServiceOrder@3bc1cac`，这是 Java 打印引用变量的默认方式。如果您希望看到其他内容，您需要通过`toString()`在您的`ServiceOrder`类中实现来告诉 Java 如何做到这一点。

# r - 生存分位数的比较误差（survfit 对象）

> ID：12657146
> 
> 赞同：0
> 
> 时间：2012-09-29T22:41:42.837
> 
> 标签：r

我正在尝试遵循生存分析的教科书示例，但不确定我在哪里出错：

```
df1 <- as.data.frame( cbind(seq(1:5),c(6,44,21,14,62),c(1,1,0,1,1)) )
names(df1) <- c('subject','time','censor')
require(survival)
f1 <- survfit(Surv(time=time, event=censor) ~1, data=df1)
quantile(f1) 
```

这给出了以下内容：

```
Error in xi == xj : comparison of these types is not implemented
In addition: Warning messages:
1: In `[.survfit`(x, !nas) :Survfit object has only a single survival curve
2: In `[.survfit`(x, i) : Survfit object has only a single survival curve
3: In `[.survfit`(x, j) : Survfit object has only a single survival curve 
```

我已经用不止一条曲线的 survfit 对象尝试过这个，但仍然得到相同的消息......

“R 版本 2.14.1 (2011-12-22)”

“x86_64-pc-linux-gnu”

搜索（）的输出：

```
[1] ".GlobalEnv"        "package:km.ci"     "package:survival" 
[4] "package:splines"   "package:stats"     "package:graphics" 
[7] "package:grDevices" "package:utils"     "package:datasets" 
[10] "package:methods"   "Autoloads"         "package:base" 
```

非常感谢！

编辑：感谢 DWin，对不起，我错过了`help(Surv)`.

但是我仍然收到相同的错误消息。我正在阅读帮助： `quantile.survfit {survival}`它被记录为 S3 泛型，所以我期待 using`quantile(f1)`应该调用此方法。

但是我发现以下方法不起作用：

```
survival:::quantile.survfit(f1) 
```

给出：

```
Error: 'quantile.survfit' is not an exported object from 'namespace:survival' 
```

尝试重新安装survival，它仍然是最新版本：survival_2.36-10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:42:24.270

我有两个担忧。在我的帮助页面中，`Surv`我看到这句话：“时间、时间 2 和事件参数是按位置匹配的，而不是按名称匹配的，所以请使用，例如，`Surv(time, dead)`而不是`Surv(time, event=dead)`”。通过在调用中删除事件参数解决了我在代码中遇到的第一个问题：

```
f1 <- survfit(Surv(time=time, censor) ~1, data=df1) 
```

但后来我期待发现这是一个合适的对象，即一个列表，我对`quantile`反对并不感到惊讶：

```
> quantile(f1)
Error in approx(c(0, 1 - newy), c(0:length(newy)), p) : 
  need at least two non-NA values to interpolate 
```

所以你想要：

```
> quantile(f1$time)
  0%  25%  50%  75% 100% 
   6   14   21   44   62     # ??? 
```

# sql - 如何让 Django QuerySet 'exclude' 正常工作？

> ID：12657147
> 
> 赞同：4
> 
> 时间：2012-09-29T22:41:43.827
> 
> 标签：sql, django, orm

我有一个数据库，其中包含 skus、kits、kit_contents 和清单的模式。这是一个查询“给我为清单 1 中定义的套件记录定义的套件内容记录定义的所有 SKU”：

```
SELECT DISTINCT s.* FROM skus s
JOIN kit_contents kc ON kc.sku_id = s.id
JOIN kits k          ON k.id = kc.kit_id
JOIN checklists c    ON k.checklist_id = 1; 
```

我正在使用 Django，我非常喜欢 ORM，因为我可以通过以下方式表达该查询：

```
skus = SKU.objects.filter(kitcontent__kit__checklist_id=1).distinct() 
```

这是一种导航所有这些外键的巧妙方法。Django 的 ORM 产生的和上面写的 SQL 基本一样。问题是我不清楚如何获取*未*为清单 1 定义的所有 SKU。在上面的 SQL 查询中，我将通过将“=”替换为“！=”来做到这一点。但是 Django 的模型没有不等于运算符。你应该使用 exclude() 方法，有人可能会猜到它看起来像这样：

```
skus = SKU.objects.filter().exclude(kitcontent__kit__checklist_id=1).distinct() 
```

但是 Django 产生了这个查询，这不是一回事：

```
SELECT distinct s.*  FROM skus s 
WHERE NOT ((skus.id IN 
    (SELECT kc.sku_id FROM kit_contents kc 
    INNER JOIN kits k ON (kc.kit_id = k.id) 
    WHERE (k.checklist_id = 1  AND kc.sku_id IS NOT NULL)) 
AND skus.id IS NOT NULL)) 
```

（我已经清理了查询以便于阅读和比较。）

我是 Django ORM 的初学者，我想尽可能使用它。有没有办法在这里得到我想要的？

编辑：

karthikr 给出了一个不起作用的答案，原因与原始 ORM .exclude() 解决方案不起作用的原因相同：SKU 可以在checklist_id=1 和 checklist_id=2上*都存在的套件中的 kit_contents 中。*使用我打开帖子时使用的手动查询，使用“checklist_id = 1”会产生 34 个结果，使用“checklist_id = 2”会产生 53 个结果，以下查询会产生 26 个结果：

```
SELECT DISTINCT s.* FROM skus s
JOIN kit_contents kc ON kc.sku_id = s.id
JOIN kits k          ON k.id = kc.kit_id
JOIN checklists c    ON k.checklist_id = 1
JOIN kit_contents kc2 ON kc2.sku_id = s.id
JOIN kits k2          ON k2.id = kc2.kit_id
JOIN checklists c2    ON k2.checklist_id = 2; 
```

我认为这是人们似乎不认为 .exclude() 解决方案可以合理替代某种 not_equals 过滤器的原因之一——后者允许您简洁地说出您的意思。大概前者也可以表达查询，但我越来越对这种简单的解决方案感到绝望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:14:05.020

您可以这样做 - 获取清单 1 的所有对象，并将其从完整列表中排除。

```
sku_ids = skus.values_list('pk', flat=True)
non_checklist_1 = SKU.objects.exclude(pk__in=sku_ids).distinct() 
```

# java - 无法调整 JTable 列的大小

> ID：12657150
> 
> 赞同：0
> 
> 时间：2012-09-29T22:41:59.383
> 
> 标签：java, swing, jtable, jframe

我无法调整 JTable 中列的大小（时间线相似）。我复制了时间线类。我自己写了timelineUI。感觉就像我已经尝试了一切来调整列的大小，但这似乎是不可能的。

这是 TimelineUI 类，重要的部分在底部，我正在尝试调整第 0 列的大小。

```
package group4;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.Rectangle;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.table.TableColumn;

public class TimelineUI extends JFrame {

    TimeLine timeline;
    JScrollPane scrollpane;
    public TimelineUI() {
        initTimeline();
    }

    public final void initTimeline() {
            try {                                       
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());            
            } catch (Exception e) {
                e.printStackTrace();
            }   
            this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            this.setLayout(new BorderLayout());
            this.setTitle("Timeline");

            timeline = new TimeLine(5,3);
            scrollpane = new JScrollPane();
            scrollpane.setViewportView(timeline);
            this.add(scrollpane,BorderLayout.CENTER);

            addData();

            this.pack();
            this.setSize(1200,200);
            this.setVisible(true);
    }
    public JTable getTable () {
        return timeline;
    }
    private void addData(){
        ArrayList<String> columndata = new ArrayList<String>();
        columndata.add("Blig (1)");
        columndata.add("Workbench (2)");
        timeline.addColumn("", columndata);

        columndata = new ArrayList<String>();
        columndata.add("Making spunks");
        columndata.add("Service bligs");
        timeline.addColumn(0, columndata);

        columndata = new ArrayList<String>();
        columndata.add("Finding plonks");
        columndata.add("Finding plonks");
        timeline.addColumn(60, columndata);

        columndata = new ArrayList<String>();
        columndata.add("Finding plonks");
        columndata.add("Finding plonks");
        timeline.addColumn(90, columndata);

        columndata = new ArrayList<String>();
        columndata.add("Finding plonks");
        columndata.add("Finding plonks");
        timeline.addColumn(120, columndata);

        columndata = new ArrayList<String>();
        columndata.add("Finding plonks");
        columndata.add("Finding plonks");
        timeline.addColumn(150, columndata);

        columndata = new ArrayList<String>();
        columndata.add("Finding plonks");
        columndata.add("Finding plonks");
        timeline.addColumn(180, columndata);

        timeline.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        timeline.getColumnModel().getColumn(1).setMinWidth(200);
        timeline.getColumnModel().getColumn(1).setMaxWidth(200);
        timeline.getColumnModel().getColumn(1).setPreferredWidth(200);

    }
} 
```

然后我们有我从网上一个好人那里得到的 Timeline.class：

```
package group4;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.util.ArrayList;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class TimeLine extends JTable{
    private final int ROW_DISTANCE = 5;
    private final int TIME_ROW_HEIGHT = 20;
    private ImageTableModel itm;
    private int maxRowHeight = 20;

    /**
     * Generates a new TimeLine object
     * @param rows  - number of rows of the default grid
     * @param columns - number of columns of the default grid
     */
    public TimeLine(int rows, int columns){
        setTimeLineLookAndFeel();
        itm = initModel();
        itm.initGrid(rows, columns);
        setModel(itm);  // set the table model
        System.out.println(itm.getValueAt(2, 1));

    }

    /**
     * @return ImageTableModel - a new ImageTableModel
     */
    private ImageTableModel initModel(){
        return new ImageTableModel();
    }

    /**
     * Adds a new column to the table
     * @param date - The column name as java.util.Date
     * @param columndata - The row values for this column. 
     */
    public void addColumn(int time, ArrayList<String> columndata){
        itm.addColumn(time+"", columndata);
    }

    /**
     * Adds a new column to the table
     * @param columnName - The column name
     * @param columndata - The row values for this column. 
     */
    public void addColumn(String columnName, ArrayList<String> columndata){
        itm.addColumn(columnName, columndata);
    }

    /**
     * Utility function to set the scroll pane
     */
    public int getRowCount(){
        return itm.getRowCount();
    }

    /**
     * Utility function to set the scroll pane
     */
    public int getColumnCount(){
        return itm.getColumnCount();
    }

    /**
     * Set some JTable properties to make it 
     * look more like a timeline
     */
    private void setTimeLineLookAndFeel(){
        this.getTableHeader().setReorderingAllowed(false);
        this.setCellSelectionEnabled(true); 
        this.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        this.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        this.setIntercellSpacing(new Dimension(0,0));
        this.setShowGrid(false);        
        this.setTableHeader(null);
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.setColor( Color.BLACK );
        int y = getRowHeight(0) * (itm.getRowCount() - 1) - 1;      
        g.drawLine(0, y, getSize().width, y);
    }

    @Override
    public Component prepareRenderer(TableCellRenderer renderer, int row, int column){
        Component c = super.prepareRenderer(renderer, row, column);

        if(row == itm.getRowCount()-1){
            c.setBackground(java.awt.SystemColor.control);
        }
        else if( !this.isCellSelected(row, column)) {
            c.setBackground(column % 2 != 0 ? new Color(241, 245, 250) : null);
        }       
        return c;
    }   

    @Override
    /**
     * makes the date column look like a table header
     */ 
    public void changeSelection(int row, int column, boolean toggle, boolean extend){
        Object o = getValueAt(row, column); 
        if (o != null && row != itm.getRowCount()-1){
            super.changeSelection(row, column, toggle, extend); 
        }
    }

    /**
     * The table model for this timeline     *
     */
    class ImageTableModel extends AbstractTableModel {
        private ArrayList<String> columnnames; // holds the column names
        private ArrayList<ArrayList<String>> data; // holds the table data
        private int maxRowCount;    
        private int columnCursor; // points on the current column

        public ImageTableModel(){
            columnnames = new ArrayList<String>();
            data = new ArrayList<ArrayList<String>>();
            maxRowCount = 0;
            columnCursor = 0;
        }

        public Object getValueAt(int row, int column) {
            if (data.get(column).size()-1<row) {
                return null;
            }
            else{
                return data.get(column).get(row);
            }           
        } 

        public int getRowCount(){
            return maxRowCount;
        } 

        public int getColumnCount(){
            return columnnames.size();
        }

        public String getColumnName( int columnIndex ){
            return columnnames.get(columnIndex);
        }

        /**
         * Adds a new column to the table
         * @param columnName - The column name
         * @param columndata - The row values for this column.
         */
        public void addColumn(String columnName, ArrayList<String> columndata) {
            if(columnCursor >= columnnames.size()){
                columnnames.add(columnName);
                data.add(rotateFillList(columnName,columndata));

            }
            else{
                columnnames.set(columnCursor, columnName);
                data.set(columnCursor, rotateFillList(columnName,columndata));
            }
            SwingUtilities.invokeLater (new Runnable(){     // fixes a nasty java vector bug
                public void run ()  {
                    fireTableStructureChanged();
                    fireTableDataChanged(); 
                }
            });
            columnCursor++;
        }

        public void initGrid(int rows, int columns){
            for(int i = 0; i < columns+100; i++){
                ArrayList<String> newdata = new ArrayList<String>();
                for(int j = 0; j < rows; j++){
                    newdata.add(null);
                }
                columnnames.add(String.valueOf(i));
                data.add(newdata);
                maxRowCount = rows;
            }
            SwingUtilities.invokeLater (new Runnable(){     // fixes a nasty java vector bug
                public void run ()  {
                    fireTableStructureChanged();
                    fireTableDataChanged(); 
                }
            });
        }

        /**
         * Rotates the list. If list.size() is smaller than
         * maxRowCount the list if filled with null values
         * This generates the bottom up effect
         * @param columnName - The column name
         * @param list
         * @return list
         */
        private ArrayList<String> rotateFillList(String columnName, ArrayList<String> list){
            list.add(0,columnName); // set column name to be on the bottom 

            if(maxRowCount < list.size()){
                // adjust all rows to the new maxRowCount
                maxRowCount = list.size();
                for(int i = 0; i < data.size(); i++){
                    int diff = maxRowCount - data.get(i).size();
                    for(int j = 0; j < diff; j++){
                        data.get(i).add(0,null);
                    }
                }               
            }
            else {  // fill with null values
                int diff = maxRowCount - list.size();
                for(int i = 0; i < diff; i++){
                    list.add(null);
                }
            }

            ArrayList<String> rotatedList = new ArrayList<String>();
            for(int i= list.size()-1;i>=0;i--){     // rotate list
                rotatedList.add(list.get(i));
            }

            return rotatedList;
        }
    }   
} 
```

这似乎是一个非常简单的问题，但我无法弄清楚。我需要自己定义一个ColumnModel吗？我以为我可以使用默认的。我可以添加列、更改背景颜色等，但不能调整大小。我正在添加一张图片，显示它现在的样子。我希望显示整个文本。

![时间线的图像](../Images/0ed673f2e2219c08b6166de138d4c072.png)

任何帮助将非常感激。我现在花了很多时间在这上面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T23:01:34.310

在`TimeLine.addColumn()`表结构中，通知使用`SwingUtilities.invokeLater`. 处理完所有其他未决事件后，通知将在 EDT 上异步执行。

诀窍是`fireTableStructureChanged()`可能会触发表列的重建。`fireTableStructureChanged`您可以在此[答案](https://stackoverflow.com/a/12558548/1048330)中找到更多详细信息。因此，可能发生的情况是您设置了首选尺寸，然后`fireTableStructureChanged()`执行并将尺寸重置为默认值。

不确定该方法中的预期逻辑是什么（即注释“*修复了一个讨厌的 java 矢量错误*”），但如果你执行`fireTableStructureChanged()`并且`fireTableDataChanged()`没有`SwingUtilities.invokeLater`你应该看到调整大小的列。

当然，您必须在 EDT 上，因此如果无法修复，您可以使用`SwingUtilities.invokeLater()`.

另请注意，列从 0 开始。您提到您调整了第 0 列的大小，但实际上在代码中您访问了第 1 列。

# jquery - jQuery - 在某些 Div 上“加载，请稍候”

> ID：12657159
> 
> 赞同：1
> 
> 时间：2012-09-29T22:43:41.443
> 
> 标签：jquery, load, delay, wait

我对 jQuery 很陌生，我不太确定该朝哪个方向发展，但我想有某种 jQuery 或 Javascript 可以进入，并有一个 .delay() 函数大约 3 秒同时显示“请稍候”，然后显示 div 内容。对不起，我没有代码可以显示，我只能描述理论。=/

感谢您提供的任何帮助 - Necro

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:49:18.827

```
<div id="mydiv">

  <span id="loading">Loading...</span>

  <span id="content" style="display:none;">Bla bla bla</span>

</div>

<script>
setTimeout(function(){

  $("#loading").hide(100); //100 = animation speed in miliseconds
  $("#content").show(100);

}, 3000); //3000 miliseconds = 3 seconds
</script> 
```

示例：http: [//jsfiddle.net/dbdAx/](http://jsfiddle.net/dbdAx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:46:58.630

使用以下方法

```
$("#div").html("Please wait loading");
setTimeout(myfunc,3000);

function myfunc(){
 $("#div").html(yourdata);
} 
```

这是[演示 jsfiddle.net的链接](http://jsfiddle.net/6Tw9U/17/)

# mysql - 尝试添加多个外键时sql出现错误

> ID：12657166
> 
> 赞同：0
> 
> 时间：2012-09-29T22:44:09.320
> 
> 标签：mysql, sql, database

我正在尝试在 mysql 中创建索引和多个外键，但是当我包含以下代码时：

```
CREATE INDEX par_ind on Image_Question (SessionId,QuestionId);

ALTER TABLE Image_Question ADD CONSTRAINT FK_CONSTRAINT_NAME
                           FOREIGN KEY (SessionId,QuestionId) 
                             REFERENCES Question(SessionId,QuestionId)
                             ON DELETE CASCADE; 
```

创建索引工作正常，但它不允许我更改表并添加外键。我给我一个错误说明：

```
#1452 - Cannot add or update a child row: a foreign key constraint fails (`mobile_app`.<result 2 when explaining filename '#sql-4517_14f1a'>, CONSTRAINT `FK_CONSTRAINT_NAME` FOREIGN KEY (`SessionId`, `QuestionId`) REFERENCES `Question` (`SessionId`, `QuestionId`) ON) 
```

这个错误是什么意思，我该如何解决这个错误？

下面是 Image_Question 表：

```
CREATE TABLE Image_Question (ImageQuestionId INT     NOT NULL, 
                             ImageId          INT     NOT NULL,
                             SessionId        CHAR(3) NOT NULL,
                             QuestionId       INT     NOT NULL,
                            PRIMARY KEY (ImageQuestionId)
                            ) ENGINE=INNODB; 
```

下面是问题表：

```
CREATE TABLE Question (QuestionId INT      NOT NULL, 
                       SessionId  CHAR(3)  NOT NULL,
                       Question   CHAR(10) NOT NULL ) ENGINE=INNODB; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:40:52.450

在这里，我已经解决了您的问题并为我工作得很好

```
ALTER TABLE `question`     CHANGE `QuestionId` `QuestionId` INT(11) NOT NULL,    ADD PRIMARY KEY(`QuestionId`); 
```

首先我改变`QuestionId`了`primary key`

```
ALTER TABLE `image_question` ADD INDEX `questionId` (`QuestionId`); 
```

`QuestionId`然后添加索引`image_question`

```
ALTER TABLE  `question` ADD CONSTRAINT `FK_question` FOREIGN KEY (`QuestionId`)
REFERENCES `image_question` (`QuestionId`) ON DELETE NO ACTION ; 
```

然后第一个关系`QuestionId`成功地工作

```
ALTER TABLE `question`     CHANGE `SessionId` `SessionId` INT(11) NOT NULL;
ALTER TABLE `image_question`     CHANGE `SessionId` `SessionId` INT(11) NOT NULL; 
```

然后将`SessionId`两个表的数据类型更改为`int`

```
ALTER TABLE `image_question` ADD INDEX `NewIndex1` (`SessionId`); 
```

`SessionId`然后添加索引`image_question`

```
ALTER TABLE `image_question` ADD CONSTRAINT `FK_image_question` FOREIGN KEY (`SessionId`) REFERENCES `question` (`SessionId`) ON DELETE NO ACTION ; 
```

这是你的第二个关系，`SessionId`希望它也适合你

# git - 我可以将我现有的 git repo 与 openshift 一起使用吗？

> ID：12657168
> 
> 赞同：104
> 
> 时间：2012-09-29T22:44:51.333
> 
> 标签：git, openshift

是否只需要在 openshift 上安装 git repo？我已经有 bitbucket / github git repo 并且宁愿只推到那里。我可以简单地加入它以便 openshift 得到提示吗？

或者为了简化，我只在github上推送，但是当我想部署时，我用openshift做一些事情？

我确实检查[了这个](https://openshift.redhat.com/community/kb/kb-e1006-sync-new-git-repo-with-your-own-existing-git-repo)，但它让我感到困惑：它正在谈论合并退出和新的（openshift）git？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-10-01T07:33:42.240

我的印象是你还不够习惯使用 git。我建议您进入 git 以完全了解如何将您的代码推送到 openshift。尽管如此，让我尝试向您解释所涉及的步骤：正如您通常使用 git 所做的那样，此处选择的方法是将您的其他 git 存储库（例如在 bitbucket 上）克隆到您的本地计算机：

`git clone <bitbucket-repo-url>`

然后，您的本地克隆将您的其他存储库（bitbucket 等）作为远程存储库。您的远程存储库以别名“origin”（如果您克隆 git 使用的默认别名）存储。然后，您将 openshift 存储库作为远程添加到您的克隆中。您在为您添加的远程存储库显式使用别名时这样做 - 我在这里使用“openshift”作为别名：

`git remote add openshift -f <openshift-git-repo-url>`

为了能够将代码从本地 git 存储库推送到 openshift，您首先必须将 openshift 存储库与本地 bitbucket 克隆合并。您可以通过在本地发布来做到这一点：

`git merge openshift/master -s recursive -X ours`

使用此命令，您可以告诉 git 将 openshift git 存储库中的主分支与本地 git 存储库合并。您告诉它使用递归合并策略进行合并，并在发生冲突时选择您的（“我们的”）版本。

执行合并后，您就可以将 git 存储库推送到 openshift。你这样做：

`git push openshift HEAD`

你告诉 git 将你的本地代码推送到名为“openshift”的远程 repo 上的 HEAD 分支（我们存储 openshift git repo 的别名，一些段落更进一步）。

顺便提一句。几个月前，我写了一篇 jboss 工具博客，演示了如何使用 openshift-java-client：[https](https://community.jboss.org/wiki/Enable-openshift-ciFullExampleUsingOpenshift-java-client) ://community.jboss.org/wiki/Enable-openshift-ciFullExampleUsingOpenshift-java-client 。您将在最后一段“我们快到了”中发现上述步骤。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-11-23T13:29:27.350

我知道这个问题已经 2 岁了，[@adietisheim 的回答](https://stackoverflow.com/a/12669112/1179841)已被接受。我个人不喜欢将 openshift 存储库合并到我的本地克隆中，因为我不想将 OpenShift 存储库混合到我的公共存储库的主分支中。

假设您使用 添加了遥控器`git remote add openshift <openshift-git-repo-url>`，这就是我要做的：

`openshift`基于分支创建一个新的本地`master`分支。

```
git checkout -b openshift 
```

您可以在分支上进行一些提交，`openshift`例如您的应用程序部署配置。然后，使用标记将当前分支推送到 OpenShift 存储库中的远程 ref 匹配 master`-f`以覆盖远程`master`分支中的所有内容。

```
git push openshift master -f 
```

每当我想将我的应用程序部署到 OpenShift 时，我会检查本地`openshift`分支并将`master`分支与其合并，然后强制推送到 OpenShift，但是`-f`下一次推送可能不需要：

```
git checkout openshift
git merge --no-ff master
git push openshift master -f 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-23T06:10:51.360

从您的项目文件夹中，执行

```
git remote add backup user@server:/path/to/git/test.git
git push backup master 
```

您可以阅读[从一个存储库推送到两个 git 远程源](http://www.hostatic.ro/2011/09/29/pushing-to-two-git-remote-origins-from-one-repository/)和[更改 git 远程源](http://andersonleeb.com/blog/changing-git-remote-origin)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-27T15:24:20.517

我同意@adietisheim 的回答：在使用 openshift 进行部署之前，您需要更好地了解 git =)

现在，即使您了解 git，如果您的目录结构与 openshift 所需的目录结构不匹配，并且如果您想保留旧的目录结构，如何部署现有 repo 也不一定很明显。

为此，我有以下提示：

*   依赖于部署的选项与不属于不同文件的选项分开。例如，我将我的数据库设置与其他设置分开到不同的文件中：

    *   settings_deploy/openshift

    *   设置_部署/本地主机

    然后符号链接到您的本地主机测试，如下所示：

    ```
    ln -s settings_deploy/localhost settings_deploy_file 
    ```

    另一种选择是使用环境变量检测主机：

    ```
    if 'OPENSHIFT_APP_NAME' in os.environ:
        //openshift configurations
    else:
        //localhost 
    ```

    这有点简单，因为它允许您将所有配置放在一个文件中。它不太通用，因为如果您的另一台主机提供`OPENSHIFT_APP_NAME`环境变量（这不太可能），该方法就会中断。无论如何，您仍然必须清楚地区分依赖于部署和不依赖于部署的内容。

*   创建本地部署目录

*   将初始的 openshift 模板克隆到其中

*   创建一个部署脚本：

    *   将所有内容从您现有的旧本地硬链接到它们的正确位置

        硬链接可以快速创建和使用很少的内存

        你可以使用类似的东西：

        `cp -lrf original_repo_dir deploy_repo_dir`

    *   `settings_deploy`在部署存储库中只保留正确的文件：

        `cd deploy_repo`

        `mv settings_deploy/openshift settings_deploy_file`

        `rm -r settings_deploy`

    *   强制推送：

        `cd deploy_repo`

        `git push -f origin master`

    *   清理部署仓库：

        `git reset --hard HEAD`

        `git clean -df`

[对于那些对 django 部署感兴趣的人，我在我的 github](https://github.com/cirosantilli/django-cheat/tree/783c803d3334097dc0a59439bee024b8d8490265)上有一个示例，特别是查看它部署的`deploy.sh`脚本和项目。`projects/elearn`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-29T17:35:18.617

您应该能够通过以下方式将现有 Git 存储库传递到资产管道中

```
rhc create-app $APPNAME ruby-1.9 --from-code $GIT_LOCATION 
```

然后，远程 Git 存储库为 OpenShift 提供初始应用程序。

作为第二种可能性，您可以通过以下方式跳过本地 OpenSHIft Git 存储库的创建

```
rhc create-app $APPNAME ruby-1.9 --no-git 
```

然后使用上述步骤将 OpenShift 远程 Git 存储库合并到本地 Git 存储库中。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-29T22:35:14.327

莫汉德的回答很完美，但我想总结一下完整的解决方案，以防其他人需要它：

要将您的 github 存储库用作 Openshift 存储库，现在还没有完美的解决方案，因为 Openshfit 使用 git 挂钩来根据您的提交触发部署或重新部署。但是，最聪明的方法是使用 2 个 repos（openshift 的一个和您的 github 的一个）将代码同时推送到。

为此：添加一个名为“all”的遥控器并向其添加 2 个推送 url。

```
git remote add all ssh://23456781234567@yourapp-namespace.rhcloud.com/~/git/yourapp.git
git remote set-url openshift-git-repo --push --add ssh://23456781234567@yourapp-namespace.rhcloud.com/~/git/yourapp.git
git remote set-url github-repo --push --add git@github.com:youruser/yourapp.git 
```

然后将名为“all”的遥控器设置为默认推送遥控器：

```
git push -u all 
```

要提交和推送您的代码，请照常进行：它将推送 2 个遥控器并部署在 OpenShift 上

```
git add .
git commit -m "my commit"
git push 
```

并观察结果：

```
[master 3fc96b2] my commit
 1 file changed, 2 deletions(-)
MyLaptop:myapp User$ git push
Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 291 bytes | 0 bytes/s, done.
Total 3 (delta 2), reused 0 (delta 0)
To git@github.com:User/myapp.git
   a036a44..3fc96b2  master -> master
Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 291 bytes | 0 bytes/s, done.
Total 3 (delta 2), reused 0 (delta 0)
remote: Stopping PHP 5.4 cartridge (Apache+mod_php)
remote: Waiting for stop to finish
remote: Waiting for stop to finish
remote: Building git ref 'master', commit 3fc96b2
remote: Preparing build for deployment
remote: Deployment id is 9037d37a
remote: Activating deployment
remote: Starting PHP 5.4 cartridge (Apache+mod_php)
remote: Application directory "/" selected as DocumentRoot
remote: -------------------------
remote: Git Post-Receive Result: success
remote: Activation status: success
remote: Deployment completed with status: success
To ssh://23456789@myapp-namespace.rhcloud.com/~/git/myapp.git/
   a036a44..3fc96b2  master -> master
MyLaptop:myapp User$ 
```

希望这可以帮助

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-10T06:12:40.020

有一种方法可以做你想做的事，即跳过 Openshift 的 repo。您需要做的是设置一个 jenkins，并让它轮询您自己的存储库。

这里有一个链接解释了如何从头开始设置它：http: [//blog.anthavio.net/2014/01/deploy-to-openshift-from-github.html](http://blog.anthavio.net/2014/01/deploy-to-openshift-from-github.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-18T17:21:09.187

如果您使用的是 github，则可以配置 travis 以在每次更改 github 存储库时进行部署

[http://docs.travis-ci.com/user/deployment/openshift/](http://docs.travis-ci.com/user/deployment/openshift/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-04-20T09:33:22.727

我在将预先存在的代码存储库部署到 Openshift 时遇到了问题。在我尝试部署 tomcat webapp 的特定环境中，.openshift 文件夹中包含的 Openshift tomcat 配置文件至关重要。

为我解决的问题是将 .openshift 文件夹包含在我现有的源代码树中，以及将 openshift 配置文件包含在我的 maven pom.xml 文件中。

这很可能与将您的存储库与新的 openshift 上游存储库合并时发生的情况相同。对我来说，这是 adietisheim 出色答案中以下句子背后的“为什么”：

“为了能够将代码从本地 git 存储库推送到 openshift，您首先必须将 openshift 存储库与本地 bitbucket 克隆合并。”

就我而言，需要此合并才能从 .openshift 目录中获取配置文件。我花了很长时间才弄清楚，因为没有 .openshift 目录的推送仍然使我的应用程序构建和部署成功。我看到的唯一行为是关于缺少 jsp 文件的报告，这让我认为问题与我自己的 web.xml 和 servlet 配置有关。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-20T16:34:14.117

如果您使用的是 java，那么还有另一种方法。但即使采用这种方法，您仍然会使用 OpenShift git 存储库。OpenShift 提供的 git 存储库是您向 OpenShift 提供代码和可部署的方式：

你可以——而不是将你的代码提交到 OpenShift git repo——只需给它你的战争文件。您将 OpenShift git 存储库克隆到本地计算机。然后，您从应用程序源构建一个战争，并将这个战争放入 OpenShift git repo（克隆）中的部署文件夹中。然后，您添加、提交并将本地克隆推送到 OpenShift。一旦推送成功执行，JBoss AS7 将选择你的战争并部署它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-22T13:25:14.743

放轻松！

第 1 步：创建应用程序。使用您最喜欢的方法（来自 gitRepository、pre-maker Openshift 等）。如果您使用控制台方法
第 2`rhc git-clone nameApp`
步：第 3`rhc app-configure nameApp --auto-deploy`
步：第 4 步：享受！

# tumblr - 标签内 Tumblr 上的下一个/上一个帖子

> ID：12657171
> 
> 赞同：2
> 
> 时间：2012-09-29T22:45:14.607
> 
> 标签：tumblr

Tumblr 有没有办法让下一个/上一个链接只指向与你所在的帖子共享相同标签的帖子？

例如，如果一个帖子被标记为“图片”，那么下一个之前的链接只会指向其他也被标记为“图片”的帖子。

根据我对[文档](http://www.tumblr.com/docs/en/custom_themes#navigation)的理解，这是不可能的——永久链接导航没有与标签相关的控件——但想知道是否有人想出了任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:03:56.360

要查看带有特定标签的 tumblelog 上的所有帖子（让我们使用 #image 作为示例），您只需输入[http://urlofyourtumblelog.tumblr.com/tagged/image](http://urlofyourtumblelog.tumblr.com/tagged/image)以及您已标记的所有帖子显示#image。您的常规上一页和下一页链接将像在任何其他页面上一样浏览标签页。

举个例子，这将是#dog的标签页2：

[http://urlofyourtumblelog.tumblr.com/tagged/dog/page/2](http://urlofyourtumblelog.tumblr.com/tagged/dog/page/2)

# asp.net - 我可以在不部署“bin”文件夹的情况下使用 ASP.NET 网页吗？

> ID：12657177
> 
> 赞同：5
> 
> 时间：2012-09-29T22:45:44.310
> 
> 标签：asp.net, asp.net-webpages

我正在创建一个非常简单的网站，最初只是一堆 HTML / CSS 文件。然后我需要添加一点服务器端逻辑，所以我想我会使用 ASP.NET 网页，因为它们听起来像是一个合适的解决方案。

所以我改成`index.html`，`index.cshtml`添加了我需要的代码，我虽然就是这样（我还添加了这个基本`web.config`文件：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
</configuration> 
```

但是，在本地 IIS Express 上启动它会产生这个错误：

> 无法确定要使用的 ASP.NET 网页版本。
> 
> 要使用此站点，请在站点的 web.config 文件中指定一个版本。有关详细信息，请参阅 Microsoft 支持站点上的以下文章：http: [//go.microsoft.com/fwlink/ ?LinkId=254126](http://go.microsoft.com/fwlink/?LinkId=254126)

所以我将此添加到我的`web.config`：

```
<appSettings >
    <add key="webPages:Version" value="2.0" />
</appSettings > 
```

现在网站启动了，但处理 UTF-8 真的很奇怪——尽管所有 HTTP 标头、文件编码和元标记都正确设置为 UTF-8，但我的国家字符显示不正确。我发现了这个问题：[Do I need web.config for non-ASCII characters？](https://stackoverflow.com/questions/10572314/do-i-need-web-config-for-non-ascii-characters)但它并没有真正解决我的问题。

不过，我的设置有什么问题？当我在 WebMatrix 中创建一个新站点并将我的文件复制到其中时，它一切正常，即使没有在`web.config`. 我能看到的唯一区别是`bin`WebMatrix 生成的项目中存在文件夹。

所以问题是，我是否也*需要*将该`bin`文件夹作为源文件的一部分？我真的不觉得只需要在我的 index.cshtml 中添加一个动态行就需要将 1.5MB 的二进制文件检查到 Git 中，但也许就是这样？

感谢您确认这一点或向我展示一些更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:02:53.390

ASP.NET WebPages 需要 UTF-8 页面上的 BOM，否则它不会将页面读取为 UTF-8。如果它不这样做，它就不会输出一个 UTF-8 编码的页面。

这不是 ASP.NET 问题，而是网页问题。WebPages 处理真实页面，它不会解释 html 以知道它应该是 UTF-8。它知道的唯一方法是查找 BOM。

# linq - 优雅的 LINQ 文本解析选项？

> ID：12657178
> 
> 赞同：0
> 
> 时间：2012-09-29T22:46:17.610
> 
> 标签：linq, c#-4.0, text-parsing

我正在寻找一种优雅的方法来解析可能具有别名标记（例如“AKA”和“FKA”）的法庭案件标题。我需要检索别名类型以及以下标题。我已经蛮力解决了，但想看看还有什么其他选择。我喜欢 Linq 并尝试过 Sprache，但无法完全理解它。

```
Example caption:
JOHN SMITH AKA JOHN R SMITH FKA JOHNNY R SMITH  

Desired output: 
Alias Type Found: AKA   
Alias Caption Found: JOHN R SMITH   
Alias Type Found: FKA   
Alias Caption Found: JOHNNY R SMITH 
```

以下是到目前为止我在 LinqPad 中汇总的内容。

```
void Main()
{
    var caption = "JOHN SMITH AKA JOHN R SMITH FKA JOHNNY R SMITH";
    caption.Split().ParseAliases( (t,c)=>{
        Console.WriteLine ("Alias Type Found: {0}",t);
        Console.WriteLine ("Alias Caption Found: {0}",c);
    });
}

public delegate void AliasRetrievedDelegate(string aliasType, string aliasCaption);

public static class ParserExtensions{
    private static IEnumerable<string> aliasTypes = new[]{"AKA","FKA"};

    public static void ParseAliases(this IEnumerable<string> tokens, 
        aliasRetrievedDelegate d, 
        int startIdx = 0){
                   // TODO

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:36:36.350

这可能不像您想要的那样优雅，但它确实有效。它将别名类型与以下字符串列表分组。然后它连接字符串以形成相应的别名。

```
public static class ParserExtensions
{
    private static IEnumerable<string> aliasTypes = new[]{"AKA","FKA"};

    public static void ParseAliases(this IEnumerable<string> tokens, 
        Action<string, string> d, 
        int startIdx = 0)
    {
        var aliases = tokens.Skip(startIdx)
                            .GroupMatchesWithTrailing(x => aliasTypes.Contains(x));
        foreach(var alias in aliases)
        {
            string aliasType = alias.Item1;
            string aliasName = string.Join(" ", alias.Item2.ToArray());
            d(alias.Type, alias.Name);
        }   
    } 
```

棘手的部分是将别名类型与相应的名称分组。这种方法相当冗长，但`source`只迭代一次并且可以懒惰地评估。还有更简洁的解决方案，但它们有权衡。

```
 private static IEnumerable<Tuple<T, List<T>>> GroupMatchesWithTrailing<T>(
        this IEnumerable<T> source,
        Func<T, bool> predicate)
    {
        var items = source.SkipWhile(x => predicate(x) == false);
        using (IEnumerator<T> iterator = items.GetEnumerator())
        {
            bool hasItems = iterator.MoveNext();
            while(hasItems)
            {
                T match = iterator.Current;
                List<T> trailing = new List<T>();
                hasItems = iterator.MoveNext();
                while(hasItems && predicate(iterator.Current) == false)
                {
                    trailing.Add(iterator.Current);
                    hasItems = iterator.MoveNext();
                }
                yield return Tuple.Create(match, trailing);
            }
        }
    }
} 
```

# ruby-on-rails - rails rspec，有什么方法可以通过块处理同一个示例的多个“应该”？

> ID：12657179
> 
> 赞同：0
> 
> 时间：2012-09-29T22:46:22.320
> 
> 标签：ruby-on-rails, rspec

假设模型方法 foo() 返回一个数组`[true, false, 'unable to create widget']`

有没有办法编写一个 rspec 示例，将该数组作为验证 [0] = true、[1] = false 和 [2] 与 / 之类的正则表达式匹配的块传递

目前，我这样做：

```
result = p.foo
result[2].should match(/unable/i)
result[0].should == true
result[1].should == false 
```

我无法完全理解如何使用块来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:16:11.790

它会稍微过度设计，但尝试使用`--format documentation`. 您将看到此方法的非常好的规范文档；）

```
describe '#some_method' do
  describe 'result' do
    let(:result) { subject.some_method }
    subject { result }

    it { should be_an_instance_of(Array) }

    describe 'first returned value' do
      subject { result.first }
      it { should be_false }
    end

    describe 'second returned value' do
      subject { result.second }
      it { should be_true }
    end

    describe 'third returned value' do
      subject { result.third }
      it { should == 'some value' }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:31:48.963

你的意思是你`result`是一个数组，你必须迭代来测试它的各种情况？

然后，您可以通过以下方式做到这一点，对：

```
result = p.foo
result.each_with_index do |value, index|
  case index
  when 0 then value.should == true
  when 1 then value.should == false
  when 2 then value.shoud match(/unable/i)
  end 
end 
```

# c++ - QWebFrame load() 在初始页面加载时不发送 cookie

> ID：12657182
> 
> 赞同：0
> 
> 时间：2012-09-29T22:46:53.233
> 
> 标签：c++, qt, qtwebkit

我正在使用 QtWebkit 在 C++/Qt 中实现浏览器。当我使用 QWebView 实例在其中打开一个新选项卡并使用 load() 加载 URL 时，页面正常加载，但是当它是我使用 cookie 登录的站点时，它看起来好像我没有登录完全没有，因为该页面的 cookie 没有与 HTTP 请求一起发送（使用 SocketSniff 验证）。

我认为唯一可能会有所不同的是我创建的自定义 cookiejar，但我不确定它可能是什么，因为 cookiejar 可以正常工作。您可以在浏览器项目页面的 Github 链接上找到完整的源代码：http: [//www.mayaposch.com/wildfox.php](http://www.mayaposch.com/wildfox.php)和 Github 链接：[https ://github.com/MayaPosch/WildFox](https://github.com/MayaPosch/WildFox)

欢迎任何线索:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:48:34.317

好吧，我终于发现了问题所在。我将其缩小到我实现的自定义 cookiejar，它有一个包含新的和访问过的 cookie 的内存结构，并将非会话 cookie 存储在磁盘上的 SQLite 结构中。问题是，在第一次加载站点后，它会在 SQLite 数据库中找到 cookie，将它们加载到内存结构中，但不使用它们。

小故障会带来很大的后果，一旦你开始处理它就很容易弄清楚。对于在这个问题上浪费您的时间，我深表歉意。不过，希望这个答案会对某人有所帮助:)

# c++ - cppcms 大量未解析的外部符号

> ID：12657186
> 
> 赞同：1
> 
> 时间：2012-09-29T22:47:09.617
> 
> 标签：c++, pcre, zlib, cppcms

我在尝试构建 cppcms 时遇到以下错误。

```
错误 184 错误 LNK2019：未解析的外部符号 __imp_pcre_compile 在函数“public: void __cdecl booster::regex::assign(class std::basic_string,class std::allocator > const &,int)”中引用 (?assign@regex@booster @@QEAAXAEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z) C:\Stuff\Development\CPP\cppcms-1.0.2\build \助推器\pcre_regex.obj
错误 185 错误 LNK2019：未解析的外部符号 __imp_pcre_exec 在函数“public: bool __cdecl booster::regex::match(char const *,char const *,class std::vector,class std::allocator > > &,int) 中引用const " (?match@regex@booster@@QEBA_NPEBD0AEAV?$vector@U?$pair@HH@std@@V?$allocator@U?$pair@HH@std@@@2@@std@@H@ Z) C:\Stuff\Development\CPP\cppcms-1.0.2\build\booster\pcre_regex.obj
错误 186 错误 LNK2019：函数“public: void __cdecl booster::regex::assign(class std::basic_string,class std::allocator > const &,int)”中引用的未解析的外部符号 __imp_pcre_fullinfo (?assign@regex@booster @@QEAAXAEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z) C:\Stuff\Development\CPP\cppcms-1.0.2\build \助推器\pcre_regex.obj
错误 187 错误 LNK2019：函数“public: __cdecl booster::regex::data::data(struct booster::regex::data const &)”(??0data@regex@booster@@QEAA) 中引用的未解析的外部符号 __imp_pcre_malloc @AEBU012@@Z) C:\Stuff\Development\CPP\cppcms-1.0.2\build\booster\pcre_regex.obj
错误 188 错误 LNK2019：函数 __catch$??0data@regex@booster@@QEAA@AEBU012@@Z$0 C:\Stuff\Development\CPP\cppcms-1.0.2\build\booster\pcre_regex 中引用的未解析的外部符号 __imp_pcre_free .obj
错误 189 错误 LNK2019：函数“public: __cdecl booster::aio::endpoint::endpoint(class std::basic_string,class std::allocator > const &,int)”中引用的未解析外部符号 __imp_htons (??0endpoint@ aio@booster@@QEAA@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z) C:\Stuff\Development\CPP\cppcms- 1.0.2\build\booster\endpoint.obj

```

我的环境是 Windows 7 64 位，使用 Visual Studio 2012 Professional 和 CMake 2.8.9。

对于我编译的所有内容，我将 CMake 配置为为 VS2012 生成解决方案以使用 64 位编译器。当我编译库时，我编译发布版本。

首先我编译 Zlib 1.2.7 没有问题。其次，我编译 pcre-8.31 没有问题。

然后，当有时间编译 cppcms-1.0.2 时，我得到了一堆或错误，正如我之前指出的那样。在 CMake 中配置 cppcms 时，我设置了 PYTHON 2.7，我使用

```
C:/Stuff/Development/CPP/Zlib/zlib-1.2.7/build
```

对于我的 ZLIB_INCLUDE_DIR，只需在其末尾附加一个 /Release/zlibstatic.lib，您就有了我正在使用的 ZLIB 库，但我不确定我的 PCRE 是否设置正确。

由于 PCRE 在 CMake 中有一个 include 和 include2，我不确定要在其中放入什么，所以我只做了 pcre-8.31 根目录和 pcre-8.31 构建目录。对于 PCRE_LIB，我使用 pcre-8.31/build/Release/pcre.lib。

我已经删除了库的所有构建目录，甚至重新开始，但我仍然遇到这些问题，我不确定是什么原因造成的。后来我意识到 cppcms 构建目录中的 booster 也有一个解决方案，所以我首先构建了它，它有 3 个失败的项目，但大多数都成功了，但是它对 cppcms 的构建没有任何影响。

如果您对我在做什么还有其他问题，请提出，我会编辑它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:10:08.960

询问有关 cppcms 问题的最佳地点是 cppcms 邮件列表。在这里注册： [https ://lists.sourceforge.net/lists/listinfo/cppcms-users](https://lists.sourceforge.net/lists/listinfo/cppcms-users)

Artyom 在那里提供出色的支持服务。虽然他也是 SO 成员，但并非所有 cppcms 开发人员都是，而且他们中的许多人还在邮件列表上提供帮助。总的来说，你会在那里得到更好的答案，特别是因为能够回答的人会更快地注意到你的问题。

# ruby - 在 Ruby 中通过 DNS 检查域可用性？检查 DNS 记录？

> ID：12657188
> 
> 赞同：0
> 
> 时间：2012-09-29T22:47:46.023
> 
> 标签：ruby, dns, rubygems, whois

这篇[SO 帖子](https://stackoverflow.com/questions/1780598/checking-domain-name-availability-with-dns-records)建议通过结合使用 DNS 查找和 WHOIS 查询来检查域的可用性。

不幸的是，目前尚不清楚在 Ruby 中执行 DNS 查找的最佳方法是什么。Dnsruby gem 的文档充其量是稀疏的。

使用 Dnsruby 查看域是否已被占用的最有效方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T05:07:34.937

[这篇名为Some examples of dnsruby in action 的](http://blog.nominet.org.uk/tech/2009/05/19/some-examples-of-dnsruby-in-action/)博客文章对如何将 dnsruby 用于常见任务提供了非常详细的说明。

根据那里提到的步骤，我可以验证 irb 中的以下行为：

```
>> require 'dnsruby'
>> include DnsRuby    
>> res = Resolver.new
=> #<Dnsruby::Resolver:0x00000100f4d2c8 @resolver_ruby=nil, @src_address=nil, @single_res_mutex=#<Mutex:0x00000100f4d278>, @configured=false, @do_caching=true, @config=Config - nameservers : 192.168.1.1,  domain : empty, search : local,  ndots : 1, @do_validation=false, @query_timeout=0, @retry_delay=5, @retry_times=1, @packet_timeout=5, @port=53, @udp_size=4096, @dnssec=true, @use_tcp=false, @no_tcp=false, @tsig=nil, @ignore_truncation=false, @src_port=[0], @recurse=true, @single_resolvers=[]>

>> res.query( 'www.google.com' )
=> ;; Answer received from 192.168.1.1 (123 bytes).... lengthy answer with A record info.

>> res.query( 'www.nonexistantsite.com' )
=> Throws an Dnsruby::NXDomain: Dnsruby::NXDomain exception. 
```

看起来将其适当地包装在 ruby​​ 程序中是一种使用 ruby​​ 执行 DNS 查找的简单方法。

# javascript - KnockoutJS + Validation：绑定验证错误的数量

> ID：12657190
> 
> 赞同：0
> 
> 时间：2012-09-29T22:47:54.290
> 
> 标签：javascript, validation, data-binding, knockout.js

请检查以下 JSFiddle：http: [//jsfiddle.net/rhulshof/6bd4g/4/](http://jsfiddle.net/rhulshof/6bd4g/4/)

我遇到了两个我无法解决的问题：

1.  我无法在视图中显示验证错误的数量。`Self.errors()`似乎不是可观察的。**编辑::**它适用于初始`self.articles()`行；但不适用于稍后添加到 DOM 的行。
2.  添加两行或更多行（文章）时，它说我有比实际更多的验证错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:48:36.367

我有一个部分答案，您需要修改您的验证配置对象

```
ko.validation.configure({
    decorateElement        : true,
    errorElementClass      : 'error',
    insertMessages         : true,  // had been set to false.
    parseInputAttributes   : true
}); 
```

这将导致消息发生。

我对淘汰验证插件不是很熟悉，但是一旦出现错误，由于某种原因，计数不会低于 1。不知道为什么会这样。

* * *

**编辑**

错误消息计数减 1 是一个错误。消息列表中的第一条错误消息是“ *null* ”。它在[https://github.com/ericmbarnard/Knockout-Validation/issues/99的问题日志中进行了讨论](https://github.com/ericmbarnard/Knockout-Validation/issues/99)

# java - 在 Java 赛车计划中确定获胜者

> ID：12657192
> 
> 赞同：3
> 
> 时间：2012-09-29T22:48:25.040
> 
> 标签：java

我正在尝试找到一种方法来确定获胜者，但我运气不佳。该程序假设运行三圈，并且首先完成所有圈的汽车是获胜者。我可以跑 3 个“圈”，但这不是一个很好的方法。我希望有人可以向我展示一个更好的方法，以及我如何能够为特定的获胜赛车“计算”这些圈数。汽车的数量从 2 到 4 是随机的，“速度”也是随机的。有人能帮助我吗。一些代码会很好。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.Random;

public class RacingCar extends JFrame {

public RacingCar() {
    int x = (int)(Math.random() * 3) + 2;
    setLayout(new GridLayout(x, 1, 5,5));
    for (int i = 0; i < x; i++){
            add(new CarImage());
    }
}

public static void main(String[] args) {
    JFrame frame = new RacingCar();
    frame.setTitle("Racing Car");
    frame.setSize(1200, 350);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}

class CarImage extends JPanel {
    protected int x = 0;
    protected int y = 350;
    protected int z = 1200;
    protected int c = 0;

    public CarImage() {
        int j = (int)(Math.random() * 500) + 2;
            Timer timer1 = new Timer(j, new ActionListener(){
            public void actionPerformed(ActionEvent e) {
                x += 10;
                c ++;
                repaint();
            }
        });

        timer1.start();

    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
            //x = 0;
            y = getHeight();
            z = getWidth();
            g.setColor(Color.WHITE);
            g.fillRect(0, 0, z, y);
            Polygon polygon = new Polygon();
            polygon.addPoint(x + 10, y - 21);
            polygon.addPoint(x + 20, y - 31);
            polygon.addPoint(x + 30, y - 31);
            polygon.addPoint(x + 40, y - 21);

            if (x < z - 50) {
                g.setColor(Color.BLACK);
                g.fillOval(x + 10, y - 11, 10, 10);
                g.fillOval(x + 30, y - 11, 10, 10);
                g.setColor(Color.BLUE);
                g.fillRect(x, y - 21, 50, 10);
                g.setColor(Color.GRAY);
                g.fillPolygon(polygon);
                g.setColor(Color.RED);
            }
            else {
                x = 0;
                /*if (c < z - 86) {
                    g.drawString("Clint's Car", c, y - 51);
                }
                else {
                    c = 0;
                }*/
            }
    }

}
} 
```

我为单圈循环所做的是：

```
 if (k < 341){
     repaint();
     k++;
 { 
```

这个循环被插入到末尾：

```
public void paintComponent(Graphics g) { 
```

我真的被困在这里了。感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:35:53.673

试试这个代码

新[RacingCar.java](http://snipt.org/vSib5)

顺便说一句，我让你的计时器更快，以免在非常慢的比赛中等待 3 圈！:P

# c - c 的自定义 getLine() 函数

> ID：12657194
> 
> 赞同：1
> 
> 时间：2012-09-29T22:48:42.717
> 
> 标签：c, string, getline

我需要一个函数/方法，它将接收一个 char 数组并将其设置为从标准输入读取的字符串。它需要返回读取的最后一个字符作为其返回类型，因此我可以确定它是否到达了行尾或文件标记的末尾。

这是我到目前为止所拥有的，我有点基于[这里的代码](https://stackoverflow.com/questions/5375604/reading-in-a-string-of-unknown-length-from-the-console)

更新：我改变了它，但现在它只是在文本后按回车时崩溃。我知道这种方式效率低下，并且 char 不是 EOF 检查的最佳选择，但现在我只是想让它返回字符串。我需要它以这种方式而不是其他方式来做到这一点。我需要字符串是行的确切长度，并返回一个值，它是换行符或 EOF int，我相信它仍然可以在 char 值中使用。

这个程序是 C 而不是 C++

```
char getLine(char **line);

int main(int argc, char *argv[])
{
    char *line;
    char returnVal = 0;

    returnVal = getLine(&line);
    printf("%s", line);

    free(line);

    system("pause");
    return 0;
}

char getLine(char **line) {
    unsigned int lengthAdder = 1, counter = 0, size = 0;
    char charRead = 0;

    *line = malloc(lengthAdder);
    while((charRead = getc(stdin)) != EOF && charRead != '\n')
    {
        *line[counter++] = charRead;
        *line = realloc(*line, counter);
    }

    *line[counter] = '\0';

    return charRead;
} 
```

感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:52:51.757

您将结果分配给`malloc()`的本地副本`line`，因此在`getLine()`函数返回后它不会被修改（尽管您认为它是）。您要做的就是返回它（而不是使用输出参数）或传递它的地址（通过引用传递它）：

```
void getLine(char **line)
{
    *line = malloc(length);

    // etc.
} 
```

并这样称呼它：

```
char *line;
getLine(&line); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:00:40.267

您使用的方式`realloc`不正确。如果它返回`NULL`，则内存块将丢失。

最好以`realloc`这种方式使用：

```
char *tmp;
...
tmp = realloc(line, counter);
if(tmp == NULL)
   ERROR, TRY TO SOLVE IT
line = tmp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:02:25.463

您的关键问题是***行****指针值不会传播到**getLine()**函数之外。*解决方案是将*指向函数的**行**指针*的指针作为参数传递，而不是像调用它一样调用它，`getLine(&line);`而函数将被定义为带参数`char **line`。**在函数中，在您现在使用line**的所有地方，您将使用***line**代替，即取消对指针的引用并使用**main()**中指针指向的变量的值。希望这不会太混乱。:-) 试着把它画在一张纸上。

（一个棘手的部分 - 您必须更改`line[counter]`为，`(*line)[counter]`因为您*首先*需要取消引用指向字符串的指针，*然后*才能访问字符串中的特定字符。）

您的代码还有其他几个问题：

*   您使用**char**作为**charRead**的类型。但是，**EOF**常量不能使用**char**表示，您需要使用**int** - 作为**charRead的类型和****getLine()**的返回值，以便您实际上可以区分换行符和文件结尾。
*   您忘记返回从**getLine()**函数读取的最后一个字符。:-)
*   您在每次添加字符后重新分配缓冲区。这不是非常有效，因此是一种相当丑陋的编程实践。使用另一个变量来跟踪分配的空间量并不太难，然后 (i) 从分配合理的内存块开始，例如 64 字节，因此理想情况下您永远不会重新分配 (ii) 只有当您需要基于比较计数器和您的分配大小跟踪器。两种重新分配策略很常见 - 将分配的大小加倍或按固定步长增加分配。

# r - ggplot 的 Molten 数据中的标识符

> ID：12657196
> 
> 赞同：0
> 
> 时间：2012-09-29T22:48:51.683
> 
> 标签：r, casting, ggplot2, melt

我在`id.vars`in`melt()`以及如何使它与`ggplot()`.

假设我得到了自 1970 年以来按种族、年龄和性别划分的加州人口数据：

```
ca1970_1989<-read.table(
 url('http://www.dof.ca.gov/research/demographic/data/race-ethnic/1970-89/documents/California.txt'),  
header=F,strip.white=TRUE,stringsAsFactors=T)
names(ca1970_1989)<-c('County name','Year','Sex','Age','Total Population','White Population','Hispanic Population','Asian & Pacific Islander Population','Black Population','American Indian Population') 
```

我暂时不需要年龄，所以我总结一下。

`ca1970_1989.agg<-aggregate(ca1970_1989[,6:10],by=list(ca1970_1989$Sex,ca1970_1989$Year),FUN=sum)`

我想用它来绘制它，`ggplot()`所以我会酌情融化：

`ca1970_1989.m<-melt(ca1970_1989.agg, id.vars=c('Group.1','Group.2')) names(ca1970_1989.m)[1:2]<-c('Sex','Year')`

```
> head(ca1970_1989.m)
     Sex Year         variable   value
1 FEMALE 1970 White Population 7845344
2   MALE 1970 White Population 7635379
3 FEMALE 1971 White Population 7848106
4   MALE 1971 White Population 7626582
5 FEMALE 1972 White Population 7827480
6   MALE 1972 White Population 7597465 
```

我想传递给 ggplot，但让它正确地知道实际上有一个额外的标识符（Sex），以便它可以区分男性和女性的值。

如果我进行此调用，则不会捕获`Sex`分组。

```
ggplot(ca1970_1989.m, aes(x=Year, y=value, group=variable), colour=variable)) +
geom_line() 
```

我应该使用`cast`性别`variable`和种族的组合吗？我应该首先`melt()`对`id.vars`参数使用不同的方法吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:56:49.380

您可以将“Sex”和“variable”这两个因素与冒号合并在一起，如下所示：

```
ggplot(ca1970_1989.m, aes(x=Year, y=value, group=variable:Sex),color=variable) + geom_line() 
```

这多次对我有用。但我对 R 比较陌生，所以这也可能被认为是不好的风格。

# ruby-on-rails - Rails：是否可以在“索引”或“显示”视图上放置“创建”表单？

> ID：12657197
> 
> 赞同：0
> 
> 时间：2012-09-29T22:48:53.817
> 
> 标签：ruby-on-rails

嗨，我正在尝试处理我的第一个 Rails 项目，并且想知道是否可以将（相册的）显示或索引视图与创建更多相册的表单结合起来。URL 是否没有正确的参数来执行此操作？我能否在表单上设置操作以使其“创建”并在成功时再次重定向到索引页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:10:52.967

当然你可以做到这一点，只需将表单代码放在你想要创建/更新的任何页面上，它就会起作用。

唯一的问题是在成功或不成功的创建/更新之后操作会将您重定向到的位置：通常从`new`页面，您将在成功时重定向到新创建的记录（`show`新记录的操作），然后返回到`new`失败的操作（表单字段上有错误）。如果您想从不同的页面创建/更新记录，并在每种情况下将操作重定向到不同的页面，那么您只需要做更多的工作。

可能的做法是向表单添加一个隐藏参数，其中包含要重定向到的操作，并对其进行操作检查并相应地重定向。例如：

```
VALID_REDIRECT_ACTIONS = ["show", "index"]

def create
  ...
  if @photo.save
    flash[:success] = "Photo successfully created!"
    if VALID_REDIRECT_ACTIONS.include?(params[:redirect])
      redirect_to params[:redirect]
    else
      redirect_to @photo
    end
  else
    ...
  end
end 
```

# php - 通过 PHP 下载文件

> ID：12657199
> 
> 赞同：0
> 
> 时间：2012-09-29T22:49:14.900
> 
> 标签：php, download, readfile

我正在尝试通过 PHP 启动文件下载。它下载，但是，文件无法打开。我的路径是正确的，因为我通过 HTML 中的图像标签预览图像进行了测试。

```
 $findPage = mysql_query("SELECT * FROM pages WHERE page_id = '$pageId' LIMIT 1");
    $pg = mysql_fetch_array($findPage);

    $fullPath = $pg['page_link'];
    $explode = explode(".", $fullPath);

    $ext = $explode[count($explode)-1];

    header('Content-disposition: attachment; filename="Name.'.$ext.'"');
    header('Content-type: image/'.$ext);
    readfile($fullPath); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:32:05.300

如果您尝试以下操作，您会得到什么：

```
$fullPath = 'https://www.google.co.uk/images/srpr/logo3w.png';

list($w,$h,$t) = getimagesize($fullPath);  
$mimetype = image_type_to_mime_type($t);
$extension = end(explode('.', $fullPath));

header('Content-disposition: attachment; filename="Name.'.$extension.'"');
header('Content-type: '.$mimetype);
readfile($fullPath); 
```

你应该下载谷歌的标志......我在我的本地设置上下载。

*（此代码需要在您的服务器上启用 fopen_wrappers）*

如果您确实正确下载了 Google 的徽标，那么我建议您的数据库提供的数据有问题，或者 readfile 尝试访问和读取您的文件时存在权限问题。

```
file_exists( $fullPath ) /// will tell you if the file exists or not

is_readable( $fullPath ) /// could be useful to detect a read error 
```

如果您没有获得 Google 的徽标，则 fopen_wrappers 在您的服务器上被禁用，或者您的代码中的其他地方发生了一些奇怪的事情。

## 额外说明

在哪里`$pageId`设置？如果它是从外部世界传递到您的脚本中的——就像通过 URL 一样——我会坚持你使用不同的方式来构建你的数据库查询。至少在将`$pageId`值插入查询之前，您应该对值运行某种转义函数。否则，这是一个相当安全的问题。这是因为任何有权访问您的 URL 的人显然都可以修改它，并且通过这样做他们可以直接修改您的查询。处理简单 ID 时保护数据库的最快方法是确保该值是一个数字。

```
$pageId = (int) $pageId; 
```

# list - Erlang：列表中匹配某个条件的第一个元素（不评估其余元素）

> ID：12657202
> 
> 赞同：6
> 
> 时间：2012-09-29T22:49:39.847
> 
> 标签：list, erlang, list-comprehension

举个简单的例子，假设我有一个数字列表，`L`我想找到第一个大于某个特定数字的元素`X`。我可以用这样的列表推导来做到这一点：

```
(mynode@127.0.0.1)24> L = [1, 2, 3, 4, 5, 6].              
[1,2,3,4,5,6]
(mynode@127.0.0.1)25> X = 2.5.
2.5
(mynode@127.0.0.1)26> [First | _] = [E || E <- L, E > X].  
[3,4,5,6]
(mynode@127.0.0.1)27> First.
3 
```

但这似乎可能非常低效，因为列表可能很长，而且第一场比赛可能很早。所以我想知道是否a）是否有一种有效的方法可以在找到第一个匹配项后不评估列表中的其余元素？或者 b) 当它被编译时，Erlang 是否优化了其余的比较？

这就是我将如何实现我在 C 中寻找的东西：

```
int first_match(int* list, int length_of_list, float x){
    unsigned int i;
    for(i = 0; i < length_of_list, i++){
        if(x > list[i]){ return list[i]; } /* immediate return */
    }
    return 0.0; /* default value */
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-30T01:17:02.527

好吧，像

```
firstmatch(YourList, Number) -> 
   case lists:dropwhile(fun(X) -> X =< Number end, YourList) of
     [] -> no_solution;
     [X | _] -> X
   end. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T09:16:57.467

这是一个快速的解决方案：

```
first_greater([],_) -> undefined;
first_greater([H|_], Num) when H > Num -> H;
first_greater([_|T], Num) -> first_greater(T,Num). 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-29T23:37:40.607

这就是*我*能想到的。我仍然想知道是否有更好的答案和/或最简单的事情是否得到优化（我想得越多，我就越怀疑它）。

```
-module(lazy_first).

-export([first/3]).

first(L, Condition, Default) ->
  first(L, [], Condition, Default).

first([E | Rest], Acc, Condition, Default) ->
  case Condition(E) of
    true -> E;
    false -> first(Rest, [E | Acc], Condition, Default)
  end;

first([], _Acc, _Cond, Default) -> Default. 
```

例子：

```
14> lazy_first:first([1, 2, 3, 4, 5], fun(E) -> E > 2.5 end, 0.0).
3
15> lazy_first:first([1, 2, 3, 4, 5], fun(E) -> E > 5.5 end, 0.0).
0.0 
```

**编辑**

这是一个没有蓄能器的版本。

```
first([E | Rest], Condition, Default) ->
  case Condition(E) of
    true -> E;
    false -> first(Rest, Condition, Default)
  end;

first([], _Cond, Default) -> Default. 
```

# java - 删除列表元素——我在 Java 中获得最佳性能的方法

> ID：12657204
> 
> 赞同：0
> 
> 时间：2012-09-29T22:50:33.227
> 
> 标签：java, arraylist, linked-list

如果我需要删除列表中的元素，以下会比使用更好`LinkedList`：

```
int j = 0;
List list = new ArrayList(1000000);
...
// fill in the list code here
...
for (Iterator i = list.listIterator(); i.hasNext(); j++) {
    if (checkCondition) {
        i.remove();
        i = list.listIterator(j);
    }
} 
```

?

`LinkedList`确实比 更有效地“删除和添加元素” `ArrayList`，但`LinkedList`作为双向链表需要更多内存，因为每个元素都被包装为一个`Entry`对象。虽然我需要一个单向`List`接口，因为我是按索引升序运行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:58:04.087

答案是：这取决于添加和删除的频率和分布。如果您只需要不频繁地进行*一次*删除，那么您可以使用链表。然而，over a的*主要*杀手是恒定时间随机访问。你不能用一个普通的链表真正做到这一点（但是，看看一个跳过列表以获得一些灵感......）。相反，如果您要删除*相*对于其他元素的元素（其中，您需要删除下一个元素），那么您应该使用链表。`ArrayList``LinkedList`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:53:24.617

对此没有简单的答案：

*   这取决于您要优化的内容。您是否**更**关心执行操作所花费的时间，或者列表使用的空间？

*   这取决于列表的长度。

*   这取决于您从列表中删除的元素的比例。

*   这取决于您对列表执行的其他操作。

这些决定因素中的一个或多个可能无法预先预测；即你真的不知道。所以我的建议是暂时推迟它；即根据直觉（或掷硬币）选择一个或另一个。如果您在这方面有可量化的性能问题，您可以稍后重新考虑该决定......正如 cpu 或内存使用情况分析所证明的那样。*

# jquery - 使用具有越来越多 jquery 的 id 选择元素

> ID：12657205
> 
> 赞同：0
> 
> 时间：2012-09-29T22:50:36.947
> 
> 标签：jquery, jquery-selectors

我为同一页面中的多个链接创建了多个切换。它们都已关闭（带有加号），单击它们每个都将打开一个 div（并显示一个减号）。

我可以让切换开关工作，但我被加号和减号困住了。当一个链接打开时，所有链接都将显示减号。

每个`a`都有一个带有数字的 id`1`到`15`。

我们如何只打开一个显示减号而其他所有显示加号？

请指教

**这里使用的代码：**

```
$('.questions a').removeClass('DownArrow');
$('.questions a').addClass('RightArrow');  

function toggleDiv(divId) {
    $("#"+divId).toggle();
    $('.questions a').toggleClass('DownArrow');
    $('.questions a').toggleClass('RightArrow');
} 
```

**HTML：**

```
<div class='questions'> 
    <a class="DownArrow" id="numb-1" href="javascript:toggleDiv('myContent1');">text</a>
</div>
<div id="myContent1">
    <p>some text</p>
</div>
<div class='questions'> 
    <a class="DownArrow" id="numb-2" href="javascript:toggleDiv('myContent2');">text</a>
</div>
<div id="myContent2">
    <p>some text</p>
</div> 
```

**这里的CSS：**

```
div#questions  a {  
    display:block; border:1px solid #F00; width:500px; padding:10px; 
}

div#myContent1,div#myContent2,div#myContent3,div#myContent4,div#myContent5 {
    display:none;
}

a.DownArrow {
    background:#ccc url(../images/plus.png) no-repeat 460px 8px;
}

a.RightArrow {
    background:#ccc url(../images/minus.png) no-repeat 460px 8px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:41:34.323

如果您使用 evnet 处理程序而不是内联 onclick 分配，这会容易得多......您可以使用`href`acnchors 来定位：

**修订标记**

```
<div class='questions'> 
  <a class="DownArrow" id="numb-1" href="#myContent1">text</a>
</div>
<div id="myContent1">
  <p>some text</p>
</div>
<div class='questions'> 
  <a class="DownArrow" id="numb-2" href="#myContent2">text</a>
</div>
<div id="myContent2">
  <p>some text</p>
</div> 
```

**JS**

```
$(function (){
   $('div.questions a').click(function (e){
        var $a = $(this),
            target = $a.attr('href');

        // toggle the classes on the a clicked
        $a.toggleClass('DownArrow RightArrow');

        $(target).toggle(); // show the DIV  
   });
}); 
```

[这是一个小提琴](http://jsfiddle.net/PHJpZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:44:40.673

这与您所展示的有点不同，但请在这里坚持。

如果内容像[手风琴/折叠内容列表](http://twitter.github.com/bootstrap/javascript.html#collapse)样式配置一样打开，您实际上不需要所有带有`id`s 之类的东西。这就是 jQuery 的奇妙之处：它让遍历触手可及。

所以这实际上很容易：

```
<div class="questions">
    <span>+</span>
    <a href="#">text</a>
</div>
<div class="content">
    <p>some text</p>
</div>
<div class='questions'> 
    <span>+</span>
    <a href="#">text</a>
</div>
<div class="content">
    <p>some text</p>
</div> 
```

请注意，我并没有展示所有的疯狂`id`s，并且我已经实现了一个`content`类。在我的示例中，我也使用 a`<span>+</span>`而不是图像作为切换箭头，但这只是因为我认为没有必要证明这一点。如果你想让我解释一下，请告诉我。

CSS的唯一相关部分：

```
.content {
    display: none;
} 
```

这里我们有（非常非常简单的）jQuery：

```
jQuery(function load(){
    var $questions = $('.questions'),
        $content = $('.content');

    $questions.on('click', function toggle(){
        var $this = $(this),
            $selected = $this.next('.content');

        $content.not($selected).hide();

        $selected.show();

        $questions.not(this).find('span').text('+');
        $this.find('span').text('-');

        return false;
    });
});​ 
```

[http://jsfiddle.net/userdude/5t2Un/](http://jsfiddle.net/userdude/5t2Un/)

所以我所做的是...

```
// jQuery(); is a shortcut to $(document).ready()
jQuery(function load(){
    // I'm going to cache my elements for later.
    // I can also use $() inside this function.
    var $questions = $('.questions'),
        $content = $('.content');

    // Here I'm going to detect a click on a `div.questions`,
    // and use this as my toggle.
    $questions.on('click', function toggle(){
        var $this = $(this),
            // Notice I'm using `$.next('.content'). This is
            // how I select the appropriate `.content` for the
            // question.
            $selected = $this.next('.content');

        // Hide all content but what was selected by $.next()
        $content.not($selected).hide();

        // Now show the $this.next('.content'), which we've
        // saved a reference to $selected.
        $selected.show();

        // Toggling the + and -. You can do an $.addClass()
        // and $.removeClass() on the element here.
        $questions.not(this).find('span').text('+');
        $this.find('span').text('-');

        // Return false in case an ANCHOR was clicked, which 
        // will cancel any navigation.
        return false;
    });
});​ 
```

**编辑**

现在，如果`.questions`它们`$.next()`与它们无关`.content`（并且遍历会适得其反），您还可以在元素的某些部分中使用引用。Prodigitalson 演示了 using `href="#myContent1"`，他将其提供给 jQuery 喜欢`$(this.href)`选择当前`.content`的 by `id`。

我将演示另一种方法，使用`data-`格式。

```
<div class="container nav-bar">
    <div class="questions" data-content-id="#myContent1">
        <span>+</span>
        <a href="#">text</a>
    </div>
    <div class='questions' data-content-id="#myContent2"> 
        <span>+</span>
        <a href="#">text</a>
    </div>
    <div class='questions' data-content-id="#myContent3"> 
        <span>+</span>
        <a href="#">text</a>
    </div>
    <div class='questions' data-content-id="#myContent4"> 
        <span>+</span>
        <a href="#">text</a>
    </div>
    <div class='questions' data-content-id="#myContent5"> 
        <span>+</span>
        <a href="#">text</a>
    </div>
</div> 
```

注意这部分：

```
<div class="questions" data-content-id="#myContent1"> 
```

现在我将使用它`$.data()`：

```
$(function load() {
    var $questions = $('.questions'),
        $content = $('.content');

    $questions.on('click', function toggle() {
        var $this = $(this),
            $selected = $($this.data('content-id'));

        $content.not($selected).hide();
        $selected.show();

        $questions.not(this).find('span').text('+');
        $this.find('span').text('-');

        return false;
    });
});​ 
```

[http://jsfiddle.net/userdude/VCnQn/](http://jsfiddle.net/userdude/VCnQn/)

这与我之前展示的方法基本相同，除了：

```
$selected = $($this.data('content-id')); 
```

这就是我们如何在`.questions`和之间建立关联`.content`。很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:04:36.153

用这个

```
var id=0;
while(condition){
    $("#myContent"+id).toggle();
    $('.questions a').toggleClass('DownArrow');
    $('.questions a').toggleClass('RightArrow');
    id++;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T23:03:11.827

```
$('questions a').each(function(){
 $(this).click(function () {
   var clicked_id = $(this).attr('id');
    //*****
    $('questions a').each(function(){ 
     if ($(this).attr('id') == clicked_id ) {$(this).attr('class', 'class_with_sign_-'); }
     else {$(this).attr('class', 'class_with_sign_+');}
     });
    //*****
 });
}); 
```

# php - 如何向下滚动到 ajax 聊天中的新消息？

> ID：12657206
> 
> 赞同：-1
> 
> 时间：2012-09-29T22:50:40.143
> 
> 标签：php, javascript, ajax, chat, instant-messaging

我正在开发一个私人聊天系统。我使用 PHP 和 Javascript 以及很多框架。:D

```
frames:

-------------*--------------- 

| chat messages here        |                         

-------------*---------------

|send message frame         |

-------------*--------------- 
```

我想更新聊天消息所在的框架，但我想做很酷的方式。你知道我是否只是重新加载看起来不酷的框架。如果我只是重新加载一个小 div，那可能会好一点，但我不知道......我的意思是：

```
function newMessageShow()
{
print messages ... 
// wait 10-20 sec... somehow
newMessageShow();
} 
```

你知道我的意思，不是吗？...我很抱歉我的英语很差...如果你能理解我，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:01:36.320

如果您的意思是如何向下滚动到视图底部，请使用`scrollTop`. 我在这里有一个例子来看看我的意思 - [http://jsfiddle.net/uPLWT/](http://jsfiddle.net/uPLWT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:55:37.273

这里我整理了这个非常简单的 AJAX 聊天示例，它将轮询您的服务器并获取最新的 25 条消息，它还利用 $ajax.post() 发送消息。为了简单起见，消息存储在 sqlite 中。也许它有点兴趣。

**聊天页面：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Simple AJAX Chat</title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
function get_chat(){
    var oldscrollHeight = $("#chat_log")[0].scrollHeight;

    $.ajax({ url: "./chat.php", cache: false,
    success: function(data){
        if(data.chat==null){
        }else{
            $("#chat_log").html(data.chat);

            //Scroll to bottom of chat log on new message
            var newscrollHeight = $("#chat_log")[0].scrollHeight;
            if(newscrollHeight > oldscrollHeight){
                $("#chat_log").scrollTop($("#chat_log")[0].scrollHeight);
            }
        }
        poll();
    }, dataType: "json"});
}

function poll(){
    setTimeout(function(){
        get_chat();
    }, 1500);
}

$(document).ready(function(){
    //Send message
    $("button").click(function () {
        var text = $("#chat").val()
        $.post("chat.php", { chat: text } );
    });
    poll();
});
</script>
<style>
#chat_log{
    border:solid 2px #ddd;
    background:#ccc; 
    color:#000;
    padding:4px;
    width:500px;
    height:150px;
    overflow:auto;
}
</style>

</head>

<body>

<h1>AJAX Chat Polling Example</h1>
<p>Chat Log:</p>
<div id="chat_log">Loading chat...</div>
<p>Send Message:</p>
<div id="chat_send">
    <p><input id="chat" type="text" name="chat" size="42"><button>Send</button></p>
</div>

</body>
</html> 
```

**聊天接收器/控制器和模型 (chat.php)**

```
<?php 
// A simple table for chat messages
$chat_table  = array("CREATE TABLE chat ( id INTEGER PRIMARY KEY,
                                          user TEXT,
                                          message TEXT );");
// Create a chat store instance.
$chat_store = new chat_store("sqlite:./chat.db", $chat_table);

// User posted to chat
if(isset($_POST['chat'])){
    $chat_store->insert(array(array('user'=>$_SERVER['REMOTE_ADDR'],'message'=>$_POST['chat'])));
}else{
    // Grab latest 25 messages 
    $result = $chat_store->get_chat_messages(25);
    // Send as json so jquery can use it to insert into #chat_log
    header('Content-Type: application/json');
    // Build an output
    $chat = null;
    foreach($result as $row){
        $chat .= '<p>'.$row['user'].' : '.$row['message'].'</p>';
    }
    //Send the json string
    echo json_encode(array('chat'=>$chat));
    die;
}
//End Logic

/**
 * Chat store class, using sqlite & PDO to store and get your chat messages. 
 */
class chat_store{
    private $db;

    function __construct($dsn,$setup_query){
        $this->dsn = $dsn;
        $this->setup = $setup_query;
        $this->chkSetup();
    }
    /**
     * Connect
     */
    public function connect(){
        try{
            if (!$this->db instanceof PDO){
                $this->db = new \PDO($this->dsn);
                $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
                $this->db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
                $this->db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE,PDO::FETCH_ASSOC);
            }
        }catch (Exception $e){
            die($e->getMessage());
        }
    }
    /**
     * Get chat messages
     *
     * @param int $count
     * @return array
     */
    public function get_chat_messages($count){
        $this->connect();
        $sql = "SELECT * FROM chat LIMIT ".$count;

        $statement = $this->db->prepare($sql);
        $statement->execute();
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }

    /**
     * Insert message into store
     *
     * @param array $values
     */
    public function insert($values){
        $this->connect();
        $fieldnames = array_keys($values[0]);
        $fields = '('.implode(' ,',$fieldnames).')';
        $bounds = '(:'.implode(', :',$fieldnames).')';
        $sql = "INSERT INTO chat {$fields} VALUES {$bounds}";
        $statement = $this->db->prepare($sql);
        foreach($values as $vals){
            $statement->execute($vals);
        }
    }

    /**
     * Setup and Create table for store
     */
    function chkSetup(){
        $dso = explode(':',$this->dsn);
        if(file_exists($dso[1])){
            return;
        }else{
            $this->connect();
            //Setup Table
            if(is_array($this->setup)){
                foreach($this->setup as $table){
                    $this->db->query($table);
                }
            }else{
                $this->db->query($this->setup);
            }
            exit(header("refresh:0;url=./"));
        }
    }
}//End Class
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:54:31.907

你可以通过 jQuery ajax post 来做到这一点。看看这个（http://api.jquery.com/jQuery.post/）有一个更新div的例子。

# android - Android Eclipse 项目中是否允许用户定义的目录名称

> ID：12657207
> 
> 赞同：1
> 
> 时间：2012-09-29T22:51:17.440
> 
> 标签：android, eclipse, sqlite, eclipse-juno, android-sqlite

我想我可能已经知道这个问题的答案了，但我只想 100% 确定。无论如何，我正在使用 Eclipse 4.2（“Juno”）编写一个 Android 应用程序。我想通过使用外部文件并通过我的代码读取/解析这些文件来创建我的 SQLite 数据库。因此，我创建了自己的目录`/database`，并将其放置在项目的根目录中。然后，Eclipse 开始抱怨，报告一个问题并说：

```
Invalid recourse directory name. 
```

我什至尝试将我的`database`目录放在现有`/res`目录中，但这导致了同样的 Eclipse*问题*。只是想确认一下我最初的想法是：**不允许我在项目中定义自己的目录并将其与我的发布捆绑在一起吗？**

如果是这样，那么我想我将不得不遵循[这个 stackoverflow question](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)中发布的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:54:34.357

把它放在 /assets 而不是 /res 中，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:55:19.457

您应该能够在 Android 项目的根目录中创建任意目录，但是您的应用程序将无法访问这些文件。这对于存储测试数据、文档或 jar 文件等开发目的很有用。`gen`但是，您不能在和等位置创建非标准目录`res`。

# iphone - 动画 UITableView 重新加载会导致每个单元格同时加载

> ID：12657208
> 
> 赞同：4
> 
> 时间：2012-09-29T22:52:09.980
> 
> 标签：iphone, ios, uitableview

我有一个包含 100 个单元格的表格视图。起初，它是空的。然后，我打电话：

```
[_tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationLeft]; 
```

由于表格视图中没有任何内容，我需要创建几个单元格。但是，我希望表格视图要求 10 个（以适应屏幕大小）单元格......而不是 100 个！

当我只是重新加载没有任何动画的表格视图时，它不会发生：

```
[_tableView reloadData]; 
```

这个问题使表格重新加载非常慢：有没有办法让它只要求 10 个单元格？

* * *

### 编辑

也许我不够清楚：**起初**，表格**没有条目**。**然后**，我在我的数据源中添加了**100 个条目**，并要求重新加载表：重新加载之前没有可见的单元格，因此该`reloadRowsAtIndexPaths`解决方案将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:02:47.667

听起来您是在表中插入新行，而不是重新加载，所以为什么不使用：

```
[_tableView insertRowsAtIndexPaths:... withRowAnimation:...]; 
```

您可能需要先插入该部分：

```
[_tableView insertSections:... withRowAnimation:..]; 
```

[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:59:46.723

如果您只想重新加载假设 10 个单元格，则以下代码将起作用。

```
 int cellsToReload = 10;

        NSMutableArray *indexPaths = [NSMutableArray arrayWithCapacity:cellsToReload];
        for(int x = 0; x < cellsToReload; x++) {

            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:x inSection:0];
            [indexPaths addObject:indexPath];
        }

        [self.theTableView reloadRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationLeft]; 
```

在上面的代码中，当您重新加载所有 tableview 时，您正在重新加载整个部分，而不仅仅是几行。我猜你的表格视图只有一个部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:17:49.637

`NSArray *paths = [_tableView indexPathsForVisibleRows];`
`[_tableView reloadRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationLeft];`
将完全满足您的需求-仅重新加载可见的原始数据，不多也不少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T23:07:54.750

我发现这个问题只发生在 iOS 5.1 及更低版本上。无需提交错误，因为它已在 iOS 6 中得到纠正。无论如何感谢您的回答！

# apache - RedirectMatch 查询字符串问题

> ID：12657209
> 
> 赞同：0
> 
> 时间：2012-09-29T22:52:12.067
> 
> 标签：apache, rewrite, query-string, match

我正在移动以前网站上的内容，该网站制作了 2 个副本来翻译它，这样我就只剩下一个了。

为了提供回退访问，​​我写了这个 rewritematch 规则：

```
RedirectMatch  301 /(en|fr)/(.+)\.php\??(.+)?       /$2.php?locale=$1&$3 
```

但这似乎不起作用。

如果我改为执行以下操作，一切正常，但我丢失了我真正想要的原始链接中传递的查询字符串。

```
RedirectMatch  301 /(en|fr)/(.+)\.php               /$2.php?locale=$1&$3 
```

我做错了什么吗？还是不支持查询字符串？（我检查过但似乎对 apache 文档没有限制）。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:54:55.580

尝试

```
RedirectMatch  301 /(en|fr)/(.+)(\.php\?)?(.+)? 
```

# java - Java：使用 XStream 类库打印 xml 数据

> ID：12657210
> 
> 赞同：1
> 
> 时间：2012-09-29T22:52:31.930
> 
> 标签：java, xml, printing

如何使用 XStream 类库在屏幕终端上打印 XML？

我需要打印

```
System.out.println(recordXML.read()); 
```

但它返回：

```
<list><registrosarraylist02xml.Pessoas><ID>1</ID><nome>Regis</nome><idade>25</idade></registrosarraylist02xml.Pessoas><registrosarraylist02xml.Pessoas><ID>2</ID><nome>Rose</nome><idade>32</idade></registrosarraylist02xml.Pessoas><registrosarraylist02xml.Pessoas><ID>3</ID><nome>david</nome><idade>10</idade></registrosarraylist02xml.Pessoas></list> 
```

我想打印类似于：

```
System.out.println(p.ID + "  - " + p.name + " - " + p.age); 
```

ID - 姓名 - 年龄 1 - 里吉斯 - 25

2 - 玫瑰 - 32

3 - 大卫 - 10

```
import com.thoughtworks.xstream.XStream;
import java.util.ArrayList;
import java.util.Scanner;

public class RegistrosArrayList02_xml {

    public static void main(String[] args) {
        ArrayList listPerson = new ArrayList();

        recordXML(listPerson);
        show(listPerson);

    static void show(ArrayList mylist) {
        System.out.println("ID - name - age");
        for (int i = 0; i < mylist.size(); i++) {
            Person p = (Person) mylist.get(i);
            System.out.println(p.ID + "  - " + p.name + " - " + p.age);
        }
    }
    static void recordXML(ArrayList mylist) {
        XStream xstream = new XStream();
        String xml = xstream.toXML(mylist);
        RecordRead record = new RecordRead();
        RecordRead.record(xml);
    }

}

import java.io.File;
import java.io.FileWriter;
import java.util.Scanner;

public class RecordRead {

    static void record(String xml) {
        try {
            FileWriter w = new FileWriter("teste.xml");
            w.write(xml);
            w.close();
        } catch (Exception e) {
            System.out.println("Error record XML: " + e);
        }
    }

    static String read() {
        try {
            Scanner in = new Scanner(new File("teste.xml"));
            StringBuilder sb = new StringBuilder();
            while (in.hasNext()) {
                sb.append(in.next());
            }
            in.close();
            return sb.toString();
        } catch (Exception e) {
            System.out.println("Error read XML: " + e);
        }
        return "";
    }
}

public class Person {

    public static int lastID = 1;
    public int ID;
    public String name;
    public int age;

    public Person() {
        ID = Person.lastID++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:36:46.713

```
import com.thoughtworks.xstream.*;
import java.io.File;
import java.io.FileWriter;
import java.util.Scanner;
import java.util.ArrayList;

public class RegistrosArrayList02_xml {

    public static void main(String[] args) 
    {
       doOneRecordInFile();
       doMultipleRecordsInFile();
    }

    static void doMultipleRecordsInFile()
    {
       XStream xstream = new XStream();
       xstream.alias("registrosarraylist02xml.Pessoas", Person.class);
       xstream.alias("list", People.class);
       xstream.aliasField("nome",Person.class,"name");
       xstream.aliasField("idade",Person.class,"age");
       People people = createPeople();
       String xml = xstream.toXML(people);
       RecordRead.record(xml,"test2.xml");
       People people2 =  (People) xstream.fromXML( RecordRead.read("test2.xml") );
       show( people2.getEntries() );
    }

    static void doOneRecordInFile()
    {
       XStream xstream = new XStream();
       xstream.alias("registrosarraylist02xml.Pessoas", Person.class);
       xstream.aliasField("nome",Person.class,"name");
       xstream.aliasField("idade",Person.class,"age");
       Person myObject = new Person(10,"John",45);
       String xml = xstream.toXML(myObject);
       // write Person class to file as XML
       RecordRead.record(xml,"teste.xml");
       // read Person class from XML file
       Person p = (Person) xstream.fromXML( RecordRead.read("teste.xml") );
       System.out.println("----------- one record -------------");
       System.out.println(p);
       System.out.println(p.ID + "  - " + p.name + " - " + p.age);
       System.out.println( (Person) xstream.fromXML(RecordRead.read("teste.xml")));
    }

    static void show(ArrayList<Person> mylist) 
    {
        System.out.println("---------- multiple records -------------");
        System.out.println("ID - name - age");     
        for (int i = 0; i < mylist.size(); i++) 
        {
            Person p = mylist.get(i);
            System.out.println(p.ID + "  - " + p.name + " - " + p.age);
            // OR:
        // System.out.println(p);
        }
    }

    static People createPeople()
    {
        People people = new People();
        Person a = new Person(1,"Regis",25);
            Person b = new Person(2,"Rose",32);
        Person c = new Person(3,"david",10);
        people.add(a);
        people.add(b);
        people.add(c);
        return people;
    }

}

class People {

    private ArrayList<Person> entries = new ArrayList<Person>();
    public void add(Person p)
    {
        entries.add(p);
    }
    ArrayList<Person> getEntries() { return entries; }

}

class Person {

    public static int lastID = 0;
    public int ID;
    public String name;
    public int age;

    public Person() {
        ID = Person.lastID++;
    }
    public Person(String id, String Name,String Age) {
        ID = Integer.parseInt(id);
        name = Name;
        age = Integer.parseInt(Age);
    }

    public Person(int id, String Name,int Age) {
        ID = id;
        name = Name;
        age = Age;
    }

    public String toString()
    {
       return ID + "  - " + name + " - " + age;
    }
}

class RecordRead {

    static void record(String xml,String filename) {
        try {
            FileWriter w = new FileWriter(filename);
            w.write(xml);
            w.flush();
            w.close();
        } catch (Exception e) {
            System.out.println("Error record() XML: " + e);
        }
    }

    static String read(String filename) {
        try {
            Scanner in = new Scanner(new File(filename));
            StringBuilder sb = new StringBuilder();
            while (in.hasNext()) {
                sb.append(in.next());
            }
            in.close();
            return sb.toString();
        } catch (Exception e) {
            System.out.println("Error read XML: " + e);
        }
        return "";
    }
} 
```

输出：

```
----------- one record -------------
10  - John - 45
10  - John - 45
10  - John - 45
---------- multiple records -------------
ID - name - age
1  - Regis - 25
2  - Rose - 32
3  - david - 10 
```

# java - hibernate ManyToMany Java List 移除

> ID：12657216
> 
> 赞同：0
> 
> 时间：2012-09-29T22:53:41.163
> 
> 标签：java, hibernate, collections, concurrency, arraylist

我有这样的东西

```
@Entity
public class A implements Serializable {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Basic(optional = false)
  private Long id;
  @Basic(optional = false)
  private String name;
  @ManyToMany
  private List<B> bList = new ArrayList<>(0);

  public A() {
  }

  public List<B> getbList() {
    return bList;
  }

  public void setbList(List<B> bList) {
    this.bList = bList;
  }

  public Long getId() {
    return id;
  }

  public void setId(Long id) {
    this.id = id;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

} 
```

和

```
@Entity
public class B implements Serializable {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Basic(optional = false)
  private Long id;
  @Basic(optional = false)
  private Integer number;
  @ManyToMany
  private List<A> aList = new ArrayList<>(0);

  public B() {
  }

  public List<A> getaList() {
    return aList;
  }

  public void setaList(List<A> bList) {
    this.aList = bList;
  }

  public Long getId() {
    return id;
  }

  public void setId(Long id) {
    this.id = id;
  }

  public Integer getNumber() {
    return number;
  }

  public void setNumber(Integer number) {
    this.number = number;
  }
} 
```

还

```
public class C {

  public C() {
  }

  public boolean addAtoB(Session hibernate, A a, B b) throws HibernateException {
    a.getbList().add(b);
    b.getaList().add(a);
    hibernate.saveOrUpdate(a);
    hibernate.saveOrUpdate(b);
    A aa = (A) hibernate.get(A.class, a.getId());
    B bb = (B) hibernate.get(B.class, b.getId());
    if (aa.getbList().contains(b) && bb.getaList().contains(b)) {
      return true;
    }
    return false;
  }

  public boolean removeAfromB(Session hibernate, A a, B b) throws HibernateException {
    a.getbList().remove(b);
    b.getaList().remove(a);
    hibernate.saveOrUpdate(a);
    hibernate.saveOrUpdate(b);
    A aa = (A) hibernate.get(A.class, a.getId());
    B bb = (B) hibernate.get(B.class, b.getId());
    if (!(aa.getbList().contains(b) && bb.getaList().contains(b))) {
      return true;
    }
    return false;
  }

  public boolean addListOfAtoB(Session hibernate, List<A> a, B b) throws HibernateException {
    boolean test = false;
    for (int i = 0; i < a.size(); i++) {
      A aa = a.get(i);
      addAtoB(hibernate, aa, b);
    }
    test = true;
    return test;
  }

  public boolean removeListOfAtoB(Session hibernate, List<A> a, B b) throws HibernateException {
    boolean test = false;
    for (int i = 0; i < a.size(); i++) {
      A aa = a.get(i);
      removeAfromB(hibernate, aa, b);
    }
    test = true;
    return test;
  }

  public Integer halfOfB(Session hibernate, List<B> b) throws Exception {

    for (int i = 0; i < b.size(); i++) {
      B bb = b.get(i);
      List<A> aa = bb.getaList();
      if (aa.size() <= 5) {
        return aa.size();
      } else {
        Integer br = (Integer) hibernate.createCriteria(B.class)
                .setProjection(Projections.max("number")).uniqueResult() + 1;
        B bbb = new B();
        bbb.setNumber(br);
        List<A> half = aa.subList(aa.size() / 2, aa.size());
        //error
        removeListOfAtoB(hibernate, half, bb);
        addListOfAtoB(hibernate, half, bbb);
        halfOfB(hibernate, b);
      }

    }
    throw new Exception("error in halfOfB");
  }
} 
```

halfOfB 是一种递归方法，它将名称列表减半到新列表中，直到该列表在多个 B 下至少有 5 个来自 A 的名称。

在有人问为什么不是一对多之前，因为我需要两个实体都有多个应用程序，所以多对多是唯一的选择。

junit 中的所有方法都是绿色的，除了测试 halfOfB 抛出 java.util.ConcurrentModificationException。根据[这个](http://javaadami.blogspot.com/2007/09/enhanced-for-loop-and.html)，如果我使用 indexed 不应该抛出 ConcurrentModificationException 。另外，如果我颠倒顺序

```
 addListOfAtoB(hibernate, half, bbb);
 removeListOfAtoB(hibernate, half, bb); 
```

我仍然得到同样的错误任何想法如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:27:23.227

不太了解其中的区别，但这没有问题。

```
public Integer halfOfB(Session hibernate, List<B> b) throws Exception {

    for (int i = 0; i < b.size(); i++) {
      B bb = b.get(i);
      List<A> aa = bb.getaList();
      if (repeat(bb, hibernate, b)) {
        return aa.size();
      } else {
        repeat(bb, hibernate, b);
      }

    }
    throw new Exception("error in halfOfB");
  }

  private boolean repeat(B bb, Session hibernate, List<B> b) throws Exception {
    List<A> aa = bb.getaList();
    if (aa.size() <= 5) {
      return true;
    } else {
      Integer br = (Integer) hibernate.createCriteria(B.class)
              .setProjection(Projections.max("number")).uniqueResult() + 1;
      B bbb = new B();
      bbb.setNumber(br);
      List<A> half = aa.subList(aa.size() / 2, aa.size());
      removeListOfAtoB(hibernate, half, bb);
      addListOfAtoB(hibernate, half, bb);
    }
    return false;
  } 
```

# matlab - “全部清除”后如何在MATLAB中恢复断点？

> ID：12657219
> 
> 赞同：22
> 
> 时间：2012-09-29T22:54:07.553
> 
> 标签：matlab, breakpoints

我有一个习惯，我所有的 MATLAB 脚本都以`clear all; close all; clc`. 虽然它是一条非常有用的行，但一旦它执行，它就会清除我所有的断点。有没有一种简单的方法可以避免这种情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-29T23:13:24.940

我通过创建一个保存和重新加载断点的脚本解决了这个问题。为方便起见，您甚至可以将其放入快捷方式。

```
%# store breakpoints
tmp = dbstatus;
save('tmp.mat','tmp')

%# clear all
close all
clear classes %# clears even more than clear all
clc

%# reload breakpoints
load('tmp.mat')
dbstop(tmp)

%# clean up
clear tmp
delete('tmp.mat') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T21:10:51.643

`clear all`是重锤。例如，它还会转储内存中已解析的所有 MATLAB 代码。简单的选项`clear`或[其他选项之一](http://www.mathworks.com/help/matlab/ref/clear.html)通常是更好的选择，并且不会擦除断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T15:10:09.033

我遇到了同样的问题：运行我的代码后，所有断点都被删除了。我终于发现您可以通过单击“设置/清除断点”（F12 键盘）来恢复上一个断点。

# c++ - 在字符串 c++ 中生成所有字谜

> ID：12657220
> 
> 赞同：-1
> 
> 时间：2012-09-29T22:54:20.233
> 
> 标签：c++, c

我在网上看到了这个问题，我试图在`C++`. 我有以下算法：

```
char permutations( const char* word ){

  int size = strlen( word );
  if( size <= 1 ){
      return word;
  }
  else{
    string output = word[ 0 ];
    for( int i = 0; i < size; i++ ){
        output += permutations( word );
        cout << output << endl;
        output = word[ i ];
     }
  }
  return "";
} 
```

例如，如果我有`abc`输入，我想显示`abc`, `acb`, `bac`, `bca`, `cab`, `cba`。所以，我想做的是

```
'abc' => 'a' + 'bc' => 'a' + 'b' + 'c'
                    => 'a' + 'c' + 'b' 
```

所以我需要在每个函数调用中传递一个`word`less char。有人可以帮忙怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T23:00:43.027

我建议使用`algorithm`C++ 中的头文件库来做，更容易；并且作为一个函数可以这样写：

```
void anagram(string input){
    sort(input.begin(), input.end());
    do
        cout << input << endl;
    while(next_permutation(input.begin(), input.end()));
} 
```

然而，既然你想要它没有 STL，你可以这样做：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void swap (char *x, char *y)
{
    char ch = *x;
    *x = *y;
    *y = ch;
};

void permutate_(char* str, size_t index )
{
    size_t i = 0;
    size_t slen = strlen(str);
    char lastChar = 0;

    if (index == slen )
    {
        puts(str);
        return;
    }

    for (i = index; i < slen; i++ )
    {
        if (lastChar == str[i])
            continue;
        else
            lastChar = str[i];

        swap(str+index, str+i);
        permutate_(str, index + 1);
        swap(str+index, str+i);
    }
}

// pretty lame, but effective, comparitor for determining winner
static int cmpch(const void * a, const void * b)
{
    return ( *(char*)a - *(char*)b );
}

// loader for real permutor
void permutate(char* str)
{
    qsort(str, strlen(str), sizeof(str[0]), cmpch);
    permutate_(str, 0);
} 
```

您可以通过向其发送一个排序的字符数组来调用它，

```
permutate("Hello World"); 
```

非 STL 方法是[从这里获得的。](http://www.mytechinterviews.com/permutations-of-a-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:00:15.357

STL 很棒：

```
#include <iostream>
#include <string>
#include <algorithm>
using namespace std;

void permutations(const char *word) {
    string s = word;
    sort(s.begin(), s.end());
    cout << s << endl;
    while(next_permutation(s.begin(), s.end()))
        cout << s << endl;
}

int main() {
    permutations("abc");
    return 0;
} 
```

现在，`next_permutation`可以相当简单地实现。从字符串的末尾开始，向后迭代，直到找到一个`x`小于下一个元素的元素。`x`与大于字符串其余部分的下一个值交换`x`，然后反转后面的元素。所以，`abcd`变成`abdc`因为`c < d`；`cdba`变成`dabc`since并且我们翻转;`c < d`的最后三个字母 变成了因为和我们交换。`dcba``bdca``cabd``b < d``b``c`

# android - 来自 ListView 的回收视图中的额外空间

> ID：12657226
> 
> 赞同：1
> 
> 时间：2012-09-29T22:55:13.747
> 
> 标签：android, android-layout, android-view

[根据此处的 VerticalTextView 代码](https://stackoverflow.com/questions/1258275/vertical-rotated-label-in-android)（第二个示例） ，我有一个`ListView`使文本垂直的方法。我认为它工作正常，但后来我开始滚动并注意到出现了这些大间隙。我相信这是因为视图回收了确实，但我不知道如何解决它。我的理论是它使用旧视图并更新文本，但不会更新整个视图的大小。有什么想法吗？`ListView`

在左侧您可以看到加载内容时的初始视图，看起来不错！但是，如果我向下滚动一堆并备份，就会发生这种情况。

![初始视图 - 看起来不错！](../Images/8bafe689f5be996fec72240fd5571548.png) ![第二视图 - 看起来很糟糕！](../Images/a4990024eacfbd4608a778f6a680b1e9.png)

为了方便起见，在这里发布`VerticalTextView`代码

```
public class VerticalTextView extends TextView{
   final boolean topDown;

   public VerticalTextView(Context context, AttributeSet attrs){
      super(context, attrs);
      final int gravity = getGravity();
      if(Gravity.isVertical(gravity) && (gravity&Gravity.VERTICAL_GRAVITY_MASK) == Gravity.BOTTOM) {
         setGravity((gravity&Gravity.HORIZONTAL_GRAVITY_MASK) | Gravity.TOP);
         topDown = false;
      }else
         topDown = true;
   }

   @Override
   protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
      super.onMeasure(heightMeasureSpec, widthMeasureSpec);
      setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
   }

   @Override
   protected void onDraw(Canvas canvas){
      TextPaint textPaint = getPaint(); 
      textPaint.setColor(getCurrentTextColor());
      textPaint.drawableState = getDrawableState();

      canvas.save();

      if(topDown){
         canvas.translate(getWidth(), 0);
         canvas.rotate(90);
      }else {
         canvas.translate(0, getHeight());
         canvas.rotate(-90);
      }

      canvas.translate(getCompoundPaddingLeft(), getExtendedPaddingTop());

      getLayout().draw(canvas);
      canvas.restore();
  }
} 
```

编辑：看起来与 MATCH_PARENT 选项有关。如果我将其更改为 WRAP_CONTENT 就可以了。

# flash - 如何使用 Flash Professional 将控制器添加到 swf

> ID：12657231
> 
> 赞同：0
> 
> 时间：2012-09-29T22:56:35.927
> 
> 标签：flash, swfobject, controllers

我已经在网上非常深入地检查了这个答案，但没有成功。我有 flash 专业 cs5.5 并且我创建了一个动画。我希望我导出的 SWF 嵌入到我的新网站的 html 中。这很容易配置发布设置，Flash 将为您创建 html。好吧，简单...

在这些选项中没有控制器选项。“开始时暂停”选项不会在加载时自动播放文件，了解这一点非常有用。但是没有按钮供用户点击和播放。那么......我怎样才能为此添加控制器？

我在这个简单的步骤上花了太长时间......请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:25:09.403

您可以在 Flash 中添加控制器。添加鼠标单击事件以触发动画，或者添加鼠标悬停事件，无论哪种方式。

在 actionscript 中，您可以通过添加按钮和处理程序来做到这一点：

```
myButton.addEventListener(MouseEvent.CLICK, myButtonClick);

function myButtonClick(ev:MouseEvent):void
{
     trace("myButton has been clicked.");
} 
```

示例来自：[http ://experts.ninjacamp.com/2009/01/coding-button-in-actionscript-3.html](http://experts.ninjacamp.com/2009/01/coding-button-in-actionscript-3.html)

或直接在闪存中，如下所示：

[http://help.adobe.com/en_US/as3/components/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fe5.html](http://help.adobe.com/en_US/as3/components/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fe5.html)

# performance - 为什么第二个 LINQ 查询更快？

> ID：12657241
> 
> 赞同：0
> 
> 时间：2012-09-29T22:58:22.293
> 
> 标签：performance, linq

在这段代码中：

```
static bool Spin(int WaitTime)
{
    Console.WriteLine("Running task {0} : thread {1}]",
        Task.CurrentId, Thread.CurrentThread.ManagedThreadId);
    Thread.Sleep(WaitTime);
    return true;
}

public void DemoPLINQLong()
{
    var SomeBigNumber = 1000000;
    var sequence = Enumerable.Range(0, SomeBigNumber);
    var sw = new Stopwatch();
    sw.Start();
    sequence.Where(i => Spin(SomeBigNumber));
    sw.Stop();
    var synchTime = sw.Elapsed;
    sw.Restart();
    sequence.Where(i => Spin(SomeBigNumber));
    sw.Stop();
    var asynchTime = sw.Elapsed;
    Console.WriteLine("Synchronous: {0}  Asynchronous: {1}",
        synchTime.ToString(), asynchTime.ToString());
} 
```

结果一致： 同步：00:00:00.0021800 异步：00:00:00.0000076

为什么第二个 LINQ 查询要快数百倍？是否正在进行某种缓存？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T00:39:11.120

DotNet 在第一次执行任何操作时缓存并创建性能优化；这称为即时环境 (JIT)。在随后调用相同代码时，运行时环境可以重用现有的优化，这就是为什么您经常会看到几乎任何东西的第一次运行都比相同代码的后续运行慢得多。

关于发布的代码的一些旁注：

1.  不确定“同步”和“异步”术语指的是什么；这两个示例都是完全相同的，并且它们没有任何异步。
2.  如果您不知道，由于 LINQ 延迟执行的性质，示例中没有对任何 LINQ 进行评估。如果将示例从: 更改为 ，则可以看到此`sequence.Where(i => Spin(SomeBigNumber))`行为`sequence.Where(i => Spin(SomeBigNumber)).ToList()`。其中，ToList() 将强制评估 LINQ 谓词，并且 Console.WriteLine 将在方法中写入控制台`Spin`。

# expressionengine - 为什么 {entry_date} 输出的日期不正确？

> ID：12657245
> 
> 赞同：0
> 
> 时间：2012-09-29T22:59:52.670
> 
> 标签：expressionengine

我在从同一个频道提取的两个模板中遇到了一个非常奇怪的问题，其中 {entry_date} 变量为它列出的每个条目交替输出今天的日期或明天的日期，具体取决于我正在查看的模板。

我已经验证实际上后端中的每个条目都有适当的单独条目日期，并且 channel:entries 标记正确地按日期降序输出条目，但无论出于何种原因，通过 { entry_date} 标签不正确。

例如，每个条目当前显示的日期为“09/30/2012”，尽管条目是在 24 日和今天之间的不同日期进行的。

我对可能导致这种行为的原因感到有些困惑，因为这是我在基于 EE 构建了 12 个左右的良好站点后第一次遇到这个问题。

我以管理员身份登录，我*认为*这不会引起问题，但我认为值得一提。以下是相关模板代码的示例：

```
{exp:channel:entries channel="orders" limit="30" dynamic="no" author_id="CURRENT_USER" status="open|closed|Completed" orderby="date" sort="desc" show_future_entries="no" }
    <tr>
        <td class="date">{entry_date format="%m/%t/%Y"}</td>
        <td class="orderid"><a href="{path={template_group}/invoice}/{entry_id}">{title}</a></td>
        <td class="total">{order_total}</td>
    </tr>
{/exp:channel:entries} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:29:59.210

在您的 {entry_date} 标记中，您有 %t，它输出一个月中的天数。我相信你想要 %d 或 %D，一个有前导零，另一个没有。

因此，换句话说，它并没有显示该条目是在 9 月 30 日发布的，而只是显示 9 月有 30 天。

# c - 如何使用 formatstring 打印出字符串？

> ID：12657246
> 
> 赞同：0
> 
> 时间：2012-09-29T22:59:59.047
> 
> 标签：c, security, format-string

我正在阅读有关格式字符串漏洞的教程，以学习如何更安全地编码。到目前为止，我编写的程序如下：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
    char text[100];
    strcpy(text, argv[1]);

    printf(text);
} 
```

我这样运行它：

```
>>> ./foo $(ruby -e 'print "AAAA" + "%08x."*9 + "%x"')
AAAAffe466f4.00000001.f763b1c9.ffe458df.ffe458de.00000000.ffe459c4.ffe45964.00000000.41414141 
```

我可以在末尾看到“41414141”，这是字符串开头的 AAAA。但是，当我像这样使用“%s”时：

```
>>> ./foo $(ruby -e 'print "AAAA" + "%08x."*9 + "%s"') 
```

我得到一个段错误。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:10:38.263

在动态字符串上使用通常是未定义的行为`printf`，因为您不能保证该字符串没有格式说明符。正确的说法是，

```
printf("%s", text); 
```

要不就

```
puts(text); 
```

现在，也就是说，您的第一个示例归结为`printf("%x%x");`. 这当然是 UB，但是这两个`%x`说明符只会让您从堆栈中读取有限的数量（两个字），这将打印垃圾，但只有有限的数量。

另一方面，当您说 时`printf("%s")`，该函数需要一个指针，该指针指向您无法控制的内存区域中*以空字符结尾的字节序列！*本质上，该函数将从堆栈中读取一个字，假装它是一个指针，然后读取该值指向的内存——这几乎肯定会导致分段错误，因为您不允许通过以下方式访问大多数内存地址默认。即使地址指向您被允许访问的内存，也没有理由很快就会出现零字节，因此您很可能只是跑出页面并进入非法内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:13:08.120

问题是，此时，您在堆栈上达到原始 AAAA；但是，说明`%s`符需要一个*指向*字符串的指针，即 AAAA 的地址。您想要执行的操作没有格式字符串说明符，因为在正常执行过程中您不会将字符串直接粘贴为**printf()**的参数；一个想法是`%c%c%c%c`至少将数据打印为字符而不是十六进制值，但这也不起作用，因为 C 中参数的最小大小是**int**，甚至说明`%c`符也适用于**int**大小的参数内存区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:06:57.413

在`test`你有最后`%s`。遇到 a但您没有提供任何 --> segfault时`printf`需要一个-pointer。改为使用或`char``%s``puts``printf("%s", test);`

```
$ ruby -e 'print "AAAA" + "%08x."*9 + "%x"'
AAAA%08x.%08x.%08x.%08x.%08x.%08x.%08x.%08x.%08x.%x

$ ruby -e 'print "AAAA" + "%08x."*9 + "%s"'
AAAA%08x.%08x.%08x.%08x.%08x.%08x.%08x.%08x.%08x.%s 
```

这两个字符串都无效，`printf`因为您没有传递所需的参数。

# ruby-on-rails - RVM 为什么不将 gems 安装到本地项目文件夹？

> ID：12657247
> 
> 赞同：1
> 
> 时间：2012-09-29T23:00:00.053
> 
> 标签：ruby-on-rails, ruby, devise, rvm, bundler

所以这是我的问题：

我有一个项目，我正在尝试在该项目本地安装 Gems。例如，如果我从 Gemfile 安装设计，然后运行捆绑安装，它不会将任何控制器放在项目的控制器目录中。相反，我必须在 RVM 目录中寻找特定 gem 的控制器，将它们复制到我的项目中，然后从那里开始编写我的项目。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:33:31.727

我认为上面的评论回答了您的问题 - 当您将像 Devise 这样的 gem 添加到您的应用程序时，它通常不会将代码直接放入您的应用程序中。有时它会提供一个生成器来安装它的某些部分，但大多数情况下它会更改配置文件，以便 gem 中的代码在启动时被拉入你的应用程序。

您可以要求捆绑程序在应用程序的“供应商”子目录中安装 gem，而不是在主 RVM/Ruby 位置中，并带有`--path`选项。但是您通常只想为生产部署而不是开发这样做。

# c# - C＃。Android 和 NFC

> ID：12657250
> 
> 赞同：0
> 
> 时间：2012-09-29T23:00:41.643
> 
> 标签：c#, android, nfc

我的 Windows 机器上运行了一个 C# 应用程序。该应用程序可以检测到特定的手机（通过蓝牙），并根据手机的存在与否，向用户弹出一条消息。C# 应用程序会定期检查手机是否存在。到现在为止还挺好。

我想在游戏中添加第三个“玩家”，即 NFC 智能卡。

现在，我希望 Android 手机充当中间件；它将接收来自 C#（Windows 机器）应用程序的定期发送的请求，将检查某个智能卡是否已关闭（通过 NFC）并将答案返回给 C# 应用程序。因此，现在 C# 应用程序检查手机和（间接）卡的存在。

我希望Android上的应用程序不断监听蓝牙接口，如果来自C#（windows）应用程序的请求到达，检查卡是否关闭。应将答案（“是”卡在此处 - “否”卡不在此处）应发送回 C# 应用程序。我目前不关心安全或其他任何事情。只有卡的存在。

你认为这可以做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:38:10.713

到目前为止，我还没有使用 NFC-Tech 或 Android，但应该可以。让 C#-Code 不断监听 Android 设备是可以的，就像你说的，你需要你的 android 设备来路由 NFC-Listener。

当 Android 设备检测到 NFC 卡时，应该通过一些自定义方法轻松地将其提供给 C# 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:22:38.537

问题是，Android 中的 NFC 不能那样工作。如果附近有一些卡，它并不是手机正在“检查”。它的事件驱动，而不是轮询。当卡片离手机足够近时，就会触发适当的意图。您的应用程序可以处理它。

至于您的特定问题，解决方案似乎是在每次检测到卡时设置一个标志并通过蓝牙将其提供给 C# 应用程序。请记住，NFC 不会将卡放入接触式读卡器。该卡可能在一秒钟前就在电话附近，但它也可能已经消失了。此外，请记住，NFC 范围很小 - 您几乎必须用卡触摸手机。

在处理 NFC 意图时，请查看[http://developer.android.com/guide/topics/connectivity/nfc/nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)和[http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc。 html](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html)

# php - 带有大循环的空白页

> ID：12657252
> 
> 赞同：0
> 
> 时间：2012-09-29T23:01:06.387
> 
> 标签：php, mysql

我正在对具有超过 20MM 条目的数据库进行查询，这意味着我将查询分成几个较小的查询。

问题是如果我尝试获取页面未加载的 20MM 条目，并显示一个空白屏幕，没有标题和内容。但是，如果我获取 5MM 条目，页面会正确加载，并显示内容：

这是我的代码

```
for($n=0; $n<20000000; $n=$n+500000){
    $m=500000;
$query = "SELECT * FROM user_likes LIMIT ". $n .",". $m; 
//echo $query;
$result = mysql_query($query) or die(mysql_error());

// craete arrays
while($row = mysql_fetch_array($result)){
    set_time_limit(0);
    $like[$row['name']]=$like[$row['name']]+1;
    if($like[$row['name']]==375) $likes375 ++; 

}

}

// print the size
echo count($like)."<br>";
echo "375: ".$likes375; 
```

如果有人可以帮助我，我将不胜感激。谢谢

**编辑：**

添加后`error_reporting(E_ALL);`显示此通知：MySQL 服务器已消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:02:49.427

这样做的原因是因为当 MySQL 正在通过其索引查找您的结果时，您的页面将是空白的。一段时间后，这将超时（取决于您的设置）。这就是为什么在较小的查询上不会发生这种情况的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:06:37.127

这是由于 php 脚本的执行时间限制，默认情况下 php 脚本将在超时之前运行总共 45 秒...

之后就用这个`<?php`

```
set_time_limit(0); // 0 means unlimited 
```

*   但不建议使用它，更好地在数据库和 php 代码逻辑上改进你的逻辑。

编辑：

尝试通过执行以下操作专门为此文件设置错误日志：

```
ini_set("log_errors" , "1");
ini_set("error_log" , "eorrors.txt");
ini_set("display_errors" , "0"); 
```

# mysql - 未知的复合列名称

> ID：12657255
> 
> 赞同：1
> 
> 时间：2012-09-29T23:01:47.460
> 
> 标签：mysql, sql

我有一个包含类别信息的表格。

该表有一个字段来标记父类别和子类别。

我试图通过查询列出父类别，然后列出其子类别。

我尝试了类似的东西

```
SELECT 
  CategoryID.categories as ParentID,
  CategoryName.categories AS ParentName, 
  parents.* 
FROM 
  categories AS parents LEFT JOIN categories AS child 
    ON child.Parent = parents.ParentID 
```

但不幸的是，它对我不起作用。它给了我一个奇怪的错误。

```
[SQL] SELECT CategoryID.categories as ParentID, CategoryName.categories 
AS ParentName, parents.* FROM categories as parents LEFT JOIN categories as child on child.Parent = parents.ParentID

[Err] 1054 - Unknown column 'CategoryID.categories' in 'field list' 
```

我确信所有字段名称都是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:25:11.750

首先，数据库引擎读取列 [table].[column]，而不是相反。所以它不会理解 CategoryID.categories 是什么 - 没有名为 CategoryID 的表。

你这样定义你的表

```
 FROM categories AS parents 
LEFT JOIN categories AS child 
```

所以你需要使用你给他们的名字来引用他们。IE

```
SELECT
      parents.CategoryId as ParentId,
      child.CategoryId as ChildId,
      ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:06:32.717

尝试

```
SELECT
  parents.CategoryId AS ParentId,
  parents.CategoryName AS ParentName,
  parents.* -- < this is probably child.*
FROM
   categories AS child LEFT JOIN categories AS parents
     ON child.parent = parents.CategoryId 
```

SQL 的命名约定是 [table].[column]。您首先使用的是列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:36:33.053

在`SELECT`你下面写`CategoryID.categories`和`CategoryName.categories`...规则是写成*`alias name.field name`*。

因此你得到错误`Unknown column 'CategoryID.categories' in 'field list'`。

我建议你试试这样 -

```
SELECT parent.CategoryID as ParentCategory, parent.CategoryName as ParentCatName,
     child.CategoryID as ChdCategory, child.CategoryName as ChdCatName
FROM categories AS parents LEFT JOIN categories AS child 
     ON child.Parent = parents.ParentID 
```

你也可以在这里查找：[mysql joins with alias](http://www.w3resource.com/mysql/advance-query-in-mysql/inner-join-with-alias.php)

# ruby - 我可以只使用 App Token 将图片发布到用户的墙上吗？

> ID：12657257
> 
> 赞同：0
> 
> 时间：2012-09-29T23:01:58.843
> 
> 标签：ruby, facebook, sinatra, koala

我正在使用 sinatra 和 Koala 开发 Facebook 应用程序。我想知道是否可以仅使用 App Token 发布到用户的墙上（图片，而不仅仅是文本）。

我有用户的权限，但仍然得到一个错误：

```
@graph = Koala::Facebook::API.new("MYAPPTOKEN")
@graph.put_picture("http://path.to/image", {:message => "ermargherd"}, user_facebook_id) 
```

```
Koala::Facebook::APIError - OAuthException: A user access token is required to request this resource. 
```

更新用户状态很简单，但是怎么放图片呢？

谢谢

# php - 通过 iPhone5 发送短信

> ID：12657262
> 
> 赞同：0
> 
> 时间：2012-09-29T23:02:40.110
> 
> 标签：php, iphone, sms

> **可能重复：**
> [如何在 iPhone 上以编程方式发送短信？](https://stackoverflow.com/questions/10848/how-to-programmatically-send-sms-on-the-iphone)

有没有人成功地通过自己的 iPhone5 使用 php 脚本或任何东西（以编程方式）发送 SMS 以及如何？Iphone4 似乎缺乏对无需越狱的程序化发送的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:04:28.680

这不是您可以通过 webkit 触发的，这是 PHP 与 iPhone 交互的唯一方式。至于发送短信，您始终可以使用[电子邮件网关](http://en.wikipedia.org/wiki/List_of_SMS_gateways)（您需要知道您尝试向其发送消息的号码的运营商），或者您可以使用[Twilio](http://www.twilio.com/sms)之类的东西来发送（和回复）短信非常容易（甚至来自 PHP）。

# php - 如何以某种方式订购 ID？

> ID：12657264
> 
> 赞同：-3
> 
> 时间：2012-09-29T23:02:49.287
> 
> 标签：php

我正在尝试从最高到最低订购某个 ID。

说，我有5个身份证。

1 2 3 4 5

我正在尝试让它订购我最近/最高的 ID。

喜欢，

5 4 3 2 1

这是“发布”它的代码（它是用于博客的，顺便说一句）

```
$post = mysql_query("SELECT * FROM blog ORDER BY id") or die(mysql_error()); 
```

我确定有办法，但不能很好地理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:24:08.737

在您的 MySQL 语句中执行此操作可能是最简单的，因此您将关键字添加`DESC`到查询的末尾，将其更改为

```
SELECT * FROM blog ORDER BY id DESC 
```

将`DESC`(for "descending") 关键字添加到`ORDER BY`子句将意味着 SQL 将按照最高值在前和最低值在最后对它们进行排序，这与默认行为（可以使用`ASC`关键字指定）形成对比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:04:44.057

您应该查看`arsort()`PHP 手册中的相关函数：[http ://www.php.net/manual/en/function.arsort.php](http://www.php.net/manual/en/function.arsort.php)

该答案假设您已将值放入数组中：`$foo[] = { 1, 3, 4, 2, 5 };`但是，观看此问题的人们的普遍看法是，您没有提供有关您的情况的足够信息来正确回答问题。我能理解这种观点。通常，您应该包含一段与您的特定问题相关的源代码。否则，您可能会被否决而不是给出正确的答案。这也是向我们展示您不仅仅是让 StackOverflow 为您完成作业的好方法。:)

在 MySQL 中，您的语句应包含`DESC`“descending”的关键字：

```
$post = mysql_query("SELECT * FROM blog ORDER BY id DESC") or die(mysql_error()); 
```

# html - 避免子 div 中的父 div 属性

> ID：12657269
> 
> 赞同：0
> 
> 时间：2012-09-29T23:04:12.857
> 
> 标签：html, css

我正在使用以下代码来居中对齐我的网页，

```
#parent{
      margin:0 auto;
      width: 960px;  
}
<div id="parent">
          <!--more code goes here-->
</div> 
```

属性已移动到所有子`div's`元素，导致它们居中对齐。我不是`CSS`编码员，但我记得有一个技巧可以让父`div`元素只粘在父元素上`div`。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:07:23.077

```
#parent{
    margin: 0 auto;
    width: 960px;  
}

#parent * {
    margin: 0;
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:07:20.853

```
#parent{
      margin:0 auto;
      width: 960px;  
}
#child{
      margin:0;
      width: 960px;  
}
<div id="parent">
<div id="child">
          <!--more code goes here-->
</div>
</div> 
```

会工作的，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:39:26.777

和属性*不*`margin`被继承（除了通过使用值）。但是，默认情况下，内部元素会在视觉上显示在外部元素中，因此看起来它可能继承了这些属性。实际上，eg是 0（默认情况下），但这意味着元素从与其父元素相同的水平位置开始。同样，对于没有设置宽度的块元素，这意味着可用的水平空间。`width`*`inherit``margin-left``width``auto`*

 *解决问题的方法取决于问题所在。这些属性不存在继承问题。但是，如果您希望使居中元素的子元素从浏览器窗口的最左侧开始，您需要在其上设置负边距或使用绝对定位。

对于许多*其他*属性，例如`color`，如果该属性未在元素本身上设置，则该元素会从其父元素继承该属性。如果不需要继承，请在内部元素上设置属性。没有诀窍；这就是 CSS 的工作原理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T23:08:04.443

为了避免让孩子继承财产，我通常会做的是让一个父母有两个孩子。我为每个孩子制作相同的 div。然后，我为其中一个 div 提供您不希望其他孩子拥有的属性，例如`opacity`或其他。之后，我将常规子布局 div 和内容放入子编号 2。这样，不需要的属性成为兄弟属性，而不是继承。*

# java - 在我的 .jar 中读取文本文件

> ID：12657280
> 
> 赞同：1
> 
> 时间：2012-09-29T23:05:16.367
> 
> 标签：java, io, inputstream, bufferedreader

假设我正在制作一个程序，该程序需要在我的 .jar 文件中复制 .txt 文件中的所有行。它在包`program.files`中，名为 text.txt。我一直在寻找整个互联网，我找不到我要找的东西。我认为这个想法：

```
public String readSpecificFromJar(String dir, int line) {
    String read = null;
    try {
        InputStream in = getClass().getResourceAsStream(dir);
        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(in));

        /**
         * declare string variable and prime the read
         */
        read = bufferedReader.readLine();

        for (int i = 1; i < line; i++) {
            read = bufferedReader.readLine();
        }

        bufferedReader.close();
    } catch (IOException ioexception) {
        Dialogs.fail("Could not read txt file from the JAR!!! Error Code: 06");
    }

    return read;
} 
```

会工作，但我试过了，它给了我各种各样的错误。我认为问题在于声明`InputStream in`它希望文件使用 Main 方法的方式。我将如何改变这一点，所以事实并非如此？提前致谢！

编辑：由于一些混乱，我想澄清这一点。`dir`对于我正在输入的字符串`files/text.txt`。它不会工作。我该如何解决？

编辑2：好的，我觉得问题没有解决，而且我有点生气，主要是因为我很累。适用于不同程序的代码在上面，其中`dir`很简单`"text.txt"`

这对我正在做的事情不起作用，我不知道为什么。再次，文件在类路径中，所以`dir`只有`"text.txt"`. 我希望我的 .txt 文件是`"files/text.txt"`. 我该怎么做呢？

编辑 3：我不知道我是否提到过，但我的 .txt 文件在我的 jar 内。只是为了消除混乱。所以真的，.jar 文件的路径应该无关紧要，因为我不应该用 .jar 输入它`dir`。此外，主类在包`main`中，.txt 文件在包中，`files`都在同一个名为`copy`. 另外，我尝试将 txt 文件移动到与类相同的包中`main`，也没有用。

编辑 4：顺便说一下，保存从 jar 读取方法的包是`IO`. 因为类`io`在包里面`IO`。我的所有文件（例如图像和 txt）都在包中`files`。只是想我清楚了。我尝试将 txt 文件移动到`io`类的包中，并且有效，但如果它在任何其他包中，即使我在其中包含包名`dir`也不会工作。关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:09:39.347

~~该`.txt`文件应~~**位于与您的类文件所在的目录相同**`dir`的根目录中。

 *** * *

> 编辑：由于一些混乱，我想澄清这一点。对于字符串目录，我正在输入文件/text.txt。它不会工作。我该如何解决？

类的路径是什么？（包含 readSpecificFromJar() 的类）如果`.class`文件和`.txt`文件都在同一个目录中，那么你应该这样：

```
dir = "text.txt"; 
```

* * *

> 编辑 4：顺便说一下，保存从 jar 读取方法的包是 IO。因为类 io 在包 IO 中。我的所有文件（例如图像和 txt）都在包文件中。只是想我清楚了。我尝试将 txt 文件移动到 io 类的包中，这很有效，但如果它在任何其他包中，即使我在目录中包含包名，它也不会工作。关于为什么的任何想法？

试试这个：

```
dir = "../files/text.txt"; 
```

如果您的结构如下，我相信这会起作用：

```
 javaApp.jar
        |
   _____|_____
  |           |
files         IO
  |           |
  |           |
text.txt   io.class 
```**

# java - 以编程方式创建休眠析取查询

> ID：12657283
> 
> 赞同：1
> 
> 时间：2012-09-29T23:06:22.943
> 
> 标签：java, hibernate

我有一段 java 代码硬编码一个看起来像这样的休眠析取查询

```
session = HibernateUtils.beginTransaction("outpatient");
        Criteria criteria = session.createCriteria(AugmentToken.class);
        session.beginTransaction();
        if (type == Constants.ICD9CPT) {
            criteria.add(Restrictions.disjunction()
                    .add(Restrictions.eq("codeType", "d"))
                    .add(Restrictions.eq("codeType", "p"))
                    .add(Restrictions.eq("codeType", "c")));
        } else if (type == Constants.EM) {
            criteria.add(Restrictions.disjunction()
                    .add(Restrictions.eq("codeType", "eros"))
                    .add(Restrictions.eq("codeType", "ehpi"))
                    .add(Restrictions.eq("codeType", "epe")));
        } 
```

但这不是很优雅的代码。我想做的是将一组代码类型传递给一个方法，并动态构造分词条件。我查看的每个网站都提供了类似于上面的析取查询示例，但这对我不起作用，因为我不想硬编码标准的限制构造，因为代码类型的数量可能会有所不同。

我该怎么做呢？

谢谢，

艾略特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:45:29.447

我想我想通了。您将析取创建为变量，然后依次添加。
具体来说：

```
 String [] codeTypes = new String[3];
 codeTyes[0]="d";
 codeTypes[1]="p";
 codetypes[2]="c";
 /* note the above would normally be passed into the method containing the code below */
 Criteria criteria = session.createCriteria(AugmentToken.class);
    session.beginTransaction();
 Disjunction disjunction = Restrictions.disjunction();
 for (int x = 0; x < codeTypes.length; x++ ) {
  disjucntion.add(Restrictions.eq("codeType",codeTypes[x]);
 }
 criteria.add(disjunction); 
```

我在第 214 页的开始休眠中找到了答案。这本书可从 books.google.com 访问。

# android - android sqlite：获取错误的值

> ID：12657286
> 
> 赞同：1
> 
> 时间：2012-09-29T23:06:42.560
> 
> 标签：android, sqlite

目前，我在使用 sqlite 数据库的 android 中遇到了很多麻烦。这一次，真的很奇怪。

每次我进入某个活动时，我都想显示最近的三个条目，例如“团队 1 与团队 2 目标 - 目标”。奇怪的是，数据库返回了错误的值。让我们从当前的数据库内容开始：

![在此处输入图像描述](../Images/eb1190b2e0e28ecaec6569953dc7f6bc.png)

对我的问题很重要的是列“id”、“goals1”和“goals2”。现在如您所见，最近的三场比赛是“4: dfsadf vs. asf 3-2”、“3: df vs. as 3-2”和“2: dfa vs. dfas 2-0”。在我的活动中，显示以下内容：

![在此处输入图像描述](../Images/436a7e72607188a6ca6c83a1a72751e7.png)

如您所见，客队目标的目标是错误的（并且条目的 ID 似乎设置为客场目标）。我这样设置这三个按钮的文本：

```
entries = datasource.getLatestFootballEntry(challengeName);
button = (Button) findViewById(R.id.bt_overview_latest1);
            entry = entries.elementAt(0);
            buttonText = entry.date + ": " + entry.team1 + " vs. " + entry.team2 + " " + entry.goals1 + "-" + entry.goals2;
            button.setText(buttonText);
            button.setClickable(true);

            button = (Button) findViewById(R.id.bt_overview_latest2);
            entry = entries.elementAt(1);
            buttonText = entry.date + ": " + entry.team1 + " vs. " + entry.team2 + " " + entry.goals1 + "-" + entry.goals2;
            button.setText(buttonText);
            button.setClickable(true);

            button = (Button) findViewById(R.id.bt_overview_latest3);
            entry = entries.elementAt(2);
            buttonText = entry.date + ": " + entry.team1 + " vs. " + entry.team2 + " " + entry.goals1 + "-" + entry.goals2;
            button.setText(buttonText);
            button.setClickable(true); 
```

在这里，我得到了具体的条目：

```
public Vector<FootballEntry> getLatestFootballEntry(String challengeName){
        Vector<FootballEntry> entries = new Vector<FootballEntry>();
        Cursor cursor = database.query(CustomSQLiteHelper.TABLE_FOOTBALL, allColumns2, null, null, null, null, null);
        cursor.moveToLast();
        int i=0;
        while(i<3 && !cursor.isBeforeFirst()){
            if(checkIfCorrectChallengeName(cursor, challengeName)){
                entries.add(cursorToFootballEntry(cursor));
                i++;
            }
            cursor.moveToPrevious();
        }
        return entries;
    } 
```

现在奇怪的部分来了。当我对在按钮上设置文本的方法进行更改时，一切都很好。

```
button = (Button) findViewById(R.id.bt_overview_latest1);
            datasource.open();
            entry = datasource.getSpecificFootballEntry(entries.elementAt(0).id);
            datasource.close();
            buttonText = entry.date + ": " + entry.team1 + " vs. " + entry.team2 + " " + entry.goals1 + "-" + entry.goals2;
            button.setText(buttonText);
            button.setClickable(true); 
```

现在显示

![在此处输入图像描述](../Images/2f70aec1a60cbf064573e92ff7a780d0.png)

这是我的 cursorToFootballEntry 方法

```
private FootballEntry cursorToFootballEntry(Cursor cursor){
    FootballEntry entry = new FootballEntry();
    entry.id = cursor.getLong(0);
    entry.challengeName = cursor.getString(1);
    entry.date = cursor.getString(2);
    entry.home = cursor.getInt(3);
    entry.platform = cursor.getString(4);
    entry.team1 = cursor.getString(5);
    entry.stars1 = cursor.getDouble(6);
    entry.team2 = cursor.getString(7);
    entry.stars2 = cursor.getDouble(8);
    entry.goals1 = cursor.getInt(9);
    Log.i("dfasdf", "IN CURSOR TO FOOENRTY  " + cursor.getInt(9) + "-" + cursor.getInt(10) + "   id: " + cursor.getLong(0));
    entry.goals2 = cursor.getInt(10);
    entry.finished = cursor.getInt(11);
    return entry;
} 
```

如您所见，我将一些信息打印到日志中（即团队目标的两个值）。输出是

```
09-29 22:50:18.191: I/dfasdf(7039): IN CURSOR TO FOOENRTY  3-4   id: 4
09-29 22:50:18.191: I/dfasdf(7039): IN CURSOR TO FOOENRTY  3-3   id: 3
09-29 22:50:18.201: I/dfasdf(7039): IN CURSOR TO FOOENRTY  2-2   id: 2
09-29 22:50:18.241: I/dfasdf(7039): IN CURSOR TO FOOENRTY  3-2   id: 4 
```

所以基本上，ID为4的条目被读出两次，但有两个不同的客场进球值。什么会导致这种情况？我的意思是，我一次获得3场比赛还是一场比赛获得3次没有区别，只要它们是相同的比赛，显然必须是（看id）。获得单个游戏总是会返回正确的值。如果我得到所有游戏（需要在不同的活动中），也会发生同样的事情。在数据库创建声明中，只有一个值设置为“autoincrement”，并且是_id，没有别的。

现在为了“证明”这一点，我输入了一个新条目，得分 1-0：以下是显示的（设置文本的第二个变体，意味着第一个是正确的）

![在此处输入图像描述](../Images/0a739e3a794b2ea18cf533b829f8008e.png)

日志

```
09-29 23:02:13.281: I/dfasdf(7039): IN CURSOR TO FOOENRTY  1-5   id: 5
09-29 23:02:13.291: I/dfasdf(7039): IN CURSOR TO FOOENRTY  3-4   id: 4
09-29 23:02:13.291: I/dfasdf(7039): IN CURSOR TO FOOENRTY  3-3   id: 3
09-29 23:02:13.311: I/dfasdf(7039): IN CURSOR TO FOOENRTY  1-0   id: 5 
```

**编辑**：当然，一个解决方案是只获取最新游戏的 ID，并分别获取它们，但我的问题的动机更多是为了理解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:47:05.340

通过光标向后移动似乎不起作用。

但是，如果您没有明确指定排序，则无法保证记录以任何特定顺序返回，因此修改查询以使其准确返回您想要的记录会更加容易：

```
cursor = database.query(CustomSQLiteHelper.TABLE_FOOTBALL,
                        allColumns2,
                        null, null,
                        null, null,
                        "id DESC",  // return largest id values first
                        "3");       // return no more than 3 records
cursor.moveToFirst();
while (!cursor.isAfterLast()) {
    ...
    cursor.moveToNext();
} 
```

# asp.net - 记录 4 网络未记录到文件

> ID：12657291
> 
> 赞同：3
> 
> 时间：2012-09-29T23:07:12.850
> 
> 标签：asp.net, logging, web-config, log4net

可能是一个非常简单的设置，但我尝试设置 Log4Net。在我的 web.config 中，我有：

```
<log4net>
    <appender name="File" type="log4net.Appender.RollingFileAppender">
      <file value="Logs\\Log4Net.log" />
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <datePattern value="yyyyMMdd-HHmm" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>

    <logger name="File">
      <level value="All" />
      <appender-ref ref="LogFileAppender" />
    </logger>
    <root>
      <level value="ALL"/>
      <appender-ref ref="FileAppender"/>
    </root>
  </log4net> 
```

我已将以下内容添加到我的配置部分：

```
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections> 
```

global.asax 中的以下内容：

```
 log4net.Config.XmlConfigurator.Configure(); 
```

以下是我的 default.aspx：

```
ILog alog = log4net.LogManager.GetLogger(typeof(_Default));
log4net.ILog logger = log4net.LogManager.GetLogger("File");

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        SetupSeo(); 
    }
    alog.Error("this test");
    logger.Error("Front page loaded for ip " + Request.UserHostAddress);
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T23:15:59.677

我想这是一个权限问题。相关目录没有足够的权限，因此 ASP.NET 可以对其进行写入。

要验证这一点，请通过将以下项目添加到 webconfig 中的`<appSettings>`部分来启用 log4net 内部调试。

```
<add key="log4net.Internal.Debug" value="true"/> 
```

现在也将以下内容添加到 webconfig

```
<system.diagnostics>
  <trace autoflush="true">
    <listeners>
      <add 
        name="textWriterTraceListener" 
        type="System.Diagnostics.TextWriterTraceListener" 
        initializeData="C:\myLogFolder\log4net.txt" />
    </listeners>
  </trace>
</system.diagnostics> 
```

确保 C 驱动器中的 myLogFolder 文件夹具有权限，以便 ASP.NET 可以写入该文件夹。这会将内部调试消息写入此文件。运行应用程序，看看会发生什么。

# python - 模型增长时保持 QTableView 滚动到最后一行

> ID：12657294
> 
> 赞同：4
> 
> 时间：2012-09-29T23:07:25.910
> 
> 标签：python, qt, pyqt, qtableview, autoscroll

我在 pyqt 应用程序中有一个 QTableView。我不断地将行附加到底层模型。而我想要的是不断滚动到最后一行的视图（这种行为称为“自动滚动”吗？）。但取而代之的是，视图根本不滚动（自动）并停留在其位置。

我可以以某种方式启用这种自动滚动行为，还是需要编写一些代码来实现它？

干杯，沃尔夫冈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:04:57.820

没有默认的自动滚动功能，但您可以获得相对简单的行为。`rowsInserted`当您插入/追加行时，您的模型将发出。您可以连接到该信号并调用`scrollToBottom`您的视图。

不过有一个问题。View 需要自行调整，因为它不会在触发时*立即将项目置于底部。*在 a 中`rowsInserted`调用解决了这个问题，因为会等到没有待处理的事件（比如更新视图）。`scrollToBottom``QTimer.singleShot``QTimer`

假设模型存储为`self.model`并且视图为`self.view`，这就是它的外观：

```
self.model.rowsInserted.connect(self.autoScroll) 
```

和`autoScroll`方法：

```
def autoScroll(self):
    QtCore.QTimer.singleShot(0, self.view.scrollToBottom) 
```

或者，如果您不希望为此使用单独的方法：

```
self.model.rowsInserted.connect(lambda: QtCore.QTimer.singleShot(0, self.view.scrollToBottom)) 
```

# ruby-on-rails - 如何邀请新用户到 Rails 中的特定子域

> ID：12657295
> 
> 赞同：1
> 
> 时间：2012-09-29T23:07:35.190
> 
> 标签：ruby-on-rails, devise, subdomain, invite, invitation

我喜欢 Turbinehq 如何让您一步完成为您的公司创建管理员帐户和子域。测试它，我发现在为他们的公司创建子域后，他们可以通过电子邮件邀请用户。对邀请采取行动的用户自动成为同一公司的一部分。

我想在 Rails 中模拟这个过程。我尝试[了这个](http://railsapps.github.com/tutorial-rails-subdomains.html)入门应用程序，但它的限制不够。我遇到的第一个问题是关于如何设计下面的表格：

*   它是一个嵌套资源吗？--比如说一个`Company`具有`accepts_nested_attributes_for :users`...的模型？
*   有没有更好的方法来设置它？
*   如果这确实是设置，如何为所有该“管理员”用户的受邀者预先设置公司名称？
*   我正在尝试做的事情有什么流行的指南吗？

![TurbineHQ 的帐户创建视图](../Images/3c828c3e045e32eb5433d2effa09d64e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:01:50.453

几天前我遇到了同样的问题。我找到了一个很好的解决方案！

```
# models/company.rb
class Company < ActiveRecord::Base
  has_many :users, :dependent => :destroy

  validates :subdomain, :presence   => true,
                        :uniqueness => { :case_sensitive => false },
                        :length     => { :within => 4..20 },
                        :format     => { :with => /^[a-z0-9]+$/i }

  attr_accessible :name, :subdomain

end

# ======================================================================================

# models/user.rb
class User < ActiveRecord::Base
  before_create :create_company
  belongs_to :company

  validates :subdomain, :on         => :create,
                        :presence   => true,
                        :length     => { :within => 4..20 },
                        :format     => { :with => /^[a-z0-9]+$/i }

  validates_presence_of  :nome

  devise :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable,
         :authentication_keys => [:subdomain]

  attr_accessor   :subdomain # VIRTUAL ATTRIBUTE
  attr_accessible :name, :email, :subdomain, :password, :password_confirmation,
                  :remember_me, :loginable_token

  private

    def create_company
     self.company = Company.create!(:subdomain => self.subdomain)
    end

end

# ======================================================================================

# example of registration form
= simple_form_for(resource, :as => resource_name, :url =>    registration_path(resource_name)) do |f|
  = devise_error_messages!

  %fieldset
    .clearfix= f.input :name,       :required => true
    .clearfix= f.input :email,      :required => true
    .clearfix= f.input :subdomain,  :required => true
    .clearfix= f.input :password,   :required => true, :input_html => {:minlength => 6}
    .clearfix= f.input :password_confirmation, :input_html => {:minlength => 6}

    .form-actions
      = f.submit t('labels.signup'), :class => 'btn btn-success'
    %p= render "links" 
```

希望能帮助到你..

# java - 循环编号后添加标签

> ID：12657297
> 
> 赞同：0
> 
> 时间：2012-09-29T23:07:51.437
> 
> 标签：java, sorting, for-loop

我制作了这段代码来计算数字：

```
import java.util.Random;

public class Sorting {
private double[] player;
private int k=5;
private int j=5;

public void sort(){
    player = new double[k];
    for(int i=1;i<k;i++){
        double tempp ;
            for(i=1;i<j;i++){
                tempp = Math.random() * i;
                player[i]=tempp;
                System.out.println("Result "+i+"="+player[i]);
            }
        }
} 

public static void main(String []args){
    Sorting k=new Sorting();
    k.sort();
}} 
```

结果是：

```
Result 1=0.4529689730194949
Result 2=0.09643822768644617
Result 3=1.841047494651026
Result 4=2.1807153629323777 
```

现在，我想添加一个标签，从最大到最小的结果编号标记为 EXCELLENT、VERY GOOD、GOOD 和 BAD，如下所示：

```
Result 1=0.4529689730194949 labeled GOOD
Result 2=0.09643822768644617 labeled BAD
Result 3=1.841047494651026 labeled VERY GOOD
Result 4=2.1807153629323777 labeled EXCELLENT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:20:18.790

```
public class Sorting
{
    private double[] player;
    private int k=5;
    private int j=5;

    String[] rating = {"BAD", "GOOD", "VERY GOOD", "EXCELENT"};

    public void sort()
    {
        player = new double[k];

        for(int i=1; i<k; i++)
        {
            double tempp;
            for(i=1; i<j; i++) // i should probably be zero since your array starts on value 0, not 1.
            {
                tempp = Math.random() * i;
                player[i]=tempp;
                System.out.println("Result " + i + " = " + player[i] + " Rating is " + rating[(int)player[i]]);
            }
        }
    } 

    public static void main(String[] args)
    {
        Sorting k = new Sorting();
        k.sort();
    }
} 
```

你的代码看起来有点奇怪，但我解决了你问的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:51:38.557

TreeSet 默认情况下已经对数字进行了升序排序。

这是我的版本：

样本输出：

**结果：0.12754837127918317 => 坏
结果：0.7956890627771006 => 优秀
结果：0.3123868511945034 => 好
结果：0.6332109887264882 => 非常好**

```
public class FourRandomNumbersEvaluator {

    private TreeSet<Double> numbers;

    private Map<Double,Evaluation> numbersWithEvaluations = new HashMap<Double,Evaluation>();

    private enum Evaluation {BAD, GOOD, VERY_GOOD, EXCELLENT}

    private static final int NUMBER_OF_GENERATED_NUMBERS = 4;

    public FourRandomNumbersEvaluator(TreeSet<Double> numbers) {
        if(numbers == null || numbers.size() != 4){
            throw new IllegalArgumentException("your have to provide exactly 4 numbers");
        }
        this.numbers = numbers;
    }

    public static void main(String[] args) {
        FourRandomNumbersEvaluator evaluator = new FourRandomNumbersEvaluator(generateNumbers());
        evaluator.evaluate();
        evaluator.printNumbersWithEvaluations();
    }

    private static TreeSet<Double> generateNumbers() {
        TreeSet<Double> numbers = new TreeSet<Double>();
        while(numbers.size() < NUMBER_OF_GENERATED_NUMBERS){
            double number = Math.random();
            if(numberNotAlreadyExisting(numbers, number)){
                numbers.add(number);
            }
        }
        return numbers;
    }

    private static boolean numberNotAlreadyExisting(TreeSet<Double> numbers, double number) {
        return !numbers.contains(number);
    }

    public void evaluate() {
        int i = 0;
        for(Double number : numbers){
            numbersWithEvaluations.put(number, Evaluation.values()[i++]);
        }
    }

    private void printNumbersWithEvaluations(){
        for(Map.Entry<Double,Evaluation> numberWithEvaluation : numbersWithEvaluations.entrySet())
        System.out.println("Result: "+  numberWithEvaluation.getKey() + " => " + numberWithEvaluation.getValue());
    }
} 
```

# visual-studio - 加载解决方案时如何自动切换到 TFS？

> ID：12657303
> 
> 赞同：6
> 
> 时间：2012-09-29T23:08:36.320
> 
> 标签：visual-studio, version-control, tfs, visual-studio-2012

我对源代码控制插件有一个烦人的问题......我正在使用 VS2012，我在 TFS 上有一些项目，在 SVN 上有一些项目（使用 AnkhSVN）。

当我打开一个 SVN 解决方案时，VS 无缝切换到 AnkhSVN 作为源代码控制插件，这很好。但是，当我打开一个 TFS 解决方案时，它并没有切换回 TFS ......最烦人的效果是自动结帐不起作用。要修复它，我必须卸载解决方案，将源代码管理插件更改为 TFS，然后重新加载解决方案。

这是一个已知问题吗？有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:37:28.560

我想不出一个好的选择。Visual Studio 的那部分设计一次只能使用一个源代码控制系统，我理解你的痛苦。

我想我的第一个问题是为什么你需要两者，但我想在某个地方有一些需要。你可以看到有同样问题的人：

*   [如何在 Visual Studio 2010 中快速切换源代码控制提供程序？](https://stackoverflow.com/questions/6678239/how-to-quickly-switch-source-control-providers-in-visual-studio-2010)

**选项 1：虚拟化**

由于我有一台能够运行 VM 的机器（带有 Hyper-V 的 Windows 8），我将拥有两个 VM，其中一个配置为 TFS，另一个配置为 SVN。不优雅，但它可以让你切换。

**选项 2：注册**

您可以更改注册表中的设置。

[如何：如果安装了两个或更多符合 MSSCCI 的提供程序，则更改源代码控制提供程序](http://support.microsoft.com/kb/319318)

因此，您可以在桌面上存储每个设置的“密钥”文件，并且：

1.  关闭 Visual Studio
2.  运行注册表项
3.  开放式解决方案

虽然丑陋并且需要记住，但这将是本地的最佳选择。

**结论**

没有好的答案，但我确实认为上面的两个选项会让你到达那里。

# c# - 使用 WCFService 在不同的机器上启动程序

> ID：12657307
> 
> 赞同：0
> 
> 时间：2012-09-29T23:09:01.977
> 
> 标签：c#, visual-studio-2010, wcf

我遵循了这两个演练：

*   [http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-wcf-web-service-in.html](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-wcf-web-service-in.html)
*   [http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-consume-web-service-in-cnet.html](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-consume-web-service-in-cnet.html)

机器 X 上的应用程序 X 现在可以向机器 Y 上的应用程序 Y 发送一个字符串，后者将一个字符串返回给 X。

我希望该字符串可以有效地充当在 Y 上运行更大工作的指令。

所以 X 上的客户端真的想发送字符串然后关闭；因为 Y 上的过程需要 10 分钟。目前虽然控制台正在等待 WCFService 返回一个字符串 - 我如何让 X 只发送字符串然后关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:16:48.973

在你的服务接口做这样的事情......

```
[ServiceContract]
public interface IMyService
{
    [OperationContract(IsOneWay=true)]
    void IAmALongRunningMethodAndIDontCareToReturnAnything();
} 
```

这将导致调用方法“IAmALongRunningMethodAndIDontCareToReturnAnything”的客户端立即返回

# java - 计时器（未找到源）

> ID：12657312
> 
> 赞同：-1
> 
> 时间：2012-09-29T23:09:43.590
> 
> 标签：java, timer, timertask

我试图创建一个计时器和一个计时器任务，但我无法让它工作:(

“您的帖子没有太多解释代码部分的上下文；请更清楚地解释您的情况。”？

**错误**

Timer.sched(TimerTask, long, long) 行：不可用
找不到源。

```
Exception in thread "main" java.lang.NullPointerException
at java.util.Timer.sched(Unknown Source)
at java.util.Timer.schedule(Unknown Source)
at Game.<init>(Game.java:42)
at Game.main(Game.java:25) 
```

**游戏.java**

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.*;
import javax.swing.*;
import java.util.*;
import java.util.Timer;
import java.util.TimerTask;
import java.lang.Runnable;

public class Game implements ActionListener {

private static Game hosmos2;
private JFrame frmMain;
private AntiCheat holyanticheat;
private Dimension screen;
//private Engine holyengine;
private int sx, sy;
private Timer timCheat; // My Timer
private TimerTask tmtCheat; // My TimerTask

public static void main(String[] args) throws FileNotFoundException, InterruptedException {

    hosmos2 = new Game();
}

private Game() throws FileNotFoundException, InterruptedException {

    frmMain = new JFrame("Hosmos 2");
    frmMain.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frmMain.setSize(1366, 768);
    screen = Toolkit.getDefaultToolkit().getScreenSize();
    sx = (int) ((screen.getWidth() - frmMain.getWidth()) / 2);
    sy = (int) ((screen.getHeight() - frmMain.getHeight()) / 2);
    frmMain.setLocation(sx, sy);
    holyanticheat = new AntiCheat();
    //holyengine = new Engine();
    timCheat = new Timer(); // Creates my timer
    //frmMain.add(holyengine);
    frmMain.setVisible(true);
    timCheat.schedule(tmtCheat, 500); // Schedule my TimerTask
    Thread.sleep(1000);
    timCheat.cancel();
}

public void actionPerformed(ActionEvent e) {

}

public void tmtCheat() throws IOException { // Void for my TimerTask

    holyanticheat.Detect(); // Runs Detect() in AntiCheat.java
}

} 
```

**反作弊.java**

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.*;
import javax.swing.*;
import java.util.*;

public class AntiCheat {

private BufferedReader highscore;
private DataInputStream dis;
private FileInputStream fis;
private InputStreamReader isr;
private String userscore, realscore;

public static void main(String[] args) {

}

public AntiCheat() throws FileNotFoundException {

    fis = new FileInputStream("data/highscore.hs2");
    dis = new DataInputStream(fis);
    isr = new InputStreamReader(dis);
    highscore = new BufferedReader(isr);
}

public void Detect() throws IOException { // Checks if you have cheated your score

    userscore = highscore.readLine();
    if (!userscore.equals("If you touch this then you won't be able to play noob ;)")) {

        for (int i = 0; i < 1000; i++) {

            realscore = Integer.toString(i);
            for (int j = 0; j < 173; j++) {

                realscore = Integer.toString(realscore.hashCode());
            }
            if (userscore == realscore) {

                break;
            }
            if (i == 999) {

                JOptionPane.showMessageDialog(null, "Du är lika fattig som Malcolm lol.");
                System.exit(0);
            }
        }
    }
    highscore.close();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:24:52.373

您没有初始化`TimerTask`变量`tmtCheat`，因此`NullPointerException`.

如果要执行调用的方法`tmtCheat`，`Timer`可以使用匿名类，或者创建一个`extends TimerTask`.

```
timCheat.schedule(new TimerTask() {
  public void run() {
    // your code
  }
}, 500); 
```

# ruby-on-rails - 在 Rails 中将数组或参数传递到 hstore 范围时出错

> ID：12657316
> 
> 赞同：1
> 
> 时间：2012-09-29T23:10:17.890
> 
> 标签：ruby-on-rails, postgresql, scope, hstore

我正在尝试在我的 Rails 应用程序中的 hstore 列上创建范围。Product 是一个模型， features 是一个 hstore 类型的属性（使用 Postgresql 9.2）。我的范围类定义如下：

```
class Product < ActiveRecord::Base
    scope :with_features, lambda {|features| where("foo_id in (?)", features) 
```

仅当您将单个值作为特征传递时，上述范围才有效。数组抛出错误。如下图所示：

```
Product.with_features('api')
  => [#<Product id: 1, name: "Sample">] 
     # so great success

# now with an array
Product.with_features(['api','mobile'])
  => ActiveRecord::StatementInvalid: PG::Error: ERROR:  argument of WHERE must be type boolean, not type record 
    # so no good, this query will work as usual if features isn't of type hstore 
```

在 Rails 3.2 中，当涉及数组时，似乎对 postgres hstore 类型的支持受到限制（我使用的是[https://github.com/softa/activerecord-postgres-hstore](https://github.com/softa/activerecord-postgres-hstore)）。我一直在尝试使用每个循环的一些解决方案来将 AND 查询附加在一起，但运气不佳。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:42:13.223

这是我想出的一个很好的解决方案：

```
scope :with_features, lambda { |features| 

  #store the composed scope in local variable to build on
  composed_scope = self.scoped

  # if array, then loop through each
  if features.instance_of?(Array)
    features.each do |feature|
      composed_scope = composed_scope.where("features ? :key", :key => feature)
    end

  # otherwise, it's a single string parameter, parse as normal
  else
    composed_scope = composed_scope.where("features ? :key", :key => features)
  end

  # return the newly built composed scope
  composed_scope
} 
```

现在上面的两个示例查询都返回了预期的结果。

# android - 在 Android 4.1 上开发的 Android 应用程序会运行 Android 2.3.2 吗？

> ID：12657317
> 
> 赞同：1
> 
> 时间：2012-09-29T23:10:24.670
> 
> 标签：android, eclipse

今天我开始观察到一些新的错误，它不允许我在 Eclipse 中创建新的 Android 应用程序。它显示“更新工具”，您的工具安装似乎已过时。此向导依赖于随 Android SDK 工具分发的模板......"

我有 android 2.2 API 8，当我开始工作时我认为它是稳定的。有人可以建议我这个错误是什么吗？还是我需要更新到 Android 4.1 API 16？现有项目会在该版本上运行吗？

以下是我尝试更新到 2.3.3 时的错误：

```
[2012-09-29 18:17:22 - SDK Manager] File not found: C:\Program Files (x86)\Android\android-sdk\temp\platform-tools_r14-windows.zip (Access is denied)
[2012-09-29 18:17:23 - SDK Manager] File not found: C:\Program Files (x86)\Android\android-sdk\temp\usb_driver_r07-windows.zip (Access is denied)
[2012-09-29 18:17:24 - SDK Manager] Skipping 'Android SDK Tools, revision 20.0.3'; it depends on 'Android SDK Platform-tools, revision 14' which was not installed.
[2012-09-29 18:18:56 - SDK Manager] File not found: C:\Program Files (x86)\Android\android-sdk\temp\android-2.3.3_r02-linux.zip (Access is denied)
[2012-09-29 18:18:57 - SDK Manager] File not found: C:\Program Files (x86)\Android\android-sdk\temp\samples-2.3.3_r01-linux.zip (Access is denied)
[2012-09-29 18:18:58 - SDK Manager] Skipping 'Google APIs, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'Intel Atom x86 System Image, Android API 10, revision 1'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'Dual Screen APIs, Android API 10, revision 1'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'Real3D, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'ADMIRAL, Android API 10, revision 5'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'ATRIX2, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'Bionic, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'defy+, Android API 10, revision 1'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'Droid4, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'DroidRAZR, Android API 10, revision 5'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'MotorolaPro+, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'MT870, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'MT917, Android API 10, revision 1'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'PHOTON, Android API 10, revision 1'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'XT882, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'XT928, Android API 10, revision 3'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed.
[2012-09-29 18:18:58 - SDK Manager] Skipping 'Sony Xperia Extensions EDK 2.0, Android API 10, revision 2'; it depends on 'SDK Platform Android 2.3.3, API 10, revision 2' which was not installed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:56:22.123

谷歌推荐的最佳做法是使用最新版本的 sdk 版本。

将 targetSdkVersion 设置为最新版本（当前为 16），并将其设置在 project.properties 文件中。这将使您的应用程序针对最新的 android 版本进行优化，并允许您使用最新的类和函数。您还可以获得更完整的 API javadocs 和更多常量。

当然，你需要知道，如果你使用一个只在新版本上支持的函数或类，应用程序会在旧版本上崩溃。常量可以安全使用，因为它们被转换为简单的字符串和值。

这就是为什么你应该在发布应用程序之前运行 Lint，以确保不会发生这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:12:34.300

您可以安全地更新您的 Android SDK 工具，并且仍然支持 Android 2.2 (API 8)。下载 SDK 工具后，您可以选择要开发的平台，并在那里选择 API 8。您为 Android 2.2 开发的任何内容都适用于 Android 4.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:29:07.367

*   右键单击 SDK 管理器
*   选择以管理员身份运行
*   单击是按钮

# php - 显示来自 2 个表的数据，其中一个表具有超过 1 个相同的数据

> ID：12657319
> 
> 赞同：0
> 
> 时间：2012-09-29T23:10:50.013
> 
> 标签：php, mysql

我在我的表中进行了标准化：

从 ：`tb_1`

```
===================================
| id | doc_name | title  | author |
===================================
| 1  | doc1     | title1 | author1|
|    |          |        | author2|
| 2  | doc2     | title2 | author3|
|    |          |        | author4|
=================================== 
```

变得 ：

```
tb_a                            tb_b
=======================       =========================
|id_a|doc_name| title |       |id_b| doc_name| author |
=======================       =========================
| 1  | doc1   | title1|       |  1 | title1  |author1 |
| 2  | doc2   | title2|       |  2 | title1  |author2 |
=======================       |  3 | title2  |author3 |
                              |  4 | title2  |author2 |
                              ========================= 
```

我想显示如下结果：

`doc1 title1 author1 author2`

`doc2 title2 author3 author4`

这是代码：

```
$query = mysql_query(" SELECT tb_a.doc_name, tb_a.title,
                              tb_b.doc_name, tb_b.author
                       FROM tb_a
                       JOIN  tb_b ON tb_a.doc_name = tb_b.doc_name ");
while ($row = mysql_fetch_array($query)) {
   $doc     = $row['doc_name'];
   $title   = $row['title'];
   $author  = $row['author'];

   echo $doc; echo $title ; echo $author;
} 
```

但结果是： `doc1 title1 author1` `doc1 title1 author2` `doc2 title2 author3` `doc2 title2 author4`

请帮助我，非常感谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:37:05.930

所以你正在尝试旋转你的桌子。不知道你想要你的输出，但你可以使用[group_concat()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)因为你使用的是 mysql。

看起来像

```
 SELECT tb1.doc, tb1.title, group_concat(tb2.author)
     FROM tb1
     JOIN tb2 ON tb1.id = tb2.id
 GROUP BY tb1.doc, tb1.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:51:09.390

```
SELECT tb_a.doc_name, tb_a.title, GROUP_CONCAT(tb_b.author) authors
FROM tb_a
JOIN tb_b ON tb_a.title = tb_b.doc_name
GROUP BY tb_a.doc_name, tb_a.title 
```

# c++ - 如何使用 Boost tcp::iostream 指定方案、主机和端口

> ID：12657321
> 
> 赞同：0
> 
> 时间：2012-09-29T23:11:17.163
> 
> 标签：c++, boost, port, boost-asio

我想在使用 Boost ASIO 的`tcp::iostream`类时明确设置方案（http vs https）、主机和端口号。我看到很多例子，其中方案和主机一起使用，但也不与端口一起使用。我得到的印象是端口是自动确定的。但是，我需要明确设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:04:26.660

首先，`iostream`构造函数采用等效于 a 的参数，`resolver::query`正如[文档中明确指出](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_socket_iostream/basic_socket_iostream/overload2.html)的那样。第[一个参数](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/ip__basic_resolver_query/basic_resolver_query/overload3.html)是主机，第二个是服务（也称为端口）

```
basic_resolver_query(
    const std::string & host,
    const std::string & service,
    resolver_query_base::flags resolve_flags = address_configured); 
```

其次，[`boost:asio::ip::tcp::iostream`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/ip__tcp/iostream.html)该类不支持*scheme*，正如类型所暗示的那样，它严格用于 TCP 流。它不执行 SSL 握手或加密，因此没有 HTTPS。如果您需要额外的功能，您需要自己实现它，可能使用[这个问题](https://stackoverflow.com/questions/3668128/how-to-create-a-boost-ssl-iostream)`boost::iostream`中描述的库。

# java - 我可以在一个类中存储一些方法并在另一个活动中使用它们吗？

> ID：12657322
> 
> 赞同：0
> 
> 时间：2012-09-29T23:11:19.770
> 
> 标签：java, android, class, android-activity

我有一个使用大量活动的 Android 应用程序。所有这些活动都包含在每个活动中都相同的方法。我可以将这些方法放入另一个类（仅包含这些方法的类）并在我的活动中需要时访问它们吗？

我考虑将这些方法放在一个类中，然后将该类导入我的活动中。那行得通吗？我可以使用这些方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:14:29.133

是的，您可以创建一个助手类。这可以采用您可以从程序的每个点调用的方法。这些类通常采用静态方法，例如：

```
public class Helper {
   public static int callMeFromTheActivities() {
     //do some work
   }
} 
```

所以你可以从你的活动中调用它，比如：

```
Helper.callMeFromTheActivities(); 
```

# r - 类似 R.cache 但在 RAM 中的东西

> ID：12657336
> 
> 赞同：3
> 
> 时间：2012-09-29T23:14:00.147
> 
> 标签：r

只是想知道是否存在类似**R.cache**包但不是使用硬盘驱动器而是使用 RAM 的东西？

或者 R 中可能存在一些 hack，让**R.cache**包相信它使用硬盘驱动器，但是将它的缓存存储到 RAM 中的某种虚拟驱动器？

我也发现了这个很好的[问题](https://stackoverflow.com/questions/7262485/options-for-caching-memoization-hashing-in-r)并尝试**了 memoise**包，但结果证明它比 R.cache 慢，尽管它适用于 RAM。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T23:37:27.547

也许您可以制作一个[RAM 磁盘](http://en.wikipedia.org/wiki/RAM_drive)并将该驱动器指定为缓存的存储目标，使用`R.cache`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:00:27.347

您可以尝试一下具有[自定义缓存](http://rapporter.github.com/pander/#caching)引擎的[pander函数。](http://rapporter.github.com/pander/)`evals`

有关详细信息，请参阅上面的链接，但简而言之：

*   启用缓存：（`evalsOptions('cache', TRUE)`默认值）
*   你可以设置一个分钟。`eval`应缓存结果的时间（以秒为单位`evalsOptions('cache.time', 0.1)`）：（默认值）
*   指定要存储缓存值和散列的位置（`disk`与 R 相比`environment`）：（`evalsOptions('cache.mode', 'environment')`默认值）

一个简短的例子：

```
> library(pander)

> # first time run
> system.time(evals('sapply(rep(mtcars$hp, 1e3), mean)'))
   user  system elapsed 
 12.269   0.020  12.414 

> # second call
> system.time(evals('sapply(rep(mtcars$hp, 1e3), mean)'))
   user  system elapsed 
  0.003   0.000   0.003 

> # check results any time without recomputing those
> str(evals('sapply(rep(mtcars$hp, 1e3), mean)')[[1]]$result)
 num [1:32000] 110 110 93 110 175 105 245 62 95 123 ...
> str(evals('sapply(rep(mtcars$hp, 1e3), mean)'))
List of 1
 $ :List of 6
  ..$ src   : chr "sapply(rep(mtcars$hp, 1000), mean)"
  ..$ result: num [1:32000] 110 110 93 110 175 105 245 62 95 123 ...
  ..$ output: chr [1:1778] "    [1] 110 110  93 110 175 105 245  62  95 123 123 180 180 180 205 215 230  66" "   [19]  52  65  97 150 150 245 175  66  91 113 264 175 335 109 110 110  93 110" "   [37] 175 105 245  62  95 123 123 180 180 180 205 215 230  66  52  65  97 150" "   [55] 150 245 175  66  91 113 264 175 335 109 110 110  93 110 175 105 245  62" ...
  ..$ type  : chr "numeric"
  ..$ msg   :List of 3
  .. ..$ messages: NULL
  .. ..$ warnings: NULL
  .. ..$ errors  : NULL
  ..$ stdout: NULL
  ..- attr(*, "class")= chr "evals" 
```

# c++ - 聊天应用程序 - 从客户端连接到服务器时出现问题

> ID：12657339
> 
> 赞同：0
> 
> 时间：2012-09-29T23:15:07.633
> 
> 标签：c++, networking, client-server, chat

我编写了一个简单的 C++ 服务器/客户端聊天应用程序。我对能够让多个客户通过服务器（如聊天室）相互交谈很感兴趣。我希望它能够在互联网上工作，而不仅仅是在我的本地网络中。

我无法连接到服务器（服务器在我家的台式机上运行，​​它通过电线连接到调制解调器）。

服务器具有以下套接字地址设置：

```
addr.sin_addr.s_addr = inet_addr("127.0.0.1");
addr.sin_port        = htons(1234);
addr.sin_family      = AF_INET; 
```

客户端具有以下套接字地址设置：

```
addr.sin_addr.s_addr = inet_addr("63.22.45.56");
addr.sin_port        = htons(1234);
addr.sin_family      = AF_INET; 
```

我使用桌面的互联网 WAN IP 地址供客户端连接。我在路由器设置中为 TCP/UDP 转发了“1234”端口。它还指向我桌面的本地 IP 地址（192.168.0.16）

我不确定为什么它无法连接。请随时查看下面我的客户端和服务器代码。

[https://dl.dropbox.com/u/12735155/chat_client.cpp](https://dl.dropbox.com/u/12735155/chat_client.cpp) （注意：这里的套接字地址是127.0.0.1，但忽略它。我已将其更新为63.22.45.56）

[https://dl.dropbox.com/u/12735155/chat_server.cpp](https://dl.dropbox.com/u/12735155/chat_server.cpp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:18:13.967

您应该在代码中指定 192.168.0.16 而不是 127.0.0.1。

这是因为你不想在 localhost 上监听，你想在连接到外部世界的 IP 地址上监听。这就是为什么当您告诉客户端连接到 localhost 时此代码将起作用，但如果您告诉客户端连接到您的 WAN IP 并且连接被路由到外部，它将不起作用。

# django - 仅更新模型中的一个字段时出现django错误

> ID：12657340
> 
> 赞同：1
> 
> 时间：2012-09-29T23:15:13.377
> 
> 标签：django, django-models

我只想更新模型中的一个字段。但是，我收到一个错误。

这是我的模型：

```
class People(models.Model):
    name = models.CharField(max_length=100)
    lastname = models.CharField(max_length=100)

class Salary(models.Model):
    id_of_people=models.ForeignKey(People)
    salary = models.IntegerField(required=False) 
```

在views.py

- 当我尝试这个更新时：

```
def update(request):
a=Salary.objects.get(id_of_people_id=1)
a.salary=500
Salary().save() 
```

我的错误说：

```
IntegrityError  at/update
salary.id_of_people_id may not be NULL 
```

并且回溯表明：

```
Salary().save() 
```

- 当我尝试这个时：

```
def update(request):
a=Salary.objects.get(id_of_people_id=1)
a.salary=500
Salary().save(save_fields=['salary']) 
```

- 我得到这个错误：

```
save() got an unexpected keyword argument 'save_fields' 
```

您能帮我只更新表格中的一个字段吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T23:24:18.853

在这两种情况下，您都需要调用`save`您创建的模型实例，而不是模型类——也就是说，您应该保存`a`，而不是`Salary`：

```
a.salary=500
a.save() 
```

当您这样做时`Salary().save()`，发生的事情是您创建了一个全新的空模型实例，然后尝试将其提交到数据库，而不是提交您刚刚修改的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:56:45.820

如果在您的模型中定义了 ForeignKey，则将在 db 级别强制执行约束，因此您需要在保存引用对象之前通过外键保存对象引用。

您可能还想重新考虑是否应该在 person 或 Salary 中定义外键。

如果您要这样定义模型：

```
class Person(models.Model):
    name = models.CharField(max_length=100)
    lastname = models.CharField(max_length=100)
    salary = models.ForeignKey(Salary)

class Salary(models.Model):
    amount = models.IntegerField(required=False) 
```

然后你可以定义你的视图函数，使它看起来像这样：

```
def update(request):
    s = Salary(amount=request.POST['salary'])
    s.save()
    p = Person(name=request.POST['name'], lastname=request.POST['lastname'], salary=s)
    p.save() 
```

这样做的好处是您可以从 Person 实例中引用薪水：

```
Person.objects.get(pk=1).salary.amount 
```

我不禁要问这个问题，为什么你真的需要在单独的对象中使用这些。如果您的模型如下所示，事情可能会更简单：

```
class Person(models.Model):
    name = models.CharField(max_length=100)
    lastname = models.CharField(max_length=100)
    salary = models.IntegerField(required=False) 
```

# android - PhoneGap - 无法播放本地声音文件

> ID：12657341
> 
> 赞同：3
> 
> 时间：2012-09-29T23:15:53.407
> 
> 标签：android, cordova, android-mediaplayer

我正在使用带有 Android 设备的 PhoneGap。

我正在尝试播放本地 .wav 文件，但遇到了一些错误。

我正在使用来自的示例代码

```
http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html

document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
        playAudio("sounds/menu-change.wav");
    }

    // Audio player
    var my_media = null;

    // Play audio
    function playAudio(src) {
        // Create Media object from src
        my_media = new Media(src, onSuccess, onError);

        // Play audio
        my_media.play();
    }

    function onSuccess() {
        console.log("playAudio():Audio Success");
    }

    function onError(error) {
        alert('code: '    + error.code    + '\n' + 
              'message: ' + error.message + '\n');
    } 
```

我收到以下错误

```
09-29 16:06:49.934: D/CordovaLog(14944): JSCallback Error: Request failed.
09-29 16:06:49.934: D/CordovaLog(14944): file:///android_asset/www/js/cordova-2.0.0.js: Line 3698 : JSCallback Error: Request failed.
09-29 16:06:49.934: I/Web Console(14944): JSCallback Error: Request failed. at file:///android_asset/www/js/cordova-2.0.0.js:3698
09-29 16:06:49.944: D/DroidGap(14944): onMessage(onPageStarted,file:///android_asset/www/settings.html)
09-29 16:06:49.964: I/AudioSystem(14944): getting audio flinger
09-29 16:06:49.974: I/AudioSystem(14944): returning new audio session id
09-29 16:06:50.014: E/MediaPlayer(14944): error (1, -2147483648)
09-29 16:06:50.014: W/System.err(14944): java.io.IOException: Prepare failed.: status=0x1
09-29 16:06:50.014: W/System.err(14944):    at android.media.MediaPlayer.prepare(Native Method)
09-29 16:06:50.014: W/System.err(14944):    at org.apache.cordova.AudioPlayer.loadAudioFile(AudioPlayer.java:544)
09-29 16:06:50.014: W/System.err(14944):    at org.apache.cordova.AudioPlayer.readyPlayer(AudioPlayer.java:468)
09-29 16:06:50.014: W/System.err(14944):    at org.apache.cordova.AudioPlayer.startPlaying(AudioPlayer.java:212)
09-29 16:06:50.014: W/System.err(14944):    at org.apache.cordova.AudioHandler.startPlayingAudio(AudioHandler.java:232)
09-29 16:06:50.014: W/System.err(14944):    at org.apache.cordova.AudioHandler.execute(AudioHandler.java:75)
09-29 16:06:50.014: W/System.err(14944):    at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:192)
09-29 16:06:50.014: W/System.err(14944):    at java.lang.Thread.run(Thread.java:1027)

09-29 16:06:50.494: D/CordovaLog(14944): JSCallback: Message from Server: cordova.require('cordova/plugin/Media').onStatus('abf853b7-3e45-f906-fc59-92d9f11e9a14', 1, 0);
09-29 16:06:50.494: D/CordovaLog(14944): file:///android_asset/www/js/cordova-2.0.0.js: Line 3669 : JSCallback: Message from Server: cordova.require('cordova/plugin/Media').onStatus('abf853b7-3e45-f906-fc59-92d9f11e9a14', 1, 0);
09-29 16:06:50.504: I/Web Console(14944): JSCallback: Message from Server: cordova.require('cordova/plugin/Media').onStatus('abf853b7-3e45-f906-fc59-92d9f11e9a14', 1, 0); at file:///android_asset/www/js/cordova-2.0.0.js:3669
09-29 16:06:50.504: D/CordovaLog(14944): JSCallback Error: TypeError: Cannot read property 'statusCallback' of undefined
09-29 16:06:50.504: D/CordovaLog(14944): file:///android_asset/www/js/cordova-2.0.0.js: Line 3670 : JSCallback Error: TypeError: Cannot read property 'statusCallback' of undefined
09-29 16:06:50.504: I/Web Console(14944): JSCallback Error: TypeError: Cannot read property 'statusCallback' of undefined at file:///android_asset/www/js/cordova-2.0.0.js:3670 
```

它说它需要媒体插件，但我在我的 config.xml 文件中启用了它

```
<plugin name="Media" value="org.apache.cordova.AudioHandler"/> 
```

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T07:12:07.353

使用位于 www 文件夹中的声音文件时，您需要在 Android 上使用以下文件路径格式：

`new Media("/android_asset/www/{directory}/{file-name}.mp3");`

# java - 读取用户输入并检测 Java 中的条目类型

> ID：12657345
> 
> 赞同：2
> 
> 时间：2012-09-29T23:16:15.443
> 
> 标签：java, actionlistener, jtextfield

在我的程序中，我有一个读取用户输入的 JTextField。用户应该输入一个数字，然后单击一个 JButton 以确认输入，但我想知道如果用户不输入数字，则会出现一个弹出窗口，告诉用户输入不正确。当点击 JButton 时，我将如何实现一些东西来检测用户是否输入了一个数字？如果我需要提供更多代码，请告诉我。

```
JButton okay = new JButton("OK");
JTextField dataEntry = new JTextfield();

okay.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){       
        firstEntry = Float.parseFloat(dataEntry.getText());
        //want to see if it's a float, if true, run the following code
        confirm = true;
        changeText();
        dataEntry.setText("");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:19:25.167

[`parseFloat`](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#parseFloat%28java.lang.String%29)`NumberFormatException`如果传递的`String`不包含可解析的 ，则抛出 a `float`。您可以捕获此异常以检测用户是否输入了`float`：

```
try {
  firstEntry = Float.parseFloat(dataEntry.getText());
} catch (NumberFormatException e) {
  // input is not a float
} 
```

[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextFloat%28%29)如果您不想处理异常，另一种选择是使用 a ：

```
Scanner scanner = new Scanner(dataEntry.getText());
if (scanner.hasNextFloat()) {
  firstEntry = scanner.nextFloat();
} else {
  // input is not a float
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:35:16.410

我会避免使用异常捕获机制来检查值是否为数字，因为这是 java 中非常昂贵的过程。

如果你使用 FormattedTextFields 会更好：[formattedtextfield](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

这需要一些代码，但这是一个非常优雅的解决方案。您也可以使用此概念编写自己的格式。

# flv - 播放存储在 Red5 服务器上的 FLV

> ID：12657347
> 
> 赞同：0
> 
> 时间：2012-09-29T23:16:40.943
> 
> 标签：flv, rtmp

所以我有一个使用 Red5 媒体服务器的闪存录像机。录制视频后，它会保存一个 FLV 文件到 Red5 RTMP 服务器。我的问题是，如果我只想使用普通的免费 FLV 播放器 (JWPlayer)，我会使用普通播放器并将视频源设置为 rtmp://domain.com/recorder/streams/test.flv 之类的东西吗？或者我会将播放器设置为使用此播放器构建器使用单个 rtmp 流？[http://www.longtailvideo.com/support/jw-player-setup-wizard?example=204](http://www.longtailvideo.com/support/jw-player-setup-wizard?example=204)我不知道这是否需要一些实际的 rtmp 流媒体应用程序。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:06:52.243

我认为您可以做的事情没有“或”。结果是一样的。

如果要从服务器流式传输 FLV，请指定以“rtmp”开头的 URL。我猜这个链接会完全做到这一点。但是，您当然也可以手动配置 FLV 播放器。

*我不知道这是否需要 rtmp 中的一些实际流媒体应用程序。谢谢。* => 通常 FLV 播放器可以播放 rtmp 流。但是当然你需要一个 Red5 服务器并且 FLV 必须在 webapp 的流目录中可用。类似于：rtmp://domain.com/recorder/streams/test.flv

通常你也可以指定 URL：rtmp://domain.com:1935/recorder/test[.flv]

*记录器*是webapp。 *test[.flv]*是您要流式传输的文件（可能“test”就足够了，没有 .flv 后缀）

无需将“流”放入 URL 中即可流式传输视频。Red5 中视频的默认文件夹中的“streams”，相当于这个 web 应用程序“recorder”的 FLV_VIDEO_ROOT 目录。

# .net - 新的键值对 (i, j).GetHashCode(); 重复率高

> ID：12657348
> 
> 赞同：15
> 
> 时间：2012-09-29T23:16:40.693
> 
> 标签：.net, dictionary, gethashcode

在寻找 Dictionary 的快速复合键时，我遇到了我无法理解也无法证明的异常情况。

在有限的测试中

```
Dictionary<KeyValuePair<UInt32, UInt32>, string> 
```

明显慢于 (200:1)

```
Dictionary<KeyValuePair<UInt16, UInt16>, string> 
```

测试从 0 到 1000 Populate 和 ContainsKey 的两个循环

```
 Poplulate     ContainsKey  
UInt32    92085         86578  
UInt16     2201           431 
```

问题是

```
new KeyValuePair<UInt32, UInt32>(i, j).GetHashCode(); 
```

产生许多重复。
在循环 i 和 j 1024 中，仅创建了 1024 个唯一哈希值。

根据 CasperOne 的雪崩评论，尝试了 i*31 和 j*97（两个素数），这导致 105280 在 1024X1024 上是唯一的。还是有很多重复的。CasperOne 我知道这和随机的不一样。但随机化输入不是我的工作。GetHashCode() 应该随机化输出。

**为什么重复次数多？**

相同的循环

```
new KeyValuePair<UInt16, UInt16>(i, j).GetHashCode(); 
```

产生 1024 X 1024 唯一哈希码（完美）。

Int32 也有同样的问题。

这些重复的哈希值杀死

```
Dictionary<KeyValuePair<UInt32, UInt32>, string> 
```

与 Int16 相比，Tuple 还会生成许多在 Int32 上不会降级的重复项。

生成原始 KVP 和原始 KPV.GetHashCode 的时间类似。

与 HashSet 相同的异常。

```
Dictionary<KeyValuePair<UInt32, UInt32>, string> dKVPu32 = new Dictionary<KeyValuePair<UInt32, UInt32>, string>();
Dictionary<KeyValuePair<UInt16, UInt16>, string> dKVPu16 = new Dictionary<KeyValuePair<UInt16, UInt16>, string>();
KeyValuePair<UInt32, UInt32> kvpUint32;
KeyValuePair<UInt16, UInt16> kvpUint16;
int range = 1000;
Int32 hashCode;
HashSet<Int32> kvpUint32Hash = new HashSet<Int32>();
HashSet<Int32> kvpUint16Hash = new HashSet<Int32>();

Stopwatch sw = new Stopwatch();
sw.Start();
for (UInt32 i = 0; i < range; i++)
{
    for (UInt32 j = 0; j < range; j++)
    {
        kvpUint32 = new KeyValuePair<UInt32, UInt32>(i, j);
    }
}
Console.WriteLine("UInt32  raw " + sw.ElapsedMilliseconds.ToString());
//  7
sw.Restart();
for (UInt16 i = 0; i < range; i++)
{
    for (UInt16 j = 0; j < range; j++)
    {
        kvpUint16 = new KeyValuePair<UInt16, UInt16>(i, j);
    }
}
Console.WriteLine("UInt16  raw " + sw.ElapsedMilliseconds.ToString());
//  6
sw.Restart();
for (UInt32 i = 0; i < range; i++)
{
    for (UInt32 j = 0; j < range; j++)
    {
        hashCode = new KeyValuePair<UInt32, UInt32>(i, j).GetHashCode();
        kvpUint32Hash.Add(hashCode);
    }
}
Console.WriteLine("UInt32  GetHashCode " + sw.ElapsedMilliseconds.ToString() + "  unique count " + kvpUint32Hash.Count.ToString());
//  285   1024
sw.Restart();
for (UInt16 i = 0; i < range; i++)
{
    for (UInt16 j = 0; j < range; j++)
    {
        hashCode = new KeyValuePair<UInt16, UInt16>(i, j).GetHashCode();
        kvpUint16Hash.Add(hashCode);
    }
}
Console.WriteLine("UInt16  GetHashCode " + sw.ElapsedMilliseconds.ToString() + "  unique count " + kvpUint16Hash.Count.ToString());
//  398 1000000
sw.Restart();
Console.ReadLine();
for (UInt32 i = 0; i < range; i++)
{
    for (UInt32 j = 0; j < range; j++)
    {
        dKVPu32.Add(new KeyValuePair<UInt32, UInt32>(i, j), String.Format("{0} {1}", i.ToString(), j.ToString()));
    }
}
Console.WriteLine("hsKVPu32 pop " + sw.ElapsedMilliseconds.ToString());
//  92085
sw.Restart();
for (UInt32 i = 0; i < range; i++)
{
    for (UInt32 j = 0; j < range; j++)
    {
        if (!dKVPu32.ContainsKey(new KeyValuePair<UInt32, UInt32>(i, j))) Debug.WriteLine("Opps"); ;
    }
}
Console.WriteLine("hsKVPu32 find " + sw.ElapsedMilliseconds.ToString());
//  86578
dKVPu32.Clear();
dKVPu32 = null;
GC.Collect();
sw.Restart();
for (UInt16 i = 0; i < range; i++)
{
    for (UInt16 j = 0; j < range; j++)
    {
        dKVPu16.Add(new KeyValuePair<UInt16, UInt16>(i, j), String.Format("{0} {1}", i.ToString(), j.ToString()));
    }
}
Console.WriteLine("hsKVPu16 pop " + sw.ElapsedMilliseconds.ToString());
//   2201
sw.Restart();
for (UInt16 i = 0; i < range; i++)
{
    for (UInt16 j = 0; j < range; j++)
    {
        if (!dKVPu16.ContainsKey(new KeyValuePair<UInt16, UInt16>(i, j))) Debug.WriteLine("Opps"); ;
    }
}
sw.Stop();
Console.WriteLine("hsKVPu16 find " + sw.ElapsedMilliseconds.ToString());
//  431 
```

PS 最快的是打包.EG ((UInt32)int1 << 16) | 整数2；

第一个 UInt32 列的哈希等于接下来两个 KVP 的哈希。

2281371105 8 992
2281371104 8 993
2281371107 8 994

2281371145 0 0
2281371147 0 2
2281371149 0 4
2281371151 0 6
2281371137 0 8

2281371144 0 1
2281371146 0 3
2281371148 0 5
2281371150 0 7
2281371136 0 9

2281371144 1 0
2281371145 1 1
2281371146 1 2 2281371147 1
3 2281371148 1
4 2281371149 1
5
2281371150

2281371147 2 0
2281371146 2 1
2281371144 2 3
2281371151 2 4
2281371150 2 5
2281371149 2 6
2281371148 2 7
2281371139 2 8

我发现的唯一模式是和或差或 KVP 匹配。
但是找不到何时求和何时减去的模式。
这是一个糟糕的哈希，所以知道它是什么没有什么价值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T03:12:44.147

由于`GetHashCode`返回 a `Int32`，因此每对`Int16`s（或`UInt16`s）都可以轻松返回唯一值。使用一对`Int32`s，您需要以某种方式组合这些值以与您的设计兼容。

`KeyValuePair`不会覆盖`GetHashCode()`，因此您只是使用 的默认实现`ValueType.GetHashCode()`，并且它的文档说明如下：

> （来自：http: [//msdn.microsoft.com/en-us/library/system.valuetype.gethashcode.aspx](http://msdn.microsoft.com/en-us/library/system.valuetype.gethashcode.aspx)）
> 
> *如果调用派生类型的 GetHashCode 方法，则返回值不太可能适合用作哈希表中的键。此外，如果其中一个或多个字段的值发生变化，则返回值可能不适合用作哈希表中的键。无论哪种情况，请考虑编写您自己的 GetHashCode 方法实现，以更接近地表示该类型的哈希码的概念。*

由于`KeyValuePair`不覆盖`GetHashCode()`，我认为它不打算用作`Dictionary`键。

此外，根据[this question](https://stackoverflow.com/questions/3841602/why-is-valuetype-gethashcode-implemented-like-it-is)和[this C# code](http://wikiencyclopedia.net/4.0/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/clr/src/BCL/System/ValueType.cs/1305376/ValueType.cs)，默认实现`ValueType.GetHashCode()`只是选择第一个非静态字段，并返回其`GetHashCode()`方法的结果。这解释了 的大量重复`KeyValuePair<UInt32, UInt32>`，尽管它不能解释`KeyValuePair<UInt16, UInt16>`.

我的猜测是 for `KeyValuePair<UInt32, UInt32>`,`GetHashCode()`确实只是返回`GetHashCode()`第一个值，而 for `KeyValuePair<UInt16, UInt16>`,`GetHashCode()`将这些值组合在一起，为每对值产生一个唯一的哈希值，因为这样做是可能且直接的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-30T07:23:48.383

首先，我们可以省去这个时间方面的问题——在我看来，这实际上*只是*关于哈希冲突，因为显然这些会影响性能。

所以，问题真的是为什么`KeyValuePair<uint, uint>`比`KeyValuePair<ushort, ushort>`. 为了帮助了解更多相关信息，我编写了以下简短程序：

```
using System;
using System.Collections.Generic;

class Program
{
    const int Sample1 = 100;
    const int Sample2 = 213;

    public static void Main()
    {
        Display<uint, ushort>();
        Display<ushort, ushort>();
        Display<uint, uint>();
        Display<ushort, uint>();
    }

    static void Display<TKey, TValue>()
    {
        TKey key1 = (TKey) Convert.ChangeType(Sample1, typeof(TKey));
        TValue value1 = (TValue) Convert.ChangeType(Sample1, typeof(TValue));
        TKey key2 = (TKey) Convert.ChangeType(Sample2, typeof(TKey));
        TValue value2 = (TValue) Convert.ChangeType(Sample2, typeof(TValue));

        Console.WriteLine("Testing {0}, {1}", typeof(TKey).Name, typeof(TValue).Name);
        Console.WriteLine(new KeyValuePair<TKey, TValue>(key1, value1).GetHashCode());
        Console.WriteLine(new KeyValuePair<TKey, TValue>(key1, value2).GetHashCode());
        Console.WriteLine(new KeyValuePair<TKey, TValue>(key2, value1).GetHashCode());
        Console.WriteLine(new KeyValuePair<TKey, TValue>(key2, value2).GetHashCode());
        Console.WriteLine();
    }
} 
```

我机器上的输出是：

```
Testing UInt32, UInt16
-1888265981
-1888265981
-1888265806
-1888265806

Testing UInt16, UInt16
-466800447
-459525951
-466800528
-459526032

Testing UInt32, UInt32
958334947
958334802
958334802
958334947

Testing UInt16, UInt32
-1913331935
-1913331935
-1913331935
-1913331935 
```

您显然可以尝试改变样本值以查看发生冲突的位置。

结果`KeyValuePair<ushort, uint>`特别令人担忧，结果`KeyValuePair<ushort, ushort>`出奇的好。

事实上，`KeyValuePair<ushort, uint>`这不仅是糟糕的——据我所见，它非常糟糕——在运行 64 位 CLR 时，我没有找到*任何*不具有相同哈希码的值 -1913331935 *。*运行 32 位 CLR 我得到不同的哈希码，但所有值的哈希码仍然相同。

 *看来，在 .NET 4.5（这是我正在运行的）中，默认实现`GetHashCode`不只是采用结构的第一个实例字段，如前所述。我怀疑至少对于某些类型，它只使用*装箱*值中标头之外的前 4 个字节的内存（并且这里的每个调用都会装箱），最终*有时*只是第一个字段（如果字段是一个`uint`），*有时*是多个字段（例如`ushort, ushort`，两个字段都可以容纳“内部” 4 个字节），*有时*根本没有字段（`ushort, uint`）。

（实际上，这并不能解释为什么你会得到 1024 个不同的哈希码，`uint, uint`而不是只有 1000 个。我仍然不确定。）

最终，使用不会覆盖的值类型`GetHashCode`作为字典键似乎只是一个坏主意，除非您已经测试以确保它适合您的特定要求。IMO，有太多的黑魔法让我们对此充满信心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-11T03:00:58.373

正如其他回答者提到的那样，`KeyValuePair`不会覆盖，并且for structs`GetHashCode`的默认实现[不是最好的](https://github.com/dotnet/coreclr/issues/1341)。您可以为此使用二元素元组，例如`GetHashCode`

```
var dict = new Dictionary<Tuple<uint, uint>, string>();
dict.Add(Tuple.Create(1u, 2u),"xxx"); // Tuples override GetHashCode 
```

但是请注意，这将为额外的元组堆分配增加额外的开销。（虽然它部分弥补了，因为当你调用`GetHashCode`一个不覆盖它的结构时，你会隐式地将它装箱）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T10:17:34.110

如果你想把很多你自己的东西放入一个像字典这样的结构中，那么最重要的规则是总是覆盖 GetHashCode。您可以使用此扩展程序来查看字典的填充情况。它将报告空槽、重复键等。即将把它放在 sourceforge 上，但它就在这里；

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;

// This unit is Freeware. It was developed by Jerremy Koot & Ivo Tops. July 2011
//
// Version  By    Changes
// =======  ===== ==============================================================
// v1.02    Ivo   Removed not-working Hashtable support and simplified code
// v1.01    Ivo   Lowered memory usage
// v1.00    I&J   First Version

namespace FastLibrary
{
/// <summary>
/// Static Extension Methods for Dictionary, ConcurrentDictionary and HashSet
/// </summary>
public static class ExtHashContainers
{
    /// <summary>
    /// Checks a dictionary for performance statistics
    /// </summary>
    public static string Statistics<TKey, TValue>(this Dictionary<TKey, TValue> source)
    {
        return ExamineData(source.Keys, source);
    }

    /// <summary>
    /// Checks a concurrent dictionary for performance statistics
    /// </summary>
    public static string Statistics<TKey, TValue>(this ConcurrentDictionary<TKey, TValue> source)
    {
        return ExamineData(source.Keys, source);
    }

    /// <summary>
    /// Checks a HashSet for performance statistics
    /// </summary>
    public static string Statistics<TKey>(this HashSet<TKey> source)
    {
        return ExamineData(source, source);
    }

    private static string ExamineData<TKey>(ICollection<TKey> source, Object hashContainer)
    {
        if (!source.Any()) return "No Data found.";

        // Find Buckets
        var b = GetBuckets(hashContainer);
        if (b < 0) return ("Unable to get Buckets Field for HashContainer");

        // Create our counting temp dictionaries
        var d = new int[b];
        var h = new Dictionary<int, int>(source.Count);

        // Find Hash Collisions and Bucket Stats
        foreach (var k in source)
        {
            var hash = k.GetHashCode() & 0x7FFFFFFF; // Hashes are stripped of sign bit in HashContainers
            int bucket = hash%b; // .NET Hashers do not use negative hashes, and use % voor bucket selection
            // Bucket Stats
            d[bucket]++;

            // Hashing Stats
            int c;
            if (h.TryGetValue(hash, out c)) h.Remove(hash);
            else c = 0;
            c++;
            h.Add(hash, c);
        }

        // Do some math
        var maxInBucket = d.Max(q => q);
        var maxSameHash = h.Values.Max(q => q);
        var emptyBuckets = d.Count(q => q == 0);
        var emptyStr = b == 0 ? "0" : ((float) (emptyBuckets)/b*100).ToString("0.0");
        var worstHash = (from i in h where i.Value == maxSameHash select i.Key).FirstOrDefault();

        // Report our findings
        var r = Environment.NewLine + hashContainer.GetType().Name + " has " + b + " buckets with " + source.Count +
                " items. " +
                Environment.NewLine + "The Largest bucket contains " + maxInBucket + " items. " +
                Environment.NewLine + "It has " + (emptyBuckets) +
                " empty buckets (" + emptyStr + "%)" + Environment.NewLine + "Each non-empty bucket has on average " +
                ((source.Count/(float) (b - emptyBuckets))).ToString("0.0") + " items." + "The " + source.Count +
                " items share " + h.Count +
                " unique hashes. ";
        if (maxSameHash > 1)
            r += Environment.NewLine + "The largest collision has " + maxSameHash +
                 " items sharing the same hash, which == " + worstHash;
        return r;
    }

    private static Int32 GetBuckets(object dictionary)
    {
        var type = dictionary.GetType();
        while (type != null && !type.IsGenericType) type = type.BaseType;
        if (type == null) return -1;

        string field = null;
        if (type.GetGenericTypeDefinition() == typeof (Dictionary<,>)) field = "buckets";
        if (type.GetGenericTypeDefinition() == typeof (ConcurrentDictionary<,>)) field = "m_buckets";
        if (type.GetGenericTypeDefinition() == typeof (HashSet<>)) field = "m_buckets";
        if (field == null) return -1;

        var bucketsField = type.GetField(field, BindingFlags.NonPublic | BindingFlags.Instance);
        if (bucketsField == null) return -1;

        var buckets = bucketsField.GetValue(dictionary);
        if (buckets == null) return -1;

        var length = buckets.GetType().GetProperty("Length");
        return (int) length.GetGetMethod().Invoke(buckets, null);
    }
}
} 
```*

# android - 将 android drawable 添加到菜单 XML 停止应用程序编译

> ID：12657351
> 
> 赞同：1
> 
> 时间：2012-09-29T23:17:52.883
> 
> 标签：android, android-menu, xml-drawable, android-icons

我正在开发一个 android 项目，并且有一个用于操作栏菜单的 XML 文件，它工作正常，但我现在需要添加一个带有图标的额外项目，但这会在 eclipse 选项卡和控制台输出中显示错误. 如果我删除图标字段，那么它很好，但如果我添加图标，那么我会得到错误。

下面是包含菜单项的 XML。我已经包含了一个以前工作的项目和一个不工作的新项目

```
<item android:id="@+id/mnu_search"
        android:title="Search"
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="always">
    </item>
    <item android:id="@+id/mnu_sync"
        android:title="Sync"
        android:icon="@android:drawable/ic_menu_refresh"
        android:showAsAction="always">
    </item> 
```

同步菜单项不工作，搜索项工作正常。

Eclipse 中的错误选项卡中的错误说

```
Unparsed aapt error(s)! Check the console for output 
```

下面是控制台输出

```
W/ResourceType( 9156): Bad XML block: header size 305 or total size 0 is larger than data size 0
C:\Users\Chris\workspace\AndroidPasswordManager\res\menu\main_menu.xml:13: error: Error: Resource is not public. (at 'icon' with value '@android:drawable/ic_menu_refresh').
W/ResourceType( 8896): Bad XML block: header size 300 or total size 0 is larger than data size 0
C:\Users\Chris\workspace\AndroidPasswordManager\res\menu\main_menu.xml:13: error: Error: Resource is not public. (at 'icon' with value '@android:drawable/ic_menu_refresh').
W/ResourceType( 8984): Bad XML block: header size 303 or total size 0 is larger than data size 0
C:\Users\Chris\workspace\AndroidPasswordManager\res\menu\main_menu.xml:13: error: Error: Resource is not public. (at 'icon' with value '@android:drawable/ic_menu_refresh'). 
```

我不知道可能出了什么问题。我已经在 android sdk 目录中检查了图像，它确实存在，我使用的是 api 级别 15。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:22:07.030

您尝试使用的资源不是公开的。它由android内部使用。使用您的应用程序可绘制参考。

# java - Eclipse 不会运行Java？

> ID：12657352
> 
> 赞同：0
> 
> 时间：2012-09-29T23:17:55.793
> 
> 标签：java, eclipse

我已经使用 Eclipse IDE 一段时间了，今天我去打开它，它不会运行 .java 文件。出于某种原因，我的 Eclipse 现在只配置为运行 C/C++。有谁知道如何更改它以便我可以再次运行 Java？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:23:25.953

尝试窗口 -> 打开透视图 -> 选择一个或按其他选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:24:07.373

也许您下载了为 C/C++ 开发而打包的 Eclipse CDT 发行版。您应该下载支持 Java 的发行版，例如[Eclipse Jave EE](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)或[Eclipse for Java](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:13:04.290

确保您的项目透视图是为 Java 设置的

# asp.net-mvc - 在 ASP MVC 中使用标签列表创建模型

> ID：12657361
> 
> 赞同：0
> 
> 时间：2012-09-29T23:19:46.543
> 
> 标签：asp.net-mvc, list, view, tags

我有一个这样的模型

```
public class Local
{  
    public int Id { get; set; }
    public string Name{ get; set; }   
    public List<string> Tags{ get; set; }
} 
```

我需要一个简单的视图来创建模型，但我不知道如何将逗号分隔的标签列表从视图传递到控制器，然后将模型与标签列表一起保存。我在类似的帖子中看到了一个使用 text.Split(',') 的解决方案，但我的问题是我不知道如何将输入文本传递给创建操作。我正在使用 ASP MVC 4。对不起，如果这是基本的，但我是 ASP MVC 的新手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:40:23.943

我不确定我是否理解你的问题（它真的很模糊），但你可以创建一个 ViewModel，它有一个名为 'Tags' 的字符串属性（逗号分隔的数据），你为这个 ViewModel 创建一个表单（你可以使用 Html .EditorForModel），并在您的控制器中简单地将您的 ViewModel 转换为具有标签列表的实体，方法是将字符串拆分为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:04:10.157

```
 // Parse the string
 string[] list = commaSeparatedListString.Split(",");

 foreach(var tag in list) {
    <input type="text" name="tags" value="@tag" />
 }

 // In controller
 // (the HTML Form will pass an array of values if there is more than one input tag with the same name)
 [HttpPost]
 public ActionResult(int id, string name, string[] tags)
 {
    // Save the tags
    // Use string.Join("," tags) to get your comma separated list back
 } 
```

# php - PHP - 在 Windows 上使用 shell_exec 运行 ffmpeg.exe 的问题

> ID：12657364
> 
> 赞同：-1
> 
> 时间：2012-09-29T23:21:09.480
> 
> 标签：php, windows, ffmpeg, flv, mp4

我正在尝试使用 ffmpeg.exe 将 FLV 文件编码为 MP4，在命令提示符上运行代码时一切正常（我尝试简单地回显命令并将其粘贴到命令行中）

注意：使用窗口。

这是代码：它不返回任何内容，也不编码任何内容，没有错误，没有任何反应:(，`system($cmd, $returnval)`返回`1`所有
正在运行的命令都`dir`可以正常工作，因此我具有所需的访问权限。

```
<?php
$title = $_GET['file'];
// encoding command > , below shows info "flv/'.$title.'.flv" "mp4/'.$title.'.mp4"
$cmd = ('cd C:/inetpub/wwwroot/run/ && ffmpeg.exe -i "flv/'.$title.'.flv"');
$ll = system($cmd, $fv);
echo "CMD: $cmd \nFull output: $fv \nLL = $ll";
?> 
```

ffmpeg.exe -h 将返回帮助文本，我开始怀疑它是否与其他具有颜色的输出有关？

有任何想法吗？:O

（ cd 不是问题，因为`$cmd = ('cd C:/inetpub/wwwroot/run/ && ffmpeg.exe -h');`工作正常，它实际上已经在那个目录中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:17:18.500

您需要授予 IIS 访问权限`ffmpeg.exe`。PHP 的 IIS 权限是一个 PITA（这是一个答案，因此您可以根据评论接受它）。

# tree - 使用go语言提取目录层次结构

> ID：12657365
> 
> 赞同：8
> 
> 时间：2012-09-29T23:21:33.100
> 
> 标签：tree, go

我正在尝试将文件夹的目录层次结构提取到 go 语言的数据结构中。`filepath.Walk`似乎是要走的路，但到目前为止我所能做的就是打印文件和文件夹的名称。这是我正在使用的：

```
func main() {
    visit := func(path string, info os.FileInfo, err error) error {
        if info.IsDir() {
            fmt.Println("dir:  ", path)
        } else {
            fmt.Println("file: ", path)
        }
        return nil
    }

    err := filepath.Walk("./", visit)
    if err != nil {
        log.Fatal(err)
    }
} 
```

这会打印文件夹的名称，例如：

```
dir:   folder1
file:  folder1/file1.txt
file:  folder1/file2.txt
file:  folder1/file3.txt
file:  folder1/file4.txt
dir:   folder1/folder2
file:  folder1/folder2/file5.txt
file:  folder1/folder2/file6.txt
file:  folder1/folder2/file7.txt
file:  folder1/folder2/file8.txt
file:  folder1/folder2/file9.txt 
```

对于树结构，我考虑过使用类似的东西：

```
type File struct {
    Name string
    Content string
}

type Folder struct {
    Name    string
    Files   []File
    Folders []Folder
} 
```

但当然欢迎任何建议。

**如何在 go 中将其转换为树结构？有没有更简单的方法来做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-09T10:48:48.853

我的一个小应用程序需要类似的东西，所以我编写了一个单独的小型库，供您[在 Github 上](https://github.com/marcinwyszynski/directory_tree)查看。因为我需要为返回的 os.FileInfo 内置 JSON 序列化，所以我也添加了它。

我知道对于这个问题的原作者来说为时已晚，但无论如何都将它发布在这里，以防有人正在寻找类似的东西。拉取请求很容易被接受:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T07:34:49.840

AFAIK 在 Go 标准库中没有任何现成的。

树结构很适合递归方法。我在您的文件和文件夹类型上定义了方法`addFile`。`addFolder`从根文件夹开始，您可以在 Walk 中调用这些方法。如果你得到 a/b/c，我们会打电话给`root.addFile(a, b, c)`, `a.addFile(b, c)`, `b.addFile(c)`。

我还将 Folder.Folders 更改为地图，因为 filepath.Walk 始终为我们提供完整路径，因此我们可以拆分它们并在文件夹地图中查找它们的组件。

这是一些快速而肮脏的代码，可能有错误并且没有进行完整的错误检查。它仅适用于当前目录，但这应该很容易修复。

我还在 Folder 上添加了一个 String() 方法，该方法被编译器识别，并将在打印出该类型的实例时使用。

```
package main

import (
    "log"
    "os"
    "path/filepath"
    "strings"
)

type File struct {
    Name string
}

type Folder struct {
    Name    string
    Files   []File
    Folders map[string]*Folder
}

func newFolder(name string) *Folder {
    return &Folder{name, []File{}, make(map[string]*Folder)}
}

func (f *Folder) getFolder(name string) *Folder {
    if nextF, ok := f.Folders[name]; ok {
        return nextF
    } else {
        log.Fatalf("Expected nested folder %v in %v\n", name, f.Name)
    }
    return &Folder{} // cannot happen
}

func (f *Folder) addFolder(path []string) {
    for i, segment := range path {
        if i == len(path)-1 { // last segment == new folder
            f.Folders[segment] = newFolder(segment)
        } else {
            f.getFolder(segment).addFolder(path[1:])
        }
    }
}

func (f *Folder) addFile(path []string) {
    for i, segment := range path {
        if i == len(path)-1 { // last segment == file
            f.Files = append(f.Files, File{segment})
        } else {
            f.getFolder(segment).addFile(path[1:])
            return
        }
    }
}

func (f *Folder) String() string {
    var str string
    for _, file := range f.Files {
        str += f.Name + string(filepath.Separator) + file.Name + "\n"
    }
    for _, folder := range f.Folders {
        str += folder.String()
    }
    return str
}

func main() {
    startPath := "."
    rootFolder := newFolder(startPath)

    visit := func(path string, info os.FileInfo, err error) error {
        segments := strings.Split(path, string(filepath.Separator))
        if info.IsDir() {
            if path != startPath {
                rootFolder.addFolder(segments)
            }
        } else {
            rootFolder.addFile(segments)
        }
        return nil
    }

    err := filepath.Walk(startPath, visit)
    if err != nil {
        log.Fatal(err)
    }

    log.Printf("%v\n", rootFolder)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T14:37:15.347

小修改

```
package main

import (
    "fmt"
    "path"
    "strings"
)

type File struct {
    Id   string
    Name string
}

type Folder struct {
    Name    string
    Files   []File
    Folders map[string]*Folder
}

func newFolder(name string) *Folder {
    return &Folder{name, []File{}, make(map[string]*Folder)}
}

func (f *Folder) getFolder(name string) *Folder {
    if nextF, ok := f.Folders[name]; ok {
        return nextF
    } else if f.Name == name {
        return f
    } else {
        return &Folder{}
    }
}

func (f *Folder) existFolder(name string) bool {
    for _, v := range f.Folders {
        if v.Name == name {
            return true
        }
    }
    return false
}

func (f *Folder) addFolder(folderName string) {
    if !f.existFolder(folderName) {
        f.Folders[folderName] = newFolder(folderName)
    }
}

func (f *Folder) addFile(fileName string, fileId string) {
    f.Files = append(f.Files, File{fileId, fileName})
}

func (f *Folder) getList() (result []map[string]interface{}) {
    for _, v := range f.Folders {
        result = append(result, map[string]interface{}{
            "name": v.Name,
            "type": "folder",
        })
    }

    for _, v := range f.Files {
        result = append(result, map[string]interface{}{
            "id":   v.Id,
            "name": v.Name,
            "type": "file",
        })
    }
    return
}

func isFile(str string) bool {
    if path.Ext(str) != "" {
        return true
    }
    return false
}

func DeleteEmptyElements(s []string) []string {
    var r []string
    for _, str := range s {
        if str != "" {
            r = append(r, str)
        }
    }
    return r
}

type IS map[string]string

func main() {
    arrayPaths := []interface{}{
        IS{
            "id":       "1",
            "filePath": "/print/some/com.png",
        },
        IS{
            "id":       "2",
            "filePath": "/print/some2/com412412.png",
        },
        IS{
            "id":       "3",
            "filePath": "/print/some2/41241241241.png",
        },
    }

    breadcrumb := "/print/some2"

    startPath := "/"
    rootFolder := newFolder(startPath)

    for _, path := range arrayPaths {
        filePath := path.(IS)["filePath"]
        fileId := path.(IS)["id"]
        splitPath := DeleteEmptyElements(strings.Split(filePath, "/"))
        tmpFolder := rootFolder
        for _, item := range splitPath {
            if isFile(item) {
                tmpFolder.addFile(item, fileId)
            } else {
                if item != startPath {
                    tmpFolder.addFolder(item)
                }
                tmpFolder = tmpFolder.getFolder(item)
            }
        }
    }

    currentFolder := rootFolder.getFolder("/")
    breadcrumbElements := DeleteEmptyElements(strings.Split(breadcrumb, "/"))
    for i, v := range breadcrumbElements {
        if currentFolder.existFolder(v) {
            currentFolder = currentFolder.getFolder(v)
            if i == len(breadcrumbElements)-1 {
                break
            }
        } else {
            currentFolder = currentFolder.getFolder(v)
        }
    }

    fmt.Println(currentFolder.getList())
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T14:54:52.463

只使用一个 for 循环和 filepath.Walk

```
package main

import (
    "encoding/json"
    "fmt"
    "log"
    "os"
    "path"
    "path/filepath"
)

func main() {
    tree := BuildTree(os.Args[1])
    fmt.Println(tree)
}

type File struct {
    Name string
}

type Folder struct {
    Name    string
    Files   []*File
    Folders map[string]*Folder
}

func (f *Folder) String() string {
    j, _ := json.Marshal(f)
    return string(j)
}

func BuildTree(dir string) *Folder {
    dir = path.Clean(dir)
    var tree *Folder
    var nodes = map[string]interface{}{}
    var walkFun filepath.WalkFunc = func(p string, info os.FileInfo, err error) error {
        if info.IsDir() {
            nodes[p] = &Folder{path.Base(p), []*File{}, map[string]*Folder{}}
        } else {
            nodes[p] = &File{path.Base(p)}
        }
        return nil
    }
    err := filepath.Walk(dir, walkFun)
    if err != nil {
        log.Fatal(err)
    }

    for key, value := range nodes {
        var parentFolder *Folder
        if key == dir {
            tree = value.(*Folder)
            continue
        } else {
            parentFolder = nodes[path.Dir(key)].(*Folder)
        }

        switch v := value.(type) {
        case *File:
            parentFolder.Files = append(parentFolder.Files, v)
        case *Folder:
            parentFolder.Folders[v.Name] = v
        }
    }

    return tree
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-22T20:33:51.707

从 Go 1.16 开始，您可以将`fstest.MapFS`其用作您要求的数据结构：

```
package main

import (
   "io/fs"
   "os"
   "path/filepath"
   "testing/fstest"
)

func main() {
   m := make(fstest.MapFS)
   walk := func(s string, d fs.DirEntry, e error) error {
      if e != nil { return e }
      if ! d.IsDir() {
         data, e := os.ReadFile(s)
         if e != nil { return e }
         m[s] = &fstest.MapFile{Data: data}
      }
      return nil
   }
   filepath.WalkDir(`C:\go\src\net`, walk)
   data := m[`C:\go\src\net\textproto\writer.go`].Data[:44]
   println(string(data) == "// Copyright 2010 The Go Authors. All rights")
} 
```

[https://golang.org/pkg/testing/fstest#MapFS](https://golang.org/pkg/testing/fstest#MapFS)

# ios - 核心数据：为什么必须调用重新加载数据才能使我的应用程序正常工作？

> ID：12657369
> 
> 赞同：4
> 
> 时间：2012-09-29T23:22:40.923
> 
> 标签：ios, core-data

我整晚都在调试一个简单的应用程序。该应用程序从 Web 检索一张图像（是的，一张……旨在让我的生活更轻松），并将其显示在表格视图中。我这样做是为了学习核心数据。在我修复它之前，错误消息显示如下：

> 2012-09-30 06:16:12.854 缩略图 [34862:707] CoreData：错误：严重的应用程序错误。在调用 -controllerDidChangeContent: 期间，从 NSFetchedResultsController 的委托中捕获了一个异常。无效更新：无效的节数。更新后表视图中包含的节数（1）必须等于更新前表视图中包含的节数（0），加上或减去插入或删除的节数（0插入，0已删除）。与用户信息（空）

基本上它是说**FRC 委托方法出了点问题**。一方面，节号从 0 变为 1。另一方面，“0 插入，0 删除”。那么如何增加节数呢？那不应该发生..因此错误。

**我通过简单地添加`[self.tableView reloadData]`到我的 FRC 设置方法来**修复错误。我从这篇[文章](https://stackoverflow.com/a/7844903/359248)中得到了灵感，但我不太明白。答案似乎太复杂且特定于项目。有人可以解释为什么添加`reloadData`可以修复错误吗？答案可能很简单，我希望如此。

我的应用程序的关键组件，如果这很重要：

*   用于`UIManagedDocument`建立核心数据栈
*   创建一个辅助方法以从 Flickr API 下载图像
*   在 NSManagedObject 子类文件中，尝试从持久存储中获取图像。如果还没有，请将其插入 MOC。

    ```
    - (void)setupFetchedResultsController
    {
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"BigImage" inManagedObjectContext:self.document.managedObjectContext];
        [fetchRequest setEntity:entity];

        NSSortDescriptor *imageDescriptor = [[NSSortDescriptor alloc] initWithKey:@"image" ascending:YES];
        NSArray *sortDescriptors = [NSArray arrayWithObject: imageDescriptor];
        [fetchRequest setSortDescriptors:sortDescriptors];

        [fetchRequest setFetchBatchSize:20];

        // Create fetch results controller
        self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.document.managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];

        self.fetchedResultsController.delegate = self;

        NSError *error;
        if (![self.fetchedResultsController performFetch:&error])
        {
            NSLog(@"Error in performFetch: %@, %@", error, [error userInfo]);
        }

        // Critical!! I add this line to fix the bug!
            [self.tableView reloadData];
        } 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T07:44:23.527

获取结果控制器仅在第一次获取*后*跟踪托管对象内容的更改。`didChangeSection`然后使用委托方法等将这些更改传播到表视图`didChangeObject`。

但是没有将初始获取的结果发送到表视图的自动机制。这就是为什么你必须调用`reloadData`after的原因`performFetch`。

但是，在某些情况下，这似乎会自动工作。`UITableViewController`调用`reloadData`（`viewWillAppear`如果第一次加载表）。因此，例如，如果您在 中设置 FRC `viewDidLoad`，`reloadData`将在 中调用`viewWillAppear`，而您不必手动调用它。

# ruby - RedCloth 安装失败

> ID：12657370
> 
> 赞同：1
> 
> 时间：2012-09-29T23:22:46.183
> 
> 标签：ruby, redcloth

我试图安装章鱼，但我在安装 RedCloth ( [http://redcloth.org](http://redcloth.org) ) 时遇到了困难。我认为这个问题与这个问题相同[，](https://stackoverflow.com/questions/4797707/path-problem-during-redcloth-installation)但这是 Windows 的解决方案，我运行 OSX (10.8)。

--已编辑--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T16:55:15.310

尝试从 Synaptic 安装 ruby​​1.9.1-dev 软件包，或使用 apt-get。

在命令提示符下：

`sudo apt-get install ruby1.9.1-dev`

然后：如果您使用的是 Bundler gem，我想，您可以键入`bundle install`安装它，否则您可以通过手动安装它`gem install RedCloth`

# r - R中的网页抓取

> ID：12657371
> 
> 赞同：3
> 
> 时间：2012-09-29T23:22:47.520
> 
> 标签：r, web-scraping

我正在研究国家发行的市政债券的项目，但我无法获取我的数据。使用 XML 包和下面的代码，我能够得到一些。

```
> nys="http://newyork.municipalbonds.com/bonds/issue/649787N87"
> nys.table=readHTMLTable(nys,asText=TRUE,which=4)
> nys.table=as.data.frame(nys.table)
> head(nys.table)
  Trade Date Trade Time Maturity Date Coupon   Price Yield Trade Amount      Trade Type
1 2012-09-27     2:49pm      2013-Apr 5.000% 102.522 0.289     $270,000 Investor bought
2 2012-09-27     1:17pm      2013-Apr 5.000% 102.290 0.712      $45,000    Inter-dealer 
```

但该网站仅免费提供小样本。官方网站 EMMA 有免费的数据，但我很难抓取它。当我尝试与以前相同的方法时，我最终得到

```
nys="http://emma.msrb.org/SecurityView/SecurityDetailsTrades.aspx?cusip=649787N87"
nys.table=readHTMLTable(nys,asText=TRUE)
nys.table=as.data.frame(nys.table)
head(nys.table)

data frame with 0 columns and 0 rows 
```

据我了解，并且我对此相当肯定，当您通过网络浏览器导航到它时，有一个标准的 T&C 页面。使用 htmlParse(nys) 后，输出与 T&C 页面的页面源代码相同，而不是数据实际所在的页面。因此，当代码运行时，它会尝试在 T&C 页面上查找表格。

我认为这将是一个相当普遍的问题，但到目前为止，我还没有找到任何有人遇到类似问题的帖子。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T02:10:38.040

我终于让它工作了。我必须在 Firefox 中使用 Web Developer，这使我能够查看该站点为 Disclaimer cookie 设置的名称/值对。这里是：

```
library(RCurl)
nys="http://emma.msrb.org/SecurityView/SecurityDetailsTrades.aspx?cusip=649787N87"
txt<-getURLContent(nys,cookie='Disclaimer=Ratings')
readHTMLTable(htmlParse(txt, asText = TRUE)) 

$ctl00_mainContentArea_tradeSearchResults
        Trade Date/Time   Settlement Date Price (%) Yield (%) Trade Amt ($) Trade Submission Type  
1   09/27/2012 : 02:49 PM      10/02/2012  102.5220     0.289       270,000       Customer bought  
2   09/27/2012 : 01:17 PM      10/02/2012    102.29     0.712        45,000    Inter-dealer Trade  
3   09/27/2012 : 01:17 PM      10/02/2012    102.29     0.712        45,000    Inter-dealer Trade 
```

要获得接下来的 100 行，您必须发布具有当前“视图状态”的表单：

```
# Get next set
viewstate=gsub('.*\"__VIEWSTATE\" value=\"([^\"]*)\".*','\\1',txt)

txt<-postForm(nys,
"__VIEWSTATE"=viewstate,
"__EVENTTARGET"="ctl00$mainContentArea$nextBottomButton",
.opts=list(cookie='Disclaimer=Ratings'))
readHTMLTable(htmlParse(txt, asText = TRUE)) 

$ctl00_mainContentArea_tradeSearchResults
        Trade Date/Time   Settlement Date Price (%) Yield (%) Trade Amt ($) Trade Submission Type  
1   06/27/2011 : 01:51 PM      06/30/2011  107.7350      0.65       600,000         Customer sold  
2   06/22/2011 : 12:05 PM      06/27/2011  107.1960     0.957         8,000       Customer bought  
3   06/22/2011 : 12:05 PM      06/27/2011  106.6960     1.226         8,000    Inter-dealer Trade 
```

# css - 无法覆盖 Bootstrap CSS

> ID：12657374
> 
> 赞同：6
> 
> 时间：2012-09-29T23:23:31.163
> 
> 标签：css, twitter-bootstrap

我在网上搜索了一种覆盖引导 CSS 的方法，但还没有为我工作。我正在尝试更改默认`navbar`颜色而不编辑`bootstrap.css`文件。
加载后，我尝试将以下内容放在头上`bootstrap.css`：

```
.navbar-inner {
    background-color: #006633;
    background-image: -mox-linear-gradient(top, #006633, #006633);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#006633), to(#006633));
    background-image: -webkit-linear-gradient(top, #006633, #006633);
    background-image: -o-linear-gradient(top, #006633, #006633);
    background-image: linear-gradient(to bottom, #006633, #006633);
    border-color: #006633;
    filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ff006633', endColorstr='#ff006633', GradientType=0);
} 
```

这不起作用，所以我尝试将它放在它自己的 CSS 文件中，然后像这样加载该样式表：

**引导重载.css**

```
.navbar-inner {
    background-color: #006633;
    background-image: -mox-linear-gradient(top, #006633, #006633);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#006633), to(#006633));
    background-image: -webkit-linear-gradient(top, #006633, #006633);
    background-image: -o-linear-gradient(top, #006633, #006633);
    background-image: linear-gradient(to bottom, #006633, #006633);
    border-color: #006633;
    filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ff006633', endColorstr='#ff006633', GradientType=0);
} 
```

**_Layout.cshtml**

```
<link rel="stylesheet" href="Content/bootstrap.css">
<link rel="stylesheet" href="Content/bootstrapOverload.css"> 
```

当那不起作用时，我尝试向元素添加自定义类

**_Layout.cshtml**

```
<div class="navbar-inner navbar-override"> <!-- added navbar-override --> 
```

**引导重载.css**

```
.navbar-override {
    background-color: #006633;
    background-image: -mox-linear-gradient(top, #006633, #006633);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#006633), to(#006633));
    background-image: -webkit-linear-gradient(top, #006633, #006633);
    background-image: -o-linear-gradient(top, #006633, #006633);
    background-image: linear-gradient(to bottom, #006633, #006633);
    border-color: #006633;
    filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ff006633',     endColorstr='#ff006633', GradientType=0);
} 
```

难道我做错了什么？如果可能的话，我真的很想学习如何以正确的方式做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-18T16:02:51.937

您是否尝试`!important`在每个 CSS 行上添加标签以告诉元素覆盖引导程序？

像这样的东西：

```
.navbar-override {
    background-color: #006633 !important;
    background-image: -moz-linear-gradient(top, #006633, #006633) !important;
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#006633), to(#006633)) !important;
    background-image: -webkit-linear-gradient(top, #006633, #006633) !important;
    background-image: -o-linear-gradient(top, #006633, #006633) !important;
    background-image: linear-gradient(to bottom, #006633, #006633) !important;
    border-color: #006633 !important;
    filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ff006633',     endColorstr='#ff006633', GradientType=0) !important;
} 
```

通常不是最好的方法，但我认为它应该有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T06:12:28.917

刚刚花了大部分时间尝试更改导航栏颜色：[

我认为问题是 .navbar-inverse

您单独的 .css 文件应该包含类似这样的内容，然后颜色会改变：

```
.navbar-inverse .navbar-inner {
background-color: #586214;
background-image: none;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T23:29:22.800

要重载 css，您需要在代码的后面，或者比您尝试重载的 css 更具体。

可以只`body`在前面添加，`.navbar-inner`以便它声明`body .navbar-inner`它更具体，或者`div.navbar-inner`最好是在某处有一个 id。

如果您选择它与 bootstrap.css 中的一样具体，那么我认为您的 css 不会像您想的那样在引导之后加载。使用 Chromes 开发工具或 Firefox 的 firebug 等工具验证选择的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-29T23:29:42.693

您的 CSS 中有一个错字：

```
background-image: -mox-linear-gradient(top, #006633, #006633); 
```

我认为应该是：

```
background-image: -moz-linear-gradient(top, #006633, #006633); 
```

如果您在 CSS 中输入错误，它会停止解释其余部分，因此不会为您覆盖。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-18T15:44:51.517

您可以通过更改 LESS 变量来覆盖引导程序默认值。

[https://getbootstrap.com/2.0.1/less.html#variables](https://getbootstrap.com/2.0.1/less.html)

//导航栏

*   @navbarBackground：@Color1；
*   @navbarBackgroundHighlight：@Color1；
*   @navbarBrandColor：#FFFFFF；
*   @navbarLinkColor：#FFFFFF；
*   @navbarLinkColorHover：#FFFFFF；
*   @navbarLinkColorActive：#FFFFFF；
*   @navbarInverseBackground：#FFFFFF；
*   @navbarInverseBackgroundHighlight：#FFFFFF；
*   @navbarInverseBorder：#FFFFFF；
*   @navbarInverseLinkColorHover：@Color7；
*   @navbarInverseLinkColorActive：@Color11；
*   @navbarInverseLinkColor：@Color1；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-15T10:44:10.593

通过复制 CSS-Class 并重命名它来解决您的问题。然后使用这个类:)

我知道它的提升，但至少看看它的工作原理

例子：

```
.drop-down {...}     /* is from bootstrap */
.drop-down-new {...} /* Your new Class that works*/ 
```

# windows-8 - 在 Windows 8 中手动触发屏幕旋转

> ID：12657375
> 
> 赞同：1
> 
> 时间：2012-09-29T23:23:32.640
> 
> 标签：windows-8

我开发了一个 Windows 8 Metro 应用程序。现在我想测试如果我旋转屏幕会发生什么，但我没有能够做到这一点的设备。

有没有办法手动触发？我可以使用我的 ATI 驱动程序手动旋转屏幕，但我不认为如果我旋转一些平板电脑会发生这种情况？

最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:28:24.900

为了进行测试，Visual Studio 中的[模拟器](http://msdn.microsoft.com/en-us/library/windows/apps/hh441475.aspx)将使您能够执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T21:41:52.613

我不确定这是否是依赖于视频驱动程序的设置，但在我使用的 Windows 8 系统中，我可以通过`Ctrl+Alt+arrow`. 左 = 90 度，下 = 180，右 = 270。

# android - 启动时无法在 Android 应用程序中实例化片段

> ID：12657376
> 
> 赞同：2
> 
> 时间：2012-09-29T23:23:37.303
> 
> 标签：android, class, android-fragments

这是日志猫：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.---.rate_this/com.kickinglettuce.---.MasterCat}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.---.---.MasterCat$MasterFrag: make sure class name exists, is public, and has an empty constructor that is public
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.---.---.MasterCat$MasterFrag: make sure class name exists, is public, and has an empty constructor that is public
at android.support.v4.app.Fragment.instantiate(Fragment.java:399)
at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1760)
at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:200)
at com.---.---.MasterCat.onCreate(MasterCat.java:73)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
... 11 more
Caused by: java.lang.InstantiationException: can't instantiate class com.kickinglettuce.rate_this.MasterCat$MasterFrag; no empty constructor
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1319)
at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
... 18 more 
```

这是基本设置：

FragmentActivity 包含三个内部类（所有片段）。它们都是使用 ViewPager 和 Support Library 的选项卡。此 Activity 是应用程序首次启动时加载的内容（嗯，在启动屏幕之后）。当应用程序已经打开并且一切正常时会发生此 LogCat 错误；但似乎如果您在此 FragmentActivity 中离开应用程序并稍后再回来，当您尝试恢复时，它将强制关闭。一旦您尝试再次加载它（在强制关闭后），它将返回到启动屏幕，之后一切正常。第 73 行错误位于 Fragment Activity 的顶部。

这是第 73 行：

```
super.onCreate(savedInstanceState); 
```

这是代码，MasterFrag 内部类的开头：

```
public class MasterFrag extends ListFragment {

     // some fields

    public MasterFrag() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        return inflater.inflate(R.layout.mastercat, container, false);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T23:38:20.300

尝试`MasterFrag`在自己的文件中创建一个类，或将其声明为静态。我相信框架不能实例化实例类。

我想当您自己创建片段时它可以正常工作，但是正如您发现的那样，当框架启动时，它无法处理您的内部类。

# javascript - 用于无 cookie 域的具有自定义 javascript 函数的 LESS CSS

> ID：12657380
> 
> 赞同：4
> 
> 时间：2012-09-29T23:24:12.377
> 
> 标签：javascript, css, sass, less, cookieless

我想使用 less ( [http://lesscss.org/](http://lesscss.org/) ) 而不是 sass ( [http://sass-lang.com/](http://sass-lang.com/) ) 来预处理 css。我有一组用于静态资源的无 cookie 域。例如：0.mydomain.com、1.mydomain.com、2.mydomain.com 等。我想使用 less 编译 CSS，以便将无 cookie 域注入到编译后的 CSS 输出中。我发现使用@function 在 sass 文档中创建自定义函数的能力。是否存在等价物（我找不到）？我需要一个执行散列算法的函数，将文件名转换为对应于无 cookie 域 (X.mydomain.com) 的数字 X。如何使用更少的资源来做到这一点？

下面的例子是为了说明而设计的：

在 my.less 文件中：

```
@function domainX(path) {
    //configs
    var protocol = "http://";
    var domain = ".mydomain.com"
    var N = 4; //4 cookieless domains

    var sum = 0;
    var s = path.substr(path.lastIndexOf("/") + 1);
    for (var i = 0; i < s.length; i++) {
        sum += s[i].charCodeAt();
    }
    @return protocol + (sum % N) + domain + path;
}

.myItem {background-image:url(domainX('/images/background.jpg')) } 
```

这将生成编译输出

```
.myItem {background-image:url('http://1.mydomain.com/images/background.jpg') } 
```

SASS 示例是 [http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#functions](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#functions)

请参阅“功能指令”部分

下面是 LESS 文档中最接近的示例，但没有构造基本 URL 的函数。

```
@base-url: "http://assets.fnord.com";
background-image: url("@{base-url}/images/bg.png"); 
```

也许解决方案中也有 LESS + Node.js 部分？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:32:45.543

您应该能够使用 LeSS 嵌入 js 的能力来做到这一点：

```
.background(@path) {
    background-image: ~`(function(){ var protocol = "http://"; var domain = ".mydomain.com"; var N = 4; var sum = 0; var s = @{path}.substr(@{path}.lastIndexOf("/") + 1); for (var i = 0; i < s.length; i++) { sum += s[i].charCodeAt(); } return "url(" + protocol + (sum % N) + domain + @{path} + ")";})()`;
}

.myItem {
    .background("/images/background.jpg");
} 
```

不知道性能会如何，但是如果您正在处理服务器端，您将不在乎，而客户端它会缓存，所以应该不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T03:09:42.670

不。LESS 的功能比 Sass 少得多（没有函数，没有循环）。您必须使用 mixin 来远程执行类似的操作。Sass 可以做到这一点，只是它没有内置任何字符串操作函数，因此您必须编写一些 Ruby 代码来添加这些函数。

# java - Solandra 缺少日期范围查询的结果

> ID：12657381
> 
> 赞同：1
> 
> 时间：2012-09-29T23:24:15.890
> 
> 标签：java, solr, cassandra, solrj, solandra

我正在使用 Solandra 搜索某个日期之后的事件。为此，我索引自纪元以来的毫秒（作为长数据类型）并使用如下范围搜索：开始：[1348992000000 TO *]

很多时候这工作正常，但有时会出现奇怪的错误行为，即在日期 X 之后，没有任何东西被带回，但在日期 Y 之后（其中 X < Y < 日期）它被返回。

在玩了很多游戏之后，我设法想出了一些我可以持续复制的东西（至少在我这边）。以下是重新创建的步骤：

1）创建以下架构（如果您想要整个 xml 文件，请告诉我，我会发布）：

```
<fields>
    <field name="id" type="string" indexed="true" stored="true" required="true" />
    <field name="title" type="text" indexed="true" stored="false"/>
    <field name="start" type="slong" indexed="true" stored="false"/>
</fields> 
```

2) 使用 SolrJ 运行以下 Java 程序：

```
public class IndexTest {

    private static final SolrServer eventsServer = new HttpSolrServer("http://localhost:8983/solandra/events");

    public static void main(String... args)
    throws Exception {
        save2(1350028800000L);
        save2(1349424000000L);
        save2(1348992000000L);
        save2(1350028800000L);
        save2(1350115200000L);
        save2(1350374400000L);
        save2(1348992000000L);
        save2(1349424960000L);
        save2(1349424000000L);
        save1(1348992000000L);
        save1(1348999200000L);
        save1(1349431200000L);
        save2(1349164800000L);
        save2(1348992000000L);
        save2(1349424000000L);
        save1(1349444640000L);
        save2(1350633600000L);
    }

    private static void save1(long time)
    throws Exception {
        SolrInputDocument doc = new SolrInputDocument();

        doc.addField("id", "2ce011f0-0a80-11e2-bf94-b8f6b111caaf");
        doc.addField("title", "Test");
        doc.addField("start", time);

        eventsServer.add(doc);
        eventsServer.commit();
    }

    private static void save2(long time)
    throws Exception {
        SolrInputDocument doc = new SolrInputDocument();

        doc.addField("id", "5d9e18f0-0a80-11e2-bf94-b8f6b111caaf");
        doc.addField("title", "Test");
        doc.addField("start", time);

        eventsServer.add(doc);
        eventsServer.commit();
    }

} 
```

3) 运行以下查询以查看没有返回结果：

*   q=开始：[1348992000000 TO *]

    ```
    http://localhost:8983/solandra/events/select/?q=start:%5B1348992000000+TO+*%5D 
    ```

4) 运行以下查询以查看返回结果：

*   q=开始：[1349049600177 TO *]

    ```
    http://localhost:8983/solandra/events/select/?q=start:%5B1349049600177+TO+*%5D 
    ```

注意事项：

*   删除 commit() 似乎修复了这个特定的示例，但是当在其他时间省略提交时，我目睹了它。据我从 Jake Luciani 所写的评论中了解到，commit() 应该没有任何效果，所以我很困惑为什么这种变化会一直影响结果。

*   它似乎只在我索引了多个事件时才会发生（但不能确定，因为问题似乎在最随机的时间出现）。

*   为什么我不使用数据类型日期？我最初是这样做的，但认为特定的数据类型导致了这个问题，所以切换了。尝试过数据类型 date、long、slong、string 和 text。所有都表现出相同的零星缺失结果行为。另请注意，切换到不同的数据类型可能会修复特定示例，但在其他示例中会很明显。

*   已尝试直接从 github 使用 Solandra 代码作为现成的 Solandra 以及嵌入到最新的 Cassandra 发行版中。

这让我发疯，所以任何帮助或建议将不胜感激！

# c++ - 如何将 OpenGL 加载到 Visual Studio 2012 中

> ID：12657383
> 
> 赞同：3
> 
> 时间：2012-09-29T23:24:20.187
> 
> 标签：c++, opengl, graphics, load, allegro

我不明白如何加载 OpenGL 以便开始使用其中的函数。起初我以为它会像 Allegro 一样简单，我只是指定库的位置，但我想不是。

有人可以教我如何将 OpenGL 安装到 Visual Studio 2012 中，或者向我展示一个更简单、同样强大的图形库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:01:28.117

学习 OpenGL 的最佳方法是通过示例。第一次创建上下文并使其正确是很少见的。[在此处](http://www.dhpoware.com/index.html)浏览站点中的示例和演示。

这些示例在 VS 2010 中。您可以将它们转换为 VS 2012。

# delphi - 如何使用包含 Unicode？

> ID：12657388
> 
> 赞同：0
> 
> 时间：2012-09-29T23:25:18.537
> 
> 标签：delphi, delphi-xe2, delphi-2007

我正在尝试将一些代码从 D2007 移植到 DXE2。这个简化的代码在 D2007 中编译得很好。在 DXE2 中显示此错误：

```
[DCC Warning] Unit1.pas(10): W1050 WideChar reduced to byte char in set expressions.  Consider using 'CharInSet' function in 'SysUtils' unit.
[DCC Error] Unit1.pas(37): E2010 Incompatible types: 'AnsiChar' and 'Char' 
```

可能是一个unicode问题。有人可以告诉我为什么会发生这种情况以及我应该如何纠正它？

问候

编码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TSetOfChar = Set of Char;  // Line 10

  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    FCharacterSet: TSetOfChar;
  public
    property CharacterSet: TSetOfChar read FCharacterSet write FCharacterSet;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  CharacterSet: TSetOfChar;
  j: Integer;
  s: String;
begin
  CharacterSet := [];
  s := 'I''m just testing åäö';

  for j := 1 to Length(s) do
    Include(CharacterSet, s[j]);  // <- Line 37

end;

end. 
```

**编辑：**请注意，我使用的是没有泛型的 Delphi 2007。我想要在 D2007 中仍然有效的代码，因为有很多代码可以移植到 Unicode。这是一个缓慢的过程。当一切都被移植，验证它与 XE2 一起工作时，我们可以使用 XE2 的东西，比如泛型。与此同时，我们照常维护 D2007，我们希望避免在版本控制系统中创建 XE2 分支。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T23:37:53.323

这是标准的 Unicode Delphi 迁移素材。需要阅读 Marco Cantù 的论文 [白皮书：Delphi 和 Unicode](http://edn.embarcadero.com/article/38980)。如果您还没有阅读，请阅读。如果您最近没有阅读，请再次阅读。

产生警告的原因`set of char`是集合的基本类型不能超过 256 个值。但是由于`char`现在是 UTF-16，这比 256 多得多。所有这些都意味着您的代码永远无法使用集合和 UTF-16 字符。

您可以使用`set of AnsiChar`和`AnsiString`。但是，如果您希望此代码适用于 Unicode 数据，那么您需要使用`set`. 例如`TList<char>`可以使用。

```
var
  CharacterSet: TList<char>;
  s: string;
  c: char;
.....
CharacterSet := TList<char>.Create;
s := 'I''m just testing åäö';
for c in s do
  if not CharacterSet.Contains(c) then
    CharacterSet.Add(c); 
```

我不建议将其用于生产。它的性能特征将是可怕的。基于哈希的字典会做得更好。最棒的是专门的大型套装课程。

最后一点。字符与 UTF-16 中的代码点不同，UTF-16 是一种可变长度编码。有问题的代码和这个答案没有考虑到这一点。

# javascript - AngularJS 加载服务然后调用控制器并渲染

> ID：12657389
> 
> 赞同：21
> 
> 时间：2012-09-29T23:25:57.657
> 
> 标签：javascript, synchronization, sync, angularjs

我的问题是我需要在调用控制器和渲染模板之前加载服务。 [http://jsfiddle.net/g75XQ/2/](http://jsfiddle.net/g75XQ/2/)

**html:**

```
<div ng-app="app" ng-controller="root">
    <h3>Do not render this before user has loaded</h3>            
    {{user}}
</div>
​ 
```

**JavaScript：**

```
angular.module('app', []).
factory('user',function($timeout,$q){
    var user = {};            
    $timeout(function(){//Simulate a request
        user.name = "Jossi";
    },1000);
    return user;
}).
controller('root',function($scope,user){

    alert("Do not alert before user has loaded");
    $scope.user = user;

});
​ 
```

​</p>

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T00:28:28.180

[您可以使用手动初始化](https://docs.angularjs.org/guide/bootstrap#manual-initialization)来推迟角度应用程序的初始化，而不是使用`ng-app`属性自动初始化。

```
// define some service that has `$window` injected and read your data from it
angular.service('myService', ['$window', ($window) =>({   
      getData() {
          return $window.myData;
      }
}))    

const callService = (cb) => {
   $.ajax(...).success((data)=>{
         window.myData = data;
         cb(data)
   })
}

// init angular app 
angular.element(document).ready(function() {
       callService(function (data) {
          doSomething(data);
          angular.bootstrap(document);
       });
}); 
```

您的函数在哪里`callService`执行 AJAX 调用并接受成功回调，它将初始化 Angular 应用程序。

还要检查`ngCloak`指令，因为它可能是您需要的一切。

或者，在使用[ngRoute](https://docs.angularjs.org/api/ngRoute)时，您可以使用`resolve`属性，为此您可以看到 @honkskillet 答案

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-04T18:29:06.400

甚至比手动引导更好（这也不总是一个坏主意）。

```
angular.module('myApp', ['app.services'])
   .run(function(myservice) {
      //stuff here.
   }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-30T16:15:40.897

正如我在评论中所说，在控制器中处理卸载状态会容易得多，您可以从 $q 中受益，使其非常简单：http: [//jsfiddle.net/g/g75XQ/4/](http://jsfiddle.net/g/g75XQ/4/)

如果你想在加载用户时在控制器中做点什么：http: [//jsfiddle.net/g/g75XQ/6/](http://jsfiddle.net/g/g75XQ/6/)

编辑：要延迟路由更改直到加载某些数据，请查看此答案：[延迟 AngularJS 路由更改直到模型加载以防止闪烁](https://stackoverflow.com/questions/11972026/delaying-angularjs-route-change-until-model-loaded-to-prevent-flicker)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-09T14:57:49.377

实现这一点的正确方法是在路由定义上使用 resolve 属性：请参阅[http://docs.angularjs.org/api/ngRoute.$routeProvider](http://docs.angularjs.org/api/ngRoute.%24routeProvider)

然后使用 $q 服务创建并返回一个承诺；还使用 $http 发出请求并在响应时解决承诺。

这样，当路由被解析并加载控制器时，promise 的结果将已经可用并且不会发生闪烁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-10T21:39:49.333

您可以在 .config $routeProvider 中使用解析。如果返回一个 Promise（就像这里一样），则在解决或拒绝路由之前不会加载该路由。此外，返回值将可用于注入控制器（在本例中为 Somert）。

```
angular.module('somertApp')
  .config(function($routeProvider) {
    $routeProvider
      .when('/home/:userName', {
        /**/
        resolve: {
          Somert: function($q, $location, Somert) {
            var deferred = $q.defer();
            Somert.get(function(somertVal) {
              if (somertVal) {
                deferred.resolve(somertVal);
              } else {
                deferred.resolve();
                $location.path('/error/'); //or somehow handle not getting
              }
            });
            return deferred.promise;
          },
        },
      });
  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T23:54:55.310

有几种方法，有些方法比其他方法更先进，但在您的情况下 ng-hide 可以解决问题。见[http://jsfiddle.net/roytruelove/g75XQ/3/](http://jsfiddle.net/roytruelove/g75XQ/3/)

# asp.net-mvc - 在数据库中保存带有代码的教程

> ID：12657390
> 
> 赞同：0
> 
> 时间：2012-09-29T23:26:07.720
> 
> 标签：asp.net-mvc, razor, codemirror

如果我要建立一个包含教程和文章供人们阅读的网站，我将如何在数据库中保存用户文本和用户示例代码。知道例如教程可以显示一段解释某事然后显示一些示例代码，然后显示另一段描述某事的文本然后显示更多示例代码？我正在使用代码镜像来格式化代码并使其看起来不错。我很难弄清楚如何保存以及如何恢复信息并知道信息是文本还是代码。任何建议表示赞赏。:)

所以我在视图上寻找的格式：（所有这些都应该在一个列中吗？还是单独的代码和文本字段？

## - -段落 - -

-------------

## - -代码 - - - - -

* * *

## --更多文字--

， 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:30:27.307

一个内容列表，每条内容都有一个栏位来指定是代码、文本还是你以后添加的任何其他格式，还有一个栏位来存储段落或代码的文本。您可以改为使用二进制 blob 进行存储，这将允许您支持图像，但使用起来会变得很烦人。

```
public class Content {
   public string ContentType {get; set;}
   public string ContentText {get; set;}
}
public class Tutorial 
{
   public IList<Content> Content {get;set;}
} 
```

**剃刀**

```
@foreach(var content in Model.Content) {
   @Html.Partial(content.Type, content);
} 
```

或者，您可以为每个内容类型（从 IContent 继承）创建一个具体的内容，然后使用 DisplayFor 来呈现它，并使用一个 TPH 表进行存储。

# c++ - 使用 stdargs 对已定义函数的未定义引用

> ID：12657391
> 
> 赞同：2
> 
> 时间：2012-09-29T23:26:34.237
> 
> 标签：c++, templates, g++

今天是个好日子。

我需要你的 g++ 技能来了解发生在我身上的事情！

尝试链接时，g++ 告诉我：

```
undefined reference to `bool Script::Call<bool>(asIScriptFunction*, std::string, ...)' 
```

而该功能在该文件中明确定义：

```
namespace Script
{
  template<typename RET>
  RET Call(asIScriptFunction* function, string fmt, ...)
  {
    asIScriptContext* context = Script::Engine::Get()->CreateContext();
    va_list ap;

    context->Prepare(function);
    va_start(ap, fmt);
    for (unsigned short i = 0 ; fmt[i] ; ++i)
    {
      if (i == 'O')
    context->SetArgObject(i, va_arg(ap, void*));
      else if (i == 'b')
    context->SetArgByte(i, va_arg(ap, int));
      else if (i == 'i')
    context->SetArgDWord(i, va_arg(ap, int));
      else if (i == 'f')
    context->SetArgFloat(i, va_arg(ap, double));
    }
    va_end(ap);
    context->Execute();

    RET to_ret = ScriptCallGetReturn<RET>(context);
    context->Release();
    return (to_ret);
  }
}

namespace Script
{
  template<> bool  Call<bool> (asIScriptFunction*, string fml, ...);
  template<> int   Call<int>  (asIScriptFunction*, string fml, ...);
  template<> float Call<float>(asIScriptFunction*, string fml, ...);
  template<> void* Call<void*>(asIScriptFunction*, string fml, ...);

  template<>
  void Call<void>(asIScriptFunction* function, string fmt, ...)
  {
    asIScriptContext* context = Script::Engine::Get()->CreateContext();
    va_list ap;

    context->Prepare(function);
    va_start(ap, fmt);
    for (unsigned short i = 0 ; fmt[i] ; ++i)
    {
      switch (fmt[i])
      {
    case '0':
      context->SetArgObject(i, va_arg(ap, void*));
      break ;
    case 'b':
      context->SetArgByte(i, va_arg(ap, int));
      break ;
    case 'i':
      context->SetArgDWord(i, va_arg(ap, int));
      break ;
    case 'f':
      context->SetArgFloat(i, va_arg(ap, double));
      break ;
      }
    }
    va_end(ap);
    context->Execute();
    context->Release();
  }
} 
```

事实上，这些模板应该被编译（它们实际上在使用它们的同一个文件中）。发生这种情况的原因可能是什么？可能是因为我使用了 stdarg 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T23:29:22.350

该函数已声明，但未在此处实现。链接器正在寻找实现。请注意，仅`Call<void>`在您提供的代码中实现，但`Call<bool>`不是。

要使您的代码正确链接，您所要做的就是删除声明：

```
 template<> bool  Call<bool> (asIScriptFunction*, string fml, ...);
  template<> int   Call<int>  (asIScriptFunction*, string fml, ...);
  template<> float Call<float>(asIScriptFunction*, string fml, ...);
  template<> void* Call<void*>(asIScriptFunction*, string fml, ...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T23:54:21.763

> 模板<> bool 调用 (asIScriptFunction*, string fml, ...);

这不是在做你认为它在做的事情。这是声明`template <typename RET> Call`with `RET`<-的完整模板特化`bool`。你还没有定义它，旧的定义已经不存在了。函数模板特化是一种奇怪的野兽，最好避免。

我认为，您要做的是告诉编译器您将使用`Call`. 你不需要这样做。就用它吧。

```
bool variable_name = Call<bool> (some_script, other_args); 
```

# java - Java - 考虑 TimeZone 格式化 DateTime

> ID：12657394
> 
> 赞同：0
> 
> 时间：2012-09-29T23:27:04.183
> 
> 标签：java, date, timezone

1）所以，我有一个以秒为单位的日期和时间，时区偏移也以秒为单位。

eventTime = 1348880602
eventTimezoneOffset = -180

2）我这样打印出来：

```
Date date = new Date(eventTime);
SimpleDateFormat sdf = new SimpleDateFormat("E, MMM dd, yyyy @ h:mmaa");
System.out.println(sdf.format(date)); 
```

其产生：2012 年 9 月 28 日星期五晚上 10:03

3）但是，这是在我的机器上运行它时使用的。

当我在我的服务器上运行它时，它给了我：Fri, Sep 28, 2012 @ 9:03PM

因为我的服务器和我的机器上的时差。

4）所以，我试图使用 eventTimezoneOffset 来设置 Date 或 SimpleDateFormat 对象以表示正确时区时间的时间，而不管运行应用程序的服务器在哪里。

5) 我尝试在 SimpleDateFormat 上设置时区，但不确定如何在我拥有的几秒钟内使用 eventTimezoneOffset 来做到这一点。

6）澄清一下，这些事件可以在世界各地发生。自 Epoch 以来，每个事件都以秒为单位进行跟踪。因此，当仅查看 eventTime 时，它​​将显示应用程序正在运行的任何时区。为了获得事件的确切时间，考虑到位置时区，提供了 timezoneOffet。我只是不确定如何应用 timezoneOffset。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:46:09.907

使用`SimpleDateFormat`实例的`setTimeZone`方法设置时区：

```
SimpleDateFormat sdf = new SimpleDateFormat("E, MMM dd, yyyy @ h:mmaa");
sdf.setTimeZone(TimeZone.getTimeZone("UTC")); 
```

# javascript - 如何使用从.Append 函数创建的动态元素中的 JQuery 选择器？

> ID：12657395
> 
> 赞同：7
> 
> 时间：2012-09-29T23:27:03.270
> 
> 标签：javascript, jquery, html

我有这个循环创建几个包含元素的 div。我希望能够将点击事件附加到具有“linky”类的每个链接，并且该链接将读取 contentID 属性。

我一直在寻找，找到在动态创建的元素中使用选择器的案例，但不适用于我的案例。有小费吗？

```
 for (i = 0; i < msg.length; i++) {
                        var htmlCode = "<a href='/Controller/Details/" + msg[i].ID + "' style = 'float: left;'><img class='packageImage' border='0' src='" + msg[i].Size0Path + "' /></a>";
                        htmlCode += "<span style='float: left;margin: 5px 0px 0px 10px;'>" + "<b>" + msg[i].TheName + "</b><br>";

                        if (msg[i].IsPaused == true) {

                            htmlCode += "<a href='#bar' class=linky contentID='" + msg[i].ID + "'>Resume</a>";
                        } else {

                            htmlCode += "<a href='#bar' class=linky contentID='" + msg[i].ID + "'>Pause</a>";
                        }
                        htmlCode += "</span>";
                        htmlCode += "<div class='clear'></div>";
                        $("#divContent").append(htmlCode);
                    } 
```

鉴于答案，我试图将事件附加到类链接，但我只是不确定在哪里，请参阅下面的更多详细信息，我的说明是从 ajax 提交（发布）的结果创建动态元素。

```
 success: function (msg) {

                        $("body").on("click", "a.linky", function () {
                            alert($(this).attr("contentID"));
                        });

 for (i = 0; i < msg.length; i++) {
                            var htmlCode = "<a href='/Controller/Details/" + msg[i].ID + "' style = 'float: left;'><img class='packageImage' border='0' src='" + msg[i].Size0Path + "' /></a>";
                            htmlCode += "<span style='float: left;margin: 5px 0px 0px 10px;'>" + "<b>" + msg[i].TheName + "</b><br>";

                            if (msg[i].IsPaused == true) {

                                htmlCode += "<a href='#bar' class=linky contentID='" + msg[i].ID + "'>Resume</a>";
                            } else {

                                htmlCode += "<a href='#bar' class=linky contentID='" + msg[i].ID + "'>Pause</a>";
                            }
                            htmlCode += "</span>";
                            htmlCode += "<div class='clear'></div>";
                            $("#divContent").append(htmlCode);
                        }

 } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T23:28:58.187

使用 的委托形式[`on`](http://api.jquery.com/on/)：

```
$("body").on("click", "a.linky", function() {
    alert($(this).attr("contentID"));
}); 
```

在创建任何动态内容之前，您只需执行一次。它将附加一个事件处理程序，该事件处理程序`<body>`将响应满足`a.linky`被单击选择器的任何后代。在您附加处理程序时这些元素是否已经在 DOM 中或者它们是否稍后被添加并不重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T23:33:59.200

在这种情况下，您需要在创建元素后立即绑定事件。但是频繁的绑定和解除绑定是一种不好的模式。

因此，您应该委托该事件，即；将事件附加到这些控件的父容器，这些控件侦听其子级的事件并向其委托的子级提供事件。

尝试这个

```
$('body').on('click' , 'a.linky', function() {

      alert('Content id is : '+ $(this).attr('contentID'));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T23:48:14.630

只需在附加事件处理程序后找到该元素：

```
$("#divContent").append(htmlCode)
    .find('.linky')
    .click(function(){
        //your click handler
    }); 
```

# mysql - MySQL - 如何搜索 GUID

> ID：12657399
> 
> 赞同：2
> 
> 时间：2012-09-29T23:28:00.173
> 
> 标签：mysql

我正在使用第 3 方 .NET 库（Rhino Security），它将它的标识符作为 guid 存储在我的 mysql 数据库中的二进制（16）字段中。一切都可以从应用程序中完美运行，但是当我尝试通过查询编辑器（mysql 的 TOAD）手动运行查询时，不会为我知道存在的标识符返回任何行。例如，如果我运行以下查询，我不会得到任何结果：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where EntitySecurityKey  =  '02a36462-49b7-406a-a3b6-d5accd6695e5' 
```

在没有过滤器的情况下运行相同的查询会返回许多结果，包括在 EntitySecurityKey 字段中具有上述 GUID 的结果。是否有另一种方法来编写查询以搜索 guid/二进制字段？

谢谢！

**编辑**

我发现 TOAD 返回一个字符串而不是一个丑陋的 blob 很有趣。使用不同的编辑器返回结果（对于未过滤的查询），我得到了原始二进制数据。我会假设我的查询可以使用 binary 关键字，但以下都不起作用：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where EntitySecurityKey  =  BINARY '02a36462-49b7-406a-a3b6-d5accd6695e5'

SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where BINARY  EntitySecurityKey  =  '02a36462-49b7-406a-a3b6-d5accd6695e5' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:27:44.043

我不熟悉 Rhino Security，但据我所知，它使用 NHibernate 存储到数据库。

.net Guid 在内部使用 1 个 Int32、2 个 Int16 和 8 个字节来存储 128 位 Guid 值。当 NHibernate (3.2) 在 BINARY(16) 列中存储/检索 Guid 值时，它分别使用 .Net ToByteArray() 方法和 Guid(Byte[] ...) 构造函数。这些方法基本上交换了 Int32 和 Int16 值的字节顺序。您可以反思方法以查看确切的代码，但这里是前 4 个字节的简单示例：

```
guidBytes[0] = (byte)this._int32member;
guidBytes[1] = (byte)(this._int32member >> 8), 
guidBytes[2] = (byte)(this._int32member >> 16), 
guidBytes[3] = (byte)(this._int32member >> 24); 
```

这可能是您的问题的原因。

例如，您的 Guid 以不同的方式存储在 MySql 中。
**02a36462-49b7-406a-a3b6-d5accd6695e5** - 来自 Guid.ToString() 的 Guid
**6264a302-b749-6a40-a3b6-d5accd6695e5** - MySql 中的 Guid 使用 MySql hex(Guid)
注意：hex(x) 不添加破折号；为了比较，我手动添加了破折号。请注意，前 8 个字节的顺序是不同的。

要测试这是否是您的问题，请运行以下查询：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where EntitySecurityKey = UNHEX(REPLACE(6264a302-b749-6a40-a3b6-d5accd6695e5,'-','')); 
```

如果是这样，我在自己的旅行中注意到的其他一些项目：

Toad for MySql 也使这一点复杂化，因为它会在 select 语句输出中将 Guid 显示为 .net 等效项。如果您将该 Guid 包含在 select 的 where 子句中（至少根据我的经验），它不会应用相同的转换。您需要使用 MySql 存储的 Guid。

您将需要在执行数据库查询时手动转换 Guid，或者您可能需要引入自定义 NHibernate 类型来以不同方式转换 Guid。

你可以参考：

*   [如何将 .NET Guid 读入 Java UUID](https://stackoverflow.com/questions/5745512/how-to-read-a-net-guid-into-a-java-uuid)
*   [http://pastebin.com/M07wnK5K](http://pastebin.com/M07wnK5K)（这段代码我没用过，但觉得很有参考价值）

**更新：** 我刚刚在上面的 pastebin 链接上尝试了自定义 NH 类型。字节顺序不正确，至少对于我的环境。我会需要：

```
private static readonly int[] ByteOrder = new[] { 3, 2, 1, 0, 5, 4, 7, 6, 8, 9, 10, 11, 12, 13, 14, 15 }; 
```

通过 .Net 输出匹配表输出中的选择十六进制（Guid 列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:53:52.607

令我感到有趣的是，您将 GUID 存储在`binary(16)`强调**16**的字段中。根据[手册](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)，`binary`字段的长度以字节为单位，并将截断超过它的任何内容（尽管仅在严格模式下）。您的 GUID 是否有可能被截断？使用您的示例 GUID，`02a36462-49b7-406a-a3b6-d5accd6695e5`尝试使用前 16 个字符查询数据库：

```
WHERE EntitySecurityKey = '02a36462-49b7-40' 
```

根据[这个问题](https://stackoverflow.com/questions/412341/how-should-i-store-guid-in-mysql-tables)的公认答案，一个字段应该是`char(16) binary`存储一个 GUID，而不仅仅是`binary(16)`. 但是，我无法在我的示例表中使用它。

*对*我有用的是 using `char(36)`and `binary(36)`。尝试将您的字段长度更新为 36 而不是 16（为了安全起见，我首先在测试表上执行此操作）。

这是我的测试表：

```
CREATE TABLE test_security_keys (
    test_key1 char(16) not null,
    test_key2 char(16) binary not null,
    test_key3 char(36) not null,
    test_key4 binary(16) not null,
    test_key5 binary(36) not null
); 
```

然后，我运行了一个脚本来插入大量 GUID（一行中的每一列都使用相同的 GUID）。您可以使用示例 GUID 对其进行测试：

```
INSERT INTO test_security_keys
    VALUES ('02a36462-49b7-406a-a3b6-d5accd6695e5', '02a36462-49b7-406a-a3b6-d5accd6695e5', '02a36462-49b7-406a-a3b6-d5accd6695e5', '02a36462-49b7-406a-a3b6-d5accd6695e5', '02a36462-49b7-406a-a3b6-d5accd6695e5'); 
```

使用 simple将显示除大小被截断`SELECT * FROM test_security_keys`的列之外的所有列。`36`另外，`binary`无论是否，我都能够使用常规字符串比较成功地查询列：

```
SELECT * FROM test_security_keys WHERE test_key3 = '02a36462-49b7-406a-a3b6-d5accd6695e5';
SELECT * FROM test_security_keys WHERE test_key5 = '02a36462-49b7-406a-a3b6-d5accd6695e5'; 
```

如果您已确认您当前的列`binary(16)` *没有被*截断，那么我建议`CAST()`在您的`WHERE`子句中使用 a 。以下应该有效（使用您的示例查询）：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
WHERE
    EntitySecurityKey = CAST('02a36462-49b7-406a-a3b6-d5accd6695e5' AS binary(16)); 
```

如果您`CAST(.. AS binary(16))`和输入数据长于 16 个字节，MySQL 应该发出警告（应该不可见且不会影响任何内容），说明它必须截断数据（`SHOW WARNINGS;`如果您得到它们，请尝试）。这是意料之中的，但也意味着您不能用于`binary(16)`存储 GUID，您需要使用`binary(36)`or `char(36)`。

***我没有`TOAD`使用.

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-09T03:55:05.803

当我评估其他人如何“搜索”主键为二进制类型的记录（主要是表示 GUID 的二进制（16））以将其与我自己的比较时，我遇到了这个问题。我必须承认我有点退缩，因为答案很快就偏离了用户希望基于二进制字段进行手动搜索的愿望，而是专注于将列类型本身更改为字符，在这种情况下，这是对 InnoDB 存储的谋杀.

缺少结果的尝试解决方案是搜索 Id 列而不是 EntitySecurityKey 列。鉴于 JP 的原始查询，修改后的工作版本将是：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where Id  =  UNHEX(REPLACE('02a36462-49b7-406a-a3b6-d5accd6695e5', '-', '')); 
```

同样，这假设 Id 字段是 binary(16) 类型。（我无法确定哪一列：Id，EntitySecurityKey 是二进制（16））。如果 EntitySecurityKey 是 binary(16) 列，则：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where EntitySecurityKey  =  UNHEX(REPLACE('02a36462-49b7-406a-a3b6-d5accd6695e5', '-', '')); 
```

[如果根据这个问题（如何将 .NET Guid 读入 Java UUID](https://stackoverflow.com/questions/5745512/how-to-read-a-net-guid-into-a-java-uuid) ）未能产生预期的结果，尝试相同的查询但 GUID 的前三个部分的字节序颠倒是有意义的：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where Id  =  UNHEX(REPLACE('6264a302-b749-6a40-a3b6-d5accd6695e5', '-', '')); 
```

我唯一能想到的另一件事是 EntitySecurityKey 是一个基于 Id 的虚拟列，但我没有足够的关于表设置的信息来验证这个语句。

干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T18:13:30.357

从您的编辑中，我对其进行了一些修改：

请试试

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences
WHERE EntitySecurityKey  = X'02a3646249b7406aa3b6d5accd6695e5' 
```

由于每个字符串都有 16 个十六进制字节，因此它可以工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T20:06:02.260

您是否检查过表格中 GUID 数据的实际外观？由于它是主键，它很可能不会存储为 GUID 字符串。如果是这种情况，查询字符串值显然是行不通的。

可能是二进制格式？或者它可能是一个字符串但没有连字符？或者也许它已经以其他方式转换了？不看你的数据我不知道。但无论如何，如果在查询时没有找到您知道存在的 GUID，那么无论它采用何种格式，它显然都不是以您查询的格式存储的。

我解决这个问题的方法是在您知道存在的记录中搜索不同的值。`where`或者甚至只是在没有子句的情况下查询前几条记录。

这将向您展示数据的实际外观。运气好的话，这足以让您弄清楚它是如何格式化的。

如果这没有帮助，一个可能的线索可能来自这个问题：[为什么二进制 Guids 与通常的表示不同](https://stackoverflow.com/questions/5003061/why-are-binary-guids-different-from-usual-representation)

希望有帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-12T13:07:12.367

不确定您的数据库是如何设置的，但我会尝试以下两种变体：

```
SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where EntitySecurityKey  =  x'02a3646249b7406aa3b6d5accd6695e5'

SELECT Id, EntitySecurityKey, Type
FROM mydb.security_entityreferences 
where EntitySecurityKey  =  x'6264a302b7496a40b6a3d5accd6695e5' 
```*

# windows - Mod_rewrite 在 Windows 和 Ubuntu 上的结果不同

> ID：12657401
> 
> 赞同：0
> 
> 时间：2012-09-29T23:29:11.053
> 
> 标签：windows, linux, .htaccess, mod-rewrite, ubuntu

我设置了以下重写规则

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ core/index.php [L] 
```

网站架构是

```
newsite
 ﹂ .htaccess
 ﹂ core
     ﹂ index.php 
```

如果我在 Windows 上使用 url：**http://localhost/web/newsite/test**
， 它将重定向到**/web/newsite/core/index.php**
并且它可以工作！

但如果在 Ubuntu 上使用 URL **http://localhost/~user1/web/newsite/test**
它将重定向到**/home/user1/public_html/web/newsite/core/index.php**
而不是**/~user1/web/newsite/ core/index.php**

那么，我该如何解决这个问题呢？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:29:40.723

`RewriteBase`在您的规则上方添加一个：

```
RewriteBase /~user1/web/newsite/ 
```

ubuntu 上的 Apache 试图猜测重写规则的目标是 URI 路径还是文件路径，并且它猜测不正确，因此您必须告诉它真正的相对 URI 基数是什么。

# apache - 如何设置使用 apache2 服务器加载哪个文件夹？

> ID：12657405
> 
> 赞同：0
> 
> 时间：2012-09-29T23:29:35.960
> 
> 标签：apache, apache2, linode

我的朋友向我介绍了 Linode 和 register.com，所以我现在正在玩它。我已经获得了一个域名，而在我的 Linode 服务器上，我正在尝试设置一个基本网页，以便我可以开始将它用于我的个人网站。我正在按照[http://library.linode.com/hosting-website#sph_web-server](http://library.linode.com/hosting-website#sph_web-server)进行设置。

这是问题，我`testsite`在我的 linode 服务器上创建了一个文件夹，以及一个`/etc/apache2/sites-available/testsite`可以在`sudo a2ensite testsite`命令中调用的文件。（所有这些都是教程的一部分。）但是当我希望切换该网站的内容时，我创建了 a`testsite1`和 a `/etc/apache2/sites-available/testsite1`，然后我做了`sudo a2ensite testsite1`，但我不知道如何让 apache 从我的`testsite1`文件夹中读取内容而不是`testsite`文件夹。我这样做的方式是我尝试`sudo a2dissite testsite`，所以内容`testsite1`可以阅读。但我希望有更好的方法来做到这一点。另外我听说 apache2 可以同时处理多个服务器。如何在我的 linux 机器上分配哪个服务器加载哪个文件夹？（例如，如果我有 abc.net 和 efg.net，我已经将它们都链接到我的 linode 服务器，如何让 abc.net 去读取我的 linux 服务器中的 abc 文件夹，而 efg.net 加载我的 efg 文件夹？）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:34:45.733

您需要编辑通常位于`/etc/apache2/conf`. 然后编辑 httpd.conf 文件并在此文件中查找“文档根”设置。将其更改为`/etc/apache2/sites-available/testsite1`然后重新启动apache：`/etc/init.d/apache2 restart`

# ios - 在设备旋转时更改 UIWebView 框架

> ID：12657413
> 
> 赞同：2
> 
> 时间：2012-09-29T23:31:25.493
> 
> 标签：ios, objective-c, uiwebview, landscape, autorotate

我正在开发一个锁定为纵向模式的应用程序。然而，一种视图充当各种媒体类型的全屏“播放器”。

我正在使用具有`UIView`子`UIWebview`视图的子类来播放媒体。这在查看堆栈的顶部全屏显示。我的问题出现在只为横向内容旋转这个视图 - 例如视频和 pdf。

为了进行旋转，我在 init 方法中设置了一个观察者：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(deviceRotated:)
                                                 name:UIDeviceOrientationDidChangeNotification
                                               object:nil]; 
```

并如此旋转：

```
- (void)deviceRotated:(NSNotification *)notification {
UIDeviceOrientation orientation = [[notification object] orientation];
    if (orientation == UIDeviceOrientationLandscapeLeft) {
        [UIView animateWithDuration:0.6f delay:0.0 options:UIViewAnimationCurveEaseInOut
                     animations:^{ [self.webView setTransform:CGAffineTransformMakeRotation(M_PI / 2.0)]; }
                     completion:nil];
    } 
    else if (orientation == UIDeviceOrientationLandscapeRight) {
        [UIView animateWithDuration:0.6f delay:0.0 options:UIViewAnimationCurveEaseInOut
                     animations:^{ [self.webView setTransform:CGAffineTransformMakeRotation(M_PI / -2.0)]; }
                     completion:nil];
    } 
    else if (orientation == UIDeviceOrientationPortraitUpsideDown) {
        [UIView animateWithDuration:0.6f delay:0.0 options:UIViewAnimationCurveEaseInOut
                     animations:^{ [self.webView setTransform:CGAffineTransformMakeRotation(M_PI)]; }
                     completion:nil];
    } 
    else if (orientation == UIDeviceOrientationPortrait) {
        [UIView animateWithDuration:0.6f delay:0.0 options:UIViewAnimationCurveEaseInOut
                     animations:^{ [self.webView setTransform:CGAffineTransformMakeRotation(0.0)]; }
                     completion:nil];
    }
} 
```

我知道我需要改变`self.webView`旋转时的框架大小，但我得到了奇怪的结果。

我尝试将容器视图设置为具有长度的大“正方形”`[[UIScreen mainscreen] bounds].size.height`并将 Web 视图放置在中间，但它的移动不一致 - 似乎宽度和高度值是从旋转前的尺寸中设置的。

我也尝试过设置`autoResizingMask`灵活的高度和宽度，但是由于容器视图不在屏幕上，这也会将 Web 视图拉伸到屏幕外。

# python - 具有自定义比较功能的 SequenceMatcher

> ID：12657415
> 
> 赞同：2
> 
> 时间：2012-09-29T23:31:38.027
> 
> 标签：python

我尝试执行以下代码：（在 python 中）

```
from difflib import SequenceMatcher as sm
class myint(int):
    def __cmp__(self , other):
        return 0
    def __eq__(self , other):
        return True

a = myint(1)
b = myint(2)  
c = myint(3)  
d = myint(1)
e = myint(2)
f = myint(3)
x = [a,b,c]
y = [f,e,d]
q = sm(None,x,y) 
```

如您所见，在这些代码中，我尝试使用自定义比较函数，这样 myint 的每两个实例都是相等的。但是，当我使用 SequenceMatcher 比较具有相同长度的两个 myint 列表时，我得到了一个意外的结果：

```
>>> q.ratio()
1:  0.3333333333333333 
```

而不是 1.0。我看到 SequenceMatcher 使用了数字之间的常规比较而不是我的比较，尽管列表由“myint”类型的对象组成。
我如何编写 myint 类，以便 SequenceMatcher 将返回 1.0，如 exepted 一样？
（或使用具有自定义比较功能的 SequenceMatcher 的任何其他想法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T00:11:02.090

看起来你遇到的问题是：

```
y = [f,e,d] 
```

应该

```
y = [d,e,f] 
```

当您进行此更改时， q.ratio() 将返回 1

```
>>> from difflib import SequenceMatcher as sm
>>> class myint(int):
...     def __cmp__(self , other):
...         return 0
...     def __eq__(self , other):
...         return True
... 
>>> a = myint(1)
>>> b = myint(2)  
>>> c = myint(3)  
>>> d = myint(1)
>>> e = myint(2)
>>> f = myint(3)
>>> x = [a,b,c]
>>> y = [d,e,f]
>>> q = sm(None,x,y)
>>> q.ratio()
1.0 
```

# objective-c - UICollectionView cellForItemAtIndexPath 未注册单元格

> ID：12657421
> 
> 赞同：33
> 
> 时间：2012-09-29T23:33:40.190
> 
> 标签：objective-c, ios, xcode, ipad, uicollectionview

我正在尝试使用`UICollectionViewCell`，因为我想要显示的只是一张图片。我可以使用'属性将图像添加到单元格中`UIColor colorWithImage:`。`UICollectionViewCell``contentView`

在我的`loadView`方法中，我正在注册单元格，如下所示： `[self.collectionView registerClass:[ImageCell class] forCellWithReuseIdentifier:@"MyCell"];`

下面是我的`cellForItemAtIndexPath`方法：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];
    // cell customization
    return cell;
} 
```

当我运行它时，一旦它到达出队行，它就会崩溃并出现以下错误：

```
*** Assertion failure in -[UICollectionView _dequeueReusableViewOfKind:withIdentifier:forIndexPath:]

Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'could not dequeue a view of kind: UICollectionElementKindCell with identifier MyCell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard' 
```

我厌倦了设置自定义单元格，并将其用作类，我得到了同样的错误。我的自定义单元格是 UICollectionViewCell 的子类，除了默认的`initWithFrame`. 那是因为我只想更改视图的背景颜色。我不确定问题是什么，但有人可以看看我的代码并帮助我吗？我一直试图弄清楚这一点，但完全没有运气。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-30T05:04:34.157

如果你只是想显示一张图片，你不需要做任何子类化，你可以设置单元格`backgroundColor`的`colorWithPatternImage:`. 像这样注册类：

```
[self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"Cell"]; 
```

然后像这样使用它：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    cell.backgroundColor = [UIColor colorWithPatternImage:[self.results objectAtIndex:indexPath.row]];
    return cell;
} 
```

在此示例中，结果是`array`的`UIImages`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-18T06:23:19.640

如果您在应用程序中使用 xib，则在您的 viewdidLoad 方法中添加以下内容

```
 [self.myCollectionView registerNib:[UINib nibWithNibName:@"CollectionViewCell" bundle:nil] forCellWithReuseIdentifier:@"CellIdentifier"]; 
```

否则，如果您使用情节提要，请添加以下内容

```
 [self.myCollectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"CellIdentifier"]; 
```

最后添加这个（如果没有）

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CellIdentifier" forIndexPath:indexPath];
 return cell;
} 
```

以上希望对您有所帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-08T21:26:18.353

尝试设置断点

```
[self.collectionView registerClass:[ImageCell class] forCellWithReuseIdentifier:@"MyCell"]; 
```

我猜你的 loadView （你的意思是 viewDidLoad 吗？）方法没有被调用，所以这个类永远不会在 collectionView 中注册。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-06T09:51:23.553

如果您的集合视图连接到情节提要上并且在那里设置了委托和数据源，并且您为数据源和委托提供了必要的方法，那么添加注册调用会使

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

返回 a`UICollectionView`而不是您自己的子类。所以要么做，但不能两者兼而有之。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-15T09:22:29.650

将您的单元格标识符名称设置为代码

![在此处输入图像描述](../Images/0d1058c115b665128797a0f23e73096e.png)

# mercurial - 如何仅将 public_html 克隆到服务器上的文件夹中？

> ID：12657423
> 
> 赞同：0
> 
> 时间：2012-09-29T23:34:01.410
> 
> 标签：mercurial, bitbucket

我已经在本地机器上对我的整个项目进行了版本控制，现在我基本上想使用 Mercurial 将我的所有文件上传到我的服务器并使其保持最新状态。

我有一个`public_html`文件夹，它是项目根目录的子文件夹。我只想将该文件夹克隆到我的服务器上具有不同名称的特定文件夹中（它`htdocs`在服务器上调用，并且无法重命名）。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:56:03.203

是的，您不能只克隆存储库的一部分。如果您只想要 public_html 它需要是它自己的存储库。

# java - 如何检查命令是否成功？

> ID：12657424
> 
> 赞同：2
> 
> 时间：2012-09-29T23:34:08.553
> 
> 标签：java, android, shell, su

可以说我有这个代码

```
moveDirectory.setOnClickListener(new OnClickListener(){
public void onClick(View v)
{
    try{
        Process send = Runtime.getRunetime().exec(new String[] {"cd /sdcard/music/", "cp pic1 /sdcard/pic1"});
        send.waitFor();
    } catch (Exception ex){
        String toast = null;
        Log.i(toast, "Couldn't copy file", ex);
        }
    }
}); 
```

如果它无法复制“pic1”，我该如何检查它？所以我可以让用户知道使用 Toast 吗？我唯一的想法是在那之后编写代码以检查“pic1”是否在正确的路径中（在本例中为“/sdcard/”），但也许有更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:53:52.867

您可以阅读命令输出。在 cp 命令中，没有输出意味着没有错误，如果有输出，您可以将其显示给用户以告知错误。

要阅读命令输出，您应该添加如下内容：

```
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(send.getInputStream()));  

String line;  
ArrayList<String>  output = new ArrayList<String>(); 

while ((line = bufferedReader.readLine()) != null){ 
  output.add(line); 
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T00:39:20.250

**首先，您对exec**的调用似乎不是预期的。根据文档，如果您将其传递给 String 数组，则数组的第一个元素是命令，其余元素是参数。在这里，您有两个命令。

您可以非常轻松地使用一个命令并使用 exec 的单个 String 调用来编写它：

```
 Process send = Runtime.getRuntime().exec("cp /sdcard/music/pic1 /sdcard/pic1"); 
```

其次，waitFor 不会抛出任何异常**来**表明命令没有成功。根据文档，他们只检查将抛出的异常是指示当前线程已被中断，在这种情况下，命令可能甚至还没有完成。

您需要做的是检查进程的退出状态代码。这是**waitFor**方法返回的值。进程/程序返回存在状态 0 表示成功和其他一些值表示错误是常见的做法。所以代码应该是：

```
 Process send = Runtime.getRunetime().exec("cp /sdcard/music/pic1 /sdcard/pic1");
  try {
    if (send.waitFor() != 0) {
        String toast = null;
        Log.i(toast, "Couldn't copy file", ex);
    }
  } catch (InterruptedException e) {
    // up to you how to recover this situation.
  } 
```

第三也是最重要的......如果你想做的是复制文件，则无需为此调用系统。您可以使用**java.io** API 编写您自己的文件复制程序...但更好地重用 apache commons **FileUtils**帮助类。

```
import org.apache.commons.io.FileUtils;
import java.io.File;

...
FileUtils.copyFile(new File("/sdcard/music/pic1"),new File("/sdcard/music"))
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:44:05.907

您是否尝试过 send.exitValue() 然后检查它是否是像 -1 这样的错误代码

# php - Cms 无法正确安装

> ID：12657425
> 
> 赞同：0
> 
> 时间：2012-09-29T23:34:24.887
> 
> 标签：php, html, mysql, dynamic, content-management-system

我一直在测试我要尝试构建的 cms，但我遇到了一些错误。它应该在任何地方显示任何“动态”（我认为这就是它的名称）。

```
Warning: mysqli::prepare() [mysqli.prepare]: (42S02/1146): Table 'dbarr_testing.content' doesn't exist in /home/dbarr/public_html/frontcms/app/cms/models/m_cms.php on line 101 
```

这是：http: [//22twenty.com/frontcms/](http://22twenty.com/frontcms/)

希望有人可以帮助

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:42:32.067

这实际上与IE无关，而是与cms的安装有关。错误说：

```
Table 'dbarr_testing.content' doesn't exist in ... 
```

这意味着您的数据库未正确初始化。您已经创建了数据库本身 ( `dbarr_testing`)，但没有创建为您的视图保存“动态”数据的表 ( `content`)。

您正在使用的 cms 的文档应该包含一个脚本来为您执行此操作，或者告诉您如何创建它们。您需要的命令将与此类似（但可能更复杂）：

```
CREATE TABLE content(
  id INT NOT NULL AUTO_INCREMENT, 
  PRIMARY KEY(id),
  title VARCHAR(255),
  body TEXT
); 
```

# java - 主线程没有被中断

> ID：12657428
> 
> 赞同：0
> 
> 时间：2012-09-29T23:35:02.423
> 
> 标签：java, multithreading

我写了一个代码，如果被测试的数字是一个快乐的数字，则打印 1，否则打印 0。

```
class Ishappy extends Thread {
    private Integer num;
    private Thread main;
    private volatile boolean out = false;

    Ishappy(int i, Thread main) {
        this.main = main;
        num = i;
    }

    void Exit() {
        out = true;
    }

    @Override
    public void run() {
        while(!out && num != 1) {
            if(num == 1) {
                main.interrupt();
                break;
            }

            String s = num.toString();
            int temp = 0;
            for(int i = 0 ; i < s.length(); i++) {
                int x = Integer.parseInt(s.substring(i, i+1));
                temp += x*x;
            }
            num = temp;
        }
    }
}

public class Happy_numbers {
    public static void main(String[] args) {
        byte path[] = null;

        String s = "d:\\data.txt";

        try(FileInputStream fin = new FileInputStream(s)) {
            InputStreamReader in = new InputStreamReader(fin);
            BufferedReader br = new BufferedReader(in);
            s = br.readLine();
            int num;
            while(s != null) {
                num = Integer.parseInt(s);

                Ishappy ishappy = new Ishappy(num,Thread.currentThread()); 
                ishappy.start();
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException ex) {
                    System.out.println(1);
                    continue;
                }
                if(ishappy.isAlive()) {
                    ishappy.Exit();
                    System.out.println(0);
                } else
                    System.out.println(11);

                s = br.readLine();
            }
        } catch (FileNotFoundException ex) {
            System.out.println("File not found.");
        }catch(IOException ex){
        }
    }
} 
```

但是上面的代码总是打印 11 作为一个快乐的数字，这意味着`main`永远不会被打断。怎么了？？

data.txt 的内容是

```
1
7
22 
```

其中 1 和 7 是快乐数字，而 22 不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:42:46.430

当我阅读您的程序时，第一次通过主循环时，`IsHappy`将分叉一个新线程，并将其`num`设置为`1`. 在`IsHappy.run()`方法中，if `num`is`1`立即退出。

```
while(!out && num != 1) 
```

`main`将休眠然后打印`11`，因为线程不再运行。

```
if(ishappy.isAlive()) {
    ishappy.Exit();
    System.out.println(0);
} else
   System.out.println(11); 
```

这不是你所期望的吗？我认为您应该学习如何使用调试器。这是一个关于如何[在 Eclipse 中调试程序](http://www.vogella.com/articles/EclipseDebugging/article.html)的好教程。

如果`7`处理了数字，则该`IsHappy.run()`方法将旋转，一遍又一遍地 设置`num`为`49`( )。然后会看到它还活着并且会调用并且会打印。`7*7``main``IsHappy``IsHappy.Exit()``0`

如果`21`处理了数字，则该`IsHappy.run()`方法将旋转，一遍又一遍地 设置`num`为`5`( )。将再次线程和打印。`2*2+1*1``main``Exit()``0`

所以我猜你的输出是：

```
11
0
0 
```

`main`线程永远不会被中断，因为循环`while`将阻止它运行 if `num == 1`。

关于您的代码的其他一些评论。这可能是测试代码，所以没关系，但要学究：

*   永远不要捕获并丢弃异常（请参阅您的`IOException`捕获）。至少在一个空的 catch 块中添加注释，解释*为什么*你不关心异常。
*   您的线程正在旋转进行计算。这显然不是对资源的良好利用。
*   您没有关闭任何输入流或阅读器。在处理这些问题时，请始终使用 try/finally。
*   `Exit()`方法应以小写字母开头。该方法的更好名称是`stop`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:58:02.327

我认为这里不需要线程，如果数字的平方和等于 1，那么快乐的数字就是快乐的。如果序列包含一个已经测试过的数字。只是终止。

来自维基百科

> 如果 n 不高兴，那么它的序列不会变为 1。相反，它最终会进入循环。

```
public class Happy_numbers {        
    static int[]SQUARES={0,1,4,9,16,25,36,49,64,81};
    public static boolean is_happy(int n){
        return is_happy(n, new HashSet<Integer>());
    }
    public static boolean is_happy(int n, Collection<Integer> sofar){
        if(n==1) return true;
        else if(sofar.contains(n)) return false;

        sofar.add(n);

        if(n<10) {
            return is_happy(SQUARES[n], sofar);
        }

        char[]digits=String.format("%s", n).toCharArray();
        int s = 0;
        for(char c:digits){
            s+= SQUARES[Integer.valueOf(String.format("%s", c))];
        }

        return is_happy(s, sofar);
    }
    public static void main(String[]args){
        Collection<Integer> c1 = Arrays.asList(
                1, 7, 10, 13, 19, 23, 28, 31, 32, 44, 49, 68, 70, 79, 82, 86, 91, 94, 97, 
                100, 103, 109, 129, 130, 133, 139, 167, 176, 188, 190, 192, 193, 203, 208, 
                219, 226, 230, 236, 239, 262, 263, 280, 291, 293, 301, 302, 310, 313, 319, 
                320, 326, 329, 331, 338, 356, 362, 365, 367, 368, 376, 379, 383, 386, 391, 
                392, 397, 404, 409, 440, 446, 464, 469, 478, 487, 490, 496 );
        Collection<Integer> c2 = new ArrayList<Integer>(c1.size());
        long t = System.currentTimeMillis();
        int c = 1;
        for(int i=0;i<500;i++){
            if(is_happy(i)) {
                System.out.print(i+", ");
                if(c++ % 20 == 0) System.out.println();
                c2.add(i);
            }

        }
        t = System.currentTimeMillis()-t;
        System.out.println("\nTIME : " + t);
        System.out.println("Got them all < 500 : " + (c2.containsAll(c1) && c1.containsAll(c2)));
    }
} 
```

它还可以通过使用地图或任何缓存技术进一步改进，因此如果一个数字很高兴并且您之前已经计算过这个数字，则无需再次执行相同的操作。来自维基百科，

> 500以下的幸福数字是：1、7、10、13、19、23、28、31、32、44、49、68、70、79、82、86、91、94、97、100、103、109 , 129, 130, 133, 139, 167, 176, 188, 190, 192, 193, 203, 208, 219, 226, 230, 236, 239, 262, 263, 280, 291, 293, 301, 302, 310 , 313, 319, 320, 326, 329, 331, 338, 356, 362, 365, 367, 368, 376, 379, 383, 386, 391, 392, 397, 404, 409, 440, 446, 464, 469 , 478, 487, 490, 496（OEIS 中的序列 A007770）。

上面的代码需要 435 才能得到所有低于 500 的快乐数字。

```
1, 7, 10, 13, 19, 23, 28, 31, 32, 44, 49, 68, 70, 79, 82, 86, 91, 94, 97, 100, 
103, 109, 129, 130, 133, 139, 167, 176, 188, 190, 192, 193, 203, 208, 219, 226, 230, 236, 239, 262, 
263, 280, 291, 293, 301, 302, 310, 313, 319, 320, 326, 329, 331, 338, 356, 362, 365, 367, 368, 376, 
379, 383, 386, 391, 392, 397, 404, 409, 440, 446, 464, 469, 478, 487, 490, 496, 
TIME : 435
Got them all < 500 : true 
```

因此，我对您的代码进行了一些更改，以允许记住到目前为止计算的内容，至少对于当前数字。

```
public class Happy_numbers {

    static class Ishappy extends Thread {
        private Integer num;
        private Thread main;
        private volatile boolean out = false;

        private boolean unhappy = false;

        Ishappy(int i, Thread main) {
            this.main = main;
            num = i;
        }

        public boolean isUnhappy() {
            return unhappy;
        }

        void Exit() {
            out = true;
        }

        @Override
        public void run() {
            Set<Integer> sofar = new HashSet<Integer>();
            while(!out && num != 1) {
                unhappy = sofar.contains(num);
                if(num == 1 || unhappy) {
                    main.interrupt();
                    break;
                }

                sofar.add(num);

                String s = num.toString();
                int temp = 0;
                for(int i = 0 ; i < s.length(); i++) {
                    int x = Integer.parseInt(s.substring(i, i+1));
                    temp += x*x;
                }
                num = temp;
            }
        }
    }

    public static void main(String[] args) throws Exception{
        byte path[] = null;

        String s = "./data.txt";

        FileInputStream fin = new FileInputStream(s);
        InputStreamReader in = new InputStreamReader(fin);
        BufferedReader br = new BufferedReader(in);
        int num;
        while((s = br.readLine()) != null) {
            num = Integer.parseInt(s);

            Ishappy ishappy = new Ishappy(num,Thread.currentThread()); 
            ishappy.start();
            ishappy.join();
            if(ishappy.isUnhappy()){
                System.out.println("Number ["+num+"] is not happy");
            }else{
                System.out.println("Number ["+num+"] is happy");
            }
        }
        br.close();
        in.close();
        fin.close();
    }
} 
```

输出是

```
Number [1] is happy
Number [7] is happy
Number [22] is not happy 
```

**编辑**

我找到了主线程不被中断的原因。

在主 while 循环中，您检查 num 是否为 1，如果它是 1，您将不会进入检查 num 的值并基于哪个中断主线程的 if 条件。

```
public class Happy_numbers {
    public static void main(String[] args) throws IOException{

        String s = "./data.txt";

        FileInputStream fin = new FileInputStream(s);
        InputStreamReader in = new InputStreamReader(fin);
        BufferedReader br = new BufferedReader(in);
        int num;
        while((s = br.readLine()) != null) {
            num = Integer.parseInt(s);

            Ishappy ishappy = new Ishappy(num,Thread.currentThread()); 
            ishappy.start();
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                System.out.println(1);
                continue;   // here is another problem, infinit loop
            }
            if(ishappy.isAlive()) {
                ishappy.Exit();
                System.out.println(0);
            } else
                System.out.println(11);

        }
        br.close();
        in.close();
        fin.close();
        System.out.println("DONE");
    }
} 
```

这是Ihappy课

```
class Ishappy extends Thread {
    private volatile Integer num;
    private Thread main;
    private volatile boolean out = false;

    Ishappy(int i, Thread main) {
        this.main = main;
        num = i;
    }

    void Exit() {
        out = true;
    }

    @Override
    public void run() {
        while(!out) {   /// <- here was the problem
            if(num.intValue() == 1) { // since this condition will break out
                main.interrupt();     // of the loop, you do not need it in the
                break;                // while condition
            }

            String s = num.toString();
            int temp = 0;
            for(int i = 0 ; i < s.length(); i++) {
                int x = Integer.parseInt(s.substring(i, i+1));
                temp += x*x;
            }
            num = temp;
        }
    }
} 
```

输出是

```
1
1
0
DONE 
```

# c - C 从管道块中读取，直到子终止

> ID：12657430
> 
> 赞同：1
> 
> 时间：2012-09-29T23:35:20.870
> 
> 标签：c, exec, pipe

父进程创建 N 个子进程，每个子进程都用 exec 替换自己。parent 和 exec 之间通过管道数组（**int pipefd[N][2];**）进行通信

**exec**使用以下命令写入管道：

```
char msg[50];
sprintf( msg, "\tsent from pid: %d, pi= %f", getpid(), pi);
printf("%s\n",msg);
write(i1, msg, strlen(msg)+1); 
```

父母读到这些：

```
for (i=0;i<N;i++) {
   close(pipefd[i][1]);  // close the write end of the pipe in the parent

   read(pipefd[i][0], buffer, sizeof(buffer));
   printf("\n-C-\n");

   if (buffer[0] == '\t'){
     printf("%s\n",buffer);
   }
   int j;
   for (j=0; j<100; j++) {
      buffer[j]='\n';
   }
   close(pipefd[i][0]);
} 
```

现在的问题是，**只有**在子进程终止后，读取才会解除阻塞并打印缓冲区。我想要做的是在 exec 写入管道后立即打印缓冲区。

以下是所有代码：

**父文件：**

```
#include <signal.h>
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/time.h>
#include <string.h>

#define N 5
pid_t *pid;
int pipefd[N][2];

int flag = 0;
int count_ctrl_c = 0;
void signal_handler(int sig){
    signal(sig, SIG_IGN);
    printf("\n");

    flag = 1;
    signal(SIGINT, signal_handler);
}

int main(int argc, char *argv[]) {

    int i;
    for (i = 0; i < N; i++) {
        pipe(pipefd[i]);
    }

    int parent_pid = getpid();
    pid= (pid_t *)malloc(N * sizeof(pid_t));

    for (i = 0; i < N; i++) {
        pid[i] = fork();
        if (pid[i] == 0) //The parent process will keep looping
        {

            char b[50];
            sprintf( b, "%d", i+1);

            char i0[50];
            sprintf( i0, "%d", pipefd[i][0]);

            char i1[50];
            sprintf( i1, "%d", pipefd[i][1]);

            char par_id[50];
            sprintf( par_id, "%d", parent_pid);

            execl("***the/path/to/exec/calculate***", b,i0,i1,par_id,NULL);
        }
    }

    if (parent_pid == getpid()) {
        signal(SIGINT, signal_handler);

        while(1){
            if (flag){

                printf("\n-A-\n");
                char buffer[100];
                int i;
                for (i=0;i<N;i++) {
                    // Apostellei to shma SIGUSR2 se ola ta paidia tou
                    kill(pid[i], SIGUSR2);
                }

                printf("\n-B-\n");
                for (i=0;i<N;i++) {
                    close(pipefd[i][1]);  // close the write end of the pipe in the parent

                    read(pipefd[i][0], buffer, sizeof(buffer));
                    printf("\n-C-\n");
                    if (buffer[0] == '\t'){
                        printf("%s\n",buffer);
                    }
                    int j;
                    for (j=0; j<100; j++) {
                        buffer[j]='\n';
                    }
                    close(pipefd[i][0]);
                }
                //exit(0);
                printf("finished reading\n");

                flag = 0;
                count_ctrl_c++;
                if (count_ctrl_c == 2) {
                    exit(0);
                }
            }

        }
    }
} 
```

**计算.c**

```
#include <signal.h>
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/time.h>
#include <string.h>

#define N 5

int i0,i1,parent_pid;

int flag = 0;
int time_to_term = 0;
double pi;

void signal_handler2(int sig);
void signal_handler(int sig);

void signal_handler2(int sig){
    signal(sig, SIG_IGN);
    signal(SIGALRM, SIG_IGN);
    flag = 1;
    signal(SIGUSR2, signal_handler2);
    signal(SIGALRM, signal_handler);
}

void signal_handler(int sig){
    signal(sig, SIG_IGN);
    pid_t pid = getpid();
    printf("time: %d, pid: %d, pi: %1.10f\n", time_to_term, pid, pi);
    exit(0);
}

int main(int argc, char *argv[]) {
    int pid;
    signal(SIGINT, SIG_IGN);
    signal(SIGUSR2, signal_handler2);
    signal(SIGALRM, signal_handler);

    time_to_term = atoi(argv[0]);   
    alarm(time_to_term);

    i0 = atoi(argv[1]);
    i1 = atoi(argv[2]);
    parent_pid = atoi(argv[3]);

    double mul = 1.0;
    double par = 2.0;
    pi = 3.0;

    while(1){

        pi = pi + (mul * (4.0 / (par * (par + 1.0) * (par + 2.0))));
        mul = mul * (-1.0);
        par += 2;

        sleep(1);

         if (flag) {
            signal(SIGALRM, SIG_IGN);
            close(i0);

            char msg[50];
            sprintf( msg, "\tsent from pid: %d, pi= %f", getpid(), pi);
             printf("%s\n",msg);
            write(i1, msg, strlen(msg)+1);

            close(i1);
            flag = 0;

            signal(SIGALRM, signal_handler);
            //exit(0);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:34:04.707

恕我直言，您的设计并不是很好，因为所有子进程都继承了您创建的所有管道，这是对系统资源的浪费。正确的做法是：

**在父进程中：**

1.  `dup`fd 的#0 和#1 保留供父进程以后使用；在这些新的 fd 上使用`fcntl`with`F_DUPFD_CLOEXEC`来防止继承`exec`

2.  `close`fd #0

3.  `close`fd #1

4.  创建管道

5.  如上所述，防止继承管道的读取 fd

6.  `dup2`写入管道的 fd 使其成为 fd #1；`close`原来写fd

7.  `fork`&`exec`子进程

8.  为所有必要的孩子重复步骤 3 到 7

9.  `dup2`将原始 fd 的 #0 和 #1 的副本存储回 #0 和 #1 以恢复`printf`/`scaf`功能

10.  用于`select`轮询读取所有管道的 fd，如果您希望在 #0 上有任何输入，则可能是 #0

如果需要双向通信，则在第 4 步创建两个管道，并对所述过程进行适当调整，然后重复第 2 步到第 7 步以创建子节点。

**在子进程中（之后`exec`）**

按要求进行所有处理。使用 fd #1 或 printf 或其他方式写入父级。`PID`子进程可能总是获得它的父进程`getppid()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:55:40.453

对此进行故障排除的一般提示：使用该工具运行管道的两侧`strace`（您可以使用它`strace -f`来跟踪分叉），以便您可以验证实际从管道写入/读取的内容。

我怀疑在这种情况下，孩子没有写任何东西！这是因为您使用的 stdio 层（**printf()**）检查它是否正在写入终端或其他任何东西。在终端的情况下，它会在每个换行符之后刷新输出，但在其他情况下，它仅在写入大块数据后才会刷新（GNU 系统上为 8KiB）。**尝试在printf(** )之后使用**fflush()**手动刷新输出。如果有帮助，您可以使用**setvbuf()调整****标准输出**缓冲模式。

 ******* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T01:59:53.610

您的操作系统可能正在缓冲写入。

在调用. `ioctl`_ 此外，请检查您的返回值，以防发生一些阴险的事情。有关更多信息，请参见[http://pubs.opengroup.org/onlinepubs/7908799/xsh/ioctl.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/ioctl.html)`FLUSHW``write``ioctl`******

# python - Python——字符串错误

> ID：12657431
> 
> 赞同：1
> 
> 时间：2012-09-29T23:35:27.663
> 
> 标签：python, python-3.x

给出了一些代码（我使用的是 Python 3.2），并不断收到以下错误。

```
import csv
import collections
import itertools

grid = collections.Counter()

with open("test1.csv", "r") as fp:
reader = csv.reader(fp)
for line in reader:
    for pair in itertools.combinations(line, 2):
        grid[pair] += 1
        grid[pair[::-1]] += 1

actors = sorted(set(pair[0] for pair in grid))

with open("connection_grid.csv", "wb") as csvfile:
    writer = csv.writer(fp)
    writer.writerow([''] + actors)
    for actor in actors:
        line = [actor,] + [grid[actor, other] for other in actors]
        writer.writerow(line) 
```

但我收到了这个错误。

> 回溯（最后一次调用）：文件“C:/Python32/test.py”，第 21 行，在 writer.writerow([''] +actors) 中 ValueError：对已关闭文件的 I/O 操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:40:18.967

如果`b`处于模式，则文件以二进制模式打开，而不是文本模式。去掉它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:08:59.677

模块的文档`csv`说`open(fname, 'rb')`或`'wb'`- 即二进制模式。但这仅适用于 Python 2.x。

在 Python 3 中，CSV 文件必须以正常的文本模式打开。但是，仍然必须做一些特别的事情。文档说（见[http://docs.python.org/release/3.2.3/library/csv.html#csv.reader](http://docs.python.org/release/3.2.3/library/csv.html#csv.reader)）：

> 如果 csvfile 是一个文件对象，它应该用`newline=''`.

所以，正确的做法是：

```
with open("test1.csv", newline='') as fp:
    reader = csv.reader(fp)
    ...
...
with open("connection_grid.csv", "w", newline='') as csvfile:
    writer = csv.writer(csvfile)
    ... 
```

另外，Tim 已经指出您错误地将错误的文件对象传递给了编写器。正因为如此，最好给变量提供真正的描述性名称。当您为文件对象变量提供与文件名变量不同的名称时，它也会有所帮助。

此外，由于将来要修改代码，最好先将文件名分配给变量。然后很容易将代码块转换为函数体，如下所示：

```
def csv_transformation(csvname_in, csvname_out):
    with open(csvname_in, newline='') as finput:
        reader = csv.reader(finput)
        ...
    ...
    with open(csvname_out, 'w', newline='') as foutput:
        writer = csv.writer(foutput)
        ... 
```

在这种情况下，更难犯错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:39:35.147

问题是您指的是错误的变量。早期，您创建一个文件对象`fp`，然后创建`csvwriter`. 在第二部分中，您应该写信给`csvwriter`，但您写信给`fp`. 例外是告诉您`fp`已经关闭，这就是您从`with`块中删除时发生的情况。

第一个块很好：

```
with open("test1.csv", "r") as fp:
    reader = csv.reader(fp)
    ... 
```

请注意，第二个块仍然指的是`fp`：

```
with open("connection_grid.csv", "wb") as csvfile:
    writer = csv.writer(fp)
    ... 
```

# jquery - 使用单独的元素更改 div onClick 的类

> ID：12657432
> 
> 赞同：1
> 
> 时间：2012-09-29T23:35:40.310
> 
> 标签：jquery, css, onclick, motion

因此，我正在尝试创建一个站点，如果您单击链接，则面板会从 w 侧滑出。使用 jQuery 和 css 的更多信息

面板是一个绝对位置的 div，并且移动到屏幕外。单击链接时，我希望面板移动到位。本质上，我想更改该 div 的类，以便绝对定位将 div 移动到屏幕中......

所以，我知道如何装配一个 div 或让它改变它自己的类，但我不知道如何将一个连接到一个单独的 div 以便它控制 div。我也不确定要添加哪些功能，以便它滑入到位而不是仅仅出现......

我对 jQuery 很陌生……所以如果有人能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:41:47.600

最简单的方法是为其位置或边距/填充设置动画。

您挂钩作为触发器的对象：

```
$("#trigger").click( function(){
}); 
```

当点击时，使用重新定位元素`.animate()`

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready( function(){
    $("#trigger").click( function(){
        // Adjust the effect (2000 miliseconds)
        $("#moreinfo").animate( { opacity: 1.0, left: 0 }, 2000 ); 
    });
});
</script> 
```

然后在某处的 CSS 中，我们最初将元素隐藏在远离屏幕的地方。

```
#moreinfo {
 position: absolute;
 top: 5px;
 left: -2000px; // You can adjust based upon the actual dimensions of the object
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:42:32.980

您将需要使用 jQuery 的动画功能，或者您可以简单地在常规 javascript 中执行此操作，并`onclick=`在您想要控制滑动面板的 div 上附加这样的事件：

```
function slide(slider, data, step, callback) {
  slider.style.left = data+"px";
  data += step;
  if(dataIn <= data && data <= dataOut) {
    setTimeout(function() { slide(slider,data,step,callback) }, 15);
  } else if(callback && (typeof(callback) == 'function')) { 
    callback();}
} 
```

而这样，你可以简单地在你想要点击滑动的 div 上设置事件：

```
function click() {
  var data = 0;
  var step = 15;
  var slider = document.GetElementById("sliderDiv");
  slide(slider,data,step);
} 
```

将来，如果您需要异步运行某些东西，您现在可以使用回调（）。:)

# javascript - 我需要一个 JavaScript 或 HTML 解决方案来仅嵌入来自远程 url 的特定容器类

> ID：12657436
> 
> 赞同：0
> 
> 时间：2012-09-29T23:36:18.203
> 
> 标签：javascript, class, embed, external, containers

好的，所以我将尝试澄清我的问题：

在一个网站上（不幸的是，在它启动之前我无法透露该网站）一个复杂的投票系统不断更新并产生一个乐队名称。

然后将名称以简单的文本形式放置在跨度中，如下所示：

<跨度类投票> 荷官</span>

我只需要从跨度中拉出 Croupier 这个词，这样我就可以将文本显示为标题......

站点上没有其他跨度具有此 ID

文本一直在变化，所以我需要在我的网站中实时（或几乎）引用或提取此跨度中的文本

例如，当您嵌入或 iframe 时，当站点更改时，框架也会更改。

我只需要跨度信息，而不是整个站点。

有没有办法框架或嵌入 - 或使用 Javascript - 只显示这个特定跨度类的内容？

谢谢你的耐心！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:47:58.567

[由于Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，这在客户端是不可能的。它可以通过几种方法在服务器端实现，例如通过[cURL](http://curl.haxx.se/)抓取站点并通过一些基本的字符串解析提取相关数据，或者使用更高级别的工具，例如[WWW::Mechanize](http://search.cpan.org/dist/WWW-Mechanize/)用于相对静态（在客户端）内容，或[PhantomJS](http://phantomjs.org/)用于更多动态内容，例如通过 Javascript 创建的元素。

如果外部站点与您自己的站点之间确实存在协议，您可以使用现代技术来解决同源策略，例如[跨域资源共享](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)。

# html - 我正在尝试缩进 HTML 表单，但看不到它们

> ID：12657438
> 
> 赞同：-1
> 
> 时间：2012-09-29T23:36:45.557
> 
> 标签：html

我正在尝试创建自定义注册表单模板，当我尝试放入段落空格（返回）或缩进时，程序拒绝看到它们，即使在预览窗格中也是如此。请帮忙。

我正在尝试将此表单放在放置在中心的背景图像之上。该图像位于表格的列内。我想缩进表格，使其完全在图像内，n 全部在其左侧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:44:53.770

如果我正确理解您的意图，您应该将其`padding`用于此类目的，而不是任何字符。尝试为表单添加这个 css 属性：

```
padding-left: Xpx; 
```

X 是您想要的缩进像素数。

# c++ - 具有可变大小的 C++ 全局队列数组

> ID：12657444
> 
> 赞同：2
> 
> 时间：2012-09-29T23:37:28.363
> 
> 标签：c++, arrays, compiler-errors, queue

我正在开发一个需要队列数组的类 QueueArray 的项目。自从我使用 c++ 数组以来已经有一段时间了，所以我在调试为什么我的代码抛出错误时遇到了一些麻烦。

我阅读[了删除队列对象数组以](https://stackoverflow.com/questions/5388373/c-delete-an-array-of-queue-objects)获得一些灵感（以及在 Google 上的几个小时），但我仍然遇到以下代码错误：

```
 #include <iostream>
    #include <deque>
    #include <queue>
    using namespace std;

    class QueueArray
    {

        queue<int> theArray[];

        QueueArray::QueueArray(int size)
        {
            queue<int> theArray[] = new queue<int>[size];
            //theArray[] = new queue<int>[size]; //this may be closer, but also giving errors

        }
    }; 
```

错误是：

警告 C4200：使用了非标准扩展：结构/联合中的零大小数组 1> 当 UDT 包含零大小数组时，无法生成复制 ctor 或复制赋值运算符

和

错误 C2075：“theArray”：数组初始化需要花括号

我已经阅读了第二个错误，但我似乎可以弄清楚我需要做些什么来修复它。

我需要它是一个可变大小的数组，并将变量传递给类，这就是为什么我不能在顶部初始化数组的大小，它必须是全局范围的，所以我可以在其他函数中使用它类（类不能通过参数传递数组）。

稍后，队列将是用户定义的类型，但我们现在让它们成为整数队列，不确定这是否会有所不同。我不断看到有人建议在这些情况下使用向量，但我对此没有选择。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:39:29.513

```
queue<int>* theArray; 
```

不是

```
queue<int> theArray[]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T23:42:28.393

在堆上分配数组时，您会得到指向数组开头的指针，而不是数组。因此，您想将数组声明为

```
queue<int>* theArray; 
```

在某些情况下允许使用空括号，但具有特定含义。它可以在初始化静态大小的数组时使用：

```
queue<int> theArray[] = { queue<int>(), queue<int>() /*...*/ }; 
```

创建一个大小与初始化器列表匹配的数组，它仍然可以为空。您还可以在函数的参数列表中使用空括号，在这种情况下，使用等同于使用指针表示法，例如：

```
int main(int ac, char* av[]) 
```

等同于

```
int main(int ac, char** av) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T23:42:15.937

在 C++ 中无法使用可变大小的数组。要使您的代码正常工作，请使用指针，即

```
class QueueArray
{
    queue<int> * const theArray;

    QueueArray::QueueArray(int size)
    : theArray (new queue<int>[size])
    { /* ... */ }
    ~QueueArray()
    { delete[] theArray; }
}; 
```

但是，在 C++ 中，您应该真正避免这种情况并使用 a`std::vector`代替，即

```
typedef vector<queue<int>> QueueArray; 
```

# blogs - 博客上的新帖子

> ID：12657445
> 
> 赞同：-2
> 
> 时间：2012-09-29T23:37:38.537
> 
> 标签：blogs, posts

假设有一个没有 RSS 提要关联的博客，并且我没有注册任何关于此博客的通知，我希望每次在其上发布新帖子时都能“知道”。

有什么办法可以做到吗？我正在寻找一个通用的解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:01:19.787

伪 cron 脚本，运行 /1 * * * *

```
curl http://thatguysblog.html -> latest.blog;
grep latest.blog "posted at $1\n";
readf previous.time;
If (unixtime($1) > $previoustime) {
   send SMS me@myphone.com "OMG, a new blog post!!!";
}
printf $1 previous.time; 
```

# jquery - Ajax 调用扭曲了 Internet Explorer 中的布局

> ID：12657448
> 
> 赞同：0
> 
> 时间：2012-09-29T23:37:41.143
> 
> 标签：jquery, ajax, internet-explorer, layout

我正在一个网站上工作，该网站包含几个通过 jQuery 进行的简单 ajax 调用，以将另一个页面的内容加载到模式窗口中。在“现代浏览器”中一切正常，但在所有版本的 Internet Explorer（包括 IE 9）中，当单击链接打开模式窗口时，它会更改页面的布局。

我认为正在发生的是 IE 认为弹出窗口是实际的屏幕大小，然后拉入我的媒体查询并将它们应用于页面。我在页面中的 HTML 元素上使用了类来区分 IE 和其他浏览器，并尝试从所有媒体查询中排除 IE，但这并没有完全奏效。

下面是该页面的链接。如果您使用 IE 9 并向下滚动到“关于我们”部分并单击链接，您将在标题中看到布局更改。但是，如果您滚动到“我们在哪里”并单击该链接，则模态窗口内的布局会变形。

网址：[http ://accesstca.com](http://accesstca.com)

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:31:16.457

[我可以通过使用条件注释（ http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/) ）向 html 元素添加类以针对 IE 来解决此问题。然后我使用这些类在我的媒体查询中排除 IE 某些样式。

# php - 致命错误 sqlsvr_fetch_array()。无法从查询中获取数组

> ID：12657452
> 
> 赞同：0
> 
> 时间：2012-09-29T23:38:41.097
> 
> 标签：php, sql-server

这让我发疯，我似乎无法在网上找到任何解决方案。我正在尝试使用 sqlsvr_fetch_array() 函数并不断收到致命错误。它说：“致命错误：在第 39 行的 C:\inetpub\wwwroot\confirmation.php 中调用未定义函数 sqlsvr_fetch_array()”

**这是我的代码：**

```
$connectionInfo = array(
"UID" => 'sa',
"PWD" => '*******',
"Database" => "****"
);

/* Connect using SQL Server Authentication. */
$conn = sqlsrv_connect('10.206.244.103', $connectionInfo);
if ($conn === false) {
echo "Unable to connect.</br>";
die(print_r(sqlsrv_errors(), true));
} else {

echo 'CONNECTED';    
}
$params = array();
$options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET ); 
$sql1 ="SELECT * FROM temp_survey_table WHERE Confirm_Code = 'e32c7cdaf237322234f5ac3e768fbaa9'";
$result1 = sqlsrv_query($conn,$sql1, $params, $options);

$rows=sqlsvr_fetch_array($result8);
$invoice=$rows['Invoice_Number'];
$email=$rows['Email'];
$servicerate=$rows['Service_Rate']; 
$foodrate=$rows['Food_Rate'];
$comments=$rows['Comments'];

echo $invoice;
echo $email;
echo $servicerate; 
```

任何帮助将不胜感激。先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:41:04.433

错字：是`sqlsrv_`，不是`sqlsvr_`。

```
 ^ RV        ^ VR 
```

人类确实很难区分。

# wifi - server 2012 使用无线用于离网网络

> ID：12657453
> 
> 赞同：-1
> 
> 时间：2012-09-29T23:39:07.610
> 
> 标签：wifi, wireless, windows-server-2012

这个问题类似于[在 Windows server 2012 上通过无线直接访问 IIS 而没有路由器](https://stackoverflow.com/questions/12468528/access-iis-on-windows-server-2012-through-wireless-directly-without-router)我们尝试了一些 windows 8 小程序来设置共享连接，但在 windows server 2012 上都没有成功。

在 2012 服务器上，我们从命令行运行

netsh wlan set hostsnetwork mode=allow ssid=haxxy key=txectxec keyUsage=persistent

netsh wlan 启动托管网络

以上成功完成，我们可以尝试连接。

但是连接的计算机没有被分配一个IP地址..我怎样才能让wifi拥有一个IP或为服务器提供dhcp？

如果我在服务器上进行 ipconfig，则无线已分配 192.168.173.1 - 但我不确定是什么提供了该 IP 地址。

如果我在服务器绑定下转到服务器的 dhcp，则 192.168.173.1 ip 地址从那里不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:16:23.600

[http://www.connectify.me](http://www.connectify.me)免费版很好用，所以我们买了付费版。Dror Gluska (2012) - [http://uhurumkate.blogspot.co.il/](http://uhurumkate.blogspot.co.il/)的脚本 让我很接近。

# c - 组装成 C

> ID：12657461
> 
> 赞同：-1
> 
> 时间：2012-09-29T23:40:40.703
> 
> 标签：c, assembly

我需要将汇编代码转换为 C 代码，而这两行代码有问题：

```
 804842d:   c7 44 24 18 00 00 00    movl   $0x0,0x18(%esp)
 8048434:   00 
 8048435:   c7 44 24 1c 00 00 00    movl   $0x0,0x1c(%esp)
 804843c:   00 
```

这是给我的汇编代码。

所以在 CI 中创建了这部分的 main 函数：

```
 int main(){
   int x, y;
   x=0;
   y=0;
  } 
```

但是当我将此代码转换为程序集时，我得到：

```
804842d:    c7 44 24 1c 08 00 00    movl   $0x0,0x1c(%esp)
8048434:    00 
8048435:    c7 44 24 18 07 00 00    movl   $0x0,0x18(%esp)
804843c:    00 
```

为什么我的程序集版本（0x1c(%esp) 和 0X18(%esp)）中的两个地址被翻转了？有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T12:01:20.433

我同意其他人的观点，这是一种令人怀疑的理智的努力。

但是，至少能够*正确理解*生成的汇编代码很有用。这里的主要问题是*在 x86 上，堆栈向下增长*。这意味着堆栈上更高的变量（假设没有优化并深入研究特定于实现的细节，稍后声明的变量）的地址低于之前声明的变量*。*

**考虑到这一点， y**的地址是`0x18(%esp)`而**x**的地址是有意义的`0x1c(%esp)`。为了让自己更清楚，请始终尝试用不同的值填充变量。

请注意，向下增长的堆栈似乎相当混乱，但在英特尔架构的早期，它是有道理的 - 代码和动态分配的数据被加载到尽可能低的地址，而堆栈基于地址空间的顶部. 这样，您不必在为堆栈保留多少内存以及为堆保留多少内存方面做出明确的妥协——只要两者的总和低于总地址空间大小，它们就可以很好地共享地址空间。

# php - 了解多维数组中的元素级别

> ID：12657462
> 
> 赞同：0
> 
> 时间：2012-09-29T23:40:40.750
> 
> 标签：php, multidimensional-array, levels

好吧，我又来这里处理 php 中的数组了。我需要你的手来指引我正确的方向。假设以下数组：

```
-fruits
    --green
        ---limon
        ---mango
    --red
        ---apple

-cars
    --ferrari
        ---enzo
            ----blue
            ----black
        ---318
    --lamborg
        ---spider
        ---gallardo
            ----gallado-96
                -----blue
                -----red
            -----gallado-98 
```

- **（**连字符）符号仅说明深层。

好吧，我需要构建另一个数组（或其他），因为它应该打印为 HTML 选择，如下所示：

```
-fruits
--green
---limon
---mango
--red
---apple
-cars
--ferrari
---enzo
----blue
----black
---318
--lamborg
---spider
---gallardo
----gallado-96
-----blue
-----red
-----gallado-98 
```

看起来对于每个级别元素，它应该添加一个空格或连字符来确定它属于特定的父级。

## 编辑

提供了我的最终代码的答案。html select 元素将每个级别显示为字符串（在文本的开头重复“-”而不是多级元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:07:23.123

这是一个简单的递归函数，用于在给定数组的情况下构建选择下拉菜单。不幸的是，我无法对其进行测试，但请告诉我它是否有效。用法如下：

```
function generateDropdown($array, $level = 1)
{
    if ($level == 1)
    {
        $menu = '<select>';
    }
    foreach ($array as $a)
    {
        if (is_array($a))
        {
            $menu .= generateDropdown($a, $level+1);
        }
        else
        {
            $menu .= '<option>'.str_pad('',$level,'-').$a.'</option>'."\n";
        }
    }
    if ($level == 1)
    {
        $menu = '</select>';
    }
    return $menu;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:01:26.130

好的，我在@jmgardhn2 的帮助下得到了它。

## 数据

这是我的数组：

```
$temp = array(
            array(
                'name' => 'fruits',
                'sons' => array(
                            array(
                                'name' => 'green',
                                'sons' => array(
                                        array(
                                            'name' => 'mango'
                                        ),
                                        array(
                                            'name' => 'banana',
                                        )
                                    )
                                )
                            )
            ),
            array(
                'name' => 'cars',
                'sons' => array(
                            array(
                                'name' => 'italy',
                                'sons' => array(
                                            array(
                                                'name' => 'ferrari',
                                                'sons' => array(
                                                        array(
                                                            'name' => 'red'
                                                        ),
                                                        array(
                                                            'name' => 'black'
                                                        ),
                                                    )
                                            ),
                                            array(
                                                'name' => 'fiat',
                                            )
                                )
                            ),
                            array(
                                'name' => 'germany',
                                'sons' => array(
                                            array(
                                                'name' => 'bmw',
                                            )
                                        )
                            ),
                )
            )    
        ); 
```

## 递归函数

现在，以下函数将提供一个包含以下项目的数组`[level] => [name]`：

```
function createSelect($tree, $items, $level)
{
    foreach ($tree as $key)
    {
        if (is_array($key))
        {
            $items = createSelect($key, $items, $level + 1);
        }
        else
        {
            $items[] = array('level' => $level, 'text' => $key);
        }
    }

    return $items;
} 
```

## 调用函数

现在，调用如下函数：

```
$items = createSelect($temp, array(), 0); 
```

## 输出

如果您迭代最终的 $items 数组，它将如下所示：

```
1fruits
2green
3mango
3banana
1cars
2italy
3ferrari
4red
4black
3fiat
2germany
3bmw 
```

# iphone - 在 iOS 上保存 ID3 标签

> ID：12657466
> 
> 赞同：4
> 
> 时间：2012-09-29T23:41:21.227
> 
> 标签：iphone, objective-c, id3

所以我想让我的应用编辑并保存 ID3 标签。我很久以前在某个网站上发现了如何阅读它们，这是我的应用程序中的这段代码：

```
-(NSDictionary*)MP3InfoDictionary {
    AudioFileID fileID = nil;
    OSStatus err = noErr;

    err = AudioFileOpenURL( (CFURLRef) self, kAudioFileReadPermission, 0, &fileID);
    if (err != noErr) {
    //NSLog(@"AudioFileOpenURL failed");
    }
    UInt32 id3DataSize = 0;
    char * rawID3Tag = NULL;

    err = AudioFileGetPropertyInfo(fileID, kAudioFilePropertyID3Tag, &id3DataSize, NULL);
    if (err != noErr) {
    NSLog(@"AudioFileGetPropeetyInfo failed for ID3 tag");
    }
    //NSLog(@"id3 data size is %lu bytes",id3DataSize);

    rawID3Tag = (char *) malloc(id3DataSize);
    if (rawID3Tag == NULL) {
    //NSLog(@"could not allocated %lu bytes of memory for ID3 tag", id3DataSize);
    }

    err = AudioFileGetProperty(fileID, kAudioFilePropertyID3Tag, &id3DataSize, rawID3Tag);
    if (err != noErr) {
    NSLog(@"AudioFileGetProperty failed for ID3 tag");
    }
    //NSLog(@"read %lu bytes of ID3 info", id3DataSize);

    CFDictionaryRef piDict = nil;
    UInt32 piDataSize = sizeof(piDict);
    free(rawID3Tag);
    err = AudioFileGetProperty(fileID, kAudioFilePropertyInfoDictionary, &piDataSize, &piDict);
    if (err != noErr) {
    //NSLog(@"AudioFileGetProperty failed for property info dictionary");
    }

    //NSLog(@"Property info:%@", (NSDictionary*)piDict);
    //CFShow(piDict);

    NSDictionary *MP3InfoDictionary = (NSDictionary*)piDict;
    if (MP3InfoDictionary != NULL) {
    return MP3InfoDictionary;
    }

    return nil;
} 
```

这段代码属于NSURL类，url是iOS的documents目录下一个mp3的文件url。它工作 100%，我得到了所有的标题、艺术作品、歌词等。但现在我想保存和覆盖 mp3 的值，如艺术家、标题等。在另一个帖子上，一个人在这里发布了你使用 AudioFileSetProperty() ，如何正确使用？

显然是因为 kAudioFileReadPermission 但它告诉我 mp3 只是可读的，但这不可能是真的，因为我拥有的另一个应用程序可以更改 ID3 标签并且可以在我尝试编辑的同一个 mp3 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:44:37.090

编辑：见下面我的第一条评论。看来 AudioFile 不允许修改链接中列出的四种类型的文件。

# javascript - 使用 Knockout.js 和映射的 ASP.NET

> ID：12657471
> 
> 赞同：1
> 
> 时间：2012-09-29T23:41:48.497
> 
> 标签：javascript, jquery, asp.net, knockout.js, knockout-mapping-plugin

使用以下代码我遇到了一个奇怪的问题。当我单击并调用 showVacationModal 时，从服务器中检索到数据并正确显示结果。如果我继续点击同一个人（id），它会继续工作。

如果我单击没有假期的其他人（例如不同的 ID），则不会显示任何内容 = OK。

## 问题

现在，当我再次单击第一个人时，什么都没有显示。（在 ajax 调用中可以很好地检索数据）。

有任何想法吗？

## 我的 JS 代码：

```
var ViewModel = function () {
        this.vacations = ko.mapping.fromJS(null);
    };

    var model = new ViewModel();

    function showVacationModal(id) {
        var model = {};
        $.ajax({
            type: "POST",
            url: "Default.aspx/GetVacations",
            data: "{personId: '" + id + "'}",
            delay: 1,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {

                model.vacations = ko.mapping.fromJS(msg.d);
                ko.applyBindings(model);

                $('#vacationModal').modal('show')
            }
        });

    } 
```

## 我的 HTML：

```
<table>
                <thead>
                    <tr>
                        <th>
                            First name
                        </th>
                        <th>
                            Last name
                        </th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: vacations">
                    <tr>
                        <td data-bind="text: Id">
                        </td>
                        <td data-bind="text: PersonId">
                        </td>
                        <td data-bind="text: Begin">
                        </td>
                    </tr>
                </tbody>
            </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:27:57.257

你有没有尝试过更多这样的事情？

```
function showVacationModal(id) {
    // var model = {}; no need to reset the model property
    $.ajax({
        type: "POST",
        url: "Default.aspx/GetVacations",
        data: { personId: id }, // why wrap data in strings?
        delay: 1,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {

            //model.vacations = ko.mapping.fromJS(msg.d);
            ko.mapping.fromJS(msg.d, {}, model.vacations);
            // ko.applyBindings(model); no need to reapply bindings

            $('#vacationModal').modal('show')
        }
    });
} 
```

有关更多信息，请参阅[此 ko.mapping 文档部分](http://knockoutjs.com/documentation/plugins-mapping.html#specifying_the_update_target)。

# hadoop - 多核机器上的 Hadoop 和 map-reduce

> ID：12657473
> 
> 赞同：8
> 
> 时间：2012-09-29T23:41:58.300
> 
> 标签：hadoop, multicore

我已经阅读了很多关于在机器集群上运行的 Hadoop 和 Map-Reduce 的信息。有人知道 Apache 发行版是否可以在具有多个内核的 SMP 上运行。特别是，可以在同一台机器上运行多个 Map-Reduce 进程。调度程序将负责将它们分布在多个核心上。谢谢。- 公斤

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T07:42:21.007

是的。您在每台机器上有多个 map 和 reduce 插槽，由 RAM 和 CPU 确定（每个 JVM 实例默认需要 1GB，因此具有 16 个内核的 8GB 机器仍然应该有 7 个任务插槽）

来自[hadoop 维基](http://wiki.apache.org/hadoop/FAQ#I_see_a_maximum_of_2_maps.2BAC8-reduces_spawned_concurrently_on_each_TaskTracker.2C_how_do_I_increase_that.3F)

> 使用配置旋钮：mapred.tasktracker.map.tasks.maximum 和 mapred.tasktracker.reduce.tasks.maximum 来控制在 TaskTracker 上同时生成的 map/reduce 的数量。默认情况下，它设置为 2，因此在 TaskTracker 上的给定实例上最多可以看到 2 个 map 和 2 个 reduce。
> 
> 您可以在每个任务跟踪器的基础上设置这些以准确反映您的硬件（即在更强大的任务跟踪器等上将它们设置为更高的数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T13:23:02.920

您可以将那些轻量级的 MapReduce 框架用于多核计算机。

例如

LeoTask：用于多核计算机的轻量级、高效且可靠的 mapreduce 框架

[https://github.com/mleoking/LeoTask](https://github.com/mleoking/LeoTask)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T20:47:02.660

对于 Apache Hadoop 2.7.3，我的经验是启用 YARN 也将启用多核支持。这是在单个节点上启用 YARN 的简单指南：

[https://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-common/SingleCluster.html#YARN_on_a_Single_Node](https://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-common/SingleCluster.html#YARN_on_a_Single_Node)

默认配置似乎工作得很好。如果你想调整你的核心使用，那么也许考虑在 yarn-site.xml ( [https://hadoop. apache.org/docs/r2.7.1/hadoop-yarn/hadoop-yarn-common/yarn-default.xml](https://hadoop.apache.org/docs/r2.7.1/hadoop-yarn/hadoop-yarn-common/yarn-default.xml)）

此外，有关如何配置具有多核支持的简单 Hadoop 沙箱的说明，请参见此处：[https ://bitbucket.org/aperezrathke/hadoop-aee](https://bitbucket.org/aperezrathke/hadoop-aee)

# c# - 拒绝访问端口“COM5”

> ID：12657479
> 
> 赞同：1
> 
> 时间：2012-09-29T23:42:45.577
> 
> 标签：c#, serial-port

`Access to the port 'COM5' is denied.`从我的表单运行以下方法时，我收到以下错误消息。我尝试从设备管理器的端口设置中输入正确的波特率 9600。我也尝试过通过 Portmon 访问设备，但有一个错误阻止我连接。有什么办法可以解决这个问题吗？

```
 //Fields
    List<string> myReceivedLines = new List<string>();

    //subscriber method for the port.DataReceived Event
    private void DataReceivedHandler(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        SerialPort sp = (SerialPort)sender;
        while (sp.BytesToRead > 0)
        {
            try
            {
                myReceivedLines.Add(sp.ReadLine());
            }
            catch (TimeoutException)
            {
                break;
            }
        }
    }

    protected override void SolveInstance(IGH_DataAccess DA)
    {

        string selectedportname = default(string);
        DA.GetData(1, ref selectedportname);
        int selectedbaudrate = default(int);
        DA.GetData(2, ref selectedbaudrate);
        bool connecttodevice = default(bool);
        DA.GetData(3, ref connecttodevice);

        port.DtrEnable = true;   //enables the Data Terminal Ready (DTR) signal during serial communication (Handshaking)
        port.Open();             //Open the port
        if (!(port.IsOpen == true)) port.Open();

        if (connecttodevice == true)
        {
            port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);
            DA.SetDataList(0, myReceivedLines);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:11:52.073

您需要将 SerialPort 的使用包装在[using 语句中](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)或实现[IDisposable](http://dave-black.blogspot.se/2011/03/how-do-you-properly-implement.html)

```
// Dispose() calls Dispose(true)
public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}

// The bulk of the clean-up code is implemented in Dispose(bool)
protected virtual void Dispose(bool disposing)
{
    if (disposing)
    {
        // free managed resources
        if (_serialPort != null)
        {
            _serialPort.Dispose();
            _serialPort = null;
        }
    }
    // free native resources if there are any.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-17T18:35:04.993

我的串口监听器有问题，主进程卡住了——因为它是同步的。过程，通过创建一个线程和一个计时器来解决

```
 try
            {
                if (_serialConnection.IsOpen) _serialConnection.Close();
                _serialConnection.Open();
                Thread newThread = new Thread((obj) =>
                {
                    System.Timers.Timer timer = new System.Timers.Timer();
                    timer.Interval = 1000;
                    timer.Elapsed += (sender, e) =>
                    {
                        _slave.Listen();
                    };
                    timer.Enabled = true;
                    timer.Start();

                });
                newThread.IsBackground = true;
                newThread.Start();
            }
            catch (Exception ex)
            {
                throw ex;
            } 
```

# macros - 为什么这个 Lisp 宏作为一个整体工作，即使每个部分都不起作用？

> ID：12657481
> 
> 赞同：6
> 
> 时间：2012-09-29T23:43:19.453
> 
> 标签：macros, lisp, common-lisp, gensym

我正在阅读/使用 Practical Common Lisp。我正在讨论关于在 Lisp 中构建测试框架的章节。

我有如下实现的功能“test-+”，它可以工作：

```
(defun test-+ ()
  (check
    (= (+ 1 2) 3)
    (= (+ 5 6) 11)
    (= (+ -1 -6) -7))) 
```

请记住，我说过，*它有效*，这就是为什么接下来的事情如此令人困惑......

这是“test-+”所指的一些代码：

```
(defmacro check (&body forms)
  `(combine-results
    ,@(loop for f in forms collect `(report-result ,f ',f))))

(defmacro combine-results (&body forms)
  (with-gensyms (result)
    `(let ((,result t))
       ,@(loop for f in forms collect `(unless ,f (setf ,result nil)))
       ,result)))

(defmacro with-gensyms ((&rest names) &body body)
  `(let ,(loop for n in names collect `(,n (gensym)))
     ,@body))

(defun report-result (value form)
  (format t "~:[FAIL~;pass~] ... ~a~%" value form)
  value) 
```

现在，我一直在做的是使用 Slime 一步一步地对它们进行宏扩展（使用 ctrl-c RET，它映射到 macroexpand-1）。

因此，“test-+”的“检查”调用扩展为：

```
(COMBINE-RESULTS
  (REPORT-RESULT (= (+ 1 2) 3) '(= (+ 1 2) 3))
  (REPORT-RESULT (= (+ 5 6) 11) '(= (+ 5 6) 11))
  (REPORT-RESULT (= (+ -1 -6) -7) '(= (+ -1 -6) -7))) 
```

然后*该*宏扩展为：

```
(LET ((#:G2867 T))
  (UNLESS (REPORT-RESULT (= (+ 1 2) 3) '(= (+ 1 2) 3)) (SETF #:G2867 NIL))
  (UNLESS (REPORT-RESULT (= (+ 5 6) 11) '(= (+ 5 6) 11)) (SETF #:G2867 NIL))
  (UNLESS (REPORT-RESULT (= (+ -1 -6) -7) '(= (+ -1 -6) -7))
    (SETF #:G2867 NIL))
  #:G2867) 
```

这是代码，就在这句话的正上方，它不起作用。如果我将它粘贴到 REPL 中，我会收到以下错误（我使用的是 Clozure Common Lisp）：

> 未绑定变量：#:G2867 [UNBOUND-VARIABLE 类型的条件]

现在，如果我采用相同的代码，将 gensym 替换为变量名，例如“x”，它就可以正常工作。

那么，我们如何解释以下惊喜：

1.  调用所有这些的“test-+”宏工作正常。

2.  “combine-results”宏的宏扩展*不*运行。

3.  如果我从“组合结果”的宏扩展中删除 gensym，它 *确实*有效。

我唯一可以推测的是，您不能使用包含 gensyms 文字用法的代码。如果是这样，为什么不呢？如何解决这个问题？如果这不是解释，那是什么？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T00:37:31.477

`GENSYM`创建不受限制的符号。当宏正常运行时，这不是问题，因为在整个表达式中替换了相同的非内部符号。

但是，当您将表达式复制并粘贴到 REPL 中时，这不会发生。`#:`告诉读者返回一个 uninterned 符号。结果，每次出现`#:G2867`都是*不同*的符号，并且您会收到未绑定变量警告。

如果您`(setq *print-circle* t)`在执行 MACROEXPAND 之前这样做，它将使用`#n=`和`#n#`符号将相同的符号链接在一起。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-30T00:37:09.147

该代码在打印并读回后不再是相同的代码。特别是，`#:G2867`印刷表示中的两个实例将作为两个单独的符号回读（尽管共享相同的名称），而它们在原始内部表示中应该是相同的。

尝试设置`*PRINT-CIRCLE*`以`T`保留宏扩展代码的打印表示中的标识。

# php - 重定向脚本 PHP

> ID：12657485
> 
> 赞同：0
> 
> 时间：2012-09-29T23:43:38.677
> 
> 标签：php, redirect, youtube

好吧，我想在我的服务器上有一个重定向脚本。

我希望它获取 URL 之后的文本，并将其重定向到网站。

我现在拥有的看起来像这样：

```
<?php

$url = $_GET['url'];
header("Location: http://youtube.com/watch?v=".$url);
?> 
```

这使得 URL 看起来像：[http](http://mywebsite.com/?url=YOUTUBE) ://mywebsite.com/?url=YOUTUBE代码在这里

但是，我不希望它看起来像这样，我希望 URL 看起来像这样： http: [//mywebsite.com/YOUTUBE](http://mywebsite.com/YOUTUBE) CODE HERE，这会将用户重定向到 YouTube 视频。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:52:50.120

为此，您需要在 apache 上使用 .htaccess 和 mod_rewrite 或类似技术。

基本示例：

/.ht 访问：

```
RewriteEngine on 
RewriteRule ^v/(.*)$ v/index.php?url=$1 [L] 
```

/v/index.php：

```
<?php 
  $url = $_GET['url'];
  header("Location: http://youtube.com/watch?v=" . $url);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:49:46.800

查看 URL 重写。这是关于如何在 Apache 服务器上执行此操作的教程：http: [//coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:53:58.997

使用 PHP 本身可以通过这种方式：

[http://www.mywebsite.com/your-php-file.php](http://www.mywebsite.com/your-php-file.php) ?{YOUTUBECODE}

```
<?php
foreach ($_GET as $tmp=>$null) {
  $redirect = $tmp;
  break;
}

header("Location: http://www.youtube.com/watch?v=$redirect"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T23:56:09.550

如果您不想将**mod_rewrite**用于如此简单的任务，则更快的解决方案是

```
$url = $_SERVER['REQUEST_URI']; 
```

只需从不需要的内容中删除 URL。

# entity-framework-5 - 在 EntityFramework 5 中使用模型优先时向类添加方法

> ID：12657492
> 
> 赞同：2
> 
> 时间：2012-09-29T23:45:09.360
> 
> 标签：entity-framework-5

在 EF4 中，我将从数据库生成我的模型。然后我会使用部分扩展类。这使我能够从数据库中重新生成而不会丢失我的代码。

在 EF5 中，从模型生成时，它会为 DB 中的每个项目创建一个 .cs 文件。我实际上更喜欢这个，除了我不确定扩展对象的最佳方法是什么。如果我将更改直接写入 MyObj.cs 文件，如果我必须重新生成模型，我将丢失它们。我想我应该创建文件 MyObjPartial.cs 并使类部分存在......你想吗？

~S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:51:12.023

您应该遵循与以前相同的模式，使用部分类。这与所有自动生成的文件类型基本相同，EF 没有任何不同。您要确保在重新生成文件时不会丢失更改。

在此示例中，部分类作为分离概念也很棒，这样您就可以将对应用程序重要的东西与对实体框架的运行重要的东西分开

# http - 为已经使用的名称返回什么 HTTP 错误代码？

> ID：12657493
> 
> 赞同：26
> 
> 时间：2012-09-29T23:45:20.450
> 
> 标签：http, error-code

我正在做一个 AJAX 调用来设置用户名。如果用户名已被占用，我应该返回什么 HTTP 代码？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-06-06T10:10:09.670

您可以使用 409 冲突。

表示由于当前状态存在冲突，无法处理请求。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-30T01:43:40.873

我会选择 422 Unprocessable Entity 。许多 Rails 开发人员将其用于所有验证错误。

是的，评估错误状态并使用 javascript 呈现错误消息是完全合适的。如果您对 API 使用相同的操作，这将特别有用。然后，您的 ajax 请求将访问您将向其他开发人员公开的相同 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T16:05:26.790

这里没有规则，由你决定。但是，正如@rationalboss所说，由于HTTP请求成功，返回200消息是有意义的，该错误与请求无关。

400 错误意味着请求本身在某些方面不正确，例如错误的动词或缺少参数。

这里的问题是关于软件客户端和人类的解释，当没有 HTTP 错误时，最好远离错误代码。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-29T23:48:44.277

名称没有 HTTP 代码。请参阅[HTTP 状态代码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

如果您使用 AJAX 调用来设置用户名，为什么不在 HTML 中显示错误？这对用户更友好，因为您的访问者会知道实际错误的含义，而不是看到一些 4XX 代码。

# javascript - jQuery键盘激活按钮

> ID：12657495
> 
> 赞同：1
> 
> 时间：2012-09-29T23:45:30.567
> 
> 标签：javascript, jquery, html, button, keyboard

这是我到目前为止得到的

[http://jsfiddle.net/qEKfg/](http://jsfiddle.net/qEKfg/)

这是两个在点击时激活的按钮，看起来像键盘键。
我正在尝试使其仅在键盘按下相关键（CTRL和D）时激活（动画）这将为我的网站添加书签产生“动画按钮”效果，因为CTRL + D是热键为页面添加书签。

但我不知道如何设置它以使用 html 或 jQuery 中的键盘键
如果有人可以帮助我真的很感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:19:33.940

以下内容应该适合您。但是，请注意，由于窗口失去焦点，我添加了一个计时器以在 5 秒后释放屏幕上的“按钮”，因为在特定时间失去焦点的窗口会阻止 keyup 事件触发。

```
$(document).ready(function() {
    var keys = [];
    $(window).on('keydown keyup', function(e) {
        if (e.type == "keydown") {
            if (e.keyCode == 17 || e.keyCode == 91) {
                $("a.a_demo_two:contains('CTRL')").addClass("active");
                keys[0] = e.keyCode;
            }
            else if (e.keyCode == 68) {
                $("a.a_demo_two:contains('D')").addClass("active");
                keys[1] = 68;
            };
            if ((keys[0] == 17 || e.keyCode == 91) && keys[1] == 68) {
                setTimeout(function() {
                    $('a.a_demo_two').removeClass("active");
                }, 5000);
            }
        }
        else {
            if (e.keyCode == 17 || e.keyCode == 91) {
                $("a.a_demo_two:contains('CTRL')").removeClass("active");
            }
            else if (e.keyCode == 68) {
                $("a.a_demo_two:contains('D')").removeClass("active");
            }
            keys = [];
        }
    });
});​ 
```

[**演示**](http://jsfiddle.net/xbKXj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:01:47.497

基本上，您只需将处理程序放在事件上`keydown`并`keyup`触发您想要的任何内容。类似的东西

```
$('body').on('keydown', function(e) {   
   console.log(e)    
   if (e.ctrlKey) $('.a_demo_two').trigger('mousedown')
   if (e.keyCode === 100) $('.a_demo_two').trigger('mousedown')       
});

$('body').on('keyup', function(e) {
   console.log(e)    
   if (e.ctrlKey) $('.a_demo_two').trigger('mouseup')
   if (e.keyCode === 100) $('.a_demo_two').trigger('mouseup')       
}); 
```

​</p>

# scheme - 如何在Scheme中声明一个将函数作为参数的函数

> ID：12657502
> 
> 赞同：1
> 
> 时间：2012-09-29T23:47:01.383
> 
> 标签：scheme

我想声明一个函数，该函数接受一个函数（该函数也接受一个元素作为参数）和一个列表作为 Scheme 中的参数

但是这行代码给了我错误（define (function funct(x),l)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:04:24.510

在 Scheme 中，函数是[一等公民](http://en.wikipedia.org/wiki/First-class_citizen)。因此，您可以将一个函数作为参数传递给另一个函数，就像您对任何其他符号所做的那样。没有`function`关键字这样的东西。

例如，要定义一个`map`将函数作为参数调用的函数，并将其应用于列表的每个成员，您可以使用：

```
(define (map f l)
  (if (null? l)
      l
      (cons (f (car l)) (map f (cdr l))))) 
```

然后，如果您有一个`add1`要传递给的名为的函数`map`：

```
(define (add1 x)
  (+ x 1))

(map add1 '(1 2 3)) 
```

结果将是`(2 3 4)`。

**[演示](http://ideone.com/clone/V79vv)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T13:35:35.827

Scheme 不允许您在函数定义中指定参数类型。你能做的最好的就是

```
(define my-func(func . args) 
```

这将为您提供**func参数中的第一个参数，以及****args**列表中的所有其余参数。然后，如果需要，您可以在将其应用于 args 之前检查 ** func ** 的类型。

```
(cond
  ((procedure? func) (func args))
  (else (report some kind of error however you want))) 
```

# spring - 如何在 Spring 中通过 XML 定义 MySql 数据源 bean

> ID：12657503
> 
> 赞同：14
> 
> 时间：2012-09-29T23:47:38.363
> 
> 标签：spring, javabeans, datasource, definition

我查看了定义 bean 的文档。我只是不清楚用于 Mysql 数据库的类文件。任何人都可以填写下面的bean定义吗？

```
<bean name="dataSource" class="">
    <property name="driverClassName" value="" />
    <property name="url" value="mysql://localhost/GameManager" />
    <property name="username" value="gamemanagertest" />
    <property name="password" value="1" />
</bean> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-29T23:47:38.363

```
<bean name="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/GameManager" />
    <property name="username" value="gamemanagertest" />
    <property name="password" value="1" />
</bean> 
```

[http://docs.spring.io/spring-data/jdbc/docs/1.1.0.M1/reference/html/orcl.datasource.html](http://docs.spring.io/spring-data/jdbc/docs/1.1.0.M1/reference/html/orcl.datasource.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-30T10:26:42.750

使用此类`org.springframework.jdbc.datasource.DriverManagerDataSource`- [DriverManagerDataSource](http://docs.spring.io/autorepo/docs/spring/3.2.3.RELEASE/javadoc-api/org/springframework/jdbc/datasource/DriverManagerDataSource.html)。作为最佳实践，如果我们将数据库值隔离到一个`.properties`文件中并将其配置到我们的 spring servlet xml 配置中，它会更好。在下面的示例中，属性存储为键值对，我们`value`使用相应的`key`.

***applicationContext-dataSource.xml***：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
    <property name="connectionCachingEnabled" value="true"/>
</bean>

<context:property-placeholder location="classpath:jdbc.properties"/> 
```

***jdbc.propeties***文件：

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/sample_db
jdbc.username=root
jdbc.password=sec3ret 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-16T03:56:01.403

两个答案都适合这个问题。但仅供参考，如果您打算使用**DriverManagerDataSource**作为数据源，则每次调用数据源 bean 都会创建一个到数据库的新连接，不推荐用于生产，甚至它不连接池。

如果您需要连接池，请考虑[Apache Commons DBCP](https://commons.apache.org/proper/commons-dbcp/)。

```
<bean name="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/GameManager" />
    <property name="username" value="gamemanagertest" />
    <property name="password" value="1" />
    <property name="initialSize" value="2" />
    <property name="maxActive" value="5" />
</bean> 
```

其中[initialSize](https://commons.apache.org/proper/commons-dbcp/api-1.4/org/apache/commons/dbcp/BasicDataSource.html#initialSize)和[maxActive](https://commons.apache.org/proper/commons-dbcp/api-1.4/org/apache/commons/dbcp/BasicDataSource.html#maxActive)是池化相关属性。

要使用它，请确保您的路径中有[所需的 jar](https://commons.apache.org/proper/commons-dbcp/download_dbcp.cgi)。

# ios - 在 iOS 中使用快捷方式（别名）

> ID：12657510
> 
> 赞同：-1
> 
> 时间：2012-09-29T23:48:21.130
> 
> 标签：ios, alias, shortcuts

在我的游戏中，我更喜欢使用图像的快捷方式，而不是一遍又一遍地复制和粘贴现有图像。但是，每个快捷方式为 2.6mb，比大多数图像都大。有没有办法解决这个问题？干杯..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T05:39:59.420

完整的解释在苹果开发者文档“文件系统编程指南”中给出：

[https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/AccessingFilesandDirectories/AccessingFilesandDirectories.html#//apple_ref/doc/uid/TP40010672-CH3-SW10](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/AccessingFilesandDirectories/AccessingFilesandDirectories.html#//apple_ref/doc/uid/TP40010672-CH3-SW10)

简而言之，原始海报所谓的快捷方式正确地称为书签。它是使用 NSURL 类（或 CFURL 函数）中的方法创建的。当写入磁盘时，它被称为别名文件，就像过去的 Mac 一样。文件系统书签/别名文件具有与符号链接类似的功能，但它们远非一回事。

符号链接

*   在 Unix 文件系统级别提供
*   除路径名外不包含任何数据
*   如果目标文件被移动，则很脆弱
*   不需要应用程序代码来解释，因为 Unix 内核处理它们

别名文件

*   特定于 OS X，由 Core Foundation 和 Foundation 框架实现
*   可能非常大，尤其是在指向图像数据时（在 Mac 上，从 OS X 10.7 开始）
*   如果目标文件被移动（在一定范围内），则自我修复
*   需要使用 NSURL 或 CFURL 例程来解释

如果您希望从您的代码创建一个 Unix 符号链接，请使用 symlink 系统调用。请参阅[https://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man2/symlink.2.html#//apple_ref/doc/man/2/symlink](https://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man2/symlink.2.html#//apple_ref/doc/man/2/symlink)

# asp.net-mvc - MVC4 站点和 CNAME - 仅显示 @RenderBody 内容

> ID：12657513
> 
> 赞同：0
> 
> 时间：2012-09-29T23:48:47.167
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4

我刚刚将我的 MVC4-.Net4.0 网站部署到[http://regatta.azurewebsites.net/](http://regatta.azurewebsites.net/) 这很好用 - jQuery 和 jQueryMobile 脚本完美地呈现了这一点。

然后我按照说明添加了我自己的域 - [http://regatta.albrektsen.net](http://regatta.albrektsen.net)并使用 CNAME 和指向 azure 的 A 记录配置了我的 dns 供应商。

这又可以正常工作了-我访问了[http://regatta.albrektsen.net-](http://regatta.albrektsen.net)并且该站点出现了。但是：访问我的自定义域时，我只得到由`@RenderBody()`

基本上

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width" />
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    @Styles.Render("~/Content/mobileCss", "~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <div data-role="page" data-theme="b" @TempData["DataUrl"]>
        <div data-role="header">
            @if (IsSectionDefined("Header")) {
                @RenderSection("Header")
            } else {
                @Html.ActionLink("Home", "Index", "Home");
                <h1>@ViewBag.Title</h1>
                @Html.Partial("_LoginPartial")
            }
        </div>
        <div data-role="content">
            @RenderBody()
        </div>
    </div> 
```

访问我的自定义域时丢失 - 仅显示 @RenderBody 显示的内容。

这怎么可能？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:37:54.927

哎呀——尴尬……

实际上 - 这原来是我 PC 的 DNS 缓存的问题。

发出 ipconfig /flushdns （具有管理员权限）解决了这个问题。我的“本地”regatta.albrektsen.net 指向一个测试服务器。

# php - 通过ajax（jquery）和json到php的java脚本数组

> ID：12657516
> 
> 赞同：0
> 
> 时间：2012-09-29T23:50:14.290
> 
> 标签：php, javascript, json, jquery

这是javascript代码：

```
var jsonData = JSON.stringify(testObj);
            $.ajax({
              url: '../php/functions/spesific_field_set.php',
              type: 'post',
              data: {fieldObjArray: jsonData, tableName: fieldTableName}
              }).always(SpesificPropertiesSet); 
```

这是php：

```
$updates = mysql_real_escape_string($_POST['fieldObjArray']);
$updates = json_decode($updates, true);
$tableName = mysql_real_escape_string($_POST['tableName']);

echo $updates; 
```

什么 testObj 是一个对象数组，我应该如何将它传递给 php？以及我应该如何在 php 端访问这个对象数组中的数据？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T23:55:43.707

这是 PHP 文件。这应该向您展示如何访问`$updates`通过 AJAX 发送的内容。

```
$updates = $_POST['fieldObjArray'];
$updates = json_decode($updates, true);
$tableName = $_POST['tableName'];
echo $updates; // this is an array so this would output 'Array'

foreach ($updates as $key => $value) {
    echo 'Key: '.$key.' Value: '.$value.'<br />'; // to access this, just use $updates['key']
}

// example
echo $updates['something']; 
```

# html - Bootstrap 下拉插入符号未在 Firefox 中显示

> ID：12657520
> 
> 赞同：2
> 
> 时间：2012-09-29T23:52:14.583
> 
> 标签：html, css, firefox, twitter-bootstrap

我想在按钮组内的引导下拉按钮的右侧显示插入符号。

我的代码是（另见[这个小提琴](http://jsfiddle.net/KdUdS/10/)）：

```
<div class="span3 well">
    <div class="btn-group btn-block">
        <a class="btn btn-primary dropdown-toggle btn-block" data-toggle="dropdown" href="#">
        New &hellip; <i class="caret pull-right"></i>
      </a>
      <ul class="dropdown-menu">
          <li>1</li>
          <li>2</li>
      </ul>
    </div>
</div> 
```

和

```
.btn-group .dropdown-toggle {
  padding-left: 10px;
  padding-right: 10px;
} 
```

在 webkit (Safari & Chrome) 中，它看起来符合预期：

![网络套件](../Images/3db83367d578882fa58a89766c6edf2f.png)

但是 Firefox 不起作用：

![壁虎](../Images/260479bf6ecae800185b356d9f4e18e5.png)

我在这里犯错了吗？哪种行为是正确的？我应该怎么做才能让它在任何地方都能工作？

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T02:39:02.513

`btn-group`导致问题的原因是：

```
.btn-block .dropdown-toggle {
  padding-left: 10px;
  padding-right: 10px;
}

<div class="span3 well">
  <div class="btn-block"> <!-- <<< Right here is where I removed btn-group -->
    <a class="btn btn-primary dropdown-toggle btn-block" data-toggle="dropdown" href="#">
      New &hellip; <i class="caret pull-right"></i>
    </a>
    <ul class="dropdown-menu">
      <li>1</li>
      <li>2</li>
    </ul>
  </div>
</div> 
```

[http://jsfiddle.net/userdude/KdUdS/12/](http://jsfiddle.net/userdude/KdUdS/12/)

它在 Chrome 中的外观与在 Firefox 中的外观相同。

**编辑**

这是问题所在：

```
.btn-group {
    font-size: 0;
    position: relative;
    vertical-align: middle;
    white-space: nowrap;    // <<< This here
} 
```

就这样[`line 3438 of bootstrap.css`](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)。我修复了它：

```
<div class="btn-block btn-group" style="white-space: normal;"> 
```

[http://jsfiddle.net/userdude/KdUdS/14/](http://jsfiddle.net/userdude/KdUdS/14/)

现在下拉元素看起来不那么热了，但我想你知道这会解决这个问题。

# uiwebview - UIWebView 在 iOS 6 模拟器上正确加载内容但不是在设备上？

> ID：12657526
> 
> 赞同：3
> 
> 时间：2012-09-29T23:53:15.300
> 
> 标签：uiwebview, ios-simulator, ios6

我在发布的应用程序中遇到了一个奇怪的错误。我的 UIWebView 不再在 iOS 6 上加载内容，但内容仍显示在模拟器中。活动指示器正确显示，但随后加载了一个空白网址？同样，这只发生在设备上，而不是模拟器上。

提供额外的上下文（在模拟器中为 NSURLRequest 分配了正确的 URL。在设备上运行时，该值为 nil。）

这是我的代码：

```
-(void)loading
{
    if(!self.webView.loading)
        [self.activityIndicator stopAnimating];
    else {
        [self.activityIndicator startAnimating];
    }
}

- (void)viewDidLoad
{
    [self.webView addSubview:self.activityIndicator];
    NSURLRequest *requestUrl = [NSURLRequest requestWithURL:self.url];
    [self.webView loadRequest:requestUrl];
    self.timer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(loading) userInfo:nil repeats:YES];
     [super viewDidLoad];
    NSLog(@"%@", requestUrl);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T07:31:38.560

我的 web 应用程序 (HTML+JS+CSS) 没有加载到设备上，但在浏览器和 iPhone 模拟器中运行良好，我遇到了类似的问题。问题的原因是文件名中的错误大小写。例如，HTML 文件想要加载一个文件“Loader.js”，而它的名称是“loader.js”。

所以，也许你应该检查你的'self.url'（如果你的'index.html'在它的文件名中有正确的大小写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T15:06:02.143

请在 nib 中使用 web 视图并将其调试到 safari 开发人员工具，以便您可以追踪实际问题。我将这种方法用于我的应用程序及其工作。打开开发人员工具的过程 1-打开 safari 2-转到首选项 3-转到高级选项 4-设置到开发人员工具 按照上述过程后，您可以看到您的 safari 有选项开发。这意味着您的 Safari 开发人员工具处于活动状态，您可以调试 ios 应用程序

# android - 在特定时间启动Android服务进程？

> ID：12657532
> 
> 赞同：0
> 
> 时间：2012-09-29T23:54:22.220
> 
> 标签：android, android-service

我目前正在制作一个应用程序来检查 android SD 内存上的文件更改/修改。
这个检查文件进程正在后台服务上运行。问题是我不希望这个服务一直执行这个进程
我希望这个进程在用户指定的时间运行。
这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:12:47.817

你必须让你的任务由 AlarmManager 运行，看到这个问题：[AlarmManager Android Every Day](https://stackoverflow.com/questions/4562757/alarmmanager-android-every-day)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:13:16.720

您可以使用 AlarmManager 处理此问题。见[报警管理器](http://developer.android.com/reference/android/app/AlarmManager.html)

这在这篇文章中是成功的： [Using Alarmmanager to start a service at specific time](https://stackoverflow.com/questions/3052149/using-alarmmanager-to-start-a-service-at-specific-time)

# ios - 可以观察 (KVO) NSObject 的每个属性吗？

> ID：12657537
> 
> 赞同：2
> 
> 时间：2012-09-29T23:55:39.317
> 
> 标签：ios, key-value-observing, nsobject

我正在考虑创建一个基类，其中所做的每个更改都会立即保存到 NSUserDefaults（当然只有 KVO 兼容部分），并在实例化该类型的对象时自动加载（一个非常基本的、可重用的用户数据存储）。

我无意为这个对象的每个子类提供一个类似“键列表”的常量，所以我希望有一种自动的方法来观察对象的每个属性。

任何想法如何做到这一点？当然只有公共 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T01:37:51.130

如果你有一个对象的一组属性，你可以将它们保存到 NSUserDefaults 中的字典中。要在每次设置时保存每个属性，您可以使用以下方法为每个属性创建自定义 setter 方法：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        if ([defaults objectForKey:@"yourKey"] == nil) {

            NSDictionary *dict  = [NSDictionary dictionaryWithObject:@"yourObject" forKey:@"keyForYourObject"];
            // Add stuff to the dictionary
            [defaults setObject:dict forKey:@"yourKey"];
        }else{
            NSDictionary *dict = [defaults objectForKey:@"yourKey"];
            // Add stuff to the dictionary
             [defaults setObject:dict forKey:@"yourKey"];
        } 
```

这将为您提供一个存储在 UserDefaults 中的具有所有属性的字典。然后使用标准方法获取键列表：

```
NSDictionary *dict = [[NSUserDefaults standardUserDefaults] objectForKey:@"yourKey"];
NSArray *keys = [dict allKeys]; 
```

# php - 两个符号之间的字符串的正则表达式，但不是该符号的三个

> ID：12657539
> 
> 赞同：5
> 
> 时间：2012-09-29T23:55:47.087
> 
> 标签：php, regex

我正在解析一个文档，并希望使用 php 的 preg_split() 将其拆分。

该文档被组织成具有以下标题的部分：

```
==Section Title== 
```

问题是每个部分都有带有以下标题的小节：

```
===Subsection Title=== 
```

问题：有没有办法使用正则表达式来解析文档中两个等号之间但不在三个等号之间的内容？

谢谢！

PS我正在尝试学习正则表达式，但我仍然觉得它很混乱！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T23:58:21.547

这是应该工作的一个：

```
(?<!=)==(?!=)(.*)(?<!=)==(?!=) 
```

这个怎么运作：

该模式`(?<!=)==(?!=)`出现两次（开始和结束）。`(?<!=)`它使用(negative [lookbehind](http://www.regular-expressions.info/lookaround.html) ) 和`(?!=)`(negative [lookahead](http://www.regular-expressions.info/lookaround.html) )匹配两个等号之前或之后没有另一个等号。这样做的目的是确保您不会意外匹配属于较大组的两个等号，例如`===`.

中间`(.*)`的 匹配两对之间存在的任何文本`==`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T23:58:41.657

我不确定您是否只是担心这些标题，或解析所有 WikiCreole，但库可用于在 PHP 中解析 WikiCreole。

[http://wiki.wikicreole.org/Libraries](http://wiki.wikicreole.org/Libraries)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T00:01:48.860

假设在行的开头/结尾没有任何空格：

```
^==[^=]+==$ 
```

# c# - 如何添加对库的引用

> ID：12657540
> 
> 赞同：1
> 
> 时间：2012-09-29T23:55:50.750
> 
> 标签：c#, dll

我在[这里](http://www.codeproject.com/Articles/274093/Math-Parser-NET)找到了一个数学解析器。我从来没有将这样的东西添加到程序中，并且想知道我需要做什么才能将这样的东西添加到程序中。例如，我想知道将文件放在哪里以及如何在标题中调用它，以便我可以使用文件中的类。我正在寻找也可以应用于其他事物的一般说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:03:01.100

听起来你有一点 C 背景。C# 在我们引入外部代码的方式上略有不同，实际上它比 C 容易得多。

要使用 Visual Studio 引用某些代码，您需要添加对该 dll 的引用。一旦在项目中包含了 dll（通过引用），您就可以通过添加 using 语句然后从该库中实例化对象来在代码中使用它

MSDN 文档在这里：http: [//msdn.microsoft.com/en-us/library/wkze6zky.aspx](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)

编辑：如果您在 VS 之外，正如您所指定的，您需要做一些事情：

*   让您的编译器知道程序集在哪里，以便它可以正确链接
*   将程序集添加到您的运行目录（它应该位于您的可执行文件旁边）
    *   或将您的库添加到 GAC
    *   或者使用 Assembly.Load 调用手动加载它

# c# - 使richTextBox 像控制台一样工作

> ID：12657546
> 
> 赞同：0
> 
> 时间：2012-09-29T23:57:04.250
> 
> 标签：c#, console, richtextbox

我正在编写一个应用程序，我想在表单中嵌入一个控制台。我目前正在使用richtextbox，但这不是必需的。我想禁用 Richtextbox 中的所有内容，例如：选择，使用 del 键和退格键删除，在我输入的每个单词后显示一个 _。并且具有在键入和输入时被识别的命令。非常感谢！~莱恩~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:13:06.090

回答。我创建了一个列表框和一个富文本框。文本框文本（命令）被发送到列表框。这是我正在使用的代码。

```
private void richTextBox2_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            listBox2.Items.Add(richTextBox2.Text);

                if (richTextBox2.Text == a1)
                {
                    MessageBox.Show("-c can't be used as a raw command, it is used to define when another command is being used. Try -c r to run the game...");
                }
                else if (richTextBox2.Text == a2)
                {
                    System.Diagnostics.Process.Start("Arcanists.jar");

                }
                else if (richTextBox2.Text == a3)
                {
                    foreach (System.Diagnostics.Process myProc in System.Diagnostics.Process.GetProcesses())
                    {
                        if (myProc.ProcessName == "javaw")
                        {
                            myProc.Kill();
                        }
                    }
                }
                else if (richTextBox2.Text == a4)
                {
                    MessageBox.Show("Type -c r to run the game");
                }
                else
                {
                    listBox2.Items.Add("*!Invalid Command!*");
                }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-20T08:43:25.307

使用您的点击通过文本框关注您的文本输入。您将需要一个用于输出的richtextbox 和一个用于输入的文本框，例如带有控制台选项的视频游戏

# alfresco - 露天社区 4.0.c 的 fme 数据列表扩展

> ID：12657557
> 
> 赞同：0
> 
> 时间：2012-09-29T23:59:16.593
> 
> 标签：alfresco, datalistitem

嗨，我知道 fme datalist 扩展与社区 4.0.c 不完全兼容。但想试一试。我安装了 jar 文件，它似乎适用于我之前创建的数据列表。但是我注意到了这样做的副作用，当我创建一个新站点并向某人发送邀请时，接受或拒绝按钮不会出现在任务中（受邀者接受或拒绝）。不知道发生了什么。但是积极方向的提示会帮助我调试吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:16:19.440

本周我完成了将 fme datalists 扩展迁移到 4.0。修复了您今天提到的问题。您可能想看看[http://www.contentreich.de/alfresco-extended-datalists-migrated-to-4-0](http://www.contentreich.de/alfresco-extended-datalists-migrated-to-4-0)和 github 上的源代码。除了[https://issues.alfresco.com/jira/browse/ALF-16153](https://issues.alfresco.com/jira/browse/ALF-16153)和 Solr 过滤问题之外，我不知道还有其他问题。我想我将修复过滤以支持基于 solr 的存储库。

# ruby-on-rails - 安装 nokogiri Mac OS X 10.8.2 XCode 已安装

> ID：12657558
> 
> 赞同：12
> 
> 时间：2012-09-29T23:59:46.010
> 
> 标签：ruby-on-rails, ruby, installation, nokogiri

试图在 Mountain Lion 上安装 nokogiri。我使用的是 ruby​​ 1.8.7，但刚刚升级到 1.9.3，但它阻止了捆绑安装的工作。

顺便说一句，我可以通过卸载 ruby​​ 1.9.3 并恢复到 1.8.7 来解决这个问题。然而，这显然是一个次优的解决方案，因为我不想在剩下的时间里被困在 1.8.7 上......

```
Users-MacBook-Pro:sample_app user$ ls
Gemfile     app     doc     script
Gemfile.lock    config      lib     spec
README.md   config.ru   log     tmp
Rakefile    db      public      vendor
Ravins-MacBook-Pro:sample_app user$ bundle
Fetching gem metadata from https://rubygems.org/.......
/Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.2.1/lib/bundler.rb:263: warning: Insecure world writable dir /usr/local in PATH, mode 040777
Using rake (0.9.2.2) 
Using i18n (0.6.1) 
Using multi_json (1.3.6) 
Using activesupport (3.2.8) 
Using builder (3.0.3) 
Using activemodel (3.2.8) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.8) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.8) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.8) 
Using activeresource (3.2.8) 
Using addressable (2.3.2) 
Installing nokogiri (1.5.5) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
extconf.rb:86: warning: Insecure world writable dir /usr/local in PATH, mode 040777
checking for libxml/parser.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-zlib-dir
    --without-zlib-dir
    --with-zlib-include
    --without-zlib-include=${zlib-dir}/include
    --with-zlib-lib
    --without-zlib-lib=${zlib-dir}/lib
    --with-iconv-dir
    --without-iconv-dir
    --with-iconv-include
    --without-iconv-include=${iconv-dir}/include
    --with-iconv-lib
    --without-iconv-lib=${iconv-dir}/lib
    --with-xml2-dir
    --without-xml2-dir
    --with-xml2-include
    --without-xml2-include=${xml2-dir}/include
    --with-xml2-lib
    --without-xml2-lib=${xml2-dir}/lib
    --with-xslt-dir
    --without-xslt-dir
    --with-xslt-include
    --without-xslt-include=${xslt-dir}/include
    --with-xslt-lib
    --without-xslt-lib=${xslt-dir}/lib
    --with-libxslt-config
    --without-libxslt-config
    --with-pkg-config
    --without-pkg-config
    --with-libxml-2.0-config
    --without-libxml-2.0-config
    --with-pkg-config
    --without-pkg-config
    --with-libiconv-config
    --without-libiconv-config
    --with-pkg-config
    --without-pkg-config
/Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:970:in `block in find_header'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:969:in `find_header'
    from extconf.rb:114:in `<main>'

Gem files will remain installed in /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5 for inspection.
Results logged to /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5/ext/nokogiri/gem_make.out
An error occurred while installing nokogiri (1.5.5), and Bundler cannot continue.
Make sure that `gem install nokogiri -v '1.5.5'` succeeds before bundling. 
```

我已经下载了包含开发工具的 XCODE，所以我不知道为什么它不会安装 nokogiri ......

当我尝试直接安装 nokogiri 时，我得到：

```
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
extconf.rb:86: warning: Insecure world writable dir /usr/local in PATH, mode 040777
checking for libxml/parser.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-zlib-dir
    --without-zlib-dir
    --with-zlib-include
    --without-zlib-include=${zlib-dir}/include
    --with-zlib-lib
    --without-zlib-lib=${zlib-dir}/lib
    --with-iconv-dir
    --without-iconv-dir
    --with-iconv-include
    --without-iconv-include=${iconv-dir}/include
    --with-iconv-lib
    --without-iconv-lib=${iconv-dir}/lib
    --with-xml2-dir
    --without-xml2-dir
    --with-xml2-include
    --without-xml2-include=${xml2-dir}/include
    --with-xml2-lib
    --without-xml2-lib=${xml2-dir}/lib
    --with-xslt-dir
    --without-xslt-dir
    --with-xslt-include
    --without-xslt-include=${xslt-dir}/include
    --with-xslt-lib
    --without-xslt-lib=${xslt-dir}/lib
    --with-libxslt-config
    --without-libxslt-config
    --with-pkg-config
    --without-pkg-config
    --with-libxml-2.0-config
    --without-libxml-2.0-config
    --with-pkg-config
    --without-pkg-config
    --with-libiconv-config
    --without-libiconv-config
    --with-pkg-config
    --without-pkg-config
/Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:970:in `block in find_header'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/ravinthambapillai/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:969:in `find_header'
    from extconf.rb:114:in `<main>'

Gem files will remain installed in /Users/ravinthambapillai/.rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5 for inspection.
Results logged to /Users/ravinthambapillai/.rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5/ext/nokogiri/gem_make.out 
```

![开发人员工具组件选项卡](../Images/1066d960d7d21a30e943b6eabe283296.png) 谢谢，

![开发者工具安装照片](../Images/bac08379821109ab1e7576b9c85cd9d6.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-25T11:22:07.043

经过短暂的研究，我发现通过创建符号链接可以简单地解决什么问题

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

对我有用 希望对你也有用

```
gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /Users/morozovm/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
checking for libxml/parser.h... *** extconf.rb failed ***

bash-3.2$ sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2
Password:
bash-3.2$ gem install nokogiri
Building native extensions.  This could take a while...
Successfully installed nokogiri-1.5.6
1 gem installed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T02:03:25.237

试试这些。我遇到了同样的问题，它对我有用。首先安装 libxml2，然后再次运行 bundler。

```
 brew install libxml2
 brew link libxml2 
```

资料来源： [http ://decielo.com/articles/11/rails-3-on-lion-hey-ho-lets-go](http://decielo.com/articles/11/rails-3-on-lion-hey-ho-lets-go)

**更新：**

我希望你安装了自制软件。如果您没有自制软件，那么我建议您安装自制软件，然后安装 libxml2，然后安装 bundler。如果您没有自制软件，请不要使用 mac 端口。

**更新：**

这不是命令行工具的问题。它在 libxml 上失​​败了。尝试阅读错误，你会看到

```
 checking for libxml/parser.h... *** extconf.rb failed *** 
```

这就是问题所在

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-30T01:29:22.660

我认为这是错误消息中最重要的一点：

```
warning: Insecure world writable dir /usr/local in PATH, mode 040777 
```

构建过程的某些部分抱怨该目录具有任何人都可以写入的权限。您可以尝试追捕它 - 或者您可以修复它。

# node.js - npm install 给出未经授权的名称或密码错误

> ID：12657560
> 
> 赞同：40
> 
> 时间：2012-09-30T00:00:00.407
> 
> 标签：node.js, installation, npm, tap

当我尝试使用安装水龙头时

```
npm install tap 
```

我收到以下错误：

```
npm ERR! Error: unauthorized Name or password is incorrect.: tap 
```

以下是整个回复：

```
npm http GET https://registry.npmjs.org/tap
npm http 401 https://registry.npmjs.org/tap
npm ERR! Error: unauthorized Name or password is incorrect.: tap
npm ERR!     at RegClient.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:253:14)
npm ERR!     at Request.init.self.callback (/usr/local/lib/node_modules/npm/node_modules/request/main.js:120:22)
npm ERR!     at Request.EventEmitter.emit (events.js:91:17)
npm ERR!     at Request.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/request/main.js:648:16)
npm ERR!     at Request.EventEmitter.emit (events.js:115:20)
npm ERR!     at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (/usr/local/lib/node_modules/npm/node_modules/request/main.js:610:14)
npm ERR!     at IncomingMessage.EventEmitter.emit (events.js:115:20)
npm ERR!     at IncomingMessage._emitEnd (http.js:366:10)
npm ERR!     at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
npm ERR!     at CleartextStream.socketOnData (http.js:1366:20)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Linux 3.2.0-31-generic-pae
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install" "tap"
npm ERR! cwd /home/thaddeus
npm ERR! node -v v0.8.8
npm ERR! npm -v 1.1.59
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/thaddeus/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-09-30T00:00:00.407

找到了答案。

从我的主目录中删除 .npmrc 并且它可以工作！

感谢 mcollina [https://github.com/mcollina](https://github.com/mcollina)在[https://github.com/isaacs/npm/issues/2778](https://github.com/isaacs/npm/issues/2778)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-04-18T09:30:37.673

```
 1.>Go to your this location

    C:\Users\{your user name or ID}

 2.> open .npmrc & Remove all content from .npmrc file.

 3.>reopen your new command prompt

 4.>again run the code , will work. 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-23T06:52:28.553

我也遇到了这个问题。我的出现是因为我在 npmjs.org 中更改了密码。因此，尝试使用新密码再次从终端登录 npm，然后安装任何模块。它对我有用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-23T14:33:22.350

您可能在 .npmrc 配置文件 ($HOME/.npmrc) 中配置了 _auth 条目。如果您使用公共注册表，只需删除该条目，因为它不需要。如果您使用的是私有 npm 注册表，您应该与您的管理员确认这是您访问注册表的正确身份验证密钥。

我不建议只删除整个文件 (.npmrc)，因为该文件可能包含重要的配置，以使您的 npm 正常工作。即：代理配置。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-26T11:00:17.393

删除 package-lock.json 和 node_modules 在我的案例中起到了作用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-03T20:45:17.950

你也可以使用

```
npm cache clean 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-14T17:05:37.527

我试过了

```
npm cache clean 
```

但它没有用。我没有在我的目录中看到 .npmrc。我杀死了我的 bash shell（mac 上的终端）并提出了一个新的，这似乎可以解决问题。不确定是 bash refresh 还是 npm cache clean 还是两者的组合。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-28T15:36:57.687

`npm cache verify` 是你需要的

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-02T15:59:56.297

我遇到了一个奇怪的问题，我收到了凭据错误，这是因为 npm login 缓存了错误的凭据，然后 npm logout 没有清除凭据（“npm login”总是显示我的默认详细信息就证明了这一点）。

NPM 将您的登录信息存储在全局 NPM_CONFIG_EMAIL 和 NPM_CONFIG__AUTH 下。如果您执行“npm config ls -la”并在“环境配置”下查看电子邮件，您可能遇到与我相同的问题（其中 npm 注销不起作用）。

取消设置全局 NPM_CONFIG__AUTH 和 NPM_CONFIG_EMAIL 然后再次 npm 登录它应该可以工作。（在终端中，它只是“未设置 NPM_CONFIG__AUTH”）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-18T17:44:21.693

对我来说，我需要在 npm 站点中创建一个帐户，然后通过终端进入 npm using ，从您的文件夹`npm login`中删除该文件，然后在您的项目文件夹中重试`.npmrc``/home``npm install`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-02T18:47:27.410

如果您更改了系统 LAN 密码，请运行`npm login`并提供新密码。

一旦登录成功，您将不会在登录时出错`npm install`。

# recursion - 检查列表的反向是否与未更改的列表相同？

> ID：12657563
> 
> 赞同：2
> 
> 时间：2012-09-30T00:01:29.967
> 
> 标签：recursion, scheme, racket, reverse

我正在学习计划，我必须做的一件事是递归以确定列表是否具有反射性，即列表在反转时看起来相同。我必须原始地这样做，所以我不能对列表使用反向方法。我还必须使用显而易见的递归。问题在于，使用我们学到的非常基本的东西来访问列表或缩短列表非常困难，因为这些有点像链表。我也想不使用索引。话虽如此，我有一些想法，想知道这些是否足够，你认为我实际上可以用方案的基础做得更好。

1.  使用递归（我的实现）反转列表并比较原始版本和此版本。列表。
2.  通过递归列表的其余部分来比较第一个和最后一个元素以找到最后一个元素并与第一个元素进行比较。跟踪我递归了多少次，然后对列表的倒数第二个元素少做一次，以与列表的第二个元素进行比较。（这非常复杂，因为我已经尝试过了，但最终失败了，但我想看看你们也会这样做）
3.  缩短列表以每次修剪第一个和最后一个元素并进行比较。我不确定这是否可以使用方案的基础知识来完成。
4.  你的建议或提示或任何东西。我对计划很陌生。谢谢阅读。我知道它很长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:40:46.240

检查列表是否是回文*而不反转它是*[Danvy 和 Goldberg 在“There and Back Again”](http://www.brics.dk/RS/05/3/BRICS-RS-05-3.pdf)中解释的技术示例之一。他们在`(ceil (/ (length lst) 2))`递归调用中执行此操作，但有一个更简单的版本可以在`(length lst)`调用中执行此操作。

这是解决方案的骨架：

```
(define (pal? orig-lst)
  ;; pal* : list -> list/#f
  ;; If lst contains the first N elements of orig-lst in reverse order,
  ;; where N = (length lst), returns the Nth tail of orig-lst.
  ;; Otherwise, returns #f to indicate orig-lst cannot be a palindrome.
  (define (pal* lst)
    ....)

  .... (pal* orig-lst) ....) 
```

这听起来像是家庭作业，所以我不想填写*所有*空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T00:43:00.743

我同意＃1似乎是要走的路。这很简单，我无法想象它会失败。可能我的想象力不够强大。:)

您正在考虑的其他选项似乎很尴尬，因为我们正在讨论链表，它直接支持顺序访问但不支持随机访问。正如您所注意到的，“索引”到链接列表中是禁止的。它最终尽职尽责地沿着列表结构前进。正因为如此，其他选择当然是可行的，但它们很昂贵。

这笔费用不是因为我们在 Scheme：而是因为我们正在处理链表。只是为了确保清楚：Scheme 有支持快速随机访问的向量（数组）。在向量上测试回文性就像您期望的那样简单：

```
#lang racket
;; In Professional-level Racket

(define (palindrome? vec)
  (for/and ([i (in-range 0 (vector-length vec))]
            [j (in-range (sub1 (vector-length vec)) -1 -1)])
    (equal? (vector-ref vec i)
            (vector-ref vec j))))

;; Examples
(palindrome? (vector "b" "a" "n" "a" "n" "a"))
(palindrome? (vector "a" "b" "b" "a")) 
```

所以我认为，你要解决的问题的一个重点是表明你选择的数据结构——问题的表示——可以对问题的解决产生很大的影响。

（旁白：＃2当然是可行的，尽管它违背了单链表数据结构的纹理。＃3的方法需要对表示进行彻底改变：乍一看，我认为你需要可变的，双链表可以解决任何正义问题，因为您需要能够*向后*行进。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T13:53:50.747

要回答 dyoo 的问题，您不必知道自己处于中途；你只需要进行一定的比较。如果该比较有效，那么 a) 字符串必须是可逆的并且 b) 您必须处于中间点。

因此，如果您能达到它，那就有更有效的解决方案......

# clojure - 惯用的 Clojure 方法来查找序列中最常见的项目

> ID：12657566
> 
> 赞同：5
> 
> 时间：2012-09-30T00:01:50.780
> 
> 标签：clojure, idioms

给定一系列项目，我想按频率降序查找 n 个最频繁的项目。因此，例如，我希望这个单元测试通过：

```
(fact "can find 2 most common items in a sequence"
      (most-frequent-n 2 ["a" "bb" "a" "x" "bb" "ccc" "dddd" "dddd" "bb" "dddd" "bb"]) 
      =>
      '("bb" "dddd")) 
```

我对 Clojure 还很陌生，但仍在努力掌握标准库。这是我想出的：

```
(defn- sort-by-val [s]        (sort-by val s))
(defn- first-elements [pairs] (map #(get % 0) pairs))

(defn most-frequent-n [n items]
  "return the most common n items, e.g. 
     (most-frequent-n 2 [:a :b :a :d :x :b :c :d :d :b :d :b])  => 
         => (:d :b)"
  (take n (->
           items               ; [:a :b :a :d :x :b :c :d :d :b :d :b]
           frequencies         ; {:a 2, :b 4, :d 4, :x 1, :c 1}
           seq                 ; ([:a 2] [:b 4] [:d 4] [:x 1] [:c 1])
           sort-by-val         ; ([:x 1] [:c 1] [:a 2] [:b 4] [:d 4])
           reverse             ; ([:d 4] [:b 4] [:a 2] [:c 1] [:x 1])
           first-elements)))   ; (:d :b :a :c :x) 
```

然而，这似乎是一个复杂的函数链来执行相当常见的操作。有没有更优雅或更惯用（或更有效）的方式来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T00:37:06.310

正如您所发现的，通常您会使用排序依据和频率的组合来获得频率排序的列表。

```
(sort-by val (frequencies ["a" "bb" "a" "x" "bb" "ccc" "dddd" "dddd" "bb" "dddd" "bb"]))
=> (["x" 1] ["ccc" 1] ["a" 2] ["dddd" 3] ["bb" 4]) 
```

然后你可以很容易地操纵它来获得最低/最高频率的项目。也许是这样的：

```
(defn most-frequent-n [n items]
  (->> items
    frequencies
    (sort-by val)
    reverse
    (take n)
    (map first))) 
```

这又与您的解决方案非常相似（除此之外，您不需要巧妙地使用`->>`宏的辅助函数）。

所以总的来说，我认为你的解决方案非常好。不用担心函数链——对于逻辑上相当复杂的概念，它实际上是一个非常简短的解决方案。尝试用 C#/Java 编写相同的代码，你就会明白我的意思......

# css - CSS下拉列表不扩展背景边框

> ID：12657568
> 
> 赞同：2
> 
> 时间：2012-09-30T00:03:01.520
> 
> 标签：css, drop-down-menu

我目前有一个我自己无法解决的问题，所以我把我的问题转给你们，希望你们能帮助我。

我正在尝试创建一个下拉列表/菜单，它运行良好，尽管背景边框随着下拉列表扩展，看起来像一团糟。

所以我想征求你的意见来解决这个问题。我已将代码放到网上，并为带有下拉列表的菜单做了一个小演示：

**演示**：[http ://test.xavizus.eu/test2/](http://test.xavizus.eu/test2/)
**CSS**：[http ://codepaste.net/zjyeha](http://codepaste.net/zjyeha)

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:10:02.713

你可以：

```
#menu { 
    height: 30px;
    overflow: visible;
    border-radius: 5px;
    background-color: #484848;
    color: #FFFFFF;
    padding: 5px 5px 0px 5px;
    margin: 5px 5px 5px 5px;
    font: 8pt verdana, arial, sans-serif;
} 
```

这将允许`ul`子菜单显示，但会阻止`#menu`增长以适应它的高度。

# f# - 在 F# 中折叠列表

> ID：12657569
> 
> 赞同：2
> 
> 时间：2012-09-30T00:03:04.977
> 
> 标签：f#

我有一个非常琐碎的任务，但我不知道如何使解决方案更漂亮。
目标是`List`根据是否通过谓词来获取并返回结果。结果应该分组。这是一个简化的示例：

谓词：`isEven`
`Inp : [2; 4; 3; 7; 6; 10; 4; 5]`
`Out: [[^^^^]......[^^^^^^^^]..]`

这是我到目前为止的代码：

```
let f p ls =
    List.foldBack
        (fun el (xs, ys) -> if p el then (el::xs, ys) else ([], xs::ys))
        ls ([], [])
    |> List.Cons // (1)
    |> List.filter (not << List.isEmpty) // (2)

let even x = x % 2 = 0

let ret =
    [2; 4; 3; 7; 6; 10; 4; 5]
    |> f even
// expected [[2; 4]; [6; 10; 4]] 
```

这段代码似乎不太可读。另外，我不喜欢第 (1) 和 (2) 行。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T21:54:08.743

这是我的看法。你首先需要一些辅助函数：

```
// active pattern to choose between even and odd intengers
let (|Even|Odd|) x = if (x % 2) = 0 then Even x else Odd x

// fold function to generate a state tupple of current values and accumulated values
let folder (current, result) x =
    match x, current with
    | Even x, _ -> x::current, result // even members a added to current list
    | Odd x, [] -> current, result    // odd members are ignored when current is empty
    | Odd x, _ -> [], current::result // odd members starts a new current

// test on data
[2; 4; 3; 7; 6; 10; 4; 5]
    |> List.rev                             // reverse list since numbers are added to start of current
    |> List.fold folder ([], [])            // perform fold over list
    |> function | [],x -> x | y,x -> y::x   // check that current is List.empty, otherwise add to result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T03:47:47.887

这个怎么样？

```
let folder p l = function
    | h::t when p(l) -> (l::h)::t
    | []::_ as a -> a
    | _ as a -> []::a

let f p ls =
    ls
    |> List.rev
    |> List.fold (fun a l -> folder p l a) [[]]
    |> List.filter ((<>) []) 
```

至少该文件夹非常清晰有效，但是您通过列表反转为此付出了代价。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:26:21.270

这是一个基于递归的递归解决方案`List.filter`

```
let rec _f p ls =
    match ls with
    |h::t -> if p(h) then 
                 match  f p t with
                 |rh::rt -> (h::rh)::rt
                 |[] -> (h::[])::[]
             else []::f p t
    |[] -> [[]]

let  f p ls = _f p ls |> List.filter (fun t -> t <> []) 
```

不过，必须在最后进行过滤似乎并不优雅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T02:57:24.260

我想不出一种使用高阶函数优雅地做到这一点的方法，但这里有一个使用列表理解的解决方案。我认为阅读起来相当简单。

```
let f p ls = 
  let rec loop xs = 
    [ match xs with 
      | [] -> ()
      | x::xs when p x -> 
        let group, rest = collectGroup [x] xs
        yield group
        yield! loop rest
      | _::xs -> yield! loop xs ]
  and collectGroup acc = function
    | x::xs when p x -> collectGroup (x::acc) xs
    | xs -> List.rev acc, xs
  loop ls 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T14:02:11.863

随着列表反转，我想去#seq而不是列表。

此版本在内部使用突变（喘气！）以提高效率，但也可能会因 seq 的开销而慢一些。我认为它是相当可读的。

```
let f p (ls) = seq {
    let l = System.Collections.Generic.List<'a>()
    for el in ls do
      if p el then 
        l.Add el
      else 
        if l.Count > 0 then yield l |> List.ofSeq
        l.Clear()
    if l.Count > 0 then yield l |> List.ofSeq
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-30T03:33:11.447

干得好。这个功能也应该有相当不错的性能。

```
let groupedFilter (predicate : 'T -> bool) (list : 'T list) =
    (([], []), list)
    ||> List.fold (fun (currentGroup, finishedGroups) el ->
        if predicate el then
            (el :: currentGroup), finishedGroups
        else
            match currentGroup with
            | [] ->
                [], finishedGroups
            | _ ->
                // This is the first non-matching element
                // following a matching element.
                // Finish processing the previous group then
                // add it to the finished groups list.
                [], ((List.rev currentGroup) :: finishedGroups))
    // Need to do a little clean-up after the fold.
    |> fun (currentGroup, finishedGroups) ->
        // If the current group is non-empty, finish it
        // and add it to the list of finished groups.
        let finishedGroups =
            match currentGroup with
            | [] -> finishedGroups
            | _ ->
                (List.rev currentGroup) :: finishedGroups

        // Reverse the finished groups list so the grouped
        // elements will be in their original order.
        List.rev finishedGroups;; 
```

# apache - .htpasswd 登录屏幕未显示的问题

> ID：12657574
> 
> 赞同：0
> 
> 时间：2012-09-30T00:04:23.090
> 
> 标签：apache, .htaccess, ubuntu, .htpasswd

我正在尝试在本地主机上设置受密码保护的目录。

`.htaccess`文件位于且`/var/www/project/code/server/development`文件`.htpasswd`位于`/home/adarshakb/.htpasswd`

.htaccess 文件包含：

```
AuthType Basic
AuthName Restricted
AuthUserFile /home/adarshakb/.htpasswd
require valid-user 
```

并且`.htpasswd`包含：

```
user:HkCKfIOQNlS1E 
```

现在，如果我去`http://localhost/project/code/server/development/`它不要求任何身份验证，只是打开。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T02:41:10.003

是否将 .htaccess 中的行从：

```
AuthName Restricted 
```

至

```
AuthName "Password Protected Area" 
```

工作？

之后，启用 htaccess 覆盖：

```
sudo nano /etc/apache2/sites-available/default 
```

将“AllowOverride None”更改为“AllowOverride All”：

```
<Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
</Directory> 
```

最后重新加载设置：

```
sudo /etc/init.d/apache2 reload 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:55:57.670

我猜你缺少一些模块的负载。为确保这一点，请尝试将垃圾放入`.htaccess`文件中，并告诉我们发生了什么。如果您有**错误 500**，则您的模块已正确加载。

您可以使用以下命令打印出加载的模块：

```
apache2ctl -M  2>/dev/null 
```

你至少需要`mod_authn_file`&`mod_auth_basic`

# guava - 番石榴的 AbstractService 类中的 stop() 实现

> ID：12657576
> 
> 赞同：1
> 
> 时间：2012-09-30T00:04:33.787
> 
> 标签：guava

我试图了解番石榴的 AbstractService 是如何实现的。在接口 Service 中已经提到了各种状态转换。当对 stop() 的调用成功时，一种这样的转换是从 STOPPING -> TERMINATED 。

现在，当我看到 AbstractService 的 stop() 是如何实现的时，我发现在 STOPPING 的情况下，它们会失败并且不会将状态更改为 TERMINATED。

我可能错了，我只是想学习和理解它是如何工作的。

AbstractService 类的代码在这里给出。[http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/util/concurrent/AbstractService.java?r=8d5659ad0e137d3a594014793264292a75b48bb9](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/util/concurrent/AbstractService.java?r=8d5659ad0e137d3a594014793264292a75b48bb9)

在页面上搜索 stop() 以查看其实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:25:40.473

当您`stop()`在`RUNNING`状态中调用时，状态将更改为`STOPPING`并`doStop()`调用方法。之后再次调用`stop()`不应该做任何事情。`doStop()`实现应该调用which将`notifyStopped()`状态从 更改`STOPPING`为`TERMINATED`。

# android - 当 EditText 框为空时显示完整列表

> ID：12657583
> 
> 赞同：0
> 
> 时间：2012-09-30T00:06:44.190
> 
> 标签：android, listview, filter

我有一个使用自定义适配器搜索列表的 EditText 组件。它工作正常，只是过滤后的视图保留在屏幕上。如果用户删除了编辑框中的所有文本，我希望完整列表返回屏幕。

我尝试了三种方法：

1.  我在适配器的过滤器类中设置了一个条件。放置`notifyDataSetChanged();`在 FilterResults 函数中，它会使程序崩溃。

2.  检测Activity中EditTtext框是否为空，然后调用 `notifyDataSetChanged();`. 该条件有效，因为我看到将`System.out.println()`文本打印到控制台。但它对listView没有影响。只有过滤后的文本保留在屏幕上。

3.  放置 `notifyDataSetChanged();`在`OnTextChanged()`. 这对重置列表视图也没有影响。

当 EditText 框为空时，如何重置列表视图？

活动代码：

// 在 OnCreate 中

```
if (searchBox.toString().equals("")){
                objAdapter.notifyDataSetChanged();

            }

        searchBox.addTextChangedListener(new TextWatcher(){

                @Override
                public void afterTextChanged(Editable arg0) {
                    // Do nothing
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                    // Do nothing
                }

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                    objAdapter.getFilter().filter(s);

if (s.toString().equals("")){

                        // objAdapter.notifyDataSetChanged(); fails here 

}

                    }
                }

            }); 
```

来自适配器的代码。

```
 public class NewsRowAdapter extends ArrayAdapter<Item> {
    //.... code
    private class ListFilter extends Filter
        {
                @Override
                protected FilterResults performFiltering(CharSequence constraint)
                {   
                    FilterResults results = new FilterResults();
                    String prefix = constraint.toString().toLowerCase();

                    if (prefix == null || prefix.length() == 0)
                    {

                        System.out.println("editText is empty");
                        // notifyDataSetChanged(); no effect

                        ArrayList<Item> list = new ArrayList<Item>(original);
                        results.values = list;
                        results.count = list.size();

                    }
                    else
                    {
                        final ArrayList<Item> list = original;

                        int count = list.size();
                        final ArrayList<Item> nlist = new ArrayList<Item>(count);

                        for (int i=0; i<count; i++)
                        {
                            final Item pkmn = list.get(i);
                            final String value = pkmn.getName().toLowerCase();
                        if (value.startsWith(prefix))
                        {
                            nlist.add(pkmn);
                        }
                    }
                    results.values = nlist;
                    results.count = nlist.size();
                }
                return results;
            }

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                fitems = (ArrayList<Item>)results.values;

                clear();
                int count = fitems.size();
                for (int i=0; i<count; i++)
                {
                    Item pkmn = (Item)fitems.get(i);
                    add(pkmn);
                }

                if (fitems.size() > 0){
                    notifyDataSetChanged();
                } else{
                    notifyDataSetInvalidated();
                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:29:10.717

而不是`searchBox.toString()`，使用`searchBox.getText().toString()`

`searchBox.toString()`正在返回对象的 VM 引用——它永远不会等于什么

# php - MySQL 服务器已经消失 - 在 mysql php 循环之后

> ID：12657586
> 
> 赞同：0
> 
> 时间：2012-09-30T00:07:55.590
> 
> 标签：php, mysql

我正在对具有超过 20MM 条目的数据库进行查询，这意味着我将查询分成几个较小的查询。

问题是如果我尝试获取页面未加载的 20MM 条目并收到通知：MySQL 服务器已消失，并显示一个空白屏幕，没有标题和内容。但是，如果我获取 5MM 条目，页面会正确加载，并显示内容：

这是我的代码

```
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);
ini_set('memory_limit', '1000M');
for($n=0; $n<20000000; $n=$n+500000){
    $m=500000;
$query = "SELECT * FROM user_likes LIMIT ". $n .",". $m; 
//echo $query;
$result = mysql_query($query) or die(mysql_error());

// craete arrays
while($row = mysql_fetch_array($result)){
    set_time_limit(0);
    $like[$row['name']]=$like[$row['name']]+1;
    if($like[$row['name']]==375) $likes375 ++; 

}

}

// print the size
echo count($like)."<br>";
echo "375: ".$likes375; 
```

如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:20:29.900

这显示了计数超过 375 的所有名称：

```
SELECT name
FROM user_likes
GROUP BY name
HAVING COUNT(*) >= 375 
```

但是，如果要处理 20M+ 行，这仍然是非常低效的；将这些压缩数据保存在一个较小的表中可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:45:01.287

使用以下查询

```
SELECT COUNT(*) AS likes375 FROM
(
  SELECT COUNT(*) AS name_count
  FROM user_likes
  GROUP BY name 
) counted
WHERE name_count > 375 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:17:32.053

听起来您在备份它并且您将不得不等待它完成并且您的 php 的最大执行时间比查询完成所需的时间短。建议是在较小的块中做你需要做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T00:43:25.097

难道你不能在 MySQL 方面更有效地做到这一点吗？

```
SELECT count(*) FROM user_likes where name = '375' 
```

这将比您的方法快得多。名称索引将使其更快。

# c# - 是否有与 msbuild 中的 FileMatcher 类等效的开源

> ID：12657587
> 
> 赞同：3
> 
> 时间：2012-09-30T00:08:43.037
> 
> 标签：c#, .net, console-application, command-line-arguments, wildcard-expansion

我正在构建一个命令行工具，它需要基于一个或多个包含单个 (*) 通配符以及任何深度文件夹 (**) 通配符的相对路径来解析一组文件和文件夹。

理想情况下，我想要一个类似于 MsBuild 中的类，因此使用模式如下：

```
FileMatcher matcher = new FileMatcher();
IList<string> files = matcher.Match("c:\data\**\bin\*.dll", "d:\da*\*.xml", "c:\temp\file1.xml") 
```

是否有任何开源实用程序库可以在.Net 中实现此功能？

# python - 描述超时异常

> ID：12657588
> 
> 赞同：1
> 
> 时间：2012-09-30T00:08:56.020
> 
> 标签：python, ssh, cisco

所以我终于让 exscript 正常工作（我认为）。我想测试它，所以我设置了一个我认为应该可以工作的简单 python 脚本：

```
from Exscript.util.interact import read_login
from Exscript.protocols import SSH2

account = read_login()
conn = SSH2()
conn.connect('router.domain.com')
conn.login(account)

conn.execute('terminal length 0')

conn.execute('show version')
print conn.response

conn.send('exit\r')
conn.close() 
```

我运行脚本并看到以下内容：

```
kidd@server scripts$ python test1.py
Please enter your user name [kidd]: 
Please enter your password: 
```

它在那里停留了大约 20 秒，然后我得到了这个：

```
Traceback (most recent call last):
  File "test1.py", line 7, in <module>
    conn.login(account)  
  File "/usr/lib/python2.7/site-packages/Exscript/protocols/Protocol.py", line 597, in login
    self.auto_app_authorize(app_account, flush = flush)
  File "/usr/lib/python2.7/site-packages/Exscript/protocols/Protocol.py", line 846, in auto_app_authorize
    self.get_driver().auto_authorize(self, account, flush, bailout)
  File "/usr/lib/python2.7/site-packages/Exscript/protocols/drivers/one_os.py", line 43, in auto_authorize
    conn.app_authorize(account, flush, bailout)
  File "/usr/lib/python2.7/site-packages/Exscript/protocols/Protocol.py", line 820, in app_authorize
    self._app_authenticate(account, password, flush, bailout)
  File "/usr/lib/python2.7/site-packages/Exscript/protocols/Protocol.py", line 690, in _app_authenticate
    raise TimeoutException(msg)
Exscript.protocols.Exception.TimeoutException: Buffer: '\rThis is a private system \r\n \r\nrouter>' 
```

我错过了一些简单的东西吗？只是尝试登录到路由器（作为普通用户，非特权模式），运行显示版本，然后注销。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:30:26.920

看起来您配置的横幅与 Exscript 期望从设备返回的提示混淆了。我建议要么调整 Exscript 中的协议驱动程序以更好地处理提示，要么确保您的横幅设置正确（或将其全部删除）

# python - 根据用户配置文件元素更改 django haystack 搜索视图

> ID：12657589
> 
> 赞同：2
> 
> 时间：2012-09-30T00:09:00.320
> 
> 标签：python, django, django-haystack

所以，我在这里和其他地方读过，我看到人们加载不同的 html 模板，或者在模板本身中做一些事情来改变显示的内容，但我想要做的是加载不同的视图或基于表单在用户配置文件中的元素上。

我的 urls.py 看起来像这样：

```
urlpatterns = patterns('',
    url(r'^$', MySearchView(
        searchqueryset=sqs,
        form_class=BasicPropertySearchForm
    ), name="haystack_search"),
) 
```

我可以设置线路

```
form_class= 
```

手动到 BasicPropertySearchForm 或 PaidPropertySearchForm ，相应的搜索页面将正确加载并运行，没问题。

但我想做的是让 form_class 自动化，以便它根据用户配置文件加载 BasicPropertySearchForm 或 PaidPropertySearchForm。

我尝试在视图中使用 request.user.get_profile() 完成此操作，如下所示：

```
class MySearchView(SearchView):
#extends the default haystack SearchView
    def which_view(self):
        if self.request.user.get_profile().is_paid:
            return PaidPropertySearchForm
        else:
            return BasicPropertySearchForm 
```

和改变

```
form_class=MySearchView().which_view 
```

但这会导致错误

```
which_view() takes exactly 1 argument (4 given) 
```

我尝试了许多其他变体，包括使用不在views.py中的类中的方法，在urls.py中执行if语句（我意识到这不起作用，因为我想象我必须访问请求。 user.get_profile() 从视图中）...

我也试过这样做：

网址.py：

```
urlpatterns = patterns('',
   url(r'^$', 'property_listings.views.search_views', name="haystack_search"),
) 
```

和views.py：

```
def search_views(request, *args, **kwargs):

    sqs = SearchQuerySet().all

    if request.user.get_profile().is_paid:
        return SearchView(
            searchqueryset=sqs,
            form_class=PaidPropertySearchForm
        )(request, *args, **kwargs)
    else: 
        return SearchView(
            searchqueryset=sqs,
            form_class=BasicPropertySearchForm
        )(request, *args, **kwargs) 
```

但是后来我的表格给了我各种关于未定义内容的错误，例如 self.searchqueryset.all() all does not exist for that or something or another..

任何帮助将不胜感激，在过去的几天里，我一定已经阅读了 50 个不同的博客、文档页面、堆栈溢出帖子等，而且我在这里撞墙了。

# c++ - 在带有 gcc 的 Windows 中使用 OpenCL C++ Wrapper

> ID：12657590
> 
> 赞同：1
> 
> 时间：2012-09-30T00:09:27.977
> 
> 标签：c++, windows, visual-c++, gcc, opencl

好的，所以我尝试学习一些 openCL 并且我正在使用 Windows，但是我不想购买 Visual Studio 许可证并选择了 gcc（最新的 mingw 安装程序）。我也非常喜欢对象，并想使用 c++ 包装器 api。因此，在我使用 CL/cl.h 验证我的设置适用于最小示例后，我更改为 CL/cl.hpp 并尝试编译一个空程序：

```
#define __NO_STD_VECTOR // Use cl::vector instead of STL version
#define __CL_ENABLE_EXCEPTIONS
#include <CL/cl.hpp>

using namespace cl;

int main() {

} 
```

它给了我很多错误：

```
mingw32-g++.exe -Wall -fexceptions  -g    -I"C:\Program Files (x86)\AMD APP\include"  -c C:\Users\Rialgar\CodeBlocksProjects\OpenCL_FirstSteps\main.cpp -o obj\Debug\main.o
In file included from C:\Users\Rialgar\CodeBlocksProjects\OpenCL_FirstSteps\main.cpp:3:0:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:5929:9: Warnung: Bezeichner »static_assert« wird in C++11 zum Schlüsselwort [-Wc++0x-compat]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Funktion »cl_int cl::copy(IteratorType, IteratorType, cl::Buffer&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:5157:9: Fehler: »stdext« wurde nicht deklariert
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:5157:48: Fehler: expected primary-expression before »*« token
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:5157:49: Fehler: expected primary-expression before »>« token
In file included from C:\Users\Rialgar\CodeBlocksProjects\OpenCL_FirstSteps\main.cpp:3:0:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, T26, T27, T28, T29, T30, T31>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:5929:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:5929:216: Anmerkung: (mit »-fpermissive« wird G++ den Code akzeptieren, aber die Verwendung eines nicht deklarierten Namens ist veraltet)
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, T26, T27, T28, T29, T30, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:6297:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, T26, T27, T28, T29, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:6657:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, T26, T27, T28, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:7009:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, T26, T27, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:7353:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, T26, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:7689:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, T25, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:8017:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, T24, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:8337:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, T23, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:8649:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, T22, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:8953:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, T21, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:9249:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, T20, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:9537:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:9817:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:10089:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:10353:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:10609:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:10857:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:11097:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:11329:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:11553:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:11769:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:11977:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:12177:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, T8, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:12369:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, T7, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:12553:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, T6, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:12729:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, T5, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:12897:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, T4, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:13057:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, T3, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:13209:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, T2, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:13353:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, T1, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:13489:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive]
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp: In Konstruktor »cl::detail::functionImplementation_<T0, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType, cl::detail::NullType>::functionImplementation_(const FunctorType&)«:
C:\Program Files (x86)\AMD APP\include/CL/cl.hpp:13617:216: Fehler: es gibt keine Argumente für »static_assert«, die von einem Templateparameter abhängen, weshalb eine Deklaration von »static_assert« verfügbar sein muss [-fpermissive] 
```

（对不起德语错误消息，我还不能更改 gcc 的语言）因为第一个是关于 C++11 的警告，我想我现在可以忽略它并希望在未来版本的 OpenCL 中修复. 第一条错误消息说 stdext 没有定义，所以我用谷歌搜索：结果说 stdext 是 MS 特定的命名空间。

我还没有深入研究其他错误，但他们说“static_assert”没有参数，具体取决于模板参数，因此需要声明“static_assert”。

我的问题：这是否意味着我不能在没有 MSVC 的情况下在 windows 下使用 c++ 包装器，或者是否有解决方法，例如替代 cl.hpp？

提前感谢您的时间和帮助。

# image - How to fade a background-image to transparency?

> ID：12657591
> 
> 赞同：2
> 
> 时间：2012-09-30T00:09:32.057
> 
> 标签：image, html, css, opacity

Here's a related image: ![What I want to achieve is on the right.](../Images/433b4585c7e0a199f5d57f89ec499699.png)

I want to achieve something like what's pictured on the right side of my image. But I also have a parent container that has a background image of its own, instead of a solid color.

Any advice?

**EDIT:** Forgot to add, cross-browser compatibility is important. (Or atleast Firefox).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T14:44:38.330

I can only think of one pure CSS solution and it is simply insane.

Let's say your image has a width of `100px`. You'll have to create a `div` that's `100px` wide and give it `100` children that are each `1px` wide, that each have the same `background` (positioned accordingly) and that each have an `opacity` from `0` (the first child) to `.99` (the last child).

Personally, I think it's crazy and I'd never use this method.

Rory O'Kane came with a nice and clean solution and I also have another idea which involves JavaScript.

Basically, the idea is that you use a `canvas` element ([support](http://caniuse.com/#feat=canvas)), draw your image on it, loop through its pixels and adjust the alpha for each.

# [*demo*](http://codepen.io/thebabydino/full/qmHcv)

*(scroll down to see the result)*

Relevant **HTML**:

```
<div class='parent'>
  <canvas id='c' width='575' height='431'></canvas>
</div> 
```

Relevant **CSS** (setting the background image on the parent)

```
.parent {
  background: url(parent-background.jpg);
} 
```

**JavaScript**:

```
window.onload = function() {
  var c = document.getElementById('c'), 
      ctxt = c.getContext('2d'), 
      img = new Image();

  img.onload = function() {
    ctxt.drawImage(img, 0, 0);
    var imageData = ctxt.getImageData(0, 0, 575, 431);
    for(var i = 0, n = imageData.data.length; i < n; i += 4) {
      imageData.data[i + 3] = 255*((i/4)%575)/575;
    }
    ctxt.putImageData(imageData, 0, 0);
  };
  /* images drawn onto the canvas must be hosted on the same web server 
  with the same domain as the code executing it */
  /* or they can be encoded like in the demo */
  img.src = 'image-drawn-on-canvas.jpg';
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T00:38:44.910

check these out maybe helpful

[DEMO 1](http://jsfiddle.net/afshinprofe/RGL3b/2/)

[DEMO 2](http://jsfiddle.net/afshinprofe/fSJAu/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T06:32:20.770

Ignoring possible CSS-only methods, you can make the image a [PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics) with the transparent gradient built in to the image’s [alpha channel](http://en.wikipedia.org/wiki/Alpha_channel). [All browsers support PNG transparency, except for IE 6 and below](http://caniuse.com/png-alpha). Here’s what your sample image would look like as a PNG with a transparent gradient (try putting this image against other backgrounds):

![PNG image with transparent gradient](../Images/df55a17ae4321c0efc55a098800c0c26.png)

If the images are user-submitted so you can’t add the gradient ahead of time, you could create and store a gradient-added version of each image at the time that the user uploads them.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T18:00:51.200

CSS only method:

[https://gist.github.com/3750808](https://gist.github.com/3750808)

# java - 使用 JSoup 将这个 url: http://www.aw20.co.uk/images/logo.png 的内容保存到文件中

> ID：12657592
> 
> 赞同：2
> 
> 时间：2012-09-30T00:09:33.987
> 
> 标签：java, image, jsoup

我尝试使用 JSoup 获取此 url [http://www.aw20.co.uk/images/logo.png](http://www.aw20.co.uk/images/logo.png)的内容，即图像 logo.png，并将其保存到文件中。到目前为止，我已经使用 JSoup 连接到[http://www.aw20.co.uk](http://www.aw20.co.uk)并获取文档。然后我找到了我正在寻找的图像的绝对网址，但现在不知道如何获得实际图像。所以我希望有人能指出我这样做的正确方向吗？还有无论如何我可以使用 Jsoup.connect("http://www.aw20.co.uk/images/logo.png").get(); 得到图像？

```
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class JGet2 {

public static void main(String[] args) {

    try {
        Document doc = Jsoup.connect("http://www.aw20.co.uk").get();

        Elements img = doc.getElementsByTag("img");

        for (Element element : img) {
            String src = element.absUrl("src");

            System.out.println("Image Found!");
            System.out.println("src attribute is: " + src);
            if (src.contains("logo.png") == true) {
                System.out.println("Success");     
            }
            getImages(src);
        }
    } 

    catch (IOException e) {
        e.printStackTrace();
    }
}

private static void getImages(String src) throws IOException {

    int indexName = src.lastIndexOf("/");

    if (indexName == src.length()) {
        src = src.substring(1, indexName);
    }

    indexName = src.lastIndexOf("/");
    String name = src.substring(indexName, src.length());

    System.out.println(name);
}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T17:58:13.043

如果您不想将其解析为 HTML，则可以使用 Jsoup 获取任何 URL 并将数据作为字节获取。例如：

```
byte[] bytes = Jsoup.connect(imgUrl).ignoreContentType(true).execute().bodyAsBytes(); 
```

`ignoreContentType(true)`设置是因为否则 Jsoup 将抛出内容不可 HTML 解析的异常——在这种情况下没关系，因为我们`bodyAsBytes()`用于获取响应正文，而不是解析。

检查[Jsoup 连接 API](http://jsoup.org/apidocs/org/jsoup/Connection.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T00:24:25.503

Jsoup 不是为下载 url 的内容而设计的。

由于您可以使用第三方库，因此您可以尝试使用[apache common IO](https://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)将给定 URL 的内容下载到文件中：

```
FileUtils.copyURLToFile(URL source, File destination); 
```

它只有一条线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T05:33:21.613

这种方法效果不好。使用时请小心。

```
byte[] bytes = Jsoup.connect(imgUrl).ignoreContentType(true).execute().bodyAsBytes(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-08T11:45:26.597

您可以使用这些方法或这些方法的一部分来解决您的问题。注意：IMAGE_HOME 是绝对路径。例如 /home/你的名字/文件夹名

```
public static String storeImageIntoFS(String imageUrl, String fileName, String relativePath) {
    String imagePath = null;
    try {
        byte[] bytes = Jsoup.connect(imageUrl).ignoreContentType(true).execute().bodyAsBytes();
        ByteBuffer buffer = ByteBuffer.wrap(bytes);
        String rootTargetDirectory = IMAGE_HOME + "/"+relativePath;
        imagePath = rootTargetDirectory + "/"+fileName;
        saveByteBufferImage(buffer, rootTargetDirectory, fileName);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return imagePath;
}

public static void saveByteBufferImage(ByteBuffer imageDataBytes, String rootTargetDirectory, String savedFileName) {
   String uploadInputFile = rootTargetDirectory + "/"+savedFileName;

   File rootTargetDir = new File(rootTargetDirectory);
   if (!rootTargetDir.exists()) {
       boolean created = rootTargetDir.mkdirs();
       if (!created) {
           System.out.println("Error while creating directory for location- "+rootTargetDirectory);
       }
   }
   String[] fileNameParts = savedFileName.split("\\.");
   String format = fileNameParts[fileNameParts.length-1];

   File file = new File(uploadInputFile);
   BufferedImage bufferedImage;

   InputStream in = new ByteArrayInputStream(imageDataBytes.array());
   try {
       bufferedImage = ImageIO.read(in);
       ImageIO.write(bufferedImage, format, file);
   } catch (IOException e) {
       e.printStackTrace();
   } 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T00:15:07.880

> 还有无论如何我可以使用 Jsoup.connect("http://www.aw20.co.uk/images/logo.png").get(); 得到图像？

不，JSoup 只会获取文本等，但不能用于下载文件或二进制数据。话虽如此，只需使用您通过 JSoup 获得的文件名和路径，然后使用标准 Java I/O 下载文件。

我使用 NIO 进行下载。IE，

```
 String imgPath = // ... url path to image
     String imgFilePath = // ... file path String

     URL imgUrl;
     ReadableByteChannel rbc = null;
     FileOutputStream fos = null;
     try {
        imgUrl = new URL(imgPath);
        rbc = Channels.newChannel(imgUrl.openStream());
        fos = new FileOutputStream(imgFilePath);
        // setState(EXTRACTING + imgFilePath);
        fos.getChannel().transferFrom(rbc, 0, 1 << 24);

     } catch (MalformedURLException e) {
        e.printStackTrace();
     } catch (FileNotFoundException e) {
        e.printStackTrace();
     } catch (IOException e) {
        e.printStackTrace();
     } finally {
        if (rbc != null) {
           try {
              rbc.close();
           } catch (IOException e) {
              e.printStackTrace();
           }
        }
        if (fos != null) {
           try {
              fos.close();
           } catch (IOException e) {
              e.printStackTrace();
           }
        }
     } 
```

# grails - 域类中addTo的反函数是什么

> ID：12657593
> 
> 赞同：1
> 
> 时间：2012-09-30T00:09:35.933
> 
> 标签：grails, grails-orm

在 grails 中，我们可以使用 addToPages 函数将页面添加到书籍中。例如，如果 web 的类 Book 有很多页面，我们可以这样写：

```
book.addToPages(page) 
```

但是我们怎样才能从书中删除一页呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T00:19:05.583

`removeFrom`- 见[http://grails.org/doc/latest/ref/Domain%20Classes/removeFrom.html](http://grails.org/doc/latest/ref/Domain%20Classes/removeFrom.html)

# c++ - Gtest：未定义的引用

> ID：12657596
> 
> 赞同：25
> 
> 时间：2012-09-30T00:10:14.073
> 
> 标签：c++, unit-testing, unix, cmake, googletest

我正在尝试使用 GoogleTest 测试一个简单的函数，但是当我`make`在构建文件夹中运行时，编译器会`Undefined Reference`向我抛出错误消息。我已经引用了 gtest 头文件，所以我不确定出了什么问题。有任何想法吗？我对 unix 和 unit testing 的整个主题都是新手，所以我很可能会遗漏一些简单的东西。提前致谢！

错误信息：

```
CMakeFiles/Proj2.dir/main.cpp.o: In function `main':
main.cpp:(.text+0x1e): undefined reference to `testing::InitGoogleTest(int*, char**)'
main.cpp:(.text+0x23): undefined reference to `testing::UnitTest::GetInstance()'
main.cpp:(.text+0x2b): undefined reference to `testing::UnitTest::Run()'
collect2: error: ld returned 1 exit status 
```

主文件

```
#include "gtest/gtest.h"

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
} 
```

测试.cpp

```
#include "gtest/gtest.h"
#include "Testable.h"

TEST(GetTwoTest, Two) {
    EXPECT_EQ(2, GetTwo());
} 
```

可测试的.cpp

```
#include "Testable.h"

int GetTwo() {
    return 3;
} 
```

这是我的 CMakeLists.txt 文件：

```
cmake_minimum_required(VERSION 2.6)

SET(CMAKE_CXX_FLAGS "-std=gnu++11") #Turn on C++11 Support

set(FILES_TO_TEST Testable.cpp)
set(UNIT_TESTS Test.cpp)
set(MAIN_FILE main.cpp)

add_subdirectory(gtest) #Build all the gtest stuff
include_directories(gtest/include)
include_directories(.)
add_library(codeToTest ${FILES_TO_TEST})

add_executable(Proj2 ${MAIN_FILE})
target_link_libraries(Proj2 codeToTest)

add_executable(unit-test ${UNIT_TESTS})
target_link_libraries(unit-test gtest gtest_main rt pthread codeToTest) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T09:38:17.297

您的设置看起来几乎是正确的。但是，您需要有 2 个单独的`main`功能；一个用于真正的可执行文件`Proj2`，另一个用于测试可执行文件的 gtest 包含和功能`unit-test`。

您可以通过拥有 2 个不同的 main.cpp 文件来做到这一点，例如 main.cpp 和 test_main.cpp。您显示的将是 test_main.cpp，并将包含在`add_executable(unit-test ...`命令中。

您的新 main.cpp 将没有对 gtest 的引用，包括或函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T00:54:04.223

从链接器错误很明显，您没有将 gtest 库链接到您的测试程序。

见[底漆](https://github.com/google/googletest/blob/master/googletest/docs/primer.md)：

> 要使用 Google Test 编写测试程序，您需要将 Google Test 编译成一个库并将您的测试与它链接起来。...

有关您的编译器和系统的详细信息，请参阅此文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-25T14:39:09.360

**把`libgtest.a`你的目标文件**

如果您是手动操作而不是使用 CMake，请确保执行以下操作：

```
g++ main.cpp googletest/build/lib/libgtest.a 
```

代替：

```
g++ googletest/build/lib/libgtest.a main.cpp 
```

这是我测试过的完整工作示例：[https ://askubuntu.com/questions/97626/how-to-install-googletest/1295185#1295185](https://askubuntu.com/questions/97626/how-to-install-googletest/1295185#1295185)

这个问题不是 GoogleTest 独有的：我也可以用一个[像这样的最小库示例](https://stackoverflow.com/questions/3961446/why-does-gcc-not-implicitly-supply-the-fpic-flag-when-compiling-static-librarie/65005457#65005457)来重现它，[Eli 解释](https://eli.thegreenplace.net/2013/07/09/library-order-in-static-linking)了我现在没有耐心学习的排序规则。

# cmake - 在 cmake 中链接 clutter-gtk 时出现问题？

> ID：12657597
> 
> 赞同：0
> 
> 时间：2012-09-30T00:10:20.140
> 
> 标签：cmake, clutter

我有这个 CMakeLists.txt 文件，我尝试添加 clutter-gtk 但我不能，它基于所有基本项目 cmake 文件

```
 project(Project)
cmake_minimum_required (VERSION 2.8)

list(APPEND CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake )
list (APPEND CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake/vala)

#
# Base bits
#
set (DATADIR "${CMAKE_INSTALL_PREFIX}/share")
set (PKGDATADIR "${DATADIR}/project")
set (GETTEXT_PACKAGE "project")
set (RELEASE_NAME "Project")
set (VERSION "0.1")
set (VERSION_INFO "Release")

#
# Niceties
#
set (ARCHIVE_NAME project-${VERSION})
add_custom_target (dist
    COMMAND bzr export --root=${ARCHIVE_NAME} ${CMAKE_BINARY_DIR}/${ARCHIVE_NAME}.tar.bz2
    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
    )

add_custom_target (distcheck
    COMMAND cd ${CMAKE_BINARY_DIR}
    && rm -rf ${ARCHIVE_NAME}
    && tar xf ${ARCHIVE_NAME}.tar.bz2
    && mkdir ${ARCHIVE_NAME}/build
    && cd ${ARCHIVE_NAME}/build
    && cmake -DCMAKE_INSTALL_PREFIX=../install -DGSETTINGS_LOCALINSTALL=ON .. -DCMAKE_MODULE_PATH=/usr/share/cmake
    && make -j8
    && make -j8 install
    && make check
    )
add_dependencies(distcheck dist)

add_custom_target (uninstall "${CMAKE_COMMAND}" -P
  "${CMAKE_SOURCE_DIR}/cmake/uninstall.cmake")

#
# config.h
#

configure_file (${CMAKE_SOURCE_DIR}/config.h.cmake ${CMAKE_BINARY_DIR}/config.h)
add_definitions(-include config.h)

#
# Data
#

file (GLOB _imagefiles "${CMAKE_CURRENT_SOURCE_DIR}/data/images/*")
install (FILES ${_imagefiles} DESTINATION ${PKGDATADIR})
install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/data/project.desktop DESTINATION /usr/share/applications)

#
# i18n
#

add_subdirectory(po)

#
# SRC
#

set (PROJECT_DEPS "gobject-2.0;glib-2.0;gio-2.0;gtk+-3.0;granite;gee-1.0;sqlite3;clutter-gtk-1.0;clutter-1.0;")

find_package(PkgConfig)
pkg_check_modules(CLUTTERGTK REQUIRED "clutter-gtk-1.0 >= 1.0.0")
pkg_check_modules(CLUTTER REQUIRED "clutter-1.0 >= 1.0.0")
pkg_check_modules(SQLITE3 REQUIRED "sqlite3")
pkg_check_modules(GLIB REQUIRED "glib-2.0 >= 2.26.0")
pkg_check_modules(GOBJECT REQUIRED "gobject-2.0 >= 2.26.0")
pkg_check_modules(GIO REQUIRED "gio-2.0 >= 2.26.0")
pkg_check_modules(GTK+ REQUIRED "gtk+-3.0 >= 3.0.8")
pkg_check_modules(GEE REQUIRED "gee-1.0 >= 0.5.0") 
pkg_check_modules(LIBGRANITE REQUIRED "granite")
pkg_check_modules(DEPS REQUIRED ${PROJECT_DEPS} gthread-2.0)

add_definitions(${DEPS_CFLAGS})

link_libraries(${DEPS_LIBRARIES})

link_directories(${DEPS_LIBRARY_DIRS})

find_package(Vala REQUIRED)
include(ValaVersion)
ensure_vala_version("0.18.0" MINIMUM)

include(ValaPrecompile)
vala_precompile(VALA_C

etc etc...

PACKAGES
    gtk+-3.0
    sqlite3
    granite
    gio-2.0 
    gee-1.0
    clutter-1.0
    clutter-gtk-1.0
CUSTOM_VAPIS
    vapi/config.vapi
OPTIONS
    --thread
    -g
    )

add_definitions(${CFLAGS}-Wall -Winit-self -Wwrite-strings -Wunreachable-code -Wstrict-prototypes)
add_executable(project ${VALA_C})
target_link_libraries(project ${SQLITE_LIBRARIES})
install(TARGETS project RUNTIME DESTINATION bin)

#
# GSettings Schema
#
include(GSettings)
add_schema("org.pantheon.Project.gschema.xml") 
```

我做错了什么？

我试过：

```
target_link_libraries(project ${SQLITE_LIBRARIES} ${CLUTTERGTK_LIBRARIES}) 
```

但什么都没有:(

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:05:13.627

好的，问题是 CMake 缓存，当您添加一个新库时，您必须在编译之前删除任何构建文件夹...：facepalm：

# vim - Vim：如何制作一个等待键并使用它的宏/命令？

> ID：12657604
> 
> 赞同：3
> 
> 时间：2012-09-30T00:12:05.240
> 
> 标签：vim, macros, command

比如我想暂时映射到fxsj。也就是说，当我按下 q 时，VIM 会执行 fxsqj。当我按下 k 时，VIM 将执行 fxskj。等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T00:15:13.260

您可以使用`getchar()`，例如：

```
nnoremap <F2> :call Fun()<CR>
function! Fun()
    let c = nr2char(getchar())
    if c=='q' || c=='k'
        exec 'normal fxs'.c.'j'
    endif
endfunction 
```

# css - 级联样式表浮动

> ID：12657609
> 
> 赞同：-1
> 
> 时间：2012-09-30T00:13:42.797
> 
> 标签：css, html, css-float

在下面的代码中，我想将内容 div 中的文本（右侧的那个）对齐到靠近边框，离导航菜单不远我知道这是由于我的导航菜单向左浮动，但我做不到！！！！

```
 <div style="position:relative; top:10px; float:left; border: 1px blue dashed; width:150px">
                <ul>
                    <li style="margin-top:2px; padding-bottom:15px; list-style-type:none"><a href="index.html">Home</a></li>
                    <li style="margin-top:2px; padding-bottom:15px; list-style-type:none"><a href="Listings.html">Listings</a></li>
                    <li style="margin-top:2px; padding-bottom:15px; list-style-type:none"><a href="Financing.html">Financing</a></li>
                    <li style="margin-top:2px; padding-bottom:15px; list-style-type:none"><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <div style="position:relative; top:10px; border: 1px red dashed; left:155px; width:800px; min-height:600px">
                test
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:23:24.407

就像 Khanh Tran 提到的那样，您可以删除“left：155px;” 来自您的内容 div，但这会影响您的边界所在的位置。然后你可以做的是将相同的 div 也浮动到左边。

所以，改变这个：

```
<div style="position:relative; top:10px; border: 1px red dashed; left:155px; width:800px; min-height:600px">test</div> 
```

对此：

```
<div style="float:left; position:relative; top:10px; border: 1px red dashed; width:800px; min-height:600px">test</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T00:17:46.600

减少`left:155px`到`left:10px`或您可以完全删除此属性。

**更新：**

你只需要设置`position:absolute`

看看：http: [//jsfiddle.net/2dcPE/7/](http://jsfiddle.net/2dcPE/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:30:46.567

试试这个

```
<div style="float:left; top:10px; border: 1px red dashed; width:800px; min-height:600px">
            test
        </div>​ 
```

# c# - 在方法重载中抛出参数异常

> ID：12657610
> 
> 赞同：0
> 
> 时间：2012-09-30T00:14:23.083
> 
> 标签：c#, exception

我最近才开始研究例外情况和使用它们的最佳实践，我想知道这样做的正确方法是什么：

假设有一个具有多个参数的方法。该方法有多个参数较少的重载，通过提供默认值来调用主实现。

**我是否验证每个重载中的所有参数？**

```
public string Translate(string text)
{
    if (String.IsNullOrEmpty(text))
        throw new ArgumentNullException();

    return Translate(text, "english");
}

public string Translate(string text, string language)
{
    if (String.IsNullOrEmpty(text))
        throw new ArgumentNullException();

    // Do the rest of the work
    // ...
} 
```

**我是否重新抛出异常？**

```
public string Translate(string text)
{
    try
    {
        return Translate(text, "english");
    }
    catch
    {
        throw;
    }
}

public string Translate(string text, string language)
{
    if (String.IsNullOrEmpty(text))
        throw new ArgumentNullException();

    // Do the rest of the work
    // ...
} 
```

**还是我完全放弃异常并在重载中尝试/捕获块？**

```
public string Translate(string text)
{
    return Translate(text, "english");
}

public string Translate(string text, string language)
{
    if (String.IsNullOrEmpty(text))
        throw new ArgumentNullException();

    // Do the rest of the work
    // ...
} 
```

* * *

**另外，这两种方法的文档会是什么样子？**

（使用 C# XML 注释。尤其是我放置`<exception>`元素的地方。）

* * *

我确实意识到这是一个小话题，但是，每次遇到这种情况（实际上经常发生）时，我都会一直想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T00:25:38.237

[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)以某种方式解决了这个问题，那么你只有一个方法：

```
public string Translate(string text, string language="english") 
```

有一些[关于可选参数的怪癖](http://www.grumpydev.com/2010/04/19/optional-parameters-in-c4-c3-and-vb-net-with-a-side-order-of-il-quirks/)很值得了解。

> 默认值被“烘焙”到调用代码中。[...] 这可能导致的问题与公开公共常量相同 - 如果您更改库中的默认值，但不重新编译调用代码，那么调用代码仍将调用您的方法旧的默认值。这绝对是您在使用可选参数设计 API 时需要考虑的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T00:57:19.917

让我们列出您拥有并决定的三个选项的优缺点：

**1\. 我是否验证每个重载中的所有参数？**

优点：你会知道字符串是否为空，然后抛出异常。经典又好。缺点：您在抛出异常后调用第二个函数，知道由于字符串为空或 null 而发生异常。

所以我会放弃这个想法。

**2\. 我是否重新抛出异常？**

优点： 1）这是我个人最喜欢的，好像你一行一行地发生这种情况。第二个函数被调用，异常被抛出并被调用函数的 catch 捕获，其他一些工作也完成了。2）使用 throw 关键字而不是 throw ex 确保您的堆栈跟踪是完整的。3）在调用部分处理异常是最佳实践。

缺点：请帮助我解决缺点。我没有找到。

**3\. 或者我是否完全丢弃异常并在重载中尝试/捕获块？**

优点：调用函数中未使用 Try catch。不完全是专业人士，但是嗯，它减少了一些代码。缺点：不存在适当的处理，最佳实践表明我们应该在调用函数处处理异常。

我认为第二种选择是最好的选择。

还有一个我想分享的链接，这真的很有帮助

[最佳实践：代码项目链接](http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET)

请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:23:17.853

实际上，这是一个传统问题，在加密中被认为最好用所谓的静态工厂方法 - 通常命名`getInstance()`- 你将很多问题重构到一个地方。试图通过所有你得到的响应而变得相当讨厌，但永远不会因为什么都不做而抛出异常，只是大大简化了最终用例，要么将某些内容保存在日志中并快速失败，要么确保你在学生环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T17:03:14.350

我在这里回答迟了，但我想指出，如果你正确地进行重载，这真的不应该是一个问题。重载到的正确方法是将所有功能代码放在接受所有可能参数的方法中：

```
public string Foo(string param1, string param2, string param3)
{
    // do work here, including throwing argument exceptions
} 
```

然后，您的重载应该使用默认值填充缺失的参数：

```
public string Foo(string param1)
{
    return Foo(param1, null, null);
}

public string Foo(string param1, string param2)
{
    return Foo(param1, param2, null);
} 
```

基于此，您只需要处理主要重载中的异常（实际执行任务的异常）。请记住，您的重载本身不应导致引发异常。例如，如果`param3`通过 throwing 强制不为 null `ArgumentNullException`，那么您不应该传递`null`该参数，而应该传递一些可以作为默认值的实际字符串。

无论最终调用哪个重载，都会调用主重载（带有 throws），并且它抛出的任何异常都会冒泡到原始代码。换句话说，您不需要执行以下操作：

```
public string Foo(string param1)
{
    if (param1 == null)
    {
        throw new ArgumentNullException(nameof(param1));
    }

    return Foo(param1, "param2 default", "param3 default");
} 
```

因为主重载已经进行了该检查，并且如果`param1`为 null 则会抛出异常。

# excel - 如何使用 OpenXML SDK 2.0 在 Excel 中添加一行？

> ID：12657611
> 
> 赞同：1
> 
> 时间：2012-09-30T00:14:22.040
> 
> 标签：excel, openxml, openxml-sdk

我是 OpenXML 的新手，并且在添加一行（也包含单元格数据）之后，一直在努力在 A1 中添加一个包含单元格数据的新行。

所以基本上我想在“第 1 行”列“A1”中插入“测试”，在“第 2 行”列“A1”中插入“测试”。

这是我的代码，它看起来不错并创建了文件，但是 Excel 没有打开它。我在 OpenOffice 中打开它，它只显示一行而不是两行。当我注释掉将 row2 附加到工作表数据时，它工作正常。所以我想错误地创建第二行。任何帮助表示赞赏。先感谢您。这是代码：

```
using (SpreadsheetDocument spreadSheetDocument =
                SpreadsheetDocument.Create("generated.xlsx", SpreadsheetDocumentType.Workbook))
            {
     //Add a WorkbookPart to the document.
                WorkbookPart workbookpart = spreadSheetDocument.AddWorkbookPart();
                //create new workbook
                workbookpart.Workbook = new Workbook();

                // Add a WorksheetPart to the WorkbookPart.
                WorksheetPart worksheetPart = workbookpart.AddNewPart<WorksheetPart>();
                //instantiate new worksheet with new sheetdata
                worksheetPart.Worksheet = new Worksheet(new SheetData());

                //Add Sheets to the Workbook.
                Sheets sheets = spreadSheetDocument.WorkbookPart.Workbook.
                    AppendChild<Sheets>(new Sheets());

                DocumentFormat.OpenXml.UInt32Value sheetId = 1;

                //Append a new worksheet and associate it with the workbook.                
                Sheet sheet = new Sheet();

                sheet.Id = spreadSheetDocument.WorkbookPart.GetIdOfPart(worksheetPart);
                sheet.SheetId = sheetId;
                sheet.Name = new StringValue("test_" + 1);

                sheets.Append(sheet);

                //Get the sheetData cell table.
                SheetData sheetData = worksheetPart.Worksheet.GetFirstChild<SheetData>();

                UInt32Value rowindex = 1;
                UInt32Value rowindex2 = 2;

                // Add a row to the cell table.
                Row row = new Row() { RowIndex = rowindex };
                Cell newCell = new Cell();
                newCell.DataType = CellValues.InlineString;
                newCell.CellReference = "A1";
                InlineString inlineString = new InlineString();
                Text t = new Text();
                t.Text = "test";
                inlineString.Append(t);
                newCell.AppendChild(inlineString);
                row.AppendChild(newCell);

                sheetData.AppendChild(row);

                rowindex++;
                // Add a row to the cell table.
                Row row2 = new Row() { RowIndex = rowindex2 };
                Cell newCell2 = new Cell();
                newCell2.DataType = CellValues.InlineString;
                newCell2.CellReference = "A1";
                InlineString inlineString2 = new InlineString();
                Text t2 = new Text();
                t2.Text = "test";
                inlineString2.Append(t2);
                newCell2.AppendChild(inlineString2);
                row2.AppendChild(newCell2);

                sheetData.AppendChild(row2);

                workbookpart.Workbook.Save();

                // Close the document.
                spreadSheetDocument.Close();

                MessageBox.Show("Success");
} 
```

# scala - 以编程方式更改附加

> ID：12657617
> 
> 赞同：0
> 
> 时间：2012-09-30T00:16:31.233
> 
> 标签：scala, logging, log4j, logback

我想获得一个附加程序并将其应用于不同的记录器。我在“logback.xml”中定义了一个附加程序。有没有办法获取此附加程序，更改文件位置并应用于记录器。

```
 <appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>logg.log</file>
   <encoder>
     <pattern>%msg%n</pattern>
   </encoder>
</appender> 
```

这就是我添加新 FileAppender 并应用于特定记录器的方式。我需要一种方法来为现有的 appender 执行此操作。

```
 val fileAppender = new FileAppender()
    fileAppender.setFile("/location/logg.log")
    val roote = LoggerFactory.getLogger("FOO.Class")
    roote.addAppender(fileAppender) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:28:20.023

你能不能这样做（注意 - 未经测试）：

```
val roote = LoggerFactory.getLogger("FOO.Class")
val appender = roote.getAppender("APPENDER_NAME_YOU_WANT_TO_GET")
roote.addAppender(appender) 
```

请参阅：[在 Logback 中使用 getAppender()](https://stackoverflow.com/questions/11471202/using-getappender-in-logback)

# ios - CGContext 的奇怪行为 - iOS

> ID：12657618
> 
> 赞同：3
> 
> 时间：2012-09-30T00:16:36.220
> 
> 标签：ios, uiimage, cgcontext, cgcontextdrawimage

以下代码将图像拆分为 2。它似乎在非视网膜设备上工作正常，但它在视网膜设备上给出不同的输出。有人可以帮我解决它吗？谢谢..

我的代码

```
UIImage *img = [UIImage imageNamed:@"apple.png"];

CGSize sz = [img size];
UIGraphicsBeginImageContextWithOptions(CGSizeMake(sz.width/2, sz.height), NO, 0);
[img drawAtPoint:CGPointMake(-sz.width/2, 0)];
UIImage *right = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
rightView = [[[UIImageView alloc] initWithImage:right] autorelease];
rightView.frame = CGRectMake(self.view.frame.size.width/2, 0, self.view.frame.size.width/2, self.view.frame.size.height);

CGImageRef leftRef = CGImageCreateWithImageInRect([img CGImage],CGRectMake(0,0,sz.width/2,sz.height));
UIGraphicsBeginImageContextWithOptions(CGSizeMake(sz.width/2, sz.height), NO, 0);
CGContextRef con = UIGraphicsGetCurrentContext();
CGContextDrawImage(con, CGRectMake(0,0,sz.width/2.0,sz.height), leftRef);
UIImage *left = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImage *rotatedImage = [left imageRotatedByDegrees:180.0];

leftView = [[[UIImageView alloc] initWithImage:rotatedImage] autorelease];
leftView.frame = CGRectMake(0, 0, self.view.frame.size.width/2, self.view.frame.size.height);
leftView.transform = CGAffineTransformMake(-1,0,0,1,0,0);

CGImageRelease(leftRef);

[self.view addSubview:leftView];
[self.view addSubview:rightView]; 
```

非视网膜

![在此处输入图像描述](../Images/6fa8d308ef920fa603ef74d3470fe784.png)

视网膜

![在此处输入图像描述](../Images/4cb615f53079c2ff29b04ee545469350.png)

PS：我不知道这是否重要，但 apple.png 有一个 @2x 版本..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T02:29:24.647

该`[-UIImage size]`属性返回以磅为单位的大小，而不是以像素为单位。您可能还需要调用`[-UIImage scale]`以了解图像的缩放方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:40:16.323

当您创建左视图时

```
leftView = [[[UIImageView alloc] initWithImage:rotatedImage] autorelease];, 
```

您没有指定正确的比例。而不是以这种方式创建你的 UIImage ：

```
UIImage *left = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImage *rotatedImage = [left imageRotatedByDegrees:180.0]; 
```

尝试创建一个 CGImageRef 然后使用初始化 UIImage

```
[UIImage imageWithCGImage:scale:orientation:] 
```

同时指定正确的比例。有多种方法可以将原始图像数据从上下文转换为 CGImageRef，或者您可以使用您创建的图像并使用 UIImage 的 CGImage 属性。

# c# - 在抽象类的非抽象方法中调用抽象方法

> ID：12657619
> 
> 赞同：2
> 
> 时间：2012-09-30T00:16:49.920
> 
> 标签：c#, class, inheritance, methods, abstract

我在 C# 中有一个抽象类：

```
 public void activation()
  {
       activated = true;
       on_Activation();
  }

  protected abstract void on_Activation(); 
```

设想：

假设我已经创建了抽象类的子类并实现了方法`on_Activation()`.

问题：

*   当我打电话`Activation()`给孩子班时会发生什么？
*   会在子类中`on_Activation()`使用执行吗？`on_Activation`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T00:19:54.460

是的。它是一个虚拟方法（隐含地，因为它是抽象的）所以它的“最被覆盖”的版本将被调用。调用源自基类上定义的方法这一事实没有什么区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T01:59:45.957

是的。而且您刚刚发现了*多态性*。多态性意味着您只需调用`on_Activation`对象上的方法（无论是当前对象调用`this`，还是任何其他对象），您不需要指定`on_Activation`您的意思是哪个版本。运行时对象的实际*类型*`on_Activation`决定了实际调用哪个版本。

正如 Thomas 所指出的，以这种方式运行的方法称为*virtual*。所有抽象方法在 C# 中都是虚拟的。因此，虚拟方法是一个名称、一个符号，它可以在运行时*多态*地引用不同的事物（不同的方法*体*）。

如果你很好奇，想知道其中涉及到什么样的魔法，你可以在[虚拟方法表](http://en.wikipedia.org/wiki/Virtual_method_table)中查看详细信息。本质上，每个虚拟方法名称 like`on_Activation`都被翻译为索引 like `n`，即`n`该类的第 th 个虚拟方法。每个非抽象类都提供一个表，其中指定了它的所有虚拟方法*体*。因此，`on_Activation`对对象的调用被转换为`n`对该对象类的虚拟方法表中的第 th 项的调用。

# python - 计算素数列表中数字位置的最佳方法？

> ID：12657622
> 
> 赞同：2
> 
> 时间：2012-09-30T00:17:34.117
> 
> 标签：python, math

例如

```
f(2)->1
f(3)->2
f(4)->-1 //4 is not a prime
f(5)->3
... 
```

通常，制作一个素数生成器并在它达到 x 之前进行计数

```
def f(x):
    p = primeGenerator()
    count=1
    while True:
        y = next(p)
        if y>x:
            return -1
        elif y==x:
            return count
        else:
            count+=1 
```

是不是太慢了？虽然我可以缓存下一次调用的列表，如果我保证输入必须是素数，所以不必测试输入数字是否是素数，是否有更快的公式来获取回答？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:03:45.563

最好的方法取决于你得到什么输入，以及函数是被调用多次还是只调用一次或几次。

如果它会经常被调用，并且你要接收的所有输入都很小，不大于 10 ⁷比如说，最好的方法是提前创建一个查找表，然后查找输入。

如果它不会经常被调用，并且所有输入都很小，那么只生成不超过输入的素数并计算它们当然就足够了。记住下一次调用时已经有什么可能是一种增强，这样当第一个参数是 19394489，下一个是 20889937 时，您不需要再次从 0 开始，而只需要找到它们之间的素数他们。但是额外的存储是否值得拥有取决于传递的参数。

如果经常调用它并且参数不是太大，例如不超过 10 ^(13)，最好的方法是预先计算 的`π(n)`某些选择值的值`n`，并为每个参数查找下一个较小的预先计算点的值，然后生成并计算该点与目标值之间的素数（或者如果目标更接近下一个更大的预计算点，则计算目标与该点之间的素数）。

如果您计算例如不超过 10 ^(13的所有 10) ⁷`π(n)`的倍数，您会得到一个包含一百万个条目的查找表，这对现在的内存来说并不是很费力，并且永远不需要筛选大于 500 万的范围，这不会需要很长时间。

您还可以将查找表作为磁盘上的文件或数据库，这将允许预计算点之间的间隔更短。这也将消除在启动时读取预先计算的表的时间，但现在查找将涉及对文件系统的访问，这比内存读取花费的时间要长得多。什么是最好的策略取决于预期的输入和运行它的系统。

然而，如果上限不小，计算查找表将花费相当长的时间，但这是一次性成本。

如果预期的输入更大，例如最多 10 ^(16)，并且您不愿意花费必要的时间来预先计算该范围的查找表，那么您最好的选择是为素数计数函数实现更好的算法之一，[由 Lehmer 改进的 Meissel 方法](http://en.wikipedia.org/wiki/Prime-counting_function#Algorithms_for_evaluating_.CF.80.28x.29)相对容易实现（虽然不是那么容易，我将在这里给出一个示例实现，但[这里有一个 Haskell 实现](http://hackage.haskell.org/packages/archive/arithmoi/0.4.0.3/doc/html/Math-NumberTheory-Primes-Counting.html#v%3aprimeCount)可能会有所帮助）。更好，但更复杂的是[米勒等人](http://www.ams.org/mcom/1996-65-213/S0025-5718-96-00674-6/S0025-5718-96-00674-6.pdf)改进的方法。

除此之外，您还需要研究当前最先进的技术，并且可能应该使用比 Python 更低级别的语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T00:20:25.110

您必须检查所有先前的候选人的素数。没有捷径。正如您所说，您可以缓存先前计算的结果并从那里开始，但这确实是您能做的最好的事情。

# google-apps-script - 谷歌应用程序脚本库可以由我帐户中的不同电子表格共享吗？

> ID：12657625
> 
> 赞同：1
> 
> 时间：2012-09-30T00:17:59.610
> 
> 标签：google-apps-script

我的帐户中有几个谷歌电子表格。我想创建一个库，供我帐户中的所有电子表格共享。目前，我创建的库只能由单个电子表格中的工作表共享。我想让我的图书馆保持私密，并且只能通过我帐户中的电子表格访问，因为它仍然不足以与公众共享。我可以知道这是否可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:40:52.267

是的，您可以使用（相对）新的库功能，并将其仅对您的域保密（您使用的是谷歌应用程序，对吗？）

功能非常好，包括功能的自动完成、文档的自动生成、版本控制等......

这里有几个链接

[谷歌博客文章](http://googleappsdeveloper.blogspot.com/2012/05/introducing-versions-and-libraries-in.html)

[文档](https://developers.google.com/apps-script/guide_libraries)

希望这就是你要找的...

# ruby-on-rails - 测试具有多态配置文件的设计用户

> ID：12657626
> 
> 赞同：0
> 
> 时间：2012-09-30T00:18:04.850
> 
> 标签：ruby-on-rails, ruby, testing

我的应用程序有一个`User`模型`belongs_to :profile, :polymorphic => true`。此配置文件可以是`Student`、或`Manager`，并且需要由其管理员批准才能登录系统。我采用了这种[审批方式](https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in)。`Enterprise``Employee`

我在测试部分遇到了一些麻烦。它总是输出：

```
1) Error:
test_should_get_dashboard(ManagersControllerTest):
NoMethodError: undefined method `approved' for nil:NilClass 
```

可能的相关来源：

```
class User < ActiveRecord::Base
   belongs_to :profile, :polymorphic => true
   attr_accessible :approved
end

class ManagersControllerTest < ActionController::TestCase
  include Devise::TestHelpers
  fixtures :managers
  fixtures :users

  def setup
    manager = Manager.create(:name => 'Manager', :cpf => '537.846.919-86')
    @user = User.new(:email => 'user@user.com', :password => 'user@user.com')
    @user.approved = true
    @user.profile = manager
    @user.save!
  end

  test "should get dashboard" do
    sign_in @user
    get :dashboard
    assert_response :redirect
    assert_redirected_to managers_root_path
  end
end

class ManagersController < ApplicationController
  def dashboard
    p = Proc.new { |e| [e.name, e.id] if e.user.approved }
    app_en = Enterprise.all.map(&p).compact.count
    napp_en = Enterprise.count - app_en

    app_em = Employee.all.map(&p).compact.count
    napp_em = Employee.count - app_em

    @app = [ app_en, app_em, 0 ]
    @napp = [ napp_en, napp_em, 0 ]
    @total = [ app_en + napp_en, app_em + napp_em, Student.count ]

    tags_count = Activity.tag_counts.map(&:count)
    @tags = Hash[Activity.tag_counts.map(&:name).zip(tags_count)]

    @user = current_user
   end
end 
```

由于我在编写固定装置时遇到问题，因此我忽略了它们，但如果有人展示固定装置的解决方案，我将非常感激。即使这样，我也陷入了这个错误。我该怎么办？

* * *

堆栈

```
/home/waldyr/Dropbox/Workspace/Rails/bancodevagas/app/controllers/managers_controller.rb:7:in `block in dashboard'
/home/waldyr/Dropbox/Workspace/Rails/bancodevagas/app/controllers/managers_controller.rb:8:in `map'
/home/waldyr/Dropbox/Workspace/Rails/bancodevagas/app/controllers/managers_controller.rb:8:in `dashboard'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/abstract_controller/base.rb:167:in `process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/metal/rendering.rb:10:in `process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:425:in `_run__2212830968385571096__process_action__4077155092621945467__callbacks'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/abstract_controller/callbacks.rb:17:in `process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/metal/rescue.rb:29:in `process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/notifications.rb:123:in `block in instrument'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.6/lib/active_support/notifications.rb:123:in `instrument'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/metal/params_wrapper.rb:206:in `process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.6/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/abstract_controller/base.rb:121:in `process'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/abstract_controller/rendering.rb:45:in `process'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/test_case.rb:469:in `process'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/test_case.rb:49:in `process'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/devise-2.1.2/lib/devise/test_helpers.rb:19:in `block in process'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/devise-2.1.2/lib/devise/test_helpers.rb:71:in `catch'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/devise-2.1.2/lib/devise/test_helpers.rb:71:in `_catch_warden'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/devise-2.1.2/lib/devise/test_helpers.rb:19:in `process'
/home/waldyr/.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.2.6/lib/action_controller/test_case.rb:386:in `get'
/home/waldyr/Dropbox/Workspace/Rails/bancodevagas/test/functional/manager_controller_test.rb:24:in `block in <class:ManagersControllerTest>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:03:24.100

答案似乎是并非所有 Enterprise 或 Employee 模型实际上都有关联的用户。当使用 map to`e.user.approved`时，控制器会尝试传递`.approved`给`user`which can be`nil`在这种情况下。

一个简单的解决方案是将您的 Proc 更改为 nil 安全：

```
p = Proc.new { |e| [e.name, e.id] if e.user && e.user.approved } 
```

# css - 当 div 单独和嵌套时更改 div 悬停时的链接颜色

> ID：12657627
> 
> 赞同：1
> 
> 时间：2012-09-30T00:18:08.060
> 
> 标签：css, hyperlink, nested-sets, onhover

我的页面左侧有 12 个链接，它们锚定到页面右侧的 12 个 div。每当我向下滚动时，我希望链接的颜色在 div 悬停时改变。

问题：1.) 12 个链接位于嵌套 div 中 2.) 右侧的 div 位于链接之后的单独嵌套 div 中。

我尝试使用此代码： http: [//jsfiddle.net/gU4sw/7/](http://jsfiddle.net/gU4sw/7/)但随后切换回来，因为它不适用于嵌套的 div。

有没有办法解决这个问题？这是我到目前为止所拥有的。我还没有插入所有的 div，因为我正在等待先解决这个问题。

HTML：

```
<body>
<body style="margin:0px;">
<div id="wrapper">
    <div id="navbar">
        <div id="navbartext">
            <div class="center">
                <div id="morning"><a href="index.html">MORNING</a></div><br/>
                <div id="one"><a href="#7:30">7:30</a></div><br/>
                <div id="two"><a href="#8:00">8:00</a></div><br/>
                <div id="three"><a href="#10:00">10:00</a></div><br/>
                <div id="noon"><a href="#NOON">NOON</a></div><br/>
                <div id="five"><a href="#2:00">2:00</a></div><br/>
                <div id="six"><a href="#5:00">5:00</a></div><br/>
                <div id="seven"><a href="#5:15">5:15</a></div><br/>
                <div id="night"><a href="#NIGHT">NIGHT</a></div><br/>
                <div id="nine"><a href="#9:00">9:00</a></div><br/>
                <div id="ten"><a href="#12:00">12:00</a></div><br/>
                <div id="eleven"><a href="#3:00">3:00</a></div><br/>
          </div>
        </div>
     </div>
</div>

<div id="content">
     <div id="subcontent">
        <br/><br/><br/><br/><br/><br/><img src="images/myday.png" width="613" height="287" /> <br/><br/><br/><br/>
        <h5>&#8595;SCROLL DOWN&#8595;</h5><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

                <a name="7:30"><div class="img"><img src="images/cal.gif" width="640" height="" /></div></a>
                <a name="9:00"><div class="img"><img src="img.jpeg" width="640" height="" /></div></a>
     </div>
</div>

</body>

</body>
</html> 
```

CSS: $0@charset "UTF-8"; /* CSS 文档 */

```
#wrapper {margin: 0px;}

/*Navigation Bar*/
#navbar {background:#FF9999; 
    padding:15px; 
    position:fixed; 
    left: 90px;
    width:115px; 
    height:100%;}
#navbartext { top: 50%;
    width: 115px;
    height: 100%;}

a:link {color: #FFF;
    font-family: 'Quicksand', sans-serif;
    font-size: 24px;
    text-align: center;
    font-weight: 300;
    text-decoration: none;}
a:visited {color: #FFf;}
a:active {color: #FFf58A;}
a:hover {color: #FFF58A;}
img:hover + a  {color: #FFF58A;}

.center {display: inline-block;
    vertical-align: middle;
    background: #FF9999;
    width: 115px;
    color: #FFF;
    height: 100%;
    text-align: center;
    margin: 0px;}

#morning {width:115px;
    position: absolute;
    top: 3%}    
#one {width:115px; 
    top: 11%; 
    position: absolute;}
#two {width:115px; 
    top: 19.4%; 
    position: absolute;}
#three {width:115px; 
    top: 27%;
    position: absolute;}
#noon {width:115px;
    top: 35%;
    position: absolute;}
#five {width:115px;
    top: 43%;
    position: absolute;}
#six {width:115px;
    top: 51%;
    position: absolute;}
#seven {width:115px;
    top: 59%;
    position: absolute;}
#night {width:115px;
    top: 67%;
    position: absolute;}
#nine {width:115px;
    top: 75%;
    position: absolute;}
#ten {width:115px;
    top: 83%;
    position: absolute;}
#eleven {width:115px;
    top: 91%;
    position:absolute;}

/*Content*/
#content {height: 10000px; 
    padding-top: 45px;
    margin-left: 200px;
    text-align: center;
    font-family: 'Quicksand', sans-serif;
    font-size: 24px;
    color: #cda8cb;}    
#subcontent {width: 950px;
    margin: 0 auto;}
.img {top: 50%;
        left: 50%;
    display: table-cell;
    margin: auto;
    vertical-align: middle;
    width: 950px;
    padding-top: 175px;
    padding-bottom: 200px;
    img: hover + a color: #FFF58A;}

/*text*/
<h4> {color: #FFF;
    font-family: 'Quicksand', sans-serif;
    font-size: 24px;
    text-align: center;
    font-weight: 300;
    line-height: 260%;
    vertical-align: middle;}
<h5> {font-color: #cda8cb;
    font-size: 24px;
    text-align: center;
    font-weight: 100;
    line-height: 260%;
    vertical-align: middle;}    

/* 
#content {height:10000px; 
    padding-top:45px;
    margin-left: 350px;}

#subcontent {width: 950px;
    height: 950px;
    margin: 0 auto;
    }
#navbartext {}
#navbartext {}
#myday {padding-top: 110px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:51:19.020

当你使用`divs`而不是列表时，你真的把事情复杂化了。

不过，如果你想要那样的话，这里有一个解决方案。在您的页面中添加一些`jQuery`代码来处理所有这些悬停事件。jQuery 有一个函数`hover()`可以在鼠标悬停时调用你的方法。

您可以在此处了解有关该功能的更多信息：http: [//api.jquery.com/hover/](http://api.jquery.com/hover/)

完成上述操作后，添加以下内容：

```
$(document).ready(function(e) {
    $("#IDofThediv").hover(
        function() {        //This will be executed when the mouse enters the div
            $("#IDofTheAnchor").css("color", "#000");
        },
        function() {        //This will be executed when the mouse exits the div
            $("#IDofTheAnchor").css("color", "#FFF");
        }
    );
}); 
```

现在，因为您的代码在导航栏的 div 中使用了锚点，并且因为您在 css 文件中专门更改了锚点的 css，所以您需要处理锚点而不是 div。

让我知道事情的后续。:)

**编辑：**请从您的节点 ID 和名称中删除`:`'s，它们不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:58:54.363

好吧，我咬一口。。

首先，您的 css 有一个未封闭的评论 - 这会使其中一些效果无效。接下来你的 h4 和 h5 规则是错误的（去掉尖括号）

最后，一点 javascript 将有助于完成这项工作。用铬测试。享受！

```
<html>
<head>
<style>
#wrapper {margin: 0px;}

/*Navigation Bar*/
#navbar {background:#FF9999; 
    padding:15px; 
    position:fixed; 
    left: 90px;
    width:115px; 
    height:100%;}
#navbartext { top: 50%;
    width: 115px;
    height: 100%;}

a:link {color: #FFF;
    font-family: 'Quicksand', sans-serif;
    font-size: 24px;
    text-align: center;
    font-weight: 300;
    text-decoration: none;}
a:visited {color: #FFf;}
a:active {color: #FFf58A;}

.center {display: inline-block;
    vertical-align: middle;
    background: #FF9999;
    width: 115px;
    color: #FFF;
    height: 100%;
    text-align: center;
    margin: 0px;}

#morning {width:115px;
    position: absolute;
    top: 3%}    
#one {width:115px; 
    top: 11%; 
    position: absolute;}
#two {width:115px; 
    top: 19.4%; 
    position: absolute;}
#three {width:115px; 
    top: 27%;
    position: absolute;}
#noon {width:115px;
    top: 35%;
    position: absolute;}
#five {width:115px;
    top: 43%;
    position: absolute;}
#six {width:115px;
    top: 51%;
    position: absolute;}
#seven {width:115px;
    top: 59%;
    position: absolute;}
#night {width:115px;
    top: 67%;
    position: absolute;}
#nine {width:115px;
    top: 75%;
    position: absolute;}
#ten {width:115px;
    top: 83%;
    position: absolute;}
#eleven {width:115px;
    top: 91%;
    position:absolute;}

/*Content*/
#content {height: 10000px; 
    padding-top: 45px;
    margin-left: 200px;
    text-align: center;
    font-family: 'Quicksand', sans-serif;
    font-size: 24px;
    color: #cda8cb;}    
#subcontent {width: 950px;
    margin: 0 auto;}
.img {top: 50%;
        left: 50%;
    display: table-cell;
    margin: auto;
    vertical-align: middle;
    width: 950px;
    padding-top: 175px;
    padding-bottom: 200px;
    img: hover + a color: #FFF58A;}

/*text*/
h4 {color: #FFF;
    font-family: 'Quicksand', sans-serif;
    font-size: 24px;
    text-align: center;
    font-weight: 300;
    line-height: 260%;
    vertical-align: middle;}
h5 {font-color: #cda8cb;
    font-size: 24px;
    text-align: center;
    font-weight: 100;
    line-height: 260%;
    vertical-align: middle;}    

#content {height:10000px; 
    padding-top:45px;
    margin-left: 350px;}

#subcontent {width: 950px;
    height: 950px;
    margin: 0 auto;
    }

#myday {padding-top: 110px;}

a:hover, .remoteControlled a
{
    color: #FFF58A;
}

</style>
<script>
function myMouseOver(element)
{
    var srchStr = element.getAttribute('name');
    var aList = document.getElementById('navbartext').getElementsByTagName('a');
    var i, n = aList.length;
    for (i=0; i<n; i++)
    {
        curStr = aList[i].innerHTML
        //curStr = curStr.substr(1);
        if (curStr == srchStr)
            aList[i].parentNode.className = 'remoteControlled';
    }
}

function myMouseOut(element)
{
    var navList = document.getElementById('navbartext').getElementsByTagName('a');
    var i, n = navList.length;
    for (i=0; i<n; i++)
    {
        navList[i].parentNode.className = '';
    }
}
</script>
</head>
<body>
<body style="margin:0px;">
<div id="wrapper">
    <div id="navbar">
        <div id="navbartext">
            <div class="center">
                <div id="morning"><a href="index.html">MORNING</a></div><br/>
                <div id="one"><a href="#7:30">7:30</a></div><br/>
                <div id="two"><a href="#8:00">8:00</a></div><br/>
                <div id="three"><a href="#10:00">10:00</a></div><br/>
                <div id="noon"><a href="#NOON">NOON</a></div><br/>
                <div id="five"><a href="#2:00">2:00</a></div><br/>
                <div id="six"><a href="#5:00">5:00</a></div><br/>
                <div id="seven"><a href="#5:15">5:15</a></div><br/>
                <div id="night"><a href="#NIGHT">NIGHT</a></div><br/>
                <div id="nine"><a href="#9:00">9:00</a></div><br/>
                <div id="ten"><a href="#12:00">12:00</a></div><br/>
                <div id="eleven"><a href="#3:00">3:00</a></div><br/>
          </div>
        </div>
     </div>
</div>

<div id="content">
     <div id="subcontent">
        <br/><br/><br/><br/><br/><br/><img src="images/myday.png" width="613" height="287" /> <br/><br/><br/><br/>
        <h5>&#8595;SCROLL DOWN&#8595;</h5><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

                <a name="7:30" onmouseout='myMouseOut();' onmouseover='myMouseOver(this);'><div class="img"><img src="images/cal.gif" width="640" height="" /></div></a>
                <a name="9:00" onmouseout='myMouseOut();' onmouseover='myMouseOver(this);'><div class="img"><img src="img.jpeg" width="640" height="" /></div></a>
     </div>
</div>

</body>

</body>
</html> 
```

# objective-c - Xcode iOS：从应用程序拨打号码

> ID：12657628
> 
> 赞同：0
> 
> 时间：2012-09-30T00:18:32.837
> 
> 标签：objective-c, ios, xcode

我跨越了以下代码：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://8005551212"]]; 
```

on :[在 iPhone 上拨打电话](https://stackoverflow.com/questions/3368810/making-phone-calls-on-the-iphone/3368818#3368818)

但是，它在模拟器中对我不起作用。我已将 IBAction(callphone) 连接到 ViewController(TouchUpInside)。我现在不确定，是不是因为我在模拟器中检查我的代码？我没有得到一个对话框。请指教。

我尝试放置日志语句，并且该操作确实被调用，因为正在打印我写来测试的日志语句

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T00:23:16.580

你能用你的Mac打电话吗？`tel://`不，这就是当您尝试打开URL时模拟器无法工作的原因。您必须通过可以拨打电话的设备执行此操作：iPhone，但不能使用 iPad 或 iPod touch。

# ios - 带有 BlockKit Xcode 构建错误的 GestureRecognizer 块

> ID：12657630
> 
> 赞同：-1
> 
> 时间：2012-09-30T00:19:01.277
> 
> 标签：ios, xcode, objective-c-blocks, block, build-error

我遇到了 GestureRecognizer 和 BlocksKit 的问题，这给了我一个构建错误。

基本上我想在一个手势上运行一个块。我已经从这里的文档中复制了代码......

[http://zwaldowski.github.com/BlocksKit/Documentation/Categories/UIGestureRecognizer(BlocksKit).html](http://zwaldowski.github.com/BlocksKit/Documentation/Categories/UIGestureRecognizer(BlocksKit).html)

...到目前为止，我没有成功，因为我每次都收到相同的构建错误。我四处搜寻，找不到与我遇到相同问题的任何东西，所以我希望这里的人可以提供帮助。

我使用的代码是...

```
UITapGestureRecognizer *singleTap = [UITapGestureRecognizer recognizerWithHandler:^(id sender) {
            NSLog(@"Single tap.");
        } delay:0.18]; 
```

我收到的错误是...

```
/Users/JohnSlater/Desktop/iOS Apps/Flink/flink/ViewController.m:202:91: Incompatible block pointer types sending 'void (^)(id)' to parameter of type 'BKGestureRecognizerBlock' (aka 'void (^)(UIGestureRecognizer *, UIGestureRecognizerState, CGPoint)') 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:26:49.687

看一下错误信息中块的参数。您的代码有一个参数，发件人。但是该块需要一个 UIGestureRecognizer、一个 UIGestureRecognizerState 和一个 CGPoint。所以，它应该看起来像

```
[UITapGesture recognizerWithHandler:^(UIGestureRecognizer *recognizer, UIGestureRecognizerState UIGestureRecognizerStateEnded, CGPoint point){
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:53:40.543

`UITapGestureRecognizer *singleTap = [UITapGestureRecognizer recognizerWithHandler:^(UIGestureRecognizer *sender, UIGestureRecognizerState state, CGPoint point ) { NSLog(@"Single tap."); } delay:0.18];`

将工作。
不知道为什么，但[这里](https://github.com/zwaldowski/BlocksKit/blob/master/BlocksKit/UIKit/UIGestureRecognizer+BlocksKit.h)的例子似乎是错误的。BKGestureRecognizerBlock[在这里](https://github.com/zwaldowski/BlocksKit/blob/master/BlocksKit/BKGlobals.h)声明了 3 个参数。所以你的链接器是正确的抱怨。

# c# - 在泛型方法内的运行时检测委托参数

> ID：12657633
> 
> 赞同：0
> 
> 时间：2012-09-30T00:19:24.867
> 
> 标签：c#, .net, generics, delegates

**[简化问题]**

给定以下通用方法：

```
public T MyFunction<T>()
{
// ...
} 
```

并假设它以下列方式调用：

```
MyFunction<Action<int, string>>(); 
```

如何从 MyFunction 的代码中检测 T 具有哪些参数（因为它是委托）？

**[你想做什么？！？！？！？]**

我有一个实际签名为 void 的方法，`MyFunction<T>(Expression<Func<T>> delegateReturner);`它需要知道 T 具有的参数而不实际调用该方法，因此它可以从中生成一个 LINQ 表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:59:51.110

只要委托具有像 Action 这样的 void 返回类型，您就可以使用以下代码。

```
public static bool IsActionDelegate(Type sourceType)
{
    if(sourceType.IsSubclassOf(typeof(MulticastDelegate)) && 
       sourceType.GetMethod("Invoke").ReturnType == typeof(void))
        return true;
    return false;
} 
```

# wpf - WPF 字符串格式“字符串未被识别为有效的日期时间。”

> ID：12657636
> 
> 赞同：0
> 
> 时间：2012-09-30T00:20:18.143
> 
> 标签：wpf, string, datetime, locale

尝试让 WPF 应用程序尝试将字符串字段格式化为日期时间对象时出现此错误：

```
<DataGridTextColumn Binding="{Binding Date, StringFormat={}{0:dd-MM-yyyy}}" Header="Date"/> 
```

我似乎得到的错误是：

“字符串未被识别为有效的日期时间。”

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T00:20:18.143

根据我的经验，此错误是由于 Window 标头中缺少设置的语言环境引起的，即：

```
xml:lang="en-GB" 
```

或者任何合适的东西都需要插入到 Window 标题中，这应该可以解决问题。

# php - 获取 .live 或 .delegate 或 livequery 插件以保持购物车存活

> ID：12657639
> 
> 赞同：0
> 
> 时间：2012-09-30T00:21:30.460
> 
> 标签：php, jquery

我有这个加载 ajax 的#container，我正试图让它与我的一些插件一起玩得很好。到目前为止，我设法使用 jquery.live 让 scrollTo 和一个灯箱在这个“死亡容器”内工作，但我喜欢的“添加到购物车”按钮没有运气。几天来，我一直在玩 .delegate、livequery 插件等，但我真的不够先进，无法弄清楚什么地方去哪里了。（我对自己在做什么的理解很肤浅。）

这是我的购物车插件，它相当小而且简单。您能否就应该在哪里插入什么（.live、.delegate 或 .livequery，或者可能完全是其他东西）提出建议？

（注意：shopme p = 添加到购物车按钮，需要将其插入到加载 ajax 的“死亡容器”中。购物车的其余部分存在于所述容器之外并且工作正常，因为它没有被 ajax 插入。）

```
$(document).ready(function(){

$('.wooo').bloooming_shop();

$('body').append('<div id="panel"><div id="panelcontent"></div><div class="panelbutton" id="hidepanel" style="display: none;"><a><font class="cartfont2">hide cart</font></a></div></div><div id="showpanel" class="panelbutton" style="display: visible;"><a><font class="cartfont">shopping cart</font></a></div><div id="btntarget"></div>');
$('#panelcontent').hide();

$.ajax({
    type: "GET",
    url: "/wooo/cart.php",
    async: false,
    dataType: "html",
    success: function(html){
        $('#panelcontent').html(html);
    }
});

$(".panelbutton").click(function(){
    $("#panel").animate({
        height: "200px"
    }, "fast",function(){
        $('#panelcontent').show();
    });
    $("#hidepanel").fadeIn();
    $("#showpanel").fadeOut();

}); 

  $("#hidepanel").click(function(){
    $("#panel").animate({
        height: "0px"
    }, "fast", function(){ 
        $("#showpanel").fadeIn();
        $('#panelcontent').hide();
    });

    $("#hidepanel").fadeOut();
   });  

   // START 'ADD TO CART' BUTTONS

$('.shopme p').click(function(){

    var pid = $(this).attr('rel');

    $('body').prepend('<div class="shadow" id="'+$(this).attr('rel')+'_shadow"></div>');

    var shadow = $('#'+pid+'_shadow');

        shadow.width($(this).parent().css('width')).height($(this).parent().css('height')).css('top', $(this).parent().offset().top).css('left', $(this).parent().offset().left).css('opacity', 0.5).show();
     shadow.css('position', 'absolute');

     shadow.animate( {
            width: $('#btntarget').innerWidth(), 
            height: $('#btntarget').innerHeight(), 
            top: $('#btntarget').offset().top, 
            left: $('#btntarget').offset().left 
            }, { 
            duration: 2000 
            } )
        .animate({ 
            opacity: 0 
        },
        { 
        duration: 700,
        complete: function(){

        shadow.remove();

    }

    });

    var option = $('#'+pid+' .woooptions').val();

    var formData = 'pid=' + pid + '&option=' + option; 

    $.ajax({
        type : 'POST',
        url : '/wooo/cart.php',
        data : formData,
        success : function (html) {
            $('#panelcontent').html(html);
        }
    });

}); 

$('.removeitem').live('click', function() { // .LIVE is used here   
    rid = $(this).attr('id');
    rop = $(this).attr('rel');

    var remData = 'remove=' + rid + '&rop=' + rop; 

    $.ajax({
        type : 'POST',
        url : '/wooo/cart.php',
        data : remData,
        success : function (html) {
            $('#panelcontent').html(html);
        //  alert('thx');
        }
    });

});

}); // document

function checkOut(){
        jQuery.ajax({
          url: "/wooo/cart.php",
          type: "POST",
        data : "destroysession=true",
          success: function(data, textStatus, jqXHR){
            if(data){
                window.location.href=jQuery('a.checkout').attr("data-href");
            }else{
                console.log("There is no data!")
            }
          },
          error: function(jqXHR, textStatus, errorThrown){
            console.log("AJAX ERROR: "+errorThrown)
          }
        });
}

/** replace ******/

jQuery.fn.bloooming_shop = function(){

    this.each(function(){

        var elem = $(this);

        var cl = 'bt1';
        var id = $(this).html();
        var opt = $(this).attr('options');
        var text = $(this).attr('text');
        var price = $(this).attr('price');
    //  alert(price);

        if (text == undefined) {
            text = 'add to cart';
        }

        if (opt == 'true' && price != 'true' ) {
            cl = 'bt3';
        }

        if (price == 'true' && opt == 'true') {
            cl = 'bt4';
        }

        if (price == 'true' && opt != 'true') {
            cl = 'bt2';
        }

        elem.removeClass('wooo');
        elem.addClass('shopme');
        elem.addClass(cl);
        elem.attr('id','pid'+id);
        elem.html('<p rel="pid'+id+'" class="'+cl+'">'+ text +'</p>');

        // get product data
        if (price == 'true' || opt == 'true') {

            $.ajax({
                type : 'GET',
                url : '/wooo/functions.php?mode=p_data&id='+id+'&opt='+opt+'&price='+price,
                success : function (html) {

                    elem.append(html);

                    if (jQuery().sSelect) {
                            elem.children('.woooptions').sSelect();
                     } 

                    // change price
                    $('.woooptions').change(function(){
                        var selid = $(this).attr('id');
                        var rel = $('#'+selid+' option:selected').attr('rel');

                        if (rel != undefined) {
                              $(this).parent().children('.woooprice').html(rel);
                        }
                    });

                }
            });
        }

    });

return false;

}; 
```

我如何让这个插件保持活力，即使在 ajax'ed-in #container 中？我真的只需要将“添加到购物车”按钮（shopme p）放在所述容器 div 中。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-30T00:23:35.920

```
.live("click", function(){ 
```

而不是仅仅点击。

# c++ - 需要一种方法为 boost::spirit::qi 解析器加上另一个前缀

> ID：12657647
> 
> 赞同：3
> 
> 时间：2012-09-30T00:24:05.683
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我有很多这样的规则：

```
cmd_BC = (dlm > timestamp > dlm > cid > dlm > double_)
         [
             _val = lazy_shared<dc::BoardControl>(_1, _2, _3)
         ]; 
```

我想让它更具可读性，例如：

```
cmd_BC = param(timestamp) > param(cid) > param(double_) 
```

甚至

```
cmd_BC = params(timestamp, cid, double_) 
```

正如[sehe](https://stackoverflow.com/users/85371/sehe)指出的那样，归结为有一些方法可以自动期望分隔符。这里有哪些选择？我自己，我看到了三种可能性，都有缺陷：

1.  *使用宏。*这不允许使用较短的可变参数形式。
2.  *编写自定义前缀指令。*我对Spirit的发条似乎没有足够的经验，但如果它真的不那么难，我会尝试。
3.  *编写一个包装函数。*我试图不走运以下代码：

    ```
    template <typename T>
    auto param(const T & parser) -> decltype(qi::lit(dlm) > parser)
    {
        return qi::lit(dlm) > parser;
    } 
    ```

    但它没有编译，失败了

    ```
     // report invalid argument not found (N is out of bounds)
        BOOST_SPIRIT_ASSERT_MSG(
            (N < sequence_size::value),
            index_is_out_of_bounds, ()); 
    ```

    我也尝试过`return (...).alias()`，但它也没有编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:49:51.610

这个解决方案不是很“精神”，不幸的是“需要 C++11”（我不确定如何在 c++03 中获得所需的结果类型），但它似乎有效。受[此处](http://www.boost.org/libs/spirit/doc/html/spirit/qi/reference/auto.html)示例的启发。

PS：哦，我没有看到你的编辑。你有几乎相同的例子。

更新：使用 _1、_2 和 _3 的语义操作添加了另一个测试
Update2：根据 vines 在评论中的建议更改了 operator() 和 operator[] 的签名。

更新 3：添加了构造组合解析器的可变参数 operator()，并在使用 boost::proto 找到更好的解决方案后删除了 operator[]。稍微改变了例子。

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/proto/proto.hpp>

namespace qi = boost::spirit::qi;
namespace proto = boost::proto;
namespace phx = boost::phoenix;
using namespace boost::proto;

//This is a proto grammar/transform that creates the prefixed parser. The parser created depends on the parser passed (if it's a kleene or not)
// in _make_xxx  "_" corresponds to the supplied parser and "_state" to the delimiter
struct CreatePrefixedParser: //you can use _make_greater instead of _make_shift_right if you want to use "expectation"
or_ <
    when < dereference<_>, //If it's a kleene parser...
        _make_shift_right ( //create the parser -> dlm >> *(parser -dlm)
            _state,
            _make_dereference (
                _make_minus ( _child_c<0> ( _ ),
                    _state ) ) ) > ,
    when < unary_plus<_>, //If it's a +parser
        _make_shift_right ( //create the parser -> dlm >> +(parser -dlm)
            _state,
            _make_unary_plus (
                _make_minus ( _child_c<0> ( _ ),
                    _state ) ) ) > ,
    otherwise < //if it's any other parser
        _make_shift_right ( //create the parser -> dlm >> (parser -dlm)
            _state,
            _make_minus ( _,
                _state ) ) >
> {};

//-------------------------------------------------------------
//this combines the parsers this way: parser1, parser2, parser3, parser4 -> parser1>>(parser2 >>(parser3 >> parser4)))
//you can use make_expr<tag::greater> if you want to use "expectation"
//I have absolutely no idea when "deep_copy" is required but it seems to work this way
template<typename Delim, typename First, typename ... Rest>
struct myparser
{
    static auto combine ( Delim dlm_, const First& first, const Rest&...rest ) ->
    decltype ( make_expr<tag::shift_right> ( CreatePrefixedParser() ( deep_copy ( first ), dlm_ ), myparser<Delim, Rest...>::combine ( dlm_, rest... ) ) )
    {
        return make_expr<tag::shift_right> ( CreatePrefixedParser() ( deep_copy ( first ), dlm_ ), myparser<Delim, Rest...>::combine ( dlm_, rest... ) );
    }

};

template<typename Delim, typename Last>
struct myparser<Delim, Last>
{

    static auto combine ( Delim dlm_, const Last& last ) -> decltype ( CreatePrefixedParser() ( deep_copy ( last ), dlm_ ) )
    {
        return CreatePrefixedParser() ( deep_copy ( last ), dlm_ );
    }
};
//-----------------------------------------------------------------

template <typename T>
struct prefixer
{
    T dlm_;
    prefixer ( T dlm ) : dlm_ ( dlm ) {}

    template <typename ... Args>
    auto operator() ( const Args&... args ) ->
    decltype ( deep_copy ( myparser<T, Args...>::combine ( dlm_, args... ) ) )
    {
        return deep_copy ( myparser<T, Args...>::combine ( dlm_, args... ) );
    }
};
template <typename T>
prefixer<T> make_prefixer ( T dlm )
{
    return prefixer<T> ( dlm );
}

int main()
{
    std::string test = "lameducklamedog";

    std::string::const_iterator f ( test.begin() ), l ( test.end() );

    auto param = make_prefixer ( qi::lit ( "lame" ) );
    qi::rule<std::string::const_iterator> dog = qi::lit ( "do" ) > qi::char_ ( 'g' );
    //qi::rule<std::string::const_iterator> duck = qi::lit ( "duck" ) | qi::int_;
    qi::rule<std::string::const_iterator,std::string()> quackdog = (param (*qi::alpha)  >> param( dog ));

     std::string what;
     if ( qi::parse ( f, l, quackdog, what ) && f == l )
         std::cout << "the duck and the dog are lame, specially the " << what  << std::endl;
     else
         std::cerr << "Uhoh\n" << std::string(f,l) << std::endl;

    test = "*-*2.34*-*10*-*0.16*-*12.5";
    std::string::const_iterator f2 ( test.begin() ), l2 ( test.end() );

    auto param2 = make_prefixer ( qi::lit ( "*-*" ) );
    double d;
    qi::rule<std::string::const_iterator> myrule = ( param2 ( qi::double_, qi::int_, qi::double_ , qi::double_) ) [phx::ref ( d ) = qi::_1 + qi::_2 + qi::_3 + qi::_4];

    if ( qi::parse ( f2, l2, myrule ) && f2 == l2 )
        std::cout << "the sum of the numbers is " << d << std::endl;
    else
        std::cerr << "Uhoh\n";

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:08:59.623

如果我理解正确，您正在寻找一种*自动*期望或忽略分隔符表达式 ( `dlm`) 的方法？

### 船长

这是精神上的船长的经典地形。如果分隔符是可变的，这尤其有用，例如空格（可以接受不同数量的空格）；

```
bool ok = qi::phrase_parse(
      first, last,                // input iterators
      timestamp > cid > double_,  // just specify the expected params
      qi::space);                 // delimiter, e.g. any amount of whitespace 
```

请注意使用`phrase_parse`启用带有跳过的语法。

### `%`用解析器指令分隔

你可以明确地去界定语法：

```
 dlm     = qi::lit(','); // as an example, delimit by single comma
 rule    = timestamp > dlm > cid > dlm > double_; 
```

这很乏味。可能对您有用的东西（取决于应执行的输入验证量：

```
 dlm     = qi::lit(','); // as an example, delimit by single comma
 rule    = (timestamp | cid | double_) % dlm; 
```

（这将导致 的向量`variant<timestampt_t, cid_t, double>`）

### 自己滚

您可以滚动自己的解析器指令，类似于[`karma::delimit`](http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/spirit/karma/reference/directive/delimit.html)，但用于输入。

Hartmut Kaiser 在这篇文档文章中概述了这个想法：

*   [为 Spirit.Karma 创建您自己的生成器组件](http://boost-spirit.com/home/articles/karma-examples/creating-your-own-generator-component-for-spirit-karma/)

如果您有兴趣，我可以看看我是否可以将此作为示例（我以前没有使用过）。老实说，我很惊讶这样的东西还不存在，***我认为它会成为[Spirit Repository的主要候选者](http://www.boost.org/doc/libs/1_51_0/libs/spirit/repository/doc/html/index.html)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T02:37:03.623

这是我终于满意的解决方案。它基于以下三个答案：

*   [https://stackoverflow.com/a/12679189/396583](https://stackoverflow.com/a/12679189/396583)
*   [https://stackoverflow.com/a/6069950/396583](https://stackoverflow.com/a/6069950/396583)
*   [https://stackoverflow.com/a/3744742/396583](https://stackoverflow.com/a/3744742/396583)

我决定不让它接受任意二进制函子，因为我怀疑它在解析上下文中是否有任何实际用途。所以，

```
#include <boost/proto/deep_copy.hpp>

template <typename D>
struct prefixer
{
    template<typename... T>
    struct TypeOfPrefixedExpr;

    template<typename T>
    struct TypeOfPrefixedExpr<T>
    {
        typedef typename boost::proto::result_of::deep_copy
                 < decltype ( std::declval<D>() > std::declval<T>() ) >::type  type;
    };

    template<typename T, typename... P>
    struct TypeOfPrefixedExpr<T, P...>
    {
        typedef typename boost::proto::result_of::deep_copy
                 < decltype ( std::declval<D>() > std::declval<T>()
                              > std::declval<typename TypeOfPrefixedExpr<P...>::type>() ) >::type  type;
    };

    D dlm_;
    prefixer ( D && dlm ) : dlm_ ( dlm ) {}

    template <typename U>
    typename TypeOfPrefixedExpr<U>::type operator() (U && parser )
    {
        return boost::proto::deep_copy ( dlm_ > parser );
    }

    template <typename U, typename ... Tail>
    typename TypeOfPrefixedExpr<U, Tail...>::type
            operator() (U && parser, Tail && ... tail )
    {
        return boost::proto::deep_copy ( dlm_ > parser > (*this)(tail ...) );
    }
};

template <typename D>
prefixer<D> make_prefixer ( D && dlm )
{
    return prefixer<D> ( std::forward<D>(dlm) );
} 
```

它是这样使用的：

```
auto params = make_prefixer(qi::lit(dlm));

cmd_ID      = params(string) [ _val = lazy_shared<dc::Auth>   (_1) ];

cmd_NAV     = params(timestamp, double_, double_, double_, double_, double_)
              [
                  _val = lazy_shared<dc::Navigation>( _1, _2, _3, _4, _5, _6 )
              ];

cmd_BC      = params(timestamp, cid, double_)
              [
                  _val = lazy_shared<dc::BoardControl>(_1, _2, _3)
              ]; 
```

# iphone - 将设备连接到 Mac localhost 服务器？

> ID：12657651
> 
> 赞同：112
> 
> 时间：2012-09-30T00:24:42.513
> 
> 标签：iphone, localhost, lan, wifi, localserver

如何允许任何设备（例如 iPhone）通过 WLAN 连接到我的 Mac 的 localhost 服务器？

在我的 Mac 上，我正在运行一个“Hello World”HTTP [Node.js](http://nodejs.org)服务器，该服务器提供一个 Safari 成功打开的页面，位于`http://localhost:1337`. 并且，`ipconfig getifaddr en1`在终端输出中运行`192.168.1.9`。

但是，iPhone 和 Mac 上的 Safari 在尝试打开`http://192.168.1.9:1337`.

我认为这不应该涉及[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)，因为我只希望 HTTP 服务器可以私下使用，而不是公开使用。

有关的：

*   [从 iPhone 访问 localhost（在同一网络中）](https://stackoverflow.com/questions/5666018/accessing-localhost-from-iphone-in-same-network)
*   [https://superuser.com/questions/308451/connect-to-localhost-from-another-computer](https://superuser.com/questions/308451/connect-to-localhost-from-another-computer)
*   [https://superuser.com/questions/400752/can-we-run-local-server-over-local-network-without-internet-access](https://superuser.com/questions/400752/can-we-run-local-server-over-local-network-without-internet-access)
*   [https://serverfault.com/questions/254947/accessing-localhost-xampp-from-another-computer-over-lan-network-how-to](https://serverfault.com/questions/254947/accessing-localhost-xampp-from-another-computer-over-lan-network-how-to)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-09-26T18:14:40.640

我有同样的问题。我关闭了我的 Mac 上的 WI-FI，然后再次打开它，这解决了问题。单击设置 > 关闭 WI-FI。

我通过在我的 iPhone 上访问 Safari 并输入我的主机名或 IP 地址来测试它。例如： `http://<name>.local`或`http://10.0.1.5`

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-09-30T00:25:16.260

让您的服务器监听`0.0.0.0`而不是`localhost`.

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-02-19T15:01:47.567

我只能使用`http://name.local:1337`. 您必须添加“.local”您可以在系统偏好设置/共享/“计算机名称”下找到您的计算机名称。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-10-12T18:39:08.340

尝试启用 Internet 共享：
打开系统偏好设置 -> 共享。检查 Internet 共享以将其打开，它会提示您确认您的操作，选择确定。如果您的 iPhone 使用 USB 连接，则在右侧的“共享您的连接”列表中选中 iPhone USB。
在此之后，尝试在 wifi 上使用您的 macs ip 访问您的本地服务器。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-12-15T23:40:28.103

我的问题是一样的，但解决方案与更改防火墙设置有关。事实证明，该节点被设置为阻止传入流量。我知道有什么事情发生了，因为我曾经能够从我的手机访问我的本地主机服务器。

转到*System Preferences* -> *Security & Privacy* -> *Firewall* -> *Firewall Options*，然后向下滚动，直到找到*node*并确保 node 的设置设置为***Allow incoming connections***。

更改设置后，我可以通过访问[http://192.168.1.11:3000访问在我的 Mac 上运行的本地主机服务器（端口 3000）](http://192.168.1.11:3000)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-02-13T06:23:29.247

我解决了一个类似的问题。

*   将 Mac 和 iPhone 连接到同一个 Wi-Fi
*   更改 iPhone Wi-Fi 设置，将 http 代理设置为手动并将服务器更改为您的 Mac ip 地址并设置端口。我的港口是80。

[![图一](../Images/052b8835f49584318b10eb9dcb0fd5dd.png)](https://i.stack.imgur.com/gElD0.png)

[![图二](../Images/c018992ced2cbf145d457c7c2bad2a9d.png)](https://i.stack.imgur.com/I6Ijo.jpg)

*   你可以`http://<Mac ip>:<your customer server port>`在 iPhone 的 safari中输入

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-11-03T16:53:56.650

MacOS Sierra 用户可以通过转到`System Preferences > Sharing`并检查计算机名称文本输入下方来找到他们自动生成的虚 URL。要访问它，请通过与计算机相同的 Wi-Fi 连接在 iPhone 上输入此 URL 以及您的端口号（例如 your-name.local:8000）。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-08-16T00:46:30.323

1.  通过 USB 将 iPhone 连接到 Mac。

2.  转到网络实用程序（cmd+空格并键入“网络实用程序”）

3.  转到“信息”选项卡

4.  单击显示“Wi-Fi”的下拉菜单，然后选择“iPhone USB”，如下所示：

    [![步骤 4 的照片](../Images/8e5d8570e298480ba983b1a425c3888c.png)](https://i.stack.imgur.com/cD2K6.png)

5.  您会找到类似“xxx.xxx.xx.xx”或类似的 IP 地址。在 iPhone 上打开 Safari 浏览器并输入 IP_address:port_number

    示例：169.254.72.86:3000

[注意：如果 IP 地址字段为空白，请确保您的 iPhone 已通过 USB 连接，退出 Network Utility，再次打开并检查 IP 地址。]

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-09-30T00:59:47.540

我建议使用计算机的名称，例如`http://mymac:1337/`. 对我来说非常完美，不需要任何配置，而且我不必关心由于 DHCP 而更改 IP 地址。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-08-02T03:20:09.450

正如发布的那样，我遵循了 moeamaya 的回答，但需要对其进行一些修改才能在 Sites 目录中看到我的工作。

```
http://[name].local.~[username]/ 
```

**[名称]**如前所述（系统偏好设置/共享/“计算机名称”）

**[用户名]**位于：

```
/etc/apache2/users/username.conf 
```

希望这可以帮助！

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-05-24T06:03:21.643

确保您的手机和 mac 机器都连接到同一个 wifi 并且您很高兴去您的`http://<machine-name>.local`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-01-04T07:04:33.540

尝试了此页面上的所有内容，但`http://<name>.local:<PORT>`仅在我退出并重新启动 Safari 后才能在我的 iPhone 上运行...

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-01-12T01:47:01.367

始终使用网络设置中显示的 IP。当您更改位置并使用另一个无线连接时，它会发生变化。

例如，在我的情况下，现在是：**10.0.0.5**

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-12-18T19:21:33.983

另外，请确保服务器正在侦听您的移动设备！例如，默认情况下，jekyll 只回答主机发出的请求。这解决了我的问题：

[使用局域网中的移动设备连接到本地构建的 Jekyll 服务器](https://stackoverflow.com/questions/16608466/connect-to-a-locally-built-jekyll-server-using-mobile-devices-in-the-lan)

# ios - iOS UIView 推送视图控制器

> ID：12657663
> 
> 赞同：1
> 
> 时间：2012-09-30T00:27:19.890
> 
> 标签：ios, uiview, mkmapview, pushviewcontroller, user-interaction

当用户选择 UIView 时是否可以推送视图控制器？我有一个 UIView，它在其中显示地址和坐标，当用户触摸它时，我希望它推送到我的地图视图控制器，在那里它将绘制注释等等......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:35:49.397

您的地址和坐标应该在视图内（如标签）。如果你在它上面设置了一个[点击手势](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)，然后点击，你可以推动视图控制器。

例如，如果它是一个标签，这里有一个相关的 SO 帖子显示处理标签上的点击：[iOS using UITapGestureRecognizer with UILabel to swipe to next page](https://stackoverflow.com/questions/10924410/ios-using-uitapgesturerecognizer-with-uilabel-to-swipe-to-the-next-page)

在该示例中，他们正在滚动到下一页，在您的代码中，您将推送视图控制器。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleAddressTap:)]; 
[view.addressLabel addGestureRecognizer:tap];  // bind the tap to your label with your address ...

- (void) handleAddressTap: (UIGestureRecognizer *) gesture {
    // push your view controller here
} 
```

# javascript - 哪些浏览器（和版本）支持 setTimeout 和 setInterval 的回调参数？

> ID：12657664
> 
> 赞同：2
> 
> 时间：2012-09-30T00:27:57.450
> 
> 标签：javascript

根据[**WHATWG**](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#timers)和[**MDN**](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)，`window.setTimeout`并`window.setInterval`具有形式

```
var handle = window.setTimeout( handler [, timeout [, arguments... ] ] );
var handle = window.setInterval( handler [, timeout [, arguments... ] ] ); 
```

大多数消息来源说（通用）Internet Explorer 不支持可选的`arguments`.
是否有支持和不支持它的浏览器和版本的列表？

测试支持的方法的一个例子是

```
<html>
<head><title>test</title></head>
<body>
setTimeout: <span id="t">testing..</span><br/>
setInterval: <span id="i">testing..</span>
<script type="text/javascript">
t = window.setTimeout( // setTimeout
    function (b) { // callback
        document.getElementById('t').innerHTML = (b || false); // test for arg1
    },
    0,
    true // arg1
);
i = window.setInterval( // setInterval
    function (b) { // callback
        document.getElementById('i').innerHTML = (b || false); // test for arg1
        window.clearInterval(i);
    },
    0,
    true // arg1
);
</script>
</body>
</html> 
```

预期结果`true`和失败结果为`false`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T00:27:57.450

使用基于问题中的示例代码和浏览器的[**BrowserShots**](http://browsershots.org/)的测试，这里是浏览器支持表

```
Browser  Version  setTimeout  setInterval
Chrome     4+      true        true         Lowest version testable
Firefox    3+      true        true         Did not test lower versions
MSIE       6       false       false
MSIE       7       false       false
MSIE       8       false       false
MSIE       9       false       false
MSIE      10       true        true
Opera                                       Not tested 
```

# html - 是什么导致这些 html 超链接的高度与文本的其余部分不同？

> ID：12657666
> 
> 赞同：0
> 
> 时间：2012-09-30T00:28:16.723
> 
> 标签：html, css, hyperlink

我有一些链接比正文的其余部分略小（在它们的底部），我不明白为什么会这样，以及我做错了什么可能导致这种情况。

问题存在于[以下](http://lab.cmikavac.net/autokana/)链接：*github*、*link*、*email*、*comment*和*lab*。

如果我将列表移到#top_container 之外，那么大小会变得正常，并且这些链接底部的奇怪间距会消失。

有谁知道我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:21:34.017

实际上，您看到的是由白色和红色字体之间的对比产生的视觉错觉。此外，您对链接使用粗体字体只会增加这些字体较小的印象。尝试改变它们的颜色和重量。

我已经上传了您页面片段的屏幕截图。这条线可以用作更准确地比较这些字体的基础。希望能帮助到你。

![在此处输入图像描述](../Images/1d63b1db46e2e851295ad6aad39ce0a1.png)

编辑。我使用火狐。也许在其他浏览器中，粗体字体呈现出一些不同，并且差异是真实的（不是我第一次假设的视错觉）。

# javascript - 使用 javascript 函数调用 ui 对话框

> ID：12657667
> 
> 赞同：2
> 
> 时间：2012-09-30T00:28:16.910
> 
> 标签：javascript, jquery, jquery-ui

我需要从函数 javascript 打开（调用）一个 ui 对话框。目前我有这两个代码：

```
setTimeout(function() {
var zone = event.getTarget().getName();                  
var x = window.confirm("Do you want to continue?");                     
if (x) {
    readData();
} else {
    e.preventDefault();
}
}, 0); 
```

和，

```
$( "#dialogZone" ).dialog({
autoOpen: false,
show: "blind",
hide: "blind",
modal: true,
buttons: {
    "YES": function() {
        $(this).dialog("close");
        readData();
    },
    Cancel: function() {
        $(this).dialog("close");
        //avoid some info windows in #tab1
    }
}
});

$( "#openEvent" ).click(function() {
$( "#dialogZone" ).dialog( "open" );
return false;
});
}); 
```

请问，我可以有一些像...

```
setTimeout(function() {
   // show ui-dialogbox
} 
```

提前感谢您的回答。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:30:50.537

你的代码中已经有了它：

```
 $( "#dialogZone" ).dialog( "open" ); 
```

打开对话框，所以把这一行放在你的超时函数中

# sql - SQL 数据仓库，需要帮助使用 TSQL SELECT 或更好的替代方法填充我的 DIMENSION？

> ID：12657674
> 
> 赞同：2
> 
> 时间：2012-09-30T00:29:04.133
> 
> 标签：sql, tsql, ssis, data-warehouse, dimensions

我的 SQL Server 中有一个表，我在其中“暂存”了从我们的 ERP 系统中提取的数据仓库。

从这个临时表（**表名：DBO.DWUSD_LIVE**）中，我构建了我的维度并加载了我的事实数据。

示例 DIMENSION 表称为“SHIPTO”，此维度具有以下列：

```
"shipto_id
"shipto"
"salpha"
"ssalpha"
"shipto address"
"shipto name"
"shipto city" 
```

现在我有一个 SSIS 包，它在上述列中执行 SELECT DISTINCT 以检索“唯一”数据，然后通过 SSIS 包我将“shipto_id”代理键分配给。

我当前的 TSQL 查询的一个例子是：

```
SELECT DISTINCT
"shipto", "salpha", "ssalpha", "shipto address", "shipto name", "shipto city"
FROM DBO.DWUSD_LIVE 
```

这很好用，但不是“快速”，某些维度有 10 列，并且对这些维度进行不同的选择并不理想。

在这个维度中，我的“业务键”列是**“SHIPTO”、“SALPHA”和“SSALPHA”**。

所以如果我这样做：

```
SELECT DISTINCT
"shipto", "salpha", "ssalpha"
FROM DBO.DWUSD_LIVE 
```

它产生与以下相同的结果：

```
SELECT DISTINCT
"shipto", "salpha", "ssalpha", "shipto address", "shipto name", "shipto city"
FROM DBO.DWUSD_LIVE 
```

有没有更好的方法来做这个 TSQL QUERY？我需要所有列，但只需要业务关键列上的 DISTINCT。

感谢您的帮助。

下面是我的项目如何在 SSIS 中设置的图像，维度是 SCD 1。

![](../Images/1b25b06c8be315c714b38a9e7b845733.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:45:35.583

我首先将其拆分为两个操作：生成代理键和填充维度表。第一步将是 a`DISTINCT`仅 3 列，第二步将成为 a `JOIN`。索引两个操作中使用的列可能会给你一些改进。

您可以结合`DISTINCT`with`NOT EXISTS`以避免处理已经映射的行，如下所示：

```
insert into dbo.KeyMappingTable (shipto, salpha, ssalpha)
select distinct shipto, salpha, ssalpha
from dbo.Source
where not exists (
    select *
    from dbo.KeyMappingTable
    where shipto = dbo.Source.shipto and salpha = dbo.Source.salpha and ssalpha = dbo.Source.ssalpha
 ) 
```

然后你有映射，所以你可以这样做：

```
insert into dbo.DimShipTo (shipto_id, shipto /*, etc. */)
select
    m.shipto_id,
    s.shipto -- etc.
from
    dbo.KeyMappingTable m
    join dbo.Source s
    on m.shipto = s.shipto and m.salpha = s.salpha and m.ssalpha = s.ssalpha
where
    not exists (
        select *
        from dbo.DimShipTo
        where shipto_id = m.shipto_id
    ) 
```

您还应该查看[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)，如果您使用类型 1 维度并且只想在地址或其他属性发生更改时更新它们（通常这是一个有用的命令），这很方便。但它仅适用于 SQL Server 2008；您没有提及您使用的 SQL Server 版本或版本。

# jquery - 带有 2 个 url 目标的 Ajax Post

> ID：12657676
> 
> 赞同：1
> 
> 时间：2012-09-30T00:29:37.103
> 
> 标签：jquery, ajax, post

我试图在 Jquery 中使用 ajax 将数据发送到 2 个不同的 url
我可以这样想：

```
$.ajax({ 
type: 'POST' 
url: 'some_url1' 
data: 'some data'  
success: function(data){  
$.ajax ({  
type: 'POST'  
url: 'some_url2' 
data: 'some data' 
success: function(data){}
}) 
}  
}) 
```

还有其他方法吗？
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T00:51:55.270

当你有这样的代码时：

```
$.ajax({ 
  type: 'POST',
  url: 'some_url1',
  data: 'some data', 
  success: function(data){  
    $.ajax ({  
      type: 'POST',
      url: 'some_url2',
      data: 'some data',
      success: function(data){}
    });
  }
}); 
```

应该跳出来的第一件事是重复的数量。您基本上有两个几乎相同的代码块。除非有很好的理由说明它应该被复制（例如，如果两个代码块负责两个不同的业务所有者/角色并且*很*可能彼此独立地更改），那么将复制的代码抽象为一个函数.

在这种情况下，两个重复的代码块之间只有两个区别：

1.  网址
2.  成功回调

因此，您从重复代码中提取的函数应该接受这两个参数作为参数：

```
var makeAjaxCall = function (url, success_callback) {
  $.ajax ({  
    type: 'POST',  
    url: url,
    data: 'some data',
    success: success_callback
  });
}; 
```

然后您的示例将像这样调用该函数：

```
makeAjaxCall(
  'some_url1',
  makeAjaxCall(
    'some_url2',
    function() {}
  )
); 
```

请注意，在您的示例中，您将`data`参数传递给回调函数，尽管您没有使用它。出于问题的目的，这是一个最小的人为示例吗？实际上，您正在使用该参数？如果是这样，那么提取的函数也需要处理它。但在您这样做之前，您需要更明确一点，因为您的示例在这方面令人困惑，并且可能以意想不到的（或至少不直观的）方式表现。当你的内部 AJAX 成功回调接收到它的`data`参数时，你希望它是内部 AJAX 调用的结果吗？还是您希望它`data`是传递给包含内部 AJAX 调用的函数的参数？代码中的意图不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:57:49.797

看起来是这样的。。

```
$(function() {
     // Make the first ajax call with Parameters
     ajaxCall('firsturl' , firstdata , callbackFunction1 );

});

function callbackFunction1(result) {
    // Make the econd ajax call from the callback function1
     ajaxCall('secondurl' , seconddata , callbackFunction2 ); 
};

 function callbackFunction2(result) {
    // Success call back of second ajax request     
}; 

function ajaxCall(url, usrData, callbackFunction) {
    $.ajax({
        type: 'POST'
        url: url,
        data: usrData,
        success: callbackFunction
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T10:32:49.967

```
function ValidateForm() {     

    //Data Post to FirstForm
    var str = $("#FirstForm").serialize();

    $.ajax({
        type: "POST",
        dataType: "jsonp",
        contentType: "application/json; charset=utf-8",
        url: "https://xyz.com",
        data: str,
        success: function (msg) {console.log("Success data post ---->" + JSON.stringify(msg)) },
        error: function (msg) { console.log("Error data post ---->" + JSON.stringify(msg)) }

    });
    //End Data Post to First Form

    //Call Click event of Second form .Use Form post and action method .

       //Copy First Form text box  value into second Form text box 
      $("#btnSecondForm").trigger('click'); 
   //End Click event

  return false;
}

//Form in Body

<form  id="FirstForm" onsubmit="return ValidateForm(this)">

 //text box HTML 

</form>

 <form id="SecondForm" style='display:none' action="https://abc.com" method="post">

 <input type="submit" value="Submit" id='btnSecondForm' />

 </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T00:31:43.823

编写一个在参数中具有要发送到的 URL 的函数，然后只调用该函数 2 次，每次使用另一个 URL，而不是编写双重代码......

# c# - 带有分钟的 DATEDIFF 不返回预期值

> ID：12657680
> 
> 赞同：3
> 
> 时间：2012-09-30T00:30:19.420
> 
> 标签：c#, sql-server, tsql, rounding, datediff

说，我有以下 SQL Server 2008 数据表：

```
CREATE TABLE tbl (dtIn DATETIME2, dtOut DATETIME2)
INSERT tbl VALUES
('9/10/2012 5:14:10 AM', '9/10/2012 5:15:09 AM'),
('9/10/2012 5:16:12 AM', '9/10/2012 5:18:12 AM'),
('9/10/2012 5:18:43 AM', '9/10/2012 5:23:04 AM'),
('9/10/2012 5:25:17 AM', '9/10/2012 5:26:05 AM'),
('9/10/2012 5:26:57 AM', '9/10/2012 5:29:19 AM'),
('9/10/2012 5:31:41 AM', '9/10/2012 5:32:41 AM'),
('9/10/2012 5:33:16 AM', '9/10/2012 5:34:08 AM'),
('9/10/2012 5:35:25 AM', '9/10/2012 5:49:46 AM'),
('9/10/2012 5:55:35 AM', '9/10/2012 5:56:48 AM'),
('9/10/2012 5:58:54 AM', '9/10/2012 5:59:59 AM') 
```

然后我运行了[这个查询](http://sqlfiddle.com/#!3/8e57d/1)：

```
WITH ctx AS(
  SELECT datediff(minute, dtIn, dtOut) AS d FROM tbl
  )
SELECT SUM(d) FROM ctx 
```

我得到 30 分钟。

但是当我用 C# 尝试同样的方法时：

```
double fM = 0;
fM += (DateTime.Parse("9/10/2012 5:15:09 AM") - DateTime.Parse("9/10/2012 5:14:10 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:18:12 AM") - DateTime.Parse("9/10/2012 5:16:12 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:23:04 AM") - DateTime.Parse("9/10/2012 5:18:43 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:26:05 AM") - DateTime.Parse("9/10/2012 5:25:17 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:29:19 AM") - DateTime.Parse("9/10/2012 5:26:57 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:32:41 AM") - DateTime.Parse("9/10/2012 5:31:41 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:34:08 AM") - DateTime.Parse("9/10/2012 5:33:16 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:49:46 AM") - DateTime.Parse("9/10/2012 5:35:25 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:56:48 AM") - DateTime.Parse("9/10/2012 5:55:35 AM")).TotalMinutes;
fM += (DateTime.Parse("9/10/2012 5:59:59 AM") - DateTime.Parse("9/10/2012 5:58:54 AM")).TotalMinutes; 
```

我得到 fM = 29.016666666666669。

通过将 Math.Round() 添加到每个 C# 语句中，我得到 28.0。通过添加 Math.Floor() 我得到 25.0。通过添加 Math.Ceiling 我得到 33.0。

有人可以解释这种差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T00:34:27.917

每个的返回值都在测量不同的东西。

谨慎注意这里的[DATEDIFF](http://msdn.microsoft.com/en-us/library/aa258269%28v=sql.80%29.aspx)文档：

> 返回指定开始日期和结束日期之间跨越的指定日期部分边界的计数（有符号整数）。

这导致以下 2 秒间隔：

```
SELECT datediff(minute, '9/10/2012 5:14:59 AM', '9/10/2012 5:15:01 AM') 
```

返回 1，因为它跨越了分钟边界。我怀疑你没有考虑到这种行为。

# matlab - 从win64到win32的pnet通信

> ID：12657684
> 
> 赞同：3
> 
> 时间：2012-09-30T00:30:59.130
> 
> 标签：matlab, mex, win64, psychtoolbox

我使用[pnet tcp/udp 工具箱](http://www.mathworks.com/matlabcentral/fileexchange/345-tcpudpip-toolbox-2-0-6)）和[psychtoolbox](http://psychtoolbox.org/HomePage)在不同机器上的两个 matlab 实例之间进行通信。我的一台机器是运行 matlab 2010b 的 32 位 win7。另一个是运行 matlab 2012a 的 64 位 win 7。我在将数据从一台计算机传输到另一台计算机时遇到问题。

**实验 1**：从 64 位计算机运行 udp_send_demo，同时从 32 位计算机运行 udp_plotter_demo。*预期结果*：32 位计算机绘制数据，等待键盘输入。如果输入 Kb，则关闭图形并结束演示。64位完成发送并停止演示。*实际结果*：64 位的行为应如此。32 位计算机绘图但挂起并拒绝关闭演示。它不响应任何键盘输入，必须强制关闭。

**实验 2**：以 32 位发送和 64 位读取反向运行上述实验。*预期结果*：64 位绘图并等待键盘输入。如果找到 kb 输入，则停止演示。*实际结果*是 64 位 matlab 崩溃，声称 mex 文件中存在分段违规。它显示一个堆栈跟踪（我在最后附加了它的一部分）。

玩弄端口号没有区别。重新编译“pnet.c”源文件而不是使用预编译的 mex 没有区别。 **问题**：有没有人尝试过这样的事情？你让它工作了吗？你能建议一些事情来尝试让它工作而不必在我的 Win64 计算机上安装 32 位 matlab 吗？

=============

代码：

**服务器端：**

```
udp_send_demo('sin(0:0.1:6)',clientIPStr,portToListen) 
```

**客户端：**

```
udp_plotter_demo(portToListen) 
```

==============

**堆栈跟踪**

* * *

## 2012 年 9 月 29 日星期六 16:41:11 检测到分段违规

配置：

崩溃解码：禁用

默认编码：windows-1252

MATLAB 根目录：C:\Program Files\MATLAB\R2012a

MATLAB 版本：7.14.0.739 (R2012a)

操作系统：微软视窗7

处理器 ID : x86 Family 6 Model 58 Stepping 9, GenuineIntel

虚拟机：Java 1.6.0_17-b04 与 Sun Microsystems Inc. Java HotSpot(TM) 64 位服务器 VM 混合模式

窗口系统：版本 6.1（内部版本 7601：Service Pack 1）

故障数：1

异常终止：分段违规

寄存器状态（来自故障）：RAX = 0000000000000000 RBX = 0000000000000000

RCX = 000000005d0df7d7 RDX = 0000000000000001

RSP = 00000000040671b0 RBP = 0000000004067289

RSI = 000000000000003d RDI = 000000000000003d

R8 = 000000005d0df7d6 R9 = 000050490ee40167

R10 = 000000000000003d R11 = 0000000000000000

R12 = 0000000000000008 R13 = 000007fefb997678

R14 = 0000000000000002 R15 = 0000000000000002

RIP = 000007fefb99238a EFL = 00010202

CS = 0033 FS = 0053 GS = 002b

堆栈跟踪（来自故障）：

[0] 0x000007fefb99238a C:\Users\ephys-data\Desktop\temp\tcp_udp_ip\pnet.mexw64+00009098 (perror+004298)

[1] 0x000007fefb99389b C:\Users\ephys-data\Desktop\temp\tcp_udp_ip\pnet.mexw64+00014491 (mexFunction+001979)

[2] 0x0000000074f10f63 C:\Program Files\MATLAB\R2012a\bin\win64\libmex.dll+00069475 (mexRunMexFile+000131)

[3] 0x0000000074f0fce2 C:\Program Files\MATLAB\R2012a\bin\win64\libmex.dll+00064738 (inSwapMexfileReader+000226)

[4] 0x0000000074f0fe58 C:\Program Files\MATLAB\R2012a\bin\win64\libmex.dll+00065112 (inSwapMexfileReader+000600)

[5] 0x0000000074e4b046 C:\Program Files\MATLAB\R2012a\bin\win64\m_dispatcher.dll+00045126 (Mfh_file::dispatch_fh+000486)

....更多东西....

运行 MEX 文件时检测到此错误。如果 MEX 文件不是 MathWorks 的官方函数，请检查其源代码是否有错误。有关调试 MEX 文件的信息，请参阅外部接口指南。

如果此问题可重现，请通过以下方式提交服务请求：....

技术支持工程师可能会与您联系以提供更多信息。

谢谢您的帮助。

* * *

谢谢

-b

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:08:26.970

我在 psychtoolbox 写了乐于助人的人。显然，该错误已在 psychtoolbox 的“测试版”中被捕获并解决。如果您拥有最新最好的 psychtoolbox，请运行 UpdatePsychtoolbox 以获得良好的睡眠。看[这里](http://tech.groups.yahoo.com/group/psychtoolbox/message/14503)

# php - 从变量中获取PHP文件？

> ID：12657688
> 
> 赞同：1
> 
> 时间：2012-09-30T00:32:03.940
> 
> 标签：php

我怎样才能摆脱这样的变量： `$var1 = "www.game.mysite.com/folder/page.php?var1=1&var2=2";`

然后我想以某种方式只获得“page.php”，它被设置为什么？

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:02:00.733

我不会为此使用正则表达式，[`parse_url`](http://php.net/manual/en/function.parse-url.php)但是[`basename`](http://php.net/manual/en/function.basename.php)：

```
$var1 = "www.game.mysite.com/folder/page.php?var1=1&var2=2";
$parsed = parse_url($var1);
var_dump(basename($parsed['path'])); 
```

请参阅[codepad](http://codepad.org/llrgaLXY)上的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T01:55:47.567

这将使用路径的最后一段。

```
$var1 = "www.game.mysite.com/folder/page.php?var1=1&var2=2";
$path = parse_url($var1, PHP_URL_PATH);
$path_parts = explode('/', $path);
var_dump($path_parts[count($path_parts) -1]); 
```

输出：

```
string(8) "page.php" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:36:43.453

一些简单的正则表达式会让你摆脱麻烦：

```
$var1 = "www.game.mysite.com/folder/page.php?var1=1&var2=2";
preg_match('/([a-z]+\.php)/', $var1, $file); // Returns `page.php` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T00:41:09.513

tehlulz 提到了 preg_match 方法，如果您不知道文件扩展名是什么，还有一个 preg_replace 选项。

```
$pattern = '/(.*)(\/)(.*)(\?)(.*)/';
$replacement = '$3';
$filename = preg_replace($pattern, $replacement, $var1); 
```

有几种方法可以完成你所追求的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T02:39:17.650

尝试这个

```
$var1 = "www.game.mysite.com/folder/page.php?var1=fgsd rew1&var2=2";
$reversed_string = strrev($var1);
$pos_of_questionMark = strpos($reversed_string, "?");
$pos_of_first_slash = strpos($reversed_string, "/");
$getfilename = strrev(substr($reversed_string,$pos_of_questionMark+1,  $pos_of_first_slash-$pos_of_questionMark-1));
echo $getfilename; 
```

# java - 配置 Velocity 以读取类路径之外的模板文件

> ID：12657689
> 
> 赞同：0
> 
> 时间：2012-09-30T00:32:16.813
> 
> 标签：java, spring, templates, velocity

我正在尝试将 Velocity 配置为从文件系统读取模板文件，而不是从类路径读取模板文件。如果我将velocityEngine配置为：

```
<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean" 
          p:resourceLoaderPath="classpath:/com/myapp/test" 
          p:preferFileSystemAccess="false"/> 
```

并将 templatefile.vm 放入 com.myapp.test 包中。

如何更改上述内容，以便我可以将模板文件放在文件系统中的任何位置并访问它。我试过了，但没有用。

```
<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean" 
          p:resourceLoaderPath="c:\home\users\me\app\templates" 
          p:preferFileSystemAccess="true"/> 
```

我试图用谷歌搜索是否能找到解决方案，但大多数示例都是针对 Spring MVC 配置的。我正在使用独立的 Spring 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:35:26.013

尝试使用`file:`这样指定文件名：

```
<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean" 
          p:resourceLoaderPath="file://c:\home\users\me\app\templates" 
          p:preferFileSystemAccess="true"/> 
```

这就是我认为它应该起作用的原因。根据[此文档](http://www.springframework.net/docs/1.3.0-RC1/api/net-2.0/html/Spring.Template.Velocity~Spring.Template.Velocity.VelocityEngineFactoryObject~Members.html)，当您设置`PreferFileSystemAccess`为`true`它开始使用`SpringResourceLoader`. `SpringResourceLoader`用途广泛，这里有一个[很好的概述](http://www.mkyong.com/spring/spring-resource-loader-with-getresource-example/)。

* * *

[这](https://stackoverflow.com/questions/5342704/how-to-set-properly-the-loader-path-of-velocity)也可能是相关的。

# mongodb - MongoDb 中的文档大小

> ID：12657690
> 
> 赞同：5
> 
> 时间：2012-09-30T00:32:51.583
> 
> 标签：mongodb, document

考虑将来切换到 DynamoDB，但要确保我的文档在 1KB 以下，因为它们按 KB 收费。有没有一种快速的方法可以知道集合中的文档有多大？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-30T03:17:58.553

作为一般指南，您可以使用集合报告的值检查集合*collname*中文档的平均大小：`avgObjSize``stats()`

```
db.collname.stats() 
```

要查找和计算大型文档，您可以使用类似于：

```
var maxSize = 1024;
var bigDocs = 0;
db.collname.find().forEach(
    function (doc) {
        var docSize = Object.bsonsize(doc);
        if (docSize >= maxSize) {
            bigDocs++;
            print(doc._id + ' is ' + docSize + ' bytes');
        }
    }
)
print("Found " + bigDocs + " documents bigger than " + maxSize + " bytes") 
```

请注意，这两个示例都使用 MongoDB [BSON](http://bsonspec.org)表示，这与在其他数据库中表示相同数据所需的大小不同。

# asp.net - 需要我在服务器中设置 dll

> ID：12657692
> 
> 赞同：-1
> 
> 时间：2012-09-30T00:33:42.540
> 
> 标签：asp.net, mysql

我只是在我的项目中使用 Mysql 连接器 .Net。当我测试时，它可以在我的电脑上运行。当我将项目上传到我的服务器时，它说`The specified store provider cannot be found in the configuration, or is not valid`。

是不是有什么问题，实际上服务器从未在服务器中设置 Mysql 连接器。因此，如果连接器未在服务器中设置，我不能在服务器中使用它吗？

所以总而言之，如果我没有在服务器中设置它只是用 dll（Mysql.Data.dll）上传我的项目，它不能工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:59:18.850

[1](http://sourceforge.net/projects/mysqldotnet/)在您的项目中添加任何 dll 的引用仅适用于您的本地运行。

[2] 如果你想在服务器上运行相同的东西，然后将你的 dll (Mysql.Data.dll) 添加到服务器的 .Net Framework 库文件夹中。为此，您需要联系服务器管理员。把这个 dll 给他们，他们会在 .net 框架库文件夹中为你添加这个 dll。

谢谢，我希望这对你有帮助。

或者

[1](http://sourceforge.net/projects/mysqldotnet/) **直接从此处[链接将此DLL的代码文件添加到您的项目中](http://sourceforge.net/projects/mysqldotnet/)**

[2]**所以不需要 dll 引用，也不需要在服务器上注册 dll。**

这将彻底解决您使用 Godaddy Web 服务器将 Mysql.Data.dll 添加到您的项目的问题。

# eclipse - 未触发 Eclipse 内容辅助 (JavaCompletionProposalComputer)

> ID：12657696
> 
> 赞同：0
> 
> 时间：2012-09-30T00:34:06.280
> 
> 标签：eclipse, eclipse-plugin, content-assist

我有一个使用 JavaCompletionProposalComputer 实现内容辅助钩子的插件。在那次事件中，我计算了一些东西并更新了我的视图。问题是视图保持打开状态，我无法触发内容辅助，因此无法触发我的处理程序。当我最小化视图时，我可以再次正常使用它。这是某种焦点问题吗？如何解决这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:33:51.280

看来我的问题与焦点有关。出于某种原因，每当我“显示”视图时，焦点就会丢失。我通过更换解决了这个问题

```
IWorkbenchPage.showView(view_id) 
```

和

```
IWorkbenchPage.bringToTop(view) 
```

希望有人会发现这很有用。

# ruby-on-rails - 在路由中使用 ActiveRecord

> ID：12657698
> 
> 赞同：0
> 
> 时间：2012-09-30T00:34:34.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我希望能够使用数据库中的项目来生成一些路线。因此，如果我添加新类型，我不必手动创建新路线。我有一些优先级较低的路由，所以我不能只使用 match ":type", :to => "items#search"。我找了这个，在上面找不到任何东西，所以我试了一下，它奏效了。

```
Type.find(:all).each do |type|
    name = type.name
    match "#{name}", :to => "items#search"
end 
```

我的问题是，这样做是不是一种不好的做法，如果是，为什么？

谢谢

编辑：即使我已经接受了答案，我可能应该补充一点，我真正想要完成的是将类型的名称作为参数传递给路由，如下所示：

```
Type.find(:all).each do |type|
    name = type.name
    match "#{name}", :to => "items#search", :type => name
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:01:56.630

很好，因为所有不同的项目都使用相同的项目路线。

因此，名为“items”的数据库表中的所有行都将使用相同的路由。

如果你有另一个模型，比如“price_ranges”，你可以有额外的路径来访问它的方法。

# networking - 阻止 UDP 转发

> ID：12657700
> 
> 赞同：1
> 
> 时间：2012-09-30T00:34:40.010
> 
> 标签：networking, udp, iptables, forwarding, ddos

我注意到我的服务器被用作 DDOS 的一部分来中继 UDP 流量。

各种源 IP 发送将 TARGET_IP 设置为目标的 UDP 数据报。我服务器的 IP*不是*TARGET_IP，所以我只是转发攻击。

到目前为止，由于*iptables* ，我正在将所有 UDP 流量丢弃到 TARGET_IP，但我想知道这是否是正常行为，即有人可以*通过*我的服务器将 UDP 流量发送到 TARGET_IP，使用它作为代理。

有没有办法在内核级别防止这种情况（在它通过*iptables*之前）？

编辑：我不能禁用 IP 转发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:39:36.027

如果您不打算让服务器路由流量，请[禁用 IP 转发](http://www.ducea.com/2006/08/01/how-to-enable-ip-forwarding-in-linux/)。那么您的机器将只能发送和接收发往/源自自身的数据包。这通常是 Linux 发行版的默认设置。

要检查是否启用`sysctl`了 IP 转发，请使用或检查`/proc`（1 = 启用，0 = 禁用）：

```
# sysctl net.ipv4.ip_forward
net.ipv4.ip_forward = 0

# cat /proc/sys/net/ipv4/ip_forward 
0 
```

要禁用 IP 转发，请使用以下任一命令：

```
# sysctl -w net.ipv4.ip_forward=0
net.ipv4.ip_forward = 0

# echo 0 > /proc/sys/net/ipv4/ip_forward 
```

这将即时禁用它。如果重新启动，更改将丢失。要进行永久更改，请编辑`/etc/sysctl.conf`.

有关详细信息，请参阅文章[如何在 Linux 中启用 IP 转发](http://www.ducea.com/2006/08/01/how-to-enable-ip-forwarding-in-linux/)。

# static - js-test-driver 不提供静态文件

> ID：12657701
> 
> 赞同：3
> 
> 时间：2012-09-30T00:35:02.017
> 
> 标签：static, assets, js-test-driver

我正在使用 js-test-driver 运行一些测试，并想针对 html 文档测试一些代码。我希望将其加载到 iframe 中的当前文档中并针对它测试我的代码，但我什至无法获取文件。

我的目录结构是：

*   simpleJsTestDriver
    *   aFile.html
    *   aTest.js
    *   jsTestDriver.conf
    *   jsTestDriver.jar
    *   一些代码.js

**文件.html**

```
<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    hello
  </body>
</html> 
```

**jsTestDriver.conf**

```
server: http://localhost:9876

load:
  - "someCode.js"

test:
  - "aTest.js"

serve:
  - "aFile.html" 
```

运行`java -jar JsTestDriver.jar --port 9876 --runnerMode=DEBUG` 并导航到`http://localhost:9876/aFile.html`给出：

```
HTTP ERROR 404

Problem accessing /aFile.html. Reason:

    Not found.
Powered by Jetty:// 
```

我正在使用最新版本的 js-test-driver (1.3.4.b)，因为 1.3.4.a 似乎存在[不提供](http://code.google.com/p/js-test-driver/issues/detail?id=376)静态文件的问题。我知道服务器发现文件没问题，因为更改 conf 文件中的名称会`aFi.html`引发错误：

```
Configuration Error: 
Cannot read [
/Users/james/Documents/simpleJSTestDriver/./aFi.html
] derived from aFi.html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T00:35:59.863

字面上刚刚解决了它。您需要导航到`http://localhost:9876/`**test**`/aFile.html`。明显地！

# matrix - 从二维变换矩阵获取旋转

> ID：12657710
> 
> 赞同：3
> 
> 时间：2012-09-30T00:36:36.863
> 
> 标签：matrix, rotation

假设我有一个二维旋转矩阵：

```
cos(t) -sin(t) 0
sin(t)  cos(t) 0
  0       0    1 
```

你如何检索正确的旋转角度？

如果在第一个元素上使用 acos，则只能得到 0 和 pi 之间的值。问题是如果`t`小于 0，你会怎么做（当然我不知道 t ;)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:42:00.777

大多数 C 系列编程语言中的函数`atan2()`同时采用 ay 和 x 值并计算它们之间比率的反正切，同时考​​虑这两个项的符号以给出正确的全圆角。

`atan2( sin(t), cos(t) )`返回（大约）`t`在 (-pi,+pi] 范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T00:40:11.137

有无数个`t`可以满足`t + 2*pi()*n`整数的解 ( ) `n`。如果您使用`acos(cos(t))`，您将得到 0 和 pi 之间的结果，但如果您还检查`asin(sin(t))`，您将能够确定旋转是顺时针还是逆时针。

# ruby-on-rails - 使用 Rails 的 Yahoo API POST

> ID：12657720
> 
> 赞同：0
> 
> 时间：2012-09-30T00:38:14.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, yahoo-api

我正在使用 yahoo Fantasy Sports API (http://developer.yahoo.com/fantasysports/guide) 并尝试通过在查询字符串中发送带有特定联赛/球队/球员的发布请求来添加球员。出于某种原因，即使我尝试了多种方法来指定此请求，因为 post rails 正在发出 GET 请求。谁能给我一些关于如何解决这个问题的想法？谢谢！

```
Route:
  resources :free_agents do
    post 'add_nfl_player', :on => :collection
   end

Method:
 def add_nfl_player
  request_url= "my query string"                                                                                            
  access_token = session[:access_token]
  response = access_token.request(:post, request_url)
  data = Hash.from_xml(response.body)
  render :json => data
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:07:10.333

据我所知，这个 API 只支持 GET 请求。不过，我可能是错的。

你看过像`rest_client`（[https://github.com/archiloque/rest-client](https://github.com/archiloque/rest-client)）这样的宝石吗？我不确定我是否真的遵循您提出的代码。如果`rest_client`对您不起作用，请尝试使用更通用的 HTTP 客户端，例如 HTTParty ( [https://github.com/jnunemaker/httparty](https://github.com/jnunemaker/httparty) )。

问候，

凯尔

# c# - 如何防止在 C# for ASP.NET 中转义文本？

> ID：12657722
> 
> 赞同：0
> 
> 时间：2012-09-30T00:38:51.697
> 
> 标签：c#, asp.net, escaping

我有以下代码为我为 ASP.NET 编写的 Web 应用程序的浏览器提示添加了一个换行符：

```
RectangleHotSpot rhs = new RectangleHotSpot();
rhs.HotSpotMode = HotSpotMode.Navigate;
rhs.AlternateText = "Line one&#013;Line Two"; //New-line to conform with FF
rhs.NavigateUrl = "my URL";

ImageMap.HotSpots.Add(rhs); 
```

但由于某种原因，“rhs.AlternateText”被转义为：

> “第一行&#013;第二行”

当我在网络浏览器中查看源代码时。（我不得不在上面添加空格，因为这个网站也逃脱了它：）

有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:26:18.653

尝试这样的事情：

```
 public class RectangleHotSpot : System.Web.UI.WebControls.HotSpot
{
    private string _strAlt;
    public override string AlternateText
    {
        get
        {
            return _strAlt;
        }
        set
        {
            this._strAlt = value;
        }
    }

    public override string GetCoordinates()
    {
        return String.Empty; // You'll need to fill this in.
    }

    protected override string MarkupName
    {
        get { return String.Empty; } // This too.
    }
} 
```

GetCoordinates 和 MarkupName 作为抽象成员的一部分是必需的，但我不熟悉 Rectangle Hot Spot 类，所以我不确定你会在那里替换什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T00:48:07.417

这是因为当它出现在属性引号中时，这是使用它的正确 (W3C) 方式。我不熟悉您使用的确切控件，但请参见下面的示例：

```
<img src="img/wrong.jpg" alt="This is the wrong way &#013; because the ampersand is not encoded properly for attributes" />

<img src="img/correct.jpg" alt="This is the right way &amp;#013 because the ampersand IS escaped and the browser will read &amp; as just an ampersand plus the code, which is what you want." /> 
```

# html - 通过 Websockets + NodeJS 而不是 AJAX 加载 Jade -> HTML

> ID：12657729
> 
> 赞同：4
> 
> 时间：2012-09-30T00:39:56.207
> 
> 标签：html, ajax, node.js, websocket, pug

想知道是否有一种干净正确的方法可以通过 websockets 而不是通过 $.ajax({...}) 请求加载 html 标记。我对 websockets 有点陌生，所以我想弄清楚它在哪里可以完全取代 AJAX 等等......

现在我只是在我的 NodeJS 应用程序中创建另一个“发布”路由器来加载 html，但我不知道所有这些是否都是必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:45:41.487

当然，您可以通过 websockets 将数据从 Node.js 服务器传递到您的客户端，并且一旦在客户端上，只需将其发布到页面。

例如，如果您使用的是 socket.io，您可以使用生成的 html 在服务器内部发出一个事件，该事件将在客户端代码中接收：

在服务器上：

```
socket.emit('yourFiringEvent', variableContainingYourRawHtml); 
```

在 JavaScript 客户端上：

```
socket.on('yourFiringEvent', function(htmlResult) {
    $("#yourContainerId").html(htmlResult); //jQuery flavour ;-)
}); 
```

当您的客户端代码从服务器接收到事件时，将在*HtmlResult*内的*variableContainingYourRawHtml上加载数据*

 *如果您不使用它，我建议使用 socket.io 库来使用 websocket，它非常强大且简单：

[http://socket.io/](http://socket.io/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:13:16.110

如果您想在客户端和服务器之间保持双向连接，则主要需要 websocket，这对于实时应用程序（如聊天、股票营销、电子学习等）很有用。

如果您需要加载 html 标记，则无需从客户端到服务器多次来回加载内容并提供服务，这将是一种非常优雅且不浪费的方式。

如果您不想将额外的有效负载传递给服务器，您还可以使用获取路由和 $.get ajax 请求。*

# python - Python 代码在 2.7 中编译，而不是在 3.2 中

> ID：12657733
> 
> 赞同：1
> 
> 时间：2012-09-30T00:41:00.807
> 
> 标签：python, python-3.x

我现在正在做 Google 的 Python 教程，并且正在完成文件 list1.py。

我应该`def match_ends(words)`用我自己的代码填写该部分，该代码应该计算输入中有多少单词`words`同时具有：超过 2 个字母以及相同的开头和结尾字母。

当我运行我使用 python 2.7 编写的代码时，它运行良好。但是当我使用 3.2 运行它时，它没有。此外，当我在 IDLE 3.2 中键入它说有问题的行时，麻烦的行运行良好。

这是 list1.py：

```
def match_ends(words):
  count = 0
  for x in words:
    if len(x) >= 2 and x[0] == x[len(x)-1]:
        count += 1
  return count
def test(got, expected):
  if got == expected:
    prefix = ' OK '
  else:
    prefix = '  X '
  print('%s got: %s expected: %s' % (prefix, repr(got), repr(expected)))
def main():
  print('match_ends')
  test(match_ends(['aba', 'xyz', 'aa', 'x', 'bbb']), 3)
  test(match_ends(['', 'x', 'xy', 'xyx', 'xx']), 2)
  test(match_ends(['aaa', 'be', 'abc', 'hello']), 1)
if __name__ == '__main__':
  main() 
```

当我在 Python 2.7 的命令行中运行它时，它工作正常，输出：

```
 OK  got: 3 expected: 3
 OK  got: 2 expected: 2
 OK  got: 1 expected: 1 
```

当我在 Python 3.2 的命令行中运行它时，它不起作用，输出：

```
 File "D:\Projects\Programming\Python\Tutorials\Google Python Class\google-python-exercises\basic\list1.py", line 26
    if len(x) >= 2 and x[0] == x[len(x)-1]:
                                          ^
TabError: inconsistent use of tabs and spaces in indentation 
```

最后，当我使用 IDLE 3.2 时，我得到：

```
>>> def match_ends(words):
    count = 0
    for x in words:
        if len(x) >= 2 and x[0] == x[len(x)-1]:
            count += 1
    return count

>>> match_ends(["heh", "pork", "veal", "sodas"])
2 
```

我对 Python 非常陌生，生成的大多数错误都需要一些时间才能弄清楚，但我已经坚持了一段时间。我想不通。为什么它不能在 Python 3.2 中工作，并且只有在我执行命令行版本时才能工作？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T00:51:36.907

您可能正在混合制表符和空格字符，这在 Python 3.x 中不再允许。您可以通过在文本编辑器中显示空白字符来解决此问题。

> 如果源文件混合制表符和空格的方式使含义取决于空格中制表符的价值，则缩进会被拒绝；在这种情况下会引发 TabError。

引自：[http ://docs.python.org/py3k/reference/lexical_analysis.html#indentation](http://docs.python.org/py3k/reference/lexical_analysis.html#indentation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T00:46:53.677

第三行以两个空格开头，而第四行以一个制表符开头。我猜 Python 2 比 Python 3 更能容忍不一致。

# php - PHP中的简单递归函数不起作用

> ID：12657746
> 
> 赞同：0
> 
> 时间：2012-09-30T00:43:41.633
> 
> 标签：php, recursion

我正在尝试使用 PHP 中的以下函数获取给定子类别的父类别。

```
 require_once("Connection.php");
    $flag=true;

    function get_parent_id($cat_id, $parent_id)
    {         
        if ($parent_id==0)
        { 
            return($cat_id);
        }
        else if ($flag==true)
        {                           
            $data1=mysql_query("select parent_id from category where cat_id=" + $cat_id);

            while($row = mysql_fetch_assoc($data1)) 
            {   
                $parent_id=$row['parent_id'];
            }
            $flag = false;                             
        }
        else if ($flag==false)
        {                
            $data2=mysql_query("select cat_id from category where cat_id=" + $parent_id);

            while($row = mysql_fetch_assoc($data2)) //The warning comes from here.
            {   
                $cat_id=$row['cat_id'];
            }                                                           
            $flag = true;            
        }           

        $cat_id = get_parent_id($cat_id, $parent_id);           
        return($cat_id);
    }   
}

echo get_parent_id($ed_id, $parent_id); //Call the above function. 
```

它总是提示以下警告。

```
 Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL 
 result resource in C:\wamp\www\zoom\Category.php on line 492 
```

即使 SQL 中没有错误。包含的文件`Connection.php`在所有其他页面上也可以正常工作。我完全不明白为什么会这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T00:51:42.880

字符串与 连接`.`，而不是`+`。

[字符串运算符](http://us.php.net/manual/en/language.operators.string.php)

# php - 学说架构创建找不到常量

> ID：12657748
> 
> 赞同：3
> 
> 时间：2012-09-30T00:44:55.587
> 
> 标签：php, orm, symfony, doctrine-orm, schema

我收到以下错误：

> “语义错误”找不到常量 inverseJoinColumns，属性 Test\NewsBundle\Entity\Post::$tags。

尝试使用学说生成模式时，感谢任何帮助。

```
 /**
    * @ORM\ManyToMany(targetEntity="Tag")
    * @ORM\JoinTable(name="post_tag",
    *   joinColumns={@ORM\JoinColumn(name="postID", referencedColumnName="id")},
    *   inverseJoinColumns{@ORM\JoinColumn(name="tagID", referencedColumnName="id")}
    * )
    * 
    * @var ArrayCollection $tags
    */
    protected $tags; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:07:53.537

您缺少一个等号：

```
inverseJoinColumns={@ORM\JoinColumn(name="tagID", referencedColumnName="id")} 
```

# java - java for循环金字塔

> ID：12657749
> 
> 赞同：0
> 
> 时间：2012-09-30T00:44:57.423
> 
> 标签：java, for-loop

我想用一个字符串创建一个循环，以便在每个连续循环中，不会显示上一行的最后一个字符和第一个字符。我还尝试在每行旁边打印每个循环的长度。它看起来像一个倒置的金字塔。

我有这个：

```
 for(int scounter = fullName.length(); scounter > 0; scounter--)
    for (String name : fullName)
    for(int counter = 0; counter < fullName.length(); counter++)

     System.out.println(scounter + "[ " + fullName.substring(0, fullName.length() counter)+ " ]"); 
```

它打印如下内容：

```
 24******
   24****
   24**
   24* 
```

然而，我正在寻找类似的东西：

```
 7*******
     5*****
      4***
       1* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:01:16.750

```
String str = "*******";
for (int i = 0, l = str.length(); i <= l/2; i++) {
  String line = str.substring(i, l - i);
  System.out.printf("%" + (i + 1) + "d%s\n", line.length(), line);
} 
```

这将[打印](http://ideone.com/OH7f5)：

```
7*******
 5*****
  3***
   1* 
```

我假设您的意思是，`3`而不是`4`在您的示例中，也就是说，您想要减少`2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T01:27:48.550

我开始研究这个问题，发现我的解决方案与 Joao 的略有不同。希望这可以帮助！

```
public class pyramid
{

public static void main(String[] args)
{
    for(int i=0, sz=args[0].length();i<sz; ++i,--sz)
    {
      System.out.printf("%"+(i+1)+"d%s\n", sz-i, args[0].substring(i,sz));
    }
}

} 
```

根据请求调用：

```
java pyramid abcdefg
7abcdefg
 5bcdef
  3cde
   1d

java pyramid abcdef
6abcdef
 4bcde
  2cd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:58:35.410

您的示例与您的问题中的单词不匹配，因此这是一种按照我理解的根据您的单词行事的方法：

```
public void pyramid(String text) {
    int len = text.length();
    int start = 0;
    while (start < len) {
        for (int i = 0; i < start; ++i) {
            System.out.print(" ");
        }
        System.out.println(text.substring(start, len));
        ++start;
        --len;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-18T09:59:54.727

```
 for(int i = 1; i<=4; i++) {
        for(int k = 3;k>=i; k--){
                System.out.print(" ");
            }
    for(int j = 1; j<=i; j++){
            System.out.print("*");
        }
        for(int n = 2; n<=i;n++){
            System.out.print("*");
        }   

        System.out.println(" ");
    }
        for(int m = 1 ;m<=3; m++){
            for(int o = 1;o<=m; o++){
                System.out.print(" ");
            }
            for(int p = 3;p>=m;p--){
                System.out.print("*");
            }
            for(int q = 2;q>=m;q--){
                System.out.print("*");      
            }   

            System.out.println();
        }   
} 
```

}

# ruby-on-rails - rails 按 created_at 日期分组记录

> ID：12657753
> 
> 赞同：8
> 
> 时间：2012-09-30T00:46:14.827
> 
> 标签：ruby-on-rails

所以我有一个模型，我想检索记录并按 created_at 字段的日期对它们进行分组。但是 created_at 是一个日期时间字段，我只对日期部分感兴趣。所以我正在寻找类似二维数组的东西，第一层是一个以日期字符串为键的散列，第二层是带有记录的数组。我该怎么做？

```
{
"9/28/2012" => [记录，记录，记录]，
"9/29/2012" => [记录，记录，记录]，
"9/30/2012" => [记录，记录，记录]
}

```

最重要的是，如果我希望将上述安排应用于从此模型中检索到的所有记录，我应该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T01:51:28.380

ActiveRecord`group`方法将满足您的需求。在您的情况下，问题将`created_at`在于使用哪个日期时间，以及您对按日期分组的约束。由于将日期时间转换为日期是特定于数据库的，因此代码也需要特定于数据库。

对于 MySql，你可以这样做：

```
Model.group("date(table_name.created_at)") 
```

对于 SQLite，您可以执行以下操作：

```
Model.group("strftime('%Y-%m-%d', table_name.created_at)") 
```

对于 PostgreSQL：

```
Model.group("table_name.created_at::date") 
```

不幸的是，此代码不可移植，但这对您来说可能无关紧要。如果是这样，您始终可以构建一个包装方法，根据您的 DBMS 选择正确的转换语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-21T12:53:25.500

在 ActiveRecord 上，您可以这样做：

```
2.6.4 :036 > User.group('created_at::date').count

   (5.3ms)  SELECT COUNT(*) AS count_all, created_at::date AS created_at_date FROM "users" GROUP BY created_at::date
 => {Sat, 27 Feb 2021=>5865 
```

# c++ - 为什么此代码会导致访问冲突？

> ID：12657754
> 
> 赞同：4
> 
> 时间：2012-09-30T00:46:14.817
> 
> 标签：c++, inheritance, boost, sdl

这个函数工作得很好，或者编译器/调试器告诉我

```
void GUIManager::init(ToScreen* tS)
{
    toScreen = tS;
    loadFonts();
    GUI_Surface = SDL_SetVideoMode( toScreen->width, toScreen->height, 32, SDL_SWSURFACE );
    components.push_back(&PlainText("Hello, World!", font, -20, -40));

} 
```

在这里，第一个函数调用引发了访问冲突错误。调试器没有显示任何问题。我没有机会调试组件[0]，因为程序在这里停止。

```
void GUIManager::draw() 
{
    // This line here is the problem
    components[0].draw(GUI_Surface);
    // This line here is the problem

    SDL_BlitSurface(GUI_Surface, NULL, toScreen->Screen_Surface, NULL);
} 
```

如果需要，这是我的“组件”

```
boost::ptr_vector<GUIComponent> components; 
```

如果需要任何其他代码，请告诉我。也许是纯文本或 GUIComponent

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T01:02:13.520

而不是将指针推送到临时的，它在此行之后结束其生命周期：

```
components.push_back(&PlainText("Hello, World!", font, -20, -40)); 
```

您应该推送动态对象，只要`components`：

```
components.push_back(new PlainText("Hello, World!", font, -20, -40)); 
```

见文档： http: [//www.boost.org/doc/libs/1_51_0/libs/ptr_container/doc/ptr_sequence_adapter.html#modifiers](http://www.boost.org/doc/libs/1_51_0/libs/ptr_container/doc/ptr_sequence_adapter.html#modifiers)

```
void push_back( T* x ); 
    Requirements: x != 0 
    Effects: Inserts the pointer into container and takes ownership of it
    Throws: bad_pointer if x == 0
    Exception safety: Strong guarantee 
```

# ruby-on-rails - 在 HAML / Rails 中使用嵌套数组时遇到问题

> ID：12657762
> 
> 赞同：0
> 
> 时间：2012-09-30T00:48:46.137
> 
> 标签：ruby-on-rails, mongodb, mongomapper

我得到了 {"crop"=>"Carrots", "amount"=>12.15}:BSON::OrderedHash' 的“未定义方法 `crop”，视图如下：

```
%table
  %tr
    %th Date of Harvest
    %th Crops
    %th Photo
    %th
    %th
    %th
    %th

  - @harvests.each do |harvest|
    %tr
      %td= harvest.created_at
      %td  
        - harvest.harvested_crops.each do |harvested_crop|
          %tr  
            %td= harvested_crop.crop
            %td= harvested_crop.amount
      %td  
      %td= harvest.photo
      %td= link_to 'Show', harvest
      %td= link_to 'Edit', edit_harvest_path(harvest)
      %td= link_to 'Destroy', harvest, method: :delete, data: { confirm: 'Are you sure?' } 
```

模型如下：

```
class Harvest

        include MongoMapper::Document

        #references
        key :photo,             String  #photo of combined harvest (many crops)
        key :harvested_crops,   Array
        key :user_id,           ObjectId

        timestamps!

        #Validations
        validates_presence_of :harvested_crops
end 
```

来自shell的数据如下：

```
> db.harvests.find()
{ "_id" : ObjectId("5067846437bca62bccc3729d"), "user_id" : "5067844537bca62bccc3729b", "photo" : "mybumpercrop.jpg", "harvested_crops" : [     {   "crop" : "Carrots",     "amount" : 12.15 },     {   "crop" : "Apples",  "amount" : 32.55 },     {   "crop" : "Potatoes",    "amount" : 12.44 },     {   "crop" : "Spinach",     "amount" : 1.23 } ] }
{ "_id" : ObjectId("5067846f37bca62bccc3729e"), "user_id" : "5067844637bca62bccc3729c", "photo" : "carrotsnspuds.jpg", "harvested_crops" : [    {   "crop" : "Carrots",     "amount" : 1112.15 },   {   "crop" : "Potatoes",    "amount" : 3212.44 } ] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:24:49.587

它看起来像是`harvested_crops`一个 Hash 对象数组，每个对象包含两个键，`"crop"`并且`"amount"`. `crop`标准的 Hash 对象没有方法；相反，您可以像数组一样使用 [] 运算符来访问内容。所以试试：

```
%td= harvested_crop["crop"]
%td= harvested_crop["amount"] 
```

# map - 我可以像 Java 互操作一样使用 require :吗？

> ID：12657763
> 
> 赞同：3
> 
> 时间：2012-09-30T00:49:31.200
> 
> 标签：map, clojure, namespaces

> **可能重复：**
> [在 clojure 中为 java 包名起别名](https://stackoverflow.com/questions/1698209/aliasing-a-java-package-name-in-clojure)

如果我有这样的 Java API：

```
com.very.long.and.boring.names.Abc
com.very.long.and.boring.names.Def
com.very.long.and.boring.names.Ghi 
```

我可以使用 Clojure (1.4.0) 中的“假”命名空间，如下所示：

```
(foo/Abc)
(foo/Def)
(foo/Ghi) 
```

我不想*（使用 'com.very.long.and.boring.names）*因为 Abc / Def / Ghi 可能与我的 Clojure 函数发生冲突。所以基本上我想将“com.very.long.and.boring.names”“映射”到“foo”。

我在 REPL 尝试了几件事，但无法成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T06:19:16.367

我不相信这个功能还存在。

但是，如果目的是在运行时使用 Class 对象，您总是可以这样做：

```
(def s java.lang.String)

(.newInstance s)
=> "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T01:57:35.837

我想你基本上是在问同样的问题：

[在clojure中为java包名称起别名](https://stackoverflow.com/questions/1698209/aliasing-a-java-package-name-in-clojure)

显然该功能实际上还不存在......

但是，类名通常以大写字母开头，而函数名按照惯例是小写的。除非 Java 类或您的函数不遵循这些约定，否则您不应该有任何冲突。

# macos - NASM Hello World Mac OS X 中的段错误或总线错误

> ID：12657764
> 
> 赞同：2
> 
> 时间：2012-09-30T00:49:46.167
> 
> 标签：macos, segmentation-fault, nasm, bus-error

我正在用 NASM 编写 Hello World，我可以让它回`Hello World`显到控制台，但是如果我不使用 Make 运行它，程序会出现段错误。

使用 Makefile 跟踪：

```
$ make
nasm -f macho -o hello.o --prefix _ hello.asm
ld -o hello hello.o -arch i386 -lc -macosx_version_min 10.6 -e _start -no_pie
./hello
Hello World! 
```

使用手动命令进行跟踪：

```
$ nasm -f macho -o hello.o --prefix _ hello.asm
$ ld -o hello hello.o -arch i386 -lc -macosx_version_min 10.6 -e _start -no_pie
$ ./hello 
Segmentation fault: 11 
```

你好.asm：

```
[bits 32]

section .data

msg: db "Hello World!", 0

section .text

global start
extern puts
extern exit

start:

push msg
call puts
add esp, 4

push 0
call exit 
```

生成文件：

```
# Linux defaults

FORMAT=-f elf
MINV=
ARCH=-arch i386
LIBS=
RUN=./
EXECUTABLE=hello
PREFIX=
ENTRY=
PIE=

# Windows
ifeq (${MSYSTEM},MINGW32)
    FORMAT=-f win32
    EXECUTABLE=hello.exe
    PREFIX=--prefix _
    ENTRY=-e _start
    ARCH=
    LIBS=c:/strawberry/c/i686-w64-mingw32/lib/crt2.o -Lc:/strawberry/c/i686-w64-mingw32/lib -lmingw32 -lmingwex -lmsvcrt -lkernel32
    ENTRY=
    RUN=
endif

# Mac OS X
ifeq ($(shell uname -s),Darwin)
    FORMAT=-f macho
    PREFIX=--prefix _
    ENTRY=-e _start
    LIBS=-lc
    MINV=-macosx_version_min 10.6
    PIE=-no_pie
endif

all: test

test: $(EXECUTABLE)
    $(RUN)$(EXECUTABLE)

$(EXECUTABLE): hello.o
    ld -o $(EXECUTABLE) hello.o $(ARCH) $(LIBS) $(MINV) $(ENTRY) $(PIE)

hello.o: hello.asm
    nasm $(FORMAT) -o hello.o $(PREFIX) hello.asm

clean:
    -rm $(EXECUTABLE)
    -rm hello.o 
```

眼镜：

*   ld 64-134.9
*   LLVM 3.1svn
*   NASM 0.98.40
*   制作 3.81
*   Xcode 4.5
*   Mac OS X 10.8.1
*   MacBook Pro 2009

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:16:01.573

两件事，你的 hello world 字符串不是 NULL 终止的，正如我在另一篇文章中提到的，当你使用 C 函数时，你必须在每次调用后调整 esp

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T01:14:08.720

您两次拆除了堆栈框架：

```
mov esp, ebp
pop ebp
...
leave 
```

你只需要其中一个，因为`leave`它相当于`mov esp, ebp; pop ebp`.

有关几个示例 hello world 程序，请参见[http://michaux.ca/articles/assembly-hello-world-for-os-x 。](http://michaux.ca/articles/assembly-hello-world-for-os-x)请注意，所有这些都显式退出程序

```
; 2a prepare the argument for the sys call to exit
push dword 0              ; exit status returned to the operating system

; 2b make the call to sys call to exit
mov eax, 0x1              ; system call number for exit
sub esp, 4                ; OS X (and BSD) system calls needs "extra space" on stack
int 0x80                  ; make the system call 
```

因为你不能`ret`从一个入口点（没有什么可以返回）。

另请注意，如果您调用该函数`main`并且不提供 的`e`选项`ld`，则将`libc`调用 的入口点。在这种情况下，这是允许的，`ret`因为您将控制权交还给（代表您`libc`调用）。`exit`

# javascript - 提高 Javascript 性能的技巧

> ID：12657766
> 
> 赞同：0
> 
> 时间：2012-09-30T00:50:10.607
> 
> 标签：javascript, performance, dom

我有一个要求，我需要根据另一个表中的相应行来设置表的每一行的高度。该表大约有 500 行。我编写了下面的 Javascript，但性能在 8000 毫秒左右非常糟糕。我怎样才能让它更快，感谢任何提示。

```
 var start = new Date().getTime();

 var rows = document.getElementById("table1").rows;
 var dup_rows = document.getElementById("table2").rows;
 var num_rows = rows.length;
 var num_dup = dup_rows.length;
 for (var i = 0; i < num_rows; ++i) {
var hg = rows[i].offsetHeight;
    rows[i].style.height = hg +'px';
dup_rows[i].style.height = hg +'px';
   }

var end = new Date().getTime();
var time = end - start;
alert('Execution time: ' + time); 
```

根据在 DOM 之外编辑表的建议，我尝试了以下方法，但是当从 DOM 中删除表时，outerHeight / offsetHeight 返回 0。

```
 clone_small = $('#table2').clone();
      clone_main_tab = $('#table1').clone();
 $("#table2").remove();
 $("#table1").remove();

 $(clone_main_tab).find("tr").each(function(i) {
 var hg = 0;
 hg = $(this).offsetHeight;  // If I hard code the height it works
  // alert(hg);
 $(this).height(hg);
 clone_small.find("tr").eq(i).height(hg);

 }); 
```

如何在 DOM 之外设置这些行的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:52:45.080

从 DOM 中删除您正在修改的元素，然后在完成修改后重新插入它们。这可以防止浏览器在每次更改时都必须重排文档，仅在您全部完成后才执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T00:54:40.313

不是`dup_rows[i].style.height = rows[i].style.height`更好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:43:53.627

通过使用以下代码，我终于能够在性能上取得一些改进

```
 $clone_table1 = $('#table1').clone();
 $clone_table2 = $('#table2').clone();

 $('#table2').remove();
 $trow2 = $('#table1').find('tr');
 $trow = $clone_table1.find('tr');
 $trow3 = $clone_table2.find('tr');

 $trow.each(function(i) {
 var hg = 0;
 hg = $trow2.eq(i).outerHeight();
 $(this).height(hg);
 $trow3.eq(i).height(hg);
 });

$parent2.append($clone_table2);
$('#table1').remove();
$parent1.append($clone_table1); 
```

# cuda - 将 Cuda 4.0 项目更新到 Cuda 4.2

> ID：12657767
> 
> 赞同：1
> 
> 时间：2012-09-30T00:50:15.593
> 
> 标签：cuda

我有一个用 CUDA 4.0 测试过的 VS2010 项目，今天我安装了 CUDA 4.2，我想更新这个项目，问题是当我尝试运行该项目时，它要求我提供 cudart32_40_17.dll，但因为这是 CUDA 4.2我的文件夹中只有 (C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin) cudart32_42_9.dll。我已经将 Build Customizations 设置为 Cuda 4.2，它编译没有任何问题，唯一的问题是当我尝试运行它时，应用程序要求我提供以前版本的 dll。有没有办法指定项目必须使用 cudart32_42_9.dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:35:22.167

项目中有另一个库是使用 Cuda 4.0 编译的，因此我必须使用 Cuda 4.2 重新编译该库（OpenCV）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:49:35.163

一种方法是，您可以使用 nvidia parallel nsight 来更改它。另一个是重置 cuda 链接器指向 CUDA4.2 ，编译器使用 4.2 nvcc。祝你好运

# java - 获取图像周围的像素颜色

> ID：12657776
> 
> 赞同：1
> 
> 时间：2012-09-30T00:51:48.533
> 
> 标签：java, pixel

我有一张图片，我想出了如何使用机器人和 getPixelColor() 来获取某个像素的颜色。图像是我正在控制的一个角色，我希望机器人不断地扫描图像，并告诉我它周围的像素是否等于某种颜色。这是可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:39:08.183

我自己，我会使用机器人提取比“字符”大一点的图像，然后分析获得的 BufferedImage。当然，细节将取决于你的程序的细节。可能最快的方法是获取 BufferedImage 的 Raster，然后获取那个 dataBuffer，然后获取那个数据，然后分析返回的数组。

例如，

```
// screenRect is a Rectangle the contains your "character" 
// + however many images around your character that you desire
BufferedImage img = robot.createScreenCapture(screenRect);
int[] imgData = ((DataBufferInt)img.getRaster().getDataBuffer()).getData();

// now that you've got the image ints, you can analyze them as you wish.
// All I've done below is get rid of the alpha value and display the ints.
for (int i = 0; i < screenRect.height; i++) {
  for (int j = 0; j < screenRect.width; j++) {
    int index = i * screenRect.width + j;
    int imgValue = imgData[index] & 0xffffff;
    System.out.printf("%06x ", imgValue );
  }
  System.out.println();
} 
```

# php - CakePHP cakeshell 错误“注意：未初始化的字符串偏移量：0 in”

> ID：12657777
> 
> 赞同：3
> 
> 时间：2012-09-30T00:51:53.957
> 
> 标签：php, linux, shell, cakephp

我正在尝试运行我的 cake shell 脚本，但输出如下所示：

```
-bash-3.2$ ../cake/console/cake audit
../cake/console/cake: line 30:/root/site/app: is a directory
Array
(
    [0] => /root/site/cake/console/cake.php
    [1] => -working
    [2] => 
    [3] => audit
)

Notice: Uninitialized string offset: 0 in /root/site/cake/console/cake.php on line 550 
```

我究竟做错了什么？以下是该文件的内容：

### 蛋糕.php

```
function __parseParams($params) {
    $count = count($params);
    for ($i = 0; $i < $count; $i++) {
        if (isset($params[$i])) {
            if ($params[$i]{0} === '-') {
                $key = substr($params[$i], 1);
                $this->params[$key] = true;
                unset($params[$i]);
                if (isset($params[++$i])) {
                    if ($params[$i]{0} !== '-') {//This is line 550
                        $this->params[$key] = str_replace('"', '', $params[$i]);
                        unset($params[$i]);
                    } else {
                        $i--;
                        $this->__parseParams($params);
                    }
                }
            } else {
                $this->args[] = $params[$i];
                unset($params[$i]);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:42:02.930

## 关注第一个错误

每当调试损坏的东西时，最好关注第**一个错误**而不是它的后果。第一条错误消息是这一行：

> 第 30 行：/root/site/app: 是一个目录

它来自 cake bash 脚本，在调用 php.ini 之前。最新的 1.3 版本中的那行[是空白](https://github.com/cakephp/cakephp/blob/1.3/cake/console/cake#L30)的，因此不清楚您使用的是什么特定版本的 cake，但它不是最新的 1.3 版本。

上述错误的后果是调用的命令如下：

```
exec php -q "/root/site/cake/console/"cake.php -working "" "audit"
                                                        ^^ 
```

传递给 cake.php 的参数指定工作目录是一个空字符串，这是异常的，后来导致未定义的索引错误。

## 升级治愈所有病痛

最有可能的是，可以通过从您正在使用的同一发布周期的最新版本复制 cake.php 来解决此特定错误。

还可以考虑简单地将 CakePHP 本身升级到最新版本（从使用的同一主要版本），这可能会解决这个特定问题，以及其他问题 - 如果最近有安全版本，则尤其相关。

# mysql - 修剪/修剪 Solr 索引（从 MySQL 导入，每天修剪）

> ID：12657781
> 
> 赞同：1
> 
> 时间：2012-09-30T00:53:14.273
> 
> 标签：mysql, solr, lucene

我正在运行 Solr，它每分钟使用 DIH 从 MySQL 导入数据。现在 MySQL 每天都会对其表进行修剪/修剪。

**问题：**我应该如何修剪 Solr 的索引？我是进行完全导入，还是删除旧文档然后提交？

目前 Solr 每天新增文档约 20,000 个，预计每天将增加到 100,000 个新文档。所以这是每天将从 MySQL 和 Solr 中删除的文档数量。索引中随时会有大约 200,000 份文档，预计将增加到 1,000,000 份。

# c++ - 跨多个操作系统的网络

> ID：12657787
> 
> 赞同：1
> 
> 时间：2012-09-30T00:54:22.713
> 
> 标签：c++, networking, operating-system

我知道 Winsock 用于 Windows 操作系统上的网络，而 BSD 用于 Mac OS 和 Unix。是否有某种类型的“通用”套接字可以在提到的三个操作系统中的任何一个上工作？或者服务器是否必须以某种方式将两个套接字合并到其中以与不同操作系统的客户端兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:05:58.733

套接字是套接字，它们只是泵送数据。因此，您可以在 Windows 上使用 Java 编写服务器，在 BSD 上使用 C 编写客户端，它们仍然可以相互通信。

对于不使用 3rd 方库的交叉编译，您可以通过使用一些#ifdefs 或多或少轻松地做到这一点，请参阅更多@ [http://tangentsoft.net/wskfaq/articles/bsd-compatibility.html](http://tangentsoft.net/wskfaq/articles/bsd-compatibility.html)

另一种方法是使用 3rd 方库，这可能是最简单的方法，并且可以发挥其他优势，例如更高级的功能等。想到了 UDT，但还有其他的。( [http://udt.sourceforge.net/](http://udt.sourceforge.net/) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T01:06:22.607

这里有个小秘密：Winsock 基于 BSD 套接字。除了初始化和关闭 winsock 库之外，BSD 和 Windows 套接字之间的实际网络代码库是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T01:09:19.100

Winsock 和 BSD 套接字是两个相似的 API 的名称，它们都实现相同的东西：TCP/IP 套接字，它们又是 TCP 连接或 UDP 数据报流的端点。因为实际的传输是由 TCP/IP RFC 定义的，所以它们可以互操作。因此没有必要在 Unix 上实现 Winsock 或在 Windows 上实现 BSD 套接字。实际上，后者或多或少是 Winsock 的样子，以这里和那里的一些误解为模。

简而言之，您的问题没有任何意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T01:05:47.387

如果您避免使用一些更高级的功能，Winsock 与 BSD 兼容。诀窍是在处理非字节数据时尊重字节顺序。根据您的架构和语言，浮点数可能会变得棘手。Char 数组将使事情保持可预测性，但这可能是有限的。如果遵循协议，您只需要一台服务器。

# javascript - 尝试设置一个范围变量，该变量将使用 jquery 更改函数进行更改

> ID：12657788
> 
> 赞同：0
> 
> 时间：2012-09-30T00:54:23.790
> 
> 标签：javascript, jquery, angularjs, color-picker

我不确定我这样做是否正确。我正在尝试通过使用颜色选择器选择颜色来设置 div 的背景。我有这个[jsfiddle](http://jsfiddle.net/ADukg/835/)来展示我想要做什么。但是 TargetColor 似乎没有约束力。我会以错误的方式解决这个问题吗？有人对如何通过示例进行此操作有任何建议吗？最终的想法是在颜色更改时更改页面上所有容器的颜色（容器的数量可能非常多，并且可以制作新的容器，这就是使用样式标签的原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:00:16.873

这是一个处理该指令的小提琴：http: [//jsfiddle.net/g/LAJCa/](http://jsfiddle.net/g/LAJCa/)

正如评论中提到的，您不应该在指令之外进行 DOM 操作，如果您不遵守指南，您将不会从 Angular 中受益匪浅：http: [//docs.angularjs.org/guide/dev_guide.mvc。理解控制器](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)

# c# - 如何安全地保存用户名/密码（本地）？

> ID：12657792
> 
> 赞同：124
> 
> 时间：2012-09-30T00:55:13.650
> 
> 标签：c#, security, local

我正在制作一个 Windows 应用程序，您需要先登录。
账户信息由用户名和密码组成，需要保存在本地。
这只是安全问题，因此使用同一台计算机的其他人无法看到每个人的个人数据。
**保存这些数据的最佳/最安全的方法是什么？**

*我不想使用数据库，所以我尝试了一些资源文件。
但是由于我对此有点陌生，所以我并不完全确定我在做什么以及我应该在哪里寻找解决方案。*

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-09-30T01:38:52.893

如果您只是要验证/验证输入的用户名和密码，请使用[Rfc2898DerivedBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)类（也称为基于密码的密钥派生函数 2 或 PBKDF2）。这比使用三重 DES 或 AES 等加密更安全，因为没有实用的方法可以从 RFC2898DerivedBytes 的结果返回密码。您只能从密码转到结果。请参阅[从密码字符串派生加密密钥和 IV 时可以使用密码的 SHA1 哈希作为盐吗？](https://stackoverflow.com/questions/12529574/is-it-ok-to-use-sha1-hash-of-password-as-a-salt-when-deriving-encryption-key-and)[有关 .Net 或字符串加密/解密](https://stackoverflow.com/questions/12338514/string-encrypt-decrypt-with-password-c-sharp-metro-style)的示例和讨论，使用密码 c# Metro Style for WinRT/Metro。

如果您要存储密码以供重复使用，例如将其提供给第三方，请使用[Windows 数据保护 API (DPAPI)](http://msdn.microsoft.com/en-us/library/ms995355.aspx)。这使用操作系统生成和受保护的密钥以及[三重 DES](http://en.wikipedia.org/wiki/Triple_DES)加密算法来加密和解密信息。这意味着您的应用程序不必担心生成和保护加密密钥，这是使用加密时的主要问题。

在 C# 中，使用[System.Security.Cryptography.ProtectedData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)类。例如，要加密一段数据，请使用[`ProtectedData.Protect()`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.protect.aspx)：

```
// Data to protect. Convert a string to a byte[] using Encoding.UTF8.GetBytes().
byte[] plaintext; 

// Generate additional entropy (will be used as the Initialization vector)
byte[] entropy = new byte[20];
using(RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider())
{
    rng.GetBytes(entropy);
}

byte[] ciphertext = ProtectedData.Protect(plaintext, entropy,
    DataProtectionScope.CurrentUser); 
```

安全地存储熵和密文，例如在具有权限设置的文件或注册表项中，以便只有当前用户可以读取它。要访问原始数据，请使用[`ProtectedData.Unprotect()`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.unprotect.aspx)：

```
byte[] plaintext= ProtectedData.Unprotect(ciphertext, entropy,
    DataProtectionScope.CurrentUser); 
```

请注意，还有其他安全注意事项。例如，避免将密码等机密存储为`string`. 字符串是不可变的，因为它们无法在内存中得到通知，因此查看应用程序内存或内存转储的人可能会看到密码。请改用[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)或 byte[] 并记住在不再需要密码时立即处理或归零它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-30T01:02:45.010

我以前用过这个，我认为为了确保凭证持续存在并且以最安全的方式是

1.  `ConfigurationManager`您可以使用类将它们写入应用程序配置文件
2.  `SecureString`使用类保护密码
3.  然后使用命名空间中的工具对其进行加密`Cryptography`。

我希望这个链接会有很大帮助：[点击这里](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-05-26T09:06:40.593

我想将字符串加密和解密为可读字符串。

这是 C# Visual Studio 2019 WinForms 中的一个非常简单的快速示例，基于`@Pradip`.

右键单击项目 > 属性 > 设置 > 创建`username`和`password`设置。

[![在此处输入图像描述](../Images/eb6e46b910d3063bbda23eadf429bbf2.png)](https://i.stack.imgur.com/Zn5NZ.png)

现在您可以利用刚刚创建的那些设置。在这里，我保存`username`并且`password`仅`password`在文件中它的可敬值字段中加密`user.config`。

文件中加密字符串的示例`user.config`。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <userSettings>
        <secure_password_store.Properties.Settings>
            <setting name="username" serializeAs="String">
                <value>admin</value>
            </setting>
            <setting name="password" serializeAs="String">
                <value>AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAAQpgaPYIUq064U3o6xXkQOQAAAAACAAAAAAAQZgAAAAEAACAAAABlQQ8OcONYBr9qUhH7NeKF8bZB6uCJa5uKhk97NdH93AAAAAAOgAAAAAIAACAAAAC7yQicDYV5DiNp0fHXVEDZ7IhOXOrsRUbcY0ziYYTlKSAAAACVDQ+ICHWooDDaUywJeUOV9sRg5c8q6/vizdq8WtPVbkAAAADciZskoSw3g6N9EpX/8FOv+FeExZFxsm03i8vYdDHUVmJvX33K03rqiYF2qzpYCaldQnRxFH9wH2ZEHeSRPeiG</value>
            </setting>
        </secure_password_store.Properties.Settings>
    </userSettings>
</configuration> 
```

[![在此处输入图像描述](../Images/a51ebb7638f055fe1239076e2e883f21.png)](https://i.stack.imgur.com/Mi5JD.png)

完整代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Security;
using System.Security.Cryptography;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace secure_password_store
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Exit_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void Login_Click(object sender, EventArgs e)
        {
            if (checkBox1.Checked == true)
            {
                Properties.Settings.Default.username = textBox1.Text;
                Properties.Settings.Default.password = EncryptString(ToSecureString(textBox2.Text));
                Properties.Settings.Default.Save();
            }
            else if (checkBox1.Checked == false)
            {
                Properties.Settings.Default.username = "";
                Properties.Settings.Default.password = "";
                Properties.Settings.Default.Save();
            }
            MessageBox.Show("{\"data\": \"some data\"}","Login Message Alert",MessageBoxButtons.OK, MessageBoxIcon.Information);
        }
        private void DecryptString_Click(object sender, EventArgs e)
        {
            SecureString password = DecryptString(Properties.Settings.Default.password);
            string readable = ToInsecureString(password);
            textBox4.AppendText(readable + Environment.NewLine);
        }
        private void Form_Load(object sender, EventArgs e)
        {
            //textBox1.Text = "UserName";
            //textBox2.Text = "Password";
            if (Properties.Settings.Default.username != string.Empty)
            {
                textBox1.Text = Properties.Settings.Default.username;
                checkBox1.Checked = true;
                SecureString password = DecryptString(Properties.Settings.Default.password);
                string readable = ToInsecureString(password);
                textBox2.Text = readable;
            }
            groupBox1.Select();
        }

        static byte[] entropy = Encoding.Unicode.GetBytes("SaLtY bOy 6970 ePiC");

        public static string EncryptString(SecureString input)
        {
            byte[] encryptedData = ProtectedData.Protect(Encoding.Unicode.GetBytes(ToInsecureString(input)),entropy,DataProtectionScope.CurrentUser);
            return Convert.ToBase64String(encryptedData);
        }

        public static SecureString DecryptString(string encryptedData)
        {
            try
            {
                byte[] decryptedData = ProtectedData.Unprotect(Convert.FromBase64String(encryptedData),entropy,DataProtectionScope.CurrentUser);
                return ToSecureString(Encoding.Unicode.GetString(decryptedData));
            }
            catch
            {
                return new SecureString();
            }
        }

        public static SecureString ToSecureString(string input)
        {
            SecureString secure = new SecureString();
            foreach (char c in input)
            {
                secure.AppendChar(c);
            }
            secure.MakeReadOnly();
            return secure;
        }

        public static string ToInsecureString(SecureString input)
        {
            string returnValue = string.Empty;
            IntPtr ptr = System.Runtime.InteropServices.Marshal.SecureStringToBSTR(input);
            try
            {
                returnValue = System.Runtime.InteropServices.Marshal.PtrToStringBSTR(ptr);
            }
            finally
            {
                System.Runtime.InteropServices.Marshal.ZeroFreeBSTR(ptr);
            }
            return returnValue;
        }

        private void EncryptString_Click(object sender, EventArgs e)
        {
            Properties.Settings.Default.password = EncryptString(ToSecureString(textBox2.Text));
            textBox3.AppendText(Properties.Settings.Default.password.ToString() + Environment.NewLine);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-30T01:03:19.050

DPAPI 就是为了这个目的。使用 DPAPI 对用户第一次输入的密码进行加密，将其存储在一个安全的位置（用户的注册表，用户的应用程序数据目录，都是一些选择）。每当应用程序启动时，检查位置以查看您的密钥是否存在，是否使用 DPAPI 解密并允许访问，否则拒绝它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-03T12:37:39.647

这仅适用于 Windows，因此如果您打算使用 dotnet core 跨平台，您将不得不寻找其他地方。请参阅[https://github.com/dotnet/corefx/blob/master/Documentation/architecture/cross-platform-cryptography.md](https://github.com/dotnet/corefx/blob/master/Documentation/architecture/cross-platform-cryptography.md)

# java - 设计蚀刻边框

> ID：12657794
> 
> 赞同：-1
> 
> 时间：2012-09-30T00:55:26.747
> 
> 标签：java, swing, border

我想设计一个以黑色为主题的 GUI，但我的蚀刻边框看起来是凸起的蚀刻类型。我想让它看起来降低蚀刻类型。我找不到颜色组合来做到这一点。我该怎么做？它看起来像这样，但不同的是背景是黑色的。

![他的形象](../Images/fb9e6150ca494865b796eb9d16e37fd7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:10:32.763

您是否尝试过使用 BevelBorder 代替？

```
 JPanel outerPanel = new JPanel();
  outerPanel.setBackground(Color.black);
  outerPanel.setPreferredSize(new Dimension(400, 400));
  outerPanel.setLayout(new BorderLayout());
  Border outsideBorder = BorderFactory.createEmptyBorder(5, 5, 5, 5);
  Border insideBorder = BorderFactory.createBevelBorder(BevelBorder.LOWERED);
  Border innerPanelBorder = BorderFactory.createCompoundBorder(outsideBorder , insideBorder );
  JPanel innerPanel = new JPanel();
  innerPanel.setBorder(innerPanelBorder);
  innerPanel.setOpaque(false);
  outerPanel.add(innerPanel); 
```

# javascript - 为什么我的网站没有更新文本颜色？

> ID：12657795
> 
> 赞同：1
> 
> 时间：2012-09-30T00:55:46.863
> 
> 标签：javascript, html, css

我最近开始使用 Webmin 管理我自己的 VPS。我将我的网站文件上传到服务器，一切都很好。我一直在使用 WAMP 更新本地 PC 上的网站，当我想将文件上传到服务器时，我这样做了，除了某些文本的“颜色”属性外，所有内容都可以正常工作。

当我在 localhost 通过 WAMP 浏览我的网站时，字体颜色很好。但是当我将确切的文件上传到我的服务器时，字体颜色是错误的。我已经尝试了 3 个浏览器，并多次清除了缓存，但文本不会改变颜色，我无法弄清楚是什么原因造成的。我试过用萤火虫查看导致字体颜色的原因，但我似乎无法弄清楚。

我的网站是luckylinks.net，出现问题的页面之一是[http://luckylinks.net/terms.html](http://luckylinks.net/terms.html)。该页面上的所有文本都应该是白色的，但它是黑色的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:43:46.457

事实证明，我只需要清除 CloudFlare 上的缓存。此外，要进行任何更新，您应该在应用更新之前在 CloudFlare 上进入开发模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T01:41:35.493

我看到白色。我注意到您的样式使用颜色名称“白色”-也许只是为了好玩而尝试更改为十六进制值？但看起来你有多个确认的人在看白色，所以这可能是一个缓存问题。尝试清除缓存，重新启动浏览器，并执行 shift+refresh。

```
color:#FFFFFF 
```

会是白色的。

# c - 多进程信号处理程序中的奇怪结果

> ID：12657797
> 
> 赞同：3
> 
> 时间：2012-09-30T00:56:07.687
> 
> 标签：c, signals, multiprocess

我有这个由 9 个进程组成的多进程程序。一个是产生 3 个信号生成过程和 4 个信号处理过程的主要过程。一是监控过程。现在我使用了两个信号 SIGUSR1 和 SIGUSR2。每个处理程序都可以处理 SIGUSR1 或 SIGUSR2。每当收到信号时，它们会将共享内存中信号 SIGUSR1 和 SIGUSR2 的计数增加 1。监控进程也接收到信号，因为信号被发送到进程组。它可以处理这两个信号并将其本地信号计数增加 1。每当达到 10 时，它就会打印出共享内存中 SIGUSR1 和 SIGUSR2 的计数值。

我在主程序中有这个选项，它可以运行 30 秒并终止程序，在这种情况下我执行 sleep(30) 然后终止程序。在第二种情况下，它会在一个 while 循环中忙着等待，计算共享内存中 SIGUSR1 和 SIGUSR2 的总数。当它达到 100000 时，它终止程序。

这是我的两个版本的输出

对于100000秒版本

100000信号版本输出

```
 Initializing the shared memory
   End of initializing the shared memory
   Registering the signal handlers
   End of registering the signal handlers
   Registering the monitoring process
   Monitor's pid is 6635
   End of registering the monitoring process
   Registering the signal generators
   Interval SIGUSR1 = 5.79953e-05
   Interval SIGUSR2 = 8.69632e-05
   Count SIGUSR1 = 10
   Count SIGUSR2 = 10
   Count SSIGUSR1 = 5
   Count SSIGUSR2 = 5

   Interval SIGUSR1 = 7.64132e-05
   Interval SIGUSR2 = 5.72999e-05
   Count SIGUSR1 = 16
   Count SIGUSR2 = 24
   Count SSIGUSR1 = 8
   Count SSIGUSR2 = 12 
```

对于 30 秒版本

初始化共享内存

```
 End of initializing the shared memory
   Registering the signal handlers
   End of registering the signal handlers
   Registering the monitoring process
   Monitor's pid is 6719
   End of registering the monitoring process
   Registering the signal generators
   Inside option 1
   Interval SIGUSR1 = 0.000246763
   Interval SIGUSR2 = 0.000222743
   Count SIGUSR1 = 93
   Count SIGUSR2 = 222
   Count SSIGUSR1 = 92
   Count SSIGUSR2 = 111

   Interval SIGUSR1 = 0.000664711
   Interval SIGUSR2 = 0.000390577
   Count SIGUSR1 = 102
   Count SIGUSR2 = 234
   Count SSIGUSR1 = 97
   Count SSIGUSR2 = 117 
```

为什么在第二种情况下结果如此滞后。我的意思是当监视器第一次打印输出时，处理线程记录的 SIGUSR1 和 SIGUSR2 的计数已经达到 93 和 222。信号也被发送到进程组。所以每个信号都由两个处理程序和一个监视器处理。在处理程序的情况下只有两个，因为在四个处理程序中，两个处理 SIGUSR1 并忽略另一个信号，反之亦然。

因此，当我执行 sleep(30) 并查看结果时，您可以看到问题所在。任何见解。我已经尝试调试了好几天，但还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-19T11:27:27.040

信号可能会在接收时合并（信号作为硬件中断控制器工作）。例子：

进程 2 向进程 10 发送信号 SIGUSR1，该进程当前未处于活动状态。

内核存储进程 10 有一个未决的 SIGUSR1

进程 3 向进程 10 发送信号 SIGUSR1，该进程当前未处于活动状态。

内核存储进程 10 有一个挂起的 SIGUSR1（它已经有）

进程10被调度进来，它看到SIGUSR1处于挂起状态，移除挂起并开始信号处理

结果，进程 10 只看到了一个 SIGUSR1。

当您现在添加使系统充满信号时，信号的时间表顺序可能会导致某些信号比其他信号更频繁地出现。

结论：信号不是作为沟通路径，而是推动进程。对于通信，您使用信号量、管道、文件等和信号来唤醒/告诉其他进程他们应该检查更改。

# javascript - 我想在javascript中预加载一组图像并暂停直到它们全部加载

> ID：12657799
> 
> 赞同：0
> 
> 时间：2012-09-30T00:56:19.303
> 
> 标签：javascript, while-loop, preload

我有一个代码，它依赖于首先加载的大图像数组，所以我试图做这样的事情：

```
var loading = 0;
    var i = 0;
    var imgs = [];
    var background = [
        'bg1-1', 'bg1-2', 'bg1-3', 'bg1-4',
        'bg2-1', 'bg2-2', 'bg2-3', 'bg2-4',
        'bg3-1', 'bg3-2', 'bg3-3', 'bg3-4',
        'bg4-1', 'bg4-2', 'bg4-3', 'bg4-4'
    ];

    for (i = 0; i < background.length; i++) {
        imgs[i] = document.getElementById(background[i]);
        imgs[i].onload = function() {
            loading++;
        }
    }

    while (loading < 16) {  }

    alert('images loaded!'); //I need to ensure images are fully loaded here. 
```

因此，它只是挂起并且永远不会退出 while 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:04:31.297

将条件和警报放在回调中。

```
var loading = 0;

for (i = 0; i < background.length; i++) {
    imgs[i] = document.getElementById(background[i]);
    imgs[i].onload = function() {
        loading++;
        if (loading >= background.length)
            alert("all done");
    }
} 
```

实际上，重用该功能会更好。

```
var loading = 0;

function imgHandler() {
    loading++;
    if (loading >= background.length)
        alert("all done");
}

for (i = 0; i < background.length; i++) {
    imgs[i] = document.getElementById(background[i]);
    imgs[i].onload = imgHandler;
} 
```

# javascript - Ajax JSON 加载器不工作

> ID：12657802
> 
> 赞同：1
> 
> 时间：2012-09-30T00:57:13.317
> 
> 标签：javascript, ajax, json

所以我正在为我的博客制作一个 JavaScript AJAX 加载器，但它不起作用。它以前可以工作，但是当我尝试在解析器和 json 文件中添加几个月时，它刚刚停止并且不会加载。

这是JavaScript：

```
firstTime = 1;
function ajax_get_json_for_main_page(a){

var counter = 0;
var results = document.getElementById("blogShow");

    var hr = new XMLHttpRequest();
    hr.open("GET", "articles/main.json", true);
    hr.setRequestHeader("Content-type", "application/json", true);
    hr.onreadystatechange = function() {
        var blog = new Array()
        var title = "";

        if(hr.readyState == 4 && hr.status == 200) {
            var data = JSON.parse(hr.responseText);
            for(var obj in data){
                for(var entry in data[obj])
                {
                    blog[counter] = "<h4>"+entry[obj].title+"</h4><p>"+entry[obj].post+"</p>"+"<hr />";
                    title += "<a onClick='willImpletmentlater(" + entry[obj] + ")" + "'>" + entry[obj].title + "</a><br /><br />"
                    counter = counter + 1;
                }

            }
            document.getElementById("big3").innerHTML = title;

            if(firstTime == 1)
            {
            results.innerHTML = blog[0]
            firstTime = 1000;
            }

            if(a == 1)
            {
                interval = setInterval(function(){blogShowAnimateInner(1, blog);}, 1);
            }
            if(a == 2)
            {
                interval = setInterval(function(){blogShowAnimateInner(2, blog);}, 1);
            }
            if(a == 3)
            {
                interval = setInterval(function(){blogShowAnimateInner(3, blog);}, 1);
            }
            if(a == 4)
            {
                interval = setInterval(function(){blogShowAnimateInner(4, blog);}, 1);  
            }

        }
    }   

hr.send(null);

} 
```

还有 JSON：

```
 {
     "june": {
        "17": {
            "title": "Monday 17 of June 2012",
            "post": "the post taken out to save space."
        },
        "16": {
            "title": "Sunday 16 of June 2012",
            "post": "the post taken out to save space"
        },
        "15": {
            "title": "Saturday 15 of June 2012",
            "post": "the post taken out to save space"
        },
        "14": {
            "title": "Friday 14 of June 2012",
            "post": "the post taken out to save space"
        },
        "13": {
            "title": "Thursday 13 of June 2012",
            "post": "the post taken out to save space"
        },
        "12": {
            "title": "Wednesday 12 of June 2012",
            "post": "the post taken out to save space"
        },
        "11": {
            "title": "Tuesday 11 of June 2012",
            "post": "the post taken out to save space"
        },
        "10": {
            "title": "Monday 10 of June 2012",
            "post": " the post taken out to save space."
        }
    }

} 
```

我试图继续 Jsfiddle 但我不认为他们加载 ajax？无论哪种方式，他们都没有给我任何提示。

编辑：我现在正在工作这里是建议的主要解析位。

if(hr.readyState == 4 && hr.status == 200) { var data = JSON.parse(hr.responseText);

```
 var blog = [];
            var title = "";
            var counter = 0;

            for (var month in data) {
                var monthEntries = data[month];
                for (var i = 0; i < monthEntries.length; i++) {
                    var entry = monthEntries[i];
                    blog[counter] = "<h4>" + entry.title + "</h4><p>" + entry.post + "</p>" + "<hr />";
                    title += "<a onClick='willImpletmentlater(" + entry + ")" + "'>" + entry.title + "</a><br /><br />"
                    counter = counter + 1;
                }

            }

            console.log(blog);
            console.log(title);

            document.getElementById("big3").innerHTML = title;

            if(a == 1)
            {
                interval = setInterval(function(){blogShowAnimateInner(1, blog);}, 1);
            }
            if(a == 2)
            {
                interval = setInterval(function(){blogShowAnimateInner(2, blog);}, 1);
            }
            if(a == 3)
            {
                interval = setInterval(function(){blogShowAnimateInner(3, blog);}, 1);
            }
            if(a == 4)
            {
                interval = setInterval(function(){blogShowAnimateInner(4, blog);}, 1);  
            }

        }
    } 
```

编辑：
现在一切都好

编辑：
如果我添加 7 月不起作用，它只适用于 6 月。这有点奇怪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T01:15:58.363

根据您的 json 结构，它可能应该是这样的。

```
for(var month in data){
        var monthEntries = data[month];
                    for(var day in monthEntries)
                    var entry = monthEntries[day];
                    {
                        blog[counter] = "<h4>"+entry[day].title+"</h4><p>"+entry[day].post+"</p>"+"<hr />";
                        title += "<a onClick='willImpletmentlater(" + entry[day] + ")" + "'>" + entry[day].title + "</a><br /><br />"
                        counter = counter + 1;
                    }

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:28:22.520

啊，我明白你的意思了。您的 json 响应月份对象不是一个数组，它是一个具有键值对的对象，并且当您执行 var key 时，对象键没有设置的检索顺序...要获得预期的顺序，您应该将 json 响应更改为类似这

```
 {
     "june": [
        {
            "day": "17",
            "title": "Monday 17 of June 2012",
            "post": "the post taken out to save space."
        },
        {
            "day": "16", 
            "title": "Sunday 16 of June 2012",
            "post": "the post taken out to save space"
        },
        {
            "day": "15",
            "title": "Saturday 15 of June 2012",
            "post": "the post taken out to save space"
        },
        {
            "day":"14",
            "title": "Friday 14 of June 2012",
            "post": "the post taken out to save space"
        },
        {    "day": "13",
            "title": "Thursday 13 of June 2012",
            "post": "the post taken out to save space"
        },
        {    "day": "12",
            "title": "Wednesday 12 of June 2012",
            "post": "the post taken out to save space"
        }
    ]

} 
```

我已经更新了 jsfiddle。

[http://jsfiddle.net/ew44p/1/](http://jsfiddle.net/ew44p/1/)

# node.js - Node.js 阻止在连接/快递中检索默认文件

> ID：12657809
> 
> 赞同：1
> 
> 时间：2012-09-30T00:59:02.960
> 
> 标签：node.js, express, connect

我正在`robots.txt`为 Node.js 中使用 http 和 https 的站点实现一个站点。我可以在 http 和 https 的控制器中轻松处理`get`for robots.txt，但问题是在我的控制器处理请求之前，express（或连接？）`robots.txt`在`/public`目录中查找文件，当它找不到时，它向我的控制台吐出一个很长的“未找到”错误。我想清理它，而不是将此错误打印到我的控制台。

由于我自己处理它，如何防止 express 在文件系统上查找 robots.txt？

# c++ - 在 C++ 中重载 [][] 运算符

> ID：12657811
> 
> 赞同：3
> 
> 时间：2012-09-30T00:59:19.273
> 
> 标签：c++, operator-overloading

我正在用 C++ 编写一个矩阵 3x3 类。

glm::mat3 通过语法提供对矩阵数据的访问`[][] operator`。
例如`myMatrix[0][0] = 1.0f;` ，将第一行、第一列条目设置为**1.0f**。

我想提供类似的访问权限。如何使`[][] operator`s 超载？

我尝试了以下方法，但出现错误：

> 运算符名称必须声明为函数

```
const real operator[][](int row, int col) const
{
    // should really throw an exception for out of bounds indices
    return ((row >= 0 && row <= 2) && (col >= 0 && col <= 2)) ? _data[row][col] : 0.0f;
} 
```

重载此运算符的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T01:03:31.850

没有 operator `[][]`，因此您需要重载`[]`运算符两次：一次在矩阵上，为该行返回一个[*代理对象，一次为返回的代理行：*](http://en.wikipedia.org/wiki/Proxy_pattern)

```
// Matrix's operator[]
const row_proxy operator[](int row) const
{
    return row_proxy(this, row);
}
// Proxy's operator[]
const real operator[](int col) const
{
    // Proxy stores a pointer to matrix and the row passed into the first [] operator
    return ((this->row >= 0 && this->row <= 2) && (col >= 0 && col <= 2)) ? this->matrix->_data[this->row][col] : 0.0f;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T01:08:36.537

制作方法会更容易`double operator() (int row, int col) const`。而不是`matrix[i][j]`你只说`matrix(i,j)`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-30T02:03:33.623

通常，对于要使用的多个参数`operator()`，而不是`operator[]`.

嗯，如果不是很明显，`operator[][]`C++ 中没有。它只是`operator[]`应用了两次。这意味着*如果*你想要那个符号，那么你必须让第一个返回一个可以应用第二个的结果（可索引的东西或代理）。

下面的代码概述了一些方法，选择你喜欢的：

```
#include <iostream>
#include <vector>

template< int n >
int& dummy() { static int elem = n; return elem; }

struct Mat1
{
    int operator() ( int const x, int const y ) const
    { return dummy<1>(); }

    int& operator() ( int const x, int const y )
    { return dummy<1>(); }

    Mat1( int, int ) {}
};

struct Mat2
{
    int at( int const x, int const y ) const
    { return dummy<2>(); }

    int& at( int const x, int const y )
    { return dummy<2>(); }

    Mat2( int, int ) {}
};

struct Mat3
{
    struct At { At( int x, int y ) {} };

    int operator[]( At const i ) const
    { return dummy<3>(); }

    int& operator[]( At const i )
    { return dummy<3>(); }

    Mat3( int, int ) {}
};

class Mat4
{
protected:
    int get( int const x, int const y ) const
    { return dummy<4>(); }

    void set( int const x, int const y, int const v ) {}

    class AssignmentProxy
    {
    private:
        Mat4*   pMat_;
        int     x_;
        int     y_;
    public:
        void operator=( int const v ) const
        { pMat_->set( x_, y_, v ); }

        int value() const { return pMat_->get( x_, y_ ); }
        operator int () const { return value(); }

        AssignmentProxy( Mat4& mat, int const x, int const y )
            : pMat_( &mat ), x_( x ), y_( y )
        {}
    };

public:
    int operator()( int const x, int const y ) const
    { return get( x, y ); }

    AssignmentProxy operator()( int const x, int const y )
    { return AssignmentProxy( *this, x, y ); }

    Mat4( int, int ) {}
};

class Mat5
{
protected:
    int at( int const x, int const y ) const
    { return dummy<4>(); }

    int& at( int const x, int const y )
    { return dummy<5>(); }

    class RowReadAccess
    {
    private:
        Mat5 const* pMat_;
        int         y_;

    public:
        int operator[]( int const x ) const
        {
            return pMat_->at( x, y_ );
        }

        RowReadAccess( Mat5 const& m, int const y )
            : pMat_( &m ), y_( y )
        {}
    };

    class RowRWAccess
    {
    private:
        Mat5*   pMat_;
        int     y_;

    public:
        int operator[]( int const x ) const
        {
            return pMat_->at( x, y_ );
        }

        int& operator[]( int const x )
        {
            return pMat_->at( x, y_ );
        }

        RowRWAccess( Mat5& m, int const y )
            : pMat_( &m ), y_( y )
        {}
    };

public:
    RowReadAccess operator[]( int const y ) const
    { return RowReadAccess( *this, y ); }

    RowRWAccess operator[]( int const y )
    { return RowRWAccess( *this, y ); }

    Mat5( int, int ) {}
};

struct Mat6
{
private:
    std::vector<int>    elems_;
    int                 width_;
    int                 height_;

    int indexFor( int const x, int const y ) const
    {
        return y*width_ + x;
    }

public:
    int const* operator[]( int const y ) const
    {
        return &elems_[indexFor( 0, y )];
    }

    int* operator[]( int const y )
    {
        return &elems_[indexFor( 0, y )];
    }

    Mat6( int const w, int const h )
        : elems_( w*h, 6 ), width_( w ), height_( h )
    {}
};

int main()
{
    using namespace std;
    enum{ w = 1024, h = 1024 };
    typedef Mat3::At At;

    Mat1 m1( w, h );
    Mat2 m2( w, h );
    Mat3 m3( w, h );
    Mat4 m4( w, h );
    Mat5 m5( w, h );
    Mat6 m6( w, h );

    wcout
        << m1( 100, 200 )       // No fuss simple, but exposes element ref.
        << m2.at( 100, 200 )    // For those who don't like operators.
        << m3[At( 100, 200)]    // If you really want square brackets mnemonic.
        << m4( 100, 200 )       // Hides element ref by using assignment proxy.
        << m5[200][100]         // Ditto but with square brackets (more complex).
        << m6[200][100]         // The minimum fuss square brackets, exposes elem ref.
        << endl;
} 
```

哦，好吧，我在发布该代码后发现我没有完全隐藏内部存储`Mat5`：它需要一个额外的代理级别，如`Mat4`. 所以这种方法真的很复杂。我不会这样做（`Mat1`我认为这很好也很容易），但有些人认为代理很酷，而数据隐藏更酷……

总而言之，没有“正确的”超载方法`operator[]`。有很多方法（如上面的代码所示），每种方法都有一些取舍。通常你最好使用`operator()`，因为`operator[]`它可以接受任意数量的参数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-30T01:02:39.817

没有`[][]`操作员。GLM 的做法是`vec3&`从第一个返回 a `[]`。`vec3`有自己的`[]`运算符重载。所以它是两个单独`operator[]`的类上的两个单独的 s。

这也是 GLSL 的工作原理。第一个`[]`将列作为向量。第二个获取向量并从中获取值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T01:04:23.673

表达式`foo[1][2]`实际上被解释为`(foo[1])[2]`，即`[]`运算符从变量开始连续应用两次`foo`。没有`[][]`要重载的运算符。

# css - CSS行高不起作用

> ID：12657814
> 
> 赞同：1
> 
> 时间：2012-09-30T00:59:49.253
> 
> 标签：css

我有这个 div，我正在尝试像这样应用 line-height ......

```
.social {
    background-color: #FFFFFF;
    float: left;
    font-size: 18px;
    height: 93px;
    line-height: 60px;
    padding-left: 20px;
    width: 190px;
} 
```

但是`.social`课程不会关闭，div里面的任何东西都保持在顶部......这是html ..

```
<div class="social">
     <ul>
          <li class="facebook">
               <a href="http://www.facebook.com/SurfTheCurve" target="_blank"></a>
          </li>
          <li class="twitter">
               <a href="https://twitter.com/SurfCurveTutor" target="_blank"></a>
          </li>
          <li class="email">
               <a href="mailto:info@surfthecurve.ca?subject=Website Enquiry" target="_blank"></a>
          </li>
     </ul>
</div> 
```

这是其他一些 CSS

```
.social ul {
    list-style-type: none;
    margin: 0;
    padding: 0 0 0 15px;
}

.social li {
    float: left;
}

.social ul .facebook a {
    background-image: url("images/facebook.png");
    background-position: right center;
    background-repeat: no-repeat;
    color: #FFFFFF;
    display: block;
    height: 35px;
    text-decoration: none;
    width: 35px;
}

.social ul .twitter a {
    background-image: url("images/twitter.png");
    background-position: right center;
    background-repeat: no-repeat;
    color: #FFFFFF;
    display: block;
    height: 35px;
    padding: 0 10px;
    text-decoration: none;
    width: 35px;
}

.social ul .email a {
    background-image: url("images/email.png");
    background-position: right center;
    background-repeat: no-repeat;
    color: #FFFFFF;
    display: block;
    height: 35px;
    padding: 0 10px;
    text-decoration: none;
    width: 35px;
} 
```

希望这可以帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T01:12:10.780

`line-height`需要文本（否则没有行！）但是您提供的 HTML 没有任何文本，它只是空`<a>`元素。

我在这里做了一个jsFiddle：http: [//jsfiddle.net/7vcmC/](http://jsfiddle.net/7vcmC/)（我不得不改变颜色设置）但我想这就是你想要的效果？

# git - Git删除了我的更改，我可以取回它们吗

> ID：12657815
> 
> 赞同：1
> 
> 时间：2012-09-30T01:00:12.377
> 
> 标签：git, github-for-mac

我在一个分支中进行了一些更改，我们将其称为 branch2。我在没有提交更改的情况下切换到主分支。我猜这是一个禁忌，因为当我切换回 branch2 时，我的所有更改都消失了！如果 Mac 的 GitHub 客户端会警告我，那肯定会很好。无论如何我可以撤消此操作并恢复我的更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:04:07.193

如果它没有被承诺，那么就没有什么可做的。虽然，这很奇怪，因为如果您的工作目录中有未提交的数据，通常 git 不会允许您切换分支（我不知道 github for mac 究竟是什么）。

您可以随时检查`git reflog`您是否已提交数据。

# ios - 如何自定义 UIActivityViewController 以在发布到 facebook 和 twitter 时显示 URL 链接？

> ID：12657817
> 
> 赞同：27
> 
> 时间：2012-09-30T01:00:54.940
> 
> 标签：ios, facebook, ios6

所以我正在尝试`UIActivityViewController`iOS 6 中的新功能，它很容易启动和运行，但我不知道如何按我的意愿控制它。所以我想发布一篇文章的链接，我还想附上链接的图片。我不希望该图像上传到某个 Facebook 相册，只是作为 URL 缩略图。

这在 facebook SDK 中很容易实现，因为他们可以完全控制它，但是有没有办法用`UIActivityViewController`? 这是我得到的：

```
 NSArray *activityItems = @[[NSURL URLWithString:[article link]], [UIImage imageNamed:@"myStockImage"]];
    UIActivityViewController *viewCont = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
    [self presentViewController:viewCont animated:YES completion:nil]; 
```

这可行，但它将图像上传到“iOS相册”。如果我没有在数组中添加图像，那么 facebook 表看起来是空白的，并且附件显示灰色的 safari 徽标（就像缺少缩略图一样！）在 safari 中，当您尝试使用 Facebook 链接时，它使用页面的屏幕抓取作为缩略图，我想做类似的事情

更新 ：

所以这就是我的应用程序的样子（使用 UIActivityViewController 或 SLCompose 方式）。查看如何将图片上传到相册`iOS Photos`

![照片位置不正确](../Images/ee9f059bbed56906c4405ae9e08a8873.png)

这是我希望它的样子（另见 Safari）：

![在此处输入图像描述](../Images/07b1e3c1e06e55b0cf0a2a1066718689.png)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-24T21:31:49.683

我已经对此进行了搜索，得出的结论是，使用 the `UIActivityViewController`theres just no way to do what you want. 每次您尝试分享照片时，它只会让您将照片放入您的一个相册中，默认情况下为“iOS”相册。

就我而言，只要从我需要分享的链接中检索到图像，我就不需要发布照片（就像您在 Facebook 时间轴上发布链接时，它会自动从该链接中抓取图片，并且图片成为链接）。为了做到这一点，我发现如果我只发布一个 URL，它就不起作用。您必须发布一些初始文本，然后是 URL，您可以通过将对象按该顺序放置在`activityItems`数组中来做到这一点。

这是我的工作代码：

```
NSArray * activityItems = @[[NSString stringWithFormat:@"Some initial text."], [NSURL URLWithString:@"http://www.google.com"]];
NSArray * applicationActivities = nil;
NSArray * excludeActivities = @[UIActivityTypeAssignToContact, UIActivityTypeCopyToPasteboard, UIActivityTypePostToWeibo, UIActivityTypePrint, UIActivityTypeMessage];

UIActivityViewController * activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:applicationActivities];
activityController.excludedActivityTypes = excludeActivities;

[self presentViewController:activityController animated:YES completion:nil]; 
```

我还注意到，如果您在这些对象上发布照片，它不会从链接中检索任何图像。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-22T07:52:10.443

更新了 Swift 3.0 的答案

```
let url = URL(string: "google.com")
let shareText = "Your string goes here"
let shareItems: [Any] = [shareText, url!]

let activityVC = UIActivityViewController(activityItems: shareItems, applicationActivities: nil)
activityVC.excludedActivityTypes = [.airDrop, .postToFlickr, .assignToContact, .openInIBooks]

self.present(activityVC, animated: true, completion: nil) 
```

Facebook 不会接受该字符串，但与许多其他社交媒体网站一样，会显示 URL 的图像/链接框

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T02:35:33.257

如果您不需要特别使用 UIActivityViewController，那么使用 SLComposeViewController 很容易实现此目的。

```
+(void)presentShareWidgetWithText:(NSString*)text url:(NSURL*)url images:(NSArray*)images toService:(NSString*)service presentIn:(UIViewController*)parentViewController {
    SLComposeViewController* controller = [SLComposeViewController composeViewControllerForServiceType:service];
    if (controller == nil) {
        DLog(@"Could not initialize SLComposeViewController for %@!", service);
        return;
    }
    if (url != nil) {
        if (![controller addURL:url])
            DLog(@"Failed adding url %@!", url);
    }
    if (images != nil) {
        for (UIImage* image in images) {
            if (![controller addImage:image]) {
                DLog(@"Failed adding image: %@", image);
            }
        }
    }
    if (![controller setInitialText:text]) {
        DLog(@"Failed setting initial text: %@", text);
    }

    SLComposeViewControllerCompletionHandler handler = ^(SLComposeViewControllerResult result) {
        switch (result) {
            case SLComposeViewControllerResultCancelled:
                DLog(@"SLComposeViewControllerResultCancelled");
                break;

            case SLComposeViewControllerResultDone:
                DLog(@"SLComposeViewControllerResultDone, Shared on service: %@", service);
                break;

            default:
                DLog(@"Unhandled result: %d", result);
                break;
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [parentViewController dismissViewControllerAnimated:YES completion:^{
                DLog(@"Dismissed a controller here!");
            }];
        });
    };

    [controller setCompletionHandler:handler];

    [parentViewController presentViewController:controller animated:YES completion:^{
        DLog(@"Presented %@!", controller);
    }];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:54:51.300

```
- (void)tweetURL:(NSString *)url title:(NSString *)title {
    TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
    NSString *format = @"“%@” %@ /via @DesignSceneApp";
    NSString *message = [NSString stringWithFormat:format, title, url]
    NSUInteger idx = title.length;
    while (![twitter setInitialText:message]) {
        idx -= 5;
        if (idx > 5) {
            message = [NSString stringWithFormat:format,
                [NSString stringWithFormat:@"%@…", [title substringToIndex:idx]],
                url
            ];
        } else {
            // Give up on the title.
            message = [NSString stringWithFormat:@"%@ /via @DesignSceneApp", url];
            [twitter setInitialText:message];
            break;
        }
    }

    [self presentViewController:twitter animated:YES completion:nil];
} 
```

# jquery - Jquery UI 可排序：更改 在 如果超出

> ID：12657821
> 
> 赞同：0
> 
> 时间：2012-09-30T01:02:10.720
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有可排序的项目，它们在不同的`ul`.

我希望有可能放弃`li`外部 a`ul`并因此将 a 转换`li`为 a `ul`。

**这是我的代码：**

```
<script>
    $(function() {
        $( ".drop" ).sortable({
            connectWith: ".drop",
        });

        $( ".sortable" ).sortable({
            items: '.drop',
        });
    });
</script>

<div class="sortable">
    <ul id="sortable1" class='drop'>
        <li class="ui-state">Item 1</li>
    </ul>

    <ul id="sortable2" class='drop'>
        <li class="ui-state">Item 1</li>
        <li class="ui-state">Item 2</li>
    </ul>

    <ul id="sortable3" class='drop'></ul>
</div> 
```

# c - 有没有办法知道我的程序需要多长时间才能完成？C代码

> ID：12657824
> 
> 赞同：0
> 
> 时间：2012-09-30T01:02:16.297
> 
> 标签：c, time

我正在寻找一种方法来知道我的 C 程序将使用多少时间，最好是在我运行它之前，但如果之前无法知道，那么在它结束之后。

有办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:03:53.373

之后，是的。在大多数（全部？）UNIX-y 系统上，您可以使用以下命令：

```
time ./myprog 
```

以前，不，因为程序可能依赖于外部输入。 [停止问题](https://en.wikipedia.org/wiki/Halting_problem)也可能是确定程序预先执行所需时间的障碍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T01:07:55.560

您可以使用`clock()`：

```
 #include <stdio.h>
 #include <time.h>
 int main() {
 clock_t start, stop;
 start = clock();

 /* Your code */

 stop = clock();
 printf("Run time: %f",(stop-start)/CLOCKS_PER_SEC);
 return 0;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T19:50:37.780

```
time -f "%e" -o Output.txt ./a.out 
```

它将执行的总执行时间存储`./a.out`到文件`Output.txt`中。

# iphone - iphone 5 会运行仅使用 ARMv7（而不是 ARMv7s）提交的二进制文件吗？

> ID：12657826
> 
> 赞同：0
> 
> 时间：2012-09-30T01:02:41.297
> 
> 标签：iphone, xcode, ios6

只是想知道我是否仅在我的二进制文件中包含 ARMv7 并排除 ARMv7s，如果它仍然可以在 iPhone 5 上实际运行？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T01:16:34.310

是的，想想 App Store 上所有仅针对 ARMv7 编译的现有应用程序，它们都可以在 iPhone 5 上运行。

# vim - 有没有办法改变 VIM 的 EasyMotion 插件，使其显示 2 而不是 1 多个匹配键的字符？

> ID：12657828
> 
> 赞同：3
> 
> 时间：2012-09-30T01:02:48.933
> 
> 标签：vim, plugins, shortcut, vimperator

我知道这个问题比平时更难，但是有没有办法改变 VIM 的 EasyMotion 插件，以便在搜索匹配太多的字符时显示 2 个字符，就像 FireFox 的 Vimperator 那样？默认行为是显示 1 个字符，等待您按下它，然后再显示另一个。

EasyMotion：当多个匹配时显示 1 个字符（注意多个红色“z”） [EasyMotion：当多个匹配时显示 1 个字符 http://o7.no/P313g7](http://o7.no/P313g7)

Vimperator：显示 2 个字符 [Vimperator：显示 2 个字符 http://o7.no/QOfwIE](http://o7.no/QOfwIE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T17:15:59.180

这个前叉使用 vimperator 风格的 2 键组合：

[https://github.com/skwp/vim-easymotion](https://github.com/skwp/vim-easymotion)

# python - 从变量中设置变量？

> ID：12657829
> 
> 赞同：0
> 
> 时间：2012-09-30T01:02:56.697
> 
> 标签：python

我有很多很多字符串，所有格式都像这样：“lot1”、“lot2”、“lot3”......我想做的是使用函数参数来确定要使用的变量。这是一个伪示例：

```
def printlot(someInt):
    print lot%i % (someInt) 
```

基本上，我想使用多个字符串来形成另一个要使用的字符串的名称。这看起来很简单，但是在我两年的 Pythoning 中，我还没有学会如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:09:02.803

nneonneo 说的是正确的，但你真的会想要明确地使用字典。也就是说，你想这样做：

```
lot_data = {'lot1': 10, 'lot2': 20, 'lot3': 30}
i = 2
print lot_data['lot%d' % i] 
```

而不是这个：

```
lot1 = 10
lot2 = 20
lot3 = 30
i = 2
print vars()['lot%d' % i] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T01:04:43.487

您可以使用`vars`内置函数将所有可见变量作为字典访问：

```
vars()['lot%d' % someInt] 
```

可以使用`globals`或访问不同的范围`locals`。

但是请注意，这通常被认为是“非pythonic”行为。与其创建许多名称相似的变量，不如创建一个更 Pythonic 的方法是创建一个列表或字典。

# jquery - 使用 jQuery 进行简单绑定

> ID：12657836
> 
> 赞同：1
> 
> 时间：2012-09-30T01:03:57.397
> 
> 标签：jquery

我正在尝试让自己重新熟悉 jQuery，但开始时遇到了困难。

在下面的代码中，我想说“当 DOM 准备就绪时，将警报绑定到 'choice' div 的更改事件，这实际上是表单上的一个选择元素。当我重新加载表单时，虽然警报正在显示立即，并且在我进行新选择时不显示。

这是代码：

```
$(document).ready(doBind());

function doBind() {
    $('#choice').change(myAlert('Choice has been changed!'));    
}

function myAlert($msg) {
    alert($msg);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:32:41.477

您需要区分函数引用和调用（调用）。当您关联事件处理程序或回调时，您需要一个函数*引用*，然后在适当的时间调用该函数引用。一旦您传递参数并将`(..)`（或 nullary `()`）添加到函数引用，它就会被*调用*。如果您在绑定期间这样做，那么函数将在绑定时被调用，并且函数的输出将被绑定而不是绑定引用（这将允许正常预期的稍后调用）。

您应该按如下方式更改两个绑定：

```
 $(document).ready(doBind); //Now a reference to that function

    function doBind() {
        $('#choice').change(function() { myAlert('Choice has been changed!');});    
       //New anonymous function reference which allows for arguments and is conventionally used
    }

    function myAlert($msg) {
        alert($msg);
    } 
```

几个简单的例子来突出语法和`()`.

下面的函数将采用函数引用。作为参数，然后在内部执行它（基本上处理程序和回调如何工作）。

```
functionWrapper = function(funk) {
  //Do something else
  funk()
} 
```

现在流行的匿名函数声明，然后立即调用：通常会编写函数`function() {...}()`，这会导致使用提供的任何参数立即调用对新创建函数的引用（在 JavaScript 中用于强制作用域）。任何一种情况下的参数都可以作为函数中的参数使用，因此调用中的任何内容都`(..)`映射到将在中声明的内容，`function(..)`但关注引用与调用是您问题的主要问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T01:06:00.427

功能我的警报必须是这样的：

```
function myAlert($msg) {
    return function() {
        alert($msg);
    }
} 
```

这是因为您需要将函数传递给`change`. 当您这样做`myAlert('Choice has been changed!')`时，您传递的不是函数`myAlert`，而是执行后的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T01:30:46.100

```
$(document).ready(doBind);

function doBind() {
    $('#choice').on('change', function(){alert('Choice has been changed!')});
} 
```

1.  将函数作为对象传递。() 执行该函数，而将其关闭则将其视为一个对象。当指示回调时，您将函数作为对象传递（除非您正在执行的函数返回一个函数对象，这称为柯里化）。

2.  `$.on`是在最新的 jquery 中绑定事件的首选方式。[你可以在这里](http://api.jquery.com/on/)找到它的文档。

3.  通常像这样创建您的函数：`var doBind = function() { //doBind stuff }`这​​有助于识别您将函数作为对象传递，并且还可以防止它们弄乱全局命名空间。

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T02:21:07.090

到目前为止给出的所有答案都非常好。但是，他们没有提到的是，这不是人们通常编写 jQuery 代码的方式。通常在加载文档时需要初始化很多东西。所以实际上写东西的方式是使用一个匿名函数，它的主体是你所有的局部变量、函数和初始化。因此，与其使用单独的 doBind() 函数，不如编写：

```
$(document).ready(function () {
    $('#choice').change(myAlert);
    function myAlert($msg) {
        alert($msg);
    }
}); 
```

由于这很常见，jQuery 为它提供了一个简写符号：

```
$(function () {
    $('#choice').change(myAlert);
    function myAlert($msg) {
        alert($msg);
    }
}); 
```

如果您想坚持使用单独的命名函数，可以编写：

```
$(doBind); 
```

# c# - 在 C# 中为 INSERT 语句定义 SQL 参数

> ID：12657843
> 
> 赞同：2
> 
> 时间：2012-09-30T01:05:22.093
> 
> 标签：c#, sql

我创建了一个参数化的 SQL 插入查询，但我在某处犯了错误。我不断收到一条消息，指出值将被截断，因此，在故障排除期间，我将查询减少到仅需要值的字段（不允许 NULL），并且插入语句完成。

我检查了表格，我看到插入了我的参数名称，而不是它们应该从表​​单的文本框中提取的值。

显然我错误地调用了我的参数，但我无法弄清楚我哪里出错了。我希望你们都可以帮助我。

提前致谢！

**注意：**是的，我知道参数比我在`INSERT`字符串中使用的参数多。我故意减少了用于故障排除的值。

再次感谢！

```
try {
    string InsertString = @"INSERT INTO Item.Itemtable
        (ItemNumber, ItemDesc, RatioToOriginalItemNumber, OriginalItemNumber, EntreeCount, ItemType, ProteinBeverage)
        Values(@ItemNumberValue, '@ItemDescValue', @RatioToOriginalItemNumberValue, @OriginalItemNumberValue, @EntreeCountValue, '@ItemTypeValue', @ProteinBeverageValue)";
    SqlCommand InsertNewItem = new SqlCommand(InsertString, PmixWriter);
    //Define Insert Parameters
    SqlParameter @ItemNumberValue = InsertNewItem.Parameters.Add("@ItemNumberValue", System.Data.SqlDbType.Int);
    SqlParameter @ItemDescValue = InsertNewItem.Parameters.Add("@ItemDescValue", System.Data.SqlDbType.VarChar, 100);
    SqlParameter @ItemTypeValue = InsertNewItem.Parameters.Add("@ItemTypeValue", System.Data.SqlDbType.VarChar, 100);
    SqlParameter @ProteinBeverageValue = InsertNewItem.Parameters.Add("@ProteinBeverageValue", System.Data.SqlDbType.VarChar, 100);
    SqlParameter @IsCouponValue = InsertNewItem.Parameters.Add("@IsCouponValue", System.Data.SqlDbType.Char, 3);
    SqlParameter @EntreeCountValue = InsertNewItem.Parameters.Add("@EntreeCountValue", System.Data.SqlDbType.Real);
    SqlParameter @BevCountValue = InsertNewItem.Parameters.Add("@BevCountValue", System.Data.SqlDbType.TinyInt);
    SqlParameter @OriginalItemNumberValue = InsertNewItem.Parameters.Add("@OriginalItemNumberValue", System.Data.SqlDbType.Int);
    SqlParameter @RatioToOriginalItemNumberValue = InsertNewItem.Parameters.Add("@RatioToOriginalItemNumberValue", System.Data.SqlDbType.TinyInt);
    SqlParameter @FPBeverageCountValue = InsertNewItem.Parameters.Add("@FPBeverageCountValue", System.Data.SqlDbType.Int);
    SqlParameter @FPBeverageEntreeCountValue = InsertNewItem.Parameters.Add("@FPBeverageEntreeCountValue", System.Data.SqlDbType.Int);
    SqlParameter @FoodCostValue = InsertNewItem.Parameters.Add("@FoodCostValue", System.Data.SqlDbType.Money);

    //Assign and covert values to the stated SQL parameters.
    @ItemNumberValue.Value = Convert.ToInt32(ItemNumberBox.Text);
    @ItemDescValue.Value = ItemDescBox.Text;
    @ItemTypeValue.Value = ItemTypeBox.Text;
    @ProteinBeverageValue.Value = ProteinBevBox.Text;
    @IsCouponValue.Value = IsCouponBox.Text;
    @EntreeCountValue.Value = Convert.ToInt32(EntreeCountBox.Text);
    @BevCountValue.Value = Convert.ToInt32(BevCountBox.Text);
    @OriginalItemNumberValue.Value = Convert.ToInt32(OriginalItemNumBox.Text);
    @RatioToOriginalItemNumberValue.Value = Convert.ToInt32(RatioBox.Text);
    @FPBeverageCountValue.Value = Convert.ToInt32(FPBevBox.Text);
    @FPBeverageEntreeCountValue.Value = Convert.ToInt32(FPBevEntreeBox.Text);
    @FoodCostValue.Value = Convert.ToDecimal(0.00);

    InsertNewItem.ExecuteNonQuery();
} catch (SqlException) {
    throw;   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:47:40.903

在您的 INSERT 语句中，从 @ItemDescValue 和 @ItemTypeValue 参数中删除单引号。它们当前被插入为文字值，否则。

# javascript - 如何控制我的 jQuery 插件使用 .each() 迭代的顺序？

> ID：12657844
> 
> 赞同：2
> 
> 时间：2012-09-30T01:05:23.037
> 
> 标签：javascript, jquery, jquery-plugins

我创建了一个插件，可以克隆元素以进行快速原型制作。该插件将遍历元素上具有“数据克隆”数据属性的每个元素，并在该属性中设置克隆数量。

例子：

```
<table data-clone="3">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Project</th>
        </tr>
    </thead>
    <tbody>
        <tr data-clone="4">
            <td>1</td>
            <td>Steve Sax</td>
            <td>Something here.</td>
        </tr>
    </tbody>
</table> 
```

这似乎在第一个元素上效果很好。但是，如果我有一个嵌套项目，其中容器被克隆，里面的元素也是如此。似乎它克隆了嵌套项，第一个是外部项，但不会将这些嵌套项克隆到新克隆的外部容器中。

我这里有一个小提琴：[小提琴](http://jsfiddle.net/adamin/u46Ps/3/)

它有插件和调用。如果您单击“运行”，您应该会明白我的意思。

但是，我觉得如果 .each() 方法首先从嵌套项迭代，然后向上工作，那么所有克隆都是正确的。

提前致谢，

亚当。

这是插件本身供参考。同样，一切都在小提琴中。

```
/*! Adamin Clone - v0.1.0 - 2012-09-29
  * https://github.com/pensive612/Adamin-Clone
  * Copyright (c) 2012 Adam L.; Licensed MIT, GPL */

(function(window, document, $, undefined) {
    var Project = function(elem, options) {
      this.elem = elem;
      this.$elem = $(elem);
      this.options = options;
      this.metadata = this.$elem.data('clone-cap');
};

Project.prototype = {
  defaults: {
    cloneCap: 100
  },
  init: function() {
    this.config = $.extend({}, this.defaults, this.options, this.metadata);

    this.getCloneValue(this.$elem);

    return this;
  },
  getCloneValue: function(elem) {
    var configCap = this.config.cloneCap;
    var cloneValue = elem.data('clone');

    // parse data-clone value
    cloneValue = this.parseCloneValue(cloneValue);

    // if data-clone value is valid, send to clone function
    if ( cloneValue && (cloneValue < configCap) ) {
      this.cloneItem(this.$elem, cloneValue);

    // otherwise, return false
    } else {

      if (cloneValue > configCap) {
        window.console.log('Your data-clone value is too high for the defaults.  Please check documentation to override cap in config.');
      }

      return false;
    }
  },
  parseCloneValue: function(value) {
    var cloneValue = parseInt(value, 10);
    return cloneValue;
  },
  cloneItem: function(elem, value) {
    var elemClone;

    for (var i = value; i > 0; i--) {
      elemClone = elem.clone(true);
      elemClone.removeAttr('data-clone');
      elemClone.addClass('clone-' + i);
      elemClone.insertAfter(elem);
    }
  }
};

Project.defaults = Project.prototype.defaults;

$.fn.adaminClone = function(options, callback) {

  if (typeof callback === 'function') {
    callback.call(this);
  }

  return this.each(function() {
    new Project(this, options).init();
  });
};

window.Project = Project;

}(window, document, jQuery)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T01:33:44.660

好的，所以我有东西给你。

[检查这个简化的小提琴](http://jsfiddle.net/u46Ps/11/)

基本上，您从最深的元素开始克隆并向上。注释在代码中。

```
var elements = $.find('[data-clone]'); //get all the elements that need to be cloned
var elementsData = []; //will store and sort the elements

//store the elements with their depth
$.each(elements, function(i, element) {

    var obj = {};
    obj.element = $(element);
    obj.depth = $(element).parents().length;

    elementsData.push(obj);

    // This can be optimized, it's just easier to understand the code.
    // Alternatively use 
    // elementsData.push({ element : $(element), depth : $(element).parents().length }); 
})

//sort them by deepest element
elementsData.sort(SortByDepth);

$.each(elementsData, function(i, elementData) {
    var element = elementData.element;

    //clone ot the number of times wanted.
    for (var c = 0; c < element.attr('data-clone'); c++) {
        element
            .clone(true)
            .removeAttr('data-clone')
            .addClass('clone-' + c).
            insertAfter(element);
    }
})

//function that sorts the elements;
function SortByDepth(a, b){
  var aDepth = a.depth;
  var bDepth = b.depth;
  return ((aDepth > bDepth) ? -1 : ((aDepth < bDepth) ? 1 : 0));
} 
```

注意：在 data-clone=4 中，脚本将克隆它 4 次，因此屏幕上总共有 5 个（因为已经存在一个）。你想要 4，在 for 循环中插入

```
for (var c = 0; c < parseInt(element.attr('data-clone') - 1); c++) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:11:15.453

ComputerArts 在重写函数方面做得非常出色。但是，我只需修改以下内容即可维护插件模式和可扩展性：

```
return this.each(function() {
  new Project(this, options).init();
}); 
```

对此：

```
 return this.sort(function(a, b) {
    var va = $(a).parents('[data-clone]').length;
    var vb = $(b).parents('[data-clone]').length;
    return vb - va;
  }).each(function() {
      new Project(this, options).init();
  }); 
```

使用 parents().length 是测量深度的好方法。感谢 ComputerArts 和 Shoky 将我带到了我需要的地方。

# ruby - 找不到含硒的红宝石元素

> ID：12657850
> 
> 赞同：1
> 
> 时间：2012-09-30T01:06:09.290
> 
> 标签：ruby, selenium, automated-tests, nested-forms

从昨天开始，我一直在尝试使用 selenium 找到一个nested_form link_to_add 按钮。当我从 chrome 复制其 XPATH 并将其粘贴到脚本中时：

```
element = browser.find_element(:xpath => "//*[@id='tabpage_1']/a") 
```

运行 selenium 时出现以下错误：

```
<main>': undefined method `*' for //:Regexp (NoMethodError) 
```

如果您知道任何其他方式检测这种元素，将不胜感激。这是元素 HTML：

```
<a href="javascript:void(0)" class="add_nested_fields" data-association="levels">Add Level</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:16:43.647

试试这种方式

```
element = browser.find_element(:xpath => "//*[@id=\"tabpage_1\"]/a") 
```

**注意：转义双引号。**

提示 - 如果你使用一个不错的文本编辑器（例如 - Sublime），文本的颜色会改变，并帮助你检测到这些错误

# mysql - 如何在mysql中解决这个查询

> ID：12657853
> 
> 赞同：0
> 
> 时间：2012-09-30T01:06:37.593
> 
> 标签：mysql, database, datetime

我在下面的 MySQL 中有这些记录

```
RecID | Description | Date | Hits | IsPublished 
1; "Test"; 04/10/2012; 45; True
2; "Test 1"; 04/10/2012; 37; True
3; "Test 2"; 05/10/2012; 12; True
4; "Test 3"; 05/10/2012; 13; True
5; "Test 4"; 07/10/2012; 14; True
6; "Test 5"; 07/10/2012; 25; True
7; "Test 4"; 08/10/2012; 23; True
8; "Test 5"; 08/10/2012; 35; True
9; "Test 9"; 12/10/2012; 7; True 
```

想实现以下

```
9; "Test 9"; 12/10/2012; 7; True 
8; "Test 5"; 08/10/2012; 35; True
4; "Test 3"; 05/10/2012; 13; True 
```

基本上，第一条规则是将日期分组为 08/10/2012、07/10/2012 和 05/10/2012 和 04/10/2012。使用这个 08/10/2012 作为起点。然后删除任何彼此接近的日期（最少 1 天）。

顺便说一句……这是澳大利亚的日期（DD/MM/YYYY）。因此，结果是 08/10/2012、05/10/2012。在这 2 个“有效”天中，然后选择当天点击次数较多的记录。然后将其他设置为 IsPublished = false。

有什么想法可以在 MySQL 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:24:51.903

首先找到没有其他行的日期大于 1 的日期：

```
 SELECT DISTINCT t1.Date
    FROM table_name t1
    LEFT JOIN table_name t2
      ON DATE_ADD(t1.Date, INTERVAL 1 DAY) = t2.Date
    WHERE t2.RecId IS NULL 
```

然后找到这些日期的最大点击量：

```
 SELECT Date, MAX(Hits) as maxHits
  FROM table_name
  WHERE Date IN (
    SELECT DISTINCT t1.Date
    FROM table_name t1
    LEFT JOIN table_name t2
      ON DATE_ADD(t1.Date, INTERVAL 1 DAY) = t2.Date
    WHERE t2.RecId IS NULL )
  GROUP BY Date 
```

最后，更新所有与这些日期和 maxHits 不匹配的行：

```
UPDATE table_name toUpdate, (    
  SELECT Date, MAX(Hits) as maxHits
  FROM table_name
  WHERE Date IN (
    SELECT DISTINCT t1.Date
    FROM table_name t1
    LEFT JOIN table_name t2
      ON DATE_ADD(t1.Date, INTERVAL 1 DAY) = t2.Date
    WHERE t2.RecId IS NULL )
  GROUP BY Date) source
SET toUpdate.IsPublished = false
WHERE toUpdate.Date != source.Date OR toUpdate.Hits != source.maxHits 
```

# iphone - 我可以为核心数据模型对象使用自定义初始化程序吗？

> ID：12657857
> 
> 赞同：2
> 
> 时间：2012-09-30T01:08:12.227
> 
> 标签：iphone, objective-c, cocoa-touch, core-data

我使用 Core Data 并有一个 object `ExerciseForRoutine`。我目前正在手动创建它，然后设置它的属性，这似乎浪费了代码。有什么方法可以创建一个自定义的 init 方法来在一行中处理这个问题（我知道如何处理 alloc/init，但核心数据有不同的 init 方法..）

当前代码：

```
ExerciseForRoutine *exerciseForRoutine = (ExerciseForRoutine *)[NSEntityDescription insertNewObjectForEntityForName:@"ExerciseForRoutine" inManagedObjectContext:managedObjectContext];
exerciseForRoutine.name = self.selectedExercise;
exerciseForRoutine.timeStamp = date;
exerciseForRoutine.muscleGroup = self.muscleName;
exerciseForRoutine.musclePicture = self.muscleURL; 
```

例行练习课

```
@class Routine;

@interface ExerciseForRoutine : NSManagedObject {
@private
}
@property (nonatomic, strong) NSDate * timeStamp;
@property (nonatomic, strong) NSString * name;
@property (nonatomic, strong) NSString * muscleGroup;
@property (nonatomic, strong) NSString * musclePicture;
@property (nonatomic, strong) Routine * exerciseToRoutine;

@end

@implementation ExerciseForRoutine
@dynamic timeStamp;
@dynamic name;
@dynamic muscleGroup;
@dynamic musclePicture;
@dynamic exerciseToRoutine; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-26T13:57:55.630

我使用 awakeFromInsert 和 awakeFromFetch 做到了这一点。

来自 Apple 的文档：

> 在典型的 Cocoa 类中，您通常会覆盖指定的初始化程序（通常是 init 方法）。在 NSManagedObject 的子类中，您可以通过三种不同的方式自定义初始化——通过覆盖 initWithEntity:insertIntoManagedObjectContext:、awakeFromInsert 或 awakeFromFetch。您不应该覆盖 init。不鼓励您覆盖 initWithEntity:insertIntoManagedObjectContext: 因为在此方法中所做的状态更改可能无法与撤消和重做正确集成。

[https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T14:39:50.440

要添加到@Radix 的答案，您应该考虑使用`mogenerator`，因为它会为您完成大部分子类化业务。

[http://rentzsch.github.io/mogenerator/](http://rentzsch.github.io/mogenerator/)

有关设置它并让它在 XCode 5 上运行的指南，请参见[此处。](http://raptureinvenice.com/getting-started-with-mogenerator/)

不过，有一个小警告需要注意：如果您遇到断言失败，内容如下：

```
-[MOGeneratorApp setModel:] blah blah blah 
```

然后，您应该在运行脚本阶段指向包内`mogenerator`的`.xcdatamodel`文件，如下所示：`.xcdatamodeld`

```
mogenerator -m Model.xcdatamodeld/Model.xcdatamodel -O Project/Model --template-var arc=true 
```

`Project`您的项目名称在哪里`Model`，您的模型名称在哪里。

请参阅[https://github.com/rentzsch/mogenerator/issues/169](https://github.com/rentzsch/mogenerator/issues/169)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T03:42:59.247

Xcode 创建的用于处理核心数据对象的类不应被覆盖，相反，您可以创建自己的自定义类，该类继承自 NSObject 并编写您的方法来处理它们的托管对象。

Sol：您可以借助参数化的 init 方法来做到这一点

然后它看起来像这样

```
CoreDataHelperClass *someobj = [[CoreDataHelperClass alloc]initWithname:@"name" andTimeStamp:@"Time" andMuscleGroup:@"musclegroup" andPicture:UIImagePNGRepresentation(someimageObj)];

```

要执行上述操作，您需要像这样在 CoreDataHelperClass 类中添加自己的 init 方法

.h 部分 CoreDataHelperClass

```
- (id)initWithName:(NSString*)name andTimeStamp:(NSString*)timeStamp andMuscleGroup:(NSString*)group andPicture:(NSData*)imageData;

```

.m 是 CoreDataHelperClass 的一部分

```
- (id)initWithName:(NSString*)name andTimeStamp:(NSString*)timeStamp andMuscleGroup:(NSString*)group andPicture:(NSData*)imageData
{

//您将代码分配给核心数据属性在此处

锻炼例程 *obj = [[锻炼例程分配]init];

obj.name = 名称；
obj.timestamp = 时间戳；

//等等

回归自我；

}

```

无论如何，您还可以做的是传递带有键值对的字典，获取自定义类中的值，或者您也可以传递一个 NSMutableArray，就像适合您的业务模型的那样，两者都可以工作。

您可以在 CoreDataHelperClass 中获取 Dictionary 或 Array 的值，并将这些值分配给您的属性。

希望我的查询正确，如果不是，请通过评论提及错误部分

# jquery - 使用 javascript/jquery 的 webkit 图像旋转，没有样式表

> ID：12657860
> 
> 赞同：0
> 
> 时间：2012-09-30T01:08:38.107
> 
> 标签：jquery, rotation

我有一个按钮，当它被点击时我想旋转 45 度，当它再次被点击时它再次旋转 45 度。我不能使用样式表并且一直在研究这个解决方案，因为它只使用了 JavaScript [http://jsfiddle.net/7b4VZ/3/](http://jsfiddle.net/7b4VZ/3/)并且想知道它是否可以设置为一个类，再次只使用 JavaScript然后我可以使用 jQuery 设置为切换类吗？

小提琴代码：

```
var img = document.images[0];
img.style.setProperty("-webkit-transition", "left 2s linear");
var slide = function(){
img.style.setProperty("left", "200px");
setTimeout(function(){
    img.style.setProperty("left", "0px");
    setTimeout(slide,2000);    
},2000);
}

slide();​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:48:25.777

您可以使用 CSS 转换进行旋转：http: [//jsfiddle.net/antishok/7b4VZ/60/](http://jsfiddle.net/antishok/7b4VZ/60/)

# c# - 使用 MSBuild 以编程方式构建解决方案

> ID：12657861
> 
> 赞同：1
> 
> 时间：2012-09-30T01:09:01.843
> 
> 标签：c#, visual-studio, msbuild

我正在为我的公司编写一个实用程序，它将以一键式的方式批量构建许多解决方案。总共大约有 8 个解决方案，每个解决方案平均有 20 个项目。该实用程序需要能够捕获每个解决方案的构建日志和错误总数，就像在命令行中构建时所做的那样。我知道我这是完成它的命令

```
msbuild mysolution.sln /t:build /verbosity:minimal /maxcpucount:xx 
```

但是，如果可能，我想使用 Microsoft.Build.Evaluation API。我知道 Project 对象可以加载单个项目，但无论如何构建一个完整的解决方案？我打算构建此实用程序以利用系统上的所有 CPU/内核并同时构建多个解决方案。我查看了 Microsoft.Build.Evaluation 的 MSDN 页面，尽管文档（仍然）很糟糕。

谢谢你的尽心帮助！

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:57:01.487

您不需要 Visual Studio 解决方案文件 (sln) 来构建多个项目。您可能知道，Visual Studio 项目文件只是 MSBuild XML 文件，它们可以属于其他项目文件。因此，构建一个项目文件，根据需要构建其他项目。这可以通过以下两种方式之一来完成。

首先，解决方案文件只是 MSBuild XML，因此任何可以生成 XML 的东西都可以生成解决方案。有关详细信息，请参阅[MSBuild XML 架构](http://msdn.microsoft.com/en-us/library/5dy88c2e.aspx)。

其次，[`Microsoft.Build.Evaluation.Project`](http://msdn.microsoft.com/en-us/library/microsoft.build.evaluation.project.aspx)使用构造函数以编程方式构造一个[`Microsoft.Build.Construction.ProjectRootElement`](http://msdn.microsoft.com/en-us/library/microsoft.build.construction.projectrootelement.aspx)实例，然后调用[`Project.Build()`](http://msdn.microsoft.com/en-us/library/dd234361.aspx)。具有添加常见元素类型的`ProjectRootElement`方法，例如[`CreateTaskElement()`](http://msdn.microsoft.com/en-us/library/microsoft.build.construction.projectrootelement.createtaskelement.aspx),[`CreatePropertyElement()`](http://msdn.microsoft.com/en-us/library/microsoft.build.construction.projectrootelement.createpropertyelement.aspx)和[`CreateTargetElement()`](http://msdn.microsoft.com/en-us/library/microsoft.build.construction.projectrootelement.createtargetelement.aspx).

也可以看看：

*   [用 MSBuild 替换 .sln 并将包含的项目包装到目标中](https://stackoverflow.com/questions/2472183/replace-sln-with-msbuild-and-wrap-contained-projects-into-targets)
*   [从 Visual Studio 解决方案文件和项目文件生成 MSBUILD 项目文件](https://stackoverflow.com/questions/5237884/generating-an-msbuild-project-file-from-a-visual-studio-solution-file-and-projec)。

# rubygems - padrino：找不到命令

> ID：12657865
> 
> 赞同：1
> 
> 时间：2012-09-30T01:09:56.367
> 
> 标签：rubygems, padrino

我成功地安装了 Padrino `sudo gem install padrino`，但是当我尝试运行时`padrino ...`，我得到了`-bash: padrino: command not found`。甚至`sudo`产生这个结果。还有其他人遇到这个问题吗？我看了看`/usr/bin`，但它不在那里。谢谢您的帮助。

我正在使用 Mac OS X.6.8。直到现在，我一整天都在成功安装和使用 gems。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:11:46.117

啊，修好了。查看`gem environment`输出后，我注意到列为 EXECUTABLE DIRECTORY 的路径不在我的`PATH`. 将它添加到我的`.bashrc`解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:55:37.963

你能试一下吗：

```
sudo gem update --system
gem search padrino --no-version | xargs sudo gem uninstall -a 
```

然后

```
sudo gem install padrino 
```

然后

```
which padrino
which padrino-gen 
```

您使用的是 rvm 还是 rbenv？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-26T20:23:13.367

我面临同样的情况，终端重启解决了我的问题。我使用*rbenv*作为版本管理器。即使*padrino*在 gems 文件夹中，命令本身也是无法访问的。

重新启动终端后，新安装的 gem 可用。

# python - 类变量与实例变量——Python

> ID：12657867
> 
> 赞同：7
> 
> 时间：2012-09-30T01:11:12.067
> 
> 标签：python

我在下面的示例中尝试了此示例，需要进行一些说明。在这两种情况下，我都可以在测试函数中访问类变量和实例。

所以，假设我必须定义一个需要在所有函数中使用的文字，这将是定义..self 变量或类变量的更好方法？

代码.py

```
class testclass:
    classvar = 'its classvariable LITERAL'
    def __init__(self,x,y):
        self.z = x
        self.classvar = 'its initvariable LITERAL'

        self.test()

    def test(self):
        print('class var',testclass.classvar)
        print('instance var',self.classvar)

if __name__ == '__main__':
    x = testclass(2,3) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T20:40:05.570

我知道这是一个旧的.. 但我在 1999 年 Guido van Rossum 的旧演示文稿中发现了这一点 ( [http://legacy.python.org/doc/essays/ppt/acm-ws/sld001.htm](http://legacy.python.org/doc/essays/ppt/acm-ws/sld001.htm) ) 和我认为它很好地解释了这个话题：

**实例变量规则**

通过实例（self.x）使用​​时，搜索顺序：

*   (1) 实例，(2) 类，(3) 基类
*   这也适用于方法查找

通过实例分配（self.x = ...）：

*   总是创建一个实例变量
*   实例变量的类变量“默认”

但...！

*   可变类变量：所有人共享的一份副本
*   可变实例变量：每个实例都有自己的

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T01:56:29.547

类变量非常适合所有实例使用的“常量”（从技术上讲，所有方法都是如此）。您可以使用模块全局变量，但使用类变量可以更清楚地与类关联。

类变量的用途也经常被您实际更改，但通常最好远离它们，原因与您远离通过更改全局变量来让程序的不同部分进行通信的原因相同。

实例变量用于实际上是实例一部分的数据。对于每个特定实例，它们可能不同，并且它们经常在单个特定实例的生命周期内发生变化。最好将实例变量用于在概念上属于实例一部分的数据，即使在您的程序中您碰巧只有一个实例，或者您有几个实例在实践中总是具有相同的值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-30T02:01:20.520

一个好的做法是只在类属性保持固定时才使用它们，关于它们的一个好处是可以在实例之外访问它们：

```
class MyClass():
    var1 = 1
    def __init__(self):
        self.var2 = 2

MyClass.var1 # 1 (you can reference var1 without instantiating)
MyClass.var2 # AttributeError: class MyClass has no attribute 'var2' 
```

如果`MyClass.var`已定义，则在 的每个实例中都应该相同`MyClass`，否则您会得到以下被认为令人困惑的行为。

```
a = MyClass()
b = MyClass()

a.var1, a.var2 # (1,2)
a.var1, a.var2 = (3,4) # you can change these variables
a.var1, a.var2 # (3,4)
b.var1, b.var2 # (1,2) # but they don't change in b
MyClass.var1 # 1         nor in MyClass 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-30T01:13:36.647

如果您希望它在所有实例之间共享，则应将其定义为类属性。如果您希望每个实例都有一个单独的变量（例如，如果不同的实例可能有不同的变量值），您应该将其定义为实例变量。

# java - 只是约定不好还是有问题？Java中的括号

> ID：12657868
> 
> 赞同：0
> 
> 时间：2012-09-30T01:11:11.950
> 
> 标签：java, conventions

我自学了 Java，由于我不记得的原因，我一直把括号写成

```
void method()
{
    if(true)
    {
        //code
    }
    else
    {
        //code
    }
} 
```

当我看到的所有例子都是

```
void method(){
    if(true){
        //code
    }else{
        //code
    }
} 
```

有谁知道它这样做的原因，是否有任何理由改变我写它的方式？我认为它更容易阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:15:54.053

这是“没有正确答案”之一

缩进代码的方式称为[Allman Style](http://en.wikipedia.org/wiki/Indent_style#Allman_style)

而另一种风格是[内核范式（KNF）](http://en.wikipedia.org/wiki/Kernel_Normal_Form)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T01:16:48.550

您使用的示例遵循 Sun 建议的风格，这是所谓的 K&R 风格的变体。但这并不重要，除非你在项目中保持一致，代码更易于阅读。但这没什么大不了的。

[http://en.wikipedia.org/wiki/Indent_style](http://en.wikipedia.org/wiki/Indent_style)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T06:19:57.613

虽然两者都是有效且可接受的样式，但第二种在示例（网络、书籍等）中更常见，只是为了节省空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T04:16:48.577

如果将 Java 项目移植到 JavaScript，只要避免使用第一种格式，就可以了。
在 JavaScript 中，如果您错过了分号，编译器会尝试为您插入分号。
正如您可能猜到的那样，这有时会导致调试欢闹。通常，检测何时不在行尾插入分号是半理智的，而不是学习所有边缘情况，只是不要这样做。

但是对于 Java，请*把自己搞砸*。
如果你不结束一个语句，你的编译器就会对你大喊大叫，所以它永远不会对什么是赋值和什么是控制块感到困惑。

# c# - 将二维数组解析为矩形

> ID：12657873
> 
> 赞同：3
> 
> 时间：2012-09-30T01:12:08.363
> 
> 标签：c#, arrays, algorithm, rectangles

我正在寻找一种将二维数组转换为尽可能少的矩形的方法，如下例所示：

```
 X
    12345678
    --------
  1|00000000
  2|00011100
  3|00111000
Y 4|00111000
  5|00111000
  6|00000000 
```

到矩形的角坐标：

遵循 (x1,y1);(x2;y2) 模板

```
rectangle #1 (4,2);(6,2)
rectangle #2 (3,3);(5,5) 
```

之前这里有一个类似的问题，但不幸的是，其答案中提供的链接已损坏，我无法再检查它。

我想在 C# 中执行此操作，但感谢任何形式的帮助。

（它甚至不必是尽可能少的矩形，但越少越好:)）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:01:06.470

我认为您正在尝试用最少的矩形数量覆盖 2D 平面中的一组点。[Find k rectangles so they cover the maximum number of points](https://stackoverflow.com/questions/3476778/find-k-rectangles-so-that-they-cover-the-maximum-number-of-points)的答案说这是一个 NP 完全问题并链接到[http://www.almaden.ibm.com/u/kclarkson/set_cover/p.pdf](http://www.almaden.ibm.com/u/kclarkson/set_cover/p.pdf)（其中对我有用）谷歌搜索发现[h​​ttp://2011.cccg.ca/PDFschedule/papers/paper102.pdf](http://2011.cccg.ca/PDFschedule/papers/paper102.pdf)。

有论文同意矩形覆盖是 NP 完全的，但实际上并没有证明它，并且对此的参考似乎异常难以捉摸 - [https://cstheory.stackexchange.com/questions/3957/prove-that-the-problem- of-rectilinear-picture-compression-is-np-complete](https://cstheory.stackexchange.com/questions/3957/prove-that-the-problem-of-rectilinear-picture-compression-is-np-complete)

我从这些文件中得到的是：

1) 不太可能有一种经济实惠的方式来获得大问题的绝对最佳答案，因此您可能不得不花费大量时间通过耗尽所有可能的方法来为某种意义上的小问题获得准确答案替代方案，或者可能使用分支定界之类的方法，或者选择负担得起的方法——比如贪婪搜索、光束搜索或有限差异搜索——这些都不能保证给你绝对最好的答案。

2）在这种情况下，这个问题似乎有更多的受限版本，它们不是 NP 完全的。您可能会阅读一篇论文并发现您的问题有一些细节，这意味着该方法适用于您。一个例子是 Franzblau 和 Kleitman 的“用矩形构造区域的算法：独立和最小生成集用于区间集合*”——不过，我在 ACM 数字图书馆中找到了这个——我不知道它是否通常可以访问。它适用于一组受限的多边形。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T02:38:36.130

这可能会帮助您入门。如果将二进制数据转换为数字，则会得到：

```
0
28
56
56
56
0 
```

因此，只要有连续相等的数字，就会有一个矩形。

# css - 将css等外部文件加载到webbrowser控件中

> ID：12657875
> 
> 赞同：0
> 
> 时间：2012-09-30T01:12:31.690
> 
> 标签：css, webbrowser-control, external

我正在使用这种方法在我的程序中嵌入一个网页：

```
WebBrowser1.DocumentText = "<b>hello</b> world <img src=""/images/amiga.png"" />" 
```

所以html在程序中，但我想从外部加载css和图像（例如./themes/default/style.css）。

那么在开发过程中我应该把文件放在哪里，路径是什么？

我希望 html 是静态的，但允许用户更改 css。

**编辑：**实际上，因为它在代码中，如果 vb 中有一些东西放在程序位置，那可以工作，比如 %programlocation% + "/themes/default/style.css"

*而且我也在考虑使用 gecko 代替 ie 渲染引擎，所以如果有人知道这样做的好方法，请告诉我*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:19:23.330

所以你想纯粹从文件系统中做到这一点，没有网络服务器？我不完全确定这是否可行，但你可以尝试这样做：

```
WebBrowser1.DocumentText = "<head><link rel=""StyleSheet"" HREF=""file:///" & Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location).Replace("\\", "/") & "/themes/default/style.css"" TYPE=""text/css"" /></head><body><b>hello</b> world <img src=""/images/amiga.png"" /></body></html>" 
```

# javascript - JQuery Mobile 将事件绑定到列表视图

> ID：12657876
> 
> 赞同：0
> 
> 时间：2012-09-30T01:13:06.587
> 
> 标签：javascript, jquery-mobile

我正在尝试将 vclick 添加到动态 JQM 列表视图。但我不知道如何识别正在点击的数字。

[http://jsfiddle.net/2hR9w/](http://jsfiddle.net/2hR9w/)

```
for (var x=0; x<2; x++ ) {
    $("#listitem"+x).bind("vclick",function(e)
           { console.log("clicked"+x); });
    console.log(x);
} 
```

​</p>

代码有问题，但我不明白为什么 x 总是最大循环值，因为我觉得它应该在循环时设置。

它总是读取 clicked2，从不 clicked1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:03:26.570

[http://jsfiddle.net/2hR9w/7/](http://jsfiddle.net/2hR9w/7/)

该值一直被报告为“2”，因为当点击事件运行时，该值是 2 .....它已经到达分配 for-loop 的末尾。

您根本不需要循环 - 请参阅随附的小提琴。

# ruby-on-rails - Ruby on Rails：rspec 上的“rails 生成插件”错误

> ID：12657877
> 
> 赞同：1
> 
> 时间：2012-09-30T01:13:23.410
> 
> 标签：ruby-on-rails, ruby-on-rails-plugins, rspec-rails

我一直在自学开发 Rails 插件。我正在使用的一个参考教程是[here](http://craig-russell.co.uk/2011/11/09/how-to-create-and-test-a-ruby-on-rails-plugin.html#.UGbQAJjA-M4)。

不幸的是，自从我运行“rails generate plugin”的第一步以来，我似乎陷入了困境。它返回一个错误，说“rspec [未找到]”。

```
c:\rails\test\rails generate plugin HelloWorld

    create  vendor/plugins/hello_world
    create  vendor/plugins/hello_world/MIT-LICENSE
    create  vendor/plugins/hello_world/README
    create  vendor/plugins/hello_world/Rakefile
    create  vendor/plugins/hello_world/init.rb
    create  vendor/plugins/hello_world/install.rb
    create  vendor/plugins/hello_world/uninstall.rb
    create  vendor/plugins/hello_world/lib
    create  vendor/plugins/hello_world/lib/hello_world.rb
     error  rspec [not found] 
```

我试图自己寻找可能的解决方案。我尝试的一个方法是更新项目的 bundler gem，希望这可能来自插件兼容性的错误。无论如何，以防万一它可以帮助你们提供一些可能出错的线索，我还将我的 GemFile 发布如下。

```
 source 'http://rubygems.org'

    gem 'rails', '3.1.1'
    gem 'annotate', ">=2.5.0"
    gem 'sqlite3'
    gem 'faker', '0.3.1'
    gem 'gravatar_image_tag', '1.0.0.pre2'
    gem 'will_paginate', '3.0.pre2'
    gem 'jquery-rails'
    gem 'pg', '0.14.0'
    gem  'bundler', '1.2.0.rc.2'
    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'coffee-rails', '~> 3.1.1'
      gem 'uglifier', '>= 1.0.3'
    end

    group :development do
      gem 'rspec-rails', '2.6.1'

    end

    group :test do
      gem 'rspec-rails', '2.6.1'
      gem 'webrat', '0.7.1'
      gem 'factory_girl_rails', '1.0'
    end 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T01:43:22.573

我认为它正在尝试为插件生成模板 rspec 示例，但 rspec 目录不存在。`rails g rspec:install`在将 rspec 添加到 Gemfile 后，您是否运行了 rspec 安装程序 ( )？

# jquery - Jquery if not mouseover 语句

> ID：12657878
> 
> 赞同：3
> 
> 时间：2012-09-30T01:13:27.603
> 
> 标签：jquery, html, if-statement

我正在尝试使用一些 jQuery 和 HTML。

我有两个`div`包含各种内容的元素容器。这两个元素彼此相邻。div 不包含彼此。我编写了代码，以便当我将鼠标悬停在一个 div ( `div#1`) 上时，另一个 div ( `div#2`) 向下滑动 ( `.slideDown`)。

此外，当您 mouseout 时`div#2`，`div#2`向上滑动 ( `.slideUp`)。

问题是 if`div#2`已经向下滑动，如果您再次将鼠标悬停`div#1`，`div#2`将再次向上和向下滑动。这很烦人和不专业。只有当我的鼠标没有结束时，我才需要它向上滑动`div#1`。

这是我的目标：我需要找到一个 jQuery 语句，上面写着“只有当鼠标“超出”`div#2`而**不是“超出”** `div#1`时，才向上滑动`div#2`。”

这可能吗？

我很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:25:41.850

您需要`.stop()`在重新为元素设置动画之前停止动画。这将防止队列被重复的动画填满：

```
$('#stop').hover(function() {
    $(this).stop().animate({width: '250px'});
}, function() {
    $(this).stop().animate({width: '150px'});
}); 
```

**演示：http: [//jsfiddle.net/Blender/2TkNc/2/](http://jsfiddle.net/Blender/2TkNc/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:03:35.130

如果我正确理解了您的问题，您应该这样做：

```
$('.div1').die('mouseover').live('mouseover',function(){
                                     $('.div2').slideDown();
                                     });
$('.div2').die('mouseover hover').live('mouseout',function(){
                                     $('.div2').slideUp();
                                     }); 
```

[http://jsfiddle.net/2TkNc/5/](http://jsfiddle.net/2TkNc/5/)

# c# - 3组正则表达式检查

> ID：12657880
> 
> 赞同：0
> 
> 时间：2012-09-30T01:13:49.223
> 
> 标签：c#, regex

我想要以下正则表达式和输入字符串中的一组 3 个值

在 SO 专家的帮助下，这就是我所拥有的：

```
string item = "strawb bana 1 10 1.93";
string pattern = @"(?<str>[\w\s]*)(?<qty>\s\d*\s)(?<num>\d*\.\d+)"; 
```

基本上，

第一个值将是产品描述。我在末尾加了一个 1，以防描述中有数字。

第二个值是数量。

第三个价值是价格。

这看起来正确吗？我可能会错过其他案例吗？

结果应该如下

```
Group 1 = "strawb bana 1"
Group 2 = "10"
Group 3 = "1.93" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:17:11.887

您似乎忘记在第一次匹配中包含数字。

```
string item = "strawb bana 1 10 1.93";
string pattern = @"(?<str>[\w\s]*)(?<qty>\s\d*\s)(?<num>\d*\.\d+)"; 
```

应该：

```
string item = "strawb bana 1 10 1.93";
string pattern = @"(?<str>[\w\s\d]*)(?<qty>\s\d*\s)(?<num>\d*\.\d+)"; 
```

# c# - 此代码有什么替代方法可以知道字节数吗？

> ID：12657884
> 
> 赞同：0
> 
> 时间：2012-09-30T01:14:13.987
> 
> 标签：c#, encryption, rijndaelmanaged, cryptostream

好的，所以我有这个用于解密文件的代码

```
 public static byte[] DecryptFile(string inputFile, string skey)
    {
        RijndaelManaged aes = new RijndaelManaged();

            byte[] key = ASCIIEncoding.UTF8.GetBytes(skey);

            using (FileStream fsCrypt = new FileStream(inputFile, FileMode.Open))
            {
                using (CryptoStream cs = 
    new CryptoStream(fsCrypt, aes.CreateDecryptor(key, key),
    CryptoStreamMode.Read))
                {
                    using (BinaryReader reader = new BinaryReader(cs))
                    {
                        byte[] str = reader.ReadBytes(Convert.ToInt32(cs.Length));
                        reader.Close();

                        cs.Close();

                        return (str);
                    }
                }
            }

        }
    } 
```

现在我遇到了问题，我无法确定字节长度！我试过了

```
cs.Length 
```

但它说**流不支持寻找**（类似的东西）我也尝试通过计算文件的字节数

```
File.ReadAllBytes(encrypted_file_path).Length 
```

*但它说该文件正在使用中...由于 FileStream fsCrypt*确实在使用中

 *与此同时，我`cs.Length`用一些大整数替换了它以使其工作..比如 1000000..不会导致任何异常的最大整数..它确实以这种方式工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:19:10.630

在解密整个文件之前，您无法知道长度。

因此，您需要从一个小数组开始，并在它变满时将其变大。

`MemoryStream`班级就是这样做的；你可以`cs.CopyTo()`进入一个新的 MemoryStream 并调用`ToArray()`.*

# dwolla - Dwolla 上的定期付款 API

> ID：12657887
> 
> 赞同：0
> 
> 时间：2012-09-30T01:15:52.630
> 
> 标签：dwolla

只需通过 API 运行，看看我是否可以将 Dwolla 用于需要递归计费的 Web 应用程序 - 对此没有 API 支持，是吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:44:31.017

Michael- 你在上面提到的重复将被添加到 v3 API 版本中。

*   这是延迟了吗？

此外，我在 12 月 25 日至 1 月 1 日期间向您发布的电子邮件地址发送了一封电子邮件，并且没有回复之前关于资金来源端点的帖子。

*   您收到这封关于 Clay Gulick 关于 GetSatisfaction 问题的私人电子邮件了吗？

这些资金来源 API 似乎仍然有很多来自开发人员社区的问题，并且没有太多关于如何使用 oauth 令牌将 FORM 进程从 REGISTER 链接到 FUNDINGSOURCE BANKACCOUNT ENDPOINTS 的文档

您能否回答这些问题或让 Dwolla 开发人员回答这些问题 - 大多数问题都在 GetSatisfaction 上。

注册用户、重复支付流和创建银行账户并验证它对于这个社区似乎感兴趣的大多数交易类型都至关重要 - 与'avis' 单个 FORM UX 流程流相比。长期以来，这些都是默认的 ACH 端点。我不确定为什么 veridian 不开放这些并为 Dwolla 减少摩擦，为您的 3rd 方开发人员创建一个零摩擦的用户体验 API。

感谢您提前回答我们的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:37:15.563

埃里克是正确的。我们肯定计划添加一个用于定期/定期付款的 API，但这要等到我们的 API V3 发布之后才会发生，这将在接近年底时发生......

但是，我们即将取消请求付款方式的 PIN 要求，因此根据您的流程，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:33:30.023

目前没有对定期付款的 API 支持，我不确定 Dwolla 是否计划添加它。

您可以通过使用用户的 Dwolla ID 或电话号码定期调用[请求方法的 API 来做您希望做的事情，如此](https://www.dwolla.com/oauth/rest/transactions/request)[处](http://developers.dwolla.com/dev/docs/transactions/request)所述。用户每次仍需“支付账单”，但会在 Dwolla 请求资金时提示您这样做。

# html - 为什么 Firefox 忽略 -moz-box-sizing 和 box-sizing？

> ID：12657898
> 
> 赞同：-2
> 
> 时间：2012-09-30T01:17:33.690
> 
> 标签：html, css

我有一个 CSS 类：

```
#CenterColumnWrapper
{
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;

    padding-top: 25px;
} 
```

在 HTML 中：

```
<div id="CenterColumnWrapper"><div> 
```

当我在 Chrome 和 Opera 中测试它时一切正常，但是当我在 Firefox 中测试它时，它会忽略`box-sizing`.

为什么？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:59:01.820

了解 Firefox 为何忽略您的 CSS 的一个好方法是使用 Firebug 插件。使用 Firebug，您可以查看 CSS 的哪一部分应用于某个元素，在本例中为`#CenterColumnWrapper`.

# oracle - 如何定义具有不同表列的行类型？

> ID：12657899
> 
> 赞同：0
> 
> 时间：2012-09-30T01:18:24.643
> 
> 标签：oracle, plsql, cursor

通常，我应该做类似的事情

```
my_record my_table%ROWTYPE;

cursor c1 (bla bla) is 
select * from my_tables... 
```

但是如果我有类似的东西会发生什么

```
select b.*, c.col1, c.col2 
from my_table b, mytable1 c ... 
```

如何定义一个`my_record my_table%ROWTYPE`具有我需要的列的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:26:02.297

如果您使用的是游标，则只需在游标之后将变量声明为

```
my_record c1%rowtype; 
```

# php - 使用 php 更改 url 变量

> ID：12657902
> 
> 赞同：1
> 
> 时间：2012-09-30T01:18:39.950
> 
> 标签：php

假设我在 php 变量中有这样的 url：

```
$url = "http://mywebsite.extension/names/level/etc/page/x"; 
```

如何在`.com`（或其他扩展名）之后和之前自动删除所有内容`/page/2`？

基本上我希望 $url 中的每个 url 都变成[http://mywebsite.extension/page/x](http://mywebsite.extension/page/x)

有没有办法在php中做到这一点？：秒

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:22:43.073

我认为这[`parse_url()`](http://php.net/manual/en/function.parse-url.php)是您正在寻找的功能。您可以使用它将 URL 分解为其组成部分，然后根据需要将其重新组合在一起，并根据需要添加自己的内容。

正如 PeeHaa 所指出的，`explode()`这对于划分路径很有用。

# svn - Ant Build Open Source Buddi 失败

> ID：12657904
> 
> 赞同：0
> 
> 时间：2012-09-30T01:19:22.600
> 
> 标签：svn, ant, sourceforge

我在构建 Buddi 会计开源软件时遇到了问题。请做一些帮助。

我做了以下事情：svn co [https://buddi.svn.sourceforge.net/svnroot/buddi/trunk@1801](https://buddi.svn.sourceforge.net/svnroot/buddi/trunk@1801)

然后我去工作区并执行构建步骤：ant

但它给了我编译信息：

```
compile:
  [mkdir] Created dir: /Users/LeoLi/Documents/UMD/Master Study/Fall 2012/CMSC737/Buddi-3.4.1.3.src/build/classes
  [javac] /Users/LeoLi/Documents/UMD/Master Study/Fall 2012/CMSC737/Buddi-3.4.1.3.src/build.xml:473: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
  [javac] Compiling 252 source files to /Users/LeoLi/Documents/UMD/Master Study/Fall 2012/CMSC737/Buddi-3.4.1.3.src/build/classes
  [javac] /Users/LeoLi/Documents/UMD/Master Study/Fall 2012/CMSC737/Buddi-3.4.1.3.src/src/org/homeunix/thecave/buddi/Const.java:23: ?Ҳ???????
  [javac] ???ţ? ?? AccountBalance
  [javac] λ?ã? ?????? org.homeunix.thecave.buddi.plugin.builtin.report
  [javac] import org.homeunix.thecave.buddi.plugin.builtin.report.AccountBalance;
  [javac]                                                        ^
  [javac] /Users/LeoLi/Documents/UMD/Master Study/Fall 2012/CMSC737/Buddi-3.4.1.3.src/src/org/homeunix/thecave/buddi/Const.java:213: ?Ҳ???????
  [javac] ???ţ? ?? AccountBalance
  [javac] λ?ã? ?? org.homeunix.thecave.buddi.Const
  [javac]       AccountBalance.class.getCanonicalName(),
  [javac]       ^
  [javac] 2 ???? 
```

然后我试图在报告目录中找到AccountBalance.java，毫不奇怪，那里没有这个文件。

也许我们需要在 ant 构建 Buddi 项目之前做点什么？

更新：已经下载了1800版本，但是编译时出现如下编译错误：

```
[javac] /var/lib/jenkins/jobs/Buddi/workspace/build.xml:473: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
[javac] Compiling 252 source files to /var/lib/jenkins/jobs/Buddi/workspace/build/classes
[javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5
[javac] /var/lib/jenkins/jobs/Buddi/workspace/src/org/homeunix/thecave/buddi/view/dialogs/ScheduledTransactionEditorDialog.java:136: error: getType() in ScheduledTransactionEditorDialog cannot override getType() in Window
[javac]     public String getType(){
[javac]                   ^
[javac]   return type String is not compatible with Type
[javac] Note: /var/lib/jenkins/jobs/Buddi/workspace/src/org/homeunix/thecave/buddi/plugin/builtin/preference/PluginPreferences.java uses or overrides a deprecated API.
[javac] Note: Recompile with -Xlint:deprecation for details.
[javac] Note: Some input files use unchecked or unsafe operations.
[javac] Note: Recompile with -Xlint:unchecked for details.
[javac] 1 error
[javac] 1 warning 
```

似乎是不推荐使用的 API 东西。以前，此方法是受保护的，我已将其更改为公开。不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:48:36.277

最新更改的作者忘记向 SVN 添加文件。它发生了。命令后很清楚：

```
svn blame src/org/homeunix/thecave/buddi/Const.java
svn log -r1800:1801 
```

你可以通知他这件事。要构建，请使用以前的版本，`1800`.

但是，执行目标时我仍然遇到问题`windows`。所以我做了

```
ant generic
java -jar build/Buddi-3.4.1.2.jar 
```

# c++ - 包含其他二叉树的二叉树

> ID：12657912
> 
> 赞同：1
> 
> 时间：2012-09-30T01:21:47.373
> 
> 标签：c++, binary-tree

我有一个函数应该告诉给定的二叉树 A 是否包含在给定的二叉树 B 中。该函数将“包含”定义为“A 被 B 覆盖，或 B 的任何完整子树”。例如，如果树 A 是一棵空树而树 B 不是，那么 A 会包含在 B 中吗？如果两个都是空的呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:25:45.547

在数学意义上，空集（树只是集合的特化）包含在每个其他集合中，包括其他空集。

所以对你的两个问题都是肯定的。

空集甚至有它的 wiki：[http ://en.wikipedia.org/wiki/Empty_set](http://en.wikipedia.org/wiki/Empty_set)

![在此处输入图像描述](../Images/692948b32c71a54ab31adc8013396bc4.png)

* * *

无论如何，从您的实现中可以明显看出，空树包含在所有其他树中，示例实现如下所示：

```
bool Tree::contains(const Tree& otherTree)
{
   for (n: otherTree)
   {
      if (!contains(n)) 
         return false;
   }
   return true;
} 
```

当然，我可以想象更好的实现，尤其是在对树进行排序时 - 但关键是如果`for(n: otherTree)`不会导致迭代，那么结果是正确的。

# ios - 在 Xcode 中使用草图数据渲染立方体

> ID：12657916
> 
> 赞同：0
> 
> 时间：2012-09-30T01:22:43.800
> 
> 标签：ios, opengl-es, collada

我正在玩 Xcode 4.5 中的 OpenGL ES 模板。我在 Google Sketchup 中绘制了一个立方体并导出到 collada。我将顶点和法线数据复制到 Xcode 中的 open gl 模板中，如下所示：

```
GLfloat gCubeVertexData[] =
{
    // Data layout for each line below is:
    // positionX, positionY, positionZ,     normalX, normalY, normalZ,
//    0.5f, -0.5f, -0.5f,        1.0f, 0.0f, 0.0f,
//    0.5f, 0.5f, -0.5f,         1.0f, 0.0f, 0.0f,
//    0.5f, -0.5f, 0.5f,         1.0f, 0.0f, 0.0f,
//    0.5f, -0.5f, 0.5f,         1.0f, 0.0f, 0.0f,
//    0.5f, 0.5f, -0.5f,         1.0f, 0.0f, 0.0f,
//    0.5f, 0.5f, 0.5f,          1.0f, 0.0f, 0.0f,
//    
//    0.5f, 0.5f, -0.5f,         0.0f, 1.0f, 0.0f,
//    -0.5f, 0.5f, -0.5f,        0.0f, 1.0f, 0.0f,
//    0.5f, 0.5f, 0.5f,          0.0f, 1.0f, 0.0f,
//    0.5f, 0.5f, 0.5f,          0.0f, 1.0f, 0.0f,
//    -0.5f, 0.5f, -0.5f,        0.0f, 1.0f, 0.0f,
//    -0.5f, 0.5f, 0.5f,         0.0f, 1.0f, 0.0f,
//    
//    -0.5f, 0.5f, -0.5f,        -1.0f, 0.0f, 0.0f,
//    -0.5f, -0.5f, -0.5f,       -1.0f, 0.0f, 0.0f,
//    -0.5f, 0.5f, 0.5f,         -1.0f, 0.0f, 0.0f,
//    -0.5f, 0.5f, 0.5f,         -1.0f, 0.0f, 0.0f,
//    -0.5f, -0.5f, -0.5f,       -1.0f, 0.0f, 0.0f,
//    -0.5f, -0.5f, 0.5f,        -1.0f, 0.0f, 0.0f,
//    
//    -0.5f, -0.5f, -0.5f,       0.0f, -1.0f, 0.0f,
//    0.5f, -0.5f, -0.5f,        0.0f, -1.0f, 0.0f,
//    -0.5f, -0.5f, 0.5f,        0.0f, -1.0f, 0.0f,
//    -0.5f, -0.5f, 0.5f,        0.0f, -1.0f, 0.0f,
//    0.5f, -0.5f, -0.5f,        0.0f, -1.0f, 0.0f,
//    0.5f, -0.5f, 0.5f,         0.0f, -1.0f, 0.0f,
//    
//    0.5f, 0.5f, 0.5f,          0.0f, 0.0f, 1.0f,
//    -0.5f, 0.5f, 0.5f,         0.0f, 0.0f, 1.0f,
//    0.5f, -0.5f, 0.5f,         0.0f, 0.0f, 1.0f,
//    0.5f, -0.5f, 0.5f,         0.0f, 0.0f, 1.0f,
//    -0.5f, 0.5f, 0.5f,         0.0f, 0.0f, 1.0f,
//    -0.5f, -0.5f, 0.5f,        0.0f, 0.0f, 1.0f,
//    
//    0.5f, -0.5f, -0.5f,        0.0f, 0.0f, -1.0f,
//    -0.5f, -0.5f, -0.5f,       0.0f, 0.0f, -1.0f,
//    0.5f, 0.5f, -0.5f,         0.0f, 0.0f, -1.0f,
//    0.5f, 0.5f, -0.5f,         0.0f, 0.0f, -1.0f,
//    -0.5f, -0.5f, -0.5f,       0.0f, 0.0f, -1.0f,
//    -0.5f, 0.5f, -0.5f,        0.0f, 0.0f, -1.0f

    9.8425197/9.8425197, 9.8425197/9.8425197, 0.0000000/9.8425197,    0.0000000, 0.0000000, -1.0000000,
    0.0000000/9.8425197, 0.0000000/9.8425197, 0.0000000/9.8425197,    0.0000000, 0.0000000, -1.0000000,
    0.0000000/9.8425197, 9.8425197/9.8425197, 0.0000000/9.8425197,    0.0000000, 0.0000000, -1.0000000,
    9.8425197/9.8425197, 0.0000000/9.8425197, 0.0000000/9.8425197,    0.0000000, 0.0000000, -1.0000000,
    0.0000000/9.8425197, 9.8425197/9.8425197, 8.2677165/9.8425197,    -1.0000000, 0.0000000, 0.0000000,
    0.0000000/9.8425197, 0.0000000/9.8425197, 0.0000000/9.8425197,    -1.0000000, 0.0000000, 0.0000000,

    0.0000000/9.8425197, 0.0000000/9.8425197, 8.2677165/9.8425197,    -1.0000000, 0.0000000, 0.0000000,
    0.0000000/9.8425197, 9.8425197/9.8425197, 0.0000000/9.8425197,    -1.0000000, 0.0000000, 0.0000000,
    0.0000000/9.8425197, 9.8425197/9.8425197, 8.2677165/9.8425197,    -0.0000000, 1.0000000, 0.0000000,
    9.8425197/9.8425197, 9.8425197/9.8425197, 0.0000000/9.8425197,    -0.0000000, 1.0000000, 0.0000000,
    0.0000000/9.8425197, 9.8425197/9.8425197, 0.0000000/9.8425197,    -0.0000000, 1.0000000, 0.0000000,
    9.8425197/9.8425197, 9.8425197/9.8425197, 8.2677165/9.8425197,    -0.0000000, 1.0000000, 0.0000000,

    9.8425197/9.8425197, 9.8425197/9.8425197, 0.0000000/9.8425197,    1.0000000, 0.0000000, 0.0000000,
    9.8425197/9.8425197, 0.0000000/9.8425197, 8.2677165/9.8425197,    1.0000000, 0.0000000, 0.0000000,
    9.8425197/9.8425197, 0.0000000/9.8425197, 0.0000000/9.8425197,    1.0000000, 0.0000000, 0.0000000,
    9.8425197/9.8425197, 9.8425197/9.8425197, 8.2677165/9.8425197,    1.0000000, 0.0000000, 0.0000000,
    9.8425197/9.8425197, 0.0000000/9.8425197, 8.2677165/9.8425197,    -0.0000000, -1.0000000, -0.0000000,
    0.0000000/9.8425197, 0.0000000/9.8425197, 0.0000000/9.8425197,    -0.0000000, -1.0000000, -0.0000000,

    9.8425197/9.8425197, 0.0000000/9.8425197, 0.0000000/9.8425197,    -0.0000000, -1.0000000, -0.0000000,
    0.0000000/9.8425197, 0.0000000/9.8425197, 8.2677165/9.8425197,    -0.0000000, -1.0000000, -0.0000000,
    9.8425197/9.8425197, 0.0000000/9.8425197, 8.2677165/9.8425197,    0.0000000, 0.0000000, 1.0000000,
    0.0000000/9.8425197, 9.8425197/9.8425197, 8.2677165/9.8425197,    0.0000000, 0.0000000, 1.0000000,
    0.0000000/9.8425197, 0.0000000/9.8425197, 8.2677165/9.8425197,    0.0000000, 0.0000000, 1.0000000,
    9.8425197/9.8425197, 9.8425197/9.8425197, 8.2677165/9.8425197,    0.0000000, 0.0000000, 1.0000000
}; 
```

![在此处输入图像描述](../Images/f0b954c6d83be15a5c665e21197776e1.png)

当我运行时，我在下面有渲染的立方体，所以有些不对劲。

=======

看起来如果我使用法线，我不需要提供索引来渲染 3D 对象。但在我的情况下，顶点数据或正常数据似乎有问题......有人知道这两个数据在collada中是如何排列的吗？我通读了文档，但找不到答案...谢谢

# ios5 - iOS 5：从按钮推送视图

> ID：12657918
> 
> 赞同：0
> 
> 时间：2012-09-30T01:23:53.050
> 
> 标签：ios5, uiviewcontroller, xcode4.2, uistoryboard

我正在尝试从按钮的 IBAction 推送视图，但出现以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[WebView initWithCoder:]: unrecognized selector sent to instance 0x68902b0' 
```

代码：

```
-(IBAction)showWebsite:(id)sender {
NSLog(@"Web View!!!");
UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController* vc = [sb instantiateViewControllerWithIdentifier:@"web"];
[self.navigationController pushViewController:vc animated:YES]; 
```

知道可能出了什么问题吗？_(IBAction) 连接到`TouchUpInside`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:57:58.460

确保将第二个视图的 .h 导入到第一个视图的 .m 中。

如果您正在使用情节提要并且只想通过按钮从一个视图切换到另一个视图，您可以在第一个视图上放置一个按钮，将第二个 uiview 控制器拖放到情节提要上，然后右键单击该按钮并将连接拖动到第二个视图。

要返回第一个视图，请仅重复此过程，将第二页上的按钮连接到第一个视图。

# email - CakeEmail::viewVars - CakePHP

> ID：12657919
> 
> 赞同：0
> 
> 时间：2012-09-30T01:24:25.933
> 
> 标签：email, cakephp, cakephp-2.0

我正在尝试根据以下配置设置变量 $purchase 以在我的电子邮件模板中使用：

```
App::uses('CakeEmail', 'Network/Email');
$email = new CakeEmail();
$email->emailFormat('html');
$email->template('new_order_email', 'default');
$email->from(array('info@mydomain.com' => 'A Great Site'));
$email->to($this->request->data['email']);
$email->subject('Order details');
$email->viewVars($purchase);
$email->send(); 
```

但是当我尝试在模板中使用 $purchase 变量时，这不起作用。相反，发送的电子邮件包含以下错误：

> 注意（8）：未定义变量：purchase [APP/View/Emails/html/new_order_email.ctp, line 2]

这表明 $purchase 不可用，即使我确实使用 CakeEmail:viewVars(); 设置了该变量；功能。任何想法为什么我会遇到这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T01:35:00.087

用这个：

```
$email->viewVars(array('purchase' => $purchase)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T07:08:03.903

最快最短的方法：

```
$email->viewVars(compact('purchase')); 
```

它会将 var`$purchase`作为相同的“购买”键传递到电子邮件 viewVars 中，这正是您在这里所需要的。

您还可以通过这种方式快速添加更多变量：

```
$html = 'foo';
$url = '/my/url';

$email->viewVars(compact('purchase', 'html', 'url')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T11:48:03.643

看我的回答[这里](https://stackoverflow.com/questions/10196759/cakemail-doesnt-recognize-to-and-viewvars-functions/19705245#19705245)

```
$emial->viewVars($valiables); 
```

在您的电子邮件模板中打印此内容。那么您将能够看到所有变量:)

```
var_dump($this->viewVars); 
```

# algorithm - 计算边缘连通性的有效算法？

> ID：12657920
> 
> 赞同：0
> 
> 时间：2012-09-30T01:24:41.410
> 
> 标签：algorithm, graph-theory, graph-algorithm, shortest-path

我想知道的是，是否有任何文献可供我阅读，用于确定给定图中所有边的边连通性的算法。

给定边的边连通性（正如我所理解的）是通过给定边的最短路径（差异节点之间）的数量。也就是说，如果我们要从每个节点到每个其他节点，我们将通过多少次给定的边。

任何帮助/资源将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:35:01.517

据我所知，这被称为边缘中介。这是一篇关于顶点介数的好算法的论文，它可以很容易地推广到边缘介数：

布兰德斯，乌尔里克 (2001)。“一种更快的中介中心性算法”（PDF）。数学社会学杂志 25: 163–177 [http://www.inf.uni-konstanz.de/algo/publications/b-fabc-01.pdf](http://www.inf.uni-konstanz.de/algo/publications/b-fabc-01.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:51:46.963

使用 Dijkstra 算法找到最短路径。重复使用此算法来确定所有节点对的最短路径。现在您可以简单地总结每条路径中每条边的出现情况。

# javascript - 加载框架上的 Javascript 事件

> ID：12657934
> 
> 赞同：1
> 
> 时间：2012-09-30T01:28:26.390
> 
> 标签：javascript, jquery, events, frame, jquery-events

我不太清楚如何在另一个框架发生更改时通知一个框架。

```
<frameset rows="*,50">
    <frame id="main_frame" src="mainframe" frameborder="0" name="main_frame">
    <frame id="footer" src="footer" frameborder="0" scrolling="no" noresize="noresize" name="footer">
</frameset> 
```

加载后，页脚框架需要在大型机中设置一些值。如果用户加载另一个页面，则必须再次进行此设置。在页脚中，我希望在主框架完成加载（每次更改时）时有一个事件。

这可能吗（甚至可能使用 jQuery）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:35:41.860

下面只是一个例子；我使用了 jQuery 的加载事件，这段代码将被放置在你的`main_frame`框架中。它获取框架的父级，然后根据数组获取子级框架。希望您可以将其推断为您需要的内容。

在此示例中，假定`yourValue`变量是任一帧中的全局变量。

```
$(document).ready(function() {
    $(window).load(function (){
        window.parent.frames[0].yourValue = 4; // change values of main frame
        window.parent.frames[1].yourValue = 4; // change values of footer frame
    });
}); 
```

# php - 需要 Magento 的基本建议：在管理部分修改特定的产品网格？

> ID：12657935
> 
> 赞同：3
> 
> 时间：2012-09-30T01:28:34.760
> 
> 标签：php, magento

我有一些关于修改 Magento 管理部分的一般性问题，希望能得到解答。我是 Magento 的新手，所以请多多包涵。

我的目标是在该部分的“类别产品”表中添加一个带有产品属性（例如“尺寸”）的新列`Catalog -> Manage Cateories`（参见下面的屏幕截图）。

没有一点 Magento 开发经验，我不太确定从哪里开始。`Grid.php`我查看了目录下的一些文件`adminhtml`，虽然我看到了一堆类似的语句`addColumn(...)`，但我不确定在我的新属性列中的位置。

另外，我假设不是直接修改任何核心文件，而是将它们复制到`local`文件夹下的相同路径并在那里编辑或以某种方式扩展它们？我是否必须编辑任何配置文件或执行其他任何操作才能反映更改？我 - 通过这样做 - 实际上是在创建自己的模块吗？

我还读到我应该在进行任何更改之前禁用“编译”。为什么是这样？还有什么要考虑的吗？

我再次非常感谢任何帮助，并感谢我的问题必须看起来很基本。您可以指出我的任何补充资源将不胜感激。谢谢。

![在此处输入图像描述](../Images/e20f0aac88a9431bd3a0568a2c6dceec.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T08:18:48.870

实际上，您应该首先了解要编辑的文件以及如何编辑它。在这种情况下，您想要修改`app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tab/Product.php`，但正如您所说，您不应该**修改**当前位置的文件。有两种方法可以以“正确”的方式修改文件。

1.  （更难但更可扩展）在其中创建一个新模块`local`并告诉 Magento`etc/config.xml`您正在用这个新模块中的不同块覆盖该块（这只是一个 php 类），并使新类`extend`成为核心 Block 类。然后你只需要覆盖一个函数（`_prepareColumns`）。
2.  （更容易）将文件复制`app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tab/Product.php`到`app/code/local/Mage/Adminhtml/Block/Catalog/Category/Tab/Product.php`并修改您想要的功能（`_prepareColumns`）

如果您是 Magento 的新手，我建议您使用第二种选择，因为它更容易。Magento 将始终在加载文件`local`之前加载文件，因此将不再使用`core`文件 in并且将使用您的版本。要了解更多信息，请阅读[Alan Storm 的这篇文章](http://alanstorm.com/magento_upgrade_rewrite_override)`core``local`

现在为了添加你想要的列，做一些类似于 SKU 字段的事情

```
$this->addColumn('size', array(
    'header'    => Mage::helper('catalog')->__('Size'),
    'index'     => 'size'
)); 
```

按照您想要的顺序（在产品名称和 SKU 之间）。我假设您的产品有一个名为`size`您可以检索的字段`$product->getSize()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:53:39.750

Max 解决方案非常到位，但缺少一些重要步骤，我将详细说明他的原始方法

1.  通过将 app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tab/Product.php 复制到 app/code/local/Mage/Adminhtml/Block/Catalog/Category/Tab 来创建产品选项卡的新本地覆盖/产品.php

2.  修改网格视图涉及 2 个函数。_prepareCollection 和 _prepareColumns

3.  _prepareColumns 通过添加对 addColumn 函数的调用，就像：

    ```
    $this->addColumn('size', array(
        'header'    => Mage::helper('catalog')->__('Size'),
        'width'     => '80',
        'index'     => 'size'
    )); 
    ```

4.  _prepareCollection，默认情况下，网格中加载的产品集合只有几个属性（名称，sku，价格）如果您只使用文本字段，您需要做的添加我们的 now 属性 ->addAttributeToSelect('size') now属性，那么这是您必须做的修改的扩展，但是如果您的属性是例如下拉列表，您将需要对准备集合进行进一步的更改：

5.  （可选）下拉属性仅存储选择的选项的值，因此我们需要为 addColumns 调用提供一个选项数组，以便 Magento 可以正确显示值，我们可以通过以下方式做到这一点：

在产品的本地副本上，将以下内容添加到 _prepareColumns 函数

```
 $attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', 'colour');
    $options = array();
    foreach( $attribute->getSource()->getAllOptions(true, true) as $option ) {
       $options[$option['value']] = $option['label'];
    }
    $this->addColumn('colour', array(
        'header'    => Mage::helper('catalog')->__('Colour'),
        'width'     => '80',
        'index'     => 'colour',
        'type'      => 'options',
        'options'   =>  $options
    )); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:54:32.150

虽然这些是一些非常彻底的问题，我相信你会学到很多东西，但有一个现成的解决方案；[增强的管理产品网格](http://www.magentocommerce.com/magento-connect/enhanced-admin-product-grid.html)能够将任意属性添加为列。

# ruby-on-rails - Rails/Nginx 不提供 JS 和 CSS

> ID：12657936
> 
> 赞同：4
> 
> 时间：2012-09-30T01:28:35.817
> 
> 标签：ruby-on-rails, nginx, capistrano, unicorn, linode

我通过 Capistrano 将启用资产管道的 Rails 3.2.8 应用程序部署到我的 Linode 服务器。

它正在运行 nginx + unicorn。

当我访问我的应用程序时，没有提供最小化的 JS 和 CSS，尽管资产存在于`<RAILS_DIR>/public/assets`.

```
$ tree assets
assets
|-- application-66e477d6fd8cf088e8be44affeead089.css
|-- application-66e477d6fd8cf088e8be44affeead089.css.gz
|-- application-7d3ead38a0b5e276a97d48e52044ac31.js
|-- application-7d3ead38a0b5e276a97d48e52044ac31.js.gz 
```

在我的应用程序中，我可以看到没有找到那些确切的文件：

![错误](../Images/3e93aaba3fd026fa6d32f776ee3d68e8.png)

这是我的 nginx 配置：

```
server {
  listen 80 default deferred;
  server_name me.example.com;
  root /home/kennym/apps/app/current/public;

  location ^~ /assets/ {
    add_header Last-Modified "";
    add_header ETag "";
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

你能猜出什么是错的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T07:21:59.567

`location ^~ /assets/`应该是`location ~ ^/assets/`。

前者*不匹配 /assets/*，后者*匹配以 /assets/ 开头的模式*

更新您的 nginx 配置以使缓存和预压缩文件服务再次工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:50:23.980

我通过注释掉`location ^~ /assets/`.`nginx.conf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T14:39:26.407

对于那些有同样问题的人，对我来说，解决方案是正确`/etc/nginx/conf.d/default.conf`设置`root`字段。

# objective-c - iOS 6 CoreBluetooth 配对/忘记（2 个问题）

> ID：12657940
> 
> 赞同：18
> 
> 时间：2012-09-30T01:30:23.587
> 
> 标签：objective-c, ios6, core-bluetooth, bluetooth-lowenergy

我们有一个可绑定的*（当我们连接时，我们被要求配对，请参阅问题 2）*蓝牙 4.0 外围设备，我们已经为其制造并编写了一个 iOS 应用程序。

## 问题 1

是否可以在带有 CoreBluetooth 的 iOS 6 中从我们的应用程序中从 iOS 蓝牙设置中删除我们的外围设备，或者这是否仅限于进入 iOS 设置/蓝牙/我们的外围设备和“忘记此设备”。

我们正在尝试做的是，当我们从应用程序中删除外围设备时，我们希望这个外围设备也会从 iOS 蓝牙列表中删除。

## 问题2

我的第二个问题是，iOS SDK 是否提供了一种方法来确定用户是否在配对请求警报上选择了“配对”或“取消”？截至目前，我们通过在设备连接时读取我们的服务/特征来确定用户按下的对。

![配对示例](../Images/058cb45f7380073f877ab1c5c68c878f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T11:47:12.857

*   问题 1

不，我真的不这么认为。通过设置清除它是唯一可能的方法。

*   问题2

委托对`centralManager`失败和成功连接的外围设备都有回调，所以我会听他们检查用户是否取消：`didConnectPeripheral`和`didFailToConnectPeripheral`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-30T18:30:56.227

当您在绑定对话框上单击“取消”时，iOS 将调用委托方法“centralManagerDidUpdateState”，状态为“CBCentralManagerResetting”。如果单击配对，则命令将正常进行。

# php - 移动重定向和完整站点链接

> ID：12657952
> 
> 赞同：1
> 
> 时间：2012-09-30T01:33:52.957
> 
> 标签：php, javascript, html, redirect, mobile

我想将 Android 和 iOS 用户重定向到特定于该受众的移动页面。我已经成功地使用了以下代码：

```
<script type="text/javascript"> // <![CDATA[
if ((navigator.userAgent.indexOf('iPhone') != -1) || (navigator.userAgent.indexOf('iPod') != -1)) {
    document.location = "http://www.example.com/ios";
} // ]]></script>

<script type="text/javascript"> // <![CDATA[
if ( (navigator.userAgent.indexOf('Android') != -1) ) {
    document.location = "http://www.example.com/android";
} // ]]></script> 
```

唯一的问题是，我在这两个站点上也都有“查看完整站点”链接，这些链接只会让您不断返回。我需要某种方式来使用上述代码，但如果他们单击链接，则允许他们查看整个站点。我看到的解决方案是使用 cookie，但我不知道这样做的好方法。

最后一个问题是，我也只希望这段代码适用于网站的索引。如果有人进入内部页面，则不应触发移动重定向。

我已经分别看到了所有这三个问题的解决方案，但没有什么能以一种很好的方式结合所有需求。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T01:44:09.093

您应该处理此服务器端并使用会话和 cookie。或者你可以首先设置一个 js cookie。当用户点击链接更改站点“格式”时，更改 cookie 值。然后如果 cookie 确实存在，让 cookie 值决定显示哪种格式。如果它不检查用户代理。

# c# - 带有 SSL 的 C# 异步 Tcp 服务器。如何获得与 iOS NSStream 的相互身份验证？

> ID：12657953
> 
> 赞同：9
> 
> 时间：2012-09-30T01:34:14.653
> 
> 标签：c#, ios, cross-platform, ssl-certificate, client-certificates

这是我在 stackoverflow.com 上的第一篇文章，所以如果我做错了什么，请告诉我。那么问题来了。

我有一台`C#`服务器当前正在运行`System.Net.Socket`类似于 Microsoft[在此处](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)提供的示例代码的 Sockets 。

我还有一个`Objective-C`运行`NSInputStream/NSOutputStream`绑定到`CFReadStream/CFWriteStream`.

目前，只有通过`XML Serialized Object`客户端和服务器发送的用户名/密码身份验证可以毫无问题地进行通信。

我现在遇到的问题是通信必须是安全的，并且与客户交谈`SSL encryption`是可以接受的。但是，我认为他们不会仅仅接受“服务器证书”就足够了。所以我试图让 iPad 客户端使用“客户端证书”。我想启用真正的相互身份验证。

如果我无法实现相互身份验证，第三方`VPN`软件可能是保护通信安全的更好解决方案。

我还没有完成转换，但是我找到了一些文章，这些文章给了我很好的例子，但是没有例子适合我在 iPad 上的客户端证书的情况。我找到的样本是：

[C# SSL TCP 服务器](http://blogs.msdn.com/b/joncole/archive/2007/06/13/sample-asynchronous-sslstream-client-server-implementation.aspx)

[Apple 开发者网站，展示了如何使用 SSL，但没有客户端证书](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Streams/Articles/NetworkStreams.html)

[没有客户端证书的 iPad SSL 流。](http://iphonedevelopment.blogspot.com.au/2010/05/nsstream-tcp-and-ssl.html)

[没有客户端证书的 iPad SSL 流](https://stackoverflow.com/questions/1700819/problem-with-nsstream-ssl-connection)

[使用客户端证书的 iPad HTTP 客户端](https://stackoverflow.com/questions/12513291/ios-mutual-authentication-solved)

基本上，系统最终必须运行与具有管理证书能力的嵌入式`TCP`通信。`SSL`不确定它是否会有所不同，但由于这将适用于许多不同的客户，因此最好与`SSL 3.0`and `TLS`（任何版本）兼容。

由于我在过去 6 个月里才涉足`Objective-C`并且对 比较熟悉`C#`，因此我可能需要您用更简单的术语来解释您的答案。

**编辑：**
我更关心`Objective-C`等式的一侧，因为我相当确定这`C#`一侧会很简单。基本上，我需要有人解释如何在 in 上实施客户端证书`TCP NSStream`，`Objective-C`或者为我指明可能的解决方案或解决问题的方法的方向。

任何帮助将不胜感激。

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:29:55.533

我无法回答您关于如何在objective-c 方面实现这一点的问题，因为您所问的超出了单个应用程序*在IOS 设备上*所能实现的功能。外箱思考..

来自苹果：

> iOS 支持简单证书注册协议 (SCEP)。SCEP 是 IETF 中的 Internet 草案，旨在为大规模部署提供一种处理证书分发的简化方法。这使得身份证书能够无线注册到 iPhone 和 iPad，可用于对企业服务进行身份验证。

知道这一点并在开发人员库中搜索 SCEP 将我指向此页面 - [https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html)

这个页面会很有趣，注意微软服务器支持这个：- [https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/OTASecurity/OTASecurity.html#//apple_ref/doc/ uid/TP40009505-CH3-SW1](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/OTASecurity/OTASecurity.html#//apple_ref/doc/uid/TP40009505-CH3-SW1)，它甚至还有一些示例客户端/服务器代码。

我的兴趣通常在移动设备管理领域，并且一直在研究这个。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:22:07.097

查看[CFSocket](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFSocketRef/Reference/reference.html)和/或[CkoSocket](http://www.chilkatsoft.com/refdoc/objcCkoSocketRef.html)

# php - Amazon S3 为每个对象创建唯一键

> ID：12657954
> 
> 赞同：8
> 
> 时间：2012-09-30T01:34:23.053
> 
> 标签：php, file, file-upload, amazon-s3, amazon-web-services

我的应用用户将他们的文件上传到一个存储桶。如何确保我的 S3 存储桶中的每个对象都有唯一的密钥以防止对象被覆盖？

目前，在将文件发送到 S3 之前，我在我的 php 脚本中使用随机字符串加密文件名。

为了便于讨论，我们假设上传者找到了一种在上传时操纵文件名的方法。[他想用香蕉](http://cdn1.iconfinder.com/data/icons/fruits/512/Banana.png)图片替换我网站上的所有图片。如果加密失败，有什么好方法可以防止覆盖 S3 中的文件？

编辑：我认为版本控制不起作用，因为在显示存储桶中的图像时，我无法在图像 URL 中指定版本 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T02:02:31.050

你是加密还是散列？如果您使用 md5 或 sha1 哈希，攻击者很容易发现哈希冲突并让您在香蕉皮上滑倒。如果您在没有随机初始化向量的情况下进行加密，则攻击者可能会在上传数百个文件后推断出您的密钥，而加密可能不是最好的方法。它的计算成本很高，难以实现，而且你可以用更少的努力获得更安全的机制来完成这项工作。

如果您使用合理可靠的熵源为每个文件名添加一个随机字符串，那么您应该没有任何问题，但您应该检查该文件是否已经存在。尽管编写一个循环来检查、使用`S3::GetObject`和生成一个新的随机字符串对于几乎不需要运行的东西来说似乎需要付出很多努力，但“几乎从不”意味着它最终很有可能发生。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T01:46:51.070

在上传之前检查具有该名称的文件会起作用。

如果文件已经存在，重新随机化文件名，然后重试。

# twitter - 具有节点属性的网络数据集

> ID：12657958
> 
> 赞同：3
> 
> 时间：2012-09-30T01:35:13.800
> 
> 标签：twitter, dataset, amazon, social-networking

我正在寻找具有节点属性（最好是实值属性）的小尺寸（大约 50 个节点）链接预测数据集。网络可以是有向的或无向的（最好是有向的），但网络最好不是二分的。当然，我正在寻找一个免费的、随时可用的数据集。可能与社交网络、作者交流等有关。有人知道特定的数据集吗？我真的很感激给我看一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:25:14.603

这个具有节点属性的 Google+ 社交网络应该对你有好处。你可以在这里找到它： [https ://gonglab.pratt.duke.edu/google-dataset](https://gonglab.pratt.duke.edu/google-dataset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T17:14:17.030

[http://www.growmeme.com/sna/visual](http://www.growmeme.com/sna/visual)上的“社交网络分析交互式数据集库”拥有超过 150 个数据集，并且能够按定向/无向和二分 = true/false 以及是否存在社区信息进行过滤（除其他事项外）。

![在此处输入图像描述](../Images/d3647b24f7a476184784adc14ac1619e.png)

# c++ - 如何在我存储的两个变量之间生成一个随机数？

> ID：12657962
> 
> 赞同：31
> 
> 时间：2012-09-30T01:36:20.693
> 
> 标签：c++

> **可能重复：**
> [从一个范围内生成随机整数](https://stackoverflow.com/questions/5008804/generating-random-integer-from-a-range)

我正在尝试创建一个程序，让计算机猜测用户在他/她脑海中的数字。唯一需要的用户输入是猜测是否太高、太低或正确。我在根据先前的猜测存储最小值和最大值的两个变量之间生成随机数时遇到问题。这是我的代码：

```
 #include <iostream>
    #include <cstdlib>
    #include <ctime>

    using namespace std;

    int main()
    {
        srand(static_cast <unsigned int> (time(0)));

        int compGuess = rand() % 100 +1; //Generates number between 1 - 100
        int highestNumber = 100;
        int lowestNumber = 1;
        char ready;
        char highLowSuccess;
        bool success;
        int tries = 0;

        cout << "Please pick a number between 1 - 100\. I will guess your number. Don't tell me what it is!\n\n";

        do
        {
            cout << "Are you ready? (y/n)\n\n";
            cin >> ready;

            if (ready == 'y')
            {
                do
                {
                    cout << "Is your number " << compGuess << "?\n\n";
                    cout << "High, Low or Success?";
                    ++tries;
                    cin >> highLowSuccess; //User input telling the computer whether its too high, too low, or a success

                    if (highLowSuccess == 'h') //Executes code if number guessed was too high.
                    {

                        highestNumber = compGuess - 1; //Stores variable indicating the highest possible number based on user input
                        compGuess = rand() % highestNumber +1; //Generates a new random number between 1 and the new highest possible number
                        success = false;
                    }

                    else if (highLowSuccess == 'l') //Executes code if number guessed was too low.
                    {
                        lowestNumber = compGuess + 1;//Stores variable indicating the lowest possible number based on user input
                        compGuess = (rand() % highestNumber - lowestNumber + 1) + lowestNumber // <---- Not producing the desired result
                        success = false;
                    }

                    else if (highLowSuccess == 's') //Executes code if the computer's guess was correct.
                    {
                        cout << "I guessed your number! It only took me " << tries << " tries!";
                        success = true;
                    }

                } while (success != true);
            }

            else
            {
             continue;
            }

       } while (ready != 'y');

    return 0;

    } 
```

highestNumber 是 max 应该是什么，lowestNumber 是 min 应该是什么。我需要一个方程，让我生成一个随机数，同时考虑最高和最低可能的数字。

如果答案真的很简单，请原谅我，我是一个菜鸟程序员。xD

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-30T01:43:38.393

要生成介于 min 和 max 之间的随机数，请使用：

```
int randNum = rand()%(max-min + 1) + min; 
```

（包括最大值和最小值）

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-30T01:56:43.970

真的很快，真的很容易：

```
srand(time(NULL)); // Seed the time
int finalNum = rand()%(max-min+1)+min; // Generate the number, assign to variable. 
```

就是这样。但是，这偏向于低端，但是如果您使用的是[C++ TR1/C++11](http://en.wikipedia.org/wiki/C++_Technical_Report_1)，则可以使用`random`标头来避免这种偏差，如下所示：

```
#include <random>

std::mt19937 rng(seed);
std::uniform_int_distribution<int> gen(min, max); // uniform, unbiased

int r = gen(rng); 
```

但是您也可以像这样消除普通 C++ 中的偏见：

```
int rangeRandomAlg2 (int min, int max){
    int n = max - min + 1;
    int remainder = RAND_MAX % n;
    int x;
    do{
        x = rand();
    }while (x >= RAND_MAX - remainder);
    return min + x % n;
} 
```

这是从[这篇文章中得到的。](https://stackoverflow.com/questions/11758809/what-is-the-optimal-algorithm-for-generating-an-unbiased-random-integer-within-a?answertab=votes#tab-top)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-09-30T02:04:59.737

如果您有 C++11 编译器，您可以使用 c++ 的伪随机数功能为未来做好准备：

```
//make sure to include the random number generators and such
#include <random>
//the random device that will seed the generator
std::random_device seeder;
//then make a mersenne twister engine
std::mt19937 engine(seeder());
//then the easy part... the distribution
std::uniform_int_distribution<int> dist(min, max);
//then just generate the integer like this:
int compGuess = dist(engine); 
```

这可能更容易掌握，因为您不必做任何涉及模数和废话的事情......虽然它需要更多代码，但了解一些新的 C++ 东西总是很高兴......

希望这会有所帮助 - 卢克

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-30T01:47:43.860

```
rand() % ((highestNumber - lowestNumber) + 1) + lowestNumber 
```

# html - 无法通过 POST 获得正确的网站响应？

> ID：12657963
> 
> 赞同：0
> 
> 时间：2012-09-30T01:36:29.683
> 
> 标签：html, post, web, plsql, get

我想获得通过表单发布结果的网站的响应。我尝试过使用 WebClient、WebRequests 等。

当前代码：

```
using (var client = new WebClient())
{
    var buffer = client.UploadValues("https://secure.monroecc.edu/pls/bpr1/bwzkfcls.P_GetCrse", "POST", vals);
    return Encoding.UTF8.GetString(buffer, 0, buffer.Count());
} 
```

也很确定当前的代码没有错，只是缺少了一些东西。当我确实得到网站的回复时，它是错误的，它是您填写表格的页面。

如果您尝试获取网站，则会在网站本身上导致此错误（不发布随之而来的变量）：

```
VARIABLES IN FORM NOT IN PROCEDURE: 
NON-DEFAULT VARIABLES IN PROCEDURE NOT IN FORM: TERM_IN,SEL_SUBJ,SEL_CRSE,SEL_TITLE,BEGIN_HH,BEGIN_MI,BEGIN_AP,SEL_DAY,SEL_PTRM,END_HH,END_MI,END_AP,SEL_CAMP,SEL_SCHD,SEL_SESS,SEL_INSTR,SEL_ATTR,SEL_LEVL,SEL_INSM

DAD name: bpr1
PROCEDURE  : bwzkfcls.P_GetCrse
URL        : http://secure.monroecc.edu:63500/pls/bpr1/bwzkfcls.P_GetCrse
PARAMETERS :
=========== 
```

这是正在发送的请求的图像。（使用 Chrome 浏览）

![镀铬视图](../Images/9c45e53d89be7e43a2fc84559cba29ca.png)

我知道该网站使用 oracle PLSQL，但这似乎并不能帮助我检索搜索结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:24:59.083

我使用以下代码发布了表单：

```
private void Run(string[] args)
        {
            NameValueCollection vals = new NameValueCollection();
            vals.Add("TERM_IN", "");
            vals.Add("SEL_SUBJ", "");
            vals.Add("SEL_CRSE", "");
            vals.Add("SEL_TITLE", "");
            vals.Add("BEGIN_HH", "");
            vals.Add("BEGIN_MI", "");
            vals.Add("BEGIN_AP", "");
            vals.Add("SEL_DAY", "");
            vals.Add("SEL_PTRM", "");
            vals.Add("END_HH", "");
            vals.Add("END_MI", "");
            vals.Add("END_AP", "");
            vals.Add("SEL_CAMP", "");
            vals.Add("SEL_SCHD", "");
            vals.Add("SEL_SESS", "");
            vals.Add("SEL_INSTR", "");
            vals.Add("SEL_ATTR", "");
            vals.Add("SEL_LEVL", "");
            vals.Add("SEL_INSM", "");

            using (var client = new WebClient())
            {
                var buffer = client.UploadValues("https://secure.monroecc.edu/pls/bpr1/bwzkfcls.P_GetCrse", "POST", vals);
                Console.WriteLine(Encoding.UTF8.GetString(buffer, 0, buffer.Count()));
                //Console.Read();
            }
        } 
```

它返回一个 200 状态代码和有效的 html，表明表单已正确接收。然而，由于没有一个值是正确的，因此返回的页面显示缺少必须包含的表单元素（PIDM 未找到名称：）

您收到的参数不匹配错误意味着您传入的参数不是存储过程期望的参数。您需要首先获取参数和预期值的确切列表，然后您可以将它们插入，这应该可以工作。不幸的是，该页面返回 200 状态代码，因此您必须以某种方式解析是否存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:46:35.210

您要求一个跟随表单的页面在实际上从未接收到使结果成为可能的表单变量时为您提供结果集。

应该传递变量`vals`集的变量永远不会。

```
VARIABLES IN FORM NOT IN PROCEDURE: 
NON-DEFAULT VARIABLES IN PROCEDURE NOT IN FORM: TERM_IN,SEL_SUBJ,SEL_CRSE,SEL_TITLE,BEGIN_HH,BEGIN_MI,BEGIN_AP,SEL_DAY,SEL_PTRM,END_HH,END_MI,END_AP,SEL_CAMP,SEL_SCHD,SEL_SESS,SEL_INSTR,SEL_ATTR,SEL_LEVL,SEL_INSM 
```

此响应错误表示它从未收到任何列出的变量。我会在您的代码中追溯到您命名并将变量列表分配给 Collection 的位置`vals`。检查正确的拼写和正确的分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T01:38:50.747

使用 GET 请求而不是 POST。

# android - 即使我释放了唤醒锁，我的应用也会耗尽电池电量

> ID：12657964
> 
> 赞同：2
> 
> 时间：2012-09-30T01:37:26.480
> 
> 标签：android, battery, proximity, wakelock

我正在构建一个简单的应用程序，它`BroadcastReciever`可以监听 PHONE_STATE：

```
 <receiver android:name=".PhoneStateBroadcastReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver> 
```

在`BroadcastReciever`'s`onRecieve()`我在状态为时启动服务`OFFHOOK`并在状态为时停止服务`IDLE`：

```
public class PhoneStateBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        Bundle bundle = intent.getExtras();

        String state = bundle.getString(TelephonyManager.EXTRA_STATE);
        if(state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)){
            context.startService(new Intent(context, ProximityService.class));
        }
        else if(state.equals(TelephonyManager.EXTRA_STATE_IDLE)){
            context.stopService(new Intent(context, ProximityService.class));
        }
    }

} 
```

在服务中，我正在注册接近传感器侦听器，并创建一个`WakeLock`以便在通话时屏幕会很好地关闭。通话结束后，我停止服务，并在其中`onDestroy()`取消注册侦听器并释放`WakeLock`. 但似乎有些东西没有在那里发布，因为我看到我的应用程序消耗了巨大的电池电量（30%）。

我在监听器注销时和`WakeLock`发布时都放了一个日志，我可以看到它`WakeLock`被释放并且监听器被成功地取消注册（我也可以看到监听器被取消注册的日志`SensorManager`）。

我在这里想念什么？这真的很烦人。

该服务的一些代码：

```
public int onStartCommand(Intent intent, int flags, int startId){

    Log.d("CALL", "Service started");

    // Get an instance of the sensor service, and use that to get an instance of
    // a particular sensor.
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mProximity = mSensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);

    mSensorManager.registerListener(this, mProximity, SensorManager.SENSOR_DELAY_NORMAL);

    mAudioManager = (AudioManager)this.getSystemService(Context.AUDIO_SERVICE);

    mPowerMngr = (PowerManager) getSystemService(Context.POWER_SERVICE);
    try{
        mWakeLock = mPowerMngr.newWakeLock(PROXIMITY_SCREEN_OFF_WAKE_LOCK, "Proximity");

        if (!mWakeLock.isHeld()) {
            Log.d("CALL", "Wake lock acquired");
            mWakeLock.acquire();
        }
    }
    catch (Exception e){
        mWakeLock = null;
    }

    return START_STICKY;
}

public void onDestroy(){
    super.onDestroy();
    mSensorManager.unregisterListener(this);

    if (mWakeLock != null) {
        if (mWakeLock.isHeld()) {
            Log.d("CALL", "Wake lock released");
            mWakeLock.release();
        }
    }

            Log.d("CALL", "Service stopped");
    } 
```

我看到的日志：

```
09-30 03:35:09.120: D/SensorManager(21565): unregisterListener:: disable all sensors for this listener,  listener = com.eladaharon.android.proximity.ProximityService@41a31a18
09-30 03:35:09.125: D/CALL(21565): Wake lock released
09-30 03:35:09.125: D/CALL(21565): Service stopped 
```

非常感谢！埃拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:11:30.273

如果您的服务正在接收多个意图，则您的代码将在`WakeLock`每次`onStartCommand`执行时创建一个新意图。您将只释放最后一个`WakeLock`并泄漏其他的，这可以解释电池消耗。在这种情况下，Logcat 通常会提供有用的消息。

由于您的服务保持运行一段时间，您可以`mWakeLock`在调用之前检查是否已初始化`newWakeLock()`。

# jsf - 使用来自 jsf Web 应用程序的 log4j 登录

> ID：12657972
> 
> 赞同：-1
> 
> 时间：2012-09-30T01:39:33.377
> 
> 标签：jsf, logging, log4j, glassfish-3

我一直在尝试从一个简单的 jsf Web 应用程序使用 log4j 登录到文本文件，但没有成功。每次我在该位置打开文件时，都没有写入任何内容。我正在使用 glassfish 进行部署。下面是我的 log4j.properties 配置

```
log4j.rootLogger = debug, stdout, FILE

log4j.appender.stdout = org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target = System.out
log4j.appender.stdout.layout = org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern = %d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.appender.FILE = org.apache.log4j.RollingFileAppender
log4j.appender.FILE.maxFileSize = 100kb
log4j.appender.FILE.maxBackupIndex = 2
log4j.appender.FILE.File = C:\temp\mylog.txt
log4j.appender.FILE.Threshold = debug
log4j.appender.FILE.layout = org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.ConversionPattern = %d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

我意识到文件 mylog.txt 是在 glassfish 应用程序服务器的 ....\domains\domain1 目录中创建的。我如何让它指向 C:\temp\mylog.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:08:22.093

修好了 实际上，我用于文件位置的行分隔符方向错误“\”反斜杠和 log4j 预期“/”一个正斜杠行分隔符 - 可能是因为它需要一个 url 模式文件位置地址。

所以我只是将 C:\temp\mylog.txt 更改为 C:/temp/mylog.txt ，瞧！这也适用于您希望 log4j 定位的任何其他文件位置

# regex - 为什么要 RewriteRule 。工作方式与 ^(.*)$ 相同吗？

> ID：12657973
> 
> 赞同：6
> 
> 时间：2012-09-30T01:40:03.207
> 
> 标签：regex, apache, mod-rewrite, pcre

考虑以下：

```
RewriteRule ^(.*)$ index.php/$1 
```

根据我对 mod_rewrite 的新手知识，这应该匹配`example.com/`和之间的整个 URL 部分`?query=string`，然后在它前面加上`index.php/`，通常，这正是发生的情况。

```
http://example.com/some/stuff -> http://example.com/index.php/some/stuff 
```

现在，考虑：

```
RewriteRule . index.php 
```

根据 Concrete5 CMS 当前更新的开发人员的说法，这完全一样。事实上，它似乎也在我的服务器上做到了这一点。

我的问题是，为什么第二个 RewriteRule 会产生相同的结果而不是类似的结果

```
http://example.com/some/stuff -> http://example.com/index.phpome/stuff 
```

不应该`.`匹配一个字符然后用`index.php`字符串替换吗？这是在 Apache 2.2 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:23:39.620

`RewriteRule ^(.*)$ index.php/$1`将匹配并使用捕获的文本创建一个新路径，并将最初请求的任何内容添加到`$1`is 的末尾。

`RewriteRule . index.php`匹配，因为它是一个未锚定的正则表达式。前面的正则表达式使用`^`and`$`来锚定匹配，这意味着模式必须完全匹配，而这个不匹配，这意味着它将匹配字符串中的*任何位置*，因此任何带有任何字符的字符串都将匹配。因为 mod_rewrite 将每个测试视为一个运行谓词，所以只要匹配，就会应用此规则。

当规则匹配时，替换发生。替换是*完全*替换，因此如果您不使用反向引用，`$1`那么原始模式中的任何内容都会丢失。在这种情况下，新路径就变成了`index.php`.

因此，两者之间存在细微差别，因为第二个直接进入 index.php，而没有将最初请求的路径添加到末尾。Concrete5 CMS 最有可能使用的是前端控制器，该控制器根据它直接从请求中提取的信息进行调度。由于这不是重定向重写，原始请求将被保留，以便仅使用它：将一些责任从 Apache 转移到应用程序代码手中，以减少对托管环境的依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:11:08.643

左边的匹配没有*被替换*，它只是*被搜索*。您必须使用反向引用来替换/保留特定部分。

# javascript - 表单嵌入 Symfony2 数据原型为 Null

> ID：12657975
> 
> 赞同：2
> 
> 时间：2012-09-30T01:40:10.367
> 
> 标签：javascript, forms, symfony, twig

我正在尝试在 symfony2 的子表单中嵌入多个文件上传。我有一个“想法”表单，我想在其中呈现多个“文档”表单。我已经按照文档进行操作，但是当数据原型在表单中显示为 Null 时，我就停止了。据我了解，原型是呈现表单类型的 html 字符串。我已经搜索过，似乎我是唯一一个遇到这个问题的人。它一定很小，但任何帮助将不胜感激。我的表格类型：

```
 public function buildForm(FormBuilderInterface $builder, array $options)
    {
    $builder
        ->add('title', 'text')
       ->add('category', 'entity', 
        array('class' => 'AcmeIdeaBundle:Category',
        'property' => 'name', 
        ))
        ->add('description', 'textarea')
        ->add('file','file')
        ->add('video')
        ->add('documents', 'collection', array('type' => new DocumentType,
        'allow_add' => true,
        'by_reference' => false,
        'allow_delete' => true,
        'prototype' => true));
         } 
```

文档表单类型生成器：

```
 public function buildForm(FormBuilderInterface $builder, array $options)
        {
        $builder
        ->add('file');
} 
```

相关树枝文件：

```
 {% block body %}
    <form action="{{ path('idea_create') }}" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}
    <ul class="docs" data-prototype="{{ form_widget(form.documents.vars.prototype)|e }} " >
    {% for document in form.documents %}
    <li> {{ form_row(document.file) }} </li>
    {% endfor %}

    </ul> 
```

如果我在控制器中硬编码一些文档对象，它们看起来很好并且可编辑，但我需要它是动态的。

javascript代码：

```
 var collectionHolder = $('ul.docs');

    var $addDocumentLink = $('<a href="#" class="add_documents_link">Add a picture</a>');
    var $newLinkLi = $('<li></li>').append($addDocumentLink);

    jQuery(document).ready(function(){
    collectionHolder.find('li').each(function(){
    addDocumentFormDeleteLink($(this));
    });

    collectionHolder.append($newLinkLi);

    $addDocumentLink.on('click', function(e) {
    e.preventDefault();

    addDocumentForm(collectionHolder, $newLinkLi);
    });
    });

    function addDocumentForm(collectionHolder, $newLinkLi) {

    var prototype = collectionHolder.attr('data-prototype');

    var newForm = prototype.replace(/\$\$name\$\$/g, collectionHolder.children().length);

    var $newFormLi = $('<li></li>').append(newForm);

    $newLinkLi.before($newFormLi);
    addDocumentFormDeleteLink($newFormLi);
    }

    function addDocumentFormDeleteLink($docFormLi) {
    var $removeFormA = $('<a href= "#">remove?</a>');
    $docFormLi.append($removeFormA);

    $removeFormA.on('click', function(e) {
    e.preventDefault();
    $docFormLi.remove();
    });
    } 
```

这也是我第一次在这里提问，所以如果我做错了什么，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:35:00.177

出于某种原因，当我将代码放在树枝文件中时

```
 <ul class="docs" data-prototype="{{ form_widget(form.documents.vars.prototype)|e }} " >
    {% for document in form.documents %}
    <li> {{ form_row(document.file) }} </li>
    {% endfor %} 
```

进入选项卡式 div 即

```
 <div class="tab-pane" id="details"> 
    {{ form_row(form.video) }}
    <ul class="docs" data-prototype="{{ form_widget(form.documents.vars.prototype)|e }} " >
    {% for document in form.documents %}
    <li> {{ form_row(document.path) }} </li>
    {% endfor %}
    </ul>
    {{ form_row(form.description) }}
    </div> 
```

现在原型不为空，一切都很好

# linux - Why the physical memory in Linux is allocated linearly increased rather than at once?

> ID：12657979
> 
> 赞同：2
> 
> 时间：2012-09-30T01:42:39.617
> 
> 标签：linux, memory, memory-management

I had wrote a program as below which allocated about 1.2G memory at once, and I tested it on Linux. Then I found

1.  If I defined the macro *WRITE_MEM*, the physical memory usage (inspected by the command **top**) will increase linearly.
2.  If I didn't define the macro, the physical memory usage is very small (about hundreds of kilobytes) and not changed verly large.

I dont's understand the phenomenon.

```
#include <iostream>  
#include <cmath>  
#include <cstdlib>  

using namespace std;  
float sum = 0.;  

int main (int argc, char** argv)  
{  
    float* pf = (float*) malloc(1024*1024*300*4);  
    float* p = pf;  
    for (int i = 0; i < 300; i++) {  
        cout << i << "..." << endl;  
        float* qf = (float *) malloc(1024*1024*4);  
        float* q = qf;  
        for (int j = 0; j < 1024*1024; j++) {  
            *q++ = sin(j*j*j*j) ;  
        }  
        q = qf;  
        for (int j = 0; j < 1024*1024; j++) {  
#ifdef WRITE_MEM // The physical memory usage will increase linearly
            *p++ = *q++;  
            sum += *q;  
#else            // The physical memory usage is small and will not change
            p++;   
            // or  
            // sum += *p++;  
#endif  
        }  
        free(qf);  
    }  
    free(pf);  
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:49:43.210

Linux allocates virtual memory immediately, but doesn't back it with physical memory until the pages are actually used. This causes processes to only use the physical memory they actually require, leaving the unused memory available for the rest of the system.

# c++ - direct.h 文档

> ID：12657980
> 
> 赞同：4
> 
> 时间：2012-09-30T01:42:41.260
> 
> 标签：c++, windows, filesystems, directory, mingw

我正在尝试编写一小段代码来打印给定目录中的文件。我已经看到使用该`direct.h`库来执行此操作的参考，但我找不到任何有关头文件及其方法的文档。这个库过时了吗？还有另一种方法可以在 C++ 中列出目录的所有文件名吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T02:11:29.177

似乎此标头函数不是为此任务设计的，请参阅[http://msdn.microsoft.com/en-us/library/as5kw0ze(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/as5kw0ze(v=vs.110).aspx)

使用[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)、[FindNextFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx)和[FindClose](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364413%28v=vs.85%29.aspx)循环，就像在这个[示例代码中一样](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365200%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T09:53:58.363

`dirent.h`是跨平台工作的标头。所以我建议使用它而不是一些 Windows 功能。例如，在某些编译器上，它不作为标准头文件包含在内，`Visual Studio`但您可以使用它。你需要从[这里](http://www.softagalleria.net/dirent.php)下载它。将其保存在您的编译器包含目录中。此外，您可以将其保存在其他地方，但在这种情况下，您需要在编译器设置中添加包含路径。

# stata - Stata 中 Logit 回归的等效 R^2

> ID：12657983
> 
> 赞同：2
> 
> 时间：2012-09-30T01:43:29.843
> 
> 标签：stata

我在 Stata 中运行 Logit 回归。

1.  我怎么知道回归的解释力（在 OLS 中，我看 R^2）？

2.  是否有一种有意义的方法可以用其他自变量扩展回归（在 OLS 中，我手动继续添加自变量并寻找调整后的 R^2；我的猜测是 Stata 应该简化了这个手动过程）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:26:41.900

R^2 的概念在 logit 回归中没有意义，您应该完全忽略 Stata 输出中的 McFadden Pseudo R2。Lemeshow 建议使用似然比检验 (G) 来评估自变量的显着性，我们将 D 的值与方程中的自变量进行比较：G=D(没有变量的模型 [B])-D(带有变量的模型 [A])。

似然比检验 (G)：

H0：消除变量的系数都等于 0

ha：至少有一个系数不等于0

当 LR 检验 p>.05 不拒绝 H0 时，这意味着从统计学上讲，将额外的 IV 包含到模型中没有任何优势。

执行此操作的示例 Stata 语法为： logit DV IV1 IV2 估计存储 A logit DV IV1 估计存储 B lrtest AB // 即测试 A 是否“嵌套”在 B

但是请注意，在我们得出一个 logit 模型是否“可接受”的结论之前，必须检查和测试更多方面。有关更多详细信息，我建议访问：http: [//www.ats.ucla.edu/stat/stata/topics/logistic_regression.html](http://www.ats.ucla.edu/stat/stata/topics/logistic_regression.html)

并咨询：

应用逻辑回归，David W. Hosmer 和 Stanley Lemeshow，ISBN-13：978-0471356325

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:15:48.937

我担心你在这里弄错了建模的基础知识：

1.  回归模型的解释力在理论上取决于您对系数的解释，而不是 R 平方。R^2 表示您的线性模型预测的方差量，这可能是您模型的适当基准，也可能不是。

2.  同样，您的模型中存在或不存在自变量需要实质性理由。如果您想了解在添加或减去模型的*某些部分*时 R 平方如何变化，请参阅`help nestreg`有关嵌套回归的帮助。

总结一下：你的模型的解释力和它的变量组成不能仅仅通过计算数字来确定。您首先需要一个充分的理论来构建您的模型。

现在，如果您正在运行`logit`：

*   阅读 Long and Freese（第 3 章）以了解对数似然在您的模型中如何收敛（或不收敛）。
*   不要期望找到像 R 平方一样简单的东西`logit`。
*   在您的模型上使用[logit 诊断](http://www.ats.ucla.edu/stat/stata/webbooks/logistic/chapter3/statalog3.htm)，就像您在运行 OLS 后应该使用的那样。

您可能还想阅读`lrtest`Eric 解释的似然比卡方检验或运行其他命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T22:25:53.953

我当然同意上面的海报，对于像 logit 或 probit 这样的二元模型，几乎任何 R^2 度量都不应该被认为是非常重要的。有多种方法可以查看您的模型在预测方面的表现。例如，检查以下命令：

```
lroc 
estat class 
```

Also, here's a good article for further reading: [http://www.statisticalhorizons.com/r2logistic](http://www.statisticalhorizons.com/r2logistic)

# crystal-reports - 在水晶中添加组后的页面

> ID：12657989
> 
> 赞同：-1
> 
> 时间：2012-09-30T01:44:10.597
> 
> 标签：crystal-reports

我有一个大水晶报告（XI）。用户希望在每个组之间打印一个完全空白的页面。他们不希望下一组只在自己的页面上开始……他们希望在每组之间放一张整张白纸。有没有办法做到这一点？他们没有使用双面打印。

页面设置为

组 1

```
 group2

    group footer2 
```

组页脚1

我需要在组页脚 2 的每个实例之后出现空白页

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:06:34.547

*   添加第二组 2 页脚部分
*   在两个部分上启用“强制新页面之后”

# python - 编码时 n 个列表的 Python 笛卡尔积，其中 n 未知

> ID：12657994
> 
> 赞同：7
> 
> 时间：2012-09-30T01:45:24.623
> 
> 标签：python

## 问题

* * *

*   **`what is the best way to generate a cartesian product of some lists, not knowing in advance how many lists there are?`**

*如果你喜欢，你可以在这里停止阅读*。

* * *

## 背景

我没有钱上学，所以我一边在高速公路收费站上夜班，一边尝试使用互联网自学一些编程。我决定尝试解决一些“编程挑战”问题作为练习。

## 编程作业

这是我要解决的问题，TopCoder 的属性：

```
http://community.topcoder.com/stat?c=problem_statement&pm=3496 
```

我不会复制和粘贴完整的描述以尊重他们的版权声明，但我假设我可以总结它，前提是我不逐字使用它的片段（尽管是 IANAL）。

### 概括

如果历史股票价格的“加权总和”是通过将这些价格的一个子集乘以相等数量的“加权”因子获得的*增补*总和，前提是后者加起来为**1.0**，并且是从给定的一组有效值中选择的**[-1.0, -0.9, ..., 0.9, 1.0]**，对作为函数参数提供的所有历史数据使用此公式，一次检查**5 个**价格，预测下一个价格并返回“加权因子”的排列" 产生最低的平均预测误差。每次运行将至少有 6 个股票价格，因此保证至少有一个预测，最终结果应在 1E-9 内准确。

### 测试数据

格式：

*   一行输入数据，`list`格式为
*   一行代表预期结果
*   一个空行作为间隔

下载自：

*   [http://paste.ubuntu.com/1229857/](http://paste.ubuntu.com/1229857/)

## 我的解决方案

* * *

```
import itertools

# For a permutation of factors to be used in a weighted sum, it should be chosen
# such than the sum of all factors is 1.
WEIGHTED_SUM_TOTAL = 1.0
FACTORS_CAN_BE_USED_IN_WEIGHTED_SUM = lambda x: sum(x) == WEIGHTED_SUM_TOTAL

# Historical stock price data should be examined using a sliding window of width
# 5 when making predictions about the next price.
N_RECENT_PRICES = 5

# Valid values for weighting factors are: [-1.0, -0.9, ..., 0.9, 1.0]
VALID_WEIGHTS = [x / 10\. for x in range(-10, 11)]

# A pre-calculated list of valid weightings to consider. This is the cartesiant
# product of the set of valid weigths considering only the combinations which
# are valid as components of a weighted sum.
CARTESIAN_PRODUCT_FACTORS = [VALID_WEIGHTS] * N_RECENT_PRICES
ALL_PERMUTATIONS_OF_WEIGHTS = itertools.product(*CARTESIAN_PRODUCT_FACTORS)
WEIGHTED_SUM_WEIGHTS = filter(FACTORS_CAN_BE_USED_IN_WEIGHTED_SUM,
                              ALL_PERMUTATIONS_OF_WEIGHTS)

# Generator function to get sliding windows of a given width from a data set
def sliding_windows(data, window_width):

  for i in range(len(data) - window_width):
    yield data[i:i + window_width], data[i + window_width]

def avg_error(data):

  # The supplied data will guarantee at least one iteration
  n_iterations = len(data) - 5

  best_average_error = None

  # Consider each valid weighting (e.g. permutation of weights)
  for weighting in WEIGHTED_SUM_WEIGHTS:

    # Keep track of the prediction errors for this weighting
    errors_for_this_weighting = []

    for historical_data, next_to_predict in sliding_windows(data,
                                                            N_RECENT_PRICES):

      prediction = sum([a * b for a, b in zip(weighting, historical_data)])
      errors_for_this_weighting.append(abs(next_to_predict - prediction))

    average_error = sum(errors_for_this_weighting) / n_iterations

    if average_error == 0: return average_error

    best_average_error = (average_error if not best_average_error else
      min(average_error, best_average_error))

  return best_average_error

def main():
  with open('data.txt') as input_file:
    while True:
        data = eval(input_file.readline())
        expected_result = eval(input_file.readline())
        spacer = input_file.readline()
        if not spacer:
          break
        result = avg_error(data)
        print expected_result, result, (expected_result - result) < 1e-9

if __name__ == '__main__':
    main() 
```

* * *

## 我的问题

我不是要求对我的解决方案进行代码审查，因为这将是错误的 StackExchange 论坛。在这种情况下，我会将我的解决方案发布到“代码审查”。

相反，我的问题是小而精确和明确的，适合这个网站的格式（希望如此）。

在我的代码中，我使用 itertools 生成列表的笛卡尔积。本质上，我并没有自己解决问题的症结，而是将解决方案委托给为我做这件事的图书馆。如果我想从这些练习中*学习，我认为这是错误的方法。*我应该自己做最难的部分，否则为什么要锻炼呢？所以我想问你：

* * *

*   **`what is the best way to generate a cartesian product of some lists, not knowing in advance how many lists there are?`**

* * *

这就是我想知道的全部内容，如果您愿意，可以批评我的代码。这很受欢迎，即使它通过了所有测试（总是有更好的做事方式，特别是如果你是像我这样的初学者）但是对于这个问题来说“恰到好处”，我只关注一个方面代码，我遇到的一个具体问题和我不满意的事情。让我告诉你更多，我还将分享规范的“你已经尝试过什么”......

显然，如果我知道列表的数量，我可以输入一些嵌套的 for 循环，就像本练习的顶级求解器在比赛中所做的那样。*我尝试编写一个为未知数*执行此操作的函数*列表的数量，但我不确定采用哪种方法。第一种方法是编写递归函数。从列表 1 中取出元素 1 并将其与列表 2 的元素 1 组合，然后与列表 3 的元素 1 组合，等等。我会将每个“层”中的元素推入堆栈，并在达到所需深度时弹出它们。我想我不会担心“堆栈溢出”，因为可达到的深度是合理的。然后，我努力选择一种数据结构，以尽可能最有效（内存/空间）的方式执行此操作，而不向递归调用传递太多参数。数据结构是否应该存在于调用之外？在通话中被传递？我能达到任何水平的并行性吗？如何？有这么多的问题和这么少的答案，我意识到我需要知道更多来解决这个问题，我可以在正确的方向上轻推。你可以提供一个代码片段，我会研究它。或者只是向我解释处理此类问题的正确“计算机科学”方式是什么。我确信有些事情我没有考虑。*

 *最后，我在上面的解决方案中考虑的事情*是*，谢天谢地，过滤器过滤了一个生成器，因此完整的笛卡尔积永远不会保存在内存中（就像我在代码中的任何时候执行 list(ALL_PERMUTATIONS_OF_WEIGHTS) 一样）所以我我只为那些实际上可以用作加权和的组合占用内存空间。*如果应用于任何允许我在不*使用 itertools的情况下生成笛卡尔积的系统，类似的警告会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:03:31.697

想想数字是如何写的（在十进制系统中，或在任何其他系统中）。包括零，即使您不需要它们：

```
00000
00001
00002
...
00009
00010
00011
00012
...
99998
99999 
```

您可以看到这看起来像是 5 个列表的笛卡尔积`list(range(10))`（在这种特殊情况下）。您可以通过递增“最低”数字非常轻松地生成此输出，当它到达列表中的最后一个时，将其设置为第一个元素并递增“下一个最高”数字。当然，您仍然需要`for`循环，但数量非常少。当您使用任意数量的任意列表时，请使用类似的方法。

例如，如果您有 3 个列表：`['a', 'b', 'c']`、`['x', 'y']`、`['1', '2']`，您将获得：

```
ax1
ax2
ay1
ay2
bx1
bx2
by1
by2
cy1
cy2
cx1
cx2 
```

祝你好运！

编辑：

如果您愿意，这里有一个示例代码来执行此操作。我不递归只是为了展示这有多简单。当然，递归也是一种很好的方法。

```
def lex_gen(bounds):
    elem = [0] * len(bounds)
    while True:
        yield elem
        i = 0
        while elem[i] == bounds[i] - 1:
            elem[i] = 0
            i += 1
            if i == len(bounds):
                raise StopIteration
        elem[i] += 1

def cart_product(lists):
    bounds = [len(lst) for lst in lists]
    for elem in lex_gen(bounds):
        yield [lists[i][elem[i]] for i in range(len(lists))]

for k in cart_product([['1', '2'], ['x', 'y'], ['a', 'b', 'c']]):
    print(k) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T02:05:14.683

首先，考虑一个 n 列表笛卡尔积。让我们取第一个列表，我们将其称为 L。然后我们将取其余列表，我们将其称为 R。然后，对于 L 中的每个项目，将其添加到由生成的每个元组的开头R 的笛卡尔积

这样，您只需实现无列表的笛卡尔积即可解决问题。

这是一个 Haskell 实现，以防它帮助您理解我在说什么：

```
cartesian :: [[a]] -> [[a]]
cartesian [] = [[]]
cartesian (xs:yss) = [x : ys | x <- xs, ys <- cartesian yss] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T02:25:59.827

经典地，笛卡尔坐标`(x,y)`位于平面或`(x,y,z)`3D 空间中*（对于实数中的 x、y 和 z）：*

```
[ (x,y) for x in reals for y in reals ] 
```

更一般地说，它们是元组（作为 Python 列表理解）：

```
[ (x1, x2, x3, ...) for x1 in X1 for x2 in X2 for x3 in X3 ...] 
```

对于对象（在我们的例子中是可迭代的）`X1, X2, X3,...`，我们想要的是一个函数：

```
def cartesian_product(X1,X2,X3,...):
     return # the above list 
```

一种方法是使用递归，注意始终返回元组：

```
def cartesian_product(*X):
    if len(X) == 1: #special case, only X1
        return [ (x0,) for x0 in X[0] ]
    else:
        return [ (x0,)+t1 for x0 in X[0] for t1 in cartesian_product(*X[1:]) ]

cartesian_product([1,2],[3,4],[5,6])
# [(1, 3, 5), (1, 3, 6), (1, 4, 5), (1, 4, 6), (2, 3, 5), (2, 3, 6), (2, 4, 5), (2, 4, 6)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T16:49:27.133

这是一种最喜欢的（我希望在教学上也不错）实现笛卡尔积的方式`reduce`，翻译自我前段时间写的[Perl 版本：](https://stackoverflow.com/a/2457928/152948)

```
def cartesian_product(*X):
  return reduce(
    lambda accum, lst: 
      [ tup + (item,) for tup in accum for item in lst ],
    X,
    [()]
  ) 
```

它类似于海登的答案，除了它使用`reduce`而不是显式递归，我认为这使基本情况更加清晰。我们在这里减少的是元组列表（累积的输出，`accum`）与项目列表（）的对比`lst`。对于项目列表中的每个项目，我们将其连接到所有累积元组的末尾，并对尽可能多的列表 ( `X`) 重复此过程。reduce 初始化器是`[()]`一个包含一个空元组的列表，它确保如果`X[0]`是`[1, 2, 3]`累加器将`[(1), (2), (3)]`在第一步之后变为（*一个*元组，因为我们希望每个项目都出现`X[0]` *一次*，而一个零元组，因为我们希望它被连接为空*）*）。这对应于 senderle 在对 icktoofay 的回答的评论中提到的“无效产品”。

鉴于此函数定义，如果您`print cartesian_product([1,2], [3,4], [5,6])`将打印：

```
[(1, 3, 5), (1, 3, 6), (1, 4, 5), (1, 4, 6), (2, 3, 5), (2, 3, 6), (2, 4, 5), (2, 4, 6)] 
```

这是我们预期的 8 个元组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-17T05:03:28.233

[Itertools](https://docs.python.org/dev/library/itertools.html)来救援。以下将创建组合，因为它们被一一使用：

```
import itertools
combs=itertools.product(*lists) 
```

例如。使用命令行 Python，并假设您有一个可变长度列表的列表：

```
>>> c=[['3', '5', '7'], ['100'], ['1', '2', '3']]
>>> z=itertools.product(*c)
>>> for ii in z:
...     print ii
... 
('3', '100', '1')
('3', '100', '2')
('3', '100', '3')
('5', '100', '1')
('5', '100', '2')
('5', '100', '3')
('7', '100', '1')
('7', '100', '2')
('7', '100', '3') 
```*