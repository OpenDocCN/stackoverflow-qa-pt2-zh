# StackOverflow 问答 13216000-13216999

# ios5 - 将故事板转换为 xib 以支持 iOS4.x

> ID：13216001
> 
> 赞同：3
> 
> 时间：2012-11-04T04:11:44.183
> 
> 标签：ios5, ios4, storyboard

好吧，我用故事板创建了一个项目，但我意识到故事板只兼容 iOS 5，不支持 iOS4.3。无论如何我可以通过自动或手动将它们转换为 XIB 以某种方式使其在 iOS 4 上运行吗？

# typescript - 命名函数类型

> ID：13216006
> 
> 赞同：2
> 
> 时间：2012-11-04T04:11:59.737
> 
> 标签：typescript

是否有与 C# 的 Func 关键字等效的 TypeScript？

在今天对 TypeScript 转换一些现有代码的初步探索中，我使用了类/对象的接口，但发现自己不必要地复制了函数类型。我错过了什么吗？

在下文中，我为对象类型 (Data) 定义了一个接口，并将受益于命名 (data: Data) => void

```
interface Funcs {
    box: (data: Data) => void;
    lbl: (data: Data) => void;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:17:19.207

函数类型`(args) => t`只是对象类型的缩写`{(args): t}`，所以以下应该可以工作：

```
interface Func {
  (data: Data): void;
}

interface Funcs {
  box: Func;
  lbl: Func;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:36:44.000

在 C# 中，`Func`采用泛型类型参数。泛型还不是 TypeScript 语言规范的一部分——但它们已列在路线图上。

话虽如此，我不确定你打算如何在这种情况下使用它——你在这之后吗？

伪代码：

```
interface Funcs {
    box: Action<Data>;
    lbl: Action<Data>;
} 
```

为了使您的定义更短（即我接受数据类型的参数并返回 void）。我用`Action`的是没有返回值，但你可以`Func<Data, ResultType>`在这里同样考虑。

无论如何，我们将不得不等待泛型，看看它们是如何实现的，以及它们是否允许这种使用。

# python - Python：继续尝试循环，直到找到列表中的第一项

> ID：13216007
> 
> 赞同：0
> 
> 时间：2012-11-04T04:12:13.713
> 
> 标签：python, exception, loops, try-catch

我想使用 try 语句或任何其他方法来查找列表中给定变量之后最接近的项目：我有以下代码。在此示例中，我希望代码继续向 d1 添加一天，直到找到列表 pj 中的第一个日期时间对象，然后返回相应列表元素的索引。所以这里 d1 应该等于 datetime.datetime(1922,01,06) 和 d1_index = 1。 range 函数产生列表中的最后一个元素，所以很明显我需要改变这个条件，但不知道正确的方法是什么，谢谢堆，

凯恩

```
import datetime
import numpy as np
import dateutil.relativedelta as rd

pj = [datetime.datetime(1921,12,31), datetime.datetime(1922,01,06), datetime.datetime(1922,01,07), datetime.datetime(1922,01,10), datetime.datetime(1922,01,12)]

d1 = datetime.datetime(1922,01,02)
d2 = datetime.datetime(1929,12,31)

for i in range(0,50):
    try: 
        d1_index = pj.index(d1)

    except ValueError:
        d1 = d1 +rd.relativedelta(days = +i)

        continue
    break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:26:32.443

天哪，没有。

```
>>> bisect.bisect_left(pj, d1)
1
>>> pj[bisect.bisect_left(pj, d1)]
datetime.datetime(1922, 1, 6, 0, 0) 
```

# jquery - jQuery 根据值更改值

> ID：13216009
> 
> 赞同：0
> 
> 时间：2012-11-04T04:12:53.337
> 
> 标签：jquery

您可以根据原始值更改输入字段的值吗？

```
<input type="checkbox" value="fooBar1" class="checkbox" />
<input type="checkbox" value="fooBar2" class="checkbox" /> 
```

正在尝试这样的事情......

```
if ($('.checkbox').val() == 'fooBar1') {
   $(this).val('1');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:14:29.513

这将做到：

```
$(".checkbox[value=fooBar1]").val(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:18:39.293

```
if ($("input.checkbox").attr("value") == "fooBar1") {
   $(this).attr("value","NEW VALUE");
} 
```

# android - 使用android谷歌输入在横向模式下无法选择中文单词

> ID：13216015
> 
> 赞同：4
> 
> 时间：2012-11-04T04:14:37.097
> 
> 标签：android, keyboard

横向模式；Edittext 设置为 'imeOptions="flagNoExtractUi"'; 谷歌拼音输入法；

当我尝试在 EditText 中输入中文时，它显示拼音没有单词选择。有谁知道如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:28:21.067

你好我正在使用带有criskelo Rom的三星galaxy s3，android 4.1.1我在横向模式下写了第一段，它运行良好。您应该添加更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-16T14:44:37.043

你可以像这样设置edittext：

```
android:imeOptions="flagNoExtractUi|flagNoFullscreen" 
```

希望可以帮助别人

# c++ - 二叉搜索树删除而不复制

> ID：13216016
> 
> 赞同：1
> 
> 时间：2012-11-04T04:14:57.770
> 
> 标签：c++, tree, binary-search-tree

在编写简单的二叉搜索树数据结构（非自平衡）时，大多数资源在删除具有两个子节点的节点时给出的建议是将数据从左子节点之一复制到要删除的节点。这是不好的做法吗？某种指针操作不会提供更快的结果吗？是否有可以概括这一点的 BST 旋转算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:57:03.570

是的，您不想复制节点，您只想“移动”它（即更改指针）以将其放入您要删除的节点的位置。如果您不想保持平衡，则实际上不需要进行任何旋转-您只需选择左子树中最右侧的节点（或右子树中的最左侧节点-树）。您将其从当前位置删除，并将其插入您需要删除的节点的位置（所有这些都严格通过操作指针）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T14:32:31.363

复制数据的复杂度为 O(1)，而操作指针时可能的复杂度为 O(N)：源节点（左子树中最右边的节点或右子树中最左边的节点）可能有一个child 和它下面的子树。与单个节点插入不同，在这种情况下需要合并子树。为了避免复制开销，应该在 BST 中存储指向对象而不是对象的指针。

# c# - 如何将下拉的选定值分配给文本框

> ID：13216020
> 
> 赞同：0
> 
> 时间：2012-11-04T04:15:26.147
> 
> 标签：c#, asp.net

当我按下按钮时，我试图将下拉列表中的选定值分配给文本框。我无法在`TextBox`. 有人可以让我知道我错过了什么吗？

我的代码如下：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {                       

    }

    protected void Button1_Click1(object sender, EventArgs e)
    {

        string strConn = "Initial Catalog=NavigateV6;Data Source=SVUSRYE-SQL3D1;User ID=dopis_user;Password=dopis_password;Persist Security Info=True;MultipleActiveResultSets=True";
        SqlConnection mycn = new SqlConnection(strConn);
        DataSet ds = new DataSet();
        SqlDataAdapter myda = new SqlDataAdapter("Select accountid FROM trn_account ", mycn);
        myda.Fill(ds);
        DDL.DataSource = ds;
        DDL.DataTextField = "AccountID";
        DDL.DataValueField = "AccountID";
        DDL.DataBind();

    }

    protected void DDL_SelectedIndexChanged(Object sender, EventArgs e)
    {
        var selectedValue = ((DropDownList)sender).SelectedValue;
        if (!string.IsNullOrEmpty(TextBox1.Text))
            TextBox1.Text = selectedValue;

    }
} 
```

ASPX：

```
<asp:DropDownList ID="DDL" runat="server" AutoPostBack="True" OnSelectedIndexChanged = " DDL_SelectedIndexChanged" >

    </asp:DropDownList>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <br />
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click1" 
        Text="sumbit" />
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <br />
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:46:53.220

jQuery 可以在没有回发的情况下迅速做到这一点：

```
$('#<%= ButtonID.ClientID %>').click(function() {
    $('#<%= TextBoxID.ClientID %>').val($('#<%= DDL_ID.ClientID %>').val());
    return false;
}); 
```

事实上你甚至不需要点击一个按钮，当用户在 ddl 中选择一个新值时就可以完成：

```
$('#<%= DDL_ID.ClientID %>').change(function() {
    $('#<%= TextBoxID.ClientID %>').val($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:31:35.030

你的问题是因为当你检查时 `(!string.IsNullOrEmpty(TextBox1.Text))`，它总是返回 false 因为在第一阶段， TextBox 的值是空的，因此永远不会执行`if condition`......如果你需要通过上述条件，你可以放一些值`TextBox`申报时.......

或者，

只需这样`SelectedIndexChanged`做`DropDownList`

```
 var selectedValue = ((DropDownList)sender).SelectedValue;
 TextBox1.Text = selectedValue; 
```

这是与您的代码一样的工作示例：

**ASPX：**

```
<body>
  <form runat="server" id="form1">
        <asp:DropDownList ID="DDL" runat="server" AutoPostBack="True" 
        OnSelectedIndexChanged = "DDL_SelectedIndexChanged" >
      <asp:ListItem Value="One">One</asp:ListItem>
      <asp:ListItem Value="Two">Two</asp:ListItem>
    </asp:DropDownList>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <br />
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" 
        Text="sumbit" onclick="Button1_Click" />
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <br />
  </form>
</body> 
```

**代码背后：**

```
 public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {

        }

        protected void DDL_SelectedIndexChanged(object sender, EventArgs e)
        {
            var selectedValue = ((DropDownList)sender).SelectedValue;
            TextBox1.Text = selectedValue;
        }
    } 
```

# c++ - 警告：控制到达非无效函数的结尾（c++）

> ID：13216022
> 
> 赞同：3
> 
> 时间：2012-11-04T04:15:38.780
> 
> 标签：c++, controls, void

我收到此错误并且无法修复，我还是菜鸟，如果有人可以帮助我，我会感谢您此代码来自 libxenon 的 xmplayer（用于 jtag xbox）

（我尝试搜索类似的错误，但我找不到问题所在）

```
  int FileSortCallback(const void *f1, const void *f2) {
    /* Special case for implicit directories */
    if (((BROWSERENTRY *) f1)->filename[0] == '.' || ((BROWSERENTRY *) f2)->filename[0] == '.') {
        if (strcmp(((BROWSERENTRY *) f1)->filename, ".") == 0) {
            return -1;
        }
        if (strcmp(((BROWSERENTRY *) f2)->filename, ".") == 0) {
            return 1;
        }
        if (strcmp(((BROWSERENTRY *) f1)->filename, "..") == 0) {
            return -1;
        }
        if (strcmp(((BROWSERENTRY *) f2)->filename, "..") == 0) {
            return 1;
        }
    }

    /* If one is a file and one is a directory the directory is first. */
    if (((BROWSERENTRY *) f1)->isdir && !(((BROWSERENTRY *) f2)->isdir)) return -1;
    if (!(((BROWSERENTRY *) f1)->isdir) && ((BROWSERENTRY *) f2)->isdir) return 1;

    //Ascending Name
    if (XMPlayerCfg.sort_order == 0) {
        return stricmp(((BROWSERENTRY *) f1)->filename, ((BROWSERENTRY *) f2)->filename);
    }
    //Descending Name
    else if (XMPlayerCfg.sort_order == 1) {
        return stricmp(((BROWSERENTRY *) f2)->filename, ((BROWSERENTRY *) f1)->filename);
    }
    //Date Ascending
    else if (XMPlayerCfg.sort_order == 2) {
        if ( ((BROWSERENTRY *) f2)->date == ((BROWSERENTRY *) f1)->date) { //if date is the same order by filename
            return stricmp(((BROWSERENTRY *) f2)->filename, ((BROWSERENTRY *) f1)->filename);
        } else {
            return ((BROWSERENTRY *) f1)->date - ((BROWSERENTRY *) f2)->date;
        }
    }
    //Date Descending
    else if (XMPlayerCfg.sort_order == 3) {
        if ( ((BROWSERENTRY *) f2)->date == ((BROWSERENTRY *) f1)->date) { //if date is the same order by filename
            return stricmp(((BROWSERENTRY *) f1)->filename, ((BROWSERENTRY *) f2)->filename);
        } else {
            return ((BROWSERENTRY *) f2)->date - ((BROWSERENTRY *) f1)->date;
        }
    }
}
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T04:26:13.987

`sort_order`编译器分析您的代码，并看到将为介于`0`和之间的所有值执行返回语句`5`，包括在内。但是，如果`sort_order`为负数或大于`5`，代码将在没有返回语句的情况下到达函数末尾；这就是编译器发出警告的原因。

请注意，由于代码其他部分的限制，可能无法将`sort_order`其设置为负数或大于数。`5`但是，编译器对此一无所知，因此它认为这`sort_order`可能具有任何价值。

要解决此问题，请在末尾添加无条件返回语句。

# javascript - 为什么我无法在 Windows 8 JavaScript App 中通过它访问变量

> ID：13216024
> 
> 赞同：1
> 
> 时间：2012-11-04T04:15:58.470
> 
> 标签：javascript, windows-8, winjs

我的代码非常简单。对我来说，它应该工作。

```
var preview = WinJS.Class.define(
   function (el, options) {
       el.winControl = this;
       this.el = el;

       this.textarea = d.getElementById('preview-input');
       this.preview = d.getElementById('preview-text');
       this.form = d.getElementById('perview-form');

       this.preview.addEventListener('click', this.click, false);
       //WinJS.Utilities.query("button", this.form)
       //this.preview.addEventListener('', this.save, false);

   },

   {
       click: function (e) {
           this.form.style('display', 'block');
       }
   }
);

WinJS.Namespace.define('RegCtrl', { preview: preview }); 
```

但是当点击发生时`this.form`似乎是未定义的空值。为什么？我不想在类的每个方法中初始化对象。

# 新测试

我做了额外的测试非常小

```
var preview = WinJS.Class.define(
   function (el, options) {
       var test = 1;
       this.test = 1;
       this.test1();
   },

   {
       test1: function () {
           console.log(this.form, test);
       }
   } 
```

); WinJS.Namespace.define('RegCtrl', { preview: preview });

此测试在线失败`this.test1();`。我现在认为这个类被称为`RegCtrl.preview()`而不是`new RegCtrl.preview()`.

我如何在这个被称为`new`但不是简单函数的函数中隐藏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:44:35.333

其他答案没有解释发生了什么，因此给出了不正确的建议。

JavaScript 具有一流的函数对象——您可以将它们作为值传递。这正是您设置此回调时所做的事情：

```
this.preview.addEventListener('click', this.click, false); 
```

您正在获取 this.click 属性的内容，它恰好是一个函数，并将其交给 addEventListener 函数来做任何它想做的事情。

我对那里的术语非常具体-注意我专门说的是*功能*，而不是*方法*。JavaScript 并没有真正的方法构造，它只是将方法作为对象的属性。

那么“this”成员是从哪里来的呢？这是在调用者处确定的 - 您在“。”左侧使用的对象。是成为这个价值的那个。例如，

```
function exampleFunc() { console.log("this.myName = " + this.myName); }

var a = { myName: "Chris", doSomething: exampleFunc };
var b = { myName: "Bob", doSomething: exampleFunc }; 
```

请注意，我已将完全相同的函数分配给 doSomething 属性。会发生什么：

```
a.doSomething(); // Outputs "this.myName = Chris"
b.doSomething(); // Outputs "this.myName = Bob" 
```

通过两个不同的对象调用的完全相同的函数对象具有不同的 this 指针。

exampleFunc 是一个全局函数，我们称之为：

```
exampleFunc() // Outputs "this.myName = undefined" 
```

那么 undefined 是从哪里来的呢？在全局函数中，“this”设置为 window（全局范围），它没有定义 myName 属性。这也意味着您可以这样做：

```
myName = "Global Name"; // note, no var - we want this global
exampleFunc(); // Outputs "this.myName = Global Name" 
```

好的，那么原始问题是怎么回事？基本上，您已将函数 this.click 传递为回调函数，但尚未传递希望调用它的“this”指针。实际上， addEventListener 没有办法传递 this 指针。结果，当调用函数时， this*并不*指向您的对象。我不记得它指的是什么 - 它是窗口或被点击的元素，请查看 DOM 文档以进行验证。

为了让它用正确的上下文（上下文=正确的“this”）调用正确的函数，传统的方法是使用闭包。在变量中捕获“this”，然后传入一个匿名函数，该函数使用正确的 this 指针调用您的实际回调。代码如下所示：

```
var preview = WinJS.Class.define(
   function (el, options) {

       // Capture your current this pointer in a global variable
       // Using "that" as the name comes from JavaScript: The Good Parts book
       var that = this;

       el.winControl = this;
       this.el = el;

       this.textarea = d.getElementById('preview-input');
       this.preview = d.getElementById('preview-text');
       this.form = d.getElementById('perview-form');

       // Note what gets passed instead of this.click:
       this.preview.addEventListener('click', 
           function (e) {
               // NOTE: Calling through "that": "this" isn't pointing to the right object anymore
               // Calling through "that" resets "this" inside the call to click
               that.click(e);
           }, false);    
   },

   {
       click: function (e) {
           this.form.style('display', 'block');
       }
   }
); 
```

这是一种足够常见的模式，ECMAScript 5 有一个实用函数来为您构建这些包装器 - function.bind。做这个：

```
 this.preview.addEventListener('click', 
           this.click.bind(this),
           false); 
```

该构造`this.click.bind(this)`将构造一个新函数，在调用该函数时，会将“this”引用设置为您传递的任何内容（在本例中为“this”），然后调用您调用它的函数。

是的，“this”有很多不同的值。跟踪“this”指向的内容是掌握 JavaScript 编程的重要部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T04:21:24.800

我认为您可能希望将全局 JavaScript 变量定义为：

```
 var myForm = document.getElementById('perview-form'); 
```

或开玩笑`var myForm;`在内部定义和初始化`function (el, options)`为：

```
 myForm = d.getElementById('perview-form'); 
```

现在你可以在你的函数中使用这个变量：

```
 myForm.style('display', 'block'); 
```

**编辑：**我相信您可以**将此变量定义为您的第一行，** `WinJS.Class.define`使其成为实例级变量，如下所示：

```
 var preview = WinJS.Class.define(
         var myForm;
         function (el, options) {
           ....
           ....
           myForm = d.getElementById('perview-form');
           ...
         },

         {
            click: function (e) {
            myForm.style('display', 'block');
         }
       }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T04:20:37.000

如果您不知道要寻找什么，这将是一件非常难以研究的事情。我添加了一行并更改了另一行。那应该可以解决您的问题。

简而言之，`this`每次输入新函数时都会重置关键字，函数内部的 this 值与`this`外部*范围*的 this 不同。保留这个你想要的。的名字似乎相当普遍。`click`*`this``that`*

 ***根据 OP 提供的链接进行编辑。
此代码未经测试。如果`this`现在使用不起作用，那么我会尝试`this2`
对不起我无法测试这个，但我在任何地方都没有框架，所以我正在做有根据的猜测。**

```
var preview = WinJS.Class.define(

  function (el, options) {
    that = this; // No var should be needed since it is declared already
    el.winControl = this;
    this.el = el;

    this.textarea = d.getElementById('preview-input');
    this.preview = d.getElementById('preview-text');
    this.form = d.getElementById('perview-form');

    this.preview.addEventListener('click', this.click, false);
    //WinJS.Utilities.query("button", this.form)
    //this.preview.addEventListener('', this.save, false);

  },
  // This is the section for instance vars
  {
    click: function (e) {
      that.form.style('display', 'block'); // AND THIS ONE
    },
    that: null // Added instance variable
  },

  // And these are static variables
  {
    that2: null
  }
); 
```*

# php - PDO 行数混乱

> ID：13216033
> 
> 赞同：0
> 
> 时间：2012-11-04T04:17:49.810
> 
> 标签：php, mysql, pdo

我正在创建一个登录页面，如果 SELECT 查询返回一个包含用户名和密码的匹配行，那么它将返回一个行数为 1 的登录页面。当我回显变量时，我现在对其进行编码的方式是存储行数，由于某种原因它会回显 26，我不确定为什么。

有人会解释我是否做错了什么，或者这是否是正常行为以及该值来自何处？

```
function checkLogin($conn,$myusername,$mypassword,$row,$row1){
   try {  
        $sql = "SELECT COUNT(*) FROM CLL_users WHERE user_name = 'user' AND password = 'XXXX'";
        if ($results = $conn->query($sql)) {

            if($results->fetchColumn() > 0) {

                $sql = "SELECT * FROM CLL_users WHERE user_name = 'user' AND password = 'XXXXX'";
                foreach ($conn->query($sql) as $row)
                {               
                   $rowCount = count($row);
                   echo $rowCount;
                    print ("Username: " . $row['user_name'] . "<br>");
                     print ("Username: " . $row['password'] . "<br>");

                    }

                    echo $count;
          }
        else {
            print "NO ROWS";
        }
        }
        } catch (PDOException $e){
    echo 'Connection failed: ' . $e->getMessage();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:19:44.943

您的代码`$rowCount = count($row);`正在计算当前行中的列数，而不是查询返回的行数。

同样，您正在回显第二个与*计数*相关的变量`$count`，但您既没有声明它也没有在代码中增加它。看起来这个是应该计算你循环通过的行数的那个。如果这是真的，您应该将其设置为`$count = 0;`循环之前并`$count++;`在其中使用：

```
$count = 0;
foreach ($conn->query($sql) as $row) {
    print ("Username: " . $row['user_name'] . "<br>");
    print ("Username: " . $row['password'] . "<br>");
    $count++;
}
echo $count; 
```

此外，您目前[`rowCount`](http://php.net/manual/en/pdostatement.rowcount.php)在选择用户之前正在使用 PDO，并且您正在正确使用它。您可以*将该*结果存储到一个变量中并使用它来判断您收到了多少行：

```
$sql = "SELECT COUNT(*) FROM CLL_users WHERE user_name = 'user' AND password = 'XXXX'";
if ($results = $conn->query($sql)) {
    $numRows = $results->fetchColumn();
    if($numRows > 0) {
        ... rest of your code .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:24:36.860

```
function checkLogin($conn,$myusername,$mypassword,$row,$row1)
{
   try
   {  
       $sql = "SELECT COUNT(*) FROM CLL_users WHERE user_name = 'user' AND password = 'XXXX'";
       if ($results = $conn->query($sql))
       {

           $count = $results->fetchColumn();
           echo "$count\n";

           if($count > 0)
           {
               $sql = "SELECT * FROM CLL_users WHERE user_name = 'user' AND password = 'XXXXX'";
               foreach ($conn->query($sql) as $row)
               {               
                   print ("Username: " . $row['user_name'] . "<br>");
                   print ("Username: " . $row['password'] . "<br>");     
               }
           }
           else
           {
               print "NO ROWS";
           }
       }
   }
   catch (PDOException $e)
   {
       echo 'Connection failed: ' . $e->getMessage();
   }

} 
```

# jsp - JSP中带有JsonArray的Ajax jquery

> ID：13216037
> 
> 赞同：2
> 
> 时间：2012-11-04T04:18:32.510
> 
> 标签：jsp, jquery, arrays

我正在使用[JSon-RPC 库](http://www.json.org/javadoc/org/json/JSONArray.html)。

**小服务程序：**

我想放入`List<Student>`的`JSonArray`那个是一样的`{["name":"AAA","age":"24"]["name":"BBB","age":"12"]}`。 `JsonArray`有一个接受`Collection`与参数相同的构造函数。如果结果是 a`JsonObject`那么我会用 method 回复客户`out.print(instanceJsonObject.toString())`。现在我不知道如何`JsonArray`从服务器响应客户端。

```
ArrayList<Student> list = new ArrayList<Student>();
list.add(new Student("Vu Duc Hoan", "C1010G", "24"));
list.add(new Student("Vu Duc Hoan2", "C1010G2", "242"));

JSONObject js = new JSONObject();
org.json.JSONArray array = new JSONArray(list); 
```

**客户：**

你能告诉我如何在 JsonArray 中获取数据吗？我在用着`$.getJson`

```
btnJson.click(function(){
    $.getJSON("../DemoAjax/Controller?action=getJson",function(data){
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:36:15.147

我认为这是您正在寻找的 servlet 代码，但我认为您需要先将`Student`对象转换为`JSONObject`，然后将`JSONObject`s 放入`JSONArray`，本[教程](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)可能会对您有所帮助：

```
JSONObject js = new JSONObject();
org.json.JSONArray jsonArray = new JSONArray(list);

// set the response content-type
response.setContentType("application/json");

PrintWriter out = response.getwriter();

// writing the json-array to the output stream
out.print(jsonArray);
out.flush(); 
```

在 javascript 方法中，`data`in`function(data)`将包含此 json-array，您可以使用此[答案](https://stackoverflow.com/questions/2342371/jquery-loop-on-json-data-using-each)获取 html 页面中的数据。

# android - 以前隐藏的选择下拉菜单在关注时会导致 webview 崩溃

> ID：13216039
> 
> 赞同：1
> 
> 时间：2012-11-04T04:18:44.320
> 
> 标签：android, cordova, android-webview

我有一个在页面首次显示时隐藏的 div 面板。div 内有一些 html 下拉菜单（选择标签）。当我使 div 可见（通过 javascript）并聚焦到下拉列表之一时，我收到以下 logcat 错误：11-04 03:58:49.136: A/libc(18437): Fatal signal 11 (SIGSEGV) at 0x00000000 ( code=1) 然后，应用程序崩溃，webview 消失。我确认当父 div 最初不可见（显示：无）时会发生这种情况。如果 div 一开始是可见的，那么一切正常，即使 div 随后被隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T14:32:04.873

这可能为时已晚，但您是否尝试过将设备从 4.0.3 升级到 4.1.2？我有同样的问题，我可以解决它的唯一方法是升级到设备操作系统。

# c++ - 元组数

> ID：13216041
> 
> 赞同：0
> 
> 时间：2012-11-04T04:19:00.947
> 
> 标签：c++, c, algorithm

我有 N 个数字 a[1..N] 和 2 个其他整数 L 和 H。我如何计算满足 i < j < k 和 L <= a[i] + 的元组 (i,j,k) 的数量a[j] + a[k] <= H。

```
1 <= T <= 100
1 <= N <= 1000
1 <= L <= H <= 1000000
1 <= a[i] <= 1000000 
```

PS：需要比 N2logn 更好的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:48:55.947

**解决方案**

由于我的 C/C++ 有点生疏，这主要是一个算法问题，所以我将用伪代码编写（主要是正确的 C/C++，其中包含一些需要一段时间才能写出的算法）。

如果您至少有 sizeof(int)*10^12 字节的内存和可用时间，则可以使用时间复杂度为 O(n^2 * log(n)) 的此算法。

```
// Sort the N numbers using your favorite, efficient sorting method. (Quicksort, mergesort, etc.) [O(n*log(n))].
int[] b = sort(a)
int[] c = int[length(b)^2];
// Compute the sums of all of the numbers (O(n^2))
for(int i = 0; i < length(b); i++){
    for (int j = i; j < length(b); j++){
        c[i*length(b)+j] = b[i]+b[j];
    }
}

// Sort the sum list (you can do the sorts in-place if you are comfortable) - O(n^2*log(n))
d = sort(c);

// For each number in your list, grab the list of of sums so that L<=num+sum<=H O(n)
// Use binary search to find the lower, upper bounds O(log(n))
// (Total complexity for this part: O(n*log(n))
int total = 0;
for (int i = 0; i < b; i++){
    int min_index = binary_search(L-b[i]); // search for largest number <= L-b[i]
    int max_index = binary_search(H-b[i]); // search for smallest number >= H-b[i]
    total += max_index - min_index + 1; // NOTE: This does not handle edge cases like not finding any sums that work
}

return total; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:31:20.100

```
int find_three(int arr[], int c, int l,int h)
{
   int i, j, e, s, k;
   int count =0;
   sort(arr,arr+c);
   c--;
   while(arr[c]>h)
   c--;
   int sum=0;
   for (int i = 0; i<=c-2;i++)
   {  sum=arr[i]+arr[i+1]+arr[i+2];
      if(sum>h)
      break;
      for(j=i+1;j<=c-1;j++)
       {  
          for(k=j+1;k<=c;k++)
          {   sum=arr[i]+arr[j]+arr[k];
              if(sum>=l &&sum<=h)
                 count++;
              if(sum>h)
              break;
          }
           if(sum>h)
              break;
       }
   }
      return  count;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T04:33:08.743

一个基本的方法：

```
for (i=0; i<N; i++) {
    for (j=i+1; j<N; j++) {
        for (k=j+1; k<N; k++) {
            int sum = a[i] + a[j] + a[k];
            if (L <= sum && sum <= H) number_of_tuples++;
        }
    }
} 
```

可能更好（可能有一个错误，但基本想法是如果你已经超过最大值就打破）：

```
for (i=0; i<N; i++) {
    if (a[i] > H) continue;
    for (j=i+1; j<N; j++) {
        if (a[i] + a[j] > H) continue;
        for (k=j+1; k<N; k++) {
            int sum = a[i] + a[j] + a[k];
            if (L <= sum && sum <= H) number_of_tuples++;
        }
    }
} 
```

# php - 使用 PHP 在两台服务器之间同步 MySQL 数据库

> ID：13216042
> 
> 赞同：6
> 
> 时间：2012-11-04T04:19:32.550
> 
> 标签：php, mysql, sql, database, sync

我在两个不同的服务器上有相同的网站。
`Master Database - server1`
`Slave Database - Server2`

我想制作 PHP 脚本来检查主数据库中的更改，如果发现任何更改，它将与从数据库同步。我将为该脚本设置 chronjob，使其每隔几分钟运行一次。

我在 Google 上找到了一些脚本，但它根本不起作用。我尝试使用[PMS](http://sourceforge.net/projects/mysqlsync)，但收到：

> 注意：使用未定义的常量主机 - 在第 57 行的 /var/www/demos/pms/pmslib.php 中假定为“主机”
> 注意：使用未定义的常量用户 - 在 /var/www/demos/pms/ 中假定为“用户”第 57 行的 pmslib.php
> 注意：使用未定义的常量传递 - 在 /var/www/demos/pms/pmslib.php 中的第 57 行假设“通过”
> 注意：使用未定义的常量基 - 在 /var/ 中假设“基”第 63 行的 www/demos/pms/pmslib.php
> 注意：使用未定义的常量主机 - 在第 79 行的 /var/www/demos/pms/pmslib.php 中假定为“主机”
> 注意：使用未定义的常量主机 - 假定为“第 57 行 /var/www/demos/pms/pmslib.php 中的 host'
> 注意：使用未定义的常量用户 - 在第 57 行的 /var/www/demos/pms/pmslib.php 中假定为“用户”
> 注意：使用未定义的常量传递 - 在第 57 行的 /var/www/demos/pms/pmslib.php 中假定为“通过”
> 注意：使用未定义的常量基 - 在 /var/www/demos/pms/ 中假定为“基”第 63 行的 pmslib.php
> 注意：使用未定义的常量主机 - 在第 79 行的 /var/www/demos/pms/pmslib.php 中假定为“主机”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T04:24:03.270

您可能根本不需要为此使用 PHP。MySQL 内置了可以打开的复制功能。请参阅 MySQL 手册的第 16 章 - [http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

# app-store - 在 iphone App Store 上创建选择性应用程序

> ID：13216044
> 
> 赞同：2
> 
> 时间：2012-11-04T04:20:14.647
> 
> 标签：app-store, appstore-approval

我想在应用商店里放一个只有我的俱乐部会员才能下载的应用。

苹果是否支持这样做的方法？

我可以很容易地让我的应用程序主页要求输入密码以访问敏感功能，但我担心 Apple 不会支持这一点，因为公众可能会下载我的应用程序并发现它无用。它只会对我的俱乐部成员有用。

苹果会像我认为的那样拒绝上述情况吗？如果是这样，我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:12:55.097

Max 说的是一个很好的答案，只是有很多应用程序是针对特定人群的。事实上，我的应用程序确实被 Apple 接受了，并且目前在 App Store 上。它受密码保护，只有大约 100 名知道密码的人才能访问实际应用程序。Apple 对此表示同意——我的应用程序在一周内就被接受了。但我确实同意，如果可能，临时分发在某些情况下可能更合适或更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:25:22.290

Ad-hoc 分发是您最好的选择。它只允许分发到已在配置文件中指定的设备。

你可以使用[TestFlight 之](http://www.testflightapp.com)类的东西来自动化这个过程。

如果您将应用程序提交到应用程序商店以供公开下载，该应用程序仅适用于特定人群，您很可能会被拒绝。

# python - 为什么我的代码会导致无限循环？

> ID：13216045
> 
> 赞同：0
> 
> 时间：2012-11-04T04:20:20.993
> 
> 标签：python

我是python的新手。当我试图编写简单的代码时，我遇到了一个我无法理解的特殊问题。以下是代码

```
def myLog(x, b):
    temp = b
    def mylog(x,b):
        while b <= x :
            mylog(x,b*temp)
        return b/temp - 1
    return mylog(x,b)
myLog(16,2) 
```

为什么这段代码会导致无限循环？

**编辑：** 我发现了它导致无限循环的原因。这是修改后的代码。我忘记在内部函数定义中使用**return语句**

```
 def myLog(x, b):
        temp = b
        def mylog(x,b):
             while b <= x :
                  return mylog(x,b*temp)
             return b/temp - 1
        return mylog(x,b) 
```

我的日志（16,2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:24:33.427

循环中既没有`b`也没有`x`修改，所以比较结果永远不会改变。

# mysql - Mysql 统计每个月的总观众人数

> ID：13216048
> 
> 赞同：1
> 
> 时间：2012-11-04T04:20:57.903
> 
> 标签：mysql, count, rows

我每个月都会统计数据库中的每个观众。我尝试了很多方法，但我没有运气。这是代码示例

```
SELECT MONTH_v, YEAR_V, 
SUM(IF(day_v=1, views, 0)) AS '1',
SUM(IF(day_v=2, views, 0)) AS '2',
SUM(IF(day_v=3, views, 0)) AS '3',
SUM(IF(day_v=4, views, 0)) AS '4',
SUM(IF(day_v=5, views, 0)) AS '5',
SUM(IF(day_v=6, views, 0)) AS '6',
SUM(IF(day_v=7, views, 0)) AS '7',
SUM(IF(day_v=8, views, 0)) AS '8',
SUM(IF(day_v=9, views, 0)) AS '9',
SUM(IF(day_v=10, views, 0)) AS '10',
SUM(IF(day_v=11, views, 0)) AS '11',
SUM(IF(day_v=12, views, 0)) AS '12',
SUM(IF(day_v=13, views, 0)) AS '13',
SUM(IF(day_v=14, views, 0)) AS '14',
SUM(IF(day_v=15, views, 0)) AS '15',
SUM(IF(day_v=16, views, 0)) AS '16',
SUM(IF(day_v=17, views, 0)) AS '17',
SUM(IF(day_v=18, views, 0)) AS '18',
SUM(IF(day_v=19, views, 0)) AS '19',
SUM(IF(day_v=20, views, 0)) AS '20',
SUM(IF(day_v=21, views, 0)) AS '21',
SUM(IF(day_v=22, views, 0)) AS '22',
SUM(IF(day_v=23, views, 0)) AS '23',
SUM(IF(day_v=24, views, 0)) AS '24',
SUM(IF(day_v=25, views, 0)) AS '25',
SUM(IF(day_v=26, views, 0)) AS '26',
SUM(IF(day_v=27, views, 0)) AS '27',
SUM(IF(day_v=28, views, 0)) AS '28',
SUM(IF(day_v=29, views, 0)) AS '29',
SUM(IF(day_v=30, views, 0)) AS '30',
SUM(IF(day_v=31, views, 0)) AS '31'
FROM
(
 SELECT DAY(vwr_date) AS day_v, 
 MONTH(vwr_date) AS MONTH_v, 
 Year(vwr_date) AS YEAR_V,
 date(vwr_date) AS date_v, 
 count(vwr_id) AS views 
 FROM car_viewer 
 WHERE Year(vwr_date)='2012' AND vwr_tid='18' 
 GROUP BY date_v 
) as viewz
GROUP BY MONTH_v, YEAR_V 
ORDER BY MONTH_v, YEAR_V DESC; 
```

实时视图在这里：[http ://www.sqlfiddle.com/#!2/75aa8/1](http://www.sqlfiddle.com/#!2/75aa8/1)

问题是我想在每行的右侧添加两列：

1.  总计 = 每个查看器，包括每行的 0。
2.  平均 = 每行的平均观看者。

请不要犹豫，帮我一把。:)

参考：[MySQL count(*) 在一个月内每天返回 [BLOB-2B] 而不是数字](https://stackoverflow.com/questions/13042710/mysql-count-everyday-in-a-month-returns-blob-2b-instead-of-number/13042896#comment17724127_13042896)

学分：罗斯史密斯二世

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:28:44.960

只需添加`SUM(views)`外部查询：

```
SELECT MONTH_v, YEAR_V, 

  ...

  SUM(IF(day_v=30, views, 0)) AS '30',
  SUM(IF(day_v=31, views, 0)) AS '31',
  SUM(views)
FROM
(
 SELECT DAY(vwr_date) AS day_v,

 .... 
```

## [更新的 SQL Fiddle](http://www.sqlfiddle.com/#!2/75aa8/10)

# android - 选项菜单不起作用

> ID：13216054
> 
> 赞同：2
> 
> 时间：2012-11-04T04:22:44.017
> 
> 标签：android, menu

我正在尝试制作`OptionsMenu`，这是我的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return super.onCreateOptionsMenu(menu);
}

public boolean onOptionsItemSelect(MenuItem item){

    switch (item.getItemId()){
    case R.id.Guardar:
        Toast.makeText(DrawFunny.this, "Guardar",Toast.LENGTH_LONG).show();

        return true;
    case R.id.Finish:
        return true;

    default:
        return super.onOptionsItemSelected(item);               
        }
    } 
```

**菜单：**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    <group android:id="@+id/group1">
        <item android:id="@+id/Guardar" android:title="Guardar"></item>
        <item android:id="@+id/Finish" android:title="Terminar"></item>
    </group>
</menu> 
```

This menu is displayed on the screen but when items are selected, it does nothing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:03:05.360

在尝试您的代码时，我发现了一些缺失的行，我更正了它然后它对我有用。因此，用我的代码替换您的代码或更正您的代码

XML

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <group android:id="@+id/group1">
    <item android:id="@+id/Guardar" android:title="Guardar"></item>
    <item android:id="@+id/Finish" android:title="Terminar"></item>
    </group>
</menu> 
```

活动

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_disk_shooter, menu);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Log.i(TAG, "onOptionsItemSelected()");
        switch (item.getItemId()){
        case R.id.Guardar:
            Toast.makeText(DiskShooterActivity.this, "Guardar",Toast.LENGTH_LONG).show();

            return true;
        case R.id.Finish:
            return true;

        default:
            return super.onOptionsItemSelected(item);               
            }
    } 
```

尝试一下..，。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:16:24.587

试试这个，它应该工作。

```
Toast toastname = Toast.makeText(DrawFunny.this, "Guardar", Toast.LENGTH_LONG);
toastname.show(); 
```

# emacs - 可选部分的 Emacs 语法高亮

> ID：13216058
> 
> 赞同：4
> 
> 时间：2012-11-04T04:23:31.210
> 
> 标签：emacs, elisp, font-lock, emacs-faces

我正在尝试从基本模式编写派生模式。假设我有这个正则表达式：`A ((foo)bar)? B`，我如何告诉 emacs 使用以下面孔？

*   `font-lock-keyword-face`在`A`
*   `font-lock-warning-face`在`foo`（但不是`bar`）
*   `font-lock-constant-face`在`B`

我尝试使用以下代码：

```
(defvar myregexp
  "\\(A\\) \\(?:\\(foo\\)bar \\)?\\(B\\)")

(setq mylang-font-lock-keywords `(
  (, myregex 1 font-lock-keyword-face)
  (, myregex 2 font-lock-warning-face)
  (, myregex 3 font-lock-constant-face)
)) 
```

但它不适用于字符串`A B`（emacs 报告丢失的捕获）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:54:25.553

使用启用了 laxmatch 的 subexp 荧光笔让 font-lock-mode 忽略匹配中的缺失组：

```
(setq mylang-font-lock-keywords
      `((,myregexp (1 font-lock-keyword-face)
              (2 font-lock-warning-face nil t)
              (3 font-lock-constant-face)))) 
```

每个子表达式突出显示的第四个元素是`laxmatch`参数。如果`t`font-lock-mode 在`myregexp`.

有关更多信息，请参阅Emacs Lisp 手册中[的基于搜索的字体。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Search_002dbased-Fontification.html#Search_002dbased-Fontification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:07:12.597

指定正则表达式的方式，在`A`和之间需要两个空格`B`。要么在可选的 foobar 部分内拉第二个空格，要么在它之后使用`*`or `?`。

# root - 如何扩大我的 ZFS 根池镜像？

> ID：13216060
> 
> 赞同：0
> 
> 时间：2012-11-04T04:24:06.857
> 
> 标签：root, pool, mirror, zfs

我有一个小型系统，它有两个运行 Solaris 11 的驱动器和一个 ZFS 镜像根池。我需要扩大根池。我可以只安装两个大驱动器，一次一个，等待每个重新同步吗？还是第一个替换磁盘会永远忽略它的额外空间？我知道有一个名为“autoexpand”的属性，但我不确定它在镜像情况下如何应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:16:56.230

`zpool replace`是的，您可以通过将磁盘与更大的磁盘一一对应来扩大池。一个可能的问题是，您需要在非引导磁盘上安装 grub，以便在更换通常从其引导的磁盘时可以引导系统。此外，您可能需要更改 BIOS 中的启动顺序。

# ios - 格式化值-ios

> ID：13216063
> 
> 赞同：0
> 
> 时间：2012-11-04T04:24:34.813
> 
> 标签：ios

我正在研究天气应用程序。我将注释放在地图上，注释标注显示温度。但是，一旦温度超过三位数，它就会显示三个点而不是值。我如何格式化该值以显示三位数字。有什么建议么？

```
int value=[att integerValue]; 
```

它是：

```
annotation.title=[NSString stringWithFormat:@"Ozone Level:%@",value]; 
```

它是：

```
 annotation.title=[NSString stringWithFormat:@"Ozone Level: %@ ",value]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:23:05.460

整数不是指针，您正在尝试使用对象说明符 ( `%@`) 而不是整数说明符：

尝试

```
NSInteger value = [att integerValue];
annotation.title=[NSString stringWithFormat:@"Ozone Level: %d ", value]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-04T04:27:04.080

这三个点几乎肯定是操作系统告诉您标签不够大，无法显示完整数字。给标签更多的空间。

# java - 在 Java 中执行 MySQL 存储过程

> ID：13216066
> 
> 赞同：0
> 
> 时间：2012-11-04T04:25:09.887
> 
> 标签：java, mysql, stored-procedures

我正在尝试使用 jdbcTemplate 执行存储过程，但我不断收到错误消息，指出 GetEvents 需要 0 个参数。任何人都可以解释为什么或有更好的方法来执行这个存储过程吗？

我得到的错误是：
org.springframework.dao.InvalidDataAccessApiUsageException: SQL [CALL GetEvents(?, ?, ?)]: given 3 parameters but expected 0

程序

```
mysql> CREATE PROCEDURE GetEvents(IN search_table VARCHAR(255), IN start TIMESTAMP, IN end TIMESTAMP)
    -> BEGIN
    -> SELECT COUNT(*)
    -> FROM search_table
    -> WHERE time >= start AND time <= end;
    -> END //
Query OK, 0 rows affected (0.02 sec) 
```

爪哇

```
public int getEnterExitsAll(DateTime start, DateTime end) {
    Map<String, String> params = new HashMap<String, String>();
    params.put("search_table", TABLE_ENEX);
    params.put("start", start.toString());
    params.put("end", end.toString());
    return template.queryForInt("CALL GetEvents(?, ?, ?)", params); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:31:20.647

我怀疑，这是因为您的变量命名（`end`保留关键字）而发生的。请尝试重命名`end`to`endTime`和`start`to`startTime`或类似的名称。

# javascript - 使用 JQuery 从另一个 DIV 替换 DIV 中的文本

> ID：13216067
> 
> 赞同：0
> 
> 时间：2012-11-04T04:25:15.530
> 
> 标签：javascript, jquery, html

我正在尝试将“biginfotitle”div 中的文本替换为“slidertitle”div 中的文本。我已经更改了照片的来源，但无法弄清楚我在复制 div 中的文本时做错了什么。

```
<script>
$(document).ready(function(){
$('.scrollcontent').click(function(){
var $this = $(this);
csrc=$this.children('img.thumbpic#'+this.id).attr('src');
ctitle=$('.slidertitle#'+this.id).text();
$('img#mainpic').attr("src",csrc);
$('div#biginfotitle').text(ctitle);
//alert(ctitle);
});
});
</script>

<div class="scrollcontent" id="23">
<img class="thumbpic" id="23" src="/smallthumbs/24.jpg" />
<div id="thumbinfo">
<div class="slidertitle" id="23">Click to change to this</div>
</div>
</div>

<div id="slidercontent">
<img id="mainpic" src="/thumbs/blah.jpg" />
<div id="biginfo">
<div id="biginfotitle">Change Me</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:33:50.547

您不能在各种元素中拥有多次相同的“ID”，这必须是唯一的：

看到这个：

```
$('.scrollcontent').click(function() {
    var 
        $this = $(this),
        csrc = $this.children('img.thumbpic').attr('src'),
        ctitle = $this.find('.slidertitle').text();

    $('#mainpic').attr("src", csrc);
    $('#biginfotitle').text(ctitle);
}); 
```

[例子](http://jsfiddle.net/adescalzo/LGHxk/)

# mysql - MySQL 查询返回 AVG

> ID：13216068
> 
> 赞同：4
> 
> 时间：2012-11-04T04:25:35.437
> 
> 标签：mysql, sql

只是一个练习问题，如果有人能解决这个问题，我会很感激。

我有一个名为 Product 的数据库和另一个名为 PC 的数据库。我正在尝试执行查询以“为所有制造打印机的制造商查找 PC 的平均硬盘大小”

这是我的代码：

```
SELECT maker, AVG(hd) 
FROM pc, product
WHERE pc.model=product.model
GROUP BY maker
HAVING COUNT(type='PR')>=1 
```

type 是 Product 的一个属性，它代表打印机（PR）笔记本电脑或 PC，但是 HAVING 语句似乎并没有单独列出生产打印机的制造商，而是我在 Product 表中为每个制造商返回一个 AVG。

**更新**

这就是关系的样子：

```
Product(maker, model, type)
PC(model, hd, speed, ram, price)
Printer(model, color, type, price) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T05:19:45.137

尝试以下查询：

```
SELECT maker, AVG(hd) FROM PC, Product
WHERE PC.model=Product.model
AND Product.maker IN 
   (SELECT DISTINCT maker FROM Product WHERE type='PR')
GROUP BY Product.maker; 
```

演示：[http ://sqlfiddle.com/#!2/abfaa/2](http://sqlfiddle.com/#!2/abfaa/2)

您只需添加一个条件以确保制造商是至少拥有一种打印机产品的制造商之一。然后，您按制造商分组以找到各个平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:08:27.103

所有制造打印机的制造商：

```
 SELECT maker
    FROM product
   WHERE type = 'PR'
GROUP BY maker; 
```

对于所有同时生产打印机的制造商而言，PC 的平均硬盘大小

```
 SELECT p.maker, AVG(pc.hd) avg_hd_size
    FROM
       (
  SELECT maker
    FROM product
   WHERE type = 'PR'
GROUP BY maker
       ) g
    JOIN product p on p.maker = g.maker
    JOIN pc on pc.model = p.model
GROUP BY p.maker; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-20T17:57:21.410

SELECT maker, AVG(hd) AS "average HDD capacity" FROM Product Inner Join PC ON PC.model=Product.model Where maker IN (select maker from product Where type = 'PC' Intersect select maker from product Where type = 'Printer ') 按制造商分组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T12:52:18.510

* * *

**选择**制造商，平均（高清）

**FROM** PC **INNER JOIN**产品

**ON** PC.model=Product.model

**GROUP BY**制造商

**拥有**制造商（**从**产品中**选择不同**的制造商，**其中**类型='打印机'）

 ***** * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-07-21T18:16:57.577

```
select distinct maker
      ,avg(hd) as Avg_hd
  from Product
 inner join PC on (Product.model = PC.model)
 where type = 'Pc'
   and maker in (Select maker from Product where type = 'Printer')
 Group by maker 
```****

# javascript - 当所有复选框都为假时检查单选按钮

> ID：13216075
> 
> 赞同：0
> 
> 时间：2012-11-04T04:26:24.830
> 
> 标签：javascript, html, forms, radio-button, checkbox

当所有元素“复选框”都未选中时，我需要将单选按钮（“no_subscribe”）设置为 true。这应该在取消选中所有这些复选框后发生。如果在其他地方问过这个问题，请原谅我。我是javascript和一般编程的新手，所以非常感谢任何帮助！我已经能够让“订阅”按钮做我想做的事，但我无法弄清楚相反的情况。这些都在一个名为“mailer”的表格中。我最近删除了我所做的尝试。他们没有工作，所以很抱歉没有代码可以解决。

```
<fieldset>
Subscribe to our Mailing List?
        <input type = "radio" name = "yes" id = "subscribe" onclick = "subscribe_to_all();" value = "yes" />Yes
        <input type = "radio" name = "no" id = "no_subscribe" onclick = "subscribe_to_none();" value = "no" />No
</fieldset>

<fieldset name = "subscribe">
<legend>Mailing List Subscriptions</legend>
    <input type="checkbox" id = "c1" name="subscriptions" onclick = "radio_yes();"  value="CorporateEmails"/>
    Corporate Press Release Emails<br />
    <input type="checkbox" id = "c2" name="subscriptions" onclick = "radio_yes();"  value="SoftwareAdvertising"/>
    Upgrade Software Advertising List<br />
    <input type="checkbox" id = "c3" name="subscriptions" onclick = "radio_yes();"  value="PostBuyoutSpammers"/>
    List given to spammers after buyout<br />
    <input type="checkbox" id = "c4" name="subscriptions" onclick = "radio_yes();"  value="NonCynical"/>
    The only non-cynical list<br />
    <input type="checkbox" id = "c5" name="subscriptions" onclick = "radio_yes();"  value="SelltoSpammers"/>
    List to sell to spammers<br />
    <input type="checkbox" id = "c6" name="subscriptions" onclick = "radio_yes();"  value="SpamList"/>
    Spam List<br /> 
```

外部 javascript 文件：

```
function subscribe_to_all() {
    for (i = 0; i < document.mailer.subscriptions.length; i++) {
        document.mailer.subscriptions[i].checked = true;
    }
}

function subscribe_to_none() {
    for (i = 0; i < document.mailer.subscriptions.length; i++) {
        document.mailer.subscriptions[i].checked = false;
    }
}

function radio_yes() {
    document.getElementById("subscribe").checked = true;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:43:07.367

通过使用 jQuery，您可以通过以下方式解决此问题：

将`class="subscriptions"`属性添加到所有复选框。

```
$('.subscriptions').change(function() {
    var allUncheck = true;
    $('.subscriptions').each(function() {
        if ($(this).is(':checked')) allUncheck = false;
    });
    if (allUncheck == true) {
        $('#no_subscribe').attr('checked', 'true');
    } else {
        $('#no_subscribe').attr('checked', false);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:24:45.177

我使用了一个新功能。它没有优化。我使用了一个新功能。在那里，您可以循环获取复选框状态。但我的代码有效。只需复制并粘贴并查看更改

```
 <script type="text/javascript">
function subscribe_to_all() {

for (i=0;i<document.mailer.subscriptions.length;i++){

document.mailer.subscriptions[i].checked = true;

}
}

function subscribe_to_none() {

for (i=0;i<document.mailer.subscriptions.length;i++){

document.mailer.subscriptions[i].checked = false;

}
}
function radio_yes() {

document.getElementById("subscribe").checked = true;

}
function radio_uncheck()
{

        c1=document.getElementById("c1").checked;
        c2=document.getElementById("c2").checked;
        c3=document.getElementById("c3").checked;
        c4=document.getElementById("c4").checked;
        c5=document.getElementById("c5").checked;
        c6=document.getElementById("c6").checked;
        console.log(c1);
        if(c1==false && c2==false && c3==false && c4==false && c5==false && c6==false)
        {document.getElementById("subscribe").checked=false;}

    //document.getElementById("subscribe").checked=false;
} 
</script>

<fieldset>
Subscribe to our Mailing List?
        <input type = "radio" name = "yes" id = "subscribe" onclick = "subscribe_to_all();" value = "yes" />Yes
        <input type = "radio" name = "no" id = "no_subscribe" onclick = "subscribe_to_none();" value = "no" />No
</fieldset>

<fieldset name = "subscribe">
<legend>Mailing List Subscriptions</legend>
    <input type="checkbox" id = "c1" name="subscriptions" onclick = "radio_yes();radio_uncheck();"  value="CorporateEmails"/>
    Corporate Press Release Emails<br />
    <input type="checkbox" id = "c2" name="subscriptions" onclick = "radio_yes();radio_uncheck();"  value="SoftwareAdvertising"/>
    Upgrade Software Advertising List<br />
    <input type="checkbox" id = "c3" name="subscriptions" onclick = "radio_yes();radio_uncheck();"  value="PostBuyoutSpammers"/>
    List given to spammers after buyout<br />
    <input type="checkbox" id = "c4" name="subscriptions" onclick = "radio_yes();radio_uncheck();"  value="NonCynical"/>
    The only non-cynical list<br />
    <input type="checkbox" id = "c5" name="subscriptions" onclick = "radio_yes();radio_uncheck();"  value="SelltoSpammers"/>
    List to sell to spammers<br />
    <input type="checkbox" id = "c6" name="subscriptions" onclick = "radio_yes();radio_uncheck();"  value="SpamList"/>
    Spam List<br /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:00:12.787

这可以使用jquery解决。第一个字段集中的单选按钮应该具有相同的名称值...我已经在您的代码上尝试过。看看吧。我为字段集添加了一个 id 'search' ...

```
$(function() {
 $('#search input:checkbox').click(function() {
  var classes = $('#search input:checkbox:checked');  
  if(classes.length == 0)
    {
        $('input:radio[name=no]:nth(1)').attr('checked',true);
    }  
  else
    {
       $('input:radio[name=no]:nth(1)').attr('checked',false);
    }             
});
}); 
```

这是工作小提琴。 [http://jsfiddle.net/NBCX8/4/](http://jsfiddle.net/NBCX8/4/)

# android - 如何在片段 A 中创建按钮 X，它将片段 A 替换为片段 B

> ID：13216079
> 
> 赞同：0
> 
> 时间：2012-11-04T04:27:28.447
> 
> 标签：android, button, replace, switch-statement, fragment

我里面有片段 A 和按钮 X。当我点击按钮 X 时，片段 A 将被片段 B 替换？我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:23:04.343

```
public void changeFragment(){
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    xyzFragment fragment = new xyzFragment();
    ft.replace(R.id.details_fragment, fragment );
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();
} 
```

1.  xyzFragmetn ：另一个包含按钮的片段。
2.  调用 changeFragment() 方法更改片段

# javascript - 用JS确定当前页面的here状态

> ID：13216080
> 
> 赞同：1
> 
> 时间：2012-11-04T04:27:53.983
> 
> 标签：javascript

我目前通过 CSS 设置一个 LI here 状态，如下所示：

```
body.className li.className {styles for here state} 
```

但是，我想避免每次添加新页面时都必须在 CSS 文件中添加新规则。相反，我想用JS说[如果body.class对LI.class是=，那么在同一个LI中添加一个“here”的类。

有人可以协助这个逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:35:24.300

如果 body 元素上只有一个类名，应该这样做：

```
var bodyClass = $(body).attr("class");
$("li").is("."+bodyClass).addClass("here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:40:12.420

我假设您正在尝试使用这种技术在菜单按钮上设置“活动”类，例如“这里”，如“你现在在这里”或“当前页面”？

这当然可以通过 Javascript 完成，但我怀疑这是最好的方法。

javascript示例：（在jQuery的帮助下）

```
$(function() {
    var bodyId = $('body').attr('id');
    $('#menu li')            // find li tags in the menu list
        .removeClass('here') // remove previous occurance of 'here'
        .find('li.'+ bodyId) // find li with className equals to the body's 'id'
        .addClass('here');   // add the 'here' class to that Li tag.
}); 
```

**备注**我做的一件事是使用 body`id`来检查它是否也作为 LI 上的一个类存在，然后我添加了“here”类。（我用了，`id`因为body上可能有不止1个类，所以不可能知道是哪一个。）

**可能的更好方法：**`class`您显然已经在标签上将 当前页面写为 a `body`（我可以假设这是通过您的服务器端代码自动完成的吗？php？asp？java？...）如果您可以编写，那么您可以添加菜单中的逻辑测试也是如此。

例如，在您循环访问您的菜单项时，您可以测试该特定菜单项是否与当前请求的页面相同。`here`然后在li上打印一个类。然后你的CSS只需要 `li.here { /* current page styles */ }`

# python - pandas DataFrame 旋转问题

> ID：13216087
> 
> 赞同：5
> 
> 时间：2012-11-04T04:28:56.387
> 
> 标签：python, pandas

我有一些格式有点奇怪的雷达数据，我不知道如何使用 pandas 库正确旋转它。

我的数据：

```
 speed   time
loc     
A    63  0000
B    61  0000
C    63  0000
D    65  0000
A    73  0005
B    71  0005
C    73  0005
D    75  0005 
```

我想把它变成一个看起来像这样的 DataFrame：

```
 0000    0005
loc     
A    63     73
B    61     71
C    63     73
D    65     75 
```

我做了很多摆弄，但似乎无法使语法正确。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T05:53:01.027

您可以在此处使用 pivot 方法：

```
In [71]: df
Out[71]: 
     speed  time
loc             
A       63     0
B       61     0
C       63     0
D       65     0
A       73     5
B       71     5
C       73     5
D       75     5

In [72]: df.reset_index().pivot('loc', 'time', 'speed')
Out[72]: 
time   0   5
loc         
A     63  73
B     61  71
C     63  73
D     65  75 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T05:24:25.860

假设您的数据源位于 csv 文件中，

```
from pandas.io.parsers import read_csv
df = read_csv("radar_data.csv")

df  # shows what is in df

       loc  speed  time
0    A     63     0
1    B     61     0
2    C     63     0
3    D     65     0
4    A     73     5
5    B     73     5
6    C     75     5
7    D     75     5
8    A     67     0
9    B     68     0
10   C     68     0
11   D     70     0 
```

请注意，我尚未设置`loc`为索引，因此它使用自动增量整数索引。

```
panel = df.set_index(['loc', 'time']).sortlevel(0).to_panel() 
```

但是，如果您的数据框已经`loc`用作索引，我们将需要将该`time`列附加到其中，以便我们拥有一个本地时间层次索引。这可以使用方法中的新`append`选项来完成`set_index`。像这样：-

```
panel = df.set_index(['time'], append=True).sortlevel(0).to_panel() 
```

无论哪种情况，我们都应该达到这种情况：-

```
panel  # shows what panel is

<class 'pandas.core.panel.Panel'>
Dimensions: 1 (items) x 4 (major) x 2 (minor)
Items: speed to speed
Major axis: A to D
Minor axis: 0 to 5

panel["speed"]  # <--- This is what you are looking for.

time   0   5
loc         
A     63  67
B     73  61
C     68  73
D     63  68 
```

希望这可以帮助。

# c# - 数据集 getXML() XML 列

> ID：13216088
> 
> 赞同：1
> 
> 时间：2012-11-04T04:29:26.093
> 
> 标签：c#, dataset

我执行一个过程并将值填充到`DataSet`. 过程返回 XML 数据类型值。当我将其转换`DataSet`为 XML 时，我将 XML 数据类型值作为字符串获取，但我希望它作为子节点。我该怎么做呢？

程序输出：

![在此处输入图像描述](../Images/8a74189d7feb881f3451ae90882c6213.png)

我转换`DataSet`为 XML 如下

```
DataSet ds = null;
using (SqlConnection connection = new SqlConnection(sConnectionString))
{
    connection.Open();
    SqlCommand Sqlcommand = new SqlCommand();
    Sqlcommand.CommandType = CommandType.StoredProcedure;
    if (SqlParamlist != null)
    {
        foreach (SqlParameter Sqlparameter in SqlParamlist)
        {
            Sqlcommand.Parameters.AddWithValue(Sqlparameter.ParameterName, Sqlparameter.Value);                                
        }
    }
    Sqlcommand.CommandText = sProc;
    Sqlcommand.Connection = connection;
    sProcParams = sProc + " " + sProcParams;
    using (SqlDataAdapter da = new SqlDataAdapter(Sqlcommand))
    {
        ds = new DataSet("DATATABLE");
        da.Fill(ds, "DATAROW");
        Sqlcommand.Parameters.Clear();
        da.Dispose();
    }
    connection.Close();
}
XmlDataDocument xDoc = new XmlDataDocument();
xDoc.LoadXml(ds.GetXml()); 
```

这是我`xDoc.OuterXml`的

```
<DATATABLE>
    <DATAROW>
        <xmllimes>&lt;row&gt;&lt;time&gt;16:00:00&lt;/time&gt;&lt;/row&gt;</xmllimes>
    </DATAROW>
    <DATAROW>
        <xmllimes>&lt;row&gt;&lt;time&gt;14:20:00&lt;/time&gt;&lt;/row&gt;</xmllimes>
    </DATAROW>
    <DATAROW>
        <xmllimes>&lt;row&gt;&lt;time&gt;12:30:00&lt;/time&gt;&lt;/row&gt;</xmllimes>
    </DATAROW>
</DATATABLE> 
```

但我想`ds.GetXML()`返回以下内容

```
<DATATABLE>
    <DATAROW>
        <xmllimes>
            <row>
                <time>16:00:00</time>
            </row>
        </xmllimes>
    </DATAROW>
    <DATAROW>
        <xmllimes>
            <row>
                <time>14:20:00</time>
            </row>
        </xmllimes>
    </DATAROW>
    <DATAROW>
        <xmllimes>
            <row>
                <time>12:30:00</time>
            </row>
        </xmllimes>
    </DATAROW>
</DATATABLE> 
```

# android - DialogFragment 现在在为后退按钮启用可取消或 keylistener 时显示

> ID：13216090
> 
> 赞同：3
> 
> 时间：2012-11-04T04:29:41.880
> 
> 标签：android, android-dialogfragment, android-support-library

我有一个`DialogFragment`（支持 v4 库），我想添加通过按后退按钮将其关闭的可能性。

下面的代码可以很好地显示对话框，但是只要我在该行中激活/评论

```
frag.getDialog().setCancelable(true); 
```

在我的`newInstance`方法中，对话框将不再显示。或者，我还尝试`OnKeyListener`在对话框 ( `frag.getDialog()`) 中添加一个，这会导致相同的结果 - 对话框不再显示。

```
public class ProgressDialogFragment extends DialogFragment {

    private static final String TAG = ProgressDialogFragment.class.getName();

    private static ProgressDialogFragment newInstance(String title, String description) {
        final ProgressDialogFragment frag = new ProgressDialogFragment();
        // frag.getDialog().setCancelable(true);
        Bundle args = new Bundle();
        args.putString("title", title);
        args.putString("description", description);
        frag.setArguments(args);
        return frag;
        }
    }

    public static void display(FragmentManager supportFragmentManager, String title, String description) {     
        FragmentTransaction ft = supportFragmentManager.beginTransaction();
        ft.add(newInstance(title, description), TAG);
        ft.commitAllowingStateLoss();
    }

    ....
} 
```

相关问题，但没有帮助：

*   [DialogFragment 和后退按钮](https://stackoverflow.com/questions/7622031/dialogfragment-and-back-button)
*   [Android - 后退按钮和片段后台堆栈不起作用](https://stackoverflow.com/questions/12610063/android-back-button-and-fragment-backstack-not-working?rq=1)

# ruby-on-rails - 如何按值按降序对哈希进行排序并在 ruby 中输出哈希？

> ID：13216092
> 
> 赞同：40
> 
> 时间：2012-11-04T04:30:06.043
> 
> 标签：ruby-on-rails, ruby, sorting, hash

```
output.sort_by {|k, v| v}.reverse 
```

和钥匙

```
h = {"a"=>1, "c"=>3, "b"=>2, "d"=>4}
=> {"a"=>1, "c"=>3, "b"=>2, "d"=>4}

Hash[h.sort] 
```

现在我有这两个。但我正在尝试按值按降序对哈希进行排序，以便它返回

```
=> {"d"=>4, "c"=>3, "b"=>2, "a"=>1 } 
```

提前致谢。

编辑：让我发布整个代码。

```
def count_words(str)
  output = Hash.new(0)
  sentence = str.gsub(/,/, "").gsub(/'/,"").gsub(/-/, "").downcase
  words = sentence.split()
  words.each do |item|
    output[item] += 1 
  end
  puts Hash[output.sort_by{ |_, v| -v }]
  return Hash[output.sort_by{|k, v| v}.reverse]
end 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-11-04T04:32:13.140

尝试：

```
Hash[h.sort.reverse] 
```

这应该返回你想要的。

**编辑：**

按价值做到这一点：

```
Hash[h.sort_by{|k, v| v}.reverse] 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-04T04:56:33.427

试试这个：

```
Hash[h.sort_by{ |_, v| -v }] 
```

# php - Lithium Couchdb 按键查询设计

> ID：13216093
> 
> 赞同：0
> 
> 时间：2012-11-04T04:30:10.397
> 
> 标签：php, cakephp, couchdb, lithium

此代码工作正常：

```
$posts = Posts::all(array(
    'conditions' => array(
        'design' => 'posts', 'view' => 'all',
        'limit' => 10, 'descending' => 'true'
    )
)); 
```

它查询所有 Posts 文档。

但是，当您使用按键过滤器时，它不起作用：

```
$posts = Posts::all(array(
    'conditions' => array(
        'design' => 'posts', 'view' => 'all',
        'key' => 'title',
        'limit' => 10, 'descending' => 'true'
    )
)); 
```

关于如何按键过滤设计文档的任何想法？

**更新：**

此查询工作正常： 'key' => '"title"' 带双引号

```
$posts = Posts::all(array(
    'conditions' => array(
        'design' => 'posts', 'view' => 'all',
        'key' => '"title"',
        'limit' => 10, 'descending' => 'true'
    )
)); 
```

# .htaccess - Gzip压缩不起作用

> ID：13216095
> 
> 赞同：2
> 
> 时间：2012-11-04T04:30:42.537
> 
> 标签：.htaccess, compression, gzip, yslow

我有一个网站，其中 Yslow 说您需要使用 gzip 压缩组件。

因此，当我将 phpinfo() 回显为我的 test.php 文件时，我在我的 apache 响应中找到了以下信息。

* * *

SERVER_SOFTWARE Apache/2.2.17 (Win32) PHP/5.3.5 HTTP_ACCEPT_ENCODING gzip, deflate Accept-Encoding gzip, deflate gzip 压缩启用

## _SERVER["HTTP_ACCEPT_ENCODING"] gzip，放气

然后我按照本教程将以下代码复制并粘贴到我的 .htaccess 文件中。

* * *

```
<IfModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_dechunk Yes
mod_gzip_keep_workfiles No
mod_gzip_can_negotiate Yes
mod_gzip_add_header_count Yes
mod_gzip_send_vary Yes
mod_gzip_command_version '/mod_gzip_status'
mod_gzip_min_http 1000
mod_gzip_minimum_file_size 300
mod_gzip_maximum_file_size 512000
mod_gzip_maximum_inmem_size 60000
mod_gzip_handle_methods GET POST
mod_gzip_temp_dir /tmp
mod_gzip_item_include file \.html$
mod_gzip_item_include file \.php$
mod_gzip_item_include file \.pl$
mod_gzip_item_include file \.rb$
mod_gzip_item_include file \.py$
mod_gzip_item_include file \.cgi$
mod_gzip_item_include file \.css$
mod_gzip_item_include file \.js$
mod_gzip_item_include mime ^application/javascript$
mod_gzip_item_include mime ^application/x-javascript$
mod_gzip_item_include mime ^text/.*
mod_gzip_item_include mime ^httpd/unix-directory$
mod_gzip_item_include handler ^cgi-script$
mod_gzip_item_include handler ^server-status$
mod_gzip_item_include handler ^server-info$
mod_gzip_item_include handler ^application/x-httpd-php
mod_gzip_item_exclude mime ^image/.*
</IfModule> 
```

* * *

但这没有任何区别，因为我仍然按照 YSlow 的建议出现文件压缩错误。

我还通过参考其他一些页面教程尝试了其他一些脚本，但没有成功。

请任何人都可以给我解决方案如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T01:01:21.663

试试这个：

```
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE application/x-javascript application/javascript text/javascript text/css text/html text/xml
</IfModule> 
```

此外，清除浏览器的缓存并重新启动浏览器以确保它不会缓存非 gzip 的响应。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-11T11:36:28.407

有些服务器可能没有安装 apache 模块（gzip、deflate）。解决此问题的一种方法是将以下内容添加到您的 .htaccess 中：

```
php_flag zlib.output_compression On
php_value zlib.output_compression_level 5 
```

# machine-learning - 在进行 k-means 算法时，如何识别具有所有包含点的内部节点在球树中的一个簇中？

> ID：13216104
> 
> 赞同：6
> 
> 时间：2012-11-04T04:33:03.937
> 
> 标签：machine-learning, data-mining, cluster-analysis, k-means

我现在正在阅读《*数据挖掘：实用机器学习工具和技术第三版》*一书。在 4.8 节中，它讨论了如何使用`k-d trees`或`ball trees`提高`k-means algorithm`.

在用所有数据点构建球树之后，它会搜索所有叶节点以查看其中的点各自靠近哪个预先选择的聚类中心。它说有时由更高的内部节点表示的区域完全落在单个集群中心的域内。这样我们就不需要遍历它的子节点，所有的日期点都可以一次处理。

问题是，在实现数据结构和算法时，如何判断指向内部节点的区域是否落入单个簇中心？

在二维或三维空间中，这并不难。我们可以看到集群中心中每一对的所有中垂线是否都穿过指向内部节点的区域。

但是在更高维空间中，如何识别呢？有没有通用的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:40:29.557

您需要考虑最大和最小距离。

如果空间对象（例如，半径为 r 的球体）与所有其他均值的最小距离大于与一个的最大距离，则容器内的所有对象都将属于该均值。因为如果

```
maxdist(mean_i, container) < min of all j != i mindist(mean_j, container) 
```

然后特别是对于容器中的任何对象

```
dist(mean_i, obj_in_container) < min of all j != i dist(mean_j, obj_in_container) 
```

即对象将属于均值 i。

球体和矩形的最小和最大距离可以在任意维度上轻松计算。然而，在更高维度，mindist 和 maxdist 变得非常相似，这种情况很少会成立。此外，如果您的树结构良好（即小型容器）或结构不良（重叠容器），则会产生巨大的差异。

kd-trees 非常适合内存中的只读操作。对于插入，它们的表现相当糟糕。R*-trees 在这里好多了。此外，改进的 R*-trees 分割策略确实得到了回报，因为它比其他策略生成更多的矩形框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T09:19:41.520

我自己有一个解决方案，但在我看来不是一个很好的解决方案。
对于k维空间，两点的中垂线是一个超平面。我们计算每一对所有聚类中心的中垂线。
面对上述问题，我们看到一个节点，它可以指定一个区域——空间中的一个超球面。首先，我们找到离超球体中心点 P 最近的聚类中心。然后，我们迭代地对每对中心的每个中垂线（一个超平面），其中一个是上述中心，我们计算点 P 和点之间的欧几里德距离中垂线。如果距离小于超球面的半径，则推断超球面与中垂线相交。所以这个内部节点可能包含可能不属于上述聚类中心的数据点，迭代中断。如果迭代结束时没有break，可以说，毫无疑问，把这个节点包含的所有数据点都放到上面的聚类中心是可以的。

# php - php 中回显 UTF-8 的正确语法是什么？

> ID：13216108
> 
> 赞同：4
> 
> 时间：2012-11-04T04:33:30.660
> 
> 标签：php, html, utf-8

> **可能重复：**
> [如何从数字中打印原始 UTF-8 字符？[PHP]](https://stackoverflow.com/questions/2748459/how-do-you-print-raw-utf-8-characters-from-their-numbers-php)

此代码有效：`echo ' & # 3 4 ; '`将在我的网页上打印双引号。

另一方面，这显然是错误`echo ' U + 2 5 B 2 '`的：只打印文字字符。

什么是正确的语法？顺便说一句，那`U+25B2`应该是一个向上的三角形。我想用它来覆盖一个带有向下三角形的 html 选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:38:17.367

在您的 PHP 页面中添加以下标题。我认为应该注意打印所需的字符。

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

并使用您的 UTF char 回显您的值：

```
echo "\xE2\x96\xB2"; 
```

**请注意**：向上三角形`E2 96 B2`的 UTF-8 等效于UTF-16 值。`U+25B2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:53:05.210

和你的报价一样做：

```
echo '&#9650;'; 
```

[您可以在FileFormat.Info](http://www.fileformat.info/info/unicode/char/25b2/index.htm)上找到 HTML 实体信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T05:26:37.437

`u+25b2`只是一个格式良好的人类字符串，呈现特定 unicode 字符序列的两个字节。就其本身而言，字符串形式对浏览器没有任何意义，因为那是人类版本。要查看由该代码序列表示的实际字符，您必须输出原始字节，例如 0x25 和 0xb2。

# python - Python 和用户代理解析器

> ID：13216111
> 
> 赞同：0
> 
> 时间：2012-11-04T04:34:00.660
> 
> 标签：python, http-headers, user-agent

我正在寻找python中的用户代理解析器，如果通过如下的用户代理，它将提供操作系统、浏览器类型，但大多数导入设备类型，例如台式机/笔记本电脑与平板电脑或移动设备，如果可能的话是什么类型..如安卓、iPhone、诺基亚等。

在我开始自己构建之前，是否有这样的解析器或 python 库？

```
user_agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:16.0) Gecko/20100101 Firefox/16.0,gzip(gfe)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:04:25.683

[Parsing HTTP User-Agent string](https://stackoverflow.com/questions/927552/parsing-http-user-agent-string)的最佳答案有一个 python 解析器。如果它不完全符合您的要求，它应该很容易修改。

# angularjs - 按 AngularJS 中的多个特定模型属性过滤（在 OR 关系中）

> ID：13216115
> 
> 赞同：108
> 
> 时间：2012-11-04T04:36:53.247
> 
> 标签：angularjs

看看这里的例子： [http ://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

您可以使用任何电话属性进行`<input ng-model="search">`搜索，也可以使用 仅通过姓名进行搜索，`<input ng-model="search.name">`结果将按姓名适当过滤（如预期的那样，键入电话号码不会返回任何结果）。

假设我有一个具有“name”属性、“phone”属性和“secret”属性的模型，我将如何通过“name”和“phone”属性而**不是**“secret”属性**进行**过滤? 因此，从本质上讲，用户可以输入姓名或电话号码，并且会正确过滤，但即使用户输入的值等于“秘密”值的一部分，它也不会返回任何内容。**`ng-repeat`**

 **谢谢。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-11-04T05:20:36.770

这是[plunker](http://plnkr.co/edit/scuPYt?p=preview)

[具有更简洁代码的新 plunker，其中查询和搜索列表项均不区分大小写](http://plnkr.co/edit/1aFTAWDJUjtGrVUOZ9UY?p=preview)

主要思想是创建一个过滤函数来实现这个目的。

来自[官方文档](http://docs.angularjs.org/api/ng.filter:filter)

> 函数：谓词函数可用于编写任意过滤器。为数组的每个元素调用该函数。最终结果是谓词返回 true 的那些元素的数组。

```
<input ng-model="query">

<tr ng-repeat="smartphone in smartphones | filter: search "> 
```

```
$scope.search = function(item) {
    if (!$scope.query || (item.brand.toLowerCase().indexOf($scope.query) != -1) || (item.model.toLowerCase().indexOf($scope.query.toLowerCase()) != -1) ){
        return true;
    }
    return false;
}; 
```

**更新**

有些人可能会担心现实世界中的表现，这是正确的。

在现实世界中，我们可能会从控制器中进行这种过滤。

这是详细[的帖子](https://toddmotto.com/use-controller-filters-to-prevent-digest-performance-issues/)，展示了如何做到这一点。

简而言之，我们添加`ng-change`输入以监控新的搜索变化

然后触发过滤功能。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-06-19T14:07:33.303

您可以将 Object 作为参数传递给过滤器表达式，如[API 参考](http://docs.angularjs.org/api/ng.filter%3afilter)中所述。该对象可以选择性地应用您感兴趣的属性，如下所示：

```
<input ng-model="search.name">
<input ng-model="search.phone">
<input ng-model="search.secret">
<tr ng-repeat="user in users | filter:{name: search.name, phone: search.phone}"> 
```

这是一个[Plunker](http://plnkr.co/edit/kozaU39E74yqjZCpgDqM)

注意...这个例子在 AngularJS 1.1.5 中效果很好，但在 1.0.7 中并不总是那么好。在此示例中，1.0.7 将初始化所有过滤掉的内容，然后在您开始使用输入时工作。它的行为就像输入中包含不匹配的值，即使它们开始为空白。如果您想继续使用稳定版本，请继续尝试针对您的情况进行此操作，但在某些情况下可能需要使用 @maxisam 的解决方案，直到 1.2.0 发布。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-28T18:25:29.710

我从@maxisam 的回答中启发了自己，并创建了自己的排序功能，尽管我会分享它（因为我很无聊）。

**情况** 我想通过一系列汽车进行过滤。要过滤的选定属性是名称、年份、价格和公里。房产价格和公里数是数字（因此使用`.toString`）。我还想控制大写字母（因此`.toLowerCase`）。此外，我希望能够将过滤器查询拆分为不同的单词（例如，给定过滤器 2006 Acura，它会找到与年份匹配的 2006 和带有名称的 Acura）。

**我传递给过滤器的函数**

```
 var attrs = [car.name.toLowerCase(), car.year, car.price.toString(), car.km.toString()],
            filters = $scope.tableOpts.filter.toLowerCase().split(' '),
            isStringInArray = function (string, array){
                for (var j=0;j<array.length;j++){
                    if (array[j].indexOf(string)!==-1){return true;}
                }
                return false;
            };

        for (var i=0;i<filters.length;i++){
            if (!isStringInArray(filters[i], attrs)){return false;}
        }
        return true;
    }; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-24T00:07:57.943

如果您愿意使用第三方库，那么带有一系列过滤器的“Angular Filters”可能会很有用：

[https://github.com/a8m/angular-filter#filterby](https://github.com/a8m/angular-filter#filterby)

```
collection | filterBy: [prop, nested.prop, etc..]: search 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-16T18:33:06.340

希望这个答案会有所帮助，[多值过滤器](https://stackoverflow.com/questions/15868248/how-to-filter-multiple-values-or-operation-in-angularjs/21169596#21169596)

[这个小提琴](http://jsfiddle.net/nirmalkumar_86/9F89Q/4/)中的工作示例

```
arrayOfObjectswithKeys | filterMultiple:{key1:['value1','value2','value3',...etc],key2:'value4',key3:[value5,value6,...etc]} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-20T12:05:50.817

这里有很多很好的解决方案，但我建议走另一条路。如果搜索是最重要的事情并且视图上根本没有使用“秘密”属性；我的方法是使用具有所有优点的内置角度过滤器，并将模型简单地映射到新的对象数组。

问题示例：

```
$scope.people = members.map(function(member) { 
                              return { 
                                name: member.name, 
                                phone: member.phone
                              }}); 
```

现在，在 html 中只需使用常规过滤器来搜索这两个属性。

```
<div ng-repeat="member in people | filter: searchString"> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-03T07:13:00.117

在angularJs中使用filterBy非常简单的方法

对于工作 plnkr，请点击此链接

[http://plnkr.co/edit/US6xE4h0gD5CEYV0aMDf?p=preview](http://plnkr.co/edit/US6xE4h0gD5CEYV0aMDf?p=preview)

这专门使用单个属性来搜索多个列但不是全部。

```
<!DOCTYPE html>
<html ng-app="myApp">

  <head>
    <script data-require="angular.js@1.4.1" data-semver="1.4.1" src="https://code.angularjs.org/1.4.1/angular.js"></script>
    <script data-require="angular-filter@0.5.2" data-semver="0.5.2" src="https://cdnjs.cloudflare.com/ajax/libs/angular-filter/0.5.2/angular-filter.js"></script>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js"></script>
  </head>

  <body ng-controller="myCtrl as vm">
  <input type="text" placeholder="enter your search text" ng-model="vm.searchText" />
   <table>
     <tr ng-repeat="row in vm.tableData | filterBy: ['col1','col2']: vm.searchText">
       <td>{{row.col1}}</td>
       <td>{{row.col2}}</td>
       <td>{{row.col3}}</td>
     </tr>
   </table>
   <p>This will show filter from <b>two columns</b> only(col1 and col2) . Not from all. Whatever columns you add into filter array they
   will be searched. all columns will be used by default if you use <b>filter: vm.searchText</b></p>
  </body>
</html> 
```

控制器

```
// Code goes here
(function(){

  var myApp = angular.module('myApp',['angular.filter']);

  myApp.controller('myCtrl', function($scope){
    var vm= this;
    vm.x = 20;

    vm.tableData = [
      {
        col1: 'Ashok',
        col2: 'Tewatia',
        col3: '12'
      },{
        col1: 'Babita',
        col2: 'Malik',
        col3: '34'
      },{
        col1: 'Dinesh',
        col2: 'Tewatia',
        col3: '56'
      },{
        col1: 'Sabita',
        col2: 'Malik',
        col3: '78'
      }
      ];
  })

})(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-28T13:17:55.613

我简单地解决了这个问题：

```
<div ng-repeat="Object in List | filter: (FilterObj.FilterProperty1 ? {'ObjectProperty1': FilterObj.FilterProperty1} : '') | filter:(FilterObj.FilterProperty2 ? {'ObjectProperty2': FilterObj.FilterProperty2} : '')"> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-17T08:43:27.550

[http://plnkr.co/edit/A2IG03FLYnEYMpZ5RxEm?p=preview](http://plnkr.co/edit/A2IG03FLYnEYMpZ5RxEm?p=preview)

这是一个区分大小写的搜索，它还将您的搜索分成要在每个模型中搜索的单词。只有当它找到一个空格时，它才会尝试将查询拆分为一个数组，然后搜索每个单词。

如果每个单词至少在其中一个模型中，则返回 true。

```
$scope.songSearch = function (row) {
    var query = angular.lowercase($scope.query);
    if (query.indexOf(" ") > 0) {
        query_array = query.split(" ");
        search_result = false;
        for (x in query_array) {
            query = query_array[x];
            if (angular.lowercase(row.model1).indexOf(query || '') !== -1 || angular.lowercase(row.model2).indexOf(query || '') !== -1 || angular.lowercase(row.model3).indexOf(query || '') !== -1){
                search_result = true;
            } else {
                search_result = false;
                break;
            }
        }
        return search_result;
    } else {
        return (angular.lowercase(row.model1).indexOf(query || '') !== -1 || angular.lowercase(row.model2).indexOf(query || '') !== -1 || angular.lowercase(row.model3).indexOf(query || '') !== -1);
    }
}; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-14T06:14:21.963

过滤器可以是带有字段的 JavaScript 对象，您可以将表达式设置为：

```
ng-repeat= 'item in list | filter :{property:value}' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-10T19:54:36.253

我喜欢尽可能保持简单。我需要按国际分组，过滤所有列，显示每个组的计数并在不存在项目时隐藏组。

另外，我不想仅仅为这样简单的事情添加自定义过滤器。

```
 <tbody>
            <tr ng-show="fusa.length > 0"><td colspan="8"><h3>USA ({{fusa.length}})</h3></td></tr>
            <tr ng-repeat="t in fusa = (usa = (vm.assignmentLookups | filter: {isInternational: false}) | filter: vm.searchResultText)">
                <td>{{$index + 1}}</td>
                <td ng-bind-html="vm.highlight(t.title, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.genericName, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.mechanismsOfAction, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.diseaseStateIndication, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.assignedTo, vm.searchResultText)"></td>
                <td ng-bind-html="t.lastPublished | date:'medium'"></td>
            </tr>
        </tbody>
        <tbody>
            <tr ng-show="fint.length > 0"><td colspan="8"><h3>International ({{fint.length}})</h3></td></tr>
            <tr ng-repeat="t in fint = (int = (vm.assignmentLookups | filter: {isInternational: true}) | filter: vm.searchResultText)">
                <td>{{$index + 1}}</td>
                <td ng-bind-html="vm.highlight(t.title, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.genericName, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.mechanismsOfAction, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.diseaseStateIndication, vm.searchResultText)"></td>
                <td ng-bind-html="vm.highlight(t.assignedTo, vm.searchResultText)"></td>
                <td ng-bind-html="t.lastPublished | date:'medium'"></td>
            </tr>
        </tbody> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-16T10:18:41.017

我可能会很晚，但这就是我最终要做的。我做了一个非常通用的过滤器。

```
angular.module('app.filters').filter('fieldFilter', function() {
        return function(input, clause, fields) {
            var out = [];
            if (clause && clause.query && clause.query.length > 0) {
                clause.query = String(clause.query).toLowerCase();
                angular.forEach(input, function(cp) {
                    for (var i = 0; i < fields.length; i++) {
                        var haystack = String(cp[fields[i]]).toLowerCase();
                        if (haystack.indexOf(clause.query) > -1) {
                            out.push(cp);
                            break;
                        }
                    }
                })
            } else {
                angular.forEach(input, function(cp) {
                    out.push(cp);
                })
            }
            return out;
        }

    }) 
```

然后像这样使用它

```
<tr ng-repeat-start="dvs in devices |  fieldFilter:search:['name','device_id']"></tr> 
```

你的搜索框就像

```
<input ng-model="search.query" class="form-control material-text-input" type="text"> 
```

其中 name 和 device_id 是 dvs 中的属性

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-11-25T22:01:00.000

对于那些想要快速过滤对象的人来说，这是一个简单的解决方案：

```
<select>
  <option ng-repeat="card in deck.Cards | filter: {Type: 'Face'}">{{card.Name}}</option>
</select> 
```

数组过滤器可让您模仿您尝试过滤的对象。在上述情况下，以下类可以正常工作：

```
var card = function(name, type) {
  var _name = name;
  var _type = type;

  return {
    Name: _name,
    Type: _type
  };
}; 
```

甲板可能看起来像：

```
var deck = function() {
  var _cards = [new card('Jack', 'Face'),
                new card('7', 'Numeral')];

  return {
    Cards: _cards
  };
}; 
```

如果要过滤对象的多个属性，只需用逗号分隔字段名称：

```
<select>
  <option ng-repeat="card in deck.Cards | filter: {Type: 'Face', Name: 'Jack'}">{{card.Name}}</option>
</select> 
```

编辑：这是一个工作 plnkr，它提供了单个和多个属性过滤器的示例：

[http://embed.plnkr.co/i0wCx6l1WPYljk57SXzV/](http://embed.plnkr.co/i0wCx6l1WPYljk57SXzV/)**

# asp.net - 如何使用 asp.net 为存储在云上的文件构建文件管理器？

> ID：13216120
> 
> 赞同：0
> 
> 时间：2012-11-04T04:39:00.783
> 
> 标签：asp.net, web-applications, cloud, file-manager

如果我在我的服务器上给用户一个空间来保存他们的文件。

是否有 API 或更好的 Demo 来为用户添加管理文件、移动、重命名、添加和删除的功能。并使用本地软件打开文件，以在文件关闭后保存文件。像word文档一样，当他点击它时，它会用MS Word打开，当他关闭并保存时，上传本地临时文件，无需用户干预。

如果不是 asp.net 任何其他技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:12:48.300

我认为您正在寻找**[Microsoft SharePoint](http://en.wikipedia.org/wiki/Microsoft_SharePoint)**站点。

SharePoint 可用于提供**Intranet 门户、文档和文件管理、协作、社交网络、外联网、网站、企业搜索和商业智能**。它还具有围绕系统集成、流程集成和工作流自动化的功能。

# android - Android 的一个项目中是否可以有两个以上的包？

> ID：13216122
> 
> 赞同：1
> 
> 时间：2012-11-04T04:39:51.450
> 
> 标签：android, packages, forceclose

一个项目android中是否可以有两个以上的包？

我已经在队列清单中声明，但第三个包突然强制关闭..我真的不知道原因..但这是我的队列清单代码：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ike.doctors"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" 
          android:targetSdkVersion="8"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
   <activity android:name=".MainMenuActivity"
              android:screenOrientation="portrait"
              android:theme="@android:style/Theme.NoTitleBar"></activity>

    <activity android:name=".MenuRegisActivity"
              android:screenOrientation="portrait"
              android:theme="@android:style/Theme.NoTitleBar"></activity>

    <activity android:name="com.ike.hospitalize.MenuHospitalizeActivity"
              android:screenOrientation="portrait"
              android:theme="@android:style/Theme.NoTitleBar"></activity>

    <activity android:name="com.ike.hospitalize.MenuRoomCategoriesActivity"
              android:screenOrientation="portrait"
              android:theme="@android:style/Theme.NoTitleBar"></activity>

    <activity android:name="com.ike.emergency.MenuRegisAActivity"
              android:screenOrientation="portrait"
              android:theme="@android:style/Theme.NoTitleBar"></activity>

    <activity android:name="com.ike.emergency.MenuEmergencyActivity"
              android:screenOrientation="portrait"
              android:theme="@android:style/Theme.NoTitleBar"></activity>
    </application>

    </manifest> 
```

com.emergency.MenuEmergencyActivity 是强制关闭..

这是日志猫：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ike.doctors/com.ike.emergency.MenuEmergencyActivity}: java.lang.NullPointerException
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.ike.emergency.MenuEmergencyActivity.onCreate(MenuEmergencyActivity.java:41)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

有人可以解决我的问题吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:32:59.047

1.  清单中不可能有两个或更多包。Android 操作系统使用清单中的`package`属性来唯一标识您的应用程序。

2.  可以有两个以上的活动。每个活动都为您的应用程序定义了一个 UI 入口点，您可以拥有任意数量的这些入口点。

3.  您的特定问题不是由您有两个以上的活动引起的。只是您的一项活动在其代码中的某处存在错误。具体来说，`MenuEmergencyActivity`由于第 41 行的错误导致崩溃，如 logcat 输出所示：

`at com.ike.emergency.MenuEmergencyActivity.onCreate(MenuEmergencyActivity.java:41`

我会做出一个疯狂的猜测，并说您`onCreate`正在使用`findViewById`获取特定的 UI 元素，该元素在布局中不存在，并且您尝试使用该元素而不检查是否找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:02:43.717

我认为这是不可能的。

当您在清单上标记活动时，请遵循此

```
<activity android:name="(your_Package_name).Activity_name" 
          android:screenOrientation="portrait"
          android:theme="@android:style/Theme.NoTitleBar">
</activty> 
```

适用于所有活动，包括 Android Manifest 文件中的主要活动。有时它可能会对您有所帮助。我不知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T05:03:52.673

只需将包更改为`com.ike`并调整相关`android:name`活动的 s 即可。

否则你正在做的事情没有意义，如果其他活动是单独应用程序的一部分，它们不应该在此`AndroidManifest.xml`通过意图调用。

# c++ - 你如何在 ubuntu 上编译 taglib？

> ID：13216124
> 
> 赞同：4
> 
> 时间：2012-11-04T04:40:15.323
> 
> 标签：c++, taglib

我正在尝试从 ubuntu 12.04 [http://taglib.github.com/上的 taglib 1.8 编译一个示例](http://taglib.github.com/)

我将一个示例复制到目录中`fileref.h`并尝试使用 g++ 编译它

```
cp taglib-1.8/examples/tagreader.cpp taglib-1.8/taglib
cd taglib-1.8/taglib/
g++ -o testreader.exe tagreader.cpp 
tagreader.cpp:28:21: fatal error: fileref.h: No such file or directory
compilation terminated. 
```

如何在 ubuntu 上编译 taglib？

**编辑**

嗨 Lukas - 感谢您的回复。我想制作一个简单的 cli 程序来将 id3 标签写入 mp3 文件（请参阅[https://stackoverflow.com/questions/13216094/how-to-write-a-taglib-program-to-write-the-id3v1-title -and-artist-and-the-id3v2](https://stackoverflow.com/questions/13216094/how-to-write-a-taglib-program-to-write-the-id3v1-title-and-artist-and-the-id3v2)）。

到目前为止，我刚刚解压了 taglib 1.8。

**(1)**如何在 ubuntu 12.04 上构建 taglib？当我尝试您的第二个命令时，出现以下错误

```
Package taglib was not found in the pkg-config search path.
Perhaps you should add the directory containing `taglib.pc'
to the PKG_CONFIG_PATH environment variable
No package 'taglib' found
tagreader.cpp:28:21: fatal error: fileref.h: No such file or directory
compilation terminated. 
```

但是，该文件`taglib.pc`甚至不存在。该文件`taglib-1.8/taglib.pc.cmake`确实存在。

**(2)**你知道我如何从中获取 `taglib.pc 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T09:33:39.163

您想只安装示例，还是使用 TagLib 安装您自己的程序？

您可以构建示例作为构建 TagLib 的一部分：

```
cmake -DBUILD_EXAMPLES=ON .
make 
```

如果您想构建自己的程序并且已经安装了 TagLib，请使用`pkg-config`获取必要的命令行选项，例如：

```
gcc -o test test.cpp $(pkg-config --libs --cflags taglib) 
```

为此，您需要安装 TagLib。您可以从源代码构建它，但如果您不一定需要 TagLib 1.8，只需从 Ubuntu 存储库安装它：

```
sudo apt-get install libtag1-dev 
```

然后，您将`pkg-config`在标准位置获得 TagLib 库、头文件和文件，您可以轻松构建自己的应用程序。

此外，您不需要编写简单地写入艺术家姓名和标题的应用程序。tagwriter 示例就是这样做的。或者，如果您需要更复杂的东西，您可以使用这个[https://github.com/lalinsky/tagger 。](https://github.com/lalinsky/tagger)如果没有别的，它可能会作为一个例子。

# math - 用逆波兰表示法（后缀表示法）解释数学表达式

> ID：13216134
> 
> 赞同：0
> 
> 时间：2012-11-04T04:44:36.147
> 
> 标签：math, interpreter, postfix-notation

我找到了一种将中缀表示法的数学表达式转换为后缀表示法的方法。( [http://en.wikipedia.org/wiki/Shunting-yard_algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm) ) 但是，我应该如何编码来解释结果表达式？

这是我的想法：

对于仅操作数表达式：

1.  寻找一组遵循操作数-操作数-操作符格式的对象。
2.  将运算符的计算规则应用于两个操作数。
3.  将一组对象交换为一个操作数，这是计算的结果。

对于具有函数的表达式（正弦、绝对值、符号...）

1.  寻找一组遵循操作数-操作数-...-操作符格式的对象。
    *   操作数的数量取决于需要传递给函数的参数数量。例如：
        *   正弦 - 一个参数（锐角）
        *   幂 - 二参数（数字*m的**n*次方）
        **   3x3 矩阵 - 九个参数*

**   做我上面提到的任何其他事情。*

 *我现在的情况是我没有任何环境可以将我的想法实现为一段代码，因此我只能抽象地说。

这个想法是否可行？如果可以改进，请注意。也欢迎参考。

如果你在展示一段代码，请将代码改成大家都能理解的文字。例如：

改变：

```
for (var i:int = 0; i < rpn.length; i++) {
    if ("1234567890.".indexOf(rpn[i]) != -1) {
        // do something...
    }
} 
```

进入：

```
for every element in the postfix result,
    if the element is a number,
        do something...
    end if
end for 
```

**end ...**不过是可选的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:48:19.687

通常这是最简单的部分......你只需从左到右遍历你的后缀表达式。每次遇到一个数字时，都将其压入堆栈。每次遇到运算符时，都会从堆栈中弹出相关数量的操作数，计算结果并将其压入堆栈。*

# ios - 在没有 CoreText 的情况下将 UITextView 中的文本包装在 UIImage 周围

> ID：13216135
> 
> 赞同：37
> 
> 时间：2012-11-04T04:45:04.307
> 
> 标签：ios, uiimageview, uitextview, word-wrap, nsattributedstring

`UITextView`有没有办法在`UIImage`不使用a 的情况下将文本从 a 换行`CoreText`？

我一直在玩属性字符串，但运气不佳，而且`CoreText`看起来非常复杂，所以我宁愿置身事外。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-11-17T17:22:14.177

这似乎可以解决问题：

```
UIBezierPath * imgRect = [UIBezierPath bezierPathWithRect:CGRectMake(0, 0, 100, 100)];
self.textView.textContainer.exclusionPaths = @[imgRect]; 
```

仅适用于 iOS 7 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-27T17:48:50.600

在 Swift 4 中：

```
self.textView.textContainer.exclusionPaths = [UIBezierPath(rect: imageView.frame)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:45:26.857

简短的回答是你不能没有 iOS 7 之前的 CoreText。

前段时间我自己一直在努力解决这个问题，[这篇文章](https://robnapier.net/wrapping-text-around-shape-with-coretext)对我很有帮助。

虽然它是 CoreText。

# angularjs - 嵌入 到模板中

> ID：13216136
> 
> 赞同：0
> 
> 时间：2012-11-04T04:45:19.187
> 
> 标签：angularjs

我正在使用路线和`ng-view`页面正文：

```
<!doctype html>
<html ng-app="app">
  <head>
  ...
  </head>
  <body>
    <div ng-view></div>
  </body>
</html> 
```

我的模板中有`<link>`元素：

```
<link rel="stylesheet" type="text/css" href="style.css"> 
```

问题是 IE8 不能识别`<link>`正文中的元素。以及`<style>`也许还有其他人。它似乎忽略了它们。他们必须在`<head>`. 所以我的模板必须拆分，一部分需要转到 ，另一部分`<head>`转到`<body>`.

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:37:38.750

你可以让你的模板使用 Angular 服务注册它们的链接，然后在你的 head 标签中添加一个控制器来填充链接列表。

这是一个例子： http: [//plnkr.co/edit/1a6U9f](http://plnkr.co/edit/1a6U9f)

```
app.factory('LinkService', function() {
  var links = {};
  return {
    links: links,
    addLink: function(href, relation) {
      links[href] = { href: href, relation: relation };
    },
    removeLink: function(href) {
      delete links[href];
    }
  };
});

app.controller('LinkController', function($scope, LinkService) {
  $scope.links = LinkService.links;
});

app.controller('Template1Controller', function($scope, LinkService) {
  LinkService.addLink('template1.css','stylesheet');
  $scope.$on('$destroy', function() {
    LinkService.removeLink('template1.css');
  });
}); 
```

然后在您的 html 中（用于演示目的的内联部分）：

```
<head ng-controller="LinkController">
  ...
  <link rel="{{link.relation}}" ng-href="{{link.href}}" ng-repeat="link in links">
</head>
<body ng-controller="MainCtrl">
  <!-- You could use ng-view here -->
  <ng-include src="someTemplateField"></ng-include>

  <script type="text/ng-template" id="template1">
    <div class="red" ng-controller="Template1Controller">Template 1</div>
  </script>

</body> 
```

# java - 绘制的 JPanel 不会出现在 JFrame 中

> ID：13216139
> 
> 赞同：3
> 
> 时间：2012-11-04T04:45:42.760
> 
> 标签：java, swing, jframe, jpanel, paintcomponent

当我运行我的代码时，我希望`JPanel`在我的 中看到 a `JFrame`，但什么也没有出现。我在框架中有一个按钮，它会显示出来。但是`JPanel`没有出现，我什至把它涂成红色。这是我的代码`JPanel`：

```
import java.awt.*;
import javax.swing.JPanel;
public class graphic extends JPanel {
    private static final long serialVersionUID = -3458717449092499931L;
    public Game game;
    public graphic(Game game){
    this.game = game;
    this.setPreferredSize(new Dimension(400,400));
    this.setBackground(Color.RED);
}
public void paintComponent(Graphics g){
    for (Line l:game.mirrors){
        g.setColor(Color.BLACK);
        g.drawLine(l.start.x, l.start.y, l.end.x, l.end.y);
    }
}
} 
```

还有我的 JFrame 代码：

```
import java.awt.Container;
import java.awt.event.*;
import java.util.Timer;
import java.util.TimerTask;

import javax.swing.*;
public class Viewer implements ActionListener {
public JFrame frame;
public JButton drawShoot;
public boolean draw;
public Game game;
public graphic graphic;
public TimerTask timert;
public Timer timer;
public Viewer(){
    draw = true;
    game = new Game();
}
public static void main(String args[]){
    Viewer v = new Viewer();
    v.setup();
}
public void setup(){
    frame = new JFrame("Laser Stimulator");
    drawShoot = new JButton("Edit Mode");
    graphic = new graphic(game);
    graphic.repaint();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(300, 300, 600, 600);
    Container contentPane = frame.getContentPane();
    SpringLayout layout = new SpringLayout();
    contentPane.setLayout(layout);
    drawShoot.addActionListener(this);
    timert = new TimerTask() {
        @Override
        public void run() {

        }
    };
    timer =new Timer();
    timer.scheduleAtFixedRate(timert, 0, 1000/30);
    contentPane.add(graphic);
    layout.putConstraint(SpringLayout.NORTH, graphic, 0, SpringLayout.NORTH, contentPane);
    layout.putConstraint(SpringLayout.WEST, graphic, 0, SpringLayout.WEST, contentPane);
    frame.setVisible(true);
}
@Override
public void actionPerformed(ActionEvent e) {
    if (e.getSource()==drawShoot){
        draw = !draw;
        drawShoot.setText((draw)?"Edit Mode":"Shoot Mode");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T04:58:09.697

所以基本问题是你没有尊重油漆链。您必须`super.paintXxx`在覆盖绘制方法时调用...

这个方法必须调用`super.paintComponent(g)`，因为它负责清除背景；）

```
public void paintComponent(Graphics g) {
    for (Line l : game.mirrors) {
        g.setColor(Color.BLACK);
        g.drawLine(l.start.x, l.start.y, l.end.x, l.end.y);
    }
} 
```

![在此处输入图像描述](../Images/51b0fdae30d37b274deee870b43bf321.png)

```
public class QuickTestPaintPane {

    public static void main(String[] args) {
        new QuickTestPaintPane();
    }

    public QuickTestPaintPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                Viewer v = new Viewer();
                v.setup();

            }
        });
    }

    public class Viewer implements ActionListener {

        public JFrame frame;
        public JButton drawShoot;
        public boolean draw;
//        public Game game;
        public graphic graphic;
        public TimerTask timert;
        public Timer timer;

        public Viewer() {
            draw = true;
//            game = new Game();
        }

        public void setup() {
            frame = new JFrame("Laser Stimulator");
            drawShoot = new JButton("Edit Mode");
            graphic = new graphic();
//            graphic.repaint();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setBounds(300, 300, 600, 600);
//            Container contentPane = frame.getContentPane();
            SpringLayout layout = new SpringLayout();
            frame.setLayout(layout);
            drawShoot.addActionListener(this);
            timert = new TimerTask() {
                @Override
                public void run() {
                }
            };
            timer = new Timer();
            timer.scheduleAtFixedRate(timert, 0, 1000 / 30);
            frame.add(graphic);
            layout.putConstraint(SpringLayout.NORTH, graphic, 0, SpringLayout.NORTH, frame.getContentPane());
            layout.putConstraint(SpringLayout.WEST, graphic, 0, SpringLayout.WEST, frame.getContentPane());
            frame.setVisible(true);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == drawShoot) {
                draw = !draw;
                drawShoot.setText((draw) ? "Edit Mode" : "Shoot Mode");
            }
        }
    }

    public class graphic extends JPanel {

        private static final long serialVersionUID = -3458717449092499931L;
//        public Game game;

//        public graphic(Game game) {
        public graphic() {
//            this.game = game;
            this.setPreferredSize(new Dimension(400, 400));
            this.setBackground(Color.RED);
        }

        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g;
            g2d.setColor(Color.BLACK);
            g2d.drawLine(0, 0, getWidth(), getHeight());
//            for (Line l : game.mirrors) {
//                g.setColor(Color.BLACK);
//                g.drawLine(l.start.x, l.start.y, l.end.x, l.end.y);
//            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T07:27:17.663

@MadProgrammer 已经回答了这个问题（给他+1）。在大多数被覆盖的方法中，都会调用它们的*super*不要忘记尊重这一点，否则这些小问题就会开始浮出水面。

另一个注意事项：

*   不要打电话`setBounds(..)`（`JFrame`我看不出你为什么需要它）而是`JFrame#pack()`在设置`JFrame`可见之前打电话。

*   从 Java 6开始不需要这样做`frame.getContentPane()`。只需使用: `frame.add()`或`frame.setLayout(..)`.

    > 作为一种便利`add`及其变体，`remove`并`setLayout`已被覆盖以根据需要转发到*contentPane*。

*   你也有这个：

    ```
    graphic = new graphic(game);
    graphic.repaint(); 
    ```

    我不明白为什么在组件第一次可见时调用`repaint()`将是必要的`repaint()`

*   而不是覆盖`getPreferredSize`而`JPanel`不是调用`setPreferredSize()`

*   `ActionListener`除非将通过其他类访问，否则不要在类中实现 an 。而是像这样使用匿名`Listener`：

    ```
    refresh.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (e.getSource() == drawShoot) {
                    draw = !draw;
                    drawShoot.setText((draw) ? "Edit Mode" : "Shoot Mode");
                }
            }

    }); 
    ```

# javascript - Javascript 多个图像通过单击按钮更改

> ID：13216141
> 
> 赞同：1
> 
> 时间：2012-11-04T04:46:30.387
> 
> 标签：javascript, image, button

好的，这就是我想要做的，之前太模糊了，所以这里有一个更好的解释，请记住，我现在只对页面进行了 2 周的编程，因此感谢您的帮助。

我需要创建一个 HTML/JavaScript 网页，该网页显示三个图像以及每个图像的标题（描述）。对于每个图像，我还需要创建一个按钮，将第一张图像更改为同一主题上的不同图像（并更改标题）。还需要一个按钮，将所有三个图像恢复为原始图像。

我让编码工作，这样一个图像会在按钮单击时变为另一个图像，但是当我添加我的第二个和第三个编码时，没有任何东西可以工作了。

```
<html> 
<head> 
<script> 

function changeImage()
{
var img = document.getElementById("image");
img.src="http://cdn.memegenerator.net/images/300x/159304.jpg";
return false;
}

</script>

</head>
<body>
<img id="image" src="http://thechive.files.wordpress.com/2011/10/william-defoe.jpg" />
<br><br><br>
<button id="clickme" onclick="changeImage();">Click to change image!</button>

<script> 

function changeImage()
{
var img = document.getElementById("image1");
img.src="http://playerperspective.com/wp-content/uploads/2011/05/mike-tyson-3.jpg";
return false;
}

</script>

<body>
<img id="image1" src="http://static.guim.co.uk/sys-    images/Sport/Pix/pictures/2008/10/31/1225454147507/Mike-Tyson-001.jpg" />
<button id="Click1" onclick="changeImage();">Click to change!</button>
</body>

<br>

<script> 

function changeImage()
{
var img = document.getElementById("image2");
img.src="http://static.guim.co.uk/sys-images/Technology/Pix/pictures/2012/3/5/1330958259135/Halo-4-007.jpg";
return false;
}

</script>

<body>
<img id="image2" src="http://cdn.slashgear.com/wp-content/uploads/2012/04/halo-master- chief-1.jpg" />
<button id="Click2" onclick="changeImage();">Click to change!</button>
</body>

<br>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:22:32.840

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script>
        var dd = 5;
        var cnt = 0;
        function chng() {

            var rotator = document.getElementById('rr');  // change to match image ID
            var imageDir = 'Images/';                          // change to match images folder

            var images = ['2.jpg', '3.jpg', '4.jpg', '5.jpg'];

            cnt++;

            var len = images.length;
            if (cnt < dd) {
                rr.src = imageDir + images[cnt];
            }
            else if (cnt == len) {
                rr.src = imageDir + images[0];
                cnt = 0;
            }
        }

</script>

</head>
<body>
<img src="Images/1.jpg" id="rr" height="500" width="650">

    <input type="button" value=" next. . " onclick="chng()" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:14:11.437

您的页面中有几个问题：缺少文档类型声明、缺少`title`标签、HTML 中的实际内容`head`和多个`body`标签。除了这些，`changeImage()`在每一处都换上`script`了新的。最后只有最后一个函数，它改变了`src`for `#image2`。

如果我正确理解了你的问题，你需要这样的东西：

`script`中的`head`：

```
function changeImage (element) {
    var n,
        imageData = [
            [
                {
                    src: "http://thechive.files.wordpress.com/2011/10/william-defoe.jpg",
                    caption: "Caption for image 1.1"
                },
                {
                    src: "http://cdn.memegenerator.net/images/300x/159304.jpg",
                    caption: "Caption for image 1.2"
                }
            ],
            [
                {
                    src: "http://static.guim.co.uk/sys-images/Sport/Pix/pictures/2008/10/31/1225454147507/Mike-Tyson-001.jpg",
                    caption: "Caption for image 2.1"
                },
                {
                    src: "http://playerperspective.com/wp-content/uploads/2011/05/mike-tyson-3.jpg",
                    caption: "Caption for image 2.2"
                }
            ],
            [
                {
                    src: "http://cdn.slashgear.com/wp-content/uploads/2012/04/halo-master-chief-1.jpg",
                    caption: "Caption for image 3.1"
                },
                {
                    src: "http://static.guim.co.uk/sys-images/Technology/Pix/pictures/2012/3/5/1330958259135/Halo-4-007.jpg",
                    caption: "Caption for image 3.2"
                }
            ]
        ];
    if (element > -1) {
        document.getElementById('image' + element).src = imageData[element][1].src;
        document.getElementById('caption' + element).innerHTML = imageData[element][1].caption;
    } else {
        for (n = 0; n < imageData.length; n++) {
            document.getElementById('image' + n).src = imageData[n][0].src;
            document.getElementById('caption' + n).innerHTML = imageData[n][0].caption;
        }
    }
    return;
} 
```

和`body`：

```
<body>
    <button onclick="changeImage(-1);" >Click to restore all!</button>
    <div>
        <h1 id="caption0">Caption for image 1.1</h1>
        <button onclick="changeImage(0);">Click to change!</button>
        <img id="image0" src="http://thechive.files.wordpress.com/2011/10/william-defoe.jpg" />
    <div>
        <h1 id="caption1">Caption for image 2.1</h1>
        <button onclick="changeImage(1);">Click to change!</button>
        <img id="image1" src="http://static.guim.co.uk/sys-images/Sport/Pix/pictures/2008/10/31/1225454147507/Mike-Tyson-001.jpg" />
    </div>
    <div>
        <h1 id="caption2">Caption for image 3.1</h1>
        <button onclick="changeImage(2);">Click to change!</button>
        <img id="image2" src="http://cdn.slashgear.com/wp-content/uploads/2012/04/halo-master-chief-1.jpg" />
    </div>
</body> 
```

如您所见，路径和标题的数据位于嵌套数组的对象中。通过这种方式，它们与实际内容分离，并且代码更易于维护。

您没有提供图像标题布局的示例，因此我将标题信息放在`H1`图像上方的标签中。随意更改元素及其位置。请注意，您还可以在标题文本中使用 HTML 标记。

但是，执行此代码时存在一些限制和 CPU 时间浪费：`imageData`每次单击都会创建，并且每个元素只能使用两个不同的路径。

我建议您对任务采用更多面向对象的方法。请看一下这个[JSfiddle](http://jsfiddle.net/G6mkr/2/)，它演示了非常相似的功能，并且更灵活并且可能更易于维护。

# c - 使用 C 的 Malloc 实现

> ID：13216142
> 
> 赞同：3
> 
> 时间：2012-11-04T04:46:49.527
> 
> 标签：c, malloc

我正在尝试在 C 项目中手动实现 Malloc。这是我的代码：

```
void *Mem_Alloc(int size) {
    struct Node *p, *prevp = head;

    if (fitPolicy == P_BESTFIT) {

    }

    if (fitPolicy == P_FIRSTFIT) {
        for (p = prevp->next; ;prevp = p, p = p->next) {
            if (p->size >= size) {
                if (p->size == size)
                    prevp->next = p->next;
                else {
                    p->size -= size;
                    p += p->size;
                    // p->size = size;
                }
                head = prevp;
                return (void *)(p+1);
            }
            if (p == head) {
                return NULL;
            }
        }
    }

    if (fitPolicy == P_WORSTFIT) {

    }
    return NULL;
} 
```

基本上，我调用`mmap`了另一个名为`Mem_Init`;的方法。然后，返回的内存映射由变量 指向`head`。我总是在`Mem_Alloc`. 我不知道为什么。你们能帮我解决这个问题吗？一些提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:02:14.517

无法确定，但这很可能是因为您希望按字节`p += p->size`递增。实际上，这会将它的大小增加. 如果您尝试分配的大小小于可用内存大小的一半，即使只有 2 个字节，这也会将指针移到末尾。`p``p->size``p->size``*p``*p`

要解决此问题，您应该将指针转换为要添加的字符指针。

```
((char*)p) += p->size; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T05:10:33.667

ughoavgfhw 有正确的方向，但铸造左值是不合适的。

您可以使用：

```
void * tmp_p = (void *)p;
tmp_p += p->size;
p = (struct Node *)tmp_p; 
```

# objective-c - 在对象释放期间取消注册对象的观察者

> ID：13216144
> 
> 赞同：0
> 
> 时间：2012-11-04T04:47:12.770
> 
> 标签：objective-c, observer-pattern, addobserver

不确定我问的是否正确，但无论如何我都会尝试一下。

我有一个程序可以调用这段代码......

```
[localCalculateTimeFiles addObserver:self
       forKeyPath:@"arraystatuscounter"
          options:NSKeyValueObservingOptionNew
          context:NULL]; 
```

最终 localCalculateTimeFiles 消失了，我想 removeObserver 当前的代码位（粗略地说）。如果我什么都不做并且 localCalculateTimesFiles 消失而我没有执行正确的 removeObserver，则运行时会引发异常。我认为它过去更像是一个警告，但现在程序异常终止。

假设我在正确的时间将所有对象指针正确并指向正确的位置。我想做的是让 localCalculateTimeFiles 在释放观察者的途中（可以这么说）删除观察者。

似乎根据 Apple 文档，我可以向 localCalculateTimeFiles 添加一个看起来像这样的方法来完成这项工作......

```
- (void)finalize {
    if (log_file != NULL) {
        fclose(log_file);
        log_file = NULL;
    }
    [super finalize]; 
} 
```

我将用注销观察者的新逻辑替换处理 log_file 的逻辑。显然，我必须确保我的所有指针都是正确的，以确保 removeObserver 方法具有正确的操作项。让我正确地做到这一点，这是有道理的还是我完全离开了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T05:27:55.290

我不认为 finalize 是正确的地方。

注销观察的最佳位置是在您的`dealloc`方法中，该方法在对象被删除之前调用。

# java - Java Servlet RequestDispatcher 没有转发 url

> ID：13216145
> 
> 赞同：4
> 
> 时间：2012-11-04T04:47:21.950
> 
> 标签：java, servlets, requestdispatcher

我对 Java Servlet 中的 RequestDispatcher 有问题，如果 servlet 路径不在根路径中，它不会转发到特定的 url

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String userPath=request.getServletPath();
    String view = null;

    if(userPath.equals("/admin")) //it's okay, forwarded
    {
            view="admin";
    }
    else if(userPath.equals("/admin/tambahArtikel")) //it's not forwarded
    {
        view="tambahArtikel";
    }
    else if(userPath.equals("/kategori")) //it's okay, forwarded
    {
        view="kategori";
    }
    String url="WEB-INF/view/"+ view +".jsp";

   request.getRequestDispatcher(url).forward(request, response);
} 
```

这是我的 web.xml

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<servlet>
    <servlet-name>ServletController</servlet-name>
    <servlet-class>com.agung.webhakakses.servlet.ServletController</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ServletController</servlet-name>
    <url-pattern>/admin</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>ServletController</servlet-name>
    <url-pattern>/admin/tambahArtikel</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>ServletController</servlet-name>
    <url-pattern>/kategori</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config> 
```

我认为问题出在路径上，但我不确定

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T05:25:20.400

从 ServletRequest#getRequestDispatcher [javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRequestDispatcher%28java.lang.String%29)：

> 指定的路径名​​可以是相对的，尽管它不能扩展到当前 servlet 上下文之外。如果路径以“/”开头，则将其解释为相对于当前上下文根。如果 servlet 容器无法返回 RequestDispatcher，则此方法返回 null。

在您的代码中，您以这种方式构建 url：

```
String url="WEB-INF/view/"+ view +".jsp"; 
```

因此，正如 javadoc 还说的：

> 该方法与 ServletContext#getRequestDispatcher 的区别在于该方法可以走相对路径。

因此，如果您的请求 URI 是`"/admin/tambahArtikel"`并且您的转发 URI 不以 a 开头，`"/"`那么它将是相对的，因此转发被发送到`"/admin/" + "WEB-INF/view/"+ view +".jsp"`

如果您需要转发到`WEB-INF`目录中的资源，请以“/”开头您的 URI，因此路径将相对于上下文根。

# jquery - jquery - 使用 $this 定位选择

> ID：13216146
> 
> 赞同：1
> 
> 时间：2012-11-04T04:47:34.303
> 
> 标签：jquery, target

我试图让单个选择（与其他选择具有相同的类）来响应 .change 函数，但是它仅适用于其中一个选择。如果您测试此代码，它将更有意义。尝试添加一些“ON/OFF events”，然后在各种选择中选择“Specified Time”。你会看到只有第一个响应。有任何想法吗？

谢谢！

请看以下代码：

```
$(document).ready(function() {
   var neweventstring = '<div class="event">Turns <select name="ONOFF"><option value="On">ON</option><option value="Off">OFF</option></select> at: <select name="setto" class="setto"><option>Select Time</option><option value="Sunrise">Sunrise</option><option value="Sunset">Sunset</option><option value="specifiedtime">Specified Time</option></select></div>';

   $('#addmondaysevent').click(function () {
      $('#monday .events').append(neweventstring);
   });

   $('.setto').change(function() {  
      alert('The function is called');
      if($("option:selected", this).val() =="specifiedtime"){
          alert('If returns true');
          $(this).css("background-color", "#cc0000");
          $(this).after('<div class="specifictime"><input type="text" value="00" style="width:30px"/> : <input type="text" value="00"  style="width:30px"> <select name="ampm"><option value="AM" selected>AM</option><option value="PM">PM</option></select></div>')
          }
   });
}); 
```

还有我的 HTML：

```
<div id="monday">
    <h2>Mondays</h2>

     <div class="events">
     <div class="event">
            Turn 
            <select name="ONOFF">
            <option value="On">ON</option>
            <option value="Off">OFF</option>
            </select>
            at: 
            <select name="setto" class="setto">
            <option>Select Time</option>
            <option value="Sunrise">Sunrise</option>
            <option value="Sunset">Sunset</option>
            <option value="specifiedtime">Specified Time</option>
            </select>
       </div>
      [<a id="addmondaysevent">Add an ON/OFF event</a>] 
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T04:55:39.213

更改事件处理程序仅添加一次（在文档准备好时）。您应该使用 $.delegate 或 $.on 将事件附加到稍后添加到页面的元素。例如，以下内容应该可以工作：

```
$(document).ready(function() {
var neweventstring = '<div class="event">Turns <select name="ONOFF"><option value="On">ON</option><option value="Off">OFF</option></select> at: <select name="setto" class="setto"><option>Select Time</option><option value="Sunrise">Sunrise</option><option value="Sunset">Sunset</option><option value="specifiedtime">Specified Time</option></select></div>';

$('#addmondaysevent').click(function () {
    $('#monday .events').append(neweventstring);
});

$('#monday .events').on("change", ".setto", function() {  
    alert('The function is called');
    if($("option:selected", this).val() =="specifiedtime"){
        alert('If returns true');
        $(this).css("background-color", "#cc0000");
        $(this).after('<div class="specifictime"><input type="text" value="00" style="width:30px"/> : <input type="text" value="00"  style="width:30px"> <select name="ampm"><option value="AM" selected>AM</option><option value="PM">PM</option></select></div>')
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T04:57:51.727

就像 Yatrix 所说，您的第一个**选择**缺少**class="setto"**。考虑到这一点，您还必须像这样绑定更改事件。

```
$('#monday .event').on('change', '.setto', function() { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T05:07:31.817

尝试更改此“选项：选定”的顺序...

```
if($(this,"option:selected").val() == "specifiedtime") {

 ... do stuff ... 
```

**更新**@Yatrixs 建议解决了持久性错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T04:54:37.733

你只是将它应用于一个。只有一个选择`setto`应用了该类，这就是您正在绑定的操作。

```
$(document).on('theEvent','theSelector', function () {
    DoKungfu();
}); 
```

是你的朋友。这会将事件绑定到 DOM 中当前与选择器匹配的任何项目以及以后添加的任何与其匹配的项目。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-04T04:52:47.670

追加后再次尝试绑定事件：

```
$('#monday .events').append(neweventstring); 
```

# java - 什么会在 Java 中引发 IOException？

> ID：13216148
> 
> 赞同：48
> 
> 时间：2012-11-04T04:48:02.183
> 
> 标签：java, exception, io, ioexception

`java.io.IOException`似乎是最常见的异常类型，巧合的是，它似乎也是最模棱两可的。

我一直看到`throws IOException`使用套接字、文件等进行写入的时候。但是，我实际上从来没有向我开过火，所以我想知道是什么应该引发异常。该文档对于解释正在发生的事情不是很有帮助：

> 表示发生了某种 I/O 异常。此类是由失败或中断的 I/O 操作产生的一般异常类。

在哪些情况下会抛出 IOException，应该如何使用它？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-04T04:51:10.183

假设你是：

1.  读取网络文件并断开连接。
2.  读取不再可用的本地文件。
3.  使用一些流来读取数据和一些其他进程关闭了流。
4.  试图读/写文件，但没有权限。
5.  尝试写入文件，但磁盘空间不再可用。

还有很多例子，但根据我的经验，这些是最常见的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-04T04:53:37.327

通常， I/O 表示**Input 或 Output**。`IOException`每当输入或输出操作失败或解释时，这些方法都会抛出。请注意，这不会被抛出以**读取或写入内存**，因为 Java 将自动处理它。

以下是一些导致`IOException`.

*   从关闭的输入流中读取
*   尝试在没有网络连接的情况下访问 Internet 上的文件

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-07-14T09:19:39.687

Java 文档有助于了解特定[IOException](https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html)的根本原因。

只需查看文档页面中直接*已知的子接口*`IOException`：

`ChangedCharSetException, CharacterCodingException, CharConversionException, ClosedChannelException, EOFException, FileLockInterruptionException, FileNotFoundException, FilerException, FileSystemException, HttpRetryException, IIOException, InterruptedByTimeoutException, InterruptedIOException, InvalidPropertiesFormatException, JMXProviderException, JMXServerErrorException, MalformedURLException, ObjectStreamException, ProtocolException, RemoteException, SaslException, SocketException, SSLException, SyncFailedException, UnknownHostException, UnknownServiceException, UnsupportedDataTypeException, UnsupportedEncodingException, UserPrincipalNotFoundException, UTFDataFormatException, ZipException`

大多数这些例外都是不言自明的。

一些`IOExceptions`有根本原因的：

[EOFException](https://docs.oracle.com/javase/8/docs/api/java/io/EOFException.html)：表示输入期间意外到达文件结尾或流结尾。此异常主要由数据输入流使用，以发出流结束的信号。

[SocketException](https://docs.oracle.com/javase/8/docs/api/java/net/SocketException.html)：抛出以指示创建或访问 Socket 时出错。

[RemoteException](https://docs.oracle.com/javase/8/docs/api/java/rmi/RemoteException.html)：RemoteException 是在执行远程方法调用期间可能发生的许多与通信相关的异常的通用超类。远程接口（扩展 java.rmi.Remote 的接口）的每个方法都必须在其 throws 子句中列出 RemoteException。

[UnknownHostException](https://docs.oracle.com/javase/8/docs/api/java/net/UnknownHostException.html)：抛出表示无法确定主机的 IP 地址（您可能未连接到 Internet）。

[MalformedURLException](https://docs.oracle.com/javase/8/docs/api/java/net/MalformedURLException.html)：抛出以指示发生了格式错误的 URL。在规范字符串中找不到合法协议，或者无法解析该字符串。

# java - java应用程序和android应用程序之间的ScheduleThreadPoolExecutor和ScheduledFuture有何不同

> ID：13216151
> 
> 赞同：1
> 
> 时间：2012-11-04T04:48:11.683
> 
> 标签：java, android

```
public class TestingActivity extends Activity implements View.OnClickListener
{
 ScheduledThreadPoolExecutor scheduler = new ScheduledThreadPoolExecutor(1);

ScheduledFuture now = null;
Button roll, continuous, exit, stop;
TextView two, three, four13,four22, five14,five32, six51,six42,six33, seven61,

    public class RollDice extends JFrame implements ActionListener
    {
    ScheduledThreadPoolExecutor scheduler = new ScheduledThreadPoolExecutor(1);

ScheduledFuture now = null;

private static final int WIDTH = 450;
 private static final int HEIGHT = 1100;
priva 
```

这有什么不同，它是同一个程序，它在java应用程序中工作，但在android应用程序中不起作用，但我没有错误

# xcode - 如何使用 NSJSONSerialization 从多级 JSON 创建 NSDictionary

> ID：13216153
> 
> 赞同：1
> 
> 时间：2012-11-04T04:48:27.207
> 
> 标签：xcode, json, ios6, nsdictionary, nsjsonserialization

JSON 示例：

注意：“Docs”数组是这个大数组中许多不同的数组之一。

```
 {
        "Docs": {
            "Title1": {
                "id": "1",
                "active": "0",
                "title": "xxx",
                "date": "October 22, 2012",
                "description": "Description here",
                "ext": "DOCX",
                "when": "Tuesday, October 23",
                "subject": "French",
                "author": "xx xD",
                "email": "xx.xx@gmail.com",
                "day": "Tuesday, October 23",
                "dl": "9 downloads"
            },
            "Title2": {
                "id": "2",
                "active": "0",
                "title": "Vocab, Page 64",
                "date": "October 22, 2012",
                "description": "Description goes here",
                "ext": "XLSX",
                "when": "Tuesday October23",
                "subject": "French",
                "author": "xxxxxx",
                "email": "xxx@yahoo.com",
                "day": "Tuesday October23",
                "dl": "3 downloads"
            }
        } 
```

例如，如何制作一个 NSDictionary 来获取“Docs”数组（Docs）的标题并获取 docs 数组中的数组数量？谢谢。我对如何做到这一点感到非常困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:59:27.170

像这样的东西：

```
NSError *e = nil;
NSDictionary *JSON = [NSJSONSerialization JSONObjectWithData:data options: NSJSONReadingMutableContainers error: &e]; 
```

一旦你得到反序列化的数据，你就可以遍历字典来读取元素。要获取对象数量的计数：

```
// Get your object "Docs" from the root object
NSDictionary *dictionaryObject = (NSDictionary *)[JSON objectForKey:@"Docs"];

// Get the count by counting the keys
NSArray * allKeys = [dictionaryObject allKeys];
NSLog(@"Count : %d", [allKeys count]); 
```

# ruby - 取消文件，然后附加一个字符串

> ID：13216158
> 
> 赞同：0
> 
> 时间：2012-11-04T04:50:35.397
> 
> 标签：ruby, file, chomp

我有一个带有路径名的文本文件`file`，以及一些`string`我想附加到它的内容。我想做一些接近

```
File.open(file, "a"){|io| io.puts(string)} 
```

但如果文件的原始内容不以结束行字符结束`$/`，我想在前面插入一个`string`。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:37:55.620

```
File.open(file, 'r+') do |f|
  unless (last = f.readlines[-1]) && last.end_with?($/)
    f.puts $/
  end

  f.puts string
end 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-04T05:01:29.197

```
File.open(file, "a"){ |io| 
   io.puts
   io.puts(string)
} 
```

# c++ - 两个键之间的键数

> ID：13216159
> 
> 赞同：0
> 
> 时间：2012-11-04T04:50:44.067
> 
> 标签：c++, stl, map

我如何找到地图中两个键值之间出现的键数？有没有办法使用迭代器来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:55:34.253

看看地图和一些 STL 算法：

```
http://www.cplusplus.com/reference/stl/map/
    lower_bound Return iterator to lower bound (public member function)
    upper_bound Return iterator to upper bound (public member function) 
    distance Calculates the number of elements between first and last. 
```

# javascript - Javascript鼠标悬停图像失败

> ID：13216173
> 
> 赞同：0
> 
> 时间：2012-11-04T04:55:09.387
> 
> 标签：javascript, html

到目前为止，这就是我所拥有的，我一直在观看大量的 Javascript 视频，我觉得我模仿它们很可靠，但这仍然没有按我想要的方式运行。

不是，它在鼠标悬停上从 logo1 变为 logo2。这是家庭作业。但是，对我来说很重要的家庭作业，因此我们将不胜感激任何帮助或指导。

```
</head>

<body>
<p>
<div>
<script type="text/javascript">
// Pre load images for rollover
function imgOver(id) 
{
    document.getElementById(id).src="logo1.jpg";
}

function imgOut(id) 
{
    document.getElementById(id).src="logo2.jpg";
}

</script>   
<a href="#" onmouseover="imgOver('logo1');" onmouseout="imgOut('logo2')">
<img alt="logo" height="150" src="images/Logo1.jpeg" width="110" />
</a>
</div>
</body>

</html> 
```

新代码，它仍然....不起作用！=(

```
</head>

<body>
<div>
<p>
<script type="text/javascript">
// Pre load images for rollover
function imgOver() 
{
    document.getElementById('logo').src="images/logo1.jpg"; // ensure correct image path
}

function imgOut() 
{
    document.getElementById('logo').src="images/logo2.jpg"; // ensure correct image path
}
</script>   
<a href="#" onmouseover="imgOver('logo1');" onmouseout="imgOut('logo2')">
<img alt="logo" height="150" src="images/Logo1.jpeg" width="110" />
</a>
</p>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:03:22.910

试试这个：

```
<script type="text/javascript">
// Pre load images for rollover
function imgSwap(imgSrc) 
{
    document.getElementById('logo').src = "images/"+imgSrc+".jpeg";
}

</script>   
<a href="#" onmouseover="imgSwap('Logo1');" onmouseout="imgSwap('Logo2')">
<img id="logo" alt="logo" height="150" src="images/Logo1.jpeg" width="110" />
</a> 
```

以前，我们传入的`id`是未使用的。此外， src 需要指向`images/`目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:02:52.273

您不需要将图像元素传递`ID`给您的`imgOver`和`imgOut`函数，因为`ID`永远不会改变，您的函数应该更改为：

```
function imgOver() {
    document.getElementById('logo').src="logo1.jpg"; // ensure correct image path
}

function imgOut() {
    document.getElementById('logo').src="logo2.jpg"; // ensure correct image path
} 
```

其次，确保您指定正确的路径`logo1.jpg`和`logo2.jpg`. 例如：形成您的原始 HTML，看起来您需要分别使用**images/logo1.jpg**和**images/logo2.jpg**。

* * *

您的图像元素需要有一个 ID。`<img id="logo" alt="logo" height="150" src="images/Logo1.jpeg" width="110" />`

**完整来源：**

```
<script type="text/javascript">
function imgOver() {
    document.getElementById('logo').src="images/logo1.jpg"; // ensure correct image path
}
function imgOut() {
    document.getElementById('logo').src="images/logo2.jpg"; // ensure correct image path
}
</script>   
<a href="#" onmouseover="imgOver()" onmouseout="imgOut()">
    <!-- note the id="logo" part below -->
    <img id="logo" alt="logo" height="150" src="images/Logo1.jpeg" width="110" />
</a> 
```

# c - 为 CUDA 编译 Hello world 程序时出错

> ID：13216174
> 
> 赞同：1
> 
> 时间：2012-11-04T04:55:22.833
> 
> 标签：c, cuda, gpu, nvidia

我正在使用 Ubuntu 12.10 并且也成功安装了 CUDA 5.0 及其示例工具包。我还运行了`sudo apt-get install nvidia-cuda-toolkit`下面是我的 CUDA hello world 程序：

```
#include <stdio.h>  /* Core input/output operations                         */
#include <stdlib.h> /* Conversions, random numbers, memory allocation, etc. */
#include <math.h>   /* Common mathematical functions                        */
#include <time.h>   /* Converting between various date/time formats         */
#include <cuda.h>   /* CUDA related stuff                                   */

__global__ void kernel(void) {
}

/* MAIN PROGRAM BEGINS */
int main(void) {

  /* Dg = 1; Db = 1; Ns = 0; S = 0 */
  kernel<<<1,1>>>();

  /* PRINT 'HELLO, WORLD!' TO THE SCREEN */
  printf("\n  Hello, World!\n\n");

  /* INDICATE THE TERMINATION OF THE PROGRAM */
  return 0;
}
/* MAIN PROGRAM ENDS */ 
```

编译时出现以下错误`nvcc -g hello_world_cuda.cu -o hello_world_cuda.x`

```
/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `main':
/home/adarshakb/Documents/hello_world_cuda.cu:16: undefined reference to `cudaConfigureCall'
/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `__cudaUnregisterBinaryUtil':
/usr/include/crt/host_runtime.h:172: undefined reference to `__cudaUnregisterFatBinary'
/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `__sti____cudaRegisterAll_51_tmpxft_000033f1_00000000_4_hello_world_cuda_cpp1_ii_b81a68a1':
/tmp/tmpxft_000033f1_00000000-1_hello_world_cuda.cudafe1.stub.c:1: undefined reference to `__cudaRegisterFatBinary'
/tmp/tmpxft_000033f1_00000000-1_hello_world_cuda.cudafe1.stub.c:1: undefined reference to `__cudaRegisterFunction'
/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `cudaError cudaLaunch<char>(char*)':
/usr/lib/nvidia-cuda-toolkit/include/cuda_runtime.h:958: undefined reference to `cudaLaunch'
collect2: ld returned 1 exit status 
```

我还确保我使用 gcc 和 g++ 4.4 版（作为 4.7，CUDA 存在一些问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:43:05.797

我认为，这些链接将对您有所帮助。

[开发者驱动](http://www.youtube.com/watch?v=qYYnTdX6EwI)安装视频演示

使用相同的命令行安装工具包和 sdk。

每次打开终端时都需要更改目录。这些说明在[Linux 安装的第 11 页中给出](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Getting_Started_Linux.pdf)

首先，您需要从[开发人员页面下载 .run 文件。](https://developer.nvidia.com/cuda-downloads)

# c# - WP7 数据绑定显示 int 但不显示字符串？

> ID：13216181
> 
> 赞同：0
> 
> 时间：2012-11-04T04:56:36.090
> 
> 标签：c#, windows-phone-7, data-binding

每当我测试我的应用程序时，它会绑定 Note 类中的数据并在它不是字符串时显示它。但对于字符串变量，它不会绑定。我究竟做错了什么？

在我的主要内容中：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ListBox x:Name="Listbox" SelectionChanged="listbox_SelectionChanged" ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Width="800" MinHeight="60">
                        <StackPanel>
                            <TextBlock x:Name="Title" VerticalAlignment="Center" FontSize="{Binding TextSize}"  Text="{Binding Name}"/>
                            <TextBlock x:Name="Date"  VerticalAlignment="Center" FontSize="{Binding TextSize}"  Text="{Binding Modified}"/>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Grid> 
```

在后面的代码中：

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        MessageBox.Show("enters onNav Main");
        DataContext = null;
        DataContext = Settings.NotesList;

        Settings.CurrentNoteIndex = -1;
        Listbox.SelectedIndex = -1;

        if (Settings.NotesList != null)
        {
            if (Settings.NotesList.Count == 0)
            {
                Notes.Text = "No Notes";
            }
            else
            {
                Notes.Text = "";
            }
        }
    } 
```

和

```
 public static class Settings
 {
    public static ObservableCollection<Note> NotesList;
    static IsolatedStorageSettings settings;
    private static int currentNoteIndex;

    static Settings()
    {
        NotesList = new ObservableCollection<Note>();
        settings = IsolatedStorageSettings.ApplicationSettings;
        MessageBox.Show("enters constructor settings");
    } 
```

笔记类：

```
public class Note
{
    public DateTimeOffset Modified { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }
    public int TextSize { get; set; }

    public Note()
    {
        MessageBox.Show("enters Note Constructor");
        Modified = DateTimeOffset.Now;
        Title = "test";
        Content = "test";
        TextSize = 32;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T09:20:13.467

如果您指的`Name`是您在 first 中绑定的属性`TextBlock`，则它没有在您的对象中定义：

```
public DateTimeOffset Modified { get; set; }
public string Title { get; set; }
public string Content { get; set; }
public int TextSize { get; set; } 
```

您可能打算`Title`改用。

# android - 我们可以用蓝牙连接两个以上的设备吗

> ID：13216182
> 
> 赞同：0
> 
> 时间：2012-11-04T04:56:46.267
> 
> 标签：android, bluetooth

> **可能重复：**
> [多个蓝牙连接](https://stackoverflow.com/questions/3943182/multiple-bluetooth-connection)

我们可以用蓝牙连接两个以上的设备来玩游戏吗？我对 Android 完全陌生。我正在考虑为玩 4 名玩家的纸牌游戏编写应用程序。我听说蓝牙只能在两部手机之间进行通信。我想在继续之前挖掘背景。这就是我问这个的原因。

我感谢您对此的想法以及开发此应用程序的任何提示。

提前致谢。

# php - PHP 将 GMT 转换为 IST

> ID：13216185
> 
> 赞同：5
> 
> 时间：2012-11-04T04:57:33.863
> 
> 标签：php

我可以在不使用 PEAR 的情况下将 GMT 转换为 PHP 中的 IST。

这是我获得 GMT`gmdate()`的方法，现在我如何将其转换为 IST。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T04:58:36.280

尝试

```
 echo date('Y-m-d H:i:s',strtotime('+330 minutes', 0)); 
```

或者

```
 date_default_timezone_set('Asia/Kolkata');
  echo date('Y-m-d H:i:s'); 
```

首先得到时间

```
 $time = new DateTime('now', new DateTimeZone('UTC'));
    // than convert it to IST by
    $time->setTimezone(new DateTimeZone('IST')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T05:08:37.257

十分简单：

```
$date = new DateTime('2012-11-04 05:04:00', new DateTimeZone('GMT'));
$date->setTimezone(new DateTimeZone('IST'));

echo $date->format('Y-m-d H:i:s'); 
```

# php - 采购项目的数据库关系

> ID：13216196
> 
> 赞同：1
> 
> 时间：2012-11-04T05:00:02.533
> 
> 标签：php, mysql, sql, database, database-design

我正在尝试建立一个数据库关系来跟踪购买的物品，这些物品将用于事后查找——例如电子书。忽略省略号——它们代表杂项数据，例如时间戳等...

这是我现在的表：

```
purchased:
transaction_id(int)(pk)(auto_inc) | username (varchar) | purchases (text) | ... 
```

在此设计中，“purchases”列只是一个文本字符串，其中包含已购买项目的 item_id，以逗号分隔。简化示例：“book1、book23、book5、book8”。

在一个成功的交易中，这个查询会将交易数据插入到“purchased”表中：

```
INSERT INTO purchased VALUES (null, username, purchases, ...) 
```

* * *

从这一点开始，可能会发生两件事：

1.  用户可以查找他们购买的电子书
2.  用户可以进行另一次购买交易。

如果用户（用户名）想要查看他们的电子书，系统会执行选择查询，例如

```
SELECT purchases FROM purchased WHERE username=theusername 
```

它返回一个包含项目 ID 的字符串。

一个旁注，是否有可能在不必使用额外的 php 代码（即爆炸）的情况下获得一个 php 数组购买？**除了 SQL 中的数据类型“文本”之外，您可以使用其他东西来存储项目列表吗？**如果没有，那也没关系。

* * *

无论哪种方式，这是主要问题。假设用户进行了另一笔交易——“purchased”中现在将有两行包含用户购买的商品。这意味着在这个表中，用户的购买被分成了多行。

理想情况下，我希望这些购买都在同一行。我不能使用 UPDATE 语句，因为每次购买都有自己唯一的 transaction_id。

我在想我可以制作另一个包含用户所有购买的表

```
all_purchased:
username (pk) | purchases (text) | ... 
```

并且每当用户进行另一笔交易时，“all_purchased”表只会使用任何新电子书的项目 ID 更新其购买列。

但是这个表似乎是多余的，因为我提到的选择查询可以完成任务。

**构建数据库关系的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:06:20.393

我认为将购买的 book_ids 与逗号分隔值保持在同一行中并不是一个好主意。**最好将新表定义为：**

```
 purchased_books:
      transaction_book_id(int)(pk)(auto_inc) | transaction_id(int) | book_id(int) 
```

还要定义 transaction_id 和 book_id 列与其各自的表的外键关系 ie`purchased`和`books`.

希望您的其他问题将通过使用这个新表来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:47:47.420

考虑到您使用的是关系数据库——有什么特殊原因不使用规范化表吗？这只是一种可能性。

![在此处输入图像描述](../Images/b042e74c2145a85feaf8b62d6c309f26.png)

这个传播密钥；如果您有某种类型的 ORM 对复合键有问题，请**[按此示例进行](https://stackoverflow.com/questions/4520289/multiple-column-foreign-key-contraints/4522171#4522171)**修改。

# python - 如何在同一台 OSX 机器上设置 32 位和 64 位版本的 MySQL-Python？

> ID：13216198
> 
> 赞同：0
> 
> 时间：2012-11-04T05:00:54.313
> 
> 标签：python, mysql, macos, 64-bit, 32-bit

我被指派维护一个用 Python 编写的与 MySQL 交互的工具。用户通过使用不同版本 Python 的不同应用程序使用此工具。

有时，同一应用程序的软件版本之间的 Python 版本会发生变化。我们无法控制用户选择与之交互的应用程序（尽管它们都有 Python 接口并在 OS X 下运行），但除了 Python-MySQL 的问题外，我几乎可以正常工作。具体来说，某些软件使用 64 位版本的 Python。其他的则带有 32 位版本。OS X（我需要支持的操作系统）安装了 Python 和 Python-MySQL 32 位，所以如果我尝试：

```
import MySQLdb 
```

在使用 Python 64 位的软件中，导入失败，应用程序会说 OS X 附带的 MySQL 的二进制文件类型错误。

我已将 Python-MySQL 下载、编译并安装为 64 位应用程序，但 Python-MySQL 使用 Python 鸡蛋。似乎鸡蛋被硬编码为指向特定的磁盘位置。在我的机器上是`/usr/local/lib/mysql`.

如果我在该路径上有 64 位版本，那么我的工具适用于具有 Python 64 位的应用程序，但所有其他使用 32 位版本 Python 的工具都会失败。如果我在该磁盘位置有 32 位版本的 MySQL，则 32 位工具可以工作，而 64 位版本将停止执行我需要的操作。

我试图创建不同的鸡蛋并拥有一个 64 位版本，我将鸡蛋更改为指向，`/usr/local/lib/mysql_x86_64`但我不知道该怎么做。我还尝试在编译 Python-MySQL 以指向该位置时更改设置，但我找不到这样做的方法。

现在我正在谷歌上搜索我的生活，但如果我刚刚写的内容对任何人敲响了警钟，你介意启发我吗？

我根本不是 Python-MySQL 专家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:06:48.537

使用[virtualenv](http://www.virtualenv.org/en/latest/)创建具有不同解释器的单独 python 环境。

python-MySQLdb 链接到您系统上安装的某个库。每个环境都可以链接到不同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:44:30.440

在 OS X 上不需要有两个不同版本的 MySQL 客户端库。您可以安装一个通用版本，在同一个文件中同时包含 32 位和 64 位二进制文​​件。然后将 MySQLdb 适配器 (python-mysql) 的实例安装到您需要的每个 Python，链接到该库的一个通用版本。不幸的是，由于某种原因，MySQL 项目没有提供通用二进制文件。但建立自己很容易。我建议为 OS X 使用第三方包管理器，例如 Homebrew 或 MacPorts。我不了解 Homebrew，但我从个人经验中知道使用 MacPorts 非常简单。[安装 MacPorts base](http://www.macports.org/install.php)后，您可以使用以下命令安装 MySQL 及其所有依赖项：

```
port install mysql5 +universal 
```

`+universal`（通过编辑为所有端口创建默认变体更容易`/opt/local/macports/variants.conf`。）这会将 MySQL 客户端库安装到`/opt/local/lib/mysql5/mysql/`. 然后安装链接到该库目录的 python-mysql 包，而不是您可能在其他地方安装的任何包。

使用 MacPorts 安装完整的解决方案甚至更容易，即安装通用 Python、通用 MySQLdb 以及 MySQL 客户端库：

```
port install py27-mysql +universal 
```

但是，如果您无法控制用户正在使用哪些 Python，那可能就没有用了。

# php - Symfony 在每次刷新时将变量传递给模板

> ID：13216200
> 
> 赞同：1
> 
> 时间：2012-11-04T05:01:15.603
> 
> 标签：php, variables, layout, doctrine, symfony-1.4

我知道这里有一些关于使用部分或插槽将变量传递给模板的线程。我的问题是，您如何定义该变量，以便无论您在哪个页面上，该变量仍然可以访问。我知道每个“扩展”操作`sfActions`，但是有没有办法访问它并为整个站点设置一个操作？

**编辑：**

每个用户在 sfUser 表中都有一个字段，我希望在每个页面的顶部显示该字段。这是我想使用的代码，但我不确定在哪里放置或如何将其传递给模板页面上的部分。

```
$this->user = $this->getUser()->getGuardUser();
$this->activeitems = $this->user->getActiveItems(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:26:35.943

在每个模板中，您都可以使用`$sf_user`. 它返回一个`myUser`对象。

如果你已经安装了 sfGuard，这个类应该扩展`sfGuardSecurityUser`. 在这个类中，您可以使用方法检索 sfGuardUser 对象`->getGuardUser()`。

因此，要在任何模板中检索此信息，您可以执行以下操作：

```
$activeitems = $sf_user->getGuardUser()->getActiveItems(); 
```

# mysql - JPA 从不做任何事情的实体生成表

> ID：13216203
> 
> 赞同：5
> 
> 时间：2012-11-04T05:01:36.990
> 
> 标签：mysql, database, eclipse, orm, jpa-2.0

我正在使用带有 Hibernate 的 JPA-2 实现的 Eclipse Indigo。问题是当我使用该工具“从实体生成表”时根本没有效果。我收到 45 个错误，说我的表不存在。谁能帮我解决这个问题，谷歌搜索没有帮助。我被困在这很长一段时间了。

这是我的休眠配置

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="testjpa" transaction-type="RESOURCE_LOCAL">
        <class>com.myclassregister.model.helper.enums.UserTypeEnum</class>
        <class>com.myclassregister.model.helper.enums.SystemRoleEnum</class>
        <class>com.myclassregister.model.helper.enums.SchoolRoleEnum</class>
        <class>com.myclassregister.model.helper.enums.PreferenceGroupEnum</class>
        <class>com.myclassregister.model.helper.enums.PreferenceEnum</class>
        <class>com.myclassregister.model.helper.enums.PostTypeEnum</class>
        <class>com.myclassregister.model.helper.enums.NoteTypeEnum</class>
        <class>com.myclassregister.model.helper.enums.NotePermissionEnum</class>
        <class>com.myclassregister.model.helper.enums.IssueTypeEnum</class>
        <class>com.myclassregister.model.helper.enums.IssueCategoryEnum</class>
        <class>com.myclassregister.model.helper.enums.GenderEnum</class>
        <class>com.myclassregister.model.helper.enums.CaseStatusEnum</class>
        <class>com.myclassregister.model.helper.embeddables.Recipient</class>
        <class>com.myclassregister.model.helper.embeddables.Name</class>
        <class>com.myclassregister.model.helper.embeddables.Mobile</class>
        <class>com.myclassregister.model.helper.embeddables.Landline</class>
        <class>com.myclassregister.model.helper.embeddables.BlobField</class>
        <class>com.myclassregister.model.helper.embeddables.AuditTrail</class>
        <class>com.myclassregister.model.helper.embeddables.Address</class>
        <class>com.myclassregister.model.base.users.UserCredential</class>
        <class>com.myclassregister.model.base.users.User</class>
        <class>com.myclassregister.model.base.users.Teacher</class>
        <class>com.myclassregister.model.base.users.SystemUser</class>
        <class>com.myclassregister.model.base.users.SystemAdmin</class>
        <class>com.myclassregister.model.base.users.Student</class>
        <class>com.myclassregister.model.base.users.SchoolStaff</class>
        <class>com.myclassregister.model.base.users.Principal</class>
        <class>com.myclassregister.model.base.users.Parent</class>
        <class>com.myclassregister.model.base.users.OfficeAdmin</class>
        <class>com.myclassregister.model.base.subject.Syllabus</class>
        <class>com.myclassregister.model.base.subject.Subject</class>
        <class>com.myclassregister.model.base.subject.Schedule</class>
        <class>com.myclassregister.model.base.subject.Homework</class>
        <class>com.myclassregister.model.base.subject.Grade</class>
        <class>com.myclassregister.model.base.subject.ExamSeries</class>
        <class>com.myclassregister.model.base.subject.Exam</class>
        <class>com.myclassregister.model.base.subject.Assignment</class>
        <class>com.myclassregister.model.base.preferences.UserPreference</class>
        <class>com.myclassregister.model.base.preferences.SchoolPreference</class>
        <class>com.myclassregister.model.base.preferences.ParentSMSFilter</class>
        <class>com.myclassregister.model.base.posts.PostRecipient</class>
        <class>com.myclassregister.model.base.posts.Post</class>
        <class>com.myclassregister.model.base.posts.NoteSharing</class>
        <class>com.myclassregister.model.base.posts.Note</class>
        <class>com.myclassregister.model.base.posts.Message</class>
        <class>com.myclassregister.model.base.posts.LeaveRequest</class>
        <class>com.myclassregister.model.base.misc.SchoolClass</class>
        <class>com.myclassregister.model.base.misc.School</class>
        <class>com.myclassregister.model.base.events.EventRSVP</class>
        <class>com.myclassregister.model.base.events.EventInvitee</class>
        <class>com.myclassregister.model.base.events.Event</class>
        <class>com.myclassregister.model.base.casemgmt.Contact</class>
        <class>com.myclassregister.model.base.casemgmt.Case</class>
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost/dummyissoyummy"/>
            <property name="hibernate.connection.password" value="master"/>
            <property name="hibernate.connection.username" value="root"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/dummyissoyummy"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value="master"/>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
        </properties>
    </persistence-unit>
</persistence> 
```

实体：

```
import java.util.Set;

import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;

import org.hibernate.annotations.Cascade;

import com.myclassregister.model.base.casemgmt.Contact;
import com.myclassregister.model.base.users.UserCredential;
import com.myclassregister.model.helper.enums.CaseStatusEnum;
import com.myclassregister.model.helper.enums.IssueTypeEnum;

@Entity
public class Case implements java.io.Serializable {

    private static final long serialVersionUID = 1226071621948838470L;

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE)
    @Column(nullable=false,unique=true)
    private Long caseID;    

    @Column(nullable=true)
    @ManyToOne(optional=true)
    @JoinColumn(name="caseOwnerID", referencedColumnName="userID", nullable=true)
    private UserCredential caseOwner;

    @Column(nullable=true)
    @ManyToOne(optional=true)
    @JoinColumn(name="caseRequestorID", referencedColumnName="userID", nullable=true)
    private UserCredential caseRequestor;

    @Column(nullable=false)
    @ManyToOne(optional=true)
    @JoinColumn(name="caseStatus", referencedColumnName="caseStatus", nullable=true)
    private CaseStatusEnum caseStatus;

    @Column(nullable=false)
    @ManyToOne(optional=true)
    @JoinColumn(name="issueType", referencedColumnName="issueType", nullable=true)
    private IssueTypeEnum issueType;

    @Column(nullable=false)
    private Integer severity=5;

    @OneToMany
    @Basic(optional=true,fetch=FetchType.LAZY)
    @Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
    @JoinTable(name="caseContact", 
               joinColumns= {@JoinColumn(name="caseID",referencedColumnName="caseID")}, 
               inverseJoinColumns= {@JoinColumn(name="contactID", referencedColumnName = "contactID")}
    )
    private Set<Contact> caseContacts;

    public Case() {
    }

    public Case(Long caseID, UserCredential caseOwner,
            UserCredential caseRequestor, CaseStatusEnum caseStatus,
            IssueTypeEnum issueType, Integer severity, Set<Contact> caseContacts) {
        this.caseID = caseID;
        this.caseOwner = caseOwner;
        this.caseRequestor = caseRequestor;
        this.caseStatus = caseStatus;
        this.issueType = issueType;
        this.severity = severity;
        this.caseContacts = caseContacts;
    }

    public Long getCaseID() {
        return caseID;
    }

    public void setCaseID(Long caseID) {
        this.caseID = caseID;
    }

    public UserCredential getCaseOwner() {
        return caseOwner;
    }

    public void setCaseOwner(UserCredential caseOwner) {
        this.caseOwner = caseOwner;
    }

    public UserCredential getCaseRequestor() {
        return caseRequestor;
    }

    public void setCaseRequestor(UserCredential caseRequestor) {
        this.caseRequestor = caseRequestor;
    }

    public CaseStatusEnum getCaseStatus() {
        return caseStatus;
    }

    public void setCaseStatus(CaseStatusEnum caseStatus) {
        this.caseStatus = caseStatus;
    }

    public IssueTypeEnum getIssueType() {
        return issueType;
    }

    public void setIssueType(IssueTypeEnum issueType) {
        this.issueType = issueType;
    }

    public Integer getSeverity() {
        return severity;
    }

    public void setSeverity(Integer severity) {
        this.severity = severity;
    }

    public Set<Contact> getCaseContacts() {
        return caseContacts;
    }

    public void setCaseContacts(Set<Contact> caseContacts) {
        this.caseContacts = caseContacts;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result
                + ((caseContacts == null) ? 0 : caseContacts.hashCode());
        result = prime * result + ((caseID == null) ? 0 : caseID.hashCode());
        result = prime * result
                + ((caseOwner == null) ? 0 : caseOwner.hashCode());
        result = prime * result
                + ((caseRequestor == null) ? 0 : caseRequestor.hashCode());
        result = prime * result
                + ((caseStatus == null) ? 0 : caseStatus.hashCode());
        result = prime * result
                + ((issueType == null) ? 0 : issueType.hashCode());
        result = prime * result
                + ((severity == null) ? 0 : severity.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Case other = (Case) obj;
        if (caseContacts == null) {
            if (other.caseContacts != null)
                return false;
        } else if (!caseContacts.equals(other.caseContacts))
            return false;
        if (caseID == null) {
            if (other.caseID != null)
                return false;
        } else if (!caseID.equals(other.caseID))
            return false;
        if (caseOwner == null) {
            if (other.caseOwner != null)
                return false;
        } else if (!caseOwner.equals(other.caseOwner))
            return false;
        if (caseRequestor == null) {
            if (other.caseRequestor != null)
                return false;
        } else if (!caseRequestor.equals(other.caseRequestor))
            return false;
        if (caseStatus == null) {
            if (other.caseStatus != null)
                return false;
        } else if (!caseStatus.equals(other.caseStatus))
            return false;
        if (issueType == null) {
            if (other.issueType != null)
                return false;
        } else if (!issueType.equals(other.issueType))
            return false;
        if (severity == null) {
            if (other.severity != null)
                return false;
        } else if (!severity.equals(other.severity))
            return false;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:50:31.037

我是stackoverflow的新手，如果这是不正确的，请道歉。
有没有考虑换

```
<property name="hibernate.hbm2ddl.auto" value="update"/> 
```

进入

```
<property name="hibernate.hbm2ddl.auto" value="create"/> 
```

看看这是否第一次设置它？我总是使用 create 然后将其注释掉，否则它每次都会重新创建它，但似乎对我有用。

# linux - 如何有效地将许多文件移动到新服务器？

> ID：13216204
> 
> 赞同：5
> 
> 时间：2012-11-04T05:01:39.383
> 
> 标签：linux, zip, gzip, tar

我正在切换托管服务提供商，需要将数百万个上传的文件传输到新服务器。所有文件都在同一个目录中。是的。你没看错。;)

过去我这样做过：

1.  压缩源服务器中的所有文件
2.  `scp`新服务器的 zip
3.  解压
4.  将目录移动到适当的位置
    *   无论出于何种原因，我从第 1 步开始的拉链总是将路径与它们一起带走，并要求我进行 mv。

我最后一次这样做大约需要 4-5 天才能完成，这大约是我现在所拥有的 60%。

我希望有更好的方法。你有什么建议？

文件结构是散列的。像这样的东西：`AAAAAAAAAA.jpg`-`ZZZZZZZZZZ.txt`

这是我们正在折腾的一个想法：

根据 3 个字母前缀将拉链分成大量的迷你拉链。就像是：

```
AAAAAAAAAA.jpg - AAAZZZZZZZ.gif => AAA.zip 
```

理论优点：

*   可以加快传输速度，允许同时传输多个 zip
*   可以限制因传输失败而损失的时间。（等待 2 天转移最终失败是可怕的）

理论缺点：

*   可能会大大减慢初始 zip 的速度，因为 zip 必须通过通配符 ( `AAA*`) 查找文件，这可能会通过一次运行多个 zip 线程来抵消，使用所有 CPU 而不是只使用一个。
*   复杂？

我们也考虑过 rsync 和 scp，但担心手动传输每个文件的费用。而且由于远程服务器是空的，我不需要担心已经存在的东西。

你怎么看？你会怎么做？

（是的，我最终会将这些移动到 Amazon S3，我只是将它们运送到一个磁盘，但与此同时，我昨天需要它们！）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T05:07:04.103

你实际上有多种选择，我最喜欢的是使用`rsync`.

```
rsync [dir1] [dir2] 
```

此命令实际上将比较目录，并仅同步它们之间的差异。

有了这个，我最有可能使用以下内容

```
rsync -z -e ssh user@example.com:/var/www/ /var/www/ 
```

> -z 压缩
> -e 外壳命令

您还可以通过 SSH 使用 SFTP、FTP。

甚至`wget`。

```
wget -rc ssh://user@example.com:/var/www/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:48:35.277

我来自 Linux/Unix 世界。我会使用**tar**制作多个 tar 文件，每个文件都具有一定的大小。例如：

```
tar -cML $MAXIMUM_FILE_SIZE_IN_KILOBYTES --file=${FILENAME}}_{0,1,2,3,4,5,6,7,8,9}{0,1,2,3,4,5,6,7,8,9}{0,1,2,3,4,5,6,7,8,9}.tar  ${THE_FILES} 
```

除非您的 .txt 文件很大，否则我会跳过重新压缩。重新压缩 .jpeg 文件不会花费太多时间，而且会占用大量 CPU（和实时）时间。

我会研究您的流量整形是如何工作的。你可以有多少并发连接？每个连接多少带宽？一共多少钱？

我用**scp**看到了一些有趣的东西。测试家庭网络，**scp**提供的吞吐量比通过已安装的共享 smbfs 文件系统复制要低得多。我不完全清楚为什么。**尽管如果scp**正在验证副本并请求重传错误，这可能是可取的。（通过互联网传输的数据包中出现错误的可能性非常小。如果没有某种后续验证阶段，这对于大型数据集来说是一个真正的问题。您可能想要运行 md5 哈希......）

如果这是一个网络服务器，你总是可以只使用 wget。虽然这看起来效率很低……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T22:05:05.363

使用 BitTorrent 怎么样？它可能不那么容易设置，但一旦你开始使用它，它应该完全符合你的要求。BitTorrent 的开发是为了促进大型文件的传输。您需要源机器上的客户端和目标机器上的客户端。在源计算机上创建元文件。将其复制到目标计算机并将其加载到您的 BitTorrent 客户端中。手动输入源机器的 IP。只要您没有防火墙阻止您，就应该开始传输。或者，您可以先使用无压缩（即 STORED 压缩）压缩所有文件，然后使用 BitTorrent 传输 zip。

# vb.net - vb.net 类库 - ado.net 查询的异常处理

> ID：13216214
> 
> 赞同：1
> 
> 时间：2012-11-04T05:04:24.777
> 
> 标签：vb.net, ado.net

有人可以建议 - 我们希望将详细的错误消息记录到文本文件或 sql 服务器中，以了解我们创建的 .net 库中发生的任何错误。

```
Try
    'Here we are using the sql command object to fetch the required data
    Catch ex As Exception
    'Here we want to capture detailed error information in a text file or 
    'sql server
Finally
    If Not _SQLCommand Is Nothing Then
        _SQLCommand.Dispose()
    End If
    If Not _Conn Is Nothing Then
        _EConn.Close()
    End If
End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:10:00.987

log4net 可以很好地将错误记录到文本文件，或者 syslog 或 AdoNetAppender 可以记录到 SQL Server 数据库。
[http://logging.apache.org/log4net/release/config-examples.html](http://logging.apache.org/log4net/release/config-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:12:36.100

你可以尝试这样的事情： -

```
Try
 'do some stuff
 Catch ex As Exception
    errorArg = "Error details and description." 
    errorHandle(errorArg, ex)
  Sub errorHandle(ByVal errorArg As String, ByVal ex As System.Exception)
    Dim errorFile As String = "C:\Foldername\errorfile.txt"
    Dim errorWrite As New IO.StreamWriter(errorFile, True)
    Dim machname As String = System.Environment.MachineName.ToString
    Dim close As DialogResult = MessageBox.Show(errorArg & vbCrLf & "Message", "System    Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    errorWrite.Write("*** ERROR on " & curDate & " @ " & machname & vbCrLf & errorArg & vbCrLf &   ex.ToString & vbCrLf)
    errorWrite.Close()
    If close = DialogResult.OK Then End
  End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T05:18:03.293

试用**ELMAH**非常适合错误记录。

**[ELMAH NuGet 包](http://nuget.org/packages/elmah)**也可用。

此外，配置**自定义错误页面**（在 web.config 中）以避免错误**黄页**。

```
<configuration>
   <system.web>
      <customErrors defaultRedirect="GenericError.htm" mode="RemoteOnly">
         <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
   </system.web>
</configuration> 
```

**[ELMAH](http://code.google.com/p/elmah/)（错误记录模块和处理程序）**是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。

将 ELMAH 放入正在运行的 Web 应用程序并进行适当配置后，您无需更改任何一行代码即可获得以下功能：

*   记录几乎所有未处理的异常。
*   用于远程查看重新编码异常的整个日志的网页。
*   用于远程查看任何记录的异常的完整详细信息的网页，包括彩色堆栈跟踪。
*   在许多情况下，即使关闭了 customErrors 模式，您也可以查看 ASP.NET 为给定异常生成的原始黄屏死机。
*   每个错误发生时的电子邮件通知。
*   来自日志的最后 15 个错误的 RSS 提要。

# java - 如何从 netbeans 创建动态 JLabel

> ID：13216217
> 
> 赞同：0
> 
> 时间：2012-11-04T05:04:29.893
> 
> 标签：java, swing, netbeans-7

我在 JFrame 中有公共静态变量。我在另一个 JFrame 中创建了一个 JLabel。我想将 JLabel 文本设置为该变量。当我从 netbeans 创建 JLabel 时，它会创建无法更改的自动生成代码。我使用了netbeans 7.2。

我可以使用`myJLabel.setText(JFrame.variableName);`. 但问题是自动生成的代码不允许我编辑上面的代码片段。

我想通过在属性面板中设置而不是更改上面的代码来将文本设置为变量名。

有没有办法使用属性面板设置动态文本？

`P.S. - I noticed in property panel, we can set jLabel value from existing component but these components reside in same JFrame. My variable reside in another JFrame`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:30:13.723

我可以看到你有两个选择。

一、你简单设置调用后标签的文本为`initComponent`

或者...

*   点击有问题的标签
*   单击属性表上的“代码”按钮
*   单击“创建后代码”上的“...”按钮
*   输入您想要执行的代码，例如`myJLabel.setText(JFrame.variableName);`. 记住，这段代码是内联插入的，所以它必须是良好的格式和可编译的

![在此处输入图像描述](../Images/334a766ff074bbe367b50530d65a2066.png)

然后产生类似...

```
private void initComponents() {    
    jLabel1 = new javax.swing.JLabel();
    jLabel1.setText("Hello");

    setLayout(new java.awt.GridBagLayout());
    add(jLabel1, new java.awt.GridBagConstraints());
}// </editor-fold> 
```

注意-确保清除标签中的默认文本；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:18:08.503

除了最基本的 UI，尤其是动态代码之外的任何内容都将要求您停止使用几乎所有 IDE 的自动生成功能。

# python - 当我运行我的代码时，他们告诉我“int”objext 在第 4 行不可调用

> ID：13216218
> 
> 赞同：1
> 
> 时间：2012-11-04T05:05:04.653
> 
> 标签：python, python-2.7

```
def fdPt(f, eps):
    index = 5.0
    for i in range(57):
        if f(index) - index < eps:
            return guess
        else:
            index = f(index)
    return index 
```

请帮助我已经尽力了，我只是一个初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:11:13.563

在没有看到它被传递到您的函数之前的示例的情况下`f`，您似乎可能将它视为一个序列对象，并尝试对其进行索引：

```
if f(index) - index < eps: 
```

...可能想成为：

```
if f[index] - index < eps: 
```

这假设`f`是一个列表、元组、字符串或其他一些可索引的对象。

你现在对待它的方式`f`想像一个可调用的（函数、方法、类构造函数......）

为了帮助检查您的对象，请尝试打印以下类型`f`：

```
def fdPt(f, eps):
    print f, type(f) 
```

# vhdl - 为什么在这种情况下不能“和”有这样的操作数？

> ID：13216224
> 
> 赞同：1
> 
> 时间：2012-11-04T05:07:03.440
> 
> 标签：vhdl, xilinx

我正在使用 Xilinx 并尝试编译此代码。我收到此错误： **错误：HDLParsers：808 -“C：/Users/Dell/digi/sm.vhd”第 xx 行。并且在这种情况下不能有这样的操作数。** [代码在这里](http://pastebin.com/JSmaE5dj)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:17:04.030

问题是您正在混合 bit 和 std_logic 类型。您通常应该选择一个或另一个（除非您*真的*知道为什么需要，否则不要在同一个文件中使用两者），大多数新工作通常使用 std_logic 完成。要解决这个问题，您需要使所有内容保持一致......要么将输入更改为位类型，就像您所做的那样，或者将内部声明的信号更改为 std_logic：

```
signal Q1, Q2, Q3: std_logic; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:42:23.937

将港口声明从

```
port(X1,X2,CLK: in STD_LOGIC; 
```

到

```
port(X1,X2,CLK: in bit; 
```

让它工作。 [两者的区别](http://vhdlguru.blogspot.in/2010/03/what-is-difference-between-stdlogic-and.html)

# javascript - 多个ajax jquery请求问题

> ID：13216225
> 
> 赞同：0
> 
> 时间：2012-11-04T05:07:11.833
> 
> 标签：javascript, ajax, jquery, soap

应用程序必须通过**$.ajax**请求 Web 服务，但时间会是多个，这取决于用户。[由于它是动态的，因此$.when](http://api.jquery.com/jQuery.when/)似乎无法为它工作。

这是代码：

```
var increase=0;
    var test_use_upload_file_name= t2_image_path+ increase;
var soap_add_new_story_image=
    '<?xml version="1.0" encoding="utf-8"?>' +
    '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ' + 
            'xmlns:xsd="http://www.w3.org/2001/XMLSchema" '+
            'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'+
                '<soap:Body>'+
                    '<AddNewStoryImage xmlns="http://x.x.x.x/StoryForMac/">'+
                        '<StoryID>'+story_id+'</StoryID>'+
                        '<UserName>'+User_Name+'</UserName>'+
                        '<DragNumber>'+Drag_Number+'</DragNumber>'+
                        '<ImagePath>'+test_use_upload_file_name+'</ImagePath>'+
                    '</AddNewStoryImage>'+
                '</soap:Body>'+
            '</soap:Envelope>';   

//multiple ajax request
var start= 0;
for(;start< **USER_Decide**;start++)
{
    $.ajax({
        type: "POST",
        url: webServiceAddNewStoryImgUrl,
        contentType: "text/xml",
        dataType: "xml",
        data: soap_add_new_story_image,     
        success: process_add_new_img_Success,
        error: process_add_new_img_Error        
    }); 
    increase++;
    test_use_upload_file_name= t2_image_path+ increase; 
} 
```

由于我不知道用户会画多少图片，所以我每次都必须更新文件名（增加++）。
请大家给点建议~谢谢！

**更新**：对不起我的糟糕表达。这段代码WON"T WORK。我的问题与此类似[请看一下。](https://stackoverflow.com/questions/4368946/javascript-callback-for-multiple-ajax-calls)但不同的是我不知道我必须调用多少次ajax请求，因为用户会确定它。因此，我可以'不要使用[这里](http://api.jquery.com/jQuery.when/)提供的方法**$.when**。清楚吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:57:10.030

检查这一点，一种可能的方法来实现你的目标[http://jsfiddle.net/oceog/mNegP/](http://jsfiddle.net/oceog/mNegP/)

```
var object = {
    a: {
        id: 'aaa',
        text: 'bbb'
    },
    b: {
        id: 'ccc',
        text: 'cccc'
    }
};
var json = JSON.stringify(object);
console.log("JSON:", json);

//that will run callback when counter is zero
var check_success = function(num, callback) {
    console.log("one done",num,"left");
    if (num <=0) {
        callback();
    }
}

var checkloop = function() {
        var done=0;
      var num=10;// (decide by user);
//this will be called only if all requests done
var run_onlast=function() {
    console.log("last done");
    };
    //at this point we know how many ajax we would run in row
    for (var i = 0; i <= num; i++) {
        console.log("start",i);
        $.post('/echo/json/', {
        //just for sample, random delays
            json: json,delay: Math.round(Math.random()*4)
        },  "json").success(function(data) {
        //run our check function provide it with our last function and our callback
            check_success(num,run_onlast)
        }).error(function(data) {

            console.log({
                error: data.responseText
            });
        }).complete(function() {
        //always reduce, even if error
            num--;
        });
    }
        done=1;
}

    checkloop();
​ 
```

# function - PL/SQL 函数错误 - PLS-00103：遇到符号“IS”

> ID：13216228
> 
> 赞同：1
> 
> 时间：2012-11-04T05:07:48.677
> 
> 标签：function, plsql, compiler-errors

我正在尝试创建一个简单的 PL/SQL 函数，但它返回错误 -> PLS-00103：遇到符号“IS”。我不确定这里出了什么问题，所以那里的任何人都可以帮忙。我按照以下步骤操作 -

`Step1`- 使用 sysdba 登录 -`sqlplus / as sysdba`

`Step2`- 在-`test.sql`下使用以下代码创建了一个文件名`C:\`

```
CREATE OR REPLACE FUNCTION employer_details_func
RETURN VARCHAR(20);
IS 
  emp_name VARCHAR(20); 
BEGIN 
SELECT first_name INTO emp_name
FROM emp_tbl WHERE empID = '100';
RETURN emp_name;
END;
/ 
```

`Step3`- 运行以下命令 -

```
SQL>@C:\test.sql
Warning: Function created with compilation errors.
SQL> show error function Func;
Errors for FUNCTION FUNC:
LINE/COL ERROR
5/1      PLS-00103: Encountered the symbol "IS"
SQL> 
```

不知道为什么我会收到这个奇怪的错误。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:13:50.170

如下创建您的函数并尝试

```
CREATE OR REPLACE FUNCTION employer_details_func
    RETURN VARCHAR2
IS
    emp_name   VARCHAR2 (20);
BEGIN
    SELECT  first_name
      INTO  emp_name
      FROM  emp_tbl
     WHERE  empID = '100';

    RETURN emp_name;
END;
/ 
```

# php - 修改所有 span 类的 Fetched Data

> ID：13216229
> 
> 赞同：1
> 
> 时间：2012-11-04T05:07:52.930
> 
> 标签：php, parsing, dom

我正在使用[PHP Simple HTML DOM Parser * [Manual]](http://simplehtmldom.sourceforge.net/manual.htm)从网站获取数据。

现在我想做的是从获取的内容`span`中删除前三个单词。`class="yeah"`所以我已经实现了这段代码，但它有一个问题：

```
foreach($html->find('span.yeah') as $xdat)
{
    $x_des = implode(' ', array_slice(explode(' ', strip_tags($xdat)), 0, 3));
    $result = str_replace($x_des, ' ', $result);
    $result = str_get_html($result);
} 
```

虽然它删除了前三个单词，`<span class="yeah">`但问题是，这会修改完整获取的内容。但我只想修改那些数据，`<span class="yeah">`但它与所有获取的数据中的前三个单词匹配，然后删除所有这些数据，尽管我只想从那些跨度类型中删除这些数据。

**假设获取的数据是：**

`Some first three words content <span class="yeah">first three words some content some content</span> continue to some content`

**所以，输出应该是：**

`Some first three words content <span class="yeah"> some content some content</span> continue to some content`

在这里，**“前三个单词”**是该跨度类型的前 3 个单词，因此我只需要将其从跨度类型中删除，而不是从完整内容中删除。

那么，如何从所有`<span class="yeah"> </span>`获取的内容中只删除前三个单词呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:32:21.147

```
foreach($html->find('span.yeah') as $xdat)
{
    $result = strip_tags($xdat);
    $result = str_get_html($result);
} 
```

它将去除所有 html 标签和属性，尽管包括`span`和`class="yeah"`.

# php - 重定向 PHP 和 wordpress

> ID：13216231
> 
> 赞同：0
> 
> 时间：2012-11-04T05:08:09.957
> 
> 标签：php, wordpress, redirect

我有一个功能可以检查电子邮件地址是否已存在于数据库中。

它正在工作：

这是那部分。

```
->callback(function($val) 
{ 
    return !username_exists($val);
}, 'The username you entered already exists.')
->validate('username'); 
```

如果用户名存在，它将通过一条消息说“您输入的用户名已经存在”。我想要在 3 秒后显示此消息将它们重定向到登录页面。

所以我在现有代码中添加了这行代码：

```
wp_redirect( 'http://localhost/wordpress/wp-login.php', sleep(3)); exit; 
```

它确实重定向，但是我不再看到该消息。无论如何我可以显示该消息然后重定向吗？

这是一个wordpress，所以我不能做太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:11:33.980

您将需要 HTML 或 JavaScript 解决方案，而不是 php 解决方案。

这是一个[HTML 解决方案](http://www.instant-web-site-tools.com/html-redirect.html)：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Your Page Title</title>
<meta http-equiv="REFRESH" content="3;url=http://localhost/wordpress/wp-login.php"></HEAD>
<body>
...
</body>
</html> 
```

# iphone - 为什么滚动表格时获取数据很慢？

> ID：13216240
> 
> 赞同：0
> 
> 时间：2012-11-04T05:09:42.000
> 
> 标签：iphone, ios, afnetworking

下面的代码与我在 ASI 中使用的代码几乎相同，但现在我使用的是 AFNetworking。我的猜测是它很慢，因为它在主线程上运行成功块。我尝试将 successCallbackQueue 设置为新队列，但它似乎不起作用。它只是非常慢并且不能有效地做到这一点。如何加快速度或确保它在后台线程中运行？

```
#define kPerPage 10

- (void) pullData {
    NSURL *url = [API homeRecentUrlWithPage:self.currentRecentPage limit:kPerPage];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    dispatch_queue_t requestQueue = dispatch_queue_create("requestQueue", NULL);
    AFJSONRequestOperation *operation;
    operation.successCallbackQueue = requestQueue;
    operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSArray* modelArray = [JSON objectForKey:@"models"];

        for (int i = 0; i < [modelArray count]; i++)
        {
            Model *b = [Model alloc];
            b = [b initWithDict:[Model objectAtIndex:i]];
            [self.otherArray addObject:b];
        }
        [_modelTable reloadData];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"%@", [error userInfo]);
    }];
    [operation start];
}

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString* identifier = @"ModelTableCell";
    cell = (ModelTableCell *)[tableView dequeueReusableCellWithIdentifier:identifier];
    if (cell == nil) {
        cell = [[ModelTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
        cell.selectionStyle = UITableViewCellAccessoryNone;
    }
    if([indexPath row] == (self.currentRecentPage-1) * kPerPage + 5) {
        NSLog(@"%d aaa", self.currentRecentPage);

        self.currentRecentPage++;
        [self pullData];
    }

    Model *b = [self.models objectAtIndex:[indexPath row]];
    [cell populateWithModel:b];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:19:12.213

我认为您没有正确设置回调队列

您将回调队列分配给一个操作，然后创建一个覆盖它的操作。

```
// You create the queue
dispatch_queue_t requestQueue = dispatch_queue_create("requestQueue", NULL);

// You declare an operation, but you don't create it.
AFJSONRequestOperation *operation;

// You assign the requestQueue to this uninitialised operation
operation.successCallbackQueue = requestQueue;

// You create the operation here, and it overwrites the requestQueue you have set
operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) { 
```

您应该在创建操作**后设置 successCallbackQueue。**

**编辑添加更多**

还有一点我的阅读。使用 GCD 以及在 Mountain Lion 或 iOS6 应用程序上，如果您使用 ARC，它会负责队列的内存管理。因此，当您在方法中声明队列并将其分配给仅分配值的属性时（如 AFNetworking 中声明的 successCallbackQueue 属性），队列将被释放，并且操作不会保留它，所以它是留下一个 NULL 队列，您将获得错误的访问权限。

所以，解决这个问题的方法是在你的控制器中有一个 iVar，它保持对队列的强引用，所以即使操作不保留队列，你的控制器也会，所以它不会从你下面被清理.

# mysql - MySQL 通过返回不需要的结果使用 COUNT、LEFT JOIN 和 GROUP

> ID：13216241
> 
> 赞同：0
> 
> 时间：2012-11-04T05:09:50.110
> 
> 标签：mysql, count, group-by, left-join

我需要一些帮助才能获得所需的结果，在本例中为 7（产品表中匹配的行数）。

相反，我得到的是 7 行，其计数基于 LEFT JOIN 中返回的行数。

```
SELECT count(p.id) as theCount 
            FROM products p 
            left join tablea a on p.id = a.productId 
            left join tableb b on p.id = b.productId 
            WHERE (a.col = 'val' or b.col = 'val')
group by p.id 
```

如果我不按 p.id 分组，我会返回 28 行，这是 LEFT JOIN 中的所有行。

我知道这很简单，但我无法弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:20:06.830

`select count(distinct p.id)`， 也许？因为你从两张不同的桌子上拉出来，你会得到一个混搭的`(p.id, a.col, b.col)`存在`(xxx, null, yyy)`和`(xxx, yyy, null)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T05:13:24.663

如果您想要的只是计数，则不应加入一对多关系`products`。

将您的过滤条件放在`WHERE`子句中。

```
SELECT count(*) as theCount 
        FROM products p 
        WHERE p.id IN (
             SELECT a.productId
             FROM tablea a
             WHERE a.productId = p.id AND a.col = 'val'

             UNION

             SELECT b.productId
             FROM tableb b
             WHERE b.productId = p.id AND b.col = 'val'
        ) 
```

# javascript - javascript: 防止页面阻塞 ctrl+c / ctrl+v

> ID：13216244
> 
> 赞同：4
> 
> 时间：2012-11-04T05:10:25.700
> 
> 标签：javascript, validation

某些表单验证器会在某些输入字段上阻止`CTRL`+ `C`/ `CTRL`+ 。`V`是否有快速[书签](http://en.wikipedia.org/wiki/Bookmarklet)或可以让我正确使用键盘的东西。或者，也许浏览器允许我覆盖某些页面的那种粗鲁行为？

**编辑：**我正在寻找的是类似的解决方案，例如可用于通过在页面上下文中执行 javascript 片段来启用右键单击页面的解决方案：

```
javascript:void(document.oncontextmenu=null) 
```

到目前为止，我认为没有与 javascript 片段类似的解决方案，而不涉及像 Greasemonkey 这样的 3rd 方工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:55:00.073

这取决于它是如何完成的。此外，删除/禁用事件侦听器总是有风险的，您可能会严重损害站点的功能 - 而且您永远不知道处理程序是做坏事还是好事，至少您根本不知道是否有处理程序。

因此，我浏览了“javascript 防止复制粘贴”的前几个 Google 结果，发现大部分是愚蠢的脚本：[禁用将文本粘贴到 HTML 表单](https://stackoverflow.com/q/1226574/1048572)中，[防止复制、剪切和粘贴到 HTML 输入文本字段](http://sumtips.com/2011/11/prevent-copy-cut-paste-text-field.html)中，[不工作示例](http://www.boogiejack.com/no_copy_paste.html)。那么脚本现在可以做什么：

*   删除输入元素的所有 on-copy、-paste、-input、-cut、-drag 等属性
*   在文档上捕获这些事件类型并停止它们的传播，因此（气泡）处理程序将永远不会被调用并且不能阻止默认操作

然而，正如已经说过的，这并不能阻碍一切。[该解决方案](https://stackoverflow.com/a/1723838/1048572)`input`巧妙地使用了该事件，以防止一次插入多个字符。因此，您需要决定是否要停止该事件并可能破坏应用程序。

```
var evts = ["copy", "paste", "cut", "drag", "selectionstart?", "input?", …?];
var els = [document, document.body].concat(
  [].slice.call(document.getElementsByTagName("input")),
  [].slice.call(document.getElementsByTagName("textarea"))
);
function trap(e) { e.stopPropagation(); }
for (var i=0; i<evts.length; i++) {
    var evt = "on"+evts[i].charAt(0).toUpperCase()+evts[i].substr(1);
    for (var j=0; j<els.length; j++)
        els[j][evt] = null; // remove handler
    document.addEventListener(evts[i], trap, true); // capture phase
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-14T22:54:40.690

Windows 上的另一个解决方案：[AutoHotkey](https://www.autohotkey.com/)。

```
SendRaw, %Clipboard% 
```

例如，以下绑定到 ctrl+F3 以键入剪贴板内容。只需将它放在一个名为的文件中`typeclipboard.ahk`并使用 AutoHotkey 运行它：

```
^F3::SendRaw, %Clipboard% 
```

# html - 在 div 内滚动，不影响主滚动条？

> ID：13216246
> 
> 赞同：0
> 
> 时间：2012-11-04T05:10:36.523
> 
> 标签：html

我有一个带有垂直滚动条的 div，带有一个主窗口滚动条。当我在 div 内滚动并到达滚动的末尾时，它将影响主滚动条。

是否可以将 div 中的任何滚动设置为不影响主滚动条？

哦，最好的部分是，我使用的是 facebook 画布，这意味着我无法访问主滚动条。

# ios - 使用现有表格视图中的 Kal 日历和 popToRootViewController 不起作用

> ID：13216249
> 
> 赞同：1
> 
> 时间：2012-11-04T05:11:48.583
> 
> 标签：ios, popviewcontroller

我正在尝试在我的项目中使用 Kal 日历。到目前为止，这是我所理解的情况：

*   无论哪个视图控制器调用 Kal 都必须实现 UITableViewDelegate 方法“didSelectRowAtPath”

问题：

*   我调用 Kal 的视图控制器*已经*有一个现有的 tableview（其中一个单元格会调用 Kal）

为了解决这个问题，我尝试从我的主表视图中的一个单元格推送一个中间视图控制器，如下所示：

```
ScheduleViewController *svc = [[ScheduleViewController alloc] init];
[svc setTitle:@"Schedule"];
[self.navigationController pushViewController:svc animated:YES]; 
```

从 ScheduleViewController 的 viewDidLoad，我推送实际的 Kal 日历：

```
KalViewController *kal = [[KalViewController alloc] init];
[kal setDelegate:self];
[kal setTitle:@"Schedule"];
[self.navigationController pushViewController:kal animated:NO]; 
```

所以一旦我这样做了，我就可以让日历显示出来。但是，我似乎无法使用返回按钮干净地返回主菜单。我在 ScheduleViewController 中创建了一个后退按钮：

```
[kal.navigationItem
setBackBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:@"Back"
                                                     style:UIBarButtonItemStyleBordered
                                                    target:self
                                                    action:@selector(test)]]; 
```

我已经把它放在几个不同的地方（viewDidLoad、viewWillAppear）并且无法让它工作。当我单击“返回”时，它仍然会转到 ScheduleViewController 而不是一直返回。“测试”永远不会被调用。我已经尝试过 popToRootViewController、[[self.presentingViewController presentingViewController]dismissViewController] 和其他一些。就是不想工作。

*   这是使用 Kal 的最佳方式吗？
*   如何使用此方法 popToRootViewController（跳过 ScheduleViewController）？

谢谢！这是我的第一篇文章，所以如果我能做些什么来让这个问题不那么混乱，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:35:25.700

好吧，我想终于明白了。我最终删除了中间视图控制器。我想我只是不明白之前发生了什么......我现在做了以下事情：

*   而不是我的主视图控制器（w/现有的 tableview）作为委托，我让 KalDataSource 也成为 UITableViewDelegate。所以我的 DataSource 处理填充日历和选择事件。

*   在主视图控制器中添加了 id 数据源，如 ivar 中的

*   将“didSelectRowAtPath”方法更改为：

    dataSource = [[EventsDataSource alloc] init];

    KalViewController *kal = [[KalViewController alloc] init]; [kal setDelegate:dataSource]; [kal setDataSource:dataSource]; [kal setTitle:@"Schedule"]; [self.navigationController pushViewController:kal 动画:YES];

现在一切*似乎*都很好。

# ruby-on-rails - Active Record has_many：通过删除一条关联记录

> ID：13216251
> 
> 赞同：45
> 
> 时间：2012-11-04T05:12:33.557
> 
> 标签：ruby-on-rails, activerecord, has-many-through

这对我来说可能是一个非常基本的疏忽，但我似乎想不起一个简单的方法来删除两个通过`has_many :through`. IE：

```
class Photo
  has_many :tags, :through => :taggings
  has_many :taggings, :dependent => :destroy
end

class Tags
  has_many :photos, :through => :taggings
  has_many :taggings, :dependent => :destroy
end

class Taggings
  belongs_to :photo
  belongs_to :tag
end 
```

如果您有两个对象`tag`和`photo`，您可以通过这样做来关联它们：

```
photo.tags << tag 
```

那么，是否有一个同样简单的反面？IE：

```
photo.tags.remove tag 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-04T11:07:42.620

这就是你想要的：

```
photo.tags.delete(tag) 
```

# python - 从数据库中提取链接（URL） -

> ID：13216254
> 
> 赞同：0
> 
> 时间：2012-11-04T05:13:10.253
> 
> 标签：python, database, url, hyperlink, extract

我需要从数据库中提取所有链接（URL）。无论是使用 SQL 语句还是 Python，我如何才能仅从表中提取链接？

有时没有链接，有时 1 个，有时超过 1 个。

举个例子：

数据库名称 (dbase) 表：id (int) col1（包含 URL 的文本） col2（包含 URL 的文本） col3（包含 URL 的文本） col4（包含 URL 的文本）

col1、col2、col3 和 col4 包含文本和 URL。（想象一封包含 URL 的电子邮件）

我想创建一个新的 coloum 名称，例如名称 (URL_found)，以便在 col1、col2、col3 和 col4 中找到所有 URL。

例子

在 col1 有你好，你好，这是一个测试[http://www.example.com/somewhereelse/some/](http://www.example.com/somewhereelse/some/where) 如果你买这个我会给你一个免费的表格

关于如何做到这一点的任何想法？

谢谢 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:17:30.067

这是一个广泛的问题，所以这里是一个广泛的建议。您可能需要使用 python 客户端遍历表中的记录，并使用正则表达式或其他一些 python 解析库解析每列中的字符串以获取有效 url。

一旦找到列或记录的匹配项，您*可以*将它们设置为另一列`URL_found`，并在 url 之间使用某种分隔符......但是创建一个新的数据库表似乎更有用，例如`URL_found`与记录的外键关系这个原始表。

# asp.net-mvc - MVC3 DropDownListFor不选择保存的值

> ID：13216260
> 
> 赞同：0
> 
> 时间：2012-11-04T05:15:05.570
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在显示用户列表。每个用户记录都有一个 TrainingEvent 对象属性（从许多 TrainingEvent 中选择）。我创建了一个视图模型来包含用户列表和 TrainingEvents 列表。

**视图模型：**

```
public class RegistrationViewModel
{
  public IEnumerable<Domain.Entities.User> Users { get; set; }
  public IEnumerable<SelectListItem> TrainingEvents { get; set; }
} 
```

*（注意：Domain.Entities.User 包含一个 TrainingEvent 对象属性）*

**控制器：**

```
public ActionResult Dealership(int id)
{
  var model = new RegistrationViewModel
    {
      Users = repository.Find
             .Where(u => u.Dealer.DealerId == id).OrderBy(u => u.LastName),
                 TrainingEvents = repository.TrainingEvents.ToList()
                                  .Select(x => new SelectListItem
                                          {
                                            Text = x.Date.ToString() + " - " + x.LocationName,
                                            Value = x.TrainingEventId.ToString()
                                          })
    };

  return View("East", model);
} 
```

**视图中的绑定：**

```
@foreach(Company.Domain.Entities.User usr in Model.Users)
  {
     <tr>
         <td>@usr.LastName</td>
         <td>@usr.FirstName</td>
         <td>@usr.JobDescription</td>
         <td>@Html.DropDownListFor(m => m.Users.FirstOrDefault(u => u.UserId == usr.UserId).TrainingEvent, Model.TrainingEvents)</td>
     </tr>
} 
```

列出了用户，并且每个用户行都有一个填充有 TrainingEvents 的下拉列表。但是，之前保存在用户的 TrainingEvent 对象中的值未被选中。任何想法为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:47:03.083

您错误地使用了`DropDownListFor`帮助程序。这个助手期望作为第一个参数传递一个简单的 lambda 表达式，最多包含一个成员访问。`FirstOrDefault`在您的示例中，您正在尝试使用不受支持的扩展方法之类的东西来构造一些复杂的 lambda 表达式。此外，从模型中获取一些数据也不是视图的责任。控制器有责任为视图填充合适的视图模型并将其传递给消费

因此，我建议您使用反映视图要求的真实视图模型：

```
public class UserViewModel
{
    public int TrainingEventId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string JobDescription { get; set; }
}

public class RegistrationViewModel
{
    public IList<UserViewModel> Users { get; set; }
    public IEnumerable<SelectListItem> TrainingEvents { get; set; }
} 
```

这将在您的控制器操作中填充：

```
public ActionResult Dealership(int id)
{
    var users = repository
        .Find
        .Where(u => u.Dealer.DealerId == id)
        .OrderBy(u => u.LastName)
        .Select(u => new UserViewModel
        {
            TrainingEventId = u.TrainingEvent.TrainingEventId,
            FirstName = u.FirstName,
            LastName = u.LastName,
            JobDescription = u.JobDescription
        })
        .ToList();

    var trainingEvents = repository
        .TrainingEvents
        .ToList()
        .Select(x => new SelectListItem
        {
            Text = x.Date.ToString() + " - " + x.LocationName,
            Value = x.TrainingEventId.ToString()
        });

    var model = new RegistrationViewModel
    {
        TrainingEventIds = TrainingEventIds,
        TrainingEvents = trainingEvents
    };

    return View("East", model);
} 
```

最后在您的视图中将`DropDownListFor`助手绑定到视图模型中的相应值：

```
@for(var i = 0 ; i < Model.TrainingEventIds; i++)
{
    <tr>
        <td>@Html.DisplayFor(m => m.Users[i].LastName)</td>
        <td>@Html.DisplayFor(m => m.Users[i].FirstName)</td>
        <td>@Html.DisplayFor(m => m.Users[i].JobDescription)</td>
        <td>
            @Html.DropDownListFor(
                m => m.Users[i].TrainingEventId, 
                Model.TrainingEvents
            )
        </td>
    </tr>
} 
```

# php - 不带变量的 pdo 插入

> ID：13216261
> 
> 赞同：1
> 
> 时间：2012-11-04T05:15:31.817
> 
> 标签：php, mysql, pdo

我正在尝试使用以下代码将新记录插入仅包含自动编号主键的表中，

```
$pdo_conn = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
$sqla = "insert into tbl_gen (gen_sk) values (null)";
$qa = $pdo_conn->prepare($sqla);
$qa->execute(); 
```

这是正确的方法吗？在 mysql workbench 中运行 sql 命令可以完成这项工作，我只是觉得我可能以错误的方式使用 pdo。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:18:40.747

准备好的语句旨在被重复使用。如果您只是做一个简单的一次性查询，请`$pdo->exec()`改用。这避免了准备语句的开销，而只是简单地“执行”。

但无论如何，你的处理方式并没有什么“错误”。

# android - android中两种日期时间格式之间的区别？

> ID：13216263
> 
> 赞同：3
> 
> 时间：2012-11-04T05:16:13.633
> 
> 标签：android, datetime-format, android-datepicker

由于我是 android 开发的新手，我无法找到用于计算两种日期时间格式之间差异的代码。我的问题是。

我在我的项目中使用网络服务，我得到如下日期时间响应..

```
 starttime  :- [2012-11-04 10:00:00]
 endtime    :- [2012-11-04 12:00:00] 
```

在这里我想在屏幕上显示为

```
 Today Timings  :-  2012-11-04   2 hours 
```

意味着需要计算两个日期之间的差异，并且需要在屏幕上显示时间差异。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:55:00.340

鉴于您知道获取日期时间对象的确切格式，您可以使用 Android 中的[SimpleDateFormat 类](http://developer.android.com/reference/java/text/SimpleDateFormat.html)，它允许您将字符串解析为给定字符串中表示的日期格式的日期。对于您的问题：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date startTime = sdf.parse(<startTime/endTime String>, 0); 
```

同样解析您的结束时间，然后可以使用各个对象的 getTime() 获得差异。

```
long diff = endTime.getTime() - startTime.getTime() 
```

然后就像使用以下方法将差异转换为小时一样简单：

```
int hours = (int)(diff/(60*60*1000)); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-09T13:24:26.523

# *java.time*

**使用`java.time`现代 API 的解决方案：**

```
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.time.temporal.ChronoUnit;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("u-M-d H:m:s", Locale.ENGLISH);
        LocalDateTime startTime = LocalDateTime.parse("2012-11-04 10:00:00", dtf);
        LocalDateTime endTime = LocalDateTime.parse("2012-11-04 12:00:00", dtf);
        long hours = ChronoUnit.HOURS.between(startTime, endTime);
        System.out.println(hours);
    }
} 
```

**输出：**

```
2 
```

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:00:30.420

如果你正在使用`java.util.Date;`，你将不得不使用一个中间变量。您可以将日期转换为`long`值并减去这些值，然后将您的 long 转换回日期。

```
 long diff = new Date().getTime() - new Date(milliseconds).getTime();
    Date dateDiff = new Date(diff); 
```

但是应该警告您，它不考虑夏令时和其他任何变量。如果你那么谨慎，你可能会沉迷于这个[替换日期课程。](http://joda-time.sourceforge.net/)它具有您寻求的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-14T07:24:48.320

我使用此代码来获取两个日期的差异。

```
public void getTimeDifference(Date endDate,Date startDate) {
            Date diff = new Date(endDate.getTime() - startDate.getTime());
            Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
            calendar.setTime(diff);
            int day=calendar.get(Calendar.DAY_OF_MONTH);
            int hours = calendar.get(Calendar.HOUR_OF_DAY);
            }
        } 
```

# sql-server - SQL Server 2012 中序列的使用

> ID：13216265
> 
> 赞同：7
> 
> 时间：2012-11-04T05:16:28.993
> 
> 标签：sql-server, sql-server-2012

我有`SQL Server 2012`并且我想知道序列的用途是什么。我寻找一个示例来解释序列的用法。

**编辑**

我知道在数据库中创建和使用序列。我想知道使用序列的实际场景是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T06:05:06.000

```
CREATE SEQUENCE dbo.OrderIDs
    AS INT
    MINVALUE 1
    NO MAXVALUE
    START WITH 1;

SELECT NextOrderID = NEXT VALUE FOR dbo.OrderIDs
UNION ALL     SELECT NEXT VALUE FOR dbo.OrderIDs
UNION ALL     SELECT NEXT VALUE FOR dbo.OrderIDs; 
```

结果：

```
NextOrderID
-----------
1
2
3 
```

有关原始来源和更多示例，请参见[此处](https://sqlblog.org/2010/11/11/sql-server-v-next-denali-using-sequence)。该页面指的是 SQL Server Denali，它是 SQL 2012 的测试版，但语法仍然相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-01T21:53:08.887

我利用 SEQUENCE 命令的方法之一是在 ASP/C# 详细信息视图页面中获取参考编号（例如）。我使用 detailsview 将请求输入到数据库中，并且 SEQUENCE 命令用作每个请求的请求/票证号。我将初始序列命令设置为以特定数字开头，并为每个请求增加 1。

如果我在 gridview 中显示这些请求，我会显示 SEQUENCE 参考编号，但不要让它们可编辑。当记录与数据库中的其他字段相似时，它非常适合作为参考编号。当客户对给定数据库中的特定条目有疑问时，它也非常适合他们。这样，无论其余信息是否相同，每个条目都有一个唯一编号。

以下是我通常如何利用 SEQUENCE 命令：

```
CREATE SEQUENCE blah.deblah
     START WITH 1
     INCREMENT BY 1
     NO CYCLE
     NO CACHE 
```

简而言之，我从 #1 开始我的序列（你可以选择任何你想开始的数字），它以 1 为增量向上计数。当序列号达到系统最大数量时，我不会循环它们。

# c# - SQL Server 数据库中数据类型 nchar 的问题

> ID：13216267
> 
> 赞同：4
> 
> 时间：2012-11-04T05:17:08.127
> 
> 标签：c#, sql-server, sqldatatypes

我正在使用 SQL Server 2008、Visual Web Developer 2012 和 .net 4.0。我在 SQL Server 中创建了一个表并向其中添加了一些列。我给了一些列 datatype `nchar(10)`。

现在我的问题是，当我插入少于 10 个字符的字符串作为列类型`nchar(10)`的值时，当我获取该值时，它会插入空格以完成 10 个字符的字符串。

意味着如果我插入`"a"`type 列`nchar(10)`，那么当我再次获取该值时，我会返回：`"a "`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:35:11.363

您可以这样做来修剪空格：

```
SELECT RTRIM(CAST(col As NVARCHAR(10))) FROM test 
```

查看***[SQLFIDDLE](http://sqlfiddle.com/#!3/7b697/8)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T07:55:43.200

定义字符串，因为 `nvarchar(10)`它可以正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T05:29:06.670

如果您不想更改数据类型，则需要从输出中修剪空间

```
SELECT
   RTRIM("a      ") AS ColumnName
FROM MyTable 
```

但这意味着每次您在使用该列的每个地方都必须这样做。最好使用 VARCHAR(10) 或 NVARCHAR(20) 其中 VAR... 表示可变长度。因此，如果您的字符串不超过 10 个字符，则不会添加空格

最终的 SQL

```
SELECT
   RTRIM(ColumnName) AS ColumnName
FROM myTable 
```

# selenium - 为 Selenium 脚本中的下一个测试用例恢复当前部分

> ID：13216268
> 
> 赞同：0
> 
> 时间：2012-11-04T05:17:27.320
> 
> 标签：selenium, nunit, selenium-webdriver

我正在使用 selwnium 网络驱动程序。当我使用 selenium 和 nunit 运行我的测试用例时，我发现每次测试用例启动时都会打开一个新页面，完成后新页面将被破坏。因此，我必须在每个测试用例中打开新页面并登录。

我想让我的测试用例共享一个网页，以便它们可以按顺序执行。

是硒限制，还是实现它的一种方式？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:45:50.260

尝试在您的内部声明`Webdriver`实例变量并仅初始化一次。您的行为是因为不同的 webdriver 实例不共享相同的，因此您必须始终登录到所需的页面。`static``test class``session`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:00:37.543

您可能使用`@Before , @After`注释。尝试`@BeforeClass, @AfterClass` 改用。例如：

```
....
static WebDriver driver;
@BeforeClass
    public static void firefoxSetUp() throws MalformedURLException {

        driver = new FirefoxDriver();  

        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
        driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);
        driver.manage().window().setSize(new Dimension(1920, 1080));
    }
    @Before
    public void homePageRefresh() throws IOException {
        driver.manage().deleteAllCookies();
        driver.get(propertyKeysLoader("login.base.url"));
    }

    @AfterClass
    public static void closeFirefox(){
        driver.quit();
    }
..... 
```

# javascript - 如何使用引导弹出框的“实时”功能？

> ID：13216270
> 
> 赞同：5
> 
> 时间：2012-11-04T05:17:40.763
> 
> 标签：javascript, twitter-bootstrap

在过去，bootstrap 的弹出框有一个“实时”选项，它允许我们`$('.myclass').popover({live: true})`在 DOM 元素存在之前进行调用。我查看了 2.2 的文档，这似乎已经消失了。有什么新方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T12:56:25.267

不再使用实时模式。

Bootstrap JS 插件现在通过 jQuery [.on 方法](http://api.jquery.com/on/)使用委托事件。您可以提供一个事件委托目标选择器，该选择器指向一个可能存在也可能不存在的元素。

```
$('.some-container').popover({
  selector: '.has-popover'
}); 
```

生成带有弹出框的 DOM 元素的工作示例：http: [//jsfiddle.net/asKF9/](http://jsfiddle.net/asKF9/)

# java - 我使用 int 编写了一个简单的因式分解程序。将其转换为 BigInteger（相同的结构！）不起作用！为什么不？

> ID：13216280
> 
> 赞同：1
> 
> 时间：2012-11-04T05:20:09.200
> 
> 标签：java, biginteger

编译时我没有收到错误，但它实际上并不是 FACTOR！但是，它会打印我放在那里的“测试”行，以确保它完全运行。这是代码：

```
 import java.math.BigInteger;

public class test {   
public static void main(String[] Args) {

System.out.println("Testing");

BigInteger a=BigInteger.valueOf(99);
BigInteger i=BigInteger.valueOf(1);

while (i.compareTo(a) < 0 ) {

  if ((a.mod(i)) == BigInteger.ZERO) {
  System.out.println(i);
  i=i.add(BigInteger.ONE);}

  else {i=i.add(BigInteger.ONE);}
 }
  }
} 
```

这不适用于家庭作业；我是一个试图分解大于 64 位的东西的书呆子！我在大学里学的是 VB 而不是 Java，所以在今天之前我没有使用过 BigInteger。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:30:22.260

我尝试运行您在 OpenJDK 7 上提供的确切代码并得到以下输出：

```
Testing
1
3
9
11
33 
```

可能是您的 JRE 的 BigInteger 实现为零创建了 BigIntegers 的新实例，而不是重新使用现有`BigInteger.ZERO`实例。您应该使用`.equals()`而不是`==`比较对象；即使您有两个零实例，这也应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:37:17.950

我也强烈建议不要循环遍历整个`BigInteger a`. 相反，您应该只循环该值的一半，因为对于任何数字*N*，*N* /2 是最大可能的因素。更优化的代码变成：

```
BigInteger maxFactor = a.divide(new BigInteger("2"));
while (i.compareTo(maxFactor) <= 0 ) {
  if ((a.mod(i)).equals(BigInteger.ZERO))
    System.out.println(i);
  i=i.add(BigInteger.ONE);
} 
```

您可以通过一些数论对其进行更多优化，但我无法真正帮助您。

# algorithm - 在 Letterpress iOS 游戏中生成字母的合理算法是什么？

> ID：13216281
> 
> 赞同：6
> 
> 时间：2012-11-04T05:20:25.833
> 
> 标签：algorithm

我最近一直在玩[Letterpress](https://itunes.apple.com/us/app/letterpress-word-game/id526619424)。

游戏的目的几乎是通过从板上的字母中拼出单词来获得尽可能多的蓝色瓷砖。当你玩你的单词时，组成单词的字母会变成蓝色，除非字母被红色瓷砖包围。

一个普通的凸版板看起来像这样：

![](../Images/868187d4ed7350717e5272949ede607b.png)

我意识到棋盘上的字母必须按照某种规则生成，否则用一些棋盘玩游戏真的很难。我只能想到必须有多个元音的规则。我想知道是否还有其他规则。

此外，我想知道这是否类似于生成[Boggle](http://en.wikipedia.org/wiki/Boggle)骰子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-22T11:19:42.237

我决定根据 user166390 的建议编写一个解决方案。您看到的频率是英语的，取自维基百科。运行该程序几次，只是观察结果，它们对我来说看起来很可玩。我一般至少能找到几个四个或五个字母的单词，而且我什至不太擅长游戏！无论如何，这是代码：

```
#!/usr/bin/env python

from random import random
from bisect import bisect_left

letters = [c for c in "abcdefghijklmnopqrstuvwxyz"]
frequencies = [8.167, 1.492, 2.782, 4.253, 12.702, 2.228, 2.015, 6.094, 6.966,
               0.153, 0.772, 4.025, 2.406, 6.749, 7.507, 1.929, 0.095, 5.987,
               6.327, 9.056, 2.758, 0.978, 2.360, 0.150, 1.974, 0.074]

cumulative_frequencies = [sum(frequencies[0:i+1]) for i in xrange(len(frequencies))]

for i in xrange(5):
    line = ""
    for j in xrange(5):
        line += letters[bisect_left(cumulative_frequencies, random() * cumulative_frequencies[-1])] + " "
    print line 
```

这个想法是，对于要生成的每个字母，使用[轮盘赌算法](https://stackoverflow.com/a/17250703/1872981)以与给定频率成比例的概率随机选择它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T09:38:18.760

我听说开发者 Loren Brichter 谈到了它，我有点记不清在哪里了。我想是在 Guy Ritchie 的 Debug 播客上，但我不确定。我记得几件事。

他保证至少有一定数量的元音。

辅音与元音分开生成。这意味着单独的字母分布。

他自己分析了游戏背后的字典，得出了字母分布。

如果选择 Q，则保证 I，因此 Q 总是可能出现单词。

我经常玩。我从来没有因为任何原因结束游戏，但所有字母都被使用了。我不知道是否可以保证每个字母总是可以使用一个单词，但即使没有强制执行，它似乎也确实是真的。

# java - 多输入和分组比较器

> ID：13216284
> 
> 赞同：0
> 
> 时间：2012-11-04T05:21:14.473
> 
> 标签：java, hadoop, mapreduce, distributed-computing, hdfs

我有两个来源的输入：

1.  以表格形式输出地图，

    ```
    output.collect(new StockKey(Text(x+" "+id), new Text(id2)), new Text(data)); 
    ```

2.  以表格形式输出地图，

    ```
    output.collect(new StockKey(new Text(x+" "+id), new Text(1), new Text(data)); 
    ```

工作配置：

```
 conf.setPartitionerClass(CustomPartitioner.class);
 conf.setValueGroupingComparatorClass(StockKeyGroupingComparator.class); 
```

其中 StockKey 是 format 的自定义类`(new Text(), new Text())`；

构造函数：

```
public StockKey(){
    this.symbol = new Text();
    this.timestamp = new Text();
} 
```

分组比较器：

```
public class StockKeyGroupingComparator extends WritableComparator {

    protected StockKeyGroupingComparator() {
        super(StockKey.class, true);
    }  

    public int compare(WritableComparable w1, WritableComparable w2){
        StockKey k1 = (StockKey)w1;
        StockKey k2 = (StockKey)w2;

        Text x1 = new Text(k1.getSymbol());
        Text x2 = new Text(k2.getSymbol());

        return x1.compareTo(x2);

    }

} 
```

但我没有从输入接收地图输出值

我只得到地图输出值到达减速器。我希望将两个地图输出中共有的符号 viz 的记录`new Text(x+" "+id)`分组到同一个 reducer。我在这里感到震惊。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:46:44.157

为此，您需要一个适合如下的分区器：

1.  您的映射器将一堆记录作为键/值对输出
2.  对于每条记录，partitioner 都会被传递 key、value 和 reducer 的数量。分区器决定哪个减速器将处理记录
3.  记录被运送到各自的分区（reducer）
4.  运行 GroupingComparator 来决定哪些键值对被分组到一个迭代器中，以便对 reducer() 方法的单个调用
5.  等等...

我认为默认分区器是根据您的键的整个值（这是默认行为）为每条记录选择减速器分区。但是您希望仅按部分键（仅符号而不是符号和时间戳）对记录进行分组。因此，您需要编写一个分区器来执行此操作并在驱动程序类中指定/配置它。

一旦你这样做了，你对比较器进行分组应该有助于按照你的意图对记录进行分组。

编辑：随机想法

*   如果您将时间戳移到值上，您可能会让事情变得更容易，使键简单（只是符号）和值复杂（时间戳和值）。那么你就不需要分区器或分组比较器了。
*   你没有说任何一种方式，但你确实使用了 MultipleInputs 类，对吧？这是为同一作业调用两个或多个映射器的唯一方法。

# html - iOS6 中 iPhone 和 iPad 问题的 Html5 视频标签内联

> ID：13216285
> 
> 赞同：8
> 
> 时间：2012-11-04T05:21:17.580
> 
> 标签：html, video, inline

难道就没有办法了吗？我有一个网站想要建立使用视频作为背景，iPad 运行完美，但 iPhone 不是。

然后我发现问题是 iPhone safari 默认全屏处理内联 html5 视频，有人说它可以通过 webkit-playsinline 选项的 html5 设置覆盖，但我尝试并没有解决问题。

我还找到了这个链接： [HTML5 video player behavior on iPhone and iPod in Safari Web Apps](https://stackoverflow.com/questions/5438520/html5-video-player-behavior-on-iphone-and-ipod-in-safari-web-apps)

答案说即使使用 webkit-playsinline 也无法更改行为。

是真的吗？如果是的话，有没有办法在 iPhone 中制作内嵌视频？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:46:26.087

使用 iPad，您可以在 Objective-C 中禁用 inlineMediaPlaybackRequiresUserInput 以获取 Web 视图。

在 iPhone 上，Apple 根本不允许这个选项，所以你在 iPhone 上不知所措。

解决方法有点老派，但您可以使用动画 gif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T05:19:03.210

*您可以通过浏览*视频而不是实际播放视频来模拟播放来解决此问题`.play()`。

我编写了一个模块，负责播放视频并将其与音频同步（但它也适用于没有音轨的视频）：[iphone-inline-video](https://github.com/bfred-it/iphone-inline-video)

请记住，这仍然需要“触摸”才能启动，因此它不会`autoplay`像在桌面上那样。

# php - PHP PDO插入失败导致无限循环

> ID：13216289
> 
> 赞同：0
> 
> 时间：2012-11-04T05:23:06.267
> 
> 标签：php, pdo

以下似乎产生了一个无限循环，但我似乎可以弄清楚为什么它不起作用。我知道插入不起作用，但我不知道为什么。我已经在 phpmyadmin 中尝试了查询，它工作正常。

```
function generate_cart_id($dbh) {

        //generate cart_id and check against assigned_carts to make sure it's unique
        $ip=$_SERVER['REMOTE_ADDR'];
        $stmt=$dbh->prepare("insert into assigned_carts (cart_id,ip,date) values (:cart_id,:ip,now())");
        $stmt->bindValue(':ip',$ip, PDO::PARAM_STR);
        do {
                $cart_id=mt_rand(100000000,9999999999);
                $stmt->bindValue(':cart_id',$cart_id, PDO::PARAM_INT);
        }
        while ($stmt->execute()==false);
        return $cart_id;
} 
```

**这就是我最后想出的。**

```
function generate_cart_id($dbh) {   
    $ip=$_SERVER['REMOTE_ADDR'];
    $stmt=$dbh->prepare("INSERT INTO assigned_carts (cart_id,ip,date) Value ((select * from (SELECT FLOOR(100000000 + RAND() * 899999999) as ar From assigned_carts where 'ar' NOT IN (Select cart_id FROM assigned_carts) LIMIT 1) as x) ,:ip,now())");
    $stmt->bindValue(':ip',$ip, PDO::PARAM_STR);

    try {
        $stmt->execute();
        $id=$dbh->lastInsertID(); //You cannot retreive a randomly generated id with last id. Only an autoincremented one so I added that and used a select to get the random one.
        $row=$dbh->query("select cart_id from assigned_carts where id=$id")->fetch();

        return $row['cart_id'];
    }
    catch(PDOException $e){
        // do something
        return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:25:53.787

尝试类似的东西

```
if ($stmt->execute()) {
    // Query succeeded.
} else {
    // Query failed.
    $errorcode = $stmt->errorCode();
} 
```

或者

```
if ($sql->execute === false) {    //false on error
     var_dump($sql->errorinfo();  //array containing information on error
     die()
} 
```

**最好**尝试类似的东西

```
function getData($db) {
   $stmt = $db->query("SELECT * FROM table");
   return $stmt->fetchAll(PDO::FETCH_ASSOC);
}

//then much later
try {
   getData($db);
} catch(PDOException $ex) {
   //handle me.
} 
```

**好读**

[**MySQL 开发人员的 PDO 教程**](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:40:05.110

这不是一个严格基于 PDO 的解决方案，但您可以尝试以下方法：

```
// grab list of all cart_id ids
$qry = 'SELECT cart_id FROM assigned_carts'
      .' WHERE cart_id >= 100000000 && cart_id <= 9999999999';
$all_cart_ids = $dbh->exec($qry);

// generate a random number that's not in that list
while($cart_id === NULL || in_array($cart_id, $all_cart_ids)){
    $cart_id=mt_rand(100000000,9999999999);
}

// insert
$stmt=$dbh->prepare("INSERT INTO assigned_carts (cart_id,ip,date) VALUES (:cart_id,:ip,now())");
$stmt->bindValue(':ip',$ip, PDO::PARAM_STR);
$stmt->bindValue(':cart_id',$cart_id, PDO::PARAM_INT);
try {
    $stmt->execute();
    return $cart_id;
}
catch(PDOException $e){
    // do something
    return -1;
} 
```

# gwt - GWT RequestFactory：是否可以将假实体从客户端发送到服务器？

> ID：13216290
> 
> 赞同：0
> 
> 时间：2012-11-04T05:23:22.587
> 
> 标签：gwt, requestfactory

我使用 GWT 2.5rc2 请求工厂和 GAE1.7，服务器端使用实体定位器从数据存储加载实体。

“假”实体是指从未存储在数据存储中的实体，仅用于将实体对象从服务器传输到客户端，反之亦然。

现在我有一个从服务器发送到客户端的假实体是可以的，但是从客户端到服务器端定位器会抛出异常，因为它找不到 ID，如果我为假实体设置一个随机 ID，它会给出异常：`The requested entity is not available on the server`

有关如何解决此问题或任何解决方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:57:57.677

您可以使用容器`ValueProxy`并嵌入`EntityProxy`对象。
像这样的东西：

```
@ProxyFor(AccountPage.class)
public interface AccountPageProxy extends ValueProxy  {
    public List<AccountProxy> getAccounts();
    int getNumber();
    long getTotalElements();
    int getTotalPages();
}

@ProxyFor(...)
public interface AccountProxy extends EntityProxy {

} 
```

例如，我使用这种方法将列表的页面（开始，结束）传输`EntityProxy`到客户端（参见上面的示例）。

# php - PDO 错误消息 1064

> ID：13216293
> 
> 赞同：-1
> 
> 时间：2012-11-04T05:24:40.980
> 
> 标签：php, mysql, pdo

我无法让它工作我将包括工作和我想要完成的代码。在第一个代码中它不起作用并给我一条错误消息：`Connection failed: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':userName AND`密码`=:userPass' at line 1` 我尝试了几种不同的语法组合，但仍然没有运气。在第二个代码示例中，它是工作代码，基本上我试图摆脱所有不必要的代码，以便`$row`从函数中获取计数，以验证是否有 1 行与查询匹配。

```
function checkLogin($conn,$myusername, $mypassword) {

       $stmt = $conn->prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name`= :userName AND `password`= :userPass');
       $stmt->bindValue(':userName', $myusername);
       $stmt->bindValue(':userPass', $mypassword);
       $stmt->execute();
       $count = $stmt->fetchColumn();
       return $count;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:53:52.997

```
function checkLogin($conn,$myusername, $mypassword) {

           $stmt = $conn->prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name`= :userName AND `password`= :userPass');
           $stmt->bindValue(':userName', $myusername);
           $stmt->bindValue(':userPass', $mypassword);
           $stmt->execute();
           $count = $stmt->fetchColumn();
           return $count;
    } 
```

# java - 引号内定义的字符数组？

> ID：13216296
> 
> 赞同：0
> 
> 时间：2012-11-04T05:25:34.740
> 
> 标签：java, string

我从这里得到了这个示例代码：

[http://www.tutorialspoint.com/java/java_string_copyvalueof.htm](http://www.tutorialspoint.com/java/java_string_copyvalueof.htm)

```
public class Test{
   public static void main(String args[]){
      char[] Str1 = "This is really not immutable!!";
      String Str2;

      Str2 = copyValueOf( Str1 );
      System.out.println("Returned String " + Str2);

      Str2 = copyValueOf( Str1, 5, 10 );
      System.out.println("Returned String " + Str2);

   }
} 
```

这段代码对我不起作用。

1.  字符数组定义为字符串。
2.  copyValueOf 无法识别！

现在我把它改成这样：

```
 char[] Str1 = {'t','o','o','k'};
      String Str2;

      Str2 = copyValueOf( Str1 );
      System.out.println("Returned String " + Str2);

      Str2 = copyValueOf( Str1, 5, 10 );
      System.out.println("Returned String " + Str2); 
```

仍然 copyValueOf 不起作用？我已经检查过这个方法，它存在于文档中！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T05:27:35.923

1.  与 C 不同，`char[]`is 不是 a `String`，反之亦然。
2.  您需要指定类：

    ```
    Str2 = String.copyValueOf( Str1 ); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T05:29:25.547

您可能缺少代码中的[静态导入](http://en.wikipedia.org/wiki/Static_import)。将此添加到文件的顶部：

```
import static java.lang.String.copyValueOf; 
```

或者，您可以（[也许应该](http://www.javapractices.com/topic/TopicAction.do?Id=195)）明确指定类。因为[`copyValueOf`是一个静态成员，`String`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#copyValueOf%28char%5B%5D%29)它看起来像这样：

```
String.copyValueOf(Str1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T05:31:11.363

以下是问题：

*   您不能通过字符串分配 char 数组。它们在 Java 中是不同的。您可以查看[Post: Converting String to Character array in Java](https://stackoverflow.com/questions/10006165/converting-string-to-character-array-in-java)作为示例。
*   您应该使用`String.copyValueOf()`它，因为它是`String`.

# c# - 获取班级成员的姓名

> ID：13216299
> 
> 赞同：0
> 
> 时间：2012-11-04T05:26:07.380
> 
> 标签：c#

我有一堂课，里面`Trigger`有一些类型的成员`SimpleAction`：

```
public SimpleAction OnOver;
public SimpleAction OnOut;
public SimpleAction OnDown;
public SimpleAction OnUp;
public SimpleAction OnClick;
public SimpleAction OnHold; 
```

现在，从另一个班级我正在这样做：

```
MemberInfo[] members = triggerScript.GetType().GetMembers();
    foreach (MemberInfo item in members) {
            Debug.Log(item.Name);
    } 
```

`Trigger`在日志按摩中，我可以看到所有班级成员的姓名列表。OnOver、OnOut atc 也在该列表中。但是我怎样才能将 type 成员`SimpleAction`与其他成员区分开来呢？ `item.DeclaringType`tham的类型`Trigger` `item.MemberType`是“字段”。 `item.ReflectedType`也是`Trigger`。 **如何获取`SimpleAction`类型的成员列表？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:37:09.507

使用方法，然后使用is`GetFields`过滤字段`FieldType``SimpleAction`

```
 FieldInfo[] fields = triggerScript.GetType()
            .GetFields(BindingFlags.Public | BindingFlags.Instance)
            .Where(field => field.FieldType == typeof (SimpleAction))
            .ToArray();

 foreach (var field in fields)
 {

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:33:10.057

使用 GetFields 而不是 GetMembers，然后您可以根据 .FieldType == typeof(SimpleAction) 进行过滤。

# php - PHP背景图片颜色

> ID：13216300
> 
> 赞同：0
> 
> 时间：2012-11-04T05:26:09.653
> 
> 标签：php, web-services, web

我是 PHP 新手，我正在尝试从服务器上的 JPEG 图像中删除颜色。理想情况下，我希望能够去除图像中除黑色或灰色之外的所有颜色。我已经在下面发布了我到目前为止所做的代码，但它不起作用（或者它正在工作但我没有正确显示它）。当我运行代码时，我的屏幕上什么也没有。到目前为止，这是我的 index.php 文件中的所有代码：

```
$my_image='Photo.jpg';
header('Content-Type: image/jpeg');

$img = imagecreatefromjpeg($my_image); 
$color = imagecolorallocate($img, 255, 255, 255);
imagecolortransparent($img, $color);
imagejpeg($my_image, null); 
```

有人可以告诉我如何解决我的问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:09:16.107

你有几个问题：

*   `imagecreatefromstring`不从文件加载图像，而是采用包含*图像数据*的字符串。[`imagecreatefromjpeg`](http://www.php.net/manual/en/function.imagecreatefromjpeg.php)将从文件加载。
*   要将页面显示为图像，您必须发送正确的标题。例如，`header('Content-Type: image/jpeg');`
*   `imagejpeg`输出图像。返回值只是它是否成功。查看[文档中的示例。](http://us2.php.net/manual/en/function.imagejpeg.php)

* * *

要删除不是黑色/灰色/白色的每种颜色，您可能必须单独检查每个像素，如下所示：

```
<?php
header('Content-type: image/jpeg');
$image = imagecreatefromjpeg('file.jpg');

$white = imagecolorallocate($image, 255, 255, 255);

for($x = 0; $x < imagesx($image); $x++) {
   for($y = 0; $y < imagesy($image); $y++) {
      $pixel = imagecolorat($image, $x, $y);
      if(!isGray($pixel))
         imagesetpixel($image, $x, $y, $white);
   }
}

imagejpeg($image);

function isGray($pix) {
   $r = ($pix >> 16) & 0xFF;
   $g = ($pix >> 8) & 0xFF;
   $b = $pix & 0xFF;
   return ($r == $g) && ($g == $b);
}
?> 
```

由于您使用的是 JPG，我想不出更简单的方法。JPG 压缩过程产生的伪影会破坏纯色，因此简单地检查红色或蓝色是行不通的。

该代码改编自[https://stackoverflow.com/a/1607796/246847](https://stackoverflow.com/a/1607796/246847)。

# json - 使用 JSON / HTTP / REST 接口查询 MongoDB

> ID：13216304
> 
> 赞同：5
> 
> 时间：2012-11-04T05:26:51.087
> 
> 标签：json, mongodb, rest, datetime

我正在构建一个 ASP.Net Web 应用程序并希望从 MongoDB（远程托管）访问数据。我的任何文件都看起来像这样（已确保 Utc 字段的索引）；

```
{ 
   "_id" : { "$oid" : "509501393e8785025c10bc21" }, 
   "Index" : 1,
   "Url" : "http:...", 
   "CameraId" : 123,  
   "Utc" : { "$date" : 1351955858006 } 
} 
```

考虑到用户端的性能，我想以最大速度获取这些数据。我尝试过的一个选项是通过 Page.aspx 上的 JSON 调用本地 Web 服务，它使用 MongoDB C# 驱动程序来查询两个日期（Utc）之间的文档。这可行，但似乎使用 Web 服务会在请求/响应周期中增加一些额外的毫秒数（使用 db.foo.findOne() 对单个文档的请求平均在 1.3 秒内提供服务）。该集合中的平均文档数为 50,000，将增加到 30,00,000。

我的问题是：

1.  我是否正确地说使用 Web 服务会在请求/响应周期中增加一些延迟（毫秒）？（因为 MongoDB 实际上需要几毫秒才能完成查询）
2.  第二种选择是使用 MongoDB 的[HTTP/REST 接口](http://www.mongodb.org/display/DOCS/Http+Interface)。这样我可能会避免使用 Web 服务并直接查询 MongoDB。在这里我需要你的意见，
    *   有没有办法使用 HTTP/REST 在两个日期之间查询 MongoDB？
    *   有没有办法使用 HTTP/REST 使用 '>' 和 '<' 条件查询 MongoDB？
    *   从安全的角度来看，直接在 Page.aspx 上访问 DB 看起来如何？
3.  上述模式的任何其他查询替代或优化？

我的相关问题在[这里](https://stackoverflow.com/questions/13207217/having-large-number-of-collections-in-mongodb-need-schema-design-suggestions)。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:19:52.177

MongoDB 的原生 HTTP 接口不是为查询而构建的。你应该继续做你正在做的事情。此外，出于安全目的，您的 MongoDB 服务器不应公开公开，并且您应该始终像当前一样通过中间层。

# c - 打印 2D 数组打印垃圾（Magic Square）

> ID：13216309
> 
> 赞同：0
> 
> 时间：2012-11-04T05:27:58.107
> 
> 标签：c, arrays, magic-square

我正在尝试编写一个 C 程序来打印一个幻方。但是，我在构建广场时遇到了错误。任何人都可以帮助找出导致这些错误的原因吗？以下是我的相关代码和我的输出：

代码：

```
 int main(void) {
      int size = 0;
      int r, c;
      int i = 1;

      printf("What is the size of the square: ");
      scanf("%d", &size);

      int square[size][size];
      int range = size * size;
      r = 0;
      c = size/2;

      do {
          square[r][c] = i;

          i++;
          r--;
          c++;

          if ((r == -1) && (c == size)) {
              r = r + 2;
              c--;
          } else if (r == -1) {
              r = size - 1;
          } else if (c == size) {
              c = 0;
          } else if (square[r][c] != 0) {
              r = r + 2;
              c--;
          }
      } while (i < range);

      for (r = 0; r < size; r++) {
          for (c = 0; c < size; c++) {
              printf("%d \t", square[r][c]);
          }
          printf("\n");
      }

      return 0;
  } 
```

输出：

```
What is the size of the square: 3
-4196312        1       0
3       -4196352        -13339222
4       -13360148       2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:30:10.850

函数范围内的所有变量都未初始化为零。相反，它们被分配给一个随机值。

用这个：

```
int square[size][size] = {0}; 
```

您也可以使用`memset`or `calloc`，但这是最简单的。

* * *

**更正：**

列表初始值设定项不适用于可变大小数组。改用`memset`：

```
int square[size][size];
memset(square, 0, size * size * sizeof(int)); 
```

* * *

编辑：

整个工作代码

```
#include <stdio.h>
#include <string.h>

int main(void) {
    int size = 0;
    int r, c;
    int i = 1;

    printf("What is the size of the square: ");
    scanf("%d", &size);

    int square[size][size];
    memset(square, 0, size * size * sizeof(int));
    int range = size * size;
    r = 0;
    c = size/2;

    do {
        square[r][c] = i;

        i++;
        r--;
        c++;

        if ((r == -1) && (c == size)) {
            r = r + 2;
            c--;
        } else if (r == -1) {
            r = size - 1;
        } else if (c == size) {
            c = 0;
        } else if (square[r][c] != 0) {
            r = r + 2;
            c--;
        }
    } while (i < range);

    for (r = 0; r < size; r++) {
        for (c = 0; c < size; c++) {
            printf("%d \t", square[r][c]);
        }
        printf("\n");
    }

    return 0;
} 
```

# c# - 这种事件的使用会导致silverlight中的内存泄漏吗？

> ID：13216310
> 
> 赞同：0
> 
> 时间：2012-11-04T05:28:00.650
> 
> 标签：c#, silverlight, memory-leaks

我想知道这种事件的使用是否会导致 Silverlight 中的内存泄漏？

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    var test = new ChildWindow();
    EventHandler closedEvent = null;
    closedEvent =
        (s, args) =>
        {
            test.Closed -= closedEvent;
            if (test.DialogResult == true)
            {
                // something
            }
        };
    test.Closed += closedEvent;
    test.Show();
} 
```

我有十几个 Closed 事件的示例用法，它们是有线和泄漏的。只是想知道这个样本是否会消除内存泄漏？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:59:52.007

我没有看到任何内存泄漏的原因。在每个按钮上单击您分配新的 ChildWindow 对象，该对象将在方法结束后被丢弃，因为您不存储引用。Labda（它的对象也是）将在 ChildWindow 对象之后被垃圾。

# java - Hashmap 不适用于 int、char

> ID：13216314
> 
> 赞同：76
> 
> 时间：2012-11-04T05:29:36.903
> 
> 标签：java, hashmap

> **可能重复：**
> [在 Java 集合中存储原始值？](https://stackoverflow.com/questions/2504959/storing-primitive-values-in-a-java-collection)

在java中，当我使用以下内容时： -

```
public HashMap<char, int> buildMap(String letters)
{
    HashMap<char, int> checkSum = new HashMap<char, int>();

    for ( int i = 0; i < letters.length(); ++i )
    {
        checkSum.put(letters.charAt(i), primes[i]);
    }

    return checkSum;
} 
```

我收到与不适当类型有关的错误。我分别使用 Character 和 Integer 而不是 char 和 int 解决了我的问题。但是，我无法弄清楚为什么 HashMap 无法处理原始数据类型。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-11-04T05:32:16.907

泛型参数只能绑定引用类型，不能绑定原始类型，所以需要使用对应的包装类型。试试`HashMap<Character, Integer>`吧。

> 但是，我无法弄清楚为什么 HashMap 无法处理原始数据类型。

这是由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。Java 从一开始就没有泛型，所以 a`HashMap<Character, Integer>`真的是`HashMap<Object, Object>`. 编译器会进行一系列额外的检查和隐式转换，以确保您不会输入错误类型的值或输出错误类型，但在运行时只有一个`HashMap`类并且它存储对象。

其他语言“专门化”类型，因此在 C++ 中，a 与内部的 a`vector<bool>`非常不同`vector<my_class>`，它们不共享通用`vector<?>`的超类型。Java 定义了一些东西，因此 a`List<T>` [**是 a**](https://en.wikipedia.org/wiki/Is-a) `List`不管什么`T`是为了向后兼容预通用代码。这种向后兼容要求必须有一个用于泛型类型的所有参数化的单个实现类，这阻止了允许泛型参数绑定到基元的模板特化。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-04T05:33:43.440

泛型不能以关键字的形式使用原始类型。

利用

```
public HashMap<Character, Integer> buildMap(String letters)
{
    HashMap<Character, Integer> checkSum = new HashMap<Character, Integer>();

    for ( int i = 0; i < letters.length(); ++i )
    {
        checkSum.put(letters.charAt(i), primes[i]);
    }

    return checkSum;
} 
```

**更新：**在 Java 7 及更高版本中，您可以使用菱形运算符。

```
HashMap<Character, Integer> checkSum = new HashMap<>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T08:18:59.117

泛型只支持对象类型，不支持原语。与 C++ 模板不同，泛型不涉及代码生成，并且无论您使用多少泛型类型，都只有一个 HashMap 代码。

[Trove4J](http://trove.starlight-systems.com/)通过预先生成选定的集合来使用原语并支持[TCharIntHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TCharIntHashMap.html)`Map<Character, Integer>`来解决这个问题，如果需要的话可以包装它来支持。

> TCharIntHashMap：char 键和 int 值的开放寻址 Map 实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T05:32:52.333

Hashmaps 只能使用`classes`，不能`primitives`。这个来自programmerinterview.com 的[页面](http://www.programmerinterview.com/index.php/java-questions/difference-between-a-primitive-type-and-a-class-type/)可能有助于指导您找到答案。老实说，我自己并没有详细弄清楚这个问题的答案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-04T05:33:54.227

您不能将原始类型放入集合中。但是，只要装箱允许，您可以使用它们相应的对象包装器声明它们并仍然添加原始值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-04T05:34:33.127

泛型集合类不能与原语一起使用。请改用 Character 和 Integer 包装类。

`Map<Character , Integer > checkSum = new HashMap<Character, Integer>();`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-04T05:35:32.300

`Generics`只能使用`Wrapper`类来定义。如果您不想使用 Wrapper 类型进行定义，您可以使用下面的 Raw 定义

```
@SuppressWarnings("rawtypes")
public HashMap buildMap(String letters)
{
    HashMap checkSum = new HashMap();

    for ( int i = 0; i < letters.length(); ++i )
    {
       checkSum.put(letters.charAt(i), primes[i]);
    }
    return checkSum;
} 
```

或者使用包装类型定义 HashMap，并存储原始类型。**原始值将被提升为它们的包装器类型。**

```
public HashMap<Character, Integer> buildMap(String letters)
{
  HashMap<Character, Integer> checkSum = new HashMap<Character, Integer>();

  for ( int i = 0; i < letters.length(); ++i )
  {
    checkSum.put(letters.charAt(i), primes[i]);
  }
  return checkSum;
} 
```

# ios - 内存警告和崩溃，没有来自仪器或 xcode 的信息

> ID：13216328
> 
> 赞同：1
> 
> 时间：2012-11-04T05:31:19.760
> 
> 标签：ios, xcode, cocos2d-iphone

我正在运行一个 IOS Cocos2D 应用程序，它显示在内存泄漏工具上分配了大约 6 mb。在我反复改变场景之后，我累积了 2 或 3 个内存警告，然后 BOOM，我得到了斧头。奇怪的是，仪器显示没有泄漏，没有僵尸（启用）说什么，输出窗口不起眼。什么都没有，除了。. . 仪器总是冻结。

关于什么会导致这种行为的任何想法？

# invoice - jBilling 错误：无法生成发票

> ID：13216336
> 
> 赞同：2
> 
> 时间：2012-11-04T05:33:17.747
> 
> 标签：invoice

当我想为订单生成发票时，会显示以下错误：

**“出现错误：无法生成发票。采购订单没有任何适用的开票期限。请验证采购订单的数据或联系客服查看您的业务规则。”**

我禁用了 pro-rating，并为插件设置了以下设置：

发票演示 com.sapienter.jbilling.server.pluggableTask.InvoiceCompositionTask

计费流程：订单周期计算 com.sapienter.jbilling.server.pluggableTask.OrderPeriodTask

它还没有工作。任何想法？请尽快帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T08:24:39.563

当您创建订单时，您会在订单屏幕上看到提交的时间段，即一次或每月一次。

选择一次并尝试创建订单。如果您选择每月，则只会为该订单创建一张发票，因为它是经常性订单，然后下一个账单设置为下个月。

如果您想为同一订单再次创建发票，请尝试将开票流程管理到下一个发票日期或将下一个发票日期更新为采购订单表中的当前月份。

# php - 如果用户尚未登录，则停止加载 iframe 并重定向父窗口

> ID：13216337
> 
> 赞同：0
> 
> 时间：2012-11-04T05:33:30.740
> 
> 标签：php, iframe

我有一个网页，`Target PHP URL`当用户单击链接时，它可以在 IFRAME 灯箱中打开同一域中的一个。在目标 URL 内，如果“用户登录检查”失败，如何停止打开 IFRAME 并将父窗口重定向到登录页面？

或者更确切地说，仅当用户已登录时才打开 Iframe。否则，将父窗口重定向到登录页面。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:00:16.593

如果它是同一个域并且您不关心 JS 解决方案，如果用户未通过登录检查，您可以在 iframe 中提供这样的页面。

```
<html>
<head>
    <title>You are not logged in...</title>
</head>
<body onload="parent.location.href='REDIRECT_LOCATION'"></body>
</html> 
```

将 REDIRECT_LOCATION 替换为您希望父窗口重定向到的位置。

# javascript - 没有出现 document.execCommand 中的 InsertImage

> ID：13216338
> 
> 赞同：3
> 
> 时间：2012-11-04T05:33:39.867
> 
> 标签：javascript

我在 JavaScript 中创建了一个通过 document.execcommand 插入图像的函数：

```
function images() {
    var img = prompt ("Enter the image link", "");
    if (img != null) {
    lol.document.execCommand("insertImage", false, img);
    }
    }; 
```

即使在实时服务器上，图像也没有出现。它显示损坏的图像图标。所有浏览器都支持此代码。我的其他 execcommand 函数运行良好。

# github - 如何将我的游戏文件上传到我的 Github 帐户并允许人们在他们的浏览器上运行它？

> ID：13216339
> 
> 赞同：1
> 
> 时间：2012-11-04T05:33:41.550
> 
> 标签：github, publish

我制作了这个可以在浏览器上运行的棋盘游戏，我想将此文件上传到 github，并允许人们通过在 Github 上输入现有文件的 URL 来在浏览器上运行它。

我最终希望它有这样[的](http://starmelt.github.com/craftyjstut/samegame/4_polishing/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:30:44.583

该游戏发布在[GitHub Pages 上](http://pages.github.com/)。要为您的项目制作一个，只需遵循他们[方便的指南](https://help.github.com/articles/creating-pages-with-the-automatic-generator)。

要了解该`craftyjstut`项目是如何完成的，请查看[`gh-pages`其 GitHub 存储库上的分支](https://github.com/starmelt/craftyjstut/tree/gh-pages)。

# c# - 计算字母频率

> ID：13216344
> 
> 赞同：2
> 
> 时间：2012-11-04T05:34:40.320
> 
> 标签：c#, arrays, frequency, letter

我正在使用 StreamReader 将文本文件读入程序。我需要将字符串中每个字母的频率记录到一个数组中（其中索引 0 是 A，依此类推）。最简单的方法是什么？

编辑：我最初有这个，直到我意识到这是完全错误的。

```
int counter = 0;
int[] freq = new int[26]; // create frequency array

// counts frequency
while (counter < inValue.Length)
{
      int A = 65; // ASCII value for "A"
      char x = char.Parse(inValue.Substring(counter, 1)); // get individual characters from string
       int s = (int)x; // cast character to integer value

       if (s == A + counter)
             freq[counter]++;

             counter++;
 } 
```

其中 inValue 是 StreamReader 读入程序的文本文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T05:45:27.337

```
var freqs = File.ReadAllText("myfile.txt")
                    .Where(c => Char.IsLetter(c))
                    .GroupBy(c => c)
                    .ToDictionary(g => g.Key, g => g.Count()); 
```

这应该给你一个字符字典和它们的计数。

*更新：*

如果您想要不区分大小写的计数，只需更改 GroupBy：

```
.GroupBy(c => Char.ToUpper(c)) // instead of .GroupBy(c => c) 
```

在我看来，在这种情况下，字典比数组更好，因为“计数”所属的字符不仅仅是索引*所暗示的；*相反，它是一个*显式*键。这使查找更容易，因为您不必将字符转换为索引。此外，这使其在添加国际化支持时更​​加灵活。但是，如果您绝对需要一个数组，这是一个简单的更改：

```
var freqs = File.ReadAllText("myfile.txt")
                    .Where(c => Char.IsLetter(c))
                    .GroupBy(c => c)
                    .OrderBy(g => g.Key) 
                    .Select(g => g.Count())
                    .ToArray() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:38:48.960

你可以尝试这样的事情。这对我有用，但我没有使用 StreamReader：-

```
 int[] c = new int[(int)char.MaxValue];

string s = File.ReadAllText("text.txt");

foreach (char t in s)
{
    c[(int)t]++;
}

for (int i = 0; i < (int)char.MaxValue; i++)
{
    if (c[i] > 0 &&
    char.IsLetterOrDigit((char)i))
    {
    Console.WriteLine("Letter: {0}  Frequency: {1}",(char)i, c[i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:13:24.917

I spent quite a while to figure out this Linq which will result in the exact same array you want:

```
int[] occurance = File.ReadAllText("myfile.txt")
                  .Where(c => char.IsLetter(c))
                  .Select(c => (int)char.ToUpperInvariant(c) - 65)
                  .GroupBy(a => a)
                  .ToDictionary(a => a.Key, a => a.Count())
                  .OrderBy(a => a.Key)
                  .Select(a => a.Value)
                  .ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T06:01:09.200

假设您只想计算字母“A”到“Z”，对代码进行一些修改即可使其工作：

```
int counter = 0;
int[] freq = new int[26]; // create frequency array

// counts frequency
while (counter < inValue.Length)
{
    char c = invalue[counter];
    if (c >= 'A' && c <= 'Z')
    {
        ++freq[(int)c - 65]
    }
    ++counter;
} 
```

如果您还想计算小写字母，请将循环中的第一行更改为：

```
char c = char.ToUpper(invalue[counter]); 
```

# git - 从 Git 存储库中删除名称中带有撇号或引号的文件

> ID：13216349
> 
> 赞同：2
> 
> 时间：2012-11-04T05:35:32.613
> 
> 标签：git, filenames

> **可能重复：**
> [带有空格的 git rm 文件名](https://stackoverflow.com/questions/11855517/git-rm-file-name-with-space)

我有一个 Git 存储库，我正在尝试删除一个文件，但文件名中有一个单引号（或撇号）（`'`）。

例如，`git'hub.txt`

每次我尝试删除我键入的文件时：

```
git rm git'hub.txt 
```

它去了

```
git rm git'hub.txt

> 
```

等到我用另一个结束它`'`。

有没有办法在不这样做的情况下删除这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:14:06.543

与“[带空格的 git rm 文件名](https://stackoverflow.com/questions/11855517/git-rm-file-name-with-space)”不同的是，这一次，特殊字符是一个简单的引号。

简单的引号也称为**[强引号](https://stackoverflow.com/a/11429466/6309)**：它们防止字符具有特殊含义......除了单引号本身。

这就是为什么你需要逃离那个。

```
git rm 'git\'hub.txt' 
```

如果特殊字符是空格，则不需要转义：

```
git rm 'git hub.txt' 
```

# c# - 是否可以将马尔可夫链引导至某些关键字？

> ID：13216357
> 
> 赞同：2
> 
> 时间：2012-11-04T05:37:33.607
> 
> 标签：c#, algorithm, artificial-intelligence, markov-chains

我正在为 C# 中的软件工程课程编写聊天机器人。

我使用马尔可夫链生成文本，使用维基百科文章作为语料库。我希望它根据用户的输入以（至少稍微）智能的方式响应用户输入，但我不知道该怎么做。

我目前的想法是尝试从用户输入中提取关键字，然后使用这些关键字来指导句子生成。但是由于马尔可夫属性，关键字必须是句子中的第一个单词，这可能看起来很傻。同样，对于`n`订单链，我每次都必须从用户那里*准确提取关键字。* `n`

生成器的数据是一个字典，其中键是单词列表，值是单词列表以及权重，这取决于单词在键中单词之后出现的频率。就像：

```
{[word 1 , word 2 , ..., word n ]: [(word, weight), (word, weight), ...]}
```

它在命令行测试程序中工作，但我只是为`n`它生成的每一位文本提供一个单词种子。

我希望有某种方法可以使链更喜欢用户使用的附近单词，而不是使用`n`输入中的第一个/最后一个单词或`n`关键字或其他任何单词来播种。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:44:41.037

使您的聊天更智能的一种方法是从用户的输入中识别主题。假设你的马尔可夫大脑也适应不同的主题。然后为了构建你的答案，你可以参考下面的字典：

> {([word1, word2, ..., wordn], **topic** ): [(word, weight), (word, weight), ...]}

要查找主题，您可以从[WikipediaMiner](https://github.com/dnmilne/wikipediaminer)开始。例如，下面是`wikify`api 针对句子找到的主题及其相应的权重：

> 统计太难了。你有适合初学者的概率论教程吗？

```
[{'id': 23542, 'title': 'Probability theory', 'weight': 0.9257584778725553},
 {'id': 30746, 'title': 'Theory', 'weight': 0.7408577501980528},
 {'id': 22934, 'title': 'Probability', 'weight': 0.7089442931022307},
 {'id': 26685, 'title': 'Statistics', 'weight': 0.7024251356953044}] 
```

可能那些已识别的关键字也可以被视为种子。然而，问题的回答并不是那么简单。这种基于马尔可夫的句子生成根本没有理解问题的能力。它所能做的最好的就是提供相关的内容。只是我的2美分。

# proc - 如何读取 .pc 文件中的字符串

> ID：13216358
> 
> 赞同：1
> 
> 时间：2012-11-04T05:37:33.577
> 
> 标签：proc

我正在编写一个程序，将 c++ 中的数据库连接到一个扩展名为 .pcg 的文件中。我正在尝试输入姓名（名字和姓氏之间有空格）。我已将变量定义为 char name[40]。但 name 变量只存储名字，拒绝空格后面的部分。如何在名称变量中获取全名？我试过“字符串名称”。我正在使用 g++ 编译器，它给出了错误。

# java - 用于研究的 PageRank 实施

> ID：13216361
> 
> 赞同：3
> 
> 时间：2012-11-04T05:38:07.617
> 
> 标签：java, algorithm, graph-algorithm, pagerank

[在阅读了这个网站](http://www.ams.org/samplings/feature-column/fcarc-pagerank)的 PageRank 算法理论之后，我想玩一下它。我正在尝试在 Java 中实现这一点。我的意思是我想详细使用 PageRank（比如给出不同的权重等等）。为此，我需要构建超链接矩阵。如果我有 100 万个节点，那么我的超链接矩阵将是 100 万 x 100 万大小，这会导致此异常：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at WebGraph.main(WebGraph.java:6) 
```

如何在 Java 中实现 PageRank，有没有办法存储超链接矩阵？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T00:48:14.553

这是一篇了解 pagerank 的好文章。[我从这里](http://search.cpan.org/~kubina/Graph-Centrality-Pagerank/)实现了一个 Perl 版本以与[Textrank](http://search.cpan.org/~kubina/Text-Categorize-Textrank/)一起使用。但是，如果您只想了解 pagerank 以及文章中讨论的各个方面如何影响结果（阻尼因子、有向图或无向图等），我建议您在[R](http://www.r-project.org/)或[Octave](http://www.gnu.org/software/octave/)中运行实验。如果您想学习如何有效地实现它，那么最好从头开始编程，就像您正在做的那样。

大多数网络图（或网络）非常[稀疏](http://en.wikipedia.org/wiki/Sparse_matrix)，这意味着图的矩阵表示中的大多数条目为零。用于表示稀疏矩阵的常见数据结构是[hash-map](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)，其中不存储零值。例如，如果矩阵是

```
1, 0, 0
0, 0, 2,
0, 3, 0 
```

二维哈希映射将仅存储 hm(0,0)=1、hm(1,2)=2 和 hm(2,1)=3 的值。因此，在一个 1,000,000 x 1,000,000 的[网络图](http://www.springerlink.com/content/9nh2gmpxq7kx1bd8/)矩阵中，我预计只有几百万个值是非零的。如果每行平均只有 5 个非零值，则哈希映射将使用大约 5*(8+8+8)*10^6 字节 ~ 115mb 来存储它（8 用于左侧 int 索引，8 用于右侧 int索引，8 表示双精度值）。方阵将使用 8*10^6*10^6 ~ 7 TB。

在 Java 中实现有效的稀疏矩阵向量乘法并非易事，如果您不想花时间在算法的这方面，已经[实现了一些。](http://commons.apache.org/math/apidocs/org/apache/commons/math/linear/SparseRealMatrix.html)稀疏矩阵乘法是 pagerank 算法最难实现的方面，因此之后它变得更容易（也更有趣）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T06:04:13.910

Python`networkx`模块有一个很好的 pagerank 实现。它使用 scipy/numpy 来实现矩阵。以下关于 stackoverflow 的两个问题应该足以让您入门。

*   [加权边缘如何影响networkx中的PageRank？](https://stackoverflow.com/questions/9136539/how-to-weighted-edges-affect-pagerank-in-networkx)

*   [Networkx：pagerank、pagerank_numpy 和 pagerank_scipy 之间的区别？](https://stackoverflow.com/questions/13040548/networkx-differences-between-pagerank-pagerank-numpy-and-pagerank-scipy)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T11:10:16.660

几点建议：

*   使用 python，而不是 Java：python 是一种出色的原型设计语言，并且具有可用的稀疏矩阵（在 scipy 中）以及许多其他好东西。正如其他人所指出的，它也有一个 pagerank 实现。

*   并非将数据全部存储在内存中：任何类型的轻量级数据库都可以，例如 sqlite、hibernate、...

*   处理数据块：如果有一个大矩阵 NxN，将其分解为小块 MxM，其中 M 是 N 的一小部分，适合内存。结合稀疏矩阵，这使您可以处理非常大的 N（数亿到数十亿，具体取决于数据的稀疏程度）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T17:21:21.753

正如**Dan W**建议**的那样，尝试增加堆大小**。如果您从命令行运行 Java 应用程序，只需添加`-Xmx`具有所需堆大小的开关。假设您将 Java 代码编译成一个名为 的可运行 JAR 文件`pagerank.jar`，并且您希望将堆大小设置为 512 MB，您将发出以下命令：

```
java -jar -Xmx512m pagerank.jar 
```

**编辑：** 但这只有在你没有那么多“页面”的情况下才有效......一个 100 万 x 100 万的数组太大而无法放入你的 RAM（1 万亿次 * 64 位双精度值 = 7.27595761 TB）。您应该更改算法以从磁盘加载数据块，对其进行操作，然后将其存储回磁盘。

为此，您可以使用[Neo4j 之类的图形数据库。](http://en.wikipedia.org/wiki/Neo4j)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T17:31:27.287

PageRank 由 Google 使用“Pregel”BSP（实际上只是关键字）框架执行。

我记得[Apache Giraph](http://giraph.apache.org/)（另一个 Pregel），它在其基准包中包含一个 PageRank 版本。

[这是一个关于 Giraph 的视频](http://www.youtube.com/watch?v=3ZrqPEIPRe4)：这是一个介绍，它专门讨论了处理 PageRank。

如果这不起作用：

在 Java 中有一个 Pregel 的实现叫做[GoldenOrb](http://goldenorbos.org/index.html)。

PageRank 算法的伪代码在[这里](https://github.com/igrigorik/pregel)（在 Pregel 的不同实现上）。

您必须阅读 BSP 和 PageRank 来处理您拥有的数据大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T18:09:29.397

您不必存储整个 1000000x1000000 矩阵，因为大多数矩阵条目将为零。相反，您可以（例如）存储每行的非零条目列表，并编写矩阵函数以直接使用它，而无需将其扩展为完整矩阵。

这种压缩表示称为[稀疏矩阵](http://en.wikipedia.org/wiki/Sparse_matrix)格式，大多数矩阵库都有构建和使用稀疏矩阵的选项。

稀疏矩阵的一个缺点是，将它们中的两个相乘会得到一个稀疏得多的矩阵。但是，PageRank 算法的设计目的是让您不需要这样做：超链接矩阵是恒定的，并且只更新分数向量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T13:00:27.987

因为矩阵是稀疏的，所以您可以实现像 svd、pca、mds 或包含 svd 的 Lsi 这样的降维。有一个库可以实现这种称为 Jama 的过程。你可以在[这里找到](http://math.nist.gov/javanumerics/jama/)

# forms - modx 电子表格问题

> ID：13216365
> 
> 赞同：0
> 
> 时间：2012-11-04T05:39:54.403
> 
> 标签：forms, email, submit, modx, modx-evolution

某些表单值未出现在 eform 生成的电子邮件中：

```
 <input type="text" size="2" name="qty_item_5" id="qty_item_5" value="0"/>
   <label>Corsage $18</label><br />
   <input type="checkbox" name="item_5[]" value="white/ivory/cream" />
   <label>white/ivory/cream</label>
   <input type="checkbox" name="item_5[]" value="pink/cream " />
   <label>pink/cream</label>
   <input type="checkbox" name="item_5[]" value="red" />
   <label>red</label>
   <input type="hidden" name="price_item_5" id="price_item_5" value="18" />
   <input type="hidden" name="name_item_5" id="name_item_5" value="Garden Roses Corsage" />
   <span id="total_item_5"></span>
  </p>
  <label>Subtotal: $</label>
  <input type="text" name="subTotal" id="subTotal" value="" size="8" readonly="readonly" />
  <input type="hidden" name="Msg" value="" /> 
```

电子邮件的模板块：

```
<p>Order<br />
=====================================================================<br />
[+qty_item_5+] x [+name_item_5+] [+item_5+] - [+price_item_5+]<br />
<p>Subtotal: [+subTotal+]<br /> 
```

缺少的信息是：

*   item_5（复选框）
*   price_item_5（隐藏字段）
*   subTotal（jquery 生成并正确显示在屏幕上，即 qty_item5 * price_item_5）

所以只有“qty_item_5”（输入）、“name_item_5”（隐藏字段）出现在电子邮件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:36:32.510

看起来像一个 html 错误，您的复选框需要唯一的名称，因为 for 提交 item_5 的值，如果最后一个复选框为空，则值也是如此。如果您使用单选按钮类型，这可能会起作用。[如果您选中最后一个复选框〜它是否通过电子邮件发送？]

price_item_5 和 subTotal 当然看起来不错 - 我在您的代码中看不到任何会阻止它的东西。您是否在日志中发现任何错误？

# java - 不允许使用 java.nio.file.Files.setOwner()

> ID：13216366
> 
> 赞同：2
> 
> 时间：2012-11-04T05:39:59.087
> 
> 标签：java, file-permissions, file-attributes, java.nio.file

我正在用 Java 编写一个考勤程序以供课堂使用；我的目标是让学生将课程文件下载到他们的帐户（我们将在同一个网络上工作），然后使用他们的用户名和每天都会更改的密码运行它们。我的程序运行良好，但我遇到了一个似乎无法克服的错误。

*当它在任何一天第一次运行时，attend.java 将在我*帐户的指定目录中创建一个新的文本文件，然后将运行程序的用户名附加到文件中（目前它只是附加第一个参数程序到文件，但我希望修改它，使其更准确，没有人可以提供虚假的用户名），从而编制学生名单。

例如，运行：

```
>> java attend desadams cheesecake 
```

将使用给定的密码“cheesecake”，如果它与当天的密码匹配，则创建一个名为“（今天的日期）.txt”的新文本文件并将用户名“desadams”写入其中（如果它是当天第一次运行) 或者简单地将用户名“desadams”附加到预先存在的“（今天的日期）.txt”文件中。

我编写了自己的 createFile() 方法，该方法利用 java.nio.file 包创建具有自定义权限的文件：

```
 public static void createFile(File file) throws IOException{
    Path newFile = file.toPath();

    //create new file and set permissions
    /* For the purposes of this program, the new file (the attendance list) must readable and writable to everbody
     * in order for this program to work properly when run from their user, because this program both reads and modif\
ies.
     */
    Set<PosixFilePermission> perms = PosixFilePermissions.fromString("rwxrw-rw-");
    Files.createFile(newFile);
    Files.setPosixFilePermissions(newFile, perms);

    //set owner
    UserPrincipal owner = newFile.getFileSystem().getUserPrincipalLookupService().lookupPrincipalByName("desadams");
    Files.setOwner(newFile, owner);

    //set group
    GroupPrincipal group = newFile.getFileSystem().getUserPrincipalLookupService().lookupPrincipalByGroupName("studen\
ts");
    Files.getFileAttributeView(newFile, PosixFileAttributeView.class).setGroup(group);
  } 
```

我无法同时创建文件和设置权限，因为帐户的 umask 会碍事，所以我分两步完成，效果很好。

现在我们来解决我的问题：我可以从我自己的帐户编译和运行这个程序，但是为了从其他帐户运行它，我更改了 setOwner() 方法以使用任意用户名而不是我自己的用户名来更好地模拟从不同帐户运行程序的条件。它失败了。尝试将所有者设置为运行程序的人以外的任何人都会导致“操作不允许”错误。

我已经知道 UNIX 命令**chown**不起作用，因为没有一个网络帐户可以访问 root 帐户，但我没想到它会阻止 Java 做同样的事情，尽管我认为它确实有意义。

有没有办法解决这个问题？当然，最简单的方法是每天在其他人之前自己运行程序，以便使用我自己的用户名创建出勤文件，然后我不必担心确保将所有者设置为我的程序本身内的用户名；它总是会找到考勤文件，因此不必使用正确的文件属性创建它。但是，尽管这可能正是我所做的，但我想知道是否有人有建议如何在程序本身中设置所有者的解决方案。

谢谢，对不起，这是一个很长的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:54:17.910

如果用户是您系统上的 sudoers，您可以让他们这样做`sudo java attend desadams cheesecake`。但是，我希望他们不是 sudoers，因此您首先创建文件的解决方案可能是最好的解决方案。

# r - 基于 R 中的两个以上条件进行分配以重新分配向量的数据值

> ID：13216369
> 
> 赞同：1
> 
> 时间：2012-11-04T05:40:11.767
> 
> 标签：r, conditional

我有相当大的气象数据集，看起来像：

```
year  month day hour min sec temp RH Rad 
```

我需要将这一天转换为一年中的连续一天，例如：

*   1 月 1 日是第 0 天
*   2 月 1 日是第 31 天
*   3 月 1 日是第 59 天（非闰年）
*   4月1日是90，等等。

数据存储在数据框中，例如, `met_dat`等。`met_dat$year``met_dat$day`

我想根据月份分配 yd，即

```
if met_dat$month==0, /*this is the code for january*/
then 
met_dat$yd<-met_dat$day,

else if met_dat$month==1, /*this is the code for february*/
then
met_dat$yd<-met_dat$day+30

else if met_dat$month==2,
then
met_dat$yd<-met_dat$day+58

etc, for the remaining months. 
```

我尝试将 ifelse 语句嵌套为：

```
met_dat$yd<-ifelse( (met_dat$month==0),met_dat$yd<-met_dat$day,
           (ifelse( (met_dat$month==1), met_dat$yd<-met_dat$day+30,
              (ifelse( (met_dat$month==2), met_dat$yd<-met_dat$day+58, NA) ))) 
```

我的真实代码有 12 个月，但是 12 或 3 个月，这不起作用......它为met_dat$yd 分配了不正确的值，有时接近正确，但在所有月份都不会正确。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:13:12.453

You can convert your data to `Date` using `as.Date`, thus turning it into an integer representation. Then simply subtract an epoch (reference) date from each value. Like this:

```
x <- data.frame(
  year = 2012,
  month = c("Jan", "Jan", "Feb", "Mar", "Apr", "Apr"),
  day = c(1, 2, 1, 1, 1, 2)
)

xx <- with(x, as.Date(paste(year, month, day, sep="-"), format="%Y-%b-%d"))

xx
[1] "2012-01-01" "2012-01-02" "2012-02-01" "2012-03-01" "2012-04-01" "2012-04-02"

xx - as.Date("2012-01-01")
Time differences in days
[1]  0  1 31 60 91 92 
```

# c# - 将泛型对象转换回 C# 中的原始对象

> ID：13216370
> 
> 赞同：3
> 
> 时间：2012-11-04T05:40:19.743
> 
> 标签：c#, casting

我无法在 C# 中从泛型转换回原始对象

```
private static bool OpenForm<T>( )
{
    List<T> list = FormManager.GetListOfOpenForms<T>();
    if ( list.Count == 0 )
    {
        // not opened
        return false;
    }
    else
    {
        // opened
        foreach ( T f in list )
        {
            T ff = ( T ) Convert.ChangeType( f, typeof( T ) ); 
```

如果我输入 ff。智能感知会弹出几个方法和属性。

我怎么能在这里有一个变量，它公开 ff 的所有属性和方法

```
 }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T05:48:04.603

由于它是一个泛型方法，`T`实际上可以是任何类型，甚至是简单的`object`. `T`编译器——同样是智能感知引擎——直到运行时才知道是什么。请注意，这当然是您想要的行为，也是您首先使用泛型的原因。在这种情况下，使用静态类型，没有办法访问`T`反射之外的成员。

现在我相信您正在寻找的是一个约束，也就是说，所有`T`s 将*始终*属于某个基本类型。例如，如果所有`T`s 都将是`Form`s，则可以对方法施加约束，然后访问 的成员`Form`：

```
private static bool OpenForm<T>() where T : Form
{
    List<T> list = FormManager.GetListOfOpenForms<T>();
    if ( list.Count == 0 )
    {
        // not opened
        return false;
    }
    else
    {
        // opened
        foreach ( T f in list )
        {
            f.Text = "You found me!";
        }
    }
} 
```

请注意，我省略了从`T f`to的转换，`T ff`因为它什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:49:04.307

如果 T 具有某种公共基类（公共类型），请使用泛型约束，以便编译器知道至少 T 将支持公共类上的方法。 [http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

# windows - 如何使用 MS-DOS 命令模拟 curl？

> ID：13216371
> 
> 赞同：4
> 
> 时间：2012-11-04T05:40:20.130
> 
> 标签：windows, curl, command-line

我正在编写一个跨平台应用程序，教人们如何使用命令行。我想向他们展示如何打印出 URL 的 HTML 内容。通常，我会使用`curl`它，但 Windows 不附带此程序，我不希望我的用户必须安装任何额外的程序。

有没有办法使用内置的 MS-DOS 命令模拟 curl，也许发送一段 VBScript`wscript`进行评估？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T11:12:20.120

假设已安装 .net，您可以[将](http://devintelligence.com/2011/03/a-simple-way-to-run-c-code-from-bat-file/)c# 与批处理文件结合起来创建 wget.cmd：

```
/*
@echo off && cls

if '%2'=='' (
  echo usage: %0 url filename
  goto :eof
)

set WinDirNet=%WinDir%\Microsoft.NET\Framework
IF EXIST "%WinDirNet%\v2.0.50727\csc.exe" set csc="%WinDirNet%\v2.0.50727\csc.exe"
IF EXIST "%WinDirNet%\v3.5\csc.exe" set csc="%WinDirNet%\v3.5\csc.exe"
IF EXIST "%WinDirNet%\v4.0.30319\csc.exe" set csc="%WinDirNet%\v4.0.30319\csc.exe"
%csc% /nologo /out:"%~0.exe" %0
"%~0.exe" "%1" "%2"
del "%~0.exe"
goto :eof
*/

using System;
using System.Net;
using System.IO;

class MyWget
{
    static void Main(string[] args)
    {
        WebClient wc = new WebClient();
        wc.DownloadFile(args[0],args[1]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:29:59.150

用户在 Windows 上至少有两种可能性：

1）下载 curl-for-windows 构建（在[http://curl.haxx.se/download.html](http://curl.haxx.se/download.html)上搜索），其中一些作为单个 curl.exe 文件（或者可能带有一些 ssl dll），所以这样做不需要安装，你可以直接复制到 system32 或者添加到 PATH

2）安装powershell并使用相应的.net对象来做这件事： [http ://answers.oreilly.com/topic/2006-how-to-download-a-file-from-the-internet-with-windows-powershell /](http://answers.oreilly.com/topic/2006-how-to-download-a-file-from-the-internet-with-windows-powershell/)

# wordpress - 图像在我的 iPhone WordPress 移动主题上延伸

> ID：13216372
> 
> 赞同：0
> 
> 时间：2012-11-04T05:40:51.313
> 
> 标签：wordpress

我为我的基于 WordPress 的博客[http://www.windowswave.com](http://www.windowswave.com)安装了一个 iPhone 友好的移动主题。

博客文章图像在桌面浏览器上看起来很好，但在 iPhone 上却显得拉伸。

我很好奇是否有人知道这个问题的解决方案。我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T05:52:34.233

您需要使用 CSS 将`height: auto !important;`图片添加到您的博客文章中。发生的事情是移动主题将图像宽度限制为屏幕宽度的 100%，但没有相应地调整高度。

# c++ - OpenCV 多摄像头处理问题

> ID：13216373
> 
> 赞同：1
> 
> 时间：2012-11-04T05:41:25.837
> 
> 标签：c++, linux, opencv, ffmpeg, kubuntu

1）我在使用 OpenCV 处理两台罗技 c310 相机时遇到此错误（更新的 Kubuntu Linux）

VIDIOC_STREAMON：设备上没有剩余空间

整个错误日志如下

```
**IDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument**
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
**libv4l2: error turning on stream: No space left on device**
**VIDIOC_STREAMON: No space left on device**
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /home/rjdp/Computer_Vision/0_Installers/OpenCV-2.4.2/modules/core/src/array.cpp, line 2482
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/rjdp/Computer_Vision/0_Installers/OpenCV-2.4.2/modules/core/src/array.cpp:2482: error: (-206) Unrecognized or unsupported array type in function cvGetMat 
```

2) 仅在处理两台摄像机时才会发生，即使在默认的低分辨率 640x480 下也是如此。我仍然尝试将代码中的分辨率降低到 320x240，但这也不起作用。

3）我在这里和其他网站上搜索了很多其他帖子。这告诉我没有足够的 USB cam 带宽可用。所以我尝试在前面的 USB 中插入一个凸轮，在背面插入一个，但也失败了 :(

我的问题是：

> **是否有可能解决这个带宽/内存问题并在 opencv 2.4.2 上同时运行两个或多个摄像头？**OpenCV 使用**ffmpeg**来处理 I/O，所以我可以用一些 ffmpeg 命令告诉我的相机硬件以**压缩 MPEG 模式**而不是消耗带宽的正常模式来获取输入流。

代码如下：

```
#include "opencv2/opencv.hpp"
#include <stdio.h>
using namespace cv;

int main(int, char**)
{
    VideoCapture cap01(0); // open the default camera
    cap01.set(CV_CAP_PROP_FRAME_WIDTH,320);
    cap01.set(CV_CAP_PROP_FRAME_HEIGHT,240);
    //sleep(1);
    if(!cap01.isOpened())  // check if we succeeded
        return -1;
    namedWindow("Camera01",1);

    VideoCapture cap02(1); // open the default camera
    cap02.set(CV_CAP_PROP_FRAME_WIDTH,320);
    cap02.set(CV_CAP_PROP_FRAME_HEIGHT,240);
   if(!cap02.isOpened())  // check if we succeeded
        return -1;
    namedWindow("Camera02",1);

    for(;;)
    {
        Mat frame, frame_1;
        //Mat frame02;
        cap02 >> frame;
        imshow("Camera01", frame);
        if(waitKey(30) >= 0) break;
        Mat frame_1;
        cap02 >> frame_1; 
        imshow("Camera02", frame_1);
        if(waitKey(30) >= 0) break;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:50:20.127

使用 PCI USB 扩展卡为我解决了同样的问题，因为网络摄像头占用了 USB 总线上的所有可用带宽。使用 pci usb 扩展卡为您提供第二个 USB 总线，您可以连接第二个网络摄像头

# loops - .bat 文件中的无意循环

> ID：13216375
> 
> 赞同：1
> 
> 时间：2012-11-04T05:43:03.140
> 
> 标签：loops, batch-file, cmd

我的代码真的很简单，

```
 @echo off
    cd C:\UVA\
    set /p file= Enter Problem Number::
    %file%.exe < test.txt
    pause 
```

它所做的只是进入一个文件夹，在其中放置一些我正在处理的竞赛文件，并使用我保存到 test.txt 的测试条件运行它们。现在我正在尝试一些我知道就编码竞赛而言是“正确”的练习问题，这意味着没有无限循环并在输入完成时正确停止程序。但是当我运行这个文件时，无论如何都会出现无限循环。

我并不是在这里寻找一个“修复”，只是关于我可能忽略的东西的建议，或者一种确保输入文件只读一次的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:15:49.067

I'm not sure if this will help, but maybe you should use a `for` loop to read the data from test.txt, instead of `>` you could then just pass the arguments using the variable that is set from the `for` loop.

Example:

```
@echo off
cd C:\UVA\
set /p file= Enter Problem Number::
for /f "eol=; tokens=1" %%a in (test.txt) do set arg=%%a
%file%.exe %arg%
pause 
```

# charts - Google Chart API 错误“给定轴上的所有系列必须是相同的数据类型”

> ID：13216377
> 
> 赞同：34
> 
> 时间：2012-11-04T05:43:19.117
> 
> 标签：charts

![在此处输入图像描述](../Images/7ad26492b877540251e350aff9539d56.png)

我有使用 googlechart 的 LineGraph。该图是使用以下代码创建的

```
function drawChart() {
    var data = google.visualization.arrayToDataTable([ 

      ['Categegories', 'R1' , 'R2' , 'R3' , 'R4' , 'R5' , 'R6' ],

      ['A',          1,     4,       2,    4,       1,  null],

      ['D',          3,  null,    null,    7,    null,     1],

      ['G',          null,  null,    null,       8,    null,  null],

    ]);

    var options = {
      title: 'Graph',
      pointSize: 6,
      vAxis: {minValue:0, maxValue:10,gridlines:{count:6}},
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

现在令人惊讶的是，如果我删除数据行`['D', 3, null, null, 7, null, 1],`

它产生一个错误说*`All series on a given axis must be of the same data type`*

* * *

我已将代码减少到一行，但发现`null`值有问题

例如

```
['Category', 'R1' , 'R2' , 'R3' ],
['A',       2,  1,  1] 
```

它生成图表，而如果我`null`在数据中的任何位置添加值，即在 (2,1,1) 的位置，它不会..

等待一些关于设置某种处理`null`值的选项的专家指导......很奇怪，有些时候空值有效，有些时候无效.. :(

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-06T17:07:07.543

最后，我找到了解决问题的方法。我希望这会帮助许多像我一样的人。问题基本上是 arrayToDataTable 方法的限制。数据行在所有列中必须具有正确的类型。由于我们在行中有空值，API 要么假设该列的数据类型为空，要么抛出关于未获取有效数据类型的错误。要解决此问题，您必须切换到标准 DataTable 构造函数

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Year');
data.addColumn('number', 'Health (P)');
data.addColumn('number', 'Health (A)');
data.addColumn('number', 'Gender (P)');
data.addColumn('number', 'Gender (A)');
data.addColumn('number', 'Education (P)');
data.addColumn('number', 'Education (A)');
data.addColumn('number', 'Agriculture (P)');
data.addColumn('number', 'Agriculture (A)');
data.addColumn('number', 'Social protection (P)');
data.addColumn('number', 'Social protection (A)');
data.addColumn('number', 'Environment (P)');
data.addColumn('number', 'Environment (A)');
data.addColumn('number', 'Water/sanitation (P)');
data.addColumn('number', 'Water/sanitation (A)');
data.addRows([

    ['2008',81.06,null,1.32,null,94.68,0,13.41,null,30.36,null,19.78,null,36.87,null],
    ['2009',27.13,null,22.34,null,33.6,null,79.92,null,1.34,null,89.77,0,15.68,null],
    ['2010',104.89,0,14.61,null,33.46,null,30.29,null,22.28,null,107.81,null,1.39,null],
    ['2011',55,0,110.69,null,1.3,null,106.24,0,14.45,null,27.34,null,30.71,null],
    ['2012',29.96,null,27.88,null,44.77,null,133.83,null,1.31,null,105.01,null,17.83,null],
    ['2013',0,null,0,null,0,null,0,null,0,null,0,null,0,null]
]); 
```

从以下链接复制 [https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/2Jafk8PyjV4](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/2Jafk8PyjV4)

或者，您可以使用 arrayToDataTable() 在标题行中指定类型。有关更多信息，请参阅文档[https://developers.google.com/chart/interactive/docs/datatables_dataviews#arraytodatatable](https://developers.google.com/chart/interactive/docs/datatables_dataviews#arraytodatatable)

```
var data = google.visualization.arrayToDataTable([
      ['Categegories', {label: 'R1', type: 'number'} , {label: 'R2', type: 'number'} , {label: 'R3', type: 'number'} , {label: 'R4', type: 'number'} , {label: 'R5', type: 'number'} , {label: 'R6', type: 'number'} ],

      ['A',          1,     4,       2,    4,       1,  null],

      ['D',          3,  null,    null,    7,    null,     1],

      ['G',          null,  null,    null,       8,    null,  null],

    ]); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-10T14:51:41.097

我认为在标题行中指定类型将解决问题。

```
var data = google.visualization.arrayToDataTable([
['Category', {label: 'Return', type: 'number'}, {label: 'Risk', type: `enter code here`'number'}],
[1.5,  20, 50]
]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-11T15:12:29.837

对我来说，这个错误是由一个额外的列引起的，该列从未附加任何值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-09T00:20:04.110

我通过创建一个有两列字符串和一列数字的条形图得到了这个错误。我打算显示一个隐藏第二个字符串列但忘记的视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-11T23:25:05.333

我从 Google 表格创建图表时遇到了这个错误。**删除所有空列解决了这个问题。**不是什么大问题，但仍然很烦人。

# ruby-on-rails - ActiveRecord 如何将记录链接在一起？

> ID：13216378
> 
> 赞同：1
> 
> 时间：2012-11-04T05:43:23.293
> 
> 标签：ruby-on-rails, ruby, activerecord

因此，很难找到快速的答案。我在纯控制台应用程序中使用 ActiveRecord，并且我的课程设置如下：

```
class Owner < ActiveRecord::Base
has_many :profiles
end

class Profile < ActiveRecord::Base
has_many :lines
belongs_to :owner
end

class Line < ActiveRecord::Base
belongs_to :profiles
end 
```

现在通常我会做类似的事情..

```
Profile.create( :thing => "thing", :otherthing => "otherthing" ) 
```

AR 如何知道将此配置文件实例链接到所有者？那么数据库中已经存在的特定所有者呢？我该怎么说？我将如何一次完成所有链接？（线路，配置文件，所有者）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:54:00.250

阅读本文以了解基础知识。[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)。

# gwt - GWT：在 MVP 设计中，底层页面布局是否应该被视为视图？

> ID：13216380
> 
> 赞同：3
> 
> 时间：2012-11-04T05:44:10.240
> 
> 标签：gwt, mvp, uibuilder

我一直在关注 GWT MVP 教程（[https://developers.google.com/web-toolkit/articles/mvp-architecture-2](https://developers.google.com/web-toolkit/articles/mvp-architecture-2)），虽然这一切都很有意义，但我在从示例中获取它时遇到了一些麻烦他们向更大规模的应用程序解释。

特别是，我想使用 DockLayoutPanel 来拥有单独的导航、内容和标题部分。我正在努力解决的主要问题是：主停靠面板在哪里？它是与它自己关联的演示者的视图吗？它是否构成我不想使用视图的特殊情况，因为这实际上只是基本的页面布局？

从以前遇到过类似问题的人那里获得一些实用的见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:08:33.943

好吧，我认为这取决于。

但我建议创建一个`View` （即*MainPageView*）与它自己的关联`Presenter`（即*MainPagePresenter*），即使几乎没有业务逻辑并且`View`只定义应用程序的布局。
也许将来会有一些业务逻辑。
例如，如果您想向用户显示警报或通知弹出窗口，您可能会在此`View`.
因此，您`MainPagePresenter`将在全局上侦听 Notification 事件`EventBus`，一旦从任何嵌套触发事件`Presenter`，它将在`MainPageView`.

另一个用例是如果您想在北面板中显示面包屑。
当然，您可以`Presenter`为面包屑创建一个单独的文件，但恕我直言，这太过分了。但是，您可以在`MainPagePresenter`

我使用[GWTP](http://code.google.com/p/gwt-platform/)作为我的 MVP 框架，创建 View/Presenter 对非常简单，它还支持嵌套`PresenterWidgets`，例如可以嵌入到您的任何面板中`DockLayoutPanel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:17:06.413

在搜索了相关内容之后，我偶然发现了另一个线程，它提出了一个类似的问题并且对我很有见地： [GWT MVP - 维护多个彼此分开的显示器](https://stackoverflow.com/questions/5879640/gwt-mvp-maintaining-multiple-displays-that-are-separate-of-one-another)

# mvvm - 使用可移植类库绑定到 MVVM 应用程序的方法

> ID：13216385
> 
> 赞同：0
> 
> 时间：2012-11-04T05:45:27.273
> 
> 标签：mvvm, portable-class-library

我正在尝试将应用程序的核心移植到可移植类库，但似乎没有绑定支持。

我正在尝试将 ViewModel 上的属性绑定到我的模型，该模型由 ObservableDictionary ( `INotifyPropertyChanged, INotifyCollectionChanged, IDictionary<string, string>`) 组成。我通常（使用 WP7）在初始化视图模型时使用以下代码来执行此操作：

`SetBinding(MyProperty, new Binding(string.Format("MyDictionary[{0}]", "thekey")) { Source = MyModel });`

使用 Portable Class Libraries 时，我将如何处理这个问题，而 Binding 类似乎不可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:52:01.227

我通过将 ViewModel 的基类连接到 ViewModel 的 PropertyChanged 事件和 ObservableDictionary 的 NotifyCollectionChanged 事件来实现这一点。然后我有一个方法（带有一组重载，用于额外提供作为 IValueConverter 的副本的 IPclValueConverter 的实现），它添加到 PclBinding 对象的集合中，该对象是一组 PropertyInfo、字典键、IPclValueConverter 和转换器参数.

在 PropertyChanged/NotifyCollectionChanged 中，我检查是否应该更新绑定，如果是，则执行更新，如果存在则通过转换器传递值。

这意味着从我的原始示例中，我现在在 ViewModel 中编写以下内容，它会根据需要创建绑定：

`SetBinding(() => MyProperty, "theKey");`

如果有人真的对此代码感兴趣，我很乐意将其发布。:)

# php - 将自定义页面文件添加到菜单中

> ID：13216386
> 
> 赞同：0
> 
> 时间：2012-11-04T05:46:05.813
> 
> 标签：php

好的，我有一个名为，

```
page-allpost.php 
```

现在我有一个名为“所有帖子”的菜单项，在该菜单中我想调用 page-allpost.php，它将显示所有帖子。怎么做？

希望这里有人可以提供帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:17:08.750

OK, i just add a name to my template header and then link it to the custom page and then add the page into the menu and thats it, everything work as i expected.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:48:15.863

你可以这样做

`include('file path')`或者`include_once('file path')`

或`require('file path')`或`require_once('file path')`

include 和 require 的区别

> 不同的是，如果我们使用 require_once() 则要添加的文件应该存在于给定路径中，否则将显示致命错误。如果我们使用 include_once 则不会因此而产生更多问题，如果存在没有这样的文件。如果我们需要包含一个文件，那么我们会更喜欢 include_once() 因为它会包含一次文件，如果之前包含它就不会包含该文件

使用时需要或包含

> 与 include() 不同，require() 将始终读取目标文件，即使它所在的行从不执行。如果要有条件地包含文件，请使用 include()。条件语句不会影响 require()。但是，如果出现 require() 的那一行没有被执行，那么目标文件中的任何代码都不会被执行。

# c++ - 无法将字符串传递给我的类函数

> ID：13216393
> 
> 赞同：0
> 
> 时间：2012-11-04T05:47:16.807
> 
> 标签：c++, sdl

我有一个具有此功能的课程：

```
void Render(SDL_Surface *source,SDL_Surface *destination,string img)
{
    SDL_Rect offset;
    offset.x = m_x;
    offset.y = m_y;
    source = IMG_Load(img);
    offset.w = source->w;
    offset.h = source->h;    
} 
```

出于某种原因，即使`include <string>`在头文件的顶部，它也不允许这样做。我得到：

```
Identifier, "string" is undefined. 
```

我在我的主文件中传递这样的数据：

```
btn_quit.Render(menu,screen,"button.png"); 
```

当我执行时，我得到：

```
'Button::Render' : function does not take 3 arguments 
```

但是这个网站说`string`的是数据类型的正确语法（在底部）：[http ://www.cplusplus.com/doc/tutorial/variables/](http://www.cplusplus.com/doc/tutorial/variables/)

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:53:12.887

我可能会建议您将渲染功能更改为以下：

```
void Render(SDL_Surface *source,SDL_Surface *destination,const std::string& img)
{
    SDL_Rect offset;
    offset.x = m_x;
    offset.y = m_y;
    source = IMG_Load(img.c_str());
    offset.w = source->w;
    offset.h = source->h;    
} 
```

1.  使用 std::string 代替字符串
2.  传递 img 引用而不是按值传递
3.  从 IMG_Load(img) 更改；到 IMG_Load(img.c_str());

# jquery - jQuery ajax 似乎改变了发送到coldfusion服务器的SVG数据

> ID：13216397
> 
> 赞同：1
> 
> 时间：2012-11-04T05:48:16.443
> 
> 标签：jquery, ajax, coldfusion, svg, batik

我正在使用 $.ajax() 将字符串发送到存储在表中的冷融合服务器。当我稍后查询并尝试使用该数据时，我得到一个错误；“空封闭异常：3 字节 UTF-8 序列的字节 2 无效”。

首先，我从 DOM 中获取 SVG 并将其发送到操作页面。它应该只是一个字符串，对吧？

```
var lclSVG = $('#myDiv')[0].innerHTML; // SVG Code (XML?)
$.ajax({
  url: "myAction.cfm",
  type: "POST",
  data: ({myInfo: lclSVG}),
}); 
```

在 myAction.cfm 页面上，我将数据更新到一个表中。

```
<CFQUERY NAME="postSVG">
  UPDATE myTable
  SET svg = '#form.myInfo#' 
  WHERE  ID = 1
</CFQUERY> 
```

SVG2PNG.cfm：当我尝试查询和使用 svg 数据时，我收到错误“3 字节 UTF-8 序列的字节 2 无效”。错误发生在 .transcode 行。

```
<CFQUERY NAME="getSVG">
  SELECT svg
  FROM myTable
  WHERE  ordID = 1
</CFQUERY>
<cfset svg = getSVG.svg>
<cfscript>
  transcoder = createObject("java", "org.apache.batik.transcoder.image.PNGTranscoder").init();
  inputStream = createObject("java", "java.io.StringBufferInputStream").init(svg);
  input = createObject("java", "org.apache.batik.transcoder.TranscoderInput").init(inputStream);
  OutFile = expandPath("myTest2.png");
  outputStream=CreateObject("java", "java.io.FileOutputStream").init(OutFile);
  output=CreateObject("java", "org.apache.batik.transcoder.TranscoderOutput").init(outputStream);
  transcoder.transcode(input, output);
  outputStream.close();
</cfscript> 
```

我已经多次使用 jQuery 的 ajax 方法，没有太大的困难。我在这里做错了什么，我似乎无法处理它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:05:28.353

我没有使用您使用的框架，但是您设置`svg`变量的行是否应该使用`getSVG`查询？

```
<cfset svg = getSVG.svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:32:55.860

几件事：

1.  我假设您将 SVG 存储在 UTF-8 兼容字段中？
2.  在从 DOM 中获取 SVG 并在发布之前，您能否确认 SVG 是正确的？
3.  在您的 ColdFusion 管理员中，转到您的数据源设置并单击“显示高级设置”。确保选中标记为“为配置为非拉丁字符的数据源启用高位 ASCII 字符和 Unicode”的框。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-04T06:54:08.547

我一直在研究和完善这个问题，并缩小了问题的范围。我已经发布了好吧，这并不能真正回答我的问题（不是 $.ajax() 修复），但它确实解决了问题......我没有使用 jQuery ajax() 来传递 svg 代码，而是创建了一个 css-hidden div 中包含一个表单和一个 iFrame。我使用 jQuery 代码将 ID 和 svg 加载到隐藏 div 的输入中。然后我使用 jQuery 将该表单提交到 iFrame。它在后台运行非常顺利。稍后当我从表中查询 SVG 时，它不会引发 utf-8 错误。

为可能有帮助的人分享代码：

```
<div id="zeroDiv" style="display:none">
  <form id="svgForm" action="saveSVG.cfm" method="post" target="zeroFrame" accept-charset="utf-8">
    <input name="ordID" id="ordID" type="hidden" value="" />
    <input name="svgCode" id="svgCode" type="hidden" value="" />
  </form>
  <iframe id="zeroFrame" name="zeroFrame" src="" style="width:0;height:0;border:0px solid #fff; display:none"></iframe>
</div> 
```

这是调用并提交它的 javascript/jQuery：

```
var lclSVG = $('#holderDiv')[0].innerHTML;
lclSVG = lclSVG.replace(/&quot;/g,"");
$('#ordID').val(ordID);
$('#svgCode').val(lclSVG);
$('#svgForm').submit(); 
```

这是 saveSVG.cfm 页面上的 CF 代码。它可以是任何服务器端技术...

```
<cfif isDefined("form.ordID") AND Val(form.ordID) AND isDefined("form.svgCode") AND Len(Trim(form.svgCode))>
  <CFQUERY NAME="saveSVG">
    UPDATE sketch
    SET sketch_svg = '#form.svgCode#' 
    WHERE  ordID = #Val(form.ordID)#
  </CFQUERY>
</cfif> 
```

# dynamic - 使用带有贪心方法的矩阵链

> ID：13216401
> 
> 赞同：0
> 
> 时间：2012-11-04T05:49:25.490
> 
> 标签：dynamic, methods, matrix, greedy, chain

我正在自己阅读 CLRS，我发现但很难理解一些概念。

与贪婪相比，在动态规划中，我们在全局范围内做出选择并最终得到最优解。我通过 Multi Graph 中的最短路径示例以及背包问题 (Knapsack Problem) 很好地理解了这些概念。

1.  我无法理解我们如何在 Matrix Chain 中动态做出选择。我已经理解了递归关系，但我无法对动态决策进行标准化。（我知道它具有最佳的子结构特性）

2.  如果用贪心法求解矩阵链算法将如何工作？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T09:27:35.867

这个问题不能用贪心的方法解决。

例如，矩阵链 [3x2]•[2x3] •[3x4]。

结果将是 (([3x2]•[2x3]) •[3x4]) 使用贪婪方法，但最佳答案是 ([3x2]•([2x3] •[3x4]))。

更多详情：[https ://www.cs.washington.edu/education/courses/421/04su/slides/matrixchain.pdf](https://www.cs.washington.edu/education/courses/421/04su/slides/matrixchain.pdf)

# java - 保护数据库并保存各种文件

> ID：13216404
> 
> 赞同：2
> 
> 时间：2012-11-04T05:50:31.980
> 
> 标签：java, android, database, eclipse, sqlite

我正在尝试将一些文档/图像和文件保存在`sqlite database`. 文档包含不同类型的`pdf,.doc`etc 文件和不同格式的图像。现在，一旦我以 blob 格式存储它，我想将数据库备份到`sdCard`. 但是，我希望此备份只能由应用程序读取，以保护内部数据。

现在的问题是，为了存储不同类型的文件，我是否必须使用某种其他数据库并进行保护。我该怎么办？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T10:35:45.047

Android 的内置 SQLite 不支持加密。尝试使用[SQLCipher 之](http://sqlcipher.net/)类的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:25:44.867

一种解决方案是使用 blob 并将文件的原始数据存储为数据库中的列，就像您当前所做的那样。

我认为将文件存储在内部存储中并将文件路径存储在数据库中的其他解决方案更好。内部存储对于您的应用程序是私有的，因此没有人可以访问这些文件，因此您的安全问题得到了解决。

请参阅此处了解如何执行此操作：

[在内部存储器中创建文件夹以保存文件并稍后检索它们](https://stackoverflow.com/questions/8493642/creating-folder-in-internal-memory-to-save-files-and-retrieve-them-later)

但是请注意，使用过多的内部存储空间会使人们的手机内部存储空间不足，他们可能会决定删除您的应用程序。

# model - 如何将多个 rdf 数据存储到 tdb 数据集？

> ID：13216406
> 
> 赞同：1
> 
> 时间：2012-11-04T05:51:22.057
> 
> 标签：model, dataset, store, rdf, jena

我对 tdb 完全陌生，我想将几​​个 rdf 数据存储到 tdb 中。许多代码如下：

```
public static final String book = "Ontologies/book.rdf";
public static final String conference = "Ontologies/conference.rdf";
public static final String inproceeding = "Ontologies/inproceeding.rdf";
public static final String journal = "Ontologies/journal.rdf";
public static final String JournalArtical = "Ontologies/JournalArtical.rdf";
public static final String organization = "Ontologies/organization.rdf";
public static final String person = "Ontologies/person.rdf";
public static final String place = "Ontologies/place.rdf";
public static final String proceedings = "Ontologies/proceedings.rdf";
public static final String series = "Ontologies/series.rdf";
public static final String thesis = "Ontologies/thesis.rdf";

static String queryRequest = "select * {?s ?p ?o.}";

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
    ArrayList<String> al = new ArrayList();
   // al.add(book);
    al.add(conference);
   al.add(inproceeding);
    al.add(journal);
   al.add(JournalArtical);
    al.add(organization);
    al.add(person);
   al.add(place);
   al.add(proceedings);
    al.add(series);
   al.add(thesis);

    //create the DataSet   
    Dataset dataset = TDBFactory.createDataset("QA");
    Model model = dataset.getDefaultModel();
    //to fill model  
    Iterator  it=  al.iterator();
    while(it.hasNext()){
    FileManager.get().readModel(model, (String)it.next());
    }

    model.commit();
    dataset.close();
}
} 
```

它抛出一个 ConcurrentModificationException 异常？我不知道为什么？一个模型可以存储许多 rdf 数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T17:32:26.037

TDB 做了很多异步操作，因此您可以尝试`TDB.sync(model)`在每次读取操作之后添加以强制它等待操作真正完成，然后再继续下一个操作。

# php - 选择列最接近当前日期的 MySQL 行

> ID：13216408
> 
> 赞同：0
> 
> 时间：2012-11-04T05:51:54.490
> 
> 标签：php, mysql, sql

我有一个包含一堆行的数据库。其中一列是“日期”，其中每一行都有一个日期，格式为：MM/DD/YYYY H:MM PM/AM

如何编写 PHP 来选择日期是已过去的最近日期的行。这意味着如果您有明天的日期、今天的日期和昨天的日期，它会选择昨天日期所在的行。

我已经连接到数据库：

```
mysql_connect('localhost','username','pass');
mysql_select_db('db_name'); 
```

我如何编写查询来获取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:56:10.700

我会使用以下查询的变体在 SQL 而不是 PHP 中进行过滤：

```
SELECT *
FROM myTable
WHERE theDate < CURDATE()
ORDER BY theDate DESC
LIMIT 1 
```

这将选择过去的所有行 ( `theDate < CURDATE()`)，按时间倒序对它们进行排序 ( `ORDER BY theDate DESC`)，然后获取第一条记录 ( `LIMIT 1`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:57:04.893

查询数据库时，ORDER BY date DESC LIMIT 1

这只会返回最近的结果，因此是最接近当前日期的结果。（这仅在您不输入未来日期的条目时才有效）

# ajax - AJAX 回发响应不同于模型数据

> ID：13216414
> 
> 赞同：0
> 
> 时间：2012-11-04T05:53:11.983
> 
> 标签：ajax, asp.net-mvc

我有一个局部视图，其中包含文本字段并绑定到设置的列表，因此本质上存在一行文本字段，用户可以向其中添加另一行或从中删除一行。我通过像这样遍历列表来构建视图：

```
@model PricingRequestWebApp.Web.Models.PricingRequestModel

<div id="shiplocation-wrapper">
    <table class="shipinfoprtable">
        <thead>
            <tr>
                <th>@Html.LabelFor(m => m.ShippingLocationsModel[0].Address)<span class="formRed">*</span></th>
                <th>@Html.LabelFor(m => m.ShippingLocationsModel[0].City)<span class="formRed">*</span></th>
                <th>@Html.LabelFor(m => m.ShippingLocationsModel[0].State)<span class="formRed">*</span></th>
                <th>@Html.LabelFor(m => m.ShippingLocationsModel[0].Zip)<span class="formRed">*</span></th>
                <th>@Html.LabelFor(m => m.ShippingLocationsModel[0].PFreight)<span class="formRed">*</span></th>
                <th>@Html.LabelFor(m => m.ShippingLocationsModel[0].FreightType)<span class="formRed">*</span></th>
                <td><span class="link" id="addlocation" onclick="AddShippingLocation()">Add</span></td>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.ShippingLocationsModel.Count; i++)
            {
                <tr>
                    <td>@Html.TextBoxFor(m => m.ShippingLocationsModel[i].Address, new { @style = "width: 200px" })</td>
                    <td>@Html.TextBoxFor(m => m.ShippingLocationsModel[i].City, new { @style = "width: 150px" })</td>
                    <td>@Html.TextBoxFor(m => m.ShippingLocationsModel[i].State, new { @size = 3 })</td>
                    <td>@Html.TextBoxFor(m => m.ShippingLocationsModel[i].Zip, new { @style = "width: 80px" })</td>
                    <td>@Html.TextBoxFor(m => m.ShippingLocationsModel[i].PFreight, new { @style = "width: 80px" })</td>
                    <td>@Html.TextBoxFor(m => m.ShippingLocationsModel[i].FreightType, new { @style = "width: 200px" })</td>
                    @if (Model.ShippingLocationsModel.Count > 1)
                    {
                        <td><span class="link" id="removelocation" onclick="RemoveShippingLocation(@i);">Remove</span></td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div> 
```

我的控制器方法如下所示：

```
 [HttpPost]
    public ActionResult AddShippingLocation(PricingRequestModel model)
    {
        model.ShippingLocationsModel.Add(new ShippingLocationsModel());    

        return PartialView("shiplocationsPartial", model);
    }

    [HttpPost]
    public ActionResult RemoveShippingLocation(PricingRequestModel model)
    {
        model.ShippingLocationsModel.RemoveAt(StaticItems.id);

        return PartialView("shiplocationsPartial", model);
    } 
```

还有我发布数据并返回视图的 Jquery 函数：

```
function AddShippingLocation() {
    $.ajax({
        data: $('#shippinginfoform').serialize(),
        type: "POST",
        url: "/PricingRequest/AddShippingLocation",
        success: function (response) {
            $('#shiplocation-wrapper').html(response);
        }
    })
}

function RemoveShippingLocation(id) {
    $.ajax({
        data: { id: id },
        type: "POST",
        url: "/PricingRequest/SaveID",
        complete: function () {
            $.ajax({
                data: $('#shippinginfoform').serialize(),
                cache: false,
                type: "POST",
                url: "/PricingRequest/RemoveShippingLocation",
                success: function (response) {
                    $('#shiplocation-wrapper').html(response);
                }
            })
        }
    })
} 
```

现在，假设我在用户视图中创建了 4 个项目。我单击第 2 项将其删除，并将 i 作为 id 传入。然后，我将其从模型列表中删除，并使用更新的模型传回视图。我现在已经调试了至少 50 次，并且控制器方法看起来与它应该的完全一样，并且视图中的数据也是如此。令人费解的是，尽管 ajax 上的响应与我在调试时看到的不同。单击删除项目 2 会删除项目 4。如果我有 5 个项目，则无论我单击要删除什么项目，都会删除项目 5。它始终是被删除的最后一项。我知道我必须在这里遗漏一些东西，但我看不到什么。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:53:17.637

您的代码的问题是您正在为您的集合使用顺序索引，并且在添加/删除留下间隙的元素时没有重新计算这些索引，这会阻止模型绑定器正确运行。作为替代方案，您可以使用非顺序索引，如[`following blog post`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/).

# c++ - 在一个范围内总和的数组中查找三元组

> ID：13216416
> 
> 赞同：-1
> 
> 时间：2012-11-04T05:53:46.163
> 
> 标签：c++, arrays, algorithm

> **可能重复：**
> [元组数](https://stackoverflow.com/questions/13216041/number-of-tuples)

给定 N 个数字`a[1..N]`和 2 个其他整数 L 和 H，我们必须计算元组的数量，`(i,j,k)`使得`L <= a[i] + a[j] + a[k] <= H`. 这可以做得更好`O(n^3)`吗？有什么建议/算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:39:03.930

首先将 a[i] 排序为升序。

枚举a[i]和a[j]，所以你可以使用[二分查找](http://en.wikipedia.org/wiki/Binary_search_algorithm)找到有多少a[k]满足L - (a[i] + a[j]) <= a[k] <= H - ( a[i] + a[j])。

整个算法成本`O(n^2*log(n))`

# iphone - 应用程序最小化时 performSelectorInBackground 不起作用

> ID：13216418
> 
> 赞同：1
> 
> 时间：2012-11-04T05:54:03.260
> 
> 标签：iphone, ios, xcode, ipad, cocoa

即使用户最小化并开始在 ios 设备上处理其他内容，我也试图让应用程序在后台任务中运行，但我的方法只有在应用程序在屏幕上处于活动状态时才会被命中。我在这里遗漏了一些明显的东西吗？

```
-(void) viewDidAppear:(BOOL)animated
{
  [self performSelectorInBackground:@selector(RunMethodEvenWhenMinimized) withObject:nil];
}

-(void)RunMethodEvenWhenMinimized
{
    while(YES)
    {
        //My Code
        sleep(10);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:33:12.407

问题是您似乎对后台处理和`NSObject`后台线程助手功能感到困惑。您实际上并没有指定您的方法应该在后台运行，而是它将在不是主线程的线程上运行。建议您使用`-[UIApplication beginBackgroundTaskWithExpirationHandler:];`通知系统您的应用程序需要超过其在前台分配的时间以执行方法。当一切都说完了，你的代码最终会看起来像这样：

```
-(void) viewDidAppear:(BOOL)animated
{
    UIApplication *app = [UIApplication sharedApplication];
    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    bgTask = UIBackgroundTaskInvalid;
}];
    [self RunMethodEvenWhenMinimized];
    [app endBackgroundTask:bgTask];
}

-(void)RunMethodEvenWhenMinimized
{
    while(YES)
    {
        //My Code
        sleep(10);
    }
} 
```

# c# - 64位VMWare检测代码触发断点

> ID：13216421
> 
> 赞同：1
> 
> 时间：2012-11-04T05:54:41.073
> 
> 标签：c#, c, visual-studio-2008, exception, assembly

我在 .NET 2.0 C# 控制台项目中进行 VMWare 检测。检测代码在 C 中实现为 DLL 中的导出函数，该函数使用 P/Invoke 从 C# 代码调用。C# 代码编译为 x86 和 x64 为两个单独的可执行文件。C DLL 也为这两个平台编译。这是导出的函数：

```
PUBLIC Int32 __declspec(nothrow) WINAPI GetVMType ()
{
    Int32 nVMWareType = 0;

    try
    {
        if ( !IsInVMWare ( nVMWareType ) )
        {
            ... // allocate memory, write data, etc.
        }
    }
    catch ( ... )
    {
        nVMWareType = -1;
    }

    return ( nVMWareType );
} // <-- breakpoint happens here 
```

我有以下代码使用内联汇编进行 VMWare 检测：

```
PRIVATE Bool IsInVMWare ( Int32& nType )
{
    Bool bResult = false;
    Int32 nVersion = -1;
    nType = -1;

    __try
    {
        #ifndef _WIN64 // 32-bit detection
        __asm
        {
            push    edx
            push    ecx
            push    ebx

            mov     eax, 'VMXh'
            mov     ebx, 0          // anything but 'VMXh'
            mov     ecx, 10         // get VMWare version
            mov     edx, 'VX'       // port number
            in      eax, dx         // read port
            cmp     ebx, 'VMXh'     // is it a reply from VMWare?
            je      lblInVMWare

            xor     ecx, ecx        // not in VMWare - clear return value

        lblInVMWare:
            mov     [nVersion], ecx // vmware product type
            pop     ebx
            pop     ecx
            pop     edx
        }
        #else
        nVersion = GetVMWareVersion (); // 64-bit detection
        #endif

        nType = nVersion;

        if ( nType > 0 )
            bResult = true;
    }
    __except ( EXCEPTION_EXECUTE_HANDLER )
    {
        bResult = false;
    }

    return ( bResult );
} 
```

64 位检测代码`GetVMWareVersion()`以汇编形式实现：

```
PUBLIC GetVMWareVersion
    .CODE
    ALIGN   8

GetVMWareVersion PROC

    push    rbp
    mov     rbp, rsp

    push    rdx
    push    rcx
    push    rbx

    mov     rax, 'VMXh'
    mov     rbx, 0       ; anything but 'VMXh'
    mov     rcx, 10      ; get VMWare version
    mov     rdx, 'VX'    ; port number
    in      rax, dx      ; read port
    cmp     ebx, 'VMXh'  ; is it a reply from VMWare?
    je      $0@GetVMWareVersion

    xor     rax, rax     ; not in VMWare - clear return value
    jmp     $1@GetVMWareVersion

$0@GetVMWareVersion:
    mov     rax, rcx     ; VMWare product type

$1@GetVMWareVersion:
    pop     rbx
    pop     rcx
    pop     rdx

    mov     rsp, rbp
    pop     rbp
    ret

GetVMWareVersion ENDP

END 
```

32 位检测代码在非 VM Windows 7 上运行良好。当 64 位版本运行（相同环境）时，它会触发`DebugBreak()`具有以下调用堆栈的调用：

```
KernelBase.dll!DebugBreak() + 0x2 bytes
[Frames below may be incorrect and/or missing, no symbols loaded for KernelBase.dll]
mscorwks.dll!PreBindAssembly() + 0x9ce69 bytes
mscorwks.dll!PreBindAssembly() + 0x9d28e bytes
mscorwks.dll!CreateApplicationContext() + 0x769d bytes
mscorwks.dll!StrongNameTokenFromPublicKey() + 0x64f8 bytes
mscorwks.dll!StrongNameTokenFromPublicKey() + 0x66ff bytes
mscorwks.dll!CreateApplicationContext() + 0x7f62 bytes
ntdll.dll!vsprintf_s() + 0x12b bytes
ntdll.dll!RtlUnwindEx() + 0x852 bytes
ntdll.dll!KiUserExceptionDispatcher() + 0x2e bytes
mscorwks.dll!IEE() + 0xd285 bytes
cccccccccccccccc()
0000000000d78180()
cccccccccccccccc() 
```

当我在 Visual Studio 中调试 C DLL 时，我在输出窗口中也有这个：

```
First-chance exception at 0x000007feedbdfad1 (mscorwks.dll) in MyApp.exe:
    0xC0000005: Access violation reading location 0xffffffffffffffff. 
```

每隔一段时间（不总是）我也会在事件日志中得到这个：

```
.NET Runtime version 2.0.50727.5456 - Fatal Execution Engine Error
    (000007FEEDB27916) (80131506) 
```

我完全不知道为什么会发生这种情况。我做了很多搜索，但我找不到任何似乎适用于这个问题的东西。一些网站建议切换到 .NET 4.0，但这不是一个选择。

我分析了所有代码`GetVMType ()`——它进行了一些内存分配并将数据写入动态分配的数组中，但该代码是正确的：所有内存都已释放，并且没有内存被错误地覆盖。

如果我修改 64 位汇编代码以跳过该`in`指令，则不会触发断点。作为 32 位代码运行时，这不是问题。

调用 C# 程序有一个顶级异常处理程序和一个事件处理程序，`UnhandledException`但是当这个问题发生时，应用程序只是退出 - 没有调用任何处理程序。

有谁知道这个设置有什么问题？`in`我花了几个小时调试并试图查看发生了什么，但是当 P/Invoke 调用在该指令执行后返回时，.NET 中的某些东西似乎中断了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T08:51:13.100

我的猜测是你的函数损坏了寄存器。

在真实硬件（非 VM）上运行可能会在“in rax, dx”处触发异常。如果发生这种情况，则控制权将传递给您的异常处理程序，该处理程序会设置结果，但不会恢复寄存器。调用者将完全意外此行为。例如，它可以将某些内容保存到 EBX/RBX 寄存器中，然后调用您的 asm 代码，您的 asm 代码执行“mov RBX, 0”，它执行、捕获异常、设置结果、返回 - 然后调用者突然意识到他保存的数据不在 EBX/RBX 中了！如果在 EBX/RBX 中存储了一些指针 - 你将很难崩溃。任何事情都有可能发生。

当然，您的 asm 代码会保存/恢复寄存器，但这仅在没有引发异常时才会发生。即，如果您的代码在 VM 上运行。然后您的代码将执行正常的执行路径，不会引发异常，寄存器将正常恢复。但如果有异常 - 您的 POP 将被跳过，因为执行将被传递给异常处理程序。

如果这是真的，那么您的 32 位代码**也不起作用**。如果它起作用了——那么它只会在偶然的情况下发生。即纯属偶然。这种机会是，如果 32 位代码可用寄存器较少，有人在调用您的 asm 代码之前已经保存/恢复了寄存器。

正确的代码可能应该在 try/except 块之外而不是内部执行 PUSH/POP。

# c - 错误：粘贴“。” 并且“red”没有给出有效的预处理令牌

> ID：13216423
> 
> 赞同：47
> 
> 时间：2012-11-04T05:55:32.183
> 
> 标签：c, macros, c-preprocessor

我正在实现 X 宏，但我遇到了一个简单的宏扩展问题。[`this`](http://www.cprogramming.com/tutorial/cpreprocessor.html)这个宏（见下文）通过包含在文章中被用于几个宏使用示例。编译器给出了一条错误消息，但我可以通过在 GCC 编译器中使用`-E`标志来查看有效的 C 代码。

宏 X-list 定义如下：

```
#define LIST \
  X(red, "red") \
  X(blue, "blue") \
  X(yellow, "yellow") 
```

进而：

```
#define X(a, b) foo.##a = -1;
  LIST;
#undef X 
```

但是 gcc 给出了以下错误消息：

```
lixo.c:42:1: error: pasting "." and "red" does not give a valid preprocessing token
lixo.c:42:1: error: pasting "." and "blue" does not give a valid preprocessing token
lixo.c:42:1: error: pasting "." and "yellow" does not give a valid preprocessing token 
```

就像我说的，我可以通过`-E`在 gcc 上使用 switch 来查看有效的 C 代码：

```
lixo.c:42:1: error: pasting "." and "red" does not give a valid preprocessing token
lixo.c:42:1: error: pasting "." and "blue" does not give a valid preprocessing token
lixo.c:42:1: error: pasting "." and "yellow" does not give a valid preprocessing token
  foo.red = -1; foo.blue = -1; foo.yellow = -1;; 
```

什么是有效的预处理令牌？有人可以解释一下吗？

（在您说“为什么不只是初始化或`memset()`？”之前，这不是我的真实代码。）

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-04T05:59:48.450

`.`分隔标记，因此您不能使用`##`as`.red`不是有效标记。仅`##`当您将两个标记连接成一个标记时才会使用。

这有效：

```
#define X(a, b) foo.a = -1; 
```

> 什么是有效的处理令牌？有人可以解释一下吗？

这就是被解析/解析的内容。`foo.bar`将被解析为 3 个令牌（两个标识符和一个运算符）：`foo . bar`如果您使用`##`，您只会得到 2 个令牌（一个标识符和一个无效令牌）：`foo .bar`

# java - Java String 中 (.*) 的职责是什么？

> ID：13216425
> 
> 赞同：2
> 
> 时间：2012-11-04T05:56:23.667
> 
> 标签：java, regex, string

第三行的职责是什么，`(.*)`它是如何工作的？

```
String Str = new String("Welcome to Tutorialspoint.com");
System.out.print("Return Value :" );
System.out.println(Str.matches("(.*)Tutorials(.*)")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T05:58:25.053

`.matches()`是使用提供的正则表达式进行解析的调用`Str`。

[正则表达式或正则表达式](http://en.wikipedia.org/wiki/Regular_expression)是一种将字符串解析为组的方法。在提供的示例中，这匹配任何包含单词“Tutorials”的字符串。`(.*)`简单的意思是“一组零个或多个任意字符”。

[此页面](http://www.regular-expressions.info/reference.html)是一个很好的正则表达式参考（用于非常基本的语法和示例）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T05:59:07.313

您的表达式**匹配**以 word 的任何字符为前缀和后缀的任何单词`Tutorial`。`.*`表示任何字符出现任意次数，包括零次。

表示正`.`则表达式[元字符](http://docs.oracle.com/javase/tutorial/essential/regex/literals.html)，表示**任何字符**。

是一个正`*`则表达式[量词](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)，表示与其关联的表达式字符**出现 0 次或多次。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T05:58:13.430

`matches`将[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)字符串作为参数，`(.*)`表示贪婪地捕获任何字符零次或多次

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T05:59:19.637

`.*`表示一组零个或多个任意字符

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-04T08:14:16.327

在`Regex`：

> ***`.`***
> 
> 通配符：匹配任何单个字符，除了`\n`

例如模式`a.e`匹配`ave`in`nave`和`ate`in`water`

> ***`*`***
> 
> 匹配前一个元素零次或多次

for example pattern `\d*\.\d` matches `.0`, `19.9`, `219.9`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-04T12:03:20.073

There is no reason to put parentheses around the `.*`, nor is there a reason to instantiate a `String` if you've already got a literal `String`. But worse is the fact that the `matches()` method is out of place here.

What it does is greedily matching any character from the start to the end of a String. Then it backtracks until it finds `"Tutorials"`, after which it will again match any characters (except newlines).

It's better and more clear to use the [find](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29) method. The find method simply finds the first `"Tutorials"` within the String, and you can remove the `"(.*)"` parts from the pattern.

As a one liner for convenience:

```
System.out.printf("Return value : %b%n", Pattern.compile("Tutorials").matcher("Welcome to Tutorialspoint.com").find()); 
```

# mysql - 按列分组的查询结果的行号

> ID：13216427
> 
> 赞同：3
> 
> 时间：2012-11-04T05:56:38.453
> 
> 标签：mysql

我有一个包含以下列的表： id | fk_id | rcv_date

可能有多条记录有一个共同的fk_id，表示相关表中的一个外键id。

我需要创建一个查询，该查询将为每条记录分配一个行号，按 fk_id 分组，按 rcv_date 排序。

我最初从以下查询开始，它非常适合排序和分配行号：

```
SELECT @row:=@row +1 AS ordinality, c.fk_id, rcv_date
FROM (SELECT @row:=0) r, mytable c
ORDER BY rcv_date 
```

但是——行数和排序是在整个数据集中完成的。我需要计数在一个共同的 fk_id 内。例如，以下示例数据将返回（第一列表示行数/序数）：

```
1 | 5 | 2011-10-01
2 | 5 | 2011-10-14
3 | 5 | 2011-11-02
4 | 5 | 2011-12-17
1 | 8 | 2011-09-03
2 | 8 | 2011-11-12
1 | 9 | 2011-10-08
2 | 9 | 2011-10-10
3 | 9 | 2011-11-19 
```

中间一列代表 fk_id。如您所见，排序和行数在 fk_id “分组”内。

**更新** 我有一个似乎正在工作的查询，但想要一些关于它是否可以改进的输入：

```
SELECT IF(@last = c.fk_id, @row:=@row +1, @row:=1) AS ordinality, @last:=c.fk_id, c.fk_id, rcv_date
FROM (SELECT @row:=0) r, (SELECT @last:=0) l, mytable c
ORDER BY c.fk_id, rcv_date 
```

所以它的作用是按 fk_id 排序，然后按 rcv_date 排序——这基本上处理了我的分组。然后我使用第二个变量将前一条记录中的 fk_id 与当前记录进行比较：如果相同，则增加行；如果不同，我们重置为 1。

我对真实数据的测试似乎奏效了。我怀疑这是一个非常低效的查询——所以如果有人有改进它的想法，或者看到可能的缺陷，我很想听听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T06:58:42.863

这应该很简单。

```
SELECT (CASE WHEN @fk <> fk_id THEN @row:=1 ELSE @row:=@row + 1 END) AS ordinality, 
       @fk:=fk_id, rcv_date
FROM   (SELECT @row:=0) AS r, 
       (SELECT @fk:=0) AS f, 
       (SELECT fk_id, rcv_date FROM files ORDER BY fk_id, rcv_date) AS t 
```

我首先订购了 by`fk_id`以确保您所有的外键都放在一起（如果它们不在表中怎么办？），然后我做了您喜欢的订购，即 by `rcv_date`。查询检查 fk_id 的变化，如果有变化，则行号变量设置为 1，否则变量递增。它在案例声明中处理。请注意，这`@fk:=fk_id`是在案例检查之后完成的，否则它将影响行号。

**编辑：**刚刚注意到您自己的解决方案恰好与我最终得到的相同。赞！:)

# java - Java从一个文件夹中搜索文件名

> ID：13216432
> 
> 赞同：0
> 
> 时间：2012-11-04T05:58:01.867
> 
> 标签：java, filtering, filenames

我正在学习 Java，但我不太确定搜索文件的方法。我想构建返回文件名的函数（文件名应该以开头`star`和结尾`.txt`）

例如，在文件夹中，我们有 Java 源文件和一些文件。例如，文件：

*   1.txt
*   2.txt
*   4.txt
*   开始.txt
*   星号.txt
*   onstart.txt
*   启动.txt
*   我的java.java

然后我想得到`start.txt`, `star.txt`&`starton.txt`

我一直在寻找，`FilenameFilter`但我找不到找到文件的好方法。有谁知道查找文件的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T06:06:47.760

可能最简单的方法是简单的使用[`File#listFiles(FileFilter)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)，比如

```
File[] fileList = new File("/path/to/search").listFiles(new FileFilter() {
    @Override
    public boolean accept(File pathname) {
        return pathname.getName().endsWith(".txt");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:06:58.153

```
// You'll need this import: import java.io.File;

File folder = new File("C:/Folder_Location");
// gets you the list of files at this folder
File[] listOfFiles = folder.listFiles();
// loop through each of the files looking for filenames that match
for(int i = 0; i < listOfFile.length; i++){
    String filename = listOfFiles[i].getName();
    if(filename.startsWith("Stuff") && listOfFiles[i].getName().endsWith("OtherStuff")){
        // do something with the filename
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:04:06.543

`File#getName() should return a`字符串`，然后使用：

```
filename.startsWith(...);
filename.endsWith(...); 
```

# android - 当单击按钮在 monodroid 中显示加载对话框时？

> ID：13216445
> 
> 赞同：0
> 
> 时间：2012-11-04T06:00:12.290
> 
> 标签：android, xamarin.android

我想在单击按钮时显示加载提示，我该怎么做？

```
protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set our view from the "main" layout resource
        SetContentView(Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button button = FindViewById<Button>(Resource.Id.MyButton);
        objListView = FindViewById<ListView>(Resource.Id.listView1);
        button.Click += button_Click;
    }

    void button_Click(object sender, EventArgs e)
    {
     //in this place i get RSS list from web ,this process take a minute 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:04:39.743

首先，您需要添加一个变量来加载进度

```
private ProgressDialog progress;

protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            SetContentView(Resource.Layout.Main);

            Button button = FindViewById<Button>(Resource.Id.MyButton);
            objListView = FindViewById<ListView>(Resource.Id.listView1);

            button.Click += (s, e) => {
                Action act = new Action(YOUR METHOD NAME);
                progress = new ProgressDialog(this);
                progress.SetTitle("loading...");
                progress.Show();

                act.BeginInvoke(a => act.EndInvoke(a), null);
            };
        } 
```

并且在您的方法中，您必须取消加载进度

```
progress.Dismiss(); 
```

# jquery - 为什么 jQuery 是“非 MVC 框架”？

> ID：13216452
> 
> 赞同：0
> 
> 时间：2012-11-04T06:01:04.830
> 
> 标签：jquery, backbone.js

我试图理解“MVC”backbone.js。我遇到了一篇将 jQuery 描述为非 MVC 框架的文章，但我不明白这是什么意思。

我正在使用 jQuery 进行所有 DOM 操作，一切正常。

谁能用一个简单的例子解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T06:18:09.403

**MVC**框架本质上提供了一些工具，您可以使用这些工具清楚**地**分离出**M**（模型 - 数据）、**V**（视图 - 用户看到的内容）和**C**（控制器 - 逻辑，使用 M 和 V 的中间人）部分您的应用程序。CakePHP、rails 和主干（在客户端）都是 MVC 框架的示例。

**jQuery**不做任何这些。它不是一个框架，它只是实用程序/约定的集合（无论如何，这是一种轻描淡写的说法），以使您在使用 JS 和 DOM 时更轻松。

例如，假设您正在使用图像编辑器，然后：

*   **图像**类将是您的模型
*   显示您的图像编辑器的页面，比如 editor.php（或其他）将是您的视图
*   从 db/disk 加载图像并使用 editor.php 呈现图像的类/脚本将成为您的控制器

*   假设您的控制器使用*libjpeg*对您的图像进行编码。*libjpeg*只是一个帮助控制器做好工作的库。*libjpeg*本身与您的 M、V 或 C 无关。

jQuery 类似于上面的*libjpeg*，它与您如何构建应用程序无关，但有助于您的视图完成其工作。

# mongodb - Mongorestore 不导入数据

> ID：13216453
> 
> 赞同：2
> 
> 时间：2012-11-04T06:01:08.030
> 
> 标签：mongodb, mongorestore

我正在尝试恢复 mongo db 转储。在 PC 上运行 mongorestore 可以正常工作。但是当我在 linux 服务器（64 位 MongoDB）上运行它时，没有抛出错误，但没有导入数据。下面给出的是终端上的消息：

```
#mongorestore --drop dump
connected to: 127.0.0.1
Sun Nov  4 11:56:13 dump/m101/hw1.bson
Sun Nov  4 11:56:13     going into namespace [m101.hw1]
Sun Nov  4 11:56:13      dropping
1 objects found
Sun Nov  4 11:56:13     Creating index: { key: { _id: 1 }, ns: "m101.hw1", name: "_id_" }
Sun Nov  4 11:56:13 dump/m101/funnynumbers.bson
Sun Nov  4 11:56:13     going into namespace [m101.funnynumbers]
Sun Nov  4 11:56:13      dropping
100 objects found
Sun Nov  4 11:56:13     Creating index: { key: { _id: 1 }, ns: "m101.funnynumbers", name: "_id_" } 
```

编辑：

这不是问题。问题不在于插入，而在于我的查询。我试图做 db.m101.funnynumbers.count()。正确的做法是 db.funnynumbers.count()。

# ios - 在 iOS 上显示相对日期或时间，而不是两者？

> ID：13216456
> 
> 赞同：3
> 
> 时间：2012-11-04T06:01:56.360
> 
> 标签：ios, nsdate, nsdateformatter

我目前正在这样做：

```
NSDateFormater *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateStyle:NSDateFormatterMediumStyle];
[dateFormat setTimeStyle:NSDateFormatterShortStyle];
[dateFormat setDoesRelativeDateFormatting:YES];

...

label.text = [dateFormat stringFromDate:thedate]; 
```

这正在产生：

```
Today, 1:00 PM
Yesterday, 1:00 PM
Oct 5, 2012, 1:00 PM
Oct 5, 2013, 1:00 PM 
```

我想要的是这样的：

```
1:00 PM
Yesterday
Oct 5
Oct 5 2013 
```

显示当前年份是可以的（第 3 行）。至少时间应该*只有*在今天才显示。在 iPhone 上，最近通话列表会执行此操作。我需要这样做，因为我的约会空间非常小。

（像 isEqualToString@"Today" 这样的东西不起作用 - 这仅适用于英语）

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:20:35.357

您必须编写自己的格式化程序来处理这个问题。

看看[https://github.com/mattt/FormatterKit](https://github.com/mattt/FormatterKit)看看你能怎么做。

# java - Java泛型，大声读代码的时候怎么说？

> ID：13216460
> 
> 赞同：4
> 
> 时间：2012-11-04T06:03:13.737
> 
> 标签：java, generics

只是想知道，您将如何使用泛型类型大声读出以下项目？

```
 1) class Box<T>  
    2) Box<Integer> integerBox  
    3) class Box<T,U>  
    4) <T,U> void doSomething(T t, U u) 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T06:05:24.150

```
1) class Box<T>                Box of T
2) Box<Integer> integerBox     Box of Integer
3) class Box<T,U>              Box of T,U
4) <T,U> void doSomething(T t, U u)  Just a method which accepts two type parameters T and U 
```

* * *

参考：

*   [`Generics Tutorial`](http://docs.oracle.com/javase/tutorial/java/generics/)
*   [`Java Generics FAQs - Frequently Asked Questions`](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)

# simulation - 在隐马尔可夫模型中生成一组给定转换矩阵和起始状态的排放

> ID：13216463
> 
> 赞同：0
> 
> 时间：2012-11-04T06:03:53.970
> 
> 标签：simulation, linear-algebra, hidden-markov-models

我有隐藏马尔可夫模型的转换矩阵、发射矩阵和起始状态。我想生成一系列观察（排放）。但是，我坚持一件事。

我了解如何在两种状态（或排放）之间进行选择。如果事件 A 的概率`x`为 ，那么事件 B（或者，实际上不是 A）的发生概率为`1-x`。要使用随机数生成 A 和 B 的序列`rand`，请执行以下操作。

```
 for iteration in iterations:
      observation[iteration] <- A if rand < x else B 
```

我不明白如何将其扩展到两个以上的变量。例如，如果发生三个事件，事件 A 发生概率`x1`，事件 B发生`x2`，事件 C 发生`1-(x1+x2)`，那么如何扩展上述伪代码？

我没有找到答案谷歌搜索。事实上，我的印象是我错过了许多在线笔记假设的基本事实。：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:55:21.933

一种方法是

```
 x<-rand()
  if x < x1 observation is A
  else if x < x1 + x2 observation is B
  else observation is C 
```

当然，如果您有大量备选方案，最好建立一个累积概率表（保存 x1、x1+x2、x1+x2+x3 ...），然后在给定随机数的情况下在该表中进行二分搜索. 如果你愿意做更多的预处理，还有一种更有效的方法，例如看[这里](http://eli.thegreenplace.net/2010/01/22/weighted-random-generation-in-python/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T10:03:11.857

两个值的情况是二项式分布，您从二项式分布（本质上是一系列硬币翻转）中生成随机抽取。

对于超过 2 个变量，您需要从[多项分布](http://en.wikipedia.org/wiki/Multinomial_distribution)中抽取样本，这只是对 n>2 的二项分布的推广。

无论您使用什么语言，都应该有内置函数来完成这项任务。下面是 Python 中的一些代码，它根据您的 hmm 模型对象模拟一组观察结果和状态：

```
import numpy as np
def random_MN_draw(n, probs):
    """ get X random draws from the multinomial distribution whose probability is given by 'probs' """
    mn_draw = np.random.multinomial(n,probs) # do 1 multinomial experiment with the given probs with probs= [0.5,0.5], this is a coin-flip
    return np.where(mn_draw == 1)[0][0] # get the index of the state drawn e.g. 0, 1, etc.

def simulate(self, nSteps):
    """ given an HMM = (A, B1, B2 pi), simulate state and observation sequences """
    lenB= len(self.emission)
    observations = np.zeros((lenB, nSteps), dtype=np.int) # array of zeros
    states = np.zeros(nSteps)
    states[0] = self.random_MN_draw(1, self.priors) # appoint the first state from the prior dist
    for i in range(0,lenB): # initialise observations[i,0] for all observerd variables
        observations[i,0] = self.random_MN_draw(1, self.emission[i][states[0],:]) #ith variable array, states[0]th row

    for t in range(1,nSteps): # loop through t
        states[t] = self.random_MN_draw(1, self.transition[states[t-1],:]) # given prev state (t-1) pick what row of the A matrix to use

        for i in range(0,lenB): # loop through the observed variable for each t
            observations[i,t] = self.random_MN_draw(1, self.emission[i][states[t],:]) # given current state t, pick what row of the B matrix to use

    return observations,states 
```

在几乎每种语言中，您都可以找到

> np.random.multinomial()

用于多项式和其他离散或连续分布作为内置函数。

# phpmyadmin - 查找 phpmyadmin 设置用户名和密码

> ID：13216469
> 
> 赞同：0
> 
> 时间：2012-11-04T06:04:38.980
> 
> 标签：phpmyadmin, installation

我在 ubuntu 12.10 上使用 phpmyadmin 3.4.11.1deb1。我想增加文件上传的限制，但是当我尝试时会`localhost/phpmyadmin/setup`出现一个需要用户名和密码的身份验证对话框。我已经输入了我的 phpmyadmin 用户名和密码，但它不起作用。我怎样才能找到一个真实的用户名并通过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:54:39.633

尝试没有密码的管理员用户名

# azure - How can I use TPL with the new APIs in Azure StorageClient 2.0 and newer?

> ID：13216475
> 
> 赞同：0
> 
> 时间：2012-11-04T06:05:40.743
> 
> 标签：azure, task-parallel-library, .net-4.5, azure-table-storage, azure-blob-storage

The Azure Storage client was recently updated to version 2.0, and I haven't found any API that returns Task.

How can I use TPL with Table Storage? .. Blob or Queue?

For your reference the new API has an [example here for Table Storage.](http://blogs.msdn.com/b/dmetzgar/archive/2012/11/02/upgrading-table-storage-code-to-azure-sdk-1-8.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:41:38.920

查看[https://github.com/WindowsAzure/azure-sdk-for-net/](https://github.com/WindowsAzure/azure-sdk-for-net/)下的一些源代码，他们似乎还没有机会添加任务版本（似乎很奇怪，因为它特别提到了 target . NET 4)，但这些操作似乎具有可用的 Begin* 和 End* 版本，因此您可以使用[FromAsync 方法](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)将每一对包装在一个任务中以便于使用。

不过，这似乎是一个奇怪的遗漏 AFAICT。

# android - Trying to collect wifi data like Metal Gear Solid Portable Ops

> ID：13216477
> 
> 赞同：3
> 
> 时间：2012-11-04T06:06:30.587
> 
> 标签：android, broadcastreceiver, wifi, wifimanager

I'm trying to create an app that scans for wifi. When the player does something in the game, it "consumes" the strongest wifi signal. That signal should no longer be detected on the next scan.

Anyone who's played Metal Gear Solid Portable ops would know what I mean.

I tried to do this by creating a List of Wireless Signals that have already been used by the player and can no longer be detected again. The problem is that after scanning the best network, I scan again and it still displays the same network instead of ignoring it.

```
public void onClick(View arg0) {

    if (arg0.getId() == R.id.bStart) {
        ActivityLoader.loadMain(this);
    }

    if (arg0.getId() == R.id.bScan) {
        Toast.makeText(this, "Searching....", Toast.LENGTH_LONG).show();
        for (ScanResult selectedSpot : networkList) {
            {
                if (firstSignal == null || checkIfNotUsed(firstSignal)) {
                    firstSignal = selectedSpot;
                    usedNetworks.add(firstSignal.SSID);
                    break;
                }
            }

        }
    }
    if (firstSignal != null) {
        Toast.makeText(
                this,
                "Found Food and Ammo at the " + firstSignal.SSID
                        + " store.", Toast.LENGTH_LONG).show();

        // textStatus.setText(usedNetworks.toString());
        textStatus.setText(networkList.toString());
    } else {
        Toast.makeText(this, "Found nothing!!!", Toast.LENGTH_LONG).show();
    }
}
private boolean checkIfNotUsed(ScanResult selectedSpot) {
    // TODO Auto-generated method stub
    boolean flag = true;
    if (usedNetworks.isEmpty()) {
        flag = true;
    } else {
        for (String used : usedNetworks) {
            if (selectedSpot.SSID.equals(used)) {
                flag = false;
                break;
            }
        }
    }
    return flag;
} 
```

# r - 粘贴字数限制

> ID：13216480
> 
> 赞同：6
> 
> 时间：2012-11-04T06:06:52.737
> 
> 标签：r, terminal, gnome

> **可能重复：**
> [为什么以及在哪里将 \n 换行符引入 c()？](https://stackoverflow.com/questions/13059083/why-and-where-are-n-newline-characters-getting-introduced-to-c)

我在 GNOME 终端（版本 3.4.1.1）的外壳（版本 4.2.36(1)）中运行`R`（版本 2.15.1 ）。`bash`有时我将我的代码写在一个文本文件中，然后将其直接粘贴到控制台中（运行时`R`）。在我粘贴的脚本变长之前，我没有遇到任何问题。现在，任何大于 4206 个字符（包括`\n`）的代码似乎都被拒绝（即，前 4206 个字符被接受，其余代码被截断；截断伴随着终端“铃”声）。此字符限制并非特定于`bash`GNOME 终端，因为我在粘贴到例如`vi`. 因此，我怀疑字符限制是由`R`，但不知道如何更改它，假设它是用户可配置的参数。可以更改粘贴限制吗？如果可以，控制它的参数是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T06:39:15.813

看起来您遇到了控制台的已知限制。正如它在[介绍 R的](http://cran.r-project.org/doc/manuals/R-intro.html)[第 1.8 节 - R 命令、区分大小写等](http://cran.r-project.org/doc/manuals/R-intro.html#R-commands_003b-case-sensitivity-etc)中所说：

> 在控制台输入的命令行被限制 [3] 到大约 4095 个字节（不是字符）。
> 
> [3] 一些控制台不允许您输入更多内容，其中一些会默默丢弃多余的部分，而另一些则会将其用作下一行的开始。

要么将命令放在一个文件中`source`，要么将代码分成多行，方法是在适当的点（逗号之间）插入您自己的换行符。

该值是硬编码在`src/include/Defn.h`:中的`#define CONSOLE_BUFFER_SIZE 4096`，因此您需要重新编译 R 来更改它。

# php - 如何强制 Apache 使用 IPv4

> ID：13216484
> 
> 赞同：1
> 
> 时间：2012-11-04T06:07:15.747
> 
> 标签：php, macos, apache, ipv6, ipv4

我想使用 PHP super-global 获取 IPv4 中的客户端 IP 地址`$_SERVER['REMOTE_ADDR']`。但是，当我在本地主机上对其进行测试时，它会返回一个 IPv6 地址，例如`::1`.

我使用 Mac OS 默认的 Apache 服务器。这有关系吗？如果是这样，我可以知道如何强制它使用 IPv4 格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T06:23:40.937

**您不能**将每个 ipv6 地址映射到等效的 ipv4 地址。

您还需要为 ipv6 调整代码..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T10:47:21.103

决定使用哪种协议的始终是客户端，而不是服务器。客户端通过查找主机名来确定可用的协议。这通常意味着它会在 /etc/hosts 中查看名称是否在那里定义。如果不是，那么它将使用 DNS 请求来解析名称。

在 Mac OS X 上，名称 localhost 定义在 /etc/hosts 中，因为它同时包含 IPv4 (127.0.0.1) 和 IPv6 地址 (::1)，客户端被告知它可以同时使用这两者。如果您想仅使用 IPv4 进行测试，您可以在 /etc/hosts 中添加一个名称。如果是用于部署，那么您必须确保 DNS 服务器只回复 IPv4 地址。当然，您必须调整 Apache 配置以匹配正确的主机名。

但这只是解决问题：*您需要能够处理 IPv6 地址*。

IPv6 正被全世界采用，而出现在您的本地主机上的 IPv6 地址只是其中的一个小例子。我与之开展业务的所有数据中心都提供用于托管服务器的 IPv6。几乎 10% 的罗马尼亚人在家中拥有 IPv6。美国近 2% 的人家中有 IPv6。荷兰至少有四家 ISP 为其用户提供 IPv6。等等。

如果您现在不在您的项目中提供对 IPv6 的支持，那么很有可能会在 1 或 2 年内出现问题，如果不是更早的话。

# c# - Can't get list box to display SelectedText only displays "system.windows.forms.listbox+selectedobjectcollection"

> ID：13216488
> 
> 赞同：0
> 
> 时间：2012-11-04T06:09:28.930
> 
> 标签：c#, winforms, listbox

I need some help i can't figure out whats wrong with my code, everytime i try to get the program to display the SelectedItems i get "system.windows.forms.listbox+selectedobjectcollection". I can get text from the combobox to the emailBankListBox1 but when i try to hop from the emailBanklistBox1 to listBox1 i get the text listed above. Any and all help is much appreciated.

```
private void addButton1_Click(object sender, EventArgs e)
{
    /*
    int selectIndexInt = -1;

    selectIndexInt = recipientComboBox.SelectedIndex;

    if (selectIndexInt != -1)
    {
        emailBankListBox1.Items.Add(recipientComboBox.SelectedItem += ",");
    }

    else
    {

    }
    */
    if (recipientComboBox.Text == "")
    {
        MessageBox.Show("Please enter a Recipient Email");
    }
    else
    {
        emailBankListBox1.Items.Add(recipientComboBox.Text += ",");
    }
    for (int i = 0; i < emailBankListBox1.Items.Count; i++)
    {
        emailBankListBox1.SetSelected(i, true);
    }
}

private void removeButton2_Click(object sender, EventArgs e)
{
    int selectIndexInt = -1;

    selectIndexInt = emailBankListBox1.SelectedIndex;
    if (selectIndexInt != -1)
    {
        emailBankListBox1.Items.RemoveAt(selectIndexInt);
    }

    else
    {
        MessageBox.Show("Select a name from the 'Recipients to recieve email' List");
    }
}

private void button5_Click(object sender, EventArgs e)
{
    this.Close();
}

private void button4_Click(object sender, EventArgs e)
{

    /* 
    for (int i = 0; i < emailBankListBox1.Items.Count; i++)
    {
        emailBankListBox1.SetSelected(i, true);
    }
    */

    var selectedString = emailBankListBox1.SelectedItems.ToString();
    listBox1.Items.Add(selectedString);

    /*
    //Email sending
    MailMessage myMail = new MailMessage();

    myMail.To.Add(new MailAddress(emailBankListBox1.SelectedItems.ToString()));
    myMail.From = new MailAddress("******m", "******");
    myMail.Subject = subjectTextBox.Text;
    myMail.Body = bodyTextBox.Text;

    SmtpClient smtp = new SmtpClient("smtp.gmail.com");
    smtp.Port = 587;
    smtp.EnableSsl = true;
    smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
    smtp.UseDefaultCredentials = false;
    smtp.Credentials = new NetworkCredential("*********", "*****");

    try
    {
        smtp.Send(myMail);
        MessageBox.Show("Message Sent");
    }   
    catch
    {
        MessageBox.Show("Cannot send this message");

    }
        */
}

private void recipientComboBox_SelectedValueChanged(object sender, EventArgs e)
{

    int selectIndexInt = -1;

    selectIndexInt = recipientComboBox.SelectedIndex;

    if (selectIndexInt != -1)
    {
        emailBankListBox1.Items.Add(recipientComboBox.SelectedItem += ",");
    }

    else
    {
        if (recipientComboBox.Text == "")
        {
            MessageBox.Show("Please type or select a recipient E-mail");
        }
    }
    for (int i = 0; i < emailBankListBox1.Items.Count; i++)
    {
        emailBankListBox1.SetSelected(i, true);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:27:29.937

[SelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)是一个集合，而不是一个项目。

你应该这样做

```
var selItem = emailBankListBox1.SelectedItem;
var selectedString=selItem.ToString();
var idx = emailBankListBox1.Items.IndexOf(selItem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:48:11.243

你本质`ToString`上是在调用一个集合。如果要将每个选定的项目添加到单独的列表框中，可以执行以下操作：

```
foreach(var item in emailBankListBox1.SelectedItems)
    listBox1.Items.Add(item.ToString()); 
```

如果你Linq，你可以直接这样做：

```
listBox1.Items.AddRange(emailBankListBox1.SelectedItems.OfType<string>()); 
```

如果你里面的对象`emailBankListBox1`不仅仅是字符串，那么你将不得不设置显示成员属性`listbox1`

# asp.net - 动态设置图片src asp.net

> ID：13216489
> 
> 赞同：2
> 
> 时间：2012-11-04T06:09:31.660
> 
> 标签：asp.net

是否可以通过单击按钮设置图像的 src。我的每个按钮都代表一张应该显示在我的“图像”区域中的图片。我需要图像区域的 SRC 属性受按钮单击的影响。我在 c# 中使用 Visual Studio 2012。

-编辑：在 Visual Studio 2012 中使用 AJAX 更新面板和 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:18:45.650

是的。您将能够通过使用 JavaScript 并将单击处理程序附加到按钮 (onclick="loadImage1()") 来完成此操作。

loadImage1 函数将要求您编写访问图像元素的 src 属性并对其进行更改所需的 javascript。

您可以使用纯 javascript（参见上面的概念）或使用一些 javascript 库（如 jQuery）来实现这一点。为了跨浏览器的兼容性并让您不必编写跨浏览器安全逻辑，我建议使用 jQuery 来处理这个问题。

```
<img id="img1" src="initialimagehere.jpg"/> 
```

然后您可以像这样更改 src 属性：

```
$("#img1").attr("src","newimagehere.jpg"); 
```

jQuery：[这个链接](http://www.jquery.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T06:33:44.663

如果每次图像更改都可以接受回发，则可以执行以下操作：

在 C# 中：

```
protected void btnClick(object sender, EventArgs e) {

            Button btn = (Button) sender;    

            switch (btn.ID) {

                case "btn1": img.ImageUrl = "<Image_Url>"; break;

                case "btn2": img.ImageUrl = "<Image_Url>"; break;            
            }
        } 
```

在 ASPX 页面中：

```
<asp:Image ID="img" runat="server"  />
<asp:Button ID="btn1" runat="server" OnClick="btnClick" />
<asp:Button ID="btn2" runat="server" OnClick="btnClick" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T21:08:40.283

我注意到如果我没有首先在我的 .aspx 代码中为 ImageUrl 指定一个值，我就无法在 .aspx.cs 代码中设置它。

即，如果我的 .aspx 代码为：

```
<asp:Image runat="server" id="imgPickLg0101" class="ImgSzLarge" /> 
```

我无法在后面的代码中设置它。

但是，如果我*首先*为 ImageUrl 指定了一个值：

```
<asp:Image runat="server" id="imgPickLg0101" class="ImgSzLarge" ImageUrl="../Images/somepic.jpg" /> 
```

然后我可以在 .aspx.cs 代码中设置它：

```
imgPickLg0101.ImageUrl = "../Images/DifferentPicture.jpg"; 
```

# c# - How to retrieve .dotx and .csv files from Resources Folder in C#?

> ID：13216492
> 
> 赞同：0
> 
> 时间：2012-11-04T06:09:57.633
> 
> 标签：c#, resources, embedded-resource, data-retrieval

I have an application that uses a template file and a CSV file. It works perfectly fine since I do have the said files on my computer and I am referencing their paths. The only thing I want to do is that when the software is published and installed (and the said files are in the Resources folder so it would make them an embedded resource), the csv and template files would be copied to a directory folder that my program would use. Preferably the paths it would be copied to would be something like this : "C:\FILES" + template.dotx .

Now how do I get/retrieve the said files from the Resources Folder in my software into a new folder?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:58:55.240

你可以打电话

```
System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceNames(); 
```

并检查哪些嵌入式资源是可访问的。然后，您可以将其与您传入的内容进行比较，以查看您是否确实完成了您的预期。

```
string FileExtractTo = "C:\FILES";
DirectoryInfo dirInfo = new DirectoryInfo(FileExtractTo);

if (!dirInfo.Exists())
    dirInfo.Create();

using (Stream input = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
using (Stream output = File.Create(FileExtractTo + "\template.dotx"))
{
    CopyStream(input, output);
} 
```

复制流方法：

```
public static void CopyStream(Stream input, Stream output)
{
    // Insert null checking here for production
    byte[] buffer = new byte[8192];

    int bytesRead;
    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        output.Write(buffer, 0, bytesRead);
    }
} 
```

# php - Create html table by fetching data from database

> ID：13216497
> 
> 赞同：1
> 
> 时间：2012-11-04T06:12:03.140
> 
> 标签：php, html

I want to display values in a html table by fetching data from database, in each row of a table i want to show 4 columns I want to display it like this => [http://buyitnaija.com/index.php](http://buyitnaija.com/index.php) but it is actually displaying [http://buyitnaija.com/index1.php](http://buyitnaija.com/index1.php)

so far I have done this :

```
$category = mysql_query("SELECT * FROM category LIMIT 0, 4");
while($row = mysql_fetch_array($category))
{
$cat_name = $row['Category'];?>
<table class="white" width="60%" align="center">
<tr>
<td style="font-size:18px; color:#FFFFFF">
<a href="<?=$_SERVER['PHP_SELF']?>?cat=<?echo $cat_name;?>"><? echo $cat_name;?></a>
</td>
<?}?>
</tr>
</table> 
```

# html - 任何人都可以调试这个 HTML 结构吗

> ID：13216504
> 
> 赞同：0
> 
> 时间：2012-11-04T06:13:12.437
> 
> 标签：html, dom, firebug

我的问题可以在[http://www.hykao.com/bbs/defaultpage.php](http://www.hykao.com/bbs/defaultpage.php)找到，它无法获得正确的 html 结构。我付出了很大的努力试图找出原因，但我做不到。有没有人愿意帮忙？

例如，您可以在 firefox 中查看源代码，并将以下行变为红色：

```
<!DOCTYPE html>
<html>
<head>
....
</head>
<body id="nv_defaultpage" class="pg_view" onkeydown="javascript:if(event.keyCode==27){return false;}"> 
```

而且，在萤火虫的 HTML 选项面板中，我得到了 html 的 head empty: ，以及正文中的其他元信息。

如果您能提供帮助，非常感谢。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:28:57.623

您网站上的源代码，文档正文中包含所有元标记和标题标记，它们应该在 {<head></head>} 之间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:47:26.930

我认为您的问题是您使用的字符集使 Firebug 感到困惑。查看页面源代码似乎一切正常。

因此，您需要让服务器 HTTP 标头正确。它提供

```
HTTP/1.1 200 OK
Date: Sun, 04 Nov 2012 06:40:48 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET, PHP/5.2.6
Content-Type: text/html; charset=utf-8
Set-Cookie: 3k5v_2132_lastact=1352011248%09defaultpage.php%09; expires=Mon, 05-Nov-2012 06:40:48 GMT; path=/
Set-Cookie: 3k5v_2132_sid=NClcY6; expires=Mon, 05-Nov-2012 06:40:48 GMT; path=/
X-Cache: MISS from 118.192.42.168
X-Cache-Lookup: MISS from 118.192.42.168:80
Via: 1.0 118.192.42.168 (squid/3.0.STABLE25)
Transfer-Encoding: chunked 
```

和

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

在 HTML 标头中。您需要使用[unicode](http://en.wikipedia.org/wiki/Unicode)。即UTF-16。

**编辑**

HTML 没有任何问题。Firebug 越来越困惑。

见下文

![查看源 - 即服务器设置的内容](../Images/ae819c7097c1379856464915376fad90.png)

![Firebug - 这是不正确的，因为我认为它与您不使用 UTF-16 相混淆](../Images/b2b1530c636a0048796e0f17270f19ec.png)

# android - methods and actions inside class definition

> ID：13216507
> 
> 赞同：0
> 
> 时间：2012-11-04T06:13:26.430
> 
> 标签：android, arrays, class, methods

With the caveat I am fairly new to android programing I was having some trouble with an string array declaration along these lines

```
String[] title = {
"Abundance",
"Anxiety",
"Breakups",
"Bruxism"};

String[] name = {
"test1",
"test2",
"test3",
"test4"}; 
```

The problem arose when I made this change

```
String[] title = {
"Abundance",
"Anxiety",
"Breakups",
"Bruxism"};

String urlbase = "http://www.somewhere.com/data/";
String imgSel = "/logo.png";
String[] mStrings = new String[title.length];

for(int i=0;i<title.length;i++) {
    mStrings[i] = urlbase + title[i].toLowerCase() + imgSel;
    System.out.println(mStrings[i]);
} 
```

and then on the System.out line I saw this error

```
Syntax error on token ";", { expected after this token 
```

which confused me and other for a long time until I found something I had no method, all of the previous statements were made in the class declaration.

***learned something here

I saw this in another post and tried their solution which was to add this

```
public static void main(String[] args) {

} 
```

around my 'actions' and this looked like the right thing and made sense so I tried it. When I did it eclipse blew a screw and no gives me something really weird I can't even copy it but it shows up in the console window

```
<terminated> MainActivity (1) [Java Application] /System/Library/Frameworks/JavaVM.framework/Version/1.4/Home/bin/java (Nov 3, 2012 9:47:42 PM) 
```

The bad part is that even if I erase the code and Clean the project that same error keeps occurring so code was that was working and I try this change see it stop working and remove the code sremains broken

The questions is two parts how do I fix this and what is the exact syntax I need to put in place so I can have my actions inside a method

Here is my original code which should work but it has no the for loop mentioned above is commented out this was actually working just not as I wanted it this my change but now it won't even run due to my last attempt at a fix

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    list=(ListView)findViewById(R.id.list);
    adapter=new LazyAdapter(this, mStrings);
    list.setAdapter(adapter);

    Button b=(Button)findViewById(R.id.button1);
    b.setOnClickListener(listener);
}

@Override
public void onDestroy()
{
    list.setAdapter(null);
    super.onDestroy();
}

public OnClickListener listener=new OnClickListener(){

    public void onClick(View arg0) {
        adapter.imageLoader.clearCache();
        adapter.notifyDataSetChanged();
    }
};    

String[] title = {
        "Abundance",
        "Anxiety",
        "Breakups",
        "Bruxism",
        "Decisions",
        "Zen"

};

 //I put my fix for the method issue here and eclipse blew up
 //I also uncommented the appropriate lines and commented out the mStrings declaration and
 //assignment

  //   String[] mStrings= new String[title.length];

 //   String urlbase = "http://somewhere.com/data/";
 //   String imgSel = "/logo.png";
 //   for(int i=0;i<title.length;i++){
 //     mStrings[i] =  urlbase + title[9].replaceAll("[^a-zA-Z]", "").toLowerCase() + imgSel;
 //   }

    //String[] mStrings = new String[title.length];

    private String[] mStrings={
        "http://somewhere.com/data/abundance/logo.png",
        "http://somewhere.com/data/anxiety/logo.png",
        "http://somewhere.com/data/breakups/logo.png",
        "http://somewhere.com/data/bruxism/logo.png",
        "http://somewhere.com/data/decisions/logo.png",
        "http://somewhere.com/data/zen/logo.png"
    };   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:43:30.773

```
public static void main(String[] args) 
```

以上属于基本Java程序，不适用于Android。它处理自己的活动和其他程序入口点。

几乎所有代码都需要*在方法*中，尤其是`if`, `while`,`for`等语句。我们可以把这段代码放在 中`onCreate`，因为它会先被执行。

这是基本思想：

```
public class MainActivity extends Activity {
    // List / Adapter variables here

    private String[] title = {
        "Abundance",
        "Anxiety",
        "Breakups",
        "Bruxism",
        "Decisions",
        "Zen"
    };

    private String[] mStrings = new String[title.length];

    // OnClickListener here

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // super.onCreate and setContentView

        // Here is your for loop, untouched!
        String urlbase = "http://somewhere.com/data/";
        String imgSel = "/logo.png";
        for(int i=0;i<title.length;i++){
            mStrings[i] =  urlbase + title[9].replaceAll("[^a-zA-Z]", "").toLowerCase() + imgSel;
        }

        // More onCreate
    }

    // onDestroy method here
} 
```

# sqlite - Error in NetBeans (connected via SQlite) Using Radio Buttons

> ID：13216509
> 
> 赞同：1
> 
> 时间：2012-11-04T06:14:11.130
> 
> 标签：sqlite, netbeans

The program given below is not executing the rs1(Result set query) rather it is directly moving into the catch block). I'm not able to identify the error. Help please.

```
private void EnterActionPerformed(java.awt.event.ActionEvent evt)
{                                      
   Calendar cal=new GregorianCalendar();
   int minute =cal.get(Calendar.MINUTE);
   int hours=cal.get(Calendar.HOUR);
    String time1=minute+":"+hours;
    String s=Login_page.id+"";
    String sql="UPDATE emp_info SET intime=? where empid=?";

    try
    {
        switch (time) 
        {
            case "intime":
                {

                    //"Update emp_info set intime='"+time1+"' where empid=?";
                    System.out.println(time+Login_page.id); 
                    PreparedStatement pst1=conn.prepareStatement(sql);
                    pst.setString(1,time1);
                    pst.setString(2,s);
                    System.out.println(time+Login_page.id); 
                    ResultSet rs1=pst.executeQuery();
                    if(rs.next())
                    {
                        JOptionPane.showMessageDialog(null,"In time registered");

                    }

                    break;
                }
            case "outtime":
                {
                    //String sql="Insert into emp_info (outtime) values (?) where empid='"+Login_page.id+"'";

                   //pst=conn.prepareStatement(sql);
                    //pst.setString(1,time1);
                    //pst.setString(2,Login_page.user);
                    //rs=pst.executeQuery();
                    PreparedStatement pst2=conn.prepareStatement(sql);
                    pst.setString(1,time1);
                    pst.setString(2,s);
                    System.out.println(time+Login_page.id); 
                    ResultSet rs2=pst.executeQuery();
                    if(rs.next())
                    {
                        JOptionPane.showMessageDialog(null,"In time registered");

                    }
                    break;
                }
        }
}                                     
        catch(Exception e)
    { 
        JOptionPane.showMessageDialog(null,"ERROR","ERROR",JOptionPane.WARNING_MESSAGE);
    }

} 
```

# android - Can i get postion using getCurrentItem() in Fragment

> ID：13216513
> 
> 赞同：1
> 
> 时间：2012-11-04T06:14:29.893
> 
> 标签：android, android-layout

I am using ViewPager for my application.Kindly suggest me that it is possible to get current fragment position by calling getCurrentItem() method in fragment.

```
The Code is :-

@Override
    public void onResume() {
        // TODO Auto-generated method stub
        super.onResume(); 
           // i am also try this code but its giving me nullpointer exception but ican    get viewpager object here.

         int pos=_mypager.getCurrentItem();

    } 
```

Kindly suggest me how can i take current fragment position in fragment.

# c - 复制 Char * 数组会损坏数据

> ID：13216518
> 
> 赞同：1
> 
> 时间：2012-11-04T06:17:40.407
> 
> 标签：c, pointers, copy, char, corruption

一般来说，我对 C 语言比较陌生，而且我对某些代码有疑问。这是非常简单的代码：代码的目标是将给定的 char 指针数组或 char **source 复制到给定的 char **destination。

我遇到的问题是有时（通常当我在源中有两个以上的字符串时）第一个元素完全损坏，当我最终打印出目标时，它会打印出类似“;@？” 对于第一个元素，其他元素打印良好。

执行复制的代码是：

```
void CopyArrayOfStrings(char **source, int numStrings)
{
   char **destination = malloc(numStrings);

    for (int i = 0; i < numStrings; i++)
    {
        destination[i] = malloc(strlen(source[i] + 1);
        strcpy(destination[i], source[i]);
    }
} 
```

请注意，我省略了检查 malloc 的结果是否为 NULL 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:24:08.543

您需要更改`destination`as 的分配：

```
char **destination = malloc(numStrings*(sizeof(char*))); 
```

分配`char *`指针数量来保存字符串。

`char **`还要验证您是否正确地作为源字符串数组传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:42:27.777

你这样做是错的。

```
void CopyArrayOfStrings(char **source, int numStrings)
{
   char **destination = malloc(numStrings * sizeof(char *));

    for (int i = 0; i < numStrings; i++)
    {
        destination[i] = malloc(strlen(source[i]) + 1);
        strcpy(destination[i], source[i]);
        //alternatively you can use strdup() as suggested by @Christoffer
    }
} 
```

这将为您提供`numStrings`阵列的存储空间。其中的每个元素，都将指向一个以 null 结尾的字符串。

# java - using math class in java

> ID：13216519
> 
> 赞同：-3
> 
> 时间：2012-11-04T06:17:42.337
> 
> 标签：java, math, formula, quadratic

I'm trying to calculate the power of a `double` to calculate the **Quadratic Formula**

Here is the code:

```
private Scanner sc;
double a, b, c;
// Input Coefficients
public void InputCoeff() {
    sc = new Scanner(System.in);

    System.out.println("Please enter the coefficients of this quadratic equation.");
    System.out.println("'ax2 + bx + c = 0'");
    System.out.print("a = ");
    a = sc.nextDouble();
    if(a == 0){
        System.out.println("Coefficient of x2 ('a') can't be zero.");
        System.out.println("Otherwise, it'll be a linear funciton.");
    }
    System.out.print("b = ");
    b = sc.nextDouble();
    System.out.print("c = ");
    c = sc.nextDouble();
}

public void SqRt(double x, double y, double z) {
    double sqrt;
    sqrt = pow(y, 2) - (4 * x * z); // This generates an error
    System.out.println();
} 
```

Why this error?

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T06:21:48.067

更改`pow`为`Math.pow`。类`Math`是一个`static`类，需要从类本身获取方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:22:37.317

`Math.`用作函数的前缀，`pow`因为`pow(double a, double b)`它是类中`static`的方法`java.lang.Math`：

```
public void SqRt(double x, double y, double z) {
    double sqrt;
    sqrt = Math.pow(y, 2) - (4 * x * z); // This generates an error
    System.out.println(sqrt);
} 
```

另外我认为您可能希望`sqrt`从此方法返回，因此将返回类型从`void`to更改为`double`并在最后添加一个 return 语句，如下所示：

```
public dobule SqRt(double x, double y, double z) {
    double sqrt;
    sqrt = Math.pow(y, 2) - (4 * x * z); // This generates an error
    System.out.println(sqrt);
        return sqrt;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T08:43:10.527

Math.pow 是一个使用起来相对昂贵的操作，而且在许多情况下打字时间也更长，所以如果可以的话，我会避免使用它。使用起来更简单（对您和计算机来说更快）`x * x`

```
public static Set<Double> solve(double a, double b, double c) {
    Set<Double> solutions = new TreeSet<Double>();
    double discriminant = b * b - 4 * a * c;
    solutions.add((-b - Math.sqrt(discriminant)) / (2 * a));
    solutions.add((-b + Math.sqrt(discriminant)) / (2 * a));
    solutions.remove(Double.NaN);
    return solutions;
}

public static void main(String... args) {
    System.out.println(solve(1, 3, 2));
    System.out.println(solve(1, 0, -1));
    System.out.println(solve(1, 4, 4));
    System.out.println(solve(1, 0, 1));
} 
```

印刷

```
[-2.0, -1.0]
[-1.0, 1.0]
[-2.0]
[] 
```

请注意，您可以没有，一两个真正的解决方案。

# python - Mac OSX - AttributeError: 'FigureCanvasMac' object has no attribute 'restore_region'

> ID：13216520
> 
> 赞同：36
> 
> 时间：2012-11-04T06:17:58.177
> 
> 标签：python, macos, matplotlib

Walking through matplotlib's animation example on my Mac OSX machine - [http://matplotlib.org/examples/animation/simple_anim.html](http://matplotlib.org/examples/animation/simple_anim.html) - I am getting this error:-

```
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/animation.py", line 248, in _blit_clear
    a.figure.canvas.restore_region(bg_cache[a])
AttributeError: 'FigureCanvasMac' object has no attribute 'restore_region' 
```

Does anyone who has encountered this before know how to resolve this issue?

Looks like it's a known (and unresolved at this time of writing) issue - [https://github.com/matplotlib/matplotlib/issues/531](https://github.com/matplotlib/matplotlib/issues/531)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-09-12T14:43:47.900

刚设置

```
blit=False 
```

当[animation.FuncAnimation()](http://matplotlib.org/api/animation_api.html#matplotlib.animation.FuncAnimation)被调用并且它会工作。

例如（[来自 double_pendulum_animated](http://matplotlib.org/examples/animation/double_pendulum_animated.html)）：

```
ani = animation.FuncAnimation(fig, animate, np.arange(1, len(y)), interval=25, blit=False, init_func=init) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-07-07T16:22:32.503

您可以通过切换到不同的后端来避免该问题：

```
import matplotlib
matplotlib.use('TkAgg') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-12T08:03:11.297

如[https://mail.python.org/pipermail/pythonmac-sig/2012-September/023664.html](https://mail.python.org/pipermail/pythonmac-sig/2012-September/023664.html)所述，使用：

```
import matplotlib
matplotlib.use('TkAgg')

#just *before*

import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation 
```

使用 OSX 10.11.6、Python 2.71 上的 ActiveState Tkinter 安装安装 Tkinter 时，这对我有用。基本动画示例仍然有点嘈杂，直到此处的 line_ani 代码中的 blt=False：

```
line_ani = animation.FuncAnimation(fig1, update_line, 25, fargs=(data, l),
interval=50, blit=False) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T00:20:14.317

看起来这是一个已知（在撰写本文时尚未解决）问题 - [https://github.com/matplotlib/matplotlib/issues/531](https://github.com/matplotlib/matplotlib/issues/531)

# .net - 为不同的客户端公开不同的 WSDL

> ID：13216526
> 
> 赞同：1
> 
> 时间：2012-11-04T06:19:53.747
> 
> 标签：.net, wcf, web-services, c#-4.0, wsdl

我开发了一个由三个 .NET Web 服务客户端使用的 WCF 应用程序。到现在为止还挺好。

但是现在我应该更改 WCF 应用程序，以便将不同的架构发布到不同的客户端。

例如：

```
class A : IMyServices
{
    public string GetName() {}

    public Order GetOrderInfo(string orderId) {}

    public Payment GetPaymentDetails(Order order) {}
} 
```

我的一个客户不应该看到`GetPaymentDetails`（我基本上应该从那个客户创建的 WSDL 中隐藏这个 GetPaymentDetails 和 Payment 类模式）。其他客户将对其他方法有限制。

在某些情况下，`Payment`即使客户端有权访问操作，某些类的属性也不应该暴露给客户端`GetPaymentDetails`。

有什么方法可以为不同的客户公开不同的模式，并且在我的最后需要最少的更改？

要记住一件事：我的服务是使用 WCF 开发的，而使用我的服务的客户端使用传统的 .NET Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:46:56.897

如何为各种合约拆分接口并公开不同的端点（可能具有不同的安全性）？您可以按照以下方式设计合同和实施：

```
[ServiceContract]
public interface ICompleteService : IBasicService, IPaymentService
{ }

[ServiceContract]
public interface IBasicService
{
    string GetName();
    Order GetOrderInfo(string orderId);
}

[ServiceContract]
public interface IPaymentService
{
    Payment GetPaymentDetails(Order order);
}

class A : ICompleteService
{
    public string GetName() { }
    public Order GetOrderInfo(string orderId) { }

    public Payment GetPaymentDetails(Order order) { }
} 
```

然后您可以根据需要公开端点，例如：

*   具有最低安全性的 IBasicService 端点
*   具有最高安全性的 ICompleteService 端点

您可以对 Payment DataContracts 采取类似的做法。合约负责确保不同的端点可以访问不同的操作和数据，而在幕后它们将共享实现，从而最大限度地减少实现该功能所需的工作量。

# c++ - 文件持久性设置

> ID：13216527
> 
> 赞同：1
> 
> 时间：2012-11-04T06:20:01.113
> 
> 标签：c++, windows, file

我正在开发 ACID 数据库软件产品，我对 WinOS 上的文件持久性有一些疑问。

[CreateFile](http://msdn.microsoft.com/en-us/library/aa363858%28v=vs.85%29.aspx)有两个属性，**FILE_FLAG_WRITE_THROUGH**和**FILE_FLAG_NO_BUFFERING** - 我是否需要这两个属性来实现文件持久性（即覆盖各种磁盘或操作系统文件缓存）？我在问，因为他们似乎做同样的事情，并且设置**FILE_FLAG_NO_BUFFERING**会导致[WriteFile](http://msdn.microsoft.com/en-us/library/aa365747%28v=vs.85%29.aspx)抛出**ERROR_INVALID_PARAMETER**错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:39:12.380

`FILE_FLAG_NO_BUFFERING`指定不缓存。没有读写缓存，所有数据都直接进出您的应用程序到磁盘。如果您读取如此大的块以至于缓存无用，或者您自己进行缓存，这将非常有用。*请注意 WhozCraig 关于在使用此标志时正确对齐数据的评论。*

`FILE_FLAG_WRITE_THROUGH`仅表示在函数返回之前写入应直接写入磁盘。这足以实现 ACID，同时它仍然为操作系统提供了从文件中缓存数据的选项。

使用`FlushFileBuffers()`可以提供一种更有效的方法来实现 ACID，因为您可以对文件进行多次写入，然后一次性刷新它们。在一次刷新中组合写入非常重要，因为非缓存写入会将您限制在硬盘驱动器的主轴速度上。对于 7200 rpm 磁盘，每秒最多 120 次非缓存写入或刷新。

# html - CSS 段落换行到下一行

> ID：13216528
> 
> 赞同：0
> 
> 时间：2012-11-04T06:20:03.533
> 
> 标签：html, css

当浏览器窗口缩小时，我试图将段落文本换行到下一行。目前，当浏览器窗口缩小到段落文本之外时，它会停留在同一个位置并出现一个水平滚动条。

我尝试了 CSS3 text-wrap 属性，但它不起作用，或者我没有正确使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:27:23.793

您已将#header div 设置为固定宽度。如果您希望它与浏览器一起换行，请使用百分比设置宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:37:25.860

在你的 CSS 中改变它：

```
#header { 
 background: url("http://www.domainandseo.com/portfolio/page-view/images/header-bg.jpg") no-repeat transparent;
 min-height: 109px;
 /* width: 928px; *///  <-- remove this line
}

.header-content { 
 bottom: 15px;
 clear: both;
 margin-left: 190px;
 position: relative;
 /* width: 106%; *///  <-- remove this line
} 
```

**解释：** 去掉`width: 928px`from`#header`会导致header`100%`变宽，意思是“和浏览器一样宽，所以浏览器变小就缩小”。删除`width: 106%`from`#header-content`使其与 parent 一样宽`#header`。

*附注：使用超过 100% 的宽度通常不是一个好主意，它们会出现难以追踪的奇怪布局问题，通常这意味着元素最终会出现在视口之外，这几乎总是不可取的。*

# php - 没有 include_paths 为 Zend 工作

> ID：13216529
> 
> 赞同：0
> 
> 时间：2012-11-04T06:20:10.983
> 
> 标签：php, zend-framework, zend-framework2, include-path

我在这里没有想法了。实际上，我的 Zend 安装（Windows 上的 XAMPP）位于`D:\xampp\htdocs\newsite\zend\library`.

到目前为止，正如 zend.php 中所报告的（位于`D:\xampp\htdocs\newsite`并从`127.0.0.1/newsite/zend.php`.

```
.;D:\xampp\php\PEAR
.;D:\xampp\php\PEAR;/zend/library
.;D:\xampp\php\PEAR;D:\xampp\htdocs\newsite\zend\library
.;D:\xampp\php\PEAR;D:/xampp/htdocs/newsite/zend/library
.;D:/xampp/htdocs/newsite/zend/library
.;D:\xampp\htdocs\newsite\zend\library
D:\xampp\htdocs\newsite\zend\library
.;./zend/library;D:\xampp\php\PEAR;D:\xampp\htdocs\newsite\zend\library
.;./zend/library;D:\xampp\php\PEAR;D:\xampp\htdocs\newsite\zend\library;/zend/library
.;./zend/library;D:\xampp\php\PEAR;D:\xampp\htdocs\newsite\zend\library;D:/xampp/htdocs/newsite/zend/library 
```

编辑：是的，我通过 get_include_path() 获得了以上所有内容。我在 PHP 5.3.8 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:05:04.410

假设您没有尝试使用自动加载，这将是排除自动加载器问题的好主意。

由于 include_path 返回 ".;D:\xampp\php\PEAR;D:\xampp\htdocs\newsite\zend\library" 我希望一个简单的包含工作。

假设您使用的是 ZF2，如果返回上述包含路径，则此测试不应出错：

```
<?php
include ('Zend\Version\Version.php'); 
```

如果确实出错，请尝试使用完整路径来验证它是包含路径还是导致文件不被包含的其他内容。

```
<?php
include ('D:\xampp\htdocs\newsite\zend\library\Zend\Version\Version.php'); 
```

如果您的测试比上述更复杂，则可能不是包含路径出错了。您可以发布失败的代码吗？

此外，您可能会考虑安装 ZF2 Skeleton App，它显示了当前设置自动加载、命名空间等的最佳实践。

[https://github.com/zendframework/ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:44:27.753

在使用 Zend 库时，请确保

1）您在包含路径中有 Zend 文件夹的父目录 D:\xampp\htdocs\newsite\zend\library 必须在包含路径中，而不是 D:\xampp\htdocs\newsite\zend\library\Zend

2) PHP 没有在安全模式下运行，PHP 也更新到 5.2+ 或 5.3+，如果打开 apc，它必须关闭 apc.include_once_override。

如果仍然无法正常工作，请通过打印 get_include_path() 或 phpinfo() 进行检查；

应该是这样的。

# javascript - 遍历数组中的 3 个项目

> ID：13216530
> 
> 赞同：0
> 
> 时间：2012-11-04T06:20:11.793
> 
> 标签：javascript

我有以下数组：

```
var text = [
    "RISE AND SHINE, JONATHON! HMM, ", 
    "THAT'S A MOUTHFUL, HOW ABOUT ", 
    "I JUST CALL YOU JOHN? MY ", 
    "NAME IS PROFESSOR ", 
    "PHIL. I BUILT YOU FROM ", 
    "SCRATCH. I WANT TO TELL YOU ",
    "A LITTLE STORY BEFORE WE START."
]; 
```

然后我循环遍历数组：

```
for (var i = 0; i < 3; i++) {
    this.font.draw(text[i]);
} 
```

这显然输出：

```
RISE AND SHINE, JONATHON! HMM,
THAT'S A MOUTHFUL, HOW ABOUT 
I JUST CALL YOU JOHN? MY 
```

我需要帮助的是创建一个函数，它将遍历接下来的 3 行然后显示：

```
NAME IS PROFESSOR
PHIL. I BUILT YOU FROM
SCRATCH. I WANT TO TELL YOU 
```

..等等。

这是我为 JavaScript/HTML5 游戏编写的聊天气泡代码，其中我的聊天对话在任何给定时间仅容纳 3 行文本。

一旦对话到达最后一句话。我希望它从头开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:40:09.117

我认为您需要一个通用方法，也许这个[小提琴](http://jsfiddle.net/nbsQm/)应该有所帮助。
这是JS方法。

```
var text = [
    "RISE AND SHINE, JONATHON! HMM, ",
    "THAT'S A MOUTHFUL, HOW ABOUT ",
    "I JUST CALL YOU JOHN? MY ",
    "NAME IS PROFESSOR ",
    "PHIL. I BUILT YOU FROM ",
    "SCRATCH. I WANT TO TELL YOU ",
    "A LITTLE STORY BEFORE WE START."
];
var len=3;
for(var i=0;i<text.length;i+=len)
{
  for(var j=0;j<len && (i+j)<text.length;j++)
  {
      $('#text').html($('#text').html()+text[i+j]+'<br/>');
  }
  $('#text').html($('#text').html()+'<br/><br/>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:55:32.730

如果我理解正确，您可以做的是备份您的阵列，`splice`直到所有行都被读取。换句话说：

```
var textOut = text,
    len = text.length / 3,
    i = 0;
for ( ; i < len; i++ ) {
  setTimeout(function() {
    console.log( textOut.splice(0, 3).join(' ') );
  }, i*1000 );
} 
```

以上将每秒记录 3 行，直到读取所有行。
顺便说一句，您不需要每个字符串末尾的空格，因为您可以使用`join`空格。

**演示：http:** [//jsbin.com/atenib/9/edit](http://jsbin.com/atenib/9/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:31:38.047

我不太确定这是什么意思，但您可以创建一个简单的函数：

```
function display_text(start, end) {
    for (var i = start; i < end; i++) {
        this.font.draw(text[i]);
    }
} 
```

那么你会调用它 3 次：

```
display_text(0, 2)
display_text(3, 5)
display_text(6, 6) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T07:04:14.350

如果我正确地想象你的聊天气泡，这样的事情可能对你有用：

```
 var text = [
    "RISE AND SHINE, JONATHON! HMM, ", 
    "THAT'S A MOUTHFUL, HOW ABOUT ", 
    "I JUST CALL YOU JOHN? MY ", 
    "NAME IS PROFESSOR ", 
    "PHIL. I BUILT YOU FROM ", 
    "SCRATCH. I WANT TO TELL YOU ",
    "A LITTLE STORY BEFORE WE START."
];

var max_lines = 3;

var length = text.length;

num_bubbles = length/max_lines; 
if (!(length%max_lines)){
    num_bubbles = num_bubbles + 1;
}

var print_bubble = function(i,text){
    console.log("***start of text bubble****");
    for(j=i*max_lines; j<length && j<(i+1)*max_lines; ++j){
        console.log(text[j] + '\n');//print text bubble contents
    }
}

for (var i = 0; i <num_bubbles ;++i){
    print_bubble(i, text);
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T07:13:53.647

这不是一个干净的解决方案，但有效：[JS Fiddle here](http://jsfiddle.net/XP9eE/1/)

```
document.getElementById("output").innerHTML= "";
var text = [
    "RISE AND SHINE, JONATHON! HMM, ", 
    "THAT'S A MOUTHFUL, HOW ABOUT ", 
    "I JUST CALL YOU JOHN? MY ", 
    "NAME IS PROFESSOR ", 
    "PHIL. I BUILT YOU FROM ", 
    "SCRATCH. I WANT TO TELL YOU ",
    "A LITTLE STORY BEFORE WE START."
];
var counter = 0;
var s = 0;  //start index
var e = 0;  //end index
var l = text.length;
var out = "";  //just for testing/debugging

while(counter < 15)  //to prevent the browser from freezing/infinite loop
{
  if(e+3 < l)  //take 3 items if we have more than 3 left
      e = e +3;
  else
      e = l;  //else use the remaining

  for (var i = s; i < e; i++) {
    out = (text[i])+"<br>";
      document.getElementById("output").innerHTML+=out;

  }
document.getElementById("output").innerHTML+="<HR>";  //separates after 3 items
s = e;
if(e == l) //reset: start from zero
{
    s = 0;
    e = 0;
}

  counter++;    
}
​ 
```

# java - 是否有任何工具可以为我使用 Eclipse 编译的 Android 项目生成 DFD？

> ID：13216537
> 
> 赞同：1
> 
> 时间：2012-11-04T06:21:54.917
> 
> 标签：java, android, eclipse, eclipse-plugin

我做了一个Android项目。这是一个大项目，我发现很难为我的代码创建 DFD。Eclipse 是否有任何工具或插件可以使用我的代码自动生成 DFD？

# ruby-on-rails - 查找本月在 Rails 3 中创建的记录？

> ID：13216538
> 
> 赞同：1
> 
> 时间：2012-11-04T06:22:10.160
> 
> 标签：ruby-on-rails, activerecord

在尝试查找本月创建的记录时，我发现很难找出问题。

**我在控制器中的查询看起来像这样**

```
@sh = SupportHistory.where('created_at BETWEEN ? AND ?', Time.now.beginning_of_month, DateTime.now.end_of_month) 
```

**我的 sql 看起来像这样**

```
SELECT `support_histories`.* FROM `support_histories`  WHERE (created_at BETWEEN '2012-10-31 18:30:00' AND '2012-11-30 18:29:59') 
```

问题是它找到了上个月的记录，如何解决？

* * *

**更新**

我能够通过这个链接找出问题： [Timezone with rails 3](https://stackoverflow.com/questions/4362663/timezone-with-rails-3)

**现在我在控制器中的查询看起来像这样**

```
@sh = SupportHistory.where('created_at BETWEEN ? AND ?', DateTime.now.in_time_zone.beginning_of_month, DateTime.now.in_time_zone.end_of_month) 
```

**现在我的 sql 看起来像这样**

```
SELECT `support_histories`.* FROM `support_histories`  WHERE (created_at BETWEEN '2012-11-01 05:
00:00' AND '2012-12-01 05:59:59') 
```

现在我有另一个问题，有没有办法避免'in_time_zone'？还是让它自动发生？:)

# python - 插入查询中的错误：表未知

> ID：13216539
> 
> 赞同：0
> 
> 时间：2012-11-04T06:22:12.183
> 
> 标签：python, sql, database, ms-access, firebird

> **可能重复：**
> [ProgrammingError: '42S02', '[42S02] [Microsoft]](https://stackoverflow.com/questions/13210956/programmingerror-42s02-42s02-microsoft)

我编写了一个程序，它在一个描述符（数据库，包含数据库 Northwind 的结构 - 在单独的表中，包含表、索引、限制、域的列表）数据库 Northwind 在 Firebird 中构建它。然后我连接到数据库 Northwind (Access)，我想通过查询数据库 Northwind (Access) 的表的 SQL 内容复制到创建的相同 Firebird 数据库的表中。

```
import pyodbc
#import kinterbasdb
import firebirdsql
import os
import json,sqlite3,sql
con = sqlite3.connect('borey.db')
sampling_tables=con.cursor()
sampling_fields=con.cursor()
sampling_constraints=con.cursor()
sampling_constraints_fields=con.cursor()
sampling_indices=con.cursor()
sampling_indices_fields=con.cursor()
sampling_indices_props=con.cursor()
sampling_fields_from_constraints=con.cursor()
js=[]

sampling_tables.execute(sql.sqltables)

for table in sampling_tables:
    tabledict=dict(inform_about_table='?', fields='?', constraints='?', indices='?')
    information_about_table_dict=dict(name=table[1], description=table[2], can_add=table[3], can_edit=table[4], can_delete=table[5])
    #print(js_information_about_table)
    tabledict['inform_about_table']=information_about_table_dict
    #print(tabledict)
    table_id=table[0]
    sampling_fields.execute(sql.sqlfields,(table_id,))
    listfields=[]
    for field in sampling_fields:
        fielddict=dict(position=field[0], name=field[1], description=field[2], datatype=field[3], char_length=field[4], can_input=field[5], can_edit=field[6], show_in_grid=field[7],
                      is_mean=field[8], autocalculated=field[9], required=field[10])
        listfields.append(fielddict)
    tabledict['fields']=listfields
    #print(tabledict)
    sampling_constraints.execute(sql.sqlconstraints,(table_id,))
    listconstraints=[]
    for constraint in sampling_constraints:
        constraintdict=dict(name=constraint[1], constrtype=constraint[2], items='?', reference=constraint[3])
        sampling_constraints_fields.execute(sql.sql_constr_det,(constraint[0],table_id))
        listitems=[]
        for constr_det in sampling_constraints_fields:
            listitems.append(constr_det[0])
        constraintdict['items']=listitems
        listconstraints.append(constraintdict)
    tabledict['constraints']=listconstraints
    #print(tabledict)
    sampling_indices.execute(sql.sqlindices,(table_id,))
    listindices=[]
    for index in sampling_indices:
        indexdict=dict(name=index[1], items='?', position='?', props='?')
        index_id=index[0]
        sampling_indices_fields.execute(sql.sql_indices_fields,(table_id,index_id))
        #sampling_indices_props.execute(sql.sql_indices_descend,(table_id,index_id, ))
        listfields=[]
        listpositions=[]
        listprops=[]
        for index_det in sampling_indices_fields:
            listfields.append(index_det[0])
            listpositions.append(index_det[1])
            fieldinindex=index_det[0]
        sampling_indices_props.execute(sql.sql_indices_descend,(table_id,index_id,fieldinindex))            
        for index_desc in sampling_indices_props:
            listprops.append(index_desc[0])
        indexdict['items']=listfields
        indexdict['position']=listpositions
        indexdict['props']=listprops
        listindices.append(indexdict)
    tabledict['indices']=listindices
    #print(tabledict)
    js.append(tabledict)
os.remove('D:/boreas.fdb')
conn=firebirdsql.create_database(host='localhost', database='D:/boreas.fdb', user='sysdba', password='masterkey')
#conn=firebirdsql.connect(host='localhost',database='D:/ThirdTask/test.fdb', user='sysdba', password='masterkey')
cur=conn.cursor()
for nametable in js:
    s=''
    s+='create table '+nametable['inform_about_table']['name']+'\n'
    s+='('+'\n'
    countfield=0
    for namefield in nametable['fields']:
        s+='   '
        if namefield['name']=='COUNT':
            s+='QUANTITY'
        else:
            if namefield['name']=='MINIMUM QUANTITY FOR ORDER REPETITION':
                s+='MINIMUM_QUANTITY'
            else:
                if namefield['name']=='PRICE ACCORDING TO THE PRICE-LIST':
                    s+='LIST_PRICE'
                else:
                    if (namefield['name'].count(' ')!=0) or (namefield['name'].count('-')!=0) or (namefield['name'].count('/')!=0):
                        s+='"'+namefield['name']+'"'
                    else:                    
                        s+=namefield['name']
        if namefield['datatype']=='FMTBCD':
            s+='   '+' INTEGER NOT NULL'
        else:
            if namefield['datatype']=='STRING': 
                s+='   '+'VARCHAR'
            else:
                if namefield['datatype']=='MEMO':
                    s+='   '+'BLOB SUB_TYPE 1'
                else:            
                    if namefield['datatype']=='LARGEINT':
                        s+='   '+'INTEGER'
                    else:
                        if namefield['datatype']=='SMALLINT':
                            s+='   '+'INTEGER'
                        else:
                            if namefield['datatype']=='CURRENCY':
                                s+='   '+'NUMERIC(18,2)'
                            else:
                                if namefield['datatype']=='BOOLEAN':
                                    s+='   '+'INTEGER'
                                else:    
                                    s+='   '+namefield['datatype']           
        if namefield['datatype']=='STRING':
            s+='('+str(namefield['char_length'])+')'
        countfield+=1
        #if countfield!=len(nametable['fields']):
        s+=','+'\n'
        #else:
            #s+='\n'
            #s+='\n'
    for nameconstraint in nametable['constraints']:
        if nameconstraint['constrtype']=='PRIMARY':
            s+='   CONSTRAINT '+nameconstraint['name']+ ' PRIMARY KEY('
            countfieldinconstr=0
            for namefield in nameconstraint['items']:
                countfieldinconstr+=1
                if countfieldinconstr!=len(nameconstraint['items']):
                        if (namefield.count(' ')!=0) or (namefield.count('-')!=0) or (namefield.count('/')!=0):
                            s+='"'+namefield+'"'+','
                        else:
                            if namefield=='COUNT':
                                s+='QUANTITY'+','
                            else:    
                                s+=namefield+','
                else:
                        if (namefield.count(' ')!=0) or (namefield.count('-')!=0) or (namefield.count('/')!=0):
                            s+='"'+namefield+'"'+')'+'\n'
                        else:
                            if namefield=='COUNT':
                                s+='QUANTITY'+')'+'\n'
                            else:       
                                s+=namefield+')'+'\n'
    s+=');'+'\n'
    print s
    cur.execute(s)
    #conn.commit()
    #conn.begin()
    for nameindex in nametable['indices']:
        #print 'nameidex[props] ', nameindex['props']
        s=''
        for prop in nameindex['props']:
            if prop==0:
                if (nameindex['name'].count(' ')!=0) or (nameindex['name'].count('-')!=0) or (nameindex['name'].count('/')!=0):
                    s+='create ascending index "'+nameindex['name'] + '" on '+nametable['inform_about_table']['name']+' ('
                else:
                    if nameindex['name']=='IDX_INFORMATION_ABOUT_ORDER_INVENTORY_ID':
                        s+='create ascending index ' + 'IDX_INVENTORY_ID' + ' on '+nametable['inform_about_table']['name']+' ('
                    else:
                        if nameindex['name']=='IDX_INFORMATION_ABOUT_ORDER_ORDERDETAILS':
                            s+='create ascending index ' + 'IDX_ORDERDETAILS' + ' on '+nametable['inform_about_table']['name']+' ('
                        else:    
                            if nameindex['name'].count('INFORMATION_ABOUT_ORDER_')!=0:
                                s+='create ascending index ' + nameindex['name'][1:4]+nameindex['name'][-len(nameindex['name'])+28:] + ' on '+nametable['inform_about_table']['name']+' ('
                            else:
                                s+='create ascending index '+nameindex['name'] + ' on '+nametable['inform_about_table']['name']+' ('
            countitem=0
            for nameitem in nameindex['items']:
                if countitem!=len(nameindex['items'])-1:
                        if (nameitem.count(' ')!=0) or (nameitem.count('-')!=0) or (nameitem.count('/')!=0):
                            s+='"'+nameitem+'"'+', '
                        else:
                            if nameitem=='COUNT':
                                s+='QUANTITY'+', '
                            else:  
                                s+=nameitem+', '
                else:
                        if (nameitem.count(' ')!=0) or (nameitem.count('-')!=0) or (nameitem.count('/')!=0):
                            s+='"'+nameitem+'"'+');'+'\n'
                        else:
                            if nameitem=='COUNT':
                                s+='QUANTITY'+');'+'\n'
                            else:  
                                s+=nameitem+');'+'\n'
                countitem+=1
        print s
        cur.execute(s)
        #conn.commit()
for nametable in js:
    for nameconstraint in nametable['constraints']:
        if nameconstraint['constrtype']=='FOREIGN':
            s=''
            s+='ALTER TABLE '+nametable['inform_about_table']['name']+'\n'
            s+='  '+'ADD CONSTRAINT '+nameconstraint['name']+' FOREIGN KEY ('  
            for namefield in nameconstraint['items']:
                if (namefield.count(' ')!=0) or (namefield.count('-')!=0) or (namefield.count('/')!=0):
                    s+='"'+namefield+'")'+'\n'
                else:
                    s+=namefield+')'+'\n'
            s+='      '+'REFERENCES '+nameconstraint['reference']
            sampling_fields_from_constraints.execute(sql.sql_fields, (nameconstraint['reference'],))
            for fields in sampling_fields_from_constraints:
                field=fields[0]
                if (field.count(' ')!=0) or (field.count('-')!=0) or (field.count('/')!=0):
                    s+=' ("'+field+'");'+'\n'
                else:
                    s+=' ('+field+');'+'\n'
            print s
            cur.execute(s)
            #conn.commit()            
#conn.commit()
s="""
create table CLIENTS
(
   ID   INTEGER NOT NULL,
   COMPANY   VARCHAR(50),
   "LAST NAME"   VARCHAR(50),
   "FIRST NAME"   VARCHAR(50),
   "E-MAIL ADDRESS"   VARCHAR(50),
   "JOB TITLE"   VARCHAR(50),
   "BUSINESS PHONE"    VARCHAR(25),
   "HOME PHONE"   VARCHAR(25),
   "MOBILE PHONE"   VARCHAR(25),
   "FAX NUMBER"   VARCHAR(25),
   ADDRESS   BLOB SUB_TYPE 1,
   CITY   VARCHAR(50),
   "STATE/PROVINCE"   VARCHAR(50),
   "ZIP/POSTAL CODE"   VARCHAR(15),
   "COUNTRY/REGION"   VARCHAR(50),
   "WEB-SITE"   VARCHAR(25),
   NOTES   BLOB SUB_TYPE 1,
   INCLUDING   BLOB
);
"""
s1='create ascending index IDX_CLIENTS_CITY on CLIENTS (CITY);'
"""db = 'D:/ThirdTask/Northwind.accdb' 
connaccess = win32com.client.Dispatch(r'ADODB.Connection')
DSN = ('PROVIDER = Microsoft.Jet.OLEDB.4.0;DATA SOURCE = ' + db +  ';') 
connaccess.Open(DSN) 
rs = win32com.client.Dispatch(r'ADODB.Recordset') 
strsql = "select * from deer" 
rs.Open(strsql, conn, 1, 3) 
t = rs.GetRows() 
connaccess.Close() 
"""
conAcc = pyodbc.connect('DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=D:\ThirdTask\Northwind.accdb')
SqlAccess=conAcc.cursor();
SqlAccess.execute(sql.sql_count_records_clients);
CountOfRecords=SqlAccess.fetchone()[0];
print CountOfRecords
id=0
while id<CountOfRecords:
    id+=1
    SqlAccess.execute(sql.sql_allfields_clients, (id,))
    clientdict=dict(ident=id, organization=SqlAccess.fetchone()[1]);
    print clientdict
    s='INSERT INTO CLIENTS (ID, COMPANY) VALUES'
    s+='('+str(clientdict['ident'])+', ' +'\''+clientdict['organization']+'\''+')';
    print s
    cur.execute(s)
conn.commit()    
#print s
#cur.execute(s)
#conn.commit()
#cur.execute(s1)
#conn.commit()
#cur=con.cursor()
con.close()
conn.close()
conAcc.close();
#print "Connect succesfully" 
```

调试时我显示文本sql查询，其中包括（所有输出未引用）

```
create table CLIENTS
(
   ID    INTEGER NOT NULL,
   COMPANY   VARCHAR(50),
   "LAST NAME"   VARCHAR(50),
   "FIRST NAME"   VARCHAR(50),
   "E-MAIL ADDRESS"   VARCHAR(50),
   "JOB TITLE"   VARCHAR(50),
   "BUSINESS PHONE"   VARCHAR(25),
   "HOME PHONE"   VARCHAR(25),
   "MOBILE PHONE"   VARCHAR(25),
   "FAX NUMBER"   VARCHAR(25),
   ADDRESS   BLOB SUB_TYPE 1,
   CITY   VARCHAR(50),
   "STATE/PROVINCE"   VARCHAR(50),
   "ZIP/POSTAL CODE"   VARCHAR(15),
   "COUNTRY/REGION"   VARCHAR(50),
   "WEB-SITE"   VARCHAR(25),
   NOTES   BLOB SUB_TYPE 1,
   INCLUDING   BLOB,
   CONSTRAINT PK_CLIENTS_ID PRIMARY KEY(ID)
);

create ascending index IDX_CLIENTS_CITY on CLIENTS (CITY);

create ascending index IDX_CLIENTS_COMPANY on CLIENTS (COMPANY);

create ascending index IDX_CLIENTS_FIRST_NAME on CLIENTS ("FIRST NAME");

create ascending index IDX_CLIENTS_LAST_NAME on CLIENTS ("LAST NAME");

create ascending index IDX_CLIENTS_POSTAL_CODE on CLIENTS ("ZIP/POSTAL CODE");

create ascending index IDX_CLIENTS_PRIMARYKEY on CLIENTS (ID);

create ascending index "IDX_CLIENTS_STATE/PROVINCE" on CLIENTS ("STATE/PROVINCE");
29
{'organization': u'\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0410', 'ident': 1}
INSERT INTO CLIENTS (ID, COMPANY) VALUES(1, 'Организация А')

Traceback (most recent call last):
  File "D:\ThirdTask\connect.py", line 263, in <module>
    cur.execute(s)
  File "C:\Python27\lib\site-packages\firebirdsql\fbcore.py", line 495, in execute
    stmt_type, stmt_handle = self._execute(query, params)
  File "C:\Python27\lib\site-packages\firebirdsql\fbcore.py", line 457, in _execute
    (h, oid, buf) = self.transaction.connection._op_response()
  File "C:\Python27\lib\site-packages\firebirdsql\wireprotocol.py", line 764, in _op_response
    return self._parse_op_response()
  File "C:\Python27\lib\site-packages\firebirdsql\wireprotocol.py", line 308, in _parse_op_response
    raise OperationalError(message, gds_codes, sql_code)
OperationalError: Dynamic SQL Error
SQL error code = -204
Table unknown
CLIENTS
At line 1, column 13 
```

特地提出对印浆成型的要求

```
INSERT INTO CLIENTS (ID, COMPANY) VALUES(1, 'Организация А') 
```

以及当它运行错误时（见上文）。怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:42:17.410

您需要在创建表后执行提交。

# r - 在 R 中撤消一轮

> ID：13216544
> 
> 赞同：3
> 
> 时间：2012-11-04T06:22:43.900
> 
> 标签：r

这很奇怪，我非常怀疑你能做到我所要求的，因为这个概念非常愚蠢。如果我要对某物进行四舍五入，它是否可以不四舍五入？

所以：

```
x <- round(rnorm(10))
x 
```

你不知道原来的东西是什么，你能回到原来的数字`rnorm`吗？

我问是因为当我为用户编写函数时，我经常在其中添加舍入参数以使显示更好，但我总是让用户控制数字并允许独立控制列表对象的数字舍入。这使得一个充满`digits=`参数的函数非常快。如果我知道用户可以以某种方式神奇地重新提取原始值，我会将这些参数放在函数内部。我可以保持数字不变，分配给一个类并使用打印方法，但对于一个列表来说，这充其量是一种痛苦。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T09:32:25.523

如果您对实际数据本身进行四舍五入，通常您无法恢复它。相反，您应该使用自定义更改显示`print`或尝试类似`option(digits=3)`. 在随机数生成的非常特殊的情况下，如果您首先设置种子 ( `set.seed`)，记住它，然后从同一个种子重新生成随机数据，您可以恢复原始数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T15:11:18.237

您可以使用`sprintf`来修改事物的打印方式。

```
myfun <- function(){
    x <- rnorm(3)
    print(sprintf("%.3f", x))
    invisible(x)
}

out <- myfun()
#[1] "-0.527" "0.226"  "-0.168"
out
#[1] -0.5266562  0.2262599 -0.1680460 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:23:06.210

因为我无法抗拒这样做的艰难...

```
x<-runif(100)*10
z<-round(x,2)
y<-x-z 
```

# html - Html 5，锚点之间的动画

> ID：13216547
> 
> 赞同：1
> 
> 时间：2012-11-04T06:23:16.723
> 
> 标签：html, animation, scroll, anchor

我正在考虑为我的企业创建一个网站，其中所有内容都在一个长页面上，用户将无法滚动浏览，您必须通过单击按钮来浏览网站，然后在锚点之间进行动画处理指向下一页。我将制作一个以办公室为起点的长图像，然后用户可以上天，然后为不同的页面留出空间。那么我将如何阻止用户滚动以及如何使其动画或在每个锚点之间缓慢滚动。是否也可以水平滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:56:41.337

我会尝试通过暂时禁用浏览器的滚动功能来解决您的问题。您可以通过取消绑定与按键或鼠标滚动关联的任何事件侦听器来实现此目的。

您可以通过阻止与事件处理程序关联的默认操作来拒绝触发鼠标滚动。从技术上讲，这是如何在 Javascript 中完成的：

```
window.onload = function() {
    if (window.addEventListener) {
        window.addEventListener('DOMMouseScroll', disableScroll, false);
    } else if (window.attachEvent) { //IE event handler
        window.attachEvent('DOMMouseScroll', disableScroll);
    } else {
        window.onscroll = disableScroll;
    }
}

function disableScroll(event) {
    event = event || window.event;
    if (event.preventDefault) {
        event.preventDefault(); // prevent the default action to get triggered\
    }
    event.returnValue = false; // IE method
}

var keys = [37, 38, 39, 40];
function onKeydown(event) {
    var e = event || window.event;
    for (var i = 0, len =  keys.length; i < len; i++) {
        if (e.keyCode == keys[i]) {
            console.log("Forbidden event");
            e.preventDefault();
        }
    }
}

document.onkeydown = onKeydown; 
```

然后，您可以使用锚点构建代码，然后单击前进到所需位置。而已。

# vb.net - 如何处理从 SSIS 包中的 VB.NET 类库抛出的异常？

> ID：13216548
> 
> 赞同：0
> 
> 时间：2012-11-04T06:23:17.643
> 
> 标签：vb.net, ssis

我们在 SSIS - 脚本任务中使用在 VB.NET 中创建的库来执行各种与数据库相关的活动。

当从包内调用 VB.NET 类库引发异常时，如何强制 SSIS 包失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T08:22:50.800

[http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/4ca66ffa-0005-40fe-96aa-58b1959a8120/](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/4ca66ffa-0005-40fe-96aa-58b1959a8120/)

“根据您如何配置包的其余部分，您有以下选项（可能更多）：

1.  `Dts.TaskResult = (int)ScriptResults.Failure;`使用 (C#)或 (VB.Net)返回失败`Dts.TaskResult = CInt(ScriptResults.Failure)`
2.  `throw new Exception()`使用 (C#)或 (VB.Net)引发错误`Throw (New Exception())`

选项 1 要求您的其余组件通过成功优先约束连接到脚本。”

# android - 如何在 onClick 方法中关闭通过膨胀布局获得的按钮的警报框？

> ID：13216553
> 
> 赞同：1
> 
> 时间：2012-11-04T06:24:22.670
> 
> 标签：android, layout, android-alertdialog

我创建了充气布局，并制作了我想在单击按钮时关闭对话框的按钮。

```
final AlertDialog.Builder alert = new AlertDialog.Builder(this);
LayoutInflater factory = LayoutInflater.from(this);
final View textEntryView = factory.inflate(R.layout.subtractalert,null); 
```

按钮代码

```
 final Button delete = (Button) textEntryView.findViewById(R.id.deleteButton);
                        delete.setOnClickListener(new OnClickListener() {

                            public void onClick(View v) {

                                // I want to close the dialog at here 

                            }

}); 
```

感谢所有回答，如果您想要更多代码，请告诉我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:27:45.397

您必须首先调用[`.show()`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#show%28%29)该`alert`变量。然后，您可以使用[`.dismiss()`](http://developer.android.com/reference/android/app/Dialog.html#dismiss%28%29)摆脱对话框，只要您的语句在同一方法内。

```
final AlertDialog.Builder alert = new AlertDialog.Builder(this);
// ...
final AlertDialog dialog = alert.show();
// ...
delete.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        dialog.dismiss();
    }
}); 
```

# c - wait() 在 Unix 上做什么？

> ID：13216554
> 
> 赞同：7
> 
> 时间：2012-11-04T06:24:42.333
> 
> 标签：c, unix, ubuntu, wait

我正在阅读`wait()`Unix 系统书籍中的函数。这本书包含一个程序，其中有`wait(NULL)`。我不明白那是什么意思。在其他节目中有

```
while(wait(NULL)>0) 
```

...这也让我挠头。

谁能解释上面的功能在做什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-04T06:31:39.217

等着[(2)](http://linux.die.net/man/2/wait)

> 所有这些系统调用都用于等待调用进程的子进程的状态变化，并获取有关其状态已更改的子进程的信息。状态变化被认为是：孩子终止；孩子被信号拦住；或者孩子被信号恢复了

因此`wait()`允许一个进程等待，直到它的一个子进程改变它的状态，例如存在。如果`waitpid()`使用进程 id 调用它，它会等待该*特定*子进程更改其状态，如果`pid`未指定 a，则它等效于调用`wait()`并等待*任何子*进程更改其状态。

该`wait()`函数在成功时返回子 pid，因此在这样的循环中调用它时：

```
while(wait(NULL)>0) 
```

这意味着等到所有子进程退出（或更改状态）并且没有更多的子进程未等待（或直到发生错误）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T06:32:00.667

一个快速的谷歌建议，`wait(NULL)`等待任何子进程完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:30:45.643

`wait(NULL)`这应该相当于`waitpid(-1, NULL, 0)`

`wait(NULL)`等待所有子进程完成

# python - 对 API 包装器进行单元测试

> ID：13216555
> 
> 赞同：2
> 
> 时间：2012-11-04T06:25:29.310
> 
> 标签：python, api, unit-testing, rest, wrapper

我正在为经过身份验证的 RESTful API 编写 Python 包装器。我现在正在编写我的测试套件（也是这里的第一次测试编写者）但有几个问题：

1.a) 我如何拨打电话，但不必将凭据硬编码到测试中，因为我会将它扔到 Github 上？

1.b）我有点知道嘲笑，但不知道如何去做。这会让我不必调用实际的服务吗？解决此问题的最佳方法是什么？

2）我要测试什么 - 只需确保我的方法通过字典中的某些项目？

3）我应该在这里遵循的任何最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T11:18:50.677

Hey TJ if you can show me an example of one function that you are writing (code under test, not the test code) then I can give you an example test.

Generally though:

1.a You would mock the call to the external api, you are not trying to test whether their authentication mechanism, or your internet connection is working. You are just trying to test that you are calling their api with the correct signature.

1.b Mocking in Python is relatively straight forward. I generally use the [mocking library written by Michael Foord](http://www.voidspace.org.uk/python/mock/). `pip install mock` will get you started. Then you can do things like

```
import unittest
from mock import call, patch
from my_module import wrapper_func

class ExternalApiTest(unittest.TestCase):

    @patch('my_module.api_func')
    def test_external_api_call(self, mocked_api_func): 

        response = wrapper_func('user', 'pass')

        self.assertTrue(mocked_api_func.called)
        self.assertEqual(
            mocked_api_func.call_args_list,
            [call('user', 'pass')]
        )
        self.assertEqual(mocked_api_func.return_value, response) 
```

In this example we are replacing the `api_func` inside `my_module` with a mock object. The mock object records what has been done to it. It's important to remember *where* to patch. You don't patch the location you imported the object from. You patch it in the location that you will be using it.

1.  You test that your code is doing the correct thing with a given input. Testing pure functions (pure in the functional programming sense) is pretty simple. You assert that given a input a, this function returns output b. It gets a bit trickier when your functions have lots of side effects.

2.  If you are finding it too hard or complicated to test a certain functiob/method it can mean that it's a badly written piece of code. Try breaking it up into testable chunks and rather than passing objects into functions try to pass primitives where possible.

# jquery - 使用jQuery确定表中显示的日期是否早于今天的日期

> ID：13216559
> 
> 赞同：0
> 
> 时间：2012-11-04T06:26:52.013
> 
> 标签：jquery, css

我正在寻求帮助来完成这个看似简单的任务。我只是不知道如何解决这个问题。

基本上，我有一个表单，我从 jQuery 的 datepicker 中为工作订单选择一个日期（截止日期）。结果与其他工作订单一起显示在表格中的单独页面上。

我试图弄清楚如何确定表中显示的日期是否过期，如果日期早于今天的日期，则更改 CSS。因为表格中有几行，每一行都有一个需要评估的截止日期，这让我很难过。

```
<table>
<tr>
<td class="dueDate">November 1, 2012</td>
</tr>
<tr>
<td class="dueDate">November 4, 2012</td>
</tr>
<tr>
<td class="dueDate">November 26, 2012</td>
</tr>
</table> 
```

这是显示表单时表格的布局。这是我能想到的最接近的确定显示的日期是否早于今天的日期。

```
$('.dueDate').each(function(){
var dueDate = $(this).val();
var today = new Date();
if (Date.parse(dueDate) < Date.parse(today)){
$(".dueDate").addClass("pastDue");
}        
}); 
```

这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:33:56.767

你也需要使用选择器，`.dueDate`不是`#dueDate` 因为dueDate是一个类，而不是一个ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:30:33.910

尝试`Date.parse`

```
 if (Date.parse(dueDate) < Date.parse(today)) {
      $(".dueDate").addClass("pastDue");// . for class
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:32:37.327

最好的方法是将日期转换为 Unix 时间戳，所以它只是一个数字。然后你将只是比较数字，通过这样做你会知道日期是否已经过去。您可以使用我从这里获得的这个功能：[如何在 Javascript 中将常规日期转换为 unixtime？](https://stackoverflow.com/questions/2295939/how-to-convert-regular-date-to-unixtime-in-javascript)

```
function covertToUnixTime(yourDate) {
    return new Date(yourDate.substring(4, 8) + '/' + 
                    yourDate.substring(2, 4) + '/' + 
                    yourDate.substring(0, 2)).getTime() / 1000;
}

covertToUnixTime('12092008');   // Returns: 1221170400
//12-09-2008 is the date 
```

您还可以使用`jQuery.now()`时间戳来获取实际日期，然后在两者之间进行比较，有关它的更多信息，请查看此处：[http](http://api.jquery.com/jQuery.now/) ://api.jquery.com/jQuery.now/ 我猜就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T22:40:48.700

我发现这篇文章很有帮助，但下面的代码行不起作用：

```
 var dueDate = $(this).val(); 
```

相反，我使用了下面的代码并且它有效

```
 var dueDate = $(this).text(); 
```

# c# - 使用 SqlConnection.GetSchema 仅获取表（无视图）

> ID：13216564
> 
> 赞同：4
> 
> 时间：2012-11-04T06:27:45.147
> 
> 标签：c#, sql-server, ado.net, views, sqlconnection

当我使用

```
SqlConnection.GetSchema("Tables"); 
```

它返回目标数据库的所有表和视图。

有没有办法只返回表？我所做的所有研究都表明我这样做是正确的，但它总是返回视图，就像它们是表格一样。我在调试中深入研究了 DataTable，我什至找不到区别。报告的数据类型相同......据我所知，它无法区分视图和表格。（这在某种程度上是有意义的，因为所有意图和目的的视图都是一张表。）

我正在使用 Northwind 数据库进行测试。

我正在用 C# 编写应用程序。

这是我正在运行以获取架构信息的代码。很简单。

```
SQLCon.Open();
DataTable tables = SQLCon.GetSchema("Tables");
SQLCon.Close(); 
```

我非常想使用 getschema 方法，而不必以另一种方式查询数据库......如果可能的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T07:38:23.503

根据[这篇文章](http://msdn.microsoft.com/en-us/library/ms254969.aspx)，返回的数据表有一列`table_type`，它告诉你它是 a`VIEW`还是 a `BASE TABLE`。
使用该列过滤掉 C# 端的视图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-29T20:40:01.553

这是完整的语法

```
DataTable table = connection.GetSchema("Tables", new string[] { null, null, null, "BASE TABLE" }); 
```

# r - quantmod - getSymbols.MySQL 格式

> ID：13216567
> 
> 赞同：2
> 
> 时间：2012-11-04T06:28:36.470
> 
> 标签：r, quantmod

我使用 quantmod getSymbols 查询 MySQL 数据库：

```
pot<-getSymbols(Symbols="pot",src='MySQL',user='root',password='root',dbname='data',
   adjust=TRUE,db.fields=c("date","open","high","low","close","volume","time"),
   auto.assign=FALSE,
   field.names=c("ticker","date","time","open","high","low","close","volume"),
   format="%Y%m%d") 
```

返回：搞乱日期转换。

> ```
>  pot.Open  pot.High  pot.Low   pot.Close pot.Volume pot.Adjusted 
> ```
> 
> 7058-02-20 “40.1700” “40.1900” “40.1000” “40.1500” “104900” “09:30:59”
> 7058-02-20 “40.0900” “40.1725” “40.0900” “40.1725” “13200” “09”： 31:53”
> 7058-02-20 “40.1900” “40.3394” “40.1800” “40.2900” “16500” “
> 09:32:57” 7058-02-20 “40.3000” “40.3700” “40.2400” “40.2400” “36500” " "09:33:58"
> 7058-02-20 "40.2600" "40.3000" "40.2000" "40.2500" "6700" "09:34:59"
> 7058-02-20 "40.2600" "40.3100" "40.2000" " 40.2000" " 13900" "09: 35:59"

我希望它看起来像这样：

> ```
>  pot.Open  pot.High  pot.Low   pot.Close pot.Volume pot.Adjusted 
> ```
> 
> 2012-10-31 09:30:59 “40.1700” “40.1900” “40.1000” “40.1500” “104900” “09:30:59”
> 2012-10-31 09:31:53 “40.0900” “40.1725” “40.0900” “”“40.1725”“13200”“09:31:53”
> 2012-10-31 09:32:57“40.1900”“40.3394”“40.1800”“40.2900”“16500”“09:32:57”
> 2012-10- 31 09:33:58 “40.3000” “40.3700” “40.2400” “40.2400” “36500” “09:33:58”
> 2012-10-31 09:34:59 “40.2600” “40.3000” “40.2000” “40.2500” “ 6700” “09:34:59”
> 2012-10-31 09:35:59 “40.2600” “40.3100” “40\. 2000""40.2000""13900""09:35:59"

我相信这与表中的日期格式（%Y%m%d）ex 有关。20121031 与 quantmod 通常期望的正常 (%Y-%m-%d) ex.2012-10-31 格式相反。文档说这可以通过 setDefaults(getSymbols.MySQL,...) 更改，但没有说明如何。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-09T15:56:00.217

抱歉，我不允许发表评论，但是您的返回列名称包含“ticker”，并且 db.fields 没有指定这一点，导致两者之间没有对齐，这不是问题吗？

从我所包含的示例中可以看出，实际表的名称应该与股票代码相同。所以不应该有一个“股票代码”列。

```
library(quantmod)
library(RMySQL)

MySymbols = c("MRK","GOOG","AAPL")

getSymbols(MySymbols, src="yahoo")
dbc = dbConnect(MySQL(), user="youruser", pass="yourpass", host="yourhost", dbname="yourdb")
for(I in 1:length(MySymbols) {
        dbWriteTable(dbc, name=MySymbols[i],value=as.data.frame(get(MySymbols[i])), overwrite=TRUE)
        res = dbSendQuery(dbc, paste("ALTER TABLE `yourtable`.`",MySymbols[i],
    "` CHANGE COLUMN `row_names` `Date` DATE NULL DEFAULT NULL,
                CHANGE COLUMN `", MySymbols [i],"_Open` `o` DOUBLE NULL DEFAULT NULL,
                CHANGE COLUMN `", MySymbols [i],"_High` `h` DOUBLE NULL DEFAULT NULL,
                CHANGE COLUMN `", MySymbols [i], "_Low` `l` DOUBLE NULL DEFAULT NULL,
                CHANGE COLUMN `", MySymbols [i], "_Close` `c` DOUBLE NULL DEFAULT NULL,
                CHANGE COLUMN `", MySymbols [i], "_Volume` `v` DOUBLE NULL DEFAULT NULL,
                CHANGE COLUMN `",MySymbols[i],"_Adjusted` `a` DOUBLE NULL DEFAULT;", sep=""))
        dbClearResult(res)
} 
```

# disassembly - 了解逆向 C 编。在组装中

> ID：13216573
> 
> 赞同：0
> 
> 时间：2012-11-04T06:30:07.000
> 
> 标签：disassembly

我刚刚开始学习逆向工程（自学）。我知道组装到一些可以理解的程度。反汇编 C 代码后弹出的基本指令对我来说几乎是可以理解的（比如每条指令的含义）。既然开始了，有人可能会觉得这些问题很愚蠢，请推荐一些关于倒车基础知识的好电子书，这样我就可以停止问菜鸟问题了。好吧，查询是：- 这是一个简单的 C 代码

```
#include<stdio.h>
int main(void)
{
    printf("hello world");
} 
```

然后是main的反汇编代码。

```
0x004013b0 <+0>:     push   %ebp                         //saves ebp to stack
0x004013b1 <+1>:     mov    %esp,%ebp                    //saves esp onto ebp
0x004013b3 <+3>:     and    $0xfffffff0,%esp             //alignong the stack
0x004013b6 <+6>:     sub    $0x10,%esp                   //creating 16 bytes on stack
0x004013b9 <+9>:     call   0x401980 <__main>            //main call
0x004013be <+14>:    movl   $0x403064,(%esp)             ?? what is it exactly doing??
0x004013c5 <+21>:    call   0x401bf0 <printf>            //print call
0x004013ca <+26>:    leave
0x004013cb <+27>:    ret 
```

在这里我无法理解它在做什么（尽管 0x403064 中的内容似乎被复制到 esp 的堆栈中）- movl $0x403064,(%esp)

在这个汇编代码中，我需要知道“hello world”存储在哪里？另外，如果有人可以建议我一些好的阅读材料，以便从基础学习逆向。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:57:47.807

`printf`在这种情况下，它在堆栈上等待其参数。您的字符串存储在内存中的地址是`$0x403064`. 所以你可以看到说明

```
movl   $0x403064,(%esp) 
```

将此地址复制到堆栈上（请注意 周围的大括号`esp`）。

老实说，这不是通常的方式。但是您的程序非常简单，因此编译器会进行一些微优化。这有助于跳过一些机器指令。通常，人们会使用某种指令的组合将地址复制到堆栈，然后在调用之后（在我们这里的`lea`调用约定中）通常使用指令来纠正之后的情况。`push``cdecl``add``esp`

编辑：

在使用 gdb 进行调试之后，我使用命令`x/sb 0x403064`在内存中显示字符串。

```
GNU gdb (GDB) 7.5
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-mingw32".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from d:\temp\C++11\test.exe...(no debugging symbols found)...don
e.
(gdb) start
Temporary breakpoint 1 at 0x4013b3
Starting program: d:\temp\C++11\test.exe
[New Thread 5348.0x16f4]

Temporary breakpoint 1, 0x004013b3 in main ()
(gdb) disassemble $eip
Dump of assembler code for function main:
   0x004013b0 <+0>:     push   %ebp
   0x004013b1 <+1>:     mov    %esp,%ebp
=> 0x004013b3 <+3>:     and    $0xfffffff0,%esp
   0x004013b6 <+6>:     sub    $0x10,%esp
   0x004013b9 <+9>:     call   0x401990 <__main>
   0x004013be <+14>:    movl   $0x403064,(%esp)
   0x004013c5 <+21>:    call   0x401c10 <printf>
   0x004013ca <+26>:    mov    $0x0,%eax
   0x004013cf <+31>:    leave
   0x004013d0 <+32>:    ret
   0x004013d1 <+33>:    nop
   0x004013d2 <+34>:    nop
   0x004013d3 <+35>:    nop
   0x004013d4 <+36>:    add    %al,(%eax)
   0x004013d6 <+38>:    add    %al,(%eax)
   0x004013d8 <+40>:    add    %al,(%eax)
   0x004013da <+42>:    add    %al,(%eax)
   0x004013dc <+44>:    add    %al,(%eax)
   0x004013de <+46>:    add    %al,(%eax)
End of assembler dump.
(gdb) x/sb 0x403064
0x403064 <_Jv_RegisterClasses+4206692>: "hello world"
(gdb) x/12xb 0x403064
0x403064 <_Jv_RegisterClasses+4206692>: 0x68    0x65    0x6c    0x6c    0x6f
0x20    0x77    0x6f
0x40306c <_Jv_RegisterClasses+4206700>: 0x72    0x6c    0x64    0x00
(gdb) 
```

# jquery - 是否可以让 jQuery Ajax() 模拟 HTML FORM 接受字符集参数？

> ID：13216574
> 
> 赞同：0
> 
> 时间：2012-11-04T06:30:09.760
> 
> 标签：jquery, ajax, forms, svg

我正在使用“accept-charset='utf-8'”将 SVG 数据发布到操作页面。在操作页面上，我将该数据插入到表中。稍后，在另一个页面中，我从表中查询该数据并通过 Batik 运行它以将其转码为 PNG 文件。它运作良好。

```
<form action="test_action.cfm" method="post" target="_blank" accept-charset="utf-8"> 
```

如果我从表单标记中删除了 accept-charset="utf-8" ，那么稍后（在转码页面上）我会收到“3 字节 UTF-8 序列的无效字节 2”错误（尝试转码时）。

此外，我尝试使用 jQuery 的 .ajax() 尝试在后台处理操作页面的每一种方式都会遇到相同的错误。使用 'accept-charset="utf-8"' 使一切正常。

尝试使用 $.ajax() 将 SVG 发送到后台的操作页面：

```
var lclSVG = $('#myDiv')[0].innerHTML;
$.ajax({
  url: "myAction.cfm",
  type: "POST",
  data: ({myInfo: lclSVG}),
}); 
```

有没有办法通过 $.ajax() 发布这些数据，同时强制 .ajax() 执行类似 'accept-charset="utf-8"' 的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:07:16.590

According to the [JQuery ajax() docs](http://api.jquery.com/jQuery.ajax/), the default already is UTF-8\. But maybe try to foce the setting anyhow, as per those docs, with the `contentType` option. You might also want to look at the `processData` option, as it specifically mentions XML handling.

I agree with your analysis, but have you verified that the corruption is occurring during the upload process, or some quirk to do with your transcoding ([more details against this question](https://stackoverflow.com/questions/13216397/jquery-ajax-seems-to-alter-svg-data-sent-to-coldfusion-server)): perhaps things are running *slightly* different between your normal file upload and your AJAX upload?

To eliminate this, rather than processing right through to transcoding, maybe just write the data to an SVG and test it before trying the transcoding (just as a troubleshooting step, I mean).

You might get some more hints as to what's going on by using Firebug to look at the request to the server that sends the file: compare the two approaches and look for differences.

Not an explicit answer, I'm afraid, but perhaps some stuff to look at.

# java - 如何通过我的安卓应用查看我的安卓应用创建的数据库？

> ID：13216576
> 
> 赞同：1
> 
> 时间：2012-11-04T06:30:21.247
> 
> 标签：java, android, sqlite

我正在创建一个收集用户位置（小区广播位置代码）并使用用户名称选项保存该位置的应用程序，例如说我的 CB 位置代码是 546034，现在我的应用程序允许我使用名称存储该位置代码我选择说“家”。

所以，基本上我的应用程序有以下模块，

1.  收集用户CB位置。
2.  从该位置的用户那里收集自定义名称。
3.  将这些值存储在数据库中。

我已经成功完成了上述所有模块。

我的第三个模块有一个子模块，它有一个用户选项，可以显示和删除数据库值，屏幕截图如下所示，

![在此处输入图像描述](../Images/50cf99b9ffda6847452fe1543805824f.png)

现在，

当用户选择“查看我的位置数据库”选项时，他应该能够查看和删除条目我已经学会了如何查询我的数据库值，并且我坚持创建列表视图并提供删除选项。

我获取数据库值和查询值的代码如下，

```
submit.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {

            String locname = name.getText().toString();

            if(locname.length()==0)
            {
                Toast.makeText(getBaseContext(), "Please enter the location     name, for example 'Home'.", Toast.LENGTH_LONG).show();
            }
            else
            {
                SQLiteDatabase cd = openOrCreateDatabase("mydata",    MODE_WORLD_READABLE, null);
                cd.execSQL("CREATE TABLE IF NOT EXISTS MLITable  (CblocationCode INT(10), CblocationName VARCHAR);");
                cd.execSQL("INSERT INTO MLITable VALUES ('"+str+ "','"+locname+ "');");
                cd.close();
                Toast.makeText(getBaseContext(), "value successfully entered.", Toast.LENGTH_LONG).show();
            }
        }
    });

    viewdb.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View arg0) {
            // here comes the code for viewing the database and deleting

            SQLiteDatabase db = openOrCreateDatabase("mydata", MODE_WORLD_READABLE, null);
            Cursor c = db.rawQuery("SELECT * FROM MLITble", null);
            db.close();
        }
    }); 
```

我可以看到我已经阅读了表格值，但我无法为这些值创建显示。

需要帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:57:20.870

您正在从数据库中获取数据，但没有代码可以显示它们。您需要创建一个 ListView 或其他东西来显示数据。

这是有关如何执行此操作的教程：

[http://tausiq.wordpress.com/2012/08/22/android-list-view-from-database-with-cursor-adapter/](http://tausiq.wordpress.com/2012/08/22/android-list-view-from-database-with-cursor-adapter/)

# unix - 使用 sed 将段落转换为行

> ID：13216581
> 
> 赞同：1
> 
> 时间：2012-11-04T06:31:10.120
> 
> 标签：unix, sed

使用 sed 和任何基本命令，我试图计算每个单独段落中包含许多单独段落的单词数。每一段都以特定的数字开头并增加。例子：

0:1.1 这是第一段……

0:1.2 这是第二段……

困难的是，每个段落都是一个由单词包裹的段落，而不是一行。如果它们在单行上，我可以计算每个段落中的单词。我该怎么做？感谢您的帮助

我确实想出了如何计算每个段落：

grep '[0-9]:[0-9]' 文件 | wc -l

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:47:13.073

这可能对您有用（GNU sed）：

```
sed -r ':a;$bb;N;/\n[0-9]+:[0-9]+\.[0-9]+/!s/\n/ /g;ta;:b;h;s/\n.*//;s/([0-9]+:[0-9]+\.[0-9]+)(.*)/echo "\1 = $(wc -w <<<"\2")"/ep;g;D' file 
```

它将每个部分组成一行，然后计算部分中的单词减去部分编号（换行符被空格替换）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T09:13:01.087

此`awk`解决方案可能对您有用：

```
awk '/^[0-9]:[0-9]\.[0-9]/{ 
       if (pass_num) printf "%s, word count: %i\n", pass_num, word_count
       pass_num=$1
       word_count=-1
     }
     { word_count+=NF }
     END { printf "%s, word count: %i\n", pass_num, word_count }
    ' file 
```

测试输入：

```
# cat file
0:1.1 I am le passage one.
There are many words in me.

0:1.2 I am le passage two.
One two three four five six
Seven

0:1.3 I am "Hello world" 
```

测试输出：

```
0:1.1, word count: 11
0:1.2, word count: 12
0:1.3, word count: 4 
```

* * *

这个怎么运作：

每个单词由空格分隔，因此每个单词可以由 中的每个字段表示`awk`，即一行中的字数等于`NF`。字数每行相加，直到下一段。

当它遇到一个新的段落（由一个段落编号的存在表示）时，它

*   打印出上一段的数量和字数。
*   将段落编号设置为此新的段落编号
*   重置段落字数（`-1`因为我们不想计算段落数）

该`END{..}`块是必需的，因为最后一段没有导致它打印出段落编号和字数的触发器。

是在遇到第一段时`if (pass_num)`压制。`printf``awk`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:55:18.223

```
$ cat file
0:1.1 This is the first passage...
welcome to the SO, you leart a lot of things here.

0:1.2 This is the second passage...
wer qwerqrq            ewqr e
0:1.3 This is the second passage... 
```

使用 sed 和 GNU grep：

```
$ sed -n '/0:1.1/,/[0-9]:[0-9]\.[0-9]/{//!p}' file | grep -Eo '[[:alpha:]]*'   | wc -l
11 
```

0:1.1 -> 在此处给出您要计算的段落编号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T10:09:48.537

Here's one way with GNU awk:

```
awk -v RS='[0-9]+:[0-9]+\\.[0-9]+' -v FS='[ \t\n]+' 'NF > 0 { print R ": " NF - 2 } { R = RT }' 
```

If it is run on the file listed by *doubledown*, the output is:

```
0:1.1: 11
0:1.2: 12
0:1.3: 4 
```

### Explanation

This works by splitting the input into records according to `[0-9]+:[0-9]+\\.[0-9]+` and splitting into fields at whitespace. The record separator is off by one, hence the `{R = RT }`, the field counter is off by two because each record starts and ends with an `FS`, hence the `NF - 2`.

### Edit - only count fields containing `[:alnum:]`

The above also counts e.g. ellipsis (...) as words, to avoid this do something like this:

```
awk -v RS='[0-9]+:[0-9]+\\.[0-9]+' -v FS='[ \t\n]+' '
  NF > 0 { 
    wc = NF-2
    for(i=2; i<NF; i++)
      if($i !~ /[[:alnum:]]+/)
        wc--
    print R ": " wc
  } 
  { R = RT }' 
```

# php - 从 PDO 查询返回值的问题

> ID：13216582
> 
> 赞同：0
> 
> 时间：2012-11-04T06:31:36.237
> 
> 标签：php, mysql, pdo

我遇到了从我的 PDO 语句返回的值的问题。

这是我的代码：

```
//Execute test
$this->checkConnect();
$stmt = $this->dbh->prepare("SELECT p_id FROM People WHERE lastName = :param1 AND firstName = :param2");
$stmt->bindParam(':param1', $this->lName);
$stmt->bindParam(':param2', $this->fName);
$stmt->execute();
$count = $stmt->rowCount();

//Determine value of test
if($count == FALSE)
{
    return FALSE;
}
else
{
    $dummyvar = $stmt->fetch();
    $this->p_id = implode($dummyvar);
} 
```

当我浏览我的数据库记录时，我注意到某个值与我输入的内容不一致。当我执行查询时，它应该`p_id`从 table中获取值`People`。很简单。但是，发生的情况是该数字被附加了两次。例如，say`p_id`等于 1。`this->p_id`将等于 11。或者`p_id`等于 2，输出将为 22。我在 MySQL 中执行了此查询，并且该值是正确的。我不确定我的 php 代码中发生了什么。也许与内爆有关？我不知道。

任何见解将不胜感激。

另外：我还应该声明它`p_id`是唯一的，因此只能返回一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:37:12.160

首先，您的 fetch 语句没有返回您认为的内容。默认输出数组将同时具有列名键和数字键，如下所示：

```
array(
    0 => 1,
    'pid' => 1,
) 
```

您可能只想获得一个数字索引数组。像这样使用`PDO::FETCH_NUM`：

```
$dummyvar = $stmt->fetch(PDO::FETCH_NUM); 
```

其次，如果您要输出多个字段（在这种情况下显然不是），那么您必须修复您的 implode 语句。你必须告诉它在不同的数组值之间放置什么字符。

```
$this->p_id = implode(' ', $dummyvar); 
```

例如：

```
echo implode( ', ', array('a', 'b', 'c') );
> 'a, b, c' 
```

参考：

*   [PDOStatement::fetch](http://www.php.net/manual/en/pdostatement.fetch.php)
*   [内爆](http://www.php.net/manual/en/function.implode.php)

# ios - IOS6、MPMoivePlayerViewController 和设备方向

> ID：13216584
> 
> 赞同：0
> 
> 时间：2012-11-04T06:31:38.070
> 
> 标签：ios, ios5, video, ios6, uiinterfaceorientation

我的项目将支持的界面方向设置为 UIInterfaceOrientationMaskPortrait。

当我使用 presentMoviePlayerViewControllerAnimated: 弹出一个 MPMoivePlayerViewController 时，在 IOS5 上，当我转动设备时，控制器会进行自动方向旋转，但在 IOS6 上它始终是纵向的。

我怎样才能让它充当IOS5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:29:51.513

Apple 改变了 iOS 6 中处理方向的方式：

> ### 控制支持哪些界面方向 (iOS 6)
> 
> 当 UIKit 收到一个方向通知时，它使用 UIApplication 对象和根视图控制器来确定是否允许新的方向。如果两个对象都同意支持新方向，则将用户界面旋转到新方向。否则设备方向将被忽略。
> 
> 当视图控制器出现在根视图控制器上时，系统行为会以两种方式发生变化。首先，在确定是否支持方向时，使用呈现的视图控制器而不是根视图控制器。其次，呈现的视图控制器还可以提供首选方向。如果视图控制器全屏显示，则用户界面以首选方向显示。期望用户看到方向与设备方向不同并旋转设备。当内容必须以新的方向呈现时，最常使用首选方向。

因此，如果您的应用程序设置为仅允许纵向模式，则无论任何控制器“sais”如何，您都永远不会进入横向模式。

有关更多信息，请参阅[控制支持的界面方向 (iOS 6)](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW1)。

# gwt - 在 gwt 中编写一个布尔表达式生成器

> ID：13216588
> 
> 赞同：0
> 
> 时间：2012-11-04T06:31:59.387
> 
> 标签：gwt

我想在 gwt 中构建一个布尔表达式构建器。类似于以下内容：-

假设布尔表达式只允许有限数量的唯一操作数。如有必要，这些操作数可以带参数

例如

IsSunny("今天") AND IsNotRaining("晚上")

IsLeapYear("2012") AND IsFullMoon("今天")

只有一组有限的操作数。例如，IsSunny、IsNotRaining、IsLeapYear、IsFullMoon。

我想构建一个允许客户端快速构建此类布尔表达式的 GWT UI。仅支持预定义的操作数集。每个操作数可以有不同数量的参数和 UI，使用强制参数的类型和数量。括号也是允许的。

构建这样一个 UI 的好方法是什么？GWT 是否有任何内置支持？

谢谢，阿杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:28:21.790

警告：我是这个项目的作者，但是... [http://redquerybuilder.appspot.com/](http://redquerybuilder.appspot.com/)有点相似，是用 GWT 编写的。

目前我只发布了 JS 友好版本，但我很乐意提供 GWT 版本。

面向 SQL，但这是我所知道的唯一朝这个方向发展的东西。

如果您想从头开始编写，我愿意分享技巧。

# vb.net - ToolStripDropDownItem - 如何正确使用？网络

> ID：13216590
> 
> 赞同：0
> 
> 时间：2012-11-04T06:32:14.113
> 
> 标签：vb.net

我试图弄清楚如何使用我添加到工具条中的项目。下面是我正在使用的代码，我在工具条中添加了几个项目“test1，test2”，但是如何选择它们并添加点击事件的代码？

谢谢。

```
Public Class MenuStripCustom
Inherits MenuStrip

Private WithEvents NavToolStrip As New ToolStripMenuItem("File")

Sub New()

    Dim tsi As New ToolStripMenuItem
    Dim tsi2 As New ToolStripDropDownButton
    Me.Items.Add(NavToolStrip)
    NavToolStrip.DropDownItems.Add("test1")
    NavToolStrip.DropDownItems.Add("test2")
End Sub

Private Sub NavToolStripDropDownButton_Click(sender As Object, e As EventArgs) Handles NavToolStrip.DropDownItemClicked
        ' What do I put here to handle different drop down items?
        ' ie. select case (dropDownItem)
        ' case: test1?
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:24:26.947

有多种方法可以将事件处理程序添加到 ToolStripMenuItem。您可以将 AddressOf 它传递给 ToolStripMenuItem 构造函数或使用 AddHandler 关键字。但是，将 ToolStripMenuItems 声明为“WithEvents”可能是最简单的，然后您可以在 VS IDE 中查看事件并将它们连接起来。例如：

```
Private WithEvents NavToolStrip As New ToolStripMenuItem("File")
Private WithEvents tsi As New ToolStripMenuItem("Test1")
Private WithEvents tsi2 As New ToolStripMenuItem("Test2")

Sub New()
    MenuStrip1.Items.Add(NavToolStrip)

    NavToolStrip.DropDownItems.Add(tsi)
    NavToolStrip.DropDownItems.Add(tsi2)

End Sub

Private Sub tsi_Click(sender As Object, e As EventArgs) Handles tsi.Click
    MsgBox("Test1")
End Sub

Private Sub tsi2_Click(sender As Object, e As EventArgs) Handles tsi2.Click
    MsgBox("Test2")
End Sub 
```

# c# - Windows Store 应用内的地图

> ID：13216594
> 
> 赞同：0
> 
> 时间：2012-11-04T06:33:00.947
> 
> 标签：c#, google-maps, maps, bing-maps, windows-store-apps

我想将地图嵌入到 Windows 应用商店应用程序中。我想平滑缩放/平移并将交互式元素固定到地理位置。

我假设我的替代方案是 Bing 地图或谷歌地图？我应该嵌入浏览器控件吗？如果是，是否难以以编程方式控制/交互？

还有其他选择吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:18:49.490

你可以试试

[http://www.codeproject.com/Articles/408457/Using-Bing-Maps-For-Windows-8-Metro-Apps-Csharp-Ja](http://www.codeproject.com/Articles/408457/Using-Bing-Maps-For-Windows-8-Metro-Apps-Csharp-Ja)

我自己还没有尝试过，但我将要发布调查结果。

# java - 我想用java来计算网络速度，但我不知道怎么做

> ID：13216599
> 
> 赞同：0
> 
> 时间：2012-11-04T06:35:02.803
> 
> 标签：java, io, network-programming

我想用下载文件来计算速度，但结果不成功。操作如下：</p>

我下载一个文件每秒读取一次文件大小，同时使用一个小工具观察网速。最后发现文件大小每秒增加的少（300 KB/S），但是工具显示JVM下载速度高达4M/S。

现在我没有一些想法，我需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:55:04.230

当您查看实际数据量时，您通常以字节（8 位）为单位进行测量，并且没有 TCP/IP 标头（可以是 54 字节）。当您查看原始连接时，您正在以位为单位测量并包括标题。如果数据包相当小（即具有显着的报头开销），您可以有一个 4 Mb/s（b 表示比特）的连接，而实际数据只有 300 kB（B 表示字节或八位字节）。

# python - 为什么我的 Python 程序会发出运行时错误 - NZEC（非零退出代码）？

> ID：13216600
> 
> 赞同：0
> 
> 时间：2012-11-04T06:35:46.810
> 
> 标签：python, runtime-error

这是 11 月挑战的 CodeChef 问题。我不打算作弊。我的程序适用于提供的测试输入。但是服务器会生成运行时 NZEC 错误。你能帮我找出我的错误吗？

```
T= raw_input()
for i in xrange(int(T)):
    G= raw_input()
    for j in xrange(int(G)):
        I, N, Q = raw_input().split()
        I= int(I)
        N= int(N)
        Q= int(Q)
        a= [I]*N
        print a
        count=0
        for k in xrange(N):
            if((N-k) % 2 != 0):
                if a[k]==1:
                    a[k]=2
                else: a[k]=1
        print a
        for k in xrange(N):
            if( a[k] == Q):
                count= count+1
        print count 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:10:57.973

[问题描述](http://www.codechef.com/NOV12/problems/CONFLIP)说 N 可以是`10**9`。因此`a= [I]*N`可能需要几 GB 的内存。您的程序可能会因 MemoryError 异常而终止，该异常会导致非零退出状态 ( `1`)。

# mysql - 使用 UNION 获取的数据数组的 MySQL 键名

> ID：13216601
> 
> 赞同：1
> 
> 时间：2012-11-04T06:35:55.873
> 
> 标签：mysql, union

桌子`objects`

```
id    name    is_animal
-----------------------
1     dog     1
2     cat     1
3     chair   0
4     rabbit  1 
```

查询

```
(SELECT name AS animal_name FROM objects WHERE is_animal = 1)
UNION
(SELECT name AS object_name FROM objects WHERE is_animal = 0) 
```

和结果

```
[animal_name] => dog
[animal_name] => cat
[animal_name] => rabbit
[animal_name] => chair    // expected: [object_name] => chair 
```

我已经`AS`在第二个 SELECT 中使用过，为什么它返回`animal_name`而不是`object_name`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:25:47.613

与`UNION`：

```
(SELECT name AS animal_name,'' object_name FROM objects WHERE is_animal = 1)
UNION
(SELECT '' as animal_name, name AS object_name FROM objects WHERE is_animal = 0) 
```

与`case`：

```
select case is_animal when 1 name else '' end as  animal_name,
       case is_animal when 0 name else '' end as  object_name
from objects 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:26:26.577

在 UNION 查询中，总是选择第一个 SELECT 的列名作为最终结果视图的列名。如果每个单独的 SELECT 的相应列名不同，您如何期望列名最终出现？在 UNION 查询的后续 SELECT 中甚至不提及列名是合适的，因为它没有增加任何意义。

从[文档](http://dev.mysql.com/doc/refman/5.0/en/union.html)MySQL 使用相同的

```
(SELECT 1 AS sort_col, col1a, col1b, ... FROM t1)
UNION
(SELECT 2, col2a, col2b, ... FROM t2) ORDER BY sort_col, col1a; 
```

# c# - 将类的字段与其名称进行比较

> ID：13216602
> 
> 赞同：0
> 
> 时间：2012-11-04T06:36:01.227
> 
> 标签：c#, .net

我想要一个字典，其中 value 是 myClass 类型的字段，而 key 是该字段的名称。我试过 FieldInfo：

```
actions = new Dictionary<string, myClass> ();
FieldInfo[] fields = triggerScript.GetType().GetFields(BindingFlags.Public | BindingFlags.Instance);
int iterator = 0;

for (int i = 0; i < fields.Length; i++) 
{
    var field = fields[i];
    if (field.FieldType == typeof(myClass))
    {
        actions.Add (fields[i].Name, fields[i].GetValueDirect());
    }
} 
```

但是 FieldInfo 不包含对其描述的字段的引用。我怎样才能做到这一点？

* * *

## 例子：

```
public SimpleAction OnClick; 
```

在字典中：

> 键 - `OnClick`;
> 
> 价值 - `(SimpleAction)OnClick`;

## 更新

我有一个指定的 tyte SimpleAction 对象，并且想将它的引用和名称存储在字典中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:44:06.773

您可以使用`ToDictionary`LINQ 中的方法更简单。此外，要获取字段的值，请使用方法[`GetValue`](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx)：

```
var actions = triggerScript.GetType()
           .GetFields(BindingFlags.Public | BindingFlags.Instance)
           .Where(field => field.FieldType == typeof (SimpleAction))
           .ToDictionary(field => field.Name, 
                         field => (SimpleAction)field.GetValue(triggerScript)); 
```

# php - 从函数回显的麻烦

> ID：13216604
> 
> 赞同：0
> 
> 时间：2012-11-04T06:36:39.463
> 
> 标签：php, mysql, pdo

因此，如果我在函数本身中编写回显命令，则无法将变量从函数传递到调用该函数的页面，该变量会很好地回显，但是当我从调用该函数的文件中回显时它根本不会显示任何东西。这是我的代码示例：

```
//CHECK LOGIN CREDINTIALS
function checkLogin($conn,$myusername, $mypassword, $count) {

       $stmt = $conn->prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name`= :userName AND `password`= :userPass');
       $stmt->bindValue(':userName', $myusername);
       $stmt->bindValue(':userPass', $mypassword);
       $stmt->execute();
       $count = $stmt->fetchColumn();
       echo "$count<br>";
} 
```

这是我试图将变量从函数传递到的文件

```
<?php
session_start();
$_SESSION['myusername'] = $myusername;
session_is_registered("myusername");
session_is_registered("mypassword");

require 'functions.php';
require 'DB.php';
ob_start();
// Define $myusername and $mypassword 
$myusername =$_POST['myusername']; 
$mypassword =md5($_POST['mypassword']);

checkLogin($conn, $myusername, $mypassword, $count);

echo $count;
// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"

    $myusername1 = $_SESSION['myusername'];
    //UPDATE LAST LOGIN IN DATABASE
    date_default_timezone_set('America/Chicago');
    $last_login = date('m/d/Y h:i:s a', time());
    lastLogin($conn,$myusername1,$last_login);
    header("location:form.php");

}
else {
echo $count;
echo "$mypassword<br>";
echo "$myusername<br>";
echo "Wrong Username or Password";

}
ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:42:34.453

这样做

```
function checkLogin($conn,$myusername, $mypassword) {

       $stmt = $conn->prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name`= :userName AND `password`= :userPass');
       $stmt->bindValue(':userName', $myusername);
       $stmt->bindValue(':userPass', $mypassword);
       $stmt->execute();
       $count = $stmt->fetchColumn();
       return $count;
} 
```

在你的代码中

```
$myusername =$_POST['myusername']; 
$mypassword =md5($_POST['mypassword']);
$count=checkLogin($conn,$myusername, $mypassword);
if($count==1){
  //your code
} 
```

# facebook - Facebook 授权：处理取消

> ID：13216605
> 
> 赞同：0
> 
> 时间：2012-11-04T06:36:52.460
> 
> 标签：facebook, ios5, ios6, fbconnect

我正在构建一个使用 facebook 授权服务的应用程序。但是，我在两种情况下面临问题

1.  用户被发送到 facebook 应用程序以获得许可。相反，她按下主页按钮并再次打开我的应用程序。在这种情况下，我需要做两件事：重新向她展示登录页面（并从该页面中删除动画）：为此，我需要知道用户在没有登录 fb 的情况下回到了应用程序。湾。取消发送给 fb 的最后一个请求：如果用户尝试再次登录，我的应用程序会向 fb 授权系统发送两个请求，这会导致 fb 应用程序中出现两个弹出窗口，并且还会向我的应用程序返回多个调用。

2.  用户按下取消按钮：在这种情况下，fb 应用程序不会重定向到我的应用程序。我读到这是一个错误并已修复；但是，这仍然对我不起作用。有什么建议么？

我曾尝试在论坛上搜索类似的Q；但是，一直没能找到确切的答案。如果我错过了相关问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:02:22.567

如果您使用适用于 iOS 的 Facebook SDK 3.1，那么

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    [FBSession.activeSession handleDidBecomeActive]; 
```

}

如果用户碰巧通过点击主页按钮等操作取消了身份验证流程，则将取消身份验证请求。然后，您可以通过再次显示您的登录视图来重置。

如果您升级到最新的 Facebook iOS 应用程序，应该修复 (2) 问题。

# php - 如何将此时间戳转换为 PHP？必应地图 API

> ID：13216606
> 
> 赞同：1
> 
> 时间：2012-11-04T06:37:01.820
> 
> 标签：php, json, api, timestamp

我一直在使用 json 和 PHP 使用 Bing API。该数组为日期吐出以下内容：

```
[end] => /Date(1354867200000)/
[lastModified] => /Date(1349441488000)/ 
```

我认为这是一个 unix 时间戳，但我认为不是。我所做的是这样的 preg_replace

```
$last_updated = $resource->lastModified;
$last_updated_timestamp = preg_replace('/[^0-9.]*/','',$last_updated); 
```

然后尝试将其转换为日期

```
$last_updated_date = date('l F d Y g:i:s A',$last_updated_timestamp); 
```

它向我显示的日期范围从 1967 年到 2000 年的结果。这是我不知道的另一种时间戳吗？如果是这样，我该如何纠正？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:41:32.640

数字部分是自时代以来的毫秒数（1970 年 1 月 1 日午夜——unix 时间戳的毫秒版本）。这是在 JSON 中表示日期的一种相当传统的方式（因为 JSON 没有日期类型）。

所以`getdate(theNumber / 1000)`会给你日期（因为[`getdate`](http://www.php.net/manual/en/function.getdate.php)自大纪元以来预计秒数，而不是毫秒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:44:55.263

如果您想要将 unix 时间戳转换为日期格式，您可以通过执行以下操作来实现：

```
date("F j, Y g:i a", strtotime($unix_timestamp)); 
```

`$unix_timestamp`在这种情况下，您的 Unix 时间戳在哪里。您始终可以通过在其前面添加来将其打印出来以进行测试`echo`。

所以在这种情况下，它可能是：

```
$last_updated_date = date("F j, Y g:i a", strtotime($last_updated_timestamp)); 
```

# java - 康威生命游戏的最佳设计模式

> ID：13216607
> 
> 赞同：1
> 
> 时间：2012-11-04T06:37:05.310
> 
> 标签：java, design-patterns, conways-game-of-life

我正在为 GOL 编写一个 Java 程序，并且想知道哪种设计模式最适合。我正在考虑使用状态模式，因为它允许对象根据它们的状态改变它们的行为。你怎么看？

PS我应该在哪里问主观问题？

**编辑：**你是否应该在 GOL 中设计模式是一个单独的问题，我想知道你是否决定使用一个，你会选择哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T06:44:42.970

GOL 是一个非常简单的程序。

我不确定您通过应用[设计模式](http://userpages.umbc.edu/~tarr/dp/lectures/StateStrategy.pdf)来想象什么。

在原始实现中，您的游戏状态应存储为 2D 数组或向量。它应该在 for 循环的每次迭代或响应用户时更改。你的单元格不应该是类。

# android - Android ImageView：远程图像加载后三星手机的高度，宽度变化

> ID：13216611
> 
> 赞同：1
> 
> 时间：2012-11-04T06:37:30.287
> 
> 标签：android, android-image

我有一个 Android 应用程序，其中 ImageView 在 AsyncTask 中加载大小为 60X275 的远程图像。我在 HTC、Sony E、三星等许多手机上测试了这个应用程序。我观察到，三星手机（在 Galaxy y、SIII 上测试）调整了实际图像高度的重量。就像在 Galaxy y 中我发现尺寸为 80X367，Galaxy SIII 将其调整为 - 30X138。

我的应用程序在使用三星手机时遇到了严重问题。我在 XML 文件中的 ImageView 声明是-

```
<ImageView 
android:id="@+id/banner" 
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:layout_below="@id/name"
android:layout_alignParentLeft="true"> 
```

并且 AsycTask 执行以下操作-

```
private Drawable ImageOperation(String url) {
    Drawable d = null;
    try {
        URL imageurl = new URL(url);
        InputStream is = (InputStream) imageurl.getContent();
        d = Drawable.createFromStream(is, "src");
        return d;
    } catch (Exception e) {
        return null;
    }
}

Drawable image = ImageOperation(fileName);  

imgView.setBackgroundDrawable(image); 
```

如果可能，请尽快建议我，因为我非常紧急。

# css - 960 宽的三列布局，带填充

> ID：13216612
> 
> 赞同：0
> 
> 时间：2012-11-04T06:37:31.930
> 
> 标签：css

我在 960 宽的画布上设计三列布局的方式有问题。

这是我正在尝试的图表：

![在此处输入图像描述](../Images/7350a893fbb794b710f8435e232c12d9.png)

我有一个 960 宽的 DIV 元素。它的外部有一个 20 像素的填充，我需要在里面有 3 个相等的列。

有人可以帮我处理三列，所以每个框和中间的边距都相等吗？2 列和 4 列很简单，但除以 3 与包含元素中的 20px 填充相加并不相等。当使用 2 列和 4 列时，我使用 FLOAT:LEFT 和一个带有 CLEAR 的额外元素。

```
<style>
.960_element { width:960px; padding:20px; }
.960_element .left {  }
.960_element .middle {  }
.960_element .right {  }
</style>

<div class="960_element">
    <div class="left"></div>
    <div class="middle"></div>
    <div class="right"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:49:21.157

第一个你的`.960_element`类名是错误的，你不能定义一个以数字开头的类名

[演示](http://jsfiddle.net/kG7VH/1/)

HTML

```
<div class="element">     
    <div class="left">h</div>     
    <div class="middle">h</div>     
    <div class="right">h</div>
</div> 
```

CSS

```
.element { width:960px; padding:20px;background-color: #dddddd;margin: 40px;/*margin not required*/}
.element div {background-color: #ff0000;}
.left { height: 200px; width: 32%; display: inline-block;}
.middle { height: 200px; width: 32%; margin-left: 14px;  display: inline-block; }
.right { height: 200px; width: 32%; margin-left: 14px;  display: inline-block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:51:58.560

更常见的做法是在每个项目周围放置 10 像素的边距，这样项目之间的间距加起来为 20 像素，而两侧的间距只有 10 像素。

对于您的情况，您的框需要 293（和三分之一）像素宽，这是从 960-80/3（宽度，减去边距，除以框）计算得出的。

如果您的宽度为 980，或者如果您的左右两边有 10 个像素的边距，您最终可能会得到一个不错的偶数 (300) 框。

# php - 如何在没有“？”的情况下检测/实现参数传递，如 domain.com/parameters 或任何运营商变量，如 name=aksd

> ID：13216614
> 
> 赞同：0
> 
> 时间：2012-11-04T06:38:50.907
> 
> 标签：php

怎么做？没有框架可以做到吗？我正在使用 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:51:21.983

参考[Mod 重写](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)文档

制定一个类似的规则，

```
name\.($1)    webservice.php?name=$1 
```

在 webservice.php 中读取 name 参数，并根据需要使用它。

# android - X轴上带有日期的Android图表

> ID：13216619
> 
> 赞同：2
> 
> 时间：2012-11-04T06:39:18.277
> 
> 标签：android, achartengine

在这里，我试图在 x 轴上显示一个图表，其中的值是从网络服务器检索的：

```
// Our first data

Date[] x = dates_array; // x values!

double[] y =  readings_array; // y values!

                XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer(); // Holds a collection of XYSeriesRenderer and customizes the graph
                XYSeriesRenderer renderer = new XYSeriesRenderer(); // This will be used to customize line 1
                XYSeriesRenderer renderer2 = new XYSeriesRenderer(); // This will be used to customize line 2
                mRenderer.addSeriesRenderer(renderer);
                mRenderer.addSeriesRenderer(renderer2);
                TimeSeries series = new TimeSeries("peak flow"); 
                for( int i = 0; i < x.length; i++)
                {
                    series.add(x[i], y[i]);
                }

                // Our second data
            int[] x2 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }; // x values!

                int[] y2 =  { 145, 123, 111, 100, 89, 77, 57, 45, 34, 30}; // y values!
                TimeSeries series2 = new TimeSeries("Line2"); 
                for( int i = 0; i < x2.length; i++)
                {
                    series2.add(x2[i], y2[i]);

                }

                XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
                dataset.addSeries(series);
                dataset.addSeries(series2);

                // Customization time for line 1!
                renderer.setColor(Color.WHITE);
                renderer.setPointStyle(PointStyle.SQUARE);
                renderer.setFillPoints(true);
                // Customization time for line 2!
                renderer2.setColor(Color.YELLOW);
                renderer2.setPointStyle(PointStyle.DIAMOND);
                renderer2.setFillPoints(true);

                Intent intent = ChartFactory.getTimeChartIntent(getApplicationContext(), dataset,
                     mRenderer, "DD MMM yyyy");
                startActivity(intent);
            }
        }); 
```

它适用于 y 轴，但在 x 轴上显示的值是随机值而不是我的值！请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:22:05.620

在`TimeSeries`你应该使用的`add(Date x, double y)`方法，而不是`add(double x, double y)`一个。

如果您希望 X 轴标签恰好是数据的日期，请执行以下操作：

```
renderer.setXRoundedLabels(false); 
```

# ssh - 有谁知道任何可以重新连接并能够从文件中获取密码的 SSH 客户端？

> ID：13216620
> 
> 赞同：0
> 
> 时间：2012-11-04T06:39:48.523
> 
> 标签：ssh, passwords, reconnect

我需要一个能够在连接中断时重新连接的 ssh 客户端，并在重新连接时从文件或网址获取密码。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:28:51.903

环顾四周，确实存在[autossh](http://www.harding.motd.ca/autossh/)。

依靠 autossh 重新连接断开的连接（如果其他一切都正确）。

然后您可以获取文件或执行任何其他命令。

* * *

或者，您可以运行一个脚本来循环并检查端口，有些像[这样](http://scrolls.mafgani.net/2006/03/ssh-automatic-reconnect-on-timeout/)。

* * *

或者您可以简单地[使用 scp](http://infohost.nmt.edu/tcc/help/xfer/scp.html)来获取所需的文件。

# linq - 聚合 LINQ 查询中的顺序颠倒

> ID：13216623
> 
> 赞同：0
> 
> 时间：2012-11-04T06:40:31.633
> 
> 标签：linq, aggregate

我认为结果应该包含 [1,1,2,2,3,3] 但它包含 [3,3,2,2,1,1]。为什么列表被颠倒了？

```
var sequence = new int[] { 1, 2, 3 };
var result = sequence.Aggregate(
            Enumerable.Empty<int>(),
            (acc, s) => Enumerable.Repeat(s, 2).Concat(acc)); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T06:43:10.660

对于序列中的每个项目，您将重复连接到累积序列的开头。交换订单，以便您连接到最后。

```
(acc, s) => acc.Concat(Enumerable.Repeat(s, 2)) 
```

* * *

附带说明一下，这样做会更容易（也更有效）来获取该序列。

```
var result =
    from s in sequence
    from x in Enumerable.Repeat(s, 2)
    select x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:53:42.050

通过使用更简单的方法来实现`SelectMany`：

```
 var sequence = new int[] { 1, 2, 3 };
 var result = sequence.SelectMany(i => new[] {i, i}).ToArray(); 
```

# jaxb - 无效整数的 JAXB 解组

> ID：13216624
> 
> 赞同：4
> 
> 时间：2012-11-04T06:40:42.880
> 
> 标签：jaxb, cxf, unmarshalling

在我们的产品中，我们使用 apache CXF。由于性能限制，模式验证已设置为 false。现在，对于一个整数元素，如果我提供了一个无效值，JAXB 会将它解组为其他东西。例如，

9999999999 转换为 141006540​​7。

988888888888 转换为 1046410808。

我的问题是这里遵循的逻辑（公式）是什么？

如何处理这个（考虑到验证将被关闭）？我希望这样的值被拒绝。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T10:56:58.823

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**简短的回答**

这似乎是 JAXB 参考实现中的一个错误。我建议在以下位置为其输入错误：

*   [http://java.net/jira/browse/JAXB/](http://java.net/jira/browse/JAXB/)

同样的用例在 EclipseLink JAXB (MOXy) 中也能正常工作。

* * *

**长答案**

以下是演示该问题的完整示例：

***根***

下面是一个带有`int`和`integer`字段的域类。

```
package forum13216624;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    int int1;
    int int2;
    Integer integer1;
    Integer integer2;

} 
```

***输入.xml***

下面是一个 XML 文档，其中包含您问题中的值。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <int1>9999999999</int1>
    <int2>988888888888</int2>
    <integer1>9999999999</integer1>
    <integer2>988888888888</integer2>
</root> 
```

***演示***

在下面的演示代码中，我`ValidationEventHandler`在`Unmarshaller`. 这应该捕获操作`ValidationEvent`期间遇到的任何无效值`unmarhsal`。

```
package forum13216624;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setEventHandler(new ValidationEventHandler() {

            @Override
            public boolean handleEvent(ValidationEvent event) {
                System.out.println(event.getMessage());
                return true;
            }}

        );
        File xml = new File("src/forum13216624/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        System.out.println(root.int1);
        System.out.println(root.int2);
        System.out.println(root.integer1);
        System.out.println(root.integer2);
    }

} 
```

***输出 - JAXB 参考实现***

此输出与您看到的行为相匹配。

```
1410065407
1046410808
1410065407
1046410808 
```

***输出 - EclipseLink JAXB (MOXy)***

如果您将 MOXy 指定为您的 JAXB 提供程序（请参阅：[http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html ），此用例将按预期工作。`ValidationEvent`对于每个无效值，您将获得一个，如果`ValidationEvent`处理了该字段/属性，则不会将其设置为无效值。

```
Exception Description: The object [9999999999], of class [class java.lang.String], from mapping [org.eclipse.persistence.oxm.mappings.XMLDirectMapping[int1-->int1/text()]] with descriptor [XMLDescriptor(forum13216624.Root --> [DatabaseTable(root)])], could not be converted to [class java.lang.Integer].
Internal Exception: java.lang.NumberFormatException: For input string: "9999999999"

Exception Description: The object [988888888888], of class [class java.lang.String], from mapping [org.eclipse.persistence.oxm.mappings.XMLDirectMapping[int2-->int2/text()]] with descriptor [XMLDescriptor(forum13216624.Root --> [DatabaseTable(root)])], could not be converted to [class java.lang.Integer].
Internal Exception: java.lang.NumberFormatException: For input string: "988888888888"

Exception Description: The object [9999999999], of class [class java.lang.String], from mapping [org.eclipse.persistence.oxm.mappings.XMLDirectMapping[integer1-->integer1/text()]] with descriptor [XMLDescriptor(forum13216624.Root --> [DatabaseTable(root)])], could not be converted to [class java.lang.Integer].
Internal Exception: java.lang.NumberFormatException: For input string: "9999999999"

Exception Description: The object [988888888888], of class [class java.lang.String], from mapping [org.eclipse.persistence.oxm.mappings.XMLDirectMapping[integer2-->integer2/text()]] with descriptor [XMLDescriptor(forum13216624.Root --> [DatabaseTable(root)])], could not be converted to [class java.lang.Integer].
Internal Exception: java.lang.NumberFormatException: For input string: "988888888888"
0
0
null
null 
```

* * *

**潜在的解决方法**

如果您的字段/属性是类型`Integer`，并且您可以从 JAXB 参考实现切换，那么您可以创建一个`XmlAdapter`来执行您自己的`Integer`到/从`String` 转换。

***整数适配器***

下面是一个`XmlAdapter`演示如何提供自己的转换逻辑的示例。

```
package forum13216624;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class IntegerAdapter extends XmlAdapter<String, Integer>{

    @Override
    public Integer unmarshal(String string) throws Exception {
        return Integer.valueOf(string);
    }

    @Override
    public String marshal(Integer integer) throws Exception {
        return String.valueOf(integer);
    }

} 
```

***包信息***

在包级别使用`@XmlJavaTypeAdapter`注释意味着`XmlAdapter`将应用于`Integer`此包中类的所有类型的字段/属性。

```
@XmlJavaTypeAdapter(value=IntegerAdapter.class, type=Integer.class)
package forum13216624;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter; 
```

***输出***

下面是使用 RI 时的更新输出。`int`值仍然是错误的，但不是按预期生成的`Integer`值。`null``ValidationEvents`

```
java.lang.NumberFormatException: For input string: "9999999999"
java.lang.NumberFormatException: For input string: "988888888888"
1410065407
1046410808
null
null 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)

# objective-c - AVCaptureOutput 委托

> ID：13216628
> 
> 赞同：1
> 
> 时间：2012-11-04T06:41:46.993
> 
> 标签：objective-c, xcode, avcapturesession

我正在创建一个正在使用`-(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection { }`函数但没有调用该函数的应用程序。为了进一步解释，该应用程序正在使用[本教程](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html)中的代码来创建一个视频录制应用程序。当我在 xCode 中运行教程的代码时，它运行了上面的函数，但是当我将它复制到我的应用程序中时，无论如何都没有修改它，它从未被调用过。

这是使用的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSError *error = nil;
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        [session setSessionPreset:AVCaptureSessionPreset640x480];
    } else {
        [session setSessionPreset:AVCaptureSessionPresetPhoto];
    }
    // Select a video device, make an input
    AVCaptureDevice *device;
    AVCaptureDevicePosition desiredPosition = AVCaptureDevicePositionFront;
    // find the front facing camera
    for (AVCaptureDevice *d in [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo]) {
        if ([d position] == desiredPosition) {
            device = d;
            isUsingFrontFacingCamera = YES;
            break;
        }
    }
    // fall back to the default camera.
    if( nil == device )
    {
        isUsingFrontFacingCamera = NO;
        device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    }
    // get the input device
    AVCaptureDeviceInput *deviceInput = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if( !error ) {

        // add the input to the session
        if ( [session canAddInput:deviceInput] ){
            [session addInput:deviceInput];
        }

        previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
        previewLayer.backgroundColor = [[UIColor blackColor] CGColor];
        previewLayer.videoGravity = AVLayerVideoGravityResizeAspect;

        CALayer *rootLayer = [previewView layer];
        [rootLayer setMasksToBounds:YES];
        [previewLayer setFrame:[rootLayer bounds]];
        [rootLayer addSublayer:previewLayer];
        [session startRunning];

    }

    session = nil;

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:
                                  [NSString stringWithFormat:@"Failed with error %d", (int)[error code]]
                                                            message:[error localizedDescription]
                                                           delegate:nil
                                                  cancelButtonTitle:@"Dismiss"
                                                  otherButtonTitles:nil];
        [alertView show];
        [self teardownAVCapture];
    }

    NSDictionary *detectorOptions = [[NSDictionary alloc] initWithObjectsAndKeys:CIDetectorAccuracyLow, CIDetectorAccuracy, nil];
    faceDetector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:detectorOptions];

    // Make a video data output
    videoDataOutput = [[AVCaptureVideoDataOutput alloc] init];
    // we want BGRA, both CoreGraphics and OpenGL work well with 'BGRA'
    NSDictionary *rgbOutputSettings = [NSDictionary dictionaryWithObject:
                                       [NSNumber numberWithInt:kCMPixelFormat_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey];
    [videoDataOutput setVideoSettings:rgbOutputSettings];
    [videoDataOutput setAlwaysDiscardsLateVideoFrames:YES]; // discard if the data output queue is blocked

    // create a serial dispatch queue used for the sample buffer delegate
    // a serial dispatch queue must be used to guarantee that video frames will be delivered in order
    // see the header doc for setSampleBufferDelegate:queue: for more information

    videoDataOutputQueue = dispatch_queue_create("VideoDataOutputQueue", DISPATCH_QUEUE_SERIAL);
    [videoDataOutput setSampleBufferDelegate:self queue:videoDataOutputQueue];
    if ( [session canAddOutput:videoDataOutput] ){
        [session addOutput:videoDataOutput];
    }

    // get the output for doing face detection.
    [[videoDataOutput connectionWithMediaType:AVMediaTypeVideo] setEnabled:YES];

    //[self setupCaptureSession];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:47:52.173

好的，我想我知道问题出在哪里。您`[session startRunning]`甚至在设置`videoDataOutput`. 没有视频数据输出的会话......好吧，不会调用`AVCaptureOutput`代理。

# xml - 将 perl 用户输入传递给 xml

> ID：13216630
> 
> 赞同：-2
> 
> 时间：2012-11-04T06:41:48.243
> 
> 标签：xml, perl

我需要根据从 perl 脚本中获取的用户输入来制作模板文件。

当我运行 perl 程序时，它应该询问用户输入，并且应该在 xml 文件中使用该值。

我知道接受用户输入，但不知道如何与 xml 集成。

需要您宝贵的建议。

谢谢，总和

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:11:42.503

查看面向 Perl 开发人员的 XML 教程[，第 1 部分：XML 加 Perl——简直是魔法](http://www.ibm.com/developerworks/xml/library/x-xmlperl1/index.html)

它超出了您的需要，但会为您提供在**Perl中****使用 XML的很好的介绍**

# php - wordpress 自定义帖子类型中的字段验证和显示错误

> ID：13216633
> 
> 赞同：6
> 
> 时间：2012-11-04T06:42:14.173
> 
> 标签：php, wordpress, custom-post-type

大家好，经过几项工作后，我在 wordpress 中开始了我的第一个插件，我在现场验证中受到了打击。

问题是我`"preix_author_url"`在我使用的插件中调用了一个字段

```
add_action('save_post', 'my_function_name'); 
```

我创建了一个验证类示例

```
<?php
class validator {
    public static function isUrl($str = '') {
        if(strlen($str) == 0)
            return FALSE;

        return preg_match('!^http(s)?://[\w-]+\.[\w-]+(\S+)?$!i',$str);
    }
} 
```

在`"my_function_name()"`

```
 function my_function_name(){
            global  $post;
            if(defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) return;
            if(isset($_POST['post_type']) && $_POST['post_type'] == 'wallpapers'){
                require_once( WALLP_FILE_PATH . '/wallp-core/wallp-validator.php' );                
                $validate = new validator();
                if(isset($_POST['preix_author_url'])){
                    if($validate->isUrl($_POST['preix_author_url']))
                        update_post_meta($post->ID, 'preix_author_url', $_POST['preix_author_url']);
                }
            }
        } 
```

现在，如果验证返回 false，我想在帖子页面中显示错误。但我没有办法显示这些错误或通知..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T10:08:27.090

所以过了一会儿，我终于想通了。我保证会在 20 分钟内回复你，但我失败了，因为我认为这很容易！我在到处搜索后发现 admin_notices 在 save_post 钩子上不起作用！所以这是一个很好的解决你的问题的方法。

```
 //for action hooks
add_action('save_post', 'my_function_name');
$validator = new Validator();
// called after the redirect
add_action('admin_head-post.php', array(&$validator, 'add_plugin_notice'));

//change your my_function_name with this
function my_function_name() {
    global $post;
    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE)
        return;
    if (isset($_POST['post_type']) && $_POST['post_type'] == 'wallpapers') {
        require_once( WALLP_FILE_PATH . '/wallp-core/wallp-validator.php' );
        $validate = new validator();
        if (isset($_POST['preix_author_url'])) {
            //if($validate->isUrl($_POST['preix_author_url']))
            //update_post_meta(
            //$post->ID, 'preix_author_url', $_POST['preix_author_url']);
            $validator = new Validator();
            if (!$validator->isUrl($_POST['preix_author_url'])) {
                $validator->update_option(1);
                return;
            } else {
                update_post_meta(
                        $post->ID, 
                        'preix_author_url', $_POST['preix_author_url']);
            }
        }
    }
}

//ive also revised your class
class Validator {
    //new isUrl validation
    //better use filter_var than preg_match
    function isUrl($str = '') {
        if (filter_var($str, FILTER_VALIDATE_URL) === FALSE) {
            return FALSE;
        } else {
            return TRUE;
        }
    }

    //You can change the error message here. 
    //This for your your admin_notices hook
    function show_error() {
        echo '<div class="error">
       <p>Error Found!!</p>
       </div>';
    }

    //update option when admin_notices is needed or not
    function update_option($val) {
        update_option('display_my_admin_message', $val);
    }

    //function to use for your admin notice
    function add_plugin_notice() {
        if (get_option('display_my_admin_message') == 1) { 
            // check whether to display the message
            add_action('admin_notices', array(&$this, 'show_error'));
            // turn off the message
            update_option('display_my_admin_message', 0); 
        }
    }
} 
```

我在我的个人网站上试过这个，效果很好！！我也从中学到了很多东西！

# php - 用 PHP 解析复杂的 JSON

> ID：13216636
> 
> 赞同：1
> 
> 时间：2012-11-04T06:42:37.527
> 
> 标签：php, json

我是 PHP 新手，不太清楚如何用 PHP 解析 JSON。这是我从第三方获得的 JSON

```
{ "data": 
  { "current_condition": 
   [ 
      {"cloudcover": "0", "humidity": "13", "observation_time": "05:47 AM", "precipMM": "0.0", 
      "pressure": "1016", "temp_C": "20", "temp_F": "69", 
      "visibility": "10", "weatherCode": "113",  
      "weatherDesc": [ {"value": "Sunny" } ],  
      "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], 
     " winddir16Point": "SW", "winddirDegree": "218", "windspeedKmph": "12", "windspeedMiles": "7" 
     } 
   ],
   "request": [ 
            {"query": "Lat 32.12 and Lon 76.53", "type": "LatLon" } 
      ],  
   "weather": [ 
          {
            "date": "2012-11-04", "precipMM": "0.0", "tempMaxC": "20", "tempMaxF": "69", "tempMinC": "1", "tempMinF": "34", 
            "weatherCode": "113",  "weatherDesc": [ {"value": "Sunny" } ],  
            "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], 
            "winddir16Point": "SW", "winddirDegree": "218", "winddirection": "SW", "windspeedKmph": "12", "windspeedMiles": "8" 
           }, 
          {
           "date": "2012-11-05", "precipMM": "0.0", "tempMaxC": "20", "tempMaxF": "67", "tempMinC": "4", "tempMinF": "39", 
           "weatherCode": "113", "weatherDesc": [ {"value": "Sunny" } ], 
           "weatherIconUrl": [ {"value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], 
           "winddir16Point": "SSW", "winddirDegree": "210", "winddirection": "SSW", "windspeedKmph": "12", "windspeedMiles": "7" 
           } 
          ] 
        }
     } 
```

我将这些天气信息作为 JSON 数据获取，其中包括以下信息

1.  当前信息
2.  未来 2 天的天气信息

我不想要所有信息，而只想要特定的信息

```
current_condition
       temp_C
       temp_F
       weatherDesc 
```

比我想要一些来自天气信息提供的未来 2 天的数据

1.  日期
2.  最高温度
3.  温度MinC
4.  天气图标网址
5.  风速Kmph

我在 PHP 中尝试了这段代码

```
$jsonIterator = new RecursiveIteratorIterator(
    new RecursiveArrayIterator(json_decode($weather, TRUE)),
    RecursiveIteratorIterator::SELF_FIRST); 
```

这似乎给了我数组格式的 JSON 解码数据，但我对如何从 PHP 数据中获取这些特定值感到困惑。我可以遍历数据

```
foreach ($jsonIterator as $key => $value) {
    if(is_array($value)) {
        foreach ($value as $key => $value) {
    }

    } else {
       // echo "$key\n";
    } 
```

但不确定如何如上所述获取值。资源的任何帮助或指针都会很有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T06:52:12.543

为什么不直接使用[`json_decode`](http://php.net/manual/en/function.json-decode.php)然后处理生成的对象？

示例：[http ://codepad.org/ciw3ogAu](http://codepad.org/ciw3ogAu)

我使用`ob_get_content()`是因为我不想弄乱转义序列，但重点在于这一行：

```
$result = json_decode($my_json_string); 
```

获取信息并不难。例如，如果您想要以摄氏度为单位的当前温度：

```
echo $result->data->current_condition[0]->temp_C; 
```

您可以获得未来两天的数组（[http://codepad.org/bhOcd3eT](http://codepad.org/bhOcd3eT)）：

```
$weatherarray = $result->data->weather; // An array with two elements 
```

* * *

您使用`$result->xxx`而不是`$result["xxx"]`因为[`json_decode`](http://php.net/manual/en/function.json-decode.php)将为对象创建对象。您可以通过调用将其更改为数组`json_decode($my_json_string, true)`，然后使用以下方式访问成员：

```
echo $result["data"]["current_condition"][0]["temp_C"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T07:02:16.487

您需要解码您的 json 对象，但不需要对其进行迭代。只需访问您想要的信息：

```
$decoded = json_decode($weather);
$date = $data->current_condition->data->weather->date;
$tempMaxC = $data->current_condition->data->weather->tempMaxC;
$tempMinC = $data->current_condition->data->weather->tempMinC;
$weatherUrl = $data->current_condition->data->weather->weatherIconUrl;
$windspeedKmph = $data->current_condition->data->weather->windspeedKmph; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T06:54:05.210

我会采用这种方法来访问您的数据：

```
$data = json_decode($weather); 
```

然后您可以通过这种方式轻松获得您想要的东西：

```
print_r($data->data->current_condition); 
```

或循环...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-22T09:39:33.380

```
$decode=json_decode($file);    
echo $decode->data->current_condition[0]->temp_C; 
echo $decode->data->current_condition[0]->temp_F; 
echo $decode->data->current_condition[0]->weatherDesc[0]->value;   

foreach ($decode->data->weather as $data) {
  echo $data->date;
  echo $data->tempMaxC;
  echo $data->tempMinC;   
  echo $data->weatherIconUrl;
  echo $data->windspeedKmph;  
} 
```

# couchdb - CouchDB：获取给定键范围内的键数

> ID：13216640
> 
> 赞同：1
> 
> 时间：2012-11-04T06:43:49.353
> 
> 标签：couchdb, range

在我的 CouchDB 数据库中，所有键的格式为“A_xxxxxxxx”，其中 xxxxxxxx 是零填充的十进制数（例如“A_00000001”或“A_12345678”）

我只想获取给定键范围内*的键数。*

例如，要获取从 A_10000000 到 A_30000000 的键，我可以查询如下内容：

```
GET DATABASE/_all_docs?startkey="A_00001000"&endkey="A_30000000"&include_docs=false 
```

但结果包含所有键，我需要计算输出的“docs”字段中的元素。

由于我的查询中键的数量会很大，我只想知道键的数量，而不是键的实际列表。

范围开始和范围结束值可以变化，这不是固定的。

是否可以只获取给定范围的键数，而不检索实际的键列表？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:33:05.677

您无法使用内置`_all_docs`视图获取给定键范围内的键数。[但是您可以使用自定义地图缩减视图获得所需的结果，例如CouchDB Definitive Guide](http://guide.couchdb.org/editions/1/en/views.html#comments)中描述的这个视图

**地图.js**

```
function(doc) {
    emit(doc._id, 1);
} 
```

**减少.js**

```
function(keys, values, rereduce) {
    return sum(values)
} 
```

您可以使用 Futon 管理实用程序通过创建具有以下内容的新文档将这些视图添加到您的 CouchDB 数据库中：

```
{
   "_id": "_design/test",
   "views": {
       "count": {
           "map": "function(doc) {\n    emit(doc._id, 1);\n}",
           "reduce": "function(keys, values, rereduce) {\n  return sum(values)\n}"
       }
   }
} 
```

`_design/test/count`然后可以像这样查询而不是`_all_docs`返回开始键和结束键之间的文档数。

当我再次运行此查询时，我的数据库没有开始和结束键，我得到以下结果：

```
{
    "rows":[
        {
            "key": null,
            "value": 185
        }
    ]
} 
```

使用填充的开始键和结束键再次运行查询，我得到以下结果：

```
{
    "rows":[
        {
            "key": null,
            "value": 11
        }
    ]
} 
```

# prolog - 序言扩展谓词迭代多个结果，组合/解析结果集

> ID：13216641
> 
> 赞同：0
> 
> 时间：2012-11-04T06:43:53.797
> 
> 标签：prolog

我有一个谓词“lookupOptions”，它一一返回一些列表（菜单）。

我试图让它满足多个输入的情况。通过阅读“list_places”列表的头部，我可以返回一组选项，如下所示。

```
find_options(Restaurant,Town,Menu) :- lookupOptions(Restaurant,H,Menu), list_places(Town,[H|T]) 
```

但是，我无法让它迭代。

我已经尝试了很多东西，这些都是我迄今为止所做的最大努力。

a）标准足够的迭代，但它不会解决......

```
doStuff(X,[],_).
doStuff(Restaurant,[H|T],_):-  lookupOptions(Resturant,H,_), doStuff(Restaurant,T,_).
find_options(Restaurant,Town,Menu) :- doStuff(Restaurant,[H|T],Menu), list_places(Town,[H|T]). 
```

b) 扩展目标谓词 ...

```
find_options(_,Town,[H|T],_)
find_options(Restaurant,Town,Menu) :- find_options(Restaurant,Town,[],Menu).
find_options(Restaurant,Town,X,Menu) :- list_places(Town,X).
find_options(Restaurant,Town,[H|T],Menu) :- lookupOptions(Restaurant,[H],Menu), find_options(Restaurant,Town,T,Menu). 
```

这些中的任何一个都可以吗？如果模式写得正确。或者是否有适当的切口？

任何帮助最受赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:02:13.743

目前尚不清楚*您*想要迭代什么。*Prolog 使用回溯来检查所有替代方案，如果您在寻找替代*方案，则应该开始回溯，或者使用[所有解决方案](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.29%27,swi%28%27/doc/Manual/allsolutions.html%27%29%29)系列。

现在我想你只想简单地声明可能有更多`find_options(Restaurant,Town,Menu)`。然后尝试用这个替换头部匹配`[H|T]`：

```
find_options(Restaurant,Town,Menu) :-
   lookupOptions(Restaurant,H,Menu),
   list_places(Town, Places),
   member(H, Places). 
```

BTW`T`是您原始规则中的单身人士。这可能暗示需要对其进行概括。

# c - 没有任何东西被写入文件

> ID：13216643
> 
> 赞同：0
> 
> 时间：2012-11-04T06:44:08.990
> 
> 标签：c, file, fwrite, getchar

代码：

```
struct subscriber
{
char phonenumber[20];
char name[50];
float amount;
}s;

void addrecords()
{
  FILE *f;
  char test;
  f=fopen("file.txt","ab+");
  //if(f==0)
  //{   f=fopen("file.txt","wb+");
    //system("clear");
    //printf("please wait while we configure your computer");
    //printf("/npress any key to continue");
    //getchar();
    //getch();
  //}

  while(1)
  {
    //system("clear");
    printf("\n Enter phone number:");
    scanf("%s",s.phonenumber);
    printf("\n Enter name:");
    fflush(stdin);
    //scanf("%[^\n]",s.name);

    scanf("%s",s.name);
    printf("\n Enter amount:");
    scanf("%f",&s.amount);
    printf("check 1");
    fwrite(&s,sizeof(s),1,f);
    fflush(stdin);
    printf("check 2");
    //system("clear");
    printf("1 record successfully added");
    printf("\n Press esc key to exit, any other key to add other record:");
    test=getchar();
    //test=getche();
    if(test==27)
      break;
  }
  fclose(f);
} 
```

我在这里面临两个问题：

1.  尽管正在创建文件，但没有任何内容写入文件。
2.  在我输入金额后，它会输出所有打印语句并转到 while 循环的初始位置，即它不会在 getchar 处等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:52:13.420

最后一个`scanf()`不读取输入末尾的换行符，这就是为什么`getchar()`立即返回并且不等待，这也是第一个问题的原因，为什么不写入文件，因为您必须终止程序才能退出并且文件没有被刷新。所以你需要在最后一个输入的末尾使用换行符，你可以这样做`scanf()`

```
scanf("%f%*[^\n]%*c",&s.amount); 
```

或`fgets()`用于阅读整行并`scanf()`在其上使用。最后，请注意您不应该使用`fflush()`来清除输入流，它是未定义的：

> 7.19.5.2.2 如果流指向输出流或更新流，其中最近的操作没有被输入，fflush 函数会导致该流的任何未写入数据被传递到主机环境以写入文件；否则，行为未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:51:32.560

`fflush`如果你有`fclose`.

但在你的情况下，你有`while(1)`和`fclose`外部，这意味着`fclose`永远不会被调用，所以文件内容永远不会被`fclose`函数更新。

您可能想`fflush`在循环内使用，例如在 之后`fwrite`，然后它将缓冲区刷新到实际文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T06:53:22.893

您已将文件命名为**file.txt**，所以我假设您打算将该文件作为文本文件？但是然后你用**b标志打开它，它表示二进制格式，然后你使用****fwrite**写入它，它不会将数据转换为文本，而只是将内部格式转储到文件中。

如果您在某种二进制编辑器中查看创建的文件，您会看到它包含数据。

# c++ - getch() 和 clrscr() 的 c++ 替代方案

> ID：13216644
> 
> 赞同：0
> 
> 时间：2012-11-04T06:44:19.383
> 
> 标签：c++, getch

我使用`code::blocks`10.05 来编译 C++。

但我不能使用

```
getch() 
```

它说`unknown`。当我`#include <conio>`说未知库时。那么能够`getch`在 C++ 中使用的替代方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:48:01.953

尝试`#include <conio.h>`

在我的机器上运行良好（Windows 和 Linux，适用于 Windows 的 mingw 编译器）。据我所知 Code::Blocks 使用 gcc 编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:55:35.100

带有 .h 扩展名的头文件与没有 h 扩展 名的头文件**不同，您可以参考这个**[C++ 包含有和没有 .h](https://stackoverflow.com/questions/2799682/c-includes-with-and-without-h)

# javascript - 如何检查是否选中了 asp:Checkbox 并使用 javascript 显示或隐藏它？

> ID：13216654
> 
> 赞同：0
> 
> 时间：2012-11-04T06:47:08.083
> 
> 标签：javascript, jquery, asp.net

我的 aspx 页面上有一个`asp:checkbox`和一个`asp:textbox`，我想知道在选中复选框时显示文本框，如果使用 javascript 取消选中复选框，则隐藏它，我真的很感激任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:51:23.963

[`click`](http://api.jquery.com/click)假设这些在浏览器上呈现为普通的复选框和文本区域，那么您可以使用其事件获得有关何时选中或取消选中复选框的通知：

```
$("selector_for_the_checkbox").click(function() {
    // ...handle the event here...
}); 
```

在事件处理程序中，`this`将引用原始复选框元素（不是它的 jQuery 包装器）。

要使用 jQuery 显示隐藏元素，请使用[`show`](http://api.jquery.com/show); 要隐藏一个，您使用[`hide`](http://api.jquery.com/hide). 您还可以[`toggle`](http://api.jquery.com/toggle)根据元素的当前状态或传入的标志来显示或隐藏元素。所以：

```
$("selector_for_the_checkbox").click(function() {
    $("selector_for_the_textarea").toggle(this.checked);
}); 
```

花一个小时（仅此而已）阅读[jQuery API 文档](http://api.jquery.com)是**非常值得**的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:57:27.863

您可以使用此代码

```
<script type="text/javascript">
function radio_yes(){
if(document.getElementById("c1").checked==true)
        document.getElementById("atext").style.visibility="visible";
        else
        document.getElementById("atext").style.visibility="hidden";}
</script>
<input type="checkbox" id = "c1" name="subscriptions" onclick = "radio_yes();radio_uncheck();"  value="CorporateEmails"/>
    Corporate Press Release Emails<br />
<input type="text" id="atext"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:57:40.230

试试这个脚本：

```
<script type="text/javascript">
    function toggleTextBox(bEnable, textBoxID) {
        document.getElementById(textBoxID).disabled = !bEnable;
        }
    }
</script> 
```

你的 aspx 会是这样的：

```
<asp:CheckBox ID="chkApplied" runat="server" onclick="javascript:toggleTextBox(this.checked, 'txtAmount'); />
<asp:TextBox ID="txtAmount" runat="server"></asp:TextBox> 
```

如果您的客户端 ID 不同，您可以像这样从服务器端绑定它：

```
chkApplied.Attributes.Add("onclick", "javascript:toggleTextBox(this.checked, '" + txtAmount.ClientID + "');"); 
```

# java - 扫描线是否逃逸？

> ID：13216655
> 
> 赞同：0
> 
> 时间：2012-11-04T06:47:25.197
> 
> 标签：java, java.util.scanner

我一直在为班级做一个小项目，它运行完美，没有问题，但是当与班级的自动测试仪对抗时，它会返回 2 No line found 错误。问课程的工作人员，他们说这可能是因为我试图扫描一条不存在的线，但我尝试打印我所有的扫描并没有发现类似的东西。这就是我的代码中的所有扫描：

```
Scanner sc = new Scanner(System.in);
    String sentence;
    int choice;

    System.out.println("Please enter a sentence:");
    sentence = sc.nextLine();

    printMenu(); // calls a function to print the menu.

    // gets the require action
    System.out.println("Choose option to execute:");
    choice = sc.nextInt();
    sc.nextLine(); 
```

（我尝试使用和不使用最后一个 sc.nextLine）

```
static void replaceStr(String str)
{
    String oldWord, newWord;
    Scanner in = new Scanner(System.in);

    // get the strings
    System.out.println("String to replace: ");
    oldWord = in.nextLine();
    System.out.println("New String: ");
    newWord = in.nextLine();

    // replace
    str = str.replace(oldWord, newWord);
    System.out.println("The result is: " + str);
    in.close();
}
static void removeNextChars(String str)
{
    Scanner in = new Scanner(System.in);
    String remStr; // to store the string to replace
    String tmpStr = ""; //the string we are going to change.
    int i; // to store the location of indexStr

    // gets the index
    System.out.println("Enter a string: ");
    remStr = in.nextLine();
    i=str.indexOf(remStr);

    in.close(); // bye bye

    if (i < 0)
    {
        System.out.println("The result is: "+str);
        return;
    }

    // Build the new string without the unwanted chars.
    /* code that builds new string */

    str = tmpStr;
    System.out.println("The result is: "+str);
} 
```

知道一条线如何在这里泄漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T07:02:13.053

这是问题所在。您`in.close();`在多个地方使用（方法中的最后一条语句和`replaceStr`方法中的中间部分`removeNextChars`）。当您使用`close()`方法关闭扫描仪时，它也会关闭您`InputStream (System.in)`的。该 InputStream 无法在您的程序中重新打开。

`public void close() throws IOException --> Closes this input stream and releases any system resources associated with this stream. The general contract of close is that it closes the input stream. A closed stream cannot perform input operations and **cannot be reopened.**`

**扫描仪关闭后的任何读取尝试都将导致异常 NoSuchElementException。**

请在程序完成后关闭扫描仪一次。

编辑：扫描仪关闭/使用：

在你的主要功能中：

```
 Scanner sc = new Scanner(System.in);
   ....
   .....
   replaceStr(Scanner sc, String str);
   .....
   ....
   removeNextChars(Scanner sc ,String str);
   ....
   ....
   //In the end
   sc.close();

static void replaceStr(Scanner in, String str){
  //All the code without scanner instantiation and closing
  ...
}

static void removeNextChars(Scanner in, String str){
  //All the code without scanner instantiation and closing
  ...
} 
```

你应该一切都好。

# android - Android 项目缺少“VideoEditor API”

> ID：13216658
> 
> 赞同：4
> 
> 时间：2012-11-04T06:47:29.910
> 
> 标签：android, video

这是我的问题

项目“CyanogenMod-android_packages_apps_VideoEditor-6a89cf8”缺少必需的 Java 项目：“VideoEditor API”SickProgramming-android_packages_apps_VideoEditor-6a89cf8

我正在尝试制作视频编辑器应用程序。从“github”找到一些来源。 [https://github.com/CyanogenMod/android_packages_apps_VideoEditor](https://github.com/CyanogenMod/android_packages_apps_VideoEditor) 我导入到我的工作区！！

我发现这个项目缺少错误。我试图找到“VideoEditor API”并找到“Android_Framework_base”就是这个。 [https://github.com/CyanogenMod/android_frameworks_base](https://github.com/CyanogenMod/android_frameworks_base)

我从框架（media/java/android/media/videoeditor）中找到了源代码

但我不知道将这个框架作为“java 项目”导入，所以我可以为“apps_videoeditor”连接 build_path ！！！

谢谢你

# ipa - 为 TestFlight 分发构建 IPA 存档

> ID：13216659
> 
> 赞同：1
> 
> 时间：2012-11-04T06:47:45.217
> 
> 标签：ipa, testflight

我在使用 Xcode 4.2 时遇到以下问题，试图创建一个 IPA 存档以与 TestFlight 一起分发。

在我建立档案之前，一切似乎都很好。

当我想上传此档案时，我收到以下消息：

“无效的 IPA：embedded.mobileprovision 中的钥匙串访问组与您的二进制文件不匹配。”

这到底是什么意思？

我在网上查看了有关此问题的各种信息，但目前没有什么能促使我找到解决方案。我也尝试了我能想到的，但没有成功。

谁能指出我的解决方案？

提前谢谢你，任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:37:15.840

我有同样的问题。这是由于目标的构建设置中有错误的发布代码签名身份引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:51:14.400

这通常是由于未更改权利文件中的构建标识符和访问组造成的。确保在权利文件中更改这些内容。可以在[此处找到有关如何执行此操作的更多信息](http://www.karlmonaghan.com/2012/08/09/invalid-ipa-the-keychain-access-group-in-the-embedded-mobileprovision-and-your-binary-dont-match/)

# django - Whoosh 在 heroku 上返回空结果

> ID：13216661
> 
> 赞同：0
> 
> 时间：2012-11-04T06:48:00.813
> 
> 标签：django, heroku, django-haystack, whoosh

我正在使用 Haystack+Whoosh 在我的 django 项目中构建搜索功能。在 localhost 上，搜索工作正常并返回结果。虽然我有时注意到它在过滤时返回了一些“找不到对象”的索引。但这不是我的主要问题。主要问题是当我尝试在 heroku 上部署我的应用程序时。只有在创建数据库后搜索才可以正常工作，并且第二天检查结果始终为空。我尝试了“rebuild_index”和“update_index”命令，但没有希望。我不得不删除数据库并重新同步它以使其工作一段时间，然后再停止工作

任何想法可能导致这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:29:15.887

这可能是因为[Heroku 的只读文件系统](https://devcenter.heroku.com/articles/read-only-filesystem)。

# vb.net - 获取两个字符串之间的字符串

> ID：13216663
> 
> 赞同：2
> 
> 时间：2012-11-04T06:48:07.913
> 
> 标签：vb.net, string, parsing

我有以下字符串

```
sa=t&rct=j&q=&esrc=s&source=productsearch&cd=1&cad=rja&docid=10829621560421678006&ved=0CDEQ9gIwAA&url=http%3A%2F%2Fwww 
```

我想把这部分解析出来`10829621560421678006`

我正在考虑编写一个函数，该函数返回两个指定字符串之间的字符串，在这种情况下 `&docid=`，`&ved=`

有什么建议或更好的解决方案吗？请注意，我不能使用拆分，因为字符串结构会不时不同，我对这个数字的引用是这两个字符串`&docid=`和`&ved=`

也可以使用正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T22:07:38.650

您可以为此使用[Strings.Split 方法](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.split.aspx)：

```
Dim extracted As String = Split(Split(sourcestring, "&docid=")(1), "&ved=")(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:16:21.880

您可以像这样使用 LINQ：

```
var docid = 
    text
        .Split('&')
        .Select(x => x.Split('='))
        .Where(x => x[0] == "docid")
        .Select(x => x[1])
        .First(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T06:57:00.000

你可以尝试这样的事情： -

```
 Dim startIndex As Integer = temp.IndexOf("&docid=") + 20
 Dim endIndex As Integer = temp.IndexOf("&ved=", startIndex)
 Dim extraction As String = temp.Substring(startIndex, endIndex - startIndex).Trim 
```

如果你想使用正则表达式，那么你可以简单地试试这个： -

```
 docid=(.*?)&ved 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T06:52:30.033

这个正则表达式非常简单有效。

```
docid=(.*?)&ved 
```

结果：

```
$matches Array:
(
    [0] => Array
        (
            [0] => docid=10829621560421678006&ved
        )

    [1] => Array
        (
            [0] => 10829621560421678006
        )

) 
```

# wpf - 如何从视图模型打开一个新窗口并在 MVVM 中将参数传递给它？

> ID：13216664
> 
> 赞同：1
> 
> 时间：2012-11-04T06:48:18.570
> 
> 标签：wpf, mvvm, prism

我有一个带有列表的窗口，单击列表条目将显示一个新窗口，以显示该项目的详细视图

在 MVVM 中执行此操作的最简洁方法是什么？我想只做一个 container.Resolve<IViewType>().Show() 并让 Unity 创建所有依赖项，但只是调用 Show() 听起来不是 MVVM。我应该创建某种 WindowService 管理器类还是会有点矫枉过正？代码可以调用哪一层代码`Show()`？

其次，我如何将参数（例如 CustomerID 和 ProductID）从初始视图模型传递到将附加到正在显示的新窗口的新视图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:54:38.373

我将[这种](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)方法用于与 MVVM 的对话。

我现在要做的就是从我的视图模型中调用以下内容。

```
var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here", dialogwindowVM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:51:22.687

我通常更喜欢创建一个 NavigationService 来处理实例化窗口和视图模型并将视图模型设置为数据上下文。然后你可以从你的父视图模型中调用它，它们是解耦的。

# mysql - 如何使用引号括起来的标题标签而不是正文字段选择 INTO OUTFILE？

> ID：13216667
> 
> 赞同：3
> 
> 时间：2012-11-04T06:49:16.367
> 
> 标签：mysql, export-to-csv, into-outfile

我不相信这个问题是重复的。

我希望正文中的行是“OPTIONALLY ENCLOSED BY”双引号。不应包含数值。没有标题很容易做到这一点。但是，当您使用 UNION 包含标题时，MySQL 现在将每一列视为字符串类型并将所有值括在引号中。

您可以像这样向 SELECT INTO OUTFILE 添加标题：

```
SELECT "id", "numerical_values", "string_values" #header section of csv
UNION ALL
SELECT `id`, `numerical_values`, `string_values` #body section of csv
INTO OUTFILE "/tmp/values.csv"
FIELDS TERMINATED BY "," OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY "\n"
FROM `values_table` 
```

同样，如果我省略标题，只会`string_values`用引号括起来。使用标题，所有列都被视为字符串列并将被封闭。

我试过这个：

```
SELECT '"', "id", ',"', "numerical_values", ',"', "string_values", '"' 
#added quotes/commas to header
UNION ALL
SELECT `id`, ',', `numerical_values`, ',"', `string_values`, '"'
#added commas, and add quotes around string_values
INTO OUTFILE "/tmp/values.csv"
FIELDS TERMINATED BY "" ENCLOSED BY '' #empty values for fields terminated and enclosed
# empty because manually selected in query
LINES TERMINATED BY "\n" 
FROM `values_table` 
```

我认为这会起作用，但我最终得到了看起来像一堆额外的空白。这是来自我刚刚使用第二种方法创建的文件。标题行以“string7”结束。第一行数据在“207”之后结束。我只是把第三行的一部分。

```
"         num1","                                          string1","       num2","                                          string2","       num3","                                                                        string3","       num4","                                                                        string4","       num5","                                                                        string5","       num6","                                                                        string6","      string7""
33.95     ," 1023                                         ",  7.50      ,"  207-1023                                     ",  26.95     ,"2 1023                                                                     ",23.00     ,"3Wx4Hx4D                                                                   ",19.00     ,"1023                                                                       ",  0.00      ,"UPC: 123456789012                                                          "," 207      "       
40.95     ," 1058                                         ",  9.00      , 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T09:07:41.490

```
SELECT '"id"', '"numerical_values"', '"string_values"'
UNION ALL
SELECT id, numerical_values, CONCAT('"', REPLACE(string_values, '"', '""'), '"')
INTO OUTFILE '/tmp/values.csv'
FIELDS TERMINATED BY ',' ENCLOSED BY '' ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM values_table 
```

# android - Android：在自定义对话框中触摸时隐藏键盘

> ID：13216670
> 
> 赞同：3
> 
> 时间：2012-11-04T06:49:55.493
> 
> 标签：android, dialog, android-softkeyboard

我有一个自定义对话框。在对话框中，有一个 EditText。当我触摸 EditText 内部时，会显示软键盘。当我触摸对话框的另一个地方时，我想隐藏这个键盘。

我知道如何在活动中隐藏键盘。我只是不知道如何在 Dialog 中执行此操作。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T08:02:14.290

您可以使用 focuslisners 轻松做到这一点，请参阅下面的代码示例：

```
EditText.setOnFocusChangeListener(new View.OnFocusChangeListener() 
        { 
            @Override 
            public void onFocusChange(View v, boolean hasFocus) 
            { 
                if (hasFocus) 
                { 
                    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); 
                    imm.showSoftInput(EditText, InputMethodManager.SHOW_IMPLICIT); 
                }
                else
                {
                   InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                   imm.hideSoftInputFromWindow(EditText.getWindowToken(), 0);
                }
            } 
        }); 
```

编辑：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <LinearLayout
            android:id="@+id/wrapper"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:focusable = "true"
            android:isFocusableInTouchMode = "true"
            android:clickable = "true" > 

                <EditText
                android:id="@+id/EditText"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:hint="hint"
                android:singleLine="true" />

            </LinearLayout>         
    </RelativeLayout> 
```

\以确保获得焦点：

```
 LinearLayout actionHide = (LinearLayout) findViewById(R.id.wrapper);
        actionHide.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                actionHide.requestFocus(); // use this to trigger the focus listner
                //or use code below to set the keyboard to hidden
                InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(EditText.getWindowToken(), 0);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:57:03.977

尝试为 Edittext设置[InputMethodManager.SHOW_FORCED ：](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html)

```
InputMethodManager input_manager = (InputMethodManager) 
                       getSystemService(Context.INPUT_METHOD_SERVICE);
input_manager.showSoftInput(edittext, InputMethodManager.SHOW_FORCED); 
```

# c++ - 如何在c ++ winapi中获取已加载图标的大小

> ID：13216671
> 
> 赞同：-6
> 
> 时间：2012-11-04T06:49:58.833
> 
> 标签：c++, c, windows, winapi

我已经`("c:\test.ico")`使用`LoadImage()`函数加载了一个图标，我怎样才能得到这个图标的大小？（其中的字节数）我正在使用 c++ & winapi

```
HRSRC hRes = LoadImage ( NULL, icon, IMAGE_ICON, 0, 0, LR_LOADFROMFILE );
LPVOID lpResLock = LockResource(hRes); 
```

（更准确地说，“lpResLock”指向的数据大小）

========update====== 我知道`sizeofresource()`但问题是，它要从可执行文件中加载资源。正如我在我的问题中所示，我正在从磁盘文件加载一个独立的本地资源。第二个问题是，`hResInfo`必须使用`FindResource`函数创建参数，在我的情况下我正在使用`LoadImage()`..所以这无济于事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T06:54:13.573

谷歌为`SizeofResource()`. 它是一个标准的win32 API函数IIRC

这是函数原型：

```
DWORD WINAPI SizeofResource(
  _In_opt_  HMODULE hModule,
  _In_      HRSRC hResInfo
); 
```

参数：

> hModule [in, optional] 类型：HMODULE 可执行文件包含资源的模块的句柄。
> 
> hResInfo [in] 类型：HRSRC 资源句柄。必须使用 FindResource 或 FindResourceEx 函数创建此句柄。

## 更新-

然后，来自文件的资源长度 = 文件大小。

使用：`GetFileLength()`函数编码如下：

```
DWORD GetFileLength(LPSTR fileName)
{
   DWORD len = 0;
   OFSTRUCT of;
   HFILE hFile = OpenFile(fileName,&of, OF_READ);
   GetFileSize(hFile,&len);
   CloseHandle(hFile);
   return len;
} 
```

# wcf - mvvm silverlight 4中的异步等待

> ID：13216672
> 
> 赞同：1
> 
> 时间：2012-11-04T06:50:17.413
> 
> 标签：wcf, silverlight, mvvm, silverlight-4.0, async-await

在我的 silverlight mvvm 应用程序中，我使用 wcf 服务来填充需要时间加载的列表框，因此我需要使用 async 并在其中等待。我如何在下面的代码中使用它。

我在视图模型中的代码：

```
 private void GetLanguage()
    {
        ServiceAgent.GetLanguage((s, e) =>Language = e.Result);
    } 
```

我在服务代理中的代码

```
 public void GetLanguage(EventHandler<languageCompletedEventArgs> callback)
    {
        _Proxy.languageCompleted += callback;
        _Proxy.languageAsync();
    } 
```

谁能帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T11:24:58.953

You must use TaskCompletionSource to convert EAP (event asynchronous model) to TAP (task asynchronous model). First, add new method to your ServiceAgent (you can create this even as an extension method):

```
public Task<string> GetLanguageAsync(EventHandler<languageCompletedEventArgs> callback)
{
    var tcs = new TaskCompletionSource<string>();
    EventHandler<languageCompletedEventArgs> callback;
    callback = (sender, e) =>
    {
        _Proxy.languageCompleted -= callback;
        tcs.TrySetResult(e.Result);
    };

    _Proxy.languageCompleted += callback;
    _Proxy.languageAsync();

    return tcs.Task;
} 
```

TCS will create a task which you can await then. By using the existing model, it will bridge the gap and make it consumable with async/await. You can now consume it in the view model:

```
private void GetLanguage()
{
    Language = await ServiceAgent.GetLanguageAsync();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T08:12:18.337

**您可以使用以下库在Silverlight 5** （或 .NET 4）中使用 async 和 await ：AsyncTargetingPack。AsyncTargetingPack 在[NuGet](http://nuget.org/)上。

如需完整的演练，请阅读这篇出色的文章：

[在带有异步目标包的 Visual Studio 11 中使用 Silverlight 5 和 .NET 4 中的 async 和 await](http://10rem.net/blog/2012/05/22/using-async-and-await-in-silverlight-5-and-net-4-in-visual-studio-11-with-the-async-targeting-pack)

# asp.net - 使用 IIS7 和 URL 重写删除 .aspx 扩展名

> ID：13216673
> 
> 赞同：1
> 
> 时间：2012-11-04T06:50:37.163
> 
> 标签：asp.net, iis-7, url-rewriting, web-config

> **可能重复：**
> [使用 rewriteModule 从页面中删除 .aspx？](https://stackoverflow.com/questions/6097592/removing-aspx-from-pages-using-rewritemodule)

我想从 url 中删除 .aspx 扩展名。使用 IIS7 和 URL 重写。在我的 web.config 文件中，我有以下代码，当我浏览一个 aspx 文件（例如 test.aspx）时，它仍然在浏览器中显示 .aspx。我错过了什么吗？谢谢

```
<system.webServer>
 <rewrite>
   <rules>
     <rule name="Remove .aspx from URL" stopProcessing="true">
       <match url="(.*)\.aspx$" />
       <action type="Redirect" url="/{R:1}" />
     </rule>       
   </rules>      
 </rewrite>  
 </system.webServer> 
```

# css - 您可以在 @media 查询中重新定义 @mixin 吗？

> ID：13216675
> 
> 赞同：0
> 
> 时间：2012-11-04T06:50:58.203
> 
> 标签：css, sass, media-queries

我在我的 SCSS 中定义了以下 @mixin 以创建像素和 rems 的字体大小：

```
@mixin font-size($sizeValue: 1){
font-size: ($sizeValue * 10) + px;
font-size: $sizeValue + rem;
} 
```

然后我有以下内容：

```
h1 { @include font-size(1.6) }

h2 { @include font-size(1.4) }

h3 { @include font-size(1.2) } 
```

但是当屏幕低于 480 像素时，我想将字体大小减小 80%，但到目前为止以下代码不起作用：

```
@media(max-width:480px){ 
@mixin font-size($sizeValue: 1){
font-size: (($sizeValue * 10) * 0.8) + px;
font-size: ($sizeValue * 0.8) + rem;
}} 
```

是否可以在 @media 查询中重新定义 @mixin？这样做的最佳方法是什么？我想这样做而不必再次包含 h1、h2、h3 规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:05:26.410

为你的 mixin 添加一个额外的参数：

```
@mixin font-size($sizeValue: 1, $ratio: 1){
  font-size: (($sizeValue * 10) * $ratio) + px;
  font-size: ($sizeValue * $ratio) + rem;
} 
```

然后，将标题值保存为变量：

```
$header-1: 1.6;
$header-2: 1.4;
$header-3: 1.2; 
```

最后：

```
h1 {
  @include font-size($header-1);
}

@media(max-width:480px) {
  h1 {
    @include font-size($header-1, .8);
  }
} 
```

这将产生：

```
h1 {
  font-size: 16px;
  font-size: 1.6rem;
}

@media (max-width: 480px) {
  h1 {
    font-size: 12.8px;
    font-size: 1.28rem;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:29:46.503

如果您不想重新定义所有标头，解决方案是更改 mixin 以包含媒体查询

```
@mixin font-size($sizeValue: 1){
    font-size: ($sizeValue * 10) + px;
    font-size: $sizeValue + rem;

    @media(max-width:480px) {
        font-size: (($sizeValue * 10) * 0.8) + px;
        font-size: ($sizeValue * 0.8) + rem;
   }
} 
```

但请记住，css 输出将是这样的，每个标题都重复了 @media 规则

```
h1 {
    font-size: 16px;
    font-size: 1.6rem;
}
@media (max-width: 480px) {
    h1 {
        font-size: 12.8px;
        font-size: 1.28rem; 
    }
}
h2 {
    font-size: 14px;
    font-size: 1.4rem;
}
@media (max-width: 480px) {
    h2 {
        font-size: 11.2px;
        font-size: 1.12rem;
    }
}
h3 {
    font-size: 12px;
    font-size: 1.2rem; 
}
@media (max-width: 480px) {
    h3 {
        font-size: 9.6px;
        font-size: 0.96rem;
    }
} 
```

# bash - 删除模式之间的空格

> ID：13216686
> 
> 赞同：3
> 
> 时间：2012-11-04T06:52:25.367
> 
> 标签：bash, sed

我有一个日志文件，其中数据用空格分隔。不幸的是，其中一个数据字段也包含空格。我想用“%20”替换这些空格。它看起来像这样：

```
2012-11-02 23:48:36 INFO 10.2.3.23 something strange name.doc 3.0.0 view1 orientation_right 
```

预期的结果是

```
2012-11-02 23:48:36 INFO 10.2.3.23 something%20strange%20name.doc 3.0.0 view1 orientation_right 
```

无法预测 IP 地址和“.doc”之间有多少空格。因此，如果可能的话，我想使用纯 bash 在这两种模式之间进行更改。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:19:19.630

```
$ cat file
2012-11-02 23:48:36 INFO 10.2.3.23 something strange name.doc 3.0.0 view1 orientation_right 
```

使用 Perl：

```
$ perl -lne 'if (/(.*([0-9]{1,3}\.){3}[0-9]{1,3} )(.*)(.doc.*)/){($a,$b,$c)=($1,$3,$4);$b=~s/ /%20/g;print $a.$b.$c;}' file
2012-11-02 23:48:36 INFO 10.2.3.23 something%20strange%20name.doc 3.0.0 view1 orientation_right 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T09:08:33.073

这可能对您有用（GNU sed）：

```
sed 's/\S*\s/&\n/4;s/\(\s\S*\)\{3\}$/\n&/;h;s/ /%20/g;H;g;s/\(\n.*\n\)\(.*\)\n.*\n\(.*\)\n.*/\3\2/' file 
```

这会将行分成三份，复制该行，在其中一个副本中将`space`'s替换为 ' `%20`，然后重新组合该行以丢弃不需要的部分。

编辑：

参考下面的评论，上述解决方案可以改进为：

```
sed -r 's/\S*\s/&\n/4;s/.*\.doc/&\n/;h;s/ /%20/g;H;g;s/(\n.*\n)(.*)\n.*\n(.*)\n.*/\3\2/' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T08:00:46.957

尚未经过测试，但在 Bash 4 中可以做到这一点

```
if [[ $line =~ (.*([0-9]+\.){3}[0-9]+ +)([^ ].*\.doc)(.*) ]]; then
  nospace=${BASH_REMATCH[3]// /%20}
  printf "%s%s%s\n" ${BASH_REMATCH[1]} ${nospace} ${BASH_REMATCH[4]}
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T09:23:15.970

这是使用 GNU sed 的一种方法：

```
echo "2012-11-02 23:48:36 INFO 10.2.3.23 something strange name.doc 3.0.0 view1 orientation_right" |
sed -r 's/(([0-9]+\.){3}[0-9]+\s+)(.*\.doc)/\1\n\3\n/; h; s/[^\n]+\n([^\n]+)\n.*$/\1/; s/\s/%20/g; G; s/([^\n]+)\n([^\n]+)\n([^\n]+)\n(.*)$/\2\1\4/' 
```

输出：

```
2012-11-02 23:48:36 INFO 10.2.3.23 something%20strange%20name.doc 3.0.0 view1 orientation_right 
```

### 解释

```
s/(([0-9]+\.){3}[0-9]+\s+)(.*\.doc)/\1\n\3\n/  # Separate the interesting bit on its own line
h                                             # Store the rest in HS for later
s/[^\n]+\n([^\n]+)\n.*$/\1/                   # Isolate the interesting bit
s/\s/%20/g                                     # Do the replacement
G                                             # Fetched stored bits back
s/([^\n]+)\n([^\n]+)\n([^\n]+)\n(.*)$/\2\1\4/ # Reorganize into the correct order 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T10:14:17.583

Thor 的答案的一个变体，但使用了 3 个过程（4 个带有`cat`波纹管，但您可以通过将 your_file 作为第一个 sed 的最后一个参数来摆脱它）：

```
cat your_file |
  sed -r -e 's/ (([0-9]+\.){3}[0-9]+) +(.*\.doc) / \1\n\3\n/' |
  sed -e '2~3s/ /%20/g' |
  paste -s -d "  \n" 
```

正如托尔解释的那样：

*   第一个 sed ( `s/ (([0-9]+\.){3}[0-9]+) +(.*\.doc) / \1\n\3\n/`) 将有趣的位分隔在自己的行上。

进而：

*   `%20`第二个 sed在第 2 行和每 3 行替换所有空格。
*   最后，将其重新粘贴在一起。

必须注意，该`2~3`部分是 GNU sed 扩展。如果你没有 GNU sed，你可以这样做：

```
cat your_file |
  sed -r -e 's/ (([0-9]+\.){3}[0-9]+) +(.*\.doc) / \1\n\3\n/' |
  sed -e 'N;P;s/.*\n//;s/ /%20/g;N' |
  paste -s -d "  \n" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-04T12:35:12.087

只是猛击。假设 4 个字段出现在空格分隔的字符串之前，3 个字段出现在之后：

```
reformat_line() {
    local sep i new=""
    for ((i=1; i<=$#; i++)); do
        if (( i==1 )); then
            sep=""
        elif (( (1<i && i<=5) || ($#-3<i && i<=$#) )); then
            sep=" "
        else
            sep="%20"
        fi
        new+="$sep${!i}"
    done
    echo "$new"
}

while IFS= read -r line; do
    reformat_line $line    # unquoted variable here
done < filename 
```

输出

```
2012-11-02 23:48:36 INFO 10.2.3.23 something%20strange%20name.doc 3.0.0 view1 orientation_right 
```

# actionscript-3 - 1050 无法分配给非参考值 as3

> ID：13216689
> 
> 赞同：1
> 
> 时间：2012-11-04T06:52:54.013
> 
> 标签：actionscript-3

我遇到了一些错误`"1050: Cannot assign to a non-reference value."`，我对编码还是很陌生，所以无法修复这个错误令人沮丧，任何帮助将不胜感激。

```
var PracticeDummyHealth:int=50
var PlayerAttack:int=20;

public function PlayerAttackFunction(){
    if(PracticeDummyHealth>0){
        PracticeDummyHealth-PlayerAttack=PracticeDummyHealth;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:00:32.793

*不是*属性/变量名称的语法结构位于赋值运算符的*左侧：*`=`

```
// expression                   = expression
PracticeDummyHealth-PlayerAttack=PracticeDummyHealth;
// which makes as much sense to ActionScript as .. it's not an equation solver :)
// 100 - 50 = 100 
```

与此有效代码进行比较：

```
// variable         = new_value
PracticeDummyHealth = PracticeDummyHealth - PlayerAttack;
// or
PracticeDummyHealth -= PlayerAttack; 
```

请注意，在这两种情况下，“引用”（阅读：属性/变量名称）都出现在（或复合）的左侧*。*这个术语来自处理 l 值的规范，不幸的是它在这里没有产生更好的错误消息。`=``-=`

# c# - 如何在gridview中检索行索引

> ID：13216693
> 
> 赞同：2
> 
> 时间：2012-11-04T06:53:25.303
> 
> 标签：c#, webforms

选择字段时如何检索行索引`gridview`

```
GridView.FindControl("lblReqId").rowIndex; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:02:54.070

```
var ctrl = GridView.FindControl("lblReqId");
var idx = GridView.Controls.IndexOf(ctrl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:05:14.517

`RowIndex`如果此控件存在于 的每个行单元格中，则无法获取`GridView`。您可能需要`events`为每一行使用该触发，在这种情况下，您可以获得 RowIndex 并最终获得您`lblReqId`对 that的控制`Row`。

# xml - 用 perl 中的另一个文本替换跨越多行的标签之间的文本

> ID：13216703
> 
> 赞同：0
> 
> 时间：2012-11-04T06:54:31.277
> 
> 标签：xml, perl, xml-parsing

我需要用`<stats>...</stats>`Perl 中其他文件中的另一个多行文本替换文件中 tags() 之间的多行文本。我正在使用搜索和替换功能，但目前不工作。如果开始标签和结束标签都在同一行，那么我可以替换它们，否则它不会替换。对于 Ex，在目标文件中：

```
 .
    .
    .

    <stats>
    <stat type="string" value="a" />
    <stat type="string" value="b" />
    <stat type="string" value="c" />
    <stat type="string" value="d" />
    </stats>

    .
    .
    .
    . 
```

我的代码片段的一部分如下：

```
my $replacetext="<stats>"."@lines"."</stats>";
my $searchtext="<stats>.*</stats>";

# Here @file_lines is the array containing destination file and  @lines is the array containing source file.

foreach (@file_lines) 
{
      $_=~ s/$searchtext/$replacetext/g;
} 
```

`'.*'`仅当开始标签和结束标签在同一行时才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:17:12.643

[用 regexes 解析 HTML/XML](https://stackoverflow.com/a/1732454/459233)是**不行**的。正如@mu 提到的，尝试使用 XML 解析器 - 例如，您可以实现您想要的。[`XML::Simple`](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)

查看面向 Perl 开发人员的 XML 教程[，第 1 部分：XML 加 Perl——简直是魔法](http://www.ibm.com/developerworks/xml/library/x-xmlperl1/index.html)

它超出了您的需要，但会为您提供在**Perl中****使用 XML的很好的介绍**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T07:41:52.210

不要使用正则表达式来解析 XML。使用 XML 解析器。

使用[XML::XSH2的示例，它是](http://p3rl.org/XML%3a%3aXSH2)[XML::LibXML](http://p3rl.org/XML%3a%3aLibXML2)的包装器：

```
my $source ;
$source = { open my $SOURCE, '<', 'source.xml' or die $! ; local $/ ; <$SOURCE> } ;
open destination.xml ;
for //stats {
    rm ./* ;
    insert chunk $source into . ;
}
save :b ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T04:22:22.193

尽管使用 XML 库通常是正确的做法，但如果文件不是太大并且您不希望实际解析和遍历 XML 的开销（仅例如，需要进行小的更改）。但是，这样做非常脆弱

```
my $joined_file = join "\n", @file_lines;          # one long multi-line string
$joined_file =~ s/$searchtext/$replacetext/sg;     # s means multi-line
my @updated_file_lines = split /\n/, $joined_file; # result 
```**

# jquery - 如何在用作所见即所得编辑器的 DIV 中添加边距指南？

> ID：13216714
> 
> 赞同：3
> 
> 时间：2012-11-04T06:56:37.767
> 
> 标签：jquery, html, css, wysiwyg, margin

我用 html 和 jquery 编写了一个设计编辑器，它允许人们添加文本框、图像等并构建设计。为此，我有一个带有边框的 div 作为画布，用户可以通过单击动态创建可拖动、可调整大小的 div 等的按钮来添加文本或图像，就像在顶部添加图像或任何东西一样Photoshop 或 Illustrator 中的画布，或者喜欢在 MS Word 中添加文本框和图像。

我的问题是，如何在画布边缘附近添加边距指南？我说的是能够看到类似于我们如何在其他编辑软件中选择“显示网格”的线条。（虽然我不想要一个网格，只是边缘线距离边缘半厘米）。

我考虑使用除了边缘附近的边缘线之外完全透明的 PNG 图像，然后在画布上拉伸该图像，`$('#content')`. 但是，放置在其顶部的每个文本或图像都会覆盖这些线条。我真的不介意这一点，但有没有办法随时显示线条？我不能给它比画布上的项目更高的 z-index，因为它们将无法点击或编辑，因为 PNG 图像会覆盖所有内容。如果我在里面使用一个带边框的 div 也是一样的`$('content')`，因为它会再次使它后面的东西无法点击。

请记住，边缘线只是一种视觉辅助，用户仍然可以放置超出此线的东西。有任何想法吗？

有没有这样的事情可以做：

```
#content{ border:1px dotted gray; border-position: -5px; } 
```

这样它就可以将内容 DIV 的边界推到 DIV*内部*，而不是在边缘？

或者还有其他方法可以添加边距吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:10:48.103

一个简单的想法：你能在画布内放置 4 个 div，一个在顶部，一个在底部，一个在每一侧吗？

每个 div 的宽度（或高度）可能为几个像素（您的边距），并且只有一个朝向画布中心的虚线边框。这样，您可以在这些 div 上使用 z-index 而无需隐藏其下的内容（至少在边距内......）

# html - 部分表单上的 HTML 表单操作

> ID：13216721
> 
> 赞同：0
> 
> 时间：2012-11-04T06:58:03.057
> 
> 标签：html, forms

我正在制作一个表格，并希望在表格的某个部分完成后发生一些事情。我有一些复选框、一个下拉菜单和三个只读文本字段。当复选框和下拉字段被填充时，我需要弹出一些东西，但不知道如何做到这一点。我尝试将表格放入表格中，但在此之后失败了，后来我阅读了此事，我发现这是不切实际的。无论如何，这是我的表单代码：

```
<form action="http://siedb1.sys.virginia.edu/~jhr3ct/Code/Reserve%20Confirmation.php">
        Facility: <input type="checkbox" name="facility" value="AFC">AFC
        <input type="checkbox" name="facility" value="Memorial Gym">Memorial Gym
        <input type="checkbox" name="facility" value="Slaughter">Slaughter
        <input type="checkbox" name="facility" value="North Grounds">North Grounds<br>
        Type of Room/Court: 
        <select>
            <option value="default">Choose room...</option>
            <option value="squash">Squash</option>
            <option value="handball">Handball</option>
            <option value="racquetball">Racquetball</option>
            <option value="multipurpose">Multipurpose</option>
        </select><br>
        Room: <input type="text" name="start" readonly="readonly"><br>
        Start Time: <input type="text" name="start" readonly="readonly"><br>
        End Time: <input type="text" name="end" readonly="readonly"><br><br>
        <input id="submit" type="submit" value="Submit">
    </form> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T07:03:22.667

您可能对学习基本的 javascript 表单事件感兴趣。网上有很多教程。我建议你这个：[http ://www.javascriptkit.com/jsref/select.shtml](http://www.javascriptkit.com/jsref/select.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T09:44:26.143

如果您需要在选中所有复选框并更改下拉菜单后显示弹出窗口，请将此功能添加到所有复选框的 onclick 事件和下拉框的 onchange 事件中。

> 函数 func() {
>       var inputTags = document.getElementsByTagName('input');
>       var dropdowns = document.getElementsByTagName('SELECT');
>       for (var i = 0; i < inputTags.length; i++) {
>           if (inputTags[i].type == 'checkbox') {
>              var aCheckBox = inputTags[i];
>              如果（！aCheckBox.checked）{
>                 返回；
>              }
>          }
>       }
>       if(dropdowns[0].value == 'default') {
>           return;
>       }
>       alert("所有复选框和下拉菜单都已填满。");
> }
> 
> `<form action="../Confirmation.php">`
>      `<input onclick="func()" type="checkbox" name="facility" value="AFC">AFC`
>      `<input onclick="func()" type="checkbox" name="facility"`
>                    `value="Slaughter">Slaughter`
>      `<select onchange="func()" id="ss">`
> `</form>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T07:03:38.060

只是为您指明正确的方向：您必须使用 javascript 来检查表单输入值，并显示一个弹出窗口。

您可以使用 jQuery 轻松地做到这一点，并为表单 submit() 操作创建一个侦听器，您可以在其中检查您的复选框和下拉菜单是否被选中。

jQuery 文档在这里：[http ://api.jquery.com/submit/](http://api.jquery.com/submit/)

# javascript - 如何在 jQuery Mobile 中正确分隔页面？

> ID：13216724
> 
> 赞同：4
> 
> 时间：2012-11-04T06:58:25.990
> 
> 标签：javascript, css, jquery-mobile, load

我正在使用 jQuery Mobile 进行一些测试，并试图弄清楚如何设置应用程序及其各个页面。理想情况下，我希望框架加载带有过渡的页面，但仍保持每个页面清晰分开。特别是，似乎通过 Ajax 加载的页面并没有“清除”前一页的 JavaScript 或 CSS：

**示例 1 - JavaScript**

例如，如果我有这样的东西`page1.html`：

```
<script>
    setInterval(function() {
        console.info('Interval' + (new Date()));
    }, 1000);
</script> 
```

然后，如果我加载`page2.html`，间隔仍在运行。如果我回到`page1`，就会开始一个新的间隔，所以现在有两个间隔在运行，每次我回到 3 和 4 等等`page1`。

**示例 2 - CSS**

另一个问题是样式。假设两个开发人员在两个不同的页面上独立工作，创建一个元素`my-element`。在`page1`中，此元素的样式为：

```
<style>
    #my-element {
        color: red;
    }
</style>

<span id="my-element">This one is red</span> 
```

在 中`page2`，元素没有样式：

```
<span id="my-element">This one has no style</span> 
```

再一次，如果我去`page1.html`first 然后`page2.html`，`my-element`最终会变成红色，即使它没有被设置为`page2.html`.

所以我想我有两个问题：

1.  目前，加载页面的 jQuery Mobile 方法似乎根本无法扩展。CSS，JS 在一个页面上创建，继续到下一个页面。那么有什么方法可以让 jQuery Mobile 加载页面“干净”。即完全删除上一页中的所有内容，以便JS或CSS位不会影响下一页？

2.  如果不是，那么在 jQuery Mobile 中以可扩展的方式处理多个页面的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:40:20.437

您所描述的行为是使 JQM 工作的原因。您的 DOM 会持续存在（包括您加载的第一页的 js 和 css），直到您使用 'data-ajax=false' 或 'rel=external' 加载页面，这将执行常规页面加载（无 ajax）。

通过 ajax 加载页面，您将在 DOM 中至少有两个页面 - 您开始的页面（如锚页面）和您通过 ajax 加载的任何其他页面（加载下一页后将被删除）。 

这种方法允许具有可以跨页面共享的转换和其他功能。

您仍然可以使用 js/css 轻松定位特定页面。我总是在我的应用程序中运行一个 controller.js 文件，它通过绑定到任何 JQM 事件（pagebeforeshow、pageshow...）来处理特定于页面的事情。同样对于页面特定的 css，只需使用 page id 属性来使 css 页面特定。

# php - 类通过 Eval() 调用成员函数

> ID：13216725
> 
> 赞同：-2
> 
> 时间：2012-11-04T06:58:42.573
> 
> 标签：php, eval

是的，我很清楚 Eval() 是多么可怕，我别无选择，它是为了作业，教授指示我们使用它。

我无法弄清楚为什么 PHP 不允许我在使用 Eval() 时从类中调用类的成员函数。例如：

```
$code="class evalTest{
    function f1(){
        echo 'f1';
        f2();
    }
    function f2(){
        echo 'f2';
    }
}

$x=new evalTest();
$x->f2();
$x->f1();";

eval($code);
echo 'test'; 
```

上面的代码会打印出来：

```
f2f1 
```

页面的其余部分将是空白的。一旦我通过 Eval() 从函数内调用函数，似乎整个 PHP 脚本就会停止。甚至最后的“回声‘测试’；” 不打印。

是否有一些技巧可以让它工作，或者这是 Eval() 的限制？同样，如果可以的话，我会避免使用 Eval()，但我们被明确指示使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:04:09.230

因为您需要调用`$this->f2();`而不是`f2()`.

`$`如果您使用双引号，您还需要转义，因为`$blah`双引号字符串中的任何内容都被解释为**变量引用**。

```
<?php
$code="class evalTest{
    function f1(){
        echo 'f1';
        \$this->f2();
    }
    function f2(){
        echo 'f2';
    }
}

\$x=new evalTest();
\$x->f2();
\$x->f1();";

eval($code);
echo 'test'; 
```

[演示](http://codepad.org/TCNh7tGI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:06:32.053

使用单引号或保护 \$，你在调用 f2() 的地方也有错误，使用 $this->f2 [http://codepad.org/DkQ3PiTQ](http://codepad.org/DkQ3PiTQ)

```
$code='class evalTest{
    function f1(){
        echo "f1";
        $this->f2();
    }
    function f2(){
        echo "f2";
    }
}

$x=new evalTest();
$x->f2();
$x->f1();;';

eval($code);
echo 'test'; 
```

# controller - AngularJS 错误：未知提供者：sharedServiceProvider <- sharedService

> ID：13216727
> 
> 赞同：1
> 
> 时间：2012-11-04T06:58:44.083
> 
> 标签：controller, communication, angularjs

我按照这个例子[http://jsfiddle.net/simpulton/XqDxG/](http://jsfiddle.net/simpulton/XqDxG/)，也可以在这里找到[http://youtu.be/1OALSkJGsRw](http://youtu.be/1OALSkJGsRw)

```
var myModule = angular.module('myModule', []);
myModule.factory('mySharedService', function($rootScope) {
var sharedService = {};

sharedService.message = '';

sharedService.prepForBroadcast = function(msg) {
    this.message = msg;
    this.broadcastItem();
};

sharedService.broadcastItem = function() {
    $rootScope.$broadcast('handleBroadcast');
};

return sharedService;
}); 
```

总是收到此消息后

> 错误：未知提供者：sharedServiceProvider <- sharedService

我只是复制了 jsfiddle 的代码。我的惊喜。同样的错误。疯了，因为在 jsfiddle 代码工作得很好。

可能会弃用此代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T08:16:51.147

由于 jsFiddle 运行良好，并且仅当您将代码移动到应用程序中时才会出现问题，我认为问题出在应用程序初始化逻辑中。

您应该确保您的`ng-app`指令指定了您要使用的模块名称，例如：`ng-app="myModule"`. 如果您检查 jsFiddle 中的“信息”面板，您可以看到它的 body 标签配置如下`<body ng-app="myModule">`：

在任何情况下，您的问题都与任何版本更改/已弃用的框架功能无关，我们可以轻松地将 AngularJS 更新到最新版本并且它运行良好。这是更新的 jsFiddle：http: [//jsfiddle.net/fRzAD/1/](http://jsfiddle.net/fRzAD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T14:38:41.047

我有同样的错误，我的解决方案是将所有参数都放入注入中。

```
function addPedidoController ($scope, $http, $location, $rootScope, sharedService) {
..
}

addPedidoController.$inject = ['$scope', '$http', '$location', '$rootScope', 'mySharedService']; 
```

我希望它对你有用！

# python - Blender：创建材质、纹理和打开图像...

> ID：13216732
> 
> 赞同：0
> 
> 时间：2012-11-04T07:00:04.590
> 
> 标签：python, textures, blender

那么，在 Blender 中，我如何创建新材质，将其分配给当前对象，创建图像纹理并分配它，然后为其打开图像（并在 UV/图像编辑器中打开图像）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T00:06:32.180

我建议阅读Blender wiki 上的[Blender API Python Cookbook 。](http://wiki.blender.org/index.php/Dev:2.5/Py/Scripts/Cookbook/Code_snippets)它包含代码示例所需的每个功能的部分。

# c++ - 使用 Getline 和 Ifstream 缺少数据行

> ID：13216738
> 
> 赞同：2
> 
> 时间：2012-11-04T07:01:13.153
> 
> 标签：c++, ifstream

好的，所以这正在杀死我，因为它是我程序中如此简单的一部分，只是不想工作。我正在从文本文件中读取数据以在 GA 中使用。

第一个 getline() 完美运行，但第二个不想将任何数据写入我的字符串。当我 cout 字符串时，它不显示任何内容。

这是代码：

```
ifstream inFile;
inFile.open(fname.c_str());
char pop[20], mut[20];

inFile.getline(pop,20);
cout << pop;
inFile.getline(mut,20);
cout << mut; //this outputs nothing 
```

感谢您提前提供任何帮助。我的文件中的一个样本：它们之间没有界限，突变是人口之后的直线

种群规模：30
突变：20

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:50:10.813

您的文件的第一行有 20 个字符长（19+新行），但`pop[20]`只能包含 19 个字符（因为最后一行是为空终止符“\0”保留的）。

当[`istream::getline`](http://www.cplusplus.com/reference/iostream/istream/getline/)因为提取了 20-1 个字符而停止时，它不会丢弃新的行分隔符（因为它从未被读取）。所以 next`getline`只是读取**第一**行的结尾，丢弃新行。

这就是为什么你在第二个字符串中什么都没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T08:53:43.687

您的问题是输入行的长度超过了必须保存它的缓冲区的长度。

解决方案是不使用字符数组。这是C++，使用`std::string`！

```
std::ifstream inFile;
inFile.open(fname.c_str());

std::string pop;
std::getline(inFile, pop);
cout << pop << "\n";

std::string mut;
std::getline(inFile, mut);
cout << mut << "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T07:25:39.360

我认为你需要找出问题所在。将错误检查代码添加到您的`getline`调用中，将（简单）代码重构为（简单）函数，并带有（简单）单元测试。可能，您的第二行比假设的 20 个字符长（包括空词！）。

要了解我的意思，请查看[此代码段](http://codepad.org/tiRdtlFH)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T07:03:01.710

尝试类似的东西

```
while (getline(in,line,'\n')){
    //do something with line
} 
```

或尝试类似的东西

```
string text;
string temp; 
ifstream file;
  file.open ("test_text.txt");

  while (!file.eof())
  {
    getline (file, temp);
    text.append (temp); // Added this line
  } 
```

# javascript - 在 jQuery 中简洁地添加自定义事件触发器

> ID：13216739
> 
> 赞同：3
> 
> 时间：2012-11-04T07:01:51.900
> 
> 标签：javascript, javascript-events, event-handling, jquery

我有一个相当大且复杂的 javascript 模块，用于我网站的多个页面。经过一番搜索和摆弄后，我想出了以下结构，以便在模块的一个功能在特定页面上运行时运行一些额外的代码。

```
// within module definition that is used across multiple pages
function some_module_method(){
  $.event.trigger( 'custom_event' );
}

// bit of functionality that I'm trying to add to a single page
$( '#some-element' ).on( 'custom_event', function(){
  console.log( 'The custom event has just been triggered!' );
} ); 
```

我遇到的一个问题是，当我期望这个事件只触发一次时，它会快速连续触发 2-4 次。这是我用来触发和附加此事件的上述结构的问题，还是可能有其他问题？

另外，如何在不引用某些 DOM 对象的情况下将函数附加到事件？简单地使用 $.on() 是行不通的。

这是我在 Stack Overflow 上的第一篇文章。你们真是一个了不起的资源，我想开始回馈这个社区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:50:00.723

对于您的第一个问题，如果没有看到示例，就很难说。我可能弄错了，但我很确定 $.trigger() 不会像你使用它那样工作。它必须附加到一个 jQuery 对象，例如。`$().trigger()`.

对于你的第二个问题......你不必完全使用 DOM 元素，但你可以使用一个空的 jquery 对象，如`$({}).on()`. 看到[这个小提琴](http://jsfiddle.net/6Ek6n/)。

希望这会有所帮助。

附带说明一下，您可能会将 jQuery 对象方法与核心方法混淆。[这里](http://jqfundamentals.com/legacy#chapter-4)有一些信息以防万一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:57:45.977

采用

```
$('#some-element').trigger('custom_event'); 
```

代替

```
$.trigger('custom_event'); 
```

# html - css + form 例子类似于outlook.com的布局

> ID：13216740
> 
> 赞同：-4
> 
> 时间：2012-11-04T07:01:55.207
> 
> 标签：html, css, outlook.com

任何人都可以通过提供一些示例或示例来生成css类以重新产生类似于outlook.com的登录页面的效果来提供帮助吗？

页面集中的地方，分为两半，左侧包含图像，右侧包含登录字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:46:31.157

不是反对者，请查看 Outlook 网站；当我查看源代码[Outlook.com](https://login.live.com/login.srf?wa=wsignin1.0&ct=1352029036&rver=6.1.6206.0&sa=1&ntprob=-1&wp=MBI_SSL_SHARED&wreply=https://mail.live.com/?owa=1&owasuffix=owa%252f&id=64855&snsc=1&cbcxt=mail)时差点呕吐：

他们的 css 很好……[你自己看看](https://secure.shared.live.com/~Live.SiteContent.ID/~16.4.22/~/~/~/~/css/R3WinLive2057.css)。

我要做的是构建一个具有两列预定义宽度的页面（在这种情况下可以使用绝对值）。所以一类以像素为单位的列宽，并将其分配给两个部分 - 一个以图像为特色，另一个以登录/其他所有内容为特色。如果页面被调整为更小，一个应该出现在另一个下方 - 这是很好的降级。

您可以在不使用 CSS 的情况下拥有一个图像和一个登录框，并以某种方式将登录框配置为与图像居中对齐 - 但这是一个糟糕的解决方案，并且肯定使用了已弃用的代码。

# vb.net - Ado.Net - 从 ExecuteScalar 和 ExecuteNonQuery 返回真或假

> ID：13216745
> 
> 赞同：0
> 
> 时间：2012-11-04T07:02:54.783
> 
> 标签：vb.net, ado.net

我是dotnet的新手，谁能帮忙。

我们需要的是在我们的 vb.net 代码中运行 ExecuteScalar 或 ExecuteNonquery ado 命令时返回状态 true 或 false。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:30:14.367

只需为包装原始功能的 SQLCommand 编写一个扩展方法。

```
<Extension()> 
Public Function MyExecuteScalar(ByVal sqlCommand As SqlCommand) As Boolean
    MyExecuteScalar = Not (sqlCommand.ExecuteScalar() is Nothing)
End Function

<Extension()> 
Public Function MyExecuteNonQuery(ByVal sqlCommand As SqlCommand) As Boolean
    MyExecuteNonQuery = sqlCommand.ExecuteNonQuery() > 0
End Function 
```

像这样简单地调用这些方法：

```
if mySqlCommand.MyExecutescalar() then ... 
```

# python - 如何实现凯撒密码

> ID：13216749
> 
> 赞同：1
> 
> 时间：2012-11-04T07:03:31.727
> 
> 标签：python

> **可能重复：**
> [Caesar's Cipher using python，可能需要一点帮助](https://stackoverflow.com/questions/1538935/caesars-cipher-using-python-could-use-a-little-help)

好的，所以在我的课堂上，我应该编写将字典转换为凯撒密码的代码。我的代码一切正常，但返回键的顺序与提供的测试用例不同。

我的代码：

```
sLowerCase = string.ascii_lowercase
sUpperCase = string.ascii_uppercase
dCode = {'A':'A', 'B':'B', 'C':'C', 'D':'D', 'E':'E', 'F':'F', 'G':'G', 'H':'H', 'I':'I', 'J':'J', 'K':'K', 'L':'L', 'M':'M', 'N':'N', 'O':'O', 'P':'P', 'Q':'Q', 'R':'R', 'S':'S', 'T':'T', 'U':'U', 'V':'V', 'W':'W', 'X':'X', 'Y':'Y', 'Z':'Z',
         'a':'a', 'b':'b', 'c':'c', 'd':'d', 'e':'e', 'f':'f', 'g':'g', 'h':'h', 'i':'i', 'j':'j', 'k':'k', 'l':'l', 'm':'m', 'n':'n', 'o':'o', 'p':'p', 'q':'q', 'r':'r', 's':'s', 't':'t', 'u':'u', 'v':'v', 'w':'w', 'x':'x', 'y':'y', 'z':'z'}

for c in dCode.keys():

    if c in sUpperCase:

        if sUpperCase.index(c) + shift > 25:

            dCode[c] = sUpperCase[(sUpperCase.index(c) + shift) - 26]

        else:

            dCode[c] = sUpperCase[(sUpperCase.index(c) + shift)]

    if c in sLowerCase:

        if sLowerCase.index(c) + shift > 25:

            dCode[c] = sLowerCase[(sLowerCase.index(c) + shift) - 26]

        else:

            dCode[c] = sLowerCase[(sLowerCase.index(c) + shift)]

return dCode 
```

我的 buildCoder(0) 输出（显然最容易阅读）

{'B'：'B'，'D'：'D'，'F'：'F'，'H'：'H'，'J'：'J'，'L'：'L'，' N'：'N'，'P'：'P'，'R'：'R'，'T'：'T'，'V'：'V'，'X'：'X'，'Z' ：'Z'，'b'：'b'，'d'：'d'，'f'：'f'，'h'：'h'，'j'：'j'，'l'：' l'，'n'：'n'，'p'：'p'，'r'：'r'，'t'：'t'，'v'：'v'，'x'：'x' ，'z'：'z'，'A'：'A'，'C'：'C'，'E'：'E'，'G'：'G'，'I'：'I'，' K'：'K'，'M'：'M'，'O'：'O'，'Q'：'Q'，'S'：'S'，'U'：'U'，'W'：'W'，'Y'：'Y'，'a '：'a'，'c'：'c'，'e'：'e'，'g'：'g'，'i'：'i'，'k'：'k'，'m'： 'm', 'o': 'o', 'q': 'q', 's': 's', 'u': 'u', 'w': 'w', 'y': 'y '}'q': 'q', 's': 's', 'u': 'u', 'w': 'w', 'y': 'y'}'q': 'q', 's': 's', 'u': 'u', 'w': 'w', 'y': 'y'}

他们的输出：

{'A'：'A'，'C'：'C'，'B'：'B'，'E'：'E'，'D'：'D'，'G'：'G'，' F'：'F'，'I'：'I'，'H'：'H'，'K'：'K'，'J'：'J'，'M'：'M'，'L' ：'L'，'O'：'O'，'N'：'N'，'Q'：'Q'，'P'：'P'，'S'：'S'，'R'：' R'，'U'：'U'，'T'：'T'，'W'：'W'，'V'：'V'，'Y'：'Y'，'X'：'X' ，'Z'：'Z'，'a'：'a'，'c'：'c'，'b'：'b'，'e'：'e'，'d'：'d'，' g'：'g'，'f'：'f'，'i'：'i'，'h'：'h'，'k'：'k'，'j'：'j'，'m'：'m'，'l'：'l'，'o '：'o'，'n'：'n'，'q'：'q'，'p'：'p'，'s'：'s'，'r'：'r'，'u'： 'u', 't': 't', 'w': 'w', 'v': 'v', 'y': 'y', 'x': 'x', 'z': 'z '}'w': 'w', 'v': 'v', 'y': 'y', 'x': 'x', 'z': 'z'}'w': 'w', 'v': 'v', 'y': 'y', 'x': 'x', 'z': 'z'}

我已经使用 python 进行测试和比较，它们确实是由相同的键组成的字典：值。任何建议都会很重要。（这是针对在线麻省理工学院的课程。通常有论坛，但是在有考试的时候它们就关闭了。这不是考试的，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:07:14.470

Python 中的字典不保留特定的顺序。因此，您不能确定键和值是否会按照 (a) 最初创建或 (b) 最后更新的顺序被读取。

很明显，这两个字典是相同的。

编辑：`dict1 == dict2`足以证明两个字典是否相同；您不必逐段检查每个键/值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:34:19.920

请注意，您应该使用模数`%`运算符而不是`- 26`.

代替

```
 if sUpperCase.index(c) + shift > 25:

        dCode[c] = sUpperCase[(sUpperCase.index(c) + shift) - 26]

    else:

        dCode[c] = sUpperCase[(sUpperCase.index(c) + shift)] 
```

和

```
 dCode[c] = sUpperCase[(sUpperCase.index(c) + shift) % 26] 
```

# php - Opencart：如何按产品型号过滤订单列表？

> ID：13216751
> 
> 赞同：1
> 
> 时间：2012-11-04T07:03:46.890
> 
> 标签：php, e-commerce, shopping-cart, opencart

我正在尝试按产品`model`过滤器搜索订单列表。已经有一些过滤器，客户名称、订单 ID、订单状态等......我`model`也需要这样的产品。任何的想法。？

![在此处输入图像描述](../Images/cad37f15a74adfba9b6cf9250abbaa78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:22:09.710

最后我找到了解决这个问题的方法，试试这个免费模块：

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3597&filter_search=order%20list%20filter%20model&page=4](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3597&filter_search=order%20list%20filter%20model&page=4)

# c++ - C ++对指向对象的指针数组进行排序

> ID：13216752
> 
> 赞同：-1
> 
> 时间：2012-11-04T07:04:04.897
> 
> 标签：c++, class, sorting, shapes

> **可能重复：**
> [C++ 如何对数组变量进行排序](https://stackoverflow.com/questions/13207744/c-how-to-sort-an-array-variable)

我接到了家长班的电话

```
Shape 
```

形状得到了 2 个孩子的电话

```
Square and Rectangle 
```

Shape类有一个变量调用区，它是int类型

所以我像这样创建了一些正方形，矩形的对象

```
int main()
{
    Shape *shaped[100];

    //then i did some adding of object..
    int areaValue;
    areaValue=1;

    shaped[0] = new Rectangle();
    shaped[0]->setArea(areaValue);

    areaValue=7;
    shaped[1] = new Square();
    shaped[1]->setArea(areaValue);

    areaValue=5;
    shaped[2] = new Square();
    shaped[2]->setArea(areaValue);

    shapeCounter = 3;

     sort(shaped, shaped + 3, sort_by_area());

    for (int i=0;i<shapeCounter;i++)
    {
        cout << shaped[i].getArea() << endl;
    }

} 
```

然后在例如 Square.cpp

我做了这个

```
struct sort_by_area
{
    static bool operator()(Shape* x, Shape* y)
    {
        return x->getArea() < y->getArea();
    }
}; 
```

上面的代码有效。并且可以按区域排序，但我的问题是，如果我不使用 struct 我仍然可以排序，因为如果我不使用 struct，它会说 sort_by_area 没有在范围内声明。

我必须真的使用 struct 以便我的 main.cpp 可以访问位于子类 .cpp 的排序代码

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T07:37:13.707

这完美地工作：

```
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

class Shape{

private:
    int x;
public:
    void setArea(int x){
        this->x =  x;
    }
    int getArea(){
        return this->x;
    }
};

class Rectangle: public Shape{
public:
};

class Square: public Shape{
public:
};

bool sort_by_area (Shape* x,Shape* y) { return (x->getArea() < y->getArea()); }
int main()
{
    Shape *shaped[100];

    //then i did some adding of object..
    int areaValue,shapeCounter = 0;
    areaValue=1;

    shaped[0] = new Rectangle();
    shaped[0]->setArea(areaValue);

    areaValue=7;
    shaped[1] = new Square();
    shaped[1]->setArea(areaValue);

    areaValue=5;
    shaped[2] = new Square();
    shaped[2]->setArea(areaValue);

    shapeCounter = 3;

    sort(shaped, shaped + 3, sort_by_area);

    for (int i=0;i<shapeCounter;i++)
    {
        cout << shaped[i]->getArea() << endl;
    }
    return 0;
} 
```

# php - 在 PHP 中，成员变量周围的大括号是什么意思？

> ID：13216755
> 
> 赞同：0
> 
> 时间：2012-11-04T07:04:24.753
> 
> 标签：php

我想知道下面的 { } 是什么。{ } 在这里做什么？$this->{$key} = $value;

提前致谢。

在一个文件中

```
$config['field']['calendar'] = array('type'=>'boolean');
$config['field']['category'] = array('type'=>'boolean');
$config['field']['customers'] = array('type'=>'boolean');  
...
$this->preference_form->initalize($config); 
```

在 Preference_form.php

```
function initalize($config = array())
{
    foreach($config as $key => $value)
    {
        $this->{$key} = $value;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:09:45.127

在这种情况下，它们是可选的，但这是一种让读者（和解析器）更清楚您指的是变量的方式。

[http://www.php.net/manual/en/language.variables.variable.php](http://www.php.net/manual/en/language.variables.variable.php)

> 为了在数组中使用可变变量，您必须解决歧义问题。也就是说，如果您编写 $$a[1] 则解析器需要知道您是否打算使用 $a[1] 作为变量，或者您是否希望 $$a 作为变量，然后是 [1] 索引那个变量。解决这种歧义的语法是：${$a[1]} 用于第一种情况，${$a}[1] 用于第二种情况。

这种语法有用的另一种情况是在字符串中扩展函数调用时。

这不起作用（或者它会评估`$someObj`为字符串，然后附加`->someFunc()`：

```
$myString = "$someObj->someFunc()"; 
```

但这符合您的预期：

```
$myString = "{$someObj->someFunc()}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:08:56.623

它正在转义变量表达式，以便可以动态设置成员。

看看这里的文档：http: [//php.net/manual/en/language.types.string.php#language.types.string.parsing.complex](http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

# javascript - 使用 xslt 将节点值作为参数传递给 javascript 函数

> ID：13216758
> 
> 赞同：0
> 
> 时间：2012-11-04T07:05:06.783
> 
> 标签：javascript, xml, xslt

我是新手，所以我不知道这种方法是否是传递参数的正确方法。请帮我纠正这个问题或提出另一种方法来做到这一点。我想将节点值从 xslt 传递给 javascript 函数。

这是我的 XML 文件：

```
 <?xml version="1.0"?>
   <?xml-stylesheet type="text/xsl" href="sample.xsl"?>
   <One>
       <Two>
           HelloWorld
       </Two>
   </One> 
```

这是 xslt 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:xlink="http://www.w3.org/1999/xlink">
<xsl:variable name="url" select="One/Two"/>
<xsl:template match="/">
<html>
    <script>
        function Myclick(vara)
        {
            alert(vara);            
        }
    </script>
    <xsl:for-each select="One">
        <a>
            <xsl:attribute name="href">
                http://www.google.com
            </xsl:attribute>
            <xsl:attribute name="onClick">                      
                alert($url);
                Myclick($url);
            </xsl:attribute>            
            <xsl:value-of select="Two"/>
        </a>
    </xsl:for-each>
</html>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:35:45.013

您的 XSLT 代码没有调用任何 Javascript 函数；它只是生成 HTML。

您知道要生成什么 HTML 吗？如果是这样，请告诉我们，我们可以帮助您生成它。如果不是，您不应该尝试编写 XSLT 代码 - 永远不要开始编写程序（用任何语言），直到您知道您希望它产生什么输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:20:25.313

试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:xlink="http://www.w3.org/1999/xlink">
    <xsl:variable name="url" select="One/Two"/>
    <xsl:template match="/">
        <html>
            <head>
                <script>
                    function Myclick(a)
                    {
                        var href = a.getAttribute('href');
                        alert(href);
                        location.href= href;
                    }
                </script>
            </head>
            <body>
                <xsl:for-each select="One">
                    <a>
                        <xsl:attribute name="href">
                            http://www.google.com
                        </xsl:attribute>
                        <xsl:attribute name="onClick">
                            javascript:Myclick(this); return false;
                        </xsl:attribute>
                        <xsl:value-of select="Two"/>
                    </a>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

# css - CSS 菜单不适用于 XML 旋转横幅

> ID：13216759
> 
> 赞同：2
> 
> 时间：2012-11-04T07:05:09.633
> 
> 标签：css, menu, slider

我在一个带有 XML Flash 旋转横幅的网站上测试了 Nvidea css 下拉菜单，它可以在 opera 上找到，但在 Internet Explorer 和 google chrome 上无效，它实际上落后了。

菜单来自：[http ://www.lwis.net/free-css-drop-down-menu/](http://www.lwis.net/free-css-drop-down-menu/)

请参阅此处的链接：http: [//sonymax.co.uk](http://sonymax.co.uk)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:13:51.257

好像菜单确实有问题，我在 IE 中删除了横幅，下拉菜单仍然不显示。另请注意，如果您将兼容模式从 IE7 更改为 IE8 或 9，菜单和横幅就会消失。您应该稍微修改一下您的代码。

它在我的 Chrome 中有效，不知道为什么它在你的 Chrome 中无效，就我测试而言，只有 IE 存在问题。

# sqlalchemy - 如何使用 ColanderAlchemy 编辑现有记录？

> ID：13216761
> 
> 赞同：3
> 
> 时间：2012-11-04T07:05:26.043
> 
> 标签：sqlalchemy, colander, colanderalchemy

我有一个这样的 SQLAlchemy 模型：

```
class Group(Base):
    __tablename__ = 'groups'

    id = Column(Integer, primary_key = True, ca_include = True)
    name = Column(String, ca_include = True)

class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key = True, ca_include = True)
    name = Column(String, ca_include = True)
    group_id = Column(Integer, ForeignKey('groups.id'), nullable = True, ca_include = True)
    group = relationship('Group', ca_include = True) 
```

我使用的表单库是deform。我安装了[ColanderAlchemy](http://colanderalchemy.readthedocs.org/)以自动将模型定义转换为 Colander Schema：

```
form = deform.Form(SQLAlchemyMapping(Group), use_ajax = True) 
```

我可以做 form.render() 来得到一个空的表格。但是如何用记录填写这个空表格呢？我试过：

```
group = Group.get(1)
form.render(group) 
```

但是失败了。我也关注了这个[博客](http://cd34.com/blog/framework/using-pyramid-with-deform-to-editcreate-records-in-sqlalchemy-backed-database/)，但它只能将单个记录转换为滤锅的格式，但不会转换任何关系。那么...无论如何我可以将 SQLAlchemy 记录转换为滤锅记录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:04:57.353

您需要利用`dictify`与给定 SQLAlchemyMapping 模式对象关联的方法将给定模型实例转换为可用于呈现 Deform 表单的 appstruct。

因此，使用您的示例模型，您可能会这样做：

```
schema = SQLAlchemyMapping(Group)
form = deform.Form(schema, use_ajax=True)
my_group = Group(id=1, name='Foobar') #or query for an instance etc
appstruct = schema.dictify(my_group)
form.render(appstruct) 
```

由于 ColanderAlchemy 在这个阶段非常先进，您的里程可能会在较新的版本中有所不同（上面是为 0.1 版编写的），特别是因为它正在被大量重写以消除对 0.2 版中自定义列和关系类型的需求。我注意到当前的 ColanderAlchemy 0.1b6 版本存在问题——尤其是在关系映射方面。

有关最新版本的详细信息，请参阅[http://colanderalchemy.rtfd.org/上的文档。](http://colanderalchemy.rtfd.org/)

# mysql - 按 MAX(time) WHERE time <= x 选择最近的 MySQL 行

> ID：13216762
> 
> 赞同：3
> 
> 时间：2012-11-04T07:05:33.890
> 
> 标签：mysql, distinct, max

我正在选择 MySQL 表的最新条目：

```
SELECT MAX(time) as most_recent, userID
FROM TableName
GROUP BY userID
ORDER BY most_recent DESC 
```

我的问题是，如果我想限制最长时间：

```
WHERE time <= nnn 
```

查询不再起作用。有没有子查询的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:08:16.810

你可以用子查询来做到这一点：

```
select t.userID, max(t.time)
from
   (
     select userID, time
     from tableName
     where time <= nnn
   ) t
group by t.userID 
```

或者简单地说：

```
 select userID, max(time)
     from tableName
     where time <= nnn
     group by userID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:07:55.750

像这样使用`HAVING`子句：

```
SELECT MAX(time) as most_recent, userID
FROM TableName
GROUP BY userID
HAVING MAX(time) <= nnn
ORDER BY most_recent DESC 
```

# visual-studio-2010 - Visual Studio 2012 的 Visual Studio 2010 主题？

> ID：13216763
> 
> 赞同：15
> 
> 时间：2012-11-04T07:06:09.933
> 
> 标签：visual-studio-2010, themes, visual-studio-2012

有没有办法改变 VS2012 的主题看起来像 VS2010？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T07:08:38.387

如果您安装主题编辑器，您将获得巨大的改进。蓝色主题就像 VS 2010。

[http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)

除了 Andy 提到的[主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)之外，Codeplex 中还有一个项目可以让你将 VS 2010 的图标导入 VS 2012

[http://vsip.codeplex.com/](http://vsip.codeplex.com/)

# r - 如何在网格中放置图表

> ID：13216768
> 
> 赞同：0
> 
> 时间：2012-11-04T07:06:47.527
> 
> 标签：r

有没有办法将 .png 放入网格中。我想使用网格显示 4 个 .png 单个图表。

![在此处输入图像描述](../Images/19a834193852f88174950b672432beee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T18:27:41.660

正如其他人所说，这可能不是一个好主意，但是

```
library(gridExtra)
library(png)

img <- rasterGrob(readPNG(system.file("img", "Rlogo.png", package="png")),
width=unit(1,"npc"), height=unit(1,"npc"))

grid.arrange(img, img, img, img, ncol=2) 
```

将在设备上显示 2x2 png 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T09:43:43.057

在基本图形中至少有三种方法可以做到这一点。

1.  使用`layout()`（这是我最喜欢的）：

    ```
    layout(matrix(1:4, ncol = 2))
    for(i in 1:4)
        plot(1:10)
    layout() # reset 
    ```

    随着`layout()`您传入一个包含整数的矩阵，该整数索引设备已拆分的子图。这些索引在矩阵中的排列方式控制着布局。2x2 布局由此矩阵给出

    ```
    R> matrix(1:4, ncol = 2)
         [,1] [,2]
    [1,]    1    3
    [2,]    2    4 
    ```

    请注意，按列填充。要按行填充，请`byrow = TRUE`在`matrix()`调用中使用

    ```
    R> matrix(1:4, ncol = 2, byrow = TRUE)
         [,1] [,2]
    [1,]    1    2
    [2,]    3    4 
    ```

    一种更复杂的布局，可以通过在矩阵中创建您希望设备看起来的索引来实现 2x2 布局。例如，对于具有 3 行的设备，第一行包含设备右侧的 1 个绘图区域，第二行具有覆盖整行的单个绘图区域，第三行包含 2 个绘图区域，我们会这样做

    ```
    matrix(c(0,1,
             2,2,
             3,4), ncol = 2, byrow = TRUE) 
    ```

    用情节填充它会给出

    ```
    layout(matrix(c(0,1,
                    2,2,
                    3,4), ncol = 2, byrow = TRUE))
    for(i in 1:4)
        plot(1:10)
    layout(1) # reset 
    ```

    ![在此处输入图像描述](../Images/5e4f547fbebb7ce7ca0c1ad597281314.png)

    类似的布局可以用`split.screen()`. 见下文 3。

2.  使用`mfrow`or`mfcol`参数。前者按行填充设备，后者按列填充设备

    ```
    op <- par(mfrow = c(2,2))
    for(i in 1:4)
        plot(1:10)
    par(op)  # reset 
    ```

3.  第三种方法是使用`split.screen()`

    ```
    split.screen(c(2,2))
    for(i in 1:4) {
        screen(i)
        plot(1:10)
    }
    close.screen(all = TRUE) # reset 
    ```

    `split.screen()`也可以采用矩阵输入，例如`layout()`.

根据您将设备分成多少个绘图区域，您可能需要或想要缩小绘图的边距。为此，请参阅`?par`可以定义边距的各种方式（例如参数`mar`）。

要将这些作为 PNG 文件获取，请将所有命令包装在

```
png(file = "foo.png", .....) ## the ..... is where you place options, see ?png

## plotting commands here

dev.off() 
```

例如

```
png("layout.png", height = 600, width = 600, pointsize = 14)
layout(matrix(c(0,1,
                2,2,
                3,4), ncol = 2, byrow = TRUE))
for(i in 1:4)
    plot(1:10)
layout(1) # reset
dev.off() 
```

[这就是我用来创建上面显示的绘图的东西。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T11:45:34.280

如果您熟悉 ggplot，`facet_grid()`可能就是您正在寻找的：

```
df <- data.frame( x = rnorm(40), y = rnorm(40) )
df <- cbind( df, expand.grid( c('A', 'B'), c('C', 'D' ) )  )
head( df )

            x          y Var1 Var2
1 -1.27990165  1.1697183    A    C
2 -0.65083905  0.4743215    B    C
3  0.23181562  0.5092162    A    D
4 -0.01370950 -0.1704988    B    D
5 -1.20182791 -0.3525845    A    C
6  0.04877524  0.8801793    B    C

library( "ggplot2" )
g <- ggplot( df ) +
  geom_point( aes(x = x, y = y) ) +
  facet_grid( Var1 ~ Var2 )
ggsave( "plot.png", g ) 
```

![在此处输入图像描述](../Images/4f3fd3cebebed655bde442d08f1ea4be.png)

# oop - Map 和 SortedMap - 冗余方法声明

> ID：13216769
> 
> 赞同：1
> 
> 时间：2012-11-04T07:06:48.433
> 
> 标签：oop, collections, map, java

在检查`Map`和`SortedMap`接口时，我注意到许多已经在`Map`接口中定义的方法也在`SortedMap`.

`SortedMap`扩展`Map`，为什么要重新声明一些方法，例如：

```
Set<K> keySet();
Collection<V> values(); 
```

为什么会有这种冗余？

（我使用JDK 7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:39:59.293

我会说方法是在接口中声明的，方法是在类中定义的。

Map 不保证是有序的，但 Sorted Maps 是。这意味着每种方法所保证的内容是不同的，并且需要不同的文档。

[Map.keySet()](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29)的Javadoc**突出了差异**

> 返回此映射中包含的键的 Set 视图。集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。如果在对集合进行迭代时修改了映射（通过迭代器自己的删除操作除外），则迭代的结果是不确定的。该集合支持元素移除，即通过 Iterator.remove、Set.remove、removeAll、retainAll 和 clear 操作从映射中移除相应的映射。它不支持 add 或 addAll 操作。
> 
> 返回：此映射中包含的键的集合视图

[SortedMap.keySet()](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html#keySet%28%29)的 Javadoc是

> 返回此映射中包含的键的 Set 视图。**集合的迭代器按升序返回键。**集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。如果在对集合进行迭代时修改了映射（通过迭代器自己的删除操作除外），则迭代的结果是不确定的。该集合支持元素移除，即通过 Iterator.remove、Set.remove、removeAll、retainAll 和 clear 操作从映射中移除相应的映射。它不支持 add 或 addAll 操作。
> 
> 指定者：接口Map中的keySet
> 
> 返回：此映射中包含的键的集合视图，**按升序排序**

# asp.net - 当用户单击 GridView 中的行时如何调用特定方法

> ID：13216772
> 
> 赞同：1
> 
> 时间：2012-11-04T07:07:13.940
> 
> 标签：asp.net

我将下面的行添加到每一行，当我单击 GridView 中的行时，我可以选择它（意味着事件`GridView_SelectedIndexChanged`租用）当我单击行特定方法调用时如何更改它

```
e.Row.Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:16:25.480

使用**[GridView.RowCommand 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx#Y972)：**在 GridView 控件中单击按钮时引发 RowCommand 事件。这使您能够提供一种事件处理方法，该方法在此事件发生时执行自定义例程。

```
void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    // If multiple buttons are used in a GridView control, use the
    // CommandName property to determine which button was clicked.
    if(e.CommandName=="YourCommandName")
    {
      // Convert the row index stored in the CommandArgument
      // property to an Integer.
      int index = Convert.ToInt32(e.CommandArgument);

      // Retrieve the row that contains the button clicked 
      // by the user from the Rows collection.
      GridViewRow row = GridView1.Rows[index];

      //Your Code

    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:29:30.077

```
in view:

 <script type="text/javascript" language="javascript">
     function show(id) {
         alert(id);
         // Do something as your need
     }
    </script>

<asp:GridView runat="server" ID="GridView1" DataKeyNames="DepartmentID" AutoGenerateColumns="False"
        Font-Names="Tahoma" Font-Size="Small" 
        OnRowDataBound="GridView1_RowDataBound" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:BoundField DataField="DepartmentID" HeaderText="DepartmentID" 
                InsertVisible="False" ReadOnly="True" SortExpression="DepartmentID" />
            <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
            <asp:BoundField DataField="Budget" HeaderText="Budget" 
                SortExpression="Budget" />
            <asp:BoundField DataField="StartDate" HeaderText="StartDate" 
                SortExpression="StartDate" />
            <asp:BoundField DataField="Administrator" HeaderText="Administrator" 
                SortExpression="Administrator" />
        </Columns>
    </asp:GridView>

inCodeBehind:
    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {

             if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes.Add("onmouseover", "this.style.cursor='pointer'");

            e.Row.Attributes["onclick"] = "show(" + e.Row.RowIndex.ToString() + ");";
        } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T10:03:31.393

```
<asp:GridView runat="server" ID="GridView1" DataKeyNames="ID" AutoGenerateColumns="False"
        Font-Names="Tahoma" Font-Size="Small" OnSelectedIndexChanged="GridView1_SelectedIndexChanged"
        OnRowDataBound="GridView1_RowDataBound">
        <Columns>
            <asp:TemplateField HeaderText="Row">
                <ItemTemplate>
                    <%# Container.DataItemIndex+1 %>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="FirstName" HeaderText="First Name" />
            <asp:BoundField DataField="LastName" HeaderText="Last Name" />
            <asp:CommandField ShowSelectButton="true" ButtonType="Link" Visible="false" SelectText="Enroll" />
        </Columns>
    </asp:GridView>

 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            //add css to GridViewrow based on rowState
            e.Row.CssClass = e.Row.RowState.ToString();
            //Add onclick attribute to select row.
            e.Row.Attributes.Add("onclick", String.Format("javascript:__doPostBack('GridView1','Select${0}')", e.Row.RowIndex));
        }
    } 
```

# java - JFrame 生命周期

> ID：13216781
> 
> 赞同：1
> 
> 时间：2012-11-04T07:08:57.373
> 
> 标签：java, swing, jframe, lifecycle

类似于 applet 中的 start 方法，它在 applet 窗口最小化和最大化时被调用，当我们在 JFrame 和其他一些窗口（例如记事本）之间来回切换控制时，是否有一些类似的方法被调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:15:53.923

我相信您正在寻找[WindowListener#windowActivated](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowActivated%28java.awt.event.WindowEvent%29)和[WindowListener#windowdeactivated](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowDeactivated%28java.awt.event.WindowEvent%29)

您需要通过 JFrame#addWindowListener 将侦听器附加到框架

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T07:22:03.997

在 Java Swing 中，每一种`Window`，包括`JFrame`它本身扩展`Window`类，都可以监听焦点事件，因此可以在获得或失去焦点时得到通知。只需调用`addWindowFocusListener`你的`JFrame`对象，传递一个`WindowFocusListener`将接收和处理`FocusEvent`s 的对象。您可以参考[JFrame 文档](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#addWindowFocusListener%28java.awt.event.WindowFocusListener%29)以获得更详细的说明。

# python - 数据存储过滤器查询上的 GAE Python TypeError

> ID：13216783
> 
> 赞同：0
> 
> 时间：2012-11-04T07:09:10.960
> 
> 标签：python, google-app-engine, google-cloud-datastore

我将这样一个实体保留在一个 RequestHandler 中，并且可以通过 SDK 控制台进行验证：

```
class Moment(db.Model):
    user = db.IntegerProperty()
    index = db.IntegerProperty() 
```

**编辑：**我以前只包括部分类定义，并没有显示我是如何编写模型的。以下是完整示例：

```
class Moment(db.Model):
    user = db.IntegerProperty()
    index = db.IntegerProperty()
    date = db.DateTimeProperty()
    qx = db.FloatProperty()
    qy = db.FloatProperty()
    qz = db.FloatProperty()
    qw = db.FloatProperty()
    latitude = db.FloatProperty()
    longitude = db.FloatProperty()
    image = db.BlobProperty()
    def __init__(self, obj):
        super(Moment,self).__init__()
        self.user = obj['user']
        self.index = obj['index']
        self.date = obj['date']
        self.qx = obj['qx']
        self.qy = obj['qy']
        self.qz = obj['qz']
        self.qw = obj['qw']
        self.latitude = obj['latitude']
        self.longitude = obj['longitude']
        self.image = obj['image']

class UploadHandler(webapp2.RequestHandler):
    def post(self):
        obj = biplist.readPlistFromString(self.request.body)
        Moment(obj).put() 
```

当我尝试过滤得到...

```
class ServeHandler(webapp2.RequestHandler):
    def get(self):
        params = {}
        params['user'] = int(self.request.get('user'))
        params['index'] = int(self.request.get('index'))
        q = Moment.all()
        q.filter("user =", params['user'])
        q.filter("index =", params['index'])
        print q.get() 
```

我得到以下信息：

```
ERROR    2012-11-04 06:56:04,846 webapp2.py:1553] __init__() got an unexpected keyword argument 'index'
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "<path>/main.py", line 51, in get
    print q.get()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 2102, in get
    return results.next()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 2314, in next
    return self.__model_class.from_entity(self.__iterator.next())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 1442, in from_entity
    return cls(None, _from_entity=entity, **entity_values)
TypeError: __init__() got an unexpected keyword argument 'index'
INFO     2012-11-04 06:56:04,849 dev_appserver.py:3092] "GET /serve?user=0&index=0 HTTP/1.1" 500 - 
```

但是，如果我这样做`print q.count()`而不是`print q.get()`得到 1。似乎我根据文档正确地做事，我尝试了我发现的类似问题的建议，但无济于事。

SDK v1.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:57:10.257

受到对我的问题留下的评论的启发，以及一些认为我做错了什么的想法，并添加了一些其他类似的问题/答案，我重新评估了我处理 Model 类的方式。事实证明，至少我重写类构造函数的方式是，我相信我破坏了超类处理初始化的方式。以下对我来说现在可以了：

```
class Moment(db.Model):
    user = db.IntegerProperty()
    index = db.IntegerProperty()
    date = db.DateTimeProperty()
    qx = db.FloatProperty()
    qy = db.FloatProperty()
    qz = db.FloatProperty()
    qw = db.FloatProperty()
    latitude = db.FloatProperty()
    longitude = db.FloatProperty()
    image = db.BlobProperty()

class UploadHandler(webapp2.RequestHandler):
    def post(self):
        obj = biplist.readPlistFromString(self.request.body)
        Moment(user = obj['user'],
               index = obj['index'],
               date = obj['date'],
               qx = obj['qx'],
               qy = obj['qy'],
               qz = obj['qz'],
               qw = obj['qw'],
               latitude = obj['latitude'],
               longitude = obj['longitude'],
               image = obj['image']).put() 
```

# javascript - 如何使用 Web RTC - Javascript 发送 UDP 数据包？

> ID：13216785
> 
> 赞同：16
> 
> 时间：2012-11-04T07:09:31.990
> 
> 标签：javascript, udp, webrtc

如何使用 Web RTC 发送 UDP 数据包？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T17:16:05.340

您不能直接使用 WebRTC 发送 UDP 数据包。这将违反浏览器所需的基本安全约束。

您可以将[SRTP](http://en.wikipedia.org/wiki/Secure_Real-time_Transport_Protocol)发送到[启用 ICE 的](http://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)主机。这可能不是你要找的。

如果浏览器允许发送任意 UDP 数据包，那么恶意应用程序就可以向任何主机发送数据包。

这听起来可能不是那么糟糕，毕竟 Internet 上的主机需要能够处理这个问题，对吗？问题是某些浏览器处于受保护的环境中，对网络的访问受到限制。在这些网络中，一些主机受到的保护远不如公共 Internet 上的主机受到的保护。这没关系，因为对网络的访问受到控制。

如果浏览器可以发送任意数据包，则可以说服该环境中浏览器上的用户将特制数据包发送到这些保护不佳的主机之一。这可能会导致网络运营商禁止浏览器，这是浏览器制造商非常希望避免的事情。

WebRTC 仅在特定条件下发送某些类型的 UDP 数据包。如果您有兴趣与之交谈的主机了解[ICE](http://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)并且能够通过[SRTP](http://en.wikipedia.org/wiki/Secure_Real-time_Transport_Protocol)或[SCTP over DTLS使用](https://datatracker.ietf.org/doc/html/draft-tuexen-tsvwg-sctp-dtls-encaps)[RTP](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol)（我不太可能这么认为）。那么也许你可以强制浏览器发送一些东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T08:51:31.490

您应该检查 sipml5，[http://code.google.com/p/sipml5/](http://code.google.com/p/sipml5/) 获取代码并查看文件夹：sipml5/src/tinySIP/src/transports

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-19T18:53:21.663

> @Martin Thomson 很好地解释了这个问题。通过从他的帖子中获取动力，这篇文章可能会为一些极客和新手提供指导。

据说 WebRtc 是两个或多个对等点之间`Real-time`的`Bi-directional`通信。`Secure`我将更多地关注这个词：**安全**。

* * *

企业网络的安全策略通常需要过滤传入的*未经请求的流量*，*阻止某些协议*，以及对、和进行*应用程序级过滤*和*扫描*。`spam``malware``intellectual property`

**现在想到两个新问题；**

> 1.  为什么 TCP 遍历没有问题？
> 2.  为什么 UDP 遍历有问题？

* * *

**为什么 TCP 遍历没有问题？**

TCP清楚地表明了两件事；

*   流程的开始，`(SYN)`并且，
*   一个流程的结束`(FIN or RST)`。

这由防火墙`open`和`close` **针孔**使用。特殊情况下，长时间没有收到流量的 TCP 连接也会关闭其针孔（以适应网络拓扑更改或两个 TCP 对等方的故障）。防火墙还执行协议验证以清理问题

*   窗口外 TCP 段和，
*   重叠的 TCP 段

> 这允许防火墙保护网络并保护主机免受多种攻击媒介（重放攻击、主机 IP 地址探测、DDOS 攻击等）。

* * *

**为什么 UDP 遍历有问题？**

对于 UDP 流，防火墙将使用 5 元组上的第一个传出数据包作为`start-of-session`指示符。但是UDP没有`end-of-session`指标，所以防火墙只`two ways`需要关闭一个针孔：

*   `interior host`在不发送流量几秒钟后超时针孔或
*   内部宿主产生致命的`ICMP error`。

因为没有可靠的方法来确定会话是否正在停止，所以防火墙的工作要困难得多。它可以实现一个应用程序级网关`(ALG)`，并了解高级代码在 UDP 之上施加的任何语义。

它还可以依赖一组著名的应用程序服务器在会话开始和结束时通知它，但这会遇到许多挑战，因为应用程序服务器独立于使用它们的网络托管。

> 使用`ALG`，防火墙可以确定呼叫何时终止并关闭为媒体会话创建的任何动态映射。但问题是在浏览器中运行的 WebRTC 应用程序与可能使用 TLS 的 Web 服务器之间的会话信令，在这种情况下，ALG 不再有权访问该信令。

* * *

**结论：**

因此，在应用级网关，Webrtc 使用`SDP`和的组合`ICE`。WebRtc 基本上`UDP`以这样的方式包装

1.  对于音频、视频通道，WebRtc 使用`RTP`、`RTCP`、`SRTP`over的组合`DTLS`。
2.  对于数据通道，webrtc 使用[RFC 2960](https://tools.ietf.org/html/rfc2960)`(SCTP)`中定义的流控制传输协议。

> SCTP 是一种传输层协议，旨在替代`TCP`或`UDP`。对于 WebRtc，我们将其用作运行在 DTLS 连接上的应用层协议。

这些协议还附带一些新协议，例如`STUN`, `TURN`. WebRtc的基本实现请关注；

*   [Mauz Khan 的 WebRtc 实验](https://github.com/muaz-khan/WebRTC-Experiment)
*   [穆罕默德·乌斯曼·巴希尔的 WebRtc 实验](https://github.com/mail2chromium/Android_Realtime_Communication_Using_WebRTC)

我希望这个解释可以帮助一些极客。谢谢

# phpdoc - MySQL 资源的 PHPDoc 返回类型

> ID：13216789
> 
> 赞同：3
> 
> 时间：2012-11-04T07:10:02.363
> 
> 标签：phpdoc

PHPDoc中MySQL资源的方便名称返回类型是什么？

例如我有这个代码

```
/**
 * Get table data
 * @param type $table
 * @param type $select
 * @param type $condition
 * @return mysql_resource
 */
function getResource($table, $field, $condition) {
    $resource = mysql_query("SELECT $field FROM $table WHERE $condition ");
    return $resource;
} 
```

如您所见，`@return`我写`mysql_resource`的，
是否有任何方便的名称来返回 mysql 资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:01:49.153

这通常由“@return resource”处理......我相信只有“resource”与 var_dump() 显示为对象的数据类型的方式相匹配。

# php - PHP Mysql 安全密码存储

> ID：13216791
> 
> 赞同：1
> 
> 时间：2012-11-04T07:10:22.633
> 
> 标签：php, hash

> **可能重复：**
> [如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

将密码存储到 Mysql 数据库的安全方式或哈希函数是什么？现在我正在使用这个 sha1() 函数通过以下代码将我的密码存储到数据库中。真的安全吗？

```
<?php
$pass = 123456789;
$pass = sha1($pass);
echo $pass;
?> 
```

感谢您的意见。

**更新**

我看到盐是这样的。

```
$salt = "this is a salt";
$password = 'this is an password';
$hash = sha1($salt.$password); 
```

那么，我可以使用任何数字/随机数/东西来 $salt 值吗？之后现在**安全吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:20:10.707

SHA* 变体不应用于密码散列。使用 Blowfish 算法和[crypt()](http://php.net/crypt)函数。

[phpass](http://www.openwall.com/phpass/)是一个 PHP 密码哈希库，可以为您简化此操作。

您还可以对该主题进行更多研究并编写一些代码来生成您自己的与 Bcrypt/Blowfish 兼容的 Salts，并直接使用[crypt()](http://php.net/crypt)，而不是使用[phpass](http://www.openwall.com/phpass/)库。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-04T07:23:05.290

在 PHP 中散列密码的最佳（也是推荐）方法是使用[`crypt()`](http://php.net/manual/en/function.crypt.php).

这是 PHP 文档中的一个简单示例：

```
$hashed_password = crypt('mypassword');

// now store $hashed_password in the database 
```

稍后，检查输入的密码（假设`$user_input`是输入的密码）：

```
// retrieve $hashed_password from the database, then:

if (crypt($user_input, $hashed_password) == $hashed_password) {
   echo "Password verified!";
} 
```

**请注意，在此示例（上图）中，盐是在首次对密码进行哈希处理时自动生成的。这是危险的，应该避免。**应该提供一个伪随机盐，并且可以像这样生成：

```
$salt = substr(str_replace('+', '.', base64_encode(pack('N4', mt_rand(), mt_rand(), mt_rand(), mt_rand()))), 0, 22); 
```

如需更好的解释，请参阅[citricsquid 链接的 Stack Overflow 问题](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-04T07:22:04.773

您不能对 salt 使用随机值，因为您将无法比较输入的密码和之后存储在数据库中的密码。

你的加密主要是好的，但如果你愿意，你可以发疯......

```
<?php
 $salt = "fF#$GGG$T@#4309g9jERGWrgrew@GH";
 $pepper = "vV@@#V90Ù39009gfjigwjorn)(";
 $pass = "123456789";
 $pass = $salt.$pass.$pepper;
 for ($i=0;$i<40;$i++){
    $pass = hash("sha256", $pass)
 }

 echo $pass; 
```

?>

# google-app-engine - 在谷歌应用引擎中使用 HTTPRequest setPayload

> ID：13216792
> 
> 赞同：0
> 
> 时间：2012-11-04T07:10:27.543
> 
> 标签：google-app-engine, http-post, httprequest, urlfetch

我正在尝试通过 Google App Engine 进行 HTTPRequest Post。这是我到目前为止所拥有的

```
URL url = new URL("http://myurl.com/myfile.php");
HTTPRequest request = new HTTPRequest(url, HTTPMethod.POST);
request.setPayload(########);
HTTPResponse response = URLFetchServiceFactory.getURLFetchService().fetch(request); 
```

在这里我需要放置一些配对值（即“email”、“hi@example.com”等） 因为 setPayload 接受 byte[] 我不知道如何将配对值转换为字节。

我已经搜索了其他帖子，但我非常卡住。

编辑：我已更改为此，但仍然无法正常工作

```
byte[] data = ("EMAIL=bo0@gmail.com&amp;TITLE=evolution&amp;COMMENT=comments&amp;PRICE=5000;").getBytes();
try {
URL url = new URL("http://www.bo.x10.mx/nPost.php");
HTTPRequest request = new HTTPRequest(url, HTTPMethod.POST);
request.setPayload(data);
HTTPResponse response = URLFetchServiceFactory.getURLFetchService().fetch(request); 
```

这就是我在 php 网站上的内容。

```
<?php
include "path/conf.php"; //logging into database works
$tb_name = 'Post';
$EMAIL=$_POST['EMAIL'];
$TITLE =$_POST['TITLE'];
$COMMENT =$_POST['COMMENT'];
$PRICE =$_POST['PRICE'];
if(!isset($EMAIL) || !isset($TITLE ) || !isset($PRICE )|| !isset($COMMENT)){
header('HTTP/1.0 412 Precondition Failed', true, 412);
die('Bad data');
}
$sql="INSERT INTO $tb_name(EMAIL, TITLE, COMMENT, PRICE) VALUES ('$EMAIL', '$TITLE ', '$COMMENT ', '$PRICE ')";
$result=mysql_query($sql);
if($result==TRUE){
echo "successfully inserted into table!";}
else{
echo "error in inserting into table!";
header('HTTP/1.0 500 Internal Server Error', true, 500);}
ob_end_flush();
exit();
?> 
```

EDIT2：这是一个工作代码

```
try{
byte[] data = ("EMAIL=bo0@gmail.com&TITLE=evolution&COMMENT=comments&PRICE=5000").getBytes("UTF-8");
URL url = new URL("http://www.box.com/nost.php");
HTTPRequest request = new HTTPRequest(url, HTTPMethod.POST);
request.setPayload(data);
HTTPResponse response = URLFetchServiceFactory.getURLFetchService().fetch(request);
} 
```

我的数据库字符串字段是 UTF-8 类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T08:45:26.560

您使用请求正文创建一个`String`，然后获得字节数组。例如我们有：

```
URL url = new URL("http://myurl.com/myfile.php");
HTTPRequest request = new HTTPRequest(url, HTTPMethod.POST);
String body = "email=" + email + "&mpla=" + mpla;
request.setPayload(body.getBytes("UTF-8"));
HTTPResponse response = URLFetchServiceFactory.getURLFetchService().fetch(request); 
```

希望这可以帮助！

# configuration - 如何在两个或多个 TRAC 环境之间共享配置

> ID：13216793
> 
> 赞同：-1
> 
> 时间：2012-11-04T07:10:34.020
> 
> 标签：configuration, share, trac, projects, issue-tracking

希望这是我的问题的好地方，因为它与软件相关，但与代码无关。

我们公司正在使用 TRAC 进行问题跟踪和代码链接管理，我对它非常满意，并且喜欢它的工作方式。

我有大约几个环境（每个项目 1 个），每次我们更改配置中的设置（例如用户和权限、严重性、票证类型等）时，我们都需要更改所有这些设置。

I 使用
`[inherit]`
`file=../../../sharedTrac.ini`
和删除文件中的共享部分。

对于偏好，但我没有找到分享配置的方法。这有几个原因很糟糕，最主要的原因是“我的错误！！！” :p

TRAC 可以从中央定义中读取其配置，并从本地数据库中读取数据吗？

**编辑：**
我注意到所有这些配置都在`.db`文件中（sqlite 文件）......
是否有现成的工具可以将配置从 DB 复制到 DB？
还是我应该继续分析应该复制什么以及如何复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:36:52.173

您快到了。但请注意，本地设置将始终覆盖继承的设置，因此您必须在`<env>/conf/trac.ini`文件中删除它们以使中央配置生效。

具体到 Trac db 内部的配置部分：不，还没有同步工具。鉴于有一个用户帐户多年后仍处于测试阶段，因此兴趣不大。您应该使用`trac-admin`命令行工具（如这里已经建议的那样）或开始通过自己的（Python）脚本或自定义数据库同步直接同步部分数据库。首先看一下[Trac db schema](http://trac.edgewall.org/wiki/TracDev/DatabaseSchema)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:10:29.423

您可以尝试通过命令行执行此操作。只需为每个实例调用适当的“trac-admin”命令。添加用户配置文件的示例单行：

```
for D in */; do trac-admin $D session add username "Full Name" user@email.com ; done 
```

# javascript - .ajax 和 params 以及如何让它们看起来像这样？

> ID：13216795
> 
> 赞同：0
> 
> 时间：2012-11-04T07:11:13.517
> 
> 标签：javascript, jquery, ajax

我尝试发布以前的问题，但我相信它很复杂。

基本上，有人告诉我“你能让数据像这样通过吗？” - 请记住，此数据不是来自表单，而是来自通过客户端搜索驱动的数据。

这就是假设要发送到服务器的内容。因此，如果您转储了 error_log，它会看起来像这样。这都是动态的，所以下面的对象将是这种格式，但数据会改变。

```
{
  "matchedItems" :
  [
    { "itemID1" :
      { "Cost" : "12",
        "Size" : "small",
        "Colors" : [ "blue", "red" ]
      }
    },
    { "itemdID2" :
      { "Cost" : "33",
        "Size" : "large",
        "Colors" : [ "yellow" ]
      }
    }
  ]
} 
```

所以，我通过页面上的一些东西运行并捆绑数据并返回数据集，因此数组中的哈希值。

但是对于我的生活，我无法在实际的 .ajax 帖子中得到任何好看的东西。当我控制台记录数据时，它看起来不错。它是一个哈希数组。等等...看起来不错。但是当我查看请求的参数时，以下是实际发送的内容。所以下面是我实际发送的内容。它做了一些奇怪的合并，看起来像这样。

```
{
  'matchedItems[0][itemid1][Color]' => 'Blue',
  'matchedItems[0][itemid1][Size]' => 'small',
  'matchedItems[0][itemid1][Cost]' => '33.90',
  'matchedItems[1][itemid2][Color][]' => ['Silver'],
  'matchedItems[1][itemid2][Size]' => 'small',
  'matchedItems[1][itemid2][Cost]' => '44',
  'matchedItems[2][itemid3][Color][]' => ['blue','Red'],
  'matchedItems[2][itemid3][Size]' => 'large',
  'matchedItems[2][itemid3][Cost]' => '23'
}; 
```

我试图 $.params 数据，没有运气。我在dataType中尝试了各种数据设置，没有运气。我不知道如何格式化我发送的模仿我首先发布的数据的格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:15:21.223

你应该[json_encode()](http://php.net/manual/en/function.json-encode.php)你的 PHP 输出

例子：

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);
?> 
```

输出：

```
{"a":1,"b":2,"c":3,"d":4,"e":5} 
```

您可以使用 jQuery 解码从 ajax 回复中返回的 json：

```
var json_reply = jQuery.parseJSON('{"a":1,"b":2,"c":3,"d":4,"e":5}');
alert( json_reply.a ); // alerts "1" 
```

# php - 如何从其他表中插入外键约束的值？

> ID：13216796
> 
> 赞同：0
> 
> 时间：2012-11-04T07:11:23.287
> 
> 标签：php, mysql

表名`category` 和表列

```
1) cat_id (primary key)
2) cat_title 
```

另一个表是`book` ，列是

```
1) book_id (primary key)
2) book_title
3) cat_id(foreign key) 
```

对于外键约束，我正在尝试以下查询：

```
INSERT INTO book VALUES (1,'new book',(SELECT `cat_title` FROM `categroy` WHERE `cat_id`=3)) 
```

它不工作。有人请告诉我如何改进这个查询，以便它可以正常运行。帮助壳牌得到高度评价

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:17:13.390

我在您的查询中看到 2 个问题。

首先，您始终使用“1”作为新密钥。如果您的书表中已经有该键，它将产生错误。你可以在那里使用 NULL 。

其次，“FROM categroy”上有一个错字。应该是：“FROM 类别”。

# tridion - 如何启用内容交付登录

> ID：13216797
> 
> 赞同：4
> 
> 时间：2012-11-04T07:11:29.840
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

如何在 Tridion 2011 sp1 中启用内容交付日志记录。我们有 .net 版本的内容交付。安装内容交付后，我们更改了应用程序文件夹 (D:\Inetpub\MyPortal\bin\config) 中的 logback 文件，以下是 logback xml 中的设置

```
<property name="log.history" value="7"/>
<property name="log.folder" value="D:\tridion\log"/>
<property name="log.level" value="DEBUG"/> 
```

完成更改后，我们重置 IIS。但是我们在上面的位置看不到任何日志文件。

我们要检查日志文件的原因是。

我们已经实现了内容过滤机制。我们在其中使用各种查询条件，如 ItemSchemaCriteria、CustomMetaKeyCriteria、KeywordCriteria。

尽管我们在代理数据库中存在组件，但不显示某些过滤器的结果。如何准确检查在页面上执行过滤机制时触发了哪些查询。

注意：在位置 d:\Tridion\log\ 我们可以看到像 cd_core.2012-10-25,cd_monitor.2012-10-25, cd_deployer.2012-10-25,cd_transport.2012-10-25 这样的文件老了，我们需要今天的日志。(04-11-2012)

关于问题的更多输入：我们发现当我们为类别添加标准时，时间结果不会出现。

KeywordCriteria FilterCategory5303Criteria0= new KeywordCriteria("FilterCategory","Administrative"); 条件[] filterCatCriteria5303 = {FilterCategory5303Criteria0}; 条件 filterCatOrCriteria5303 = CriteriaFactory.Or(filterCatCriteria5303); mainCriteria5303 = CriteriaFactory.And(mainCriteria5303, filterCatOrCriteria5303);

在代理数据库的 CUSTOM_META 表中，我们有 2 个组件的条目。KEY_NAME = "FilterCategory" 和 KEY_STRING_VALUE="Administrative"

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T10:23:51.973

如果您正在使用：

```
<property name="log.folder" value="D:\tridion\log"/> 
```

那么预计您将不会获得任何日志记录。Logback 需要双反斜杠或简单的（fwd）斜杠。例子：

```
<property name="log.folder" value="D:\\tridion\\log"/> 
```

或者

```
<property name="log.folder" value="D:/tridion/log"/> 
```

此外，如果您想查看 Tridion 从您的 Broker 查询中为您创建的 (JPQL) 查询，那么您需要将日志记录设置为 TRACE 并在您的日志中搜索以下内容：

```
TRACE JPAQueryDAO - Broker Query generated: 
```

这将使您对最终生成的最终 SQL 查询有一个印象。

我的最后一句话是关于 KeywordCriteria 以及您如何使用它。您应该知道 KeywordCriteria 与 CUSTOM_META 表没有任何关系。对于与该表相关的查询，您应该使用名为“CustomMeta***Criteria”的标准

可能，在您的情况下，您需要使用：

```
new CustomMetaValueCriteria(new CustomMetaKeyCriteria("FilterCategory"), "Administrative"); 
```

希望这可以帮助。

干杯，丹尼尔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T13:07:47.107

每当 Broker Query 没有给我预期的结果时，我都会前往 MSSQL Query Profiler 看看在数据库级别上实际发生了什么。

我在 Tridion 实践 wiki 上的一篇文章中记录了这个过程：[http](http://code.google.com/p/tridion-practice/wiki/TroubleshootBrokerQueryGeneration) ://code.google.com/p/tridion-practice/wiki/TroubleshootBrokerQueryGeneration 。

步骤的快速摘要：

1.  启动 MSSQL 查询探查器
2.  开始一个新的跟踪
3.  过滤数据库名称的跟踪
4.  重新加载您的页面，因此查询会触发
5.  在 Profiler 中查找查询
6.  将查询复制到更好的工具中并重新格式化

一旦您到达第 6 步，通常会有些清楚为什么没有结果。我经常最终修改 SQL 以提供我正在寻找的结果。然后我修改标准以生成该 SQL，这有时可能是一个挑战。

# wordpress - WORDPRESS：在“新闻”类别中禁用评论并在“博客”类别中启用？

> ID：13216801
> 
> 赞同：1
> 
> 时间：2012-11-04T07:12:24.790
> 
> 标签：wordpress, templates, comments, categories

我有一个新闻页面，显示“新闻”类别中的所有帖子。此类别具有子类别，例如“商品、音乐、活动”等。

我的目标是从所有新闻/子类别帖子中删除评论，但仅将它们与“博客”类别帖子一起显示。

现在我已经`single.php`设置好了，所以具有“画廊”`post_format`结构的帖子会以不同的方式显示。

**这是 single.php 文件//** [http://pastebin.com/YNf3TxT6](http://pastebin.com/YNf3TxT6)

我想知道我必须解决什么才能让这个工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:37:59.913

**编辑：对于未来的查看者，这里是从下面的对话中更新的一个 single.php 的粘贴，如果帖子在“博客”类别中，它将只显示评论模板：[pastebin.com/y9ZtCN5U](http://pastebin.com/y9ZtCN5U)**

假设您将博客文章放在与新闻文章不同的页面上，您应该能够根据类别使用不同的模板。

[http://codex.wordpress.org/Category_Templates](http://codex.wordpress.org/Category_Templates)

因此，您可以制作一个不包含评论代码的 category-blog.php 模板文件。

如果您的所有类别都列在同一页面上，请使用它而不是第 50 行的 in_category 内容。

```
<?php
foreach (get_the_category() as $category) {
    if ( $category->name == 'Blog' ) {
        comments_template();
    }
}
?> 
```

不是 100% 确定这会奏效，但请尝试一下，让我知道会发生什么。

# syntax-error - 是否有计算开括号和右括号的在线服务？

> ID：13216802
> 
> 赞同：12
> 
> 时间：2012-11-04T07:12:42.707
> 
> 标签：syntax-error

有谁熟悉在线服务，我可以在其中粘贴一些代码，它告诉我

1.  如果我所有的括号都到位 - 没有丢失/添加右括号？
2.  根据语言语法 - 代码是否正确？

    *   我同意大多数编辑配色方案/和或给你一个错误。这个特定的没有:-) 它被称为：记事本^^ - 我经常使用它，但仍然如此。如果存在这样的服务 - 无论您使用什么 IDE，它都可以提供帮助。如果您有一段代码要检查 - 并且不想打开 IDE

示例（“3”部分缺少括号）：

```
IF( OR( ISBLANK(BillingCountry), UPPER(BillingCountry) = 'UNITED STATES' , UPPER(BillingCountry) = 'USA', UPPER(BillingCountry) = 'US', UPPER(BillingCountry) = 'U.S.', UPPER(BillingCountry) = 'U.S.A.' ), 

IF ( OR( BillingState = 'CA' , BillingState = 'WA' , BillingState = 'OR' , BillingState = 'ID' , BillingState = 'NV' , BillingState = 'MT' , BillingState = 'WY' , BillingState = 'CO' , BillingState = 'UT' , BillingState = 'AZ' , BillingState = 'NM'), 
"1 - West" 
,
IF ( OR( BillingState = 'IL' , BillingState = 'ND' , BillingState = 'SD' , BillingState = 'MI' , BillingState = 'NE' , BillingState = 'IA' , BillingState = 'KS' , BillingState = 'OK' , BillingState = 'TX' , BillingState = 'IL' , BillingState = 'MN' , BillingState = 'OH' , BillingState = 'WI' , BillingState = 'IN' , BillingState = 'CANADA'), 
"2 - MIDWEST" 
, 
IF( OR( BillingState = 'NY' , BillingState = 'ME' , BillingState = 'NH' , BillingState = 'MA' , BillingState = 'RI' , BillingState = 'CT' , BillingState = 'NJ' , BillingState = 'DE' , BillingState = 'D.C.' , BillingState = 'VA' , BillingState = 'WVA' , BillingState = 'NC' , BillingState = 'SC' , BillingState = 'GA' , BillingState = 'FL' , BillingState = 'VT' , BillingState = 'PA' , BillingState = 'MD' , BillingState = 'KY' , BillingState = 'TN' , BillingState = 'AR' , BillingState = 'AL' , BillingState = 'MS' , BillingState = 'LS'), 
"3 - East" 
, 
"Unknown" ) )
, 
IF( LEN(BillingCountry) > 0, "4 - International", "Unknown") 
) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T08:23:14.733

这可能对[ideone.com](http://ideone.com)有所帮助。但是你可以只安装 Notepad++

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-05T11:04:44.033

该网站可能有助于满足第一点：[http ://www.balancebraces.com/](http://www.balancebraces.com/)

本网站提供检查大括号：{ }、括号：( )、括号：[ ] 和标签：< > 的选项，并为它们着色以便于识别。

# c - 在这种情况下，轻（est）重量的 GCC 内存屏障是什么？

> ID：13216808
> 
> 赞同：2
> 
> 时间：2012-11-04T07:14:36.653
> 
> 标签：c, gcc, concurrent-programming, memory-barriers

我有以下 C 代码：

```
...
data[index] = something;
a_write_memory_barrier();
index = new_index;
... 
```

该代码不受锁保护（其他人只是读取`data`和`index`），我想确保`data[index]`在更新`index`. 这段代码周围有其他变量的内存写入和读取，但它们并不重要，因此 GCC 可以自由地重新排序它们（我希望这样做是为了优化）。只要保证`data[index]`and的顺序`index`就足够了。应该如何`a_write_memory_barrier()`实施才能实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:22:58.067

如果您需要关心乱序执行（您可能在分布式框架中工作），那么您需要考虑 load load ， store store 和 full barrier ，当然如果您的架构支持 TSO （total store ordering）而不是您不'不关心存储障碍，您的写入操作将按照代码中的顺序进行。

另一方面，如果您担心编译器重新排序，请考虑使用 Volatile (google it)

在您的示例商店屏障将解决您的问题，这种屏障的实现取决于您使用的体系结构和编译器：

例如

对于 sparc 和 gcc 编译器：

```
 #define MEMBAR_STORESTORE()  asm volatile ("membar #StoreStore":::"memory") 
```

# css - CSS 定位，菜单列表对齐（需要帮助）

> ID：13216809
> 
> 赞同：1
> 
> 时间：2012-11-04T07:14:44.017
> 
> 标签：css, menu, alignment, submenu

我正在设计一个菜单和子菜单

我正面临子菜单对齐的问题

![菜单](../Images/06b193c381b65879e068b9095e90ffa6.png)

我想让子菜单的末尾与“更多”选项的右边缘对齐，如箭头所指。

如果我使用正确：-somepx; 这将要求我在 chrome 中具有不同的对齐方式，它将是 10px，而在 safari 中将是 5px

是否有针对此的跨平台解决方案。

HTML代码是：

```
<div id=header>
    <ul id="menu">
        <li><a href="#">Get Closer</a></li>
            <li><a href="#">Know your team</a></li>
            <li><a href="#" class="more">More</a>
                <ul>
                    <li><a href="#">Our Story</a></li>
                    <li><a href="#">Clients</a></li>
                    <li><a href="#">Testimonials</a></li>
                    <li><a href="#">Pricing</a></li>
                    <li><a href="#">Case Studies</a></li>
                </ul>
            </li>
            <li><a href="#">Get in touch</a></li>
        </ul>
</div> 
```

CSS代码是

```
#header #menu {
    margin-top: 25px;
    padding: 0px;
    float: right;
    list-style:none;
    clear: right;
}
#header #menu li {
    padding: 10px 15px 6px 15px;
    border: 1px solid #d2d2d2;
    position:relative;
    float: left;
    margin-left: -1px;
}
#header #menu li:hover { 
    background-color: #fff;
}
#header #menu li:first-child { 
    border-radius: 55px 0 0 55px;
    padding-left: 20px;
}
#header #menu li:last-child { 
    border-right: 1px solid #d2d2d2;
    border-radius: 0 55px 55px 0;
    padding-right: 20px;
}
#header #menu a {
    display:block;
    font: 20px 'Klavika Rg';
    text-transform: uppercase;
}
#header #menu .more:after {
    content: "{";
    font-family: 'WebSymbols';
    font-size: 22px;
    margin-left: 7px;
    line-height: 0;
}
/*--- DROPDOWN ---*/
#header #menu ul{
    list-style:none;
    position: absolute;
    right: 0px;
    margin: 0;
    visibility: hidden;
}
#header #menu ul li{
    position: relative; 
    float: left;
    margin-top: 0;
    padding: 6px 10px 1px 10px;
    margin-left: -1px;
}
#header #menu ul li:first-child { 
    border-radius: 15px 0 0 15px;
    padding-left: 20px;
}
#header #menu ul li:last-child { 
    border-right: 1px solid #d2d2d2;
    border-radius: 0 0 15px 0;
    padding-right: 20px;
}
#header #menu ul a{
    white-space:nowrap; 
    font: 15px 'Klavika Rg';    
    transition: all 0;
    -moz-transition: all 0; /* Firefox 4 */
    -webkit-transition: all 0; /* Safari and Chrome */
    -o-transition: all 0; /* Opera */
}
#header #menu li ul{ 
    margin-top: 6px;
    width: 500px;
}
#header #menu li:hover ul{ 
    visibility: visible;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:00:08.130

那么你所要做的就是将 floot 更改为 header：

```
#header #menu ul li{
    position: relative; 
    float: right; <------- Here
    margin-top: 0;
    padding: 6px 10px 1px 10px;
    margin-left: -1px; <------- change this to -1px for prefection. (:
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T08:21:07.370

解决这个问题以及跨浏览器验证可能遇到的类似问题的最佳方法是在项目中使用[**重置样式表**](http://meyerweb.com/eric/tools/css/reset/)。默认情况下，这会将所有浏览器的所有边距、填充等默认为 0，并消除大多数不一致之处。

要使用重置样式表，只需单击我提供的链接，将 css 从站点复制并粘贴到 notepad.txt 文件中，然后将其保存为 reset.css。将文件放在您的项目文件夹中，并像使用任何其他 .css 文件一样链接到它（假设您使用最佳实践）。

```
 <head>
     <link rel="stylesheet" type="text/css" href="reset.css">
 </head> 
```

**注意：** reset.css 确实将*所有内容*设置为默认值，因此请务必通过它并删除您不想设置为 0 或无的任何内容。

# jquery - 如何从 jquery 插件返回 iframe 内容？

> ID：13216810
> 
> 赞同：0
> 
> 时间：2012-11-04T07:14:55.157
> 
> 标签：jquery, forms, iframe, plugins

我想编写一个 jquery 插件，它可以使用 iframe 提交表单并将 iframe 的内容作为回调函数的参数返回。但是 onload 事件不返回任何值。我是初学者。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:57:20.143

## 推荐

我能想象的唯一需要在 iFrame 中提交表单的情况是，如果你想进行 AJAX 上传，如果这是你的情况，你可以看看[这个插件](http://lagoscript.org/jquery/upload/download)，它非常优雅地实现了这一点（他们使用 iFrame提交文件上传）

但是，如果您只是想提交表单并在同一页面上检索结果数据，最好不要使用 iframe 并坚持使用[$.post()](http://api.jquery.com/jQuery.post/)

例子：

```
$.post('ajax/test.html', form.serializeArray(), function(data) { // Callback function
    $('.result').html(data); // Do what you want with data
}, 'html'); // Retrieve HTML, json etc 
```

## 如果你还需要它

如果您仍然需要使用 iframe，以下是 upload.js 插件中的相关代码：

```
 form.submit(function() { // form would be the form element in the iframe
        iframe.load(function() {
            var data = handleData(this);
                // data will be the resulting content
        });
     }).submit(); // submit form after applying listeners 
```

并改变它们的`handleData()`功能：

```
function handleData(iframe) {
            return $(iframe).contents().get(0);
} 
```

# c# - 将背景设置为指向 LinearGradientBrush 的 StaticResource 会使我的应用程序崩溃，有什么想法吗？

> ID：13216818
> 
> 赞同：3
> 
> 时间：2012-11-04T07:16:22.097
> 
> 标签：c#, xaml, microsoft-metro, winrt-xaml

所以这就是正在发生的事情，我可以将对象的背景设置为渐变，方法是直接将画笔放入`Grid.Background` ~~或设置`Background="{StaticResource BackgroundGradient}"`~~（我认为这可行，但我刚刚测试它并且它也会使应用程序崩溃），但是通过设置它Setter ( `<Setter Property="Background" Value="{StaticResource BackgroundGradient}">`) 使应用程序崩溃。

第一次通过 Setter 设置它，然后我关闭应用程序并复制/粘贴 Gradient 几次并更改名称和颜色以制作我需要的其他渐变，之后每次 Setter 设置渐变时它都会崩溃。

以下是 Style 对象的相关代码：

```
<Style x:Key="MainBackground" TargetType="Panel">
    <Setter Property="Background" Value="{StaticResource BackgroundGradient}"/>
</Style> 
```

这是相应的渐变（通过在设计视图中制作渐变并使用“转换为资源”生成：

```
<LinearGradientBrush x:Key="BackgroundGradient" EndPoint="0.5,1" StartPoint="0.5,0">
    <LinearGradientBrush.RelativeTransform>
        <CompositeTransform CenterY="0.5" CenterX="0.5" Rotation="-90"/>
    </LinearGradientBrush.RelativeTransform>
    <GradientStop Color="#9BC6C5"/>
    <GradientStop Color="#BAD8D7" Offset="1"/>
</LinearGradientBrush> 
```

任何帮助将不胜感激。我目前可以使它工作的唯一方法是删除样式定义中对渐变的引用，但我真的不想在单个项目上设置渐变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:11:33.357

这是一个非常普遍的问题，您必须确保

```
<Style x:Key="MainBackground" TargetType="Panel">
    <Setter Property="Background" Value="{StaticResource BackgroundGradient}"/>
</Style> 
```

在此之后执行

```
<LinearGradientBrush x:Key="BackgroundGradient" EndPoint="0.5,1" StartPoint="0.5,0">
    <LinearGradientBrush.RelativeTransform>
        <CompositeTransform CenterY="0.5" CenterX="0.5" Rotation="-90"/>
    </LinearGradientBrush.RelativeTransform>
    <GradientStop Color="#9BC6C5"/>
    <GradientStop Color="#BAD8D7" Offset="1"/>
</LinearGradientBrush> 
```

如果您有 2 个或更多文件来设置此资源，请尝试将两种样式设置在同一个文件中，并**确保 Brush 在 Panel 之前定义**，然后它可以工作！所以继续在单独的文件中制作它并观察首先执行的文件。

# php - 如何将日期检索到三个下拉列表中？

> ID：13216820
> 
> 赞同：0
> 
> 时间：2012-11-04T07:16:33.503
> 
> 标签：php, codeigniter

我有一个生日字段，在将记录插入客户表后是可选的。

插入后默认值为“000-00-00”。

现在，我想编辑表中的记录，并希望将birth_date 字段的值放入三个下拉列表中。

三个下拉列表是日、月和年。

如果没有生日，则三个下拉列表的选定值应为“日”、“月”和“年”。

我尝试了以下代码，不知道这是否是最好的方法。

```
$dateValue = '0000-00-00';
$year = explode("-", $dateValue);

if ($year[0] == "0000") {
    $selected_year = "Year";
            $selected_month = "Month";
            $selected_day = "Day";
}else{
    $selected_year = date("Y",strtotime($user['birth_date']));
} 
```

如果有更好的方法，请告诉我。

顺便说一句，我正在使用codeigniter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T08:18:24.267

我认为您进行测试为时已晚，直接在 $dateValue 上进行测试要简单得多。此外，您可以通过使用[list](http://www.php.net/list)函数来简化代码：-

```
$dateValue = '0000-00-0';
if($dateValue == '0000-00-00'){
    $values = array('Year', 'Month', 'Day');
} else {
    $values = explode('-', $dateValue);
}
list($selected_year, $selected_month, $selected_day) = $values;

var_dump($selected_year);
var_dump($selected_month);
var_dump($selected_day); 
```

给出以下输出：-

```
string 'Year' (length=4)
string 'Month' (length=5)
string 'Day' (length=3) 
```

将第一行更改为：-

```
$dateValue = '2012-11-3'; 
```

给出：-

```
string '2012' (length=4)
string '11' (length=2)
string '3' (length=1) 
```

就个人而言，我会将这一切隐藏在一个函数中以提高可读性：-

```
function getValues($dateValue = '0000-00-00'){
    if($dateValue == '0000-00-00'){
        $values = array('Year', 'Month', 'Day');
    } else {
        $values = explode('-', $dateValue);
    }
    return $values;
} 
```

然后像这样使用它：-

```
list($selected_year, $selected_month, $selected_day) = getValues('2012-11-03');

var_dump($selected_year);
var_dump($selected_month);
var_dump($selected_day); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:35:55.840

好吧，我的建议是使用 date_format mysql 函数来获取查询中的年、日和月，如下所示

```
select *,DATE_FORMAT(date_field,'%Y') as selected_year,
DATE_FORMAT(date_field,'%d') as selected_day,
DATE_FORMAT(date_field,'%c') as selected_month 
from user_table; 
```

有关详细信息 date_format 请检查此链接 [Date_format](http://www.w3schools.com/sql/func_date_format.asp)

或 mysql 文档

# php - 为什么我的 PHP 时间戳短了两个小时？

> ID：13216822
> 
> 赞同：0
> 
> 时间：2012-11-04T07:16:44.123
> 
> 标签：php

代码：

```
 date_default_timezone_set('America/Los_Angeles');
    $textDate = strtotime($date);
    var_dump($textDate);
    var_dump($date); 
```

输出：

```
int 1352012400
string '11/04/12' (length=8) 
```

问题是当您转换实际时间戳时，它是美国东部标准时间凌晨 1 点。

我正在生成这个时间戳，并将时区设置为 PST——这是怎么回事？我究竟做错了什么？我显然可以只增加两个小时，但我真的不应该这样做！这也不是我的服务器或 PC 的时间戳问题的结果，因为这是在当前时间的暂停中发生的——我正在将日期从特定格式转换为早上午夜的 UNIX 时间戳，即日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T18:47:12.653

实际问题似乎与 DST 的使用有关——因为所讨论的日期是在 DST 结束时，时间计算出现了大约一小时的偏差。这如何将美国东部标准时间凌晨 3 点变成美国东部标准时间凌晨 1 点我不确定（也许我用来进行快速转换的网站已关闭），但它也解释了为什么无论我多少次我的数学都是错误的检查了它。

# search - 为“谷歌自定义搜索”添加默认值

> ID：13216825
> 
> 赞同：1
> 
> 时间：2012-11-04T07:17:13.923
> 
> 标签：search, default, google-custom-search

我想为我页面上的谷歌自定义搜索栏中搜索的每个项目自动添加一个默认值。例如：如果默认值为“review”并且用户在搜索字段中输入了汽车，谷歌将返回“汽车评论”的结果。

这可能吗？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T14:44:54.030

Ok, found the answer. If anyone is interested follow the link below - askdavetaylor.com/automatically_add_words_google_search.html

# ruby-on-rails - 在没有 RVM 的情况下安装 Rails 时无法运行 rails 命令

> ID：13216826
> 
> 赞同：0
> 
> 时间：2012-11-04T07:17:30.410
> 
> 标签：ruby-on-rails, ruby, rubygems

我无法正确安装rails，在执行“sudo gem install rails”之后，一切顺利，但如果我尝试执行“rails -v”，我得到“Rails 当前未安装在此系统上......”，我没有使用 RVM，我通过 Homebrew 安装了 Ruby。

rails 可执行文件位于“/usr/local/Cellar/ruby/1.9.3-p286/bin/rails”中，但即使我将该路径添加到我的 $PATH 它也不会找到它，或者 RubyGems 中的其他内容是出错了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:52:06.007

使用自制软件，只需使用`gem install rails`或任何 gem 名称。不要使用`sudo`. 这对我行得通。

```
$ which rails
/usr/local/Cellar/ruby/1.9.3-p194/bin/rails 
```

# .htaccess - htaccess如何删除尾随问号

> ID：13216827
> 
> 赞同：2
> 
> 时间：2012-11-04T07:17:32.440
> 
> 标签：.htaccess

如何使用 htaccess 去除尾随？来自 [http://domain.com/directory/folder/](http://domain.com/directory/folder/)？

所以它显示如下：

[http://domain.com/directory/文件夹/](http://domain.com/directory/folder/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:06:05.767

不幸的是，没有办法通过 a 中的 URI 匹配来检测杂散的尾部斜杠`RewriteRule`（查询字符串被显式删除），您也无法检查`%{QUERY_STRING}`变量，因为在这两种情况下，有或没有尾随**?** ，变量将为空。您需要做的是使用实际请求通过`%{THE_REQUEST}`变量匹配尾部斜杠：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /[^\ \?]*\?($|\ )
RewriteRule ^(.*)$ /$1? [L,R=301] 
```

那会消除流浪**？**位于 URL 的后面。上面的正则表达式匹配一个请求，它们看起来像这样：

```
GET /directory/folder/? HTTP/1.1 
```

所以正则表达式尝试匹配`GET`部分（也可以是`HEAD`or `POST`，存在其他方法但不会影响您在浏览器的 URL 地址栏中看到的内容），然后是请求的 URI ( `/[^\ \?]*`)，然后是杂散的**?** , 然后`($|\ )`匹配请求的结尾（因为请求可以在没有**HTTP/1.1**位的情况下结束）或空格。

# javascript - 如何将数据从非 AngularJS 推送到 AngularJS

> ID：13216828
> 
> 赞同：3
> 
> 时间：2012-11-04T07:17:54.920
> 
> 标签：javascript, angularjs

我有一些要在 AngularJS 范围之外检索的数据。我想使用这些数据来更新 Angular 中的模型，以便它也反映在视图中，然后像 Angular 应该如何工作一样工作。我如何推送这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:28:40.877

查看[Scope.$apply()](http://docs.angularjs.org/api/ng.%24rootScope.Scope)。从该页面：

> **$apply()**用于从 Angular 框架外部执行 Angular 表达式。

# apache2 - 在虚拟主机中安装 Web2py

> ID：13216837
> 
> 赞同：1
> 
> 时间：2012-11-04T07:19:58.770
> 
> 标签：apache2, wsgi, web2py

通过脚本 setup-web2py-ubuntu.sh 安装 Web2py，之前为他们的虚拟主机调整了方式。但它只适用于端口 443 和第 80 期

> 有用！

怎么修？

```
#NameVirtualHost *:80
#NameVirtualHost *:443
# If the WSGIDaemonProcess directive is specified outside of all virtual
# host containers, any WSGI application can be delegated to be run within
# that daemon process group.
# If the WSGIDaemonProcess directive is specified
# within a virtual host container, only WSGI applications associated with
# virtual hosts with the same server name as that virtual host can be
# delegated to that set of daemon processes.
WSGIDaemonProcess demo2.host.ru user=web2 group=client1

<VirtualHost *:80>
  WSGIProcessGroup demo2.host.ru
  WSGIScriptAlias / /var/www/clients/client1/web2/web/web2py/wsgihandler.py
  WSGIPassAuthorization On

  <Directory /var/www/clients/client1/web2/web/web2py>
    AllowOverride None
    Order Allow,Deny
    Deny from all
    <Files wsgihandler.py>
      Allow from all
    </Files>
  </Directory>

  AliasMatch ^/([^/]+)/static/(.*) \
        /var/www/clients/client1/web2/web/web2py/applications/$1/static/$2

  <Directory /var/www/clients/client1/web2/web/web2py/applications/*/static/>
    Options -Indexes
    Order Allow,Deny
    Allow from all
  </Directory>

  <Location /admin>
  Deny from all
  </Location>

  <LocationMatch ^/([^/]+)/appadmin>
  Deny from all
  </LocationMatch>

  CustomLog /var/log/apache2/access.log common
  ErrorLog /var/log/apache2/error.log
</VirtualHost>

<VirtualHost *:443>
  SSLEngine on
  SSLCertificateFile /usr/local/ispconfig/interface/ssl/ispserver.crt
  SSLCertificateKeyFile /usr/local/ispconfig/interface/ssl/ispserver.key
WSGIProcessGroup demo2.host.ru
  WSGIScriptAlias / /var/www/clients/client1/web2/web/web2py/wsgihandler.py
  WSGIPassAuthorization On

  <Directory /var/www/clients/client1/web2/web/web2py>
    AllowOverride None
    Order Allow,Deny
    Deny from all
    <Files wsgihandler.py>
      Allow from all
    </Files>
  </Directory>

  AliasMatch ^/([^/]+)/static/(.*) \
        /var/www/clients/client1/web2/web/web2py/applications/$1/static/$2

  <Directory /var/www/clients/client1/web2/web/web2py/applications/*/static/>
    Options -Indexes
    ExpiresActive On
    ExpiresDefault "access plus 1 hour"
    Order Allow,Deny
    Allow from all
  </Directory>

  CustomLog /var/log/apache2/access.log common
  ErrorLog /var/log/apache2/error.log
</VirtualHost> 
```

在文件夹 web2py 中创建文件：parameters_443.py 和 parameters_80.py。

```
password="pbkdf2(1000,20,sha512)$851a015489" 
```

仍然无法正常工作...请帮助！:'(

# hibernate - Hibernate 3.6 和 4.1 中的冲突

> ID：13216841
> 
> 赞同：1
> 
> 时间：2012-11-04T07:20:25.167
> 
> 标签：hibernate

目前我在我当前的应用程序中使用 Hibernate 版本 4.1.17_final。我在我的应用程序中使用休眠的多租户功能。我必须将另一个应用程序集成到我当前的应用程序中。但是那个应用程序使用的是 Hibernate 3.6 版本。我通过从该应用程序复制 jar 并将其粘贴到我的 WEB-INF/lib 文件夹中来集成该应用程序。我认为hibernate 4.1.17版本会有兼容性。我的要求就像我必须使用他们的 API 获取数据并将其显示在我的应用程序中。但是当我试图从那个 jar 调用任何类方法来获取数据时，它会给我以下错误。

`java.lang.NoSuchMethodError: org.hibernate.SessionFactory.openSession()Lorg/hibernate/classic/Session;`

如果我将当前应用程序的版本更改为 3.6，那么多租户功能将无法使用。因为它在 4.0 版本中可用。任何帮助都会非常重要。请指导我解决这个问题。我用谷歌搜索但没有找到任何具体的方法。我正在使用 Maven 来构建和映射依赖项。

如果您想了解更多信息，请告诉我。

谢谢和问候， Parag737

# c++ - 未定义的对 `LinkedList 的引用 ::push_front(int)

> ID：13216844
> 
> 赞同：2
> 
> 时间：2012-11-04T07:20:41.460
> 
> 标签：c++, templates, undefined-reference

> **可能重复：**
> [为什么在使用模板时会出现“未解析的外部符号”错误？](https://stackoverflow.com/questions/456713/why-do-i-get-unresolved-external-symbol-errors-when-using-templates)

链表.h

```
#ifndef LINKEDLIST_H
#define LINKEDLIST_H
#include<iostream>

template<class T> class LinkedList;

//------Node------
template<class T>
class Node {
private:
    T data;
    Node<T>* next;
public:
    Node(){data = 0; next=0;}
    Node(T data);
    friend class LinkedList<T>;

};

//------Iterator------
template<class T>
class Iterator {
private:
    Node<T> *current;
public:

    friend class LinkedList<T>;
    Iterator operator*();
 };

//------LinkedList------
template<class T>
class LinkedList {
private:
    Node<T> *head;

public:
    LinkedList(){head=0;}
    void push_front(T data);
    void push_back(const T& data);

    Iterator<T> begin();
    Iterator<T> end();

};

#endif  /* LINKEDLIST_H */ 
```

链表.cpp

```
#include "LinkedList.h"
#include<iostream>

using namespace std;

//------Node------
template<class T>
Node<T>::Node(T data){
    this.data = data;
}

//------LinkedList------
template<class T>
void LinkedList<T>::push_front(T data){

    Node<T> *newNode = new Node<T>(data);

    if(head==0){
        head = newNode;
    }
    else{  
        newNode->next = head;
        head = newNode;
    }    
}

template<class T>
void LinkedList<T>::push_back(const T& data){
    Node<T> *newNode = new Node<T>(data);

    if(head==0)
        head = newNode;
    else{
        head->next = newNode;
    }        
}

//------Iterator------
template<class T>
Iterator<T> LinkedList<T>::begin(){
    return head;
}

template<class T>
Iterator<T> Iterator<T>::operator*(){

} 
```

主文件

```
#include "LinkedList.h"

using namespace std;

int main() {
    LinkedList<int> list;

    int input = 10;

    list.push_front(input); 
} 
```

嗨，我是 C++ 的新手，我正在尝试使用模板编写自己的 LinkedList。

我非常密切地关注我的书，这就是我得到的。我收到了这个错误。

> /main.cpp:18: 未定义对 `LinkedList::push_front(int)' 的引用

我不知道为什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T07:24:13.263

您在程序中使用模板。当你使用模板时，你必须将代码和头文件写在同一个文件中，因为编译器需要在程序中使用它的地方生成代码。

您可以执行此操作或包含`#inlcude "LinkedList.cpp"`在`main.cpp`

这个问题可能会对你有所帮助。 [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

# java - 如何在onclick期间动态更改表单值并提交

> ID：13216846
> 
> 赞同：-1
> 
> 时间：2012-11-04T07:21:01.470
> 
> 标签：java, javascript, html, jakarta-ee

我在锚标记中使用 onclick 事件。当我单击锚点时，我正在调用一个 java 脚本函数，在该函数中更改一个输入元素的值并提交表单。该值已更改，但表单未提交该值。请帮助我。仅供参考，如果我创建一个元素并在提交之前添加到表单中，它就可以工作。为什么在第一种情况下不起作用。

```
<form name="form" >    
    <input type="hidden" name="input" value="test"/>    
    <a onclick='testMethod("test")'>click </a>    
</form> 
```

使用的脚本是

```
function testMethod(value)
{
    if(serviceName != null && jQuery('#form') != null)
    {
        document.forms['form'].getElementById('input').value = value;
        document.forms['form'].action = jQuery('#newAction').val();
        document.forms['form'].submit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:43:24.157

这里的主要问题是你试图通过 id 访问输入，而它没有一组：

（添加`id`到表单和`id`输入中，以便我们可以轻松选择它们）：

```
<form name="form" id="form">
    <input type="hidden" name="input" id="input" value="test" />
    <a onclick='testMethod("test")' >click</a>
</form> 
```

以及要匹配的 javascript（更新以使用 jQuery 的选择器，因为您表示您有 jQuery 支持可用）：

```
function testMethod(value)
{
    var form = $('#form');
    if(serviceName != null && form.length)
    {
        $('#input').val(value);
        form.attr('action', $('#newAction').val());
        form.submit();
    }
} 
```

您还可以更新您的代码，这样您就不会在 DOM 中包含与 onclick 方法的绑定，而是直接在 javascript 中附加到它：

将元素更改`a`为具有 ID：

```
<form name="form" id="form">
    <input type="hidden" name="input" id="input" value="test" />
    <a id="submitLink">click</a>
</form> 
```

javascript 现在看起来像这样：

```
$(document).ready(function() {
    $('#submitLink').on('click', function(event) {
        event.preventDefault();
        var form = $('#form');
        if(serviceName != null && form.length)
        {
            $('#input').val(value);
            form.attr('action', $('#newAction').val());
            form.submit();
        } 
    });
}); 
```

# python - 如何使用python实时流股票价格

> ID：13216848
> 
> 赞同：3
> 
> 时间：2012-11-04T07:21:56.247
> 
> 标签：python, stock

起初我想找到一些 API，但我在互联网上搜索并没有找到任何真正有用的东西。

“实时”我的意思是在没有刷新的情况下在网页上实时流式传输股票价格。

如果没有这样的 API，我的以下方法会是实现它的好方法吗？1\. Python端，调用yahoo Finance api获取最新价格。2.浏览器端，使用ajax不断调用服务器端获取价格并显示价格。更具体地说，我正在考虑在 jquery 中使用 setInterval 来实现这一点。

这种方法看起来如何？

其实这并不是股票价格数据特有的，任何需要不断从服务器端获取数据的网站都需要考虑这个问题。例如 google 聊天、facebook 新闻提要等。谁能告诉我一般如何实现从服务器到浏览器的实时流数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:22:16.950

另一种方法是使用推送架构。你可以看看[APE-Ajax Push Engine](http://www.ape-project.org/ajax-push.html)。

您还可以查看[Socket.IO](http://socket.io/)，它是 Node.JS 的实时应用程序框架。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T08:56:09.350

您绝对应该使用 Push API。这些天你可能应该使用[http://www.websocket.org/](http://www.websocket.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T20:13:35.447

您不想实时使用休息 API，不断“拉”实时价格是低效的。相反，您需要一种服务，只要在交易所执行新交易时，就会向您“推送”更改。这是通过 websocket 完成的，它是一种 API，但它绝对不同于 rest API。[本文讨论](http://blog.intrinio.com/stock-prices-from-intrinio/)了差异。

[Intrinio](https://intrinio.com/tutorial/web_api)提供了一个实时 websocket，您可以使用[Github 上的这个 SDK](https://github.com/jorymorrison/real-time-intrinio-python)通过 Python 访问它。[您可以使用Python 中的这个包](https://github.com/nhedlund/intrinio)通过 rest API 访问相同的数据。如果你同时尝试它们，你会发现使用 rest API 的架构没有意义。

[该视频显示](https://www.youtube.com/watch?v=Fmd6exi-4t8)了进入的交易不会定期在市场上执行，它完全是零星的。与其不断“向”服务器“询问”数据，不如“倾听”。这被称为书的顶部，这意味着当它们从顶部进入时，您会获得最新的交易。

# java - 计算非常大的数字的欧拉总函数JAVA

> ID：13216853
> 
> 赞同：1
> 
> 时间：2012-11-04T07:22:10.390
> 
> 标签：java, optimization, cryptography, public-key-encryption, factorization

我已经设法使 Eulers Totient Function 的一个版本工作，尽管它适用于较小的数字（与我需要计算的 1024 位数字相比，这里较小）

我的版本在这里-

```
public static BigInteger eulerTotientBigInt(BigInteger calculate) { 

    BigInteger count = new BigInteger("0");
    for(BigInteger i = new BigInteger("1"); i.compareTo(calculate) < 0; i = i.add(BigInteger.ONE)) { 
        BigInteger check = GCD(calculate,i);

        if(check.compareTo(BigInteger.ONE)==0)  {//coprime
            count = count.add(BigInteger.ONE);          
        }
    }
    return count;
} 
```

虽然这适用于较小的数字，但它通过迭代从 1 到正在计算的数字的所有可能来工作。对于大的 BigInteger，这是完全不可行的。

我已经读过可以在每次迭代中划分数字，从而无需逐个遍历它们。我只是不确定我应该除以什么（我看过的一些示例是用 C 语言并使用 long 和平方根 - 据我所知，我无法计算出准确的BigInteger 的平方根。我还想知道，如果对于像这样的模运算，函数是否需要包含一个参数来说明 mod 是什么。我完全不确定，所以任何建议都非常感谢。

谁能在这里指出我正确的方向？

PS 当我发现[修改 Euler Totient Function](https://stackoverflow.com/questions/12709813/modifying-euler-totient-function)时，我删除了这个问题。我对其进行了调整以与 BigIntegers 一起使用-

```
public static BigInteger etfBig(BigInteger n) {

    BigInteger result = n;
    BigInteger i;

    for(i = new BigInteger("2"); (i.multiply(i)).compareTo(n) <= 0; i = i.add(BigInteger.ONE)) {
         if((n.mod(i)).compareTo(BigInteger.ZERO) == 0) 
         result = result.divide(i);
         while(n.mod(i).compareTo(BigInteger.ZERO)== 0 ) 
             n = n.divide(i);
     }      
 if(n.compareTo(BigInteger.ONE) > 0)
 result = result.subtract((result.divide(n)));
 return result;
} 
```

它确实给出了准确的结果，当传递一个 1024 位数时它会永远运行（我仍然不确定它是否完成，它已经运行了 20 分钟）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T07:28:37.880

totient 函数有一个公式，它需要对 n 进行素数分解。看[这里](http://en.wikipedia.org/wiki/Euler%27s_totient_function)。

公式为：

```
phi(n) = n * (p1 - 1) / p1 * (p2 - 1) / p2 ....
were p1, p2, etc. are all the prime divisors of n. 
```

请注意，您只需要 BigInteger，而不是浮点数，因为除法始终是精确的。

所以现在问题被简化为找到所有主要因素，这比迭代要好。

这是整个解决方案：

```
int n;  //this is the number you want to find the totient of
int tot = n; //this will be the totient at the end of the sample
for (int p = 2; p*p <= n; p++)
{
    if (n%p==0)
    {
        tot /= p;
        tot *= (p-1);
        while ( n % p == 0 ) 
            n /= p;
    }
}
if ( n > 1 ) { // now n is the largest prime divisor
    tot /= n;
    tot *= (n-1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:40:10.987

您尝试编写的算法相当于将参数分解`n`，这意味着您应该期望它永远运行，实际上直到您的计算机死机或您死机为止。有关更多信息，请参阅 mathoverflow 中的这篇文章：[计算 Euler totient 函数有多难？](https://mathoverflow.net/questions/3274/how-hard-is-it-to-compute-the-euler-totient-function).

另一方面，如果您想要某个具有因式分解的大数的总的值，请将参数作为（素数，指数）对的序列传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T18:30:21.763

etfBig 方法有问题。
欧拉的乘积公式是所有因子的 n*( **(factor-1)** /factor)。注意：Petar 的代码如下：

`tot /= p; tot *= (p-1);`

在 etfBig 方法中，替换`result = result.divide(i);` 为

`result = result.multiply(i.subtract(BigInteger.ONE)).divide(i);`

然后从 2 到 200 进行测试会产生与常规算法相同的结果。

# javascript - 自定义验证规则问题

> ID：13216855
> 
> 赞同：-1
> 
> 时间：2012-11-04T07:22:42.297
> 
> 标签：javascript, jquery, validation, knockout.js

我正在使用 knockout.js 插件。我创建了一个名为`select`selectlist 的自定义验证规则。我创建了一个 jsfiddle ：

[http://jsfiddle.net/fQBxM/1/](http://jsfiddle.net/fQBxM/1/)

我的问题是当我加载页面时，验证消息已经显示，但我只想在用户提交表单时显示它。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:28:16.337

为您的 observable添加一个默认值`'0'`，然后验证不会触发初始值：

```
ko.observable('0').extend({ select: { message : "please select gender" } }) 
```

演示[`JSfiddle`](http://jsfiddle.net/nemesv/KDTB2/)。

# firefox - Firefox 跨域字体

> ID：13216859
> 
> 赞同：1
> 
> 时间：2012-11-04T07:23:21.343
> 
> 标签：firefox, fonts, cross-domain

我正在尝试为我的 Blogger 博客[http://www.mostafa.info](http://www.mostafa.info)编写模板，我需要使用自定义 webfont。在**IE**和**Chrome**中一切正常，但在**Firefox**中 webfont 不会呈现。

如果你用 firefox 和 chrome 查看我的博客，你会发现字体是不同的。

我搜索了很多问题，发现Firefox的问题与跨域字体有关。这些字体必须托管在我自己的 Blogger 博客上（这是不可能的！）。让我提一下，我在 Blogger 中测试了 Google 网络字体，一切顺利！

但问题是如何解决这个问题？任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:37:08.450

我找到了一个好方法；我使用 base64 将我的 webfonts 嵌入到 CSS 中，如下所示：

```
@font-face{
 font-family: "myFontName";
 src: url(data:font/woff;base64,d09GRgABAAAAAGZ0ABEAA...AAA)
} 
```

以这种方式它适用于所有浏览器；）更重要**的是不需要访问服务器的文件系统，**因此我可以在谷歌网站上托管我的 CSS/字体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:01:10.767

> 但问题是如何解决这个问题？

通过让服务器托管字体，发送正确的 CORS 标头以允许您的博主博客访问它们。

# visual-studio-2010 - 为什么 Visual Studio 停止调试我的应用程序？

> ID：13216861
> 
> 赞同：0
> 
> 时间：2012-11-04T07:23:39.377
> 
> 标签：visual-studio-2010, visual-studio-debugging

我的应用程序中有一个非常奇怪的错误（C#，基于 WPF 的 UI）：在某些情况下，如果我取消固定资源管理器，我会收到大量异常（System.NullReferenceException – 对象引用未设置为对象的实例） .

问题是：我找不到这个异常的具体原因，因为 Visual Studio**停止调试**（所以没有堆栈跟踪，也没有异常的证据）。我尝试更改 VS 中的异常处理设置以抛出任何异常而不是处理它，但它没有帮助。

如何找到引发异常的确切位置？

# php - 我试图让我的“详细信息”页面引用通过 techID 链接的服务器的两个单独部分

> ID：13216866
> 
> 赞同：1
> 
> 时间：2012-11-04T07:24:17.837
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

好的，所以我有我的页面“列出客户”，然后链接到“列出工作”添加`?custID=`到 URL 中，然后在我使用的列出工作上，`$_GET["custID"]`所以我的查询使用`custID`来自 URL 的。效果很好，使用他们的 ID 列出了我为所述客户的工作。

我的问题现在出现了，我需要这个页面上的链接来给我的第三页`techID`。但是`techID`in `jobDetails`，所以我的查询不能给他们，`techID`因为它正在查询我的`job`部分。

这是我的“ListJobs.php”页面，在它之前的页面中选择客户时，会使用 url 加载此页面`ListJobs.php?custID=001`（001 是一个示例，它会根据您选择的客户给出数字）。

```
<?php 
// Get data from the database depending on the value of the id in the URL
mysql_select_db($database_con_sim5, $con_sim5);
$query_Recordset1 = "SELECT * FROM job WHERE custID=" . $_GET["custID"] ;
$Rs1 = mysql_query($query_Recordset1);
// Loop the recordset $rs
while($row = mysql_fetch_array($Rs1)) {
  $strName1 = $row['jobID'] . " " . $row['jobDesc'] . " " . $row['computerName'];
  $strLink = "<a href = 'jobDetails.php?jobID=".$row['jobID']."'>".$strName1."</a>";
  // Write the data of the person
  echo "<li>" . $strLink . " </li>";
}
// Close the database connection
mysql_close();
?> 
```

然后按其中一个链接，链接到`jobDetails.php?jobID=`作业编号。我可以在 Job Detail 中显示所有详细信息，但我也需要我`Tech Name`的出现，`Tech Name`不在`Job Details`，而是`Tech ID`在。这是我的工作详细信息页面编码：

```
<?php 
// Get data from the database depending on the value of the id in the URL
mysql_select_db($database_con_sim5, $con_sim5);
$query_Recordset1 = "SELECT * FROM jobDetail WHERE jobID=" . $_GET["jobID"] ;
$query_Recordset2 = "SELECT technician.techName FROM technician 
  WHERE techID=" . $query_Recordset1["techID"] ;
$Rs1 = mysql_query($query_Recordset1);
$Rs2 = mysql_query($query_Recordset2);
while($row1 = mysql_fetch_array($Rs1)) {
  while($row2 = mysql_fetch_array($Rs2)) {
    echo "<dt><strong>Job Note ID:</strong></dt><dd>".$row1["jobNoteID"]."</dd>";
    echo "<dt><strong>Job Notes:</strong></dt><dd>".$row1["jobNotes"]."</dd>";
    echo "<dt><strong>Date Completed:</strong></dt><dd>".$row1["dateCompleted"]."</dd>";
    echo "<dt><strong>Time Spent:</strong></dt><dd>".$row1["timeSpent"]."</dd>";
    echo "<dt><strong>Job ID:</strong></dt><dd>".$row1["jobID"]."</dd>";
    echo "<dt><strong>Technician ID:</strong></dt><dd>".$row1["techID"]."</dd>";
    echo "<dt><strong>Technician Name:</strong></dt><dd>".$row2["techName"]."</dd>";
  }
}
// Close the database connection
mysql_close();
?> 
```

我得到的错误是：

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在 D:\xampp\htdocs\Sim5Server\Pages\jobDetails.php 第 129 行给出

那条线是：

```
while($row2 = mysql_fetch_array($Rs2)) { 
```

我希望我有任何意义。

总而言之，我需要我的最后一页使用主/索引键 techID 显示来自 mysql 技术人员的数据。将 techID 添加到 listJobs 的作业详细信息链接或作业详细信息的第二个 Recordset 中的某种方式。

编辑：我可能应该说这永远不会在网上使用，我只需要它来完成任务。将来，多亏了评论，我将不再使用 mysql_* 我只是在使用它们，因为我的整个工作簿都告诉我们使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:52:52.503

`jobDetails.php`尝试在您的页面中进行此更改

```
$query_Recordset1 = "SELECT * FROM jobDetail WHERE jobID=". (int) $_GET["jobID"];
$Rs1 = mysql_query($query_Recordset1) or die(mysql_error());
while($row1 = mysql_fetch_array($Rs1)) {
  $query_Recordset2 = "SELECT technician.techName FROM technician 
  WHERE techID=" . $row1["techID"] ;
  $Rs2 = mysql_query($query_Recordset2) or die(mysql_error());
  while($row2 = mysql_fetch_array($Rs2)) { 
```

对于第二个查询，您正在使用执行第一个查询的结果资源作为`techID`. 此外，您必须`techName`从`while`循环内部查询以获取作业详细信息，因为只有这样您才能拥有`techID`.

# java - 如何使用 JDBC 在 MySQL 中添加“时间”类型？

> ID：13216868
> 
> 赞同：1
> 
> 时间：2012-11-04T07:24:37.400
> 
> 标签：java, mysql, jdbc

我知道如何“设置”它，但我该如何添加呢？如...

```
 // Add 1 minute to the current 'time' object
    try {
        Connection con = DriverManager.getConnection(url, user, password);
        String sql = "UPDATE Table "
                   + "SET 'Time Field' = 'Time Field' + ? "
                   + "WHERE 'User Column' = 'Random Name'";
        PreparedStatement statement = con.prepareStatement(sql);
        statement.setTime(0, new Time(60000));
    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

我确定我必须使用“ADDITEM(expr1,expr2)”函数，但我该怎么做呢？我觉得这不像只是将它输入到我的字符串中那么容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:31:39.197

您不应该传入 Java 日期/时间：您应该使用 SQL 时间/日期文字或 MySQL 时间/日期函数。无论哪种方式，您不再需要在准备好的语句中使用“时间”变量：

```
// EXAMPLE: add 2 hours to current time
String sql = 
  "UPDATE Table " + 
  "SET 'Time Field' = 'Time Field' + DATE_ADD(NOW(), INTERVAL 2 HOUR) " +
  "WHERE 'User Column' = 'Random Name'"; 
```

以下是可用的 MySql 日期/时间函数：

*   [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:54:54.587

使用 PreparedStatement 类。文档在这里：

[http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-04T07:36:21.820

使用`ADDTIME()`功能如下：

```
 String sql = "UPDATE Table "
               + "SET 'Time Field' = ADDTIME('Time Field', ?) "
               + "WHERE 'User Column' = 'Random Name'"; 
```

然后将参数值设置为所需的值。

# eclipse - AntBuilder 在 Groovy 控制台中有效，但在 Eclipse 中无效

> ID：13216875
> 
> 赞同：4
> 
> 时间：2012-11-04T07:27:09.623
> 
> 标签：eclipse, groovy

我正在运行 Windows 7。以下代码适用于 Groovy 控制台：

```
def fileEx = new File(/Y:\Documents\Test File.txt/)
def copyToFile = new File(/Y:\Documents\Test File - Copied by Groovy and Ant.txt/)

ant = new AntBuilder()
ant.copy(file:fileEx, tofile:copyToFile) 
```

但是当我尝试在 Eclipse 中将它作为 Groovy 脚本运行时，我得到了这个错误：

```
Caught: java.lang.NoClassDefFoundError: org/apache/tools/ant/BuildException
java.lang.NoClassDefFoundError: org/apache/tools/ant/BuildException
    at copyFile.run(copyFile.groovy:4)
Caused by: java.lang.ClassNotFoundException: org.apache.tools.ant.BuildException 
```

我尝试将 ant.jar 添加到 myclasspath 中，包括 Groovy lib 文件夹中的 ant.jar 和 Eclipse 插件 lib 文件夹中的 ant.jar，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T21:12:42.193

看起来[groovy-eclipse 插件](https://github.com/groovy/groovy-eclipse)附带了一个完整安装 groovy 的库子集。除了 eclipse 插件之外，您还需要完整安装[groovy](http://groovy-lang.org/install.html#_download)，您可能已经拥有它。

您应该能够通过转到您的项目并转到 Properties->Java Build Path，然后单击“Libraries”来解决您的问题。“添加外部罐子”并导航到您的完整 groovy 安装。在那里，lib 目录应该有 ant.jar 和 ant-launcher.jar。将它们都添加。这应该可以解决这个问题（并将潜在问题排队等待调试）。

# php - 创建此实例

> ID：13216878
> 
> 赞同：-2
> 
> 时间：2012-11-04T07:27:31.813
> 
> 标签：php, instance

我有数百个类模型（MVC 系统模型）。
我如何用关系类创建实例？

类中的示例有这样的方法：

```
class object {
    /**
     * Simply create new instance of this object
     * @return object
     */
    function createNewInstance() {
        $class_name = __CLASS__;
        $return = new $class_name;
        return $return;
    }
} 
```

正如我们所看到的，`__CLASS__`如果这个类，我用来获取关系名称。
有没有更好的方法来创建实例？
我听说有反射方法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:06:04.243

看来你需要 get_class() [http://codepad.org/yu6R1PDA](http://codepad.org/yu6R1PDA)

```
<?php
class MyParent {
    /**
     * Simply create new instance of this object
     * @return object
     */
    function createNewInstance() {
        //__CLASS__ here is MyParent!
        $class_name = get_class($this);
        return new $class_name();
    }
}

class MyChild extends MyParent {
   function Hello() {
    return "Hello";
    }
}

$c=new MyChild();
$d=$c->createNewInstance();
echo $d->Hello(); 
```

[这](http://codepad.org/UZken7ag)也有效：

```
class MyParent {
    /**
     * Initialise object, set random number to be sure that new object is new
     */
    function __construct() {
    $this->rand=rand();
    }

}

class MyChild extends MyParent {

   function Hello() {
    return "Hello ".$this->rand;
    }
}

$c=new MyChild();
$d=new $c;
echo $c->Hello()."\n";
echo $d->Hello()."\n"; 
```

# xslt - 将字符串与 xsl 中 xsl 标记中的值进行比较：

> ID：13216881
> 
> 赞同：0
> 
> 时间：2012-11-04T07:28:03.820
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我想在 xsl 中使用 if 来比较两个值，但我想将一个字符串与一个我可以通过 xsl 标记访问它的值进行比较。如果我与一个值（没有 xsl 标签）进行比较，它可以工作。我是说：

```
<xsl:if test="$prev4 &gt;0"> 
```

但休耕有错误：

```
<xsl:if test="$prev4 &gt;0<xsl:value-of select="@wholeCount"/>"> 
```

我不知道如何进行比较。你能帮我么？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T15:58:17.310

**实际上，根本没有必要将第二个参数放在变量中——所以当前接受的答案告诉你错误**。

只需使用（在 XSLT 1.0 和 XSLT 2.0 中）：

```
<xsl:if test="$prev4 > @wholecounter"> 
```

**这是一个完整的例子**：

**这个简单的 XML 文档**：

```
<t wholecounter="1"/> 
```

**当使用以下转换进行处理时**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="prev4" select="3"/>

 <xsl:template match="/*">
     <xsl:if test="$prev4 > @wholecounter">
      $prev4 is greater than @wholecounter
     </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**产生了想要的正确结果**：

```
 $prev4 is greater than @wholecounter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:31:23.523

定义一个 XSL 变量，如下所示：

```
 <xsl:variable name="counter" select="@wholeCount"/> 
```

然后使用变量进行比较：

```
 <xsl:if test="$prev4 &gt; $counter"> 
```

# android - 在android库项目中停止proguard破坏性注释

> ID：13216882
> 
> 赞同：3
> 
> 时间：2012-11-04T07:28:12.277
> 
> 标签：android, annotations, proguard

我在我的游戏中使用 GREE sdk 来处理社交内容。在导出签名的 apk 时，proguard 弄乱了 GREE sdk 中的一些自定义注释。（我在我的游戏中使用 GREE sdk 作为库项目）

如果我什么都不添加到 proguard 配置中。它也混淆了 GREE SDK，当我尝试安装和运行游戏时，它会抛出“注入（gree sdk 中的自定义注释）”缺少注释异常。

首先，我添加了这个 keep 语句来跳过对整个 GREE SDK 的混淆。

```
-keep class net.gree.** {
  public protected private *;
} 
```

这帮助我避免了 sdk 代码被混淆，但“注释”仍然被删除，我仍然收到同样的异常。

然后我尝试`-keepattributes`一一添加这些语句，但没有一个对我有帮助。

```
a) -keepattributes *Annotation*
b) -keepattributes Inject
c) -keepattributes net.gree.asdk.core.inject.Inject
d) -keepattributes @net.gree.asdk.core.inject.Inject 
```

(d) 选项抛出找不到文件`/CLASSPATH OF PRJECT/net.gree.asdk.core.inject.Inject`

这是我的 proguard 配置文件：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
-keepattributes *Annotation*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-dontwarn org.mockito.cglib.**
-dontwarn sun.reflect.**
-dontwarn android.test.**

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keep class net.gree.** {
  public protected private *;
} 
```

我试图摆脱的例外：

```
11-06 12:25:41.718: E/AndroidRuntime(10764): java.lang.RuntimeException: Unable to create application com.mygame.Application: java.lang.RuntimeException: Could not find a suitable constructor in net.gree.asdk.core.track.TrackItemStorageImpl. Classes must have either one (and only one) constructor annotated with @Inject or a zero-argument constructor that is not private.
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4154)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.app.ActivityThread.access$1300(ActivityThread.java:130)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.os.Looper.loop(Looper.java:137)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at java.lang.reflect.Method.invokeNative(Native Method)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at java.lang.reflect.Method.invoke(Method.java:511)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at dalvik.system.NativeStart.main(Native Method)
11-06 12:25:41.718: E/AndroidRuntime(10764): Caused by: java.lang.RuntimeException: Could not find a suitable constructor in net.gree.asdk.core.track.TrackItemStorageImpl. Classes must have either one (and only one) constructor annotated with @Inject or a zero-argument constructor that is not private.
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.inject.Binder.getConstructorOf(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.inject.Binder.createInstance(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.inject.Binder.getOrCreateInstance(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.inject.Binder.createInstance(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.inject.Binder.finishBinding(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.inject.InternalInjector.createInjector(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.Injector.init(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.core.Core.initialize(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at net.gree.asdk.api.GreePlatform.initialize(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at com.aqif.speedymind.application.SpeedyApplication.onCreate(Unknown Source)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:999)
11-06 12:25:41.718: E/AndroidRuntime(10764):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4151) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T08:56:37.040

您应该在 proguard 文件中添加一些配置，以使用 Inject 注释保留带注释的类（构造函数和字段）：

```
 # keeps all fields and Constructors with @Inject
 -keepclassmembers,allowobfuscation class * {
    @com.google.inject.Inject <fields>;
    @com.google.inject.Inject <init>(...);
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:42:18.460

这对我有用

```
################### GREE SDK ##################
-keepclassmembers,allowobfuscation class * {
    @net.gree.asdk.core.inject.Inject <fields>;
    @net.gree.asdk.core.inject.Inject <init>(...);
}

##################### GSON #####################
-keepattributes Signature
-keep class sun.misc.Unsafe { *; }

 # Model classes parsed by GSON
-keep class net.gree.asdk.** {
    public protected private *;
} 
```

它类似于另一个响应，但使用了 GREE 特定的注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T08:15:57.887

而不是这样做 -keep class net.gree.** { public protected private *; }

我不得不这样做

```
-keep class net.gree.** {
   *;
} 
```

# c# - 鼠标停止移动后触发的 WPF 事件

> ID：13216890
> 
> 赞同：4
> 
> 时间：2012-11-04T07:29:38.250
> 
> 标签：c#, .net, wpf

我正在编写一个 WPF 应用程序。一旦鼠标停止移动，我想触发一个事件。

这就是我尝试做到的方式。我创建了一个倒计时到 5 秒的计时器。每次鼠标移动时，此计时器都会“重置”。这个想法是，鼠标停止移动的那一刻，定时器停止重置，从5倒计时到0，然后调用tick事件处理程序，显示一个消息框。

好吧，它没有按预期工作，它让我收到大量警报消息。我究竟做错了什么？

```
DispatcherTimer timer;

private void Window_MouseMove(object sender, MouseEventArgs e)
{
    timer = new DispatcherTimer();
    timer.Interval = new TimeSpan(0, 0, 5);
    timer.Tick += new EventHandler(timer_Tick);
    timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
    MessageBox.Show("Mouse stopped moving");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T08:20:51.023

不必在每个 MouseMove 事件上都创建一个新计时器。只需停止并重新启动它。还要确保它在 Tick 处理程序中停止，因为它应该只被触发一次。

```
private DispatcherTimer timer;

public MainWindow()
{
    InitializeComponent();

    timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(5) };
    timer.Tick += timer_Tick;
}

void timer_Tick(object sender, EventArgs e)
{
    timer.Stop();
    MessageBox.Show("Mouse stopped moving");
}

private void Window_MouseMove(object sender, MouseEventArgs e)
{
    timer.Stop();
    timer.Start();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T07:41:44.333

你需要`unhook`在`event`像这样再次钩住它之前 -

```
private void poc_MouseMove(object sender, MouseEventArgs e)
{
   if (timer != null)
   {
      timer.Tick-= timer_Tick;
   }
   timer = new DispatcherTimer();
   timer.Interval = new TimeSpan(0, 0, 5);
   timer.Tick += new EventHandler(timer_Tick);
   timer.Start();
} 
```

**解释**

您所做的是每当鼠标移动时，您都会创建一个新的 DispatcherTimer 实例并将 Tick 事件挂钩到它，而无需`unhooking the event for previous instance`. 因此，一旦所有实例的计时器停止，您就会看到被淹没的消息。

另外，你应该解开它，否则之前的实例不会是`garbage collected`，因为它们仍然是`strongly referenced`.

# magento - 使用 magmi 进口产品

> ID：13216891
> 
> 赞同：1
> 
> 时间：2012-11-04T07:29:42.667
> 
> 标签：magento, magmi

我尝试使用 导入一些产品`Magmi`，之后，我找不到我已经拥有的客户选项。甚至`sku,name,description,price,Size:drop_down:1 T-Shirt1,T-Shirt,A T-Shirt,5.00,Small:fixed:0:-SM|Medium:percent:2:-MED|Large:percent:3:-LRG T-Shirt2,T-Shirt2,Another T-Shirt,6.00,XS:fixed:0:-XS:1|S:fixed:0:-S:2|M:fixed:1:-M:3`

有什么我没有做的吗？我应该点击插件吗？我应该点击哪一个？

在我的文件（var/import）中，我有很多 csv 文件，但是当我选择它们并运行时。它会像“找不到 csv”一样抛出。它有什么问题？

我的`Magento`版本是 1.4.1.1 ，`Magmi`版本是 0.7.17a。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:36:51.077

问题是文件读取 CSV 的路径。当您打开错误时，请查看正在查找文件的路径并更改属性以使其正确。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-01T14:30:04.430

在 magmi UI 上的 CSV 基本目录中，尝试更改`var/import`为`/var/import`

# html - 需要帮助来创建 div 结构

> ID：13216893
> 
> 赞同：0
> 
> 时间：2012-11-04T07:30:31.760
> 
> 标签：html

我想创建 div 结构，因为我已附加图像。请任何人都可以帮助我。

![在此处输入图像描述](../Images/6311f4485e3085a9558f9f2d5e2af9d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:33:24.787

您可以像下面那样执行此操作并通过浮动定位它们

```
<div class='outer'>
<div class='left'></div>
<div class='tow'>
   <div class='up'></div>
     <div class='cbt'></div>
   <div class='jimit'></div>
     <div class='one'></div>
   <div class='below'></div>
</div>
<div class='right'></div> 
```

css

```
.outer,leftm.right,.tow{float:left;}
.left,.right{width:25%;}
.tow{width:50%;}
.cbt{clar:both} 
```

![在此处输入图像描述](../Images/192a47bca6e5fc6672895d9a627d806d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:33:52.667

为此使用绝对位置 -[**演示**](http://jsfiddle.net/xV28x/)

```
.center {
   position: absolute;
   width: 300px;
   height: 200px;
   left: 50%;
   top: 50%;
   margin-left: -150px; /* Half of div width */
   margin-top: -100px; /* Half of div height */
} 
```

# javascript - 如何让javascript打印一个json对象（从ruby发送）而不被解释为html？

> ID：13216900
> 
> 赞同：4
> 
> 时间：2012-11-04T07:32:20.630
> 
> 标签：javascript, jquery, html, json, escaping

ruby/sinatra 为 ajax 请求提供“object.to_json”：

```
 ...
  content_type :json
  adam.to_json
end
#--> #<Human:0x10aa540 @x=68, @y=24, @name="Adam", @age=50> 
```

带有 jquery 的 js：

```
...
$("#player").html(data);
... 
```

导致 div 仅填充“#”字符。

console.log(data) 显示：

```
#<Human:0x10aa540 @x=68, @y=24, @name="Adam", @age=50> 
```

所以我猜这是因为“<”和其他字符被解释为html。我怎样才能避免它并在网页中显示该对象，因为它出现在调试控制台上？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:12:23.723

如果有帮助：

```
data.replace(/\</gi,"&lt;"); 
```

[jsfiddle](http://jsfiddle.net/Ld3zR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T22:09:09.683

您可以要求浏览器为您转义 HTML，方法是将其添加到临时块并检索转义的内容。这样，您可以确保所有 HTML 标记都被转义，而不仅仅是`>`and `<`：

```
var temp_div = document.createElement('div'); // Create temporary div

temp_div.appendChild(document.createTextNode(data)); // Insert data as Text
data = temp_div.innerHTML; // Get Text escaped 
```

[jsFiddle](http://jsfiddle.net/u6srr/)

# search - 用什么来搜索 10 亿个文本文档？

> ID：13216901
> 
> 赞同：-3
> 
> 时间：2012-11-04T07:32:25.817
> 
> 标签：search

可以告诉我使用什么编程语言来搜索十亿个文本文档。txt 文件大小为 3 KB。C++/Java 怎么样？搜索将仅通过 txt 文件的名称进行。

谢谢大家的回答，我决定用C++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:38:57.000

一种特定的语言可能不是在这里使用的正确标准。

有许多搜索工具可以很好地搜索大型数据集，许多不同的编程语言都可以使用这些工具。

[Sphinx](http://sphinxsearch.com/)就是一个例子，它是一个搜索服务器。您可以在多种语言中使用它的索引，例如带有[ThinkingSphinx](http://freelancing-god.github.com/ts/en/)的 Ruby 。[来自 Apache 的Lucene](http://lucene.apache.org/core/)是另一种搜索技术，它适用于用 Java 编写的应用程序（但也有[.NET](http://lucenenet.apache.org/)和[Ruby](http://ferret.davebalmain.com/)端口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:37:56.107

假设您的意思是从十亿个文档中搜索一个文档，您几乎可以使用所有可用的编程语言。简单的选择可能是 python 和 java。一种更方便的方法可能只是使用 shell 进行搜索，然后运行 ​​.bashrc 之类的 bash 命令`sudo find / -name "filename"`。

# html - 一种简单的 html/css 表格对齐方式

> ID：13216902
> 
> 赞同：0
> 
> 时间：2012-11-04T07:32:51.183
> 
> 标签：html, css, html-table

请检查此示例： http: [//jsfiddle.net/F8QE5/](http://jsfiddle.net/F8QE5/) 我想将标签“密码”始终保留在`<td>`. 目前它正在进入`<td>`. 我将在右侧`<td>`动态添加更多字段。因此，“密码”标签始终应位于顶部位置。它不应该移动到`<td>`.

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:44:18.697

试试`vertical-align: text-top;`你的 CSS。

[http://www.w3schools.com/cssref/pr_pos_vertical-align.asp](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:44:35.293

做这个

```
<td width="150" style="vertical-align:text-top;"> 
   Password:
</td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T07:46:05.000

```
<td width="150" valign="top">
     Password:
</td> 
```

您可以[在 w3.org上查看更多信息](http://www.w3.org/TR/html401/struct/tables.html#h-11.3.2)

# javascript - 在 Firefox 扩展中使用 XMLHttpRequest 获取二进制数据

> ID：13216903
> 
> 赞同：4
> 
> 时间：2012-11-04T07:33:07.283
> 
> 标签：javascript, ajax, firefox, firefox-addon

我正在尝试从我的 Firefox 扩展下载一些二进制数据。当我尝试将创建的 XMLHttpRequest 设置为 arraybuffer 模式时：

```
oHTTP = new XMLHttpRequest();   
oHTTP.responseType = "arraybuffer"; 
```

错误

```
InvalidStateErr
An attempt was made to use an object that is not, or is no longer, usable 
```

被抛出。

是否有另一种方法可以在 Firefox 扩展中下载二进制数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T14:20:47.373

您必须先调用该`open`方法。

# python - python 3无法写入文件

> ID：13216907
> 
> 赞同：2
> 
> 时间：2012-11-04T07:34:03.857
> 
> 标签：python, file, python-3.x, attributeerror

我的代码是：

```
from random import randrange, choice
from string import ascii_lowercase as lc
from sys import maxsize
from time import ctime

tlds = ('com', 'edu', 'net', 'org', 'gov')

for i in range(randrange(5, 11)):
    dtint = randrange(maxsize)                      
    dtstr = ctime()                                  
    llen = randrange(4, 8)                              
    login = ''.join(choice(lc)for j in range(llen))
    dlen = randrange(llen, 13)                          
    dom = ''.join(choice(lc) for j in range(dlen))
    print('%s::%s@%s.%s::%d-%d-%d' % (dtstr, login,dom, choice(tlds),
                                  dtint, llen, dlen), file='redata.txt') 
```

我想在文本文件中打印结果，但出现此错误：

```
dtint, llen, dlen), file='redata.txt')
AttributeError: 'str' object has no attribute 'write' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T07:37:11.200

`file`应该是文件对象，而不是文件名。文件对象有`write`方法，`str`对象没有。

从文档上[`print`](http://docs.python.org/3/library/functions.html#print)：

> *文件*参数必须是带有方法的对象`write(string)`；如果它不存在或`None`,`sys.stdout`将被使用。

另请注意，该文件应打开以进行写入：

```
with open('redata.txt', 'w') as redata: # note that it will overwrite old content
    for i in range(randrange(5,11)):
        ...
        print('...', file=redata) 
```

[在此处](http://docs.python.org/3/library/functions.html#open)查看有关该`open`功能的更多信息。

# php - PHP 5.3 中的 call_user_func_array() 是否更改？

> ID：13216908
> 
> 赞同：-1
> 
> 时间：2012-11-04T07:34:11.810
> 
> 标签：php, callback

功能有`call_user_func_array()`变化`PHP 5.3`吗？因为我的模块有多次调用这个函数，但是升级到`PHP 5.3`. 我跟踪了代码，它似乎没有调用这个函数。

我应该改变它吗？

编辑：

一些代码削减：

```
function complete($message, $endpoint, $return_to)
{
    $mode = $message->getArg(Auth_OpenID_OPENID_NS, 'mode',
                             '<no mode set>');

    $mode_methods = array(
                          'cancel' => '_complete_cancel',
                          'error' => '_complete_error',
                          'setup_needed' => '_complete_setup_needed',
                          'id_res' => '_complete_id_res',
                          );
    $method = Auth_OpenID::arrayGet($mode_methods, $mode,
                                    '_completeInvalid');
    $method = '_complete_id_res';
    return call_user_func_array(array(&$this, $method),
                                array($message, $endpoint, $return_to));
}

/**
 * @access private
 */
function _complete_id_res($message, &$endpoint, $return_to)
{  
    $user_setup_url = $message->getArg(Auth_OpenID_OPENID1_NS,
                                       'user_setup_url');

    if ($this->_checkSetupNeeded($message)) {
        return new Auth_OpenID_SetupNeededResponse(
            $endpoint, $user_setup_url);
    } else {
        return $this->_doIdRes($message, $endpoint, $return_to);
    }
} 
```

如果我把 die('*'); 第二个函数中的命令，它不会死，表明它没有进入它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:41:13.067

为什么不在[php.net](http://php.net/manual/en/function.call-user-func-array.php)上检查呢？

> 变更日志
> 
> ```
> Version  Description 
> ```

```
5.3.0    The interpretation of object oriented keywords like parent and self has
         changed.   Previously, calling them using the double colon syntax would emit an 
         E_STRICT warning because they were interpreted as static. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T09:34:42.580

现在解决了。问题是函数参数由函数中的引用 (&) 定义，但通过值传递。我`&`从他们那里删除了，问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T07:41:22.003

[是的，它已经改变了。](http://php.net/manual/en/function.call-user-func-array.php#refsect1-function.call-user-func-array-changelog)

> 5.3.0：对parent、self等面向对象关键字的解释发生了变化。以前，使用双冒号语法调用它们会发出`E_STRICT`警告，因为它们被解释为静态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T09:25:15.720

现在问题已经解决了。这是因为使用 reference(&) 定义函数参数，但调用是带有值的。我从函数定义中删除了“&”，它运行良好。

# html - 100% 内容高度 - px

> ID：13216909
> 
> 赞同：1
> 
> 时间：2012-11-04T07:34:13.383
> 
> 标签：html, css, height

我有一个高度为 100% 的页面：

```
<div id="wrapper">
    <header id="header" class="clearfix">

    </header>
    <div class="main-container clearfix">
        <aside id="sideLeft">

        </aside><!-- #sideLeft -->
        <div id="content">
            <div id="map_canvas"></div>
        </div>
    </div> <!-- #main-container -->
</div><!-- #wrapper --> 
```

CSS：

```
* {
    margin: 0;
    padding: 0;
}
html, body {
    height: 100%;
    min-height: 100%;
}
#wrapper {
    width: 100%;
    height: 100%;
}
#header {
    width: 100%;
height: 45px;
}
.main-container {
    width: 100%;
    height: 100%;
    min-height: 100%;
}

#content {
    height: 100%;
margin-left: 20%;
}

#map_canvas {
    height: 100%;
    width: 100%;
}
#sideLeft {
    height: 100%;
    width: 20%;
    float: left;
} 
```

但我想让内容 100% - 标题的高度（以 px 为单位），不要在页面上显示滚动。

我尝试添加`position: absolute;`，`#header`但`.main-container`没有帮助（滚动仍在显示）。

现场示例：http: [//indoor.powerhtml.ru/30/index.html](http://indoor.powerhtml.ru/30/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:37:32.150

CSS 不能在页面上执行计算和操作，它只是一个样式表。为此，您必须使用 JS。

做你想做的事的jQuery片段是

```
$("#header").height($("#header").height()); //This automatically converts % to px 
```

[看看这个](http://jsfiddle.net/Starx/rZRaQ/)

# cuda - NVCC 5.0 和 OpenACC

> ID：13216910
> 
> 赞同：7
> 
> 时间：2012-11-04T07:34:17.003
> 
> 标签：cuda, nvcc, openacc

根据[英伟达网站](https://developer.nvidia.com/cuda-toolkit)：

> “CUDA 工具包补充并完全支持使用 OpenACC 指令进行编程。”

这是否意味着可以使用编译`nvcc`器编译 OpenACC 程序（pargma 和 API）？或者这意味着只支持运行时例程调用？

不幸的是，这些天我无法安装 CUDA Toolkit 5.0 来获得答案。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T13:12:30.977

要使用 OpenACC 指令编译程序，您需要使用[OpenACC 编译器](https://developer.nvidia.com/openacc)- 目前这意味着 Cray、PGI 或 CAPS。

OpenACC 编译器使用 CUDA Toolkit 的一部分，根据实现，它们可以使用各种组件，例如`ptxas`将 PTX 组装成机器代码。该工具包还包括可以与 OpenACC 互操作的库，例如 cuBLAS/cuFFT/cuSPARSE 等，因此您可以在同一个应用程序中同时使用库和 OpenACC - 您还可以与 CUDA C/C++ 互操作。

`nvcc`它本身不是 OpenACC 编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T13:36:03.740

存在[accULL](http://accull.wordpress.com/)，OpenACC 研究实现（仅限 C，OpenACC 1.0）。

# php - 抓取 reddit 评论并使用 php 将它们归档到数据库中

> ID：13216914
> 
> 赞同：0
> 
> 时间：2012-11-04T07:34:28.797
> 
> 标签：php, json

所以我知道基本的 PHP，不久前我编写了一个基本的 mysql/php 库存系统。我想获得更多经验。我的想法是获取 reddit 评论，将它们显示在页面上，然后将它们保存在数据库中。我的问题是我不知道如何获取和理解 JSON 数据。

例如，这是一个指向 reddit 线程的 JSON 链接：[http ://www.reddit.com/r/blog/comments/117ckb/introducing_three_new_hires/.json](http://www.reddit.com/r/blog/comments/117ckb/introducing_three_new_hires/.json)

**目标**：

输入框 -> 输入框中的 reddit 唯一线程 ID (http://www.reddit.com/r/blog/comments/<6 位唯一 ID>) -> 在页面上加载 reddit 评论

这是我目前的目标，非常感谢在处理 JSON 时朝着正确的方向轻推。我知道我可以只用谷歌搜索它，但我发帖是希望有人有上述经验并提供他们在该主题上的专业知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:27:16.870

Here's a starting point:

```
$download=json_decode(file_get_contents('http://www.reddit.com/r/blog/comments/117ckb/introducing_three_new_hires/.json'));

    foreach ($download as $articles){

         foreach ($articles->data->children as $article){

                 print_r($article);
                   }
             } 
```

Please note: I recommend using Curl instead of get_file_contents() - it's a lot faster!

# java - 如何设置 JAX-WS 客户端以使用 ISO-8859-1 而不是 UTF-8？

> ID：13216915
> 
> 赞同：11
> 
> 时间：2012-11-04T07:34:43.570
> 
> 标签：java, web-services, encoding, http-headers, jax-ws

我想将我的 JAX-WS 客户端配置为在**ISO-8859-1**中发送消息。当前使用**UTF-8**。

这是客户尝试做的事情：

```
Map<String, Object> reqContext = ((BindingProvider) service).getRequestContext();
Map httpHeaders = new HashMap();
httpHeaders.put("Content-type",Collections.singletonList("text/xml;charset=ISO-8859-1"));
reqContext.put(MessageContext.HTTP_REQUEST_HEADERS, httpHeaders); 
```

但此设置被忽略，tcpmon 显示服务器收到以下内容：

```
POST /service/helloWorld?WSDL HTTP/1.1
Content-type: text/xml;charset="utf-8"
Soapaction: "helloWorld"
Accept: text/xml, multipart/related, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
User-Agent: Oracle JAX-WS 2.1.5
Host: 1.1.1.1:8001
Connection: keep-alive
Content-Length: 4135

<?xml version='1.0' encoding='UTF-8'?>
<S:Envelopexmlns:S="http://schemas.xmlsoap.org/soap/envelope/">... 
```

因此，该设置被覆盖并在 HTTP 标头和 XML 消息中使用 UTF-8。该服务由以 UTF-8 编码的 WSDL 定义。

**问：**我是否应该重新定义服务 WSDL 以使用 ISO-8899-1 进行编码，然后重新生成客户端？或者，是我没有正确设置 HTTP 标头吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-31T10:02:38.420

使用处理程序：

```
public class MyMessageHandler implements SOAPHandler<SOAPMessageContext> {

@Override
public boolean handleMessage(SOAPMessageContext context) {
    Boolean outbound = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
    if (outbound.booleanValue()) {
        try {
            context.getMessage().setProperty(SOAPMessage.CHARACTER_SET_ENCODING,
                            "ISO-8859-1");
        }
        catch (SOAPException e) {
            throw new RuntimeException(e);
        }
    }
    return true;
} 
```

并注册处理程序：

```
 BindingProvider bindProv = (BindingProvider) service;
    List<Handler> handlerChain = bindProv.getBinding().getHandlerChain();
    handlerChain.add(new MyMessageHandler ()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-22T02:16:35.433

jaypi 的回答似乎是正确的。但我需要添加一些默认实现。也很容易内联：

更新：我猜你必须明确设置 handlerChain。更改 getHandlerChain 的结果将无济于事。

```
 List<Handler> chain = bindingProvider.getBinding().getHandlerChain();
    chain.add(new SOAPHandler<SOAPMessageContext>() {
      @Override
      public boolean handleMessage(SOAPMessageContext context) {
        LOG.info("BaseService.handleMessage" + context);
        Boolean outbound = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        if (outbound.booleanValue()) {
          try {
            context.getMessage().setProperty(SOAPMessage.CHARACTER_SET_ENCODING, "ISO-8859-1");
          } catch (Exception e) {
            throw new RuntimeException(e);
          }
        }
        return true;        
      }

      @Override
      public boolean handleFault(SOAPMessageContext context) {
        return true;
      }

      @Override
      public void close(MessageContext context) {
      }

      @Override
      public Set<QName> getHeaders() {
        return null;
      }      
    });
    bindingProvider.getBinding().setHandlerChain(chain); 
```

# android - 如何从片段本身替换活动的片段？

> ID：13216916
> 
> 赞同：57
> 
> 时间：2012-11-04T07:34:44.790
> 
> 标签：android, android-fragments

我的应用程序在其 Activity 中有一个 Fragment。我想以编程方式用当前片段本身的另一个片段替换片段。

例如，如果我单击片段内的一个按钮，该片段应该被另一个片段替换，但活动应该保持不变。

可能吗？如果是这样，该怎么做？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-04T08:11:29.243

来自官方文档：

```
// Create new fragment and transaction
Fragment newFragment = new ExampleFragment();
FragmentTransaction transaction = getFragmentManager().beginTransaction();

// Replace whatever is in the fragment_container view with this fragment,
// and add the transaction to the back stack
transaction.replace(R.id.fragment_container, newFragment);
transaction.addToBackStack(null);

// Commit the transaction
transaction.commit(); 
```

在此示例中，newFragment 替换了`R.id.fragment_container`ID 标识的布局容器中当前存在的任何片段（如果有）。通过调用`addToBackStack()`，被替换的片段被保存到后退堆栈中，因此用户可以通过按“后退”按钮来反转事务并带回前一个片段。

您所描述的行为正是片段的设计目的。请阅读官方指南以彻底了解片段，这将解决您的所有问题。

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-11-04T18:31:03.880

调用activity来替换fragment其实很简单。

您需要转换 getActivity()：

```
((MyActivity) getActivity()) 
```

然后你可以从 MyActivity 调用方法，例如：

```
((MyActivity) getActivity()).replaceFragments(Object... params); 
```

当然，这假设您的活动中有一个处理片段替换过程的 replaceFragments() 方法。

**编辑：** @ismailarilik 在此代码中添加了可能的 replaceFragments 代码，下面的第一条评论由@silva96 编写：

replaceFragments 的代码可以是：

```
public void replaceFragments(Class fragmentClass) {
    Fragment fragment = null;
    try {
        fragment = (Fragment) fragmentClass.newInstance();
    } catch (Exception e) {
        e.printStackTrace();
    }
    // Insert the fragment by replacing any existing fragment
    FragmentManager fragmentManager = getSupportFragmentManager();
    fragmentManager.beginTransaction().replace(R.id.flContent, fragment)
            .commit();
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-11-04T18:48:14.783

请注意，片段不应**直接**替换自身或任何其他片段。片段应该是单独的实体。片段应该做的是通知其父活动发生了一些事件。但是，再一次，决定如何处理它**不是一个片段工作！**决定即替换手机上的片段，但即在平板电脑上的现有片段中添加另一个片段应该是活动。所以你基本上是在设计上做错了什么。

而且，正如其他人已经提到的，您的活动应该使用 FragmentManager （“本机”或来自兼容性库）来完成这项工作（如`replace()`or`add()`或`remove()`）：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-27T23:32:03.920

正如 Marcin 所说，你不应该让一个片段开始另一个片段或活动。处理这种情况的更好方法是为主要活动创建一个回调实现来处理请求，例如启动一个新片段。 [这](http://developer.android.com/guide/components/fragments.html#EventCallbacks)是 android 开发者指南中的一个很好的例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-02T15:04:50.523

有一种有效的方法；只需（在片段中）执行以下操作：

```
getFragmentManager().beginTransaction()
.add(R.id. container_of_this_frag, new MyNewFragment())
.remove(this)
.commit(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-24T20:13:40.473

这对我有用：

```
getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,
                    new MenuFragment()).commit(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-06T19:26:29.587

使用嵌套片段时，我们不希望每个内部片段替换都转到最外部的活动。允许片段通知其父片段它想要更改为另一个片段的机制可能很有用。

这是我在 Kotlin 中的代码，我认为它很容易翻译成 java。

```
interface FragmentNavigator {
    fun navigateTo(fragment: Fragment)
}

class NavigableFragment: Fragment() {
    var navigator: FragmentNavigator? = null
    override fun onDetach() {
        super.onDetach()
        navigator = null
    }
} 
```

内部片段需要扩展`NavigableFragment`，并使用以下代码将自身更改为另一个片段。

```
navigator?.navigateTo(anotherFragment) 
```

外部活动或片段需要实现`FragmentNavigator`和覆盖`navigateTo`。

```
override fun navigateTo(fragment: Fragment) {
    supportFragmentManager.beginTransaction().replace(view_id, fragment).commit()
}

//Use childFragmentManager instead of supportFragmentManager a fragment 
```

最后在外部活动或片段中，覆盖`onAttachFragment`

```
override fun onAttachFragment(fragment: Fragment?) {
    super.onAttachFragment(fragment)
    if(fragment is NavigableFragment) {
        fragment.navigator = this
    }
} 
```

# php - php 多个会话名称或子会话名称？

> ID：13216921
> 
> 赞同：0
> 
> 时间：2012-11-04T07:36:23.073
> 
> 标签：php, session, cookies

我的脚本正确有两个会话称为

```
$_SESSION['mypic'] 
```

和

```
$_SESSION['mypicsrc'] 
```

我可以将这两个会话和子会话结合起来吗？像这样：

```
$_SESSION['mypic']
$_SESSION['mypic']['src'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T07:38:35.597

实际上，您在那里只有一个会话，其值存储在 $_SESSION 中。

您可以像任何其他变量一样更改它们；

```
$_SESSION['mypic']['src'] = $_SESSION['mypicsrc']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:39:26.463

$_SESSION 全局变量是一个只存储字符串的数组。如果你想在 $_SESSION 变量中存储一个数组，你必须先序列化它

```
$data = array( 'src' => '' );
$_SESSION['mypic'] = serialize($data); 
```

然后要让它回来，你必须反序列化

```
$data = deserialize($_SESSION['mypic']); 
```

但是，您应该将数据存储在数据库中，然后将 ID 或对该特定记录的引用存储在 $_SESSION 中。

# java - 将一个值分解为 2 的幂

> ID：13216923
> 
> 赞同：3
> 
> 时间：2012-11-04T07:36:40.903
> 
> 标签：java

我需要实现一个函数，它使用 java 将一个值分解为 2 的幂。

> 例如：14= 8 + 4 + 2

我需要找到值被分解的两个幂。对于上面的例子，我需要 2,3,1 作为输出。我怎么能实现呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T07:41:08.720

利用 Java 使用的二进制表示。我不知道您希望 2 的幂采用什么形式，但是您可以通过移位和逐位`&`1 来逐位循环遍历这些位以测试每个位。每个 1 位代表总和中 2 的幂。

例如：

```
List<Integer> powers = new ArrayList<Integer>();
n = . . .; // something > 0
int power = 0;
while (n != 0) {
    if ((n & 1) != 0) {
        powers.add(1 << power);
        // or, if you just need the exponents:
        // powers.add(power);
    }
    ++power;
    n >>>= 1;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-04T07:47:08.837

由于整数已经表示为 2 的幂，并且 Java 有一组位的集合，我将使用这两个。

```
public static void main(String[] args) {
    System.out.println(bitsSet(14));
}

public static BitSet bitsSet(long num) {
    BitSet bitSet = new BitSet();
    for (int i = 0; i < 64; i++)
        if (((num >>> i) & 1) != 0)
            bitSet.set(i);
    return bitSet;
} 
```

印刷

```
{1, 2, 3} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T07:47:21.207

为此，您通常使用按位运算，即移位 (<<,>>,>>>) 和按位与 (&) 运算符，因为计算机中整数的内部表示已经是二进制的，即你需要什么。

在二进制表示中，每个整数值都是 2 的幂的组合：1、2、4、8、16、32、...

所以，十进制的 14 是二进制的 1110：8 + 4 + 2 + 0。

如果您追求一些不错的通用算法，您可能希望开始将十进制数分解为 10 的幂，然后将您的解决方案扩展到其他基数，例如 2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T07:53:45.113

您可以简单地从该值中减去 2 并继续减去后续更高的幂。

```
int x = 0;
int value = args[0];
for (i=0, (value - Math.pow(2, i)) >= 0, i++) {
    value = value - Math.pow(2, i);
    x++;
}
for (i=0, i<x, i++) {
    System.out.println("addent: " + Math.pow(2, i);
} 
```

# c# - 向 sql server 2008 中的表添加记录后如何更新另一个表

> ID：13216924
> 
> 赞同：1
> 
> 时间：2012-11-04T07:36:42.133
> 
> 标签：c#, sql, sql-server, sql-server-2008, triggers

我在 SQL Server 2008 中创建了两个相同的表。

我需要的是：

**将插入的最新数据添加`table1`到`table2`.**

那可能吗？

诸如服务、触发器或存储过程之类的东西？

我认为我必须使用触发器，但我不知道如何。

我有这两张表：

```
table1  ( field1,field2,field3 )
table2  ( field1,field2,field3 ) 
```

当我插入 table1 时，我需要按以下过程更新 table2：

```
> IF NotExist(field1=value) in table2 THEN INSERT Into table2 ELSE UPDATE table2
> with new field1 value. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:57:00.703

这是一个例子：

```
USE DatabaseName;
GO
IF OBJECT_ID ('Sch.UpdateSecondTable', 'TR') IS NOT NULL
   DROP TRIGGER Sch.UpdateSecondTable;
GO
CREATE TRIGGER Sch.UpdateSecondTable
ON FirstTable
AFTER INSERT
AS 
    INSERT INTO SecondTable 
    SELECT * FROM Inserted
GO 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/b65c6/1)

但是，如果您想使用第一个表中插入的值更新第二个表表单，请尝试使用以下语句代替`INSERT`子句：

```
UPDATE t2
SET t2.name = t1.name
FROM SecondTable t2
INNER JOIN inserted t1 ON t1.id = t2.id 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/b6ee5/1)

**更新：**如果您只想插入第二个 tabl3e 中不存在的值。如果这些表具有相同的结构，即相同的列号和相同的数据类型。您可以使用`EXCEPT`set 运算符执行此操作，如下所示：

```
 UPDATE t2
   SET t2.name = t1.name
   FROM SecondTable t2
   INNER JOIN
   (
     SELECT * FROM inserted t1
     EXCEPT SELECT * FROM SECONDTABLE
   ) t1 ON t1.id = t2.id 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/14b44/1)

如果不使用标准方法这样做：

```
 UPDATE t2
   SET t2.name = t1.name
   FROM SecondTable t2
   INNER JOIN
   (
     SELECT * FROM inserted t1
     WHERE id NOT IN(SELECT id FROM SECONDTABLE)
   ) t1 ON t1.id = t2.id 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/e70ba/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:39:20.493

你需要使用触发器，这没什么大不了的，做一些研究，你就会上网。

# css - 框架主题的投资组合页面在 Chrome 中滚动缓慢和/或抽搐

> ID：13216926
> 
> 赞同：0
> 
> 时间：2012-11-04T07:37:12.973
> 
> 标签：css, performance, scroll, responsive-design

如果有人可以，请查看此页面：

[http://thebc.co/our-work](http://thebc.co/our-work)

一切都加载得很快，但是当你在 Chrome 中滚动时，它一点也不流畅。

这只发生在上面的页面上。我不认为图像是一个问题。它们经过了超级优化，而且所有页面的加载速度都非常快。

该网站建立在骨架响应框架之上。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:47:32.890

这就是在滚动时使它变得粘滞的原因。它被应用于图像悬停。

``border: 1px solid #C02E2C;``

# dotnetnuke - 在一个dnn网站中，首先加载body图片。是否可以在页面加载后加载图片

> ID：13216933
> 
> 赞同：0
> 
> 时间：2012-11-04T07:38:05.110
> 
> 标签：dotnetnuke

在**DNN**网站中，首先加载身体图像。
是否可以在页面加载结束时加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:52:46.473

这是另一个回答这个问题的问题

[最后使用 Javascript 加载一些图像](https://stackoverflow.com/questions/2230916/use-javascript-to-load-some-images-last)

请记住，这在皮肤中会更好 - 不要在站点设置的外观部分中使用身体背景

# compression - tar.Z 文件格式、结构、标头

> ID：13216935
> 
> 赞同：2
> 
> 时间：2012-11-04T07:38:22.520
> 
> 标签：compression, tar, lzw

我想弄清楚 tar.Z 文件的文件布局。（所谓的 .taz 文件。压缩的 tar 文件）。

该文件可以使用 tar -Z 选项或使用 unix compress 实用程序生成（结果相同）

我试图用谷歌搜索一些关于这个文件结构的文档，但是没有关于这个文件结构的文档。

我知道这是 LZW 压缩文件，并以它的幻数“1F 9D”开头，但这就是我能弄清楚的全部。有人请告诉我有关文件头或任何内容的更多详细信息。

我对如何解压缩这个文件不感兴趣，或者什么 linux 命令可以处理这个文件。

我想知道是内部文件结构/标题/格式/布局。先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-23T11:04:12.223

.Z 文件使用 compress 压缩，并且可以使用 uncompress 解压缩（或者在某些机器上，这称为 uncompress.real）。这个 .Z 文件可以保存任何数据。.tar.Z 或 .taz 只是一个用 compress 压缩的 .tar 文件。

前 2 个字节（MAGIC_1 和 MAGIC_2）用于检查 .Z 文件是否真的是 .Z 文件，而不是意外具有相同扩展名的其他文件。这些字节在源代码中是硬编码的。

第三个字节是设置字节，包含 2 个值：

*   最高有效位是块模式。
*   最后5位表示码表的最大尺寸（码表用于lzw压缩）。

从原始代码：BLOCK_MODE=0x80; byte3=(位|块模式); 并且 BIT 在 if/else 块中，它是 12..16。

如果打开了块模式，则在代码表中的第 256 位将添加一个实体（请记住 0..255 用值 0..255 填充），这将包含 CLEAR 符号。因此，每当从文件的数据流中获取 CLEAR 符号时，必须将代码表恢复为其初始状态（因此它只有 0..256）。

最大代码大小表示代码表可以包含的位数。当达到最大值时，不再有实体添加到代码表中。所以如果最大码长为0b00001100，则表示码表只能容纳12位，所以最多2^12=4096个实体。

compress 可能使用的最大数量是 16 位。这意味着此设置字段中有 2 位未使用。

在这 3 个字节之后，原始 LZW 数据开始。因为 LZW 表从 9 位开始，第 4 个字节将与输入的第一个字节相同（如果是 .tar.Z 文件或 taz 文件，此字节将是未压缩 .tar 的第一个字节文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T07:46:15.000

tar.Z 文件只是一个压缩的 tar 文件，因此您只会找到告诉您解压缩它的 1F 9D 幻数。

解压缩后，您可以读取 tar 文件头：

[http://www.fileformat.info/format/tar/corion.htm](http://www.fileformat.info/format/tar/corion.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T07:47:15.270

问：这个文件可以用 tar -Z 选项或使用 unix compress 工具生成（结果相同）

答：是的。“tar -cvf myfile.tar myfiles; compress myfile.tar”相当于使用“-Z”。更好的选择通常是“j”（使用 BZip，而不是 Zip）

问：tar 文件的布局是什么？

A：有很多参考资料，还有很多免费的资源。例如：

*   [http://en.wikipedia.org/wiki/Tar_%28file_format%29](http://en.wikipedia.org/wiki/Tar_%28file_format%29)

问：Unix 压缩文件的格式是什么？

A: 再次：许多参考资料；很容易找到示例源代码：

*   [http://en.wikipedia.org/wiki/Compress](http://en.wikipedia.org/wiki/Compress)

对于 .tgz（压缩的 tar 文件），您需要两种格式：您必须先解压缩它，然后再解压缩它。“tar”实用程序会自动为您完成这两项工作:)

# iphone - 在 iphone 的 UIScrollView 中添加一个 UITabbarControler？

> ID：13216939
> 
> 赞同：0
> 
> 时间：2012-11-04T07:38:58.747
> 
> 标签：iphone, objective-c, cocoa-touch, uiscrollview, uitabbarcontroller

我在 UIViewController 中制作了一个 UIScrollView 。现在我想向它添加一个 UITabBarController 。但是当我这样做时，我看不到添加到它的 TabBarController ..

我写了这段代码

```
[testscroll setScrollEnabled:YES];
[testscroll setContentSize:CGSizeMake(320,800)];
FirstViewController *first = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
first.title=@"Search";
UserProfile *second=[[UserProfile alloc]initWithNibName:@"UserProfile" bundle:nil];
second.title=@"My Profile";

UserActivities *third=[[UserActivities alloc]initWithNibName:@"UserActivities" bundle:nil];
third.title=@"My Activities";
LogOut *logout=[[LogOut alloc]initWithNibName:@"LogOut" bundle:nil];
logout.title=@"Sign Out";
NSArray *viewArray= [NSArray arrayWithObjects:first,second,third,logout, nil];
tabBarController=[[UITabBarController alloc] init];
[tabBarController setViewControllers:viewArray animated:NO];
[self presentModalViewController:tabBarController animated:NO]; 
```

我在第五个ViewController 中添加了这个。我可以看到添加了UIScrollView 和一些标签和文本字段，但没有添加TabBarController。我哪里出错了..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:40:03.853

据我所知，您正在创建一个标签栏控制器，然后以模态方式呈现它：

```
NSArray *viewArray= [NSArray arrayWithObjects:first,second,third,logout, nil];
tabBarController=[[UITabBarController alloc] init];
[tabBarController setViewControllers:viewArray animated:NO];
[self presentModalViewController:tabBarController animated:NO]; 
```

它没有出现，`scrollView`因为您没有以任何方式“连接”两者。

如果您希望标签栏控制器出现在滚动视图内，请将其作为子视图添加到后者：

```
[testscroll setScrollEnabled:YES];
[testscroll setContentSize:CGSizeMake(320,800)];
...
[testscroll addSubview:tabBarController.view]; 
```

（我假设这`tabBarController`是一个属性，并且滚动视图以某种方式显示）

# mongoid - 使用 mongoid3 清除数据库

> ID：13216952
> 
> 赞同：4
> 
> 时间：2012-11-04T07:41:39.463
> 
> 标签：mongoid, mongoid3

我喜欢在每次运行单元测试并清除我的 mongo db 之前执行设置，我该如何使用 mongoid？

我在谷歌搜索时发现了一些关于它的链接，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-28T09:16:37.713

的输出`rake -T`

```
rake db:drop           # Drops all the collections for the database for the current Rails.env
..
rake db:mongoid:drop   # Drops the database for the current Rails.env
rake db:mongoid:purge  # Drop all collections except the system collections
..
rake db:purge          # Drop all collections except the system collections 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T14:36:02.197

您可能想看看[database_cleaner](https://github.com/bmabey/database_cleaner) gem，它在规范中抽象了清理数据库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T14:28:01.063

mongoid 组中的这个[讨论](https://groups.google.com/forum/#!msg/mongoid/NiqhubQP8z4/)（删除 Mongoid 3 中的所有集合）似乎是相关的。有两种方法[`purge!`](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/config.rb#L141)和[`truncate!`](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/config.rb#L157)。Purge 删除集合，这也意味着索引。截断只删除每个集合中的文档，这意味着您保留索引，但它比清除慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T13:58:54.887

如果您使用的是 Rails，则可以运行`rake db:mongoid:purge`以删除除系统集合之外的所有集合。

或者，运行`rake db:mongoid:drop`以从当前 Rails.env 中删除数据库。

# javascript - 更改 HTML 的 JQuery 最近方法

> ID：13216962
> 
> 赞同：1
> 
> 时间：2012-11-04T07:43:39.277
> 
> 标签：javascript, jquery, asp.net-mvc

我正在做一个项目，我的视图中有两个锚点（用于投票功能），

我有一个 div，里面有一个`<ul>`，在 3 中，我有一个分别`<li>`用于 upvote、vote count`(in <h2>)`和 anchor downvote的锚

我想要功能，当我点击任何锚点时，h2 html 会显示投票计数，我已经实现了该功能，但是因为

*   我无法做到这一点，这是我的看法

    ```
    <div class="voting" style="margin-left:20px;">
                                            <ul>
                                                <li class="addvote"><a href="#" class="voteAnswer" answerid="@answer.AnswerID" name="Voted">
                                               Up</a></li>
                                                <li class="votecounter">
                                                    <h2>
                                                        @answer.AnswerLikes.Where(a => a.IsActive == true).Count()</h2>
                                                </li>
                                                <li class="subvote"><a href="#" class="voteAnswer" answerid="@answer.AnswerID" name="Voted">
    Down</a></li>
                                            </ul>
                                        </div> 
    ```

    这是我的 JS

    ```
    $(".voteAnswer").click(function (event) {
                var answerid = $(this).attr('answerid');
                var name = $(this).attr('name');
                var id = $(this).attr('id');
                var output = $(this);

                    $.ajax({
                        url: ResourceAjaxUrl.VoteUnvoteTheAnswer,
                        type: "POST",
                        data: JSON.stringify({ answerID: answerid }),
                        dataType: "html",
                        contentType: "application/json; charset-utf-8",
                        success: function (Result) {
                            alert("Voted");
                            //  $(output).html("Voted (" + Result + ")");
                            $(output).closest("li").find("h2").html(Result);
                            $(output).attr("name", "Voted");
                        },
                        error: function (msg) {
                            alert("Unable to Vote answer: " + msg);
                        }
                    });
    event.preventDefault();
                }); 
    ```

    我已经尝试使用 `$(output).closest("li").find(".votecounter")`但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T08:08:40.323

UL 是最近的共同祖先。

尝试：

```
$(output).closest("UL").find(".votecounter") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T08:23:07.087

你的代码有一些问题。

这里

```
$(".voteAnswer").click(function (event) {

            var id = $(this).attr('id'); 
```

没有`id`属性`.voteAnswer`

还有你如何区分`upvote`和`downvote` 。

您必须检查`anchor's`父`li`标签`class`并检查它是 upvote 还是 down vote 。

你也可以选择`.votecounter`

只需通过

```
$(".votecounter").find("h2").html(Result); 
```

或者

```
$(output).closest("ul").find(".votecounter"); 
```

# php - 列出目录中的文件并形成下载链接

> ID：13216963
> 
> 赞同：0
> 
> 时间：2012-11-04T07:43:48.713
> 
> 标签：php, javascript, drop-down-menu

我正在为我的大学制作资源目录。我不了解 PHP，并且我正在学习一些东西。我已经使用动态下拉列表成功创建了上传部分。我添加了 3 个级别，首先选择哪个流/部门，然后选择哪个学期，然后是哪个学期，然后单击上传，文件会正确转到所需的目录。

现在，我想知道如何显示所有正在上传的文件？它们都在目录中。我如何列出它们并显示我的用户/访问者，以便他们可以选择下载什么？我附上的示例只有 2 个engg 流，两个下有 2 个 sem，每个 sem 下有 2 个主题。我想以隔离的方式列出所有内容。假设一个页面有 CSE/SEM1/Data Structures/此类别下的所有文件，另一个页面有 CSE/SEM2/Networks/此类别下的所有文件。不仅列出来，还形成一个链接，以便他们下载。

我的索引页在那里对吗？它有一个下载页面导航。我希望用户点击它。单击该按钮后，他们会被重定向到类似于带有动态下拉列表的上传页面的页面。他们选择流、sem 和主题，然后单击下一步。（我必须制作该页面）他们被重定向到一个页面，该页面仅显示该目录（stream/sem/subj/allfiles）中所有文件的列表。还必须链接列表，以便在单击该文件名时，他们可以下载他们想要的文件，或者在名称旁边有一个下载选项。

请检查我的附件/链接，请帮助我尽快解决这个问题。

[http://www.mediafire.com/?hevt1f4a1rpbyvp](http://www.mediafire.com/?hevt1f4a1rpbyvp)

谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:14:04.557

要提供文件以供下载，请创建一个读取文件的 php 脚本，然后使用适当的标头提供它

```
// ensure the file exists
if(isset($_GET['file']) && file_exists($_GET['file'])){

  // Read the file some.zip
  $file = file_get_contents($_GET['file']);

  // Set headers to serve the file for download
  header('Content-Type: application/zip');
  header('Content-Disposition: attachment; filename="$_GET['file']"'); // name file here
  header('Content-Length: ' . strlen($file)); // length of the file

  // echo the file
  echo $file;
} 
```

# c - C中的远程同步目录

> ID：13216966
> 
> 赞同：2
> 
> 时间：2012-11-04T07:44:27.603
> 
> 标签：c, linux

我没有C语言经验，但是...

如果我想用 C 语言为 linux 系统编写一个程序，它将在本地文件/目录更新时*自动*将本地文件/目录同步到远程文件/目录；我应该看哪些库或内置插件？

到目前为止，我查看了 inotify，但在没有任何帮助的情况下，我真的缺乏搜索这个的术语。

**编辑**

这只是一个练习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:51:41.403

有[librsync](http://librsync.sourceforge.net/)，一个实现 rsync 算法的库。但是你真的需要在 C 中这样做吗？一种更常见、更简单的方法是使用 shellscripts 和[rsync](http://en.wikipedia.org/wiki/Rsync)程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T14:41:43.460

`inotify`是要走的路。努力克服它，当你遇到困难时回来在这里问更具体的问题。

这是一个让您入门的示例（请原谅 C++ 输出语句，请想象一下`printf`）：

```
void waitfor_activity(const char *path)
{
        const int fd = inotify_init();
        const int wd = inotify_add_watch(fd, path, IN_MODIFY | IN_CLOSE_WRITE);

        char buffer[EVENT_BUF_LEN];
        while (true)
        {
                const ssize_t length = read(fd, buffer, EVENT_BUF_LEN); 
                if (length < 0) {
                        perror("read");
                }  
                const struct inotify_event *event = ( struct inotify_event * ) buffer;
                std::cout << "event: ";
                if (event->mask & IN_CLOSE_WRITE)
                {
                        std::cout << "IN_CLOSE_WRITE ";
                }
                if (event->mask & IN_MODIFY)
                {
                        std::cout << "IN_MODIFY ";
                }
                std::cout << std::endl;
        }
        close(fd);
} 
```

# c# - 如何在 MonoMac C# 的派生对象上实现 Cocoa copyWithZone？

> ID：13216971
> 
> 赞同：4
> 
> 时间：2012-11-04T07:45:03.127
> 
> 标签：c#, objective-c, cocoa, mono, monomac

我目前正在移植一个基于 Winforms 的小型 .NET 应用程序，以便将本机 Mac 前端与 MonoMac 一起使用。该应用程序有一个带有图标和文本的 TreeControl，这在 Cocoa 中不存在。

到目前为止，我已经在 Apple 的 DragNDrop 示例中移植了几乎所有的 ImageAndTextCell 代码：[https ://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Listings/ImageAndTextCell_m.html#//apple_ref/doc/uid /DTS40008831-ImageAndTextCell_m-DontLinkElementID_6](https://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Listings/ImageAndTextCell_m.html#//apple_ref/doc/uid/DTS40008831-ImageAndTextCell_m-DontLinkElementID_6)，分配给 NSOutlineView 作为自定义单元格。

它似乎工作得几乎完美，除了我还没有弄清楚如何正确移植该`copyWithZone`方法。不幸的是，这意味着 NSOutlineView 正在制作的内部副本没有图像字段，并导致图像在展开和折叠操作期间短暂消失。有问题的objective-c代码是：

```
- (id)copyWithZone:(NSZone *)zone {
    ImageAndTextCell *cell = (ImageAndTextCell *)[super copyWithZone:zone];
    // The image ivar will be directly copied; we need to retain or copy it.
    cell->image = [image retain];
    return cell;
} 
```

第一行是什么让我失望，因为 MonoMac 没有公开 copyWithZone 方法，我不知道如何调用它。

**更新**

根据当前的答案和额外的研究和测试，我提出了多种复制对象的模型。

```
static List<ImageAndTextCell> _refPool = new List<ImageAndTextCell>();

// Method 1

static IntPtr selRetain = Selector.GetHandle ("retain");

[Export("copyWithZone:")]
public virtual NSObject CopyWithZone(IntPtr zone) {
    ImageAndTextCell cell = new ImageAndTextCell() {
        Title = Title,
        Image = Image,
    };

    Messaging.void_objc_msgSend (cell.Handle, selRetain);

    return cell;
}

// Method 2

[Export("copyWithZone:")]
public virtual NSObject CopyWithZone(IntPtr zone) {
    ImageAndTextCell cell = new ImageAndTextCell() {
        Title = Title,
        Image = Image,
    };

    _refPool.Add(cell);

    return cell;
}

[Export("dealloc")]
public void Dealloc ()
{
    _refPool.Remove(this);
    this.Dispose();
}

// Method 3

static IntPtr selRetain = Selector.GetHandle ("retain");

[Export("copyWithZone:")]
public virtual NSObject CopyWithZone(IntPtr zone) {
    ImageAndTextCell cell = new ImageAndTextCell() {
        Title = Title,
        Image = Image,
    };

    _refPool.Add(cell);
    Messaging.void_objc_msgSend (cell.Handle, selRetain);

    return cell;
}

// Method 4

static IntPtr selRetain = Selector.GetHandle ("retain");
static IntPtr selRetainCount = Selector.GetHandle("retainCount");

[Export("copyWithZone:")]
public virtual NSObject CopyWithZone (IntPtr zone)
{
    ImageAndTextCell cell = new ImageAndTextCell () {
        Title = Title,
        Image = Image,
    };

    _refPool.Add (cell);
    Messaging.void_objc_msgSend (cell.Handle, selRetain);

    return cell;
}

public void PeriodicCleanup ()
{
    List<ImageAndTextCell> markedForDelete = new List<ImageAndTextCell> ();

    foreach (ImageAndTextCell cell in _refPool) {
        uint count = Messaging.UInt32_objc_msgSend (cell.Handle, selRetainCount);
        if (count == 1)
            markedForDelete.Add (cell);
    }

    foreach (ImageAndTextCell cell in markedForDelete) {
        _refPool.Remove (cell);
        cell.Dispose ();
    }
}

// Method 5

static IntPtr selCopyWithZone = Selector.GetHandle("copyWithZone:");

[Export("copyWithZone:")]
public virtual NSObject CopyWithZone(IntPtr zone) {
    IntPtr copyHandle = Messaging.IntPtr_objc_msgSendSuper_IntPtr(SuperHandle, selCopyWithZone, zone);
    ImageAndTextCell cell = new ImageAndTextCell(copyHandle) {
        Image = Image,
    };

    _refPool.Add(cell);

    return cell;
} 
```

**方法一：**增加非托管对象的保留计数。非托管对象将永远持续存在（我认为？dealloc 从未调用过），托管对象将被提早收获。似乎是全能双输，但在实践中运行。

**方法二：**保存管理对象的引用。非托管对象被单独留下，调用者似乎在合理的时间调用了 dealloc。此时托管对象被释放和处置。这似乎是合理的，但不利的一面是基本类型的 dealloc 不会运行（我认为？）

**方法 3：**增加保留计数并保存引用。非托管和托管对象永远泄漏。

**方法 4：**通过添加定期运行的清理函数（例如在每个新 ImageAndTextCell 对象的 Init 期间）扩展方法 3。清理函数检查存储对象的保留计数。保留计数为 1 意味着调用者已释放它，所以我们也应该这样做。理论上应该消除泄漏。

**方法 5：**尝试在基类型上调用 copyWithZone 方法，然后使用生成的句柄构造一个新的 ImageAndTextView 对象。似乎做对了（克隆了基础数据）。在内部，NSObject 会增加这样构造的对象的保留计数，因此我们还使用 PeriodicCleanup 函数在不再使用这些对象时释放它们。

基于以上所述，我认为方法 5 是最好的方法，因为它应该是唯一一种能够生成真正正确的基本类型数据副本的方法，但我不知道该方法是否具有内在危险（我也在制作关于 NSObject 底层实现的一些假设）。到目前为止，“还”没有发生任何不好的事情，但如果有人能够审查我的分析，那么我会更有信心继续前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:53:52.863

[这个问题在Bug 1086](https://bugzilla.xamarin.com/show_bug.cgi?id=1086)中有详细的讨论

> 好吧，这是一个引用计数/所有权问题：
> 
> 您在 MyDataSource.GetObjectValue() 中创建一个新的 MyObject 实例，然后将其返回到本机代码，而不保留对它的引用。返回后，您不再拥有该对象，但托管垃圾收集器不知道这一点。
> 
> 只需将对象存储在列表中，如下所示：
> 
> ```
> List<MyObject> list;
> 
> public MyDataSource ()
> {
>     list = new List<MyObject> ();
>     for (int i = 0; i < 10; i++) {
>         list.Add (new MyObject { Text = "My Row " + i });
>     }
> }
> 
> public override NSObject GetObjectValue (NSTableView tableView,
>     NSTableColumn tableColumn, int row)
> {
>     return list [row];
> }
> 
> public override int GetRowCount (NSTableView tableView)
> {
>     return list.Count;
> } 
> ```
> 
> 但是，这并不能解决您的 copyWithZone: 问题。在这里，将克隆的对象存储在本地不是一种选择，这会很快泄漏大量内存。相反，您需要在克隆对象上调用保留。不幸的是，NSObject.Retain() 在 MonoMac.dll 中是内部的，但你可以简单地这样做：
> 
> ```
> static IntPtr selRetain = Selector.GetHandle ("retain");
> [Export("copyWithZone:")]
> public NSObject CopyWithZone (IntPtr zone)
> {
>     var cloned = new MyObject { Text = this.Text };
>     Messaging.void_objc_msgSend (cloned.Handle, selRetain);
>     return cloned;
> } 
> ```

从内存中，最后一个示例中的代码不完整，您必须将两个示例组合起来并`MyObject`在列表（或其他一些集合）中跟踪新的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T05:00:48.577

到目前为止，我还没有发现任何问题的证据，所以我很乐意采用我在问题更新中概述的“方法 5”，我将在这里复制它并提供一些额外的解释：

```
// An additional constructor
public ImageAndTextCell (IntPtr handle)
    : base(handle)
{
}

// Cocoa Selectors
static IntPtr selRetainCount = Selector.GetHandle("retainCount");
static IntPtr selCopyWithZone = Selector.GetHandle("copyWithZone:");

static List<ImageAndTextCell> _refPool = new List<ImageAndTextCell>();

// Helper method to be called at some future point in managed code to release
// managed instances that are no longer needed.
public void PeriodicCleanup ()
{
    List<ImageAndTextCell> markedForDelete = new List<ImageAndTextCell> ();

    foreach (ImageAndTextCell cell in _refPool) {
        uint count = Messaging.UInt32_objc_msgSend (cell.Handle, selRetainCount);
        if (count == 1)
            markedForDelete.Add (cell);
    }

    foreach (ImageAndTextCell cell in markedForDelete) {
        _refPool.Remove (cell);
        cell.Dispose ();
    }
}

// Overriding the copy method
[Export("copyWithZone:")]
public virtual NSObject CopyWithZone(IntPtr zone) {
    IntPtr copyHandle = Messaging.IntPtr_objc_msgSendSuper_IntPtr(SuperHandle, selCopyWithZone, zone);
    ImageAndTextCell cell = new ImageAndTextCell(copyHandle) {
        Image = Image,
    };

    _refPool.Add(cell);

    return cell;
} 
```

通过在基础对象上调用 copyWithZone: 选择器（通过 SuperHandle），底层 Cocoa 子系统将克隆非托管对象并将句柄返回给它，其保留计数已设置为 1（标准 obj-c 复制约定）。然后可以使用克隆的对象句柄构造派生的 C# 对象，因此克隆的实例成为支持对象。然后，克隆任何属于派生类型的托管 C# 好东西就很简单了。

正如 ta.speot.is 所指出的，还需要在某处保留托管类型的引用。如果没有引用，则该对象将在方法结束时成为垃圾回收的候选对象。对象的非托管部分在返回时是安全的，因为它在调用复制选择器时具有正的保留计数。我选择将引用存储在静态列表中，然后定期从将遍历列表的其他代码部分调用清理方法，检查相应的非托管对象是否有任何其他所有者，如果没有，则处置对象。请注意，我正在检查计数 1 而不是 0，因为我们复制的对象实际上被保留了两次：一次由复制选择器保留，一次由 NSObject 构造函数保留。

# perl - 需要使用批处理文件复制特定字符串之前的行

> ID：13216972
> 
> 赞同：0
> 
> 时间：2012-11-04T07:45:22.203
> 
> 标签：perl, batch-file, constants

我有一个这样的文件：

```
Executing resource: D:\waste2\SPC\depks_rtl_teller_custom.spc   
Executing resource: D:\waste2\SPC\ifpks_msg_incoming_cluster.spc  
Failed to execute:   
Executing resource: D:\waste2\SQL\casapks_batch.sql  
Failed to execute:  
Executing resource: D:\waste2\SQL\depks_decbatop_kernel.sql  
Executing resource: D:\waste2\SQL\depks_services.sql  
Failed to execute: 
```

我需要一个批处理文件或 perl 脚本或 ANT 脚本来选择字符串“执行失败：”前面的所有行并复制到一个新文件中。只是我在新文件中需要的失败文件列表。请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:19:29.357

惊喜！本机 Windows FINDSTR 命令可以很好地处理这个问题 :-) 不需要 perl 或任何其他非本机实用程序。

```
@echo off
setlocal
::Define LF variable containing a linefeed (0x0A)
set LF=^

::Above 2 blank lines are critical - do not remove

::Define CR variable containing a carriage return (0x0D)
for /f %%a in ('copy /Z "%~dpf0" nul') do set "CR=%%a"

setlocal enableDelayedExpansion
::regex "!CR!*!LF!" will match both Unix and Windows style End-Of-Line
findstr /rc:"!CR!*!LF!Failed to execute:" "test.txt" >"failed.txt"
type failed.txt 
```

请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:01:10.853

使用 perl，您可以执行以下操作：

```
while(<>) {
  print $prev if /^Failed to execute:/;
  $prev = $_;
} 
```

要直接从 shell 执行，可以使用以下命令

```
perl -ne 'print $prev if /^Failed to execute:/; $prev=$_' path/to/your/file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T12:05:13.843

使用 tac 和 sed：

```
tac file | sed -n '/Failed to execute/{n;p;}'  | tac 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T12:10:45.483

您也可以使用两个 grep 调用，尽管这更像是一种 hack（假设您只有以“失败”或“执行”开头的行）：

```
grep -B1 '^Failed to execute' your/file | grep '^Executing' 
```

或者

```
grep -B1 '^Failed to execute' your/file | grep -v '^--' | grep -v '^Failed to execute' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T13:53:34.187

使用 PowerShell：

```
PS II> Select-String "Failed to execute:" c:\file.txt -co 1 | % { $_.context.Precontext } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T14:36:19.223

或者简单地说：

```
for /f "delims=" %%a in (c:\test.txt) do (
  echo(%%a| find /i "Failed to execute:" >Nul && (
    setlocal enableDelayedExpansion
    echo !msg!
    endlocal
  )
  set "msg=%%a"
) 
```

# ruby-on-rails - 如何在 Ruby 中使用初始化方法

> ID：13216976
> 
> 赞同：31
> 
> 时间：2012-11-04T07:46:38.587
> 
> 标签：ruby-on-rails, attributes

我正试图围绕使用该`initialize`方法的目的。在 Hartl 的教程中，他使用了这个例子：

```
def initialize(attributes = {})
   @name = attributes[:name]
   @email = attributes[:email]
end 
```

正在`initialize`设置实例变量`@name`和`@email`属性，如果是这样，为什么我们有参数`attributes = {}`？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-04T07:51:08.053

Ruby 使用该`initialize`方法作为对象的构造函数。它是 Ruby 语言的一部分，并非特定于 Rails 框架。当您实例化一个新对象时调用它，例如：

```
@person = Person.new 
```

在 a上调​​用`new`类级别的方法`Class`会分配该类的类型，然后调用对象的`initialize`方法：

[http://www.ruby-doc.org/core-1.9.3/Class.html#method-i-new](http://www.ruby-doc.org/core-1.9.3/Class.html#method-i-new)

所有对象都有一个`initialize`不接受参数的默认方法（你不需要写一个 - 你会自动得到它）。如果你想让你的对象在方法中做一些不同的事情`initialize`，你需要定义你自己的版本。

在您的示例中，您将哈希传递给`initialize`可用于设置 and 的默认值的`@name`方法`@email`。

您可以使用它，例如：

```
@person = Person.new({name: 'John Appleseed', email: 'john@some.net'}) 
```

初始化程序具有属性默认值（`attributes = {}`将默认值设置为 ampty 哈希 - `{}`）的原因是，您也可以在无需传递参数的情况下调用它。如果您不指定参数，`attributes`则将是一个空哈希，因此两者`@name`和`@email`都将是值，因为这些键（和）`nil`不存在值。`:name``:email`

# java - (Class ) 和 getClass()有什么区别？

> ID：13216981
> 
> 赞同：0
> 
> 时间：2012-11-04T07:47:35.700
> 
> 标签：java, object, casting

考虑这两行：

```
return loadMethod.invoke(botScriptLoader, file.getName().replaceFirst("\\.class", "")).getClass();

return (Class<?>) loadMethod.invoke(botScriptLoader, file.getName().replaceFirst("\\.class", "")); 
```

当我使用第一行运行我的应用程序时，它不能按预期工作。当我使用第二行运行我的应用程序时，它确实可以正常工作。我不觉得这背后的代码是相关的，因为我的观点是这两行之间的行为是不同的。为什么他们的行为不同？getClass() 返回 Class 并且类型转换将对象转换为 Class - 所以最终结果*应该*是相同的。但是，两者的行为方式不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T07:54:37.147

您的 loadMethod 似乎已经返回了 Class 类型的对象。因此，当您调用它时`getClass()`，它会回馈您`java.lang.Class.class`，而不是您加载的东西。转换你加载的东西不会改变底层对象，它是你文件名的 Class 实例。

也就是说，如果你想返回类型整数的类对象，你会：

`return Integer.class;`

你的第一行正在做

`return Integer.class.getClass();`

所以你得到代表类型类本身的类对象，而不是类型整数。

# javascript - 滑块适用于某些浏览器，但不适用于其他浏览器

> ID：13216982
> 
> 赞同：0
> 
> 时间：2012-11-04T07:47:37.277
> 
> 标签：javascript, jquery, html, css, slider

我在 www.Guguta.com 上有这个滑块，如果你用 IE 或 Firefox 打开它，它工作得很好。如果您使用 Chrome 或 Safari 打开 .. 主图不显示。

此外，鼠标点击小图片，应该将该小图片加载到主图片中，但再次在 Chrome 和 Safari 上不起作用。

管理滑块的 JS 脚本在“scripts.cs”中启动
完整的源代码可以从这里下载： **www.guguta.com/slider.zip**

任何帮助/提示将不胜感激。

提前致谢，
开发者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T08:33:36.427

好的，我想通了。这条线把它塞满了

```
$('.slider-item a').find('img').each(function () {
        $(this).rotateRight(-2);    
    }); 
```

我把它换成了

```
$('.slider-item a').find('img').each(function () {
        degree = -2;
        $(this).css({
        '-webkit-transform': 'rotate(' + degree + 'deg)',
                        '-moz-transform': 'rotate(' + degree + 'deg)',
                        '-ms-transform': 'rotate(' + degree + 'deg)',
                        '-o-transform': 'rotate(' + degree + 'deg)',
                        'transform': 'rotate(' + degree + 'deg)',

        }); 
    }); 
```

注意：：这只适用于现代浏览器，例如基于 webkit 的浏览器，即 9 和 firefox（我认为是 3.5 和更高版本）。

编辑：

我还注意到如果您更新它下载链接[http://code.google.com/p/jqueryrotate/downloads/detail?name=jQueryRotate.2.2.js ，您有一个较旧的 jquery 旋转插件](http://code.google.com/p/jqueryrotate/downloads/detail?name=jQueryRotate.2.2.js)

然后这样做

```
 $('.slider-item a').find('img').each(function () {
            $(this).rotate(-2); 
        }); 
```

我也侦察 1.5 度比 2 度好（是的，你可以做 1.5 我试过它看起来好多了）

它将解决这个问题希望这会有所帮助

瑞安

# jquery - 当另一个组合框发生变化时如何同步两个组合框

> ID：13216983
> 
> 赞同：0
> 
> 时间：2012-11-04T07:47:47.697
> 
> 标签：jquery, jquery-ui, combobox

我在同一页面上有两个组合框（用于轻松导航），我想在其中一个组合框发生更改时同步它们。

这是第一个选择框的 html。

```
<select class="alert_frequency">
  <option value="0">Immediately</option>
  <option value="1">Daily</option>
</select> 
```

对于另一个

```
<select class="alert_frequency">
  <option value="0">Immediately</option>
  <option value="1">Daily</option>
</select> 
```

-它们是一样的

这是使用jqueryui打开两个选择框的javascript

```
$('select').combobox(); 
```

所以基本上这两个选择框将被转换为一个 jqueryUI 组合框

我想要实现的是，当第一个组合框改变时，另一个组合框也应该改变，反之亦然。

这是我当前的代码（在单独的文件中）：

```
$('.alert_frequency').combobox('destroy').combobox({
        selected: function( event, ui )
        {
            var val = ui.item.value;
            $('.alert_frequency').val( val ).combobox('refresh');
        }
    }); 
```

它实际上有效，该值已在两个组合框中设置，但 TEXT 没有。我指的是原来的选择框变成了隐藏的组合框。例如，如果我将第一个组合框更改为“每日”，则两个选择框的值为 1，但第二个组合框将保持为“立即”。明白这点？当第一个组合框被选择一个值时，我只想更改第二个组合框的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:23:28.770

我想我使用之前评论的人找到了解决方案，哈哈。不管怎么说，还是要谢谢你

有人可能会觉得它很有用：

```
$('.alert_frequency').change(function(){
  $('.alert_frequency').not(this).val( $(this).val() ).combobox('destroy').combobox();
}); 
```

# google-earth-plugin - 重新绘制地球

> ID：13216988
> 
> 赞同：0
> 
> 时间：2012-11-04T07:48:54.250
> 
> 标签：google-earth-plugin

当切换 3D KmlPolygons 的可见性或修改样式属性时，地球不会直接更新。相反，您需要通过移动鼠标来触发更新。有一个仅在特定时间调用的内部重绘函数，但我不知道如何调用它。

为了让地图更新，我做了这个功能：

```
redraw : function (ge) {
    ge = setDefault(ge, this.ge);
    if (typeof obj == 'undefined' && ge) {
        Log.info('Earth redraw');
        ge.getWindow().setVisibility(false);
        ge.getWindow().setVisibility(true);
    } else {
        Log.error('Earth redraw failed');
    }
} 
```

它会切换窗口的可见性并强制更新，但这会在某些计算机上导致闪烁并且不太优雅。有替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:00:10.010

尝试复制相机并重新设置。我不知道这是否可行，但如果可行，则不应使任何 flash var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND); ge.getView().setAbstractView(lookAt);

# php - 如何将图像名称添加到输入字段？

> ID：13216992
> 
> 赞同：-2
> 
> 时间：2012-11-04T07:51:12.170
> 
> 标签：php, image

有一个小幻灯片如下。可以选择一张图片。如果选择一个图像，我想将相应的图像名称添加到输入字段。我怎样才能做到这一点？请帮忙。

```
 <div id="theImages">
            <a href="#" onclick="showPreview('images/image1_big.jpg','1');return false"><img src="images/image1.jpg" name="image1"></a>     
            <a href="#" onclick="showPreview('images/image2_big.jpg','2');return false"><img src="images/image2.jpg" name="image2"></a>     
            <a href="#" onclick="showPreview('images/image3_big.jpg','3');return false"><img src="images/image3.jpg" name="image3"></a>     
            <a href="#" onclick="showPreview('images/image4_big.jpg','4');return false"><img src="images/image4.jpg" name="image4"></a>     
            <a href="#" onclick="showPreview('images/image5_big.jpg','5');return false"><img src="images/image5.jpg" name="image5"></a>     
            <a href="#" onclick="showPreview('images/image6_big.jpg','6');return false"><img src="images/image6.jpg" name="image6"></a>     
            <a href="#" onclick="showPreview('images/image7_big.jpg','7');return false"><img src="images/image7.jpg" name="image7"></a>     
            <a href="#" onclick="showPreview('images/image8_big.jpg','8');return false"><img src="images/image8.jpg" name="image8"></a>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:27:38.700

试试这个：（不完美，但它可以完成工作）

```
 <div id="theImages">
    <a href="#" onclick="showPreview('images/image1_big.jpg','1');return false" name="image1"><img src="images/image1.jpg"></a>     
    <a href="#" onclick="showPreview('images/image2_big.jpg','2');return false" name="image2"><img src="images/image2.jpg"></a>     
    <a href="#" onclick="showPreview('images/image3_big.jpg','3');return false" name="image3"><img src="images/image3.jpg"></a>     
    <a href="#" onclick="showPreview('images/image4_big.jpg','4');return false" name="image4"><img src="images/image4.jpg"></a>     
    <a href="#" onclick="showPreview('images/image5_big.jpg','5');return false" name="image5"><img src="images/image5.jpg"></a>     
    <a href="#" onclick="showPreview('images/image6_big.jpg','6');return false" name="image6"><img src="images/image6.jpg"></a>     
    <a href="#" onclick="showPreview('images/image7_big.jpg','7');return false" name="image7"><img src="images/image7.jpg"></a>     
    <a href="#" onclick="showPreview('images/image8_big.jpg','8');return false" name="image8"><img src="images/image8.jpg"></a>

    <br /><br />

    <form action="" method="">
        <input type="text" name="drop" id="drop" />
    </form>
 </div>

 <script>
    function showPreview(fileName,fileNumber){
        //document.getElementById("drop").value = fileName; // full filename + path
        var filename_no_path = fileName.split('/');
        document.getElementById("drop").value = filename_no_path[1] // just filename - no path
    }
 </script> 
```

# php - 如何转换这个 PHP 数组以准备一个没有重复“术语”和组合的数组？

> ID：13216993
> 
> 赞同：0
> 
> 时间：2012-11-04T07:51:13.500
> 
> 标签：php, arrays

我需要修改一个 PHP 数组，我真的很难用它:(

```
Array ( [0] => product_category-big-savings [1] => product_category-for-men [2] => product_category-jeans [3] => brand-3-1-phillip-lim [4] => size-10 [5] => ) 
```

那就是数组输出，我想把它转换成这样：

```
Array ( [product_category] => big-savings, for-men, jeans [brand] => 3-1-phillip-lim [size] => 10 ) 
```

我实在是摸不着头脑。这是我尝试过的：

```
foreach($arr as $k => $v) {
    if ($v != '') {
        $arr = explode('-', $v, 2);
        $terms[] = $arr[1];
        $taxes[] = $arr[0];
    }
} 
```

第一个数组由键/值组成。这些值是我所针对的术语：例如：

`product_category-big-savings`是我的目标，我用它来将类别与其值分开：

```
$arr = explode('-', $v, 2); 
```

这给了我：

```
product_category ->
big-savings -> 
```

等等。如何将之后的所有产品类别分组`product_category`为关键字？等等。

但在那之后我得到了一个更复杂的表格。我假设有一个简单的公式可以滚动这个数组并将其转换为所需的格式。任何帮助表示感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:53:43.730

```
list($key, $value) = explode('-', $v, 2);

if (isset($result[$key])) {
    $result[$key] .= ', ' . $value;
} else {
    $result[$key] = $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:57:42.173

你应该这样做：

```
foreach($arr as $k => $v) {
    if ($v != '') {
        $arr = explode('-', $v, 2);
        if (!isset($result[$arr[0]])){
            $result[$arr[0]] = $result[$arr[1]];
        }
        else {
            $result[$arr[0]] .= ', '.$result[$arr[1]];
        }
    }
} 
```

# html - IE8 忽略 li 标签的宽度

> ID：13216995
> 
> 赞同：2
> 
> 时间：2012-11-04T07:51:22.033
> 
> 标签：html, css, internet-explorer-8

我有一个似乎是菜鸟的问题，但我无法为我自己解决这个问题。我真的需要另一双眼睛来帮助我了解为什么 li 标签没有呈现 IE8 中的宽度。

其他浏览器如 chrome 和 firefox 渲染样式很好，IE8 拒绝配合，拒绝将每个 li 的宽度设置为 108px。

这是HTML：

```
<div id="navigation">
<ul>
    <li><a href="">HOME</a></li>
    <li><a href="">SERVICES</a></li>
    <li class="current_tab"><a href="">COMPANY</a></li>
    <li><a href="">EMPLOYEE</a></li>
    <li><a href="">WORK TOOLS</a></li>
    <li><a href="">CONTACT</a></li>
</ul> 
```

这是该导航以及父标签的CSS：

```
body, html {
    overflow: auto;
    position: relative;
}

h3 {
    margin-bottom: 10px;
}

#employee_dir {
    margin-bottom: 20px;
}

#lotus {
    padding-top: 20px;
}

#content {
    margin-top: 10px;
}

#navigation li{
    background-color: transparent;
    background: url('../img/off-tab.png') no-repeat;
    padding-top: 0px !important;
    width: 108px !important;
    padding: 0px;
}

.current_tab {
    background-color: transparent;
    background: url('../img/on-tab.png') no-repeat !important;
    width: 108px;
    height: 33px !important;
}

#navigation a {
    text-align: center;
} 
```

我还附上了一些我看到的截图。

![这是 IE8 使用浏览器内置的开发工具显示 css](../Images/a1346baf55382c9a05dbcb177f48a38e.png) ![但是，这就是它为 li 标签呈现的内容](../Images/5eace6c4c47ff8cf7d2f26a9a4840bd5.png) ![这是导航在 IE8 中呈现的方式](../Images/34c37f4b38ce2a6450f141fb066a7905.png) ![然而，这就是它在 chrome 中呈现的方式](../Images/de81ba5bc4278ebbc91808542f3cee5e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:53:38.380

不要使用`!important`声明，而是尝试制作`<li>`as`inline-block`

```
#navigation li{
    background-color: transparent;
    background: url('../img/off-tab.png') no-repeat;
    padding-top: 0px !important;   <------ Why padding here?
    width: 108px;
    padding: 0px;   <-------Your padding-top gets re-setted here
    display: inline-block;  <------- Here
} 
```