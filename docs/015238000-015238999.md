# StackOverflow 问答 15238000-15238999

# core-data - NSUndoManager 似乎没有在撤消或重做时发布 NSManagedObjectContextDidSaveNotification

> ID：15238001
> 
> 赞同：0
> 
> 时间：2013-03-06T02:40:58.550
> 
> 标签：core-data, nsmanagedobjectcontext, nsundomanager

我的应用程序在附加到`NSManagedObjectContextDidSaveNotification`通知的方法中执行某些操作（在保存时执行）。它还使用了一个`NSUndoManager`愉快地撤消/重做的方法。我曾期望每当发生撤消或重做时（在撤消/重做影响核心数据存储库的情况下）都会引发“已保存”通知，但这似乎没有发生。

期望`NSManagedObjectContextDidSaveNotification`发布撤消/重做是否合理？如果没有，有没有办法我们可以确定事后撤消/重做的事情（`NSUndoManagerDidUndoChangeNotification`似乎没有暴露该信息）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:03:43.807

似乎我错误地假设撤消/重做应该与保存`NSManagedObjectContext`.

因为我的应用程序会自动保存，我陷入困境的大脑认为撤消/重做也会自动保存。显然事实并非如此。

我现在正在观察`NSUndoManagerDidUndoChangeNotification`和`NSUndoManagerDidRedoChangeNotification`通知并手动保存那里，这（目前）给了我我期望的行为。

# php - 如何在 magento 中找到 dispatchEvent 方法？

> ID：15238002
> 
> 赞同：2
> 
> 时间：2013-03-06T02:41:03.113
> 
> 标签：php, magento, dispatch

说我找到了这条线

```
Mage::dispatchEvent('catalog_product_is_salable_before', array(
    'product'   => $this
)); 
```

我如何找到被调用的方法`Mage::dispatchEvent`，我了解到 Magento 已经插入了其中一些`Mage::dispatchEvent`行，但没有为它们创建任何方法以进行定制，所以我也想知道我将如何告诉他们之间的区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:57:14.420

在 Magento 中有调用方法的事件监听器。可以说基本上释放了一个耀斑，`dispatchEvent`并且有“观察者”等待这个信号，然后调用你分配的方法。

您可以使用模块的`etc/config.xml`.

[**您可以在此处**](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)阅读有关如何操作的精彩教程[](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

 **如果您有兴趣了解默认情况下有哪些事件，该页面上有一个链接：[Magento 事件列表](http://www.magentocommerce.com/wiki/lib/exe/fetch.php?cache=cache&media=http://www.magentocommerce.com/wiki/_media/dispatcheventlist.xls)（不起作用）抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:26:21.427

Marshall 的回答很好地总结了事件的工作原理以及如何分配事件观察者。

但是，如果您想准确找到特定事件调度调用了哪些方法，则需要做更多的工作。

对这类事情非常方便的一个工具是[`n98-magerun`](http://netz98.github.com/n98-magerun/). 它是一个命令行，可让您轻松执行许多与 Magento 相关的日常开发任务。

`n98-magerun`命令之一是`dev:module:observer:list`. `config.xml`它列出了在整个应用程序的所有文件中注册的每个观察者。

然后，您可以搜索/grep 您要查找的特定事件的输出，在这种情况下为`catalog_product_is_salable_before`.**

# java - 如何在长按主页、返回或最近的应用程序按钮时打开我的 Android 应用程序？

> ID：15238003
> 
> 赞同：3
> 
> 时间：2013-03-06T02:41:12.450
> 
> 标签：java, android

我希望我的用户能够通过长按后退按钮、最近使用的应用程序按钮或主页按钮来启动我的应用程序。甚至长按音量增大/减小或电源按钮......这将允许用户在不触摸屏幕图标的情况下执行我的应用程序。

我为 Google Now 提供了类似的语音解决方案，顺便说一句。长按home键后打开。有什么办法我可以做同样的事情吗？我几乎每天都会从我的用户那里收到这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:26:18.727

我认为您的用户在不生根的情况下无法做到这一点。我发现这个线程值得一读：

[http://forums.androidcentral.com/samsung-galaxy-s3/183113-button-remapping.html](http://forums.androidcentral.com/samsung-galaxy-s3/183113-button-remapping.html)

或者他们提到[了 Go Launcher 应用程序](https://play.google.com/store/apps/details?id=com.gau.go.launcherex&hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:33:59.030

我已经阅读了[`ACTION`](http://developer.android.com/reference/android/content/Intent.html#constants)可用于通过意图启动活动的 s 列表，但找不到任何你想要的。[如果您确实发现任何其他有用的操作，这里](http://developer.android.com/guide/components/intents-filters.html)有更多关于如何实际操作的信息。

# javascript - jquery在函数之后将值传递给函数？

> ID：15238004
> 
> 赞同：1
> 
> 时间：2013-03-06T02:41:13.803
> 
> 标签：javascript, jquery

我是 javascript 和 jQuery 的新手。我正在尝试为我的网站创建一个功能，让人们可以显示他们在自己的网站上获得的徽章（我会提供一些他们可以复制/粘贴的代码）。我有人帮助我使用 javascript，我让它完美地工作，但我找不到任何 jQuery 文档向我解释它？

```
<script type="text/javascript">
  (function(id) {
    // include js via php file with the id in as a parameter
   })("myid");
</script> 
```

id 在标记为“myid”的区域中传递，在 jQuery 中你可以通过这种方式传递静态变量吗？当我尝试删除`("myid")`并将其更改为 时`var id = 'myid'`，该功能不再起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:59:08.010

您显示的代码中出现`"myid"`的不是静态变量。它是作为参数传递给匿名函数的字符串文字。匿名函数被声明，然后立即被调用。

如果您想知道为什么程序员以他们的方式编写 JavaScript。以下可能会有所帮助。

以下两个示例都将在警报中显示“myid”：

示例 1：

```
<script type="text/javascript">
var id = 'myid';
alert(id);
</script> 
```

示例 2：

```
<script type="text/javascript">
(function(id) {
    alert(id);
})('myid');
</script> 
```

第一个示例将“id”声明为变量。它是一个全局变量，实际上是作为属性添加到`window`对象中的。第二个示例定义了一个匿名函数并立即调用它，`'myid'`作为“id”参数的值传入。这种技术避免使用全局变量。

当然，您也可以通过执行以下操作来避免全局变量：

```
<script type="text/javascript">
(function() {
    var id = 'myid';
    alert(id);
})();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:42:39.187

如果您`"myid"`插入一个变量然后传入该变量，它将起作用。像这样：

```
var memberID = "myid";
(function(id) {
    // include js via php file with the id in as a parameter
})(memberID); 
```

如果你这么说...

```
(function(id) {
    // include js via php file with the id in as a parameter
})(var id = 'myid'); 
```

...您试图在函数调用中添加变量声明，但这是行不通的。这就是为什么在函数调用之外声明上面的变量不会引发任何错误的原因。

# javascript - javascript 这两段代码有什么不同？

> ID：15238007
> 
> 赞同：0
> 
> 时间：2013-03-06T02:41:29.733
> 
> 标签：javascript, node.js, express

我是 javascript 和节点的新手。第一个：

```
app.get('/', function(req, res){
  articleProvider.findAll(function(error, docs){
      res.render('index.jade', { locals: {
        title: 'Blog',
        articles:docs
        }
      });
  });
}); 
```

第二

```
app.get('/', function(req, res){
  articleProvider.findAll(function(error, docs){
      res.render('index.jade', {
        title: 'Blog',
        articles:docs
        }
      );
  });
}); 
```

第一个代码来自本教程[http://howtonode.org/express-mongodb](http://howtonode.org/express-mongodb)，但不起作用。第二个代码确实有效，我只是不知道为什么？其他部分完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:59:19.537

在 Express 的早期版本中，您需要将想要提供给 Jade 模板的变量放在该`locals`参数的字段中`res.render`。

这在 3.x 中发生了变化，因此该参数的所有字段都可用于呈现的模板作为本地变量。

# random - 使用 Curand 和 CUDA 内核同时初始化许多具有随机数的数组

> ID：15238009
> 
> 赞同：0
> 
> 时间：2013-03-06T02:41:42.427
> 
> 标签：random, parallel-processing, cuda, cimg

我正在尝试在 GPU 上同时使用随机生成的数字初始化每个这些并行数组的 100 个元素。但是，我的例程不会产生各种随机数。当我在 Visual Studio 中调试代码时，我看到数组中的每个元素都有一个数字。此代码的目的是优化 CImg FilledTriangles 例程以尽可能使用 GPU。

我做错了什么，我该如何解决？这是我的代码：

```
__global__ void initCurand(curandState* state, unsigned long seed)
    int idx = threadIdx.x + blockIdx.x * blockDim.x;
    curand_init(seed, idx, 0, &state[idx]);
    __syncthreads();
}

/*
 * CUDA kernel that will execute 100 threads in parallel
*/

__global__ void initializeArrays(float* posx, float* posy,float* rayon, float* veloc, float* opacity
                                ,float * angle, unsigned char** color, int height, int width, curandState* state){

    int idx = threadIdx.x + blockIdx.x * blockDim.x;

    curandState localState = state[idx];
    __syncthreads();

    posx[idx] = (float)(curand_uniform(&localState)*width);
    posy[idx] = (float)(curand_uniform(&localState)*height);
    rayon[idx] = (float)(10 + curand_uniform(&localState)*50);
    angle[idx] = (float)(curand_uniform(&localState)*360);
    veloc[idx] = (float)(curand_uniform(&localState)*20 - 10);
    color[idx][0] = (unsigned char)(curand_uniform(&localState)*255);
    color[idx][1] = (unsigned char)(curand_uniform(&localState)*255);
    color[idx][2] = (unsigned char)(curand_uniform(&localState)*255);
    opacity[idx] = (float)(0.3 + 1.5*curand_uniform(&localState));
} 
```

这是准备和调用这些内核的主机代码： 我试图在网格的一个块上创建 100 个线程（针对每个元素）。

```
 // launch grid of threads
      dim3 dimBlock(100);
      dim3 dimGrid(1);

      initCurand<<<dimBlock,dimGrid>>>(devState, unsigned(time(nullptr)));
      // synchronize the device and the host
    cudaDeviceSynchronize();
     initializeArrays<<<dimBlock, dimGrid>>>(d_posx, d_posy, d_rayon, d_veloc, d_opacity, d_angle,d_color, img0.height(), img0.width(), devState); 
```

预赛：

```
 // Define random properties (pos, size, colors, ..) for all triangles that will be displayed.
    float posx[100], posy[100], rayon[100], angle[100], veloc[100], opacity[100];
    // Define the same properties but for the device
    float* d_posx;
    float* d_posy;
    float* d_rayon;
    float* d_angle;
    float* d_veloc;
    float* d_opacity;
    //unsigned char d_color[100][3];
    unsigned char** d_color;
    curandState* devState;
    cudaError_t err;

    // allocate memory on the device for the device arrays
    err = cudaMalloc((void**)&d_posx, 100 * sizeof(float));
    err = cudaMalloc((void**)&d_posy, 100 * sizeof(float));
    err = cudaMalloc((void**)&d_rayon, 100 * sizeof(float));
    err = cudaMalloc((void**)&d_angle, 100 * sizeof(float));
    err = cudaMalloc((void**)&d_veloc, 100 * sizeof(float));
    err = cudaMalloc((void**)&d_opacity, 100 * sizeof(float));
    err = cudaMalloc((void**)&devState, 100*sizeof(curandState));
    errCheck(err);
    size_t pitch;
    //allocated the device memory for source array  
    err = cudaMallocPitch(&d_color, &pitch, 3 * sizeof(unsigned char),100); 
```

得到结果：

```
// get the populated arrays back to the host for use
     err = cudaMemcpy(posx,d_posx, 100 * sizeof(float), cudaMemcpyDeviceToHost);
     err = cudaMemcpy(posy,d_posy, 100 * sizeof(float), cudaMemcpyDeviceToHost);
     err = cudaMemcpy(rayon,d_rayon, 100 * sizeof(float), cudaMemcpyDeviceToHost);
     err = cudaMemcpy(veloc,d_veloc, 100 * sizeof(float), cudaMemcpyDeviceToHost);
     err = cudaMemcpy(opacity,d_opacity, 100 * sizeof(float), cudaMemcpyDeviceToHost);
     err = cudaMemcpy(angle,d_angle, 100 * sizeof(float), cudaMemcpyDeviceToHost);
     err = cudaMemcpy2D(color,pitch,d_color,100, 100 *sizeof(unsigned char),3, cudaMemcpyDeviceToHost); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:46:04.053

绝对您需要对此进行更改：

```
err = cudaMalloc((void**)&devState, 100*sizeof(float)); 
```

对此：

```
err = cudaMalloc((void**)&devState, 100*sizeof(curandState)); 
```

如果你通过 cuda-memcheck 运行你的代码，你就会发现这一点。因此，您的 initCurand 内核有很多越界访问。

您还应该对所有 cuda 调用和所有内核启动进行[错误检查。](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)`color[][]`我相信由于阵列上的操作混乱，您的第二个内核调用失败。

通常当我们用 来创建一个数组时`cudaMallocPitch`，我们需要使用 pitch 参数来访问它。C 双下标数组本身是行不通的，因为 C 对实际数组宽度没有固有的了解。

我能够通过进行以下更改来修复它：

```
__global__ void initializeArrays(float* posx, float* posy,float* rayon, float* veloc, float* opacity,float * angle, unsigned char* color, int height, int width, curandState* state, size_t pitch){

    int idx = threadIdx.x + blockIdx.x * blockDim.x;

    curandState localState = state[idx];
    __syncthreads();

    posx[idx] = (float)(curand_uniform(&localState)*width);
    posy[idx] = (float)(curand_uniform(&localState)*height);
    rayon[idx] = (float)(10 + curand_uniform(&localState)*50);
    angle[idx] = (float)(curand_uniform(&localState)*360);
    veloc[idx] = (float)(curand_uniform(&localState)*20 - 10);
    color[idx*pitch] = (unsigned char)(curand_uniform(&localState)*255);
    color[(idx*pitch)+1] = (unsigned char)(curand_uniform(&localState)*255);
    color[(idx*pitch)+2] = (unsigned char)(curand_uniform(&localState)*255);
    opacity[idx] = (float)(0.3 + 1.5*curand_uniform(&localState));
} 
```

和

```
 initializeArrays<<<dimBlock, dimGrid>>>(d_posx, d_posy, d_rayon, d_veloc, d_opacity, d_angle,d_color, img0.height(), img0.width(), devState, pitch); 
```

和

```
unsigned char* d_color; 
```

通过这些更改，我能够消除我发现的错误，并且代码会吐出各种随机值。我还没有检查所有的值，但这应该让你开始。

# php - Codeigniter 验证问题

> ID：15238013
> 
> 赞同：0
> 
> 时间：2013-03-06T02:42:04.737
> 
> 标签：php, codeigniter, validation

消息系统使用相同的功能来发送和回复消息。一位用户向另一位用户发送消息，主题为：“just testing £69 $100 @ ha”。并且消息包含文本、php 和 html。PHP 被 CI xss_clean 剥离，html 被系统阻止/替换。它被发送而没有错误。其他用户收到它，打开它并尝试用 47 个字符的纯文本进行回复。CI 表单验证类阻止它并显示错误：主题必须小于 1000 个字符。第一个也是最重要的问题是它不应该触发验证错误。其次 CI 形式 val。已将主题设置为最大值。30 个字符，并且消息设置为最大 1000 个字符 - 所以错误消息也是不正确的。我的预感是该主题中的一个角色是令人不安的 CI 形式 val。但是当原始消息发送时它并没有打扰它！

这是表单中的相关代码；

```
<form name="sendmessage" method="POST" action="<? echo base_url(); ?>user/messaging/sendmessage/">
        <input type="hidden" name="<?php echo $this->security->get_csrf_token_name(); ?>" value="<?php echo $this->security->get_csrf_hash(); ?>" />
        <input type="hidden" name="recipiant" value="<? echo $message['mem_msg_from_id']; ?>" />
        <input type="hidden" name="thread" value="<? echo $message['mem_msg_thread_id']; ?>" />
        <? if(substr($message['mem_msg_subject'],3) == 'Re:'){$subject = $message['mem_msg_subject'];}else{$subject = 'Re: ' . $message['mem_msg_subject'];} ?>
        <input type="hidden" name="subject" value="<? echo ucfirst($subject); ?>"> 
```

这是控制器代码；

```
 public function sendmessage(){
    if($this->input->is_ajax_request()){ // ajax request only
        $subject = $this->input->post('subject',TRUE);
        $message = $this->input->post('message',TRUE);
        $recipiant = $this->input->post('recipiant',TRUE);
        $thread_id = $this->input->post('thread',TRUE);

        $subject_val = $this->form_validation->set_rules('subject', 'Subject', 'required|min_length[3]|max_length[30]');
        $subject_req_error = $this->form_validation->set_message('required', 'A %s is required!');
        $subject_min_error = $this->form_validation->set_message('min_length', '%s must be at least 3 characters!');
        $subject_max_error = $this->form_validation->set_message('max_length', '%s must be under 30 characters!');

        $message_val = $this->form_validation->set_rules('message', 'Message', 'required|min_length[5]|max_length[1000]');
        $message_req_error = $this->form_validation->set_message('required', 'A %s is required!');
        $message_min_error = $this->form_validation->set_message('min_length', '%s must be at least 5 characters!');
        $message_max_error = $this->form_validation->set_message('max_length', '%s must be under 1000 characters!');

        $this->form_validation->set_error_delimiters('<div class="pull-left">','&nbsp;</div><br>');

        if ($this->form_validation->run() == FALSE){ // FAILED TRY AGAIN
            echo '<div style="font-weight: bold; color: red;">' . form_error('subject') . form_error('message') . '</div>';
        }else{ // ALL SEEMS TO BE IN ORDER HERE

            // clean it up a bit
            $subject = str_replace('<', '', $subject);
            $subject = str_replace('>', '' , $subject);
            $subject = auto_link($subject, 'both', TRUE);

            $message = str_replace('<', '', $message);
            $message = str_replace('>', '' , $message);
            $message = auto_link($message, 'both', TRUE);

            // stick it in the database
            $db = $this->user_messaging_model->sendMessage($this->userinfo['user_id'], $recipiant, $subject, $message, $thread_id);

            echo 'sent';
        }
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:12:13.933

您正在覆盖分配给规则的消息。

请注意，这符合`$this->form_validation->set_message`规则。不是，每个字段每个规则。因此，当您`$this->form_validation->set_message('max_length'...`第二次设置时，它会覆盖分配给“max_length”要求的初始消息。

一般来说，您不需要为这些设置消息，codeigniter 本身会根据您的要求生成一个体面的错误消息。

在我的工作流程中，我通常使用`set_message`函数为我们在表单字段上执行的自定义回调验证生成消息。

# java - 在绘制的背景上使用 JPanel 中的 JButton、JLabels 和 JTextField

> ID：15238020
> 
> 赞同：2
> 
> 时间：2013-03-06T02:42:41.213
> 
> 标签：java, swing, jpanel, jbutton, paint

我对 Java 还是很陌生，但是在我的程序的其他部分中一直在使用`JPanels`,和成功`JButtons`，但是当我尝试使用一对, , 和在其中覆盖绘制背景时遇到了麻烦。`JLabels``JTextFields``JPanel``JButtons``JLabels``JTextFields`

这是程序这一部分的所有相关代码。目前，当程序运行时，唯一会显示的是背景的`p1_fireButton`,`player1PowerField`和`player1AngleField`overtop （即使我为玩家 2 创建了组件，我还是特意注释掉了添加`p2_Panel`以便我可以专注于`p1_Panel`.

奇怪的是，`JComponents` 只有在程序出于任何原因运行后我按 TAB 键时才会显示这些内容，我也希望有人能帮我解决这个问题。我的目标是`p1_panel`占据左边的橙色框和`p2_panel`占据右边的橙色框。帮助将不胜感激！

![在此处输入图像描述](../Images/cfe6b4959ed902a418750842e09e57cb.png)

```
public class GameFrame extends JFrame
{ //start class GameFrame

    ImageIcon background = new ImageIcon("background.jpg");
    ImageIcon terrain1 = new ImageIcon("terrain1.png");
    //ImageIcon tank_red = new ImageIcon("tank_red.png");
    //ImageIcon tank_red = new ImageIcon(player1Tank);

    private int x_rectangle = 50;
    private int y_rectangle = 50;

    private JButton p1_fireButton;
    private JButton p2_fireButton;
    private JPanel p1_Panel;
    private JPanel p2_Panel;

    private JLabel player1PowerLabel;
    private static JTextField player1PowerField;
    private JLabel player1AngleLabel;
    private static JTextField player1AngleField;

    private JLabel player2PowerLabel;
    private static JTextField player2PowerField;
    private JLabel player2AngleLabel;
    private static JTextField player2AngleField;

    String player1Name;
    String player2Name;
    final Timer gameTimer = new Timer(8, new timer());

    Projectile projectile = new Projectile(200, 300);

    public GameFrame(String title)
    { //start GameFrame constructor
        super(title);
        Dimension size = getPreferredSize();
        size.width = 1000;
        setPreferredSize(size);
        setResizable(false);
        setLayout(null);
        Color trans = new Color(0, 0, 0, 0);

        //player1 panel
        p1_Panel = new JPanel();
        p1_Panel.setLayout(null);
        p1_Panel.setBounds(0, 0, 500, 300);
        p1_Panel.setBackground(trans);

        p2_Panel = new JPanel();
        p2_Panel.setLayout(null);
        p2_Panel.setBounds(500, 0, 500, 300);
        p2_Panel.setBackground(trans);

        //player2 panel
        /*p2_fireButtonPanel = new JPanel();
        p2_fireButtonPanel.setBounds(400, 85, 100, 100);
        p2_fireButtonPanel.setBackground(trans);*/

        //player1 angle/power fields
        player1PowerLabel = new JLabel("Power");
        player1PowerLabel.setLayout(null);
        player1PowerLabel.setBounds(400, 20, 50, 50);

        player1PowerField = new JTextField(3);
        player1PowerField.setLayout(null);
        player1PowerField.setBounds(400, 10, 50, 25);

        player1AngleLabel = new JLabel("Angle");
        player1AngleLabel.setLayout(null);
        player1AngleLabel.setBounds(30, 10, 50, 50);

        player1AngleField = new JTextField(3);
        player1AngleField.setLayout(null);
        player1AngleField.setBounds(300, 10, 50, 25);

        //player2 angle/power fields
        player2PowerLabel = new JLabel("Power");
        player2PowerLabel.setLayout(null);
        player2PowerLabel.setBounds(0, 0, 10, 10);

        player2PowerField = new JTextField(3);
        player2PowerField.setLayout(null);
        player2PowerField.setBounds(10, 10, 10, 10);

        player2AngleLabel = new JLabel("Angle");
        player2AngleLabel.setLayout(null);
        player2AngleLabel.setBounds(30, 10, 10, 10);

        player2AngleField = new JTextField(3);
        player2AngleField.setLayout(null);
        player2AngleField.setBounds(60, 10, 10, 10);

        //player1 fire button
        p1_fireButton = new JButton("Fire!");
        p1_fireButton.setLayout(null);
        p1_fireButton.setBounds(430, 70, 50, 50);
        ActionListener fireListener = new fireButtonListener();
        p1_fireButton.addActionListener(fireListener);

        //player2 fire button
        p2_fireButton = new JButton("Fire AGAIN!");
        p2_fireButton.setLayout(null);
        p2_fireButton.setBounds(530, 70, 50, 50);

        //add components to player1 panel
        p1_Panel.add(p1_fireButton);
        p1_Panel.add(player1PowerLabel);
        p1_Panel.add(player1PowerField);
        p1_Panel.add(player1AngleLabel);
        p1_Panel.add(player1AngleField);

        //add components to player2 panel
        p2_Panel.add(p2_fireButton);
        p2_Panel.add(player2PowerLabel);
        p2_Panel.add(player2PowerField);
        p2_Panel.add(player2AngleLabel);
        p2_Panel.add(player2AngleField);

        //add components to GameFrame
        add(p1_Panel);
        //add(p2_Panel);

        projectile.fireProjectile(60, -60 * Math.PI / 180.0);

    } //end GameFrame constructor

    public void paint(Graphics g)
    {
        Graphics2D g2 = (Graphics2D) g;

        Image bg = background.getImage();
        Image t1 = terrain1.getImage();
        Image p1tank = StartPanel.getPlayer1Tank();
        Image p2tank = StartPanel.getPlayer2Tank();
        //Image tank1 = tank_red.getImage();

        g2.drawImage(bg,  0, 0, 1000, 800, this);
        g2.drawImage(t1,  0, 420, 1000, 380, this);

        g2.drawImage(p1tank, 50, 300, 66, 50, null);
        g2.drawImage(p2tank, 500, 300, 66, 50, null);

        player1Name = new String(StartPanel.getPlayer1Name());
        player2Name = new String(StartPanel.getPlayer2Name());

        g.drawString(player1Name, 50, 50);
        g.drawString(player2Name, 525, 50);

        g2.setColor(Color.green);
        g2.fillOval((int)projectile.getXPosition(), (int)projectile.getYPosition(), 15, 15);

    }

    public class timer implements ActionListener
    {

        public void actionPerformed(ActionEvent e)
        {    
            //TanksGUI.gameFrame.moveRectangle(1, 1);
            projectile.advanceProjectile(0.05);

            if (projectile.getYPosition() > 400)
            {
                gameTimer.stop();
            }
            repaint();

        }

    }
    public class fireButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {

            gameTimer.start();
        }
    }

} //end class GameFrame 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:50:38.730

*   不要扩展`JFrame`你没有添加任何创建实例无法实现的功能。它还使您的项目不可移植。
*   不要覆盖`paint`顶级容器。如果没有其他原因，它们不是双缓冲的，如果你想执行动画，这会给你带来问题。`paint`顶级容器的链相当复杂，您只是绕过了整个过程。
*   相反，创建一个自定义组件（从类似的东西`JPanel`）并将其用作您的主要画布。覆盖它的`paintComponent`方法并渲染你的背景，确保你`super.paintComponent`先调用。
*   确保您放置在此“画布”上的任何容器都是透明的，否则您的背景将不会显示。

查看[在 AWT 和 Swing中](http://www.oracle.com/technetwork/java/painting-140037.html)[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和绘画以获取更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T03:42:44.460

查看[BackgroundPanel](http://tips4java.wordpress.com/2008/10/12/background-panel/)以帮助您解决此问题。基本代码是：

```
JPanel north = new JPanel();
north.add( new JLabel(...) );
north.add( new JTextField(10) );
JPanel gamePanel = new GamePanel();
BackgroundPanel background = new BackgroundPanel(...);
background.add(north, BorderLayout.North);
background.add(gamePanel);
frame.add(background); 
```

GamePanel 是您为游戏角色进行所有自定义绘画的面板。正如 MadProgrammer 所指出的，这种绘制永远不应该在框架的 paint() 方法中完成。

# css - 如何在列表元素上有一个“海绵状”高度

> ID：15238021
> 
> 赞同：2
> 
> 时间：2013-03-06T02:42:40.807
> 
> 标签：css, dynamic, height

我正在寻找一种方法，在纯 CSS 中，拥有动态“海绵”高度元素

你有一个设定高度的列表，根据列表元素的数量，它们的组合高度总共占 UL 高度的 100%

例如，1 个元素为 100% 高度，2 个元素均为 50%，3 个元素为 33%，等等...

我已经设置了一个最小高度，所以它不会低于一定的大小，但我遇到的问题是元素 2-n 被第一个元素完全推出了它们的 UL（它占用了整个 100 % 高度）——而不是像我想要的那样像海绵一样。

也许我错过了一些强制列表元素留在其容器内的属性，或者一些使列表元素缩小直到它们达到最小高度的魔法属性？

快把我逼疯了。

这是一个尝试的小提琴：http: [//jsfiddle.net/CruDOmatic/nYMp7/](http://jsfiddle.net/CrudOMatic/nYMp7/)

CSS：

```
.container { height: 104px; }
.entry-value {
    width: 100%;
    height: 100%;
    min-height: 104px;
    max-height: 104px;
    margin: 0;
    padding: 0;
    background: #ffd300;
    list-style: none;
    display: block;
    overflow: hidden;
}
.entry-value li {
    width: 100%;
    height: 100%;
    min-height: 23px;
    max-height: 100%;
    border-bottom: solid #000000 1px;
    display: block;
    overflow: hidden;
} 
```

HTML：

```
<div class="container">
    <ul class="entry-value">
        <li>Text 1</li>
        <li>Text 2</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:52:11.113

您可以使用这个技巧，它使用第一项和最后一项之间的关系..
（*需要每个行数的规则*）

```
/* 1 item */
.entry-value li:first-child:nth-last-child(1) {
    height: 100%;
}

/* 2 items */
.entry-value li:first-child:nth-last-child(2),
.entry-value li:first-child:nth-last-child(2) ~ li {
    height: 50%;
}

/* 3 items */
.entry-value li:first-child:nth-last-child(3),
.entry-value li:first-child:nth-last-child(3) ~ li {
    height: 33.3333%;
}

/* 4 items */
.entry-value li:first-child:nth-last-child(4),
.entry-value li:first-child:nth-last-child(4) ~ li {
    height: 25%;
} 
```

演示在[http://jsfiddle.net/gaby/nYMp7/1/](http://jsfiddle.net/gaby/nYMp7/1/)

* * *

（*归功于[具有 CSS3 选择器](http://andr3.net/blog/post/142)和[基于兄弟计数的样式元素的](http://lea.verou.me/2011/01/styling-children-based-on-their-number-with-css3/)*Clever 列表）

# ruby-on-rails - Thinking Sphinx——在配置文件中找不到索引

> ID：15238022
> 
> 赞同：5
> 
> 时间：2013-03-06T02:42:44.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, thinking-sphinx

尝试使用 Thinking Sphinx 进行搜索。通过自制软件安装 TS 和 MySQL（尽管我在我的应用程序中使用 pg，这显然是必需的），在[此 Railscast](http://railscasts.com/episodes/120-thinking-sphinx-revised)之后，将这些行添加到我的 gemfile 中：

```
gem 'mysql2'
gem 'thinking-sphinx' 
```

并将以下内容放入我的模型中，低于其他所有内容

**post.rb**

```
class Post < ActiveRecord::Base
    #...

    define_index do 
      indexes content
      indexes :name
    end
end 
```

然后我进入终端并尝试 rake ts:index，但我收到此错误：

```
 using config file '/Users/<personal>/rails_projects/<personal>/config/development.sphinx.conf'...
    FATAL: no indexes found in config file '/Users/<personal>/rails_projects/<personal>/config/development.sphinx.conf' 
```

[在](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CEEQFjAB&url=https://github.com/pat/thinking-sphinx/issues/412&ei=gK02UcFT0ayoAaqLgaAE&usg=AFQjCNGNhPbVdOnUbAyahbxoa6dbgH7bGg&bvm=bv.43287494,d.aWM) [互联网上](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEkQFjAC&url=http://www.ruby-forum.com/topic/162963&ei=gK02UcFT0ayoAaqLgaAE&usg=AFQjCNFi_HQNtFPh7miHfc3GA0TGIbHjKw&bvm=bv.43287494,d.aWM)[四处](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://groups.google.com/group/thinking-sphinx/browse_thread/thread/2431d6ca8788f478/bc67f969f344a1d7&ei=gK02UcFT0ayoAaqLgaAE&usg=AFQjCNECF6cMZhG7KL_UiHCrji0b8qqJag&bvm=bv.43287494,d.aWM)寻找，并没有找到任何可以回答这个问题的答案。我试过运行 rake ts:configure（它不会抱怨）然后 rake ts:index，但它不起作用。

一些背景知识：我刚刚更改了我的终端外壳（使用 zsh），这做出了各种奇怪的意外更改。我不得不重新安装捆绑器，然后重新捆绑安装我所有的 gem，然后独立 gem install rake。然后我捆绑更新以获得良好的衡量标准。现在 rake 似乎工作，但我仍然得到错误。

错误抱怨的配置文件：

```
indexer
{
}

searchd
{
  listen = 127.0.0.1:9306:mysql41
  log = /Users/<personal>/rails_projects/<personal>/log/development.searchd.log
  query_log = /Users/<personal>/rails_projects/<personal>/log/development.searchd.query.log
  pid_file = /Users/<personal>/rails_projects/<personal>/log/development.sphinx.pid
  workers = threads
  binlog_path = /Users/<personal>/rails_projects/<personal>/tmp/binlog/development
} 
```

任何想法发生了什么/答案可能在什么代码中？

**有趣的更新——我按照**[这个 Google Group](https://groups.google.com/forum/?fromgroups=#!topic/thinking-sphinx/JDHWyoeI9Hg)上的问答进入我的 rails 控制台并输入“Post.sphinx_indexes.length”，但我得到了这个非常不同的错误作为回报。看起来我的模型不知何故无法访问宝石？

```
NoMethodError: undefined method `define_index' for #<Class:0x007f9c06c611b0>
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/dynamic_matchers.rb:55:in `method_missing'
        from /Users/<personal>/rails_projects/<personal>/app/models/post.rb:55:in `<class:Post>'
        from /Users/<personal>/rails_projects/<personal>/app/models/post.rb:13:in `<top (required)>'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:469:in `load'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:469:in `block in load_file'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:468:in `load_file'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:353:in `require_or_load'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:190:in `each'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:190:in `const_missing'
        from (irb):1
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
        from /Users/<personal>/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'irb(main):002:0> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T07:51:50.603

还将这个问题发布到 Thinking Sphinx Google Group 并在那里得到了答案，所以我将其粘贴在下面。在回答了上述问题后，我遇到了另一个错误并在那里跟进，所以如果有人想要更多信息，[这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/thinking-sphinx/BTgd3_cGF-0)应该会继续提供帮助。

我引用：

> 嗨 Sasha 问题是 Thinking Sphinx 的文档主要用于 v2，但 v3 是您正在使用的（并且更好）。索引定义现在位于 app/indices - 自述文件是您最好的信息来源（但它未涵盖的任何内容可能与早期版本相同）： [https ://github.com/pat/thinking-sphinx/blob /master/README.textile](https://github.com/pat/thinking-sphinx/blob/master/README.textile)
> 
> 通读一遍，移动你的索引定义，你应该很高兴。有其他问题，请联系：）
> 
> ——帕特

在那之后，我遇到了这个问题，这显然是因为 Sphinx 无法访问我的 PostgreSQL 数据库。

```
indexing index 'post_core'...
ERROR: source 'post_core_0': unknown type 'pgsql'; skipping.
ERROR: index 'post_core': failed to configure some of the sources, will not index.
total 0 reads, 0.000 sec, 0.0 kb/call avg, 0.0 msec/call avg
total 0 writes, 0.000 sec, 0.0 kb/call avg, 0.0 msec/call avg 
```

我通过卸载 Sphinx 和两个 gem（thinking_sphinx 和 mysql2）来解决这个问题，然后用 mysql 和 pgsql 标志 brew 安装 Sphinx，然后重新安装 gem。

在那之后， rake ts:index 就像一个魅力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-11T19:39:13.787

另一个可能的错误来源是文件夹和文件的命名。额外的空格或拼写为“i”的索引将无法识别文件，因此不会生成任何索引。

那些需要 yonks 才能看到的东西……

[就我而言，这种情况并不罕见！]

# javascript - 将 PHP 脚本应用于单个文本框

> ID：15238026
> 
> 赞同：0
> 
> 时间：2013-03-06T02:43:26.097
> 
> 标签：javascript, jquery, textbox

我想得到一个简单的答案。

我在页面上有一个名为“ref”的文本框。填写并输入后，它会将用户带到 www.website.com/$ref.php。

我需要他们的输入为大写以匹配目录，因此我添加了此代码来更改他们键入的内容。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$(document).ready(function() {
$("input").keyup(function() {
    var val = $(this).val()
    $(this).val(val.toUpperCase())
 })
})
</script> 
```

这很好用，但它适用于页面上的所有文本框。

如何将脚本限制为文本框“ref”和/或是否有更好的方法来实现相同的效果。

“如果 (textbox-name=ref) 然后应用脚本”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:47:07.730

使用您已有的 jQuery 选择器：

```
$("input").keyup(function() { 
```

像这样改变它：

```
$('input[name="ref"]').keyup(function() { 
```

这将只选择一个文本框并将 keyup 事件分配给它。 **jQuery 选择器就像 css 选择器一样工作。**

但是，如果您想确保这是唯一附加此 keyup 功能的元素，请使用 ID 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:47:56.403

您以什么方式将此文本框称为“参考”？如果您有 class="ref" 作为它的属性，请将 jQuery 中的选择器更改为 input.ref。如果您有 id="ref"，请将其更改为 input#ref。但是无论如何你都可以在 php 中更好地做到这一点（使用 strtoupper）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:47:21.793

按 id 选择输入，

```
$("#ref"). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T02:47:40.677

您当前的代码将 JQuery 代码应用于所有`input`元素。要挑出那个，请将 an`id`应用于文本框，例如`id="ref"`. `id`然后你只需在你的javascript中引用它：

```
$(document).ready(function() {
  $("#ref").keyup(function() {
    var val = $(this).val()
    $(this).val(val.toUpperCase())
  })
}) 
```

您还应该阅读[JQuery 选择器](http://learn.jquery.com/using-jquery-core/selecting-elements/)。

# android - 安卓线程

> ID：15238028
> 
> 赞同：0
> 
> 时间：2013-03-06T02:43:45.470
> 
> 标签：android, multithreading, handler, toast

我正在尝试创建一个线程并使用 Hander 来显示 Toast 消息。

当我运行程序时，模拟器什么都不显示！

我对线程完全陌生。

请帮我解决这个问题:)

```
package com.example.android_thread_hu;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_main);
        thread.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);    
        return true;
    }

    Thread thread = new Thread(new Runnable() { 
        @Override
        public void run() { 
            handler.handleMessage(null) ;
       } 
    });

    public Handler handler = new Handler(){    
        public void handleMessage() {
            Toast.makeText(
                    MainActivity.this,
                    "finish!!!!",
                    Toast.LENGTH_SHORT).show();
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:51:37.320

尝试像这样声明你的线程：

```
Thread thread = new Thread(new Runnable() { 
    @Override
    public void run() { 
        handler.sendEmptyMessage() ;
   } 
}); 
```

另外，请确保`Toast.LENGTH_SHORT`不要太短并且消息褪色太快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:01:22.110

我认为线程太复杂了

```
package com.example.android_thread_hu;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.app.Activity;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_main);
    thread.start();
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);

    return true;
  }
  Thread thread=new Thread(new Runnable() 
                             { Message message;
    String obj="run";
    @Override
    public void run() 
    { 
      message = handler.obtainMessage(1,obj);
      handler.sendMessage(message);
    } 
  });

  public Handler handler = new Handler(){ 
    @Override
    public void handleMessage(Message msg) {
      super.handleMessage(msg);
      String MsgString = (String)msg.obj;
      if (MsgString.equals("run"))
      {
        //do something

        Toast.makeText(MainActivity.this,"finish!!!!",Toast.LENGTH_SHORT).show();

      }

    }
  };
} 
```

# javascript - 如何垂直对齐颜色框中的文本？

> ID：15238029
> 
> 赞同：1
> 
> 时间：2013-03-06T02:44:07.090
> 
> 标签：javascript, php, jquery, css, vertical-alignment

如何垂直对齐 cboxTitle-div 内的文本（例如 close-Box(text)）？我使用[colorbox](http://www.jacklmoore.com/colorbox)制作模态弹出窗口。非常感谢任何帮助！

div结构是这样的：

```
<div id="cBoxContent">
    <div id="cBoxTitle"></div>
</div> 
```

CSS 代码：

```
#cboxContent{overflow:hidden; background: #121219;
}
#cboxTitle{position:absolute; top:0; left:0; text-align:left; width:100%; color:#999; height: 38px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:46:36.733

`line-height`您可以通过将其属性设置为其所在元素的高度来垂直居中文本。

```
#cboxTitle{
    position:absolute; 
    top:0; 
    left:0; 
    text-align:left; width:100%; 
    color:#999; 
    height: 38px;
    line-height: 38px;
} 
```

当然，这个技巧只有在你知道你的高度时才有效`div`。[还有](http://phrogz.net/css/vertical-align/index.html) [其他](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html) [方法](http://web.archive.org/web/20091017204329/http://www.zann-marketing.com/developer/20050518/vertically-centering-text-using-css.html)，但它们更复杂。

另一种未链接的方法是将`div`包含您的文本设置为`position: relative;`，然后设置`top`为 50% 减去元素高度的一半。这最好在 Javascript 中完成。

# java - 无法保存使用应用程序拍摄的图像？

> ID：15238030
> 
> 赞同：0
> 
> 时间：2013-03-06T02:44:39.283
> 
> 标签：java, android, eclipse, camera, storage

我花了很多时间试图解决这个微不足道的问题，但即使在阅读了许多教程和以前提出的问题之后，我似乎也陷入了困境。我是编程新手，但想变得更好，并相信从错误中学习是最好的方法。

有人可以帮助确定此代码的问题以及可以做些什么来允许设备相机拍摄的照片随后保存到手机上，而不是被丢弃和预览。

提前致谢！

相关类的 Java 代码：

```
import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.ImageButton;
import android.widget.ImageView;

public class Activity_Camera extends Activity implements View.OnClickListener {

    public static final int cameraData = 1;

    ImageButton ib;
    ImageView iv;
    Intent i;
    Bitmap bmp;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.Info:

            Intent i = new Intent(this, Help.class);
            startActivity(i);

            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);
        initialise();
    }

    private void initialise() {
        iv = (ImageView) findViewById(R.id.ivPicReturn);
        ib = (ImageButton) findViewById(R.id.ibTakePic);

        ib.setOnClickListener(this);
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.ibTakePic:
            i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            //
            i.putExtra(MediaStore.EXTRA_OUTPUT, getOutputMediaFileUri());
            //
            startActivityForResult(i, cameraData);
            break;
        }
    }
    //
    private String getOutputMediaFileUri() {
        File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
        imagesFolder.mkdirs();   
        File image = new File(imagesFolder, "image.jpg");
        Uri uriSavedImage = Uri.fromFile(image);
        Intent imageIntent = null;
        imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);       
        return null;
    }
    //
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK) {
            Bundle extras = data.getExtras();
            bmp = (Bitmap) extras.get("data");
            iv.setImageBitmap(bmp);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:56:46.463

因为你在你的返回 `return null;`null`getOutputMediaFileUri`

试试这个

```
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.ibTakePic:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        i.putExtra(MediaStore.EXTRA_OUTPUT, getOutputMediaFileUri());
        startActivityForResult(i, cameraData);
        break;
    }
}

private Uri getOutputMediaFileUri() {
    File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
    imagesFolder.mkdirs();   
    File image = new File(imagesFolder, "image.jpg");
    return Uri.fromFile(image);
} 
```

# c# - Windows 服务总线 - 多个接收器

> ID：15238033
> 
> 赞同：2
> 
> 时间：2013-03-06T02:45:12.390
> 
> 标签：c#, service, servicebus

我正在玩我在本地机器上安装的 Windows 服务总线（不是 Azure）。我按照这里的例子，但换成了我的本地实例： http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/)

我现在设置了两个控制台应用程序，一个是接收器，另一个是发送器。接收者只是监听新消息并执行输出的 console.writeline：

```
// Continuously process messages sent to the "TestQueue" 
            while (true)
            {
                BrokeredMessage message = Client.Receive();

                if (message != null)
                {
                    try
                    {
                        Console.WriteLine("Body: " + message.GetBody<string>());
                        Console.WriteLine("MessageID: " + message.MessageId);
                        Console.WriteLine("Test Property: " +
                           message.Properties["TestProperty"]);
                        Console.WriteLine("----------------------");

                        // Remove message from queue
                        message.Complete();
                    }
                    catch (Exception)
                    {
                        // Indicate a problem, unlock message in queue
                        message.Abandon();
                    }
                }
            } 
```

接下来我有我的发件人：

```
 while (true)
            {

                // Create message, passing a string message for the body
                BrokeredMessage message = new BrokeredMessage("Test message " + i);

                // Set some addtional custom app-specific properties
                message.Properties["TestProperty"] = "TestValue";
                message.Properties["Message number"] = i;

                // Send message to the queue
                Client.Send(message);

                i++;

                System.Threading.Thread.Sleep(50);
            } 
```

这实际上一切都很好。我可以启动 1 个接收者，发送者和我可以看到消息。然后我启动第二个接收器，消息自动在两个接收器之间来回传递。

但是，当我启动第三个接收器时，第一个接收器停止接收消息（直到另一个接收器退出）。

有没有办法让所有三个（或“n”）接收器处理来自队列的消息？我认为队列设置中可能会有一个设置，但我似乎找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:38:37.060

如果您减少发送者的睡眠，第一个接收者是否开始检索消息？可能是您的队列被过度读取，因此第二个和第三个接收者碰巧检索消息，但第一个接收者无法检索消息，因为队列为空。

您的目标是让独立的读者处理队列，还是在进行一对多通信后，每个接收者都有机会处理消息？如果是这样，那么您应该考虑使用[Topics 和 Subscriptions](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/)。

# postgresql - 为什么 psql 找不到现有表的关系名称？

> ID：15238034
> 
> 赞同：54
> 
> 时间：2013-03-06T02:45:23.390
> 
> 标签：postgresql, schema, psql

这是我目前的状态。

```
Eonil=# \d+
                       List of relations
 Schema |    Name    | Type  | Owner |    Size    | Description 
--------+------------+-------+-------+------------+-------------
 public | TestTable1 | table | Eonil | 8192 bytes | 
(1 row)

Eonil=# \d+ TestTable1
Did not find any relation named "TestTable1".
Eonil=# 
```

有什么问题，如何查看表定义？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-06T02:46:31.207

Postgres psql 需要转义大写字母。

```
Eonil=# \d+ "TestTable1" 
```

所以这很好用。

```
Eonil=# \d+ "TestTable1"
                   Table "public.TestTable1"
 Column |       Type       | Modifiers | Storage  | Description 
--------+------------------+-----------+----------+-------------
 ID     | bigint           | not null  | plain    | 
 name   | text             |           | extended | 
 price  | double precision |           | plain    | 
Indexes:
    "TestTable1_pkey" PRIMARY KEY, btree ("ID")
    "TestTable1_name_key" UNIQUE CONSTRAINT, btree (name)
Has OIDs: no

Eonil=# 
```

# git - 来自 debian virtualbox 的 git clone

> ID：15238035
> 
> 赞同：2
> 
> 时间：2013-03-06T02:45:25.520
> 
> 标签：git, vagrant

我有一个运行 git 存储库的 vagrant box，我可以从我的主机推送到它，但是当我尝试从中克隆时出现以下错误。

```
$git clone git://staging.debian:joomz.git 
```

给我以下错误

```
fatal: unable to connect to :
[0: fe80::357a:dab1:e84c:b263%25]: errno=No error
[1: fe80::8461:42b0:cd03:9b1%13]: errno=No error
[2: 192.168.56.1]: errno=No error
[3: 192.168.1.110]: errno=No error 
```

如您所见，ip`192.168.56.1`属于 staging.debian(my VM) 而另一个是我的主机。我对 git 很陌生。您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:06:20.020

我想通了，因为 Git 不进行访问控制，所以我需要类似 gitolite 的东西（或任何其他变体，有很多选择）。

如果您需要帮助，请遵循本指南： http: [//git-scm.com/book/ch4-8.html](http://git-scm.com/book/ch4-8.html)它非常易于使用。干杯。

# c# - SharePoint - 确定创建网站的自定义网站模板

> ID：15238040
> 
> 赞同：1
> 
> 时间：2013-03-06T02:45:41.523
> 
> 标签：c#, sharepoint-2010

我使用“站点设置”来“将站点另存为模板”，然后使用该自定义站点模板创建几个站点（或者我应该将其称为解决方案吗？）

如何让我的 C# 确定哪些网站是从此自定义网站模板创建的？

请注意，无论站点是否使用此自定义模板创建，SPWeb 的 .WebTemplate、.WebTemplateId 和 .Configuration 都会分别返回“STS”、1 和 1。我认为这是因为他们正在报告基础 SharePoint 开箱即用模板。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T14:33:23.463

为什么不在网络的 PropertyBag 中添加一个条目？以“web_template_id”为键，模板的 ID 或名称作为值。您可以使用 SharePoint Designer 轻松完成此操作，并且 PropertyBag 作为 Web 模板 WSP 的一部分包含在内。

或者，如果将模板导入 Visual Studio，则可以以声明方式将条目添加到 Web 的属性包中，如下所示：

```
<Property Name="web_template_id" Value="SiteTemplates.TemplateName" Type="string" /> 
```

这是一个从代码中 SPWeb 对象的 AllProperties 集合中获取自定义模板名称的简单案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:09:21.760

From [http://www.go4sharepoint.com/Forum/determine-site-template-site-11323.aspx](http://www.go4sharepoint.com/Forum/determine-site-template-site-11323.aspx)

> You can use a combination of the WebTemplate and Configuration properties of the SPWeb object to find out which template the site was originally built from. The WebTemplate will contain something like "STS" which is the name of the subdirectory in the 12 hive Template/sitetemplates directory containing the site definition. The Configuration will correspond to the Configuration ID inside the onet.xml in that subdirectory. However there are a couple issues with this.

This is a reference that is pertains to SharePoint 2007, but I believe the core concepts still apply, except for any reference to the "12" hive, should refer to the "14" hive.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:41:07.493

要了解发生了什么，您需要了解 SharePoint 中网站定义和 Web 模板之间的区别：

*   [站点类型：Web 模板和站点定义](http://msdn.microsoft.com/en-us/library/ms434313%28v=office.14%29.aspx)
*   [站点定义与站点模板并确定正确的自定义方法](http://blogs.msdn.com/b/brianwilson/archive/2008/07/13/site-definitions-versus-site-templates-and-deciding-on-the-correct-customization-approach.aspx)

虽然经常互换使用，但它们是不同的，并且在 SharePoint 中的处理方式也不同。站点定义，无论是开箱即用的还是自定义的，都存在于 14 个 hive\TEMPLATE\SiteTemplates 中。另一方面，Web 模板将站点定义实例的自定义设置保存到 .stp 或 .wsp 文件中，从而允许在其他站点实例中复制该站点。

所以，真正的问题是：即使是微软也对站点定义和 Web 模板之间的区别感到困惑。因为当他们命名 WebTemplate 属性时，他们指的是站点定义，而不是 Web 模板。

请注意 MSDN 所说的：

> [SPWeb.WebTemplate 属性](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.webtemplate%28v=office.14%29.aspx)
> 
> 当您通过将网站另存为模板来创建自定义网站模板，然后从该模板创建新网站时，WebTemplate 属性包含派生自定义模板**的*网站定义*的名称，而不是自定义模板的名称**。因此，如果用于创建自定义模板的网站本身是根据标准团队网站定义创建的，则从新模板创建的所有网站的 WebTemplate 属性将返回“STS”
> 
> [SPWeb.Configuration 属性](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.configuration%28v=office.14%29.aspx)
> 
> 当您通过将站点另存为模板来创建站点模板，然后从该模板创建站点时，配置属性 **包含站点模板派生的*站点定义***配置的 ID 。

（强调我的）

这支持您在问题中发现的内容。那么，您如何确定用于创建站点的自定义 Web 模板呢？我不确定这是否可能。因为如果可能的话，我希望 MSDN 会再提供一两句话来说明如何完成他们刚刚解释过的这些属性不具备的功能。另外，在搜索中，我发现这个问题被问了几次，但从来没有一个令人满意的答案。

# c# - 如何显示阻止 OpenFileDialog 类在 C# 中关闭的错误？

> ID：15238041
> 
> 赞同：-3
> 
> 时间：2013-03-06T02:46:06.027
> 
> 标签：c#, winforms, openfiledialog

我正在创建一个基本的绘图程序，用户可以通过单击类中的某个 .png 文件来打开项目。我正在使用 System.Windows.Forms.OpenFileDialog 类。如果用户尝试打开错误的文件，我怎样才能使对话框显示错误而不关闭？例如：我希望用户单击文件“name.png”，但用户单击名为“picture.png”的文件。现在出现一个错误，要求用户查找“name.png”并且不关闭对话框。

这是我的代码：

```
 OpenFileDialog openFileDialog = new OpenFileDialog();
        openFileDialog.Filter = "*.png Files|*.png|All files|*.*";
        if (openFileDialog.ShowDialog() == DialogResult.OK)
        {
            if (openFileDialog.FileName.EndsWith(".png"))
            {
                if(openFileDialog.FileName.Equals("name.png"))
                {
                    //name.png found
                }
                else
                {
                    // it was the wrong file!    
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:07:06.783

与其事后检查结果，不如将过滤器设置为`Name file|name.png`.

这样，用户只能选择您想要的文件，而无需进行额外的检查。

# c - 在C中发送图像文件

> ID：15238044
> 
> 赞同：2
> 
> 时间：2013-03-06T02:46:33.517
> 
> 标签：c, sockets, send, fopen, fread

我使用此代码为我的小型 HTTP 服务器发送二进制文件

```
/* send binary data to client */

void send_binary(int sock_fd, char *file_name)
{

    int buff_size = 10240;
    char buff[buff_size];
    long file_size;
    FILE *pFile;
    size_t result;
    if ( (pFile = fopen(file_name, "rb")) == NULL){
        error("fopen error\n");
    }

    while( (result = fread(buff, 1, buff_size, pFile)) == buff_size){
        send(sock_fd, buff, buff_size, 0);
        buff[0] = '\0';
    }
    if (result > 0){
        if(feof(pFile)){
            send(sock_fd, buff, result, 0);
        }
        else{
            error("read error\n");
        }
    }
    fclose(pFile);

} 
```

它适用于文本，但不适用于 jpeg 文件。接收到的图像文件已损坏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T02:57:02.893

`fread`不能保证在每次读取时都填充缓冲区，因此您应该只提供给您`send`的字节数。当你没有得到一个完整的缓冲区`fread`时，你可能会提前跳出循环。`fread`尝试类似：

```
while (( result = fread( buff, 1, buff_size, p_file )) > 0 ) {
    send( sock_fd, buff, result, 0 );
} 
```

# internet-explorer - @font-face 不适用于在 XP 上运行的 IE

> ID：15238046
> 
> 赞同：0
> 
> 时间：2013-03-06T02:46:45.127
> 
> 标签：internet-explorer, fonts, font-face, webfonts

问题示例：[http ://www.osdev.org/squirrel/card.html](http://www.osdev.org/squirrel/card.html)

问题示例2：[http ://www.osdev.org/squirrel/dejavusans-demo.html](http://www.osdev.org/squirrel/dejavusans-demo.html)

我正在寻找使用 Unicode 6 U+1F0A0–1F0FF 范围（Playind Card Block）[http://unicode.org/charts/PDF/U1F0A0.pdf](http://unicode.org/charts/PDF/U1F0A0.pdf)的符号，但即使是 ascii 范围的字符也不会以字体和在 IE/XP 上使用的任何字体都没有扑克牌块的符号。

DejaVu Sans 2.33 版添加了扑克牌，ttf 字体可在[http://dejavu-fonts.org/wiki/Main_Page 获得](http://dejavu-fonts.org/wiki/Main_Page)。

*   我已经尝试了所有能找到的 EOT 生成器。第二个示例是[http://www.fontsquirrel.com](http://www.fontsquirrel.com)生成的演示页面。
*   我试过只制作 IE 页面，以防 CSS 字体 url 没有被正确拾取。
*   在通过 eot 生成器运行字体之前，我在原始 ttf 上使用了 FontForge 以使所有系列、唯一名称等匹配。

如果我在本地安装 ttf（在 Windows XP 字体文件夹中），我可以使用没有 font-face 的 css font-family 在 IE 中显示字体，但我不能要求每个人都这样做。

Windows 7 上的 IE8 似乎可以工作，但 Windows XP 上的 IE6、IE7 和 IE8 都失败了。就像 font-face 在 XP 上没有做任何事情一样。

有什么建议么？我先在[http://www.fontsquirrel.com](http://www.fontsquirrel.com)论坛上询问过，但没有收到任何回复。

编辑：澄清一下，XP 上的 IE 将扑克牌呈现为一个空方块，与系统无法显示任何字符时使用的“空白”符号相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:55:48.367

看看你的服务器设置。我在 Mac 上使用 Chrome，所以我实际上无法“看到”您的问题。

但我查看了您字体文件的 Response-Headers 中的内容类型。是`Content-Type: text/plain; charset=UTF-8`。我认为这是你的问题。

您应该更改服务器的设置以使响应具有正确的`Content-Type`. 或者 IE 可能认为该文件不是有效的字体文件。

尝试谷歌“字体文件内容类型”以获取更多信息。

我认为这也会对你有所帮助。[https://stackoverflow.com/a/10864297/1061004](https://stackoverflow.com/a/10864297/1061004)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T13:26:49.773

包括两种字体，第一种用于 IE，其余用于所有其他浏览器。

```
@font-face {
  font-family: "SocialFoundicons";
  src: url("//www.tintup.com/public/css/foundation_icons_social/social_foundicons.eot");
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: "SocialFoundicons";
  src: url("//www.tintup.com/public/css/foundation_icons_social/social_foundicons.eot"),
   url("//www.tintup.com/public/css/foundation_icons_social/social_foundicons.eot?#iefix") format("embedded-opentype"),
   url("//www.tintup.com/public/css/foundation_icons_social/social_foundicons.woff") format("woff"), 
   url("//www.tintup.com/public/css/foundation_icons_social/social_foundicons.ttf") format("truetype"), 
   url("//www.tintup.com/public/css/foundation_icons_social/social_foundicons.svg#SocialFoundicons") format("svg");
  font-weight: normal;
  font-style: normal;
} 
```

# android - phonegap 错误没有在 codeigniter 上上传文件

> ID：15238049
> 
> 赞同：0
> 
> 时间：2013-03-06T02:47:16.073
> 
> 标签：android, codeigniter, cordova, image-uploading

我正在尝试使用服务器端的 phonegap 和 codeigniter 将图片上传到服务器

这是php代码

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Upload extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->helper(array('form', 'url'));
}

function index()
{
    $this->load->view('upload_form', array('error' => ' ' ));
}

function do_upload()
{
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '1000';
    $config['max_width']  = '1600';
    $config['max_height']  = '1600';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());
         echo $error;
        //$this->load->view('upload_form', $error);
    }
    else
    {

        $data = array('upload_data' => $this->upload->data());
        echo "success";
        //$this->load->view('upload_success', $data);
    }
} 
```

} ?>

这是phonegap中的代码

```
 var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="image/jpeg";
        options.chunkedMode = false;

        var params = {};
        params.value1 = "test";
        params.value2 = "param";

        options.params = params;

        var ft = new FileTransfer();
        ft.upload(imageURI, encodeURI("http://mywebsite.com/upload/do_upload"), win, fail, options, true); 
```

这是日志猫

```
03-06 10:29:52.510: D/FileTransfer(5732): upload file:///mnt/sdcard/Android/data/com.fileupload.test/cache/1362536991781.jpg to http://soovy.me/upload/do_upload
03-06 10:29:52.510: D/FileTransfer(5732): fileKey: file
03-06 10:29:52.510: D/FileTransfer(5732): fileName: 1362536991781.jpg
03-06 10:29:52.510: D/FileTransfer(5732): mimeType: image/jpeg
03-06 10:29:52.510: D/FileTransfer(5732): params: {"value1":"test","value2":"param"}
03-06 10:29:52.510: D/FileTransfer(5732): trustEveryone: true
03-06 10:29:52.510: D/FileTransfer(5732): chunkedMode: false
03-06 10:29:52.510: D/FileTransfer(5732): headers: null
03-06 10:29:52.510: D/FileTransfer(5732): objectId: 1
03-06 10:29:52.540: D/FileTransfer(5732): String Length: 256
03-06 10:29:52.540: D/FileTransfer(5732): Content Length: 23677
03-06 10:29:54.930: D/FileTransfer(5732): got response from server
03-06 10:29:54.930: D/FileTransfer(5732): <p>You did not select a file to upload.</p>
03-06 10:29:54.940: D/CordovaLog(5732): Code = 200
03-06 10:29:54.940: I/Web Console(5732): Code = 200 at file:///android_asset/www/index.html:400
03-06 10:29:54.950: D/CordovaLog(5732): Response = <p>You did not select a file to upload.</p>
03-06 10:29:54.950: I/Web Console(5732): Response = <p>You did not select a file to upload.</p> at file:///android_asset/www/index.html:401
03-06 10:29:54.950: D/CordovaLog(5732): Sent = 23421
03-06 10:29:54.950: I/Web Console(5732): Sent = 23421 at file:///android_asset/www/index.html:402 
```

但是我在 php 上遇到错误**您没有选择要上传的文件，**但由于 logcat 声明它发送 23421，所以发送了图像。我还用发送图像的正常形式测试了 php，它可以工作。

更新：

对于其他尝试从 phonegap 上传上传的人，请使用此代码

[对于来自http://zacvineyard.com/blog/2011/03/upload-a-file-to-a-remote-server-with-phonegap](http://zacvineyard.com/blog/2011/03/upload-a-file-to-a-remote-server-with-phonegap)的普通 php

```
print_r($_FILES); //to check details of file
$new_image_name = "namethisimage.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "./uploads/".$new_image_name); 
```

对于代码点火器

```
if ( ! $this->upload->do_upload('file'))// file should be stated as dakdad answered 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:25:33.463

该`do_upload`调用需要正确的文件字段名称参数。默认值`userfile`在您的示例中是`file`. 所以该行应该是：

```
if ( ! $this->upload->do_upload('file')) 
```

# java - 后缀程序的中缀。EmptyCollectionException

> ID：15238053
> 
> 赞同：0
> 
> 时间：2013-03-06T02:47:27.657
> 
> 标签：java, algorithm, stack

//这是程序抛出的异常

该程序不会成功编译，它会抛出一个 EmptyCollectionException。

> 线程“main”中的异常 EmptyCollectionException：La colección está vacía：堆栈下溢。
> 
> ```
>  at ArrayStack.peek(ArrayStack.java:57)
>   at Convertidor.convierte(Convertidor.java:58)
>   at postfix.main(postfix.java:20) 
> ```
> 
> Java 结果：1

```
 public class Convertidor {
//This method will calculate the priority of the operators.
        public  int  prioridad(char e){
            int p, prioridad;
            char ch;
            prioridad=0;
            char[] operadores = new char[] { '+', '-', '*', '/','^' };
            for(p=0;p<operadores.length;p++){
                ch=operadores[p];
                if(p=='+'||p=='-')
                    prioridad=1;
                if(p=='/'||p=='*')
                    prioridad=2;
                if(p=='^')
                    prioridad=3;
            }
            return prioridad;
        }

        public  String convierte(String entrada){
            String salida="";
            String resp;
            char e,r,ch;
            String n;
            n="";
            int i, pri,p;
            pri=0;
            StringBuffer buff=new StringBuffer();
            ArrayStack<Character> pila=new ArrayStack<Character>();
            while(!entrada.equals(null)){

                for(i=0;i<entrada.length();i++){
                    e=entrada.charAt(i);
                    if(Character.isDigit(e)){
                         buff.append(salida);
                         buff.append(e);
                      }
                 else
                          if(e=='(')
                              pila.push(e);
                        else        
                               if(e==')'){
                                   while(!pila.isEmpty()&&!pila.peek().equals('(')){
                                      n=pila.pop().toString();
                                      buff.append(n);
                                      buff.append("");
                                    }
                                    }              
                      if(e=='+'||e=='-'||e=='*'||e=='/'||e=='^'){
                     while(prioridad(pila.peek())>=prioridad(e)&&!pila.isEmpty()){
                            buff.append(pila.pop());

                     }
                        pila.push(e); 
                           }

            }
                      while(!pila.isEmpty()){
                         buff.append(pila.pop());
                      }

                }
                salida=buff.toString();
                return salida;

            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:17:57.200

我相信问题出在这条线上：

```
while(prioridad(pila.peek())>=prioridad(e) && !pila.isEmpty()){ 
```

我认为如果您颠倒评估顺序，它应该可以解决问题，因为`&&`如果第一个表达式为假，运算符将短路评估。这样，它将检查堆栈是否为空，并且仅在它不为空时才偷看。

尝试`!pila.isEmpty()`像这样制作第一个操作数：

```
while(!pila.isEmpty() && prioridad(pila.peek())>=prioridad(e)){ 
```

# javascript - 使用 Node JS Cheerio 模块抓取时出现服务器端问题？

> ID：15238057
> 
> 赞同：4
> 
> 时间：2013-03-06T02:47:45.550
> 
> 标签：javascript, meteor, scraper

我想在这里关注这个线程： [如何使用 Meteor 解析 HTML 服务器端？](https://stackoverflow.com/questions/15034453/how-can-one-parse-html-server-side-with-meteor)

不幸的是，这样做时我收到以下错误：

```
Uncaught Error: Can't make a blocking HTTP call from the client; callback required. 
```

这是我的项目的 javascript 代码：

```
var cheerio;

if (Meteor.isClient) {

  Template.entry.events = {
    'click .btn_scrape' : function() {
    $ = cheerio.load(Meteor.http.get("https://github.com/meteor/meteor").content);
    console.log($('.commit-title').text().trim());
    },
 }
}

if (Meteor.isServer) {
  Meteor.startup(function () {
    var require = __meteor_bootstrap__.require;
    cheerio = __meteor_bootstrap__.require('cheerio');
  });

} 
```

如果我将代码放入 Meteor.startup(function()... 没有任何反应，没有错误，也没有任何内容记录到控制台。

我希望能够在单击按钮以获取文本框中的内容并抓取它时调用一个函数，但是一旦我让代码工作，我可以稍后再做。

会有人偶然知道如何解决这个问题吗？

感谢您的时间，

乔纳森。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:02:37.753

服务器和客户端仍然是隔离的。在另一个[帖子](https://stackoverflow.com/questions/15034453/how-can-one-parse-html-server-side-with-meteor) `Meteor.call`中，用于将消息中继到服务器以在那里执行请求并将抓取结果返回给客户端。

您遇到的错误是由于 javascript 在浏览器方面是异步的。有关[此处](http://www.html5rocks.com/en/tutorials/async/deferred/)和[此处](http://www.slideshare.net/clutchski/writing-asynchronous-javascript-101)的更多信息。您需要对客户端代码使用回调，因为从服务器获取数据需要时间。

这是您打算从客户端运行 http 请求吗？在客户端上存在诸如`Access-Control-Allow-Origin.`. 这就是为什么在那篇[文章](https://stackoverflow.com/questions/15034453/how-can-one-parse-html-server-side-with-meteor)中对`Meteor.call`服务器进行了代理请求并将数据返回给客户端的原因。

在您的点击处理程序中，您可以使用[如何使用 Meteor 解析 HTML 服务器端的代码？](https://stackoverflow.com/questions/15034453/how-can-one-parse-html-server-side-with-meteor)和：

```
Template.entry.events = {
 'click .btn_scrape' : function() {
    $('.btn_scrape').attr('disabled','disabled')
    Meteor.call("last_action",function(err,result){
        $('.btn_scrape').removeAttr('disabled')
        console.log(result);
    });
 }
} 
```

在`Meteor.isServer`您的代码部分中，您仍然需要将`last_action`数据代理到浏览器的方法：

```
var cheerio = __meteor_bootstrap__.require('cheerio');
Meteor.methods({
last_action: function() {
       $ = cheerio.load(Meteor.http.get("https://github.com/meteor/meteor").content);
       return $('.commit-title').text().trim()      
    }
}) 
```

# java - 使用 JAVA 反射执行函数

> ID：15238061
> 
> 赞同：-1
> 
> 时间：2013-03-06T02:48:07.463
> 
> 标签：java, class, reflection, methods, reference

我有以下类，当我调用 myClass.doprocess() 时，我应该得到字符串“hai”，我该如何实现呢？

```
public class myClass{
    public int doprocess(){
        dataClass objSt = new dataClass();
        Class newCls = objSt.getClass();
        Method[] methods = newCls.getMethods();
        for (Method method : methods) {
            if(method.getName() == "getList"){
                return method;
            }

        }
    }
 }

class dataClass{
   public String getList(){
        return "hai,";
    }
} 
```

如果我执行上面的代码得到响应

```
public java.lang.String com.myproject.controller.dataClass.getList() 
```

但我需要将响应作为 getList 函数的返回值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:57:10.537

您可以使用[getDeclaredMethod](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)获取具有给定名称和参数集的方法，然后可以使用[Method.invoke(instance, params...)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)调用该方法。

```
class myClass {
    public String doprocess() throws SecurityException, NoSuchMethodException,
            IllegalArgumentException, IllegalAccessException,
            InvocationTargetException {
        dataClass objSt = new dataClass();
        Method m = dataClass.class
                .getDeclaredMethod("getList", (Class<?>) null);
        return (String) m.invoke(objSt, (Object) null);
    }
}

class dataClass {
    public String getList() {
        return "hai,";
    }
} 
```

测试

```
public class Test {

    public static void main(String[] args) throws SecurityException,
            IllegalArgumentException, NoSuchMethodException,
            IllegalAccessException, InvocationTargetException {
        myClass m = new myClass();
        System.out.println(m.doprocess());
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:57:28.150

您当前的代码无法编译，因为您的`doprocess`方法被声明为返回一个`int`但您的方法主体返回`Method`对象。

要使用反射调用方法，请使用[invoke](http://docs.oracle.com/javase/tutorial/reflect/member/methodInvocation.html)。

尝试这个：

```
class myClass {
    public Method doprocess() {
        dataClass objSt = new dataClass();
        Class newCls = objSt.getClass();
        Method[] methods = newCls.getMethods();
        for (Method method : methods) {
            System.out.println(method.getName());
            if (method.getName() == "getList") {
                return method;
            }

        }
        return null;
    }

    public static void main(String[] args) {
        try {
            Method m = new myClass().doprocess();
            if(m != null) System.out.println(m.invoke(new dataClass()));
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

class dataClass {
    public String getList() {
        return "hai,";
    }
} 
```

# unit-testing - Dart 单元测试不起作用

> ID：15238062
> 
> 赞同：0
> 
> 时间：2013-03-06T02:48:20.323
> 
> 标签：unit-testing, dart

我的单元测试在 Dartium 中没有显示任何内容。它应该显示单元测试结果，但它没有显示任何内容。我的代码如下：

```
import "package:unittest/unittest.dart";
import "package:unittest/html_config.dart";
import "../../bolsaviaje/web/bolsaviaje.dart" as bolsaviaje;

void main() {
  useHtmlConfiguration();
  test("PackItem constructor", (){
    var item = new bolsaviaje.Cosa("Towel");
    expect(item,isNotNull);
  });

  test("PackItem itemtext propery",(){
    var item = new bolsaviaje.Cosa("Towel");
    expect(item.nombre,equals("Towel"));
  });
} 
```

我的 pubspec.yaml 如下：

```
name: PackListTest
description: A sample web application
dependencies:
  unittest: any 
```

我的 pubspec.lock 如下：

```
 # Generated by pub. See: http://pub.dartlang.org/doc/glossary.html#lockfile
     {"packages":{"unittest":{"version":"0.4.1","source":"hosted","description":"unittest"},"meta":{"version":"0.4.1+1","source":"hosted","description":"meta"}}} 
```

我用于单元测试的 HTML 文件的内容如下：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>PackListTest</title>
    <link rel="stylesheet" href="packlisttest.css">
  </head>
  <body>
    <script type="application/dart" src="packlisttest.dart"></script>
  </body>
</html> 
```

我使用的 Dart 版本是 Dart M3。

我在两者中都没有获得任何东西：Dartium 控制台中没有任何内容，生成的 html 中也没有任何内容。

不得不说我有两个项目：一个是web应用，另一个是我的单元测试项目。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:41:09.637

您需要将以下内容添加到 HTML

```
<script src="packages/browser/dart.js"></script> 
```

并将以下依赖项添加到 pubspec.yaml

```
dependencies:
  browser: any 
```

Dartium 现在还用于`dart.js`引导应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:50:07.160

我已经解决了我的问题。我做了两个动作。第一个是将我的单元测试移动到我的应用程序所在的同一文件夹中。第二个是将此行添加到我的 .dart 应用程序文件的第 1 行：

```
library "whatever" 
```

库的名称是什么并不重要，因为在我的 .dart 单元测试文件中我写道：

```
import "bolsaviaje.dart" 
```

这是我的应用程序的名称

如果您遇到同样的问题，我希望此解决方案可以帮助您。

另一方面，我不知道是否存在与将应用程序和单元测试放在两个不同文件夹中相关的约束。

# angularjs - 以角度创建自定义核心服务

> ID：15238063
> 
> 赞同：0
> 
> 时间：2013-03-06T02:48:35.987
> 
> 标签：angularjs

angularjs 的文档展示了如何像这样创建自己的模块的服务

```
angular.module("mymodule", []).service("myService", service); 
```

我的问题是如何创建像 $http 这样的核心服务的服务？我尝试以下，它不工作？

```
angular.module("ng").service("$http2", service); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:11:57.333

Your module spelling is wrong, other than that it is working fine

```
angular.module("ng").service("$http2", service); 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/mGMru/)

# ruby - 在 Rspec 中为编程示例分配变量

> ID：15238068
> 
> 赞同：1
> 
> 时间：2013-03-06T02:49:45.173
> 
> 标签：ruby, selenium, rspec

我正在使用 Rspec 和 Selenium 设置一些自动化测试，并且在尝试以编程方式创建示例时遇到了一些问题。

我有一个包含多个项目的数组，这些项目需要根据数据的更改进行多次测试。

数组：

```
def get_array
  @stuff = { thing1, thing2, thing3 }
end 
```

简化版测试：

```
describe "My tests" do
  context "First round" do
    before { #do some stuff }

    @my_array = get_array
    @my_array.each do |k|
      it "should pass the test" do
        k.should pass_the_test
      end
    end
  end

  context "Second round" do
    before { #do some other stuff }

    @my_array = get_array
    @my_array.each do |k|
      it "should pass the test" do
        k.should pass_the_test
      end
    end
  end
end 
```

在这个例子中还不错，但每次都必须调用 @my_array = get_array 绝对不是 DRY。随着我添加更多的测试和复杂性，这很快就会失控，所以我想知道我所缺少的更简单/更好的方法是什么。

我已经尝试过共享上下文和我能找到的任何其他东西，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:24:34.973

在阅读了您的评论@benny-bates 后，我意识到问题不在于 before 块，而只是在调用测试之前初始化变量。不幸的是，看起来将您的实例变量转换为常量可能是最好的方法。

```
describe "My tests" do

  STUFF = {thing1, thing2, thing3}

  context "First round" do
    before { #do some stuff }

    STUFF.each do |k|
      it "should pass the test" do
        k.should pass_the_test
      end
    end
  end

  context "Second round" do
    before { #do some other stuff }

    STUFF.each do |k|
      it "should pass the test" do
        k.should pass_the_test
      end
    end
  end
end 
```

# mysql - Mysql CONVERT integer TEXT 字段子串字符限制

> ID：15238073
> 
> 赞同：0
> 
> 时间：2013-03-06T02:50:20.553
> 
> 标签：mysql, integer

我有一个简单的数据库，其中包含 1 个表和多个字段，其中一个是文本字段，始终具有相同的字母前缀，后跟 3 个字符的玩家名称，然后是范围从 1 到 100 的数字。

文本记录如下所示，是由第三方应用程序生成的 .txt 文件执行 LOAD LOCAL INFILE 命令的结果。

总冠军 MAC 1,180,611,620

顶级垂钓者 1) MAC 963,956,660 2) MAC 777,545,450 3) MAC 774,563,200 4) MAC 659,721,170

最大的骗子 DVA 6 鱼 4 故事

TOP BOAT ROCKER MAC 24 岩石船

使用 PHP 我试图将 DVA 之后的数值转换为整数，并将其从最大到最小排序。我的 PHP 代码仅显示从 BIGGEST LIAR 到 4 tales 的块如下。

```
$data = mysql_query("SELECT * FROM stats WHERE tablestats LIKE '%biggest liar%' ORDER BY CONVERT(SUBSTRING(tablestats, LOCATE('LIAR', tablestats) +5), SIGNED INTEGER),tablestats DESC LIMIT 5;")

or die(mysql_error()); 
while($info = mysql_fetch_array( $data )) 
{ 
echo substr($info['tablestats'],151,40);
Print "<br>";
} 
?> 
```

这会生成一个页面，其中包含我正在寻找的文本，最终呈现为

最大的骗子 DVA 6 鱼 4 故事

但是，对于多个记录，其中 3 个字符的用户名后面的变量发生更改，使用 DESC 进行排序似乎无法正常工作。我注意到，当数字是单数（1 到 9）时，它似乎没问题，但如果值超过 10，那么一个记录为 6，另一个记录为 10 的实例会导致 6 在 10 之前列出。

我在这里要做的是在 3 个字符的用户名后面指定一个空格后的数值，考虑到这里的数字可能是 1 到 100，然后将其转换为整数和顺序。

任何帮助将非常感激，

托尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:11:01.053

I think you might be looking into using something like this:

```
SELECT *, 
  CONVERT(
     SUBSTRING(tablestats, 
               LOCATE('LIAR ', tablestats) + LENGTH('LIAR ') + 4), 
     SIGNED INTEGER)
FROM stats 
WHERE tablestats LIKE '%biggest liar%' 
ORDER BY 2 DESC 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/19d59/3)

Uses your search string, LIAR in this case, and adds 4 characters per your statement -- character name is always 3 characters. If this is not true, you can use LOCATE again to find the next space.

BTW -- using the CONVERT method like this doesn't work in other RDBMS. MySQL converts the numeric values it finds up until the first non-numeric value. Hence the reason you don't have to remove the rest of the string before converting.

# kendo-ui - Kendo UI Upload，上传文件成功后如何获取路径url

> ID：15238075
> 
> 赞同：0
> 
> 时间：2013-03-06T02:50:33.250
> 
> 标签：kendo-ui

我有个问题。我使用 Kendo UI for ASP.NET MVC 为我的 Web 应用程序创建上传功能。它运作良好，但问题是用户在单击上传按钮执行提交表单并导航到其他页面后看不到他们之前上传的文件。在这种情况下，我在创建视图中放置了一个上传器，我希望在将文件上传到服务器后，将该文件的链接存储到数据库中我的模型的一个字段中，但它总是得到空值。这里有人可以给我一些建议吗？太感谢了。这是我使用的代码。* 控制器：

```
[HttpPost]
public ActionResult Create(Model model)
{
if(ModelState.IsValid)
{
   model.Url = Url;
   Db.Models.Add(model);
   Db.SaveChanges();
   return RedirectToAction("Index");
}
return View(model);
}

public ActionResult Save(IEnumerable<HttpPostedFileBase> attachments)
        {
            // The Name of the Upload component is "attachments"
            foreach (var file in attachments)
            {
                // Some browsers send file names with full path. We only care about the file name.
                var fileName = Path.GetFileName(file.FileName);
                var destinationPath = Path.Combine(Server.MapPath("~/Contents/files/"), fileName);

                DestinationPath = destinationPath;

                file.SaveAs(destinationPath);
            }

            // Return an empty string to signify success
            return Content("");
        } 
```

**看法**

```
@using (Html.BeginForm()) {

  @Html.ValidationSummary(true)
    <div class="editor-label">
            Upload file
        </div>
        <div style="width:45%">
            @Html.Kendo().Upload().Name("attachments").Async(async => async.Save("Save", "Model").AutoUpload(true)).Multiple(false)
        </div>
    <p>
            <input type="submit" value="Create" class="k-button" />
        </p> 
```

**模型**

```
public string Url {get;set;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-07T10:04:22.400

客户端代码：

```
@(Html.Kendo().Upload()
        .Name("uploadTagImage")
        .Multiple(false)
        .Async(async => async.Save("ApiUploadImage", "Tag").SaveField("files").AutoUpload(true))
        .Events(events =>
                    {
                        events.Success("PV_Upload_TagImage_OnSuccess");
                    })
)  

<script type="text/javascript">
    // Events
    PV_Upload_TagImage_OnSuccess = function (result) {
        var data = result.response.Data;

        if(data.length > 0) {
            $("#tag-image").attr('src', data[0]);
        }

        $.publish("PV_Grid_Access_OnAddNewRecord_Event");
    };
</script> 
```

服务器端代码：

```
public ActionResult ApiUploadImage([DataSourceRequest] DataSourceRequest request, IEnumerable<HttpPostedFileBase> files)
{
    var savedFilePaths = new List<string>();
    var applicationPath = System.Web.HttpContext.Current.Request.Url.Scheme + "://" + System.Web.HttpContext.Current.Request.Url.Authority + System.Web.HttpContext.Current.Request.ApplicationPath + "/Content/Images/Others/";
    if(files != null)
    {
        foreach(var file in files)
        {
            var fileName = Path.GetFileName(file.FileName);                    
            if(fileName !=null)
            {
                fileName = DateTime.Now.ToString("yyyyMMddmm-") + fileName;
                var imagePath = Path.Combine(Server.MapPath("~/Content/Images/Others/"), fileName);
                file.SaveAs(imagePath);
                savedFilePaths.Add(applicationPath + fileName);
            }
        }
    }

    return Json(new[] {savedFilePaths}.ToDataSourceResult(request));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:04:33.583

您不必返回空字符串。您可以返回所需的任何字符串值。

为此，您需要将响应内容类型设置为“text/plain”。

```
Response.ContentType = "text/plain"; 
```

# c# - 用户在 ASP.NET 中为 YAF 选择了 theme.css

> ID：15238079
> 
> 赞同：0
> 
> 时间：2013-03-06T02:50:38.677
> 
> 标签：c#, asp.net, css, yaf

我有两个主要主题，一个为论坛主题，一个为深色，一个为浅色，但是，由于 ASP.NET Site.Master 的背景没有与两者融合，我决定根据用户选择的论坛主题更改整个模板. 因此，浅色主题将为网站提供浅色背景，而深色主题将为网站提供深色背景。很简单，对吧？

我在 Site.Master 页面中有这个...

```
<link href='<%# HttpContext.Current.Session["theme"].ToString() %>' rel="stylesheet" type="text/css" /> 
```

...并且根据需要适用于 Forum.aspx（重命名为 Default.aspx），但是当导航到任何其他站点链接时，CSS 模板会丢失。

我可以做些什么来维护用户从整个站点的论坛资料中选择的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:18:28.030

[我从这个问题](https://stackoverflow.com/questions/4756641/how-to-set-stylesheet-programmatically-in-an-asp-net-mvc-2-project)中找到了答案。我不得不从 head 标签中删除 runat="server" 。

# postgresql - Postgresql：创建触发器

> ID：15238082
> 
> 赞同：0
> 
> 时间：2013-03-06T02:50:54.140
> 
> 标签：postgresql, triggers

我必须在 postgresql 中创建一个触发器（没有任何函数调用）。我有两张表 LivesIn(pid, name, Province) 和 Places(name, Province, population, mayorid)

我有以下代码：

```
CREATE TRIGGER updatePopulation
AFTER INSERT ON LivesIn
FOR EACH ROW  
UPDATE Places
SET NEW.population = OLD.Population + 1
WHERE LivesIn.name = Places.name AND LiveIn.province = Places.province; 
```

我收到以下错误：psql:/home/2008/uehtes/Desktop/Comp421/comp421_a2_q1.sql:111: ERROR: syntax error at or near "UPDATE" LINE 5: UPDATE Places.population ^

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:29:33.760

@Glenn，显然这不是这样做的方法。您必须创建一个函数并在触发器中调用它。像这样：

```
CREATE FUNCTION updatePop() RETURNS TRIGGER AS $updatePopulation$
DECLARE
    name1 varchar(30);
    name2 varchar(30);
BEGIN
    IF (TG_OP = 'INSERT') THEN
        name1 = NEW.name;
        name2 = NEW.province;
        UPDATE Place
        SET population = population + 1
        WHERE name1 = Place.name AND name2 = Place.province;
END IF;
RETURN NULL;    
END;
$updatePopulation$ LANGUAGE plpgsql;

CREATE TRIGGER updatePopulation
AFTER INSERT ON LivesIn
FOR EACH ROW 
EXECUTE PROCEDURE updatePop(); 
```

# c - 通过串口发送文件

> ID：15238083
> 
> 赞同：0
> 
> 时间：2013-03-06T02:50:56.607
> 
> 标签：c, linux, file-io, serial-port

使用此代码，我正在尝试将文件发送到 CC430f5137 并从中接收。我正在使用 2 个程序，一个是下面的程序（它用于向我的 linux VM 发送和接收回文件，另一个是 CC430f5137 的程序（它包含我在 windows 中的设备的 rx、tx 代码）。我可以能够将单个字节（例如，A）从文件发送到我的设备，但不能发送多个字节。

```
//sample1.c

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <sys/signal.h>
#include <sys/ioctl.h>
#include <sys/poll.h>
#include <termios.h>
#define BUFSIZE            1300 //1

int open_serial( char *dev_name, int baud, int vtime, int vmin )
{
    int fd;
    struct termios  newtio;

    fd = open( dev_name, O_RDWR | O_NOCTTY );
    if ( fd < 0 )
    {
        printf( "Device OPEN FAIL %s\n", dev_name );
        return  -1;
    }
    memset(&newtio, 0, sizeof(newtio));
    newtio.c_iflag = IGNPAR|INLCR;  // non-parity void UARTHandler(int fd);
    newtio.c_oflag = 0;
    newtio.c_cflag = CS8 | CLOCAL | CREAD; // NO-rts/cts

    switch( baud )
    {
        case 115200 : newtio.c_cflag |= B115200; break;
        case 57600  : newtio.c_cflag |= B57600;  break;
        case 38400  : newtio.c_cflag |= B38400;  break;
        case 19200  : newtio.c_cflag |= B19200;  break;
        case 9600   : newtio.c_cflag |= B9600;   break;
        case 4800   : newtio.c_cflag |= B4800;   break;
        case 2400   : newtio.c_cflag |= B2400;   break;
        default     : newtio.c_cflag |= B115200; break;
    }
    //set input mode (non-canonical, no echo,.....)
    newtio.c_lflag = 0;
    newtio.c_cc[VTIME] = vtime;
    newtio.c_cc[VMIN]  = vmin;
    tcflush  ( fd, TCIFLUSH );
    tcsetattr( fd, TCSANOW, &newtio );

    return fd;
}

int sendfile(int fd)      //void sendfile(int fd)
{
    int fd1,readc;
    unsigned short fileLength;
    unsigned char buf[BUFSIZE];

    fd1=open("cert.pem",O_RDONLY);

    fileLength=lseek(fd1,0,SEEK_END);
    printf("file length is %d bytes\n",fileLength);
    lseek(fd1,0,SEEK_SET);

    write(fd,(unsigned char*)&fileLength, 2);
           while(fileLength>0)
            {
                if(fileLength>=BUFSIZE)
                {
                    readc=read(fd1,buf,BUFSIZE);
                    if(readc==-1)
                    {
                    printf("read failed!!\n");
                    }
                    if(read>0)
                    {
                    buf[BUFSIZE]='\0';
                    printf("%s\n",buf);
                    if(write(fd,buf,BUFSIZE))
                    fileLength -= BUFSIZE;
                    }
                }
                else
                {
                    readc=read(fd1,buf,fileLength);
                    if(readc==-1)
                    {
                    printf("read failed!!\n");
                    }
                    if(readc>0)
                    {
                    buf[fileLength]='\0';
                    printf("%s\n",buf);
                    if(write(fd, buf, fileLength))
                    fileLength=0;
                    }
                }
            }
    printf("%s\n",fd);
    printf("file sent succssfully\n");
    return fd1;//close(fd1);
    close(fd);

}

void receivefile(int fd)
    {
        char buf[1300],read_byte,buf2[1300];
        int fd2,readc;
        unsigned short fileLength;

        fd2=open("test.pem", O_WRONLY|O_CREAT);

                if(fd2<0)
                {
                printf("file open failed!!\n");
                        }
                while(!(read(fd,(unsigned char*)&fileLength,2)>0));

                printf("i am in receive file\n");

                while(fileLength>0) 
                {
                    readc = read(fd, buf, BUFSIZE);
                    if(readc==-1)
                    {
                    printf("read failed!!\n");
                    }
                printf("read %d bytes, value is %s\n",readc,buf);

                    if(readc >0)
                    {
                    buf[readc]='\0';
                    printf("buf value is%s\n", buf);
                    write(fd2,buf,readc);
                    fileLength -= readc;
                    }
                }
            close(fd2);
            close(fd);
    }

void close_serial( int fd )
{
    close( fd );
    printf("ClosePort!!\n");
}

int  main( int argc, char **argv )
{
    int fd;
    int baud;
    char  dev_name[128];

    if ( argc != 3)
    {
        printf( " sample_serial [device] [baud]\n" \
               "    device : /dev/ttySAC0 ...\n"    \
               "    baud   : 2400 ... 115200\n" );
        return -1;
    }
    printf( " Serial test start...  (%s)\n", __DATE__ );

    strcpy( dev_name, argv[1] );
    baud    = strtoul( argv[2], NULL, 10 );

    fd = open_serial( dev_name, baud, 4, 1);

    sendfile(fd);
    receivefile(fd);        
    close_serial( fd );        
    printf( " Serial test end\n" );

    return  0;
} 
```

这是从文件向串口发送 1 个字节的输出

```
 [root@localhost ~]# gcc -std=c99 -std=gnu99 sample1.c -o out1
  sample1.c:151:50: warning: backslash and newline separated by space
  sample1.c:152:45: warning: backslash and newline separated by space
  [root@localhost ~]# ./out1 /dev/ttyUSB20 115200
  Serial test start...  (Mar  6 2013)
  file length is 2 bytes
  A
  wrote 3 bytes
  file sent succssfully
  i am in receive file
  read 1 bytes, value is A
  buf value isA
  read 1 bytes, value is A
  buf value isA
  read 1 bytes, value is A
  buf value isA
  read 1 bytes, value is A
  buf value isA 
```

这是从文件发送多个字节到串口的输出

```
 [root@localhost ~]# gcc -std=c99 -std=gnu99 sample1.c -o out1
  sample1.c:151:50: warning: backslash and newline separated by space
  sample1.c:152:45: warning: backslash and newline separated by space
  [root@localhost ~]# ./out1 /dev/ttyUSB20 115200
  Serial test start...  (Mar  6 2013)
  file length is 2 bytes
  i am doing well today
  wrote 3 bytes
  file sent succssfully
  i am in receive file
  read 1 bytes, value is
  buf value is
  read 1 bytes, value is 
  buf value is
  read 1 bytes, value is 
  buf value is
  read 1 bytes, value is 
  buf value is 
```

正如您在此处看到的，我没有获取文件内容，我正在从我的设备接收空字符，即使我向我的设备发送了多个字节。

sendfile() 工作正常，我可以将“cert.pem”写入端口。我在从端口读取文件并写回“test.pem”时遇到问题。我得到了一些打印语句的输出接收程序，但连续获取数据。标志设置方法正确。我也重置了所有连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:33:23.000

您做错了 - 与其重新发明通过串行链接发送二进制文件问题的解决方案，不如使用现有的标准解决方案，例如 [ZMODEM](http://en.wikipedia.org/wiki/ZMODEM)

当你这样做时，你不必编写 Linux 端程序，因为已经存在一个免费的程序，你可以将现有的程序移植到你的 CC430f5137，不管是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:55:09.227

让我们从显而易见的开始。

a :`Sendfile`里面没有任何循环结构...

b: 缓冲区溢出，像这样：

```
unsigned char buf[BUFSIZE];
...
buf[BUFSIZE]=0 
```

c：你有这样的调试“读取 1 个字节，值为 A”，但它不在代码中。很难修复您尚未发布的代码...

# java - 对于未正确执行 scan.nextInt 的循环

> ID：15238084
> 
> 赞同：0
> 
> 时间：2013-03-06T02:51:01.417
> 
> 标签：java, for-loop, logic, syntax-error

这是我正在为课堂准备的一个程序。在编写了大部分程序之后，我现在正在尝试运行它，看来我有一个逻辑错误。由于某种原因，计算机将一直执行到第一个 for 循环，然后忽略我尝试提示用户将值输入数组的 scan.nextInt 方法。

**编辑：新问题：现在，当我运行程序时，未正确执行的循环是第二个 for 循环。无论您输入什么，它都会返回正确的总数作为可能的正确总数。也返回 0% 正确:(**

***编辑 2：我解决了正确百分比部分的问题，但我仍然不知道正确的方法来比较在为测验评分时输入的正确答案的输入值......它总是返回正确的数字是问题的总数，无论它们是否正确。***

```
import java.util.Scanner;
public class gradingQuizzes {

public static void main(String[] args)
{

    int numQuestions;           // number of questions on quiz
    int numCorrect = 0;         // number correct of entered values
    int correctAnswer;          

    Scanner scan = new Scanner(System.in);
    System.out.println("Please enter the amount of questions in the Quiz: ");
    numQuestions = scan.nextInt();
    int[] key = new int[numQuestions];      // creates an array for the key to the quiz

    // Prompts the user to enter values into the key array
    for (int i = 0; i < key.length; i++)
    {
        System.out.println("Please enter the correct answer to question number " + (i + 1) + " : ");
        key[i] = scan.nextInt();
    }

    System.out.println("Please enter the answers for the quiz to be graded: ");
    System.out.println("---------------------------------------------------");

    // 'for' loop asking for the correct answer for each question on the quiz
    for (int i = 0; i < key.length; i++)
    {
        System.out.println("Question " + (i + 1) + " answer: ");
        correctAnswer = scan.nextInt();
        if (correctAnswer == key [i]);
        {
            numCorrect++;       // increments the number correct for each match to the key
        }
    }
    // Creates a variable to compute the percent correct on the quiz
    double percentCorrect = (numCorrect / (key.length));

    System.out.println("The number correct is: " + numCorrect);
    System.out.println("The percent correct: %" + percentCorrect);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:54:14.200

您正在使用 0 大小初始化数组（请注意，您正在`numQuestions`使用 0 进行初始化）。`numQuestions`只需在获取用户输入的值后移动数组初始化：

```
numQuestions = scan.nextInt();
int[] key = new int[numQuestions]; 
```

* * *

如果要 `double`使用`int`/`long`为`double`变量赋值，则应将`int`/`long`转换为`double`或乘以`1.0`（字面量），否则浮点结果将是`int`/ `long`。修改这部分代码：

```
double percentCorrect = ((numCorrect * 1.0) / ((key.length + 1) * 1.0) ); 
```

如果要打印格式化文本以输出，则应使用[`System.out.printf`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29). 我将写一个最终代码的示例（关于语言语法）：

```
//System.out.println("The percent correct: %" + percentCorrect);
System.out.printf("The percent correct: %% %.2f\n", percentCorrect); 
```

从上面的链接：

*   `%%`将打印`%`符号
*   `%.2f`将使用 2 个固定小数打印浮点数
*   `\n`将打印一个换行符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:53:51.477

这是因为您正在使用`key.length`. 该数组没有任何元素，因此将返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:54:06.073

你已经声明

```
int[] key = new int[numQuestions]; 
```

当 numQuestions 为 0 时

这将起作用

```
 numQuestions = scan.nextInt();

   key = new int[numQuestions]; 
```

对于您问题的第二部分，if 语句的末尾有一个分号。去掉它

```
if (correctAnswer == key [i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T02:54:16.367

```
int numQuestions = 0;       // number of questions on quiz
    int numCorrect = 0;         // number correct of entered values
    int correctAnswer;          
    int[] key = new int[numQuestions]; 
```

这里 numQuestions 被声明为 0 。将其更改为另一个有效。

# css - CSS 规则集未正确应用

> ID：15238089
> 
> 赞同：0
> 
> 时间：2013-03-06T02:51:45.867
> 
> 标签：css, stylesheet, rules

好的，这是我正在使用的 css。

```
input{
border: 2px solid #000;
background-color: #808080;
color: #fff;
} 
```

据我所知，这应该会影响该样式表链接的页面上的每个输入。

然而，它似乎只改变了字体颜色，没有别的。除非我通过 id 引用表单，否则它会应用整套规则。

它改变字体颜色的事实表明它确实在链接。但是为什么它只会影响字体颜色而不影响其他任何东西，直到我通过 id 来做呢？

没有其他样式表可以覆盖它，也没有嵌入或内联样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:00:22.943

**我不是 css 大师，但对我来说，“用户代理样式表**”看起来更具体一些，例如 chrome 会使用选择器，如`input[type="password"], input[type="search"], isindex`默认样式。

因此，只需使用通用后代选择器，您就应该能够绕过该尝试`body input`或`form input`

## 编辑

您可以随时打开 firebug 检查输入并查看样式如何应用/覆盖。

# iphone - iPhone SDK：删除特定 web 视图的 cookie

> ID：15238090
> 
> 赞同：0
> 
> 时间：2013-03-06T02:51:54.140
> 
> 标签：iphone, xcode4, uiwebview

我想知道是否有办法删除 cookie，但仅限于特定的 webview。例如，我有两个 webviews，它们都加载了 facebook.com。当我在一个 webview 中登录 facebook 时，另一个也登录。我不想要这个。我希望每个 webview 都有自己的 facebook 实例。因此，当我在一个 webview 中登录 facebook 时，另一个 webview 停留在登录屏幕上。我研究并发现我可以删除 cookie 来清除数据，但是当我这样做时，两个 webviews 都会自动注销 facebook 而不是一个。所以，我想知道是否有办法专门删除某个 webview 的 cookie。谢谢。

# asp.net - 新加坡的 IIS 服务器、Jet 数据库和客户端出错

> ID：15238091
> 
> 赞同：0
> 
> 时间：2013-03-06T02:51:55.353
> 
> 标签：asp.net, vb.net, excel, iis, odbc

我和新加坡的一个客户有一个奇怪的案例。我的大部分工作都是美国人（支持拉丁美洲、南美洲和北美洲）。

我有一个 IIS 服务器和一个用 ASP.Net (Framework 2.0) 创建的网页

我使用上传到服务器的 Excel 文件（格式 2003），然后我尝试使用 ODBC 连接读取它。

3 年多以来，一切都很完美。但是最近新加坡的一个客户在网页尝试读取Excel时出现如下错误：

来源 >> Microsoft JET 数据库引擎

说明 >> 操作系统不支持选定的整理顺序。

关于这个问题的任何想法或提示？

作为补充；我在新加坡也有其他客户使用同一个网页没有问题

# linux - 使用 dd 从特定位置开始写入数据

> ID：15238100
> 
> 赞同：7
> 
> 时间：2013-03-06T02:53:31.373
> 
> 标签：linux

我想使用 dd 从磁盘上的特定位置（基本上跳过前 50000 字节）开始写入数据，并在前 50000 字节之后开始写入。我试着这样做

```
dd of=/dev/disk1 if=/dev/random seek=50000 
```

我让上面的行运行了几分钟，然后当我取消它时，我得到了这个

```
0+6 records in
0+0 records out
0 bytes (0 B) copied, 79.2458 s, 0.0 kB/s 
```

在我看来，没有任何东西被复制。我做错什么了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T02:59:55.873

来自[dd 文档](http://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html)：

```
‘seek=n’

Skip n ‘obs’-byte blocks in the output file before copying. 
if ‘oflag=seek_bytes’ is specified, n is interpreted as a byte 
count rather than a block count. 
```

所以看起来你想要这个：

```
dd of=/dev/disk1 if=/dev/random obs=50000  seek=1 
```

或这个：

```
dd of=/dev/disk1 if=/dev/random oflag=seek_bytes  seek=50000 
```

另一件事是，`/dev/random`如果内核池为空，它将阻塞。你可以尝试一下`/dev/urandom`，当池为空时，它将使用其他方法生成一个数字而不会阻塞：

```
dd of=/dev/disk1 if=/dev/urandom oflag=seek_bytes  seek=50000 
```

# python - 检查列表或字符串以查看是否存在来自另一个列表的字符串

> ID：15238101
> 
> 赞同：1
> 
> 时间：2013-03-06T02:53:47.183
> 
> 标签：python, string, list, find

我在 ListA 中有一个字符串列表，我需要检查 listA 中的任何字符串是否在 listB 的第 i 个元素中。如果是，我需要在 listB 中附加一个字符串。

例如

```
ListA =  [['Chicago'], ['Rockford'], ['Aurora']]

ListB = [['Town', 'Population', 'ZipCode'], ['Chicago Heights', '250,000', '12345'], ['Dallas', '1,700,000', '23456']] 
```

如果 ListA 中的任何字符串位于 ListB[0-2][0] 中字符串的某个位置，我需要将另一个字符串附加到 ListB[0-2] 的末尾。

输出将是

```
ListC = [['Town', 'Population', 'ZipCode','not illinois'], ['Chicago Heights', '250,000', '12345', Illinois], ['Dallas', '1,700,000', '23456','not Illinois']] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:13:41.500

我很确定您可以从这里更明智的数据结构中受益，例如 a `dict`，但这基本上可以满足您的要求：

```
for x in ListB:
    for y in x:
        if any(s in y for [s] in ListA):
            x.append('Illinois')
            break
    else:
        x.append('not Illinois') 
```

注意：此方法在原地发生变异`ListB`，而不是创建一个新的`ListC`.

# javascript - 当命名空间重叠时，Require.js 配置“路径”

> ID：15238104
> 
> 赞同：2
> 
> 时间：2013-03-06T02:54:08.863
> 
> 标签：javascript, requirejs

我正在尝试将我们的项目迁移到 Require.js，但遇到了处理映射模块位置的问题。

我期望的结果是我希望模块`some/foo.js`转到`dir1/some/foo.js`，并且命名空间中的所有模块`some/foo/`都转到`dir2/some/foo/`。就像下面一样：（也许有这样的命名空间不是一个好的约定，但我能做什么？）

```
require.config({
  "paths":{
    "some/foo":"dir1/some/foo",
    "some/foo/*":"dir2/some/*"
  }
}); 
```

我应该如何使用 Require.js 来实现这一点？

# sqlite - sqlite 语句文本语法接近吗？

> ID：15238107
> 
> 赞同：0
> 
> 时间：2013-03-06T02:54:16.227
> 
> 标签：sqlite, syntax, prepare

```
const char* sqlstr = "select count(id) from ?";

sqlite_prepare_v2(mConn, sqlstr, -1, &smtm, NULL) 
```

函数返回错误，错误消息来自`sqlite3_errmsg(mConn)`；它提示`near "?": syntax error` 为什么？

```
select ? from account 
```

将通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:16:53.793

在 SQLite（或任何其他 SQL 引擎）中，您只能将参数化变量用作插入、更新或约束的值。当用作左值时，不能在 SQL 语句的任意部分使用它来代替关键字、表名或列名。

这是因为 SQLite 必须解析您的 SQL 语句并决定如何将它与其他表连接，使用哪些索引以及类似的决定，然后这些决定将成为查询计划。

第二个示例中的动态绑定变量不会更改查询计划并且可以使用，但是更改表名会 - 而且 SQLite 根本不喜欢它。

如果确实需要动态提供表名，可以在代码中动态生成 SQL 字符串，然后将该字符串传递给 SQLite，这样表名就已经存在（而不是 as `?`）。

# javascript - 使用 for in 循环填充下拉对象

> ID：15238110
> 
> 赞同：0
> 
> 时间：2013-03-06T02:54:22.837
> 
> 标签：javascript

我有一个对象

```
var myObject = { 3: 'Three', 6: 'Six'}; 
```

我想在下拉列表中填充这些值，如下所示：

```
var statusDropdown = document.createElement('select');
for (var item in myObject ) {
    var option = document.createElement("option");
    option.text = item.value; //this is undfined item = "Three", or "Six" 
    option.value = item.key; //this is undfined item = "Three", or "Six" 
    statusDropdown.options.add(option);
} 
```

因为 in 似乎是要走的路，但我正在尝试做关键和价值，而不仅仅是价值。这将允许我将第一个下拉选项的键设置为 3，第二个下拉选项设置为 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:57:08.577

这有点令人困惑，但`item`实际上是当前属性的*关键，而不是实际属性本身。*使用`myObject[item]`将解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:57:08.960

在`for (var item in myObject )`,`item`是键，值将在`myObject[item]`。所以：

```
for (var item in myObject ) {
    var option = document.createElement("option");
    option.text = myObject[item];
    option.value = item; 
    statusDropdown.options.add(option);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:00:54.280

for循环中的代码应该是这样的。

```
option.text = myObject[item];
option.value = item; 
```

# java - 当我在布局单元中实现 ScrollView 时，GridView 的 setOnItemLongClickListener 不起作用（使用适配器）

> ID：15238111
> 
> 赞同：1
> 
> 时间：2013-03-06T02:54:47.927
> 
> 标签：java, android, gridview, adapter

每个 Cell 都`GridView`包含许多项目，所以我使用`ScrollView`它。但是当我`ScrollView`在这个布局单元中实现时，`GridView's` `setOnItemLongClickListener`不工作？？？不要用户`ScrollView`，它运作良好。

这是我的**单元格 xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="170dp"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <com.brightstar.groundtruth.custom.CustomTextView
        android:id="@+id/tv_day"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="16dp" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:id="@+id/scr_monthl_cell"
        android:visibility="visible" >

        <LinearLayout
            android:id="@+id/list_activities"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:orientation="vertical" >
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

**这里是** `setOnItemLongClickListener`：

```
gridView.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                if(mAdapterMonthly.getInMonth(arg2)){
                    int day = Integer.parseInt(mAdapterMonthly.getDay(arg2));
                    mDateCreated = CalendarUtils.setDayOfDateInMonth(day, mSelectDate);
                    if(checkSelDateInPlan(mDateCreated)){
                        List<CallCyclePlanModel> lstCallCycle = mCallCyclePlanHelper.getAllCallCyclePlan(mDateCreated, mPlanId);
                        addCallCycle(view, null, lstCallCycle, mDateCreated, false);
                    }else {
                        GeneralUtils.showAlertDialog(mContext, getString(R.string.title_validation_date_in_plan), getString(R.string.message_can_not_create_call_cycle));
                    }
                }
                return false;
            }
        }); 
```

任何人都可以帮助我，拜托！！

# c++ - 静态成员 C++ 的定义

> ID：15238112
> 
> 赞同：0
> 
> 时间：2013-03-06T02:54:57.233
> 
> 标签：c++

在下面的代码中，Fred.h 文件中的 static const int maximum = 42 行不足以作为静态成员的定义，因为我们用一个值对其进行了初始化？为什么我们需要 Fred.cpp 中的 const int Fred::maximum 行。

```
//Fred.h 
   class Fred {
    public:
      static const int maximum = 42;
      ...
    };

     // Fred.cpp

    #include "Fred.h"

    const int Fred::maximum 
```

;

# opengl - 将矩阵传递给 glsl 着色器

> ID：15238113
> 
> 赞同：1
> 
> 时间：2013-03-06T02:54:59.380
> 
> 标签：opengl, graphics, matrix, glsl, shader

因此，如果给定的网格带有给定的矩阵变换，并且我想在我的顶点着色器中使用该变换，那么一旦它已经传入，我该如何使用它。让我们称之为“myMatrix”。

所以我正在做的是：

```
 varying vec3 modelPos = (gl_ModelViewMatrix * myMatrix * vec4(positionIn, 1)).xyz;
    gl_Position = (gl_ProjectionMatrix * vec4(modelPos, 1)); 
```

其中“positionIn”是传入的顶点。

这似乎不起作用（屏幕上没有显示）。如果我取出“myMatrix”，对象会正常渲染，但当然它没有应用它的转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:23:02.477

正如每个人都试图告诉你的那样，乘法顺序取决于你的矩阵代表什么。你说“旋转”。我们说“在什么坐标系中旋转？”

```
varying vec3 modelPos = (gl_ModelViewMatrix * myMatrix * vec4(positionIn, 1)).xyz; 
```

在您引用的代码`myMatrix`中，最接近您的原始顶点位置。因此，如果那是围绕 x 轴旋转 45 度，那么它将是围绕*object-space*的 x 轴旋转 45 度，其中原点是 (0,0,0) 相对于您存储的顶点位置和该轴同样是顶点位置的自然轴。

如果你颠倒顺序，你有：varying vec3 modelPos = (myMatrix * gl_ModelViewMatrix * vec4(positionIn, 1)).xyz;

现在 ModelView 变换首先发生，因为它最接近您的原始对象空间顶点位置。所以现在`myMatrix`在*camera-space*中操作，原点在相机处，z 轴沿着相机的视图向量。

如果你想绕*world-space*的 x 轴旋转，那么在顶点着色器中没有简单的方法可以做到这一点，同时仍然使用旧式的固定函数变换矩阵。使用固定函数矩阵，您可以在设置时将自定义矩阵应用于软件中的 ModelView 矩阵。

更现代的方法是通过自定义制服传递所有矩阵，而不使用内置函数。因此，您可以单独传入模型、视图和投影变换，并将自定义矩阵插入模型和视图之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:48:56.520

只需在声明垂直着色器的 main() 函数之前将其声明为统一 mat4 myMatrix

# jsf - 如何在 Primefaces 数据表延迟加载中显示搜索结果集

> ID：15238114
> 
> 赞同：1
> 
> 时间：2013-03-06T02:55:14.953
> 
> 标签：jsf, jsf-2, primefaces, lazy-loading, filtering

我们正在使用 Primefaces 数据表延迟加载，以显示搜索结果（例如：搜索学生）。数据表工作良好，如下所示......

请点击这里查看搜索结果[http://xomf.com/gdnrn](http://xomf.com/gdnrn)

但是，我们需要有一个输入字段和一个查找按钮。当我们单击输入字段中提供的一些条件的查找按钮时：

1.数据表应该呈现和

2.延迟加载应该将给定的输入字段值携带到从lazyDataModel覆盖的加载方法中

我们已经完成了 1，但正在为 2 苦苦挣扎。

我目前正在使用查找按钮的代码是：

学生搜索结果.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">
<div class="form_container">
    <p:panel header="Search Student">
        <h:form id="findStudent">
            <div class="attribute_row">
                <h:outputLabel styleClass="span"
                    value="Student name" />
                <h:inputText styleClass="common_form_textbox_large"
                    value="Student name" />
            </div>
            <div class="attribute_row">
                <h:outputLabel styleClass="span"
                    value="Agency Code" />
                <h:inputText styleClass="common_form_textbox_medium"
                    value="Agency Code" />
            </div>
            <div class="attribute_row">
                <h:commandButton styleClass="common_form_button margin_left"
                    id="showButton" value="Find"
                    action="#{StudentManagedBean.findAgency}">
                </h:commandButton>
            </div>
        </h:form>
        <h:form rendered="#{AgencyManagedBean.dataTableRenderValue}">
            <p:dataTable var="var1" value="#{StudentManagedBean.lazyModel}" 
                 paginator="true" rows="5" id="stuTable" rowsPerPageTemplate="5,10,15"
                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                 lazy="true">
                 <p:column headerText="StudentRollNumber" sortBy="#{var1.rollNumber}" filterBy="#{var1.rollNumber}"  
                        filterMatchMode="exact">
                        <h:outputText value="#{var1.rollNumber}"
                            ></h:outputText>
                    </p:column>
                     <p:column headerText="StudentName" sortBy="#{var1.name}" filterBy="#{var1.name}">
                        <h:outputText value="#{var1.name}"
                            ></h:outputText>
                    </p:column>
                <p:column headerText="StudentRank" sortBy="#{var1.rank}" filterBy="#{var1.rank}">
                        <h:outputText value="#{var1.rank}" 
                            ></h:outputText>
                    </p:column>
                    <p:column headerText="StudentDepartment" sortBy="#{var1.department}" filterBy="#{var1.department}">
                        <h:outputText value="#{var1.department}"
                            ></h:outputText>
                    </p:column>
            </p:dataTable>
        </h:form>
    </p:panel>
</div> 
```

谁能帮忙？！！提前致谢。

# javascript - 关于 knockout.js 可见绑定和 javascript 函数

> ID：15238115
> 
> 赞同：0
> 
> 时间：2013-03-06T02:55:31.900
> 
> 标签：javascript, html, knockout.js

我正在使用 knockout.js 并且对它相当陌生，因为我们都是 javascript。

所以这是我的问题。我有一个单选按钮，单击它时必须显示一个 div 块。

这是单选按钮的代码：

```
<label class="radio inline">
                    <input type="radio" class="advanced" name="chooseMe" value="chooseMe" data-bind="checked: qrType" />
                    ChooseMe
</label> 
```

这是div：

```
<div  class = "salaryBlock" data-bind="visible: qrType() == 'chooseMe'"><input type="text" id="" placeholder="Salary" /></div> 
```

我有一个单独的视图模型文件，它应该包含 javascript 方法。

这是方法： `$(function () { var rbViewModel = { qrType: ko.observable('plaintext') }; ko.applyBindings(rbViewModel); });`

**我有两个问题： ** 1) 我如何将此函数绑定到带有类名的 div 标签？我不确定如何编写代码。应该是`$(.salaryBlock).function(){ var rbViewModel = { qrType: ko.observable('plaintext') }; ko.applyBindings(rbViewModel); });` `

2) 我的 html 中用于绑定的代码是否正确？请告诉我。

我会很感激你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:37:11.563

这是一个小提琴 - [http://jsfiddle.net/kyQcF/1/](http://jsfiddle.net/kyQcF/1/)

您不需要使用绑定视图模型`$function`。

或者，您可以做@7zark7 的小提琴所做的事情。基本上，你需要确保当你的 js 文件加载时，viewmodel 被初始化并且 ko.applybindings 被那个 view model 调用。

# python - 在python中保持尾随零

> ID：15238120
> 
> 赞同：15
> 
> 时间：2013-03-06T02:55:54.283
> 
> 标签：python, parsing

我正在写一个代表金钱的类，我遇到的一个问题是`"1.50" != str(1.50)`. str(1.50) 等于 1.5，突然之间，POOF。45 美分消失了，现在是 1 美元和 5 美分。不是一美元和 50 美分。有什么办法可以阻止 str 这样做，还是我做错了什么？这是 Python 2 顺便说一句。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-06T03:01:05.047

您可以`format`在字符串上使用该方法来指定要表示的小数位数：

```
>>> "{:.2f}".format(1.5)
'1.50' 
```

但更好的方法是使用[`decimal module`](http://docs.python.org/2/library/decimal.html)for 表示货币，因为如果您进行算术运算，二进制浮点数的表示问题可能会让您的结果略有偏差。该模块的文档特别提到了其中一些问题 - 货币应用程序最有趣的问题之一是：

```
>>> 0.1+0.1+0.1-0.3
5.551115123125783e-17
>>> from decimal import Decimal
>>> Decimal('.1') + Decimal('.1') + Decimal('.1') - Decimal('.3')
Decimal('0.0') 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-06T03:00:49.320

使用金钱时，始终使用 Decimal 类来表示金钱。

[http://docs.python.org/2/library/decimal.html](http://docs.python.org/2/library/decimal.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-17T17:51:25.573

当事先不知道数字的大小时，建议的解决方案不起作用，这在科学应用中很常见，而不是在与金钱相关的应用中。我为那些像我一样来寻找科学案例的人提供了一个替代解决方案。

例如，如果我想打印`x = 1.500e-4`到三个有效数字（处理具有给定不确定性的测量时的常见情况），以下命令显然不会给出正确的结果：

```
x = 1.500e-4
print(f"{x:.3f}")

----> 0.000 
```

在这里，我使用现代 Python 3.6+ [f-strings](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)进行格式化。

有人可能会考虑使用`g`格式说明符，但这也不会给三位有效数字提供所需的结果，因为省略了尾随零：

```
x = 1.500e-4
print(f"{x:.3g}")

----> 0.00015 
```

可以使用格式说明符以及格式说明[迷你语言](https://docs.python.org/3/library/string.html#format-specification-mini-language)`g`的一个相当模糊的选项哈希字符来获得正确答案，方法如下：`#`

```
x = 1.500e-4
print(f"{x:#.3g}")

----> 0.000150 
```

这种格式在原始问题的简单情况下也可以保持不变：

```
x = 1.500
print(f"{x:#.3g}")

----> 1.50 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T03:05:25.750

```
x = 1.500000

print '%.2f' % x
print '{:.3f}'.format(x) 
```

结果

```
1.50
1.500 
```

# javascript - Qtip 没有出现

> ID：15238122
> 
> 赞同：0
> 
> 时间：2013-03-06T02:56:00.360
> 
> 标签：javascript, jquery, qtip2

这可能是一个非常简单的解决方案。但是，我是 jquery 和 qtip 的新手。对于我的生活，我无法让我的 qtip 出现。显示的只是默认工具提示。有谁知道可能是什么问题？

```
<html>
<head>
<link type="text/css" rel="stylesheet" href="/jquery.qtip.min.css"/>
   <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script type='text/javascript' src="/jquery.qtip.min.js"></script>

<script>
$('a[title]').qtip()
</script>

</head>
<body>
<a title="why wont this tooltip work" href ="#">Hello there punk
</body>
</html> 
```

这是一个不起作用的简单示例，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:01:50.777

阅读文档我认为这是这样做的方法，只有在文档准备好后才应该调用它

```
$(document).ready(function() 
{
    $('body a[href]').qtip();
}); 
```

# php - PDO 用户会话

> ID：15238123
> 
> 赞同：0
> 
> 时间：2013-03-06T02:56:19.407
> 
> 标签：php, session, pdo

我正在将旧的 mysql 转换为 PDO，我遇到了第一个问题。

我想根据`$_SESSION['user_id']`但未分配数据库中的 user_id 来回显用户信息，`$_SESSION['user_id']`因此我进入`Notice: Undefined index: user_id in`帐户页面`$user_id = $_SESSION['user_id'];`并`print_r($_SESSION['user_id']);`在线。

我确实`session_start();`在页面顶部。

班级

```
class User {
public $user_id = null;

public function userInfo($user_id) {
    global $db;

    $query = $db->prepare("SELECT user_id, username, email FROM users WHERE user_id = :id");
    $query->bindValue(':id', $user_id);
    $query->execute();

    return $query->fetch();
}

public function login($login, $password){
    global $db;

    $query = $db->prepare("SELECT COUNT(user_id) as count, user_id FROM users WHERE username = :user AND password = :pass");

    $query->bindValue(':user', $login);
    $query->bindValue(':pass', $password);
    $query->execute();

    $result = $query->fetchColumn();

    if ($result) {  
        $this->user_id = $result['user_id'];
    }

    return $result;
   }
} 
```

登录

```
if (isset($_POST['login'], $_POST['password'])) {

$login = $_POST['login'];
$password = sha1($_POST['password']);

$errors = array();

if (empty($login) || empty($password))
{
 $errors[] = 'All fields required!';
} 
else {
    $user = new User;
    $log_in = $user->login($login, $password); 

    if($log_in) {
        $_SESSION['user_id'] = $user->user_id;
        header('Location: account.php');
        exit();
    } else { 
            $errors[] = 'Username or password incorrect!';
           }
}

if (!empty($errors)){

        foreach ($errors as $error)
        {
            echo '<div id="error"><strong>', $error, '</strong></div><br />';
        }
    }
} 
```

账户页面

```
$user = new User;
$user_id = $_SESSION['user_id'];
$data = $user->userInfo($user_id);

echo $data['username'],'<br />';
echo $data['email'],'<br />';

echo '<pre>';
print_r($_SESSION['user_id']);
echo '</pre>';

if(isset($_SESSION['user_id'])){

    echo '<pre>';
    print_r($data);
    echo '</pre>';

    echo $data['username'],'<br />';
    echo $data['email'],'<br />';

    }else {
    echo 'Please log in!';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:10:56.943

The main problem is, your login method is returning data, and your calling code is treating it as if it is setting internal variables:

```
$user = new User;
$log_in = $user->login($login, $password); 

if($log_in) {
    $_SESSION['user_id'] = $user->user_id; 
```

see.. your user_id is actually in $log_in, not in $user... correct that and you should be fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:36:09.910

> $_SESSION['user_id'] 但数据库中的 user_id 未分配给 $_SESSION['user_id'] 所以我得到注意：未定义索引：帐户页面中的 user_id

这在**逻辑上是不正确的说法**。**只有**当您**立即**
验证它 时，它的第一部分才能被证明是正确的，即：

 ****```
$_SESSION['user_id'] = ...//being populated 
var_dump($_SESSION['user_id']);die; 
```

如果它不会显示正确的值 - 只有这样你才能说它没有被填充。否则你所有的进一步扣除都是不正确的。因为（尽管正确填充）可能有 1000 多个原因不会显示在另一个页面上。
好吧，如果它不会死在这里 - 将这段`var-die`代码移到上面看看出了什么问题。等等。

对不起，但整个问题看起来像“为我调试我的代码”。
您为什么不自己调试它，使用您手头的解释器和环境的所有功能以及必不可少的能力来尽可能多地*运行它？*
为什么你要求陌生人只是在*精神上*调试你的代码，只是用他们的大脑来运行你的代码？它在设计上是错误的，而且**效率极低！**
请自己调试您的代码，找到某些问题，然后询问有关它的特定问题。****

# vxworks - VxWorks 启动问题（从 0x308000 开始...）

> ID：15238124
> 
> 赞同：0
> 
> 时间：2013-03-06T02:56:24.510
> 
> 标签：vxworks

我想在目标电脑上安装 vxworks，但是当我启动 vxworks 操作系统时，它在 [starting at 0x308000...] 处暂停，并且屏幕上没有显示其他响应。我如何诊断出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:55:13.463

查看 BSP 中的 config.h 并确保它已设置为编译内核以在地址 0x308000 处加载。可能是您的引导加载程序和您的操作系统不同步。另请参阅 BSP 开发人员指南，了解有关 config.h 中所有#defines 含义的更多信息。具体来说：`RAM_LOW_ADR`, `LOCAL_MEM_LOCAL_ADRS`, 和`ROM_BASE_ADR`, 并确保它们是正确的。自从我查看 vxworks 代码以来已经有一段时间了，并且我不再可以访问它......所以我很难更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:39:08.843

您使用的是 COM 端口吗？默认情况下，vxWorks 使用串行链路进行 IO。VGA 端口仅在启动期间使用。

有一个组件 (PC_CONSOLE?) 允许使用 VGA/KBD 端口进行 I/O。

一般来说，您提供的详细信息（vxworks 版本、目标类型、引导方法等）越多，您将获得更好的答案...

您也可以联系风河支持...

# java - 可运行崩溃中的 HTTPPost

> ID：15238125
> 
> 赞同：0
> 
> 时间：2013-03-06T02:56:33.507
> 
> 标签：java, android, multithreading, http-post, runnable

这个问题让我很生气。我正在重新使用适用于其他项目/类但不适用于我当前项目的相同代码。我所做的只是更改变量（POST 值和 EditText 名称）。但它没有用。

```
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;

import android.app.Activity;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import android.preference.PreferenceManager;
import android.content.SharedPreferences;

public class LoginActivity extends BaseActivity implements OnClickListener {
    private SharedPreferences settings;
    private EditText email;
    private EditText epassword;
    private EditText password2;
    private EditText mobile;
    private EditText eusername;
    private EditText txtMessage;
    private Button sendBtn;
    //private String uriAPI =getString(R.string.loginurl);

    protected static final int REFRESH_DATA = 0x00000001;

    Handler mHandler = new Handler()
    {
        @Override
        public void handleMessage(Message msg)
        {
            switch (msg.what)
            {
            case REFRESH_DATA:
                String result = null;
                if (msg.obj instanceof String)
                    result = (String) msg.obj;
                if (result != null)
                    Toast.makeText(LoginActivity.this, result, Toast.LENGTH_LONG).show();

                break;
            }
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        eusername = (EditText) findViewById(R.id.musername);
        epassword = (EditText) findViewById(R.id.mpassword);
        sendBtn = (Button) findViewById(R.id.loginnow_btn);

        if (sendBtn != null) {
            sendBtn.setOnClickListener(this);
        }

    }

    @Override
    public void onClick(View v)

    {
        //Toast.makeText(LoginActivity.this,"Button Clicked!", Toast.LENGTH_LONG).show();
        if (v == sendBtn)
        {
            String err= null;
            final String dusername = eusername.getEditableText().toString();
            final String dpassword = epassword.getEditableText().toString();

            Toast.makeText(LoginActivity.this, dusername, Toast.LENGTH_SHORT).show();
            if (dusername.isEmpty())
            {

                err = err + "Please Enter Email";
            }
            else if (dpassword.isEmpty()) {
                err = err + "Please enter password";
            }

            if (err==null) {

                Toast.makeText(LoginActivity.this, "About to run sendPostRunnable", Toast.LENGTH_LONG).show();      
                Thread gt = new Thread(new sendPostRunnable(dusername,dpassword));
                gt.start();
            }
            else {
                Toast.makeText(LoginActivity.this, err, Toast.LENGTH_LONG).show();              
            }
        }
    }

    class sendPostRunnable implements Runnable
    {
        String strTxt = null;
        String eusername = null;
        String epassword = null;
        public sendPostRunnable(String username, String password)
        {
            this.epassword = password;
            this.eusername = username;

            Toast.makeText(LoginActivity.this,this.eusername, Toast.LENGTH_SHORT).show();
            Toast.makeText(LoginActivity.this,this.epassword, Toast.LENGTH_SHORT).show();
        }

        @Override
        public void run()
        {
            Toast.makeText(LoginActivity.this,"SendPostDataToInternet entrance", Toast.LENGTH_LONG).show();
            String result = sendPostDataToInternet(eusername, epassword);
            //Toast.makeText(LoginActivity.this,"SendPostDataToInternet running", Toast.LENGTH_LONG).show();
            //Toast.makeText(MainActivity.this, result, Toast.LENGTH_LONG).show();
            mHandler.obtainMessage(REFRESH_DATA, result).sendToTarget();
            //Toast.makeText(LoginActivity.this,"Obtainmessaged", Toast.LENGTH_LONG).show();
        }

    }

    private String sendPostDataToInternet(String username, String password)
    {
        String uriAPI =getString(R.string.loginurl);
        HttpPost httpRequest = new HttpPost(uriAPI);

        List<NameValuePair> params = new ArrayList<NameValuePair>();

        params.add(new BasicNameValuePair("email", username));
        params.add(new BasicNameValuePair("password", password));
        Toast.makeText(LoginActivity.this,"TT", Toast.LENGTH_LONG).show();
        try

        {

            httpRequest.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));

            HttpResponse httpResponse = new DefaultHttpClient()
                    .execute(httpRequest);

            if (httpResponse.getStatusLine().getStatusCode() == 200) {

                String strResult = EntityUtils.toString(httpResponse
                        .getEntity());

                return strResult;
            }
        } catch (Exception e)
        {
            e.printStackTrace();
        }
        return null;
    }

} 
```

在调试期间，我意识到问题出在

```
gt.start(); 
```

这是一个日志

```
03-06 02:39:35.134: E/AndroidRuntime(1916): FATAL EXCEPTION: Thread-140
03-06 02:39:35.134: E/AndroidRuntime(1916): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
03-06 02:39:35.134: E/AndroidRuntime(1916):     at android.os.Handler.<init>(Handler.java:197)
03-06 02:39:35.134: E/AndroidRuntime(1916):     at android.os.Handler.<init>(Handler.java:111)
03-06 02:39:35.134: E/AndroidRuntime(1916):     at android.widget.Toast$TN.<init>(Toast.java:324)
03-06 02:39:35.134: E/AndroidRuntime(1916):     at android.widget.Toast.<init>(Toast.java:91)
03-06 02:39:35.134: E/AndroidRuntime(1916):     at android.widget.Toast.makeText(Toast.java:238)
03-06 02:39:35.134: E/AndroidRuntime(1916):     at com.pbd.b_prototype.LoginActivity$sendPostRunnable.run(LoginActivity.java:162)
03-06 02:39:35.134: E/AndroidRuntime(1916):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:31:30.733

问题出在你打电话的方式上`sendPostDataToInternet()`。您正在创建一个新线程来进行网络通信，这很好：

```
Thread gt = new Thread(new sendPostRunnable(dusername,dpassword)); 
```

但是你需要在这个线程中为处理程序设置一个 Looper。[简短的回答是在Looper](http://developer.android.com/reference/android/os/Looper.html)中创建您的处理程序，文档非常清楚，但可以这样编写：

```
public class LooperThread extends Thread {

    @Override
    public void run() {
        Looper.prepare();

        Handler mHandler = new Handler()
        {
            @Override
            public void handleMessage(Message msg)
            {
                 // handle your message here
            }
        };
        Looper.loop();
    }
} 
```

您的 Looper 将处理来自服务器的响应，并可以相应地对数据采取行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:58:22.267

当您的可运行文件完成后，使用 post.. 或 runOnUiThread 将 Toast 发布回 UI 线程：

```
LoginActivity.this.runOnUiThread(new Runnable() { Toast.makeText( ... ); }); 
```

或者，将您的 ui 控件声明为 final 并从异步任务中发布到它们：

```
final EditText someControl;
....

....
In async Task:
....
someControl.post(new Runnable() { Toast.makeText(...); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:05:05.853

`publishProgress(...)`您应该转换您的代码，以便使用 AsyncTask 而不是实现 Runnable - 使用 AsyncTask，您可以使用这些方法提供实时更新，`onProgressUpdate(...)`最后，您可以使用它`onPostExecute(...)`来包装并在 UI 上进行调用。

上的例子

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

比较完整，这里就不转发了。

另一方面，您需要清理 HTTP 连接，确保调用`consumeContent()`您的 HTTP 实体（每一个实体......）。

# ruby-on-rails - Rails 回调、观察者、模型以及放置方法和逻辑的位置

> ID：15238126
> 
> 赞同：0
> 
> 时间：2013-03-06T02:56:35.133
> 
> 标签：ruby-on-rails, callback, models, observers

我正在开发一个应用程序。基本的东西，用户注册（与相关组织）。

最初我从一个简单的控制器开始 -

```
# Need to check if organization exists already; deny user creation if it does 
if @organization.save
  @user.save
  redirect_to user_dashboard_path... 
```

我很快发现自己陷入了回调汤：

验证组织后，我们保存用户。创建组织后，我创建了另外两个模型，EmailTemplate 和 PassTemplate（一个组织 has_one :email_template，has_one :pass_template）

```
 after_create :init_company, :init_email_template, :init_pass_template, :init_form 
```

这些回调中的每一个通常都会调用模型上的方法，例如：

```
def init_email_template
  self.email_template.create_with_defaults
end 
```

最初我认为这很聪明——在幕后做了这么多，但我一直在阅读 Steve McConnell 的 Code Complete，觉得这一点都不简单。如果我不知道已经发生了什么，那么没有任何迹象表明任何时候创建组织都会创建 3 个关联对象（其中一些对象反过来会初始化子对象）。

这似乎是一种糟糕的编程习惯，因为它混淆了正在发生的事情。

我考虑将所有这些初始化移动到控制器，因为一个组织只创建一次：

```
class OrganizationsController < AC
  ...
  def create
    if @organization.save
       @organization.create_user
       @organization.create_email_template
       @organization.create_pass_template
  end 
```

这似乎是更简洁的代码，并且更容易遵循。

**问题 1** **是否有更好的解决方案或最佳实践来处理在创建中心对象时创建我不知道的关联对象？**

旁注 - 我将不得不重写一堆假设关联是通过回调自动创建的测试 - 如果它更好，更容易理解代码，我可以接受。

**问题 2** **after_save 回调的类似情况如何？**

我有一个客户模型，它在创建后检查它是否有关联的 user_account，如果没有，则创建它。一旦我们创建了 user_account，它还会为该 user_account 创建一个 Tag 模型

```
class Customer < AR
  after_create :find_or_create_user_account

  def find_or_create_user_account
     if !self.user_account_exists?
        #create the user
     end
     Tag.create(:user_id => self.user_account.id)         
  end
end 
```

有点简化，但我相信这不是特别好的编程。一方面，我将逻辑放在第三个模型中创建两个不同的模型。似乎马虎又一次分离逻辑的原则。其次，方法名称并没有完全描述它在做什么。也许 find_or_create_user_account_and_tag 会是一个更好的名称，但它也违背了让方法只做一件事的原则——保持简单。

在阅读了观察者和服务之后，我的世界陷入了一个循环。

几个月前，我把所有东西都放在了控制器中。不可能很好地测试（这很好，因为我没有测试）。现在我的控制器很瘦，但我的模型很肥胖，而且我认为不健康（不清楚，不明显，几个月后另一个程序员/我自己更难阅读和破译）。

**总的来说，我只是想知道是否有一些关于逻辑分离、避免回调汤以及不同类型代码的好指南、信息或最佳实践**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:43:07.083

为什么不是以下？

```
after_create :init_associated_objects

def init_associated_objects
  init_company
  init_email_template
  init_pass_template
  init_form
end 
```

我对“一个方法应该做一件事”的解释并不严格，而且我通常有一个调用其他方法的方法（很像上面的那个）。归根结底，这是一种分而治之的策略。

有时，当拥有 AR 模型没有意义但一组功能是类的责任时，我会创建实用程序 PORO（普通的旧 ruby​​ 对象）。例如，报告不是 AR 支持的模型，但是当需要调用多个模型的报告只实例化一次时，报告期的开始和结束是实例变量，这样会更容易。

我遵循的一条经验法则：如果我在整个 MVC 堆栈（例如 Rails 控制台）之外实例化模型，我期望发生的事情应该留在模型中。

我没有声称最佳实践，但到目前为止这些对我有用。我相信其他人对此会有更好的想法。

# iphone - 在 iPhone/iPad 上创建新键盘

> ID：15238130
> 
> 赞同：2
> 
> 时间：2013-03-06T02:56:56.413
> 
> 标签：iphone, ios, ipad, ios5, ios6

回到过去，在 Emoji 键盘成为 iOS 标准之前，您可以下载一个允许您启用和使用 Emoji 键盘的应用程序。遵循同样的概念，我是否可以定义我自己的键盘，用户可以选择在他们的 iPhone 设置中使用我自己的符号？

这适用于未越狱的 iOS 设备。如果有越狱设备的解决方案，我也会接受（出于教育目的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:11:02.443

No, you cant implement a custom keyboard on a non-jailbroken iOS device which can be accessed outside your app. They were just enabling [a keyboard which was already there](https://stackoverflow.com/questions/1225514/making-an-emoji-enabeling-app/1239449#1239449)

Basically you are not allowed to change anything outside your app. So in this case since you have to add this to settings, Apple wont allow that as per its current guidelines(Assuming that your question is about non-jailbroken iOS device where app needs to be pushed to AppStore).

# iphone - 将核心数据加载到数组中，然后填充表视图，重新排序数组的对象不会持久

> ID：15238131
> 
> 赞同：1
> 
> 时间：2013-03-06T02:56:56.970
> 
> 标签：iphone, objective-c, uitableview, core-data, nsmutablearray

首先让我告诉你我想做什么。将数据加载到数组中（从核心数据实体），填充表格视图，如果用户需要，重新排序单元格并更新数组。

就是这样。

我发现了我的问题，我只是不知道如何解决它：

我正在将我的实体数据/属性加载到一个数组中，并用数据填充我的表格视图（下面是问题）：

```
-(void)viewWillAppear:(BOOL)animated{
if (self.context == nil)
{
    self.context = [(RootAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
}
NSFetchRequest *request = [[NSFetchRequest alloc]init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"HandgunAmmo" inManagedObjectContext:self.context];
[request setEntity:entity];
NSError *error;
//PROBLEM!!! the 2 lines below this. 
NSMutableArray *array = [[self.context executeFetchRequest:request error:&error] mutableCopy];
[self setTableArray:array];
[self.ammoTable reloadData];
[super viewWillAppear:YES];
} 
```

所以此时表格视图已加载数据（考虑到`cellForRow`被调用）

用户移动了几个单元格，我更新数组如下：

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath     *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    // fetch the object at the row being moved
NSString *r = [self.tableArray objectAtIndex:fromIndexPath.row];

    // remove the original from the data structure
[self.tableArray removeObjectAtIndex:fromIndexPath.row];

    // insert the object at the target row
[self.tableArray insertObject:r atIndex:toIndexPath.row];

[self.ammoTable reloadData];

} 
```

如您所见，重新排序数组的代码应该可以工作。

But, in the `viewWillAppear` method, I am loading the entities attributes into the array again and using it to populate the table view which is the problem. When i update the array, its not updating the order of the objects inside of the entity. Does anyone know how to update that? I would really appreciate it!

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:10:01.173

The managedObjects represented in the array have no sense of their position in the array. Therefore rearranging their place is changing their visible position but not their position in the database.

If you want to sort then you need to do some things:

1.  Have your `NSFetchRequest` include an NSPredicate that sorts on a sort field
2.  Have your `moveRowAtIndexPath` method not only reposition the data but also update the sort field to reflect their new position
3.  Save the updated records to the database so that the next fetch will have the correct sort.

If you already have a fetchResultsController you can forgo the array and just use:

```
NSManagedObject *ammo = [fetchedResultsController objectAtIndexPath:fromIndexPath]; 
```

To get an reference to the current object.

# perl - 对嵌套信息使用 HTML::TreeBuilder::XPath

> ID：15238134
> 
> 赞同：1
> 
> 时间：2013-03-06T02:57:07.933
> 
> 标签：perl, html-content-extraction

想象一个 HTML 页面，它是一个具有重复结构的报告：

```
<html>
  <body>
    <h1>Big Hairy Report Page</h1>

    <div class="customer">
      <div class="customer_id">001</div>
      <div class="customer_name">Joe Blough</div>
      <div class="customer_addr">123 That Road</div>
      <div class="customer_city">Smallville</div>
      <div class="customer_state">Nebraska</div>
      <div class="order_info">
        <div class="shipping_details">
          <ul>
             <li>Large crate</li>
             <li>Fragile</li>
             <li>Express</li>
          </ul>
        </div>
        <div class="order_item">Deluxe Hoodie</div>
        <div class="payment">35.95</div>
        <div class="order_id">000123456789</div>
      </div>
      <div class="comment">StackOverflow rocks!</div>
    </div>

   <div class="customer">
     <div class="customer_id">002</div>
 ....  and so forth for a list of 150 customers 
```

这种报表页面经常出现。我的目标是使用[`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath).

我知道做基础并将文件读入$tree。但是，如何才能简洁地遍历该树并获得每个客户的相关信息集群？例如，如何根据此信息创建按客户编号排序的地址标签列表？如果我想按州对所有客户信息进行排序怎么办？

我不是要整个 perl（我可以读取我的文件，输出到文件等）。我只需要帮助理解如何向 HTML::TreeBuilder::XPath 询问这些相关数据包，然后如何取消引用它们。如果用输出语句来表达这一点更容易（即，Joe Blough 订购了 1 件 Deluxe Hoodie 并留下了 1 条评论），那么这也很酷。

非常感谢那些解决这个问题的人，这对我来说似乎有点不知所措。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:04:17.310

这将满足您的需求。

它首先将所有`<div class="customer">`元素拉入数组`@customers`并从中提取信息。

我以您的地址标签为例，按客户编号排序（我假设您的意思是带有 的字段`class="customer_id"`）。所有地址值都从数组中提取到 hash`%customers`中，以客户 ID 和元素类的名称为键。然后按照 ID 的顺序打印信息。

```
use strict;
use warnings;

use HTML::TreeBuilder::XPath;

my $tree = HTML::TreeBuilder::XPath->new_from_file('html.html');

my @customers = $tree->findnodes('/html/body/div[@class="customer"');

my %customers;
for my $cust (@customers) {
  my $id = $cust->findvalue('div[@class="customer_id"]');
  for my $field (qw/ customer_name customer_addr customer_city customer_state /) {
    my $xpath = "div[\@class='$field']";
    my $val = $cust->findvalue($xpath);
    $customers{$id}{$field} = $val;
  }
}

for my $id (sort keys %customers) {

  my $info = $customers{$id};

  print "Customer ID $id\n";
  print $info->{customer_name}, "\n";
  print $info->{customer_addr}, "\n";
  print $info->{customer_city}, "\n";
  print $info->{customer_state}, "\n";
  print "\n";
} 
```

**输出**

```
Customer ID 001
Joe Blough
123 That Road
Smallville
Nebraska 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:06:48.300

我将使用[XML::LibXML](http://search.cpan.org/perldoc?XML%3a%3aLibXML)，因为它更快并且我很熟悉它，但是如果您愿意，将我发布的内容从 XML::LibXML 转换为 HTML::TreeBuilder::XPath 应该非常简单。

```
use XML::LibXML qw( );

sub get_text { defined($_[0]) ? $_[0]->textContent() : undef }

my $doc = XML::LibXML->load_html(...);

my @customers;
for my $cust_node ($doc->findnodes('/html/body/div[@class="customer"]')) {
   my $id   = get_text( $cust_node->findnodes('div[@class="customer_id"]') );
   my $name = get_text( $cust_node->findnodes('div[@class="customer_name"]') );
   ...
   push @customers, {
      id   => $id,
      name => $name,
      ...
   };
} 
```

* * *

实际上，鉴于数据的规律性，您不必对字段名称进行硬编码。

```
use XML::LibXML qw( );

sub parse_list {
   my ($node) = @_;
   return [
      map parse_field($_),
       $node->findnodes('li')
   ];
}

sub parse_field {
   my ($node) = @_;
   my @children = $node->findnodes('*');
   return $node->textContent() if !@children;
   return parse_list($children[0]) if $children[0]->nodeName() eq 'ul';
   return {
      map { $_->getAttribute('class') => parse_field($_) }
       @children
   };
}

{
   my $doc = XML::LibXML->load_html( ... );
   my @customers =
      map parse_field($_),
       $doc->findnodes('/html/body/div[@class="customer"]');

   ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T04:18:39.810

```
use HTML::TreeBuilder::XPath;
...

my @customers;
my $tree = HTML::TreeBuilder::XPath->new_from_content( $mech->content() );

foreach my $customer_section_node ( $tree->findnodes('//div[ @class = "customer" ]') ) {

   my $customer = {};
   $customer->{id} = find_customer_id($customer_section_node);
   $customer->{name} = find_customer_name($customer_section_node);
   ...
   push @customers, $customer;
}

$tree->delete();

sub find_customer_id {
    my $node = shift;

    my ($id) = $node->findvalues('.//div[ @class = "customer_id" ]');
    return $id
} 
```

# performance - WCF netNamedPipeBinding 性能

> ID：15238135
> 
> 赞同：0
> 
> 时间：2013-03-06T02:57:08.170
> 
> 标签：performance, wcf

我正在尝试按照本文使用 netNamedPipeBinding 验证 WCF 性能。 [http://msdn.microsoft.com/en-us/library/bb310550.aspx](http://msdn.microsoft.com/en-us/library/bb310550.aspx)

我有一个 WCF 服务和客户端托管在单个应用程序中。

WCF Host 定义如下：[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, UseSynchronizationContext = false, InstanceContextMode = InstanceContextMode.Single)]

执行 perf 测试的测试调用如下所示：

```
 Stopwatch sw = new Stopwatch();
        sw.Start();
        int zLoopCount = 1000;
        for (int i = 0; i < zLoopCount; i++)
        {
            int z = zClient.Test(1);
        };
        sw.Stop();
        double zRequestsPerSecond = (double)sw.ElapsedMilliseconds / (double)zLoopCount;

        Console.WriteLine(string.Format("Done Making {0} requests \r\n", zLoopCount));
        Console.WriteLine(string.Format("{0} ms to make all requests \r\n", sw.ElapsedMilliseconds));
        Console.WriteLine(string.Format("{0} ms per objects \r\n", zRequestsPerSecond)); 
```

728 毫秒发出所有请求

每个对象 0.728 毫秒

我运行的是相当下降的规格 Intel Gen 3 i5，这相当于每秒远低于 2000 txn，远低于声称的每秒 8000 txn。

有没有什么表现。我应该对开箱即用的配置进行调整。我没有配置任何限制。

谢谢沃里克

# php - X-cart 表单管理：如何集成新的表单字段类型

> ID：15238136
> 
> 赞同：0
> 
> 时间：2013-03-06T02:57:08.423
> 
> 标签：php, javascript, mysql, x-cart

在 X-Cart 中自定义表单时，我实际上想要做的是能够使用比非常简单的“文本”、“复选框”或“选择”更多的字段类型。

即，我的用户配置文件表单页面中有自定义字段（X-cart 管理员 > 设置 > 常规设置 > 用户配置文件）。我所指的“字段类型”在此屏幕截图中可见：

```
http://screencast.com/t/OA7b1UBUVN 
```

我要添加的字段类型并不简单；它是多选下拉菜单的一种复杂形式。

但是为了这个问题的目的，让我们保持简单：添加例如单选按钮的选择的更好方法是什么？

如果您需要更多说明，请告诉我。

谢谢！垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:24:40.573

到目前为止，通过手动寻路进入 X-Cart 的架构，我已经能够弄清楚以下内容：

字段类型列表定义在：admin/user_profiles.php

```
// Field types
$types = array(
    'T' => 'Text',
    'C' => 'Checkbox',
    'S' => "Select box", 
```

定义用户配置文件的表单内置于：skin/common_files/admin/main/user_profiles.tpl

解释所选字段类型的模板文件是：skin/common_files/main/register_additional_info.tpl

```
{if $v.type eq 'T'}
    <input type="text"
[...] 
```

在数据库中，自定义字段信息存储在**xcart_register_fields**中，这些自定义字段的值在**xcart_register_fields_values**中。

数据库的读写来自：include/register.php

书面：

```
 if (!empty($additional_values)) {

            foreach ($additional_values as $k => $v) {

                func_array2insert(

                    'register_field_values',

                    array(  [...] 
```

读：

```
[Not sure yet] 
```

# android-ndk - 无法使用 Android NDK R8 构建静态库

> ID：15238144
> 
> 赞同：5
> 
> 时间：2013-03-06T02:57:18.873
> 
> 标签：android-ndk, static-libraries

我一直在用 Android NDK 构建一个共享库，现在想将它构建为一个静态库。我假设我所要做的就是在 Android.mk 中将**BUILD_SHARED_LIBRARY**更改为**BUILD_STATIC_LIBRARY**但现在当我运行时`ndk-build`，绝对没有任何反应。它只是回到命令提示符而不显示任何内容。我试过`ndk-build -n`了，它显示了 3 个`rm`正在执行的命令，没有别的。我试过`ndk-build -B`了，没什么区别。我试过`ndk-build -d`了，输出中没有任何与我的源文件或库名称相关的内容。

如果我将 make 文件改回以构建共享库，它会编译源代码并链接 .so 没有问题。

有人有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T04:33:13.433

看来，为了建立一个静态库，它必须是一个东西的依赖。通过添加具有以下行的 Application.mk 文件，我能够将我的库构建为静态库：

> APP_MODULES = mylib

# php - 在 PHP 中，是否有太多的赋值被认为是不好的？如果是，为什么？

> ID：15238146
> 
> 赞同：13
> 
> 时间：2013-03-06T02:57:31.107
> 
> 标签：php

Netbeans 似乎暗示太多的任务是非常糟糕的，应该改变。

IE

```
$foo = ' bar ';
$foo = trim($foo); 
```

应该更好地编码为

```
$foo = ' bar ';
$trimmed_foo = trim($foo); 
```

这可以接受吗？如果是，为什么？我知道我可以在设置中关闭这个特定的提示类型，但只是检查是否有人为此发现了任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T03:14:22.560

这是一个新的警告，大约在 2012 年年中。

由于您使用了修剪示例，我猜您已阅读此[https://blogs.oracle.com/netbeansphp/entry/several_new_hints](https://blogs.oracle.com/netbeansphp/entry/several_new_hints)，它试图解释警告。我对这个警告的看法是，它试图警告您意外重用变量。因此，它非常方便。在您给它的装饰盒中，它似乎有点笨拙。如果重新分配是在他接下来的路线上，那可能不是偶然的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T02:59:20.587

理想情况下，变量名应该描述内容。如果您重复分配给同一个变量，则表明变量内容没有很好地定义。

此外，如果您的代码有这样的内容：

```
$foo = ' bar ';
// some code, mybe 100 lines of it
// now do something with $foo 
```

如果您更新代码以在`$foo = trim($foo);`上面加起来会发生什么？你破坏了下面的代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T03:00:24.937

这些变体没有区别。如果有的话，第一个更好，因为它避免了变量使范围混乱。

我认为警告的真正含义是您应该尝试做

```
$foo = trim(' bar '); 
```

直接（或任何 $foo 首先真正设置为），而不是将其存储在临时文件中。当然，这并不总是可能的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-17T10:57:46.133

如果你不喜欢这个提示，你可以简单地在工具 -> 选项 -> 编辑器 -> 提示 -> PHP -> 不可变变量中将其停用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T03:07:33.717

恕我直言，第一种方法可以比第二种方法获得更高的性能。

另一方面，如果您需要更多描述性变量，第二种方法会更有帮助。如果多人在同一个项目上工作，这可能会更有帮助。

# java - 如何避免乐观锁异常

> ID：15238151
> 
> 赞同：0
> 
> 时间：2013-03-06T02:57:48.063
> 
> 标签：java, multithreading, executorservice, optimistic-locking

我正在尝试模拟 web 服务调用，并开发了一个示例客户端，它形成了一个虚拟请求并获得响应，现在我所做的是我在这个客户端类中实现可调用，并将我的所有业务逻辑放在构造函数中的调用和请求形成中。

从另一个类中，我创建了 X 个客户端对象并将它们存储在一个列表中，并使用 Executor Service 我正在尝试使用 invokeALL 执行此列表

当执行程序中的线程池计数为 10 并且我的 x 为 10 工作正常但当我尝试将 x 增加到 20 或更高时，我得到乐观锁定异常

有没有办法解决这个问题

# google-profiles-api - 谷歌中的 http://schemas.google.com/g/2005#internal-extension 是否损坏？

> ID：15238153
> 
> 赞同：0
> 
> 时间：2013-03-06T02:58:01.743
> 
> 标签：google-profiles-api

在创建 Rel 值为[http://schemas.google.com/g/2005#internal-extension](http://schemas.google.com/g/2005#internal-extension)的 Google 联系人电话号码时， Google 会引发 InvalidEntryException。其他类型的工作。这在谷歌中被破坏了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T05:08:36.150

从 2006 年开始，我在 .net 库中发现了该 rel 的热门内容，但在其他任何地方都没有。我个人使用谷歌的这个列表：[https](https://developers.google.com/gdata/docs/2.0/elements#gdPhoneNumber) ://developers.google.com/gdata/docs/2.0/elements#gdPhoneNumber 。在该页面上实际上有一个如何设置扩展名的示例（也许他们不推荐使用该 rel 并且该示例旨在适应它）。无论如何，如果可能的话，你应该在你的实现中做同样的例子。

# ember.js - 如何将 Ember.js 中的对象控制器与仅返回所有对象的 API 一起使用？

> ID：15238156
> 
> 赞同：0
> 
> 时间：2013-03-06T02:58:38.740
> 
> 标签：ember.js, ember-data

我有一个两页的 Ember.js 应用程序，它使用 ember-data 来包装一个简单的 RESTful API。主页是产品列表，另一个页面是一个产品的产品详细信息页面。数据通过只有“索引”请求的 API 加载，`/api/products`.

通过主页导航网站时，上述方法工作正常，但我不确定如何最好地处理直接导航到产品详细信息页面。我需要 ember-data 来请求所有产品并将这些产品保留在客户端，以便当用户浏览简单站点时，它不会再向产品 API 发出任何请求。但是，我的应用程序中的 ProductIndexView 和 ProductIndexController 最好只看到一条记录。

在 Ember.js 中是否有处理这个问题的好方法？我知道我可以将计算属性添加到过滤完整列表的控制器中，然后将其传递到视图模板中。但是，我宁愿视图和控制器不知道完整列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:57:10.380

您需要将所有路线嵌套在可获取所有产品的资源中。

像这样的东西：

```
App.Route.map(function() {
  this.resource('products', { path: '/' }, function() {
    this.route('index');
    this.resource('product', { path:'/:product_id'} );
  });
});

App.ProductsRoute = Ember.Route.extend({
  model: function() {
    return App.Product.find({});
  }
});

App.ProductsIndexRoute = Ember.Route.extend({
  model: function() {
    return this.modelFor('products');
  };
}); 
```

使用`products/index`模板显示所有产品。

使用`product`模板显示产品详细信息。

注意`{}`I 包含在`App.Product.find({})`. 这会强制 ember-data 返回一个承诺。这对于使`product`路由在被调用之前等待所有`products`从服务器到达是必要的。

# c# - ServiceStack 让 ORMLite 使用 T4

> ID：15238157
> 
> 赞同：1
> 
> 时间：2013-03-06T02:58:41.643
> 
> 标签：c#, servicestack, ormlite-servicestack

我正在为 ORMLite 评估 T4。不管有几个小故障，我都让它工作了。当我在 MSSQL 中将 web.config 指向 Northwind 并从我的 SS Web 项目中运行它时，OrmLite.SP.cs 会自动生成以下内容：

```
public class OrmLiteSPStatement
{
 ....
        try
        {
            reader = command.ExecuteReader();
#pragma warning disable 618
            return reader.GetFirstColumn<T>();
#pragma warning restore 618
        }
        finally ...

        try
        {
            reader = command.ExecuteReader();
#pragma warning disable 618
            return reader.GetScalar<T>();
#pragma warning restore 618
        }
        finally ...

        try
        {
            reader = command.ExecuteReader();
#pragma warning disable 618
            return reader.GetFirstColumn<T>();
#pragma warning restore 618
        }
        finally ...

        try
        {
            reader = command.ExecuteReader();
#pragma warning disable 618
            return reader.GetFirstColumnDistinct<T>();
#pragma warning restore 618
        }
        finally ... 
```

它们都来自 OrmLiteSPStatement 类中的 OrmLite.SP.cs 自动生成代码...

```
 Error    1   No overload for method 'GetFirstColumn' takes 0 arguments 
   Error    2   No overload for method 'GetScalar' takes 0 arguments 
   Error    3   No overload for method 'GetFirstColumn' takes 0 arguments 
   Error    4   No overload for method 'GetFirstColumnDistinct' takes 0 arguments 
```

当我将鼠标移到检查错误时，visual studio 说：

`Cannot access internal method 'GetFirstColumn' here`

我如何解决它？

我正在运行 VS2012、.Net 4.0、ServiceStack 3.9.38.0、SQL2008R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:25:50.853

这些 T4 模板仍在使用上周在内部制作的已弃用方法。

[向 OrmLite 项目](https://github.com/ServiceStack/ServiceStack.OrmLite/issues)（或拉取请求）提出问题，以便我们跟踪问题。

# javascript - javascript数组和闭包

> ID：15238162
> 
> 赞同：0
> 
> 时间：2013-03-06T02:59:19.067
> 
> 标签：javascript, arrays, function

早些时候我发布了一个关于访问存储在函数中的数组值，
[使用闭包传递数组值](https://stackoverflow.com/questions/15212604/passing-array-value-using-closure/15212675#15212675)的问题，并被告知这段代码可以完成这项工作。

```
<script>
    function ArrValues(arr) {
     var arr1 = arr=='one' || arr=='all' ? ['grapes','peaches','plums'] : [],
     arr2 = arr=='two' || arr=='all' ? ['car','motorcycle','tree'] : [],
     arr3 = arr=='three' || arr=='all' ? ['200','1000','350'] : [];
     gotIt(arr1,arr2,arr3);
  }

 function gotIt(arr1,arr2,arr3){
    alert(arr1);
    alert(arr2);
    alert(arr3);
  }
</script> 
```

我已经更新了代码，如下所示。这是只返回我想要的数组而不将其作为参数发送给另一个函数的好方法吗？

```
 <script>
  function ArrValues(arr) {
  var arr1 = arr=='one' || arr=='all' ? ['grapes','peaches','plums'] : [];
  if(arr1.length>0){
    return arr1;
  };

  arr2 = arr=='two' || arr=='all' ? ['car','motorcycle','tree'] : [];
  if(arr2.length>0){
    return arr2;
  };

 arr3 = arr=='three' || arr=='all' ? ['200','1000','350'] : [];
  if(arr3.length>0){
    return arr3;
   }
  }
 </script>

 <div id="one" onclick="ArrValues(this.id)">one</div>
 <div id="two" onclick="ArrValues(this.id)">two</div>
 <div id="three"onclick="ArrValues(this.id)">three</div>
 <div id="all"onclick="ArrValues(this.id)">all</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:09:01.347

怎么样

```
function ArrValues(arr) {
    var values = {
         'one': ['grapes','peaches','plums'],
         'two': ['car','motorcycle','tree'],
         'three': ['200','1000','350']
        };

    return values[arr];
} 
```

(*it does not handle the `all` case as you do not describe what to return in this case..*)

* * *

if with `all` you want all values merged in a single array then

```
function ArrValues(arr) {
    var match,
        values = {
            'one': ['grapes','peaches','plums'],
            'two': ['car','motorcycle','tree'],
            'three': ['200','1000','350']
        };

     if (arr!=='all'){
         match = values[arr];
     } else {
         match = values['one'].concat( values['two'] ).concat( values['three'] );
     }

     return match;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:01:50.253

并不真地。由于您对“其他”案例不感兴趣，因此您最好这样做：

```
if( arr == "one" || arr == "all") return ['grapes','peaches','plums']; 
```

和类似的构造。

话虽如此，如果你这样做，那么所谓的“all”按钮将永远只返回“one”数组，因为它总是匹配第一个`if`语句并返回数组。

# android - 在平板电脑上缩放视图以看起来类似于手机

> ID：15238165
> 
> 赞同：4
> 
> 时间：2013-03-06T02:59:31.893
> 
> 标签：android

我创建了一个简单的 Android 应用程序。它只有一个活动和一个视图。

该应用程序是为手机设计的。我对所有 UI 元素测量使用“设备独立像素”单位 (dp)，对大多数布局使用相对布局。该应用程序在小屏幕上看起来不错。

在大屏幕上（比如平板电脑），所有的元素都很微小，分散开来，底部有很大的空白空间。确实，平板电脑和手机之间的 UI 元素的物理尺寸大致相同，这是 dp 单元所承诺的，但这并不是我真正想要的这个应用程序。我希望整个界面变得更大并尽可能地填满屏幕，就像您在 iPad 上运行 iPhone 应用程序并按下“2x”按钮时一样。

最好的方法是什么？我必须为每个屏幕尺寸编写单独的视图吗？我应该使用像素（px）而不是 dp 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:49:31.287

使用 px 作为衡量标准实际上会更糟——因为新的平板电脑具有高 DPI 屏幕，这意味着平板电脑上的 100px 在视觉上会比中型手机上的要小。

您最好的选择是使用布局覆盖（layout-sw600dp、layout-sw700dp）。**尽管不鼓励简单地扩大手机布局**..如果您想使用快捷方式，您只需将手机布局复制到 sw* 文件夹并调整所有 dp 测量值。

您还需要使用以下命令强制平板电脑进入纵向模式：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

# ios - iOS 航位推算

> ID：15238171
> 
> 赞同：0
> 
> 时间：2013-03-06T03:00:07.647
> 
> 标签：ios, cmmotionmanager, dead-reckoning

我正在开发一个 iOS 项目，该项目需要我在 GPS 不可用时进行简单的航位推算。我收到了来自各种手机的大量测量数据，其中包括以下内容：

1.  GPS 数据（x、y、z、航向、速度）（如果可用）
2.  加速度计（用户加速度 x、y、z）
3.  陀螺仪（旋转x、y、z）

我想计算时间序列中丢失的 GPS 位置。我了解如何根据最后的 GPS 位置和课程值来预测位置，但这给了我很大的错误。我的问题是，如果我将加速度计和陀螺仪数据结合起来，是否可以获得更好的结果。我了解如何整合加速度计值来获取速度信息，但我不确定如何使用陀螺仪数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-01T10:05:31.253

这不是一个小话题。关于您的问题：“是的，通过组合来自所有传感器的输入，您可以获得更好的结果”。

这就是卡尔曼滤波器 (KF) 的意义所在——这个过程称为*传感器融合*，网上有很多关于它的主题。通常用于此目的的 KF 版本是*扩展卡尔曼滤波器*。我建议阅读这篇论文 - 它很快就实现并解释了，但显然正是您想要执行的任务：

[http://www.tkt.cs.tut.fi/research/nappo_files/1_C2.pdf](http://www.tkt.cs.tut.fi/research/nappo_files/1_C2.pdf)

# xml - xaml/winrt 中的 xml 解析：路径中的非法字符

> ID：15238172
> 
> 赞同：1
> 
> 时间：2013-03-06T03:00:17.807
> 
> 标签：xml, xml-parsing, windows-runtime, windows-store-apps, winrt-xaml

我有这段代码可以读取文本，然后将其解析为 XML：

```
var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(@"Assets\levels.xml");
var stream = await file.OpenReadAsync();
var rdr = new StreamReader(stream.AsStream());
var contents = await rdr.ReadToEndAsync();
var cleanedContents = contents.Replace("\r\n", "").Replace( '\\', ' ');

var xmlElements = XDocument.Load(cleanedContents).Elements();
var levels = xmlElements.Descendants("Level"); 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<LevelLoader>
  <Level>
    <LevelNum>1</LevelNum>
      <Waves>
        <Wave>
          <WaveNum>1</WaveNum>
          <Background>
            <MinNoise>180</MinNoise>
            <MaxNoise>255</MaxNoise>
          </Background>
          <Objects>
            <Object>
              <Id>Sat</Id>
              <Position>
                <Required>1</Required>
                <X>2000</X>
                <Y>3000</Y>
              </Position>
            </Object>
          </Objects>
        </Wave>
      </Waves>
  </Level>
</LevelLoader> 
```

调试器显示一堆回车和换行被拾取（\r\n）：

```
<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<LevelLoader>\r\n  <Level>\r\n    <LevelNum>1</LevelNum>\r\n      <Waves>\r\n        <Wave>\r\n          <WaveNum>1</WaveNum>\r\n          <Background>\r\n            <MinNoise>180</MinNoise>\r\n            <MaxNoise>255</MaxNoise>\r\n          </Background>\r\n          <Objects>\r\n            <Object>\r\n              <Id>Sat</Id>\r\n              <Position>\r\n                <Required>1</Required>\r\n                <X>2000</X>\r\n                <Y>3000</Y>\r\n              </Position>\r\n            </Object>\r\n          </Objects>\r\n        </Wave>\r\n      </Waves>\r\n  </Level>\r\n</LevelLoader> 
```

我似乎可以通过替换来清除它。

我不认为带有？的标题有什么不同，因为即使我删除它，我仍然会收到这个错误。

我不知道如何删除额外的 \'s 因为 .replace('\', ' ') 似乎没有这样做。

```
<?xml version=\"1.0\" encoding=\"utf-8\" ?><LevelLoader>  <Level>    <LevelNum>1</LevelNum>      <Waves>        <Wave>          <WaveNum>1</WaveNum>          <Background>            <MinNoise>180</MinNoise>            <MaxNoise>255</MaxNoise>          </Background>          <Objects>            <Object>              <Id>Sat</Id>              <Position>                <Required>1</Required>                <X>2000</X>                <Y>3000</Y>              </Position>            </Object>          </Objects>        </Wave>      </Waves>  </Level></LevelLoader> 
```

有了我仍然看到的所有内容：

> 路径中的非法字符。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T03:44:13.090

XDocument.Load() 需要一个路径；你正在传递一个字符串，所以你应该调用 Parse()

[http://msdn.microsoft.com/en-us/library/bb343181.aspx](http://msdn.microsoft.com/en-us/library/bb343181.aspx)

# java - 从 .pem 文件加载私钥时出现无效的密钥格式异常

> ID：15238179
> 
> 赞同：1
> 
> 时间：2013-03-06T03:00:35.390
> 
> 标签：java, security, pem

我正在尝试从 pem 文件加载私钥。我受到限制，因为我不允许使用任何外部库，例如 Bouncy Castle。

我的一段代码：

```
 KeyFactory keyFactory = KeyFactory.getInstance("RSA");
    File privKeyFile = new File(privateKeyPath);
    byte[] privKeyBytes = new byte[(int)privKeyFile.length()];
    KeySpec ks = new PKCS8EncodedKeySpec(privKeyBytes);
    PrivateKey privKey = (PrivateKey) keyFactory.generatePrivate(ks); 
```

最后一行出现异常。我还尝试使用 openssl 将 pem 文件转换为 PKCS#8：

```
openssl pkcs8 -topk8 -inform PEM -output DER -in mycert.pem -nocrypt > mynewcert.pk8 
```

但我仍然收到“无效的密钥格式”异常

我认为这可能是我的 pem 文件有问题，但是在使用 openssl 生成新文件后：

```
openssl req -config "C:\Program Files\GnuWin32\bin\openssl.conf" -x509 -nodes -days 365 -newkey rsa:1024 -keyout mycert.pem -out mycert.pem 
```

我仍然得到相同的结果。

这是我的 pem 文件的内容：

```
-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCq4Do244NSSP+acHy3SRYMateNfM2LWnfvLmoDPkWrA2u+ZygT
5f1amkZED7o9UMmAK2zif8xQgIyl5olJ++OZfFJdFqCJ/yw4NGyrApYAkmi91Dms
e0JbjPZ4yVKaj1tnECJb4xfdHRk818IP+X4HTWmZG3LeZ3Z3o63dL+OscwIDAQAB
AoGAUBFzlca0ATmtc7uj5Op9R2JFEMpbMiI5Mr1H9a8XTBP1R6nksLZDKlJB/KB1
/0c8tC8k/Vku7sXdodtNl3pNYhks9vi23lGgf47qwx05kst7hPJB4D0Kaiigy61S
yEfl2FLXpcahmVpAt7VRNfEOd0Ogvvx3NJJsncDVbiCHCoECQQDYXpsQQHNPamCj
nl9NHGncMAw5o63AoghxlbN41ZChbScyED5qkiU3IOfx1HG2zISjlocEMADGLUg/
N3E6vAJBAkEAyix114sSBb1QWv4DN2QH5L5r4Xia+jGO7ZIApJs8eaV0dJ/6OPaP
E5xdnh6s3zIv6HBBUpsY1m/KBOB35UXZswJAD5wDo9CCgSAziJpMVcvO90ugFihw
yIzn/wnFwNnnbT3qrfnuBtI0TR3and+ttHpct1CMvQiZhbKOm8DsMkiOAQJAZ9ik
gx2VGUufvc1h247PGyjQgxUPDdps3wyytdpjGtzoz4ro3V+QKHOWBsUc6Nx/jTYz
53lxLZxoOU8PZr4VTwJBAI9qj9mDdFfHjSgW1UeovMeKzztNgwCzy2pofxEhNC78
eWyKNCwykZ4m9Ul58mD9CmiVevWu+dNzHSPHAuLbWlo=
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
MIICjTCCAfYCCQD0zMehYL1Q3zANBgkqhkiG9w0BAQQFADCBijEOMAwGA1UEChMF
UHVuY2gxDTALBgNVBAsTBEdhbWUxIzAhBgkqhkiG9w0BCQEWFGR6dW5nbGVvODlA
Z21haWwuY29tMQ8wDQYDVQQHEwZIYSBOb2kxDzANBgNVBAgTBkhhIE5vaTELMAkG
A1UEBhMCVk4xFTATBgNVBAMTDGxlb3N0eWxlLmNvbTAeFw0xMzAzMDYwMjU0MDJa
Fw0xNDAzMDYwMjU0MDJaMIGKMQ4wDAYDVQQKEwVQdW5jaDENMAsGA1UECxMER2Ft
ZTEjMCEGCSqGSIb3DQEJARYUZHp1bmdsZW84OUBnbWFpbC5jb20xDzANBgNVBAcT
BkhhIE5vaTEPMA0GA1UECBMGSGEgTm9pMQswCQYDVQQGEwJWTjEVMBMGA1UEAxMM
bGVvc3R5bGUuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCq4Do244NS
SP+acHy3SRYMateNfM2LWnfvLmoDPkWrA2u+ZygT5f1amkZED7o9UMmAK2zif8xQ
gIyl5olJ++OZfFJdFqCJ/yw4NGyrApYAkmi91Dmse0JbjPZ4yVKaj1tnECJb4xfd
HRk818IP+X4HTWmZG3LeZ3Z3o63dL+OscwIDAQABMA0GCSqGSIb3DQEBBAUAA4GB
ADXvjTyTAoe59B11bQ8UTVO6yY5Jc8+Z7kOoJgdQAdEjZJgT7JjCEd1QnvKsBRXy
tDDYLXXZEnZ1xxTQkL0duqIwluHLCGFq3xi156EM8I7mKBEIwBTFRiX5Lh22MAsq
2mwtDnQqKj4yZoqmEKhFZlykl6uZHU+WxZc1tHOfYBmc
-----END CERTIFICATE----- 
```

这是我的堆栈跟踪：

```
 java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: invalid key format
    at sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(Unknown Source)
    at java.security.KeyFactory.generatePrivate(Unknown Source)
    at Crypto.loadKeyPair(Crypto.java:165)
    at Crypto.signXML(Crypto.java:202)
    at Main.main(Main.java:12)
Caused by: java.security.InvalidKeyException: invalid key format
    at sun.security.pkcs.PKCS8Key.decode(Unknown Source)
    at sun.security.pkcs.PKCS8Key.decode(Unknown Source)
    at sun.security.rsa.RSAPrivateCrtKeyImpl.<init>(Unknown Source)
    at sun.security.rsa.RSAPrivateCrtKeyImpl.newKey(Unknown Source)
    at sun.security.rsa.RSAKeyFactory.generatePrivate(Unknown Source)
    ... 5 more 
```

经过一番搜索，我找不到任何进一步的信息。现在我被卡住了，不知道下一步该怎么做。请给点灯，我真的需要一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-11T02:52:14.847

```
KeySpec ks = new PKCS8EncodedKeySpec(privKeyBytes);
PrivateKey privKey = (PrivateKey) keyFactory.generatePrivate(ks); 
```

如果你想在上面使用，那么你的私钥文件应该是 PKCS#8 类型。但您的文件内容是 PKCS#1。所以，使用 bountyCastle 库或其他方式。

附言。下面的内容请注意，您的私钥文件是 PKCS#1 类型

```
-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY----- 
```

PKCS#8 看起来像

```
-----BEGIN PRIVATE KEY-----
-----END PRIVATE KEY----- 
```

# oop - 使 Matlab 类的属性成为给定集合中的一个元素

> ID：15238183
> 
> 赞同：0
> 
> 时间：2013-03-06T03:00:54.180
> 
> 标签：oop, matlab

我有一堂课（Matlab 2012a，Ubuntu 12.10）

```
classdef trajectory

   properties
       partName;
       coordinates;
   end

   methods
   end

end 
```

如何将属性 partName 限制为集合 {'leftHand','rightHand'} 的元素之一（两者都是字符串）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:16:44.983

您可以使用属性设置方法，例如。

```
classdef trajectory   
   properties
       partName;
       coordinates;    
   end

   methods
        function this=set.partName(this,myStr)
            mySet={'leftHand','rightHand'} ;
            if any(strcmp(mySet,myStr))
                this.partName=myStr;
            else
                error('Value not part of set');
            end
        end    
     end 
  end 
```

# codeigniter - 在自定义主题中访问 PyroCMS 模块

> ID：15238184
> 
> 赞同：0
> 
> 时间：2013-03-06T03:00:56.543
> 
> 标签：codeigniter, pyrocms

我设计了一个自定义主题，我需要能够将我制作的模块加载到我的 default.html 页面中。到目前为止，我已经写了以下内容：

```
<div id="outer-content">
    <div id="content">
        {{ template:body }}
    </div>
</div> 
```

`{{ template:body }}`为了显示自定义模块，我应该用什么替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:57:43.083

也许这会有所帮助。在您的主题中，使用与您的模块相同的名称保存您的 default.html 文件。例如，您可以为博客创建自定义布局文件并将其保存为 blog.html。当模块被调用时，它使用与您的模块同名的布局文件。

如果那不是您的答案，请尝试在 PyroCMS 模块论坛上发帖。

# java - Android Resolve Uri failed on bad bitmap Uri error

> ID：15238191
> 
> 赞同：1
> 
> 时间：2013-03-06T03:01:31.863
> 
> 标签：java, android, camera

我正在创建一个相机应用程序，并在主要活动中检索相机预览位图并保存到内部存储。在意图到另一个类之后，我想通过获取位图的路径来显示图像。但是在拍照后第一次显示图片很好，但有时不显示图像并给出以下错误

```
"Resolve Uri failed on bad bitmap Uri : data/data/com.camera.app/files/287372639100.jpg" 
```

主类

```
 //IMG name
                mName = System.currentTimeMillis();
                dTime  = mName;

                try {
                    //get bitmap & save into internal storage
                    BitmapFactory.Options options = new BitmapFactory.Options();
                    options.inSampleSize = IN_SAMPLE_SIZE;
                    bitmap = BitmapFactory.decodeByteArray(data, 0, data.length, options);

                    try {
                        Uri uri = Uri.parse(dTime+".jpg");
                        File f = new File(uri.toString());
                        ExifInterface exif = new ExifInterface(f.getPath());
                        int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);

                        int angle = 0;

                        if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                            angle = 90;
                        } 
                        else if (orientation == ExifInterface.ORIENTATION_ROTATE_180) {
                            angle = 180;
                        } 
                        else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                            angle = 270;
                        }
                        else{
                            angle = 0;
                        }

                        Matrix mat = new Matrix();
                        mat.postRotate(angle);
                        //get rotated bitmap
                        Bitmap correctBmp = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), mat, true);                 

                        //save bitmap to internal storage
                        FileOutputStream fos = openFileOutput(dTime+".jpg", Context.MODE_PRIVATE);
                        correctBmp.compress(CompressFormat.JPEG, 90, fos);
                        correctBmp = Bitmap.createScaledBitmap(bitmap, 380, 600, false);
                        fos.close();

                        bitmap.recycle();
                        correctBmp.recycle();
                    }
                    catch (IOException e) {
                        Log.w("TAG", "-- Error in setting image");
                    }   
                    catch(OutOfMemoryError oom) {
                        Log.w("TAG", "-- OOM Error in setting image");
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }

                // intent send data
                Intent intent = new Intent(MainActivity.this,PhotoClass.class);
                intent.putExtra("IMG_NAME", dTime);
                startActivity(intent);
                finish();

                Log.d(TAG, "onPictureTaken - bitmap sending.."); 
```

摄影课

```
 //get intent
        Intent intent = getIntent();
        imgName = intent.getLongExtra("IMG_NAME", 0);
        uri = Uri.parse(getFilesDir().getPath() + "/"+imgName+".jpg");

        if(imgName != 0){
            mImagePreView.setImageURI(uri);
        } 
```

需要帮助来解决这个问题。

# jquery - jquery ui中的可选图像项

> ID：15238192
> 
> 赞同：2
> 
> 时间：2013-03-06T03:01:34.693
> 
> 标签：jquery, jquery-ui

所有，我正在尝试实现可选图像列表。下面是我所做的。但是我有两个问题需要解决，请帮助审查它。谢谢。

1.  我不希望选择 img。
2.  防止多选。

**脚本**

```
function initSelectable() {
$("#layoutol").selectable({
    stop : function(event, ui) {
        var result = $("#spanSelectedLayout").empty();
        $(".ui-selected", this).each(function() {
            var index = $("#layoutol li").index(this);
            result.append((index + 1));
        });

    },

    selected:function (event,ui){
        //prevent the img element selected and multiple selected, the below code not make it .
        $(event.target).children('.ui-selected').children('.ui-selected').removeClass('ui-selected');
        $(event.target).children('.ui-selected').not(':first').removeClass('ui-selected');
    }
}); 
```

}

**html**

```
 <ol id="layoutol">
      <li class="ui-state-default"><img alt="" src="img/A.PNG" /></li>
      <li class="ui-state-default"><img alt="" src="img/B.PNG" /></li>
      <li class="ui-state-default"><img alt="" src="img/C.PNG" /></li>
      <li class="ui-state-default"><img alt="" src="img/D.PNG" /></li>
   </ol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:13:25.787

所有，我找到了一种方法，我所做的如下。有什么更好的办法吗？谢谢。

```
selected:function (event,ui){
            $('img',event.target).removeClass('ui-selected');
            $(event.target).children('.ui-selected').not(':first').removeClass('ui-selected');
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T04:17:36.750

我找到了这个。很容易集成到您的网站上： [http ://rvera.github.io/image-picker/](http://rvera.github.io/image-picker/)

# postgresql - 在保持主键自动增量的同时复制 Postgres 表

> ID：15238195
> 
> 赞同：5
> 
> 时间：2013-03-06T03:01:52.427
> 
> 标签：postgresql

我正在尝试使用此 postgres 命令复制表，但主键自动增量功能不会复制。有没有什么快速简单的方法可以做到这一点？谢谢！

```
CREATE TABLE table2 AS TABLE table; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T23:26:46.823

这是我要做的：

```
BEGIN;
LOCK TABLE oldtable; 
CREATE TABLE newtable (LIKE oldtable INCLUDING ALL);
INSERT INTO newtable SELECT * FROM oldtable;
SELECT setval('the_seq_name', (SELECT max(id) FROM oldtable)+1);
COMMIT; 
```

...虽然这是一件不寻常的事情，但我会对您要解决的问题感兴趣。

# javascript - 如何在单独的窗口中打印 html 表格

> ID：15238196
> 
> 赞同：0
> 
> 时间：2013-03-06T03:01:58.340
> 
> 标签：javascript, html

当我按下一个按钮时，我想在一个单独的窗口中使用一些 PHP 数据打印一个 HTML 表。最好的方法是什么？

```
<table border="1"> 
    <tr>
        <td>MODEL</td>
        <td><?php echo $modelNo ?></td>
        <td>MODEL</td>
        <td><?php echo $modelNo ?></td>
    </tr>
    <tr>
        <td>QTY</td>
        <td><?php echo $box ?></td>
        <td>QTY</td>
        <td><?php echo $box ?></td>  
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:03:29.440

让按钮打开新窗口，并将其位置设置为打印表格的 PHP 文件。

像这样简单的东西可以工作：

```
<a href="show_table.php" target="_blank">Click</a> 
```

（您可以选择将此链接设置为看起来像一个按钮）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:03:46.153

您需要让这个表可以从 PHP 脚本返回，或者在某个地方可用（我假设您已经这样做了）。

这是一个纯粹的html方法：

```
<a href="tabledata.php" target="_blank">Open Table!</a> 
```

这是一个javascript方法：

```
<script type="text/javascript">
<!--
function myPopup() {
window.open( "http://path.to.my.page.com/mypage.php" )
}
//-->
</script>
</head>
<body>
<form>
<input type="button" onClick="myPopup()" value="Open table!">
</form>
<p onClick="myPopup()">CLICK ME TOO!</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:11:38.787

您还可以将 html 放在隐藏的输入中，并使用表单提交到其他页面并使用 $_POST 从那里检索它，就像假设 $table_data 是您的 html 一样：

```
<form action="new_window.php">    
<input type="hidden" value="$table_data" name="data">
<input type="submit" value="Open Table"> 
</form> 
```

然后在 new_window.php 中：

```
if(isset($_POST['data'])){
echo $_POST['data'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T03:58:16.000

您还可以通过创建新窗口并在窗口中写入内容来在 javascript 中创建整个解决方案。

在此处的新窗口中查看基本方法：http: [//www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp) 并 [打印 DIV 的内容](https://stackoverflow.com/questions/2255291/print-the-contents-of-a-div)

您必须在表中添加一个 id 属性

然后使用 DOM 函数，例如： [https](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById) ://developer.mozilla.org/en-US/docs/DOM/document.getElementById 和 [https://developer.mozilla.org/en/docs/DOM/element.innerHTML](https://developer.mozilla.org/en/docs/DOM/element.innerHTML)

您必须将表格包装成 html。这种方法的主要优点是以后可以在任何表上调用，无需添加一行php.ini文件。

# python - 关于改进我的代码的建议。

> ID：15238199
> 
> 赞同：1
> 
> 时间：2013-03-06T03:02:12.470
> 
> 标签：python

你好我是一个相当新手的程序员。我有一个简单的代码

```
name=raw_input("Hello I am Bob. What is your name?") 
print("It is very nice to meet you,", name) 
response=raw_input("what do you want to do today?") 
if response == "price match": 
```

然而，在我得到的第四行`SyntaxError: unexpected EOF while parsing error`，我确实查看了它，我发现使用 raw_input 输入字符串比使用 input 函数要好得多。我不知道为什么错误不断弹出。我能得到一些帮助，也许还有一些关于如何改进代码的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:05:55.143

你必须在声明中做*一些事情。*`if`例如，打印价格：

```
if response == "price match":
    print "Yes, we can do that for you". 
```

但是，您不能只将*块*（在 a 之后缩进的内容`:`）留空，否则 Python 会给您一个错误。

* * *

在极少数情况下（而不是您的情况），您可能不想做任何事情，但仍然有一个块（例如，如果 需要`except:`）。在这种情况下，您仍然需要在块中放置一些东西，但您可以使用`pass`什么都不做的词。（这几乎从不在`if`块中使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:04:53.457

我不是 Python 专家。但看起来你的问题在这里：

```
response=raw_input("what do you want to do today?") if response == "price match": 
```

你正在定义一个 if 语句，但是如果这个值是真的，你如何处理它？

我猜你需要类似的东西：

```
if response == "price match":
  print('Match')
 else:
    print('Did not match') 
```

希望这有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:06:21.387

如果在放入 if/else/functions/etc 的正文之前，您需要一个占位符来仅具有有效的语法，请使用 pass。

[http://docs.python.org/release/2.5.2/ref/pass.html](http://docs.python.org/release/2.5.2/ref/pass.html)

至于您的代码，有效的 if 语句必须始终有一个主体。所以放一些代码或者使用pass。

# ios - 如何将通行证分享到 iPod

> ID：15238204
> 
> 赞同：0
> 
> 时间：2013-03-06T03:03:00.087
> 
> 标签：ios, json, ios6, passbook

[我只是按照http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/PassKit_PG/Chapters/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW1](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/PassKit_PG/Chapters/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW1)创建一个通行证

我可以在 xcode 的模拟器中测试它，但如何在 iPod 等真实设备中测试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:05:24.467

[这](http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices)是有关如何将代码部署到设备的教程。您将需要使用带有签名密钥的有效 iOS 开发者帐户来签署您的应用程序，然后使用 xCode 将其推送到您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:21:55.353

您描述在模拟器上加载通行证但在设备上收到“Safari 无法下载此文件”消息的情况通常是由通行证签名错误引起的。

用户在设备上单击“添加”后，将检查清单和通行证签名的有效性。在模拟器上，没有签名检查，无论签名是否有效，通行证都会添加到存折中。

如果出现以下情况，验证检查将失败：

*   包中的manifest与已签名的manifest不同
*   清单中的 SHA1 哈希与包中每个文件的 SHA1 哈希不匹配
*   证书无效（过期、撤销或不是 Apple 颁发的 PassID 证书）

要诊断您的问题，请尝试将您的设备连接到 Xcode 并查看控制台输出，同时将您的通行证添加到 Passbook。

或者，发布指向您的 .pkpass 捆绑包的链接，我们可以帮助您确定问题。

# visual-c++ - Eclipse VC++ 上的 SFML 链接器问题

> ID：15238206
> 
> 赞同：1
> 
> 时间：2013-03-06T03:03:25.183
> 
> 标签：visual-c++, eclipse-cdt, sfml

我正在尝试在我的项目中使用[SFML](http://www.sfml-dev.org/)库来获取音频。

我正在为 C++ 开发 Eclipse Juno 并且正在使用 SFML v1.6。

我添加了, `sfml-audio-d.lib`,`sfml-main-d.lib`和`sfml-system-d.lib`

`C/C++ General > paths and symbols>libraries`

我还定义了一个名为 SFML_DYNAMIC 的宏

`C/C++ Build>Settings>C++ Compiler>Preprocessor`“定义/D”部分

我将包含所有 dll 的目录添加到 PATH 环境变量中。

在我的代码中，我使用了 sf::SoundBuffer，但是当我尝试构建项目时，我收到以下链接器错误：

`Chunk.obj : error LNK2001: unresolved external symbol "private: static class sf::SoundBuffer * Chunk::breakBlockSound" (?breakBlockSound@Chunk@@0PAVSoundBuffer@sf@@A) MyProject.exe : fatal error LNK1120: 1 unresolved externals`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:17:51.123

在使用之前必须在 VS2010 中重建项目。现在工作。

# css - CSS 左右浮动，带有任意顺序的 HTML 元素且没有间隙

> ID：15238211
> 
> 赞同：2
> 
> 时间：2013-03-06T03:03:37.710
> 
> 标签：css, css-float

HTML元素是否可以（以及如何）左右浮动，无论它们处于什么HTML标签顺序，都可以完美堆叠，只是自上而下所有浮动：左侧堆叠在左侧，所有浮动：右侧堆叠在右侧，没有间隙？

（最好使用最干净最标准的 CSS 实践，没有使用 javascript 等的绝对定位脚本）

换句话说，在这个例子中，HTML 元素按顺序排列，1,2,3,4,5,6,7,8，左列将有 1、3、5、6 向左浮动，而 2， 4、7、8 向右浮动，在规则间隔的元素中，没有白色间隙。

```
I want results like this layout:

|  1  2  |
|  3  4  |
|  5  7  |
|  6  8  |

Instead, I'm getting results like this layout:

|  1  2  |
|  3  4  |
|  5     |
|  6  7  |
|     8  | 
```

这是基本的 HTML/CSS 代码示例：

```
<html>

 <style>

  .lefties, .righties {

   width: 40%;
   height: 100px;
   background: #DEF;
   float: left;
   clear: left;

  } 

  .righties { 

   background-color: #FED;
   float:right;
   clear:right; 

  }

  </style>

  <div id="container">

   <div class="lefties" >Test 1</div>
   <div class="righties">Test 2</div>
   <div class="lefties" >Test 3</div>
   <div class="righties">Test 4</div>
   <div class="lefties" >Test 5</div>
   <div class="lefties" >Test 6</div>
   <div class="righties">Test 7</div>
   <div class="righties">Test 8</div>

  </div>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:22:31.680

我有一个涉及绝对定位的解决方案。根据 W3.org 的说法，有一些东西正在开发[`toggle()`](http://dev.w3.org/csswg/css3-values/#toggle-notation)中。

现在，我们被这个烂摊子困住了：

```
<html>
<body>

<style>

.lefties, .righties{
  top: 10px;
  width: 40%;
  height: 100px;
  position: absolute;
}

.lefties {
  background: #DEF;
  left: 10px;
}

.righties { 
  background-color: #FED;
  right: 10px;
}

.lefties ~ .lefties,
.righties ~ .righties{
  transform: translate(0px, 100px);
}

.lefties ~ .lefties ~ .lefties,
.righties ~ .righties ~ .righties{
  transform: translate(0px, 200px);
}

.lefties ~ .lefties ~ .lefties ~ .lefties,
.righties ~ .righties ~ .righties ~ .righties{
  transform: translate(0px, 300px);
}

.lefties ~ .lefties ~ .lefties ~ .lefties ~ .lefties,
.righties ~ .righties ~ .righties ~ .righties ~ .righties{
  transform: translate(0px, 400px);
}

.lefties ~ .lefties ~ .lefties ~ .lefties ~ .lefties ~ .lefties,
.righties ~ .righties ~ .righties ~ .righties ~ .righties ~ .righties{
  transform: translate(0px, 500px);
}
</style>

<div id="container">
  <div class="lefties" >Test 1</div>
  <div class="righties">Test 2</div>
  <div class="lefties" >Test 3</div>
  <div class="righties">Test 4</div>
  <div class="lefties" >Test 5</div>
  <div class="lefties" >Test 6</div>
  <div class="lefties" >Test 7</div>
  <div class="righties">Test 8</div>
  <div class="righties">Test 9</div>
  <div class="righties">Test 10</div>
  <div class="lefties" >Test 11</div>
  <div class="righties">Test 12</div>
</div>

</body>
</html> 
```

但是`toggle()`，看起来我们可以清理 .lefties ~ .lefties ~ .lefties ~ ... 看起来像这样：

```
.lefties ~ .lefties,
.righties ~ .righties{
    transform: translate(0px, toggle(100px,200px,300px,400px,...));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:07:15.780

如果所有 DIV 的高度不同，则不会发生这种情况。

如果它们的高度都一样，你应该没问题，除此之外，我建议有 2 个容器 div 并将你的 div 作为它们的子级。

# asp.net-mvc - MVC 文件结构标准

> ID：15238216
> 
> 赞同：3
> 
> 时间：2013-03-06T03:04:11.520
> 
> 标签：asp.net-mvc

我只是 MVC 的新手，我们正在构建一个庞大的系统，并且在我们的站点中有很多命名空间。

存储文件（CSS、图像、.JS）等的标准位置在哪里？

将它们放在其命名空间的子文件夹中的 Content 文件夹下，或者将它们与各自的父文件一起放入或两者兼而有之。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:08:25.800

默认项目结构包括 CSS 文件的 Content 文件夹和 JavaScript 文件的 Scripts 文件夹。很多人使用这个现有的模板，特别是因为很多 Nuget 项目可能依赖于此。

我个人喜欢将所有内容放在 Content 文件夹中，并在此名为 Css and Scripts 下有一个子文件夹。不过，这确实是一个偏好问题。做任何一致且有条理的事情。这将是使应用程序更易于维护的关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:17:48.687

最好将其作为根级别的脚本（js 文件）放在单独的文件夹中。在内容文件夹中为图像和 Css 等添加子文件夹。

我们还可以为项目的每个部分创建多个控制器和视图。就像登录部分一样，您可以添加身份验证控制器。

我们还可以使用 Helper 类来添加通用功能并在任何地方使用它。

你可以看到以下链接

[http://msdn.microsoft.com/en-us/library/dd410120(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd410120(v=vs.100).aspx)

# ruby-on-rails - 将 Guacamole Java Servlet 与 Rails 项目集成

> ID：15238219
> 
> 赞同：3
> 
> 时间：2013-03-06T03:04:20.390
> 
> 标签：ruby-on-rails, tomcat, vnc, guacamole

我正在尝试将[Guacamole](http://guac-dev.org/)（一个 html5 vnc 客户端）添加到现有的 rails 项目中，但我遇到了一些麻烦，因为 Guacamole 服务器是用 Java 实现的。根据[http://guac-dev.org/doc/gug/writing-you-own-guacamole-app.html](http://guac-dev.org/doc/gug/writing-you-own-guacamole-app.html)的概述，我需要创建 1\. GuacamoleHTTPTunnelServlet（JavaScript 客户端和 Guacd 服务之间的隧道) 和 2\. javascript 客户端本身。请参阅附图以供参考。创建 javascript 客户端似乎很容易，因为所有的 javascript 都已经给出，我只需要将它添加到 rails 视图。如果可能的话，最困难的部分是将 GuacamoleHTTPTunnelServlet java servlet 与 rails 集成。

1.  有没有办法让rails提供javascript但让javascript与同一台机器上的不同服务器通信？我猜不是因为相同的原产地政策。
2.  有没有办法在不损失性能的情况下转发来自 rails server -> java servlet 的 javascript 调用？我不完全清楚javascript客户端如何与服务器通信，但我认为它正在传递java对象。

我以前从未尝试过这样的事情，所以请原谅我的愚蠢。

![在此处输入图像描述](../Images/bd35039beaab7f8262df5d5bc1b35c0c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:09:15.397

我玩过 guacamole，我认为你最好的选择是在 rails 中重写 guacamole 后端（与 guacd 守护进程通信）。无论如何，我会尽力回答你的问题：

1.  您可以使用机架代理 ajax 请求，例如：
    [如何使用机架中间件代理 AJAX 请求？](https://stackoverflow.com/questions/8811413/how-do-i-proxy-ajax-requests-with-rack-middleware)

    另一种方法是使用反向代理（nginx？），例如：http: [//yourdomain.com/your/rails/view/url](http://yourdomain.com/guacamole)
    [http://yourdomain.com/guacamole](http://yourdomain.com/your/rails/view/url)

    通过这种方式，客户端（浏览器）会认为您的应用程序位于同一主机下，从而避免了 javascript 同源策略。iframe 将是一个很好的解决方案。

2.  Javascript 与代理对 guacd 守护进程（没有 java 对象，只是一个自定义协议）的请求的隧道 servlet 进行通信。为了加快性能，您可以使用反向代理（答案 1，例如：nginx）而不是 ruby​​/rack 解决方案。

我希望这可以帮助:)

# ios - performSelector 或直接

> ID：15238223
> 
> 赞同：2
> 
> 时间：2013-03-06T03:05:00.133
> 
> 标签：ios, objective-c, cocoa, performselector

我知道这两者有点相似，但两者之间肯定有任何内部差异，

```
[anObject performSelector:@selector(thisMethod:) withObject:passedObject]; 
```

相当于：

```
[anObject thisMethod:passedObject]; 
```

请告诉我在编译，内存等方面有什么区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T03:48:41.273

方法族是针对特殊情况的`performSelector`，Obj-C 中的绝大多数方法调用应该是直接的。一些区别：

*间接：*当使用`performSelector`调用一个方法时，你有两个方法调用；和`performSelector`目标方法。

*参数是对象：*当通过`performSelector`所有参数调用时，必须作为对象传递，例如，如果调用采用 a 的方法，`double`则该值必须`NSNumber`在传递给之前包装为 an `performSelector`。这些`performSelector`方法在调用目标方法之前解包非对象参数。在直接调用中，不需要包装或展开。

*只有两个参数：*该`performSelector`系列仅包含传递 0、1 或 2 个参数的变体，因此您不能使用它们来调用需要 3 个或更多参数的方法。

您可能将上述大部分内容视为负面因素，那么有什么好处呢？

*动态选择器：*该`performSelector`系列允许您调用直到运行时才知道的方法，只需要知道其*类型（因此您可以传递正确的参数并获得正确的结果）；*换句话说，选择器参数可能是type的*表达式*`SEL`。当您希望将方法作为参数传递给另一个方法并调用它时，可能会使用此方法。**但是**，如果您使用动态选择器使用 ARC 进行编译，这并不重要，并且通常会产生编译器警告，因为不知道选择器 ARC 就无法知道参数的所有权属性。

*延迟执行：*该`performSelector`系列包括在延迟后调用该方法的方法。

通常使用直接方法调用，只有当它不能给你你需要的东西时，你才需要考虑`performSelector`家庭（或其更深奥的表亲）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T03:56:18.980

`performSelector:withObject:`会比直接调用方法稍慢。间接也意味着编译器无法进行正确的类型检查。启用 ARC 后，您还会遇到编译器会抱怨的问题，因为无法准确确定内存管理策略可能是什么。

一般来说，这种间接性——通常称为*反射*，但更准确地称为*元编程*——是应该避免的，因为它将应该是编译时可检测到的故障转移到运行时故障。

Such dynamism is only needed when the name of the selector -- the name of the method -- being called *cannot be determined at compile time*. It should not be used for `@optional` methods in protocols nor should it be used during delegation (in both cases, `respondsToSelector:` + a direct method call are a far better pattern to employ).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T03:15:58.560

该`performSelector:`方法允许您发送直到运行时才确定的消息。有关更多信息，请阅读[此内容。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T03:12:50.643

如果您的应用程序想要使用`reflection`，通过更改配置文件中的某些值，您想要调用不同的方法（不同的适配器）。或者基于对象类型，您想在运行时调用不同的方法。

如果您开发可定制的产品，这是一个强大的功能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T03:33:43.873

我喜欢在声明和实现自定义协议和委托模式时使用 [id performSelecter:selector withObject]，这也是一个用例，我们应该使用 performSelector 而不是直接调用方法...

# python - 使用 Python 将数组与从 mysql 数据库返回的值进行比较

> ID：15238229
> 
> 赞同：1
> 
> 时间：2013-03-06T03:05:41.820
> 
> 标签：python, mysql

当我使用此脚本来获取数组 A 中的每个元素在数组中重复多少次时，BI 会得到正确的结果

```
A = ['text1','text2','text3','text4']
B = ['text1','text2','text3','text4','text1','text2','text3','text4','text1','text2','text3','text4','text1','text2','text3','text4','text1','text2','text3','text4','text3','text4']
for c in A :
    countVar = 0
    for e in B :
        if c == e :
            countVar +=1

    print c     
    print countVar 
```

但是，当 B 数组在这种情况下是从 SQL 查询返回时，确实为第一个元素提取了正确的数字，在这种情况下是 text1，它为其他元素计数拉取 0。

```
cursor = db.cursor() 
cursor.execute("select * from Table")

A = ['text1','text2','text3','text4']

for element in A:
    #print element 

    for row in cursor.fetchall() :

        if row[0] == element :
            #Count
            countClient += 1
    print row
    print countClient
    countClient = 0 
```

结果是这样的：知道我的表中有 text2 和 text3
text1
15
text2
0
text3
0
text4
0
有人知道为什么会这样吗？或建议另一种方法？我还在进行其他计算，例如计算从 SQL 数组返回的值的 SUM 和 AVG，因为我正在处理一些数据。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:15:02.637

我对[文档](http://dev.mysql.com/doc/connector-python/en/myconnpy_MySQLCursor_fetchall.html)的阅读是`fetchall()`在第一个循环之后不会返回任何内容。对于调试，您应该检查它是否真的`for`在第二次（及以后）通过时进入了该内部循环。

要解决此问题，只需对您的代码进行少量修改，您有几个我能想到的选项：

*   使用 a 循环`fetchall`，将其存储在一个新数组中，然后在您当前的代码中使用它。
*   `execute`每次打电话。
*   重置光标指针。不确定这在 Python 中是否可行，但快速搜索并没有发现任何问题。

抱歉，我无法提供更多细节，但 Python 并不是我非常熟悉的语言。

--

对于第一个选项，类似于（伪代码）：

```
i = 0
C = []    
for row in cursor.fetchall() :
    c[i] = row[0]
    i += 1 
```

然后在你的内部循环中，做一个`for el in C`而不是`for row in cursor.fetchall()`

# android - Android 在 Horizo ntalScrollView 中显示图像和文本

> ID：15238235
> 
> 赞同：0
> 
> 时间：2013-03-06T03:06:11.387
> 
> 标签：android, json, horizontalscrollview

所以，我有这个布局：

我的 main.xml（伪）

```
<LinearLayout  >
<RelativeLayout> 
    <HorizontalScrollView >
        <LinearLayout

        </LinearLayout>
    </HorizontalScrollView>

</RelativeLayout> 
```

然后是 list.xml

```
<FrameLayout>
     <ImageView>
     <TextView>
<FrameLayout> 
```

如何在不使用 ListView 和 GridView 的情况下用来自 json 的数据填充我的显示？如何从我的 json 中迭代数据以将其显示在 Horizo​​ntalScrollView 中？因为我想水平显示它。我用过 GridView，我想我可以自定义它。所以，不使用 ListView 和 GridView 我想水平显示我的数据（图像和文本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:45:28.510

我用[这个](http://www.dev-smart.com/archives/34)。

对于像你这样的**水平列表视图。**

在我的情况下，它是完美的**水平列表**视图，带有图像、图像**选择/取消选择**、拖放等等。

如果您发现任何问题，请告诉我。

# checkbox - flashbuilder s:datagrid 复选框不显示

> ID：15238237
> 
> 赞同：0
> 
> 时间：2013-03-06T03:06:21.583
> 
> 标签：checkbox, datagrid

flashbuilder s:datagrid 复选框不显示，我做错了吗？

```
<s:DataGrid x="9.7" y="123.35" height="467" width="999" variableRowHeight="true">

            <s:columns>
                <s:ArrayList>
                    <s:GridColumn headerText="SEL" resizable="false" sortable="false" width="30">
                        <s:itemRenderer>
                                        <fx:Component>
                              <s:GridItemRenderer>
                                <s:CheckBox />
                            </s:GridItemRenderer>
                                         </fx:Component>
                                </s:itemRenderer>
                        </s:GridColumn>
                    <s:GridColumn headerText="受注日" resizable="false" width="80"/>
                    <s:GridColumn headerText="件名" dataField="col1" width="400"/>
                    <s:GridColumn headerText="本体金額" width="100" dataField="col5" resizable="false"/>
                    <s:GridColumn headerText="消費税" width="80" dataField="col6" resizable="false"/>
                    <s:GridColumn headerText="見積金額" width="100" dataField="col7"  resizable="false"/>
                    <s:GridColumn headerText="納品予定日" dataField="col8"/>
                </s:ArrayList>
            </s:columns>
        </s:DataGrid> 
```

它应该显示在网格的左侧，但它是空的。

![在此处输入图像描述](../Images/0f469c0a784012eed7fd5c70782f2f74.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:48:01.100

Even I have come across similar situation until i noticed I have not provided my grid with any data, so as soon as I fed it with some data, it did show the itemrenderer.

# android - android listview setonclicklistener 只选择第一个视图

> ID：15238238
> 
> 赞同：1
> 
> 时间：2013-03-06T03:06:26.897
> 
> 标签：android, android-listview

我有一个带有适配器的自定义 ListView，它允许用户查看对数据库的条目。ListView 的一切工作正常，直到我尝试单击列表中除第一个条目之外的任何条目。单击时，条目应加载到编辑器中。出于某种原因，无论单击哪个条目，列表中的第一个条目都会加载到编辑器中。这是 ListView 的活动代码：

```
public class MainActivity extends Activity {

public static final String KEY_ID = "listviewId";
public static final String KEY_SHORT = "projectShortTextView";
public static final String KEY_FULL = "projectFullTextView";
public static final String KEY_HOURS = "listviewHoursTV";
public static final String KEY_PROID = "projectIdTV";
private SQLiteDatabase db;
private TimesheetDatabaseHelper dbHelp = new TimesheetDatabaseHelper(this);
/** Gets a valid calendar instance for use */
final Calendar c = Calendar.getInstance();
/** Strings for formatting the date's for use */
public String dateViewForm = "EEE MM/dd/yyyy";
public String dateForm = "MM/dd/yyyy";
public String timeForm = "HH:mm";
/** Strings to store formated calendar outputs */
public String date, dateView;
/** Prepares buttons and EditText for use */
public Button minusButton, plusButton, quickAdd;
public EditText dateEditText;
public ListView list;
TimestampAdapter adapter;
SimpleDateFormat formDateView = new SimpleDateFormat(dateViewForm, Locale.US);
 SimpleDateFormat formDate = new SimpleDateFormat(dateForm, Locale.US);
 SimpleDateFormat formTime = new SimpleDateFormat(timeForm, Locale.US);
 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    BugSenseHandler.initAndStartSession(MainActivity.this, "8b04fe90");
    setContentView(R.layout.activity_main);

    try {
        updateCheck();
    } catch (NameNotFoundException e1) {
        e1.printStackTrace();
    } catch (IOException e1) {
        e1.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }

    /** Method to get todays date and display it in the proper places */
    date = initialDates();

    getDailyTimestamps(date);

    /**
     * Implements the Minus Button with OnCLickListener and
     * calls the minusButtonHandler if called */
    minusButton = (Button)findViewById(R.id.minusButton);
    minusButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            try {
                date = minusButtonHandler();
                getDailyTimestamps(date);
            } catch (ParseException e) {
                e.printStackTrace();
            }
        }
    });

    /**
     * Implements the Plus Button with OnCLickListener and
     * calls the plusButtonHandler if called */
    plusButton = (Button)findViewById(R.id.plusButton);
    plusButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            try {
                date = plusButtonHandler();
                getDailyTimestamps(date);
            } catch (ParseException e) {
                e.printStackTrace();
            }
        }
    });

    quickAdd = (Button)findViewById(R.id.quickAddButton);
    quickAdd.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            quickAddHandler(v);
            getDailyTimestamps(date);
        }
    });
}

@SuppressWarnings("deprecation")
private void updateCheck() throws NameNotFoundException, IOException, InterruptedException, ExecutionException {
    Log.d("Checking for updates", "true");
    String urlVersion;
    UpdateCheck check = new UpdateCheck();
    urlVersion = check.execute().get();

    Log.d("urlVerion", urlVersion);

    PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
    String packageVersion = pInfo.versionName;

    Log.d("Package Version", packageVersion);

    if (!urlVersion.equals(packageVersion)) {
        AlertDialog alert = new AlertDialog.Builder(this).create();
        alert.setTitle("Version Check");
        alert.setMessage("You're version is out of date. Please visit " 
                + "www.ubundude.com/p/beta.html to update to the latest version.");

        alert.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            }
    });
        alert.show();
    }
}

@Override 
protected void onResume() {
    super.onResume();
    getDailyTimestamps(date);
}

private void getDailyTimestamps(String date) {
    ArrayList<HashMap<String, String>> stampList = new ArrayList<HashMap<String, String>>();

    /** Open the database table for reading and writing */
    db = dbHelp.getReadableDatabase();

    String getTimestamps = "select ti._id, pr.name, pr.shortcode, ti.hours, ti.project "
            + "from timestamp ti inner join projects pr "
            + "where ti.project = pr._id and ti.date_in = '" + date + "'";

    Cursor cu = db.rawQuery(getTimestamps, null);

    if(cu != null && cu.getCount() > 0){
        cu.moveToFirst();

        do {
            HashMap<String, String> map = new HashMap<String, String>();
            map.put(KEY_ID, Integer.toString(cu.getInt(0)));
            map.put(KEY_SHORT, cu.getString(1));
            map.put(KEY_FULL, cu.getString(2));
            map.put(KEY_HOURS, cu.getString(3));
            map.put(KEY_PROID, Integer.toString(cu.getInt(4)));

            stampList.add(map);

        } while(cu.moveToNext());
    }

    cu.close();
    db.close();

    list = (ListView)findViewById(R.id.timestampListView);

    adapter = new TimestampAdapter(this, stampList);
    list.setAdapter(adapter);

    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Log.d("ListView On Click", "Position: " + position);
            TextView idTV = (TextView)findViewById(R.id.listviewId);
            TextView proIdTV = (TextView)findViewById(R.id.projectIdTV);
            TextView full = (TextView)findViewById(R.id.projectShortTextView);
            String test = full.getText().toString();
            Log.d("Listview", "Project Name: " + test);
            int timeId = Integer.parseInt(idTV.getText().toString());
            Log.d("Listview", "Timestamp ID: " + timeId);
            int proId = Integer.parseInt(proIdTV.getText().toString());
            Log.d("Listview", "Project ID: " + proId);
            Intent intent = new Intent(MainActivity.this, TimestampEditorActivity.class);
            intent.putExtra("TIMESTAMP_ID", timeId);
            intent.putExtra("PROJECT_ID", proId);
            startActivity(intent);
        }
    });
}

private String initialDates() {
    dateView = formDateView.format(c.getTime());
    date = formDate.format(c.getTime());

    /** Sets the text in the dateEditText to the current date */
    dateEditText = (EditText)findViewById(R.id.dateEditText);
    dateEditText.setText(dateView, TextView.BufferType.NORMAL);

    return date;
}

/** Gets the next day and displays to dateEditText 
 * @throws ParseException */
private String plusButtonHandler() throws ParseException {

    c.setTime(formDateView.parse(dateView));
    c.add(Calendar.DAY_OF_MONTH, 1);

    dateView = formDateView.format(c.getTime());
    date = formDate.format(c.getTime());

    dateEditText = (EditText)findViewById(R.id.dateEditText);
    dateEditText.setText(dateView, TextView.BufferType.NORMAL);

    return date;
}

  /** Gets the previous day and displays to dateEditText 
   * @throws ParseException */
private String minusButtonHandler() throws ParseException {
    c.setTime(formDateView.parse(dateView));
    c.add(Calendar.DAY_OF_MONTH, -1);

    dateView = formDateView.format(c.getTime());
    date = formDate.format(c.getTime());

    dateEditText = (EditText)findViewById(R.id.dateEditText);
    dateEditText.setText(dateView, TextView.BufferType.NORMAL);

    return date;
}

/**
 * Intent to move to TimestampEditorActivity
 * 
 *  @param view Gets the current view context to pass with the intent
 */
public void addNewHandler(View view) {
    Intent intent = new Intent(this, TimestampEditorActivity.class);
    startActivity(intent);
 }

/**
 * Get current date and time and place them into Timestamp table as generic entry
 * 
 * @param view
 * @throws SQLException
 */
public void quickAddHandler(View view) throws SQLException {
    String timeIn, timeOut, dateIn, dateOut;
    int project = 1; //Will get from Default project in settings
    timeIn = formTime.format(c.getTime());
    timeOut = timeIn;
    dateIn = formDate.format(c.getTime());
    dateOut = dateIn;
    db = dbHelp.getWritableDatabase();
    String insertSQL = "insert into timestamp (date_in, time_in, date_out, time_out, hours, project) " +
            "values('" + dateIn + "', '" + timeIn + "', '" + dateOut +
            "', '" + timeOut + "', 0, '" + project + "')";
    try {
        db.execSQL(insertSQL);
    } catch(Exception e) {
        Log.d("save Fail", e.getLocalizedMessage(), e.fillInStackTrace());
    }
    db.close();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

这是 ListView 的 xml：

```
 <TextView
        android:id="@+id/projectShortTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/defaultText"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/projectFullTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/projectShortTextView"
        android:text="@string/defaultText"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/listviewId"
        android:visibility="invisible"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/projectShortTextView" 
        android:text="@string/defaultInt" />

     <Button
         android:id="@+id/listviewEditButton"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:layout_toLeftOf="@+id/listviewHoursTV"
         android:background="@drawable/edit"
         android:focusable="false" />

     <TextView
         android:id="@+id/listviewHoursTV"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentRight="true"
         android:layout_centerVertical="true"
         android:text="@string/defaultTime"
         android:textAppearance="?android:attr/textAppearanceMedium" />

     <TextView
         android:id="@+id/projectIdTV"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_above="@+id/projectFullTextView"
         android:layout_toRightOf="@+id/listviewId"
         android:text="@string/defaultInt"
         android:visibility="invisible" />

 </RelativeLayout> 
```

这是适配器： public class TimestampAdapter extends BaseAdapter { private Activity activity; 私有数组列表>数据；私有静态 LayoutInflater inflater = null;

```
public TimestampAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data = d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return data.get(position);
}

public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.listview_timestamp, null);

    TextView projectShort = (TextView)vi.findViewById(R.id.projectShortTextView);
    TextView projectFull = (TextView)vi.findViewById(R.id.projectFullTextView);
    TextView stampId = (TextView)vi.findViewById(R.id.listviewId);
    TextView hoursEdit = (TextView)vi.findViewById(R.id.listviewHoursTV);
    TextView projectId = (TextView)vi.findViewById(R.id.projectIdTV);

    HashMap<String, String> timestamp = new HashMap<String, String>();
    timestamp = data.get(position);

    stampId.setText(timestamp.get(MainActivity.KEY_ID));
    projectShort.setText(timestamp.get(MainActivity.KEY_SHORT));
    projectFull.setText(timestamp.get(MainActivity.KEY_FULL));
    hoursEdit.setText(timestamp.get(MainActivity.KEY_HOURS) + " hrs");
    projectId.setText(timestamp.get(MainActivity.KEY_PROID));

return vi;
}

 } 
```

上面代码中的调试行显示了每行单击的正确位置，但第一行信息的 id 是唯一显示的信息。这与仅将第一行加载到编辑器中是一致的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:12:10.100

您的问题可能在于以下几行：

```
TextView idTV = (TextView)findViewById(R.id.listviewId);
TextView proIdTV = (TextView)findViewById(R.id.projectIdTV);
TextView full = (TextView)findViewById(R.id.projectShortTextView); 
```

您在 的布局中找到这些视图*`Activity`*，**而不是**在 ListView 的行中。如果这些 id 在 ListView 中也重复，请通过以下方式访问整行

```
view.findViewById(R.id.yourId); 
```

如果 StampList 是包含所有这些数据的复杂 Object 的列表，则可以跳过查找 View 并简单地使用适配器或 AdapterView 来访问该对象。

编辑：您正在使用 HashMap，这应该更容易：

```
@Override
public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
  HashMap <String,String> currentMap = stampList.get(position);
  Intent intent = new Intent(MainActivity.this, TimestampEditorActivity.class);
  intent.putExtra("TIMESTAMP_ID", currentMap.get(MainActivity.KEY_ID));
  intent.putExtra("PROJECT_ID", currentMap.get(MainActivity.KEY_PROID));
  startActivity(intent);
} 
```

只要确保声明`stampList`为`final`. 或者，如果您不想指定`stampList`为`final`替换

```
HashMap <String,String> currentMap = stampList.get(position); 
```

和

```
HashMap <String,String> currentMap = (HashMap<String,String>)parent.getItemAtPosition(position); 
```

# java - 如何实现 AlertDialog.Builder 选定项单击事件？

> ID：15238245
> 
> 赞同：1
> 
> 时间：2013-03-06T03:06:58.817
> 
> 标签：java, android, android-alertdialog, android-event

我想实现`AlertDialog.Builder`选定的项目点击事件。以下是我到目前为止所尝试的。我对 Android 很陌生，我不确定如何访问该事件。如何为列表中的每个单独项目实现点击事件？

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;

public class MakeCallAlertDialog {

    public static AlertDialog.Builder getAlertDialog(String strArray[],
            String strTitle, Activity activity) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(activity);
        alertDialogBuilder.setTitle(strTitle);
        alertDialogBuilder.setItems(strArray, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialogInterface, int arg) {
                // TODO Auto-generated method stub
            }
        });

        return alertDialogBuilder;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T03:38:05.067

`OnClickListener`由于您为该方法分配了一个特定的参数，因此`int`参数是[列表中的位置](https://developer.android.com/reference/android/content/DialogInterface.OnClickListener.html)：

> 参数
> 
> *dialog* 收到点击的对话框。
> 
> *which* 被点击的按钮（例如 BUTTON1）**或被**点击的项目的位置

这意味着在您的方法中，您应该能够做到这一点：

```
public static AlertDialog.Builder getAlertDialog(final String strArray[],
        String strTitle, final Activity activity) {

    AlertDialog.Builder alertDialogBuilder =  
            new AlertDialog.Builder(activity);
    alertDialogBuilder.setTitle(strTitle);

    alertDialogBuilder.setItems(strArray,
            new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
           Toast.makeText(activity, strArray [which], Toast.LENGTH_SHORT).show();

           //rest of your implementation
        }
    });
   return alertDialogBuilder;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T04:08:58.527

在 onClick() 事件中使用 switch 语句为每个按钮编写单击方法。

```
 @Override
        public void onClick(DialogInterface dialogInterface, int arg) {
            // TODO Auto-generated method stub
            switch (arg) {
               case 0:
                  //you code for button at 0 index click
                  break;
               case 1:
                  //you code for button at 1 index click
                  break;
               default:
                    break;
            }
        } 
```

这里，arg 表示按下的按钮的索引。您还可以使用 strArray[arg] 访问该按钮

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T06:34:43.077

如果您使用为 strArray 选择的单选项目，请在下面查看我的答案：试试这个代码

```
int selectedItem = 0; 
```

// 这里取 TempSelectOneTypeList = strArray

```
 AlertDialog.Builder alt_bld = new AlertDialog.Builder(
                                    Activity_Form_Data.this);
                            alt_bld.setTitle("Select One");
                            selectedItem = 0;
                            for (int j = 0; j < TempSelectOneTypeList.length; j++) {

                                if (txt_sub_lable2
                                        .getText()
                                        .toString()
                                        .equals(TempSelectOneTypeList[j].toString())) {
                                    selectedItem = j;
                                }
                            }

                            Log.i(TAG, "Selected Item is " + selectedItem);

                            alt_bld.setSingleChoiceItems(
                                    ArraylistSelectOneTypeList.get(selected),
                                    selectedItem,
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(DialogInterface dialog,
                                                int item) {
                                            selectedItem = item;
                                            // you can ocde here for the perticular selected item
                                        }
                                    });
                            alt_bld.setPositiveButton("OK",
                                    new DialogInterface.OnClickListener() {
                                        @Override
                                        public void onClick(DialogInterface dialog,
                                                int which) {

                                            txt_sub_lable2
                                                    .setText(""
                                                            + TempSelectOneTypeList[selectedItem]
                                                                    .toString());
    }
                                    });
                            alt_bld.setNegativeButton("Cancel",
                                    new DialogInterface.OnClickListener() {
                                        @Override
                                        public void onClick(DialogInterface dialog,
                                                int which) {
                                            dialog.dismiss();

                                        }
                                    });

                            AlertDialog alert = alt_bld.create();
                            alert.show(); 
```

希望它能解决你的问题

# ios - 是否可以使用现有的第三方框架（如 metaio 框架）创建静态库

> ID：15238247
> 
> 赞同：-1
> 
> 时间：2013-03-06T03:07:11.117
> 
> 标签：ios, ios5, ios6, xcode4.5, xcode4.6

我在创建静态库时遇到问题，我想使用现有的源代码和现有的第三方框架（如 metaio 框架）创建静态库。但是当我在没有 metaio 框架（第三方框架）的情况下创建静态库时，它工作正常。但是当添加 metaio 框架（第三方框架）到静态库时，它显示了很多错误。有没有可能？这在 Xcode4.5 和 Xcode4.6 中发生了。

**错误如：**

“架构 armv7 的未定义符号：”metaio::SensorsComponentIOS::getSensorComponentImpl()”，引用自：-[Tutorial5ViewController loadContent] in libmetaio.a(Tutorial5ViewController.o)”metaio::CreateMetaioSDKIOS(std::__1::basic_string, std::__1::allocator > const&)”，引用自：“metaio::getDeviceType()”，引用自：-[EAGLView enableAntialiasing] in libmetaio.a(EAGLView.o)

> ::~basic_string()"，引用自：-[MetaioSDKViewController viewDidLoad] in libmetaio.a(MetaioSDKViewController.o) -[Tutorial5ViewController touchesBegan:withEvent:] in libmetaio.a(Tutorial5ViewController.o) ld: symbol(s) not found对于架构 armv7 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）”但我是在 arm7 和 arm7s 等相同架构中创建的，但在不添加 metaio 框架的情况下工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:37:23.320

您很可能链接到项目中“错误的”C++ 标准库。构建所涉及的所有项目/库都必须使用相同的 C++ 标准库。

有关更多详细信息和更正问题，请参阅[此答案](https://stackoverflow.com/questions/12665457/zxing-in-xcode-4-5-and-ios-6/12666175#12666175)。

# python - 在 Python 中数到 10 亿的最快方法

> ID：15238250
> 
> 赞同：0
> 
> 时间：2013-03-06T03:07:16.393
> 
> 标签：python, range, python-3.3

没有很多python /编程经验。我需要测试 1 到 10 亿之间的每个数字，然后将某些数字附加到列表中。目前我正在尝试使用 range( 0 , Billion ) ，但我发现在我的机器上使用 Python 3.3 大约需要 80 秒。有没有更有效的方法来做到这一点？

```
for i in range(0, Billion)
    # if i passes test
    i.append(samplelist) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:13:19.783

不。考虑一下机器时间方面的代码。您的测试和附加功能无法触及，因此我们剩下的只是 for i in range。这是你的基本 for 循环，它是你能得到的最基本的。您可以编写一个while循环并编写另一行来增加 i 自己，但我怀疑这实际上会增加您的执行时间，因为您正在对必须处理的python解释器进行更多调用。

再想一想，如果你能优化你的测试程序......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T03:11:34.857

Usually, if you need to iterate up to 1000000000, there's some better way. For example, you can use some mathematical property to avoid testing every number:

```
samplelist = [x**2 for x in range(int(1000000000**0.5))] # get all perfect squares up to 1000000000 
```

Python's not really that fast for numerical operations. So, iterating to 1000000000 and doing something at every single iteration is going to be slow; there's no way around this except to try a faster interpreter (e.g. PyPy), or write the code in a more performant language like C.

* * *

Alternatively, if you are adding a huge number of elements to a list, then consider using a *generator* instead. This will avoid the overhead of creating a massive list, while still being useful for many things:

```
def gen_numbers(n):
    for i in range(n):
        if <i passes test>:
            yield i

for i in gen_numbers(1000000000):
    print(i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:11:28.073

This should be a little faster, but most of the time is probably spent calling `some_test()`

```
samplelist = [i for i in range(1000000000) if some_test(i)] 
```

# python - 在 Python 中通过 TCP 代理连接发送 SSL 数据

> ID：15238255
> 
> 赞同：1
> 
> 时间：2013-03-06T03:07:40.753
> 
> 标签：python, sockets, ssl, proxy

我面临以下情况：我被迫使用 HTTP 代理连接到 HTTPS 服务器。出于多种原因，我需要访问原始数据（在加密之前），因此我使用的是套接字库而不是 HTTP 特定库之一。因此，我首先将 TCP 套接字连接到 HTTP 代理并发出连接命令。

此时，HTTP 代理接受连接并似乎将所有进一步的数据转发到目标服务器。但是，如果我现在尝试切换到 SSL，我会收到

> 错误：140770FC：SSL 例程：SSL23_GET_SERVER_HELLO：未知协议

指示套接字尝试与 HTTP 代理而不是与 HTTPS 目标握手。

这是我到目前为止的代码：

```
import socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  
s.connect(('proxy',9502))  
s.send("""CONNECT en.wikipedia.org:443 HTTP/1.1
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:15.0) Gecko/20100101 Firefox/15.0.1  
Proxy-Connection: keep-alive  
Host: en.wikipedia.org 

""")  

print s.recv(1000)  

ssl = socket.ssl(s, None, None)  
ssl.connect(("en.wikipedia.org",443)) 
```

连接到 HTTP 代理后，打开到目标服务器的 SSL 套接字的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:46:40.597

（请注意，一般来说，使用现有的 HTTPS 库（例如 PyCurl）会更容易，而不是自己实现它。）

首先，不要调用你的变量`ssl`。该名称已被`ssl`模块使用，因此您不想隐藏它。

其次，不要使用`connect`第二次。你已经连接了，你需要的是包装套接字。由于 Python 默认不进行任何证书验证，因此您还需要验证远程证书并验证主机名。

以下是涉及的步骤：

*   建立您的纯文本连接并`CONNECT`像前几行一样使用。
*   阅读您收到的 HTTP 响应，并确保您收到 200 状态代码。（您需要逐行阅读标题）。
*   用于`ssl_s = ssl.wrap_socket(s, cert_reqs=ssl.CERT_REQUIRED, ssl_version=ssl.PROTOCOL_TLS1, ca_certs='/path/to/cabundle.pem')`包裹插座。然后，验证主机名。值得一读[这个答案](https://stackoverflow.com/a/3551700/372643)：`connect`包装套接字后的方法及其作用。
*   然后，像使用`ssl_s`普通套接字一样使用它。不要再打电话`connect`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-18T21:29:49.543

适用于 python 3
<proxy> 是 ip 或域名
<port> 443 或 80 或任何您的代理正在监听
<endpoint> 您要通过代理连接的最终服务器
<cn> 是一个可选的 sni 字段您的最终服务器可能期待

```
import socket,ssl

def getcert_sni_proxy(cn,endpoint,PROXY_ADDR=("<proxy>", <port>)):
    #prepare the connect phrase
    CONNECT = "CONNECT %s:%s HTTP/1.0\r\nConnection: close\r\n\r\n" % (endpoint, 443)

    #connect to the actual proxy
    conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    conn.connect(PROXY_ADDR)
    conn.send(str.encode(CONNECT))
    conn.recv(4096)

    #set the cipher for the ssl layer
    context = ssl.SSLContext(ssl.PROTOCOL_SSLv23)

    #connect to the final endpoint via the proxy, sending an optional servername information [cn here]
    sock = context.wrap_socket(conn, server_hostname=cn)
    #retreive certificate from the server
    certificate = ssl.DER_cert_to_PEM_cert(sock.getpeercert(True))
    return certificate 
```

# javascript - BackboneJS：如何在单个视图中分配多个模型

> ID：15238260
> 
> 赞同：1
> 
> 时间：2013-03-06T03:08:30.757
> 
> 标签：javascript, backbone.js, backbone-views, backbone.js-collections, backbone-model

如何在单个视图中调用多个模型

通常的情况是您创建一个主干模型

```
var myModel = Backbone.Model.extend({ url:"api/authentication"}); 
```

然后将其分配给一个视图，使其成为某个视图的默认模型

```
 var LoginView = Backbone.View.extend({
        model: new myModel(),
        initialize: function(){
            _.bindAll(this, 'render', 'render_thread_summary', 'on_submit', 'on_thread_created', 'on_error');
            this.model.bind('reset', this.render); 
            this.model.bind('change', this.render); 
            this.model.bind('add', this.render_thread_summary); 
        },
        ...
    }); 
```

但是我在一个视图中有很多方法可以调用不同的模型。目前我只是在事件方法中创建模型的一个实例。

我想的另一个解决方案是这样的

```
initialize: function(){
   _.bindAll(this, 'render', 'render_thread_summary', 'on_submit', 'on_thread_created', 'on_error');
   new.model1().bind('reset', this.render); 
   new.model2().bind('change', this.render); 
   new.model3().bind('add', this.render_thread_summary); 
}, 
```

但这些是好的做法吗？还有什么其他方法可以做到这一点。谢谢。

**更新** 作为对彼得的回应，这是我的实际代码

```
var userRegModel                = Backbone.Model.extend({url: fn_helper.restDomain()+'user/reg'});
var userResendActivationModel   = Backbone.Model.extend({url: fn_helper.restDomain()+'user/token/activation/new'});
var userResetPassModel1         = Backbone.Model.extend({url: fn_helper.restDomain()+'user/pwdreset/token/new'});
var userResetPassModel2         = Backbone.Model.extend({url: fn_helper.restDomain()+'user/pwdreset/change'});
var userLoginModel              = Backbone.Model.extend({url: fn_helper.restDomain()+'user/login'});

_view:  Backbone.View.extend({
                el:             'div#main-container',
                initialize:     function(){},
                events: {
                    'click #user-signup':            'signupUserFn', //userRegModel 
                    'click a#activation-resend':     'resendActivationFn',//userResendActivationModel
                    'click #reset-password-submit1': 'execResetPasswordFn', //userResetPassModel1
                    'click #reset-password-submit2': 'execResetPasswordFn', //userResetPassModel2 
```

上面声明的每个模型对应于事件中声明的不同方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T03:22:31.390

*   通常模型实例应该在方法的`options`参数中传递给视图`initialize`。

通常，模型表示当前或最终将存储在数据库中某处的数据。现在，有时您只想创建一个模型来管理短暂的浏览器状态，这很好，但常见的情况是大多数读取/编辑/删除视图不会创建模型，除非这是它们的主要目的，例如“发布新评论”形式。因此，通常如果您的视图必须显示一些模型，允许它们可能被更新和保存，它们应该在函数的`options`参数中进入视图`initialize`。

但是，如果您的视图确实需要这么多模型，而您的系统中没有其他东西关心它们，那么只需在期间创建它们`initialize`并将它们直接存储为`this`（您的视图实例）上的属性，然后离开。

如果您发布更完整的代码示例，我们可以给出具体的建议，但看起来如果您有一个`LoginView`并且您需要多个模型，那么您可能会在设计方面陷入困境。

**部分双人**

好的，所以看起来您认为每个 API 端点都需要一个模型。Just implement those as methods on a single model class that use `Backbone.sync`with the appropriate `url`option.

```
var Model = Backbone.Model.extend({
    resendActivation: function () {
        return Backbone.sync.call('update', this, {url: fn_helper.restDomain()+ 'user/token/activation/new'});
    }
}); 
```

您可能需要手动触发一些事件，我不确定您的 API 返回什么，但从根本上说，这些都是处理单个用户记录并且可以由单个模型处理。

杂项不相关的提示：

*   `_.bindAll(this);`//不要费心列出方法
*   `this.model.on('reset change', this.render);`//一次绑定多个事件
*   JavaScript 按绝大多数约定使用 camelCase 而不是 lower_with_underscores

# ios - 了解 iOS 中的 Provisioning 配置文件和证书

> ID：15238261
> 
> 赞同：29
> 
> 时间：2013-03-06T03:08:43.957
> 
> 标签：ios, ios5, ios6

我对配置文件、证书的理解是否正确（在开发期间）？

1.  应用程序在设备上安装时使用来自 xcode 的开发人员证书进行签名？证书应该存在于配置文件中（存储在 iPad/iPhone 中），安装设备的 deviceid 也应该存在于配置文件中。
2.  因此，当您在设备未连接到开发者 mac 时单击应用程序时，应用程序的签名证书应与配置文件中的一个（存在于设备上）匹配，并且设备 ID 也应与配置文件中的一个匹配，仅然后应用程序将运行。
3.  当设备连接到运行 xcode 的 mac 并且您想要调试时，存储在钥匙串中的公钥+私钥开始发挥作用，xcode 尝试使用证书解锁存储在钥匙串中的公钥+私钥，从而识别mac，并且还执行上面的项目符号，如果也是如此，那么您可以成功调试

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-11-25T03:54:46.167

首先，在 Xcode 中选择配置文件具有误导性；在 Xcode 中构建实际上与配置文件无关！实际发生的是 Xcode 只是将配置文件中的公钥证书与您的钥匙串中的一个匹配，然后使用私钥对可执行文件进行签名。那是沼泽标准的 Mach-O 可执行签名。这也是他们在 Xcode 5 中将其更改为更清晰的原因。这也是配置文件上的错误（未找到签名身份）的来源 - 这意味着 Xcode 找不到与配置文件中的任何公钥对应的私钥。

你的个人开发者证书是标准的 PKI 东西；您的 Mac 以 Apple 不知道您的私钥的方式向 Apple 发送证书请求（类似于 SSL 证书请求）。Apple 生成证书，钥匙串将其与原始请求相匹配，为您提供证书的公钥和私钥。为单个开发人员创建配置文件时，会列出该开发人员的公钥。创建团队配置文件时，将包含所有选定团队成员的公钥。这允许团队成员签署可执行文件，但签名者的姓名将是团队名称而不是个人。

当 iOS 启动任何可执行文件时，它首先检查签名。如果签名由 Apple App Store 签名，则它会运行。

如果没有，它会检查已安装的配置文件。配置文件包括： 1\. 开发者证书列表 2\. 应用程序 ID 3\. 授权（例如 iCloud、Game Center 等） 4\. 设备 UDID 列表 5\. 整个事情由 Apple 打包和签名。

检查配置文件以确保它是由 Apple 的密钥（使用 Apple 的公钥）签名的。然后验证当前设备的 UDID 是否在列表中。它还验证应用程序 ID 是否匹配（尽管允许使用通配符）。然后它根据有效的开发人员证书公钥列表检查 Mach-O 签名。如果其中任何一个匹配，则可执行文件运行并被授予列出的权利。如果没有，则被阻止。

我强烈建议在文本编辑器中打开一个 .mobileprovision 文件；你会学到很多东西！

# java - Java Hibernate getting List from certain index or offset.

> ID：15238266
> 
> 赞同：0
> 
> 时间：2013-03-06T03:09:16.920
> 
> 标签：java, hibernate, list, orm, paging

Let's say I have a list of fruits(and let's assume these fruits are in the database)

```
 myList.add('Apple');

    myList.add('Mango');

    myList.add('Guava');

    myList.add('Tomato');

    myList.add('Dragon Fruit');

    myList.add('Orange');
   //More Fruits here 
```

and let's say in my domain or data access object I have this

```
 public List<String> listOfFruits(){
        return myList;
    } 
```

Now let's assume that I have 1000 fruits and I called `listOfFruits` of course it will load the whole list of fruits, and assuming that we have a thousand records of fruits therefore it will load and query of those fruits and it will /give performance impact,

now my question how can add a limit or offset in an arraylist when getting those fruits? I am currently making a pagination for this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:42:50.060

在您的代码中，您手动将水果添加到列表中，这些记录已经在内存中，因此在获取这些水果时添加限制没有多大意义。

但是如果你使用 Hibernate 从数据库中检索记录，你可以这样做：

```
Query q = session.createQuery("FROM table");
q.setFirstResult(firstResult);
q.setMaxResults(maxResults); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:33:00.287

`limit 0, 10`如果您使用 hql 查询获取以 0 开头的前 10 条记录，只需添加到 hql。
或者使用方法`setMaxResults`和`setFirstResult`on `Query`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:52:42.487

如果有人想从表中部分获取记录，则添加限制或设置开始和最大结果将解决问题，但是如果水果列表是某些对象（如 currentStock）的一部分，并且我们想部分加载此列表，那么这些解决方案将如何工作.

# php - recover database data using GET variable

> ID：15238271
> 
> 赞同：-2
> 
> 时间：2013-03-06T03:09:59.853
> 
> 标签：php, get

How do I recover a database row using a GET variable send from the previous page?

I have tried this:

```
 $username = $_GET["username"];

        $result = mysqli_query($con,"SELECT * FROM users
        WHERE username=$username"); 
```

but it gives me the error

```
Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in /homepages/12/d441172468/htdocs/cmd/play/index.php on line 33 
```

Please help! Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:12:10.237

Whenever you get that error, you should immeditely add this debugging code:

```
var_dump(mysqli_error()); 
```

With that out of the way, here it's a fairly simple case of neglecting to put quotes around your variable. Also you fail to escape it so you're inviting Bobby Tables...

Try this:

```
$result = mysqli_query($con,
    "SELECT * FROM users WHERE username='"
    .mysqli_real_escape_string($_GET['username'])."'"); 
```

# python - 计算列表 PYTHON 中单词的重复次数

> ID：15238276
> 
> 赞同：0
> 
> 时间：2013-03-06T03:10:28.540
> 
> 标签：python, python-2.7

我有一个像这样的代码：

```
s = "hello this is hello this is baby baby baby baby hello"
slist = s.split()
finallist = []
for word in slist:
    if len(word) >= 4:
          final = final + [word] 
```

基本上上面的这段代码用于获取列表并仅放置一个包含超过 4 个字符的单词列表。

从这个列表中，我希望能够计算相同单词出现的次数并将其保存到新列表中。所以它就像 [3,2,4] 3 是你好的时间，2 是这个时间，4 是婴儿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:16:08.810

```
from collections import Counter
import re

reg = re.compile('\S{4,}')

s = "hello this is hello this is baby baby baby baby hello"
c = Counter(ma.group() for ma in reg.finditer(s))
print c 
```

结果

```
Counter({'baby': 4, 'hello': 3, 'this': 2}) 
```

还：

```
from collections import defaultdict
d = defaultdict(int)

s = "hello this is hello this is baby baby baby baby hello"

for w in s.split():
    if len(w)>=4:
        d[w] += 1

print d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T03:20:09.277

`collections.Counter`显然是您的朋友（除非您需要按特定排序顺序输出）。将它与*生成器理解*相结合以生成所有长度为 4 的单词，您就可以了。

```
from collections import Counter

Counter(w for w in s.split() if len(w) >= 4) 
```

如果您需要元素按首次出现的顺序排列，请使用有序字典：

```
from collections import OrderedDict

wc = OrderedDict()
for w in s.split():
    if len(w) >= 4:
        wc[w] = wc.get(w, 0) + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T03:21:26.437

您所要做的就是使用`count`slist 中的方法。

我认为您可以使用 dict 更好地控制

```
s = "hello this is hello this is baby baby baby baby hello"
slist = s.split()
finaldict = {}
for word in slist:
    if len(word) >= 4 and not finaldict.get(word):
          finaldict[word] = slist.count(word) 
```

现在，如果您想要值列表，只需执行以下操作：`finallist = finaldict.values()`

# database - 如何在 F# 中通过 IDataReader 使用字符串索引？

> ID：15238280
> 
> 赞同：0
> 
> 时间：2013-03-06T03:10:40.257
> 
> 标签：database, sqlite, f#, data-access, idatareader

我是 F# 的新手，并尝试先深入了解，然后再进行更正式的介绍。我有以下代码：

```
type Person = 
    {
        Id: int
        Name: string
    }

let GetPeople() =
    //seq {

    use conn = new SQLiteConnection(connectionString)
    use cmd = new SQLiteCommand(sql, conn)

    cmd.CommandType <- CommandType.Text

    conn.Open()
    use reader = cmd.ExecuteReader()
    let mutable x = {Id = 1; Name = "Mary"; }

    while reader.Read() do
        let y = 0
        // breakpoint here
        x <- {
        Id = unbox<int>(reader.["id"])
        Name = unbox<string>(reader.["name"])
        }
    x

    //}

let y = GetPeople() 
```

我打算用 yield 语句替换循环体并清理代码。但现在我只是试图通过调试代码并查看数据读取器来确保数据访问正常工作。目前我正在获得一个`System.InvalidCastException`. 当我在上面注释行指示的点放置一个断点，然后在即时窗口中键入时，`reader["name"]`我从数据库中获得了一个有效值，所以我知道它正在连接到数据库 ok。但是，如果我尝试将`reader["name"]`（而不是`reader.["name"]`）放入源文件中，我会收到“此值不是函数并且无法应用”消息。

为什么我可以`reader["name"]`在即时窗口中使用，但不能在我的 fsharp 代码中使用？如何在阅读器中使用[字符串索引](http://msdn.microsoft.com/en-us/library/1a8yx17k%28v=vs.100%29.aspx)？

**更新**

按照 Jack P. 的建议，我将代码拆分为单独的行，现在我看到了错误发生的位置：

```
 let id = reader.["id"]
    let id_unboxed = unbox id // <--- error on this line 
```

`id`具有`object {long}`根据调试器的类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T03:37:51.367

Jack 已经回答了有关在 F# 和即时窗口或手表中进行索引的不同语法的问题，因此我将跳过该问题。

`System.InvalidCastException`以我的经验，从数据库读取数据时获取的最常见原因是返回的值`reader.["xyz"]`实际上是`DbNull.Value`而不是实际的字符串或整数。转换`DbNull.Value`为整数或字符串将失败（因为它是一个特殊值），因此如果您使用可空列，则需要明确检查：

```
let name = reader.["name"]
let name_unboxed : string = 
  if name = DbNull.Value then null else unbox name 
```

`?`您可以通过定义允许您编写`reader?name`以执行查找的运算符来使代码更好。如果您正在处理空值，您还可以使用`reader?name defaultValue`以下定义：

```
let (?) (reader:IDataReader) (name:string) (def:'R) : 'R =
  let v = reader.[name]
  if Object.Equals(v, DBNull.Value) then def
  else unbox v 
```

然后代码变为：

```
let name = reader?name null
let id = reader?id -1 
```

这也应该简化调试，因为您可以进入实现`?`并查看发生了什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T03:26:15.777

您可以`reader["name"]`在即时窗口中使用，因为即时窗口使用 C# 语法，而不是 F# 语法。

需要注意的一件事：由于 F# 比 C# 简洁得多，因此在一行中可能会发生很多事情。换句话说，在行上设置断点可能无法帮助您缩小问题范围。在这些情况下，我通常将表达式“扩展”为多行上的多个 let 绑定；这样做可以更轻松地单步执行表达式并找到问题的原因（此时，您可以对原始单行进行更改）。

如果您将项目访问权限拉到`unbox`它们自己的 let-bindings 中会发生什么？例如：

```
while reader.Read() do
    let y = 0
    // breakpoint here
    let id = reader.["id"]
    let id_unboxed : int = unbox id
    let name = reader.["name"]
    let name_unboxed : string = unbox name
    x <- { Id = id_unboxed; Name = name_unboxed; }
x 
```

# android - Cannot display Google Maps

> ID：15238283
> 
> 赞同：0
> 
> 时间：2013-03-06T03:10:55.010
> 
> 标签：android, google-maps

I am trying to create my first Google Maps in Android using an emulator in Eclipse with no success. All I get for the map is a gray tiled screen that I can zoom but there is no map there. Below is my `AndroidManifest` file:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.herb2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="17" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="com.example.herb2.Herb2Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="my key is not shown here" />

</manifest> 
```

Below is my layout file:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <TextView
        android:id="@+id/latitude_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Latitude: " />

    <TextView
        android:id="@+id/longitude_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Longitude: " />

    <com.google.android.maps.MapView
        android:id="@+id/mapvw"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:apiKey="my key is not shown here"
        android:clickable="true"
        android:enabled="true" />

</LinearLayout> 
```

Finally below is my java source:

```
public class Herb2Activity extends MapActivity {

    private TextView latitudeView;
    private TextView longitudeView;
    private LocationManager locationManager;
    private MapController mapController;
    private MapView mapView;
    private GeoPoint point;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_herb2);
        latitudeView = (TextView) findViewById(R.id.latitude_view);
        longitudeView = (TextView) findViewById(R.id.longitude_view);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        mapView = (MapView) findViewById(R.id.mapvw);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(true);
        mapController = mapView.getController();
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                3600, 1000, new LocationListener() {

                    public void onProviderDisabled(String provider) {
                    }

                    public void onProviderEnabled(String provider) {
                    }

                    public void onStatusChanged(String provider, int status,
                            Bundle extras) {
                    }

                    public void onLocationChanged(Location loc) {
                        if (loc != null) {
                            int lt = (int) (loc.getLatitude());
                            int lg = (int) (loc.getLongitude());
                            latitudeView.setText("Latitude is: "
                                    + String.valueOf(lt));
                            longitudeView.setText("Longitude is: "
                                    + String.valueOf(lg));
                            int latit = (int) (loc.getLatitude() * 1E6);
                            int longit = (int) (loc.getLongitude() * 1E6);
                            point = new GeoPoint(latit, longit);
                            mapController.animateTo(point);
                            mapController.setZoom(15);
                        }
                    }
                });
    }

    @Override
    protected boolean isRouteDisplayed() {
        return true;
    }

    @Override
    protected boolean isLocationDisplayed() {
        return false;
    }
} 
```

I am suspecting it may have something to do with my API key which I generated from Google. I provided the SHA1 certificate fingerprints to generate my key. I added at the end of the key my package name which is `com.example.herb2` as shown above. I also made sure I was using a Google API device as my emulator. I assume the MD5 fingerprint is used for production. I will appreciate any help on why my map shows nothing but gray.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:06:47.140

您是否查看[过 Android 中的 Google 地图签名的 api 密钥错误](https://stackoverflow.com/questions/7296467/google-map-signed-api-key-errors-in-android/8989312#8989312)？

很可能是您使用的是签名密钥而不是调试密钥。

# php - 切换到 SSL 后无法登录到我的 wp-admin

> ID：15238288
> 
> 赞同：10
> 
> 时间：2013-03-06T03:11:02.123
> 
> 标签：php, wordpress, ssl

我最近为我的 wordpress 站点（http 到 https）安装了 SSL 证书，现在我无法访问 Wordpress Admin。它刷新页面，我没有登录。

我忘记在我的 wordpress 文件中更改某些内容了吗？

我检查了代码，登录表单指向我的旧站点（http 站点），当我查看文件中的代码时，表单操作设置为 site_url()，我似乎找不到它的定义位置.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-09-12T04:19:29.697

我在 NearlyFreeSpeech.net 上的网站也遇到了完全相同的问题，而且解决方案并不像修复网站 URL 那样简单。那没什么区别。

我的案例中的根本问题和解决方案在下面复制的帖子中进行了解释。请注意，在我的系统上，SSL 错误产生了两个问题，一个在 Stack Overflow 上描述（wp-login 刷新而不登录）和 WP 加载样式表失败，这是下面引用的论坛帖子中实际解决的问题. 帖子中的解决方案解决*了这两个*问题。

> 您所描述的听起来像是浏览器拒绝加载样式表，这通常发生在首次创建启用 HTTPS 的 WordPress 站点或将 SSL/TLS 添加到现有 WP 站点时。
> 
> 对于 NFSN 使用的“反向代理”，WordPress 并不是很聪明，用户点击外部 Web 服务器，然后与 WordPress 实际所在的内部应用程序服务器通信。
> 
> 如果您认为您有一个启用 SSL 的站点，尤其是如果它是一个新站点，那么这可能是您的问题。您需要编辑 wp-config.php 文件以添加以下内容：
> 
> `if ($_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https') $_SERVER['HTTPS']='on';`
> 
> 就在“就是这样，停止编辑！快乐的博客！”的上方。线。
> 
> 相反，如果您认为您的站点上没有使用 SSL，那么这将无济于事。在 NFSN 站点控制面板上检查您的站点的别名。如果您看到挂锁，则说明您已在 NFSN 中设置并需要上面的代码。
> 
> WordPress 的 SSL 实现有点糟糕。它不仅不能在像我们这样的环境下识别 SSL - 如果所有内容都没有按照正确的顺序更改，它还容易重定向循环。如果上面的代码导致站点中断——你不断收到来自浏览器的关于重定向循环的抱怨——然后删除代码并再次询问。我会看看我是否能找到关于如何进行初始 SSL 设置的笔记。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T03:18:09.897

您需要在 wp-admin->Settings->General 中更改站点 url。除了现在你需要通过 phpMyAdmin 进入并在`wp_options`表中手动执行，因为你被锁定了。

您会根据 http/https 获得不同的 cookie，因此您将获得 https cookie，然后由于您的 Wordpress 设置说明站点所在的 url 而被重定向到没有 cookie 的 http。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-06T03:20:57.330

可以在 wp-config.php 文件中手动设置站点 URL。

将这两行添加到您的 wp-config.php，其中“example.com”是您网站的正确位置。

```
define('WP_HOME','https://example.com');
define('WP_SITEURL','https://example.com'); 
```

更多请参考[这里](http://codex.wordpress.org/Changing_The_Site_URL)

或检查表`wp_options`列`option_name = siteurl`检查`option_value`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-30T08:06:23.877

我首先使用了这个：

我有

```
if (
    isset($_SERVER["HTTP_X_FORWARDED_PROTO"]) && 
    $_SERVER["HTTP_X_FORWARDED_PROTO"] == "https"
) {
    $_SERVER["HTTPS"] = "on";
} 
```

仍然无法修复，什么也没发生。

然后我用

```
define('WP_HOME','https://example.com');
define('WP_SITEURL','https://example.com'); 
```

我能够使用 https 连接到 wp。

现在我只有轻微的冲突问题（我的页面上混合了 https/http 内容），但大多数事情都有效。

谢谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-04T11:54:09.540

我去了 cpanel>filemanager 并在我添加的 php 标签中编辑文件 wpconfig.php if (strpos($_SERVER['HTTP_X_FORWARDED_PROTO'], 'https') !== false) $_SERVER['HTTPS']='on ';

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-04T12:39:07.523

我的 wordpress 实例也有类似的问题。使用 ssh 我进入目录结构并将 te wordpress 根文件夹权限更改为 755，将 .htaccess 文件更改为 644。

> chmod 755 wordpress/

之后，我再次云访问我的管理面板。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-09-19T15:28:32.843

转到 phpadmin 并找到 wp-options。将 siteurl 和 home 更改为 http。这是工作 ：）

# javascript - Refresh JSON store Every 60 Sec - EXT JS 4

> ID：15238289
> 
> 赞同：3
> 
> 时间：2013-03-06T03:11:02.507
> 
> 标签：javascript, ajax, json, extjs, extjs4

```
 var MarkerStore = Ext.create('Ext.data.JsonStore', {
            model: 'GoogleMarkerModel',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url: 'get-googlemarker.php',
                baseParams: {  //here you can define params you want to be sent on each request from this store
                            mainid: 'value1'
                            },
                reader: {
                    type: 'json',
                    idProperty:'MainID',
                }

            }
        });

setTimeout(MarkerStore, 60000); 
```

is this correct?because i still can't get any new data every 60 sec

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:35:10.593

我只是使用javascript`setInterval`函数。[Sencha 在他们的livegrid](http://docs.sencha.com/ext-js/4-1/#!/example/charts/LiveAnimated.html)中自己使用它示例

例如：

```
// reload the stores once and then repeatedly every 60 seconds
MarkerStore.load();
setInterval(function() {
    MarkerStore.load();
}, 60000); 
```

要获得更完整的答案，`setTimeout`您使用的 javascript 函数仅在指定的毫秒数后执行一次代码。`setInterval`是你想要重复执行一个*函数*。

另请注意，`setInterval`and的第一个参数`setTimeout`是一个 javascript 函数。在上面的代码片段中，您将 store 对象本身作为第一个参数传递，这根本不会导致它被调用。[此页面](http://www.w3schools.com/js/js_timing.asp)有更多数据。

# html - 控制ajax调用返回的表放在网站的什么位置？

> ID：15238291
> 
> 赞同：0
> 
> 时间：2013-03-06T03:11:12.100
> 
> 标签：html, ajax

我有我的 Ajax 调用：

```
$(function(){
    $("#refresh1").click(function(){
        $.ajax({
            type:"POST",
            url:"TableRefresh.php",

            success:function(response){
                $("#results").html(response);
            }
        });
    });                      
}) 
```

`TableRefresh.php`只需使用 printf() 语句创建并打印一个 HTML 表，但是当它打印回页面时，它会将其粘贴在最顶部。我怎样才能控制它放在哪里？（底端）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:14:04.870

`TableRefresh.php`不打印任何东西。

在函数中，如果您想要页面中其他`success`位置的结果，则将结果添加到元素中，只需更改选择器即可。`#results`

# three.js - 相机运动轨迹三.js

> ID：15238292
> 
> 赞同：1
> 
> 时间：2013-03-06T03:11:14.330
> 
> 标签：three.js, camera, position

我认为这张图片更好地解释了我的问题：http: [//i48.tinypic.com/wvrbcy.png](http://i48.tinypic.com/wvrbcy.png)

在这张照片上，相机沿椭圆移动。我对这条轨迹的代码是：

```
var r = 0;
function render() {
    cameraMain.rotation.y+=0.003;
    cameraMain.position.x = Math.sin(r*0.1)*500;
    cameraMain.position.z = Math.cos(r*0.1)*1000;
    r+=Math.PI/180*2;
} 
```

但这不是我需要的。我希望我的相机以一种星形轨迹移动，这样它就会有一种“放大”/“缩小”的效果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:56:26.570

您想在 Google 上搜索“astroid”、“三角曲线”或“超椭圆”的“参数方程”。

以下是一些链接，您可以在其中获得您正在寻找的各种参数方程：

星体：[http ://en.wikipedia.org/wiki/Astroid](http://en.wikipedia.org/wiki/Astroid)

三角肌曲线：[http ://en.wikipedia.org/wiki/Deltoid_curve](http://en.wikipedia.org/wiki/Deltoid_curve)

# java - Nexus 7 - different size of image set in code vs set in XML

> ID：15238295
> 
> 赞同：0
> 
> 时间：2013-03-06T03:11:33.297
> 
> 标签：java, android, nexus-7

I have simple ImageView in XML:

```
<ImageView
    android:id="@+id/imgItemFavorites"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/foo"
    android:src="@drawable/vote_favorite" /> 
```

Now, if I reference that view in code and do:

```
ImageView img = (ImageView) llGenericList.findViewById(R.id.imgItemFavorites);
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.vote_favorite, null);
img.setImageBitmap(bitmap); 
```

My ImageView ends up being smaller since loaded image is smaller. I presume this has something to do with autoscaling that's done because of tvdpi of Nexus 7, but can anyone give me idea how I can fix this in a robus way that won't screw up things on other devices?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:39:22.223

在创建应将自身缩放到“原始”分辨率的图像时，需要做一些事情。

首先假设您有一个 200x100 像素的 PNG 文件。将此作为您的“基线”。

使用 android:layout_width="200dp" 和 android:layout_height="100dp" 创建你的 imageview。

然后，您需要为每个“类别”的设备提供 4 个版本的位图，并在您提供的资源中缩放位图：

*   ldpi：150px x 75px（乘以 mdpi 0.75x）
*   mdpi：200 像素 x 100 像素
*   hdpi：300px x 150px（乘以 mdpi 1.5x）
*   xhdpi：400px x 200px（乘以 hdpi 2.0x）

缩放时，Android 会从您的资源中使用正确的 png 大小。重要的是指定布局中的基线大小。

# jquery - jQuery窗口调整大小麻烦

> ID：15238301
> 
> 赞同：0
> 
> 时间：2013-03-06T03:12:09.377
> 
> 标签：jquery, resize, window

以下代码应仅在 768 像素以上的屏幕尺寸上触发一次（在加载和调整窗口大小时）：

```
$('.content').css('margin', parseInt($('.banner').css('height')) + parseInt($('.content').css('margin'))); 
```

我根本不希望它在 768px 以下的尺寸上触发。这不起作用，因为它在调整大小时多次触发并且不会将其删除到 768px 以下：

```
$(function() {
    $(window).resize(function() {
        if($(this).width() >= 768) {
            $('.content').css('margin', parseInt($('.banner').css('height')) + parseInt($('.content').css('margin')));
        }
    }); 
}); 
```

[代码笔： http](http://codepen.io/anon/pen/zgxir) ://codepen.io/anon/pen/zgxir

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:24:13.927

您可能正在寻找的是这个

```
$(function() {
    var flag = false;
    $(window).resize(function() {
        console.log($(window).width())
        var width = $(window).width();
        if (!flag && width >= 768) {
            flag = true;
            console.log('set')
            $('.content').css('margin', parseInt($('.banner').css('height')) + parseInt($('.content').css('margin')));
        } else if (width < 768) {
            flag = false;
        }
    });

}); 
```

演示：[这里](http://codepen.io/arunpjohny/pen/tyKoc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:26:16.157

如果只需要触发一次代码为什么不只是：

```
$(function() {    
  if ( $(window).width() >= 768 ) {
    //yourcode here
    $('.content').css('margin', parseInt($('.banner').css('height')) + parseInt($('.content').css('margin')));
  }
}); 
```

编辑 - 如果你想动态改变窗口大小，你可以这样做：

```
$(function() {
  var 
  bh = $('.banner').css('height'),        
  bm = $('.content').css('margin');
  $(window).resize(function() {
    if($(window).width() >= 768) 
    {
      $('.content').css('margin', bh+bm);
    }
    else 
    {
      $('.content').attr('style','');
    }
  });
}); 
```

将变量放在窗口调整大小事件之外很重要，否则当窗口改变大小时它们将永远递增。我使用 else 语句来清除 div 的样式属性，以便将样式返回到原始状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:30:11.360

问题不在于javascript，而在于（.content）div的css属性。因为它或它的父级都没有宽度值，所以无论屏幕的宽度如何，它都会在调整大小时扩展。屏幕宽度 < 768 时不会触发调整大小。

但是您可以使用 css 设置最小宽度：

```
.content{
    min-width: 768px;
} 
```

# objective-c - 在接触 Cocoa 之前学习 Cocoa？

> ID：15238309
> 
> 赞同：3
> 
> 时间：2013-03-06T03:12:52.323
> 
> 标签：objective-c, cocoa, touch

目前，我已经完成了 Lynda.com Objective C 的基本培训的 3/4，并且到目前为止我真的很享受它。我的目标和很多程序员一样，就是利用这些技能来制作一个 ios 游戏。目前 Lynda.com 托管的唯一其他教程是 Mac osx 开发的 Cocoa 基本培训视频。我真的很享受教学风格和 Lynda.com 视频的制作，我在想。

在 Cocoa touch 之前学习 Cocoa 会有很大帮助吗？还是只专注于我的主要目标并学习可可触感会更有益。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:34:23.343

> 在 Cocoa touch 之前学习 Cocoa 会有很大帮助吗？还是只专注于我的主要目标并学习可可触感会更有益。

对于已经了解 Objective-C 和 Cocoa 的人来说，学习 Cocoa Touch 非常容易。与首先学习 Cocoa Touch 相比，我不确定仅仅为了学习 Cocoa Touch 而学习 Cocoa 会给你带来什么显着的优势，但你获得的经验肯定会与学习 Cocoa Touch 相关。尤其：

*   您同时使用 Objective-C，因此您获得的任何语言经验都将直接转移。
*   在这两种情况下，Foundation 框架完全相同。
*   Cocoa 和 Cocoa Touch 中使用的模式是相同的。例如，MVC、视图层次结构、响应者链、委托、KVO 和 KVC 以及通知在 Cocoa 和 Cocoa Touch 中都以相同的方式工作。
*   许多其他设施，如 Core Data、OpenGL、网络设施等，在两个平台上要么相同，要么非常相似。

框架的主要差异是由平台的实际差异驱动的。例如，与台式机相比，iOS 设备更多地依赖于触摸事件，而不是命令和击键，这种差异反映在框架中。

If you're enjoying yourself, go ahead and do the Cocoa course. It won't hurt you, you'll have fun, you'll learn quite a bit about MacOS X development even if you hadn't planned on that, and you'll gain some experience that'll be useful as you tackle iOS.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:21:30.437

毫无疑问，学习 Mac OS 将是**有益的。**然后从 OSx 切换到 iOS 非常容易。

但对我来说，在 OSX 工作了 3 年之后，我觉得 iOS 并没有太大的不同。GUI 组件变得更少。

OSX 的强大功能之一是我在 iOS 中错过的绑定。

在 OSX 中，您需要处理操作系统，但很少使用 iOS。

在掌握了objecitve-c和cocoa的所有内容之后，您需要学习iOS。

本[网站](http://www.raywenderlich.com/tutorials)是学习 Objective-C 和/或 iOS 应用程序开发的最佳场所。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:31:25.823

学习 Cocoa 将是有益的，是的，因为他们使用的所有基础类都是相同的。但我认为先学习 Cocoa Touch 会更好一些。

1.  Cocoa Touch 比 Cocoa 易于使用和学习。

2.  Cocoa Touch 中的所有视图都是基于层的，而 Cocoa 中的视图不是。所以 Cocoa Touch 和 Cocoa 在使用视图和控件方面有很大的不同。而且，我认为基于图层的动画和性能更好。

3.  Cocoa 中几乎没有设计得不好的东西。对于初学者来说并不容易理解。但 Cocoa Touch 设计得很好。

# javascript - Ext JS 4：从 XML 字符串中读取数据

> ID：15238313
> 
> 赞同：0
> 
> 时间：2013-03-06T03:13:32.970
> 
> 标签：javascript, extjs, xml-parsing

我正在尝试从客户端的 XML 字符串加载数据。XML 阅读器没有从 xml 字符串中获取数据。这是代码

```
 Ext.define('User', {    extend: 'Ext.data.Model',
    fields: ['firstname', 'lastname', 'phone']
});

var storeT =  Ext.create('Ext.data.Store', {    model: 'User',
    data:  '<users><user><firstname>Jack</firstname><lastname>Jobs</lastname><phone>1234567890</phone></user></users>', 
    autoLoad: true,
    proxy: {
        type: 'memory',
        reader: {
            type: 'xml',
            root: 'users',                            
            }    
    }
});

var user = storeT.first();
console.log("First Name " + user.get('firstname') ); 
```

StoreT 没有记录。任何提示为什么它无法获取数据？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T05:41:11.397

XmlReader 的[`record`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Xml-cfg-record)配置是必需的。尝试将此添加到您的阅读器配置中：

```
 record: 'user' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:17:18.910

感谢 bmoeskau 和 Evan，我可以在您的帮助下解决这个问题。这是工作代码：我添加了一个函数来获取 XMLDoc..

```
function GetXMLDoc()     {  

         var xmlstring1 = "<users>" +
        "<user><firstname>Jack</firstname><lastname>Jobs</lastname><phone>1234567890</phone></user>" +
        "</users>"  ;  

        var doc;
        if(window.ActiveXObject){
          doc = new ActiveXObject("Microsoft.XMLDOM");
          doc.async = "false";
          doc.loadXML(xmlstring1);
        }else{
          doc = new DOMParser().parseFromString(xmlstring1,"text/xml");
        }

        console.log("xml", xmlstring1); 
        return doc;

  } 
```

将阅读器更改如下：

```
 var storeT =  Ext.create('Ext.data.Store', {
        model: 'MyUser',
        data:  GetXMLDoc(), 
        autoLoad: true,
        proxy: {
            type: 'memory',
            reader: {
            type: 'xml',
            root: 'users',
            record: 'user',                     
            }
        }
    }); 

    var user = storeT.first();
    console.log("First Name " + user.get('firstname') ); 
```

谢谢..

# java - java中的文件输入流 - 计算数据

> ID：15238317
> 
> 赞同：1
> 
> 时间：2013-03-06T03:13:42.597
> 
> 标签：java, java.util.scanner, fileinputstream

我正在尝试将文件读入程序，然后获取 fileIn 对象并对它们进行计算以创建一个新变量，特别是读取价格并计算销售税。我以前做过这种类型的程序，我是按照下面的代码来做的。出于某种原因，这次我在运行程序时在控制台中收到此错误消息。

```
 Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Scanner.java:909)
at java.util.Scanner.next(Scanner.java:1530)
at java.util.Scanner.nextDouble(Scanner.java:2456)
at TaxCalculator.main(TaxCalculator.java:42) 
```

到目前为止，我发现 .next() 方法给了我错误，因为我可以用 .nextLine(); 完整地阅读，但这违背了程序的目的。

```
 import java.io.FileInputStream;
    import java.util.Scanner;
    import java.io.FileNotFoundException;

    public class TaxCalculator {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    Scanner fileIn = null; //Initializes fileIn to empty

    //Declares variables
    String text;
    int value;
    double price;
    double tax;

    try 
    {
        //Attempt to open the file
        fileIn = new Scanner (
                new FileInputStream ("Basket.txt"));

        }
    catch (FileNotFoundException e)
    {
        //This block executed if the file is not found
        //then the program exits
        System.out.println("File not found.");
        System.exit(0);
    }

    //Read and print in lines
    value = fileIn.nextInt();
    text = fileIn.next();
    price = fileIn.nextDouble();
    tax = (price * .10);

    System.out.printf("%1d %2s %3.2f", value, text, price   );

    /**
    //Read and print next input line
    value = fileIn.nextInt();
    text = fileIn.next();
    price = fileIn.nextDouble();
    tax = (price * .10);    
    System.out.printf("%-7s %20s %22s %30.2f %n", value , text, text,
            price);
    //Read and print next input line
    value = fileIn.nextInt();
    text = fileIn.next();
    price = fileIn.nextDouble();
    tax = (price * .10);    
    System.out.printf("%-7s %18s %22s %30.2f %n", value , text, text,
            price);
    **/
    // Close file
    fileIn.close();

    System.out.println("\nEnd of Tax Calculator");

  }

 } 
```

任何帮助将不胜感激，谢谢。-编辑 - Basket.txt 的内容

```
1 item at 10.49
1 special item at 13.99
1 candy bar at 0.75

Input 2:
1 imported pack of cigarettes at 10.00
1 imported bottle of alcohol at 44.50

Input 3:

1 imported bottle of alcohol at at 25.99
1 bottle of alcohol at 15.99
1 packet of cough drops at 4.99
1 box of imported cigarettes at 9.25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:18:54.957

由 Scanner 抛出以指示检索到的令牌与预期类型的​​模式不匹配，或者令牌超出预期类型的​​范围。

这意味着您的程序试图读取一个不是整数的整数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:37:05.463

包含带有整数的`Basket.txt`字符串，

`value = fileIn.nextInt(); text = fileIn.next(); price = fileIn.nextDouble();`

读取前三行，因此如果是字符串或混合字符串，前三行应为**Integer** **String** **double**，它将显示

```
MismatchException 
```

# android - 耳机电话插孔信用卡刷卡与浏览器应用程序

> ID：15238319
> 
> 赞同：5
> 
> 时间：2013-03-06T03:14:15.300
> 
> 标签：android, iphone, credit-card, mobile-browser

我们希望通过 iPhone 和 Android 手机接受信用卡刷卡，但找不到任何通过耳机插孔连接的设备，这些设备将填充手机浏览器中的字段。使用连接到 PC 的 USB 设备很容易做到这一点。

有几个现有的带有专有 API 的电话插孔设备，但据我所知，这些设备需要本机应用程序。将其标准化或有开源 API 是有意义的，但市场可能还没有。

有谁知道让耳机插孔信用卡刷卡器填充手机浏览器中的字段的方法？

编辑：这似乎不可能。出于某种原因，在 PC/Mac 上使用 HID 标准 USB 读卡器没有人会遇到问题，但这对于手机和平板电脑来说是不行的。因此，最好的选择似乎是使用 PhoneGap 连接到低成本阅读器。

但问题是：读者的选择似乎是 50-100 美元的设备或来自中国的 5 美元的设备，我们无法可靠地工作。我正在寻找价格在 15 到 20 美元之间的可靠设备，并将我的研究发布为站得住脚的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T15:44:00.017

看看 UniMag II，双轨安全移动磁条阅读器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T17:47:50.383

RoamData 提供了一个[PhoneGap 插件](http://www.roamdata.com/products/tools/roampay-phonegap-plugin/)来连接他们的设备：[RP350x](http://www.roamdata.com/products/hardware/rp350x-chip-sign-mobile-card-reader/)或[Group On 使用的设备](https://groupon-pos.myshopify.com/collections/basics/products/roampay-credit-card-swipe)

仍在收集有关这些设备的信息...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T18:33:00.423

Magtek 的 iDynamo 售价 100 美元，uDynamo 售价 > 100 美元。我敢肯定会为批量折扣提供折扣，但这非常昂贵。

[http://www.magtek.com/V2/products/secure-card-reader-authenticators/index.asp](http://www.magtek.com/V2/products/secure-card-reader-authenticators/index.asp)

# parameters - casperjs 无法获得具有“$”的完整参数值

> ID：15238321
> 
> 赞同：0
> 
> 时间：2013-03-06T03:14:27.800
> 
> 标签：parameters, casperjs

我像这样在 Ubuntu 中使用 casperjs，test.js 的内容是这样的：

```
var casper = require('casper').create();
casper.echo("Casper CLI passed options:");
require("utils").dump(casper.cli.options); 
```

然后我运行：`casperjs test.js --p1=aaaa --p2=bb$bb --p3=123$456`

我希望得到：

```
Casper CLI passed options:
{
  "casper-path": "/usr/casperjs",
  "cli": true,
  "p1": "aaaa",
  "p2": "bb$bb",
  "p3": "123$456"
} 
```

但实际上：

```
Casper CLI passed options:
{
    "casper-path": "/usr/casperjs",
    "cli": true,
    "p1": "aaaa",
    "p2": "bb",
    "p3": 12356
} 
```

我不知道为什么'$'消失了，我需要你的帮助~谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:55:44.200

引用和转义很重要，因为它们会影响 Bash 对您的输入起作用的方式。有三种公认的类型：

*   **使用反斜杠**对每个字符进行转义：\$stuff****
***   **双引号的**弱引用：“stuff”*******   **用单引号**强引用：'stuff'********

 ****所有这三种形式都有相同的目的：**它们使您可以对解析、扩展和扩展结果进行一般控制。**

更多信息：[引号和转义](http://wiki.bash-hackers.org/syntax/quoting)****

# c# - 初始化网格时，同一 DataGridView 列中的控件不呈现

> ID：15238322
> 
> 赞同：3
> 
> 时间：2013-03-06T03:15:00.717
> 
> 标签：c#, winforms, datagridview, datagridviewcombobox, datagridviewcheckboxcell

好坏

![DataGridView 列中的不同控件](../Images/9f0c88bc8bbbd70a05622d97c6acab0c.png) ![在此处输入图像描述](../Images/d545e755cbe9a51b935ac28a7ae98251.png)

我在 DataGridView 列中托管不同的控件。当我同时添加控件时，我初始化网格，控件显示为文本框 (BAD)。如果我在 DataGridView 初始化后添加控件，控件会正确呈现（好）。

```
public Form1()
{
        InitializeComponent();
        ControlsInGridViewColumn(); //<- renders controls as textboxes
}

private void button1_Click(object sender, EventArgs e)
{
        ControlsInGridViewColumn();  //<- does correctly render controls
}

private void ControlsInGridViewColumn()
{
    DataTable dt = new DataTable();
    dt.Columns.Add("name");
    for (int j = 0; j < 10; j++)
    {
        dt.Rows.Add("");
    }
    this.dataGridView1.DataSource = dt;
    this.dataGridView1.Columns[0].Width = 200;

    DataGridViewComboBoxCell ComboBoxCell = new DataGridViewComboBoxCell();
    ComboBoxCell.Items.AddRange(new string[] { "aaa","bbb","ccc" });
    this.dataGridView1[0, 0] = ComboBoxCell;
    this.dataGridView1[0, 0].Value = "bbb";

    DataGridViewTextBoxCell TextBoxCell = new DataGridViewTextBoxCell();
    this.dataGridView1[0, 1] = TextBoxCell;
    this.dataGridView1[0, 1].Value = "some text";

    DataGridViewCheckBoxCell CheckBoxCell = new DataGridViewCheckBoxCell();
    CheckBoxCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
    this.dataGridView1[0, 2] = CheckBoxCell;
    this.dataGridView1[0, 2].Value = true;
} 
```

**如何在初始化期间使控件正确呈现？**

*（我正在动态添加 DataGridViews）。*

**更新：** Jacob Seleznev 的答案适用于表单，但不适用于我需要的用户控件......这是重现它的方法：

在表格中：

```
private void button3_Click(object sender, EventArgs e)
{
    this.Controls.Add(new userCtrl());
} 
```

用户控制：

```
public partial class userCtrl : UserControl
{
    public userCtrl()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        ControlsInGridViewColumn();
        base.OnLoad(e);
    }

    public void ControlsInGridViewColumn()
    {
        //same code as above
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:35:58.617

这对我有用：

```
 protected override void OnLoad(EventArgs e)
    {
        ControlsInGridViewColumn();  //<- does correctly render controls
        base.OnLoad(e);
    } 
```

# c# - 如何在 MVC Razor 中的数组或 IEnumerable 对象上应用 DataFormatString？

> ID：15238328
> 
> 赞同：1
> 
> 时间：2013-03-06T03:15:53.927
> 
> 标签：c#, asp.net-mvc, razor, viewmodel, dataformat

我的视图模型中有一个 double 数组，我想应用如下所示的数据格式字符串：

```
class MyVM 
{
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:F2}")]
    public double Currents[] { get; set; }
} 
```

在我的视图中，我在数组上使用 EditorFor，如下所示，除了不应用数据格式字符串外，它工作正常。

```
@Html.EditorFor(model => model.Currents) 
```

我了解到我可以使用自定义模板，但想知道是否有比创建自定义模板更简单的方法。如果自定义模板是唯一的解决方案，那么应该处理格式的最简单的自定义模板是什么？我尝试创建一个，但未能成功正确应用数据格式字符串。

我可以使用以下内容在 ~Views\Shared 文件夹中创建 CurrentsTemplate.cshtml

```
@model double[]

@foreach (double x in Model) {
<div class="editor-field">
    @Html.TextBoxFor(m=>x, "{0:F2}")
</div>
} 
```

并通过调用@Html.EditorFor(m => m.Currents,"CurrentsTemplate") 来使用它，它会工作，但表单数据在其发布后不会持续存在。我猜我需要 for 循环中的隐藏字段以及 TextBox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:54:22.133

创建一个自定义模板，该模板将根据需要格式化您的替身。这样，当 MVC 看到`double`它时，它将使用您的模板而不是它的内部逻辑来显示它。

例如，`EditorTemplates`在您的 Views\Shared 文件夹中创建一个文件夹，然后创建名为 double.cshtml 的 double 类型的强局部视图。

这段代码

```
@model double

@Html.TextBoxFor(m => m, "{0:F2}") 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:54:39.810

解决方案是在帮助程序中使用**实际的成员名称以及所需的数据格式字符串**`@Html.TextBoxFor`。由于数据是 IEnumerable，因此只需将其放在 for 循环中。生成的 HTML 将包含与视图模型的成员名称匹配的适当名称字段，这对于跨 POST 后的数据持久性很重要。不需要隐藏的 HTML 表单字段。

```
@for (int k = 0; k < Model.Currents.Count(); k++ ) {
    @Html.TextBoxFor(model => model.Currents[k], "{0:F2}")                                                           
} 
```

以上将适用于正确的数据格式。它生成

```
 <input name="Currents[0]" id="Currents_0_" type="text" data-val-number="The field Double must be a number." data-val="true" value="0.8"/> 
```

并在 POST 后台保持适当的持久性。

以下三种情况**不起作用**：

情况1：

```
@foreach (double x in Model) {
    @Html.TextBoxFor(m=>x, "{0:F2}")
} 
```

*   不会在 POST 回退中持续存在，因为它会生成名称为“x”的 HTML。
*   这个虽然应用了正确的数据格式。

案例2：

```
@Html.EditorFor(m => m.Currents) 
```

*   不按需要格式化数据
*   但由于在生成的 HTML 中使用了实际的视图数据成员名称，因此在 POST 后仍然存在。

案例3：

```
@Html.EditorFor(m => m.Currents, "TemplateName") 
```

与案例 1 相同。

# javascript - 更改颜色框中的 div 顺序

> ID：15238329
> 
> 赞同：4
> 
> 时间：2013-03-06T03:15:58.450
> 
> 标签：javascript, jquery, css

我想知道是否可以更改[colorbox](http://www.jacklmoore.com/colorbox)中的 div-order ？我只是问，因为 cboxTitle-div 在 cboxContent-div 内。但我希望 cboxTitle-div 位于 colorbox-div 内。

由此...

```
<div id="cboxContent">
    <div id="cboxTitle"></div>
</div> 
```

对这个...

```
<div id="colorbox">
    <div id="cboxTitle"></div>
    <div id="cboxContent"></div>  
</div> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:28:11.737

您可以编写一行 jQuery 来解决这个问题并移动元素：

```
$("#cboxTitle").appendTo("#colorbox"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:39:49.237

不知道你为什么要这样做，但你可以用 jQuery 和 append 方法重新排列它

```
$('body').append( '<div id="colorbox"></div>' );

$('#colorbox').append( $('#cboxTitle') );
$('#colorbox').append( $('#cboxContent') ); 
```

# c++ - 在任何头文件中只定义一个类而不包括包含这样一个类的整个头文件的目的是什么？

> ID：15238333
> 
> 赞同：2
> 
> 时间：2013-03-06T03:16:22.960
> 
> 标签：c++

在任何头文件中只定义一个类而不包括包含这样一个类的整个头文件的目的是什么？

例如，我在一些标题中发现了一些类声明，例如：

```
#include "blabla.h"
#include "mehmeh.h" 
class myClass; 

/*

Some code using myClass 

*/ 
```

使用这种声明的目的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T03:20:25.317

它被称为[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)它让您告诉编译器有一个具有该名称的类型，但头文件不需要知道有关该类型的详细信息。

这减少了头文件中的包含并减少了编译时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T03:21:53.240

这是一个类的前向声明。它允许您定义对您定义的类的指针和引用，而无需引入整个定义。

这样做的最重要原因是由于循环引用而无法以任何其他方式执行此操作：

```
class Parent;
class Child {
    Parent *parent;      // Child must reference Parent
    string name;
};
class Parent {
    Child *children[32]; // Parent must reference Children
}; 
```

另一个原因是加快编译速度：仅仅为了声明一个指针而包含一个大标题可能会大大减慢编译速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:52:54.593

ISO/IEC 14882, 1st, 3.9.6：“已声明但未定义的类，或未知大小或不完整元素类型的数组，是不完整定义的对象类型。......未完全定义的对象类型的实例是未知的。”

K&R 第 2 期，第 212 页：“类型不完整的对象……可能会在不需要其 [具体] 大小的上下文中提及。”

对于不透明指针、柴郡猫、pimpl 等，或者实际上任何不需要、不需要或什至不可能取消引用的上下文都很有用。

# text-analysis - 文本分析解决多项选择考试

> ID：15238339
> 
> 赞同：0
> 
> 时间：2013-03-06T03:17:10.843
> 
> 标签：text-analysis

给定一本教科书和一组基于给定教科书的多项选择题，当然是数字形式，关于如何让计算机解决问题的任何想法？

我在想一些简单的单词关联（即，如果答案中的某些单词靠近问题中的单词，并且以某种方式将其最小化）。我知道在数据分析方面还有很多技术，所以请随时分享您的想法。

不，这根本与家庭作业或学校无关，我只是一时心血来潮随机想到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:21:11.880

这种类型的任务属于自然语言处理的一般领域，特别是：

*   信息检索
*   问答与总结

不幸的是，虽然第一个更容易解决，但后者是一个相当深思熟虑的主题，即使问题领域定义得有些明确。

# javascript - 如何保存http get方法返回png文件

> ID：15238340
> 
> 赞同：0
> 
> 时间：2013-03-06T03:17:13.817
> 
> 标签：javascript, c++, http, get

我有一个问题，有一个http get方法的URL，像这样：

[http://tile0.tianditu.com/DataServer?T=A0512_EMap&X=1&Y=0&L=2](http://tile0.tianditu.com/DataServer?T=A0512_EMap&X=1&Y=0&L=2) 我也可以将参数调整为 [http://tile0.tianditu.com/DataServer?T=A0512_EMap&X=1&Y=1&L=3](http://tile0.tianditu.com/DataServer?T=A0512_EMap&X=1&Y=1&L=3)

所以我需要保存一堆文件，

现在我需要使用编程将其返回的 png 保存为一个文件（粘贴这个 url，你会看到一个 png 映射文件），。

所以我的目标是获取到服务器的方法，获取大量文件并保存在我的电脑中。

以前我做vc/c++桌面开发，没有做类似工作的经验，我该怎么办？我想用一个程序来实现这个任务。

有人可以给我一些建议。我应该使用 php、javascrip 还是 c++ 来做到这一点？

# servicestack - 获取独立于托管的 ServiceStack 应用程序的应用程序物理和虚拟根目录

> ID：15238341
> 
> 赞同：2
> 
> 时间：2013-03-06T03:17:15.240
> 
> 标签：servicestack

我有一个 FileSystemBlobProvider 需要将物理路径映射到虚拟路径，反之亦然。我还需要访问主机名（我需要在给定应用程序相对路径的情况下生成公共 url）。理想情况下，这应该独立于托管（Asp.Net 或自托管）。

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T09:24:40.347

您只能通过以下方式访问 HTTP 请求上下文中的**主机**名：

```
base.Request.Headers["Host"] 
```

这对反向代理也很敏感。如果您在此之外需要它，我会在您的 Web.config 中添加一个用户定义的条目。

根据您的用例，您还可以从以下位置访问虚拟和物理路径`IHttpRequest`：

```
base.Request.PathInfo
base.Request.ApplicationFilePath 
```

ServiceStack 还包括一个[VirtualFileSystem](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/IO/IVirtualPathProvider.cs)，您可以通过以下方式访问它：

```
EndpointHost.VirtualPathProvider 
```

您可以查询以获取 ServiceStack 所在根目录的虚拟和物理路径：

```
EndpointHost.VirtualPathProvider.RootDirectory.VirtualPath
EndpointHost.VirtualPathProvider.RootDirectory.RealPath 
```

# windows - Windows：Boost 和 CMake

> ID：15238350
> 
> 赞同：1
> 
> 时间：2013-03-06T03:18:18.453
> 
> 标签：windows, boost, cmake, mingw

我已经尝试了很长时间来找出问题所在，但我不能......因此我在这里，我很抱歉。

一些信息：

*   我的系统是 Windows 7，带有 Visual Studio 10 和 MinGW 的 64 位专业版
*   我使用以下方法编译了 Boost (1.53.0)：

    ```
    bootstrap.bat mingw 
    .\b2 --prefix=C:\boost toolset=gcc -j4 link=shared
    .\b2 --prefix=C:\boost toolset=gcc -j4 link=shared install 
    ```

*   我的安装看起来像：

    ```
    C:\boost
        include\boost-1_53\boost -- headers
        lib\ -- libraries, both dll and dll.a 
    ```

    *   `ls -la`库的输出（截断长度）

        ```
        $ ls -la 
        total 124249 
        -rwxr-xr-x 1 kevin Administrators    43218 Mar  5 22:07 libboost_atomic-mgw46-mt-1_53.dll
        -rw-r--r-- 1 kevin Administrators     1790 Mar  5 22:07 libboost_atomic-mgw46-mt-1_53.dll.a
        -rwxr-xr-x 1 kevin Administrators    47785 Mar  5 22:07 libboost_atomic-mgw46-mt-d-1_53.dll
        -rw-r--r-- 1 kevin Administrators     1802 Mar  5 22:07 libboost_atomic-mgw46-mt-d-1_53.dll.a
        -rwxr-xr-x 1 kevin Administrators    87319 Mar  5 22:07 libboost_chrono-mgw46-mt-1_53.dll 
        ```

*   我的 CMake 文件对于 boost 相关部分如下： cmake_minimum_required(VERSION 2.8) project(hc12)

    ```
    set(Boost_DEBUG 1)

    #need to add more components, used for testing
    find_package(Boost 1.53.0 COMPONENTS system chrono thread filesystem unit_test_framework signals REQUIRED )

    if(NOT Boost_FOUND)
        message(fatal_error "Boost was not found. See FindBoost.cmake for details.")
    endif()

    INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIR})

    # snip for brievity

    add_library(hc12 SHARED ${libhc12_srcs} )
    target_link_libraries(hc12 ${Boost_FILESYSTEM_LIBRARY}
        ${Boost_SYSTEM_LIBRARY} 
        ${Boost_CHRONO_LIBRARY}
        ${Boost_UNIT_TEST_FRAMEWORK_LIBRARY}
        ${Boost_SIGNALS_LIBRARY}
        ${Boost_THREAD_LIBRARY}
      )

    #--dependencies
    add_executable(test ${test_srcs})

    add_dependencies(test hc12)

    target_link_libraries(test hc12 ${Boost_FILESYSTEM_LIBRARY}
        ${Boost_SYSTEM_LIBRARY} 
        ${Boost_CHRONO_LIBRARY}
        ${Boost_UNIT_TEST_FRAMEWORK_LIBRARY}
        ${Boost_SIGNALS_LIBRARY}
        ${Boost_THREAD_LIBRARY}
      ) 
    ```

    *   该文件实际上还有很多，但其中大部分是用于自动生成代码的自定义命令垃圾。

的输出`cmake ..`是：

```
$ cmake ..
-- The C compiler identification is unknown
-- The CXX compiler identification is unknown
Setting to be debug
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:56
6 ] _boost_TEST_VERSIONS = 1.56.0;1.56;1.55.0;1.55;1.54.0;1.54;1.53.0;1.53
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:56
8 ] Boost_USE_MULTITHREADED = TRUE
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:57
0 ] Boost_USE_STATIC_LIBS =
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:57
2 ] Boost_USE_STATIC_RUNTIME =
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:57
4 ] Boost_ADDITIONAL_VERSIONS =
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:57
6 ] Boost_NO_SYSTEM_PATHS =
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:64
4 ] Declared as CMake or Environmental Variables:
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:64
6 ]   BOOST_ROOT = c:/Boost
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:64
8 ]   BOOST_INCLUDEDIR = c:/boost/include/
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:65
0 ]   BOOST_LIBRARYDIR =
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:65
2 ] _boost_TEST_VERSIONS = 1.56.0;1.56;1.55.0;1.55;1.54.0;1.54;1.53.0;1.53
CMake Error at c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoos
t.cmake:732 (file):
  file STRINGS file "C:/Program Files/boost/boost/version.hpp" cannot be
  read.
Call Stack (most recent call first):
  CMakeLists.txt:15 (find_package)

-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:73
4 ] location of version.hpp: C:/Program Files/boost/boost/version.hpp
CMake Error at c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoos
t.cmake:746 (math):
  math cannot parse the expression: " / 100000": syntax error, unexpected
  exp_DIVIDE, expecting exp_OPENPARENT or exp_NUMBER (2)
Call Stack (most recent call first):
  CMakeLists.txt:15 (find_package)

CMake Error at c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoos
t.cmake:747 (math):
  math cannot parse the expression: " / 100 % 1000": syntax error, unexpected
  exp_DIVIDE, expecting exp_OPENPARENT or exp_NUMBER (2)
Call Stack (most recent call first):
  CMakeLists.txt:15 (find_package)

CMake Error at c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoos
t.cmake:748 (math):
  math cannot parse the expression: " % 100": syntax error, unexpected
  exp_MOD, expecting exp_OPENPARENT or exp_NUMBER (2)
Call Stack (most recent call first):
  CMakeLists.txt:15 (find_package)

-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:75
4 ] version.hpp reveals boost ..
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:78
6 ] guessed _boost_COMPILER =
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:79
6 ] _boost_MULTITHREADED = -mt
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:83
9 ] _boost_RELEASE_ABI_TAG = -
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:84
1 ] _boost_DEBUG_ABI_TAG = -d
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:88
4 ] _boost_LIBRARY_SEARCH_DIRS = c:/Boost/lib;c:/Boost/stage/lib;C:/Program File
s/boost/lib;C:/Program Files/boost/../lib;C:/Program Files/boost/stage/lib;C:/bo
ost/lib;C:/boost;C:\Program Files (x86)/boost/boost___/lib;C:\Program Files (x86
)/boost/boost__/lib;C:\Program Files (x86)/boost/lib;C:\Program Files (x86)/boos
t;/sw/local/lib
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:96
2 ] Searching for SYSTEM_LIBRARY_RELEASE: boost_system-mt-;boost_system-mt;boost
_system-mt-;boost_system-mt;boost_system
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:99
4 ] Searching for SYSTEM_LIBRARY_DEBUG: boost_system-mt-d-;boost_system-mt-d;boo
st_system-mt-d-;boost_system-mt-d;boost_system-mt;boost_system
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:96
2 ] Searching for CHRONO_LIBRARY_RELEASE: boost_chrono-mt-;boost_chrono-mt;boost
_chrono-mt-;boost_chrono-mt;boost_chrono
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:99
4 ] Searching for CHRONO_LIBRARY_DEBUG: boost_chrono-mt-d-;boost_chrono-mt-d;boo
st_chrono-mt-d-;boost_chrono-mt-d;boost_chrono-mt;boost_chrono
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:96
2 ] Searching for THREAD_LIBRARY_RELEASE: boost_thread-mt-;boost_thread-mt;boost
_thread-mt-;boost_thread-mt;boost_thread
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:99
4 ] Searching for THREAD_LIBRARY_DEBUG: boost_thread-mt-d-;boost_thread-mt-d;boo
st_thread-mt-d-;boost_thread-mt-d;boost_thread-mt;boost_thread
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:96
2 ] Searching for FILESYSTEM_LIBRARY_RELEASE: boost_filesystem-mt-;boost_filesys
tem-mt;boost_filesystem-mt-;boost_filesystem-mt;boost_filesystem
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:99
4 ] Searching for FILESYSTEM_LIBRARY_DEBUG: boost_filesystem-mt-d-;boost_filesys
tem-mt-d;boost_filesystem-mt-d-;boost_filesystem-mt-d;boost_filesystem-mt;boost_
filesystem
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:96
2 ] Searching for UNIT_TEST_FRAMEWORK_LIBRARY_RELEASE: boost_unit_test_framework
-mt-;boost_unit_test_framework-mt;boost_unit_test_framework-mt-;boost_unit_test_
framework-mt;boost_unit_test_framework
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:99
4 ] Searching for UNIT_TEST_FRAMEWORK_LIBRARY_DEBUG: boost_unit_test_framework-m
t-d-;boost_unit_test_framework-mt-d;boost_unit_test_framework-mt-d-;boost_unit_t
est_framework-mt-d;boost_unit_test_framework-mt;boost_unit_test_framework
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:96
2 ] Searching for SIGNALS_LIBRARY_RELEASE: boost_signals-mt-;boost_signals-mt;bo
ost_signals-mt-;boost_signals-mt;boost_signals
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:99
4 ] Searching for SIGNALS_LIBRARY_DEBUG: boost_signals-mt-d-;boost_signals-mt-d;
boost_signals-mt-d-;boost_signals-mt-d;boost_signals-mt;boost_signals
-- [ c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:11
08 ] Boost_FOUND = FALSE
CMake Error at c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoos
t.cmake:1192 (message):
  Unable to find the requested Boost libraries.

  Boost version: ..

  Boost include path: C:/Program Files/boost

  The following Boost libraries could not be found:

          boost_system
          boost_chrono
          boost_thread
          boost_filesystem
          boost_unit_test_framework
          boost_signals

  No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the
  directory containing Boost libraries or BOOST_ROOT to the location of
  Boost.
Call Stack (most recent call first):
  CMakeLists.txt:15 (find_package)

fatal_errorBoost was not found. See FindBoost.cmake for details.
CMake Error at c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindPack
ageHandleStandardArgs.cmake:97 (message):
  Could NOT find Qt4 (missing: QT_QMAKE_EXECUTABLE QT_MOC_EXECUTABLE
  QT_RCC_EXECUTABLE QT_UIC_EXECUTABLE QT_LIBRARY_DIR QT_QTCORE_LIBRARY)
Call Stack (most recent call first):
  c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindPackageHandleStan
dardArgs.cmake:291 (_FPHSA_FAILURE_MESSAGE)
  c:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindQt4.cmake:1223 (F
IND_PACKAGE_HANDLE_STANDARD_ARGS)
  src/tools/InstructParser/CMakeLists.txt:7 (FIND_PACKAGE)

-- Configuring incomplete, errors occurred! 
```

我尝试过声明and`BOOST_ROOT`无济于事。`BOOST_INCLUDE_DIR``BOOST_LIBRARYDIR`

我会回答所有和任何问题以寻求帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:14:59.163

这是我必须做的以使一切按预期工作：

1.  从**Visual Studio 提示**：使用以下命令重新编译 boost：`.\b2 --prefix=C:\boost toolset=gcc -j4 link=shared threading=multi --ignore-python --ignore-mpi --layout=tagged`

    `layout=tagged`原因提升使库的形式只是`libboost_system-mt.dll`表示它是多线程的。它删除了之前导致问题的名称的无关部分。

2.  从**MinGW shell**：从配置项目`build`（假设项目顶级目录在`..`）：`CC=gcc CXX=g++ cmake -G "MinGW Makefiles" -DQT_QMAKE_EXECUTABLE=~/Qt/ -DQJSON_DIR=~/qjson ..`

    `QT_QMAKE_EXECUTABLE`和`QJSON_DIR`变量仅因我的项目而需要。对于大多数人来说，您只需要`CC=gcc CXX=g++ cmake -G "MinGW Makefiles" ..`使用 boost 编译一个简单的项目。

    我在执行此操作时遇到了一些错误，但我只是`rm -rf`创建了构建目录并从头开始修复错误。

3.  要实际编译，而不是使用，`make`您*必须*使用`mingw32-make.exe`（或您的 MinGW 安装所拥有的）*从 MinGW Shell*进行编译。

现在我需要做的就是弄清楚如何正确链接到 boost 二进制库以从 CMake 中运行我的自定义代码生成器.. :(

谢谢您的帮助！

# c++ - 在 C/C++ 中求解非线性反抛物线偏微分方程的软件包

> ID：15238352
> 
> 赞同：2
> 
> 时间：2013-03-06T03:18:28.827
> 
> 标签：c++, c, pde

我想`PDE`为二变量函数解决以下问题`f(q,y)`

```
d f(q,y) / dq + 1/2 (d^2f(q,y)/dy^2 + x(q)*(df(q,y)/dy)^2) = 0, 
```

在区间`-\inf < y < \inf, 0<=q<=1` 和边界条件下`f(1,y) = g(y)`，其中`g(y)`是一个已知函数。

用数值求解这个方程的最佳 C/C++ 包是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:04:30.267

如果您可以访问 NAG 库（昂贵），请尝试它们。如果您的大学/公司/研究所拥有正确的许可证类型，NAG 的人员将为您提供帮助。我遇到了来自 NAG 的人，他们对技术支持非常认真。有些人对 NAG 库发誓；我几乎没有用过它们，因为它们太贵了，而且我总是害怕我的下一份工作无法使用它们，所以我不想依赖它们。

在免费库方面，Netlib 中有一些 PDE 求解器，但我从未使用过它们。另一种选择是 C 语言中的数值食谱，我实际上不建议这样做。我见过的最糟糕的数字代码将数字食谱例程用作黑匣子。GSL 是免费的，我已经非常成功地使用它来求解耦合 ODE 系统，但是 GSL 中没有 PDE 求解器。

# php - 如何将php表单的输出格式化为html电子邮件

> ID：15238356
> 
> 赞同：1
> 
> 时间：2013-03-06T03:18:58.747
> 
> 标签：php, html, forms, email, formatting

首先，我不是程序员——所以我试图让事情适应我的需要。我已经在一个 html 表单上工作了几个星期，它产生一个唯一的代码并将数据通过电子邮件发送给我和表单所有者。

我已经设法让所有这些工作并将其构建到我的网站中。

然而，最后的痕迹是我想将电子邮件格式化为 html，并且我已经搜索并阅读并尝试了许多不同的代码 - 有些甚至从这里没有成功。我在一个不间断的句子中得到代码，什么都没有或所有信息。

这是我的 php.ini 文件。靠近底部的是我在邮件中需要的信息`$email_message`

表格代码：

```
<div style="position:absolute;left:0px;top:546px;width:350px;height:84px;">
<style type="text/css">
.formtxt{color:white;}
</style>
<?php
$tokens = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';

$serial = '';

for ($i = 0; $i < 3; $i++) {
for ($j = 0; $j < 4; $j++) {
    $serial .= $tokens[rand(0, 35)];
}

if ($i < 2) {
    $serial .= '-';
}
}
?>
<form name="contactform" method="post" action="bridalcontact.php">
<table width="350px" align="center">
<tr>
<td valign="top">
<label for="first_name"> <span class="formtxt">First Name*</span></label>
</td>
<td valign="top">
<input type="text" name="first_name" maxlength="50" size="20">
</td>
</tr>
<tr>
<td valign="top"">
<label for="last_name"> <span class="formtxt">Last Name*</span></label>
</td>
<td valign="top">
<input type="text" name="last_name" maxlength="50" size="20">
</td>
</tr>
<tr>
<td valign="top">
<label for="email"> <span class="formtxt">Email*</span></label>
</td>
<td valign="top">
<input type="text" name="email" maxlength="80" size="20">
</td>
</tr>
<tr>
<td valign="top">
<label for="security"> <span class="formtxt">What colour is the sky *</span></label>
</td>
<td valign="middle">
<input type="text" name="security" maxlength="80" size="20">
</td>
</tr>
<tr>
<td valign="top">
<label for="telephone">Code</label>
</td>
<td valign="top">
<input type="disabled" name="code" size="20" value='<?php echo "$serial"?>'readonly>
</td>
</tr>
<tr>
<td colspan="2" style="text-align:center">
<input type="submit" value="Submit">
</td>
</tr>
</table>
</form>
</div> 
```

php代码：

```
<?php

if(isset($_POST['email'])) {
  // EDIT THE 2 LINES BELOW AS REQUIRED
  $email_to = "my email address here";
  $email_subject = "Your AODJ voucher";
  function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted.    ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
  }
  // validation expected data exists
  if(!isset($_POST['first_name']) ||
    !isset($_POST['last_name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['security'])) {
      died('We are sorry, but there appears to be a problem with the form you submitted.');
    }
  $first_name = $_POST['first_name']; // required
  $last_name = $_POST['last_name']; // required
  $email_from = $_POST['email']; // required
  $security = $_POST['security']; // required
  $code = $_POST['code']; // not required
  $error_message = "";
  $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
  $security_exp = "/blue/";
  if(!preg_match($security_exp,$security)) {
    $error_message .= 'Wrong solar system - sorry.<br />';
  }
  //$string_exp = "/^[A-Za-z .'-]+$/";
  //if(!preg_match($security_exp,$security)) {
  //$error_message .= 'Wrong solar system - sorry.<br />';
  //}
  $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
  $email_message = "Form details below.\n\n";
  function clean_string($string) {
    $bad = array("content-type","bcc:","to:","cc:","href");
    return str_replace($bad,"",$string);
  }
  $email_message .= "First Name: ".clean_string($first_name)."\n";
  $email_message .= "Last Name: ".clean_string($last_name)."\n";
  $email_message .= "Email: ".clean_string($email_from)."\n";
  $email_message .= "code: ".clean_string($code)."\n";
  // create email headers
  $headers = 'From: '.$email_from."\r\n".
    'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
  @mail($email_to, $email_subject, $email_message, $headers);
  @mail($email_from, $email_subject, $email_message, $headers);
?>
<?php
  if( !empty( $_POST ) ) {
    header( "Location: bridaloptionsthanks.html" ) ; exit ;
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:34:19.690

提供完整的代码以将您的电子邮件作为 html 发送可能是一项漫长的工作，具体取决于您想要什么。

1.  在您的代码中，我不得不提到您可能存在安全问题，因为您允许服务器从未经验证的表单发送电子邮件。在某种程度上，有人可能会使用您的服务器通过脚本自动发送垃圾邮件。

2.  电子邮件可以根据 mime 格式以 html 格式发送，如果您想支持多部分内容（一个纯文本版本和一个 html 版本），实现起来可能会非常复杂。幸运的是，今天大多数客户都支持 html。

3.  如果你想发送一个设计精美的html内容等等，你必须学习html和css。你应该注意邮件客户端，并不总是支持所有的 css 属性，这使得开发有点长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:11:41.407

*经过测试，对我来说效果很好。试试这个。*

**[形式]**

```
<?php
$tokens = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';

$serial = '';

for ($i = 0; $i < 3; $i++) {
for ($j = 0; $j < 4; $j++) {
    $serial .= $tokens[rand(0, 35)];
}

if ($i < 2) {
    $serial .= "-";
}
}
?>

<!DOCTYPE html>

<head>

<style type="text/css">
.formtxt{color:black;}
</style>

</head>

<body>

<h1>My first heading</h1>

<p align="left">My first paragraph</p>

<div style="position:absolute;left:0px;top:140px;width:350px;height:84px;">
<form name="contactform" method="post" action="bridalcontact.php">
<table width="350px" align="center">
<tr>
<td valign="top">
<label for="first_name"><span class="formtxt">First Name*</span></label>
</td>
<td valign="top">
<input type="text" name="first_name" maxlength="50" size="20">
</td>
</tr>
<tr>
<td valign="top"">
<label for="last_name"><span class="formtxt">Last Name*</span></label>
</td>
<td valign="top">
<input type="text" name="last_name" maxlength="50" size="20">
</td>
</tr>
<tr>
<td valign="top">
<label for="email"><span class="formtxt">Email*</span></label>
</td>
<td valign="top">
<input type="text" name="email" maxlength="80" size="20">
</td>
</tr>
<tr>
<td valign="top">

<label for="security"> <span class="formtxt">What colour is the sky *</span></label>

</td>
<td valign="middle">
<input type="text" name="security" maxlength="80" size="20">
</td>
</tr>
<tr>
<td valign="top">
<label for="telephone">Code</label>
</td>
<td valign="top">
<input type="disabled" name="code" size="20" value="<?php echo "$serial"?>"readonly>
</td>
</tr>
<tr>
<td colspan="2" style="text-align:center">
<input type="submit" value="Submit">
</td>
</tr>
</table>
</form>
</div>

</body>
</html> 
```

**[加工]**

```
<?php

if(isset($_POST['email'])) {
  // EDIT THE 2 LINES BELOW AS REQUIRED
  $email_to = "YOUR EMAIL HERE";
  $email_subject = "Your AODJ voucher";
  function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted.    ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
  }
  // validation expected data exists
  if(!isset($_POST['first_name']) || !isset($_POST['last_name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['security'])) {
      died('We are sorry, but there appears to be a problem with the form you submitted.');
    }
  $first_name = $_POST['first_name']; // required
  $last_name = $_POST['last_name']; // required
  $email_from = $_POST['email']; // required
  $security = $_POST['security']; // required
  $code = $_POST['code']; // not required
  $error_message = "";
  $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }

  $security_exp = "/blue/";

  if(!preg_match($security_exp,$security)) {

    $error_message .= 'Wrong solar system - sorry.<br />';
  }

  $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
  $email_message = "Form details below.\n\n";
  function clean_string($string) {
    $bad = array("content-type","bcc:","to:","cc:","href");
    return str_replace($bad,"",$string);
  }
  $email_message .= "First Name: ".clean_string($first_name)."\n";
  $email_message .= "Last Name: ".clean_string($last_name)."\n";
  $email_message .= "Email: ".clean_string($email_from)."\n";
  $email_message .= "code: ".clean_string($code)."\n";

  // create email headers

$headers = "Content-type: text/html\r\n";
$headers .= 'From: '.$email_from."\r\n".

    'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
  @mail($email_to, $email_subject, $email_message, $headers);
  @mail($email_from, $email_subject, $email_message, $headers);
?>
<?php
  if( !empty( $_POST ) ) {
    header( "Location: thank_you.php" ) ; exit ;
  }
}
?> 
```

**[谢谢]**

```
<?php

echo "Thank you";

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T03:28:36.243

为了发送 HTML 格式的邮件，您需要添加正确的标题信息。

更改此行：

```
$headers = 'From: '.$email_from."\r\n".
... 
```

为此：（并添加一个点/连接`$headers .=`）

```
$headers = "Content-type: text/html\r\n";
$headers .= 'From: '.$email_from."\r\n".
... 
```

旁注：只有第一个标题行没有点/连接。它后面的其他标题将需要它。查阅 PHP.net 上的手册

然后在您希望的位置添加您的 HTML。

根据手册：

*   [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# scala - 拉皮条 scalaz 备忘录

> ID：15238362
> 
> 赞同：2
> 
> 时间：2013-03-06T03:20:16.423
> 
> 标签：scala, scalaz, memo

我喜欢新的 scalaz Memo 功能，但发现它缺少两点：1）它隐藏了我需要访问的底层地图——至少是所有值的列表，以及 2）我想要一个使用 val 实现的版本我在某处读到的 scala.collection.concurrent.TrieMap 比 var Map 更可取。

我还不是一个隐含的巫师。有没有办法让这个备忘录类添加支持此功能的版本，或者我将不得不剪切/粘贴到一个独特的新类中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:37:47.407

这可以通过内置的 Memo.memo 函数来完成。Memo.memo 从函数 F => K => V 创建一个 Memo 实例。这也让您可以轻松访问底层 trie。例如：

```
scala> def trieMemo[A, B](trie: collection.concurrent.TrieMap[A, B]) = 
         Memo.memo[A, B](f => k => trie.getOrElseUpdate(k, f(k)))
trieMemo: [A, B](trie: scala.collection.concurrent.TrieMap[A,B])scalaz.Memo[A,B]

scala> val trie = collection.concurrent.TrieMap[Int, Int]()
trie: scala.collection.concurrent.TrieMap[Int,Int] = TrieMap()

scala> val f = trieMemo(trie)(n => n * n)
f: Int => Int = <function1>

scala> f(5)
res0: Int = 25

scala> f(10)
res1: Int = 100

scala> trie
res2: scala.collection.concurrent.TrieMap[Int,Int] = TrieMap(5 -> 25, 10 -> 100) 
```

# ruby-on-rails - Ruby on rails - where 子句在关系上产生“未定义方法”错误

> ID：15238372
> 
> 赞同：0
> 
> 时间：2013-03-06T03:21:20.740
> 
> 标签：ruby-on-rails, where

我有一个属于用户的模型电子邮件地址。在我的用户模型中，它说它有很多电子邮件地址。考虑以下控制台输出：

* * *

> irb（主）：073：0>`b = EmailAddress.find(2)`
> 
> EmailAddress Load (0.4ms) SELECT email_addresses.* FROM email_addresses WHERE email_addresses.id = 2 LIMIT 1
> 
> => #EmailAddress id: 2, email: "w@example.com", user_id: 2, created_at: "2013-03-06 02:33:40", updated_at: "2013-03-06 02:33:40 "
> 
> irb（主）：074：0>`b.user`
> 
> 用户负载 (0.1ms) SELECT users.* FROM users WHERE users.id = 2 LIMIT 1
> 
> => #用户ID：2，用户名：“w”，created_at：“2013-03-06 02:33:40”，updated_at：“2013-03-06 02:33:40”
> 
> irb（主）：075：0>`b = EmailAddress.where(:email => "r@example.com")`
> 
> EmailAddress Load (0.1ms) SELECT email_addresses.* FROM email_addresses WHERE email_addresses.email = r@example.com
> 
> => #EmailAddress id: 1, email: "r@example.com", user_id: 1, created_at: "2013-03-05 07:26:56", updated_at: "2013-03-05 07:26:56 "
> 
> irb（主）：076：0>`b.user`
> 
> NoMethodError：未定义的方法用户来自/var/lib/gems/1.8/gems/activerecord-3.2.11/lib/active_record/relation/delegation.rb:45:in `method_missing' from (irb):76

* * *

有人可以告诉我为什么当我使用时`where()`我无法找到用户，但是当我使用 find() 时它可以工作？这是非常令人困惑的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:29:48.303

`.where()`返回一个数组（特别是`ActiveRecord::Relation`）。要选择返回的对象，您需要指定哪个对象。在这种情况下，由于您期望一个对象，您可以这样做：

```
b = EmailAddress.where(:email => "r@example.com").first 
```

或者

```
b = EmailAddress.where(:email => "r@example.com")[0] 
```

# python - 合并列表python

> ID：15238388
> 
> 赞同：-2
> 
> 时间：2013-03-06T03:23:27.017
> 
> 标签：python

Let's Get Together – Merging Lists 让 a 和 b 被排序（从小到大）可能不同长度的整数列表。编写一个“合并” a 和 b 以创建列表 c 的程序。列表 c 必须由 a 和 b 的所有元素组成，并且还必须按排序（从小到大）顺序。注意：您的程序可能不会对列表 c 使用列表方法 sort()，或以任何方式对列表 c 中的值进行排序。

我写的：

```
from random import randint
a=[randint(1,200) for i in range(20)]
a.sort()
b=[randint(1,100) for j in range(15)]
b.sort()
c=a.extend(b)
print(c) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:29:43.137

如果您知道`a`和`b`都是排序的，那么您可以查看每个列表的头部，比较值，然后您可以选择其中哪个值最小。您可以通过一次构建一个元素来创建列表`c`，每次使用可用的最小整数，直到一个列表用完。然后只需附加其他列表的其余部分，您就完成了。

# python - 如何将字符串添加到特定行

> ID：15238389
> 
> 赞同：3
> 
> 时间：2013-03-06T03:23:39.140
> 
> 标签：python, linux

我有一个包含 50 行的文件。如何使用 python/linux 将字符串“-----”添加到特定行，比如第 20 行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:25:53.917

你有没有尝试过这样的事情？：

```
exp = 20 # the line where text need to be added or exp that calculates it for ex %2

with open(filename, 'r') as f:
    lines = f.readlines()

with open(filename, 'w') as f:
    for i,line in enumerate(lines):
        if i == exp:
            f.write('------')
        f.write(line) 
```

如果您需要编辑差异行数，您可以通过以下方式更新代码：

```
def update_file(filename, ln):
    with open(filename, 'r') as f:
        lines = f.readlines()

    with open(filename, 'w') as f:
        for idx,line in enumerate(lines):
            (idx in ln and f.write('------'))
            f.write(line) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T03:27:51.840

```
$ head -n 20 input.txt > output.txt
$ echo "---" >> output.txt
$ tail -n 30 input.txt >> output.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:54:08.227

如果要读取的文件很大，并且您不想一次读取内存中的整个文件：

```
from tempfile import mkstemp
from shutil import move
from os import remove, close

line_number = 20

file_path = "myfile.txt"

fh_r = open(file_path)
fh, abs_path = mkstemp()
fh_w = open(abs_path, 'w')

for i, line in enumerate(fh_r):
    if i == line_number - 1:
        fh_w.write('-----' + line)
    else:
        fh_w.write(line)

fh_r.close()
close(fh)
fh_w.close()

remove(file_path)
move(abs_path, file_path) 
```

**[注意：我在这里](https://stackoverflow.com/questions/2081836/reading-specific-lines-only-python)使用了 Alok 的答案作为参考。**

# url - 哈希参数与 url 参数，什么时候使用？

> ID：15238391
> 
> 赞同：58
> 
> 时间：2013-03-06T03:23:44.877
> 
> 标签：url

是否有关于何时使用哈希参数、url 参数和路径的约定或最佳实践建议？

例如：

*   哈希参数：stackoverflow.com/questions#q=13630937&t=hash-params-vs-url-params
*   网址参数：stackoverflow.com/questions?q=13630937&t=hash-params-vs-url-params
*   网址路径：stackoverflow.com/questions/13630937/hash-params-vs-url-params

是否有安全性、搜索引擎优化、可用性方面的优势或劣势，或者是风格问题？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-14T03:18:12.430

哈希参数对于单页 javascript 应用程序很有用，它允许 javascript 向用户呈现应用程序状态的可共享 url。这是首选，因为如果您有一个单页 javascript 应用程序并且用户通过 ajax 导航和加载更多内容并共享 url，而无需修改散列或推送状态，则接收内容的人将获得主页或开始状态。哈希参数可以很容易地修改并通过 javascript 读取，而无需重新加载页面。

散列参数通常只在客户端使用，散列参数不会传递给服务器......所以它们只对客户端的参数化有用。

```
/users#!/13 
```

将加载用户索引页面，然后 javascript 可以读取哈希

`window.location.hash`并通过某种客户端路由器传递它并发出适当的ajax请求，并可能加载用户显示模板并将其推送到dom。

网址参数和网址路径在某种程度上可以互换。人们通常使用 url 路径来描述 restful 资源，例如

```
/users/[:id] => /users/13 => /users?id=13
/users/:id/posts => /users/13/posts
/users/:user_id/posts/:id => /users/13/posts/22
etc...... 
```

@Walter Tross，从 SEO 的角度提出了一个很好的观点。Slugged url 或“URL 参数”更容易被爬虫索引，并且往往排名更高。

对于不适合资源丰富的路由的参数，我们将它们作为参数发送

```
/users?sort=user_name&order=asc 
```

# haskell - 遍历抽象语法树时如何使用 Reader Monad

> ID：15238396
> 
> 赞同：7
> 
> 时间：2013-03-06T03:24:24.747
> 
> 标签：haskell, monads, abstract-syntax-tree

我在用 Parsec 制作的 haskell 中有一个抽象语法树。我希望能够在遍历它的同时查询它的结构，以便将其转换为中间代码。例如，我需要知道我的 AST 的任何给定函数需要多少参数才能进行这种翻译。我目前正在做的是将 AST 传递给每个函数，这样我就可以在需要进行查找时调用它，并且我在另一个文件中有辅助函数来为我进行查找。这污染了我的类型签名。尤其是当我开始添加更多的东西时，比如累加器。

而不是将 AST 传递给我听说过的每个函数，这对于 Reader Monad（对于不改变的状态，AST）和 State Monad（对于确实改变的状态，累加器）来说是一个很好的工作。

如何从 IO monad ( *gulp* ) 中取出 ast 并在 Reader Monad 中使用它来进行全局查找？

```
main = do
  putStrLn "Please enter the name of your jack file (i.e. Main)"
  fileName <- getLine
  file <- readFile (fileName++".jack")
  let ast = parseString file
  writeFile (fileName++".xml") (toClass ast) --I need to query this globally
  putStrLn $  "Completed Parsing, " ++ fileName ++ ".vm created..."

type VM = String

toClass :: Jack -> VM
toClass c = case c of
   (Class ident decs) ->
     toDecs decs 

toDecs ::[Declaration] -> VM -- I don't want to add the ast in every function arg...
toDecs [] = ""
toDecs (x:xs) = case x of
  (SubDec keyword typ subname params subbody) ->
    case keyword of
      "constructor" -> --use the above ast to query the # of local variables here...
    toSubBody subbody ++
    toDecs xs
  otherwise -> [] 
```

Reader Monad 进度更新：我已将上面的示例转换为如下内容：（见下文）。但是现在我想知道由于所有这些字符串输出的积累，我是否也应该使用作家 Monad？如果是这样，我应该如何组合这两者？ReaderT 应该封装作家吗？或相反亦然？我是否应该创建一个只接受 Reader 和 Writer 而不尝试将它们组合为 Monad Transformer 的类型？

```
main = do
  putStrLn "Please enter the name of your jack file (i.e. Main)"
  fileName <- getLine
  file <- readFile (fileName++".jack")
  writeFile (fileName++".xml")  (runReader toClass $ parseString file)
  putStrLn $  "Completed Parsing, " ++ fileName ++ ".xml created..."

toClass = do   
  env <- ask
  case env of Class ident decs -> return $ toDecs decs env

toDecs [] = return ""
toDecs ((SubDec keyword typ subname params subbody):xs) = do
  env <- ask
  res <- (case keyword of
            "method" -> do return "push this 0\n"
            "constructor" -> do return "pop pointer 0\nMemory.alloc 1\n"
            otherwise -> do return "")
  return $ res ++ toSubBody subbody env ++ toDecs xs env
toDecs (_:xs) = do
  decs <- ask
  return $ toDecs xs decs

toSubBody (SubBodyStatement states) = do
    return $ toStatement states
toSubBody (SubBody _ states) = do
    return $ toStatement states 
```

[http://hpaste.org/83595](http://hpaste.org/83595) --for 声明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:28:25.603

如果不了解更多关于`Jack`and`Declaration`类型的信息，就很难看出如何将其转换为 Reader monad。如果想法是在对象处于范围内时对某物执行“映射”或“折叠” `ast :: Jack`，您可以编写

```
f :: [Declaration] -> Reader Jack [Something]
f decls = mapM go decls where 
  go :: Declaration -> Reader Jack Something
  go (SubDec keyword typ subname params subbody) =
    case keyword of
      "constructor" -> do
        ast <- ask
        return (doSomething subbody ast) 
```

然后在你的上下文中执行它`ast`as `runReader (f decls) ast`。

# tomcat - Tomcat 数据源 getConnection 挂起

> ID：15238397
> 
> 赞同：3
> 
> 时间：2013-03-06T03:24:27.250
> 
> 标签：tomcat, datasource

从 Tomcat 数据源获取连接时出现问题。

以下是配置文件：

1.  `server.xml`

```
<Resource name="jdbc/mssql" auth="Container"
      type="javax.sql.DataSource" removeAbandoned="true"
          removeAbandonedTimeout="30" maxActive="-1"
          maxIdle="-1" maxWait="10000"      username="xxx" password="xxx"       driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"      url="jdbc:sqlserver://xxx.xxx.xxx.xxx:1433;databaseName=XXX" /> 
```

1.  `context.xml`

```
<ResourceLink global="jdbc/mssql" name="jdbc/mssql" type="javax.sql.DataSource" /> 
```

从我的应用程序代码：

```
InitialContext initContext = new InitialContext();

if(initContext == null) {
    String message = "There was no context in tomcat server..";
    throw new Exception(message);
}
DataSource datasourceLocal = null;
datasourceLocal = (DataSource)initContext.lookup("java:/comp/env/jdbc/mssql");

if(datasourceLocal == null){
   String message = "Could not find the dataSource in tomcat server..";
   throw new Exception(message);
}
else {
    logger.info("ConnPool Success..");
}

Connection conn = datasourceLocal.getConnection(); 
```

我有 2 台数据库服务器（将 IP 替换为 xxx.xxx.xxx.xxx 中的`server.xml`），它在第 1 台上工作正常，但在第 2 台上，它只是挂在获取连接线上（我在此之前和之后放置了一些跟踪线）。

# iphone - wl_deviceNoProvisioningRealm 挑战的 Worklight 应用程序循环

> ID：15238399
> 
> 赞同：0
> 
> 时间：2013-03-06T03:25:00.903
> 
> 标签：iphone, ibm-mobilefirst

我的身份验证应用程序基于模块 21 的示例代码。它在 Android 和 PC 浏览器上运行良好。我添加了一个 iPhone 环境并在 Xcode 和 Simulator 上对其进行了测试，然后出现了奇怪的循环。

根据我的调查，对适配器程序的第一次调用进入循环。这似乎是由适配器的挑战响应引起的。我已经使用 Eclipse 进行了 TCP 跟踪，如下所示。

<请求>

**adapter=AdapterName&procedure=ProcedureName¶meters=xxxxxx&isAjaxRequest=true&x=0.19480942375957966**

<响应>

**/*-secure- {"challenges":{"wl_deviceNoProvisioningRealm":{"token":"lsfssroob823c30493g709st01"}}}*/**

这只发生在 iPhone/iPad 模拟器上（不在 Android 或 PC 浏览器上）。

我曾尝试在 authenticationConfig.xml 上添加和删除一些元素，但没有效果。

*   工作灯 5.0.5.1
*   代码 4.6
*   iPhone 模拟器 iOS 5.0~6.1

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:58:43.867

您是否将 bundleId 属性添加到 application-descriptor.xml 中的 iPhone/iPad 元素？

# ios - Xcode Storyboard 组织和重复工作

> ID：15238403
> 
> 赞同：2
> 
> 时间：2013-03-06T03:25:16.650
> 
> 标签：ios, uiviewcontroller, interface-builder, uistoryboard

![我的 iPhone 故事板的一部分，带有意大利面条](../Images/22603aebdfefd6a7355c79fdb5ba5b1b.png) 你可以看到segues是一团意大利面条。为了理解它，以下是用户可以采取的一些可能的路径：

1.  点击 TopPlacesTVC 中的一行 --> 点击 PhotoSelectorTVC 中的一行 --> PhotoViewerVC
2.  在 TopPlacesTVC 中点击一行 --> 在 PhotoSelectorTVC 中点击地图按钮 --> 在 MapVC 中点击一个图钉 --> PhotoViewerVC
3.  点击 TopPlacesTVC 中的地图按钮 --> 在 MapVC 中点击一个图钉 --> 在 PhotoSelectorTVC 中点击地图按钮 --> 在 MapVC 中点击一个图钉 --> 在 PhotoSelectorTVC 中点击一行 --> PhotoViewerVC

为了使 segues 更清晰，我可以将它分解为更多的视图控制器，以便每个视图控制器只有 1 个 segue 进入。然而，这将引入大量的重复工作。目前，上述所有路线都是通过情节提要中的 4 个视图控制器实现的。按照建议分解它需要 5 个新的视图控制器，每个视图控制器都是现有 VC 的精确副本。

这两种选择似乎都很糟糕。segues 的意大利面工厂打败了使用故事板的主要原因之一：应用程序的流程不再清晰。另一方面，引入大量重复工作也不好。有没有关于在没有重复视图控制器的情况下保持故事板井井有条的想法？

请不要回答“不要使用界面糟糕的构建器”。如果你不喜欢它，没关系。这个问题不适合你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:03:34.927

您可以为第三种情况创建一个 MapVC 副本并将其放在 TopPlacesTVC 和 PhotoSelectorTVC 之间。 ![在此处输入图像描述](../Images/f3efe693185026fe894fdd64e181abbd.png)

# php - 数据库存储与 Cookie - 从数据中存储

> ID：15238404
> 
> 赞同：1
> 
> 时间：2013-03-06T03:25:16.780
> 
> 标签：php, mysql, codeigniter, session, cookies

祝大家好日子，

我有一个包含大约 90 到 100 个字段的表单，分为子表单，每次必须显示表单时都使用 ajax 加载这些子表单。但我想在每次加载子表单时保留表单字段上的数据（比如说在意外的页面刷新或者即使用户在子表单之间切换）。可以做到这一点的最佳方法是什么。

我在想我可以将它存储在 cookie 中，或者说存储在数据库中。但是，将其存储在数据库中意味着每次加载子表单时我都必须查询字段数据。同样，如果是 cookie，它必须读取存储在 cookie 文件中的数据。我需要一些帮助来决定什么是最有效的方式，更多的是在速度方面。

其中最好的方法是什么，或者是否有任何其他可能性在每次加载子表单时保留子表单中的字段数据（每次都通过 AJAX 加载。）

我正在使用 PHP 和 Codeigniter 框架。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:31:59.240

像这样的表格需要持久存储。我会考虑使用会话状态来平滑子表单加载，每当用户更新某些重要内容时写入数据库。就个人而言，我会从仅数据库的解决方案开始，如果性能是一个问题，然后添加会话状态。

Cookie 并不意味着存储大量数据。即使*有*可能，它们也会使请求大大膨胀（想象一下每个请求都会传输 100 个表单字段）。

浏览器中的本地存储也是一种选择，但我会先考虑其他选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T03:32:51.160

我将首先通过使用序列化来简化它：

```
$data = serialize(array_merge($_POST,$olddata)); 
```

那么这对您来说可能就足够了，但是现在将它存储在任何地方都非常容易，因为它只是一个字符串。将其重整为原始状态：

```
$data = unserialize($data); 
```

..无论你最终从哪里提取它——数据库、会话等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T03:46:26.997

数据库散文 它也可以从其他计算机访问 您可以存储比 cookie 锥体更多的数据 如果您通过 ajax 检索数据，它可能会增加服务器上的负载

Cookie 比数据库更快，无需查询、获取和所有过程。锥体空间有限

但是，您可以使用本地存储

所以答案是数据库存储

# macos - MonoGame develop3d 分支不在 OS X 上构建

> ID：15238406
> 
> 赞同：0
> 
> 时间：2013-03-06T03:25:21.930
> 
> 标签：macos, mono, monogame

我已经使用 MonoGame 的稳定分支和 MonoDevelop 模板成功构建了一段时间，现在我想升级到 develop3d 分支以利用它的所有功能。但是当我构建它时，它给了我错误：

```
~/MonoGame/MonoGame.Framework/GamerServices/GamerProfile.cs(67,24): warning CS0628: `Microsoft.Xna.Framework.GamerServices.GamerProfile.Dispose(bool)': new protected member declared in sealed class
~/MonoGame/MonoGame.Framework/Graphics/GraphicsCapabilities.cs(47,7): error CS0246: The type or namespace name `OpenTK' could not be found. Are you missing a using directive or an assembly reference? 
```

我完全不知道为什么会这样。我应该参考什么 OpenTK？它不是自带的，所以我必须下载它或其他什么？

编辑：在终端中`xbuild`构建它并在 MonoDevelop 中构建它都产生相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:50:13.713

找到解决方案；在开头替换它`Graphics/GraphicsCapabilities.cs`：

```
#if OPENGL
#if GLES
using OpenTK.Graphics.ES20;
//... 
```

和：

```
#if MONOMAC
using MonoMac.OpenGL;
#elsif OPENGL
#if GLES
using OpenTK.Graphics.ES20;
//... 
```

# socket.io - 从 CDN 提供的 Socket.io 客户端

> ID：15238407
> 
> 赞同：19
> 
> 时间：2013-03-06T03:25:29.577
> 
> 标签：socket.io

根据 Socket.io 文档：

> socket.io-client 的独立构建由 socket.io 服务器自动公开为 /socket.io/socket.io.js。或者，您可以提供在此存储库根目录中找到的文件 socket.io-client.js。

```
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io('http://localhost');
    socket.on('connect', function(){
    socket.on('event', function(data){});
    socket.on('disconnect', function(){});
  });
</script> 
```

但是，我想从一个单独的 CDN 为 socket.io 客户端提供服务（它更便宜、更快，并且减少了我的服务器上的负载）。

我怎样才能做到这一点？我必须禁用 socket.io 默认值吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T07:55:21.723

只要您使用的客户端版本与您在服务器上使用的版本相同，从 CDN 提供它应该没有任何问题。

也就是说，客户端很小（24kb），如果缓存设置正确，这对您的服务器的影响应该很小。

更新：正如@maxwell2022 提到的，socket.io 有自己的 CDN，从 1.0.0 开始，所以你可以使用：

```
<script src="https://cdn.socket.io/socket.io-1.0.0.js"></script> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-25T13:19:47.200

您可以在[此处](http://cdnjs.com/libraries/socket.io/)找到指向 socket.io 客户端脚本文件的 CDN 链接。

## 0.9.16

```
//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js 
```

## 0.9.6

```
//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.6/socket.io.min.js 
```

...等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T20:22:47.213

根据[wiki](http://github.com/LearnBoost/Socket.IO/wiki/How-do-I-serve-the-client)，如果您选择自己为客户端提供服务，则可以克隆[socket.io-client](https://github.com/LearnBoost/socket.io-client)存储库并查看`dist/`子目录。有 4 个文件可供服务（这可能会改变）：

*   `WebSocketMain.swf`
*   `WebSocketMainInsecure.swf`
*   `socket.io.js`
*   `socket.io.min.js`

只要确保在更新服务器时更新这些文件。

# extjs - sencha touch routing extraparams kitchensink

> ID：15238408
> 
> 赞同：1
> 
> 时间：2013-03-06T03:25:33.213
> 
> 标签：extjs, routes, touch, metadata

我正在尝试扩展 Sencha Touch Kitchensink 应用程序中的路由，如下所示：

我的数据（在列表存储中）如下：

```
{ category: 'fruit', str: 'tomato'},
{ category: 'fruit', str: 'green bean'},
{ category: 'vegetable', str: 'celery'},
{ category: 'vegetable', str: 'sprouts'},
{ category: 'notAVegetable', str: 'ketchup'},
{ category: 'notAVegetable', str: 'prune'} 
```

我只想显示由特定类别选择的那些数据，例如“水果”

在 Main.js 控制器中，我试图通过从 Demos TreeStore 的“List”节点中获取另一个参数来做到这一点

```
routes: {
        'demo/:id/:category': 'showViewById',
        'menu/:id': 'showMenuById'
    }, 
```

showViewById 操作添加额外参数以供以后使用的位置

```
showViewById: function (id, category) {
    var nav = this.getNav(),
        view = nav.getStore().getNodeById(id);

    console.log('view ' + id);

this.showView(view);
    this.setCurrentDemo(view);
    this.hideSheets();

    // do stuff with category
}, 
```

我正在尝试在“列表”树节点中的 Demos.js 存储中添加和访问“类别”作为额外参数，如下所示：

```
{
    text: 'List',
    leaf: true,
    id: 'list',
    extraParams: {
        category: 'fruit'
    }
}, 
```

几个问题：我可以使用 extraParameter 将此属性添加到 Store 吗？如果是这样，我如何访问它以用于我的路由？我认为它可以作为我的 Demos 商店的元数据使用，但无法访问它。

除了创建多个商店（一个用于“水果”、“蔬菜”、“notAVegetable”等）之外，还有什么替代方法可以在它们上使用过滤器来实现相同的目标？

蒂亚！

# android - 针对不同环境的不同 Android 版本

> ID：15238412
> 
> 赞同：10
> 
> 时间：2013-03-06T03:26:07.823
> 
> 标签：android, android-manifest, android-build

我希望能够（同时）构建和安装我的应用程序的多个版本，针对不同的环境，例如开发、暂存，当然还有生产。

中的包名称`AndroidManifest.xml`似乎是这里的主要障碍，因为它是唯一标识应用程序的东西。我认为可以简单地在`com.mydomain.prod`, `com.mydomain.staging`and`com.mydomain.dev`或某种类似的约定之间切换，但到目前为止，我还没有找到适用于这种方法的包结构。

我可以采用什么策略来尽可能减少痛苦？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-11T21:40:32.480

使用 Gradle，您可以指定应用程序的不同“风格”。这是在你的`build.gradle`：

```
android {
    // …

    defaultConfig {
        // …
    }

    productFlavors {
        prod
            applicationId "com.mydomain.prod"
        }

        staging {
            applicationId "com.mydomain.staging"
        }

        dev {
            applicationId "com.mydomain.dev"
            versionCode 2
        }
    }
} 
```

每个风味属性都继承自`defaultConfig`.

现在，在`src`您的应用程序目录中，您可以在其中创建包含特定于风味的代码/资源的目录：

```
app/
|-- src/
    |-- main/
    |-- prod/
    |-- staging/
    |-- dev/ 
```

这些链接可能有用：

*   [如何使用 Gradle 构建定制的 Android 应用程序](http://vincentbrison.com/2014/08/09/how-to-build-customized-android-application-using-gradle/)
*   [Gradle 为您的 android 项目构建变体](http://tulipemoutarde.be/2013/10/06/gradle-build-variants-for-your-android-project.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T20:37:43.887

我建议您使用“ant”构建工具，特别是“regexp”任务，该任务可用于替换某些文件中的文本（即根据正确的构建目标替换清单文件中的应用程序包名称）。您还可以为每个构建目标定义不同的属性文件（例如，“build_development.properties”以保存与构建开发环境产品相关的所有参数。）...希望这会有所帮助..

# matlab - 非对称高斯滤波器 - 水平和垂直滤波器的不同尺寸和 STD

> ID：15238413
> 
> 赞同：5
> 
> 时间：2013-03-06T03:26:10.480
> 
> 标签：matlab, image-processing, filtering, convolution, gaussian

我现在想使用**非对称高斯滤波器**内核来使用 MATLAB 平滑图像，因为我不希望垂直和水平的平滑度相同（**高斯模式的大小和标准偏差不同**）。但我找不到完成这项工作的系统功能。该功能`fspecial()`似乎不支持此功能。

那么，我该如何实现这个过滤器呢？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T07:11:53.433

**您可以分别**应用水平和垂直过滤。

```
v = fspecial( 'gaussian', [11 1], 5 ); % vertical filter
h = fspecial( 'gaussian', [1 5], 2 ); % horizontal
img = imfilter( imfilter( img, h, 'symmetric' ), v, 'symmetric' ); 
```

此外，您可以使用外部产品“组合”这两个过滤器

```
f = v * h; % this is NOT a dot product - this returns a matrix!
img = imfilter( img, f, 'symmetric' ); 
```

PS
如果您正在寻找定向过滤，您可能需要考虑`fspecial('motion'...)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T04:32:41.843

您可以使用`fspecial`扭曲，例如：

```
 H= fspecial('gaussian',15,2) ;
 H2=imresize(H,[1.5*size(H,1) size(H,2)]);
 Img=conv2(Img,H2,'same'); 
```

在滤波器上使用`imresize`允许控制高斯的 x 与 y 轴不对称。类似地，您可以使用任何类型的图像转换（参见`imtransform`），您可以想象到倾斜拉伸等...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T04:15:40.067

您可以通过多次应用 Box 滤波器来近似高斯滤波器。由于高斯是可分离的，因此您可以在两个维度上分别执行此操作。一维的盒式过滤器是对线性像素段的简单平均。我对matlab一无所知，但我认为它可以做到这一点。如果matlab可以做矩形过滤器，你甚至不需要分开它。

有关近似高斯的更多详细信息，请参见[http://nghiaho.com/?p=1159](http://nghiaho.com/?p=1159)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-17T23:33:29.340

您可以使用 MATLAB 的`conv2()`函数，该函数支持可分离滤波器，而且比`imfilter()`.

所以它会是这样的：

```
v = fspecial( 'gaussian', [11 1], 5 ); % vertical filter
h = fspecial( 'gaussian', [1 5], 2 ); % horizontal
mO = conv2(v, h, mI); 
```

`mI`输入图像在哪里`mO`，输出在哪里。

# java - Java 'T extends' 'hello-world' 不会编译

> ID：15238418
> 
> 赞同：0
> 
> 时间：2013-03-06T03:26:36.103
> 
> 标签：java, generics

```
class root { public void say() { System.out.print("hello\n"); }}
class A extends root { @Override public void say() { System.out.print("world A\n"); }}
class B extends root { @Override public void say() { System.out.print("world B\n"); }}
//abstract class C extends <T> { public void go() { say(); say(); }}
class C <T extends root> { public void go() { say(); say(); }}

public class Template { public static void main(String[] args) {
    C c = new C<A>(); c.say();
    D d = new C<B>(); d.say();
}} 
```

我需要将扩展​​ A 和 B 的 C 类。（在现实生活中，它们将是水平（A）和垂直（B）滚动视图）。但这不会编译。我浏览了几十个你可以在网上找到的例子，但是这两个例子都不是可编译的程序，它们只会让我越来越困惑。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:27:30.387

`C`类没有`say`方法，因此代码永远不会编译。另外，好像没有`D`课。

为了使它编译，`C`应该扩展`root`或者`C`应该有一个`say`方法。

有问题的代码行：

```
class C <T extends root> { public void go() { say(); say(); }}

C c = new C<A>(); c.say(); 
```

您可以将代码修改为此以使其运行：

```
class C <T extends root> {

    T element;

    public C(T element) { this.element = element; }

    public go() { element.say(); }
}

//...

C c = new C<A>(new A()); c.go(); 
```

如[Perception 的评论](https://stackoverflow.com/questions/15238418/java-t-extends-hello-world-wont-compile#comment21485920_15238418)中所述，您应该查看 Oracle 提供的[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)教程以更好地理解此事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:30:56.770

当你说`class C<T extends root>`这**并不**意味着`C`extends `root`。

这意味着这`C`是一个具有类型参数的类`T`，它扩展了`root`。

这意味着一个`C`对象可以接受任何扩展的类作为类型参数`root`。

是否`C`扩展`root`自身是完全不相关的。

要进行`C`extend `root`，您只需使用以下命令：`class C extends root`

在您的示例中，类型参数的用途尚不清楚（即您从不使用 T）。

# php - 检查第一个数组中的值是否在第二个数组中，然后创建第三个数组

> ID：15238419
> 
> 赞同：0
> 
> 时间：2013-03-06T03:26:43.067
> 
> 标签：php, arrays

1) 将复选框数组发布到 php 2) 比较 POSTED 数组以查看是否在主数组中。3）如果是，则在新数组中添加“1” 4）如果它不在主数组中，则在新数组中添加“0”

这是我所拥有的：

```
$posted_array = array("8", "9", "12", "17");

$master_array = array("8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20");

$db_input_array = array();

foreach($master_array as $key => $array_value) {
    foreach($posted_array as $posted_key => $posted_value) {
        if($array_value == $posted_value) {
            $db_input_array[$array_value] = "1"; 
        } else {
            $db_input_array[$array_value] = "0"; 
        }
    }
}

print_r($db_input_array); 
```

期望的结果：

```
Array ( 
  [8] => 1 
  [9] => 1 
  [10] => 0 
  [11] => 0
  [12] => 1
  [13] => 0
  [14] => 0
  [15] => 0
  [16] => 0
  [17] => 1
  [18] => 0
  [19] => 0
  [20] => 0
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:29:12.150

```
$db_input_array = array();
foreach($master_array as $m){
   if(in_array($m, $posted_array)){
      $db_input_array[$m]=1;
   }else{
      $db_input_array[$m]=0;
   }
} 
```

[http://codepad.org/NaW5zHe5](http://codepad.org/NaW5zHe5)

# eclipse - 无法在 Eclipse 中的 heroku 项目中创建 servlet

> ID：15238420
> 
> 赞同：0
> 
> 时间：2013-03-06T03:27:01.460
> 
> 标签：eclipse, servlets, heroku, eclipse-plugin

我开始使用 Eclipse 的**Heroku 插件**。我在我的 Eclipse Juno 4.2 中创建了一个 Heroku 项目。我从 Heroku 的可用模板列表中选择了**jetty框架模板。**

现在，当我尝试为我的 Heroku 项目创建一个新的 Servlet 时，我在选择项目下拉框中看不到我的项目名称。当我尝试使用 Google App Engine 插件创建项目时遇到了类似的问题。

我想创建一个 Web 应用程序，它有两个 Servlet 和几个我想使用 Jersey API 创建的 RESTFUL WebServices。我可以很容易地为动态 Web 项目创建这些。

有没有办法使用 Heroku Project for Eclipse 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:41:11.247

要在 Eclipse 中使用***New Servlet Wizard***，您尝试选择的项目必须是 webtools faceted 项目（由 Dynamic Web 项目向导创建）。它不能添加到普通的 java 项目中。***您可以通过右键单击并选择项目构面***并单击***转换为构面形式***链接将现有项目转换为构面 Web 项目。然后选择***动态 web 模块***方面。然后单击***可用的进一步配置***以选择 docroot 等。

# c# - C# 不捕获执行非查询异常

> ID：15238422
> 
> 赞同：0
> 
> 时间：2013-03-06T03:27:11.493
> 
> 标签：c#, sql

我有这段代码调用存储过程以将数据“插入”到 SQL 中的表中。

```
using (SqlConnection connection = new SqlConnection(Global_Variables.DBcon))
{
    SqlCommand cmd = new SqlCommand("sp_WinApps_Import_ERData", connection);
    cmd.CommandType = CommandType.StoredProcedure;
    connection.Open();
    try
    {
        cmd.ExecuteNonQuery();
        Console.WriteLine("file imported!");
    }

    catch (SqlException ex)
    {
        Console.WriteLine("BATCH ID ALREADY EXISTS!" + ex.Message );
    }
    finally
    {
        connection.Close();
    }
} 
```

但问题是，它没有捕捉到“try-catch 方法”中的错误，我不知道为什么，但我的代码是正确的。

错误说：“违反 UNIQUE KEY 约束 'Cons_BatchID'。无法在对象 'dbo.tbl_WinApps_FileHeader' 中插入重复键。超时已过期。在操作完成之前超时时间已过或服务器没有响应。该语句已终止。”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T04:08:11.550

我解决了伙计们。转到调试>异常，我只是在公共语言运行时异常中“未选中抛出的复选框”

# xml - SAPI语法识别

> ID：15238423
> 
> 赞同：1
> 
> 时间：2013-03-06T03:27:19.407
> 
> 标签：xml, delphi, delphi-7, sapi

我正在设计一个能够在 Delphi7 上识别声音的应用程序

我对代码没有任何问题...只是我无法或更确切地说无法找到如何使这个我识别英语以外的语言...我吃了每个论坛..我知道寻找一些可以告诉我的东西。我尝试更改 GRAMMAR C0A LANGID 无济于事 安装其他语言 ...如果有人遇到此问题并想与我分享，我仍然无法让我的应用程序识别西班牙语一些解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:36:11.360

您是否安装了合适的语言识别器？识别器是 Windows 7、Windows 8 和 Vista 语言包的一部分。

据我所知，Microsoft 没有 SAPI 5.1（适用于 Windows XP）的西班牙语识别器。

# ios - 子类化 MKMapView 以提供自定义地图？

> ID：15238424
> 
> 赞同：0
> 
> 时间：2013-03-06T03:27:24.043
> 
> 标签：ios, maps, mkmapview, mapkit, geospatial

我想在我的 iOS 6 应用程序中提供自定义导航地图。我尝试添加显示这些自定义地图的叠加视图，`MKMapView`但效果不佳，因为它需要比 Apple 组件提供的缩放级别更高的缩放级别（所需的缩放级别约为地图中每米 10 个屏幕点）。

问题是，子类化是解决这个问题`MKMapView`的好方法吗？主要原因是我想利用`MKMapView`的坐标转换功能：

*   `convertCoordinate:toPointToView:`
*   `convertPoint:toCoordinateFromView:`
*   `convertRegion:toRectToView:`
*   `convertRect:toRegionFromView:`

这些功能可以轻松地将屏幕点转换为世界坐标（纬度/经度），反之亦然。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:40:27.433

我认为子类化 MKMapView 不会很幸运。与您无法访问的磁贴加载相关的幕后发生了很多事情。

我猜你会更好地使用[MapBox iOS SDK](http://mapbox.com/mobile/)或其他类似地图引擎的东西。

它允许您指定自己的图块来源，并有大量示例向您展示它是如何完成的。它还具有诸如地图工具包之类的功能来处理与纬度/经度之间的值转换。

# python-2.7 - python中的随机游走代码[2维]

> ID：15238426
> 
> 赞同：-1
> 
> 时间：2013-03-06T03:27:37.717
> 
> 标签：python-2.7, python-3.x

请你帮我弄清楚我的代码有什么问题。我正在尝试编写一个程序，该程序在二维中生成随机行走，并确定行走次数为 1000、最大步长为 0.9、两个位置之间的间隔为 500 步后步行者位置的统计信息0.001。

```
import math
import random
import time

print "RANDOM WALKS ANALYSIS IN ONE DIMENSION"
NOFW_ = 1000 #The number of walks 
NOFS_= 500 #The number of steps in each walk
MSS_ = 0.9 # The maximum step size[m]
SOFP_ = 0.001  # The separation of positions considered equal[m]

print "                         Number of walks: %3g"% NOFW_
print "            Number of steps in each Walk: %3g"% NOFS_
print "                       Maximum step size: %3g"% MSS_,"m"
print "Separation of positions considered equal: %3g"% SOFP_,"m"
print
print "Please wait while random walks are generated and analyzed..."
print "Date:" + time.ctime()
print

def initialPosition():
    return (0.0, 0.0)

def distance(posA, posB):
    """Calculates the distance between two positions posA and posB"""
    distance = math.sqrt((posB[0] - posA[0])**2 + (posB[1] - posA[1])**2)
    return distance

def printstats(description, numbers):
    minimum_value_ = min(numbers) 
    numbers.sort()
    Tenth_percentile = abs(0.10*len(numbers) + 0.5)
    Mean_value_ = (1./float(len(numbers))*sum(numbers))
    A = 0
    for values in numbers:
        B = distance(values, Mean_value_)
        B = B**2
        A = B + A
    Standard_deviation = math.sqrt((1./(len(numbers)-1))*A)
    Newposition_ = int(0.90*(len(numbers) + 0.5))
    Ninetieth_percentile =numbers[Newposition_]
    maximum_value_ = max(numbers)

    print "Analysis for"""+ description
    print "Minimum value: %9.1f" % minimum_value_
    print "10th percentile: %7.1f" % Tenth_percentile
    print "Mean value: %12.1f" % Mean_value_
    print "Standard deviation: %4.1f" % Standard_deviation
    print "90th percentile: %7.1f" % Ninetieth_percentile
    print "Maximum value: %9.1f" % maximum_value_

    list_1 = [minimum_value_, Tenth_percentile, Mean_value_, Standard_deviation, Ninetieth_percentile,maximum_value_]
    return list_1

def takeStep(prevPosition, maxStep):
    x = random.random()
    y = random.random() 
    minStep = -maxStep
    Z = random.random()*2*math.pi
    stepsize_ = random.random()*0.9
    Stepx= stepsize_*math.cos(Z)
    Stepy= stepsize_*math.sin(Z)
    New_positionx = prevPosition[0] + Stepx
    New_positiony = prevPosition[1] + Stepy
    return (New_positionx, New_positiony) 

Step_100 = []
Step_500 = []
count_list = []
for walk in range(NOFW_):
    Step1 = []
    Position = (0.0,0.0)
    count = 0
    for step in range(NOFS_):
        Next_Step_ = takeStep(Position, MSS_)
        for word in Step1:
            if distance(Next_Step_, word) <= SOFP_:
                count +=1 
        position = Next_Step_
        Step1.append(Next_Step_)
    Step_100.append(Step1[-1])
    Step_500.append(Step1[-1])
    count_list.append(count)

Step_100 = printstats("distance from start at step 100 [m]", Step_100)
Step_500 = printstats("distance from start at step 500 [m]", Step_500)
count_list = printstats("times position revisited", count_list) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:41:36.613

你的问题在这里

```
Mean_value_ = (1./float(len(numbers))*sum(numbers)) 
```

`sum()`应该得到一些数字，但您的变量`numbers`实际上包含一些 2 个值的元组

您可能希望为 2 个数字的元组定义自己的 sum 函数，或者分别对第一个值和第二个值求和

# windows - Microsoft Web 浏览器 ActiveX 控件 - 打印到指定的（非默认）打印机

> ID：15238431
> 
> 赞同：2
> 
> 时间：2013-03-06T03:28:21.987
> 
> 标签：windows, printing, mfc, webbrowser-control

我在本机 C++/Win32/MFC 对话框应用程序中使用 MS Web Browser ActiveX 控件通过 HTML 呈现一些信息。

我想在没有任何用户交互的情况下打印内容到指定的打印机（这不是默认打印机）。我想使用的打印机是 PDF 打印机。

我正在使用来自 Code Project 的一个不错的包装类，它使使用 Web 浏览器控件更容易一些（[http://www.codeproject.com/Articles/3919/Using-the-WebBrowser-control-simplified](http://www.codeproject.com/Articles/3919/Using-the-WebBrowser-control-simplified)）和其中之一包装器提供的东西是打印。它提供了一种使用 ExecWB(OLECMDID_PRINT,OLECMDEXECOPT_DONTPROMPTUSER,...) 来启动打印内容的打印方法。

这很有效，并且无需任何用户交互即可将控件的内容打印到默认打印机。

然后，挑战是让它使用与默认打印机不同的打印机。我最初的尝试是调用 ::SetDefaultPrinter ( [http://msdn.microsoft.com/en-us/library/windows/desktop/dd162971(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162971(v=vs.85).aspx) )。这似乎不起作用。看起来，尽管调用了 ::SetDefaultPrinter，Web 浏览器 ActiveX 控件仍会打印到系统默认打印机。就好像它忽略了这个调用所做的一切。

我尝试按照 MSDN 链接中的建议广播系统设置更改消息，并直接将其发送到浏览器窗口，没有任何运气。

有什么想法可以让 Web 浏览器 activex 控件打印我指定的打印机而不是使用默认打印机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:15:40.323

**除了**您的所有步骤之外，我所做的是在 IE 注册表中设置打印机，这里：

```
HKCU\Software\Microsoft\Internet Explorer\PageSetup\printer="the required printer name" 
```

并在打印后恢复一切

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:08:40.177

我让它工作了。问题的原因不是浏览器控件打印到错误的打印机，而是打印操作（通过 ExecWB）是异步执行的。因此，我将默认打印机设置为 PDF 打印机，然后启动打印，然后恢复原始默认打印机。这发生得很快，以至于当异步打印操作准备好时，原来的默认打印机再次设置为默认打印机，因此它转到了该打印机。

解决方法是将默认打印机设置为 PDF 打印机，启动打印，然后等待打印完成回调。一旦收到回调，它就会恢复原来的默认打印机。

如果您在 Code Project 上使用 Gary Wheeler 出色的 Web 浏览器控件（请参阅[此处](http://www.codeproject.com/Articles/3919/Using-the-WebBrowser-control-simplified "这里")），那么很容易获得打印完成回调，您只需覆盖虚拟 OnPrintTemplateTeardown() 方法。

# python - 如何使用while循环计算python代码中的条目数？

> ID：15238432
> 
> 赞同：3
> 
> 时间：2013-03-06T03:28:27.963
> 
> 标签：python, input, for-loop, while-loop

我正在为我的 Python 入门编程课做家庭作业，但我遇到了一个问题。指示是：

> 修改 find_sum() 函数，使其打印输入值的平均值。与之前的 average() 函数不同，我们不能使用 len() 函数来求序列的长度；相反，您必须引入另一个变量来“计算”输入的值。

我不确定如何计算输入的数量，如果有人能给我一个好的起点，那就太好了！

```
# Finds the total of a sequence of numbers entered by user 
def find_sum(): 
     total = 0 
     entry = raw_input("Enter a value, or q to quit: ") 
     while entry != "q": 
         total += int(entry) 
         entry = raw_input("Enter a value, or q to quit: ") 
     print "The total is", total 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:30:02.960

每次读取输入`total += int(entry)`时，您应该立即增加一个变量。

`num += 1`在其他地方将其初始化为 0 之后，所需要的就是这些了。

`while`确保循环中所有语句的缩进级别相同。您的帖子（如最初所写）没有反映任何缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:34:40.023

正如@BlackVegetable 所说，您始终可以使用迭代计数器：

```
# Finds the total of a sequence of numbers entered by user 
def find_sum(): 
     total, iterationCount = 0, 0 # multiple assignment
     entry = raw_input("Enter a value, or q to quit: ") 
     while entry != "q": 
         iterationCount += 1
         total += int(entry) 
         entry = raw_input("Enter a value, or q to quit: ") 
     print "The total is", total 
     print "Total numbers:", iterationCount 
```

或者，您可以将每个数字添加到列表中，然后打印总和和长度：

```
# Finds the total of a sequence of numbers entered by user
def find_sum(): 
     total = []
     entry = raw_input("Enter a value, or q to quit: ") 
     while entry != "q": 
         iterationCount += 1
         total.append(int(entry))
         entry = raw_input("Enter a value, or q to quit: ") 
     print "The total is", sum(total)
     print "Total numbers:", len(total) 
```

# x509 - 从颁发的证书中删除 x.509 v3 扩展

> ID：15238436
> 
> 赞同：3
> 
> 时间：2013-03-06T03:28:37.960
> 
> 标签：x509

我需要制作轻量级 PKC，因为我想从用户证书中删除 x509 v3 扩展。我可以使用这个 openssl 命令删除 v3 扩展吗？

openssl x509 -in /usr/local/openca/var/openca/crypto/certs/E841B2655206FA6A3ADA.pem -noout -text -certopt no_extensions -out /usr/local/openca/var/openca/crypto/certs/ -out E841B2655206FA6A3ADA_nov3ext。佩姆

或者我应该在哪里进行更改以生成 x509 v1 证书，因为它不包含 x509 扩展。能否请您提供一个链接以供参考。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T20:53:04.133

通常（嗯，几乎*总是*真的！）签名不仅仅涵盖证书上的专有名称；但也包括其他所有内容（序列号、有效期等）。

因此，虽然将证书缩小到一定大小并不难，但它会立即使颁发者的签名无效。

但是-在某些情况下，可以做其他事情-那就是完全分配/忽略证书的签名部分；并且只关注公钥。

使用类似的东西

```
cat somecert.pem | openssl x509 -pubkey -nout 
```

只获取公钥。所以放弃所有的 X509，本质上不再有 PKI。只是一对原始公钥和私钥。

然后在你的应用程序中犯下相当不可原谅的错误，即发明你自己的加密货币——并让该公钥的所有者用它的私钥签署类似 NONCE 的东西；并验证签名。例如

```
# the 'server' sends a nonce to the client
openssl rand -base64 128 > send-to-client 
```

然后在客户端上签名

cat 来自服务器的消息 | openssl pkeyutl -inkey privkey.pem -sign | base64 > 发送到服务器

在服务器上我们检查这个

```
cat msg-from-client | openssl pkeyutl -in pubkey-of-client.pem -verify 
```

并在那里取东西。然而，除非你是一个出色的密码学家和协议设计者，否则像这样的方案（当然也有！）充满了缺陷和陷阱。

但从理论上讲，它确实让您只使用几 1000 字节的 RSA 密钥；或几个 100 字节的基于椭圆曲线的密钥。

# c# - 类型化数据表 - 使用 linq 查找 int 数组

> ID：15238439
> 
> 赞同：-1
> 
> 时间：2013-03-06T03:29:02.973
> 
> 标签：c#, linq

如何使用 linq 查询类型化数据表以查看它包含任意数量的已定义数组。

```
string[] arInts = {1, 2, 3}; 
```

我想查询该表并查找它是否包含数组**arInts中的任何数字**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:37:26.843

这看起来像这里的问题：

[Linq to Entities - SQL“IN”子句](https://stackoverflow.com/questions/857973/linq-to-entities-sql-in-clause) 以下查询应该有效：

```
var q = from t in tableName
               where arInts.Contains(t.fieldName)
               select t; 
```

# c++ - 初始化程序列表在 Visual Studio 2012 Update 2 CTP 4（3 月）中不起作用

> ID：15238442
> 
> 赞同：0
> 
> 时间：2013-03-06T03:29:27.917
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, initializer-list

安装 Visual Studio 2012 Update 2 CTP 4（3 月）后，此代码无法编译：

```
vector<int> b = {1, 2, 3}; 
```

带有以下错误消息：

```
'std::vector<_Ty>' : Types with a base are not aggregate 
```

较早的帖子关于使用 initializer_list 标头提到的先前 CTP 的相同问题，但 CTP 4 没有安装它。任何建议如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T06:26:18.750

编译器支持初始化列表，但标准库（std::vector 等）不支持。在您的行编译之前，您将不得不等待。

# java - 在 Android 应用中同步数据

> ID：15238443
> 
> 赞同：1
> 
> 时间：2013-03-06T03:29:40.117
> 
> 标签：java, android

我正在开发一个应用程序，它通过 JSON 在几乎每个 Activity 中同步不同的数据。这些数据可能会被其他设备操纵，所以我必须尽可能保持更新。

例如，在第一个 Activity 中我登录到 Web 服务，在下一个 Activity 中我使用 AsyncTask 下载一个 JSON，告诉我商店中的所有汽车型号，并使用该信息创建一个 ListView。单击一行，我调用另一个 AsyncTask 来下载关于那辆车的特定信息 (JSON)，并获取例如关于它的轮胎的信息。在下一个活动中，我将调用另一个 AsyncTask 来获取有关这些轮胎的特定信息。大多数时候，在下一个 Activity 中使用的所需信息存储在 SharedPreferences 中，因为我不知道如何在整个应用程序中访问 ArrayList，而且我不知道它是否会占用大量 RAM。如果通过应用程序共享这么多对象是个好主意。

可以看到，每次我的 Activity 重新加载时，AsyncTask 都会检查连接并下载要显示的新数据。该服务不支持推送，所以我想我有责任每次都检查它，对吗？

要考虑的另一件事是可以更改下载的数据，在这种情况下，我必须上传 JSON，并相应地刷新视图。在这方面，我不知道如何保存连接断开时要上传的“更改”。比如，创建一个未同步任务的队列列表。

结果是一个严重依赖互联网连接的应用程序，每次恢复活动时都会感觉很慢。

在大多数情况下，我实例化了一个新的 ArrayList 对象（汽车、轮胎等），但是如果现在一切都是对象，我很困惑如何在 JSON 中正确同步数据。也许使用GJON？

我真的需要一些关于如何管理这样的应用程序的提示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:39:34.920

只是我的想法很快。因为我有 2 个非常相似的应用程序......即，与在线服务/数据库紧密耦合。

你真的需要一个使用 sqlite 的本地数据库。

这是我建议您如何处理当前从服务器下载数据以显示的每个活动的示例：

1）您可以做的是每次加载屏幕时，例如“ `ListCarsActivity`”`onResume()`运行时，您需要首先调用您的本地数据库，获取您最近的数据，然后将这些结果显示到屏幕，您的`ListView`等。这将提供更快的反馈给用户。

2）在此之后，`onResume()`您需要调用一个 WebService 对象说`WSGetCars`这将启动一个`Async`任务**A）**连接到服务器，下载 JSON/XML，解析数据并更新数据库（添加或更新等）**B）**通过有权访问活动的帮助器对象重新运行数据库调用，以使用新数据刷新列表。

简而言之：

1.  加载屏幕，并使用本地 FAST 数据库汽车列表填充列表
2.  立即异步下载更新的汽车数据并同步本地数据库
3.  刷新汽车列表。

您可以在整个应用程序中使用此原则。

您是否使用我对 Web 服务对象的建议取决于您。但我通常有调用 WS 对象下载的 Activity，然后使用 XML 解析对象等。

希望这在概念层面有所帮助

**注意：**您还需要一个简单的 IF 语句围绕每个 WS/Async 调用，因此应用程序不会尝试连接到服务器，除非您有 Internet 连接。允许您的应用在“离线”时显示仍在工作（可能是过时的数据）。

关于登录屏幕：您可以`SharedPreferences`在每次加载 onResume() 时检查他们是否已经登录，如果已登录，则自动加载系统的内部页面。我的应用程序不允许在没有互联网连接的情况下登录。因此，如果在最后一个状态下他们已经登录，这允许应用程序仍然工作。

# django - Windows 中的 Django + GAE + Google Cloud SQL 身份验证问题

> ID：15238446
> 
> 赞同：2
> 
> 时间：2013-03-06T03:29:49.820
> 
> 标签：django, windows, google-app-engine, oauth, google-cloud-sql

我已经完成了使用 GAE + Google Cloud SQL（在 Windows 7 上）配置 Django 所需的所有[步骤](https://developers.google.com/appengine/docs/python/cloud-sql/django)，但我无法进行身份验证（OAuth2）并远程运行 syncdb。当我运行 manage.py syncdb 时，浏览器会弹出并要求我允许访问，但是当我这样做时，什么也没有发生。浏览器已正确转发到我的本地 django 安装（典型的 It works! 屏幕），但 %USERPROFILE%\ 中没有 OAuth2 令牌，并且控制台被冻结：

```
C:\Users\me\myproject>python manage.py syncdb
Your browser has been opened to visit:

    https://accounts.google.com/o/oauth2/auth?state=None&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F&response_type=code&client_id=my_id.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fsqlservice&access_type=offline

If your browser is on a different machine then exit and re-run this
application with the command-line parameter

  --noauth_local_webserver 
```

没有错误消息，我必须终止控制台。

有人遇到过类似的问题吗？我可以检查 GAE 中的某处日志吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T11:35:43.290

我遇到了同样的问题，但这是因为我在运行 manage.py syncdb 时运行了本地 appengine 服务器。将其关闭并再次尝试按预期工作。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:56:25.847

我有同样的问题，只在 OS X 上。

我一直不知道为什么，但是重启后它就消失了。

# java - Eclipse 中的自动激活

> ID：15238447
> 
> 赞同：0
> 
> 时间：2013-03-06T03:29:53.547
> 
> 标签：java, myeclipse

这是 MyEclipse 的一个问题。当我输入“。”时 在一些变量之后，例如`list.size()`，过去 Eclipse 自动向我建议了所有可能的方法和选项。但是现在这个功能不起作用了。而且我已经在 Eclipse 首选项中启用了自动激活选项。MyEclipse 版本 = 10.7.1

如果有人知道这个问题，请建议我如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:45:08.173

检查内容辅助触发器的值。

![自动激活触发器](../Images/c8ef19309b56aa693471c5a7bba44ecf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:44:46.037

由于我没有您的所有 Eclipse 设置，我建议您转到`Preference`-> `Java`-> `Editor`->`Content Assist`并单击`Restoring Defaults`。

# android - Android的调试日志真的在运行时被剥离了吗？

> ID：15238450
> 
> 赞同：13
> 
> 时间：2013-03-06T03:30:18.993
> 
> 标签：android, performance

Android 文档 ( [http://developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html) ) 说：

> 除非在开发期间，否则永远不应将详细信息编译到应用程序中。调试日志被编译，但在运行时被剥离。始终保留错误、警告和信息日志

我刚刚做了一个测试。在我的活动中，我写道：

```
private static String test(String what) {
    Log.e("test", "I am called with argument: " + what);
    return what;
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.v("test", "log level: " + test("v"));
    Log.d("test", "log level: " + test("d"));
    Log.i("test", "log level: " + test("i"));
    Log.w("test", "log level: " + test("w"));
    Log.e("test", "log level: " + test("e"));
} 
```

我将我的项目导出为 apk 文件，然后我在手机上安装了这个 apk。我在手机上运行此应用程序，然后查看日志。在那里，我看到函数测试被调用了五次，并且对 Log.something 函数的所有五次调用都导致其文本被写入日志。

那么 Log.d 调用真的在运行时被剥离了吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T04:02:26.093

不，你必须自己做。您可以像这样制作自己的 Log.d 包装器：

```
public static void debug(String tag, String msg) {
    if (BuildConfig.DEBUG) {
        Log.d(tag, msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T05:11:37.970

[此处](http://code.google.com/p/android/issues/detail?id=14015)报告了此问题，并于 2012 年 3 月在[ADT 17.0.0](http://developer.android.com/tools/sdk/eclipse-adt.html#)中提供了解决方案

> 添加了一项功能，允许您仅在调试模式下运行某些代码。构建现在会生成一个名为 BuildConfig 的类，其中包含一个根据您的构建类型自动设置的 DEBUG 常量。您可以检查代码中的 (BuildConfig.DEBUG) 常量以运行仅调试功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T15:07:56.093

删除日志的最佳方法可能是使用[ProGuard实现](http://proguard.sourceforge.net/)

检查这个问题' [Android Proguard，删除所有日志语句和合并包](https://stackoverflow.com/questions/4435773/android-proguard-removing-all-log-statements-and-merging-packages)'

# php - 这两行 PHP 有什么不同吗？

> ID：15238451
> 
> 赞同：3
> 
> 时间：2013-03-06T03:30:21.607
> 
> 标签：php

我正在查看代码库。这是其中一条线。

```
require_once( dirname(__FILE__) . '/a_script.php' ); 
```

我正在考虑将其重写为：

```
require_once( './a_script.php' ); 
```

这两行代码有什么不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:33:46.477

是的，它们是不同的。第二个是相对于工作目录的，它并不总是与当前执行文件所在的目录相同。

大多数情况下，工作目录是*原始文件*的目录。如果您在另一个文件包含的文件中运行 require_once，则路径是相对于第一个文件的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T03:42:17.690

他们有一些不同的

```
// '/dir/index.php'
require_once( dirname(__FILE__) . '/script.php' ); // '/dir/script.php'
require_once( './script.php' ); // '/dir/script.php'

chdir('/')
require_once( dirname(__FILE__) . '/script.php' ); // '/dir/script.php'
require_once( './script.php' ); // '/script.php' 
```

# javafx-2 - JavaFX：在控制器中使用 setOnCloseRequest 的问题

> ID：15238452
> 
> 赞同：0
> 
> 时间：2013-03-06T03:30:31.480
> 
> 标签：javafx-2

我想在我的阶段开始后使用 setOnCloseRequest 但是我几乎得到了 NullPointerException 尽管我设置了正确的控制器。

我点击一个菜单项打开舞台，菜单打开后我想使用关闭按钮。我认为该方法会尝试访问，直到控制器被初始化。实际上我想说：请控制器，您在初始化后才被允许做某事。

![在此处输入图像描述](../Images/b1168c4a1f7f9009ef2b47d4b3c28136.png)

这是我的控制器代码。

```
 if (KundenDatenController.getInstance() != null) {

        ((Stage) (KundenDatenController.getInstance().kundenControllerPane.
                getScene().getWindow())).setOnCloseRequest(new EventHandler<WindowEvent>() {
            @Override
            public void handle(WindowEvent t) {
                t.consume();
                if (generalControler.controlEmptyTextField(pflichtfelder)) {
                    ((Stage) (kundenControllerPane.getScene().getWindow())).close();

                } else if (!generalControler.controlEmptyTextField(pflichtfelder)) {
                    FXOptionPane.showConfirmDialog((Stage) (kundenControllerPane.getScene().getWindow()),
                            "Sollen die Eingaben wirklich verworfen werden?",
                            "Programm schliessen");
                    if (status.equals("Laden")) {
                        KundenUebersichtController.getInstance().setStatus("Aufnehmen");
                    }
                }
            }
        }); 
```

# regex - * 是什么意思？在正则表达式中？

> ID：15238453
> 
> 赞同：1
> 
> 时间：2013-03-06T03:30:33.553
> 
> 标签：regex

我已经多次遇到一些具有正则表达式的代码：

```
\((\X*?)\) 
```

匹配括号中的所有内容。如果 * 重复 0 次或更多次并且 ? 是零或一次，两者兼有似乎无关紧要。是 *？等同于 * 或者两者结合有什么特殊含义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T03:32:23.880

`?`之后`+`or`*`使该运算符*non-greedy*，也就是说，它将尝试匹配*最小*次数而不是*最大*次数。

例如，`{hi}{there}`与可能不合需要`{(.*)}`的组匹配。`hi}{there`使用 non-greedy可以根据需要`{(.*?)}`提供匹配`hi`项`there`。

# php - 在 php 5 上打开 dom_xml 功能

> ID：15238461
> 
> 赞同：0
> 
> 时间：2013-03-06T03:30:55.077
> 
> 标签：php, mysql, google-maps

我正在尝试使用 php 和 mysql 以及谷歌地图实现商店定位器我已经阅读了这篇文章“ [https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3) ”它说**“检查您的配置或尝试初始化 domxml_new_doc（ ) 来确定您的服务器的 PHP 是否启用了 dom_xml 功能。** ”但显然我的没有启用，因为它给了我这个错误：“**致命错误：调用 C:\wamp\www\StoreLocator\phpsqlajax_genxml 中的未定义函数 domxml_new_doc()。第 5 行的 php** " 我正在使用 php 5，但我不确定如何打开它。请帮我谈谈你的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:44:27.547

[这个问题](https://stackoverflow.com/q/4753171/2110460)可能有助于回答您的问题。

您确定要走 XML 路线而不是 JSON 路线吗？

# image - 处理图像 - opencv

> ID：15238464
> 
> 赞同：0
> 
> 时间：2013-03-06T03:31:20.660
> 
> 标签：image, process

我有下面的代码（使用 VS2010、C++、Windows 窗体应用程序）：

```
#pragma once
#include <cv.h>
#include <highgui.h>

#ifdef _DEBUG
//debug
#pragma comment(lib,"cv210d.lib")
#pragma comment(lib,"cxcore210d.lib")
#pragma comment(lib,"cvaux210d.lib")
#pragma comment(lib,"highgui210d.lib")
#else
//release
#pragma comment(lib,"cv210.lib")
#pragma comment(lib,"cxcore210.lib")
#pragma comment(lib,"cvaux210.lib")
#pragma comment(lib,"highgui210.lib")
#endif
//Global variables
IplImage* src = NULL;
IplImage* hsv = NULL;
IplImage* dst = NULL;
IplImage* v_plane = NULL;
IplImage* h_plane = NULL;
IplImage* s_plane = NULL;

namespace HW4 {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::PictureBox^  pictureBox1;
protected: 
private: System::Windows::Forms::PictureBox^  pictureBox2;
private: System::Windows::Forms::Button^  ExitButton;

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->pictureBox1 = (gcnew System::Windows::Forms::PictureBox());
        this->pictureBox2 = (gcnew System::Windows::Forms::PictureBox());
        this->ExitButton = (gcnew System::Windows::Forms::Button());
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBox1))->BeginInit();
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBox2))->BeginInit();
        this->SuspendLayout();
        // 
        // pictureBox1
        // 
        this->pictureBox1->Location = System::Drawing::Point(12, 49);
        this->pictureBox1->Name = L"pictureBox1";
        this->pictureBox1->Size = System::Drawing::Size(255, 212);
        this->pictureBox1->SizeMode = System::Windows::Forms::PictureBoxSizeMode::StretchImage;
        this->pictureBox1->TabIndex = 0;
        this->pictureBox1->TabStop = false;
        // 
        // pictureBox2
        // 
        this->pictureBox2->Location = System::Drawing::Point(354, 49);
        this->pictureBox2->Name = L"pictureBox2";
        this->pictureBox2->Size = System::Drawing::Size(255, 212);
        this->pictureBox2->SizeMode = System::Windows::Forms::PictureBoxSizeMode::StretchImage;
        this->pictureBox2->TabIndex = 1;
        this->pictureBox2->TabStop = false;
        // 
        // ExitButton
        // 
        this->ExitButton->Location = System::Drawing::Point(272, 278);
        this->ExitButton->Name = L"ExitButton";
        this->ExitButton->Size = System::Drawing::Size(64, 31);
        this->ExitButton->TabIndex = 2;
        this->ExitButton->Text = L"Exit";
        this->ExitButton->UseVisualStyleBackColor = true;
        this->ExitButton->Click += gcnew System::EventHandler(this, &Form1::ExitButton_Click);
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(635, 333);
        this->Controls->Add(this->ExitButton);
        this->Controls->Add(this->pictureBox2);
        this->Controls->Add(this->pictureBox1);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->Load += gcnew System::EventHandler(this, &Form1::Form1_Load);
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBox1))->EndInit();
        (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBox2))->EndInit();
        this->ResumeLayout(false);

    }
#pragma endregion
private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
              src = cvLoadImage("D:\\Pictures\\hungry.jpg");
              dst = cvCreateImage(cvGetSize(src),8,3);
              hsv = cvCreateImage(cvGetSize(src),8,3);
              h_plane = cvCreateImage(cvGetSize(src),8,1);
              s_plane = cvCreateImage(cvGetSize(src),8,1);
              v_plane = cvCreateImage(cvGetSize(src),8,1);

             cvCvtColor(src,hsv,CV_BGR2HSV);
             cvSplit(hsv,h_plane,s_plane,v_plane,0);
             cvEqualizeHist(v_plane,v_plane);
             cvMerge(h_plane,s_plane,v_plane,0,hsv);
             cvCvtColor(hsv,dst,CV_HSV2BGR);
             //Before you debug, choose SizeMode property of PictureBoxs = StretchImage.
             pictureBox1->Image = gcnew //replacement of cvShowImage
             System::Drawing::Bitmap(src->width,src->height,src->widthStep,
             System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr) src->imageData);
             pictureBox1->Refresh();

             pictureBox2->Image = gcnew //replacement of cvShowImage
             System::Drawing::Bitmap(dst->width,dst->height,dst->widthStep,
             System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr) dst->imageData);
             pictureBox2->Refresh();

             /*cvReleaseImage(&src);
             cvReleaseImage(&hsv);
             cvReleaseImage(&dst);
             cvReleaseImage(&h_plane);
             cvReleaseImage(&s_plane);
             cvReleaseImage(&v_plane);*/
         }
private: System::Void ExitButton_Click(System::Object^  sender, System::EventArgs^  e) {
             cvReleaseImage(&src);
             cvReleaseImage(&hsv);
             cvReleaseImage(&dst);
             cvReleaseImage(&h_plane);
             cvReleaseImage(&s_plane);
             cvReleaseImage(&v_plane);
             this->Close();
         }
}; 
```

}

* * *

考虑代码的一部分：

```
cvReleaseImage(&src);
cvReleaseImage(&hsv);
cvReleaseImage(&dst);
cvReleaseImage(&h_plane);
cvReleaseImage(&s_plane);
cvReleaseImage(&v_plane); 
```

如果我把这部分放在 Form1_Load 的末尾，就会出现如下图所示的错误： ![在此处输入图像描述](../Images/c02db203c549a0569c9af37f4bb4ec5d.png)

但是，如果我把这部分放在 ExitButton_Click 函数中，就可以了！我不知道为什么？希望有人能给我一个解释！谢谢你的帮助！^~^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:42:46.177

在以下行中，您使用的是 opencv 图像缓冲区，如果您在表单加载功能结束时对这些缓冲区进行收费，.net 引擎将无法再加载图像

但是，如果您在表单退出中释放缓冲区，它就不会在意...

```
 pictureBox1->Image = gcnew ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T03:58:19.697

.Net 中的 Form-Load 事件可用于在加载和呈现表单*之前分配资源。*通过在加载结束时释放图像缓冲区，您可以删除表单需要显示的图像资源。想象一下，有一些内部方法调用您的`Load()`方法，然后它调用一个内部`Display()`方法，该方法使用来自该`Load()`方法的数据。如果您加载数据然后在调用“Display()”方法之前释放它，您将释放该`Display()`方法所需的内存。

正如 Roozbeh 所说，如果您将其放在出口中，则表单不会尝试显示任何内容，因此它不需要该图像资源（来自缓冲区）。exit 方法自然是释放事物的好地方。

# assembly - x86汇编语言中获取EAX寄存器的第一位

> ID：15238467
> 
> 赞同：1
> 
> 时间：2013-03-06T03:31:38.260
> 
> 标签：assembly, x86

在 x86 汇编语言中，是否可以获得寄存器的第一位？我想获取`eax`寄存器的第一位并将其移入`ebx`，但我还不确定如何执行此操作。

```
.stack 2048

.data

ExitProcess proto, exitcode:dword 

.code
start:
mov eax, 3;
;now I want to move the first bit of eax into ebx. How can I obtain the first bit from eax?
invoke  ExitProcess, 0
end start 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T05:26:29.437

如果“第一位”是指最低有效位，请尝试：

```
 ...
 mov   ebx, eax
 and   ebx, 01 
```

您显然不明白指令一次对命名寄存器中的*所有*位进行操作，并且“and”指令将它们的操作数逐位组合。

以下内容也有效，可以说是对您的请求的更直接解释（“获取 eax 的第一位，然后放入 EBX”），但它破坏了 EAX 的内容：

```
 ...
 and   eax, 1
 mov   ebx, eax 
```

在汇编代码中，由于寄存器很少，它们的内容往往很宝贵，因此通常避免在计算新结果时破坏一个寄存器的内容。（当你不能时，你不能，但这种情况很容易避免）。

最后，你可以写：

```
 ...
 mov   ebx, 1
 and   ebx, eax 
```

这工作正常，并且与其他两个一样快。我更喜欢第一个，因为它强调了恕我直言我关心的价值（EAX 的内容），因为它首先提到它，而不是“1”，这只是一个偶然的常数。这种风格可能看起来并不重要，但如果你写了很多代码，*尤其是*像汇编这样的晦涩难懂的东西，这样做以最大限度地提高以后的可读性是很值得的。

查找英特尔参考手册是值得的，并仔细*阅读*它们以了解每条机器指令的作用。这似乎是一项艰巨的任务，因为它是一本大书；只需专注于您最初似乎需要的说明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T03:44:46.940

从寄存器中获取一个位涉及到`and`一个掩码操作，该掩码在感兴趣的位位置为 1，在所有其他位中为 0。然后可选地，a`rotate right`或 a`rotate left`将位移动到结果中的所需位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-28T19:15:46.973

也可以使用汇编的轮换属性，即使用bit指令将指定位复制到进位标志中，我们可以使用轮换进位标志指令。

我认为这对于了解在何处以及如何使用和放置爆破钻头方面发生了什么非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-04T11:32:24.183

如上所述，在这里**使用`mov`和`and`是最快的解决方案**，但编程的有趣之处在于可以为单个问题找到许多解决方案，因此作为一种效率较低的*替代方案*，您可以使用以下代码之一。

所以你也可以这样解决：

```
xor ebx, ebx ; sets ebx = 0
TEST eax, 1 ; is the lowest bit set?
JZ skip_add ; if low bit is zero, skip next instruction

; if lowest bit was set / AND op resulted not zero
add ebx, 1 ; ebx += 1, or use `INC ebx`

skip_add:
; process the result 
```

或者，您也可以使用：

```
xor ebx, ebx ; ebx = 0
shr eax, 1 ; shift right: lowest bit in carry flag now
adc ebx, 0 ; ebx += 0 + carry bit
shl eax, 1 ; get back original value of eax, `shl` and `or` with ebx
or eax, ebx ; or use `push eax` and `pop eax` instead 
```

另一种选择（类似于其他答案，但成本更高）：

```
push eax
and eax, 1
xchg ebx, eax ; swap contents, could also use `mov` here
pop eax 
```

请注意，这两种解决方案都不会更改 中的值`eax`，因此您仍然可以自由使用 eax 中的值。另请注意，注释值用于`eax`具有`mov eax, 3`问题中使用的 3 值。

如果您已经知道，即`ebx`为零，则可以跳过这些`xor`行，如果更改`eax`无关紧要，您也可以删除该`shl`操作。所以实际操作是通过大约两条指令完成的，如您所见。不过，关于 µops，请参阅 Peter 的评论。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-28T07:10:08.177

...第一点：

```
test eax, 1
setz ebx 
```

短剑

# c - C 正则表达式：提取实际匹配项

> ID：15238468
> 
> 赞同：8
> 
> 时间：2013-03-06T03:31:39.437
> 
> 标签：c, regex, char, pattern-matching

我在 C 中使用正则表达式（使用“regex.h”库）。在为 regcomp(...) 和 regexec(...) 设置标准调用（和检查）之后，我只能设法打印与我编译的正则表达式匹配的实际子字符串。根据手册页，使用 regexec 意味着您将子字符串匹配存储在称为“regmatch_t”的结构中。该结构仅包含 rm_so 和 rm_eo 来引用我所理解的内存中匹配子字符串的字符地址，但我的问题是我如何才能使用这些偏移量和两个指针来提取实际的子字符串并将其存储到一个数组（理想情况下是一个二维字符串数组）？

当您仅打印到标准输出时它可以工作，但每当您尝试使用相同的设置但将其存储在字符串/字符数组中时，它会存储最初用于匹配表达式的整个字符串。此外，打印语句中的“%.*s”是什么？我想它本身就是一个正则表达式，可以正确读取指向字符数组的指针。我只想将匹配的子字符串存储在集合中，以便可以在软件的其他地方使用它们。

背景：p 和 p2 都是指向要匹配的字符串开头的指针，然后在下面的代码中进入 while 循环：[编辑：“matches”是一个 2D 数组，旨在最终存储子字符串匹配项，并已预分配/初始化在你看到下面的主循环之前]

```
int ind = 0;
while(1){
    regExErr1 = regexec(&r, p, 10, m, 0);
    //printf("Did match regular expr, value %i\n", regExErr1);
    if( regExErr1 != 0 ){ 
        fprintf(stderr, "No more matches with the inherent regular expression!\n"); 
        break; 
    }   
    printf("What was found was: ");
    int i = 0;
    while(1){
        if(m[i].rm_so == -1){
            break;
        }
        int start = m[i].rm_so + (p - p2);
        int finish = m[i].rm_eo + (p - p2);
        strcpy(matches[ind], ("%.*s\n", (finish - start), p2 + start));
        printf("Storing:  %.*s", matches[ind]);
        ind++;
        printf("%.*s\n", (finish - start), p2 + start);
        i++;
    }
    p += m[0].rm_eo; // this will move the pointer p to the end of last matched pattern and on to the start of a new one
}
printf("We have in [0]:  %s\n", temp); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T04:05:29.630

有很多正则表达式包，但你的似乎与 POSIX 中的相匹配：[`regcomp()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/regcomp.html)等。

它定义的两个结构`<regex.h>`是：

*   `regex_t`至少包含`size_t re_nsub`, 括号内的子表达式的数量。

*   `regmatch_t`至少包含`regoff_t rm_so`从字符串开头到子字符串开头的`regoff_t rm_eo`字节偏移量，以及从字符串开头到子字符串结尾后第一个字符的字节偏移量。

请注意，“偏移量”不是指针，而是字符数组的索引。

执行函数为：

*   `int regexec(const regex_t *restrict preg, const char *restrict string, size_t nmatch, regmatch_t pmatch[restrict], int eflags);`

您的打印代码应为：

```
for (int i = 0; i <= r.re_nsub; i++)
{
    int start = m[i].rm_so;
    int finish = m[i].rm_eo;
//  strcpy(matches[ind], ("%.*s\n", (finish - start), p + start));  // Based on question
    sprintf(matches[ind], "%.*s\n", (finish - start), p + start);   // More plausible code
    printf("Storing:  %.*s\n", (finish - start), matches[ind]);     // Print once
    ind++;
    printf("%.*s\n", (finish - start), p + start);                  // Why print twice?
} 
```

请注意，应升级代码以确保字符串副本 (via `sprintf()`) 不会溢出目标字符串 — 可能通过使用`snprintf()`而不是`sprintf()`. 在打印中标记字符串的开始和结束也是一个好主意。例如：

```
 printf("<<%.*s>>\n", (finish - start), p + start); 
```

这使得整个堆更容易看到空间等。

*[将来，请尝试提供 MCVE（[最小、完整、可验证的示例](https://stackoverflow.com/help/mcve)）或 SSCCE（[简短、自包含、正确的示例](http://sscce.org/)），以便人们可以更轻松地提供帮助。]*

这是我创建的 SSCCE，可能是为了回应 2010 年的另一个 SO 问题。它是我保留的许多程序之一，我称之为“小插曲”；显示某些功能本质的小程序（例如 POSIX 正则表达式，在这种情况下）。我发现它们作为记忆慢跑者很有用。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <regex.h>

#define tofind    "^DAEMONS=\\(([^)]*)\\)[ \t]*$"

int main(int argc, char **argv)
{
    FILE *fp;
    char line[1024];
    int retval = 0;
    regex_t re;
    regmatch_t rm[2];
    //this file has this line "DAEMONS=(sysklogd network sshd !netfs !crond)"
    const char *filename = "/etc/rc.conf";

    if (argc > 1)
        filename = argv[1];

    if (regcomp(&re, tofind, REG_EXTENDED) != 0)
    {
        fprintf(stderr, "Failed to compile regex '%s'\n", tofind);
        return EXIT_FAILURE;
    }
    printf("Regex: %s\n", tofind);
    printf("Number of captured expressions: %zu\n", re.re_nsub);

    fp = fopen(filename, "r");
    if (fp == 0)
    {
        fprintf(stderr, "Failed to open file %s (%d: %s)\n", filename, errno, strerror(errno));
        return EXIT_FAILURE;
    }

    while ((fgets(line, 1024, fp)) != NULL)
    {
        line[strcspn(line, "\n")] = '\0';
        if ((retval = regexec(&re, line, 2, rm, 0)) == 0)
        {
            printf("<<%s>>\n", line);
            // Complete match
            printf("Line: <<%.*s>>\n", (int)(rm[0].rm_eo - rm[0].rm_so), line + rm[0].rm_so);
            // Match captured in (...) - the \( and \) match literal parenthesis
            printf("Text: <<%.*s>>\n", (int)(rm[1].rm_eo - rm[1].rm_so), line + rm[1].rm_so);
            char *src = line + rm[1].rm_so;
            char *end = line + rm[1].rm_eo;
            while (src < end)
            {
                size_t len = strcspn(src, " ");
                if (src + len > end)
                    len = end - src;
                printf("Name: <<%.*s>>\n", (int)len, src);
                src += len;
                src += strspn(src, " ");
            }
        }
    } 
    return EXIT_SUCCESS;
} 
```

这旨在查找`DAEMONS=`文件中开始的特定行`/etc/rc.conf`（但您可以在命令行上指定替代文件名）。您可以轻松地将其调整为适合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T08:05:09.480

由于 g++ 正则表达式被窃听，直到谁知道什么时候，您可以改用我的代码（许可证：AGPL，无保修，风险自负，...）

```
/**
 * regexp (License: AGPL3 or higher)
 * @param re extended POSIX regular expression
 * @param nmatch maximum number of matches
 * @param str string to match
 * @return An array of char pointers. You have to free() the first element (string storage). the second element is the string matching the full regex, then come the submatches.
*/
char **regexp(char *re, int nmatch, char *str) {
  char **result;
  char *string;
  regex_t regex;
  regmatch_t *match;
  int i;

  match=malloc(nmatch*sizeof(*match));
  if (!result) {
    fprintf(stderr, "Out of memory !");
    return NULL;
  }

  if (regcomp(&regex, re, REG_EXTENDED)!=0) {
    fprintf(stderr, "Failed to compile regex '%s'\n", re);
    return NULL;
  }

  string=strdup(str);
  if (regexec(&regex,string,nmatch,match,0)) {
#ifdef DEBUG
    fprintf(stderr, "String '%s' does not match regex '%s'\n",str,re);
#endif
    free(string);
    return NULL;
  }

  result=malloc(sizeof(*result));
  if (!result) {
    fprintf(stderr, "Out of memory !");
    free(string);
    return NULL;
  }

  for (i=0; i<nmatch; ++i) {
    if (match[i].rm_so>=0) {
      string[match[i].rm_eo]=0;
      ((char**)result)[i]=string+match[i].rm_so;
#ifdef DEBUG
      printf("%s\n",string+match[i].rm_so);
#endif                                                                                                                                                                                                                                                   
    } else {                             
      ((char**)result)[i]="";            
    }
  }

  result[0]=string;                      

  return result;                         

} 
```

# javascript - 修复进入 javascript 应用程序的 URL？

> ID：15238469
> 
> 赞同：0
> 
> 时间：2013-03-06T03:31:44.630
> 
> 标签：javascript, url, mobile, encoding

提前感谢您的时间和帮助！

我有一个已经编译的混合 iOS 应用程序。当它加载时，它会远程拉入一个类似于以下内容的 URL：

```
https://apps.somedomain.com/client?ai=6237&di=38401 
```

但是，提供该 url 的服务将“&”编码为“%26”。

我无法更改服务将变量提供给应用程序的方式，也无法更改应用程序中的代码，因为它已经被编译。

但是，我可以更改 URL 的结构（尽管它仍然需要指向同一个地方）

有谁知道是否有办法解决这个问题，而无需返回应用程序，考虑编码，重新编译并重新提交应用程序？

谢谢你的帮助！

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:42:16.947

如果你知道 url 总是`escaped`你可以简单地添加如下内容：

```
if(window.location.href.indexOf("%26") !=-1)
{
  window.location.href = unescape(window.location.href);
} 
```

这样，如果您的应用检测到转义的 url，它就会简单地重定向到正确的 url。

# sql - SQL 在唯一列值上合并结果集

> ID：15238477
> 
> 赞同：3
> 
> 时间：2013-03-06T03:32:13.403
> 
> 标签：sql, oracle

我有 2 个类似的查询，它们都在同一个表上工作，我基本上想组合它们的结果，以便第二个查询为第一个查询不返回的内容提供默认值。我在这里尽可能地简化了问题。我正在使用 Oracle 顺便说一句。

该表中包含多个帐户的帐户信息，每个帐户有多个条目，并带有 commit_date 以告知何时插入帐户信息。我需要获取某个日期的最新帐户信息。

查询采用帐户 ID 列表和日期。

这是查询：

```
-- Select the row which was current for the accounts for the given date. (won't return anything for an account which didn't exist for the given date)
SELECT actr.*
FROM Account_Information actr 
WHERE actr.account_id in (30000316, 30000350, 30000351) 
AND actr.commit_date <= to_date( '2010-DEC-30','YYYY-MON-DD ')
AND actr.commit_date = 
(
    SELECT MAX(actrInner.commit_date) 
    FROM Account_Information actrInner 
    WHERE actrInner.account_id = actr.account_id
    AND actrInner.commit_date <= to_date( '2010-DEC-30','YYYY-MON-DD ')
) 
```

这看起来有点难看，但它为给定日期当前的每个帐户返回一行。问题是如果帐户在给定日期之后才存在，它不会返回任何内容。

为每个帐户选择最早的帐户信息很简单——我不需要为此提供日期：

```
-- Select the earliest row for the accounts.
SELECT actr.*
FROM Account_Information actr 
WHERE actr.account_id in (30000316, 30000350, 30000351) 
AND actr.commit_date = 
(
    SELECT MAX(actrInner .commit_date) 
    FROM Account_Information actrInner 
    WHERE actrInner .account_id = actr.account_id
) 
```

但我想以这样的方式合并结果集：

对于每个帐户，如果在第一个结果集中有它的帐户信息 - 使用它。否则，使用第二个结果集中的帐户信息。

我研究了所有我可以使用但没有成功的连接。联合几乎可以做到这一点，但它们只会合并唯一的行。我想根据每行中的帐户 ID 进行合并。

[Sql合并两个结果集](https://stackoverflow.com/questions/6803652/sql-merging-two-result-sets)-我的情况显然比这更复杂

[SQL 返回一组合并的结果](https://stackoverflow.com/questions/10485971/sql-to-return-a-merged-set-of-results)- 我也许能够适应这种技术？我是一个被迫编写 SQL 的程序员，我不能很好地遵循这个例子，看我如何修改它以满足我的需要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:49:47.263

执行此操作的标准方法是使用左外连接和合并。也就是说，您的整体查询将如下所示：

```
SELECT ...
FROM defaultQuery
LEFT OUTER JOIN currentQuery ON ... 
```

如果你做了 a `SELECT *`，每一行将对应于当前帐户数据加上你的默认值。跟我到现在？

现在，`SELECT *`对于要返回的每一列，而不是 ，您`COALESCE()`对匹配的列对执行 a ：

```
SELECT COALESCE(currentQuery.columnA, defaultQuery.columnA) ... 
```

这将选择当前帐户数据（如果存在），否则将选择默认数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:51:02.783

您可以使用分析函数更直接地执行此操作：

```
select *
from (SELECT actr.*, max(commit_date) over (partition by account_id) as maxCommitDate,
             max(case when commit_date <= to_date( '2010-DEC-30','YYYY-MON-DD ') then commit_date end) over
                   (partition by account_id) as MaxCommitDate2
      FROM Account_Information actr 
      WHERE actr.account_id in (30000316, 30000350, 30000351)
     ) t
where (MaxCommitDate2 is not null and Commit_date = MaxCommitDate2) or
      (MaxCommitDate2 is null and Commit_Date = MaxCommitDate) 
```

子查询计算两个值，即提交日期的两种可能性。然后该`where`子句使用您想要的逻辑选择适当的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T05:22:08.637

我已经结合了其他答案。在[apex.oracle.com](http://apex.oracle.com)上试用过。这里有一些解释。

`MAX(CASE WHEN commit_date <= to_date('2010-DEC-30', 'YYYY-MON-DD'))`将为我们提供不早于 12 月 30 日的最新日期，如果没有，则为 NULL。将它与 a 结合起来`COALESCE`，我们得到 `COALESCE(MAX(CASE WHEN commit_date <= to_date('2010-DEC-30', 'YYYY-MON-DD') THEN commit_date END), MAX(commit_date))`.

现在我们获取我们拥有的帐户 ID 和提交日期，并将它们与原始表连接起来以获取所有其他字段。这是我提出的整个查询：

```
SELECT *
FROM Account_Information
JOIN (SELECT account_id,
             COALESCE(MAX(CASE WHEN commit_date <=
                                    to_date('2010-DEC-30', 'YYYY-MON-DD')
                               THEN commit_date END),
                      MAX(commit_date)) AS commit_date
      FROM Account_Information
      WHERE account_id in (30000316, 30000350, 30000351)
      GROUP BY account_id)
  USING (account_id, commit_date); 
```

请注意，如果您确实使用 USING，则必须使用`*`而不是`acrt.*`.

# python - 以 O(n) 的顺序更改字典中的一系列项目

> ID：15238481
> 
> 赞同：0
> 
> 时间：2013-03-06T03:32:49.470
> 
> 标签：python

我正在尝试在运行时更改字典中的一系列值`O(n)`。其中 n 是我需要更改的范围内的元素数。

例如，如果我的字典有键的数字，并且我得到一个键范围列表 list = [ (key1,key3), (key2,key3)] 在这种情况下，如果我开始的话， `d = {key1: odd , key2: even, key3: odd , key4: even}` 那么我将在第一个范围之后 `d = {key1: even , key2: odd, key3: even , key4: even}` 在第二个键范围之后 `d = {key1: even , key2: even, key3: odd , key4: even}`

可以在python中实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:44:37.340

你可以这样做。这是 O(n)，其中 n 是您需要*更改*的键数。

```
change_keys = (1,2)
for key in change_keys:
    d[key] = 'odd' if d[key]=='even' else 'even' 
```

* * *

如果您有范围无元组列表，例如：

```
key_ranges = [(2,6), (4,8)]
key_ranges = [ range(a[0],a[1]) for a in key_ranges ] 
```

我相信你可以使用：

```
change_keys = set.union(*map(set,key_ranges)) 
```

但是，当然，它需要操作来生成集合。但在某些时候，您要么必须复制密钥，要么找到重复项。不确定是否可以避免。

或者，如果您想做重复项，则永远不要调用`set`：

```
key_ranges = [(2,6), (4,8)]
change_keys = []
for a in key_ranges:
    change_keys.extend(range(a[0],a[1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:36:34.817

如果你真正的意思是 n 是范围列表的长度，那么没有办法使用字典来实现这一点。例如，如果范围是 [(0,100000000000)]，那么在字典中执行此操作将相对于范围列表中的位数呈指数增长。

如果您选择了正确的数据表示和算法，您可以在 nlogn 中实现您的操作，其中 n 是范围列表的长度。相对于范围内的实际元素数量，这通常比 O(n) 的运行时间快得多。

这是一个可能的解决方案：

1.  定义一个由范围列表组成的数据结构。列表中某个范围内的元素已从其原始起始状态“翻转”。

2.  定义一个例程，将一组新的翻转（传入范围列表）与现有的“合并”，并找到不相交的翻转集。

例程应该：

1.  将数据结构的范围与传入的范围列表合并。
2.  找到具有最小第一个元素的范围集，称为 A。
3.  找到在 A 中最后一个范围结束之前开始的范围集，将其与 A 合并。
4.  根据第一个元素对 A 中的范围进行排序。
5.  对于 A 中的每个 (b1,?)，将 A 中的每个范围 (a,b) 拆分为 (a,b1) 和 (b1,b)。A 中的范围现在应该是不重叠的。
6.  删除所有 (a,b) 对。(a,b) 现在在 A 中应该是唯一的。
7.  将所有范围 (a,b), (b,c) 连接到 A 中的 (a,c) 中。
8.  将 A 添加到数据结构中。转到第 2 步，从尚未添加的下一个最小元素开始。

# mysql - 子查询返回超过 1 行？

> ID：15238483
> 
> 赞同：2
> 
> 时间：2013-03-06T03:32:51.073
> 
> 标签：mysql, sql

我有一个艺术家表和一个艺术家别名表。Artist_alias 包含所有可能的艺术家名称。

我的查询，以获取多个艺术家的艺术家数据，如下所示：

```
$sql = "SELECT artist.artist_id, artist.artist_name
        FROM artists artist
        WHERE artist.artist_id IN (3,9,500);"; 
```

现在，我还想包括任何已知的别名，可以是 1 或 X。我可以在上面的查询中获取这些信息吗？或者这是一个单独的查询？

我正在考虑做类似的事情：

```
$sql = "SELECT artist.artist_id, artist.artist_name, 
       (SELECT * FROM artists_alias WHERE [???])...."; 
```

但是我收到错误消息“子查询返回超过 1 行”——我是否让这比现在更复杂？这可以是一个查询吗？

我很乐意用逗号分隔别名，例如返回行可能如下所示：3，“ben folds 5”，“ben folds 5,benfolds,ben folds 5, folds 5”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:37:17.763

您将需要一个`LEFT JOIN`反对`artist_alias`来检索这些。如果您希望它们以逗号分隔，请使用聚合[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

使用`LEFT JOIN`以便即使艺术家没有关联的别名也会返回一行。

每个别名一行（每行复制艺术家信息）：

```
SELECT
  artist.artist_id, 
  artist.artist_name,
  /* Retrieves all cols from artists_alias. SELECT only what you need... */
  artists_alias.*
FROM
  artist
  /* Assuming there's an artists_alias.artist_id. Substitute the correct column name */
  LEFT JOIN artists_alias ON artist.artist_id = artists_alias.artist_id
WHERE artist.artist_id IN (3, 9, 500) 
```

或者通过逗号分隔的别名列表`GROUP_CONCAT()`：

```
SELECT
  artist.artist_id, 
  artist.artist_name,
  /* Substitute the correct column name for the actual alias */
  GROUP_CONCAT(artists_alias.alias) AS all_aliases
FROM
  artist
  LEFT JOIN artists_alias ON artist.artist_id = artists_alias.artist_id
WHERE artist.artist_id IN (3, 9, 500)
GROUP BY 
  artist.artist_id,
  artist.artist_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T03:43:52.407

如果要在一行中返回所有别名，请使用`group_concat()`：

```
SELECT a.artist_id, a.artist_name,
       group_concat(aa.alias) as aliases
FROM artists artist left outer join
     artists_alias aa
     on a.artist_id = aa.artist_id
WHERE at.artist_id IN (3,9,500)
group by a.artist_id, a.artist_name 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T03:38:12.770

把限制1放在最后。

select * from tble where a=1 limit 1;

# php - PHP登录与Facebook创建无限重定向循环

> ID：15238484
> 
> 赞同：3
> 
> 时间：2013-03-06T03:32:54.400
> 
> 标签：php, facebook, login

我在使用 Facebook 登录和 PHP 时遇到问题。

下面的文件似乎导致了这个问题。一切正常，直到我成功登录 Facebook 并且浏览器在重定向回此文件时最终抛出无限重定向错误。最后一个 else 语句总是被执行导致循环......

有任何想法吗？提前致谢！

```
<?php

require 'facebook/facebook.php';
require 'config/fbconfig.php';
require 'config/functions.php';

$facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            ));

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }

    if (!empty($user_profile )) {
        # User info ok? Let's print it (Here we will be adding the login and registering routines)

        $username = $user_profile['name'];
    $uid = $user_profile['id'];
    $email = $user_profile['email'];
        $user = new User();
        $userdata = $user->checkUser($uid, 'facebook', $username,$email,$twitter_otoken,$twitter_otoken_secret);

        if(!empty($userdata)){
            session_start();
            $_SESSION['id'] = $userdata['id'];
        $_SESSION['oauth_id'] = $uid;
        $_SESSION['username'] = $userdata['username'];
        $_SESSION['email'] = $email;
            $_SESSION['oauth_provider'] = $userdata['oauth_provider'];
            header("Location: home.php");
        }
    } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");
    }
} else {
    # There's no active session, let's generate one
    $login_url = $facebook->getLoginUrl(array( 'scope' => 'email'));
    header("Location: " . $login_url);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T23:53:22.007

我有同样的问题，在 base_facebook.php

寻找：

```
public static $CURL_OPTS = array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_TIMEOUT        => 60,
    CURLOPT_USERAGENT      => 'facebook-php-3.2'
  ); 
```

并添加以下 2 行

```
CURLOPT_SSL_VERIFYPEER => false,
CURLOPT_SSL_VERIFYHOST => false 
```

所以你有了

```
public static $CURL_OPTS = array(
     CURLOPT_CONNECTTIMEOUT => 10,
     CURLOPT_RETURNTRANSFER => true,
     CURLOPT_TIMEOUT        => 60,
     CURLOPT_USERAGENT      => 'facebook-php-3.2',
     CURLOPT_SSL_VERIFYPEER => false,
     CURLOPT_SSL_VERIFYHOST => false
); 
```

# python - 拖放 QGraphicItems - 位置显示不正确

> ID：15238486
> 
> 赞同：1
> 
> 时间：2013-03-06T03:33:00.327
> 
> 标签：python, qt, pyqt

我正在 PyQT 中创建拖放界面，当我将对象拖放到我的主 QGraphicsView 中时，我试图在该对象被拖放的位置绘制该对象。

```
 def dropEvent(self, e):
        e.accept()
        newobject = Object()
        newobject.setPos(e.pos())
        self.scene.addItem(newobject) 
```

Object() 类是一个 QGraphicsItem，它有自己的paint 和 boundingRect 方法。我在 QStandardItemModel 中代表我的 QStandardItems。

现在，当我将一个对象拖放到我的 QGraphicsView 上时，我发现它的绘制位置不一定与我拖放该项目时鼠标的位置一致。我很困惑，因为我认为：

```
 newobject.setPos(e.pos()) 
```

命令会将对象的位置设置为它被放置的确​​切位置，因此它也会被绘制在该位置。谁能向我建议为什么它可能没有出现在正确的位置？

# java - log4j2.xml 未在 Eclipse 中加载

> ID：15238490
> 
> 赞同：1
> 
> 时间：2013-03-06T03:33:32.220
> 
> 标签：java, servlets, logging, log4j, log4j2

我对 log4j 还很陌生。尝试使用 log4j2.xml 进行配置。我将文件添加到构建路径，它工作过一次，但不再工作。

这是我的 log4j2.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
        </Console>
    </appenders>
    <loggers>
        <root level="TRACE">
            <appender-ref ref="Console"/>
        </root>
    </loggers>
</configuration> 
```

我剥离了它，只是为了测试它以使其正常工作。我检查了调试，记录器配置使用的是默认值。

我还尝试将文件命名为 log4j2-test.xml。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:52:28.507

由于您使用“ **servlets** ”作为标记，我假设您在 Web 应用程序中工作。您需要将 log4j.xml 放置到您的 Web 应用程序类加载器可以找到的位置。例如，`WEB-INF/classes`目录。

# html - 一栏全宽

> ID：15238491
> 
> 赞同：-5
> 
> 时间：2013-03-06T03:33:40.227
> 
> 标签：html, css

我到处寻找答案，但在任何地方都找不到。这就是问题所在。我有一个一栏两行的网站。第一行透明，图像设置为背景。第一行下方的第二行是与第一行重叠的明亮纯色填充颜色/纹理。我遇到的问题是在第二列的右侧和左侧，我可以稍微看到一个边框/空间，背景图像从后面显示。我的问题是我怎样才能让第二列从边缘到边缘齐平地坐在窗户上，这样你就看不到后面了？

```
<p>
  <span style="font-family: Impact; font-size: 72px; font-weight: normal;"><br></span>
</p>
<p style="text-align: center;">
  <span style="font-family: Impact; font-size: 72px; font-weight: normal; color: rgb(255, 255, 255); text-shadow: rgba(23, 23, 23, 0.808594) 0px -1.4px 0px;"><br></span>
</p>
<p style="text-align: center;">
  <span style="font-family: Impact; font-size: 72px; font-weight: normal; color: rgb(255, 255, 255); text-shadow: rgba(23, 23, 23, 0.808594) 0px -1.4px 0px;">Little About Me</span>
</p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:35:55.253

添加`body{margin:0}`到您的 CSS。

# c# - 从 C++/CX 和 C# 使用 C# 组件

> ID：15238501
> 
> 赞同：2
> 
> 时间：2013-03-06T03:34:36.400
> 
> 标签：c#, interop, c++-cx

我在 C++/CX 中创建了一个简单的控件 SimpleControl.xaml，定义为：

```
<UserControl ..  > // Attributes omitted for reading simplicity
<Grid>

 <Grid.RowDefinitions>
    <RowDefinition Height="40"/>
    <RowDefinition Height="30"/>
 <RowDefinition Height="30"/>
 </Grid.RowDefinitions>

 <Grid.ColumnDefinitions>
    <ColumnDefinition Width="100"/>
    <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

    <Image x:Name="PersonaPicture" ... />
    <Border x:Name="PhotoTextBackdrop" ... />
    <TextBlock x:Name="PersonaName" .../>

</Grid>
</UserControl> 
```

然后在使用 C++/CX 作为代码的文件“foo.xaml”中以下列方式使用此控件。SuperPanel 继承自 Windows.UI.Xaml.Controls.Panel 并在 TastyLib 组件中定义（由该 C++/CX 组件使用）。'fruity' 命名空间指向 TastyLib。TastyLib 组件是用 C# 编码的：

```
</fruity:SuperPanel>
    <local:SimpleControl x:Name="gPerson1" Grid.Row="0" Grid.Column="0" />
    <Rectangle Fill="SaddleBrown" Height="50" Width="50" Grid.Row="1" Grid.Column="0" />
    <UserControl Grid.Row="2" Grid.Column="0" />
</fruity:SuperPanel> 
```

设置断点并查看手表，我观察到以下是面板的子项：

> child[0] 是 Windows.UI.Xaml.UIElement，child[1] 是 Windows.UI.Xaml.Shapes.Rectangle，child[2] 是 Windows.UI.Xaml.Controls.UserControl

现在，在手表中，我期待第一个孩子是 SimpleControl，但实际上它是 UIElement，这让我感到惊讶。那个是从哪里来的？为什么它将 SimpleControl 的祖先显示为 child[0] 而它仍然可以将 UserControl 识别为 child[2] ？

我在使用 TastyLib 的 C# 组件中重新创建了另一个 SimpleControl（所以这个 SimpleControl 也是用 C# 编写的，并且没有使用 C++/CX），并将该控件放在另一个 SuperPanel 中，就像第一种情况一样（但这次都是在 C# 中） . 在设置相同的断点并在监视窗口中查看时，我看到 child[0] 是我所期望的 - 一个 SimpleControl。在这种情况下：

> child[0] 是 FooProject.SimpleControl，child[1] 是 Windows.UI.Xaml.Shapes.Rectangle，child[2] 是 Windows.UI.Xaml.Controls.UserControl

这种二分法的根本原因可能是什么？用 C++/CX 编写的控件不应该与用 C# 编写的控件完全相同（当使用用 C# 编写的相同组件时）？我猜这与组件互操作性有关。有没有人遇到过类似的问题？

任何意见，将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:28:39.440

根据我所做的研究，问题是在用 C++/CX 编写的控件的情况下跨越了 winRT 边界，因此当 CLR 请求类型时，对象从其返回 Windows.UI.Xaml.UIElement GetRuntimeClassName 实现（为什么？）。

在使用 C# 开发的控件的情况下，不会越过 winRT 边界，并且 .NET 对象正在与另一个 .NET 对象通信，因此类型是已知的。

# ios - 标签中的自定义字体绘制问题太低

> ID：15238503
> 
> 赞同：1
> 
> 时间：2013-03-06T03:34:56.800
> 
> 标签：ios, fonts, truetype, custom-font, opentype

某些字体绘制在左上角，而所有其他字体则垂直居中绘制。

这可以在下面的图片中看到。DCIntrospect 用于绘制 UILabel 视图的边界。

我在下面使用一种字体

![坏字体](../Images/3e72e806e8f8daa3072be1ba03d2269f.png)

我在这里使用斜体版本

![好字体](../Images/31ff71627cf0446c0e0f643bc8e389ea.png)

如您所见，第一张图像的字体粘在顶部边缘，而另一张图像垂直居中。

我能做些什么来解决这个问题吗？我一直在研究字体编辑器，但我不确定在哪里看。一些字体编辑器非常大。我已经在 TypeTool 的试用版中打开了它们，但我看不出它们的放置方式有什么不同。

我将不胜感激任何帮助。

# django - Django 的 SuspiciousOperation 无效的 HTTP_HOST 标头

> ID：15238506
> 
> 赞同：103
> 
> 时间：2013-03-06T03:35:26.693
> 
> 标签：django

升级到 Django 1.5 后，我开始收到如下错误：

```
Traceback (most recent call last):

File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 92, in get_response
response = middleware_method(request)

File "/usr/local/lib/python2.7/dist-packages/django/middleware/common.py", line 57, in process_request
host = request.get_host()

File "/usr/local/lib/python2.7/dist-packages/django/http/request.py", line 72, in get_host
"Invalid HTTP_HOST header (you may need to set ALLOWED_HOSTS): %s" % host)

SuspiciousOperation: Invalid HTTP_HOST header (you may need to set ALLOWED_HOSTS): www.google.com

<WSGIRequest
path:/,
GET:<QueryDict: {}>,
POST:<QueryDict: {}>,
COOKIES:{},
META:{'CONTENT_LENGTH': '',
'CONTENT_TYPE': '',
'DOCUMENT_ROOT': '/etc/nginx/html',
'HTTP_ACCEPT': 'text/html',
'HTTP_HOST': 'www.google.com',
'HTTP_PROXY_CONNECTION': 'close',
'HTTP_USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)',
'PATH_INFO': u'/',
'QUERY_STRING': '',
'REMOTE_ADDR': '210.245.91.104',
'REMOTE_PORT': '49347',
'REQUEST_METHOD': 'GET',
'REQUEST_URI': '/',
u'SCRIPT_NAME': u'',
'SERVER_NAME': 'www.derekkwok.net',
'SERVER_PORT': '80',
'SERVER_PROTOCOL': 'HTTP/1.0',
'uwsgi.node': 'derekkwok',
'uwsgi.version': '1.4.4',
'wsgi.errors': <open file 'wsgi_errors', mode 'w' at 0xb6d99c28>,
'wsgi.file_wrapper': <built-in function uwsgi_sendfile>,
'wsgi.input': <uwsgi._Input object at 0x953e698>,
'wsgi.multiprocess': True,
'wsgi.multithread': False,
'wsgi.run_once': False,
'wsgi.url_scheme': 'http',
'wsgi.version': (1, 0)}> 
```

我已经设置`ALLOWED_HOSTS = ['.derekkwok.net']` 在我的 settings.py 文件中设置了。

这里发生了什么？有人冒充 Google 访问我的网站？还是有人错误地设置了 HTTP_HOST 标头的良性案例？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-07-04T20:00:44.880

如果您使用 Nginx 将请求转发到在 Gunicorn/Apache/uWSGI 上运行的 Django，您可以使用以下命令来阻止错误请求。感谢[@PaulM](https://twitter.com/PaulM/status/352865286707347456)的建议。

```
upstream app_server {
    server unix:/tmp/gunicorn_mydomain.com.sock fail_timeout=0;
}

server {

    ...

    ## Deny illegal Host headers
    if ($host !~* ^(mydomain.com|www.mydomain.com)$ ) {
        return 444;
    }

    location  / {
        proxy_pass               http://app_server;
        ...
    }

} 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-03-20T15:14:33.003

如果您[`ALLOWED_HOSTS`](https://docs.djangoproject.com/en/dev/ref/settings/#allowed-hosts)的设置正确，则可能有人通过欺骗标头来探测您的网站是否存在漏洞。

Django 开发人员现在正在讨论将其从 500 内部服务器错误更改为 400 响应。看[这张票](https://code.djangoproject.com/ticket/19866)。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-10-31T10:17:05.173

使用 Nginx 时，您可以设置服务器的方式只向您希望首先访问 Django 的主机请求。那应该不再给您 SuspiciousOperation 错误了。

```
server {
    # default server

    listen 80;
    server_name _ default;

    return 444;
}
server {
    # redirects

    listen 80;
    server_name example.com old.stuff.example.com;

    return 301 http://www.example.com$request_uri;
}
server {
    # app

    listen 80;
    server_name www.example.com; # only hosts in ALLOWED_HOSTS here

    location  / {
        # ...
    }
    # ... your config/proxy stuff
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-10-23T06:51:02.657

这在较新版本的 Django 中已修复，但如果您使用受影响的版本（例如 1.5），您可以向您的记录器处理程序添加过滤器以摆脱这些问题，如[本文](http://www.tiwoc.de/blog/2013/03/django-prevent-email-notification-on-suspiciousoperation/)所述。

剧透：

```
from django.core.exceptions import SuspiciousOperation

def skip_suspicious_operations(record):
  if record.exc_info:
    exc_value = record.exc_info[1]
    if isinstance(exc_value, SuspiciousOperation):
      return False
  return True

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse',
        },
        # Define filter
        'skip_suspicious_operations': {
            '()': 'django.utils.log.CallbackFilter',
            'callback': skip_suspicious_operations,
        },
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            # Add filter to list of filters
            'filters': ['require_debug_false', 'skip_suspicious_operations'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

# ruby - 如何使用 Ruby Sequel 制作 TIMESTAMP WITH TIME ZONE 列？

> ID：15238512
> 
> 赞同：2
> 
> 时间：2013-03-06T03:35:57.963
> 
> 标签：ruby, postgresql, timezone, sequel-gem

我正在学习 Ruby 和 Sequel，并尝试制作一些表格。

我想将我的时间值保存为 PostgreSQL 数据库中的 UTC 格式。所以我做了一张桌子

```
db.create_table :TestTable1 do
    Timestamp   :field1
end 
```

但我得到了

```
field1 | timestamp without time zone |           | plain    | 
```

我希望我在数据库中的价值有严格的依据。所以我想在UTC强制一切。我认为应该有一种方法来制作`TIMESTAMP WITH TIME ZONE`专栏。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:17:17.227

创建表时，可以指定具体类型：

```
db.create_table :TestTable1 do
  column :field1, 'timestamp with time zone'
end 
```

您可能也想使用`Sequel.default_timezone = :utc`，但这不会影响时间在数据库中的实际存储方式。

# javascript - Sencha Touch 2.1.0 如何让列表高度自动增加

> ID：15238518
> 
> 赞同：2
> 
> 时间：2013-03-06T03:37:14.547
> 
> 标签：javascript, android, mobile, sencha-touch-2

问题是由于列表需要很高。
我希望它可以自动增加高度。
在2.0.1的效果是我需要的[SenchaTouch2.0.1Demo](http://www.senchafiddle.com/#hwcVL)
但是现在项目用2.1.0
的效果是这样的[SenchaTouch2.1.0Demo](http://new.senchafiddle.com/#/L4nGu/)
怎么用2.1.0实现2.0.1的效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:28:46.650

如果您将布局用作**vbox** / **hbox** ，则必须设置**flex**属性。

 ****```
 items: [{
            title: 'tab1',
            scrollable: true,

            layout: 'vbox',

            items: [{

                flex:1,

                xtype: 'label',
                cls: 's-header',
                style: 'padding: 1em; text-align: center;',
                html: 'Header'
            },{
                flex:1,

                xtype: 'list',
                itemTpl: '{title}',
                scrollable: false,
                ... 
```****

# c++ - 生成错误的 Unix 时间戳

> ID：15238535
> 
> 赞同：1
> 
> 时间：2013-03-06T03:38:28.057
> 
> 标签：c++, timestamp

我正在尝试获取某个日期的时间戳，目前我正在使用该函数`mktime()`，但它正在生成当前日期的时间戳，而不是我输入的那个。这是代码：

```
#include <ctime>
#include <iostream>
using namespace std;

long long unixTimeStamp(
    int year,
    int month,
    int day,
    int hour,
    int min,
    int sec
  ) {

  tm uts_time;
  uts_time.tm_year = year - 1900;
  uts_time.tm_mon = month - 1;
  uts_time.tm_mday = day;
  uts_time.tm_sec = sec;
  uts_time.tm_min = min;
  uts_time.tm_hour = hour;

  time_t out = mktime(&uts_time);

  return time(&out);
}

int main() {
  cout << unixTimeStamp(2010,8,29,1,22,9) << endl;
  return 0;
} 
```

输出：

```
1362541046 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T03:59:39.663

您使用`time`不正确。

请参阅该功能的[参考](http://www.cplusplus.com/reference/ctime/time/)`time`。如果参数不是`NULL`，则将其设置为当前日历时间。

删除对的调用并按原样`time(&out)`返回。`out`

```
time_t unixTimeStamp(
    int year,
    int month,
    int day,
    int hour,
    int min,
    int sec
  ) 
{

  tm uts_time;
  uts_time.tm_year = year - 1900;
  uts_time.tm_mon = month - 1;
  uts_time.tm_mday = day;
  uts_time.tm_sec = sec;
  uts_time.tm_min = min;
  uts_time.tm_hour = hour;

  return mktime(&uts_time);
}

int main() {
  cout << unixTimeStamp(2010,8,29,1,22,9) << endl;
  return 0;
} 
```

输出：

> 1283008929

# iphone - iOS：使用没有文件扩展名的 [UIImage -imageNamed:] 会导致性能问题吗？

> ID：15238537
> 
> 赞同：8
> 
> 时间：2013-03-06T03:38:56.597
> 
> 标签：iphone, ios, performance, uiimage

我有一个名为`image@2x.png`. 该文件的图像大小为 1KB。我的应用程序是一个仅限 iPhone 的应用程序。

我通过这个调用在我的应用程序中加载图像：

```
[UIImage imageNamed:@"image"]; 
```

在使用 I/O 活动工具分析 I/O 活动时，我发现有几个与此文件相关的活动导致“没有此类文件或目录”错误，并且这些活动确实需要一些时间。

这些活动就像阅读这些文件：

```
image_2_only_@2x~iphone.png
image@2x~iphone.png
image@2x.png (this one doesn't fail) 
```

令我惊讶的是，每次失败的操作都比成功的操作花费更多的时间。

我怎样才能避免这种性能问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:47:28.513

如果您想防止广泛的文件系统访问，请不要使用`[UIImage imageNamed:]`but `[UIImage imageWithContentsOfFile:]`。

后者不会对图像进行任何自动选择（扩展猜测、视网膜猜测……），并且不会使用内存缓存。

确保您牢记，在使用我的建议时，对文件系统上图像的任何重复访问都将受到非常严厉的惩罚。

我不建议不要`imageNamed:`用于提高应用程序的性能。通常情况正好相反，使用该方法时图像加载会更加优化（缓存）。但是，一旦您确定不会再次加载特定图像并防止过多的文件系统查找，请使用`imageWithContentsOfFile:`. 此外，当内存使用很重要时，实际上建议使用它`imageWithContentsOfFile:`- 没有缓存意味着更少的内存占用。

# c++ - C++ 避免两次删除内存

> ID：15238543
> 
> 赞同：2
> 
> 时间：2013-03-06T03:39:35.730
> 
> 标签：c++, memory-leaks, destructor, memory-management

我在使用 C++ 中的内置指针时遇到了问题。当我的程序终止时，我的类析构函数都会被调用。我有一个数据类、一个队列类和另一个包含使用队列的数据类，如下所示（注意即时粗略编码）：

```
class Data {
  int x;
}

class Queue {
  class Node {
    Data* x;
  }
  Node* head;
}

class C1 {
  Queue q;
}

class C1Queue{
  class Node {
    C1* c;
  }
  Node* head;
} 
```

我还有另一个队列 q2，它不驻留在对象中。我从一个文件中加载了两个队列，所以我说的是（假设 cQueue 是一个 C1Queue）：

```
Data *d = new Data(0);
q2->pushBack(d);
C1 c = new C1();
cQueue->pushBack(c->pushBack(d)); 
```

如您所见，我有一个队列 (q2) 持有指向每个数据的指针，以及一个具有队列的对象，该队列持有指向与 q2 持有的相同数据的指针。现在，当我的程序终止时，我希望释放所有数据。但是，当对象被释放时，要么首先释放 q2，当要释放 C1 对象时，它们释放队列，然后删除与刚刚删除的 q2 相同的数据。或者另一种情况是首先释放对象（我不确定发生哪种排序），然后释放 q2 并运行到已删除的内存中。

所以问题是内存空间被删除了两次，不好。一旦内存被删除，它就会被释放给其他程序使用，因此再次删除该内存空间将导致段错误。

也许我在这里遗漏了一些东西，但是如果没有特殊类型的指针（我不能使用特殊类型的指针），我无法弄清楚如何做到这一点。

我能想到的唯一方法是阻止 C1 对象释放它的队列，但释放它本身的其余部分，但我不知道该怎么做。如果有人可以帮助我，那么我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:55:46.423

由于您（显然）被阻止使用类似的细节`std::shared_ptr`，您可以尝试以下三种补救措施之一：

*   手动重新计数。强制每次将 a`Data`推入队列时，其引用计数都会增加，并在`Queue`清除 a 时减少引用计数。当引用计数为零时，`delete this`（但请确保始终`Data`在堆上分配 s！）
*   指定一个对象来“拥有”这些`Data`元素。只有该对象可以销毁`Data`（您甚至可以使用私有析构函数和友元类强制执行此操作）。您可能需要不止一种。（如果您引用此代理，这将成为一个穷人的`std::shared_ptr`）。
*   使您`Data`的 s 可复制，并使用全新的对象来做所有事情。如果它是不需要保持同步的少量数据（例如，一个包含`Point2D`两个整数的类），则此方法有效。

# android - ViewFlipper 兼容性

> ID：15238548
> 
> 赞同：-1
> 
> 时间：2013-03-06T03:40:01.397
> 
> 标签：android, android-layout, compatibility

我的应用程序在某些版本和某些建议中不起作用。

例如：

*   三星 4.04 -**作品**
*   摩托罗拉 4.04 -**坏了**
*   三星 2.3.6 -**作品**
*   LG 2.2.2 -**坏了**

如果有人知道发生了什么，请告诉我。我觉得这一定很简单。

我的清单声明 min sdk=4 和 max=16。

我使用 ViewFlipper 来更改布局，也许这就是问题所在。该应用程序仅在到达此部分时关闭。

很抱歉没有崩溃日志。

```
public class ImagesActivity extends Activity {

private SensorManager mSensorManager;
private ShakeEventListener mSensorListener;
private ViewFlipper mFlipper;
private Animation Animation, Animation2, Animation3, Animation4;
private Random randomGenerator = new Random();

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.imagesview);

    final LinearLayout myLayout = (LinearLayout) findViewById(R.id.images_view);

    //declaração ViewFlipper das telas
    mFlipper = (ViewFlipper) findViewById(R.id.mFlipper1);

     //declaração das var para o evento Shake
     mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
     mSensorListener = new ShakeEventListener(); 

     //declaração anim 1 - Slide from left
     Animation = (Animation) AnimationUtils.loadAnimation(this, R.anim.slideleft);
     Animation.setFillAfter(true);

     //declaração anim 2 - Slide from right
     Animation2 = (Animation) AnimationUtils.loadAnimation(this, R.anim.slideright);
     Animation.setFillAfter(true);

     //declaração anim 3 - Slide from down
     Animation3 = (Animation) AnimationUtils.loadAnimation(this, R.anim.slideup);
     Animation.setFillAfter(true);

     //declaração anim 4 - Slide from up
     Animation4 = (Animation) AnimationUtils.loadAnimation(this, R.anim.slidedown);
     Animation.setFillAfter(true);

     //Event Shake para execução das telas random
     mSensorListener.setOnShakeListener(new ShakeEventListener.OnShakeListener() {
          public void onShake() {
              int random;
              Random RandomView = new Random();
                 int nextViewIndex = RandomView.nextInt(18);
                 while (nextViewIndex == mFlipper.getDisplayedChild()) {
                     nextViewIndex = RandomView.nextInt(18);
                 }
                random = randomGenerator.nextInt(4);

                if(random ==1)
                    myLayout.startAnimation(Animation);
                else if(random ==2)
                    myLayout.startAnimation(Animation2);
                else if(random ==3)
                    myLayout.startAnimation(Animation3);
                else
                    myLayout.startAnimation(Animation4);

                 mFlipper.setDisplayedChild(nextViewIndex);
          }
          });
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

@Override
  public void onResume() {
    super.onResume();
    mSensorManager.registerListener(mSensorListener,
        mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
        SensorManager.SENSOR_DELAY_UI);
  }

  @Override
  public void onPause() {
    mSensorManager.unregisterListener(mSensorListener);
    super.onStop();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:58:19.073

不要这样做

```
private Animation Animation, Animation2, Animation3, Animation4; 
```

使用更好的名称，你确定你有 18 种不同的观点吗？

您还需要在 ViewFlipper 上设置动画，而不是布局

# sql-server - SQL Server 2012：用户“NT Service\MSSQLServerOLAPService”登录失败。；28000

> ID：15238559
> 
> 赞同：24
> 
> 时间：2013-03-06T03:41:42.313
> 
> 标签：sql-server, ssas

我在 Windows 7 上的 Microsoft SQL Server 2012 中使用分析服务。

我尝试创建挖掘模型并对其进行处理。我在处理它时收到以下错误。

> *OLE DB 错误：OLE DB 或 ODBC 错误：
> 用户“NT Service\MSSQLServerOLAPService”登录失败。；28000。*

如何纠正此问题并成功处理模型？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-06T07:16:34.953

我最近遇到了类似的错误。

我的错误是通过在 ssms 中创建一个新的登录名来修复的，该登录名是错误给我的。

在您的情况下，它将是 'NT Service\MSSQLServerOLAPService'

然后，您需要在“用户映射”页面上的新登录属性中检查“db_datareader”和“db_datawriter”。检查您在顶部使用的数据库，然后检查底部的“db_datareader”和“db_datawriter”，其中显示“数据库角色成员资格：Database_Name”。

希望这可以帮助。

* * *

您还可以尝试：转到“服务器管理器”、“配置”、“服务”搜索您使用的“SQL Server Analysis Services (Instance_Name)”。转到其属性，然后转到“登录”选项卡。如果它使用“此帐户”选项，请确保使用“模拟信息”中多维数据集的数据源中指定的帐户作为用户名和密码。

## 编辑

这样做的原因通常是因为运行该服务的帐户没有正确的权限来执行所请求的操作。

到目前为止，我知道有两种方法可以做到这一点：

1.  将运行该服务的帐户更改为具有正确权限的帐户。
2.  为运行服务的帐户授予正确的权限。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-05-27T04:59:38.193

1-运行“SQL Server 配置管理器”

2-选择“SQL Server 服务”

3-右键单击“SQL Server Analysis Services”并选择属性

4-在“登录”选项卡上，选择“此帐户”。

5-单击“浏览”按钮，然后单击“高级”按钮。

6-单击“立即查找”按钮。现在在下表中找到您的帐户并选择它。

7-当您选择正确的帐户（具有足够的权限）时，返回“登录”选项卡

并输入您的密码

8-重新启动服务并重试您的任务...

我希望这可以帮助...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-22T15:26:59.707

我使用 Amir 的相反逻辑找到了我的解决方案。

*   运行“SQL Server 配置管理器”
*   选择“SQL Server 服务”
*   右键单击“SQL Server Analysis Services”并选择属性。
*   在“登录”选项卡上，选择“内置帐户”。
*   最后选择“本地系统”。

虽然我只是在本地运行东西以进行修改，然后将其推送到生产中。因此，如果您在本地运行，此解决方案可能会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-02T15:11:59.363

请尝试以下步骤：

信用（JetBoy2k）：[https ://social.msdn.microsoft.com/Forums/sqlserver/en-US/0a1ce033-29fb-49a9-944a-ee2ea55e69a8/errors-in-the-highlevel-relational-engine-a-connection -could-not-be-made-to-the-data-source-with?forum=sqlanalysisservices](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/0a1ce033-29fb-49a9-944a-ee2ea55e69a8/errors-in-the-highlevel-relational-engine-a-connection-could-not-be-made-to-the-data-source-with?forum=sqlanalysisservices)

1.  通过在 Visual Studio 中打开数据源配置窗口并在模拟信息窗口中选择使用服务帐户，将模拟模式设置为服务帐户。

2.  进入服务 MMC 控制台（右键单击 Windows 主页按钮，选择运行，然后在运行对话框窗口中，输入 services.msc 并单击确定）。

3.  向下滚动右窗格中的服务列表，直到找到 SQL Server Analysis Services 服务，然后查看“登录身份”列以找到运行该服务的帐户名称。复制完全限定的帐户名称 (NT Service\SSASAccountName) 并关闭服务 MMC 窗口。

4.  在 SSMS 中，单击您需要访问的数据库。

5.  使用以下 SQL 命令为 SSAS 服务帐户创建登录名：

从 WINDOWS 创建登录 [NT Service\MSOLAP$SSASSERVICEACCOUNTNAME]

6.  单击该数据库的安全文件夹。

7.  在安全文件夹下，右键单击用户文件夹，然后在弹出菜单上单击新用户。

8.  在 Database User - New 窗口中，从 User Type 下拉列表中选择 Windows User。

9.  在“用户名”字段中，输入 AS 帐户名称。

10.  单击登录名字段的省略号按钮。

11.  在“选择登录”窗口中，输入帐户名称并单击“确定”。

12.  返回 Database User - New 窗口，输入 dbo 作为 Default schema 值，然后单击 OK。

13.  您现在应该在用户文件夹中看到 AS 服务帐户。

14.  双击用户文件夹下方的角色文件夹，然后双击数据库角色文件夹。

15.  双击 DB-owner 角色。这将打开数据库角色属性 - db_owner 窗口。

16.  在 Database role properties - db_owner 窗口中，单击 Members of this role 窗格下方的 Add 按钮。

17.  在选择数据库用户或角色窗口中，单击浏览按钮

18.  AS 服务帐户将在 Browse for Objects 窗口中列出。选中该帐户的复选框，然后单击“确定”。

19.  返回“选择数据库用户或角色”窗口，单击“确定”。

20.  您现在应该在数据库角色属性 - db_owner 窗口的此角色的成员窗格中看到作为角色成员列出的 AS 服务帐户。

21.  单击确定。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-16T14:36:33.377

我不得不对上面给出的 Gayan Dasanayake 的[回答](https://stackoverflow.com/a/33921883/641833)采取额外的步骤，因为当我完成所有步骤时仍然遇到权限错误。

就我而言，我还必须将用户“NT SERVICE\MSSQLServerOLAPService”添加到实际数据库中，并通过“Securables”部分授予对所有维度和事实表的“选择”权限，方法是右键单击中的用户属性短信服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-25T16:39:19.640

1.  运行“Sql Server 配置管理器”并检查 SQL Server Analysis Services 的“登录身份”帐户名称（...名称...）。
2.  复制此账户名（双击打开再复制）
3.  打开“SQL Server Management Studio”并登录到“数据库引擎”。
4.  转到安全>登录单击“新登录...”并提供复制的名称。
5.  重启服务器

现在应该可以部署了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-12-09T17:37:31.853

我只是有同样的问题，但其他人的答案没有帮助。

就我而言，我这样修复：

1.  打开 SQL Server 配置管理器
2.  在 SQL Services > 双击 SQL Server 并复制完整用户（在我的情况下为 NT Service\MSSQLSERVER）
3.  双击 SQL Server 分析服务
4.  粘贴没有密码的用户

**您可能需要在 Visual Studio 项目中的数据源中设置“使用服务帐户”**

# php - Laravel 错误报告不显示导致错误的文件和行号

> ID：15238560
> 
> 赞同：0
> 
> 时间：2013-03-06T03:41:50.487
> 
> 标签：php, xdebug, laravel

我的视图中有一个错误，然后 Laravel 像这样报告它：

```
Unhandled Exception
Message:

htmlentities() expects parameter 1 to be string, object given

Location:

/var/www/galltransweb/galltransweb/trunk/source/laravel/html.php on line 34

Stack Trace:

#0 /var/www/galltransweb/galltransweb/trunk/source/laravel/laravel.php(40): Laravel\Error::native(2, 'htmlentities() ...', '/var/www/galltr...', 34)
#1 [internal function]: Laravel\{closure}(2, 'htmlentities() ...', '/var/www/galltr...', 34, Array)
#2 /var/www/galltransweb/galltransweb/trunk/source/laravel/html.php(34): htmlentities(Object(Code), 3, 'UTF-8', false)
#3 /var/www/galltransweb/galltransweb/trunk/source/laravel/form.php(454): Laravel\HTML::entities(Object(Code))
#4 /var/www/galltransweb/galltransweb/trunk/source/laravel/form.php(406): Laravel\Form::option(0, Object(Code), '')
#5 /var/www/galltransweb/galltransweb/trunk/source/bundles/former/src/Former/Fields/Select.php(133): Laravel\Form::select('label_type', Array, '', Array)
#6 /var/www/galltransweb/galltransweb/trunk/source/bundles/former/src/Former/ControlGroup.php(170): Former\Fields\Select->__toString()
#7 /var/www/galltransweb/galltransweb/trunk/source/bundles/former/src/Former/Former.php(196): Former\ControlGroup->wrapField(Object(Former\Fields\Select))
#8 /var/www/galltransweb/galltransweb/trunk/source/laravel/view.php(354) : eval()'d code(45): Former\Former->__toString()
#9 /var/www/galltransweb/galltransweb/trunk/source/laravel/view.php(354): eval()
#10 /var/www/galltransweb/galltransweb/trunk/source/laravel/blade.php(71): Laravel\View->get()
#11 [internal function]: Laravel\{closure}(Object(Laravel\View))
#12 /var/www/galltransweb/galltransweb/trunk/source/laravel/event.php(199): call_user_func_array(Object(Closure), Array)
#13 /var/www/galltransweb/galltransweb/trunk/source/laravel/event.php(138): Laravel\Event::fire('laravel.view.en...', Array, true)
#14 /var/www/galltransweb/galltransweb/trunk/source/laravel/view.php(325): Laravel\Event::until('laravel.view.en...', Array)
#15 /var/www/galltransweb/galltransweb/trunk/source/laravel/view.php(546): Laravel\View->render()
#16 /var/www/galltransweb/galltransweb/trunk/source/laravel/response.php(246): Laravel\View->__toString()
#17 /var/www/galltransweb/galltransweb/trunk/source/laravel/laravel.php(138): Laravel\Response->render()
#18 /var/www/galltransweb/galltransweb/trunk/source/public/index.php(34): require('/var/www/galltr...')
#19 {main}

Unhandled Exception
Message:

Module 'xdebug' already loaded

Location:

Unknown on line 0 
```

但对我来说，我没有从这份报告中得到任何结果，因为它没有向我显示文件以及该文件中导致错误的行。有没有办法显示导致错误发生的文件中的文件和行号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:25:58.673

正如 crynobone 所说，它在堆栈跟踪中。不幸的是，对于来自内部核心函数的此类异常错误，它可以告诉您错误在核心中的确切位置，但不会追溯到您在视图中可能犯的错误以提供该行号。

第 2 行显示了调用 htmlentities() 的位置并在第 1 行触发错误处理程序

第 3 行显示了调用 htmlentities() 的 form::option 函数 第 4 行显示了带有实际调用 htmlentities() 的 return 语句的行

所以这告诉您在您调用 Form::select() 的视图中存在问题

查看源代码中的 form::select ，是 $options 数组（Form::select() 的第二个参数）有问题。

问题在于它需要一个字符串但正在获取一个对象，因此请仔细检查 Form::select() 的第二个参数。

# jquery - 手风琴导航，增加深度

> ID：15238562
> 
> 赞同：2
> 
> 时间：2013-03-06T03:42:34.130
> 
> 标签：jquery, accordion

我正在使用此处找到的完美脚本：http: [//vandelaydesign.com/blog/web-development/vertical-accordion/#comment-338149](http://vandelaydesign.com/blog/web-development/vertical-accordion/#comment-338149)。唯一的问题是添加多个级别不起作用。我已经完成了 mad 之类的教程，并且根据作者的页面，它应该可以工作。

我在这里添加了代码：http: [//jsfiddle.net/5mSwk/](http://jsfiddle.net/5mSwk/)

```
$(document).ready(function() {
    $("#nav > li > a").on("click", function(e) {
        if ($(this).parent().has("ul")) {
            e.preventDefault();
        }

        if (!$(this).hasClass("open")) {
            // hide any open menus and remove all other classes
            $("#nav li ul").slideUp(350);
            $("#nav li a").removeClass("open");

            // open our new menu and add the open class
            $(this).next("ul").slideDown(350);
            $(this).addClass("open");
        }

        else if ($(this).hasClass("open")) {
            $(this).removeClass("open");
            $(this).next("ul").slideUp(350);
        }
    });
}); 
```

我尝试过的其他手风琴脚本在同一页面 (bxSlider) 上破坏图像库，即使包装没有冲突。我已经尝试了超过 14 种不同的菜单和 30 多个教程，试图让其中一个在没有冲突的情况下正常工作。

唯一的好处是我几乎秃顶了，所以至少大部分灰色都消失了。任何朝着正确方向的推动将不胜感激。

# google-maps - 无法使用 googlemap 关闭信息窗口

> ID：15238566
> 
> 赞同：2
> 
> 时间：2013-03-06T03:43:06.490
> 
> 标签：google-maps, infowindow

```
var markers = {};
var openedInfoWindow = null;    

function addDoctorLocation(options) 
{
    var gm = Ext.getCmp('mygooglemap');
    var mpoint = new google.maps.LatLng(options.lat,options.lng);
    var marker = gm.addMarker(mpoint,options.marker,false,false, options.listeners);
    markers[options.MainID] = marker;

    infowindow = new google.maps.InfoWindow({
    content: "Hello from this marker"
  });
    google.maps.event.addListener(marker, 'click', function() {
      if (openedInfoWindow != null) openedInfoWindow.close();  // <-- changed this
      infowindow.open(map, marker); 
      // added next 4 lines
      openedInfoWindow = infowindow;
      google.maps.event.addListener(infowindow, 'closeclick', function() {
          openedInfoWindow = null;
      });
    });
} 
```

单击 infowindow 关闭按钮时，没有任何反应。
单击标记时此代码将出现此错误，但信息窗口在 gmpanel 上正确显示

```
TypeError: b.O is not a function
[Break On This Error]   

(82 out of range 43) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:54:51.020

在此处阅读有关[信息窗口](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)的信息。

# php - 如何覆盖 Wordpress 父主题中声明的 php 自定义类中的单个函数？

> ID：15238568
> 
> 赞同：0
> 
> 时间：2013-03-06T03:43:09.407
> 
> 标签：php, wordpress, class, global-variables, wordpress-theming

我正在从 Wordpress 主题创建一个子主题。父主题严重依赖一个自定义类，然后在 functions.php 文件中实例化，如下所示：

```
<?php
require_once (TEMPLATEPATH . '/advanced/specialclass.php');

$specialclass = new SpecialClass();
if(!function_exists('lets_go')) {
    function lets_go(){
        global $specialclass;
        $specialclass->start();
    }
}

lets_go();
?> 
```

我需要在我的子主题中覆盖该类中的一个函数，我试图通过为子主题创建一个 functions.php 文件来做到这一点。我尝试了以下几种变体：

```
<?php
require_once (TEMPLATEPATH . '/advanced/specialclass.php');
require_once (STYLESHEETPATH . '/advanced/specialclassextended.php');

global $specialclass;
$specialclass = new SpecialClassExtended();

function lets_go(){
    global $specialclass;
    $specialclass->start();
}

?> 
```

也许我的问题与对 PHP 全局变量的理解不够好有关，但不管是什么，我都被卡住了。父主题文件中有很多对 $specialclass 的引用，因此通过在子主题中创建新模板文件来替换它们是不切实际的。我真的需要用我的扩展类的实例替换那个全局。这可能吗？我究竟做错了什么？在我到目前为止的所有搜索中，这是我发现的最密切相关的信息，但不幸的是它没有回答我的具体问题：

[https://wordpress.stackexchange.com/questions/30728/using-classes-instead-of-global-functions-in-functions-php](https://wordpress.stackexchange.com/questions/30728/using-classes-instead-of-global-functions-in-functions-php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:25:15.973

我不一定推荐这个...但是，如果您对服务器具有管理访问权限并且可以安装 PECL 扩展，则可以使用[runkit_method_redefine()](http://php.net/manual/en/function.runkit-method-redefine.php)。

否则，您唯一可行的选择是修改该主题。您可以做的一件事就是简单地将 SpecialClass 重命名为 SpecialClassBase 之类的名称，并将派生的名称重命名为 SpecialClass 的原始名称。

如果您在文件末尾包含自己的定义，则不需要更改任何其他内容。它应该只是“工作”。

# templates - 附加点仅在第一次显示对话框时起作用

> ID：15238570
> 
> 赞同：0
> 
> 时间：2013-03-06T03:43:15.223
> 
> 标签：templates, dialog, dojo

我正在扩展 dijit.Dialog 并添加一个模板：

```
定义（[
    "dojo/_base/declare",
    "dijit/对话",
    "dijit/_TemplatedMixin",
    "dijit/_WidgetsInTemplateMixin",
    "道场/数据/ItemFileWriteStore",
    "dojo/text!ps/templates/PrintDialog.html",
    "dijit/form/ComboBox",
    "dijit/表单/按钮",
    "dojox/widget/待机",
    "dojox/布局/TableContainer",
    “dijit/表单/复选框”
]、函数（声明、对话框、TemplatedMixin、_WidgetsInTemplateMixin、ItemFileWriteStore、模板）{

    return declare("ps.PrintDialog", [Dialog, TemplatedMixin, _WidgetsInTemplateMixin], {
        模板字符串：模板，
    小部件InTemplate：真，

```

在我的模板中：

< select data-dojo-type="dijit.form.ComboBox" id="format" name="format" data-dojo-attach-point="formatCombo" title="Format" >

< select data-dojo-type="dijit.form.ComboBox" id="layout" name="layout" data-dojo-attach-point="layoutCombo" title="Layout" >

这是附加点的用法：

```
this.formatCombo.attr('store', this.formatStore);
        this.layoutCombo.attr('store', this.layoutStore);

```

现在，我第一次创建一个新对话框时，它工作正常。如果我随后关闭对话框并创建一个新对话框，则 this.formatCombo 和 this.layoutCombo 未定义，代码将失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:51:56.497

是否存在“尝试注册具有相同 ID 的小部件”的任何问题/错误。如果有人请从两个选择标签中删除 id。

# mysql - 数据库设计，使一张表指向多个和某种递归指针

> ID：15238571
> 
> 赞同：1
> 
> 时间：2013-03-06T03:43:18.760
> 
> 标签：mysql, sql, database-design, join, innodb

我有一些医疗信息想存储在关系数据库中，但不知道如何以最佳方式对其进行建模。

这里的问题是我有几个字段细分为其他字段，同时又细分为其他字段....

例如我有这个 sql 代码：

```
 CREATE TABLE Distribution_patterns(
              id_Distribution_pattern  INTEGER  NOT NULL PRIMARY KEY,
              LEFT_SIDE_VIEW           VARCHAR(40)  NOT NULL,
              RIGHT_SIDE_VIEW          VARCHAR(40)  NOT NULL,
              dorsal_view              VARCHAR(10 ) NOT NULL,
              ventral_ view            VARCHAR(10 ) NOT NULL,              
              CONSTRAINT uc_Info_d_p UNIQUE (id_Distribution_pattern)           
            );

CREATE TABLE lymph_nodes (
              id_lymph_nodes       INTEGER  NOT NULL PRIMARY KEY,
              MANDIBULAR           VARCHAR(40)  NOT NULL,
              scapular             VARCHAR(40)  NOT NULL,
              INGUINAL             VARCHAR(10 ) NOT NULL,
              popliteal            VARCHAR(10 ) NOT NULL,              
              CONSTRAINT uc_Info_l_n UNIQUE (id_lymph_nodes)           
            );

CREATE TABLE evaluation(
          ID_evaluation            INTEGER  NOT NULL PRIMARY KEY,
          Distribution_pattern     INTEGER ,
          lymph_node               INTEGER ,
          Musculoskeletal_system   INTEGER ,
          FOREIGN KEY (Distribution_pattern) references Distribution_patterns (id_Distribution_pattern),
          FOREIGN KEY (lymph_nodes)    references lymph_nodes (id_lymph_node),
          FOREIGN KEY (Musculoskeletal_system) references Musculoskeletal_system_parts (id_Musculoskeletal_system),
          CONSTRAINT uc_Info_evaluation UNIQUE (ID_evaluation)           
        ); 
```

*   分布模式
    *   左侧视图
    *   右侧视图
    *   背面观
    *   腹面观
*   淋巴结
    *   下颌
    *   肩胛
    *   腹股沟
    *   腘窝
*   肌肉骨骼系统
    *   步态评估
    *   小跑的估值
    *   触诊
        *   TIP 胸部
            *   肘部和前臂
            *   CARPO和手指
        *   TIP 骨盆
            *   骨盆
            *   膝盖
            *   霍克
        *   具体测试
            *   卡洪测试
            *   奥托拉尼测试
            *   其他

当然这不是全部数据，因为有大约 200 个字段和 14 个类别......

对于具有更多细分的**“肌肉骨骼系统”** ，这样做是否正确？

有没有其他方法来模拟这种情况，或者我需要有几个表，其中一个 ID 是指向另一个表的指针，它有一个指向另一个表的指针等等......

如果我想做一个查询，给出一个包含“医学评估”所有数据的巨大表，那么最好的方法是什么，几个连接 ON id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:12:06.187

这是一个潜在的大型数据库模式，因此我将只关注肌肉骨骼系统。不过，在我开始讨论之前，我应该提到数据库规范化的重要性。这一点很重要！并且有很多原因。主要是，现在通过设计一个好的、规范化的数据库，您可以在确保数据的完整性和可靠性的同时为自己解决问题。始终牢记“这个数据库将如何增长”，“如果我需要添加更多系统或视图或分布模式怎么办”等。做你自己，你的雇主，帮个忙，继续阅读。简要概述可以在这里阅读：http: [//databases.about.com/od/specificproducts/a/normalization.htm](http://databases.about.com/od/specificproducts/a/normalization.htm)

对数据库设计：

您希望将冗余列和作为其他列子集的列从表中保留到自己的表中。例如，查看您的淋巴结表。如果一年后你意识到你需要再增加一个淋巴结怎么办？还是去掉一个？或者，如果您只从客户端查看一个节点怎么办？与其按照自己的方式做，不如把桌子绑在一个更大的物体上（我不是医生，所以我不确定分析器是什么），比如病人或淋巴系统。或两者。例子：

一个病人有很多系统（病人表和系统表之间的一对多关系） 一个淋巴系统有很多器官（淋巴系统和器官之间的一对多关系） 一个系统或器官有很多测试（一对多关系）系统和测试之间）。

例子：

> **餐桌病人**
> 
> 患者 ID (int PK)
> 
> 患者姓名（字符串）
> 
> 患者姓名（字符串）

此表应仅包含与单个患者有关的数据

> **表系统**
> 
> SystemId(int PK)
> 
> 系统名称（字符串）
> 
> 系统描述（字符串）

该表应该只有特定于所有系统的列。系统可能是淋巴系统、呼吸系统、排泄系统等。

**TablePatient_TableSystems**

> Patient_System_ID(int PK)
> 
> 患者 ID（int FK）
> 
> SystemID(int FK)

你不能有多对多的关系。这张表解决了这个问题。如果您没有这个，您需要在每个表中为每个患者/系统保留冗余记录

> **桌风琴**
> 
> 器官ID(int PK)
> 
> 器官名称（字符串）
> 
> OrganDesc(字符串)
> 
> **TableOrgan_TableSystem**
> 
> Organ_SystemID(int PK)
> 
> 器官ID(int FK)
> 
> SystemID(int FK)

解决系统和器官的多对多问题

现在进行测试。测试是针对器官或系统的吗？或两者？这个例子会说两者

**表测试**

> 测试ID
> 
> 测试名称
> 
> 测试描述
> 
> 测试成本
> 
> **Tabel_Test_Stytem**
> 
> TestSytemID(int PK)
> 
> 测试ID（int FK）
> 
> SystemID(int FK)
> 
> **Tabel_Test_Organ**
> 
> TestSytemID(int PK)
> 
> TestID(int FK) OrganId(int FK)

这里有很多东西，所以我认为这是一个停下来的好地方。通读数据规范化，当您有问题时，请在此处回复（或给我发消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:13:09.953

你说的是层次结构。如果我被要求这样做，我会得到两个表：一个数据和一个参考。

评价表

*   评估 ID
*   零件编号
*   评估文本

参考表

*   零件编号
*   组 ID
*   零件描述

参考表包含这些：

```
PartId  GroupId PartDesc
0   null    Evaluation
1   0   Distribution pattern
2   1   LEFT SIDE VIEW
3   1   RIGHT SIDE VIEW
4   1   dorsal view
5   1   Ventral view
6   0   lymph nodes
7   6   MANDIBULAR
8   6   scapular
9   6   INGUINAL
10  6   popliteal
11  0   Musculoskeletal system
12  11  Gait assessment
13  11  VALUATION OF TROT
14  11  PALPATION
15  14  TIP thoracic
16  15  Elbow and forearm
17  15  CARPO AND FINGERS
18  14  TIP pelvic
19  18  PELVIS
20  18  KNEE
21  18  HOCK
22  11  specific tests
23  22  CAJON TEST
24  22  Ortolani TEST
25  22  OTHER 
```

现在我们有一张整洁的桌子可以使用。我们将如何使用它？好吧，当然是递归 CTE。您没有提到 DB Engine，但几乎所有主要的 DBMS 都可以做到，除了 MySQL。您可以自己查找这个很酷的功能，也可以让我们知道您的数据库引擎，我们可以继续讨论。

# c++ - 无法将单指针转换为双指针

> ID：15238572
> 
> 赞同：1
> 
> 时间：2013-03-06T03:43:24.337
> 
> 标签：c++, arrays, pointers, command-line, command-line-arguments

所以这是我的代码。

```
#include <iostream>
#include <stdlib.h>
#include <string.h>

using namespace std;

float labweight = .1;
float quizweight = .1;
float assignmentweight = .4;
float examweight = .25;
float finalweight = .15;

void process_quiz(int &numquiz, int **quiz, int argc, char *argv[]) {
   for(int i=1; i < argc; i+=2) {
      if(argv[i][0]=='-' && argv[i][1]=='q') {
         numquiz = atoi(argv[i+1]);
         quiz = new int[numquiz];
      }
      else
     std::cout << quiz << " quizzes";
   }
   return;
}

void process_lab(int &numlab, int **lab, int argc, char *argv[]) {
   for(int i=1; i < argc; i+=2) {
      if(argv[i][0]=='-' && argv[i][1]=='q') {
         numlab = atoi(argv[i+1]);
         lab = new int[numlab];
      }
      else
     std::cout << lab << " quizzes";
   }
   return;
}

void process_assignment(int &numassignment, int **assignment, int argc, char *argv[]) {
   for(int i=1; i < argc; i+=2) {
      if(argv[i][0]=='-' && argv[i][1]=='q') {
         numassignment = atoi(argv[i+1]);
         assignment = new int[numassignment];
      }
      else
     std::cout << assignment << " assignmentzes";
   }
   return;
}

void process_exam(int &numexam, int **exam, int argc, char *argv[]) {
   for(int i=1; i < argc; i+=2) {
      if(argv[i][0]=='-' && argv[i][1]=='q') {
         numexam = atoi(argv[i+1]);
         exam = new int[numexam];
      }
      else
     std::cout << exam << " examzes";
   }
   return;
}

void process_final(int &numfinal, int **final, int argc, char *argv[]) {
   for(int i=1; i < argc; i+=2) {
      if(argv[i][0]=='-' && argv[i][1]=='q') {
         numfinal = atoi(argv[i+1]);
         final = new int[numfinal];
      }
      else
     std::cout << final << " finalzes";
   }
   return;
}

int main(int argc, char* argv[]){

    int numquiz, *quiz, numlab, *lab, numassignment, *assignment, numexam, *exam, numfinal, *final;
    if (argc == 9){
        process_quiz(numquiz, &quiz, argc, argv);
        process_lab(numlab, &lab, argc, argv);
        process_assignment(numassignment, &assignment, argc, argv);
        process_exam(numexam, &exam, argc, argv);
    }
    if (argc == 10){
        process_quiz(numquiz, &quiz, argc, argv);
        process_lab(numlab, &lab, argc, argv);
        process_assignment(numassignment, &assignment, argc, argv);
        process_exam(numexam, &exam, argc, argv);
        process_final(numfinal, &final, argc, argv);
    }
    else{
    cout << "Please input things correctly!" << endl;
    }

    cout << numlab << endl;
    cout << numquiz << endl;
    cout << numassignment << endl;
    cout << numexam << endl;
    cout << numfinal << endl;
} 
```

因此，除了以下错误之外，我已经消除了所有其他错误：

```
grade.cpp: In function âvoid process_quiz(int&, int**, int, char**)â:
grade.cpp:17: error: cannot convert âint*â to âint**â in assignment
grade.cpp: In function âvoid process_lab(int&, int**, int, char**)â:
grade.cpp:29: error: cannot convert âint*â to âint**â in assignment
grade.cpp: In function âvoid process_assignment(int&, int**, int, char**)â:
grade.cpp:41: error: cannot convert âint*â to âint**â in assignment
grade.cpp: In function âvoid process_exam(int&, int**, int, char**)â:
grade.cpp:53: error: cannot convert âint*â to âint**â in assignment
grade.cpp: In function âvoid process_final(int&, int**, int, char**)â:
grade.cpp:65: error: cannot convert âint*â to âint**â in assignment 
```

现在我研究了一些关于指针的知识，但我不明白为什么我不能将数组中的值赋给变量！我尝试从函数的开头删除额外的指针，但这并不能解决任何问题。我只是收到错误说我无法从单个指针转换为双精度，并且它说错误是我在 main 中调用函数的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:51:12.113

好吧，举个`line 17`例子。您尝试将指针（由`new`运算符返回）分配给双指针（测验）。

所以你可能想这样做`*quizz = new ...`。但是你知道，取消引用指针而不首先检查它的值是在稍后提出问题。

但无论如何，您应该首先了解指针是什么，如何使用它们等等，而不是解决这个问题。您可能会编译它，但是您编写的内容有很多错误（您通常不希望通过副作用修改函数的参数，因为它很难维护等）

最终不是让它编译，而是安全地到达你想去的地方。逐步学习概念，不要试图走得太快，考虑到您的代码/问题，这将是我的建议。

仅供参考，当您习惯了指针的工作方式时，您应该转向`shared_ptr`更安全的指针。看看它是如何工作[的](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:16:39.227

您的问题是您正在尝试将 int* 分配给 int**。new[n] 运算符不返回指向指针的指针，而是返回指向包含 n 个动态创建的对象的内存块开头的指针。

解决方案是正确传递指针，将函数头更改为

```
void process_quiz(int &numquiz, int *quiz, int argc, char *argv[]) 
```

请注意，您也永远不会对动态创建的数据调用 delete[]，因此您会遇到内存泄漏。虽然我个人不喜欢智能指针，但我建议您针对这个问题阅读它们，并阅读正确的新指针和删除指针。

# .net - protobuf -net 不知道如何序列化 type = object 的数据成员

> ID：15238576
> 
> 赞同：3
> 
> 时间：2013-03-06T03:43:52.043
> 
> 标签：.net, wcf, c#-4.0, protobuf-net

我们有以下类作为 ADO.NET Provider 的一部分，它使用 WCF 通过网络运行。

```
[KnownType(typeof(AdoServiceCommandExecutionScalarResult))]
[DataContract(Namespace = Namespaces.SoafXmlNamespace)]
public class AdoServiceCommandExecutionResult
{
}
[DataContract(Namespace = Namespaces.SoafXmlNamespace)]
public class AdoServiceCommandExecutionScalarResult : AdoServiceCommandExecutionResult
{
    [DataMember]
    public object Result { get; set; }

    public override string ToString()
    {
        return new XDocument(new XElement(GetType().Name, new XAttribute("Result", Result))).ToString();
    }
} 
```

我们正在尝试使用 protobuf-net 进行序列化，但是抛出了无法解析类型对象的异常。

异常消息：

```
No serializer defined for type: System.Object 
```

堆栈轨道：

```
ProtoBuf.Meta.ValueMember.BuildSerializer()
ProtoBuf.Meta.ValueMember.get_Serializer()
ProtoBuf.Meta.MetaType.BuildSerializer()
ProtoBuf.Meta.MetaType.get_Serializer()
ProtoBuf.Meta.MetaType.ProtoBuf.Serializers.ISerializerProxy.get_Serializer()
ProtoBuf.Serializers.SubItemSerializer.ProtoBuf.Serializers.IProtoTypeSerializer.HasCallbacks(CallbackType callbackType)
ProtoBuf.Serializers.TypeSerializer.HasCallbacks(CallbackType callbackType)
ProtoBuf.Serializers.TypeSerializer.ProtoBuf.Serializers.IProtoSerializer.EmitWrite(CompilerContext ctx, Local valueFrom)
ProtoBuf.Compiler.CompilerContext.WriteNullCheckedTail(Type type, IProtoSerializer tail, Local valueFrom)
ProtoBuf.Compiler.CompilerContext.BuildSerializer(IProtoSerializer head, TypeModel model)
ProtoBuf.Serializers.CompiledSerializer..ctor(IProtoTypeSerializer head, TypeModel model)
ProtoBuf.Meta.MetaType.get_Serializer()
ProtoBuf.Meta.RuntimeTypeModel.Serialize(Int32 key, Object value, ProtoWriter dest)
ProtoBuf.Meta.TypeModel.TrySerializeAuxiliaryType(ProtoWriter writer, Type type, DataFormat format, Int32 tag, Object value, Boolean isInsideList)
ProtoBuf.Meta.TypeModel.TrySerializeAuxiliaryType(ProtoWriter writer, Type type, DataFormat format, Int32 tag, Object value, Boolean isInsideList)
ProtoBuf.Meta.TypeModel.SerializeCore(ProtoWriter writer, Object value)
ProtoBuf.Meta.TypeModel.Serialize(Stream dest, Object value, SerializationContext context)
ProtoBuf.ServiceModel.XmlProtoSerializer.WriteObjectContent(XmlDictionaryWriter writer, Object graph)
System.Runtime.Serialization.XmlObjectSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph)
System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)
System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)
System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)
System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)
System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)
System.ServiceModel.Channels.Message.OnWriteMessage(XmlDictionaryWriter writer)
System.ServiceModel.Channels.BufferedMessageWriter.WriteMessage(Message message, BufferManager bufferManager, Int32 initialOffset, Int32 maxSizeQuota)
System.ServiceModel.Channels.TextMessageEncoderFactory.TextMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset)
System.ServiceModel.Channels.HttpOutput.SerializeBufferedMessage(Message message)
System.ServiceModel.Channels.HttpOutput.Send(TimeSpan timeout)
System.ServiceModel.Channels.HttpPipeline.EmptyHttpPipeline.SendReplyCore(Message message, TimeSpan timeout)
System.ServiceModel.Channels.HttpRequestContext.OnReply(Message message, TimeSpan timeout)
System.ServiceModel.Channels.RequestContextBase.Reply(Message message, TimeSpan timeout)
System.ServiceModel.Channels.RequestContextBase.Reply(Message message, TimeSpan timeout)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Reply(MessageRpc&amp; rpc) 
```

有可能解决这个问题吗？

编辑：我们有一个基本上可以做到的自定义例程（为简洁起见）。

```
type.GetAttributes<KnownTypeAttribute>().Select(a => a.Type).Distinct().ForEach(t => AddKnownTypeHierarchy(t));  

public static void AddKnownTypeHierarchy(Type type)
{

    ProtoBuf.Meta.MetaType metaType = RuntimeTypeModel.Default.Add(type, true);
    ...
    var fieldNumber = derivedType.MetadataToken;
    metaType.AddSubType(fieldNumber, derivedType);
    ...
    var memberType = member.MemberInfo.As<PropertyInfo>().IfNotNull(p => p.PropertyType) ?? member.As<FieldInfo>().IfNotNull(f => f.FieldType);
    var field = metaType.AddField(member.Order, member.Name);
    if (memberType == typeof (object) || memberType.EqualsGenericTypeFor(typeof (IEnumerable<>))) field.DynamicType = true;
    ...
} 
```

我们添加逻辑，如果遇到一个对象，它应该被视为动态的。该方法导致以下异常：

```
Dynamic type is not a contract-type: Int32 
```

是否可以添加对将对象视为动态的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:13:05.507

Protobuf 需要特定类型来序列化/反序列化。你需要给它一些特定的东西而不是对象。

# alfresco - 如何检索使用 Java 中的 Rest API 登录后生成的露天票？

> ID：15238578
> 
> 赞同：3
> 
> 时间：2013-03-06T03:43:56.520
> 
> 标签：alfresco

我可以使用 ALfresco REST API 登录到 alfresco。我是通过java类来做的。也能够将响应消息设为“OK”。但是任何人都可以告诉我如何检索登录时生成的票证。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T09:10:39.953

要获得一张票，您通常会调用`http://localhost:8080/alfresco/s/api/login`- （或类似的） - GET 或 POST：

试试这个：

```
curl -XPOST  -H "Content-Type: application/json" -d '{"username":"admin","password":"admin"}' http://localhost:8080/alfresco/s/api/login 
```

它返回一个 JSON 数据结构：

```
{
        "data":
        {
                "ticket":"TICKET_3c255a809fadbf8abddd0546cbe354c2ab6d3995"
        }
} 
```

或者一个基本的 GET：

```
curl 'http://localhost:8080/alfresco/s/api/login?u=admin&pw=admin' 
```

它返回一个包含票证的 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<ticket>TICKET_6f997d0e561b07430c19043d7c42783d08b02489</ticket> 
```

也就是说，如果您想要更高级别的抽象来处理身份验证、会话、超时等低级别通信问题，您可能需要查看 spring webscripts 连接器框架。[https://artifacts.alfresco.com/nexus/content/repositories/public/spring-surf-parent/spring-webscripts/spring-webscripts/apidocs/org/springframework/extensions/webscripts/connector/AlfrescoConnector.html](https://artifacts.alfresco.com/nexus/content/repositories/public/spring-surf-parent/spring-webscripts/spring-webscripts/apidocs/org/springframework/extensions/webscripts/connector/AlfrescoConnector.html)可能是很好的切入点。看看 Alfresco 分享，看看它是如何使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T09:25:41.337

如果您像这里的 java 示例中描述的公共 HttpClient 示例一样执行此操作：[http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Login](http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Login)，

然后可以在响应的正文中找到票证 (method.getResponseBodyAsString();)，它看起来与@andreas-steffan 在他的回答中显示的完全一样。您只需要解析 json 响应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-25T05:37:00.590

下面是相同的java函数。

```
private static String getAlfticket() throws IOException, JSONException { 
        String ticket = ""; 
        URL url = new URL("http://hostname/alfresco/service/api/login u="+USERNAME+"&pw="+PASSWORD+"&format=json"); 
        URLConnection con = url.openConnection(); 
        InputStream in = con.getInputStream(); 
        String encoding = con.getContentEncoding(); 
        encoding = encoding == null ? "UTF-8" : encoding; 
        String json = IOUtils.toString(in, encoding); 
        JSONObject getData = new JSONObject(json); 
        System.out.println(getData.getJSONObject("data").get("ticket") 
                .toString()); 
        ticket =getData.getJSONObject("data").get("ticket").toString(); 
        return ticket; 
    } 
```

下面是类似的链接。我也回答了问题。

“ [Alfresco login api 给出错误请求 400](https://stackoverflow.com/questions/26399016/alfresco-login-api-giving-bad-request-400/26401560#26401560) ”

# git - 如何使用 git 进行部署？

> ID：15238584
> 
> 赞同：0
> 
> 时间：2013-03-06T03:44:38.187
> 
> 标签：git, deployment

我是一个单一的开发人员，我有开发机器和产品机器。我正在 master 分支中开发。当我需要推动产品时，我需要排除一些文件。我无法将它们添加到 .gitignore 中，因为这会使它们无法跟踪。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:52:30.720

我不确定我是否正确理解了您的问题，但您不能（不应该）使用 Git 来部署应用程序。

Git 是分布式源代码控制系统，而不是部署系统。

如果您正在寻找部署工具，我建议您查看（没有双关语）以下内容：

*   [InnoSetup](http://www.jrsoftware.org/isinfo.php) - 易于学习/使用但不是很强大（没有 MSI）
*   [NSIS](http://sourceforge.net/projects/nsis/) - Nullsoft Scriptable Instal System，也很容易学习（无 MSI）
*   [WiX](http://wixtoolset.org/) - 非常强大但非常陡峭的学习曲线
*   [InstallAware](http://www.installaware.com/) - 商业软件，但有免费的有限版本
*   [InstallShield](http://www.installshield.com/) - 商业软件，非常强大，基于 GUI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:56:38.443

Git 不是部署工具，但您可以轻松地采用它来工作，如下所示：

*   当你推送到远程时，它的工作目录将被更新。

因此，通过推送，您可以更新服务器上的文件。

这是程序：

创建两个存储库：（`repoDev`在这里工作），`repoDeploy`（这是您服务器上的存储库）

```
$ git init repoDev
//add some commits to your repoDev

$ git init repoDeploy 
```

内部`repoDeploy`执行：

```
//in repoDeploy
$ git config receive.denyCurrentBranch ignore
$ git config core.worktree ../ 
```

上面的命令定义了，当你推送到 时`repoDeploy`，它的工作目录将随着你的推送而更新。

配置`repoDev`：

```
//in repoDev
$ git remote add deploy URL-of-repoDeploy 
```

推：

```
//in repoDev
//commit some changes
$ git push deploy master 
```

的工作目录`repoDeploy`应该更新。

`prod`为您的和环境使用不同的分支`dev`应该可以解决问题。

`dev`在`dev`分支中使用您的版本，您的`prod`版本应该转到`prod`分支。

如果要将`dev`分支推送到产品服务器，请执行：

```
$ git checkout master
$ git merge dev
$ git push deploy master 
```

也许您还可以通过`repoDeploy`以下方式设置默认分支：

```
git push deploy prod 
```

`prod`将使用分支检出工作目录中的文件。但我没有测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T03:49:27.320

git update-index --assume-unchanged path/

从[git-update-index](https://www.kernel.org/pub/software/scm/git/docs/git-update-index.html)手册页：

> 指定这些标志时，不会更新为路径记录的对象名称。相反，这些选项设置和取消设置路径的“假设不变”位。当“假设不变”位打开时，git 停止检查工作树文件是否有可能的修改，因此您需要手动取消设置该位以告诉 git 当您更改工作树文件时。这在处理具有非常慢的 lstat(2) 系统调用（例如 cifs）的文件系统上的大型项目时有时会很有帮助。
> 
> 此选项也可以用作粗略的文件级机制，以忽略跟踪文件中未提交的更改（类似于 .gitignore 对未跟踪文件所做的事情）。如果 Git 需要修改索引中的这个文件，例如在提交合并时，Git 将失败（优雅地）；因此，如果假定的未跟踪文件在上游发生更改，您将需要手动处理这种情况。

# algorithm - 将数组划分为尽可能多的连续部分

> ID：15238588
> 
> 赞同：3
> 
> 时间：2013-03-06T03:44:57.190
> 
> 标签：algorithm

给定一个正整数数组*A* ，在第一个部分的和 >= 比第二个部分的和，第二个部分的和 >= 比第三个部分的和的条件下，找到最大**连续**部分的数量， 等等。

我知道需要动态编程。我想到了计算所有可能的分区然后将该算法转换为记忆版本的蛮力。

另一个想法是向后遍历数组，从最后一个元素作为一个分区开始，然后将元素相加，直到它们的总和 >= 比下一部分的总和。

任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:59:49.740

这是一个有趣的问题。它类似于原始的分区问题，只是这里分区的总和需要按单调递增的顺序排列。动态规划递推关系如下：

```
numP[i] = max {numP[i-j] + 1} for those values of j (1<=j<=i) such that sum(A[i-j,i-j+1,...,i] >= lastSum[i-j])
        = 1 for i = 1

lastSum[i] = the sum of the last partition in numP[i] solution.
           = A[0] for i = 1;

lastI[i] = starting index of the last partition in numP[i] solution; // this is needed to obtain the partitions in the solution 
```

这里`numP[i]`表示可以使用数组的第一个`i`元素（数组非零索引）获得的最大分区数。我们递归地尝试寻找考虑`ith`数组元素的所有可能的解决方案，并输出获得的最大分区数。`j`表示最后一个分区开始的索引。`lastSum[i]`并且`lastI[i]`已经在上面定义。

这是动态编程解决方案的java实现。

```
void getMaxPartitions (int[] A) {

   int len = A.length;
   int[] numP = new int[len+1];
   int[] lastSum = new int[len+1];
   int[] lastI = new int[len+1];

   numP[1] = 1;
   lastSum[1] = A[0];
   lastI[1] = 0;
   for (int i = 2; i <= len; i++) {
     int maxIndex = 0;
     int maxPs = 0;
     int maxSum = 0;
     for(int j = 1; j <= i; j++) {
       int sum = 0;
       for(int k = i-j; k < i; k++) {
         sum += A[k];
       }
       if(sum >= lastSum[i-j]) {
         if(maxPs < numP[i-j] + 1) {
           maxPs = numP[i-j]+1;
           maxSum = sum;
           maxIndex = i-j;
         }
       }
     }
     numP[i] = maxPs;
     lastSum[i] = maxSum;
     lastI[i] = maxIndex;
   }
   System.out.println("max partitions = " + numP[len]);
   int i = len;
   while (i > 0) {
     System.out.println(lastSum[i]);
     i = lastI[i];
   }
} 
```

该程序针对以下输入进行了测试，结果如下：

```
(1) {3,4,7,1,5,4,11}     max partitions = 5 {3,4,8,9,11}
(2) {1,2,3,4,5,6,7,11}   max partitions = 8 {1,2,3,4,5,6,7,11}
(3) {1,1,1,1,1,1,1,1,1}  max partitions = 9 {1,1,1,1,1,1,1,1,1}
(4) {9,8,7,6,5,4,3,2,1}  max partitions = 3 {9,15,21}
(5) {40,8,7,6,5,4,3,2,1} max partitions = 1 {76} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:57:47.853

问题中建议的贪心算法不起作用。您可能认为列表的最后一个元素确实应该是它自己的一个分区，但这里有一个反例：

[16,15,1,5,7]

如果你有 7 个作为一个分区，你最终会得到 2 个分区。但是 16,15,(1+5+7) 是更好的解决方案。

我建议你看看[Integer/Discrete Programming via Branch and Bound](http://www.sce.carleton.ca/faculty/chinneck/po/Chapter12.pdf)

您从最后一项开始，您的分支是您选择分区的不同选择（最后一项为 n），您通过考虑 >= 规则检查部分解决方案的可行性，并且您的目标函数是最大化分区数。一个好的边界函数是假设所有剩余的项目都是大小为 1 的分区。

我的另一个建议是在颠倒列表后重新表述问题，这样会更直观。反转列表并将规则更改为 <= 并从开头而不是结尾开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:04:58.030

我最初打算使用一种贪心算法，但确实需要在这里实现一个动态算法。

从头开始看起来更直观。主要思想是，对于递归中的给定步骤，我们有一组已建立的分区、一个正在进行的分区以及序列的其余部分。然后，算法必须在向当前分区添加下一个（或前一个元素，如果向后移动，这是我们在下面的代码中所做的）和完成分区之间选择最合适的解决方案，或者在此处终止当前分区并完成分区（如果适用：当前分区可能未达到在此步骤终止的最小总和）。

我们必须跟踪分区`p`、当前位置`i`、当前部分的累计总和`s`以及之前的总和`s'`。

这是 OCaml 中可能的实现（代码未测试）：

```
let  partition_by_growing_sums a =
    let n = Array.length a in
    let rec pbgs p s s' i =
       if i < 0 then  1 + List.length l, l::p
       else let x = a.(i) in
       if x+s >= s' then
         let n1, l1 = pbgs p (x+s) s' (pred i)
         and n2, l2 = pbgs (i::p) 0 (x+s) (pred i) in
         if n1 > n2 then n1, l1 else n2, l2
       else pbgs p (x+s) s' (pred i)
    in pbgs [] 0 0 (pred n) 
```

对于记忆，您需要跟踪从每个位置向前（或向后）完成的最佳分区，但此分区取决于该位置之后（或之前）的分区所达到的总和，因此任何记忆的计算只能用于导致该位置相同状态的分区。我不确定这会非常有效。

# vb.net - 如何在使用 vb.net 从一个 Excel 工作簿复制到另一个工作簿时删除数据库连接（在复制的一个中）

> ID：15238602
> 
> 赞同：1
> 
> 时间：2013-03-06T03:46:41.340
> 
> 标签：vb.net

我遇到了大麻烦...以下是我的程序运行良好...但是在复制新工作簿（copy.xlsx）后，数据库连接与（test.xlsx）的数据库连接相同......这是我不想要的...请在复制时帮助删除此类数据库连接，并且仅将内容复制到新工作区

```
 Dim filePath As String = directory & "\test.xlsx"
        Dim filePath1 As String = directory & "\copy.xlsx"
        Dim xlobj As New Microsoft.Office.Interop.Excel.Application()
        Dim w As Workbook
        Dim w1 As Workbook
        Dim s As Worksheet
        Dim s1 As Worksheet
        Dim ws As Worksheet
        Dim wsCount As Integer = 0

        Dim FileToDelete As String = directory & "\copy.xlsx"
        If System.IO.File.Exists(FileToDelete) = True Then
            System.IO.File.Delete(FileToDelete)
            ''MsgBox("File Deleted")
        End If

        ' ''To Create a new copy.xlsx file
        Dim xlWB As Workbook
        Dim xlWS As Worksheet
        Dim misValue As Object = System.Reflection.Missing.Value
        xlWB = xlobj.Workbooks.Add(misValue)
        xlWS = xlWB.Sheets("Sheet1")
        xlWS.SaveAs(directory & "\copy.xlsx")
        xlWB.Close()

        w = xlobj.Workbooks.Open(filePath)
        w1 = xlobj.Workbooks.Open(filePath1)
        ''it will count the number of sheets in source file
        For Each ws In w.Worksheets
            wsCount = wsCount + 1
        Next
        For i As Integer = 1 To wsCount
            s = w.Worksheets.Item(i)
            s1 = w1.Worksheets.Item(i)

            ' it will copy and paste sheet  from one to another with formula
            s.UsedRange.Copy()
            s1.PasteSpecial()
            ''to remove filter
            If s1.AutoFilterMode = True Then
                s1.AutoFilterMode = False
            End If
            ''to delete connections
            If w1.Connections.Count > 0 Then
                For j As Integer = 1 To w1.Connections.Count
                    w1.Connections.Item(j).Delete()
                Next j
            End If
            ''s1.UsedRange.Formula = s.UsedRange.Formula
        Next

        w.Save()
        w1.Save()
        w.Close()
        w1.Close()
    Catch ex As Exception
        Hndl_Exception("Error accessing Excel: " + ex.Message)
    End Try 
```

# unit-testing - 重复测试用例

> ID：15238605
> 
> 赞同：0
> 
> 时间：2013-03-06T03:46:58.930
> 
> 标签：unit-testing, testing, tdd

我的问题是是否可以为每个场景重复相同的测试断言或案例？

这里的场景是如果我有一个函数，那么可以使用涉及不同参数组合的不同场景来模拟这个函数。

例如，我有一个具有 3 个可能场景的函数，在每个场景中，每次在此函数上模拟此场景时都会发生 3 个类似事件。

当我为场景 A 编写测试时，我将编写 3 个断言来测试此场景中涉及的 3 个事件。是否可以为其他场景重复相同的断言模式？

断言可能不一定相同，但它们具有相同的模式。

我希望有人能理解我的意思，我知道这太笼统了，因为如果这确实适用于大多数情况，我想要一个笼统的观点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T04:00:03.477

根据您使用的语言/工具集/测试框架，参数化测试可能是解决方案。它们允许您编写一个使用不同参数多次调用的单个测试，并且是组合仅在输入或预期输出方面不同的测试用例的好方法。

下面是使用 C#/NUnit 的测试外观的简单示例：

```
[TestCase(true, false, 5)]
[TestCase(false, true, 99)]
public void Test_Foo_Bars(bool conditionA, bool conditionB, int expectedResult)
{
    var x = new MyClass(conditionA);
    var result = x.Foo(conditionB);
    result.ShouldBe(expectedResult);
} 
```

该测试执行两次；TestCase 属性中指定的每组参数一次。

确切的语法和用法当然取决于您的工具集，但基本思想是相同的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T03:52:15.403

真正由您来定义什么是充分的测试。

我问自己的一些问题：

单元测试是否测试所有代码路径？我是否涵盖典型案例？我是否涵盖角落案例？我是否涵盖特殊情况（即错误输入）？

我理解你的意思，我认为在多个场景中使用相同/相似的测试用例没有任何问题，只要你涵盖上述问题。

# ruby - 你如何在 ruby 中“跟踪”命令的输出

> ID：15238607
> 
> 赞同：1
> 
> 时间：2013-03-06T03:47:21.087
> 
> 标签：ruby, shell

我所说的 tail 是在它运行时捕获命令输出，而不是在执行结束时获取它。例如，如果您执行一个长时间运行的命令，它将如下所示：

```
# Run command
puts `ey deploy`
# Nothing happening for a while....
# ...
# Now see all of the output at once. 
```

我想做的是通过 ruby​​ 运行一个命令，并在它发生时查看它的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:52:00.453

如您所见，反引号将等待整个命令完成，然后将其输出作为单个字符串返回。要获得生成的输出，请尝试[`Open3::popen2e`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen2e)

这是一个使用 bash 循环的示例，该循环在每行之间休眠一秒钟，以演示此接口的增量流性质：

```
require 'open3'

CMD = %{for ((i=0; i<4; i++)); do echo $i; sleep 1; done}

Open3.popen2e('bash', '-c', CMD) do |i,oe,t|
  oe.each { |line| puts line }
end 
```

# mysql - 我可以在 MySQL 中自动为 SSL 证书插入 PEM 文件的密码吗？

> ID：15238609
> 
> 赞同：2
> 
> 时间：2013-03-06T03:47:27.827
> 
> 标签：mysql, ssl, pem

每当我的服务器出现故障时，我都需要登录并手动重新启动 MySQL，这样我才能输入 PEM 文件的密码。

有没有办法自动化这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:27:06.490

用于`openssl`删除您的私钥的密码：

```
cp mysql.key mysql.key.orig
openssl rsa -in mysql.key.orig -out mysql.key 
```

您将被要求输入密码；之后，无需输入密码即可使用密钥。

# cocoa - 如何访问应用程序的共享 NSTextView

> ID：15238612
> 
> 赞同：1
> 
> 时间：2013-03-06T03:47:41.457
> 
> 标签：cocoa, osx-mountain-lion, nstextfield, nstextview

我想向所有文本字段的上下文菜单添加一个菜单项。如果我掌握了整个应用程序中所有 NSTextField 使用的 NSTextView 类型的内部字段编辑器，我就可以做到这一点。事情是我能想到的唯一方法，就是从 [window firstResponder] 访问它。有谁知道另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:23:55.613

我能想到的另一种方法是继承 NSTextField 以通过覆盖*menuForEvent*方法来扩展其行为。

最后使用窗口委托中的*windowWillReturnFieldEditor*方法返回自定义字段编辑器的实例。

# image - 新的 Google 图片分析跟踪

> ID：15238615
> 
> 赞同：0
> 
> 时间：2013-03-06T03:48:03.567
> 
> 标签：image, google-analytics

我想跟踪何时有人点击 Google 图片上的“查看原始图片”并查看我从我的域托管的一张图片。我更喜欢谷歌分析，但我找不到一种方法来插入谷歌分析 javascript，我可以做到这一点。

主要问题是我想让谷歌继续在他们的图像搜索结果中嵌入图像，所以 URL 仍然必须是图像或图像代码。

我尝试使用 .htaccess 将所有图像重定向到具有“image/jpeg”标头并显示图像的 PHP 脚本，但它具有“image/jpeg”标头，因此我无法插入任何 html 或 javascript 代码。

我尝试将图像重定向到具有“位置”标头的 PHP 脚本，但同样，我无法插入任何其他代码。

我尝试回显图像代码，这样 .jpg 图像可以嵌入标签中，如果该人点击查看原始图像，我在图像数据底部插入的任何其他代码，如谷歌分析 javascript 被执行，但没有人愿意看到很多奇怪的字符。

好吧，我想要一些“干净和简单”的东西，不会破坏我在 Google 上的图像位置，但这并不是那么容易，或者不可能得到我想要的东西......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:26:42.297

您将无法使用 Google Analytics 跟踪图像，因为无法在图像中插入 Google Analytics 跟踪代码。但是，许多服务器会记录对其文件的访问 - 请参阅 Wikipedia on [server logs](http://en.wikipedia.org/wiki/Server_log)。询问您的托管服务提供商在哪里可以访问您的日志文件——通常会提供可视化这些数据的软件。

# jquery - 页面加载时在屏幕上滑动图像（缓存问题）

> ID：15238617
> 
> 赞同：0
> 
> 时间：2013-03-06T03:48:36.963
> 
> 标签：jquery, slide

我试图在页面加载时在屏幕上滑动图像，但是它在执行脚本之前第一次加载图像时可以工作。第二次它工作正常，我想这是由于缓存。

有没有人可以解决我的问题。这是我到目前为止所拥有的：

```
$(document).ready(function() {
    $('#1-slide').animate({'right':'0'},255,'linear', function(){
        console.log('Done Animation);
    });
} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:53:56.200

您可以并且我相信应该使用标准的预加载功能或插件预加载您的图像。这是一个例子：

```
$.fn.preload = function() {
    this.each(function(){
        $('<img/>')[0].src = this;
    });
}

// Usage:

$(['img1.jpg','img2.jpg','img3.jpg']).preload(); 
```

这将确保预先加载图像。

# python - 我想要一个秒表来做我的智商测试

> ID：15238619
> 
> 赞同：0
> 
> 时间：2013-03-06T03:48:52.117
> 
> 标签：python, timer, stopwatch

我正在做一个智商测试。我想放一个计时器，当用户完成测试时输出一个值，并将其倒数乘以正确回答的问题数。这看起来很复杂，但实际上我只需要一个带输出的计时器。有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:52:13.170

不确定，但你可以尝试这样的事情

```
from datetime import datetime

if startTest:
    startTime = datetime.today()

...

if endTest:
    timeSpent = datetime.today() - startTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:58:44.233

PyQt 很棒，这些链接应该可以帮助您入门：

[http://pyqt.sourceforge.net/Docs/PyQt4/classes.html](http://pyqt.sourceforge.net/Docs/PyQt4/classes.html)

[http://zetcode.com/tutorials/pyqt4/](http://zetcode.com/tutorials/pyqt4/)

但是，您需要向周围的人展示一些帮助您的进展，因此首先检查这些链接，一旦您开始遇到真正的障碍，请回来询问具体问题。

# android - 批准来自 android 应用程序的 facebook 照片

> ID：15238620
> 
> 赞同：0
> 
> 时间：2013-03-06T03:49:20.243
> 
> 标签：android, facebook

我的目标是将图片从 android 应用程序发布到用户的 facebook 墙上，而不要求他批准。

我使用以下代码发布图片：

```
String comment = editText.getText().toString();

byte[] data;
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
data = baos.toByteArray();

Bundle postParams = new Bundle();
postParams.putString("message", comment);
postParams.putByteArray("picture", data);

Request.Callback callback = new Request.Callback() {
    public void onCompleted(Response response) {

        FacebookRequestError error = response.getError();
        if (error != null) {
            Toast.makeText(SendActivity.this, "Facebook post error.",
                    Toast.LENGTH_SHORT).show();
            Log.e(TAG, error.toString());
        } else {
            Toast.makeText(SendActivity.this, "Posted to facebook!",
                    Toast.LENGTH_LONG).show();
        }
    }
};

Request request = new Request(session, "me/photos", postParams,
        HttpMethod.POST, callback);

RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

在 facebook 应用设置中，我添加了两个权限：user_photos 和 publish_actions。该应用程序未处于沙盒模式。

当我使用该应用上传图片时，它会转到与我的应用名称相同的相册，并且有一个标签表明这张照片是从应用上传的，所以我需要批准或拒绝它。**如果没有“批准”阶段，我如何发布图片？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:18:40.560

I think you need the publish_stream permission (not publish_action).

See [https://developers.facebook.com/docs/reference/api/user/#photos](https://developers.facebook.com/docs/reference/api/user/#photos)

# html - 将 HTML 转换为 Jade

> ID：15238623
> 
> 赞同：0
> 
> 时间：2013-03-06T03:49:27.840
> 
> 标签：html, node.js, tumblr, pug

我正在编写一个 Node.js 应用程序（使用 Jade 和 Express），它从 Tumblr 博客中获取帖子并显示它们。不幸的是，Tumblr 向我的网站发送了一个原始 HTML 块，它显示在主页上（它应该在*哪里，只是***它仍然是一个原始 HTML 块**）。

我将如何将这块原始 HTML 转换为我需要的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:29:03.843

您需要使用它来将`!{}`其显示为 HTML

```
.content !{post.content} 
```

# java - 我应该在 if 语句中放入什么来获取子类对象元素？

> ID：15238624
> 
> 赞同：0
> 
> 时间：2013-03-06T03:49:29.633
> 
> 标签：java

```
public static ArrayList <Student> createStudents()
{
    ArrayList<Student> students;
    students = new ArrayList<Student>();

    students.add(new UndergradStudent("Kvin", 15, 'M', 4));
    students.add(new GraduateStudent("Kaley", 24, 'F', "Expert Systems"));
    students.add(new UndergradStudent("Mike", 25, 'M', 2));
    students.add(new GraduateStudent("Bob", 20, 'F', "Extreme Programming"));

    return students;
}
public static void printGradStudents(ArrayList<Student> students)
{
    int count;
    Student student;
    System.out.println("\n\nList of Graduate Students:\n");

    for (count=0; count<students.size(); count++)
    {
        student = students.get(count);
        if (?)
        {
            System.out.println(student);
        }
    }
} 
```

##研究生是Student的子类，如果只想打印研究生的信息，if语句中应该放什么？##

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:51:00.363

```
if(student instanceof (GraduateStudent)) 
```

你想检查传入的类是否是GraduateStudent 或underGraduate 的实例。它将返回一个布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:51:16.310

```
if (student instanceof GraduateStudent) 
```

那应该处理它。instanceof 检查它是否是该类的成员或继承自该类。所以 student 将是 GraduateStudent 和 Student 的一个实例

### 更新

正如评论中正确提到的那样，`showInfo()`向每个实例添加一个类将是另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:51:31.503

您可以使用`instanceOf`运算符

```
 if(student instanceOf GraduateStudent) 
```

# mysql - 配置mysql和freeradius

> ID：15238632
> 
> 赞同：2
> 
> 时间：2013-03-06T03:49:59.897
> 
> 标签：mysql, freeradius

我刚刚从 tarbal 版本 freeradius-server-2.2.0.tar.gz 安装了 freeradius。comile 和 make install 运行良好。我也可以先运行 radius -X 以在调试模式下运行。

然后我尝试配置 freeradius 以便可以使用 mysql 数据库运行。

我在站点可用/默认上配置授权，记帐，取消注释在 radiusd.conf 上包含 sql 并在 sql.conf 上配置连接

然后我从 schema.sql 和 nas.sql 将模式导入 mysql 数据库

然后，当我尝试运行 radiusd -X 时，出现如下错误：

```
Could not link driver rlm_sql_mysql: rlm_sql_mysql.so: cannot open shared object file: No such file or directory
Make sure it (and all its dependent libraries!) are in the search path of your system's ld.
/usr/local/etc/raddb/sql.conf[22]: Instantiation failed for module "sql"
/usr/local/etc/raddb/sites-enabled/default[177]: Failed to find "sql" in the "modules" section.
/usr/local/etc/raddb/sites-enabled/default[69]: Errors parsing authorize section. 
```

任何人都可以帮助我如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T11:18:21.610

您是否取消了radiusd.conf 中“$INCLUDE sql.conf”的注释？

如果您使用 Debian、ubuntu ... 尝试“apt-get install libmysqlclient-dev”

# php - Ajax 请求在 Google Chrome 的结果中返回响应标头

> ID：15238633
> 
> 赞同：0
> 
> 时间：2013-03-06T03:50:02.190
> 
> 标签：php, ajax, jquery, request

在发送请求时，我第一次在 Google Chrome 中将 Ajax 请求的响应标头作为结果，在此请求 ajax 结果正确之后。Requests 在 Mozilla Firefox 中一直运行良好。

这是我的 Ajax 代码：

```
jQuery.ajax({
    type: "GET",
    url: "get_product_links.php?product_id="+productval,
    success: function(data){
        jQuery('#prodcut_links').html(data);
        jQuery('#product_title').hide();
    }
}); 
```

结果响应是（错误：获取此结果）：�HTTP/1.1 200 OK 日期：星期三，2013 年 3 月 6 日 03:04:28 GMT 服务器：Apache Vary：接受编码内容编码：gzip 内容长度：525 连接: 关闭 Content-Type: text/html ���Mo�0������0%��ر�n��k�^z,dYN�ْ!)u��G�YPt���I ������p�e����Fd�2.-�.����Ee�l�s�T�t)�u��P�ʳ��p��AY�L ��˶ *j�����ཧ:+�491?�L�O�/0] q��%���9��-'�j��zz�Ze,����uN|?莝aZt��V��kO��ǃQ�h�:������E ��l��3����f* ��'�r�VI�Z�R��v�p���� ��#�Ø�b š�pg$zy��-���2��őv ��FQ�6��t���</p>

get_product_links.php 包含（第一次请求后成功执行）：此文件使用数据库结果生成简单的 HTML 响应。回复 ：

```
<b><div align='center' style='width:569px;color:#003486;' >myproduct</b> &nbsp;<a data-lightview-options="skin: 'light', width: 500" data-lightview-type="iframe" class="lightview rightmost" href="myorder.php" style="text-decoration:none" >
<button type="button">ADD NEW ORDER</button>
</a></div>
<b> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:55:31.287

添加 html dataType 可能有助于解决此编码问题。

```
jQuery.ajax({
  type: "GET",
  url: "get_product_links.php?product_id="+productval,
  dataType: "html",
  success: function(data){
    jQuery('#prodcut_links').html(data);
    jQuery('#product_title').hide();
  }
}); 
```

# html - Pandoc 和表格

> ID：15238645
> 
> 赞同：1
> 
> 时间：2013-03-06T03:51:17.327
> 
> 标签：html, html-table, pandoc

我有一些 HTML 格式的 SAS 输出，我需要对其进行转换。输出有一个表格，当我使用 Pandoc 转换它时，我希望能够保持表格格式。有什么建议么？

# javascript - 将 java 变量传递给 javascript 函数

> ID：15238647
> 
> 赞同：2
> 
> 时间：2013-03-06T03:51:25.087
> 
> 标签：javascript, jsp

我有以下一段代码，它是 js lib 的输入内容：

```
content:'<a href="x.com" onclick="confirmDel("<%=user.name%>")" > <img src="delete.png" alt="Delete" width="15px" height="15px"></a></div>'

confirmDel(name)
{
 if(confirm("delete " + name +" ?"))
   {
     // Do delete stuff
   } else
   {
   return false;
   }
} 
```

当我单击删除链接时，它不会提示我删除确认警报！我在这里想念什么？是关于我将变量传递给函数的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:52:59.507

```
 content:'<a href="x.com" onclick="confirmDel(\''+<%=user.name%>+'\')" > <img src="delete.png" alt="Delete" width="15px" height="15px"></a></div>' 
```

在 onclick 中传递参数的问题..使用转义字符..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:59:33.157

```
confirmDel(name)
{
 if(confirm("delete " + name +" ?"))
   {
     // Do delete stuff
   } else
   {
   return false;
   }
} 
```

这是不正确的。它介于声明函数和调用它之间，但也没有真正做到。

您需要声明该函数，然后调用它来执行该代码。您现在在 onclick 部分调用它，但您需要正确定义它

```
function confirmDel(nameStr)
{
 if(confirm("delete " + nameStr +" ?"))
   {
     // Do delete stuff
   } else
   {
   return false;
   }
} 
```

# c++ - 初始化和设置向量

> ID：15238654
> 
> 赞同：0
> 
> 时间：2013-03-06T03:51:57.460
> 
> 标签：c++, vector, initialization

```
vector<int> v;
v.push_back(0); //you have to do this
//v[0] = 0;     //this gives you an error
v[0] = 1000000; //but now you can set it 
```

那么，为什么第一次初始化一个vector，就得push_back，然后就可以设置了呢？对于原始类型，例如 int，您可以执行 int i = 0; 用于初始化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:07:43.283

如果您事先知道向量的大小，则绝对**不要**使用简单的 push_back() 序列，因为如果您的向量很大（例如，>512 个元素），重新分配可能会浪费时间。

最好这样做：

### 选项 1：预分配和推送

```
vector<int> v;
v.reserve(N); // N is the expected size, but right now [0] is undefined. 
for (...) { 
  v.push_back(...);  // No problems in adding more than N elements, but may have to reallocate.        
} 
```

### 选项 2：调整大小和填充

```
vector<int> v;
v.resize(N);
for (size_t i=0;i<N;i++)
  v[i] = ...; // You can't write past N-1 here! 
```

### 选项 3：直接使用正确的大小创建，然后填充

```
vector<int> v(N);
for (size_t i=0;i<N;i++)
  v[i] = ...; // You can't write past N-1 here! 
```

### 选项 4：创建一个大小正确的向量并初始化为某个固定值

```
vector<int> v(N,val); // v[0:N-1] are all equal to val 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T03:54:14.520

因为当你第一次创建一个向量时，它是空的，所以`vector[0]`不存在。`push_back`向向量添加一个元素，然后您可以修改或读取它`vector[i]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T03:54:58.310

因为`std::vector<int>`不是`std::map<int, int>`。

`std::vector`要求您手动`push_back()`或（在 C++11 中）`emplace_back()`将元素包含在集合中。当然，它的一些构造函数允许您在其中包含初始元素。当然还有它的赋值运算符。

subscript( `[]`) 运算符只能用于读取和/或修改*现有*元素。使用越界（不存在）元素进行索引`operator[]`会导致*未定义的行为*。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T16:35:19.543

只是为了让一切 100% 清楚，你的向量声明，

```
vector<int> v; 
```

在某种意义上类似于变量的声明：

```
int x; 
```

如果你想要，说，

```
cout << x; 
```

你会得到垃圾。虽然，如果你声明

```
int x(2); 
```

一切都会好起来的。同样对于向量：声明

```
vector<int> v; 
```

为向量分配一些内存空间，但不填充它。然后您可以指定

```
vector<int> v(2); 
```

这意味着您现在已经声明了一个包含两个元素的向量，或者选择仅向量功能 - push_back。正如您所注意到的，这会将元素添加到您的向量中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T03:55:05.300

您无法访问`v[0]`，因为还没有`v[0]`。向量开始时​​默认构造为空向量。您将一个元素推到背面，它的大小会增加 1。然后您就可以访问刚刚添加的元素。如果您希望它从一个元素开始，请使用适当的构造函数：

```
std::vector<int> v(1); //one zeroed integer 
```

你在比较苹果和橘子。`int i = 0;`会像`std::vector<int> v;`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T04:13:40.980

您应该首先分配内存用于设置元素值，例如

```
v.resize(new_size); 
```

或使用`push_back`方法添加元素。

# android - Android 全局键事件

> ID：15238666
> 
> 赞同：2
> 
> 时间：2013-03-06T03:52:50.910
> 
> 标签：android, android-intent

我有一个 USB 热电偶设备，它通过按住“Num Lock”键 3 秒钟来启动/停止。它是为 MS Windows 操作系统设计的。如果插入 Android 设备（带有 USB OTG 适配器），它将注册为键盘/鼠标复合设备。在 MS Windows 操作系统上，我可以通过发送全局击键来启动/停止设备。Android 不允许我发送全局击键。有没有办法模拟全局键事件或将键事件发送到 USB 设备？

# python - 从文本文件 Python 中的特定行中删除空格

> ID：15238668
> 
> 赞同：0
> 
> 时间：2013-03-06T03:53:06.287
> 
> 标签：python, text-files

我有文本文件，其日期存储在每个文件的第 7 行，格式如下：

```
 Date:  1233PM 14 MAY 00 
```

我想搜索每个文件并将新的第 7 行格式化为：

```
 Date:  1233PM 14 MAY 2000 
```

所以，基本上，我只需要在第七行的最后两位数字前面加上一个“20”。

可能不是最困难的问题，但我一直遇到困难，因为 textfile.readlines() 将所有内容读入第一个 (textfile[0]) 位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:01:09.023

您可以读取所有文件，更改指定的行然后再次保存：

```
arc = open('file_name.txt').readlines()[0].split('\r')

#Do what you want with the 7th line i.e. arc[6]

new_arc = open('file_name.txt','w')
for line in arc:
    new_arc.write(line)
    new_arc.write('\n')

new_arc.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:07:12.517

试试这个：

```
# open file
f = open("file.txt" , 'rU+b')
lines = f.readlines()

# modify line 7
lines[6] = lines[6][:-2] + "20" + lines[6][-2:]

# return file pointer to the top so we can rewrite the file
f.seek(0)
f.truncate()

# write the file with new content
f.write(''.join(lines))
f.close 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:08:24.470

也许是这样：

```
with open(filename, 'r') as f:
    lines = f.readlines()

with open(filename, 'w') as f:
    for idx, line in lines:
        if idx == 7: # or 6
            vals = line.split()
            if len(vals[-1]) == 2:
                vals[-1] = '20'+vals[-1]
            line = ' '.join(vals)
        f.write(line) 
```

# javascript - Ember.js (RC1) CollectionView.didInsertElement 过早触发

> ID：15238669
> 
> 赞同：1
> 
> 时间：2013-03-06T03:53:16.840
> 
> 标签：javascript, ember.js

我正在`Ember.CollectionView`与一大群孩子一起工作。在所有孩子都呈现后，我需要执行一些由 jQuery 插件处理的样式化 javascript。我的第一次尝试是利用`didInsertElement`我熟悉和喜爱的钩子，但对于我的目的来说，这个钩子似乎为时过早。

根据[这里](http://emberjs.com/api/classes/Ember.CollectionView.html#event_didInsertElement)的文档，这个钩子在

> 当视图的元素已插入 DOM 时调用。覆盖此函数以执行任何需要文档正文中的元素的设置。

因此，也许，我对 Ember 的渲染方式存在误解，但从中可以看出我的方法应该有效。

我遇到错误了吗？这是我误解的正确功能吗？除了使用带有回调的签入样式系统以在每个子视图已触发时提醒我之外，还有其他规范的解决方法`didInsertElement`吗？

**编辑**作为记录，使用签到系统确实有效。每次父母`didInsertElement`解雇时，我都会计算哪些子视图签入，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T08:27:06.737

从技术上讲，CollectionView 是在它的孩子之前插入的，所以是的，这是正确的功能。要在 CollectionView 的所有子项都已呈现时添加回调，您需要使用`afterRender`队列。

```
App.ContainerView = Ember.ContainerView.extend({
  didInsertElement: function() {
    Ember.run.scheduleOnce('afterRender', this, function(){
      // this will be performed after every child has been rendered
    });
  }
}) 
```

# ajax - 无限滚动问题

> ID：15238670
> 
> 赞同：1
> 
> 时间：2013-03-06T03:53:32.790
> 
> 标签：ajax, jquery

我正在使用 jQuery 在我的网站上实现所谓的“无限滚动”效果。它目前工作正常，但我有一个担忧。也就是说，虽然数据库行已经结束，但如果滚动条向下，它会继续抓取数据，也就是在这种情况下，是不存在的数据。我想要的是，一旦数据库行结束，即使滚动条向下，它也不应该获取数据。

```
<script type="text/javascript">
$(document).ready(function () {
    var message_count = <? php echo $message_count; ?> ;
    var loaded_messages = 0;

    function last_msg_funtion() {
        $('div#more_button').html('<img src="./assets/img/loader.gif">');
        loaded_messages += 10;
        $.get("/flick/load_more_message/" + loaded_messages, function (data) {
            $("#load_more_message").append(data);
        });

        if (loaded_messages >= message_count - 10) {
            $("#more_button").hide();
            //alert('hide');
        }

    };

    $(window).scroll(function () {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {
            last_msg_funtion();
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:08:14.423

我想你可以试试这个

```
$(window).scroll(function(){
    if(loaded_messages < message_count)
    {
        if ($(window).scrollTop() == $(document).height() - $(window).height()){
            last_msg_funtion();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:10:02.177

在调用更多数据之前进行检查（*而不是仅仅隐藏按钮*）

```
function last_msg_funtion() {
    if (loaded_messages < message_count) { // ADDED THIS CHECK
        $('div#more_button').html('<img src="./assets/img/loader.gif">');
        loaded_messages += 10;

        $.get("/flick/load_more_message/" + loaded_messages, function (data) {
            $("#load_more_message").append(data);
        });

        if (loaded_messages >= message_count - 10) {
            $("#more_button").hide();
            //alert('hide');
        }
    }
}; 
```

# php - 使用 php 添加的 Jquery UI 滑块。尝试显示每个值

> ID：15238671
> 
> 赞同：0
> 
> 时间：2013-03-06T03:53:33.973
> 
> 标签：php, jquery, jquery-ui, jquery-ui-slider

我正在尝试加载正在调整大小并使用 PHP 加载的图像文件夹。我现在正在尝试显示唯一的文本框，其中滑块的值将按原样显示。

以下是我对此的尝试。除了正确链接到每个滑块的唯一框外，我一切正常。这也是我刚刚添加的实时页面！[http://go3dexpansion.com/showings/generatesim/](http://go3dexpansion.com/showings/generatesim/)

***** 顺便说一句，上面的实时页面可能会改变，因为我们说话时我仍在努力！:) ******

 **```
<script>
$(function() {
    $(".slider").each(function() {
        $(this).slider({ 
            value:0,
            min: 1,
            max: 360,
            step: 1,
            slide: function( event, ui ) {
                var v = this.id
                $(v).each(function(){
                    $(this).val( ui.value );
                });
            }
        });
  });
});
</script>
<?php 
    $dirname = "panos/";
    $images = glob($dirname."*.jpg");
    foreach($images as $image) {
        echo '
        <img src="resize.php?w=450&amp;img='.$image.'" />
        <input type="text" id="',$image,'" />
        <br />
        <div style="width:450px" id="',$image,'-slider" class="slider"></div>
        ';
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:50:12.663

```
<input type="text" id="',$image,'" /> 
```

应该

```
 <input type="text" id="'.$image.'" /> 
```**

# android - 使用最新的 API 有什么意义？

> ID：15238677
> 
> 赞同：4
> 
> 时间：2013-03-06T03:54:25.717
> 
> 标签：android

所以我是 android 开发的新手，最近我做了一些使用 API 11 的开发。如果每个 android 都无法升级到最新的 API，那么使用最新的 API 开发有什么意义呢？它只能与几部手机兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:00:38.453

这是一个权衡。后来的 API 往往具有更多功能，这将使您的生活更轻松，或者应用程序更好。

但是，由于许多设备无法运行更高版本的 API，因此您的目标市场更小。

您应该选择能够返回最大利润的 API。这是一种平衡行为，因为早期的 API 可能会使开发过程更难、更长、更昂贵，即使它们有更多的设备。

同样，我实际上已经为特定屏幕尺寸开发了软件，因为我的应用程序*不可能*在手机上看起来不错，因此我没有必要尝试。我已经放弃了可能的市场空间来（1）让它在平板电脑上看起来不错；(2) 加快我的开发时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T03:57:52.897

通常，您应该选择能够为您提供应用程序所需的所有功能的最低 API 级别，以最大限度地提高兼容性。

较新的 API 支持较新的硬件和软件功能。但正如您所指出的，缺点是大多数设备不会在该版本上运行。

所以这一切都取决于你想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:06:37.477

除了@MikyDinescu 所说的，这主要是我的想法和理论，因为我对 Android 也比较陌生，但似乎拥有一个可以立即获得最新更新的 Nexus 设备更有理由。此外，我认为如果开发人员正在向他们的应用程序推送新功能以获得最新的 API，那么它将推动运营商/公司为用户获取最新的 Android 更新到他们的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T04:24:00.497

最新的 API 将具有更多功能。Android 的每个版本都在改进，API 变得更好，但有些已被弃用。通过使用新的 API，如果您决定吸引更大的市场（当旧手机过时时您最终会这样做），它将有助于遵循推荐的和更新的模式。

我喜欢使用最新的 API，以便拥有最新支持手机的人可以拥有最新的功能（例如 Jellybean 中的丰富/可扩展通知）。这可以是一个简单的 if-else 版本检查。

# symfony-1.4 - Symfony 将 Avatar 字段添加到 sfGuardUser 模型

> ID：15238678
> 
> 赞同：0
> 
> 时间：2013-03-06T03:54:43.057
> 
> 标签：symfony-1.4, image-uploading, sfguard

我在 symfony 中有一个项目，我想让我的用户为他们的“头像”字段上传一张图片。我发现了许多关于如何使用以下架构“扩展”我拥有的表的帖子：

```
Member:
  inheritance:
    type:             column_aggregation
    extends:          sfGuardUser  
columns:
    idmember:    { type: integer }
    birthday:    { type: date }
    avatar:      { type: string(255) }
    bio:         { type: string(255) } 
```

列被添加到表中就好了，但是当我将小部件更改为时`sfWidgetFormInputFileEditable`它会中断。这是 Form.class 文件：

```
 $file_src = $this->getObject()->getAvatar();
  if ($file_src == '')
  {
    $file_src = 'default_image.png';
  }

  $this->widgetSchema['avatar'] = new sfWidgetFormInputFileEditable(array(
    'label'     => ' ',
    'file_src'  => '/uploads/avatar/'.$file_src,
    'is_image'  => true,
    'edit_mode' => true,
    'template'  => '<div>%file%<br />%input%</div>',
  )); 
```

和形式的“保存”功能：

```
if($this->isModified())
    {
      $uploadDir = sfConfig::get('sf_upload_dir');
      $thumbnail = new sfThumbnail(150, 150);
      $thumbnail2 = new sfThumbnail(800, 800);
      if($this->getAvatar())
      {
        $thumbnail->loadFile($uploadDir.'/avatar/'.$this->getAvatar());
        $thumbnail->save($uploadDir.'/avatar/thumbnail/'. $this->getAvatar());
        $thumbnail2->loadFile($uploadDir.'/avatar/'.$this->getAvatar());
        $thumbnail2->save($uploadDir.'/avatar/big/'. $this->getAvatar());
      }
   } 
```

当我提交表单时，我收到以下错误消息：

`This form is multipart, which means you need to supply a files array as the bind() method second argument.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:52:32.573

在绑定表单的**操作**中，您应该使用如下内容：

```
$form->bind($request->getParamater($form->getName()), $request->getFiles($form->getName())); 
```

所以你需要将上传的文件作为第二个参数传递给`bind`方法。

# jquery - jquery 不适用于 ie

> ID：15238680
> 
> 赞同：0
> 
> 时间：2013-03-06T03:54:57.530
> 
> 标签：jquery, jquery-ui, click, internet-explorer-9

以下代码适用于 Chrome、Firefox 和 Safari，但不适用于 IE9。有人有什么主意吗？

**代码的工作方式是：** 当鼠标悬停在#calendar 上时，'.day' 将是可点击的。如果鼠标悬停在“.day”背景上，它也会改变颜色。单击“.day”后，将弹出一个 jquery-ui 对话框以获取一个值。

**在 IE9**中：“.day”不可点击。当鼠标悬停在“.day”背景颜色上时，它也不会改变。什么都没发生。

```
$(document).ready(function() {

    $('#calendar').mouseout(function() {
    $('#calendar .calendar .day').unbind('click');
});

$('#calendar').mouseover(function() {       
    $('#calendar .calendar .day').bind('click', function(){
        day_num = $(this).find('.day_num').html();
        $('#dialog-form').dialog("open");
    });
}); 

$(function() {  

    $('#dialog-form')
        .attr('title', 'Number')
        .dialog({ 
            autoOpen: false,
            closeOnEscape: true, 
            draggable: false, 
            resizable: false,
            height: 180,
            width: 450,
            show: 'fade', 
            modal: true, 
            buttons: { 
                'Ok': function() {
                    var spinner = $("#spinner").spinner();
                    day_data = (spinner.spinner( "value" ) );

                    if(day_data !=null){

                        $.ajax({
                            url: window.location,
                            type: 'POST',
                            data: {
                                day: day_num,
                                data: day_data
                            },
                            success: function(msg){
                                location.reload();
                            }
                        }).error (function() {
                            alert('an error occured');
                        });     
                    }
                },

                Cancel: function() {
                        $(this).dialog("close");
                }
            }

        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:58:34.623

看起来`#calendar1`应该只是`#calendar`。

虽然，我可以建议简化事件处理吗？

```
$("#calendar").on("click",function(evt) {
    day_num = $(evt.target).closest(".day").find(".day_num").html();
    $("#dialog-form").dialog("open");
}); 
```

这就是你所需要的。没有那些过于复杂`mouseover`/的`mouseout`东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:03:11.870

试试这个，希望它对你有用

```
$('#calendar').mouseover(function() {       
        $('#calendar1 .calendar .day').bind('click', function(){
            day_num = $(this).find('.day_num').html();
            $('#dialog-form').dialog("open");
        });
    }); 
```

上面的代码需要在文档中准备好

```
<script type="text/javascript">

$(document).ready(function() {

    $('#calendar').mouseout(function() {
        $('#calendar .calendar .day').unbind('click');
    });

    $('#calendar').mouseover(function() {       
        $('#calendar1 .calendar .day').bind('click', function(){
            day_num = $(this).find('.day_num').html();
            $('#dialog-form').dialog("open");
        });
    }); 

});

$(function() {  

    $('#dialog-form')
        .attr('title', 'Number')
        .dialog({ 
            autoOpen: false,
            closeOnEscape: true, 
            draggable: false, 
            resizable: false,
            height: 180,
            width: 450,
            show: 'fade', 
            modal: true, 
            buttons: { 
                'Ok': function() {
                    var spinner = $("#spinner").spinner();
                    day_data = (spinner.spinner( "value" ) );

                    if(day_data !=null){

                        $.ajax({
                            url: window.location,
                            type: 'POST',
                            data: {
                                day: day_num,
                                data: day_data
                            },
                            success: function(msg){
                                location.reload();
                            }
                        }).error (function() {
                            alert('an error occured');
                        });     
                    }
                },

                Cancel: function() {
                        $(this).dialog("close");
                }
            }

        });
});

</script> 
```

# qt - 模型的任意索引作为Qt中视图的根索引？

> ID：15238685
> 
> 赞同：2
> 
> 时间：2013-03-06T03:55:30.460
> 
> 标签：qt, model, proxy-classes

我想知道是否可以在一个公共模型上拥有多个视图，其中每个视图的根索引是 Qt 中公共模型中的任意索引？这可以通过某种代理模型来实现吗？

```
E.g.

source model:
root
 -A
   -1
   -2
 -B
   -3
   -4

Tree View:
 -A
   -1
   -2
 -B
   -3
   -4

List View1 (using index A as root):
 -1
 -2

List View2  (using index B as root):
 -3
 -4 
```

编辑：所以看来我试图实现的功能可以通过 QTreeView.setRootIndex() 来实现。不幸的是 QDeclarativeView 不提供此功能（还没有？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:17:57.573

子类`QAbstractProxyModel`化并实现`mapTo..`and`mapFrom..`方法，以便在请求视图的根（无效`QModelIndex`）时返回源模型中所需的根。

# sql - 动态透视表

> ID：15238692
> 
> 赞同：3
> 
> 时间：2013-03-06T03:56:01.503
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个类似于以下的表结构：

```
CREATE TABLE #temp
(
    period_id INTEGER ,
    lease_id  INTEGER  ,
    charge_id VARCHAR(20) ,
    charge_amount MONEY
)

INSERT INTO #temp
        ( period_id ,
          lease_id ,
          charge_id ,
          charge_amount
        )
VALUES  ( 100 , -- period_id - integer
          2000 , -- lease_id - integer
          '300' , -- charge_id - varchar(20)
          12345  -- charge_amount - money
        ) ,
        ( 101 , -- period_id - integer
          2000 , -- lease_id - integer
          '300' , -- charge_id - varchar(20)
          678910  -- charge_amount - money
        ) ,
        ( 101 , -- period_id - integer
          2002 , -- lease_id - integer
          '300' , -- charge_id - varchar(20)
          78950  -- charge_amount - money
        ) ,
        ( 101 , -- period_id - integer
          2002 , -- lease_id - integer
          '310' , -- charge_id - varchar(20)
          9002  -- charge_amount - money
        ) 
```

![表结构](../Images/7976175a49aa93dbf6ba782f2df9f19e.png)

我想要一个如下所示的输出：

![示例最终输出](../Images/b6de9ed758f500782605585d6a844a26.png)

我相信我可以通过创建一系列 cte 并不断参考源表来实现这一目标，但是我认为这不是一个很好的解决方案，因为我有很多这些收费代码，并且预计会添加新的将来（并且每次发生这种情况时都必须更新查询将是一种糟糕的做法）。我已经研究了 pivot 功能，但我不明白如何使用它，我想了解如何在这种情况下应用它，以便我可以将它添加到我的武器库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:57:22.947

试试这个 ：

```
Select period_id,lease_id,[300] as charge_300, [310] as Charge_310
FROM
(Select period_id,lease_id,charge_id,charge_amount 
 from #temp )p
pivot
(
 sum(charge_amount)
 FOR charge_id in ([300],[310])
) as PVT 
```

[SQLFIDDLE](http://sqlfiddle.com/#!3/f8d55/1)演示

如果您想要动态 PIVOT，其中列数不固定，请尝试以下查询

```
DECLARE @columns VARCHAR(8000)

SELECT 
@columns = 
COALESCE
(
 @columns + ',[' + charge_id + ']',
 '[' + charge_id + ']'
)
FROM 
#temp 
group by charge_id

// The above query tries to create distinct charge_id as the columns
// @columns= [300],[301]

DECLARE @query VARCHAR(8000)
SET @query = 'SELECT *
FROM
(
 SELECT 
 period_id,lease_id ,charge_id,charge_amount 
 FROM 
 #temp 
) P
PIVOT
(
 SUM(charge_amount) 
 FOR charge_id in (' + @columns + ')
) AS PVT'

 EXECUTE (@query)
 GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T05:02:04.270

[了解 T-SQL 中的 PIVOT 函数](https://stackoverflow.com/questions/10428993/understanding-pivot-function-in-sql-details-inside)

这应该可以帮助你。它谈论静态和动态枢轴。我想，动态枢轴会更适合您当前的情况，因为您的列可能会不断变化。

# c# - 检查是否已附加特定的事件处理程序方法

> ID：15238701
> 
> 赞同：15
> 
> 时间：2013-03-06T03:56:54.793
> 
> 标签：c#, .net, events, c#-4.0, event-handling

与此问题相关， [检查事件是否已存在](https://stackoverflow.com/questions/3800412/check-if-an-event-already-exists)

但不同之处在于我只想知道事件是否附加了特定方法。所以可能还有*其他*方法，但我只想知道是否存在特定的方法。

我的环境是 dotnet 4.0 中的 C#。

例如

```
Event += MyMethod1;
Event += MyMethod2;

// Some code
if (MyMethod1IsAttachedToEvent())
{
    // Achieved goal
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-06T03:59:41.180

### 你不能。

*event*关键字是明确发明的，以防止您做您想做的事情。它使事件的委托对象无法访问，因此没有人可以弄乱事件处理程序。

来源 :[如果一个事件已经被订阅，如何进行 demine](https://stackoverflow.com/questions/2697247/how-to-determine-if-an-event-is-already-subscribed)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T04:00:24.383

```
foreach ( Delegate existingHandler in this.EventHandler.GetInvocationList() )
{
    if ( existingHandler == prospectiveHandler )
    {
          return true;
    }
} 
```

`GetInvocationList`使用该方法遍历委托。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T03:59:22.057

```
Event.GetInvocationList().Any(x => x.Method.Name.Equals("yourmethodname")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-05T21:24:39.013

这里迟到的答案。我相信 Parimal Raj 的回答是正确的，因为我找不到直接访问事件的方法。但是，我创建了两种方法来解决这个问题：

1.  添加前删除。如果该方法不存在，我在尝试删除不存在的方法时没有收到错误消息。这样，您可以确保调用列表只调用一次 method1。

    ```
    Event -= MyMethod1;
    Event += MyMethod1; 
    ```

2.  您要添加事件的对象可能具有 .Tag 属性。您可以使用标签来存储有关您已添加的方法的信息。这里我只有一种方法，所以我只需要检查Tag 是否为null。但更复杂的场景可以这样处理：

    ```
    if(control.Tag == null)
    {
         //ony added once, when tag is null
         control.TextChanged += new EventHandler(validate); 
         control.Tag = new ControlTag();
    } 
    ```

# css - 将元素设置为不透明度：0 在 Firefox 中禁用它

> ID：15238704
> 
> 赞同：1
> 
> 时间：2013-03-06T03:57:17.233
> 
> 标签：css, firefox, opacity

我试图通过我通常将其不透明度设置为 0 的方法来屏蔽上传输入元素，然后用图像（指针事件设置为无）覆盖它，以便它用一个更好看的按钮有效地屏蔽输入，但是当您单击该区域时，提交仍然会触发。

除了在 Firefox 中，这一切都很好，很开心，似乎在元素上设置 opacity: 0 会禁用它？

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:01:35.043

您可以`@-moz-document url-prefix() {`用于排除 firefox css。像这样的例子

```
@-moz-document url-prefix() {
    .content {
        opacity: 1 !important;
    }
} 
```

# c# - 具有相同程序集文件名的外部别名

> ID：15238705
> 
> 赞同：3
> 
> 时间：2013-03-06T03:57:28.680
> 
> 标签：c#, alias, extern, assembly-references

我有一个问题可以被视为[此](https://stackoverflow.com/questions/2502640/the-extern-alias-xxx-was-not-specified-in-a-reference-option)问题的扩展，其中用户遇到外部别名不起作用的问题。

我遇到的变化是两个项目输出相同的文件名。第一个（我们称之为*Legacy*，因为它是旧版本）包含已二进制序列化的类。第二个（*Current*）是我的域的下一个版本。我正在尝试创建一个转换库（*Compatibility*），它将*Legacy*映射到*Current*以在新域中使用。

*因为这两个项目都构建到 MyApp.Domain.dll，所以在将程序集复制到Compatibility*的输出文件夹中时，一个会被另一个覆盖。发生这种情况时，编译器无法识别我有同一个程序集的两个版本，因为我实际上只有一个具有该名称的文件。

它看起来像这样：

```
Project          Output

MyApp            MyApp.exe
Legacy           MyApp.Domain.dll
Current          MyApp.Domain.dll 
```

我意识到一种解决方案是更改*Current*的输出文件名（添加“V2”或类似名称），但如果可以避免，我不希望这样做；我喜欢保留“MyApp.Domain”签名。或者，有没有一种方法可以指示编译器将*Legacy*的输出复制到输出文件夹的子文件夹中，然后在那里引用它们？还有其他解决方案吗？

# java - 无法通过 web.xml 中的 ContextLoaderListener 初始化 spring

> ID：15238708
> 
> 赞同：0
> 
> 时间：2013-03-06T03:57:58.090
> 
> 标签：java, spring, hibernate

请参考问题 - [Can instantiate hibernate session Factory directly but cannot do it through spring](https://stackoverflow.com/questions/15194860/can-instantiate-hibernate-session-factory-directly-but-cannot-do-it-through-spri/15195373)

在那个问题上，我根本无法启动春天。在有人建议我应该使用 ApplicationContext 来启动 spring 之后，它得到了解决。但是这种方法需要我使用 ApplicationContext ，然后每次我必须获取实例时使用 bean。我想要的是春天将所有的豆子注入它们的位置，我可以在任何我想要的地方使用它们。所以我把它放到我的 web.xml 中

```
<listener> <!-- For struts2-spring to work -->
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

但这根本不适合我。在调用 bean 注入对象的任何地方，它都会给我空指针异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:16:53.950

一个标准的 web.xml 文件应该是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

将您的 web xml 版本与此版本进行比较，看看您的包含这些 bean 的 xml 文件是否已正确初始化。您可以分析应用程序启动时打印的堆栈跟踪。

# xslt - 使用XSL统计最后一个具有一定值的节点数

> ID：15238713
> 
> 赞同：0
> 
> 时间：2013-03-06T03:58:27.303
> 
> 标签：xslt

我有这样的 XML：

```
<game id="1" result="W" />
<game id="2" result="T" />
<game id="3" result="L" />
<game id="4" result="W" />
<game id="5" result="W" /> 
```

我正在尝试从末端计算与最后一个节点具有相同结果的节点数。在这种情况下，它将是 2。我尝试过 for-each，但在结果更改后无法退出循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:18:11.423

像这样的东西应该工作：

```
<xsl:variable name="lastValue" select="game[last()]/@result"/> 
<xsl:variable name="streak" 
              select="count(game[@result = $lastValue and 
                          not(following-sibling::game/@result != $lastValue)])" /> 
```

# c# - .net 本地程序集加载因 CAS 策略而失败

> ID：15238714
> 
> 赞同：59
> 
> 时间：2013-03-06T03:58:33.283
> 
> 标签：c#, .net

我们收到以下程序集加载错误。程序集从本地路径“C:\Program Files\ASWorx Products\ASWorx\Bin\”加载。旧版本的二进制文件不存在问题。当我们通过电子邮件发送新的二进制文件时，就会出现问题。构建设置没有改变。我们怎样才能纠正这个问题？Win7 32位机出现问题

```
File name: 'file:///C:\Program Files\ASWorx Products\ASWorx\Bin\ASConnexDI.dll' ---> System.NotSupportedException: An attempt was made to load an assembly from a network location which would have caused the assembly to be sandboxed in previous versions of the .NET Framework. This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous. If this load is not intended to sandbox the assembly, please enable the loadFromRemoteSources switch. See http://go.microsoft.com/fwlink/?LinkId=155569 for more information.

   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)

   at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)

   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks)

   at System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, Evidence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm, Boolean forIntrospection, Boolean suppressSecurityChecks, StackCrawlMark& stackMark)

   at System.Reflection.Assembly.LoadFrom(String assemblyFile, Evidence securityEvidence)

   at System.Activator.CreateInstanceFromInternal(String assemblyFile, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityInfo)

   at NeST.ICE.IOSystem.DIManager.InitializeDI() 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-06T04:06:29.307

从[错误消息中的链接](http://go.microsoft.com/fwlink/?LinkId=155569)：

> 如果应用程序是从 Web 复制的，Windows 会将其标记为 Web 应用程序，即使它驻留在本地计算机上也是如此。您可以通过更改文件属性来更改该名称，也可以使用该元素授予程序集完全信任。作为替代方案，您可以使用 UnsafeLoadFrom 方法加载操作系统已标记为已从 Web 加载的本地程序集。

尝试打开文件属性并单击“取消阻止”：

![属性窗口](../Images/75d6b4c70a248de19620f14f969668a5.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-07-19T07:10:56.990

我可以使用以下链接解决此问题并将设置添加到我的配置中。

[https://msdn.microsoft.com/en-us/library/dd409252(VS.100).aspx](https://msdn.microsoft.com/en-us/library/dd409252(VS.100).aspx)

```
<configuration>
   <runtime>
      <loadFromRemoteSources enabled="true"/>
   </runtime>
</configuration> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-19T05:01:00.860

我不得不使用该方法

```
Assembly.UnsafeLoadFrom() 
```

而不是 Assembly.LoadFrom，它解决了我的问题...在此链接中找到它：

[https://msdn.microsoft.com/en-us/library/dd409252(VS.100).aspx](https://msdn.microsoft.com/en-us/library/dd409252(VS.100).aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-14T10:12:42.623

除了上面给出的答案之外，我对这个问题的解决方案。

> 尝试解除阻止总是导致文件似乎仍然被阻止。

因此，我创建了一个新文件夹，复制了受影响的文件并逐个文件执行解锁。令人惊讶的是，与在原始文件位置执行相同操作相比，该标志被删除了。因此，最后一步是将现在解锁的文件复制回原始位置。完毕！

# amazon-s3 - Amazon S3 vs Cloudfront 用于托管 mp3 和图像？

> ID：15238721
> 
> 赞同：2
> 
> 时间：2013-03-06T03:59:36.163
> 
> 标签：amazon-s3, amazon-cloudfront

我正在为一位艺术家构建一个应用程序，并建议他们将 mp3 文件托管在 s3 上，因为它在第一年可以免费使用一定的带宽。

该应用程序将在 s3 上传输多个 160kbit mp3 文件的唱片专辑，以及应用程序在启动时下载的一些 1280 x 720.jpg 图像。

该应用程序需要尽快获取这些图像（每个大约 250 k），并且在其终止后无法在本地缓存它们，每次启动时都会重新下载图像。

考虑到 10k 到 100k 用户的预期，可能更多，主要是在美国，将 Cloudfront 添加到图片中是有价值的，它是否更有可能使收入不高的人破产而不是单独使用 S3？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:44:46.687

查看 Amazon Web Services[简单月度计算器](http://calculator.s3.amazonaws.com/calc5.html)。

您可以在其中输入有关存储和数据传输的假设并查看预期成本。您显然已经知道 CloudFront 将为您的客户显着降低延迟。

我假设每个用户每天流式传输 1 小时，并且您的用户范围为 10k 到 100k。

[此来源](http://www.audiomountain.com/tech/audio-file-size.html)提供 160kbit mp3 音频为 72 MB/小时，因此我们将使用以下公式计算每月总传输量：

```
72 MB/hour * 1 hour/user/day * 30 day/month * 10k user 
```

这给出了：

1.  **10k 用户每月 20 TB**
2.  **10 万用户每月 200 TB**

使用上述数字，这是您的费用：

*   **仅 S3 的费用在每月 2,000 美元到 16,000 美元之间**
*   **除此之外，CloudFront 每月增加 2,000 至 13,000 美元**

* * *

TL;DR**在您的场景中，使用 CloudFront 大约会使成本翻倍**- 无论用户数量如何。

您还应该考虑，如果您联系 Amazon 购买 CloudFront 上的预留容量以换取更优惠的传输成本费率，则实际成本可能会更低。从他们的[CloudFront 定价页面](http://aws.amazon.com/cloudfront/pricing/)：

> 预留容量让您可以选择承诺 12 个月或更长时间的最低每月使用水平，从而获得大幅折扣。预留容量协议从单个区域每月至少传输 10 TB 的数据开始。承诺更高使用量的客户将获得额外折扣。

显然[，在某些情况下](http://blog.streamingmedia.com/the_business_of_online_vi/2011/08/amazon-lowers-cloudfront-cdn-pricing-estimate-cdn-business-brings-in-75m.html)，保留容量的差异可能会为您节省多达 50% 的 CloudFront 成本，这意味着**CloudFront 只会占您总传输成本的 1/3 左右，而不是一半**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:54:27.987

S3 仅适用于静态数据，例如图像，使用 cloudfront 会有很大帮助。

# java - 如何访问闪存内部的外部数据？

> ID：15238724
> 
> 赞同：1
> 
> 时间：2013-03-06T03:59:53.110
> 
> 标签：java, web-services, flash, crossdomain.xml

我是 flash 新手，我有一个 flash (.swf) 文件，可以通过 WSDL 方法显示我的数据库内容。加载后，我可以看到我的数据，但是当它尝试在内部自行刷新 flash 对象时会显示一些错误。

我正在使用 eclipse 进行开发，Tomcat 7 作为网络服务器。

我已将 crossdomain.xml 放在 /Root 文件夹中，我可以通过 Web 浏览器显示 crossdomain.xml 内容

```
"http://localhost:8080/crossdomain.xml"

(Note : 1\. Both web service and flash file are running in the same server.
        2\. This error occurs only before accessing any data from server, once data is accessed the error is not generating anymore) 
```

当 flash 文件尝试自行刷新时，会显示以下错误。

-->

```
To access external data, add a cross-domain policy file to the external data web server.

For more information, on the Adobe website, see the article "Cross-domain Policy File Specification".

If the problem persists, contact the file creator or your system administrator.

Error: Error #2032

Connection Type: Web Service

File URL: http://localhost:8080/StudentService/performance.swf

External Data URL: http://localhost:8080/StudentService/services/StudentService 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:17:34.513

尝试像这样添加 to-port 属性和 allow-http-request-headers-from 元素。

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM
"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">

<cross-domain-policy>
    <site-control permitted-cross-domain-policies="master-only"/>
    <allow-access-from domain="*" to-ports="*" secure="false"/>
    <allow-http-request-headers-from domain="*" headers="SOAPAction"/>
</cross-domain-policy> 
```

谢谢。

@Leo。

# css - 之间的区别。和 # 在 CSS 中

> ID：15238727
> 
> 赞同：1
> 
> 时间：2013-03-06T03:59:58.293
> 
> 标签：css

在过去的几天里，我一直在学习 CSS，并且一直想知道在声明标头时`.`或时有什么不同。`#`例子：

```
.test
{
  some stuff here
}

#test
{
  Some stuff here
} 
```

`.`和之间的主要区别是`#`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:02:12.853

`#`是一个 ID 选择器。`.`是一个类选择器。这就像将精密镊子与铲子进行比较。

页面上只能有一个具有给定 ID 的元素，因此`#`选择器的优先级比类高得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:10:06.937

`.`-> this 指的是一个类的 css，它为在该名称中设置了类的元素指定 css。 **多个元素可以有同一个类**

例如

```
<div class='xyz'></div>
<div class='xyz'></div>
<div class='xyz'></div> 
```

通过写作

```
.xyz
{
width:100px;
height:100px;
} 
```

我们可以为所有这些 div 设置共同的宽度高度

`#`指 ID ID 是唯一 **的 html 页面中只有一个元素可以有一个 ID，** 例如，它用于应用与一个特定元素有关的 css 属性

```
<div id="div1" class='xyz'></div>
<div id="div2" class='xyz'></div>
<div class='xyz'></div> 
```

通过写作

```
.xyz
{
width:100px;
height:100px;
}

#div1
{
width:200px;
} 
```

我们将 div1 的宽度设为 200！CSS 属性的`#`优先级高于`.`

> > 即`#`css 将覆盖`.`Css

看看这个例子 jsfiddle [http://jsfiddle.net/rbyKx/](http://jsfiddle.net/rbyKx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:01:59.500

`.`是`class`和`#`是`id`

## ID 是唯一的

每个元素只能有一个 ID

每个页面只能有一个具有该 ID 的元素

## 类不是唯一的

您可以在多个元素上使用相同的类。

您可以在同一个元素上使用多个类。

所以这就是主要的区别

你可以举个 BAR CODE 和 SERIAL NUMBER 的例子

产品 {class} 的条形码相同，并且产品 {id} 的每个实例的序列号都不同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T04:02:03.970

`.test {...}`选择指定类的元素。`#test {...}`选择具有指定 ID 的元素。（给定 ID 的元素不应超过一个）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T04:03:20.703

.test 将应用于包含类 test 的元素，#test 将应用于包含 id test 的元素

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T04:03:37.307

这一般适用于 CSS，并不特定于 CSS3。

使用 a`#`将按属性选择 HTML 元素`id`（注意`id`s 在页面上必须是唯一的）。

使用 a`.`将按属性选择 HTML 元素`class`，并将选择其类列表包含 CSS 中指定的类的元素。

CSS 选择器还有一个优先“分数”来确定哪些规则胜过其他规则。由于`id`s 是唯一的，因此它们的得分远高于`class`选择器，因此将具有更高的优先级。

[您可以在此处](http://www.w3.org/community/webed/wiki/CSS/Selectors)阅读有关 CSS 选择器的更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T04:03:54.323

好吧，这只是普通的 CSS 而不是 CSS3。

`.test`表示以任何具有**类的****元素**为目标，例如 **`test`**

 **```
<div class="test">I am targeted</div>
<div class="testnot">I am not targeted</div> 
```

`#test`表示以具有**id****的元素**为目标，例如 **`test`**

 **```
<div id="test">I am targeted</div>
<div id="testnot">I am not targeted</div> 
```

ID 必须是唯一的，许多元素可以包含相同的类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T04:04:10.763

这`.`是用于类和`#`用于ID。

所以

您在 rule 中定义的样式`.test { }`将适用于**class** _ *test* _ 的任何元素，例如：

```
<div class="test"></div> 
```

您在 rule 中定义的样式`#test { }`将应用于将**test**作为**id**的元素。例如：

```
<div id="test"></div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-06T04:10:14.657

点用于类，哈希 (#) 用于 ID。类被定义为对各种节元素进行样式设置，并且可以多次使用。

ID 基本上用于定义页面的特定部分。它们只能使用一次。

类示例如果我想设置页面上每个段落的字体大小，您可以使用 classes 执行以下操作：

```
p.font-size{
        font-size:12px;
 } 
```

Id 示例：如果我必须更改特定 para 的字体大小，我可以使用以下方式：

```
#Size {
font-size:10px;
} 
```

而不是以这种方式在 html 中使用它

```
 <p id="Size">your para</p> 
```

这里的 id 将覆盖 css 类中定义的任何样式****

# jquery - 使用 jquery/javascript 的 SVG 路径动画

> ID：15238729
> 
> 赞同：0
> 
> 时间：2013-03-06T04:00:04.360
> 
> 标签：jquery, html, svg, jquery-svg

我通过 jquery 创建了 HTML 5 SVG 折线图。请参考下面的截图。

![在此处输入图像描述](../Images/6f06c206aec35bcced7c2b5ef3b7d86a.png)

请参考以下 SVG 路径：

```
<path id="John" clip-path="url(&quot;#ChartAreaClip&quot;)" fill="none" stroke="red" stroke-width="3" d="M 136 213.6 L 202 259.36 M 202 259.36 L 268 222.18 M 268 222.18 L 334 159.26 M 334 159.26 L 400 150.68 M 400 150.68 L 466 79.18 M 466 79.18 L 532 170.7 M 532 170.7 L 598 167.84 M 598 167.84 L 664 99.2"/> 
```

我想执行路径动画（即）线来绘制运动效果。像下面的链接

[http://www.highcharts.com/demo/](http://www.highcharts.com/demo/)

我已经参考了以下链接，但无法理解。

[https://developer.mozilla.org/en-US/docs/SVG/Element/animateMotion](https://developer.mozilla.org/en-US/docs/SVG/Element/animateMotion)

[https://developer.mozilla.org/en-US/docs/SVG/Element/animateColor](https://developer.mozilla.org/en-US/docs/SVG/Element/animateColor)

[https://developer.mozilla.org/en-US/docs/SVG/Element/animate](https://developer.mozilla.org/en-US/docs/SVG/Element/animate)

您能否提供任何解决方案来为折线图制作动画路径？(ie) 折线图的路径动画

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:17:49.540

对于这种效果，您可以定义一个矩形 clipPath，为该矩形设置动画，并将其用作路径的剪辑路径。

像这样：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <clipPath id="curtainClip">
            <rect id="clipRect" x="0" y="0" width="100" height="100"/>
        </clipPath>
    </defs>

    <animate xlink:href="#clipRect"
        attributeName="width" 
        dur="1s"
        from="0" 
        to="100" />

    <path clip-path="url(#curtainClip)" stroke="red" d="M 0 0 L 100 100"/>
</svg> 
```

# integration - 在 ProcessMaker 中将文件上传到 Alfresco

> ID：15238731
> 
> 赞同：1
> 
> 时间：2013-03-06T04:00:14.517
> 
> 标签：integration, alfresco, document-management, mashup, processmaker

我正在尝试 Alfresco 和 ProcessMaker 的混搭。我打算在 ProcessMaker 上使用 Alfresco 的文档管理功能。

这是场景：

用户在 ProcessMaker 中填写表格，并在 Alfresco 中上传文件。

[我在此](http://wiki.processmaker.com/index.php/Alfresco_V_4.0#Upload_file.2Fdocument_in_Alfresco_Repository_.28uploadDoc.29)链接中关注了 wiki 。问题是，我的结果变量总是假的。我还检查了我的输入。我可以通过我提供的地址访问 Alfresco，但它仍然无法正常工作。我还确保该文件存在于我的目录中。

有没有办法可以检查（可能从日志或控制台）Alfresco 或 ProcessMaker 返回的错误，以便我可以继续？

更新：Alfresco 安装在日文版的 Windows 7 中。Alfresco 版本是 4.2.c。Process Maker 版本为 2.0.45。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:02:07.017

我没有使用 ProcessMaker 的经验，但是您可以尝试以下几件事来调查您的问题：

*   检查 ProcessMaker 和 Alfresco 之间的网络流量（例如使用[Wireshark](http://www.wireshark.org/)）以查看 Alfresco 的 HTTP 响应中是否有任何提示
*   [在 Alfresco 端](http://wiki.alfresco.com/wiki/Log4J_Configuration)启用 DEBUG 日志
*   据我所知，ProcessMaker 使用 Alfresco CMIS REST API 来实现其触发器。查看ProcessMaker 并使用一些 REST 客户端（例如[curl](http://curl.haxx.se/docs/manpage.html)、[Chrome REST 控制台](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?hl=en)、[htty](https://github.com/htty/htty)）[`class.pmAlfrescoFunctions.php`](https://github.com/colosa/processmaker/blob/master/workflow/engine/classes/triggers/class.pmAlfrescoFunctions.php)自己尝试调用

这应该让您了解您的情况出了什么问题。

* * *

更新

在阅读了日语语言包将文件夹名称从“Sites”更改为“/サイト”，并仔细检查了Alfresco触发器[`code`](https://github.com/colosa/processmaker/blob/master/workflow/engine/classes/triggers/class.pmAlfrescoFunctions.php)后，确实是ProcessMaker不支持本地化版本的Alfresco OOTB，它将“Sites”硬编码在其 CMIS 查询。

虽然[@nmenego](https://stackoverflow.com/users/1160296/nmenego)提供的[解决方法](https://stackoverflow.com/a/15261488/350923)在大多数情况下就足够了，但我向 ProcessMaker 开了一个[错误](https://github.com/colosa/processmaker/issues/1375)，让他们知道这个限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:32:20.440

我发现问题出在我安装的 Alfresco 使用的编码中。默认目录是 /サイト（日语中的站点），而不是默认文件夹 /Sites。显然，在安装时，默认文件夹的名称被翻译成日语。

我所做的是添加了一个名为 /Sites 的文件夹，现在一切正常。当然，skuro 指出的观点也都是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:13:53.287

我们刚刚确认这是 Alfresco 的 ProcessMaker 连接器触发器中的一个错误，感谢您报告它。

我刚刚在 ProcessMaker 的主要支持门户中打开了工单[11003 ，供开发人员修复它。](http://bugs.processmaker.com/view.php?id=11003 "11003")

请在[ProcessMaker 的主要支持门户](http://bugs.processmaker.com "ProcessMaker 支持门户")中免费注册，以便跟进此错误的解决方案。

最好的祝福，

**Arturo A. Robles**
**客户和合作伙伴支持经理**
**Colosa Inc. - ProcessMaker**

# wcf - 违反协议 - 动词不允许内容类型

> ID：15238733
> 
> 赞同：1
> 
> 时间：2013-03-06T04:00:30.167
> 
> 标签：wcf, http, servicebus

更新：我在 Build 2013，[Mark Simms](http://www.linkedin.com/pub/mark-simms/6/8a6/7b6)看了这个并确认离开路由器的 HTTP 请求在请求中确实有一个“正文”。他觉得这是因为 Get 到达 SB，然后打包进行路由，然后将包再次作为 Message 类型进行管理，然后再将其发送回去。在打包和路由之间，属性留在请求的主体中——这违反了“GET”的协议。然而，所有这些都存在于 .NET 或 ServiceBus 中的 MS 框架中。由于主体是不可变的（至少我找不到改变它的方法），唯一的方法是复制请求，然后在退出时更新原始请求。

这是路由应用程序的一小部分，它接收来自 Azure ServiceBus 端点的 HTTP GET/POST 请求，通过中继通道将其发送到我的本地工作站，在那里我重写 URL，并将其发送到我的本地 Web 服务.

这是接口 - 通用的，因此它可以接收对控制器/操作 URL 的任何类型的调用

```
 // The Router, and general concept of how to recieve from the SB and redirect was taken from
  // Tony Sneed Blog - which he documented here: http://blog.tonysneed.com/2012/04/24/roll-your-own-rest-ful-wcf-router/
  //
    [ServiceContract(Namespace = "urn:Twiddler")]
    public interface IRoutingService
    {
        [WebInvoke(UriTemplate = "")]
        [OperationContract(AsyncPattern = true, Action = "*", ReplyAction = "*")]
        IAsyncResult BeginProcessRequest(Message requestMessage, AsyncCallback asyncCallback, object asyncState);

        Message EndProcessRequest(IAsyncResult asyncResult);
    }
} 
```

这是代码：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall,
     AddressFilterMode = AddressFilterMode.Any, ValidateMustUnderstand = false)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class RoutingService : IRoutingService, IDisposable
{
  private IRoutingService _client;

  /// <summary>
  /// when a message is received from the SB, it arrives here as simply a message - 
  /// </summary>
  /// <param name="requestMessage"></param>
  /// <param name="asyncCallback"></param>
  /// <param name="asyncState"></param>
  /// <returns></returns>
  public IAsyncResult BeginProcessRequest(Message requestMessage, AsyncCallback asyncCallback, object asyncState)
  {
    string RequestMessageAction = requestMessage.Headers.Action;

    IAsyncResult asyncResult = null;

    //if the full URI for the namespace does not match the one contructed in Twiddler, then pass it through - we have nothing to do with it!
    if (requestMessage.Headers.To.AbsoluteUri.Contains(Utilities.ServiceFormBridge.NameSpaceName) && requestMessage.Headers.To.AbsoluteUri.Contains(Utilities.ServiceFormBridge.EndPointName) == false)
      return asyncResult;

    //as the service bus will accept anything in terms of controllers and actions, we only need alter the DestinationAddress.Authority (host and port)
    var RewriteTheURL = requestMessage.Headers.To.AbsoluteUri.Replace(string.Format("http://{0}.servicebus.windows.net/{1}/", ServiceFormBridge.NameSpaceName, ServiceFormBridge.EndPointName), ServiceFormBridge.DestinationWebSite);

    Uri DestinationAddress = new Uri(RewriteTheURL);

    System.ServiceModel.ChannelFactory<IRoutingService> factory = null;

    factory = new ChannelFactory<IRoutingService>(new WebHttpBinding(), DestinationAddress.AbsoluteUri);

    WebHeaderCollection httpHeaders = WebOperationContext.Current.IncomingRequest.Headers;
    httpHeaders.Remove("Host");
    httpHeaders.Add("Host", DestinationAddress.Authority); //give it the new host that we are re-directing to

    httpHeaders.Remove("Connection");  //todo: not sure I need this, but without it there is an exception between Keep-Alive and Closed

    // Set factory and message address
    factory.Endpoint.Address = new EndpointAddress(DestinationAddress);
    requestMessage.Headers.To = DestinationAddress;

    _client = factory.CreateChannel();

    asyncResult = _client.BeginProcessRequest(requestMessage, asyncCallback, asyncState);

    return asyncResult;
  }
} 
```

在 BeginProcessRequest 上，出现异常：协议违规：无法发送具有此动词类型的内容主体

我已经研究过，我知道在 GET 请求下，请求正文中不能有任何内容。

由于我的代码适用于 POST，因此我只能假设由于某种原因，体内有些东西。

但是，由于原始请求是来自使用 ServiceBus 的 URL 的浏览器的 GET，我不确定为什么正文中会有任何内容。

所以：

1.  我在想我在代码中做了一些导致我出现问题的事情——如果是这样，我想知道是什么！
2.  如果传入的请求中有某些内容，我怎样才能将其删除，以免违规？
3.  还有其他建议，对代码的改进吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:06:00.290

将此属性放在操作上，[WebInvoke(UriTemplate = "")] 默认支持 POST，但您可以传递一个参数指定其他动词，例如 PUT、DELETE 等。但是，GET 由不同的属性支持， [网络获取]。我建议向路由器添加额外的操作，一个使用 WebGet，另一个使用 WebInvoke 和不同的 HTTP 动词。

# meta-tags - js生成的meta能被google收录吗

> ID：15238734
> 
> 赞同：0
> 
> 时间：2013-03-06T04:00:36.217
> 
> 标签：meta-tags, google-crawlers

这个问题就像标题一样。如果我使用js生成一个元标记，并将其附加到头部标记。元内容可以被谷歌索引吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:03:28.223

它不应该在我的理解中。

除非它最近发生了变化，否则爬虫不会执行 javascript。googlebot 似乎有一个基本的支持，但你不应该依赖它。

# iphone - 键盘隐藏，视图仅在第一次尝试时不能正确向下滚动

> ID：15238739
> 
> 赞同：1
> 
> 时间：2013-03-06T04:01:30.937
> 
> 标签：iphone, uiscrollview, uikeyboard

我希望我的视图在键盘隐藏时向下滚动，问题是视图第一次来自其框架之外（我附加的第一张图片）但是如果我第二次隐藏键盘，视图会向下滚动正确方式（第二个图）。

这是与这部分相关的代码：

```
 - (void)viewDidUnload
    {
     [[NSNotificationCenter defaultCenter] removeObserver:self
                                                        name:UIKeyboardWillShowNotification
                                                      object:nil];
        [[NSNotificationCenter defaultCenter] removeObserver:self
                                                        name:UIKeyboardWillHideNotification
                                                      object:nil];

    }

    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardDidShow:)
                                                     name:UIKeyboardDidShowNotification
                                                   object:self.view.window];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardDidHide:)
                                                     name:UIKeyboardDidHideNotification
                                                   object:nil];
    }

    - (void)keyboardDidShow:(NSNotification *)notification
    {
        [_scrollView setScrollEnabled:TRUE];
    }

- (void)keyboardDidHide:(NSNotification *)notification
{
    [UIView animateWithDuration:4 animations:^{

      NSDictionary* info = [notification userInfo];
     //---obtain the size of the keyboard---
     NSValue* aValue = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
     CGRect keyboardRect = [self.view convertRect:[aValue CGRectValue] fromView:nil];
     //---resize the scroll view back to the original size (without keyboard)---
     CGRect viewFrame = [self.view frame];
     viewFrame.size.height += keyboardRect.size.height;
     self.scrollView.frame = viewFrame;
     }];

} 
```

![在此处输入图像描述](../Images/c51900b3d5634ff065a69ca273cd5eb1.png) ![在此处输入图像描述](../Images/b7565061a71d54bc1a5703a396008567.png)

# android - 是否可以访问 Facebook 画廊并让用户选择图像？

> ID：15238741
> 
> 赞同：4
> 
> 时间：2013-03-06T04:01:53.167
> 
> 标签：android, facebook, facebook-graph-api

我认为标题是自我描述的。在我的应用程序中，我有一个登录表单。根据要求，用户应该能够通过 Facebook 设置他们的个人资料图像。

所以，我的问题是，是否可以在应用程序内显示用户的图库图像并让用户从中选择图像？

我已经检查了[Facebook SDK](https://developers.facebook.com/android/)并进行了检查，但我发现的这些信息是基于通过 Graph 将图像上传到 Facebook。

任何建议/意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:35:01.053

您是否[在这里](https://stackoverflow.com/a/5841825/1221203)检查过这个答案：

```
ImageView user_picture;
 userpicture=(ImageView)findViewById(R.id.userpicture);
 URL img_value = null;
 img_value = new URL("http://graph.facebook.com/"+id+"/picture?type=large");
 Bitmap mIcon1 = BitmapFactory.decodeStream(img_value.openConnection().getInputStream());
 userpicture.setImageBitmap(mIcon1); 
```

您也可能会看到[这](https://stackoverflow.com/a/14565429/1221203)一点。

**编辑：**

我认为这应该可以加载专辑，但唯一的区别是你需要一个`access token`。这意味着只有当这个用户登录到 Facebook 时，你才能获取用户的专辑。下面的代码有一个`AsyncTask`被调用的`getAlbumsData`。在里面查看`doInBackground`.它获取JSON，然后`onPostExecute`你会看到它正在将专辑加载到之前已经定义的列表视图中。

这是（简单）示例代码

```
private class getAlbumsData extends AsyncTask<Void, Void, Void> {

    LinearLayout linlaHeaderProgress = (LinearLayout) findViewById(R.id.linlaHeaderProgress);

    @Override
    protected void onPreExecute() {

        // SHOW THE PROGRESS BAR (SPINNER) WHILE LOADING ALBUMS
        linlaHeaderProgress.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {

        // CHANGE THE LOADING MORE STATUS TO PREVENT DUPLICATE CALLS FOR
        // MORE DATA WHILE LOADING A BATCH
        loadingMore = true;

        // SET THE INITIAL URL TO GET THE FIRST LOT OF ALBUMS
        URL = "https://graph.facebook.com/" + initialUserID
                + "/albums&access_token="
                + Utility.mFacebook.getAccessToken() + "?limit=10";

        try {

            HttpClient hc = new DefaultHttpClient();
            HttpGet get = new HttpGet(URL);
            HttpResponse rp = hc.execute(get);

            if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String queryAlbums = EntityUtils.toString(rp.getEntity());

                JSONObject JOTemp = new JSONObject(queryAlbums);

                JSONArray JAAlbums = JOTemp.getJSONArray("data");

                if (JAAlbums.length() == 0) {
                    stopLoadingData = true;
                    Runnable run = new Runnable() {

                        @Override
                        public void run() {
                            Toast.makeText(getApplicationContext(),
                                    "No more Albums", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    };
                    Albums.this.runOnUiThread(run);

                } else {
                    // PAGING JSONOBJECT
                    if (JOTemp.has("paging"))   {
                        JSONObject JOPaging = JOTemp.getJSONObject("paging");

                        if (JOPaging.has("next")) {
                            String initialpagingURL = JOPaging
                                    .getString("next");

                            String[] parts = initialpagingURL.split("limit=10");
                            String getLimit = parts[1];

                            pagingURL = "https://graph.facebook.com/"
                                    + initialUserID + "/albums&access_token="
                                    + Utility.mFacebook.getAccessToken()
                                    + "?limit=10" + getLimit;

                        } else {
                            stopLoadingData = true;
                            Runnable run = new Runnable() {

                                @Override
                                public void run() {
                                    Toast.makeText(getApplicationContext(),
                                            "No more Albums",
                                            Toast.LENGTH_SHORT).show();
                                }
                            };
                            Albums.this.runOnUiThread(run);
                        }
                    } else {
                        stopLoadingData = true;
                        Runnable run = new Runnable() {

                            @Override
                            public void run() {
                                Toast.makeText(getApplicationContext(),
                                        "No more Albums",
                                        Toast.LENGTH_SHORT).show();
                            }
                        };
                        Albums.this.runOnUiThread(run);

                    }

                    getAlbums albums;

                    for (int i = 0; i < JAAlbums.length(); i++) {
                        JSONObject JOAlbums = JAAlbums.getJSONObject(i);

                        if (JOAlbums.has("link")) {

                            albums = new getAlbums();

                            // GET THE ALBUM ID
                            if (JOAlbums.has("id")) {
                                albums.setAlbumID(JOAlbums.getString("id"));
                            } else {
                                albums.setAlbumID(null);
                            }

                            // GET THE ALBUM NAME
                            if (JOAlbums.has("name")) {
                                albums.setAlbumName(JOAlbums
                                        .getString("name"));
                            } else {
                                albums.setAlbumName(null);
                            }

                            // GET THE ALBUM COVER PHOTO
                            if (JOAlbums.has("cover_photo")) {
                                albums.setAlbumCover("https://graph.facebook.com/"
                                        + JOAlbums.getString("cover_photo")
                                        + "/picture?type=normal"
                                        + "&access_token="
                                        + Utility.mFacebook
                                                .getAccessToken());
                            } else {
                                albums.setAlbumCover("https://graph.facebook.com/"
                                        + JOAlbums.getString("id")
                                        + "/picture?type=album"
                                        + "&access_token="
                                        + Utility.mFacebook
                                                .getAccessToken());
                            }

                            // GET THE ALBUM'S PHOTO COUNT
                            if (JOAlbums.has("count")) {
                                albums.setAlbumPhotoCount(JOAlbums
                                        .getString("count"));
                            } else {
                                albums.setAlbumPhotoCount("0");
                            }

                            arrAlbums.add(albums);
                        }
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        // SET THE ADAPTER TO THE LISTVIEW
        lv.setAdapter(adapter);

        // CHANGE THE LOADING MORE STATUS
        loadingMore = false;

        // HIDE THE PROGRESS BAR (SPINNER) AFTER LOADING ALBUMS
        linlaHeaderProgress.setVisibility(View.GONE);
    }

} 
```

如需更多帮助，请查看[原始答案](https://stackoverflow.com/a/12385652/1221203)。如果仍然需要，则需要更多完整的[工作源代码](http://huguesjohnson.com/programming/java/android-fb-album/)和解释。虽然这比我提到的答案更令人困惑。Inshallah，这将解决您的查询。

# c - 静态与 Malloc

> ID：15238745
> 
> 赞同：9
> 
> 时间：2013-03-06T04:02:05.133
> 
> 标签：c, memory-management, malloc

块作用域中的 static 关键字与使用 malloc 相比有什么优势？

例如：

功能一：

```
f() {
    static int x = 7;
} 
```

功能 B：

```
f() {
    int *x = malloc(sizeof(int));
    if (x != NULL)
        *x = 7;
} 
```

如果我理解正确，这两个程序都会创建一个整数 7 存储在堆上。在 A 中，变量在一开始就在某个永久存储中创建，在 main 方法执行之前。在 B 中，一旦调用函数，您就在现场分配内存，然后在该指针指向的位置存储 7。在哪种情况下，您可能会使用一种方法而不是另一种方法？我知道你不能释放函数 A 中的 x，所以这不会让 B 通常更可取吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T04:06:30.113

> **两个程序都创建一个`integer 7`存储在堆上的**

不，他们没有。
`static`创建一个具有静态存储持续时间的对象，该对象在程序的整个生命周期内保持活动状态。虽然动态分配的对象（*由 创建`malloc`*）保留在内存中，直到被显式删除`free`。两者都提供不同的功能。`static`在函数调用中维护对象的状态，而动态分配的对象则不然。

> **在哪种情况下，您可能会使用一种方法而不是另一种方法？**

当您`static`希望对象在程序的整个生命周期内保持活动状态并在函数调用中保持其状态时使用。如果您在多线程环境中工作，`static`则所有线程都将共享同一个对象，因此需要同步。

当您`malloc`明确想要控制对象的生命周期时使用。例如：确保对象的生命周期足够长，直到函数调用者在函数调用后访问它。（一旦*函数**范围内，自动/本地对象将被释放`{ }`结束*）。除非调用者显式调用`free`分配的内存，否则会泄漏，直到操作系统在程序退出时回收它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:07:16.280

在函数 A 中，您`x`使用静态存储持续时间进行分配，这通常意味着它不在（大多数人认为的）堆上。相反，它只是保证在程序运行的整个过程中都存在的内存。

在函数 B 中，您每次进入函数时都会分配存储空间，然后（除非`free`您没有显示）泄漏该内存。

只有这两个选择，函数 A 显然更可取。它有缺点（尤其是面对多线程），但至少在某些情况下它是正确的。功能 B（就目前而言）是完全错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:07:57.400

忘记堆栈与堆。这不是这里发生的最重要的事情。

有时会`static`修改**作用域**，有时会修改**生命周期**。原型示例：

```
void int foo() {
     static int count = 0;
     return count++;
} 
```

尝试重复调用它，甚至可能从几个不同的函数或文件中调用，你会看到它`count`不断增加，因为在这种情况下`static`，变量的生命周期等于整个程序执行的生命周期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T04:08:34.450

> *如果我理解正确，这两个程序都会创建一个整数 7 存储在堆上*

不，静态变量是[在 Data 或 BSS 段](https://stackoverflow.com/questions/93039/where-are-static-variables-stored-in-c-c)中创建的，它们在程序的整个生命周期中都有生命周期。当你分配 using`malloc()`时，内存是在堆中分配的，并且必须使用`free()`call 显式释放它们。

> *在哪种情况下，您可能会使用一种方法而不是另一种方法？*

好吧，当您想要访问同一个变量以多次调用同一个函数时，您使用第一种方法。即，在您的示例中， x 只会初始化一次，并且当您第二次调用该方法时，将`x`使用相同的变量。

可以使用第二种方法，当你不想为函数的多次调用共享变量，从而第二次调用这个函数时，`malloc`再次编辑x。你必须每次都释放 x。

您可以通过调用`f()`2 次来查看差异，对于每种`f()`

```
...
f();
f();
...

f(){
    static int x = 7;
    printf("x is : %d", x++);
}

f(){
   int *x = malloc(sizeof(int));
   if (x != NULL)
      *x = 7; 
   printf("x is : %d", (*x)++);
   free(x);   //never forget this,
} 
```

结果会有所不同

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T04:12:23.293

阅读[http://www.teigfam.net/oyvind/pub/notes/09_ANSI_C_static_vs_malloc.html](http://www.teigfam.net/oyvind/pub/notes/09_ANSI_C_static_vs_malloc.html)

静态变量是在 main() 之前创建的，运行程序后不需要分配内存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T04:19:15.333

首先，static 是一个存储类，malloc() 是一个 API，它会触发 brk() 系统调用以在堆上分配内存。

> 如果我理解正确，这两个程序都会创建一个存储在堆上的整数 7 吗？

否。静态变量存储在分配给程序的内存的数据部分中。即使静态变量的作用域结束，它仍然可以在其作用域之外被访问，这可能表明数据段的内容具有独立于作用域的**生命周期。**

> 在哪种情况下，您可能会使用一种方法而不是另一种方法？

如果您想在给定范围内对内存使用进行更多控制，`malloc()/free()`否则更简单（更清洁）的方法是使用静态。

在性能方面，声明一个静态变量比在堆上分配它要快得多。因为堆管理的算法很复杂，并且处理堆请求所需的时间取决于算法的类型

我能想到建议使用静态的另一个原因是，静态变量默认初始化为零，因此无需担心。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T06:07:01.950

考虑下面的例子来了解静态是如何工作的。通常我们使用 static 关键字来定义变量或函数的范围。例如，定义为静态的变量将被限制在函数内，并将零售其值。

但是如下面的示例程序所示，如果您将静态变量的引用传递给任何其他函数，您仍然可以从任何其他函数更新相同的变量。

但恰恰是静态变量在程序终止时死亡，这意味着内存将被释放。

```
#include <stdio.h>

void f2(int *j)
{
    (*j)++;
    printf("%d\n", *j);
}

void f1()
{   
    static int i = 10;
    printf("%d\n", i);
    f2(&i);
    printf("%d\n", i);  
}

int main()
{
    f1();       
    return 0;   
} 
```

但是在 malloc() 的情况下，程序终止时不会释放内存，除非程序员在程序终止之前使用 free() 来释放内存。

这样你会觉得使用 malloc() 我们可以控制变量的寿命，但要注意......当你选择动态内存分配时，你必须非常精确地分配和释放内存。如果您忘记释放内存并且程序终止，则该部分堆不能用于其他进程分配内存。这可能会导致现实世界中的内存不足并减慢计算速度。要摆脱这种情况，您必须手动重新启动系统。

# apache-flex - Flex : Drag Source 用于拖放有什么用？

> ID：15238747
> 
> 赞同：0
> 
> 时间：2013-03-06T04:02:18.080
> 
> 标签：apache-flex, drag-and-drop, flex4

我已经阅读了[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cfe.html中的拖动源](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cfe.html)

但是我仍然不明白为什么你需要这个。我在网上看到的大多数示例，甚至都不使用拖动源。当您可以立即为该目标组件调用 DragManager.acceptDragDrop() 时，我看不到在 dragEnterHandler 中检查其格式值的意义。每次我调用 mouseMoveHandler 时，它都会为格式字符串设置相同的值。这意味着格式值将始终相同。

我觉得我没有正确理解这个概念。有人可以帮我解决这些问题并帮助我理解。

所以我的问题给你：

1.  为什么我们需要拖动源？
2.  为什么有些程序不使用拖动源？
3.  使用拖动源有什么好处？
4.  什么时候必须拖动源？
5.  不使用拖拽源好吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:07:37.037

我使用 DragSource 作为数据承载。就像您需要将一些数据从拖动起始点传输到拖放处理程序一样，可以使用 DragSource 完成。

它也可以用作标志。就像如果 e.dragSource.hasFormat(a) 这样做，否则这样做。

# shell - 在 unix 上与屏幕并行

> ID：15238751
> 
> 赞同：2
> 
> 时间：2013-03-06T04:02:39.213
> 
> 标签：shell, unix, gnu-screen

有没有办法并行运行？我可以手动启动屏幕，但我需要启动 30 个。我试图手动完成（愚蠢的是）但我在中途感到困惑并决定我最好问 stackoverflow。

```
#!/bin/bash --login
  2
  3
  4
  5
  6   avida=~/avida/cbuild/bin/avida
  7   skeleton_dir=~/cse845/no_pred
  8 # wd=/mnt/scratch/cse845_avida/predator_sim
  9   wd=~/cse845/no_predator_editor_sim_wd
 10
 11 for i in {1..30}
 12 do
 13 screen
 14
 15 
 16   sim_num=${i}
 17   sim_dir=${wd}/sim_$sim_num
 18   mkdir $sim_dir
 19   cd $sim_dir
 20   cp ${skeleton_dir}/*.cfg ${skeleton_dir}/*.org ./
 21   $avida &> avida_log.txt
 22# Here I would like to do the equivalent of exiting screen manually, ^A, d
 23 done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T02:25:32.973

以下是如何在 shell 脚本中同时启动 3 个（-d -m 在后台启动它们）

```
screen -s "name1" -c ~/screen/name1.screenrc -d -m 
screen -s "name2" -c ~/screen/name2.screenrc -d -m 
screen -s "name3" -c ~/screen/name3.screenrc -d -m 
```

然后，您可以在 screenrc 文件中指定的每个屏幕中拥有可变数量的选项卡/窗口。（带-t）。

请参阅旨在与 emacs 配合使用的示例 screenrc 文件：[https ://github.com/startup-class/dotfiles/blob/master/.screenrc](https://github.com/startup-class/dotfiles/blob/master/.screenrc)

这是关于指定每个套接字的选项卡/窗口的唯一部分。

```
# 2.3) Autoload two screen tabs for emacs/bash.
screen -t emacs 0
screen -t bash 1 
```

所以当你做**screen -ls**你会得到

```
There are screens on:
    4149.name1  (07/10/13 22:18:44) (Detached)
    4018.name2  (07/10/13 22:18:23) (Detached)
    3882.name3  (07/10/13 22:17:08) (Detached)
3 Sockets in /var/run/screen/S-yourid. 
```

然后如果你想连接到 name1，你会做**screen -r 4149**或**screen -r name1**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:23:55.597

我马上看到两件事：

1.  您缺少必要的反斜杠来转义屏幕命令参数中的换行符。
2.  您需要告诉 screen 在后台运行。请参阅`-d`和`-m`选项。

# makefile - 如何在make中将相对路径上移一级？

> ID：15238756
> 
> 赞同：0
> 
> 时间：2013-03-06T04:03:29.713
> 
> 标签：makefile

抱歉，如果这有点深奥，但在我的 makefile 中，我有一个变量 $(BASE) ，它是一个相对路径。我需要将路径*提升一级*。所以如果我有“../../../src”，我想要“../../src”。
有没有办法在Make中轻松做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:06:21.507

如果您要执行此操作的*所有*值都以 开头，您可以尝试`BASE``../`

```
$(patsubst ../%,%,$(BASE)) 
```

如果您只想删除任意路径的第一个组件（即 a/b/c -> b/c），则需要做更多的工作：

```
space := $(empty) $(empty)
shift-list = $(wordlist 2,$(words $1),$1)
shift-path = $(subst $(space),/,$(call shift-list,$(subst /, ,$1))) 
```

并将其用作`$(call shift-path,$(BASE))`. 如果您的路径有空间，这会中断，但`make`无论如何处理这些空间是一场噩梦，因为许多其他原因。

# css - 垂直菜单响应

> ID：15238757
> 
> 赞同：1
> 
> 时间：2013-03-06T04:03:30.057
> 
> 标签：css, menu

我有一个 960gs 的布局，在容器的左侧有一个垂直的菜单。该菜单我希望它适用于所有分辨率的 PC（我不关心智能手机或平板电脑）。

这是我的代码菜单 HTML

```
<ul>
      <li class='<?php echo $class2 ?>'><a href='index.php'><img src='<?php echo base_url();?>resources/img/home.png'><br>Home</a></li>
      <li class='<?php echo $class1 ?>'><a href='<?php echo base_url();?>mind'><img src='<?php echo base_url();?>resources/img/user.png'><br>Profile</a></li>
      <li class='<?php echo $class3 ?>'><a href='<?php echo base_url();?>search'><img src='<?php echo base_url();?>resources/img/searching.png'><br>Search</a></li>
      <li class='<?php echo $class4 ?>'><a href='index.php'><img src='<?php echo base_url();?>resources/img/contact.png'><br>Contacts</a></li>
      <li class='<?php echo $class5 ?>'><a href='<?php echo base_url();?>page'><img src='<?php echo base_url();?>resources/img/book.png'><br>Personal Page</a></li>
      <li class='<?php echo $class6 ?>'><a href='index.php'><img src='<?php echo base_url();?>resources/img/company.png'><br>Personal Page</a></li>

    </ul> 
```

这是我的菜单 CSS：

```
/*menu */

  .laterale ul {

    margin-top:-1px;
    display: inline-block;
    z-index: 20;
    margin-left:20px;
    float: left;

    }

  .laterale li {

    width:88px;
    height:60px;
    list-style: none;
    padding-top:15px;
    margin-top:5px;
    font-size:10px;
    text-align: center !important; 

    display: block;

    }

  .laterale a {

    text-decoration: none;
    padding: 15px 0px;
  color: #aaa;
  text-shadow: 0px 1px 0px #fff;
  border-top: 1px solid transparent;
    border-bottom: 1px solid transparent;
  border-left: none;
  border-right: none;
    background: transparent;
  -webkit-border-radius: 0px;
  -moz-border-radius: 0px;
   border-radius: 0px;
   opacity:0.8;

  } 
```

我认为这主要是通过响应式 css 完成的，但我可能是错的。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:54:01.690

如果我的观点正确，则垂直菜单项应根据屏幕分辨率具有流畅的宽度。

```
.menu li{
    display: block;
    margin:5px;
    padding: 5px;
    background-color: red;
    white-space: nowrap;
    overflow: hidden; 
   text-overflow: ellipsis;
} 
```

# numbers - 为 openmpi 设置处理器数量

> ID：15238765
> 
> 赞同：0
> 
> 时间：2013-03-06T04:04:33.593
> 
> 标签：numbers, wrapper, openmpi, processors

目前我正在使用这样的东西来运行一个 c++ 程序：

```
mpirun -np 4 ./test 
```

这很好用，但问题是我正在用 Python 包装 c++ 程序。所以我想在 Python 中设置处理器的数量并将其传递给 c++ 程序。

是否可以在不使用命令行的情况下将使用的处理器数量设置为 c++ 代码中的固定值？一个简单的例子是什么样子的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T22:36:13.570

通过 -np N ，您设置进程数，而不是处理器数。根据您在执行期间提供的标志或排名文件（如果您正在使用），处理器被进一步分配给每个进程。如果您专注于 Python 和 C++ 交互，我认为应该有一种方法可以调用 cmd 函数，例如 exec()。您可以轻松地在系统命令行上调用您想要执行的任何内容！

# sql - 通过将列名与特定字符串进行比较来检索数据的 SQL 查询

> ID：15238766
> 
> 赞同：2
> 
> 时间：2013-03-06T04:04:41.357
> 
> 标签：sql, oracle

我有一个`SQL`由客户、交易和商店组成的表。商店有 3 个值 (X,Y,Z)

我想检索在特定商店购物的客户，所以我使用了这个查询

```
select distinct customer from TABLE group by store. 
```

但是，现在我想要在 2 家商店 (X,Y) (Y,Z) (Z,X) 和 (X,Y,Z) 购物的客户详细信息。

当我使用

```
select distinct customer from TABLE where store='X' 
```

它给出了 0 个结果`oracle SQL Developer`

如何从这里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:50:28.297

尝试以下操作：

```
 Select Customer From
    (
         Select Customer,Store from TableName group by Store,Customer
    )tbl
    Group By Customer Having COUNT(Customer)>=2 Order By Customer 
```

**编辑：**

```
Declare @MainTable table
(
  Customer varchar(222),Store varchar(2222)
)
Insert Into @MainTable
Select 'C1','X'
Union All
Select 'C1','Y'
Union All
Select 'C1','X'
Union All
Select 'C2','X'
Union All
Select 'C2','Y'
Union All
Select 'C2','Z'
Union All
Select 'C3','X'
Union All
Select 'C3','Z'
Union All
Select 'C4','X'
Union All
Select 'C4','Y'

Declare @temp table 
(
  Customer varchar(200)
)
Insert Into @temp 
Select Customer From
    (
         Select Customer,Store from @MainTable group by Store,Customer
    )tbl
Group By Customer Having COUNT(Customer)>=2 Order By Customer

Declare @Customer_Store table 
(
  Customer varchar(200),
  Stores varchar(200)
)

DECLARE @Stores varchar(10)
Declare @Customer varchar(256)
While((Select COUNT(*) From @temp)>0)
Begin
        Set @Customer=(Select Top 1 Customer From @temp)
        Select @Stores=coalesce(@Stores + ',','') + Store From 
        @MainTable Where Customer=@Customer
        Group By Store
        Order By Store

        Insert Into @Customer_Store Select @Customer,@Stores

        Delete From @temp Where Customer=@Customer
        Set @Stores=null
End

Select Cast(COUNT(Customer) as Varchar(5))+' Customers shopped at Store ('+Stores+')'          CustomerDetail From @Customer_Store
Group By Stores 
```

输出：

```
2 Customers shopped at Store (X,Y)
1 Customers shopped at Store (X,Y,Z)
1 Customers shopped at Store (X,Z) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:07:06.037

按客户从表名组中选择不同的客户，商店的数量（商店）> 2

对不起....你可以试试这样

“选择客户，按客户从 table_name 组中存储，存储计数（客户）>=1 客户 asc 的订单”

我希望这是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:23:10.950

我认为你应该在 MySQL 中使用类似[GROUP_CONCAT的东西。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

[在这里您可以找到如何在 Oracle 中模拟它](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)

例如，对于 Oracle 11g R2，您可以使用 LISTAGG：

[SQLFiddle 演示](http://sqlfiddle.com/#!4/35085/6)

```
SELECT customer, 
       LISTAGG(store, ',') WITHIN GROUP (ORDER BY store) 
       AS STORES
FROM   
(select distinct customer,store from t) t1
GROUP BY customer; 
```

# php - 如何使用php从mysql中的单个表中获取所有数据？

> ID：15238767
> 
> 赞同：0
> 
> 时间：2013-03-06T04:04:46.080
> 
> 标签：php, mysql, mysqli

我正在尝试使用以下代码简单地从 mysql 表中获取所有数据：

```
$dbc = mysqli_connect('host', 'user', 'password', 'table');
$q = 'SELECT * FROM users';
$r = mysqli_query($dbc, $q);

$user_array = array();
    while ($row = mysql_fetch_array($r)) 
        {
        $user_array[]=$row;
        }
    echo "<br />";
    echo "print r of user_array: <br />";
    print_r($user_array); 
```

我什么也得不到。我查看了本教程（[http://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp)）等，但他们所做的只是让我感到困惑。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:08:27.983

尝试改变这个

```
mysql_fetch_array($r) 
```

到

```
mysqli_fetch_array($r) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T04:08:45.980

您已通过程序 MySQLi API ( `mysqli_connect()`) 进行连接，但您正尝试使用旧 API`mysql_fetch_array()`中的旧`mysql_*()`API。它们不兼容。

您需要通过`mysqli_fetch_array()`或`mysqli_fetch_assoc()`取而代之。[`mysqli_fetch_assoc()`](http://php.net/manual/en/mysqli-result.fetch-assoc.php)除非您真的需要数字键以及输出中的列名，否则建议使用`$row`：

```
// Check for errors.
if ($r) {
  while ($row = mysqli_fetch_assoc($r)) {
    $user_array[] = $row;
  }
}
else echo mysqli_error($dbc); 
```

您现在使用的是一个没有参数的简单查询，只是一个`SELECT *`没有`WHERE`子句的查询。将来，当您开始添加`WHERE`条件时，您将希望开始阅读有关准备好的语句和[`mysqli::prepare()`](http://php.net/manual/en/mysqli.prepare.php).

# python - 使用 sum 函数时遇到问题

> ID：15238768
> 
> 赞同：1
> 
> 时间：2013-03-06T04:05:00.867
> 
> 标签：python, python-3.x

输入（列表）将是一个类似于 的列表`[[1,2],[5,6],[4,6]]`。我正在尝试将整行加在一起以测试它是偶数还是奇数。

```
def evenrow(list):
    for row in list:
        for item in row:
            newNums+=item
            n=sum(newNums)
            print(n) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:19:16.060

首先不要使用“列表”作为变量名。其次，您为 int 值而不是列表调用 sum，这就是您收到错误的原因。请检查您的代码。

不确定，但您的代码可能如下所示：

```
def evenrow(list):
    for row in list:
        value = sum(row)
        if values is even: # put your condition here
            # do something
        else:
            print "Value is odd" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:11:28.183

只是另一种方法：

```
def evenrow(lst):
    return sum(map(sum,lst))%2 == 0 #True if even, False otherwise. 
```

这是这样工作的：

外部`sum`将 的所有项目相加`map`，适用`sum`于 中的每个项目`lst`。在python2中，map返回一个`list`对象，而在python3中，它返回一个`map`对象。这被传递给外部`sum`函数，该函数将`map`.

```
def evenrow(lst):
    return sum(itertools.chain(*a)) % 2 == 0 
```

这会扩展`a`（每个子列表）中的所有项目，并将它们链接在一起，作为一个`chain`对象。然后它将所有项目加在一起并确定总和是否为偶数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:31:13.083

You don't need the following line of code: `n=sum(newNums)`. You already summed up all the items of row in the `newNums += item` line. Second, you have to declare `newNums` before using it in your code. So, the fixed version of code will look like this:

```
def evenrow(list):
    for row in list:
        newNums = 0
        for item in row:
            newNums += item
        print(newNums) 
```

BTW: You should consider accepting answers to some of your previous questions, otherwise nobody will spend their time to answer your new questions.

# java - 如何使用 Jersey 调用 Google Drive REST API？

> ID：15238770
> 
> 赞同：3
> 
> 时间：2013-03-06T04:05:12.107
> 
> 标签：java, jersey, google-drive-api, google-oauth

我正在尝试使用 Java Jersey 而不是 Google 客户端库来访问 Google File API，但我不断收到“401 Unauthorized”的响应状态。在调用调用之前，我使用 Oauth 从 Google 获得了访问令牌：

```
public static String getGoogleFileResource(final String fileId,
        final String accessToken) {
    //projection

    ClientConfig cc = new DefaultClientConfig();
    cc.getProperties().put(ClientConfig.PROPERTY_FOLLOW_REDIRECTS, true);
    Client client = Client.create(cc);

    String url = String
            .format("https://www.googleapis.com/drive/v2/files/%s?fields=downloadUrl&key=%s",
                    fileId, GoogleClientConstants.GOOGLE_api_key);
    WebResource webResource = client.resource(url);

    String response = webResource
            .accept(MediaType.APPLICATION_JSON_TYPE,
                    MediaType.APPLICATION_XML_TYPE)
            .header("Authorization", "Bearer " + accessToken)
            .get(String.class);

    logger.info("Authorization - " + "Bearer " + accessToken);
    logger.info(" reponse " + response);
    return response;
} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T07:05:17.250

事实证明，您需要将访问令牌添加到 http 请求标头。

在 Google 开发者指南中：“上传文件”

[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

您需要发送这样的发布请求：

```
POST /upload/drive/v2/files?uploadType=media HTTP/1.1
Host: www.googleapis.com
Content-Type: image/jpeg
Content-Length: number_of_bytes_in_JPEG_file
Authorization: your_auth_token

JPEG data 
```

请注意，您需要在标题中放置 your_auth_token

# jquery - 用于图像缩略图库的任何 jquery 插件，在弹出窗口中有描述

> ID：15238771
> 
> 赞同：1
> 
> 时间：2013-03-06T04:05:15.760
> 
> 标签：jquery, jquery-plugins, popup, thumbnails, image-gallery

我正在互联网上搜索用于图像缩略图库的 jquery 插件，并在弹出窗口中进行描述。但直到现在我还没有找到合适的插件。我需要在弹出窗口中显示下一个或上一个项目描述的下一个和上一个按钮按钮单击（在弹出窗口中滑动内容）..

任何人都可以为我推荐一个插件..？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:31:14.743

*看看这个，你可以在这里找到一个*

[37 个新鲜的 Jquery 图片插件](http://www.1stwebdesigner.com/css/fresh-jquery-image-gallery-display-solutions/)

# r - 在 R 中为虚拟变量创建 Monte Carlo 数据

> ID：15238775
> 
> 赞同：1
> 
> 时间：2013-03-06T04:05:58.537
> 
> 标签：r, matrix, montecarlo

我正在建立一个蒙特卡罗模拟，我一直在尝试为 180 个国家和 12 个时间段创建一组虚拟变量。鉴于大量数据点，是否有一种更短的方法可以为时间和国家固定效应创建虚拟变量，而无需将其从 Excel 文件中提取出来？

例如

```
 F.T(1)  1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\. 1, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0......(Extends until 180 countries)
   F.T(2)  0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\. 0, 1, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0......(Extrends until 180 countries) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:14:41.730

使用您选择的随机数生成器进行复制应该可以解决问题这是一个使用简单二项式分布的示例，概率 = 1/2

```
replicate(12, rbinom(180, 1, .5), simplify=FALSE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:49:46.927

`rbinom`我认为首先创建所有数据然后将其转换为矩阵而不是调用`rbinom`12 次可能更容易/更快。那是：

```
set.seed(45)
t <- rbinom(180*12, 1, 0.5)
dim(t) <- c(180, 12) 
```

只是为了看看是否有区别，这是一个基准

```
# I use simplify = TRUE here.
FUN1 <- function(n, a) {
    set.seed(45)
    replicate(n, rbinom(a, 1, .5), simplify = TRUE)
}
FUN2 <- function(n, a) {
    set.seed(45)
    t <- rbinom(n*a, 1, 0.5)
    dim(t) <- c(a, n)
    t
}
require(rbenchmark)
benchmark(t1 <- FUN1(1000, 12000), t2 <- FUN2(1000, 12000), 
            order="elapsed", replications=5)

#                      test replications elapsed relative user.self sys.self
# 2 t2 <- FUN2(1000, 12000)            5   3.991    1.000     3.859    0.111
# 1 t1 <- FUN1(1000, 12000)            5   5.337    1.337     4.785    0.472

identical(t1, t2)
# [1] TRUE 
```

要在评论中回答您的问题：

```
w  <- rep(diag(12)[1:9, ], N)
dim(w) <- c(9, 12*N)
w <- t(w)
colnames(w) <- paste0("t", 1:9) 
```

甚至更好：

```
w2 <- do.call(rbind, replicate(N, diag(12)[, 1:9], simplify = FALSE))
colnames(w2) <- paste0("t", 1:9) 
```

# asp.net - ie中的下拉列表错误显示

> ID：15238777
> 
> 赞同：0
> 
> 时间：2013-03-06T04:06:07.407
> 
> 标签：asp.net, vb.net, internet-explorer

我在 IE6、7 和 8 中使用 DropDownList 控件（ASP.NET、VB）。

我的 DropDownList 控件设置为 200px 宽度，但项目列表更长，并且显示被裁剪。

我试过使用带有属性（“标题”）的工具提示，但它没有用。

我应该怎么办？

（我从数据表中绑定了项目，所以我没有`<select>` `<options>`在 html 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:25:35.200

一旦页面呈现，您可以通过 JQUERY 覆盖下拉的宽度。

```
$(document).ready(function(){

$("#dropdownID").addClass("ddlwidth")
}); 
```

在 CSS 中创建一个类

```
.ddlwidth{width:500px !important;} 
```

!important 将用当前值覆盖宽度

# javascript - 替换字符串中的第 N 次出现 - JavaScript

> ID：15238779
> 
> 赞同：2
> 
> 时间：2013-03-06T04:06:15.003
> 
> 标签：javascript, jquery

我确定这应该可以工作，但我无法让它做我想做的事情：

```
new_str = old_str.replace(3, "a");
// replace index 3 (4th character) with the letter "a" 
```

所以如果我有`abcdef`那么上面应该返回`abcaef`，但我一定是做错了什么。它正在改变字符，但不是预期的字符。

无论是原生 JS 还是 jQuery 解决方案都可以，无论是最好的（我在那个页面上使用 jQuery）。

我试过搜索，但所有教程都在谈论正则表达式等，而不是索引替换的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:11:42.393

您似乎想要数组样式的替换，因此将字符串转换为数组：

```
// Split string into an array
var str = "abcdef".split("");

// Replace char at index
str[3] = "a";

// Output new string
console.log( str.join("") ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:24:08.333

以下是其他三种方法-

var old_str="abcdef",

```
//1.
new_str1= old_str.substring(0, 3)+'a'+old_str.substring(4),

//2.
new_str2= old_str.replace(/^(.{3}).(.*)$/, '$1a$2'),

//3.
new_str3= old_str.split('');
new_str3.splice(3, 1, 'a'); 
```

//返回值

```
new_str1+'\n'+new_str2+'\n'+ new_str3.join('');

abcaef
abcaef
abcaef 
```

# php - 联系表格不起作用 - 错误：“我不知道您在寻找什么”

> ID：15238785
> 
> 赞同：0
> 
> 时间：2013-03-06T04:06:32.843
> 
> 标签：php, html, wordpress, contact-form

我已经使用 html 和 php 在我的 wordpress 网站上建立了一个[联系表单](http://frshstudio.com/#contact)，但它似乎没有按应有的方式工作。单击提交按钮后，我被带到[一个错误页面](http://frshstudio.com/process.php)，上面写着“我不知道你在找什么”。如何将所有表单提交发送到我的电子邮件？

```
<div id="contact">
    <div id="contact-form" class="clearfix">  
        <h2><img src="<?php echo get_template_directory_uri(); ?>/img/chat.png" alt="contact frsh studio"></h2> 
        <?php  
            //init variables  
            $cf = array();  
            $sr = false;  
            if(isset($_SESSION['cf_returndata'])){  
                $cf = $_SESSION['cf_returndata'];  
                $sr = true;  
            }  
        ?> 
            <ul id="errors" class="<?php echo ($sr && !$cf['form_ok']) ? 'visible' : ''; ?>">  
                <li id="info">There were some problems with your form submission:</li>  
                <?php  
                if(isset($cf['errors']) && count($cf['errors']) > 0) :  
                    foreach($cf['errors'] as $error) :  
                ?>  
                <li><?php echo $error ?></li>  
                <?php  
                    endforeach;  
                endif;  
                ?>  
            </ul>  
            <p id="success" class="<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>">Thanks for reaching out! I'll be in touch shortly!</p>    
        <form method="post" action="process.php"> 
            <textarea id="message" name="message" placeholder="MESSAGE" required="required" data-minlength="20"></textarea>

            <input type="text" id="name" name="name" value="" placeholder="NAME" required="required" autofocus="autofocus" />      

            <input type="email" id="email" name="email" value="" placeholder="EMAIL" required="required" />   
            <select id="enquiry" name="enquiry">  
                <option value="refrsh">Brand REFRSH</option>  
                <option value="consult">Brand Consultation</option>  
                <option value="support">Just a Hello!</option>  
            </select>  

            <span id="loading"></span>  
            <input type="submit" value="Holla!" id="submit-button" />  

        </form>  
    </div>  
</div><!-- end contact --> 
```

```
<?php  
if( isset($_POST) ){  
    //form validation vars  
    $formok = true;  
    $errors = array();  
    //submission data  
    $ipaddress = $_SERVER['REMOTE_ADDR'];  
    $date = date('d/m/Y');  
    $time = date('H:i:s');  
    //form data  
    $name = $_POST['name'];  
    $email = $_POST['email'];  
    $telephone = $_POST['telephone'];  
    $enquiry = $_POST['enquiry'];  
    $message = $_POST['message'];  
    //validate form data  
    //validate name is not empty  
    if(empty($name)){  
        $formok = false;  
        $errors[] = "You have not entered a name";  
    }  
    //validate email address is not empty  
    if(empty($email)){  
        $formok = false;  
        $errors[] = "You have not entered an email address";  
    //validate email address is valid  
    }elseif(!filter_var($email, FILTER_VALIDATE_EMAIL)){  
        $formok = false;  
        $errors[] = "You have not entered a valid email address";  
    }  
    //validate message is not empty  
    if(empty($message)){  
        $formok = false;  
        $errors[] = "You have not entered a message";  
    }  
    //validate message is greater than 20 characters  
    elseif(strlen($message) < 20){  
        $formok = false;  
        $errors[] = "Your message must be greater than 20 characters";  
    }  
    //send email if all is ok  
    if($formok){  
        $headers = "From: info@example.com" . "\r\n";  
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  
        $emailbody = "<p>You have received a new message from the enquiries form on your website.</p>
                      <p><strong>Name: </strong> {$name} </p>
                      <p><strong>Email Address: </strong> {$email} </p>
                      <p><strong>Telephone: </strong> {$telephone} </p>
                      <p><strong>Enquiry: </strong> {$enquiry} </p>
                      <p><strong>Message: </strong> {$message} </p>
                      <p>This message was sent from the IP Address: {$ipaddress} on {$date} at {$time}</p>";  
        mail("alex@frshstudio.com","New Enquiry",$emailbody,$headers);  
    }  
    //what we need to return back to our form  
    $returndata = array(  
        'posted_form_data' => array(  
            'name' => $name,  
            'email' => $email,  
            'telephone' => $telephone,  
            'enquiry' => $enquiry,  
            'message' => $message  
        ),  
        'form_ok' => $formok,  
        'errors' => $errors  
    );  
    //if this is not an ajax request  
    if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){  
        //set session variables  
        session_start();  
        $_SESSION['cf_returndata'] = $returndata;  
        //redirect back to form  
        header('location: ' . $_SERVER['HTTP_REFERER']);  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:24:48.317

您的问题可能来自您的表单操作，请尝试此固定操作

```
<form method="post" action="http://frshstudio.com/wp-content/themes/frsh/process.php"> 
```

并移动 session_start(); 到 process.php 的顶部

并确保这`<?php` 是 process.php 第一行的唯一内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:33:09.853

尝试全部更改为：

```
<div id="contact">
    <div id="contact-form" class="clearfix">  
        <h2><img src="<?php echo get_template_directory_uri(); ?>/img/chat.png" alt="contact frsh studio"></h2> 
        <?php  
        $message = $_REQUEST["message"];
        $name = $_REQUEST["name"];
        $email = $_REQUEST["email"];
        $enquiry = $_REQUEST["enquiry"];
        $headers = "From:" . $email;
        if($message !== null && $name !== null && $email !== null && $enquiry !== null){
            mail("alex@frshstudio.com",$enquiry,$message,$headers);
            echo "message sent!";
        } else {

        }
        ?> 
            <ul id="errors" class="<?php echo ($sr && !$cf['form_ok']) ? 'visible' : ''; ?>">  
                <li id="info">There were some problems with your form submission:</li>  
                <?php  
                if(isset($cf['errors']) && count($cf['errors']) > 0) :  
                    foreach($cf['errors'] as $error) :  
                ?>  
                <li><?php echo $error ?></li>  
                <?php  
                    endforeach;  
                endif;  
                ?>  
            </ul>  
            <p id="success" class="<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>">Thanks for reaching out! I'll be in touch shortly!</p>    
        <form method="post" action="#"> 
            <textarea id="message" name="message" placeholder="MESSAGE" required="required" data-minlength="20"></textarea>

            <input type="text" id="name" name="name" value="" placeholder="NAME" required="required" autofocus="autofocus" />      

            <input type="email" id="email" name="email" value="" placeholder="EMAIL" required="required" />   
            <select id="enquiry" name="enquiry">  
                <option value="refrsh">Brand REFRSH</option>  
                <option value="consult">Brand Consultation</option>  
                <option value="support">Just a Hello!</option>  
            </select>  

            <span id="loading"></span>  
            <input type="submit" value="Holla!" id="submit-button" />  

        </form>  
    </div>  
</div><!-- end contact --> 
```

还有一个，我想你还没有创建 process.php

# html - 使用上一页发布的表单数据填充文本输入字段

> ID：15238786
> 
> 赞同：0
> 
> 时间：2013-03-06T04:06:35.650
> 
> 标签：html, forms, post, input, get

我有一个表单操作，它发布到第二页，上面有一个包含更多信息的表单。

如何将前一页表单字段中的信息提取（我猜是“获取”）到第二页的新字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:09:48.913

这将取决于您如何处理表格。您的服务器端脚本平台（例如 PHP）将提供一种访问 POST 数据以呈现到下一页的方法。

如果您只是编写没有服务器端组件的静态 HTML，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:10:39.197

当您发布表单时，这意味着您正在向后端发送数据。**要捕获该数据，您需要使用像PHP**这样的服务器端语言在服务器上对其进行处理。因此，假设您使用的是**PHP**，您将使用以下方式获取发布的数据：

```
<?
$name = $_POST['name']; //if the form method is set to post
$name = $_GET['name'];  //if the form method is set to get
?> 
```

`$_POST`数组将保存您使用**POST** http 请求发送的数据，而`$_GET`数组将保存您使用**GET** http 请求发送的数据。

# ruby-on-rails - 如何在 3 模型系统中选择当前模型？

> ID：15238788
> 
> 赞同：0
> 
> 时间：2013-03-06T04:06:45.430
> 
> 标签：ruby-on-rails

我有 3 个模型。用户有多个投资组合，投资组合有多个资产。

当用户登录时，这使他成为`current_user`by `find_by_id`。当他们第一次注册时，它会为他们创建一个投资组合。这成为 current_portfolio。

在此之后，他们可以创建投资组合，将它们重定向到所有投资组合的列表。单击每个链接将使该投资组合成为 current_portfolio。

```
@current_portfolio = current_user.portfolios.find_by_id(params[:id]) 
```

投资组合的显示视图具有资产表单，以便他们可以快速将资产添加到投资组合。这就是我卡住的地方。因为资产表单在投资组合`show`视图中，所以我的资产控制器需要引用 current_portfolio，但这是在我的投资组合控制器中。

投资组合控制器：

```
def show
    @current_portfolio = current_user.portfolios.find_by_id(params[:id])
    @asset = @current_portfolio.assets.build
end 
```

提交表单后，它会转到我的资产控制器`Create`功能。`Create`不能简单地拥有`@current_portfolio`，因为它位于不同的控制器上。我也不能使用`find_by_id(params[:id])`，因为`:id`没有提供任何东西。

当我有 3 个模型时，如何引用第二个模型？（对不起，我是 Rails 的新手......）

编辑更新：我以为我找到了解决方案，但意识到它不起作用。

我传入`<%= hidden_field_tag :portfolio_id, params[:id]%>`了我的表单并将我在 Asset 控制器中的 Create 设置为

```
def create
    @asset = Asset.new(params[:asset])
    @asset.save
end 
```

但它没有得到我模型中必填字段的portfolio_id。

在我看来完整的形式

```
<%= form_for(@asset) do |f| %>
        <%= hidden_field_tag :portfolio_id, params[:id]%>
        <%= f.text_field :asset_symbol %>
        <%= f.text_field :shares %>
        <%= f.text_field :cost %>
        <%= f.text_field :purchase_date, :type=>'date' %>
        <%= f.submit "+ Add to Portfolio" %>
<%end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:46:00.723

我的猜测是隐藏字段中的portfolio_id 不会作为资产散列的一部分返回。也许就像在保存之前分配 @asset.portfolio_id = params[:portfolio_id] 一样简单。检查您的日志以确切了解 POST 中返回的内容

# iphone - 从 rails 下载到 iphone 压缩文件丢失部分

> ID：15238791
> 
> 赞同：0
> 
> 时间：2013-03-06T04:07:15.910
> 
> 标签：iphone, ios, ruby-on-rails, ziparchive

我正在使用 send_file 将包含多个图像的压缩文件从我的 rails 服务器下载到我的 iPhone。在 Rails 上，我使用的是 Zip::ZipOutputStream.put_next_entry，我认为它来自 ruby​​zip。在 iPhone 上，我使用 ZipArchive 使用 UnzipFileToData 将文件解压缩回多个文件到内存中。我遇到的问题是图像的底部是随机黑色的。一些图像没有被涂黑的部分，而另一些图像的底部多达一半被涂黑。图像很小，大约 20 KB。

我遇到的问题是我无法弄清楚从轨道到 iPhone 的路径的哪一部分导致图像的底部变黑。

```
 1\.  I've ftp'ed the zipped file from my Rails server to my Mac and unzipped them and the images look fine, which means the images are getting zipped on the Rails server correctly.
 2\.  I've tried reversing the order that the images are added to the zip file, but the same amounts of the bottom of the images are blacked out.
 3\.  Could it be that different compression levels are being used? 
```

任何人都知道为什么来自多文件压缩文件的解压缩图像会丢失图像底部的随机部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:16:54.137

[在这里](https://stackoverflow.com/questions/10422075/rails-ziping-files-reading-binary-data)找到了解决方案。我的 Rails 代码最初看起来像：

```
 Zip::ZipOutputStream.open(zipped_file.path) do |z|
    user_photo_array.each do |file|
        z.put_next_entry(File.basename(file))
        z.print IO.read(file)
    end
 end 
```

并且正如上面的链接所述， IO.read 对于二进制文件是有问题的，所以我按照链接的建议将 IO.read 替换为 File.open(file, "rb"){ |f| f.read } 为

```
 Zip::ZipOutputStream.open(zipped_file.path) do |z|
    user_photo_array.each do |file|
        z.put_next_entry(File.basename(file))
        z.print File.open(file, "rb"){ |f| f.read }
    end
 end 
```

这解决了问题！

# c# - GroupBy 表达式

> ID：15238793
> 
> 赞同：0
> 
> 时间：2013-03-06T04:07:24.950
> 
> 标签：c#, group-by

我有以下对象，我希望得到一个结果，该结果提供按第一个类别描述分组的对象集合，然后按子类别描述分组：

类别（计数）
     子类别（计数） 子类别（
     计数）

```
public class Posting
{
    public Category Category { get; set; }
    public SubCategory SubCategory { get; set; }
}

public class Category
{
    public string Description { get; set; }
}

public class SubCategory
{
    public string Description { get; set; }
} 
```

**编辑**

所以我有这样的工作：

```
foreach (var category in col.GroupBy(x => x.Category.Description).Select(x => new { CategoryName = x.Key, Items = x }).OrderBy(x => x.CategoryName))
            {
                Console.WriteLine(category.CategoryName);
                foreach (var subCategory in category.Items.GroupBy(x => x.SubCategory.Description).Select(x => new { SubCategoryName = x.Key }).OrderBy(x => x.SubCategoryName))
                {
                    Console.WriteLine("\t" + subCategory.SubCategoryName);
                }
            } 
```

但我想把它放到一个对象图中，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:59:42.763

这似乎非常接近，但需要注意`Key`的是“内部”子类别分组的字段是包含类别和子类别的匿名类型。但是，根据您的应用程序正在做什么，这可能是一项功能，因为您将始终拥有可用的类别。

```
var results = col
    .GroupBy(posting => new
        {
            Category = posting.Category.Description,
            SubCategory = posting.SubCategory.Description
        })
    .GroupBy(group => group.Key.Category.Description); 
```

# html - 对象未在 createjs 中删除阶段的子级

> ID：15238802
> 
> 赞同：0
> 
> 时间：2013-03-06T04:08:28.217
> 
> 标签：html, createjs

我创建了一个包含一个圆圈和一个文本的舞台。我正在使用两个动画

```
 var tween = createjs.Tween.get(ball, {loop:true})
                .to({x:ball.x, y:canvas.height - 55, rotation:-360}, 1500, createjs.Ease.bounceOut)
                .wait(1000)
                .to({x:canvas.width-55, rotation:360}, 2500, createjs.Ease.bounceOut)
                .wait(1000).call(stop);

       function stop(){
        stage.removeChild(txt);
        stage.removeChild(ball);
        createjs.Ticker.removeEventListener("tick", tick);
        createjs.Ticker.removeEventListener("tick", stage);

       } 
```

但是 stop 方法中的 removechild 没有调用。谁能告诉我我错在哪里了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:01:41.530

您可以通过将范围传递给“调用”函数来解决此问题。目前它正在调用球实例上的停止。

`.wait(1000).call(stop, null, this);`

# javascript - $(this) 参考

> ID：15238804
> 
> 赞同：0
> 
> 时间：2013-03-06T04:08:34.997
> 
> 标签：javascript, jquery

```
$('td').click(function(){    
    $('input:radio').click(function(){    
    })
}) 
```

如果我在第二行之后使用 $(this) ，它将引用单选按钮。如何从该行引用 td 元素？我正在尝试将 id 添加到 td 元素，但它会将其添加到单选按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T04:10:24.553

在单选按钮处理程序之前保存对此的引用：

```
$('td').click(function () {
    var self = this;
    $('input:radio').click(function () {
        // self refers to 'this' from the td selection here
    });
}); 
```

但是，我不确定这是您真正想要做的，因为您正在做的是为单击 td 上的单选按钮分配单击处理程序。你是这么想的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:22:14.667

有两种方法可以做到：

正如其他人所展示的，您可以使用闭包：

```
$('td').click(function() {
    var td = this; // Creates a closure
    $('input:radio').click(function(event) {
        // this and event.target refer to the radio button
        // td refers to the <td> element
    });
}); 
```

或者您可以使用`$.prox()`：

```
$('td').click(function() {
    $('input:radio').click($.proxy(function(event) {
        // this refers to the td
        // event.target refers to the radio button
    }, this));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:11:23.497

```
$('td').click(function(){    
    var tdElement = $(this);
    $('input:radio').click(function(){    
        // Do whatever you like with tdElement here
    })
}) 
```

# crystal-reports - 强制将记录切到下一页 - 水晶报表

> ID：15238806
> 
> 赞同：0
> 
> 时间：2013-03-06T04:08:52.600
> 
> 标签：crystal-reports

我希望你们都有一个美好的一天。好吧，我也希望今天是我找到问题解决方案的好日子。

我对我现在正在做的报告有一个要求，这让我感到很痛苦。是否可以控制水晶报表中数据的显示？需要说明的是，我有一份申报表，每页只需要 9 行（填写描述、国家代码等）。假设第一项（记录）的描述扩展到第 4 行（4 行），第二项的描述应扩展到第 11 行（7 行）。由于表格只允许填写 9 行数据，因此应显示第二项的描述，以便前 5 行与第一项（4 行）的描述一起在第一页上，而第 6 行和第说明的第 7 行将显示在第二页上。

详细说明：

[第一页]

项目 1 此描述扩展 [国家代码] [等]

```
 to the 4th row of this

        form. And so it won't be

        cut. 
```

项目 2 此描述扩展 [国家代码] [等]

```
 to the 11th row of this

        form. And so it will be

        cut. The problem is how

        can I cut this description 
```

[第二页]

```
 such that the continuation

        will be shown here. 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:12:02.050

您需要在“格式”菜单中将表单字段设置为空白时被隐藏。这样，表格只会占用与实际信息一样多的信息。

然后在您操作的任何级别（组、部分、子报表等）上取消选中*Keep together*选项，它应该会破坏该元素并在下一页继续它。

# hbase - 如何从 rdbms 和 hbase 映射表

> ID：15238807
> 
> 赞同：2
> 
> 时间：2013-03-06T04:08:53.280
> 
> 标签：hbase, multiple-columns

在我当前的项目中，我的任务是从一组带有 ER 图的 RDBMS 表中设计 HBase 表。1) 通过查看 RDBMS 表来设计 HBase 表的方法是什么？我正在尝试为此找出一些指导方针。

2）而且，在浏览 HBase 材料时，我遇到了面向行和面向列的概念。哪一个好？

3) Column Family 是 HBase 必须的吗？如果是，那么在查看 rdbms 表之后如何决定列族？我认为，不断变化的列应该是“值”并且可以是列族的一部分，对吗？

问候， Shouvanik 大数据开发人员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:37:42.930

好吧，过去几周我经历了同样的过程，从所有资源中我发现这些是最有趣的。我觉得他们绝对可以帮助你。

一篇关于 HBase 及其基本概念的非常清晰的文章：

[http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable](http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable)

去年 HBaseCon 关于如何在 HBase 中设计与传统数据库相反的模式的视频：

[http://www.cloudera.com/content/cloudera/en/resources/library/hbasecon/video-hbasecon-2012-hbasecon-2012.html](http://www.cloudera.com/content/cloudera/en/resources/library/hbasecon/video-hbasecon-2012-hbasecon-2012.html)

# c# - LINQ 语法

> ID：15238812
> 
> 赞同：2
> 
> 时间：2013-03-06T04:09:20.730
> 
> 标签：c#, linq, html-agility-pack

我有以下 LINQ 在 HTMLAgilityPack 的帮助下从 html标签填充数据表，每个标签都有一个属性，如果属性值为“rating-col” `<tr>`，我需要忽略该标签的。`innertext`

```
nodes.Skip(1)
.Select(
tr => tr.Elements("td").
    Select(td => td.InnerText.
        Where(td.Attributes[0].Value != "rating-col")).
        ToArray()).
        ToList().
        ForEach(row => dt.Rows.Add(row)); 
```

没有 Where 子句一切正常，我在`Where`子句中做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T04:12:13.763

`Where(td.Attributes[0].Value != "rating-col"))`里面应该有一个 lambda ...例如：

`Where(c => c.Attributes[0].Value != "rating-col"))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T04:23:25.050

看起来您缺少一个 lambda，并且其中一个 Selects 出现故障。`ToList()`此外，这里没有理由`ForEach()`。您的`ToList()`电话使事情变慢并迫使您使用更多内存。您需要它的唯一原因是获取`ForEach()`扩展名，这并不能真正为您节省任何通过正常`foreach`循环的东西。另外，虽然我不是该领域的专家，但我知道该`ForEach()`扩展的功能风格很差，因为它几乎假定您正在引起副作用（一个很大的功能禁忌）。由于 linq 深受函数式编程范式的启发，因此我尝试关注这些事情。

```
foreach (var row in nodes.Skip(1)
     .Select(tr => tr.Elements("td")
         .Where(td => td.Attributes[0].Value != "rating-col")
         .Select(td => td.InnerText)
         .ToArray()))
{
    dt.Rows.Add(row);
} 
```

# java - 在 JScrollPane 中获取正确的鼠标位置

> ID：15238814
> 
> 赞同：2
> 
> 时间：2013-03-06T04:09:37.773
> 
> 标签：java, swing, jscrollpane

这是我的问题：

![在此处输入图像描述](../Images/ca7546d05eab1b2b26375a476d29cc3b.png)

当右键单击 JTree 中的元素时，我基本上是在创建一个下拉菜单，问题是 JTree 在 JScrollPane 内，并且窗格滚动得越多，我的弹出菜单就越远。

右键单击会触发一个 MouseEvent，该事件在以下代码中被拦截，其结果是创建一个新的弹出菜单。

```
@Override
public void mouseClicked(MouseEvent e) {
    if (SwingUtilities.isRightMouseButton(e)) {

        int row = tree.getClosestRowForLocation(e.getX(), e.getY());
        tree.setSelectionRow(row);

        TreePath path = tree.getPathForRow(row);  

        DefaultMutableTreeNode node = (DefaultMutableTreeNode) path.getLastPathComponent();  

        // If this object is a Search...
        if(node.getUserObject().getClass() == Search.class) {
            jp = new ItemEditPopUpMenu(tree, row, true);
        } else {
            jp = new ItemEditPopUpMenu(tree, row, false);
        }

        jp.show(this, e.getX(), e.getY());
    }
} 
```

如您所见，我所做的只是从 MouseEvent 中获取位置并将其用作要在以下行中创建弹出菜单的位置：

```
jp.show(this, e.getX(), e.getY()); 
```

现在我注意到这是发送事件的元素的相对位置，这解释了问题，JScrollPanel 在滚动时从 JFrame 偏移，问题是我如何知道多远？

我只是不知道，这就是我需要帮助的地方。提前非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T06:53:47.790

我似乎没有问题。

如果我使用视图端口“view”作为弹出窗口的引用，弹出窗口会准确显示鼠标单击的位置。

我只能想象你没有将对树的引用传递给弹出窗口......

![在此处输入图像描述](../Images/642bd5a577b8865013b318ddf7c00e7e.png)

我以为这将是一团糟的点转换，但事实证明，它很简单......

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestScrollPane {

    public static void main(String[] args) {
        new TestScrollPane();
    }

    public TestScrollPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(new TestPane()));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private List<Point> points;
        private JPopupMenu pm;

        public TestPane() {
            pm = new JPopupMenu();
            pm.add(new JLabel("Suprise"));
            points = new ArrayList<>(3);
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    Point p = e.getPoint();
                    points.clear();
                    points.add(p);
                    // View port
                    Container parent = getParent();
                    Point pp = SwingUtilities.convertPoint(TestPane.this, p, parent);
                    points.add(pp);
                    // ScrollPane...
                    parent = parent.getParent();
                    Point ppp = SwingUtilities.convertPoint(TestPane.this, p, parent);
                    points.add(ppp);

                    pm.show(TestPane.this, p.x, p.y);

                    repaint();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(1000, 1000);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (points.size() == 3) {
                g2d.setColor(Color.RED);
                Point p = points.get(0);
                g2d.fillOval(p.x - 2, p.y - 2, 4, 4);

                g2d.setColor(Color.GREEN);
                p = points.get(1);
                g2d.fillOval(p.x - 2, p.y - 2, 4, 4);

                g2d.setColor(Color.BLUE);
                p = points.get(2);
                g2d.fillOval(p.x - 2, p.y - 2, 4, 4);
            }
            g2d.dispose();
        }
    }
} 
```

只是为了确保我没有遗漏什么，这是一个使用`JTree`

![在此处输入图像描述](../Images/c7da28c3551941a22d1da9ba3de3c8eb.png)

（您可以放弃自定义单元格渲染进行测试，这是我放置的一些废代码）

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.util.Random;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.UIManager;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.DefaultTreeModel;

public class TestCustomTreeNode {

    public static void main(String args[]) {
        new TestCustomTreeNode();
    }
    private JPopupMenu pm;

    public TestCustomTreeNode() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                pm = new JPopupMenu();
                pm.add(new JLabel("Suprise"));

                JFrame f = new JFrame("JTree Sample");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel pnlMain = new JPanel(new BorderLayout());
                pnlMain.setBackground(Color.white);

                createTree(pnlMain);

                f.setContentPane(new JScrollPane(pnlMain));

                f.setSize(300, 200);
                f.setVisible(true);
            }
        });
    }

    private void createTree(JPanel pnlMain) {
        Employee bigBoss = new Employee(Employee.randomName(), true);
        Employee[] level1 = new Employee[5];
        bigBoss.employees = level1;

        for (int i = 0; i < level1.length; i++) {
            level1[i] = new Employee(Employee.randomName(), true);
        }

        for (int i = 0; i < level1.length; i++) {
            Employee employee = level1[i];
            if (employee.isBoss) {
                int count = 5;
                employee.employees = new Employee[count];

                for (int j = 0; j < employee.employees.length; j++) {
                    employee.employees[j] = new Employee(Employee.randomName(), false);
                }
            }
        }

        CustomTreeNode root = new CustomTreeNode(loadResource("/pirate.png"), bigBoss);
        root.setUserObject("Root");
        DefaultTreeModel model = new DefaultTreeModel(root);

        for (Employee employee : bigBoss.employees) {
            CustomTreeNode boss = new CustomTreeNode(loadResource("/angel.png"), employee);
            root.add(boss);
            if (employee.isBoss) {
                for (Employee employee1 : employee.employees) {
                    CustomTreeNode emp = new CustomTreeNode(loadResource("/devil.png"), employee1);
                    boss.add(emp);
                }
            }
        }

        JTree tree = new JTree(model);
        tree.setCellRenderer(new CustomeTreeCellRenderer());
        pnlMain.add(tree, BorderLayout.CENTER);

        tree.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent e) {
                if (e.isPopupTrigger()) {
                    pm.show(e.getComponent(), e.getX(), e.getY());
                }
            }
        });

    }

    protected ImageIcon loadResource(String name) {

        ImageIcon image = null;
        try {
            image = new ImageIcon(ImageIO.read(getClass().getResource(name)));
            System.out.println(name + " - " + image);
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        return image;

    }

    public static class Employee {

        public String name;
        public int id;
        public boolean isBoss;
        public Employee[] employees;

        public Employee(String name, boolean isBoss) {
            this.name = name;
            this.isBoss = isBoss;
            this.id = new Random(System.currentTimeMillis()).nextInt(Integer.MAX_VALUE);
        }

        @Override
        public String toString() {
            return this.name;
        }

        static String randomName() {
            String chars = "abcdefghijklmnopqrstuvwxyz";
            StringBuilder builder = new StringBuilder();
            Random r = new Random(System.currentTimeMillis());
            int length = r.nextInt(10) + 1;
            for (int i = 0; i < length; i++) {
                builder.append(chars.charAt(r.nextInt(chars.length())));
            }

            return builder.toString();
        }
    }

    public class CustomTreeNode extends DefaultMutableTreeNode {

        /**
         * The icon which is displayed on the JTree object. open, close, leaf icon.
         */
        private ImageIcon icon;

        public CustomTreeNode(ImageIcon icon) {
            this.icon = icon;
        }

        public CustomTreeNode(ImageIcon icon, Object userObject) {
            super(userObject);
            this.icon = icon;
        }

        public CustomTreeNode(ImageIcon icon, Object userObject, boolean allowsChildren) {
            super(userObject, allowsChildren);
            this.icon = icon;
        }

        public ImageIcon getIcon() {
            return icon;
        }

        public void setIcon(ImageIcon icon) {
            this.icon = icon;
        }
    }

    class CustomeTreeCellRenderer extends DefaultTreeCellRenderer {

        public CustomeTreeCellRenderer() {
        }

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {

//            if (!leaf) {
            CustomTreeNode node = (CustomTreeNode) value;

            if (node.getIcon() != null) {
                System.out.println(node + " - " + node.getIcon());
                setClosedIcon(node.getIcon());
                setOpenIcon(node.getIcon());
                setLeafIcon(node.getIcon());
            } else {
                System.out.println(node + " - default");
                setClosedIcon(getDefaultClosedIcon());
                setLeafIcon(getDefaultLeafIcon());
                setOpenIcon(getDefaultOpenIcon());
            }
//            }

            super.getTreeCellRendererComponent(tree, value, selected, expanded, leaf, row, hasFocus);

            return this;
        }
    }
} 
```

注意：您可能需要更改鼠标事件，因为不同平台的弹出触发器可能不同，这在 Windows 上运行良好

由此，我只能得出结论，您传递给的组件引用`JPopupMenu#show`不是生成鼠标事件的组件引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T04:31:14.010

我用了：

```
PointerInfo a = MouseInfo.getPointerInfo();
Point b = a.getLocation();
SwingUtilities.convertPointFromScreen(b, component); 
```

组件是我的 JTree。这似乎抓住了鼠标屏幕的位置，并使用了隐藏在 Swing 中的转换实用函数来解决问题。希望这可以帮助某人！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-03T00:40:13.337

我逐字逐句地遇到了这个问题`JTree`。虽然我发现接受的答案很有用，但仍然需要一些挖掘才能找出问题所在以及修复的样子。

因此，这是问题代码的样子：

```
final Component parent = ...
final JTree tree = ...
final JPopupMenu menu = ...

parent.add(tree);

tree.addMouseListener(new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent e) {
        if (e.getButton() == MouseEvent.BUTTON3) // Right click
            menu.show(parent, e.getX(), e.getY());
    }
}); 
```

错误现在应该很明显了！

the`MouseEvent`是`tree`从 added生成的`MouseListener`，但我们`parent`作为`invoker`to传递`menu.show(...)`。这会在您的屏幕截图中产生不良行为。

修复方法是传递`tree`如下`invoker`to `menu.show(...)`：

```
final Component parent = ...
final JTree tree = ...
final JPopupMenu menu = ...

parent.add(tree);

tree.addMouseListener(new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent e) {
        if (e.getButton() == MouseEvent.BUTTON3) // Right click
            menu.show(tree, e.getX(), e.getY());
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T04:42:14.310

这可能不是一个好的解决方案，但它会解决您的问题。

这里的问题是当你说`e.getX()`or时`e.getY()`，返回的坐标是相对于 JTree 的。正如我从给定的屏幕截图中看到的那样，您已经向下滚动了 JTree，您需要从“Y”坐标中减去垂直滚动条值的差异。

```
int verticalScrollValue = scrollPane.getVerticalScrollBar().getValue();
jp.show(this, e.getX(), e.getY() - verticalScrollValue); 
```

# sql - SQL - 从多个标志中获取具有唯一标志的 ID 的命令

> ID：15238819
> 
> 赞同：1
> 
> 时间：2013-03-06T04:09:55.763
> 
> 标签：sql, select

```
ID  Risk_1  Risk_2  Risk_3  Risk_4
XYZ Yes             Yes     Yes
ABC Yes
PQR Yes     Yes 
```

从上表中可以看出，有些 ID 具有与其相关的多种风险。我想获得只有一个风险与它们相关的 ID 的输出。

在上述情况下，我想要所有只有 risk_1 的 ID，所以结果应该是 ABC。

如何使用 SQL 完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:12:59.827

假设是`Risks`可以为*空*的。

```
SELECT  ID
FROM    tableName
WHERE   CASE WHEN Risk_1 IS NOT NULL THEN 1 ELSE 0 END +
        CASE WHEN Risk_2 IS NOT NULL THEN 1 ELSE 0 END +
        CASE WHEN Risk_3 IS NOT NULL THEN 1 ELSE 0 END +
        CASE WHEN Risk_4 IS NOT NULL THEN 1 ELSE 0 END  = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/b5c6e/2)

但是，如果它们是空字符串，

```
SELECT  ID
FROM    tableName
WHERE   CASE WHEN Risk_1 <> '' THEN 1 ELSE 0 END +
        CASE WHEN Risk_2 <> '' THEN 1 ELSE 0 END +
        CASE WHEN Risk_3 <> '' THEN 1 ELSE 0 END +
        CASE WHEN Risk_4 <> '' THEN 1 ELSE 0 END  = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/33729/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:16:37.987

这将适用于 NULL、空字符串或 Yes 以外的值（例如 No）

```
SELECT ID
  FROM Table1
  WHERE COALESCE(Risk_1, 'No') = 'Yes'  AND
        COALESCE(Risk_2, 'No') <> 'Yes' AND
        COALESCE(Risk_3, 'No') <> 'Yes' AND
        COALESCE(Risk_4, 'No') <> 'Yes' 
```

**[sqlfiddle](http://sqlfiddle.com/#!3/b5c6e/8)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:26:57.483

如果您更改了架构，使您的表具有列`ID`，并且`risk_type`每种风险类型都有一行，您可以进行如下查询：

```
SELECT ID
FROM Table1
GROUP BY ID
HAVING COUNT(*) = 1 
```

[SQLFiddle](http://sqlfiddle.com/#!3/7ac7a/2)

重新编辑：修改为不再指定他们拥有哪一种风险类型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T11:13:09.270

如果风险值只有`'Yes'`那么下面的查询将起作用

```
select ID from table where risk1||risk2||risk3||risk4='Yes' 
```

如果风险的值只有`'Yes'`并且空风险有`spaces`而不是空值，那么下面的查询将起作用

```
select ID from table where replace(risk1||risk2||risk3||risk4,' ','')='Yes' 
```

# visual-studio - Intellisense QuickInfo 10 秒后消失

> ID：15238823
> 
> 赞同：0
> 
> 时间：2013-03-06T04:10:08.803
> 
> 标签：visual-studio

有谁知道是否有办法让 Intellisense QuickInfo 在 10 秒后不消失？在我输入一个句点以获取成员列表后，我通常喜欢阅读突出显示成员的 QuickInfo。但是，它会在 10 秒后自动消失，我通常无法在短时间内完成阅读内容。

顺便说一句，当我提到“QuickInfo”时，我指的是显示在成员列表右侧的框，其中包含完整的成员签名和描述。请参阅[http://msdn.microsoft.com/en-us/library/hcw1s69b.aspx](http://msdn.microsoft.com/en-us/library/hcw1s69b.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:34:32.290

您的问题可能没有适当的解决方案，因为工具提示是由系统控制的，而不是由 Visual Studio 进程控制的。但是您可以打印屏幕以捕获工具提示，然后将其粘贴到此答案中进行绘制。

[如何增加工具提示在 Visual Studio 中保持可见的时间](https://stackoverflow.com/questions/699622/how-to-increase-the-time-tooltips-remain-visible-in-visual-studio)

# ios - 你能找出用户安装了哪些应用程序吗？

> ID：15238830
> 
> 赞同：0
> 
> 时间：2013-03-06T04:10:55.797
> 
> 标签：ios, objective-c

有什么方法可以确定用户是否安装了特定的应用程序，甚至可以计算他们安装了多少应用程序？

该信息将用于传递给用户的目标信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T04:18:40.033

不在股票电话上。也许越狱了，但我还没有玩过越狱的事情。

您可以尝试通过[URL 方案](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)打开应用程序。以 Twitter 为例，它的 URL 方案之一是`twitter://user?screen_name=somename`

您可以检查是否可以打开该 URL：

```
NSURL *tURL = [NSURL URLWithString:@"twitter://user?screen_name=somename"];
if ( [[UIApplication sharedApplication] canOpenURL:tURL] )
   // if here, you can open twitter app 
```

如果你愿意，你可以从这里推断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:15:40.403

是的，如果您知道有问题的应用程序是该功能的开发人员，并且确实实现了自定义 URL 架构（您还需要知道）。有一个服务试图收集这些信息：[handleopenurl.com](http://handleopenurl.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T04:17:59.260

简短的回答：没有。

长答案：有一些方法可以检测是否存在提供该功能的某些应用程序。例如，Facebook 应用程序（[请参阅此问题](https://stackoverflow.com/questions/3512228/how-to-check-programatically-if-an-app-is-installed)）。但是，无法检测到不支持这种检测的应用程序，也无法获得应用程序的总数（当然，除非它们只有可检测到的应用程序，但这种可能性非常小）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T04:44:22.803

是和否。在 iOS 上，有几种方法可以使用，但它们不会为您提供整个列表，只有一些应用程序。Daniel Amitay 对此有一个很好的框架。你可以在[这里找到它（iHasApp）](https://github.com/danielamitay/iHasApp/)

我用过它，它得到了大多数应用程序，但正如我所说，不是全部。Daniel 在他的[博客文章](http://danielamitay.com/blog/2011/2/16/how-to-detect-installed-ios-apps)中解释了您可以使用哪些技术。

# git - 如何在 git（命令工具）中打开 sublime 文本以编辑窗口下的 html、js.css. 或其他内容

> ID：15238836
> 
> 赞同：0
> 
> 时间：2013-03-06T04:11:48.250
> 
> 标签：git, command-line, window, sublimetext2, edit

其实我的意思是我们是否可以将这两个工具结合起来，

也就是说，我想在git中打开sublimetext，因为我们在git中使用vim来开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:33:22.633

利用`git config --global core.editor`

我假设你想在 Mac 上使用 Sublime Text，所以你的命令类似于：

```
git config --global core.editor "/Applications/Sublime\ Text\2.app/Contents/SharedSupport/bin/subl" 
```

# sql - SQL - 嵌套聚合

> ID：15238837
> 
> 赞同：0
> 
> 时间：2013-03-06T04:12:08.607
> 
> 标签：sql, max, having, average

我有这个：

```
 SELECT BRAND_ID, CAST (ROUND (AVG(PROD_PRICE), 2) AS NUMERIC (9, 2)) AS 'LARGEST AVERAGE'
    FROM LGPRODUCT
    GROUP BY BRAND_ID 
```

它显示了每个品牌的一堆平均价格，就像它应该做的那样。

但是如果我只想显示最大的数字呢？还是最低的？

我一直在尝试以各种不同的方式使用 MAX，并尝试使用 WHERE 和 HAVING。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:25:16.873

由于您提到了`RDBMS`，因此下面的查询将适用于大多数 rdbms。

```
SELECT  BRAND_ID, 
        CAST (ROUND (AVG(PROD_PRICE), 2) AS NUMERIC (9, 2)) AS 'LARGEST AVERAGE'
FROM    LGPRODUCT
GROUP   BY BRAND_ID
HAVING  CAST (ROUND (AVG(PROD_PRICE), 2) AS NUMERIC (9, 2)) =
        (
            SELECT  MAX(xx)
            FROM
            (
                SELECT  CAST (ROUND (AVG(PROD_PRICE), 2) AS NUMERIC (9, 2)) as xx
                FROM    LGPRODUCT
                GROUP   BY BRAND_ID
            ) s
        ) 
```

上面查询的一个优点是它可以处理重复项（*`BRAND_ID`s 具有最大的平均值*）

# java - Java：并发修改异常

> ID：15238841
> 
> 赞同：0
> 
> 时间：2013-03-06T04:12:40.627
> 
> 标签：java, concurrentmodification

我在 for(Entry...) 循环中遇到错误，在调用 dfs() 后，它会显示 concurrentmodificationexception。即使visitedOrder 与foreach 循环无关，我也不知道为什么会发生这种情况。如何解决这个问题？

```
public TreeMap<Integer, Integer> DFS()
{
    TreeMap<Integer, Integer> stack = new TreeMap<Integer, Integer>();
    TreeMap<Integer, Integer> visitedOrder = stack;
    for(int i = 1; i < graph[0].length-1; i++)
    {
        stack.put(i, 0);
    }
    for(Entry<Integer, Integer> vertex : stack.entrySet())
    {
        if(vertex.getValue() == 0)
            dfs(vertex.getKey(), visitedOrder);
    }
    System.out.println(visitedOrder.values());
    return visitedOrder;
}

public void dfs(int vertex, TreeMap<Integer, Integer> visited)
{
    visited.put(vertex, order++);
    int currVertex = vertex;
    for(int i = vertex; i < graph[0].length-1;i++)
    {
        if(graph[vertex][i+1] == 1)
        {
            dfs(++currVertex, visited);
            break;
        }
        currVertex++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:20:12.247

这是“Class ConcurrentModificationException”的 Javadoc：

*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)

> 当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。
> 
> 例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。
> 
> 请注意，此异常并不总是表示对象已被不同的线程同时修改。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。

碰巧，这正是您正在做的事情：修改您在“foreach”循环中使用的结构。

解决方法：

如果你认为你的设计是正确的，那么替换一个简单的 for 循环：`for (int i=0; i < myContainer.size(); i++) ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:16:52.670

> 即使visitedOrder 与foreach 循环无关，我也不知道为什么会发生这种情况。

您正在尝试修改`TreeMap`阅读时的内容。您只是在此行中指向此处的参考。所以它只是具有不同参考名称的相同 TreeMap。

```
 TreeMap<Integer, Integer> stack = new TreeMap<Integer, Integer>();
    TreeMap<Integer, Integer> visitedOrder = stack; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:41:17.937

当*您* `TreeMap`执行`new TreeMap<Integer, Integer>()`. `stack`变量引用这个实例；该`visitedOrder`变量也引用同一个实例。当你调用 时`dfs(int vertex, TreeMap<Integer, Integer> visited)`，`visited`参数也引用同一个`TreeMap`实例。

现在您正在循环中迭代此`TreeMap`实例的条目集`for(Entry<Integer,...`。迭代时，您调用该`dfs(int, TreeMap<Interge, Integer>)`方法，并在此方法中调用实例`put`上的a`TreeMap`并修改实例；因此`ConcurrentModificationException`.

根据您提供的代码，我的理解是您正在尝试通过执行 DFS将`graph`数组转换为 a 。`TreeMap`您正在遍历`TreeMap`引用的 by`stack`并尝试填充`visitedOrder`. 要解决您遇到的异常，只需将`visitedorder`变量指向一个`new TreeMap<Integer, Integer>()`实例。

请注意，我建议的修复旨在修复异常，同时保持代码流和逻辑不变，因为我对您的解决方案只有有限的了解。

# hadoop - TaskTracker 默默地从 JobTracker 池中消失了

> ID：15238843
> 
> 赞同：1
> 
> 时间：2013-03-06T04:12:51.783
> 
> 标签：hadoop, mapreduce

我们的 Hadoop 集群遇到了问题。JobTracker 从其 UI 中默默退订了 10 个节点（大约 70 个）。

虽然这些节点曾经运行作业，但现在它们根本不会被 JobTracker 列出。不在`Nodes`, `Blacklisted Nodes`,`Graylisted Nodes`或下`Excluded Nodes`。

TaskTracker 进程仍在主机上运行。我检查`ssh`了 JobTracker 和消失的节点之间是否存在网络连接和能力。

在日志中，我看到最近我们开始出现很多失败案例，例如：[https](https://issues.apache.org/jira/browse/MAPREDUCE-5) ://issues.apache.org/jira/browse/MAPREDUCE-5 。`Jetty /mapOutput`错误与 TaskTracker 停止之间存在相关性。

有谁知道什么会导致 TaskTracker 静默失败而不是被放入黑名单节点列表中？

我已将 TaskTracker 线程与`jstack`.

似乎 TaskTracker 正在尝试关闭，但正在等待某些东西。

死锁检测：没有发现死锁。

线程 14005：

```
(state = BLOCKED)
 - java.lang.Thread.sleep(long) @bci=0 (Compiled frame; information may be imprecise)
 - org.apache.hadoop.ipc.Client.stop() @bci=105, line=973 (Compiled frame)
 - org.apache.hadoop.ipc.RPC$ClientCache.stopClient(org.apache.hadoop.ipc.Client) @bci=47, line=191 (Interpreted frame)
 - org.apache.hadoop.ipc.RPC$ClientCache.access$500(org.apache.hadoop.ipc.RPC$ClientCache, org.apache.hadoop.ipc.Client) @bci=2, line=140 (Interpreted frame)
 - org.apache.hadoop.ipc.RPC$Invoker.close() @bci=19, line=238 (Interpreted frame)
 - org.apache.hadoop.ipc.RPC$Invoker.access$600(org.apache.hadoop.ipc.RPC$Invoker) @bci=1, line=203 (Interpreted frame)
 - org.apache.hadoop.ipc.RPC.stopProxy(org.apache.hadoop.ipc.VersionedProtocol) @bci=11, line=439 (Interpreted frame)
 - org.apache.hadoop.hdfs.DFSClient.close() @bci=34, line=283 (Interpreted frame)
 - org.apache.hadoop.hdfs.DistributedFileSystem.close() @bci=8, line=328 (Interpreted frame)
 - org.apache.hadoop.fs.FileSystem$Cache.closeAll() @bci=78, line=1446 (Interpreted frame)
 - org.apache.hadoop.fs.FileSystem.closeAll() @bci=40, line=277 (Interpreted frame)
 - org.apache.hadoop.fs.FileSystem$ClientFinalizer.run() @bci=0, line=260 (Interpreted frame) 
```

线程 18731：

```
(state = BLOCKED)
 - sun.misc.Unsafe.park(boolean, long) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.concurrent.locks.LockSupport.park(java.lang.Object) @bci=14, line=156 (Compiled frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await() @bci=42, line=1987 (Compiled frame)
 - java.util.concurrent.LinkedBlockingQueue.take() @bci=29, line=399 (Compiled frame)
 - org.apache.hadoop.mapred.TaskTracker$1.run() @bci=7, line=434 (Compiled frame)
 - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame) 
```

线程 18730：

```
(state = BLOCKED)
 - sun.misc.Unsafe.park(boolean, long) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.concurrent.locks.LockSupport.park(java.lang.Object) @bci=14, line=156 (Compiled frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await() @bci=42, line=1987 (Compiled frame)
 - java.util.concurrent.LinkedBlockingQueue.take() @bci=29, line=399 (Compiled frame)
 - org.apache.hadoop.mapreduce.server.tasktracker.userlogs.UserLogManager.monitor() @bci=4, line=131 (Interpreted frame)
 - org.apache.hadoop.mapreduce.server.tasktracker.userlogs.UserLogManager$1.run() @bci=4, line=66 (Compiled frame) 
```

线程 18729：

```
(state = BLOCKED)
 - java.lang.Thread.sleep(long) @bci=0 (Compiled frame; information may be imprecise)
 - org.apache.hadoop.mapred.UserLogCleaner.run() @bci=4, line=93 (Interpreted frame) 
```

线程 18728：

```
(state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.TimerThread.mainLoop() @bci=201, line=509 (Compiled frame)
 - java.util.TimerThread.run() @bci=1, line=462 (Interpreted frame) 
```

线程 18724：

```
(state = IN_NATIVE)
 - sun.nio.ch.EPollArrayWrapper.epollWait(long, int, long, int) @bci=0 (Compiled frame; information may be imprecise)
 - sun.nio.ch.EPollArrayWrapper.poll(long) @bci=18, line=210 (Compiled frame)
 - sun.nio.ch.EPollSelectorImpl.doSelect(long) @bci=28, line=65 (Compiled frame)
 - sun.nio.ch.SelectorImpl.lockAndDoSelect(long) @bci=37, line=69 (Compiled frame)
 - sun.nio.ch.SelectorImpl.select(long) @bci=30, line=80 (Compiled frame)
 - org.mortbay.io.nio.SelectorManager$SelectSet.doSelect() @bci=615, line=457 (Compiled frame)
 - org.mortbay.io.nio.SelectorManager.doSelect(int) @bci=24, line=190 (Compiled frame)
 - org.mortbay.jetty.nio.SelectChannelConnector.accept(int) @bci=5, line=124 (Compiled frame)
 - org.mortbay.jetty.AbstractConnector$Acceptor.run() @bci=151, line=706 (Compiled frame)
 - org.mortbay.thread.QueuedThreadPool$PoolThread.run() @bci=25, line=520 (Interpreted frame) 
```

线程 18671：

```
(state = IN_NATIVE)
 - sun.nio.ch.EPollArrayWrapper.epollWait(long, int, long, int) @bci=0 (Compiled frame; information may be imprecise)
 - sun.nio.ch.EPollArrayWrapper.poll(long) @bci=18, line=210 (Compiled frame)
 - sun.nio.ch.EPollSelectorImpl.doSelect(long) @bci=28, line=65 (Compiled frame)
 - sun.nio.ch.SelectorImpl.lockAndDoSelect(long) @bci=37, line=69 (Compiled frame)
 - sun.nio.ch.SelectorImpl.select(long) @bci=30, line=80 (Compiled frame)
 - sun.nio.ch.SelectorImpl.select() @bci=2, line=84 (Compiled frame)
 - org.apache.hadoop.ipc.Server$Listener$Reader.run() @bci=33, line=333 (Compiled frame)
 - java.util.concurrent.ThreadPoolExecutor$Worker.runTask(java.lang.Runnable) @bci=59, line=886 (Interpreted frame)
 - java.util.concurrent.ThreadPoolExecutor$Worker.run() @bci=28, line=908 (Interpreted frame)
 - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame) 
```

线程 18667：

```
(state = BLOCKED)
 - sun.misc.Unsafe.park(boolean, long) @bci=0 (Compiled frame; information may be imprecise)
 - java.util.concurrent.locks.LockSupport.park(java.lang.Object) @bci=14, line=156 (Compiled frame)
 - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await() @bci=42, line=1987 (Compiled frame)
 - java.util.concurrent.LinkedBlockingQueue.take() @bci=29, line=399 (Compiled frame)
 - org.apache.hadoop.mapred.CleanupQueue$PathCleanupThread.run() @bci=47, line=130 (Compiled frame) 
```

线程 18661：

```
(state = BLOCKED) 
```

线程 18660：

```
(state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.ref.ReferenceQueue.remove(long) @bci=44, line=118 (Compiled frame)
 - java.lang.ref.ReferenceQueue.remove() @bci=2, line=134 (Compiled frame)
 - java.lang.ref.Finalizer$FinalizerThread.run() @bci=3, line=159 (Compiled frame) 
```

线程 18659：

```
(state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.Object.wait() @bci=2, line=485 (Compiled frame)
 - java.lang.ref.Reference$ReferenceHandler.run() @bci=46, line=116 (Compiled frame) 
```

线程 18644：

```
(state = BLOCKED)
 - java.lang.Object.wait(long) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.Thread.join(long) @bci=38, line=1186 (Compiled frame)
 - java.lang.Thread.join() @bci=2, line=1239 (Interpreted frame)
 - java.lang.ApplicationShutdownHooks.runHooks() @bci=87, line=79 (Interpreted frame)
 - java.lang.ApplicationShutdownHooks$1.run() @bci=0, line=24 (Interpreted frame)
 - java.lang.Shutdown.runHooks() @bci=23, line=79 (Interpreted frame)
 - java.lang.Shutdown.sequence() @bci=26, line=123 (Interpreted frame)
 - java.lang.Shutdown.exit(int) @bci=96, line=168 (Interpreted frame)
 - java.lang.Runtime.exit(int) @bci=14, line=90 (Interpreted frame)
 - java.lang.System.exit(int) @bci=4, line=904 (Interpreted frame)
 - org.apache.hadoop.mapred.TaskTracker.main(java.lang.String[]) @bci=114, line=3722 (Interpreted frame) 
```

# c++ - 正则表达式不以零开头

> ID：15238844
> 
> 赞同：0
> 
> 时间：2013-03-06T04:12:52.733
> 
> 标签：c++, regex, boost

我正在为我的 Windows 应用程序使用 boost 正则表达式。这是我的正则表达式`folder-\\d{1,3}`，它接受带有`folder-`前缀和任何**三位数字**的字符串，例如：`folder-01`, `folder-001`, `folder-121`.

但现在我想避免数字从零开始。例如：`folder-01`，`folder-011`并且只允许数字从任何其他数字开始，例如：`folder-1`, `folder-12`, `folder-122`.

那么我应该如何写改变这个正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:15:01.843

试试这个

```
folder-[1-9][0-9]{,2} 
```

在这里，我们基本上是匹配`folder-`后跟一个**1**到**9**之间的数字，后跟**最多**2 个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T04:15:40.353

您可以使用[字符类](http://www.regular-expressions.info/charclass.html)来完成此操作，如下所示：

```
 folder-[1-9][0-9]{0,2} 
```

# android - 动画脉动点

> ID：15238846
> 
> 赞同：2
> 
> 时间：2013-03-06T04:13:06.433
> 
> 标签：android, android-animation

我想添加一个具有振荡类型动画的动画点（如果这有什么不同，这实际上将绘制在图像之上）。

这是我的意思的一个示例：

![在此处输入图像描述](../Images/0177ad633cb246fd6ee556bf8eb9b74d.png)

这可以通过两个图像和它们之间的动画以某种方式完成吗？我不太清楚，所以一些示例代码会很好。（或教程链接）。

提前欢呼和感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T07:55:01.030

我不确定您的确切要求，但对我来说，您似乎需要像在圆圈上方扩展“环”一样。我尝试使用自定义 ViewGroup 来实现它，以便将所有功能封装在某个“容器”中。步骤如下：

1）添加值/attrs.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<resources>
    <declare-styleable name="OscillatorAnimatedView">
        <attr name="centerImage" format="reference" />
        <attr name="oscillatorImage" format="reference" />
        <attr name="oscillatorInterval" format="integer" />
        <attr name="oscillatorMaxExtend" format="float" />
    </declare-styleable>
</resources> 
```

2）将视图添加到您的布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:custom="http://schemas.android.com/apk/res/com.alexstarc.tests"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
    <com.alexstarc.tests.views.OscillatorAnimatedView
            android:id="@+id/oscillator"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            custom:centerImage="@drawable/center"
            custom:oscillatorImage="@drawable/circle" />
</RelativeLayout> 
```

3）将中心和圆的图像添加到您的drawables（以下只是来自互联网的随机示例，注意它应该是透明的png）：
![可绘制/居中](../Images/5b6670f2cdf8c373a52dd3ca17dcc324.png)drawable/center ![可绘制/圆形](../Images/1ef7ad6ace791abc84f4aa7a6bc135ca.png)drawable/circle

4）创建您的视图（在我的情况下是`com.alexstarc.tests.views.OscillatorAnimatedView`）：

```
 package com.ruinalst.performance.tests.views;

    import android.animation.AnimatorSet;
    import android.animation.ObjectAnimator;
    import android.content.Context;
    import android.content.res.TypedArray;
    import android.graphics.drawable.Drawable;
    import android.util.AttributeSet;
    import android.view.ViewGroup;
    import android.view.animation.BounceInterpolator;
    import android.widget.ImageView;
    import android.widget.RelativeLayout;
    import com.ruinalst.performance.tests.R;

    /**
     * Specific view to provide 'oscilllator' kind of animation using two input views
     */
    public final class OscillatorAnimatedView extends RelativeLayout {

        /* Internal constants, mostly for default values */
        /** default oscillator interval */
        private static final int DEFAULT_INTERVAL = 700;
        /** default oscillator extend */
        private  static final float DEFAULT_EXTEND = 1.5f;

        /** Image to be displayed at the center */
        private ImageView mCenterImage = null;
        /** Image to oscillate */
        private ImageView mOscillatorImage = null;
        /** Oscillator animation */
        private AnimatorSet mAnimatorSet = null;

        public OscillatorAnimatedView(final Context context, final AttributeSet attrs) {
            super(context, attrs);
            initAndCompose(attrs);
        }

        public OscillatorAnimatedView(final Context context, final AttributeSet attrs, final int defStyle) {
            super(context, attrs, defStyle);
            initAndCompose(attrs);
        }

        /**
         * Internal init function to init all additional data
         * and compose child for this ViewGroup
         *
         * @param attrs {@link AttributeSet} with data from xml attributes
         */
        private void initAndCompose(final AttributeSet attrs) {

            if (null == attrs) {
                throw new IllegalArgumentException("Attributes should be provided to this view," +
                        " at least centerImage and oscillatorImage should be specified");
            }

            final TypedArray a = getContext().obtainStyledAttributes(attrs,
                    R.styleable.OscillatorAnimatedView, 0, 0);
            final Drawable centerDrawable = a.getDrawable(R.styleable.OscillatorAnimatedView_centerImage);
            final Drawable oscillatorDrawable = a.getDrawable(R.styleable.OscillatorAnimatedView_oscillatorImage);

            if (null == centerDrawable || null == oscillatorDrawable) {
                throw new IllegalArgumentException("Attributes should be provided to this view," +
                        " at least centerImage and oscillatorImage should be specified");
            }

            final int oscillatorInterval = a.getInt(R.styleable.OscillatorAnimatedView_oscillatorInterval, DEFAULT_INTERVAL);
            final float maxOscillatorExtend = a.getFloat(R.styleable.OscillatorAnimatedView_oscillatorMaxExtend, DEFAULT_EXTEND);

            a.recycle();

            // Create child and add them into this view group
            mCenterImage = new ImageView(getContext());
            mCenterImage.setImageDrawable(centerDrawable);
            addInternalChild(mCenterImage);

            mOscillatorImage = new ImageView(getContext());
            mOscillatorImage.setImageDrawable(oscillatorDrawable);
            addInternalChild(mOscillatorImage);

            // Init animation
            mAnimatorSet = new AnimatorSet();

            mAnimatorSet.setDuration(oscillatorInterval);

            final ObjectAnimator scaleXAnimator = ObjectAnimator.ofFloat(mOscillatorImage, "ScaleX", 1.0f, maxOscillatorExtend);

            scaleXAnimator.setRepeatCount(ObjectAnimator.INFINITE);
            scaleXAnimator.setRepeatMode(ObjectAnimator.INFINITE);

            final ObjectAnimator scaleYAnimator = ObjectAnimator.ofFloat(mOscillatorImage, "ScaleY", 1.0f, maxOscillatorExtend);

            scaleYAnimator.setRepeatCount(ObjectAnimator.INFINITE);
            scaleYAnimator.setRepeatMode(ObjectAnimator.INFINITE);

            mAnimatorSet.playTogether(scaleXAnimator, scaleYAnimator);
            mAnimatorSet.setInterpolator(new BounceInterpolator());
        }

        /**
         * Internal helper to add child view to this ViewGroup.
         * Used currently only for two internal ImageViews
         *
         * @param child {@link ImageView} to be added
         */
        private void addInternalChild(final ImageView child) {
            final LayoutParams params = new LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT);

            params.addRule(CENTER_IN_PARENT, 1);
            addView(child, params);
        }

        /**
         * Starts animation for this view
         */
        public void start() {
            mAnimatorSet.start();
        }

        /**
         * Stops animation for this view
         */
        public void stop() {
            mAnimatorSet.end();
        }
    } 
```

5）在你的活动中做某事：

```
 @Override
        protected void onResume() {
            super.onResume();

            mOscillatorView.start();
        }

        @Override
        protected void onPause() {
            super.onPause();

            mOscillatorView.stop();
        } 
```

请注意，它不是发布版本，很可能可以通过多种方式进行改进。

您还可以使用[插值器](http://developer.android.com/reference/android/animation/TimeInterpolator.html)或创建自己的插值器以获得预期的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:21:05.913

您在寻找可[绘制动画](http://developer.android.com/guide/topics/graphics/drawable-animation.html)吗？似乎这会做你正在寻找的东西。您可以使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)将其放置在其他视图之上。

此外，如果您需要更复杂的动画，您可以使用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)并将画布绘制到您的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T16:03:38.230

覆盖 onDraw 方法并为您的按钮绘制第一个圆圈，同时，创建一个布尔变量来控制您的按钮何时会脉冲，何时不会。最后以 alpha 作为背景绘制第二个圆圈。产生脉动效果：

```
 @Override
protected void onDraw(Canvas canvas) {

    int w = getMeasuredWidth();
    int h = getMeasuredHeight();
    //Draw circle
    canvas.drawCircle(w/2, h/2, MIN_RADIUS_VALUE , mCirclePaint);        
    if (mAnimationOn) {
        if (mRadius >= MAX_RADIUS_VALUE)
            mPaintGoBack = true;
        else if(mRadius <= MIN_RADIUS_VALUE)
            mPaintGoBack = false;
        //Draw pulsating shadow
        canvas.drawCircle(w / 2, h / 2, mRadius, mBackgroundPaint);
        mRadius = mPaintGoBack ? (mRadius - 0.5f) : (mRadius + 0.5f);
        invalidate();
    }

    super.onDraw(canvas);
}
 public void animateButton(boolean animate){
    if (!animate)
        mRadius = MIN_RADIUS_VALUE;
    mAnimationOn = animate;
    invalidate();
} 
```

# javascript - 如何将 onmouseover 应用于整个框架？

> ID：15238847
> 
> 赞同：0
> 
> 时间：2013-03-06T04:13:19.767
> 
> 标签：javascript, html, onmouseover

我有一个框架，每当（惊喜，惊喜）有人将鼠标悬停在框架上时，我想运行相当于 onmouseover 事件的框架。我知道我不能将 onmouseover 与框架或框架集标签一起使用。我能做什么会产生与 相同的效果`<frame onmouseover=""...`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:36:30.460

`<frame>`s在现代版本的 html中已被[弃用。](https://stackoverflow.com/questions/4263509/why-are-frames-deprecated-in-html)您可以执行以下操作：

```
<div onmouseover="javascript:alert('Hello!');" >
<iframe ...></iframe>
</div> 
```

# javascript - 基于 setTimeout 停止动画

> ID：15238848
> 
> 赞同：0
> 
> 时间：2013-03-06T04:13:23.663
> 
> 标签：javascript, jquery

我有一个 javascript 函数，用于动画填写表单。基本上就像一个教程，向客户展示什么以及如何输入他们的信息。我想知道是否有人对我可以用来暂停我的动画有什么想法。例如，有一个按钮，单击时会暂停动画，再次单击时会继续动画。

我的动画基本上是几个 setTimeout 在彼此内部。

例子

```
setTimeout(function(){

$('#box1').val("1");

setTimeout(function(){

$('#box2').val("2");

setTimeout()....... and so on

},2000);

},200); 
```

任何想法将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:18:32.613

用这个：

```
myVar=setInterval(yourfunc(),2000); 
```

暂停使用：

```
cleartInterval(myVar); 
```

你可以在这里查看我的功能：http: [//jsfiddle.net/YSfpm/](http://jsfiddle.net/YSfpm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:26:49.997

我不确定，但也许你可以使用

```
$("#box1").stop(true).hide('fast'); 
```

**或者**

```
setTimeout(function(){ $("#box1").hide(); }, 3000); 
```

# html - 导航栏中的 CSS 图像推送文本

> ID：15238850
> 
> 赞同：4
> 
> 时间：2013-03-06T04:13:31.140
> 
> 标签：html, css

我正在尝试将图像与导航栏上的 CSS 对齐。即使我调整图像大小，它仍然会将文本向下推。

我的 div html 代码是：

```
<div id="menu">
    <ul>
        <li><a href="#"><img src='images/tphome.png' border='0' width='24' height='24'> Home</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</div> 
```

[http://jsfiddle.net/nuSLH/](http://jsfiddle.net/nuSLH/)

有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:18:41.890

向图像添加一些 css 可以强制文本与图像顶部对齐：

```
#menu img { vertical-align: top;} 
```

或中间：

```
#menu img {vertical-align: middle;} 
```

另一种选择是在`a`标签上使用背景图像并结合一点填充：

```
#menu a {
    background: url('http://i.imgur.com/1CRy2G5.png') no-repeat left center; 
    padding-left: 30px; padding-top: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:23:09.763

我建议使用 css 类和 :before 而不是放入图像，因为它是演示文稿并且对内容并不重要。

将其更改为添加位置：相对...

```
#menu li {
    float: left;
    position: relative;
} 
```

然后像这样的东西......可能需要在 li 中添加一些填充。

```
.icon-home:before {
    position: absolute;
    top: 0px;
    left: 0px;
    content: "";
    background: url(http://i.imgur.com/1CRy2G5.png);
    width: 24px;
    height: 24px;
} 
```

要添加课程...

```
 <li><a class="icon-home" href="#">Home</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:33:55.420

在下面更改您的html

```
<div id="menu">
            <ul>
                <li><a class="home" href="#">Home</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </div> 
```

并将其添加到您的CSS中

```
#menu a.home {
    padding: 4px 20px 9px 30px;
    background-image: url(http://i.imgur.com/1CRy2G5.png);
     background-repeat:no-repeat;
} 
```

[**演示**](http://jsfiddle.net/jhunlio/nuSLH/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T04:34:56.673

由于未找到请求的 img，img 标签的大小变大了。**我的建议是，如果未找到请求的 img**，如何删除该 img

 **您可以使用`onerror="this.remove()"`

这是小提琴[http://jsfiddle.net/nuSLH/14/](http://jsfiddle.net/nuSLH/14/)**

# c++ - 如何在命令后保持我的 shell 运行

> ID：15238853
> 
> 赞同：1
> 
> 时间：2013-03-06T04:13:56.500
> 
> 标签：c++

我在另一个 shell 中运行这个基本的 shell 程序。我无法弄清楚为什么我的 shell 在“ls”执行后没有继续运行。我没有出口，但它会回到原来的外壳。如果想使用它，我每次都必须运行我的 shell 程序。我认为这就是 fork() 应该做的。我只希望我的 shell 使用我用 if else 语句编写的 exit 命令退出。任何建议将不胜感激。哦，忽略 gettoks() 解析器函数，我不知道如何将它用于输入，所以我为字符串输入 cmSTR 编写了 if else 语句，而不是使用 gettoks() 解析器。主要是因为我不知道如何将输入传递给它

```
#include <iostream>
#include <unistd.h>
#include <sys/types.h>
#include <errno.h>
#include <signal.h>
#include <cstdlib>
#include <sys/wait.h>

using namespace std;
// Initializing counters for trapping
static int cc_counter = 0;
static int cz_counter = 0;
static int cq_counter = 0;
//Functions for trap signal handler
void cc_handler( int signo )
{
++cc_counter;
}
void cz_handler( int signo )
{
++cz_counter;
}
void cq_handler( int signo )
{
++cq_counter;
}

//*********************************************************
//
// Extern Declarations
//
//*********************************************************
using namespace std;
extern "C"
{
extern char **gettoks();
} 

//*********************************************************
//
// Main Function
//
//*********************************************************
int main( int argc, char *argv[] )
{
// local variables
int ii;
char **toks;
int retval;

// initialize local variables
ii = 0;
toks = NULL;
retval = 0;
char buf[1000];//Initialize of size for current working directory
string cmSTR;//String to hold input
int status;//Initialization of status for fork()
pid_t pid;//Declaration of pid

// main (infinite) loop
while( true )
{
    signal( SIGINT, cc_handler );// Traps Ctrl+C
    signal( SIGTSTP, cz_handler);// Traps Ctrl+Z
    signal( SIGQUIT, cq_handler);// Traps Ctrl+\
  //prompt and show current working directory
  cout <<("RS_SHELL:") << getcwd(buf,1000) << "\t";
  getline(cin ,cmSTR);//read input from keyboard
  // if else loop to switch based on command input
  if(cmSTR == "ls")// if ls, then execute arguement
  {
    execl( "/bin/ls", "ls", NULL );//System call to execute ls

    }
    else if(cmSTR == "exit")//if exit, then execute block of code
    {
        cout << "Ctrl C entered: " << ++cc_counter << "times"<< endl;
        cout << "Ctrl Z entered: " << ++cz_counter << "times"<< endl;
        cout << "Ctrl Back Slash entered: " << ++cq_counter << "times"<< endl;
        exit(1);
        }
    else if(cmSTR == "guish")// if guish, execute guish shell
    {
        execvp("guish", NULL);
        }
        //if input is not any of previous commands then fork()
    else if(cmSTR != "ls" && cmSTR != "exit" && cmSTR != "guish" && cmSTR != "\n")
    {
        pid = fork();
        if (pid < 0)//Loop to fork parent and child process
        {
            fprintf(stderr, "Fork Failed");
            exit(-1);
            }
            else if (pid == 0)//Child process
        {
            execvp("guish", NULL);//system call to execute guish shell

            }
            else //Parent process
            {
                waitpid( -1, &status,0);
                exit(0);
                }
                }

  // get arguments
  toks = gettoks();

  if( toks[0] != NULL )
{
  // simple loop to echo all arguments
  for( ii=0; toks[ii] != NULL; ii++ )
    {
      cout << "Argument " << ii << ": " << toks[ii] << endl;
    }

  if( !strcmp( toks[0], "exit" ))
    break;
 }
    }

   // return to calling environment
   return( retval );
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:45:37.513

正如您所怀疑的那样，`execl`其相关功能将当前进程与新进程重叠。因此，在`execl`调用 start之后`ls`，您的程序将不再存在以继续运行。

如果您希望您的 shell 程序在运行后保留`ls`，您需要在调用`fork()` *之前*`execl( "/bin/ls", "ls", NULL );`保留。

此外，如果您希望输出与`ls`您的 shell 出现在同一个控制台中，正如我认为您可能想要的那样，您需要将输出从`ls`回传回 shell，然后将该输出写入 shell 的控制台。请参阅[编写我自己的外壳……卡在管道上？](https://stackoverflow.com/questions/1461331/writing-my-own-shell-stuck-on-pipes?rq=1)， 例如。

# sed - GREP SED 如何将模式跨度搜索为两行？

> ID：15238855
> 
> 赞同：0
> 
> 时间：2013-03-06T04:14:01.797
> 
> 标签：sed, awk, grep, find

**解决方案**

初始解决方案

寻找 。-type f -exec sed -i ':a;N;$!ba;s/\n //g' {} + | grep -l "672.15687489"

**初始帖子：**

我想知道如何在文件中搜索模式。但是该模式跨越两行，我不知道该模式分为哪一部分。

例子：

```
The pattern:  _"672.15687489"_ 
```

但是，在文件中可能是以下几个选项之一：

```
672.15\n687489

672.156\n87489

672.1568\n7489

672.15687\n489 
```

...

我不在乎模式是如何拆分的，我唯一想要的是具有该模式的文件的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:41:02.560

谢谢你的搞笑 sed | grep“解决方案”：

```
sed -i ':a;N;$!ba;s/\n //g' {} + | grep -l "672.15687489" 
```

但实际上，只需使用 awk。这是一个 GNU awk 解决方案，它不会更改您的原始文件，不需要多个命令和管道，并且不需要 James Bond 解码器环来理解字母和标点符号的神秘组合：

```
$ cat file
foo
672.15
687489
bar
$ gawk -v RS='\0' '{gsub(/\n/,"")} /672.15687489/{print FILENAME; exit}' file
file 
```

您只需要知道将 RS 设置为 Null 字符会告诉 gawk 将整个文件作为单个记录读取。其他 awk 可能支持也可能不支持，但 GNU awk 支持。还有其他 awk 解决方案，所有这些都比发布的 sed+grep 解决方案更清晰。

# bash - 使用 bash 简单工具计时 http 服务器响应

> ID：15238858
> 
> 赞同：0
> 
> 时间：2013-03-06T04:14:22.773
> 
> 标签：bash, http, web

是不是写在标题上

我需要它来测量服务器加载时间，如果这个值高于阈值，我会自动重新启动 Web 服务器。

如何使用简单的 GNU bash 计时 http 服务器响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:13:26.740

您可以编写脚本并执行 ab 或 apache 基准测试的输出。还要确保您已启用 %D 作为日志格式。因此，您可以编写脚本来跟踪日志文件，而不是编写测试脚本，如果时间超过阈值重新启动。

这是一个脚本：

```
 #!/bin/bash

    # alert threshold  - amount of times to go over limit before capturing it as an issue;
    ALERT_THRESHOLD=3

    # alert time in seconds
    # so this is the time it takes to load the page anything exceeding set seconds
    ALERT_LIMIT=60;
    ALERT_LIMIT_MILI=$(echo $ALERT_LIMIT|awk '{$3=$1*1000; print $3}')

    TAIL_LIMIT=10;
    LOG_FILE="/var/log/apache2/access.log"

      RESULT=$(tail -n $TAIL_LIMIT $LOG_FILE|awk -v alimit=$ALERT_LIMIT_MILI -v athreshold=$ALERT_THRESHOLD 'BEGIN{QUERY=""; i=0; SENDALERT=0} {
    if  ($1 > alimit) { 
            i++; QUERY=QUERY" TIME_TAKEN:"($1/1000)"seconds,"$1"ms|DATE:"$5"|STATUS:"$10"|URL:"$12"\n"; 
            if (i >= athreshold){ 
                    SENDALERT++; 
            }; 
    } 
} END { print "QUERY:"QUERY"\nSENDALERT:"SENDALERT; }')

    SENDALERT=$(echo -e $RESULT|awk -F"SENDALERT:" '{print $2}')
    echo  $SENDALERT

    if [[ $SENDALERT >=1 ]]; then
        echo "restaring apache"
        content=$(echo -e $RESULT|awk -F"QUERY:" '{print $2}')
        (for lines in $(echo $content); do echo $lines; done;)
        #(for lines in $(echo $content); do echo $lines; done;)| mail -s "REstarting apache $(date) "  root@localhost
    fi 
```

在我的测试中，警报时间（以秒为单位）设置为 0，您将看到警报级别 8，有 10 行具有这些时间值，因此一旦变量 i 达到 3 的限制，它就会开始调整 sendalert 变量，这就是为什么它报告为 8，因为前两个已作为阈值的一部分通过。

运行它：

```
./script.sh 
ALERT LEVEL:  8
restaring apache
TIME_TAKEN:0.108seconds,108ms|DATE:[07/Mar/2013:22:12:51|STATUS:304|URL:"http://localhost/"
TIME_TAKEN:0.299seconds,299ms|DATE:[07/Mar/2013:22:12:51|STATUS:304|URL:"http://localhost/"
TIME_TAKEN:3.432seconds,3432ms|DATE:[07/Mar/2013:22:12:58|STATUS:200|URL:"-"
TIME_TAKEN:0.217seconds,217ms|DATE:[07/Mar/2013:22:12:58|STATUS:304|URL:"http://localhost/"
TIME_TAKEN:0.117seconds,117ms|DATE:[07/Mar/2013:22:12:58|STATUS:304|URL:"http://localhost/"
TIME_TAKEN:0.101seconds,101ms|DATE:[07/Mar/2013:22:12:58|STATUS:304|URL:"http://localhost/"
TIME_TAKEN:3.255seconds,3255ms|DATE:[07/Mar/2013:22:13:03|STATUS:200|URL:"-"
TIME_TAKEN:0.351seconds,351ms|DATE:[07/Mar/2013:22:13:03|STATUS:304|URL:"http://localhost/"
TIME_TAKEN:0.242seconds,242ms|DATE:[07/Mar/2013:22:13:03|STATUS:304|URL:"http://localhost/"
TIME_TAKEN:0.112seconds,112ms|DATE:[07/Mar/2013:22:13:03|STATUS:304|URL:"http://localhost/"
SENDALERT:8 
```

---- apache访问日志：

```
108 127.0.0.1 -  - [07/Mar/2013:22:12:51 +0000] "GET /icons/folder.gif HTTP/1.1" 304 186 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
299 127.0.0.1 -  - [07/Mar/2013:22:12:51 +0000] "GET /icons/compressed.gif HTTP/1.1" 304 188 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
3432 127.0.0.1 -  - [07/Mar/2013:22:12:58 +0000] "GET / HTTP/1.1" 200 783 "-" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
217 127.0.0.1 -  - [07/Mar/2013:22:12:58 +0000] "GET /icons/blank.gif HTTP/1.1" 304 186 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
117 127.0.0.1 -  - [07/Mar/2013:22:12:58 +0000] "GET /icons/folder.gif HTTP/1.1" 304 186 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
101 127.0.0.1 -  - [07/Mar/2013:22:12:58 +0000] "GET /icons/compressed.gif HTTP/1.1" 304 187 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
3255 127.0.0.1 -  - [07/Mar/2013:22:13:03 +0000] "GET / HTTP/1.1" 200 782 "-" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
351 127.0.0.1 -  - [07/Mar/2013:22:13:03 +0000] "GET /icons/folder.gif HTTP/1.1" 304 187 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
242 127.0.0.1 -  - [07/Mar/2013:22:13:03 +0000] "GET /icons/compressed.gif HTTP/1.1" 304 188 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0"
112 127.0.0.1 -  - [07/Mar/2013:22:13:03 +0000] "GET /icons/blank.gif HTTP/1.1" 304 186 "http://localhost/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0" 
```

我将 %D 作为第一列输出并在脚本中的 awk 语句中将 $1 的值与限制进行比较。其余的 $10 等是根据我的日志中出现的位置。

然后，您可以将其放在某个脚本文件夹中，删除冗长或将输出抽到 dev null 并作为 cron 的一部分每 10 分钟运行一次或其他什么

请享用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:14:22.773

这是解决问题的单线

```
(time wget -p --no-cache --delete-after www.example.com -q) 2>&1 >/dev/null | grep real | awk -F"[m\t]" '{ printf "%s\n", $2*60+$3 }' 
```

它使用点分隔符返回页面加载的加载时间（以秒为单位）和几分之一秒

*   时间(5)
*   wget
*   awk

# c++ - CPP套接字编程

> ID：15238861
> 
> 赞同：-7
> 
> 时间：2013-03-06T04:14:38.020
> 
> 标签：c++, sockets

我是新手`C++`。我想学习套接字编程。首先就像与客户端/服务器的简单聊天。我不知道从哪里开始以及如何开始。
有没有适合初学者的好的指南和示例程序。我在网上搜索了很多东西，很难理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:17:37.083

[Boost Asio](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html)并不难学。花时间阅读它的[教程](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial.html)和[示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T04:41:19.490

我发现[http://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)非常容易理解并更快地进入编程模式

# c++ - OpenCv 凸缺陷

> ID：15238862
> 
> 赞同：2
> 
> 时间：2013-03-06T04:14:39.283
> 
> 标签：c++, opencv

我正在研究我在网上找到的一些示例，以使用 opencv c++ 2.4.4 创建凸包。我正在研究使用凸性缺陷，但遇到了这些类的 c++ 实现问题

我已经按照下面的链接进行操作，因为它与我的问题最相似，但仍然没有运气。 [在 C++ 中使用 OpenCV 2.4 计算凸度缺陷](https://stackoverflow.com/questions/10620981/calculating-convexitydefects-using-opencv-2-4-in-c)

我收到以下错误。

```
openCV Error: Assertion failed (mtype == type0 || (CV_MAT_CN(mtype) == 1 && ((1 << type0) & fixedDepthMask) != 0)) in create 
```

另外，我在下面粘贴了当前代码。

感谢您的任何帮助，

```
int c = 0;
VideoCapture cap(0);

Mat frame;
Mat edges;
Mat threshold_output;
cv::vector<cv::Vec4i> hierarchy;
std::vector<std::vector<cv::Point> > contours;
RNG rng(12345);

while( c != 27)
{
    cap >> frame;
    cvtColor(frame, edges, CV_BGR2GRAY);

    threshold(edges, threshold_output, 100, 255, CV_THRESH_OTSU );
    findContours( threshold_output, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, cv::Point(0, 0));

    std::vector<Vec4i> defects;
    vector<cv::vector<int> >hull( contours.size() );

    for (int i = 0; i < contours.size(); i++)
    {
        convexHull(contours[i], hull[i], false );
        if (contours[i].size() >3 )
        {
            convexityDefects(contours[i], hull[i], defects[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:56:39.340

```
std::vector<Vec4i> defects; 
```

应该

```
std::vector< std::vector<Vec4i> > defects( contours.size() ); 
```

（每个轮廓/船体一个）

# iphone - 使用启动图像作为 ViewController 背景图像

> ID：15238867
> 
> 赞同：1
> 
> 时间：2013-03-06T04:15:30.550
> 
> 标签：iphone, ios, ios6

我以适当的分辨率创建了 3 个启动图像（默认 Default@2x Default-568@2x）。我想将这些图像用作我的初始视图控制器的背景图像。

然而，当我设计我的启动图像时，我会考虑状态栏并将该区域留空。当我尝试使用以下代码将 View Controller 的背景图像设置为启动图像时，我的启动图像从状态栏的底部开始，并且空白区域可见。本质上，我的 640x1136 启动图像被压缩到 640x1096 空间中。做我正在尝试的正确方法是什么？

```
 UIImage *backgroundImage = [[UIImage alloc]init];
if ([[UIScreen mainScreen] bounds].size.height == 568) {
    backgroundImage = [UIImage imageNamed:@"Default-568h@2x"];
}
else{
    backgroundImage = [UIImage imageNamed:@"Default"];
}

UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:backgroundImage];
[backgroundImageView setFrame:[[self view] bounds]];
[[self view] addSubview:backgroundImageView]; 
```

更新：

我更换了：

```
[backgroundImageView setFrame:[[self view] bounds]]; 
```

和：

```
[backgroundImageView setFrame:CGRectMake(0 ,-20,self.view.frame.size.width , self.view.frame.size.height+20)]; 
```

它现在似乎表现得像我想要的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:22:32.980

尝试这个：

```
[self.view setBackgroundColor:[UIColor colorWithPatternImage:backgroundImage]]; 
```

也尝试不以编程方式设置 backgroundImageView 的框架。它应该已经是您调用`initWithImage:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:23:04.897

使用不包含空白区域的未经编辑的图像。这将正常工作。

检查用 `[backgroundImageView setFrame:[[self view] bounds]];`以下代码替换它。

```
 int statusBarHeight = statusBar.frame.size.height;

  backgroundImageView.frame = CGRectMake(0 ,statusBarHeight,self.view.frame.size.width , self.view.frame.size.height-statusBarHeight); 
```

# java - 如何通过java将图像放置在布局中？安卓

> ID：15238873
> 
> 赞同：0
> 
> 时间：2013-03-06T04:15:45.503
> 
> 标签：java, android, android-image

我在 drawable-mdpi 文件夹中有一个名为 c1.png 的图像。我想用 Java 把它放到布局中：

```
package ...;

import android.os.Bundle;
//import android.provider.MediaStore.Images;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.view.Menu;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class MainActivity extends Activity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout layout = (LinearLayout)findViewById(getCurrentFocus().getId() );

        ImageView img = new ImageView(this);
        ViewGroup.LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        img.setLayoutParams(lp);
        img.setImageDrawable(getResources().getDrawable(R.drawable.c1));
        layout.addView(img);
        setContentView(layout);//Doesn't matter, if it's commented or not. The error still exists.
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

启动时我得到：“不幸的是，%application_name 已停止”。我看到很多例子，在 id 参数中使用 R.id.*，但它也停止了（比如 R.id.linearLayout1），或者 R 没有这样的常量（比如 R.id.c1）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:25:20.327

你不需要做 setContentView(layout); 另外，更换：

```
findViewById(getCurrentFocus().getId() ) 
```

经过

```
findViewById(R.id.layoutId); //layoutId is the id of the linearLayout defined in your layout.xml file. And R would refer to your local resources folder path and not the android Resources path. 
```

您的 xml 文件可能看起来像这样（这将是 main.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    <LinearLayout
        android:id="@+id/layoutId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:27:54.487

```
import android.app.Activity;
import android.view.Menu;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class MainActivity extends Activity 
{

@Override
protected void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LinearLayout layout = (LinearLayout)findViewById(R.id.layoutID ); // //layoutID is id of the linearLayout that defined in your main.xml file

    ImageView img = new ImageView(this);
    ViewGroup.LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    img.setLayoutParams(lp);
    img.setBackgroundResource(R.drawable.c1);
    layout.addView(img);

}
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:46:57.927

**使用代码：**

```
 ImageView img = new ImageView(this);
 img.setImageResource(R.drawable.c1); 
```

# matlab - 如何实施面部动作编码系统（FACS）？

> ID：15238877
> 
> 赞同：2
> 
> 时间：2013-03-06T04:16:25.970
> 
> 标签：matlab, opengl, animation, opencv, 3d

我正在尝试模拟类似于[**此的面部表情**](http://www.youtube.com/watch?v=TrgNKGjSyxA&feature=player_detailpage#t=16s)

我已经了解 FACS - 动作单位，即为特定表达而移动的单位。

但我不知道如何移动/变形动作单元以模拟 Matlab/OpenCV/OpenGL 中的表达式。

我有一个中性表情的 3D 面部网格。我想变形这张脸来模拟上面视频中的各种表情。

谁能给我一些关于如何解决这个问题的参考资料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:34:47.203

您可以在此[链接中查看](http://aifi.isr.uc.pt/Downloads.html)**“人体测量模型”**

# linq - 如何使用 EF 5 打开和关闭延迟加载？

> ID：15238878
> 
> 赞同：0
> 
> 时间：2013-03-06T04:16:27.583
> 
> 标签：linq, entity-framework, entity-framework-4.1

如果我有以下对象：

```
public class Application 
{
    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
}

public class TestAccount
{
    public int TestAccountId { get; set; }
    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual Application Application { get; set; }
} 
```

EF 映射如下所示：

```
modelBuilder.Entity<Application>()
    .HasMany(a => a.TestAccounts)
    .WithRequired(t => t.Application)
    .WillCascadeOnDelete(false); 
```

在我的代码的一部分中，我想检索 Application 的数据并让它返回 TestAccount 数据。

在我的代码的另一部分，我想检索 Application 的数据并让它不返回 TestAccount 数据。

有没有办法可以通过 LINQ 或其他方式实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:23:36.503

此问题已在此处得到解答：[在 Entity Framework 4 中默认禁用延迟加载](https://stackoverflow.com/questions/2967214/disable-lazy-loading-by-default-in-entity-framework-4)。

基本上，在 DbContext 的构造函数中，只需添加以下内容：

```
this.Configuration.LazyLoadingEnabled = false; 
```

我希望这有帮助。

**编辑**

另外，如果您想知道以后如何手动加载它，应该`Include()`像这样使用它是一件简单的事情：

`var query = context.Application.Include(x => x.TestAccounts).ToList()`

# javascript - 使用 AJAX 和 JQuery 在不刷新页面的情况下提交表单时遇到问题

> ID：15238886
> 
> 赞同：2
> 
> 时间：2013-03-06T04:16:52.347
> 
> 标签：javascript, jquery, ajax

我收到了显示此数据字符串的成功警报，但由于某种原因，我的 php 代码没有执行，否则它确实不成功，我不确定是哪个。谢谢。

```
inputPlantSite=Syncrude+Base+Mine&inputRouteNumber=aafdfadsfadsafds&inputStopNumber=asfdafdsasfdafds&inputLatitude=57.90609313959766&inputLongitude=-113.4063720703125&inputStreetName=asfdafdsasfdafds&inputArrivalTime=asfdafdsasfdafds&inputDayOfWeek=Weekday&inputDirectionOfBus=Town+to+Site&inputWhatShift=asfdafdsasfdafds&markerVariable=addmarker 
```

这是我的 Ajax/Jquery

```
 $(function() {
  $("#submit_marker").click(function(e) { e.preventDefault();
    var inputPlantSite = $("#inputPlantSite").val();
    var inputRouteNumber = $("#inputRouteNumber").val();
    var inputStopNumber = $("#inputStopNumber").val();
    var inputLatitude = $("#inputLatitude").val();
    var inputLongitude = $("#inputLongitude").val();
    var inputStreetName = $("#inputStreetName").val();
    var inputArrivalTime = $("#inputArrivalTime").val();
    var inputDayOfWeek = $("#inputDayOfWeek").val();
    var inputDirectionOfBus = $("#inputDirectionOfBus").val();
    var inputWhatShift = $("#inputWhatShift").val();
    var inputAddMarker = $("#inputAddMarker").val();
    var inputUpdateMarker = $("#inputUpdateMarker").val();
    var inputDeleteMarker = $("#inputDeleteMarker").val();
    var dataString = $('#formManageMarker').serialize();
    alert(dataString);

    $.ajax({
      type: "POST",
      url: "php/addmarker.php",
      data: dataString,
dataType: "json",
      success: function() {
        alert("Successfully added marker");
      }
    });
    return false;
  });
}); 
```

这是我的表格：

```
 <form name="formManageMarker" method="post" action="">
      <select name="inputPlantSite" class="input-block-level" id="inputPlantSite">
      <option value="Syncrude Base Mine">Syncrude Base Mine</option>
      <option value="Syncrude Base Plant">Syncrude Base Plant</option>
      <option value="Syncrude Aurora Base Mine">Syncrude Aurora Base Mine</option>
      <option value="Syncrude Aurora Base Plant">Syncrude Aurora Base Plant</option>
      <option value="Suncor Base Mine">Suncor Base Mine</option>
      <option value="Suncor Base Plant">Suncor Base Plant</option>
      <option value="Suncor Firebag">Suncor Firebag</option>
      <option value="Albian Sands">Albian Sands</option>
      </select>
        <input type="text" class="input-block-level" placeholder="Route Number e.g. 1" name="inputRouteNumber" id="inputRouteNumber">
        <input type="text" class="input-block-level" placeholder="Stop Number e.g. 1" name="inputStopNumber" id="inputStopNumber">
        <input type="text" class="input-block-level" placeholder="Latitude" name="inputLatitude" id="inputLatitude">
        <input type="text" class="input-block-level" placeholder="Longitude" name="inputLongitude" id="inputLongitude">
        <input type="text" class="input-block-level" placeholder="Street Name" name="inputStreetName" id="inputStreetName">
        <input type="text" class="input-block-level" placeholder="Arrival Time e.g. 6:00am" name="inputArrivalTime" id="inputArrivalTime">
        <select name="inputDayOfWeek" class="input-block-level" id="inputDayOfWeek">
          <option value="Weekday">Weekday</option>
          <option value="Weekend">Weekend</option>
          <option value="ADO">ADO</option>
        </select>
        <select name="inputDirectionOfBus" class="input-block-level" id="inputDirectionOfBus">
        <option value="Town to Site">Town To Site</option>
        <option value="Site To Town">Site To Town</option>
        </select>
        <input type="text" name="inputWhatShift" id="inputWhatShift" class="input-block-level" placeholder="What Shift e.g. Day Night">
        <select name="markerVariable" class="input-block-level">
          <option value="addmarker" class="alert-success">Add Marker</option>
          <option value="updatemarker" class="alert-info">Update Marker</option>
          <option value="deletemarker" class="alert-error">Delete Marker</option>
        </select>

        <button type="submit" name="addmarker" id="submit_marker" class="btn btn-info btn-large">Create Marker</button>
  </form> 
```

PHP 文件：

```
 <?php
require_once('./config.inc.php');

$plantsite = $_POST['inputPlantSite'];
$routenumber = $_POST['inputRouteNumber'];
$stopnumber = $_POST['inputStopNumber'];
$latitude = $_POST['inputLatitude'];
$longitude = $_POST['inputLongitude'];
$streetname = $_POST['inputStreetName'];
$markertitle = "Stop $stopnumber Route $routenumber";
$arrivaltime = $_POST['inputArrivalTime'];
$directionofbus = $_POST['inputDirectionOfBus'];
$whatshift = $_POST['inputWhatShift'];
$inputSearchSite = $_POST['inputSearchSite'];
$inputSearchRoute = $_POST['inputSearchRoute'];
$dayofweek = $_POST['inputDayOfWeek'];
$inputMarkerVariable = $_POST['markerVariable'];
$success = 0;

/* Connect to Database */
$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_BASE);
if (mysqli_connect_errno()) {
    printf('Connect failed: %s\n', mysqli_connect_error());
    exit();
}
if ($stmt = $mysqli -> prepare("SELECT Latitude, Longitude, Title, Arrival_Time, Direction_Of_Bus, What_Shift FROM Routes")) {
    $stmt -> execute();
    $stmt -> bind_result($gLatitude, $gLongitude, $gTitle, $gArrivalTime, $gDirectionOfBus, $gwhatShift);

}

if ($inputMarkerVariable == "addmarker") {
  /* Check fields */
  if ((!empty($stopnumber)) && (!empty($whatshift)) && (!empty($routenumber)) && (!empty($latitude))
      && (!empty($longitude)) && (!empty($streetname)) && (!empty($arrivaltime))) {

    /* Connect to the Database */

    $mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_BASE);
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }
    /* Get ready to query database */

    if ($stmt = $mysqli -> prepare("INSERT INTO Routes (Plant_Site, Route_Number, Stop_Number, Street_Name,
                                   Latitude, Longitude, Title, Arrival_Time, Day_Of_Week,
                                   Added_By, Direction_Of_Bus, What_Shift, Updated_At, Created_At)
                                   VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())")) {

      /* Bind Parameters */

      $stmt -> bind_param('ssssssssssss', $plantsite, $routenumber, $stopnumber, $streetname,
                          $latitude, $longitude, $markertitle,
                          $arrivaltime, $dayofweek, $sesh_email, $directionofbus, $whatshift);

      /* Exceute and send it to database */

      $stmt -> execute();

      $success = 1;
      json_encode(true);
      json_encode(false);

      $stmt -> close();

      if ($stmt = $mysqli -> prepare("SELECT Latitude, Longitude, Title, Arrival_Time, Direction_Of_Bus, What_Shift FROM Routes")) {
        $stmt -> execute();
        $stmt -> bind_result($gLatitude, $gLongitude, $gTitle, $gArrivalTime, $gDirectionOfBus, $gwhatShift);

}

    } else {
      printf('Couldnt make a connection');
    }
  } else { $alertmarker = "Not all fields are filled out"; }
}

if (isset($_POST['inputSortMarkers'])) {
    $mysqli -> mysqli(DB_HOST, DB_USER, DB_PASS, DB_BASE);
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    /* Get Ready to Sort Markers */

    if ($stmt = $mysqli -> prepare("SELECT Latitude, Longitude, Title, Arrival_Time, Direction_Of_Bus, What_Shift FROM Routes WHERE Plant_Site = ? AND Route_Number = ?")) {
        $stmt -> bind_param('si', $inputSearchSite, $inputSearchRoute);
        $stmt -> execute();
        $stmt -> bind_result($gLatitude, $gLongitude, $gTitle, $gArrivalTime, $gDirectionOfBus, $gwhatShift);
        printf('Worked');
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:25:26.750

你`return false`在你的代码中，所以下面的代码永远不会执行。

您也可以使用`$('form').serialize();`发送数据字符串。

并使用下面的代码。

```
$("#submit_marker").click(function(e) { e.preventDefault(); 
```

上面的代码将强制`button`只执行`click`事件代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:23:49.627

尝试将每个连接到 dataString 的变量编码：

```
dataString = 'inputPlantSite=' + encodeURIComponent(inputPlantSite) + '&..=' + encodeURIComponent(..) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:24:08.660

尝试像这样序列化您的信息..

```
 var serialized = $(dataString).serialize(); 

 $.ajax({
      type: "POST",
      url: "php/addmarker.php",
      data: serialized,
      success: function() {
        alert("Successfully added marker");
      } 
```

.serialize() 方法以标准 URL 编码表示法创建文本字符串。它对表示一组表单元素的 jQuery 对象进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T04:50:10.597

试试这个：

```
$.post('php/addmarker.php',{
    //param : value
    inputPlantSite : inputPlantSite,
    inputRouteNumber : inputRouteNumber,
    inputStopNumber : inputStopNumber,
    inputLatitude : inputLatitude,
    inputLongitude : inputLongitude,
    inputStreetName : inputStreetName,
    inputArrivalTime : inputArrivalTime,
    inputDayOfWeek : inputDayOfWeek,
    inputDirectionOfBus : inputDirectionOfBus,
    inputWhatShift : inputWhatShift,
    inputAddMarker : inputAddMarker,
    inputUpdateMarker : inputUpdateMarker,
    inputDeleteMarker : inputDeleteMarker
  },function(data){
    console.log(data);
    alert("Successfully added marker");
  }); 
```

# javascript - 单击时图像源中的增量编号

> ID：15238890
> 
> 赞同：0
> 
> 时间：2013-03-06T04:17:00.050
> 
> 标签：javascript, jquery

基本上我想为我正在处理的 JQuery 图片库创建下一个和上一个按钮。每个按钮的 id 分别为“next”和“prev”。我想要做的是更改图库中主图像源中的一个数字（其 ID 为 mainImg）。我已经能够定位每个图像源中的数字，但我似乎无法正确递增它，然后用新的递增数字替换当前图像的源编号。我尝试使用 while 循环、for 循环和 if 语句，但它们都不能正常工作。要查看我目前拥有的画廊，我已将其上传到此处：[http ://tiger.towson.edu/~abarso2/463/projecta/index.html](http://tiger.towson.edu/~abarso2/463/projecta/index.html)如果你进入我的 script.js 文件，你会在底部看到一个被注释掉的块。这就是我目前拥有的函数，它以图像源中的数字为目标并将其解析为整数。提前感谢您的帮助。

这是我目前拥有的：

```
(function(){
    var mainImg = $('#mainImg').attr('src');
    var mainImgStr = mainImg.charAt(mainImg.length - 5);
    var mainImgNum = parseInt(mainImgStr);
        $('#next').click(function(){

        });
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:30:19.693

这是修改后的代码。正则表达式会更好。用户可以多次单击下一个按钮，但不会跳过任何图像，因为只有在加载下一个图像时主图像才会转到下一个。因此，如果您快速单击下一步 5 次，则只会显示下一个图像（而不是跳过 4 个图像）。

```
(function(){
 // replace all non digit characters from src
 // only the last set of numbers so www.123.com/image7.jpg
 // will give us 7
 function getNumber(src){
   return parseInt(src.replace(/[\d]+(?=[\/])/g,"")
    .replace(/[^\d]/g,""),10);
 }
 // replaces last number of a source with the number provided
 // www.123.com/imgage7.jpg will be www.123.com/image8.jpg
 // if number 8 is given
 function setNumber(src,num){
   return src.replace(/[\d]+(?![\d])/g,num);
 }
 var $mainImg = $('#mainImg');
 $('#next').click(function(){
  var src= $mainImg.attr('src'),
  mainImgNum = getNumber(src);
  var $img=$(document.createElement("img"));
  $img.data("checkNext",false);
  $img.on("load",function(){
    // image exsist, load it as main image src
    if($img.data("checkNext")===true){
      $img.remove();
    }else{
      $mainImg.attr('src',$img.attr('src'));
      $("#prev").show(1000);
      $img.data("checkNext",true);
      $img.attr('src',setNumber($img.attr('src'),
       new String(mainImgNum+2));
  });
  $img.on("error",function(){
    if($img.data("checkNext")===true){
      $("#next").hide(1000);
    }
    // clean up
    $img.remove();
  });
  $img.attr('src',setNumber(src,new String(mainImgNum+1)));
 });
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:26:59.563

这应该可以解决您的问题

```
$(function(){
    var mainImg = $('#mainImg');
    var slidshow = $('#slideShow');

    $('#next').click(function(){
        var src = mainImg.attr('src').replace('thumb','shot');
        var next = $('img[src="' + src +'"]', slidshow).next();
        if(next.length){
            mainImg.attr('src',next.attr('src').replace('thumb','shot'));
        }
    });

    $('#prev').click(function(){
        var src = mainImg.attr('src').replace('thumb','shot');
        var prev = $('img[src="' + src +'"]', slidshow).prev();
        if(prev.length){
            mainImg.attr('src',prev.attr('src').replace('thumb','shot'));
        }
    });
}); 
```

# c - 将 C 中的浮点数转换为 IEEE 标准

> ID：15238892
> 
> 赞同：2
> 
> 时间：2013-03-06T04:17:01.660
> 
> 标签：c

我正在尝试在 C 中编写一个代码来生成一个随机整数，执行简单的计算，然后我试图在 IEEE 标准中打印文件的值。但我不能这样做，请帮助。

我无法以非常重要的十六进制/二进制打印它。如果我在中输入值`fprintf`，我会收到此错误`expected expression before double`。

```
int main (int argc, char *argv) {

     int limit = 20 ; double a[limit], b[limit];                //Inputs
     double result[limit]    ; int i , k ;            //Outputs
     printf("limit = %d", limit ); double q;

     for (i= 0 ; i< limit;i++)
         {
         a[i]= rand();
         b[i]= rand();
         printf ("A= %x B = %x\n",a[i],b[i]);

         }

     char op;

      printf("Enter the operand used : add,subtract,multiply,divide\n"); 
     scanf ("%c", &op); switch (op) {

     case '+': {
             for (k= 0 ; k< limit ; k++)
                 {

                 result [k]= a[k] + b[k];
            printf ("result= %f\n",result[k]);

                 }
             }
         break;

     case '*': {
             for (k= 0 ; k< limit ; k++)
                 {

                 result [k]= a[k] * b[k];

                 }
             }
         break;

     case '/': {
             for (k= 0 ; k< limit ; k++)
                 {

                 result [k]= a[k] / b[k];

                 }
             }
         break;

     case '-': {
             for (k= 0 ; k< limit ; k++)
                 {

                 result [k]= a[k] - b[k];

     }
             }
         break; }

     FILE *file; file = fopen("tb.txt","w"); for(k=0;k<limit;k++) {  
     fprintf (file,"%x\n
     %x\n%x\n\n",double(a[k]),double(b[k]),double(result[k]) );

     }

     fclose(file); /*done!*/
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T05:09:33.023

如果您的 C 编译器直接支持 IEEE-754 浮点格式（因为 CPU 支持它）或完全模拟它，您可以`doubles`简单地打印为字节。x86/64 平台就是这种情况。

这是一个例子：

```
#include <limits.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <float.h>

void PrintDoubleAsCBytes(double d, FILE* f)
{
  unsigned char a[sizeof(d)];
  unsigned i;
  memcpy(a, &d, sizeof(d));
  for (i = 0; i < sizeof(a); i++)
    fprintf(f, "%0*X ", (CHAR_BIT + 3) / 4, a[i]);
}

int main(void)
{
  PrintDoubleAsCBytes(0.0, stdout); puts("");
  PrintDoubleAsCBytes(0.5, stdout); puts("");
  PrintDoubleAsCBytes(1.0, stdout); puts("");
  PrintDoubleAsCBytes(2.0, stdout); puts("");
  PrintDoubleAsCBytes(-2.0, stdout); puts("");
  PrintDoubleAsCBytes(DBL_MIN, stdout); puts("");
  PrintDoubleAsCBytes(DBL_MAX, stdout); puts("");
  PrintDoubleAsCBytes(INFINITY, stdout); puts("");
#ifdef NAN
  PrintDoubleAsCBytes(NAN, stdout); puts("");
#endif
  return 0;
} 
```

输出（[ideone](http://ideone.com/mTSw1O)）：

```
00 00 00 00 00 00 00 00 
00 00 00 00 00 00 E0 3F 
00 00 00 00 00 00 F0 3F 
00 00 00 00 00 00 00 40 
00 00 00 00 00 00 00 C0 
00 00 00 00 00 00 10 00 
FF FF FF FF FF FF EF 7F 
00 00 00 00 00 00 F0 7F 
00 00 00 00 00 00 F8 7F 
```

如果不直接支持 IEEE-754，问题就会变得更加复杂。不过，还是可以解决的。

以下是一些可以提供帮助的相关问题和答案：

*   [在 C 中读取/写入浮点类型时如何处理字节顺序差异？](https://stackoverflow.com/q/14954088/968261)
*   [是否有工具可以知道一个值是否具有作为浮点变量的精确二进制表示？](https://stackoverflow.com/q/8428837/968261)
*   [C动态printf double，不损失精度且不尾随零](https://stackoverflow.com/q/15192948/968261)

当然，所有 IEEE-754 相关信息都可以在[Wikipedia](http://en.wikipedia.org/wiki/IEEE_floating_point)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T05:03:15.003

在你的 fprint 部分试试这个：

`fprintf (file,"%x\n%x\n%x\n\n",*((int*)(&a[k])),*((int*)(&b[k])),*((int*)(&result[k])));`

这会将 转换`double`为整数，因此它以 IEEE 标准打印。

但是，如果您在`int`32 位和`double`64 位的 32 位机器上运行程序，我想您应该使用：

`fprintf (file,"%x%x\n%x%x\n%x%x\n\n",*((int*)(&a[k])),*((int*)(&a[k])+1),*((int*)(&b[k])),*((int*)(&b[k])+1),*((int*)(&result[k])),*((int*)(&result[k])+1));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T05:28:28.240

在 C 中，有两种方法可以获取浮点值中的字节：指针转换或联合。我推荐工会。

我刚刚用 GCC 测试了这段代码，它起作用了：

```
#include <stdio.h>
typedef unsigned char BYTE;

int
main()
{
    float f = 3.14f;
    int i = sizeof(float) - 1;
    BYTE *p = (BYTE *)(&f);
    p[i] = p[i] | 0x80;  // set the sign bit
    printf("%f\n", f);  // prints -3.140000
} 
```

我们获取变量的地址`f`，然后将其分配给指向 BYTE（无符号字符）的指针。我们使用强制转换来强制指针。

如果您尝试在启用优化的情况下编译代码并执行上面显示的指针转换，您可能会遇到编译器抱怨“类型双关指针”问题。我不确定你什么时候可以这样做，什么时候不能。但是您总是可以使用另一种方法来获取位：将浮点数放入一个带有字节数组的联合中。

```
#include <stdio.h>

typedef unsigned char BYTE;

typedef union
{
    float f;
    BYTE b[sizeof(float)];
} UFLOAT;

int
main()
{
    UFLOAT u;
    int const i = sizeof(float) - 1;

    u.f = 3.14f;
    u.b[i] = u.b[i] | 0x80;  // set the sign bit
    printf("%f\n", u.f);  // prints -3.140000
} 
```

绝对*行不通*的是尝试将浮点值直接转换为无符号整数或类似的东西。C 不知道您只想覆盖类型，因此 C 尝试转换值，导致舍入。

```
float f = 3.14;
unsigned int i = (unsigned int)f;

if (i == 3)
    printf("yes\n"); // will print "yes" 
```

PS在这里讨论“类型双关”指针：

[取消引用类型双关指针将破坏严格的别名规则](https://stackoverflow.com/questions/3246228/dereferencing-type-punned-pointer-will-break-strict-aliasing-rules)

# c - 获取从 C 中的函数返回的奇怪数字

> ID：15238893
> 
> 赞同：0
> 
> 时间：2013-03-06T04:17:08.443
> 
> 标签：c

我有几个文件：

评估_sin.c：

```
int evaluate_sin(int deg) {
    double j = deg_to_rad(deg);
    j = sin(j);
    printf("sin(%d) =  %d\n", deg, j);
    return j;
} 
```

deg_to_rad.c

```
double deg_to_rad(int deg) {
    double rad = (3.14 * deg) / 180;
    return rad;
} 
```

当我将evaluate_sin 函数中的“deg”变量（它是一个整数）传递给deg_to_rad 时，j 最终会变成一些随机数，例如-90503293。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:25:41.993

请注意 j 是双精度数，而不是整数

所以`printf("sin(%d) = %d\n", deg, j);`应该放在`printf("sin(%d) = %f\n", deg, j);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:28:59.747

您尚未声明`deg_to_rad()`：

```
extern double deg_to_rad(int deg); 
```

在你使用它之前。您的代码假定它返回 an`int`并将其转换为`double`.

你应该有一个标题`degtorad.h`。

### `degtorad.h`

```
#ifndef DEGTORAD_H_INCLUDED
#define DEGTORAD_H_INCLUDED

extern double deg_to_rad(int deg);

#endif /* DEGTORAD_H_INCLUDED */ 
```

（在此示例中，标头保护不是 100% 必需的，但对于需要标头保护的更复杂情况，这是一个很好的基础。）

然后您的程序文件包含此标头。在某个地方，您也需要声明`evaluate_sin()`；它可以进入同一个标题。

### 评估_sin.c：

```
#include <math.h>
#include <stdio.h>
#include "degtorad.h"

double evaluate_sin(int deg)
{
    double j = deg_to_rad(deg);
    j = sin(j);
    printf("sin(%d) =  %.6f\n", deg, j);
    return j;
} 
```

还要注意返回类型的变化（`double`而不是`int`）；它将返回 0，除非您设法传入 π/2 的奇数倍数（当它返回 -1 或 +1 时）。以及值格式的更改`double`（`%.6f`而不是`%d`，它将打印一个整数）。

如果您使用的是 GCC，则需要打开编译警告；至少`-Wall`。

### deg_to_rad.c

```
#include "deg_to_rad.h"

double deg_to_rad(int deg)
{
    double rad = (3.14 * deg) / 180;
    return rad;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:30:35.557

虽然`printf("%f", doubleValue)`可以使用双打，但我仍然建议尽可能简单地使用双打`scanf()`所需的方式`%lf`。这给了程序一致性的感觉。

所以是的，我建议：

`printf("sin(%d) = %lf\n", deg, j);`

# jquery - JQuery：如何选择相同的类选项

> ID：15238894
> 
> 赞同：0
> 
> 时间：2013-03-06T04:17:14.220
> 
> 标签：jquery, html-select

我的 html 有多个具有相同类的下拉框。我从每个输入框中获取一个值，然后将其`<select>`作为选择器传递给。我从输入框中得到的值是正确的，但是我在选择下拉框时遇到了麻烦。

HTML：

```
<div id="orange">
    <input type="text" class="hide" value="AM" />
    <select class="ampm">
        <option value="AM">AM</option>
        <option value="PM">PM</option>
    </select>
    <br>
    <input type="text" class="hide" value="AM" />
    <select class="ampm">
        <option value="AM">AM</option>
        <option value="PM">PM</option>
    </select>
    <br>
    <input type="text" class="hide" value="PM" />
    <select class="ampm">
        <option value="AM">AM</option>
        <option value="PM">PM</option>
    </select>
</div>
<div id="apple">
    <input type="text" class="hide" value="AM" />
    <select class="ampm">
        <option value="AM">AM</option>
        <option value="PM">PM</option>
    </select>
    <br>
    <input type="text" class="hide" value="PM" />
    <select class="ampm">
        <option value="AM">AM</option>
        <option value="PM">PM</option>
    </select>
</div> 
```

JS：

```
$(function () {
$('div').each(function(){
    $(this).find('.hide').each(function () { //inputbox
         $(this).find('.ampm').val($(this).val()); //option                        
         alert($(this).val());
     });    
  });
}); 
```

[JSFiddle 完整代码](http://jsfiddle.net/LpsVn/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T04:21:44.480

`find`在元素**内**查找。您的选择框不包含在您的输入中，因此找不到任何内容。而是将其更改为`next`：

```
 $(this).next('.ampm').val($(this).val()); 
```

[http://jsfiddle.net/LpsVn/2/](http://jsfiddle.net/LpsVn/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T04:23:36.737

试试这个

```
$(function () {
        $('div .hide').each(function () {
             $(this).next('.ampm').val($(this).val());                         
             console.log($(this).val());
         });    
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/LpsVn/5/)。

对于一个非常酷的解决方案，您可以查看@wirey 的评论

```
$(function() {
    $('div .ampm').val(function() {
                return $(this).prev('.hide').val();
            })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:50:07.330

```
$(function () {
    $('div').each(function() {
        var $div = $(this);
        $div.find('.hide').change(function() {  //inputs change:
            var newInputVal = $(this).val();
            $div.find('.ampm').val(newInputVal);
        });
    });
}); 
```

请注意组中的这种变化。然而，许多 .ampm 在父 div 中。不确定那是您的意图。这有点晚了，但试图让初学者清楚地了解变量。上面的 next() 替代方案在某些情况下*可能*有点脆弱。另外，我认为这通常有一些明显的问题，比如当模糊实际被触发时等。

[http://jsfiddle.net/LpsVn/](http://jsfiddle.net/LpsVn/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:22:03.183

您正在遍历输入标签内的选择标签，这是不可能的，因为选择标签不是输入的子项。所以你可以做的只是遍历输入标签，然后找到它的下一个兄弟选择标签，并将当前输入标签的值分配给它。

```
$(function () {
$('div').find('input').each(function(){                
alert( $(this).val());
$(this).next('select').val($(this).val());
});
}); 
```

[http://jsfiddle.net/LpsVn/8/](http://jsfiddle.net/LpsVn/8/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T04:23:53.570

```
$("select option").filter(function() {
    return $(this).text() == text1; 
}).attr('selected', true); 
```

筛选正确的选项并将`selected`属性设置为 true。

# android - phonegap 和布局

> ID：15238895
> 
> 赞同：1
> 
> 时间：2013-03-06T04:17:15.303
> 
> 标签：android, cordova, layout

我有一个使用 phonegap (cordova 2.1) 的应用程序，它通过调用 index.html 文件并从中运行 Javascript 来工作。我正在尝试实现我在 github 上找到的翻页动画：[https](https://github.com/harism/android_page_curl) ://github.com/harism/android_page_curl 。

但是，我不确定如何从我的 JS webview 活动跳转到 page curl 活动。我可以在没有布局的情况下做到这一点吗？如果不是，我如何将 pagecurl 布局放在我的 JS 活动之上，以便它仍然可以在后台看到（所以它看起来像正在翻页）。

有任何想法吗？

谢谢

# php - 使用 Silex/Symfony 提供响应后删除文件

> ID：15238897
> 
> 赞同：3
> 
> 时间：2013-03-06T04:17:26.343
> 
> 标签：php, symfony, silex

我在我的 Silex 应用程序中使用 Knp\Snappy\Pdf 生成一个 pdf。文件名是随机的，保存到 tmp 目录下。

```
$filename = "/tmp/$random.pdf"
$snappy->generate('/tmp/body.html', $filename, array(), true); 
```

我认为在响应中返回 pdf，

```
$response = new Response(file_get_contents($filename));
$response->headers->set('Pragma', 'public');
$response->headers->set('Content-Type', 'application/pdf');

return $response; 
```

pdf 正确显示在网络浏览器中。请求完成后，具有随机文件名的文件仍然存在。在返回响应之前，我无法取消链接文件。我尝试使用 register_shutdown_function 注册关闭功能并从那里取消链接文件。但是，这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-10T18:40:19.780

尽管这很旧，但想知道是否有人像我一样最近在谷歌上搜索它。这是我找到的解决方案。

[从 Silex 中的sendFile](http://silex.sensiolabs.org/doc/usage.html#sending-a-file)返回的[BinaryFileResponse](http://api.symfony.com/master/Symfony/Component/HttpFoundation/BinaryFileResponse.html)上有一个 deleteFileAfterSend() 方法。所以在你的控制器中你可以这样做：

```
 return $app ->sendFile($filepath)
                ->setContentDisposition(ResponseHeaderBag::DISPOSITION_INLINE, $fileName)
                ->deleteFileAfterSend(true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T05:15:53.540

您可以为此使用[完成](http://silex.sensiolabs.org/doc/middlewares.html#finish-middleware)中间件：

> 完成应用程序中间件允许您在将响应发送到客户端后执行任务（例如发送电子邮件或日志记录）

这就是它的外观：

```
$app->finish(function (Request $request, Response $response) use ($app) {
    if (isset($app["file_to_remove"])) {
        unlink($app["file_to_remove"];
    }
});

//in your controller
$app["file_to_remove"] = $filename; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T07:51:03.500

Maerlyn 是对的，但在这种情况下，您也可以在返回响应之前取消链接文件，因为文件的内容已经在 $response.xml 中。

# ruby-on-rails - 无法使用 ruby on rails 启动 heroku。摘要/SHA2 没有这样的文件

> ID：15238901
> 
> 赞同：0
> 
> 时间：2013-03-06T04:17:40.270
> 
> 标签：ruby-on-rails, heroku

所以我一直在我的本地机器上制作一个基本的应用程序，但我无法轻松地将它转移到 Heroku。当我尝试运行它时，服务器崩溃了。

当我输入 heroku run rails s 时，它会启动一秒钟，然后吐出一个巨大的堆栈跟踪。

在顶部它说：
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/depenencies.rb:317:in 'rescue independ_on'：没有这样的文件加载 - - 摘要/SHA2（加载错误）：

我使用 SHA2 进行身份验证，它似乎使应用程序崩溃。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:46:22.390

这可能是因为它是一个区分大小写的文件系统，而您的本地系统不是。

尝试将要求更改为：

```
require 'digest/sha2' 
```

# php - Laravel 视图未加载

> ID：15238902
> 
> 赞同：2
> 
> 时间：2013-03-06T04:17:40.260
> 
> 标签：php, laravel

我正在用 laravel 编写一个应用程序，它在 Windows 上运行良好，加载视图

但是当我将它移到我在 linux 上的生产机器上时，一些视图不会加载。

[http://sentinel.weissconsultancy.com/](http://sentinel.weissconsultancy.com/)

那里的例子

application/views/widgets/servicesWidget.php 在那里，但它根本不会加载它，它对那个文件夹中的其他所有东西都是一样的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T04:20:01.237

我有这个问题很多。我发现由于 windows 和 linux 之间的区分大小写兼容性问题，我最好使用“蛇形大小写”来解决这类问题。这是我发现的一件烦人的事情。

将您的视图更改为`widgets/services_widget.php`并通过以下方式引用它

```
View::make('widgets/services_widget'); 
```

这个问题应该得到解决。

# maven - 调整 ANT 脚本以将 EAR 文件更新为 Maven

> ID：15238903
> 
> 赞同：0
> 
> 时间：2013-03-06T04:17:58.037
> 
> 标签：maven, ant

我有一个 Ant 脚本，用于自动化一些与构建无关的任务，主要是作为对 EAR 文件的更新。其中包括为某些 Web 服务调用 SoapUI exe、解压缩 EAR 文件、修改一些类并重新打包。

现在，出于某种原因，我想使用 maven 脚本来做同样的事情。通过阅读 Stack Overflow 和 maven 教程，我发现这可以使用 maven 中的 Ant 插件进行复制。此外，我找不到解压 EAR 或在 maven 中调用可执行文件的直接替代品。该脚本与 maven 的标准构建过程没有任何关系，仅用于对已部署的 EAR 进行一些清理或更新。

那么我该怎么做呢？在 maven 中使用 Ant 插件还是有更好的 maven 方法来做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:24:59.910

这可能是一个不完整的答案，但是 -

1.  Maven 更像是一个框架，它会想要构建您的应用程序。它*不会*做的是修改源代码。它将处理源文件（.java、.ear 等）并将它们放在一个*目录*`target/`中。当然，一切皆有可能（re: hackable），但就 Maven 而言，如果你想对源代码进行适当的修改，这是不正常的——此外，它不是源代码的源点，而且如果你正在自动化一个任务应该是你的构建、部署、启动等的一部分？
2.  [Maven 资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)是如何处理源文件并将动态信息标记到您的资源中。
3.  如果您可以提供有关如何准确处理 .ear 文件的更多信息，则可以使用现有插件将 Maven 进程资源阶段的各个部分组合在一起。最坏的情况是您可以编写自己的插件。

# c - 比较数组元素并尝试将不同的元素添加到其他数组不起作用？

> ID：15238905
> 
> 赞同：0
> 
> 时间：2013-03-06T04:18:07.713
> 
> 标签：c

我正在尝试比较数组元素，想法是将所有不同的元素收集到其他 temp[] 数组。我认为它出问题了......无法理解......请帮助我

```
#include <stdio.h>
#include <stdlib.h>

#define SIZE 30

int my_arr[SIZE] = {10,20,45,63,89,20,15,12,89,24,12,10,89,25,64,39,37,64,95,
                  27,23,58,97,23,18,56,94,76,32,11                                                      
                   };

int main()
{

   int i,j,temp_arr[100];

  for(i=0;i<SIZE;i++)
  {
     for(j=0+i; j<SIZE; j++)
     {
        if(*(my_arr+i)!=*(my_arr+j))

              *(my_arr+i) = temp_arr[i];

     }

      }
      return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:25:44.693

这里：

```
*(my_arr+i) = temp_arr[i]; 
```

`temp_arr[j]`未初始化，您将其分配给`my_arr[i]`. 你的描述听起来像你想要的：

```
temp_arr[i] = *(my_arr+i); 
```

但是你最终会`holes`在`temp_arr`. 因此，也许您需要另一个索引来计算`temp_arr`.

就像是：

```
int tmp_cnt = 0;
for(i=0;i<SIZE;i++) {
     for(j=0+i; j<SIZE; j++) {
        if(*(my_arr+i)!=*(my_arr+j))
              temp_arr[tmp_cnt++] = *(my_arr+i);
     }
 } 
```

# silverlight - microsoft visual studio 2010 终极编码 UI 测试无法识别 Microsoft Silverlight 控件

> ID：15238918
> 
> 赞同：0
> 
> 时间：2013-03-06T04:19:36.600
> 
> 标签：silverlight, testing, user-interface, automation

要求：需要使用**“MS Visual Studio 2010 Ultimate-coded UITest”在带有****Silverlight 控件**的网站上进行自动化测试。问题：录制silverlight控件时，显示错误“无法识别MS Silverlight控件。检查http:\go.microsoft.com\fwlink\?linkID=157214”

 **如何通过先决条件解决此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T16:23:56.890

可能IE浏览器应该设置为兼容性视图。

[http://swautomation.wordpress.com/tag/microsoft-visualstudio-testtools-uitest-extension-silverlightuiautomationhelper/](http://swautomation.wordpress.com/tag/microsoft-visualstudio-testtools-uitest-extension-silverlightuiautomationhelper/)**

# python - 将图像中每个像素的 RGB 值导入一维数组

> ID：15238922
> 
> 赞同：1
> 
> 时间：2013-03-06T04:19:56.300
> 
> 标签：python

如何将图像中每个像素的 RGB 值导入一维数组？

我正在使用以下东西：

```
from PIL import Image
im = Image.open("bride.jpg")
pix = im.load()
print pix[x,y] 
```

这会将其导入到不可迭代的二维数组中。我想要同样的东西，但在一维数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:30:23.470

您可以将像素展平为一维数组，如下所示：

```
width, height = im.size
pixels = [pix[i, j] for i in range(width) for j in range(height)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:50:56.333

如果您使用的是 numpy，则很容易，并且无需加载图像。

```
from PIL import Image
import numpy as np
im = Image.open("bride.jpg")

pix_flatiter = np.asarray(im).flat  # is an iterable 
```

如果要加载整个数组，可以执行以下操作：

```
pix_flat = np.asarray(im).flatten() # is an array 
```

# java - 从 Java 中的不同类访问方法

> ID：15238927
> 
> 赞同：-2
> 
> 时间：2013-03-06T04:21:03.243
> 
> 标签：java, methods

我正在编写一个程序，我想从不同的类访问一个方法。我知道您应该为要使用的方法创建一个新对象，但每次我这样做时，它都会声明“构造函数 Card() 未定义”。我不想访问构造函数，我想访问该类中的不同方法。

这是我想将我的“其他”方法引入的方法的开始。**我尝试创建一个新对象，但它在 * __** *之间的那部分给了我一个错误：

```
public void addCard(Card[][]card) {
    Card card1;
    card1 = *new Card();* 
```

另一个方法被简单地调用`getCard(int r, Suit s)`（这是在不同的类中）。此类中还有一个构造函数方法，这就是错误似乎在谈论的内容..？

如果您能提供帮助，那就太好了，谢谢！

这是我的卡片类：

```
public class Card {
private static Card[][] card = new Card[4][13];
private int rank;
public enum Suit{hearts, diamonds, clubs, spades};
private Suit suit;

private Card(int r, Suit s){
    this.suit = s;
    this.rank = r;
}

public int getRank(){
    return rank;
}

public Suit getSuit(){
    return suit;
}

public static Card[][] getCard(int r, Suit s){
    if(card == null){
        return card;
    }
    else{
        card = new Card[4][13];
        return card;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T04:25:24.737

您应该像这样实例化一个新对象：

```
Card card = new Card(); 
```

另一方面，如果您在设计中使用类的方法而不实例化该类的对象，那么您正在寻找`static`关键字。**静态**定义的方法和变量被定义为类的属性而不是对象。因此，您可以`static`在不初始化对象的情况下使用方法。

```
public Class A{
  public static void methodName(){
    //you can call that methods from anywhere using A.methodName();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T04:25:02.603

当您尝试设置类的实例时，会自动调用构造函数。

只要您不创建另一个构造函数，就会自动为您生成默认的无参数构造函数。完成后，您**需要自己指定**无参数构造函数，如下所示。

```
public Card(){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T04:24:44.650

当用户定义参数化构造函数时，编译器不提供默认构造函数，因此如果用户希望通过不向构造函数提供参数来创建对象，则必须定义默认构造函数。

```
public Card()
{
    //do something
} 
```

看起来你有私有构造函数，将你的构造函数更改为以下

```
public Card(int r, Suit s)
{
    this.suit = s;
    this.rank = r;
} 
```

注意：如果您想通过以下方式创建 Card 对象：

```
Card card1;
card1 = new Card(); 
```

您可以定义公共无参数构造函数（即 public Card(){}）或什么都没有（如果什么都没有：编译器将提供无参数构造函数）

如果您想以这种方式创建 Card 对象：

```
Card card1, card2;
card1 = new Card();
card2 =  new card(1,new Suit()); 
```

你必须包括我上面显示的两个构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T04:27:01.977

当您编写带参数的构造函数时，JVM会隐藏默认构造函数（没有参数）。所以现在您需要定义一个不带参数的构造函数。所以现在您需要定义一个构造函数

```
public Card(){
} 
```

**或**使用参数化构造函数 new Card(params) 创建对象

# java - JavaFX：如何更改焦点遍历策略？

> ID：15238928
> 
> 赞同：28
> 
> 时间：2013-03-06T04:21:15.300
> 
> 标签：java, javafx, focus, javafx-2, javafx-8

JavaFX 中是否可以像在 AWT 中那样更改*焦点遍历策略？*

因为我的两个`HBox`es的遍历顺序是错误的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-27T15:50:52.250

最简单的解决方案是编辑 FXML 文件并适当地重新排序容器。例如，我当前的应用程序有一个注册对话框，可以在其中输入序列号。为此目的有 5 个文本字段。为了使焦点正确地从一个文本字段传递到另一个，我必须以这种方式列出它们：

```
<TextField fx:id="tfSerial1" layoutX="180.0" layoutY="166.0" prefWidth="55.0" />
<TextField fx:id="tfSerial2" layoutX="257.0" layoutY="166.0" prefWidth="55.0" />
<TextField fx:id="tfSerial3" layoutX="335.0" layoutY="166.0" prefWidth="55.0" />
<TextField fx:id="tfSerial4" layoutX="412.0" layoutY="166.0" prefWidth="55.0" />
<TextField fx:id="tfSerial5" layoutX="488.0" layoutY="166.0" prefWidth="55.0" /> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-09T18:03:46.343

Bluehair 的回答是正确的，但您甚至可以在 JavaFX Scene Builder 中执行此操作。

您在左栏中有层次结构面板。场景中有你所有的组件。它们的顺序代表焦点遍历顺序，它响应它们在 FXML 文件中的顺序。

我在这个网页上找到了这个提示：[www.wobblycogs.co.uk](http://www.wobblycogs.co.uk/index.php/computing/javafx/160-controlling-tab-order-in-javafx2)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-06T14:37:06.953

通常情况下，导航是按容器顺序、子顺序或按箭头键完成的。您可以更改节点的顺序 - 在这种情况下，这将是您的最佳解决方案。

JFX 中有一个关于遍历引擎策略替换的后门：

你可以继承内部类 com.sun.javafx.scene.traversal.TraversalEngine

```
engine = new TraversalEngine(this, false) {
            @Override public void trav(Node owner, Direction dir) {
                // do whatever you want
            }
        }; 
```

并使用

```
setImpl_traversalEngine(engine); 
```

调用应用该引擎。

您可以观察 OpenJFX 的代码，了解它是如何工作的，以及您可以做什么。

要非常小心：它是一个内部 API，它可能会在最近的将来发生变化。所以不要依赖这个（无论如何你不能依赖这个官方）。

示例实现：

```
public void start(Stage stage) throws Exception {
    final VBox vb = new VBox();

    final Button button1 = new Button("Button 1");
    final Button button2 = new Button("Button 2");
    final Button button3 = new Button("Button 3");

    TraversalEngine engine = new TraversalEngine(vb, false) {
        @Override
        public void trav(Node node, Direction drctn) {
            int index = vb.getChildren().indexOf(node);

            switch (drctn) {
                case DOWN:
                case RIGHT:
                case NEXT:
                    index++;
                    break;
                case LEFT:
                case PREVIOUS:
                case UP:
                    index--;
            }

            if (index < 0) {
                index = vb.getChildren().size() - 1;
            }
            index %= vb.getChildren().size();

            System.out.println("Select <" + index + ">");

            vb.getChildren().get(index).requestFocus();
        }
    };

    vb.setImpl_traversalEngine(engine);

    vb.getChildren().addAll(button1, button2, button3);
    Scene scene = new Scene(vb);
    stage.setScene(scene);
    stage.show();
} 
```

对于普通情况，这将需要强大的分析技能；）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-02T10:20:06.900

我们为此使用[JavaFX 事件过滤器](http://docs.oracle.com/javafx/2/events/filters.htm)，例如：

```
cancelButton.addEventFilter(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent event) {
        if (event.getCode() == KeyCode.TAB && event.isShiftDown()) {
            event.consume();
            getDetailsPane().requestFocus();
        }
    }
}); 
```

禁止`event.consume()`默认焦点遍历，否则在调用时会导致麻烦`requestFocus()`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-07T10:34:53.090

这是适用于更改内部 api 的公认答案（发生在 fx-8 的某个时间点，我当前的版本是 8u60b5）。显然原来的免责声明仍然适用：它是*内部*api，随时开放更改，恕不另行通知！

更改（与接受的答案相比）

*   Parent 需要一个 ParentTraversalEngine 类型的 TraversalEngine
*   nav 不再是 TraversalEngine（也不是 ParentTE）的方法，而只是 TopLevelTraversalEngine
*   导航实现被委托给称为算法的策略
*   实际焦点转移（似乎是？）由 TopLevelTE 处理，算法只找到并返回新目标

示例代码的简单翻译：

```
/**
 * Requirement: configure focus traversal
 * old question with old hack (using internal api):
 * http://stackoverflow.com/q/15238928/203657
 * 
 * New question (closed as duplicate by ... me ..)
 * http://stackoverflow.com/q/30094080/203657
 * Old hack doesn't work, change of internal api
 * rewritten to new internal (sic!) api
 * 
 */
public class FocusTraversal extends Application {

    private Parent getContent() {
        final VBox vb = new VBox();

        final Button button1 = new Button("Button 1");
        final Button button2 = new Button("Button 2");
        final Button button3 = new Button("Button 3");

        Algorithm algo = new Algorithm() {

            @Override
            public Node select(Node node, Direction dir,
                    TraversalContext context) {
                Node next = trav(node, dir);
                return next;
            }

            /**
             * Just for fun: implemented to invers reaction
             */
            private Node trav(Node node, Direction drctn) {
                int index = vb.getChildren().indexOf(node);

                switch (drctn) {
                    case DOWN:
                    case RIGHT:
                    case NEXT:
                    case NEXT_IN_LINE:    
                        index--;
                        break;
                    case LEFT:
                    case PREVIOUS:
                    case UP:
                        index++;
                }

                if (index < 0) {
                    index = vb.getChildren().size() - 1;
                }
                index %= vb.getChildren().size();

                System.out.println("Select <" + index + ">");

                return vb.getChildren().get(index);
            }

            @Override
            public Node selectFirst(TraversalContext context) {
                return vb.getChildren().get(0);
            }

            @Override
            public Node selectLast(TraversalContext context) {
                return vb.getChildren().get(vb.getChildren().size() - 1);
            }

        };
        ParentTraversalEngine engine = new ParentTraversalEngine(vb, algo);
        // internal api in fx8
        // vb.setImpl_traversalEngine(engine);
        // internal api since fx9
        ParentHelper.setTraversalEngine(vb, engine);
        vb.getChildren().addAll(button1, button2, button3);
        return vb;
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        primaryStage.setScene(new Scene(getContent()));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-06T05:35:54.303

在场景构建器中，转到视图菜单并选择显示文档。左侧将是当前 fxml 文档中的所有对象。在列表中向上或向下拖动控件以重新排序选项卡索引。选择隐藏文档以使用其他工具，因为文档窗格占用空间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-22T13:23:11.450

我使用 Eventfilter 作为解决方案并结合引用字段 ID，因此您所要做的就是将字段命名为 (field1,field2,field3,field4) 这样您就可以将字段放置在您想要的位置：

```
mainScene.addEventFilter(KeyEvent.KEY_PRESSED, (event) -> {
        if(event.getCode().equals(KeyCode.TAB)){
            event.consume();
            final Node node =  mainScene.lookup("#field"+focusNumber);
            if(node!=null){
                node.requestFocus();
            }
            focusNumber ++;
            if(focusNumber>11){
              focusNumber=1;
            }
        }
    }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-09T05:50:55.363

您可以使用**SceneBuilder**轻松完成此操作。使用 scenebuilder 打开 fxml 文件并转到**Document**选项卡下的**层次结构**。通过拖动输入控件将输入控件放置到您想要的顺序。记得在属性中检查**焦点遍历。**然后，当您按下标签栏时，焦点遍历策略将很好地工作。

 ****[![使用 SB 更改焦点遍历策略](../Images/8f3eebbff93a59a8791276fe61245df0.png)](https://i.stack.imgur.com/ajeEm.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-03T22:06:51.027

您可以`NodeName.requestFocus()`如上所述使用；此外，请确保在为根布局实例化并添加所有节点之后请求此焦点，因为这样做时，焦点将发生变化。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-29T16:18:50.573

我遇到了一个问题，JavaFX Slider 正在捕获我希望通过我的方法处理的左右箭头键击`keyEventHandler`（它处理场景的键事件）。对我有用的是将以下行添加到初始化 Slider 的代码中：

```
slider.setOnKeyPressed(keyEventHandler); 
```

并添加

```
keyEvent.consume(); 
```

在结束时`keyEventHandler`。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-10T06:20:06.100

受 Patrick Eckert 回答启发的通用解决方案。

当我创建 UI 时，例如添加一个`TextField`，我设置如下：

```
List<String> displayOrder;
Map<String, Node> cycle;

TextField tf = new TextField();
tf.setId("meTF");
cycle.put("meTF", tf);
displayOrder.add("meTF");
getChildren().add(tf); 
```

然后在 UI 元素（通常是布局）上添加：

```
ui.addEventFilter(KeyEvent.KEY_PRESSED, (ke) ->
{
    if(!ke.getCode().equals(KeyCode.TAB) || !(ke.getTarget() instanceof Node))
        return;

    int i = displayOrder.indexOf(((Node)ke.getTarget()).getId());

    if(i < 0) // can't find it
        return;

    if(ke.isShiftDown())
        i = (i == 0 ? displayOrder.size() - 1 : i - 1);
    else
        i = ++i % displayOrder.size();

    cycle.get(displayOrder.get(i)).requestFocus();

    ke.consume();
}); 
```

仅供参考，我认为仅在您实际上要调用请求焦点时才使用该事件很重要。不太可能以这种方式无意中破坏某些东西......

如果有人能想出进一步优化的方法，我将不胜感激:)****

# linux - 构建高可用性 OpenStack 集群的方法有哪些？

> ID：15238938
> 
> 赞同：0
> 
> 时间：2013-03-06T04:23:03.727
> 
> 标签：linux, cloud, high-availability, openstack

有哪些技术可以使 openstack 服务以高可用性方式运行？OpenStack 服务似乎是单点故障。有哪些方法可以使这些服务更加健壮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:16:31.160

[http://www.slideshare.net/openstack/openstackdesignsummithapairsarenottheonlyanswer-copypdf](http://www.slideshare.net/openstack/openstackdesignsummithapairsarenottheonlyanswer-copypdf)

关于弹性与冗余的幻灯片。HA 对与弹性模型有点对立。但是至少在传统意义上，您仍然可以在没有 HA 的情况下确保弹性。

# sql - 如何将分号分隔的值转换为列

> ID：15238943
> 
> 赞同：-2
> 
> 时间：2013-03-06T04:23:14.507
> 
> 标签：sql, sql-server, sql-server-2008

我正在做一个集成项目，我正在接收三个字符串参数 ItemCode ItemName Amount

并且值将采用这种格式

**ItemCod 参数值** T1;T2;T3;

**ItemName 参数值** Pencil Box;Eraser;Mouse Pad;

**金额参数值** 1900;2000;8900;

现在我想有一个过程，我将在其中接收这些参数，并且查询会将其转换为列和记录。我不是 SQLServer 人，我在 Oracle 中做了类似的事情来发送。但是这个是用分号分隔的接收并转​​换为列和行。对于质量差的帖子，我深表歉意。这是 Oracle 的尝试。

```
create or replace
PROCEDURE PROC_SENDREQDETAILS 
(
  P_REQ_NUMBER VARCHAR2  
, P_ATTRIBUTE1 VARCHAR2
, P_LOCATION_NAME VARCHAR2
, P_ITEM_ID VARCHAR2  
, P_QTY VARCHAR2
, P_NEED_BY_DATE VARCHAR2
, P_ATTRIBUTE3 VARCHAR2
) IS
BEGIN

INSERT INTO PO_REQUISITIONS_STAGING(req_number_segment1, attribute1, location_name, item_id, quantity, need_by_date, attribute3)
 select  regexp_substr(request_number,'[^;]+',1,level),
         regexp_substr(attribute1,'[^;]+',1,level),
         regexp_substr(location_name,'[^;]+',1,level),
         regexp_substr(item_id,'[^;]+',1,level),
         regexp_substr(quantity,'[^;]+',1,level),
         regexp_substr(need_by_date,'[^;]+',1,level),
         regexp_substr(attribute3,'[^;]+',1,level)
  from  (
      select P_REQ_NUMBER request_number, P_ATTRIBUTE1 attribute1, P_LOCATION_NAME location_name, P_ITEM_ID item_id, P_QTY quantity, P_NEED_BY_DATE need_by_date, P_ATTRIBUTE3 attribute3
      from dual
      )
  connect by regexp_substr(request_number,'[^;]+',1,level) is not null;
end;
--END PROC_SENDREQDETAILS; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:23:53.477

可能与此相关：[Can I tokenize a string using t-SQL](https://stackoverflow.com/questions/11861181/can-i-tokenize-a-string-using-t-sql)

您可以使用 XML 查询来标记值：

```
INSERT INTO t
(cod, name)
VALUES
('T1;T2;',
 'Pencil Box;Eraser;');

---------------------------
|COD   |NAME              |
|T1;T2;|Pencil Box;Eraser;|
---------------------------

INSERT t2
SELECT
  CAST('<r>'+REPLACE(cod,';','</r><r>')+'</r>' AS XML).query('/r[1]').value('.','varchar(256)') cod,
  CAST('<r>'+REPLACE(name,';','</r><r>')+'</r>' AS XML).query('/r[1]').value('.','varchar(256)') name
FROM t;

INSERT t2
SELECT
  CAST('<r>'+REPLACE(cod,';','</r><r>')+'</r>' AS XML).query('/r[2]').value('.','varchar(256)') cod,
  CAST('<r>'+REPLACE(name,';','</r><r>')+'</r>' AS XML).query('/r[2]').value('.','varchar(256)') name
FROM t;

----------------
|COD|NAME      |
|T1 |Pencil Box|
|T2 |Eraser    |
---------------- 
```

[http://sqlfiddle.com/#!3/258a5/1](http://sqlfiddle.com/#!3/258a5/1)

# javascript - 拖放javascript事件

> ID：15238949
> 
> 赞同：5
> 
> 时间：2013-03-06T04:23:48.910
> 
> 标签：javascript

我是一个 java 人，正在尝试使用 javascript，需要一些帮助。[我在Mozilla 教程](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)中遇到了一个关于图像上传的精彩教程，需要一些帮助来解决这个问题。我目前正在研究拖放图像上传功能。每次我将图像拖到我的区域时，鼠标都会变为绿色，因此它被激活。但是，当我放手时，它应该会向我发送一条警报，提示已找到一张图像。但是它总是只提醒 0。所以数组的大小是 0。有什么想法吗？谢谢参观。我尝试过的没有成功...

1.  将教程中的代码完全复制并粘贴到我的 javascript 文件中
2.  移动代码以将侦听器添加到函数外部并加载到窗口中
3.  我拥有的每个浏览器

...

```
function toggleStrideMedia()
{
    if(getDisplay("strideMediaWrapper") == "" || getDisplay("strideMediaWrapper") == "none")
    {
        show("strideMediaWrapper");

        getElement("strideMediaDropZone").addEventListener("dragenter", dragenter, false);
        getElement("strideMediaDropZone").addEventListener("dragover", dragover, false);
        getElement("strideMediaDropZone").addEventListener("drop", drop, false);

    }
    else
    {
        hide("strideMediaWrapper");
    }
}

function dragenter(e) 
{
    e.stopPropagation();
    e.preventDefault();
}

function dragover(e) 
{
    e.stopPropagation();
    e.preventDefault();
} 

function drop(e) 
{
    e.stopPropagation();
    e.preventDefault();

    var dt = e.dataTransfer;
    var files = dt.files;

    // THIS SHOULD BE GIVING ME A ONE BUT IT ALWAYS GIVES ME A ZERO INSTEAD
    alert(files.length);

    handleFiles(files);
} 
```

.

**更新**- 小提琴结果

![在此处输入图像描述](../Images/0017a52317d343b0110ec74662d73c78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:42:21.060

**更新**
实际的问题是，如果您尝试将图像直接从一个 Web 浏览器选项卡拖放到这个基于 Web 的拖放界面，该事件将触发但不会删除任何文件。提问者在 OSX 上注意到了这个问题，我能够在 Windows 7 中复制相同的行为。

* * *

如果没有看到您的 HTML，很难说出您遇到了什么困难。如果未正确设置 ondragover/ondragenter 部分，则删除将不起作用，但您根本不会看到警报，您只会看到浏览器从本地文件系统呈现图像。这也意味着您几乎可以肯定成功地将 drop 事件添加到正确的元素。

试试这个小提琴，看看它是否适合你：http: [//jsfiddle.net/qey9G/4/](http://jsfiddle.net/qey9G/4/)

**HTML**

```
<div>
        <div id="dropzone" style="margin:30px; width:500px; height:300px; 
                                  border:1px dotted grey;">
               Drag & drop your file here...
        </div>
</div> 
```

**JavaScript**

```
var dropzone = document.getElementById("dropzone");

dropzone.ondragover = dropzone.ondragenter = function(event) {
    event.stopPropagation();
    event.preventDefault();
}

dropzone.ondrop= function drop(e) 
{
    e.stopPropagation();
    e.preventDefault();

    var dt = e.dataTransfer;
    var files = dt.files;

    alert(files.length);
} 
```

# multithreading - 未处理的异常停止winform应用程序中的所有线程？

> ID：15238957
> 
> 赞同：2
> 
> 时间：2013-03-06T04:24:12.607
> 
> 标签：multithreading, winforms, watchdog

我有一个多线程 winform 应用程序，在一个线程中我想通过套接字实现心跳，这个线程将心跳发送到看门狗应用程序。如果 winform 应用程序遇到任何未处理的异常，操作系统会弹出一个对话框。

我的问题是心跳线也会停止吗？这样我的看门狗应用程序就会检测到心跳停止了吗？这是实施看门狗的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:53:07.067

您可以注册[未处理的异常事件](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)并使用它向您的看门狗应用程序报告。它可以为心跳线程设置一个标志来检查，或者直接向看门狗应用程序发送消息。

# jquery - 确保使用 jQuery Validate 选中一组三个复选框中的至少一个

> ID：15238958
> 
> 赞同：0
> 
> 时间：2013-03-06T04:24:18.123
> 
> 标签：jquery, jquery-validate

我在大型表单上使用 jQuery Validate 插件，并且一直在使用 require_from_group 方法（[在之前发布之后](https://stackoverflow.com/questions/14883017/using-jquery-validate-plugin-to-ensure-at-least-one-of-three-checkboxes-is-check)）以确保至少选中一组三个复选框中的一个。

但是，我[遇到了一个问题](https://github.com/jzaefferer/jquery-validation/issues/412)，它会阻止其他规则起作用。我已经应用了一个[建议的补丁](https://stackoverflow.com/questions/11070245/jquery-validator-group-how-to-use-it/13127475#13127475)，但这似乎也不能正常工作（如上述 GitHub 问题中所述）。

所以我需要找到另一种方法来验证这组三个复选框字段（请注意，我需要专门针对这组三个复选框，因为我在表单上有其他不需要验证的复选框字段），但我现在不知道从哪里开始。我想我需要在我的 jQuery 验证代码中添加某种自定义规则，但我不确定现在从哪里开始，所以希望得到一些建议，谢谢。

这是我的起始 HTML（仅针对这个问题进行了基本介绍）：

```
<form class="my_form" method="post" action="/" >

  <div><ul class="form_errors"></ul></div>

  <label><input class="my_checkbox_group" id="my_checkbox_1" name="my_checkbox_1[]" type="checkbox" value="Yes"> My checkbox 1</label>
  <label><input class="my_checkbox_group" id="my_checkbox_2" name="my_checkbox_2[]" type="checkbox" value="Yes"> My checkbox 2</label>
  <label><input class="my_checkbox_group" id="my_checkbox_3" name="my_checkbox_3[]" type="checkbox" value="Yes"> My checkbox 3</label>

  <input type="submit" value="Submit" />

</form> 
```

这是我的起始 JS（这使得所有三个复选框都是强制性的，但我只想检查三个中的至少一个）：

```
$(".my_form").validate({
  errorLabelContainer: ".form_errors",
  wrapper: "li",
  rules: {
    'my_checkbox_1[]': { required: true },
    'my_checkbox_2[]': { required: true },
    'my_checkbox_3[]': { required: true }
  },
  messages: {
    'my_checkbox_1[]': "This field is required",
    'my_checkbox_2[]': "This field is required",
    'my_checkbox_3[]': "This field is required"
  }
}); 
```

**编辑1：**对不起，我应该添加每个复选框的名称属性不能相同。这些名称映射到 CMS 中的特定自定义字段名称，因此如果它们都相同，则在提交表单时字段中的值将无法正确保存。这也是我从不遵循[jQuery Validate 演示页面](http://jquery.bassistance.de/validate/demo/)上的第二个示例的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:36:48.037

尝试

**HTML**

你不必使用 different `name array attribute`，它可以像

```
<label><input class="my_checkbox_group" id="my_checkbox_1" name="my_checkbox[]" type="checkbox" value="Yes"> My checkbox 1</label>
<label><input class="my_checkbox_group" id="my_checkbox_2" name="my_checkbox[]" type="checkbox" value="Yes"> My checkbox 2</label>
<label><input class="my_checkbox_group" id="my_checkbox_3" name="my_checkbox[]" type="checkbox" value="Yes"> My checkbox 3</label> 
```

**脚本**

在`validate Plugin`

```
$('.my_form').validate( {
   errorLabelContainer: ".form_errors",
   wrapper: "li",
   rules: {
      "my_checkbox[]": {
          required: true,
          minlength: 1
   },
   messages: {
      'my_checkbox[]': "This field is required"          
   }
}); 
```

来自[http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)

在`simple Jquery`

```
var isChecked=false;
$('input.my_checkbox_group').each(function(){
   if($(this).is(':checked'))
   {
       isChecked=true;
   }
});
if(isChecked==false)
{
   alert("Please select a group");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T06:49:51.917

[我编写了一个自定义方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)来检查以确保三个复选框中的至少一个被勾选。

它*无需修改*您的任何属性`name`或`id`向 HTML 添加任何新内容即可完成工作。（但是，我清理了一些无效的 HTML。）

```
$.validator.addMethod("checkboxrule", function (value, element) {
    return ($('#my_checkbox_1').is(':checked') || $('#my_checkbox_2').is(':checked') || $('#my_checkbox_3').is(':checked'));
}, "Select at least one of these three"); 
```

**工作演示：http: [//jsfiddle.net/u4WM4/](http://jsfiddle.net/u4WM4/)**

我还使用了`groups`将三条消息合二为一的选项。（如果你想要三条消息，你可以简单地删除它。）

完整的 jQuery：

```
$(document).ready(function () {

    $.validator.addMethod("checkboxrule", function (value, element) {
        return ($('#my_checkbox_1').is(':checked') || $('#my_checkbox_2').is(':checked') || $('#my_checkbox_3').is(':checked'))
    }, "Select at least one of these three");

    $('.my_form').validate({ 
        errorLabelContainer: ".form_errors",
        wrapper: "li",
        groups: {
            somename: "my_checkbox_1[] my_checkbox_2[] my_checkbox_3[]"
        },
        rules: {
            'my_checkbox_1[]': {
                checkboxrule: true
            },
            'my_checkbox_2[]': {
                checkboxrule: true
            },
            'my_checkbox_3[]': {
                checkboxrule: true
            }
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T04:37:35.357

我认为您需要为此更改名称属性。需要为每个复选框设置相同的名称。

```
<label><input class="my_checkbox_group" id="my_checkbox_1" name="my_checkbox[]" type="checkbox" value="Yes"> My checkbox 1</label>
<label><input class="my_checkbox_group" id="my_checkbox_2" name="my_checkbox[]" type="checkbox" value="Yes"> My checkbox 2</label>
<label><input class="my_checkbox_group" id="my_checkbox_3" name="my_checkbox[]" type="checkbox" value="Yes"> My checkbox 3</label> 
```

**JS代码**

```
$(".my_form").validate({
  errorLabelContainer: ".form_errors",
  wrapper: "li",
  rules : {
        "my_checkbox[]" : {
            required : true,
            minlength : 1
        }
    },
    messages : {
        "my_checkbox[]" : {
            required : "must have checkbox selected",
            minlength : "atleast 1 checkbox should be checked"
        }
    }
}); 
```

# image - 强制图像与文本列在同一行

> ID：15238959
> 
> 赞同：2
> 
> 时间：2013-03-06T04:24:26.830
> 
> 标签：image, text, block, inline

我不确定我在这里做错了什么。我试图强制图像与几列文本位于同一行，但它会像这张图片一样不断向下移动：http: [//imgur.com/Hs43rXF](http://imgur.com/Hs43rXF)。左边的图像是我想要的样子，但我得到了正确的图像。

我已经尝试过 display:inline 和 floats，但都不起作用。这是我的代码：

```
.page {
margin-top:50px;
padding-left:50px;
padding-right:50px;
position:relative;
width:1000px;
height:450px;
}
.leftcolumn {
margin-top:50px;
margin-left:0px;
width: 250px;
}
.middlecolumn {
margin-left:300px;
margin-right:320px;
margin-top:50px;
float:left;
display:inline;
}
.verticalimage {
margin-right:0;
margin-top:0;
float:right;
display:inline;
vertical-align:middle;
}

<div class="page">
    <div class="leftcolumn">text <br> text <br> text</div>

    <div class="middlecolumn">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sit amet lorem velit. Nullam et metus eget nunc egestas laoreet et quis ligula. Vivamus lobortis sodales pulvinar. Nunc malesuada pretium ornare. Aliquam ut erat at magna pellentesque elementum. Fusce facilisis lorem et tortor euismod bibendum.</div>

    <img class="rightverticalimage" src="picture1.png"/>

</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:51:52.543

您在这里混合了几种不同的方法。首先，你可能已经注意到你的leftcolumn，如果你做一个div display:inline，它不会保持它的宽度。这是因为为了使用宽度或边距进行渲染，元素必须是块级的（默认情况下是 div）。此外，在中间列上设置左边距，左边 div 已经存在，将其左侧设置为容器内的 550px（leftcolumn 为 250，左边距为 300），边距和宽度是累积的。

那么有两种方法可以做到这一点（为简洁起见，我省略了你的额外边距）：

1.  使用浮点数：

    ```
    .leftcolumn
    {
        width: 250px;
        float:left;
    }

    .middlecolumn
    {
        width: 250px;
        float:left;
    } 
    ```

    这将使两个 div 保留为块元素，使它们可以正常运行，设置两列的宽度并继续围绕它们流动，因为图像是内联元素，它也将继续流动。然而，这种方法所做的只是让容器与图像元素一样高，因为浮动元素不会以相同的方式位于页面流中。

2.  使用显示：内联块

    ```
    .leftcolumn
    {
        display: inline-block;
        width: 250px;
    }

    .middlecolumn
    {
        display: inline-block;
        width: 250px;
    } 
    ```

    这会将 div 设置为内联块，允许您在它们上设置宽度，但将它们呈现为内联元素。这样做的好处是 .page 元素会自动获取 div 的高度。但它确实会中断 ie7，因为它不能正确呈现 inline-block 元素。

我故意将宽度添加到图像元素上，因为这两种方法都是相同的（只需设置 display:block 并使其浮动，或设置 display:inline-block）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:46:45.297

我为你试过这个。我把东西拿出来只是为了让你理解代码。您可以根据自己的喜好进行编辑。

CSS

```
.page {
margin:5%;
width:100%;
height:450px;
}

div {
width:25%;
margin-left:3%;
float:left;
background-color:red;} 
```

我将 BG 设置为红色，以便您可以看到 div 的开始和停止位置

HTML

```
<div class="page">

    <div>text <br /> text <br /> text</div>

    <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sit amet lorem velit. Nullam 

et metus eget nunc egestas laoreet et quis ligula. Vivamus lobortis sodales pulvinar. Nunc 

malesuada pretium ornare. Aliquam ut erat at magna pellentesque elementum. Fusce facilisis lorem 

et tortor euismod bibendum.</div>

<div>
    <img class="rightverticalimage" src="picture1.png"/>
</div>

</div> 
```

将 IMG 放在一个 div 中以帮助更好地控制它。

我还将 FIREBUG 下载到 Firefox 上，因为它有助于解决这些问题。

# cassandra - cqlsh 中的 RPC 超时 - Cassandra

> ID：15238970
> 
> 赞同：12
> 
> 时间：2013-03-06T04:25:24.147
> 
> 标签：cassandra, timeout, cql

我的环中有 5 个节点，其中`SimpleTopologyStrategy`和`replication_factor=3`。我使用压力工具插入了 1M 行。当我尝试使用 cqlsh 读取行数时

```
SELECT  count(*) FROM  Keyspace1.Standard1 limit 1000000; 
```

它失败并出现错误：

> 请求未在 rpc_timeout 内完成。

它获取限制 100000。即使 500000 也失败。
我所有的节点都已启动。我需要增加`rpc_timeout`吗？

请帮忙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-08-13T16:11:31.017

您收到此错误是因为请求在服务器端超时。应该知道，正如其他人所指出的，这在 Cassandra 中是一项非常昂贵的操作。

不过，如果您真的想这样做，您应该更新您的`/etc/cassandra/cassandra.yaml`文件并更改`range_request_timeout_in_ms`参数。这对您的所有范围查询都有效。

设置 40 秒超时的示例：

```
range_request_timeout_in_ms: 40000 
```

您可能还必须在客户端进行调整。当`cqlsh`作为客户端使用时，这是通过在下创建/更新 cqlsh 的配置文件`~/.cassandra/cqlshrc`并将`client_timeout`参数添加到该`connection`部分来完成的。

设置 40 秒超时的示例：

```
[connection]
client_timeout=40 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T08:08:10.530

读取 1M 行需要很长时间，所以这可能就是它超时的原因。你不应该像这样使用 count ，它非常昂贵，因为它必须读取所有数据。如果您需要计算大量项目，请使用 Cassandra 计数器。

您还应该检查您的 Cassandra 日志以确认没有任何其他问题 - 有时 Cassandra 中的异常会导致客户端超时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-28T08:57:17.667

如果您可以接受近似的行数，请查看[Cassandra 中列族的行数的](https://stackoverflow.com/a/14447193/58994)答案。

# qt - 如何为 Qt 小部件设置相对位置？

> ID：15238973
> 
> 赞同：1
> 
> 时间：2013-03-06T04:25:32.917
> 
> 标签：qt

我一直在四处搜索并阅读有关移动小部件的文档，但我仍在寻找一个很好的例子。

我有一个用热键显示的小部件，我希望它在 MainWindow 的其他位置而不是中心弹出。如果我使用 move()，那么无论它的父窗口是否改变位置，小部件都会保持在该位置。我希望将小部件放置在父小部件内部的某个位置，以便在移动父小部件时，它保持在相对位置。我该怎么做呢？

我阅读了有关 MapToParent 的信息，但我不确定如何使用它。我试过了：

```
QPoint fD_p = fDialog->pos();
QPoint parent_fD_p = QWidget::mapToParent(fD_p);
fDialog->move(parent_fD_p); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:59:14.977

您应该在您的父小部件中重新实现移动事件处理程序， `void QWidget::moveEvent ( QMoveEvent * event )`并且可能重新实现调整大小事件处理程序。

在这些事件处理程序中，您可以重新计算小部件的新位置，然后移动它。

`mapToParent`和`mapFromParent`方法转换相对坐标。从文档中：

```
QPoint QWidget::mapFromParent ( const QPoint & pos ) const
Translates the parent widget coordinate pos to widget coordinates.

Same as mapFromGlobal() if the widget has no parent. 
```

# jquery - jquery 延迟异步方法

> ID：15238974
> 
> 赞同：0
> 
> 时间：2013-03-06T04:25:34.283
> 
> 标签：jquery, jquery-deferred

我有一个内部进行 ajax 调用并具有成功和失败回调方法的函数。

```
function dothis() {
    object.getMyData(x,y,successCallback,failureCallback);
} 
```

该函数立即返回，因为 getMyData 是异步的。现在我希望函数 dothis 等到 successCallback 或 failureCallback 被执行。如何使用 deferred 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:43:41.050

`ajax`已经返回一个 deferred，所以你可以使用它。可以更改`getMyData`返回的延迟`ajax`返回吗？

```
function getMyData() {
    return ajax({
        // ajax params
    });
}

function dothis() {
    // return deferred which comes from ajax
    return object.getMyData(x,y,successCallback,failureCallback); 
}

dothis().done(function(){
    // do something on success
}).fail(function(){
    // do something on failure
}); 
```

如果您无法更改`getMyData`以返回延迟，您可以这样做：

```
function dothis() {
    var dfd = $.Deferred();
    object.getMyData(x,y,function(){
        dfd.resolve(); // success
    },function(){
        dfd.reject();  // fail
    });
    return dfd.promise(); 
}

dothis().done(function(){
    // do something on success
}).fail(function(){
    // do something on failure
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:30:55.260

看起来您不需要异步调用。

您是否尝试进行同步调用然后执行成功/失败功能？请说清楚。

谢谢，

@leo

同步调用示例>

```
$.ajax({
        type: "GET",
        url: remote_url,
        async: false,
        success : function(data) {
            remote = data;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:37:20.687

我更喜欢你使用 jquery deferred 的 $.when 和 $.then 组合。

你可以访问[这个](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)

您也可以在[stackoverflow](https://stackoverflow.com/questions/4869609/how-can-jquery-deferred-be-used)中找到相关答案。

# jquery - 用于限制数字的 html5 模式

> ID：15238977
> 
> 赞同：1
> 
> 时间：2013-03-06T04:25:51.370
> 
> 标签：jquery, css, html

在此字段中，我们可以输入 10 位数的手机号码。

```
<input type="text" id="mnumber" placeholder="Mobile number:"
       title="Mobile Number" pattern="[0-9]{10}" required> 
```

但我也需要禁止用户输入`9999999999`号码。是否可以使用 html5 模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T05:05:14.940

尝试

```
<input type="text" 
       id="mnumber" 
       placeholder="Mobile number:" 
       title="Mobile Number" 
       pattern="(?![9]{10})[0-9]{10}"
       required> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:56:15.943

在您的正则表达式中，使用前瞻断言。

```
(?!9999999999)\d{10} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T05:30:53.063

html5限制数字输入

```
<form>
<input type="text" pattern="[^0-9]+" title="Numbers are not allowed">
<input type="submit">
</form> 
```

# c++ - SSE3内在函数：如何找到大量浮点数的最大值

> ID：15238978
> 
> 赞同：7
> 
> 时间：2013-03-06T04:26:00.430
> 
> 标签：c++, sse, intrinsics

我有以下代码来找到最大值

```
int length = 2000;
float *data;
// data is allocated and initialized

float max = 0.0;
for(int i = 0; i < length; i++)
{
   if(data[i] > max)
   {
      max = data;
   }
} 
```

我尝试使用 SSE3 内在函数对其进行矢量化，但我对应该如何进行比较感到有点震惊。

```
int length = 2000;
float *data;
// data is allocated and initialized

float max = 0.0;
// for time being just assume that length is always mod 4
for(int i = 0; i < length; i+=4)
{
  __m128 a = _mm_loadu_ps(data[i]);
  __m128 b = _mm_load1_ps(max);

  __m128 gt = _mm_cmpgt_ps(a,b);

  // Kinda of struck on what to do next
} 
```

任何人都可以给出一些想法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T04:43:21.923

因此，您的代码会在固定长度的浮点数数组中找到最大值。好的。

有 _mm_max_ps，它为您提供来自两个向量的成对最大值，每个向量有四个浮点数。那么这个怎么样？

```
int length = 2000;
float *data; // maybe you should just use the SSE type here to avoid copying later
// data is allocated and initialized

// for time being just assume that length is always mod 4
__m128 max = _mm_loadu_ps(data); // load the first 4
for(int i = 4; i < length; i+=4)
{
  __m128 cur = _mm_loadu_ps(data + i);
  max = _mm_max_ps(max, cur);
} 
```

最后，获取其中四个值中的最大值`max`（参见[Getting max value in a __m128i vector with SSE?](https://stackoverflow.com/questions/9877700/getting-max-value-in-a-m128i-vector-with-sse) for that）。

它应该以这种方式工作：

步骤1：

```
[43, 29, 58, 94] (this is max)
[82, 83, 10, 88]
[19, 39, 85, 77] 
```

第2步：

```
[82, 83, 58, 94] (this is max)
[19, 39, 85, 77] 
```

第2步：

```
[82, 83, 85, 94] (this is max) 
```

# r - 我需要在 R 的数据框中“二值化”一些数据

> ID：15238984
> 
> 赞同：6
> 
> 时间：2013-03-06T04:26:32.350
> 
> 标签：r

我有一个数据框，我想对前 56 列中的每个数据点进行二值化，条件是如果值大于 0，则将其设置为 1，否则设置为 0。有没有简单的方法做这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T04:31:40.953

使用矢量化`ifelse`您可以：

```
 m[,1:56] <- ifelse(m[,1:56] > 0,1,0) 
```

例如，我们可以在小矩阵中进行测试：

```
 m <- matrix(sample(c(-2,2),5*3,rep=T),ncol=5,nrow=3,byrow=T)
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]    2    2    2    2   -2
[2,]    2    2   -2    2   -2
[3,]    2    2    2    2    2
> m[,2:5] <- ifelse(m[,2:5] > 0,1,0)
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]    2    1    1    1    0
[2,]    2    1    0    1    0
[3,]    2    1    1    1    1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T04:35:37.260

您可以利用`TRUE`and`FALSE`等于 "1" 和 "0" 的事实并执行以下操作：

```
set.seed(1)
mydf <- data.frame(matrix(rnorm(100), nrow = 10))
mydf[, 1:5] <- (mydf[, 1:5] > 0) + 0
mydf
#    X1 X2 X3 X4 X5         X6          X7           X8         X9        X10
# 1   0  1  1  1  0  0.3981059  2.40161776  0.475509529 -0.5686687 -0.5425200
# 2   1  1  1  0  0 -0.6120264 -0.03924000 -0.709946431 -0.1351786  1.2078678
# 3   0  0  1  1  1  0.3411197  0.68973936  0.610726353  1.1780870  1.1604026
# 4   1  0  0  0  1 -1.1293631  0.02800216 -0.934097632 -1.5235668  0.7002136
# 5   1  1  1  0  0  1.4330237 -0.74327321 -1.253633400  0.5939462  1.5868335
# 6   0  0  0  0  0  1.9803999  0.18879230  0.291446236  0.3329504  0.5584864
# 7   1  0  0  0  1 -0.3672215 -1.80495863 -0.443291873  1.0630998 -1.2765922
# 8   1  1  0  0  1 -1.0441346  1.46555486  0.001105352 -0.3041839 -0.5732654
# 9   1  1  0  1  0  0.5697196  0.15325334  0.074341324  0.3700188 -1.2246126
# 10  0  1  1  1  1 -0.1350546  2.17261167 -0.589520946  0.2670988 -0.4734006 
```

的想法`+0`只是将`TRUE`和的逻辑值强制`FALSE`为它们的数字等价物。如果您正在处理矩阵中的*所有*列并且使用了`as.numeric(mydf > 0)`，则必须将结果向量重新转换为矩阵。但是，在这种情况下，这非常有效（正如@Dason 所指出的那样）。

```
mydf[, 1:5] <- as.numeric(mydf[, 1:5] > 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T05:25:45.000

一种使用`pmin`和的方法`pmax`。（不是很推荐）

```
pmin(pmax(m[,2:5], 0),1) 
```

但它允许添加一些基准测试

```
ag <- function() ifelse(m[,2:5] > 0,1,0)
mn <- function()pmin(pmax(m[,2:5], 0),1)
am <- function()  (m[, 2:5] > 0) + 0
am2 <- function()  as.numeric((m[, 2:5] > 0))

library(microbenchmark)
microbenchmark(ag(),mn(), am(), am2())
## Unit: microseconds
##   expr    min     lq  median      uq     max neval
##   ag() 19.888 20.712 21.9375 22.6430  39.548   100
##   mn() 50.135 51.172 52.2530 53.1055 113.854   100
##   am()  3.076  3.406  4.1755  4.6030   7.912   100
##  am2()  2.623  2.989  3.4640  4.0135   6.995   100 
```

@AnandaMahto 的解决方案显然是赢家，而且`as.numeric`方法更快！

# asp.net - 想从 ASP.NET 页面打开 MS Word、Excel、PowerPoint

> ID：15238987
> 
> 赞同：0
> 
> 时间：2013-03-06T04:26:43.900
> 
> 标签：asp.net, ole

我想创建一个网站，为此提供 Office 自动化（MS Word、Excel、PowerPoint）的培训，假设我有一个网页显示有关 MS Word 的问题，让问题是“在 word 文档中键入单词'stackoverflow'并制作大胆吗？” 网页将有一个名为“开始练习测试”的按钮，当用户单击此按钮时，它将在他的 PC 上打开 MS Office Word，他将相应地执行问题，一旦完成，用户将再次来到页面并单击“结束测试”，当他单击结束测试时，无论他在该文档中所做的任何事情都将受到监控并相应地给出标记。

我可以使用 OLE 脚本在 Windows 应用程序中做同样的事情，但我想对基于 Web 的系统做同样的事情，我搜索了很多，我知道 OLE 不适用于基于 Web 的系统。

那么是否有任何**开源**工具/API/插件会做同样的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:08:05.223

这与您的想法大不相同。你有两个选择：

1.  通过富客户端框架模拟 MS Word
2.  使用一些 Active-X 控件

1 和 2 都不是很健壮，需要付出很多努力。

更好的解决方案是一个独立的应用程序 (exe)，它可以根据需要与 Web 服务对话（在后台交换数据）。

# matlab - 如何画一条锯齿线？

> ID：15238990
> 
> 赞同：1
> 
> 时间：2013-03-06T04:26:56.603
> 
> 标签：matlab, graph, plot

matlab怎么画出锯齿线？该图就像一把锯子，斜率相同，但峰值不同。

例如：

```
Peak #   Start        End
1        (0.2,2.2)    (1.5,0)
2        (1.5,3)      (3.27,0)
3        (3.27,1.2)   (3.98,0)
etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:56:44.080

只需使用`plot`您的点的 x 和 y 坐标：

```
x = [0.2 1.5 1.5 3.27 3.27 3.98];
y = [2.2 0 3 0 1.2 0];
plot(x, y) 
```

除非你不想要垂直线？你可以这样做：

```
x = [0.2 1.5 nan 1.5 3.27 nan 3.27 3.98];
y = [2.2 0 nan 3 0 nan 1.2 0];
plot(x, y) 
```

# java - Java - 是否存在协变和逆变？

> ID：15238997
> 
> 赞同：2
> 
> 时间：2013-03-06T04:27:48.917
> 
> 标签：java, generics, covariance, contravariance

前几天，当谈到泛型和协变/逆变时，我有点困惑。我知道 C# 指定协变/逆变类型参数，但在 Java 中真的有类似的概念吗？

我了解您可以声明：

```
List<? extends String> l = ...
List<? super String> l2 =... 
```

现在 l 可以获取列表`MyString`，不允许添加方法等。而 l2 可以获取`List<Object>`并向其添加 String，但无法获取任何元素，如此处所述[Covariance- contravariance in Java](https://stackoverflow.com/questions/2501023/demonstrate-covariance-and-contravariance-in-java)。然而，这只是简单地声明一个带有接受子类型/超类型的类型参数的 List，而不是执行“适当的”协方差，例如：

```
Iterable<Animal> a = new Iterable<Dog>(); 
```

我感到困惑还是 Java 根本不支持正确的协方差定义？谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-06T04:54:24.420

Java 的类型变化是在使用站点，而不是在声明站点。假设我们有一个类型声明

```
interface List<E> 
```

我们可以协变地使用它（在原始语法中）

```
List<+Animal> animals = new ArrayList<Dog>(); 
```

类型变量上的`+`注释使参数化类型协变。

这一点也不坏。我们也可以有逆反`List<-Animal>`。它更灵活。

不幸的是，Java 设计者高估了 Java 程序员的愚蠢，他们认为单字母符号 +/- 会让我们发疯；我们必须看到英语单词才能理解发生了什么。仍然是在 Java 中庆祝冗长的时候。所以我们得到了这个语法

```
List<? extends Animal> 
```

我认为它绝对是迟钝的。