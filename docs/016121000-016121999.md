# StackOverflow 问答 16121000-16121999

# python - BeautifulSoup 中关于 get_text() 的建议

> ID：16121001
> 
> 赞同：12
> 
> 时间：2013-04-20T13:41:03.930
> 
> 标签：python, beautifulsoup

我正在使用 BeautifulSoup 来解析 html 页面中的一些内容。

我可以从 html 中提取我想要的内容（即包含在myclass中`span`定义的文本）。`class`

```
result = mycontent.find(attrs={'class':'myclass'}) 
```

我得到这个结果：

```
<span class="myclass">Lorem ipsum<br/>dolor sit amet,<br/>consectetur...</span> 
```

如果我尝试使用以下方法提取文本：

```
result.get_text() 
```

我得到：

```
Lorem ipsumdolor sit amet,consectetur... 
```

正如您所看到的，当标签`<br>`被删除时，内容之间不再有空格，并且两个单词被连接起来。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-20T13:53:11.773

如果您使用的是 bs4，则可以使用[`strings`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)：

```
" ".join(result.strings) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-20T13:47:27.423

使用 'contents' ，然后替换`<br>`?

这是一个完整的（工作的，经过测试的）示例：

```
from bs4 import BeautifulSoup
import urllib2

url="http://www.floris.us/SO/bstest.html"
page=urllib2.urlopen(url)
soup = BeautifulSoup(page.read())

result = soup.find(attrs={'class':'myclass'})
print "The result of soup.find:"
print result

print "\nresult.contents:"
print result.contents
print "\nresult.get_text():"
print result.get_text()
for r in result:
  if (r.string is None):
    r.string = ' '

print "\nAfter replacing all the 'None' with ' ':"
print result.get_text() 
```

结果：

```
The result of soup.find:
<span class="myclass">Lorem ipsum<br/>dolor sit amet,<br/>consectetur...</span>

result.contents:
[u'Lorem ipsum', <br/>, u'dolor sit amet,', <br/>, u'consectetur...']

result.get_text():
Lorem ipsumdolor sit amet,consectetur...

After replacing all the 'None' with ' ':
Lorem ipsum dolor sit amet, consectetur... 
```

这比 Sean 的非常紧凑的解决方案更复杂——但既然我说过我会按照我在可能的情况下指出的路线创建和测试一个解决方案，我决定兑现我的承诺。你可以更好地看到这里发生了什么——`<br/>`它是元组中自己的元素`result.contents`，但是当转换为字符串时，“什么都没有”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-28T09:59:03.517

`result.get_text(separator=" ")`应该管用。

# windows-8 - 更新使用 DirectX 9 for Windows 8 Store 的代码（SafeSEH 标志）

> ID：16121002
> 
> 赞同：1
> 
> 时间：2013-04-20T13:41:37.910
> 
> 标签：windows-8, directx, windows-store-apps, compatibility

我有使用`DirectX 9`. 我需要更新我的应用程序，需要使用标志`Windows 8 Store`进行编译。`SafeSEH`它仅适用于`DirectX 11 SDK`，但我的应用程序没有`d3dx9`使用它。我被发现了`DirectXTK`，`DirectXTex`并且`DirectXMath`库具有类似的功能。在不损坏旧平台（只有旧版本的`DirectX 9`运行时）的情况下更新代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:21:35.107

似乎`DirectX 9`代码必须用`DirectX 11`, cause `DirectXTK`,重写`DirectXTex`，`DirectXMath`libs 仅适用于 DX11。我在[http://social.msdn.microsoft.com/Forums/en-US/wingameswithdirectx/thread/c082b208-0d95-4c41-852f-9450340093f4/找到了更多信息](http://social.msdn.microsoft.com/Forums/en-US/wingameswithdirectx/thread/c082b208-0d95-4c41-852f-9450340093f4/)

# javascript - 连接到 AWS-SDK 时的 Node.js 303 永久重定向

> ID：16121016
> 
> 赞同：3
> 
> 时间：2013-04-20T13:42:50.193
> 
> 标签：javascript, node.js, amazon-web-services, amazon-s3, http-status-code-301

下午好，

我正在尝试建立与我的 aws 产品 api 的连接，但是我不断收到 301 永久重定向错误，如下所示：

```
{ [PermanentRedirect: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.]
  message: 'The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.',
  code: 'PermanentRedirect',
  name: 'PermanentRedirect',
  statusCode: 301,
  retryable: false } 
```

我用来连接 API 的代码如下：

```
var aws = require('aws-sdk');

//Setting up the AWS API
aws.config.update({
    accessKeyId: 'KEY',
    secretAccessKey: 'SECRET',
    region: 'eu-west-1'
})

var s3 = new aws.S3();

s3.createBucket({Bucket: 'myBucket'}, function() {
    var params = {Bucket: 'myBucket', Key: 'myKey', Body: 'Hello!'};
    s3.putObject(params, function(err, data) {
        if (err)
            console.log(err)
        else
            console.log("Successfully uploaded data to myBucket/myKey");
    });
}); 
```

如果我尝试使用不同的区域，比如 us-west-1，我会得到同样的错误。

我究竟做错了什么？

非常感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T21:50:21.170

我已经解决了这个问题：

你必须确保你已经创建了一个同名的存储桶；在这种情况下，存储桶的名称将是“myBucket”。

```
s3.createBucket({Bucket: 'myBucket'}, function() {
var params = {Bucket: 'myBucket', Key: 'myKey', Body: 'Hello!'}; 
```

创建存储桶后，转到属性并查看它正在使用的区域 - 将其添加到：

```
aws.config.update({
    accessKeyId: 'KEY',
    secretAccessKey: 'SECRET',
    region: 'eu-west-1'
}) 
```

现在它应该工作了！最好的祝愿

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-30T19:42:08.557

我刚刚遇到这个问题，我相信[http://aws.amazon.com/sdkfornodejs/](http://aws.amazon.com/sdkfornodejs/)上的示例是不正确的。

演示代码的问题是存储桶名称应为小写 - [http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html)

如果演示实际上在 s3.createBucket 的回调中输出 err 参数，这将立即显而易见。

此外，存储桶名称在您创建它们的区域中必须是唯一的。

```
s3.createBucket({Bucket: 'mylowercaseuniquelynamedtestbucket'}, function(err) {

    if(err){
        console.info(err);
    }else{
        var params = {Bucket: 'mylowercaseuniquelynamedtestbucket', Key: 'testKey', Body: 'Hello!'};
        s3.putObject(params, function(err, data) {
            if (err)
                console.log(err)
            else
                console.log("Successfully uploaded data to testBucket/testKey");
        });
    }

 }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-24T23:24:52.233

被这个卡住了一段时间...

在我的配置文件中设置区域名称或将其留空都没有解决问题。我遇到了谈论解决方案的要点，这很简单：

鉴于：

```
var AWS = require('aws-sdk'); 
```

在实例化 S3 对象之前，请执行以下操作：

```
AWS.config.update({"region": "us-west-2"}) //replacing your region there 
```

然后我可以毫无问题地调用以下内容：

```
var storage = new AWS.S3();
var params = {
                Bucket: config.aws.s3_bucket,
                Key: name,
                ACL:'authenticated-read',
                Body: data
            }
storage.putObject(params, function(storage_err, data){...}) 
```

# postgis - 无法通过 raster2pgsql 导入栅格数据

> ID：16121018
> 
> 赞同：1
> 
> 时间：2013-04-20T13:43:00.987
> 
> 标签：postgis, geoserver

我是 postgis 的新手，我无法通过 raster2pgsql。问题是：

我想使用 raster2pgsql 导入光栅 (.tif) 文件。但是运行命令后：

```
raster2pgsql -s 4326 -I -C -M c:\Users\Dell\Desktop\rastergeo.tif -F -t 512*512 public.demelevation > elev.sql 
```

我收到错误消息：

> 拒绝访问

任何人都可以从一开始就指导我吗？

我正在使用地理服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T17:10:40.743

您对尝试写入 elev.sql 的文件夹没有写入权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T18:54:55.827

更改您的命令以包含更具体的路径来保存您的文件。例如，如果您要将其保存在与原始栅格相同的位置，您会将其保存到...

```
raster2pgsql -s 4326 -I -C -M c:\Users\Dell\Desktop\rastergeo.tif -F -t 512*512 public.demelevation > c:\Users\Dell\Desktop\elev.sql 
```

而不是尝试保存到`raster2pgsql`正在运行的目录中，可能是在 postgres/ *verNum* /bin 中——您可能没有权限。

# java - 从 DLL 到 java 类

> ID：16121019
> 
> 赞同：0
> 
> 时间：2013-04-20T13:43:09.523
> 
> 标签：java, dll, java-native-interface, native-code

我有一个控制设备的 dll 文件，我需要一个工具来生成 java 类，该类将 dll 文件作为输入并生成所有需要的 JNI 类。

注意：我没有该 DLL 的 C、C++ 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:08:45.943

我相信您正在做这一切，以便您可以通过 Java 调用 C++ 方法。而是使用 JNA 库。它不需要构建任何显式的 JNI 类。您可以直接调用 C++ 方法。[在此处](https://jna.java.net/)阅读有关它的更多信息

# ios - 突出显示时，表格单元格中的 iOS 自定义按钮变暗

> ID：16121021
> 
> 赞同：0
> 
> 时间：2013-04-20T13:43:24.567
> 
> 标签：ios, button, tableview, cell

我在最后添加了一个按钮`UITableViewCell`。突出显示时，我有一个自定义突出显示层，最后是透明的。但是，该按钮仍然变暗，尽管它仍在工作。但是用户可以得到它已经变得不活跃的想法。我希望按钮保持原样，即使单元格突出显示。我想了解按钮变暗的原因和方式，即使突出显示层在那里完全透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:42:38.603

这会找到按钮并将其突出显示状态设置为 NO。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
for(UIView *views in cell.subviews)
{
    if(views.tag == indexPath.row){
        for(UIButton *deKnop in views.subviews)
        {
            deKnop.highlighted = NO;
        }
    }
    //if ( [views isKindOfClass:[UIButton class]] ) {
        //do your code
        //[subviews setImage:[UIImage imageNamed:@"PENCIL.png"] forState:UIControlStateHighlighted];
    //}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:00:59.803

[UITableViewCell 中的 UIButton](https://stackoverflow.com/questions/4331967/uibutton-in-uitableviewcell)

覆盖一些东西来解决这个问题。

我试过了，但我不知道如何让“yourButton”成为单元格中的按钮？

# mysql - 计算移动平均线 MySQL？

> ID：16121023
> 
> 赞同：18
> 
> 时间：2013-04-20T13:43:44.083
> 
> 标签：mysql, sql, database

再会，

我正在使用以下代码来计算 9 天移动平均线。

```
SELECT SUM(close)
FROM tbl
WHERE date <= '2002-07-05'
AND name_id = 2
ORDER BY date DESC
LIMIT 9 
```

但它不起作用，因为它在调用限制之前首先计算所有返回的字段。换句话说，它将计算该日期之前或等于该日期的所有收盘价，而不仅仅是最后 9 个收盘价。

所以我需要从返回的选择中计算 SUM，而不是直接计算。

IE。从 SELECT... 中选择 SUM

现在我将如何去做这件事，它是非常昂贵的还是有更好的方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-20T14:49:27.953

如果您想要每个日期的移动平均值，请尝试以下操作：

```
SELECT date, SUM(close),
       (select avg(close) from tbl t2 where t2.name_id = t.name_id and datediff(t2.date, t.date) <= 9
       ) as mvgAvg
FROM tbl t
WHERE date <= '2002-07-05' and
      name_id = 2
GROUP BY date
ORDER BY date DESC 
```

它使用相关子查询来计算 9 个值的平均值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-05-10T08:16:06.003

从 MySQL 8 开始，您应该为此使用窗口函数。使用window`RANGE`子句，可以在一个区间内创建一个[逻辑窗口](https://blog.jooq.org/2016/10/31/a-little-known-sql-feature-use-logical-windowing-to-aggregate-sliding-ranges/)，功能非常强大。像这样的东西：

```
SELECT
  date,
  close,
  AVG (close) OVER (ORDER BY date DESC RANGE INTERVAL 9 DAY PRECEDING)
FROM tbl
WHERE date <= DATE '2002-07-05'
AND name_id = 2
ORDER BY date DESC 
```

例如：

```
WITH t (date, `close`) AS (
  SELECT DATE '2020-01-01', 50 UNION ALL
  SELECT DATE '2020-01-03', 54 UNION ALL
  SELECT DATE '2020-01-05', 51 UNION ALL
  SELECT DATE '2020-01-12', 49 UNION ALL
  SELECT DATE '2020-01-13', 59 UNION ALL
  SELECT DATE '2020-01-15', 30 UNION ALL
  SELECT DATE '2020-01-17', 35 UNION ALL
  SELECT DATE '2020-01-18', 39 UNION ALL
  SELECT DATE '2020-01-19', 47 UNION ALL
  SELECT DATE '2020-01-26', 50
)
SELECT
  date,
  `close`,
  COUNT(*) OVER w AS c,
  SUM(`close`) OVER w AS s,
  AVG(`close`) OVER w AS a
FROM t
WINDOW w AS (ORDER BY date DESC RANGE INTERVAL 9 DAY PRECEDING)
ORDER BY date DESC 
```

导致：

```
date      |close|c|s  |a      |
----------|-----|-|---|-------|
2020-01-26|   50|1| 50|50.0000|
2020-01-19|   47|2| 97|48.5000|
2020-01-18|   39|3|136|45.3333|
2020-01-17|   35|4|171|42.7500|
2020-01-15|   30|4|151|37.7500|
2020-01-13|   59|5|210|42.0000|
2020-01-12|   49|6|259|43.1667|
2020-01-05|   51|3|159|53.0000|
2020-01-03|   54|3|154|51.3333|
2020-01-01|   50|3|155|51.6667| 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-20T13:53:37.157

使用类似的东西

```
SELECT 
  sum(close) as sum,
  avg(close) as average
FROM (
    SELECT 
      (close)
    FROM 
      tbl
    WHERE 
      date <= '2002-07-05'
      AND name_id = 2
    ORDER BY 
      date DESC
    LIMIT 9 ) temp 
```

内部查询按`desc`顺序返回所有过滤的行，然后你`avg`，`sum`向上返回这些行。

你给定的原因`query`不起作用的原因`sum`是首先计算 并且在已经计算`LIMIT`之后应用子句，给你所有存在的行`sum``sum`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-06T13:31:15.170

另一种技术是做一个表：

```
CREATE TABLE `tinyint_asc` (
 `value` tinyint(3) unsigned NOT NULL default '0',
 PRIMARY KEY (value)
) ;
​
INSERT INTO `tinyint_asc` VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12),(13),(14),(15),(16),(17),(18),(19),(20),(21),(22),(23),(24),(25),(26),(27),(28),(29),(30),(31),(32),(33),(34),(35),(36),(37),(38),(39),(40),(41),(42),(43),(44),(45),(46),(47),(48),(49),(50),(51),(52),(53),(54),(55),(56),(57),(58),(59),(60),(61),(62),(63),(64),(65),(66),(67),(68),(69),(70),(71),(72),(73),(74),(75),(76),(77),(78),(79),(80),(81),(82),(83),(84),(85),(86),(87),(88),(89),(90),(91),(92),(93),(94),(95),(96),(97),(98),(99),(100),(101),(102),(103),(104),(105),(106),(107),(108),(109),(110),(111),(112),(113),(114),(115),(116),(117),(118),(119),(120),(121),(122),(123),(124),(125),(126),(127),(128),(129),(130),(131),(132),(133),(134),(135),(136),(137),(138),(139),(140),(141),(142),(143),(144),(145),(146),(147),(148),(149),(150),(151),(152),(153),(154),(155),(156),(157),(158),(159),(160),(161),(162),(163),(164),(165),(166),(167),(168),(169),(170),(171),(172),(173),(174),(175),(176),(177),(178),(179),(180),(181),(182),(183),(184),(185),(186),(187),(188),(189),(190),(191),(192),(193),(194),(195),(196),(197),(198),(199),(200),(201),(202),(203),(204),(205),(206),(207),(208),(209),(210),(211),(212),(213),(214),(215),(216),(217),(218),(219),(220),(221),(222),(223),(224),(225),(226),(227),(228),(229),(230),(231),(232),(233),(234),(235),(236),(237),(238),(239),(240),(241),(242),(243),(244),(245),(246),(247),(248),(249),(250),(251),(252),(253),(254),(255); 
```

之后你可以这样使用它：

```
select date_add(tbl.date, interval tinyint_asc.value day) as mydate, count(*), sum(myvalue)
from tbl inner join tinyint_asc.value <= 30 -- for a 30 day moving average
where date(date_add(o.created_at, interval tinyint_asc.value day)) between '2016-01-01' and current_date()
group by mydate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-23T19:49:49.437

这个查询很快：

```
select date, name_id,
case @i when name_id then @i:=name_id else (@i:=name_id)
and (@n:=0)
and (@a0:=0) and (@a1:=0) and (@a2:=0) and (@a3:=0) and (@a4:=0) and (@a5:=0) and (@a6:=0) and (@a7:=0) and (@a8:=0)
end as a,
case @n when 9 then @n:=9 else @n:=@n+1 end as n,
@a0:=@a1,@a1:=@a2,@a2:=@a3,@a3:=@a4,@a4:=@a5,@a5:=@a6,@a6:=@a7,@a7:=@a8,@a8:=close,
(@a0+@a1+@a2+@a3+@a4+@a5+@a6+@a7+@a8)/@n as av
from tbl,
(select @i:=0, @n:=0,
        @a0:=0, @a1:=0, @a2:=0, @a3:=0, @a4:=0, @a5:=0, @a6:=0, @a7:=0, @a8:=0) a
where name_id=2
order by name_id, date 
```

如果您需要平均超过 50 或 100 个值，编写起来很乏味，但值得付出努力。速度接近有序选择。

# c++ - 如何在 Qt 中处理来自另一个线程的信号泛滥

> ID：16121024
> 
> 赞同：3
> 
> 时间：2013-04-20T13:44:04.190
> 
> 标签：c++, multithreading, qt, video-streaming, kinect

tl; dr：我有一个 QThread，只要有新数据可供处理，它就会向主线程发送一个信号。然后主线程获取、处理和显示数据。数据到达的频率更高，主线程能够对其进行处理，从而导致 GUI 冻结并最终导致堆栈溢出（耶！）。

**细节**

我的应用程序从相机获取帧以进行处理和显示。当新帧可用时，相机会通过 windows 事件进行通知。我有一个线程定期检查这些事件并在新帧可供抓取时通知主线程：

```
void Worker::run()
{
    running_ = true;

    while (running_)
    {
        if (WaitForSingleObject(nextColorFrameEvent, 0) == WAIT_OBJECT_0)        
            emit signalColorFrame();        

        usleep(15);
    }
} 
```

`signalColorFrame`连接到`Camera`类中的插槽，该插槽从相机获取帧，进行一些处理并将其发送到将`MainWindow`其绘制到屏幕上。

```
void Camera::onNewColorFrame()
{    
    getFrameFromCamera();
    processFrame();
    drawFrame();
} 
```

现在，如果该方法在下一帧可用之前完成，则一切正常。尽管`Camera`该类在处理前一帧之前接收到新信号，但随着处理变得更加复杂。

我的解决方案是在处理时阻止来自工作线程的信号，并强制偶数循环在两者之间运行`QCoreApplication::processEvents()`：

```
void Camera::onNewColorFrame()
{   
    worker_->blockSignals(true)
    getFrameFromCamera();
    processFrame();
    drawFrame();
    QCoreApplication::processEvents(); // this is essential for the GUI to remain responsive
    worker_->blockSignals(false);
} 
```

这看起来像是一个好方法吗？有人可以提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T13:49:21.530

我认为在您解决技术方面的问题之前，您应该考虑考虑应用程序的设计方面。有几种方法可以解决您的问题，但首先您应该决定如何处理您没有时间在主线程中处理的帧。您是要跳过它们还是保存以供以后处理，但是您应该意识到处理队列仍然必须具有一定的大小限制，因此您无论如何都应该决定如何处理“超出范围”的数据。

在这种情况下，我个人更喜欢制作一些中间容器来保存在某处接收到的数据，因此您的相机处理线程只需通知收集器接收到的数据，然后收集器决定它是否要存储或跳过数据。一旦有时间访问收集器，主循环就会以 fetchNext() 或 fetchAll() 形式访问，具体取决于您的需要并实现对象处理。

# web - 网络应用，SAAS？

> ID：16121025
> 
> 赞同：1
> 
> 时间：2013-04-20T13:44:05.443
> 
> 标签：web, cloud, saas

我试图理解“真正的 SAAS 是什么”。它是软件即服务，hotmail Outlook 是 SAAS 的一个例子。但我仍然很困惑。假设，我构建了一个网络应用程序“医院管理系统”，它记录了所有患者的所有信息，它是一种软件即服务吗？作为软件即服务需要哪些具体的东西，或者只是一个网络应用程序是一个 SAAS ？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T02:13:14.880

如果一个软件被部署和管理以从同一个部署中为多个用户（这里的租户是术语）提供服务，那么它就是 SAAS。这意味着该软件不会部署在客户端，也不必是每个租户一个。

如果您将医院管理系统部署在您的基础设施中并且多家医院使用它们，就好像您为每个医院创建了一个一样，您的医院管理系统将是一个 SAAS。

以下是一些有助于更好理解的链接。

[用于在云上构建企业 Web (RIA) 应用程序的数据库架构（单个数据库与客户端特定数据库）](https://stackoverflow.com/questions/15683213/databse-architecture-single-db-vs-client-specific-db-for-building-enterprise-w/15697362#15697362)

[SaaS 成熟度模型级别 4 中的租户负载均衡器说明](https://stackoverflow.com/questions/16382787/explanation-of-tenant-load-balancer-in-saas-maturity-model-level-4/16826807#16826807)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-22T11:28:42.193

Web 应用程序（尤其是在线和基于浏览器的应用程序服务）需要很大的灵活性来适应不断变化的用户需求。SoftLayer 的基础架构使您可以定制高度可扩展的解决方案，非常适合满足当今的需求，而不会影响成本效率或扩展速度。可以即时添加 Web、应用程序和数据库服务器的线性堆栈，以便在需要更多资源时精确满足需求。

# google-mirror-api - 我可以与 Glassware 联系人分享视频吗？

> ID：16121031
> 
> 赞同：1
> 
> 时间：2013-04-20T13:45:11.150
> 
> 标签：google-mirror-api

我没有看到任何关于它的文档，所以我认为在这里询问是合适的。

开发人员能否利用玻璃拍摄的视频？用户可以与服务共享视频吗？如果是这样，API 响应是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:29:49.650

根据[https://developers.google.com/glass/v1/reference/timeline/attachments/insert](https://developers.google.com/glass/v1/reference/timeline/attachments/insert)接受的媒体 MIME 类型是图像/*、音频/* 和视频/*，所以我认为这是可能的并且附件可以像照片一样访问。

# sql - 无法在 Oracle sql 的表格中插入日期

> ID：16121032
> 
> 赞同：0
> 
> 时间：2013-04-20T13:45:14.743
> 
> 标签：sql, oracle

我是 SQL 编程的新手，我创建了一个表，我想在其中插入一个日期，例如

```
create table person (
   PANr integer not null,
   name Varchar(10),
   HNr integer not null,
   stuff_date date,
   constraint P_NR primary key (PANr)
); 
```

插入 Personen 值 ('4711','Andreas''15','31.10.1958');

表的创建工作，但插入命令给出了这个错误：

```
 SQL Error: ORA-01843: not a valid month
  01843\. 00000 -  "not a valid month" 
```

任何想法这里有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T13:47:17.827

使用`TO_DATE('31.10.1958', 'DD.MM.YYYY')`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:30:26.060

你有另一个错误。

```
insert into person
values
('4711','Andreas''15','31.10.1958'); 
```

首先，你引用你的整数值。这可能会或可能不会导致问题，但这是一个坏主意。其次，Andreas 和 15 之间需要一个逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T14:50:01.253

如果您不想使用该`TO_DATE`功能，可以使用以下方法：

```
ALTER SESSION SET nls_date_format='yyyy-mm-dd'; 
```

现在，您的插入语句将如下所示：

```
INSERT INTO PERSONEN VALUES('4711','Andreas','15','1958-10-31'); 
```

如果您想更具体，可以像这样定义日期格式：

```
ALTER SESSION SET nls_date_format='yyyy-mm-dd hh24:mi:ss'; 
```

PS 请注意@Dan Bracuk 的回答。

# java - JDBC Statement接口——executeUpdate查询

> ID：16121036
> 
> 赞同：0
> 
> 时间：2013-04-20T13:45:25.083
> 
> 标签：java, jdbc

```
import java.sql.*;
class ConnectionTest {
    public static void main(String... args)throws Exception {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        Connection con = DriverManager.getConnection("Jdbc:Odbc:myjdbc1", "sri", "tiger");
        System.out.println(con);
        Statement st = con.createStatement();
        System.out.println(st);
        String query = "delete logindetails";
        int count = st.executeUpdate(query);
        if(count == 0) 
        System.out.println("no records to delete");
        else 
        System.out.println("deleted successfullly");
        con.close();
    }
} 
```

你好世界..！！我的问题是.. 在删除所有行后分配给整数变量`count`的值是什么.. 如果我的表中已经有 0 行并且没有删除任何行，它会分配什么..？`int count = st.executeUpdate(query);`

非常感谢详细的解释。
PS菜鸟在这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:52:34.687

executeUpdate(query) 返回受影响的行数，这意味着如果表中没有行，则返回 0，如果表中有行，则返回表的总行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T13:49:20.653

来自[官方文档](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)：返回：SQL 数据操作语言（例如 INSERT、UPDATE 或 DELETE）语句的**行数**或不返回任何内容的 SQL 语句的**0**

@更新

它分配删除的行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T13:56:49.580

**回报：** 要么

**(1)** SQL 数据操作语言 (DML) 语句的行数或

**(2)** 0 表示不返回任何内容的 SQL 语句

# sql - 从 JSP 执行 SQL 查询

> ID：16121038
> 
> 赞同：0
> 
> 时间：2013-04-20T13:45:57.330
> 
> 标签：sql, jsp, jdbc

我有一个 sql 查询：`select name || 'hh' from table;`

如何在 JDBC 中使用相同的语句？

```
String sql = "SELECT username || 'hh' from dba_users";   -----> not working
PreparedStatement stmt  = conn.prepareStatement (sql); 
```

# c# - Windows 应用商店应用程序会话

> ID：16121039
> 
> 赞同：2
> 
> 时间：2013-04-20T13:46:05.533
> 
> 标签：c#, windows-store-apps

我正在开发 Windows 商店应用程序。我需要在 c# 中为应用程序创建会话。如何在 Windows 商店应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:55:03.307

以下文章将最好地帮助您管理会话

[管理应用生命周期和状态（使用 C#/VB 和 XAML 的 Windows 应用商店应用）](http://msdn.microsoft.com/en-in/library/windows/apps/hh986968.aspx)

它是系列的第 2 部分。浏览整个系列可能是值得的

# google-chrome-extension - Chrome 扩展高 CPU 负载：如何配置文件？

> ID：16121050
> 
> 赞同：0
> 
> 时间：2013-04-20T13:47:30.707
> 
> 标签：google-chrome-extension

我的 chrome 扩展程序由内容脚本、背景页面（非持久性）和浏览器操作组成。随机地，它开始像这样吃 CPU：

![在此处输入图像描述](https://i.stack.imgur.com/TmHRr.png)

但是如何找到我的扩展程序的哪一部分占用了 CPU？是内容脚本、处理某些事件的背景页面还是浏览器操作中的 javascript 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:04:39.900

内容脚本在选项卡的进程中运行。背景页面、浏览器操作/页面操作弹出窗口和其他扩展页面在扩展的进程中运行。

您的后台页面可能正在消耗大量 CPU（如果该进程在关闭弹出窗口后仍然占用 CPU）。要查找原因，[请打开后台页面的开发人员工具](https://stackoverflow.com/a/10258029/938089?where-to-read-console-messages-from-background-js-in-a-chrome-extension)，然后开始[进行分析](https://developers.google.com/chrome-developer-tools/docs/profiles)（请参阅[CPU 分析](https://developers.google.com/chrome-developer-tools/docs/cpu-profiling)）。

# python - Python文件未关闭

> ID：16121053
> 
> 赞同：3
> 
> 时间：2013-04-20T13:47:40.050
> 
> 标签：python, file, file-io, python-2.7

我编写了一个程序来对少量数据进行一些处理。其中涉及三个步骤：

1.  读取数据
2.  做处理
3.  将数据写入文件。

在运行代码的前两个步骤成功完成。（由于我的笔记本电脑配置数据量很大，我正在使用 linux 中的交换空间来完成这项工作）。

现在第三步：数据写入文件成功。但是我的代码卡在了这条线上`feat.close()`（壮举是文件指针）。当我在进程运行时打开文件时，正在写入完整的数据，但我的文件没有关闭。

代码：

```
#!/usr/bin/env python

from __future__ import print_function
import pickle
import sys
import numpy as np
import posTagsToTriGramFrequency as pt
import itertools
import gc

if sys.argv[1] == '-h':
    print("Usage: ./featureSelection <n(authorLimit)> <k(SD weight)> <nGramSize> <folder>")
    sys.exit()

n = int(sys.argv[1])
k = int(sys.argv[2])
nGramSize = int(sys.argv[3])
folder = sys.argv[4]

print('reading features')
feat = open('../../../../dataDump/'+ folder +'/features.dump','r')
features = {}

tagsnGram = [tuple(x) for x in itertools.product(pt.getTags(), repeat=nGramSize)]

gramdict = {}
for gram in tagsnGram:
    gramdict[gram] = []

flag = 1
author = ''
for line in feat:
    if(line == '\n'):
        flag = 1
    elif flag == 1:
        author = line.split('/')[-1][:-1]
        print(line, end='')
        features[author] = gramdict.copy()
        flag = 0
    else:
        tagsFreq = iter(line.split())
        for tag in tagsnGram:
            features[author][tag].append(float(tagsFreq.next()))

feat.close()

print('Calculating waht to delete')

nflag = 0
kflag = 0
toDel = []
for tagGram in tagsnGram:
    nflag = 0
    for author in features:
        kflag = 0
        for doc in features[author][tagGram]:
            if doc == 0 : kflag += 1
            if kflag >= k:
                nflag += 1
                break
        if nflag >= n:
            toDel.append(tagGram)
            break

for item in toDel:
    for author in features:
        del features[author][item]

f = open('../../../../dataDump/'+ folder +'/tagsInfo.dump','w')
f.write('k:' + str(k) + ',\t n:' + str(n) + '\n')
f.write('Deleted tags:\n')
for item in toDel:
    f.write(str(item) + ' ')
f.write('\n\nSelected Tags:\n')
for tagGram in features.itervalues().next():
        f.write(str(tagGram) + ' ')
f.close()

print("Writing Back Features")
feat = open('../../../../dataDump/'+ folder +'/selectedFeatures.dump','w')
for author in features.keys():
    feat.write(author + '\n')
    print(author)
    for tag in features[author]:
        for doc in features[author][tag]:
            feat.write(str(doc) + ' ')
        feat.write('\n')
    feat.write('\n')
    del features[author]
    #gc.collect()
print('Closing File')
feat.close() 
```

**见最后一行。在我的控制台`Closing file`上正在打印，但之后我的代码被卡住了。**

我的控制台输出：

```
abhi@abhi-me~/Projects/workspace/irProject/completepythonbased/authAttrib (irProject)>>./featureSelection.py 35 125 3 3GramFreq
reading features
Ajit_Popat
Mukund_Mehta
Parajit_Patel
Priyadarshi
Kumarpad_Desai
Bhaven_Kacchi
Shantibhai_Agrawat
Pravin_Darji
Ankit_Trivedi
Sharad_Rawal
Tushar_Shukla
Chandrakant_Mehta
Jay_Vasavda
Dolat_Bhatt
Munindra
Mrugesh_Vaishnav
Kulinchandra_Yagnik
Zaverilal_Mehta
Priti_Shah
Vasant_Mistri
Vatsal_Vasani
Dinesh_Mistri
Devesh_Mehta
Dhaval_Mehta
Urvish_Kothari
Madhusudan_Parekh
Vihari_Chaya
Virendra_Kapoor
Mukul_Choksi
Joravarsinh_Jadav
Ashok_Dave
Nasir_Ismaeli
Joban_Pandit
Priyakant_Parikh
Sudarshan_Upadhyay
Gajendra_Shah
Altaf_Patel
Bhalchandra_Jani
Shashin
Hansal_Bhachech
Calculating waht to delete
Writing Back Features
Pravin_Darji
Ajit_Popat
Kulinchandra_Yagnik
Sharad_Rawal
Madhusudan_Parekh
Shantibhai_Agrawat
Gajendra_Shah
Hansal_Bhachech
Vihari_Chaya
Virendra_Kapoor
Sudarshan_Upadhyay
Priyadarshi
Tushar_Shukla
Dolat_Bhatt
Urvish_Kothari
Vasant_Mistri
Mukund_Mehta
Zaverilal_Mehta
Kumarpad_Desai
Vatsal_Vasani
Bhaven_Kacchi
Mrugesh_Vaishnav
Bhalchandra_Jani
Priyakant_Parikh
Chandrakant_Mehta
Mukul_Choksi
Joravarsinh_Jadav
Munindra
Joban_Pandit
Devesh_Mehta
Priti_Shah
Ankit_Trivedi
Dinesh_Mistri
Dhaval_Mehta
Ashok_Dave
Nasir_Ismaeli
Parajit_Patel
Jay_Vasavda
Altaf_Patel
Shashin
Closing File
^C
[1]+  Killed                  ./featureSelection.py 35 125 3 3GramFreq 
```

为什么会这样？

*[你可以在这里](https://docs.google.com/file/d/0B9rBcMmY_5QURmR5SnM4RlFPQnM/edit?usp=sharing)找到 strace 。*

**编辑：** 我试图在关闭后打印一些东西并且它正在打印，这意味着问题在于退出程序。它使用了大约 3 GB 的 RAM 和 3 GB 的交换空间 @Justing。填充这个内存需要 10-20 分钟，清除这个内存我等了大约 2 小时，我认为有问题。 **我上传了上面的strace，请看。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:51:41.110

完成写入后，尝试使用`with`哪个将刷新到磁盘：

```
with open('file.txt', 'r') as f:
     data = f.read()
f.closed 
```

请参阅 python[文档](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)。它应该可以解决写入和读取文件时的大部分问题。

# iphone - 移动自定义注释以显示用户位置

> ID：16121058
> 
> 赞同：1
> 
> 时间：2013-04-20T13:48:07.253
> 
> 标签：iphone, ios, objective-c, mkmapview, core-location

我已经`mapview`用我的自定义注释视图替换了用户位置的蓝点，我怎样才能让我的自定义注释像默认的蓝点一样跟随用户的位置？当我用我的自定义注释替换蓝点或简单地创建`MKAnnoationView`时，它会停止与用户一起移动。在`viewForAnnotation`mapview 的委托方法中，我正在做

```
pinView = [[MKAnnotationView alloc]
                  initWithAnnotation:annotation reuseIdentifier:defaultPinID];
        pinView.image = [UIImage imageNamed:@"newgreen2.png"];

        [mapView.userLocation setTitle:@"I am here"]; 

return pinView 
```

这显示了一个带有 newgreen2 图像的图钉，但它没有移动，但如果我在这个委托方法中返回 nil，默认情况下会出现蓝点，它会随着用户的位置移动。是否有任何技巧可以为我的自定义注释视图模拟用户位置的默认蓝点行为？我注意到`viewForAnnotation`它只被调用一次，然后蓝点会自动开始跟踪用户的位置。

有什么方法可以告诉我的注释视图跟随用户的位置？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T07:03:10.440

我们有两个链接在这里可能会有所帮助
[如何将 MKMapView 的用户位置蓝点更改为选择的图像？](https://stackoverflow.com/questions/6293432/how-to-change-mkmapviews-user-location-blue-dot-to-an-image-of-choice)

和

[在 iPhone 上的 MKMapView 中移动注释时避免闪烁](https://stackoverflow.com/questions/3514359/avoid-flicker-when-moving-annotations-in-a-mkmapview-on-iphone)

请检查一下。

# node.js - Node.js - 删除静态文件连接时的内存泄漏（静态文件）

> ID：16121059
> 
> 赞同：0
> 
> 时间：2013-04-20T13:48:26.413
> 
> 标签：node.js, file, memory, static, express

当我阻止文件完全加载时出现内存泄漏。例如

`<script type="text/javascript" src="http://mydomain.com/js/lib.js"></script>`

```
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. 
Use emitter.setMaxListeners() to increase limit.
Trace
    at Socket.EventEmitter.addListener (events.js:160:15)
    at Socket.Readable.on (_stream_readable.js:663:33)
    at Socket.EventEmitter.once (events.js:179:8)
    at TCP.onread (net.js:527:26) 
```

当我删除这条线时，我停止了内存泄漏：

```
app.use(express.static(__dirname + '/public'))); 
```

我该如何尝试解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:57:36.253

我通过使用 nginx 提供静态文件解决了这个问题！可能只是一个临时解决方案，但它有效。

# wordpress - 如何将登录用户重定向到 buddypress 和 wordpress 中的自定义页面

> ID：16121077
> 
> 赞同：0
> 
> 时间：2013-04-20T13:50:44.423
> 
> 标签：wordpress, buddypress

我也在尝试将每个登录的用户重定向到他们个人资料的特定页面...参见这个示例页面..这个网站是建立在 wp 和 bp 上的。我正在使用 BP 配置文件作为登录用户重定向的主页插件...这请参阅此代码...

```
function bp_profile_homepage()
{
   global $bp;
   $selected_role = get_option('bpahp_role_choice');
   if($selected_role == '')
   {
       if(is_user_logged_in() && bp_is_front_page())
       {
            wp_redirect( $bp->loggedin_user->domain );
       }
   }
   else
   {
       if(!current_user_can($selected_role) && bp_is_front_page())
       {

            wp_redirect( $bp->loggedin_user->domain );
       }
   }
} 
```

因此，使用此插件后，我可以在我的用户登录时自动将他们重定向到他们的个人资料页面.. [http://www.example.com/members/admin/](http://www.example.com/members/admin/)

但我想将它们重定向到此页面

[http://www.example.com/members/admin/activity/all-activity/](http://www.example.com/members/admin/activity/all-activity/)

所有活动都是活动目录的子页面，我在其中向全站用户显示所有活动。

所以任何想法在这段代码中添加什么 wp_redirect( $bp->loggedin_user->domain );

使其符合我的要求..我已经尝试了很多技巧来使我的要求可行但没有成功..我还尝试替换此代码

```
wp_redirect( $bp->loggedin_user->domain ); 
```

有了这个... $redirect_url = "$bp->loggedin_user->domain/activity/all-activity/";
wp_redirect($redirect_url);

和这个

```
$redirect_url = "activity/all-activity/";   
    wp_redirect( $bp->loggedin_user->domain/$redirect_url ); 
```

没有任何工作请有人帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:58:02.633

关于什么：

`wp_redirect( $bp->loggedin_user->domain . '/activity/all-activity/' );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-03T04:17:45.017

下面的代码用于在登录后将使用重定向到 buddypress 个人资料页面

```
function bp_help_redirect_to_profile(){
  global $bp;
  if( is_user_logged_in() && is_front_page() ) {
   bp_core_redirect( get_option('home') . '/members/' . 
   bp_core_get_username( bp_loggedin_user_id() ) . '/profile' );
  }
}
add_action( 'get_header', 'bp_help_redirect_to_profile',1); 
```

# wpf - cannot find static resource for DataGridTextColumn</a></h1> <div class="ml12 aside-cta flex--item print:d-none sm:ml0 sm:mb12 sm:order-first sm:as-end"> <a href="https://stackoverflow.com/questions/ask" target="_blank" class="ws-nowrap s-btn s-btn__primary">问问题</a></div> </div> <div class="d-flex fw-wrap pb8 mb16 bb bc-black-075"> <div class="flex--item ws-nowrap mr16 mb8"> <span class="fc-light mr2"></span> </div> <div class="flex--item ws-nowrap mr16 mb8" title="2022-04-17 15:46:40Z"> <span class="fc-light mr2">问问题</span> <time itemprop="dateCreated" datetime="2013-04-20T13:51:12.517">2013-04-20T13:51:12.517</time> </div> <div class="flex--item ws-nowrap mb8" title="Viewed 6 times"> <span class="fc-light mr2"></span> 770 次 </div> </div> <div id="mainbar" role="main" aria-label="question and answers"> <div class="question" data-questionid="4" data-position-on-page="0" data-score="763" id="question"> <div class="post-layout"> <div class="votecell post-layout--left"> <div class="js-voting-container d-flex jc-center fd-column ai-stretch gs4 fc-black-200" data-post-id="4"> <button class="js-vote-up-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-peeufs8c"> <svg aria-hidden="true" class="svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 25h32L18 9 2 25Z"></path></svg> </button> <div id="--stacks-s-tooltip-peeufs8c" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This question shows research effort; it is useful and clear<div class="s-popover--arrow"></div></div> <div class="js-vote-count flex--item d-flex fd-column ai-center fc-black-500 fs-title" itemprop="upvoteCount" data-value=""> 0 </div> <button class="js-vote-down-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-04106eqn"> <svg aria-hidden="true" class="svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 11h32L18 27 2 11Z"></path></svg> </button><div id="--stacks-s-tooltip-04106eqn" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This question does not show any research effort; it is unclear or not useful<div class="s-popover--arrow"></div></div> <div id="--stacks-s-tooltip-tgvwendx" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">Bookmark this question.<div class="s-popover--arrow"></div></div> <a class="js-post-issue flex--item s-btn s-btn__unset c-pointer py6 mx-auto" data-shortcut="T" data-ks-title="timeline" data-controller="s-tooltip" data-s-tooltip-placement="right" aria-label="Timeline" aria-describedby="--stacks-s-tooltip-abwmy15k"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4h3L3 9Zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5Z"></path></svg></a><div id="--stacks-s-tooltip-abwmy15k" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">Show activity on this post.<div class="s-popover--arrow"></div></div> </div> </div> <div class="postcell post-layout--right"> <div class="s-prose js-post-body" itemprop="text"> <p>I have a WPF DataGrid showing a DataGridTextColumn with numbers. If the value is negative, I would like to display it in red.</p>&#xA;&#xA;<p>My code compiles, but I get a run time error:</p>&#xA;&#xA;<blockquote>&#xA; <p>"Cannot find resource named 'PlusBlackMinusRedConverter'. Resource&#xA; names are case sensitive."</p>&#xA;</blockquote>&#xA;&#xA;<p>I am sure the converter is in Window.Resources, but my guess is that when the DataGrid constructs the DataCell, it cannot find Window.Resources. Just a guess.</p>&#xA;&#xA;<p>Does anyone know what is the real reason and how to make it work ?</p>&#xA;&#xA;<p>XAML:</p>&#xA;&#xA;<pre><code>&lt;Window x:Class="MyNameSpace.MainWindow"&#xA; xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"&#xA; xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"&#xA; xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"&#xA; xmlns:MyNameSpace="clr-namespace:MyNameSpace"&gt;&#xA;&#xA; &lt;Window.Resources&gt;&#xA; &lt;MyNameSpace:TextDoubleToPlusBlackMinusRedConverter x:Key="PlusBlackMinusRedConverter " /&gt;&#xA; &lt;/Window.Resources&gt;&#xA;&#xA; &lt;DockPanel&gt;&#xA; &lt;DataGrid Name="stocksDataGrid"&#xA; IsReadOnly="True"&#xA; AutoGenerateColumns="False"&gt;&#xA; &lt;DataGrid.Columns&gt;&#xA; &lt;DataGridTextColumn Binding="{Binding Path=Trend, StringFormat=P}"&#xA; Header="Trend"&gt;&#xA; &lt;DataGridTextColumn.ElementStyle&gt;&#xA; &lt;Style&gt;&#xA; &lt;Setter Property="TextBlock.Foreground"&#xA; Value="{Binding Path=Text, Converter={StaticResource PlusBlackMinusRedConverter }}" /&gt;&#xA; &lt;/Style&gt;&#xA; &lt;/DataGridTextColumn.ElementStyle&gt;&#xA; &lt;/DataGridTextColumn&gt;&#xA; &lt;/DataGrid.Columns&gt;&#xA; &lt;/DataGrid&gt;&#xA; &lt;/DockPanel&gt;&#xA;&lt;/Window&gt;&#xA;</code></pre>&#xA;&#xA;<p>Code:</p>&#xA;&#xA;<pre><code>using System;&#xA;using System.Globalization;&#xA;using System.Windows.Data;&#xA;&#xA;&#xA;namespace MyNameSpace {&#xA; public class TextDoubleToPlusBlackMinusRedConverter: IValueConverter {&#xA;&#xA; public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {&#xA; if (value is string){&#xA; double valueDouble;&#xA; if (double.TryParse((string)value, out valueDouble)){&#xA; if (valueDouble&lt;0){&#xA; return "Red";&#xA; } else {&#xA; return "Black";&#xA; }&#xA; }&#xA; }&#xA; return "Gray";&#xA; }&#xA;&#xA;&#xA; public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {&#xA; throw new NotImplementedException();&#xA; }&#xA; }&#xA;}&#xA;</code></pre>&#xA; </div> <div class="mt24 mb12"> <div class="post-taglist d-flex gs4 gsy fd-column"> <div class="d-flex ps-relative fw-wrap"> <a href="/tags/wpf" class="post-tag js-gps-track" title="show questions tagged 'wpf'" rel="tag">wpf</a><a href="/tags/xaml" class="post-tag js-gps-track" title="show questions tagged 'xaml'" rel="tag">xaml</a><a href="/tags/wpfdatagrid" class="post-tag js-gps-track" title="show questions tagged 'wpfdatagrid'" rel="tag">wpfdatagrid</a> </div> </div> </div> </div> <span class="d-none" itemprop="commentCount">4</span> </div> </div> <div class="js-zone-container zone-container-responsive"> <div id="dfp-isb" class="everyonelovesstackoverflow everyoneloves__inline-sidebar mx-auto" style="min-height: auto; height: auto; display: none;"></div> <div class="js-report-ad-button-container mx-auto" style="width: 300px"></div> </div> <div id="answers"> <a name="tab-top"></a> <div id="answers-header"> <div class="answers-subheader d-flex ai-center mb8"> <div class="flex--item fl1"> <h2 class="mb0" data-answercount=""> 1 回答 <span style="display:none;" itemprop="answerCount">1</span> </h2> </div> </div> </div> <a name="7"></a> <div id="answer-7" class="answer js-answer accepted-answer" data-answerid="7" data-parentid="4" data-score="506" data-position-on-page="1" data-highest-scored="1" data-question-has-accepted-highest-score="1" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer"> <div class="post-layout"> <div class="votecell post-layout--left"> <div class="js-voting-container d-flex jc-center fd-column ai-stretch gs4 fc-black-200" data-post-id="7"> <button class="js-vote-up-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-dgvag2l3"> <svg aria-hidden="true" class="svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 25h32L18 9 2 25Z"></path></svg> </button><div id="--stacks-s-tooltip-dgvag2l3" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This answer is useful<div class="s-popover--arrow"></div></div> <div class="js-vote-count flex--item d-flex fd-column ai-center fc-black-500 fs-title" itemprop="upvoteCount" data-value="1"> 1 </div> <button class="js-vote-down-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-gn8ppsfv"> <svg aria-hidden="true" class="svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 11h32L18 27 2 11Z"></path></svg> </button> </div> </div> <div class="answercell post-layout--right"> <div class="s-prose js-post-body" itemprop="text"> <p>资源名称后有一个不必要的空格。</p> <p>将其更改为以下代码：</p> <pre><code>&lt;MyNameSpace:TextDoubleToPlusBlackMinusRedConverter x:Key="PlusBlackMinusRedConverter"/&gt; </code></pre> </div> <div class="mt24"> <div class="user-action-time" style="color:#999;text-align:right;">于 2013-04-20T18:26:54.637 回答</div> </div> </div> </div> </div></div> </div> <div id="sidebar" class="show-votes" role="complementary" aria-label="sidebar"> <div class="module sidebar-related"> <h4 id="h-related">Related</h4> <div class="related js-gps-related-questions" data-tracker="rq=1"> <div class="spacer"> <a href="/questions/15965660" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/15965660" class="question-hyperlink">spring - Bean 名称“contact”的 BindingResult 和普通目标对象都不能用作请求属性</a> </div><div class="spacer"> <a href="/questions/15965662" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/15965662" class="question-hyperlink">c - udp 套接字中接收缓冲区/队列的最大大小</a> </div><div class="spacer"> <a href="/questions/15965663" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">4</div> </a> <a href="/questions/15965663" class="question-hyperlink">ios - UITableViewCell 中的 UIButton 从 UITableView 窃取触摸</a> </div><div class="spacer"> <a href="/questions/15965665" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/15965665" class="question-hyperlink">c# - 便携式图书馆的本地化</a> </div><div class="spacer"> <a href="/questions/15965667" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/15965667" class="question-hyperlink">ios - CoreData 关系保存问题</a> </div><div class="spacer"> <a href="/questions/15965671" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/15965671" class="question-hyperlink">visual-studio-2010 - 在 UIMap.cs 中驱动的编码 UI 测试数据</a> </div><div class="spacer"> <a href="/questions/15965674" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/15965674" class="question-hyperlink">c++ - 如何在 C++ OpenCv 中使用向量点？</a> </div><div class="spacer"> <a href="/questions/15965675" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/15965675" class="question-hyperlink">themes - Liferay 从 CE 版迁移到企业版：无法在控制面板中切换主题</a> </div><div class="spacer"> <a href="/questions/15965683" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/15965683" class="question-hyperlink">bash - AIX 特殊键</a> </div><div class="spacer"> <a href="/questions/15965685" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/15965685" class="question-hyperlink">macos - Mac OS X 的核心动画工具？</a> </div> </div> </div> <div class="module js-gps-related-tags" id="related-tags"> <h4 id="h-related-tags">Reference</h4> <div data-name="javascript"> <a href="https://php.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">php</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">1429865</span> </span> </div> <div data-name="javascript"> <a href="https://c-cpp.com" class="post-tag no-tag-menu js-gps-track" target="_blank">c/c++</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">756500</span> </span> </div> <div data-name="javascript"> <a href="https://nginx.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">nginx</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49975</span> </span> </div> <div data-name="javascript"> <a href="https://mongodb.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">mongodb</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">159057</span> </span> </div> <div data-name="javascript"> <a href="https://mybatis.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">mybatis</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">3233</span> </span> </div> <div data-name="javascript"> <a href="https://anaconda.org.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">anaconda</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">13410</span> </span> </div> <div data-name="javascript"> <a href="https://pycharm.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">pycharm</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">14671</span> </span> </div> <div data-name="javascript"> <a href="https://python.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">python</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">1902243</span> </span> </div> <div data-name="javascript"> <a href="https://vscode.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">vscode</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">56040</span> </span> </div> <div data-name="javascript"> <a href="https://dockerdocs.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">docker</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">110988</span> </span> </div> <div data-name="javascript"> <a href="https://github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">github</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49000</span> </span> </div> <div data-name="javascript"> <a href="https://flask.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">flask</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49129</span> </span> </div> <div data-name="javascript"> <a href="https://ffmpeg.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">ffmpeg</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">24037</span> </span> </div> <div data-name="javascript"> <a href="https://jmeter.net" class="post-tag no-tag-menu js-gps-track" target="_blank">jmeter</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">16910</span> </span> </div> <div data-name="javascript"> <a href="https://matplotlib.net" class="post-tag no-tag-menu js-gps-track" target="_blank">matplotlib</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">63493</span> </span> </div> <div data-name="javascript"> <a href="https://getbootstrap.net" class="post-tag no-tag-menu js-gps-track" target="_blank">bootstrap</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">54641</span> </span> </div> </div> </div> </div> </div> </div> </div> <footer id="footer" class="site-footer js-footer" role="contentinfo"> <div class="site-footer--container"> <div class="site-footer--logo"> <a href="https://stackoverflow.com"><svg aria-hidden="true" class="native svg-icon iconLogoGlyphMd" width="32" height="37" viewBox="0 0 32 37"><path d="M26 33v-9h4v13H0V24h4v9h22Z" fill="#BCBBBB"/><path d="m21.5 0-2.7 2 9.9 13.3 2.7-2L21.5 0ZM26 18.4 13.3 7.8l2.1-2.5 12.7 10.6-2.1 2.5ZM9.1 15.2l15 7 1.4-3-15-7-1.4 3Zm14 10.79.68-2.95-16.1-3.35L7 23l16.1 2.99ZM23 30H7v-3h16v3Z" fill="#F48024"/></svg></a> </div> <nav class="site-footer--nav"> <div class="site-footer--col"> <h5 class="-title"><a href="https://stackoverflow.org.cn" class="js-gps-track" data-gps-track="footer.click({ location: 3, link: 15})">Stack Overflow 中文网</a></h5> <p>遵从 CC BY-SA 知识共享许可协议。</p> </div> </nav> </div> </footer> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?709ff2ad9744e86b5b0eee677fc13ede"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-1MW5BV8G8E"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-1MW5BV8G8E'); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6117966252207595" crossorigin="anonymous"></script> </body> </html>

> ID：16121080
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# java - Using logic inside a switch statement

> ID：16121082
> 
> 赞同：6
> 
> 时间：2013-04-20T13:51:24.290
> 
> 标签：java, switch-statement

My question is related to the following code:

```
public static void main(String[] args) {

    // Find Prime Numbers from 0 to 100
    int i;
    for (i=2; i <= 100; i++) {
        int j = 2;
        boolean iPrime = true;

        //The following line gives incorrect results, but should execute faster
        //  while ((iPrime = true) && (j < (i / 2 + 1))) {
        //The following line gives correct results but performs un-necessary operations
        //by continuing to calculate after the number is found to be "not prime"
        while (j < (i / 2 + 1)) {

            j++;
            if ((i % j) == 0) {
                iPrime = false;
                //System.out.println(j + " is a factor of " + i);
            }
        }
        if (iPrime) {
            System.out.println(i + " is a prime number!");
        }
    }
} 
```

Now, as I've commented in the code, what I'm trying to achieve is a faster execution of my program by executing the 'while' loop only when iPrime = true. 50% of numbers are divisible by 2 and so this once this has been established the calculations can stop.

I'm doing this project as part of a beginners 'example' from a book, I actually am trying to calculate up to 1000000 as quickly as possible just for my own "extra credit"...

I read that the "short circuit 'and' operator" && only evaluates the second half of the statement if the first half is true, if it is false, the two are not evaluated against each other (saving CPU)

And it will also exit the loop, which will save even more CPU...

But for some reason, it is not working correctly! I've put more System.out.println() statements throughout, listing what 'iPrime' is - and the output is stranget... It switches iPrime on and off and evaluates every number, which I cannot understand.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T13:56:09.803

`if((iPrime = true) && ...)`应该是`if((iPrime) && ...)`。

通过这样做`isPrime = true`，您**将 true 分配**给`isPrime`而不是**将**其值与`true`.

您可能还希望看到[这个](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)以更好地理解代码中发生的情况：

> 在运行时，赋值表达式的结果是赋值发生后变量的值。赋值表达式的结果本身不是变量。

因此，当您使用`=`运算符而不是`==`（当您将某些内容与`true`- 而不是写`if(someBoolean == true)`您只是 write时删除`if(someBoolean)`）时，您实际上*总是*满足条件！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T13:54:34.813

简单地`=`变成`==`，即改变

```
while ((iPrime = true) && (j < (i / 2 + 1))) 
```

进入

```
while ((iPrime == true) && (j < (i / 2 + 1))) 
```

具有更好性能的完整代码

```
public static void main(String[] args) {
    // Find Prime Numbers from 0 to 100
    System.out.println(2 + " is a prime number!");
    for (int i = 3; i <= 100; i += 2) {
        boolean isPrime = true;
        for (int j = 3; j * j <= i; j += 2) {
            if ((i % j) == 0) {
                isPrime = false;
                break;
            }
        }
        if (isPrime) {
            System.out.println(i + " is a prime number!");
        }
    }
} 
```

我能想到的最快的方法是[Sieve of Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T14:02:06.337

首先在运行您的代码时，我发现它显示 4 作为质数，这是不正确的。原因是您的 j++ 行的位置。您应该将 while 循环更改为：

```
while (j < (i / 2 + 1)) {   
                if ((i % j) == 0) {
                    iPrime = false;

                    //System.out.println(j + " is a factor of " + i);
                    break;
                }
                j++;
            } 
```

继续第二部分，当您确定该数字不是素数时，您希望避免额外的计算。您可以在上面的代码中为此使用 break 语句。

注释部分不起作用，因为您有分配而不是相等比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T14:00:21.637

johnchen902 / Maroun Maroun 修复了你的错误；此外，您可以执行的优化是

```
System.out.println("2 is a prime number!"); // the for loop won't detect 2 anymore
for (i=3; i <= 100; i+=2) { 
```

此外，您可以对具有所有前面的素数的数字执行模运算符以查看它是否为素数，而不是对具有所有前面奇数的数字执行模运算符以查看它是否为素数 - 例如，将找到的素数存储在 ArrayList 中，并在素数测试中遍历该列表。

对于 CPU 效率非常高（但空间效率较低）的算法，请使用[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

# c# - Many-to-many without an inverse property

> ID：16121083
> 
> 赞同：2
> 
> 时间：2013-04-20T13:51:40.543
> 
> 标签：c#, entity-framework, entity-framework-6

I want to create a many-to-many relationship in EF. Normally I would use the InverseProperty attribute, however, in this case:

```
Role ( Id, Name, ICollection<Privilege> )
Privilege ( Id, Name ) 
```

I don't have an inverse property. How to tell EF that a privilege may be used in more than one Role?

[ Currently EF puts a Role_Id column in the Privilege table. This is not what I want :-) ]

Edit: I do not want to use the Fluent API, I'm looking for an attribute.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:05:27.600

```
modelBuilder.Entity<Role>()
    .HasMany(r => r.Privileges)
    .WithMany() // <- no parameter = no inverse property
    .Map(m =>
    {
        m.ToTable("RolePrivileges");
        m.MapLeftKey("RoleId");
        m.MapRightKey("PrivilegeId");
    }); 
```

我已经看到您不想要 Fluent API，但使用数据注释是不可能的。带有注释的映射选项只是 Fluent API 选项的一个子集，这是缺少带有数据注释的映射选项的情况。你需要 Fluent API。

# maven - Maven依赖与Tomcat冲突？

> ID：16121086
> 
> 赞同：0
> 
> 时间：2013-04-20T13:51:58.007
> 
> 标签：maven, tomcat

我的 Web 应用程序有问题。我正在使用 Spring Tool Suite 和 Tomcat 7。启动服务器时出现这些错误。

```
INFO: validateJarFile(C:\Spring\vfabric-tc-server-developer-2.8.2.RELEASE\base-instance\wtpwebapps\hibernator\WEB-INF\lib\javaee-web-api-6.0.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class

SEVERE: Error configuring application listener of class com.sun.faces.config.ConfigureListener
java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener 
```

我的应用程序不使用 JSF，当我添加 Maven 依赖项 jsf-impl.jar（其中包含 com.sun.faces）时，我遇到了更多错误。我添加了 javaee-web-api-6.0.jar 作为范围为提供的依赖项，但我仍然收到此错误。我做了一些研究，显然 javaee-web-api-6.0.jar 和 servlet api 会导致类路径冲突？那正确吗。

如何修复我的网络应用程序。我真的很感激帮助。这是我的 pom.xml 和 web.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.jamesanthony527</groupId>
    <artifactId>hibernator</artifactId>
    <name>hibernator</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.10</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>   

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.3.0.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.6.8.Final</version>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
        </dependency>
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.3.160</version>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time-hibernate</artifactId>
            <version>1.3</version>
        </dependency>
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>10.0.1</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time-jsptags</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.14</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-lgpl</artifactId>
            <version>1.9.2</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.1</version>
        </dependency>

    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>

<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
        <multipart-config><max-file-size>5000000</max-file-size></multipart-config>                     
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

# c# - CrmEntityDataSource To CodeBehind Datareader

> ID：16121088
> 
> 赞同：0
> 
> 时间：2013-04-20T13:52:36.353
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm

Im jumping into a project using MS Dynamics and a portal plugin, and am in need with a little help.

On the html side I have a `CrmEntityDataSource` which collects 1 record. I need to be able to get certain fields from this CrmEntityDataSource record in the CodeBehind but I don't know how to do this.

Is there a way to cast it to a codeBehind datareader, or something similar so that I can throw the column fields to labels etc?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:04:36.153

尝试使用枚举器读取对象：

```
IEnumerator e = dataSource.GetEnumerator();
while (e.MoveNext())
{
    object dataobject = e.Current;
} 
```

有关 CrmEntityDataSource 的更多信息，请参见[此处。](http://social.technet.microsoft.com/wiki/contents/articles/9608.dynamics-crm-2011-portal-development-crmentitydatasource.aspx)

# mysql - 带聚合的关系代数

> ID：16121099
> 
> 赞同：0
> 
> 时间：2013-04-20T13:53:27.510
> 
> 标签：mysql, sql

对于今天收治10名以上患者的每个病房，列出病房名称、病房类型和每个病房的床位数

给出以下架构：

```
Patient(PatNo, patName, patAddress, DOB)
Ward (wardNo, wardName, wardType, noOfBeds)
Contains (PatNo, WardNo, admissionDate) 
```

这是我的 SQL：

```
select PatNo, wardNo, wardName, wardType, noOfBeds
  from Ward w , Contains c
 where w.wardNo = c.WardNo 
   and count(c.patNo) > 10 
   and c.admissionDate = getDate(); 
```

我不明白如何将聚合与关系代数一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:31:10.590

两件事情。第一的，

```
and c.admissionDate = getDate(); 
```

getDate() 返回一个日期时间，所以这几乎不会返回任何东西。你可能想要

```
and c.admissionDate = cast(getDate() as date); 
```

接下来，您不希望您的聚合在 where 子句中。你想要：

```
having count(c.PatNo) > 10 
```

或者

```
and (subquery to get admitted patient count) > 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:44:30.647

当前日期的 MySQL 函数是`now()`而不是`getdate()`. 尝试这个：

```
select PatNo, wardNo, wardName, wardType, noOfBeds
  from Ward w join
       Contains c
       on w.wardNo = c.WardNo 
 where c.admissionDate = date(now())
 group by c.patno
 having count(c.patNo) > 10 
```

您的查询需要一个`group by`聚合子句。条件 on`count`需要在`having`子句中而不是在`where`子句中（在聚合之前而不是之后使用）。

我将查询更改为使用标准联接。

# c - C中的OpenCl，导致访问冲突的基本应用程序

> ID：16121102
> 
> 赞同：0
> 
> 时间：2013-04-20T13:53:49.353
> 
> 标签：c, opencl

我正在尝试学习 OpenCL，这很有趣，但学习曲线陡峭（至少对我而言）。

跟随本书：OpenCl in Action

我编写了一个简单的程序，它可以为我提供有关我拥有的 opencl 设备的信息，但仍然没有上下文，没有内核，什么都没有。

我定义了两个结构（来自一些在线博客的想法）：

**注意**：请跳转到文件末尾的通知

**设备描述**

```
typedef struct DeviceDesc{
    cl_device_id    deviceID;
    cl_device_type  Type;
    char*           TypeString;
    char*           Name;
    char*           Ext;
    cl_bool         Available;
    cl_ulong        GlobalMemSize;
    cl_ulong        LocalMemSize;
    cl_uint         Clock;
    cl_uint         ComputeUnits;

} DeviceDesc; 
```

**平台描述**

```
typedef struct PlatformDesc{
    cl_platform_id  pID;
    char*           pName;
    char*           pExt;
    char*           pVersion;
    char*           pVendor;

} PlatformDesc; 
```

我还定义了两个枚举

PINFO

```
enum pINFO{
    name = 0,
    vendor = 1,
    ext = 2,
    profile = 3,
    version = 4,

}pINFO; 
```

DINFO

```
enum dINFO{
    dname = 0,   //char*
    davail = 1, //clbool
    dext = 2,  //char*
    dgmemsize = 3, //ulong
    dlmemsize = 4, //ulong
    dmaxclock = 5, //uint
    dcompunits = 6,//uint

}dINFO; 
```

我还定义了这些*函数*：

```
void cl_error_check(cl_int err,char* msg) {
    if (!err==CL_SUCCESS) {
        printf("%s\n",msg);
        exit(1);
    }
}

void cl_PFINFO(PlatformDesc* platform,enum pINFO itype,int i) {
    size_t datasize;
    char*  data;
    cl_int err;

    //name = 0,   //char*
    //avail = 1, //clbool
    //ext = 2,  //char*
    //gmemsize = 3, //ulong
    //lmemsize = 4, //ulong
    //maxclock = 5, //uint
    //compunits = 6,//uint
    switch(itype) {
    case 0: //name
        err = clGetPlatformInfo(platform[i].pID,CL_PLATFORM_NAME,0,NULL,&datasize);
        cl_error_check(err,"Couldn't Obtain Plaform Name!");
        data = (char*)malloc(sizeof(datasize));
        clGetPlatformInfo(platform[i].pID,CL_PLATFORM_NAME,datasize,data,NULL);
        platform[i].pName = data;
        break;
    case 1: //avail
        err = clGetPlatformInfo(platform[i].pID,CL_PLATFORM_VENDOR,0,NULL,&datasize);
        cl_error_check(err,"Couldn't Obtain Plaform Vendor!");
        data = (char*)malloc(sizeof(datasize));
        clGetPlatformInfo(platform[i].pID,CL_PLATFORM_VENDOR,datasize,data,NULL);
        platform[i].pVendor = data;
        break;
    case 2: //ext
        err = clGetPlatformInfo(platform[i].pID,CL_PLATFORM_EXTENSIONS,0,NULL,&datasize);
        cl_error_check(err,"Couldn't Obtain Plaform Extensions!");
        data = (char*)malloc(sizeof(datasize));
        clGetPlatformInfo(platform[i].pID,CL_PLATFORM_EXTENSIONS,datasize,data,NULL);
        platform[i].pExt = data;
        break;
    case 3: //globalmemorysize

        break;
    case 4: //localmemorysize
        err = clGetPlatformInfo(platform[i].pID,CL_PLATFORM_VERSION,0,NULL,&datasize);
        cl_error_check(err,"Couldn't Obtain Plaform Version!");
        data = (char*)malloc(sizeof(datasize));
        clGetPlatformInfo(platform[i].pID,CL_PLATFORM_VERSION,datasize,data,NULL);
        platform[i].pVersion = data;
        break;

        break;
    default:
        printf("Unknown Platform Info Type! %d",itype);
        exit(1);
    }

}
void cl_DVINFO(DeviceDesc* dev,enum dINFO itype,int i) {
    size_t datasize;
    char*  data;
    cl_bool av;
    cl_int err;

    cl_ulong gm,lm;
    cl_uint  clock,units;
     //name = 0,   //char*
    //avail = 1, //clbool
    //ext = 2,  //char*
    //gmemsize = 3, //ulong
    //lmemsize = 4, //ulong
    //maxclock = 5, //uint
    //compunits = 6,//uint

    switch(itype) {
    case 0: //name
        err = clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_NAME,0,NULL,&datasize);
        cl_error_check(err,"Couldn't Obtain Device Name!");
        data = (char*)malloc(sizeof(datasize));
        clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_NAME,datasize,data,NULL);
        dev[i].Name = data;
        printf("\nDevice Name: %s",dev[i].Name);
        break;
    case 1: //avail
        err = clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_AVAILABLE,sizeof(cl_bool),&av,NULL);
        cl_error_check(err,"Couldn't Obtain Device Availability!");
        dev[i].Available = av;
        printf("\nDevice Available: %d",dev[i].Available);
        break;
    case 2: //ext
        err = clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_EXTENSIONS,0,NULL,&datasize);
        cl_error_check(err,"Couldn't Obtain Device Extensions!");
        data = (char*)malloc(sizeof(datasize));
        clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_EXTENSIONS,datasize,data,NULL);
        dev[i].Ext = data;
        break;
    case 3: //globalmemorysize
        err = clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_GLOBAL_MEM_SIZE,sizeof(cl_ulong),&gm,NULL);
        cl_error_check(err,"Couldn't Obtain Device Global Memory Size!");
        dev[i].GlobalMemSize = gm;
        printf("\nDevice Global Memory Size: %lu",dev[i].GlobalMemSize);
        break;
    case 4: //localmemorysize
        err = clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_LOCAL_MEM_SIZE,sizeof(cl_ulong),&lm,NULL);
        cl_error_check(err,"Couldn't Obtain Device Local Memory Size!");
        dev[i].LocalMemSize = lm;
        printf("\nDevice Local Memory Size: %lu",dev[i].LocalMemSize);
        break;
    case 5: //Max Clock
        err = clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_MAX_CLOCK_FREQUENCY,sizeof(cl_uint),&clock,NULL);
        cl_error_check(err,"Couldn't Obtain info on Device Max Clock Frequency!");
        dev[i].Clock = clock;
        printf("\nDevice Clock: %u",dev[i].Clock);
        break;
    case 6://Max Compte
        err = clGetDeviceInfo(dev[i].deviceID,CL_DEVICE_MAX_COMPUTE_UNITS,sizeof(cl_uint),&units,NULL);
        cl_error_check(err,"Couldn't Obtain info on Device Max Computing Units!");
        dev[i].ComputeUnits = units;
        printf("\nDevice Compute Units: %u",dev[i].ComputeUnits);
        break;
    default:
        printf("Unknown Device Info Type! %d",itype);
        exit(1);
    }

} 
```

我知道这很多，但是我的程序运行良好，直到我到达注释中标有 ==> 的代码部分，问题是有时，代码运行良好，有时在识别第二个 GPU 后崩溃，这是**主要的**

```
int main(int argc, char** argv) {
    /*
            OPEN CL INIT AND STUFF
    */
    cl_platform_id      platformID;
    cl_device_id        *CPUID,*GPUID;
    cl_uint             num_devices,addr_data,num_platforms = 1;
    cl_uint             num_CPU,num_GPU;
    cl_int              err, i;

    char                dname_data[48],dext_data[4096];
    int                 k;

    PlatformDesc*       platform = (PlatformDesc*)malloc(sizeof(PlatformDesc));
    DeviceDesc*         CPUS = NULL;
    DeviceDesc*         GPUS = NULL;

    err = clGetPlatformIDs(num_platforms,&platformID,NULL);
    cl_error_check(err,"Couldn't find any platforms!");
    platform[0].pID = platformID;
    //Get CPUs
    err = clGetDeviceIDs(platform[0].pID,CL_DEVICE_TYPE_CPU,NULL,NULL,&num_CPU);
    cl_error_check(err,"Error in finding CPUS!");

    CPUS = (DeviceDesc*)malloc(num_CPU*sizeof(DeviceDesc));
    CPUID = (cl_device_id*)malloc(num_CPU*sizeof(cl_device_id));

    err = clGetDeviceIDs(platform[0].pID,CL_DEVICE_TYPE_CPU,num_CPU,CPUID,NULL);\
    cl_error_check(err,"Error in Getting CPUS!");

    for (k = 0;k<num_CPU;k++) {
        CPUS[k].deviceID = CPUID[k];
        CPUS[k].Type = CL_DEVICE_TYPE_CPU;
        CPUS[k].TypeString = "CPU";
        //get device info
        int l;
        for (l=0;l<7;l++)
        cl_DVINFO(CPUS,l,k);
    }
    //Get GPUs
    err = clGetDeviceIDs(platform[0].pID,CL_DEVICE_TYPE_GPU,NULL,NULL,&num_GPU);
    cl_error_check(err,"Error in finding GPUS!");

    GPUS = (DeviceDesc*)malloc(num_GPU*sizeof(DeviceDesc));
    GPUID = (cl_device_id*)malloc(num_GPU*sizeof(cl_device_id));

    err = clGetDeviceIDs(platform[0].pID,CL_DEVICE_TYPE_GPU,num_GPU,GPUID,NULL);\
    cl_error_check(err,"Error in Getting GPUS!");

    for (k = 0;k<num_GPU;k++) {
            //==> Most of the crashing occurs here... if they occur
        GPUS[k].deviceID = GPUID[k];
        GPUS[k].Type = CL_DEVICE_TYPE_GPU;
        GPUS[k].TypeString = "GPU";
        int l;
        for (l=0;l<7;l++)
        cl_DVINFO(GPUS,l,k); //Here, i am getting the info "L" for the GPU K
    }

    //Ok Now get Platform info
    cl_PFINFO(platform,name,0);
    cl_PFINFO(platform,vendor,0);
    cl_PFINFO(platform,ext,0);
    cl_PFINFO(platform,version,0);
    scanf("%d",&k); //THIS SCANF is just to see if it reaches this part or not, useless
    //CLEANUP

    free(GPUID);
    free(CPUID);
    free(CPUS);
    free(GPUS);
    return 0;

} 
```

这是我从我的机器获得的示例输出

```
Device Name: AMD FX(tm)-8120 Eight-Core Processor
Device Available: 1
Device Global Memory Size: 2147483648
Device Local Memory Size: 32768
Device Clock: 4100
Device Compute Units: 8
Device Name: Tahiti
Device Available: 1
Device Global Memory Size: 2147483648
Device Local Memory Size: 32768
Device Clock: 950
Device Compute Units: 28
Device Name: Tahiti
Device Available: 1
Device Global Memory Size: 2147483648
Device Local Memory Size: 32768
Device Clock: 950
Device Compute Units: 28
Process returned -1073741819 (0xC0000005)   execution time : 2.206 s
Press any key to continue. 
```

有时没有确定第二个大溪地。无论如何，我得到一个 0xC0000005 （我认为这是访问冲突，又名与指针有关）

我的问题是，我哪里出错了:)。我的意思是如果我不能这样做，我将如何处理内核：P

# **注意**

由于请求，我将发布代码失败的部分：

**代码在这里失败**

```
for (k = 0;k<num_CPU;k++) {
    CPUS[k].deviceID = CPUID[k];
    CPUS[k].Type = CL_DEVICE_TYPE_CPU;
    CPUS[k].TypeString = "CPU";
    //get device info
    int l;
    for (l=0;l<7;l++)
    cl_DVINFO(CPUS,l,k);
} 
```

# java - Am I only checking for links of a URL with this java code?

> ID：16121103
> 
> 赞同：5
> 
> 时间：2013-04-20T13:53:49.790
> 
> 标签：java, url, hyperlink

I have a method that takes in URL and finds all the links on that page. However I am concerned if it is only taking links as when I check if the links are working or not, some of the links seem strange. For example if I check the links at www.google.com I get 6 broken links that return no http status code and instead says there is 'no protocol'for that broken link. I just wouldn't imagine google would have any broken links on its homepage. An example of one of the broken links is: /preferences?hl=en I can't see where this link is on the google homepage. I am curious if I am checking just links or is it possible I am extracting code that is not supposed to be a link?

Here is the method that checks the URL for links:

```
public static List getLinks(String uriStr) {

    List result = new ArrayList<String>();
    //create a reader on the html content
    try{
        System.out.println("in the getlinks try");
    URL url = new URI(uriStr).toURL();
    URLConnection conn = url.openConnection();
    Reader rd = new InputStreamReader(conn.getInputStream());

    // Parse the HTML
    EditorKit kit = new HTMLEditorKit();
    HTMLDocument doc = (HTMLDocument)kit.createDefaultDocument();
    kit.read(rd, doc, 0);

    // Find all the A elements in the HTML document
    HTMLDocument.Iterator it = doc.getIterator(HTML.Tag.A);
    while (it.isValid()) {
        SimpleAttributeSet s = (SimpleAttributeSet)it.getAttributes();

        String link = (String)s.getAttribute(HTML.Attribute.HREF);
        if (link != null) {
                // Add the link to the result list
                System.out.println(link);
            //System.out.println("link print finished");
            result.add(link);
        }
        //System.out.println(link);
        it.next();
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:30:02.820

您返回的链接没有任何问题。

查看您的代码，您正在提取`href`属性，在您的示例中，该属性来自元素：

```
<a  class=gbmt href="/preferences?hl=en">Search settings</a> 
```

（点击右下角的“设置”可以看到这个链接，应该会弹出一个包含几个链接的列表）

如您所见，该`href`属性仅包含`/preferences?hl=en`，这只是使其成为*相对链接*。完整的 url 将是您当前所在页面的地址 + href。在这种情况下：

```
http://www.google.com/preferences?hl=en 
```

如果 url 是相对的，您只需要调整代码以添加方法的参数。

# django - django sanction: TypeError: create_superuser() takes exactly 4 arguments (3 given)

> ID：16121104
> 
> 赞同：1
> 
> 时间：2013-04-20T13:54:01.127
> 
> 标签：django, django-models

I am trying to integrate the [django-sanction](https://github.com/demianbrecht/django-sanction) library on my small blog (I am a django beginner), but, when I set up the [example](https://github.com/demianbrecht/django-sanction/tree/master/example) as in the package, and then run syncdb, I get:

```
TypeError: create_superuser() takes exactly 4 arguments (3 given) 
```

I guess the problem is with the [user model](https://github.com/demianbrecht/django-sanction/blob/master/example/core/models.py) defined in the package, but I am unsure how to get rid of this error.

I have tried adding an email field (since I think create_superuser() requires an email field to be passed), as follows:

```
class User(AbstractBaseUser):

    username = models.CharField(_('username'), max_length=30, unique=True)
    first_name = models.CharField(_('first name'), max_length=100, blank=True)
    last_name = models.CharField(_('last name'), max_length=100, blank=True)
    email = models.EmailField(verbose_name='email address', max_length=255, unique=True)
    USERNAME_FIELD = 'username'
    REQUIRED_FIELDS = ['email_address']
    .... 
```

but this does not solve the error. I guess I probably explicitly need to pass the email field to the create_superuser() method (?). Any help as to how to solve this error would be greatly appreciated. Thanks.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-23T13:20:26.630

好的 - 原来作者没有更新他的 repo - 现在超级用户创建没有任何问题。

# css - CSS 代码荧光笔 - 行间距

> ID：16121105
> 
> 赞同：0
> 
> 时间：2013-04-20T13:54:03.413
> 
> 标签：css, syntax-highlighting, pre

看到这个小提琴：http: [//jsfiddle.net/Zdnsx/](http://jsfiddle.net/Zdnsx/)

我有3个问题，

1.  为什么`margin-top`不工作？是因为它们是内联元素还是因为它们在 pre 标签中？

2.  在 pre 标记中制作代码荧光笔是个好主意，还是有更好更简单的解决方案？

3.  是否有任何代码荧光笔 CSS 样式表？我只需要 CSS 样式表，因为我对 JS、JQuery 等一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:03:08.847

1.  因为它们是[内联元素](http://jsfiddle.net/KFg2M/)：

    `strong { margin-top: 1em; }`

    `<pre><strong>hello</strong></pre>`
    `<strong>hello</strong>`

2.  （和 3）[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)。CSS 无法选择特定的单词，因此您需要使用 JavaScript 或在服务器端添加标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:03:16.753

1.  没有`margin-top`风格。

2.  这是有道理的，因为`pre`将立即考虑空白。

3.  搜索`jQuery Syntax Highlighter`将带给您各种资源，所有这些资源都包括用于语法突出显示的 CSS 文件。只需弄清楚您需要哪个样式表，使用那个样式表，然后忘记实际的 JS。[这是一个例子](http://www.steamdev.com/snippet/css/jquery.snippet.min.css)。

* * *

不过请注意。当使用一个`pre`元素进行语法高亮时，你会注意到：

```
<pre><a>Hello World!</a></pre> 
```

将产生：

```
Hello World! 
```

代替

```
<a>Hello World!</a> 
```

那是因为您需要分别将您的`<`和更改`>`为`&lt;`和`&gt;`。

# opengl - 如何在OpenGL中做“AND”模具？

> ID：16121109
> 
> 赞同：2
> 
> 时间：2013-04-20T13:54:28.147
> 
> 标签：opengl, stencil-buffer

我渲染了一个场景，我正在做一些只在屏幕的一部分上进行的后期处理。我使用球体来“切割”该区域，但我得到了“完整”球体，而我需要对球体内部的表面进行“与”切割。这有点难以解释，但希望以下两个模型有所帮助。假设场景是蓝色的东西，绿色的球体是模板网格。右图显示了生成的模板。

![](https://i.stack.imgur.com/CWLNe.png) ![](https://i.stack.imgur.com/00924.png)

所以......我该怎么做？目前我做这样的事情：

```
GL.Enable(EnableCap.DepthTest);
GL.ColorMask(false, false, false, false);
GL.CullFace(CullFaceMode.Front);

GL.Enable(EnableCap.StencilTest);
GL.Clear(ClearBufferMask.StencilBufferBit);

GL.StencilFunc(StencilFunction.Always, 1, 1);
GL.StencilOp(StencilOp.Incr, StencilOp.Incr, StencilOp.Incr);

Resources.R.StencilMesh.Render();

GL.StencilFunc(StencilFunction.Equal, 1, 1);
GL.StencilOp(StencilOp.Keep, StencilOp.Keep, StencilOp.Keep); 
```

然而，这会导致模板缓冲区具有完整的球体，而我只想要留在球体内部的表面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:57:25.853

如果我对您的理解正确，那么我认为您在第一次调用 glStencilOp 时参数错误。

这三个操作分别是：

1.  模板测试失败时该怎么办
2.  模板测试通过，深度测试失败怎么办
3.  模板和深度测试通过后该怎么办。

由于您的模板测试总是通过，我们可以忽略 #1，但如果您只想在模板缓冲区中绘制球体将被绘制的位置（而不是填充深度缓冲区遮挡的区域），则**不应**增加案例 #2 中的模板缓冲区。

所以我会尝试：

```
GL.StencilFunc(StencilFunction.Always, 1, 1);
GL.StencilOp(StencilOp.Keep, StencilOp.Keep, StencilOp.Incr);
Resources.R.StencilMesh.Render(); 
```

# asp.net - 如何在处理错误之前不向浏览器发送应用程序错误的标头

> ID：16121111
> 
> 赞同：0
> 
> 时间：2013-04-20T13:54:45.447
> 
> 标签：asp.net, redirect, http-headers, http-status-code-404, httpexception

现在我可以在 web config 使用下面的代码生成自定义错误页面

```
<customErrors mode="On" defaultRedirect="Error404.aspx" redirectMode="ResponseRewrite">
  <error statusCode="404" redirect="~/Error404.aspx"/>
</customErrors> 
```

这会捕获所有不存在的页面，只要它们不是 aspx

示例：[http ://www.monstermmorpg.com/StackOverflow](http://www.monstermmorpg.com/StackOverflow)

现在，如果你这样做

[http://www.monstermmorpg.com/StackOverflow.aspx](http://www.monstermmorpg.com/StackOverflow.aspx)

全局 asax 正在捕获错误

```
void Application_Error(object sender, EventArgs e)
{
    // Code that runs when an unhandled error occurs
    if (Server.GetLastError() != null)
        if (Server.GetLastError().GetBaseException() != null)
        {
            Exception objErr = Server.GetLastError().GetBaseException();
            ErrorLogger.LogError(Request.Url.ToString(), objErr.Message.ToString(), objErr.StackTrace.ToString());
            if (objErr.Message.IndexOf("does not exist") != -1)
            {

                // Response.Redirect("http://www.monstermmorpg.com");

            }
        }
} 
```

但是在这里它告诉浏览器您要访问的页面存在。实际上它是不存在的。所以我想告诉浏览器你要找的页面是404。

我该怎么做=？

如果我在全局 asax 中重定向到 error404.aspx 页面，它会给我标头已发送的错误

这里错误

![在此处输入图像描述](https://i.stack.imgur.com/ubUvP.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T11:56:59.147

再会

你会想尝试以下

[从域到 www.domain 的全局 301 重定向](https://stackoverflow.com/questions/2111955/global-301-redirection-from-domain-to-www-domain)

```
Response.Status = "301 Moved Permanently";   
Response.AddHeader("Location",   "http://"+host+port+"/404.aspx");
Response.End(); 
```

# python - Python Win32gui，在屏幕上绘图

> ID：16121115
> 
> 赞同：2
> 
> 时间：2013-04-20T13:55:11.193
> 
> 标签：python, winapi

我正在尝试绘制一个与窗口周长相对应的矩形，但我很难找到有关 win32gui 中包含的函数的文档。

我的问题是，如何在窗口周围绘制那个矩形？我直接在屏幕 DC 上绘制或创建位图 (win32gui.CreateCompatibleBitmap) 并将我绘制到屏幕 DC？

```
Rect = win32gui.GetWindowRect(window_handler)

dcBmp = win32gui.CreateCompatibleDC(0)
dcscrn = win32gui.GetDC(0)
c_bpm = win32gui.CreateCompatibleBitmap(dcscrn, x, y)
c_bpm_old = win32gui.SelectObject(dcBmp, c_bpm)
pen = win32gui.CreatePen(win32con.PS_GEOMETRIC, win32api.RGB(255,0,0)) 
```

此时我不知道如何在 bitmpap 中绘制 Rect 然后在屏幕上绘制它？

谢谢，我很困惑。

抱歉我的英语很糟糕，希望您能理解我的问题，再次感谢您的耐心等待。

# c++ - 使用带有数字的模板函数

> ID：16121116
> 
> 赞同：1
> 
> 时间：2013-04-20T13:55:24.573
> 
> 标签：c++

我创建了模板函数，它允许我用任何类型的数字、整数、双精度等来调用它......

要调用这个函数，我需要知道一个数字，为​​了得到这个数字，我从控制台（`std::cin`）读取它。

我想知道 - 如果我必须声明变量类型才能将其传递给函数，那么使用模板的目的是什么？我的意思是，我不会问用户他想传递什么类型的数字，而且我肯定不会为所有数据类型执行 switch 循环以不同地调用函数。

如果有什么不够清楚，让我提供一些简单的例子：

```
template <typename T>
T sum(T a, T b)
{
   return a + b;
}

int main()
{
   using namespace std;
   int a, b; // here, this line

   cout << "Provide first number: ";
   cin >> a;
   cout << "Provide second number: ";
   cin >> b;
   sum(a, b);
} 
```

我一直在考虑创建另一个模板函数，例如`loadVariable()`，返回加载的变量，例如：

```
template <typename T>
T loadVariable(string text)
{
   T var = new T;
   cout << text;
   cin >> var;
   return var;
} 
```

然后做这样的事情：

```
int main()
{
   using namespace std;
   sum(loadVariable("Provide first number: "), loadVariable("Provide second number: ");
} 
```

但是，它看起来非常难看。

这是使用这种功能的好习惯吗？

或者也许还有其他一些我不知道的很酷的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:47:35.897

从开发和维护的角度来看，模板有助于避免代码重复[（不要重复自己）](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)（尽管编译器会为每个专业化生成代码）。它们还用于执行各种编译时任务与使用[模板元编程](http://en.wikipedia.org/wiki/Template_metaprogramming)的运行时任务。

由于 C++ 是静态类型的，因此必须在编译时知道类型，因此必须声明它。有关可以包含多种类型之一的类，请参见 boost::variant。

我认为您对模板的问题更多的是静态类型与动态类型语言的问题。我没有检查它，但我认为 loadVariable() 概念不会编译，因为没有指定模板参数，编译器无法从调用本身派生专业化。您必须拥有`loadVariable<int>()`或`loadVariable<double>()`在哪里指定模板参数。

问题是您是否需要区分整数或浮点类型。因为您可以将输入变量声明为可以包含任何一个的双精度变量。

这可能只是出于帖子的示例目的的代码，但是这个函数是内存泄漏吗？

```
template <typename T>
T loadVariable(string text)
{
   T var = new T;
   cout << text;
   cin >> var;
   return var;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:03:13.367

使用模板的意义在于，您可能希望在代码中的其他地方`sum`使用两个不同的类型变量。当然，如果您知道您的代码非常简单，以至于您只能`sum`使用 types进行调用`int`，那么您很可能只使用 define`sum`来获取`int`s 而不是作为模板。

你的第二个例子`loadVariable`不能像你描述的那样工作，因为你需要指定模板参数：

```
sum(loadVariable<float>("Provide first number: "), loadVariable<float>("Provide second number: ")); 
```

你当然可以这样写：

```
float a = loadVariable<float>("Provide first number: ");
float b = loadVariable<float>("Provide second number: ");
sum(a, b); 
```

模板参数必须在编译时知道。模板是一种编译时构造。在代码中的某个位置，您始终可以知道要传递给函数的参数的类型。模板函数的重点是不接受其类型可以以某种方式变化的变量。类型*不能*变化。它们也是编译时构造。模板函数的重点是为不同类型的函数提供通用实现，以便可以在整个程序的不同位置调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:17:54.263

当你想创建一个函数来对两个 32 位整数求和时，你不需要使用模板。当您需要在许多不同类型中执行相同的操作时，您可以使用模板。例如，假设您要实现一个返回两个元素中最小值的函数。让我们称之为`min`。在您的程序中，您可能会多次调用该`min`函数，每次都使用不同类型的参数。如果您不使用模板，您的代码将如下所示：

```
int min( int a, int b ) { ... }
long min( long a, long b ) { ... }
long long min( long long a, long long b ) { ... }
...
...
... 
```

这样做不是更容易吗：

```
template< typename T >
T min( T a, T b ) { return a < b; } 
```

在您的情况下，您只需要对整数求和，就不需要使用模板，因为您的函数的参数将始终是`int`.

总而言之，模板为您提供了**编译时的**灵活性（@Stephane Rolland），这意味着它们在运行时几乎毫无用处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T14:19:48.450

我无法回答所有使用模板的问题，但只举一个例子：
当我们编写一个带有数组形式参数的函数时，例如：

```
void foo( int arr[] ); 
```

如果数组边界的精确值很重要，您可以这样做：

```
void foo(int (&arr)[12] ); 
```

foo() 将只接受大小为 12 的数组！模板会有用：</p>

```
template <int n>   
void average( int (&ary)[n] ); // let compiler deduce n for us 
```

一个更传统的解决方案是

```
void average_n( int ary[], int size ); 
```

当然，我们可以将这两种方法结合起来：

```
template <int n>
inline void average( int (&ary)[n] )
    { average_n( ary, n ); } 
```

参考：C++ 常识：基础中级编程，第 6 项. Array Formal Arguments

# php - FuelPHP石油迁移不起作用

> ID：16121120
> 
> 赞同：-1
> 
> 时间：2013-04-20T13:55:46.487
> 
> 标签：php, mysql, pdo, fuelphp

我已经安装了 xampp 并且想让 FuelPHP 工作。一切似乎都很好，我搭建了一些我想迁移的东西。但我得到了错误

```
Error - invalid data source name in COREPATH/classes/database/pdo/connection.php on line 94 
```

我的 db.php 看起来像这样：

```
return array(
  'default' => array(
    'type' => 'pdo',
    'connection' => array(
      'dsn' => 'mysql:host=127.0.0.1;dbname=pfpg',
      'username' => 'root',
      'password' => '',
      'persistent' => false,
      'compress' => false,
    ),
  ),
); 
```

我之前在没有“持久”和“压缩”的情况下尝试过，没有用。数据库名称正确，用户名也是正确的。我也用'mysql：host = localhost'尝试过。我不明白我做错了什么...

如果您需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T14:41:58.403

我配置了错误的db.php文件，我不知道，不止一个。fuel/app/config/development/db.php 是正确的文件，所以它取决于环境

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T02:31:31.387

对于这些都不起作用的人，请确保两件事

1.  有多个 db.php 文件`/fuel/app/config/development/db.php`。检查@user1978654提到的环境并仔细检查用户名和密码是否正确
2.  确保`/var/mysql/mysql.sock`存在。就我而言，我正在使用`/Applications/XAMPP/xamppfiles/var/mysql/mysql.sock`，所以我需要创建一个符号链接。[按照此处的说明进行操作](http://fuelphp.com/docs/installation/troubleshooting.html#oil_db_error)

希望对某人有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:21:42.933

转到fuel/app/config/development/db.php 将您的数据库名称放在那里.. 并确保您取消注释fuel\app\config\config.php 中的ORM 包

# ios - 解析 RSS 提要日期，在 NSDateFormatter 可以转换为仅小时格式之前不返回任何内容

> ID：16121127
> 
> 赞同：2
> 
> 时间：2013-04-20T13:56:28.227
> 
> 标签：ios, objective-c, xcode, nsdate, nsdateformatter

我在 StackOverflow 上看到了很多看起来相似的问题，但没有一个对我有帮助。

我正在解析一个 RSS 提要，并希望将日期转换为“几小时前”格式，而不是默认格式。

```
else if ([elementName isEqual:@"pubDate"])
    {
    currentString = [[NSMutableString alloc] init];
    NSLog(@"CURRENT STRING %@", currentString); // THIS IS RETURNING NULL IN LOGS
    [self setPubTime:currentString]; // But this statement is correctly putting the following in the label in custom tableview cell
} 
```

上面代码的最后一行是将标签放在 tableview 的自定义单元格中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/j8Jx5.png)

由于上面的行在 currentString 的日志中返回 NULL，我无法使用此问题中的函数（[iPhone：将日期字符串转换为相对时间戳](https://stackoverflow.com/questions/902950/iphone-convert-date-string-to-a-relative-time-stamp)）将其转换为“小时前”格式：

有人可以指出为什么日志中的 currentString 为空，但仍然能够在下一条语句中设置标签，以及如何将其转换为几小时前的格式。

谢谢

**更新：**

Anupdas 的回答解决了一半的问题。现在我可以看到 currentString 在 NSLog 和自定义 tableview 单元格内的 pubTime 标签中显示时间戳。唯一剩下的就是使用这个时间戳并将它们转换为“小时/分钟/月等前”格式。

使用以下内容：

```
 if ([elementName isEqualToString:@"pubDate"]) {

        NSLog(@"pubTime CURRENT IS %@", currentString);
//        [self setPubTime:currentString];
        NSString *myString = [self dateDiff:currentString];
        [self setPubTime:myString];
} 
```

这是上面代码之后的日志：

![在此处输入图像描述](https://i.stack.imgur.com/tj3f9.png)

由于某种原因，以下功能不起作用：

```
 -(NSString *)dateDiff:(NSString *)origDate {
        NSDateFormatter *df = [[NSDateFormatter alloc] init];
        [df setFormatterBehavior:NSDateFormatterBehavior10_4];
        [df setDateFormat:@"EEE, dd MMM yy HH:mm:ss VVVV"];
        NSDate *convertedDate = [df dateFromString:origDate];
        [df release];
        NSDate *todayDate = [NSDate date];
        double ti = [convertedDate timeIntervalSinceDate:todayDate];
        ti = ti * -1;
        if(ti < 1) {
            return @"never";
        } else  if (ti < 60) {
            return @"less than a minute ago";
        } else if (ti < 3600) {
            int diff = round(ti / 60);
            return [NSString stringWithFormat:@"%d minutes ago", diff];
        } else if (ti < 86400) {
            int diff = round(ti / 60 / 60);
            return[NSString stringWithFormat:@"%d hours ago", diff];
        } else if (ti < 2629743) {
            int diff = round(ti / 60 / 60 / 24);
            return[NSString stringWithFormat:@"%d days ago", diff];
        } else {
            return @"never";
        }   
    } 
```

如果有人能指出一个更好的解决方案将我的 currentString 转换为“小时/分钟/天/等格式”，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:24:38.630

```
else if ([elementName isEqual:@"pubDate"])
    {
    currentString = [[NSMutableString alloc] init];
    NSLog(@"CURRENT STRING %@", currentString); // THIS IS RETURNING NULL IN LOGS
    [self setPubTime:currentString]; // But this statement is correctly putting the following in the label in custom tableview cell
} 
```

通过这样做，您的 pubTime 将没有任何价值。您需要在 xmlParser 的 foundCharacters 委托中初始化 currentString，然后在 didEndElement 方法中添加该值。

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(!currentString){
        currentString = [[NSMutableString alloc] init];
    }
    [currentString appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
{  
     if ([elementName isEqual:@"pubDate"]){
         NSLog(@"CURRENT STRING %@", currentString);
         [self setPubTime:currentString]; 
         currentString = nil;
     }
} 
```

而且您无需进行所有这些计算即可找到可用于此目的的分钟、小时和天数`NSDateComponents`。请参考这篇文章[两个日期之间的差异](https://stackoverflow.com/a/903200/767730)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:56:01.043

要测量小时，您可以使用此...

```
NSTimeInterval distanceBetweenDates = [convertedDate timeIntervalSinceDate:todayDate];
double secondsInAnHour = 3600;
NSInteger hoursBetweenDates = distanceBetweenDates / secondsInAnHour; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T16:03:18.100

对于 Anupdas 的回答 +1，如果您有两个日期变量，您可以轻松找到差异。你需要找出一个特定的帖子是多少小时前发布的（就像你在 11 秒前的推特上看到的那样）。所以你可以使用 NSDate 的内置函数 timeIntervalSinceDate: 函数。因此，您将传递当前日期和从提要中获得的日期。您将获得一个 NSTimeInterval 对象，因此将该对象除以 60*60 将得出差异的分钟数。

使用 NSDateComponent 也是一种可行的选择。

您可以使用以下功能：

```
#define DATE_COMPONENTS (NSYearCalendarUnit| NSMonthCalendarUnit | NSDayCalendarUnit | NSWeekCalendarUnit |  NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit | NSWeekdayCalendarUnit | NSWeekdayOrdinalCalendarUnit)
#define CURRENT_CALENDAR [NSCalendar currentCalendar]

+ (NSDate* )date:(NSDate*)date ByAddingHours:(int)hours
{

    return [date dateByAddingTimeInterval:60*60*hours];
}

+ (NSDateComponents *)componentsForDate:(NSDate *)date 
{
    if (date!=nil)
    {
    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];

    NSDateComponents *dayComponents =
    [gregorian components:DATE_COMPONENTS fromDate:date];

    return dayComponents;
    }

    return nil;
}

+(NSString *)timeFromNSDate:(NSDate *)date
{
    int hour=[self componentsForDate:date].hour;
    int minute=[self componentsForDate:date].minute;

    NSString *returnDateString=@"";
    if (hour <= 9 ) {
        returnDateString=[NSString stringWithFormat:@"0%d", hour];
    }

    else {
        returnDateString=[NSString stringWithFormat:@"%d", hour];
    }

    if (minute <= 9 ) {
        returnDateString= [returnDateString stringByAppendingFormat:@":%@", [NSString stringWithFormat:@"0%d", minute]];
    }

    else {
        returnDateString= [returnDateString stringByAppendingFormat:@":%@", [NSString stringWithFormat:@"%d", minute]];
    }

    NSLog(@"return date string: %@",returnDateString);

    return returnDateString;
} 
```

# sql - 尝试使用选择大小写将字段字符转换为大写时出现错误

> ID：16121132
> 
> 赞同：0
> 
> 时间：2013-04-20T13:56:50.993
> 
> 标签：sql, oracle

当国家名称的长度大于货币名称的长度时，尝试将字段字符转换为大写时出现以下错误。

```
ORA-00923: FROM keyword not found where expected
00923\. 00000 -  "FROM keyword not found where expected" 
```

这是我使用的 SQL 语句：

```
 select 
 countryname.country, countryname.currencycode, currency.currencyname
 case(
 when length(countryname.country)> length (currency.currencyname) 
 then UCASE(countryname.country)
 else
 LCASE(countryname.country)
 )end     
 from  currency,countryname
 where currency.currencycode=COUNTRYNAME.currencycode; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:14:53.013

尝试在第一个之后添加逗号`currencyname`，并删除`case`关键字后的括号：

```
select 
 countryname.country, countryname.currencycode, currency.currencyname,
 case
 when length(countryname.country)> length (currency.currencyname) 
 then UCASE(countryname.country)
 else
 LCASE(countryname.country)
 end     
 from  currency,countryname
 where currency.currencycode=COUNTRYNAME.currencycode; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:00:06.153

您在 currency.currencyname 之后缺少逗号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:01:07.013

我不熟悉 oracle，但错误似乎指定了一个不同的问题。

会不会是你忘了在货币名称后面加一个“，”？

# android - 带有提示屏幕的路径查找 android 应用程序

> ID：16121135
> 
> 赞同：0
> 
> 时间：2013-04-20T13:57:11.677
> 
> 标签：android, path-finding

嗨，我已经彻底搜索过试图找到这个答案，但没有运气。

我正在努力实现这一目标：

*   计算用户可以选择的两个给定点之间的最短路径的 Android 应用程序。

*   在显示路径时，我希望它显示每个增量步骤，并提示用户在进行下一步之前制作步骤（即向右移动 2 个方块）。

*   我还希望用一条线画出这个动作来显示刚刚做出的动作。

*   最后，我希望在最短路径可行的楼层之间有移动，并简单地提示用户将楼梯节点 A 放置到楼层（x）。然后在下一层继续这个过程。

背景：

.布局是一个三层的简单矩形（幸运的是）。. 每个对应楼层的加权边相同。

这可能吗？如果是这样，您能否为我指明某种教程的良好方向。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:10:35.507

这当然是可能的。

您可以使用 TableLayout 在屏幕上显示地图，其中每个方块都可以有自己的 ID。

当用户点击方格时，您应该处理点击事件并通过其 ID 识别点击了哪个方格。

然后进行计算并更新视图以显示结果（例如更改单元格的背景颜色）。

这个问题太笼统了，无法深入了解更多细节，但听起来你并不是在尝试做任何不可能的事情。

使用真实的图形来显示地图并处理图形上的点击要复杂得多，但也是可行的。请遵循以下指南：

[http://developer.android.com/training/building-graphics.html](http://developer.android.com/training/building-graphics.html)

[http://developer.android.com/training/graphics/opengl/touch.html](http://developer.android.com/training/graphics/opengl/touch.html)

# django - Django：Dreamhost 上的乘客出现 500 内部服务器错误

> ID：16121136
> 
> 赞同：1
> 
> 时间：2013-04-20T13:57:31.897
> 
> 标签：django, passenger, wsgi, dreamhost

我这里有个小问题。我正在django 上dreamhost（共享主机）上构建一个项目。当我处于调试模式和使用内置服务器时，一切正常，但是当我尝试切换到 prod 时，出现 500 内部服务器错误。我在互联网上的每个黑暗房间中搜索了解决方案，但仍然没有找到。

所以，这是我的设置：

**我的文件夹：**

```
/home/user/.virtualenvs/myenv/
/home/user/project/
/home/user/project/sqlite.db
/home/user/project/project/settings.py
/home/user/example.com/project (a symlink to /home/user/project)
/home/user/example.com/passenger_wsgi.py
/home/user/example.com/public/ 
```

**我的乘客wsgi.py：**

```
import sys, os

INTERP = "/home/user/.virtualenvs/myenv/bin/python"
if sys.executable != INTERP:
    os.execl(INTERP, INTERP, *sys.argv)

sys.path.append('/home/user/.virtualenvs/myenv/lib/python3.3/site-packages')
sys.path.append('/home/user/example.com')
sys.path.append('/home/user/example.com/project')

os.environ['DJANGO_SETTINGS_MODULE'] = "project.settings"
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

有谁知道如何解决这个问题？

**编辑**

我忘了提，我安装了 python 3 和 django 1.5 因为 DH 中的默认版本太旧了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:44:54.580

在目录中`/home/user/example.com`，您还需要向数据库文件添加符号链接。

还：

*   您只需要附加`/home/user/example.com/project`到路径。其他两个不是必需的，尽管它们不应该引起问题。
*   而不是硬编码路径`/home/user/example.com/project`，您可以使用`os.getcwd()`：

    ```
    sys.path.append(os.path.join(os.getcwd(), 'project')) 
    ```

在您对该文件或项目中的其他文件进行更改后，不要忘记`touch tmp/restart.txt`通知乘客。

顺便说一句，目前 Django 与 Python 版本 2.6.5 到 2.7 一起工作，并为 3.2 和 3.3 提供实验性支持。根据 DreamHost 上的[Python wiki](http://wiki.dreamhost.com/Python)，截至 2012 年 2 月，大多数服务器应该使用 Python 2.6.6，除了*一些*服务器。检查您的 Python 版本，`python --version`如果不是 2.6.6，那么您可以要求支持团队在您的服务器上升级它。

我尝试在 DreamHost 上将 Django 与 Python 3.2 或 3.3 一起使用，但这有问题。它不适用于 3.2，因为`mod_wsgi`Apache 的模块目前似乎不适用于此版本。如果您从源代码安装它可能会起作用，但作为共享主机，我们无法控制它。我不确定，但如果`mod_wsgi`不适用于 3.2，那么它也不适用于 3.3。所以我认为如果你想在 Dreamhost 上使用 Django，最好坚持使用受支持的 2.x 版本。

# python - 树莓派的python脚本中的语法错误

> ID：16121138
> 
> 赞同：0
> 
> 时间：2013-04-20T13:57:41.503
> 
> 标签：python, syntax, raspberry-pi

我是 python 新手，对 python 缩进完全陌生。每当我尝试运行以下代码时都会出现语法错误，这是什么问题？已经谢谢了。

```
#!/usr/bin/python

import RPi.GPIO as GPIO
import time

def RC_Analog (Pin):  
 counter = 0  
 # Discharge capacitor  
 GPIO.setup(Pin, GPIO.OUT)  
 GPIO.output(Pin, GPIO.LOW)  
 time.sleep(0.1)  
 GPIO.setup(Pin, GPIO.IN)  
 # Count loops until voltage across capacitor reads high on GPIO  
 while(GPIO.input(Pin)==GPIO.LOW):  
  counter =counter+1  
 return counter  

# Set up header pin 11 as an input
triggerPin = 25;
echoPin = 8;
GPIO.setmode(GPIO.BCM)
GPIO.setup(triggerPin, GPIO.OUT)
GPIO.setup(echoPin, GPIO.IN)

while True:
 GPIO.output(triggerPin, False)
 time.sleep(0.000002)
 GPIO.output(triggerPin, True)
 time.sleep(0.00001)
 GPIO.output(triggerPin, False)
 print RC_Analog(echoPin)/58
 time.sleep (0.25) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:07:28.543

> `def?RC_Analog(Pin)`它突出了问号区域

如果您看到代码为`def RC_Analog(Pin)`，但语法错误消息从字面上打印出来`def?RC_Analog(Pin)`，听起来您在 和 之间有一个 ASCII 空格字符以外的东西`def`，`RC_Analog`比如 Unicode[不间断空格](http://en.wikipedia.org/wiki/Non-breaking_space)，或其他类似于 a 的 Unicode 字符空间。

用键盘输入的空格替换它应该可以解决问题。

编写 Python 脚本时，最好确保只使用 7 位 ASCII 字符集。一些文本编辑器允许您在配置选项中进行设置，其他文本编辑器允许您在保存时选择编码。

如果您使用的是 Windows 记事本，请在保存时选择“ANSI”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:21:15.693

你真的在使用 python 来启动你的脚本吗？如果我尝试将它作为 shell 脚本获取，我会在同一个地方得到一个错误：

`. test.py`

确保使用 python 启动它：

`python test.py`

或使其可执行： `chmod u+x test.py` 并使用以下命令启动它： `./test.py`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:00:55.827

如果你得到

```
ImportError: No module named RPi.GPIO 
```

你需要先安装模块

[https://pypi.python.org/pypi/RPi.GPIO](https://pypi.python.org/pypi/RPi.GPIO)

# database - Haskell 格式化和显示数据

> ID：16121143
> 
> 赞同：-1
> 
> 时间：2013-04-20T13:58:21.737
> 
> 标签：database, haskell, formatting

鉴于Haskell中的数据库，我正在努力显示信息并将它们格式化为单独的行。下面是我目前正在使用的内容。

```
type Title = String
type Actor = String
type Cast = [Actor]
type Year = Int
type Fan = String
type Fans = [Fan]
type Period = (Year, Year)
type Film = (Title, Cast, Year, Fans)
type Database = [Film]

testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006,          ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
    ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"]) 
```

以上是示例数据库 - 最终目标是编写一个函数“displayAllFilms”，它输出以下内容：

皇家赌场，丹尼尔克雷格，伊娃格林，朱迪丹奇，2006，5

牛仔与外星人，哈里森福特，丹尼尔克雷格，奥利维亚王尔德，2011 年，6

注意：格式很重要，每部电影都显示在单独的行和末尾的粉丝数量上的信息，而不是粉丝列表。

这是我解决这个问题的尝试-

```
displayAllFilms :: [Film] -> String -> String
displayAllFilms [] filmString = filmString
displayAllFilms ((Title cast year fans _):films) filmString = displayAllFilms films (filmString ++ title ++ "\n" ++ (show cast) ++ "\n" ++ (show year) ++ "\n") 
```

但它似乎没有编译，但我似乎找不到我的代码有什么问题......是类型错误吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:16:01.833

几个错误：

```
testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006,          ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
    -- indentation should be consistent - this next line was too far left:
    ("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
    ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"])] 
```

并且您忘记了`]`该列表末尾的右括号。

```
displayAllFilms :: [Film] -> String -> String
displayAllFilms [] filmString = filmString
displayAllFilms ((title,cast,year,fans):films) filmString = displayAllFilms films (filmString ++ title ++ "\n" ++ (show cast) ++ "\n" ++ (show year) ++ "\n") 
```

`(Title cast year fans)`你的意思是在这里`(title,cast,year,fans)`。

Haskell 区分大小写，大写字母表示`Title`是构造函数，但您的意思是它是变量。因为你的`Film`类型是一个元组，所以这里的逗号也需要是一个元组。

## 正确输出

现在这给了你输出

```
putStrLn $ displayAllFilms testDatabase "=========="
==========Casino Royale
["Daniel Craig","Eva Green","Judi Dench"]
2006
Cowboys & Aliens
["Harrison Ford","Daniel Craig","Olivia Wilde"]
2011
Catch Me If You Can
["Leonardo DiCaprio","Tom Hanks"]
2002 
```

现在这与您所需的输出不匹配，

```
Casino Royale, Daniel Craig, Eva Green, Judi Dench, 2006, 5 
```

因为有换行符而不是逗号，以及您不想要的括号。

```
listStuff:: [String] -> String -> String
listStuff strings separator = concat [string++separator| string <-strings] 
```

在这里，我使用列表推导来制作最后带有分隔符的字符串列表，然后`concat`将它们连接在一起。最后你会得到一个备用`", "`的，但这没关系，因为我们需要一个介于演员和年份之间的人。

现在我们可以把它放在一起，`length fans`用来显示粉丝的数量。

```
displayAllFilms' :: [Film] -> String -> String
displayAllFilms' [] filmString = filmString
displayAllFilms' ((title,cast,year,fans):films) filmString = 
       displayAllFilms' films (filmString ++ "\n" ++ title ++ ", " ++ listStuff cast ", " ++ (show year) ++ ", " ++ show (length fans)) 
```

测试结果为

```
>putStrLn $ displayAllFilms' testDatabase ""

Casino Royale, Daniel Craig, Eva Green, Judi Dench, 2006, 5
Cowboys & Aliens, Harrison Ford, Daniel Craig, Olivia Wilde, 2011, 6
Catch Me If You Can, Leonardo DiCaprio, Tom Hanks, 2002, 9 
```

## 稍微清理一下代码

我认为`displayAllFilms`不需要递归——我们可以重用`listStuff`，但是有一个库函数可以做更多我们想要的事情。如果你在 hoogle 上搜索`[String] -> String -> String`你会得到这些结果 http://www.haskell.org/hoogle/?hoogle=[String]+-%3E+String+-%3E+String 和第二个，`intercalate`很方便：

```
> intercalate "_" ["Hello","Mum,","how","are","you?"]
"Hello_Mum,_how_are_you?" 
```

你必须把

```
import Data.List 
```

在代码的顶部使用它。所以现在我们可以做

```
commas :: [String] -> String
commas = intercalate ", " 
```

所以我们可以显示一个单独的电影，然后用它来显示电影列表。

```
showFilm :: Film -> String
showFilm (title,cast,year,fans) = commas [title, commas cast, show year, show (length fans)] 
```

我们可以写

```
showDatabase :: Database -> String
showDatabase fs = intercalate "\n" [showFilm f | f<-fs] 
```

但这样做会更好

```
showDatabase :: Database -> String
showDatabase = unlines.map showFilm 
```

因为你只想`showFilm`在每一部电影上使用，然后`unlines`这意味着`intercalate "\n"`无论如何，但更容易看到。

```
> putStrLn $ showDatabase testDatabase
Casino Royale, Daniel Craig, Eva Green, Judi Dench, 2006, 5
Cowboys & Aliens, Harrison Ford, Daniel Craig, Olivia Wilde, 2011, 6
Catch Me If You Can, Leonardo DiCaprio, Tom Hanks, 2002, 9 
```

# android - 使用 Android SurfaceView 进行捏缩放效果

> ID：16121145
> 
> 赞同：4
> 
> 时间：2013-04-20T13:58:37.353
> 
> 标签：android, surfaceview, pinchzoom

我想缩放`SurfaceView`以便我们也可以视频播放器和相机。我搜索了很多，但没有找到任何合适的指南。很多问题都与此相关，但我没有找到合适的解决方案。实际上对于捏缩放，我们使用矩阵但问题是它`SurfaceView`不支持 Matrix.so 任何人都可以建议我如何做到这一点。我为 PinchZoom 经历了[这个](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847)。

您的正确指导将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T06:53:17.650

您可以正确设置 MarginLayoutParams。有关详细信息，请参阅下面的源代码

```
/**
 * sonle.evizi
 */
package com.philips.cl.insight;

import android.graphics.PointF;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.MarginLayoutParams;
import android.widget.FrameLayout;

public class PanAndZoomListener1 implements OnTouchListener {

    private enum Anchor {
        NONE, LEFT, TOP, RIGHT, BOTTOM, LEFT_TOP, TOP_RIGHT, RIGHT_BOTTOM, LEFT_BOTTOM
    }

    private static final float SPACE_ZOOM = 10f;
    private static final float SPACE_DRAG = 5f;
    private static final float ZOOM_MAX = 8f;
    private static final String TAG = "PanAndZoomListener";
    // We can be in one of these 3 states
    static final int CLICK = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    static final int NONE = 3;
    int mode = NONE;

    // Remember some things for zooming
    PointF start = new PointF();
    PointF midPoint = new PointF();
    float oldDist = 1f;
    MarginLayoutParams oldParams;

    LiveStreamingActivity liveStreamingActivity;
    View parentView;
    View child;

    public PanAndZoomListener1(FrameLayout containter, View surfaceView,
        LiveStreamingActivity liveStreamingActivity) {
        this.liveStreamingActivity = liveStreamingActivity;
        this.parentView = containter;
        this.child = surfaceView;
    }

    public boolean onTouch(View view, MotionEvent event) {
        // Handle touch events here...
        switch (event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN:
            initDragInfo(view, event);
            Log.i(TAG, "======ACTION_DOWN - CLICK ======" + event.getActionIndex());
            mode = CLICK;
            break;

        case MotionEvent.ACTION_POINTER_DOWN:
            Log.i(TAG, "======ACTION_POINTER_1_DOWN======");
            oldDist = spacing(event.getX(0), event.getY(0), event.getX(1), event.getY(1));
            Log.i(TAG, "========oldDist:" + oldDist + "=========");
            if (oldDist < SPACE_ZOOM) {
                mode = NONE;
            } else {
                mode = ZOOM;
                initZoomInfo(view, event);
            }
            break;

        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            break;

        case MotionEvent.ACTION_UP:
            Log.i(TAG, "ACTION_UP");

            if (mode == CLICK) {
                Log.i(TAG, "mode= onTouchDitect");
                liveStreamingActivity.onTouchDitect();
            }
            mode = NONE;
            break;

        case MotionEvent.ACTION_MOVE:
            if (mode == CLICK) {
                if (spacing(start.x, start.y, event.getRawX(), event.getRawY()) >= SPACE_DRAG) {
                    mode = DRAG;
                } else {
                    Log.i(TAG, "======ACTION_MOVE - CLICK======");
                    break;
                }
            }

            if (mode == DRAG) {
                Log.i(TAG, "======ACTION_MOVE - DRAG======");
                doPan(event.getRawX() - start.x, event.getRawY() - start.y);
                break;
            }

            if (mode == ZOOM) {
                Log.i(TAG, "======ACTION_MOVE - ZOOM======");

                float newDist = spacing(event.getX(0), event.getY(0), event.getX(1), event.getY(1));
                if (newDist >= SPACE_ZOOM) {
                    doZoom(newDist);
                }
            }
            break;
        }
        return true; // indicate event was handled
    }

    private void initDragInfo(View view, MotionEvent event) {
        start.set(event.getRawX(), event.getRawY());
        // Initialize start motion info
        oldParams = new MarginLayoutParams((MarginLayoutParams) child.getLayoutParams());
        oldParams.width = child.getWidth();
        oldParams.height = child.getHeight();
    }

    // Caculate the space between two points
    private float spacing(float x0, float y0, float x1, float y1) {
        float x = x0 - x1;
        float y = y0 - y1;
        return (float) Math.sqrt(x * x + y * y);
    }

    // Calculate the mid point of the first two fingers
    private void initZoomInfo(View view, MotionEvent event) {
        midPoint.set((event.getX(0) + event.getX(1)) / 2, (event.getY(0) + event.getY(1)) / 2);

        // Initialize start motion info
        oldParams = new MarginLayoutParams((MarginLayoutParams) child.getLayoutParams());
        oldParams.width = child.getWidth();
        oldParams.height = child.getHeight();
    }

    public void doZoom(float newDist) {
        Anchor anchor = Anchor.NONE;
        /*
        Log.i(TAG, "=======MID POINT: " + midPoint.x + "; " + midPoint.y + "============");
        Log.i(TAG, "=======CHILD VIEW WIDTH: " + child.getWidth() + "============");
        */

        MarginLayoutParams childParams = (MarginLayoutParams) child.getLayoutParams();

        // Log.i(TAG, "=======CHILD VIEW LEFT MARGIN: " + childParams.leftMargin + "============");

        float scale = newDist / oldDist;

        int oriWidth = parentView.getWidth();
        int oriHeight = parentView.getHeight();
        float tempWidth = oldParams.width * scale;
        float tempHeight = tempWidth * oriHeight / oriWidth;

        if (tempWidth < oriWidth || tempWidth > oriWidth * ZOOM_MAX) {
            return;
        }

        childParams.width = (int) tempWidth;
        childParams.height = (int) tempHeight;

        float x1 = midPoint.x + oldParams.leftMargin;
        float x2 = oriWidth - x1;
        float y1 = midPoint.y + oldParams.topMargin;
        float y2 = oriHeight - y1;

        if (midPoint.x * scale <= x1) {
            anchor = Anchor.LEFT;
        } else if ((oldParams.width - midPoint.x) * scale <= x2) {
            anchor = Anchor.RIGHT;
        }

        if (midPoint.y * scale <= y1) {
            if (anchor == Anchor.LEFT) {
                anchor = Anchor.LEFT_TOP;
            } else if (anchor == Anchor.RIGHT) {
                anchor = Anchor.TOP_RIGHT;
            } else {
                anchor = Anchor.TOP;
            }
        } else if ((oldParams.height - midPoint.y) * scale <= y2) {
            if (anchor == Anchor.LEFT) {
                anchor = Anchor.LEFT_BOTTOM;
            } else if (anchor == Anchor.RIGHT) {
                anchor = Anchor.RIGHT_BOTTOM;
            } else {
                anchor = Anchor.BOTTOM;
            }
        }

        switch (anchor) {
        case BOTTOM:
            childParams.leftMargin = (int) (x1 - midPoint.x * scale);
            childParams.topMargin = (int) (oriHeight - tempHeight);
            break;
        case LEFT:
            childParams.leftMargin = 0;
            childParams.topMargin = (int) (y1 - midPoint.y * scale);
            break;
        case LEFT_BOTTOM:
            childParams.leftMargin = 0;
            childParams.topMargin = (int) (oriHeight - tempHeight);
            break;
        case LEFT_TOP:
            childParams.leftMargin = 0;
            childParams.topMargin = 0;
            break;
        case NONE:
            childParams.leftMargin = (int) (x1 - midPoint.x * scale);
            childParams.topMargin = (int) (y1 - midPoint.y * scale);
            break;
        case RIGHT:
            childParams.leftMargin = (int) (oriWidth - tempWidth);
            childParams.topMargin = (int) (y1 - midPoint.y * scale);
            break;
        case RIGHT_BOTTOM:
            childParams.leftMargin = (int) (oriWidth - tempWidth);
            childParams.topMargin = (int) (oriHeight - tempHeight);
            break;
        case TOP:
            childParams.leftMargin = (int) (x1 - midPoint.x * scale);
            childParams.topMargin = 0;
            break;
        case TOP_RIGHT:
            childParams.topMargin = 0;
            childParams.leftMargin = (int) (oriWidth - tempWidth);
            break;
        default:
            break;
        }

        child.setLayoutParams(childParams);
    }

    public void doPan(float panX, float panY) {
        Anchor anchor = Anchor.NONE;
        MarginLayoutParams childParams = (MarginLayoutParams) child.getLayoutParams();

        if (oldParams.width <= parentView.getWidth()) {
            return;
        }

        if (oldParams.leftMargin + panX >= 0) {
            anchor = Anchor.LEFT;
        } else if (oldParams.leftMargin + panX + oldParams.width <= parentView.getWidth()) {
            anchor = Anchor.RIGHT;
        }

        if (oldParams.topMargin + panY >= 0) {
            if (anchor == Anchor.LEFT) {
                anchor = Anchor.LEFT_TOP;
            } else if (anchor == Anchor.RIGHT) {
                anchor = Anchor.TOP_RIGHT;
            } else {
                anchor = Anchor.TOP;
            }
        } else if (oldParams.topMargin + panY + oldParams.height <= parentView.getHeight()) {
            if (anchor == Anchor.LEFT) {
                anchor = Anchor.LEFT_BOTTOM;
            } else if (anchor == Anchor.RIGHT) {
                anchor = Anchor.RIGHT_BOTTOM;
            } else {
                anchor = Anchor.BOTTOM;
            }
        }

        switch (anchor) {
        case BOTTOM:
        case TOP:
            childParams.leftMargin = (int) (oldParams.leftMargin + panX);
            break;
        case LEFT:
        case RIGHT:
            childParams.topMargin = (int) (oldParams.topMargin + panY);
            break;
        case NONE:
            childParams.topMargin = (int) (oldParams.topMargin + panY);
            childParams.leftMargin = (int) (oldParams.leftMargin + panX);
            break;
        case LEFT_BOTTOM:
        case LEFT_TOP:
        case RIGHT_BOTTOM:
        case TOP_RIGHT:
            break;
        default:
            break;
        }
        child.setLayoutParams(childParams);
    }
} 
```

# rdf - SPARQL 查询 rdf 容器（rdf: Bag）

> ID：16121150
> 
> 赞同：9
> 
> 时间：2013-04-20T13:59:06.423
> 
> 标签：rdf, sparql

我有这个 RDF

```
<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:com="http://www.example.com/com#">
  <rdf:Description rdf:about="http://www.example.com/com#1">
    <com:cities>
      <rdf:Bag>
        <rdf:li>A</rdf:li>
        <rdf:li>B</rdf:li>
        <rdf:li>D</rdf:li>
      </rdf:Bag>
    </com:cities>
    <com:name>1</com:name>
  </rdf:Description>
  <rdf:Description rdf:about="http://www.example.com/com#2">
    <com:cities>
      <rdf:Bag>
        <rdf:li>C</rdf:li>
        <rdf:li>B</rdf:li>
      </rdf:Bag>
    </com:cities>
    <com:name>2</com:name>
  </rdf:Description>
  <rdf:Description rdf:about="http://www.example.com/com#3">
    <com:cities>
      <rdf:Bag>
        <rdf:li>C</rdf:li>
        <rdf:li>B</rdf:li>
        <rdf:li>D</rdf:li>
      </rdf:Bag>
    </com:cities>
    <com:name>3</com:name>
  </rdf:Description>
</rdf:RDF> 
```

使用 Sparql 我需要获取所有对象的名称，其中包含城市 D（1 和 3）。我可以做这样的事情：

```
SELECT ?name
WHERE {
?a com:cities ?cities.
?cities rdf:_1 ?s.
FILTER(?s = "D")
?a com:name ?name.    
} 
```

但它只会检查第一个元素。我可以使用 rdf:_2, rdf:_3, ... 进行更多查询并使用 UNION，但我不知道 Bag 中 rdf:li 的数量。有没有类似 rdf:all 的东西？或者其他一些解决方案来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T11:57:47.670

采用`rdfs:member`

```
?cities rdfs:member ?s. 
```

如果您的系统支持它或对属性 URI 进行过滤：

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
...
?cities ?prop ?s. FILTER (strstarts(str(?prop), str(rdf:_))) 
```

# emacs - 如果当前目录中没有匹配项，有什么方法可以让 ido-find-file 切换到另一个最近打开的文件？

> ID：16121151
> 
> 赞同：1
> 
> 时间：2013-04-20T13:59:08.027
> 
> 标签：emacs, elisp, dot-emacs, ido

Emacs ido 非常好，它让我的工作更有效率。

但是当她认为当前目录中与我输入的字符串不匹配时，总是需要自己更改目录，这让我感到相当恼火。虽然在大多数情况下，我希望她能留下来。

我知道有一些键盘映射可以解决这个问题：额外的`C`-`f`将返回正常`find-file`模式，并且`C`-`j`可用于强制 ido 使用当前目录。但是是否有任何设置使 ido 默认限制在当前目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:07:35.520

此功能称为`auto-merge`. 以下三个选项与该功能相关：

```
(defcustom ido-auto-merge-work-directories-length 0
  "Automatically switch to merged work directories during file name input.
The value is number of characters to type before switching to merged mode.
If zero, the switch happens when no matches are found in the current directory.
Automatic merging is disabled if the value is negative."
  :type 'integer
  :group 'ido)

(defcustom ido-auto-merge-delay-time 0.70
  "Delay in seconds to wait for more input before doing auto merge."
  :type 'number
  :group 'ido)

(defcustom ido-auto-merge-inhibit-characters-regexp "[][*?~]"
  "Regexp matching characters which should inhibit automatic merging.
When a (partial) file name matches this regexp, merging is inhibited."
  :type 'regexp
  :group 'ido) 
```

例如，您可以延长延迟时间或禁用该功能。要禁用该功能，请将以下语句添加到您的`.emacs`：

```
(setq ido-auto-merge-work-directories-length -1) 
```

`C-z`键绑定也取消了最后一个`auto-merge`. 请参阅以下片段`ido.el`：

```
(define-key map "\C-z" 'ido-undo-merge-work-directory) 
```

# ruby-on-rails - Heroku，锄头 gem 不在 gemlist、gemfile、gemfile.lock 中。为什么它仍然试图安装它？

> ID：16121152
> 
> 赞同：1
> 
> 时间：2013-04-20T13:59:12.143
> 
> 标签：ruby-on-rails, git, heroku

我正在尝试推送到 Heroku，它坚持尝试安装我的应用程序中没有的 gem。我已将最新更改提交到我的 git 存储库。宝石是锄头。我已经尝试了错误日志中建议的版本，但没有成功。生产不需要它，所以我决定*尝试*将它从推送中排除。

好吧，乔，它必须是.lock 中另一个宝石的依赖项...... 错误，不存在。

好吧，乔，它一定与 rvm 全局 gemset 有关。即使没有，我也删除了全局，但仍然没有运气。

推送到heroku的输出：

```
 Counting objects: 156, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (142/142), done.
Writing objects: 100% (156/156), 259.71 KiB | 158 KiB/s, done.
Total 156 (delta 27), reused 0 (delta 0)

-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Fetching gem metadata from https://rubygems.org/........
       Fetching gem metadata from https://rubygems.org/..
       Installing rake (10.0.3)
       Installing i18n (0.6.1)
       Installing multi_json (1.6.1)
       Installing activesupport (3.2.12)
       Installing builder (3.0.4)
       Installing activemodel (3.2.12)
       Installing erubis (2.7.0)
       Installing journey (1.0.4)
       Installing rack (1.4.5)
       Installing rack-cache (1.2)
       Installing rack-test (0.6.2)
       Installing hike (1.2.1)
       Installing tilt (1.3.3)
       Installing sprockets (2.2.2)
       Installing actionpack (3.2.12)
       Installing mime-types (1.21)
       Installing polyglot (0.3.3)
       Installing treetop (1.4.12)
       Installing mail (2.4.4)
       Installing actionmailer (3.2.12)
       Installing arel (3.0.2)
       Installing tzinfo (0.3.35)
       Installing activerecord (3.2.12)
       Installing activeresource (3.2.12)
       Installing net-ldap (0.3.1)
       Installing adauth (1.2.1)
       Installing sass (3.2.6)
       Installing bootstrap-sass (2.3.0.1)
       Installing carrierwave (0.8.0)
       Installing coffee-script-source (1.4.0)
       Installing execjs (1.4.0)
       Installing coffee-script (2.2.0)
       Installing rack-ssl (1.3.3)
       Installing json (1.7.7)
       Installing rdoc (3.12.1)
       Installing thor (0.17.0)
       Installing railties (3.2.12)
       Installing coffee-rails (3.2.2)
       Installing commonjs (0.2.6)
       Installing formtastic (2.2.1)
       Installing formtastic-bootstrap (2.0.0)
       Installing hoe (3.5.0)
       Gem::InstallError: hoe requires RubyGems version >= 1.4\. Try 'gem update --system' to update RubyGems itself.
       An error occurred while installing hoe (3.5.0), and Bundler cannot continue.
       Make sure that `gem install hoe -v '3.5.0'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:enigmatic-ravine-4893.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:enigmatic-ravine-4893.git' 
```

我的红宝石很好。一定是heroku不是（Wut？）：

```
$ ~/Documents/workspace/archive $ gem -v
2.0.3 
```

我的宝石都不需要锄头：

```
$ ~/Documents/workspace/archive $ gem dependencies hoe --reverse-dependencies
ERROR:  While executing gem ... (Gem::CommandLineError)
    Unknown command dependencies
$ ~/Documents/workspace/archive $ gem dependency hoe --reverse-dependencies
No gems found matching hoe (>= 0) 
```

Gemfile.lock（没有提到锄头）：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.11)
      actionpack (= 3.2.11)
      mail (~> 2.4.4)
    actionpack (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    acts-as-taggable-on (2.4.0)
      rails (~> 3.0)
    adauth (1.2.1)
      net-ldap
    arel (3.0.2)
    bcrypt-ruby (3.0.1)
    bootstrap-sass (2.3.1.0)
      sass (~> 3.2)
    builder (3.0.4)
    carrierwave (0.8.0)
      activemodel (>= 3.2.0)
      activesupport (>= 3.2.0)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.6.2)
    commonjs (0.2.6)
    diff-lcs (1.2.3)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    formtastic (2.2.1)
      actionpack (>= 3.0)
    formtastic-bootstrap (2.1.1)
      formtastic (~> 2.2)
    hike (1.2.2)
    i18n (0.6.4)
    journey (1.0.4)
    jquery-rails (2.2.1)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.7)
    kaminari (0.14.1)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
    less (2.3.2)
      commonjs (~> 0.2.6)
    less-rails (2.3.3)
      actionpack (>= 3.1)
      less (~> 2.3.1)
    libv8 (3.11.8.17)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    meta_request (0.2.3)
      rack-contrib
      railties
    mime-types (1.22)
    mini_portile (0.5.0)
    minitest (4.7.2)
    multi_json (1.7.2)
    net-ldap (0.3.1)
    nokogiri (1.5.9)
    pg (0.15.1)
    polyglot (0.3.3)
    racc (1.4.9)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-contrib (1.1.0)
      rack (>= 0.9.1)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.11)
      actionmailer (= 3.2.11)
      actionpack (= 3.2.11)
      activerecord (= 3.2.11)
      activeresource (= 3.2.11)
      activesupport (= 3.2.11)
      bundler (~> 1.0)
      railties (= 3.2.11)
    railties (3.2.11)
      actionpack (= 3.2.11)
      activesupport (= 3.2.11)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.4)
    rake-compiler (0.8.3)
      rake
    rdoc (3.12.2)
      json (~> 1.4)
    ref (1.0.4)
    rexical (1.0.5)
    rspec-core (2.13.1)
    rspec-expectations (2.13.0)
      diff-lcs (>= 1.1.3, < 2.0)
    rspec-mocks (2.13.1)
    rspec-rails (2.13.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec-core (~> 2.13.0)
      rspec-expectations (~> 2.13.0)
      rspec-mocks (~> 2.13.0)
    sass (3.2.7)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    therubyracer (0.11.4)
      libv8 (~> 3.11.8.12)
      ref
    thor (0.18.1)
    tilt (1.3.7)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    twitter-bootstrap-rails (2.2.6)
      actionpack (>= 3.1)
      execjs
      railties (>= 3.1)
    tzinfo (0.3.37)
    uglifier (2.0.1)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    validates_existence (0.8.0)
    webrat (0.7.3)
      nokogiri (>= 1.2.0)
      rack (>= 1.0)
      rack-test (>= 0.5.3)
    yaml_db (0.2.3)

PLATFORMS
  ruby

DEPENDENCIES
  acts-as-taggable-on
  adauth (~> 1.2.1)
  bcrypt-ruby
  bootstrap-sass
  bundler (~> 1.3.5)
  carrierwave
  coffee-rails (~> 3.2.1)
  formtastic
  formtastic-bootstrap
  jquery-rails
  kaminari
  less-rails
  meta_request
  mini_portile
  minitest
  pg
  racc
  rails (= 3.2.11)
  rake-compiler
  rdoc
  rexical
  rspec-rails (~> 2.0)
  sass-rails (~> 3.2.3)
  therubyracer
  twitter-bootstrap-rails
  uglifier (>= 1.0.3)
  validates_existence
  webrat
  yaml_db 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:59:17.850

我感谢大家的帮助。问题是我的 git repo 有其他版本的应用程序，其中一个用于上传。感谢您指出@sevenseacat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:14:01.393

好吧，首先确保你有 ruby​​gems 的更新版本，对于 ruby​​ 1.9.3 及更高版本，你应该拥有 ruby​​gems v 2.0 及更高版本

如果你的 ruby​​gems 低于 1.4，你真的需要更新

第二，试试这个

```
gem dependency hoe --reverse-dependencies 
```

看看有什么需要

# c++ - QSortFilterProxyModel - 找出源模型的 id 索引在代理模型中

> ID：16121154
> 
> 赞同：1
> 
> 时间：2013-04-20T13:59:17.960
> 
> 标签：c++, qt, model, qsortfilterproxymodel

我在模型中有 QSortFilterProxyModel 和项目的 QModelIndex 设置为 QSortFilterProxyModel 的源。我需要知道这个 QModelIndex 是否包含在具有当前过滤设置的 SortFilterProxyModel 模型中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:03:22.430

```
QSortFilterProxyModel * fm;
QModelIndex      sourceIndex;

if (fm->mapFromSource(sourceIndex).isValid()) {
 // element in filter proxy
} else {
 // element is not in filter proxy
} 
```

# wpf - 如何在样式资源字典中从 DataGridColumnHeader 中的文本框中触发和处理 TextChanged 事件

> ID：16121156
> 
> 赞同：2
> 
> 时间：2013-04-20T13:59:40.993
> 
> 标签：wpf, mvvm

我有 TextBox 驻留在样式资源字典中的 DataGridColumnHeader 中，TextBox 用作过滤器，所以我需要触发 TextChanged 事件并在 View Model 中处理它以实现过滤过程。重点是我需要遵守以下规则：

1.  没有代码背后
2.  视图模型中的事件处理
3.  使用样式能够一致地将其应用于所有 DataGrid
4.  将事件参数传递给视图模型以在过滤过程中使用

我做了很多谷歌搜索，但找不到符合所有这些规则的解决方案。提前致谢

编辑：这是定义文本框的资源字典的完整 xaml。注意：我正在使用 MVVM Light EventToCommand 尝试将文本框的 TextChanged 事件绑定到视图模型中的附加行为 另请注意，这个 xamle 仍在开发和修改中，知道我从 DataGrid 过滤应用程序中获得了大部分内容

```
enter code here
    <ResourceDictionary x:Class="PreCommissioning.Infrastructure.Filter2.FilteringDataGrid"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:dg="http://schemas.microsoft.com/wpf/2008/toolkit"
 xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"      
 xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4"                   
 xmlns:local="clr-namespace:PreCommissioning.Infrastructure.Filter2;assembly=PreCommissioning.Infrastructure"
 xmlns:localx="clr-namespace:PreCommissioning.Module.Subsystem.ViewModel;assembly=PreCommissioning.Module.Subsystem"    
 xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit"
>

    <local:HeaderFilterConverter x:Key="headerConverter"/>

        <Style TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                        <ControlTemplate.Resources>
                            <Storyboard x:Key="ShowFilterControl">
                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="filterTextBox" Storyboard.TargetProperty="(UIElement.Visibility)">
                                    <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}"/>
                                    <DiscreteObjectKeyFrame KeyTime="00:00:00.5000000" Value="{x:Static Visibility.Visible}"/>
                                </ObjectAnimationUsingKeyFrames>
                                <ColorAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="filterTextBox" Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)">
                                    <SplineColorKeyFrame KeyTime="00:00:00" Value="Transparent"/>
                                    <SplineColorKeyFrame KeyTime="00:00:00.5000000" Value="White"/>
                                </ColorAnimationUsingKeyFrames>
                            </Storyboard>
                            <Storyboard x:Key="HideFilterControl">
                                <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="filterTextBox" Storyboard.TargetProperty="(UIElement.Visibility)">
                                    <DiscreteObjectKeyFrame KeyTime="00:00:00.4000000" Value="{x:Static Visibility.Collapsed}"/>
                                </ObjectAnimationUsingKeyFrames>
                                <ColorAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="filterTextBox" Storyboard.TargetProperty="(UIElement.OpacityMask).(SolidColorBrush.Color)">
                                    <SplineColorKeyFrame KeyTime="00:00:00" Value="Black"/>
                                    <SplineColorKeyFrame KeyTime="00:00:00.4000000" Value="#00000000"/>
                                </ColorAnimationUsingKeyFrames>
                            </Storyboard>
                        </ControlTemplate.Resources>
                        <my:DataGridHeaderBorder x:Name="dataGridHeaderBorder" Margin="0" VerticalAlignment="Top" Height="31" IsClickable="{TemplateBinding CanUserSort}" IsHovered="{TemplateBinding IsMouseOver}" IsPressed="{TemplateBinding IsPressed}" SeparatorBrush="{TemplateBinding SeparatorBrush}" SeparatorVisibility="{TemplateBinding SeparatorVisibility}" SortDirection="{TemplateBinding SortDirection}" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" Grid.ColumnSpan="1">
                            <Grid x:Name="grid" Width="Auto" Height="Auto" RenderTransformOrigin="0.5,0.5">
                                <Grid.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform/>
                                        <SkewTransform/>
                                        <RotateTransform/>
                                        <TranslateTransform/>
                                    </TransformGroup>
                                </Grid.RenderTransform>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <ContentPresenter x:Name="contentPresenter"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                    ContentStringFormat="{TemplateBinding ContentStringFormat}" 
                                    ContentTemplate="{TemplateBinding ContentTemplate}">
                                    <ContentPresenter.Content>
                                        <MultiBinding Converter="{StaticResource headerConverter}">
                                            <MultiBinding.Bindings>
                                                <Binding ElementName="filterTextBox" Path="Text" />
                                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Content" />
                                            </MultiBinding.Bindings>
                                        </MultiBinding>
                                    </ContentPresenter.Content>
                                </ContentPresenter>

                            <!--Filter Text Box-->    
                            <TextBox x:Name="filterTextBox" HorizontalAlignment="Right" 
                                         MinWidth="25" Height="Auto" OpacityMask="Black" Visibility="Collapsed" 
                                         Text="" 
                                         TextWrapping="Wrap" Grid.Column="0" Grid.ColumnSpan="1">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="TextChanged">
                                        <cmd:EventToCommand  Command="{Binding Path=DataContext.TextChangedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"
                                                             PassEventArgsToCommand="True"
                                                             CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBox}}, Path=Name}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>

                        </Grid>
                        </my:DataGridHeaderBorder>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard x:Name="ShowFilterControl_BeginStoryboard" Storyboard="{StaticResource ShowFilterControl}"/>
                                    <StopStoryboard BeginStoryboardName="HideFilterControl_BeginShowFilterControl"/>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard x:Name="HideFilterControl_BeginShowFilterControl" Storyboard="{StaticResource HideFilterControl}"/>
                                    <StopStoryboard BeginStoryboardName="ShowFilterControl_BeginStoryboard"/>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    <Style x:Key="DataGridStyle" TargetType="DataGrid">
        <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="AlternatingRowBackground" Value="#00FFFFFF"/>
        <Setter Property="VerticalGridLinesBrush" Value="#FFC9CACA"/>
        <Setter Property="HorizontalGridLinesBrush" Value="#FFC9CACA"/>
        <Setter Property="AutoGenerateColumns" Value="False"/>
        <!--

        -->
        <Style.Triggers>
            <Trigger Property="IsGrouping" Value="true">
                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
            </Trigger>
        </Style.Triggers>
    </Style>

</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-06T22:15:23.793

我在我的应用程序中实现了一个非常相似的过滤器文本。它与命令一起使用，将参数作为当前文本。我希望这就是你要找的东西（看到这个问题这些年来仍然没有答案有点晚了）

```
<StackPanel Grid.Row="0" Orientation="Horizontal">
        <Label Content="Filter names by " ></Label>
        <TextBox Name="txtFilter" Width="290" Height="25" VerticalAlignment="Center" Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}"
                 BorderBrush="DarkGray" BorderThickness="0,0,0,1">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="TextChanged">
                    <i:InvokeCommandAction Command="{Binding FilterItemsCommand}"></i:InvokeCommandAction>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </TextBox>
    </StackPanel> 
```

在各自的 ViewModel 中，我有以下代码行来使用过滤器操作。

ViewModel 构造函数：

```
FilterItemsCommand = new RelayCommand(_ => FilterItems(), _ => CanFilterItems);
FilterText = string.Empty; 
```

和过滤器命令逻辑：

```
 [NotifyPropertyChanged]
    public string FilterText { get; set; }
    public ICommand FilterItemsCommand
    {
        get;
        set;
    }

    public void FilterItems()
    {
        // to load the items from source so every filter change will be from the source. 
        if (string.IsNullOrWhiteSpace(FilterText))
            PopulateItems(); //imagine i am loading a set of items from source to display in the UI
        else PopulateItems(filter: FilterText);
    }

    public bool CanFilterItems
    {
        get
        {
            return (Items != null);
        }
    } 
```

如果您对 PopulateItems 方法感兴趣，

```
private void PopulateLaunchItems(string filter = "")
    {
        // Add items
        Items = new ObservableCollection<SomeItemType>();

        // use your filter to manipulate the data from source
        ...
        ...
    } 
```

这是一段工作代码。我希望这对将来的某人有所帮助，即使最初被问到的人可能已经继续前进。;-)

# html - 将 HTML 源代码渲染为图像（png、gif） - 欢迎 Cocoa、Applescript、Automator evrything

> ID：16121157
> 
> 赞同：2
> 
> 时间：2013-04-20T13:59:46.233
> 
> 标签：html, perl, cocoa, applescript, automator

我正在尝试将一些 HTML 源转换为图像。最后，我想在命令行上执行此操作，但我的搜索使我想到了这个想法，即使用一个小的 Cocoa 应用程序来完成这项工作。

Applescript 或 Automator 也可能为我的问题提供帮助？

我可能考虑的一种解决方案可能是 webkit2png，一个 python 脚本。[http://www.paulhammond.org/webkit2png/](http://www.paulhammond.org/webkit2png/)

那么我还能如何将我的 HTML 呈现为图像（png、gif、jpg）？有内置的简单方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:37:22.580

我认为 AppleScript 或 Automator 没有任何内置方法可以做到这一点，但我也使用[webkit2png](http://www.paulhammond.org/webkit2png/)。

这会以 100% 的比例 (-s 1) 保存剪切的图像 (-C)：

```
webkit2png -C -s 1 -W 1000 -H 1000 --clipwidth 1000 --clipheight 1000 http://t.co 
```

-F 只保存全尺寸图像：

```
webkit2png -F http://stackoverflow.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T10:34:58.247

有一个名为“Fake”的应用程序（可在 Mac App Store 中获得），它是一个支持 AppleScript 的 Web 浏览器。它可以做的一件事是将视口渲染保存为图像文件。您可以在应用程序中构建工作流程或编写一些 AppleScript：

```
tell application "Fake"
    capture web page as screenshot saving in file ((the path to the desktop folder as text) & "Screenshot.png")
end tell 
```

您还可以在截取屏幕截图并捕获为 PNG、PDF、HTML 或 Web 存档时将窗口大小调整为各种大小。

创建的 PNG 或 PDF 渲染是全长渲染，类似于您从 WebKit-to-PNG 获得的输出。

Fake 在其他类似解决方案中脱颖而出的原因在于，您可以在屏幕截图之前编写交互脚本。Fake 的一个关键应用是让脚本模拟用户进行网站测试，因此您可以截取的屏幕截图不仅仅是页面加载时的外观。例如，您可以让 Fake 填写并提交表格，并在您提交表格时或提交表格后截屏。您还可以通过每 3 秒或其他方式截取一次屏幕截图来捕获动画，因为您正在交互式 Mac 应用程序中捕获实时浏览器视图。

# ios - 如何在文本视图中添加滚动条？

> ID：16121162
> 
> 赞同：1
> 
> 时间：2013-04-20T14:00:12.277
> 
> 标签：ios, textview, scrollbar, xamarin

iOS 用于学校项目，我用标签（带有 x 和 y 位置）动态填充我的 UITextView。但由于它有很多项目，项目的总长度大于 iPhone 屏幕高度。我预计会出现一个自动垂直滚动条，但它没有出现，因此用户无法向下阅读其余文章。

我怎样才能添加它？

感谢@elitalon的解决方案：

```
scrollTextView.ContentSize = new SizeF(scrollTextView.Frame.Width, sizeH); // Works 
```

代替

```
scrollTextView.ContentSize.Height = sizeH; // Doesn't work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:05:58.943

也许我不明白你想要实现什么，但我认为问题是对`UITextView`课程的滥用。正如[`UITextView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uitextview_class/Reference/UITextView.html)文件所说：

> *UITextView 类实现了可滚动的多行文本区域的行为”*

因此，理想情况下，您不应将`UILabel`对象添加到`UITextView`. 相反，我会为您要显示的每篇文章创建一个`UILabel`和一个：`UITextView`

```
UILabel *article1Label = [[UILabel alloc] initWithFrame:label1Frame];
UITextView *article1Text = [[UITextView alloc] initWithFrame:text1Frame];

UILabel *article2Label = [[UILabel alloc] initWithFrame:label2Frame];
UITextView *article2Text = [[UITextView alloc] initWithFrame:text2Frame];

... 
```

如果您希望您的用户滚动并阅读所有文章，您可以将所有这些子视图添加到一个`UIScrollView`对象：

```
UIScrollView *articlesScrollView = [[UIScrollView alloc] initWithFrame:scrollViewFrame];
[articlesScrollView addSubview:article1Label];
[articlesScrollView addSubview:article1Text];
[articlesScrollView addSubview:article2Label];
[articlesScrollView addSubview:article2Text]; 
```

最后，`UIScrollView`通过添加子视图的所有高度来计算内容大小。例如：

```
CGFloat totalHeight = article1Text.frame.size.height + article2Text.frame.size.height;
articleScrollView.contentSize = {
  .width = articleScrollView.bounds.size.width,
  .height = totalHeight
}; 
```

# android - 如何使用联系人数据打开 WhatsApp 的对话活动？

> ID：16121163
> 
> 赞同：6
> 
> 时间：2013-04-20T14:00:16.777
> 
> 标签：android, android-intent, whatsapp

我想从我的应用程序中打开什么是应用程序对话活动`cmp=com.whatsapp/.Conversation`。

我怎样才能做到这一点？我有联系电话号码、联系人 ID、联系人原始 ID，并且还有特定联系人的应用程序 uri。

```
private void openWhatsApp(String id) {

    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("content://com.android.contacts/data/"+id));
    Log.v("ssssss", s);
    i.setType("vnd.android.cursor.item/vnd.com.whatsapp.profile");
    i.setComponent(new ComponentName("com.whatsapp", ".Conversation"));
    startActivity(i);
}

04-20 18:13:45.794: I/ActivityManager(1862): START
{act=android.intent.action.VIEW
dat=content://com.android.contacts/data/8269
typ=vnd.android.cursor.item/vnd.com.whatsapp.profile
cmp=com.whatsapp/.accountsync.ProfileActivity} from pid 32159

04-20 18:42:11.317: I/ActivityManager(1862): START {flg=0x14000000 cmp=com.whatsapp/.Conversation (has extras)} from pid 1150 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T11:37:04.810

```
private void openWhatsApp(String id) {

Cursor c = getContentResolver().query(ContactsContract.Data.CONTENT_URI,
        new String[] { ContactsContract.Contacts.Data._ID }, ContactsContract.Data.DATA1 + "=?",
        new String[] { id }, null);
c.moveToFirst();
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("content://com.android.contacts/data/" + c.getString(0)));

startActivity(i);
c.close();
} 
```

id 是什么应用程序的 uri`0987654321@s.whatsapp.net`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T12:35:04.960

试试这个代码：

```
String smsNumber="919426640584@s.whatsapp.net";
Uri uri = Uri.parse("smsto:" + smsNumber);
Intent i = new Intent(Intent.ACTION_SENDTO, uri);
i.putExtra("sms_body", "Prakash Gajera");
i.setPackage("com.whatsapp");
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-02T09:35:27.497

当用户不知道联系电话时，我的最终解决方案。

您也可以选择设置预格式化文本。

```
 try {
        String whatsAppRoot = "http://api.whatsapp.com/";
        String number = "send?phone=+xxxxxxxxxxx"; //here the mobile number with its international prefix
        String text = "&text=HERE YOUR TEXT";
        String uri = whatsAppRoot+number+text;

        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse(uri));
        startActivity(intent);
    } catch (Exception e) {
        Toast.makeText(getApplicationContext(), 
        "WhatsApp cannot be opened", Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T04:59:32.940

你可以使用这个例子

```
startActivity(new Intent(Intent.ACTION_VIEW,
                            Uri.parse(
                                    "https://api.whatsapp.com/send?phone=+628119xxx&text=I'm%20interested%20in%20your%20car%20for%20sale"
                            ))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-05T06:31:10.947

```
 String KEY_QUICK_REPLY_TEXT = "Dear Valued Customer Thank you for contacting us your reference Number is "+refernceNumber ;
   Intent intent = new Intent(Intent.ACTION_SEND);
intent.setData(Uri.parse("http://api.whatsapp.com/send?phone="+phone +"&text="+KEY_QUICK_REPLY_TEXT));
                            startActivity(intent);

Toast.makeText(MainActivity.this, response, Toast.LENGTH_SHORT).show(); 
```

# properties - 头文件中的 Objective-C 属性 - IOS

> ID：16121166
> 
> 赞同：0
> 
> 时间：2013-04-20T14:00:23.440
> 
> 标签：properties, uiviewcontroller

我是 IOS 新手，在学习了许多在线教程之后，我遇到了这样一种情况，即`ViewController`Class 的属性被放在`@interface`. 一些 UI 属性被放置`@properties`在 内以及 内`@interface`，而一些只是在后者内。

```
@interface ViewController : UIViewController
{
    NSMutableArray *array;
    NSString *string;
}

@property (strong, nonatomic) NSMutableArray *array;
@property (strong, nonatomic) NSString *string;
@property (strong, nonatomic) NSDate *date;

@end 
```

中的属性`@interface`与私有属性相同还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:55:31.567

根据我的说法，`@interface`大括号内的变量是私有变量。但是当您`@property`为它们设置时，它们将成为受保护的变量。因此，当您`#import`上课时，您可以访问它们。

# asp.net - Azure 上的 HttpHandler

> ID：16121167
> 
> 赞同：2
> 
> 时间：2013-04-20T14:00:28.787
> 
> 标签：asp.net, azure, httphandler

我正在使用 VS 2012 在 webapp 上开发 Win7 x64。我有一些在 localhost 上运行良好的 httphandlers（在 IIS express 上的 VS 调试期间）。处理程序在 Web.config 中指定，如下所示：

```
<system.web>
   <httpHandlers>
      <add verb="*" path="login.ashx" type="MyWebApp.Logic.LoginHandler" />
   </httpHandlers>
</system.web> 
```

当我将 webapp 发布到 Azure (mydomain.azurewebsites.net/login.ashx) 时，处理程序不起作用。

我发现我必须从

```
<system.web> <httpHandlers> 
```

并将其添加到

```
<system.webServer> <handlers> 
```

但是现在即使我保留在**system.web**和**system.webServer**中，它也停止在本地主机上工作。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-28T10:44:22.397

您的 localhost 使用经典模式，而 Azure 使用集成模式。请参阅[http://msdn.microsoft.com/en-us/library/46c5ddfy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/46c5ddfy(v=vs.100).aspx)

只需将本地 IIS 更改为使用集成模式，一切都会正常工作。

# gruntjs - 使用模板作为 grunt 文件列表

> ID：16121168
> 
> 赞同：2
> 
> 时间：2013-04-20T14:00:34.897
> 
> 标签：gruntjs

我正在尝试使用模板通过 Grunt 复制一些文件。目前，我有：

```
/*global module:false*/
module.exports = function(grunt) {

  var fs = require('fs');
  var path = require('path');
  // Project configuration.
  grunt.initConfig({
    // Metadata.
    pkg: grunt.file.readJSON('package.json'),

    libSrc: ['foo/**'],

    // Task configuration.
    copy: {
        libs: {
                src: ["<%= libSrc %=>"],
                dest: 'src/'
        }

    }
  });

  // These plugins provide necessary tasks.
  grunt.loadNpmTasks('grunt-contrib-concat');
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-contrib-less');
  grunt.loadNpmTasks('grunt-contrib-copy');
  grunt.loadNpmTasks('grunt-dojo');
  grunt.loadNpmTasks('grunt-bless');

  // Default task.
  grunt.registerTask('default', ['jshint']); 

}; 
```

我的目录结构是：

```
.
./.Gruntfile.js.swp
./src
./src/foo
./src/foo/oops.js
./node_modules
./package.json
./foo
./foo/oops.js
./Gruntfile.js 
```

当我运行 Grunt 时，我得到：

```
grunt copy
Running "copy:libs" (copy) task

Done, without errors. 
```

即没有任何东西被复制。

我试过用*实际*的数组替换模板，一切正常。问题是，我将在`libSrc`这个 Gruntfile 的后续迭代中修改其他任务的值，所以我*确实*需要使用模板。

基本的 grunt 文档表明这是一种受支持的方法，特别是[http://gruntjs.com/configuring-tasks#templates](http://gruntjs.com/configuring-tasks#templates)上的示例。

那么，我在这里错过了什么吗？为什么模板没有扩展为`['foo/**']`? 有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:27:13.773

简单的错字！

该行：

```
 src: ["<%= libSrc %=>"], 
```

应该读过

```
 src: ["<%= libSrc %>"], 
```

# php - MySQL“CREATE TABLE”查询出错

> ID：16121169
> 
> 赞同：1
> 
> 时间：2013-04-20T14:00:39.957
> 
> 标签：php, mysql, sql, create-table

我知道这已经被问过数百次了，但是我环顾互联网，找不到我的语法可能有什么问题：

```
mysql_select_db('Projects');

        $sql = "CREATE TABLE $data[ID] (
            ID INT NOT NULL,
            Creator INT NOT NULL,
            Name VARCHAR(20) NOT NULL,
            Version VARCHAR(20) NOT NULL,
            Status VARCHAR(20) NOT NULL,
            Date VARCHAR(20) NOT NULL,
            Skript VARCHAR(20) NOT NULL,
            Filename VARCHAR(20) NOT NULL,
            Downloads INT NOT NULL,
            PRIMARY KEY(ID)
            )";

        if (mysql_query($sql)){

            echo "Created";

        }else{

            echo "Not created, ".mysql_error();

        } 
```

我尝试使用反引号、引号等，但徒劳无功。报错中显示的表名（21）是正确的。

这是我得到的错误，包括回显“未创建，”；：

> 未创建，您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '23 ( ID INT NOT NULL, Creator INT NOT NULL, Name VARCHAR(20) NOT NUL' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T14:04:36.733

命名对象的规则，包括MySql中的表：

[http://dev.mysql.com/doc/refman/5.1/en/identifiers.html](http://dev.mysql.com/doc/refman/5.1/en/identifiers.html)

> 标识符可以以数字开头，但除非引用，否则标识符可能不仅仅由数字组成。

你不能以数字开头命名你的表

例如，这将起作用

```
 $sql = "CREATE TABLE 't'.$data[ID] (
        ID INT NOT NULL,
        Creator INT NOT NULL,
        Name VARCHAR(20) NOT NULL,
        Version VARCHAR(20) NOT NULL,
        Status VARCHAR(20) NOT NULL,
        Date VARCHAR(20) NOT NULL,
        Skript VARCHAR(20) NOT NULL,
        Filename VARCHAR(20) NOT NULL,
        Downloads INT NOT NULL,
        PRIMARY KEY(ID)
        )"; 
```

如您所见，它开始于`t`

或在它周围使用反引号。像那样

```
 `$data[ID]` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:04:48.930

除了 $data[ID] 的值之外，您的查询似乎是正确的。你应该检查一下。

我认为问题在于 $data[ID] 的价值，它的价值是什么？此外，使用 mysqli_query() 或 PDO（如 bestprogrammerintheworld 所示）而不是旧的 mysql_query()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:07:39.417

您已经设法省略了最重要的信息，即触发 SQL 错误的 SQL 代码。但是我们可以从生成它的 PHP 中收集一些提示：

```
$sql = "CREATE TABLE $data[ID] (
            ID INT NOT NULL, 
```

...以及错误消息：

> '23 附近（ID INT NOT NULL

我怀疑您尝试运行此 SQL：

```
CREATE TABLE 23 (
    ID INT NOT NULL 
```

如果您真的想创建一个名为的表`23`，则每次使用它时都需要用反引号引用它，包括创建：

```
CREATE TABLE `23` (
    ID INT NOT NULL 
```

# python - 朴素贝叶斯的 K 折交叉验证

> ID：16121170
> 
> 赞同：0
> 
> 时间：2013-04-20T14:00:52.457
> 
> 标签：python, cross-validation

我正在尝试使用 sklearn 对我的朴素贝叶斯分类器进行 k 折验证

```
train = csv_io.read_data("../Data/train.csv")
target = np.array( [x[0] for x in train] )
train = np.array( [x[1:] for x in train] )

#In this case we'll use a random forest, but this could be any classifier
cfr = RandomForestClassifier(n_estimators=100)

#Simple K-Fold cross validation. 10 folds.
cv = cross_validation.KFold(len(train), k=10, indices=False)

#iterate through the training and test cross validation segments and
#run the classifier on each one, aggregating the results into a list
results = []
for traincv, testcv in cv:
    probas = cfr.fit(train[traincv], target[traincv]).predict_proba(train[testcv])
    results.append( myEvaluationFunc(target[testcv], [x[1] for x in probas]) )

#print out the mean of the cross-validated results
print "Results: " + str( np.array(results).mean() ) 
```

我从这个网站找到了一个代码，[https://www.kaggle.com/wiki/GettingStartedWithPythonForDataScience/history/969](https://www.kaggle.com/wiki/GettingStartedWithPythonForDataScience/history/969)。在示例中，分类器是 RandomForestClassifier，我想使用自己的朴素贝叶斯分类器，但我不太确定 fit 方法在这一行 probas = cfr.fit(train[traincv], target[traincv]).predict_proba 的作用（训练[testcv]）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:21:37.060

似乎您只需要更改cfr，例如：

```
cfr = sklearn.naive_bayes.GaussianNB() 
```

它应该工作相同。

# assembly - 为什么从 AT&T 切换到 Intel 语法会使本教程使用 GAS 出现段错误？

> ID：16121173
> 
> 赞同：10
> 
> 时间：2013-04-20T14:01:01.477
> 
> 标签：assembly, x86, intel, gnu-assembler, att

我正在阅读[http://www.ibm.com/developerworks/linux/library/l-gas-nasm/index.html](http://www.ibm.com/developerworks/linux/library/l-gas-nasm/index.html)上的一些教程，以熟悉 x86/x64。本教程代码使用所提供的代码（使用 AT&T 语法）编译和运行时不会出现问题：

```
.global main
.text
main:                               # This is called by C library's startup code
    mov     $message, %rdi          # First integer (or pointer) parameter in %edi
    call    puts                    # puts("Hello, World")
    ret                             # Return to C library code
message:
    .asciz "Hello, World"           # asciz puts a 0x00 byte at the end 
```

但是，当我将此代码转换为 Intel 语法时，我收到“分段错误”错误。

```
.intel_syntax noprefix
.global main
.text
main:                               # This is called by C library's startup code
    mov     rdi, message            # First integer (or pointer) parameter in %edi
    call    puts                    # puts("Hello, World")
    ret                             # Return to C library code
message:
    .asciz "Hello, World"           # asciz puts a 0x00 byte at the end 
```

我不熟悉 x86，所以也许我遗漏了一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-20T14:23:26.993

在 AT&T 语法中`mov $message, %rdi`，`$`表示*立即，表示**消息*的地址。

在 GAS 的 Intel 语法中，`mov rdi, message`表示绝对寻址，即*message*处的**内容**。要获取*message*的实际地址，您需要提供关键字：。**`offset``mov rdi, offset message`**

 **两个二进制文件的 Disassebly 显示了差异：

美国电话电报公司：

```
0000000000000000 <main>:
0:   48 c7 c7 00 00 00 00    mov    $0x0,%rdi 
```

英特尔：

```
0000000000000000 <main>:
0:   48 8b 3c 25 00 00 00 00    mov    0x0,%rdi 
```**

# java - 如果需要的时间太长，请跳过功能

> ID：16121176
> 
> 赞同：9
> 
> 时间：2013-04-20T14:01:13.570
> 
> 标签：java, multithreading, timer, function-call

在 Java 中，我有一个以某种方式处理文本文件的函数。但是，如果花费太多时间，该过程很可能对该文本文件无用（无论原因是什么），我想跳过它。此外，如果进程耗时过长，也会占用过多的内存。我试图以这种方式解决它，但它不起作用：

```
for (int i = 0; i<docs.size(); i++){
    try{
        docs.get(i).getAnaphora();
        }
    catch (Exception e){
        System.err.println(e);
    }
 } 
```

where`docs`只是`List`目录中的一个文件。通常我必须手动停止代码，因为它“卡在”特定文件中（取决于该文件的内容）。

有没有办法测量该函数调用的时间并告诉Java跳过该函数花费的文件超过10秒？

*编辑*
在收集了几个不同的答案后，我想出了这个工作正常的解决方案。也许其他人也可以使用这个想法。

首先创建一个实现 Runable 的类（这样你可以在需要时将参数传递给线程）：

```
public class CustomRunnable implements Runnable {

    Object argument;

    public CustomRunnable (Object argument){
        this.argument = argument;
}

    @Override
    public void run() {
        argument.doFunction();
    }
} 
```

然后在类中使用此代码`main`来监视函数（`argument.doFunction()`）的时间，如果需要很长时间则退出：

```
Thread thread;
for (int i = 0; i<someObjectList.size(); i++){          
    thread = new Thread(new CustomRunnable(someObjectList.get(i)));
    thread.start();
    long endTimeMillis = System.currentTimeMillis() + 20000;
    while (thread.isAlive()) {
        if (System.currentTimeMillis() > endTimeMillis) {
        thread.stop();
        break;
    }
    try {
        System.out.println("\ttimer:"+(int)(endTimeMillis - System.currentTimeMillis())/1000+"s");
        thread.sleep(2000);
        }
    catch (InterruptedException t) {}
    }
} 
```

我意识到`stop()`它已经过时了，但是当我希望它停止时，我还没有找到任何其他方法来停止和退出线程。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T14:04:38.490

将您的代码包装在`Runnable`or中`Callable`并将其提交给合适的 Executor 以执行它。其中一个提交方法需要一个超时时间，之后代码被中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:10:32.313

您可以使用`System.nanoTime()`内部运行方法作为条件。

例如，

```
long cur = System.nanoTime(); //records the time when start executing
...
double elapsedTime(System.nanoTime() - cur) / 1000000.0; // at the end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-18T19:36:42.493

Runnable 的详细解决方案（参见之前的 thorbjorn 的回答）：

```
 ExecutorService executorService = Executors.newSingleThreadExecutor();

           executorService.execute(() ->doFunction()); //here is the Runnable (represented as simple lambda here)

           executorService.shutdown();

           try {
                    if (!executorService.awaitTermination(2000, TimeUnit.MILLISECONDS)) {
                        System.out.println("ERROR: Stopping going to next step");
                     }
            }catch(InterruptedException e){
                   e.printStackTrace();
            } 
```

# matlab - 使用matlab进行图像增强的直方图规范

> ID：16121178
> 
> 赞同：0
> 
> 时间：2013-04-20T14:01:26.137
> 
> 标签：matlab

在直方图规范中，我们指定所需直方图的形状。对于图像，我们应该修改直方图，使其接近所需直方图的形状。谁能告诉我我该怎么做。

直方图均衡使用 histeq()。直方图规范是否有任何特殊功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:03:53.300

如果您查看文档，`histeq`您会发现它接受可选的第二个参数，即所需的直方图：

> `J = histeq(I, hgram)`变换强度图像 I 使得输出强度图像的直方图`J`与`length(hgram)`bin 近似匹配`hgram`。该向量`hgram`应包含具有适当范围内的强度值的等距 bin 的整数计数：[0, 1] 用于 double 类图像，[0, 255] 用于 uint8 类图像，[0, 65535] 用于类图像`uint16`. `histeq`自动缩放`hgram`，以便`sum(hgram) = prod(size(I))`. 当 J远小于 I 中的离散级别数`hgram`时，J 的直方图将更好地匹配。`length(hgram)`

# javascript - 用 Javascript 编码函数

> ID：16121179
> 
> 赞同：-1
> 
> 时间：2013-04-20T14:01:35.157
> 
> 标签：javascript

我正在构建一个`JavaScript`用户必须猜一个单词的小游戏。用户将获得字母，他必须将它们组合成一个单词。每次用户添加/删除字母时，系统都会检查组合的单词是否是答案。

由于游戏将主要呈现给没有编程技能的用户，而且我的服务器不是太强大，所以我决定在客户端实现单词检查。*（否则，我将不得不对 php 脚本运行 ajax 请求，该脚本可能会检查来自 mysql db 的答案。这会在服务器上引入额外的延迟和负载）*

现在，为了确保，我想让编程技能低的用户更难找出答案变量或查看比较函数。

是否有可能以`JavaScript`非人类可读的方式制作函数？或者至少让它难以阅读？

* * *

再次提醒您，我不太担心最终代码是否不够安全，并且有些人实际上破解了该`compare`功能并得到了答案 - 我会为他们的努力感到高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:09:05.897

您是否在寻找 js 混淆？可能是这个链接有帮助：

[http://badassjs.com/post/2929065287/obfuscation](http://badassjs.com/post/2929065287/obfuscation)

和

[http://adamcecc.blogspot.ru/2011/01/javascript.html](http://adamcecc.blogspot.ru/2011/01/javascript.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:10:09.400

你可以使用这样的东西：

```
var encodedData = window.btoa("the word"); // encode a string
var decodedData = window.atob(encodedData); // decode the string 
```

我只是先对所有单词进行编码，然后对他们的猜测进行编码，并将其与您最初创建的已编码字符串进行检查。

[https://developer.mozilla.org/en-US/docs/DOM/window.btoa](https://developer.mozilla.org/en-US/docs/DOM/window.btoa) [https://developer.mozilla.org/en-US/docs/DOM/window.atob](https://developer.mozilla.org/en-US/docs/DOM/window.atob)

这适用于 Firefox、Chrome、Safari ......尽管您也可以使用 Base-64 函数，如这个 stackoverflow 问题所示：[Base64 encoding and decoder in client-side Javascript](https://stackoverflow.com/questions/2820249/base64-encoding-and-decoding-in-client-side-javascript)

# python - 如果正则表达式匹配，则替换字符串并替换为与其他正则表达式匹配的其他内容

> ID：16121180
> 
> 赞同：0
> 
> 时间：2013-04-20T14:01:44.637
> 
> 标签：python, regex

在满足某些条件后，我正在尝试创建 dict 。这是代码片段：

```
def dic_gen(exc):
    param_errors = {re.sub(r"sss_", r"aaa_",err.name): err.address for err in exc.errors }
    param_errors["status"] = "ERROR"
    return param_errors 
```

上面的代码正在做的是它检查 err.name 是否有 sss_ 然后将其删除并创建一个字典。现在我还想添加另一个条件，如果它有“ttt_”然后用“bbb_”替换它是否可以使用re.sub？或者最有效的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:09:05.480

我不知道你打算用 re 做什么，但我会使用：

```
abc = "Something_sss whatever"
result = abc.replace("_sss","_ttt")
print result 
```

结果：

```
"Something_ttt whatever" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:59:31.553

通过传递`re.sub()`一个函数而不是替换字符串，你可以这样做：

```
def func(matchobj):
    return 'aaa_' if matchobj.group(0) == 'sss_' else 'bbb_'

def dic_gen(exc):
    param_errors = {re.sub(r'(sss_)|(ttt_)', func, err.name):
                       err.address for err in exc.errors}
    param_errors["status"] = "ERROR"
    return param_errors 
```

由于该函数只是一个表达式，因此您可以使用`lambda`它并避免外部函数定义（尽管它使代码的可读性降低）：

```
def dic_gen(exc):
    param_errors = {re.sub(r'(sss_)|(ttt_)', 
        lambda mo: 'aaa_' if mo.group(0) == 'sss_' else 'bbb_', err.name):
        err.address for err in exc.errors}
    param_errors["status"] = "ERROR"
    return param_errors 
```

# jsp - 无法在jsp中实现星级评分系统

> ID：16121183
> 
> 赞同：0
> 
> 时间：2013-04-20T14:02:07.650
> 
> 标签：jsp, web-applications

我正在用 Java 编写一个小型 Web 应用程序。当最终用户查看书籍的详细信息和这本书的评分时，我想为图书馆中的书籍创建一个评分系统。我使用 [http://tech.pro/tutorial/931/how-to-build-a-star-ratings-jquery-plugin](http://tech.pro/tutorial/931/how-to-build-a-star-ratings-jquery-plugin)来实现它。我的jsp页面是：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags" %>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>Star rating demo</title>
    <link type="text/css" rel="stylesheet" href="../css/jquery.ratings.css" />
    <script src="../js/jquery-1.3.2.min.js"></script>
    <script src="../js/jquery.ratings.js"></script>
    <script src="../js/example.js"></script>
    <s:head/>

</head>
<body>

    <div id="example-1"></div> <br />
    Your Rating: <span id="example-rating-1">not set</span>
    <br /><br />
    <div id="example-2"></div> <br />
    Your Rating: <span id="example-rating-2">not set</span>
    <h1><s:text name="welcome" /></h1>

</body> 
```

但星星没有显示在浏览器中。我使用 Netbeans 并在 WEB-INF 中创建文件夹，名称为 'css' 和 'js'.inside 我的 css 文件夹：

> css --> jquery.ratings.css 和星星的图片

在 js 文件夹中：

> js --> jquery.ratings.js 和 jquery-1.3.2.min.js 和 example.js

但是当我运行该应用程序时，不显示星星。谁能帮我？

原谅我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:47:33.820

CSS 文件和 JS 文件必须通过浏览器下载。而 WEB-INF 正是一个目录，prower 无法从中下载任何内容：它包含配置、类和 jar 文件，这些文件必须对 webapp 保持私有。所以你不应该把这些文件放在 WEB-INF 中。

如果浏览器地址栏中显示的 URL 是`http://localhost/myApp/foo/bar.jsp`，而你在 JSP 中的相对 URL 是`../js/example.js`，那么浏览器会下载该 URL 处的 JS 文件`http://localhost/myApp/js/example.js`。因此，在这种情况下，JS 文件应该位于名为 的目录中`js`，位于 webapp 的根目录下。

如果 URL 是`http://localhost/myApp/foo/bar/baz/bang/bing.jsp`，则浏览器将在 URL 处查找 JS 文件`http://localhost/myApp/foo/bar/baz/js/example.js`。我的建议：不要对你的 JS 和 CSS 文件使用相对路径（事实上，对于其他所有文件）。使用绝对路径：

```
<script src="<c:url value='/js/example.js'/>"></script> 
```

这样，无论页面的 URL 是什么，浏览器都会始终在 URL 处查找 JS 文件`http://localhost/myApp/js/example.js`。

# javascript - 使用 onClick 事件模拟按键

> ID：16121186
> 
> 赞同：3
> 
> 时间：2013-04-20T14:03:04.277
> 
> 标签：javascript, html, css

当我单击 DIV 时，我想模拟按下 ESC 键（ASCII：27）。我不想使用任何 jQuery 插件。

```
<script type="text/javascript">
        $('body').keydown(function(e) {
            if (e.keyCode == 27) {
                alert('yay 4 escape keys')
            }
            console.log(e);
        });

        var e = $.Event("keydown", {
            keyCode: 27
        });

        $('#escape').click(function() {
            $("body").trigger(e);
        });
    </script> 
```

我使用了这个事件处理程序，但它似乎不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:06:02.600

```
$(function(){  
 var e = jQuery.Event("keydown");
    e.which = 27; 

     $('#escape').click(function() {
                $("body").trigger(e);
            });

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T14:19:21.003

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)可以提供帮助

```
jQuery.event.trigger({ type : 'keypress', which : 27 }); 
```

# ruby-on-rails - 在 Ruby 单元测试中，如何断言一个字符串包含某个子字符串？

> ID：16121190
> 
> 赞同：35
> 
> 时间：2013-04-20T14:03:09.763
> 
> 标签：ruby-on-rails, ruby, string, unit-testing

在 Ruby 单元测试中，如何断言字符串包含子字符串？就像是：

```
assert_contains string_to_test, substring_to_verify 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-20T14:56:22.203

`assert_match pattern, string, [message]`如果`string =~ pattern`：_

```
assert_match substring_to_verify, string_to_test 
```

例如

```
assert_match /foo/, "foobar" 
```

如果您经常使用它，为什么不编写自己的断言呢？

```
require 'test/unit'

module Test::Unit::Assertions
  def assert_contains(expected_substring, string, *args)
    assert_match expected_substring, string, *args
  end
end 
```

或者，使用@IvayloStrandjev 描述的方法（更容易理解），您可以定义

```
require 'test/unit'

module Test::Unit::Assertions
  def assert_contains(expected_substring, string, *args)
    assert string.include?(expected_substring), *args
  end
end 
```

用法完全符合您在问题中的要求，例如

```
class TestSimpleNumber < Test::Unit::TestCase
  def test_something
    assert_contains 'foo', 'foobar'
  end

  def test_something_fails
    assert_contains 'x', 'foobar', 'Does not contain x'
  end
end 
```

哪个会产生

```
Run options:

# Running tests:

.F

Finished tests in 0.000815s, 2453.9877 tests/s, 2453.9877 assertions/s.

  1) Failure:
test_something_fails(TestSimpleNumber) [assertion.rb:15]:
Does not contain x

2 tests, 2 assertions, 1 failures, 0 errors, 0 skips 
```

## 编辑

根据要求，使用自动消息：

```
module Test::Unit::Assertions
  def assert_contains(exp_substr, obj, msg=nil)
    msg = message(msg) { "Expected #{mu_pp obj} to contain #{mu_pp exp_substr}" }
    assert_respond_to obj, :include?
    assert obj.include?(exp_substr), msg
  end
end 
```

改编[自](https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/minitest/unit.rb#L298)[原文`assert_match`](https://github.com/ruby/ruby/blob/ruby_2_0_0/lib/minitest/unit.rb#L298)。这实际上也适用于数组！

```
assert_contains 3, [1,2,3] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-20T14:05:44.393

例如，你可以写`assert string_to_test.include?(string_to_verify)`。您不能期望对您想要执行的所有检查都有断言，因此只需执行布尔条件的经典检查即可。

还可以在[这里](http://en.wikibooks.org/wiki/Ruby_Programming/Unit_testing#Available_Assertions)查看所有可用断言的列表。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-06-01T09:26:00.140

有`assert_includes`：

```
assert_includes 'foobar', 'foo' 
```

将断言`foobar`包含`foo`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T14:38:40.247

我会使用其中之一：

```
assert(string_to_test[substring_to_verify])
assert_equal(substring_to_verify, string_to_test[substring_to_verify]) 
```

他们完成同样的事情，所以第一个是我通常的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T14:10:39.400

像这样：

```
assert string_to_test.index(substring_to_verify) 
```

如果未找到子字符串，.index 方法将返回 nil，这将导致断言失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T14:54:55.420

我会使用`assert_match`：

```
require 'test/unit'

class MyTest < Test::Unit::TestCase
  def test_match
    assert_match( /aa/, 'xxaaxx')
  end
  def test_match_fail
    #~ assert_match( /aa/, 'xxbbxx')  #fails
  end
end 
```

如果你经常需要它，你可以扩展 TestCase：

```
require 'test/unit'

module Test
  module Unit
    class TestCase
      #Define new assertion
      def assert_contains(string_to_test, substring_to_verify)
        assert_match( string_to_test, substring_to_verify)
      end
      def assert_not_contains(string_to_test, substring_to_verify)
        assert_not_match( string_to_test, substring_to_verify)
      end
    end
  end
end
class MyTest < Test::Unit::TestCase
  def test_contains()
    assert_contains( /aa/, 'xxaaxx')
    assert_contains( 'aa', 'xxaaxx')
  end
  #~ def test_contains_fail()
    #~ assert_contains( 'aa', 'xxxxxx')
    #~ assert_contains( /aa/, 'xxxxxx')
  #~ end
  #~ def test_contains_not_fail()
    #~ assert_not_contains( /aa/, 'xxaaxx')
    #~ assert_not_contains( 'aa', 'xxaaxx')
  #~ end
  def test_contains_not()
    assert_not_contains( 'aa', 'xxxxxx')
    assert_not_contains( /aa/, 'xxxxxx')
  end
  def test_contains_special_characters()
    assert_contains( '[aa', 'xx[aaxx')
    #~ assert_contains( /[aa/, 'xx[aaxx')
  end
end 
```

评论：

*   当您使用特殊的正则表达式字符（如 []....）时，您可以在字符串中使用它（至少我的实验`test_contains_special_characters`工作。
*   您可以定义自己的正则表达式。

# ruby-on-rails - 需要在 Rails 中重新编译资产以防发生变化。我该如何摆脱它？

> ID：16121191
> 
> 赞同：3
> 
> 时间：2013-04-20T14:03:10.050
> 
> 标签：ruby-on-rails, ruby

我有一个 Rails 应用程序。这里是development.rb的部分内容

```
config.assets.debug = true
config.assets.compress = false 
```

当我更改任何`js`文件时，我必须打电话 `RAILS_ENV=development rake assets:precompile`查看更改。我想知道为什么？我该如何摆脱它？我只想保存`javascript`文件而不做任何额外的工作。

PS这不仅仅是关于javascript文件。即使我更改了 haml 文件，我也必须调用`RAILS_ENV=development rake assets:precompile`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T14:20:41.733

每次运行`assets:precompile`Rails 时，将编译好的资产放入`public/assets`. 问题是资产管道将始终从`public`目录中找到资产，如果它在这里找到它。否则它将在目录中搜索资产，该`app/assets`目录是开发中资产的适当位置。

您不应该在开发环境中预编译资产，资产预编译适用于生产环境。如果您想定期执行此操作，例如检查已编译/缩小的资产，请不要忘记`public/assets`在完成后删除该目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T14:12:34.960

尝试删除 public/assets 目录。从您的应用程序目录中：

```
rm -rf public/assets 
```

# matlab - 矩阵特定列中的最大值

> ID：16121197
> 
> 赞同：1
> 
> 时间：2013-04-20T14:03:37.373
> 
> 标签：matlab, matrix, row, max

假设我们有一个维度为 的矩阵`10x2`。如何`1`仅在 中找到列的行的最大值`matlab`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:27:24.610

```
A = rand(10,2);    % 10x2 matrix
max(A(:,1));       % max for column 1 of A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-25T23:30:14.097

```
A = rand(10,2);       %10x2 matrix
Amax = max(A,[],1);   %max across rows
Amax(1)               %max of the 1st col 
```

从某种意义上说，这是一种更通用的方法，它首先计算所有行的最大值，这对于访问多个最大元素很有用。

# css - 媒体查询被忽略

> ID：16121198
> 
> 赞同：2
> 
> 时间：2013-04-20T14:03:39.447
> 
> 标签：css, media-queries, media

我有一个小问题，我的 css 媒体查询被忽略了，或者主要 css 是。

我正在尝试更改媒体查询中字体大小的值，台式机为 75 像素，手机为40 像素`(max-width:320px;)`左右。但它不起作用。

我的 CSS 媒体查询代码是：

```
/* Smartphones (portrait) ----------- */

@media only screen and (min-width : 320px) {
  h1.site-title {
    color: #fff;
    font-family: 'Open Sans', sans-serif; 
    font-size: 40px; 
    font-weight: 800; 
    line-height: 1em;
  }
} 
```

当我在媒体查询 css 中更改字体大小值时，它会在整个页面中更改。（台式机、平板电脑等）

我做错了什么？:(

谢谢，

干杯

PS：CSS Media Queries 是一个单独的文件，添加在 html 头中，我有这一行：

```
<meta name="viewport" content="width=device-width">. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-20T18:47:07.050

确保您的媒体查询放置在原始声明之后：

这将起作用： [**示例**](http://jsfiddle.net/kvrKQ/)

```
.test{
    width:500px;
    height:50px;
    background:red;
}

@media (max-width:500px){
.test{
    width:200px;
}
} 
```

这不起作用：[**示例**](http://jsfiddle.net/kvrKQ/1/)

```
@media (max-width:500px){
.test{
    width:200px;
}
}
.test{
    width:500px;
    height:50px;
    background:red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T14:19:24.940

您的查询说媒体类型是屏幕，最小宽度是 320 像素。这适用于桌面，因此 css 也适用于桌面。如果您专门为平板电脑需要它，那么您将必须添加一些属性，该属性对于桌面为 false，但对于其他设备为 true。`max-width`就是这样一种财产。

看看这个[链接](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T14:14:03.460

确保您的媒体查询处于“正文”级别。否则您的视口的最小宽度将无法识别。

# entity-framework - 如何停止导航属性自引用？

> ID：16121200
> 
> 赞同：1
> 
> 时间：2013-04-20T14:03:44.567
> 
> 标签：entity-framework, entity-framework-5

我有 2 个与导航属性一对多关联的实体。延迟加载已禁用。

```
 var det = db.Detail.Include(m=>m.Master); 
```

上面的语句还包括Master的导航属性“Detail”（自引用）。

对于 Detail 的每个实例，我都有一个嵌套的 Master，它有一个嵌套的相关详细信息列表......

我怎样才能停止这种递归？我不想检索 Master 的导航属性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:18:06.837

这不是递归。EF 仅加载`Detail`实体并且因为您`Include`的相关`Master`实体。您在加载的 s`Detail`的导航属性中看到的实体是已作为父对象加载的实体。在实体加载到上下文后，EF 会自动将此对象图放在一起。这叫做*关系修复*，你不能阻止它。`Master``Detail`

# javascript - 从字符串转换为浮点数时用 2 位小数舍入

> ID：16121213
> 
> 赞同：0
> 
> 时间：2013-04-20T14:05:37.890
> 
> 标签：javascript

当我将数字 1.4034 舍入到小数点后两位时，我得到 1.4 而不是 1.40。我如何获得 1.40？我可以使用 toFixed(2) 但它返回一个字符串。我需要它是一个浮动。有任何想法吗？

这是我的代码

```
var num = 1.40345;
var stringnumber = Math.round(num * 100) / 100; 
```

**更新：**我想要这样做的原因是因为我使用的图表库 highchart 只排除浮点值。浮点值打印在每个条上，当某些值带有一位小数而有些带有两位时，它看起来很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:09:18.667

这很愚蠢。`1.40 === 1.4`...为什么你可能想要`1.40`作为一个浮动？

基本上，这是不可能的。

例如，试试这个。

```
parseFloat('1.40') 
```

你只会`1.4`再次结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:13:41.680

当 stringnumber 是数字时，1.4 和 1.40 没有区别，因为 1.4.toFixed(2) 是“1.40”。

精度仅在您将其打印出来时才重要，即作为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:16:59.943

1.4 与 1.40 仅在您谈论诸如打印字符串之类的视觉表示时才有优点。

在谈论数据类型 Number 时，您无法区分 1.4 和 1.40，因为那是完全相同的东西。

# types - Android：双精度类型的错误计算

> ID：16121214
> 
> 赞同：0
> 
> 时间：2013-04-20T14:05:43.593
> 
> 标签：types, double

请帮忙。使用 like double 时，我遇到了计算错误的问题。例如，我们使用下面的代码：

```
double a = 2.01;
double b = 1.01;
double c = 100*(a - (int)a);
double d = 100*(b-(int)b); 
```

在我的日志中，我看到以下内容：c = 1.0000001 和 d = 0.99999987。如何使计算得到更精确的结果，即 0.01？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:21:56.513

好吧，计算机不会像我们一样思考或存储数字。在计算机中有几种存储和访问浮点数的方法——称为数值分析；基本上如何近似浮点数。

[https://en.wikipedia.org/wiki/Numerical_analysis](https://en.wikipedia.org/wiki/Numerical_analysis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:10:47.207

使用`Math.round(num)`而不是 int 强制转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:12:47.380

您可以使用[BigDecimal](https://developer.android.com/reference/java/math/BigDecimal.html)进行数学运算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T14:19:34.380

问题是双精度是基于二进制的并且精度有限。它们不能准确地表示`2.01`或`1.01`（或[几乎所有](http://en.wikipedia.org/wiki/Almost_all)实数）。这并不意味着它们没有用，通常我们不关心这样的小差异。如果你这样做，你将不得不使用其他东西（比如定点或 BigDecimal）

# iphone - 强制重新计算键盘高度

> ID：16121217
> 
> 赞同：0
> 
> 时间：2013-04-20T14:06:11.393
> 
> 标签：iphone, xcode4.6

这个问题与我的其他问题有关[，](https://stackoverflow.com/questions/16110522/move-view-when-jumping-from-text-field-to-text-field)但这是我面临的问题中更集中的部分。

我有 5 个文本字段，我想移动（滚动）视图，这样键盘就不会隐藏活动字段。我已经按照 Apple 推荐的标准方法实现了 keyboardWillShow: text field 委托方法，并且当我第一次点击任何文本字段时它工作得很好。

但是，我已将键盘上的 Return 按钮替换为 Next 按钮。按下它时，焦点会跳转到下一个文本字段。而且由于该过程中的键盘既没有隐藏也没有再次显示，所以我的keyboardWillShow：方法没有被调用 - 我从我放置在那里的NSLogs中看到了这一点，这些NSLogs没有出现在控制台中。

单击下一步时如何强制重新计算键盘高度的任何想法？我理解的一件事是，为了获得键盘高度（我不想使用硬编码的高度），我需要将计算保存在以 aNotification 作为参数的方法中。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:39:37.893

当然`keyboardWillShow`不是如你所说的那样调用。

只需使用`textField:didEndEditing`, 或更好`textField:shouldBeginEditing`的下一个文本字段，并使用相同的逻辑。

要解决键盘高度和位置问题，请保留一个包含您需要的数据的变量，并使用常用的通知挂钩来使其保持最新。

# sql - SQL 和 Visual Studios - 传递变量

> ID：16121219
> 
> 赞同：3
> 
> 时间：2013-04-20T14:06:33.643
> 
> 标签：sql, vb.net, visual-studio-2012

我需要帮助将变量从我的 Visual Basic 应用程序传递到 SQL 查询，以更新我的数据库并根据我使用的变量检索数据。

这样做的正确方法是什么：

我的数据库正在存储 appName、appLink 和 clickCount。每次我单击关联的应用程序时，它都会启动链接，然后我希望它将 clickCount 增加一。跟踪最常用的链接。

我刚在想，

```
UPDATE myTable
SET clickCount = clickCount + 1
WHERE appName = (variable I am passing | link user clicked on) 
```

但是如何将变量从 VB 获取到我的 SQL 语句中呢？我将在我的 VB 应用程序中执行许多功能，并且需要公开地将数据传入和传出我的 SQL 服务器。实现这一目标的最佳方法是什么？

旁注... 什么时候应该使用 SQL 中的存储过程或函数而不是 VB 中的函数？

最后，我真正知道的唯一语言是 Python，所以我正在学习 SQL 和 VB 来完成这个项目。在 Python 中，使用 SQLite，代码都在同一个地方。我可以编写一个函数来完成上述所有操作。我可以在VB中做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:12:51.523

您的问题不包含任何实际代码，所以我只会给您一个伪代码。首先，我定义了一个名为 UpdateClickCount 的方法，它接收应用程序名称和链接名称

```
 Public Sub UpdateClickCount(ByVal appName as String, ByVal linkName as String)
     Using sqlCon = new SqlConnection(connectionString)
          sqlCon.Open()
          Dim sqlText = "UPDATE myTable SET clickCount = clickCount + 1 " & _
                        "WHERE appName = @name AND link = @link"
          Dim cmd = new SqlCommand(sqlText, sqlCon)
          cmd.Parameters.AddWithValue("@name", appName)
          cmd.Parameters.AddWithValue("@link", linkName)
          cmd.ExecuteNonQuery()
     End Using
 End Sub 
```

在该方法中，首先要做的是使用一个连接字符串打开[SqlConnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx) ，该连接字符串包含到达数据库的所有信息。
接下来，更新数据库的命令文本被定义并分配给一个字符串。
此命令包含两个参数占位符（@name 和@link）。
现在我们可以使用字符串和连接来定义[SqlCommand 。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)
在执行命令之前要做的最后一件事是定义两个参数及其值。

[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)将所有内容提交到数据库并更新您的数据。
通常这是更新数据库的每个命令的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:11:07.327

您可以使用 sqlcommand 对象来构建您的 sql 语句并使用参数占位符来分配变量。

# ruby-on-rails - 如何以编程方式获取 FB 喜欢的数量

> ID：16121220
> 
> 赞同：0
> 
> 时间：2013-04-20T14:06:45.830
> 
> 标签：ruby-on-rails, koala

在 Rails 应用程序中使用 Koala，我需要获取动态页面的 Facebook 喜欢总数。

例如，如果有一个 User 模型，我想获取每个 User 的显示页面的点赞数，并将其存储在 User.likes 属性中。

我面临两个挑战：

1.  koala`get_object`方法需要 Facebook UID。如何从其 url 获取页面的 UID？

2.  使用 Facebook 开放图形浏览器，哈希似乎不包括点赞数？如何从打开的图表中访问喜欢的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T12:41:06.280

我最终设法解决了这个问题的两个部分。最后我彻底放弃了考拉的get_object，直接上open graph。

首先，我需要在我的应用程序中找到代表感兴趣页面的打开图形对象。我在`http://graph.facebook.com.?ids=http://my.app.com/user/xx`.

这返回了一个我需要解析的 json 对象。

最后，我需要从 json 对象中访问正确的键/值。

所以把这一切放在我的用户模型中

```
class User
  def facebook_likes
    user_url = UrlGenerator.new.user_url(self)  
    #UrlGenerator is a custom module that allows  
    #access to Rails route helpers in the model, 
    #no doubt some will consider this bad practice but
    #in this case I believe it is justified
    graph_url = "https://graph.facebook.com/?ids=#{user_url}"
    graph_object = JSON.parse( open( graph_url ).read )
    likes = graph_object["#{UrlGenerator.new.candidate_url(self)}"]["shares"] || 0 #returns 0 if no likes found
  end
end 
```

如果有更好的方法，我愿意接受建议

# linux - Dtrace 无效的探针说明符错误

> ID：16121222
> 
> 赞同：3
> 
> 时间：2013-04-20T14:06:53.020
> 
> 标签：linux, debugging, ubuntu, dtrace

我在 Ubuntu 11.04 中安装了 Dtrace。

我能够运行：

```
dtrace -n 'syscall:::' 
```

和：

```
sudo dtrace -l | grep terminal 
```

命令正确并得到结果。

但是当我尝试运行时：

```
dtrace -n 'proc:::exec-success { trace(curpsinfo->pr_psargs); }' 
```

我收到错误消息：

> `dtrace`: 无效的探测说明符`proc:::exec-success`{ trace(curpsinfo->pr_psargs); }：探针描述`proc:::exec-success`不匹配任何探针。

这里有什么问题？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:34:08.037

检查探针是否存在`dtrace -l`。`proc:::exec-success`DTrace 端口在不同时间采用不同的提供程序。不完整的端口可能还没有 proc 提供程序。

# javascript - 当数组字段为空时，替换值不起作用

> ID：16121225
> 
> 赞同：0
> 
> 时间：2013-04-20T14:07:03.427
> 
> 标签：javascript, jquery

我有这个代码：

```
$('#myTextArea').val($('#myTextArea').val().replace(linesText[4] + '\n', "")); 
```

它工作正常。在这种情况下，问题是：

```
$('#myTextArea').val() = "\n\n33333333333\n\n\n" 
```

和linesText是这个数组：

```
0: ""
1: ""
2: "33333333333"
3: ""
4: ""
5: "" 
```

我想要发生的事情：$('#myTextArea').val() 变成“\n\n33333333333\n\n”。

怎么了：

```
$('#myTextArea').val() 
```

变成

```
"\n33333333333\n\n". 
```

发生这种情况是因为我实际上将“”+“\n”替换为“”并且它需要第一个“\n”。我想拿第四个。如何解决这个问题？这在linesText 的字段不为空时有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:20:27.530

我做了一个可能需要改进的小功能，但似乎有效：

```
var ok = "\n\n33333333333\n\n\n";

function replaceSymbol(dataStr, toFind, elemPos) {
    var spacing = toFind.length;
    var indexToReplace = 0 - spacing;
    var curString;
    for (var i = 0; i < elemPos; i++) {
        curString = dataStr.substr(indexToReplace + spacing);
        if (curString.indexOf(toFind) == -1) 
            return false;
        indexToReplace = indexToReplace + curString.indexOf(toFind) + spacing;
    }
    return dataStr.substr(0, indexToReplace) + dataStr.substr(indexToReplace + spacing);
}

replaceSymbol(ok, '\n', 4); 
```

此函数要求 3 个参数，字符串 (ok)、要替换的符号 ('\n') 和位置（在本例中为符号的第 4 次出现）

如果函数在该位置之前/中找不到符号，则函数返回false，而如果一切正常，函数将返回没有第N个位置元素的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:31:29.953

我相信这可能是你想要做的

```
var parts = $('#myTextArea').val().split('\n');
parts[4].replace(linesText[4] + '\n', "");
$('#myTextArea').val(parts.join('')); 
```

# android - 安卓应用内购买 API 3

> ID：16121226
> 
> 赞同：0
> 
> 时间：2013-04-20T14:07:18.410
> 
> 标签：android, in-app-billing

我试图弄清楚如何在包含十几个活动的应用程序中实现应用程序内购买。主要问题是在哪里放置`IABHelper m_helper;`对象？一切都很简单，以防单活动应用程序（例如示例“android-sdk\extras\google\play_billing\samples\TrivialDrive\src\com\example\android\trivialdrivesample”）。

但我需要从几个`Activities`. `IABHelper m_helper;`在每个人中定义 a 很酷吗？我怀疑没有。如果我只在我的根活动中定义它，我如何从辅助活动中访问它？此外，看看这样的场景：

1.  启动应用程序。
2.  根活动启动和计费系统 ( `IABHelper m_helper`) 设置。
3.  进入次要活动。现在我可以（以某种方式）访问根活动`m_helper`，因为根活动还没有被破坏。
4.  按主页按钮
5.  启动一百万个酷炫的 Android 应用程序。
6.  返回我的应用程序。次要活动唤醒，但 Root 在第 5 步被 Android 杀死。我无法访问`m_helper`.

缺少一些 Android 概念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:03:23.477

`IABHelper`提供连接`Activity`到帐单的便捷方法`Service`。它不是一个全局连接，因此您当然可以为每个`Activity`需要读取/写入计费信息的连接创建一个。

但是，请确保您只`m_helper.setup(this)`为每个 Activity 调用一次（通常在`onCreate`for that 中`Activity`）。同样，每次只调用`m_helper.dispose()`一次`Activity`（通常在`onDestroy`方法中）。

# opengl-es - 没有着色器的 OpenGLES 2

> ID：16121231
> 
> 赞同：0
> 
> 时间：2013-04-20T14:08:37.240
> 
> 标签：opengl-es, opengl-es-2.0

可能这个问题的标题听起来有点不对劲。

我正在尝试遵循本教程[http://ogldev.atspace.co.uk/www/tutorial02/tutorial02.html](http://ogldev.atspace.co.uk/www/tutorial02/tutorial02.html) 它适用于 OpenGL 3.3，但我想我可以从中学到很多东西。所以我试图在 OpenGLES 2 中翻译它。

作者在谈到该功能时`glEnableVertexAttribArray(0);`说：

> 在本教程中，我们还没有使用任何着色器，但是我们已经加载到缓冲区中的顶点位置在固定函数管道中被视为顶点属性索引 0（当没有着色器绑定时它会变为活动状态）。您必须启用每个顶点属性，否则管道将无法访问数据。

这是我第一次尝试在没有着色器的情况下使用 OpenGLES 2。有可能的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:15:08.383

好吧，据我所知，不能忽略 OpenGL ES 2.0 应用程序中的着色器。与 OGL ES 1.1 相比，删除了固定功能管道。这就是为什么一切（片段/顶点处理）都必须由自定义着色器完成的原因。更多细节参见： [OpenGL ES Overview](http://en.wikibooks.org/wiki/OpenGL_Programming/OpenGL_ES_Overview)

# windows - 运行时错误“429”：ActiveX 组件无法创建对象

> ID：16121232
> 
> 赞同：-2
> 
> 时间：2013-04-20T14:08:40.163
> 
> 标签：windows, vba, excel, com, vb6

我使用 Excel 处理 VBA，在 windows OS（32 位）和 office 2007（office 32 位）上工作正常当我开始在 Windows 8（64 位）和 office 2010（64 位）上工作时，我无法运行应用程序所以对于我添加的以下代码行，因为 excel office 2010 带有 VBA7。

```
#If VBA7 Then 
Declare PtrSafe Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As LongPtr) 
#Else 
Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long) 
#End If 
#If VBA7 Then 
Declare PtrSafe Function CreateFile Lib "kernel32" Alias "CreateFileA" (ByVal lpFileName As String, ByVal dwDesiredAccess As LongPtr, ByVal dwShareMode As LongPtr, ByVal lpSecurityAttributes As Any, ByVal dwCreationDisposition As LongPtr, ByVal dwFlagsAndAttributes As LongPtr, ByVal hTemplateFile As LongPtr) As Long 
Declare PtrSafe Function WriteFile Lib "kernel32.dll" (ByVal hFile As LongPtr, ByRef lpBuffer As Any, ByVal nNumberOfBytesToWrite As LongPtr, ByRef lpNumberOfBytesWritten As LongPtr, ByRef lpOverlapped As LongPtr) As Long 
Declare PtrSafe Function ReadFile Lib "kernel32" (ByVal hFile As LongPtr, ByRef lpBuffer As Any, ByVal nNumberOfBytesToRead As LongPtr, ByRef lpNumberOfBytesRead As LongPtr, ByRef lpOverlapped As Any) As Long 
Declare PtrSafe Function CloseHandle Lib "kernel32.dll" (ByVal hObject As LongPtr) As Long 
#Else 
Declare Function CreateFile Lib "kernel32" Alias "CreateFileA" (ByVal lpFileName As String, ByVal dwDesiredAccess As Long, ByVal dwShareMode As Long, ByVal lpSecurityAttributes As Any, ByVal dwCreationDisposition As Long, ByVal dwFlagsAndAttributes As Long, ByVal hTemplateFile As Long) As Long 
Declare Function WriteFile Lib "kernel32.dll" (ByVal hFile As Long, ByRef lpBuffer As Any, ByVal nNumberOfBytesToWrite As Long, ByRef lpNumberOfBytesWritten As Long, ByRef lpOverlapped As Long) As Long 
Declare Function ReadFile Lib "kernel32" (ByVal hFile As Long, ByRef lpBuffer As Any, ByVal nNumberOfBytesToRead As Long, ByRef lpNumberOfBytesRead As Long, ByRef lpOverlapped As Any) As Long 
Declare Function CloseHandle Lib "kernel32.dll" (ByVal hObject As Long) As Long 
#End If 
```

它工作得很好但是当我尝试访问应用程序（excel表）时，我得到了

**错误“运行时错误 429 - ActiveX 组件无法创建对象”**

我的问题：**我只遇到 64 位 Windows 8 和 64 位 Office 2010的问题**

1.  上面声明的代码有什么错误吗？

2.  可以强制在 64 位操作系统上运行 32 位 COM 对象吗？

**在这里创建对象**

```
Dim objScript As New ScriptControl
Dim objNavFunctions As New NavFunctions
....
....
....

objScript.Language = "vbscript" ' **// here getting error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:09:35.740

Microsoft 建议安装 32 位版本的 Office，即使您可能拥有 64 位版本的 Windows。64 位版本的功能较少，包括 ActiveX 控件和 VBA 限制等。这是 Microsoft 对此问题的引用。

> “32位版本的Office中有什么，64位版本的Office不包含什么？ActiveX控件库，ComCtl这个库包含用于构建解决方案的ActiveX控件。最常用在以下微软Office 程序：Access、Excel 和 Word。SharePoint 列表控件 SharePoint Technology 中的列表视图对使用 64 位版本 Office 的人不可用。

[更多关于微软文章的信息。](http://office.microsoft.com/en-us/excel-help/choose-the-32-bit-or-64-bit-version-of-office-HA010369476.aspx)

# sqlite - 数据库表不存在，但在尝试创建它时和之后它确实存在

> ID：16121234
> 
> 赞同：3
> 
> 时间：2013-04-20T14:08:45.567
> 
> 标签：sqlite, qt

如果表尚不存在，我试图仅初始化我的 sqlite 数据库。如果没有，则应创建它们。现在检查总是在干净的数据库上成功（当然该表还不存在），但是一旦我尝试在`if`-block 内创建它，sqlite 就会抱怨它确实存在。我可以在该代码运行后确认该表存在，但我仍然从`qFatal`调用中收到该错误消息。

```
#include <QApplication>
#include <QDebug>

#include <QSqlDatabase>
#include <QSqlQuery>
#include <QSqlError>
#include <QStringList>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName(":memory:");
    if(!db.open())
        qDebug() << "Couldn't open database file!";
    else
        qDebug() << "Opened database :memory:";

    qDebug() << "Existing tables:";
    QStringList::const_iterator it;
    for(it = db.tables().begin(); it != db.tables().end(); it++)
        qDebug() << it->toLocal8Bit().constData();
    qDebug() << "End";

    if(!db.tables().contains(QString("testtable")))
    {
        // The files table doesn't exist
        qDebug() << "Initializing DB";
        QString queryText = "CREATE TABLE testtable (id varchar(32) NOT NULL)";
        QSqlQuery query(queryText, db);
        if(!query.exec())
            qFatal("Couldn't initialize database: %s: %s", qPrintable(query.lastError().driverText()), qPrintable(query.lastError().databaseText()));
    }

    return a.exec();
} 
```

参考输出：

```
Opened database :memory: 
Existing tables: 
End 
Initializing DB 
Couldn't initialize database: Unable to fetch row: table testtable already exists 
```

我通过`IF NOT EXISTS`在 sql 查询中使用来解决这个问题，但这并没有真正解决问题。（OS X 和 Ubuntu 12.04 上的 Qt 4.8）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:32:56.043

可能是我遗漏了一些东西，但是如果您使用“：memory：”存储，为什么需要这样的检查。无论如何，在进程重新启动后，您的数据库将为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T14:02:20.563

我自己也注意到了这种行为。如果你查看[源代码](http://code.qt.io/cgit/qt/qtbase.git/tree/src/sql/drivers/sqlite/qsql_sqlite.cpp#n586)，你会看到这一行：

```
int openMode = (openReadOnlyOption ? SQLITE_OPEN_READONLY : (SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE)); 
```

然后，进入[SQLite 的源代码](http://code.qt.io/cgit/qt/qtbase.git/tree/src/3rdparty/sqlite/sqlite3.h#n2781)：

```
** ^(<dt>[SQLITE_OPEN_READWRITE] | [SQLITE_OPEN_CREATE]</dt>
** <dd>The database is opened for reading and writing, and is created if
** it does not already exist. This is the behavior that is always used for
** sqlite3_open() and sqlite3_open16().</dd>)^ 
```

我没有进一步关注它，但我认为可以安全地假设 Qt 正在传递这个标志。

这似乎是特定于驱动程序的行为，所以也许这就是它[没有记录](http://doc.qt.io/qt-5/qsqldatabase.html#open)的原因。

# javascript - 平滑 GPS 跟踪的路线坐标

> ID：16121236
> 
> 赞同：4
> 
> 时间：2013-04-20T14:09:04.697
> 
> 标签：javascript, google-maps, polyline, geography

我有一些我记录的坐标数据。不幸的是，它们似乎不是很好。他们有时会跳过地图。所以现在我正在寻找一些可以使路线看起来更真实的扁平化或过滤算法。

目前，我唯一的过滤器是计算一秒钟内可能行驶的最大米数（在公共汽车、汽车或步行中），并将它们与坐标进行比较，将它们扔掉，这在时间范围内是不可能的。因此，如果一个人一秒钟能走 2.5 米，而我有两个相距 10 米的坐标，并且它们在两秒钟内被记录下来，我会尝试找到它们并将它们扔掉。这有点帮助。

这是代码：

```
filters.max_possible_travel = function(data) {
    //http://en.wikipedia.org/wiki/Preferred_walking_speed
    //I switched to 16, as the route was made by driving with a bus...
    var maxMetersPerSec = 16,
        i, m, last, result = [];

    for(i=0;i<data.length;i++) {
        m = data[i];
        if (last) {
            // seconds between current and last coord
            var diff = (m.created.getTime() - last.created.getTime()) / 1000;
            // the maximum amount of meters a person,bus,car etc can make per sec.
            var maxDistance = diff * maxMetersPerSec;
            // the actual distance traveled
            var traveledDistance = google.maps.geometry.spherical.computeDistanceBetween(last.googLatLng, m.googLatLng);

            if (traveledDistance > maxDistance) {
                continue;
            } else {
                result.push(m);
            }
        }
        last = m;
    }
    return result;
}; 
```

为了让你更容易，我创建了这个已经实现了我的第一个过滤器的小提琴，并且还让你能够添加一个新的过滤器。

[http://jsfiddle.net/z4hB7/7/](http://jsfiddle.net/z4hB7/7/)

我还有一些其他的想法：

*   扔掉特定半径内的所有坐标。如果您只是站几分钟，这最终会消除一些令人不安的坐标
*   将所有坐标按 n 秒帧分组，并尝试确定此块中最相关的坐标。不幸的是，我不知道如何:(

所以我认为这是一个非常有趣的问题，我希望你能理解我所说的一切。我感谢你们的帮助！

**编辑**：我发现了一些关于线性最小二乘法和卡尔曼滤波器的信息。我很喜欢它，但因为我绝对不是数学专家，我会很感激这方面的任何帮助。

**编辑 2** 进度 :) 我实现了 @geocodezip 向我推广的 DouglasPeucker 算法。单独的算法并不能解决所有问题，但是结合我当前的“max_possible_travel”它看起来几乎完美。如果我稍微玩一下第二个参数，它会变得很有趣。请查看新的小提琴并确保检查过滤器“walkfilter”和“gdouglaspeucker”。 [http://jsfiddle.net/z4hB7/8/](http://jsfiddle.net/z4hB7/8/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T18:32:46.073

你可以试试[Douglas Peuker 算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)

> Ramer-Douglas-Peucker 算法是一种用于减少由一系列点近似的曲线中的点数的算法。

Google Maps API v3至少有[一种实现](http://www.bdcc.co.uk/Gmaps/Services.htm)

[perl 实现](http://www.usnaviguide.com/douglas-peucker.htm)

[来自Bill Chadwick 网站的](http://www.bdcc.co.uk/Gmaps/GDouglasPeuker.js)Javascript 实现代码：

```
/* Stack-based Douglas Peucker line simplification routine 
   returned is a reduced google.maps.LatLng array 
   After code by  Dr. Gary J. Robinson,
   Environmental Systems Science Centre,
   University of Reading, Reading, UK
*/

function GDouglasPeucker (source, kink)
/* source[] Input coordinates in google.maps.LatLngs    */
/* kink in metres, kinks above this depth kept  */
/* kink depth is the height of the triangle abc where a-b and b-c are two consecutive line segments */
{
    var n_source, n_stack, n_dest, start, end, i, sig;    
    var dev_sqr, max_dev_sqr, band_sqr;
    var x12, y12, d12, x13, y13, d13, x23, y23, d23;
    var F = ((Math.PI / 180.0) * 0.5 );
    var index = new Array(); /* aray of indexes of source points to include in the reduced line */
    var sig_start = new Array(); /* indices of start & end of working section */
    var sig_end = new Array();  

    /* check for simple cases */

    if ( source.length < 3 ) 
        return(source);    /* one or two points */

    /* more complex case. initialize stack */

    n_source = source.length;
    band_sqr = kink * 360.0 / (2.0 * Math.PI * 6378137.0);  /* Now in degrees */
    band_sqr *= band_sqr;
    n_dest = 0;
    sig_start[0] = 0;
    sig_end[0] = n_source-1;
    n_stack = 1;

    /* while the stack is not empty  ... */
    while ( n_stack > 0 ){

        /* ... pop the top-most entries off the stacks */

        start = sig_start[n_stack-1];
        end = sig_end[n_stack-1];
        n_stack--;

        if ( (end - start) > 1 ){  /* any intermediate points ? */        

                /* ... yes, so find most deviant intermediate point to
                       either side of line joining start & end points */                                   

            x12 = (source[end].lng() - source[start].lng());
            y12 = (source[end].lat() - source[start].lat());
            if (Math.abs(x12) > 180.0) 
                x12 = 360.0 - Math.abs(x12);
            x12 *= Math.cos(F * (source[end].lat() + source[start].lat()));/* use avg lat to reduce lng */
            d12 = (x12*x12) + (y12*y12);

            for ( i = start + 1, sig = start, max_dev_sqr = -1.0; i < end; i++ ){                                    

                x13 = (source[i].lng() - source[start].lng());
                y13 = (source[i].lat() - source[start].lat());
                if (Math.abs(x13) > 180.0) 
                    x13 = 360.0 - Math.abs(x13);
                x13 *= Math.cos (F * (source[i].lat() + source[start].lat()));
                d13 = (x13*x13) + (y13*y13);

                x23 = (source[i].lng() - source[end].lng());
                y23 = (source[i].lat() - source[end].lat());
                if (Math.abs(x23) > 180.0) 
                    x23 = 360.0 - Math.abs(x23);
                x23 *= Math.cos(F * (source[i].lat() + source[end].lat()));
                d23 = (x23*x23) + (y23*y23);

                if ( d13 >= ( d12 + d23 ) )
                    dev_sqr = d23;
                else if ( d23 >= ( d12 + d13 ) )
                    dev_sqr = d13;
                else
                    dev_sqr = (x13 * y12 - y13 * x12) * (x13 * y12 - y13 * x12) / d12;// solve triangle

                if ( dev_sqr > max_dev_sqr  ){
                    sig = i;
                    max_dev_sqr = dev_sqr;
                }
            }

            if ( max_dev_sqr < band_sqr ){   /* is there a sig. intermediate point ? */
                /* ... no, so transfer current start point */
                index[n_dest] = start;
                n_dest++;
            }
            else{
                /* ... yes, so push two sub-sections on stack for further processing */
                n_stack++;
                sig_start[n_stack-1] = sig;
                sig_end[n_stack-1] = end;
                n_stack++;
                sig_start[n_stack-1] = start;
                sig_end[n_stack-1] = sig;
            }
        }
        else{
                /* ... no intermediate points, so transfer current start point */
                index[n_dest] = start;
                n_dest++;
        }
    }

    /* transfer last point */
    index[n_dest] = n_source-1;
    n_dest++;

    /* make return array */
    var r = new Array();
    for(var i=0; i < n_dest; i++)
        r.push(source[index[i]]);
    return r;

} 
```

# javascript - 如何在 extjs 中的字段之后添加表单提交按钮

> ID：16121241
> 
> 赞同：1
> 
> 时间：2013-04-20T14:09:21.133
> 
> 标签：javascript, extjs

添加所有表单字段后如何添加按钮？我知道我可以添加`buttons`配置为`Ext.form.Panel`. 但它在停靠栏上添加了按钮。对我来说，这个停靠栏位于屏幕的最低部分。所以我想在项目之后添加它。这是我传递给`items`config 选项的配置对象`Ext.form.Panel`。

```
 items: [
           // other fields here
        , {
            xtype: 'panel',
            frame: true,
            layout: {
                type: 'hbox',
                pack: 'end'
            },
            items:[{
                text: 'Change',
                xtype: 'button'
            }]
         } 
```

输出是 ![在此处输入图像描述](https://i.stack.imgur.com/4sQjj.png)

但我希望按钮**与上面的文本字段对齐**。

我怎样才能做到这一点？

我正在使用 ExtJS 4.0.7。我不能更新这个版本，因为项目很大而且很复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:23:42.673

Ext.form.Panel 有一个 buttonAlign 属性：[http](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.form.Panel-cfg-buttonAlign) ://docs.sencha.com/extjs/4.0.7/#!/api/Ext.form.Panel-cfg-buttonAlign 你可以添加一个 xtype: 'button'在 FormPanel 项目中并对其进行配置：http: [//jsfiddle.net/Un5rW/](http://jsfiddle.net/Un5rW/)

如果要在另一个面板中添加按钮，则不要将面板布局的“pack”属性设置为 end：

```
...
layout: {
    type: 'hbox'//,
    //pack: 'end' <----
} 
```

jsfiddle：http: [//jsfiddle.net/Un5rW/1/](http://jsfiddle.net/Un5rW/1/)

**UPD**

表单字段结束按钮对齐的另一个示例：http: [//jsfiddle.net/Un5rW/2/](http://jsfiddle.net/Un5rW/2/)

# sql - ExecuteReader 需要一个打开且可用的连接。连接的当前状态为打开

> ID：16121243
> 
> 赞同：-1
> 
> 时间：2013-04-20T14:09:29.483
> 
> 标签：sql, vb.net, connection

我目前收到错误：

> ExecuteReader 需要一个打开且可用的连接。连接的当前状态是打开的。

这是我的代码：

db.conn 的类

```
Public Class db
    Public Shared conn As SqlConnection = db.getsqlconn("ezondb")

    Public Shared Function getsqlconn(ByVal whichdb As String) As SqlConnection
        Dim connstring As String = ConfigurationManager.ConnectionStrings(whichdb).ConnectionString
        Return New SqlConnection(connstring)
    End Function

Dim Macomm = db.selectcommand(db.conn, "*", "categories", "idparentcategory=1")
Dim Mada As New SqlDataAdapter(Macomm)
Dim Mat As New DataTable
Mada.Fill(Mat) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-20T14:36:28.777

我不会将连接声明为`Shared`：

```
Public Shared conn As SqlConnection = db.getsqlconn("ezondb") 
```

需要时打开连接，然后立即关闭。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T14:15:44.843

getsqlconn 方法只是返回一个新的 sqlconnection 对象实例，需要通过调用 open 方法显式打开连接

# java - 仅使用合理的键开始在 JTable 单元格中进行编辑

> ID：16121245
> 
> 赞同：6
> 
> 时间：2013-04-20T14:09:34.147
> 
> 标签：java, swing, jtable

我认为 JTable 组件应该更好地过滤将开始编辑的键。我的意思是，对于当前的实现，例如，如果您在可编辑单元格中键入 DEL、Ctrl+Shift+DEL、F5、F7，则会出现单元格编辑器。在我看来，使用这样的键启动单元格编辑器对于最终用户来说是非常不直观的。

此外，还有另一个问题：JTable 不知道表单中定义的其他可能的键绑定。如果您为表单上的按钮定义了键绑定 Ctrl+Shift+C，如果您在 JTable 中键入此组合键，则表将开始编辑，接下来将调用您的按钮键绑定操作。我认为应该有一种简单的方法来防止这种情况，而不是禁用表键绑定映射中所有已经定义的键绑定。

是否有一些第三方组件已经至少部分地解决了其中一些问题，特别是用合理的键开始编辑的那个？我不想自己做所有乏味的过滤。

任何帮助，将不胜感激。谢谢你。

马科斯

**更新**

暂时我正在使用这个非常不完美的“解决方案”，至少暂时让事情变得不那么糟糕。改进，意见和建议表示赞赏。

```
 @Override
    public boolean isCellEditable(EventObject e)
    {
        if (e instanceof MouseEvent)
        {
            return ((MouseEvent) e).getClickCount() >=
                _delegate.getMouseClickCountToStartEditing();
        }
        else if (e instanceof KeyEvent)
        {
            KeyEvent event = (KeyEvent) e;

            int key = event.getKeyCode();
            if ((key >= KeyEvent.VK_F1 && key <= KeyEvent.VK_F12) &&
                KeyStroke.getKeyStrokeForEvent(event) != _startEditingKey)
            {
                return false;
            }

            int ctrlAlt = KeyEvent.CTRL_DOWN_MASK | KeyEvent.ALT_DOWN_MASK;
            if ((event.getModifiersEx() & ctrlAlt) == ctrlAlt)
            {
                return true;
            }

            if ((event.getModifiersEx() & ctrlAlt) != 0)
            {
                return false;
            }

            return true;
        }
        else
        {
            // Is this else really needed? Are there other events types
            // other than mouse and key events?
            return true;
        }
    }

    // _startEditingKey is obtained with this method
    private KeyStroke getStartEditingKey()
    {
        InputMap bindings = TheTable.this.getInputMap(
            JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        for (KeyStroke key : bindings.allKeys())
        {
            Object binding = bindings.get(key);
            if ("startEditing".equals(binding))
            {
                return KeyStroke.getKeyStroke(
                    key.getKeyCode(), key.getModifiers(), true);
            }
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:03:09.197

如果 keyEvent 具有您想忽略的修饰符，您可以实现一个自定义编辑器，该编辑器报告不可编辑：

```
DefaultCellEditor editor = new DefaultCellEditor(new JTextField()) {

    @Override
    public boolean isCellEditable(EventObject e) {
        if (e instanceof KeyEvent) {
            return startWithKeyEvent((KeyEvent) e);
        }
        return super.isCellEditable(e);
    }

    private boolean startWithKeyEvent(KeyEvent e) {
        // check modifiers as needed, this here is just a quick example ;-)
        if ((e.getModifiersEx() & KeyEvent.CTRL_DOWN_MASK) != 0) {
            return false;
        }    
        // check for a list of function key strokes
        if (excludes.contains(KeyStroke.getKeyStrokeForEvent(e)) {
            return false;
        } 
        return true;
    }

};
JTable table = new JTable(new AncientSwingTeam());
table.setDefaultEditor(Object.class, editor); 
```

编辑：对于可以正确处理 ctrl-alt 组合的更可靠的过滤，您可以查看 DefaultEditorKit.DefaultKeyTypedAction：同时基本上委托给 SunToolkit 中的隐藏方法并处理 keyTyped（与过滤事件所需的 keyPressed 相比）开始编辑后可能是有效可打印字符的候选者）它可能仍然让您知道如何做（suntoolkit 的源代码很可能在 openjdk 中可用，但没有在那里搜索）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:28:03.860

您可以将任何所需的键绑定到表的`startEditing`操作，如此处和[此处](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#maps)[所示](https://stackoverflow.com/a/11679590/230513)。[您可以禁用不需要的键，如此处](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto)所示。此处显示了一些其他细微差别，@camickr[在](https://stackoverflow.com/a/1413169/230513)[此处](https://stackoverflow.com/a/10067560/230513)引用了该文章。

# windows-phone-7 - 如何从 ToogleSwitch 中找到子控件

> ID：16121247
> 
> 赞同：0
> 
> 时间：2013-04-20T14:09:51.013
> 
> 标签：windows-phone-7, windows-phone-8

如何在 ToggleSwitch_Checked 事件中找到放置在 ToogleSwitch ContentTemplate 中的控件？

我尝试了 toogle.Switch.FindName("NameOftControlToFindHere") 但它返回 NULL。

这是 XAMl 标记，我试图在 ToggleSwitch_Checked 事件中以编程方式查找 tbMonthlyLimitData 文本块。

```
<toolkit:ToggleSwitch Header="Monthly Limit" Margin="0,10,0,0" Name="tsMonthlyLimit" Checked="ToggleSwitch_Checked">
                        <toolkit:ToggleSwitch.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Name="ts">
                                    <TextBlock Text="{Binding}" Name="tbMonthlyLimit"/>
                                    <TextBlock Text="Hello" Name="tbMonthlyLimitData"/>
                                </StackPanel>
                            </DataTemplate>
                        </toolkit:ToggleSwitch.ContentTemplate> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T06:52:51.803

您面临的问题是名称范围 - 命名它在不同的范围内。找到它的一种方法是使用[Linq-to-VisualTree](http://www.scottlogic.co.uk/blog/colin/2010/03/linq-to-visual-tree/) ::

```
var textBlock = tsMonthlyLimit.Descendants()
                              .OfType<TextBlock>()
                              .Single(i => i.Name=="tbMonthlyLimitData"); 
```

# php - 带有 $_POST 的变量

> ID：16121251
> 
> 赞同：0
> 
> 时间：2013-04-20T14:10:20.510
> 
> 标签：php, variables, loops, post, variable-variables

我有一长串变量，最后有一个数字。例如address1，我一直到最高address14。我想从表单中发布这些，而不是输入 $address1 = $_POST[address1] 我想创建一个循环，循环 14 次，并在变量名和变量名中更改地址末尾的数字$_POST 部分...

我正在努力做到这一点。我有一个创建变量的循环，但我不断收到错误，因为它没有执行 $_POST 位。

有人可以帮忙吗？谢谢你。

这是我目前拥有的：

```
 $x = 0;
        while($x < 14) {
            $address = "address" . $x;
            $address = $$address;

            $string = "<p>Address$x:" . $address[0] . "</p>";
            echo $string;
            $x = $x + 1; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:24:31.340

为什么你不这样做：

```
for ($i=0; $i < 14; $i++) {
    $address[$i] = $_POST['address'.$i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:26:29.080

尝试这个：

```
$addresses = array();
for( $x = 0; $x <= 14; $x++ )
{
    $address_field = "address" . $x;
    if( array_key_exists( $address_field, $_POST ) ) {
        $addresses[$x] = $_POST[$address_field];
        echo '<p>Address', $x, ': ', $addresses[$x], "</p>\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:56:18.527

您还可以在表单中使用数组语法：

```
<input type="text" name="address[1]" />
<input type="text" name="address[2]" />
<input type="text" name="address[3]" />
... up to 14 
```

在 PHP 中：

```
$address = $_POST['address']; 
```

$address 现在是一个包含所有地址的数组

# javascript - 使用 JSON 加载数据时更新 iScroll

> ID：16121252
> 
> 赞同：0
> 
> 时间：2013-04-20T14:10:26.407
> 
> 标签：javascript, ajax, json, iscroll

我有一个使用 JSON 生成的列表，它工作得很好。现在我想每 20 秒刷新一次这个列表，而且效果也很好。但是我希望能够在生成数据后立即更新我的 iScroll，但就像现在一样，它会等待 20 秒，然后更新滚动长度。我不知道从哪里开始，希望得到帮助......这是我的脚本：

```
var userid=1,

dataUrl = 'http://mypage.com/playermenu.php?callback=?&userid=' + userid,
dataCallback = function (data) {
    var content = [];
    //var profile = [];
    $.each(data, function (i, val) {
        content.push(val.list); // GETTING ALL THE GAMES //
        $('#userbar').html(val.profile); // FETCHING USERS DATA FOR PROFILEBAR //
    });
    $('#games').html(content.join('')).listview('refresh');
},
fetchData = function () {
    myScroll = new iScroll('wrapper');
    if (myScroll.isReady()){
        $.getJSON(dataUrl, dataCallback);
    }
};
fetchData();
setInterval(fetchData, 20000);

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200);  }, false); 
```

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:01:40.947

我认为`#userbar`并且`#games`在`#wrapper`元素之内。因为每次你更新这些元素。我希望这有帮助：

```
$(function(){
myScroll = null;
dataCallback = function(data) {
    if (myScroll) { // before reuse it, completely destroy the myScroll and free some memory
        myScroll.destroy();
        myScroll = null;
    }
    myScroll = new iScroll('wrapper');
    var content = [];
    $.each(data, function (i, val) {
        content.push(val.list); // GETTING ALL THE GAMES //
        $('#userbar').html(val.profile); // FETCHING USERS DATA FOR PROFILEBAR //
    });
    $('#games').html(content.join('')).listview('refresh');
    setTimeout(function(){
        myScroll.refresh(); // refresh to show  correct dimensions
    }, 0);
}
fetchData = function () {
    var userid = 1;
    var dataUrl = 'http://mypage.com/playermenu.php?callback=?&userid=' + userid;
    $.getJSON(dataUrl, dataCallback);
}
fetchData();
setInterval(fetchData, 20000);
});

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200);  }, false); 
```

# xamarin.android - Mondroid 应用程序发布版本中的 ServiceStack 错误

> ID：16121260
> 
> 赞同：3
> 
> 时间：2013-04-20T14:10:57.557
> 
> 标签：xamarin.android, servicestack

我的 mnodroid 应用程序在调试模式下运行良好，但在发布模式下构建和运行时出现以下错误：

```
UNHANDLED EXCEPTION: System.Net.WebException: Error: NameResolutionFailure
[MonoDroid]   at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
[MonoDroid]   at System.Net.HttpWebRequest.GetResponse () [0x00000] in <filename unknown>:0 
[MonoDroid]   at ServiceStack.ServiceClient.Web.ServiceClientBase.Send[ICollection`1] (System.String httpMethod, System.String relativeOrAbsoluteUrl, System.Object request) [0x00000] in <filename unknown>:0 
[mono] 
```

我一直在尝试链接构​​建上的所有文件以及仅链接 sdk 文件，但无济于事。我正在使用最新的 Xamarin Studio。关于为什么会发生此错误的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:39:11.953

添加了上网权限？默认情况下，Internet 权限会添加到 AssemblyInfo.cs 文件中，但这仅适用于使用调试时。

所以你必须生成一个 AndroidManifest.xml 并在其中添加 Internet 权限。

# c# - 这是异步/等待的正确实现吗？

> ID：16121263
> 
> 赞同：0
> 
> 时间：2013-04-20T14:11:11.793
> 
> 标签：c#, async-await

异步上传文件的方法：

```
public async void UploadScreenshot(DateTime? date = null)
{
    var uploadTask = Task.Factory.StartNew(() => _ftp.UploadFile(_screenshotLocalFile,
                                                                 date.HasValue
            ? _screenshotRemoteFile.Replace("{1}", date.Value.ToString(Helper.StandardTimeFile))
            : _screenshotRemoteFile.Replace("{1}", DateTime.Now.ToString(Helper.StandardTimeFile))));
    await uploadTask;
} 
```

用法：

```
UploadScreenshot(); 
```

这是异步上传文件的有效方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:01:39.300

好吧，它有几个问题：

1.  `async void`应该只用于事件处理程序。在所有其他情况下，您应该使用`async Task`(或`async Task<T>`)，以便您可以异步等待方法完成并正确处理其执行期间发生的任何错误。
2.  您的方法只是包装了一个同步`UploadFile()`方法。如果有异步替代方案 ( `UploadFileAsync()`)，那么您应该使用它。
3.  您可以通过不使用`await`而是直接返回`Task`您从`StartNew()`（或`UploadFileAsync()`）获得的来提高效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:18:14.370

是的，但是为什么要在方法内部进行等待

```
public Task UploadScreenshot(DateTime? Date = null)
{
    var uploadTask = Task.Factory.StartNew(() => 
        _ftp.UploadFile(_screenshotLocalFile, date.HasValue 
                ? _screenshotRemoteFile.Replace("{1}", date.Value.ToString(Helper.StandardTimeFile))
                : _screenshotRemoteFile.Replace("{1}", DateTime.Now.ToString(Helper.StandardTimeFile))));

    return uploadTask;
} 
```

用法：

```
await UploadScreenshot(); 
```

另外据我所知，返回 void 的异步方法不是好习惯，最好返回 Task/

# android - Determing layout at runtime in listView

> ID：16121266
> 
> 赞同：0
> 
> 时间：2013-04-20T14:11:47.833
> 
> 标签：android

```
public AdapterClass(Context a, int resourceID, List < Info > entries) {
    super(a, resourceID, entries);
    this.layoutResource = resourceID;
}

@
Override
public View getView(int position, View convertView, ViewGroup parent) {
    final Object custom = getItem(position);
    LinearLayout rowView = null;
    if (convertView == null) {
        rowView = new LinearLayout(getContext());
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        vi.inflate(layoutResource, rowView);
    } else
        rowView = (LinearLayout) convertView;

    if (custom != null) {

    }
    return rowView;
} 
```

I am passing two different layouts at runtime, how can i identify which layout i am passing in the `getView()` method. I am using `ArrayAdapter`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:17:10.370

您可以使用布局 ID 来检查通过了哪个布局

```
if(passedresourceID == R.layout.layout1)
{
    //do something
}
else if(passedresourceID == R.layout.layout2)
{
    //do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:20:20.307

您应该能够检查传递给的父 ID`getView()`

```
public View getView(int position, View convertView, ViewGroup parent) {

switch (parent.getId()){   //check your ids here
case (R.layout.layoutToCheck):
break;
case (R.layout.otherLayoutToCheck):
...

final Object custom = getItem(position);
LinearLayout rowView = null;
if (convertView == null) {
    rowView = new LinearLayout(getContext());
    LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    vi.inflate(layoutResource, rowView); 
```

# ios6 - cocos2d-iphone横屏模式下，添加admob时，第一个view位置不对

> ID：16121267
> 
> 赞同：2
> 
> 时间：2013-04-20T14:11:50.243
> 
> 标签：ios6, cocos2d-iphone, admob

这是一个带有横向模式的 cocos2d-iphone 项目。

当没有admob时，视图是好的。但是当添加admob时，第一个视图上的所有位置都是错误的，都被移到了右下侧。当我旋转屏幕时，一切正常，都在正确的位置。

我发现使用 admob，显示的第一个视图不是横向而是纵向。

# python - Python中的2D卷积类似于Matlab的conv2

> ID：16121269
> 
> 赞同：15
> 
> 时间：2013-04-20T14:12:17.503
> 
> 标签：python, image, matlab, signal-processing, convolution

我一直在尝试使用 SciPy 和 Numpy 对 2D 矩阵进行卷积，但失败了。对于我尝试过的 SciPy，sepfir2d 和 scipy.signal.convolve 以及用于 Numpy 的 Convolve2D。Matlab for Python中是否有像conv2这样的简单函数？

这是一个例子：

```
 A= [ 5     4     5     4;
      3     2     3     2;
      5     4     5     4;
      3     2     3     2 ] 
```

我想把它与`[0.707 0.707]`

Matlab中conv2的结果是

```
3.5350    6.3630    6.3630    6.3630    2.8280
2.1210    3.5350    3.5350    3.5350    1.4140
3.5350    6.3630    6.3630    6.3630    2.8280
2.1210    3.5350    3.5350    3.5350    1.4140 
```

在 Python 中计算这个输出的一些函数？我将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-20T15:22:30.747

有许多不同的方法可以做到这一点`scipy`，但 2D 卷积不直接包含在`numpy`. （如果您需要避免 scipy 依赖，仅使用 numpy 的 fft 也很容易实现。）

`scipy.signal.convolve2d`, `scipy.signal.convolve`,`scipy.signal.fftconvolve`和`scipy.ndimage.convolve`都将以不同的方式处理 2D 卷积（最后三个是 Nd）。

`scipy.signal.fftconvolve`在 fft 域中进行卷积（这是一个简单的乘法）。这在许多情况下要快得多，但与离散情况相比，可能会导致边缘效应的差异非常小，并且您的数据将通过这种特定实现强制转换为浮点数。此外，在将小数组与大得多的数组进行卷积时，还会使用不必要的内存。总而言之，基于 fft 的方法可以显着加快，但有一些常见的用例`scipy.signal.fftconvolve`不是理想的解决方案。

`scipy.signal.convolve2d`, `scipy.signal.convolve`, 和`scipy.ndimage.convolve`所有使用 C 实现的离散卷积，但是，它们以不同的方式实现它。

`scipy.ndimage.convolve`保持相同的数据类型，并让您控制输出的位置以最大限度地减少内存使用。如果您正在卷积`uint8`（例如图像数据），它通常是最好的选择。输出将始终与第一个输入数组的形状相同，这对图像有意义，但可能不适用于更一般的卷积。通过 kwarg（其功能与's kwarg完全不同） `ndimage.convolve`，您可以很好地控制边缘效果的处理方式。`mode``scipy.signal``mode`

`scipy.signal.convolve`如果您正在使用二维数组，请避免使用。它适用于 Nd 情况，但对于 2d 数组来说不是最优的，并且`scipy.signal.convolve2d`存在以更有效地完成完全相同的事情。中的卷积函数使您可以使用kwarg`scipy.signal`控制输出形状。`mode`（默认情况下，它们的行为就像 matlab 的一样`conv2`。）这对一般数学卷积很有用，但对图像处理用处不大。但是，`scipy.signal.convolve2d`通常比`scipy.ndimage.convolve`.

有很多不同的选择，部分原因是不同子模块的重复，`scipy`部分原因是实现卷积的不同方法具有不同的性能权衡。

如果您可以提供有关您的用例的更多详细信息，我们可以推荐一个更好的解决方案。如果您要对两个大小大致相同的数组进行卷积，并且它们已经是浮点数，那么这`fftconvolve`是一个很好的选择。否则，`scipy.ndimage.convolve`可能会打败它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T15:14:22.733

scipy 的 convolved1d() 做你想做的事，只是处理边缘有点不同：

```
sp.ndimage.filters.convolve1d(A,[0.707,0.707],axis=1,mode='constant') 
```

会给你：

```
array([[ 6.363,  6.363,  6.363,  2.828],
       [ 3.535,  3.535,  3.535,  1.414],
       [ 6.363,  6.363,  6.363,  2.828],
       [ 3.535,  3.535,  3.535,  1.414]]) 
```

如果您想要完全相同的结果，只需向 A 添加一列零，如下所示：

```
sp.ndimage.filters.convolve1d(np.c_[np.zeros((4,1)),A],[0.707,0.707],axis=1,mode='constant') 
```

你会得到：

```
array([[ 3.535,  6.363,  6.363,  6.363,  2.828],
       [ 2.121,  3.535,  3.535,  3.535,  1.414],
       [ 3.535,  6.363,  6.363,  6.363,  2.828],
       [ 2.121,  3.535,  3.535,  3.535,  1.414]]) 
```

根据我的经验，您可以在 scipy/numpy 中轻松完成您在 Matlab 中所做的大部分工作（甚至更多）。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-20T14:39:51.167

为什么不自己实现呢？注意 conv2 使用空间形式的二维卷积方程的直接形式实现。如果 a 和 b 是两个离散变量 n1 和 n2 的函数，则 a 和 b 的二维卷积公式为： ![在此处输入图像描述](https://i.stack.imgur.com/zPoUC.png)

然而在实践中，conv2 计算有限区间的卷积。

# android - 使用字符串数组 [图像名称] 设置图库

> ID：16121272
> 
> 赞同：0
> 
> 时间：2013-04-20T14:12:21.483
> 
> 标签：android

我所有的图像都存储在可绘制文件夹中。我想查看包含一些图像的画廊视图。

我想要的图像的名称在一个字符串数组中。

我可以让画廊视图显示这些图像吗？

我找到了下面的代码，这里的图像是一个整数。

我可以使用字符串数组吗？

```
public class ImageAdapter extends BaseAdapter {

    private Context context;

    public ImageAdapter(Context context){
        this.context = context;
    }

    public int getCount() {
        return pics.length;
    }

    public Object getItem(int arg0) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageView iv = new ImageView(context);
        iv.setImageResource(pics);
        iv.setScaleType(ImageView.ScaleType.FIT_XY);
        iv.setLayoutParams(new Gallery.LayoutParams(150,120));
        iv.setBackgroundResource(imageBackground);
        return iv;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:48:33.690

如果您的图像在您的资源中，这很容易。

```
public class ImageAdapter extends BaseAdapter {

    private Context context;
    private Resources resources;

    private String[] imageNames;

    public ImageAdapter(Context context, String[] imageNames){
        this.context = context;
        this.resources = context.getResources();
        this.imageNames = imageNames;
    }

    public int getCount(){
        return imageNames.length;
    }

    public String getItem(int position){
        return imageNames[position];
    }

    public long getItemId(int position){
        return position;
    }

    public View getView(ViewGroup parent, View convertView, int position){
        if(convertView == null){
            convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.imageview, parent, false);
        }
        int imageId = resources.getIdentifier(getItem(position), "drawable", context.getPackageName());
        ImageView imageView = (ImageView) convertView.findViewById(R.id.imageview);
        imageView.setImageResource(imageId);
        return convertView;
    }
} 
```

# hex - Arduino 十六进制字符串到 unsigned long int 的转换

> ID：16121279
> 
> 赞同：0
> 
> 时间：2013-04-20T14:13:04.353
> 
> 标签：hex, arduino

我正在尝试将十六进制十进制字符串值转换为无符号长整数。

例如：

字符串 s="0x4d14" --> 无符号长整数 B = 0x4D14

* * *

好的，我解决了之前的问题，

我还有一个问题：

我从串行监视器中读取十六进制代码，如下所示：

```
 char c[10];    
 char c[i]=serial.read();
 String s=c[i];
 i++;
 if (i==10)
     s=""; 
```

但现在我不能这样做：

```
 const char* string = s; 
```

要使用 strtoul 函数，我该怎么办？

无论我的代码是什么逻辑，我都没有发布我的完整代码，但我现在的问题是`string`转换`const char*`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:26:21.593

这对我有用

```
const char* string = "0x4d14";
long unsigned int b = strtoul(string, 0, 16); 
```

更新：

```
char c[10];
... // read values
strtoul(c, 0, 16);
... 
```

看看一些C语言教程

# c# - 序列化时我犯了什么错误？

> ID：16121281
> 
> 赞同：3
> 
> 时间：2013-04-20T14:13:27.743
> 
> 标签：c#, serialization

这会导致运行时出现序列化异常。这只是一个演示项目，用于测试执行此操作的最佳方法。我包括了主要方法和我试图序列化的类。

忽略：我真的不能添加更多细节，我已经描述了问题，附上了代码，这个“请添加更多细节”的事情是有史以来最愚蠢的事情。让我已经发布它。

```
Data toSend = new Data();
toSend.Output();

///SERIALIZE

BinaryFormatter formatter = new BinaryFormatter();
Stream streamOut = File.OpenWrite("file");
formatter.Serialize(streamOut, toSend);
streamOut.Close();

Console.WriteLine("----------------------------");
///DESERIALIZE

Stream streamIn = File.OpenRead("file");
Object received = formatter.Deserialize(streamIn);
Data toReceive = (Data)received;
toReceive.Output();

class Data : ISerializable
{
    int integerData;
    string stringData;
    bool booleanData;
    int shouldnotbeserialized;

    public Data()
    {
        integerData = 1;
        stringData = "Hello";
        booleanData = true;
        shouldnotbeserialized = 55;
    }

    //To deserialize
    public Data(SerializationInfo info, StreamingContext context)
    {
        integerData = info.GetInt32("theint");
        stringData = info.GetString("thestring");
        booleanData = info.GetBoolean("thebool");
    }

    public void Output()
    {
        Console.WriteLine(integerData);
        Console.WriteLine(stringData);
        Console.WriteLine(booleanData);
        Console.WriteLine(shouldnotbeserialized);
    }

    //Implemented method to serialize
    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("thestring", stringData);
        info.AddValue("theint", integerData);
        info.AddValue("thebool", booleanData);
    }
} 
```

异常消息：

> 在程序集“SerializationDemo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null”中键入“SerializationDemo.Data”未标记为可序列化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T14:28:01.220

异常信息中给你答案：

> 在程序集“SerializationDemo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null”中键入“SerializationDemo.Data”**未标记为可序列化。**

您需要使用该[`Serializable`](http://msdn.microsoft.com/en-gb/library/system.serializableattribute.aspx)属性标记您的类。

```
[Serializable()]
class Data : ISerializable 
```

从上下文来看，您似乎将通过网络传输对象（由于局部变量名称*toSend*和*toReceive 推断*）。您需要注意，例如，如果您使用客户端-服务器模型，则默认情况下，从服务器软件序列化和发送的对象将无法从客户端软件反序列化。

这是因为二进制序列化的基本特征是它保留了类型系统的保真度。类型系统保真度表示类型信息在序列化过程中不会丢失。这意味着当您序列化一个对象时，不仅是写入数据流的“对象的状态”，还有类的名称和包含的程序集。即使您`Data`在程序集中定义了要反序列化数据的类，反序列化方法也会失败（抛出异常），因为反序列化器将寻找类型`Program1.Namespace.Data`not `Program2.Namespace.Data`。为了解决这个问题，您可以在相互程序集（类库）中定义您的数据消息，或者通过定义一个[`SerializationBinder`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.serializationbinder.aspx)允许您基本上欺骗反序列化方法认为您仍在同一个程序集中的方法。

# php - 如何检查年度最佳出勤员工

> ID：16121282
> 
> 赞同：-2
> 
> 时间：2013-04-20T14:13:35.300
> 
> 标签：php, mysql, time-and-attendance

这是我的 MySQL 表：

```
_______________________________________________
Id | Name| Employee id | Date       | Attendance
_______________________________________________
1  | xyz |     196     | 2013-04-01 | present  
2  | xyz |     196     | 2013-04-02 | present  
3  | xyz |     196     | 2013-04-03 | present  
4  | xyz |     196     | 2013-04-04 | absent  
5  | xyz |     196     | 2013-04-05 | present  
6  | abc |     197     | 2013-04-01 | present

7  | abc |     197     | 2013-04-02 | present  
8  | abc |     197     | 2013-04-03 | present  
9  | abc |     197     | 2013-04-04 | present  
10 | abc |     197     | 2013-04-05 | present

_______________________________________________ 
```

我想计算员工最常在场的天数，我想在 PHP 中得到这样的结果：

```
___________________________________________________________
 Name| Employee id| Attendance     | Best OR NOT
___________________________________________________________
 xyz |  196       | 4 Present days |

 abc |  197       | 5 Present days | This is best employees of the year

__________________________________________________________________________ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:31:22.763

**SQL**

```
SELECT name, employeeID count(userID) as datesAttend FROM Attendance GROUP BY name 
```

**PHP（mysql类方法，只是一个例子）**

```
/* mysql_query example ( use beter db class ) */

$best = 0;
$bestEmployee = '';

$query = mysql_query("SELECT Name, EmployeeID, count(EmployeeID) as datesAttend FROM Attendance GROUP BY EmployeeID");

while($row = mysql_fetch_array($query)) {
  echo $row['Name']. " " .$row['EmployeeID']. " " .$row['datesAttend'];
  if($row['datesAttend'] > $best) {
   $best = $row['datesAttend'];
   $bestEmployee = $row['EmployeeID'];
  }
}

echo $bestEmployee ." is employee of the year!!!";
throw PartyForEmployee(); 
```

示例： [http ://www.sqlfiddle.com/#!2/9d282/2/0](http://www.sqlfiddle.com/#!2/9d282/2/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:17:52.620

像这样的查询：

```
select employeeId, count(employeid) as num from table_name group by attendence limit 1 
```

会给你最好的工人身份证。您可以通过将表格插入到适当的位置来对其进行编辑。你能再解释一下你的问题吗？

```
//DB_HOST etc. are db connection constants
$dbc=mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
$data = mysql_query('your query') or die(mysql_error());
// A COUNT query will always return 1 row
// Use fetch_assoc it's easier to use
$row = mysql_fetch_assoc($data);
$bestId = $row['employeeId'];
$bestDayNumber = $row['num']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:25:38.867

此查询将为您提供最好的员工：

```
select Name, "Employee id", count(*) 
from table_name 
where Attendance = "present" 
group by Name 
order by count(*) desc 
limit 1; 
```

“分组依据”子句意味着您希望每个员工都有一个单独的结果。“where”子句确保您不计算他们缺席的天数。“order by”子句将在场天数最多的员工放在首位。“限制”子句只得到第一个，因为你只想要最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T14:33:53.673

试试这个查询..

```
SELECT *, COUNT(employee_id) AS cnt, CASE WHEN employee_id = (SELECT employee_id FROM employees
WHERE 1 GROUP BY  employee_id ORDER BY COUNT(employee_id) DESC LIMIT 0 , 1)   THEN 'Best' 
ELSE 'Not' END AS avl
FROM  `employees`
WHERE 1 
GROUP BY employee_id 
```

根据需要更改表名和字段名

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-20T14:34:42.967

尝试这个。

```
 $query = mysql_query("select name ,`Employee id` as emplyee_id, CONCAT(count(`Employee id`),' Present days') as Attendance
   from Table1 
   where `Attendance` = 'present' group by `Employee id` ");

   while($row = mysql_fetch_array($query)) {
  echo $row['name']. " - " .$row['emplyee_id']. " - " .$row['Attendance']."</ br>";
 } 
```

[**在这里演示**](http://sqlfiddle.com/#!2/ab0f2/4)

# java - 如何读取在浏览器地址栏中输入的 URL？

> ID：16121284
> 
> 赞同：0
> 
> 时间：2013-04-20T14:13:49.447
> 
> 标签：java, javascript, web-applications, web, server-side

我的 Java 应用程序用于阻止某些网站，当应用程序运行时，必须阻止其中提到的网站。因此，当任何人试图从任何浏览器访问某个网站时，我必须阅读他试图访问的 URL，并将其与存储在我的应用程序中的禁止网站进行比较。

这是我的问题，我无法将系统中的浏览器与我的应用程序连接起来。亲切的问候和抱歉说了这么多:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-23T16:23:44.507

```
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;

HttpServletRequest currentRequest = (HttpServletRequest) ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest(); 
```

# database - 如何避免 httpd.exe 在 C\WINDOWS\TEMP\ 中创建 etilqs？

> ID：16121290
> 
> 赞同：0
> 
> 时间：2013-04-20T14:14:34.467
> 
> 标签：database, apache, sqlite, temp

我在我的计算机中安装了 Apache 2.4，并且使用了 localhost Web 应用程序。

这个应用程序使用了一个 sqlite 数据库（通过 PHP PDO），一开始它很小，但现在它有 66518 行。

有一段时间，当我跑

```
SELECT Z.A,B,C,D,(SELECT 1 FROM X WHERE X.A=Z.A AND X.E IS NOT NULL)
FROM Y,Z
Where F=:f AND Y.A=Z.A
ORDER BY D IS NULL DESC, D IS "" ASC, D DESC
LIMIT :startRow,24 
```

COMODO 防火墙的 Defense+ 模块警告我`http.exe`想要创建新的文件/文件夹`C:\WINDOWS\TEMP\etilqs_???`，其中 ??? 是随机数字和字母。

我认为这是因为数据库变大了（一开始我没有这个问题）。

有没有办法在不改变 httpd.exe 在 COMODO 防火墙中的可信度的情况下避免这些消息，即阻止 httpd.exe 创建这些文件/文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:22:39.013

你的“Defense+”东西完成了它的工作——它成功地保护你的机器免于做有用的事情的危险……</p>

* * *

说真的，SQLite 必须在某个地方创建它的临时文件，而临时目录就是设计用来保存这些文件的目录。

解决此问题的最佳方法是卸载 Comodo 的东西。

第二好的方法是配置所谓的防火墙以允许 httpd.exe（以及所有其他程序）访问临时目录。

最好的方法是配置 SQLite 连接以尝试通过执行将所有临时数据存储在内存中[`PRAGMA temp_store = 2;`](http://www.sqlite.org/pragma.html#pragma_temp_store)。（当您的数据库变得足够大以至于临时数据无法放入内存时，这无疑会崩溃。）

# html - Using a list in my div is increasing the lineheight

> ID：16121291
> 
> 赞同：0
> 
> 时间：2013-04-20T14:14:36.807
> 
> 标签：html, css

In my header, I'm having an issue where if I put regular text in, the lineheight is fine, but if I use a list, I get a good amount of padding on the top and the bottom.

Below is all relevant HTML and CSS as well as a [fiddle](http://jsfiddle.net/PSeFe/2/)

```
<header class="clearfix">
        <div class="content-wrapper">
            <aside>
                <div class="nav">
                    My line-height isn't bad at all!
                </div>
            </aside>
        </div>
    </header>

<header class="clearfix">
        <div class="content-wrapper">
            <aside>
                <div class="nav">
                    <ul>
                        <li>My line-height is huge!</li>
                    </ul>

                </div>
            </aside>
        </div>
    </header> 
```

CSS

```
header
{
    background-color: #eee;
}

.clearfix
{
    overflow: auto;
}

header #title-container
{
    font-size: .7em;
}

    header aside .nav
    {
        padding-right: 4px;
        float: right;
    }

        header aside .nav
        {
            background-color: red;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:21:52.710

添加`style="display: inline; padding: 0;"`到您的`<ul>`-tag 可以解决问题。您的 html 的第二部分将如下所示：

```
<header class="clearfix">
    <div class="content-wrapper">
        <aside>
            <div class="nav">
                <ul style="display: inline; padding: 0;">
                    <li>My line-height is huge!</li>
                </ul>

            </div>
        </aside>
    </div>
</header> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:21:22.627

重置 ul 和 li 的边距和填充。

[http://jsfiddle.net/PSeFe/3/](http://jsfiddle.net/PSeFe/3/)

```
ul {
    margin: 0;
    padding: 0;
}

li {
    margin: 0;
    padding: 0;
} 
```

# python - 用于重命名 XML 元素的 Python

> ID：16121293
> 
> 赞同：6
> 
> 时间：2013-04-20T14:15:09.233
> 
> 标签：python, xml

我有一个 XML 文件，我想在其中编辑或重命名元素并保存文件。最好的方法是什么。XML 文件如下所示

```
<breakfast_menu>
<food>
    <name>Belgian Waffles</name>
    <price>$5.95</price>
    <description>two of our famous Belgian Waffles with plenty of real maple syrup</description>
    <calories>650</calories>
</food>
<food>
    <name>Strawberry Belgian Waffles</name>
    <price>$7.95</price>
    <description>light Belgian waffles covered with strawberries and whipped cream</description>
    <calories>900</calories>
</food>
<food>
    <name>Berry-Berry Belgian Waffles</name>
    <price>$8.95</price>
    <description>light Belgian waffles covered with an assortment of fresh berries and whipped cream</description>
    <calories>900</calories>
</food>
<food>
    <name>French Toast</name>
    <price>$4.50</price>
    <description>thick slices made from our homemade sourdough bread</description>
    <calories>600</calories>
</food>
<food>
    <name>Homestyle Breakfast</name>
    <price>$6.95</price>
    <description>two eggs, bacon or sausage, toast, and our ever-popular hash browns</description>
    <calories>950</calories>
</food>
</breakfast_menu> 
```

如何将“描述”更改为“详细信息”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T14:28:22.027

我建议您使用[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)来解析您的 XML 文档。

这是在 python 中处理 XML 文档的简单且最佳的库。

这是一个示例代码：

```
import xml.etree.ElementTree as xmlParser
xmlDoc = xmlParser.parse('path to your xml doc')
rootElement = xmlDoc.getroot()

for element in rootElement.iter('description'):
    element.tag = 'details'

# Saving the xml
xmlDoc.write('path to your new xml doc') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:34:03.050

如果你的 xml 总是这么简单，你可以使用正则表达式：

```
import re
xml = """
<breakfast_menu>
...
</breakfast_menu>
"""
regex = re.compile('<description>(.*)</description>')
xml = regex.sub(r'<details>\1</details>',xml) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-20T14:21:44.837

那么你有两个选择。如果 xml 很小，则可以使用纯字符串替换。如果 xml 非常大，那么我建议应用 xsl 转换。

# javascript - 如何检查对象的属性等于某个值？

> ID：16121295
> 
> 赞同：-4
> 
> 时间：2013-04-20T14:15:22.550
> 
> 标签：javascript

在下面的代码中，我想打印小于 34 的“years_of_experience”和等于“texas”的出生地的值。但我不知道如何正确编写语句

```
var  employees = [
    {
       name1:'jacob',
       age2 : 23,
       date_of_join : 23/03/2013,
       years_of_experience : 12,
       birth_place: "virginia" 
    },
    {
       name2:'sheldon',
       age2 : 34,
       date_of_join :2/03/2013,
       years_of_experience : 15,
       birth_place: "lisbon"  
    },
    {
       name3:'johnny',
       age3 : 25,
       date_of_join :29/03/2013,
       years_of_experience : 13,
       birth_place: "texas"  
    }];

    employees.forEach(function(a) {
        console.log(a);
     });
        for(var i = 0;i <= employees.length;i++)
            {
                if(employees[i]!= -1)
                {
                    console.log("gotcha");
                    if(employees.hasOwnProperty === years_of_experience) < 34 || (employees.hasOwnProperty(birth_place) === "teaxs")
                    {
//here i want to print the values of  
//  "years_of_experience"  which is less than 34 and birthplace which is equal to   
// "texas".But i'm not getting how to write the statement for that become m new to 
// javascript and even m not sure i've written the conditional statement right,
// please correct it and help me.. 

                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:27:33.860

像这样

```
var years = employees[i]["years_of_experience"]; 
var POB = employees[i]["birth_place"];
if (years < 34 || POB === "texas") {
  document.getElementById("idOfSomeTag").innerHTML = "Years:" years +", POB"+POB;
  // or console.log("years",years,"Pob",POB);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:19:59.350

尝试这个

```
if(employees[i].years_of_experience < 34 || employees[i].birth_place === "teaxs") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:20:21.690

首先，你拼错了“texas”

[`hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)是一种方法，而不是属性，它也不会从属性中提取值，它只是返回一个`boolean`它是否具有该属性。

您可能需要以下内容

```
for (var i = 0; i < employees.length; i++) {

    if (employees[i].hasOwnProperty("years_of_experience") && employees[i].hasOwnProperty("birth_place")) {
        if (employees[i].years_of_experience < 34 || employees[i].birth_place === "texas") {
            console.log("Year of Experience: \n" + employees[i].years_of_experience + "\nBirth Place: " + employees[i].birth_place);
        }
    }
} 
```

[jsFiddle](http://jsfiddle.net/Cwalkdawg/Pycd4/5/)：检查你的控制台。

如果这是您想要存储日期的方式，您还应该将“date_of_join”更改为字符串。现在你得到一个非常模糊的十进制值。

```
var employees = [{
    ...
    date_of_join: "23 / 03 / 2013",
    ...
}, {
    ...
    date_of_join: "2 / 03 / 2013",
    ...
}, {
    ...
    date_of_join: "29 / 03 / 2013",
    ...
}]; 
```

# javascript - How to NOT pre-load images in expand script?

> ID：16121296
> 
> 赞同：0
> 
> 时间：2013-04-20T14:15:39.970
> 
> 标签：javascript, jquery, hover, thumbnails

I have a question that's bugging me quite a bit, been working on it a while with every road leading to dissapoints, and no suitable alternatives I've found.

How do I have the following NOT pre-load images?

```
var oStyle = document.createElement('style');
oStyle.setAttribute('type','text/css');
var css = 'a.hovex-imageview { -moz-outline: 1px dotted red; }';
css += 'a.hovex-imageview img.hovex-imageview { display: none;position: fixed;left: 15%;right: 85%;top:15%;bottom:85%;max-width: 100%;margin: 0;border: none; }';
css += 'a.hovex-imageview:hover img.hovex-imageview { display:block;max-width:80%;max-height:80%; }';
oStyle.innerHTML = css;
document.getElementsByTagName('head')[0].appendChild(oStyle);

var aElm = document.getElementsByTagName('a');
for (i=0; i<aElm.length; i++) {
    if (aElm[i].href.match(/\.(jpg|jpeg|gif|png)$/)) {
        var oImg = document.createElement('img');
        oImg.setAttribute('src',aElm[i].href);
        oImg.setAttribute('class','hovex-imageview');
        aElm[i].appendChild(oImg);
        aElm[i].setAttribute('class','hovex-imageview');    
    }
} 
```

Basically, it is perfect in almost every way for my purpose, though the one drawback is it often finds itself on pages with >1000 large images, so having it only load the full image on mouseover of the link/thumb would save people some crashed browsers, I've had people complain about that.

I can see why this could be difficult to do, as it works by creating every image on load and hiding them, then showing them on hover, with it said if I'd found/managed to write an acceptable alternative I'd of used it: this seems to be what I've got.

Great thanks to any helpful wizards in advance~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:16:47.230

我会通过仅在鼠标悬停上设置图像 src 来接近它...

看到这个小提琴：http: [//jsfiddle.net/LD8t6/](http://jsfiddle.net/LD8t6/)

```
var aElm = document.getElementsByTagName('a');
for (i=0; i<aElm.length; i++) {
    if (aElm[i].href.match(/\.(jpg|jpeg|gif|png)$/)) {
        var oImg = document.createElement('img');
        oImg.setAttribute('class','hovex-imageview');
        oImg.setAttribute('src','');
        aElm[i].appendChild(oImg);
        aElm[i].setAttribute('class','hovex-imageview'); 
        aElm[i].onmouseover = function() { 
            oImg.setAttribute('src', this.href);   
        }
    }
} 
```

# c++ - 无穷大值和缓冲区

> ID：16121304
> 
> 赞同：0
> 
> 时间：2013-04-20T14:16:34.660
> 
> 标签：c++

我有一个记分板，可以随时更新新信息，缓冲区大小=我的记分板可以处理的行数，但我正试图让它无限无限。

我正在尝试做的是将无穷大值分配给这样的缓冲区：

```
 const int infinity = std::numeric_limits<const int>::infinity(); 

 char Buffer_format_text [infinity]; 
```

但它不起作用，因为它说：

**错误 C2057：预期的常量表达式错误 C2466：无法分配常量大小为 0 的数组**

有没有办法做到这一点？还是把戏？， 请帮我。不要问我为什么要这样做，我要问的是怎么做。

**更新：**

这就是我用 sprintf 做的，你在 ostringstream 中是怎么做的？

```
char Buff[100]; 
int length  = 0;
int amount_of_space = 8;
length += sprintf(Buff+length,"%-*s %s\n", amount_of_space, "Test", "Hello"); 
```

```
this output: Test     Hello 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T14:24:52.283

在 C++11 中，`infinity()`is `constexpr`，所以**理论上**你可以这样直接使用它：

```
char Buffer_format_text[std::numeric_limits<const int>::infinity()]; 
```

但是，这里的问题是`int` **不能表示无穷大**。如果你试过这个：

```
std::cout << std::numeric_limits<const int>::has_infinity; 
```

您会看到`0`( `false`) 被打印到标准输出（[**现场示例**](http://ideone.com/CrXozo)）。where is的`infinity()`特化函数将返回 0 - 事实上，该函数在这些情况下毫无意义 - 并且您不能创建大小为 0 的数组。`std::numeric_limits``has_infinity``false`

此外，您不能期望分配一个无限大小的数组 - 它如何适合内存？如果您事先不知道向量的大小，正确的方法是使用`std::vector`或类似的容器，它会根据请求分配内存。

* * *

**更新：**

看来您实际上需要一个无限数组是为了能够构建一个事先不知道大小的字符串。要封装这样一个动态增长的字符串，您可以使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string).

为了执行类型安全的输出到 an`std::string`和 replace`sprintf()`中，您可以使用[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream). 这将允许您将内容插入字符串，就像将其打印到标准输出一样。

然后，一旦你完成了对 的处理`std::ostringstream`，你可以`std::string`通过调用`str()`成员函数从中获取一个对象。

这是您可以在一个简单示例中使用它的方式：

```
#include <string>
#include <sstream>
#include <iostream>
#include <iomanip>

int main()
{
    std::ostringstream oss;

    oss << "The answer is: ";
    oss << 42;
    oss << ", and this is a double: ";
    oss << 3.14;
    oss << ". " << std::endl;
    oss << "Oh, btw, you can also output booleans: ";
    oss << std::boolalpha << true;
    oss << ". See? It's easy!" << std::endl;

    std::cout << oss.str();
} 
```

[**现场演示**](http://ideone.com/qg0cdh)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T14:18:50.697

您基本上不能在堆栈或堆上分配具有真正无限内存的数组。您也不能分配大小为 0 的数组，因为根据标准它是非法的。

您可以尝试使用在必要时自行增长的 std::vector。但是您仍然无法`infinite`分配内存，因为无论它有多大，您的磁盘空间都是有限的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T14:20:27.590

将缓冲区声明为无穷大是没有意义的，因为整数类型（通常）不能表示无穷大（FP 类型的`infinity`成员`numeric_limits`存在），并且因为没有机器可以创建无穷大字节的缓冲区。:)

相反，使用一个容器，它可以自己处理新插入所需的重新分配，仅受可用内存限制，例如`std::vector`（`std::deque`或其他，取决于您的插入/删除模式）。

* * *

编辑：由于问题似乎是关于创建一个任意长的字符串，因此“C++ 答案”是使用`std::ostringstream`，它允许您编写任意数量的元素（仅受可用内存限制）并为您提供`std::string`结果.

```
std::ostringstream os;
for(int i=0; i<1000; i++)
    os<<rand()<<" ";
std::string out=os.str();
// now in out you have a concatenation of 1000 random numbers 
```

* * *

编辑/2：

> 这就是我用 sprintf 做的，你在 ostringstream 中是怎么做的？
> 
> ```
> char Buff[100]; 
> int length  = 0;
> int amount_of_space = 8;
> length += sprintf(Buff+length,"%-*s %s\n", amount_of_space, "Test", "Hello"); 
> ```

```
// needed headers: <sstream> and <iomanip>
std::ostringstream os;
int amount_of_space = 8;
os<<std::left<<std::setw(amount_of_space)<<"Test"<<" "<<"Hello";
std::string out=os.str(); // you can get `length` with `out.size()`. 
```

但是，如果您只需要在最后进行多次插入调用`os.str()`，那么当您实际需要该字符串时。同样，无需跟踪长度，流会自动完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T14:20:49.660

您应该使用可以动态增长的容器，例如`std::vector`（或者，您的情况似乎是文本，`std::string`）。

你可以`std::ostringstream`用来构造一个`std::string`这样的：

```
#include <iomanip>
#include <sstream>

std::ostringstream ss;
ss << std::setw(amount_of_space) << std::left << "Test" << ' ' << "Hello" << '\n';
std::string result = ss.str(); 
```

# mysql - 如何首先且仅运行一次子查询

> ID：16121305
> 
> 赞同：3
> 
> 时间：2013-04-20T14:16:47.750
> 
> 标签：mysql

如何让 MySQL 先运行子查询并且只运行一次？现在 MySQL 对表 t1 中的每一行运行内部查询，这是一个性能灾难。

```
explain select * from t1 where uid in (select id from t0);
+----+--------------------+-------+------+---------------+------+---------+------+----------+-------------+
| id | select_type        | table | type | possible_keys | key  | key_len | ref  | rows     | Extra       |
+----+--------------------+-------+------+---------------+------+---------+------+----------+-------------+
|  1 | PRIMARY            | t1    | ALL  | NULL          | NULL | NULL    | NULL | 18954249 | Using where |
|  2 | DEPENDENT SUBQUERY | t0    | ALL  | NULL          | NULL | NULL    | NULL |    12749 | Using where |
+----+--------------------+-------+------+---------------+------+---------+------+----------+-------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:19:45.827

如果你执行一个`inner join`，你会得到你想要的结果。

从：

```
select * from t1 where uid in (select id from t0); 
```

至：

```
select * from t1 join t0 on t1.t0id = t0.id 
```

[http://en.wikipedia.org/wiki/Join_(SQL)#Inner_join](http://en.wikipedia.org/wiki/Join_(SQL)#Inner_join)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T14:19:53.947

下面的 2 会比您当前的工作更快`query`，哪个更好地扩展取决于您的数据库结构

```
SELECT
  * 
FROM
  t1 t
  JOIN t0 ON ( t.uid = t0.id )      << If there are 2 row matches on table `t0`, it shall return duplicated rows (t1 table contents duplicated, you could use a distinct to avoid such cases) OR use the second query instead 
```

**和**

```
SELECT
  * 
FROM
  t1 t
  WHERE EXISTS (select 1 from t0 WHERE t0.id = t.uid) 
```

# jquery - 自动完成中的滚动条

> ID：16121306
> 
> 赞同：0
> 
> 时间：2013-04-20T14:16:55.797
> 
> 标签：jquery, html, css

您好，我的自动完成列表上的滚动条有点问题。在搜索栏中输入字母“o”，看看会发生什么。然而，我在 CSS 中添加了第 139 行，但没有滚动条：

```
overflow-y: auto; overflow-x: hidden; padding-right: 20px 
```

但是我说：

```
 <body style="overflow:hidden;"> 
```

在 html 中，因为我想要全屏显示。

[http://jsfiddle.net/fAe78/](http://jsfiddle.net/fAe78/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:22:34.547

尝试这个：

```
.ui-autocomplete {
    height: 300px;
    overflow: auto;
    right: 0 !important;
    left: auto !important;
} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/fAe78/1/](http://jsfiddle.net/praveenscience/fAe78/1/)

# system-verilog - Systemverilog：文本替换宏的范围

> ID：16121307
> 
> 赞同：2
> 
> 时间：2013-04-20T14:16:59.147
> 
> 标签：system-verilog

我读到文本替换宏在“verilog”中具有全局范围。SystemVerilog 是如何工作的？我想在 2 个不同的 SystemVerilog 文件中使用相同文本宏的 2 个不同定义 - 可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T17:37:55.537

在 SystemVerilog 中，宏定义仅限于编译单元范围，但这取决于工具配置。从规范：

> 定义哪些文件构成编译单元的确切机制是特定于工具的。但是，兼容工具应提供允许以下两种情况的使用模型：
> 
> a) 给定编译命令行上的所有文件构成一个编译单元（在这种情况下，这些文件中的声明可以按照整个文件集的正常可见性规则访问）。
> 
> b) 每个文件都是一个单独的编译单元（在这种情况下，每个编译单元范围内的声明只能在其对应的文件中访问）。

因此，如果您使用多文件编译单元（`-mfcu`对于 Modelsim），将会发生冲突，因为宏命名空间将具有全局范围。但是，规范明确允许重新定义，因此在这种情况下您可能不会收到错误（或警告），除非您的工具支持它。

> 文本宏名称空间在编译单元内是全局的。因为文本宏名称被引入并与前导 ' 字符一起使用，所以它们与任何其他名称空间保持一致。文本宏名称在构成编译单元的输入文件集中以出现的线性顺序定义。相同名称的后续定义覆盖输入文件余额的先前定义。

根据您使用宏的方式，您可能需要考虑使用参数。参数本质上是比预处理器指令范围更有限的常量。它们还可以用于使用生成构造选择性地实例化代码。

[您可以在此处](http://standards.ieee.org/getieee/1800/download/1800-2012.pdf)免费获取 SV 规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:37:29.927

如果所需的宏具有类似的结构/格式，那么您可以使用带参数的宏。请参阅 IEEE1800-2012 第 22.5.1 节。

```
`define myMacro(arg1,arg2) \
    prefix_``arg1 = arg2``_postfix 
```

如果所需的宏定义仅在其受尊重的文件中并且是唯一的，那么您可以执行以下操作。所有其他文件都没有``mymacro`可以调用的。``undef`来自 Verilog，IEEE1364-1995 第 16.3.2 节，并已包含在 SystemVerilog 中。您可以``undef`在最新版本中了解更多信息；IEEE1800-2012 第 22.5.2 节。

文件 1.sv：

```
`define mymacro abcd
/* SystemVerilog code */
`undef mymacro 
```

文件2.sv：

```
`define mymacro wxyz
/* SystemVerilog code */
`undef mymacro 
```

# javascript - 在页面加载时运行 javascript 代码（twitter-bootstrap 弹出窗口）

> ID：16121309
> 
> 赞同：0
> 
> 时间：2013-04-20T14:17:05.420
> 
> 标签：javascript, .net, twitter-bootstrap, popup

我使用 twitter-Bootstrap 和 .net 编写了一些代码，以便在您按下按钮时显示一个弹出窗口。这是我的代码片段：

```
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>           
            <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">                
                <div class="modal-body">
                    <p>... some info...</p>
                </div>                
            </div> 
```

当我按下按钮时，会出现弹出窗口。但我想让页面加载时出现独立于按钮的弹出窗口。我怎样才能做到这一点，也许使用 javascript 或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:25:13.600

使用 window.onload。

```
window.onload=function(){
    $("#myModal").modal("show");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:23:40.563

是的，您可以在页面加载时触发它。

```
$(function() {
   $("#myModal").modal("show");
}); 
```

# django - 为多对多重载 ModelMultipleChoiceField __init__

> ID：16121321
> 
> 赞同：0
> 
> 时间：2013-04-20T14:18:51.530
> 
> 标签：django, django-forms

我有一些工作，但我确信这不是最好的方法，因为我有重复的代码。它是一个小部件，用于显示客户端可以属于的组的复选框。一个客户端可以属于多个组。

我确信我以某种方式搞砸了小部件的重载。

**模型.py**

```
class Client(models.Model):
    name = models.CharField(u'Name', max_length=250, unique=True)
    groups = models.ManyToManyField('ClientGroup', related_name="client")
    def __unicode__(self):
        return self.name

class ClientGroup(models.Model):
    name = models.CharField(u'Name', max_length=250, unique=True)
    def __unicode__(self):
        return self.name 
```

**表格.py**

```
# -*- coding: utf-8 -*-

from django import forms
from models import ClientGroup

class ClientGroupForm(forms.ModelForm):
    class Meta:
        model = ClientGroup
        fields = ('groups',)

    groups = forms.ModelMultipleChoiceField(queryset=ClientGroup.objects.all(),
                                        widget=forms.CheckboxSelectMultiple(),
                                        label='',
                                        required=False)

    def __init__(self, client_id = None, *args, **kwargs):
        super(ClientGroupForm, self).__init__(*args, **kwargs)
        if client_id:
            self.fields['groups'] = forms.ModelMultipleChoiceField(queryset = ClientGroup.objects.all(),
                                        initial=ClientGroup.objects.filter(client = client_id),
                                        widget=forms.CheckboxSelectMultiple(),
                                        label='',
                                        required=False)

    def __unicode__(self):
        return self.groups 
```

**视图.py**

```
def client(request, pk = 0):
    client={}
    if pk != 0:
        client = Client.objects.get(pk = pk)

    groupsForm = ClientGroupForm(pk)
    context = {'client':client, 'groupsForm': groupsForm}
    return render(request, 'client.html', context) 
```

谁能告诉我一个更好的forms.py编码方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:39:27.107

你可以更换

```
class ClientGroupForm(forms.ModelForm):
    # stuff

    def __init__(self, client_id = None, *args, **kwargs):
        super(ClientGroupForm, self).__init__(*args, **kwargs)
        if client_id:
            self.fields['groups'] = forms.ModelMultipleChoiceField(queryset = ClientGroup.objects.all(),
                                        initial=ClientGroup.objects.filter(client = client_id),
                                        widget=forms.CheckboxSelectMultiple(),
                                        label='',
                                        required=False) 
```

和

```
class ClientGroupForm(forms.ModelForm):
    # stuff

    def __init__(self, *args, **kwargs):
        self.client_id = kwargs.get('client_id', None)
        super(ClientGroupForm, self).__init__(*args, **kwargs)
        if client_id:
            self.fields['groups'].queryset = ClientGroup.objects.filter(client=client_id) 
```

# ruby-on-rails - Rails Microposts 显示所有

> ID：16121322
> 
> 赞同：0
> 
> 时间：2013-04-20T14:18:54.943
> 
> 标签：ruby-on-rails, ruby

所以，按照 M. Hartl 的教程，我有这个 static_pages 控制器来显示这个

```
class StaticPagesController < ApplicationController
def home
if signed_in?
  @micropost = current_user.microposts.build
  @feed_items = current_user.feed.paginate(page: params[:page])
end
end

def help
end

def about
end

def contact
end
end 
```

这使它在主页上显示所有当前用户的微博，但仅显示当前用户

我如何让它显示所有用户的微博，每一个都创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:21:30.013

您将查询范围限定为仅获取`current_user`微博。`Micropost.all`应该给你所有的微博。还要确保您尚未在模型中设置一些默认范围，在这种情况下，您将不得不使用`Micropost.unscoped`.

# facebook - Facebook 是否已开始阻止在 Friend 的墙上发帖？

> ID：16121328
> 
> 赞同：2
> 
> 时间：2013-04-20T14:19:29.763
> 
> 标签：facebook

任何人好心建议，Facebook是否开始阻止在朋友的墙上发帖？由于在我之前的应用程序中，我尝试在朋友的 Facebook 墙上发布图像、链接、文本等，它工作得很好，而且效果更好，但是在 2 月之后突然我无法将信息发布到我的朋友墙上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:19:29.557

Facebook 已从 api 中删除了此功能。您只能发布到自己的墙上。在他们的开发者博客的某个地方有一篇关于它的博客文章，你可以在完成的路线图上看到它[https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/) （搜索“删除通过图形 API")

如果您想发布到其他用户墙 Facebook 建议您调用 Feed 对话框

# android - Android：进程已死/AsyncTask HTTP get

> ID：16121333
> 
> 赞同：0
> 
> 时间：2013-04-20T14:19:49.587
> 
> 标签：android, http, process, android-asynctask

我有一个奇怪的问题。我正在使用 AsyncTask 下载一些图像。

有时我的应用程序会默默地“崩溃”

```
I/System.out(28632): Downloaded :  135443
D/szipinf (28632): Initializing inflate state
I/ActivityManager( 1740): Process com.zibi.hypercolor.next (pid 28632) has died.
E/InputDispatcher( 1740): channel '4056a838 com.zibi.hypercolor.next/com.zibi.hypercolor.next.WallpaperSettingsList (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher( 1740): channel '4056a838 com.zibi.hypercolor.next/com.zibi.hypercolor.next.WallpaperSettingsList 
(server)' ~ Channel is unrecoverably broken and will be disposed!

I/ActivityManager( 1740): Low Memory: No more background processes. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:07:34.400

在你的情况下，这`Low Memory: No more background processes`是一个死的赠品。设备内存不足。当它发生时，它会停止进程。它按以下顺序停止它们：

1.  没有任何活动或服务的进程，即被置于后台并保持运行以防用户再次需要它们的应用程序。
2.  具有后台服务的进程，例如检查电子邮件。
3.  具有前台服务的进程，例如后台下载或播放音乐播放器。
4.  具有前台活动的进程，即正在使用的应用程序。

显然您的应用程序加载了太多位图并耗尽了所有内存。系统首先停止所有不需要的东西，但是当你继续加载位图时，它也必须杀死需要的东西。后台下载服务先行，因为是上面的第三种情况。

您只需要确保内存中不会同时有很多位图。请注意，闪存相当快，并且使用大量内存会降低设备本身的速度，因此在显示中保留更多位图和在内存中保留一些最近使用的位图不太可能有任何帮助。

# hibernate - 加密数据库密码，以便在日志中它不应该存在

> ID：16121336
> 
> 赞同：0
> 
> 时间：2013-04-20T14:20:12.570
> 
> 标签：hibernate, logging, log4j

我通过下面的连接概念开发了一个一对一关系的休眠应用程序，但我发现在数据库配置文件 cfg.xml 文件中我们提供数据库密码以及我正在检查该数据库的日志中密码在那里，请告知如何使用log4j至少在日志中加密设置数据库密码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:27:07.810

如果这是一个生产系统，强烈建议不要将数据库密码存储在配置文件中，而是从密钥库中获取。在我们公司，我们使用集中式密钥存储并覆盖 Driver 接口，该接口在运行时使用与 [用户、密码] 对应的密码短语从密钥存储中获取凭据并初始化数据源。这将使 Hibernate 基础结构看到密码而不是用户/密码。HTH。

# java - 构造函数处理异常并使用此关键字 Java

> ID：16121348
> 
> 赞同：5
> 
> 时间：2013-04-20T14:21:18.397
> 
> 标签：java, exception, constructor, this

我的类有两个构造函数，一个接受`File`对象，另一个接受`String`对象，我想使用`this`关键字。带有实现的函数是带有`File`作为参数的函数，带有`String`将调用的函数`this`。现在我想检查构造函数中的异常，`String`但我得到错误，这`this`应该是第一行。如何检查错误然后调用`this`.

这是我的代码：

```
public Test (String filename) {
    if (filename == null)
        throw new NullPointerException("The String you entered is null.");
    if (filename.isEmpty())
        throw new IllegalArgumentException("The String you entered is empty.");

    this(new File(filename)); // error
}

public Test (File f) {
    /* implementation here */
} 
```

这是确切的错误：`Constructor call must be the first statement in a constructor`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:24:25.017

不幸的是，由于它们的任意限制，这在 Java 中是不可能的。你有两个主要的可能性。

更惯用的 Java 技术是将所有内容包装在工厂函数中，以便捕获异常。工厂函数也很有用，因为它们让您可以多态地创建对象，并帮助隐藏实际创建的对象的细节。

```
public static Test create(String filename){
    if (filename == null)
        throw new NullPointerException("The String you entered is null.");
    if (filename.isEmpty())
        throw new IllegalArgumentException("The String you entered is empty.");
    return new Test(filename);
}

private Test (String filename) {
    this(new File(filename)); 
}

public Test (File f) {
    /* implementation here */
} 
```

另一种选择是在不存在此类限制的字节码中编写构造函数。不幸的是，字节码的可读性和可维护性较差，因此您可能希望尽量减少主要 Java 应用程序中的字节码数量。您也可以使用 AspectJ 等非 Java 语言来执行此操作。

编辑：如果您实际上并没有尝试捕获异常，那么还有第三种可能性。您可以在超级构造函数调用之前插入任意代码，方法是创建一个执行检查的单独函数，然后将其作为虚拟参数传递给超级构造函数调用。由于首先评估参数，因此您的代码将首先运行，但这有点小技巧。

```
public Test (String filename) {
    this(doChecks(filename), new File(filename));
}

private static Void doChecks(String filename){
    if (filename == null)
        throw new NullPointerException("The String you entered is null.");
    if (filename.isEmpty())
        throw new IllegalArgumentException("The String you entered is empty.");
    return null;
}

public Test (Void dummy, File f) {
    this(f);
}

public Test (File f) {
    /* implementation here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:29:17.817

如果我们在构造函数中使用`this`or ，则or应该是构造函数中的第一条语句。如果你从特定的构造函数中抛出异常，那就更好了。`super``this``super`

```
public Test (String filename) {
    this(new File(filename));
} 
```

让第二个构造函数处理由传递引起的任何异常`null`。

```
public Test (File file) {
    // exception handling code
    // or new instance creation
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:24:37.660

不，您不能在 call 之前检查错误`this`。这是规范禁止的。事实上，你并不需要它。让我们`new File(filename)`抛出异常。

编辑：我看到aizen92的评论：[实际上这就是我的构造函数的实现，它捕获了文件可能抛出的异常，所以我只是添加了空异常并直接在我的第二个构造函数中使用它？](https://stackoverflow.com/questions/16121348/constructor-handling-exception-and-using-this-keyword-java/16121381#comment23026117_16121428)

```
public Test (String filename) {
    this((filename == null || filename.isEmpty()) ? null : new File(filename)); 
} 
```

# rpm - RPM 文件命名约定 - 已知准则？

> ID：16121351
> 
> 赞同：1
> 
> 时间：2013-04-20T14:21:35.563
> 
> 标签：rpm, conventions

我有太多的依赖：

1.  操作系统（RHEL vs CentOS vs Suse vs Ubuntu）
2.  操作系统版本号
3.  编译器名称和版本号
4.  依赖库及其版本号
5.  用于构建库以确保 ABI 兼容性的编译器选项

我的代码现在主要是 C++，我需要创建 rpm，并且名称应该足够具有描述性。然而，考虑到第 1-5 项使事情变得困难，因为 rpm 名称变得非常大。

我们是否有任何已知的指导方针来解决此类问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:11:18.123

指导方针是正确填写您的规范文件并使用 rpmbuild 生成的名称。

1.  操作系统版本包含在发布标签中。例如，您可以将`Release`标签设置`1.el6`为 RHEL/CentOS。一些发行版提供了一个`%{dist}`扩展为类似`.el6`.
2.  与第一点相同
3.  编译器没有约定。您可以将编译器的名称添加到软件的名称中，但是您必须处理冲突，因为您可以多次安装相同的软件。
4.  依赖库一般不放在 rpm 名下。那将是一个很长的名字。它们列在`Requires`规范文件的标签中。对于 C++ 程序，rpm 可以自动检测依赖关系，您只需设置`BuildRequires`标签（构建软件所需的包）
5.  同 4.，libs 的编译器选项一般不放在文件名中。然而，rpms 应该使用尽可能多的启用功能进行编译。

所以，为了回答你的问题，前两点有指导方针，但其他点没有，因为这通常是不需要的（而且它们不是好主意）。

# javascript - 替换或删除第 n 次出现的 \n

> ID：16121352
> 
> 赞同：0
> 
> 时间：2013-04-20T14:21:40.737
> 
> 标签：javascript, jquery

这是我的字符串：

```
var ok = "\n\n33333333333\n\n\n"; 
```

如何用 '' 替换第 4 次出现的 '\n'？或者，如何删除第 4 次出现的 '\n'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:31:34.297

*   查找 n-1 次出现和其他字符。
*   捕获子匹配。
*   找到下一个事件。
*   用捕获的子匹配替换整个匹配，以及替换字符/字符串

    `"AA33333333333AAA".replace(/((?:[^A]*A){3}[^A]*)A/,"$1k")`

（用`A`and`k`代替`\n`and`""`所以你可以更清楚地看到结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T08:28:25.150

至少对我来说，这是一个可读性好的解决方案：

```
var i = 0;
ok = ok.replace(/\n/g, function () {
  return ++i == 4 ? "" : "\n";
}); 
```

但是，就性能而言，它可能不会获胜。

# visual-studio-2010 - 我如何播放声音文件，文件名来自系统字符串

> ID：16121353
> 
> 赞同：0
> 
> 时间：2013-04-20T14:21:41.913
> 
> 标签：visual-studio-2010, c++-cli

```
String ^ fileName = textBox5->Text + "DES.wav";

PlaySound(fileName, NULL, SND_FILENAME | SND_SYNC); 
```

错误是说：

错误 4 错误 C2664：“PlaySoundW”：无法将参数 1 从“System::String ^”转换为“LPCWSTR”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:30:56.863

无需混合托管和非托管代码，使用`SoundPlayer`类：

```
String ^ fileName = textBox5->Text + "DES.wav";
SoundPlayer^ player = gcnew SoundPlayer(filename);
player->PlaySync();    // or Play for asynchronous execution 
```

[http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)

# php - 限制，因此只有相关的上传者可以下载他们的文件

> ID：16121358
> 
> 赞同：0
> 
> 时间：2013-04-20T14:22:04.347
> 
> 标签：php, codeigniter

我正在建立一个小型网站，允许用户从服务器上传和下载他们的个人文件。Codeigniter 正在用于该项目，并且我正在使用[文件上传类](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)来上传文件。

出现的问题是我如何确保只有上传文件的人才能下载它。目前所有文件都上传到`localhost/curious/uploads`. 尽管文件仅对上传者可见，但如果他们共享上传链接，任何人都可以下载文件。

因此，如果史蒂夫上传了一个名为`secure_rom.doc`并且路径是`localhost/curious/uploads/secure_rom.doc`该文件的文件，那么任何拥有该链接的人都可以下载该文件。

怎么可能确保只有上传者可以从下载区域下载而不是其他任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:51:14.450

**简单的方法**

```
-just store the 'id' of the user when he/she uploaded something.
- hide the URL if 'user_id' is different.
- adding random character will have in securing. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:33:11.063

您可以使用下载脚本（尝试使用 codeigniter 进行调整）

1）检查用户是否登录

2）用文件名和内容类型设置标题

3）读取文件并将其发送给客户端！

控制器 ：

```
if($userConnected) {
 header('Content-disposition: attachment; filename=' . $file_name);
 header('Content-type: ' . $file_mime);
 $file_content = file_get_contents($file_location);
 echo $file_content;
}
else 
 echo 'No permission !'; 
```

[哑剧内容功能](http://php.net/manual/en/function.mime-content-type.php)

# nsdictionary - 借助字典和数组显示 JSON 数据

> ID：16121359
> 
> 赞同：-1
> 
> 时间：2013-04-20T14:22:09.280
> 
> 标签：nsdictionary, nsjsonserialization

我收到以下错误

```
 [__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x75a8e20
    2013-04-20 08:56:14.90 MyApp[407:c07] *** Terminating app due to uncaught 
    exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary objectAtIndex:]: 
    unrecognized selector sent to instance 0x75a8e20' 
```

这是我第一次使用 JSON。当我尝试运行 URL 是 flickr url 的第一段代码时，出现上述错误。当我使用照片作为键时，它会打印数组并且应用程序突然退出。

```
#define flickrPhotoURL [NSURL URLWithString: @"http://api.flickr.com/services/rest/?format=json&sort=random&method=flickr.photos.search&tags=rocket&tag_mode=all&api_key=12345&nojsoncallback=1"]

- (void)viewDidLoad
{
   [super viewDidLoad];
   //this line of code will be executed in the background to download the contents of the flickr URL
   dispatch_async(flickrBgQueue, ^{
   NSData* flickrData = [NSData dataWithContentsOfURL:flickrPhotoURL]; //NOTE: synchronous method...But we actually need to implement asynchronous method
   [self performSelectorOnMainThread:@selector(appFetchedData:) withObject:flickrData waitUntilDone:YES]; //when data is available "appFetchedData" method will be called
}); 
```

}

```
- (void)appFetchedData: (NSData *)responseData 
{
 //parsing JSON data
 NSError *error_parsing;
 NSDictionary *flickr_json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error_parsing];
 NSArray* photo_information = [flickr_json objectForKey:@"photos"];

 NSLog(@"Photo Information: %@",photo_information);

 NSDictionary* photo = (NSDictionary*)[photo_information objectAtIndex:0];

 humanReadable.text = [NSString stringWithFormat:@"Owner is %@",[photo objectForKey:@"Owner"]];
} 
```

但是，当我通过将键“照片”替换为“贷款”并使用以下 URL 和代码来运行相同的代码时

```
#define flickrPhotoURL [NSURL URLWithString: @"http://api.kivaws.org/v1/loans/search.json?status=fundraising"]

- (void)appFetchedData: (NSData *)responseData 
{
 //parsing JSON data
 NSError *error_parsing;
 NSDictionary *flickr_json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error_parsing];
 NSArray* photo_information = [flickr_json objectForKey:@"loans"];

 NSLog(@"Photo Information: %@",photo_information);

 NSDictionary* photo = (NSDictionary*)[photo_information objectAtIndex:0];

 humanReadable.text = [NSString stringWithFormat:@"loan amount is %@",[photo objectForKey:@"loan_amount"]]; 
```

}

，应用程序在 humanredable.text 属性上设置正确的信息。我是否为第一个 JSON 使用了错误的密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:33:58.633

首先，感谢您按原样发布您的 Flickr API 密钥！有朝一日进行身份盗用对我来说非常有用。

其次，非常感谢您没有读取您返回的数据。它是这样开始的：

```
{"photos":{"page":1, "pages":1792, "perpage":100,
 ^^^^^^^^^^ 
```

所以键的对象`photos`是字典，而不是数组，因此，

```
NSArray* photo_information = [flickr_json objectForKey:@"photos"]; 
```

是错的。你是不是这个意思：

```
NSArray* photo_information = [[flickr_json objectForKey:@"photos"]
                               objectForKey:@"photo"]; 
```

? 此外，在您构建人类可读的描述时，

```
[photo objectForKey:@"Owner"] 
```

错了，应该是

```
[photo objectForKey:@"owner"] 
```

反而。

# linux - 为什么堆栈上的LD_PRELOAD的值

> ID：16121364
> 
> 赞同：0
> 
> 时间：2013-04-20T14:22:53.793
> 
> 标签：linux, memory, stack, overflow, ld-preload

我正在研究缓冲区溢出并解决一些兵棋推演。存在一个问题，缓冲区上方的所有堆栈内存都设置为 0，除了 main 的返回地址，它将是：

```
buffer
[0000000...][RET][000000...] 
```

我可以覆盖那个 RET。所以我找到了一些解决这个问题的提示。这是使用 LD_PRELOAD。有人说 LD_PRELOAD 的值不仅在堆栈的环境变量区域中，而且在堆栈的某个地方。所以我设置了 LD_PRELOAD 并搜索它并使用 gdb 找到它。

```
$ export LD_PRELOAD=/home/coffee/test.so
$ gdb -q abcde
(gdb) b main
Breakpoint 1 at 0x8048476
(gdb) r
Starting program: /home/coffee/abcde

Breakpoint 1, 0x8048476 in main ()
(gdb) x/s 0xbffff6df
0xbffff6df:      "@èC\001@/home/coffee/test.so"
(gdb) x/s 0xbffffc59
0xbffffc59:      "LD_PRELOAD=/home/coffee/test.so"
(gdb) q
The program is running.  Exit anyway? (y or n) y
$ 
```

所以有！现在我知道 LD_PRELOAD 的值在缓冲区下面的堆栈上，现在我可以利用了！

但我想知道为什么 LD_PRELOAD 会加载到该内存地址上。该值也在堆栈的环境变量区域！

这样做的目的是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:03:36.497

探索堆栈布局的代码：

```
#include <inttypes.h>
#include <stdio.h>

// POSIX 2008 declares environ in <unistd.h> (Mac OS X doesn't)
extern char **environ;

static void dump_list(const char *tag, char **list)
{
    char **ptr = list;
    while (*ptr)
    {
        printf("%s[%d] 0x%.16" PRIXPTR ": %s\n",
               tag, (ptr - list), (uintptr_t)*ptr, *ptr);
        ptr++;
    }
    printf("%s[%d] 0x%.16" PRIXPTR "\n",
           tag, (ptr - list), (uintptr_t)*ptr);
}

int main(int argc, char **argv, char **envp)
{
    printf("%d\n", argc);
    printf("argv         0x%.16" PRIXPTR "\n", (uintptr_t)argv);
    printf("argv[argc+1] 0x%.16" PRIXPTR "\n", (uintptr_t)(argv+argc+1));
    printf("envp         0x%.16" PRIXPTR "\n", (uintptr_t)envp);
    printf("environ      0x%.16" PRIXPTR "\n", (uintptr_t)environ);

    dump_list("argv", argv);
    dump_list("envp", envp);
    return(0);
} 
```

将程序编译为`x`，我在经过消毒的环境中运行它：

```
$ env -i HOME=$HOME PATH=$HOME/bin:/bin:/usr/bin LANG=$LANG TERM=$TERM ./x a bb ccc
4
argv         0x00007FFF62074EC0
argv[argc+1] 0x00007FFF62074EE8
envp         0x00007FFF62074EE8
environ      0x00007FFF62074EE8
argv[0] 0x00007FFF62074F38: ./x
argv[1] 0x00007FFF62074F3C: a
argv[2] 0x00007FFF62074F3E: bb
argv[3] 0x00007FFF62074F41: ccc
argv[4] 0x0000000000000000
envp[0] 0x00007FFF62074F45: HOME=/Users/jleffler
envp[1] 0x00007FFF62074F5A: PATH=/Users/jleffler/bin:/bin:/usr/bin
envp[2] 0x00007FFF62074F81: LANG=en_US.UTF-8
envp[3] 0x00007FFF62074F92: TERM=xterm-color
envp[4] 0x0000000000000000
$ 
```

如果你仔细研究，你会发现`argv`to 的参数`main()`是一系列指向堆栈更上层字符串的指针的开始；（在 POSIX 机器上`envp`可选的第三个参数`main()`）与全局变量`environ`和相同`argv[argc+1]`，并且也是一系列指向堆栈上方字符串的指针的开始；`argv`和指针指向的字符串`envp`跟随两个数组。

这是 Mac OS X 上的布局（如果重要，则为 10.7.5，它可能不重要），但我可以肯定你会在其他类 Unix 系统上找到相同的布局。

# java - 递归调用Java中创建新对象的函数

> ID：16121368
> 
> 赞同：-2
> 
> 时间：2013-04-20T14:23:24.637
> 
> 标签：java, recursion

如果在一个使用较小参数递归调用的函数中，并且在这个函数中，我们正在创建一个类的对象。递归创建的对象将具有相同的名称，因此我们不能保留名称的唯一性。我们如何在 Java 中处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:26:37.853

我认为这个问题源于一个误解。在 Java 中，你给局部变量的名字在代码运行时是 100% 不相关的——唯一的目的是让你，程序员，指定你正在谈论的变量（通过给出它的名字，并让编译器通过查看本地范围、其上方的范围等来弄清楚您的意思）。

因此，如果您有一个调用自身的递归方法，并在此方法中声明保存新对象的变量，那么就 Java 而言，它们不会发生冲突，它们都将正确地引用内存中不同位置的不同对象。

* * *

如果您实际上的意思是“我想记录我在递归方法中创建的所有新对象，但让它们明显可引用”，那么首先要创建一个集合（`ArrayList`例如）您的递归方法的参数之一 - 那么您可以将所有新制作的对象添加到此集合中，当它完全返回时，它将充满您的新制作对象。但如果这还不够区分，那么您需要问“什么可以区分这些对象？” 这将取决于对象的用途（递归方法的某些参数是否应该是“名称”的一部分？其他状态？还是只需要随机且唯一？）。

# java - EclipseLink MOXy OSGi 包的问题

> ID：16121374
> 
> 赞同：2
> 
> 时间：2013-04-20T14:23:53.127
> 
> 标签：java, jaxb, osgi, equinox

我正在开发一个非常简单的 Eclipse 插件，它使用 EclipseLink 的 MOXy 进行 XML 绑定（编组/解组）。当我在插件（Activator.java）的启动过程中尝试编组一个简单的类（Person.java）时，我遇到了几个错误。这是代码：

## 代码：

**人.java**

```
package test_rcp;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Person {

    private String name;
    private int age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

} 
```

**激活器.java**

```
package test_rcp;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;

import org.eclipse.ui.plugin.AbstractUIPlugin;
import org.osgi.framework.BundleContext;

public class Activator extends AbstractUIPlugin {

    public void start(BundleContext context) throws Exception {
        super.start(context);
        plugin = this;

        // Just to make sure EclipseLink is already loaded
        System.out.println(org.eclipse.persistence.Version.getVersion());

        Person p1 = new Person();
        p1.setName("John Dewey");
        p1.setAge(54);
        JAXBContext jc = JAXBContext.newInstance("test_rcp",Person.class.getClassLoader());

         Marshaller marshaller = jc.createMarshaller();
         marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
         marshaller.marshal(p1, System.out);
    }
} 
```

**清单文件**

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Test-RCP
Bundle-SymbolicName: Test-RCP; singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: test_rcp.Activator
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 org.eclipse.persistence.core,
 org.eclipse.persistence.moxy;bundle-version="2.4.1"
Bundle-ActivationPolicy: lazy
Bundle-RequiredExecutionEnvironment: JavaSE-1.7 
```

该软件包`test_rcp`还包含`jaxb.index`和`jaxb.properties`：

**jaxb.in​​dex**

```
Person 
```

**jaxb.properties**

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

## 问题：

但是，运行插件会引发以下异常：

```
javax.xml.bind.JAXBException: Provider org.eclipse.persistence.jaxb.JAXBContextFactory could not be instantiated: 
javax.xml.bind.JAXBException: Provider class org.eclipse.persistence.jaxb.JAXBContextFactory could not be instantiated:
 javax.xml.bind.JAXBException:
 ClassCastException: attempting to cast bundleresource://43.fwk583158213/javax/xml/bind/JAXBContext.class to jar:file:/usr/lib/jvm/java-7-oracle/jre/lib/rt.jar!/javax/xml/bind/JAXBContext.class.  Please make sure that you are specifying the proper ClassLoader. 
```

我知道问题是由于两个类加载器已经加载了`javax.xml.bind`包，但我不知道为什么以及如何避免这种情况。

Morover，通过使用`JAXBContextFactory`代替（如此[处](https://stackoverflow.com/a/11797373/2295964)`JAXBContext.newInstance`建议），即：

```
JAXBContext jc = org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(new Class[] {Person.class}, null); 
```

我会得到以下异常：

```
java.lang.LinkageError: loader constraint violation:
loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) previously
initiated loading for a different type with name "javax/xml/bind/JAXBContext" 
```

我已经尝试了以下解决方案但没有成功：

[https://stackoverflow.com/a/12943115/2295964](https://stackoverflow.com/a/12943115/2295964)

[https://stackoverflow.com/a/11797373/2295964](https://stackoverflow.com/a/11797373/2295964)

***如果有人能帮助我摆脱这种痛苦，我将不胜感激！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:29:22.860

您发布的清单仅包含`Require-Bundle`：

```
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 org.eclipse.persistence.core,
 org.eclipse.persistence.moxy;bundle-version="2.4.1" 
```

我建议添加`Import-Package: javax.xml.bind`到捆绑清单中。这应该允许框架将包解析为`org.eclipse.persistence.moxy`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:16:43.927

您需要确保导入`javax.xml.bind`包而不是从 JRE 获取 JAXB API。

# css - 将图像后面的文本推送到 div 顶部

> ID：16121378
> 
> 赞同：1
> 
> 时间：2013-04-20T14:24:32.057
> 
> 标签：css, html, positioning

我有一个 div 黑条，以及一个当前位于左侧的徽标图像，作为该 div 的第一个子元素。徽标图像的高度大于黑条的固定高度 42，因此它会突出（这是一种样式选择）

我想在黑条中包含一个菜单，所以我添加了一个 UL 菜单作为下一个子元素。但是，它位于 div 的底部，位于黑条区域之外，因为它与徽标对齐。

我想将菜单推到顶部，黑色区域上方

![包含图像和 ul 菜单的 div 栏](https://i.stack.imgur.com/dahCF.jpg)

我已经尝试了所有可能的浮动组合、显示：内联/内联块、边距顶部、填充顶部等，但无济于事。

有人有解决方案吗？

谢谢！！！

HTML

```
<div id="black-bar">
    <a href="..." class="logo"><img src="..."></img></a>

        <ul>
            <li><a href="programs.shtml">Programs & Projects</a></li>
        <li><a href="recipes.shtml">Recipes</a></li>
        </ul>
</div> 
```

CSS（这只是我尝试过的许多组合中的纬度）

```
 #black-bar {
    text-align: left;
    background: #373737;
    height: 43px;
    padding-left: 60px;
    width: 100%;
    line-height: 119px; 
}

#black-bar .logo {
    float: left;
    margin-left: 0px;
    }

/* header menu */

#black-bar ul{
    line-height: 119px;
    display: inline;
    vertical-align: top;
}

#black-bar ul li{
    display: inline;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T14:30:35.200

[JSfiddle](http://jsfiddle.net/Allendar/QsnqR/)

**CSS**

```
#black-bar {
    text-align: left;
    background: #373737;
    height: 43px;
    padding-left: 60px;
    width: 100%;
    line-height: 119px;
}
#black-bar .logo {
    float: left;
    margin-left: 0px;
}
/* header menu */
 #black-bar ul {
    display: inline;
}
#black-bar ul li {
    display: inline;
}

#black-bar ul li a {
    vertical-align: top;
    line-height: 40px;
    color: white;
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T15:12:59.940

您可以`line-height`从黑色标题中获取属性。然后，您可以根据需要显示`li`为`inline-block`并应用填充。

```
 #black-bar {
     text-align: left;
     background: #373737;
     height: 43px;
     padding-left: 60px;
     width: 100%;
     /*line-height: 119px;*/
 }
 #black-bar .logo {
     float: left;
     margin-left: 0px;
 }
 /* header menu */
 #black-bar ul  {
     display: inline;
 }
 #black-bar ul li  {
     display: inline-block;
     padding:10px 15px 0 0;
 } 
```

见小提琴：http: [//jsfiddle.net/Jywd3/](http://jsfiddle.net/Jywd3/)

# delphi - Delphi 和 Rad Studio 有什么区别？

> ID：16121379
> 
> 赞同：11
> 
> 时间：2013-04-20T14:24:32.447
> 
> 标签：delphi, c++builder

我找不到功能比较列表。我相信他们都可以创建本机非托管代码，对吧？Delphi 本身是否具有 RAD 功能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T14:27:31.563

是的。两者都`Delphi`包含`RAD Studio`and`IDE`本身`Delphi`，因此它们都创建相同的非托管本机代码。

RAD Studio 还包括其他产品线（例如，XE2 包括，`C++Builder`除了Delphi 本身）。该产品仅包括德尔福。不过，这两条产品线都为 Delphi 使用相同的 IDE（以及 C++Builder，在 RAD Studio 的情况下）。`HTML5 Builder``Delphi Prism``Delphi`

# python - 如何在 python 列表理解中删除代码重复？

> ID：16121380
> 
> 赞同：0
> 
> 时间：2013-04-20T14:24:35.683
> 
> 标签：python, list-comprehension, code-duplication

如何通过组合成一个列表理解来解决以下代码重复？

```
 myList   =[ //someList      ]      
 thierList=[ //someOtherList ]      

 if name:
          [x for x in range(2,100) if x%2 and x in mylist and x not in theirList]

 else:
          [x for x in range(2,100) if x in mylist and x not in theirList] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:29:09.913

```
[x for x in range(2,100) if x in mylist and x not in theirList if not name or x%2 ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:32:41.430

或者您可以使用集合[http://docs.python.org/2/library/sets.html](http://docs.python.org/2/library/sets.html)

```
set(myList + thierList) 
```

# c# - 用于实现数组的 .NET 语法

> ID：16121383
> 
> 赞同：-9
> 
> 时间：2013-04-20T14:24:41.267
> 
> 标签：c#, .net, interface, interface-implementation

实现接口数组的语法是什么？
iWord 是一个界面。

这是 List 的语法

```
public class Words : List<iWord>
{

} 
```

但这失败
了错误消息无效的基本类型
我收到错误是因为我要求一些愚蠢的东西吗？

```
public class Words : iWord[]
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:35:16.993

你不能这样做，但由于数组实现了`IEnumerable`，`IEnumerable<T>`也许它就足够了

```
class Words : IEnumerable<iWord> 
```

或者你可以坚持你最初的想法，毕竟`List`有一个索引器：

```
class Words : List<iWord>
// use indexer to get first element
var myWords = new Words();
var first = myWords[0]; 
```

# sql-server - 导入用逗号空格限定符分隔的逗号

> ID：16121386
> 
> 赞同：0
> 
> 时间：2013-04-20T14:24:49.313
> 
> 标签：sql-server, csv, import, delimiter, qualifiers

如何导入具有以下示例记录的逗号分隔文本文件：abc、def 和 ghi、jkl

这样我得到的输出为 column1: abc, def and ghi column2: jkl

没有围绕（abc、def和ghi）的文本限定符，如果在sql server import中将逗号和空格（,）指定为文本限定符，则不会产生上述结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:13:56.827

您可以尝试批量插入[MSDN：批量插入](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

```
 USE tempdb;
    GO

    IF OBJECT_ID('tempdb..#test') IS NOT NULL DROP TABLE #test;
    CREATE TABLE #test
    (
     col1 VARCHAR(50)
    ,col2 VARCHAR(50)
    )

    BULK INSERT #test
    From 'C:\Users\Brian\Desktop\test.csv'
    WITH
    (
     FIRSTROW = 2
    ,FIELDTERMINATOR = '|'
    ,ROWTERMINATOR = '\n'
    )

    Select  * 
    From    #test
    IF OBJECT_ID('tempdb..#test') IS NOT NULL DROP TABLE #test; 
```

下面是我的 csv 文件的布局。是否可以使用管道分隔符或其他类型的分隔符，例如 ™...我最喜欢的 ;)

col1|col2

abc、def 和 ghi| jkl

以及导入的结果。

```
 col1                 col2
               abc, def and ghi     jkl 
```

# python - Python字典中的解析和排序键

> ID：16121387
> 
> 赞同：2
> 
> 时间：2013-04-20T14:24:50.067
> 
> 标签：python, dictionary, xml-parsing, beautifulsoup

我创建了以下字典：

```
code dictionary =  {u'News; comment; negative': u'contradictory about news', u'News; comment': u'something about news'} 
```

我现在想编写一些 Python 代码，通过字典的键并分离出代码及其对应的值。所以对于字典中的第一个元素，我想结束：

```
News: 'contradictory about news', 'something about news'
comment: 'contradictory about news', 'something about news'
negative: 'contradictory about news' 
```

最终结果可以是字典、列表、制表符或逗号分隔的文本。

你可以在这里看到我这样做的尝试：

```
from bs4 import BeautifulSoup as Soup
f = open('transcript.xml','r')
soup = Soup(f)
#print soup.prettify()

#searches text for all w:commentrangestart tags and makes a dictionary that matches ids with text
textdict = {}
for i in soup.find_all('w:commentrangestart'):
        # variable 'key' is assigned to the tag id
        key = i.parent.contents[1].attrs['w:id']
        key = str(key)
        #variable 'value' is assigned to the tag's text
        value= ''.join(i.nextSibling.findAll(text=True))
        # key / value pairs are added to the dictionary 'textdict'
        textdict[key]=value
print "Transcript Text = " , textdict

# makes a dictionary that matches ids with codes        
codedict = {}
for i in soup.find_all('w:comment'):
        key = i.attrs['w:id']
        key = str(key)
        value= ''.join(i.findAll(text=True))
        codedict[key]=value
print "Codes = ", codedict

# makes a dictionary that matches all codes with text
output = {}
for key in set(textdict.keys()).union(codedict.keys()):
        print "key= ", key
        txt = textdict[key]
        print "txt = ", txt
        ct = codedict[key]
        print "ct= ", ct
        output[ct] = txt
        #print "output = ", output
print "All code dictionary = ", output

#codelist={}
#for key in output:
#   codelist =key.split(";")
#print "codelist= " , codelist

code_negative = {}
code_news = {}
print output.keys()
for i in output:
    if 'negative' in output.keys():
        print 'yay'
        code_negative[i]=textdict[i]
        print 'text coded negative: ' , code_negative
    if 'News' in i:
        code_news[i]=textdict[i]
        print 'text coded News: ' ,code_news 
```

但由于某种原因，当我运行最后一个函数时，我不断收到一个关键错误：

```
code_negative = {}
code_news = {}
for i in output:
    if 'negative' in output.keys():
        code_negative[i]=textdict[i]
    print 'text coded negative: ' , code_negative
if 'News' in i:
    code_news[i]=textdict[i]
    print 'text coded News: ' ,code_news 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:38:19.397

如果我正确理解了问题，以下代码应该可以工作：

```
from collections import defaultdict

out = defaultdict(list)
for k, v in code_dictionary.viewitems():
    for item in k.split('; '):
        out[item].append(v) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T14:46:34.813

```
output = {u'News; comment; negative': u'contradictory about news', u'News; comment': u'something about news'}
negatives = []
comments = []
news = []
for k, v in output.items():
    key_parts = k.split('; ')
    key_parts = [part.lower() for part in key_parts]
    if 'negative' in key_parts:
        negatives.append(v)
    if 'news' in key_parts:
        news.append(v)
    if 'comment' in key_parts:
        comments.append(v) 
```

# java - 如何将字符串放入矩阵？

> ID：16121388
> 
> 赞同：0
> 
> 时间：2013-04-20T14:24:50.940
> 
> 标签：java, arrays, string, matrix, words

我遇到了麻烦，也许你可以帮助我：我有 3 个字符串，例如：word1、word2、word3，我必须用它们构建一个矩阵，如下所示：在第一行：word1("ABC"),第二行：word2("DEF") 第三行：word3("GHI")。

```
A|B|C
D|E|F
G|H|I 
```

我需要这个，因为在那之后我必须检查形成的单词（“ADG”，“BEH”，“CFI”）是否在一个单词数组中。而且我不知道如何将这些字符串放入矩阵中以便我可以检查。任何帮助都是有用的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:56:55.650

基于此评论：

> 单词的大小相同，因为矩阵实际上就像一个拼图。我从一个数组中随机选择 3 个单词，将它们放在一个矩阵中，然后检查结果是否来自同一个数组。

我会假设一些事情来完成这项工作（因为我们没有足够的信息）：

1.  您有一个`String`s 数组，其中包含所有单词

    ```
    private String[] words; 
    ```

2.  您有一种方法可以`String`从该数组中随机选取 3 秒。

    ```
    private String s1, s2, s3;

    public void pickThreeRandomWords() {
        s1 = aRandomWord(words);
        s2 = aRandomWord(words);
        s3 = aRandomWord(words);
        //or maybe another fancy algorithm to get this...
    } 
    ```

`char`所以你需要一个基于这 3 个s的数组`String`。此代码可以为您完成工作：

```
public char[][] createMatrixFromStrings(String s1, String s2, String s3) {
    char[][] theMatrix = new char[3][]; //yes, hardcoded
    theMatrix[0] = s1.toCharArray();
    theMatrix[1] = s2.toCharArray();
    theMatrix[2] = s3.toCharArray();
    return theMatrix;
} 
```

当然，如果你想让这个方法支持超过 3 个`String`s，你可以让这个方法接收随机数量的`String`s：

```
public char[][] createMatrixFromStrings(String ... strings) {
    if (strings == null || strings.length == 0) return null;
    char[][] theMatrix = new char[strings.length][];
    int i = 0;
    for(String s : strings) {
        theMatrix[i++] = s.toCharArray();
    }
    return theMatrix;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:43:26.880

Java没有**矩阵**。它有`array of array`

所以，你可以试试这个

```
List<char[]> lst=new ArrayList();//stores a list of char[]
lst.add(("ADC".toCharArray()));//adds array of characters i.e 'A','D','C'
lst.add(("DEF".toCharArray()));
lst.get(0)[0];//A
lst.get(1)[0];//D 
```

现在您可以垂直迭代

```
for(int i=0;i<lst.size();i++)temp+=lst.get(i)[0]; 
```

temp 将具有`AD`您现在可以使用`equals`方法进行交叉检查的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:30:16.983

您可以在没有矩阵的情况下构建结果词：

```
List<String> verticalWords = new ArrayList<String>();
for (int i = 0; i < horizontalLen; i++){
    String currentWord = "";
    for (int j = 0; j < wordCount; j++)
        currentWord += words.get(j).get(i);

    verticalWords.add(currentWord);
} 
```

PS 对于`currentWord`你可以使用 a`StringBuilder`来提高效率，但我怀疑这里非常需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:16:05.790

我认为这将解决您的问题。

包装印刷；

公共类矩阵{

```
public static void main(String[] args) {

    //Length can define as you wish

    String[] max = new String[10];

    String[] out = null;
    //Your Inputs

    max[0]="ADG";

    max[1]="BEH";

    max[2]="CFI";

    //following for loop iterate your inputs
    for (int i = 0; i < max.length; i++) {

        if(out==null){out= new String[max.length];}

        String string = max[i];

        if(string==null){ break;}

        //Here breaking input(words) one by one into letters for later contcatnating.
        String[] row = string.split("");

        for (int j = 0; j < row.length; j++) {

            String string1 = row[j];
          //  System.out.println(string1);

            //create the values for rows
           if(out[j]!=null){ out[j]=out[j]+string1;}

           else{

           out[j]=string1;
           }
        }
     }
    //following for loop will out put your matrix.
    for (int i = 0; i < out.length; i++) {
        String string = out[i];
        if(out[i]==null){break;}
        System.out.println(out[i]);

    }
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T14:53:12.910

这个目标的主要推动力是你正在获取一维值，并将其转换为二维值。有很多方法可以做到这一点，但以下是我想到的两种：

*   设置一个嵌套的while循环来迭代第一个维度，当它达到长度时，重置并导致外部循环增加，就像一个时钟

*   您可以使用创建一个新的子[`ArrayUtils.toSubArray()`](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#subarray%28char%5B%5D,%20int,%20int%29)数组，并通过一些技巧，让它工作：

    *   每次根据您要查找的维度切片创建一个新的数组行。我将把这个作为练习留给读者。但这里有一个提示：

        ```
        for(int i = 0; i < theDimension; i++, j += 3) {
            ret[i] = ArrayUtils.subarray(word, i*theDimension, j);
        } 
        ```

最后，我假设您可以接收的输入类型受到限制。矩阵必须是正方形的，所以我在构建数组之前强制执行该限制。

我**强烈鼓励**你戳戳这个答案，而不是盲目地将它复制到你的作业中。了解它在做什么，以便在将来再次被要求时重现它。

```
public char[][] toMatrix(int theDimension, String theEntireWord) {
    if(theEntireWord.length() != theDimension * theDimension) {
        throw new IllegalArgumentException("impossible to add string to matrix of uneven dimension");
    }
    char[][] ret = new char[theDimension][theDimension];
    int i = 0;
    int j = 0;
    while(i < theDimension) {
        if(j == theDimension) {
            j = 0;
            ++i;
        } else {
            ret[i][j] = theEntireWord.charAt((i * theDimension) + j);
            j++;
        }
    }
    return ret;
} 
```

# python - 如何将csv文件读入具有多行索引级别的pandas DataFrame？

> ID：16121392
> 
> 赞同：2
> 
> 时间：2013-04-20T14:25:21.523
> 
> 标签：python, pandas

原始的csv文件数据是这样的：

```
06/04/2011,104.64,105.17
07/04/2011,104.98,105.51
08/04/2011,105.43,105.96
11/04/2011,104.47,104.99 
```

如何将 csv 文件读入 DataFrame 并添加多行索引级别，或将多行索引添加到 csv 并导入 DataFrame，如下所示：

```
 JAS
      date      bid    ask
06/04/2011   104.64 105.17
07/04/2011   104.98 105.51
08/04/2011   105.43 105.96
11/04/2011   104.47 104.99 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T15:19:29.890

读取 CSV，将第一 (0) 列设置为索引。

```
In [8]: df = pd.read_csv(StringIO("""06/04/2011,104.64,105.17
07/04/2011,104.98,105.51
08/04/2011,105.43,105.96
11/04/2011,104.47,104.99"""), index_col=0, header=None) 
```

创建一个新的 MultiIndex，并将其分配给列。

```
In [11]: df.columns = pd.MultiIndex.from_tuples([('JAS', 'bid'), ('JAS', 'ask')]) 
```

最后，为索引命名，我们就会得到您想要的结果。

```
In [12]: df.index.name = 'date'

In [13]: df
Out[13]: 
               JAS        
               bid     ask
date                      
06/04/2011  104.64  105.17
07/04/2011  104.98  105.51
08/04/2011  105.43  105.96
11/04/2011  104.47  104.99 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-03T17:05:10.043

简短的回答：

```
df = pd.read_csv('file.csv', parse_dates=True, index_col=0, header=None).rename_axis(
index='date').rename(columns={1: 'bid', 2: 'ask'}).reindex(
columns=pd.MultiIndex.from_product([['JAS'], ['bid', 'ask']]), level=1)

Out[1]: 
           JAS        
           bid     ask
date                      
2011-06-04  104.64  105.17
2011-07-04  104.98  105.51
2011-08-04  105.43  105.96
2011-11-04  104.47  104.99 
```

# c# - 如何对标签进行数据绑定

> ID：16121395
> 
> 赞同：0
> 
> 时间：2013-04-20T14:25:53.973
> 
> 标签：c#, .net, wpf, data-binding

如何将标签的内容绑定到 class2 属性`PropName`？
Class2 没有直接用于`Mainwindlow.xmal.cs`.

`Class1`正在用于`Mainwindow.xmal.cs`
并且`Class2`正在用于`Class1`。
这是我正在使用的代码：

```
class Class2:INotifyPropertyChanged
{
    string _PropName;
    public string PropName
    {
        get
        {
            return this._PropName;
        }
        set
        {
            this._PropName = value;
            OnPropertyChanged("PropName");
        }
    }
    private void OnPropertyChanged(string p)
    {
        if (PropertyChanged != null)
            PropertyChanged.Invoke(this, new PropertyChangedEventArgs(p));
    }
    public event PropertyChangedEventHandler PropertyChanged;
}
public partial class MainWindow : Window,INotifyPropertyChanged
{
    Class1 class1ob;
    public MainWindow()
    {            
        InitializeComponent();
        class1ob = new Class1();          
    }
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        class1ob.changeProp();            
    }
} 
```

我想将标签的内容绑定到`Class2`属性 - `PropName`。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:52:16.337

尝试这个。XAML

```
....
<Label Name="label" Content="{Binding Path=PropName}"/>
.... 
```

在你的`WindowLoad`集合`DataContext`上`Label`。

```
label.DataContext = class1ob.class2ob;//instance of class 
```

# python - 按第一列合并后将数据框的列合并到列表中

> ID：16121425
> 
> 赞同：0
> 
> 时间：2013-04-20T14:29:05.913
> 
> 标签：python, group-by, pandas

我有一个数据框：

```
df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
   'foo', 'bar', 'foo', 'foo'],
   'B' : ['one', 'one', 'two', 'three',
   'two', 'two', 'one', 'three'],
   'C' : np.random.randn(8), 'D' : np.random.randn(8)}) 
```

创建：

```
 A      B         C         D
0  foo    one -0.151044  2.235048
1  bar    one -0.732017  0.415994
2  foo    two -1.203263 -1.178483
3  bar  three  0.329306  0.356476
4  foo    two  0.512176 -2.640831
5  bar    two -0.997254  0.504314
6  foo    one  0.434732  0.751182
7  foo  three -0.558386 -1.563932 
```

可以按 A 或 B 分组，将 C 和 D 的值作为新数据框中的列表给出吗？group_concat 在 mysql 中的工作方式。

```
grouped = df.groupby('A').apply(WhatFunctionCanIUse) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:29:16.697

DataFrame 中的列表通常不方便使用。可能有一种更自然的方式来做你最终想要做的任何事情。如果您详细说明，也许有人会提出更惯用的解决方案。

但是，要回答您的问题，您可以申请`list`.

```
In [26]: df.groupby('A').C.apply(list)
Out[26]: 
A
bar                     [-0.732017, 0.329306, -0.997254]
foo    [-0.151044, -1.203263, 0.512176, 0.434732, -0....
dtype: object 
```

# java - Pellet 2.3.0 与 OWL API 3.4.3 不兼容？

> ID：16121435
> 
> 赞同：0
> 
> 时间：2013-04-20T14:30:22.487
> 
> 标签：java, compatibility, pellet

我想构建一个 Java 应用程序，它将使用 Pellet 查询来查询本体，但我是这个领域的新手，并且遇到了一些兼容性问题。

本体是使用 Protege 4 OWL Editor 构建的。

我已经从[这里](http://sourceforge.net/projects/owlapi/files/)下载了 owlapi-distribution-3.4.3-bin.jar 文件并将其添加到我的 netbeans 项目中。此外，我从[这里](http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/coode/owlapi/examples/)找到了 DLExamples.java，它对您入门非常有用。

对于颗粒推理机，我从[这里](http://clarkparsia.com/pellet/download/)下载了颗粒 2.3.0.zip并在我的 netbeans 项目中添加了颗粒 2.3.0/lib 中的所有文件和文件夹（请注意，我不确定这是否正确在 netbeans 中添加颗粒的方法，但我找不到更好的方法，例如只添加一个 jar 文件）。

我从[这里](http://clarkparsia.com/pellet/faq/owl-api/)发现，为了将颗粒推理器嵌入到 DLExamples.java，我需要将其第 151 和 152 行替换为“返回新的推理器（管理器）”，其中推理器位于`org.mindswap.pellet.owlapi.Reasoner`颗粒库中。当我应用该更改时，netbeans 抱怨说：

```
no suitable constructor found for Reasoner(org.semanticweb.owlapi.model.OWLOntologyManager)
  constructor Reasoner.Reasoner(org.semanticweb.owl.model.OWLOntologyManager,KnowledgeBase) is not applicable
   (actual and formal argument lists differ in length)
  constructor Reasoner.Reasoner(org.semanticweb.owl.model.OWLOntologyManager) is not applicable
   (actual argument org.semanticweb.owlapi.model.OWLOntologyManager cannot be converted to org.semanticweb.owl.model.OWLOntologyManager by method invocation conversion) 
```

我往里面看了看`org.mindswap.pellet.owlapi.Reasoner`，发现它的构造函数定义确实是

```
public Reasoner(org.semanticweb.owl.model.OWLOntologyManager manager) {
} 
```

换句话说，不是将 an 作为参数，`org.semanticweb.owlapi.model.OWLOntologyManager`而是采用 an （注意和包`org.semanticweb.owl.model.OWLOntologyManager`之间的区别）。`owlapi``owl`

除非我没有做错什么，否则owlapi和pellet之间显然不兼容。这是不正常的，因为颗粒应该为 owlapi 提供推理，对吗？

关于如何解决这个问题有什么建议吗？我应该切换到不同的推理器吗？我也尝试过 HermiT，但是当我询问应该返回类及其个人的 DL 查询时，它只返回了类。所以我认为 HermiT 可能没有那么强大，所以我决定尝试 Pellet，但没有成功。

有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:19:57.880

正如[这里](https://web.archive.org/web/20130903205155/http://answers.semanticweb.com/questions/22294/incompatibility-of-pellet-230-with-owl-api-343)提到的，答案是你不能随意混合和匹配你使用的库，你必须使用 Pellet 附带的版本。如果你这样做，你将不会有没有合适的构造函数异常。

# assembly - 汇编语言 8086 使用 32 位 reg 添加并在 64 位中赋值？

> ID：16121436
> 
> 赞同：1
> 
> 时间：2013-04-20T14:30:25.717
> 
> 标签：assembly, x86, masm, irvine32

我想通过使用 32 位寄存器**将**value1 添加到 value2 并给出 64 位以下的值（等于 16 位）。是否可以使用 2 个寄存器的空间（32+32 = 64bit）？我认为可以通过使用**PTR** **OPERATOR**来完成，但我不知道如何使用 PTR 指令。

我已经制作了添加程序。它在控制台中接受两个值并给我们结果。它只能取**32 位（8 位）**以下的值。如果我们给出更高的值，那么它将在控制台中给出整数溢出错误。

我在汇编语言中使用 KIP.R.IRVINE 链接库

我们如何使用 32 位寄存器给出 64 位的值？我们如何使 32 位寄存器取 64 位值？

这是32位加法的代码

```
INCLUDE Irvine32.inc

.data

Addition BYTE "A: Add two Integer Numbers", 0

inputValue1st BYTE "Input the 1st integer = ",0
inputValue2nd BYTE "Input the 2nd integer = ",0

 outputSumMsg BYTE "The sum of the two integers is = ",0

 num1 DD ?
 num2 DD ?
 sum  DD ?

 .code

 main PROC

;----Displays addition Text-----

mov edx, OFFSET Addition
call WriteString
call Crlf
;-------------------------------

; calling procedures here

call InputValues
call addValue
call outputValue

call Crlf

jmp exitLabel

main ENDP

; the PROCEDURES which i have made is here

InputValues PROC
;----------- For 1st Value--------

call Crlf
mov edx,OFFSET inputValue1st ; input text1
call WriteString

; here it is taking 1st value
call ReadInt    ; read integer
mov num1, eax   ; store the value

;-----------For 2nd Value----------

mov edx,OFFSET inputValue2nd ; input text2
call WriteString

; here it is taking 2nd value
call ReadInt    ; read integer
mov num2, eax   ; store the value

ret
InputValues ENDP

;---------Adding Sum----------------

addValue PROC
; compute the sum

mov eax, num2  ; moves num2 to eax
add eax, num1  ; adds num2 to num1
mov sum, eax   ; the val is stored in eax

ret
addValue ENDP

;--------For Sum Output Result----------

outputValue PROC

; output result

mov edx, OFFSET outputSumMsg ; Output text
call WriteString

mov eax, sum
call WriteInt ; prints the value in eax

ret
outputValue ENDP

exitLabel:
exit

END main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T18:01:50.283

您可以简单地使用`CF`(carry flag) 来确定添加两个整数时是否存在溢出。两个宽整数的加法进`n-bit`位永远不能大于一位，但请注意，只有在谈论无符号加法时才能这样做。64 位结果的有符号加法需要两个 64 位整数。

这是导致一位进位的无符号 32 位加法示例。

```
mov eax, (1<<31)|1 ;set Most-Significant Bit (MSB) to 1, what will surely cause overflow
mov ebx, (1<<31)|1
add eax, ebx
jc .go             ;we need another bytes for our carry 
```

签名版：

```
;let eax and ebx be the numbers we want to add
cdq   ;expand 4-byte integer to 8-byte integer <-- this won't affect real value of EAX
xchg eax, ebx  ;cdq has fixed operands, change eax with ebx
xchg edx, ecx  ;... and edx with ecx
cdq   ;do the same for number that was in EBX

add eax, ebx
adc edx, ecx   ;that 'c' on the end is important, it will add 
               ;the carry flag to the result so possible overflow will be handled
;Result is now in EDX:EAX 
```

# sql - 必须能够同时包含 FOREIGN KEY 和特殊值的链接表列

> ID：16121437
> 
> 赞同：1
> 
> 时间：2013-04-20T14:30:26.863
> 
> 标签：sql, database, database-design, relational-database, database-schema

我需要在数据库中表示以下信息（简化）：

1.  一套“账单”。（在表中`Bills`）
2.  一组“代表”。（在表中`MPs`）
3.  每个法案的作者。
    *   如果只有“代表”可以是作者，这将是一个简单的链接表，其中包含`Bills`和的外键`MPs`。
    *   有一个（只有一个）其他“实体”也可以是法案的作者，因此：
        *   我可以重新定义`NULL`为“实体”，但这很难看。
        *   我可以简单地忘记 FOREIGN KEY 约束，但这更难看。

根据数据库理论，表示此信息的**正确方法是什么？**

`linktable_authors`有一个表格链接`Bills`和“代表”创作的“票据”是否合适`MPs`，而另一张表格`authored_by_The_Entity`仅用于“实体”创作的“票据”（如果我确定以后不会出现其他实体） )?

额外的问题：如果还有一个表“Other_Entities”并且“Other_Entities”和“Representatives”都可以是“Bills”的作者怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:36:57.817

使用 PK **AuthorID**定义实体**Authors**。将子实体**代表**和**其他**实体的 PK 设置为**AuthorID**，以创建类型关系。**为Authors**添加属性**AuthorType**以区分子类型与冲突。将作者共有的所有属性放在**Authors**实体中。

 ******顺便说一句：NULL 从不表示“其他已知值”。在其他一些选择中，它可以明智地表示“不适用”或“尚不知道”，但给它“一些其他已知值”的语义肯定是设计不佳的标志。******

# php - 在 Android 应用程序中集成来自 Joomla 的 PHP 插件

> ID：16121443
> 
> 赞同：0
> 
> 时间：2013-04-20T14:30:50.363
> 
> 标签：php, android, plugins, joomla

我有一个使用**Joomla 运行的网站！**，我正在使用**PhocaGallery**，这是一个用于管理照片库的组件。在我的文章中，我只是简单地打了一个**标签**，例如：

```
{phocagallery view=category|categoryid=2|limitcount=2} 
```

此标签仅显示类别中的 2 张图像，其中 2 为 ID。

我正在为这个网站开发自己的应用程序，当我在上面加载文章时，我只是**显示了标签**，**没有图像**，这很正常。

我有这个插件的长 PHP 代码。

我想知道如何：

**1.在应用中加载文章时检测标签 2.在应用中调用PHP脚本浏览好图片 3.显示图片**

我认为的问题是PHP代码可能会调用网站上的文件夹，而我认为应用程序不能...

你认为有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:35:53.243

1.  检测标签：使用正则表达式解析你需要的参数
2.  插入插件非常简单，只要确保您提供所有必要的资源，即您很可能想要加载整个 joomla 框架。由于您只是查询单个表，因此最好使用 mysql 自己进行，这将为您节省大量开发时间和运行时间
3.  只是输出

# jquery - 包含脚本的 jQuery load() div

> ID：16121447
> 
> 赞同：0
> 
> 时间：2013-04-20T14:30:58.107
> 
> 标签：jquery, load, getscript

我正在尝试使用 load() 将包含 javascript 链接的 div 加载到另一个页面 ( [http://www.thebigkerbang.com/brand-storytellers/clients/xour-clients.html](http://www.thebigkerbang.com/brand-storytellers/clients/xour-clients.html) ) 上的另一个 div 中。我知道 load() 去掉了脚本标签，但我对 $.getscript 有点困惑。我可以很好地加载 div，因为我可以在代码检查器中看到它。

**从此页面加载 div：**

```
 <div id="beautific_hype_container" style="position:relative;overflow:hidden;width:700px;height:500px;"> 
    <script type="text/javascript" charset="utf-8" src="beautific.hyperesources/beautific_hype_generated_script.js?10913"></script> 
  </div> 
```

**从此页面进入 div：**

```
<div class = "edgeContent"></div> 
```

**和：**

```
 $('document').ready(function(){
  $(".beautific").click(function(){
    $(".edgeContent").load('beautific/beautific.html #beautific_hype_container', function() {   
    $.getScript('beautific/beautific.hyperesources/beautific_hype_generated_script.js?10913');
        });
      });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:48:33.313

我会通过一个`$.ajax()`电话来做到这一点：

```
$('document').ready(function(){
  $(".beautific").click(function(){
    $.ajax({
      url: "beautific/beautific.html #beautific_hype_container",
    }).done(function ( data ) {
      $(".edgeContent").html(data);
    });
  });
}); 
```

这样你的脚本标签也不会被过滤掉。

# c#-4.0 - 如何使用代码优先迁移 C# 为数据库设置默认值

> ID：16121449
> 
> 赞同：0
> 
> 时间：2013-04-20T14:31:02.327
> 
> 标签：c#-4.0, asp.net-mvc-4, ef-code-first, entity-framework-migrations

我的问题真的很简单......在使用该工具从头开始生成新数据库时，是否有可能通过代码优先迁移和 C# 放置默认值，如国家或标签或州？如果是的话，你能解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:57:35.783

您也可以在 Seed 方法中使用原始 sql 来执行此操作。AddOrUpdate 不适用于我的场景，所以我最终这样做了：

```
public class Configuration : DbMigrationsConfiguration<MyContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
        SetSqlGenerator(OracleConnectionInfo.InvariantName, new OracleEntityMigrationSqlGenerator());
    }

    protected override void Seed(MyContext context)
    {
        Logger.Write("In Seed method. User: " + userName);
        MyInitializer.AddUpdateDataSql(context);
    }
}

public class MyInitializer : MigrateDatabaseToLatestVersion<MyContext, Configuration>
{
    private const string Schemaname = "MYSCHEMA";

    public static void AddUpdateDataSql(Pronova2Context context)
    {
        DeleteTableData(context);
        DropCreateSequences(context);
        PopulateTypeTypeData(context);
        // etc.
    }

    private static void DeleteTableData(DbContext context)
    {
        context.Database.ExecuteSqlCommand(@"delete " + Schemaname + ".T_TABLE1"); }
        context.Database.ExecuteSqlCommand(@"delete " + Schemaname + ". T_TABLE2"); }
        // etc.
    }

    private static void DropCreateSequences(DbContext context)
    {
        context.Database.ExecuteSqlCommand(@"DROP SEQUENCE  " + Schemaname + ".T_TABLE1_SEQ"); }
        context.Database.ExecuteSqlCommand(@"DROP SEQUENCE  " + Schemaname + ".T_TABLE2_SEQ"); }
        // etc.
    }

    private static void PopulateTypeTypeData(DbContext context)
    {
        try { context.Database.ExecuteSqlCommand(@"Insert into " + Schemaname + ".T_TYPE_TYPE (TYPE_TYPE_ID,NAME,DESCRIPTION) values (1,'TypeType1','Name 1')");
        try { context.Database.ExecuteSqlCommand(@"Insert into " + Schemaname + ".T_TYPE_TYPE (TYPE_TYPE_ID,NAME,DESCRIPTION) values (2,'TypeType1','Name 2')");
        // etc.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:35:54.867

是的，您可以在迁移中运行原始 SQL 来插入数据：

```
public partial class InitialCreate : DbMigration
{
    public override void Up()
    {
        this.Sql("INSERT ...");
    }
    ...
} 
```

或者，您可以在上次迁移运行后访问您的上下文，并且可以在其中插入数据：

```
public sealed class MyConfiguration : DbMigrationsConfiguration<MyContext>
{
   public MyConfiguration()
   {
       this.AutomaticMigrationsEnabled = false;
   }

   protected override void Seed(MyContext context)
   {
       context.Users.AddOrUpdate(u => u.Id, this.GetMyUsers());
       ...
   }
} 
```

# mysql - 休眠保存自我参考父/子

> ID：16121456
> 
> 赞同：0
> 
> 时间：2013-04-20T14:31:54.647
> 
> 标签：mysql, spring, hibernate

我正在使用 Spring 3.2、Hibernate 4 和 MySQL。我有一个名为 Lecturers 的自引用类，它具有实现父/子一对多关系的注释。我在实现控制器和表单以从同一个表中保存父母和孩子时遇到问题。这是一个自引用类。

我的数据库：

```
CREATE TABLE `lecturers` (
`lecturer_id` BIGINT(10) NOT NULL AUTO_INCREMENT,
`name` VARCHAR(255) NULL DEFAULT NULL,
`email` VARCHAR(255) NULL DEFAULT NULL,
`checker_id` BIGINT(20) NULL DEFAULT NULL,
PRIMARY KEY (`lecturer_id`),
FOREIGN KEY (`checker_id`) REFERENCES `lecturers` (`lecturer_id`) 
```

Java 类

```
@ManyToOne
@JoinColumn(name="checker_id")
private Lecturer checker;

@OneToMany(cascade = CascadeType.ALL, mappedBy="checker", orphanRemoval=true)
private List<Lecturer> lecturers = new ArrayList<Lecturer>(); 
```

而且类也有这个方法

```
@Transient
public void addLecturer(Lecturer lecturer) {
    if(lecturers == null) {
        lecturers = new ArrayList<Lecturer>();
        //lecturers = new HashSet<Lecturer>();
    }
    lecturer.setChecker(this);
    lecturer.setLecturers(lecturers);
    //lecturer.setLecturers(lecturers);

    lecturers.add(lecturer);
    // TODO Auto-generated method stub

} 
```

然后我设置了一个 DAO 和服务层来实现 CRUD 操作。创建方法是这样的：

```
 Session session = sessionFactory.getCurrentSession();

    transaction = session.beginTransaction();

// Create new lecturers
    Lecturer lecturer1 = new Lecturer();
    lecturer1.setName(name);
    lecturer1.setEmail(email);

    Lecturer lecturer2 = new Lecturer();
    lecturer2.setName(name);
    lecturer2.setEmail(email);

       // Create new checker
    Lecturer checker = new Lecturer();
    checker.setName(name);
    checker.setEmail(email);
    checker.setChecker(checker);

    List<Lecturer> lecturers = new ArrayList<Lecturer>();
    lecturers.add(lecturer1);
    lecturers.add(lecturer2);
    lecturer1.setChecker(checker);
    lecturer2.setChecker(checker);

    checker.addLecturer(lecturer1);
    checker.addLecturer(lecturer2);

    checker.setLecturers(lecturers);

  session.save(checker);

    session.save(lecturer1);
    session.save(lecturer2); 
```

我现在的要求是提供一个表格，用于将父母（检查者）与一个或多个孩子（讲师）匹配并将匹配保存到数据库中。我在问我应该如何挽救这段关系。我应该分别创建父级和子级，然后将使用 id 的父级与从下拉列表中选择的子级匹配吗？我不确定如何确保检查员与其各自讲师之间的关系得到保存。

然后我创建了一个主类来测试关系并查看它是否有效。将数据插入数据库是可行的，但是当我想列出它时，我得到了：

```
Name: Mark
Email: ma@msn.com
Checker: com.professional.project.domain.Lecturer@439942
ID: 22 
```

我应该取回我已经添加但它没有回来的检查器的名称。

对于如何进行，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:46:42.243

首先，您的 addLecturer() 方法有一个错误。它不应该将孩子的讲师列表设置为当前讲师的列表：

```
public void addLecturer(Lecturer lecturer) {
    if (lecturers == null) {
        lecturers = new ArrayList<Lecturer>(); // OK : lazy initialization
    }
    lecturer.setChecker(this); // OK : set the parent of the child to this
    lecturer.setLecturers(lecturers); // this line should be removed : the child's children shouldn't be the same as this lecturer's children

    lecturers.add(lecturer); // OK : ad the child to the list of children
} 
```

当您获得讲师时，您将获得以下内容作为检查员：

```
Checker: com.professional.project.domain.Lecturer@439942 
```

以上只是`toString()`检查器上调用默认方法的结果。要获得它的名字，请调用`getName()`检查器。如果您希望 toString() 方法返回名称，则以这种方式实现它：

```
@Override
public String toString() {
    return name;
} 
```

# php - 在一个学说本机 insert() 命令中插入多个关联数组

> ID：16121458
> 
> 赞同：2
> 
> 时间：2013-04-20T14:32:05.167
> 
> 标签：php, mysql, doctrine-orm

有什么办法，我可以在数据库表中插入多个关联数组，并支持学说的本机 sql 查询执行？目前，我可以看到只插入一个单行/关联数组。代码：

```
$connection = $em->getConnection();
$connection->insert('un_table_name', $associative_data_array); 
```

我的目标是在单个语句中插入多行，以便将它们插入单个事务中。

澄清一下，我正在执行一项迁移任务，其中数据将被处理并从旧模式转移到新模式。但由于实体仅在新的模式结构中，我可以将两个数据库与 ORM 样式连接起来。这就是我遵循本机查询支持的原因。由于批量数据将被传输，我认为单个事务中的多个插入将使过程更快。

任何建议/解决方案表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:18:19.083

您可以使用 Connection#transactional($func)：

```
$connection = $em->getConnection();
$connection->transactional (function ($connection) {
    $connection->insert('un_table_name', $associative_data_array1);
    $connection->insert('un_table_name', $associative_data_array2);
    ...
    $connection->insert('un_table_name', $associative_data_arrayN);
}); 
```

# actionscript-3 - Actionscript - 如何按值传递对象？

> ID：16121461
> 
> 赞同：1
> 
> 时间：2013-04-20T14:32:20.503
> 
> 标签：actionscript-3, actionscript

我想通过值将对象传递给函数，以便我可以对该对象进行修改。我不希望更新原始对象。但是，所有函数参数都是通过引用传递的。

我试图复制一个对象 ( `var new_object:Object = original_object;`) 这只是创建一个指向`original_object`.

有没有办法可以按值传递参数？

**更新我看到的一种解决方法是使用**[此处描述](http://www.kirupa.com/forum/showthread.php?223798-ActionScript-3-Tip-of-the-Day&p=1897368#post1897368)`ByteArray`的方法对对象进行深层复制。不确定它的效率如何。也许那里有更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T14:37:43.167

在将对象传递给函数之前，您必须对其进行复制：

```
public function copy(value:Object):Object
{
    var buffer:ByteArray = new ByteArray();
    buffer.writeObject(value);
    buffer.position = 0;
    var result:Object = buffer.readObject();
    return result;
}

public function testFunction(obj:Object):void
{  
   //do something with obj
}

public function test():void
{
  var obj:Object = {};
  testFunction(copy(obj));
} 
```

# r - 使用 RCurl/httr 进行 Github 基本授权

> ID：16121463
> 
> 赞同：10
> 
> 时间：2013-04-20T14:32:51.840
> 
> 标签：r, rcurl, httr

[我正在尝试使用此处](https://help.github.com/articles/creating-an-oauth-token-for-command-line-use)的说明从命令行创建 OAuth 令牌。我可以`curl`从命令行使用，并得到正确的响应

```
curl -u 'username:pwd' -d '{"scopes":["user", "gist"]}' \
  https://api.github.com/authorizations 
```

现在，我想在 R 中使用`RCurl`or复制相同的内容`httr`。这是我尝试过的，但两个命令都返回错误。谁能指出我在这里做错了什么？

```
httr::POST(
  'https://api.github.com/authorizations',
  authenticate('username', 'pwd'),
  body = list(scopes = list("user", "gist"))
)

RCurl::postForm(
  uri = 'https://api.github.com/authorizations',
  .opts = list(
    postFields = '{"scopes": ["user", "gist"]}',
    userpwd = 'username:pwd'
  )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T07:14:08.287

这个问题由来已久，但可能对某些人仍然有帮助：问题应该是 opts 参数以错误的方式传递（缺少 curlOptions 函数调用）。以下内容在不同的情况下对我有用：

```
result <- getURL(url,.opts=curlOptions(postfields=postFields)) 
```

（是的，据我所知，您可以将 getURL 函数用于 POST 请求）。

# assembly - emu8086 中的多任务处理

> ID：16121467
> 
> 赞同：1
> 
> 时间：2013-04-20T14:33:06.073
> 
> 标签：assembly, operating-system

我在emu8086中有一个关于多任务处理的作业。我有我的内核和一些运行良好的程序，但是我如何让它们在多任务处理中运行。我不知道。老师说你可以使用定时器中断或命令计数器或双堆栈，但我不知道该怎么做。有人能帮我吗？任何示例或有关它的信息。因为我真的是大会的新手。

# google-app-engine - BlobStore vs Cloud Storage 用于存储用户上传的图像

> ID：16121468
> 
> 赞同：2
> 
> 时间：2013-04-20T14:33:10.460
> 
> 标签：google-app-engine, blobstore, google-cloud-storage

我是 AppEngine 的新手，我正在构建一个接受来自 Android 设备的用户图像上传的应用程序。

我使用 Cloud Storage 构建它，但后来我意识到我在上传大文件时遇到问题（可能是因为请求时间限制？）

所以我想我应该使用 Blobstore 的上传 URL 来正确上传多个大文件。Blobstore 还具有非常好的动态图像大小调整功能。

问题是，Cloud Storage 比 Blobstore 便宜。

上传后我应该将上传的文件从 Blobstore 移动到 Cloud Storage 吗？

有没有办法不通过 Blobstore 上传 URL 方式将多个大文件上传到 AppEngine？

如果重要的话，我正在使用 Go..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:12:15.060

最简单的答案可能是使用[签名的 url](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)来允许用户直接上传到 Cloud Storage。这让您可以完全绕过 App Engine 进行上传，从而简化网络使用并让您充分利用 Cloud Storage 的所有上传基础架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T16:18:18.413

目前，blobstore 为 0.0009 美元/GBHour，而 Cloud Storage 为 0.0027 美元/GBHour，因此 Blobstore 现在似乎比 Cloud Storage 便宜 3 倍。因此，虽然可能有理由迁移到云存储，但成本目前并不是其中之一。请注意，价格最近发生了变化。

如果您需要 Cloud Storage 提供的更丰富的 API，那当然是另一回事了。

# database - 如何防止打开 MS Access 数据库文件？

> ID：16121474
> 
> 赞同：0
> 
> 时间：2013-04-20T14:33:47.383
> 
> 标签：database, ms-access, vba, database-security

我正在开发一个使用 C# 和 MS Access 进行销售的 Inventory 项目。

售出此产品后，客户（或任何其他人）可以打开文件并阅读。我需要克服这个不太安全的问题。

我用谷歌搜索并找到了密码保护的解决方案。但是那里有很多工具可以破坏这一点。

最后我需要关闭所有窃取和查看数据的途径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:57:23.070

如果您觉得 Access 数据库引擎 (ACE) 的密码保护功能不能提供足够的安全级别来防止未经授权的“窥探”数据，那么您真的应该考虑使用 SQL Server 而不是 ACE 作为后端数据库。

# jquery - jQuery 变量在函数之外不会改变

> ID：16121478
> 
> 赞同：0
> 
> 时间：2013-04-20T14:34:12.557
> 
> 标签：jquery, variables

我正在使用以下代码在按下 .sidebar-toggle 时显示侧边栏，并在按下 #page 时隐藏侧边栏。

显示侧边栏效果很好，但在按下#page 时它不会隐藏。单击 .sidebar-toggle 时，该变量似乎未设置为 1。

```
var state = 0;

if (state === 0) {
    $('.sidebar-toggle').click(function() {
        $('#page').animate({marginLeft: '230px'}, 400);
        state = 1;
    });
}

if (state === 1) {
    $('#sidebar').click(function() {
        $('#page').animate({marginLeft: '0'}, 400);
        state = 0;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:38:32.753

您忘记使用#page click.function ...最好的方法是将if放入click.function ...尝试这种方式

```
var state = 0;

$('.sidebar-toggle').click(function() {
    if (state===0) {    
        $('#page').animate({marginLeft: '230px'}, 400);
        state = 1;
    }    
});

$('#page').click(function() {
    if (state===1){
        $('#page').animate({marginLeft: '0'}, 400);
        state = 0;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:40:05.680

可能是因为这从未执行

```
if (state === 1) {
    $('#sidebar').click(function() {
        $('#page').animate({marginLeft: '0'}, 400);
        state = 0;
    });
} 
```

试试这个方法——

```
var state = 0;
    $('.sidebar-toggle').click(function() {
       if (state === 0) {
        $('#page').animate({marginLeft: '230px'}, 400);
        state = 1;
       }
    });

    $('#page').click(function() {
       if (state === 1) {
        $('#page').animate({marginLeft: '0'}, 400);
        state = 0;
       }
    }); 
```

# facebook - 使用 localhost 登录 Facebook 无法正常工作

> ID：16121480
> 
> 赞同：1
> 
> 时间：2013-04-20T14:34:25.380
> 
> 标签：facebook, login

我在 Java Web 应用程序中使用 facebook 登录。

重定向 URL`http://<localhost>:8080/`就像它处于开发模式一样。

但我收到以下错误：

```
{
   "error": {
      "message": "Error validating application. Invalid application ID.",
      "type": "OAuthException",
      "code": 101
   }
} 
```

我正在使用 Spring Social Project`facebook.clientId`和`facebook.clientSecret`，它们是来自[https://developers.facebook.com/apps](https://developers.facebook.com/apps)的 App ID 和 App Secret ，看起来是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T16:57:03.167

将 localhost 替换为您的实时 IP，它将起作用并更改 facebook 网站上的网站 facebook 登录

# ruby - 通过 Bundler 使用来自 git repo 的 ruby gem

> ID：16121481
> 
> 赞同：0
> 
> 时间：2013-04-20T14:34:26.307
> 
> 标签：ruby, git, gem, bundler

我使用 bundler 创建了一个自定义 gem，并在 git repo 中检查了它。

custom_gem.rb

```
require "custom_gem/version"
require "custom_gem/custom_class"

module CustomGem
  # Your code goes here...
end 
```

custom_class.rb

```
require 'typhoeus'

module CustomGem

  class CustomClass

    def self.custom_method
       #do stuff with typhoeus
    end

  end

end 
```

将其作为依赖项添加到另一个项目并通过捆绑程序安装它。

```
gem 'custom_gem', :git => 'git@bitbucket.org:dir/repo.git' 
```

之后我尝试通过调用来使用它

```
CustomGem::CustomClass.custom_method 
```

我收到以下错误：

***未初始化的常量 CustomGem::CustomClass***

有什么建议么？

可能是一件小事，但只是从 ruby​​ 开始，所以任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:39:42.520

要检查的两件事：

1.  运行 Bundle install 时会发生什么（gem 是否列为已安装？）
2.  您是否需要正确地使用 gem（需要 'custom_gem'）？Rails 在那里有一点魔力，但我不确定你是否在 Rails 应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:06:56.907

文件 custom_gem.rb 应该在**lib/custom_gem.rb**中，文件 custom_class.rb 应该在**lib/custom_gem/custom_class.rb 中**

```
lib/custom_gem/custom_class.rb
\_/ \________________________/
 |             |
 |              \_ comes from your code: `require "custom_gem/custom_class"`
 |
 |
  \_ comes from custom_gem.gempsec (the line `s.require_paths = ["lib"]`) 
```

有关加载路径、文件层次结构和命名的更多信息，请查看此[gem 指南](http://guides.rubygems.org/patterns/)。

# java - 休眠错误 org.hibernate.exception.SQLGrammarException 与 MySQL

> ID：16121482
> 
> 赞同：0
> 
> 时间：2013-04-20T14:34:28.213
> 
> 标签：java, mysql, hibernate, model-view-controller

我正在使用 Hibernate 在 Java 和 MySQL 中创建一个项目，我可以从数据库中获取数据，但我无法将数据保存到其中，因为显示错误，我正在尝试使用 MVC 和注释非常简单地创建这个项目，没有春天或什么都没有，只是休眠。这是我的课：

**引用.java**

```
package stock.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Table;
import javax.persistence.Id;

import java.io.Serializable;
import java.math.BigDecimal;
import java.sql.Date;
import java.sql.Time;

@SuppressWarnings("serial")
@Entity
@Table(name = "quote")
public class Quote implements Serializable{

    public Quote(Long idQuote, int idCompany, BigDecimal price, Long volume,
            Date lastDate, Time lastTime, Long avgVolume, BigDecimal marketCap,
            BigDecimal change, BigDecimal percChange, String marketPeriod) {
        super();
        this.idQuote = idQuote;
        this.idCompany = idCompany;
        this.price = price;
        this.volume = volume;
        this.lastDate = lastDate;
        this.lastTime = lastTime;
        this.avgVolume = avgVolume;
        this.marketCap = marketCap;
        this.change = change;
        this.percChange = percChange;
        this.marketPeriod = marketPeriod;
    }

    public Quote() {
    }

    @Id
    @Column(name = "id_quote")
    private Long idQuote;

    @Id
    @Column(name = "id_company")
    private int idCompany;

    private BigDecimal price;
    private Long volume;

    @Column(name = "last_date")
    private Date lastDate;

    @Column(name = "last_time")
    private Time lastTime;

    @Column(name ="avg_volume")
    private Long avgVolume;

    @Column(name = "market_cap")
    private BigDecimal marketCap;

    private BigDecimal change;

    @Column(name = "perc_change")
    private BigDecimal percChange;

    @Column(name = "market_period")
    private String marketPeriod;

    public Long getIdQuote() {
        return idQuote;
    }

    public void setIdQuote(Long idQuote) {
        this.idQuote = idQuote;
    }

    public int getIdCompany() {
        return idCompany;
    }

    public void setIdCompany(int idCompany) {
        this.idCompany = idCompany;
    }

    public BigDecimal getPrice() {
        return price;
    }

    public void setPrice(BigDecimal price) {
        this.price = price;
    }

    public Long getVolume() {
        return volume;
    }

    public void setVolume(Long volume) {
        this.volume = volume;
    }

    public Date getLastDate() {
        return lastDate;
    }

    public void setLastDate(Date lastDate) {
        this.lastDate = lastDate;
    }

    public Time getLastTime() {
        return lastTime;
    }

    public void setLastTime(Time lastTime) {
        this.lastTime = lastTime;
    }

    public Long getAvgVolume() {
        return avgVolume;
    }

    public void setAvgVolume(Long avgVolume) {
        this.avgVolume = avgVolume;
    }

    public BigDecimal getMarketCap() {
        return marketCap;
    }

    public void setMarketCap(BigDecimal marketCap) {
        this.marketCap = marketCap;
    }

    public BigDecimal getChange() {
        return change;
    }

    public void setChange(BigDecimal change) {
        this.change = change;
    }

    public BigDecimal getPercChange() {
        return percChange;
    }

    public void setPercChange(BigDecimal percChange) {
        this.percChange = percChange;
    }

    public String getMarketPeriod() {
        return marketPeriod;
    }

    public void setMarketPeriod(String marketPeriod) {
        this.marketPeriod = marketPeriod;
    }

} 
```

**QuoteDaoImpl.java**

```
package stock.dao;

import java.sql.Time;
import java.util.List;

import org.hibernate.Session;
import org.hibernate.criterion.Order;
import org.hibernate.criterion.Restrictions;

import stock.model.Quote;

@SuppressWarnings("rawtypes")
public class QuoteDaoImpl implements QuoteDao{

    private Session session;

    public QuoteDaoImpl(Session session) {
        this.session = session;
    }

    @Override
    public void setQuote(Quote quote) {
        session.save(quote);
    }

} 
```

**QuoteController.java**

```
package stock.controller;

import java.math.BigDecimal;
import java.sql.Date;
import java.sql.Time;
import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

import stock.dao.QuoteDao;
import stock.dao.QuoteDaoImpl;
import stock.model.Quote;

@SuppressWarnings("deprecation")
public class QuoteController {

    private QuoteDao quoteDao;
    private static final SessionFactory sessionFactory;
    private Session session;

    static {
        try {
            // Initialize factory using contents of hibernate.cfg.xml
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }

    }

    @SuppressWarnings("unused")
    private static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    private void openSession(){
        session = sessionFactory.openSession();
        session.beginTransaction();
        quoteDao = new QuoteDaoImpl(session);
    }

    private void closeSession(){
        session.getTransaction().commit();
        session.close();
    }

    public QuoteController() {
        this.openSession();
    }

    public void setQuote(){
        Quote qte = new Quote();
        qte.setIdQuote(new Long("20130418140532"));
        qte.setIdCompany(4);
        qte.setLastDate(new Date(20130418));
        qte.setLastTime(new Time(140532));
        qte.setPrice(new BigDecimal(2.35));
        quoteDao.setQuote(qte);
        this.closeSession();
    }

} 
```

**休眠.cfg.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC 
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN" 
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration> 
    <session-factory> 
        <!-- Session Thread  -->
        <property name="current_session_context_class">thread</property>

        <!-- Database connection settings --> 
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property> 
        <property name="connection.url">jdbc:mysql://localhost:3306/stock</property> 
        <property name="connection.username">root</property> 
        <property name="connection.password">root</property>   

        <!-- JDBC connection pool (use the built-in) --> 
        <property name="connection.pool_size">1</property>   

        <!-- SQL dialect --> 
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>   
<!--        <property name="dialect">org.hibernate.dialect.MySQLInnoDBDialect</property>    -->

        <!-- Echo all executed SQL to stdout --> 
        <property name="show_sql">true</property>   
        <property name="format_sql">true</property>
        <property name="hbm2ddl.auto">validate</property>

        <!-- configuration pool via c3p0-->
        <property name="c3p0.acquire_increment">1</property>
        <property name="c3p0.idle_test_period">3600</property> <!-- seconds -->
        <property name="c3p0.min_size">3</property>
        <property name="c3p0.max_size">5</property>
        <property name="c3p0.max_statements">0</property>
        <property name="c3p0.timeout">3605</property> <!-- seconds -->
        <property name="hibernate.c3p0.preferredTestQuery">select 1;</property>

        <!-- Mapping files --> 
        <mapping class="stock.model.Company"/>
        <mapping class="stock.model.Quote"/>
<!--        <mapping class="stock.model.QuoteInfo"/> -->
    </session-factory> 
</hibernate-configuration> 
```

正如您在配置文件中看到的那样，我尝试使用 org.hibernate.dialect.MySQLDialect 和 org.hibernate.dialect.MySQLInnoDBDialect 但显示相同的错误。

**显示的错误是：**

```
ERROR: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'change, last_date, last_time, market_cap, market_period, perc_change, price, vol' at line 1
Exception in thread "main" org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'change, last_date, last_time, market_cap, market_period, perc_change, price, vol' at line 1
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at sun.proxy.$Proxy10.executeUpdate(Unknown Source)
    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3028)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3469)
    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:275)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1213)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:402)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at stock.controller.QuoteController.closeSession(QuoteController.java:46)
    at stock.controller.QuoteController.setQuote(QuoteController.java:72)
    at stock.view.Test.main(Test.java:13)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'change, last_date, last_time, market_cap, market_period, perc_change, price, vol' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2444)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2362)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2347)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 18 more 
```

**表*报价*为：**

```
CREATE TABLE `quote` (
  `id_quote` bigint(20) unsigned NOT NULL DEFAULT '0' COMMENT 'Codigo identificación quote\\nYYYYMMDDHHMMSS',
  `id_company` int(11) NOT NULL DEFAULT '0' COMMENT 'Id compañia ',
  `price` decimal(10,4) NOT NULL COMMENT 'Precio actual de la acción',
  `volume` bigint(20) NOT NULL COMMENT 'volumen actual de la acción',
  `last_date` date NOT NULL COMMENT 'fecha de la acción',
  `last_time` time NOT NULL COMMENT 'hora de la acción',
  `avg_volume` bigint(20) NOT NULL COMMENT 'volumen promedio actual de la acción sobre los últimos 30 días',
  `market_cap` decimal(10,4) DEFAULT NULL COMMENT 'El valor total de la compañia en el mercado actualmente',
  `change` decimal(5,2) DEFAULT NULL COMMENT 'Valor que la acción ha cambiado con respecto al inicio del día',
  `perc_change` decimal(5,2) DEFAULT NULL COMMENT 'Porcentaje que la acción ha cambiado con respecto al inicio del día',
  `market_period` varchar(2) DEFAULT NULL COMMENT 'Periodo de la acción\\nAH: After Hours\\nPM: Pre-Market\\nNH: Horas normales',
  PRIMARY KEY (`id_quote`,`id_company`),
  KEY `quote_ibfk_1` (`id_company`),
  CONSTRAINT `quote_ibfk_1` FOREIGN KEY (`id_company`) REFERENCES `company` (`id_company`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T19:54:28.350

尝试添加到字段`private Long idQuote;`columnDefintion 之类`"bigInt(8)"`的，可能会成功

# r - 如何限制饼图中的类别数量

> ID：16121488
> 
> 赞同：0
> 
> 时间：2013-04-20T14:35:14.187
> 
> 标签：r, ggplot2

下面的代码通过 AlertTypeId 生成一个饼图。但是，AlertTypeId 太多了，我想将饼图中的切片数量限制为 X 最频繁的警报，其余的进入“其他”类别。我怎么能用ggplot2做到这一点？

```
a = c(0, 0, 0, 1, 2, 3, 3, 3)
b = c(1, 1, 0, 0, 1, 1, 1, 1)
c = c(1, 4, 2, 2, 2, 1, 1, 3)
sa2 = data.frame(WeekOfYear = a, UrgentState = b, AlertTypeId = c, IsUrgent = b)

ggplot(sa2, aes(x = factor(1), fill = factor(AlertTypeId))) + 
  geom_bar(width = 1) + 
  coord_polar(theta = "y") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:10:10.537

有很多方法可以解决它，但基本的想法是你需要

1.  确定您要选择的 AlertId。这涉及计算每个 id 的行数。
2.  发送到`ggplot`仅包含您要绘制的那些行的 data.frame（或 data.table）。

这是一个使用示例`data.table`：

### 编辑：*我把它分成多行以便更容易理解*

```
library(data.table)
sa2.DT <- data.table(sa2, key="AlertTypeId")

# we can count the rows per id, by taking the length of any other column
ATid.Counts <-  sa2.DT[, list(AT.count=length(UrgentState)), by=AlertTypeId]

# then order Id's by their counts.  We will then take the `head( )` 
#    of this vector to identify the group being kept  
ATid.Ordered <- ATid.Counts[order(AT.count, decreasing=TRUE), AlertTypeId] 
```

`ATid.Ordered`是按频率计数排序的 Id 列表。
服用`head(ATid.Ordered, n)` 将给其中的`n`许多人。
由于我们已将键设置`sa2.DT`为这些 Id，因此我们可以使用有序列表（或其中的一部分）来子集`data.table`

```
# select only those rows which have an AlertTypeId in the top n many
dat <- sa2.DT[.(head(ATid.Ordered, n=3)) ]  # <~~ note the dot in `.( )` 
```

`dat`是我们将使用的`data.table`（或）`data.frame``ggplot`

```
# use that selection to plot
ggplot(dat, aes(x = factor(1), fill = factor(AlertTypeId))) + 
  geom_bar(width = 1) + 
  coord_polar(theta = "y") 
```

![饼形图](https://i.stack.imgur.com/j2Y82.png)

# json - 如何在同一台机器上的程序之间进行通信？

> ID：16121491
> 
> 赞同：0
> 
> 时间：2013-04-20T14:35:34.557
> 
> 标签：json, web-services, ipc

我的设置如下：一个**主程序**（用 Python 编写）充当检索数据的主应用程序，将其保存到 SQLite DB（然后稍后进一步处理）。这些数据收集在其他程序中，在**同一台机器**上运行，称为**slaves**。

请注意，一次始终只有一个从站运行，因此主站不需要同时从多个从站检索数据。但是，当一个从站关闭时，另一个从站可以开始向主站发送数据。

这个设置的一个重要特点是**从站**可以用**任何编程语言**编写，我对它们没有太多控制权。但是，我可以“插入”这些从属程序，以扩展它们的功能并将数据从该应用程序发送到主程序。

发送到主服务器的数据必须采用“正式”格式，例如键/值对列表等。这个要求有点灵活，它还取决于当前正在运行的从站。

现在我的问题是：如何在同一台机器上运行程序的实例之间实现通信？我考虑过**web services**，但它们似乎有点矫枉过正，因为它们都在同一台主机上运行。另一种选择是**通过 sockets 进行基于 Json 的数据**通信，但我对这种方法还没有太多经验，因此我无法判断它在这种情况下是否适合我的需求。

这两种方法只是我的第一个想法，我对任何好的解决方案持开放态度。

我认为有一种“最佳实践”方法来实现这样的设置，因为我肯定不是第一个有这种要求的人。

任何想法，甚至更好：实践经验，关于那个？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:40:52.660

进程之间没有跨平台的通信方式，但我认为没有理由不为此使用 tcp 套接字。

示例：`mongod`是 MongoDB 的守护进程，其他进程只是通过一个普通的 tcp 套接字与其通信（参见[this](http://docs.mongodb.org/meta-driver/latest/legacy/mongodb-wire-protocol/)）。

# android-layout - 错误：preferences.xml:com.android.layoutlib.bridge.MockView 无法转换为 android.view.ViewGroup

> ID：16121497
> 
> 赞同：2
> 
> 时间：2013-04-20T14:37:07.303
> 
> 标签：android-layout

当我尝试在 Eclipse 中显示图形布局视图时出现以下错误，

渲染期间引发异常：com.android.layoutlib.bridge.MockView 无法转换为 android.view.ViewGroup 异常详细信息记录在 Window > Show View > Error Log 中找不到以下类： - PreferenceCategory（修复构建路径， Edit XML) - PreferenceScreen (Fix Build Path, Edit XML)

我以前看到过这个问题，但没有得到回答。我应该担心这是一个问题吗？Lint 似乎没有发现任何问题。

提前致谢

# hover - 模拟悬停在超级鱼菜单上

> ID：16121498
> 
> 赞同：0
> 
> 时间：2013-04-20T14:37:11.920
> 
> 标签：hover, mouseevent, simulation, onmouseover, superfish

我想打开一个带有事件的超级鱼菜单的子菜单。例如使用按钮和“onclick”。我希望它保持打开状态，直到您按下关闭按钮 我该怎么做？我可以以某种方式从 superfish.js 调用“悬停事件”函数吗？

```
<ul class="sf-menu">
        <li class="current" id="qwqw">
            <a href="ceg.html" id="fmp1">ThisToHover(forexample)</a>
            <ul >
                <li>
                    <a href="ismerteto.html" id="fmp9">Ismertető</a>
                </li>
                <li class="current">
                    <a href="cegtortenet.html">Cégtörténet</a>
                </li>
                <li>
                    <a href="telephey.html">Telephely</a>
                </li>
                <li>
                    <a href="iso.html">ISO</a>
                </li>
                                    <li>
                    <a href="referencia.html">Referecciák</a>
                </li>
            </ul>
        </li>
        <li>
            <a href="tevekenysegek.html" id="fmp2">menu</a>
                    <ul>
                            <li><a href="teherfuvarozas.html">Teherfuvarozás</a></li>
                            <li><a href="gepszallitas.html">Gépszállítás</a></li>
                            <li><a href="gepber.html">Gépbérlet</a>
                            <ul>
                            <li><a href="gepber.html">Subsubmenu</a></li>
                            <li><a href="gepber.html">Nyan Cat</a></li>
                            </ul>
                            </li>
                            <li><a href="foldmunka.html">Gépi Földmunka</a></li>
                            <li><a href="bontas.html">Bontás</a></li>
                            <li><a href="tores.html">Lorem Ipsum</a></li>
                    </ul>

        </li>
        <li>
            <a href="contact.html" id="fmp3">menu</a>
        </li>

        <li>
            <a href="images.html" style="border-right: 1px solid #FFF" id="fmp4">menu</a>
        </li>   
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T04:04:12.820

这比我想象的要容易得多。只需添加类'sfHover'

```
document.getElementById('qwqw').className='sfHover'; 
```

...例如。

# mysql - 使用索引优化 mysql 连接查询

> ID：16121499
> 
> 赞同：0
> 
> 时间：2013-04-20T14:37:31.867
> 
> 标签：mysql, performance, indexing

我有`complex1(field2,field3)`用于搜索`table1`和`index order1(field10)`排序结果的索引。这`table1`是 MySQL IndoDB 表。通过子查询，我尝试使用`complex1`索引获取值，通过主查询，我想使用`order1`索引对它们进行排序，只保留前 50 个。

```
 EXPLAIN(
SELECT `t1`.`field1`,`t1`.`field10` from `database`.`table1` `t1` INNER JOIN 
   (SELECT `field1` FROM `database`.`table1` WHERE 
   `field2` >= 'val1' and `field2`<='val2' `and `field3` >= 'val3' and `field3`<='val4'
   ) as e1 
ON e1.`field1`=t1.`field1` ORDER BY t1.`field10` LIMIT 50) 
```

结果如下：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY <derived2>  ALL NULL    NULL    NULL    NULL    13  "Using temporary; Using filesort"
1   PRIMARY t1  eq_ref  PRIMARY PRIMARY 4   e1.field1   1   
2   DERIVED table1  range   complex1    complex1    8   NULL    13  "Using where; Using index" 
```

如我所见`complex1`，已使用`order1`且未使用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:45:55.330

MySQL 有[很好](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)的关于如何使用索引的文档

您的子查询`complex`通过扫描范围内的所有值来使用索引`field2`。如果`field1`是主键，那么它也在 InnoDB 索引中（如此[处](http://dev.mysql.com/doc/refman/5.5/en/innodb-index-types.html)所述），因此所有字段都可以在索引中得到满足。

然后你正在加入`field1`。因为这个索引存在于表上，MySQL 可能正在使用表上的主索引来进行这个连接。因此，结果然后按`field1`和*not* `field10`排序。因此，它必须进行文件排序才能获得最终的排序结果。

如果`field1`是主键，这个查询不是做同样的事情吗？

```
SELECT `field1`, `field10`
FROM `database`.`table1`
WHERE `field2` >= 'val1' and `field2`<='val2' `and
      `field3` >= 'val3' and `field3`<='val4'
order by field10 desc
limit 30 
```

# java - 插入数据库时 netbeans项目中的参数类型不匹配

> ID：16121502
> 
> 赞同：0
> 
> 时间：2013-04-20T14:37:45.493
> 
> 标签：java, jsp, netbeans, insert, phpmyadmin

我正在创建一个允许管理员管理菜单项的网页。对于删除部分，它是成功的..但是当我想插入一个新菜单时出现错误。

我正在使用 phpmyadmin 作为我的数据库

当我运行我的 netbeans 项目时，我遇到了这个错误

HTTP 状态 500-

**类型：**异常报告

**描述：**服务器遇到一个内部错误 () 阻止它完成这个请求。

**异常：** org.apache.jasper.JasperException：java.lang.IllegalArgumentException：参数类型不匹配

**根本原因：** java.lang.IllegalArgumentException：参数类型不匹配

**完整的堆栈跟踪**

```
java.lang.IllegalArgumentException: argument type mismatch
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.jasper.runtime.JspRuntimeLibrary.handleSetProperty(JspRuntimeLibrary.java:672)
at org.apache.jsp.confirmadd_jsp._jspService(confirmadd_jsp.java:90)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

***管理菜单.jsp***

```
<h3>Add new menu</h3>
<div>
<form method="post" action="confirmadd.jsp">
<table>
<tr><td>Food ID</td><td>:</td><td><input type="text" name="food_id" placeholder="food ID"/></td></tr>
<tr><td>Food Name</td><td>:</td><td><input type="text" name="food_name" placeholder="food name"/></td></tr>
<tr><td>Food Description</td><td>:</td><td><input type="text" name="food_description" placeholder="food desc"/></td></tr>
<tr><td>Food Price</td><td>: </td><td><input type="text" name="food_price" placeholder="food price"/></td></tr>
</table>
<input type="submit" value="Submit"/><input type="reset" value="Reset"/>
</form> 
```

***确认添加.jsp***

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<%@ page import="java.util.*" %>
<jsp:useBean id="newmenu" class="restaurantBean.menu" scope="session"/>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="css/jquery-ui-1.9.2.custom.css" rel="stylesheet">
    <script src="js/jquery-1.8.3.js"></script>
    <script src="js/jquery-ui-1.9.2.custom.js"></script>
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
    <title>Confirm Add Food</title>
</head>
<body>
<center><br><h1>Restaurant E-menu and Reservation System</h1><br><br>

 <a href="main.jsp">Home</a>
    &nbsp;&nbsp;&nbsp;&nbsp;<a href="managemenu.jsp">Manage Menu</a>
    &nbsp;&nbsp;&nbsp;&nbsp;<a href="updatestock.jsp">Update stock</a>

<div class="content">
    <h1>Confirm Food</h1>
    <jsp:setProperty name="newmenu" property="food_id" value='<%=request.getParameter("food_id")%>'/>
    <jsp:setProperty name="newmenu" property="food_name" value="<%=request.getParameter("food_name")%>"/>
    <jsp:setProperty name="newmenu" property="food_description" value='<%=request.getParameter("food_description")%>'/>
    <jsp:setProperty name="newmenu" property="food_price" value='<%=request.getParameter("food_price")%>'/>

    <table id="form">
        <tr><th colspan="3">Food Details</th></tr>
    <tr><td>Food ID</td><td>:</td><td><jsp:getProperty name="newmenu" property="food_id"/></td></tr>
    <tr><td>Food Name</td><td>:</td><td><jsp:getProperty name="newmenu" property="food_name"/></td></tr>
    <tr><td>Food Description</td><td>:</td><td><jsp:getProperty name="newmenu" property="food_description"/></td></tr>
    <tr><td>Food Price</td><td>:</td><td>RM<jsp:getProperty name="newmenu" property="food_price"/></td></tr>
    <tr><td colspan="3"><input type="button" value="proceed" onclick="location.href='./addmenu'"/>
    <input type="button" value="Back" onClick="history.go(-1);return true;"></td></tr>
    </table>

</div>
</div>
<jsp:include page="/WEB-INF/includes/footer.jsp" />
</div>
</body>
</html> 
```

***菜单.java***

```
package restaurantBean;

public class menu {
private String food_description;
private String food_id;
private String food_name;
private double food_price;

public void setFood_description(String a){
    food_description=a;
}
public String getFood_description(){
    return food_description;
}
public void setFood_id(String b){
    food_id=b;
}
public String getFood_id(){
    return food_id;
}
 public void setFood_price(double c){
    food_price=c;
}
public double getFood_price(){
    return food_price;
}
 public void setFood_name(String d){
    food_name=d;
}
public String getFood_name(){
    return food_name;
}

} 
```

***addmenu.java***

```
package restaurantPackages;

import restaurantBean.*;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.*;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet(name = "addmenu", urlPatterns = {"/addmenu"})
public class addmenu extends HttpServlet {
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
           Class.forName("com.mysql.jdbc.Driver");

           HttpSession session=request.getSession();
        menu m=(menu) session.getAttribute("newmenu");

        String url="jdbc:mysql://localhost:3306/restaurant";
        String username="root";
        String password="";
        Connection con=DriverManager.getConnection(url,username,password);

        Statement statement=con.createStatement();            
        //ResultSet result=statement.executeQuery("select food_id from food where food_name='"+m.getFood_name().trim()+"'");
        //int c = 0;
        //while(result.next()){
        //c=result.getInt(1);
        //}
        PreparedStatement stmt=con.prepareStatement("insert into food (food_id, food_name, food_description, food_price) values (?,?,?,?)");
        stmt.setString(1,m.getFood_id());
        stmt.setString(2,m.getFood_name());
        stmt.setString(3,m.getFood_description());
        stmt.setDouble(4,m.getFood_price());

        stmt.executeUpdate();

        stmt.close();
        con.close();
        menu food=new menu();
        session.setAttribute("food",food);
        RequestDispatcher dis=request.getRequestDispatcher("/WEB-INF/addsuccess.jsp");
        dis.forward(request,response);
    }
    catch(java.lang.ClassNotFoundException e){
          out.println("ClassNotFoundException:"+e.getMessage());
       }catch(SQLException e){
            out.println("SQLState:  " + e.getSQLState());
            out.println("Message:  " + e.getMessage());
            out.println("Vendor:  " + e.getErrorCode());
       }
    finally {            
        out.close();
    }
} 
```

***添加成功.jsp***

```
<div class="content">

<tr><td>Successfully add food ID = ${food.food_id} from restaurant</td></tr>
<table id="form">
        <tr><th colspan="3">New Added Food Details</th></tr>
    <tr><td>Food ID</td><td>:</td><td>${food.food_id}</td></tr>
    <tr><td>Food Name</td><td>:</td><td>${food.food_name}</td></tr>
    <tr><td>Food Description</td><td>:</td><td>${food.food_description}</td></tr>
    <tr><td>Food Price</td><td>:</td><td>${food.food_price}</td></tr>

    </table>
<tr><td><input type="button" value="Continue Manage Menu" onclick="location.href='managemenu.jsp'"/></td></tr>
<tr><td><input type="button" value="View Menu" onclick="location.href='main.jsp'"/>    </td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:57:35.093

由于没有完整的堆栈跟踪，我猜测问题出在此处：

```
<jsp:setProperty name="newmenu" property="food_price" value='<%=request.getParameter("food_price")%>'/> 
```

food_price 字段是双精度的，您的 Web 表单上的价格格式可能无法转换为双精度（只是为了测试，将 food_price 类型更改为字符串，看看会发生什么）。并在此处复制更多堆栈跟踪，以便更容易识别问题。

# azure - 无法重命名 Azure 存储中的 blob 文件

> ID：16121503
> 
> 赞同：3
> 
> 时间：2013-04-20T14:38:03.343
> 
> 标签：azure, azure-blob-storage

我正在尝试通过 .net API 重命名 azure 存储中的 blob，但一天后我无法重命名 blob 文件：（

这是我的做法，通过创建新的 blob 并从旧的 blob 复制。

```
var newBlob = blobContainer.GetBlobReferenceFromServer(filename);

newBlob.StartCopyFromBlob(blob.Uri);

blob.Delete(); 
```

服务器上没有新的 blob，所以我收到 http 404 Not Found 异常。

这是我找到的工作示例，但它适用于旧的 .net Storage api。

```
CloudBlob blob = container.GetBlobReference(sourceBlobName);
CloudBlob newBlob = container.GetBlobReference(destBlobName);
newBlob.UploadByteArray(new byte[] { });
newBlob.CopyFromBlob(blob);
blob.Delete(); 
```

目前我正在使用 2.0 API。我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T15:06:33.740

我看到您正在使用`GetBlobReferenceFromServer`方法来创建新 blob 对象的实例。要使此功能正常工作，必须存在 blob，但在您尝试重命名 blob 时不会出现这种情况。

您可以做的是调用`GetBlobReferenceFromServer`旧 blob，获取它的类型，然后创建 BlockBlob 或 PageBlob 的实例并对其执行复制操作。所以你的代码会是这样的：

```
 CloudBlobContainer blobContainer = storageAccount.CreateCloudBlobClient().GetContainerReference("container");
    var blob = blobContainer.GetBlobReferenceFromServer("oldblobname");
    ICloudBlob newBlob = null;
    if (blob is CloudBlockBlob)
    {
        newBlob = blobContainer.GetBlockBlobReference("newblobname");
    }
    else
    {
        newBlob = blobContainer.GetPageBlobReference("newblobname");
    }
    //Initiate blob copy
    newBlob.StartCopyFromBlob(blob.Uri);
    //Now wait in the loop for the copy operation to finish
    while (true)
    {
        newBlob.FetchAttributes();
        if (newBlob.CopyState.Status != CopyStatus.Pending)
        {
            break;
        }
        //Sleep for a second may be
        System.Threading.Thread.Sleep(1000);
    }
    blob.Delete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T12:48:56.157

OP 中的代码几乎没有问题，只是调用了异步复制方法。新 API 中最简单的代码应该是：

```
var oldBlob = cloudBlobClient.GetBlobReferenceFromServer(oldBlobUri);
var newBlob = container.GetBlobReference("newblobname");
newBlog.CopyFromBlob(oldBlob);
oldBlob.Delete(); 
```

# node.js - nodejs Browserify node-xmpp捆绑错误：找不到模块dns

> ID：16121511
> 
> 赞同：0
> 
> 时间：2013-04-20T14:38:44.417
> 
> 标签：node.js, browserify

我已经使用[Browserify从](https://github.com/substack/node-browserify)[node-xmpp](https://github.com/astro/node-xmpp)创建了一个 JS 包文件，但是当我加载我的网站时，我在 Google Chrome Javascript 控制台中收到以下错误：

```
Uncaught Error: Cannot find module 'dns' 
```

我尝试使用和重建 JS 包安装[浏览器请求](https://github.com/iriscouch/browser-request)节点包，但我仍然得到相同的错误。`npm install -g browser-request`

为了摆脱这个错误，我需要包含/安装什么？

注意：我使用的是带有最新版本 nodejs 和[Browserify的 debian 服务器](https://github.com/substack/node-browserify)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:07:18.423

我发现一个尚未添加到最新版本中的提交解决了我的问题。

[https://github.com/dodo/node-xmpp/commit/a49e7be0e43885060aaf26c2772b41c618624f12](https://github.com/dodo/node-xmpp/commit/a49e7be0e43885060aaf26c2772b41c618624f12)

我添加了一个屏幕截图，其中包含链接是否失效的更改： ![在此处输入图像描述](https://i.stack.imgur.com/2yIO0.png)

# sparql - BIND 子句上的 Sparql 问题

> ID：16121518
> 
> 赞同：2
> 
> 时间：2013-04-20T14:39:31.583
> 
> 标签：sparql, dotnetrdf

我目前正在尝试按优先级对一些客户进行排序（那些首先拥有正在运行的订阅的客户，然后是其他客户。

为此，我在此查询中使用了 BIND 子句：

```
SELECT DISTINCT ?context ?priority ?label { 
    ?s a my:Client . 
    ?s rdfs:label ?label . 
    BIND ( IF(EXISTS {?s rdf:type my:Subscriber}, 1, 0)  AS ?priority ) 
} ORDER BY DESC(?priority) ASC(?label) 
```

在我看来， ?priority var 应该始终绑定到 0 或 1，但是每当我执行查询时，我得到（连同预期的输出结果）未绑定的 ?priority “行”，用于那些应该获得 1 优先级的项目，所以我需要在我的查询中添加 FILTER (bound(?priority)) 以获得我所期望的。

这是正常的还是我错过了什么？

在此先感谢，马克斯。

**编辑 ：**

=> 在跟踪器中提交排序问题

我编辑了查询以检查优先权在同一个节点上是否绑定和未绑定。

这是我返回的结果集的示例输出

```
?context = urn:graph:1772#844 , ?priority = 1^^http://www.w3.org/2001/XMLSchema#integer , ?sort1 = client 2@fr
?context = urn:graph:1772#1690 , ?priority = 1^^http://www.w3.org/2001/XMLSchema#integer , ?sort1 = client 1@fr
?context = urn:graph:1772#742 , ?priority = 0^^http://www.w3.org/2001/XMLSchema#integer , ?sort1 = client 4@fr
?context = urn:graph:1772#1010 , ?priority = 0^^http://www.w3.org/2001/XMLSchema#integer , ?sort1 = client 3@fr
?context = urn:graph:1772#1690 , ?sort1 = client 1@fr
?context = urn:graph:1772#844 , ?sort1 = client 2@fr 
```

在最后两行中，变量 ?priority 根本没有绑定。顺便说一句，您会注意到如果第一个子句未绑定，则第二个 ORDER 子句也不会被执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:23:32.690

使用`EXISTS`另一个表达式的子表达式存在一个错误，可能会导致不正确的结果，如您的示例所示。

这现在已在源代码中修复，并将包含在下一个版本中

# c# - 正则表达式验证从 0 到 5 的数字，最多 2 位小数

> ID：16121519
> 
> 赞同：1
> 
> 时间：2013-04-20T14:39:35.850
> 
> 标签：c#, asp.net

大家好，我有一个要求，文本框应该允许数字`1 to 5`和小数

```
Valid conditons : 1,2,3,4,5
Valid conditions : 0.1,0.02,0.5 ---- 4.99

InValid : -1,-2,-3,-4,-5 or 6 5.1 and so one 
```

我尝试了这个`^\d{1}[0-5](?:\.\d{1,2})?$`没有按预期工作的表达，所以有人可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:58:32.703

尝试这个

```
^([0-4]{1}(\.\d{1,2})?|5(.0{1,2})?)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:43:41.413

我认为正则表达式在这里有点矫枉过正，这不是很简单`&&`吗？

```
decimal _dec = 0.0m;
if ((_dec >= 0) && (_dec <= 5))
{
    Console.WriteLine("Valid");
}
else
{
    Console.WriteLine("Invalid");
} 
```

但如果该值是一个字符串，`Decimal.TryParse()`则用于检查它是否为有效的十进制数，

```
string _strDecimal = "3.5";
decimal _dec;
bool _valid = Decimal.TryParse(_strDecimal, out _dec);
if (_valid)
(
    if ((_dec >= 0) && (_dec <= 5))
    {
        Console.WriteLine("Valid");
    }
    else
    {
        Console.WriteLine("Invalid");
    }
)
esle
{
        Console.WriteLine("Invalid");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:58:21.560

`^([0-4](\.\d{1,2})?|5)$`如果您只想考虑只有两位小数的数字，则可能会奏效，`^([0-4](\.\d+)?|5)$`否则。

# android - 使用按钮更改列表视图内容

> ID：16121522
> 
> 赞同：0
> 
> 时间：2013-04-20T14:39:41.643
> 
> 标签：android

我有两个 listViews，一个来自 rss 提要，一个来自我的数据库中的数据（使用光标）。

是否可以创建一个按钮并仅更改我的列表视图的内容？

我的意思是，当用户第一次进入我的应用程序时，listView 应该显示来自 rss 提要的文章，并且当用户按下收藏按钮时，列表将使用最喜欢的文章（来自数据库）进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:43:30.893

当然这是可能的。

您需要在布局中显示该按钮，并为该按钮创建一个单击处理程序。单击处理程序应替换整个`Fragment`,`ListView`或仅替换`ListView`. 一般来说，我会建议更换`Fragment`.

您可以按照本指南了解如何处理输入事件和创建点击处理程序：

[http://developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

要替换 ListView：

```
ViewGroup containerOfListView = (ViewGroup)findViewById(R.id.parent);
containerOfListView.removeAllViews();
containerOfListView.addView(newListView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:44:25.513

您可能正在寻找一种*过滤*列表视图的方法，因为清除整个列表视图并从光标添加数据不是一个有效的解决方案，对于过滤列表视图，您可以自定义您自己的列表视图的过滤器：查看这些帖子： [1](https://www.google.com.cu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&cad=rja&ved=0CG8QFjAF&url=https://stackoverflow.com/questions/1737009/how-to-make-a-nice-looking-listview-filter-on-android&ei=IKlyUcDiLomVtAbZyYDQCQ&usg=AFQjCNHYYduyN_x2SpvcOtJtpYuRp9tsMw&bvm=bv.45512109,d.Yms) [2](https://www.google.com.cu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&cad=rja&ved=0CG8QFjAF&url=https://stackoverflow.com/questions/1737009/how-to-make-a-nice-looking-listview-filter-on-android&ei=IKlyUcDiLomVtAbZyYDQCQ&usg=AFQjCNHYYduyN_x2SpvcOtJtpYuRp9tsMw&bvm=bv.45512109,d.Yms)

# excel - 如何计算仅包含 VALUE 0 而不是公式结果的单元格？

> ID：16121530
> 
> 赞同：5
> 
> 时间：2013-04-20T14:40:17.173
> 
> 标签：excel, excel-formula, formula, countif

对于以下工作表：

```
 A
1   0
2   0 as formula result
3   0
4   0 as formula result
5   0 as formula result
6   blank
7   0 
```

如何仅计算`0`输入为 VALUES 的单元格而不是`0`计算公式结果的单元格，即

`COUNTIF(A1:A7,0 AS VALUE)`= 3

我尝试了以下方法：

`COUNTIF(A1:A7,0)`= 6

`COUNTIF(A1:A7,"0")`= 6

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-28T12:29:21.433

COUNTIF(A1:A7;0) 这对我有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T14:55:17.457

不确定 Excel，但 VBA 具有此功能。所以你可以定义一个小的UDF来实现这个：

```
Function HasFormula(r as Range) As Boolean
    HasForumla = r.HasFormula
End Function 
```

现在您可以使用 IF 和 COUNT 调用此函数来获取结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:15:42.163

以下 VBA 定义的函数将计算区域中具有零的单元格的数量。

```
Function CountZeros(rng As Range) As Long
    Dim cell As Range
    CountZeros = 0
    For Each cell In rng
        If (cell = 0) And (IsEmpty(cell) = False) And Not (HasFormula(cell)) Then
            CountZeros = CountZeros + 1
        End If
    Next
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-25T05:05:40.953

`B1`用这个公式填充单元格：

```
=IF(AND(A1=0,ISFORMULA(A1)=FALSE),1,0) 
```

将此公式复制到单元格`B2:B7`

求和单元格`B1:B7`，你会得到你想要的。

# java - 将字节数组输出转换为字符串而不在java中更改值

> ID：16121533
> 
> 赞同：0
> 
> 时间：2013-04-20T14:40:24.347
> 
> 标签：java, hash, bytearray

我在 java 中有一个名为 byteval 的 byte[] 数组，如果我执行 System.out.println(byteval)，我可以读取：d3e1547c254ff7cec8dbcef2262b5cf10ec079c7[B@40d150e0

现在我需要这个我在那里读到的字符串，但是如果我尝试用 Byte.toString 或新的字符串构造函数来转换它，值就不一样了，大多数都是一些数字。

那么如何将 byte[] 数组作为一个名为 strval 的字符串获取，同时切断 [B@40d150e0？

现在： System.out.println(byteval)>> d3e1547c254ff7cec8dbcef2262b5cf10ec079c7[B@40d150e0

目标： System.out.println(strval)>> d3e1547c254ff7cec8dbcef2262b5cf10ec079c7

非常感谢！丹尼

**编辑：为我工作的解决方案：**

```
byte[] byteval = getValue();
// Here System.out.println(byteval) is 
// d3e1547c254ff7cec8dbcef2262b5cf10ec079c7[B@40d150e0

BigInteger bi = new BigInteger(1, byteval);
String strval = bi.toString(16);

if ((strval.length() % 2) != 0) {
    strval = "0" + strval;
}

System.out.println(strval);
// Here the String output is
// d3e1547c254ff7cec8dbcef2262b5cf10ec079c7 
```

感谢所有回答者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:44:13.623

做就是了

```
System.out.println(byteval.toString()) 
```

代替

```
System.out.println(byteval) 
```

这将删除结束部分（实际上这只是引用的对象的地址）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:46:51.797

尝试这个：

```
String str= new String(byteval, "ISO-8859-1");
System.out.println(str); 
```

# qt - 如何使 QAbstractTableModel 的数据可检查

> ID：16121537
> 
> 赞同：3
> 
> 时间：2013-04-20T14:40:34.127
> 
> 标签：qt, pyqt, pyside

如何使 QAbstractTableModel 的数据可检查

我想让以下代码中的每个单元格都可以被用户选中或取消选中，如何修改代码？

根据 Qt 文档：Qt::CheckStateRole 并设置 Qt::ItemIsUserCheckable 可能会被使用，所以任何人都可以提供一个小样本吗？

```
import sys                                 
from PyQt4.QtGui import *                              
from PyQt4.QtCore import *

class MyModel(QAbstractTableModel):   

    def __init__(self, parent=None):   

        super(MyModel, self).__init__(parent)   

    def rowCount(self, parent = QModelIndex()):   

        return 2

    def columnCount(self,parent = QModelIndex()) :   

        return 3

    def data(self,index, role = Qt.DisplayRole) :   

        if (role == Qt.DisplayRole):   

            return "Row{}, Column{}".format(index.row() + 1, index.column() +1)   

        return None

if __name__ == '__main__':   

    app =QApplication(sys.argv)   

    tableView=QTableView()   
    myModel = MyModel (None);    
    tableView.setModel( myModel );          
    tableView.show();   
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T07:35:33.640

覆盖 MyModel 中的标志函数。

```
def flags(self, index)
    return super(MyModel, self).flags(index)|QtCore.Qt.ItemIsUserCheckable 
```

这表示模型中的索引是可检查的。

然后覆盖数据函数。

```
def data(self,index, role = Qt.DisplayRole) :   
    if (role == Qt.DisplayRole):   
        return "Row{}, Column{}".format(index.row() + 1, index.column() +1)
    elif (role==Qt.CheckStateRole):
        # read from your data and return Qt.Checked or Unchecked
    return None 
```

最后，您需要实现 setData 函数。

```
def setData(self, index, value, role = Qt.EditRole):
    if (role==Qt.CheckStateRole):
        # Modify your data. 
```

# javascript - 使用 PHP/MYSQL 删除前 JavaScript 确认

> ID：16121538
> 
> 赞同：5
> 
> 时间：2013-04-20T14:40:34.117
> 
> 标签：javascript, php, mysql, confirm

我在这里尝试了许多示例，但我可以让我的代码在删除之前实际显示一个弹出窗口。我使用的代码可以在这里找到：

`echo "<td><button class='btn'><a href=\"deleteuserExecute2.php?login=" .$login. "\" onClick=\"return confirm(\'Delete this Account?\')\"; >DELETE ACCOUNT </a></button></td>";`

[http://jsfiddle.net/mpogoro/EGfcY/](http://jsfiddle.net/mpogoro/EGfcY/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-20T14:46:50.610

您只需要使用`onclick`链接或按钮的方法：

```
<a href="DELETE_PAGE" onClick="return confirm('Delete This account?')">Delete Account</a> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-20T14:41:59.693

```
 <script type="text/javascript">
      function ConfirmDelete()
      {
            if (confirm("Delete Account?"))
                 location.href='linktoaccountdeletion';
      }
  </script>

  echo '<input type="button" onclick="ConfirmDelete()" value="DELETE ACCOUNT">'; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T14:48:41.387

试试这个

```
 <form action="url/to/delation_page" onSubmit="return confirm('are you sure?')">

</form> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-20T14:50:14.970

说啊

```
onclick="return confirm('Are you sure you want to delete?')"
         ^^^^^^ --> this is very important step... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-10T10:46:43.597

**javascript确认**

```
function doConfirm(id)
        {

            var ok = confirm("Are you sure to Delete?")
            if (ok)
            {

                if (window.XMLHttpRequest)
                {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp = new XMLHttpRequest();
                }
                else
                {// code for IE6, IE5
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }

                xmlhttp.onreadystatechange = function()
                {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                    {
                         window.location = "create_dealer.php";  // self page
                    }
                }

                xmlhttp.open("GET", "delete_dealer.php?id=" + id);
                xmlhttp.send();
            }
        } 
```

**删除按钮**

```
<input type="button" onclick="doConfirm();"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-29T11:51:08.573

如果你使用点击数据将被删除，但要查看结果你必须手动刷新页面而不是使用 onSubmit="return confirm('are you sure?')"

觉得有帮助！

# javascript - 单击 textarea 后，将引导按钮的值插入 textarea 不起作用

> ID：16121539
> 
> 赞同：0
> 
> 时间：2013-04-20T14:40:35.087
> 
> 标签：javascript, jquery, twitter-bootstrap, textarea, popover

我正在使用通过单击按钮出现的引导弹出窗口。在此弹出窗口中，还有另一个具有不同值的按钮，例如这个。

```
<button type="button" class="btn btn-default conditions topList" value="move();" id="move">move</button> 
```

我的目标是将这些按钮的值插入到文本区域中。为此，我使用以下 jQuery：

```
$(document).bind("click", function(e) {
  if ((e.target.value != undefined) && (e.target.id != "textarea"))
    $('#textarea').append(e.target.value+'\n');
}); 
```

因为我想在每个按钮的值之后跳过一行，所以我附加了一个'\n'。为了确保只有按钮的值将被插入到 textarea 中，如果它未定义，我会避免附加一个值，例如当我单击文档上的任何位置时，没有按钮。我也是通过单击文本区域来实现的。没有它，每次我点击 textarea 时都会跳过一行。

好吧，插入值可以正常工作，但仅当我不打算单击文本区域时。在我点击一次文本区域后，点击按钮不会有任何反应。同样的故事，当我手动清除 textarea`$('#textarea').val('')`之后，单击按钮没有任何反应。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:48:02.990

谢谢你的提示`.val()`。

我改变`$('#textarea').append(e.target.value+'\n');`了`$('#textarea').val($('#textarea').val() + e.target.value+'\n');`

现在它正在工作！

# java - 带有哈希密码的 Spring TokenBasedRememberMeServices

> ID：16121540
> 
> 赞同：0
> 
> 时间：2013-04-20T14:40:35.817
> 
> 标签：java, security, spring-security, token

我正在使用[StandardPasswordEncoder](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/crypto/password/StandardPasswordEncoder.html)，它使用具有 1024 次迭代和 8 字节盐的 SHA-256 对密码进行哈希处理。我正在查看[TokenBasedRememberMeServices](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/authentication/rememberme/TokenBasedRememberMeServices.html)做类似的事情或至少使用它，但盐有问题。根据文档，令牌包括以下内容：

> 用户名 + ":" + expiryTime + ":" + Md5Hex(用户名 + ":" + expiryTime + ":" + 密码 + ":" + key)

但问题是 Md5Hex 部分会因为盐而有所不同，IMO 无法将其分开。TokenBasedRememberMeServices 是否适用于加盐密码？如果没有，你会如何推荐做一个替代令牌？有没有办法在不使用持久存储的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T00:01:17.213

在研究了这个问题之后，事实证明没有办法使用带令牌的加盐密码，因此必须发送一个普通密码。

# sql - 如何检索所有用户的最后一篇文章

> ID：16121543
> 
> 赞同：3
> 
> 时间：2013-04-20T14:40:55.723
> 
> 标签：sql, laravel, laravel-4

我试图让我的用户（实际上是作者，最多有 5-6 位作者）将他们的最后一篇文章显示在主页的侧边栏中。由于它们将列在主页中，因此由于性能问题，我试图减少 sql 查询的数量。我努力了;

```
$users=User::with(array('posts'=>function($query){

        $query->take(1);
    }))->get(); 
```

但是，它总共只收到一个帖子，而不是每个用户都有一个帖子。而且我的sql知识有限。

如何使用 Eloquent ORM、查询生成器或原始 sql 查询来解决我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:31:43.550

一种解决方案是通过帖子列定义模型排序的`hasOne`关系。`User``created_at`

```
public function lastPost()
{
    return $this->hasOne('Post')->orderBy('created_at', 'desc');
} 
```

那么你的查询就是这样。

```
$users = User::with('lastPost')->get(); 
```

要限制列，您可以在关系级别限制查询：

```
return $this->hasOne('Post')->select('id', 'user_id', 'title', 'created_at')->orderBy('created_at', 'desc'); 
```

或者当您使用该`with`方法时：

```
$users = User::with(['lastPost' => function($query)
{
    $query->select('id', 'user_id', 'title', 'created_at');
})->get(); 
```

请注意，您还需要**user_id**和**created_at**列，因为它们是查询中的`WHERE`and`ORDER BY`子句所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:34:59.777

执行此操作的一般 SQL 方法是：

```
select p.*
from posts p join
     (select p.authorid, max(created_at) as maxdate
      from posts p
      group by p.authorid
     ) psum
     on p.authorid = psum.authorid and p.created_at = psum.maxdate 
```

这假设没有重复。

根据您使用的数据库，肯定有其他方法可以编写此查询。该版本是标准 SQL。

# python - 列表分配去哪里了？

> ID：16121545
> 
> 赞同：2
> 
> 时间：2013-04-20T14:41:08.850
> 
> 标签：python, list, insert

许多 Python 的列表方法在原地运行并返回`None`（在我的脑海中，, `insert`, `sort`, `reverse`）。

但是，有一种行为经常让我感到沮丧。如果我创建一个通常返回一个对象的新列表，并同时在其上插入，则新列表“消失”：

```
mytup = (0, 1, 2, 3, 4)
print mytup  # (0, 1, 2, 3, 4)
mylist = list(mytup)
print mylist  # [0, 1, 2, 3, 4]
newlist = list(mytup).insert(0, 10)
print newlist  # None 
```

所以如果我想修改一个元组，它需要更多的行：

```
newlist = list(mytup)
newlist.insert(0, 10)
print newlist  # [10, 0, 1, 2, 3, 4] 
```

所以我有两个问题：

1.  是否正确地说，当我调用列表构造函数时，它会返回对象，但是当我调用带有方法的列表构造函数时，该方法会“覆盖”返回值`None`？再一次，清单*去哪儿了*？
2.  有没有办法插入一个元组并在一行中返回一个列表？我不是想打代码高尔夫，我只是认为这两条线在逻辑上没有足够的差异，值得分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:43:43.180

`insert`,`sort`并`reverse`就地修改列表并返回`None`. 在您的代码中，您实际上是将该返回值存储在`newlist`变量中。

`newlist = list(mytup).insert(0, 10)`

并且新创建的列表（动态创建）被垃圾收集，因为不再有对它的引用。

```
In [151]: mytup = (0, 1, 2, 3, 4)

In [152]: lis=list(mytup)   #create a new list object and add a reference to this new object

In [153]: newlist=lis.insert(0,10)  #perform the insert operation on lis and store None
                                    # in newlist 

In [154]: print newlist     
None

In [155]: print lis     
[10, 0, 1, 2, 3, 4]  #you can still access this list object with 
                     #the help of `lis` variable. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:40:49.813

您的第一个问题的答案已经给出；您将最后一次函数调用的结果分配给变量，即`None`. 这是你第二个问题的答案。

而不是使用插入，做这样的事情：

```
newlist = [10] + list(mytup) 
```

它创建一个`list`包含要插入的元素的新元素，将其附加到转换后的元素`tuple`并存储（引用）结果`list`。

当然，这仅在您想在任一端插入时才有效。

如果您需要将新元素插入到其他地方，则必须对 进行切片`tuple`，例如在 中的第三个元素之后插入`tuple`：

```
newlist = list(mytup[:3]) + [10] + list(mytup[3:]) 
```

# java - Spring MVC 仅发布选定的数据

> ID：16121547
> 
> 赞同：1
> 
> 时间：2013-04-20T14:41:23.173
> 
> 标签：java, spring, jsp, spring-mvc

当我从 href 标记中选择犯罪编号时，此页面会显示几条记录，我只想在该行中发布数据。有人可以告诉我我哪里出错了：我为从服务器返回的每条记录做了不同的表格，但只有第一条记录一直被返回。

**编辑** 该页面是使用 java 脚本发布的，其接收的 Id 为 NULL

CrimeRecNo 准确地张贴了但是受害者和犯罪名单只张贴了第一行而不是选定的那一行。为什么？？？？

```
function submitPage(crimeRecNo) {

        document.getElementById("crimeList"+$('#crimeRecNo').val()).action = "getCrime/"+ crimeRecNo + ".htm";
        document.getElementById("crimeList"+$('#crimeRecNo').val()).method = "POST";
        document.getElementById("crimeList"+$('#crimeRecNo').val()).submit();

    } 
```

**html**

```
 </head>
<body>
    <c:forEach items="${crimes}" var="crime">
        <form:form id="crimeList${crime.crimeRecNo}" name="crimeList" commandName="crime">
            <div id="content">

                <div class="row-${crime.crimeRecNo}">
                    <h2>                            
                        <a class="crimeRecNo" href="${crime.crimeRecNo}">Crime Record
                            Number : ${crime.crimeRecNo}</a><form:input path="crimeRecNo" id="crimeRecNo"
                                            value="${crime.crimeRecNo}" />

                    </h2>

                    <div class="crimeReport">
                        <label>${crime.crimeDetails}</label>
                    </div>

                    <div id="container">

                        <div id="crimePhotoz">
                            <div id="victimLabel">
                                <label class="heading">Victims/Witness In Crime</label>
                            </div>
                            <div class="grid_row">

                                <c:forEach items="${crime.victims}" var="victim">
                                    <input type="hidden" value="${victim.photo}" class="foto" />
                                    <canvas class="canvas" height="200" width="200"></canvas>
                                </c:forEach>

                                <c:forEach items="${crime.victims}" var="victim">
                                    <div class="names">
                                        <a class="crimeNames" href="${victim.socialSecurityNumber}">${victim.name}</a>
                                        <form:input path="victims" id="victims" value="${victim.socialSecurityNumber}" />
                                    </div>
                                </c:forEach>

                            </div>

                            <div id="criminalLabel">
                                <label class="heading">Criminals In Crime</label>
                            </div>
                            <div class="grid_row2">

                                <c:forEach items="${crime.criminals}" var="criminal">
                                    <input type="hidden" value="${criminal.photo}" class="foto" />
                                    <canvas class="canvas" height="200" width="200"></canvas>
                                </c:forEach>

                                <c:forEach items="${crime.criminals}" var="criminal">
                                    <div class="names">
                                        <a class="crimeNames" href="${criminal.socialSecurityNumber}">${criminal.name}</a>
                                        <form:input path="criminals" id="criminals" value="${criminal.socialSecurityNumber}" />
                                    </div>
                                </c:forEach>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
            </div>
        </form:form>
    </c:forEach>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T19:02:47.080

也许你错过了一些报价？

```
document.getElementById(${crime.crimeRecNo}) 
```

如果`${crime.crimeRecNo}`是一个字符串，这就变成

```
document.getElementById(myRecNo) 
```

这是无效的javascript。在这种情况下，您应该添加引号：

```
document.getElementById("${crime.crimeRecNo}") 
```

如果`${crime.crimeRecNo}`是一个数字，您不需要引号，但您可能有无效的 ID。根据[这个](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)html ids 必须至少以一个字符开头。我不确定这是否会导致问题，但也许你应该尝试`<form id="record-${crime.crimeRecNo}" .. >`

# search - 如何按未在 ElasticSearch 中索引的外部数据进行过滤

> ID：16121553
> 
> 赞同：3
> 
> 时间：2013-04-20T14:42:19.873
> 
> 标签：search, join, elasticsearch, tire

我找不到使用 ElasticSearch 执行以下操作的方法：

*   我在 ElasticSearch 中索引了 2,000,000 个项目
*   我在 MySQL 中保存了 30,000 名玩家

每个项目都有一个玩家的名字作为属性。这些玩家的在线状态每 15 分钟更改一次，并且可以是真或假（显然）。

我希望能够只显示在线玩家的项目。

我不认为我可以用该项目索引在线状态，因为它经常变化。我无法真正获取在线玩家的所有 id 并将其用作过滤器，因为有这么多。

对 ElasticSearch 中的玩家进行索引是否也有帮助？`JOIN`是否可以对另一个索引进行某种操作？

编辑：在更多地研究了如何使用 ES 进行连接之后，我发现如果我在 ES 中索引玩家，实际上可以使用 has_child。Tire 没有方法`has_child`，但是可以用现有的 DSL 来做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:38:20.950

似乎很适合玩家和物品之间的父子关系，即使您不需要在父文档上进行全文搜索，因为：

1.  每个项目都属于一个玩家
2.  他们有独立的更新生命周期：当一个玩家改变时，你不想重新索引他的所有项目
3.  您只想返回孩子，对他们的父母应用过滤器。

您也可以在与项目相同的索引中但在单独的类型中索引您的玩家。您需要在映射中声明播放器类型是项目类型的[父](http://www.elasticsearch.org/guide/reference/mapping/parent-field/)项：

```
{
  "item":{
    "_parent":{
      "type" : "player"
    }
  }
} 
```

之后，您索引玩家，然后您的项目为每个玩家指定父玩家 ID。

然后，您可以对项目执行全文搜索，使用以下[has_parent 过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/has-parent-filter/)过滤它们。

```
{
    "has_parent" : {
        "parent_type" : "player",
        "query" : {
            "term" : {
                "status" : true
            }
        }
    }
} 
```

这样，您只会查询并最终返回属于活动玩家的项目。

为了更新播放器，您可以使用[更新 API](http://www.elasticsearch.org/guide/reference/api/update/)，也可以使用脚本来避免重新发送整个文档。请注意，无论如何，文档都将被删除并重新索引，这就是 lucene 的工作原理。

如果您想查看更多有关 elasticsearch 中文档之间关系的示例，请查看以下文章：

*   [玩转 Elasticsearch 的子项和嵌套文档](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)
*   [在 ElasticSearch 中管理关系](http://euphonious-intuition.com/2013/02/managing-relations-in-elasticsearch/)

根据您需要的查询类型，您可能会遇到限制，但鉴于您所写的内容，这就是我会做的。只需确保您的节点有足够的内存，因为 elasticsearch 在内存中保留了一个连接表，其中包含使用父子节点时涉及的所有 id。

# javascript - JavaScript 字符串搜索

> ID：16121556
> 
> 赞同：0
> 
> 时间：2013-04-20T14:42:33.330
> 
> 标签：javascript, jquery, string, search

我正在尝试使用 javaScript 在字符串中搜索另一个字符串的任何单词。假设我有以下要搜索的字符串：

```
"Oxford Street 100 London" 
```

我的搜索词是这样的：

```
"oxford london" 
```

上面的搜索词应该给我一个匹配，因为`oxford`并且`london`是要搜索的字符串的一部分。

我已经尝试过`str.indexOf("oxford london") !== -1`，但这不起作用，因为它不是要搜索的字符串中的组合词。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:48:25.167

您需要用空格分隔搜索词并搜索每个词（我认为不区分大小写）

```
var terms = terms.split(' '),
    match = terms.every(function (term) {
        return str.toLowerCase.indexOf(term) > -1;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:52:58.333

我只想使用一个简单的[正则表达式](http://www.regular-expressions.info/javascript.html)：

```
if("London, Oxford street".match(new RegExp("oxford london".split(/\W+/).join("|"), 'i'))) {
    alert("found");   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T14:55:18.293

```
mystring = "Oxford Street 100 London"
search = "oxford london"
// split search string, by space, or by another delimiter if you like
terms = search.split(" ")
matches = false
// loop through all terms, assuming that matches is true if no negative comparisons are made
for(i=0; i< terms.length; i++){
  // make sure you lowercase both search string, and comparison string
  if(mystring.toLowerCase().indexOf(terms[i].toLowerCase())){
    matches = true
  }
}
// matches is true if any terms are found, and false if no term is found 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:14:16.937

这有效：

```
var str = "Oxford Street 100 London";
var terms = "oxford london";
terms = terms.replace(" ", "|");          // "oxford|london"
var find = new RegExp(terms, "g");        // /oxford|london/g
alert(str.toLowerCase().match(find));     // ["oxford", "london"] 
```

看到这个[小提琴](http://jsfiddle.net/qJjZN/)。

# c# - 如何从文件动态创建对象？

> ID：16121562
> 
> 赞同：0
> 
> 时间：2013-04-20T14:43:09.520
> 
> 标签：c#, arrays, class, dynamic

我正在用这样的多行读取这样的文件。

“标题，名称，某事，某事，某事”

我将如何使用这些变量动态创建新对象

我已经把它分开了-

```
while (!reader.EndOfStream)
{
    lineFromFile = reader.ReadLine();

    split = lineFromFile.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);

} 
```

我的课叫做模块。只是不知道如何动态执行它，因为我不知道文件 ETC 中有多少模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:46:59.830

创建`List<Module>`并添加从您的文件中读取的所有项目：

```
List<Module> modules = new List<Module>();
while (!reader.EndOfStream)
{
    lineFromFile = reader.ReadLine();

    split = lineFromFile.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);

    var newModule = new Module();
    newModule.Property1 = split[0];
    newModule.Property2 = split[1];

    // (...) //

    modules.Add(newModule);

} 
```

或使用 LINQ：

```
var modules = (from line in File.ReadAllLines("fileName")
               let parts = line.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
               select new Module() {
                   Property1 = parts[0],
                   Property2 = parts[1],
                   Property3 = parts[2],
               }).ToList(); 
```

# php - PHP中的父对象类型提示

> ID：16121563
> 
> 赞同：7
> 
> 时间：2013-04-20T14:43:11.727
> 
> 标签：php

我正在尝试为 PHP 中的特定父对象键入提示：

我目前有一个标准的基础对象类：

```
class stdObject
{

   private $var;

   public function setVar($var)
   {
     $this->var = $var;
     return $this;
   }
} 
```

我有一个扩展它的类对象：

```
class valObject extends stdObject
{
} 
```

在 PHP 函数中，我希望能够键入提示，以便该函数可以预期具有 的父级的任何对象`stdObject`，因此发送`valObject`将起作用但不能`anyOldObject`。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:45:55.090

您可以使用父类型：

```
function test(stdObject $obj) {
  // ...
} 
```

如果你不想有一个纯 stdObject 作为参数，而只是一个继承 stdObject 的对象，你应该把你的 stdObject 类抽象或创建一个接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T14:45:13.853

> 这可能吗？

是的，您所描述的*正是*类型提示的用途。这是[文档](http://php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T14:50:52.730

类型提示适用于实现链，因此这是有效的：

```
public function fnc(stdObject $obj) 
```

这将接受从 stdObject 扩展的任何对象，包括 valObject。它也适用于接口

# java - 正则表达式 - 无法访问的语句

> ID：16121564
> 
> 赞同：0
> 
> 时间：2013-04-20T14:43:14.690
> 
> 标签：java, regex

我必须验证 EUI48 地址，目前我正在使用 for each 循环进行验证。我想使用正则表达式来做到这一点。但到目前为止还没有运气。

```
if(!input.matches("[0-9A-Fa-f]{12}+"));
            throw new SequenceException("IEEE/EUI48 does not contain a valid HEX value: " + input);

        setSubstitute(inputArgsMap.get(SUBSTITUTE_ID), input); 
```

我对`setSubstitute(inputArgsMap.get(SUBSTITUTE_ID), input);`说“无法访问的声明”感到不满。

输入是一个字符串。

有人知道我在做什么错吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:45:28.120

您有一个`;`after`if`语句，因此该`throw`语句将始终被执行，而不仅仅是在输入不匹配的情况下。

它应该是

```
if (!input.matches(...)) {
  throw new SequenceException(...);
}

setSubstitute(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:45:32.973

删除 if 语句后的分号并使用大括号包围条件块的主体。目前执行的是条件语句，但其结果与是否抛出异常无关。事实上，异常总是被抛出，导致调用`setSubstitute()`不可达。

```
if(!input.matches("[0-9A-Fa-f]{12}+")){
    throw new SequenceException("IEEE/EUI48 does not contain a valid HEX value: " + input);
}

setSubstitute(inputArgsMap.get(SUBSTITUTE_ID), input); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T14:45:46.433

您应该在“if”语句的末尾删除分号：

```
if(!input.matches("[0-9A-Fa-f]{12}+")) {
        throw new SequenceException("IEEE/EUI48 does not contain a valid HEX value: " + input);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T14:45:55.230

原因是 if 语句后面的分号；它相当于指定一个空块，如下所示：

```
if(!input.matches("[0-9A-Fa-f]{12}+")) {
    /* Nothing */
}
throw new SequenceException("IEEE/EUI48 does not contain a valid HEX value: " + input);
setSubstitute(inputArgsMap.get(SUBSTITUTE_ID), input); 
```

因此，您的代码总是会引发异常，并且`setSubstitute`永远不会调用到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T14:46:26.620

你的 if 语句不应该有 ; 在最后

# telerik - 自定义根容器未正确加载

> ID：16121565
> 
> 赞同：0
> 
> 时间：2013-04-20T14:43:14.690
> 
> 标签：telerik, kendo-ui, kendo-mobile

在我的剑道移动应用程序中，如果我有一个像这样的自定义根容器：

```
<div id="appcontainer">
    <div data-layout="StandardLayout" data-role="view" data-title="My Group List" id="MainView">
        This is the first contents.
    </div>

    <div data-layout="StandardLayout" data-role="view" data-title="View Group" id="SelectedView">
        This is the second contents.
    </div>

    <div data-role="layout" id="StandardLayout">
        <header data-role="header">
            <div data-role="navbar">
                <a data-role="backbutton" data-align="left" href="nav-button">Back</a>              
                <span data-role="view-title"></span>
            </div>
        </header>

        <footer data-role="footer"> 
        </footer>
    </div>

</div>

<script type="text/javascript">
    window["appframework"] = new kendo.mobile.Application($("#appcontainer").get(0));
</script> 
```

Kendo 移动框架未正确初始化视图，我收到错误消息：

> 错误：您的 kendo 移动应用程序元素不包含任何具有 data-role="view" 属性集的直接子元素。确保使用正确的容器实例化移动应用程序。

但是，如果我删除 appcontainer 元素并`document.body`用作根元素，一切正常。知道为什么自定义根容器不起作用吗？

# linux - BASH - 将此脚本设置为定时/例行事件的最有效方法？

> ID：16121571
> 
> 赞同：0
> 
> 时间：2013-04-20T14:43:42.310
> 
> 标签：linux, bash, gnu

我最近开始了一个简单的项目，只是为了帮助我更好地学习 BASH 脚本语言。无论如何，这个脚本被设置为以给定的时间间隔交替/旋转用户的桌面背景/壁纸。

鉴于这项任务很可能每 30 分钟到 1 小时完成一次，我应该如何去做。30 分钟/1 小时的计时器会非常低效吗？或者，cronjobs 可以为我做得更好吗？

另外，我怎样才能让这个脚本在后台运行，这样终端窗口并不总是需要打开？

如果可以的话，您能否在语法中提供某种想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:09:29.843

这将是一个适合的工作`cron`。`cron`会负责定期调用脚本。当脚本应该运行和管理在后台运行的脚本时，您不必担心脚本。

在后台运行会很浪费，因为脚本不需要做太多事情 - 只需更改当前桌面设置即可。通常，脚本只需要一小部分时间即可完成任务。

`cron`条目有六个字段-：

```
 mins hours day  month day-of-week path_to_command
 0-59 0-23  1-31 1-12      0-6      command
days of the week start on Sunday. 0=Sunday, 1=Monday etc. 
```

`cron`条目以在所有日期和月份中每小时运行一次脚本-：

```
0 * * * * /path/change_wallpaper.sh 
```

要列出您当前的`cron`工作，请键入

```
 crontab -l 
```

编辑您的 cron 作业并添加新的 cron 条目：

```
 crontab -e 
```

检查新设置是否到位 -：

```
 crontab -l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:07:36.777

> 另外，我怎样才能让这个脚本在后台运行，这样终端窗口并不总是需要打开？

那将是一个[守护进程](https://en.wikipedia.org/wiki/Daemon_%28computing%29)。而且没有必要自己写。[如果你想要pidfile](https://stackoverflow.com/questions/8296170/what-is-a-pid-file-and-what-does-it-contain)，在 bash 中有点乏味， `start`| `stop`| `restart`等等。只需添加一个新的 cronjob，它会每`n`分钟执行一次你的脚本。

**编辑你的 cronjobs**

```
crontab -e 
```

**每 30 分钟执行一次脚本：（**与 不同`30`，它会每隔 30 分钟执行一次`hh:30`！）

```
*/30 * * * * /path/to/your/script 
```

**重启 cron。如何取决于发行版，这里是 Ubuntu：**

```
service cron restart 
```

**列出 cronjobs：**

```
crontab -l 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:25:43.820

我会使用以下 crontab 亲自运行脚本：

```
0 * * * * $HOME/changewallpaper.sh 
```

您可以使用此命令作为用户安装

```
crontab -e 
```

其他解决方案包括从文件 ~/.xprofile 运行守护程序脚本

欲了解更多信息，请参阅

```
man crontab
man 5 crontab 
```

另请查看此项目[Variety](http://peterlevi.com/variety/)。

# android - 无法使用 GCM 在设备上接收消息

> ID：16121573
> 
> 赞同：3
> 
> 时间：2013-04-20T14:43:51.003
> 
> 标签：android, google-cloud-messaging

我已经按照谷歌关于启动 gcm 服务器和客户端的说明进行操作。我的问题是虽然我从服务器获得了成功的 gcm：

> MulticastResult(multicast_id=8287827393174436535,total=1,success=1,failure=0,canonical_ids=0,results: [[ messageId=0:1366468335181772%8e1522ac00000031 ]]

我看不到在客户端接收消息的任何动作 - 未调用 onMessage()。据我所知，客户端 ID 和服务器 ID 都是正确的。

我将不胜感激任何帮助... :)

**服务器端代码：**

```
try {

Sender sender = new Sender(API_KEY);
Message message = new Message.Builder().collapseKey("1")
        .timeToLive(3)
        .delayWhileIdle(true)
        .addData("message",
                "this text will be seen in notification bar!!").build();

ArrayList<String> devices = new ArrayList<String>();

devices.add(DEVICE_ID1); 
//devices.add(DEVICE_ID2);

MulticastResult result = sender.send(message, devices, 2);
//Result result = sender.send(message, DEVICE_ID1, 2);
System.out.println(result.toString());
if (result.getResults() != null) {
    int canonicalRegId = result.getCanonicalIds();
    if (canonicalRegId != 0) {
    }
} else {
    int error = result.getFailure();
    System.out.println(error);
}
} catch (Exception e) {
    // TODO: handle exception
} 
```

**客户代码：** **注册：**

```
GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, SENDER_ID); // Note: get the sender id from configuration.
          String regIdString = GCMRegistrar.getRegistrationId(this);
          Log.v(TAG, "RegisterId, regId: " + regIdString);
        } else {

          Log.v(TAG, "Already registered, regId: " + regId);
        } 
```

**和 gcmIntentServiceCreated （部分）：**

```
public class GCMIntentService extends GCMBaseIntentService {
public GCMIntentService(){
        super(SENDER_ID);       
    }
@Override
    protected void onMessage(Context context, Intent intent) {
         Log.i("Registration", "Got a message!");
             Log.i("Registration", context.toString() + " " + intent.toString());
    }
...
} 
```

**客户清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <permission android:protectionLevel="signature" android:name="com.example.myapp.permission.C2D_MESSAGE"></permission>
    <uses-permission android:name="com.example.myapp.permission.C2D_MESSAGE"/>
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.myapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" 
            android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example.myapp" />
          </intent-filter>
        </receiver>
        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:24:56.320

为了最大限度地提高您收到消息的机会，我不会将 time_to_live 设置为仅 3 秒。我将完全省略此参数，以便它采用默认值 4 周。我还将 delay_while 设置为 false，以便电话即使在空闲时也能收到消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:47:42.857

好吧，您的消息肯定会发送到您的设备，因为 gcm 发送的成功状态为 1。尝试检查您的应用程序的 GCMReceiver 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:06:11.790

在 onMessage 方法中更改以下代码：

```
Log.i("Registration", "Got a message!");
             Log.i("Registration", context.toString() + " " + intent.toString()); 
```

对此：

```
String message=intent.getStringExtra("message"); 
Log.w("The message received is", message); 
```

希望这有帮助

# django - 我接下来的调试步骤是什么？InternalError：当前事务被中止，命令被忽略直到事务块结束

> ID：16121574
> 
> 赞同：2
> 
> 时间：2013-04-20T14:43:57.397
> 
> 标签：django, postgresql, django-models, django-views

更新：问题不在于之前的事务，它是因为数据库没有正确同步/迁移而发生的。

我最近将我的本地数据库切换到 Postgres，现在我得到了一个 InternalError。

我从[这个问题](https://stackoverflow.com/questions/2979369/databaseerror-current-transaction-is-aborted-commands-ignored-until-end-of-tra)中了解到，问题可能源于之前的交易未正确执行：

> “当查询产生错误并且您尝试运行另一个查询而不首先回滚事务时，这就是 postgres 所做的。”

但是，从下面的日志来看，第一个查询似乎`DEBUG (0.0001)`执行得很好（我还通过 Django DB Shell 测试了这个确切的查询）：

```
DEBUG (0.001) SELECT "django_site"."id", "django_site"."domain", "django_site"."name" 
FROM "django_site" WHERE "django_site"."id" = 12 ; args=(12,) 
```

## 完整的 SQL 日志

```
DEBUG (0.001) SELECT "django_site"."id", "django_site"."domain", "django_site"."name" FROM "django_site" WHERE "django_site"."id" = 12 ; args=(12,)
DEBUG (0.003) INSERT INTO "application_app" ("applied_date", "fname", "lname", 
    "email_address", "phone_number", "skype_id", "applied_track", "college1",       
    "field_of_study1", "graduation_month1", "graduation_year1", "degree1",
    "degree_other1", "working_during_program", "explain_working_during_program", 
    "sib_goal", "twitter_link", "linkedin_link", "other_social_link1",
    "other_social_link2", "other_social_link3", "applied_class", "applied_location",
    "referral", "colossal_failure", "next_week_year_10year", "you_created",
    "your_inspiration", "dev_years_of_exp", "dev_fav_lang", "dev_fav_lang_why",
    "dev_link_youve_built", "dev_link_github", "dev_fav_resource", "prod_cool_prod",     
    "prod_fav_designer", "prod_portfolio", "prod_bad_design", "prod_link_dribble", 
    "mark_ind_trend", "mark_email_to_coworkers", "mark_keep_em_happy",
    "mark_article_or_blog", "sales_why_you", "sales_convince_restaurant",
    "sales_hardest_door", "sales_sale_within_the_year", "housing_needed",
    "program_payment", "any_last_requests") VALUES ('2013-04-20 13:22:06.565691+00:00',
    'Brian', 'Dant', 'test@gmail.com', '', '', 'MAR', '', '', 1, NULL, '', '', false,   
    '', 'GN', '', 'http://linkedin.com/', '', '', '', 'NYCSUM13', '', 'test', 'test',
    'test', 'test', 'test', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 
    '', '', '', '', false, 'UF', 'test') RETURNING "application_app"."id"; args=(u'2013-04-20 13:22:06.565691+00:00',
    u'Brian', u'Dant', u'test@gmail.com', u'', u'', u'MAR', u'', u'', 1, None, '', u'', 
    False, u'', u'GN', u'', u'http://linkedin.com/', u'', u'', '', u'NYCSUM13', '', 
    u'test', u'test', u'test', u'test', u'test', '', '', u'', u'', u'', u'', u'', '', 
    u'', u'', u'', u'', u'', u'', u'', u'', u'', u'', u'', False, u'UF', u'test')
ERROR Internal Server Error: /
Traceback (most recent call last):
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/Users/chaz/dev/projects/startupinstitute.com/apps/application/views.py", line 22, in application
    new_app = f.save()
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/forms/models.py", line 364, in save
    fail_message, commit, construct=False)
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/forms/models.py", line 86, in save_instance
    instance.save()
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/db/models/base.py", line 551, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/db/models/manager.py", line 203, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/db/models/query.py", line 1593, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 912, in execute_sql
    cursor.execute(sql, params)
  File "/Users/chaz/dev/envs/startupinstitute.com/lib/python2.7/site-packages/debug_toolbar/utils/tracking/db.py", line 153, in execute
    'iso_level': conn.isolation_level,
InternalError: current transaction is aborted, commands ignored until end of transaction block

[20/Apr/2013 08:22:06] "POST / HTTP/1.1" 500 413131
DEBUG (0.002) SELECT "django_site"."id", "django_site"."domain", "django_site"."name" FROM "django_site" WHERE "django_site"."id" = 12 ; args=(12,)
WARNING Not Found: /favicon.ico 
```

## 视图.py：

```
def application(request):
    if request.method == 'POST':
        f = forms.AppForm(request.POST)
        selected_track = request.POST['applied_track']
        if f.is_valid():
            new_app = f.save() 
            new_app.save() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:10:08.963

问题是我的数据库没有正确迁移。显然，这个错误可能来自（至少）a）先前的事务，或者 b）数据库没有被南正确同步。

# javascript - 数组中所有对象之间的javascript函数共享

> ID：16121575
> 
> 赞同：7
> 
> 时间：2013-04-20T14:44:02.183
> 
> 标签：javascript

我正在尝试将函数添加到对象数组中，每个对象都可以访问该函数，但不需要单独将其添加到每个对象中。

让我给你一个简短的例子。

假设我有一个包含相似对象的数组，每个对象都有一个属性 x 和一个属性 y：

```
var objects = [{x:1, y:2},
               {x:0, y:5},
               {x:3, y:14}
              ]; 
```

我想计算任何对象`x`的总和。`y`

**第一种方法：**

为了计算给定对象的总和，可以将此对象传递给预定义的函数，如下所示：

```
function xySum1(o) {return o.x + o.y;}

objects[0].x       //--> returns 1
objects[0].y       //--> returns 2
xySum1(objects[0]) //--> returns 3 
```

这是非常丑陋和不令人满意的，因为访问`x`and`y`属性的方式不同。此外，我的代码位于不同的位置，并且该函数`xySum1`不容易识别为被创建以作用于数组中的对象。

**第二种方法：**

可以循环遍历数组并将函数作为属性添加到每个对象：

```
for (var i=0; i < objects.length; i++) {
    objects[i].xySum2 = function() {return this.x + this.y;};
} 
```

现在，总和通过以下方式获得

```
objects[0].x        //--> returns 1
objects[0].y        //--> returns 2
objects[0].xySum2() //--> returns 3 
```

这要好得多。

*问题*

然而，这种方法存在问题。首先，当我向数组添加一个新元素时

```
objects.push({x:5,y:21}); 
```

那么在函数被添加到对象之前无法计算总和

```
objects[3].xySum2() //-->TypeError 
```

另一个问题是我有很多对象，还有很多要添加到它们的功能。将每个函数单独添加到每个对象似乎浪费了良好的内存空间。

有没有办法更有效地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T14:50:38.150

定义一个类：

```
function MyObject(x, y) {
    this.x = x;
    this.y = y;
}
MyObject.prototype = {
    xySum2: function() {
        return this.x + this.y;
    }, x: 0, y: 0
}; 
```

然后你可以这样做：

```
var objects = [
    new MyObject(1, 2),
    new MyObject(0, 5),
    new MyObject(3, 14)
];
objects[0].xySum2(); // 3

objects.push(new MyObject(5, 21));
objects[3].xySum2(); // 26 
```

或者，这就是 Bergi 在他的评论中可能想说的：

```
objects.xySum = function(index) {
    return this[index].x + this[index].y;
}; 
```

这种方法有点“脏”，但内存消耗也更少。

# php - 如何从 mouseenter 函数获取 div 的 id？

> ID：16121580
> 
> 赞同：0
> 
> 时间：2013-04-20T14:44:18.353
> 
> 标签：php, javascript, jquery, html

我需要在这个 jquery 代码中获取 productbox div 的 id。我尝试了 $this.attr('id) 但结果是 object object 或 undefined。我怎样才能获取 productbox div 的 id？提前致谢

Javascript：

```
$('body').on('mouseenter', 'div.productbox', function() 
{
    buttonDiv = $(this).children('div.roll');
    myTimeout = setTimeout(function() 
    {
        Divid = ?;
        buttonDiv.toggle();
    }, 500);
});

$('body').on('mouseleave', 'div.productbox', function() 
{
    buttonDiv.hide();
    clearTimeout(myTimeout);
});

$('body').on('hover', 'div.productbox', function() 
{
    var buttonDiv = $(this).children('div.roll1');
    buttonDiv.toggle();
}); 
```

HTML：

```
<div id="40" class="productbox">
    <span class="new">Yeni</span>
    <div class="roll" style="display: none;">
        <input type="button" value="139"> Like <input type="button" value="34"> Comment
    </div>
    <div class="productpicture" onclick="rload(40)">
        <img style="margin:auto; width:180px;overflow:hidden;display:block"  src="pictures/40.jpg">
    </div>
    <div class="ps">
        <div class="productname">Giysi</div>
        <div class="companyname" onclick="go('2');">Koton</div>
        <div class="price">9.99 TL</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:58:45.283

您可以像这样利用关闭：

```
<script type="text/javascript">
    $('body').on('mouseenter', 'div.productbox', function()
    {
        var $productBox = $( this );
        buttonDiv = $productBox.children('div.roll');
        myTimeout = setTimeout(function ()
        {
            Divid = $productBox.attr('id');
            buttonDiv.toggle();
        }, 500);
    });
    $('body').on('mouseleave', 'div.productbox', function ()
    {
        buttonDiv.hide();
        clearTimeout(myTimeout);
    });
    $('body').on('hover', 'div.productbox', function ()
    {
        var buttonDiv = $(this).children('div.roll1');
        buttonDiv.toggle();
    });
</script>

<div id="40" class="productbox">
    <span class="new">Yeni</span>
    <div class="roll" style="display: none;">
        <input type="button" value="139">
        Like
        <input type="button" value="34">
        Comment
    </div>
    <div class="productpicture" onclick="rload(40)">
        <img style="margin:auto; width:180px;overflow:hidden;display:block"  src="pictures/40.jpg">
    </div>
    <div class="ps">
        <div class="productname">Giysi</div>
        <div class="companyname" onclick="go('2');">Koton</div>
        <div class="price">9.99 TL</div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:55:52.200

你需要这样做：

```
$('body').on('mouseenter', 'div.productbox', function() {
    myTimeout = setTimeout((function(self) {
        return function() {
            buttonDiv = $(self).children('div.roll');
            Divid= $(self).attr("id");
            console.log(Divid);
            buttonDiv.toggle();
        }
    })(this), 500);
}); 
```

检查 JSFiddle 以获得完整的工作代码：http: [//jsfiddle.net/kBRyu/2/](http://jsfiddle.net/kBRyu/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:00:39.037

您得到“未定义”等的原因是因为您实际上是在请求窗口获取其 ID。

您需要做的是为 div 声明一个局部变量，然后在超时内使用该变量来获取 ID。

```
 $('body').on('mouseenter', 'div.productbox', function() {
             var $this = $(this);
             var buttonDiv= $this.children('div.roll');
             var myTimeout = setTimeout(function() {
                 var Divid= $this.attr('id');
                 buttonDiv.toggle();
             }, 500);
         }); 
```

# angularjs - AngularJS - 自定义指令：选择控件 - 过滤器

> ID：16121584
> 
> 赞同：1
> 
> 时间：2013-04-20T14:44:29.930
> 
> 标签：angularjs

**我看到了一个自定义选择控制指令的 jsfiddle 示例：** [http://jsfiddle.net/marco_m_alves/rjbMj/]

```
 myApp.directive('nameValueSelect', function() {
    return {
    restrict: "E",
    scope: {
        entry: "=",
        field: "@",
        options: "=",
        onInputChange: "&"
    },
    controller: function($scope) {

        $scope.onChange = function() {
            console.log("selected changed");
            $scope.entry.type = $scope.option.value;
            $scope.onInputChange();
        };

        var getItemForValue = function(value) {
            var item = null;
            $scope.options.forEach(function(_option) {
                if (_option.value == value) {
                    item = _option;
                }
            });
            return item;
        };

        $scope.$watch("entry", function() {
            console.log("entry changed");
            $scope.option = getItemForValue($scope.entry[$scope.field]);
        }, true);

    },
    template: '<select ng-model="option" ng-options="o.name for o in options" ng-change="onChange()">'

};}); 
```

**以及相应的 HTML：**

```
 <name-value-select entry="entry" field="type" options="types" on-input-change="onInputChange()"></name-value-select> 
```

**我的问题是：**

如果我有一个或多个过滤器，我将如何将它们用于该指令？我尝试了各种方法来修改指令中的 ng-options 以包含过滤器，但都无济于事。有任何想法吗？

**这是我想实现的两个过滤器：**

| filterByType: '前面' | orderBy:'名称'"

自然，我不希望它们硬编码到指令中。

**澄清：**

我不希望按名称过滤选择值，而是希望显示选择值 (1)，仅当它们具有“Front”的“filterByType”属性值，然后 (2) 按字母顺序过滤它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:56:15.583

将过滤器添加到选项属性中的表达式（在 HTML 中）：

[http://plnkr.co/edit/o51eqq6XjIfAjvdtrz96?p=preview](http://plnkr.co/edit/o51eqq6XjIfAjvdtrz96?p=preview)

# c# - 时间：2018-01-10 标签：c#getextractStrings from object[,] excel source

> ID：16121586
> 
> 赞同：2
> 
> 时间：2013-04-20T14:44:33.243
> 
> 标签：c#, string, range, import-from-excel

我正在寻找一种解析 excel 文件的方法，以便将一些数据导入我的数据库表中。在搜索时，我得到了这个答案[Efficient method to enumerate methods in an Excel workbook using c#](https://stackoverflow.com/questions/261374/efficient-method-to-enumerate-cells-in-an-excel-workbook-using-c-sharp)但未能使其正常工作。

这是我的代码：

```
private void ImportFromSheet(Worksheet worksheet)
    {
        Object[,] rangeData = (System.Object[,])worksheet.UsedRange.Cells.get_Value(Type.Missing);            

        if (rangeData != null)
        {
            int iRowMax = rangeData.GetUpperBound(0);
            int iColMax = rangeData.GetUpperBound(1);

            for (int iRow = 2; iRow < iRowMax; iRow++) // skipping headers
            {
                Import( rangeData, iRow );
            } 
        }
    } 
```

如您所见，这直接取自我之前提到的答案。

在我的导入功能中，我有很多有趣的事情：

```
string var = Convert.ToString(rangeData[iRow, index]) ?? string.Empty; 
```

因此，如果我在 Visual Studio 中检查 rangeData[iRow, index] 值，我会得到正确的数据，但在某些时候 Convert.ToString 无法为我提供一个分配给 var 的字符串（这似乎根本没有分配）。

此外，我尝试了这段代码：

```
for (int iCol = 1; iCol < iColMax; iCol++)
{
    string key = Convert.ToString(rangeData[1, iCol]) ?? "empty";
    string value = Convert.ToString(rangeData[2, iCol]) ?? "empty";
    Response.Write(iCol + " -> " + key + " : " + value + "<br />");
} 
```

它工作得很好。

所以，请你看看我错过了什么？

谢谢您的帮助 ！

# c# - C# - 在二级关注者中排除已经关注的用户

> ID：16121588
> 
> 赞同：0
> 
> 时间：2013-04-20T14:45:04.283
> 
> 标签：c#, linq, twitter, where

我想在 Twitter 上找到我没有关注的关注者的关注者。

为此，我有一个名为 Follow 的表，其中包含三个列 ID、Follower_iD 和 Follower_iD

我的代码如下：

```
var userIDs = database.Followings.Where(u => u.Follower_id == MY.Id);

foreach (var userID in userIDs)
{
     var secondUserIDs = database.Followings.Where(u => u.Follower_id == userID.Following_id).Except(userIDs); 
```

尽管我写了 .Except(userIDs) 是为了消除我关注的人，但输出包括我已经关注的记录。

为了更好地解释我的问题，这里是一个例子：

假设我的 id 是 10。

并且在数据库中有记录：

```
follower_id      following_id
    10                11
    10                12
    10                13
    10                14
    14                12
    14                13
    14                15 
```

所以问题是，由于我同时关注 12 和 13，因此无需在查询中返回 (14,12) 和 (14, 13) 对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:03:10.510

`Except`使用 set 来确定不应返回的元素，因此您需要重写`Equals`和`GetHashCode`方法以使其工作。但我仍然认为它不适用于 linq to twitter。

但是，我会选择以下内容：

```
var userIDs = database.Followings.Where(u => u.Follower_id == MY.Id)
                                 .Select(u => u.Following_id)
                                 .ToList(); // ToList(), to make it happen only once

foreach (var userID in userIDs)
{
     var secondUserIDs = database.Followings.Where(u => u.Follower_id == userID)
                                            .Select(u => u.Following_id)
                                            .Except(userIDs).;
} 
```

不同之处在于，您在查询中只使用 ID，而不是整个对象。

**更新**

您可以尝试使用无循环`Contains()`获取所有内容：`foreach`

```
var secondUserIDs = database.Followings.Where(u => userIDs.Contains(u.Follower_id) && !userIDs.Contains(u.Following_id))
                                       .Select(u => u.Following_id); 
```

# c++ - 基于堆栈的迷宫算法背后的逻辑

> ID：16121593
> 
> 赞同：3
> 
> 时间：2013-04-20T14:45:20.743
> 
> 标签：c++, algorithm, depth-first-search, maze

我对 C++ 编程相当陌生，我正在研究迷宫求解算法。我需要使用显式堆栈来跟踪完成的移动，而不是递归。

基本上我负责“求解器”算法，我可以检查移动是否可用或被阻止并执行它，或者我可以撤消移动。移动是左，右和向前。已经有代码负责绘制和更新迷宫。

我可以使用的只是一些帮助理解穿越迷宫的基本算法。我已经看过很多不同的程序来做这件事，但我似乎无法弄清楚。我正在解决的迷宫是随机生成的，没有循环。

这是我无法理解的：假设我有一段直的墙，但也有一根树枝从墙上伸出来。假设我决定沿着另一个分支走下去，但最终它会导致死胡同。我已经把我做过的所有动作都推到了堆栈上。基本上，我怎么知道我需要从堆栈中弹出多少步才能知道我回到了原来的交叉点，所以我可以选择另一个分支而不是被阻塞的分支？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T14:49:33.927

> 以下是我无法解决的问题：假设我决定沿着另一个分支走下去，但最终它会导致死胡同。我已经把我做过的所有动作都推到了堆栈上。基本上，我怎么知道我需要从堆栈中弹出多少步才能知道我回到了原来的交叉点，所以我可以选择另一个分支而不是被阻塞的分支？

您需要做的就是始终按照预定义的顺序进行选择。

> 移动是左，右和向前。

如果你总是按照这个顺序做出这些选择，那么当你回溯时，你就会知道你已经做了什么。

**你回溯的**每一步，再次检查这些动作。**如果您撤消*正确*的选择，您会知道您已经尝试过*left*和*right*，但还没有尝试*forward*。**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T14:53:59.900

首先，从起始位置添加所有可能的移动。然后，只需遵循以下算法：

在每次迭代中，尝试从堆栈中弹出一个帧。如果堆栈是空的，你已经尝试了所有可能的动作。

现在，看看你从堆栈中弹出的位置。这是你现在的位置。

将所有从您弹出的位置导致未探索位置的移动添加到堆栈中。如果其中任何一个是目标位置，那么您就完成了。

其余的将自行处理。考虑一下，在纸上尝试几个案例，你会看到的。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T14:55:27.763

您没有很多解决方案：基本上，探索没有循环的迷宫就像在**覆盖树上进行***深度优先搜索*，每个交叉点都是一个节点。

 **您可以随时构建树，并使用该信息遍历它，但这将是乏味且*效率不高*的。

深度优先搜索的一种常见方法是将所有要检查的节点压入堆栈，拉出一个，然后再次压入，直到达到目标。但是你会得到很多节点堆叠起来，一旦你找到了目标节点，你就无法使用堆栈来知道你遵循了哪条路径，这意味着你需要将这些信息存储在其他地方。

最好保留堆栈解决方案并**标记堆栈中的节点**以指示分支，以及已*探索分支的***哪个方向**（即哪个子树） （或留下哪些路径）。如果您始终以**相同的顺序**进行探索，则该标签可以只是一个数字：

 ****   0 为左
*   1 前
*   2 右
*   3 用于回溯

或者更好的是枚举。

当发现死胡同时，只需展开堆栈直到找到其中一个节点，然后尝试新的方向。如果所有方向都已尝试，换句话说，如果没有方向，请再次放松。

```
enum Branch {
   LEFT,
   FORWARD,
   RIGHT,
   BACKTRACK
};

struct BacktrackException{
};

template <typename MazeMove>
struct StackNode {
    MazeMove move;
    Branch branch;
    StackNode(MazeMove m): move(m), branch(LEFT) {}
    MazeMove nextBranch(){
        switch(branch){
            case LEFT:
                if (move.can_left()){
                    branch = FORWARD;
                    return move.left();
                }
            case FORWARD:
                if (move.can_forward()){
                    branch = RIGHT;
                    return move.forward();
                }
            case RIGHT:
                if (move.can_right()){
                    branch = BACKTRACK;
                    return move.right();
                }
            default:
                throw BacktrackException();
        }
    }
}; 
```

上面的代码为与堆栈一起使用的可能的“MazeMove”类提供了一个包装器，它跟踪尝试的方向。nextBranch 方法返回下一个可能的移动，或抛出异常。

好处是你的筹码不会被未经尝试的动作破坏。`StackNode`每次到达新位置时，您都按下 a ，并在其选项全部测试完后将其平仓。当您到达迷宫出口时，您的堆栈仅包含所需的移动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T14:54:35.697

> 基本上，我怎么知道我需要从堆栈中弹出多少步才能知道我回到了原来的交叉点，所以我可以选择另一个分支而不是被阻塞的分支？

你没有——你总是准确地倒退*一步*。然后检查所有（剩余的）备选方案，然后再往前退一步……等等。这称为[回溯](http://en.wikipedia.org/wiki/Backtracking)。

顺便说一句，无论您是否使用递归，这都是相同的。使用递归只会使堆栈隐式，并且堆栈处理是自动的。*******

# c - 如何在 OSX 上针对运行 BusyBox 的路由器编译 C 文件？

> ID：16121597
> 
> 赞同：1
> 
> 时间：2013-04-20T14:45:40.997
> 
> 标签：c, gcc, cross-compiling, busybox

我可以访问运行 BusyBox 的路由器。如何制作可以在其上运行的 C 文件？我尝试在本地机器上编译它，上传到路由器并尝试执行，但它显然不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:50:26.547

您需要为您的路由器硬件安装工具链，然后使用工具链中的编译器构建您的 C 文件。看看[http://buildroot.uclibc.org](http://buildroot.uclibc.org)。您显然不需要整个 linux 内核环境，但可能更容易完成工具链。

# wpf - WPF 自定义控件属性设置器

> ID：16121605
> 
> 赞同：1
> 
> 时间：2013-04-20T14:46:30.040
> 
> 标签：wpf, xaml, custom-controls

我有一个非常简单的基于按钮的控件，它显示一个椭圆，其颜色取自名为“Brush”的自定义依赖控件。

模板以正确的颜色显示椭圆，但触发器中的设置器无法识别“画笔”属性（错误在下面的 XAML 文件中突出显示）。

如何访问设置器中的“画笔”属性，以便我可以在 MouseOver 上更改其值？

XAML：

```
<Button x:Class="WpfTest.EllipseButton"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfTest"
        Style="{DynamicResource localStyle}"
        Name="ellipseButton">

  <Button.Resources>
    <Style x:Key="localStyle"
           TargetType="local:EllipseButton">
      <Style.Setters>
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate>
              <Grid>
                <Ellipse Fill="{Binding ElementName=ellipseButton, Path=Brush}" />
              </Grid>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style.Setters>
      <Style.Triggers>
        <Trigger Property="IsMouseOver"
                 Value="True">

          <!-- ERROR HERE: The property "Brush" is not a dependency property. -->
          <Setter Property="Brush"
                  Value="Blue" />
          <!-- ERROR HERE: The "BrushProperty" is not recognized or is not accessible.  -->
          <Setter Property="BrushPropety"
                  Value="Blue" />

        </Trigger>
      </Style.Triggers>
    </Style>
  </Button.Resources>
  <Grid>
  </Grid>
</Button> 
```

代码隐藏：

```
public partial class EllipseButton : Button
{
    public static readonly DependencyProperty BrushProperty = DependencyProperty.Register(
        "Fill",
        typeof(Brush),
        typeof(EllipseButton),
        new FrameworkPropertyMetadata(new SolidColorBrush(Colors.Gray)));

    public Brush Brush
    {
        get
        {
            return (Brush)GetValue(BrushProperty);
        }
        set
        {
            SetValue(BrushProperty, value);
        }
    }

    public EllipseButton()
    {
        InitializeComponent();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:15:20.600

您的属性称为“填充”而不是“刷”：

```
public static readonly DependencyProperty BrushProperty = DependencyProperty.Register(
        "Fill", //Error is here
        typeof(Brush),
        typeof(EllipseButton),
        new FrameworkPropertyMetadata(new SolidColorBrush(Colors.Gray))); 
```

将其更改为：

```
public static readonly DependencyProperty BrushProperty = DependencyProperty.Register(
        "Brush", 
        typeof(Brush),
        typeof(EllipseButton),
        new FrameworkPropertyMetadata(new SolidColorBrush(Colors.Gray))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T23:27:07.240

好的，需要做几件事：

1) 将依赖属性名称重命名为“Brush”（它被错误地命名为“Fill”） - 感谢 HighCore

2）当控件在代码中使用时，删除设置“画笔”属性 - 本地值覆盖样式中的设置器。

3) 将样式从自定义控件移到更高级别（例如在“Themes\Generic.xaml”下）

4）从样式中删除 x:Key 属性并只保留类型名称（仍然不知道为什么......）

5）将“Brush”属性的默认值添加到样式设置器（再次，不知道为什么......）

固定 EllipseButton.xaml：

```
<Button x:Class="WpfTest.EllipseButton" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
    <Grid/>
</Button> 
```

固定代码隐藏：

```
public partial class EllipseButton
{
    public static readonly DependencyProperty BrushProperty = DependencyProperty.Register(
        "Brush",
        typeof(Brush),
        typeof(EllipseButton),
        new FrameworkPropertyMetadata(null));

    public Brush Brush
    {
        get
        {
            return (Brush)GetValue(BrushProperty);
        }
        set
        {
            SetValue(BrushProperty, value);
        }
    }

    public EllipseButton()
    {
        InitializeComponent();
    }
} 
```

固定样式（Generic.xaml）：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfTest">

    <Style TargetType="local:EllipseButton">
        <Style.Setters>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Grid>
                            <Ellipse Fill="{Binding ElementName=ellipseButton, Path=Brush}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Brush" Value="Pink"/>
        </Style.Setters>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Brush" Value="Red"/>
            </Trigger>
        </Style.Triggers>
    </Style>

</ResourceDictionary> 
```

# vb.net - TransactionScope - 在每次迭代时提交

> ID：16121611
> 
> 赞同：0
> 
> 时间：2013-04-20T14:46:44.260
> 
> 标签：vb.net

请看下面的代码：

```
 Imports System.Transactions
Imports System.Data.SqlClient
Imports System.Web.Configuration

Partial Class _Default
    Inherits System.Web.UI.Page

    Private _ConString As String

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Try
            Dim objDR As SqlDataReader
            _ConString = WebConfigurationManager.ConnectionStrings("TestConnection").ConnectionString
            Dim objCon As New SqlConnection(_ConString)
            Dim objCommand As New SqlCommand
            objCommand.CommandText = "SELECT * FROM Person"
            'Using scope As New TransactionScope()
            objCon.Open()
            Using scope As New TransactionScope()
                objCommand.Connection = objCon
                objDR = objCommand.ExecuteReader
                Do While objDR.Read

                    Dim i As String = objDR("id2")
                    Dim objCommand2 As New SqlCommand
                    objCommand2.Connection = objCon
                    objCommand2.CommandText = "UPDATE Person SET URN=1 WHERE id2 = '" & i & "'"
                    objCommand2.ExecuteNonQuery() 'line 28
                    objCommand2.CommandText = "UPDATE Person SET URN=2 WHERE id2 = '" & i & "'"
                    objCommand2.ExecuteNonQuery() 'line 30
                    objCommand2.CommandText = "UPDATE Person SET URN=3 WHERE id2 = '" & i & "'"
                    objCommand2.ExecuteNonQuery() 'line 32
                Loop
                'scope.Complete() 'line 34
            End Using
            objDR.Close()
        Catch ex As Exception
            Throw
        End Try
    End Sub
End Class 
```

即使 scope.complete 被注释掉了，这三个更新语句也会被执行。我相信这是因为连接是在 TransactionScope 之外打开的。

如果我想循环访问 100 万人来发布这些更新，那么有两种选择：

1）进行所有更新并在最后提交对数据库的更改 2）在每个循环上提交更改 - 然后我必须为每个循环打开一个新连接。

开发人员是否总是选择选项 1？即批量发布更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:27:22.097

从阅读文档看来，事务范围需要使用块（缺少）来包装连接。所以打开范围，打开连接，执行命令，提交范围。

[http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

Connections、Commands、TransactionScope 和 Readers 都实现了 IDisposable 并需要一个 using 块（除非您反编译代码并验证 IDisposable 中的活动是无意义的，就像它们用于 DataSet、DataTable 和 Bulk Insert 一样）

以及 Neolisk 所说的一切。批量更新，除非您有一个独特的场景，即部分更新会成为某种灾难。（更可能的是，大规模事务将是另一种更严重的灾难——日志文件被填满，或者数据库引擎在消化一个巨大的事务时疯狂地检查了很长时间的午餐）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:50:34.907

1.  您不应该一次提交所有更改。有 100 万次更新，撤消日志会很大，您可能会遇到锁定问题，整个操作可能会花费不合理的时间。

2.  批量发布更新是个好主意，只需记住将批量大小设置为合理的值。例如，1000 条记录。您可以让您的更新并行运行 - 它应该更快。如果您可以将更新组织成逻辑部分，例如按部门的人员 - 请这样做，从长远来看，它将提高代码的可维护性。

另外，考虑使用参数。

# php - 如何使用zend框架在用户帐户页面中显示用户头像/图像？

> ID：16121613
> 
> 赞同：0
> 
> 时间：2013-04-20T14:46:47.783
> 
> 标签：php, zend-framework, model-view-controller

图片由用户上传并存储在 public/users 文件夹中。视图脚本如下：

```
<?php echo $this->render("includes/header.phtml"); ?>
<div id="header">
<div class="w">
    <div id="logo"><a href="/">SyncFan.com</a></div>
    <div id="mainmenu">
        <ul>
            <li class="selected"><a href="/account/accountmanager"><span>My Account</span></a></li>             
            <li onMouseMove="$('.submenu',this).show();$(this).addClass('hover');"  onMouseOut="$('.submenu',this).hide();$(this).removeClass('hover');"><a href="/artist/list"><span>View Artists</span></a></li>
            <li onMouseMove="$('.submenu',this).show();$(this).addClass('hover');"  onMouseOut="$('.submenu',this).hide();$(this).removeClass('hover');"><a href="/account/update"><span>Update Account</span></a></li>
            <li onMouseMove="$('.submenu',this).show();$(this).addClass('hover');"  onMouseOut="$('.submenu',this).hide();$(this).removeClass('hover');">
                <a href="/account/logout"><span>Log Out</span></a>
            </li>
        </ul>
    </div>
</div>
</div>

<div id="content" class="w">
<h2>SyncFan My Page - <?php $this->session = new Zend_Session_Namespace('login');echo $this->escape($this->session->username); ?></h2>
<!--- MAIN CONTAINER -->
<table class="table">
<tr><td valign="top">
<!--PROFILE DATA-->
<table class="table ">
<tr><td>Username: <?php echo $this->session->username; ?></td></tr>
<tr><td><img src="<?php echo '../public/users/'.$this->avatar; ?>"/></td></tr>
<tr><td><?php echo $this->aboutme; ?></td></tr>
<tr><td>Date Joined: <?php echo $this->session->dateJoined?></td></tr>
</table>
</td>
<td valign="top">
<!--FAVORITE ARTIST LIST-->
<table class="table table-hover">
<?php if($this->artists){?>
<tr align="center">
<td><b>Artist Name</b></td>
<td><b>Date Became A Fan</b></td>
</tr>
<?php foreach($this->artists as $artist){?>
<tr>
<td><a href='/artist/video-list?artist=<?php echo
urlencode($artist['artist_name'])?>'>
<?php echo $this->escape($artist['artist_name']); ?></a></td>
<td><?php echo $this->escape($artist['date_became_fan']); ?></td></tr>
<?php }
}else{
?>
<tr><td>You currently have no favorite artists.</td></tr>
<?php }?>
</table>
</td>
</tr>

</table>
</div>
<?php echo $this->render("includes/footer.phtml"); ?> 
```

在帐户视图中。HTML 语句的输出

```
<img src="<?php echo '../public/users/'.$this->avatar; ?>"/> 
```

是空的。我能够获取上传图像的详细信息，但无法将其呈现给用户帐户。

```
<?php var_dump($this->avatar); ?> 
```

上述语句的输出是字符串'filename.jpg'（长度=文件长度）。

我也检查了 .htaccess 文件，但找不到任何错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:59:49.757

```
<img src"<?php echo '/users/'.$this->avatar;?>"/> 
```

浏览器无法访问文档根目录之外的任何内容，大概是`/public`，所以路径应该是相对的。

**编辑**：所以您的模板中的行是：

```
<tr><td><img src="<?php echo '../public/users/'.$this->avatar; ?>"/></td></tr> 
```

如果您查看生成的 HTML 页面的源代码，您应该得到：

```
<tr><td><img src="../public/users/filename.jpg"/></td></tr> 
```

（这不起作用）。根据我上面的建议，您模板中的行实际上应该是：

```
<tr><td><img src"<?php echo '/users/'.$this->avatar;?>"/></td></tr> 
```

这应该给你：

```
<tr><td><img src"/users/filename.jpg"/></td></tr> 
```

如果你真的得到：

```
<tr><td><img src""/></td></tr> 
```

那么你错过了“回声”。如果你得到：

```
<tr><td><img src"/users/"/></td></tr> 
```

然后`$this->avatar`实际上并不像您说的那样包含 filename.jpg 。

如果*整个页面*都是空白的，那么实际上会生成一个 PHP 错误，但您已`display_errors`关闭（检查您的 Web 服务器错误日志）。在不确切知道你得到什么的情况下，我所能做的就是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:20:36.603

```
<img src="<?php echo '/users/'.$this->avatar; ?>"/> 
```

.htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# wpf - UserControl 显示 16x16 或 32x32 图像

> ID：16121614
> 
> 赞同：0
> 
> 时间：2013-04-20T14:46:48.457
> 
> 标签：wpf, binding, size

我有一个控件，可以从多个 PNG 文件中组合出最终图像。根据绑定到控件的项目状态选择各个 png 文件。即覆盖 - 但一切正常。

每个图像文件以 16x16 和 32x32 两种尺寸创建（即像图标）

从 VS 设计器（或代码）中，我希望用户能够指定他们想要 16x16 还是 32x32 版本。所以我添加了一个依赖属性 ImgSize。我已将其设为 int，因此可以将其设置为 16 或 32。因此，此控件的用户只需 XAML

```
<xyz:thisControl ImgSize="32"/> 
```

并且 DataContext 提供所有绑定细节。

我希望用户控件的宽度和高度自动设置为相应的图像大小。所以像这样绑定是有道理的：

```
<UserControl x:Class="...
    Width="{Binding Path=ImgSize}"
    Height="{Binding Path=ImgSize}" 
```

当这不起作用时，我尝试了所有可能的 RelativeSource 绑定 - 不走运。我是否缺少额外的管道/绑定/事件层？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:22:17.090

为什么不直接使用 UserControl 的内置宽度和高度？

这些属性默认是可绑定的

# java - getResources() java 安卓游戏代码

> ID：16121619
> 
> 赞同：0
> 
> 时间：2013-04-20T14:47:06.123
> 
> 标签：java, android

我一直在尝试在我的 android 游戏上设置颜色，我使用的代码是：

//画板....

```
//Define colours for grid lines
    Paint hilite = new Paint();
    hilite.setColor(getResources().getColor(R.color.game_hilite));
    Paint light = new Paint();
    light.setColor(getResources().getColor(R.color.game_light));
    Paint dark = new Paint();
    dark.setColor(getResources().getColor(R.color.game_dark));`` 
```

我已将 color.xml 代码中的颜色设置为：

```
<resources>
  <color name="game_background">#ffe6f0ff</color>
    <color name="game_hilite">#ffffffff</color>
    <color name="game_light">#64c6d4ef</color>
    <color name="game_dark">#6456648f</color>
    <color name="game_foreground">#ff000000</color>
    <color name="game_selected">#64ff8000</color>
</resources>` 
```

只是似乎看不出哪里出了问题，粗体代码是我似乎遇到问题多标记错误的地方。

我拥有的完整代码部分是：

```
 @Override
        protected void onDraw(Canvas canvas) {
        //Draw the background...
        Paint background = new Paint();
        background.setColor(getResources()
                    .getColor(R.color.game_background));
        canvas.drawRect(0, 0, getWidth(), getHeight(), background);

        //Draw the board
        //Draw the selection
    }

    //Draw the board....
    //Define colours for grid lines
    Paint hilite = new Paint();
    hilite.setColor(getResources().getColor(R.color.game_hilite));
    Paint light = new Paint();
    light.setColor(getResources().getColor(R.color.game_light));
    Paint dark = new Paint();
    dark.setColor(getResources().getColor(R.color.game_dark));

    //Draw the minor grid lines
    Canvas canvas;
    for (int i = 0; i <9; i++) {
        canvas.drawLine(0, i * height, getWidth(), i * height, light);
        canvas.drawLine(0, i * height + 1, getWidth(), i * height + 1, hilite);
        canvas.drawLine(i * width, 0, i * width, getHeight(), light);
        canvas.drawLine(i * width + 1, 0, i * width + 1, getHeight(), hilite);  
    }
    //Draw the major grid lines
    for (int i = 0; i < 9; i++) {
        if (i % 3 != 0)
            continue;
        canvas.drawLine(0, i * height, getWidth(), i * height, dark);
        canvas.drawLine(0, i * height + 1, getWidth(), i * height + 1, hilite);
        canvas.drawLine(i * width, 0, i * width, getHeight(), dark);
        canvas.drawLine(i * width + 1, 0, i * width + 1, getHeight(), hilite);
    } 
```

}

# php - 如何组合多个数组

> ID：16121626
> 
> 赞同：3
> 
> 时间：2013-04-20T14:48:03.890
> 
> 标签：php, arrays

首先关于这个问题的这个[问题](https://stackoverflow.com/questions/16116730/multiple-arrays-insert-value-into-database)。我的问题是我的一个朋友有大约 300 个左右的数组需要插入到数据库中。正如您在我链接的问题中注意到的那样，我得到了数据库部分，我把那部分写下来了。然而，我的问题是我应该如何准确地获取所有数组并将它们组合在一起，以便我可以对数组进行 foreach 并检查一个值是否为数组，如果是，则使用数组名称作为INSERT 查询中的表。

这是我更新的代码：

```
 $colors['Colors_All'] = array("Black","Charcoal"); // Add unique indexes 
        $colors['Colors_Bright_All'] = array("Silver","White"); // Add unique indexes 

        $AllArrays = get_defined_vars(); // Get all defined vars
        $Arrays = array(); // Set a default array

        foreach ($AllArrays as $varName => $value) { // Run through all the variables set in the get_defined_vars
            if(is_array($value) && $varName == 'colors') { // If it is an array and if the array is colors[] then
                $Arrays = array_merge($Arrays, $value); // Merge those arrays into the new array
            }
        } 
```

现在，这将使我能够访问所有数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:01:15.530

干得好：

```
$colors['Colors_All']        = array("Black","Charcoal","Light_Gray","Silver","White","Gold","Bronze","Copper","Platinum","Navy","Royal_Blue","Dodger_Blue","Deep_Sky_Blue","Turquoise","Tiffany_Blue");
$colors['Colors_Bright_All'] = array("Silver","White","Gold","Royal_Blue","Dodger_Blue","Deep_Sky_Blue","Deep_Green","Forest_Green","Bright_Green","Violet");
$colors['Colors_Light_All']  = array("Light_Gray","Silver","White","Gold","Dodger_Blue","Deep_Sky_Blue","Light_Blue","Bright_Green","LightGreen","Light_Green");

// This will store the merged results of each array
$colorVars = array();

// Loop through all of the defined variables
foreach ($colors as $colorKey => $value) {
    // Add the results of this array to the main $colorVars array
    $colorVars = array_merge($colorVars, $value);
} 
```

# android - 为 Netbeans 项目手动进行 Dexing

> ID：16121630
> 
> 赞同：0
> 
> 时间：2013-04-20T14:48:36.623
> 
> 标签：android, netbeans-7, dex

我有一个 NB7 Android 项目。不幸的是，由于堆内存不足，预索引停止。有没有办法从 Android SDK R21 的命令行手动运行 Pre-dexing 以更好地控制内存分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:06:05.587

我对 netbeans 或如何控制其 predexing 行为一无所知，但是从命令行在 jar 上运行 dx 很简单

```
 dx --dex --output=classes.dex blah.jar 
```

或者，因为您需要控制内存选项

```
 dx -JXmx1G --dex --output=classes.dex blah.jar 
```

您可以在以下位置找到 dx`<android-sdk>/platform-tools/dx`

在较新版本的 sdk 上，您可以在以下位置找到 dx

```
<android-sdk>/build-tools/android-<ver>/ 
```

# erlang - Erlang 报 epmd_closed 错误

> ID：16121632
> 
> 赞同：8
> 
> 时间：2013-04-20T14:48:46.420
> 
> 标签：erlang

二郎版本：R16B

操作系统：Fedora17

`erl -name a`并且`erl -sname a`都报告了以下错误：

```
{error_logger,{{2013,4,20},{14,50,20}},"Protocol: ~tp: register/listen error: ~tp~n",["inet_tcp",epmd_close]}
{error_logger,{{2013,4,20},{14,50,20}},crash_report,[[{initial_call,{net_kernel,init,['Argument__1']}},{pid,<0.21.0>},{registered_name,[]},{error_info,{exit,{error,badarg},[{gen_server,init_it,6,[{file,"gen_server.erl"},{line,320}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,239}]}]}},{ancestors,[net_sup,kernel_sup,<0.10.0>]},{messages,[]},{links,[#Port<0.56>,<0.18.0>]},{dictionary,[{longnames,true}]},{trap_exit,true},{status,running},{heap_size,376},{stack_size,27},{reductions,728}],[]]}
{error_logger,{{2013,4,20},{14,50,20}},supervisor_report,[{supervisor,{local,net_sup}},{errorContext,start_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net_kernel},{mfargs,{net_kernel,start_link,[[s,longnames]]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]}]}
{error_logger,{{2013,4,20},{14,50,20}},supervisor_report,[{supervisor,{local,kernel_sup}},{errorContext,start_error},{reason,{shutdown,{failed_to_start_child,net_kernel,{'EXIT',nodistribution}}}},{offender,[{pid,undefined},{name,net_sup},{mfargs,{erl_distribution,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}]}
{error_logger,{{2013,4,20},{14,50,20}},crash_report,[[{initial_call,{application_master,init,['Argument__1','Argument__2','Argument__3','Argument__4']}},{pid,<0.9.0>},{registered_name,[]},{error_info,{exit,{{shutdown,{failed_to_start_child,net_sup,{shutdown,{failed_to_start_child,net_kernel,{'EXIT',nodistribution}}}}},{kernel,start,[normal,[]]}},[{application_master,init,4,[{file,"application_master.erl"},{line,138}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,239}]}]}},{ancestors,[<0.8.0>]},{messages,[{'EXIT',<0.10.0>,normal}]},{links,[<0.8.0>,<0.7.0>]},{dictionary,[]},{trap_exit,true},{status,running},{heap_size,376},{stack_size,27},{reductions,117}],[]]}
{error_logger,{{2013,4,20},{14,50,20}},std_info,[{application,kernel},{exited,{{shutdown,{failed_to_start_child,net_sup,{shutdown,{failed_to_start_child,net_kernel,{'EXIT',nodistribution}}}}},{kernel,start,[normal,[]]}}},{type,permanent}]}
{"Kernel pid terminated",application_controller,"{application_start_failure,kernel,{{shutdown,{failed_to_start_child,net_sup,{shutdown,{failed_to_start_child,net_kernel,{'EXIT',nodistribution}}}}},{kernel,start,[normal,[]]}}}"}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,kernel,{{shutdown,{failed_to_start_child,net_sup,{shutdown,{failed_to_start_child,net_kernel,{'EXIT',nodistribution}}}}},{k 
```

以下是iptables：

```
> iptables --list
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
DROP       icmp --  anywhere             anywhere

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

以下是erl：

```
> erl
Erlang R16B (erts-5.10.1) [source] [smp:8:8] [async-threads:10] [hipe] [kernel-poll:false]

Eshell V5.10.1  (abort with ^G)
1> 
```

它在 Linode VPS 上，以前没问题。我不知道这个问题的原因是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-13T13:37:07.937

可能问题出在您的 iptables 配置上。

默认情况下，Erlang 不允许从非本地地址连接到 epmd。如果我没记错的话，这种行为在新的 Erlang 版本中是真实的。您似乎有与 NAT/MASQUERADING 相关的 iptables 问题 - 您的传出流量被 iptables 伪装成外部 IP 地址（包括来自/到 127.0.0.1 的流量）。

**例子**

伪装所有传出流量

```
-A POSTROUTING -j SNAT --to-source x.x.x.x 
```

这是 'iptables -t nat --list' 的输出

```
Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination
SNAT       all  --  anywhere             anywhere             to:x.x.x.x 
```

检查'erl -sname a' - 不起作用，完全相同的错误

现在，伪装除定向到 127.0.0.0/8 的所有传出流量

```
-A POSTROUTING ! -d 127.0.0.0/8 -j SNAT --to-source x.x.x.x 
```

注意加了' **！-d 127.0.0.0/8** '

再次检查 iptables

```
#iptables -t nat --list
Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination
SNAT       all  --  anywhere            !127.0.0.0/8          to:x.x.x.x 
```

并再次检查erlang：

```
#erl -sname a
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:2:2] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(a@akitaki)1> q().
ok
(a@akitaki)2> % 
```

它完美地工作。

因此，请尝试检查您的 iptables/firewall NAT/MASQUERADING 配置。

**更新**

要实现 NAT/MASQUERADING，您可以使用以下 iptables 规则之一：

```
-A POSTROUTING ! -d 127.0.0.0/8 -j SNAT --to-source x.x.x.x 
```

和

```
-A POSTROUTING ! -d 127.0.0.0/8 -j MASQUERADE 
```

在第一种情况下（“源 NAT”），您应该明确指出您的外部 IP 地址。您可以使用以下命令了解它：

```
#ifconfig

lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> mtu 16384
    options=3<RXCSUM,TXCSUM>
    inet 127.0.0.1 netmask 0xff000000
en1: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
    ether 70:56:81:98:d1:b9
    inet X.X.X.X netmask 0xffffff00 broadcast Y.Y.Y.Y
    media: autoselect
    status: active 
```

inet **XXXX**网络掩码 0xffffff00 广播 YYYY

这里 XXXX 是您的外部 IP 地址，您应该在 '--SNAT xxxx' 命令中指向

在第二种情况下（“伪装”），您没有明确指出您的外部 IP 地址 - 您的服务器会自动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T09:08:39.030

问题与`epmd`无法完成工作有关。其他一切似乎都是该问题的后果。我会先专注于`epmd`并启动它并在 VPS 中工作，然后专注于 Erlang 节点。

出于某种原因，您没有启动 epmd，然后结果整个地方都失败了。

# c# - 与 FFmpeg 具有相同功能的用于音频重采样的 C# 库

> ID：16121635
> 
> 赞同：3
> 
> 时间：2013-04-20T14:48:50.463
> 
> 标签：c#, c++, c, ffmpeg, naudio

我必须使用纯 C# 解决方案来重新采样音频，这可以产生与 FFmpeg 的音频采样完全相同的结果。

**FFmpeg**首先构建某种多相滤波器组，然后将其用于采样过程（抱歉措辞含糊，但我对这个主题不太熟悉）。根据这个简短的[文档](http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/resample2_8c.html#68169c9ed4e66f474a7d90cd224bf567)，初始化可以这样定制：

```
AVResampleContext* av_resample_init(
    int     out_rate,
    int     in_rate,
    int     filter_length,
    int     log2_phase_count,
    int     linear,
    double  cutoff   
    ) 
```

参数是：

*   **out_rate** : 输出采样率
*   **in_rate** : 输入采样率
*   **filter_length** : 滤波器组中每个 FIR 滤波器相对于截止频率的长度
*   **log2_phase_count**：多相滤波器组中条目数的 log2
*   **线性**：如果为 1，则使用的 FIR 滤波器将在 2 个最接近的滤波器之间进行线性插值，如果为 0，则将使用最接近的滤波器
*   **cutoff**：截止频率，1.0对应输出采样率的一半

我需要使用可在相同深度进行配置的 C# 库。我一直在尝试使用**NAudio**（更具体地说，它的`WaveFormatConversionStream`类），但是在那里，我只能设置输入和输出采样率，所以我没有得到预期的结果。

那么，是否有一个 C# 库可以使用与 FFmpeg 相同的设置重新采样？还是具有几乎所有这些设置或类似设置的？注意：我需要一个 C# 解决方案，而不是包装器！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:54:53.723

除了`WaveFormatConversionStream`（使用 ACM 编解码器）之外，NAudio 还包括另一个重采样器，可以作为 DirectX 媒体对象 (DMO) 访问，或者（在 NAudio 1.7 的最新预发行版中）作为媒体基础转换访问。这些可以在 Windows Vista 及更高版本中使用。可悲的是，我认为它们在 XP 中不可用（但自从我尝试以来已经有一段时间了）。

找到的 DMO 版本在`Resampler`类中（还有一个`ResamplerDmoStream`），Media Foundation 版本在`MediaFoundationResampler`. 它们实际上都创建了相同的底层对象，但在 MFT 版本中，我添加了一个名为的属性`ResamplerQuality`，它允许您在 1（线性插值）和 60（最大质量）之间进行选择。在[本文中](http://www.codeproject.com/Articles/501521/How-to-convert-between-most-audio-formats-in-NET)，我包含了重新采样的正弦波扫描的频谱图，您会看到质量非常好。

`Resampler`如果您想走 DMO 路线，您可以轻松地对类进行相同的更改，因为它可以访问[IWMResamplerProps](http://msdn.microsoft.com/en-gb/library/windows/desktop/ff819251%28v=vs.85%29.aspx)，它允许您设置半过滤器长度（这是 1 到 60 之间的相同值）。

# c - 处理 argv 时出现分段错误

> ID：16121638
> 
> 赞同：3
> 
> 时间：2013-04-20T14:49:15.373
> 
> 标签：c, segmentation-fault

此过程应将包含一组用逗号分隔的双精度数（例如 7.2、9.5、-5.515）的字符串转换为双精度类型的向量。

```
 void ToDoubleVec(int d,const char* commaSeparated,double *result)
    {
        int i;      
        result[0]=atof(strtok(commaSeparated,","));
        for(i=1;i<d;i++)
            result[i]=atof(strtok(NULL,","));   
    } 
```

这是调用它的程序片段：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(int argc,char** argv)
    {
    ...
        int i,dim=atoi(argv[1]);
        double *lower;
        lower = malloc(dim*sizeof(double));
        ToDoubleVec(dim,argv[2],lower);
    ...
    } 
```

调试器的输出：

```
40      lower = malloc(dim*sizeof(double)); 
(gdb) s
42      ToDoubleVec(dim,argv[2],lower);
(gdb) s
ToDoubleVec (d=2, commaSeparated=0x7fffffffe9d3 "2.3,-62.1", result=0x603010) at testPSO.c:11
11      result[0]=atof(strtok(commaSeparated,","));
(gdb) s

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff77f56bb in ?? () from /lib/x86_64-linux-gnu/libc.so.6 
```

为什么它不起作用？我确信我已经为数组分配了足够的内存，而且参数似乎也被正确传递了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:25:55.777

您可以将您的代码简化为这个 SSCCE（[简短、自包含、正确的示例](http://sscce.org/)），当您省略时它会很好地崩溃，`#include <string.h>`并且当您添加时不会干净地编译`#include <string.h>`：

```
segv.c: In function ‘ToDoubleVec’:
segv.c:8:5: warning: implicit declaration of function ‘strtok’ [-Wimplicit-function-declaration]
segv.c:8:20: warning: initialization makes pointer from integer without a cast [enabled by default]
segv.c:14:20: warning: assignment makes pointer from integer without a cast [enabled by default] 
```

代码：

```
#include <stdlib.h>
//#include <string.h>

static void ToDoubleVec(int d, const char* commaSeparated, double *result)
{
    int i;      
    result[0] = atof(strtok(commaSeparated, ","));
    for (i = 1; i < d; i++)
        result[i] = atof(strtok(NULL, ","));   
}

int main(void)
{
    int dim = 2;
    double *lower = malloc(dim*sizeof(double));
    char arg[] = "7.2,9.5,-5.515";
    ToDoubleVec(dim, arg, lower);
} 
```

将函数的返回值（例如`strtok()`可以返回空指针的函数）直接传递给`atof()`不容忍空指针的函数是鲁莽的；它会导致崩溃。如果一切都是正确的，你会没事的；如果没有，你会崩溃和燃烧。

未经检查的内存分配是一个类似的问题；在原始内存分配之前，您甚至没有检查它`dim`是非零（和非负）。

```
#include <assert.h>
#include <string.h>
#include <stdlib.h>

static void ToDoubleVec(int d, char *commaSeparated, double *result)
{
    int i;      
    char *number = strtok(commaSeparated, ",");
    if (number != 0)
    {
        result[0] = atof(number);
        for (i = 1; i < d; i++)
        {
            number = strtok(NULL, ",");
            if (number != 0)
                result[i] = atof(number);
        }
    }
}

int main(void)
{
    int dim = 2;
    double *lower = malloc(dim*sizeof(double));
    char arg[] = "7.2,9.5,-5.515";
    assert(lower != 0);
    ToDoubleVec(dim, arg, lower);
} 
```

`number`如果测试失败，您可以——并且在我所做的代码的一个版本中——添加错误打印以报告。但是崩溃是由`strtok()`as Return`int`而不是的隐式声明引起的`char *`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:23:14.843

我试图编译您的代码，编译器警告我 strtok() 将 char* 而不是 const char* 作为输入。然后我尝试了这段代码，它工作正常：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

void ToDoubleVec(int d, char* commaSeparated,double *result);

int main(int argc,char** argv)
{
    int i,dim=atoi(argv[1]);
    double *lower;
    lower = malloc(dim*sizeof(double));
    ToDoubleVec(dim,argv[2],lower);
    for (i=0; i<dim; ++i) {
        printf("%f\n", lower[i]);
    }
    return 0;
}

void ToDoubleVec(int d, char* commaSeparated,double *result)
{
    int i;
    result[0]=atof(strtok(commaSeparated,","));
    for(i=1;i<d;i++)
        result[i]=atof(strtok(NULL,","));
} 
```

所以尝试将 const char* 更改为 char*，并检查您传递给程序的输入，也许它不正确，这可能是问题所在。

# sql - 在 SQLite 中插入或更新一行

> ID：16121645
> 
> 赞同：0
> 
> 时间：2013-04-20T14:50:02.720
> 
> 标签：sql, sqlite, upsert

我找到[了这个答案](https://stackoverflow.com/a/4330694/1492861)，但我不确定它是否符合我的要求。看起来它更新了表中的所有行，我只想更新一个。

我的表很简单：

```
MacAddress           |    Name
1C-6F-65-C6-20-0B    |    Logan-PC
DE-AD-BE-EF-F0-0D    |    PC1
... 
```

`MacAddress`是 PK，我只想简单地能够更新 Name（如果存在）或添加新行（如果不存在），给定`MacAddress`as 引用和`Name`字符串。

这是我第一次使用 SQLite，所以我可能只是没有正确理解 Eric B 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:56:32.487

假设您的 MacAddress 是表中的主键，您发布的答案似乎对我很有效。

```
insert or replace into yourtable (macaddress, name)
values ('1C-6F-65-C6-20-0B', 'Logan-PC');

insert or replace into yourtable (macaddress, name)
values ('1C-6F-65-C6-20-0B', 'Logan-PC-Updated'); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!7/a4f56/1)

这将产生一行，Logan-PC-Updated 作为更新的名称。

注意：如果您的 MacAddress 不是您的主键，则此方法将不起作用。

# delphi - 如何确定 DBGrid 是否处于插入模式

> ID：16121647
> 
> 赞同：2
> 
> 时间：2013-04-20T14:50:10.387
> 
> 标签：delphi, delphi-7

只有当 DBGrid 处于插入模式时，我才想显示另一个控件。如何检测 DBGrid 或连接的 DBNavigator 或 TQuery 是否处于插入模式？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T14:55:01.817

您使用. 检查 ( ) 中`State`的底层（连接）`TDataSet`是什么。[`TDataSet.State`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.State)[`TDataSource.State`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSource.State)

```
if DBGrid1.DataSource.State = dsInsert then   // It's in insert mode 
```

还有`dsEdit`告诉你它是否正在被编辑，`dsBrowse`让你知道它`DataSet`正在被查看，以及其他一些。

# c# - 从列表中选择随机单词？

> ID：16121649
> 
> 赞同：0
> 
> 时间：2013-04-20T14:50:18.250
> 
> 标签：c#, list

我无法从另一个文件的列表中选择一个随机单词。实际上，我什至无法让它选择任何单词。我不确定如何连接这两个文件。希望有人能帮忙，我是初学者，所以请尽可能简单地解释:)

我有 2 个文件，一个名为 program.cs，另一个名为 WordList.cs。我将粘贴所有代码，但首先是我遇到问题的小片段。我只是不知道如何正确编写代码。

这是称为 Pick word 的小部分：

```
 //PICK WORD

    static string pickWord()
    {
        string returnword = "";

        TextReader file = new StreamReader(words);
        string fileLine = file.ReadLine();

        Random randomGen = new Random();
        returnword = words[randomGen.Next(0, words.Count - 1)];
        return returnword;
    } 
```

这是 Program.cs 中的所有代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

class Hangman
{

    static void Main(string[] args)                                                  
    {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Title = "C# Hangman";
        Console.WriteLine("Welcome To C# Hangman!");

        //MENU
        int MenuChoice = 0;
        while (MenuChoice != 4)
        {

        Console.Write("\n\t1) Add words");
        Console.Write("\n\t2) Show list of words");
        Console.Write("\n\t3) Play");
        Console.Write("\n\t4) Quit\n\n");

        Console.Write("\n\tChoose 1-4: ");        //Choose meny item

        MenuChoice = Convert.ToInt32(Console.ReadLine());
        WordList showing = new WordList();

        switch (MenuChoice)
        {
            case 1:               
                Console.Write("\n\tAdd a word\n\n");
                var insert = Console.ReadLine();
                showing.AddWord(insert);
                Console.Write("\n\tList of words\n\n");
                showing.ListOfWords();                
                break;
            case 2:
                Console.Write("\n\tList of words\n\n");
                showing.ListOfWords();
                break;

            case 3:   //Running game

                int numGuessesInt = -1;

                while (numGuessesInt == -1)
                {
                    /* Sets the number of guesses the user has to guess the word*/
                    pickNumGuesses(ref numGuessesInt);
                }

                /* Randomly picks a word*/
                string word = pickWord();

                /* Creates a list of characters that will show */
                List<char> guessedLetters = new List<char>();
                bool solved = false;
                while (solved == false)
                {
                    /* Displaying a string to the user based on the user's correct guesses.
                     * If nothing is correct string will return "_ _ _ " */
                    string wordToDisplay = displayWord(guessedLetters, word);
                    /* If the string returned contains the "_" character, all the
                    * correct letters have not been guessed, so checking if user
                    * has lost, by checking if numGuessesLeft is less than 1.*/
                    if (!wordToDisplay.Contains("_"))
                    {
                        solved = true;
                        Console.WriteLine("You Win!  The word was " + word);
                        /* Check if the user wants to play again.  If they do,
                        * then solved is set to true, will end the loop,
                        * otherwise, checkIfPlayAgain will close the program.*/
                        checkIfPlayAgain();
                    }
                    else if (numGuessesInt <= 0)
                    {
                        solved = true;
                        Console.WriteLine("You Lose!  The word was " + word);
                        checkIfPlayAgain();
                    }
                    else
                    {
                        /* If the user has not won or lost, call guessLetter,
                        * display the word, minus guesses by 1*/
                        guessLetter(guessedLetters, word, wordToDisplay, ref numGuessesInt);
                    }
                }

                    break;

            case 4:
                Console.WriteLine("\n\tEnd game?\n\n");
                break;
            default:
                Console.WriteLine("Sorry, invalid selection");
                break;  
        }

        }

    }

    // ****** PICK NUMBER OF GUESSES ******

    static void pickNumGuesses(ref int numGuessesInt)
    {
        string numGuessesString = "";
        Console.WriteLine("Pick a number of guesses");
        numGuessesString = Console.ReadLine();
        try
        {
            numGuessesInt = Convert.ToInt32(numGuessesString);
            if (!(numGuessesInt <= 20 & numGuessesInt >= 1))
            {
                throw new Exception();
            }
        }
        catch (Exception)
        {
            numGuessesInt = -1;
            Console.WriteLine("Error: Invalid Number of Guesses");
        }
    }

    //PICK WORD

    static string pickWord()
    {
        string returnword = "";

        TextReader file = new StreamReader(words);
        string fileLine = file.ReadLine();

        Random randomGen = new Random();
        returnword = words[randomGen.Next(0, words.Count - 1)];
        return returnword;
    }

    // ****** Display word ******

    static string displayWord(List<char> guessedCharacters, string word)
    {
        string returnedWord = "";
        if (guessedCharacters.Count == 0)
        {
            foreach (char letter in word)
            {
                returnedWord += "_ ";
            }
            return returnedWord;
        }
        foreach (char letter in word)
        {
            bool letterMatch = false;
            foreach (char character in guessedCharacters)
            {
                if (character == letter)
                {
                    returnedWord += character + " ";
                    letterMatch = true;
                    break;
                }
                else
                {
                    letterMatch = false;
                }
            }
            if (letterMatch == false)
            {
                returnedWord += "_ ";
            }
        }
        return returnedWord;
    }

    // ****** Guess letter ******

    static void guessLetter(List<char> guessedCharacters, string word, string wordToDisplay, ref int numGuessesLeft)
    {
        string letters = "";
        foreach (char letter in guessedCharacters)
        {
            letters += " " + letter;
        }
        Console.WriteLine("Guess a letter");
        Console.WriteLine("Guessed Letters: " + letters);
        Console.WriteLine("Guesses Left: " + numGuessesLeft);
        Console.WriteLine(wordToDisplay);
        string guess = Console.ReadLine();
        char guessedLetter = 'a';
        try
        {
            guessedLetter = Convert.ToChar(guess);
            if (!Char.IsLetter(guessedLetter))
            {
                throw new Exception();
            }
        }
        catch (Exception)
        {
            Console.WriteLine("Error: Invalid Letter Choice");
            //guessLetter(guessedCharacters, word, wordToDisplay, ref numGuessesLeft);
        }
        bool repeat = false;
        for (int i = 0; i < guessedCharacters.Count; i++)
        {
            if (guessedCharacters[i] == guessedLetter)
            {
                Console.WriteLine("Error: Invalid Letter Choice");
                repeat = true;
                //guessLetter(guessedCharacters, word, wordToDisplay, ref numGuessesLeft);
            }
        }
        if (repeat == false)
        {
            guessedCharacters.Add(guessedLetter);
            numGuessesLeft -= 1;
        }
    }

    // ****** Check to see if player wants to play again. ******

    static void checkIfPlayAgain()
    {
        Console.WriteLine("Would you like to play again? (y/n)");
        string playAgain = Console.ReadLine();
        if (playAgain == "n")
        {
            Environment.Exit(1);
        }
    }
} 
```

这是 WordList.cs 的代码

```
using System;
using System.Collections.Generic;

class WordList
{
    List <string> words = new List<string>();

    public void ListOfWords()
    {
        words.Add("test");         // Contains: test
        words.Add("dog");          // Contains: test, dog
        words.Insert(1, "shit"); // Contains: test, shit, dog

        words.Sort();
        foreach (string word in words) // Display for verification
        {
            Console.WriteLine(word);

        }

    }

    public void AddWord(string value){
        words.Add(value);
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:01:28.693

我对您的代码进行了一些更改。该代码现在可以工作，但远非完美。您的解决方案有两个文件`Program.cs`和`Wordlist.cs`，看起来像这样

**程序.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

public class Hangman
{
    /* 
     * Some notes on your code:
     *   use naming convention for methods and fields, i.e. methods names start with a capital letter
     *   use modifiers for methods, i.e private, public, protected in your method declarations
     *   make variables private if you use them on several methods
     *   and finally: read a book on c#
     *   
     */

    private static WordList words;
    private static Random randomGen = new Random();

    public static void Main(string[] args)
    {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Title = "C# Hangman";
        Console.WriteLine("Welcome To C# Hangman!");
        initializeWordList();

        //MENU
        int MenuChoice = 0;
        while (MenuChoice != 4)
        {

            Console.Write("\n\t1) Add words");
            Console.Write("\n\t2) Show list of words");
            Console.Write("\n\t3) Play");
            Console.Write("\n\t4) Quit\n\n");

            Console.Write("\n\tChoose 1-4: ");        //Choose meny item

            MenuChoice = Convert.ToInt32(Console.ReadLine());
            switch (MenuChoice)
            {
                case 1:
                    Console.Write("\n\tAdd a word\n\n");
                    var insert = Console.ReadLine();
                    words.Add(insert);
                    Console.Write("\n\tList of words\n\n");
                    foreach (string w in words) // Display for verification
                        Console.WriteLine(w);
                    break;
                case 2:
                    Console.Write("\n\tList of words\n\n");
                    foreach (string w in words) // Display for verification
                        Console.WriteLine(w);
                    break;

                case 3:   //Running game

                    int numGuessesInt = -1;

                    while (numGuessesInt == -1)
                    {
                        /* Sets the number of guesses the user has to guess the word*/
                        pickNumGuesses(ref numGuessesInt);
                    }

                    /* Randomly picks a word*/
                    string word = PickWord();

                    /* Creates a list of characters that will show */
                    List<char> guessedLetters = new List<char>();
                    bool solved = false;
                    while (solved == false)
                    {
                        /* Displaying a string to the user based on the user's correct guesses.
                         * If nothing is correct string will return "_ _ _ " */
                        string wordToDisplay = displayWord(guessedLetters, word);
                        /* If the string returned contains the "_" character, all the
                        * correct letters have not been guessed, so checking if user
                        * has lost, by checking if numGuessesLeft is less than 1.*/
                        if (!wordToDisplay.Contains("_"))
                        {
                            solved = true;
                            Console.WriteLine("You Win!  The word was " + word);
                            /* Check if the user wants to play again.  If they do,
                            * then solved is set to true, will end the loop,
                            * otherwise, checkIfPlayAgain will close the program.*/
                            checkIfPlayAgain();
                        }
                        else if (numGuessesInt <= 0)
                        {
                            solved = true;
                            Console.WriteLine("You Lose!  The word was " + word);
                            checkIfPlayAgain();
                        }
                        else
                        {
                            /* If the user has not won or lost, call guessLetter,
                            * display the word, minus guesses by 1*/
                            guessLetter(guessedLetters, word, wordToDisplay, ref numGuessesInt);
                        }
                    }

                    break;

                case 4:
                    Console.WriteLine("\n\tEnd game?\n\n");
                    break;
                default:
                    Console.WriteLine("Sorry, invalid selection");
                    break;
            }

        }

    }

    private static void initializeWordList()
    {
        words = new WordList();
        words.Add("test");         // Contains: test
        words.Add("dog");          // Contains: test, dog
        words.Insert(1, "shit"); // Contains: test, shit, dog
        words.Sort();
    }

    // ****** PICK NUMBER OF GUESSES ******

    private static void pickNumGuesses(ref int numGuessesInt)
    {
        string numGuessesString = "";
        Console.WriteLine("Pick a number of guesses");
        numGuessesString = Console.ReadLine();
        try
        {
            numGuessesInt = Convert.ToInt32(numGuessesString);
            if (!(numGuessesInt <= 20 & numGuessesInt >= 1))
            {
                throw new Exception();
            }
        }
        catch (Exception)
        {
            numGuessesInt = -1;
            Console.WriteLine("Error: Invalid Number of Guesses");
        }
    }

    //PICK WORD

    private static string PickWord()
    {
        return words[randomGen.Next(0, words.Count() - 1)];
    }

    // ****** Display word ******

    private static string displayWord(List<char> guessedCharacters, string word)
    {
        string returnedWord = "";
        if (guessedCharacters.Count == 0)
        {
            foreach (char letter in word)
            {
                returnedWord += "_ ";
            }
            return returnedWord;
        }
        foreach (char letter in word)
        {
            bool letterMatch = false;
            foreach (char character in guessedCharacters)
            {
                if (character == letter)
                {
                    returnedWord += character + " ";
                    letterMatch = true;
                    break;
                }
                else
                {
                    letterMatch = false;
                }
            }
            if (letterMatch == false)
            {
                returnedWord += "_ ";
            }
        }
        return returnedWord;
    }

    // ****** Guess letter ******

    static void guessLetter(List<char> guessedCharacters, string word, string wordToDisplay, ref int numGuessesLeft)
    {
        string letters = "";
        foreach (char letter in guessedCharacters)
        {
            letters += " " + letter;
        }
        Console.WriteLine("Guess a letter");
        Console.WriteLine("Guessed Letters: " + letters);
        Console.WriteLine("Guesses Left: " + numGuessesLeft);
        Console.WriteLine(wordToDisplay);
        string guess = Console.ReadLine();
        char guessedLetter = 'a';
        try
        {
            guessedLetter = Convert.ToChar(guess);
            if (!Char.IsLetter(guessedLetter))
            {
                throw new Exception();
            }
        }
        catch (Exception)
        {
            Console.WriteLine("Error: Invalid Letter Choice");
            //guessLetter(guessedCharacters, word, wordToDisplay, ref numGuessesLeft);
        }
        bool repeat = false;
        for (int i = 0; i < guessedCharacters.Count; i++)
        {
            if (guessedCharacters[i] == guessedLetter)
            {
                Console.WriteLine("Error: Invalid Letter Choice");
                repeat = true;
                //guessLetter(guessedCharacters, word, wordToDisplay, ref numGuessesLeft);
            }
        }
        if (repeat == false)
        {
            guessedCharacters.Add(guessedLetter);
            numGuessesLeft -= 1;
        }
    }

    // ****** Check to see if player wants to play again. ******

    static void checkIfPlayAgain()
    {
        Console.WriteLine("Would you like to play again? (y/n)");
        string playAgain = Console.ReadLine();
        if (playAgain == "n")
        {
            Environment.Exit(1);
        }
    }
} 
```

**词表.cs**

```
using System;
using System.Collections.Generic;

public class WordList : List<string>
{   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:42:40.087

尝试创建一个静态类并添加一个返回列表的方法，然后您将能够访问您的单词表。

例子：

```
static class WordList
{
   static List<string> words = new List<string>();

   public static  void ListOfWords()
   {
       words.Add("test");         // Contains: test
       words.Add("dog");          // Contains: test, dog
       words.Insert(1, "shit"); // Contains: test, shit, dog

       words.Sort();
       foreach (string word in words) // Display for verification
       {
           Console.WriteLine(word);
       }

   }

   public static List<string> GetWords()
   {
      return words;
   }

   public static void AddWord(string value)
   {
       words.Add(value);
   }
} 
```

然后，您将更改您的 switch 语句，使其看起来像这样。

```
switch (MenuChoice)
{
    case 1:               
        Console.Write("\n\tAdd a word\n\n");
        var insert = Console.ReadLine();
        WordList.AddWord(insert);
        Console.Write("\n\tList of words\n\n");
        WordList.ListOfWords();                
        break;
    case 2:
        Console.Write("\n\tList of words\n\n");
        WordList.ListOfWords();
        break;

    .... 
```

你的`pickWord`方法看起来像这样：

```
static string pickWord()
{
    string returnword = "";

    Random randomGen = new Random();
    returnword = WordList.GetWords()[randomGen.Next(0, WordList.GetWords().Count() - 1)];
    return returnword;
} 
```

* * *

我修改了您的 Wordlist 类，以便它可以使用一个文件在您的程序使用之间维护您的单词，以防万一这就是您所要求的。

```
static class WordList
{
    static string filePath = @"C:\temp\Word.txt";
    static List<string> words = new List<string>();
    private static void CheckFile()
    {
       //Makes sure our base words are saved to the file
       if (!File.Exists(@"C:\temp\Word.txt"))
       {
           using (TextWriter writer = new StreamWriter(filePath))
           {
               writer.WriteLine("test");
               writer.WriteLine("dog");
               writer.WriteLine("shit");
           }
       }
   }

   public static  void ListOfWords()
   {
       CheckFile();
       words.Clear();
       using (TextReader file = new StreamReader(filePath))
       {
           char[] delineators = new char[] { '\r', '\n' };
           string[] tempWords = file.ReadToEnd().Split(delineators, StringSplitOptions.RemoveEmptyEntries);

           foreach (string line in tempWords)
           {
               words.Add(line);
           }

       }

       foreach (string word in words) // Display for verification
       {
           Console.WriteLine(word);

       }

   }

   public static List<string> GetWords()
   {
      return words;
   }

   public static void AddWord(string value)
   {
       CheckFile();
       using (TextWriter writer = new StreamWriter(filePath,true ))
       {
           writer.WriteLine(value);
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:09:13.557

这是一个非常简单的解决方案：

只需一次填充您的列表，或者当您添加任何单词时，调用此方法。代码：

```
private void PopulateTheWordList()
        {
            Console.Write("\n\tAdd a word\n\n");
            WordList.Add(Console.ReadLine());
        } 
```

现在只需调用此方法即可获取随机单词：

```
private string PickWord()
        {
            Random ran = new Random();
            return WordList[ran.Next(0, WordList.Count)];
        } 
```

如果您需要在另一个类中创建`List`of `words`，则使用关键字`static`：

```
static List<string> WordList = new List<string>(); 
```

现在你可以通过写类名来调用它，比如`YourClassName.WordList`

# node.js - 在不使用 Nodejs/Mongoose 创建新模型对象的情况下调用模式方法

> ID：16121651
> 
> 赞同：0
> 
> 时间：2013-04-20T14:50:32.430
> 
> 标签：node.js, mongodb, express, mongoose

我的问题是我想更新已经存储在 MongoDB 上的用户密码，我无法调用`User`. 让我展示一下代码：

用户架构：

```
userSchema = new Schema({ ... });

userSchema.methods.setPassword = function (passwordPlainText) {
    this.passwordHash = createHash(passwordPlainText, this.salt);
};

module.exports = mongoose.model('User', userSchema); 
```

如果我这样做，它工作正常：

```
user = new User();
user.setPassword('foobar'); 
```

但如果我想做这样的事情：

```
User.findOne({email: req.param('email')}, function (err, user) {
    user.setPassword('foobar');
}); 
```

它输出：

```
TypeError: Object #<Object> has no method 'setPassword' 
```

从数据库中检索用户后，有人可以帮我找到一种调用这些模式方法的方法吗？

附加信息：

*   节点 v0.8.4
*   快递 v3.0.4
*   猫鼬模块（[http://mongoosejs.com/](http://mongoosejs.com/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T17:17:46.130

发现了问题，似乎我在会话中保存的用户没有保留用户的模式方法。解决了在会话中只保存 userId，调用另一个 User.findOne(id) 然后调用 setPassword 方法的问题。

# ruby-on-rails - Rails 需要将字段传递给模型 before_create

> ID：16121656
> 
> 赞同：0
> 
> 时间：2013-04-20T14:50:57.840
> 
> 标签：ruby-on-rails

我有员工、联系人和用户。当创建新的联系人或员工时，他们各自的模型会创建一个新用户。这些是关系：

```
 Contact belongs_to :user
  Employee belongs_to :user  
  User has_one :contact 
  User has_one :employee 
```

现在我在所有 3 个表中都有一个电子邮件字段。但是，我想从联系人和员工中删除电子邮件字段，只使用 User.email。

目前接触模型代码是这样的：

```
before_create :create_user

protected
def create_user
  self.user = User.create({ :email => self.email, :password => 'password' })
  return user.save
end 
```

联系表格有这个：

```
 <%= f.input :email %> 
```

如何将电子邮件放入联系人表单并将其传递给联系人控制器以放入新的用户记录？

谢谢您的帮助！

更新1

我试过这个，但没有奏效：

联系表：

```
 <%= text_field_tag :email %> 
```

联系控制器：

```
 protected
  def create_user
    self.user = User.create({ :email => params[:email], :password => '123456' })
    return user.save
  end 
```

更新 2

我试过这个，但它不起作用：

联系表：

```
 <%= params[:email] = email_field_tag 'email'%> 
```

联系控制器：

```
 before_create :create_user

protected
def create_user
  self.user = User.create({ :email => params[:email], :password => '123456' })
  return user.save
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:02:11.237

您可以使用`text_field_tag`辅助方法在视图中创建输入字段，但这听起来像是在滥用模型。如果您的表单代表“联系”模型，为什么不将`email`属性保留在`Contact`其中并从中删除呢`User`？然后，为了方便起见，您可以将以下内容添加到`User`（注意：未经测试的代码）：

```
def email
    contact.email
end

def email= email_addr
    contact.mail = email_addr
end 
```

# ios - Iphone：如何在需要时添加字体大小减小以适合文本视图大小的文本视图

> ID：16121659
> 
> 赞同：0
> 
> 时间：2013-04-20T14:51:38.830
> 
> 标签：ios, objective-c, interface-builder, uitextview

我正在尝试制作一个`UITextView`，调整字体大小以适应文本视图的大小。例如，如果您键入大量文本，并且即将填满文本视图，则文本会变小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:25:21.707

在界面生成器中，您可以调整文本视图的属性。确保选择自动收缩，将最小字体大小调整为 0.2（或任何你想要的）（比例）。每当您键入时，它都会缩小并适合文本视图。

所有这些都可以在属性检查器下找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T08:00:40.757

定义您希望字体的最大尺寸。我通常把它放在我的 .h 文件中

# 定义 kDefaultFontSize 24.0

然后在您将文本添加到 UITextView 的 .m 文件中，您将放置以下内容：

```
myTextView.text = @"Some long string that will be in the UITextView";
  myTextView.font = [UIFont systemFontOfSize:kDefaultFontSize]; 
```

//在这里设置文本大小调整检查

```
if (myTextView.contentSize.height > myTextView.frame.size.height)
 {
    int fontIncrement = 1;
    while (myTextView.contentSize.height > myTextView.frame.size.height)
 {
        myTextView.font = [UIFont systemFontOfSize:kDefaultFontSize-fontIncrement];
        fontIncrement++;
    }
} 
```

# php - 而 foreach 回声的两次？

> ID：16121661
> 
> 赞同：0
> 
> 时间：2013-04-20T14:51:48.780
> 
> 标签：php, foreach, while-loop

刚刚开始掌握处理 foreach 循环。对于每一行，我在 $array 中设置 'vine' 和 'mp4' 但是当我回显这些值时，它们会发布两次。这是我的代码：

```
$sql="SELECT vine_id,mp4_url FROM videos LIMIT 1";

$res=mysql_query($sql);

while($row=mysql_fetch_assoc($res)){
    foreach ($row as $array) {
        $array=array(
            "vine"=>$row['vine_id'],
            "mp4"=>$row['mp4_url']);
            echo $array["vine"];
            echo $array["mp4"];
     }
} 
```

这是我的输出：

```
bUjdjmFHt5I //vine
https://vines.s3.amazonaws.com/v/videos/2013/04/20/A42066A1-EC83-4211-BA20-DAD287C8AF1E-362-0000002797BBAC52_1.0.7.mp4?versionId=oMGICGs2c7dCbodVIHHiaQ1MhqKg65.y //mp4

bUjdjmFHt5I //vine
https://vines.s3.amazonaws.com/v/videos/2013/04/20/A42066A1-EC83-4211-BA20-DAD287C8AF1E-362-0000002797BBAC52_1.0.7.mp4?versionId=oMGICGs2c7dCbodVIHHiaQ1MhqKg65.y //mp4 
```

我是否在我的代码中遗漏了一些使这篇文章发表两次的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T14:54:23.180

你循环了两次。尝试这个：

```
$sql="SELECT vine_id,mp4_url FROM videos LIMIT 1";

$res=mysql_query($sql);

while($row=mysql_fetch_assoc($res)){
    $array = array(
        "vine" => $row['vine_id'],
        "mp4" => $row['mp4_url'],
    );
    echo $array["vine"];
    echo $array["mp4"];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T15:05:07.033

是的，您正在循环一个在您的代码中立即被销毁的数组：

```
$sql="SELECT vine_id,mp4_url FROM videos LIMIT 1";

$res=mysql_query($sql); 
```

假设一切顺利，您从 $res 指向一个 mysql 资源开始，该资源将只提供一个结果集。

```
while($row=mysql_fetch_assoc($res)){ 
```

您正在获取此结果集。$row 现在是一个包含两个键 vine_id 和 mp4_url 的数组。

```
 foreach ($row as $array) { 
```

现在您将两个键值一个接一个地分配给 $array。你有两个键，这个循环将运行两次。

```
 $array=array(
            "vine"=>$row['vine_id'],
            "mp4"=>$row['mp4_url']); 
```

现在您销毁由 foreach 分配的值并用 $row 中的值覆盖它。

您实际上只创建了一个键名略有不同的数组副本。

```
 echo $array["vine"];
        echo $array["mp4"]; 
```

循环运行两次，回声出现两次，内容相同。

```
 }
} 
```

你真正想要的：

```
// Use alias in SQL to get the array keys you want
$sql="SELECT vine_id as vine, mp4_url as mp4 FROM videos LIMIT 1";

$res=mysql_query($sql);

// assign the SQL result to a variable of your choice.
while($array=mysql_fetch_assoc($res)){
    // No need to copy the array
    echo $array["vine"];
    echo $array["mp4"];
} 
```

# xcode - 如何在 Git 版本控制中提取（签出）任何文件集？

> ID：16121664
> 
> 赞同：0
> 
> 时间：2013-04-20T14:52:08.067
> 
> 标签：xcode, git, version-control

例如，一个正在进行的项目中有 50 个文件。我想签出文件 1 版本 1、文件 2 版本 2、文件 3 版本 3、....、文件 50 版本 50，以克隆项目的自定义版本。怎么能做到这一点？（我在 XCode 4.5 上使用 Git）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:39:38.097

这是一件非常奇怪的事情。任何现代 VCS 都设置为跟踪*项目*的状态，即在某个时间点的全套文件的内容。如果您经常需要混合和匹配不同版本的文件，也许您应该重新考虑您在做什么。我只能假设你真的不需要像上面那样奇怪的序列，所以：

*   识别在同一版本中一起使用的文件集（可能您可以通过考虑不同类型的“构建”来做到这一点）
*   为文件版本的每个变体集合创建一个分支
*   也许创建一个“主开发”分支来创建文件的新版本，并从中挑选？还是每个文件包的开发分支，并为每个“构建”从中获取版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:11:56.563

是的你可以。

```
git checkout [some-older-commit-ref] a-file 
```

只需对每个文件执行此操作。

# bash - 数组项之间的比较

> ID：16121665
> 
> 赞同：1
> 
> 时间：2013-04-20T14:52:11.897
> 
> 标签：bash, shell

我编写了一个脚本来计算 OpenVZ 容器随时间的带宽使用情况，并在它使用得太快时暂停它。这是到目前为止的脚本：

```
#!/bin/bash
# Thresholds are in bytes per second
LOGDIR="/var/log/outbound_ddos"
THRESHOLD1=65536
THRESHOLD2=117964

while [ 1 ]
do
        for veid in $(/usr/sbin/vzlist -o veid -H)
        do
                # Create the log file if it doesn't already exist
                if ! test -e $LOGDIR/$veid.log; then
                        touch $LOGDIR/$veid.log
                fi

                # Parse out the inbound/outbound traffic and assign them to the corresponding variables     
                eval $(/usr/sbin/vzctl exec $veid "grep venet0 /proc/net/dev"  |  \
                        awk -F: '{print $2}' | awk '{printf"CTOUT=%s\n", $9}')

                # Print the output and a timestamp to a log file
                echo $(date +%s) $CTOUT >> $LOGDIR/$veid.log

                # Read last 10 entries into arrays
                i=0
                tail $LOGDIR/$veid.log | while read time byte
                do
                        times[i]=$time
                        bytes[i]=$byte
                        let ++i
                done

                # Time checks & calculations for higher threshold
                counter=0
                for (( i=0; i<9; i++ ))
                do
                        # If we have roughly the right timestamp 
                        if (( times[9-i] < times[8-i] + 20 ))
                                then
                                # If the user has gone over the threshold
                                if (( bytes[9-i] > bytes[8-i] + THRESHOLD2 * 10 ))
                                        then let ++counter
                                fi
                        fi
                done

                # Now check counter
                if (( counter == 9 ))
                        then vzctl stop $veid
                fi

                # Same for lower threshold
                counter=0
                for (( i=0; i<3; i++ ))
                do   
                        # If we have roughly the right timestamp 
                        if (( times[3-i] < times[2-i] + 20 )) 
                                then
                                # If the user has gone over the threshold
                                if (( bytes[3-i] > bytes[2-i] + THRESHOLD1 * 10 ))
                                        then let ++counter
                                fi
                        fi
                done

                # Now check counter
                if (( counter == 2 ))
                        then vzctl stop $veid
                fi
        done
        sleep 10
done 
```

我检查了 /var/log/outbound_ddos/vm101.log 中的数字，它们的增长超过了阈值，但什么也没发生。

我添加了一些回显语句来尝试找出问题所在，并且似乎是这个比较返回了错误：

```
if (( bytes[9-i] > bytes[8-i] + THRESHOLD2 * 10 )) 
```

所以然后我尝试了以下内容，但没有打印出来：

```
echo ${bytes[9-i]} 
```

谁能指出我正确的方向？我认为脚本几乎完成了，可能非常简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:43:26.377

您的 shell`while read`在子 shell 中运行循环（请参阅[此处](http://mywiki.wooledge.org/BashPitfalls#grep_foo_bar_.7C_while_read_-r.3B_do_.28.28count.2B-.2B-.29.29.3B_done)了解为什么它不能按预期工作），因此您的数组魔法不会传播到`tail | while`构造之外。

阅读[并](http://mywiki.wooledge.org/BashFAQ/024)相应修复:-)

# bots - 对我网站特定页面的奇怪访问

> ID：16121666
> 
> 赞同：0
> 
> 时间：2013-04-20T14:52:13.643
> 
> 标签：bots, spam-prevention

最近我开发了一个脚本来记录我网站的访问。

我注意到每天都会有很多次奇怪的访问。这些访问与我网站的特定页面相关，并且来自以下列表中的网站：

*   nayra.ru
*   zl-news.ru
*   bizlog.ru
*   欧宝.barsavto.ru
*   tovray.ru
*   www.vk-mail-hack.com
*   danelkon.net/news.php?readmore=74
*   pronekut.com
*   www.wallpapers.su
*   色情网站
*   spb.ceramic.ru
*   zl-news.ru
*   仁科网
*   ublaze.ru
*   mug-na-chas-moscow.ru

有谁知道他们想通过这些访问做什么？他们是垃圾邮件机器人或尝试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T08:24:42.593

我发现，这些访问中的大多数都有闻起来很奇怪的推荐。如果您检查它们，您将被重定向到一个页面，这似乎是机器人的意图，通过推荐来收集访问，所以只需忽略它们。

# c - gcc 中的 C 内存管理

> ID：16121668
> 
> 赞同：6
> 
> 时间：2013-04-20T14:52:32.797
> 
> 标签：c, arrays, variables, gcc, memory-management

我在 Ubuntu 12.10 x86_64 上使用 gcc 版本 4.7.2。

首先是我终端上数据类型的大小：

```
sizeof(char) = 1    

sizeof(short) = 2          sizeof(int) = 4
sizeof(long) = 8           sizeof(long long) = 8

sizeof(float) = 4          sizeof(double) = 8
sizeof(long double) = 16 
```

现在请看一下这段代码片段：

```
int main(void)
{   
    char c = 'a';
    printf("&c = %p\n", &c);
    return 0;
} 
```

如果我没记错的话，我们无法预测`c`. 但是每次这个程序都会给出一些以 . 结尾的随机十六进制地址`f`。所以下一个可用位置将是一些以 . 结尾的十六进制值`0`。在其他数据类型的情况下，我也观察到了这种模式。对于 int 值，地址是一些以 . 结尾的十六进制值`c`。对于双精度，它是一些随机的十六进制值`8`，以此类推。

所以我在这里有两个问题。

1) 谁在管理这种内存分配？它是 gcc 还是 C 标准？

2）不管是谁，为什么会这样？为什么变量以这样一种方式存储，即下一个可用内存位置从以 结尾的十六进制值开始`0`？有什么具体的好处吗？

现在请看一下这段代码片段：

```
int main(void)
{   
    double a = 10.2;
    int b = 20;
    char c = 30;
    short d = 40;

    printf("&a = %p\n", &a);
    printf("&b = %p\n", &b);
    printf("&c = %p\n", &c);
    printf("&d = %p\n", &d);

    return 0;
} 
```

现在在这里我观察到的对我来说是全新的。我认为变量会按照它们声明的顺序存储。但不是！事实并非如此。这是随机运行之一的示例输出：

```
&a = 0x7fff8686a698
&b = 0x7fff8686a694
&c = 0x7fff8686a691
&d = 0x7fff8686a692 
```

似乎变量按其大小的递增顺序排序，然后以相同的排序顺序存储，但保持观察 1。即最后一个变量（最大的变量）以这样一种方式存储，即下一个可用内存位置是以 .结尾的十六进制值`0`。

以下是我的问题：

3）谁是幕后黑手？它是 gcc 还是 C 标准？

4）为什么要浪费时间先对变量进行排序然后分配内存，而不是在“先到先得”的基础上直接分配内存？这种排序然后分配内存有什么特别的好处吗？

现在请看一下这段代码片段：

```
int main(void)
{   
    char array1[] = {1, 2};
    int array2[] = {1, 2, 3};

    printf("&array1[0] = %p\n", &array1[0]);
    printf("&array1[1] = %p\n\n", &array1[1]);

    printf("&array2[0] = %p\n", &array2[0]);
    printf("&array2[1] = %p\n", &array2[1]);
    printf("&array2[2] = %p\n", &array2[2]);

    return 0;
} 
```

现在这对我来说也很震惊。我观察到的是，如果数组总是存储在某个以“0”结尾的随机十六进制值中，`elements of an array >= 2`并且如果`elements < 2` 它在观察 1 之后获得内存位置。

所以这是我的问题：

5) 谁在这个以 thing 结尾的随机十六进制值存储数组的背后`0`？它是 gcc 还是 C 标准？

6）现在为什么要浪费内存？我的意思是`array2`可以在之后立即存储`array1`（因此`array2`内存位置会以 结尾`2`）。但不是将其`array2`存储在下一个十六进制值处，`0`从而在其间留下 14 个内存位置。有什么具体的好处吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T15:12:06.727

堆栈和堆开始的地址由操作系统提供给进程。其他一切都由编译器决定，使用编译时已知的偏移量。其中一些事情可能遵循您的目标架构中遵循的现有约定，而其中一些则不遵循。

C 标准没有规定任何关于堆栈框架内局部变量的顺序的内容（正如评论中所指出的，它甚至根本没有规定使用*堆栈*）。当涉及到结构时，该标准只需要定义顺序，即使那样，它也没有定义特定的偏移量，只是这些偏移量必须按递增顺序排列。通常，编译器尝试以这样一种方式对齐变量，即访问它们需要尽可能少的 CPU 指令 - 并且标准允许这样做，而不是强制它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T15:02:03.313

部分原因是系统和处理器的[应用程序二进制接口](http://en.wikipedia.org/wiki/Application_binary_interface)(ABI) 规范规定的。

请参阅[x86 调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)和[SVR4 x86-64 ABI 补充](http://ensiwiki.ensimag.fr/images/d/de/System_V_Application_Binary_Interface_AMD64_Architecture_Processor_Supplement.pdf)（我提供的是最近副本的 URL；最新的原件在 Web 上很难找到）。

在给定的调用框架内，编译器可以将变量放置在任意堆栈槽中。它可能会尝试（在优化时）随意重组堆栈，例如通过减少对齐约束。你不应该担心这一点。

编译器尝试将局部变量以适当的对齐方式放在堆栈位置。请参阅 GCC 的[**alignof**](http://gcc.gnu.org/onlinedocs/gcc/Alignment.html)扩展。编译器将这些变量放在哪里并不重要，请参阅[我的答案](https://stackoverflow.com/a/16088155/841108)。（如果它对您的代码很重要，您真的应该将变量打包在一个通用的 local`struct`中，因为每个编译器、版本和优化标志都可以做不同的事情；所以不要依赖于特定编译器的精确行为）。

# xdebug - Eclipse、XAMPP、xDebug - 等待 XDebug 会话 - 停留在 57%

> ID：16121672
> 
> 赞同：1
> 
> 时间：2013-04-20T14:53:01.973
> 
> 标签：xdebug, eclipse-pdt

当我开始调试时，进程停留在 57% 并显示“等待 XDebug 会话”。

这是StackOverFlow 上的[重复帖子，但我尝试了所有答案，但没有任何效果。](https://stackoverflow.com/questions/9534302/waiting-for-the-xdebug-session-57-in-eclipse-pdt)

它工作正常，直到两天前。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:52:08.233

一直使用 Eclipse 在 Firefox 中启动 xdebug 会话，突然 23/4/2013 它不会使用 Firefox 启动 xdebug。它给了我 57% 的启动和挂起问题。

在 IE/Chrome/Safari/Opera 而不是 Firefox 中启动 xdebug 会话非常高兴。

这段时间我唯一改变的是我将我的 java 运行时从以前的版本升级到 1.7.0_21 （不记得是哪个，但我确实跳过了多个版本，所以它可能是 1.7.0_19 ）

我查看了项目日志文件，检查您的项目工作区文件夹中是否有一个名为 .metadata 的子文件夹，其中应该有一个 .log 文件，每个项目都有一个，因此请确保您查看的是正确的。

这是我的：

> !会话 2013-04-23 11:06:21.238 -------------------------------------------------- --------- eclipse.buildId=M20130204-1200 java.version=1.7.0_21 java.vendor=Oracle Corporation BootLoader 常量：OS=win32, ARCH=x86, WS=win32, NL=en_GB 命令行参数：-os win32 -ws win32 -arch x86
> 
> !ENTRY org.eclipse.ui.browser 4 0 2013-04-23 11:07:32.584 !MESSAGE 启动 C:\Program Files\Mozilla Firefox\firefox.exe 失败。!STACK 0 java.io.IOException: 无法运行程序“C:\Program”: CreateProcess 错误=2，系统无法在 java.lang.Runtime 的 java.lang.ProcessBuilder.start(Unknown Source) 中找到指定的文件。 exec(Unknown Source) at java.lang.Runtime.exec(Unknown Source) at java.lang.Runtime.exec(Unknown Source) at org.eclipse.ui.internal.browser.browsers.MozillaBrowser$BrowserThread.openBrowser(MozillaBrowser. java:94) at org.eclipse.ui.internal.browser.browsers.MozillaBrowser$BrowserThread.run(MozillaBrowser.java:165) Caused by: java.io.IOException: CreateProcess error=2, 系统找不到指定的文件在 java.lang.ProcessImpl.create(Native Method) 在 java。

因为我看到这一行 java.io.IOException: Cannot run program "C:\Program": CreateProcess error=2,

这让我觉得由于某种原因 java 无法再处理带有空格的文件夹名称（很奇怪），所以我更改了 eclipse 首选项并使用了 8.3 命名约定 C:\PROGRA~1\MOZILL~1\firefox。可执行程序

现在它再次启动 xdebug 会话！

这很奇怪，因为它似乎没有问题

```
C:\Program Files\Opera\opera.exe OR
C:\Program Files\Safari\Safari.exe OR
C:\Program Files\Internet Explorer\iexplore.exe 
```

所以我能想到的是，它不喜欢 2 个文件夹名称中带有空格的原因，因为它不会从 C:\Program Files\Mozilla Firefox\firefox.exe 启动 firefox 我假设它从类似的启动 IE文件夹命名为地址，因为它是该系统上的默认浏览器。

无论如何，我的解决方案是更改 eclipse 首选项 -> 常规 -> Web 浏览器 -> Firefox 以使用 8.3 DOS 目录命名约定。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T14:51:06.360

riggsfolly 的分析和解决方案都是正确的，但是由于某种原因，我的 Eclipse 不允许我使用 DOS 8.3 命名约定。作为遇到相同问题的人的替代方案，您可以尝试以下方法：

1.  创建一个并行文件夹结构，但不要使用空格（例如“C:\ProgramFiles86\MozillaFirefox\”）
2.  下载并安装 firefox，使用自定义安装选项安装到新的“spaceless”目录
3.  在 Eclipse 首选项 -> 常规 -> Web 浏览器中：创建一个新条目（例如“Firefox2”）并将其指向您的新安装（例如 C:\ProgramFiles86\MozillaFirefox\firefox.exe”）。
4.  画龙点睛 - 在两个浏览器之间使用 Mozilla Sync，这样您就不必担心装备新的 Firefox。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T07:02:31.597

我用来找出 Mozilla Firefox 8.3 兼容 Windows 路径的最简单方法如下。

* * *

```
C:\>dir .* /x
 Volume in drive C has no label.
 Volume Serial Number is XXXX-XXXX

 Directory of C:\

File Not Found

C:\>dir *.* /x
 Volume in drive C has no label.
 Volume Serial Number is XXXX-XXXX

 Directory of C:\

07/14/2009  08:50 AM    <DIR>                       PerfLogs
04/01/2013  07:32 PM    <DIR>          PROGRA~1     Program Files
05/14/2013  01:50 PM    <DIR>          PROGRA~2     Program Files (x86)
01/17/2013  01:43 PM    <DIR>                       Users
05/12/2013  05:46 AM    <DIR>                       Windows

C:\>cd PROGRA~2

C:\PROGRA~2>dir *.* /x
 Volume in drive C has no label.
 Volume Serial Number is XXXX-XXXX

 Directory of C:\PROGRA~2

05/14/2013  01:50 PM    <DIR>                       .
05/14/2013  01:50 PM    <DIR>                       ..
05/14/2013  01:50 PM    <DIR>          COMMON~1     Common Files
03/05/2013  10:50 AM    <DIR>                       Google
07/14/2009  11:07 AM    <DIR>          INTERN~1     Internet Explorer
04/19/2013  06:03 PM    <DIR>                       Java
04/14/2013  10:16 PM    <DIR>          MOZILL~1     Mozilla Firefox
04/15/2013  10:57 AM    <DIR>          MOZILL~2     Mozilla Maintenance Service

C:\PROGRA~2>cd MOZILL~1

C:\PROGRA~2\MOZILL~1> 
```

* * *

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-30T11:44:48.193

我有一个类似的问题。我的保持在 72%。我通过设置解决了我的问题

xdebug.mode = 调试

在 php.ini 文件中。我重新启动了 apache 服务器，现在它工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T15:15:58.963

除了 RiggsFolly 的救生解决方案，也许以下内容对任何人都有用。

**问题 1：32 位和 64 位 Windows 7 上的不同路径**

在 32 位 Windows 7 上，路径为：C:\PROGRA~1\MOZILL~1\firefox.exe

在 64 位 Windows 7 上，路径为：C:\PROGRA~2\MOZILL~1\firefox.exe

*（请注意 PROGRA~ 背后的不同数字，正如我在 Abu Sithik 的帖子中发现的那样）*

**问题2：在哪里设置路径？**

您应该在以下位置进行设置（正如 RiggsFolly 已经正确说过的那样）：Window > Preferences > General > Web Browser > Firefox > Edit ![设置firefox可执行文件路径的正确位置：在Window - preferences](https://i.stack.imgur.com/a3rub.jpg)

而**不是**（就像我直观地做的那样）在运行 > 调试配置 > Web 浏览器 > Firefox - 内部服务器。至少，就我所尝试的（但我是一个相对的 Eclipse 新手）而言，这个设置似乎不会影响 Eclipse/xdebug/java 用于在 xdebug 会话中启动浏览器的路径。 ![在此处输入图像描述](https://i.stack.imgur.com/C01SL.jpg)

我希望这可以帮助任何人防止浪费时间，因为我在运行 resp 的计算机之间切换时徒劳地摆弄。32位和64位Windows，并且不得不更改Firefox可执行文件的路径，直到幸运的某个时刻我得到了上面指出的正确方法......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-22T14:36:33.463

我有同样的问题，但是当我直接选择“默认系统网络浏览器”而不是 Firefox 时突然工作。我的默认网络浏览器是 Firefox，现在它可以正常启动了。

我希望这有帮助。

# android - android线性布局中ImageView上的居中对齐文本

> ID：16121681
> 
> 赞同：0
> 
> 时间：2013-04-20T14:54:04.150
> 
> 标签：android, android-layout, android-imageview

如何使用线性布局在 android ImageView 上显示文本。为此，我发现了很多关于堆栈溢出的示例，但所有示例都是针对相对布局、框架布局但我没有在线性布局中得到它。

我试过了，`android:text="My Text"`但它不起作用。

如果可能的话，请建议我。如果是这样怎么做。

```
 <ImageView
    android:id="@+id/share_button"
    android:layout_width="fill_parent"
    android:layout_height="25dp"
    android:layout_gravity="center"
    android:layout_margin="5dp"
    android:layout_weight="2"
    android:text="text"
    android:background="@drawable/iosbutton" /> 
```

这是附加到此 ImageView 的图像，我想在其上显示文本。

![在此处输入图像描述](https://i.stack.imgur.com/IG6pB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:00:55.300

它必须是 ImageView 吗？

```
<TextView
    android:id="@+id/share_button"
    android:layout_width="fill_parent"
    android:layout_height="25dp"
    android:layout_gravity="center"
    android:layout_margin="5dp"
    android:layout_weight="2"
    android:text="text"
    android:gravity="center"
    android:background="@drawable/iosbutton" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:01:57.930

试试这个

使用此方法

```
public BitmapDrawable writeOnDrawable(int drawableId, String text){

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId).copy(Bitmap.Config.ARGB_8888, true);

    Paint paint = new Paint(); 
    paint.setStyle(Style.FILL);  
    paint.setColor(Color.BLACK); 
    paint.setTextSize(20); 

    Canvas canvas = new Canvas(bm);
    canvas.drawText(text, 0, bm.getHeight()/2, paint);

    return new BitmapDrawable(bm);
} 
```

像这样打电话

```
ImageView image=(ImageView)findViewById(R.id.imageView1);  
image.setImageDrawable(writeOnDrawable(R.drawable.ic_launcher,"Hello")); 
```

# ios - 从实现的类中删除属性 导致“类不符合键值编码”

> ID：16121683
> 
> 赞同：0
> 
> 时间：2013-04-20T14:54:17.180
> 
> 标签：ios, nscoding

我有一个实现 ˚ 协议并具有属性 netAbsAmount 的类。我决定删除它，但现在我收到以下错误：

```
[<Person 0xa37b6b0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key netAbsAmount. 
```

我想我明白出了什么问题，但我不知道如何解决它。我正在更改我的模型，但它必须使用以前的数据。因此，旧数据将具有属性`netAbsAmount`，但新模型没有。在该`initWithCoder`方法中，`netAbsAmount`无论如何都没有设置属性，所以我看不出问题出在哪里。换句话说，这是一个以前没有使用过的属性，因此在序列化过程中没有被编码，在反`encodeWithCoder`序列化过程中也没有被初始化`initWithCoder`。

设置断点并遍历，崩溃发生在之后`viewWillAppear`但之前`cellForRowAtIndexPath:`

我该如何解决？

谢谢。

# android - 没有root的android设备上的cgi服务器？

> ID：16121685
> 
> 赞同：1
> 
> 时间：2013-04-20T14:54:22.993
> 
> 标签：android, python, cgi, httpserver

**我通过一个简短的python脚本在我的android设备（Acer Iconia Tab A511，Android 4）上实现了一个cgi服务器：**

```
import BaseHTTPServer
import CGIHTTPServer
import cgitb; cgitb.enable()
import os

os.chdir('/sdcard/sl4a')

server = BaseHTTPServer.HTTPServer
handler = CGIHTTPServer.CGIHTTPRequestHandler
server_adress = ('', 8000)

print('CGIHTTPServer an Port 8000 gestartet')

httpd = server(server_adress, handler)
httpd.serve_forever() 
```

**并尝试启动 python cgi-script ，例如：**

```
#! /system/bin/python

print "Content-Type: text/html\n\n"
print "Hello World!" 
```

**尽管这可以在 Windows 机器上运行（通过微小的更改）而没有任何问题，但我没有找到让它在我的 android 设备上运行的方法。我是否需要*root*才能使其工作，例如我不能将我的cgi脚本chmod为可执行文件，或者我还应该考虑什么？**

# clojure - 如何在 ClojureScript 中创建按钮元素？

> ID：16121687
> 
> 赞同：8
> 
> 时间：2013-04-20T14:54:32.470
> 
> 标签：clojure, clojurescript

我正在尝试在 ClojureScript 中创建新元素，但它似乎不起作用。我将首先展示我在[此处](http://blog.getprismatic.com/blog/2013/1/22/the-magic-of-macros-lighting-fast-templating-in-clojurescript)找到的示例。

```
(let [dom6238 (.createElement js/document "a")]
    (.setAttribute dom6238 "href" "http://somelink")
    (set! (.-innerText dom6238) "Text")
    dom6238) 
```

他们说转换为：

```
var dom54535 = document.createElement("a");
    dom54535.setAttribute("href", "http://somelink.com");
    dom54535.innerText = "Hello there";
return dom54535 
```

如果我没记错的话，这应该会产生一个 HTML 片段，如下所示：

```
[:a.anchor.silly {:href "http://somelink.com"} "Text"] 
```

* * *

我的 .cljs 文件中有这个：

```
(defn create-button []
  (let [a (.createElement js/document "a")]
    (.setAttribute a "href" "http://somelink")
    (set! (.-innerText a) "Text")
    a))

(defn init []
  (let [a (.getElementById js/document "write-action")
        b (.getElementById js/document "button-field")]
    (set! (.-innerHTML a)
          "field a")
    (set! (.-innerHTML b)
          (create-button)))) 
```

这只是产生（按钮字段在 HTML 中的 write-action 上方）：

```
http://somelink/
field a 
```

所以没有锚标签，只有文本。

* * *

我试图做的是创建一个按钮，所以我有这个代码：

```
(defn create-button []
  (let [new-button (.createElement js/document "input")]
    (set! (.-type new-button)
          "button")
    (set! (.-innerHTML new-button)
          "I'm a button")
    new-button)) 
```

生成此输出：

```
[object HTMLInputElement]
field a 
```

* * *

所以，我玩了一下并删除了返回值：

```
(defn create-button []
  (let [new-button (.createElement js/document "input")]
    (set! (.-type new-button)
          "button")
    (set! (.-innerHTML new-button)
          "I'm a button"))) 
```

这创造了：

```
I'm a button
field a 
```

再一次，我只有文字。

* * *

我必须完整：

```
(defn create-button []
  (let [new-button (.createElement js/document "input")]
    (set! (.-type new-button)
          "button"))) 
```

仅返回文本：

```
button
field a 
```

* * *

和这个：

```
(defn create-button []
  (let [new-button (.createElement js/document "input")]
    (set! (.-type new-button)
          "button")
    new-button)) 
```

产生这个：

```
[object HTMLInputElement]
field a 
```

* * *

我在这里完全迷失了，我到处寻找任何解决方案，但似乎没有任何东西可以回答这个问题。我已经尝试将新的 set 属性包装在 (do) 中，也尝试过没有 (set!) 的版本，但没有任何东西可以产生所需的结果。

问：如何使用 ClojureScript 创建可以单击的按钮？

如果有人知道，奖金 Q：为什么该站点的示例仅返回第一项的结果而不是 innerText 而我的示例仅返回第二个（设置！）函数的文本结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T15:52:05.740

您正在将一个 DOM 元素对象分配给`innerHTML`另一个显然不起作用的元素的属性。您需要`appendChild`在 DOM 元素上使用方法将子元素插入其中。

```
(let [div (.createElement js/document "DIV")]
    (.appendChild div (create-button))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-18T18:22:55.510

Reagent 提供了一种从 CLJS 创建 html 和 js 元素的方法，而无需一直调用 JS 命名空间。我发现它更容易理解。我知道这是一篇旧帖子，但它会在许多搜索中弹出，这可以帮助人们学习。例子：

```
(defn your-button []
[:div 
    [:input.btn {:type "button" :value "Click Me!"
        :on-click ( your func here ) }]]) 
```

CSS：

```
.btn {

} 
```

在 div 中创建一个按钮，更多信息在这里：[https ://github.com/reagent-project/reagent](https://github.com/reagent-project/reagent)

# android - 在android中使用tabHost切换选项卡时管理活动方法

> ID：16121690
> 
> 赞同：0
> 
> 时间：2013-04-20T14:54:47.270
> 
> 标签：android, android-intent, android-tabhost

我正在尝试找到一种方法来获取在 tabHost 的每个选项卡中运行的活动实例。更具体地说，我有一个布局，顶部有一个显示一些正在进行的足球比赛的微调器。正下方有一个包含三个选项卡的选项卡主机。每个选项卡都必须在微调器中包含有关所选游戏的一些信息。

因此，当我在微调器中选择不同的游戏时，我希望更改选项卡中的信息，以便显示有关所选游戏的正确信息。

我用来创建三个选项卡的代码：

```
 tabHost = (TabHost) findViewById(R.id.couponTabHost);
    LocalActivityManager mLocalActivityManager = new LocalActivityManager(this, false);
    mLocalActivityManager.dispatchCreate(savedInstanceState);
    tabHost.setup(mLocalActivityManager);

    TabSpec pointCouponSpec = tabHost.newTabSpec("Σημεία");
    pointCouponSpec.setIndicator("Σημεία", getResources().getDrawable(android.R.drawable.arrow_down_float));
    Intent pointCouponIntent = new Intent(this, CouponPoints.class);
    pointCouponIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    pointCouponIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    pointCouponIntent.putExtra("couponGame",currentGame);
    pointCouponSpec.setContent(pointCouponIntent);

    TabSpec scoreCouponSpec = tabHost.newTabSpec("Σκορ");
    scoreCouponSpec.setIndicator("Σκορ", getResources().getDrawable(android.R.drawable.arrow_down_float));
    Intent scoreCouponIntent = new Intent(this, CouponScores.class);
    scoreCouponIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    scoreCouponIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    scoreCouponIntent.putExtra("couponGame", currentGame);
    scoreCouponSpec.setContent(scoreCouponIntent);

    TabSpec systemCouponSpec = tabHost.newTabSpec("Συστήματα");
    systemCouponSpec.setIndicator("Συστήματα", getResources().getDrawable(android.R.drawable.arrow_down_float));
    Intent systemCouponIntent = new Intent(this, CouponSystems.class);
    systemCouponIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    systemCouponIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    systemCouponIntent.putExtra("couponGame", currentGame);
    systemCouponSpec.setContent(systemCouponIntent);

    tabHost.addTab(pointCouponSpec);
    tabHost.addTab(scoreCouponSpec);
    tabHost.addTab(systemCouponSpec); 
```

如您所知，我使用 Intents 创建每个选项卡。When an item in the spinner is selected, I change the `currentGame`to have the selected instance of the football game `(setOnItemSelectedListener)`.

我现在想要的是在 tabHost 中获取活动 Activity 的实例（CouponPoints、CouponScores、CouponSystems），以便调用“刷新”活动选项卡中的组件的特定方法。

我试图通过添加标志然后处理每个 Coupon* 活动中的方法来做类似的事情`Intent.FLAG_ACTIVITY_CLEAR_TOP`......`Intent.FLAG_ACTIVITY_NEW_TASK`不幸的`onNewIntent()`是，这不起作用......

有没有人知道如何在选择微调器项目时刷新我的组件？？？

# algorithm - Knapsack NP-Complete 的变体是否完整？

> ID：16121703
> 
> 赞同：1
> 
> 时间：2013-04-20T14:56:00.453
> 
> 标签：algorithm, math, optimization, np

在背包问题中，唯一的约束是拣选物品的总大小不大于包裹的总大小。我们知道背包问题是 NP 完全问题。

但是，如果我们有另一个选择固定数量项目的约束，那么这个问题仍然是 NP-Complete 吗？问题的正式描述如下所示，

最大化 $\sum_{j=1}^n p_j x_j$

st $\sum_{j=1}^n w_j x_j < W$

```
 $\sum_{j=1}^n x_j = N$

      $x_j = \{0,1\}$ 
```

这是我研究中的一个公式化问题，我不确定它是否是 NP-Complete 的。请帮我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:07:17.650

您可以通过迭代对象`N`集中的所有大小组合来解决受限问题。`n`组合数不超过`n^N`：

```
C = n! / (N! (n-N)!)
 <= n! / (n-N)!                // since N! >= 1
  = n * (n-1) * ... * (n-N+1)  // N terms
 <= n * n * ... * n            // N terms
  = n^N 
```

由于`N`是固定的，因此总体复杂度是多项式的。

# json - scala playframework json隐式案例类转换

> ID：16121713
> 
> 赞同：1
> 
> 时间：2013-04-20T14:56:39.627
> 
> 标签：json, scala, playframework, case, implicit

我正在 Scala 中开发我的第一个 Play 2.1 应用程序。我要完成的任务是将 json 解析为 3 个不同的案例类。问题是 - 我不知道在哪里声明所有案例类。每个类都在它自己的文件中或全部在一个文件中。这是我所做的（它不起作用，case 值在控制器对象中不可见）：

1.  文件 LoginBase.scala

    ```
    package models

    abstract class LoginBase 

    case class Login(email: String, password: String) extends         LoginBase
    case class RestoreLogin(email: String, captchaID: String,         captchaAnswer: String) extends LoginBase
    case class RegisterLogin(email: String, password: String,         captchaID: String, captchaAnswer: String) extends LoginBase 
    ```

2.  文件

    ```
    package controllers

    import play.api._
    import play.api.mvc._
    import play.api.data._
    import play.api.data.Forms._
    import play.api.Play.current
    import play.api.cache.Cache
    import play.api.libs.json._
    import play.api.mvc._
    import play.api.libs.functional.syntax._

    import nl.captcha.Captcha
    import nl.captcha.Captcha._
    import nl.captcha.gimpy.FishEyeGimpyRenderer
    import nl.captcha.text.renderer.ColoredEdgesWordRenderer
    import nl.captcha.text.renderer.DefaultWordRenderer
    import nl.captcha.gimpy.DropShadowGimpyRenderer

    import java.io.ByteArrayOutputStream
    import javax.imageio.ImageIO
    import java.util.UUID

    import play.api.libs.functional.syntax._
    import models.LoginBase

    object LoginActions extends Controller {

        implicit val loginReads = (
          (__ \ "email").read[String] and
          (__ \ "password").read[String]
        )(Login.apply _) 

        implicit val restoreLoginReads = (
          (__ \ "email").read[String] and
          (__ \ "captchaID").read[String] and
          (__ \ "captchaAnswer").read[String]
        )(RestoreLogin) 

        implicit val registerLoginReads = (
          (__ \ "email").read[String] and
          (__ \ "password").read[String] and
          (__ \ "captchaID").read[String] and
          (__ \ "captchaAnswer").read[String]
        )(RegisterLogin) 

        def registerLogin = Action(parse.json){
            /*  To be implementd */
        }

    } 
    ```

如果有人可以帮助我，我将不胜感激。我能找到的只是 REPL 示例，但我缺少一些基本的东西——把所有的代码放在哪里？什么是文件结构？

谢谢，安德烈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T19:42:49.347

Having multiple classes and objects inside a single file is considered good form in Scala, as long as the classes are tightly related.

please refer [Elements of Scala Style?](https://stackoverflow.com/questions/1281977/elements-of-scala-style) for more detail answer.

Here is example of converting json to scala case class in restful ws.

enter code here

```
import play.api.libs.json.{Reads, JsError, Json}
import play.api.libs.json.JsValue

object someController e

xtends Controller{

case class SomeResource(val Id:String, val someType:String, val Serialno:String)

implicit val reads:Reads[SomeResource] = Json.reads[SomeResource]

/**
   * save some object
   */
  def someService = Action(parse.json){request=>
    unmarshalOrderResource(request, (resource: SomeResource) => {
            val someValue = SomeResource(resource.Id,
                            resource.someType,resource.Serialno);
            someservice.save(someValue);
            Created(someValue.Id)
        })
  }

// method
 private def unmarshalOrderResource(request: Request[JsValue],
                                      block: (SomeResource) => Result): Result = {
        request.body.validate[SomeResource].fold(
            valid = block,
            invalid = (e => {
                val error = e.mkString
                Logger.error(error)
                BadRequest(error)
            })
        )
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:42:05.117

Java 和 Scala 之间的不同之处之一是 Scala 不需要特定的文件/文件夹结构。这些包甚至不必与文件夹相对应。此外，每个文件可以有多个类。

基本上，你所拥有的一切都很好。

必须保持不变的是进口。因此，如果您问为什么您的东西无法编译，请尝试导入模型包中的所有内容。

```
import models._ 
```

# php - php 和 mySQL 日期不起作用 - 与美国与欧洲结构有关吗？

> ID：16121714
> 
> 赞同：1
> 
> 时间：2013-04-20T14:56:44.097
> 
> 标签：php, mysql, date, phpmyadmin

我有一些 php 代码正在对 mySQL 数据库进行查询 - 如果我在 phpmyadmin 中进行查询，它可以工作 - 但如果我在 php 中进行相同的搜索，它就不起作用

从 phpmyadmin 复制的工作正常返回所有行

```
SELECT * FROM contract WHERE DATE(`fdos`) >= '2013-05-01' And DATE(`fdos`) <= '2013-05-09' 
```

我的 php 代码不起作用（两个查询都没有）只返回它应该返回的 30 行中的 3 行。日期的格式不能改变，这就是我 _GET 数据的方式。

```
$startdate = "2013-05-01";
$enddate = "2013-06-01";
function getAllContracts($startdate, $enddate)
{
$sd = date('Y-m-d', strtotime(str_replace("-","/",$startdate)));
$ed = date('Y-m-d', strtotime(str_replace("-","/",$enddate)));
$query1="SELECT * FROM contract WHERE DATE(`fdos`) >= '$sd' And  DATE(`fdos`) <= '$ed'";
$query2="SELECT * FROM contract WHERE DATE(`fdos`) >= Date('$startdate') And     DATE(`fdos`) <= Date('$enddate')";
} 
```

其他要添加的是mysql我将日期存储为这种格式'2013-05-01'的文本，这就是为什么我必须调用DATE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:01:24.187

你必须在这个变量周围加上 "

```
$startdate = "2013-05-01";
$enddate = "2013-06-01"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:21:12.870

我认为问题出在查询本身，尝试使用[`BETWEEN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)comaprison

```
$query1="SELECT * FROM contract WHERE DATE(`fdos`) BETWEEN '$sd' AND '$ed'"; 
```

# c++ - C++ *new 和 new 的区别

> ID：16121715
> 
> 赞同：3
> 
> 时间：2013-04-20T14:56:48.293
> 
> 标签：c++, object, pointers

这个问题可能是重复的。我一直在网上到处寻找以解决这个问题，但我找不到任何东西。“新”和“*新”有什么区别？：

```
int main()
{
    class Cat
    {
        //Code
    }

    new Cat();
    *new Cat();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-20T14:57:44.343

这不是两个独立的东西。没有 a`new`和 a `*new`。第二个是简单地将一元`*`应用于 的结果`new Cat()`。

`new Cat()`是一个*新表达式*。它动态分配和初始化一个`Cat`对象，并计算出指向该对象的指针。如果然后将一元`*`应用于该指针，则取消引用它以获取`Cat`对象。

`*`立即将一元应用于*new-expression*的理由并不多。原因是您立即跟随指针并且没有将指针存储在任何地方。考虑一下你是否这样做了：

```
Cat c = *new Cat(); 
```

这将导致您无法恢复的内存泄漏。对象是动态分配的`Cat`，然后复制到`c`. 动态分配的`Cat`现在徘徊，你没有指向它的指针，你可以通过它来`delete`获取对象。这真是太糟了。

```
Cat& c = *new Cat(); 
```

这稍微好一点，因为至少现在`c`只是对动态分配对象的引用。您可以随时`delete &c;`销毁对象。`Cat`但是，它掩盖了动态分配的事实。如果我正在阅读这段代码，我不会期望`c`指的是动态分配的对象。

您必须记住销毁动态分配的对象。取消引用*new-expression*的结果会使它更难实现，所以要避免它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-20T14:58:24.623

这个表达式：

```
new Cat(); 
```

动态创建一个类型的对象`Cat`，并且您忽略返回的指针（不存储它，不取消引用，什么都没有）。这个表达式：

```
*new Cat(); 
```

与上述相同，只是您还取消引用由 . 返回的指针`new`。但是取消引用指针*本身*是一个没有副作用的操作。

因此，具体而言，这两种表达方式的效果是相同的。重要的一点是您通过丢失一个并且仅引用您动态创建的对象而**泄漏内存两次。**

请记住，使用创建的每个对象都`new`必须通过相应的调用来销毁`delete`。例如，如果您以这种方式存储返回的指针：

```
Cat* pCat = new Cat(); 
```

这将允许您稍后执行以下操作：

```
delete pCat; 
```

并避免内存泄漏。另外，这个：

```
Cat& cat = *new Cat(); 
```

稍后将允许您执行以下操作：

```
delete &cat; 
```

并避免再次发生内存泄漏。但是请注意，这不是一个选项：

```
Cat cat = *new Cat(); 
```

以上仍然会给你一个内存泄漏。原因是它会**复制**`new`通过取消引用into返回的指针获得的对象`cat`。换句话说，`cat`将是与`new`表达式创建的对象不同的对象（尽管相同）。

`new`另一方面，由表达式创建的对象将丢失 - 再次导致内存泄漏。

在现代 C++ 中，建议通过调用`new`and来避免手动内存管理`delete`；相反，请考虑使用智能指针（取决于您需要的所有权策略）。例如：

```
#include <memory>

// ...

std::shared_ptr<Cat> pCat = std::make_shared<Cat>(); 
```

当指向对象的最后一个智能指针被销毁时，智能指针会自动销毁被引用的对象。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-20T14:59:07.357

对您有帮助吗：

```
Cat *ptr = new Cat();
Cat cat = *new Cat(); /* memory leak :( */ 
```

# java - 在java中不设置控件

> ID：16121716
> 
> 赞同：0
> 
> 时间：2013-04-20T14:56:51.613
> 
> 标签：java, swing, jframe

如何设置`JFrame`不会有任何控件（没有关闭，最小化，最大化），我记得一些`decorate`..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T14:57:48.057

参见[public void setUndecorated(boolean undecorated)](http://docs.oracle.com/javase/6/docs/api/java/awt/Frame.html#setUndecorated%28boolean%29)

> 禁用或启用此框架的装饰。此方法只能在框架不可显示时调用。

顺便说一句，老实说，我忘记了方法名称，但我只是在 google 中写了*“从 JFrame 中删除按钮”*并找到了答案。做一个很小的研究有时真的很有帮助。

# linux - 在bash中解析两个字符串之间的值

> ID：16121734
> 
> 赞同：1
> 
> 时间：2013-04-20T14:58:32.333
> 
> 标签：linux, bash, curl, sed, grep

我对 linux 很陌生，即使我需要一些简单的东西，我也不知道从哪里开始。在 bash 脚本中，我需要解析 HTML 页面中字符串“VOL.”和“”之间的值，并将其传递给变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:01:53.757

```
newvar=$(grep -oP 'VOL\.\K.*?(?=,)' file.txt)
echo "$newvar" 
```

或从字符串：

```
newvar=$(grep -oP 'VOL\.\K.*?(?=,)' <<< "$string")
echo "$newvar" 
```

如果您需要更便携的东西：

```
newvar=$(perl -lne '/VOL\.\K.*?(?=,)/ && print $&' <<< "$string")
echo "$newvar" 
```

## 正则表达式的解释

*   `VOL\.`= 文字`VOL.`：`.`= 中的任何字符，`regex`不带反斜杠
*   `\K` = 重新开始匹配到零，见[https://stackoverflow.com/a/13543042/465183](https://stackoverflow.com/a/13543042/465183)
*   `.*?``?`= 任何字符，0 到 N 次出现，但对char 不贪心
*   `(?=,)`=查找char是一个*积极的前瞻性断言*`,`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T17:00:04.453

这可以使用 bash 的内置正则表达式匹配来完成：

```
if [[ "$var" =~ "VOL. "([^,]*)"," ]]; then
    match="${BASH_REMATCH[1]}"
fi 
```

# java - 在java中过滤字符串

> ID：16121739
> 
> 赞同：2
> 
> 时间：2013-04-20T14:59:10.263
> 
> 标签：java, arrays, string, substring

这与过滤坏词无关，所以请进入。假设您有一个名为 abcd、abcde、abcdef、abfg、abdc 的字符串列表，如果用户在 ConsoleProgram 中将字符串 abc 作为过滤器，abcd、abcde 和 abcdef 将被打印出来。我考虑过使用子字符串，但我无法实现它有没有人有任何想法..请注意，我是 java 新手，不称职，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:12:51.540

您需要的第一件事是了解字符串正则表达式，也许在这里：[http](http://docs.oracle.com/javase/tutorial/essential/regex/) ://docs.oracle.com/javase/tutorial/essential/regex/ 。尝试下一个简单的代码。

```
public class StringMatcher {

    public static void main(String[] args) {
        String[] words = new String[]{"abcd", "abcde", "abcdef", "abfg", "abdc"};
        String filter = "abc";

        for (String word : words) {
            if (word.matches(filter + "(.*)")) {
                System.out.println("This pass the filter: " + word);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:02:12.803

试试这个：如果列表中的项目包含用户输入的字符串，它将被打印出来。

```
input = "abc";
for(int i = 0 ; i < list.size(); i++){
  if (list.get(i).contains(input))
    System.out.println(list.get(i));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T15:02:51.677

假设您的字符串位于名为 wordBank 的 ArrayList 中。

```
for(String i : wordBank) { //loops through the array with 'i' being current index
    if(i.contains("abc")) { //checks if index contains filter String
        System.out.println(i); //prints out index if filter String is present
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:01:23.340

使用`String.contains()`- 当字符串包含给定的字符序列时返回 true，请参见[string-javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

# php - 生成随机长度的零字符串

> ID：16121741
> 
> 赞同：0
> 
> 时间：2013-04-20T14:59:21.910
> 
> 标签：php

我正在尝试生成一个随机的零字符串

像这样：00 或 00000000 或 0000 在一定长度之间

如何生成零并将其作为变量输出

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T15:01:10.467

您可以尝试使用[str_repeat](http://php.net/manual/en/function.str-repeat.php)：

从 0 到 9 个零：

```
echo str_repeat("0", rand(0, 9)); 
```

从 5 到 14 :

```
echo str_repeat("0", rand(5, 14)); 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:03:39.870

这将吐出 1 到 10 个零：

```
$start = 1;
$end = 10;

$str = "";

$number_of_zeroes = rand($start, $end);

for ($i = 0; $i < $number_of_zeroes; $i++) {
    $str .= "0";
}

echo $str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:05:47.630

```
$len = mt_rand(1,99);
$foo = str_pad($input, $len, '0', STR_PAD_LEFT); 
```

# php - 表单提交后重定向

> ID：16121742
> 
> 赞同：1
> 
> 时间：2013-04-20T14:59:22.727
> 
> 标签：php, html, wordpress, forms

我正在使用用于 Wordpress 的 Mingle 插件供用户注册，以便他们可以在 Mingle 论坛上发帖。

注册过程有效，但我想在用户提交详细信息后将其重定向到论坛页面，而不是仅仅停留在注册页面上。

我尝试添加`<input type="hidden" name="redirect_to" value="<?php echo bloginfo('url'); ?>" />`代码以使页面重定向（因为它在登录表单上工作），但似乎不适用于注册表单。

我也尝试在表单详细信息中使用“操作”功能；这会重定向页面，但不提交数据。

该页面的代码如下 - 如果可能的话，非常感谢您的解决方案！谢谢。

```
<form name="registerform" id="registerform" method="post">
<input type="hidden" id="mngl-process-form" name="mngl-process-form" value="Y" />
<input type="hidden" name="redirect_to" value="http://creativespotlights.com/forum" action="http://creativespotlights.com/forum" />
<p>
    <label><?php _e('Username', 'mingle'); ?>*:<br />
    <input type="text" name="user_login" id="user_login" class="input mngl_signup_input" value="<?php echo $user_login; ?>" size="20" tabindex="200" /></label>
</p>
<p>
    <label><?php _e('E-mail', 'mingle'); ?>*:<br />
    <input type="text" name="user_email" id="user_email" class="input mngl_signup_input" value="<?php echo $user_email; ?>" size="25" tabindex="300" /></label>
</p>
<?php if(isset($mngl_options->field_visibilities['signup_page']['name'])) { ?>
  <p>
      <label><?php _e('First Name', 'mingle'); ?>:<br />
      <input type="text" name="user_first_name" id="user_first_name" class="input mngl_signup_input" value="<?php echo $user_first_name; ?>" size="20" tabindex="400" /></label>
  </p>  
  <p>
    <label><?php _e('Last Name', 'mingle'); ?>:<br />
    <input type="text" name="user_last_name" id="user_last_name" class="input mngl_signup_input" value="<?php echo $user_last_name; ?>" size="20" tabindex="500" /></label>
  </p>
<?php } ?>
<?php if(isset($mngl_options->field_visibilities['signup_page']['url'])) { ?>
  <p>
    <label><?php _e('Website', 'mingle'); ?>:<br />
    <input type="text" name="mngl_user_url" id="mngl_user_url" value="<?php echo $mngl_user_url; ?>" class="input mngl_signup_input" size="20" tabindex="600"/></label>
  </p>
<?php } ?>
<?php if(isset($mngl_options->field_visibilities['signup_page']['location'])) { ?>
  <p>
    <label><?php _e('Location', 'mingle'); ?>:<br />
    <input type="text" name="mngl_user_location" id="mngl_user_location" value="<?php echo $mngl_user_location; ?>" class="input mngl_signup_input" size="20" tabindex="700" /></label>
  </p>
<?php } ?>
<?php if(isset($mngl_options->field_visibilities['signup_page']['bio'])) { ?>
  <p>
    <label><?php _e('Bio', 'mingle'); ?>:<br />
    <textarea name="mngl_user_bio" id="mngl_user_bio" class="input mngl-growable mngl_signup_input" tabindex="800"><?php echo wptexturize($mngl_user_bio); ?></textarea></label>
  </p>
<?php } ?>  
<?php if(isset($mngl_options->field_visibilities['signup_page']['sex'])) { ?>
  <p>
    <label><?php _e('Gender', 'mingle'); ?>*:&nbsp;<?php echo MnglProfileHelper::sex_dropdown('mngl_user_sex', $mngl_user_sex, '', 900); ?></label>
  </p>
<?php } ?>

<?php if(isset($mngl_options->field_visibilities['signup_page']['password'])) { ?>
  <p>
    <label><?php _e('Password', 'mingle'); ?>:<br/>
    <input type="password" name="mngl_user_password" id="mngl_user_password" class="input mngl_signup_input" tabindex="1000"/></label>
  </p>
  <p>
    <label><?php _e('Password Confirmation', 'mingle'); ?>:<br />
    <input type="password" name="mngl_user_password_confirm" id="mngl_user_password_confirm" class="input mngl_signup_input" tabindex="1100"/></label>
  </p>
<?php } else { ?>
    <p id="reg_passmail"><?php _e('A password will be e-mailed to you.', 'mingle'); ?></p>
<?php } ?>
<?php if($mngl_options->signup_captcha) { ?>
<?php
   $captcha_code = MnglUtils::str_encrypt(MnglUtils::generate_random_code(6));
?>
<p>
<label><?php _e('Enter Captcha Text', 'mingle'); ?>*:<br />
<img src="<?php echo MNGL_SCRIPT_URL; ?>&controller=captcha&action=display&width=120&height=40&code=<?php echo $captcha_code; ?>" /><br/>
<input id="security_code" name="security_code" style="width:120px" type="text" tabindex="1200" />
<input type="hidden" name="security_check" value="<?php echo $captcha_code; ?>">
</p>
<?php } ?>
  <?php do_action('mngl-user-signup-fields'); ?>

    <br class="clear" />
    <p class="submit"><input type="submit" name="wp-submit" id="wp-submit" class="mngl-share-button" value="<?php _e('Sign Up', 'mingle'); ?>" tabindex="60" />
</p>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:56:03.927

尝试这个

```
<?php    
if (isset($_POST['wp-submit']))
    {   
        header('Location: http://site/result.php');       
    }
?> 
```

在代码的顶部

或者你可以尝试通过javascript使用 onsubmit="window.location.href='result.php';"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T15:04:38.967

您可以使用 ：

```
header('Location: http://yoursite.com/location.php'); 
```

但是你必须得到一个干净的输出（标题前没有 html）。

文档[在这里](http://php.net/manual/en/function.header.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T00:51:42.037

成功提交表单后，您应该执行[303 重定向](http://en.wikipedia.org/wiki/HTTP_303)到同一页面。如果用户碰巧按 F5 或其他表单或重新加载页面，这样做将防止重新提交表单。

```
wp_redirect("/path/to/my/script", 303); 
```

您需要替换`/path/to/my/script`为表单所在的 URL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T15:24:32.160

像这样的东西应该工作：

```
if (isset($_POST['user_login']))
{
    (your redirect code here)
} 
```

# c - 在 C 中将字符写入管道

> ID：16121745
> 
> 赞同：1
> 
> 时间：2013-04-20T14:59:56.527
> 
> 标签：c, char, signals, fork, pipe

我有以下程序，它基本上是从键盘读取字符（getch() 无需单击“ENTER”即可执行此操作，功能取自此处：[Capture characters from standard input without waiting for enter to be press](https://stackoverflow.com/questions/421860/c-c-capture-characters-from-standard-input-without-waiting-for-enter-to-be-pr)），然后如果char 是合法动作之一（左、右等），它将它写入到 draw.out 正在读取的管道中。

draw.out 正在读取它收到的输入并打印到屏幕上。（假设该程序运行良好，我保证问题仅在以下代码中）。

问题是：

1.  draw.out 的行为就像它一遍又一遍地接收我的输入。这意味着，出于某种原因，即使我只按了一次 DOWN 键，它也会发送 draw.out ，就好像我点击了很多次一样。

2.  发送一个输入后，我无法再发送，就好像循环正在停止一样。

试图打破我的头脑好几个小时......我真的很感激帮助。

```
int main(int argc, const char* argv[])
{
pid_t child_pid;
int fda[2];
if(pipe(fda)<0)
    perror("pipe error");

if((child_pid=fork())<0)
    perror("fork error");
else
{
    //if we're in father
    if(child_pid>0)
    {
        char c=' ';

        //close read side
        close(fda[0]);

        while(c!=QUIT)
        {
            //get an instruction from keyboard
            while(c!=ROTATE && c!=LEFT && c!=RIGHT &&
                    c!=DOWN && c!=QUIT)
            {
                c=getch();
            }

            //write the instruction to pipe
            write(fda[1],&c,1);
            //notify the child
            kill(child_pid,SIGUSR2);

        }
    }
    //if we're in child process
    else
    {
        dup2(fda[0],0);
        close(fda[0]);
        close(fda[1]);
        execl("./draw.out","./draw.out",NULL);
    }
}

//close everything
close(fda[0]);
close(fda[1]);
return 0;
}

//this function works well in linux with tsch installed or in SSH bash shell
char getch()
{
char buf = 0;
struct termios old = {0};
if (tcgetattr(0, &old) < 0)
        perror("tcsetattr()");
old.c_lflag &= ~ICANON;
old.c_lflag &= ~ECHO;
old.c_cc[VMIN] = 1;
old.c_cc[VTIME] = 0;
if (tcsetattr(0, TCSANOW, &old) < 0)
        perror("tcsetattr ICANON");
if (read(0, &buf, 1) < 0)
        perror ("read()");
old.c_lflag |= ICANON;
old.c_lflag |= ECHO;
if (tcsetattr(0, TCSADRAIN, &old) < 0)
        perror ("tcsetattr ~ICANON");
return (buf);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:03:56.267

发送 char 后，您需要将其设置为,或`c`以外的值。`ROTATE``LEFT``RIGHT``DOWN`

如果你不这样做，`getch()`将永远不会被称为第二次......

所以在外部`while`（就在 之后`kill`）或循环开始（就在`while`包含`getch()`调用之前）的末尾添加类似

```
if (c != QUIT)
  c = ' '; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:09:15.413

将 while 循环更改为 do/while 循环，以确保始终至少调用一次 getch()。

```
do
{
    c = getch();
}
while (c != ROTATE && c != LEFT && c != RIGHT && c != DOWN && c != QUIT); 
```

# c# - 绘制一个椭圆，然后将其移动到另一个位置

> ID：16121748
> 
> 赞同：2
> 
> 时间：2013-04-20T15:00:27.097
> 
> 标签：c#, wpf, ellipse

我使用`EllipsePoints`定义椭圆的高度宽度和颜色的数组绘制了一个椭圆。

然后使用 for 循环来获取椭圆的位置，使用椭圆点和随机数来设置其位置：

```
Random rand = new Random();     

Int32 randomNumber = rand.Next(0, 310);
Int32 randomNumber2 = rand.Next(0, 500);

for (int j = 0; j < 60; j++)
{
    ellipsePoints[j] = new Ellipse() { Width = 20, Height = 20, Fill = Brushes.Red };

    canvas1.Children.Add(ellipsePoints[j]);
}

for (int i = 0; i < 60; i++)
{
    Canvas.SetLeft(ellipsePoints[i], randomNumber2);
    Canvas.SetTop(ellipsePoints[i], randomNumber);
} 
```

我该怎么做才能使椭圆在一定时间后消失，然后出现在另一个随机位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T17:18:58.933

这个问题有两个重要方面。

*   *计时器*- 在 WPF 中，我们使用**System.Windows.Threading.DispatcherTimer**。
*   *删除元素*- 一种方法是在将 UI 元素添加到 Canvas 之前保留其副本。我已将其保存在一个类变量中，以便以后可以使用以下方法将其从画布中删除

    PaintCanvas.Children.Remove(椭圆);

创建您的 WPF 并添加一个名为 PaintCanvas 的画布

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="889" Width="1080">
    <Canvas Name="PaintCanvas">
        <Button Canvas.Left="46" Canvas.Top="274" Content="Button" Height="23" Name="button1" Width="75" Click="button1_Click" />
    </Canvas    >
</Window> 
```

编码。我已经记录了它。

```
public partial class MainWindow : Window
{
    int loopCounter;
    private System.Windows.Threading.DispatcherTimer timer;
    Random rand = new Random();
    Ellipse ellipse = null;

    public MainWindow()
    {
        InitializeComponent();

        //Initialize the timer class
        timer = new System.Windows.Threading.DispatcherTimer();
        timer.Interval = TimeSpan.FromSeconds(1); //Set the interval period here.
        timer.Tick += timer1_Tick;            
    }       

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        loopCounter = 10;
        timer.Start();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        //Remove the previous ellipse from the paint canvas.
        PaintCanvas.Children.Remove(ellipse);

        if (--loopCounter == 0)
            timer.Stop();

        //Add the ellipse to the canvas
        ellipse=CreateAnEllipse(20,20 );
        PaintCanvas.Children.Add(ellipse);

        Canvas.SetLeft(ellipse, rand.Next(0, 310));
        Canvas.SetTop(ellipse, rand.Next(0, 500));
    }

    // Customize your ellipse in this method
    public Ellipse CreateAnEllipse(int height,int width)
    {
        SolidColorBrush fillBrush = new SolidColorBrush() { Color = Colors.Red };
        SolidColorBrush borderBrush = new SolidColorBrush() { Color = Colors.Black };

        return new Ellipse()
        {
            Height = height,
            Width = width,
            StrokeThickness = 1,
            Stroke = borderBrush,
            Fill = fillBrush
        };     
    }
} 
```

# excel - 由其他单元格的内容定义的单元格地址

> ID：16121750
> 
> 赞同：2
> 
> 时间：2013-04-20T15:00:40.920
> 
> 标签：excel

如何在 Excel 中定义可变单元格地址。例如，考虑单元格 A1 的内容为 5，单元格 A2 为 2，单元格 A3 为 10，单元格 A4 为 1 的情况。如何输入一个通用公式将单元格 A7（A1+A2）的内容求和通过A9（A3-A4）？然后，我想将公式拖到 B 到 CJ 列...并重复类似的计算，注意 B1 到 CJ4 的值不同于 A1 到 A4。我很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:16:15.117

```
=SUM(INDEX(A:A,A1+A2,1):INDEX(A:A,A3-A4)) 
```

# wpf - 在 WPF 中格式化 CommandParameter 字符串

> ID：16121755
> 
> 赞同：0
> 
> 时间：2013-04-20T15:01:09.187
> 
> 标签：wpf, visual-studio, xaml

我希望 CommandParameter 为“9”而不是“_9”。

```
<Button Content="_9"
        Focusable="False"
        Command="{Binding NumberPress}"
        CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content}"
        Style="{DynamicResource NumberButton}"
        Margin="92,134,92,129" /> 
```

我知道我可以只做 CommandParameter="9" 但我想提取一个样式以应用于多个按钮。我尝试过使用 StringFormat= 但似乎无法使其工作。有没有办法在不求助于代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T23:06:19.127

如果您在评论中提到的“_”严格来说只是 View 的一部分，那么您确实可以使用 Format 属性来让它出现在`Content`with 中`ContentStringFormat`。

像这样说：

```
<Button Margin="92,134,92,129"
        Command="{Binding NumberPress}"
        CommandParameter="{Binding Content,
                                   RelativeSource={RelativeSource Self}}"
        Content="9"
        ContentStringFormat="_{0}"
        Focusable="False"
        Style="{DynamicResource NumberButton}" /> 
```

这样，如果您将 Button`Content`绑定到某个值，则不必继续在此处添加“_”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:38:25.140

如果您可以修改 NumberPress 引用的命令，那么最简单的解决方案是在那里解析命令参数以获取数字。如果这不是一个选项，那么另一个解决方案是创建一个 IValueConverter 类并将其添加到 CommandParameter 绑定。

```
<Button Content="_9"
        Focusable="False"
        Command="{Binding NumberPress}"
        CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self},
                 Path=Content, Converter={StaticResource NumberConverter}}"
        Margin="92,134,92,129" /> 
```

执行：

```
public class NumberConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is string)
        {
            string strVal = ((string)value).TrimStart('_');
            int intVal;
            if (int.TryParse(strVal, out intVal))
                return intVal;
        }
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }
} 
```

# c# - 列表集合和 XMLSerializer

> ID：16121758
> 
> 赞同：0
> 
> 时间：2013-04-20T15:01:12.490
> 
> 标签：c#, xml, class, serialization, collections

基本上我已经创建了一个用户界面，用户输入存储在两个列表中。

一个类包含两个列表，我试图`XMLSerializer`通过仅向序列化程序传递类名来编写一个包含正确嵌套的列表的 XML 文件。

每次我尝试这样做时，都会出现异常：

> InvalidOperationException，生成 XML 文档时出错

我怎样才能解决这个问题？

代码...

```
//declared globally

className mInfo = new className(); //create an object that references the class

classTwo aInfo = new assessments(); //used in a seperate method in UI ignore for now.

//end of objects

//start of class - assume is has a constructor for now

[Serializable()]
    [XmlRoot]
    public class className 
    {

        public string mCode;
        public string mTitle;
        public int nOC;
        public string term;
        public string oModM;
        public bool hExam;
        //create a list to hold the data
        [XmlElement]
        public List<className> mList = new List<className>();

        [XmlElement]
        public List<classTwo> aList = new List<classTwo>();

//end of class

//start of writer...

 public void XMLWriter()
        {

           string filePath = "test.xml";

        // THIS PART CREATES THE XML FILE 

        XmlSerializer serializer = new XmlSerializer(typeof(className));
         TextWriter textWriter = new StreamWriter(filePath);
          serializer.Serialize(textWriter, mInfo);
          textWriter.Close();

        }

//end of writer 
```

# wix - 警告 LGHT1076：ICE91：文件“doc_code_file1”将安装到每个用户目录“code_Simple”

> ID：16121759
> 
> 赞同：3
> 
> 时间：2013-04-20T15:01:13.710
> 
> 标签：wix

尽管我添加了注册表值设置。它给出以下警告

```
warning LGHT1076 : ICE91: The file 'doc_code_file1' will be installed to the per user directory 'code_Simple' that doesn't vary based on ALLUSERS value
. This file won't be copied to each user's profile even if a per machine installation is desired 
```

我的代码

```
<Component Id='doc_code_copy' Guid='DA95057C-9866-4422-B00B-105BBF862C92' Directory='code_Simple'>
      <RegistryKey Root='HKCU' Key='Software\SimpleToolkit_2012\uninstall\Codesnipet'>
            <RegistryValue Value='Installed code snipet in Document' Type='string' KeyPath='yes'></RegistryValue>
        </RegistryKey>

      <File Id='doc_code_file1' Name='doc_code_file1' DiskId='1'
            Source='Personalfolder\Visual Studio 2012\Code Snippets\Visual C#\My Code Snippets\command.snippet' />
   </Component>
</Directory> 
```

如何抑制这个警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T12:55:56.600

如果您只想抑制警告，您可以添加`-sice:ICE91`到`light.exe`命令行以防止该特定 ICE 运行。或者，您可以向 .wixproj 添加如下属性：

```
<PropertyGroup>
  <SuppressIces>ICE91</SuppressIces>
</PropertyGroup> 
```

如果您使用 Visual Studio 打开您的 .wixproj 文件，您可以通过转到选项卡`Project Properties`上的来设置该属性，您可以在那里添加。`Tool Settings``ICE91`

# asp.net - 从根配置文件覆盖 Web 配置设置

> ID：16121766
> 
> 赞同：0
> 
> 时间：2013-04-20T15:01:47.317
> 
> 标签：asp.net, web-config

我在我的应用程序中有目录说帐户。它包含 web.config 并且我在应用程序的根目录中存在 web 配置文件。

现在我在两个配置文件中都有共同的配置

我的要求是我在 Account 目录中有页面，默认情况下从 Account 文件夹中的 web config 获取配置设置我希望它使用来自 ROOT 配置文件而不是来自文件夹的配置。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:05:40.137

在您的特定目录（帐户）中删除此文件，您将获取您的根目录的配置（它是您的配置文件的继承）

注意：顶层是您的 machine.config

另一个注意事项：您可以只删除特定部分而不是所有文件

# excel - 将多个 Excel 工作表附加到一个工作表中

> ID：16121770
> 
> 赞同：2
> 
> 时间：2013-04-20T15:02:01.330
> 
> 标签：excel, vba

我有一个包含 116 张工作表的 excel 文件，我想将其附加到一张工作表中（“Tab_Appended”）。我尝试了以下代码并且它有效。但是，工作表中的 A 列未粘贴到 Tab_Appended - 我必须在哪里更改代码才能实现除标题行之外的所有数据都复制到 Tab_Appended？

顺便说一句，我排除了几张带有“case”的表格是否有更优雅的方法来排除包含字符串“legend”的所有表格，而不是我列出所有表格？

```
Sub SummurizeSheets()
    Dim ws As Worksheet
    Dim lastRng As Range
    Dim lastCll As Range

    Application.ScreenUpdating = False
    Sheets("Tab_Appended").Activate

    For Each ws In Worksheets
        Set lastRng = Range("A65536").End(xlUp).Offset(1, 0)
        Select Case ws.Name
        Case "Tab_Appended", "Legende 1", "Legende 2", "Legende 3", "Legende 4", "Legende 5", "Legende 6", "Legende 7", "Legende 8", "Legende 9", "Legende 10", "Legende 11", "Legende 12", "Legende 13"
        'do nothing
        Case Else
            Set lastCll = ws.Columns(1).Find(What:="*", After:=ws.Range("A1"), SearchDirection:=xlPrevious)
            ws.Range("A2:" & lastCll.Address).Copy
            Cells(Rows.Count, 1).End(xlUp).Offset(1, 0).PasteSpecial (xlPasteValues)
             'add sheet name before data
            lastRng.Resize(lastCll.Row - 1) = ws.Name
        End Select
    Next ws

    Columns("A").SpecialCells(xlBlanks).EntireRow.Delete (xlUp)

    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:17:29.510

我已经对代码进行了注释，以便您理解它不会有任何问题。

关于您关于忽略具有的工作表的问题`Legend`；是的，有一种优雅的方式，那就是使用`INSTR`. 见下文。

`Non legend*`这段代码所做的是将所有工作表中的列中的数据复制到`Tab_Appended`A:M 中。希望这是你想要的？如果没有，请告诉我，我会更正帖子。

```
Sub SummurizeSheets()
    Dim wsOutput As Worksheet
    Dim ws As Worksheet
    Dim wsOLr As Long, wsLr As Long

    Application.ScreenUpdating = False

    '~~> Set this to the sheet where the output will be dumped
    Set wsOutput = Sheets("Tab_Appended")

    With wsOutput
        '~~> Get Last Row in "Tab_Appended" in Col A/M and Add 1 to it
        wsOLr = .Range("A:M").Find(What:="*", After:=.Range("A1"), _
                Lookat:=xlPart, LookIn:=xlFormulas, SearchOrder:=xlByRows, _
                SearchDirection:=xlPrevious, MatchCase:=False).Row + 1

        '~~> Loop through sheet
        For Each ws In Worksheets
            '~~> Check if the sheet name has Legende
            Select Case InStr(1, ws.Name, "Legende", vbTextCompare)

            '~~> If not then
            Case 0
                With ws
                    '~~> Get Last Row in the sheet
                    wsLr = .Range("A:M").Find(What:="*", After:=.Range("A1"), _
                           Lookat:=xlPart, LookIn:=xlFormulas, SearchOrder:=xlByRows, _
                           SearchDirection:=xlPrevious, MatchCase:=False).Row

                    '~~> Copy the relevant range
                    .Range("A2:M" & wsLr).Copy wsOutput.Range("A" & wsOLr)

                    '~~> Get Last Row AGAIN in "Tab_Appended" in Col A/B and Add 1 to it
                    wsOLr = wsOutput.Range("A:M").Find(What:="*", After:=wsOutput.Range("A1"), _
                            Lookat:=xlPart, LookIn:=xlFormulas, SearchOrder:=xlByRows, _
                            SearchDirection:=xlPrevious, MatchCase:=False).Row + 1
                End With
            End Select
        Next
    End With

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:18:15.270

**消失的柱子**

您的代码段中有一段奇怪的代码：

```
Columns("A").SpecialCells(xlBlanks).EntireRow.Delete (xlUp) 
```

因此，在复制所有工作表内容后，此行会删除 A 列，这不是您想要的。

此外，代码是错误的，因为删除一列然后向上移动（xlUp）是不可能的。您可以删除一行并将其向上移动，或者删除一列并将其向左移动。

正如我所说，这段代码现在使您的列 A 消失...删除该行将使您的列 A 不会消失！

**使用案例**

要排除某些床单，使用案例很好，您使用它的方式也足以一次性完成。为了使其易于重复使用，我建议将要排除的工作表列表存储在工作表中，因为您可以将工作表名称拖放或添加到该列表中，而不必进入代码。

# java - java-udp编程-从服务器发送消息到客户端

> ID：16121772
> 
> 赞同：0
> 
> 时间：2013-04-20T15:02:03.897
> 
> 标签：java, sockets, udp, client

我在服务器和客户端之间建立了正确的连接，我从客户端向服务器发送消息，但是我如何从服务器向客户端发送消息。我的意思是我怎样才能让服务器也像客户端一样。我试图将客户端方法复制到服务器可以调用的另一个类。但是我不能然后我尝试创建一个新包来使用服务器类中的客户端代码。有什么建议吗？

ps：对不起我的英语。

```
public class Entrance_Server extends JFrame{

JButton buton = new JButton("Create");
JButton buton2 = new JButton("Join");
JPanel butonpanel = new JPanel();
DatagramSocket sockServer = null;
DatagramSocket sockClient = null;
int port = 7777;
String s;
BufferedReader cin = new BufferedReader(new InputStreamReader(System.in));

public Entrance_Server() {

    setLayout(new GridLayout(2,1));

    add(buton);
    add(buton2);

    buton.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            Choosing c = new Choosing();
            c.start();

            System.out.println("Server socket created. Waiting for incoming data...");

        }
    });

    buton2.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            Choosing c = new Choosing();
            c.start();

        }
    });

}

public static void main(String[] args){

    Entrance_Server e = new Entrance_Server();
    e.setSize(500,350);
    e.setTitle("Welcome");
    e.setLocationRelativeTo(null);
    e.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    e.setVisible(true);

    e.connect();

}

public void connect (){

        try{
                sockServer = new DatagramSocket(7777);
                byte[] buffer = new byte[65536];
                DatagramPacket incoming = new DatagramPacket(buffer, buffer.length);

                while(true)
        {
            sockServer.receive(incoming);
            byte[] data = incoming.getData();
            String s = new String(data, 0, incoming.getLength());

            //echo the details of incoming data - client ip : client port - client message
            System.out.println(incoming.getAddress().getHostAddress() + " : " + incoming.getPort() + " - " + s);

            s = "OK : " + s;
            DatagramPacket dp = new DatagramPacket(s.getBytes() , s.getBytes().length , incoming.getAddress() , incoming.getPort());
            sockServer.send(dp);

            Entrance_Client_in_Server ec = new Entrance_Client_in_Server();
            ec.connectc();

        }
            }catch(IOException i){
                System.err.println("IOException " + i);
            }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:31:16.103

在您的客户端上，您需要使用[socket.Receive()等待服务器响应](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/DatagramSocket.html#receive%28java.net.DatagramPacket%29 "socket.Receive()")

您可以像您一样在向服务器发送数据包后识别客户端。然后，您可以像这样识别客户端： `InetAddress address = packet.getAddress(); int port = packet.getPort();`

并使用它将数据包发送回客户端，客户端将使用 socket.Receive(); 读取响应

有关使用 UDP 数据报套接字的客户端/服务器连接的更多信息，请查看 [客户端-服务器数据报套接字](http://docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html)

# php - 如何通过 Google Apps 向网站发送 mailer.php 电子邮件

> ID：16121778
> 
> 赞同：0
> 
> 时间：2013-04-20T15:02:21.423
> 
> 标签：php, email, google-apps

我有一个用户创建个人资料的网站。系统会提示他们通过确认电子邮件确认他们的电子邮件。

我在 hostgator vps 上并且有一个谷歌应用程序帐户。我的站点文件中有一个 mailer.php 文件，它有一个运行以发送确认电子邮件的 PHP 脚本。但是，这封电子邮件是通过我的 hostgator VPS 发送的，并使用我的本地 IP 作为发送 IP。

为了通过我的谷歌应用程序帐户发送所有这些外发邮件需要什么？我认为它是一个重新编写的 php 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:12:37.197

您需要与 google 应用程序帐户建立 SMTP 连接，以便通过 google 应用程序发送电子邮件。Google 在其帮助中心提供 SMTP 连接数据。

PHP 的 SMTP 库可能类似于[PHPMailer](https://github.com/Synchro/PHPMailer)。

# ruby-on-rails - rake db:migrate - 未初始化的常量 WickedPdf

> ID：16121786
> 
> 赞同：1
> 
> 时间：2013-04-20T15:03:11.790
> 
> 标签：ruby-on-rails, rake, wicked-pdf

我收到错误消息：`uninitialized constant WickedPdf`运行 rake db:migrate 时。

我已按照此页面上列出的说明[https://github.com/mileszs/wicked_pdf/issues/53](https://github.com/mileszs/wicked_pdf/issues/53)了解如何安装 WickedPdf。

我可以从命令行运行 wkhtmltopdf 二进制文件，我的 wicked_pdf.rb 看起来像这样：

```
WickedPdf.config = {
  :exe_path => '/usr/local/bin/wkhtmltopdf'
} 
```

这是我的宝石清单供参考：

```
$ bundle exec gem list

*** LOCAL GEMS ***

actionmailer (2.3.14)
actionpack (2.3.14)
activerecord (2.3.14)
activeresource (2.3.14)
activesupport (2.3.14)
brightbox (2.3.9)
bundler (1.3.5)
capistrano (2.14.2)
highline (1.6.16)
hoe (3.5.2)
hpricot (0.8.2)
htmldoc (0.2.3)
json (1.7.7)
macaddr (1.6.1)
mysql (2.9.1)
net-scp (1.1.0)
net-sftp (2.1.1)
net-ssh (2.6.7)
net-ssh-gateway (1.2.0)
paginator (1.1.1)
rack (1.1.6)
rails (2.3.14)
rake (10.0.4)
rdoc (4.0.1)
RedCloth (4.2.9)
rmagick (2.13.1)
systemu (2.5.2)
uuid (2.0.2)
will_paginate (2.3.16)
wkhtmltopdf-binary (0.9.9.1) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:06:41.413

如果您只是在运行时遇到问题`rake db:migrate`，您可以尝试使用以下方法包装初始化程序`defined?`：

```
if defined?(WickedPdf)
  WickedPdf.config = {
    :exe_path => '/usr/local/bin/wkhtmltopdf'
  }
end 
```

# database - Haskell 高阶函数

> ID：16121795
> 
> 赞同：0
> 
> 时间：2013-04-20T15:04:00.010
> 
> 标签：database, haskell

我无法从这个给定的数据库中输出某些信息：

```
type Title = String
type Actor = String
type Cast = [Actor]
type Year = Int
type Fan = String
type Fans = [Fan]
type Period = (Year, Year)
type Film = (Title, Cast, Year, Fans)
type Database = [Film]

testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2011, ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
    ("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
        ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2006, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"])] 
```

注意：由于列表的大小，这只是数据库的一部分。

我正在尝试编写一个函数，该函数允许用户输入年份并仅输出电影标题。我对粉丝进行了类似的操作，用户输入粉丝名称并输出他们喜欢的电影。 ..对此的代码如下所示：

```
filmsByFan y = map (\(a,_,_,_) -> a) $ filter (\(_,_,_,a) -> elem y a) testDatabase 
```

这 100% 有效，所以我用 byYear 尝试了一个类似的方法：

```
filmsByYear y = map (\(a,_,_,_) -> a) $ filter (\(_,_,a,_) -> elem y a) testDatabase 
```

但这不会编译...这是因为类型 Year 设置为 Int 吗？如果是这样，是否可以以类似的方式解决我的问题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:07:32.653

在第一种情况下，您想检查人员`y`是否*包含*在粉丝列表中，因此`elem y a`.

在第二种情况下，您想检查年份`y`是否*等于*电影的年份，因此您只需检查是否相等，`a == y`：

```
filmsByYear y = map (\(a,_,_,_) -> a) $ filter (\(_,_,a,_) -> a == y) testDatabase 
```

* * *

顺便说一句，如果你给 lambdas 命名，这段代码会更易读：

```
title (t, _, _, _) = t
fans (_, _, _, fs) = fs
year (_, _, y, _) = y 
```

使用函数链更习惯用法：

```
filmsByFan f = map title $ filter (elem f . fans) testDatabase
filmsByYear y = map title $ filter ((== y) . year) testDatabase 
```

到现在为止，您可能已经发现了一种模式，它本身可以很好地在高阶函数中捕获：

```
filmsBy func = map title $ filter func testDatabase
filmsByFan f = filmsBy (elem f . fans)
filmsByYear y = filmsBy ((== y) . year) 
```

# mongodb - 使用带有 NoCursorTimeout 的可尾游标时出现“未找到游标”错误

> ID：16121796
> 
> 赞同：2
> 
> 时间：2013-04-20T15:04:07.143
> 
> 标签：mongodb, mongodb-.net-driver

我创建了一个默认大小为 50M 的上限集合。最近，我注意到`Cursor not found`当上限集合存储大小超过 50M 时出现错误。我不确定是什么原因造成的：在上限集合大小小于默认最大大小之前，我从未收到此错误。

```
if (this._cursor == null || this._cursor.IsDead)
{                 
   var cursor = this._queueCollection.Find(Query.GT("_id", this._lastId))
            .SetFlags(QueryFlags.AwaitData |
            QueryFlags.TailableCursor |
            QueryFlags.NoCursorTimeout)
            .SetSortOrder(SortBy.Ascending("$natural")); 
    this._cursor =(MongoCursorEnumerator<QueueMessage<T>>)cursor.GetEnumerator();
}

try
{
    if (this._cursor.MoveNext())
        //do some things
        return this._cursor.Current;
    else
     {
         if (this._cursor.IsDead){
               this._cursor.Dispose();
               this._cursor=null;
         }
     }
     return null;
}
catch{} 
```

this._cursor.MoveNext **()**会抛出`cursor not found`异常（偶尔，并不总是抛出。我的代码错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T02:58:11.910

我找到了导致此错误的原因。

如果出现以下任一情况，可尾游标可能会失效或无效：

1.  查询不返回匹配项。
2.  *光标返回集合“末尾”的文档，然后应用程序删除这些文档。*

来自 mongodb 官方网站的关于创建可尾游标的参考（[http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)）

在我的应用程序中，当抛出“找不到光标”异常时，总是因为光标在集合的“末尾”返回文档，然后应用程序删除了这些文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T07:31:46.557

你可以使用`foreach`：

```
var query1 = new QueryBuilder<Message>().GT(m => m.date, lastTransferredMessageDate);
var result = messagesCollection.FindAs<Message>(query1).SetFlags(QueryFlags.NoCursorTimeout);

foreach (var message in result)
{
  // Your code
} 
```

# salesforce - sql 通过联结对象获取数据

> ID：16121797
> 
> 赞同：2
> 
> 时间：2013-04-20T15:04:14.077
> 
> 标签：salesforce, apex-code

我有以下三个自定义对象：

订购__c

Design__c（具有对 Order 的查找和对 Location 的查找，因此设计对象是联结对象）

位置__c

在订单页面布局上，我想添加一个包含 VF 页面的空白部分，以便显示订单的所有设计记录的位置记录。

一个订单可以有多个设计，一个设计可以有多个位置。我需要一种方法来对订单上的 VF 页面中的每个设计/位置进行分组和显示。

如何构建此查询并在 VF 页面上显示结果？

我正在尝试这样的查询： Select Location_ *r.Name, Location* _r.Mockup From Design_ *c where Order* _c = 'xxxxxxxxxxxxxx'

此外，除了相关列表中的 VF 页面部分之外，还有更好的方法来显示结果吗？

谢谢你的帮助！

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:30:11.967

第一件事，第一件事。由于设计通过查找与其他 2 个对象相关，因此它不是连接对象。联结对象仅当它的 2 个父母与孩子有主从关系时。

我认为您要实现的是遍历父子父关系。您需要在后半部分使用子查询。从文档 - 你去： http: [//www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_relationships.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_relationships.htm)

```
Query **child-to-parent relationships**, which are often many-to-one. Specify these relationships directly in the SELECT, FROM, or WHERE clauses using the dot (.) operator.
For example:
SELECT Id, Name, Account.Name
FROM Contact 
WHERE Account.Industry = 'media'
This query returns the ID and name for only the contacts whose related account industry is media, and for each contact returned, the account name.

 Query **parent-to-child**, which are almost always one-to-many. Specify these relationships using a subquery (enclosed in parentheses), where the initial member of the FROM clause in the subquery is related to the initial member of the outer query FROM clause. Note that for subqueries, you should specify the plural name of the object as that is the name of the relationship for each object.
For example:
SELECT Name,
  (
    SELECT LastName
    FROM Contacts
  )
FROM Account
The query returns the name for all the accounts, and for each account, the last name of each contact. 
```

# java - 获取队列中最大数位置的方法

> ID：16121801
> 
> 赞同：0
> 
> 时间：2013-04-20T15:04:47.207
> 
> 标签：java, arrays, queue, max

我写了一个方法来获取队列中的最大数量，但是我需要返回队列中最大数量的位置。这是我写的最大方法：

```
public int maxValue(int[] array) {
    int maximum = array[0];
    for (int i = 0; i < array.length; i++) {
        if (array[i] > maximum) {
            maximum = array[i];
        }
    }
    return maximum;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T15:06:50.883

使用`int maximumIndex`除此之外：

```
int maximumIndex = 0;
...
        maximumIndex = i;
...
return maximumIndex; 
```

# java - 将照片从网站上传到安卓应用

> ID：16121806
> 
> 赞同：0
> 
> 时间：2013-04-20T15:05:08.627
> 
> 标签：java, android, listview, android-asynctask, jsoup

我正在尝试使用 AsyncTask、ListView 和 Jsoup 从网站检索照片到我的 android 应用程序中。在 2 个类之间存在一些困难（一个扩展 Activity，另一个扩展 AsyncTask）这是我的主要活动：

```
public class MainActivity extends Activity{

       private ListView listView;
private ArrayAdapter adapter;
private ArrayList list;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview);
     listView = (ListView) findViewById( R.id.listview); 
     list = new ArrayList();
      adapter = new ArrayAdapter(this,
            android.R.layout.simple_list_item_1, list);

        listView.setAdapter(adapter);
        new LoadImages(list, adapter).execute();

} 
```

这是 AsyncTask 类：

```
public class LoadImages extends AsyncTask {

private ArrayAdapter adapter; 
```

私有 ArrayList 列表；

```
public LoadImages(ArrayList list, Adapter adapter)
{
    this.list = list;
    this.adapter = (ArrayAdapter) adapter;
}

protected void onPostExecute(Elements divs) {
    // TODO Auto-generated method stub
    super.onPostExecute(divs);
     for (org.jsoup.nodes.Element div : divs)
     {   
        list.add(div);
    }
    adapter.notifyDataSetChanged();

}

@Override
protected Object doInBackground(Object... params) {
    Document doc = null;

    try {

    doc = (Document) Jsoup.connect("http://mongol.co.il/").get();
    Elements divs =((Elements) doc).select("img[src$=.jpg]");

     } catch (IOException e1) {

    e1.printStackTrace(); }
    return null;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:11:58.153

尝试在适配器的 imageviewHolder 上执行此操作：

```
Connect.loadBitmap( 0, "http://www.saudeanimal.com.br/imagens/suricate06.jpg",
                new BitmapLoadListener() {
                    @Override
                    public void onLoadListener( int id, Bitmap bitmap ) {
                        if( bitmap != null ) {
                            tableBean.setImg( bitmap );
                            notifyDataSetChanged();
                        }
                    }
                } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:14:53.127

您的 MainActivity.java 应该是

```
public class MainActivity extends Activity
{
    private ListView listView;
    private ArrayAdapter adapter;
    private ArrayList list;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
        listView = (ListView) findViewById(R.id.listview);
        list = new ArrayList();
        adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, list);
        listView.setAdapter(adapter);
        new LoadImages(list, adapter).execute();
    }
} 
```

你的 AsyncTask 类应该是

```
public class LoadImages extends AsyncTask
{
    private ArrayAdapter adapter;
    private ArrayList list;

    public LoadImages(ArrayList list, Adapter adapter)
    {
        this.list = list;
        this.adapter = adapter;
    }

    @Override
    protected void onPostExecute(Elements divs)
    {
        super.onPostExecute(result);
        for ( org.jsoup.nodes.Element div : divs )
        {
            list.add(div);
        }
        adapter.notifyDataSetChanged();
    }

    @Override
    protected Void doInBackground(Void... params)
    {
        Document doc = null;
        try
        {
            doc = (Document) Jsoup.connect("http://mongol.co.il/").get();
            return  ((Elements) doc).select("img[src$=.jpg]");
        }
        catch (IOException e1)
        {
            e1.printStackTrace();
        }
        return null;
    }
} 
```

**注意：**该行中有 ClassCastException `return ((Elements) doc).select("img[src$=.jpg]");`。解决方案仅是从后台线程更新列表视图，而不是针对使用 logcat 错误编辑的问题（*请参阅下面的评论以进行澄清*）。

# c# - 用于处理带有周围字符的值的正则表达式？

> ID：16121813
> 
> 赞同：2
> 
> 时间：2013-04-20T15:05:49.833
> 
> 标签：c#, regex, c#-4.0

我想用周围的`||`符号转换字符串中的值。例如，`||more info||`必须更改为`<a href="#">more info</a>`. 如何在将文本留在中间的同时执行此操作（“更多信息”可以是其他任何内容）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:20:32.737

这可能是做你想做的最简单的方法：

```
var pattern = @"\|\|(.+?)\|\|";
var replacement = @"<a href=""#"">$1</a>";
var input = "you can get ||more info|| here";

var result = Regex.Replace(input, pattern, replacement);
Console.WriteLine (result); 
```

# django - Django 教程 unicode 不起作用

> ID：16121815
> 
> 赞同：22
> 
> 时间：2013-04-20T15:05:51.943
> 
> 标签：django, python-3.x

我的 models.py 中有以下内容

```
import datetime
from django.utils import timezone
from django.db import models

# Create your models here.
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

    def __unicode__(self):
        return self.question

    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)

    def __unicode__(self):
        return self.choice_text 
```

但是当我进入

```
from polls.models import Poll, Choice
Poll.objects.all() 
```

我没有得到民意调查：怎么了？但轮询：轮询对象

有任何想法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-20T15:14:51.900

Django 1.5 对 Python 3 具有实验性支持，但[Django 1.5 教程](http://django.readthedocs.io/en/1.5.x/intro/tutorial01.html)是为 Python 2.X 编写的：

> 本教程是为 Django 1.5 和 Python 2.x 编写的。如果 Django 版本不匹配，您可以参考您的 Django 版本的教程或将 Django 更新到最新版本。如果您使用的是 Python 3.x，请注意您的代码可能需要与教程中的内容有所不同，并且只有在您知道自己在使用 Python 3.x 做什么的情况下才应该继续使用本教程。

在 Python 3 中，您应该定义一个`__str__`方法而不是`__unicode__`方法。有一个装饰器`python_2_unicode_compatible`可以帮助您编写适用于 Python 2 和 3 的代码。

```
from __future__ import unicode_literals
from django.utils.encoding import python_2_unicode_compatible

@python_2_unicode_compatible
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

    def __str__(self):
        return self.question 
```

有关更多信息，请参阅[移植到 Python 3](https://docs.djangoproject.com/en/1.8/topics/python3/#str-and-unicode-methods)文档中的*str 和 unicode 方法*部分。

# url - URI 重写添加不需要的上下文路径

> ID：16121816
> 
> 赞同：0
> 
> 时间：2013-04-20T15:05:59.050
> 
> 标签：url, jakarta-ee, forward

我有我的应用程序来查找资源

```
http://myhost/my-app/test/bat 
```

而且效果很好，现在有一个新的要求

```
http://myhost/my-app/xxx/test/bat, 
```

我只是想把它改写成旧的，所以我创建了一个过滤器：

> ```
> if(uri.endsWith("/xxx/test/bat")){
>      uri=uri.replace("/xxx/test", "/test");
>      request.getRequestDispatcher(uri).forward(req, res);
>   }
>  else
>      chain.doFilter(req, res); 
> ```

但是tomcat容器将url重写为：

```
http://myhost/my-app/my-app/test/bat 
```

/my-app 是 contextPath

为什么我有这个额外的我的应用程序？我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:29:17.333

你是如何获得你的uri价值的？它的价值是什么？我怀疑它可能是“/my-app/xxx/test/bat”。当您使用 request.getRequestDispatcher 时，如果路径以“/”开头，它将被解释为相对于当前上下文根。

# java - ClosestFirstIterator，每条路径具有“最大跳数”上限

> ID：16121819
> 
> 赞同：3
> 
> 时间：2013-04-20T15:06:29.900
> 
> 标签：java, graph, iterator, jgrapht

我正在尝试使用 JgraphT 为冗余拓扑创建网络图，并且我有兴趣让最近的节点到另一个节点，但拓扑不允许超过一定数量的跃点以避免循环。我想知道是否有一种方法可以快速获取顶点，类似于 closeFirstIterator 返回它们的方式，但对每条路径的跳数有一个上限。我注意到带有半径上限的最接近的FirstIterator 构造函数（它限制了每一跳的累积权重），但这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:12:39.483

您可能需要[KShortestPaths](http://jgrapht.org/javadoc/org/jgrapht/alg/KShortestPaths.html#KShortestPaths%28org.jgrapht.Graph,%20V,%20int,%20int%29)类，其中包括一个`nMaxHops`选项

编辑：我必须注意，如果您对每个顶点的最佳路径感兴趣，我注意到[BellmanFordShortestPath](http://jgrapht.org/javadoc/org/jgrapht/alg/BellmanFordShortestPath.html)的性能要好得多，但是您必须自己提供顶点并使用类似[GraphPathImpl](http://jgrapht.sourceforge.net/javadoc/org/jgrapht/graph/GraphPathImpl.html)之类的东西将边集转换为一个`GraphPath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:24:08.413

您可以使用`DijkstraShortestPath<V,E>`并过滤掉您不想要的长路径，当然会损失性能，但可以选择。

# .net - 关于 SynchronizationContext、ExecutionContext 或任何其他上下文的任何好文章？

> ID：16121820
> 
> 赞同：2
> 
> 时间：2013-04-20T15:06:32.857
> 
> 标签：.net, multithreading, task-parallel-library

我正在学习任务并行库。并且不时提到一些上下文类。比如SynchronizationContext、ExecutionContext。我不确定它们是否都是关于上下文的。

我搜索了很多关于它们的信息，但没有太多收获。虽然我认为他们应该不那么难理解，但我现在真的有点迷失了。

那么，任何人都可以分享一些关于：

*   所有这些上下文的设计目的。
*   如何使用它们。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:49:15.530

从前言

> “**警告：**这篇文章深入探讨了大多数开发人员从不需要考虑的 .NET 高级领域”

至：

*   斯蒂芬·图布。[ExecutionContext 与 SynchronizationContext](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)

我知道（大多数）开发人员永远不需要考虑 ExecutionContext。

并且从

*   [斯蒂芬·图布。TaskScheduler.FromCurrentSynchronizationContext](http://blogs.msdn.com/b/pfxteam/archive/2009/09/22/9898090.aspx)

我了解到，上面提到的大多数开发人员应该通过使用 TPL（Task Parallel Library，从 .NET 4.0 开始提供） [TaskScheduler.FromCurrentSynchronizationContext 方法，将自己从 SynchronizationContexts 的复杂性和担忧中抽象出来](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext%28v=vs.100%29.aspx)

# asp.net - ASP.Net Mono HTTPHandler 意外停止处理请求

> ID：16121827
> 
> 赞同：0
> 
> 时间：2013-04-20T15:07:31.403
> 
> 标签：asp.net, mono, handler

我不确定问题是否足够清楚，但问题出在这里，我在 ASP.Net Mono 项目的通用处理程序中运行此代码，无论我运行此代码多少次，循环都不会超过 140000 标记。循环在 1200000 到 1400000 之间的任意位置停止。

```
context.Response.Write(DateTime.Now.ToString()+" MilliSec:"+ DateTime.Now.Millisecond.ToString() + "<br/>");
            for (int i = 0; i <= 1083646; i++)
            {
                context.Response.Write("C#/.Net on Windows:" + i.ToString());
                context.Response.Flush();
            }
            context.Response.Write("<br/>"+DateTime.Now.ToString() + " MilliSec:" + DateTime.Now.Millisecond.ToString() + "<br/>"); 
```

它只打印 1200000 到 1400000 之间的任何位置，然后响应就结束了，没有任何例外。

我在 XSP 2.0 网络服务器上运行 Windows 7 x64、Mono 2.10.9

我不确定是 XSP 还是 CLR 的问题，因为它在处理字符串和内存回收方面存在性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:36:51.130

我不建议在 Windows 中使用 Mono，与其他平台（Linux/Mac）相比，它的质量水平较低，因为在 Windows 中已经有 .NET 框架。

# regex - 正则表达式删除第一个“，”和“\n”之间的所有内容

> ID：16121829
> 
> 赞同：0
> 
> 时间：2013-04-20T15:07:36.187
> 
> 标签：regex, notepad++

我想删除两个字符“，”和“\n”之间的所有内容

所以例如这一行：

```
@[@"Abend",@"evening",@"eve",@"even",@"eventide",@"time], 
```

应该变成：

```
@[@"Abend", 
```

这怎么可能？

我也在寻找制作这条线的可能性：

```
@[@"Abend",@"evening",@"eve",@"even",@"eventide",@"time], 
```

到这一行：

```
@"evening", 
```

这意味着只有 "@"" 和 ",@" 之间的第一个单词应该存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:12:44.907

1.  替换`^(.*?,).*$`为`\1`（[演示](http://regexr.com?34jqe)）。
2.  替换`^.*?,(.*?,).*$`为`\1`（[演示](http://regexr.com?34jqh)）。

![截屏](https://i.stack.imgur.com/cNZpY.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:28:59.983

我就是这样做的，可能会有所帮助:)

**对于第一个要求：**

```
^(.*?,).*$ 
```

**对于第二个要求：**

```
^@.*?,{1}(.*?,).*$ 
```

# matlab - 寻找“平均值”

> ID：16121830
> 
> 赞同：-2
> 
> 时间：2013-04-20T15:07:36.263
> 
> 标签：matlab, matrix, mean

我有以下`matlab`功能，找到矩阵中的列数的最大值：

```
function m = maximum(u)
[row col] = size(u);

for i=1:col
    m(i) = max(u(:,i))
end
end 
```

我知道该函数`mean`在 matlab 中用于查找平均值，但是如何将它与我的函数一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:16:06.077

两者[`mean`](http://www.mathworks.com/help/matlab/ref/mean.html)都有[`max`](http://www.mathworks.com/help/matlab/ref/max.html)一个更容易使用的矢量化形式：

```
col_max  = max(u,[],1);  % max of matrix along 1st dimension (max of column)
col_mean = mean(u,1);    % mean of matrix along 1st dimension (mean of column) 
```

顺便说一句，[`std`](http://www.mathworks.com/help/matlab/ref/std.html)许多其他函数也有类似的自动矢量化：

```
col_std = std(u,0,1);    % standard deviation, normalized by N-1
                         % , of first dimension (column s.d.) 
```

使用 Matlab 的内置矢量化版本通常更容易。它们不太容易出错，并且对于像这样的简单操作通常具有更好的性能。但是，如果您宁愿将其编写为循环：

```
function m = column_mean(u)
[row col] = size(u);

for i=1:col
    m(i) = mean(u(:,i));   % <--- replaced max with mean
end
end 
```

# c# - 将 .exe c++ 文件（创建窗口）转换为 .dll c++ 文件并在 C# 中使用该 .dll 文件

> ID：16121835
> 
> 赞同：2
> 
> 时间：2013-04-20T15:07:52.857
> 
> 标签：c#, c++, dll

我有一个 C++ 中的 .exe 程序，它只显示一个窗口。如何将该 .exe 程序转换为 .dll 文件，然后如何使用 C# 访问该 .dll 文件，以便显示该窗口。这是我的 C++ 代码：

```
#include <windows.h>

const char g_szClassName[] = "myWindowClass";

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    WNDCLASSEX wc;
    HWND hwnd;
    MSG Msg;

    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = g_szClassName;
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, "Window Registration Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        g_szClassName,
        "The title of my window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 240, 120,
        NULL, NULL, hInstance, NULL);

    if(hwnd == NULL)
    {
        MessageBox(NULL, "Window Creation Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:14:41.480

两步：

1.  `dll`如果你有一个 c++ 程序，你可以按照这篇 [文章](http://msdn.microsoft.com/en-us/library/vstudio/ms235636.aspx)来构建它，假设你使用的是 Visual Studio。
2.  为了`c++` `dll`在`c#`程序中使用 a ，您需要阅读：

    *   [在 C# windows 应用程序中使用 C++ DLL：出现错误“找不到入口点”](https://stackoverflow.com/questions/15508310/using-c-dll-in-c-sharp-windows-applicationgetting-error-entry-point-not-foun)
    *   [创建供 Excel 和 C# 使用的 C++ .dll（32/64 位窗口）](https://stackoverflow.com/questions/15309846/creating-c-dll-for-use-by-excel-c-sharp-32-64bit-window)
    *   [在 C# 应用程序中使用 C++ 类 DLL](https://stackoverflow.com/questions/569603/using-c-class-dll-in-c-sharp-application)
    *   [在 C# 项目中使用 C++ DLL](https://stackoverflow.com/questions/2995513/using-c-dll-in-c-sharp-project)

# php - 从一个查询中一个字段最大的表中获取数据

> ID：16121838
> 
> 赞同：0
> 
> 时间：2013-04-20T15:08:17.857
> 
> 标签：php, mysql, sql, max

我想从我的数据库中获取一个字段最大的数据，此时我在 2 个查询中执行此操作。问题是我不想让服务器超载，所以我正在寻找一种方法来使其在 1 个查询中实现。有什么建议么？如您所见，我正在寻找时间戳最大的条目。

```
 $query = "SELECT MAX(TIMESTAMP) AS timestamp FROM `data`";
$run_query = mysql_query($query);
$highest = mysql_result($run_query,'0','timestamp');

$query = "SELECT * FROM `data` where `timestamp`='$highest'";
$run_query = mysql_query($query); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:09:08.497

这将按您的意愿工作。

```
SELECT  *
FROM    data
WHERE   timestamp = (SELECT MAX(timestamp) FROM data) 
```

`Backticks`在这种情况下是可选的。但实际上`timestamp`是保留关键字，但即使不使用反引号转义也允许使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:09:57.687

```
SELECT  * FROM `data` WHERE `timestamp` = (SELECT MAX(`timestamp`) FROM `data`) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T15:19:05.667

另一种选择，如果您可以保证永远不会有两条具有相同时间戳的记录：

```
SELECT *
FROM data
ORDER BY timestamp DESC
LIMIT 1 
```

如果您可以有重复的时间戳，那么使用子选择的其他答案是更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:22:19.417

如果您的目标是最小化服务器资源，那么一个查询和两个查询之间的差异确实很小。引擎需要做几乎相同的工作。不同之处在于编译两个查询而不是一个查询的轻微开销。

无论采用何种解决方案，您都将通过在`data(timestamp)`.

# c# - ProgressBar 运行速度比定义的快

> ID：16121839
> 
> 赞同：1
> 
> 时间：2013-04-20T15:08:18.670
> 
> 标签：c#, winforms

我的应用程序运行文件，每个文件都有自己的运行时间。此函数以毫秒为单位获取进度时间应运行的时间：

```
timerProgress = my timer
pbStatus = my progress bar

public void AnimateProgBar(int milliSeconds)
{
    if (!timerProgress.Enabled && milliSeconds != 0)
    {
        pbStatus.Value = 0;;
        timerProgress.Interval = milliSeconds / 100;
        timerProgress.Enabled = true;
    }
} 
```

这是我填充进度条的计时器：

```
 private void timerProgress_Tick(object sender, EventArgs e)
    {
        if (pbStatus.Value < 100)
        {
            pbStatus.Value += 1;
            pbStatus.Refresh();
        }
        else
        {
            timerProgress.Enabled = false;
        }
    } 
```

我的问题是进度条运行得太快，例如，如果 AnimateProgBar 的值为 12000（12 秒），进度条只运行 6-7 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:02:44.213

您的代码不起作用，这很可疑。我试了几次，每次都错过了大约0.6秒；似乎***计时器只是不精确***。

您可以做的是自己处理时间而不是信任计时器：

```
WithEvents Tmr As New Timer With {.Interval = 100}
Dim startTime As Date, AnimationTime%

Sub AnimateProgress(ms%)
    If ms <= 0 Then Exit Sub

    ProgressBar1.Value = 0
    AnimationTime = ms
    startTime = Now

    Tmr.Start()
End Sub

Private Sub Tmr_Tick() Handles Tmr.Tick
    ProgressBar1.Value = Math.Min((Now - startTime).TotalMilliseconds / AnimationTime, 1) * 100
    If ProgressBar1.Value = 100 Then Tmr.Stop()
End Sub 
```

* * *

**编辑 - 回复下面的回复：**

哦，对不起，不，它是 vb.net。我也知道这两种语言，但我更喜欢 vb，并且倾向于认为其他所有小马也都这样做。

这是c#版本：

```
DateTime startTime; int animationTime;

void AnimateProgress(int ms) {
    if (ms <= 0) return;

    progressBar1.Value = 0;
    animationTime = ms;
    startTime = DateTime.Now;

    Tmr.Start();
}

private void Tmr_Tick(object sender, EventArgs e) {
    progressBar1.Value = (int)(Math.Min((DateTime.Now - startTime).TotalMilliseconds / animationTime, 1) * 100);
    if (progressBar1.Value == 100) Tmr.Stop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:30:22.233

您可以尝试使用此示例，基于`PerformStep method`

```
var progressBar = new System.Windows.Forms.ProgressBar();
progressBar.Maximum = 100;
progressBar.Minimum = 0;
progressBar.Step = 10;

//begin loop

//Your treatment of step 
progressBar.PerformStep();

//end loop 
```

msdn 链接： http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.progressbar.performstep (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.progressbar.performstep(v=vs.80).aspx)

你有样品在这里

```
private void CopyWithProgress(string[] filenames)
{
    // Display the ProgressBar control.
    pBar1.Visible = true;
    // Set Minimum to 1 to represent the first file being copied.
    pBar1.Minimum = 1;
    // Set Maximum to the total number of files to copy.
    pBar1.Maximum = filenames.Length;
    // Set the initial value of the ProgressBar.
    pBar1.Value = 1;
    // Set the Step property to a value of 1 to represent each file being copied.
    pBar1.Step = 1;

    // Loop through all files to copy.
    for (int x = 1; x <= filenames.Length; x++)
    {
        // Copy the file and increment the ProgressBar if successful.
        if(CopyFile(filenames[x-1]) == true)
        {
            // Perform the increment on the ProgressBar.
            pBar1.PerformStep();
        }
    }
} 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.progressbar.performstep (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.progressbar.performstep(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:09:58.423

我无法重现您的问题。我刚刚测试了一个新表单，其中包含您在问题中详述的 ProgressBar 和 Timer，并且仅添加了一个按钮来开始测试，并添加了一个标签来显示经过的时间：

```
 DateTime start;
    private void button1_Click(object sender, EventArgs e)
    {
        start = DateTime.Now;
        AnimateProgBar(12000);
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        label1.Text = DateTime.Now.Subtract(start).TotalSeconds.ToString();
        //the rest of your code, starting with "if (pbStatus.Value < 100)" 
```

我一直有 12.6 秒，直到进度条填满（计时器停止，冻结标签文本）......也许你的进度条的一部分被隐藏了？

[编辑] 如果您对 BlackCap 还注意到的 0.6 额外秒感到好奇，那是因为您将计时器间隔设置为 120 毫秒，但计时器事件的分辨率约为 18 毫秒，因此它实际上会在 126 处触发120 个。

# hibernate - 休眠“mappedBy”使用

> ID：16121840
> 
> 赞同：0
> 
> 时间：2013-04-20T15:08:35.697
> 
> 标签：hibernate, jakarta-ee, jpa

我已经阅读了几个关于使用 Hibernate 在表之间创建关联的示例，我有点困惑。我想首先知道将在数据库中创建多少个表，而无需像代码一样在另一侧指定任何注释：

```
@Entity
public class Flight implements Serializable {
    @ManyToOne( cascade = {CascadeType.PERSIST, CascadeType.MERGE} )
    @JoinColumn(name="COMP_ID")
    public Company getCompany() {
        return company;
    }
    ...
} 
```

我怀疑两个表 Flight、Company 和 Flight 包含外键 Company_Id。我对吗？如果我在另一侧添加“mappedBy”有什么区别：

```
@Entity
public class Company {
    @OneToMany(mappedBy="company")
    public Set<Flight> getFlights() {
        ...
    }
} 
```

第二种方法将创建多少个表？我想第二种方法建立了双向关联。这两种情况有什么实际区别？@ManyToMany 关联中的“mappedBy”注释也发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:20:10.973

当您使用双向关系时，使用 mappedby 可以避免在两个表中存储关系的更改。从您的示例中，如果您删除 mappedby、flight 和 company，这两个表都将具有关系字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:25:39.720

如果您没有在航班属性上添加任何注释，则将应用默认映射，即`@Basic`. 这意味着列表的全部内容将被序列化并存储在名为航班的列中。

这显然不是你想要的。您想要的是使其成为 Flight 中定义的 ManyToOne 关联的反面。就是`@OneToMany(mappedBy = "company")`这样。

除此之外，您的假设是正确的。ManyToOne 默认使用实体表中的连接列进行映射。使用 JoinColumn 注释允许为连接列指定一个不同于默认名称的名称（以及此连接列的其他属性）。

# sql-server - 在 SQL Server 中处理查询结果

> ID：16121851
> 
> 赞同：1
> 
> 时间：2013-04-20T15:09:34.930
> 
> 标签：sql-server, tsql

有什么方法可以在 SQL Server 中执行查询，然后打印一条包含查询结果数据的消息。

例如，如果我有这样的查询：

```
SELECT ID, FirstName, LastName FROM Customers 
```

对于结果的每一行，我想用这样的东西来跟踪它。

```
Print N'Customer ID: ' + [ID]
Print N'First Name: ' + [FirstName]
Print N'Last Name: ' + [LastName] 
```

我知道我可以使用该`AS`子句来格式化每一列，但数据将始终在表格中格式化。有没有办法在不使用另一种语言处理结果的情况下以不同的方式格式化结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:23:32.300

您可以使用光标：

```
declare @curse cursor
set @curse = cursor fast_forward for
select ID, FirstName, LastName
from Customers

declare @id int,
        @firstName varchar(32),
        @lastName varchar(32)

open @curse

fetch next from @curse into @id, @firstName, @lastName

while (@@fetch_status = 0)
begin
    Print N'Customer ID: ' + @id
    Print N'First Name: ' + @firstName
    Print N'Last Name: ' + @lastName

    fetch next from @curse into @id, @firstName, @lastName
end

close @curse 
```

或者你可以不这样做：

```
select 'Customer ID: ' + cast(ID as varchar(32)) + char(13) + char(10) + 
       'First Name: ' + FirstName + char(13) + char(10) + 
       'Last Name: ' + LastName + char(13) + char(10)
from Customers 
```

如果您使用`Ctrl + T`第二种方式，用于将 SSMS 中的输出从网格模式更改为文本模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:20:36.203

你可以试试这个：

```
DECLARE @customerid varchar(100);
DECLARE @firstname varchar(100);
DECLARE @@lastname varchar(100);

SELECT @customerid=ID, @firstname=FirstName, @lastname=LastName 
FROM Customers

Print N'Customer ID: ' + @customerid
Print N'First Name: ' +  @firstname
Print N'Last Name: ' + @lastname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:36:56.373

如果您只需要数据的垂直格式，那么我仍然建议使用 SELECT 而不是 PRINT：

```
SELECT Lbl, Txt
FROM (
              SELECT ID, 'Customer ID:' As Lbl, CAST(ID As VARCHAR(50)) As Txt       FROM Customers
    UNION ALL SELECT ID, 'First Name:' As Lbl, CAST(FirstName As VARCHAR(50)) As Txt FROM Customers
    UNION ALL SELECT ID, 'Last Name:' As Lbl, CAST(FirstName As VARCHAR(50)) As Txt  FROM Customers
    ) A
ORDER BY ID, Lbl 
```

# javascript - 如何在 javascript 中创建 .replace 循环？

> ID：16121853
> 
> 赞同：1
> 
> 时间：2013-04-20T15:09:44.487
> 
> 标签：javascript, for-loop, replace

我目前正在尝试在 javascript 中创建一个 .replace 函数循环。我想要做的是用连字符替换随机字符，但我正在努力的部分是如何让它循环将字符替换为连字符。这是我到目前为止的代码：

```
 var randHold;
    var randomWord;
    var randLetHold;
    var dispWord;
    var repLetHold;

    var myWords = new Array("Spectrometer", "Bandwagonjghvyjh", "jvjyvyvilvyjlvyv", 
                            "fruitjjyvtyvjv", "seventctcvtv", "weathertfhtcthc", 
                            "undercfxdtfv"); // random letters to make words that have more than 10 letters

    function level() { 
        randHold = parseInt((Math.random() * 6) + 1);//code to randomly pick a word from the above array
        randomWord = myWords[randHold]; //code to call the random word from the array
        randLetHold = (Math.random() * randomWord.length);//code to randomly pick a character from the random word chosen
        repLetHold = randomWord.charAt(randLetHold);//code to call the random character
        for (i = 1; i <= 3; i++) //loop to replace three random characters with a hyphen 
        {
            dispWord = randomWord.replace(repLetHold," - ");//code to replace a random character with a hyphen
            document.write(dispWord);//But all this does is display the word(with ONE hypenated character)three times.
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:20:14.680

对于要在单词中连字符的 3 个随机字符，您需要这样的东西。

```
<div id="result"></div>

var myWords = ["Spectrometer", "Bandwagonjghvyjh", "jvjyvyvilvyjlvyv",
    "fruitjjyvtyvjv", "seventctcvtv", "weathertfhtcthc",
    "undercfxdtfv"]; // random letters to make words that have more than 10 letters

var randomWord;
var dispWord;
var repLetHold = [];

function uniqueCount(str) {
    var unique = [];

    Array.prototype.forEach.call(str, function (value) {
        if (unique.indexOf(value) === -1) {
            unique.push(value);
        }
    });

    return unique.length;
}

function level() {
    var randHold = Math.floor(Math.random() * myWords.length);

    dispWord = randomWord = myWords[randHold];
    if (uniqueCount(randomWord) > 2) {
        var count = 0,
            temp1,
            temp2;

        while (count < 3) {
            temp1 = Math.floor(Math.random() * dispWord.length);

            temp2 = dispWord.charAt(temp1);
            if (temp2 !== "-" && repLetHold.indexOf(temp2) === -1) {
                dispWord = dispWord.replace(new RegExp(temp2, "g"), "-");
                repLetHold[count] = temp2;
                count += 1;
            }
        }
    }

    document.getElementById("result").textContent = dispWord;
}

level();

console.log(randomWord, repLetHold); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/ERDdZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:34:22.983

您的代码实际上看起来不错，主要问题是您在`for`循环之外声明了随机变量。这样做只会为整个循环生成一次。试试这个：

```
var dispWord;

var myWords = new Array("Spectrometer", "Bandwagonjghvyjh", "jvjyvyvilvyjlvyv", 
                        "fruitjjyvtyvjv", "seventctcvtv", "weathertfhtcthc", 
                        "undercfxdtfv"); // random letters to make words that have more than 10 letters

function level() { 
    for (i = 1; i <= 3; i++) //loop to replace three random characters with a hyphen 
    {
        var randHold = parseInt((Math.random() * 6) + 1);//code to randomly pick a word from the above array
        var randomWord = myWords[randHold]; //code to call the random word from the array
        var randLetHold = (Math.random() * randomWord.length);//code to randomly pick a character from the random word chosen
        var repLetHold = randomWord.charAt(randLetHold);//code to call the random character

        dispWord = randomWord.replace(repLetHold," - ");//code to replace a random character with a hyphen
        document.write(dispWord);//But all this does is display the word(with ONE hypenated character)three times.
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:15:04.757

`g`如果您使用正则表达式，则可以使用（全局）标志一次替换所有实例。例如：

```
var str = "this is a mass Spectrometer, which is a Spectrometer to detect the spectra of different masses";
var replaced = str.replace(/Spectometer/g, 'something');
// "this is a mass something, which is a something to detect the spectra of different masses"; 
```

请记住，[某些字符必须](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp#Special_characters_in_regular_expressions)在正则表达式中进行转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:20:27.860

[http://jsfiddle.net/zt8mp/](http://jsfiddle.net/zt8mp/)

如果我的问题是正确的：

```
randomWord.replace(new RegExp(repLetHold,'g')," - ") 
```

替换所有出现的`repLetHold`（只要它不是由特殊的正则表达式字符组成）

# css - CSS 字母间距是否不适用于 Safari 中的 SVG 字体？

> ID：16121858
> 
> 赞同：6
> 
> 时间：2013-04-20T15:09:53.860
> 
> 标签：css, safari, font-face

标题基本概括了所有内容。我正在使用字体松鼠生成字体工具包，并且在 Safari 中遇到字母间距问题。

由于 webkit 浏览器渲染 SVG 字体比 WOFF 字体好得多，我显然想使用 SVG。但是我注意到字母间距似乎在 Safari 中不起作用。这是一个已知的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:19:21.517

可能你可以参考以前的帖子，

[Safari，自定义字体的字母间距](https://stackoverflow.com/questions/10177742/safari-letter-spacing-with-custom-font)

[有没有办法让css字母间距：0.5 px？](https://stackoverflow.com/questions/7811225/is-there-a-way-to-make-css-letter-spacing-0-5-px)

[Safari 错误](https://bugs.webkit.org/show_bug.cgi?id=20606)

这个错误链接说使用 JavaScript 可以分配间距。它的奇怪错误..

我相信这个链接会给你一些见解..

我找到了一个 Fiddle `[Fiddle]`[4](http://jsfiddle.net/MarmeeK/fZYqL/41/)

这会减少你的工作，也许这在 Chrome 中可以正常工作，现在我使用的是 Chrome 的 26 版。我没有安装 safari，因为我不是 safari 爱好者之一。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T21:11:03.890

正如 MarmiK 所指出的，这是 WebKit 错误列表中的一个[已知问题](https://bugs.webkit.org/show_bug.cgi?id=20606)（错误 #20606）。它影响整个 WebKit 的事实意味着它应该出现在 Chrome、Safari 和任何其他 WebKit 浏览器中。

然而，关于这个 bug 的最新消息是，它是在[2013-03-22](https://bugs.webkit.org/show_bug.cgi?id=20606#c31)左右被 Chromium 开发人员之一发现的，这是一个重大进展，因为该 bug 近 4 年没有被[分配](https://bugs.webkit.org/show_bug.cgi?id=20606#c25)。

鉴于最近已经修复了其他印刷/对齐类型的错误（例如[99439](https://bugs.webkit.org/show_bug.cgi?id=99439)，与 implementation 相关`text-align-last`），WebKit 开发社区似乎正在关注其中一些问题。

如果您想跟踪围绕此问题的持续发展，请继续关注[Bug 20606 History](https://bugs.webkit.org/show_activity.cgi?id=20606)或跟踪[Bug 20606 Discussion](https://bugs.webkit.org/show_bug.cgi?id=20606)。第一个链接将向您显示与错误及其开发工作相关的进度/提交/编辑。第二个将向您展示围绕该错误的用户/开发人员对话，以及**Build Bot**[自动生成的评论](https://bugs.webkit.org/show_bug.cgi?id=20606#c35)，因为它针对任何相关的签入代码运行单元测试。

 **最后，要针对此实现的其他基准检查您首选浏览器的任何给定版本，请查看[此链接](http://ohad-etc.s3.amazonaws.com/eReader%20content%20bugs/test2/index.html)。左上角将显示您的浏览器的渲染，下面的屏幕截图将显示其他浏览器（此时有点过时） - 以及它们如何实现非整`letter-spacing`数值。或者，您可以通过参考[这个 jsFiddle](http://jsfiddle.net/MarmeeK/fZYqL/41/)看到类似的东西。**

# java - 通过 PHP 从 java 到 mySQL 的安全三层连接

> ID：16121862
> 
> 赞同：2
> 
> 时间：2013-04-20T15:10:12.070
> 
> 标签：java, php, mysql, security, interface

首先，我知道这个问题已经被问过好几次了，我已经对这个主题做了很多研究，但我似乎无法找到一个明确的答案。我要么在这里遗漏了一些重要的东西，要么这是不可能的，我只是在浪费你的时间。开始：

想象一个数据库，假设它只存储 1000 行，由一个 id、一个必须在某些时候更改的布尔值（0 或 1）和一个带有一些信息的常量字符串值组成。仅当用户在客户端 java 应用程序中提交了所需的操作时，才能访问该信息并且可以更改该值。只有存在才是至关重要的。

在我的万维网搜索过程中，我遇到了两个可以满足我需求的选项。

1.  在数据库本身上为每个用户设置权限，并让用户使用自己的用户名和密码从应用程序登录。然后，客户端应用程序可以按照用户的意愿与数据库通信，根据需要执行读取和写入数据库的任务。

2.  使用三层方法，让 java 应用程序与 PHP 接口通信，该接口执行查询并返回一个编码的 json 字符串，java 应用程序可以解析该字符串。我了解了基本概念，您将客户端的用户名和密码发送到 PHP 接口，该接口检查客户端是否符合条件并相应地执行查询。没什么大不了的。

我似乎无法弄清楚如何只让 java 客户端更改和检索数据。例如，如果有人想知道方法 1 中字符串的内容是什么，他们可以简单地使用他们的用户名和密码并直接查询数据库。反编译后，查询很容易从 java 应用程序中获取。至于#2，如果应用程序被反编译，PHP 接口也可以被逆向工程，允许用户通过利用 PHP 脚本来查询数据库，即使不知道数据库的实际密码和用户名。

我必须指出，用户根本不受信任，数据库的内容应该保密，直到在 java 应用程序中满足某些条件。有没有办法做到这一点？如果有一种我不知道的方法，我肯定不会停留在这两个选项上。感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:55:55.637

我们正在使用 PHP 后端实现类似的 HTML5/Javscript SPA，但随后它向 Java 服务器 API 发出 SOAP 请求以处理所有 MySQL 事务。这样做的好处是客户端只能看到 HTML 和缩小的 Javascript，没有对 Java 服务器的调用，但他们仍然能够看到对我的 PHP 服务器的 AJAX 调用。由于 Java 函数是通过 SOAP 直接从服务器而不是客户端调用的，因此我将 90% 的安全性集中在 HTML5/PHP 服务器上。Java 服务器只需要限制对我的服务器 IP 的访问，并且只接受格式正确的 SOAP 请求。

话虽如此，我已经进行了检查以阻止这种情况，并希望防止 99% 的用户完成“黑客”系统：会话、计时器，以确保客户不会太快或在没有呼叫之前拨打太多电话那，缩小代码，在我的调用中设置特定的标题等等。它会出错吗？是的。但是有记录系统来跟踪尝试。然后，我们可以阻止那些过于频繁地提出无效请求的人或其他人的访问。

最终，类似的设置对您有用，但请记住，记录无效呼叫并定期检查这些呼叫或设置通知系统会减少尝试。如果您在用户可以反编译的 Java 部分中直接使用 MySQL 调用，我不鼓励这样做，而是只在 PHP 服务器上调用处理这些调用的函数。这至少会向用户隐藏数据库描述以阻止黑客攻击。

对于每个应用程序，只需密切监视它。当您看到成功的黑客攻击时，请找出下次阻止它的方法。这样它就永远不会以同样的方式工作两次。

# three.js - 如何将three.js 旋转转换为搅拌机旋转？

> ID：16121868
> 
> 赞同：5
> 
> 时间：2013-04-20T15:10:35.000
> 
> 标签：three.js

我在场景中有一些物体并使用 OrbitControls 在场景中移动相机。我找到了一些理想的相机位置/旋转来进行漂亮的渲染，所以我读取了相机位置和旋转并尝试直接在搅拌机中输入它们以获得相同的视图。

从three.js粘贴到搅拌机相机的位置效果很好 - 我在three.js中获得了与轨道相机相同的位置。即使记住 Y 和 Z 已切换，旋转的工作方式也不同。它不应该以同样的方式工作吗（只是切换 Y 和 Z）？

如果不是这样，如何转换这些值以便能够将搅拌机相机设置在与 three.js 中相同的位置？这是我在 github 上写的带有一些屏幕截图的帖子： [https://github.com/mrdoob/three.js/issues/3348](https://github.com/mrdoob/three.js/issues/3348) 我应该如何读取相机旋转，以便它们以与 three.js 中相同的方式旋转相机？我正在阅读 camera.rotation.x ,y ,z 。我应该从某个全局/局部矩阵或其他方式读取旋转吗？

非常感谢您的帮助。

马切伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:25:42.573

为了能够从一个软件转到另一个软件，您需要找到每个软件使用的坐标系。例如，three.js 使用一个坐标系，其中正 x 向右，正 y 向上，正 z 出现在屏幕外。从我在[http://en.wikibooks.org/wiki/Blender_3D:_Noob_to_Pro/Understanding_Coordinates](http://en.wikibooks.org/wiki/Blender_3D:_Noob_to_Pro/Understanding_Coordinates)看到的（我没有使用过搅拌机）在搅拌机中，正 x 向右，正 y 进入屏幕，正向 z 上升。

所以他们是不同的。但是，如果您将 three.js 系统绕 x 轴旋转 90 度，您将获得搅拌机坐标系。

# python-2.7 - 索引网页时如何使用返回URL的xapian

> ID：16121872
> 
> 赞同：0
> 
> 时间：2013-04-20T15:11:09.493
> 
> 标签：python-2.7, search-engine, xapian

我正在使用 Ubuntu 12.04、Python 2.7

我从给定 URL 获取内容的代码：

```
def get_page(url):
'''Gets the contents of a page from a given URL'''
    try:
        f = urllib.urlopen(url)
        page = f.read()
        f.close()
        return page
    except:
        return ""
    return "" 
```

要过滤由提供的页面的内容`get_page(url)`：

```
def filterContents(content):
'''Filters the content from a page'''
    filteredContent = ''
    regex = re.compile('(?<!script)[>](?![\s\#\'-<]).+?[<]')
    for words in regex.findall(content):
        word_list = split_string(words, """ ,"!-.()<>[]{};:?!-=/_`&""")
        for word in word_list:
            filteredContent = filteredContent + word
    return filteredContent

def split_string(source, splitlist):
    return ''.join([ w if w not in splitlist else ' ' for w in source]) 
```

如何对 in 进行索引`filteredContent`，`Xapian`以便在查询时返回`URLs`查询所在的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:28:21.660

我不完全清楚您`filterContents()`和`split_string()`实际尝试做什么（丢弃一些 HTML 标记内容，然后分词），所以让我谈谈一个类似的问题，它没有复杂性。

假设我们有一个`strip_tags()`只返回 HTML 文档的文本内容的函数，以及您的`get_page()`函数。我们想建立一个 Xapian 数据库，其中

*   每个文档代表从特定 URL 提取的资源表示
*   该表示中的“单词”（已通过`strip_tags()`）成为索引这些文档的可搜索词
*   每个文档都包含作为其[文档数据](http://xapian.org/docs/apidoc/html/classXapian_1_1Document.html#b1b0da2e7c76acd754f29a52e14f89ae)的 URL，它是从中提取的。

所以你可以索引如下：

```
import xapian
def index_url(database, url):
    text = strip_tags(get_page(url))
    doc = xapian.Document()

    # TermGenerator will split text into words
    # and then (because we set a stemmer) stem them
    # into terms and add them to the document
    termgenerator = xapian.TermGenerator()
    termgenerator.set_stemmer(xapian.Stem("en"))
    termgenerator.set_document(doc)
    termgenerator.index_text(text)

    # We want to be able to get at the URL easily
    doc.set_data(url)
    # And we want to ensure each URL only ends up in
    # the database once. Note that if your URLs are long
    # then this won't work; consult the FAQ on unique IDs
    # for more: http://trac.xapian.org/wiki/FAQ/UniqueIds
    idterm = 'Q' + url
    doc.add_boolean_term(idterm)
    db.replace_document(idterm, doc)

# then index an example URL
db = xapian.WritableDatabase("exampledb", xapian.DB_CREATE_OR_OPEN)

index_url(db, "https://stackoverflow.com/") 
```

搜索就很简单了，尽管如果需要它显然可以变得更复杂：

```
qp = xapian.QueryParser()
qp.set_stemmer(xapian.Stem("en"))
qp.set_stemming_strategy(qp.STEM_SOME)
query = qp.parse_query('question')
query = qp.parse_query('question and answer')
enquire = xapian.Enquire(db)
enquire.set_query(query)
for match in enquire.get_mset(0, 10):
    print match.document.get_data() 
```

这将显示“ [https://stackoverflow.com/](https://stackoverflow.com/) ”，因为当您未登录时，主页上会显示“问答”。

我建议您查看[Xapian 入门指南](http://getting-started-with-xapian.readthedocs.org/en/latest/)，了解概念和代码。

# node.js - 快递用户未定义

> ID：16121873
> 
> 赞同：1
> 
> 时间：2013-04-20T15:11:30.963
> 
> 标签：node.js, express

嗨，我一直在学习[本](http://www.youtube.com/watch?v=RoSX87kZoJQ)教程，但遇到了问题。

在我的 edit.jade 文件中，我有这个 -

```
form(method="POST", action="/users/")
    input(type="hidden", name="_method", value="PUT")
p Name:
    input#name(type="text", name="name", value="#{user.name}")
p Email:
    input#email(type="email", name="email", value="#{user.email}")
p Age:
    input#age(type="number", name="age", value="#{user.age}")
p: button(type="submit") Update 
```

我用这段代码调用视图 -

```
app.param('name', function (req, res, next, name){
Users.find({ name: name }, function (err, docs) {
    req.user = docs[0];
    next();
});
});
app.get('/users/:name/edit', function (req, res){
res.render("users/edit", { user: req.user });
}); 
```

但是，在渲染 edit.jade 文件时，会抛出此错误 -

```
ReferenceError: edit.jade:6
4|      input(type="hidden", name="_method", value="PUT")
5|  p Name:
> 6|        input#name(type="text", name="name", value="#{user.name}")
7|  p Email:
8|      input#email(type="email", name="email", value="#{user.email}")
9|  p Age:

user is not defined
at eval (eval at <anonymous> (/usr/local/lib/node_modules/jade/lib/jade.js:171:8),<anonymous>:32:99)
at /usr/local/lib/node_modules/jade/lib/jade.js:172:35
at /usr/local/lib/node_modules/jade/bin/jade:154:17
at /usr/local/lib/node_modules/jade/node_modules/mkdirp/index.js:38:26
at Object.oncomplete (fs.js:107:15) 
```

这对我来说毫无意义。它确实使用字段中的正确值呈现页面，但我无法提交表单。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:15:18.770

通过使用：

```
app.param('name', function (req, res, next, name){
  //...
}); 
```

您正在将参数映射`name`到从数据库中检索到的用户。您当前正在从您的 URL 中提取此参数：

```
app.get('/users/:name/edit', function (req, res){
  // ...
}); 
```

令牌告诉 Express 它应该调用上面的`:name`代码并检索将保存在请求地址中的用户。

但是，模板中的表单向 发出请求`/users/`，但未指定用户。因此，您可以为表单生成正确的 URL：

```
form(method="POST", action="/users/#{user.name}/xxx") 
```

否则该方法将失败。

我不知道教程的细节，但我想应该有另一个请求处理程序将这些参数保存到数据库中。

# hornetq - Hornetq 中无消费者转发的开销是多少？

> ID：16121876
> 
> 赞同：1
> 
> 时间：2013-04-20T15:11:57.883
> 
> 标签：hornetq

动机：我正在尝试解决我的 HornetQ 消息传递系统的设计，并且我想避免设置会在集群节点之间引入大量额外的网络往返和可能的锁定。如果有很多开销，我会建立一个系统来确保与所有节点的连接。当然我想依靠参数并避免额外的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:36:13.273

您可以在不需要的情况下通过集群队列传输消息。这就是开销。如果您在另一个节点上没有消费者，最好根本不传输消息。

重新分发最终会将消息发送回需要的地方。但这是不必要的往返。

# c# - 如何将列表框连接到表c#winforms

> ID：16121883
> 
> 赞同：1
> 
> 时间：2013-04-20T15:12:31.173
> 
> 标签：c#, sql, sql-server, winforms

我有一个表格和一个带有`listBox1`. 我希望表中一列的值将显示在`listBox1`. 例如：

表列： Id ， Name ， Phone

表格行：

```
 1 , abc , 123 

        2 , atg , 124

        24 , awt, 155 
```

在 listBox1 中：

```
 1

         2

         24 
```

我还需要知道我从 listBox1 中单击了哪个。例如：我点击了 '24' 中`listBox1`的值 '24' 将显示在`textBox1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:14:23.030

你设置了这些属性吗？

```
listBox1.DataSource = yourTable;
listBox1.DisplayMember = "Name";
listBox1.ValueMember = "ID"; 
```

这样，您的列表框将显示列名，但是当您单击一个项目时，您可以获得与该名称关联的值（ID）

```
 private void ListBox1_SelectedValueChanged(object sender, EventArgs e)
    {
        if (listBox1.SelectedIndex != -1)
        {
            int personID = Convert.ToInt32(listBox1.SelectedValue.ToString());
            .......
        }
    } 
```

# php - php zip 存档内存、内存和最大文件大小

> ID：16121885
> 
> 赞同：12
> 
> 时间：2013-04-20T15:12:42.587
> 
> 标签：php, memory-management, ram, ziparchive

我有一些文件夹，其中包含用户生成的图像，这些图像变得相当大。尝试压缩这些文件时，我收到大约 1.5 gig 大小的 zip 文件的错误。

我的问题与内存有关，我认为 php 将 zip 和所有图像都保存在内存中。我有一个可能的解决方案是在上传时将每个图像发送到 zip 文件以及相应的文件夹，这似乎到目前为止有效，但 zip 文件大小的限制是什么，从我能找到的 4 GB 左右。这如何影响/与服务器上的 ram 数量相互作用？\并且限制实际上是 4gb 还是我可以无限期地继续将文件添加到 zip 或者我应该让脚本检查 zip 的大小以及它是否超过 X gigs 重命名它并创建一个新的 zip。我搜索了谷歌并阅读了文档，但发现了相互矛盾的信息或不完整的信息，因此我正在寻找一些明确的答案和建议。谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-25T15:19:58.003

In case you still want to use the PHP [ZipArchive](http://www.php.net/manual/en/class.ziparchive.php), there are a few things you can do to prevent certain server/OS limitations:

*   **Memory** Although it might seem obvious in your case, i have seen many examples on how to use ZipArchive that use [addFromString](http://www.php.net/manual/en/ziparchive.addfromstring.php) to add a new File to the archive. DON'T! This will allocate memory to open the file and store its content in it, which will make you run out of memory fast, use [addFile](http://www.php.net/manual/en/ziparchive.addfile.php) instead. Make also sure that you free all the memory you don't need.

*   **Execution time** Increase the maximum execution time for your script, either via the php.ini, or with [ini_set](http://php.net/ini_set) (e.g. `ini_set('max_execution_time', 600);` to have a maximum execution time of 10min)

*   **File Handles** Some OS have limits on the number of open files which can cause a problem because PHP only adds the files to the zip once you close the zip file. To prevent problems with the number of open files just close and reopen the zip file every x files (e.g. every 1000), this will force PHP to compress and add the files already assigned to the archive.

*   **File Size** There may be some file size limitations of the OS, a bigger file also means that PHP needs more memory to manage it, so i personally prefer to use a maximum file size after which i just open a new zip file using an index number. If the exact file size does not matter to you, you can just count the size of the files going into the archive and then switch after you reach a certain limit, or you can close the archive every x files and check its size on disk to decide wether to start a new archive or not (remember, the files get only compressed once you *close* the archive)

I personally like to limit the filesize by getting the size of the files going into the archive and applying a likely compression factor to it to see when the maximum archive size will probably be reached (jpg files ~0.9, zip files = 1, text files ~0.10, ...) and then switch to the next volume.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T16:25:49.123

使用 php exec 并在命令行调用 zip 工具

```
 exec("tar -zcvf archive.tar.gz /folder/tozip"); 
```

确保执行 php 文件的用户有权访问您要压缩的文件夹

并注意注入代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-15T12:37:04.077

由于流或内存可能仍在使用中，您必须在每个/某些文件之后从内存中“刷新”存档：

```
$zip->close();
unset($zip);
$zip = new ZipArchive;
$zip->open("arch.zip"); 
```

# haskell - 刚性类型错误结合 IO 和多态类型

> ID：16121891
> 
> 赞同：1
> 
> 时间：2013-04-20T15:13:08.707
> 
> 标签：haskell

我正在为一种简单的语言编写解释器作为大学项目，并且可以选择编写一些调试功能。我认为这很简单，但由于沮丧而休息了大约一周后，我回来处理这个问题。

整个 haskell 文件大约有 250 行，所以我不想发布整个内容，但如果我没有提供足够的信息，请告诉我。

我有这个功能

```
interpret_statement :: Prog -> (Var -> Val -> Vars -> o) -> Vars -> Stmt -> o 
```

其中 (Var -> Val -> Vars -> o) 是调试功能 - 我选择的两种可能性之一

```
pure_passthrough :: Var -> Val -> Vars -> Vars -- does no IO
write_debugging_info :: Var -> Val -> Vars -> IO Vars -- does IO 
```

我还有另一个功能

```
interpret_function :: Prog -> (Var -> Val -> Vars -> o) -> Vars -> [Stmt] -> Val 
```

其中包含一行

```
interpret_function prog debug_function vars (x:xs) = interpret_function prog debug_function (interpret_statement prog debug_function vars x) xs 
```

并且是 3 行之一，它给了我一个严格的类型错误，说

```
Expected type: Var -> Val -> Vars -> Vars
Actual type: Var -> Val -> Vars -> o 
```

在尝试引入 IO 之前，一切都运行良好。我这样做是因为这个站点上的一个单独问题的答案建议我使用多态函数来告诉程序是否在运行时执行 IO，具体取决于我是否收到命令行参数。

但是现在它会引起问题，因为我现在需要将多态变量传入和传出几个相互依赖的函数？哦人类！我真的认为我在 Haskell 方面做得越来越好，但这个让我完全难过。“实际类型” Var -> Val -> Vars -> o 是多态的而不是真正具体的？

注意：如果我需要包含更多信息，请告诉我 - 我已经尽可能少地开始，所以我不会让人们使用不必要的信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:50:01.017

调用`(interpret_statement prog debug_function vars x)`处于它必须返回的位置`Vars`，它不能返回类型`o`。

在`interpret_function`中，返回类型不依赖于`o`，所以即使你传入一个返回 IO monad 的调试函数， 的结果`interpret_function`也不是 IO monad。

我的 Haskell 有点生锈，但我相信你可以改变`interpret_function`它的类型

```
interpret_function :: (Monad m) => Prog -> (Var -> Val -> Vars -> m Vars) -> Vars -> [Stmt] -> m Val 
```

哪里`m`将是`IO`或者一些微不足道的单子（[也许是这个](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Identity.html)）。

现在，该特定案例的实现将如下所示：

```
interpret_function prog debug_function vars (x:xs) =
  do vars' <- interpret_statement prog debug_function vars x
     return $ interpret_function prog debug_function vars' xs 
```

# android - 如何通过打开新屏幕来修复我的 ANR

> ID：16121894
> 
> 赞同：0
> 
> 时间：2013-04-20T15:13:18.193
> 
> 标签：android, android-activity, android-anr-dialog

当我用按钮打开一个新屏幕时，我的应用程序不会响应并显示 ANR，因为我的应用程序需要很长时间才能加载页面，但我不知道如何解决我的问题。

它适用于较旧的 android 设备，但在我的设备上，该应用程序已停止:'(

如果您需要更多信息，请询问；）

我有一个在最新版本的 android 4.1.1 上运行的 HTC one X 我有一个应用程序，您可以免费收听和下载音乐，我在 1 个布局上有很多视图，超过 80 个视图，这就是问题所在。

我可以给你代码，但我所有的代码都可以正常工作，因为在 android 3.3.7 上，三星 Galaxy mini 上一切正常。问题是我想给我的应用程序更多时间来打开新屏幕，因为我已经读到 5 秒后自动弹出 ANR

***日志猫：***

```
04-17 22:26:48.333: I/dalvikvm(20428):   at dalvik.system.NativeStart.main(Native Method)
04-17 22:26:48.333: E/dalvikvm(20428): Out of memory: Heap Size=65571KB, Allocated=62502KB, Limit=65536KB
04-17 22:26:48.333: E/dalvikvm(20428): Extra info: Footprint=63651KB, Allowed Footprint=65571KB, Trimmed=0KB
04-17 22:26:48.333: D/skia(20428): --- decoder->decode returned false
04-17 22:26:48.333: W/dalvikvm(20428): threadid=1: thread exiting with uncaught exception (group=0x41b4e2d0)
04-17 22:26:48.348: E/AndroidRuntime(20428): FATAL EXCEPTION: main
04-17 22:26:48.348: E/AndroidRuntime(20428): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.listentomusic/com.example.listentomusic.March}: android.view.InflateException: Binary XML file line #1209: Error inflating class <unknown>
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2351)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.ActivityThread.access$600(ActivityThread.java:151)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.os.Looper.loop(Looper.java:155)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.ActivityThread.main(ActivityThread.java:5485)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at dalvik.system.NativeStart.main(Native Method)
04-17 22:26:48.348: E/AndroidRuntime(20428): Caused by: android.view.InflateException: Binary XML file line #1209: Error inflating class <unknown>
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:365)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.Activity.setContentView(Activity.java:1912)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at com.example.listentomusic.March.onCreate(March.java:15)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.Activity.performCreate(Activity.java:5066)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1101)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
04-17 22:26:48.348: E/AndroidRuntime(20428):    ... 11 more
04-17 22:26:48.348: E/AndroidRuntime(20428): Caused by: java.lang.reflect.InvocationTargetException
04-17 22:26:48.348: E/AndroidRuntime(20428):    at java.lang.reflect.Constructor.constructNative(Native Method)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
04-17 22:26:48.348: E/AndroidRuntime(20428):    ... 26 more
04-17 22:26:48.348: E/AndroidRuntime(20428): Caused by: java.lang.OutOfMemoryError: (Heap Size=65571KB, Allocated=62502KB)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:626)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:473)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.content.res.Resources.loadDrawable(Resources.java:1959)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.widget.ImageView.<init>(ImageView.java:120)
04-17 22:26:48.348: E/AndroidRuntime(20428):    at android.widget.ImageView.<init>(ImageView.java:110)
04-17 22:26:48.348: E/AndroidRuntime(20428):    ... 29 more 
```

xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/standaard_background" >

     <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/maart"
        android:textSize="30sp"
        android:textColor="#FFFFFF"
        android:background="#000000" />

     <android.support.v7.widget.Space
         android:id="@+id/space1"
         android:layout_width="fill_parent"
         android:layout_height="15dp" />

     <ListView
         android:id="@+id/scrollView1"
         android:layout_width="match_parent"
         android:layout_height="match_parent" >

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:orientation="vertical" >
<!-- start -->             
<!-- song1 -->      
             <TextView
                 android:id="@+id/textView2"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:text="@string/s1" 
                 android:background="#FFFFFF"/>

             <ImageView
                 android:id="@+id/imageView1"
                 android:layout_width="match_parent"
                 android:layout_height="137dp"
                 android:contentDescription="@string/imageView1"
                 android:src="@drawable/a" />

             <LinearLayout 
                 android:orientation="horizontal"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content">

               <Button 
                 android:text="@string/play" 
                 android:id="@+id/btnsong1_1" 
                 android:layout_width="fill_parent" 
                 android:layout_height="wrap_content"
                 android:layout_weight="1">
               </Button>

               <Button 
                 android:text="@string/download" 
                 android:id="@+id/btnsong1_2" 
                 android:layout_toRightOf="@id/btnsong1_1"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:layout_weight="1">
               </Button>
             </LinearLayout>

...

<!-- song40 -->              
             <TextView
                 android:id="@+id/textView41"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:text="@string/s40" 
                 android:background="#FFFFFF"/>

             <ImageView
                 android:id="@+id/imageView40"
                 android:layout_width="match_parent"
                 android:layout_height="137dp"
                 android:contentDescription="@string/imageView1"
                 android:src="@drawable/zn" />

             <LinearLayout 
                 android:orientation="horizontal"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content">

               <Button 
                 android:text="@string/play" 
                 android:id="@+id/btnsong40_1" 
                 android:layout_width="fill_parent" 
                 android:layout_height="wrap_content"
                 android:layout_weight="1">
               </Button>

               <Button 
                 android:text="@string/download" 
                 android:id="@+id/btnsong40_2" 
                 android:layout_toRightOf="@id/btnsong40_1"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:layout_weight="1">
               </Button>
             </LinearLayout>

<!-- end -->   

        </LinearLayout>

     </ListView>

</LinearLayout> 
```

.java：

```
package com.example.listentomusic;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Menu extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);

        Button btnmarch = (Button) findViewById(R.id.btnmarch);
        btnmarch.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
             // TODO Auto-generated catch block
            startActivity(new Intent("android.intent.action.MARCH"));

                } 
        });
    }
} 
```

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.listentomusic"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.listentomusic.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Menu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

         <activity
            android:name=".About"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.ABOUT" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity 
            android:name=".March"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MARCH" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
         </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:44:46.113

> 记不清：

这是您需要解决的问题。

> 我对 1 个布局有很多意见，超过 80 个意见，这就是问题所在。

尝试减少视图数量并运行我认为它会运行问题是您在布局中创建的大量视图。这会因设备而异，某些设备可能支持您拥有的大量视图。

我最近遇到了一个类似的问题，布局在大多数主要设备（三星、摩托罗拉、LG）上运行良好，但在索尼 Xperia S 上崩溃。

# jquery - 用于 Simpleform 的 JQuery Datepicker，就像在 ActiveAdmin 中一样

> ID：16121895
> 
> 赞同：0
> 
> 时间：2013-04-20T15:13:20.403
> 
> 标签：jquery, ruby-on-rails, ruby, datepicker, activeadmin

在 Active Admin 中，我可以执行以下操作，这将呈现一个不错的 Datepicker，而不是一组 Dropdown 字段：

```
f.input :some_date, :as => :datepicker 
```

![在此处输入图像描述](https://i.stack.imgur.com/jtJzw.png)

但是，当我使用自定义表单执行此操作时，出现以下错误：

```
No input found for datepicker 
```

但是，这在 Active-Admin 之外不起作用。是否有一种简单的方法可以对任何基于 simple_form 的表单执行相同的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:08:31.603

你可以用简单的形式做我所做的事情：（包括设置为今天按钮=P）

为日期选择器字段添加 javascript...

```
// my_javascript.js
$('#position_buy_date').datepicker({
    showOtherMonths: true,
    dateFormat: 'yy-mm-dd'
});
$('#set_buy_date').on('click', function (){
    $('#position_buy_date').datepicker('setDate', new Date());
}); 
```

修改输入字段为字符串

`<%= f.input :buy_date, as: :string, hint: button_tag('Set as today', type: 'button', class: 'btn', id: 'set_buy_date') %>`

# asp.net - 成功构建后自动将 Web 应用程序发布到文件系统

> ID：16121897
> 
> 赞同：0
> 
> 时间：2013-04-20T15:13:37.093
> 
> 标签：asp.net, visual-studio-2010, webforms

我在 VS2012 中创建了一个发布配置文件，用于将 Web 应用程序发布到指定文件夹。但是我需要 VS2012 在成功构建后自动发布它。我浏览了所有项目设置，但没有找到任何提示。

有什么解决方案可以做到这一点？

**编辑** 为了澄清，在 TFS 上有这样做的答案。但是开发人员本地机器上有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:16:03.337

当您发布它时，它将自动（重新）构建 Web 应用程序

您可以单击发布按钮，而不是重新构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:18:17.110

当您创建您的`build definition`in 时`Team Explorer`，您调整您的目录部署，您定义`Build Default section` 您在图片上备注部署路径

注意：您可以指定 UNC 路径。

![在此处输入图像描述](https://i.stack.imgur.com/IUgc4.jpg)

# c++ - 如何在 C++ 中使用 unsigned long long int 类型表示一定的秒数（分钟）

> ID：16121900
> 
> 赞同：0
> 
> 时间：2013-04-20T15:13:52.567
> 
> 标签：c++, types, casting, performancecounter

我需要执行 64 秒的操作。每 8 秒我需要执行另一个操作。因为我需要一个极端的时间精度，所以我正在使用`QueryPerformanceFrequency`和`QueryPerformanceCounter`. 如果我想执行 64 秒或 8 秒的操作，我该如何用 type 表示这些秒数`unsigned long long int`？当我不需要这种精度时，我做了类似的事情：

```
const int TIME_TO_RUN= 64;
time_t startTime = 0;
...
time (& startTime);
while (difftime (time (NULL), startTime) <TIME_TO_RUN) {
    do something
} 
```

现在我正在这样做。

```
typedef unsigned long long int accurateTime;

//GetCurrentTime void (* accurateTime time) {
  void GetCurrentTime(accurateTime *time) {

    LARGE_INTEGER frequency, currentCount;
    QueryPerformanceFrequency (& frequency); / / Units is (counts / sec)
    QueryPerformanceCounter (& currentCount);
    * time = (accurateTime) (currentCount.QuadPart / (frequency.QuadPart/1000000));
}

int main () {
    accurateTime startTime = 0;
    accurateTime CurrentTime = 0;
    ...
    GetCurrentTime (& startTime);
    while (true) {
        GetCurrentTime (& currentTime);
        if (currentTime-startTime <TIME_TO_RUN) {
            do something...
        }
    }
} 
```

显然在这种情况下不起作用，因为`TIME_TO_RUN`is an`int`并`currentTime-startTime`返回 an `unsigned long long int`。如果声明`TIME_TO_RUN`为

```
const unsigned long long int TIME_TO_RUN = 8; 
```

不起作用。如何用无符号长长表示八秒。

感谢您的回答。

编辑：我无法解决这个问题。

```
#define NUMBER_STIMULI 8
#define DURATION_STIMULI 7
#define TIME_WAIT 1
#define SELECT_STIMULI_TIME 4
#define TIME_TO_RUN NUMBER_STIMULI*(DURATION_STIMULI + TIME_WAIT + SELECT_STIMULI_TIME)

...

LARGE_INTEGER startTime, currentTime, timeToRun, waitTime, lastWaitTime, stimuliTime, lastStimuliTime, endTime, frequency, selectStimuliTime, lastSelectStimulitiTime;

QueryPerformanceFrequency(&frequency);

QueryPerformanceFrequency(&waitTime);
waitTime.QuadPart*=TIME_WAIT;

QueryPerformanceFrequency(&selectStimuliTime);
selectStimuliTime.QuadPart*=SELECT_STIMULI_TIME;

QueryPerformanceFrequency(&stimuliTime);
stimuliTime.QuadPart*=(TIME_WAIT+DURATION_STIMULI+SELECT_STIMULI_TIME);

QueryPerformanceFrequency(&timeToRun);
timeToRun.QuadPart*=TIME_TO_RUN;

...

QueryPerformanceCounter(&startTime);

for(;;) {
    QueryPerformanceCounter(&currentTime);
    if(currentTime.QuadPart-startTime.QuadPart<timeToRun.QuadPart) { //run for 96 seconds
        if((currentTime.QuadPart-lastStimuliTime.QuadPart>=stimuliTime.QuadPart) { each 12 seconds
            QueryPerformanceCounter(&lastStimuliTime);
            QueryPerformanceCounter(&lastSelectStimulitiTime);
            }
        else { //for 12 seconds
            if((currentTime.QuadPart-lastSelectStimulitiTime.QuadPart<selectStimuliTime.QuadPart)) { //wait for 4 seconds
                QueryPerformanceCounter(&lastWaitTime);
            }
            else {
                if(currentTime.QuadPart-lastWaitTime.QuadPart<waitTime.QuadPart) { //wait for 1 second
                }
                else { for 7 seconds
                    make something;
                }
            }
        }
    }
} 
```

在这个例子中，我需要运行 96 秒。每 12 秒我需要更改目标。在这 12 秒内，我需要 4 秒的休息时间和 1 秒的时间等待一些变化。最后 7 秒我需要执行一些操作。
问题是应用程序没有运行 96 秒，而是在几秒钟后结束。当应用程序终止时，我没有收到任何错误。
在我使用过这个的另一个应用程序中`if (currentTime.QuadPart-startTime.QuadPart <timeToRun.QuadPart)`，我可以运行该应用程序所需的时间。

编辑2：
计时器有任何问题。问题是由于我使用的索引比数组的长度长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:44:29.373

你期待`frequency.QuadPart/1000000`做什么？

我想你正在寻找这样的东西？

```
LARGE_INTEGER startTime, endTime, freq;

QueryPerformanceFrequency(&freq); // freq holds the number of ticks in 1 second.
freq.QuadPart *= 8; // and now in 8 seconds.

QueryPerformanceCounter(&startTime);

for(;;)
{
    QueryPerformanceCounter(&endTime);

    if((endTime.QuadPart - startTime.QuadPart) >= freq.QuadPart)
    {
        // 8 seconds have passed.
        break;
    }

    // do something.
} 
```

# python - 是否可以在 Django 1.5.1 中将动态属性与 Q 对象一起使用？

> ID：16121901
> 
> 赞同：1
> 
> 时间：2013-04-20T15:14:00.290
> 
> 标签：python, django, django-models, django-1.5, django-q

我正在使用`django-transmeta`翻译字段，我需要使用这些翻译字段执行一些搜索。

假设我们有一个模型，其中包含一个名为 的可翻译字段`translated_field`。

在**第一种方法**中，我们可以像往常一样思考一些事情，例如：

```
Q(translated_field__icontains="some value")  # This fails, as `translated_field` field does not exist 
```

第二种**方法**是硬编码所有可能的语言版本。例如：

```
Q(translated_field_en__icontains="some value")  # English version
Q(translated_field_es__icontains="some value")  # Spanish version
# Add as many as available languages 
```

这第二个选项似乎真的是硬编码的，我想知道是否有可能的**第三个选项**做类似的事情：

```
Q(getattr("translated_field") + get_language() + "__icontains"="some value")  # pseudocode 
```

甚至更好... **kwargs 有没有使用 Q 对象的选项？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:41:54.107

您可以动态生成查找参数名称，将其用作字典键，然后`**kwargs`在创建 Q 对象时使用。

```
field_name_contains = "translated_field" + get_languaage() + "__icontains")
kwargs = {field_name_contains: "some value"}
q = Q(**kwargs) 
```

# r - R barplot Y轴刻度太短

> ID：16121903
> 
> 赞同：28
> 
> 时间：2013-04-20T15:14:03.303
> 
> 标签：r, plot, bar-chart, axis

我正在尝试生成条形图，但 y 轴刻度太短。这是我的代码：

```
barplot(as.matrix(dat), log="y", ylim=c(10000,100000000), beside=TRUE,
        ylab = "Number of reads", col = c("gray","black","white")) 
```

![短y轴](https://i.stack.imgur.com/TVe38.png)

它为轴留出了空间（根据 ylim），但没有填充实际的轴。我已经通过`?barplot`并尝试了一些事情（从谷歌搜索我认为`xpd = F, yaxs = c(10000,10000000,5)`应该工作，但它没有）。

我知道这是一件小事，但这正是我多年来一直困扰的问题，而不是实际工作，所以任何帮助将不胜感激！

编辑：为输入的家伙干杯！

我最初确实在没有 ylim 的情况下绘图，但它最终得到了一个更奇怪的轴（同样的问题）；我实际上选择了我的 ylim 值来给它一个更好的间隔轴。 ![原版没有ylim](https://i.stack.imgur.com/zbN0Z.png)

这是数据：

```
dat <- read.table(text="D2,D3n,D3m,D4n,D4m
21234722,34262282,31920464,25486357,20712943
35343,64403,22537,39934,46547
126646,312286,101105,81537,76944", header=TRUE, sep=",") 
```

编辑 2：@DWin 说得对 - 我更新了我的 R，现在它绘制得很好 - 谢谢大家！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-20T15:44:30.513

我看到您尝试设置`ylim`，但您给出了错误的值。这将改变绘图的比例（如缩放）。例如看到这个：

```
par(mfrow=c(2,1))
tN <- table(Ni <- stats::rpois(100, lambda = 5))
r <- barplot(tN, col = rainbow(20),ylim=c(0,50),main='long y-axis')
r <- barplot(tN, col = rainbow(20),main='short y axis') 
```

![在此处输入图像描述](https://i.stack.imgur.com/dTmQg.png) 另一种选择是不使用轴进行绘图并使用`axis`and手动设置它们`usr`：

```
require(grDevices) # for colours
par(mfrow=c(1,1))
r <- barplot(tN, col = rainbow(20),main='short y axis',ann=FALSE,axes=FALSE)
usr <- par("usr")
par(usr=c(usr[1:2], 0, 20))
axis(2,at=seq(0,20,5)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/V0Yo0.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-05-05T20:37:58.387

最简单的解决方案似乎是指定`ylim`范围。这是一些自动执行此操作的代码（左侧默认，右侧 - 调整）：

```
# default y-axis
barplot(dat, beside=TRUE)

# automatically adjusted y-axis
barplot(dat, beside=TRUE, ylim=range(pretty(c(0, dat)))) 
```

[![图像](https://i.stack.imgur.com/VlzeE.png)](https://i.stack.imgur.com/VlzeE.png)

诀窍是使用`pretty()`which 返回涵盖所提供数据的所有值的间隔中断列表。它保证最大返回值是 1) 一个整数 2) 大于数据中的最大值。

在示例中还添加了 0，以`pretty(c(0, dat))`确保轴从 0 开始。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2016-08-20T12:35:01.433

```
barplot(data) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/pNOPS.jpg)](https://i.stack.imgur.com/pNOPS.jpg)

```
barplot(data, yaxp=c(0, max(data), 5)) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/LSqgk.jpg)](https://i.stack.imgur.com/LSqgk.jpg)

yaxp=c(minY-axis, maxY-axis, Interval)

# jquery - jquery 函数不调用新添加的 ajax 数据

> ID：16121905
> 
> 赞同：0
> 
> 时间：2013-04-20T15:14:19.533
> 
> 标签：jquery

在这里，用户正在对消息添加评论。ajax调用用于在数据库中添加评论，然后评论显示到jsp页面。

对于每个评论都有一个删除按钮的问题是新添加的 ajax 评论没有调用 delete jquery 方法。如果我刷新页面，那么在它调用删除方法之后。

我希望新添加的 ajax 注释的删除方法应该在不刷新页面的情况下调用。

ajax 调用以添加评论（正常工作将数据添加到 DB 并在 jsp 页面中显示）

```
$('.commentbox').on('keydown', function(event) {
        parentId=$(this).parent().attr("id");

        var idis='#'+parentId;
        var commentOn = $(idis).find('input[name="commentOn"]').val();
        var commentIs = $(idis).find('textarea[name="commentbox"]').val();
        var dataString1 = 'commentOn='+ commentOn
            +'&comment='+commentIs;
        $("#comment").val('');
        event.preventDefault();
        $.ajax({   
            type: "POST",   
            url: "addmessagecomment", 
            dataType: "text html",
            data: dataString1,   
            success: function(data) { 
                var divtoadd="#comments_"+commentOn;
                $(divtoadd).append(data); 
                $(idis).find('textarea[name="commentbox"]').val("");
            }     
        }); 
    }); 
```

用于删除评论（页面刷新后不调用新添加的 ajax 评论工作）

```
$('.deletecomment').click(function (f){

        var parentId=$(this).parents('.single_comment').attr('id');
        var todel=parentId.replace("comment_","");
        $.post('deletecomment?commentId='+todel, function(data) {
            $('#'+parentId).remove();

        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:19:30.833

代替

```
$('.deletecomment').click(function (f){ 
```

和

```
$(document).on('click','.deletecomment', function (f) { 
```

.. 因为第一个变体仅将侦听器添加到加载初始 DOM 时存在的元素。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:18:02.623

你可以做这样的事情。代替：

```
parentId=$(this).parent().attr("id");
var idis='#'+parentId; 
```

和：

```
parentId=$(this).parent();
var idis=$(parentId); 
```

* * *

而对于AJAX后加东西的问题，需要委托功能。代替：

```
$('.deletecomment').click(function (f){ 
```

和：

```
$('body').on('click', '.deletecomment', function (f) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T15:21:20.397

您需要将事件处理程序绑定到页面上已经存在的东西；新增项目不绑定。因此，将您的删除更改为：

```
$('body').on('click', '.deletecomment', function (f){
    // stuff...
}); 
```

主选择器应该是您确定不会被 Ajax 修改的最接近的元素 - 我使用`'body'`纯粹是因为我不知道您的标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:22:30.753

您的意思是只有新添加的评论 div 的删除按钮不起作用？

为此，您将不得不使用`live`或`on`运行

```
$('.deletecomment').on('click', function (f){

        var parentId=$(this).parents('.single_comment').attr('id');
        var todel=parentId.replace("comment_","");
        $.post('deletecomment?commentId='+todel, function(data) {
            $('#'+parentId).remove();

        });

}); 
```

只是`click`不适用于动态添加的元素，

有关更多详细信息，请参见[jquery on function](http://api.jquery.com/on/)

# java - 在 Netbeans 中加载 DLL

> ID：16121909
> 
> 赞同：0
> 
> 时间：2013-04-20T15:14:38.947
> 
> 标签：java, dll, java-native-interface, jna, unsatisfiedlinkerror

我正在尝试在 Netbeans 7.0.1 中加载 DLL 文件，

代码是

```
dll = (RRHFEK02DLL)Native.loadLibrary("RRHFEK02DLL.dll", RRHFEK02DLL.class);
utility = (Utilities)Native.loadLibrary("Utilities.dll",Utilities.class);
wraper =(RRHFEK02Wrapper)Native.loadLibrary("RRHFEK02Wrapper.dll", RRHFEK02Wrapper.class); 
```

第一行没有错误，这行在提供者的演示中，现在我想加载另外两个 dll，我已经添加了接下来的两行并在库中添加了 dll 文件，但是我得到了错误

```
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError:
Unable to load library 'Utilities.dll': The specified module could not
be found.
    at com.sun.jna.NativeLibrary.loadLibrary(NativeLibrary.java:166)
    at com.sun.jna.NativeLibrary.getInstance(NativeLibrary.java:239)
    at com.sun.jna.Library$Handler.<init>(Library.java:140)
    at com.sun.jna.Native.loadLibrary(Native.java:393)
    at com.sun.jna.Native.loadLibrary(Native.java:378)
    at rrhfek02.RRHFEK02View.<init>(RRHFEK02View.java:87)
    at rrhfek02.RRHFEK02App.startup(RRHFEK02App.java:19)
    at org.jdesktop.application.Application$1.run(Application.java:171)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:597)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

我已经解决了相同/相关的问题，但没有得到解决方案。所以，如果有人有，请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:06:21.607

您需要插入`.dll`扩展名（在 Mac 上不需要，如果扩展名是`.framework`. 在我的系统上，使用我的 netbeans 项目文件夹结构：

> 库
> 
> ```
> + src
> + EDSDK
>       -dll
>           -EDSDK
>       -headers
> +Other Files 
> ```

正在做：

`this.EDSDK = (EdSdkLibrary) Native.loadLibrary("EDSDK/dll/EDSDK.dll", EdSdkLibrary.class`

有效地加载它。在加载之前，您可以尝试`new File("RRHFEK02DLL.dll").exists()`返回什么。如果`false`，那么你的路径是错误的。如果`true`，那么问题是别的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:17:02.157

`".dll"`在 Java 中删除。那是：

```
dll = (RRHFEK02DLL) Native.loadLibrary("RRHFEK02DLL", RRHFEK02DLL.class);
utility = (Utilities) Native.loadLibrary("Utilities", Utilities.class);
wraper = (RRHFEK02Wrapper) Native.loadLibrary("RRHFEK02Wrapper", RRHFEK02Wrapper.class); 
```

不要修改您实际的 DLL 文件的名称！

# jquery - 自升级到 jquery 1.9.1 后，Stickyjs 无法正常工作

> ID：16121918
> 
> 赞同：1
> 
> 时间：2013-04-20T15:15:32.560
> 
> 标签：jquery, jquery-plugins

由于在最新的 wordpress 主题中升级到最新的 jquery，stickjs 不能 100% 工作。

它会粘住，但在达到一定高度时不会松开。

我无法判断它的计算是否不再起作用或插件存在问题。

你可以在这里看到插件：

[http://stickyjs.com/](http://stickyjs.com/)

您可以在此处从插件中看到 jquery：

[https://github.com/garand/sticky/blob/master/jquery.sticky.js](https://github.com/garand/sticky/blob/master/jquery.sticky.js)

我使用的jquery如下：

```
<script>

jQuery(document).ready(function(){

jQuery("#back_to_top_side").sticky({

topSpacing: 80,
bottomSpacing: (jQuery(document).height() - jQuery(".finish").offset().top) - 800

});

});

</script> 
```

我的 javascript 日志中没有任何错误。

帮助将不胜感激:)

# android - 如果在 web 服务上执行 GET，Android Activity 就会死掉

> ID：16121921
> 
> 赞同：1
> 
> 时间：2013-04-20T15:15:42.413
> 
> 标签：android, web-services, get

我正在尝试登录与 RESTful 网络服务通信的用户。虽然此代码在 eclipse Android 模拟器中运行良好，但在移动设备上执行它会导致错误。更准确地说，Acitivity 死亡，每次都抛出不同的错误消息。

这是我的 LoginActivity 中的代码。`tryLogin(View v)`单击登录按钮时执行该方法：

```
public class LoginActivity extends Activity{

    public void onCreate(Bundle icicle){
        super.onCreate(icicle);
        setContentView(R.layout.s_login);
    }

    public void tryLogin(View v){
        EditText un = (EditText) findViewById(R.id.et_li_username);
        EditText pw = (EditText) findViewById(R.id.et_li_password);

        String username = un.getText().toString();
        String password = "";

        try {
            MessageDigest md = MessageDigest.getInstance("MD5");
            md.update(pw.getText().toString().getBytes(), 0, pw.getText().toString().length());
            password = new BigInteger(1, md.digest()).toString(16);         
        } catch (NoSuchAlgorithmException e) {
            ToastHandler.showToast(e.getMessage(), this);
        }

        ToastHandler.writeToLog("now exevuting get");
        String url = RestHandler.REST_URL + "arg=0&un=" + username + "&pw=" + password + "&" + RestHandler.API_KEY;

        String[] response = RestHandler.executeGET(url, this);  // Line 43
        String formattedResponse = "";

        if(response != null && response[1] != null){
            ToastHandler.writeToLog(response[1]);
            if(response[0].equals("json")){

            }else{
                String temp = response[1].trim();
                formattedResponse = temp.substring(1, temp.length()-1);
            }
        }else{
            ToastHandler.showToast("Fehler beim Einloggen!", this);
        }       

        if(formattedResponse == "Livia" || formattedResponse == "Luki" || formattedResponse.equals("Maki") 
                || formattedResponse=="Nadine" || formattedResponse=="Roberto"){
            loginUser(formattedResponse);
        }else{
            ToastHandler.showToast("Falsche Benutzerangaben!", this);
        }
    }

    private void loginUser(String username){
        Intent intent = new Intent(this, MenuActivity.class);
        intent.putExtra("username", username);
        startActivity(intent);
        //finish();    
    }

} 
```

RestHandler 中的函数`executeGET(...)`如下：

```
public static String[] executeGET(String url, Context context){
        HttpGet get = new HttpGet(url);
        HttpResponse response;
        String[] result = new String[2]; 

        Log.i("url", url);

        try{
            response = CLIENT.execute(get); // Line 36
            HttpEntity entity = response.getEntity();

            if(entity != null){
                InputStream in = entity.getContent();
                result[1] = convertStreamToString(in, context);

                JsonElement jsonElem = new JsonParser().parse(result[1]);

                if(jsonElem.isJsonArray()) {
                    result[0] = "json";
                } else {
                    result[0] = "nok";
                }

                in.close();
            }
        }catch (ClientProtocolException e){
            ToastHandler.showToast(e.getMessage(), context);
        }catch (IOException e){
            ToastHandler.showToast(e.getMessage(), context);
        }catch (JsonSyntaxException e){
            ToastHandler.showToast(e.getMessage(), context);            
        }

        return result;
    } 
```

如前所述，特别是抛出了两条错误消息：

```
(...)
W/InputDispatcher(1985): Consumer closed input channel or an error occurred
E/InputDispatcher(1985): channel '...' ~ Channel is unrecoverably broken and will be disposed!
W/InputDispatcher(1985): Attempted to unregister already unregistered input channel
(...) 
```

和

```
(...)
E/AndroidRuntime(12277): at imhotapp.schlettibusiness.rest.RestHandler.executeGET(...36)
E/AndroidRuntime(12277): at imhotapp.schlettibusiness.LoginActivity.tryLogin(...43)
(...) 
```

没有特别的描述。

在这一点上，我不知道是什么导致了这个错误。当开始实现它时，我考虑使用 AsyncTask 来处理登录，但由于在模拟器中一切正常，我也在移动设备上尝试了它。这是问题吗？为什么这种概念性问题在模拟器上有效，而在移动设备上无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:20:26.140

我认为 RestHandler.executeGET(url, this); 中的问题。它在 UI 线程中执行。使用 AsyncTask 或 REST 客户端模式[http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:20:37.487

根据 Android 指南，您不应该在主 UI 线程上进行网络活动，否则您会得到[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html). 这是在 Honeycomb 中引入的。因此，如果您的模拟器是 Gingerbread 或更低版本，则代码可以运行，而如果真实设备是 Honeycomb 或更高版本，则代码会失败。`AsyncTask`为您所用。

# vbscript - vbscript 在删除过程中保留访问拒绝文件

> ID：16121930
> 
> 赞同：0
> 
> 时间：2013-04-20T15:17:12.283
> 
> 标签：vbscript, access-denied

当我尝试在有限时间内删除服务器上一个指定文件夹中的某些文件夹/文件时遇到问题，并且某些文件夹/文件在处于拒绝访问状态时无法删除和保留某些文件夹/文件，可以vbs做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:16:34.180

我在这里在您的评论中回答您的问题，因为有更多的空间来写:)

如果您想访问并且失败，则 VBscript 会引发错误。您的脚本停止工作。这里的解决方案是实现错误处理。因此，您可以做的是将该部分移动到子例程或函数中并`On Error Resume Next`像这样激活：

```
Sub DeleteFolder(p_sFolder)
  Err.Clear
  On Error Resume Next

  Dim fso : Set fso = CreateObject("scripting.FileSystemObject")
  Dim deletefolder : Set deletefolder = fso.GetFolder(p_sFolder)
  deletefolder.Delete(True) 
  Set fso = Nothing

  If Err.Number<>0 THen
    Wscript.Echo Err.Number
    Wscript.Echo Err.Description
    ' here you can handle with the error with additional code
  End If

End Sub 
```

# java - 如何将游戏结果保存到文本文件

> ID：16121934
> 
> 赞同：-6
> 
> 时间：2013-04-20T15:17:58.157
> 
> 标签：java, file, save, text-files

这是java中的井字游戏，有人可以完成程序，它将赢得多少次X和多少次O保存到文本文件中，拜托:)

```
package xo2;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class XO2 implements ActionListener {
  private int[][] winningCombination = new int[][] {
    {0, 1, 2},
    {3, 4, 5},
    {6, 7, 8},
    {0, 3, 6},
    {1, 4, 7},
    {2, 5, 8},
    {0, 4, 8},
    {3, 4, 6}
  };
  private JFrame window = new JFrame("Tic Tac Toe");
  private JButton buttons[] = new JButton[9];
  private int count = 0;
  private String letter = "";
  private boolean win = false;

  public XO2() {
    window.setSize(300,300);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setLayout(new GridLayout(3,3));

    for (int i = 0; i < 9; i ++) {
      buttons[i] = new JButton();
      window.add(buttons[i]);
      buttons[i].addActionListener(this);
    }
    window.setVisible(true);
  }

  public void actionPerformed(ActionEvent a) {
    count++;
    if(count % 2 == 0) {
      letter = "O";
    } else {
      letter = "X";
    }

    JButton pressedButton = (JButton)a.getSource();
    pressedButton.setText(letter);
    pressedButton.setEnabled(false);

    for(int i = 0; i < 8; i ++) {
      if (buttons[winningCombination[i][0]].getText().equals(buttons[winningCombination[i][1]].getText()) &&
        buttons[winningCombination[i][1]].getText().equals(buttons[winningCombination[i][2]].getText()) &&
        !buttons[winningCombination[i][0]].getText().equals("")) {
        win = true;
      }
    }

    if (win == true) {
      JOptionPane.showMessageDialog(null, letter + " won!");
      System.exit(0);
    } else if (count == 9 && win == false) {
      JOptionPane.showMessageDialog(null, "draw!");
      System.exit(0);
    }
  }

  public static void main(String[] args) {
    XO2 starter = new XO2();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:05:59.667

我为您创建了一个基本类，它将胜利保存到文本文件并从文本文件中检索它们。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.Scanner;

public class WinsFileManager {

    String path = System.getProperty("user.home").replace("\\", "\\\\") + "\\";

    public int getWins(String fileName) {

        String fullPath = path + fileName;
        int wins = 0;

        try {
            wins = Integer.parseInt(new Scanner(new File(fullPath)).nextLine());
        } catch (NumberFormatException e) {} 
          catch (FileNotFoundException e) {
            wins = 0;
        }

        return wins;
    }

    public void saveWins(String fileName, int wins) {
        PrintWriter out = null;

        try {
            out = new PrintWriter(path + fileName, "UTF-8");
            out.println(wins);
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

以下是您如何从不同位置使用上述类的对象。

```
public class test {

    public static void main(String[] args) {
        WinsFileManager manager = new WinsFileManager();
        String fileName = "O Wins.txt";

        manager.saveWins(fileName, 5);
        System.out.println(manager.getWins(fileName));
    }
} 
```

上例中的控制台输出为“5”。

我已经完成了困难的部分。现在由您将其实现到您的程序中。首先，每当有人获胜时，我都会通过该`getWins`方法检索存储的获胜次数，将该值加一，然后使用该`saveWins`方法存储增加的值。请记住，即使您退出程序，获胜值也会被保存。

注意：如果您只想在程序的生命周期内跟踪胜利，那么有更简单的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:28:21.680

看看以下资源。

[读取和写入文本文件。](http://www.javapractices.com/topic/TopicAction.do?Id=42)

[如何将控制台输出写入 txt 文件。](https://stackoverflow.com/questions/1994255/how-to-write-console-output-to-a-txt-file)

[如何创建数据并将其写入文本文件？](http://www.kodejava.org/examples/29.html)

# playframework - 无法在 Play 框架项目中加载依赖项

> ID：16121935
> 
> 赞同：2
> 
> 时间：2013-04-20T15:17:57.990
> 
> 标签：playframework, playframework-2.0, sbt

我正在尝试在 Play Framework 中使用一个名为 REST Assured 的库。文档 - [https://code.google.com/p/rest-assured/wiki/GettingStarted](https://code.google.com/p/rest-assured/wiki/GettingStarted) - 为 Maven 提供了以下工件 -

```
<dependency>
      <groupId>com.jayway.restassured</groupId>
      <artifactId>rest-assured</artifactId>
      <version>1.8.0</version>
      <scope>test</scope>
</dependency> 
```

所以我改变了我的 Build.scala 文件如下包含这个依赖 -

```
 val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    javaEbean,
    "com.jayway.restassured" % "rest-assured" % "1.8.0" % "test"
  ) 
```

然后我尝试通过静态导入一些包在Java中使用这个库，这是文档指示我做的 -

```
import static com.jayway.restassured.RestAssured.*;
import static com.jayway.restassured.matcher.RestAssuredMatchers.*;
import static org.hamcrest.Matchers.*; 
```

但是，当我尝试运行 Play 应用程序时，这会导致编译错误 -

> 错误：com.jayway.restassured 包不存在

我知道 Play/sbt 正在检索依赖项，因为我可以在 play-2.1.0/repository/cache 目录中看到“com.jayway.restassured”目录。但是它没有显示在 play-2.1.0/repository/local 目录中，我不知道这是否有任何意义。

那么出了什么问题，为什么我不能在我的 Play 应用程序中访问这个库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:21:24.380

如果您需要从非测试代码访问 REST Assured，则依赖项应定义为：

```
"com.jayway.restassured" % "rest-assured" % "1.8.0" 
```

换句话说，放弃`"test"`声明。当它出现时，您指定该库是一个*测试范围的*依赖项。目前您说 REST Assured 不是您的生产代码的依赖项，只需要将范围限定为测试树中的代码（即添加到测试类路径中）。

我想接下来的问题是为什么你希望从你的`app`代码中引用一个测试库？

# django - Django paypal：无法到达paypal付款流程

> ID：16121939
> 
> 赞同：0
> 
> 时间：2013-04-20T15:18:23.750
> 
> 标签：django, python-2.7, django-paypal

我正在使用 django-paypal，但无法访问 paypal 付款流程。

我对贝宝表格有我的看法，但在点击贝宝上的购买按钮后没有任何反应。

这是我的代码：（查看）

```
def paypal(request):
amount = 0
cart_item = get_cart_items(request)
all_product_in_cart = CartItem.objects.filter(cart_id=_cart_id(request))
for cart in all_product_in_cart:
    amount += cart.product.price * cart.quantity
# What you want the button to do.
paypal_dict = {
    "business": "xxx@xxx.com",
    "amount": amount,
    'currencycode':  'EUR',
    "item_name": cart.product.name,
    "invoice": "unique-invoice-id",
    "notify_url": "/ipn/",
    "return_url": request.build_absolute_uri(reverse("boutiquecar.views.success_payment")),
    "cancel_return": request.build_absolute_uri(reverse("boutiquecar.views.cancel_payment")),
}

# Create the instance.
form = PayPalPaymentsForm(initial=paypal_dict, button_type="cart")
return render(request, "shop_paypal/payment.html", {
    "form": form,
    'amount': amount,
    }) 
```

和模板：

```
<h1>You are about to buy for {{ amount }} €&lt;/h1>
<form method="post" action="{{ paypal_url }}">
{% csrf_token %}
<table>
    <tbody>
        {% if errors %}<tr><td colspan="2" align="center">{{ errors }}</td></tr>{% endif %}
        {{ form.render }}
        <tr><td colspan="2" align="right"><input type="submit" /></td></tr>
    </tbody>
</table>
</form> 
```

通常正如我在其他帖子中看到的那样，它会起作用，但我不知道如何解决它！

如果你能帮忙，那就太好了！：） 提前致谢

# jquery - 如何保持顺序的jquery方法调用？

> ID：16121941
> 
> 赞同：0
> 
> 时间：2013-04-20T15:18:29.037
> 
> 标签：jquery

我有一个三级 jstree。在进行所有选择后，我正在调用 displayCount() 方法以根据选择显示正确的搜索结果计数。现在，当我取消选中一个选项时，它会彻底检查所有节点以保持正确的选定结构，然后它应该调用 displayCount() 方法。但问题是它在取消选中节点之前已经调用了 displayCount() 方法。所以我得到了错误的计数。方法调用顺序如下：-

```
 UnchekSelectedNodes(){
          // nodes are getting unchecked depends on parent-child relation.
          // purely DOM structure update operation. 
       }

      displayCount(){
         // ajax call to show proper count based on selected nodes/checkboxes
      }

      checkForEmptyDiv(){
         // if it becomes no selected hide the div.
      } 
```

问题是..总是在完成 UnchekSelectedNodes() 操作之前调用 displayCOunt()。我根据标志尝试了方法 chainng。它不起作用。

有什么解决办法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:21:14.877

你可以简单地在 setTimeout 中做到这一点......

当我懒惰并且事情发生的顺序错误时，我只需添加一个超时为 1 的 setTimeout，然后调用所有其他调用，然后我的超时。

```
UnchekSelectedNodes(){
          // nodes are getting unchecked depends on parent-child relation.
          // purely DOM structure update operation. 
       }

      displayCount(){
         setTimeout(function() {
            //just do what ever you want.
         }, 1);
      }

      checkForEmptyDiv(){
         // if it becomes no selected hide the div.
      } 
```

# sql - 处理不断变化的 Excel 表结构以导入数据库表

> ID：16121948
> 
> 赞同：2
> 
> 时间：2013-04-20T15:19:21.107
> 
> 标签：sql, excel, tsql, generics, sql-server-2012

我正在寻找一种策略来处理以下 Excel 到 db 问题（SQL Server 2012）：

输入将是同一主题的 Excel 文件，但这些 Excel 文件中的列设置可能会逐月更改，这意味着将在这些 Excel 文件中删除或添加列，这不是维护数据库的“最佳”方案-表结构。

请注意，当 Excel 文件更改时，文件名/ID 也会更改。

因此，为了将这些文件（通过**SSIS**）存储在**一个单独的数据库表中**，我将使用列名 COL1 到 COLn设置一个“**通用”结构。**然后，我将向每个 Excel 文件添加一个**版本**字段，以便创建某种**映射表**，在其中根据版本定义正确的列名。基本上新的一个月会创建一个新的版本号。这应该可以帮助我创建一个视图来提取具有适当列名的所有版本。

在第一个版本中，我有大约 120 列要处理。

我还有一个“ **crosstable** -scenario”，因为有些列包含年份值。例如，假设输入文件包含 Savings 2009、Savings 2010、Savings 2011 列。如果在版本 2 中添加了 Savings 2012 列，我将需要在 db 表中创建另一个列，除非删除“Savings 2009”并将 2010 的值添加到“2009 列”。

你看这是一团糟！

使用这种结构，我将始终不得不更改导入工作流程并调整名称映射，但我想不出更好的方法来处理这个问题。

我需要将列拆分到不同的表吗？

我希望我的问题得到解决，并且您可以指导我找到一个干净、“无忧”的解决方案 :-)

正如您可能已经猜到的那样，我对需要处理的输入文件没有太大影响。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:02:28.080

我经常面对这个问题。通常，业务用户通常更喜欢处理 Excel 文件。数据库中需要这些信息。以下是我的策略。

首先，我有一个读取 Excel 表的存储过程。此存储过程从一行读取标题并从另一行开始读取数据。它将标题分配为列名，将格式分配为列的数据库类型。

其次，我保留了以前版本的表格。如果列消失或类型更改，我会生成一封电子邮件来通知问题。通常，新版本是正确的版本，我只是接受它作为正确的表。这提供了一个反馈回路。

该解决方案允许用户控制他们的文件。它还保证在表上运行的查询将对新数据起作用，因为列名和数据类型保持不变。

# c# - 使用 MVC4 时出现 tweetsharp 过载错误 - Internet 应用程序模板

> ID：16121953
> 
> 赞同：0
> 
> 时间：2013-04-20T15:20:09.727
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, visual-studio-2012, tweetsharp

当您安装 tweetsharp nuget packack 并使用 Internet 应用程序模板创建新的 mvc4 Internet 项目时，它会在**service.VerifyCredentials() 上给我和错误消息；**

```
using TweetSharp;

public ActionResult AuthorizeCallback(string oauth_token, string oauth_verifier)
{
  var requestToken = new OAuthRequestToken {Token = oauth_token};

// Step 3 - Exchange the Request Token for an Access Token
TwitterService service = new TwitterService(_consumerKey, _consumerSecret);
OAuthAccessToken accessToken = service.GetAccessToken(requestToken, oauth_verifier);

// Step 4 - User authenticates using the Access Token
service.AuthenticateWith(accessToken.Token, accessToken.TokenSecret);
TwitterUser user = service.VerifyCredentials(); // HERE
ViewModel.Message = string.Format("Your username is {0}", user.ScreenName);
return View(); 
```

}

**错误：方法 'VerifyCredentials' 没有重载需要 0 个参数**

如果我不使用 Internet 应用程序模板，它可以正常工作。谁能告诉我为什么会发生这种情况以及解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:06:40.510

将来可能会有 TweetSharp 更新来解决这个问题。

但这是使用 Internet 应用程序模板实现 TweetSharp 时的当前解决方法

```
TwitterUser user = service.VerifyCredentials(new VerifyCredentialsOptions());
// instead of TwitterUser user = service.VerifyCredentials(); 
```

# git - TortoiseGit：如何在“Git 命令进度”窗口中更改日期格式？

> ID：16121959
> 
> 赞同：1
> 
> 时间：2013-04-20T15:20:35.160
> 
> 标签：git, github, tortoisegit

我在 Windows 上使用 Git+TortoiseGit。我想在“您执行推送到回购，日期 NNNNNNNNNNNN”窗口中隐藏日期/时间戳（不是确切的标题）。

![窗户](https://i.stack.imgur.com/AmGRL.png)

如何隐藏此日期/时间戳或使其简短（仅显示 DDMMYYYY）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:32:11.293

让我们首先找到打印该消息的代码：

```
git clone https://github.com/TortoiseGit/TortoiseGit
cd TortoiseGit

P:\git\TortoiseGit>grep -nRHI "\"Success" *
src/Resources/TortoiseProcENG.rc:3845:    IDS_SUCCESS             "Success"

P:\git\TortoiseGit>grep -nRHI "IDS_SUCCESS" *
src/TortoiseProc/SyncDlg.cpp:1176:                      temp.LoadString(IDS_SUCCESS); 
```

因此，您可以在其中看到正在构建的对话框消息的代码是[`CSyncDlg::OnProgressUpdateUI()`方法](https://github.com/TortoiseGit/TortoiseGit/blob/master/src/TortoiseProc/SyncDlg.cpp#L1171-L1180)之一：

```
if (m_pTaskbarList)
    m_pTaskbarList->SetProgressState(m_hWnd, TBPF_NOPROGRESS);
CString temp;
temp.LoadString(IDS_SUCCESS);
CString log;
log.Format(_T("\r\n%s (%d ms @ %s)\r\n"), temp, tickSpent, strEndTime);
CProgressDlg::InsertColorText(this->m_ctrlCmdOut, log, RGB(0,0,255)); 
```

随着[`strEndTime`是](https://github.com/TortoiseGit/TortoiseGit/blob/master/src/TortoiseProc/SyncDlg.cpp#L1146)：

```
CString strEndTime = CLoglistUtils::FormatDateAndTime(CTime::GetCurrentTime(), DATE_SHORTDATE, true, false); 
```

除非您使用不同的代码重新编译 TortoiseGit，否则似乎没有办法轻松修改该日期格式。

# android - Eclipse 不生成 R.java

> ID：16121963
> 
> 赞同：2
> 
> 时间：2013-04-20T15:20:47.177
> 
> 标签：android, eclipse

我正在编写一个计算器应用程序来熟悉 ADK，但我的项目不会构建。没有生成`R.java`，当我单击构建时，我收到以下消息：

```
Errors occurred during the build.
Errors running builder 'Android Pre Compiler' on project 'JakobCalculator'.
java.lang.NullPointerException 
```

我不使用颠覆，所以所有[这些](https://www.google.com/search?q=android+pre+compiler+NullPointerException&aq=f&oq=android+pre+compiler+NullPointerException&aqs=chrome.0.57j62l3.4514&sourceid=chrome&ie=UTF-8)指向它的问题都对我没有帮助。

Eclipse 控制台显示以下文本：

```
[2013-04-20 10:42:54 - JakobCalculator] Android Launch!
[2013-04-20 10:42:54 - JakobCalculator] adb is running normally.
[2013-04-20 10:42:54 - JakobCalculator] Performing edu.us.jweisblat14.calculator.MainActivity activity launch
[2013-04-20 10:42:54 - JakobCalculator] Automatic Target Mode: using device '015d43637e60021b'
[2013-04-20 10:42:54 - JakobCalculator] Uploading JakobCalculator.apk onto device '015d43637e60021b'
[2013-04-20 10:42:54 - JakobCalculator] Installing JakobCalculator.apk...
[2013-04-20 10:42:57 - JakobCalculator] Success!
[2013-04-20 10:42:57 - JakobCalculator] Starting activity edu.us.jweisblat14.calculator.MainActivity on device 015d43637e60021b
[2013-04-20 10:42:57 - JakobCalculator] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=edu.us.jweisblat14.calculator/.MainActivity }
[2013-04-20 10:49:08 - JakobCalculator] Error in an XML file: aborting build. 
```

我无法弄清楚那个 XML 错误可能是什么。我可以在任何地方找到的唯一黄色警告是：

*   在我`EditText`的 xml 元素上`MainActivity`（没有标签视图指向它们）
*   在清单的 xml 声明上（无语法限制）。

我在哪里可以找到错误？

编辑：这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="edu.us.jweisblat14.calculator"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="17"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="edu.us.jweisblat14.calculator.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# jquery - JW Player : 在移动浏览器和网络浏览器中播放视频

> ID：16121966
> 
> 赞同：1
> 
> 时间：2013-04-20T15:21:07.223
> 
> 标签：jquery, html, flash, jwplayer

我正在使用**JW Player**在手机和网络浏览器中播放视频；我有很多 100 个尺寸为**1280*700**像素的视频。该视频适合网络浏览器和根据网络浏览器和网速的加载时间。这可以。

现在，如果我想在移动浏览器中播放相同的视频，那么视频的大小将影响加载播放。因为它是手机而不是电脑。

这是在移动设备和网络上播放相同视频的好方法吗？或者请提供任何解决方案。

我应该为移动和网络浏览器使用不同的视频吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:33:10.530

您应该使用多种分辨率。

这样的例子就足够了 - [http://www.longtailvideo.com/support/jw-player/29248/sd-and-hd-qualities](http://www.longtailvideo.com/support/jw-player/29248/sd-and-hd-qualities)

```
<script>
    jwplayer("myElement").setup({
      playlist: [{
        image: "/uploads/myPoster.jpg",
        sources: [{
          file: "/uploads/myVideo360.mp4",
          label: "360p SD"
        },{
          file: "/uploads/myVideo720mp4",
          label: "720p HD"
        }]
      }]
    });
</script> 
```

# powershell - 函数未返回预期对象

> ID：16121969
> 
> 赞同：8
> 
> 时间：2013-04-20T15:21:15.527
> 
> 标签：powershell

我对这个 PowerShell 函数有一个奇怪的情况。假设返回 ArrayList 对象，但在循环仅向 ArrayList 添加 1 个项目的情况下，函数返回 SPList 项目而不是预期的 ArrayList 对象。我很困惑为什么 PowerShell 会这样。

```
function Get-ContentOrganizerRules
(
    [System.String]$siteUrl = "http://some.sharepoint.url"

)
{
    Write-Host -ForegroundColor Gray "Searching for Content Organizer Rules: "  $siteUrl

    # ArrayList to hold any found DataConn Libs
    [System.Collections.ArrayList]$CORules = New-Object System.Collections.ArrayList($null)

    $lists = Get-SPWeb $siteUrl |
        Select -ExpandProperty Lists |
        Where { $_.GetType().Name -eq "SPList" -and  $_.hidden }

    foreach($list in $lists)
    {
        #Write-Host $list ;

        foreach($contenType in $list.ContentTypes){
            if($contenType -ne $null){
                if($contenType.Id.ToString() -eq "0x0100DC2417D125A4489CA59DCC70E3F152B2000C65439F6CABB14AB9C55083A32BCE9C" -and $contenType.Name -eq "Rule")
                {
                    $CORules.Add($list)>$null;
                    Write-Host -BackgroundColor Green -ForegroundColor White "Content Organizer Rule found: " $list.Url>$null;
                }
            }
        }
    }

    return $CORules;

} 
```

这是调用代码：

```
$CORulesResults = Get-ContentOrganizerRules $web.URL;
                    if($CORulesResults.Count -gt 0){
                        $Results.AddRange($CORulesResults);
                    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T16:14:44.207

那里有一个隐式管道，管道倾向于将数组、集合和数组列表“展开”一层。

试试这个：

```
return ,$CORules 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T17:04:08.413

或者您可以将变量 $CORulesResult 强制为`[Array]`前面的数组

```
[Array]$CORulesResults = Get-ContentOrganizerRules $web.URL;
                        if($CORulesResults.Count -gt 0){
                            $Results.AddRange($CORulesResults);
                        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T21:17:36.267

当我使用 [System.Collections.ArrayList] 而不是普通的固定大小数组时，我也遇到了类似的问题。返回的对象不是我希望的数组元素，而是整个数组，除了我想要返回的一个元素之外，它是贫瘠的。谈论弄乱堆栈。

解决方案很简单：停止使用 [System.Collections.ArrayList]

下面介绍如何声明和处理 $CORules。

```
$CORules = @()

...

$CORules = $CORules + $list 
```

***狂欢**万岁！*

# sql - 计算 SQL 中值的出现次数

> ID：16121976
> 
> 赞同：1
> 
> 时间：2013-04-20T15:22:37.883
> 
> 标签：sql, count, group-by

假设我们有一个诺贝尔奖（年，主题，获奖者）。

我想得到一个返回年份的结果，当年化学奖数列，当年物理奖数列。

你会怎么做？

```
SELECT yr, count(subject='Physics'), count(subject='Chemistry') FROM nobel GROUP BY yr 
```

不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T15:24:00.393

您的查询不起作用，因为条件返回值 0 或 1，并且`count`计算非 NULL 值。

尝试使用`sum`而不是`count`：

```
SELECT yr, sum(subject='Physics'), sum(subject='Chemistry')
FROM nobel
GROUP BY yr 
```

顺便说一句，并非所有数据库都将条件表达式视为整数。标准语法是：

```
select yr, sum(case when subject = 'Physics' then 1 else 0 end) as NumPhysics,
       sum(case when subject = 'Chemistry' then 1 else 0 end) as NumChemistry
from nobel
group by yr 
```

您还可以通过执行以下操作获得多行的相同信息：

```
select yr, subject, count(*)
from Nobel
where subject in ('Physics', 'Chemistry')
group by yr, subject 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:25:10.787

这行不通吗？

```
select yr, subject, count(*) awards
from nobel
where subject in ('physics', 'chemistry')
group by yr, subject 
```

# ios - iOS、Cocoa、AppiRater - 如何为 SKStoreProductViewController 本地化取消按钮

> ID：16121978
> 
> 赞同：2
> 
> 时间：2013-04-20T15:22:44.357
> 
> 标签：ios, objective-c, nslocalizedstring, appirater

如何本地化弹出的 AppiRater 视图控制器中的“取消”按钮？

我正在查看 AppiRater 代码......它使我们成为`SKStoreProductViewController`这样的：

```
SKStoreProductViewController *storeViewController = [[SKStoreProductViewController alloc] init]; 
```

基本上我想要这样的东西：

```
[storeViewcontroller.navigationBar.cancelButton setText:NSLocalizedString(@"Cancel", nil)]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:28:25.863

鉴定师？评级 SDK？

[这是 Appirator 的本地化版本。](https://github.com/arashpayan/appirater)

确保将所有 .lproj 文件夹添加到 Xcode 项目中。

![在此处输入图像描述](https://i.stack.imgur.com/aObkE.png)

# javascript - 移动 JavaScript：“文本转换：大写；” 不是大写吗？

> ID：16121986
> 
> 赞同：1
> 
> 时间：2013-04-20T15:23:32.327
> 
> 标签：javascript, mobile, input, uppercase

我有一个文本输入字段，其中输入必须全部为大写，所以我使用：

```
text-transform: uppercase; 
```

在输入上。我知道尝试使用一些正则表达式来验证该输入：

```
function isSteamID(input) {
    return /^(STEAM_)?[0-5]:[01]:\d+$/.test(input);
} 
```

问题是，在桌面浏览器上它工作得很好，但例如在移动 Chrome 上它无法验证，因为文本转换并没有**真正**使输入大写，它看起来就是这样。

我在这里错过了什么吗？我应该用 JavaScript 再次大写输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:08:48.933

我的猜测是该移动浏览器上未实现大写 CSS 功能。

然而，最好的办法是自己转换文本。它还将受益于可用性。

```
document.getElementById('myInput').onchange = function() {
    this.value = this.value.toUpperCase();
} 
```

# android - 如何将我的 android 应用程序指向我的在线 apengine 端点

> ID：16121987
> 
> 赞同：2
> 
> 时间：2013-04-20T15:23:41.437
> 
> 标签：android, google-app-engine, google-cloud-endpoints, gae-eclipse-plugin

我创建了一个应用引擎连接的 android 项目。目前我已经将我的后端（端点 api）部署到应用引擎。现在我想将 android 应用程序 (apk) 指向在线服务器/api。我怎么做？

基本上，以下是我所要做的吗？

```
protected static final boolean LOCAL_ANDROID_RUN = false; 
```

当上面的行是我所做的一切时，我得到了例外

```
Exception received from server at https://1.myapi.appspot.com/_ah/api/
java.io.IOException: Hostname '1.myapi.appspot.com' was not verified
at libcore.net.http.HttpConnection.verifySecureSocketHostname(HttpConnection.java:224)
at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:446)
    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
at libcore.net.http.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:281)
at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:78)
at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:980)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:412)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:345)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:463) 
```

`1`为什么我的app-id前面有一个是正常的？那是问题吗？我在哪里修？同样，我的项目完全是使用 GEP 生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:51:47.700

数字**1**只是来自您的 API 的版本号，所以它不应该是问题......

无论如何，您使用的是什么 App Engine SDK？**SDK 1.7.6**在使用 GPE 生成端点客户端库时引入了一些以前版本中不存在的错误，但新版本**SDK 1.7.7**解决了这些错误。

*有关这个奇怪的 1*以及我正在谈论的错误的更多信息，请参阅[**此问题。**](https://stackoverflow.com/questions/15666157/why-is-my-api-not-showing-up-on-deployment)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T17:24:53.740

使用消除过程，我的猜测是您正在尝试使用模拟器来访问您部署的端点。使用`LOCAL_ANDROID_RUN = false`应该是您需要做的所有事情。尝试在真实设备上运行 apk 并查看。这是我根据您的帖子和错误日志的猜测。*

# c# - DeflateStream 不适用于从 PHP 实现处理的缓冲区

> ID：16121991
> 
> 赞同：0
> 
> 时间：2013-04-20T15:24:08.127
> 
> 标签：c#, .net, compression, deflate

我正在尝试解压缩由 php deflate 实现压缩的缓冲区。这是代码：

```
 public static void CopyTo(Stream src, Stream dest)
    {
        byte[] bytes = new byte[4096];

        int cnt, i = 0;

        while ((cnt = src.Read(bytes, 0, bytes.Length)) != 0 )
        {
            dest.Write(bytes, 0, cnt);
        }
        dest.Flush();
    }

    public static byte[] Unzip(byte[] bytes)
    {
        using (var msi = new MemoryStream(bytes))
        using (var mso = new MemoryStream())
        {
            using (var gs = new DeflateStream(msi, CompressionMode.Decompress))
            {

                msi.ReadByte();
                msi.ReadByte();
                CopyTo(gs, mso);
            }

            return mso.ToArray();
        }
    } 
```

如您所见，我正在从源流中读取前 2 个字节，否则 DeflateStream 会抛出异常，说明块大小无效。但是，我的问题是，对于某些文件，此代码就像一个魅力，但对于其他文件，它会给出损坏的结果（一个文件只有文件的一部分。给人的印象是它没有解压缩整个文件）。有人知道出了什么问题吗？

谢谢

**更新**

我发现了用于压缩数据的 PHP 函数。它是[gzcompress](http://php.net/manual/en/function.gzcompress.php)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:40:43.940

你没有说你使用了什么 php 函数，但我猜`gzcompress()`. 这会产生 zlib 格式，它是带有 zlib 标头和预告片的原始 deflate 格式，而`DeflateStream`预期的是没有标头或预告片的原始 deflate。这就是为什么您必须跳过前两个字节，即 zlib 标头。

PHP 函数名称很糟糕且令人困惑，文档也没有多大帮助。这里使用了三种格式：原始 deflate、gzip-wrapped deflate 和 zlib-wrapped deflate。所有的 PHP 函数都以 gzip 格式开始，`gz`但只有其中一些函数真正处理 gzip 格式。

有时工作有时不工作可能是由于行尾或其他文本转换。确保您正在读取文件中的实际字节而没有损坏。

# vb.net - 从form2获取datagridview行值并放入form1的文本框

> ID：16121993
> 
> 赞同：0
> 
> 时间：2013-04-20T15:24:29.050
> 
> 标签：vb.net, ms-access

我有一个文本框和一个按钮。

单击按钮时，它会`DataGridView`在单独的窗口（表单）中显示一个输出 ID 和名称的按钮。这些是从 ms-access 加载的 select 语句。

我希望当我双击任何`DataGridView`行时，ID 会传输到另一个窗口（表单）中的文本框。

我尝试了这样的事情但没有成功：

```
Form2.TextBox1.Text = DataGridView1.CurrentRow.Cells(1).Value.ToString 
```

请问有人告诉我我应该在两种形式上都有什么作为代码吗？
（vb.net 的新手，所以请多多包涵，不幸的是我找不到帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:43:34.830

您可以尝试使用此代码

```
Private Sub DataGridView1_CellMouseDoubleClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.CellMouseDoubleClick
    If e.RowIndex >= 0 AndAlso e.ColumnIndex >= 0 Then
        Dim selectedRow = DataGridView1.Rows(e.RowIndex)
        Form2.TextBox1.Text = selectedRow.Cells(1).Value.ToString 
    End If
End Sub 
```

注意：您使用`CellMouseDoubleClick event`

msdn 链接：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.datagridview.cellmousedoubleclick.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.datagridview.cellmousedoubleclick.aspx)

# c# - JSONNet 对象序列化

> ID：16121998
> 
> 赞同：0
> 
> 时间：2013-04-20T15:24:47.517
> 
> 标签：c#, json.net

我在序列化中使用了“Newtonsoft.Json”。我的应用程序中有“学生”类和“教师”类，当我序列化学生类时，我必须在 json 代码中获取 Faculty 对象。

**我想序列化为 json 的此类 Student。**

```
public class Student 
            {
                public int ID { get; set; }
              **public Faculty Faculty { get; set; }
                public double AVG { get; set; }
                public DateTime DateOfBirth { get; set; }
                public string EducationInfo { get; set; }
                public string FatherName { get; set; }
                public string FirstName { get; set; }
                public string LastName { get; set; }
                public string MotherName { get; set; }
                public string Password { get; set; }
                public string PersonalInfo { get; set; }
} 
```

**班级学生内的班级教师：**

```
public class Faculty
         {
            public int id { get; set; }
            public string name { get; set; }
            public Student[] student { get; set; }
         } 
```

**序列化后的代码：**

```
{
      "ID": 24,
      "Faculty": {
        "id": 0,
        "name": "engen",
        "student": null 
                 },
      "AVG": 3.0,
      "DateOfBirth": "1990-02-02T00:00:00",
      "EducationInfo": "GOOD",
      "FatherName": "EEWF",
      "FirstName": "FFEWR",
      "LastName": "ERF",
      "MotherName": "ERF",
      "Password": "e2DW",
      "PersonalInfo": "ERF",
     } 
```

**如何将最后一个代码转换为序列化相同，我想显示教员而不是对象我只想显示名称。**

```
 {
      "ID": 24,
      "Faculty": "engen",
      "AVG": 3.0,
      "DateOfBirth": "1990-02-02T00:00:00",
      "EducationInfo": "GOOD",
      "FatherName": "EEWF",
      "FirstName": "FFEWR",
      "LastName": "ERF",
      "MotherName": "ERF",
      "Password": "e2DW",
      "PersonalInfo": "ERF",
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:29:16.450

处理此问题的一种方法是使用 Json.Net 属性

尝试这个：

```
[JsonIgnore]
public Faculty Faculty { get; set; }

[JsonProperty("Faculty")]
public string FacultyName { get { return Faculty.Name; } } 
```

这样做的缺点是您将无法将 JSON 反序列化回 .NET 对象。但是你会得到你想要的输出。

# javascript - 在响应大小划分中保持图像纵横比

> ID：16121999
> 
> 赞同：1
> 
> 时间：2013-04-20T15:24:55.130
> 
> 标签：javascript, html, css

抱歉，如果这里已经回答了这个问题，但我找不到适合我的问题的答案。

所以我有这个画廊，其中有一个分区中可用图像的侧面列表，单击它会使用 JavaScript 更改其他分区中的图像源。所有分区大小都以百分比指定，以便网站针对每个分辨率调整大小。

现在为样式表：

```
#ActiveView {position: absolute;left:1%;right:1%;margin-top:1%; height:97%; 
        background:url('../img/alpha/222.png');
background-size:100%;background-repeat: no-repeat;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;}

 #ThePicture {position: absolute;height: 100%;max-width: 100%;} 
```

#ThePicture 是我需要帮助的图像的 ID

和文件结构

```
 <div id="ViewPort">
    <div id="ActiveViewWrap">
      <div id="ActiveView">
          <img id="ThePicture" src="../img/galery/TeaPlant.jpg">
        <div id="OrigSizeLinker"> Plná Velikost </div>
      </div> <!-- closes ActiveView -->
   </div> <!-- closes ActiveViewWrap -->
   <div id="ActiveNoteWrap">
     <div id="ActiveNote">contentNote  </div>
   </div> <!-- closes ActiveNoteWRAP -->
 </div> <!-- Closes ViewPort --> 
```

我需要的是保持#ThePicture 的比例，这样图像就不会失真，例如在宽屏分辨率上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:43:05.163

我为我的问题想出了这个解决方案。我在 img.Onload 上调用这个函数

```
function KeepRatio() {
var height = document.getElementById('ThePicture').height;
var width = document.getElementById('ThePicture').width;
var origHeight = document.getElementById('ThePicture').naturalHeight;
var origWidth = document.getElementById('ThePicture').naturalWidth;
var ratio = origWidth / origHeight;
document.getElementById('ThePicture').width = height * ratio;
} 
```