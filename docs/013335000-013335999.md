# StackOverflow 问答 13335000-13335999

# vba - 使用 Word VBA 删除引用

> ID：13335006
> 
> 赞同：2
> 
> 时间：2012-11-11T20:14:56.033
> 
> 标签：vba, ms-word

我有一个`.dotm`不时更改的宏文件（文件）。

但是，如果有人使用来自不同文件的宏，它会`.dotm`在项目的 References 文件夹中创建对该文件的引用。我可以有一些脚本来检查该文件夹，如果该文件现在丢失/损坏以删除该参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T04:18:33.740

@user1243498：以下代码将删除损坏的引用

```
 Sub referencecheck()

 Dim ref As Reference

 Dim yourproject As VBProject

 Set yourproject = ActiveDocument.VBProject

 For Each ref In yourproject.References

 If ref.IsBroken Then

 yourproject.References.Remove (ref)

 End If

 End Sub 
```

为了更好地理解，请参考以下网站

[http://support.microsoft.com/kb/308340](http://support.microsoft.com/kb/308340)

# jquery - 表单验证电子邮件 jquery 插件

> ID：13335008
> 
> 赞同：1
> 
> 时间：2012-11-11T20:15:36.903
> 
> 标签：jquery, forms, validation, email

```
if ( $("#form").validate().form() == true ) {

    $('#form').submit( function() {
        var mail = $("#mail_content").val();
        $.ajax({  
            type: "POST",  
            url: "process.php",  
            data: "mail="+ mail,  
            success: function(){  
            $('.email').fadeOut(200);
            $('.notified').delay(200).fadeIn(200);
            }  
        });
        return false;
    });

    }

    else {} 
```

我觉得

```
 if ( $("#form").validate().form() == true ) { 
```

不是必须的

我的资源：

[http://docs.jquery.com/Plugins/Validation/Validator/form](http://docs.jquery.com/Plugins/Validation/Validator/form)

提交 ajax 部分正在工作，我只想验证输入的电子邮件地址

谢谢你的帮助

编辑：

我忘了

我试过这段代码

```
$("#form").validate({
     submitHandler: function(form) {
       $('#form').submit( function() {

        var mail = $("#mail_content").val();
        $.ajax({  
            type: "POST",  
            url: "process.php",  
            data: "mail="+ mail,  
            success: function(){  
                $('.email').fadeOut(200);
                $('.notified').delay(200).fadeIn(200);
            }  
        });
        return false;
    });
     }
    }); 
```

但由于某种原因，我必须点击两次提交按钮......？？

明白我的意思：

[http://herenhoek.nl/test/](http://herenhoek.nl/test/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:25:14.507

您问题中的第二个代码示例几乎是正确的，除了重用表单的 jQuery 对象的常见错误。在这种情况下，您不需要`submit`再次触发事件，因为您正在使用 AJAX 请求来处理该过程。

阅读插件文档的以下部分：[递归过多](http://docs.jquery.com/Plugins/Validation/Validator#Too_much_recursion)

正确的语法是：

```
$("#form").validate({
    submitHandler: function(form) {
        var mail = $("#mail_content").val();

        $.ajax({  
            type: "POST",  
            url: "process.php",  
            data: "mail="+ mail,  
            success: function() {  
                $('.email').fadeOut(200);
                $('.notified').delay(200).fadeIn(200);
            }  
        });
    }
}); 
```

# python - MongoDB：找到数组中的最小元素并将其删除

> ID：13335009
> 
> 赞同：13
> 
> 时间：2012-11-11T20:15:40.270
> 
> 标签：python, mongodb, pymongo

我在 MongoDB 中有一个文档，其中一个看起来像这样：

```
{
"_id" : 100,
"name" : "Something",
"items" : [
    {
        "item" : 47,
        "color" : "red"
    },
    {
        "item" : 44,
        "color" : "green"
    },
    {
        "item" : 39,
        "color" : "blue"
    }
]
} 
```

在每个文档中，我都需要找到最小的项目并将其删除。所以它应该是这样的：

```
{
"_id" : 100,
"name" : "Something",
"items" : [
    {
        "item" : 47,
        "color" : "red"
    },
    {
        "item" : 44,
        "color" : "green"
    }
]
} 
```

看起来`findAndModify`应该在这里使用函数，但我不能再进一步了。

如何找到数组中的最小元素并将其删除？

我正在使用 MongoDB 和 Pymongo 驱动程序。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T17:58:23.847

If you are not restricted to having the query be in one single step, you could try:

step 1) use the aggregate function with the $unwind and $group operators to find the minimum item for each document

```
myresults = db.megas.aggregate( [ { "$unwind": "$items" },  
    {"$group": { '_id':'$_id' , 'minitem': {'$min': "$items.item" } } } ] ) 
```

step 2) the loop through the results and $pull the element from the array

```
for result in myresults['result']:
    db.megas.update( { '_id': result['_id'] }, 
        { '$pull': { 'items': { 'item': result['minitem'] } } } ) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-25T19:25:41.320

请找到我用纯 JavaScript 编写的解决方案。它应该直接通过 MongoDb shell 工作

```
cursor = db.students.aggregate(
[{ "$unwind": "$items" }, 
 { "$match": { "items.color": "green"}},
 { "$group": {'_id': '$_id', 'minitem': {
                '$min': "$items.item"
            }
        }
    }

]);

cursor.forEach(
function(coll) {
    db.students.update({
        '_id': coll._id
    }, {
        '$pull': {
            'items': {
                'item': coll.minitem
            }
        }
    })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T19:00:14.597

从 开始`Mongo 4.4`，[`$function`](https://docs.mongodb.com/master/reference/operator/aggregation/function/index.html)聚合运算符允许应用自定义 javascript 函数来实现 MongoDB 查询语言不支持的行为。

再加上对[`db.collection.update()`](https://docs.mongodb.com/master/reference/method/db.collection.update/index.html#db.collection.update)in的改进`Mongo 4.2`，可以接受一个聚合管道，允许根据自己的值更新字段，

我们可以以语言不容易允许的方式操作和更新数组：

```
// {
//   "name" : "Something",
//   "items" : [
//     { "item" : 47, "color" : "red"   },
//     { "item" : 39, "color" : "blue"  },
//     { "item" : 44, "color" : "green" }
//   ]
// }
db.collection.update(
  {},
  [{ $set:
    { "items":
      { $function: {
          body: function(items) {
            var min = Math.min(...items.map(x => x.item));
            return items.filter(x => x.item != min);
          },
          args: ["$items"],
          lang: "js"
      }}
    }
  }],
  { multi: true }
)
// {
//   "name" : "Something",
//   "items" : [
//     { "item" : 47, "color" : "red"   },
//     { "item" : 44, "color" : "green" }
//   ]
// } 
```

`$function`接受3个参数：

*   `body`，这是要应用的函数，其参数是要修改的数组。这里的功能只是首先`item`从数组中找到最小值，然后再`filter`找出它。
*   `args`，其中包含`body`函数作为参数的记录中的字段。在我们的例子中，`"$items"`。
*   `lang`，这`body`是编写函数的语言。仅`js`当前可用。

# scala - 将字符串重定向到 scala.sys.process

> ID：13335010
> 
> 赞同：8
> 
> 时间：2012-11-11T20:15:47.337
> 
> 标签：scala

scala.sys.process 的文档提供了有关如何将 URL 或文件重定向到进程 (stdin) 的示例。但是如何重定向字符串呢？

我使用 Scala 2.9。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T20:57:49.237

除了 a `File`or`URL`您还可以提供`InputStream`to `ProcessBuilder`。

有多种方法可以将 a`String`转换为`InputStream`. 在下面我使用`ByteArrayInputStream`and `String.getBytes`。

作为一个例子，我将`cat`在输入设置为`inputString`.

```
scala> import java.io.ByteArrayInputStream
import java.io.ByteArrayInputStream

scala> import scala.sys.process._
import scala.sys.process._

scala> val cmd = List("cat")
cmd: List[java.lang.String] = List(cat)

scala> val inputString = "hello\nworld"
inputString: java.lang.String = 
hello
world

scala> val is = new ByteArrayInputStream(inputString.getBytes("UTF-8"))
is: java.io.ByteArrayInputStream = java.io.ByteArrayInputStream@28d101f3

scala> val out = (cmd #< is).lines_!
out: Stream[String] = Stream(hello, ?)

scala> out.foreach(println)
hello
world 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-04T03:05:05.927

更新@soucredelica 的答案，我还展示了如何将`Stream`of连接`String`到`String`using `mkString`：

```
scala> import java.io.ByteArrayInputStream
import java.io.ByteArrayInputStream

scala> import scala.sys.process._
import scala.sys.process._

scala> val cmd = List("cat")
cmd: List[java.lang.String] = List(cat)

scala> val inputString = "hello\nworld"
inputString: java.lang.String = 
hello
world

scala> val inputStream = new ByteArrayInputStream(inputString.getBytes("UTF-8"))
inputStream: java.io.ByteArrayInputStream = java.io.ByteArrayInputStream@28d101f3

scala> val outputStream: Stream[String] = (cmd #< inputStream).lineStream_!
outputStream: Stream[String] = Stream(hello, ?)

scala> println(outputStream.mkString("\n"))
hello
world 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:20:16.563

要获取 ProcessBuilder，请参阅 scaladoc

[http://www.scala-lang.org/api/current/scala/sys/process/ProcessBuilder.html](http://www.scala-lang.org/api/current/scala/sys/process/ProcessBuilder.html)

scala.sys.process.Process#apply 有多种参数，包括单个字符串。

我希望能帮助你。

# ruby-on-rails-3 - CanCan::AccessDenied 在 LocationController#show 中适用于所有角色

> ID：13335012
> 
> 赞同：1
> 
> 时间：2012-11-11T20:15:57.827
> 
> 标签：ruby-on-rails-3, devise, roles, cancan

使用 CanCan 进行授权，使用 Devise 进行身份验证。我有三个角色。管理员角色有权访问所有操作。但是当我以管理员身份登录时，我仍然得到拒绝访问。我究竟做错了什么？？我也一直在关注[这个 wiki 进行实施](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)

这是我的控制器代码

```
class LocationController < ApplicationController
  #before_filter :authenticate, :only => [:title_clearing]
  before_filter :authenticate_user!
  load_and_authorize_resource

  def show
    @data = []
    if params[:Date].match(/^(19|20)\d\d[- \/.](0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])$/).nil? == true
      @message = "Wrong Date Format"
    else
      @data = Location.show(params[:Date])
      if @data.size == 0
        @message = "No data exists for "+ params[:Date]
      else
        @message = "Data loaded successfully for "+ params[:Date]
      end
    end

    if params[:Date] == "all"
      @message = "All records loaded"
      @data = Location.show("all")
    end

  end
end 
```

在能力.rb

```
if user.is? :admin
    can :all, :location 
end
if user.is? :titleclearing
    can :title_clearing, :location
end
if user.is? :acquisitions
    cannot :title_clearing, :location 
end 
```

在用户模型中

```
def role?(role)
    roles.include? role.to_s
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:28:06.157

User proper CanCan convention:

```
if user.is? :admin
  can :manage, Location
end 
```

Or, you can manage all:

```
can :manage, :all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:55:05.943

或许这是因为[能力优先](https://github.com/ryanb/cancan/wiki/Ability-Precedence)。根据您的定义`ability.rb`，我认为：

*   用户具有角色`acquisitions`继承能力，用户具有角色`titleclearing`和`admin`。
*   并且 user has role`titleclearing`继承了 user has role 的能力`admin`。

所以，正如你所说，`"now everyone's being let through"`因为所有用户现在都有能力`admin`。尝试像这样改变能力的顺序：

```
if user.is? :titleclearing
  can :title_clearing, :location
end
if user.is? :acquisitions
  cannot :title_clearing, :location 
end
if user.is? :admin
  can :all, :location 
end 
```

并检查它是否像你想要的那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:24:56.667

尝试这个：

```
if user.is? :admin
  can :manage, :location
end 
```

来自[维基](https://github.com/ryanb/cancan/wiki/Defining-Abilities)

> 您可以传递 :manage 来表示任何操作，并传递 :all 来表示任何对象。

# ruby - IRB 中控制结构和块内的显式“返回”给出“意外返回”

> ID：13335016
> 
> 赞同：2
> 
> 时间：2012-11-11T20:16:13.810
> 
> 标签：ruby, irb

关于以下代码：

```
if a == 1
  return "a is one"
end 
```

当我在 IRB 中执行它时，它给了我

> LocalJumpError：意外`return`

但是，当我将相同的代码放入我的 Rails 应用程序时，它可以完美运行。

我真的必须避免从块内部返回显式值吗？为什么 Rails 应用程序没有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T20:24:12.590

当您在控制台中自行运行此代码时，没有可返回的范围。一旦将其放入方法中，它将按预期工作。

没有范围的例子：

```
irb(main):001:0> if a = 1
irb(main):002:1>   return "a is one"
irb(main):003:1> end
LocalJumpError: unexpected return
  from (irb):2
  from /Users/dougal/.rbenv/versions/1.9.3-p194/bin/irb:12:in `<main>' 
```

方法范围内的示例：

```
irb(main):001:0> def run
irb(main):002:1> if a = 1
irb(main):003:2>   return "a is one"
irb(main):004:2> end
irb(main):005:1> end
=> nil
irb(main):006:0> puts run
a is one
=> nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:50:30.600

需要记住一个微妙之处：通过`lambda`行为类似方法创建的块 - 它们的内部`return`只是终止**块本身**，但通用块`return`终止相应的**方法**：

```
def generic_block_demo
  (10..15).each {|el| return el }
  puts "You'll never be here"
end

def lambda_block_demo
  (10..15).each &lambda{|el| return el }
  puts "You'll be here! I know!"
  12345
end

puts generic_block_demo # => 10

puts lambda_block_demo # => You'll be here! I know!
                       #    12345 
```

# javascript - javascript原型继承 - 2个对象使用自己的原型方法，但只有1个被调用

> ID：13335020
> 
> 赞同：0
> 
> 时间：2012-11-11T20:17:15.720
> 
> 标签：javascript, inheritance, prototype

**编辑** 我仍然想知道为什么会发生这种情况，但是在阅读了原型上的一些内容之后，我的解决方案是不让这两个对象覆盖基本原型，如[http://freshbrewedcode.com/derekgreer/2011/12/31 /solid-javascript-the-liskov-substitution-principle/](http://freshbrewedcode.com/derekgreer/2011/12/31/solid-javascript-the-liskov-substitution-principle/)

我有 3 个对象

基础对象称为对象控件

对象moneyBag 和对象movementPad 都继承了控件的原型。

钱袋和运动垫都有 2 个不同的绘图功能，所以代码看起来像这样

```
Money.prototype.Draw = function (context) {
    console.log("foo2");
}

MovementPad.prototype.Draw = function (context) {
    console.log("foo1");
} 
```

在我的 HUD.js 中，这两个对象都被初始化了，然后 Hud 调用这两个对象绘制像这样

```
var movementControl = new MovementPad(screenManager, 1,1,1,1);

var money = new Money(screenManager, 10, 10, 37, 36);

   // .... code skipped
this.Draw = function (context) {
    movementControl.Draw(context);
    money.Draw(context);
} 
```

我的问题是这两个对象都没有调用它们的绘制方法。如果我先初始化motionPad，那么会调用draw方法，如果我先初始化money，只会调用draw方法。

我错过了对原型的理解/做错了什么，因为他们的两种绘制方法都不能被调用。

（下面有更多代码）

```
function control(x, y, width, height) {
    "use strict"
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;

    var defaultImg = new Image();
    defaultImg.src = "blank.png";
}

    //.... code skipped

control.prototype.Draw = function (context) {
    context.drawImage(defaultImg, this.x, this.y, this.width, this.height);
} 
```

运动垫.js

```
MovementPad.prototype = control.prototype;
MovementPad.prototype.constructor = MovementPad;

function MovementPad(screenManager, x, y, width, height) {
    "use strict"
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;

    //.... code skipped

    MovementPad.prototype.Draw = function (context) {
        context.drawImage(movementPad, x, y , width ,height);

    } 
```

}

Money.js

```
Money.prototype = control.prototype;
Money.prototype.constructor = Money;

function Money(screenManager, x, y, width, height) {
    "use strict"
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;

  //.... code skipped

    Money.prototype.Draw = function (context) {
        context.drawImage(moneyBag, x, y, width, height);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:43:49.197

您已经`control.prototype`为`Money`和`MovementPad`的原型分配了相同的实例，因此您的`Draw`方法声明相互冲突。

使原型分离实例：

```
Money.prototype = new control();
// ...
MovementPad.prototype = new control(); 
```

你的`Draw`作业应该有效。

# c++ - 对包含类项的向量进行排序

> ID：13335022
> 
> 赞同：1
> 
> 时间：2012-11-11T20:17:43.680
> 
> 标签：c++

假设我有一个看起来像这样的类：

```
Class Items{
   private:
   float price;
   string name;
   float qunatity;
   public:
   getname(string nam){name=nam;}} 
```

ETC...

我有一个由此类项目组成的向量，然后我将如何根据用户输入对向量进行排序，例如如果用户想按名称对项目进行排序，那么它将按名称等进行排序。

编辑:: 好的，所以我有一个类项目，也有一个类库存：

```
Class Inventory{
      print();
      getdata();
      sort();
      static bool SORT_BY_NAME(const Item& i, const Item &j)} 
```

然后我有一个 Sang Geo 为比较而编写的函数

```
static bool Inventory::SORT_BY_NAME(const Item & i, const Item & j) {                                                                                                                                                                                                       
  return i.name.compare(j.name) < 0;
} 
```

然后我还有一个排序函数，它将使用不同的布尔排序函数

```
void Inventory::sorting(){
  int x;
  cout<<"How do you want to sort it: 1.name 2.ID 3.month";
  cin>>x;
  // vector<Item>::iterator it;                                                                                                   
  switch(x){
  case 1:
    std::sort(items.begin(), items.end(), Inventory::SORT_BY_NAME);
  } 
```

但它说 Items::name 是私有的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:20:34.357

您只需为要排序的每个字段编写一个比较函数，然后根据用户输入选择正确的字段。

见[排序](http://www.cplusplus.com/reference/algorithm/sort/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:42:16.950

为了更好地说明如何在[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)您的场景中使用，这里有一个完整的示例，其中为您的类中的三个字段定义了三个比较函数：

```
#include <algorithm>
#include <vector>
#include <iostream>
#include <sstream>
#include <string>

class Item{
    public:
        float price;
        std::string name;
        float quantity;
        static bool SORT_BY_NAME(const Item & i, const Item & j) {
            return i.name.compare(j.name) < 0;
        }
        static bool SORT_BY_PRICE(const Item & i, const Item & j) {
            return i.price < j.price;
        }
        static bool SORT_BY_QUANTITY(const Item & i, const Item & j) {
            return i.quantity < j.quantity;
        }
        std::string ToString(){
            std::stringstream ss;
            ss << name << ": $" << price << "; " << quantity;
            return ss.str();
        }
};

int main(int argc, char ** argv) {
    std::vector<Item> items;
    Item item1, item2, item3;

    item1.name = "Name1";
    item1.price = 2;
    item1.quantity = 3;

    item2.name = "Name2";
    item2.price = 3;
    item2.quantity = 1;

    item3.name = "Name3";
    item3.price = 1;
    item3.quantity = 2;

    items.push_back(item1);
    items.push_back(item2);
    items.push_back(item3);

    std::sort(items.begin(), items.end(), Item::SORT_BY_NAME);
    std::cout<<std::endl<<"By name:"<<std::endl;
    for(std::vector<Item>::iterator i = items.begin(); i != items.end(); ++i)
        std::cout<<i->ToString()<<std::endl;

    std::sort(items.begin(), items.end(), Item::SORT_BY_PRICE);
    std::cout<<std::endl<<"By price:"<<std::endl;
    for(std::vector<Item>::iterator i = items.begin(); i != items.end(); ++i)
        std::cout<<i->ToString()<<std::endl;

    std::sort(items.begin(), items.end(), Item::SORT_BY_QUANTITY);
    std::cout<<std::endl<<"By quantity:"<<std::endl;
    for(std::vector<Item>::iterator i = items.begin(); i != items.end(); ++i)
        std::cout<<i->ToString()<<std::endl;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T20:19:03.397

您将使用自定义比较器对象，该对象根据`name`或`price`进行排序`quantity`。

这是[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)'s 功能的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T20:19:57.557

`std::sort`算法有三个参数——first、last和*comparator*。

> 比较函数对象，它采用与范围中包含的相同类型的两个值，如果第一个参数在其定义的特定严格弱排序中位于第二个参数之前，则返回 true，否则返回 false。

# javascript - 根据 GET 的内容显示表单字段

> ID：13335025
> 
> 赞同：0
> 
> 时间：2012-11-11T20:18:22.990
> 
> 标签：javascript, jquery

我有一个带有选择框的注册表单，并且根据用户选择的选项，某些字段可用。这适用于我从另一篇文章中获得的以下代码：

```
<div id="option1" class="plan_options" style="display:none">display something</div>

$(function() {
    $('#plan').change(function(){
    $('.plan_options').hide();
        $('#' + $(this).val()).show();
    });
}); 
```

我唯一的问题是，当有人从产品页面访问注册表单时，我通过 GET 传递一个变量，这是上述代码适用的计划选项之一。选择正确填充了正确的值，但上面的代码不起作用并且不显示 div。如果我手动更改为适当的选择之一（包括通过 GET 传递的选择，它工作正常 - 是否有让上述代码使用 GET 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:39:48.683

它与 .change() 有关，因为更改实际上并不是通过 GET 值发生的。您需要在页面加载时触发更改。假设您已经从 GET 捕获并应用了变量。

[**小提琴**](http://jsfiddle.net/videsignz/sdsVm/)

就像是..

```
$('document').load(function(){
    $('#plan').change();
}); 
```

此外，您应该使用 on() 处理程序设置函数，如下所示

```
$(function() {

    $('body').on('change', '#plan', function(){
        $('.plan_options').hide();
        $('#' + $(this).val()).show();
    });

}); 
```

最终这将是你的最终代码...... :)

```
$(function() {

    $('body').on('change', '#plan', function(){
        $('.plan_options').hide();
        $('#' + $(this).val()).show();
    });

    $('#plan').change();

}); 
```

# jquery - 在 JQuery 中提交表单

> ID：13335026
> 
> 赞同：1
> 
> 时间：2012-11-11T20:18:23.447
> 
> 标签：jquery, ruby-on-rails, forms

在我的 Rails 视图中，我有一个 HTML 表单

```
<form name="input">
Username: <input type="text" name="user"> <br/>
<input type="button" id="submit_form" value="Submit">
</form> 
```

单击提交按钮时，我想使用 JQuery 调用控制器`download`，并传递`user`参数。（在`routes.rb`我指定`match "download" => "Posts#download"`）

我应该如何使用 JQuery 来做到这一点？

```
$("#submit_form").click(function() {
  // what should I put here?
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:25:45.337

你可以这样做：

```
/* attach a submit handler to the form */
  $("#submit_form").submit(function(event) {

    /* stop form from submitting normally */
    event.preventDefault(); 

    /* get some values from elements on the page: */
    var $form = $( this ),
        term = $form.find( 'input[name="user"]' ).val(),

    /* Send the data using post and fire some callback */
    $.post( "/download", { s: term },
      function( data ) {
       //some callback
      }
    );
  }); 
```

来源：来自 jQuery 文档的修改[示例](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:29:31.630

If I understand correctly you are trying to submit the form through jQuery instead of the normal post process. I'd suggest using [jQuery's form submit function](http://docs.jquery.com/Events/submit)

Basically you'll be looking for something like:

```
$("form").submit(function() {
  var data = $(this).serialize();
  $.ajax({
    url: "controller/action",
    type: "POST",
    data: data
    // plus anyother options you are wanting
  }).done(function() { 
    // a success function
  });
  return false;
  }); 
```

Hope that helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:22:18.180

```
$("#submit_form").click(function() {
  // what should I put here?
  $('form[name="input"]').submit();
}); 
```

或者您可以使用 id="submit_form" 将 type="submit" 设置为您的输入，并且不设置任何处理程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T20:23:26.073

我不是 Rails 开发人员，但你不能把路由放在表单操作中，然后使用提交，如下所示：

```
<form name="input" action="/Download">

$("#submit_form").click(function() {
  $("#input").submit();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T20:24:52.077

jQuery 提供了一个 .submit() [http://api.jquery.com/submit/](http://api.jquery.com/submit/)

您不需要绑定到输入按钮的单击方法，因为该提交按钮已经知道提交表单。

你正在寻找的是

```
$("form[name='input']").submit(function(){
  //do something before function gets submitted
}); 
```

在该函数中，您需要对服务器进行 ajax 调用并使用 preventDefault 取消表单的原始提交。

# bash - bash中英文单词的奇异化函数

> ID：13335027
> 
> 赞同：3
> 
> 时间：2012-11-11T20:18:28.187
> 
> 标签：bash, nlp

任何指向对英语单词执行单数化的 bash 函数的指针？它不需要是完美的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:20:59.457

一个不完美的将是`${word%s}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:27:28.477

如果您需要同时涵盖名词和动词，和/或不完美的解决方案变得太不完美，那么忘记 Bash 并寻找用于*形态分析和消歧*的工具。

# objective-c - 应用程序 didFinishLaunchingWithOptions 没有被调用

> ID：13335030
> 
> 赞同：0
> 
> 时间：2012-11-11T20:19:02.323
> 
> 标签：objective-c, cocoa-touch, appdelegate

我试图弄清楚为什么在我的应用程序启动时似乎没有调用“应用程序 didFinishLaunchingWithOptions”。我的 NSLog (@"Launch!") 语句没有出现在控制台中，并且它之后的字典也没有被创建。如果它有所作为，我将使用带有导航控制器的 Storyboard 作为初始视图。我尝试将“对象”添加到导航控制器并将其设置为“AppDelegate”，然后将其设置为引用插座，但这似乎也没有什么不同。每次应用启动时不应该调用这个方法吗？我什至重置了模拟器，但仍然没有。

谢谢。

```
//
//  AppDelegate.m
//  PersonLibraryiOS
//
//  Created by Joey on 11/7/12.
//  Copyright (c) 2012 Joey. All rights reserved.
//

#import "AppDelegate.h"
#import "AddViewController.h"
#import "Person.h"
@implementation AppDelegate
@synthesize PersonDict;

-(void)addtoDict:(Person *)newPerson
{
    [PersonDict setObject:@"newPerson" forKey:[newPerson name]];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  NSLog (@"Launch!");

    // Override point for customization after application launch.
    return YES;
    PersonDict = [NSMutableDictionary dictionaryWithContentsOfFile:@"diskDict"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:30:32.473

**编辑：我最初写这篇文章时一定过得很糟糕。去掉了这个帖子中极其不必要的态度，并澄清了一些事情。**

如果您不知道，`return`则将控制权返回给方法/子例程的调用者。由于您在创建字典之前从该方法返回 YES，因此它永远不会被创建并设置为属性。

此外，您尝试分配的任何内容的语法`NSMutableDictionary`都不正确。似乎 personDict 是一个基于以下的属性`@synthesize`：

您正在访问支持它的实例变量。您应该像这样使用点符号访问属性：

```
self.personDict = [NSMutableDictionary dictionaryWithContentsOfFile:@"diskDict"];

//in addToDict
[self.personDict setObject:@"newPerson" forKey:[newPerson name]]; 
```

或使用 setter 和 getter（点表示法具有相同的效果）：

```
[self personDict];
[self setPersonDict]; 
```

我不认为你的使用`setObject:forKey:`是你想要的。

```
//the object associated with the key will always be
//the NSString "newPerson" 
[self.personDict setObject:@"newPerson" forKey:[newPerson name]];
//did you mean to set the object to the method argument newPerson?
[self.personDict setObject: newPerson forKey:[newPerson name]]; 
```

此外，在 Objective-C 中，您应该以驼峰式命名属性和变量，第一个字母小写。喜欢`myCoolVar`，或在这种情况下，`personDict`而不是`PersonDict`; 首字母大写骆驼大小写用于类名，例如您的`Person`类。

最后，如果您手动`@synthesize`，最好命名支持变量`_<variable name>`以避免意外访问它。

```
@synthesize personDict = _personDict; 
```

# node.js - 捕捉 imagemagick 错误 - 节点崩溃

> ID：13335035
> 
> 赞同：3
> 
> 时间：2012-11-11T20:19:48.077
> 
> 标签：node.js, imagemagick

我对节点 imagemagick 有几个问题。在某些图像上传时，我收到此错误：

```
/node_modules/imagemagick/imagemagick.js:126
    prop[comps[0].trim().toLowerCase()] = comps[1].trim()

TypeError: Cannot set property '20' of undefined 
```

知道这意味着什么吗？有些图像可以正常工作，有些则可以。在这种情况下，它是一个名为“icon_75.png”的 png 图像 - 其他 png 工作正常，都是通过相同的过程创建的。

它似乎正在解析包含一堆直方图编号行的图像信息 - 似乎是合法信息。

```
'  Histogram:',
'       973: (107,108, 52) #6B6C34 srgb(107,108,52)',
'        70: (108,105, 55) #6C6937 srgb(108,105,55)',
'         2: (110,107, 58) #6E6B3A srgb(110,107,58)',
'         2: (112,109, 60) #706D3C srgb(112,109,60)',
'         1: (114,111, 63) #726F3F srgb(114,111,63)',
'         1: (115,113, 65) #737141 srgb(115,113,65)',
'        14: (116,117, 64) #747540 srgb(116,117,64)',
'         1: (117,114, 68) #757244 srgb(117,114,68)',
'         1: (120,117, 71) #787547 srgb(120,117,71)',
'         1: (121,119, 73) #797749 srgb(121,119,73)',
'        18: (124,121, 76) #7C794C srgb(124,121,76)',
'         6: (125,126, 77) #7D7E4D srgb(125,126,77)',
'         2: (130,127, 85) #827F55 srgb(130,127,85)',
'        20: (134,135, 89) #868759 srgb(134,135,89)', 
```

我更重要的问题是如何避免崩溃。我尝试将裁剪调用封装在一个 catch 块中，但这不起作用。关于如何防止我的应用出现故障的任何建议？

```
try {
  imageMagick.crop({
    width: opts.width,
    height: opts.height,
    srcPath: this.uploadDir + "/" + that.name,
    dstPath: this.uploadDir + "/" + version + "_" + that.name
  }, function(err, stdout, stderr) {
    if(err)
      console.log(err)
    else {
      console.log('Creating ' + version);
      ...
    }
  });
}
catch(e) {
  console.log('Whao');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:30:43.390

因此，在某些版本的 ImageMagick 中，标识输出似乎发生了变化。其输出中也可能存在错误。

我在这里提交了一个 ImageMagick 错误：[http ://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22256](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22256)

还有一个 Node ImageMagick 错误[https://github.com/rsms/node-imagemagick/issues/67](https://github.com/rsms/node-imagemagick/issues/67)

在撰写本文时，两者都没有答案，因此我开始进行修复。

您将需要编辑 node_modules/imagemagick/imagemagick.js 文件并查找 parseIdentify 函数 - 将其注释掉并使用这个：[https ://gist.github.com/4066782](https://gist.github.com/4066782)

# javascript - 通过innerHTML 设置表单？

> ID：13335037
> 
> 赞同：0
> 
> 时间：2012-11-11T20:19:55.143
> 
> 标签：javascript, html

我在使用内部 HTML 设置表单时遇到了一些问题：

```
document.getElementById("Button").innerHTML='<form action="add.php" method="post" onSubmit="track('P1');">'+
'<input type="hidden" name="add" value="true"> '+
'<input type="hidden" name="item" value="P1"> '+
'<input type="hidden" name="pID" value="3"> '+
'<input type="hidden" name="qty" value="1"> '+      
'<input name="image" type="image" onMouseOver="this.src='/img/shop/r_addbasket.png'" '+
'onMouseOut="this.src='/img/shop/addbasket.png'" '+
'value="Add to Basket" src="/img/shop/addbasket.png" alt="AddtoBasket"></form>'; 
```

我认为它是因为我`'`在表格里面有一些东西会扔掉它。我尝试使用转义字符但没有用。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:22:43.037

试试这个，在不同的上下文中使用它时你没有逃脱'

```
document.getElementById("Button").innerHTML='<form action="add.php" method="post" onSubmit="track(\'P1\');">'+
'<input type="hidden" name="add" value="true"> '+
'<input type="hidden" name="item" value="P1"> '+
'<input type="hidden" name="pID" value="3"> '+
'<input type="hidden" name="qty" value="1"> '+      
'<input name="image" type="image" onMouseOver="this.src=\'/img/shop/r_addbasket.png\'" '+
'onMouseOut="this.src=\'/img/shop/addbasket.png\'" '+
'value="Add to Basket" src="/img/shop/addbasket.png" alt="AddtoBasket"></form>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:33:30.017

不要逃避任何事情。您不需要转义 XML：

```
 var xml = <form action="add.php" method="post" onSubmit="track('P1');">
    <input type="hidden" name="add" value="true" /> 
    <input type="hidden" name="item" value="P1" /> 
    <input type="hidden" name="pID" value="3" /> 
    <input type="hidden" name="qty" value="1" />     
    <input name="image" type="image" onMouseOver="this.src='/img/shop/r_addbasket.png'" 
    onMouseOut="this.src='/img/shop/addbasket.png'"
    value="Add to Basket" src="/img/shop/addbasket.png" alt="AddtoBasket" />
</form>
    document.getElementById("Button").innerHTML = xml; 
```

确保关闭输入标签（就像我上面所做的那样）。这比尝试添加转义字符更清晰、更易于阅读。

# android - java中的int字节到字符串

> ID：13335042
> 
> 赞同：2
> 
> 时间：2012-11-11T20:20:02.687
> 
> 标签：android, sockets, bytearray

**问题**

我在我的套接字客户端中读取了第一个字节以检查连接：

```
ByteBuffer b = ByteBuffer.allocate(4);
b.order(ByteOrder.BIG_ENDIAN);
...
int dataInt = clientSocket.getInputStream().read(); 
```

**文档**：

> 从此流中读取单个字节并将其作为 0 到 255 范围内的整数返回。如果已到达流的末尾，则返回 -1。

之后我想将此字节与下一个输入字符串拼接。我将此整数字节转换为字符

```
b.putInt(dataInt);
byte[] dataByte = b.array();
final String data; 
```

并检查它。如果 dataInt != -1，我必须将此裁剪后的字节返回到新字符串中：

```
if(dataInt != -1)
{
    String c = new String(dataByte);
    Log.v("MSG", c);
    data = c + inToServer.readLine();
}
else
{
    data = inToServer.readLine();
} 
```

为什么我在日志中看到“MSG, ������MY MESSAGE”？如何正确获取字符串？

* * *

更新，我如何发送消息：

```
byte[] buf = str.getBytes("UTF-8");
outToServer.write(buf, 0, buf.length);
outToServer.writeBytes("\n");
outToServer.flush(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:40:33.323

```
if(dataInt != -1)
{
    String c = new String(dataByte, "UTF-8");
    Log.v("MSG", c);
    data = c + inToServer.readLine();
}
else
{
    data = inToServer.readLine();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:40:55.240

好的，所以在您的服务器端只需使用收到的 byte[] 执行此操作即可。不需要字节缓冲区，也不需要以任何方式对其进行操作。

```
String str = new String(recievedBytes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:48:59.067

我建议您为此使用[IOUtils.toString](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream%29)。它促进了许多无聊且容易出错的输入/输出流操作。

这是解释[如何设置项目以使用 apache IO commons](https://stackoverflow.com/questions/1769889/how-to-include-apache-commons-io-in-eclipse-java)的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T21:16:58.613

天哪，我做到了。解决方案：

```
byte[] b1 = new byte[1];
int dataInt = clientSocket.getInputStream().read();
b1[0] = (byte)dataInt; 
```

# html - 在 Outlook 2007/2010/2013 和 Gmail 中重复背景图像

> ID：13335043
> 
> 赞同：2
> 
> 时间：2012-11-11T20:20:04.153
> 
> 标签：html, css, email, outlook-2007

我有一个`<td>`动态高度但固定宽度的 HTML 电子邮件。

如何在 Outlook 2007、2010、2013 和 Gmail 中也可以向此单元格添加（垂直）重复背景图像？

该单元格中没有任何内容，因为它“只是”用于视觉目的。但它在我的内容单元格旁边，因此需要在高度上是动态的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T22:01:46.580

**2013 年 8 月更新：**我怀疑这对约翰仍然有用。B，但我只是想为可能遇到此问题的任何人提供快速更新。

我能够解决我之前描述的问题，并阻止背景图像从纯色背景下方窥视。

这是更新的代码：

```
<table background="http://i.imgur.com/n8Q6f.png" cellpadding="0" cellspacing="0" width="200">
    <tr>
        <td>
          <!--[if gte mso 9]>
          <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width: 200px;">
            <v:fill type="tile" src="http://i.imgur.com/n8Q6f.png" color="#f6f6f6" />
            <v:textbox style="mso-fit-shape-to-text: true;" inset="0,0,0,0">
          <![endif]-->
                <table border="0" cellpadding="0" cellspacing="0">
                    <tr>
                        <td width="100"></td>
                        <td bgcolor="#ffffff" width="100">
                        The<br/>
                        background<br/>
                        image<br/>
                        on<br/>
                        the<br/>
                        left<br/>
                        will<br/>
                        stretch<br/>
                        to<br/>
                        the<br/>
                        height<br/>
                        of<br/>
                        this<br/>
                        content.
                        </td>
                    </tr>
                </table>
          <!--[if gte mso 9]>
              <p style="margin:0;mso-hide:all"><o:p xmlns:o="urn:schemas-microsoft-com:office:office">&nbsp;</o:p></p>
            </v:textbox>
          </v:rect>
          <![endif]-->
        </td>
    </tr>
</table> 
```

这里的修复是行

```
<p style="margin:0;mso-hide:all"><o:p xmlns:o="urn:schemas-microsoft-com:office:office">&nbsp;</o:p></p> 
```

就在文本框结束之前，我已经[在之前评论中提到的 Microsoft Office TechCenter 线程中对此进行了](http://social.technet.microsoft.com/Forums/office/en-US/515cacfc-1c7f-41d8-b99d-529e07131e1c/outlook-20072010-inserting-table-into-autoshape-leaves-extra-space#4b9c564b-e887-4478-8197-0feadfdbbe1e)解释。

**我原来的答案：**

> 我已经能够**几乎**破解这个，但不完全。所以我在这里发布这个，希望有人可以在它的基础上发布一个完整的解决方案。
> 
> 我很确定您无法获得背景图像来实际填充表格单元格或其他未定义高度的区域。**但是，您可以在表格周围**使用 [VML 文本框][1] 和 [VML 填充元素][2] ，定义背景图像和备用颜色，可以拉伸到内容的高度。
> 
> 然后，您可以在此文本框内放置一个包含两列的表格，其中一个具有透明背景，另一个具有纯色背景，以模拟您描述的布局。
> 
> 在文本框周围，为非 Outlook 电子邮件客户端包装另一个具有相同背景图像和后备颜色的表格。
> 
> 现在，这一切都很好，但我遇到的问题是 Outlook/Word 渲染引擎坚持在文本框内的表格下方添加一个空白行。因此，虽然 Outlook 会在内容的一侧重复背景图像，但它也会在外部表格的整个宽度处添加一行背景图像。
> 
> 在 Outlook 2007+ 中测试以下内容，看看我目前有什么：
> 
> ```
> <table background="http://i.imgur.com/n8Q6f.png" cellpadding="0" cellspacing="0" width="200">
>   <tr>
>     <td>
>       <!--[if gte mso 9]>
>       <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width: 200px;">
>         <v:fill type="tile" src="http://i.imgur.com/n8Q6f.png" color="#f6f6f6" />
>         <v:textbox style="mso-fit-shape-to-text: true;" inset="0,0,0,0"><span style="font-size: 0px;">
>         <![endif]-->
>         <table border="0" cellpadding="0" cellspacing="0">
>           <tr>
>             <td width="100"></td>
>             <td bgcolor="#ffffff" width="100">
>               The<br/>
>               background<br/>
>               image<br/>
>               on<br/>
>               the<br/>
>               left<br/>
>               will<br/>
>               stretch<br/>
>               to<br/>
>               the<br/>
>               height<br/>
>               of<br/>
>               this<br/>
>               content.
>             </td>
>           </tr>
>         </table>
>       <!--[if gte mso 9]>
>         </span></v:textbox>
>       </v:rect>
>       <![endif]-->
>     </td>
>   </tr>
>   </table> 
> ```
> 
> 我尝试了一些解决方案：
> 
> *   将空行的字体大小/行高设置为 0（我在上面的示例代码中这样做了，但它呈现为 1px 而不是 0）
> *   使用不同的元素而不是表格，以避免出现空行。
>     *   `<p>`: 不能设置为固定宽度。
>     *   `<div>`: 不能有背景颜色。
>     *   `<span>`：不能呈现为块级元素。
> 
> 希望有人可以分享这个剩余问题的解决方案。**John B.**，如果您可以发布您正在编码的实际代码或布局以及背景图像，这也将有助于确定哪些黑客可能有效以及必须考虑哪些限制。
> 
> 例如，如果背景图像是一个 1px 高的重复图像，您可以使用一行 1px 宽的具有不同背景颜色的表格单元格来代替实际图像。
> 
> [1]： http: [//msdn.microsoft.com/en-us/library/bb264073%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb264073%28v=VS.85%29.aspx) [2]：http: [//msdn.microsoft.com/en-us/library /bb229596%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb229596%28v=VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:10:52.820

When doing HTML email, you should be aware of the differences among the various clients.

[This guide](http://www.campaignmonitor.com/css/) can help. For example, in Outlook 2007/2010, background-repeat is not supported. Oddly, it was supported in version 2003.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:51:04.947

似乎没有办法在 Outlook 2007/2010 和 2013 中实现重复的背景图像。

以下是 JFK 测试的预览：[http](http://www.emailonacid.com/app/acidtest/viewresult/nWC9hJ5N0BvkZIk4Zvz724rMQm19MUsCJ0shOIFcWgGMh) ://www.emailonacid.com/app/acidtest/viewresult/nWC9hJ5N0BvkZIk4Zvz724rMQm19MUsCJ0shOIFcWgGMh 。不幸的是，它也不起作用。

CampaignMonitor 对不同客户端中的 HTML 和 CSS 支持提供了非常有用的指南：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

如果您在 Outlook 2007/2010 和 2013 中只需要固定大小的背景图像，VML 对象可能会帮助您：[https ://www.campaignmonitor.com/forums/viewtopic.php?pid=14197](https://www.campaignmonitor.com/forums/viewtopic.php?pid=14197)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:10:33.320

我很久以前就不再使用 Outlook 了，但这似乎至少在 gmail 中起到了作用：

```
<td width="200" style="background-repeat: repeat-y;" background="http://the-location.com/backgroundImage.jpg"></td> 
```

提示是使用（不推荐使用的）`background`属性来放置图像而不是在`style`属性内，您可以在其中设置`repeat-y`属性（另请注意，我使用的是属性`width`而不是将其添加为属性内的 css`style`属性......但是正如您所提到的，只有在您构建 html 电子邮件之前，您才知道我们在说什么；）

[检查这个小提琴的演示](http://jsfiddle.net/bReQ7/2/)

我在时事通讯中这样做过很多次，但在向 Outlook 用户发送测试时，我没有收到任何关于邮件看起来不正确的报告。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-14T16:18:42.997

大声笑，愚蠢的开发人员。在大多数主要的电子邮件客户端中，只需创建一个复杂的表格，就可以轻松实现没有内容的垂直重复背景。

例如，在 John 的情况下，他可以轻松地在他的主要内容“td”旁边创建“td width="1" bgcolor="#XXXXXX" /td”组合，这将包含他的内容。我强烈建议在您的主要内容 td 中嵌套一个表格，以便您可以流畅地控制其中的填充和高度。

这种编码风格是在电子邮件领域实现垂直流动布局的最佳方式，我将继续为您提供帮助。缩进有点偏离，但这是一个糟糕的代码编辑情况，我的结束表没有出现。无论哪种方式，你都明白了。

```
<table cellspacing="0" cellpadding="0" border="0">
<tr>
    <td width="1" bgcolor="#e4e4e4"></td>
    <td width="1" bgcolor="#e1e1e1"></td>
    <td width="1" bgcolor="#dadada"></td>
    <td width="1" bgcolor="#cfcfcf"></td>
    <td width="1" bgcolor="#c6c6c6"></td>
    <td valign="top" align="center" width="200">
        <!-- Main Content Cell -->
        <table border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td valign="top" align="center" height="200">
                    <!-- I can be whatever height and still not break this cell's makeshift background -->
                </td>
            </tr>
        </table>
        <!-- End Main Content Cell -->
    </td>
    <td width="1" bgcolor="#c6c6c6"></td>
    <td width="1" bgcolor="#cfcfcf"></td>
    <td width="1" bgcolor="#dadada"></td>
    <td width="1" bgcolor="#e1e1e1"></td>
    <td width="1" bgcolor="#e4e4e4"></td>
</tr> 
```

另外，这是事后的想法，但我曾将这种语言用于 Outlook，称为 VML。它非常适合背景，但它不会做重复的东西。您可以在这里查看一个很好的介绍：http: [//blog.oxagile.com/2010/04/23/background-images-for-outlook-2007-and-outlook-2010-beta/](http://blog.oxagile.com/2010/04/23/background-images-for-outlook-2007-and-outlook-2010-beta/)

# c - 我的嵌套结构声明有问题吗？

> ID：13335046
> 
> 赞同：0
> 
> 时间：2012-11-11T20:20:45.330
> 
> 标签：c, nested, structure, nested-forms

因此，当在下面声明的结构中键入对下一个结构变量的调用时，它看起来很正常，但编译器不断向我抛出奇怪的错误。知道声明可能有什么问题吗？

```
 struct makeFileSets {
       char target[50];                     // array of targets
       char sources[80][50];                    // an array of sources
       char commands[80][50];                   // an array of command lines (non seperated)
       int sourcesTag;                          // current number of sources
       int commandsTag;                     // current number of command lines
       struct commandLineSets {
           int makeFileNum;             // represets an index for the makefile they corresond to
           int numVariables;                // the # of variables
           int numOptions;                  // the # of options
           int numCommands;             // the # of commands
           char variables[80][50];          // represents variables in each command line
           char options[20][20];            // represents option tags in each command line
           char commands[80][50];           // represents the commands from the command line
        } myCommands[50];
   }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:24:47.400

该结构没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:23:20.703

看来您的初始化 commands[] 两次。

# java - LogCat 垃圾邮件 GC_FOR_MALLOC 但只使用了 50% 的内存

> ID：13335047
> 
> 赞同：0
> 
> 时间：2012-11-11T20:20:52.683
> 
> 标签：java, android, garbage-collection, logcat, dalvik

对于我正在编写的一个简单的应用程序，logcat 会发送很多`GC_FOR_MALLOC`这样的消息：

```
D/dalvikvm(10236): GC_FOR_MALLOC freed 224K, 51% free 3290K/6599K, external 0K/0K, paused 21ms
D/dalvikvm(10236): GC_FOR_MALLOC freed 290K, 50% free 3323K/6599K, external 0K/0K, paused 33ms
D/dalvikvm(10236): GC_FOR_MALLOC freed 229K, 50% free 3325K/6599K, external 0K/0K, paused 24ms 
```

该应用程序并不多，仅使用 Apache HttpClient 4.X 通过 https 加载两个 HTML 文档。我已经定义了`android:largeHeap="true"`，但它没有帮助。

从我读到的消息中，我有 50% 的可用内存，但 GC 还是被迫运行。你知道为什么会发生这种情况，以及如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:13:33.787

Probably there is something wrong with your code. I'm going to give a generic answer, as no code is provided.

If you have 500 messages informing that about 250K was released in each one, means that your code has allocated/released a total of 125MB.

This shouldn't happen for general html pages, that usualy doesn't require this amount of memory.

You need to identify which objects are being repeatedly created/released by your application and try to reuse them instead of creating new ones.

In Eclipse you can use `DDMS` tab for that. Select your process, go for the `Allocation Tracker` and press `Start Tracking`, to get the objects that are being allocated.

Regards.

# java - 可以批准参数的类定义 - 带有对象和构造函数

> ID：13335052
> 
> 赞同：1
> 
> 时间：2012-11-11T20:22:00.020
> 
> 标签：java, class, object, constructor

我必须创建类定义，它可以批准在引入构造函数时对象已经存在的论点。

我不知道如何解释这一点，我尝试过这样的事情，但它可能是错误的：

```
public class B {

  int obj;

  public B() {  

  }

    public static void main(String[] args) {

    B object = new B();
    System.out.println(object)

    }
} 
```

我从第一次练习中编写的代码是：

```
public class Bulb {

static int a;

public Bulb(int ab) {
    a = ab;
}

public static void main(String[] args) {

    Bulb object = new Bulb(a);
    System.out.println(object);

} 
```

它只有一个参数构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:04:49.813

在我们的长评论线程之后，听起来我们已经确定您正在做的是学习继承和多态模拟。您指定的 B 类必须从 Bulb 继承，并且您必须证明 Bulb 的构造函数在 B 的构造函数之前被调用。我不确定是否有比使用日志输出更好的方法。您的代码几乎拥有您需要的一切，除了扩展和记录器消息。你可以这样做：

```
public class Bulb{
    int ab;
    public Bulb(int ab){
        this.ab = ab;
        System.out.println("Bulb constructor is invoked");
    }

    // The rest of your Bulb class
} 
```

在 B 类中，它扩展了 Bulb：

```
public class B extends Bulb{
    public B(int ab){
        // Call the super constructor, which in this case is the Bulb constructor
        super(ab);
        System.out.println("B constructor is invoked");
    }
    // The rest of your B class
} 
```

那有意义吗？

编辑：我忘了提：在Java中，当你有一个继承结构时，构造函数总是从上到下调用​​。意思是，首先调用层次结构中最顶层的类（在这种情况下，这将是 Bulb），然后滴到底部（例如，您的 B 类）。

# c++ - 通过 winsock 发送 Direct3D 顶点信息

> ID：13335053
> 
> 赞同：1
> 
> 时间：2012-11-11T20:22:02.417
> 
> 标签：c++, directx, winsock2

我目前正在做一个项目，我需要创建一个服务器/客户端应用程序，该应用程序使用 C++、DirectX 和 Winsock 在两个单独的应用程序窗口中绘制图形。图像应在服务器应用程序窗口的 x 轴上平移，直到它开始从右侧的视图中消失。当它从视图中消失时，客户端应用程序应该渲染图像并在它自己的屏幕上转换它，给人一种图像从服务器窗口移动到客户端窗口的印象。

我在这里寻找的不是任何完整的代码，而是当图像在服务器应用程序窗口中完成其翻译周期时如何通知客户端应用程序开始在其屏幕上再次呈现图像的指标。我想我可以围绕在下面的代码中跟踪 g_Rectx 的位置做一些事情，并通过 winsock 发送的消息通知客户端应用程序，以便在服务器应用程序上的 x 坐标不在视野范围内时开始渲染和翻译，但是我不确定如何实现这一目标。

目前，我在服务器窗口中显示图像并使用标准矩阵转换技术在窗口中进行转换，这一切都很好。这是如何通知客户端应用程序何时开始在其一侧进行渲染，我不确定如何实现。

任何关于我如何去做这件事的想法都将不胜感激。

* * *

摘自当前翻译代码以防万一这有帮助...

```
 // translation matrix to move the image along x axis
    D3DXMATRIX TranslateMatrix;
    D3DXMatrixTranslation(&TranslateMatrix, g_RectX, g_RectY, g_RectZ);
    g_pd3dDevice -> SetTransform(D3DTS_WORLD, &TranslateMatrix);

    // Update the rectangle's x co-ordinate
    g_RectX += 0.1f; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:27:58.653

It looks to me like you simply want to propagate the transformation of your object (position, orientation, scale) and have two different views, one for the server, one for the client. These views can simply be different camera positions. When the object moves in the world on the server, it will move on the client as well. For a given distance between your object and the server's camera, you should be able to compute when it will start touching the edge of the view frustum... and from there you could deduce the required camera position on the client to have a "flow" from one screen to another.

# image - 从深色不透明背景开始的图像悬停效果

> ID：13335060
> 
> 赞同：0
> 
> 时间：2012-11-11T20:22:40.143
> 
> 标签：image, hover, effect, rollover

对不起，如果我的标题含糊不清，我试图给它一些我不知道的逻辑。

无论如何，这是一个我正在开发的网站（正在进行中） [http://art-williams.com/misc/index.html](http://art-williams.com/misc/index.html)

如您所见，在 4 网格区域中，缩放功能运行良好，而且它是暗色低不透明度然后淡入全彩。我喜欢。

但是当页面加载时，它们不会以暗低不透明度开始，您必须先将其翻转。为什么是这样？

这是悬停效果的代码。

```
$(document).ready(function() {
    $('.viewport').mouseenter(function(e) {
        $(this).children('a').children('img').animate({ height: '230', left: '-20', top: '-20', width: '490'}, 200);
        $(this).children('a').children('span').fadeOut(400);
    }).mouseleave(function(e) {
        $(this).children('a').children('img').animate({ height: '200', left: '0', top: '0', width: '450'}, 200);
        $(this).children('a').children('span').fadeIn(400);
    });
}); 
```

任何帮助是极大的赞赏！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:36:32.363

只需`$('.viewport').children('a').children('span').fadeIn(400);`在文件准备好后添加

```
$(document).ready(function() {
    $('.viewport').children('a').children('span').fadeIn(400);
    $('.viewport').mouseenter(function(e) {
        $(this).children('a').children('img').animate({ height: '230', left: '-20', top: '-20', width: '490'}, 200);
        $(this).children('a').children('span').fadeOut(400);
    }).mouseleave(function(e) {
        $(this).children('a').children('img').animate({ height: '200', left: '0', top: '0', width: '450'}, 200);
        $(this).children('a').children('span').fadeIn(400);
    });
}); 
```

# java - 无法弄清楚如何使用另一个类的 getSource

> ID：13335063
> 
> 赞同：1
> 
> 时间：2012-11-11T20:22:51.023
> 
> 标签：java, swing

我已经决定是时候学习如何在 Java 中制作 GUI了。一切都很顺利，直到我开始设置我的 ActionListener。

这是我的 actionListener 类：

```
import java.awt.event.*;

public class Calculator implements ActionListener
{
  public void actionPerformed(ActionEvent e)
  {
    if (e.getSource() == set)
    {
      setAllTheThings();
    }
  }
  private void setAllTheThings()
  {
    System.out.println("hello");
  }
} 
```

我似乎无法做的是让 actionListener 在另一个类中找到名为“set”的 JButton。我该怎么做呢？

另外，这里说的是按钮：

```
JButton set = new JButton("Set");
set.setLocation(255,0);
set.setSize(50,20);
set.addActionListener(new Calculator());
line1.add(set); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:25:34.473

您可以使用实现相同的代码`Actions`- 检查源不是查看事件起源的好方法。

请参阅：[http ://docs.oracle.com/javase/tutorial/uiswing/misc/action.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

# java - 这些需求的理想数据结构？

> ID：13335065
> 
> 赞同：0
> 
> 时间：2012-11-11T20:23:03.100
> 
> 标签：java, data-structures

我的游戏分为区域网格。每个区域都有一个对象列表。每个对象可以位于 1 个以上的区域（最多 tp 4）。

当一个对象移动时，我检查它所在的区域，如果它们发生变化，我将它们从它们所在的区域中删除并将它们添加到新的区域中。对象的顺序并不重要。我需要快速插入和移除。我永远不需要随机元素访问。

理想的数据结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:47:32.920

在每个实体中：

```
HashSet<Region> regions; 
```

在每个地区：

```
HashSet<Entity> entities; 
```

您的区域和实体应正确定义 hashCode 和 equals 以获得最佳性能。

当您的实体更改区域时，请先将其从旧区域中删除，然后再从实体中删除区域，然后在将新区域添加到实体后将其添加到新区域。

迭代任何一组都很简单。你没有保证的迭代顺序，但你说那没关系。假设正确定义了 hashCode和`HashSet`equals，插入/删除是恒定的时间。

```
for(Entity entity: entities) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:28:45.687

Simple array of 4 pointers to the Lists corresponding to each region seems fine to me.

# c++ - 如何推送现有/创建/实例化的类对象以在 Lua 脚本上使用？

> ID：13335066
> 
> 赞同：2
> 
> 时间：2012-11-11T20:23:06.073
> 
> 标签：c++, lua

大多数绑定库/包都非常清楚如何公开类 TYPE 以便可以在 Lua 脚本上创建它。

我真正遇到的困难是如何给 Lua 脚本一个已经创建/实例化/分配的类对象，以便您可以从 Lua 脚本调用其公开/绑定的方法（也在 c++ 端更新对象） ..

如果这仍然不清楚，我将举一个我现在拥有的真实例子。

我使用[Lunar](http://lua-users.org/wiki/CppBindingWithLunar)将我的 AIAgent 类方法公开给 Lua。**它的工作**，我可以在 Lua 脚本上**创建**AIAgents..但是谁在乎，我不是在 Lua 上编程，我使用 Lua 编写我的 AI 代理脚本，我的游戏引擎的一部分，由我的游戏引擎创建，更新/碰撞检测和响应/drawing 全部由 c++ 代码完成，脚本唯一要做的就是为代理提供决策代码（代理更新方法上调用的 lua 协程）。这个决定使脚本可以访问一些注册的（通过 Lunar）方法（GetHP、GetNAmmunition、GetPlayerPos 等。）

那么，我怎样才能给脚本我的对象？..类似的东西：

```
//-fake code- called on the AIAgent constructor, or something
lua_pushObject( luaState, this );
lua_setGlobal( "aiAgentFromC++", -1 ); // object exposed trough "aiAgentFromC++" global var 
```

请注意，这些方法已经公开，因为我可以在脚本上创建新对象，我只是不知道如何给脚本一个我在 c++ 端已经拥有的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:41:20.400

[LuaBridge](https://github.com/vinniefalco/LuaBridge)在我看来是最简单的方法。它也是轻量级且无依赖的。你在说：

> 我真正遇到的困难是如何给 Lua 脚本一个已经创建/实例化/分配的类对象

它正是这样做的

示例：C++

```
class A {
public:
    void print(int x) {
        std::cout<<x<<std::endl;
    }
};

RefCountedPtr<A> GiveMeA()
{
    static RefCountedPtr<A> a(new A);
    return a;
}

int main() 
{
    lua_State *L = lua_open();
    luaL_openlibs(L);
    int s = luaL_loadfile(L, "test.lua");

    luabridge::getGlobalNamespace(L)
        .beginClass<A>("A")
        .addConstructor<void (*)()>()
        .addFunction("print",&A::print)
        .endClass()
        .addFunction("GiveMeA",&GiveMeA);

    if ( s==0 ) {
        s = lua_pcall(L, 0, LUA_MULTRET, 0);
    }
    report_errors(L, s);
    lua_close(L);
} 
```

在 Lua 中：

```
local a=A()
a:print(42)
local b=GiveMeA() --created on the C++ side
b:print(42) 
```

# mysql - 如果在另一个表中不存在，则设置为 NULL

> ID：13335080
> 
> 赞同：1
> 
> 时间：2012-11-11T20:24:44.543
> 
> 标签：mysql, sql, select

由于我在另一个线程中问错并且得到了正确回答，因此我开始了一个新线程......

我有两张桌子

```
Records
id  |  type
------------
1   |  CD
2   |  CD

Titles
record_id  |  name     |  language
-------------------------------
1          |  Warning  |  'en'
1          |  Achtung  |  'de'
2          | Ambulance |  'en' 
```

（链接中的 SQL 小提琴：[http](http://www.sqlfiddle.com/#!2/403d4/1) ://www.sqlfiddle.com/#!2/403d4/1 ）

如果我要求使用我想要的语言“en”：

```
1  |  Warning
2  |  Ambulance 
```

如果我要'de'我想要

```
1  |  ACHTUNG
2  |  NULL 
```

如何编写 SQL 以获得此结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:27:39.213

[http://www.sqlfiddle.com/#!2/403d4/89](http://www.sqlfiddle.com/#!2/403d4/89)

```
SELECT rec.id, title.name
FROM Records rec
LEFT JOIN Titles title ON title.record_id = rec.id and title.language='de';

SELECT rec.id, title.name
FROM Records rec
LEFT JOIN Titles title ON title.record_id = rec.id and title.language='en';

ID  NAME
1   ACHTUNG
2   (null)

ID  NAME
1   Warning
2   Ambulance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:26:46.490

如果不存在对应的记录，Left Outer Join 在第二个表中提供空值。

显然将 'en' 更改为 'de' 以查看其他结果：

```
Select
  r.id,
  t.name
From
  Records r
    Left Outer Join
  Titles t
    On r.id = t.record_id
Where
  r.language = 'en' 
```

# c++ - ISO C++ 禁止声明没有类型的“multimap”

> ID：13335083
> 
> 赞同：2
> 
> 时间：2012-11-11T20:24:54.353
> 
> 标签：c++, multimap

我声明多图的方式似乎存在问题：

```
std::multimap<int, std::string> table; 
```

我不断收到以下错误消息，并且非常坚持如何解决这个问题！

```
error: ISO C++ forbids declaration of ‘multimap’ with no type
error: invalid use of ‘::’
error: expected ‘;’ before ‘&lt;’ token 
```

这是我第一次在 C++ 中尝试多映射，如果这似乎是一个微不足道的问题，我很抱歉。有人可以指出我正确的方向吗？

在我的 central.h 我有以下代码

```
class Central{
  private:
  int address;
  std::multimap<int, std::string> table;

public:
  Central(int _address); 
```

在 central.cpp 中：

```
#include <iostream>
#include <string>
#include <sstream>
#include <map>

using namespace std;

#include "central.h"

Central::Central(int _address)
{
    address = _address;         
} 
```

感谢您的时间！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T20:26:06.927

你还没有`#include`d `<map>`。这就是编译器认为 multimap 是变量而不是类型的原因。

# shell - Unix中两个文件中的多对多关系

> ID：13335087
> 
> 赞同：-1
> 
> 时间：2012-11-11T20:25:20.263
> 
> 标签：shell, unix, join, scripting, ksh

> **可能重复：**
> [Unix 连接两个文件的多个字段](https://stackoverflow.com/questions/13277350/unix-join-on-multiple-fields-on-two-files)

我需要从加入字段 1 和 2 的两个文件中获取值，但这些字段不是唯一的。我需要获取所有值。例如

$cat **test1.txt**

```
1|2|aaa|bb
1|2|bbb|cc
1|3|ccc|dd
1|3|ddd|ee 
```

$cat **test2.txt**

```
1|2|ccc|dd
1|2|eee|ff
1|2|fff|dd
1|3|ggg|hh 
```

**期望的输出：**

```
1|2|aaa|bb|ccc|dd
1|2|aaa|bb|eee|ff
1|2|aaa|bb|fff|dd
1|2|bbb|cc|ccc|dd
1|2|bbb|cc|eee|ff
1|2|bbb|cc|fff|dd
1|3|ccc|dd|ggg|hh
1|3|ddd|ee|ggg|hh 
```

正常`join`不工作。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:48:10.180

该`join`命令仅连接一个字段，因此您需要调整数据以便您有一个单独的字段可以连接。

```
sed 's/|/=/' test1.txt > test3.txt
sed 's/|/=/' test2.txt > test4.txt
join -t'|' test3.txt test4.txt | sed 's/=/|/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:40:01.033

一个 awk 单线适用于您的示例：

```
 awk -F'|' 'NR==FNR{a[$0]=FS$3FS$4;next;}{for(x in a)if(x~"^"$1"\\|"$2)print $0a[x]}' test2.txt test1.txt 
```

测试：

```
kent$  head test*.txt
==> test1.txt <==
1|2|aaa|bb
1|2|bbb|cc
1|3|ccc|dd
1|3|ddd|ee

==> test2.txt <==
1|2|ccc|dd
1|2|eee|ff
1|2|fff|dd
1|3|ggg|hh

kent$  awk -F'|' 'NR==FNR{a[$0]=FS$3FS$4;next;}{for(x in a){ if(x~"^"$1"\\|"$2) print $0a[x]} }' test2.txt test1.txt 
1|2|aaa|bb|eee|ff
1|2|aaa|bb|fff|dd
1|2|aaa|bb|ccc|dd
1|2|bbb|cc|eee|ff
1|2|bbb|cc|fff|dd
1|2|bbb|cc|ccc|dd
1|3|ccc|dd|ggg|hh
1|3|ddd|ee|ggg|hh 
```

# c# - 如何在asp .net mvc2应用程序中记录异常

> ID：13335091
> 
> 赞同：0
> 
> 时间：2012-11-11T20:25:45.707
> 
> 标签：c#, asp.net-mvc, exception, asp.net-mvc-2, exception-handling

有时在我的 ASP .NET MVC 2 应用程序中会出现异常。ASP .NET 向用户显示标准错误页面。程序员没有任何信息表明发生此类异常。

如何将这些异常记录到 PostgreSql 数据库中的应用程序日志表中。PostgreSql 数据库中有表日志文件，应用程序在其中写入日志信息。如何捕获这些异常并写入日志文件。可以向用户显示 asp .net 标准错误页面，但也需要记录异常。只有在异常记录期间发生异常时，才不应记录异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:27:43.610

我建议使用[ELMAH](http://code.google.com/p/elmah/)来记录未捕获的异常。

它有 nuget 包——当然适用于 SQL Server，尽管如果还没有包的话，用它作为登录到 postgres 的基础应该不难。

更新：找到[了这个](http://nuget.org/packages/elmah.postgresql)（PostgreSQL 上的 ELMAH）。

# c# - 如何在只有模数和私有指数 (D) 参数的 c# 中解密数据？

> ID：13335098
> 
> 赞同：2
> 
> 时间：2012-11-11T20:27:03.040
> 
> 标签：c#, encryption, cryptography

我需要解密使用 RSA 加密的消息，但我只有模数和私有指数作为 Base64 字符串。

我的方法是创建一个 RSAParameter 对象并使用 RSACryptoProvider.ImportParameters 方法导入它：

```
RSAParameters decryptParameters = new RSAParameters();

// D is the private exponent parameter
decryptParameters.D = Convert.FromBase64String(d);

// n is the Modulus
decryptParameters.Modulus = Convert.FromBase64String(n);

RSACryptoServiceProvider decrypter = new RSACryptoServiceProvider();
try
{
     decrypter.ImportParameters(decryptParameters);
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

问题是我总是得到一个“坏数据”CryptographycException。

我究竟做错了什么？

我是否需要初始化 RSAParameters 结构中的其他值？哪个？从理论上讲，用于解密消息的私钥应该是 (n, d)，即 Modulus 参数，但实现似乎需要更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:34:54.187

理论上你应该只需要模数和私有指数来解密。但是 API 明智，因为他们使用[基于中国剩余定理的优化](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)，您也**需要**原始素数，并且使用这些素数还需要预先计算 dP、dQ 和 Qinv。

# python - Find if a class object is in an array/list

> ID：13335106
> 
> 赞同：2
> 
> 时间：2012-11-11T20:27:45.017
> 
> 标签：python, python-2.7

If I have an array of

```
g = ['hi'] 
```

Then

```
'hi' in g 
```

returns `True`.

What if I put an instantiated class into an array.

```
g.append(MyClass()) 
```

How do I find if the array contains an object of this class.

```
MyClass in g 
```

returns `False`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:29:53.950

使用`isinstance()`和`any()`：

```
In [95]: class A:pass

In [96]: lis=[A()]

In [97]: any(isinstance(x,A) for x in lis)
Out[97]: True

In [98]: lis=[1,2,3]

In [99]: any(isinstance(x,A) for x in lis)
Out[99]: False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:29:14.730

Try this:

```
MyClass in [type(x) for x in g] 
```

This will only find objects whose *exact type* is `MyClass`; it will not find objects of a class derived from `MyClass`. To do that, try one of the other answers that makes use of `isinstance()`.

Example:

```
>>> class Foo(object): pass
...
>>> g = [1, 2, Foo(), 4]
>>> g
[1, 2, <__main__.Foo object at 0x7f59552ef750>, 4]
>>> Foo in [type(x) for x in g]
True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T20:29:28.977

```
any(isinstance(x, MyClass) for x in g) 
```

# java - decode JSON with cyrillic characters

> ID：13335107
> 
> 赞同：0
> 
> 时间：2012-11-11T20:27:50.513
> 
> 标签：java, json

I have this JSON string:

```
[{
    "dpeartment":"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0442\u0434\u0435\u043b",
    "position":"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u044f"
 },{
    "dpeartment":"\u041c\u0422\u0426 \u0438 \u0441\u043a\u043b\u0430\u0434\u043e\u0432\u043e \u0441\u0442\u043e\u043f\u0430\u043d\u0441\u0442\u0432\u043e",
    "position":"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u044f"
}] 
```

It contains cyrillic characters that I want to convert to normal, readable UTF-8 encoded strings. How to decode the JSON and convert the cyrillic text to a readable UTF-8 string? Does java have any built-in classes for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:33:31.467

[在http://json.org/](http://json.org/)的底部是一个用于解析和格式化 JSON 的 Java 库列表。 [`org.json`](http://www.json.org/java/index.html)或[json-simple](http://code.google.com/p/json-simple/wiki/DecodingExamples)例如。

> 如何解码 JSON 并将西里尔文文本转换为可读的 UTF-8 字符串？

它们中的任何一个都应将 JSON 数据包中的引用字符串公开为`java.lang.String`s，将字符串内容公开为一系列 UTF-16 代码单元。如果您想要一个`byte[]`带有 UTF-8 八位字节的字符串，请参阅[How to convert Strings to and from UTF8 byte arrays in Java](https://stackoverflow.com/questions/88838/how-to-convert-strings-to-and-from-utf8-byte-arrays-in-java)。

# php - Which is preferred practice for method parameters?

> ID：13335109
> 
> 赞同：2
> 
> 时间：2012-11-11T20:27:58.293
> 
> 标签：php, function, methods

I have dilemma on the format of method parameters for a function in PHP (could be any language). The following are the two candidates

**Candidate 1:**

```
 function foo($param1,$param2,$param3,....$paramN) 
```

and

**Candidate 2:**

```
 function foo ($arr) {
   $param1 = $arr['param1'];
   $param2 = $arr['param2'];
   $param3 = $arr['param1'];
   ...
   ...
   ...
   $paramN = $arr['paramN'];
} 
```

I am leaning towards candidate 2 at the moment because I have couple of methods which have many parameters. But, I am also concerned that if I go on the path of Candidate 2, then my code has the risk to become unreadable and not easily maintainable. While Candidate 2 is also very enticing because now the order of the params becomes irrelevant (hence the method signature) but I am afraid debugging would become a pain in the butt.

So which is the recommended way? Which candidate to choose and why?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:31:59.953

很多参数都不好处理，我个人会选择候选 2，因为它更具可扩展性。您可以使用验证逻辑来​​弥补“混乱”，以确保正确设置所有必需的参数。

- 在我看来 - 最好的方法是重构您的代码并将方法拆分为几个可能是可链接的部分，从而降低复杂性。

也可能是一个不错的选择是使用[值对象](http://en.wikipedia.org/wiki/Value_object)（或有时也使用数据传输对象），以一种“容器”的形式传递所有参数。通过这种方式，可以确保只能传递有效数据，因为值对象本身关心其内容。

# mysql - MySQL creating index on UNIQUE NOT NULL columns

> ID：13335112
> 
> 赞同：0
> 
> 时间：2012-11-11T20:28:14.280
> 
> 标签：mysql, indexing, database

I read somewhere that one should not create many indexes on the columns of a table for it reduces the performance of operations.

But when I create a table with UNIQUE NOT NULL fields, the MySQL is creating indexes on all the fields by itself. Doesn't that reduce the performance?? If yes, what flags I need to change the default behaviour? If not, then where I am wrong?

My Table:

```
CREATE TABLE Users(
Id_usr INT UNSIGNED NOT NULL AUTO_INCREMENT,
PRIMARY KEY(Id_usr),
Email_id varchar(45) UNIQUE NOT NULL,
username varchar(30) UNIQUE NOT NULL,
userpass varchar(30) NOT NULL
); 
```

When I see the table on phpmyadmin:

```
Indexes: Documentation
Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
Edit Edit   Drop Drop   PRIMARY BTREE   Yes No  Id_usr  0   A       
Edit Edit   Drop Drop   Email_id    BTREE   Yes No  Email_id    0   A       
Edit Edit   Drop Drop   username    BTREE   Yes No  username    0   A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:33:47.090

性能下降是由于在写入时需要更新索引。另一方面，创建索引是为了加快选择速度。

`MySQL`如果不创建索引*或*在每次插入或更新时扫描整个表，就无法强制执行唯一性，这将对性能产生更严重的影响。幸运的是，你无法改变这种行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:33:48.627

> 但是，当我创建一个具有 UNIQUE NOT NULL 字段的表时，MySQL 会自行在所有字段上创建索引。

不，Mysql 仅在您告诉它的那些字段上创建索引。**当您`UNIQUE`在末尾创建一列时，这意味着您正在告诉 mysql`UNIQUE`在该列上添加索引**。

因此，对于两个 UNIQUE 列，有两个索引。对于主键，有一个索引。共3个指标。`userpass`列没有索引。因为你没有告诉它。

如果您需要索引并且您知道为什么需要`UNIQUE`索引，那么只需添加它。不要考虑现在的表现。部署后，如果您遇到任何性能问题，请考虑优化。

# c++ - How to get Pixel data \ Pixel buffer from a window and extract RGB?

> ID：13335113
> 
> 赞同：2
> 
> 时间：2012-11-11T20:28:15.630
> 
> 标签：c++, rgb, pixel

I'm drawing text (textOut) and Rectangles on my window... and I would like to get the RGB buffer from it... How can I do it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:39:45.500

有2个选项：

首先，您可以使用 GetPixel()。我用了很多。它工作正常：

```
COLORREF GetPixel(
  HDC hdc, 
  int nXPos, 
  int nYPos
); 
```

在我们的时代，使用此功能的处理器甚至可以在某些情况下使用矩形。

其次，您可以将屏幕内容复制到位图中。之后，您可以将其放在剪贴板中，使用您的代码进行处理等。核心功能是：

```
BOOL BitBlt(
  _In_  HDC hdcDest,
  _In_  int nXDest,
  _In_  int nYDest,
  _In_  int nWidth,
  _In_  int nHeight,
  _In_  HDC hdcSrc,
  _In_  int nXSrc,
  _In_  int nYSrc,
  _In_  DWORD dwRop
); 
```

如果需要，我可以发布更详细的代码段。

```
// Pick up the DC.
HDC hDC = ::GetDC(m_control);

// Pick up the second DC.
HDC hDCMem = ::CreateCompatibleDC(hDC);

// Create the in memory bitmap.
HBITMAP hBitmap = ::CreateCompatibleBitmap(hDC, bmp_size_x, bmp_size_y);

// Put bitmat into the memory DC. This will make it functional.
HBITMAP hBmpOld = (HBITMAP)::SelectObject(hDCMem, hBitmap);

// Clear the background.
HBRUSH hBkgr = ::CreateSolidBrush(props.bkgr_brush);
RECT bitmap_rect = { 0, 0, bmp_size_x, bmp_size_y };
::FillRect(hDCMem, &bitmap_rect, hBkgr);
::DeleteObject(hBkgr);

// Do the job.
::BitBlt(hDCMem, margins_rect.left, margins_rect.top,
    size_to_copy_x, size_to_copy_y, hDC,
    screen_from_x, screen_from_y, SRCCOPY); 
```

# java - Remove a subarray from an array of ints in a fastest way?

> ID：13335114
> 
> 赞同：0
> 
> 时间：2012-11-11T20:28:16.250
> 
> 标签：java, arrays

In Java, we have an array `int[] a = new int[10000000];` fully filled in with arbitrary numbers. Quite often in code we need to remove an arbitrary subsequence: that is a set of elements that may be non-contiguous.

The reason to use `int[]` over `LinkedList` is a speed gain while passing through elements. Currently there is no removal of elements, so lots of rubbish is stored for the time of running application. Removing elements may give a speed-up, so quite an interesting question.

How to remove a subseqence from an array in a fastest possible way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:38:22.070

这取决于您是否要缩短数组，或者是否可以在数组末尾允许未使用的元素。用于此的工具是[`System.arraycopy`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29). 要缩短数组，您需要分配一个新数组：

```
public int[] remove(int[] original, removeStart, removeEnd) {
    int originalLen = original.length;
    int[] a = new int[originalLen - removeEnd - removeStart];
    System.arraycopy(original, 0, // from original[0]
        a, 0,                     // to a[0]
        removeStart);             // this many elements
    System.arraycopy(original, removeEnd, // from original[removeEnd]
        a, removeStart,                   // to a[removeStart]
        originalLen - removeEnd);         // this many elements
    return a;
} 
```

要压缩一个数组：

```
System.arraycopy(array, removeEnd, // from array[removeEnd]
    array, removeStart,            // to array[removeStart]
    array.length - removeEnd);     // this number of elements 
```

您不必担心范围重叠；`arraycopy`正确处理这些。

如果要删除的元素范围不连续，您可以概括其中一种解决方案（移动的东西更少，但代码更复杂），或者您可以单独删除每个连续块（更易于编程，但您将移动数据你将被丢弃）。

如果您要删除分散的索引，我会手动完成。设计取决于它是分散的单个索引还是范围的集合。使用后者（这是未经测试的，但它应该给你的想法）：

```
/**
 * Simple class to hold the start and end of a range.
 */
public static class Range implements Comparable<Range> {
    int start;
    int end;
    public int compareTo(Range other) {
        if (start < other.start) return -1;
        if (start > other.start) return 1;
        if (end < other.end) return -1;
        if (end > other.end) return 1;
        return 0;
    }
}
/**
 * Remove a list of ranges from an array.
 * @param original the array from which to remove the values.
 * @param toRemove the list of ranges to remove. This must be
 *    sorted in ascending order of range start before calling this method.
 * @param compact flag indicating whether to simply compact the original
 *    array or to copy the values into a new array. If false, will allocate
 *    a new array of the exact size needed to contain the elements not removed.
 */
public int[] remove(int[] original, List<Range> toRemove, boolean compact) {
    int[] a;
    if (compact) {
        a = original;
    } else {
        int len = 0;
        for (Range range : toRemove) len += range.end - range.start;
        a = new int[original.length - len];
    }
    int nextSource = 0;
    int nextDest = 0;
    for (Range range : toRemove) {
        if (nextSource < range.start) {
            System.arraycopy(original, nextSource, a, nextDest,
                range.start - nextSource);
            nextDest += range.start - nextSource;
            nextSource = range.start;
        }
        nextSource = range.end;
    }
    if (nextSource < original.length) {
        System.arraycopy(original, nextSource, a, nextDest,
            original.length - nextSource);
    }
    return a;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:32:17.113

使用 [ **System#arraycopy** ](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy(java.lang.Object, int, java.lang.Object , int, int)) 如下：

```
 System.arraycopy(orginalArray, startIndex, newArray, 
                     newArrayStartIndex, numOfElementsToCopy);
      orginalArray = newArray; 
```

**请注意：**这适用于连续位置。如果有更多的连续部分，这仍然很有帮助，并且可以以类似的方式多次调用。**但是如果要删除的位置是完全随机的，那么我相信你需要遍历数组。**

# java - When generating java sources with maven-jaxb2-plugin, how to enable setters for collections?

> ID：13335116
> 
> 赞同：9
> 
> 时间：2012-11-11T20:28:18.480
> 
> 标签：java, xjc, maven-jaxb2-plugin

I am generating POJOs from XSD schemas using the maven-jab2-plugin. My generated classes don't have setters for any fields that are collections. How do I generate setters for collections?

Can anyone explain the reasoning for setters to not be enabled by default?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T20:28:18.480

Use the [Setters plugin](http://confluence.highsource.org/display/J2B/Setters+Plugin) included in JAXB2-Basics, as documented [here](http://confluence.highsource.org/display/J2B/JAXB2+Basics+Plugins).

I've copy-pasted their usage example (and modified it to show setters specifically):

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.7.0</version>
    <executions>
        <execution>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <args>
            <arg>-Xsetters</arg>
        </args>
        <plugins>
            <plugin>
                <groupId>org.jvnet.jaxb2_commons</groupId>
                <artifactId>jaxb2-basics</artifactId>
                <version><!-- Current version --></version>
            </plugin>
        </plugins>
    </configuration>
</plugin> 
```

And include the JAXB2 Basics Runtime package in your dependencies:

```
<dependency>
    <groupId>org.jvnet.jaxb2_commons</groupId>
    <artifactId>jaxb2-basics-runtime</artifactId>
    <version><!-- Current version --></version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-07T16:17:23.097

为了为集合生成 setter，我发现只有一个适合我的解决方案。您必须将依赖项添加到**org.andromda.thirdparty.jaxb2_commons**。但是，此解决方案适用于**jaxb2-maven-plugin**版本**2.5.0**，因为版本**2.3.1**不起作用。这是一个例子：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>2.5.0</version>
    <dependencies>
      <dependency>
         <groupId>org.andromda.thirdparty.jaxb2_commons</groupId>
         <artifactId>collection-setter-injector</artifactId>
         <version>1.0</version>
      </dependency>
   </dependencies>
   <executions>
      <execution>
             ......
       </execution>
    </executions>
    <configuration>
       <sources>
             ......
       </sources>
       <arguments>-Xcollection-setter-injector</arguments>
       <clearOutputDir>false</clearOutputDir>
       <extension>true</extension>
    </configuration>
</plugin> 
```

# java - Java - 如何在您键入时有效地显示单词列表中的单词

> ID：13335125
> 
> 赞同：0
> 
> 时间：2012-11-11T20:29:19.113
> 
> 标签：java, iterator, treeset, startswith

我制作了一个小型 Java 程序，它从用户选择的 txt 文件中加载单词列表并将其逐字存储在 TreeSet 中。现在我需要编写一个函数，每当用户在文本字段（keyPressed）中输入内容时，都会调用一个函数，它会查找/返回此 TreeSet 中以用户输入的字母开头的所有单词。我是新手集合所以我的解决方案是从集合中的第一个元素迭代到最后一个元素并打印出满足条件的元素：

```
Iterator <String>itr = dictionary.iterator();
String currentWord;
String tempUserInput = "av"; // Temporary, to simulate user input
while(itr.hasNext()){
   currentWord = itr.next();
   if (currentWord.startsWith(tempUserInput)) {
      System.out.println(currentWord); // Temporary, to simulate output
   }
} 
```

这可以正常工作，但是，由于它需要传递超过 300000 个字的返回值，我的问题是：有没有更有效的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:31:50.453

最好的解决办法是使用适合您问题的数据结构的[**trie 。**](http://en.wikipedia.org/wiki/Trie)它旨在用于在处理共享前缀的元素（通常是字符串）时降低复杂性。

实际上，通过一些工作，我想您可以通过欺骗来使用 TreeSet

```
public NavigableSet<E> subSet(E fromElement, boolean fromInclusive, E toElement, boolean toInclusive) 
```

这可以通过将当前键入的字符串作为 fromElement 传递，并将添加了足够`'z'`字符的相同字符串作为集合中最长的字符串作为 toElement 传递（可以在填充 时计算此长度`TreeSet`）。例如：

```
subSet("foo", true, "foozzzzzzzz", true); 
```

# c - Validating an array variable input from another function

> ID：13335130
> 
> 赞同：1
> 
> 时间：2012-11-11T20:29:46.353
> 
> 标签：c

Hello for my program I must validate input for multiple arrays in another function. So say I have an array: barcode[MAX]. I want the user to input their barcodes into this array, so like however many barcodes they have they would input it into the barcode[MAX] variable. I would need to validate this input to make sure that it is proper format, so basically greater than 0, no trailing characters. And this validation needs to come from a separate function.

So it would be something like:

```
for (i = 0; i < MAX; i++)
{
    printf ("Barcode: ");
    barcode[MAX] = validate();

    printf ("Price: ");
    price[MAX] = validate();
} 
```

that would be in the main function, calling the user to input their barcodes / prices and validating the input in a separate function. But I am not sure how to write a validating function for an array input. I have written one before for just a simple variable but an array confuses me. My previous validating code was like:

```
do
{
    rc = scanf ("%llf%c", &barcode[MAX], &after);

    if (rc == 0)
    {
        printf ("Invalid input try again: ");
        clear();
    }
        else if (after != '\n')
        {
            printf ("Trailing characters detected try again: ");
            clear();
        }
            else if ()
            {

            }
                else
                {
                    keeptrying = 0;
                }

} while (keeptrying == 1); 
```

but this doesn't look like it would work for an array variable and that was the code I would use for a non array variable. How can I fix this? Also the two arrays are different data types. barcode is a long long variable and price is a double variable.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:39:39.283

您想要遍历数组，barcode[i] 也是如此，而不是固定位置 MAX (barcode[MAX])。

```
for (i = 0; i < MAX; i++)
{
    printf ("Barcode: ");
    barcode[i] = validate();

    printf ("Price: ");
    price[i] = validate();
} 
```

将 long long float 替换为 float，[不能](http://en.wikipedia.org/wiki/C_data_types)在 c 中使用 long long float。

验证可以是这样的：

```
int validate()
{
    char after;
    float input;
    int rc, keeptrying = 1;
    do
    {
        printf("Give me a code bar :\n");
        rc = scanf ("%f%c", &input, &after);

        if (rc == 0)
        {
            printf ("Invalid input try again: \n");
            while ( getchar() != '\n' );
        }
        else if (after != '\n')
        {
           printf ("Trailing characters detected try again: \n");
           while ( getchar() != '\n' );
        }
       else
        keeptrying = 0;

    } while (keeptrying == 1);
    return input;
} 
```

# c# - 如何更改 DevExpress GridView 中一行的背景色？

> ID：13335135
> 
> 赞同：3
> 
> 时间：2012-11-11T20:30:13.810
> 
> 标签：c#, winforms, devexpress

我的表单中有一个 DevExpress GridView，由于布尔值，我需要更改一些行的颜色。

允许我更改行的背景颜色的属性是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T20:39:39.777

`RowStyle`您可以在事件处理程序中更改行的颜色渐变：

```
private void myGridView_RowStyle(object sender,
                       DevExpress.XtraGrid.Views.Grid.RowStyleEventArgs e) 
{
    e.Appearance.BackColor = Color.Green;
    e.Appearance.BackColor2 = Color.LightGreen;
} 
```

请参阅：[自定义单个行和单元格的外观](http://documentation.devexpress.com/#WindowsForms/CustomDocument758)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:38:33.130

您必须处理 GridView 的 RowStyle 或 RowCellStyle 事件。更多详细信息请参见[http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_RowCellStyletopic](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_RowCellStyletopic)和[http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_RowStyletopic](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_RowStyletopic)。

# javascript - 安装 chrome 扩展程序后立即导航到网站

> ID：13335136
> 
> 赞同：0
> 
> 时间：2012-11-11T20:30:16.620
> 
> 标签：javascript, google-chrome, google-chrome-extension

我在互联网上找不到任何信息。安装插件后，我想立即使用我的 url 打开一个新选项卡。如果用户点击我的插件图标，导航到网站很简单：

```
chrome.browserAction.onClicked.addListener(function(tab) 
{
  chrome.tabs.create({'url': 'http://google.com'}, function(tab) { });
}); 
```

但是我如何在安装插件后自动执行此操作，并且**只执行一次**。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:37:55.007

解决方案是使用事件，仅当是`chrome.runtime.onInstalled`时才打开选项卡。`reason``update`

[http://developer.chrome.com/extensions/runtime.html#event-onInstalled](http://developer.chrome.com/extensions/runtime.html#event-onInstalled)

# gfortran - 使用 gfortran 而不是 ifort 编译

> ID：13335141
> 
> 赞同：2
> 
> 时间：2012-11-11T20:30:55.227
> 
> 标签：gfortran, intel-fortran

我有一个针对 ifort 进行了优化的程序，但是我想使用 gfortran 来编译它。以下是提供的标志：

```
FCFLAGS=  -Vaxlib -CB -mcmodel=large -O -openmp -DOMP 
```

我查看了两者的手册条目以尝试找到相应的选项，但我找不到任何东西（除了 -openmp for -fopenmp，我已经知道了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:34:48.153

这是一个选项等价表的选项：

```
ifort          gfortran         Commentary
-----------------------------------------------------------------------
-Vaxlib                         Enables old VAX library compatibility
                                (should not be necessary with gfortran
                                 and newer ifort versions)
-CB            -fbounds-check   Enables array bounds check at run-time
-mcmode=large  -mcmodel=large   Enables large memory model
-O             -O2              Enables optimisaiton
-openmp        -fopenmp         Enables OpenMP support
-DOMP          -DOMP            Preprocessor option (defines the OMP symbol) 
```

请注意，启用边界检查和大内存模型会减慢代码执行速度。另请注意，单独使用(equivalent to ) 和 with (equivalent to )`-O`可以实现不同级别的优化。另请注意，优化比. 您可能需要提供更多选项来微调后者，以达到与.`ifort``-O2``gfortran``-O1``ifort``gfortran``ifort`

# c# - 将对模型所做的更改提交到数据库

> ID：13335147
> 
> 赞同：0
> 
> 时间：2012-11-11T20:31:34.460
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我已经建立了一个模型，我制作了一个控制器（并通过代理一些视图，用于查看、创建、删除和编辑表中的记录，每当我第一次通过 Web 浏览器中的控制器浏览到视图时创建的表中） Visual Studio 中的向导。

这按预期工作，但后来我对模型进行了更改，并尝试了以下步骤将更改提交到数据库：

1.  我删除了控制器
2.  我删除了包含用于创建/删除/等记录的各种 cshtml 页面的 View 文件夹
3.  我使用 Visual Studio 中的服务器资源管理器窗格从数据库中删除表
4.  我根据模型重新创建了控制器（并通过代理各种视图）
5.  我**拯救了所有**
6.  我重建了我的解决方案

完成上述操作后，我点击调试，并浏览到我的控制器，期望实体框架重新创建我的表。相反，我收到了这个错误：

> 无效的对象名称“dbo.FooBar”。// *FooBar 是我的模型的名称，因此是我的表*

几个问题：

1.  在控制器/视图/表全部创建之后，提交对模型所做的更改的正确方法是什么，并且可能已经对它们进行了更改。
2.  我能做些什么来解决我目前的情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:55:53.097

您要使用的两个软件包是：

**自动迁移 (EFMigrations)**

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)

此功能扩展了您的项目，不仅可以首先使用代码，还可以将对模型所做的更改迁移到数据库。自从它退出测试版的那一刻起，我就在生产中使用它。

**MVC 脚手架**

[http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)

您可以下载现有的脚手架模板以根据您的模型创建视图。如果您的模型发生变化，这些视图会自动更新。从来没有时间构建我自己的模板，但这里有一篇来自 Scott Hanselman 的博客文章，他展示了如何做到这一点：[http ://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)

在 Channel9 上查看 Steve Sanderson（脚手架）和 Scott Hanselman（EF Migrations）的谈话。

# android - Android 对话框异常：java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

> ID：13335149
> 
> 赞同：0
> 
> 时间：2012-11-11T20:31:47.723
> 
> 标签：android

我有这个例外：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
        at android.os.AsyncTask$3.done(AsyncTask.java:278)
        at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
        at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
        at android.os.Handler.<init>(Handler.java:121)
        at android.widget.Toast$TN.<init>(Toast.java:347)
        at android.widget.Toast.<init>(Toast.java:93)
        at android.widget.Toast.makeText(Toast.java:235)
        at com.problemio.TopicActivity$DownloadWebPageTask.doInBackground(TopicActivity.java:440)
        at com.problemio.TopicActivity$DownloadWebPageTask.doInBackground(TopicActivity.java:1)
        at android.os.AsyncTask$2.call(AsyncTask.java:264)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        ... 5 more
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
        at android.os.Handler.<init>(Handler.java:121)
        at android.widget.Toast$TN.<init>(Toast.java:347)
        at android.widget.Toast.<init>(Toast.java:93)
        at android.widget.Toast.makeText(Toast.java:235)
        at com.problemio.TopicActivity$DownloadWebPageTask.doInBackground(TopicActivity.java:440)
        at com.problemio.TopicActivity$DownloadWebPageTask.doInBackground(TopicActivity.java:1)
        at android.os.AsyncTask$2.call(AsyncTask.java:264)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        at java.lang.Thread.run(Thread.java:856) 
```

使用此代码：

对话对话框；

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
 ....

dialog = new Dialog(this);
    Button submit = (Button)findViewById(R.id.submit_comment);   
    submit.setOnClickListener(new Button.OnClickListener() 
    {  
       public void onClick(View v) 
       {
          dialog.setContentView(R.layout.please_wait);
          dialog.setTitle("Submitting Your Comment");

          TextView text = (TextView) dialog.findViewById(R.id.please_wait_text);
          text.setText("Please wait while your comment is processed... ");
          dialog.show(); //this will show dialog 

          String c = comment.getText().toString(); 

          if ( c == null || c.length() == 0 )
          {
                try {
                    dialog.dismiss();
                } catch (Exception ee) {
                    // nothing
                }
          }
          else
          {             
              ...  
          }
       }
    });

    // Go to the database and display a list of problems
sendFeedback( problem_id , recent_topic_id );   
}       

public void sendFeedback(String problem_id , String recent_topic_id) 
{  

    String[] params = new String[] 
            { "url", problem_id , recent_topic_id };

    DownloadWebPageTask task = new DownloadWebPageTask();
    task.execute(params);        
}       

public class DownloadWebPageTask extends AsyncTask<String, Void, String> 
{
    @Override
    protected String doInBackground(String... theParams) 
    {
        String myUrl = theParams[0];
        final String problem_id = theParams[1];
        final String solution_section = theParams[2];

        String charset = "UTF-8";           
        String response = null;

        try 
        {                           
            String query = String.format("problem_id=%s&solution_section=%s", 
                     URLEncoder.encode( problem_id, charset),
                     URLEncoder.encode( solution_section, charset));

            final URL url = new URL( myUrl + "?" + query );

            final HttpURLConnection conn = (HttpURLConnection) url.openConnection();

            conn.setDoOutput(true); 
            conn.setRequestMethod("POST");

            conn.setDoOutput(true);
            conn.setUseCaches(false);

            conn.connect();

            final InputStream is = conn.getInputStream();
            final byte[] buffer = new byte[8196];
            int readCount;
            final StringBuilder builder = new StringBuilder();
            while ((readCount = is.read(buffer)) > -1) 
            {
                builder.append(new String(buffer, 0, readCount));
            }

            response = builder.toString();      
        } 
        catch (Exception e) 
        {
            // What should I do here?           
        }

        return response;
    }

    @Override
    protected void onPostExecute(String result) 
    {       
        if ( result == null )
        {
            try {
                dialog.dismiss();
            } catch (Exception ee) {
                // nothing
            }                               
        }
        else
        if ( result.equals("no_suggested_solution_id") || result.equals("no_topic_id" ) )
        {               
            try {
                dialog.dismiss();
            } catch (Exception ee) {
                // nothing
            }                               
        }
        else
        { 
            if ( result.length() == 0 )
            {
                discussion.clear();

                DiscussionMessage message = new DiscussionMessage ( );
                message.setMessage("This section is empty.");

                discussion.add( message );                  
            }
            else
            {
                try
                {   
                    JSONArray obj = new JSONArray(result);

                    if ( obj != null )
                    {
                        discussion.clear();

                        TextView topic_instructions = (TextView) findViewById(R.id.topic_instructions);

                    } 
                    adapter.notifyDataSetChanged();                     
                }                   
                catch ( Exception e )
                {
                    e.printStackTrace();
                }
            }

            adapter.notifyDataSetChanged();                     
        }
    } 
```

知道我在对话框中做错了什么以产生此异常吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:56:45.017

看起来你试图在你的`doInBackground()`catch-block 中显示一个 Toast，你不能这样做，因为你试图在不同的线程上创建一个 UI 元素。

只需使用标志来指示发生错误并将此 Toast 移动到`onPostExecute()`：

```
boolean error = false;
protected String doInBackground(String... theParams) 
{
    // same as before
    catch (Exception e) 
    {
        // Handle the error gracefully
        error = true;
    }
}

protected void onPostExecute(String result) 
{       
    if(error) {
        // Show your Toast here, you have access to the UI thread
    }
    // etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:48:24.953

我会在“onPreExecute()”中启动对话框

```
 protected void onPostExecute(Long result) {
     dialog = new Dialog(YourActivityName.this);
     //your initiation
     dialog.show()
 } 
```

在 doInBackground() 内部，如果抛出异常，我会返回 null 。

并尝试在 onPostExecute() 开头关闭对话框

```
@Override
protected void onPostExecute(String result) 
{       
  dialog.dismiss();
} 
```

如果这没有帮助，那么尝试将 asynctask 移动到一个单独的类，而不是活动的内部类，当我在不同的类中编写 asynctask 时，它通常对我很好。

我看到在您的代码中，您不是在 onClick 方法中调用“sendFeedback()”。

您在 asynctask 开始运行后开始的对话框上调用dismiss()，也许这可能是问题所在？

# php - 加密会话 ID

> ID：13335156
> 
> 赞同：2
> 
> 时间：2012-11-11T20:32:11.123
> 
> 标签：php, database, security, session, cookies

> **可能重复：**
> [防止会话劫持的最佳方法是什么？](https://stackoverflow.com/questions/22880/what-is-the-best-way-to-prevent-session-hijacking)
> [在 cookie 中加密会话 ID（或其他身份验证值）是否有用？](https://stackoverflow.com/questions/2840559/is-encrypting-session-id-or-other-authenticate-value-in-cookie-useful-at-all)

我的会话处理程序将会话 ID 存储在 cookie 中并返回 cookie 的值以用作对数据库的引用。

我的问题很简短。我应该在 cookie 中加密会话 ID 还是毫无意义？

谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T20:39:53.963

这是完全没有意义的。即使您加密了会话 ID，加密版本也会通过 cookie 发送到您的服务器。如果有人想劫持它，他会窃取该加密会话 ID 并将其发送到您的服务器。您的服务器将愉快地解密它。

# c# - 将控制台应用程序编译为 MSIL 代码

> ID：13335158
> 
> 赞同：0
> 
> 时间：2012-11-11T20:32:28.330
> 
> 标签：c#, .net, cil

我使用 Visual Studio 2012 并在那里编写简单的控制台应用程序。有谁知道如何从我的 C# 代码中获取 MSIL 代码？
我想在没有 ILDASM 的情况下编译后看到它，可以自动执行此过程

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T20:34:47.140

您的输出`exe`文件将包含 MSIL 代码。您可以使用[ildasm](http://msdn.microsoft.com/en-us/library/f7dy01k1%28v=vs.80%29.aspx)检查它。

我认为阅读msdn 上的[Compiling to MSIL](http://msdn.microsoft.com/en-us/library/c5tkafs1%28v=vs.71%29.aspx)对您很有用。

# java - Android sendBroadcast 内广播中断应用程序

> ID：13335165
> 
> 赞同：0
> 
> 时间：2012-11-11T20:33:23.653
> 
> 标签：java, android, crash, broadcastreceiver, broadcast

我有一个`BroadcastListener`检查传入的短信并处理它们以获得警报系统的潜在状态。

如果文本符合我的条件和前台应用程序的活动，我想在我的活动的 GUI 中显示状态。

为此，我尝试使用这样的意图：

```
public class SmsReader extends BroadcastReceiver implements Runnable
{
    private static final String LOG_TAG = "SMSReceiver";
    private String alarm = "15555215554";

    public static final String INCOMING_SMS_ACTION = "android.provider.Telephony.SMS_RECEIVED";
    public static final String ALARM_STATUS_ON_FULL = "moorehojer.alarmcontrol.intent.action.ALARM_STATUS_FULL_ON";
    public static final String ALARM_STATUS_ON_PART = "moorehojer.alarmcontrol.intent.action.ALARM_STATUS_PART_ON";
    public static final String ALARM_STATUS_OFF = "moorehojer.alarmcontrol.intent.action.ALARM_STATUS_OFF";

    @Override
    public void onReceive(Context _context, Intent intent) 
    {
        String intentActionToCall = "";

        if (intent.getAction().equals(INCOMING_SMS_ACTION)) 
        {
            //this stops notifications to others
            this.abortBroadcast();
            boolean releaseBroadcast = false;

            try
            {   
                Bundle myBundle = intent.getExtras();
                SmsMessage [] messages = null;

                if (myBundle != null)
                {
                    Object [] pdus = (Object[]) myBundle.get("pdus");
                    messages = new SmsMessage[pdus.length];

                    for (int i = 0; i < messages.length; i++)
                    {
                        messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

                            if(!Util.UnifyPhoneNumberPrefix(messages[i].getOriginatingAddress()).equals(Util.UnifyPhoneNumberPrefix(this.alarm)))
                        {
                            releaseBroadcast = true;
                        }
                        else
                        {
                            if(messages[i].getMessageBody().substring(0, 5).equals("FS-C "))
                            {
                                boolean frakoblet01 = messages[i].getMessageBody().contains("FRAKOBLET1");
                                boolean frakoblet02 = messages[i].getMessageBody().contains("FRAKOBLET2");
                                boolean tilkoblet01 = messages[i].getMessageBody().contains("TILKOBLET1");
                                boolean tilkoblet02 = messages[i].getMessageBody().contains("TILKOBLET2");
                                boolean deltilkoblet01 = messages[i].getMessageBody().contains("DELTILKOBLET1");
                                boolean deltilkoblet02 = messages[i].getMessageBody().contains("DELTILKOBLET2");

                                if(deltilkoblet01 || deltilkoblet02)
                                {
                                    intentActionToCall = SmsReader.ALARM_STATUS_ON_PART;
                                }
                                else if(tilkoblet01 && tilkoblet02)
                                {
                                    intentActionToCall = SmsReader.ALARM_STATUS_ON_FULL;
                                }
                                else if(frakoblet01 && frakoblet02)
                                {
                                    intentActionToCall = SmsReader.ALARM_STATUS_OFF;
                                }
                                else
                                {
                                    releaseBroadcast = true;    
                                }
                            }
                        }
                    }
                }
            }
            catch(Exception e)
            {
                this.makeToast(_context, "Ex 1: "+e.toString());
            }
            /**/

            try 
            {
                if(releaseBroadcast)
                {
                    this.clearAbortBroadcast();
                }
            } 
            catch (Exception e) 
            {
                this.makeToast(_context, e.toString());
            }
        } 

        if(!intentActionToCall.equals(""))
        {
                Intent myIntent = new Intent(intentActionToCall);

                this.makeToast(_context, "Intent created:\n"+intentActionToCall);

                    this.makeToast(_context, "Trying broadcast");
                    myIntent.putExtra("message", "Hallelujah");
                    try
                    {
                        _context.sendBroadcast(myIntent);
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
        }
    }

    private void makeToast(Context context, String message)
    {
        Toast.makeText(context, message, Toast.LENGTH_LONG).show();
    }

    public void run() {
        // TODO Auto-generated method stub

    }
} 
```

但是每次代码到达该行时：

```
_context.sendBroadcast(myIntent); 
```

操作系统出现一条消息，表明该进程已意外停止工作，并随着 try-catch 的介入而关闭。

我尝试删除该行并且代码运行到最后没有问题。

# ruby-on-rails - 如何在rails中存储可能的属性

> ID：13335170
> 
> 赞同：0
> 
> 时间：2012-11-11T20:33:38.843
> 
> 标签：ruby-on-rails, model-associations

我有 Question model ，它具有属性 "status" 、 "code" 、 "type" 。

所有三个属性都应该是一个下拉列表，比如状态可以是“活动/关闭/非活动”等等。

这些下拉列表的所有可能选项都应该来自数据库。存储它的最佳方法是什么。

我计划创建新模型说查找

```
[lookup_for][lookup_type][lookup_value] 
```

并使用 HABTM 将该模型链接到问题并创建一个联合表 lookup_questions。

这样我就可以通过查询查找表来获取所有状态以填充下拉列表

```
@questions_status = lookup.find_by_lookup_type('status') 
```

我的方向正确吗？，我没有经验，请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:04:13.153

您可以创建一个模型`Status`，`Code`并将`Type`值存储在它们各自的数据库表中的值列中。`User`模型可能看起来像这样

```
class User < ActiveRecord::Base
  has_one :status
  has_one :code
  has_one :type
end 
```

例如，您可以填写下拉列表`Status.all`。

顺便说一句，要小心`type`ActiveRecord 模型中的列。它保留用于单表继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:05:08.067

将简单的状态 statii(?) 放在数据库中，更不用说 HABTM 可能不是一个好主意。仅保留将由用户更改或可能定期更改（半）的数据表。要让事情正常运行，只需将选项粘贴到模型中，如果您看到它们发生了很大变化，请添加一个表格

在你的模型中

```
STATUS = [
    #  Displayed       stored in db you can use integer or strings at per field.
    [ "Active",        1 ],
    [ "Closed",        2 ],
    [ "Inactive",      3 ] 
```

形式（新/编辑）

```
<%= f.select :question_status, 
              Question::STATUS,
              :prompt => "Select"  %> 
```

在节目中

```
<%=h (Question::STATUS.find_all{|disp, value| value == @question.question_status}).map {|disp, value| disp} %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:40:50.070

最后我遵循了HABTM的关系。我认为这对我的应用程序来说是更正确的方式（因为查找将不断更新）。

# objective-c - 调用 dequeueReusableAnnotationViewWithIdentifier 时出现编译器错误

> ID：13335172
> 
> 赞同：0
> 
> 时间：2012-11-11T20:33:48.293
> 
> 标签：objective-c, mkmapview, mkannotation

我正在尝试在 Annotation 上添加一个按钮，但在线出现错误：

```
MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[MapView dequeueReusableAnnotationViewWithIdentifier:identifier]; 
```

这表明：

> 选择器 dequeueReusableAnnotationViewWithIdentifier 没有已知的类方法。

我真的不知道如何解决它我感谢任何帮助。

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

static NSString *identifier = @"MyLocation";
if ([annotation isKindOfClass:[MapAnnotation class]]) {

    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[MapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] 
                          initWithAnnotation:annotation 
                          reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    // Create a UIButton object to add on the 

    UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeInfoDark];
    [leftButton setTitle:annotation.title forState:UIControlStateNormal];
    [annotationView setLeftCalloutAccessoryView:leftButton];

    return annotationView;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:11:29.340

更改此行：

```
MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[MapView dequeueReusableAnnotationViewWithIdentifier:identifier]; 
```

有了这个：

```
MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:identifier]; 
```

注意大写字母：

MapView 与 mapView 不同。

# spring - 使用 Spring EL 时无法解析引用

> ID：13335174
> 
> 赞同：1
> 
> 时间：2012-11-11T20:33:53.770
> 
> 标签：spring, el

我要做的是创建一个初始化日志代理的 Struts 基本操作。任何操作调用的所有服务都将使用此代理记录错误。然后由一个拦截器访问代理，然后执行实际的日志记录。一切都编译，构建。但是部署我在 Tomcat 7 上收到以下错误：

> `org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'journalVoucherService' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean '#{baseAction.logger}' while setting bean property 'logger'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'com.blah.logging.LoggingProxy@58edf4c8' is defined`

这是我的`applicationContext.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.1.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util-3.1.xsd">

    <!-- Needed to run @PostConstruct initialization checking methods -->
    <context:annotation-config />

    <!-- Needed for @Transactional annotation -->
    <tx:annotation-driven />

    <!-- Journal Voucher Service -->
    <bean id="journalVoucherService"
class="com.blah.service.impl.JournalVoucherServiceImpl"
        parent="baseService">
    </bean>

    <!-- Base Service -->
    <bean id="baseService" abstract="true"
        class="com.blah.service.impl.BaseServiceDatabaseImpl">
        <property name="dataSource" ref="dataSource" />
        <property name="logger" ref="#{baseAction.logger}" />
    </bean>

    <!-- Loggging Proxy -->
    <bean id="loggingProxy" class="com.blah.logging.LoggingProxy"/>

    <!-- Struts 2 Actions -->
    <bean id="baseAction"
        class="com.blah.action.BaseAction">
        <property name="logger" ref="loggingProxy" />
    </bean>

</beans> 
```

这可能很简单，但对 Spring EL 来说是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:11:58.047

logger 属性需要传递一个值：

```
<bean id="baseService" abstract="true"
    <class="com.blah.service.impl.BaseServiceDatabaseImpl">
    <property name="dataSource" ref="dataSource" />
    <property name="logger" value="#{baseAction.logger}" />
 </bean> 
```

# javascript - 在同一图表中将仪表与样条组合

> ID：13335179
> 
> 赞同：2
> 
> 时间：2012-11-11T20:34:35.520
> 
> 标签：javascript, jquery, highcharts

是否可以在同一张图表中将仪表与样条相结合。我的要求是用样条曲线显示实时参数的连续变化，而仪表显示当前值。我试过了，但是当我在同一个图表中添加两个系列时，什么都没有显示。

# javascript - 淡出动作加倍的jQuery问题

> ID：13335181
> 
> 赞同：-1
> 
> 时间：2012-11-11T20:35:00.180
> 
> 标签：javascript, jquery

请耐心等待，这可能需要一点解释。如果我没有清楚地解释它，我提前道歉。

我正在为一个客户端项目构建一个 jQuery Slider（wordpress 插件），并涉及以下功能：

*   一组幻灯片一次加载一组
*   播放/暂停
*   下一张幻灯片/上一张幻灯片
*   下一组/上一组
*   自动播放

略有不同的是，它只有一个标题/描述组合的幻灯片“组”。然后，您不仅可以在每个组的不同幻灯片之间导航，还可以在组本身之间导航。

**我的问题是**，在我暂停幻灯片的自动运行并再次恢复后，next_slide() 操作执行了两次（淡出/淡入淡出/淡入），几乎就像 setTimeout() 本身加倍一样.

**编辑**：现在，每当执行 next_slide() 操作时，它似乎就会发生，而不仅仅是在我之前认为的播放/暂停之后。幻灯片编号不会前进，而是将同一图像淡化两次。我已经将相同的图像向上堆叠了 4 次，但不知道为什么。我为混乱道歉。

可能是因为我的 .live('click') 事件只是调用 next_slide() 它正在堆积吗？

**注意**- 我清除了一些代码以提高可读性，例如用于触发前端按钮和 set_information 函数的函数的 .click 事件。据我所知，它们不是我问题的根源。

任何帮助将不胜感激。什么会导致 next_slide() 函数的双重作用？随意在其他方面批评我的代码，我知道它远非完美：

```
function build_slideshow(grouplist){

    var group_array = jQuery.parseJSON(grouplist); // parse AJAX returned JSON

    var n = 0; //group counter
    var x = 0; //slide counter
    var length = group_array.length - 1; //amount of groups
    var count; // number of slides in group
    var size; // size of window (to pull proper image sizes)
    var autorun = null;

    window_size(); // set size variable for later use
    slideshow_init(); //start the slideshow

    /* ------- FUNCTIONS  -------- */

    /*
    checks window.width for AJAX call
    */

    function window_size(){     
        window_size = $j(window).width();

        switch(true){
            case(window_size > 980):
            size = 'large';
            break;

            case(window_size > 480 && window_size < 980):
            size = 'med';
            break;

            case(window_size < 480):
            size = 'small';
            break;
       }
    }

    function slideshow_init(){
        set_information(); //places Title, Desc, and Slider nav buttons
        get_slides(group_array[n].id); //builds slideshow for group
    }

    function get_slides(group_id){

        $j.post(myAjax.ajaxurl, {action:"get_slides_list", groupid:group_id, size:size}, function(result){

            slide_data = jQuery.parseJSON(result); 
            count = slide_data.length;
            if(autorun) clearTimeout(autorun); //resets the setTimeout from previous group
            x = 0; //resets the counter from previous group

           $j('.slideshow div').hide();
           $j('.slideshow div').html(slide_data[x]).fadeIn(700); //loads first slide

           if(play == true){ //possible that user paused the slideshow last group
               setTimeout(slideshow_autorun, 6000); //autoruns if not
           }
        });
     }

    function next_slide(){
        x++;

        (x == count) ? x = 0 : x = x; //loops to front if last slide

       $j('.slideshow div').fadeOut( 700 ,  function() {
       $j(this).html(slide_data[x]);
       }).fadeIn(700);
    }

    function previous_slide(){
        x--;

        (x <  0) ? x = (count - 1) : x = x; // loops to back if first slide

        $j('.slideshow div').fadeOut( 700 ,  function() {
        $j(this).html(slide_data[x]);
        }).fadeIn(700);
    }

    function next_group(){
        n++;

        (n > length) ? n = 0 : n = n; //loops to front if last group
        slideshow_init();
    }

    function previous_group(){
        n--;

        (n < 0) ? n = length : n = n; //loops to back if first group
        slideshow_init();
    }

    function play_slideshow(){
         play = true;

         slideshow_autorun();
    } 

    function pause_slideshow(){
        if(autorun) clearTimeout(autorun);

        play = false;    
    }

    function slideshow_autorun(){
        if(play == true){
        next_slide();

        autorun = setTimeout(slideshow_autorun, 6000);

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:23:04.620

我想出了“如何”，但我仍然不确定“为什么”。

next_slide() 函数是问题所在：

```
function next_slide(){
   x++;

    (x == count) ? x = 0 : x = x;

   $j('.slideshow div').fadeOut( 700 ,  function() {
    $j(this).html(slide_data[x]);
   }).fadeIn(700);

} 
```

我将其更改为，这似乎解决了问题：

```
function next_slide(){
   x++;

    (x == count) ? x = 0 : x = x;

   $j('.slideshow div').fadeOut( 700 ,  function() {
    $j(this).html(slide_data[x]).fadeIn(700);
   });

} 
```

通过在函数内部移动 .fadeIn，它以某种方式确保它不会加倍。有人有解释吗？当按下按钮时，我还自动暂停了幻灯片上的自动运行，以确保它不会变得丑陋，我相信用户无论如何都不会介意他们想要自己的速度。

# python - Python - 获取切片索引

> ID：13335182
> 
> 赞同：6
> 
> 时间：2012-11-11T20:35:09.243
> 
> 标签：python, python-2.7, python-2.x

是否可以获得切片的索引值（开始，结束）？例如

```
In [1]: s = "Test string"
In [2]: s[-6:] # get slice indexes (5,11)
Out[2]: 'string'

In [3]: s = "Another test string"
In [4]: s[8:] # get slice indexes (8,19)
Out[4]: 'test string' 
```

换句话说，我不需要子字符串本身，而只需要索引作为元组（开始，结束）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T20:42:30.433

你可以像这样使用python的[`slice`](http://docs.python.org/2/library/functions.html#slice)对象：

```
In [23]: s = "Test string"

In [24]: slice(-6, None).indices(len(s))
Out[24]: (5, 11, 1)

In [25]: s = "Another test string"

In [26]: slice(8, None).indices(len(s))
Out[26]: (8, 19, 1) 
```

编辑：使用 Eric 的改进来使用 None 而不是 len(s) 作为 stop 参数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T20:42:54.643

```
class SliceGetter(object):
    def __init__(self, inner):
        self.size = len(inner)

    def __getitem__(self, index):
        return index.indices(self.size)[:2] 
```

```
>>> SliceGetter("Test string")[-6:]
(5, 11)
>>> SliceGetter("Another test string")[8:]
(8, 19) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:38:56.050

定义自己的功能：

```
In [119]: def start_end(strs,x):
    if x>0:
        return x,len(strs)  
    else:
        return len(strs)+x,len(strs)
   .....:     

In [120]: start_end("Test String",-6)
Out[120]: (5, 11)

In [122]: func("Another test string",8)
Out[122]: (8, 19) 
```

# ios - ios中的应用委托

> ID：13335187
> 
> 赞同：0
> 
> 时间：2012-11-11T20:35:34.700
> 
> 标签：ios, xcode

我无法理解这段代码的作用：

```
AppDelegate *appDelegate =
 [[UIApplication sharedApplication] delegate]; 
```

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:06:56.077

每个 iOS 应用程序都有一个应用程序委托。您询问的代码为您提供了对该委托的引用。请参阅文档以`UIApplication delegate`获取`UIApplicationDelegate`更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:08:01.620

您将获得指向 Application Delegate 的指针。

```
[UIApplication sharedApplication] 
```

返回一个指向您的应用程序实例的指针（单例实例，只允许该对象的一个​​实例，并且它由“sharedApplication”方法返回）。

然后，“delegate”返回此 UIApplication 实例的委托，**通常**在应用程序的 AppDelegate.m 和 AppDelegate.h 文件中实现，它属于 AppDelegate 类。

# java - 使用 OpenGL 进行纹理颜色操作（在 LWJGL 中使用 Java）

> ID：13335192
> 
> 赞同：2
> 
> 时间：2012-11-11T20:36:09.723
> 
> 标签：java, opengl, colors, lwjgl

我是 OpenGL 的新手。我将 Java 与 LWJGL 和 Slick 一起使用。到目前为止，我可以绘制多个纹理，并且可以使用缓冲区将屏幕上显示的图像复制到纹理以进行后处理。使用 glColor3f() 我可以使屏幕具有所需的颜色（仅蓝色，仅红色，仅显示蓝色和绿色通道等）。

但是 glColor3f(r, g, b) 所做的只是将 r, g, b 的值乘以当前像素。如果 R、G、B 是像素的当前值，则 glColor 对所有像素所做的是 (R*r, G*g, B*b)。

我想要做的是使用当前值 R、G、B，例如，我可以将红色通道换成蓝色通道：

(B, RG)

或者将这些值和新值用于算术运算

(R+G*r, (B+g)/5, B*0.2)

我的目的是制作灰度纹理，改变所有像素颜色（R，G，B）

```
color = (R*0.5 + G*0.5 + B*0.5)/3
functionThatChangesColor(color, color, color); 
```

我怎样才能做到这一点或类似的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:02:36.733

使用实现组件调动的着色器。使用更高版本的 OpenGL，您还可以将纹理的组件混合设置为纹理参数。见[http://www.opengl.org/wiki/Texture#Swizzle_mask](http://www.opengl.org/wiki/Texture#Swizzle_mask)

> # 调酒面膜
> 
> 虽然 GLSL 着色器完全能够重新排序纹理函数返回的 vec4​ 值，但从代码中控制从纹理获取的数据的顺序通常更方便。这是通过 swizzle 参数完成的。
> 
> 纹理对象可以有 swizzling 参数。这仅适用于具有彩色图像格式的纹理。四个输出分量 RGBA 中的每一个都可以设置为来自特定的颜色通道。swizzle 掩码受到所有读取访问的尊重，无论是通过纹理采样器还是图像加载存储。
> 
> 要设置组件的输出，您需要设置 GL_TEXTURE_SWIZZLE_C 纹理参数，其中 C 是 R、G、B 或 A。这些参数可以设置为以下值：
> 
> *   GL_RED：该组件的值来自>图像的红色通道。所有颜色格式都至少有一个红色通道。
> *   GL_GREEN：该组件的值来自>图像的绿色通道，如果没有绿色通道，则为0。
> *   GL_BLUE：该组件的值来自>图像的蓝色通道，如果没有蓝色通道，则为0。
> *   GL_ALPHA：该组件的值来自 > 图像的 alpha 通道，如果没有 alpha 通道，则为 1。
> *   GL_ZERO：该组件的值始终为 0。
> *   GL_ONE：此组件的值始终为 1。
> 
> 您还可以使用 GL_TEXTURE_SWIZZLE_RGBA 参数同时设置所有四个。这需要一个包含四个值的数组。例如：
> 
> ```
> //Bind the texture 2D.
> GLint swizzleMask[] = {GL_ZERO, GL_ZERO, GL_ZERO, GL_RED};
> glTexParameteriv(GL_TEXTURE_2D, GL_TEXTURE_SWIZZLE_RGBA, swizzleMask); 
> ```
> 
> 当着色器访问它时，这将有效地将图像中的红色通道映射到 alpha > 通道。

# c++ - 粘性自定义流操纵器

> ID：13335193
> 
> 赞同：12
> 
> 时间：2012-11-11T20:36:14.560
> 
> 标签：c++

如何实现我自己的自定义流操纵器以使其具有粘性。例如，我想将整数转换为二进制，这样：

```
cout << "decimal of 4: " <<  4 
     << "\ndecimal of 4: " << 4 
     << binary << "\nbinary of 4: " << 4 
     << "\nbinary of 4: " << 4 
     << nobinary << "\ndecimal of 4: " << 4 
     << "\ndecimal of 4: " << 4 << endl; 
```

会返回：

```
decimal of 4: 4
decimal of 4: 4
binary of 4: 100
binary of 4: 100
decimal of 4: 4
decimal of 4: 4 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-11T21:25:30.837

做整个事情有点复杂。为了使其易于理解，我将从基本内容开始：对用户定义的类型使用自定义格式标志。整数的自定义格式将在下面进行。

IOStream 类 [间接地] 派生，`std::ios_base`从中提供两个数据存储：`std::ios_base::iword()`分别`std::ios_base::pword()`用于`int`s 和`void*`。维护存储的已分配内存并`std::ios_base::pword()`非易事，幸运的是，对于这个相对简单的用例，不需要。要使用这些都返回`const`对相应类型的非引用的函数，您通常在程序中使用一次分配索引`std::ios_base::xalloc()`，并在需要访问自定义格式标志时使用它。当您使用`iword()`或`pword()`最初访问一个值时，它将被初始化为零。总而言之，这里有一个小程序演示了这一点：

```
#include <iostream>

static int const index = std::ios_base::xalloc();

std::ostream& custom(std::ostream& stream) {
    stream.iword(index) = 1;
    return stream;
}

std::ostream& nocustom(std::ostream& stream) {
    stream.iword(index) = 0;
    return stream;
}

struct mytype {};
std::ostream& operator<< (std::ostream& out, mytype const&) {
    return out << "custom-flag=" << out.iword(index);
}

int main()
{
    std::cout << mytype() << '\n';
    std::cout << custom;
    std::cout << mytype()  << '\n';
    std::cout << nocustom;
    std::cout << mytype() << '\n';
} 
```

现在，`int`like`4`不是用户定义的类型，并且已经为这些定义了输出运算符。幸运的是，您可以使用构面自定义整数格式化的方式，更具体地说，使用`std::num_put<char>`. 现在，要这样做，您需要执行多个步骤：

1.  派生一个类`std::num_put<char>`并覆盖`do_put()`您要为其提供专门行为的成员。
2.  `std::locale`使用新创建的构面创建一个对象。
3.  `std::ios_base::imbue()`与新的流`std::locale`。

为了让用户感觉更好，您可能希望在使用操纵器时想出一个`std::locale`具有合适构面的新的。`std::num_put<char>`但是，在这样做之前，让我们从创建一个合适的方面开始：

```
#include <bitset>
#include <iostream>
#include <limits>
#include <locale>

static int const index = std::ios_base::xalloc();

class num_put
    : public std::num_put<char>
{
protected:
    iter_type do_put(iter_type to,
                     std::ios_base& fmt,
                     char_type fill,
                     long v) const
    {
        if (!fmt.iword(index)) {
            return std::num_put<char>::do_put(to, fmt, fill, v);
        }
        else {
            std::bitset<std::numeric_limits<long>::digits> bits(v);
            size_t i(bits.size());
            while (1u < i && !bits[i - 1]) {
                --i;
            }
            for (; 0u < i; --i, ++to) {
                *to = bits[i - 1]? '1': '0';
            }
            return to;
        }
    }
#if 0
    // These might need to be added, too:
    iter_type do_put(iter_type, std::ios_base&, char_type,
                     long long) const;
    iter_type do_put(iter_type, std::ios_base&, char_type,
                     unsigned long) const;
    iter_type do_put(iter_type, std::ios_base&, char_type,
                     unsigned long long) const;
#endif
};

std::ostream& custom(std::ostream& stream) {
    stream.iword(index) = 1;
    return stream;
}

std::ostream& nocustom(std::ostream& stream) {
    stream.iword(index) = 0;
    return stream;
}

int main()
{
    std::locale loc(std::locale(), new num_put);
    std::cout.imbue(loc);
    std::cout << 13 << '\n';
    std::cout << custom;
    std::cout << 13  << '\n';
    std::cout << nocustom;
    std::cout << 13 << '\n';
} 
```

有点难看的是，必须`imbue()`习惯`std::locale`使用`custom`机械手。为了摆脱这种情况，我们可以确保在 used 中安装了自定义 facet `std::locale`，如果没有，则在设置标志时安装它：

```
std::ostream& custom(std::ostream& stream) {
    if (!stream.iword(index)
        && 0 == dynamic_cast<num_put const*>(
                &std::use_facet<std::num_put<char> >(stream.getloc()))) {
        stream.imbue(std::locale(stream.getloc(), new num_put));
    }
    stream.iword(index) = 1;
    return stream;
} 
```

现在剩下的就是覆盖不同的`do_put()`成员以与`unsigned`各种类型和 with正常工作，`long long`但这留作练习。

# php - 使用 $.post() 进行表单验证

> ID：13335194
> 
> 赞同：0
> 
> 时间：2012-11-11T20:36:17.150
> 
> 标签：php, javascript, jquery, api, validation

我正在使用 bassistance.de 的 Validation jQuery 插件来验证表单`#signup-form`。与其以通常的方式直接将表单数据提交到服务器，不如通过 AJAX'ly 提交表单数据`$.post()`。

**JS代码**

```
// Validate form
$('.signup-form').validate({
    rules: {
        signupName: { required: true, minlength: 3 }
    }
});

// Submit to Serverside
$('#submit-btn').click(function() {
    $.post('/api/register_user',
        $('#signup-modal .signup-form').serialize(),
        success: function() {
            console.log('posted!');
        }
    );
}); 
```

**问题：**如果用户输入的数据没有通过 jquery 验证，点击处理程序`#submit-btn`仍然允许提交表单！有没有办法检查没有验证错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:49:08.200

试试这个：

```
// Validate form
$('.signup-form').validate({
    rules: {
    signupName: { required: true, minlength: 3 }
   }
});

// Submit to Serverside
$('#submit-btn').click(function() {
    if ($('.signup-form').valid()) {
        $.post('/api/register_user',
            $('#signup-modal .signup-form').serialize(),
            success: function() {
                console.log('posted!');
            }
        );
     }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:55:15.997

最好的方法是使用该`submitHandler`选项来验证：

```
$('.signup-form').validate({
    rules: {
        signupName: { required: true, minlength: 3 }
    },
    submitHandler: function(form){
      $.post('/api/register_user',
          $('#signup-modal .signup-form').serialize(),
          success: function() {
              console.log('posted!');
          }
      );
    }
}); 
```

一旦表单有效，这将自动调用。无需在提交按钮或提交事件上附加任何新内容。

# android - 红眼消除机器人

> ID：13335196
> 
> 赞同：0
> 
> 时间：2012-11-11T20:36:38.630
> 
> 标签：android, image-processing

我想在 android 上实现红眼消除应用程序。是否有任何 api 或内置的 android 方法可以做到这一点？如果没有，请告诉我如何从图像中检测眼睛？我知道如何去除红色，但我很难从图像中检测眼睛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:40:05.990

使用[OpenCV](http://opencv.willowgarage.com/wiki/InstallGuide)检测眼睛，然后在您期望瞳孔所在的圆形区域中，获取像素值并将红色值设置为其原始值的 20%，同时保持绿色和蓝色通道不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:45:37.437

还有适用于位图的[FaceDetector.findFaces() 。](http://developer.android.com/reference/android/media/FaceDetector.html)但是，它只会给你一个矩形的脸。但是应该更容易在该矩形中搜索红色饱和像素并按照亚历山大的建议去饱和颜色。但是这样你就不需要另一个库了。

# c# - 如何从库程序集中订阅 Application.ApplicationExit

> ID：13335197
> 
> 赞同：0
> 
> 时间：2012-11-11T20:36:49.350
> 
> 标签：c#, .net, vb.net

有没有办法订阅这个事件或类似的东西，所以我可以在对象完成之前执行一些清理代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:49:03.737

该事件是静态的，因此在 DLL 中使用它不会导致任何问题。

但是请注意，仅当您的类库实际上是从 Winforms 应用程序中使用时才会触发该事件。只有公开只能从 Winforms 应用程序使用的功能，才能确定这一点。像自定义控件或 UserControl。

替代方案是 AppDomain 事件、DomainUnload 和 ProcessExit。或者只是期待主应用程序让您知道关机。这通常是更好的选择，您不一定*知道*应用程序退出的原因。例如，您不想在硬崩溃时保存设置。请注意 ApplicationSettingsBase 类也遵循该模式，您必须显式调用其 Save() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:40:23.067

您订阅此事件的方式与订阅*任何*事件的方式相同。

[ApplicationExit](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.applicationexit.aspx) MSDN 页面上的示例很清楚：

```
Application.ApplicationExit += new EventHandler(this.OnApplicationExit);

private void OnApplicationExit(object sender, EventArgs e) {
    // do your cleanups
} 
```

# count - php 统计用户发帖

> ID：13335199
> 
> 赞同：0
> 
> 时间：2012-11-11T20:36:54.340
> 
> 标签：count, posts

我在计算来自 db 的用户帖子时遇到了一些问题，这有点令人困惑，因为所有的 id/行都在同一个表中。

表：
类别 | id1 | id2 | 标题 | 味精 | 用户身份

* * *

```
<?php
$query = "SELECT * FROM topics WHERE authorid='".$id2."'";
$rows = mysql_query($query);
echo $rows['id2'] ;
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:47:49.453

```
$query = "SELECT COUNT(*)AS count FROM topics WHERE authorid='".$id2."'"; 
```

然后在您获取行之后（这将取决于您使用的数据库库），您可以执行以下操作：

```
echo $rows['count']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:41:15.163

阅读文档。`mysql_query`不返回行。而且您访问它的方式更像是您期望那里有一行。此外，您可能想要连接到数据库（取决于您的 php.ini，不过，IIRC）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:44:53.453

尝试这个：

```
<?php
$query = "SELECT COUNT(*) as count FROM topics WHERE authorid='".$id2."'";
$result = mysql_query($query);
$row = mysql_fetch_array($result);
echo $row['count'] ;
?> 
```

# javascript - 此代码不起作用。试图使用循环来获取我的图像的大小，第一个来了，但其他的没有

> ID：13335200
> 
> 赞同：1
> 
> 时间：2012-11-11T20:37:10.277
> 
> 标签：javascript

```
$j(document).ready(<script type="text/JavaScript">
  function getProps(){
    var imgwidth = [];
    var imgheight = [];
    var w, h;
    var width = document.getElementById('des').clientWidth;
    var height = document.getElementById('des').clientHeight;

    img = document.getElementById('des').getElementsByTagName('img').length;

    w = document.getElementById('des').getElementsByTagName('img');
    h = document.getElementById('des').getElementsByTagName('img');

    for ( count = 0; count < img; count++){

      imgwidth[count] = w.item(count).clientWidth;
      imgheight[count] = h.item(count).clientHeight;

    }
</script>); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:45:07.003

我认为这就是您想要的，我稍微重构了您的代码：

```
function getProps()
{
    var imgwidth = [];
    var imgheight = [];

    var images = document.getElementById('des').getElementsByTagName('img');
    var count = images.length;

    for ( i = 0; i < count; i++)
    {

        imgwidth[i] = images[i].clientWidth;

        imgheight[i] = images[i].clientHeight;

    }

    console.log(imgwidth);
    console.log(imgheight);
}

$(document).ready(function()
{
    getProps()
});​ 
```

我已经为您设置了一个 jsfiddle 来演示这一点：http: [//jsfiddle.net/JbpdW/](http://jsfiddle.net/JbpdW/)

**编辑**

如果您使用 jQuery（您显然是这样做的），您可以使用以下方法稍微简化该过程：

```
$("#des img").each(function(i)
{
    imgwidth[i] = this.clientWidth;
    imgheight[i] = this.clientHeight;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:02:02.097

使用 jquery 非常短：

```
$j(function() {

  var result=$j.map($('#des img'),function(el,i) {
    var $el=$j(el); //optimize 
    return {width:$el.width(),height:$el.height()};
  });
  console.log(result);

}); 
```

请注意，我使用对象数组而不是两个变量，使用一个变量比使用两个变量更容易:) [http://jsbin.com/uzikeh/2/edit](http://jsbin.com/uzikeh/2/edit)

# windows - 如何为 Windows XP 创建全屏命令行应用程序

> ID：13335201
> 
> 赞同：0
> 
> 时间：2012-11-11T20:37:18.920
> 
> 标签：windows

我正在尝试创建一个用于启动其他应用程序的应用程序。它将是一个命令行应用程序来启动其他命令行应用程序。我希望这个应用程序在启动时启动全屏（不是一个窗口，而是从字面上接管整个屏幕。我的目标是 Windows XP，但我计划最终让它跨平台，所以很高兴知道是否有操作系统之间的差异。

我对创建 Windows 应用程序一无所知，但我知道如何创建命令行应用程序。

为了创建全屏命令行应用程序，我需要知道/学习/做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:48:37.330

你有没有看到 Far manager ( [http://www.farmanager.com/download.php](http://www.farmanager.com/download.php) ) - 如果你考虑这样的事情，你需要学习控制台 API [http://msdn.microsoft.com/en-us/library/windows /desktop/ms682087(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682087(v=vs.85).aspx)

如果您只想处理命令行选项和管道输入/输出，那么好消息 - 它与 linux 或任何其他平台相同：

```
int main(int argc, char ** argv)
{
    std::cout << "Hello world" << std::endl;
    return 0;
} 
```

将为linux，freebsd，windows做同样的事情......

# objective-c - 如何在其上绘制全屏覆盖和文本+文本字段？

> ID：13335203
> 
> 赞同：0
> 
> 时间：2012-11-11T20:37:42.523
> 
> 标签：objective-c, xcode, cocoa

有没有办法绘制全屏覆盖，然后在其上绘制标签 + 文本字段？

我已经做了什么：

当用户单击按钮时，屏幕应被覆盖。

在我写的**AppDelegate.m**按钮操作方法中：

```
NSRect frame = [[NSScreen mainScreen] frame];
self.mainWindow  = [[NSWindow alloc] initWithContentRect:frame styleMask:NSBorderlessWindowMask backing:NSBackingStoreBuffered defer:NO];
[self.mainWindow setAcceptsMouseMovedEvents:YES];
[self.mainWindow setOpaque:NO];
[self.mainWindow setLevel:CGShieldingWindowLevel()];
[self.mainWindow setBackgroundColor:[NSColor colorWithDeviceRed:0.0 green:0.0 blue:0.0 alpha:0.7]];
[self.mainWindow orderFrontRegardless];
NSApplicationPresentationOptions options = NSApplicationPresentationDisableProcessSwitching + NSApplicationPresentationHideDock + NSApplicationPresentationDisableForceQuit + NSApplicationPresentationDisableSessionTermination + NSApplicationPresentationDisableHideApplication;
[NSApp setPresentationOptions:options]; 
```

它工作得很好，但没有任何动画&我真的不知道如何在它上面绘制对象（标签/文本字段）？

要么，我应该将此方法移到另一个类中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:42:03.530

至于动画，有很多方法..我做

```
mainWindow.alphaValue = 0;
[mainWindow orderFrontRegardless];
[[mainWindow animator] setAlphaValue:1.0]; 
```

至于标签，只需添加一个带有 HUGE NSFont 的 NSTextField 作为子视图

```
NSTextField *label = ... 
[[mainWindow contentView] addSubview:label]; 
```

ps 就像使用标签一样，您可以添加任何其他视图 :)

# haskell - “重载”值构造函数

> ID：13335209
> 
> 赞同：3
> 
> 时间：2012-11-11T20:38:48.023
> 
> 标签：haskell

在[“制作我们自己的类型和类型类”](http://learnyouahaskell.com/making-our-own-types-and-typeclasses)中，他们给出了以下代码：

```
data Point = Point Float Float deriving (Show)  
data Shape = Circle Point Float | Rectangle Point Point deriving (Show)

surface :: Shape -> Float  
surface (Circle _ r) = pi * r ^ 2  
surface (Rectangle (Point x1 y1) (Point x2 y2)) = (abs $ x2 - x1) * (abs $ y2 - y1)  

nudge :: Shape -> Float -> Float -> Shape
nudge (Circle (Point x y) r) a b = Circle (Point (x+a) (y+b)) r  
nudge (Rectangle (Point x1 y1) (Point x2 y2)) a b = Rectangle (Point (x1+a) (y1+b)) (Point (x2+a) (y2+b))

main = do
    print (surface (Circle (Point 0 0) 24))
    print (nudge (Circle (Point 34 34) 10) 5 10) 
```

就目前而言，针对构造函数的模式匹配在这一点上变得非常混乱

```
nudge (Rectangle (Point x1 y1) (Point x2 y2)) a b = .... 
```

如果我们将 Shape 类型定义为：

```
data Shape = Circle Point Float | Rectangle Float Float Float Float deriving (Show) 
```

然后，即使我们对类型的性质失去了一点清晰，模式匹配看起来也不那么混乱，如下所示：

```
data Point = Point Float Float deriving (Show)  
data Shape = Circle Point Float | Rectangle Float Float Float Float deriving (Show)

surface :: Shape -> Float  
surface (Circle _ r) = pi * r ^ 2  
surface (Rectangle x1 y1 x2 y2) = (abs $ x2 - x1) * (abs $ y2 - y1)  

nudge :: Shape -> Float -> Float -> Shape
nudge (Circle (Point x y) r) a b = Circle (Point (x+a) (y+b)) r  
nudge (Rectangle x1 y1 x2 y2) a b = Rectangle (x1+a) (y1+b) (x2+a) (y2+b)

main = do
    print (surface (Circle (Point 0 0) 24))
    print (nudge (Circle (Point 34 34) 10) 5 10) 
```

我的问题是是否可以同时拥有

```
Rectangle Point Point 
```

和

```
Rectangle Float Float Float Float 
```

在同一段代码中（即一种“重载”值构造函数），以便我们可以执行以下操作：

```
...
surface (Rectangle (Point x1 y1) (Point x2 y2)) = (abs $ x2 - x1) * (abs $ y2 - y1)  

...
nudge (Rectangle x1 y1 x2 y2) a b = Rectangle (x1+a) (y1+b) (x2+a) (y2+b) 
```

其中“...”表示与上面代码中的相同。还有其他技巧可以使符号在“轻推（矩形......”点上更紧凑吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:27:01.170

一种选择是使用[视图模式](http://hackage.haskell.org/trac/ghc/wiki/ViewPatterns)。让我给你一个简短的例子：

```
{-# LANGUAGE ViewPatterns #-}

data Point = Point Float Float
data Shape = Circle Point Float | Rectangle Point Point

rectangleAsPoints :: Shape -> Maybe (Point,Point)
rectangleAsPoints (Rectangle a b) = Just (a,b)
rectangleAsPoints _               = Nothing

rectangleFromPoints :: Point -> Point -> Shape
rectangleFromPoints = Rectangle

rectangleAsCoords :: Shape -> Maybe (Float,Float,Float,Float)
rectangleAsCoords (Rectangle (Point x y) (Point a b)) = Just (x,y,a,b)
rectangleAsCoords _                                   = Nothing

rectangleFromCoords :: Float -> Float -> Float -> Float -> Shape
rectangleFromCoords a b c d = Rectangle (Point a b) (Point c d)

surface (rectangleAsPoints -> Just (Point x1 y1, Point x2 y2)) =
  (abs $ x2 - x1) * (abs $ y2 - y1)
surface (Circle _ r) = pi * r ^ 2

nudge (rectangleAsCoords -> Just (x1,y1,x2,y2)) a b =
  rectangleFromCoords (x1+a) (y1+b) (x2+a) (y2+b)
nudge (Circle (Point x y) r) a b = Circle (Point (x+a) (y+b)) r 
```

为了一致性起见，我将矩形的两个视图都实现为函数。这样， Rectangle 类型的实际实现可以保持隐藏。

请注意如何混合正常模式匹配和视图模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T21:36:13.303

您可以使用类型类来使函数同时表现为`Point -> Point -> Rectangle`and `Float -> Float -> Float -> Float -> Rectangle`，但我不提倡这样做。为了收益会很麻烦。我不认为无论如何你都可以使这样一个重载的名称在模式匹配中可用。

在我看来，如果你只是`Point`通过解构它们并操作原始`Float`值来使用值，那么你并没有真正从中得到那么多，所以你可以通过摆脱来解决你的问题它完全。

但是您错过了实现直接调整点的功能的绝佳机会！

对于初学者，我会制作一种`Offset`类型来保存您的`a`和`b`价值观。然后你制作一个函数`adjust :: Offset -> Point -> Point`来进行组合。然后你`nudge`甚至不需要了解 a 的内部结构`Point`来完成它的工作！

例如（免责声明：我实际上并没有编译这个）¹：

```
data Point = Point Float Float deriving (Show)
data Offset = Offset Float Float deriving (Show)
data Shape = Circle Point Float | Rectangle Point Point deriving (Show)

adjust :: Point -> Offset -> Point
adjust (Point x y) (Offset ox oy) = Point (x + ox) (y + oy)

nudge :: Shape -> Offset -> Shape
nudge (Circle c r) o = Circle (adjust c o) r  
nudge (Rectangle p1 p2) o = Rectangle (adjust p1 o) (adjust p2 o) 
```

`Point`同样，在和上可能存在一整套操作`Offset`。例如`offsetFrom :: Point -> Point -> Offset`可能对您的`surface`功能有用。我曾经过分使用类型类来实现一系列运算符（`|+|`,`|*|`等 IIRC），它允许组合各种事物（例如，您可以添加 a`Point`和 an`Offset`以得到 a `Point`，您可以添加和减去`Offset`s但不是`Point`s，您可以将`Offset`s 乘以标量但不能乘以 s`Point`等）。不确定最终是否值得，但它让我的代码看起来更像我的数学！

使用您当前的代码，您`Point`每次需要它们时都有效地再次执行所有操作（包括在 中的同一个等式中两次相同的调整操作`nudge`，这就是我对它看起来如此糟糕的原因的看法）。

* * *

¹有一定的论据可以使函数像`adjust`和`nudge`具有签名，其中被操作的“主要”事物排在最后，所以`adjust :: Offset -> Point -> Point`和`nudge :: Offset -> Shape -> Shape`。这可以派上用场，因为然后部分应用`adjust`会为您提供一个带有 type 的“点转换器” `Point -> Point`，同样您可以部分应用`nudge`来获得一个带有 type 的“形状转换器” `Shape -> Shape`。

当您拥有一组点或形状并且想要对所有点或形状应用相同的变换时，这会有所帮助，例如：

```
data Shape = Polygon [Point]

adjust :: Offset -> Point -> Point
adjust (Offset ox oy) (Point x y) = Point (x + ox) (y + oy)

nudge :: Offset -> Shape -> Shape
nudge o (Polygon ps) = Polygon (map (adjust o) ps) 
```

通常，具有类型的“转换器”`Something -> Something`只是对您的主要数据结构有用的东西。因此，每当您有一个将一些辅助数据与 a 组合`Something`以生成新的函数时，`Something`将 the 作为最后一个参数通常会很有用`Something`，因此您有另一个简单的转换器函数来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T21:35:50.687

你想要的不可能。出于模式匹配的目的，您可以将`ViewPatterns`其用作多个构造函数的穷人替代品，并制作一个函数来简化构造：

```
{-# LANGUAGE ViewPatterns #-}

-- Your pattern match aid
unRectangle :: Shape -> Maybe (Float, Float, Float, Float)
unRectangle (Rectangle (Point x1 y1) (Point x2 y2)) = Just (x1,y1,x2,y2)
unRectangle _ = Nothing

-- your construction aid
rectangle :: Float -> Float -> Float -> Float -> Shape
rectangle x y u v = Rectangle (Point x y) (Point u v)

surface (unRectangle -> Just (x1,y1,x2,y2)) = (abs $ x2 - x1) * (abs $ y2 - y1)
...
nudge (unRectangle -> Just (x1,y1,x2,y2)) = rectangle (x1+a) (y1+b) (x2+a) (y2+b) 
```

# iphone - 将音频文件保存到 NSURL

> ID：13335215
> 
> 赞同：3
> 
> 时间：2012-11-11T20:39:22.370
> 
> 标签：iphone, ios, audio, nsurl

我想保存 TTS SDK 生成的音频文件。我不确定使用 NSURL 路径的正确方法是什么。

这是代码，但结果说不。如果我不尝试保存音频文件，MyAcaTTS 可以正常工作。

```
NSString *FileNamePath = [[NSBundle mainBundle] pathForResource:@"testAudio" ofType:@"aiff"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appSettingsPath = [documentsDirectory stringByAppendingPathComponent:FileNamePath];
NSURL *url=[[NSURL alloc]initWithString:appSettingsPath];

BOOL result =  [MyAcaTTS_ startSpeakingString:@"testing" toURL:url]; 
```

Acapela iPhone SDK 文档。

6.2.3.startSpeakingString:toURL: 概要

*   (BOOL)startSpeakingString:(NSString *)string toURL:url;

描述

开始将字符串合成为声音 (AIFF) 文件。当字符串合成正常完成或停止时，speechSynthesizer:didFinishSpeaking: 消息将发送给委托人。参数 string 要合成的文本。当 nil 或空时，不会发生合成。url 输出声音文件的文件系统位置。合成成功时返回值为YES，否则返回NO。

[http://www.ecometrixem.com/cms-assets/documents/44729-919017.acapela-for-iphone.pdf](http://www.ecometrixem.com/cms-assets/documents/44729-919017.acapela-for-iphone.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:00:35.187

您在代码中需要考虑两件事：

1.  该行 `NSString *FileNamePath = [[NSBundle mainBundle] pathForResource:@"testAudio" ofType:@"aiff"];` 不是必需的，因为它返回文件的完整路径，而您只需要它的最后一部分：“testAudio.aiff”

2.  您使用构造函数构造 URL 对象，该构造函数接受具有有效协议前缀的字符串，例如“http://”或“ftp://”，而您需要另一个命名的构造函数`initFileURLWithPath:`。

因此，通过以上所有内容，您的代码可能如下所示：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appSettingsPath = [documentsDirectory stringByAppendingPathComponent:@"testAudio.aiff"];
NSURL *url=[[NSURL alloc]initFileURLWithPath:appSettingsPath];

BOOL result =  [MyAcaTTS_ startSpeakingString:@"testing" toURL:url]; 
```

# c# - 如何在 C# 中使 datagridview 与另一个表单的 datagridview 相同？

> ID：13335219
> 
> 赞同：0
> 
> 时间：2012-11-11T20:39:39.940
> 
> 标签：c#, winforms, oop

因此，当我单击 Form1 上的按钮时，它应该将 datagridview 的值复制到 form2 的 datagridview 值。

这是我的一些代码：

```
while ((asd = sr.ReadLine()) != null)
            {

                string[] elements = asd.Split(';');

                if (checkBox1.Checked == false)
                {

                    for (int i = 0; i < 3; i++)
                        elements[i] = elements[i].Trim(new char[] { ' ', '"' });

                    erDataSet1.Eredmenyek.AddEredmenyekRow(elements[0], elements[1], elements[2],0,00.00);
                }

                else
                {
                    for (int i = 0; i < 6; i++)
                        elements[i] = elements[i].Trim(new char[] { ' ', '"' });

                    erDataSet1.Eredmenyek.AddEredmenyekRow(elements[0], elements[1], elements[2],Convert.ToDouble(elements[3]), Convert.ToDouble(elements[4]));

                }

            }
            sr.Close(); 
```

在 datagridview 上显示的按钮：

```
private void button6_Click_1(object sender, EventArgs e)
    {
        dgv1.DataSource = erDataSet1.Eredmenyek;

    } 
```

在不起作用的form2按钮上：

```
 private void button1_Click(object sender, EventArgs e)
    {
        dgver.DataSource = erDataSet1.Eredmenyek;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:44:32.300

相反，您可能会考虑在控件上[实现虚拟模式](http://msdn.microsoft.com/en-us/library/2b177d6d.aspx)`DataGridView`，然后传递对数据源的引用。在大多数情况下，复制行本身有点小技巧。

# python - 简单的python代码

> ID：13335221
> 
> 赞同：0
> 
> 时间：2012-11-11T20:39:45.737
> 
> 标签：python

在编程中，我正在编写用户选择实体的代码，然后计算体积和表面积。但我没有直接选择，而是让用户选择询问有关实体的额外信息，如果他们输入数字然后“显示”（例如“1 显示”）。他们可以一直询问直到选择了一个实体，所以我使用了一个 while 循环。

循环不工作。如果带有循环的条件无效，它仍然会进入它并循环并且不让我出去。请帮忙。我认为这很简单。我试图在没有帮助的情况下进行整数和字符串转换。

```
#11/07/12 
#A program that asks user for input and calculates SA and Volume of a chosen solid

print "Which solid would you like to calculate?"    
print "  "      
print "1\. Tetrahedron"          
print "2\. Dodecahedron"           
print "3\. Cone"                 
print "4\. Sphere"                        
print "5\. Icosahedron"                    
print '  '                        
print "If you want extra information on the solid, enter the solid's number and then add show. Example: 1 show"                   
print "If not, just enter the number"                       
choice = raw_input('----->')                             

#Where asks if user wants extra information on the solids, loops until solid is chosen             
while choice != '1' or choice != '2' or choice != '3' or choice != '4' or choice != '5':      
    if choice == "1 show":     
        print "A tetrahedron is composed of four congruent triangle faces. "     
    if choice =='2 show':      
        print "A dodecahedron is a polyhedron composed of 12 pentagonal faces. "      
    if choice == '3 show':       
        print 'A cone is a geometric solid that tapers smoothly from a circular base to an   apex. '          
    if choice == '4 show':          
        print "A sphere is a perfectly round circle. "            
    if choice == '5 show':
        print 'An icosahedron is a regular polyhedron with 20 congruent equilateral triangular faces'        
    choice = raw_input('Your new choice: ')              

if choice == 1: # Tetradedron               
    tetraside = raw_input("What is the length of your solid's side? ")               
    tetrabaseA = ((3 ** (1/2)) / 4) * tetraside**2                
    tetraheight = 9 * ((6 ** (1/2)) / 3) * tetraside                  
    tetraSA = 4 * tetrabaseA                
    tetraV = (1 / 3) * tetrabaseA * tetraheight 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T20:43:39.337

你的`while`条件不对。想一想：即使`choice`equals `'1'`，条件`choice != '2'`也会为真，所以总是会满足整个条件。

你需要类似的东西

```
while choice not in {'1', '2', ...}: 
```

或者

```
while choice not in set(map(str, range(1, 6))): # a fancier version 
```

或者只是将所有更改`or`为`and`您的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:27:31.617

请注意，虽然您的错误出现在循环条件中，但您的其他一些代码可以通过使用字典查找而不是大块来变得更加“Pythonic” `if` `elif` `else`。

例如，您的 while 循环可以简化为：

```
info = { "1 show" : "A tetrahedron is composed of four congruent triangle faces.",
         "2 show" : "A dodecahedron is a polyhedron composed of 12 pentagonal faces.",
         "3 show" : "A cone is a geometric solid that tapers smoothly from a circular base to an   apex.",
         "4 show" : "A sphere is a perfectly round circle.",
         "5 show" : "An icosahedron is a regular polyhedron with 20 congruent equilateral triangular faces" }

while choice not in { "1", "2", "3", "4", "5" }:
    print info.get(choice, "I'm sorry, I didn't understand your input.")
    choice = raw_input('Your new choice: ') 
```

您可能稍后可以对体积和表面积的实际计算执行类似的操作，尽管您可能需要将这些计算的代码放入单独的函数中，然后将函数放入字典（甚至是列表，因为索引将是整数）。

# sql - SQL：在两个内连接后分隔列名

> ID：13335223
> 
> 赞同：0
> 
> 时间：2012-11-11T20:39:50.213
> 
> 标签：sql

```
SELECT *
FROM banhammer_bans
INNER JOIN banhammer_players AS player
    ON banhammer_bans.player_id = player.id
INNER JOIN banhammer_players AS admin
    ON banhammer_bans.creator_id = admin.id
ORDER BY created_at DESC 
```

我从 banhammer_players 表中得到三`id`列和两列。`name`如何将它们分开，以便在我的 PHP 代码中使用它们？

banhammer_players 包含两列，`id`和`name`. banhammer_bans 有两列 (`player_id`和`creator_id`) 都与 banhammer_players 表匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:41:51.450

使用别名显式选择所有列。

```
SELECT banhammer_bans.id as bans_id, banhammer_players as players_id, ...
FROM banhammer_bans
INNER JOIN banhammer_players AS player
    ON banhammer_bans.player_id = player.id
INNER JOIN banhammer_players AS admin
    ON banhammer_bans.creator_id = admin.id
ORDER BY created_at DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:42:08.043

将查询中的别名用作：

```
 SELECT bans.id, player.name AS player_name, admin.name AS admin_name
   FROM banhammer_bans AS nans
   INNER JOIN banhammer_players AS player
   ON bans.player_id = player.id
   INNER JOIN banhammer_players AS admin
   ON bans.creator_id = admin.id
   ORDER BY created_at DESC; 
```

您可以在`select`为不明确的列（多个表中的同名列）使用表别名时添加任意数量的属性。

# graph - 使用 CSV 属性设置链接长度，节点大小 d3

> ID：13335225
> 
> 赞同：2
> 
> 时间：2012-11-11T20:39:56.500
> 
> 标签：graph, d3.js, directed-graph

按照 mbostock 给出的使用 csv 创建力图的示例：

[如何转换为 D3 的 JSON 格式？](https://stackoverflow.com/questions/11088303/how-to-convert-to-d3s-json-format/11089330#11089330)

[http://bl.ocks.org/2949937](http://bl.ocks.org/2949937)

我正在使用 D3 创建一个力图，但不确定如何/在何处调用 CSV 行中的值来设置节点大小、颜色或链接长度。

我尝试了一些事情，例如：

```
links.forEach(function(link) {
    link.source = nodeByName(link.user1);
    link.target = nodeByName(link.user2);
    link.size = nodeByName(link.somevaluefromcsv)
    link.distance = nodeByName(link.somevaluefromcsv);
  }); 
```

这是错误的。据我所知，它只会生成空节点，并且这些值不能在其他地方调用。

```
var node = svg.selectAll(".node")
      .data(nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", function(d) {return d[3];}) //this is not returing any value as far as I can tell.
      .call(force.drag); 
```

或在刻度函数中进一步向下：

```
node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; })
        .attr("r", function(d) {return d[7];}); 
```

可能有几件事会导致问题： 1\. 我似乎没有一个好的 links 函数或 nodesbyName 数组或函数的概念模型。

CSV 中的典型行（就像现在一样），按以下顺序排列：时间、用户 1、用户 2、相似度得分、总分、反对分、得分、长度是：

```
1223.8167,john6,john5,0.153846153846,1,0,1,5
1223.9166,john6,john5,0.185185185185,8,0,8,6
1223.9667,bobby4,bobby3,0.402777777778,224,320,-96,15
1224.1167,bobby4,bobby3,0.402777777778,226,310,-84,15
1224.2,bobby4,bobby3,0.402777777778,240,283,-43,15
1224.2,john6,john5,0.185185185185,2,0,2,5
1224.2,john6,john5,0.153846153846,2,0,2,5
1224.2667,bobby4,bobby3,0.397058823529,0,24,-24,13
1224.2833,john6,john5,0.153846153846,1,0,1,5
1224.45,bobby4,bobby3,0.397058823529,0,21,-21,13
1224.55,bobby4,bobby3,0.442857142857,0,18,-18,14 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:07:35.803

函数`nodeByName(name)`- 创建新节点或返回具有指定名称作为参数的现有节点。如果您需要从链接传递节点属性，您可以在`forEach`

```
links.forEach(function(link) {
    link.source = nodeByName(link.user1);
    link.target = nodeByName(link.user2);
    link.source.radius = link.radius
    link.size = link.somevaluefromcsv;
    link.distance = link.somevaluefromcsv;
}); 
```

links - 节点之间的链接数组。

```
var node = svg.selectAll(".node")
      .data(nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", function(d) {return d.radius;}) // radius property of node
      .call(force.drag); 
```

# html - 控制栏比html5 + css中的视频更宽

> ID：13335228
> 
> 赞同：2
> 
> 时间：2012-11-11T20:40:06.463
> 
> 标签：html, cross-browser, html5-video

我尝试在 html5 中包含 width 和 height 属性来操纵视频帧的尺寸，但它似乎并没有与控制栏成比例地变大或变小。我的意思是，似乎视频的控制栏（带有播放/暂停和音量控制的控制栏）比看起来很尴尬的实际视频帧宽得多，所以我想知道我是如何可以使控制栏和视频帧等宽。我认为几个屏幕截图将使我遇到的问题更加清晰。

![这是 Mozilla 中视频的显示](../Images/ed679d8dd4cf8c1f903726172205fd3d.png)

![这是 chrome 中视频的显示](../Images/7cdab85a1fcf699400dd1bfd5637e416.png)

对于凌乱的代码，我深表歉意，但如果有帮助，我已将其包括在内。

```
<!DOCTYPE html>

<html style="height:100%; width=1200px;margin:0;padding:0;">

<body style="height:100%;width=100%;margin:0;padding:0;">
<div id="container" style="background-color:#FFA500;height:100%;width:100%;position:relative;min-height:800px;min-width:1000px;" >

    <div id="logo_login_pass" style="border:1px solid black; height:25%;width:94%;background-color:white;position:relative;float:right;min-height:150px;min-width:700px;">
        <div id="logo" style="border:1px solid black; height:80%; width:30%; background-color:green; position:absolute;bottom:14px;min-height:90px;min-width:340px;">
            For Logo
        </div>
        <div id="login_pass_form" style="border:1px solid black; height:40%;width:50%;background-color:blue;min-height:60px; min-width:300px;position:relative;float:right;bottom:-30px;">
            For Login and Password
        </div>
    </div>
    <div id="video" style="border:0px solid white; height:40%;width:49.844%;background-color:indigo;position:relative;float:left;">
        <video width="450px" height="190px" controls="controls" style="position:absolute;top:30px;right:170px;">
            <source src="sampleVid.mp4" type="video/mp4">
            <source src="sampleVid.ogv" type="video/ogv">
            <source src="sampleVid.webm" type="video/webm">
            Your browser does not support the video tag.
        </video>
    </div>
    <div id="user_registration_form" style="border:0px solid white; height:74%;width:50%;background-color:purple;position:reltive;float:right;min-height:448px;">
        Registration Form
    </div>
    <div id="footer" style="border:1px solid black; height:32%;width:100%;background-color:pink;position:relative;float:right;min-height:188px;">
        Footer
    </div>
</div>

</body>

</html> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-13T04:19:51.580

设置宽度尺寸并将高度尺寸留空将解决此问题。发生这种情况是因为如果您设置了两个维度，并且实际的视频维度不一样，它将使用一个维度缩放到最接近的适当比例，从而在视频播放器的唯一一个维度上留下空白边距。视频可以水平居中，也可以垂直居中，两边都有空白

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:42:26.733

它是您的视频问题，因为您的视频不是全屏的。请参阅以下示例

```
 <!DOCTYPE html>

<html style="height:100%; width=1200px;margin:0;padding:0;">

<body style="height:100%;width=100%;margin:0;padding:0;">
<div id="container" style="background-color:#FFA500;height:100%;width:100%;position:relative;min-height:800px;min-width:1000px;" >

    <div id="logo_login_pass" style="border:1px solid black; height:25%;width:94%;background-color:white;position:relative;float:right;min-height:150px;min-width:700px;">
        <div id="logo" style="border:1px solid black; height:80%; width:30%; background-color:green; position:absolute;bottom:14px;min-height:90px;min-width:340px;">
            For Logo
        </div>
        <div id="login_pass_form" style="border:1px solid black; height:40%;width:50%;background-color:blue;min-height:60px; min-width:300px;position:relative;float:right;bottom:-30px;">
            For Login and Password
        </div>
    </div>
    <div id="video" style="border:0px solid white; height:40%;width:49.844%;background-color:indigo;position:relative;float:left;">
        <video width="450px"  controls="controls" style="position:absolute;top:30px;right:170px;">
              <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4'/>
              <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm'/>

            Your browser does not support the video tag.
        </video>
    </div>
    <div id="user_registration_form" style="border:0px solid white; height:74%;width:50%;background-color:purple;position:reltive;float:right;min-height:448px;">
        Registration Form
    </div>
    <div id="footer" style="border:1px solid black; height:32%;width:100%;background-color:pink;position:relative;float:right;min-height:188px;">
        Footer
    </div>
</div>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T12:36:23.463

只需在视频中为您想要的 tamnho 添加元素大小

```
<video width="450" height="240" controls> 
```

# android - 在两个或多个 Android 客户端之间共享 SQL 数据库

> ID：13335232
> 
> 赞同：1
> 
> 时间：2012-11-11T20:40:37.573
> 
> 标签：android, sql, servlets

我创建了一个 java servlet，我用它附加了 SQL 数据库。Android 客户端将数据发送到 java servlet 以将其保存在运行良好的数据库中。我想知道多个 android 客户端是否会共享同一个数据库连接，还是我需要做一些线程或其他事情？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:53:45.983

在我看来，您应该将 Android 设备上的数据库与 servlet 同步。同步并不容易。我没有为它找到现成的类或库。

也许你在stackoverflow上找到了一些东西;-)

# java - 在Java中对字符串数组的子集进行排序，忽略大小写

> ID：13335233
> 
> 赞同：0
> 
> 时间：2012-11-11T20:40:39.220
> 
> 标签：java, arrays

> **可能重复：**
> [如何在 Android 的数组中正确排序大写和小写字符串？](https://stackoverflow.com/questions/13314398/how-to-properly-sort-upper-and-lowercase-strings-in-array-in-android)

我必须按字母顺序对 CLI 参数的子集进行排序。因此，要对子集进行排序，请使用以下代码：

```
// Ignore args[0], sort the rest
Arrays.sort(args, 1, args.length); 
```

为了排序忽略大小写，我必须使用某种比较器对象。要使用比较器对子集进行排序，有以下方法签名：

```
Arrays.sort(array, from, to, comp); 
```

是否可以不在单独的行上创建比较器对象并将其包含在 Arrays.sort() 签名中（*即*整洁且易于理解）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:44:53.180

您可以使用[内置的比较器](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#CASE_INSENSITIVE_ORDER) `String.CASE_INSENSITIVE_ORDER`：

```
Arrays.sort(args, 1, args.length, String.CASE_INSENSITIVE_ORDER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:42:51.627

您可以定义和初始化一个匿名类实现`Comparator`例如

```
new Comparator<Whatever> {
   public int compare(Whatever w1, Whatever w2) {
      // implementation
   }
   // etc...
} 
```

并在方法中*内联*即执行此操作`Arrays.sort()`。

```
Arrays.sort(array, from, to, new Comparator<Whatever>{....}); 
```

如果比较器实现不重要，则缺点是可读性，当然，您不能在其他地方使用该比较器。但是，如果比较器特别小，它可能有助于提高可读性，因为实现清晰可见。

# sql - sql访问4张表的内连接

> ID：13335236
> 
> 赞同：0
> 
> 时间：2012-11-11T20:40:53.270
> 
> 标签：sql, ms-access, join

我是 sql 新手，我正在尝试将 4 个表连接在一起，但无法掌握它。我正在尝试使用内部连接来执行此操作，但我总是在访问时遇到语法错误。

```
SELECT * 
from kdst,aufpos 
inner join( artst inner join vert on kdst.vertreter = vert.vertnr)
on aufpos.artnr = artst.artnr; 
```

这是我的代码，但它不起作用。我不知道该怎么办了，我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:49:37.040

使用查询设计窗口构建

![访问查询设计窗口](../Images/b2f6e66afcedffbe25cb1f7c8e4d6532.png)

然后切换到sql视图

![sql视图](../Images/c72f765538c2e91761b1d0e340c0fdc5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:57:46.873

```
Select * 
From table1 t1
Inner join table2 t2 on t1.id = t2.fkid
Inner join table3 t3 on t1.id = t3.fkid
... 
```

这是如果您想将多个表连接到同一个父表 ( `table1`)。`Fkid`是引用父表主键的外键字段的列。

# c# - 如何使用官方 C# 驱动程序在 MongoDB 中获取最后更新的文档

> ID：13335243
> 
> 赞同：0
> 
> 时间：2012-11-11T20:41:20.260
> 
> 标签：c#, .net, mongodb, mongodb-.net-driver

**编辑**=========================

假设您的集合中有 10 个文档，并且您想在其中保留随机文档，以便没有其他请求也可以使用它，为此我在文档设置后使用原子**$set**和字段“taken” **"taken"**为**true**它不再参与查询，所以它不能被任何其他对数据库的请求使用，唯一的问题是它被 "taken" 后我不知道如何获取刚刚的文档已更新。

**编辑**=========================

我很难获得刚刚修改过的文档。

**例子：**

样本文件：

{"_id":"a...", "age":23, "taken": false}

{"_id":"b...", "age":25, "taken": true},

{"_id":"c...", "age":27, "taken": false},

{"_id":"d...", "age":27, "taken": true},

{"_id":"e...", "age":29, "taken": false},

{"_id":"f...", "age":29, "taken": false}

**编码：**

```
collection.Update(Query.And(Query.GTE("age", 26), Query.EQ("taken", false)), Update.Set("taken", true)); 
```

我需要一种方法来获取“拍摄”的记录，有没有办法做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:54:37.570

您可以使用“FindAndModify”方法更新单个文档，然后返回该文档。

```
var query = Query.And(Query.GTE("age", 26), Query.EQ("taken", false));
var update = Update.Set("taken", true);

var result = collection.FindAndModify(
    query, 
    update, 
    true // return new document
);

var chosenDoc = result.ModifiedDocument; 
```

C# 文档在[这里](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-FindAndModifymethod)，关于 findAndModify 的一般信息在[这里](http://docs.mongodb.org/manual/reference/command/findAndModify/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T07:44:06.750

C# 驱动程序有一个方法“FindAndModify”，它可以返回最后更新的文档

# php - html中的字符串图像数据

> ID：13335245
> 
> 赞同：0
> 
> 时间：2012-11-11T20:41:44.430
> 
> 标签：php, html, image

我想知道是否可以将图像数据作为文本分配给 HTML 格式的图像，而不是将其“src”属性设置为文件路径...我想用 PHP 来做！...

我记得在某些网站的源代码中看到类似以下代码的内容...例如：

```
image data = R6+1u5jwhwf6GOG6X6MpFR/hrlbNA1JcqeByPKDIivcJQa2ePIft0Jqewk4/lLYSy4YU1BXARkvdN7vJxx0vUOJGiU5OiMhMhWrH6s1n3pGK0Sat0mMiUCQX4e4BDU+yD1kB87tI+Xh+WitqNN7FyLysoGlAvsGfZQ2bOo+7+7Bm6K4NMktamfNG9v 
```

这样……通过查看我网页的来源……看不到所用图片的地址！只是数据！我认为它更安全！也许！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:44:53.077

这并不更安全，因为必须在浏览器中创建图片才能由用户显示。

您可以做的（这不会使其变得更加“安全”）是拥有一个将您的“数据”转换为图像的 PHP 脚本，请参阅[此线程](https://stackoverflow.com/questions/900207/return-a-php-page-as-an-image)以获取有关如何执行此操作的想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:45:37.803

我认为您指的是[HTML 中的 Base64 编码图像](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDAQFjAA&url=http%3A%2F%2Fwww.sweeting.org%2Fmark%2Fblog%2F2005%2F07%2F12%2Fbase64-encoded-images-embedded-in-html&ei=Rg6gUMbiFZTOyAHJ0YDwBw&usg=AFQjCNGzQk4jvyvLp0F3QxCCLvjeTv3gpA)。

虽然它不是很便携，但不如标准的 img 标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T20:46:23.463

如果您有图像数据，您可以像这样在 html 页面上显示图像`<img src="data:image/png;imagedatacodehere" />`，如果它有 png 扩展名，请检查[此链接](http://sveinbjorn.org/news/2005-11-28-02-39-23/Embedded-image-data-in-HTML-documents.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T20:45:58.390

是的，这是可能的，不，它不是更安全。您在谈论数据uri，并且由于用户的浏览器必须具有图像数据才能显示图像，因此您仍在将图片发送给用户。他们所要做的就是右键单击/另存为显示和繁荣，完成。此外，图像数据只是以 base64 格式嵌入页面本身，这意味着您可以简单地剪切/粘贴该 base64 字符串并仍然窃取图像，即使您有各种毫无意义的图像保护（例如右键单击禁用程序）。

# android - android 上的 Jain SIP 堆栈抱怨错误使用核心类

> ID：13335248
> 
> 赞同：3
> 
> 时间：2012-11-11T20:41:51.317
> 
> 标签：android, sip, jain-sip

我正在尝试在 android 上实现 JAIN sip 堆栈，但是当我尝试编译演示程序时出现此错误：

```
trouble processing "javax/sip/ClientTransaction.class":

Ill-advised or mistaken usage of a core class (java.* or javax.*)
when not building a core library.

This is often due to inadvertently including a core library file
in your application's project, when using an IDE (such as
Eclipse). If you are sure you're not intentionally defining a
core class, then this is the most likely explanation of what's
going on.

However, you might actually be trying to define a class in a core
namespace, the source of which you may have taken, for example,
from a non-Android virtual machine project. This will most
assuredly not work. At a minimum, it jeopardizes the
compatibility of your app with future versions of the platform.
It is also often of questionable legality.

If you really intend to build a core library -- which is only
appropriate as part of creating a full virtual machine
distribution, as opposed to compiling an application -- then use
the "--core-library" option to suppress this error message.

If you go ahead and use "--core-library" but are in fact
building an application, then be forewarned that your application
will still fail to build or run, at some point. Please be
prepared for angry customers who find, for example, that your
application ceases to function once they upgrade their operating
system. You will be to blame for this problem.

If you are legitimately using some code that happens to be in a
core package, then the easiest safe alternative you have is to
repackage that code. That is, move the classes in question into
your own package namespace. This means that they will never be in
conflict with core system classes. JarJar is a tool that may help
you in this endeavor. If you find that you cannot do this, then
that is an indication that the path you are on will ultimately
lead to pain, suffering, grief, and lamentation.

[2012-11-11 22:27:28 - Jain-Test-and] Dx 1 error; aborting
[2012-11-11 22:27:28 - Jain-Test-and] Conversion to Dalvik format failed with error 1 
```

是否可以在eclipse中将--core-library参数添加到编译器，如果可以，我该怎么做，我可以在程序中添加命令行选项，但不知道怎么做编译器。另外，这是建议的，还是有其他方法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:12:33.847

JAIN jar 正在`javax`为其包使用命名空间。Android 不允许在外部 jar 中使用核心库。所以你已经重新包装了它们。您可以通过完成以下步骤与[Ant](http://ant.apache.org/)和[JarJar](http://code.google.com/p/jarjar/wiki/GettingStarted)结合使用（如错误输出中所述）：

*   [安装蚂蚁](http://ant.apache.org/manual/install.html)
*   [按照本教程](http://code.google.com/p/dalvik/wiki/JavaxPackages)

在 build.xml 中添加此代码以重新打包 JAIN jar：

```
<target name="-jarjar" depends="compile">
    <taskdef 
        name="jarjar" 
        classname="com.tonicsystems.jarjar.JarJarTask"
        classpath="buildtools/jarjar-1.4.jar"/>

    <jarjar jarfile="${out.absolute.dir}/jain-sip-sdp-repackaged.jar">
        <fileset dir="${out.classes.absolute.dir}" />
        <zipfileset src="libs/jain-sip-sdp-1.2.2014.jar" />
        <rule pattern="javax.**" result="com.demo.@1"/>
        <rule pattern="gov.nist.javax.**" result="com.demo.@1"/>
    </jarjar>

    <jarjar jarfile="${out.absolute.dir}/jain-sip-api-repackaged.jar">
        <fileset dir="${out.classes.absolute.dir}" />
        <zipfileset src="libs/jain-sip-api-1.2.jar" />
        <rule pattern="javax.**" result="com.demo.@1"/>
    </jarjar>

    <jarjar jarfile="${out.absolute.dir}/jain-sip-ri-repackaged.jar">
        <fileset dir="${out.classes.absolute.dir}" />
        <zipfileset src="libs/jain-sip-ri-1.2.2014.jar" />
        <rule pattern="gov.nist.javax.**" result="com.demo.@1"/>
    </jarjar>

</target> 
```

调用`ant install`你的命令行工具。将新 jars 添加到您的构建路径并删除旧 jars。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T00:56:48.950

编写了大部分原始 JAIN SIP 堆栈的团队现在支持 JAIN SIP 的 Android 端口：

[http://www.telestax.com/jain-sip-stack-for-android/](http://www.telestax.com/jain-sip-stack-for-android/)

# php - 将 MySQL 连接查询与 OOP 和对象相关联的最佳实践方法

> ID：13335253
> 
> 赞同：4
> 
> 时间：2012-11-11T20:42:24.907
> 
> 标签：php, mysql, oop, join, relational-database

我正在开发一个 PHP Web 应用程序，用户可以在其中创建目的地旅行，并邀请其他用户参加这些旅行。

我有用于`Destinations`、`Trips`和的 MySql 表`Users`，以及一个`Invites`用于解决和 之间的多对多关系`Users`的表`Trips`。

对于这些表中的每一个，我在我的应用程序中创建了一个类（`Destinations`一个类、`Trips`一个类等）。我为这些类中的每一个编写了一个静态函数，该函数使对象能够被实例化，并从 MySQL 查询中分配它们的属性（因此从`SELECT *`查询返回的每一行都会导致实例化对象并分配属性）。

我正在尝试创建一个页面，我的用户可以在其中查看他们计划的所有旅行的详细信息。此页面将显示目的地（从`Destinations`）、旅行详情（例如从 开始的日期`Trips`）和他们邀请的用户的详细信息（例如来自的用户名`Users`），并将所有这些数据放在一个 html 表格中，其中每次旅行都是一行。

为了实现这一点，到目前为止，我一直在实例化`Trips`哪些与 user's相关`user_id`，哪些`Destinations`与`Invites`those 相关`Trips`，`Users`哪些与 those 相关`Invites`。然后，我根据需要使用嵌套的 foreach 循环来显示这些，如下所示：

```
foreach($trips as $trip) {
 foreach($invites as $invite) {
   foreach($invited_users as $invited_user) {
      if($invite->trip_id == $trip->id && $invite->guest_id == $invited_user->id) {
        echo $invited_user->name;
                  } } } } 
```

我可以看到这是可怕的，没有办法做到这一点。

通过阅读，我想我想使用 MySQL 来加入 4 个表，然后只选择与我的相关旅行相关的数据。我不确定的是：

a) 如何从这个 MySQL 结果中实例化对象并正确分配它们的属性？

b）即使完成了，我如何避免昂贵的`foreach`循环以在正确的行程旁边显示正确的数据？

是否有以面向对象的方式显示来自多个相关数据库表的数据的“最佳实践”方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:25:28.703

首先，“良好实践”是人们用来为自己的偏见披上可敬外衣的短语之一。最好询问如何通过设计实现特定目标。

话虽如此：您偶然发现了一个在将 RDBMS 映射到面向对象系统时很常见的问题。谷歌“延迟加载”进行大量讨论。问题归结为您在任何时候加载多少“关系”的问题。在您的示例中，旅行与目的地和用户相关联；加载“旅行”时，您是否还应该加载目的地和用户？如果你这样做了，你是否还应该为用户加载其他信息（例如他们正在进行的其他旅行？）。如果你这样做了，你会加载用户所有行程的行程数据吗？等等——如果你不小心，你最终会加载整个数据库。

不加载所有相关实体的缺点是，如果一次加载每个对象的数据，性能会变得非常差。

有关我认为最佳实践的详细描述，请购买并阅读 Evans 的“领域驱动设计”。

作为捷径，考虑创建一个“存储库”层，它知道如何将数据库记录映射到对象，并创建自定义方法来搜索您想要的内容。例如，您可以调用：

```
$repository::getTripsForUser($userID); 
```

该方法将执行将 4 个表连接在一起的 SQL 查询，并将结果转换为对象树。

您可能想利用其他人在解决此问题时所做的工作；有许多“对象关系映射”框架可以解决这个问题。我认为 ORM 解决方案是否让生活更轻松尚无定论 - 但值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:57:24.790

我认为您使事情复杂化，您不需要一次加载所有数据。

为什么要遍历*所有*行程，而您需要显示一个用户的行程？

OOP 的一种天真的但简单的方法：一个`User`具有检索用户相关旅行的方法的类。

它可以返回一个数组`Trip`，其中包含受邀用户的引用：

```
class User {
    private $id;
    public function __construct($id) {
        $this->id = $id;
    }
    public function getTrips() {
        $trips = array();
        // Run your query using $this->id to build the WHERE clause
        return $trips;
    }
}

class Trip {

    // Array of User objects invited to the trip        
    private $invited = array();

    // Other methods here to add/retrieve invited users

}

$user = new User(1);
foreach ($user->getTrips() as $trip) {
    // Do something with $trip
} 
```

理想情况下，`User`实例将存储在会话中

# telerik - 如何使用复选框控件设置 Kendo UI mvc 网格

> ID：13335264
> 
> 赞同：7
> 
> 时间：2012-11-11T20:43:59.977
> 
> 标签：telerik, telerik-grid, telerik-mvc, kendo-ui

我正在使用 Kendo UI MVC 网格。模型的属性之一是 bool，因此我需要在网格中将其显示为复选框。默认情况下，Kendo UI 在列中将其显示为“true”和“false”值。因此，您需要第一次单击以获取复选框，然后第二次单击以更改组合框的值。我没有从网格中获取默认值，而是设置了 ClientTemplate，所以我得到了复选框而不是“true”和“false”值。

```
 c.Bound(p => p.GiveUp)
                  .Title("Giveup")
                  .ClientTemplate("<input type='checkbox' id='GiveUp' name='GiveUp' #if(GiveUp){#checked#}# value='#=GiveUp#' />")
                  .Width(50); 
```

此网格使用批量编辑和网格内编辑 (GridEditMode.InCell)

```
 .Editable(x => x.Mode(GridEditMode.InCell))
      .DataSource(ds => ds.Ajax()
                            .ServerOperation(false)
                            .Events(events => events.Error("error"))
                            .Batch(true)
                            .Model(model => model.Id(p => p.Id))
                            .Read(read => read.Action("Orders", "Order").Data("formattedParameters")))) 
```

所以我希望用户能够点击复选框并更改我的模型的值，但不幸的是这不起作用。我可以直观地看到复选框的值已更改，但我没有看到将单元格标记为已更改的红色三角形，当我单击添加新项目按钮时，复选框中的值消失了。

请就我做错了什么提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T16:51:21.113

对于那些想看看完整代码是什么样子的人。

> 主页.cshtml

```
 @(Html.Kendo().Grid<OrdersViewModel>()
          .Name("Orders")
          .Columns(c =>
          {
              c.Bound(p => p.Error)
                  .Title("Error")
                  .ClientTemplate("<input type='checkbox' #= Error ? checked='checked': '' # class='chkbx' />")
                  .HtmlAttributes(new {style = "text-align: center"})
                  .Width(50);

<script>
    $(function() {
        $('#Orders').on('click', '.chkbx', function() {
            var checked = $(this).is(':checked');
            var grid = $('#Orders').data().kendoGrid;
            var dataItem = grid.dataItem($(this).closest('tr'));
            dataItem.set('Error', checked);
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T20:43:22.803

基本上，当您从网格添加/删除记录时，红色三角形总是消失（或者当您排序/分页/过滤等时），复选框不是红色三角形的问题。

现在对于复选框，如果您创建一个 ClientTemplate 这又是一个复选框，您将需要单击一次以将单元格置于编辑模式（您将看到没有区别，因为编辑器模板再次是一个复选框）所以您需要单击第二个是时候真正改变价值了。

我建议您作为最佳实践的是使用[此处](http://www.kendoui.com/code-library/mvc/grid/checkbox-column-and-incell-editing.aspx)介绍的方法- 它比使用上述方法应用额外的逻辑来处理两次单击要快得多（网格的操作更少）并且更容易。

# java - 访问具有名称的文件的正确方法

> ID：13335268
> 
> 赞同：0
> 
> 时间：2012-11-11T20:44:22.363
> 
> 标签：java, file, netbeans, file-io, path

好的，我需要有人为我清理事情。
我看到了一百种不同的访问文件的方法来读取它（`FileReader`）。

我尝试了所有这些，但找不到正确的方法。

如果我尝试：

```
String path = Engine.class.getResource("Words.txt").toString(); 
```

或者

```
URL url = getClass().getResource("Words.txt");
String path = url.getFile();
File myFile = new File(path); 
```

我直接去：

```
dispatchUncaughtException 
```

我只是不知道去哪里看，因为似乎没有人同意这样做的好方法。另外，这种异常是什么？**必须**
有一种简单的方法来做到这一点，因为这是一项简单的任务。我只想让我的程序看到我的项目文件夹中的文件。**`Words.txt``SRC`**

 *** * *

完整的代码，如果它有帮助：

```
public String GetWord()
{
 String [] Words = new String [10];
 int random = (int)(Math.random() * 10);
 URL url = getClass().getResource("Words.txt");
 String path = url.getFile();
 File myFile = new File(path);

  try 
  {
       FileReader myReader = new FileReader(myFile);
       BufferedReader textReader = new BufferedReader(myReader);

        for(int i = 0; i < 10; i++)
        {
           Words[i] = textReader.readLine();
        }
   } 
  catch(Exception e) 
  { 
        System.out.println(e.getMessage());
  }

  return Words[random];
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:50:09.283

```
String path = Engine.class.getResource("Words.txt").toString(); 
```

为此，您的文件必须与`Engine`类在同一个包中。因此，您可能希望将文件移动到类所在的包中。

如果要将文件移动到其他包中，则需要指定从类路径的根开始的位置。例如`/some/other/pkg/Words.txt`。

* * *

对于不在类路径中的文件，您需要完整路径以及文件名才能读取该文件。该`SRC`文件夹本身不是一个包，也不在类路径中。

在这种情况下，您可以执行以下操作：

```
FileInputStream fis = new FileInputStream("C:\\path\\to\\file\\Words.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fis)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:23:42.013

如果您使用 Java 7，我建议您使用[newBufferedReader](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newBufferedReader%28java.nio.file.Path,%20java.nio.charset.Charset%29)。它比 BufferedReader 更高效、更易于使用。我还修改了您的代码以匹配[Java 代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

**工作示例：**

```
public String getWord() {
    String[] words = new String[10];
    int random = (int) (Math.random() * 10);
    Path path = Paths.get("src" + System.getProperty("file.separator")
            + "Words.txt");

    try {
        BufferedReader textReader = Files.newBufferedReader(path,
                StandardCharsets.UTF_8);

        for (int i = 0; i < 10; i++) {
            words[i] = textReader.readLine();
        }
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }

    return words[random];
} 
```**

# python - 干净的POPO上的SQLAlchemy AssociationProxy？

> ID：13335269
> 
> 赞同：0
> 
> 时间：2012-11-11T20:44:28.083
> 
> 标签：python, sqlalchemy

使用非声明性 SQLAlchemy 设置，我可以在`association_proxy`无需修改模型类的情况下使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:55:56.917

初步破解：

（在发生 SQLAlchemy 映射等的模块中：）

```
import ModelClass
ModelClass.associationProperty = association_proxy()
mapper() #etc.. 
```

这可行，但我不确定这有多可靠。

# php - 在zend中复制一个特性

> ID：13335273
> 
> 赞同：0
> 
> 时间：2012-11-11T20:44:40.547
> 
> 标签：php, zend-framework

我一直在讨论 Zend_View 以及构成视图的各种类和接口。我试图在不以任何形式或形式使用 zend 的项目中复制的一件事是：

```
$this->view->variable = 'Hello world'; 
```

您可以在控制器中设置，然后执行：

```
echo $this->view->variable; 
```

我的最终目标是做类似的事情：

```
$this->variable = new SomeClass 
```

然后在其他地方，具体来说，做：

```
$this->variable->someMethod(); 
```

我的问题是：

*   在不使用全局变量的情况下，我将如何复制 zend 所做的事情来做类似的事情？
*   zend 如何在不实例化或说明视图是什么的情况下执行 $this->view 之类的操作？

这将帮助我理解如何传递变量或将对象从逻辑传递到视图，以及 php 如何允许 $this->view 之类的东西在视图中或不在视图中工作。

**注意**：这不是 Zend 特定的问题，“使用 zend”不是答案。我正在寻找复制特定功能。我的项目不以任何方式使用或附属于 zend。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:59:59.527

我不知道你究竟为什么要实现这一点，但作为一个超级简单的设置（这绝不适合作为 MVC 框架的基础），你可以看看这个：

```
<?php
class Controller
{
    private $view = null;

    public function __construct()
    {
        $this->view = new View();
        $this->view->someVar = "foobar";
    }

    public function render()
    {
        include "view.php";
    }
}

class View
{

}

$controller = new Controller();
$controller->render(); 
```

然后，在 view.php 中，您可以执行以下操作：

```
<?php
echo $this->view->someVar; 
```

当心：这段代码只显示了如何实现这样的结构，它根本没有任何用处；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:03:12.130

其实很简单。当您使用`include`, `require`, `eval`et al. 时，加载的代码将被带入当前范围。所以如果你有一个模板文件

**模板.php**

```
<span><?=$this->view->somevar?></span> 
```

**控制器.php**

```
<?php
class Controller
{
    private $view;

    public function doSomething()
    {
        $this->view->somevar = 'Hello World';
        include 'template.php';
    }
} 
```

**索引.php**

```
<?php
require 'Controller.php';
$oC = new Controller();
$oC->doSomething(); 
```

Blamo.., template.php is able to call `$this->view->somevar` as it is treated as part of Controller.php. Running `php index.php` on the CLI produces

```
<span>Hello World</span> 
```

To elaborate a tiny bit, if `$this->view` inside of Controller.php were a class you've defined rather than a simple instance of `stdClass` as in the above demonstration, and it had a function `someMethod`, you could call `$this->view->someMethod()` from template.php just the same.

# java - 有没有一种简单的方法可以在 Java 中打印图形菜单到控制台？

> ID：13335277
> 
> 赞同：1
> 
> 时间：2012-11-11T20:44:57.540
> 
> 标签：java, console-application

所以这是一个作业（我已经完成了），我只是把这部分遗漏了，因为当我在研究模式逻辑时，这似乎是一件很痛苦的事情。

作业要求您打印此菜单图形以帮助用户决定选择哪种模式。有没有一种简单的方法可以做到这一点，还是我只需要在那里获得大量的 printf/println 语句？编码似乎是一件非常尴尬的事情。这是一个例子：

![菜单](../Images/67627933fda0d6436d49082858789eba.png)

编辑：这仅适用于图形菜单。我知道我必须对实际模式使用循环（我已经这样做了）。任务基本上完成了，只是缺少这个菜单。我不知道如何最好地水平打印出这个图形，而不会笨拙地手动格式化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:31:12.167

文本 UI 已经实现了很多次。与其花一些时间尝试开发另一个基于文本的选择/导航组件，不如尝试使用可用的解决方案：

**功能齐全的文本 UI** -- [Lanterna](http://code.google.com/p/lanterna/)

![在此处输入图像描述](../Images/29c5ee2c87e50bd03ae0980db372ef32.png)

**[类壳](http://sourceforge.net/projects/jline/)**方法**——JLine**

 **![在此处输入图像描述](../Images/ff79432f332ef96520fb3c7aaee507a5.png)

还有另一个有趣的[答案](https://stackoverflow.com/questions/1321308/whats-the-best-way-to-get-text-user-interfaces-ncurses-like-functionality-in)，它提供了另外两个，但不是很好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:49:34.590

我认为这取决于你是否会被评估。

我的工程负责人告诉我，如果您不打算对其进行评估，那么获得正确的格式将会很繁琐，我会将其减少到 5`println()`秒左右，其实现只不过是打字。

在这种情况下，选择看似微不足道的练习并没有什么可羞耻的。当然，如果您的评估的第 2 部分要求您将其扩展到 6 行（或类似的），那么更可扩展的解决方案将是合适的。

我注意到（在您的编辑之后）您有生成上述内容的模式方法。在这种情况下，您可能希望适当地修改它们的输入/输出以促进上述操作。例如，也许他们可以接收“n”行的数组，并将模式逐行附加到这些行。您还需要一些对齐方法来为下一个模式生成器填充这些行。**

# iphone - 显示天、小时、分钟和秒的差异，然后实时更新？

> ID：13335281
> 
> 赞同：0
> 
> 时间：2012-11-11T20:45:28.130
> 
> 标签：iphone, ios, date, timer

我是菜鸟...我有

```
QuitTime.text = quitDate; 
```

哪个是过去的日期...如何显示天、小时、分钟和秒的差异，然后实时更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:01:53.070

您可以使用**NSDateComponents**

```
 NSDate *currentDate = [NSDate date];    

    NSCalendar *gregorian = [[[NSCalendar alloc]
                         initWithCalendarIdentifier:NSGregorianCalendar]autorelease];

     NSUInteger unitFlags = NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

     NSDateComponents *components = [gregorian components:unitFlags
                                            fromDate:quitDate
                                              toDate:currentDate options:0];
     NSLog(@"Component Month:%d",[component month]);
     NSLog(@"Component Day:%d",[component day]);
     NSLog(@"Component Hour:%d",[component hour]);
     NSLog(@"Component Mins:%d",[component minute]); 
```

参考：[两个 NSDate 对象之间的区别——结果也是一个 NSDate](https://stackoverflow.com/questions/5562594/difference-between-two-nsdate-objects-result-also-a-nsdate)

# javascript - 如何从链接对话框中删除协议（ckeditor）

> ID：13335287
> 
> 赞同：7
> 
> 时间：2012-11-11T20:46:16.487
> 
> 标签：javascript, hyperlink, dialog, ckeditor, protocols

我想删除ckeditor中“其他”对话框的选项（链接->协议）。

这让用户感到困惑；他们没有指定协议，然后链接在我的服务器上查找文件（而不是外部链接，使用户感到困惑）。

我尝试从 link.js 中删除“其他”选项，但这不起作用（仍然显示）。如果我从语言文件中删除它，我会得到“未定义”而不是其他。我尝试过搜索“ckeditor remove link protocol”之类的所有内容，但没有运气。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T21:59:40.993

我找到了解决方案 - 通过更改 config.js 文件。（我总是找几个小时，最后决定问 SO，然后得到一个新想法，稍后才找到解决方案><）

```
CKEDITOR.on( 'dialogDefinition', function( ev )
{
    // Take the dialog name and its definition from the event data.
    var dialogName = ev.data.name;
    var dialogDefinition = ev.data.definition;

    // Check if the definition is from the dialog we're
    // interested in (the 'link' dialog).
    if ( dialogName == 'link' )
    {
        dialogDefinition.getContents('info').get('protocol')['items'].splice(4, 1); 
```

这部分是有据可查的。谷歌搜索“删除下拉选项”更成功。

`dialogDefinition.getContents()`获取标签

`get('protocol')`获取输入项

`['items'].splice(4, 1)`获取上面返回的对象的 item 属性，并从列表中删除最后一个元素（我想我可以使用 pop 但无论如何）。所以已经没有`other`选择了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-26T06:53:46.493

```
CKEDITOR.on( 'dialogDefinition', function( ev )
{
    // Take the dialog name and its definition from the event data.
    var dialogName = ev.data.name;
    var dialogDefinition = ev.data.definition;

    // Check if the definition is from the dialog we're
    // interested in (the 'link' dialog).
    if ( dialogName == 'link' )
    {
    // Remove the 'Target' and 'Advanced' tabs from the 'Link' dialog.
    dialogDefinition.removeContents( 'target' );
    dialogDefinition.removeContents( 'advanced' );

    // Get a reference to the 'Link Info' tab.
    var infoTab = dialogDefinition.getContents( 'info' );
        infoTab.remove( 'protocol');

    }
}); 
```

将上述代码放在ckeditor插件的config.js中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T21:08:18.993

我们有类似的问题，我们还从下拉列表中删除了另一个选项。

修改 plugins\link\dialog 文件夹中的 link.js 文件中的以下文本

```
items:[['http://‎','http://'],['https://‎','https://'],['ftp://‎','ftp://'],['news://‎','news://'],[E.other,'']] 
```

有了这个

```
items:[['http://‎','http://'],['https://‎','https://'],['ftp://‎','ftp://'],['news://‎','news://']] 
```

它应该可以正常工作。请参阅下面的屏幕截图

![在此处输入图像描述](../Images/5de26c494d435fd68b122aedb1d735f8.png)

# java - Java：类之间的数组传输但值不传输？

> ID：13335291
> 
> 赞同：0
> 
> 时间：2012-11-11T20:47:01.060
> 
> 标签：java, class, arraylist, null

在下面的 Java 代码中，我在一个类中填充 ArrayList，然后在另一个类中使用 ArrayList。但是，数组传输但填充了空值。我已经调试了代码并且 ArrayList 确实被填充了，但它的值没有传输。

**头等舱：**

```
public String[] log = new String[100];
public ArrayList llog= new ArrayList();
int arraypos= 0;
public void nativeKeyPressed(NativeKeyEvent e) {
  if (e.getKeyCode() == NativeKeyEvent.VK_ESCAPE) {
    GlobalScreen.unregisterNativeHook();
  }
  System.out.println(" " + NativeKeyEvent.getKeyText(e.getKeyCode()).toLowerCase() + " ");
  llog.add(NativeKeyEvent.getKeyText(e.getKeyCode()).toString().toLowerCase());
  System.out.println("list:" + llog.get(arraypos));
  arraypos = arraypos + 1;  
}

public ArrayList getStrokes (){
  return this.llog;
} 
```

**二等：**

```
public void TeslaTimer()
{
  int delay = 10000; //1 sec = 1000 
  int period = 90000; // repeat every sec.

  Timer timer = new Timer();
  timer.scheduleAtFixedRate(new TimerTask()
  {
    @Override
    public void run()
    {
      GlobalKeyListener keyl = new GlobalKeyListener();
      ArrayList keylog=keyl.getStrokes();

      //TeslaLogger savetoFile = new TeslaLogger();
      //savetoFile.TeslaLogger(keylog);
      System.out.println("Ring Ring");
      for(int i =0; i < keylog.size(); i++){
        System.out.println(keylog.get(i));
      }
    }
  }, delay, period);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:02:00.410

`GlobalKeyListener`in的实例`TeslaTimer`与您要添加的实例不同 - 它们是不同的对象，每个对象都有自己的列表。

您必须使相同的实例`GlobalKeyListener`可用于您的`run()`方法，或者可能使用`static`变量（类似于全局变量）。

* * *

这是您可以用来使其工作的[单例模式：](http://en.wikipedia.org/wiki/Singleton_pattern)

```
public class GlobalKeyListener {

    // rest of class omitted
    private static GlobalKeyListener INSTANCE = new GlobalKeyListener();

    public static GlobalKeyListener getInstance() { 
        return INSTANCE;
    }

} 
```

然后在您需要在本地使用它的任何地方：

```
GlobalKeyListener globalKeyListener = GlobalKeyListener.getInstance();
globalKeyListener.getStrokes(); // etc 
```

然后所有代码将使用*相同*的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:57:16.090

您创建了一个新的 GlobalKeyListener，它创建了 GlobalKeyListener 类的一个实例。这个类的实例将运行以下行： public ArrayList llog= new ArrayList(); （从而创建一个没有元素的新数组列表）。然后尝试获取数组列表 keylog=keyl.getStrokes()，并给出空数组列表。如果您希望数组列表在类的实例化之间保持不变，请尝试将 llog 数组列表设为静态。这将使您的第一个类的所有实例共享 llog 数组。这有意义吗？

# c# - 在 C# 中继承 List<> 并覆盖构造函数

> ID：13335292
> 
> 赞同：1
> 
> 时间：2012-11-11T20:47:14.210
> 
> 标签：c#, list, constructor, subclass

我正在尝试围绕 List 创建一个包装器来做一些我想要的特定事情，例如计算最大最小值、从某些元素中提取特定值等。

我从

```
 public struct datum {
      public UInt32[] chan;
      public UInt64 sample_number;
      public UInt32 time;
      public UInt32 source_sector;
    } 

    public class dataSet : List<datum> {
     bool dirty=true;
     ....
    } 
```

这些方法通常是这样的（我想知道列表是否已被修改，因为我有一个 max()/min() 函数，该函数仅在数据被修改时解析数据并缓存值以在列表未修改时重用已修改）

```
 public new void Add(datum x ) {
        base.Add(x);
        this.dirty = true;
    } 
```

但是，我不确定如何创建构造函数。这种语法不起作用..我怎样才能得到这种行为？

```
 public dataSet(int count) {
        this = (dataSet) new List<datum>(count);
    } 
```

我也有这个构造函数，虽然未经测试，但它似乎工作正常（没有编译错误）

```
 public dataSet(List<datum> data) {
        this.AddRange(data);
    } 
```

我看到一篇文章说你应该使用 Collection 并且 List 用于提高速度。虽然我需要速度，但我不确定为什么 Collection 会更好？

- 更新 -

我不想使用 linq，因为您无法像这样高效地创建同时计算 max/min 的东西：

```
 public void recalculateMaxMin() {
        foreach (var d in data) {
            for (int i = 0; i < 16; i++) {
                if (d.chan[i] > max[i]) max[i] = d.chan[i];
                if (d.chan[i] < min[i]) min[i] = d.chan[i];
            }
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T20:51:23.090

> 我正在尝试围绕 List 创建一个包装器来做一些我想要的特定事情，例如计算最大最小值、从某些元素中提取特定值等。

不。只需使用 LINQ to Objects。这就是它的*设计目的*：

```
var list = new List<int> { 10, 20, 30 };
var average = list.Average();
var max = list.Max();
// etc 
```

一般来说，我建议不要从任何地方派生`List<T>`——这不是它的设计目的。但是，如果必须，您只需从一个构造函数链接到一个基本构造函数：

```
public dataSet(int count) : base(count)
{
    // Add in any extra code you want to here. Probably none in this case.
    // It would execute *after* the base constructor call.
} 
```

看我的有关构造函数链接的更多信息，[关于构造函数的文章。](http://www.yoda.arachsys.com/csharp/constructors.html)

（我还*强烈*建议您更改名称 -`dataSet`不符合 .NET 命名约定，并且对大多数 .NET 开发人员`DataSet`来说意味着[完全不同的东西。）](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:51:04.420

你永远不能`"this"`在 C# 中设置一些东西。我想你正在寻找这个：

```
public dataSet(int count)
     : base(count)
{ } 
```

但是在我看来，你应该看看`"System.Linq"`命名空间。我认为你试图实现的东西已经由微软完成了。'Select'、'Join'、'Where' 和许多其他子句已经在 Linq 中实现。您也可以使用`"INotifyCollectionChanged"`接口来实现脏东西。

以下是一些参考资料：

1.  [INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)
2.  [林克](http://msdn.microsoft.com/en-us/library/bb397897.aspx)

如果您真的需要实现一个具有新行为的完整 List 类，那么实现`"System.Collections.Generic.IList"`接口是唯一能以先进和完美的方式震撼您的想法的方法。它比从 List 类继承并尝试更改您无权访问的所有内容更具可定制性。

希望能帮助到你

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T20:51:16.160

您可以使用调用基类型的构造函数`base()`

```
public dataSet(int count) : base(count) 
{  
    // no need to implement anything here. base(count) will call the base
    // type's constructor
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T20:50:04.110

```
public dataSet(int count) 
    : base(count)  {
} 
```

# c# - 用字节中的第二个数字替换第一个数字

> ID：13335293
> 
> 赞同：1
> 
> 时间：2012-11-11T20:47:14.443
> 
> 标签：c#, .net

我想要做的是遍历字节数组中的值，获取每个值的第一个数字并将其位置与第二个数字交换，所以 35 将是 53，24 将是 42 .. 我几乎可以做到这一点但是我必须将所有内容都转换为字符串，这似乎有点矫枉过正

我已经尝试了一段时间，但到目前为止，我只发现我可以将所有内容转换为字符串然后处理它们，只是看起来有点笨拙..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T20:50:12.170

听起来您想交换每个字节中的高半字节和低*半*字节。

```
0x35; // High nibble = 3,  Low Nibble = 5 
```

为此，您要将高半字节右移 4 位（使其成为低半字节），并将低半字节左移 4 位（使其成为高半字节）。

```
var ar = new byte[] { 0x35, 0x24 };

for (int i=0; i<ar.Length; i++) {
    byte b = ar[i];
    b =  (b>>4) | ((b&0x0F)<<4);
    ar[i] = b;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:56:37.930

```
byte nmbBase =16; //or any other 10 for decimal
byte firstDigit = number /nmbBase;
byte secondDigit = number % nmbBase;
number = secondDigit*numberBase + firstDigit; 
```

这是手机发的，如有错误请见谅。你应该去你应该去的方向。

# jsf - 'null Converter' 的转换错误设置值“UserID”

> ID：13335295
> 
> 赞同：4
> 
> 时间：2012-11-11T20:47:38.417
> 
> 标签：jsf, jakarta-ee, metadata, javabeans, converter

尝试从应用程序的表中删除或编辑用户时出现转换错误。该值正在从元数据中传递`listUser.xhmtl`到`deleteUser.xhtml`页面。该值正在元数据中传递，但由于某种原因，在调用删除操作时，我得到了`Conversion Error setting value "someemail@somedomain.com" for 'null Converter'`. 用户 ID 是一个字符串。

这是请求 userDelete.xhmtl 后的 url：

```
http://localhost:8080/lavpWebApp/user/deleteUser.xhtml?user=someemail%40somedomain.com 
```

这是 userList.xhmtl 的简化：

```
<h:column>
                            <f:facet name="header">Edit</f:facet>
                            <h:link outcome="/user/editUser.xhtml" value="Edit User">
                                <f:param name="user" value="#{item.email}"/>
                            </h:link>                            
                        </h:column>

                        <h:column>
                            <f:facet name="header">Delete</f:facet>
                            <h:link outcome="/user/deleteUser.xhtml" value="Delete User">
                                <f:param name="user" value="#{item.email}"/>
                            </h:link>
                        </h:column> 
```

这是 userDelete.xhtml 的简化：

```
<f:metadata>
        <f:viewParam name="user" value="#{userController.user}" converter="#{userConverter}"/>
    </f:metadata>

    <h:body>
        Do you want to delete #{userController.user.name}?
        <h:form>
            <h:commandButton action="#{userController.deleteUser()}"
                             value="Delete"/>
            <h:commandButton action="#{userController.doCancelDeleteUser()}"
                             value ="Cancel"/>
        </h:form>
    </h:body> 
```

这是转换器类：

```
@ManagedBean
@FacesConverter(value="userConverter")
public class UserConverter implements Converter{

    @EJB
    private UserSellerEJB userEjb;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if (value == null || value.isEmpty())
        {
            return null;
        }
        if(!value.matches("\\d+"))
        {
            throw new ConverterException("The value is not a valid email: " + value);
        }

        String id = value.toString();
        return userEjb.findUserById(id);

    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if(value == null)
        {
            return null;
        }

        if(!(value instanceof UserSeller))
        {
            throw new ConverterException("The value is not a User: " + value);            
        }

        String id = ((UserSeller) value).getEmail();
        return (id != null) ? id.toString() : null;
    }

} 
```

这是 userController 类的简化：

```
@Named
@RequestScoped
public class UserController{

    @EJB
    private UserSellerEJB userEJB;

    private UserSeller user = new UserSeller(); 
    private List<UserSeller> usersList = new ArrayList<UserSeller>();

    // ------------------------------------------------------------- Constructor
    public UserController() {
    }

    // -------------------------------------------------------- Business Methods

    public String doCreateUser()
    {
        user = userEJB.createSeller(user);
        usersList = userEJB.findAllSellers();
        return "listUser?faces-redirect=true";        
    }

        // update user

        public void PreRenderView()
        {
            if(user == null)
            {
                user = new UserSeller();
            }            
        }

        public String doUpdateUser()
        {
            if(user.getEmail() != null)
            {
                userEJB.updateSeller(user);
            }
            else
            {
                userEJB.createSeller(user);
            }

            return "listUser?faces-redirect=true";
        }

    public String deleteUser()
    {
        userEJB.deleteSeller(user);
        return "listUser?faces-redirect=true";
    }

    public String doCancelDeleteUser()
    {
        return "listUser?faces-redirect=true";
    }

    @PostConstruct
    public void init()
    {
        usersList = userEJB.findAllSellers();       
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:50:16.410

异常消息中的`null converter`表示找不到转换器实例。由于您通过 将转换器引用为托管 bean `converter="#{userConverter}`，因此只有在使用注释`@javax.faces.bean.ManagedBean`并且该类位于 WAR 中（因此不在 EJB/EAR 或其他地方！）时才能找到它。

这个`@FacesConverter`结构中没有使用注释，实际上是多余的——只会让初学者感到困惑。删除该注释。`@EJB`确实只在托管 bean 中起作用。

如果真的徒劳无功（但我无法解释原因），请尝试通过 CDI 来管理它：用`@ManagedBean`CDI注释替换 JSF`@Named`注释。您显然已经通过 CDI 成功管理了前端控制器 bean。

* * *

**与具体问题无关**，转换器似乎被设计为基于技术 ID（数据库主键）而不是电子邮件地址进行转换。电子邮件地址永远不能匹配`\d+`（这是“仅限数字”的正则表达式）。确保您没有将电子邮件地址与 ID 混淆。

# google-chrome - chrome mac 与 firefox 和 chrome pc 中的填充不同

> ID：13335304
> 
> 赞同：1
> 
> 时间：2012-11-11T20:48:37.480
> 
> 标签：google-chrome, firefox, padding, platform, platform-detection

我正在尝试将导航与我在此处创建的网站上的以下横幅对齐：`http://35.9.51.41`

我已经能够使它在我的 Mac 和 IE 上的 Chrome 和 Safari 中对齐，但在 Firefox 或任何使用 Chrome 或 Firefox 的 PC 上仍然不对齐。这让我头大。有什么建议么？

我在这里用导航的宽度填充了确定：

```
#nv-tabs a {
     padding:0 33px 0 34px;
     text-decoration:none;
     cursor: pointer; /* IE 7 bug-fix */
     color:#FFFFFF!important;
     display:block;
     background:none;
     line-height: 29px; 
     z-index:100;
     font-family: Arial, sans-serif;
     text-transform:uppercase;
     font-size:13px;
     font-weight:normal;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:02:42.627

定义一个宽度，它应该对您的问题进行排序，并查看 box-sizing:border-box

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:03:15.890

也许尝试使用这些定义您的浏览器及其版本的函数，并在您的html标签中编写，`<html class="<?php echo getBrowser();?>">`然后在您的css中您可以为不同的浏览器编写样式，例如，如果您使用的是chrome 23，您将拥有html标签喜欢`<html class="chrm chrm23">`，所以在你的CSS中你可以写

.chrm .yourClass { /* 这里的属性*/ }

```
function getBrowser() {
    global $_SERVER;

    $firefoxStart = strrpos($_SERVER['HTTP_USER_AGENT'], 'Firefox');
    $chromeStart = strrpos($_SERVER['HTTP_USER_AGENT'], 'Chrome');
    $safariStart = strrpos($_SERVER['HTTP_USER_AGENT'], 'Safari');

    if ($firefoxStart !== false){
        $version = $this->getVersion($firefoxStart, 8);
        return "ff ff" . $version;
    }elseif ($chromeStart !== false){
        $version = $this->getVersion($chromeStart, 7);
        return "chrm chrm" . $version;
    }elseif ($safariStart != false){
        $version = $this->getVersion($safariStart, 7);
        return "sfr sfr" . $version;
    }

}

   private function getVersion($start, $length){
        global $_SERVER;

            $end = strpos($_SERVER['HTTP_USER_AGENT'], ' ', $start);
            if ($end === false){
                $end = strlen($_SERVER['HTTP_USER_AGENT']);
            }

            $versionStr = substr($_SERVER['HTTP_USER_AGENT'], $start + $length, $end - $start - $length);
            $version = floatval($versionStr);
            $version = str_replace('.', '', $version);

            return $version;

    } 
```

# python - Python 模块，将值传递给 args

> ID：13335309
> 
> 赞同：1
> 
> 时间：2012-11-11T20:49:18.323
> 
> 标签：python

我正在学习 python，目前正在尝试将值从输入传递到我编写的模块的 args，但我不知道如何开始。

有人可以给我一些建议吗？

**这是我正在调用的模块**

```
#!/usr/bin/python

class Employee:
    'Practice class'
    empCount = 0

    def __init__(self, salary):
            self.salary = salary
            Employee.empCount += 1
    def displayCount(self):
            print "Total Employees %d" % Employee.empCount

    def displayEmployee(self):
            print "Salary: ", self.salary

class Att(Employee):
    'Defines attributes for Employees'
    def __init__(self, Age, Name, Sex):
            self.Age = Age
            self.Name = Name
            self.Sex = Sex

    def display(self):
            print "Name: ", self.Name + "\nAge: ", self.Age,  "\nSex: ", self.Sex 
```

**这是我用来调用并将值传递给上述模块中的 args 的代码**

```
#!/usr/bin/python

import Employee

def Collection1():
    while True:
            Employee.Age = int(raw_input("How old are you? "))
            if Employee.Age == str(Employee.Age):

                    print "You entered " + Employee.Age + " Please enter a number"
            elif Employee.Age  > 10:
                    break
            elif Employee.Age > 100:
                    print "Please enter a sensible age"
            else:
                    print "Please enter an age greater than 10"
    return str(Employee.Age)

def Collection2():
    Employee.Name = raw_input("What is your name? ")
    return Employee.Name

def Collection3():
    while True:
            Employee.Sex = str(raw_input("Are you a man or a woman? "))
            if Employee.Sex == "man":
                    Employee.Sex = "man"
                    return Employee.Sex
                    break
            elif Employee.Sex == "woman":
                    Employee.Sex = "woman"
                    return Employee.Sex
                    break
            else:
                    print "Please enter man or woman "
Attributes = Employee.Employee()

Collection1()
Collection2()
Collection3()

Attributes.displayEmployee() 
```

我猜我需要从用户那里获取输入并将其放在类的变量中。我试过了，但我猜我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:03:25.133

`Employee.Age = int(raw_input("How old are you? "))` 在模块中设置变量而不是使用局部变量并设置您需要在 Collection1() 函数**之外设置的任何内容是没有用的。**请注意，您**没有**设置员工（对象）属性，而是模块的 - 这可能不是您想要的。此外，按照惯例，函数应该以首字母小写命名。

你的继承模型有点奇怪。为什么员工属性在不同的（子）类中？通常，属性进入主类构造函数。如果您**真的**想为属性使用单独的类，则在这种情况下根本不应该使用子类。

**编辑** 这是我认为你打算做的事情：

```
#!/usr/bin/python

class Employee:
    def __init__(self, salary, age, name, sex):
            self.salary =   salary
            self.age=       age
            self.name=      name
            self.sex=       sex
            #Employee.empCount += 1 #don't do this. you should count instances OUTSIDE

    def __str__(self):
            return "Employee<Name: {0}, Age: {1}, Sex: {2}, Salary: {3}>".format( self.name, self.age, self.sex, self.salary)

def getAge():
    while True:
        try:
            s=raw_input("How old are you? ")
            age = int(s)
            if age > 100:
                print "Please enter a sensible age"
            elif age<=10:
                print "Please enter an age greater than 10"
            else:
                return age
        except ValueError:
            print "You entered " + s + " Please enter a number"

def getName():
    return raw_input("What is your name? ")

def getSex():
    while True:
        sex = str(raw_input("Are you a man or a woman? "))
        if not sex in ("man", "woman"):
            print "Please enter man or woman "
        else:
            return sex

age= getAge()
name= getName()
sex= getSex()
salary=100000

employee = Employee(salary, age, name, sex)
print employee 
```

if you want the Employee in a different file (module), just put it there and from your main code run `from Employee import Employee` (the first is the module, the second is the class).

# objective-c - 换算速度：m/s 到 km/h

> ID：13335310
> 
> 赞同：4
> 
> 时间：2012-11-11T20:49:21.597
> 
> 标签：objective-c

我是 Objective-C 的新手，在将 MPS 转换为 KPH 方面需要一些帮助。

以下是我当前的速度字符串。有人可以指出还需要什么吗？

```
speed.text = newLocation.speed < 0 ? @"N/A": [NSString stringWithFormat:@"%d", (int)newLocation.speed]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T21:00:54.250

m/s 到 km/h = (m/s) * (60*60)/1000

或 1m/s = 3.6km/h

```
float speedInKilometersPerHour = newLocation.speed*3.6;
if (speedInKilometersPerHour!=0) {speed.text = [NSString stringWithFormat:@"%f", speedInKilometersPerHour];}
else speed.text = [NSString stringWithFormat:@"No Data Available"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T21:08:52.987

这是一种方法（我已将其格式化为更具可读性）：

```
if (newLocation.speed < 0)
    speed.text = @"N/A";
else
    speed.text = [NSString stringWithFormat:@"%d", (int)(newLocation.speed * 3.6)]; 
```

但是请注意，您确实应该使用数字格式化程序将数字转换为本地化字符串，然后再将其显示给用户，以便在他们自己的语言环境中正确格式化：

```
if (newLocation.speed < 0)
{
    speed.text = @"N/A";
} 
else
{
    int speedKPH                    = (int)(newLocation.speed * 3.6);
    NSNumber *number                = [NSNumber numberWithInt:speedKPH];

    NSNumberFormatter *formatter    = [NSNumberFormatter new];
    formatter.numberStyle           = NSNumberFormatterDecimalStyle;

    speed.text                      = [formatter stringFromNumber:number];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T21:23:45.887

假设您的意思是每秒米到每小时公里，并且您希望我们修改您现有的三元组，那么这将完成这项工作。

```
speed.text = (newLocation.speed < 0) ? (@"N/A") : ([NSString stringWithFormat:@"%d", (int)(newLocation.speed*3.6)]); 
```

如果 MPS 中的原始速度小于零，则不适用，否则将其转换。

您还应该将结果四舍五入到最接近的整数，以便更准确。

```
speed.text = (newLocation.speed < 0) ? (@"N/A") : ([NSString stringWithFormat:@"%d", (int)((newLocation.speed*3.6)+0.5)]); 
```

# jquery - 正则表达式允许在一个范围内从负到正的数字范围，并允许 2 位小数

> ID：13335313
> 
> 赞同：1
> 
> 时间：2012-11-11T20:49:34.073
> 
> 标签：jquery, regex

我正在尝试复制一个在代码中使用此模式匹配的函数

```
^1000([.][0]{1,3})?$|^\d{1,3}$|^\d{1,3}([.]\d{1,3})$|^([.]\d{1,3})$ 
```

此正则表达式允许从 0 到 1000 的数字，但也是

```
\b([0-9]{1,3}|1000)\b 
```

但是，随着更新，我需要允许从 -1000 到 1000 的负值以及该范围内的 2 个十进制值，我完全迷失了我需要用原始模式弄清楚的内容。

我将不胜感激对代码中使用的模式的任何解释，因为我必须更新更多范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:57:41.117

两个正则表达式之间有一些区别。首先，原始要求数字是字符串中的所有内容。第二个将在字符串中找到任何单独的数字。例子：

```
1000.00 USD 
```

第一个正则表达式根本不匹配，尽管数字是指定的格式，因为`$`锚无法匹配。第二个正则表达式将匹配，但只有`1000`.

现在取决于您是否只想匹配完整字符串或子字符串，这可能是您正在寻找的：

```
^-?(?:\d{1,3}(?:[.]\d{1,2})?|1000(?:[.]0{1,2})?)$ 
```

或者

```
\b-?(?:\d{1,3}(?:[.]\d{1,2})?|1000(?:[.]0{1,2})?)\b 
```

[您可以在这个工作演示](http://regexpal.com/?flags=gm&regex=%5E-%3F%28%3F%3A%5Cd%7B1%2C3%7D%28%3F%3A%5B.%5D%5Cd%7B1%2C2%7D%29%3F%7C1000%28%3F%3A%5B.%5D0%7B1%2C2%7D%29%3F%29%24&input=1000.00%0A1000.000%0A1000.0%0A1000.%0A1000%0A1000.01%0A0.00%0A0%0A123.12%0A456.4%0A789%0A00.00%0A012.00%0A-1000.00%0A-1000.000%0A-1000.0%0A-1000.%0A-1000%0A-1000.01%0A-0.00%0A-0%0A-123.12%0A-456.4%0A-789%0A-00.00%0A-012.00)中测试它们。

演示中也显示的主要警告是允许使用前导零。

# java - 从 Java 中的 SQLite 值创建菜单

> ID：13335316
> 
> 赞同：0
> 
> 时间：2012-11-11T20:49:39.613
> 
> 标签：java, android, sqlite

我正在尝试`ListMenu`从 SQLite 数据库创建一个使用数据来定义每个`MenuItem`. 所以在一个名为`menu.java`我的类中定义了数组

```
String classes [] = {}; 
```

它应该包含每个菜单项名称。

在 DBAdapter 类中，我创建了一个函数，以便用户可以将信息插入表中（顺便说一句，这一切都很好）。

```
public long insertContact(String name, String code, String location, String comments, int days, int start, int end, String type) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_CODE, code);
        initialValues.put(KEY_LOCATION, location);
        initialValues.put(KEY_COMMENTS, comments);
        initialValues.put(KEY_DAYS, days);
        initialValues.put(KEY_START, start);
        initialValues.put(KEY_END, end);
        initialValues.put(KEY_TYPE, type);
        return db.insert(DATABASE_TABLE, null, initialValues);
    } 
```

`String`我需要用插入到 KEY_NAME 中的s 来填充该`String`数组。有谁知道这是否可能？

非常感谢你们的帮助。

如果我通过 Sam/Mango 实现该功能，程序会崩溃，是我使用不正确还是由于数组大小未知而导致的错误？

```
DBAdapter db = new DBAdapter(this);
String classes [] = db.getClasses(); 
```

编辑：我应该提到，如果我手动定义数组：

```
String classes [] = {"test1", "test2", "test3", etc}; 
```

它工作正常。错误是 NullPointerException

这是 logcat（对格式感到抱歉）。我没有用 db = helper.getReadableDatabase(); 初始化 在 getClasses() 函数中，但不幸的是它没有解决问题。

```
11-11 22:53:39.117: D/dalvikvm(17856): Late-enabling CheckJNI
11-11 22:53:39.297: D/TextLayoutCache(17856): Using debug level: 0 - Debug Enabled: 0
11-11 22:53:39.337: D/libEGL(17856): loaded /system/lib/egl/libGLES_android.so
11-11 22:53:39.337: D/libEGL(17856): loaded /system/lib/egl/libEGL_adreno200.so
11-11 22:53:39.357: D/libEGL(17856): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
11-11 22:53:39.357: D/libEGL(17856): loaded /system/lib/egl/libGLESv2_adreno200.so
11-11 22:53:39.387: I/Adreno200-EGLSUB(17856): <ConfigWindowMatch:2078>: Format RGBA_8888.
11-11 22:53:39.407: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x5c66d000 size:36593664 offset:32825344 fd:65
11-11 22:53:39.417: E/(17856): Can't open file for reading
11-11 22:53:39.417: E/(17856): Can't open file for reading
11-11 22:53:39.417: D/OpenGLRenderer(17856): Enabling debug mode 0
11-11 22:53:39.477: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x5ecd3000 size:40361984 offset:36593664 fd:68
11-11 22:53:40.507: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x61451000 size:7254016 offset:3485696 fd:71
11-11 22:53:41.077: I/Adreno200-EGLSUB(17856): <ConfigWindowMatch:2078>: Format RGBA_8888.
11-11 22:53:41.077: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x61c4c000 size:7725056 offset:7254016 fd:74
11-11 22:53:41.097: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x623aa000 size:8196096 offset:7725056 fd:80
11-11 22:53:41.937: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x62b7b000 size:8667136 offset:8196096 fd:83
11-11 22:53:41.977: D/memalloc(17856): /dev/pmem: Unmapping buffer base:0x61c4c000 size:7725056 offset:7254016
11-11 22:53:41.977: D/memalloc(17856): /dev/pmem: Unmapping buffer base:0x623aa000 size:8196096 offset:7725056
11-11 22:53:41.977: D/memalloc(17856): /dev/pmem: Unmapping buffer base:0x62b7b000 size:8667136 offset:8196096
11-11 22:53:42.167: I/Adreno200-EGLSUB(17856): <ConfigWindowMatch:2078>: Format RGBA_8888.
11-11 22:53:42.177: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x61c5d000 size:17084416 offset:13316096 fd:74
11-11 22:53:42.317: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x63853000 size:20852736 offset:17084416 fd:80
11-11 22:53:42.357: D/OpenGLRenderer(17856): Flushing caches (mode 0)
11-11 22:53:42.357: D/memalloc(17856): /dev/pmem: Unmapping buffer base:0x5c66d000 size:36593664 offset:32825344
11-11 22:53:42.357: D/memalloc(17856): /dev/pmem: Unmapping buffer base:0x5ecd3000 size:40361984 offset:36593664
11-11 22:53:42.367: D/memalloc(17856): /dev/pmem: Unmapping buffer base:0x61451000 size:7254016 offset:3485696
11-11 22:53:42.757: D/memalloc(17856): /dev/pmem: Mapped buffer base:0x5c56d000 size:24621056 offset:20852736 fd:65
11-11 22:53:44.247: D/AndroidRuntime(17856): Shutting down VM
11-11 22:53:44.247: W/dalvikvm(17856): threadid=1: thread exiting with uncaught exception (group=0x40ac3210)
11-11 22:53:44.257: E/AndroidRuntime(17856): FATAL EXCEPTION: main
11-11 22:53:44.257: E/AndroidRuntime(17856): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{x.x.timetable/x.x.timetable.menu}: java.lang.NullPointerException
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.os.Looper.loop(Looper.java:137)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.app.ActivityThread.main(ActivityThread.java:4441)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at java.lang.reflect.Method.invokeNative(Native Method)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at java.lang.reflect.Method.invoke(Method.java:511)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at dalvik.system.NativeStart.main(Native Method)
11-11 22:53:44.257: E/AndroidRuntime(17856): Caused by: java.lang.NullPointerException
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at x.x.timetable.DBAdapter.getClasses(DBAdapter.java:151)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at x.x.timetable.menu.<init>(menu.java:15)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at java.lang.Class.newInstanceImpl(Native Method)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at java.lang.Class.newInstance(Class.java:1319)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-11 22:53:44.257: E/AndroidRuntime(17856):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
11-11 22:53:44.257: E/AndroidRuntime(17856):    ... 11 more
11-11 22:53:46.527: I/Process(17856): Sending signal. PID: 17856 SIG: 9

package x.x.timetable;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    static final String KEY_ROWID = "_id";
    static final String KEY_NAME = "name";
    static final String KEY_CODE = "code";
    static final String KEY_LOCATION = "location";
    static final String KEY_COMMENTS = "comments";
    static final String KEY_DAYS = "days";
    static final String KEY_START = "start";
    static final String KEY_END = "end";
    static final String KEY_TYPE = "type";

    static final String TAG = "DBAdapter";

    static final String DATABASE_NAME = "MyDB";
    static final String DATABASE_TABLE = "timetable";
    static final int DATABASE_VERSION = 2;

    static final String DATABASE_CREATE =
        "create table timetable (_id integer primary key autoincrement, "
        + "name text not null, code text not null, location text not null, comments text not null, days INTEGER not null, start INTEGER not null, end INTEGER not null, type text not null);";

    final Context context;

    DatabaseHelper DBHelper;
    SQLiteDatabase db;

    public DBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS timetable");
            db.execSQL("DROP TABLE IF EXISTS contacts");
            onCreate(db);
        }
    }

    //---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---
    public void close() 
    {
        DBHelper.close();
    }

    public int count(){
        db = DBHelper.getWritableDatabase();
        String count = "SELECT count(*) FROM table";
        Cursor mcursor = db.rawQuery(count, null);
        int icount = mcursor.getInt(0);
        return icount;
    }

    //---insert a contact into the database---
    public long insertContact(String name, String code, String location, String comments, int days, int start, int end, String type) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_CODE, code);
        initialValues.put(KEY_LOCATION, location);
        initialValues.put(KEY_COMMENTS, comments);
        initialValues.put(KEY_DAYS, days);
        initialValues.put(KEY_START, start);
        initialValues.put(KEY_END, end);
        initialValues.put(KEY_TYPE, type);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular contact---
    public boolean deleteContact(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    //---retrieves all the Timetable---
    public Cursor getAllTimetable()
    {
        return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
                KEY_CODE, KEY_LOCATION, KEY_COMMENTS, KEY_DAYS, KEY_START, KEY_END, KEY_TYPE}, null, null, null, null, null);
    }

    //---retrieves a particular contact---
    public Cursor getContact(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                KEY_NAME, KEY_CODE, KEY_LOCATION, KEY_COMMENTS, KEY_DAYS, KEY_START, KEY_END, KEY_TYPE}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a contact---
    public boolean updateContact(long rowId, String name, String code, String location, String comments, int days, int start, int end, String type) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_NAME, name);
        args.put(KEY_CODE, code);
        args.put(KEY_LOCATION, location);
        args.put(KEY_COMMENTS, comments);
        args.put(KEY_DAYS, days);
        args.put(KEY_START, start);
        args.put(KEY_END, end);
        args.put(KEY_TYPE, type);
        return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public String[] getClasses() {

        db = DBHelper.getWritableDatabase();
        String[] columns = {KEY_NAME};
        Cursor c = db.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String[] classes = new String [c.getCount()];
        int i = 0;
        while (c.moveToNext()) {
            classes[i] = c.getString(0);
            i++;
        }
        c.close();
        return classes; 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:04:20.280

你正在寻找

```
ArrayList<String> list= new ArrayList<String>();
list.add(name); 
```

当您不知道需要在数据结构中添加的长度或多少元素时，在许多情况下（不是全部）不应该使用数组。请改用 ArrayList。从列表中获取名称

```
list.get(ELEMENT_AT); 
```

如果您必须需要一个数组，请先填充 List，然后用于`List.toArray();`取回一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:06:15.253

绝对有可能。你可以在你的数据库类中创建一个方法，在字符串数组中返回你的值。

```
public String[] getClasses() {
    String[] columns = {KEY_NAME};
    Cursor c = db.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String[] classes = new String [c.getCount()];
    int i = 0;
    while (c.moveToNext()) {
        classes[i] = c.getString(0);
        i++;
    }
    c.close();
    return classes; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:44:25.663

根据我们在评论中的讨论，我假设您想在以下位置执行类似的操作`onCreate()`：

```
public class menu extends ListActivity{
    DBAdapter db;
    String[] classes; // = {"test", "test11", "test1", "test2", "test3",};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        db = new DBAdapter(this);
        db.open();
        classes = db.getClasses();
        setListAdapter(new ArrayAdapter<String>(menu.this, android.R.layout.simple_list_item_1, classes));
    } 
```

这显然是使用了我帮助芒果写的方法。

# jquery - 通过 AJAX 请求下载文件

> ID：13335317
> 
> 赞同：3
> 
> 时间：2012-11-11T20:49:40.017
> 
> 标签：jquery, ruby-on-rails, ajax

我正在使用 AJAX 向`POST`我的 Rails 控制器提交请求

```
$("#submit_form").submit(function(event) {
  ...
  /* Send the data using post*/
    $.post( "/download", { s: term },
      function( data ) {}
    );
}); 
```

控制器使用 Rails`send_file`方法返回一个文件。但是，当我单击表单按钮时，没有文件下载给我，即使响应标题显示

```
Content-Disposition:attachment; filename="pic.jpg" 
```

我怎样才能得到文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:05:13.897

AFAIK 不可能让用户使用 AJAX 请求下载文件，我认为没有理由这样做，因为用户在下载文件时将留在页面上。

对于要下载的文件，响应必须由 Web 浏览器而不是 JavaScript 代码来处理。

# c - 我应该为 ruby Fixnum -> matlab mwSize 使用 SWIG 类型映射吗？

> ID：13335318
> 
> 赞同：3
> 
> 时间：2012-11-11T20:49:52.827
> 
> 标签：c, ruby, swig, matlab-deployment, matlab-engine

我正在尝试更新一个使用 SWIG 构建从 ruby​​ 到 matlab 的接口的项目。matlab C-API 已更改，现在我在运行时收到以下错误。

> `mxCreateDoubleMatrix_730'：mwSize 类型的预期参数 0，但得到了 Fixnum 20 (TypeError)

我发现在 tmwtypes.h 中定义了 mwSize，它没有包含在 SWIG 接口文件中：

```
tmwtypes.h:typedef int mwSize;
tmwtypes.h:typedef size_t    mwSize;         /* unsigned pointer-width integer */ 
```

但是，如果我将 tmwtypes.h 添加到 SWIG 接口的 include 部分，我仍然会收到 TypeError，如果我将它添加到 include 和 parse 部分，我会收到以下编译错误：

> 错误：CPP #error ""此代码必须使用带符号整数值的 2 的补码表示形式编译""。使用 -cpperraswarn 选项继续 swig 处理。

放弃 tmwtypes.h，我的解决方案是将以下内容添加到 SWIG 接口文件中。

```
%typemap(in) mwSize {
   $1 = NUM2INT($input);
} 
```

您可以在以下位置查看完整的 SWIG 接口文件： [https ://github.com/morrifeldman/matlab-ruby/blob/master/ext/matlab_api/matlab_api.i](https://github.com/morrifeldman/matlab-ruby/blob/master/ext/matlab_api/matlab_api.i)

添加此类型映射后，程序编译并且似乎可以完美运行。

我有两个相关的问题想回答：

1.  是我使用 mwSize 遇到的 TypeError 的正确解决方案。我应该尝试别的东西吗？

2.  我认为包括 tmwtypes.h 会解决我的问题。为什么它不起作用？

作为参考，我将 OSX Mountain Lion 与 Xcode 4.5.2 一起使用。Makefile 正在调用 gcc-4.2。'gcc-4.2 --version' 给出 'i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1'

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:46:55.337

我能够将其替换为`typemap`：

```
typedef size_t    mwSize; 
```

但是，我无法对正在发生的事情提供任何见解。

# jsontemplate - jquerymobile 灰尘或 json2html 哪个更好？

> ID：13335324
> 
> 赞同：3
> 
> 时间：2012-11-11T20:50:35.227
> 
> 标签：jsontemplate

jquerymobile 灰尘或 json2html 哪个更好？我正在使用列表视图，我的数据是通过 ajax 移植的，应用程序在 jquery 移动设备上我需要一个简单的模板来表示列表视图中的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:20:19.610

好吧，因为我写了 json2html，所以我会用那个 ;) .. 虽然这真的取决于你想用模板做什么。json2html 的好处是您将 json 用于模板和数据，而不是将模板作为文本/字符串，也不需要编译模板（这使得以后更容易修改）。作为旁注，我们听说 json2html 在许多 jquerymobile 项目中使用，没有任何问题。

如果您正在使用它，请告诉我们！

# php - 把这些乱七八糟的 PHP 变成一个 MySQL 查询

> ID：13335326
> 
> 赞同：0
> 
> 时间：2012-11-11T20:50:58.097
> 
> 标签：php, mysql, sql

我已经编写了一个 MySQL 查询需要做什么的示例，我曾尝试将这两个查询结合起来，但这样做没有任何成功。基本上，它的作用是选择 $session 已经不是朋友的所有用户。

就我的表结构而言，我不知道我需要解释多少，因为您可以使用下面的查询看到我需要做什么，但基本上我的朋友表对于每个友谊只有一行。（只有当`state`is`1`和`CASE`语句对于从友谊中获取 ID 是必要的时，友谊才有效`friends`，因为我的表只有一行用于友谊。

```
$getUsers = mysql_query("SELECT id FROM users WHERE id!=$session");
$getFriends = mysql_query("SELECT CASE WHEN userID=$session THEN userID2 ELSE userID END AS friendID 
                                    FROM friends 
                                    WHERE (userID=$session OR userID2=$session) 
                                    AND state='1'");

        $usersArray = array();
        $friendsArray = array();

        while($usersC = mysql_fetch_array($getUsers))
        {
            $usersID = $usersC['id'];
            array_push($usersArray, $usersID);
        }
        while($usersF = mysql_fetch_array($getFriends))
        {
            $friendID = $usersF['friendID'];
            array_push($friendsArray, $friendID);   
        }

        print_r(array_merge(array_diff($usersArray, $friendsArray), array_diff($friendsArray, $usersArray))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:58:40.227

你想要一个反连接，你可以通过一个外部连接和一个过滤器来过滤连接表所在的记录`NULL`：

```
SELECT users.id
FROM   users LEFT JOIN friends f
    ON (f.userID = $session AND f.userID2 = users.id AND f.state='1')
    OR (f.userID = users.id AND f.userID2 = $session AND f.state='1')
WHERE   f.userID IS NULL    AND f.userID2 IS NULL
   AND users.id <> $session 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/3ad9a/5/0)上查看。

# asp.net-mvc - ASP.NET MVC - 设置自定义 IControllerFactory 无效

> ID：13335329
> 
> 赞同：0
> 
> 时间：2012-11-11T20:51:08.017
> 
> 标签：asp.net-mvc

我真的不明白我在这里做错了什么 - 由于某种原因，`IControllerFactory`我没有使用注册，我最终得到`System.ArgumentException`：

> 类型“Company.WebApi.Controllers.AController”没有默认构造函数
> 
> 在 System.Linq.Expressions.Expression.New(Type 类型) 在 System.Web.Http.Internal.TypeActivator.Create[TBase](Type instanceType) 在 System.Web.Http.Dispatcher.DefaultHttpControllerActivator.GetInstanceOrActivator(HttpRequestMessage 请求，类型在 System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType) 的 controllerType, Func`1& activator)

在 Global.asax.cs

```
protected void Application_Start()
{
    //DI-setup
    var container = new WindsorContainer().Install(new WebWindsorInstaller());

    //set custom controller factory
    var controllerFactory = container.Resolve<IControllerFactory>();
    ControllerBuilder.Current.SetControllerFactory(controllerFactory);

    //register cors
    container.Resolve<ICorsConfig>().RegisterCors(GlobalConfiguration.Configuration);

    //routes
    RegisterRoutes(RouteTable.Routes);
} 
```

我`IControllerFactory`的基于这篇文章[http://keyvan.io/custom-controller-factory-in-asp-net-mvc](http://keyvan.io/custom-controller-factory-in-asp-net-mvc)实现如下

```
public class ControllerFactory : IControllerFactory
    {
        private readonly IWindsorContainer _container;

        public ControllerFactory(IWindsorContainer container)
        {
            if(container == null)
                throw new ArgumentNullException("container");

            _container = container;
        }

        public IController CreateController(RequestContext requestContext, string controllerName)
        {
            if (string.IsNullOrEmpty(controllerName))
                throw new ArgumentNullException("controllerName");

            var componentName = GetComponentNameFromControllerName(controllerName);

            return _container.Resolve<IController>(componentName);
        }

        public SessionStateBehavior GetControllerSessionBehavior(RequestContext requestContext, string controllerName)
        {
            throw new NotImplementedException();
        }

        public void ReleaseController(IController controller)
        {
            _container.Release(controller);
        }

        static string GetComponentNameFromControllerName(string controllerName)
        {
            var controllerNamespace = typeof (CrudController<>).Namespace;
            return string.Format("{0}.{1}Controller", controllerNamespace, controllerName);
        }
    } 
```

我已经盯着这个看了好几个小时，真的不明白为什么这不起作用。调试时，`ControllerFactory`除了构造函数外，任何方法都不会命中。有人看到这里有什么问题或遗漏吗？

（[设置 ASP.NET MVC ControllerFactory 没有效果](https://stackoverflow.com/questions/4952187/setting-asp-net-mvc-controllerfactory-has-no-effect)并不能回答我的问题）

**编辑 1 - 控制器**

```
 public class AController : CrudController<AModel>
    {
        public AController(IAHandler aHandler) : base(aHandler)
        {
            ...
        }

        [HttpGet]
        public HttpResponseMessage GetByUser(string aId)
        {
            ...
        }
    }

    public abstract class CrudController<T> : ApiController
        where T : IModel, new()
    {
        protected CrudController(ICrudHandler<T> handler)
        {
            ...
        }

        [HttpGet]
        public HttpResponseMessage Get(string id)
        {
            ...
        }

        [HttpPost]
        public HttpResponseMessage Post(T input)
        {
            ...
        }

        [HttpPut]
        public HttpResponseMessage Put(T input)
        {
            ...
        }
    } 
```

**编辑 2 - 安装程序**

```
 public sealed class WebWindsorInstaller : IWindsorInstaller
    {
        private bool _installComplete;

        public void Install(IWindsorContainer container, IConfigurationStore store)
        {
            if(_installComplete)
                return;

            //register self for reuse
            container.Register(Component.For<IWindsorInstaller>().Instance(this));

            //controller factory
            container.Register(
                Component.For<IControllerFactory>().ImplementedBy<ControllerFactory>().LifeStyle.Singleton);

            //Handlers
            container.Register(
                Classes.FromAssemblyContaining<AHandler>().InSameNamespaceAs<AHandler>().WithService.
                    DefaultInterfaces());

            //Models
            container.Register(
                Classes.FromAssemblyContaining<AModel>().InSameNamespaceAs<AModel>().WithService.Self());

            //DI
            container.Register(Component.For<IWindsorContainer>().Instance(container));
            container.Register(Component.For<IDependencyResolver>().ImplementedBy<WindsorDependencyResolver>());

            //Controllers
            container.Register(Classes
                .FromAssemblyContaining<AController>()
                .BasedOn<IHttpController>()
                .LifestyleScoped());

            //repositories
            container.Register(
                Classes.FromAssemblyContaining<ARepository>().InSameNamespaceAs<ARepository>().WithService.
                    DefaultInterfaces());

            //cors
            container.Register(Component.For<ICorsConfig>().ImplementedBy<CorsConfig>());

            _installComplete = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:12:10.757

从您问题中的错误消息看来，您实际上想要注册 WebAPI 控制器。重要的是要注意这些与 MVC 控制器不同，并且不要使用相同的控制器工厂（您正在尝试使用）。

有关如何为 Web API 控制器执行此操作的详细信息，请参阅 Mark Seeman 的博文[在 ASP.NET Web API 中使用 Castle Windsor 进行依赖注入。](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)

# c++ - std::thread 中的 Visual Studio 2012 错误 C2248

> ID：13335337
> 
> 赞同：2
> 
> 时间：2012-11-11T20:51:25.053
> 
> 标签：c++, c++11, visual-studio-2012

我对`std::thread`类的 Visual Studio 2012 实现有疑问。

```
Error C2248: "std::thread::thread": cannot access private member declared in class std::thread
    c:\program files (x86)\microsoft visual studio 11.0\vc\include\xmemory0 line: 606 
```

A.hpp：

```
class A{ 
    public:
        A();
        ~A();

    private:
        vector<thread> listOfThreads;       
        int numberOfProcessorCores;
        int startUpWorkerThreads();
}; 
```

A.cpp：

```
 int A::startUpWorkerThreads(){
        if(numberOfProcessorCores <= 0) return 2; //Keine Angabe zur Anzahl der Prozessorkerne
        if(listOfThreads.size() > 0) return 3; //Bereits initialisiertdefiniert

        for(int i = 0; i < numberOfProcessorCores; i ++){
            thread newThread(&TaskManagement::TaskManager::queueWorker);            
            listOfThreads.push_back(newThread);
        }

        return 0;
    } 
```

这是我的程序中使用线程类的部分。

有谁知道为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:00:08.330

该错误告诉您一个操作正在尝试调用`std::thread`的复制构造函数或赋值运算符，这两者都是已删除或私有的。作为替代方案，您可以通过推送这样的临时变量将线程“移动”到向量中：

```
listOfThreads.push_back(thread(&TaskManagement::TaskManager::queueWorker)); 
```

否则，您可以调用`std::move`您的线程对象，这会使您的线程对象处于与默认构造的对象相同的状态（感谢@JonathanWakely 在评论中指出这一点）。在您的情况下，没有理由创建线程并显式移动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:55:32.373

`std::thread`没有复制构造函数，它需要执行`push_back`，并且可能用于其他`vector`操作。

# c - 做叉子时有趣的父母和孩子行为

> ID：13335344
> 
> 赞同：2
> 
> 时间：2012-11-11T20:52:35.363
> 
> 标签：c, operating-system, fork

有人可以解释下面程序的输出吗？为什么我为父母和孩子获得相同的 &a 值。

它们必须具有不同的物理地址。如果我认为我正在获取虚拟地址，那么它们如何具有相同的虚拟地址，因为据我所知，每个物理地址都唯一地绑定到虚拟地址。

```
#include <stdio.h>
#include <stdlib.h>
int main(void) {

    int pid=fork();
      int a=10;
    if(pid==0)
        {
            a=a+5;
            printf("%d %d\n",a,&a);
        }
        else
        {
            a=a-5;
            printf("%d %d\n",a,&a);
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T20:55:38.177

子进程从父进程继承其虚拟地址空间，即使子进程写入页面后虚拟地址开始引用不同的物理地址。这称为写时复制 (CoW) 语义。

所以，在父级`&a`中被映射到一些物理地址。Fork 最初只是复制映射。然后，当进程写入 时`a`，CoW 启动并在子进程中，`a`复制保存的物理页面，更新虚拟地址映射以引用副本，并且两个进程都有自己的副本`a`，在相同的虚拟地址`&a`但在不同的物理地址。

> 每个物理地址都唯一绑定到虚拟地址

这不是真的。物理内存地址可能未映射，也可能映射到一个或多个进程地址空间中的多个虚拟地址。

相反，一个虚拟地址可以映射到多个物理地址，只要这些虚拟地址存在于不同进程的虚拟地址空间中。

[顺便说一句，您不能可靠地打印内存地址`%d`（恰好在 32 位 x86 上工作）。改为使用`%p`。此外，返回类型`fork`是`pid_t`，而不是`int`。]

# c++ - 放弃最低分计划

> ID：13335348
> 
> 赞同：2
> 
> 时间：2012-11-11T20:53:08.030
> 
> 标签：c++

我被指派做一个程序，该程序需要 5 分，降低最低分，然后取最高 4 分的平均值。它不会让我使用变量“最低”。我有点困惑，可以使用一些帮助。

```
#include <iostream>
#include <iomanip>

using namespace std;

void getValues(float &score1, float &score2, float &score3, float &score4, float &score5);
float findLowest(float score1, float score2, float score3, float score4, float score5, float lowest);
void calcAverage(float score1, float score2, float score3, float score4, float score5, float &lowest);
void displayVales();

int main(void)
{
    float score1, score2, score3, score4, score5, lowest;

    getValues(score1, score2, score3, score4, score5);
    findLowest(score1, score2, score3, score4, score5, lowest);
    calcAverage(score1, score2, score3, score4, score5, lowest);

}

void getValues(float &score1, float &score2, float &score3, float &score4, float &score5)
{
    cout << "Welcome to the test averaging program!" << endl;
    cout << "This program will drop the lowest of five scores." << endl;

    cout << "Please enter score #1 --> ";
    cin >> score1;

    cout << "Please enter score #2 --> ";
    cin >> score2;

    cout << "Please enter score #3 --> ";
    cin >> score3;

    cout << "Please enter score #4 --> ";
    cin >> score4;

    cout << "Please enter score #5 --> ";
    cin >> score5;
}

float findLowest(float score1, float score2, float score3, float score4, float score5, float lowest)
{
lowest = score1;
{
if (score2 < lowest) lowest = score2;
if (score3 < lowest) lowest = score3;
if (score4 < lowest) lowest = score4;
if (score5 < lowest) lowest = score5;
cout << "The lowest test score is " << lowest << endl;
}
return lowest;
}

void calcAverage (float score1, float score2, float score3, float score4, float score5, float &lowest)

{ double average;
cout << setw(4);
cout.precision(2);
cout.setf(ios::fixed);
average = (( score1 + score2 + score3 + score4 + score5) - lowest) / 4.0;
cout << "The average of the 4 highest test scores is: " << average << endl;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:01:13.803

在您的 findLowest 函数中，您需要通过引用传递（使用 & 符号）。

```
float findLowest(float score1, float score2, float score3, float score4, float score5, float &lowest)
{
if (score2 < lowest) lowest = score2;
if (score3 < lowest) lowest = score3;
if (score4 < lowest) lowest = score4;
if (score5 < lowest) lowest = score5;
cout << "The lowest test score is " << lowest << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:55:24.027

您返回最低但不分配它......要么将参数更改`findLowest`为引用，要么删除参数并像这样调用它：

```
lowest = findLowest(score1, score2, score3, score4, score5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T21:34:59.800

请注意，您可以简单地将所有值相加，然后取掉最小值。有点像这样：

```
#include <iostream>
using namespace std;
int main() {
    const int num_of_values = 5;
    float values[num_of_values];
    int lowest = 0;
    float total = 0;
    for (int i = 0; i < num_of_values; i++) {
        printf("Enter value %i: ", i);
        cin >> values[i];
        total += values[i];
        if (values[i] < values[lowest])
            lowest = i;
    }
    total -= values[lowest];
    printf("Result: %f \n", total/(num_of_values-1));
    system("pause");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T21:01:49.197

您需要在它使用的块中声明最低（不是在 main 中，而是在 findLowest 中）：

```
float findLowest(float score1, float score2, float score3, float score4, float score5, float lowest)
{
   float lowest = score1;
   if (score2 < lowest) lowest = score2;
   if (score3 < lowest) lowest = score3;
   if (score4 < lowest) lowest = score4;
   if (score5 < lowest) lowest = score5;
   cout << "The lowest test score is " << lowest << endl;
   return lowest;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-12T16:07:27.523

I also did this program. I scored an 100 on my program using Visual Studio 2017.

```
#include <iostream>
using namespace std;

void getScore(double&, double&, double&, double&, double&);
int findLowest(double&, double&, double&, double&, double&);
void calcAverage(double&, double&, double&, double&, double&, int&, int&);

int main()
{
double ts1, ts2, ts3, ts4, ts5; //declaring a variable for each requested test score
int ta; //declaring test average into an int because of the program requirements
getScore(ts1, ts2, ts3, ts4, ts5); //pulling the getScore function into the main which then defined
int low = findLowest(ts1, ts2, ts3, ts4, ts5); //pulling the lowest variable into the main for further use
calcAverage(ts1, ts2, ts3, ts4, ts5, ta, low); //calculating the average
cout << "The average of all the scores is " << ta << endl;
system("PAUSE");
return 0;
}

void getScore(double& ts1, double& ts2, double& ts3, double& ts4, double& ts5)
{
for (int c = 0; c < 5; c++)
{
    double t = 0; // current test score
    cout << "Input the test score for test " << c + 1 << endl;
    cin >> t;

    if (t < 0 || t > 100) //input validation
    {   cout << "Input the test score for test " << c + 1<< " that is more than 0 and less than 100" << endl;
        cin >> t;   }

    switch (c)//to input each test score into a variable for later use
    {
    case 0: if (c == 0)
    {   ts1 = t;
        break;        }
    case 1: if (c == 1)
    {   ts2 = t;
        break;        }
    case 2: if (c == 2)
    {   ts3 = t;
        break;        }
    case 3: if (c == 3)
    {   ts4 = t;
        break;        }
    case 4: if (c == 4)
    {   ts5 = t;
        break;        }
    }
}
}

int findLowest(double& ts1, double& ts2, double& ts3, double& ts4, double& ts5)
{
int lowest = 100;
if (lowest > ts1)
{
    lowest = ts1;
}
if (lowest > ts2) 
{
    lowest = ts2;
}
if (lowest > ts3)
{
    lowest = ts3;
}
if (lowest > ts4)
{
    lowest = ts4;
}
if (lowest > ts5)
{
    lowest = ts5;
}
return lowest; //the lowest will be returned to main
}

void calcAverage(double& ts1, double& ts2, double& ts3, double& ts4, double& ts5, int& ta, int& low)
{
ta = ts1 + ts2 + ts3 + ts4 + ts5; 
ta = ta - low;
ta = ta / 4; //calculating the average
} 
```

# c# - “该进程无法访问该文件，因为它正被另一个进程使用”与图像

> ID：13335349
> 
> 赞同：11
> 
> 时间：2012-11-11T20:53:10.477
> 
> 标签：c#, asp.net, file-in-use

我已经看到很多这样的问题已经解决了，问题主要是由于没有正确处理流。

我的问题略有不同，这里遵循代码片段

```
 foreach (Images item in ListOfImages)
 {
      newPath = Path.Combine(newPath, item.ImageName + item.ImageExtension);
      File.Create(newPath);

      File.WriteAllBytes(newPath, item.File);
 } 
```

`Images`自定义结构在哪里？`item.File`是原始数据，byte[]。

我的问题是在`WriteAllBytes`调用的那一行，抛出了一个异常。消息内容如下：

`The process cannot access the file because it is being used by another process`

同样，我不知道我将如何以某种方式`close`完成这个过程。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-11T20:58:12.443

由于`File.Create`返回流，我会正确处理它：

```
using(var stream = File.Create(newPath)){}
File.WriteAllBytes(newPath, item.File); 
```

或者您可以使用流直接写入文件：

```
using (FileStream fs = File.Create(newPath))
{
    fs.Write(item.File, 0, item.File.Length);
} 
```

或者，可能是最简单的，[`File.WriteAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)单独使用：

```
File.WriteAllBytes(newPath, item.File); 
```

> 创建一个新文件，将指定的字节数组写入文件，然后关闭文件。如果目标文件已存在，则将其覆盖。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T20:58:07.970

您声明您的问题与处理流无关，但请查看此 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/d62kzs03.aspx](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)

返回什么`File.Create`？一个文件流！！！！

而且，归根结底，如果文件不存在，您为什么要使用`File.Create`if创建文件？`File.WriteAllBytes`;)

> 创建一个新文件，将指定的字节数组写入文件，然后关闭文件。如果目标文件已存在，则将其覆盖。

在 MSDN 上也检查一下：http: [//msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-13T11:45:37.907

```
using (FileStream fs = 
new FileStream(filePath,
    FileMode.Open, FileAccess.Read, FileShare.ReadWrite)) 
```

您的日志可能被写锁定，因此请尝试使用 FileShare.ReadWrite。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T21:01:54.090

[create 方法](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)打开文件进行写入，并返回一个 FileStream 对象供您使用。仅仅因为您没有引用它*并不*意味着它不需要返回。

```
foreach (Images item in ListOfImages)
                {
                    newPath = Path.Combine(newPath, item.ImageName + item.ImageExtension);
                    FileStream f = File.Create(newPath);

                    f.Write(item.File, 0, item.File.Length);
                } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T21:02:53.583

`File.WriteAllBytes`如有必要，将创建文件。你可以使用：

```
foreach (Images item in ListOfImages)
{
    newPath = Path.Combine(newPath, item.ImageName + item.ImageExtension);
    File.WriteAllBytes(newPath, item.File);
} 
```

你是否正确组合路径？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T23:28:06.910

这是完成您正在尝试做的事情的最具体方法：

```
foreach (Images item in ListOfImages)
{
    using (System.IO.FileStream output = new System.IO.FileStream(Path.Combine(newPath, item.ImageName + item.ImageExtension),
        System.IO.FileMode.Create, System.IO.FileAccess.Write))
    {
        output.Write(item.File, 0, item.File.Length);
        output.Flush();
        output.Close();
    }
} 
```

您还需要修复创建路径的逻辑，正如我在上面的示例中所做的那样。您一遍又一遍地连接 newPath 。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-05-06T10:11:17.303

强制垃圾收集器清理。

```
GC.Collect(); 
```

# java - Maven 在理论上和实践中做了什么？什么时候值得使用？

> ID：13335351
> 
> 赞同：165
> 
> 时间：2012-11-11T20:53:14.120
> 
> 标签：java, maven

我即将开始一个 Java 项目只是为了练习。我已经阅读了有关 Maven 的信息，但我实际上并不了解它应该在什么时候使用。

你能给我一些实用的技巧吗？Maven 有很大帮助吗？Maven 实际上为我的项目做了什么？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-11-11T21:03:53.090

**它能做什么**

Maven 是一个“构建管理工具”，它用于定义您的`.java`文件如何编译`.class`、打包到`.jar`（或`.war`或`.ear`）文件、使用工具（前/后）处理、管理您的[`CLASSPATH`](http://en.wikipedia.org/wiki/Classpath_(Java))以及所有其他类型的任务构建你的项目。它类似于C/C++ 中的[Apache Ant](http://ant.apache.org/)或[Gradle](http://www.gradle.org/)或[Makefiles](http://en.wikipedia.org/wiki/Makefiles)，但它试图完全独立于其中，通过合并其他常见任务（如下载和安装必要的库等），您不需要任何额外的工具或脚本。

它也是围绕“构建可移植性”主题设计的，因此您不会因为在一台计算机上使用相同的构建脚本而在另一台计算机上运行相同的代码而不会遇到问题（这是一个已知问题，我们有 Windows 的 VM 98 台机器，因为我们无法在其他任何地方编译我们的一些 Delphi 应用程序）。正因为如此，它也是使用不同 IDE 的人之间开展项目的最佳方式，因为 IDE 生成的 Ant 脚本很难导入到其他 IDE 中，但是现在所有 IDE 都理解并支持 Maven（[IntelliJ](http://www.jetbrains.com/idea/features/ant_maven.html)、[Eclipse](http://www.eclipse.org/m2e/)和[NetBeans](http://wiki.netbeans.org/Maven) ） ）。即使您最终不喜欢 Maven，它最终也会成为所有其他现代构建工具的参考点。

**为什么你应该使用它**

关于 Maven，有三件事*非常*好。

1.  Maven 将（在您声明您正在使用哪些库之后）自动下载您使用的所有库*以及**它们*为您使用的库。这非常好，并且使处理大量库变得非常容易。这可以让您避免[“依赖地狱”](http://en.wikipedia.org/wiki/Dependency_hell)。它类似于 Apache Ant 的[Ivy](http://ant.apache.org/ivy/)。

2.  它使用“[约定优于配置](http://en.wikipedia.org/wiki/Convention_over_configuration)”，因此默认情况下您不需要定义要执行的任务。您不需要像在 Ant 或 Makefile 中那样编写“编译”、“测试”、“打包”或“清理”步骤。只需将文件放在 Maven 期望它们的位置，它应该可以立即工作。

3.  Maven 也有很多不错的插件，您可以安装它们来处理许多日常任务，从[使用 JAXB 从 XSD 模式生成 Java 类到使用](https://java.net/projects/maven-jaxb2-plugin/pages/Home)Cobertura[测量测试覆盖率](http://mojo.codehaus.org/cobertura-maven-plugin/)。只需将它们添加到您的`pom.xml`，它们就会与您想做的所有其他事情集成。

最初的学习曲线很陡峭，但是（几乎）每个专业的 Java 开发人员都使用 Maven 或希望他们这样做。您应该在每个项目中使用 Maven，尽管如果您需要一段时间来习惯它并且有时您希望您可以手动执行操作，请不要感到惊讶，因为学习新东西有时会带来伤害。然而，一旦你真正习惯了 Maven，你会发现构建管理几乎不需要任何时间。

**如何开始**

最好的起点是“ [Maven in 5 Minutes](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html) ”。它会让您从一个项目开始，您可以使用所有必要的文件和文件夹设置来编写代码（是的，我建议至少在开始时使用快速入门原型）。

开始之后，您将希望更好地了解该工具的用途。因为“[使用 Maven 更好地构建](https://web.archive.org/web/20130903151814/http://www.maestrodev.com/wp-content/uploads/2012/03/betterbuildswithmaven-2008.pdf)”是了解其工作原理的最彻底的地方，但是，“ [Maven：完整参考](http://www.sonatype.com/books/mvnref-book/reference/)”是最新的。阅读第一个理解，然后使用第二个作为参考。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-11T20:54:54.840

来自[Sonatype 文档](http://www.sonatype.com/books/mvnref-book/reference/introduction-sect-whatIsMaven.html)：

> 这个问题的答案取决于你自己的观点。绝大多数 Maven 用户会称 Maven 为“构建工具”：一种用于从源代码构建可部署工件的工具。构建工程师和项目经理可能将 Maven 称为更全面的东西：项目管理工具。有什么区别？像 Ant 这样的构建工具只专注于预处理、编译、打包、测试和分发。诸如 Maven 之类的项目管理工具提供了构建工具中的功能超集。除了提供构建功能，Maven 还可以运行报告、生成网站以及促进工作团队成员之间的沟通。

我强烈建议您查看 Sonatype 文档并花一些时间查看可用的插件以了解 Maven 的强大功能。

非常简单地说，它在比（比如说）Ant 更高的概念级别上运行。使用 Ant，您可以指定要构建的文件和资源集，然后指定您希望它们如何组合在一起，并指定应该在 (clean/compile/jar) 中出现的顺序。使用 Maven，这一切都是隐含的。Maven 期望在特定位置找到您的文件，并且会自动使用它。因此，使用 Maven 设置项目会简单得多，但您必须遵守 Maven 的规则！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-11T20:58:16.913

`Maven`是一个构建工具。与`Ant`或是`Gradle`用于`Java`构建的工具。
如果您是 Java 新手，虽然只是使用您的 IDE 构建，但`Maven`学习曲线陡峭。

# filtering - 使用 Netfilter 进行数据包过滤

> ID：13335356
> 
> 赞同：2
> 
> 时间：2012-11-11T20:54:23.767
> 
> 标签：filtering, packet, netfilter

我通过检测一些“坏”数据包并在路由器上的数据包过载时适当地丢弃它们来实现数据包过滤机制。我正在使用 Linux 网络堆栈并为我的实现使用 netfilter 挂钩在这方面，我想操纵数据包接收队列来“标记”数据包并可能丢弃那些坏数据包。如何操作数据包接收队列。基本上我想丢弃接收队列中的所有“坏”数据包。会使用 libnetfilter_queue api 的帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:59:14.550

据我所知，目前没有（简单的）方法可以丢弃已经由内核排队的数据包。当我需要与您类似的东西时，我选择了两种方法之一。

1) 尽早标记我的数据包（例如在表 taw 中，然后在 PREROUTING 中），然后在它们通过以后的表时丢弃它们。为了检测标记，将“-m mark --mark YOUR MARK HERE”添加到您的 DROP 规则中。

2）使用NFQUEUE目标将数据包发送到用户空间（或相关信息），然后在那里进行过滤。要在用户空间处理数据包，我推荐[libnetfilter_queue](http://netfilter.org/projects/libnetfilter_queue/doxygen/index.html)

# java - 调用相机应用程序重新创建 android 活动

> ID：13335357
> 
> 赞同：4
> 
> 时间：2012-11-11T20:54:26.870
> 
> 标签：java, android, android-intent, android-tabhost, android-camera

我正在处理使用 ActivityGroup 实现的选项卡式活动。当我调用相机应用程序并返回它总是调用**onCreate()**并重新创建活动时。因此，对**onActivityResult**的回调具有空数据。

我在清单文件中添加了这个。但没有变化。

```
android:screenOrientation="portrait"
android:configChanges="orientation|keyboardHidden" 
```

我只在三星 Galaxy s3 上遇到这个问题。我已经在galaxy s2、HTC、galaxy nexus 上进行了相同的测试。所有设备工作正常。

我怎样才能正确地做到这一点？

谢谢

# java - 为什么这段代码会导致非法监视器状态异常？

> ID：13335367
> 
> 赞同：2
> 
> 时间：2012-11-11T20:55:53.207
> 
> 标签：java, java.util.concurrent

下面的代码试图将随机值插入循环队列并将其删除。但是，存在一些同步问题。我知道我可以使用更高级别的例程，并且我将为生产代码这样做，但我很好奇为什么这不起作用？我在这里想念什么？

```
public class CircularQueue {
int count;
int rear;
int front;
Object lock = new Object();
int size;
int[] array;
CircularQueue(int size)
{
    this.size= size;
    array = new int[size];
}

void enqueue(int number) throws InterruptedException
{
    if(isFull())
        lock.wait();

    synchronized(lock)
    {

        array[rear] = number;
        System.out.println("Rear is:"+ rear+ "value is:"+number+"Size is:"+size);

        rear = (rear+1)%size;
        count++;
    }
    lock.notify();

}

void dequeue() throws InterruptedException
{
    if(isEmpty())
        lock.wait();

    synchronized(lock)
    {
        int retVal = 0;
        retVal = array[front];
        System.out.println("Front is:"+ front+ "value is:"+retVal);

        front = (front+1)%size;
        count--;
    }

    lock.notify();

}

boolean isFull()
{
    if(count == size)
    {
        return true;
    }
    else
        return false;

}

boolean isEmpty()
{
    return count == 0;
}
} 
```

// 测试类

```
import java.util.Random;
public class App {

    public static void main(String[] args) throws InterruptedException
    {
       final Random random = new Random();
       final CircularQueue circularQueue = new CircularQueue(10);
       Thread t1 = new Thread(new Runnable(){

        @Override
        public void run() {
            try {
                circularQueue.enqueue(random.nextInt(100));
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

       });
       Thread t2 = new Thread(new Runnable(){

            @Override
            public void run() {
                try {
                    circularQueue.dequeue();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

           });

       t1.start();
       t2.start();
       t1.join();
       t2.join();

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:00:33.847

因为`java.lang.Object#wait`, `java.lang.Object#notify`,`java.lang.Object#notifyAll`必须从同步块中调用。

作为一种解决方案（需要检查），您应该将您的条件放在同步块中：

```
void enqueue(int number) throws InterruptedException
{

    synchronized(lock)
    {
        if(isFull())
           lock.wait();

        array[rear] = number;
        System.out.println("Rear is:"+ rear+ "value is:"+number+"Size is:"+size);

        rear = (rear+1)%size;
        count++;
        lock.notify();
    }
}

void dequeue() throws InterruptedException
{
    synchronized(lock)
    {
        if(isEmpty())
           lock.wait();

        int retVal = 0;
        retVal = array[front];
        System.out.println("Front is:"+ front+ "value is:"+retVal);

        front = (front+1)%size;
        count--;
        lock.notify();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:04:13.433

此代码中的另一个问题是，即使 isEmpty/isFull 返回 true - 直到您调用相邻的等待，队列的状态也可能会改变。
例如：
- 队列为空
- 线程 1 调用 isEmpty()
- 上下文切换
- 线程 2 调用 enqueue（现在队列不为空）
- 上下文切换
- 线程 1 不调用 lock.wait() 事件，尽管队列不为空

当调用 wait()/notify() 将被放置在同步块中时，这个问题当然会得到解决。

# c++ - 使用带有内存映射索引的 flann

> ID：13335371
> 
> 赞同：2
> 
> 时间：2012-11-11T20:56:14.283
> 
> 标签：c++, mmap

我将 flann 与使用大量 RAM 的大型索引一起使用。

我希望能够在多个进程之间共享 flann 索引。

让 flann 使用内存映射文件作为其索引是否可行，因此它可以在多个进程之间共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T06:29:11.547

我想出了一个部分解决方案：

高内存使用包括由 flann 管理的 flann 树。该树不包含实际数据 - 仅包含外部矩阵的索引。这个矩阵可以很容易地进行内存映射（我使用了 boost）

在我的场景中，这节省了大约 70% 的 RAM。

# out-of-memory - minSdk 和 oom 错误

> ID：13335377
> 
> 赞同：1
> 
> 时间：2012-11-11T20:56:50.440
> 
> 标签：out-of-memory, min

当我突然发现问题时，我几乎准备好发布我的 android 应用程序。我将 minSdk 表格 3 更改为 4，我收到 oom 错误。有人知道为什么吗？（如果我设置 minSdk = 3，一切正常）

我打电话时发生错误：

`k1 = BitmapFactory.decodeResource(getResources(), R.drawable.k1l);`

我当然用`k1.recylce(); k1 =null;`

# php - 删除空数组元素

> ID：13335378
> 
> 赞同：0
> 
> 时间：2012-11-11T20:57:02.800
> 
> 标签：php, multidimensional-array

[我刚刚看到了从数组[here]](https://stackoverflow.com/questions/13325238/deleting-values-with-more-than-2-decimal-place-in-array)中删除多于 2 位小数的数字的方法。问题是当我尝试使用 echo 而不是 var_dump 格式化输出时：

```
$line = 1;
for($i = 1; $i < count($value1); $i++){
    echo "$line | ".$value1[$i][0]." | ".$value1[$i][1]." | ".$value1[$i][2]." | ".$value1[$i][3]." | ".$value1[$i][4].'<br>';
    $line = $line + 1;
} 
```

我到处都是“注意：未定义的偏移量：”。有没有办法重置数组中的行？

我需要用“echo”格式化它的原因是我可以直接复制输出并将其粘贴到文档中，而不必从“var_dump”中删除不必要的字符。我做错了吗？

提前谢谢...

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:06:45.593

使用内爆而不是不方便的连接怎么样？

```
<?php
foreach ($value1 as $counter => $line){
    echo ($counter + 1) . " | ". implode(" | ", $line) . '<br>';
} 
```

这样，可以确保仅连接现有值。如果您仍想从数组中删除元素，您可以考虑检查它们是否为空，然后使用[unset](http://php.net/manual/de/function.unset.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:09:05.043

我不知道数组的样子，但您在代码中肯定遇到的一个错误是：

```
for($i = 1; $i < count($value1); $i++) 
```

在 PHP 中，数组以 index 开头`0`，您需要像这样更正您的代码：

```
for($i = 0; $i < count($value1); $i++) 
```

或使用更容易的[foreach 。](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T21:18:15.590

解决了。之后：

```
function decimalFilter($v) {
        foreach ( $v as $x ) {
            if (strlen(substr(strrchr($x, "."), 1)) > 2)
                return false;
        }
        return true;
    }
$value = array_filter($value, "decimalFilter"); 
```

然后我补充说：

```
sort($value); 
```

其次是：

```
for($i = 1; $i < count($value); $i++){
    echo $value[$i][0]." | ".$value[$i][1]." | ".$value[$i][2]." | ".$value[$i][3]." | ".$value[$i][4].'<br>';
} 
```

丢失的元素在输出过程中消失了。事情是我不知道这是否是一种实用的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T21:30:43.117

您可以使用几种方法来删除或忽略数组元素，而无需 PHP 抛出通知：

```
$line = 1;
for($i = 1; $i < count($value1); $i++){
if( isset( $value[$i][0]) === TRUE && isset( $value[$i][1]) === TRUE && isset( $value[$i][2]) === TRUE && isset( $value[$i][3]) === TRUE && isset( $value[$i][4]) === TRUE )
{
    echo "$line | ".$value1[$i][0]." | ".$value1[$i][1]." | ".$value1[$i][2]." | ".$value1[$i][3]." | ".$value1[$i][4].'<br>';
}

    $line = $line + 1;
} 
```

或者您可以使用 count($value[$i][0]) > 0 来确保数组包含一个值。

# mongodb - 如何在 mongoskin 中设置安全变量？

> ID：13335379
> 
> 赞同：2
> 
> 时间：2012-11-11T20:57:14.303
> 
> 标签：mongodb, mongoskin

我收到此错误消息：

```
========================================================================================
=  Please ensure that you set the default safe variable to one of the                  =
=   allowed values of [true | false | {j:true} | {w:n, wtimeout:n} | {fsync:true}]     =
=   the default value is false which means the driver receives does not                =
=   return the information of the success/error of the insert/update/remove            =
=                                                                                      =
=   ex: new Db(new Server('localhost', 27017), {safe:false})                           =
=                                                                                      =
=   http://www.mongodb.org/display/DOCS/getLastError+Command                           =
=                                                                                      =
=  The default of false will change to true in the near future                         =
=                                                                                      =
=  This message will disappear when the default safe is set on the driver Db           =
======================================================================================== 
```

我已经找到了一种在原生 MongoDB 中处理它的方法，但是有没有办法使用 mongoskin 设置安全变量？

澄清一下：尽管出现错误，我仍然能够查询数据库并将字符串输出到控制台。但是，如果我想返回变量以将其传递给另一个函数，我会得到：

```
{ emitter: { _events: { open: [Object] }, _maxListeners: 50 },
  state: 1,
  options: undefined,
  skinDb:
   { emitter: { _events: [Object], _maxListeners: 100 },
     state: 1,
     _dbconn:
      { databaseName: 'titles',
    serverConfig: [Object],
    options: [Object],
    _applicationClosed: false,
    native_parser: true,
    bsonLib: [Object],
    bson: {},
    bson_deserializer: [Object],
    bson_serializer: [Object],
    _state: 'connecting',
    pkFactory: [Object],
    forceServerObjectId: false,
    safe: true,
    notReplied: {},
    isInitializing: true,
    auths: [],
    openCalled: true,
    commands: [],
    _callBackStore: [Object],
    logger: [Object],
    slaveOk: false,
    tag: 1352682584657,
    eventHandlers: [Object],
    serializeFunctions: false,
    raw: false,
    recordQueryStats: false,
    reaperEnabled: false,
    _lastReaperTimestamp: 1352682584657,
    retryMiliSeconds: 1000,
    numberOfRetries: 60,
    reaperInterval: 10000,
    reaperTimeout: 30000,
    readPreference: undefined },
 db: null,
 username: '',
 password: undefined,
 admin: { emitter: {}, state: 0, skinDb: [Circular], admin: null },
 _collections: { titles: [Circular] },
 bson_serializer:
  { BSON: [Object],
    Long: [Object],
    ObjectID: [Object],
    DBRef: [Function: DBRef],
    Code: [Function: Code],
    Timestamp: [Object],
    Binary: [Object],
    Double: [Function: Double],
    MaxKey: [Function: MaxKey],
    MinKey: [Function: MinKey],
    Symbol: [Function: Symbol] },
 ObjectID:
  { [Function: ObjectID]
    index: 0,
    createPk: [Function: createPk],
    createFromTime: [Function: createFromTime],
    createFromHexString: [Function: createFromHexString] } },
  ObjectID:
   { [Function: ObjectID]
 index: 0,
 createPk: [Function: createPk],
 createFromTime: [Function: createFromTime],
 createFromHexString: [Function: createFromHexString] },
  collectionName: 'titles',
  collection: null,
  internalHint: null,
  hint: [Getter/Setter] } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:19:55.583

试试这个：

```
var db = mongoskin.db('localhost:27017/test', {safe: true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:16:44.370

在官方 mongoskin 问题跟踪器中查看此页面：[https ://github.com/kissjs/node-mongoskin/issues/77](https://github.com/kissjs/node-mongoskin/issues/77)

# php - codeigniter 中的重复会话

> ID：13335381
> 
> 赞同：0
> 
> 时间：2012-11-11T20:57:20.607
> 
> 标签：php, codeigniter, session, session-state

我有一个模型：

```
<?php

class Loginfunctionmodel extends CI_Model{
    function __construct()
    {
        // Call the Model constructor
        parent::__construct();

    }

    # check_if_loggedin() below checks if user has session w/ loggedIn=1, then displays needed supernav elements
    function check_if_loggedin(){
        $this->load->library('session');
        # user has loggedin Val = 1 and valid session_id
        $loggedInSetSuccess = 1;
        $sess = $this->session->userdata('session_id');
        $sessionsDbCompare = $this->db->get_where('Client',array('session_id'=>$sess,'loggedIn'=>$loggedInSetSuccess));
        // no session id for user in database... load login
        if($sessionsDbCompare->num_rows() == 1 ){
                $this->load->view('supernavigationloggedin.php');
                $this->load->view('primarynavigation.php');        
        }
        // otherwise problem with session count for the user is greater than 1.
        // Regenerate values
        elseif($sessionsDbCompare->num_rows() > 1){
            #remove current errorneous [session_id] data
                $this->session->unset_userdata();
            #reset [session_id] data
                $this->session->set_userdata();
            # load logged in views, given single session id exists.
                $this->load->view('supernavigationnotloggedin.php');
                $this->load->view('primarynavigation.php');               
        }

        // otherwise problem with session or loggedIn ... show login form.
        else{
            #remove current errorneous [session_id] data; load not logged in views.
            $this->session->unset_userdata();
            $this->load->view('supernavigationnotloggedin.php');
            $this->load->view('primarynavigation.php');     
        }

    }

}
?> 
```

问题是当我访问这个页面时@`localhost/mysite`它会加载以下视图：`homepage.php`并且这个模型（上面）`homepagemodel.php`也调用了加载，但是一旦我加载页面就会创建一个会话，我如何让它只`if{} block`被执行？如果我把它*放在里面*，`if{} block`那么使用`$this->load->library('session');`.

任何人？我一直在为此尝试各种修复，但它会不断使用重复的会话值制作重复的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:35:29.487

好吧，我不确定这是否是您需要的，但是我们开始...

```
function check_if_loggedin()
{        
    $is_logged = $this->session->userdata('loggedIn');
    $sess = $this->session->userdata('session_id');
    $sessionsDbCompare = $this->db->get_where('Client',array('session_id'=>$sess));

    if ($is_logged == 1 && $sessionsDbCompare->num_rows() == 1)
    {
        $this->session->set_userdata('loggedIn', 1);
        $this->load->view('supernavigationloggedin.php');
        $this->load->view('primarynavigation.php');
    }
    else
    {
        $this->session->unset_userdata();
        $this->load->view('supernavigationnotloggedin.php');
        $this->load->view('primarynavigation.php');  
    }
} 
```

# c++ - 使用 Pair 模板实现 List 模板

> ID：13335388
> 
> 赞同：4
> 
> 时间：2012-11-11T20:57:50.253
> 
> 标签：c++, templates

我正在尝试使用我自己的对类来实现一个单链表模板类。我这样做是为了刷新我的 C++ 技能，所以这就是我不只是使用 STL 的原因。

我的列表模板由单一类型参数化：

```
template <typename T>
class LinkedList
{
private:
    Pair<T, Pair<???>* >* _head;
}; 
```

问题是我希望 _head 是一对，其第二个元素是一对相同类型的。这个想法是 _head.first 是元素， _head.second 是指向列表其余部分的指针，如果它是最后一个元素，则为 NULL。

有没有办法使用引用自身的模板类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:08:10.990

也许你正试图做这样的事情：

```
template <typename T>
class LinkedList
{
private:
    Pair<T, ListList<T> >* _head;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:05:38.420

典型的单链表由*节点*组成，每个节点都包含一个指向下一个节点的指针或一个空指针来表示结束：

```
template <typename T> List
{
    struct Node
    {
        Node * next;
        T value;
    };

    Node * head;

    List() : head(NULL) { }

    // ... insert, delete, find, iterate ...
} 
```

# assembly - 使用 FFREE 和 FDECSTP

> ID：13335395
> 
> 赞同：1
> 
> 时间：2012-11-11T20:58:49.140
> 
> 标签：assembly, x86, fpu, x87

我无法理解这些事情：这些命令（FFREE、FDECSTP）有什么用？它可以用来从 fpu 堆栈中弹出值，还是出于其他目的？我不明白：/有人可以解释一下吗，tnx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:52:47.783

是的，使用，`FFREE`您可以手动管理 FPU 堆栈。请注意，FPU 堆栈的增长类似于 CPU 堆栈，因此要删除（弹出）某些内容，您将寄存器标记为空闲并递增堆栈指针。`FINCSTP``FDECSTP`

您不会在典型代码中看到这些指令，尤其是因为它们一次只能操作一个寄存器。如果使用 CPU 堆栈`ADD ESP, x`，您可以一次性丢弃多个项目，而使用 FPU 堆栈则无法做到这一点。因此，通常您使用`FSTP st(0)`丢弃一个项目，而不是等效的`FFREE`+`FINCSTP`对。分配项目时，您通常也想初始化，所以使用一些`FLD`变体。

# php - 为什么它返回true？

> ID：13335398
> 
> 赞同：0
> 
> 时间：2012-11-11T20:59:35.673
> 
> 标签：php

我似乎找不到问题所在。

```
// Check that someone from this IP didn't register a user within the last hour (DoS prevention)
$query = mysqli_query($dbc, "SELECT COUNT(id) FROM accounts WHERE registration_ip = '".$_SERVER['REMOTE_ADDR']."'  AND registered > ".(time() - 3600));

if (mysqli_num_rows($query) > 0) {
    $errors[] = 'To prevent registration flooding, at least an hour has to pass between registrations from the same IP. Sorry for the inconvenience.';
} 
```

为什么无论如何这总是返回true？即使帐户表是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:01:45.427

如果我没记错的话，您的数据将始终是表示计数值的 1 行（因为您使用的是计数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:07:08.970

即使有 0 行符合您的条件，它也会简单地返回它。

```
+-----------+
| COUNT(id) |
+-----------+
|         0 |
+-----------+ 
```

因为你想要的`count`行。它的`0`. 因此有**一排**。

这是你应该如何处理它。

```
$row = mysqli_fetch_row($query));
$count = intval($row[0]);
mysqli_free_result($query);

if ($count > 0)
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T00:28:07.163

您正在检查返回的行而不是值。所以像这样检查

```
$row = mysqli_fetch_row($query));
$count = $row[0];

if ($count > 0)
{

} 
```

# time - 无法通过 USB 将计算机时间同步到 Arduino

> ID：13335402
> 
> 赞同：10
> 
> 时间：2012-11-11T20:59:56.460
> 
> 标签：time, serial-port, arduino, processing

我想将时间从我的电脑同步到 arduino。我正在使用他们的时间库，但它不起作用。

如何让 arduino 与我的计算机上的时间相同？我目前正在使用mac。

他们的文件说：

> 在 unix 系统上，您可以使用 shell 命令设置时间：
> 
> `TZ_adjust=-8; echo T$(($(date +%s)+6060$TZ_adjust)) > /dev/tty.usbserial-A8008pym`

我在终端上试过

```
>export TZ_adjust=-8; echo T$(($(date +%s)+6060$TZ_adjust)) > /dev/tty.usbmodemfd131 
```

我得到许可被拒绝。

我究竟做错了什么？有没有更简单的方法可以将 arduino 上的时间与我的电脑同步？

**编码**

```
#include <Time.h>  

#define TIME_MSG_LEN  11   // time sync to PC is HEADER followed by unix time_t as ten ascii digits
#define TIME_HEADER  'T'   // Header tag for serial time sync message
#define TIME_REQUEST  7    // ASCII bell character requests a time sync message 

void setup()  {
  Serial.begin(9600);
  setSyncProvider( requestSync);  //set function to call when sync required
  Serial.println("Waiting for sync message");
}

void loop(){    
  if(Serial.available() ) 
  {
    processSyncMessage();
  }
  if(timeStatus()!= timeNotSet)   
  {
    digitalWrite(13,timeStatus() == timeSet); // on if synced, off if needs refresh  
    digitalClockDisplay();  
  }
  delay(1000);
}

void digitalClockDisplay(){
  // digital clock display of the time
  Serial.print(hour());
  printDigits(minute());
  printDigits(second());
  Serial.print(" ");
  Serial.print(day());
  Serial.print(" ");
  Serial.print(month());
  Serial.print(" ");
  Serial.print(year()); 
  Serial.println(); 
}

void printDigits(int digits){
  // utility function for digital clock display: prints preceding colon and leading 0
  Serial.print(":");
  if(digits < 10)
    Serial.print('0');
  Serial.print(digits);
}

void processSyncMessage() {
  // if time sync available from serial port, update time and return true
  while(Serial.available() >=  TIME_MSG_LEN ){  // time message consists of a header and ten ascii digits
    char c = Serial.read() ; 
    Serial.print(c);  
    if( c == TIME_HEADER ) {       
      time_t pctime = 0;
      for(int i=0; i < TIME_MSG_LEN -1; i++){   
        c = Serial.read();          
        if( c >= '0' && c <= '9'){   
          pctime = (10 * pctime) + (c - '0') ; // convert digits to a number    
        }
      }   
      setTime(pctime);   // Sync Arduino clock to the time received on the serial port
    }  
  }
}

time_t requestSync()
{
  Serial.print(TIME_REQUEST,BYTE);  
  return 0; // the time will be sent later in response to serial mesg
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T22:08:03.623

康拉德和我在[聊了 20 分钟](https://chat.stackoverflow.com/rooms/19409/discussion-between-david-k-and-conrad-c)后发现了解决方案：

```
To set the variable to EST
TZ_adjust=-5;

sudo echo "T$(($(date +%s)+60*60*$TZ_adjust))" >/dev/tty.usbmodemfa131 
```

# python - 使用列表中的随机元素创建 numpy 数组

> ID：13335407
> 
> 赞同：3
> 
> 时间：2012-11-11T21:00:08.173
> 
> 标签：python, arrays, list, random, numpy

有没有一种有效的方法来创建一个任意长的 numpy 数组，其中每个维度由从长度 >= *n的列表中提取的**n 个*元素组成？对于每个维度，列表中的每个元素只能绘制一次。

 *例如，如果我有 list `l = ['cat', 'mescaline', 'popcorn']`，我希望能够，例如通过键入类似的东西`np.random.pick_random(l, (3, 2), replace=false)`，创建一个 array `array([['cat', 'popcorn'], ['cat', 'popcorn'], ['mescaline', 'cat']])`。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T23:51:48.817

有几种方法可以做到这一点，每种方法都有其优点/缺点，以下四种方法就在我的脑海中......

*   pythons own `random.sample`，很简单并且是内置的，虽然它可能不是最快的......
*   `numpy.random.permutation`再次简单，但它创建了一个我们必须切片的副本，**哎呀**！
*   `numpy.random.shuffle`因为它就地洗牌所以速度更快，但我们仍然需要切片。
*   `numpy.random.sample`是最快的，但它只适用于 0 到 1 的区间，所以我们必须对其进行归一化，并将其转换为整数以获得随机索引，最后我们仍然需要切片，*注意归一化为我们想要的大小不会生成均匀随机分布。*

这里有一些基准。

```
import timeit
from matplotlib import pyplot as plt

setup = \
"""
import numpy
import random

number_of_members = 20
values = range(50)
"""

number_of_repetitions = 20
array_sizes = (10, 200)

python_random_times = [timeit.timeit(stmt = "[random.sample(values, number_of_members) for index in xrange({0})]".format(array_size),
                                     setup = setup,                      
                                     number = number_of_repetitions)
                                        for array_size in xrange(*array_sizes)]

numpy_permutation_times = [timeit.timeit(stmt = "[numpy.random.permutation(values)[:number_of_members] for index in xrange({0})]".format(array_size),
                               setup = setup,
                               number = number_of_repetitions)
                                    for array_size in xrange(*array_sizes)]

numpy_shuffle_times = [timeit.timeit(stmt = \
                                """
                                random_arrays = []
                                for index in xrange({0}):
                                    numpy.random.shuffle(values)
                                    random_arrays.append(values[:number_of_members])
                                """.format(array_size),
                                setup = setup,
                                number = number_of_repetitions)
                                     for array_size in xrange(*array_sizes)]                                                                    

numpy_sample_times = [timeit.timeit(stmt = \
                                    """
                                    values = numpy.asarray(values)
                                    random_arrays = [values[indices][:number_of_members] 
                                                for indices in (numpy.random.sample(({0}, len(values))) * len(values)).astype(int)]
                                    """.format(array_size),
                                    setup = setup,
                                    number = number_of_repetitions)
                                         for array_size in xrange(*array_sizes)]                                                                                                                                            

line_0 = plt.plot(xrange(*array_sizes),
                             python_random_times,
                             color = 'black',
                             label = 'random.sample')

line_1 = plt.plot(xrange(*array_sizes),
         numpy_permutation_times,
         color = 'red',
         label = 'numpy.random.permutations'
         )

line_2 = plt.plot(xrange(*array_sizes),
                    numpy_shuffle_times,
                    color = 'yellow',
                    label = 'numpy.shuffle')

line_3 = plt.plot(xrange(*array_sizes),
                    numpy_sample_times,
                    color = 'green',
                    label = 'numpy.random.sample')

plt.xlabel('Number of Arrays')
plt.ylabel('Time in (s) for %i rep' % number_of_repetitions)
plt.title('Different ways to sample.')
plt.legend()

plt.show() 
```

结果：

![在此处输入图像描述](../Images/1276569619c229148931792043fc853f.png)

所以它看起来`numpy.random.permutation`是最糟糕的，不足为奇，蟒蛇自己`random.sample`拥有它，所以它看起来像是一场激烈的竞争，并且`numpy.random.shuffle`逐渐退出，所以任何一个都足够了，即使有更高的内存占用我仍然更喜欢它，因为我真的不需要构建数组我只需要随机索引......`numpy.random.sample``numpy.random.sample``numpy.random.sample`

```
$ uname -a
Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386

$ python --version
Python 2.6.1

$ python -c "import numpy; print numpy.__version__"
1.6.1 
```

**更新**

不幸的是`numpy.random.sample`，它不会从人群中*提取*独特的元素，所以你会得到重复，所以坚持使用 shuffle 也一样快。

**更新 2**

如果您想保留在 numpy 中以利用其一些内置功能，只需将值转换为 numpy 数组。

```
import numpy as np
values = ['cat', 'popcorn', 'mescaline']
number_of_members = 2
N = 1000000
random_arrays = np.asarray([values] * N)
_ = [np.random.shuffle(array) for array in random_arrays]
subset = random_arrays[:, :number_of_members] 
```

请注意，这里的 N 非常大，因此您将获得重复数量的排列，排列我的意思是值的顺序而不是排列中的重复值，因为从根本上说，如果只是计算，任何给定的有限集合上都有有限数量的排列整个集合然后它的 n!，如果只选择 k 个元素它的 n!/(n - k)! 即使不是这种情况，这意味着我们的集合要大得多，我们仍然可能会根据随机函数实现得到重复，因为 shuffle/permutation/... 等等只适用于当前集合并且不知道在人口中，这可能会或可能不会被接受，这取决于您要实现的目标，如果您想要一组独特的排列，那么您将生成该组并对其进行二次抽样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T21:06:52.057

这是一种使用 numpy's 的方法`np.random.randint`：

```
In [68]: l = np.array(['cat', 'mescaline', 'popcorn'])

In [69]: l[np.random.randint(len(l), size=(3,2))]
Out[69]: 
array([['cat', 'popcorn'],
       ['popcorn', 'popcorn'],
       ['mescaline', 'cat']], 
      dtype='|S9') 
```

编辑：在每个元素在每行中最多出现一次的附加细节之后

这不是很节省空间，您需要更好的东西吗？

```
In [29]: l = np.array(['cat', 'mescaline', 'popcorn'])

In [30]: array([np.random.choice(l, 3, replace=False) for i in xrange(5)])
Out[30]: 
array([['mescaline', 'popcorn', 'cat'],
       ['mescaline', 'popcorn', 'cat'],
       ['popcorn', 'mescaline', 'cat'],
       ['mescaline', 'cat', 'popcorn'],
       ['mescaline', 'cat', 'popcorn']], 
      dtype='|S9') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T21:07:00.853

```
>>> import numpy
>>> l = numpy.array(['cat', 'mescaline', 'popcorn'])
>>> l[numpy.random.randint(0, len(l), (3, 2))]
array([['popcorn', 'mescaline'],
       ['mescaline', 'popcorn'],
       ['cat', 'cat']], 
      dtype='|S9') 
```*

# android - jarsigner “只能指定一个别名”

> ID：13335419
> 
> 赞同：2
> 
> 时间：2012-11-11T21:01:51.353
> 
> 标签：android, android-keystore

```
C:\Program Files\Java\jdk1.7.0_01\bin> jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore Cartoons.keystore Cartoons.apk Cartoons 
```

运行此命令时出现此错误：只能指定一个别名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:12:15.330

一种方法是重命名路径以删除空格，因此：

`C:\a folder with spaces\`应该替换为`C:\a_folder_with_spaces\`

或者在你的情况下

```
C:\Program_Files\Java\jdk1.7.0_01\bin 
```

正如评论中指出的那样，替代方法是指定密钥库和 apk 文件的完整路径，并在它们周围加上引号：（*虽然我没有声称已经对此进行了测试。大概是 EJP，他指出了这一点，有*）

```
jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore "C:/Program Files/..../Cartoons.keystore" "C:/Program Files/...../Cartoons.apk" "C:/Program Files/..../Cartoons" 
```

如果您要经常这样做，我更喜欢只使用不带空格的文件夹的解决方案，因为这些论点是满口的，但对于一两次来说，上述可能更容易。

# php - Mysql加入不应该加入的表

> ID：13335425
> 
> 赞同：0
> 
> 时间：2012-11-11T21:02:20.410
> 
> 标签：php, mysql

我的代码中出现了一个问题，但是当我在 phpmyadmin 中测试查询时，我得到了`NULL`（就像它应该是的那样）

我想加入几个表来显示有关用户的所有信息。用户表包含有关客户端的基本信息。在我的页面上，我想添加有关用户*可能的*医生访问、物理治疗师访问和专家治疗的信息。每个连接都存储在不同的表中，如下所示：

```
 +------+-------------+--------------+
| n_id | n_client_id | n_connect_id |
+------+-------------+--------------+
|  1   |     1       |       1      |
+------+-------------+--------------+
|  2   |     1       |       2      |
+------+-------------+--------------+ 
```

`n_connect_id`可以是存储在匹配表中的医生物理治疗师和/或专家记录的 ID。

因为并非所有用户都会在所有三个（医生、物理治疗师和专家）表中都有记录，所以在某些情况下`NULL`会是输出。

当我在 phpmyadmin 中测试我的查询时，`$client = 1;`我得到以下输出（这是正确的，因为医生的访问仅适用于`client_id 1`）：

```
 +----------+------------+---------------+-----------+------------+-------------+--------------+---------------------+--------------+---------------------+--------------+------------------+-------------------------------+---------------------+-------------------------+---------------------------+
| clientId | clientName | clientAddres  | clientZip | clientCity | clientPhone | clientMail   | clientDoctorCompany | clientDoctor | clientPhysioCompany | clientPhysio | clientSpecialist | clientSpecialistsSpecialities | clientDoctorRecords | clientDoctorRecordsDate | clientDoctorRecordsParaph |
+----------+------------+---------------+-----------+------------+-------------+--------------+---------------------+--------------+---------------------+--------------+------------------+-------------------------------+---------------------+-------------------------+---------------------------+
| 1        | Name       | Address 1     | 1234 AB   | City       | 0612345678  | info@url.com | Company 1           | Doctor 1     | Physio Company  1   | Therapist 1  | Specialist 1     | specialty 1, specialty 2      | visit 1             | 2012-11-11              | MK                        |
+----------+------------+---------------+-----------+------------+-------------+--------------+---------------------+--------------+---------------------+--------------+------------------+-------------------------------+---------------------+-------------------------+---------------------------+ 
```

当我在 phpmyadmin 中测试我的查询时，`$client = 2;`我得到以下输出（这是正确的，因为医生的访问仅适用于`client_id 1`）：

```
 +----------+------------+---------------+-----------+------------+-------------+--------------+---------------------+--------------+---------------------+--------------+------------------+-------------------------------+---------------------+-------------------------+---------------------------+
| clientId | clientName | clientAddres  | clientZip | clientCity | clientPhone | clientMail   | clientDoctorCompany | clientDoctor | clientPhysioCompany | clientPhysio | clientSpecialist | clientSpecialistsSpecialities | clientDoctorRecords | clientDoctorRecordsDate | clientDoctorRecordsParaph |
+----------+------------+---------------+-----------+------------+-------------+--------------+---------------------+--------------+---------------------+--------------+------------------+-------------------------------+---------------------+-------------------------+---------------------------+
| 1        | Name       | Address 1     | 1234 AB   | City       | 0612345678  | info@url.com | Company 1           | Doctor 1     | Physio Company  1   | Therapist 1  | Specialist 1     | specialty 1, specialty 2      | NULL                | NULL                    | NULL                      |
+----------+------------+---------------+-----------+------------+-------------+--------------+---------------------+--------------+---------------------+--------------+------------------+-------------------------------+---------------------+-------------------------+---------------------------+ 
```

当我在我的网站上运行代码时，它会不断输出所有记录，如果我更改`$client`

这是我使用的代码

```
 <?php

    class ClientData{
        public $clientId;
        public $clientName;
        public $clientAddress;
        public $clientZip;
        public $clientCity;
        public $clientPhone;
        public $clientMail;
        public $clientDoctor;
        public $clientDoctorCompany;
        public $clientDoctorRecords;
        public $clientDoctorRecordsDate;
        public $clientDoctorRecordsParaph;
        public $clientPhysio;
        public $clientPhysioCompany;
        public $clientSpecialist;
        public $clientSpecialistsSpecialities;
    }

    class clientManagement{

        public $cInfo = Array();
        public $clientInfo = Array();
        public $querystring;

        [..]

        public function getClientDetails($client){

            $dbdata = new mySQLAccessData();
            $db = new PDO($dbdata->hostname,$dbdata->username,$dbdata->password);
            $sql = "
                SELECT 
                    client.c_id AS clientId, client.c_name AS clientName, client.c_address AS clientAddress, client.c_zip AS clientZip, client.c_city AS clientCity, client.c_tel AS clientPhone, client.c_mail AS clientMail, 
                    doctorCompany.d_name AS clientDoctorCompany, 
                    doctor.d_name AS clientDoctor, 
                    physioCompany.p_name AS clientPhysioCompany, 
                    physio.p_name AS clientPhysio, 
                    specialist.s_name AS clientSpecialist, 
                    GROUP_CONCAT(DISTINCT specialities.s_specialty) AS clientSpecialistsSpecialities, 
                    GROUP_CONCAT(DISTINCT dvr.dv_records) AS clientDoctorRecords, 
                    GROUP_CONCAT(DISTINCT dvr.dv_datetime) AS clientDoctorRecordsDate, 
                    GROUP_CONCAT(DISTINCT dvr.dv_paraph) AS clientDoctorRecordsParaph

                FROM adm_clients AS client

                    LEFT JOIN norm_client_doctor AS ncd ON ncd.ncd_client_id = client.c_id
                    LEFT JOIN adm_doctor_company AS doctorCompany ON doctorCompany.d_id = ncd.ncd_doctor_id
                    LEFT JOIN norm_doctor_company AS ndc ON ndc.ndc_company_id = doctorCompany.d_id
                    LEFT JOIN adm_doctor_person AS doctor ON doctor.d_id = ncd.ncd_doctor_id

                        LEFT JOIN adm_doctor_visit_records AS dvr ON dvr.dv_client_id = client.c_id

                    LEFT JOIN norm_client_physio AS ncp ON ncp.ncf_client_id = client.c_id
                    LEFT JOIN adm_physiotherapist_company AS physioCompany ON physioCompany.p_id = ncp.ncf_physio_id
                    LEFT JOIN norm_physio_company AS npc ON npc.nfc_company_id = physioCompany.p_id
                    LEFT JOIN adm_physiotherapist_person AS physio ON physio.p_id = npc.nfc_physio_id

                    LEFT JOIN norm_client_specialist AS ncs ON ncs.ncs_client_id = client.c_id
                    LEFT JOIN adm_specialist_person AS specialist ON specialist.s_id = ncs.ncs_specialist_id
                    LEFT JOIN norm_specialist_specialities AS nss ON nss.nsc_company_id = specialist.s_id
                    LEFT JOIN adm_specialist_specialities AS specialities ON specialities.s_id = nss.nsc_specialist_id

                WHERE client.c_id = '".$client."'
            ";
            $result = $db->query($sql); 
            $obj = $result->setFetchMode(PDO::FETCH_INTO, new ClientData);
            $i = 0;
            foreach($result as $show){
                $i++;
                $this->clientInfo[$i] = new ClientData();
                $this->clientInfo[$i]->clientId = $show->clientId;
                $this->clientInfo[$i]->clientName = $show->clientName;
                $this->clientInfo[$i]->clientAddress = $show->clientAddress;
                $this->clientInfo[$i]->clientZip = $show->clientZip;
                $this->clientInfo[$i]->clientCity = $show->clientCity;
                $this->clientInfo[$i]->clientPhone = $show->clientPhone;
                $this->clientInfo[$i]->clientMail = $show->clientMail;
                $this->clientInfo[$i]->clientDoctor = $show->clientDoctor;
                $this->clientInfo[$i]->clientDoctorCompany = $show->clientDoctorCompany;
                $this->clientInfo[$i]->clientDoctorRecords = $show->clientDoctorRecords;
                $this->clientInfo[$i]->clientDoctorRecordsDate = $show->clientDoctorRecordsDate;
                $this->clientInfo[$i]->clientDoctorRecordsParaph = $show->clientDoctorRecordsParaph;
                $this->clientInfo[$i]->clientPhysioCompany = $show->clientPhysioCompanyclientDoctorRecordsParaph;
                $this->clientInfo[$i]->clientPhysio = $show->clientPhysio;
                $this->clientInfo[$i]->clientSpecialist = $show->clientSpecialist;
                $this->clientInfo[$i]->clientSpecialistsSpecialities = $show->clientSpecialistsSpecialities;
            }
        }

        public function displayClientDetails(){
            $output = '<h3>Klantgegevens</h3>
                <div id="clientInfoContainer">
                <div id="clientStaticInfo">
                    <p><img src="'._BACKEND_URL.'/Inc/Im/icons/user_64.png" class="userImage"></p>
                    <p><small>Klant aangemaakt op 10/12/2012</small></p>
                    <p><small>Laatste wijziging op 10/12/2012</small></p>
                </div>
                <div id="clientDynamicInfo">
                    <table id="clientInfoTable">
                        <colgroup>
                            <col class="tableLabel">
                            <col class="tableValue">
                        </colgroup>
                        <thead>
                            <tr>
                                <th>Label</th>
                                <th>Waarde</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Naam</td>
                                <td>'.$this->clientInfo[1]->clientName.'</td>
                            </tr>
                            <tr>
                                <td>Adres</td>
                                <td>'.$this->clientInfo[1]->clientAddress.'</td>
                            </tr>
                            <tr>
                                <td>Postcode woonplaats</td>
                                <td>'.$this->clientInfo[1]->clientZip.' '.$this->clientInfo[1]->clientCity.'</td>
                            </tr>
                            <tr>
                                <td>Telefoonnummer</td>
                                <td>'.$this->clientInfo[1]->clientPhone.'</td>
                            </tr>
                            <tr>
                                <td>Email</td>
                                <td>'.$this->clientInfo[1]->clientMail.'</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                </div>
                <div id="physio-visit-list" class="collapseContainer">
                    <h4>Praktijk fysiotherapie: <strong>'.$this->clientInfo[1]->clientPhysioCompany.'</strong>. Behandelend arts: <strong>'.$this->clientInfo[1]->clientPhysio.'</strong></h4>
                    <div class="collapsableContent">
                        <p>'.$this->clientInfo[1]->clientSpecialistsSpecialities.'</p>
                    </div>
                </div>
                <div id="doctor-visit-list" class="collapseContainer">
                    <h4>Dokterspraktijk: <strong>'.$this->clientInfo[1]->clientDoctorCompany.'</strong>. Behandelend arts: <strong>'.$this->clientInfo[1]->clientDoctor.'</strong></h4>
                    <div class="collapsableContent">
                        <p>'.$this->clientInfo[1]->clientDoctorRecords.'</p>
                    </div>
                </div>
            ';
            echo($output);
        }

    }
?> 
```

我认为问题出在某处`LEFT JOIN adm_doctor_visit_records AS dvr ON dvr.dv_client_id = client.c_id`，因为那是存储医生就诊记录的表。我以为我只在 user_id 上加入了它，但显然这里出了点问题。

PS，我刚开始 OOP，所以如果我做错了，这就是我理解它的方式（尽管开放供建议）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:39:58.507

您正在执行 GROUP_CONCAT，但您没有提供 GROUP BY 子句。这将导致奇怪/错误的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:24:12.350

啊..解决了它，不知何故通过`$client`. 奇怪的是它怎么会发生。谢谢您的帮助！

# image - 如何在网页上显示图像

> ID：13335438
> 
> 赞同：2
> 
> 时间：2012-11-11T21:03:33.067
> 
> 标签：image, email

如何`src=cid:`在网页上显示图像？我可以创建带有`src:cid` 指向 mime 多部分的图像标签的 mime 电子邮件。但我无法获得一个 html 网页来显示图像`<img src=cid:....>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T04:36:57.670

网页的工作方式与 html 电子邮件不同。为了使网页正常工作，您必须提取所有图像并将所有图像更改`<img src="...">`为指向 Web 服务器目录中的图像。正则表达式可能会有所帮助。

# gwt - GWT 编辑器框架

> ID：13335441
> 
> 赞同：1
> 
> 时间：2012-11-11T21:04:05.427
> 
> 标签：gwt, gwt-editors

当我在编辑器中使用 DoubleBox 来编辑双属性 (RequestFactoryEditorDriver) 时，如果我清除框的值，我得到空指针异常，这是正常的吗？

如果是这样，我如何使用 JSR 303 验证来验证 DoubleBox？

我的代码看起来像这样：

```
 @DecimalMin(value="0.0", message="decimalMin:0.0", groups = {ImpuestoGroup.class,    ImpuestoIepsGroup.class})
  public double getTasaImpuesto();

 <g:DoubleBox ui:field="tasaImpuesto"></g:DoubleBox>
 @UiField DoubleBox tasaImpuesto; 
```

当我调用 driver.flush() 需要检查约束时，我得到了以下结果：

如果我输入一个不同于数字的值，我会在列表中得到错误值如果我输入一个低于 0.0 的值，我可以使用 driver.setConstraintViolations(constraints) 将约束设置为 EditorDriver；

当我将字段留空时，我期望一个具有错误值或约束但不是空指针异常的列表。

我引起我注意的是这一行：

```
 Caused by: com.google.gwt.core.client.JavaScriptException: (TypeError) : Cannot read property 'value_0' of null
at Unknown.$doubleValue(http://localhost:9876/proj/C6E66C9FC3DCB1FC08DFFFC07FE049E0.cache.js@21:38447) 
```

似乎 DoubleBox 无法处理空值。

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:16:00.123

[在Google Groups](https://groups.google.com/d/msg/google-web-toolkit/IiPJhHcDajU/tSQEZlBuq5kJ)上回答，为方便起见，在此处复制：

`DoubleBox`使用`DoubleParser`. 如果值是空字符串则`DoubleParser`返回，否则使用 a ，如果无法解析则抛出 a 。您编辑的对象的属性类型为，而不是，因此当该字段为空时，返回，并且编辑器框架尝试将 拆箱以将其放入您的属性中，因此. 带有任何非法值，抛出；在这种情况下，返回最后一个已知值，这就解释了为什么它不会在这种情况下抛出。`null``NumberFormat``ParserException``double``java.lang.Double``getValue()``null``null``double``NullPointerException``DoubleParser``ValueBoxEditor`

增强请求：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=7783](http://code.google.com/p/google-web-toolkit/issues/detail?id=7783)

# bash - 将文件表（存储为 bytea）复制到磁盘上的单个文件中？

> ID：13335447
> 
> 赞同：2
> 
> 时间：2012-11-11T21:04:34.227
> 
> 标签：bash, postgresql, shell, copy

使用 postgresql 8.4 中的 COPY 命令导出 bytea 类型的数据，这对于单个记录可以正常工作：

```
copy (SELECT encode(test_column, 'hex') FROM test_table LIMIT 1) TO '/home/user/file.hex' 
```

之后，我使用`xxd`命令来获取适当的文件类型。如果这是一个非常菜鸟的问题，请提前抱歉，但是是否可以将所有记录导出到 file-1、file-2...file-n 中？什么是正确的语法或脚本？我似乎无法在 postgresql 副本的人中找到它。
例如，这是一个单行的 bash 脚本：

```
#!/bin/bash

psql \  
    -P t \  
    -P format=unaligned \  
    -X \  
    -U myuser \  
    -h myhost \  
    -c "select my_bytea_col from my_table where id=1" \  
    mydb \  
| xxd -r -p > dump.txt 
```

但是，我需要在所有 id 上执行它，并将它们保存在不同的文件下，例如 file1.txt、file2.txt、file3.txt.. 等。
也可能非常有趣的是能够使用另一列的数据（例如 id）以相应地命名生成的 hex 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:45:45.283

我会使用直接支持 PostgreSQL 的脚本语言。

`regress`给定一个名为的数据库，该数据库包含一个名为`files`列`fileid`（一个整数）和`filedata`（一个字节）的表，这可以很好地完成这项工作。它将数据写入由`outdir`变量指定的目录中的文件中，这些文件的命名方式类似于`{filenameprefix}{fileid}{filenamesuffix}`.

```
#!/usr/bin/env python3
import os
import sys
import psycopg2

outdir = "files"
filenameprefix = "f"
filenamesuffix = ""

def main():
        os.makedirs(outdir, exist_ok=True)
        conn = psycopg2.connect("dbname=regress")
        curs = conn.cursor();
        curs.execute("SELECT fileid, filedata FROM files;")
        for (fileid, filedata) in curs:
            fn = filenameprefix+str(fileid)+filenamesuffix
            f = open(os.path.join(outdir, fn), "wb")
            f.write(filedata)
            f.close()
        conn.close();

if __name__ == '__main__':
        main() 
```

我使用这段代码来创建上面脚本中提到的测试环境：

```
#!/usr/bin/env python3
import psycopg2
conn = psycopg2.connect("dbname=regress")
curs = conn.cursor()
curs.execute('CREATE TABLE files(fileid serial primary key, filedata bytea);')
for i in range(1,10)
    curs.execute('INSERT INTO  files(filedata) VALUES (%s);', (psycopg2.Binary(open('/dev/urandom','rb').read(1024)),)) 
```

编辑：为了使其与您在问题中使用的命名相同，我只是假设它是通用匿名名称，请更改：

*   `regress`-> 无论您的数据库名称是什么
*   `files`->`my_table`
*   `fileid`->`id`
*   `filedata`->`my_bytea_col`

相当于这个脚本可以在bash中完成，只是比较麻烦。您需要使用协同流程以事务安全的方式执行此操作。您需要创建一个`psql`协同进程并在其中打开一个`SERIALIZABLE`事务，然后`SELECT fileid FROM files`进入一个 shell 变量。遍历 shell 变量并为每个 ID 循环`SELECT filedata FROM files`到`xxd`管道中，以指向使用 ID 上的字符串插值创建的文件名。

IMO：不值得麻烦，使用可以让您直接访问 PostgreSQL 的脚本语言。

如果您不需要它，交易安全会更容易一些；只需在一次调用中获取 ID `psql`，然后在后续调用中获取文件数据。它会更慢并且不会是交易安全的，但它会更容易。

# canvas - 在 Three.js 中，与画布相比，我使用 WebGL 渲染的任何内容都非常模糊

> ID：13335450
> 
> 赞同：4
> 
> 时间：2012-11-11T21:04:50.237
> 
> 标签：canvas, webgl, three.js

我环顾四周，找不到原因。

当使用 WebGL 进行渲染时，一切都是“模糊的”，就好像它被过度抗锯齿而你无法分辨出任何东西。画布渲染器按预期工作。粒子也不会出现在 WebGL 渲染器中，尽管粒子系统和普通网格会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:49:13.240

对于不透明的粒子：确保已将纹理加载为 RGBA（默认）而不是 RGB。`Particle`可能还需要`transparent`将标志设置为 true。

关于模糊的一个疯狂猜测：Chrome 有一个错误，一段时间后 WebGL 视口开始变小，模糊了一切。打开一个新标签可以修复它。

# jquery - jQuery 验证引擎（添加语言支持）

> ID：13335455
> 
> 赞同：0
> 
> 时间：2012-11-11T21:05:18.013
> 
> 标签：jquery, jquery-validation-engine

我刚刚发现了很棒的[jQuery Validation Engine 工具](https://github.com/posabsolute/jQuery-Validation-Engine)。

我知道我必须编辑[语言文件](https://github.com/posabsolute/jQuery-Validation-Engine/tree/master/js/languages)，以便向其中添加希腊语支持。我不明白这个引擎将如何获取`jquery.validationEngine-gr.js`我愿意为希腊语创建的内容。它是在某处硬编码还是什么？

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:48:32.517

根据[文件](http://posabsolute.github.com/jQuery-Validation-Engine/#usage/references)，

> 首先在您的页面上包含 jQuery
> 
> ```
> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js" type="text/javascript"></script> 
> ```
> 
> 包括 jquery.validationEngine 及其语言环境
> 
> ```
> <script src="js/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>
> <script src="js/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script> 
> ```
> 
> 最后包括所需的主题
> 
> ```
> <link rel="stylesheet" href="css/validationEngine.jquery.css" type="text/css"/> 
> ```

您可以更改包含`jquery.validationEngine-en.js`以引用您自己的翻译。

# ruby-on-rails - 带有 s3 的回形针不适用于 Heroku

> ID：13335466
> 
> 赞同：1
> 
> 时间：2012-11-11T21:07:00.810
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我正在使用 Paperclip 和 s3 为我的 Rails 应用程序上传照片。它在开发中有效，但在生产中无效。当我尝试上传照片时，我收到一般的 Heroku 错误消息：“出了点问题”。

但是出了什么问题！？！我不知道。

如果我不上传照片，我可以创建新记录，所以这绝对是 s3 的东西。

我已经准确地遵循了本[教程](https://devcenter.heroku.com/articles/paperclip-s3)（在我看来），但它不起作用。

如果您需要查看我拥有的任何代码，请告诉我。谢谢。

**更新**

好的，我解决了问题。

首先我创建了一个 YAML 文件：

```
development:
  bucket: bucket-name
  access_key_id: key-id
  secret_access_key: access-id
test:
  bucket: bucket-name
  access_key_id: key-id
  secret_access_key: access-id
production:
  bucket: bucket-name
  access_key_id: key-id
  secret_access_key: access-id 
```

然后我将它添加到我的用户模型 user.rb 文件中：

```
has_attached_file :photo,
                  :storage => :s3, 
                  :s3_credentials => "#{Rails.root}/config/s3.yml",
                  :path => "user/:attachment/:style/:id.:extension" 
```

那成功了。

# javascript - 从回调中触发时没有从函数返回值

> ID：13335472
> 
> 赞同：0
> 
> 时间：2012-11-11T21:07:36.107
> 
> 标签：javascript, jquery, json, loops

我正在研究向其他 jQuery 回调提供数据的函数。问题是我还没有让它工作。当我将 fetchdata() 函数的内容直接放入 .click 回调时，它可以工作，但我需要一个单独的通用函数，以便将来可以将它与多个不同的回调一起使用。谁能指出我在这里做错了什么？似乎 fetchdata() 函数中的循环中断并且没有返回值。

```
 function fetchdata(){
        var html;
        $.ajax({
            url:'/test.php', 
            data:{ action: 'fetch-data' },
            dataType:'json',
            async: false,
            success: function(data){
                var entries = [];
                $.each(data, function(id, val){
                    entries.push(val.sample);
                });
                var html = entries.join('');
            }
        });
        return html;
    }
    $(document).on('click', 'a.btn.execute', function(e) {
        e.preventDefault();
        var html =  fetchdata();
        $('div#container').html(html);
    }); 
```

PS：我为上面的演示修改了我的代码，问题应该仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:11:18.050

发生这种情况是因为您`var html = entries.join('');`进入了与您之前的 html 变量重叠的成功回调。只是`html = entries.join('');`会工作。但请不要真的使用`async: false`，因为它已经过时了

这是一个更好的解决方案：

```
function fetchdata(callback){
    $.ajax({
        url:'/test.php', 
        data:{ action: 'fetch-data' },
        dataType:'json',
        success: function(data){
            var entries = [];
            $.each(data, function(id, val){
                entries.push(val.sample);
            });
            var html = entries.join('');
            callback(html);
        }
    });
}
$(document).on('click', 'a.btn.execute', function(e) {
    e.preventDefault();
    fetchdata(function(html){
      $('div#container').html(html);
    });
}); 
```

# java - 测试线程程序

> ID：13335473
> 
> 赞同：0
> 
> 时间：2012-11-11T21:07:53.707
> 
> 标签：java, multithreading, concurrency

我已经开发了一个使用线程来解决[读者-作家问题的解决方案。](http://en.wikipedia.org/wiki/Readers-writers_problem)

我有一个监视器类和一个 Reader 和一个 Writer 类。Reader 和 writer 类扩展线程。

现在我正在测试这样的代码：

```
public static void main(String[] args) {

  ReadersWriters controller = new ReadersWriters();
  Reader r0=new Reader(controller);
  Reader r1=new Reader(controller);
  Reader r2=new Reader(controller);
  Reader r3=new Reader(controller);
  Writer w0=new Writer(controller);
  Writer w1=new Writer(controller);
  Writer w2=new Writer(controller);
  Writer w3=new Writer(controller);
  r0.run();
  w0.run();
  r2.run();
  r3.run();
  r1.run();
  r3.run();
  r2.run();
  w2.run();
  r1.run();
  w1.run();
  w3.run();
 } 
```

我得到的输出是这样的：

```
Reader number 0 arrives
Reader number 0 starts to read
Reader number 0 finishes reading
Writer number 0 arrives
Writer number 0 starts to write
Writer number 0 finishes writing
Reader number 2 arrives
Reader number 2 starts to read
Reader number 2 finishes reading 
```

...等等。这里的问题是我无法测试并发性。因为看起来我的主程序正在一个接一个地调用 Reader 或 writer，这不是我想要实现的那种测试。

任何人都可以帮助我。请随时询问您可能需要的任何澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:10:33.977

看起来您已经实现了一个`Runnable`，但没有将它包装在一个线程中。我怀疑你正在调用`run()`你的`Runnable`，而不是`start()`线程。查看有关[定义/启动线程](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)的教程部分。

您无法在单元测试等中可靠地测试多线程代码。它可以工作一次或多次，并且在一百万个测试用例中仅失败一次（或立即在生产中）。如果您不确定，我更喜欢线程安全的编码技术（例如编写不可变对象）、静态代码分析工具（例如 PMD）以及可能的[代码审查。](https://codereview.stackexchange.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:10:35.013

您应该使用 start 方法调用（调用）线程运行方法。`public void run()`应该使用`thread.start()`.

```
r0.run(); 
```

应该

```
r0.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T21:11:38.240

您应该实现接口并使用 a来运行/控制线程，而不是扩展`Thread`和调用。`Thread.run()``Runnable``ThreadPoolExecutor`

# c# - 逐行流式传输文件并保持进度？

> ID：13335474
> 
> 赞同：0
> 
> 时间：2012-11-11T21:07:55.653
> 
> 标签：c#, winforms, .net-4.0, filestream

我需要读取从 1mb 到 2gb 的各种大小的文件，因为这些文件的大小可能很大，我正在流式传输它。

*   我如何知道读取了多少文件并跟踪它而无需预先读取所有行？

示例代码

```
int count = 0;
using (Stream stream = File.OpenRead(filename))
{
    using (StreamReader reader = new StreamReader(stream))
    {
        string item = string.Empty;
        while ((item = reader.ReadLine()) != null)
        {
            item = item.Replace("\"", ""); // remove unwanted double quotes
            if (item.Length < 2) // dont need lines with less then 2 char
                continue;

            if (fine add to db) 
                count++; // to keep track of good lines
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:18:50.723

您应该使用类`"Position"`中覆盖`"FileStream"`的属性`"Stream"`。

看看[这里](http://msdn.microsoft.com/en-us/library/system.io.stream.position.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:45:47.560

```
var remaining = yourFile.Length;
var goodLines = File.ReadLines(yourFile.FullName)
                    .Select(line => line.Replace("\"", ""))
                    .Where(line => line.Length > 1);

foreach(var goodLine in goodLines)
{
   // do something with goodLine

   // this will be slightly off since you remove quotes.
   remaining -= (goodLine.Length + Environment.NewLine.Length);
} 
```

[MSDN 文件.ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)

# backbone.js - 在每个模型的设置逻辑之后触发集合“就绪”事件

> ID：13335478
> 
> 赞同：0
> 
> 时间：2012-11-11T21:08:20.850
> 
> 标签：backbone.js, backbone-events

我有代表一棵树的集合。每个模型都有从服务器作为 id 的父属性。在使用传入数据重置集合后，每个模型都必须在集合中找到其父级并将引用设置为属性而不是普通的 id。之后，必须有一个从集合触发的事件，它已准备好进行渲染。

```
var node = Backbone.Model.extend({
    initialize: function(){
        //reset event fired after all models are in collection,
        //so we can setup relations
        this.collection.on('reset', this.setup, this);
    },
    setup: function(){
        this.set('parent', this.collection.get(this.get('parent')));
        this.trigger('ready', this);//-->to collection event aggregator?
    }
});
var tree = Backbone.Collection.extend({model: node}) 
```

有什么干净的方法可以查看所有模型的设置完成了吗？或者我必须在集合中编写自定义事件聚合器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:42:22.603

实际上，您想要的是绑定`reset`事件 in`Collection`而不是 in `Model`。

```
var Node = Backbone.Model.extend({

}),

Tree = Backbone.Collection.extend({
    model: Node,
    initialize: function() {
        this.on('reset', this.setup, this);
    },
    setup: function() {
        this.each(this.updateModel, this);
        //Here you have all your models setup
    },
    updateModel: function(m) {
        m.set({
            parent: this.get(m.get('parent'));
        });
    }
}) 
```

# javascript - Javascript“无限”滚动有限内容？

> ID：13335481
> 
> 赞同：12
> 
> 时间：2012-11-11T21:08:41.680
> 
> 标签：javascript, jquery, scroll, infinite-scroll

我有很多内容要在网站上显示，因此我需要使用“无限”滚动解决方案，在用户滚动到当前加载内容的末尾时加载内容。但是，我确切地知道有多少数据，我希望用户对此有所了解。我不喜欢滚动条如何让它看起来你几乎到了内容的末尾，然后突然加载了更多内容并且拇指/滑块位于滚动轨道的中间并且更窄。

我计划的解决方案是在当前内容巨大但为空的内容之后创建一个 div，然后在我加载更多内容时将其缩小。有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:24:04.880

当你设计一个 UI 元素时，你首先要问的是你希望最终用户真正体验到什么。您的解决方案将使它看起来像大量尚未存在的数据（如果它是较旧/存档的东西，它可能与用户无关）。这可能会使用户完全无法阅读内容，因为它看起来太长了。

问题是滚动条*不是*为支持扩展内容而设计的。正如您所指出的，它对此类内容具有欺骗性。您可以设计一个全新的滚动功能，提供完整的信息

1.  加载数据的长度
2.  可用卸载数据的长度
3.  如果您下载存档数据，您可能需要单独指出加载数据的哪一部分是当前数据

带有绿色背景的彩色滚动条表示已加载和当前，黄色部分表示已加载但较旧的数据，红色部分表示用户滚动时可以下载的内容会很好地做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:22:25.640

我的最终解决方案是在具有滚动条的 div 中创建一个表。我将表格的高度设置为内容总量的高度，第一行设置为未查看的部分内容的高度，下一行是当前正在查看的内容。

然后，我使用了一个与横向滚动视频游戏中使用的过程非常相似的过程，您只绘制屏幕上可见的内容，或者只绘制可见区域附近的内容。我利用航路点来跟踪用户滚动到的位置，然后刷新可见内容并使用 jquery scrollto 功能将用户保持在他们正在查看的同一位置。因此，在任何时候，只有大约一页的内容会“显示”在当前查看区域的上方或下方。

我应该注意到所有的“内容”实际上已经在客户端的系统上，所以下载不是问题。对我来说，问题是“内容”是一个庞大的 DOM 结构，如果我尝试一次处理所有内容，最终会严重降低客户端系统的速度。所以我一次只创建和显示其中的一部分。

如果您决定抓住滚动条并将其拖动到内容的底部，这确实会导致屏幕刷新时出现一些不稳定和糟糕的情况。如果我想出更好的东西，我会更新这个。

**更新** 我在我的网站上记录了如何做到这一点：http: [//0xdabbad00.com/2012/11/25/icebuddha-scrolling-javascript-infinite-scrolling-in-a-finite-area/](http://0xdabbad00.com/2012/11/25/icebuddha-scrolling-javascript-infinite-scrolling-in-a-finite-area/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T22:01:48.253

您可以在最大化文档的最后（例如 15k 像素）插入一个不显眼的字符，以便滚动条准确反映页面的深度（如果这是您的意思）。像这样的……</p>

```
 document.write('<div style="Position:Absolute; Left:0px; Top:15000px;";>.</div>'); 
```

# java - 使用包含数据的新 Array 或 ArrayList 调用超类的构造函数？

> ID：13335482
> 
> 赞同：5
> 
> 时间：2012-11-11T21:08:47.137
> 
> 标签：java, arrays, inheritance, constructor, arraylist

我正在尝试使用 ArrayList(preferred) 或其中已经包含信息的数组来调用超类的构造函数。我不知道我的语法错误是什么，或者你是否能做到？

我特别想在任一对象中插入“真”和“假”。就这两个。

```
public class TrueFalseQuestion extends MultipleChoiceQuestion
{
    Answer myAnswer;
    StringPrompt myPrompt;

    //I can create, but not initialize data up here, correct?
    //Tried creating an ArrayList, but cannot insert the strings before calling constructor

    public TrueFalseQuestion()
    {
        /* Want to call parent constructor with "true" and "false" in array or ArrayList already*/
        super(new String["true", "false"]);
        ...
    } 
```

我有一种感觉，这是一个面部护理，但我就是想不通。我尝试了各种方法，但痛苦是必须首先调用超级构造函数，因此没有机会初始化数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T21:10:00.913

使用格式：

```
super(new String[] {"true", "false"}); 
```

if`MultipleChoiceQuestion`包含这样的构造函数：

```
MultipleChoiceQuestion(String[] questionArray) 
```

如果它包含一个带有`List`参数的重载构造函数，例如：

```
MultipleChoiceQuestion(List<String> questionList) 
```

那么你可以使用：

```
super(Arrays.asList("true", "false")); 
```

或者如果`ArrayList`需要使用：

```
super(new ArrayList<String>(Arrays.asList(new String[] { "true", "false" }))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T21:17:49.537

如果您对 MultipleChoiceQuestion 类有任何控制权，则可以将构造函数更改为此：

```
public MultipleChoiceQuestion(String ... values) {} 
```

然后你就可以这样称呼它：

```
public TrueFalseQuestion() {
    super("true", "false");
} 
```

如果您以前没有听说过它们，这称为可变参数。您可以在这里阅读：http: [//docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T21:09:59.197

```
super(new String[]{"true", "false"}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T21:15:39.517

对于 a `List`（不是特别是 a `ArrayList`），您可以这样做：

```
super(Arrays.asList("true", "false")); 
```

如果你特别需要一个`Arraylist<String>`，你需要这样做：

```
super(new ArrayList<String>(Arrays.asList(new String[]{"true", "false"}))); 
```

# actionscript-3 - AS3：加载图像时返回图像

> ID：13335487
> 
> 赞同：1
> 
> 时间：2012-11-11T21:09:34.727
> 
> 标签：actionscript-3

目前我有一个函数（LoadImg），它将加载给定的文件位置并返回加载程序。最好还包括“当图像实际加载完成时”行。这通常通过事件处理程序完成。但是这样你只能说一旦图像加载运行另一个功能。但我需要“LoadImg”函数来返回图像。

```
function LoadImg(Img:String):Loader
{
var myLoader:Loader;

myLoader=new Loader();
myLoader.load(new URLRequest(Img));

return myLoader;
} 
```

我怎么能说完成后只返回'myLoader'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:33:25.227

我认为不可能将同步调用（函数返回）与异步事件（加载器完成）一起使用。

将事件侦听器附加到 Complete 事件是可行的方法，但不确定这将如何适合您的代码。

这是一个可能有用的类似问题：[Image size in AS3](https://stackoverflow.com/questions/388868/finding-loaded-image-size-in-as3-action-script-3-0)，响应对您的问题很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:24:06.803

我认为解决方案是使用代理。

这个想法是代理，在这种情况下是一个图像容器。容器可以被传回并被其他函数和对象使用来设置位置。一旦图像实际加载，加载完成处理程序可以使用加载的图像更新容器。

[您可以在http://www.as3dp.com/category/design-patterns/proxy/](http://www.as3dp.com/category/design-patterns/proxy/)阅读有关代理设计模式的 代码示例和详细说明。

# java - 找出IP地址？

> ID：13335488
> 
> 赞同：0
> 
> 时间：2012-11-11T21:09:37.507
> 
> 标签：java, android

我在 android 上有一个应用程序，我正在连接到一个网站以获取一些数据。是否有可能找出我实际连接的 IP 地址？我正在做：

```
HttpUriRequest request = new HttpGet("http://www.example.com");
DefaultHttpClient client = new DefaultHttpClient(params);
HttpResponse response = client.execute(request);

println("You connected to: " + response.getIpAddress(?)); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T21:15:43.747

您可以使用[InetAddress](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html)类获取它：

```
InetAddress addr = InetAddress.getByName(new URL("http://www.example.com").getHost());
String ipAddress = addr.getHostAddress(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:18:51.263

只需使用这个：InetAddress address = InetAddress.getByName("http://www.example.com");

# windows-phone-8 - WP8 应用程序在后台运行

> ID：13335492
> 
> 赞同：3
> 
> 时间：2012-11-11T21:10:12.760
> 
> 标签：windows-phone-8, background-agents, background-application

我正在尝试学习如何在 Windows Phone 8 上创建应用程序。我遵循了在 msdn 上发布的本[教程。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935%28v=vs.105%29.aspx)

问题是这段代码不起作用，我不知道为什么。我试图调试它。到目前为止，我发现问题`Application_RunningInBackground`是永远不会触发方法。通常，它应该在应用程序在后台运行时开始工作。或者，我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:03:12.443

WP8 不支持后台应用的多线程处理。在 WP8 中，对 WP 多任务处理的故事进行了一些补充。您指的是“GeoLocation 后台跟踪应用程序”。正如您可能从名称中推断出的那样，它仅对在后台跟踪地理位置的应用程序有用。

地理位置后台跟踪应用程序必须在 wmAppManfiest.xml 中声明自己，有一个工作的 GeoLocator 将 GeoLoc 报告回应用程序并首先由用户启动。这里的最佳用例是像诺基亚 Drive 这样的应用程序，消费者希望启动它并让这些应用程序继续在后台工作。

请注意，对非地理定位任务使用 Geolocation 背景 multitaking 违反了认证指南，Microsoft 正在跟踪此 wmAppManfiest.xml 的滥用情况。

# ios - 如何在表格视图中查看整个网址

> ID：13335494
> 
> 赞同：0
> 
> 时间：2012-11-11T21:10:16.867
> 
> 标签：ios, url, tableview, xcode4.4

我的 tableView 中有一些网址...我该怎么做才能看到不剪切的网址，例如：“http://bla-bla-bla.com/bla...”？

我需要在我的表格视图中看到这个：“http://bla-bla-bla.com/bla-bla-bla/bla-bla-bla.png”

非常感谢！

这是代码的一部分，我在其中输入数据：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellID = @"LinkID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];
    }

    NSData *n = [self.data objectAtIndex:indexPath.row];

    [cell.imageView setImageWithURL:[[NSURL alloc]initWithString: [self.data objectAtIndex:indexPath.row]] placeholderImage:[UIImage imageNamed:@"placeholder"]];

    cell.textLabel.text = [n description];

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:16:32.793

一种选择是允许表格单元格文本调整大小以修复文本。

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];
    cell.textLabel.adjustsFontSizeToFitWidth = YES;
    cell.textLabel.minimumFontSize = 8; // any smaller and it's too hard to read
} 
```

您可能还希望更改标签的`lineBreakMode`. `NSLineBreakByTruncatingMiddle`使用默认值可能会更好`NSLineBreakByTruncatingTail`。

另一种选择可能是设置多行标签并为长 URL 使用字符换行。

# node.js - 防止为 connect-redis 会话设置 TTL 以允许 allkeys-lru 用于内存策略

> ID：13335495
> 
> 赞同：0
> 
> 时间：2012-11-11T21:10:23.293
> 
> 标签：node.js, express, redis, connect

我已经使用 connect-redis 和 redis 包设置了一个非常简单的 RedisStore。我的 Session 存储有一个专用框，并且想使用 allkeys-lru maxmemory 策略进行驱逐而不是 TTL。

似乎 connect-redis 的存储不允许设置 TTL（我在创建存储时尝试在选项对象中使用 -1，看起来将 TTL 设置为 0）。关于如何做到这一点的任何建议？

另外，有没有人明白为什么这可能是一种不好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:31:50.990

查看[相关的源代码](https://github.com/visionmedia/connect-redis/blob/master/lib/connect-redis.js#L116-135)，似乎 connect-redis 不会让你在没有过期密钥的情况下使用它。在我看来，您有两个选择：

*   编写您自己的会话存储，从 connect-redis 的 RedisStore 继承但覆盖`set`，或者
*   指定一个巨大`maxAge`的，以使密钥在很远的将来过期。

我没有看到不使密钥过期并改用 lru 的问题。

# c# - 如何将 AudioProfile 与表达式编码器作业一起使用

> ID：13335498
> 
> 赞同：0
> 
> 时间：2012-11-11T21:10:47.307
> 
> 标签：c#, expression-encoder

我正在尝试对 WMA10 文件进行编码，但需要设置 VBR 质量。

```
private void Encode()
{
    MediaItem mediaItem;
    mediaItem = new MediaItem(this.fileNameToEncode);

    using (Job job = new Job())
    {
        WmaAudioProfile wmaProfile = new WmaAudioProfile();
        wmaProfile.BitsPerSample = 24;
        wmaProfile.Channels = 2;
        wmaProfile.Codec = AudioCodec.WmaProfessional;
        wmaProfile.SamplesPerSecond = 44100;

        VariableQualityBitrate vbrQuality = new VariableQualityBitrate(98);
        wmaProfile.Bitrate = vbrQuality;

        //Now that I have my profile setup
        //how can I use it?

        job.MediaItems.Add(mediaItem);
        job.OutputDirectory = @"D:\temp\";
        job.Encode();
    }
} 
```

我不明白如何将[AudioProfile](http://msdn.microsoft.com/en-us/library/microsoft.expression.encoder.profiles.wmaaudioprofile%28v=expression.40%29.aspx)实际应用于[Job](http://msdn.microsoft.com/en-us/library/microsoft.expression.encoder.job%28v=expression.40%29.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:40:15.960

我找错地方了。配置文件改为应用于 MediaItem。

`mediaItem.OutputFormat.AudioProfile = wmaProfile;`

# amazon-s3 - AWS S3 + Cloudfront 流式传输，更新文件

> ID：13335500
> 
> 赞同：0
> 
> 时间：2012-11-11T21:10:58.010
> 
> 标签：amazon-s3, amazon-web-services, amazon-cloudfront

我有一个网站，我通过 Javascript 流式传输视频。

视频存储在 Amazon S3 上，然后通过 Cloudfront 流式传输。
最近更新了文件，是一个mp4（删除了旧文件，上传了同名的新文件）。

我可以创建一个新文件，但我真的想保留相同的文件名，我知道云端有缓存，但我只读取了 24 小时，所以我不介意等待 24 小时更新我的​​视频。

但问题是超过 48 小时后，我的视频仍然是同一个旧文件。我可以做些什么来更新我的视频？

当我进入我的文件属性时，它显示“到期日期：无”，我自己没有设置任何东西。

谢谢

PS：缓存失效不适用于 Cloudfront 中的流式传输。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:04:27.840

Cloudfront 还具有[失效请求](http://docs.amazonwebservices.com/AmazonCloudFront/latest/APIReference/Actions_Invalidations.html)。通过此请求，您可以手动使分配中的元素过期。

您也可以通过 AWS 控制台执行此操作。单击您的 Cloudfront 分发以找到“无效”选项卡。您可以在此处输入所需的文件路径以使其无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:25:17.243

不幸的是，如果不使用基于文件的版本控制，您将受制于云端边缘位置。

这意味着，如果您删除 s3 服务器上的文件，您仍需要无限期地等待才能将其从边缘位置删除。不幸的是，立即删除并重新创建不会有效果。

要强制更新，您需要删除**Cloudfront Cache，然后让其过期**，然后再次添加。'

或使用基于文件的版本控制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:29:24.287

琼斯是对的，您可以设置无效，然后删除视频并重新上传。通常在 10 分钟内一切都会好起来的。如果您通过 AWS 控制台工作，您可能会考虑使用 CloudBerry S3 Explorer 或 CrossFTP 等客户端应用程序。

# html - 左文本对齐方式与不同的字母不同

> ID：13335506
> 
> 赞同：0
> 
> 时间：2012-11-11T21:12:08.967
> 
> 标签：html, css

请看以下案例：

1.

![在此处输入图像描述](../Images/4e16a2fad73f54d7ed9ac08960ae723d.png)

2.

![在此处输入图像描述](../Images/5bb96b5b4798701157b2e0c88be5d3dd.png)

3.

![在此处输入图像描述](../Images/35b7316f3683964e0654c2b1b1964a5e.png)

我正在尝试将 h1 以上（即添加维护）与以下字段标签对齐。但是不同的字母左对齐看起来不同。

在示例 1 A 中`Add Maintenance`“触及”左边框。

在示例 2 C 中没有触及左边框并且有一些空间。

在示例 3 中，B 没有触及左边框并且有一些空间，但空间比示例 2 中的稍大。

如何将它们对齐在一条直线上？

边注 ：

这都是同一个站点，我只是更改了 h1 文本的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:30:48.463

尝试不同的字体，因为在 Arial 中，“B”和“C”字母前面有一些空格，但“A”没有。你可以在这张图片中注意到它：

[http://i.stack.imgur.com/b369T.png](http://i.stack.imgur.com/b369T.png)

# opengl - GLSL abs() 坏了？

> ID：13335507
> 
> 赞同：10
> 
> 时间：2012-11-11T21:12:11.243
> 
> 标签：opengl, graphics, 3d, driver, glsl

我正在 GLSL 中制作高斯模糊着色器。由于卷积核是对称的，我存储了一半。我写的：

```
vec3 glow = vec3(0.0);
for (int i = -WIDTH; i <= WIDTH; i++) {
    uint j = abs(i);
    glow += kernel[j] + texelFetch(u_glowTexture, coord + ivec2(i, 0), 0);
} 
```

奇怪的是，这将模糊画到它应该是的左侧。但后来我将第三行替换为：

```
uint j = i * sign(i); 
```

现在它像我预期的那样工作。我坏了`abs()`吗？我真的发现了驱动程序错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:46:05.993

Abs() 在 1.30 开始支持整数，在 4.10 版本开始支持双精度数。版本和类型可能是一个不明显的问题。尝试使用浮点数而不是整数进行调试。如果这没有帮助，则通过屏幕空间着色器隔离和调试 abs() 并将其作为片段颜色输出。

# python - 将单个元素元组列表转换为元素列表

> ID：13335509
> 
> 赞同：0
> 
> 时间：2012-11-11T21:12:32.437
> 
> 标签：python

> **可能重复：**
> [将元组列表转换为列表？](https://stackoverflow.com/questions/10941229/convert-list-of-tuples-to-list)

我有一个这样的清单

```
[('Knightriders',), ('The Black Knight',), ('Fly by Knight',), ('An Arabian Knight',), ('A Bold, Bad Knight',)...] 
```

我想将其转换为：

```
['Knightriders', 'The Black Knight', 'Fly by Knight', 'An Arabian Knight', 'A Bold, Bad Knight',...] 
```

完成此任务最耗时的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T21:13:35.873

最简单的一个是使用列表推导：

```
In [126]: lis=[('Knightriders',), ('The Black Knight',), ('Fly by Knight',), ('An Arabian Knight',), ('A Bold, Bad Knight',)]

In [127]: [x[0] for x in lis]
Out[127]: 
['Knightriders',
 'The Black Knight',
 'Fly by Knight',
 'An Arabian Knight',
 'A Bold, Bad Knight'] 
```

或使用`itemgetter`：

```
In [128]: from operator import itemgetter

In [129]: list(map(itemgetter(0),lis))
Out[129]: 
['Knightriders',
 'The Black Knight',
 'Fly by Knight',
 'An Arabian Knight',
 'A Bold, Bad Knight'] 
```

或者：

```
In [131]: [next(x) for x in map(iter,lis)]
Out[131]: 
['Knightriders',
 'The Black Knight',
 'Fly by Knight',
 'An Arabian Knight',
 'A Bold, Bad Knight'] 
```

或`zip()`按照@DSM 的建议使用：

```
In [132]: zip(*lis)[0]
Out[132]: 
('Knightriders',
 'The Black Knight',
 'Fly by Knight',
 'An Arabian Knight',
 'A Bold, Bad Knight') 
```

或使用`ast.literal_eval`（最不推荐的解决方案或可能永远不会尝试）：

```
In [148]: from ast import literal_eval

In [149]: literal_eval(repr(lis).replace(",)",")"))
Out[149]: 
['Knightriders',
 'The Black Knight',
 'Fly by Knight',
 'An Arabian Knight',
 'A Bold, Bad Knight'] 
```

# css - 在不知道兄弟 div 高度的情况下将 div 与兄弟 div 的底部对齐

> ID：13335510
> 
> 赞同：2
> 
> 时间：2012-11-11T21:12:32.600
> 
> 标签：css, layout, siblings

我想在不知道兄弟 div 高度的情况下将 div 与兄弟 div 的底部对齐。这是我正在使用的布局：http: [//abbymilberg.com/sample-layout.html](http://abbymilberg.com/sample-layout.html)。

我想让右侧 div 与左侧 div 的底部对齐，而不在上边距进行硬编码，因为在我的最终项目中，左侧 div 中的内容将是动态的，高度将是千变万化。

我不知道用 CSS 做到这一点的方法。我猜可能有某种方法可以使用 javascript 获取元素的高度，但我对任何可行的方法都持开放态度。

```
<head>

    <style type="text/css">

        #body{text-align:center; margin:0px;}

        #wrapper{border:solid 1px; margin:10px auto 10px; width:800px; 
        padding:10px; text-align:left; }

        #left{margin-right:160px; border:solid 1px;}

        #right{float:right; border:solid 1px; width:150px;}

    </style>

</head>

<body>

    <div id="wrapper">

        <div id="right">
            <h2>Right</h2>
        </div>

        <div id="left">
            <h2>Left</h2>
        </div>

    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:14:29.990

使用绝对和相对定位：

```
#wrapper {
  position: relative;
}

#right {
  position: absolute;
  bottom: 0;
  right: 0;
} 
```

[演示](http://jsfiddle.net/wnmq4/)

# ruby-on-rails-3 - 从 POST 请求访问参数

> ID：13335512
> 
> 赞同：2
> 
> 时间：2012-11-11T21:13:09.057
> 
> 标签：ruby-on-rails-3, forms

我的 Rails 视图中有一个 HTML 表单

```
<form id="download_form" action="download">
  Username: <input type="text" name="username"> <br/>
  <input type="submit" id="submit_download_form" value="Submit">
</form> 
```

如何访问`username`Rails 控制器`download`方法中的参数值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:15:59.487

您可以通过`params[:username]`在控制器中访问您的参数。

# php - PHP foreach if 条件

> ID：13335515
> 
> 赞同：1
> 
> 时间：2012-11-11T21:13:35.937
> 
> 标签：php, arrays, if-statement, foreach

这应该很容易，但我似乎无法让它工作。我有一个多维数组，我不想遍历数组并检查特定值。如果该值等于一个字符串，则回显出数组的一个值。

这是数组和两个值（整个数组还有很多）：

```
$users = array( 
    "username01" => array("fullname" => "Firstname Lastname",
                            "status" => "Online"),
    "username02" => array("fullname" => "Firstname Lastname",
                            "status" => "Offline")
); 
```

我不想`echo`说出每个“在线”用户的全名。这是我今天使用的，但它不起作用：

```
$string = "Online";
foreach ($users as $username => $data) {
    $fullname = $data["fullname"];
    $status   = $data["status"];

    echo $status."= ";
    if ($status == $string) { 
        echo "Yes"; 
    } else { 
        echo "No"; 
    }
      echo "<br>";
} 
```

如果我回显`$fullname`并`$status`打印出正确的数据。但由于某种原因，IF 语句不起作用。如果用户离线，则回显为“否”，但如果用户在线，则根本没有回显。

**编辑 - 已解决**
使用引号和 $data[...] 更新数组键，如下所示。我发现了一个导致错误输出的错字。感谢所有的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:29:15.843

这对我来说没问题：

```
<?php 

    //you forgot to enclose your keys by Single Quote (')
    $users = array( 
    "username01" => array('fullname' => "Firstname Lastname",
                'status' => "Online"),
    "username02" => array('fullname' => "Firstname Lastname",
                'status' => "Offline")
);

    $string = "Online";
    foreach ($users as $username => $data) {
      //Notice this line
      //$username is the key 
      //at the first iteraiton it will be uername01
      //$data holds the array of username index in the array named $users
      $fullname = $data["fullname"];
      $status = $data['status'];
      if($status == $string) { echo "Yes"; } else { echo "No"; }
    }

?> 
```

通过[php](http://php.net/manual/en/control-structures.foreach.php)中的 foreach 了解有关 foreach 的更多详细信息。

希望有帮助。快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:21:51.003

也许这与数组定义中“全名”和“状态”周围缺少引号有关。您打印的代码正在运行，但会引发警告。

像这样尝试：

```
<?php
$users = array( 
    "username01" => array("fullname" => "Firstname Lastname",
                            "status" => "Online"),
    "username02" => array("fullname" => "Firstname Lastname",
                            "status" => "Offline")
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T21:20:42.737

奇怪 - 看起来它应该工作......

尝试这个：

```
$users = array( 
    "username01" => array(  'fullname' => "Firstname Lastname",
                            'status' => "Online"),
    "username02" => array(  'fullname' => "Firstname Lastname",
                            'status' => "Offline")
     );

foreach ( $users as $user )
{
    if( strcasecmp( 'online', $user['status'] ) == 0 )
    {
        echo $user['fullname'] .': Online';
    }
    else
    {
        echo $user['fullname'] .': Offline';
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T21:21:58.660

你的问题是你的数组。试试这个。

```
$users = array( 
    "username01" => array(  "fullname" => "Firstname Lastname",
                            "status" => "Online"),
    "username02" => array(  "fullname" => "Firstname Lastname",
                            "status" => "Offline")
     ); 
```

你忘`"`了`status`和`fullname`。可以在我的本地 XAMPP 上正常工作。

# shell - 如何使用 grep 命令判断字符串是否包含换行符？

> ID：13335516
> 
> 赞同：5
> 
> 时间：2012-11-11T21:13:36.967
> 
> 标签：shell, unix, scripting, grep

假设我们有一个包含换行符的变量“test”，例如，`\n`. 如果我使用以下命令：

```
echo "$test" | grep '\n' 
```

结果不是我所期望的。上面的`grep`命令只搜索测试字符串是否包含字符 'n' 而不是换行符，因为 '\' 转义了 'n' 字符。

我应该如何编写 grep 命令来搜索特定字符串中的换行符？仅供参考，以下内容也不正确。

```
echo "$test" | grep '^.*$' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T21:18:03.723

通过使用`-c`grep 的选项来计算匹配的行数可以实现。请注意，`$`字符匹配行尾`\n`也不会看到双引号`$test`对保留换行符的重要性。

```
test="one
two
three"

echo $test | grep -c '$'
1

echo "$test" | grep -c '$'
3 
```

您还可以使用该选项针对`^`行首或`.*`任何内容进行测试，或者在您的问题中测试整行。`^.*$``-c`

* * *

**如何**`wc`测试多行变量。`wc -l`打印换行数：

```
echo "$test" | wc -l
3 
```

您还可以分别`newlines`使用和在文件*（或变量/标准输出）*中`wc`计数和。 `characters``words`*`wc -m``wc -w`*

 ** * *

**或者**如何使用不包含在变量中的唯一字符`tr`替换`\n`，例如：

```
echo "$test" | tr '\n' '_'
one_two_three_ 
```

然后你可以`grep`为被替换的字符，在这种情况下`_`

* * *

**甚至**使用`cat -E`

```
echo "$test" | cat -E
one$
two$
three$ 
```

cat`-E`或`--show-ends`显示`$`在每行的末尾。*

# ruby-on-rails - rails方法中的每个循环

> ID：13335518
> 
> 赞同：0
> 
> 时间：2012-11-11T21:14:05.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

房子模型

```
class House < ActiveRecord::Base
   has_many :categories, :through => :category_join_table

def features_to_html_class  
  "#{price} #{rooms} #{guests} #{{categories.name do |cat| cat.name}}"
end
end 
```

房屋索引模板

```
- @houses.each do |house|
  .item{:class => house.features_to_html_class } 
```

值价格、房间、客人在视图中被正确解析（过滤目的），但不是类别。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:16:00.807

如果有空格，您不希望同一个类别名称有多个类。

```
Top Articles
Articles 
```

会产生：

```
class="Top Articles Articles" 
```

您可以更进一步，用破折号替换空格，并将其全部小写：

```
"#{ categories.map{ |cat| cat.name.parameterize }"

class="top-articles articles" 
```

编辑：

正如 Anthony 在评论中指出的那样，如果您使用的是 Rails，则可以使用[parameterize](http://apidock.com/rails/String/parameterize)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:20:31.950

试试这个：

```
categories.map{|cat|cat.name|}.join(' ') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:27:04.457

您应该遍历每个名​​称类别，因此您需要使用：

```
{categories.name.each { |cat| cat.name}} 
```

# c# - C# 编译器错误 CS0433

> ID：13335519
> 
> 赞同：7
> 
> 时间：2012-11-11T21:14:07.000
> 
> 标签：c#, unit-testing, windows-8, visual-studio-2012

更新 1：我已将我的项目文件夹上传到 dropbox - [dropbox.com/s/8dfw3uprrynrhzx/S3Util.zip](http://dropbox.com/s/8dfw3uprrynrhzx/S3Util.zip)

我是 Visual Studio 的新手，我在 Visual Studio 2012 Express for Windows 8 上用 C# 创建了一个小的 Windows 运行时组件。

我的组件由一个密封类和一个静态方法组成。我在解决方案中添加了一个单元测试库项目来测试这个静态方法。

（我按照[这个演练](http://msdn.microsoft.com/en-us/library/ms182532.aspx)创建了一个单元测试）

当我构建解决方案时，我收到以下错误：

> 错误 1 ​​'c:\workspace\vs\S3Util\S3Util\bin\Debug\S3Util.winmd' 和 'c:\workspace\vs\S3Util\S3Util\bin\Debug\S3Util 中都存在类型 'S3Util.S3Security' .winmd'
> C:\workspace\vs\TestLib_S3Util\TestLib_S3Util\Test_Security.cs 18 27 TestLib_S3Util

Microsoft 网站上的[错误帮助页面](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CS0433%29;k%28TargetFrameworkMoniker-.NETCore)表明它是编译器错误 CS0433。

但是，我的单元测试库只包含一个对我的 Windows 运行时组件项目的引用，甚至我看到的错误消息也两次引用了同一个*.winmd*文件。请帮助我了解问题以及如何解决它。

错误截图：（点击查看大图）

[![](../Images/71a13efb071cad3b5ad73d49926caf3f.png)](https://i.stack.imgur.com/Wjntj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:13:53.733

在我不知道为什么会发生错误的情况下，我开始缩小可能性列表。我会做以下事情：

1.  通过搜索查找类 S3Security。如果您找到其中 2 个 - 删除一个。
2.  尝试删除最近添加的引用之一并编译。删除直到项目编译。
3.  尝试删除最新的文件/项目，直到解决方案编译没有错误。您也可以尝试反向移动，开始执行您正在执行的步骤并检查您将在哪一步得到错误。让我们知道它是什么。

# asp.net-mvc - 如何在自定义域中启动 Azure 模拟器？

> ID：13335520
> 
> 赞同：3
> 
> 时间：2012-11-11T21:14:16.310
> 
> 标签：asp.net-mvc, iis, azure, localhost, azure-emulator

每次我启动 Azure 模拟器时，它都会指向`http://127.0.0.1`. 这对我不起作用，因为我使用不支持数字的 Facebook 登录。所以我所做的是：

*   我设置`'mydomain.com'`为我的 Facebook 应用程序的域。我设置`dev.mydomain.com`为应用程序的返回 URL。
*   我在我的 HOST 文件中创建了一条记录，指向`127.0.0.1`（`dev.mydomain.com`根据[Azure 模拟器网站对 Facebook 不可见](https://stackoverflow.com/questions/9169641/azure-emulator-web-site-is-not-visible-by-facebook)）。
*   我更新了我的 Web 角色项目以`http://localhost`与应用程序根 URL 覆盖一起使用`http://dev.mydomain.com`，并为此创建了一个虚拟目录。我还将项目的起始 URL 设置为`http://dev.mydomain.com`.
*   我编辑`%USERPROFILE%\My Documents\IISExpress\config\applicationhost.config`使用`*:80:dev.mydomain.com`（根据[Using Custom Domains With IIS Express](https://stackoverflow.com/questions/4709014/using-custom-domains-with-iis-express)）。

所以我想说我已经准备好完成这项工作。但是每次我启动 Azure 模拟器时，它都会启动`http://127.0.0.1`. 我如何让它启动`http://dev.mydomain.com`？

任何人？

# vb.net - Visual Basic 2010 用坏子字符串替换好的子字符串

> ID：13335524
> 
> 赞同：2
> 
> 时间：2012-11-11T21:14:46.333
> 
> 标签：vb.net, string, visual-studio-2010

我使用 Visual Basic 2010。我让用户输入一个字符串、好的子字符串和坏的子字符串（三个文本框）。我需要让我的代码在我的字符串中找到坏子字符串的实例，并用好的子字符串替换每个实例。我觉得应该有一个循环来确定坏子字符串的实例。我就是想不通。这是我到目前为止所拥有的一切。希望有人可以帮助我。

```
Private Sub btnCalc_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCalc.Click

    Dim strEnteredString As String = txtInputString.Text.Trim
    Dim intEnteredStringChars As Integer = strEnteredString.Length
    Dim strGoodSubstring As String = txtInputGoodString.Text.Trim
    Dim intGoodSubstringChars As Integer = strGoodSubstring.Length
    Dim strBadSubstring As String = txtInputBadString.Text.Trim
    Dim intBadSubstringChars As Integer = strBadSubstring.Length

    Dim strNewString As String = strEnteredString
    Dim strNewStringFinal As String

    If strEnteredString.Contains(strBadSubstring) Then
        strNewStringFinal = strNewString.Remove(
        strNewString = strEnteredString.Insert(intBadSubstringChars, strGoodSubstring)

    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:17:32.447

这已经内置使用[`String.Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)。

```
Dim strNewStringFinal As String
strNewStringFinal = strEnteredString.Replace(strBadSubstring, strGoodSubstring) 
```

注意样式 - 这些是对象，不需要或不鼓励使用[匈牙利符号，因为您只是在重复已经存在的信息（并且很容易找到）。](http://en.wikipedia.org/wiki/Hungarian_notation)

# html - 由于 URL 太长，Facebook Like 按钮未显示

> ID：13335527
> 
> 赞同：1
> 
> 时间：2012-11-11T21:15:35.943
> 
> 标签：html, facebook, button, facebook-like

我在我的页面上显示 Facebook 喜欢按钮时遇到了难以置信的困难，经过反复试验得出结论，这完全是因为我的 Facebook 页面的 URL 太长。

我输入的代码如下：

```
 <div class="fb-like" data-href="http://www.facebook.com/pages/[name of my page]/[15
   random digits that FB assigned]" data-send="false" data-layout="button_count" data-  
   width="200" data-show-faces="false" data-font="arial"></div> 
```

当我正确输入时，LIKE 按钮不会显示在网站上。如果我将 URL 显着缩短为任何内容（即使它不是真实页面），则会显示“赞”按钮！

实在想不通这个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:38:41.497

我建议为您的 Facebook 页面使用[自定义用户名/页面地址](http://www.facebook.com/help/409473442437047/)。我不确定为什么您的 URL 长度会出现问题（我怀疑这是问题的真正原因），但如果这是问题所在，这将解决它。

如果这不起作用，那么也许通过[facebook linter运行您的页面 URL 会像](http://developers.facebook.com/tools/debug)[这个问题所建议](https://stackoverflow.com/questions/6698783/facebook-like-button-not-working#answer-6700317)的那样修复它。

# inheritance - 如何使用 Visio UML 图在实现类中显示接口方法

> ID：13335539
> 
> 赞同：0
> 
> 时间：2012-11-11T21:17:03.153
> 
> 标签：inheritance, uml, visio

我有一个接口，例如`IPerson`它有一个方法：`public Date DOB()`和一个实现类：`Student`。如何在不输入操作/方法名称的情况下使`DOB()`方法显示在类中？`Student`

最重要的是，当我将`Student`类对象添加到序列图中时，我希望在`DOB()`向对象传递消息时准备好方法供我选择。

以上所有方法都适用于`IPerson`不是接口而是具体类的情况，但我认为它也应该适用于接口情况，无论如何，接口中定义的方法应该能够在实现类中显示。

我正在使用 Visio 2003，但我想它通常应该可以跨不同版本工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:42:25.510

为了使接口中的方法“通过”实现类，实现类必须通过将“实现链接”连接到接口来“实现”接口。

# iphone - 如何使用 Xcode 制作首次启动 iPhone App 导游

> ID：13335540
> 
> 赞同：6
> 
> 时间：2012-11-11T21:17:05.260
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我想知道如何使用 Xcode 为我的 iOS 应用程序制作第一次启动指南，我将自己描述为 ObjectiveC 语言的初学者，但我从逻辑上知道我必须制作应用程序来检测第一次启动应用程序，然后显示一个可滚动的导游，顶部有一个跳过按钮以关闭。

我已经搜索了该网站，但没有找到解决我问题的最佳方法。

基本上是两个问题：

1.  “如何检测应用程序的首次启动？” [如何检测 iPhone 上的首次应用启动](https://stackoverflow.com/questions/9964371/how-to-detect-first-time-app-launch-iphone)

2.  “如何显示可能位于情节提要中的导游？”

我想要的类似于Appstore中（Paper）iPad应用程序中的导游。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T21:27:24.797

1.  在您的第一个问题上，您提供的链接有一个[可接受的答案，可以回答您的问题。](https://stackoverflow.com/a/9964400/1271826)我完全不确定您的问题是什么，因为您似乎已经自己找到了答案。

2.  关于第二个问题，您应该定义从主视图到导游的第一个场景的转场，然后根据上述答案的结果以[编程方式触发转场。](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/UsingSegues.html#//apple_ref/doc/uid/TP40007457-CH15-SW5)底线，你的主要场景和导游的第一个场景之间有一个转场，给那个转场一个唯一的标识符，然后根据`NSUserDefaults`前一点中引用的东西，`performSegueWithIdentifier`如果你确定它是合适的就调用离开你的旅行。

    顺便说一句，您可能习惯于创建连接到按钮或类似东西的 segue。但是，在这种情况下，您将通过从第一个场景中的视图控制器图标控制拖动（或右键单击拖动）到第一个场景，在视图控制器之间创建一个 segue，如下所示。这样，它不是由按钮或类似的东西触发的场景，而是一旦你指定了segue的标识符，你`viewDidLoad`的第一个视图控制器就可以通过以下方式以编程方式调用segue `performSegueWithIdentifier`：

    ![在视图控制器之间创建 segue](../Images/6835f3fcb0c54e84770efd7185cc1935.png)

如果您有任何问题，请告诉我们。

# python - Python Traceback 和 NameError

> ID：13335541
> 
> 赞同：0
> 
> 时间：2012-11-11T21:17:12.887
> 
> 标签：python, nameerror, traceback

我对编程很陌生。我一直在尝试通过一本名为“Python Programming for the Absolute Beginner”的书来学习 Python。我正在上课。我从书中的一个练习中复制了一些代码，并获得了 Traceback（最近一次调用最后一次）：和 NameError 消息。以下是我与代码一起收到的错误消息。请帮忙。谢谢！

```
Traceback (most recent call last):
 File "C:\Python27\Ch8 Critter Caretaker Prg.py", line 5, in <module>
   class Critter(object):
 File "C:\Python27\Ch8 Critter Caretaker Prg.py", line 25, in Critter
   mood = property(__get_mood)
NameError: name '_Critter__get_mood' is not defined 
```

```
# Critter Caretaker
# A virtual pet to care for

class Critter(object):
"""A virtual pet"""
    def __init__(self, name, hunger = 0, boredom = 0):
        self.name = name
        self.hunger = hunger
        self.boredom = boredom
    def __pass_time(self):
        self.hunger += 1
        self.bordedom += 1
    def __get_mode(self):
        unhappiness = self.hunger + self.boredom
        if unhappiness < 5:
            mood = "happy"
        elif 5 <= unhappiness <= 10:
            mood = "okay"
        elif 11 <= unhappiness <= 15:
            mood = "frustrated"
        else:
            mood = "mad"

    mood = property(__get_mood)

    def talk(self):
        print "I'm", self.name, "and I feel", self.mood, "now.\n"
        self.__pass_time()

    def eat(self, food = 4):
        print "Brrupp.  Thank you."
        self.hunger -= food
        if self.hunger < 0:
            self.hunger = 0
        self.__pass_time()

    def play(self, fun = 4):
        print "Wheee!"
        self.boredom -= fun
        if self.boredom < 0:
            self.boredom = 0
        self.__pass_time()

def main():
    crit_name = raw_input("What do you want to name your critter?: ")
    crit = Critter(crit_name)

    choice = None
    while choice != "0":
        print \
        """
        Critter Caretaker

        0 - Quit
        1 - Listen to your critter
        2 - Feed your critter
        3 - Play with your critter
        """

        choice = raw_input("Choice: ")
        print

        # exit
        if choice == "0":
            print "Good-bye."

        # listen to your critter
        elif choice == "1":
            crit.talk()

        # feed your critter
        elif choice == "2":
            crit.eat()

        # play with your critter
        elif choice == "3":
            crit.play()

        # some unknown choie
        else:
            print "\nSorry, but", choice, "isn't a vaild choice."

main()
("\n\nPress the enter key to exit.") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:21:36.077

如前所述，您在`mode`and之间打错了字`mood`。但是，您稍后会遇到更多问题 - 您的`__get_mood`函数实际上永远不会得到情绪，因为它永远不会返回。此外，您可以`property`用作装饰器：

```
@property
def mood(self):
    unhappiness = self.hunger + self.boredom
    if unhappiness < 5:
        return "happy"
    elif 5 <= unhappiness <= 10:
        return "okay"
    elif 11 <= unhappiness <= 15:
        return "frustrated"
    else:
        return "mad" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:23:49.330

看起来您打算改为定义`__get_mode(self)`为`__get_mood(self)`。

为了澄清`NameError`你所得到的，解释器说，`_Critter__get_mood is not defined`而不是`__get_mood is not defined`因为[name mangling](https://stackoverflow.com/questions/1301346/the-meaning-of-a-single-and-a-double-underscore-before-an-object-name-in-python)，这是 Python 对指示`private`类中的变量或方法的一些幻想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:20:20.617

这是一个简单的错字。你定义

```
def __get_mode(self):
#          ^^^ 
```

但访问

```
_Critter__get_mood
#              ^^^ 
```

# css - 如何在css或sass中为类名起别名

> ID：13335544
> 
> 赞同：45
> 
> 时间：2012-11-11T21:18:02.583
> 
> 标签：css, sass, font-awesome

我可以为 CSS 类创建别名吗？

我正在使用这种很棒的字体，并且正在尝试为某些图标类创建别名。所以那`.icon-globe`也叫`.globe`.

我怎样才能完成这样的事情？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-11T22:00:15.840

没有混叠之类的东西。Sass 确实有该`@extend`指令，但在您查看源代码之前，解决方案并不完全显而易见。

来源：[https ://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.scss](https://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.scss)

```
[class^="icon-"]:before,
[class*=" icon-"]:before {
  font-family: FontAwesome;
  font-weight: normal;
  font-style: normal;
  display: inline-block;
  text-decoration: inherit;
}

// snip

.icon-globe:before                { content: "\f0ac"; } 
```

即使你做了`.globe`extend `.icon-globe`，你也会因为他们构建选择器的方式而错过了 FontAwesome 样式的大部分内容。您还必须扩展另一个选择器。

这个：

```
.globe {
    @extend .icon-globe;
    @extend [class^="icon-"];
} 
```

编译为

```
[class^="icon-"]:before, .globe:before,
[class*=" icon-"]:before {
  font-family: FontAwesome;
  font-weight: normal;
  font-style: normal;
  display: inline-block;
  text-decoration: inherit; }

.icon-globe:before, .globe:before {
  content: "\f0ac"; } 
```

请注意，`icon-`前缀是故意的。您可以通过这种方式获得更小的 CSS 文件，而不是将所有这些样式附加到 FontAwesome 附带的所有约 200 个类中。你*可以*做到，但我认为结果不是很好。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-11T21:25:51.247

我能想到的最简单的方法是使用 javascript/jquery。

jQuery：

```
$(document).ready(function() {
  $('.globe').addClass('icon-globe');
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-03-04T03:55:01.433

> 我知道这是一个较老的问题，但我正在回答这个问题，因为线程看起来不完整......

`SASS`您可以通过扩展`icon-globe`类轻松地做到这一点

```
.globe{
    @extend .icon-globe !optional;
} 
```

输出 CSS 将如下所示，

```
.globe,.icon-globe{
   /* CSS Properties */
} 
```

考虑到 Font-Awesome 的新类名，您将需要使用`.fa-globe`多类扩展

```
.globe{
    @extend .fa, .fa-globe !optional;
} 
```

输出 CSS 将如下所示，

```
.fa,.globe{
 /* ... */
}

.globe,.fa-globe{
   /* CSS Properties */
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-11T21:21:40.507

您可以使用普通的 css 逗号分隔选择器将相同的样式应用于多个类：

```
.icon-globe, .globe {
  //styles
} 
```

将对`<i class="icon-globe">`和应用相同的样式`<i class="globe">`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-04T13:54:43.127

您可能对[CSS Crush](http://the-echoplex.net/csscrush/)感兴趣，它允许您创建别名[http://the-echoplex.net/csscrush/#core--selector-aliases](http://the-echoplex.net/csscrush/#core--selector-aliases)

**用法**

```
@selector globe :any( .icon-globe, .globe );

:globe {
  color: red;
} 
```

**输出**

```
.icon-globe, .globe {
  color: red;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-06T14:04:09.847

您可以使用 SASS mixin`@content`为选择器或它们的组合创建别名，如下所示：

```
@mixin icon {
   .icon-globe,
   .globe {
      @content;
   }
}

@include icon {
   font-size: 16px;
} 
```

SASS 会为你生成这个：

```
.icon-globe,
.globe {
   font-size: 16px;
} 
```

阅读有关[SASS 混合内容块](https://sass-lang.com/documentation/at-rules/mixin#content-blocks)的更多信息；

# telerik - Telerik 的 Kendo UI 控制渲染问题

> ID：13335550
> 
> 赞同：1
> 
> 时间：2012-11-11T21:18:52.450
> 
> 标签：telerik, telerik-grid, telerik-mvc, kendo-ui

我在渲染 Telerik 的 Kendo UI 控件时遇到问题。特别是 DropDownList 和 DatePicker （其他控件可能有问题，但我还没有使用其他控件）。

我在 Chrome 和 IE 上对其进行了测试，它只发生在 Chrome 中。

我有 Windows 7 SP1、4GB 内存、Intel Core 2 Duo E8400 @ 3.00 GHz

这个问题从我开始使用 KendoUI 控件的第一天开始（现在大约 2 个月）就一直存在，是的，我多次重启了我的机器。

这只是我得到的例子。

![在此处输入图像描述](../Images/dcf3dff4ff16ba42de60f1d8e424b3a8.png)

任何想法或建议表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:02:28.007

这是 Chrome 22+ 中 CSS 过渡的一个已知错误（Kendo UI 在内部使用它们用于小部件动画）。留在屏幕上的伪影是由过渡 CSS 变换引起的。这应该在 Chrome Canary 中修复，但在此之前，您可以将此 CSS 添加到您的页面（创建一个具有 3D 变换的不可见伪元素，导致整个页面加速）来修复它：

```
body:after {
    content: "";
    display: block;
    visibility: hidden;
    height: 0;
    font: 0/0;
    -webkit-transform: translateZ(0);
} 
```

下一个 Kendo UI 版本将集成此修复程序。

# windows-phone-7 - 在 Windows 8 的设备上运行 wp7 应用程序

> ID：13335551
> 
> 赞同：2
> 
> 时间：2012-11-11T21:18:54.817
> 
> 标签：windows-phone-7, windows-8, windows-phone-8, zune

我正在开发一个小型 Windows Phone 应用程序，当我在模拟器中运行时它工作正常。我的问题是我想在我的设备上进行测试。因为我正在使用 Windows 8。并且在 Windows 8 中无法安装 zune（每次由于无法安装 .NET 3.5 而显示错误）。有人请告诉我如何在我的设备中测试我的应用程序或在 Windows 8 中安装 zune 的方法。

我做了什么：
1\. 我每次都尝试安装 zune 多次相同的错误（无法下载 .NET 3.5）。
2\. 尝试“开启”.NET 3.5 功能。结果是一样的。

我发现 zune 不再使用（更改为 xbox 音乐并且不知道会做什么）。有什么方法可以在我的设备上测试我的应用程序吗？

如果这些都不起作用，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:05:32.973

如果您有安装 CD 或加载的图像，请在命令提示符中使用此
示例：

`dism.exe /online /enable-feature /featurename:NetFX3 /Source:G:\sources\sxs /LimitAccess`
1\. 以管理员身份运行此命令
2\. 而不是 G: 给你的驱动器你有安装光盘

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:55:08.137

转到控制面板 > 程序和功能 > 打开或关闭 Windows 功能 > 检查 .NET 3.5

完成后，安装 Zune 软件，您应该一切顺利。

# php - 以编程方式检查图像元素颜色和颜色百分比

> ID：13335553
> 
> 赞同：0
> 
> 时间：2012-11-11T21:19:12.533
> 
> 标签：php, javascript, jquery, image, colors

我想知道是否有任何方法可以检测图像中使用的颜色以及他与使用的所有其他颜色相关的百分比。

我正在寻找任何好的 php / javascript / jquery 解决方案。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:26:47.550

[您可以做的是使用imagecolorat](http://php.net/imagecolorat)函数逐像素迭代图像并创建自己的百分比。

您也可以使用[`imagecolorsforindex`](http://www.php.net/manual/en/function.imagecolorsforindex.php)它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:21:55.387

在 php 中，这可能是开始查看图像的好地方[http://php.net/manual/en/ref.image.php](http://php.net/manual/en/ref.image.php)

# python - 在 Django 中本地化的数字格式？

> ID：13335554
> 
> 赞同：9
> 
> 时间：2012-11-11T21:19:13.757
> 
> 标签：python, django, django-templates

希望简单的问题得到一个简单的答案。我只想编写 Django 的过滤器，以便获得格式化的浮点数区域设置感知：

```
{{123.45|floatformat:1}}
"123.5"  <= correct
{{123.45|localize}}
"123,45"  <= correct, in my locales decimal separator is a comma
{{123.45|floatformat:1|localize}}
"123.5"  <= wrong, point instead of comma. Expected output: "123,5" 
```

如何同时应用两个过滤器？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T00:11:16.260

Django's `floatformat` filter returns a string, not actually a float number, so when you pass that value to `localize`, you are passing a string, not a number (int, float, etc) and therefore just returns the given string.

To achieve what you want, you can't combine these two filters in Django, since both return a string. To do that, you would have to make your own filter which will do the behavior you want. To make things easier, you can always start with the code in the default filters and modify that to your specification. `floatformat` code is [here](https://github.com/django/django/blob/master/django/template/defaultfilters.py#L109) and `localize` is [here](https://github.com/django/django/blob/7bf32a20f2bacff9993bb724396322e0b5089bce/django/templatetags/l10n.py#L10).

# jquery - jQuery：使用删除（）；对于一行或#id 名称

> ID：13335555
> 
> 赞同：1
> 
> 时间：2012-11-11T21:19:25.597
> 
> 标签：jquery, removeclass

**我需要`<tr>`使用 remove() 删除渲染页面中的一行；通过定位`<label>`名称。** *请参阅下面的标记。*

此表中还有其他`<tr>`行需要保留。是否可以通过文本标签名称“网站”或“网站”来定位表格中的一行`label for="url"`？

IE

```
jQuery(document).ready(function( $ ){
    $("target the <tr> by label name Website or "url" ").remove();

  }); 
```

**HTML 标记：**

```
<tr>
    <th><label for="url">Website</label></th>
    <td><input type="text" name="url" id="url" value="" class="regular-text code" /></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:22:06.463

为什么不选择具有 ID 属性的输入？

```
$('#url').closest('tr').remove(); 
```

或者，如果您想选择标签，您可以使用属性选择器：

```
$('label[for="url"]').closest('tr').remove(); 
```

或`has`方法：

```
$('tr').has('label[for="url"]').remove(); 
```

[但是使用 ID 选择器非常有效。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:21:56.837

这是我的解决方案。它只会删除一个 tr：

```
$('tr').each(function()
{
  if ( $(this).find('th label').html() == 'Website' )
  {
    $(this).remove();
    return false;
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:24:49.533

您可以尝试使用 attr`for`作为您的标签

```
$('tr').each(function()
{
  if ( $(this).find('label').attr("for") == 'url' )
    $(this).remove();
}); 
```

# string - 在 Go 中比较字符串

> ID：13335556
> 
> 赞同：6
> 
> 时间：2012-11-11T21:19:28.620
> 
> 标签：string, go, string-comparison, printf

我试图在字符串中找到命名捕获组的开头以创建一个简单的解析器（请参阅[相关问题](https://stackoverflow.com/questions/13330274/regex-to-find-named-capturing-groups-with-go-programming-language)）。为此，`extract`函数会记住`last4`变量中的最后一个字符。如果最后 4 个字符等于 "(?P<" 它是捕获组的开始：

```
package main

import "fmt"

const sample string = `/(?P<country>m((a|b).+)(x|y)n)/(?P<city>.+)`

func main() {
    extract(sample)
}

func extract(regex string) {
    last4 := new([4]int32)
    for _, c := range regex {
        last4[0], last4[1], last4[2], last4[3] = last4[1], last4[2], last4[3], c
        last4String := fmt.Sprintf("%c%c%c%c\n", last4[0], last4[1], last4[2], last4[3])
        if last4String == "(?P<" {
            fmt.Print("start of capturing group")
        }
    }
} 
```

[http://play.golang.org/p/pqA-wCuvux](http://play.golang.org/p/pqA-wCuvux)

但是这段代码什么也没打印！永远不会是真的，尽管如果我在循环内`last4String == "(?P<"`打印，这个子字符串会出现在输出中。`last4String`那么如何在 Go 中比较字符串呢？

还有比将 int32 数组转换为字符串更优雅的方法`fmt.Sprintf("%c%c%c%c\n", last4[0], last4[1], last4[2], last4[3])`吗？

还有什么可以更好的吗？我的代码对我来说有点不雅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:32:16.787

如果它不是为了自学或类似的，你可能想使用标准库中现有的[RE 解析器](http://golang.org/pkg/regexp/syntax/#Parse)，然后“走”AST 来做任何需要的事情。

```
func Parse(s string, flags Flags) (*Regexp, error) 
```

> Parse 解析一个正则表达式字符串 s，由指定的 Flags 控制，并返回一个正则表达式解析树。语法在包 regexp 的顶级注释中描述。

您的任务甚至还有一个[助手](http://golang.org/pkg/regexp/syntax/#Regexp.CapNames)。

EDIT1：您的代码已修复：

```
package main

import "fmt"

const sample string = `/(?P<country>m((a|b).+)(x|y)n)/(?P<city>.+)`

func main() {
        extract(sample)
}

func extract(regex string) {
        var last4 [4]int32
        for _, c := range regex {
                last4[0], last4[1], last4[2], last4[3] = last4[1], last4[2], last4[3], c
                last4String := fmt.Sprintf("%c%c%c%c", last4[0], last4[1], last4[2], last4[3])
                if last4String == "(?P<" {
                    fmt.Println("start of capturing group")
                }
        }
} 
```

（也在[这里](http://play.golang.org/p/tghCWA27aS)）

EDIT2：您的代码重写：

```
package main

import (
        "fmt"
        "strings"
)

const sample string = `/(?P<country>m((a|b).+)(x|y)n)/(?P<city>.+)`

func main() {
        extract(sample)
}

func extract(regex string) {
        start := 0
        for {
                i := strings.Index(regex[start:], "(?P<")
                if i < 0 {
                        break
                }

                fmt.Printf("start of capturing group @ %d\n", start+i)
                start += i + 1
        }
} 
```

（也在[这里](http://play.golang.org/p/ZMBfh5qYmu)）

# xaml - 在 Blend 中刷新设计时数据上下文

> ID：13335561
> 
> 赞同：2
> 
> 时间：2012-11-11T21:20:20.223
> 
> 标签：xaml, visual-studio-2012, blend

我正在使用 Blend 2012 和 Visual Studio 来设计一个 Windows 8 应用程序。我正在使用 MVVM Light 工具包，并将我的 ViewModels 绑定到页面的数据上下文。

在视图模型上，我使用依赖注入将数据服务注入到视图模型中。在设计时，我正在注入一个虚拟数据服务，以便我可以在 Blend 中获得设计时数据。

这工作正常。我正在努力解决的一个问题实际上是在我对虚拟类进行更改时强制 Blend 进行更新。有时我想添加一个方法或更改一些数据，但我不知道如何告诉 Blend 实际重新编译虚拟类并使用新方法。我已经尝试重建所有解决方案并重新启动 Visual Studio 和 Blend，但两者都不会触发“设计时”构建。一段时间后它会更新，但我不知道是什么触发了它，以及如何手动执行此操作。

¿ 有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:04:22.320

我找到了一种解决方法：

1.  在 Blend 中重建项目
2.  关闭文档
3.  通过任务管理器终止进程 XDesProc.exe（确保它是来自 Blend 而不是来自 VS 的 Xaml 设计器）
4.  重新打开文档 不过，这听起来不太对劲

# windows-8 - 用于 Windows 8 Metro 应用程序的three.js 库

> ID：13335562
> 
> 赞同：1
> 
> 时间：2012-11-11T21:20:23.970
> 
> 标签：windows-8, microsoft-metro, three.js

如何使用three.js 库
制作Windows 8 Metro 应用程序

我尝试使用它，但应用程序
在显示启动画面后突然停止工作

对象可能有问题
`THREE.WebGLRenderer()`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:48:10.133

尝试`CanvasRenderer`或`CSS3DRenderer`。
下载 repo 并检查`canvas_*`示例文件夹中的内容。

# c++ - 指定时函数不重复

> ID：13335564
> 
> 赞同：0
> 
> 时间：2012-11-11T21:20:33.627
> 
> 标签：c++

我做了一个函数“1”，我想问用户“你想重复函数“1”吗？”，我做错了什么？这是我的代码：

```
#include <cstdlib>
#include <iostream>

using namespace std;

void temperature()
{
    float c,f;
    cout<<"Áveskite temperatørà pagal Celsijø: ";
    cin>>c;
    f=(c*1.8)+32;
    cout<<"Temperatûra pagal Farenheità: ";
    printf("%2.2f", f);
    cout<<endl;
}

int main()
{
    setlocale(LC_ALL,"Lithuanian");
    temperature();
    char isjungti;
    cout<<"Paversti dar vienà temperatûrà?(T)";
    cin>>isjungti;
    if(isjungti == 'T' || 't')
     {
     return temperature(); //I get an error here.              
     }
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:23:22.823

`return`将退出函数范围。使用类似的东西

```
while (isjungti == 'T' || isjungti == 't') {
    temperature()
} 
```

或类似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:23:24.587

`isjungti == 'T' || 't'`肯定是错的。此外，`return temperature();`, 因为`temperature()`返回`void`.

你可能的意思是：

```
 if(isjungti == 'T' || isjungti == 't')
 {
    temperature(); //I get an error here.              
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:22:38.193

main() 是 int，您的函数不返回任何内容。从错误行中去掉“return”只是为了调用函数并读取返回值。

# arrays - 在具有 3 个边界条件的二维数组中迭代有限差分方案

> ID：13335566
> 
> 赞同：6
> 
> 时间：2012-11-11T21:20:42.500
> 
> 标签：arrays, r, for-loop, numerical-methods, pde

在完成本科论文的中间步骤中，我试图通过显式有限差分方案来解决 R 中的 Black-Scholes PDE。到目前为止，我一直对同时向后迭代（沿着时间离散化）和沿着股票价格离散化感到困惑。我已经为欧式看涨期权实施了边界条件，并试图根据[Phil Goddard](http://www.goddardconsulting.ca/option-pricing-finite-diff-explicit.html)对模型的描述来解决我的倒退问题。

```
R <- matrix(NA, ncol=length(t), nrow=length(S))

# Value at Maturity:
R[,length(t)] <- Vold <- pmax(S - K,0) 

# Value at S = S_max; V = fwd
R[length(S),] <- V_max <- S_max - K * exp(-r_yr * (t_T - t))

# Value at S = S_0; V = 0
R[1,] = V_min <- t - t

# Run Model
# -----------------------------------------------------------------------------------------

# Define Coefficient-Functions a_j, b_j, and c_j
a_ <- function(j){
  a_j <- (1/2) * dt * (r*j - sigma^2 * j^2)
  return(a_j)
}

b_ <- function(j){
  b_j <- 1 + dt * (sigma^2 * j^2 + r)
  return(b_j)
}

c_ <- function(j){
  c_j <- -(1/2) * dt * (r*j + sigma^2 * j^2)
  return(c_j)
}

# Move backward in time stepping on each stock price within the BCs S = S_0, S = S_max
for (i in length(t):2){
  for (j in (length(S)-1):2){
    R[,(length(i)-1)][j] <- b_(j) * R[,length(i)][j] + c_(j) * R[,length(i)][j+1] + 
                            a_(j) * R[,length(i)][j-1]
  }
} 
```

我已经离散化了时间和股票价格，以便用户可以指定所需的网格点数（分别产生“长度（t）”和“长度（S）”节点）。由于我指定了矩阵 R 的 3 个外边缘（2 个跨越时间在 S_max 和 S_0 跨越 R 的列；1 跨越初始期权价值在到期时，R 的最后一列），我迭代列的长度减去 1 和行的长度减去 2。
（请参阅图表链接以获取更多说明）

[链接到 BC 图像，在页面底部](http://www.goddardconsulting.ca/option-pricing-finite-diff-index.html#FEMGrid)

当我运行模型时，边界条件已正确制定，但我无法及时回到过去……任何关于我（可能是新手错误填充）代码的指导将不胜感激。如果我可以添加任何进一步的内容（代码或描述）来澄清，请告诉我。

谢谢，

杰克

# java - Java：以静态方法从超类创建子类的实例

> ID：13335569
> 
> 赞同：2
> 
> 时间：2012-11-11T21:20:59.473
> 
> 标签：java, inheritance, static-methods

我正在尝试从我的超类创建一个子类的新实例。这是我的超级班

```
public abstract class Worker {

    String world;

    protected abstract void onLoad(Scanner read);

    public static Worker load(Scanner read) {
        // I want to create the instance of my sub class here and call it w
        w.onLoad(read);
        return w;
    } 

    public void setWorld(String world) {
        this.world = world;
    }

} 
```

这是我的子类

```
public class Factory extends Worker {

    @Override
    protected onLoad(Scanner read) {
        setWorld(read.readline());
    }

} 
```

这就是我想要对这些课程做的事情。

```
public class MainClass{

    public List<Factory> loadFactories() {
        List<Factory> facts = new ArrayList<Factory>();
        Scanner read = new Scanner(new FileInputStream("factory.txt"));

        while(read.hasNextLine()) {
            Factory f = (Factory)Factory.load(read);
            facts.add(f);
        }

        read.close();
        return facts;
    }

} 
```

有什么办法可以在不重新开始的情况下做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:04:13.677

这是你想要的吗？

```
public static Worker load(Scanner read) {
    Factory w=new Factory();
    w.onLoad(read);
    return w;
} 
```

* * *

编辑：

```
public class MainClass {

    public List<Factory> loadFactories() throws FileNotFoundException, InstantiationException, IllegalAccessException {
        final List<Factory> facts = new ArrayList<Factory>();
        final Scanner read = new Scanner(new FileInputStream("factory.txt"));

        while (read.hasNextLine()) {
            final Factory f = Worker.load(read, Factory.class);
            facts.add(f);
            final Pipeline p = Worker.load(read, Pipeline.class);
        }

        read.close();
        return facts;
    }

    static public class Factory extends Worker {

        @Override
        protected void onLoad(final Scanner read) {

        }

    }

    static public class Pipeline extends Worker {

        @Override
        protected void onLoad(final Scanner read) {

        }

    }

    static public abstract class Worker {

        String world;

        protected abstract void onLoad(Scanner read);

        public static <T extends Worker> T load(final Scanner read, final Class<T> t) throws InstantiationException, IllegalAccessException {
            final T w = t.newInstance();
            w.onLoad(read);
            return w;
        }

        public void setWorld(final String world) {
            this.world = world;
        }

    }
} 
```

# java - 用作按钮的 Android 选项卡

> ID：13335570
> 
> 赞同：1
> 
> 时间：2012-11-11T21:21:02.847
> 
> 标签：java, android, google-maps, tabs

我希望我的一个选项卡`TabLayout`基本上可以用作`Button`按下默认计算器时打开的位置，而不是其中的选项卡`Activity`。我该怎么做呢？下面是知道它会用`Button`.

```
Button calcButton = (Button) findViewById(R.id.CalcButton);
calcButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent calcIntent = new Intent();
            calcIntent.setClassName("com.android.calculator2",
                    "com.android.calculator2.Calculator");
            startActivity(calcIntent);
        }
    }); 
```

编辑：我希望计算器在选项卡视图中而不是全屏打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:33:45.810

您可以实现一个 onTabChangeListener 并且当用户进入该选项卡时，您可以启动您想要启动的意图。

```
mTabHost.setOnTabChangedListener(new OnTabChangeListener(){
@Override
public void onTabChanged(String tabId) {
    if(TAB_BUTTON_TAG.equals(tabId)) // TAB_BUTTON_TAG is the tag associated with your tab
    {
        Intent calcIntent = new Intent();
        calcIntent.setClassName("com.android.calculator2", "com.android.calculator2.Calculator");
        startActivity(calcIntent);

    }

}}); 
```

# php - 在规则 drupal 6 中使用执行自定义 PHP 更新 CCK 字段

> ID：13335574
> 
> 赞同：0
> 
> 时间：2012-11-11T21:21:36.823
> 
> 标签：php, mysql, drupal

我是drupal的新手，所以需要帮助。我正在尝试编写一个规则，它将在触发事件时运行**PHP 代码。**（它工作正常。事件被触发）

我创建了一个自定义内容类型。我在此内容类型中添加了一些内容。现在我正在尝试更新该**PHP 代码**中的这些内容，但是它不起作用。

我的查询如下，

$ctag = $ctag+1;

db_query("UPDATE {content_type_phone_user} SET field_puser_ctag_value=%d WHERE nid=%d", $ctag, $puser['nid']);

**我注意到这里有些奇怪。**

上面的代码第一次工作。但是，如果您再试一次，它不会更新表中的列。

但是，如果我以管理员身份登录，而不仅仅是单击此内容类型的保存按钮（不进行任何更改），并尝试再次运行此 PHP 脚本，数据库将被更新（但只工作一次，我每次都必须执行上述过程）

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:25:33.387

终于找到答案了

无需编写查询，我们只需要加载我们尝试使用的更新节点

**$node = node_load(nid);**

比将新值设置为需要更新的列

**$node->field_dm_puser_ctag[0]['value'] = $ctag;**

比使用保存此节点

**节点保存（$节点）；**

这相当于更新查询。

万岁：）

# assembly - 比较和跳转指令作为一条指令

> ID：13335585
> 
> 赞同：1
> 
> 时间：2012-11-11T21:22:32.343
> 
> 标签：assembly, nasm

有没有一种方法可以比较并跳转到一条指令：

C 代码：
1\. `while(i<10)`
2.`{i++}`

汇编代码：`(eax=0)(ecx=10)`

1.  `.while:`
2.  `cmp eax, ecx`
3.  `jge .endofwhile`
4.  `add eax, 1`
5.  `jmp .while`
6.  `.endofwhile:`

有没有办法我可以在一条指令中执行第 2 行和第 3 行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:29:38.463

是的，您可以将测试和分支视为一条指令，这样做的方法是像您一样将它们写成两条指令，使用现代英特尔处理器并遵循一些简单的规则（分支指令必须包含在测试指令结束的同一 16 字节代码行中，这两条指令不得被任何其他指令分隔，...）。

该机制称为[宏观融合](https://web.archive.org/web/20120922053925/http://www.behardware.com/articles/623-7/intel-core-2-duo-test.html)。更多详细信息，包括宏融合应用的精确条件，请参见 Agner Fog 的[手册](http://www.agner.org/optimize/microarchitecture.pdf)，第 82 页。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T21:49:06.273

> 有没有办法我可以在一条指令中执行第 2 行和第 3 行？

如果允许您将 C 代码更改为倒数：

```
1\. i = 10;
2\. while(--i >= 0); 
```

然后您可以使用（单个）[LOOP 操作码](http://intel80386.com/386htm/LOOP.htm)。

LOOP 虽然是一条旧指令，因此它可能在较新的（Pentium++）CPU 上被弃用：“弃用”的意思是“仍然受支持，但比使用更原始的操作码（如 Pascal 的答案中给出的操作码）要慢。”

# c - 微软 x64 编译器中的 sizeof unsigned int

> ID：13335587
> 
> 赞同：2
> 
> 时间：2012-11-11T21:22:47.230
> 
> 标签：c, 64-bit, int

> **可能重复：**
> [64 位 Windows 上 long 的位大小是多少？](https://stackoverflow.com/questions/384502/what-is-the-bit-size-of-long-on-64-bit-windows)

为什么当我在 Microsoft Visual Studio 2010 中编译为 x64 时，`sizeof(unsigned int) == 4`？~~不~~应该是`8 == sizeof(int)`吗？我在配置管理器和 command_line_compiler 中更改平台，所有设置都是 x64，但大小为`unsigned int = 4`.

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:27:46.970

> 不是必须 = 8 = sizeof(int)

不，不必如此。各种整数类型的大小取决于实现，标准仅规定（在第 5.2.4.2 节中）一些最小范围。

例如，a`char`必须至少有 8 位，a`short int`和 an `int`（`unsigned`及其版本，必须与相应的有符号类型具有相同的大小和对齐要求）必须至少有 16 位，`long`必须至少有 32 位，以及`long long`至少64。

即使在 64 位系统上，`int`( 和`unsigned int`) 也是 32 位类型也是很常见的。

a`long`是 32 位还是 64 取决于，它在大多数（如果不是全部）64 位 linux 系统上是 64 位，而在 Windows 64 位上是 32 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:30:04.467

> 不是必须 = 8 = sizeof(int) 吗？

如果这是正确的英语，应该意味着“它的大小不应该等于 int 的大小”吗？那么答案是：**是的，标准要求无符号整数类型及其对应的有符号类型具有相同的大小。**如果不是这样，那么 Visual Studio 的编译器不符合要求（惊喜，惊喜......）。

然而，*两者* `int`和`unsigned int`都可能是 4 字节长——这并没有什么特别奇怪的地方，即使是在 64 位实现上也是如此。可能`long`或`long long`（和它们的无符号对应物）是 8 字节长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:31:52.263

语言标准没有说明`sizeof(int)`或任何数据类型。其实现已定义。

但它应该遵循这个规则：

```
1<=sizeof(char) < sizeof(short) <= sizeof(int) <= sizeof(long) < sizeof(long long) 
```

# c++ - 仅当传递变量时，std :: string析构函数上的c ++ seg错误

> ID：13335588
> 
> 赞同：1
> 
> 时间：2012-11-11T21:22:57.257
> 
> 标签：c++, segmentation-fault, destructor, stdstring

这个问题发生在很多繁忙的函数中间，所以我将尝试用伪代码来解释这个问题，希望它足够了。我对理解潜在问题和解决它同样感兴趣，所以除了修复之外，我希望能得到解释。谢谢！

'methodOne' 从另一个函数中检索 std::string xx，并将其与字符串 x1、x2 和 x3（都来自一个新对象）一起发送到 'methodTwo'。

```
bool methodOne(...) {
    Object1 obj = Object1(...);
    string xx = obj.someFunction(...);
    methodTwo(xx, obj.getX1(), obj.getX2(), obj.getX3() );
    ...
    return true;
} 
```

'methodTwo'（在 Object2 中）然后将这些字符串组合成一个向量，并将它们传递给 'methodThree'。

```
bool Object2::methodTwo(const string xx, const string x1, const string x2, const string x3) {
   vector<string> holder;      // alternate - comment out this line
   holder.push_back(xx);       //             and this line,
   // vector<string> holder(1, "test");    // alternate - uncomment this line
   holder.push_back(x1);
   holder.push_back(x2);
   holder.push_back(x3);
   ...
   obj3.methodThree( holder );
   ...
   return true;
}          // line 443 - where error is backtraced to 
```

最后，“methodThree”最终创建了几个文件，所有四个字符串都打印到其中一个。

运行程序，我从 gdb 得到一个分段错误：

```
Program received signal EXC_BAD_ACCESS, Could not access memory. Reason: 13 at address: 0x0000000000000000 0x00007fff8f1e3aa2 in std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::~basic_string () (gdb) where
#0  0x00007fff8f1e3aa2 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string ()
#1  0x0000000100009f18 in std::_Destroy<std::string> ()
#2  0x0000000100009f3e in std::__destroy_aux<std::string*> ()
#3  0x0000000100009f9f in std::_Destroy<std::string*> ()
#4  0x0000000100009fd7 in std::_Destroy<std::string*, std::string> ()
#5  0x0000000100060115 in std::vector<std::string, std::allocator<std::string> >::~vector (this=0x7fff5fbfd488) at stl_vector.h:271
#6  0x0000000100013b9f in Station::methodTwo (this=0x7fff5fbff110, foreFN=@0x7fff5fbfdf08, startDT=@0x7fff5fbfded8, stopDT=@0x7fff5fbfdea8, numElems=169, tCase=0x7fff5fbfe7c8) at Station.cpp:443
#7  0x0000000100002b45 in methodOne ()
#8  0x000000010000707a in main () 
```

在“methodTwo”中，如果我用一些随机测试字符串替换字符串“xx”，错误就会消失。所以问题必须与'xx'有关——这也是'methodOne'中唯一不是来自Object1 obj的字符串。

我在想某些构造函数实际上并没有复制字符串（是浅复制术语吗？）所以我尝试做一些事情，比如调用 methodTwo 为

```
methodTwo( string(xx), obj.getX1() ...) 
```

或者在构造向量时，使用类似的东西

```
holder.push_back( string(xx) ); 
```

但这些都不起作用。

我完全不知所措，我将不胜感激任何人的帮助/提示。我知道这很烦人，因为我没有给出可以重现问题的连贯代码，甚至没有给出实际代码——但希望这足以让比我更聪明的人看到一些东西。

谢谢

* * *

新奇事：

从下面的评论中，听起来实际错误很可能在其他地方，感染了堆。但是，因为`xx`仅通过*不*从 中检索来区分`obj`，所以我尝试添加`xx`到对象中 --- 即在前面调用的另一个方法中，变量`xx`设置为与之前应有的结果值相同的结果值......

```
string Object1::someFunction(...) {
    ...
    string val = ...;
    setXX(val);
    cout << getXX() << endl;         // this *correctly* prints the value of xx
    ...
    return val;
}
void Object1::setXX(string temp) { xx = string(temp); }
string Object1::getXX() { return xx; } 
```

然后我在`methodTwo`通话中检索 xx ：

```
methodTwo(obj.getXX(), obj.getX1() ... ); 
```

这已经**停止了错误，但** `xx` **不会存储字符串！！！** IE

```
obj.someFunction(...);          // this is able to set and retrieve xx
cout << obj.getXX() << endl;    //  prints **blank line!!**
methodTwo(obj.getXX(), obj.getX1() ...);   // no more error, x1 x2 x3 are fine, xx is empty! 
```

现在我感觉自己快要疯了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:38:40.417

当您在内存分配器中崩溃时，您很少能将问题追溯到崩溃时被释放（或分配）的确切内存。分配器将进行健全性检查，通常会捕获释放无效指针的尝试（未指向某些分配开始的指针、堆边界外的指针、重复的释放等）。内存分配器崩溃的最常见原因是堆损坏。通常被释放的块使用块前面的小结构链接到其他空闲块。在释放的内存上写入或在分配的块之外写入会破坏这些指针并导致分配器崩溃。

我希望，如果您的*备用*程序在避免初始崩溃后运行足够长的时间，最终还是会发生另一次崩溃。您观察到的模式`xx`可能就像长度与..`xx`大不相同一样简单，因此是从不同的内存池分配的。`x1``x3`

这是一个可以尝试的测试：如果您只是放在`return`顶部，程序是否仍然崩溃`methodThree`？

# neo4j - Neo4j 自动索引 - 使它们永久保留

> ID：13335589
> 
> 赞同：0
> 
> 时间：2012-11-11T21:22:58.473
> 
> 标签：neo4j

我有 neo4j 作为 Windows 服务运行。当我重新启动机器时，自动索引没有打开。

```
neo4j-sh (0)$ eval db.index().getNodeAutoIndexer().isEnabled() 
```

返回假

我必须跑

```
neo4j-sh (0)$ eval db.index().getNodeAutoIndexer().setEnabled(true) 
```

每次我启动服务。

我的配置文件中有以下内容

```
node_auto_indexing=true
node_keys_indexable=EmailAddress,Identifier,PostIdentifier,UserIdentifier 
```

这些是当我变得可索引的键`setEnabled(true)`

如何配置服务，以便不必在每次启动时启用索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:10:27.660

根据 Peter Neubauer 的评论，索引是懒惰地创建的。因此，您必须创建至少一个包含至少一个可索引属性的实体（节点或关系）。恕我直言，这可能被认为是管理索引的一个错误。您可能希望在延迟创建索引之前对索引发出 Cypher 查询。由于索引不存在，此查询将导致错误。但是您可能期望的是一个空的结果集。发生错误的事实实际上将一些索引实现泄漏给调用者。

事实上，我想我会就此提出一个问题 ;-)

# php - 检查字符串是否以php中的特定单词结尾？

> ID：13335591
> 
> 赞同：4
> 
> 时间：2012-11-11T21:23:05.273
> 
> 标签：php, regex

像这个问题有很多问题，但我找不到确切的答案。而且我不熟悉正则表达式主题。

我想知道是否`$variable`以“书”结尾。

例如 ：

```
$variable = "some-historical-books". 
```

因此，如果以书籍结尾，我将显示书籍页面。

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T21:25:39.770

也许你应该看看[教程](http://www.regular-expressions.info/tutorial.html)。您正在寻找的是[一个 anchor](http://www.regular-expressions.info/anchors.html)，它标志着字符串的结束。

```
if(preg_match('/books$/', $variable))
    // redirect to books page 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T21:25:13.650

您需要做的就是`$`在您的正则表达式末尾添加您需要的单词和 a

```
$pattern = "/books$/"; 
```

就像您想知道您的值是否以特定字符串开头一样，您可以`^`在开头使用：

```
$pattern = "/^Books/"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T21:26:38.183

你在这里肯定不需要正则表达式：

```
<?php
$variable = "some-historical-books";
$searchterm = "books";

$pos = strrpos($variable, $searchterm);

if ($pos !== false && strlen($searchterm) + $pos == strlen($variable))
    echo "yep, it's at the end"; 
```

# f# - 如何使用 Webshaper 创建滑块？

> ID：13335592
> 
> 赞同：3
> 
> 时间：2012-11-11T21:23:09.813
> 
> 标签：f#, websharper

我只是在学习 Websharper，所以我还是很困惑。

在 Intellifactory 示例网页上，计算器示例的代码似乎使用`Button`Webshaper 提供了一些 GUI 控件，但安装在磁盘上的代码使用其自己的帮助函数来创建如下所示的按钮：

```
let btn caption action =
  Input [Attr.Type "button"; Attr.Value caption; Attr.Style "width: 30px"]
  |>! OnClick (fun e _ -> action ()) 
```

好像 Webshaper 不包含基本的 GUI 控件，所以您必须执行类似的操作才能获得它们（这似乎违背了使用 Websharper 之类的抽象的目的）。

我想要一个带有回调的滑块，只要它的值发生变化就会被调用。如何使用 Websharper 获得一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:15:29.827

您可以使用 JQueryUI 中的滑块：

```
[<JavaScript>]
override this.Body = 
    let text = Span []
    let slider = Slider.New(SliderConfiguration(min = 0, max = 10, value = 5))
    // typed way to subscribe doesn't work, internally tries to bind handler to 'sliderslide' event
    // per documentation (http://api.jqueryui.com/slider/#event-slide) should be 'slide'
    // slider.OnSlide(fun _ -> text.Text <- string slider.Value ) 
    JQuery.JQuery.Of(slider.Widget).Bind("slide", Func<_, _, _>(fun _ _ -> text.Text <- string slider.Value )).Ignore
    Div [
        Div [ slider ]
        Div [ text ]
    ] :> _ 
```

# php - 来自 JSON 数据的 PHP IF 函数

> ID：13335598
> 
> 赞同：0
> 
> 时间：2012-11-11T21:23:49.833
> 
> 标签：php

在对我的数据执行 var_dump() 时，我有以下数据：

```
 ["time_zone"]=>
   string(6) "London"
  ["geo_enabled"]=>
   bool(false)
  ["verified"]=>
   bool(true) 
```

我可以执行以下操作来访问字符串`"London"`：`$UserTimeZone = $userProfile->time_zone;`

但是，我还需要能够确定`"verified"`布尔值是否为真/假。

如何编写 if 来检查`"verified"`bool 值是否为真/假。

我尝试了以下方法，但它不工作它总是返回 - 未验证：

```
$verified->verified;

if ($verified) {
  echo "verified";
} else {
  echo "not verified";
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:27:04.250

看起来您实际上并没有设置变量 $verified，在这种情况下，它在您的 if 语句中总是会导致错误。

```
$verfied->$verified; // This isn't setting the variable $verified to anything.

$verified = $userProfile->verified; // This sets the variable $verified to what is stored in your user profile object

if ($verified) {
  echo "verified";
} else {
  echo "not verified";
} 
```

或者，您可以这样做：

```
if ($userProfile->verified) {
  echo "verified";
} else {
  echo "not verified";
} 
```

这样您就不必担心设置任何额外的变量，您只需访问对象中存储的内容。

# javascript - 部分应用 - Eloquent Javascript

> ID：13335600
> 
> 赞同：3
> 
> 时间：2012-11-11T21:23:55.100
> 
> 标签：javascript, partial-application

我正在阅读 Eloquent Javascript，并且很难理解下面的示例。任何人都可以逐行解释吗？具体来说，我很困惑为什么第一个循环从一个开始，以及为什么 push 方法同时用于 knownArgs 和 arguments。我知道这与“部分应用程序”有关，但想更详细地解释一下到底发生了什么。

```
var op = {
 "+": function(a,b){return a + b;}
};

function partial(func) {
 var knownArgs = arguments;

 return function() {
  var realArgs = [];

  for (var i=1; i<knownArgs.length; i++)
   realArgs.push(knownArgs[i]);

  for (var i=0; i<arguments.length; i++)
   realArgs.push(arguments[i]);

  return func.apply(null, realArgs);
 };
}

map(partial(op["+"], 1), [0, 2, 4, 6, 8, 10]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:44:08.147

该变量保留被调用时`knownArgs`的值的副本。该调用返回*另一个*函数，并且在该代码内部是一个完全不同的列表——它们是传递给该返回函数的参数。换句话说：`arguments``partial()`*`arguments`*

 *var p = partial(someFunction, "hello", "world");

当`p()`被调用时，`knownArgs`将是“hello”和“world”（当然，`someFunction`但请注意第一个循环从 1 开始）。如果调用`p()`看起来像这样：

p(“如何”、“是”、“你”);

然后它将首先将“hello”和“world”推送到`realArgs`列表中（from `knownArgs`），然后将三个参数传递给`p()`，from `arguments`。

*编辑*`map(partial(op["+"], 1), [0, 2, 4, 6, 8, 10]);`- 如何评估的逐步细分：

1.  首先，`op["+"]`必须进行评估。我猜它会返回一个函数，可能是这样的：

    ```
    function add(a, b) {
      return a + b;
    } 
    ```

2.  该“添加”函数和值`1`被传递给`partial()`. 因此伪数组内部看起来`partial()`像`arguments`

    ```
    [ add, 1 ] 
    ```

    也就是说，第一个参数是“add”函数，`op["+"]`第二个是那个值`1`。`partial()`在返回匿名函数之前唯一真正做的就是保存`arguments`到`knownArgs`. 必须这样做，因为奇怪的`arguments`伪变量*总是*在每次函数调用时都被分配一个新值。它被保存在这里，以便匿名函数中的代码以后可以访问它。

3.  `partial()`现在，使用从偶数数组返回的匿名函数，我们调用`map()`. 该功能可能看起来像这样（我没有书）：

    ```
    function map(fn, list) {
      var i, result = [];
      for (i = 0; i < list.length; ++i) {
        result.push( fn( list[i] ) );
      }
      return result;
    } 
    ```

    那么，在内部`map()`，第一个参数是从先前调用返回的匿名函数`partial()`。那个函数有什么作用？好吧，它将原始`partial()`调用中的参数（*第一个除外*）与传递给它的参数组合在一起。该`map()`函数只传递一个参数，因此每次调用匿名函数时生成的参数列表将是`1`传递给的值`partial()`，然后在每次迭代中，列表中的一个不同的偶数。

一个更简单的例子是考虑调用时会发生什么：

```
partial(op["+"], 1)(2); 
```

也就是说，如果你调用`partial()`然后立即使用它的返回值（匿名函数）。效果将与调用相同：

```
add(1, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:43:58.367

第一个循环从一开始而不是零，因为`knownArgs[0]`包含函数，而不是它的参数。

`push`将单个元素附加到数组。这是构建数组的一种相当常见的方法。

```
 var realArgs = [];

  for (var i=1; i<knownArgs.length; i++)
    realArgs.push(knownArgs[i]);

  for (var i=0; i<arguments.length; i++)
    realArgs.push(arguments[i]); 
```

将创建一个从`knownArgs`和连接的新数组`arguments`。`knownArgs`保存 curried 参数和函数（未附加到`realArgs`），并且`arguments`是在调用函数时提供给函数的参数。*

# oracle - Oracle PL-SQL 函数未返回 true

> ID：13335601
> 
> 赞同：3
> 
> 时间：2012-11-11T21:23:55.367
> 
> 标签：oracle, function, plsql, boolean, return

我正在尝试编写一个函数，如果它在表中找到帐户描述，则返回 1，如果没有，则返回 0。

我可以让它返回 0 罚款，但我似乎无法让它返回 1

```
 Create or replace function test_glaccounts_description
    ( 
    var_account_desc varchar2
    )
    return number
    as var_status number
    begin
    select 1 into var_status
    from general_ledger_accounts
    where account_description = var_account_desc;
    exception
    when no_data_found then
    var_status := 0;
    return var_status;
    end;
    / 
```

这是它应该做的

编写名为 test_glaccounts_description 的函数，该函数接受一个参数，用于测试帐户描述是否已在 General_Ledger_Accounts 表中。如果帐户描述在表中，则此函数应返回值 1，否则应返回零。（注意：如果 SELECT 语句不返回任何数据，它会引发您的函数可以处理的 NO_DATA_FOUND 异常。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:31:29.137

您需要从代码中的所有路径返回。

像这样的东西应该工作：

```
begin
  select 1 into var_status
    from general_ledger_accounts
    where account_description = var_account_desc;
  return var_status;
exception
  when no_data_found then
    var_status := 0;
    return var_status;
end;
/ 
```

# visualforce - 在 visualforce 页面上自动填充列

> ID：13335604
> 
> 赞同：1
> 
> 时间：2012-11-11T21:24:26.470
> 
> 标签：visualforce

我设计了一个 VF 页面来显示自定义对象的字段记录列表。我的对象中有两个数字字段，我设计了 VF 页面，以在页面底部显示这些数字字段和总计。将来，如果将额外的数字字段添加到同一对象，那么我如何编写代码来添加一列，该列又应自动填充到 visualforce 页面上。是否可以在销售人员中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:06:33.423

**请在下面找到一些代码。请注意，这未经测试，但会给你一个完整的想法！**

```
VF Page:
<apex:form>
      <!-- this column will return the sum -->
      <apex:column value="{!Sum}"/>
</apex:form>

Apex Class:
//Your class will contain the below method
    public String getSum(){
             Double Sum;
            //Return a list of the object
            List <Custom_Object__c> listCustom = [Select Num1, Num2 from Custom_Object__c];
            for(Custom_Object__c co : listCustom){
                Sum = co.Num1 + co.Num2;
              }
             return String.valueOf(Sum);
    } 
```

**答案将是这样的。请试一试，如果不起作用，请回复，我将很乐意提供帮助！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:26:42.650

如果您在此页面上有控制器/控制器扩展，您可以使用描述调用来了解对象中所有字段的列表，检查它们的类型并决定要显示和汇总哪些字段。

```
Schema.DescribeFieldResult f = Account.NumberOfEmployees.getDescribe();
System.assertEquals(Schema.DisplayType.INTEGER, f.getType()); 
```

但是依赖于描述调用的结果会有一些限制（达到每个请求 100 个描述的州长限制，字段将按名称排序，这可能不是您想要显示它们的顺序......）。

由于您需要动态 Visualforce，您可以考虑制作一个[字段集](http://www.salesforce.com/us/developer/docs/pages/Content/pages_dynamic_vf_field_sets.htm)或自定义设置，列出您想要的字段，然后如果您使用 Apex 计算小计 -[请从代码中引用它](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_methods_system_fieldsets_describe.htm)。这样，当您稍后需要更新它时，您就不必触摸控制器。

# .htaccess - HTACCESS - 需要重定向的正确语法

> ID：13335605
> 
> 赞同：1
> 
> 时间：2012-11-11T21:24:30.653
> 
> 标签：.htaccess, mod-rewrite

我从来没有真正理解正确的 .htaccess 公式，但我总能找到与我的需求相似的东西并修改它。我阅读了很多教程，但在大多数情况下，它们会告诉我如何做同样的事情，而我无法学习新的东西。现在我需要再次使用 mod rewrite 并且无法找到任何解决方案。希望你能用正确的语法帮助我。

我在浏览器中输入了这样一个地址：

[http://www.example.com/pages/test3.php](http://www.example.com/pages/test3.php)

我想将用户重定向到：

[http://www.example.com/pages/index.php?p=test3](http://www.example.com/pages/index.php?p=test3)

但是（如果可能的话）浏览器中的地址应该保持第一个，这样用户就不会知道他已经被重定向了。换句话说，modrewrite 是否可以从第二个地址加载数据，因为它看起来是第一个地址？

希望你能帮助我，我真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:59:28.273

这应该有效：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/pages/index\.php
RewriteRule ^pages/(.*)\.php$ /pages/index.php?p=$1 [L] 
```

# php - PHP 将数组切片成部分

> ID：13335619
> 
> 赞同：1
> 
> 时间：2012-11-11T21:25:58.807
> 
> 标签：php, arrays, slice

> **可能重复：**
> [php将数组拆分为更小的偶数数组](https://stackoverflow.com/questions/2861530/php-split-array-into-smaller-even-arrays)

如何将数组分割成多个部分？可以说我有这个数组：

`$arr = range(1, 15);`

我怎样才能得到这个结果：

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

    [1] => Array
        (
            [0] => 4
            [1] => 5
            [2] => 6
        )

    [2] => Array
       ............
) 
```

到目前为止我已经尝试过：

```
$parts = 3;
$slices = array();

for($i=0; $i<($parts * $parts); $i=$i+$parts){
  $sliced = array_slice($arr, $i, (count($arr) / $parts));
  array_push($slices, $sliced);
} 
```

它似乎**只适用于 10 个元素以下的数组，**这让我对代码为什么以及如何真正工作感到困惑，它对我来说似乎也不是静态的。有没有其他方法可以做到这一点或修复代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T21:26:44.220

您可以使用内置函数[`array_chunk`](http://php.net/array_chunk)而不是自己编写：

```
$chunks = array_chunk($arr, 3); 
```

# jquery - 灯箱中的jquery ajax load（）内容

> ID：13335625
> 
> 赞同：1
> 
> 时间：2012-11-11T21:26:42.840
> 
> 标签：jquery, ajax, wordpress, colorbox

我正在开发一个 wordpress 作品集主题开发，并且对我想应用于该主题的功能有一些问题。该功能是主页上的“快速查看”。基本上，这个想法是从 thw wordpress 帖子中加载图库和内容，并在用户单击图像后将其显示在灯箱中。

我有一个工作代码可以加载正确的内容并将其显示在灯箱（彩盒）中。此内容包含一个基于 jquery 的画廊，**问题是灯箱只是使用 jquery 代码“激活”画廊**..

```
 $(".quick-look-btn").click(function () {
        $(".quick-view").load($(this).attr("href") + " .portfolio-main");
    });

    var $form = $(".quick-view").first();
    $(".quick-look-btn").colorbox({
        inline:true, 
        href:$form, 
        width:"750", 
        height:"367"
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:28:42.200

假设你的画廊 jquery 是这样的......

```
$('leftbutton').on('click', function(){
          // Slide images left...blah blah
}); 
```

这只会影响页面上已经存在的元素...要将功能附加到动态添加到页面的元素，您需要这样做

```
$('body').on('click', 'leftbutton', function(){
          // Slide images left...blah blah
}); 
```

这将确保“body”中存在的所有元素（例如“.leftbutton”）都将被附加，即使这些元素是稍后添加的。

如果您愿意，请查看此内容以了解更多信息！ [http://api.jquery.com/on/](http://api.jquery.com/on/)

# jquery - BJQS 滑块停止

> ID：13335630
> 
> 赞同：4
> 
> 时间：2012-11-11T21:26:51.327
> 
> 标签：jquery, slider

现在有什么功能可以在单击自定义按钮后停止 BJQS（基本 jQuery 滑块）滑块？当然还有如何在点击自定义开始按钮后让它再次运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T02:56:44.337

我也遇到了同样的问题。但是，我找到了`settings.automatic = false;`防止幻灯片自动滑动的选项。`stop : false`然后我在默认变量中声明一个变量并签入`init function`：

```
var init = function() {
    if ( settings.stop ) {
       settings.automatic = false;
    }
    ...
} 
```

所以在我的调用函数中，我简单地调用了：

```
$('#banner-slide').bjqs({
    animtype      : 'slide',
    height        : 357,
    width         : 631,
    responsive    : false,
    randomstart   : false,
    stop      : true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T07:18:18.703

```
`funcion pauseSlide(){
    $('#date_ss').bjqs.pauseslider();
}
funcion resumeSlide(){
    $('#date_ss').bjqs.resumeslider();
}` 
```

你必须试试这个。单击按钮时调用函数。我希望它有效。

# eclipse - 无法在 Eclipse Helios 上安装 Pydev

> ID：13335635
> 
> 赞同：1
> 
> 时间：2012-11-11T21:27:15.890
> 
> 标签：eclipse, pydev

出于某种原因，我没有看到 Eclipse Helios ( 3.6.1 ) 看到 Pydev ( 2.7.1 )。我尝试了在线安装选项，但找不到存储库。我根据文档尝试了 zip files 选项，将文件复制到了我可以找到但没有帮助的 dropins、plugin/features 文件夹中。

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:22:12.767

Eclipse Helios 似乎在使用 PyDev 时可能存在问题。我试图在我的 Helios 3.7.0 上安装它，但它永远不会工作——无论是在线还是 dropins。它会在网上正确安装，但是透视图不会出现。我发现在我安装了 Eclipse Juno 4.2.0 之后，使用在线安装它工作得很好。

# python - 打开外部文件可能会产生错误或在读取模式下创建

> ID：13335638
> 
> 赞同：1
> 
> 时间：2012-11-11T21:27:32.580
> 
> 标签：python, file, external, ioerror

昨晚我写了一个程序，它把所有注释的行从一个文件中拉出来，然后输出到一个新文件中。这是我们在我的编程课上经常要做的事情，并且通过文件复制和粘贴来挑选很快就会变老。

我检查了我的输入文件和输出文件以查看它们是否存在。如果输入文件确实存在，那么一切都会继续——如果不存在，请询问另一个文件名。如果输出文件确实存在，询问用户是否要覆盖——如果它不存在，一切都很好。

我遇到的问题是，当 file = open(fileName, 'r') 找不到文件时，一项检查正确地引发 IOError，另一项检查创建一个空白文件而不是给出 IOError。

这尤其令人困惑，因为这两位代码几乎相同。相同的过程，只是不同的文件名变量......

代码如下。第二部分是创建空白文件的部分。首先按预期给出错误。

```
# Try to open the input file
inFileOpen = False
while not inFileOpen and userTrying:
    # If it opens, all good
    try:
        inFile = open(inFileName, 'r')
        inFileOpen = True
    # If it doesn't open, ask user to try a different file
    except IOError:
        ...

# Try to open the output file
toFileOpen = False
while not toFileOpen and userTrying:
    # If the file opens in r mode, that means it exists already, so ask user if they
    # want to overwrite the existing file, if not ask for a new file name
    try:
        # ********************
        # For some reason, 'r' mode is creating a file... no clue...
        # ********************
        toFile = open(toFileName)
        toFile.close() # I have tried removing this just guessing at solutions. Didn't work.

        # ... Ask if user wants to overwrite

    # If the file can't be opened, all good, that means it doesn't exist yet
    except IOError:
        toFileOpen = False
        toFile = open(toFileName, 'w') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:48:01.050

如果您使用的是 Python 3.3，`open`则具有与“w”相同的“x”模式，但`FileExistsException`如果文件已经存在，它将引发 a。这比单独检查要好，因为它是对现有文件的测试和打开它以进行写入之间的原子和免疫竞争条件。虽然这对于您当前的脚本可能不是问题，但在更安全的关键程序中可能很重要。

在旧版本的 Python（2.x 和 3.0-3.2）中，它有点棘手。一种选择是打开文件以进行附加（“a”模式），然后检查当前流位置（使用`tell`）以查看它是否已包含某些内容。如果是这样，但用户想要替换旧内容，您可以调用`truncate()`然后`seek(0)`擦除当前数据并返回到文件的开头。这仍然可能会在没有通知的情况下覆盖零长度文件，但我怀疑这不是一个大问题。另一种方法是将`os.O_EXCL|os.O_CREAT`标志显式传递给`os.open`，然后将返回的文件描述符传递给`os.fdopen`以获取常规 Python 文件对象。这本质上是“x”模式在幕后所做的。

**编辑**：这是一个漂亮的上下文管理器解决方案，用于创建一个输出文件，给定合适的`get_filename`和`confirm_overwrite`与用户进行实际交互的功能。此代码适用于 Python 3.3，但可以修改`open`调用和`except`语句以使其适用于早期版本。

```
from contextlib import contextmanager

@contextmanager
def create_output_file():
    while True:
        out_filename = get_filename()

        try:
            with open(out_filename, "x") as f:
                yield f
            break

        except FileExistsException:
            if confirm_overwrite(out_filename):
                with open(out_filename, "w") as f:
                    yield f
                break 
```

将其与`with`语句一起使用：

```
with create_output_file() as f:
    f.write("whatever") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:51:22.647

我认为 os.path.exists(filename) 将是检查文件的好方法：

例如。

```
 while not os.path.exists(infile):
     infile = askfilename()
 with open(infile) as f:
     for line in f:
         ... 
```

您可以对 outfile 执行类似操作

# php - 从服务器代码获取信息从 VB6 转换为 PHP

> ID：13335642
> 
> 赞同：1
> 
> 时间：2012-11-11T21:27:53.023
> 
> 标签：php, sockets, vb6

我需要帮助尝试将 VB6 代码转换为 PHP。我的 php 代码能够连接，但在超时发生之前一直保持连接。而且它不返回任何数据。

VB6代码：

```
Private Sub sckPing_Connect(index As Integer)
    Dim St As String, send As String
    St = Chr$(35)
    sckPing(index).SendData DoubleChar$(Len(St)) + Chr$(CheckSum(St) * 20 Mod 194) + Chr$(0) + St
End Sub

Private Sub sckPing_DataArrival(index As Integer, ByVal bytesTotal As Long)
    Dim Receive As String
    sckPing(index).GetData Receive, vbString, bytesTotal
    lstServers.List(index) = lstServers.List(index) + " (" + Receive + ")"
    sckPing(index).Close
End Sub 
```

以下是我所拥有的，我能够创建校验和并打开与服务器的连接，但它似乎没有返回任何内容并且超时时间很长。

```
Function CheckSum($st)
{
For($a="1"; $a<strlen($st); $a=$a+1)
{
$B = $B + StrLen($st,$a,1);
}
return $B;
}

Function sckPing($addr, $prt)
{
$getplayers = Chr(35) + Chr(CheckSum(Chr(35)) * 20 % 194) + Chr(0) + Chr(35);
$socket = socket_create(AF_INET, SOCK_STREAM, 0);
$result = socket_connect($socket,$addr,$prt);
$buf='';
socket_write($socket, $getplayers, StrLen($getplayers));
if (false !== ($bytes = socket_recv($socket, $buf, 8192, 0))) {

    echo "Read $bytes bytes from socket_recv(). Closing socket...";
} else {
    echo "socket_recv() failed; reason: " . socket_strerror(socket_last_error($socket)) . "\n";
}
        socket_set_nonblock($this->_SOCK); 

        $error = NULL; 
        $attempts = 0; 
        $timeout *= 1000;  // adjust because we sleeping in 1 millisecond increments 
        $connected; 
        while (!($connected = socket_connect($this->_SOCK, $remote, $port+0)) && $attempts++ < $timeout) { 
            $error = socket_last_error(); 
            if ($error != SOCKET_EINPROGRESS && $error != SOCKET_EALREADY) { 
                $this->errstr = "Error Connecting Socket: ".socket_strerror($error); 
                socket_close($this->_SOCK); 
                return NULL; 
            } 
            usleep(1000); 
        } 

        if (!$connected) { 
            $this->errstr = "Error Connecting Socket: Connect Timed Out After $timeout seconds. ".socket_strerror(socket_last_error()); 
            socket_close($this->_SOCK); 
            return NULL; 
        } 

        socket_set_block($this->_SOCK); 
socket_close($socket);

echo $buf . "\n";
echo "OK.\n\n";
}

sckPing("127.0.0.1", 5750); 
```

错误：socket_recv() 失败；原因：现有连接被远程主机强行关闭。

# spring - “严重：错误侦听器启动”使用 spring-security-ldap 插件 1.0.6 部署 Grails 应用程序

> ID：13335643
> 
> 赞同：2
> 
> 时间：2012-11-11T21:28:00.917
> 
> 标签：spring, tomcat, grails

我有一个 Grails 应用程序，可以在开发中构建和运行良好，但是当我创建一个 war 文件（grails dev create war /target.helloworld.war）时，那个 .war 没有正确部署。

通过消除过程，我将问题缩小到 spring-security-ldap 插件。

我已经在三种环境中对此进行了测试：

Tomcat 7 MacOSx JDK7 Tomcat 6 Ubuntu 12.04 JDK7 Tomcat 7 Ubuntu 12.04 JDK7

我在所有环境中都使用相同的 JDK 版本进行编译。

我得到的错误：

信息：部署 Web 应用程序存档 helloworld.war 2012 年 11 月 11 日下午 12:54:15 org.apache.catalina.core.StandardContext 开始严重：错误 listenerStart 2012 年 11 月 11 日下午 12:54:15 org.apache.catalina.core .StandardContext start 严重：上下文 [/helloworld] 启动失败，由于先前的错误 2012 年 11 月 11 日下午 12:54:15 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads 严重：Web 应用程序 [/helloworld] 似乎已启动线程名为 [MongoCleaner1671814044] 但未能阻止它。这很可能造成内存泄漏。

我还按照将 FINE 日志记录添加到类文件夹的说明进行操作，但这似乎对我也没有帮助。

作为参考，我已经关注了这个线程： http: [//grails.1312388.n4.nabble.com/Deployment-problems-td4628710.html](http://grails.1312388.n4.nabble.com/Deployment-problems-td4628710.html)

有没有人遇到过这个问题并用 spring-security-ldap 1.0.6 解决了这个问题？

提前致谢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T15:30:43.610

将一个名为(unwar your app) 文件夹`logging.properties`中的`WEB-INF/classes`文件放入其中：

```
handlers = org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

org.apache.juli.FileHandler.level = FINE
org.apache.juli.FileHandler.directory = /var/log
org.apache.juli.FileHandler.prefix = myapp-tomcat.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter 
```

然后重启Tomcat。

您的应用程序仍然会失败，但在文件中`/var/log/myapp-tomcat.log`您会发现比无用的“严重：错误 listenerStart”更详细的错误跟踪

可能缺少类文件或数据库配置错误。

# c# - 我如何以编程方式使用 C# 代码中的航空捕捉功能

> ID：13335646
> 
> 赞同：2
> 
> 时间：2012-11-11T21:28:21.460
> 
> 标签：c#, winforms, operating-system, aero-snap

我有一个简单的问题。如何从我的 C# 代码以编程方式访问 aero snap。就像，如果我单击一个“向左对齐”按钮，我希望我的程序窗口向左对齐，就像手动在那里药物一样。我查看了所有内容，但所有问题似乎都是关于 aero snap 不使用表单，并防止它捕捉表单。不是以编程方式捕捉表单。我很高兴使用 interloping。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T22:03:03.593

假设您使用的是 Windows 7，您可以做的是将 AreoSnap Keypress 发送到当前活动窗口。

[这个](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)代码项目有一篇非常好的文章来说明这一点。

另请查看[这个](https://stackoverflow.com/questions/8605147/c-sharp-sending-keyboard-commands-to-another-window-process)SO question。

似乎一种方法是`sendmessage`在 User32.dll 中使用。

这是一个示例，假设“记事本”是您想要将击键发送到的程序：

```
[DllImport("user32.dll", EntryPoint = "FindWindowEx")]
public static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);
[DllImport("User32.dll")]
public static extern int SendMessage(IntPtr hWnd, int uMsg, int wParam, string lParam);
private void button1_Click(object sender, EventArgs e)
{
    Process [] notepads=Process.GetProcessesByName("notepad");
    if(notepads.Length==0)return;            
    if (notepads[0] != null)
    {
        IntPtr child= FindWindowEx(notepads[0].MainWindowHandle, new IntPtr(0), "Edit", null);
        SendMessage(child, 0x000C, 0, textBox1.Text);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T16:36:32.870

我也需要这样做，并发现[Windows 输入模拟器](http://inputsimulator.codeplex.com/)非常有用。

# c# - 在 C# 中将 .wav 文件转换为 .aiff

> ID：13335647
> 
> 赞同：1
> 
> 时间：2012-11-11T21:28:26.780
> 
> 标签：c#, audio, file-conversion

我正在尝试编写一个类，将 .wav 文件转换为 .aiff 文件作为项目的一部分。

我遇到了几个库 Alvas.Audio (http://alvas.net/alvas.audio,overview.aspx) 和 NAudio (http://naudio.codeplex.com)

我想知道是否有人对其中任何一个有任何经验，因为我真的很难弄清楚如何使用这两个库以 aiff 格式编写文件。

到目前为止，我有以下代码，但我不知道如何将 outfile 定义为 aiff：

阿尔瓦斯

```
string inFile = textBox1.Text; 
WaveReader mr = new WaveReader(File.OpenRead(inFile));
IntPtr mrFormat = mr.ReadFormat();
IntPtr wwFormat = AudioCompressionManager.GetCompatibleFormat(mrFormat, AudioCompressionManager.PcmFormatTag);
string outFile = inFile + ".aif";
WaveWriter ww = new WaveWriter(File.Create(outFile), AudioCompressionManager.FormatBytes(wwFormat));
AudioCompressionManager.Convert(mr, ww, false);
mr.Close();
ww.Close(); 
```

南音频

```
string inFile = textBox1.Text;
string outFile = inFile + ".aif";

using (WaveFileReader reader = new WaveFileReader(inFile))
{
   using (WaveFileWriter writer = new WaveFileWriter(outFile, reader.WaveFormat))
   {
       byte[] buffer = new byte[4096];
       int bytesRead = 0;
       do
       {
           bytesRead = reader.Read(buffer, 0, buffer.Length);
           writer.Write(buffer, 0, bytesRead);
       } while (bytesRead > 0);
   }
} 
```

任何帮助都会被广泛接受:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T13:20:49.623

For latest version of Alvas.Audio see code below from: [How to convert .wav to .aiff?](http://alvas.net/alvas.audio,tips.aspx#tip133)

```
static void Wav2Aiff(string inFile)
{
    WaveReader wr = new WaveReader(File.OpenRead(inFile));
    IntPtr inFormat = wr.ReadFormat();
    IntPtr outFormat = AudioCompressionManager.GetCompatibleFormat(inFormat, 
        AudioCompressionManager.PcmFormatTag);
    string outFile = inFile + ".aif";
    AiffWriter aw = new AiffWriter(File.Create(outFile), outFormat);
    byte[] outData = AudioCompressionManager.Convert(inFormat, outFormat, wr.ReadData(), false);
    aw.WriteData(outData);
    wr.Close();
    aw.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:45:03.563

from Alvas`WavWriter`和`WaveFileWriter`from NAudio 都设计用于创建 WAV 文件，而不是 AIFF 文件。NAudio 不包含 AiffFileWriter，我也不了解 Alvas，但 AIFF 文件在 Windows 平台上并不常用。它们使用 big-endian 字节排序（WAV 使用 little-endian）并且 AIFF 文件格式对 WAV 文件有不同的“块”定义。

基本答案是您可能必须创建自己的 AIFF 编写代码。您可以在[此处阅读 AIFF 规范](http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/AIFF/Docs/AIFF-1.3.pdf)。您基本上需要创建一个 FORM 块，其中包含一个 COMM（通用）块，后跟一个 SSND（声音数据）块。规范解释了在这些块中放入的内容（相当简单）。在 Windows 上您需要记住的主要事情是交换字节顺序。

# android - 在 XML 上保持 Touch 监听器？

> ID：13335650
> 
> 赞同：0
> 
> 时间：2012-11-11T21:28:44.760
> 
> 标签：android, surfaceview

我在后台有一个 XML 布局，顶部有一个透明的 SurfaceView，如何通过 SurfaceView 将触摸事件传递给 XML？

这是我的 onTouch() 监听器：

```
 public boolean onTouch(View v, MotionEvent me) 
    {
        //x = me.getX();
        zoomController++;
        Log.d("Tat", String.valueOf(zoomController));
        //y = me.getY();

        try 
        {
            Thread.sleep(50);
        } catch (InterruptedException e) 
        {
            e.printStackTrace();
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:38:38.027

好的，所以我所做的只是在底部的 onTouch() 中返回 false，它让我实际上可以在两个画布上工作：XML 和 SurfaceView！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:38:58.247

您正在寻找[OnInterceptTouchEvent 基本上](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)
，因为您在顶部有一个表面视图，并且您不希望它处理触摸事件，所以您返回 true 以从孩子那里获取事件。

```
 public class ParentContainer extends View {

    @SuppressWarnings("deprecation")
    public ParentContainer (Context context, AttributeSet attrs) {
        super(context, attrs);

    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        return true;//parent gets the touch event
} 
```

# regex - scala：按逗号分割字符串，忽略引号之间的逗号

> ID：13335651
> 
> 赞同：12
> 
> 时间：2012-11-11T21:28:51.397
> 
> 标签：regex, parsing, scala

> **可能重复：**
> [Java：拆分逗号分隔的字符串但忽略引号中的逗号](https://stackoverflow.com/questions/1757065/java-splitting-a-comma-separated-string-but-ignoring-commas-in-quotes)

显示一些代码更容易

我有以下内容：

```
scala> val a = """op1,"op2.1,op2.2",,op4""".split(",")
a: Array[java.lang.String] = Array(op1, "op2.1, op2.2", "", op4)

scala> a.foreach( println )
op1
"op2.1
op2.2"

op4 
```

我想得到

```
scala> val a = """op1,"op2.1,op2.2",,op4""".split(",")
a: Array[java.lang.String] = Array(op1, "op2.1, op2.2", "", op4)

scala> a.foreach( println )
op1
op2.1, op2.2

op4 
```

但我不知道用什么正则表达式来分割字符串

- 编辑 -

我在这个问题中找到了答案：[Java: split a comma-separated string but ignoring commas in quotes](https://stackoverflow.com/questions/1757065/java-splitting-a-comma-separated-string-but-ignoring-commas-in-quotes)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T22:18:44.287

使用此正则表达式拆分，它应该可以工作：`,(?=([^\"]*\"[^\"]*\")*[^\"]*$)`

# c++ - 有没有办法使用 boost 线程库将线程关联设置到处理器内核？

> ID：13335652
> 
> 赞同：4
> 
> 时间：2012-11-11T21:29:06.060
> 
> 标签：c++, multithreading, boost-thread, affinity

如果我需要处理器内核以 100% 的速度运行十几秒钟，或者如果我让系统决定如何处理线程，我会获得更好的性能吗？

我需要的是快速执行，我担心系统可能会在使用所有内核之前花费几秒钟，但我还没有找到任何使用 boost 线程的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:35:30.063

您的操作系统的调度程序应该以毫秒而不是秒为单位为您处理这个问题。细节取决于你在哪个操作系统上运行，但一种常见的方法是，当调度程序在空闲 CPU 上运行时，它会检查它是否可以从另一个 CPU 中窃取线程过多。这可以快速平衡所有 CPU 上的线程。

作为一般规则，如果您需要设置 CPU 亲和性，要么您有一个非常具体且不寻常的用例，要么您的操作系统存在错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T19:46:20.100

在非常高性能的系统中，如果您将对缓存敏感的低内存占用任务分配给特定内核并且该内核几乎只执行此任务，则性能会提高。效果是提高缓存命中率，这可以产生巨大的影响。如果不是这种情况，则将事情留给操作系统的调度程序。这是（如上所述）一种相当特殊的情况，但是当它们出现时，处理器亲和性值得研究。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T20:13:32.370

您首先需要调用[`get_native_handle`](http://www.boost.org/doc/libs/1_43_0/doc/html/thread/thread_management.html#thread.thread_management.thread.nativehandle)成员函数，然后将获得的句柄传递给特定于平台的函数以设置线程的 CPU 亲和性（即 pthread_setaffinity_np/SetThreadAffinityMask/...）。

至于这是否是个好主意：配置文件并找出...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-16T08:12:07.257

亲和集还有一个原因。对于某些现代系统（例如基于 ARM 的 SOC），省电技术会显着影响调度程序。系统以尽可能少的 cpu 内核运行。如果所有当前任务都可以在一个内核上运行，则只有其他内核处于休眠状态。如果负载突然上升（运行新的繁重任务），则需要唤醒一个或多个内核。此过程相对较慢，因此当调度程序正在为更多内核平衡负载时，它可能会使您的任务缺乏 CPU。通过将手动关联设置为几个线程/进程，您可以保持所有内核运行（并随时准备好应对突然的负载上升）。它看起来很适合伪实时任务。

# c# - 更改 LightSwitch 与数据库的工作方式

> ID：13335658
> 
> 赞同：2
> 
> 时间：2012-11-11T21:30:09.280
> 
> 标签：c#, .net, database, visual-studio, visual-studio-lightswitch

当~~微软第一次发布 LightSwitch~~时，我大约一年前（大约）第一次听说 LightSwitch，我用它制作了一个 Contact Manager 应用程序并将其发布并发送给朋友，可以说它是“开箱即用”的，在感觉我不需要将它连接到“数据库”，因为它只是使用自己的内置数据库（我假设 - 因为没有指定数据源/数据库）。

我已经回到 LightSwitch dev 并注意到这不再可能。这对我来说是一个巨大的缺点，但是哦。

有没有办法在不导入自己的或连接到外部数据源的情况下使用它？或者，如果这不再可能，我们如何让 LightSwitch 在一个新的空白数据库文件 (MDF) 中填充所有相关的表、列等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:14:30.187

您不需要“*连接到外部数据库*”，但*内部*数据库（LightSwitch 在您将表添加到任何应用程序时创建的数据库）仍然必须附加到 SQL Server 实例（甚至 SQL Server Express）它已发布。只有在“其他”机器上也安装了 LightSwitch 时，未发布的应用程序才会运行。

唯一一次 LightSwitch 应用程序在**不指定 SQL Server 实例的连接字符串的情况下**运行是在它正在**开发**的时候。为了调试，LightSwitch 将一个“用户实例”附加到它在安装 LightSwitch 本身期间安装的 SQL Server Express 2008 实例。从来没有其他方式。LS 2011 一直需要 SQL Server Express 2008 进行开发，以及指向有效安装的 SQL Server 2005（或更高版本）实例的连接字符串。

如果您谈论的是 LS 2012 (VS 2012)，那么它仍然需要一个 SQL 实例来连接任何*已发布*的应用程序，但为了调试，它现在使用 SQL Server Express 2012 的一项新功能，称为 LocalDB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T21:54:35.213

我已经使用了 lightswitch 并使用 RIA 删除了一个数据源，尽管它一点也不方便！奇怪的是，它需要一个内在的连接字符串并假设是 express - 这一切都是在诱使用户走一条甚至可能不需要的路线，例如我并不总是想要身份验证，如果我只想使用 nosql 等怎么办？

# azure - 云基础设施建模能力

> ID：13335659
> 
> 赞同：1
> 
> 时间：2012-11-11T21:30:37.977
> 
> 标签：azure, amazon-web-services, cloud, cloud-foundry, openstack

为基于云的解决方案基础架构建模量身定制的图形工具有哪些？我的意思是你可以想象的东西，比如你的云基础设施部署，比如 aws。我可以肯定地在 MS Visio 或类似的通用绘图工具中这么说，但我想知道是否有任何为云基础架构建模量身定制的选项？另外，有什么开源的吗？如果没有，我可以改变的最接近的东西是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T09:23:17.153

AWS 基础设施有一个简单的基础设施可视化工具，称为[Nephorider](http://www.nephorider.com)。目前通过邀请处于测试阶段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:22:40.547

我相信[Juju](https://juju.ubuntu.com/)具有用于部署和管理在云基础架构中运行的软件服务的可视化界面。这是一篇关于它的[博客文章](http://www.jorgecastro.org/2012/10/16/announcing-the-juju-web-ui/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:51:44.783

Juju 的机制是一种用于操作结构的交互式 GUI——它并不能完全让您使用类似 visio 的界面“绘制出来”，但它可能是目前最接近该解决方案集的开源解决方案。

有一些商业产品可以做这样的事情（[CA 购买了 3tera 和他们的 AppLogic 平台](http://www.ca.com/us/cloud-platform.aspx)——它的运行方式很像这样）。

我不知道有任何工具可以从可视 UI 生成 AWS CloudFormation 结构。

# image - 访问子域奇怪行为的图像

> ID：13335662
> 
> 赞同：0
> 
> 时间：2012-11-11T21:30:51.730
> 
> 标签：image, http, subdomain

我有一个域，我们称它为 domain.co.nz，我还有 2 个子域设置如下：

```
www.domain.co.nz
resources.domain.co.nz
management.domain.co.nz 
```

因此，每个服务器的结构如下所示：

```
/management
/resources
/www 
```

现在由于某种原因我只能访问 /resources/backgrounds 下的图像 我无法访问 /resources/icons 下的图像

这可能是什么原因？这两个文件夹都属于同一用户，属于同一组，并且 CHMOD 完全相同。

非常感谢任何和所有帮助。

**根据要求编辑：**

这就是我访问它们的方式：

这有效：

```
http://resources.domain.co.nz/backgrounds/icon_success.png' class='messageimg' /> 
```

但是，这不会：

```
http://resources.domain.co.nz/icons/icon_success.png' class='messageimg' /> 
```

我可以以与工作表相同的方式访问我的 CSS 表，但将文件夹更改为样式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:46:36.523

如果我无法访问一个文件夹中的图像，我会：

*   检查文件夹权限（我看到你已经这样做了）

*   检查文件权限。

*   确保测试图像是一些大而明显的图像——而不是像“找不到文件”图标、纯白色、纯黑色或 1 像素 x 1 像素点的屏幕截图那样令人困惑的东西。

*   尝试直接访问图像：清除 Web 浏览器的缓存，然后直接在 Web 浏览器的地址字段中键入`http://resources.domain.co.nz/backgrounds/icon_success.png`和。`http://resources.domain.co.nz/icons/icon_success.png`也许他们实际上*都*被阻止了，但我仍然看到一个仍然潜伏在我的本地网络浏览器缓存中的残余物。

*   在不包含任何 PHP、CSS 或 JavaScript 的测试“.html”文件中，在没有附加到图像的任何“类”或“名称”或“id”属性的情况下进行测试。也许一些遥远的 CSS 或 JavaScript（jQuery？）正在做一些奇怪的事情。

*   确保该文件确实存在于我试图从中获取它的文件夹中，并且拼写与请求的文件名完全相同。（我更喜欢全小写的文件名）。

*   检查两个目录中的 .htaccess 文件——也许“工作”目录中的 .htaccess 文件允许以覆盖某些默认阻止的方式进行访问；或者“不工作”目录中的 .htaccess 文件可能会默认阻止。（如果可能， [Apache .htaccess 文档](http://httpd.apache.org/docs/2.2/howto/htaccess.html)建议不要使用任何 .htaccess 文件）。

*   检查 Web 服务器的全局配置文件（通常称为[httpd.conf](http://httpd.apache.org/docs/2.2/configuring.html)）以获取允许或阻止一个目录不同于另一个目录的设置。

*   检查 Web 服务器的全局配置文件中是否存在乱码的重写规则。可能一个文件夹使用 HTTP 302 重定向（或其他 3xx 重定向）进行重定向，而另一个文件夹直接使用 httpd 重写规则提供服务，并且某些浏览器（无缘无故）以不同的方式对待它们。（我已经看到一些智能手机浏览器会发生这种情况）。

*   您确定您正在查看由任何服务器处理指向这些图像的 URL 实际使用的*真实*httpd.conf 文件，而不是该 httpd 服务器忽略的其他文件夹中的其他 httpd.conf 文件吗？这周我只犯过两次这个错误。至今。:-)。

*   我听说*某些*网络浏览器在查看使用“ `https://`”（TLS）获取的页面时，拒绝显示来自任何“ `http://`”源（即使来自完全相同的主机名）的图像，但它们*会*显示来自“ `https://`”（TLS）的图像来源（有时甚至来自不同的机器）。

*   在 StackOverflow（或者 webmasters.stackexchange.com 或其他一些希望合适的网站）上询问好人。（我看到你已经这样做了）。

# android - 活动丢失后终止异步任务

> ID：13335669
> 
> 赞同：4
> 
> 时间：2012-11-11T21:31:37.910
> 
> 标签：android, android-asynctask

这是我的过程和问题：

1.  在此应用程序中，您单击菜单按钮

2.  在此菜单中，您按下一个切换按钮，该按钮将启动一个异步任务（每 30 秒发出一次提示音）。这个任务是在toggle被选中时一直运行，在未选中时取消。只要您留在菜单窗口中，这项工作就可以开始和停止该过程。

3.  检查切换框！

4.  如果窗口被剥离并再次打开菜单，则我的切换保存状态为 Checked 并且该过程仍在运行。但是我认为我无法访问该异步任务的实例。这可能是为什么取消选中切换会导致程序崩溃？
    myTask.cancle(true); 可能就像一个丢失的参考，我的异步任务现在在我无法再调用或控制它的虚空中流出！

在这种情况下，我能做些什么来获取异步任务并取消它？

TL，博士；如果我从一个活动 (mTask = new ...) 生成一个异步任务，但随后离开该活动，我如何仍能访问 mTask？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:02:18.113

如果不需要，您应该在活动销毁/停止后立即停止同步任务，

```
@Override
public void onStop(){
    mTask.cancel();
} 
```

有关取消同步任务 Android 的更多信息，请参阅此内容 [- 强制取消 AsyncTask](https://stackoverflow.com/questions/4748964/android-cancel-asynctask-forcefully)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:45:28.920

我认为您不应该使用`AsyncTask`API，它旨在在后台线程中运行耗时的任务，并提供挂钩以在 UI 完成或有中间结果时更新它。

您可以简单地使用 a`Runnable`和单例模式来跨活动构造和破坏定位实例。类似的东西（为简洁起见，省略了单例样板）

```
public class Player implements Runnable {

  public static void start() {}

  @Override
  public void run() {
    while (alive) {
      playSound();
      sleep();
    }
  }

  public static void stop() {}

  public static boolean isAlive() {}

} 
```

然后，当您初始化小部件时：

```
checkbox.setChecked(Player.isAlive());
checkbox.setOnCheckedStateChangeListener(new OnCheckedChangeListener(){
  @Override
  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    if (isChecked)
      Player.start();
    else
      Player.stop();
  }
}); 
```

这样，您的后台线程就完全独立于启动它的任何 Activity。

# matlab - 将矩阵保存到变量中给定的文件

> ID：13335673
> 
> 赞同：1
> 
> 时间：2012-11-11T21:32:54.853
> 
> 标签：matlab, octave

我想做的很简单。这有效：

```
save weights.txt weights 
```

但这不会：

```
filename = "weights.txt"
save filename weights 
```

好吧，它确实保存了矩阵，`weights`但保存到了一个名为`filename`... not的文件中`weights.txt`。

我试过了

```
save("-ascii", filename, "weights"); 
```

但这很糟糕，因为矩阵的名称必须是一个字符串。而且这行不通。Octave 说它不能将 NDArray (?) 转换为 Matrix。

为什么？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:01:45.377

您可以`dlmwrite`用于写入分隔的 ASCII 数据：

```
>> filename = "weights.txt";
>> weights = rand(3,3);
>> dlmwrite(filename, weights)
>> type weights.txt

0.16218,0.52853,0.26297
0.79428,0.16565,0.65408
0.31122,0.60198,0.68921 
```

默认情况下，这是逗号分隔的，但您可以将自己的分隔符作为第三个参数传递。

### 编辑：

好吧，MATLAB 将允许您使用 保存任何维度的数组`dlmwrite`，并且您可以使用 读回数据`dlmread`。但是，正如 carandraug 指出的那样，ASCII 表示最多是 2D 的（MATLAB 会展平额外的维度）。如果您还将导出矩阵的形状保存在某处，您仍然可以恢复此信息：

```
>> shape = "shape.txt";
>> weights = rand(3,3,3);
>> dlmwrite(filename, weights, 'precision', 17)
>> dlmwrite(shape, size(weights))
>> M = reshape(dlmread(filename), dlmread(shape));
>> all(M(:) == weights(:))
ans =
     1 
```

当然，与仅使用 MATLAB 的原生`save weights; load weights`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:20:26.167

那里有2个问题：

1.  *用作`save`命令并传递变量或函数，但不将变量名称作为字符串传递*。没有办法解决这个问题。命令形式的工作方式是将每个参数转换为字符串。当你这样做时，它`save weights.txt weights`被解释为`save ("weights.txt", "weights")`，当你这样做时，它与为什么它保存在一个名为 filename.txt 的文件中的原因`save filename weights`相同。`save ("filename", "weights")`为什么必须在字符串中传递变量名而不是变量本身？想象一下，您要保存的变量是一个字符串。如何`save`知道它是否应该保存字符串或命名为字符串的变量？

2.  *`-ascii`使用选项保存 NDArray*。你不能这样做，你需要使用另一种格式。如果您希望它位于文本文件中，请使用`-text`而不是`ascii`. text 是一种格式，它还保存有关矩阵尺寸的信息，因此可以正确保存和加载任何大小的矩阵。在 ascii 格式中，所有信息都会丢失，因此任何超过 2 维的矩阵都会失败。尝试`x = rand (3); save -ascii x_ascii.txt x; save -text x_text.txt x`查看文件内部以查看差异。`x`如果它是 3D 矩阵，你能想出一种保存为 ascii 的方法吗？

# android - 在 IntelliJ IDEA 中加快 Android 项目构建时间

> ID：13335674
> 
> 赞同：28
> 
> 时间：2012-11-11T21:32:54.897
> 
> 标签：android, build, intellij-idea, dex, android-build

我想知道，如果有任何方法，如何`skip packaging and dexing`在 IntelliJ IDEA 中设置，如在 Eclipse 和 ADT 中。`Additional VM Options`IntelliJ 的 Android DX Compiler 部分中有字段`Preferences`，也许这可能是一种方法，如何设置它。我也很欣赏另一个技巧，如何加快 IntelliJ Android 项目的构建。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-19T09:06:43.240

我正在使用 IntelliJ 12。我赢得了部署和运行 Android 应用程序的时间，使 IntelliJ 能够“自动制作项目”。要启用它，只需转到**Preferences** -> **Compiler**并选中“Make project automatically”。在同一窗口中选中“并行编译独立模块”。

启用“自动制作项目”允许您在 Android 应用程序启动之前跳过“制作”任务。您可以在“运行/调试配置”中删除它，选择您的 Android 应用程序并在“启动前”部分删除“制作”任务。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-15T04:22:07.910

在 Eclipse 首选项中，`skip packaging and dexing`您所指的完整名称是`Skip packaging and dexing until export or launch. (Speeds up automatic builds on file save)`，这是自 ADT 12 以来添加的一项功能，旨在解决 Eclipse 增量编译问题（这会减慢 Eclipse 的开发速度），请查看[修订版 12.0.0（2011 年 7 月）](http://developer.android.com/tools/sdk/eclipse-adt.html)和[此链接](http://tools.android.com/recent/finercontroloveradtbuildprocess)了解更多详细信息，请注意，无论您使用哪种 IDE（或非 IDE），打包和 dexing 都是调试/运行项目时的基本步骤。 ![在此处输入图像描述](../Images/58a8137b595d345a5782e27d20d0f33d.png)

正如 CrazyCoder 在他的评论中提到的，IntelliJ 默认不支持[类似 Eclipse 的增量编译和问题窗格](http://devnet.jetbrains.net/docs/DOC-1122)，换句话说，它不会在文件更改时自动编译您的项目。所以这在 IntelliJ 中真的不是问题，也不是功能。

您的构建过程瓶颈可能来自其他地方。AFAIK 在一个中型项目中，构建过程花费最多的时间是编译资源（AAPT 命令，查看[构建过程图](http://developer.android.com/tools/building/index.html#detailed-build)）。来自 xdadevelopers 的一些聪明人发现了瓶颈并创建了 AAPT 的修复版本：

[http://forum.xda-developers.com/showthread.php?t=1907281](http://forum.xda-developers.com/showthread.php?t=1907281)

我自己使用它，我会说在 Eclipse 中可以感觉到速度提升，请注意它只会提升 AAPT 步骤，而不是打包广告 dexing。如果您使用 InteliJ，它可能没有多大帮助，因为它不需要经常编译项目。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-29T15:20:34.020

我没有解决方案，但我解释了为什么 Eclipse 和 IntelliJ 之间存在巨大的编译时间差异。因为有。每当您依赖外部模块或库时：**IntellIJ 总是 DEX 的依赖模块**。Eclipse 似乎正在缓存它们。

在我的一个项目中，我也经历过这种巨大的差异。我做了一些基本的计时测试，发现我在 IntellIJ 中用 40 秒构建的项目在 Eclipse 中只用了 20 秒。很多时间都花在 IntelliJ 状态为*Executing DEX*的过程中，所以这就是我发现这个问题的方式。然后我试图做一个更彻底和可重复的实验，这就是我发现的。

**项目设置**

*   *来自 Eclipse 中的新 Android 应用程序*模板的 Hello World 项目。
*   对[AndEngine](http://www.andengine.org/)开源 Android 游戏引擎项目的依赖*。
*   *Eclipse：* AndEngine 项目定义为“Android 库”。在 Android 选项卡下添加为参考，在 Java 构建路径/项目选项卡下添加所需项目。
*   *IntelliJ：* AndEngine 定义为“模块”。设置为主模块 HelloWorld 的依赖项，*未*选中导出复选框（我认为这并不重要）。

*) 我可以在这里使用任何模块，但这是一个很好的例子，因为它 a) 相当大，b) 是一个 Android 模块，这意味着我必须将它作为一个 Android 项目链接，而不仅仅是作为*dbm*建议的 JAR上面的一个帖子。

我在（HelloWorld 的启动活动）的方法中添加了日志记录代码，该`onCreate`方法`MainActivity.java`也调用了 AndEngine 中的一个方法，该方法也记录了一行。（我修改了 的构造函数`SoundManager`以输出一行并从 调用构造函数`MainActivity.java`）。这让我可以看到应用程序何时完成部署以及它也已正确部署。

然后，我进行了以下更改，并在每个 IDE 中对它们中的每一个进行了 3 次计时：

*   A：只修改了主模块中的日志行
*   A+B：修改了主模块和 AndEngine 模块中的日志行。

我用标准秒表手动计时，然后向上/向下四舍五入到最接近的秒。我在每种情况下做了三个计时并计算了算术平均值。

**结果：**

![IntellIJ 与 Eclipse 编译和部署时间的图表](../Images/6522132a62b3f0a001bf027865df0149.png)

*注意：*我没有在 Eclipse 中为“Executing DEX”添加单独的子列，因为它只是在整个构建过程中输出“make”或“refreshing workspace”。

从 Eclipse 运行时，您可以从数字中看到，当我只修改主模块时，我节省了时间——这是预期的。但是在 IntelliJ 中，两种情况下的编译时间是相同的！

**结论：**

IntelliJ 做了很多不必要的 DEX'ing。如果有人知道这是否是可配置的，我想我们会解决*我*认为是问题的根本原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T13:33:19.403

有时，当我将大型外部 JAR 添加到我的 (Eclipse) 项目时，它似乎会显着减慢构建过程。

然而，我注意到，不是像往常一样添加 jars ( `Project -> Properties -> Java Build Path -> Libraries -> Add External JARs...`)，而是可以添加一个用户库 ( `Project -> Properties -> Java Build Path -> Libraries -> Add Library... -> User Library`)，并将外部 JARs 添加到这个库中。

到目前为止，这始终解决了我的大型 JAR 构建时间问题。一些聪明人也向我解释了为什么会这样，但不幸的是我不记得这个解释了。我在 IntelliJ 方面没有经验 - 我不知道这是否适用于您的情况，但是，您可能会从这里获得更多的想法......

# jquery - 使用单选按钮删除/附加图像

> ID：13335677
> 
> 赞同：0
> 
> 时间：2012-11-11T21:33:22.160
> 
> 标签：jquery, image, radio-button, append

我有一组单选按钮，用于在 div 中附加和删除图像。我的图像源位于单选按钮内的数据集值中：

```
<input class="radioGroup" name="radioGroup" type="radio" id="radio1" data-source-image="/image1.jpg" data-source-desc="This is the First Image"> 
<label for="#radio1">Image 1</label><br /> 

<input class="radioGroup" name="radioGroup" type="radio" id="radio2" data-source-image="/image2.jpg" data-source-desc="This is the Second"> 
<label for="#radio2">Image 2</label> 
```

我正在为图像附加一个与单选按钮 id 对应的类，并在未选中时使用它来删除图像：

```
 $('.selections input').live("change", function () {

    // 'Getting' data-attributes using dataset 
    var appendImg = $(this).data('sourceImage'); 
    var itemDesc = $(this).data('sourceDesc'); 
    var item = $(this).attr('id');

    if ($(this).is(':radio')) { 
        var radioGroupName = $(this).attr('name');
        var radioGroup = $('input[name="' + radioGroupName + '"]')

        radioGroup.each( function() {

            if ($(this).attr("checked")) {
                $('.imageContainer').append('<img src="' + appendImg + '" alt="' + itemDesc + '" class="' + item + '" />');
            }

            if ( ! $(this).attr("checked")){
                $('.imageContainer').children('img').remove('.' + item);
            }

        });

    } }); 
```

虽然我无法让它工作，但我已经尝试了此代码的多种变体，每种变体的结果都略有不同，但它们都没有按预期运行。在此代码的情况下，我的第一个单选按钮根本不起作用，第二个单选按钮只添加它的图像。

此外，任何其他清理它的建议都是受欢迎的（我的无线电检查在那里，因为我在这个函数中处理了其他输入）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:51:21.383

也许你让事情复杂化了......如果你将无线电输入包装在标签中，你就不需要 id：

```
<label><input type="radio" .../></label> 
```

然后，您可以使用那些特定收音机的事件，而不是弄清楚它是否是带有`live`已弃用事件的收音机，而且我认为您也不需要。`change`如果您有动态无线电输入，那么我建议您`on`在最近的静态容器上使用，而不是`live`on `document`。

```
var $container = $('.imageContainer');

$('input[name=radioGroup]').change(function() {

  var $this = $(this), 
      imgSrc = $this.data('source-image'),
      imgDesc = $this.data('source-desc'),
      $img = $('<img/>', { src: imgSrc, alt: imgDesc });

  $('img', $container).remove(); // remove all images
  $container.append( $img ); // add the image linked to the current input

}); 
```

由于收音机是独占的，因此只能选择一个，您无需确定它是否已选中，也无需查找其他图像，除非您在同一个容器中已经有图像。在这种情况下，我只需为链接到收音机的图像创建一个额外的包装器。

**演示：http:** [//jsbin.com/isitos/1/edit](http://jsbin.com/isitos/1/edit)

# python - 如何使用 python 中的命令模块在后台运行命令？

> ID：13335679
> 
> 赞同：1
> 
> 时间：2012-11-11T21:33:43.827
> 
> 标签：python, background-process

我想使用 python 2.7 在后台运行系统命令，这就是我所拥有的：

```
import commands
path = '/fioverify.fio'

cmd= "/usr/local/bin/fio" + path + " "+ " &"
print cmd
handle = commands.getstatusoutput(cmd) 
```

这失败了。如果我删除＆符号`&`，它可以工作。我需要`/usr/local/bin/fio/fioverifypath`在后台运行命令（）。

关于如何实现这一点的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:39:00.213

不要使用`commands`; 它已被弃用，实际上对您的目的没有用。改为使用`subprocess`。

```
fio = subprocess.Popen(["/usr/local/bin/fio", path]) 
```

`fio`与您的进程并行运行命令并将变量绑定`fio`到进程的句柄。然后，您可以调用`fio.wait()`以等待该过程完成并检索其返回状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:48:19.507

你也可以试试[sh.py](http://amoffat.github.com/sh/)，它支持后台命令：

```
import sh

bin = sh.Command("/usr/local/bin/fio/fioverify.fio")
handle = bin(_bg=True)
# ... do other code ...
handle.wait() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:37:48.353

使用[subprocess](http://docs.python.org/2/library/subprocess.html)模块，[`subprocess.Popen`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)允许您将命令作为子进程（在后台）运行并检查其状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T14:05:43.297

## 使用 Python 2.7 在后台运行进程

`commands.getstatusoutput(...)`不够聪明，无法处理后台进程，使用`subprocess.Popen`或`os.system`.

**重现`commands.getstatusoutput`后台进程如何失败的错误：**

```
import commands
import subprocess

#This sleeps for 2 seconds, then stops, 
#commands.getstatus output handles sleep 2 in foreground okay
print(commands.getstatusoutput("sleep 2"))

#This sleeps for 2 seconds in background, this fails with error:
#sh: -c: line 0: syntax error near unexpected token `;'
print(commands.getstatusoutput("sleep 2 &")) 
```

**subprocess.Popen 如何在后台进程上成功的演示：**

```
#subprocess handles the sleep 2 in foreground okay:
proc = subprocess.Popen(["sleep", "2"], stdout=subprocess.PIPE)
output = proc.communicate()[0]
print(output)

#alternate way subprocess handles the sleep 2 in foreground perfectly fine:
proc = subprocess.Popen(['/bin/sh', '-c', 'sleep 2'], stdout=subprocess.PIPE)
output = proc.communicate()[0]
print("we hung for 2 seconds in foreground, now we are done")
print(output)

#And subprocess handles the sleep 2 in background as well:
proc = subprocess.Popen(['/bin/sh', '-c', 'sleep 2'], stdout=subprocess.PIPE)
print("Broke out of the sleep 2, sleep 2 is in background now")
print("twiddling our thumbs while we wait.\n")
proc.wait()
print("Okay now sleep is done, resume shenanigans")
output = proc.communicate()[0]
print(output) 
```

**os.system 如何处理后台进程的演示：**

```
import os
#sleep 2 in the foreground with os.system works as expected
os.system("sleep 2")

import os
#sleep 2 in the background with os.system works as expected
os.system("sleep 2 &")
print("breaks out immediately, sleep 2 continuing on in background") 
```

# android - Android 4.1：如何“实现用户可安装的键盘映射”？

> ID：13335681
> 
> 赞同：4
> 
> 时间：2012-11-11T21:33:44.920
> 
> 标签：android, map, keyboard, android-4.2-jelly-bean, keyboard-layout

**描述：**

[“用户可安装的键盘映射”是在http://developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)上为 Android 4.1 列出的一项功能。

那里说：

> 该平台现在支持用户可安装的键盘映射，例如额外的国际键盘和特殊布局类型。默认情况下，Android 4.1 包括 27 个国际键盘映射，包括 Dvorak。当用户连接键盘时，他们可以转到“设置”应用并选择一个或多个要用于该键盘的键盘映射。键入时，用户可以使用快捷键（ctrl-space）在键盘映射之间切换。您可以创建一个应用程序来向系统发布其他键盘映射。APK 将包含基于标准 Android 键盘映射格式的键盘布局资源。应用程序可以通过在其清单中为 ACTION_QUERY_KEYBOARD_LAYOUTS 声明一个合适的广播接收器来为用户提供额外的键盘布局。

所以..我想编写一个应用程序，它添加了一个新的键盘布局。所以，我必须创建一个新的 BroadcastReveiver 并`ACTION_QUERY_KEYBOARD_LAYOUTS`在应用程序的清单中声明它。该应用程序还提供了键盘映射文件。

**所以，我的问题是：**当它收到意图`BroadcastReceiver`时，它必须做什么？`ACTION_QUERY_KEYBOARD_LAYOUTS`

我已经进行了相当多的搜索 - 但是，唯一包含`ACTION_QUERY_KEYBOARD_LAYOUTS`我可以找到从 developer.android.com 复制上述描述的网站。

我真的很感激任何帮助，

问候，
兰德尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T23:53:14.903

您需要在项目中创建一个或多个合适的[键字符映射文件](http://source.android.com/tech/input/key-character-map-files.html)，例如名为 mykeyboard.kcm 的原始资源文件。

将相关接收器添加到清单 (AndroidManifest.xml) 中，KEYBOARD_LAYOUTS 指向一个 XML 资源，该资源将每个 .kcm 文件列为键盘布局。您最终不会编写任何实际的 Java 或本机代码，只需编写清单和资源文件。

[https://github.com/tialaramex/BritishKeyboard](https://github.com/tialaramex/BritishKeyboard)

上面的链接是我今天早些时候碰巧构建的一个示例，它（主要）使英语（英国）键盘布局可用，而不仅仅是默认的美国键盘，例如按 SHIFT 和 2 会得到双引号而不是 @ 符号。如果您对 Android 项目有所了解，希望这足够简单。

最终结果是，当您连接 USB 或蓝牙键盘时，设置键盘布局的提示会列出应用程序安装的任何其他键盘布局，在本例中为一个标记为英语（英国）的键盘布局。

# ios - 如何将预先存在的sqlite文件放入 /图书馆/？

> ID：13335685
> 
> 赞同：4
> 
> 时间：2012-11-11T21:34:19.130
> 
> 标签：ios, sqlite, core-data, ios-simulator

我的应用程序使用核心数据。我已经在模拟器中运行了该应用程序，该应用程序已成功创建并填充了相应的 sqlite 文件。我现在想将这个预先存在的 sqlite 文件放到实际设备上并成为我应用程序的一部分。我在 /Library/Application Support/iPhone Simulator/6.0/Applications/identifier/Documents/myapp.sqlite 找到了模拟器生成的 sqlite 文件并将其拖到 Xcode 中。这已将其添加到我的应用程序包中，但不在适当的目录中（结果是可以读取 sqlite 文件但不能写入）。

通过阅读有关文件系统的信息，我相信放置 sqlite 文件的最佳位置是在 Application_Home/Library/ 下的自定义目录“数据库”中。我似乎无法在 Xcode 中执行此操作，尽管进行了搜索，但我无法弄清楚如何执行以下操作：

(1) 在 Application_Home/Library/ 中创建一个名为“Database”的子目录？(2) 将 sqlite 文件传输到我新创建的“数据库”目录？

**非常感谢@Daij-Djan 他在下面的回答。**

**另一个问题：**持久存储协调器将使用 sqlite 文件的路径。现在根据 sqlite 文件的大小，复制或移动可能需要一段时间。在持久存储协调器尝试引用 sqlite 文件之前，如何确保 @Daij-Djan 提供的示例代码已经执行并完成？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:37:17.640

模拟代码

在 appDidFinishLaunching.. 也许

```
dbpath = PATH_YOU_WANT
if(!file.exists_at:dbpath) {
    copy(dbinbundle, dbpath);
} 
```

在 objC 中：（内联编写，错别字/错误的可能性）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    NSString *lib = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *dbs = [lib stringByAppendingPathComponent:@"Database"];
    NSString *file = [dbs stringByAppendingPathComponent:@"db.sqlite"];
    if(![[NSFileManager defaultManager] fileExistsAtPath:file]) {

        id dbInBundle = [[NSBundle mainBundle] pathForResource:@"db" ofType:@"sqlite"];

        [[NSFileManager defaultManager] createDirectoryAtPath:dbs withIntermediateDirectories:YES attributes:nil error:nil];
        [[NSFileManager defaultManager] copyItemAtPath:dbInBundle toPath:file error:nil];
    }
    ....
} 
```

# facebook-like - 在我的网站上正确设置 Facebook 的“喜欢”按钮

> ID：13335686
> 
> 赞同：1
> 
> 时间：2012-11-11T21:34:22.360
> 
> 标签：facebook-like, app-id

我想了一会儿，我的 Facebook 'like' 按钮的设置是不确定的。我有一个 facebook 业务页面，但我网站上的“喜欢”似乎转到了一个 facebook 网站管理页面，该页面通过应用程序 ID 链接到我的网站。我已经搜索过 Stack Overflow 并进行了一般的谷歌搜索，但从来没有找到一个完整的答案来解释为什么会这样，只是有很多相互矛盾的信息。

现在，当我查看这个网站的管理页面（在哪个网站上汇总了“喜欢”）时，我看到这些类型的管理页面正在被贬值，他们建议我迁移到适当的页面。我已经有一个页面 - 我不想再创建一个。我能做些什么？

此外，无论哪种方式，我在我的网站上为我的喜欢按钮设置的设置肯定需要更改。在调试器页面上，图形 api 显示：

```
{
  "url": "http://www.rachellucie.co.uk/",
   "type": "website",
   "title": "Unique Handmade Silver Jewellery by Rachel Lucie",
   "image": [
      {
         "url": "http://cdn.shopify.com/s/files/1/0052/8102/t/6/assets/logo.png?169"
      }
   ],
   "description": "Contemporary handmade silver jewellery by designer Rachel Lucie from     Hebden Bridge, UK. Buy necklaces, earrings and bracelets featuring semi-precious stones and     pearls direct online.",
   "site_name": "Unique Handmade Silver Jewellery by Rachel Lucie",
   "admins": [
      {
         "id": "518522457",
         "name": "Rachel Johns",
         "url": "https://www.facebook.com/rachelluciejohns"
      }
   ],
   "updated_time": "2012-11-11T21:19:44+0000",
   "id": "499586242152",
   "application": {
      "id": "122020880748",
      "name": "Rachel Lucie Jewellery Designs",
      "url": "https://www.facebook.com/apps/application.php?id=122020880748"
   }
} 
```

有人可以指出我正确的方向吗？

顺便说一句，每次我“喜欢”我网站上的产品时，它都会在 facebook 中为该产品创建另一个 Web 管理页面。这对我来说似乎不对！

谢谢你的时间。

# sql - 在层次结构查询中定义子项的排序顺序

> ID：13335687
> 
> 赞同：8
> 
> 时间：2012-11-11T21:34:24.090
> 
> 标签：sql, oracle, sql-order-by, hierarchy

我想知道按 sequence_within_parent 列对层次结构查询中的子项进行排序的 Oracle SQL 查询。

示例数据集和查询是：

```
create table tasks (task_id                 number
                    ,parent_id               number
                    ,sequence_within_parent number
                    ,task                    varchar2(30)
                    );
insert into tasks values ( 1, NULL, 0, 'Task 1');
insert into tasks values ( 2,    1, 1, 'Task 1.1');
insert into tasks values ( 3,    1, 2, 'Task 1.2');
insert into tasks values ( 4,    2, 2, 'Task 1.1.2');
insert into tasks values ( 5,    3, 1, 'Task 1.2.1');
insert into tasks values ( 6,    2, 1, 'Task 1.1.1');
insert into tasks values ( 7,    3, 4, 'Task 1.2.4');
insert into tasks values ( 8,    3, 2, 'Task 1.2.2');
insert into tasks values ( 9,    3, 3, 'Task 1.2.3');
insert into tasks values (10 ,   2, 3, 'Task 1.1.3');

column task format a30

select task_id
      ,sequence_within_parent
      ,lpad(' ', 2 * (level - 1), ' ') || task task
from   tasks
connect by parent_id = prior task_id
start with task_id = 1
/ 
```

此查询返回以下内容：

```
 TASK_ID SEQUENCE_WITHIN_PARENT TASK
---------- ---------------------- ---------------
         1                      0 Task 1
         2                      1   Task 1.1
         4                      2     Task 1.1.2
         6                      1     Task 1.1.1
        10                      3     Task 1.1.3
         3                      2   Task 1.2
         5                      1     Task 1.2.1
         7                      4     Task 1.2.4
         8                      2     Task 1.2.2
         9                      3     Task 1.2.3 
```

首选输出低于子项顺序正确的位置：

```
 TASK_ID SEQUENCE_WITHIN_PARENT TASK
---------- ---------------------- ---------------
         1                      0 Task 1
         2                      1   Task 1.1
         6                      1     Task 1.1.1
         4                      2     Task 1.1.2
        10                      3     Task 1.1.3
         3                      2   Task 1.2
         5                      1     Task 1.2.1
         8                      2     Task 1.2.2
         9                      3     Task 1.2.3
         7                      4     Task 1.2.4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:42:28.917

要添加到查询的子句是“ORDER SIBLINGS BY SEQUENCE_WITHIN_PARENT”。

在层次结构中，所有子节点或子节点都称为兄弟节点。

示例数据集的完整查询是：

```
select rownum
      ,task_id
      ,sequence_within_parent
      ,lpad(' ', 2 * (level - 1), ' ') || task  task
from   tasks
connect by parent_id = prior task_id
start with task_id = 1
order siblings by sequence_within_parent
/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:48:54.270

SQL Server 有一个hierarchyID 类型可以很好地处理这个问题。对于所有其他 RDBMS，我通常使用如下的字符串 concat 仿真。

```
select task_id
      ,sequence_within_parent
      ,lpad(' ', 2 * (level - 1), ' ') || task task
      ,SYS_CONNECT_BY_PATH(
        to_char(parent_id, 'FM000000000')
        ||
        to_char(sequence_within_parent, 'FM000000000')
        ,'/') hier
from   tasks
connect by parent_id = prior task_id
start with task_id = 1
order by hier; 
```

# c++ - AES 和密钥长度错误

> ID：13335688
> 
> 赞同：3
> 
> 时间：2012-11-11T21:34:30.143
> 
> 标签：c++, key, aes, crypto++

我正在尝试使此代码正常工作。它来自[Cryptopp AES](http://www.cryptopp.com/wiki/Aes)

> 演示在 CTR 中使用 AES 进行加密和解密

唯一的区别是，我创建了函数*encryptAES*和*decryptAES*并插入了代码。它无需创建这些功能即可工作。但现在我收到以下错误：**AES/CTR 4 不是有效的密钥长度，但密钥长度为 16 位。**

```
string encryptAES(const byte key[], const string& plain, const byte iv[])
{
try
{
    string cipher;

    CTR_Mode< AES >::Encryption e;
    e.SetKeyWithIV(key, sizeof(key), iv);

    // The StreamTransformationFilter adds padding
    //  as required. ECB and CBC Mode must be padded
    //  to the block size of the cipher.
    StringSource(plain, true, 
        new StreamTransformationFilter(e,
            new StringSink(cipher)
        ) // StreamTransformationFilter      
    ); // StringSource
    return cipher;
}
catch(const CryptoPP::Exception& e)
{
    cerr << e.what() << endl;
    return "";
}
}

string decryptAES(const byte key[], const string& cipher, const byte iv[])
{
try
{
    string recovered;

    CTR_Mode< AES >::Decryption d;
    d.SetKeyWithIV(key, sizeof(key), iv);

    // The StreamTransformationFilter removes
    //  padding as required.
    StringSource s(cipher, true, 
        new StreamTransformationFilter(d,
            new StringSink(recovered)
        ) // StreamTransformationFilter
    ); // StringSource
    return recovered;
}
catch(const CryptoPP::Exception& e)
{
    cerr << e.what() << endl;
    return "";
}
}

int main(int argc, char *argv[])
{
AutoSeededRandomPool prng;

byte key[AES::DEFAULT_KEYLENGTH];
prng.GenerateBlock(key, sizeof(key));

byte iv[AES::BLOCKSIZE];
prng.GenerateBlock(iv, sizeof(iv));

string plain = "CTR Mode Test";
string encoded, cipher, recovered;

/*********************************\
\*********************************/

// Pretty print key
encoded.clear();
StringSource(key, sizeof(key), true,
    new HexEncoder(
        new StringSink(encoded)
    ) // HexEncoder
); // StringSource
cout << "key: " << encoded << endl;

// Pretty print iv
encoded.clear();
StringSource(iv, sizeof(iv), true,
    new HexEncoder(
        new StringSink(encoded)
    ) // HexEncoder
); // StringSource
cout << "iv: " << encoded << endl;

/*********************************\
\*********************************/

cout << "plain text: " << plain << endl;
cipher = encryptAES(key, plain, iv);

/*********************************\
\*********************************/

// Pretty print
encoded.clear();
StringSource(cipher, true,
    new HexEncoder(
        new StringSink(encoded)
    ) // HexEncoder
); // StringSource
cout << "cipher text: " << encoded << endl;

/*********************************\
\*********************************/

recovered = decryptAES(key, cipher, iv);
cout << "recovered text: " << recovered << endl;

cin.sync();
cin.get();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:06:39.340

您的函数正在接受一个`const byte key[]`参数，该参数本质上被视为一个指针。因此 sizeof(key) 是您平台上指针的大小。

```
string encryptAES(const byte key[], const string& plain, const byte iv[])

// sizeof(key) is the size of a pointer
e.SetKeyWithIV(key, sizeof(key), iv); 
```

您可以使用 a`std::vector<>`作为选项，或者传递 key_len，例如：

```
string encryptAES(const byte key[], size_t key_len, const string& plain, const byte iv[])

// using key_len for the length of the key
e.SetKeyWithIV(key, key_len, iv); 
```

我希望这是有道理的，因为同样的错误出现在几个地方。

# java - 索引确实在范围内时的 IndexOutOfBounds 异常

> ID：13335691
> 
> 赞同：1
> 
> 时间：2012-11-11T21:34:42.130
> 
> 标签：java, arraylist, indexoutofboundsexception

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 175, Size: 175
    at java.util.ArrayList.rangeCheck(Unknown Source)
    at java.util.ArrayList.remove(Unknown Source)
    at GetData.main(GetData.java:42) 
```

这是我列表中的例外`l`，但是当我调用时`l.size()`，它返回 188！

这是一个 SSCCE （嗯，尽可能简洁）：

```
import java.io.*;
import java.util.*;
import java.util.regex.*;

public class GetData {
    @SuppressWarnings("unchecked")
    public static void main(String[] args) throws Exception {
        //optimize();
        BufferedReader r = new BufferedReader(new FileReader(new File("countrydata - optimized.txt")));
        String str = "";
        String line = null;
        int x = 0;
        while ((line = r.readLine()) != null) {
            str += line;
            x ++;
            if (x % 20 == 0) System.out.println("Reading file... // " + x / 20 + " of 18");
        }
        Pattern p = Pattern.compile("<strong>(.*?)</strong><br/>(.*?)<");
        Matcher m = p.matcher(str);
        //PrintWriter w = new PrintWriter(new BufferedWriter(new FileWriter(new File("countrydata - verbose.xml"))));
        //w.println("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
        ArrayList<HashMap<String, String>> l = new ArrayList<>(188); //This is one ugly line of code right here
        HashMap<String, String> a = null;
        String[] countries = "Afghanistan/Albania/Andorra/Angola/Antigua and Barbuda/Antigua and Barbuda 2/Argentina/Argentina 2/Australia/Astria/Azerbaijan/Bahamas/Bahrain/Bangladesh/Barbados/Barbados 2/Belgium/Belize/Benin/Bhutan/Bolivia/Bosnia and Herzegovina/Botswana/Brazil/Brunei/Bulgaria/Burkina Faso/Burundi/Cambodia/Cameroon/Canada/Cape Verde/Central African Republic/Chad/Chile/China/Colombia/Comoro Islands/Congo/Costa Rica/Cote d'Ivoire/Croatia/Cuba/Cyprus/Czech Republic/Denmark/Djibouti/Dominica/Dominican Republic/Dominican Republic 2/Ecuador/El Salvador/El Salvador 2/Eritrea/Estonia/Ethiopia/Fiji/Finland/French/Gabon/Gambia/Georgia/Germany/Ghana/Greece/Greece 2/Grenada/Guatemala/Guinea/Guinia-Bissau/Guyana/Haiti/Honduras/Hungary/Iceland/India/Indonesia/Iran/Iraq/Ireland/Israel/Italy/Jamaica/Jamaica 2/Jordan/Kazahkstan/Kenya/Kiribati/Kuwait/Kyrgyzstan/Laos/Latvia/Lebanon/Lebanon 2/Lesotho/Libya/Liechtenstein/Lithuania/Luxembourg/Macedonia/Madagascar/Malawi/Malaysia/Maldives/Mali/Mali 2/Malta/Mauritania/Mexico/Moldova/Monaco/Mongolia/Morocco/Mozambique/Myanmar/Namibia/Nepal/New Zealand/Nicaragua/Niger/North Korea/Norway/Oman/Oman 2/Panama/Papua New Guinea/Prarguay/Peru/Phillippines/Poland/Portugal/Qatar/Romania/Russia/Russia 2/St. Kitts and Nevis/St. Lucia/St. Vincent and the Grenedines/San Marino/Sao Tome and Principe/Saudi Arabia/Senegal/Seychelles/Sierra Leone/Singapore/Slovakia/Slovenia/Soloman Islands/Somalia/South Africa/South Korea/Spain/Spain 2/Sudan/Suriname/Swaziland/Sweden/Switzerland/Switzerland 2/Tawian/Tajikistan/Tanzania/Thailand/Togo/Tonga/Trinidad & Tobago/Tunisia/Turkey/Turkmenistan/Tuvalu/Uganda/Ukraine/United Arab Emirates/United Kingdom/United States/United States 2/Marshall Islands/Micronesia/Uruguay/Uzbekistan/Vanuatu/Vietnam/Samoa/Yemen/Zimbabwe/East Timor/???/Serbia".split("/");
        int ci = 0;
        while (true) {
            if (m.find()) {
                //System.out.println((m.group(1).equals("Internet Users") ? "NEW COUNTRY\nInternet Users" : m.group(1)) + "|" + m.group(2));
                if (m.group(1).equals("Internet Users")) {
                    if (a != null) l.add(a);
                    if (ci == 188) break;
                    a = new HashMap<String, String>();
                    a.put("Country Name", countries[ci++]);
                    a.put("Internet Users", m.group(2));
                } else {
                    a.put(m.group(1), m.group(2));
                }
            } else break;
        }
        for (int i = 0; i < countries.length; i ++) {
            if (countries[i].matches(".*2")) l.remove(i);
        }
        String[] data = "".split("\\.");
        for (Object map : l.toArray()) {
            a = (HashMap<String, String>) (map);
            System.out.println(a.get("School System"));
            System.out.println(a.get("Country Name"));
        }
        r.close();
    } 
```

该文件`countrydata - optimized`只是表单中的一堆数据行`<strong>(name of data)</strong><br/>(the data)<div id="...`，但这对于这个问题可能并不重要。

`l.size()`当异常说它的大小为 175 时，为什么返回 188？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T21:40:54.373

```
ArrayList<HashMap<String, String>> l = new ArrayList<>(188); 
```

`188`是[列表的初始容量](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28int%29)，而不是大小。

您不确定，这`i`不超过以下列表的大小：

```
for (int i = 0; i < countries.length; i ++) {
    if (countries[i].matches(".*2")) l.remove(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:41:25.597

如果`(countries[i].matches(".*2"))`为真，则从 中删除一个元素`l`，因此其大小会减小。的大小`l`现在小于 的大小`countries`，因此您无法将 的索引映射`countries`到`l`并期望获得相应的对象。

# linux - 奇怪的蒸汽更新器行为与管道

> ID：13335692
> 
> 赞同：1
> 
> 时间：2012-11-11T21:34:58.077
> 
> 标签：linux, bash, pipe, steam

该程序的 STDOUT 中有一个奇怪的行为。

如果我执行程序： `./steam -command update -game "Counter-Strike Source" -dir .` 输出下一个：

```
Checking bootstrapper version ...
Updating Installation
Determining which depot(s) to install/update...
5 depot(s) will be installed/updated
  0:02 Checking local files and building download list for depot 242 'Counter-Strike Source Shared' version 129
  0:02     Connecting content server session for version 129
  0:03     [80.239.194.162:27030] Connecting...
  0:06     [80.239.194.162:27030] Failed.  Failed to connect to 80.239.194.162:27030, errno 115 "Operation now in progress"
  0:06     [81.171.68.195:27030] Connecting...
  0:07     [81.171.68.195:27030] Connection established; handshaking...
  0:08     [81.171.68.195:27030] Sending login message...
  0:08     Fetching version 129 manifest
  ... 
```

如果我使用管道和 tee 以这种方式将其记录到文件中，出于任何奇怪的原因：`./steam -command update -game "Counter-Strike Source" -dir . | tee log` 输出程序的唯一内容是：

```
Checking bootstrapper version ...
Updating Installation
Determining which depot(s) to install/update...
5 depot(s) will be installed/updated 
```

仅此而已。相同的文本在日志文件和屏幕上。程序仍然开始更新文件。知道为什么会这样吗？

注意：缺少的行不是来自 STDERR

注2：./steam 不会创建任何子进程或额外进程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:14:34.227

我猜该程序正在检查`isatty(3)`以决定是否显示进度输出。如果是这种情况，那么如果您确实将其捕获到文件中，您可能不会得到非常合理的输出，因为它可能使用各种控制字符来使输出更加人性化。

当程序连接到 TTY 时，您可以尝试通过运行以下命令来捕获程序的输出：

```
script -c "./steam -command update ..." logfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:46:55.903

`tee`有双重用途 - 它从标准输入读取并将输出写入指定文件*及其标准输出*。结果，您最终会在终端上看到写入日志文件的所有内容，因为没有什么可以“吸收”来自`tee`.

如果您只想将所有输出写入文件，请改用输出重定向：

```
./steam [args...] >> log 
```

要包括标准错误：

```
./steam [args...] 2>&1 >> log 
```

# php - 这两种方法中哪一种更适合从 mysql 组织和查询数据？

> ID：13335694
> 
> 赞同：0
> 
> 时间：2012-11-11T21:35:09.303
> 
> 标签：php, mysql

我试图决定我将如何实现这一点，我希望你的经验可以帮助我。

## 问题

用户使用 facebook api 登录到 webapp，这给了我一堆数据、姓名、facebook id（我使用该数字来识别我网站中的用户）、年龄以及我需要存储以供以后使用的其他一些随机数据分析。之后，用户可以索要一张票（只是一段带有在 php 脚本中生成的数字的文本），当票生成时，我存储了用户 facebook id、日期（MM/DD/YYYY），当然还有一个票的唯一ID，同一用户可以要求多张票。

## 解决方案1（有条理但对mysql服务器来说似乎有压力）

有两张表，一张称为`users`我存储从 facebook api 检索的所有用户个人信息的位置，包括 facebook 用户 ID。第二个表调用`Tickets`在哪里只存储票的创建日期和创建它的用户的 facebook 用户 ID，当然这个表有一个自动递增的唯一 ID 来标识它自己的票。

将来，我将需要显示创建票证的所有用户的列表，不仅显示他们的 facebook 用户 ID，还显示他们的个人信息，因此这意味着我需要查询`tickets`我找到的每一行/票证facebook id 我需要查询`users`以检索该用户的个人信息（姓名，年龄，...）。因此，如果我有 10000 个由 10000 个唯一用户创建的票证，我将需要查询我的 Mysql 服务器 10001，一个用于检索一组票证，10000 个用于检索每个用户的信息...

## 解决方案 2（不像我喜欢的那样有条理）

没有两张表，只有一张，我存储所有内容，票证和用户数据，所以当用户创建票证时，我不仅将与票证相关的信息存储在同一张表中，还将用户个人数据存储在同一个表中，稍后如果我想显示创建票证的用户列表我只是要做一个查询`tickets`，最终将检索（如果我有 10000 张票证）我稍后将使用 php 解析的一大包数据。这样我的查询更少但数据更大。

* * *

现在我已经运行了第一个解决方案的基本实现，但现在我有点担心可伸缩性问题。

这是我`users`表的一部分的外观： ![在此处输入图像描述](../Images/7c35b7ad8e94da5f920c26f26fa50669.png)

这是`tickets`表格： ![在此处输入图像描述](../Images/09646513669efffef1f8ac7973f13067.png)

因此，为了列出用户，我会这样进行；`discount_id`from`tickets`代表一种票，所以如果需要`1`我查询的类型 *票 WHERE discount_id = 1，从它给我的数组中使用`winner_id`（这是票的创建者的 facebook 用户 ID）我将它压缩为`face_id`from `users`to检索个人信息。

我在想用第三种方法来解决这个问题，那就是结合 1 和 2，有相同的两个表，在我查询`tickets`我需要的类型之后，然后我查询（只有一个）表`users`，要求一个 ALL 的数组用户 ID`tickets`给了我，但我不知道该怎么做以及是否值得。

* * *

哪种解决方案更好？有没有聪明的方法可以继续？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:41:05.923

就像评论的 definitley 一样，尽可能分解表结构。它使生活更轻松，因此使用第一个版本。许多事情只有通过许多表才有可能。

# javascript - .js 文件下载后变大

> ID：13335697
> 
> 赞同：3
> 
> 时间：2012-11-11T21:35:24.937
> 
> 标签：javascript, file, http, filesystems

我注意到如果我通过 http 链接一个 js 文件，比如

```
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js" type="text/javascript"></script> 
```

它的大小为 32.9kb。但是当我下载它时，大小变成了110kb ... ![在此处输入图像描述](../Images/4ba9830af2fe77d5697ef8f04aaadf94.png)

这有什么关系吗？我的操作系统是win 7 64bit。我相信windows可以根据它的文件系统改变文件大小，但是那么多呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:36:56.883

第一个是[gzip 压缩](http://en.wikipedia.org/wiki/Gzip)的，而第二个不是

# oracle - 如何在 oracle 中使用 rownum 限制这一点

> ID：13335700
> 
> 赞同：1
> 
> 时间：2012-11-11T21:35:39.843
> 
> 标签：oracle

> **可能重复：**
> [Oracle SQL - 如何检索列的最高 5 个值](https://stackoverflow.com/questions/2306744/oracle-sql-how-to-retrieve-highest-5-values-of-a-column)

嘿，所以我有一个查询要执行此操作：编写一个查询，仅检索在六个月期间取货次数最多的十家公司。给了我 6 个月，我尝试了很多查询，这就是我所拥有的，但我知道这是错的，因为我不知道

```
SELECT * FROM 
(SELECT customers.name,COUNT(MANIFEST.MANIFEST_BARCODE) AS Pickups
FROM customers JOIN manifest ON (Reference = pickup_reference) 
ORDER BY Pickups desc;)
WHERE ROWNUM < 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:41:30.563

没有看到你的表结构等。我不知道六个月的限制在哪里适合，但对于其余的你有一个`count`没有子句的聚合函数 () `group by`，并且你的内部查询中有一个随机分号。像这样的东西应该可以工作并且接近你已经拥有的东西：

```
SELECT * FROM (
    SELECT customers.name, COUNT(manifest.manifest_barcode) AS Pickups
    FROM customers
    JOIN manifest ON (Reference = pickup_reference)
    GROUP BY customers.name
    ORDER BY pickups DESC
)
WHERE ROWNUM < 11; 
```

这个网站上有很多例子，比如[这个](https://stackoverflow.com/q/2498035/266304)。

# c++ - ld.exe 找不到 -lGL

> ID：13335703
> 
> 赞同：3
> 
> 时间：2012-11-11T21:35:55.710
> 
> 标签：c++, windows, opengl, linker, libraries

我最近买了一本关于 OpenGL 的书，并试图按照示例进行操作，但我无法让 OpenGL 正常工作。

例如，它给了我错误：

> ld.exe||找不到 -lGL|。

我的编译器`GNU-GCC` `MinGW`在 IDE 上`Code::Blocks`，我的操作系统是 Windows 7 64 位。我已经链接了库：`opengl32`、、、和其他链接器选项，我有：`glu32`，因为这是在wiki 上建议的。`glut32``-lmingw32` `-lSDLmain` `-lSDL``code::blocks`

我有一些使用 C++ 的经验，但在链接和设置编译器方面完全没有，因为这过去非常自动化。

如何修复此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T21:43:56.580

该标志`-lGL`是链接到 opengl 库，但在 Windows 上调用的是 opengl 库`opengl32`，而不是 libgl。所以你不应该使用`-lGL`，如果你已经在 opengl32 中链接，那么这应该是你所需要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T21:44:09.160

`-lGL`是 *nix 系统上使用的链接选项。在 Windows 上，您应该使用`-lopengl32`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T13:50:26.937

这可能是由于库和包含文件夹权限设置为只读，我目前遇到同样的问题，但我正在使用我的 SFML 编译，我通过将链接器设置为确切的 lib 文件而不是文件夹来解决它，你可能尝试相同的解决方案

# c++ - 确定特定文件实际上是 3gp 文件

> ID：13335704
> 
> 赞同：0
> 
> 时间：2012-11-11T21:36:00.947
> 
> 标签：c++

我扫描文件系统，我需要识别所有 3gp 文件。

通常，为了注意到特定文件具有某种格式，该格式的开发人员会进行标记。

例如 FLV 的第一个字节是 46 4C 56 01，如果是这样，可以确定这是 FLV 格式（当然，如果没有人故意更改它）等。

我很乐意以相同的方式识别 3gp 文件，但哪些字节确实表明了这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:54:56.123

你需要解析`ftyp`盒子

[更多信息，请参阅“文件类型框”部分](http://en.wikipedia.org/wiki/MPEG-4_Part_12)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T21:43:31.300

```
00 00 00 nn 66 74 79 70 33 67 70
```

`nn`适用`14`于 3GPP 文件和`20`3GPP2 文件。

所有人都欢呼维基百科。

# javascript - 根据带有 getelementsbyclassname 的选择选项显示/隐藏 div

> ID：13335707
> 
> 赞同：0
> 
> 时间：2012-11-11T21:36:08.530
> 
> 标签：javascript, select, getelementsbyclassname

我试图让 div 在选择表单选择菜单时切换样式属性。任何帮助都会很棒！

有代码：

选择标签（我有脚本函数的值）：

```
 <div style="float: right; margin-right: 5%; width: auto;">
        <select style="border: 3px intset; border-radius: 5px; border-color: #17FFFF;" onchange="showstuff(this.value);">
            <optgroup label="Lisboa">
                <option value="Picoas">Picoas</option>
                <option value="Benfica">Benfica</option>
            </optgroup>
            <optgroup label="Porto">
                <option value="Felgueiras">Felgueiras</option>
                <option value="Maia">Maia</option>
            </optgroup>
        </select>
    </div> 
```

带有类名的div：

```
<div style="width: 90%; height: 50%; background-color: #09C; overflow: scroll; overflow-x: hidden; margin-bottom: 15%; margin-left: 5%; margin-right: 5%; text-align: left; color: #000; font-size: 60%;">
    <div class="Picoas" style="height: 30%; width: 100%; background-color: #CCEAFF; display:none;">
        Timberland Picoas<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
    <div class="Felgueiras" style="height: 30%; width: 100%; background-color: #CCEAFF;
        margin-top: 2%;display:none;">
        Timberland Felgueiras<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
    <div class="Picoas" style="height: 30%; width: 100%; background-color: #CCEAFF; margin-top: 2%;display:none;">
        Timberland Picoas<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
    <div class="Felgueiras" style="height: 30%; width: 100%; background-color: #CCEAFF;
        margin-top: 2%;display:none;">
        Timberland Felgueiras<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
    <div class="Benfica" style="height: 30%; width: 100%; background-color: #CCEAFF; margin-top: 2%;display:none;">
        Timberland Benfica<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
    <div class="Maia" style="height: 30%; width: 100%; background-color: #CCEAFF; margin-top: 2%;display:none;">
        Timberland Maia<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
    <div class="Benfica" style="height: 30%; width: 100%; background-color: #CCEAFF; margin-top: 2%;display:none;">
        Timberland Benfica<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
    <div class="Maia" style="height: 30%; width: 100%; background-color: #CCEAFF; margin-top: 2%;display:none;">
        Timberland Picoas<br />
        Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
        1500-392 Lisboa
    </div>
</div> 
```

脚本和类定义：

```
 <script type="text/javascript">
    function showstuff(element) {
        var elementsPicoas = document.getElementsByClassName("Picoas");
        elementsPicoas.style.display = element == "Picoas" ? "block" : "none";
         var elementsBenfica = document.getElementsByClassName("Benfica");
        elementsBenfica.style.display = element == "Benfica" ? "block" : "none";
         var elementsFelgueiras = document.getElementsByClassName("Felgueiras");
        elementsFelgueiras.style.display = element == "Felgueiras" ? "block" : "none";
         var elementsMaia = document.getElementsByClassName("Maia");
        elementsMaia.style.display = element == "Maia" ? "block" : "none";
    } 
</script>
     <style>
  .Picoas{}
  .Felgueiras{}
  .Benfica{}
  .Maia{} 
  </style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:01:26.073

下面是如何在没有 jQuery 的情况下做到这一点！

```
function showstuff(selectedElementClass) {

    var elementClasses = [
        "Picoas",
        "Benfica",
        "Felgueiras",
        "Maia"
    ];

    for (var i = 0; i < elementClasses.length; i++) {
        var elements = document.getElementsByClassName(elementClasses[i]);

        for (var j = 0; j < elements.length; j++) {
            var element = elements[j];
            element.style.display = (element.className === selectedElementClass)? "block" : "none";
        }
    }
} 
```

你可以在这里看到它的实际效果：[https ://tinker.io/38459/3](https://tinker.io/38459/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:42:57.740

我建议使用 jQuery，它可以让你做类似的事情

```
$(".Picoas, .Benfica, .Felgueiras, .Maia").hide(); //hide them all
$("." + element).show(); //display only the selected one 
```

**更新**

抱歉，这太快了。真正的问题是，getElementsByClassName 函数返回多个元素，因为您的代码中有所有要检查 2 次的类。

你可以做的是——如果你不想使用 jQuery——像这样：

```
function display(className, mode)
{
    var elms = document.getElementsByClassName(className);

    for (var i = 0; i < elms.length; i++)
    {
        elms[i].style.display = mode;
    }

}

function showstuff(element) 
{
    //hide 'em all
    var allElements = ["Picoas", "Benfica", "Felgueiras", "Maia"];

    for (var i = 0; i < allElements.length; i++)
    {
        display(allElements[i], "none");
    }

    //show the one selected
    display(element, "block");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T21:59:48.460

使用 jQuery 执行此操作的更有效方法：

```
<script type="text/javascript">
$(document).ready(function(){
   $("#changeme").change(function(){
     $(".dynamic").css("display", "none");
     $("."+this.value).css("display", "block");
   });
});
</script>

<style>
.dynamic
   {
       height: 30%; 
       width: 100%; 
       background-color: #CCEAFF; 
       margin-top: 2%;
       display:none;
   }
.Picoas{}
.Felgueiras{}
.Benfica{}
.Maia{} 
</style>

<div class="Picoas dynamic">
    Timberland Picoas<br />
    Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
    1500-392 Lisboa
</div>
<div class="Felgueiras dynamic">
    Timberland Felgueiras<br />
    Centro Colombo Morada: Av. Lusíada, Centro Colombo Piso 1, Loja 1.095<br />
    1500-392 Lisboa
</div>
(etc.) 
```

[http://jsbin.com/welcome/47377/edit](http://jsbin.com/welcome/47377/edit)

# mysql - MySql 从文件中读取 - 位置在哪里？

> ID：13335709
> 
> 赞同：0
> 
> 时间：2012-11-11T21:36:14.990
> 
> 标签：mysql, file-upload

我正在尝试使用加载数据

```
LOAD DATA LOCAL INFILE 
```

但是 MySql 找不到输入文件。我怎么知道它在哪里看，或者如何将它指向正确的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:43:09.867

如[`LOAD DATA INFILE`语法](http://dev.mysql.com/doc/en/load-data.html)中所述：

> 如果指定了`LOCAL`关键字，则根据连接的客户端进行解释：
> 
> *   如果`LOCAL`指定，则文件由客户端主机上的客户端程序读取并发送到服务器。该文件可以作为完整路径名给出以指定其确切位置。如果作为相对路径名给出，则该名称被解释为相对于启动客户端程序的目录。

# jquery - jquery 动态幻灯片切换

> ID：13335711
> 
> 赞同：0
> 
> 时间：2012-11-11T21:36:36.423
> 
> 标签：jquery, slidetoggle

我正在使用 SilverStrips CMS。我的目标是创建一系列动态的 div，这些 div 一开始是折叠的，并且有用于展开它们的链接。我正在尝试使用 jQuery slideToggle() 函数，但在让它以函数形式正常工作时遇到问题。这就是我所拥有的。

头部标签：

```
$(document).ready(function(){
    (function($){
        $.fn.collapse = function(itemid){
            $(itemid).slideToggle();
        };
    })(jQuery);
}); 
```

我已经将链接设置为有一个 onclick 事件，该事件使用动态生成的 id 调用函数 collapse()，如下所示：

```
<h3><a href"javascript:void(0)" onclick="collapse(div#itemid)">$Title</a></h3> 
```

我不确定我是否正确格式化了我的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:51:40.800

您创建该函数的方式，您需要像这样调用它：

```
$("any selector here").collapse("div#itemid") 
```

这可能不是您想要的。相反，试试这个：

```
 $.fn.collapse = function(){
        $(this).slideToggle();
    }; 
```

然后可以这样调用：

```
$('div#itemid').collapse() 
```

[http://jsbin.com/ozacoq/1/edit](http://jsbin.com/ozacoq/1/edit)

* * *

*理想情况下，您还应该考虑不要内联附加处理程序。像这样的东西：*

```
$("a.somelink").click(function(){
    $('div#itemid').collapse();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:43:30.467

我认为你的问题出在这里

```
<h3><a href"javascript:void(0)" onclick="collapse(div#itemid)">$Title</a></h3> 
```

我相信应该是

```
<h3><a href="javascript:void(0)" onclick="collapse('div#itemid')">$Title</a></h3> 
```

确保您的初始 CSS 没有

```
{height:0px;} 
```

它应该有

```
{display:none;} 
```

相反，否则切换将不知道将高度切换到什么。

* * *

另外，为什么不这样创建你的函数呢？

```
$(document).ready(function(){

    function collapse(itemid){
        $(itemid).slideToggle();
    };

}); 
```

# android - 在 Eclipse 中导入 javax.microedition

> ID：13335712
> 
> 赞同：1
> 
> 时间：2012-11-11T21:36:37.340
> 
> 标签：android, eclipse, eclipse-plugin

我正在尝试将 Android 小程序的源代码导入 Eclipse，但出现“无法解析导入 javax.microedition”错误。我已经安装了 oracle_java_me_sdk-3_2.exe，我还需要做什么？我需要更改任何设置吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:38:29.090

`jar`将包含该包的文件添加`javax.microedition`到您的 Eclipse 项目类路径中。如果您不确定要使用哪个 jar，请检查 findjar

[http://findjar.com/index.x?query=javax.microedition](http://findjar.com/index.x?query=javax.microedition)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:31:39.790

您是否将所需的库（jar/bundle）添加到您的项目/类路径中？如果没有，我相信您将不得不手动执行此操作，那么您可能还需要手动将源附加到该库。

# multithreading - 使用内核级线程进行上下文切换

> ID：13335720
> 
> 赞同：0
> 
> 时间：2012-11-11T21:38:20.917
> 
> 标签：multithreading, operating-system

与用户级线程相比，内核支持的线程的上下文切换会变得更快还是更慢。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:32:25.867

**一般来说**，没关系。在这两种情况下，进程调度程序将执行相同的一组操作。被换出的线程或被换入的线程可以是用户线程或内核线程。这不会影响执行上下文切换所需的时间。上下文切换是保存正在运行的进程的当前状态（各种寄存器值和其他数据结构，例如PCB）和恢复已保存的进程状态（恢复各种寄存器值和其他数据结构，例如PCB）的过程。所有数据的存储和检索都在内核空间中。

上下文切换不涉及选择下一个要执行的进程/线程，即进程调度程序的工作。

# ruby-on-rails - 使用偏执狂的默认范围急切加载已删除的记录

> ID：13335726
> 
> 赞同：4
> 
> 时间：2012-11-11T21:38:55.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, eager-loading, default-scope

我正在使用[paranoia](https://github.com/radar/paranoia) gem 来“软删除”记录。现在我需要为关联模型急切加载这些记录，其中一些可能已被删除。偏执狂将此添加`default_scope`到“偏执狂”模型中：

```
default_scope :conditions => { :deleted_at => nil } 
```

所以实际上，我有这些（简化的）模型：

```
class Product
  has_many :orders
  default_scope :conditions => { :deleted_at => nil }
end

class Order
  belongs_to :product
end 
```

我想要实现的是在访问订单时预先加载产品：

```
Order.includes(:product) 
```

这（来自[How to use unscoped on associated Relations in Rails3?](https://stackoverflow.com/questions/4758145/how-to-use-unscoped-on-associated-relations-in-rails3)）在这里不起作用：

```
Product.unscoped { Order.includes(:product) } 
```

我知道我可以创建一个自定义`belongs_to`关系来*添加*条件（如在[Eager loading nested association and scope 中](https://stackoverflow.com/questions/6169828/eager-loading-nested-association-and-scope)），但我找不到*删除*现有条件的方法，如果这可能的话。

**问题：**如何防止将默认范围应用于急切加载查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:02:22.120

好吧，事实证明，解决方法是强制加入“偏执狂”模型，从而绕过`default_scope`：

```
Order.joins(:product).includes(:product) 
```

不漂亮，但它有效。如果可能的话，希望得到更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T21:27:15.253

此错误已在 rails >= 4.1.8 中修复。

[https://github.com/rails/rails/issues/11036](https://github.com/rails/rails/issues/11036)

[https://github.com/rails/rails/pull/17360](https://github.com/rails/rails/pull/17360)

# php - 从 XML 文件打印值

> ID：13335727
> 
> 赞同：0
> 
> 时间：2012-11-11T21:38:55.353
> 
> 标签：php, xml

XML 文件（ids 不是根）：

```
<id_list>
    <ids>
        <id>185903535</id>
        <id>235450977</id>
        <id>274135256</id>
    </ids>
</id_list> 
```

我正在尝试打印 XML 文件中的所有值。我对 PHP 很陌生，我能打印的只是第一个元素。这是我到目前为止所拥有的：

```
<?php
$xml=simplexml_load_file('txt.xml');//php5
echo $xml->ids->id;
?> 
```

我确信这是非常简单的事情，我已经尝试搜索谷歌，但我不完全确定如何表达我正在寻找的内容。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:39:50.197

要访问所有`<id>`节点，只需遍历`$xml->ids->id`对象：

```
$xml = simplexml_load_file('txt.xml');
foreach ($xml->ids->id as $id) {
    echo $id;
} 
```

[相关文件](http://php.net/manual/simplexml.examples-basic.php#example-5152)

# java - Java Collections.sort() 不比较元素

> ID：13335732
> 
> 赞同：0
> 
> 时间：2012-11-11T21:39:30.687
> 
> 标签：java, sorting, collections

我有一个 IndexEntry 的 ArrayList，它是一个简单的类，带有一个字符串、两个整数和一个`compareTo()`如下所示的方法。我的问题是，当我`Collections.sort()`大多数时候调用 ArrayList 时，一切都会正确排序，但有时永远不会比较两个元素，从而导致列表排序错误。

一些代码供参考：

```
//Get a list of the values
ArrayList<IndexEntry<T>> cleanEntries = new ArrayList<IndexEntry<T>>(matches.get(query).values());

//Sort Files/URLS
Collections.sort(cleanEntries);

public int compareTo(IndexEntry<T> other) {
    if(this.occurrenceCount < other.getOccurrenceCount()){
        return 1;
    }
    else if(this.occurrenceCount > other.getOccurrenceCount()){
        return -1;
    }
    else{//Need to compare Initial Positions
        if(this.firstOccurrence == other.getFirstOccurrence()){
            return this.getLocationName().compareTo(other.getLocationName());
        }
        else if(this.firstOccurrence > other.getFirstOccurrence()){
            return 1;
        }
        else{
            return -1;
        }
    }
} 
```

以下是字母“C”的所有 IndexEntry 的一些示例输出：

```
c
"index.html", 6, 2
"chickadee.html", 3, 2
"cuckoo.html", 3, 2
"crow.html", 3, 2
"crane.html", 3, 2
"cardinal.html", 3, 2
"quail.html", 2, 2
"robin.html", 2, 2
"finch.html", 2, 2
"kingfisher.html", 2, 2
"swan.html", 2, 2
"turkey.html", 2, 2
"ibis.html", 2, 2
"falcon.html", 2, 2
"albatross.html", 2, 2
"tern.html", 2, 2
"dove.html", 2, 2
"mockingbird.html", 2, 2
"owl.html", 2, 2
"sparrow.html", 2, 2
"hawk.html", 2, 2
"magpie.html", 2, 2
"nighthawk.html", 2, 2
"gull.html", 2, 2
"bluebird.html", 2, 2
"raven.html", 2, 2
"blackbird.html", 2, 2
"sandpiper.html", 2, 2
"pheasant.html", 2, 2
"roadrunner.html", 2, 2
"duck.html", 2, 2
"vulture.html", 2, 2
"pigeon.html", 2, 2
"heron.html", 2, 2
"stork.html", 2, 2
"warbler.html", 2, 2
"woodpecker.html", 2, 2
"hummingbird.html", 2, 2
"mallard.html", 2, 2
"osprey.html", 2, 2
"swallow.html", 2, 2
"wren.html", 2, 2
"goose.html", 2, 2
"meadowlark.html", 2, 2
"pelican.html", 2, 2
"starling.html", 2, 2
"loon.html", 2, 2
"eagle.html", 2, 2
"puffin.html", 2, 2
"egret.html", 2, 2 
```

请注意，在确定出现次数和初始出现次数相同后，它会停止排序。正确的输出是：

```
c
"index.html", 6, 2
"cardinal.html", 3, 2
"chickadee.html", 3, 2
"crane.html", 3, 2
"crow.html", 3, 2
"cuckoo.html", 3, 2
"albatross.html", 2, 2
"blackbird.html", 2, 2
"bluebird.html", 2, 2
"dove.html", 2, 2
"duck.html", 2, 2
"eagle.html", 2, 2
"egret.html", 2, 2
"falcon.html", 2, 2
"finch.html", 2, 2
"goose.html", 2, 2
"gull.html", 2, 2
"hawk.html", 2, 2
"heron.html", 2, 2
"hummingbird.html", 2, 2
"ibis.html", 2, 2
"kingfisher.html", 2, 2
"loon.html", 2, 2
"magpie.html", 2, 2
"mallard.html", 2, 2
"meadowlark.html", 2, 2
"mockingbird.html", 2, 2
"nighthawk.html", 2, 2
"osprey.html", 2, 2
"owl.html", 2, 2
"pelican.html", 2, 2
"pheasant.html", 2, 2
"pigeon.html", 2, 2
"puffin.html", 2, 2
"quail.html", 2, 2
"raven.html", 2, 2
"roadrunner.html", 2, 2
"robin.html", 2, 2
"sandpiper.html", 2, 2
"sparrow.html", 2, 2
"starling.html", 2, 2
"stork.html", 2, 2
"swallow.html", 2, 2
"swan.html", 2, 2
"tern.html", 2, 2
"turkey.html", 2, 2
"vulture.html", 2, 2
"warbler.html", 2, 2
"woodpecker.html", 2, 2
"wren.html", 2, 2 
```

无论如何，就像我说的那样，我必须省略很多信息，但如果有任何想法，我会非常感激。事实上，“匹配”数据结构在创建 ArrayList 后不会被修改。

编辑：嘿，我仍在阅读您的回复。非常感谢您的快速帮助！这是整个 IndexEntry 类，因为你们中的一些人问过：

```
 class IndexEntry<extends Comparable<T>> implements Comparable<IndexEntry<T>>{
        private T theLocation;
        private Integer occurrenceCount;
        private Integer firstOccurrence;

        public IndexEntry(T location, Integer firstOcc, Integer occCount){
            theLocation = location;
            occurrenceCount = occCount;
            firstOccurrence = firstOcc;
        }

        public int compareTo(IndexEntry<T> other) {         
            if(this.occurrenceCount < other.getOccurrenceCount()){
                return 1;
            }
            else if(this.occurrenceCount > other.getOccurrenceCount()){
                return -1;
            }
            else{//Need to compare Initial Positions
                if(this.firstOccurrence == other.getFirstOccurrence()){
                    return this.getLocationName().compareTo(other.getLocationName());
                }
                else if(this.firstOccurrence > other.getFirstOccurrence()){
                    return 1;
                }
                else{
                    return -1;
                }
            }
        }   

        public String getLocationName(){
            if(theLocation instanceof File){
                return ((File) theLocation).getAbsolutePath();
            }
            else{
                return theLocation.toString();
            }
        }

        public Integer getFirstOccurrence(){
            return firstOccurrence;
        }

        public Integer getOccurrenceCount(){
            return this.occurrenceCount;
        }

        public void addToOccurrenceCount(Integer toAdd){
            occurrenceCount += toAdd;
        }

        public void setFirstOccurrence(Integer firstOcc){
            firstOccurrence = new Integer(firstOcc);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:33:33.453

正如您所展示的那样，您的代码会产生您提供的正确输出，而不是您声称的错误输出。

这是一个独立的演示：

[https://gist.github.com/4056538](https://gist.github.com/4056538)

# vb.net - 我不知道如何通过选择单选按钮选项（全职或兼职）在 datagridview 中显示数据

> ID：13335742
> 
> 赞同：-1
> 
> 时间：2012-11-11T21:40:14.597
> 
> 标签：vb.net

我需要使用两个单选按钮 PartTimeRadioButton 和 FullTimeRadioButton 在 datagridview 中显示适当的信息。当有人选择单选按钮时，它将仅显示全职或兼职人员。我什至不知道如何开始。我知道如何通过以下方式显示所有这些：

SalesDataGridView.DataSource = aCustomers.Items

aCustomers 来自客户类，但以该形式重命名为 aCustomers。我附上了这个项目设计的屏幕截图。我还必须在晚上 11:59 之前完成这项工作，但不知道该怎么做。

客户类代码为：

```
Public Class Customers

'create a object variable (tableadapter)
'this will be used to creat instances of this class in the form

Private adapter As New CompanyDataSetTableAdapters.SalesStaffTableAdapter

'property to return a table using the GetData method
Public ReadOnly Property Items() As DataTable
    Get
        Dim table As DataTable = adapter.GetData
        table.DefaultView.Sort = "First_Name"
        Return table
    End Get
End Property

'create a function to filter the customers by custid
Public Function GetByCustomerId(custid As Short) As DataTable
    Dim table As DataTable = adapter.GetData 'entire table
    'filter to get desired row(s)
    table.DefaultView.RowFilter = " ID = " & custid
    Return table

End Function

End Class 
```

带有 datagridview 和单选按钮代码的显示窗口窗体是：

```
' For the datagridview, display only first name, last name, fulltime, hiredate and salary
' If you do not want to display the column, use the visible property.
' For example, SalesDataGridView.Columns(0).Visible = false

' To accumulate the total salary, you can use the cells in the datagridview
' For example, id is in cells(0).

Public Class frmDisplay
Private aCustomers As New Customers
Private formLoading As Boolean = True

Private Sub radFT_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)

End Sub

Private Sub radPT_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    SalesDataGridView.DataSource = aCustomers.Items
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:21:22.717

1.  弄清楚如何只显示全职客户。
2.  弄清楚如何只显示兼职客户。在第 1 步之后这将很容易。
3.  当单选按钮更改时，重新加载适当的数据（您在步骤 1 和 2 中所做的）。您可以在 checkedchanged 事件中处理此问题。

# c++ - 写很多txt文件（90个），每个文件5MB，最多耗时1400s

> ID：13335749
> 
> 赞同：5
> 
> 时间：2012-11-11T21:41:30.830
> 
> 标签：c++, text, ofstream

我是电气工程专业的学生。

作为一项任务，我需要实现医学成像中使用的反投影算法以形成图像。为了计算最终图像，需要计算大量信息并将其保存在向量中。在最终图像的某个所需分辨率（256*256 像素）下，程序在我用完 RAM 时崩溃，所以我决定将此信息写入 90 个文本文件。

我使用 ofstream 来编写这些文件。

计算此信息并将其存储在向量中所需的时间为：

*   输出分辨率 64x64 : 13,4s
*   输出分辨率 128x128 : 140s

将此信息写入 .txt 文件：

*   64x64 156 秒（1,25 MB/文件）
*   128x128 1400s（5MB/文件）

写入文件的代码：

```
ofstream file;
    for(k = 0; k < 90; k++)
        {    
        oss.str(""); //string stream
        oss << "rec\\reconstruction_matrix_step"<< k << ".txt" ; // per step other file
        filename = path;
        filename.append(oss.str());
        file.open(filename.c_str());
        double weight;
          for( l = 0; l < resolution; l ++)
          {

           bestand << "Begin " << l << endl;
           l_border = - WIDTH*(resolution*1.0/2.0 - l);
           r_border = - WIDTH*(resolution*1.0/2.0 - l) + WIDTH;

           for(i = 0; i < resolution; i++)
           {
              for(j = 0; j < resolution; j++)
              {  
                     file << getSurface(pixels[i][j], l_border, r_border) << "\t";
              }
                file << "\n";
           }
           file << "End" << l << "\n\n\n";
          }
            file.close();
        } 
```

当我使用矢量时， getSurface(pixels[i][j], l_border, r_border) 被放入矢量而不是写入文件中。

有什么办法可以加快这个过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:50:42.420

如果`bestand`是剩余的副本并且与 相同`file`，我将替换`endl`为`'\n'`。 `std::endl`刷新您的输出流并破坏 iostream 缓冲获得的任何吞吐量。

如果这不是您的问题，我建议您分析您的程序。通过分析，您可以用数字代替猜测，您可以根据这些数字采取进一步的行动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:42:12.320

尝试将格式从文本更改为二进制；这可能会大大减少文件大小（和文件写入时间）。

```
file.open(filename.c_str(), ios_base::binary);
...
// The following writes a vector into a file in binary format
vector<double> v;
const char* pointer = reinterpret_cast<const char*>(&v[0]);
size_t bytes = v.size() * sizeof(v[0]);
file.write(pointer, bytes); 
```

# git - “合并”这种情况的正确方法

> ID：13335750
> 
> 赞同：1
> 
> 时间：2012-11-11T21:41:32.337
> 
> 标签：git

所以这就是我所拥有的：

```
o experiments
|
o
|
o
|
o master
|
o
|
o (initial commit) 
```

正如你所看到的，我在前三个提交的“master”分支上工作。然后我创建了一个新的分支“实验”，朝着不同的方向发展。

现在我面临这种情况：

1.  我已经决定我目前的“实验”路径确实是要走的路。
2.  但是，我删除的旧“主人”仍然有很多文件和各种文件中的代码片段，但我现在想带回来。
3.  情况发生了很大变化。例如，工作树的目录结构发生了很大变化。这可能意味着进行常规 git merge 不适合我。

我应该如何处理这种情况？一个想法是问这个问题：

*   我应该如何将旧的“master”签出到另一个目录（当前工作树之外），这样我就可以自己进行合并，完全手动？

如果您认为最后一个问题是处理这种情况的适当方法，请回答那个问题。随意建议其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:19:07.940

> 该图没有隐藏任何细节。所以，是的，我没有对master进行任何单独的开发。

在这种情况下，合并尽可能简单。Git 将进行快进合并。这意味着它基本上只会将`master`分支指针设置为与您的分支相同的提交`experiments`。真的没有其他事情发生。

即使你在 master 上有点分歧，git 也不会只是简单地比较两个分支的尖端，而是实际查看分支中发生的事情（通过找到共同的祖先）；这称为三向合并。因此，它*可能会*弄清楚您做了什么，并且您可能不会遇到极端的合并冲突。当然，总会有一些例外，但在解决合并冲突时，您可能能够轻松找出这些例外。

但是同样，由于您`master`根本没有分歧，您可以轻松地`experiments`按照您希望的方式准备您的分支，然后快速前进`master`。或者，如果您想让历史记录反映您实际偏离（或至少计划偏离）master 的事实，您也可以使用`git merge --no-ff experiments`.

# grails - 为什么域类在同一个 GroovyTestCase 的两个不同方法中表现不同？

> ID：13335755
> 
> 赞同：0
> 
> 时间：2012-11-11T21:41:53.560
> 
> 标签：grails, groovy, integration-testing

我有一个[`GroovyTestCase`](http://groovy.codehaus.org/api/groovy/util/GroovyTestCase.html)使用两种测试方法扩展的 Grails 集成测试。第一种方法成功执行，但第二种方法失败并显示`groovy.lang.MissingMethodException`：

> 失败：testMapBudgetFailure(com.ross.budget.BudgetServiceTests)
> groovy.lang.MissingMethodException：没有方法签名：
> com.ross.budget.Budget.save() 适用于参数类型：() 值：[] 可能的解决方案：save (), save(boolean), save(java.util.Map), wait(), last(), any()
> at com.ross.budget.BudgetServiceTests.testMapBudgetFailure(BudgetServiceTests.groovy:45)

即使完全相同的方法调用`b.save()`在第一个方法中。如果我评论第一种方法，第二个测试将按预期运行。 **为什么这两种测试方法表现不同？**

完整的班级清单：

```
package com.ross.budget

import grails.test.mixin.*
import org.junit.*

/**
 * See the API for {@link grails.test.mixin.services.ServiceUnitTestMixin} for usage instructions
 */
@TestFor(BudgetService)
class BudgetServiceTests extends GroovyTestCase {

    BudgetService budgetService

    void testMapBudgetSuccess() {
        Budget b = new Budget()
        b.month = new Date(2012, 9, 1)
        b.amount = new BigDecimal(10.0)
        b.save()

        Account a = new Account()
        a.name = "Test"
        a.institution = "Test"
        a.description = "Test Account"
        a.save()

        Transaction t = new Transaction()
        t.account = a
        t.postDate = new Date(2012, 9, 5)
        t.amount = 10.0
        t.save()

        boolean result = budgetService.mapTransaction(t)
        assertTrue("Returned failed match.", result)
        assertNotNull("No budget set", t.budget)

    }

    void testMapBudgetFailure() {
        Budget b = new Budget()
        b.month = new Date(112, 5, 1)
        b.amount = new BigDecimal(10.0)
        b.save()

        Account a = new Account()
        a.name = "Test"
        a.institution = "Test"
        a.description = "Test Account"
        a.save()

        Transaction t = new Transaction()
        t.account = a
        t.postDate = new Date(112, 6, 5)
        t.amount = 10.0
        t.save()

        boolean result = budgetService.mapTransaction(t)
        assertFalse("Returned match.", result)
        assertNull("Budget set", t.budget)

    }
} 
```

[我知道代码是复制粘贴而不是可爱。这是个人项目的快速测试用例]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:13:34.223

根据[Grails doc](http://grails.org/doc/latest/guide/testing.html)，您应该将其`@TestFor`用于单元测试或扩展`GroovyTestCase`用于集成测试，而不是两者兼而有之。

# android - 使android活动等待服务的回复

> ID：13335759
> 
> 赞同：0
> 
> 时间：2012-11-11T21:42:24.090
> 
> 标签：android, sockets, android-service

我创建了一个远程服务来处理所有客户端-服务器通信。我使用服务是因为很少有独立的应用程序会使用相同的通信套接字，并且没有其他方法可以在应用程序之间“共享”套接字（据我所知）。

该服务运行良好，可以启动套接字连接并通过它发送 int/String，但我不能像 readString() 那样将它用作输入。

我认为问题的发生是因为活动从不等待服务的回复。我在我的服务上的 readString 方法的每个部分返回自定义字符串时对其进行了测试。

对于代码...

连接远程服务：

```
public class ConnectionRemoteService extends Service {

private String deviceID;
private ConnectionThread ct;

@Override
public void onCreate() {
    super.onCreate();
    //Toast.makeText(this, "Service On.", Toast.LENGTH_LONG).show();

}

@Override
public void onDestroy() {
    //Toast.makeText(this, "Service Off.", Toast.LENGTH_LONG).show();
    if(ct != null)
        ct.close();
}

@Override
public IBinder onBind(Intent intent) {
    return myRemoteServiceStub;
}   

private ConnectionInterface.Stub myRemoteServiceStub = new ConnectionInterface.Stub() {
    public void startConnection(){
        WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);
        deviceID = wm.getConnectionInfo().getMacAddress();
        ct = new ConnectionThread(deviceID);
        ct.start();
    }

    public void closeConnection(){
        if(ct != null)
            ct.close();
    }

    public void writeInt(int i) throws RemoteException {
        if(ct != null)
            ct.writeInt(i);
    }

    public int readInt() throws RemoteException {
        if(ct != null)
            return ct.readInt();
        return 0;
    }

    public void writeString(String st) throws RemoteException {
        if(ct != null)
            ct.writeString(st);
    }

    public String readString() throws RemoteException {
        if(ct != null)
            return ct.readString();
        return null;
    }

    public String deviceID() throws RemoteException {
        return deviceID;
    }

    public boolean isConnected() throws RemoteException {
        return ct.isConnected();
    }

}; 
```

}

解释：

如您所见，我只启动一个“空”服务并等待应用程序与之绑定。绑定后，我创建 ConnectionThread 来处理套接字等...所有方法都通过套接字调用输入\输出的线程方法。

连接线程：

```
public class ConnectionThread extends Thread {

private static final int SERVERPORT = 7777;
private static final String SERVERADDRESS = "192.168.1.106";

private String deviceID;
private Socket socket;
private DataInputStream in;
private DataOutputStream out;
private ObjectInputStream inObj;
private ObjectOutputStream outObj;
private boolean isConnected = false;

PingPongThread ppt;

public ConnectionThread(String deviceID) {
    super();
    this.deviceID = deviceID;
}

@Override
public void run() {
    super.run();
    open();

}

void open(){
    try{
        socket = new Socket(SERVERADDRESS,SERVERPORT);
        out = new DataOutputStream(socket.getOutputStream());
        out.flush();
        in = new DataInputStream(socket.getInputStream());
        outObj = new ObjectOutputStream(out);
        outObj.flush();
        inObj = new ObjectInputStream(in);
        out.writeUTF(deviceID);
        isConnected = true;
        ppt = new PingPongThread(SERVERADDRESS, SERVERPORT);
        ppt.start();
    }
    catch(Exception  e){
        isConnected = false;
        System.err.println(e.getMessage());
    }
}

public void close(){
    try {
        if(ppt!=null){
            ppt.stopThread();
            ppt.notify();
        }
        if(in!=null)
            in.close();
        if(out!=null)
            out.close();
        if(socket!=null)
            socket.close();
    } 
    catch(Exception  e){
        System.err.println(e.getMessage());
    }
    isConnected = false;
    socket=null;

}

public void writeInt(int i){
    try {
        out.writeInt(i);
        out.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public int readInt(){
    try {

        int i = in.readInt();
        return i;
    } catch (IOException e) {
        e.printStackTrace();
    }
    return 0;
}

public void writeString(String st){
    try {
        out.writeUTF(st);
        out.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public String readString(){
    String st = "";
    try {
        st = in.readUTF();
        return st;
    } catch (IOException e) {
        e.printStackTrace();
    }
    return st;
}

public boolean isConnected(){
    return isConnected;
} 
```

}

解释：

在我的线程中，我创建了套接字并初始化所有输入/输出对象以供以后使用。（忽略“PingPongThread”，它只是一个简单的检查连接的线程。它使用不同的端口，所以这不是问题......）所有其他方法都很简单，只需使用输入/输出对象......

对于主要活动：

```
public class MainLauncherWindow extends Activity {
private ConnectionInterface myRemoteService;
private boolean isServiceBinded = false;
private OnClickListener onclicklistener;

final ServiceConnection conn = new ServiceConnection() {
    public void onServiceConnected(ComponentName name, IBinder service) {
        myRemoteService = ConnectionInterface.Stub.asInterface(service);
    }
    public void onServiceDisconnected(ComponentName name) {
        myRemoteService = null;
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_launcher_window);

    final Button connectButton = (Button)findViewById(R.id.Connect);
    final Button disconnectButton = (Button)findViewById(R.id.Disconnect);

    startService(new Intent(getApplicationContext(), ConnectionRemoteService.class));
    isServiceBinded = bindService(new Intent("com.mainlauncher.ConnectionRemoteService"),conn,Context.BIND_AUTO_CREATE);

    //Connect button
    onclicklistener = new OnClickListener(){
        public void onClick(View v) {
            try {
                if(isServiceBinded){
                    myRemoteService.startConnection();
                    connectButton.setEnabled(false);
                    disconnectButton.setEnabled(true);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    };
    connectButton.setOnClickListener(onclicklistener);

    //Disconnect button
    onclicklistener = new OnClickListener(){
        public void onClick(View v) {
            connectButton.setEnabled(true);
            disconnectButton.setEnabled(false);
            try {
                if(isServiceBinded)
                    myRemoteService.closeConnection();
            } catch (RemoteException e) {
                e.printStackTrace();
            }
        }
    };
    disconnectButton.setOnClickListener(onclicklistener);

    //read test button
    final Button bt1 = (Button)findViewById(R.id.bt1);

    onclicklistener = new OnClickListener(){
        public void onClick(View v) {
            try {
                if(isServiceBinded){
                    myRemoteService.writeString("Testing");
                    Toast.makeText(v.getContext(), myRemoteService.readString(), Toast.LENGTH_LONG).show();
                }
            } catch (RemoteException e) {
                e.printStackTrace();
            }
        }
    };
    bt1.setOnClickListener(onclicklistener);        
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    if(isServiceBinded){
        unbindService(conn);
        stopService(new Intent(getApplicationContext(), ConnectionRemoteService.class));
        isServiceBinded = false;
    }
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if(isServiceBinded){
        unbindService(conn);
        stopService(new Intent(getApplicationContext(), ConnectionRemoteService.class));
        isServiceBinded = false;
    }
}

} 
```

在我的主要活动中，我为连接\断开连接和测试按钮创建了按钮。测试按钮将“测试”字符串发送到服务器端。服务器工作正常，获取“测试”字符串并将其他字符串返回给客户端。但“吐司”味精总是空白。

*   我在没有服务的情况下测试了服务器端，它工作正常，所以不用担心。
*   我对 ConnectionThread 进行了测试，从它的 readString 方法返回测试字符串并且它运行良好，这意味着线程通过服务将答案返回到客户端（所有链都运行良好）。

我现在唯一想到的是，该活动从不等待从服务返回的字符串，这就是导致问题的原因。

有任何想法吗？

谢谢，利奥兹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:18:59.613

终于明白了。我在 AsyncTask 中使用了“Ercan”方式。

最终的解决方案是在我的活动中实现它（而不是在我的线程/服务中）。现在效果很好。谢谢你的帮助。

最终代码：

```
class ReadString extends AsyncTask <String,Object,String>{
    @Override
    protected String doInBackground(String... params) {
        try {
            if(isServiceBinded){
                String st = myRemoteService.readString();
                return st;
            }
        } catch (RemoteException e) {
            e.printStackTrace();
        }
        return "Nothing";
    }
}

class ReadInt extends AsyncTask <Integer,Object,Integer>{
    @Override
    protected Integer doInBackground(Integer... params) {
        try {
            if(isServiceBinded){
                int i = myRemoteService.readInt();
                return i;
            }
        } catch (RemoteException e) {
            e.printStackTrace();
        }
        return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T10:38:10.690

使用android提供的handlerThread类

Adnroid 链接：http: [//developer.android.com/reference/android/os/HandlerThread.html](http://developer.android.com/reference/android/os/HandlerThread.html)

教程链接：

1.  [http://stephendnicholas.com/archives/42](http://stephendnicholas.com/archives/42)

使用这个可以为处理程序创建一个新线程并将其传递给服务。因此，服务发送的所有消息都将在一个新线程中处理，您可以在活动中使用等待/通知。

前任：

```
/* This is running in hadlerThread */

static class IncomingHandler extends Handler 
{

    public IncomingHandler(Looper looper)
    {
        super(looper);
    }

    @Override
    public void handleMessage(Message msg) {

        switch (msg.what) {
        case DATA:
            //Your code
            synchronized (sync) {
                if(gotReply == false){
                    gotReply = true;
                    sync.notify();
                }
            }
            break;
        default:
            super.handleMessage(msg);
        }
    }
}

/* This is running in main thread */

void foo(){
    synchronized (sync) {
        gotReply = false;
    }
    Message msg = Message.obtain(null, DATA);       
    sendMessage(msg);

    synchronized (sync) {
        if(gotReply == false){
            try {
                sync.wait();
            } catch (InterruptedException e) {

                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T22:20:56.607

看看我的帖子：

[在收到通知时显示警报或视图](https://stackoverflow.com/questions/6994243/display-an-alert-or-a-view-on-recieving-a-notification/7801979#7801979)。

这将为您提供一种让活动使用 BroadcastReciever 监听事件的方法。如果您想让等待阻止用户执行任何其他操作，您还可以调出一个简单的模式对话框，该对话框可以在超时或收到意图后取消。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:32:53.383

尝试使用 AsyncTask 代替线程或将线程包装在 AsyncTask 中（如果可能的话，我没有尝试过）

通过这样做，您可以让您的应用程序等待您的结果，如下所示：

```
 class YourClass  extends AsyncTask <Bla,Object,Bla>{

 doInBackGround(Bla blah){
  //do the stuff here
  return result;
 }

 onPostCalculate(Object result){

  // use the result.
  }
} 
```

# ios - 将 sqlite db 重置为默认值

> ID：13335761
> 
> 赞同：3
> 
> 时间：2012-11-11T21:42:33.067
> 
> 标签：ios, iphone, sqlite, reset, nsfilemanager

我正在我的应用程序中编写一个重置函数，它将使用一些预先填充的数据将我的 sqlite 数据库恢复到其原始状态。下面的代码从文档目录中删除数据库并从捆绑包中复制数据库，但数据仍然出现在旧数据库中？

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; 
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"MoneyMonthly.sqlite"];

 if([[NSFileManager defaultManager] fileExistsAtPath:filePath]){ 

    [[NSFileManager defaultManager]      removeItemAtPath:filePath error:nil]; 

}

BOOL success; 
NSFileManager *fileManager = [NSFileManager defaultManager]; NSError *error;

NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"MoneyMonthly.sqlite"]; 
 NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"MoneyMonthly.sqlite"]; 

 success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error]; 

if (!success) {

    NSAssert1(0, @"Failed to create writable   database file with message '%@'.", [error localizedDescription]); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:46:40.697

只需关闭现有的 sqlite 数据库，然后再次从包中复制它，覆盖现有的数据库。它的完成方式与第一次复制时的方式基本相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:47:49.830

我在我的一个应用程序中执行此操作。我在我的应用程序包中保留了一个预构建的数据库文件。该数据库包含所有表格和示例数据。

当我需要重置用户的数据库时，我将其关闭，然后用捆绑包中的干净副本覆盖数据库。

# javascript - 剔除复选框启用依赖项

> ID：13335762
> 
> 赞同：0
> 
> 时间：2012-11-11T21:42:42.927
> 
> 标签：javascript, knockout.js

我正在尝试使用依赖项启用复选框。
如果两个输入字段中的一些不为空，我想启用一个复选框。
这是我的 JavaScript 代码：

```
var GoogleContactsViewModel = function() {
        var _self = this;
        _self.GoogleContacts = ko.observable();
        _self.IsEnabled = function (item) {
            console.log(item);
            return item.GivenName.length || item.FamilyName.length;
        };
        _self.GetData = function() {
            $.ajax({
                url: "some url",
                method: "POST",
                success:function (dataFromServer) {
                    _self.GoogleContacts(dataFromServer);
                }
            });
        };
        _self.GetData();
    };
    ko.applyBindings(new GoogleContactsViewModel()); 
```

这是html：

```
<table class="importContacts" data-bind="with: GoogleContacts">
    <thead>
        <tr>
            <th></th>
            <th>@CommonResource.LastNameColumn</th>
            <th>@CommonResource.NameColumn</th>
            <th>E-mail</th>
            <th>@CommonResource.MyEmployee</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: contacts">
        <tr>
            <td>
                <input type="checkbox" name="isImport" data-bind="value: FullName, enable: $root.IsEnabled($data)" />
            </td>
            <td>
                <input type="text" name="FamilyName" data-bind="value: FamilyName, valueUpdate: 'afterkeydown'" placeholder="@ContactResource.EnterLastName" />
            </td>
            <td>
                <input type="text" name="GivenName" data-bind="value: GivenName, valueUpdate: 'afterkeydown'" placeholder="@ContactResource.EnterName" />
            </td>
            <td>
                <span data-bind="text: Email"></span>
            </td>
            <td>
                <input type="checkbox" name="MyEmployee" value="" />
            </td>
        </tr>    
    </tbody>

</table> 
```

它非常适合初始化..[这里是 printscreen](http://linkme.ufanet.ru/images/28643b48c85a8727e2fdda0765f9dcc4.png)。但它不适用于更改，我的意思是在您填写任何空白字段后它不会启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:14:32.740

你需要使用 ko.observables。您映射数据的方式是单向绑定。这意味着无法进行更新。

如果您查看下面的函数，它会添加两个项目。首先，使用 ko.mapping 将你接收到的数据变成 ko.observables。其次，将计算函数添加到接收数据的每一行。

```
_self.GetData = function () {
    $.ajax({
        url: "some url",
        dataType: 'json',
        method: "POST",
        success: function (dataFromServer) {
        var localData = ko.mapping.fromJS(JSON.parse(contacts));
        var observArray = localData.contacts();
        for (var i = 0; i < observArray .length; i++) {
            observArray [i].IsEnabled = ko.computed({
              read: function () {
                console.log(this.GivenName());
                return this.GivenName().length || 
                    this.FamilyName().length;
            },
            owner: observArray [i]
           });
          }

            _self.GoogleContacts(localData);
            ko.applyBindings(_self);
        },
        error: function (result) {}
    });
}; 
```

此外，将 ko 启用绑定添加到您的复选框。

```
 <td>
            <input type="checkbox" name="MyEmployee" value="" 
                   data-bind="enable: IsEnabled " />
        </td> 
```

* * *

编辑 - 更新 GetData 以使用下面的供应 JSFIDDLE

# c++ - 通过 SWIG 从 Ruby 调用 C++ 函数

> ID：13335766
> 
> 赞同：2
> 
> 时间：2012-11-11T21:43:09.773
> 
> 标签：c++, swig

我正在尝试调用此函数

```
bool process(const short* pPCM, size_t num_samples, bool end_of_stream = false); 
```

[来自http://github.com/lastfm/Fingerprinter](http://github.com/lastfm/Fingerprinter)的 Last.FM FingerprintExtractor 开发的 fplib 部分

我试图通过 SWIG (2.0.8) 从 Ruby (1.9.2) 调用它。

到目前为止，这是我的 SWIG 文件

```
/* */
%define DOCSTRING
"This is a wrapper for The last.fm Fingerprint Extractor library."
%enddef
%module(docstring=DOCSTRING) FingerprintExtractor
%{
#include "../include/fplib/FingerprintExtractor.h"
%}
%include "typemaps.i"
%apply const short *INPUT { const short *pPCM };
%include "../include/fplib/FingerprintExtractor.h" 
```

swig -c++ -ruby FingerprintExtractor.i 的输出

```
FingerprintExtractor.i:10: Warning 453: Can't apply (short const *INPUT). No typemaps are defined. 
```

我认为我遇到的问题是围绕“const”。不幸的是，我是 C++ 和 SWIG 的新手。我知道“const”强制变量为常量，这在 C++ 中是一种很好的做法。但我不知道如何让 SWIG 打球。根据消息，我需要为“const short *”声明定义一个类型映射，但对于我来说，我无法弄清楚。

任何帮助弄清楚这一点将不胜感激。

我已经阅读了[http://www.swig.org/Doc1.3/Ruby.html](http://www.swig.org/Doc1.3/Ruby.html)上的大量文档，遗憾的是这超出了我的技能范围，虽然它涵盖了指针、数组、常量、typedef 和 typemaps 方面我还没有能够弄清楚这一切与在声明为 const 时将指针传递给数组有关。我已经查看了 C++ 语言以了解对“const”的要求。我试图通过查看其他实现来进一步了解这种情况，当然我已经用谷歌搜索过了。没有足够具体的东西出现在我能理解的水平上。因此我请求帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T14:49:17.800

尝试添加：

%包括“stdint.i”

下：

%包括“typemaps.i”

stdint.i 具有常见类型的类型定义，包括短。

# c - 'int32_t' 之前的预期说明符限定符列表

> ID：13335767
> 
> 赞同：0
> 
> 时间：2012-11-11T21:43:11.600
> 
> 标签：c, compiler-errors

注意，这是课堂作业，所以，你知道，学术诚实等等。

我有一个这样定义的结构：

```
typdef struct {
    int32_t r[8];
    Seq_T m;
    Seq_T lengths;
    int32_t ctr;
} UM_T; 
```

一切都编译得很好，包括实现，直到我添加了一个客户端：

```
#include "um.h"

int main(int argv, char* argc[]){                                                    
    FILE* file = fopen(argc[1]);                                                     
    UM_T* um = UM_new (file);                                                        
    run(um);                                                                         
}; 
```

现在编译器（gcc）告诉我：

```
um.h:5: error: expected specifier-qualifier-list before 'int32_t' 
```

如果是结构或我定义的东西，我会知道该怎么做`int32_t`，但显然情况并非如此。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:15:08.850

```
FILE *fopen(const char *path, const char *mode); 
```

以上是`fopen()`.It 的声明，它需要两个参数，但您只传递一个。

它会给你错误信息：

```
too few arguments to function ‘fopen’ 
```

而且在您使用的结构中`int32_t`，包括或`<sys/types.h>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:45:53.337

```
FILE* file = fopen(argc[1]); 
```

`fopen`函数有两个参数，但您只传递一个参数。

然后：

```
 run(um);
};

 ^ 
```

您必须删除尾随`;`.

并且一定要包括`stdio.h`for`fopen`和`stdint`for`int32_t`类型。

最后：

```
int main(int argv, char* argc[]) 
```

你可能的意思是：

```
int main(int argc, char *argv[]) 
```

以避免混淆。

那么当然你将不得不在你的通话中使用`argv[1]`而不是。`argc[1]``fopen`

# java - 用按钮打开谷歌地图到当前位置

> ID：13335769
> 
> 赞同：1
> 
> 时间：2012-11-11T21:43:25.547
> 
> 标签：java, android, google-maps, button

如何打开地图到默认位置？本质上，我想要一个按钮来打开谷歌地图，就像你从应用程序菜单启动它一样，它专注于你当前所在的位置。没有方向或导航或任意坐标。以下是我到目前为止所拥有的，显然它试图通过从一个点到另一个点的导航打开。谢谢你的帮助。

```
mapButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            String uri = "http://maps.google.com/maps?saddr=" + "9982878"
                    + "," + "76285774" + "&daddr=" + "9992084" + ","
                    + "76286455";
            Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
                    Uri.parse(null));
            intent.setClassName("com.google.android.apps.maps",
                    "com.google.android.maps.MapsActivity");
            startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:46:44.983

只需启动谷歌地图应用程序，这里是一个例子：

```
startActivity(getPackageManager().getLaunchIntentForPackage("com.google.android.apps.maps")); 
```

# android - Activity 在 android 2.x 上运行良好，但在 3.x 及更高版本上崩溃

> ID：13335774
> 
> 赞同：0
> 
> 时间：2012-11-11T21:43:34.130
> 
> 标签：android, android-listview, forceclose

我有一个应用程序，其中有一个 xml Dom 解析器。解析器活动由另一个片段中的按钮激活。当我运行该应用程序时，它在 Gingerbread 上运行良好，但在 Honeycomb 和 Jelly Bean 上，它每次都强制关闭。这是强制关闭时的类信息和日志 cat 文件。如果有人对造成这种情况的原因有任何想法，请告诉我。

我正在尝试启动的课程

```
 public class CustomizedListView extends SherlockActivity {
// All static variables
static final String URL = "http://treymorgan.net/feed";
// XML node keys
static final String KEY_ID = "channel"; // parent node 
static final String KEY_ITEM = "item";
static final String KEY_TITLE = "title";
static final String KEY_PUB_DATE = "pubDate";
static final String KEY_LINK = "link";

ListView list;
LazyAdapter adapter;

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // app icon in action bar clicked; go home
                    Intent intent = new Intent(this, MainActivity.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                    return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ActionBar bar = getSupportActionBar();
    bar.setDisplayHomeAsUpEnabled(true);

    final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ITEM, parser.getValue(e, KEY_ITEM));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_PUB_DATE, parser.getValue(e, KEY_PUB_DATE));
        map.put(KEY_LINK, parser.getValue(e, KEY_LINK));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Uri uriUrl = Uri.parse(songsList.get(position).get(KEY_LINK));  
            Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);  
            startActivity(launchBrowser);  

             }

    });
}   
} 
```

原木猫

```
08-29 03:28:48.603: E/AndroidRuntime(658): FATAL EXCEPTION: main
08-29 03:28:48.603: E/AndroidRuntime(658): java.lang.RuntimeException: Unable to start        activity ComponentInfo{com.threesixteenapps.treymorgan/com.threesixteenapps.treymorgan.CustomizedListView}: android.os.NetworkOnMainThreadException
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.os.Looper.loop(Looper.java:137)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-29 03:28:48.603: E/AndroidRuntime(658):  at java.lang.reflect.Method.invokeNative(Native Method)
08-29 03:28:48.603: E/AndroidRuntime(658):  at java.lang.reflect.Method.invoke(Method.java:511)
08-29 03:28:48.603: E/AndroidRuntime(658):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-29 03:28:48.603: E/AndroidRuntime(658):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-29 03:28:48.603: E/AndroidRuntime(658):  at dalvik.system.NativeStart.main(Native Method)
08-29 03:28:48.603: E/AndroidRuntime(658): Caused by: android.os.NetworkOnMainThreadException
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-29 03:28:48.603: E/AndroidRuntime(658):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-29 03:28:48.603: E/AndroidRuntime(658):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-29 03:28:48.603: E/AndroidRuntime(658):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-29 03:28:48.603: E/AndroidRuntime(658):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
08-29 03:28:48.603: E/AndroidRuntime(658):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-29 03:28:48.603: E/AndroidRuntime(658):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-29 03:28:48.603: E/AndroidRuntime(658):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-29 03:28:48.603: E/AndroidRuntime(658):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-29 03:28:48.603: E/AndroidRuntime(658):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-29 03:28:48.603: E/AndroidRuntime(658):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-29 03:28:48.603: E/AndroidRuntime(658):  at com.threesixteenapps.treymorgan.XMLParser.getXmlFromUrl(XMLParser.java:45)
08-29 03:28:48.603: E/AndroidRuntime(658):  at com.threesixteenapps.treymorgan.CustomizedListView.onCreate(CustomizedListView.java:64)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.Activity.performCreate(Activity.java:4465)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-29 03:28:48.603: E/AndroidRuntime(658):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-29 03:28:48.603: E/AndroidRuntime(658):  ... 11 more 
```

如果需要更多信息，我很乐意为您提供。感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:48:47.927

Android 3.0 及更高版本不允许您在 ui 线程中执行任何网络任务（[请参阅此帖子](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)）。
解决方案是实现[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或可能的[Loader](http://developer.android.com/guide/components/loaders.html)。

编辑：我做了一个快速示例，说明如何在 Activity 中实现 AsyncTask。我删除了一些部分或用注释替换它们以保持合理的简短。只需将它与您的代码合并，它应该可以正常工作（替换`MyActivity`为您自己的等）。

```
public class MyActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        //super onCreate, setup your content, actionbar etc.

        AsyncTask getxml = new MyAsyncTask();
        getxml.execute(URL);
    }

    private class MyAsyncTask extends AsyncTask<String, Integer, Void>{
        private static final int RESULT_GOT_XML = 1;
        private static final int RESULT_FAILED = 0;
        private ArrayList<HashMap<String, String>> asyncList;
        public MyAsyncTask(){
            asyncList = new ArrayList<HashMap<String, String>>();
        }

        @Override
        protected Integer doInBackground(String... url) {

            try{
                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(url[0]);
                Document doc = parser.getDomElement(xml);

                NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                for (int i = 0; i < nl.getLength(); i++) {
                    //...perform the parsing and add to list:
                    asyncList.add(map);
                }
            }catch(IOException e){
                Log.e("MyAsync", "could not complete xml retrieval/parsing", e);
                return RESULT_FAILED;
            }
            return RESULT_GOT_XML;
        }

        @Override
        protected void onPostExecute(Integer result) {
            switch (result) {
            case RESULT_FAILED:
                Toast.makeText(MyActivity.this, "Could not get data", Toast.LENGTH_SHORT).show();
                break;
            case RESULT_GOT_XML:
                songsList.addAll(asyncList);
                list=(ListView)findViewById(R.id.list);
                adapter=new LazyAdapter(this, songsList);        
                list.setAdapter(adapter);

                list.setOnItemClickListener(yourclicklistener);
            default:
                Log.wtf("MyAsync","got unexpected result: "+result);
                break;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T21:48:47.733

```
Caused by: android.os.NetworkOnMainThreadException 
```

[您正在主线程上](https://stackoverflow.com/q/5150637/1267661)执行网络操作，这在最近的 API 中是不允许的。使用 DownloadManager 或将您的 XMLParser 移动到新线程，可能是 AsyncTask。

# ios - 核心日期概念：NSFetchedResultsController vs. NSManagedObject objectsWithFetchRequest

> ID：13335775
> 
> 赞同：0
> 
> 时间：2012-11-11T21:43:38.783
> 
> 标签：ios, core-data, nsfetchedresultscontroller

与 NSManagedObject中的[objectsWithFetchRequest](http://restkit.org/api/0.10.0/Categories/NSManagedObject+ActiveRecord.html#//api/name/objectsWithFetchRequests%3a)方法相比，何时使用[NSFetchedResultsController](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)？有没有典型的场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:52:30.553

`objectsWithFetchRequest:`（或`executeFetchRequest:error:`）只是执行一个获取请求并返回结果集。

A`NSFetchedResultsController`执行获取请求，然后监视对数据存储的更改（或更准确地说，对托管对象上下文的更改）。如果添加/删除/修改导致获取请求的结果集更改的对象，它会调用委托函数来报告更改。

A`NSFetchedResultsController`在大多数情况下用于使用获取请求的结果填充*表视图*，并在插入、删除或更改对象时自动更新表视图。

# sql - 连续 DML 触发器

> ID：13335781
> 
> 赞同：0
> 
> 时间：2012-11-11T21:44:07.197
> 
> 标签：sql, database, oracle, plsql, triggers

我正在尝试编写一个触发器“restrict_salary”，它禁止向既不是总裁也不是经理的员工发放超过 10,000 美元的薪水。如果“更新”不影响“sal”列，则不应触发触发器。之后想着制作触发器禁止也增加了9%以上。我已经尝试了一些东西，但我被卡住了，这是我的代码。

```
CREATE OR REPLACE TRIGGER restrict_salary
BEFORE
UPDATE OF sal
ON EMP
REFERENCING emp AS new_emp
FOR EACH ROW
WHEN (sal > 10000)
BEGIN
DECLARE job VARCHAR2(30);
    select job into job from ename;
    IF job!='MANAGER' OR job != 'PRESIDENT' THEN
        raise_application_error (-20002, 'Cannot attribute more than 10000 dollars ');
    END IF;

END;
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:31:38.190

你有`begin`和`declare`错误的方式。您必须先声明变量，然后才能开始 PL/SQL 块。

我还更改`before update of sal on emp`并`before update on emp`添加`new.`到 WHEN 子句，因为这是必需的。

```
CREATE OR REPLACE TRIGGER restrict_salary
BEFORE UPDATE ON EMP
FOR EACH ROW
WHEN (new.sal > 10000)
DECLARE 
   job ename.job%type;
BEGIN
    -- THERE WAS A MISSING WHERE CLAUSE!!!
   select job into job from ename where empid = :new.id;

   IF job not in ('MANAGER', 'PRESIDENT') THEN
      raise_application_error (-20002, 'Error that fit''s on page');
   END IF;

END restrict_salary;
/ 
```

最大的问题是您的`select into ...`. 这意味着如果您在此表中有不止一行，您总是会收到 TOO_MANY_ROWS 错误。如您所见，我已经更改了它，但您可能需要再次更改它，具体取决于您的架构。

为了清楚起见，我在`end`语句中添加了触发器的名称并删除了不必要的`referencing`子句。这两者对于使其工作都是不必要的，但有助于提高可读性。

最后，我已将变量声明`job`为您从中获取它的列的类型。这使您可以更改表中的列，而完全不影响触发器。始终声明依赖于这样的表的变量是明智的，因为它大大减少了由数据库更改引起的错误数量，并大大减少了代码库中的混淆。

我强烈建议阅读[文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_trigger.htm#LNPLS01374)以了解语法。

# wpf - 将 WPF 组合框筛选为包含键入字符串的项目

> ID：13335785
> 
> 赞同：2
> 
> 时间：2012-11-11T21:44:25.283
> 
> 标签：wpf, vb.net, combobox, filter

我无法弄清楚如何过滤组合框以仅显示包含迄今为止输入的文本的项目。

这是构建组合框绑定到的数据表的函数：

```
Function users() As DataTable
        Dim ds As New DataSet
        Dim dt As DataTable
        Dim dr As DataRow
        Dim idCoulumn As DataColumn
        Dim nameCoulumn As DataColumn

        dt = New DataTable()
        idCoulumn = New DataColumn("ID", Type.GetType("System.Int32"))
        nameCoulumn = New DataColumn("Name", Type.GetType("System.String"))

        dt.Columns.Add(idCoulumn)
        dt.Columns.Add(nameCoulumn)

        dr = dt.NewRow()
        dr("ID") = 1
        dr("Name") = "Zuse, Konrad"
        dt.Rows.Add(dr)

        dr = dt.NewRow()
        dr("ID") = 2
        dr("Name") = "Torvalds, Linus"
        dt.Rows.Add(dr)

        dr = dt.NewRow()
        dr("ID") = 3
        dr("Name") = "Babbage, Charles"
        dt.Rows.Add(dr)

        ds.Tables.Add(dt)

        Return dt

    End Function 
```

如果我键入“u”，我将如何对其进行编程以仅显示 Linus 和 Zuse 条目？

我已经尝试过这样的事情，但我真的不明白该怎么做：

```
Private Sub userKeyUp(ByVal sender As System.Object, ByVal e As System.Windows.Input.KeyEventArgs) Handles cb_user.KeyUp
    cb_user.IsDropDownOpen = True
    cb_user.Items.Filter = Function(item)
                               Return item.ToString().Contains(cb_user.Text.Trim())
                           End Function
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:44:35.420

林克：

```
Dim query = (From dr As DataRow In dt.Rows Where dr("Name").ToString.Contains("Linus")).ToArray() 
```

拉姆达：

```
Dim query = dt.Rows.AsEnumerable.Where(Function(dr) dr("Name").ToString.Contains("Linus")).ToArray() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T23:18:35.243

请尝试此控件[https://www.nuget.org/packages/THEFilteredComboBox/](https://www.nuget.org/packages/THEFilteredComboBox/)我认为在您的情况下就足够了

# r - 检查是否有循环

> ID：13335786
> 
> 赞同：0
> 
> 时间：2012-11-11T21:44:28.350
> 
> 标签：r, vector

我想知道是否有人可以在我的 for 循环中指出我的错误。每次我观察到符号变化时，我都会尝试更改“变量”的值（如 return[i] 和 return[i + 1] 所示）。

```
wealth = 1000
count = 0
length_return = length(returns)
for(i in 1:(length_return - 1))
{
    if(returns[i] > 0)
    {
        wealth = wealth*(price[i]/price[i - 1])
    }
    if((returns[i] > 0) & (returns[i + 1] < 0))
    {
        count = count + 1
        wealth = wealth*(1 - .001)
    }
    else if((returns[i] < 0) & (returns[i + 1] > 0))
    {
        count = count + 1
        wealth = wealth*(1 - .001)
    }
} 
```

程序应该将财富值调整为 (wealth*.999)，但“财富”的值是“数字 (0)”

这是 dput 的结果：

```
> wealth
numeric(0)
> dput(wealth)
numeric(0) 
```

向量返回的结果[]

```
> dput(returns)
structure(c(0.04649726, 0.051260078, 0.064587685, 0.081688958, 
0.089178327, 0.088220746, 0.076685447, 0.08073864, 0.107918192, 
0.110432178, 0.119241244, 0.11470364, 0.107377131, 0.092958042, 
0.086196845, 0.082730935, 0.073386354, 0.082530002, 0.085342293, 
0.068458328, 0.076918215, 0.06372015, 0.073365275, 0.059020339, 
0.053460179, 0.053393368, 0.071874253, 0.090166017, 0.104658779, 

-0.050155439, -0.037186422, -0.050748794, -0.049519578, -0.050189338, 
-0.014833199, -0.002455173, -0.005934613, 0.007156353, 0.026845375, 
0.019969084, 0.017407996, 0.007269087, 0.003774705, 0.007976551, 
0.015977842, 0.007582187, 0.022870584, 0.012927018, 0.013875901, 
0.024793852, 0.021017486, 0.015188849, 0.009545373, 0.005816416, 
-0.000224326, -0.008068232, 0.001404623, 0.011375253, 0.021525748, 
0.034434378, 0.031539849, 0.030957107, 0.045225295, 0.043167887, 
0.042020082, 0.047133966, 0.045394564, 0.041455272, 0.043179827, 9945572, -0.041879781,     -0.041896857, -0.040369338, -0.037020153, 
0.040798471, 0.026819125, 0.030540597, 0.031310001, 0.021894158, 
0.017817084, 0.022059595, 0.021358056, 0.026762391, 0.022619225, 
0.02209257, 0.018882881, 0.019061966, 0.016261758, -0.004505179, 
-0.001457767, 0.006123557, 0.023709635, 0.035736269, 0.039109498, 
0.032387708, 0.033475559, 0.03742047, 0.036994833, 0.039972321, 
0.039112388, 0.025337715, 0.029414862, 0.026180163, 0.029382261, 
0.021469624, 0.015715534, 0.019535668, 0.017153586, 0.014145351, 
0.023289324, 0.012607206, 0.010220737, 0.01045078, 0.013243276, 
0.027074632, 0.023394827, 0.020926566, 0.020438976, 0.021330029, 
0.008604304, 0.014850638, 0.014686919, 0.013096954, 0.009374837, 
0.01443215, 0.01661252, 0.01536676, 0.016158815, 0.021767492, 
0.030394682, 0.030475736, 0.029487158, 0.028347715, 0.04105261, 
0.044154818, 0.056462216, 0.055224199, 0.056843288, 0.055654649, 
0.072682111, 0.069483533, 0.066373033, 0.063211431, 0.051366019, 
0.039760278, 0.047199156, 0.042253481, 0.030054723, 0.04184188, 
0.057175652, 0.052457792, 0.051794408, 0.037161545, 0.030259341, 
0.03059966, 0.029873752, 0.007304931, 0.004460967, -0.0015488, 
0.003125818, -0.001533689, -0.016161098, -0.017086177, -0.032358642, 
-0.030717303, -0.02689349, -0.024375075, -0.027481957, -0.034408133, 
-0.03258321, -0.026264889, -0.034690815, -0.034125666, -0.029183139, 
-0.019846483, -0.013114683, -0.01026677, -0.011285312, -0.018233584, 
-0.021051026, -0.027712669, -0.033608687, -0.02612171, -0.024127724, 
-0.030445729, -0.028967942, -0.021405891, -0.024171724, -0.021434177, 
-0.013715497, -0.002838327, -0.004074417, -0.000505583, 0.003139364, 
0.012513817, 0.012566525, 0.004373204, 0.004273826, -0.004080628, 
-0.004343782, 1.55099e-05, 0.014110229, 0.015430673, 0.0171028, 
0.030533699, 0.041469979, 0.036545248, 0.036434168, 0.045897523, 
0.047582759, 0.033954326, 0.038055636, 0.038070104, 0.026744856, 
0.027417561, 0.023161529, 0.028813037, 0.033653558, 0.03892672, 
0.04248052, 0.030778164, 0.027244448, 0.032521666, 0.034439243, 
0.03652718, 0.040391984, 0.026665423, 0.026127712, 0.040948888, 
0.049199194, 0.056136519, 0.059816934, 0.063331553, 0.062560205, 
0.05573074, 0.057457918, 0.053210566, 0.061868296, 0.060517643, 
0.065842535, 0.056788492, 0.020374537, 0.029021998, 0.019599729, 
0.017109049, 0.0142233, 0.01385032, 0.013664016, 0.018648185, 
0.021368724, 0.023747624, 0.021966254, 0.021445966, 0.021101993, 
0.013155832, 0.025693416, 0.028289433, 0.04028089, 0.037326679, 
0.038879551, 0.047571875, 0.048461808, 0.04884816, 0.045672085, 
0.05457715, 0.052152652, 0.032950707, 0.028645946, 0.024074085, 
0.010971707, 0.007218255, 0.002189754, 0.004059126, 0.003782036, 
0.008144712, 0.004256947, -0.001760174, 0.001352159, 0.002846419, 
0.00062595, 0.00617678, 0.007722022, 0.011879437, 0.015524757, 
0.017971861, 0.018865608, 0.021164099, 0.009689763, 0.002417621, 
-0.003509852, -0.015181537, -0.017544458, -0.035842462, -0.030717803, 
-0.030176812, -0.035764545, -0.033777136, -0.022469742, -0.021718647, 
-0.019902874, -0.032961927, -0.043416544, -0.040985411, -0.035366011, 
-0.051626959, -0.058473353, -0.067016303, -0.07114409, -0.071232613, 
-0.064722123, -0.076188295), na.action = structure(1:50, class = "omit")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:21:43.480

看看这一行：
`wealth = wealth*(price[i]/price[i - 1])`

您的 for 循环从 1 开始，因此`price[i-1]`没有值。你的意思是`price[i+1]`？

* * *

此外，如果您只是想检查符号更改，您可能可以使用更少的 if 语句：

```
if(returns[i] > 0)  {
    wealth = wealth*(price[i]/price[i + 1])
}
if(returns[i+1] != 0 && (returns[i] / returns[i+1] < 0))  {
    count = count + 1
    wealth = wealth*(1 - .001)
} 
```

# c# - WPF 数据绑定异常处理

> ID：13335787
> 
> 赞同：4
> 
> 时间：2012-11-11T21:44:29.287
> 
> 标签：c#, .net, wpf, data-binding

我有一个绑定到 Integer 属性的文本框。当用户在文本框中输入无法转换为整数的内容（例如名称）时，将引发异常并且原始属性值不会更改。我想捕获异常，以便我可以禁用连接到该属性的命令？一般来说，如果可能的话，我怎么能从定义属性的视图模型中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T22:09:12.687

我最近遇到了同样的问题，我使用行为来解决它（但如果你不想要它们就不需要它们，它只是为了在不同的视图中重用我需要的一些代码）。主要思想是在 ViewModel 中定义一些方法，允许视图通知 ViewModel 无法检测到的输入中的错误。

因此，首先在您的 ViewModel 中定义这些方法。为简单起见，我将只跟踪错误的数量，但您可以存储有关它们的更多信息（如实际错误）：

```
private int _errorCount = 0;
void AddUIValidationError()
{
   _errorCount++;
}

void RemoveUIValidationError()
{
   _errorCount--;
} 
```

然后，在您的视图中注册`System.Windows.Controls.Validation.ErrorEvent`，这是一个路由事件，可让您知道组件（之前配置为通知数据错误）何时检测到错误（如异常验证错误）：

```
public partial class MyView : UserControl // or whatever it is
{
    public MyView(MyViewModel viewModel)
    {
        // Possibly ensure that viewModel is not null
        InitializeComponent();
        _myViewModel = viewModel;

        this.AddHandler(System.Windows.Controls.Validation.ErrorEvent, new RoutedEventHandler(OnValidationRaised));
    }

    private MyViewModel _myViewModel;

    private void OnValidationRaised(object sender, RoutedEventArgs e)
    {
        var args = (System.Windows.Controls.ValidationErrorEventArgs)e;

        if (_myViewModel != null)
        {

            // Check if the error was caused by an exception
            if (args.Error.RuleInError is ExceptionValidationRule)
            {
                // Add or remove the error from the ViewModel
                if (args.Action == ValidationErrorEventAction.Added)
                    _myViewModel.AddUIValidationError();
                else if (args.Action == ValidationErrorEventAction.Removed)
                    _myViewModel.RemoveUIValidationError();
            }
        }
    }
} 
```

在 Command 的 CanExecute 方法中，您将检查 ViewModel 的 _errorCount 字段是否大于 0，在这种情况下，应禁用该命令。

请注意，您必须添加`ValidatesOnExceptions=True, NotifyOnValidationError=True`到您的绑定中才能正常工作。前任：

```
<TextBox Text="{Binding Path=MyProperty, ValidatesOnExceptions=True, NotifyOnValidationError=True}" /> 
```

编辑：

除了 Riley 提到的（这也很好，但需要将模型中的每个整数属性映射到 ViewModel 中的新字符串属性）之外，另一种方法是使用 ValidationRules。您可以添加`ValidationRule`在解析和调用属性设置器之前检查的 s。因此，例如，您可以从 ValidationRule 继承并实现 Validate 方法以确保可以将字符串解析为整数。例子：

```
public class IntegerValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        int number;
        if(Int32.TryParse((string)value, out number) == false)
            return new ValidationResult(false, "It is not a valid number");
        return new ValidationResult(true, null);
    }
} 
```

然后，在您的视图中定义定义 IntegerValidationRule 的命名空间：

```
<UserControl 
...
    xmlns:rules="clr-namespace:MyApplication.ValidationRules"
...> 
```

并在绑定中使用规则：

```
<TextBox>
    <TextBox.Text>
       <Binding Path="MyProperty">
           <Binding.ValidationRules>

              <rules:IntegerValidationRule/>
           </Binding.ValidationRules>
       </Binding>
    </TextBox.Text>
</TextBox> 
```

但无论如何，您需要为每个要验证的非字符串类型创建类，而且我认为 Binding 语法现在看起来有点长。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-09T15:51:41.213

我在网上找到的“最佳”解决方案在[http://www.wpfsharp.com/2012/02/03/how-to-disable-a-button-on-textbox-validationerrors-in-wpf进行了解释/](http://www.wpfsharp.com/2012/02/03/how-to-disable-a-button-on-textbox-validationerrors-in-wpf/)

简而言之，Validation 错误是在 View 中处理的，而不是在 ViewModel 中。您不需要自己的 ValidationRule。只需在 XAML 中为您的按钮添加样式：

```
<Button.Style>
            <Style TargetType="{x:Type Button}">
                <Setter Property="IsEnabled" Value="false" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding ElementName=TextBox1, Path=(Validation.HasError)}" Value="false" />
                            <Condition Binding="{Binding ElementName=TextBox2, Path=(Validation.HasError)}" Value="false" />
                        <Setter Property="IsEnabled" Value="true" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style> 
```

希望这对偶然发现这个问题的人有所帮助（我知道多年后它不太可能对 OP 有所帮助）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T01:36:27.547

考虑从视图模型而不是视图调用命令。

```
private int _myProperty;
public int MyProperty
{
    get
    {
        return _myProperty;
    }
    set
    {
        _myProperty = value;
        // See if the value can be parsed to an int.
        int potentialInt;
        if(int.TryParse(_myProperty, out potentialInt))
        {
            // If it can, execute your command with any needed parameters.
            yourCommand.Execute(_possibleParameter)
        }
    }
} 
```

这将允许您处理用户键入的无法解析为整数的内容，并且您只会在用户键入的内容是整数时触发命令。

（我没有测试这段代码，但我认为它可能会有所帮助。）

# ruby-on-rails - 作用于每个请求的全局变量

> ID：13335788
> 
> 赞同：1
> 
> 时间：2012-11-11T21:44:32.750
> 
> 标签：ruby-on-rails, global-variables, rack

Rails 中是否有可能在每个请求的范围内都有一个全局变量？这意味着，该变量不会在 Rack 请求中持续存在。

我需要这个，因为我希望能够在整个应用程序中引发事件。在请求结束时，我希望能够将这些引发的事件收集到一个数组中并将它们发送给客户端。

# java - 从相机应用程序返回重新创建 tabhost

> ID：13335789
> 
> 赞同：0
> 
> 时间：2012-11-11T21:44:38.090
> 
> 标签：java, android, android-tabhost, android-camera

> **可能重复：**
> [调用相机应用程序重新创建 android 活动](https://stackoverflow.com/questions/13335357/calling-camera-app-recreates-android-activity)

我正在 android 中创建一个选项卡式活动。在选项卡内的一个活动中，我使用 startActivityForResult() 启动相机应用程序。从相机返回后，我的标签主机被重新创建。所以我被带回到选项卡的初始屏幕。

我已经为 tabhost 和选项卡的所有活动添加了这一行。但还是一样。

```
android:configChanges="orientation|keyboardHidden" 
```

如何防止 tabhost 重新加载/重新创建？

谢谢

# expressionengine - 创建一个允许用户保存进度并检索以稍后完成的表单

> ID：13335790
> 
> 赞同：0
> 
> 时间：2012-11-11T21:45:18.943
> 
> 标签：expressionengine

我正在使用表达式引擎。如果需要，我想创建一个多页面应用程序，允许登录用户分阶段保存和完成。

我不认为 Solspace 或 Dev Demon 表单允许开箱即用，因此我正在寻找有关最佳方式的任何建议。保险箱破解器有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:15:35.593

也可以使用 SafeCracker 模块：

[http://expressionengine.com/forums/viewthread/214505/](http://expressionengine.com/forums/viewthread/214505/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:08:56.020

我使用安全破解器。有一个错误（可能在 2.5.3 中修复）：在第二种形式中，某些字段类型（例如复选框和单选）会被覆盖并显示为空白。我不得不添加隐藏字段来保留这些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:31:40.283

Solspace 的 Freeform Pro 可让您制作多页表格。

# html - 使用媒体查询构建响应式 UI

> ID：13335791
> 
> 赞同：1
> 
> 时间：2012-11-11T21:45:27.070
> 
> 标签：html, css, responsive-design, media-queries

我在某处读到过，当您构建网站并希望使用媒体查询使其具有响应性时，一般惯例是您首先构建移动界面，然后构建桌面浏览器的 UI。为什么首先建议构建桌面 UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:41:30.323

您指出了移动和桌面界面方法中的一个重要问题。

> 我同意这一点，但我发现你的桌面 UI 最终会包含太少的功能，因为你在构建网站时考虑了移动浏览器。我以为你先为桌面构建，然后构建一个删除所有不必要功能的移动版本？？

仅仅因为我使用的是移动设备并不意味着我不想要你的 Web 应用程序的完整体验。事实上，这样做可能会让我完全放弃你的 Web 应用程序。

随着越来越多的人通过移动设备访问网站（智能手机和平板电脑属于这一类），您将开始发现一些用户将无法通过任何其他方式访问互联网。如果您可以在智能手机或平板设备上完成所需的一切，为什么还要购买笔记本电脑。

相反，您应该考虑渐进增强来处理您的网络应用程序（或一般网站）。

1.  向移动设备上的用户提供所有 Web 应用程序功能
2.  通过检测设备功能（地理位置、触摸等）尽可能增强功能
3.  增强设计以适应屏幕视口。
4.  ？？？
5.  利润

通过向移动界面提供所有功能，您可以确保这也可以通过桌面访问，然后使用媒体查询，您可以确保用户拥有最佳的内容显示和界面，以便根据视口与网站/webapp 进行交互他们目前正在使用。

首先接近移动设备的主要好处之一是速度。您希望确保它尽可能轻，因为移动设备的运行带宽通常比笔记本电脑或台式机少。

# objective-c - 在 iOS 中使用 twitter 登录用户...使用什么？

> ID：13335795
> 
> 赞同：4
> 
> 时间：2012-11-11T21:46:03.500
> 
> 标签：objective-c, ios, twitter, ios6, restkit

我知道以前有人问过类似的问题（我已经阅读了大部分），但我还没有找到一个好的答案。

我需要使用 iOS 的 Twitter 登录/注册用户。我有这个网站，我已经这样做了（www.Meer.li），现在我也需要在应用程序中这样做。

我知道我可以访问 iOS 设备上的 twitter 用户名并查看它是否在我的应用程序的数据库中，但是当用户尚未注册 www.Meer.li 时我该如何处理？

对不起，如果这是一个微不足道的问题，但我有点困惑我应该使用 iOS 社交框架还是使用一些 OAuth 库（Restkit 等）。

希望有人可以指导我回答的方向，甚至是一个例子！

**需要澄清：**

非常感谢您的指导。似乎有道理。可以肯定的是，这就是我理解的步骤：

1: 用户点击 twitter 按钮登录

2：我们获取用户的推特账号并询问他想使用哪个账号

3：我们向 twitter 发送一个请求，其中包含您自己的应用程序的密钥和秘密以及用户的 twitter 信息

4：如果收到良好的响应，请将收到的信息发送到您的 web 应用程序上创建用户的方法，并从那里向 twitter 请求剩余的用户信息

5：让用户玩得开心

这对吗？为什么以前没有人很好地记录这个流程？听起来应该很容易做到的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T22:27:37.083

**注意：** iOS 5+ 会为您处理所有 OAuth 和繁重的工作，因此仅当您支持较旧的操作系统版本时才使用此答案。

由于 Twitter.framework 已被弃用，因此有一个很好的 WWDC 2012 演示文稿关于如何执行此操作。登录查看此链接：[http ://adcdownload.apple.com/wwdc_2012/wwdc_2012_session_pdfs/session_306__integrating_with_facebook_twitter_and_sina_weibo.pdf](http://adcdownload.apple.com/wwdc_2012/wwdc_2012_session_pdfs/session_306__integrating_with_facebook_twitter_and_sina_weibo.pdf)

* * *

我只需要自己做。

到目前为止，我找到的最佳答案是[Sean Cook 的 TWReverseAuthExample](https://github.com/seancook/TWReverseAuthExample)。（我分叉了他的 github 项目，然后将其归结为我在[TWReverseAuthSubModule](https://github.com/johnkdoe/TWReverseAuthSubmodule)中作为基于 ARC 的应用程序所需的子模块，剥离了示例项目等，因为我知道我可以在原始 github 上回到它资源。）

基本上，如果您按照示例进行操作，它将按照[Twitter API 网页上列出](https://dev.twitter.com/docs/ios/using-reverse-auth)的步骤进行。

最后，您需要做的是创建看起来很像肖恩示例的代码。

我最初开始使用的网络上还有其他资源，这些资源允许我“使用 twitter 登录”，这些资源可以在嵌套的 UIWebView 中进行授权，甚至可以去 safari，然后通过专用的应用程序 URL 返回应用程序方案。如果您需要做 iOS 5.x 之前的工作，这些可能会有所帮助。

但上面的示例充分利用了原生 iOS twitter 支持，并且也适用于 iOS 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:39:53.273

在 iOS5 中使用 Twitter 框架提示登录警报：在 iOS5 中使用 Twitter 框架 [提示登录警报？](https://stackoverflow.com/questions/9667921/prompt-login-alert-with-twitter-framework-in-ios5)

在 iOS6 中使用 Twitter 框架提示登录警报：iOS6 的 [Twitter 框架如何通过应用程序中的设置登录](https://stackoverflow.com/questions/13946062/twitter-framework-for-ios6-how-to-login-through-settings-from-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:34:12.897

如果您的目标是 iOS 5.x 之前的版本，则需要使用 UIWebView 进行 OAuth 登录。你可以从这里跳过我的回答......

但如果针对 iOS 5.0+，我会推荐 iOS Twitter 框架。正如 Twitter 的官方文档所说[的](https://dev.twitter.com/docs/ios#Single_Sign-On)。Apple 整合 Twitter 是有原因的，我敢打赌，更多的人正在使用 iOS 5.x 或 6.x。在这种情况下，这只是一个简单的分步过程，所有 API 都可用，不需要密钥或秘密。

1.  获取用户推特账号的账号实例
2.  请求用户访问可用 Twitter 帐户的权限
3.  获取可用帐户
4.  发出经过身份验证的请求

那么问题可能是：如果用户没有在设备上登录，你可能需要提醒他去设置并做登录的东西，或者使用“棘手”的方式来显示登录：

```
- (void)showTwitterSettings{
TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

// Create the completion handler block.
[tweetViewController setCompletionHandler:^(TWTweetComposeViewControllerResult result)
 {
     [self dismissModalViewControllerAnimated:YES];
 }];

// Present the tweet composition view controller modally.
[self presentModalViewController:tweetViewController animated:YES];
//tweetViewController.view.hidden = YES;
for (UIView *view in tweetViewController.view.subviews){
    [view removeFromSuperview];
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T03:33:17.433

你可以使用 twitter 提供的反向认证方法，你需要你的服务器支持这个。

这是链接：[https ://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth)

# ejb - 本地无国籍豆有什么用？

> ID：13335801
> 
> 赞同：0
> 
> 时间：2012-11-11T21:46:49.543
> 
> 标签：ejb, javabeans

是否有任何理由在 Java EE 应用程序中使用本地无状态 bean？bean 的接口可通过工厂设计模式获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:02:52.167

实际上，本地无状态 bean 是 Java EE 中最常见和流行的 bean 类型。

多年前的想法是一切都应该是远程的，但我们现在已经过时了。

有状态 EJB bean 最初主要用于远程 Swing 类客户端（包括小程序）。对于已经有 HTTP 会话的 Web 应用程序，它们的使用要少得多。

本地无状态 EJB bean 非常适合典型的服务和 DAO 代码。

# objective-c - 根据内容调整 UITableViewCell 内的 UIWebView 大小

> ID：13335803
> 
> 赞同：3
> 
> 时间：2012-11-11T21:46:57.150
> 
> 标签：objective-c, ios, uitableview, uiwebview

我知道这已经被问死了，我向你保证，我已经阅读了我能找到的关于这个主题的每一个线程。到目前为止，没有什么对我有用。这是我到目前为止所拥有的......我知道 2000 的高度有点荒谬，但我试图在 webView 中查看整个帖子。

```
- (void)viewDidLoad {

// Super
[super viewDidLoad];

_date = [NSDateFormatter localizedStringFromDate:[NSDate date]
                                                      dateStyle:NSDateFormatterShortStyle
                                                      timeStyle:NSDateFormatterShortStyle];

CGRect frame = _descriptionWebView.frame;
frame.size.width = 320;
frame.size.height = 2000;
_descriptionWebView.frame = frame;
_descriptionWebView = [[UIWebView alloc] initWithFrame:frame];
_descriptionWebView.delegate = self;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Return the number of sections.
return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// Return the number of rows in the section.
switch (section) {
    case 0: return 3;
    default: return 1;
}

}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

// Get cell
static NSString *CellIdentifier = @"CellA";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}
cell.textLabel.textColor = [UIColor blackColor];
cell.textLabel.font = [UIFont systemFontOfSize:15];

    // Display
    switch (indexPath.section) {
        case SectionHeader: {

            // Header
            switch (indexPath.row) {
                case SectionHeaderTitle:
                    cell.textLabel.font = [UIFont boldSystemFontOfSize:15];
                    cell.textLabel.text = _blogTitle;
                    cell.textLabel.numberOfLines = 2; // Multiline
                    break;
                case SectionHeaderDate:
                    cell.textLabel.text = _date;
                    break;
                case SectionHeaderURL:
                    cell.textLabel.text = [NSString stringWithFormat:@"By %@",_author];
                    cell.textLabel.textColor = [UIColor grayColor];
                    break;
            }
            break;

        }
        case SectionDetail: {

            // Description
            NSString* htmlString = _description;
            [_descriptionWebView loadHTMLString:htmlString baseURL:nil];
            [[cell contentView] addSubview:_descriptionWebView];
            _descriptionWebView.scrollView.scrollEnabled = NO;
            _descriptionWebView.scalesPageToFit = YES;

        }
    }

return cell; 
```

}

这是我真正遇到麻烦的部分。我要返回两个不同的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
if (indexPath.section == SectionHeaderTitle) {

    // Regular
    return 54;

} else {

    NSInteger height = [[_descriptionWebView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"] integerValue];

    return height;
}
} 
```

我发现了另一个看起来很有希望的帖子......但是，请原谅我，因为我是新手，我无法克服它给我带来的错误。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
CGRect frame = webView.frame;
frame.size = [webView sizeThatFits:CGSizeZero];
frame.size.height += 20.0f; // additional padding to push it off the bottom edge
webView.frame = frame;

webView.delegate = nil;

UITableViewCell *cell =[_cells objectAtIndex:webView.tag];
[cell.contentView addSubview:[_loadingWebView autorelease]];
cell.contentView.frame = frame;
[cell setNeedsLayout];

webView.alpha = 1.0f;

[self.tableView beginUpdates];
NSArray *paths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:webView.tag]];
[self.tableView insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationNone];
[self.tableView endUpdates];

// Storing the currently loading webView in case I need to clean it up
// before it finishes loading.
_loadingWebView = nil;
} 
```

具体来说`UITableViewCell *cell =[_cells objectAtIndex:webView.tag];`是给我“'UITableViewCell' 没有可见的@interface 声明选择器'objectAtIndex。

谁能给我一些指导？我已经被这个问题困扰了好几天了。感谢您的阅读，即使您无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:15:58.077

您不应该将 UITableViewCells 存储在 _cells 数组中。单元格被表格视图重用，因此单元格的数量不会像 indexPaths 那样多。如果你想获得正确的单元格实例，你可以向 tableView 询问它：

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath] 
```

这只会返回一个可见的单元格。更好的解决方案是做一个

```
[self.tableView beginUpdates];
[self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone]
[self.tableView endUpdates]; 
```

当 webview 完成加载并让

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

处理单元格的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T11:57:04.423

请使用此代码获取 UITableViewCell

```
UITableViewCell *cell=[tbl_showing_Details cellForRowAtIndexPath:[NSIndexPath indexPathForRow:clickedTag inSection:section]]; 
```

其中 tbl_showing_Details 是您的表格名称，clickedTag 是单元格当前部分的行，部分是您的当前部分。

谢谢。

# php - phpmyadmin 本地主机错误 (xampp)

> ID：13335804
> 
> 赞同：0
> 
> 时间：2012-11-11T21:47:01.653
> 
> 标签：php, phpmyadmin, xampp, localhost

当我尝试登录到 myphpadmin 时出现错误...

```
#1045 Cannot log in to the MySQL server
Connection for controluser as defined in your configuration failed. 
```

我的配置文件有问题吗？

```
/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysql if your server does not have mysqli */
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = false;

/*
 * phpMyAdmin configuration storage settings.
 */

/* User used to manipulate with storage */
 $cfg['Servers'][$i]['controlhost'] = '';
 $cfg['Servers'][$i]['controluser'] = '<username here>';
 $cfg['Servers'][$i]['controlpass'] = '<password here>';

/* Storage database and tables */
// $cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
// $cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
// $cfg['Servers'][$i]['relation'] = 'pma_relation';
// $cfg['Servers'][$i]['table_info'] = 'pma_table_info';
// $cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
// $cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
// $cfg['Servers'][$i]['column_info'] = 'pma_column_info';
// $cfg['Servers'][$i]['history'] = 'pma_history';
// $cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';
// $cfg['Servers'][$i]['tracking'] = 'pma_tracking';
// $cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
// $cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
// $cfg['Servers'][$i]['recent'] = 'pma_recent';
/* Contrib / Swekey authentication */
// $cfg['Servers'][$i]['auth_swekey_config'] = '/etc/swekey-pma.conf';

/*
 * End of servers configuration
 */ 
```

我不禁注意到，很多事情都被承诺了......应该是吗？

我真的不知道我在做什么......任何帮助都会很棒！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:50:13.700

```
$cfg['Servers'][$i]['controluser'] = '<username here>';
$cfg['Servers'][$i]['controlpass'] = '<password here>'; 
```

至少需要配置这两行，如果您只是进行了基本安装，要么它们都是空白的，要么用户名是 root 并且密码是空白的。如果您分配了用户名和密码，他们会进入这些字段，并且由于您的不允许密码设置为 false，那么您需要使用用户名和密码设置您的数据库，或者将该值设置为 true。在本地测试时没有密码很好，但是当您将其上传到实时服务器时则不行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:59:54.507

如果有帮助，这就是我的 config.inc.php 文件的样子：

```
<?php
/*
 * This is needed for cookie based authentication to encrypt password in
 * cookie
 */
$cfg['blowfish_secret'] = 'xampp'; /* YOU SHOULD CHANGE THIS FOR A MORE SECURE COOKIE AUTH! */

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;

/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';

/*
 * End of servers configuration
 */

?> 
```

如果我进入 phpMyAdmin 并单击权限选项卡，我还有以下用户：

```
User    Host    Password    Global privileges   Grant
Any     %         --        USAGE               No
Any     localhost No        USAGE               No
pma     localhost No        USAGE               No
root    127.0.0.1 No        ALL PRIVILEGES      Yes
root    localhost No        ALL PRIVILEGES      Yes 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T21:51:37.160

全部关闭后删除所有相关的cookie，然后如果不起作用，请检查您的php ini配置文件以查看用户是否已更改。

# c# - 从本地数据库检索值时出错

> ID：13335808
> 
> 赞同：1
> 
> 时间：2012-11-11T21:47:25.670
> 
> 标签：c#, database, silverlight, windows-phone-7

在这个函数中：

```
public IList<foods> GetFoods()
{
    IList<foods> myFoods = null;

    using (var db = new FoodsContext(ConnectionString))
    {
        var query = from e in db.MyFoods
                    select e;

        myFoods = query.ToList();

        return myFoods;
    }
} 
```

我收到一个错误：

```
myFoods = query.ToList(); 
```

错误说：

> InvalidCastException 未处理

但我可以得到某一列的值，即：当我写：

```
var query = from e in db.MyFoods
    select e.calorie; 
```

我正确地得到卡路里列。那么问题可能出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:59:33.053

我猜你正在使用 Linq2SQL 并且`db.MyFoods`意味着你的表名是`MyFood`. 因此，当您尝试`query.ToList();`它时，它将返回您`List<MyFood>`并且您尝试转换`List<MyFood>`为`IList<foods>`which 导致`InvalidCastException`.

尝试这个，

```
public IList<foods> GetFoods()
{
    using (var db = new FoodsContext(ConnectionString))
    {
        return db.Employees.Select(e => new foods 
                                         { 
                                           calorie = e.calorie,

                                           // Map other properties of foods object here
                                         }).ToList<foods>();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:57:22.313

根据您的代码，我相信您的 l​​inq 查询的结果不能直接转换为食品类对象集合。试试下面的代码

```
public IList<foods> GetFoods()
    {
        IList<foods> myFoods = null;

        using (var db = new FoodsContext(ConnectionString))
        {
            var query = from e in db.MyFoods
                        select new foods
                        {
                            calorie = e.calorie,

                            // Map other properties of foods object here

                        };

            myFoods = query.ToList();

            return myFoods;
        }
    } 
```

如果您收到详细信息错误，请告诉我

# c# - 模拟参数测试

> ID：13335811
> 
> 赞同：0
> 
> 时间：2012-11-11T21:47:55.640
> 
> 标签：c#, unit-testing, moq

我正在尝试测试传递给接口的参数是否正确：

```
MailMessage expectedMailMessage = new MailMessage();

var mailerMock = new Mock<IMailSender>();
mailerMock.Setup(m => m.Send(expectedMailMessage)).Verifiable();

Mailer mailer = new Mailer(mailerMock.Object);
mailer.Send(expectedMailMessage);

mailerMock.Verify(m => m.Send(expectedMailMessage), Times.Once()); 
```

邮件类：

```
public class Mailer : IMailer
{
    private readonly IMailSender _mailSender;
    public Mailer(IMailSender mailSender)
    {
        _mailSender = mailSender;
    }

    public void Send(MailMessage mailMessage)
    {
        _mailSender.Send(mailMessage);
    }
} 
```

但这仍然失败，问题是很难调试。我检查了是否生成了一些随机 Guid 或设置了日期，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:51:17.280

您正在传递`mailerMock`而不是传递`expectedMailMessage`给您的`Send`方法：

```
Mailer mailer = new Mailer(mailerMock.Object);
mailer.Send(expectedMailMessage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:16:35.760

经过一番摆弄，我放弃了，想出了这个：

```
mailerMock.Verify(m => m.Send(It.Is<MailMessage>(msg => msg.Subject == expectedMailMessage.Subject));
mailerMock.Verify(m => m.Send(It.Is<MailMessage>(msg => msg.Sender == expectedMailMessage.Sender)); 
```

也更容易看到它在哪个属性上失败了。

# iphone - 从描述中捕获错误消息

> ID：13335812
> 
> 赞同：0
> 
> 时间：2012-11-11T21:48:02.047
> 
> 标签：iphone, objective-c, ios, facebook

这是我在离线模式下尝试从 facebook 获取一些信息时收到的错误：（[错误描述]）

```
Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" 
UserInfo=0x13f76dd0 {com.facebook.sdk:ErrorInnerErrorKey=Error Domain=NSURLErrorDomain Code=-1009 "The Internet connection appears to be offline." UserInfo=0x13f76860 {NSErrorFailingURLStringKey=https://graph.facebook.com/me/?
fields=name,location,gender,birthday,relationship_status&sdk=ios&migration_bundle=fbsdk%3A20121003&format=json&access_token=xxx, NSErrorFailingURLKey=https://graph.facebook.com/me/?
fields=name,location,gender,birthday,relationship_status&sdk=ios&migration_bundle=fbsdk%3A20121003&format=json&access_token=xxx, NSLocalizedDescription=The Internet connection appears to be offline., 
NSUnderlyingError=0x13e86790 "The Internet connection appears to be offline."}, com.facebook.sdk:HTTPStatusCode=200} 
```

我想得到这个：`The Internet connection appears to be offline.`

这个也没有得到我想要的：

```
NSString *description = [error localizedDescription];
NSString *message = [error localizedRecoverySuggestion]; 
```

这个错误是`facebook sdk error 5`。（[错误代码] = 5）

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:30:37.783

尝试

```
NSError* underlyingError = [[error userInfo] valueForkey:NSUnderlyingErrorKey];
NSString* description = [underlyingError localizedDescription]; 
```

# ruby - 如何更改我的 OS X 并使其拥有尽可能多的线程？

> ID：13335816
> 
> 赞同：0
> 
> 时间：2012-11-11T21:48:14.510
> 
> 标签：ruby, multithreading, macos

似乎 OSX 在线程方面存在一些限制，请查看：http: [//support.apple.com/kb/HT3854](http://support.apple.com/kb/HT3854)。

我一直在尝试将 ruby​​ 与负责根据需要打开尽可能多的 TCP 线程的系统一起使用，为了重现 ruby​​ 中的问题，我使用了以下代码：

```
10000.times { |n| p n; Thread.new { sleep  60 } } 
```

当我运行上面的代码时，在打印出大约 2022 个线程后，我不断收到此错误：

```
ThreadError: unable to create new native thread
  initialize at org/jruby/RubyThread.java:382
         new at org/jruby/RubyThread.java:301
      (root) at main.rb:1
       times at org/jruby/RubyFixnum.java:273
      (root) at main.rb:1 
```

这是 Jruby 实现，但对于所有其他实现都是一样的，实际上它与 ruby​​ 本身无关，就像如果你对 cpp 做同样的事情，你会面临同样的问题：

```
#include <pthread.h>
#include <stdio.h>
#include <ulimit.h>

void thread_main(void *ptr)
{
  sleep(60);
}

int main()
{
  int i;
  pthread_t threads[10000];

  for(i = 0; i < 10000; i++) {
    printf("%d\n", i);
    if(pthread_create(threads + i, NULL, (void *)thread_main, NULL) != 0) {
      perror("thread test");
      exit(1);
    }
  }
} 
```

无论如何，有没有最大化线程数来使用那里的所有资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:09:33.250

> 无论如何，有没有最大化线程数来使用那里的所有资源？

改变你的设计。10000 个物理线程只是在浪费资源——它将消耗大量内存并花费（几乎）所有时间上下文切换。

将您的程序限制为 16 个线程（作为起点）并以不同的方式解决问题。通过这种方式，您的程序将获得更多的 CPU 时间（阅读：它将比使用 1000 多个线程快很多倍）。在问题上投入更多线程（如 OP 中所示）只会让您的系统慢下来（如果它要满足您的请求 - 请参阅并行减速）。

另请参阅OS X 的“[线程成本”。](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW7)

# javascript - 在 JavaScript 中使用数组作为名称计算输入元素中的值

> ID：13335817
> 
> 赞同：1
> 
> 时间：2012-11-11T21:48:16.870
> 
> 标签：javascript, html, arrays, function, input

我想要的是存储 id 为 3 的数据库对象的总和。（请参阅下面的输入标签）我有许多不同的 id 具有不同的值。我要存储的下面示例中的值是 2。

除此之外，我想使用带有 JavaScript 的“+”和“-”按钮来增加/减少 sum[3] 的值。所以我创建了一个名为 incr 和 decr 的函数来做到这一点：

```
<script type="text/javascript">
function incr(what)
{
    alert(what);
    what.value ++;

    // rest of the function I left out, it works with a 'normal' name of the input tag
    //but I need to use the array
}    
</script>

how many?<input type="text" size="10" name="sum[3]" value="2" />
<input name="plus" type="button" value="+" onclick="incr(document.sum[3])" />
<input name="min" type="button" value="-" onclick="decr(document.sum[3])" /> 
```

我无法让它工作，即使警报没有返回值。有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:57:38.373

这不是最优雅的方法，因为它使用了大量的内联代码，但它解决了您的问题。你的方法出了什么问题是 document.sum[3] 不是正确的选择器 name="sum[3]" 输入

```
<script type="text/javascript">
function incr(what)
{

    what.value ++;
    alert(what.value);
    // rest of the function I left out, it works with a 'normal' name of the input tag
    //but I need to use the array
}    
</script>

how many?<input type="text" size="10" name="sum[3]" value="2" />
<input name="plus" type="button" value="+" onclick="incr(document.getElementsByName('sum[3]')[0])" />
<input name="min" type="button" value="-" onclick="decr(document.getElementsByName('sum[3]')[0])" /> 
```

You should consider using jQuery and refactoring the code with event handlers rather than using inline javascript.

# c# - 避免为每个循环嵌套以在 TreeView 中加载项目

> ID：13335818
> 
> 赞同：0
> 
> 时间：2012-11-11T21:48:18.037
> 
> 标签：c#, .net, treeview

我有一个从数据库表中加载的数据表，其中包含要加载到树视图中的元素。

数据库表如下所示：

```
+--------+---------+-------------------------------+
|liv     | cod     | des                           |
|--------+---------+-------------------------------+
| 1      | AAA     |    PANE E SOSTITUTIVI     |
| 2      | AAAA    |GRISSINI - CRACKERS E SIMIL    |
| 3      | AAAA    |    MAIS                   |
| 4      | AAAA B  |    BIANCO                 |
| 4      | AAAA I  |    INTEGRALE              |
| 3      | AAAAA   |    AVENA                  |
| 4      | AAAAAB  |    BIANCO                 |
| 4      | AAAAAI  |    INTEGRALE              |
| 3      | AAAAB   |    ALTRO                  |
| 4      | AAAABB  |    BIANCO                 |
| 4      | AAAABI  |    INTEGRALE              |
| 3      | AAAAF   |    FARRO                  |
| 4      | AAAAFB  |    BIANCO                 |
| 4      | AAAAFI  |    INTEGRALE              |
| 3      | AAAAK   |    KAMUT                  |
| 4      | AAAAKB  |    BIANCO                 |
| 4      | AAAAKI  |    INTEGRALE              |
| 3      | AAAAR   |    FRUMENTO               |
| 4      | AAAARB  |    BIANCO                 |
| 4      | AAAARI  |    INTEGRALE              |
| 3      | AAAAS   |    RISO                   |
| 4      | AAAASB  |    BIANCO                 |
| 4      | AAAASI  |    INTEGRALE              |
| 2      | AAAC    |    ESTRUSI                |
| 3      | AAACA   |    MAIS               |
+--------+---------+-------------------------------+ 
```

由于树的最大级别 (liv) 是 5，这是我目前用来将数据表加载到 TreeView 中的函数：

```
 public void loadFromDataTable(DataTable table, TreeView tree) {

        DataView view1 = new DataView(table);
        view1.RowFilter = "liv = 1";

            foreach (DataRowView dr in view1) {
                TreeNode root = new TreeNode(dr["des"].ToString());
                DataView view2 = new DataView(table);
                view2.RowFilter = "liv = 2 AND cod LIKE '" + dr["cod"].ToString().Trim() + "%'";

                foreach (DataRowView dr2 in view2) {
                    TreeNode root2 = new TreeNode(dr2["des"].ToString());

                    DataView view3 = new DataView(table);
                    view3.RowFilter = "liv = 3 AND cod LIKE '" + dr2["cod"].ToString().Trim() + "%'";

                    foreach (DataRowView dr3 in view3) {
                        TreeNode root3 = new TreeNode(dr3["des"].ToString());

                        DataView view4 = new DataView(table);
                        view4.RowFilter = "liv = 4 AND cod LIKE '" + dr3["cod"].ToString().Trim() + "%'";

                        foreach (DataRowView dr4 in view4) {
                            TreeNode root4 = new TreeNode(dr4["des"].ToString());

                            DataView view5 = new DataView(table);
                            view5.RowFilter = "liv = 5 AND cod LIKE '" + dr4["cod"].ToString().Trim() + "%'";

                            foreach (DataRowView dr5 in view5) {
                                TreeNode root5 = new TreeNode(dr5["des"].ToString());

                                root4.Nodes.Add(root5);
                            }

                            root3.Nodes.Add(root4);
                        }

                        root2.Nodes.Add(root3);
                    }

                    root.Nodes.Add(root2);
                }
                tree.Nodes.Add(root);
            } 
```

我想知道是否有更好的方法来避免使用这五个嵌套循环。任何面向对象的方法？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:21:15.967

您可以使用递归来添加节点：

```
private TreeNode[] GetNodes(DataTable table, int level = 1, string code = "")
{
    return table.AsEnumerable()
                .Where(row => row.Field<int>("liv") == level
                              && row.Field<string>("cod").StartsWith(code))
                .Select(row =>
                {
                    var node = new TreeNode(row.Field<string>("des"));
                    node.Nodes.AddRange(GetNodes(table, level + 1, row.Field<string>("cod")));
                    return node;
                })
                .ToArray();
} 
```

而且用法很简单：

```
treeView.Nodes.AddRange(GetNodes(table)); 
```

此代码也适用于可变树深度 - 只有在当前级别找到节点时才会更深。顺便说一句，如果数据表很大，那么考虑对子节点进行延迟加载。在这种情况下，您也可以使用上述方法，但无需递归调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:06:47.767

像这样的东西应该可以工作（我还没有编译/运行代码，但它应该给你一个好主意）：

```
private int _maxDepth = 5;
public void loadFromDataTable(DataTable table, TreeView tree)
{
    DataView view1 = new DataView(table);
    view1.RowFilter = "liv = 1";

    foreach (DataRowView dr in view1) 
    {
        TreeNode node = new TreeNode(dr["des"].ToString());
        buildTree(table, node, 2);
        tree.Nodes.Add(node);
    }
}

public void buildTree(DataTable table, TreeNode parent, int level)
{
    if(level <= _maxDepth)
    {
        DataView view = new DataView(table);
        view.RowFilter = "liv = " + level + " AND cod LIKE '" + dr["cod"].ToString().Trim() + "%'";

        foreach (DataRowView dr in view) {
            TreeNode node = new TreeNode(dr["des"].ToString());
            buildTree(table, node, level+1);
            parent.Nodes.Add(node);
        }
    }
} 
```

它看起来仍然很“hackish”，但它绝对更干净、更易于维护且更具可扩展性。您还可以查询数据库的最大深度，并且可以以`_maxDepth`编程方式设置参数，而不必对其进行硬编码。

我对此感到困惑的一件事：您提供的代码为子树中的每个节点附加了相同的子节点。例如：第 2 级中的每个节点都会有完全相同的子节点，这是预期的吗？

# php - 不要持久化表单

> ID：13335820
> 
> 赞同：0
> 
> 时间：2012-11-11T21:48:40.300
> 
> 标签：php, joomla, joomla2.5

大家好，我的表格有这个问题

```
The CSRF token is invalid. Please try to resubmit the form 
```

我在这样的视图中显示我的表单

```
 <form id="target" action="#" data-idea="{{idea}}" method="post" {{ form_enctype(form) }}>
        {{ form_widget(form) }}
        </br>
        </br>
        <input type="submit" value="add comment"/>
    </form> 
```

在我的控制器中，我有这个

公共函数 addCommentAction(){

```
 $ideaId= $_POST['idea'];
        $coment= new Comentario();
        $form= $this->createForm(new ComentarioFormType(), $coment);
        $request= $this->getRequest();

        if($request->getMethod() == 'POST'){
            $form->bindRequest($request);

            if ($form->isValid()){
                $em= $this->getDoctrine()->getEntityManager();
                $coment->setIdea($ideaId);
                $em->persist($coment);
                $em->flush();
            }
...
} 
```

我有错误`($form->isValid())`，如果我调试代码，isValid 函数在询问这个时返回 false ...`if ($this->hasErrors())`并显示错误。

如果我 `if ($form->isValid())`在我的控制器中擦除该行，该函数不会保留表单，因为字段描述为空。

这是我的表格

```
public function buildForm( FormBuilder $builder, array $options)
{
    $builder->add('descripcion', 'textarea');

}

public  function getDefaultOptions( array $options){
    return array('data_class'=> 'ComentBundle\Entity\Coment');
}

public function getName()
{
    return 'coment';
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:23:07.040

试试这个

```
 public function addCommentAction(Request $request){
    $ideaId= $_POST['idea'];
    $coment= new Comentario();
    $form= $this->createForm(new ComentarioFormType(), $coment);

    if($request->getMethod() == 'POST'){
        $form->bindRequest($request);

        if ($form->isValid()){
            $em= $this->getDoctrine()->getEntityManager();
            $coment->setIdea($ideaId);
            $em->persist($coment);
            $em->flush();
        }
   ...
   } 
```

注意 $request 来自 Action declare 语句

我希望这个能帮上忙

# c - 为什么这只输出我输入的字符串的第一个字母？

> ID：13335826
> 
> 赞同：1
> 
> 时间：2012-11-11T21:49:00.427
> 
> 标签：c

```
#include <stdio.h>
#include <string.h>

/* Function prototypes */
void wordLength ( char *word );

int main (void)
{
    int choice;
    char word [20];

    printf( "Choose a function by enterting the corresponding number: \n"
        "1) Determine if words are identical\n"
        "2) Count number of words in sentence provided\n"
        "3) Enter two strings to be strung together\n"
        "4) Quit program\n" );
    scanf( "%d", &choice );
    flushall();

    while (choice >= 1 && choice < 4) 
    {
        /* if statements for appropriate user prompt and calls function */
        if (choice == 1) 
        {
            /* gather user input */
        printf( "\nYou have chosen to determine word length.\n"
                "Please enter the word:\t");
            gets( word );

            /* call function to output string as well as the string length */
            wordLength( word );

        }
    }
}

void wordLength( char *word )
{
    printf( "The string entered is:  %c\n", *word);
} 
```

每当我输入一个单词时，我的程序只输出字符串的第一个字母。为什么这样做？我的字符串长度被声明为 20，所以我知道这不是问题！我似乎无法弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:51:24.660

因为你告诉它打印一个字符：

```
printf("The string entered is: %c\n", *word); 
```

如果你想要字符串，请使用：

```
printf("The string entered is: %s\n", word); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:51:56.657

```
void wordLength( char *word )
{
    printf( "The string entered is:  %c\n", *word);
} 
```

在您的`wordLength`函数中，您将`%c`其用作格式说明符。 `%c`用于打印一个字符。用于`%s`打印字符串。

还要将 *word 更改为 word。*word 引用数组中的第一个或“zeroeth”值 - 单个字符。

不带星号的参数“word”引用整个数组，也可以表示为 &word[0]。这意味着它是第零个元素的地址。

总结一下...... %s 需要一个数组的地址，& 指定地址，[0] 指定第零个元素。没有 & 和相应的数组括号 [] 的变量是等效的。所以“&word[0]”和“word”是一样的。在您需要指定不是第 0 个元素（例如 &word[10]）的元素的地址之前，这似乎毫无意义。例如，如果您的字符串是“Sit on a potato pan Otis”，并且您想从字符串中提取单词“Otis”。

%c 需要单个字符，星号“取消引用”指针，因此 *word 引用实际字符，而不是字符的地址。

为了形象化它，想象一个药盒，也许是你祖父用来做药的那种。碉堡代表一个字符数组。有 7 个小隔间，每个隔间都标有从星期日开始到星期六结束的一周中的每一天。所以你的数组从 0 到 6。第一个隔间是字符串的开头。星期日是字符数组的第零个元素的地址。

当您打开周日隔间时，您会看到里面的药丸 - 这就是“价值”。星期日将表示为 &word[0]，星期一将表示为 &word[1]。如果您想要周日隔间内的值（药丸），则指定 *word。如果您希望将整个数组作为字符串（以提供 %s 格式说明符），那么您可以指定 &word[0] 或只是简单的“word”，因为它们是等价的。如果要打印从第二个字符开始的字符串，则应指定 &word[1]。想要周一隔间内的价值吗？使用 *(word+1) 并且对于字符使用 %c 来打印它。我希望我已经为你澄清了一些事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T21:53:05.477

您正在使用 %c 作为修饰符，它只打印字符。您应该使用 %s。查看[println 修饰符](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:20:22.667

如果必须使用它，您可以逐个字符地打印，方法是：

```
for( i = 0; i < 20; i++ ){
    printf( "%c", *( word + i ) );

    /* If you reach the end of the string, print a new line and stop. */
    if( *( word + i ) == '\0' ){
       printf( "\n" );
       break;
    }
} 
```

# objective-c - 如何在没有情节提要的情况下使用按钮切换视图？

> ID：13335828
> 
> 赞同：0
> 
> 时间：2012-11-11T21:49:16.913
> 
> 标签：objective-c, xcode, views

有谁知道，如何在没有情节提要的情况下使用按钮切换视图？感谢帮助 ！（：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:40:39.053

```
 [myButton addTarget:self action:@selector(buttonClicked) forControlEvent:UIControlEventTouchUpInside]; 
```

然后实现你的选择器 buttonClicked

```
-(void) buttonClicked {
    UIView* newView = [[UIView alloc]init] ;
    self.view = newView ;
   } 
```

# jquery - Twitter bootstrap 的 jquery 插件在我修改 bootstrap.css 后不起作用

> ID：13335829
> 
> 赞同：0
> 
> 时间：2012-11-11T21:49:29.213
> 
> 标签：jquery, twitter-bootstrap

我使用 LESS 修改了 bootstrap.css，因此我只能在 <div class="tw-bs"></div> 元素内使用 Bootstrap。这是我的 bootstrap.css： http: [//pastebin.com/68yRSc1u](http://pastebin.com/68yRSc1u)

现在我正在尝试使用带有以下代码的工具提示和模式：http: [//pastebin.com/GBFYN6U2](http://pastebin.com/GBFYN6U2)

但是，模式和工具提示都不起作用。

请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:56:49.423

确保 js 文件的路径正确，更改所有 CSS 会使模式和工具提示的编码中断，因为它们附加到正文、文档或其元素的父级。如果您需要`tw-bs`在所有内容上都使用该类，我建议您先尝试将其放在`<html>`or`<body>`标记上，如果这不起作用，然后取出 CSS 中的`.tw-bs`before all `.modal`, `.popover`, `.tooltip`,`.carousel`和 `.collapse' 类来修复它。其中一些类是在 JS 文件中设置的

并让工具提示起作用，你会做

```
$(function(){
  $('[rel="tooltip"]').tooltip()
}) 
```

# .net - 跨两个系统/域的单点登录

> ID：13335834
> 
> 赞同：1
> 
> 时间：2012-11-11T21:50:23.150
> 
> 标签：.net, single-sign-on

我正在开发一个需要跨两个域/系统进行单点登录的项目。场景是A公司收购B公司。两家公司都有自己的安全/凭据登录系统。最终目标是将B公司的系统与A公司的系统合并，包括合并产品数据和客户数据。实现这一目标可能需要大约一年的时间，这意味着在此之前会有一个过渡期。在此期间，我们想实现单点登录系统，让客户登录A公司的系统，自动登录B公司的系统，反之亦然。谁能给我任何建议，什么是理想的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:41:26.080

看看 SAML。这是一个协议，您可以选择将许多开源和企业软件集成到您的系统中。

# boost - wxwidgets 的 mainloop() 和 boost::thread

> ID：13335835
> 
> 赞同：0
> 
> 时间：2012-11-11T21:50:23.483
> 
> 标签：boost, wxwidgets, boost-thread

简而言之，我正在尝试为我的网络应用程序实现一个 GUI。他们都有 mainloop() 所以我试图将它们放入单独的线程中，并且我正在使用 boost::thread 。

```
 //standard initialization of boost::thread
    GuiThread.join();
    NetworkThread.join(); 
```

但是，由于某种未知原因，上述崩溃。我正在寻找任何方法来做同样的事情，所以任何建议都会受到赞赏。

在此先感谢，红。

编辑：

我正在创建 wxWidgets 主循环的 boost::thread GuiThread，如下所示：

```
 boost::thread GuiThread = boost::thread ( boost::bind( &myAppClass::MainLoop(), this)); 
```

和 Networkthread 一样。

然后我像这样重写 wxApp OnRun() 函数：

```
 int OnRun() {
            GuiThread.join();
            NetworkThread.join();
            return 0;
    } 
```

当我运行它时（在 vs2010 中），它说：myApp.exe 触发了一个断点，如果我按 continue 它将停止显示窗口，如果我按 break 它会显示我的程序集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:24:18.550

您必须从初始化库的同一线程运行 wxWidgets 主循环。如果您想在除main 之外的线程中运行它，这意味着您不能使用标准`IMPLEMENT_APP()`宏而必须自己进行初始化，例如通过`wxEntry()`手动调用。

# regex - 如何grep文件扩展名

> ID：13335837
> 
> 赞同：30
> 
> 时间：2012-11-11T21:50:42.417
> 
> 标签：regex, bash, grep

我目前正在尝试制作一个脚本，该脚本将 grep 输入以查看某些文件是否属于某种文件类型（例如 zip），尽管文件类型之前的文本可以是任何东西，例如

```
something.zip
this.zip
that.zip 
```

都属于该类别。我正在尝试使用通配符对这些进行 grep，到目前为止我已经尝试过

```
grep ".*.zip" 
```

但是每当我这样做时，它会发现`.zip`文件很好，但是如果在`.zip`so之后有其他字符`.zippppppp`或者`.zipdsjdskjc`仍然会被 grep 拾取，它仍然会显示输出。话虽如此，我应该怎么做才能防止 grep 显示在`.zip`?

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-11-11T21:53:17.853

用反斜杠测试行尾`$`并用反斜杠转义第二个`.`，使其仅匹配句点而不匹配任何字符。

```
grep ".*\.zip$" 
```

但是`ls *.zip`，如果要列出`.zip`当前目录`find . -name "*.zip"`中的所有`.zip`文件或从*（包括）*当前目录开始的子目录中的所有文件，这是一种更自然的方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-11T21:59:22.463

在 UNIX 上，尝试：

```
find . -type f -name \*.zip 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-11T21:54:06.197

你需要做几件事。它应该如下所示：

```
grep '.*\.zip$' 
```

您需要转义第二个点，所以它只会匹配一个点，而不是任何字符。使用单引号使转义更容易一些。

您需要在行尾使用美元符号来表示您希望“zip”出现在行尾。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-05T01:43:30.377

您还可以使用 grep 查找具有特定扩展名的所有文件：

```
find .|grep -e "\.gz$" 
```

表示当前`.`文件夹。如果要指定当前文件夹以外的文件夹，只需将 替换为`.`文件夹的路径即可。`.gz`这是一个示例：让我们查找以 /var/log 文件夹结尾且位于文件夹中的所有文件

```
 find /var/log/ |grep -e "\.gz$" 
```

输出类似于以下内容：

```
 ✘ ⚙&gt; find /var/log/ |grep -e "\.gz$"

/var/log//mail.log.1.gz
/var/log//mail.log.0.gz
/var/log//system.log.3.gz
/var/log//system.log.7.gz
/var/log//system.log.6.gz
/var/log//system.log.2.gz
/var/log//system.log.5.gz
/var/log//system.log.1.gz
/var/log//system.log.0.gz
/var/log//system.log.4.gz 
```

该`$`标志基本上表明文件扩展名以 gz 结尾

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-09T17:07:48.813

我使用它来获取文件夹内文件类型的列表。

```
find . -type f | egrep -i -E -o "\.{1}\w*$" | sort -su 
```

输出例如：

```
.DS_Store
.MP3
.aif
.aiff
.asd
.doc
.flac
.jpg
.m4a
.m4p
.m4r
.mp3
.pdf
.png
.txt
.wav
.wma
.zip 
```

奖金：与

```
find . -type f | egrep -i -E -o "\.{1}\w*$" | sort | uniq -c 
```

您将获得文件数：

```
 106 .DS_Store
     35 .MP3
     89 .aif
      5 .aiff
    525 .asd
      1 .doc
     60 .flac
     48 .jpg
    149 .m4a
     11 .m4p
      1 .m4r
  12844 .mp3
      1 .pdf
      5 .png
      9 .txt
    108 .wav
     44 .wma
      2 .zip 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-21T00:41:04.223

尝试：`grep -o -E "(\\.([A-z])+)+"`

我用它来获得多点/多扩展。因此，如果输入是`hello.tar.gz`，那么它将输出`.tar.gz`。对于单点，使用`grep -o -E "\\.([A-z])+$"`. 在 Cygwin/MingW+MSYS 上测试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-24T12:33:27.043

上述示例的另一个修复/插件：

```
# multi-dotted/multiple extensions
grep -oEi "(\\.([A-z0-9])+)+" file.txt

# single dotted
grep -oEi "\\.([A-z0-9])+$" file.txt 
```

这将获得文件扩展名，如“.mp3”等。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-10T15:56:05.707

如果您只想在当前文件夹中查找，为什么不用这个没有 grep 的简单命令呢？

```
ls *.zip 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-23T18:23:38.877

只是回顾一些其他的答案。不是必需的`.*`，如果您正在寻找某个文件扩展名，最好包含 -i 以便它不区分大小写；例如，如果文件是 HELLO.ZIP。我也不认为引号是必要的。

```
grep -i \.zip$ 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-11T21:54:04.823

只需这样做：

```
grep ".*.zip$" 
```

“$”表示行尾

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-08-26T10:56:02.763

```
grep -r pattern --include="*.txt" /path/to/dir/ 
```

# asp.net-mvc - 如何为 ASP.NET MVC 区域捆绑资源？

> ID：13335839
> 
> 赞同：21
> 
> 时间：2012-11-11T21:51:03.247
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundle, asp.net-optimization

您将如何为 asp.net mvc 区域进行资源捆绑？这是否像`AreaRegistration`for 路由一样由 ASP.NET MVC 框架规范？

我可以`BundleConfig`在该区域内创建一个类并从文件夹`BundleConfig`内的全局调用它，`App_Start`但这对我来说感觉不好。

我找不到有关此主题的任何信息。感谢我们的想法的任何帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-12T10:58:54.163

我希望这在某种程度上受到更多监管 - 但在深入研究框架代码之后，答案是否定的。

我决定做的是以下内容：

**解决方案结构**

*   领域：
    *   行政
        *   路由配置.cs
        *   BundleConfig.cs
        *   AdminAreaRegistration.cs

**路由配置.cs**

```
internal static class RouteConfig
{
    internal static void RegisterRoutes(AreaRegistrationContext context)
    {
        //add routes
    }
} 
```

**BundleConfig.cs**

```
internal static class BundleConfig
{
    internal static void RegisterBundles(BundleCollection bundles)
    {           
        //add bundles
    }
} 
```

**AdminAreaRegistration.cs**

```
public class AdminAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Admin";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        RegisterRoutes(context);
        RegisterBundles();
    }

    private void RegisterRoutes(AreaRegistrationContext context)
    {
        RouteConfig.RegisterRoutes(context);
    }

    private void RegisterBundles()
    {
        BundleConfig.RegisterBundles(BundleTable.Bundles);            
    }       
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-11T22:37:43.403

您的问题意味着您对每个区域都有单独的脚本和 css 文件夹？这是非常规的（尽管完全合理）。或者您在路由级别有一个脚本文件夹，并且您已将其拆分为每个区域的子文件夹？无论哪种方式，您都必须做一些稍微不同的事情才能获得特定于区域的捆绑包。

MVC4 应用程序带有一个`BundleConfig`位于 App_Start 文件夹中的静态类。然后从 Global.asax 初始化包。如果您不使用 MVC4 项目，请升级或启动一个开箱即用的 MVC4 项目以观察这些文件的布局。

捆绑包的配置只需声明一个虚拟路径（可以从中引用捆绑包），然后指定您希望捆绑的文件。可以通过显式列出文件名、文件名字符匹配或指定应包含所有文件的目录来指定要捆绑的文件。

首先，我会使用这个全局`BundleConfig`来为您的所有区域指定捆绑包。如果这不适合您或变得笨拙，您可以随时将其拆分出来。

指定应包含哪些文件。您应该在捆绑包的虚拟路径前面加上它所针对的区域。然后使用您的视图中的区域名称将很容易引用 - 很可能是您的`_Layout.cshtml`.

例如，这里我们有两个区域，每个区域都有不同的脚本：**用户**和**组**。

**App_Start/BundleConfig.cs**

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        /// Bundle For User Area
        bundles.Add(new ScriptBundle("~/user/bundles/scripts").Include(
                    "~/Scripts/User/myuserscript1.js",
                    "~/Scripts/User/myuserscript2.js"));

        /// Bundle For Group Area
        bundles.Add(new ScriptBundle("~/group/bundles/scripts").Include(
                    "~/Scripts/Group/mygroupscript1.js",
                    "~/Scripts/Group/mygroupscript2.js"));
    }
} 
```

然后，您可以使用`Scripts.Render()`主 _Layout.cshtml 上的 来呈现正确的区域包，具体取决于用户当前正在查看的区域。为此，您首先需要像这样获取当前区域：

**视图/共享/_Layout.cshtml：**

```
<head>
    @{
        var currentArea = (ViewContext.RouteData.DataTokens["area"]
                              ?? String.Empty).ToString().ToLower();
    }
    @Scripts.Render("~/" + currentArea + "/bundles/scripts")
</head> 
```

### 编辑

如果您真的想在您的区域内管理您的捆绑包，那么区域注册将是一个不错的选择。BundleConfig 中引用的 BundleTable 静态属性是全局的，因此可以在任何地方引用。这段代码可以编译，但我还没有测试过。它适用于一个名为 Test 的区域：

**区域/测试/TestAreaRegistration.cs**

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Test_default",
            "Test/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );

        BundleTable.Bundles.Add(new Bundle("~/test/bundles/scripts").Include(
                    "~/Areas/Test/Scripts/jquery.js"));
    } 
```

# wpf - 优化 WPF DrawingContext.DrawLine

> ID：13335841
> 
> 赞同：0
> 
> 时间：2012-11-11T21:51:24.057
> 
> 标签：wpf, performance, drawingcontext

除了使用

```
DrawingContext.DrawLine(pen, a, b); ? 
```

我在我的应用程序中画了很多线，99% 的时间都花在了循环调用上。

[a,b] 来自大量不断变化的点。我不需要任何输入反馈/事件或类似的东西，...我只需要非常快地绘制点。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:02:09.640

您可以尝试冻结笔。[这是可冻结对象](http://msdn.microsoft.com/de-de/library/ms750509%28v=vs.85%29.aspx)的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T11:33:33.363

这个问题真的很老，但我找到了一种改进我的代码执行的方法，它也使用了 DrawingContext.DrawLine。

这是我一小时前绘制曲线的代码：

```
DrawingVisual dv = new DrawingVisual();
DrawingContext dc = dv.RenderOpen();

foreach (SerieVM serieVm in _curve.Series) {
    Pen seriePen = new Pen(serieVm.Stroke, 1.0);
    Point lastDrawnPoint = new Point();
    bool firstPoint = true;
    foreach (CurveValuePointVM pointVm in serieVm.Points.Cast<CurveValuePointVM>()) {
        if (pointVm.XValue < xMin || pointVm.XValue > xMax) continue;

        double x = basePoint.X + (pointVm.XValue - xMin) * xSizePerValue;
        double y = basePoint.Y - (pointVm.Value - yMin) * ySizePerValue;
        Point coord = new Point(x, y);

        if (firstPoint) {
            firstPoint = false;
        } else {
            dc.DrawLine(seriePen, lastDrawnPoint, coord);
        }

        lastDrawnPoint = coord;
    }
}

dc.Close(); 
```

这是现在的代码：

```
DrawingVisual dv = new DrawingVisual();
DrawingContext dc = dv.RenderOpen();

foreach (SerieVM serieVm in _curve.Series) {
    StreamGeometry g = new StreamGeometry();
    StreamGeometryContext sgc = g.Open();

    Pen seriePen = new Pen(serieVm.Stroke, 1.0);
    bool firstPoint = true;
    foreach (CurveValuePointVM pointVm in serieVm.Points.Cast<CurveValuePointVM>()) {
        if (pointVm.XValue < xMin || pointVm.XValue > xMax) continue;

        double x = basePoint.X + (pointVm.XValue - xMin) * xSizePerValue;
        double y = basePoint.Y - (pointVm.Value - yMin) * ySizePerValue;
        Point coord = new Point(x, y);

        if (firstPoint) {
            firstPoint = false;
            sgc.BeginFigure(coord, false, false);
        } else {
            sgc.LineTo(coord, true, false);
        }
    }

    sgc.Close();
    dc.DrawGeometry(null, seriePen, g);
}

dc.Close(); 
```

旧代码需要大约 140 毫秒来绘制两条 3000 个点的曲线。新的大约需要 5 毫秒。使用 StreamGeometry 似乎比 DrawingContext.Drawline 更有效。

编辑：我正在使用 dotnet 框架 3.5 版

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:37:45.317

看来[StreamGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.streamgeometry.aspx)是要走的路。即使没有冻结它，我仍然可以获得性能提升。

# regex - 匹配不以特定序列结尾的表达式的模式

> ID：13335850
> 
> 赞同：0
> 
> 时间：2012-11-11T21:52:39.350
> 
> 标签：regex, regex-negation, regex-lookarounds

我需要一个正则表达式模式来匹配不以这样的序列结尾的字符串： `\.[A-z0-9]{2,}` 我的意思是，被检查的字符串在其末尾不能有一个点序列，然后是两个或多个字母数字字符。例如，字符串 `/home/patryk/www` and 也 `/home/patryk/www/` 应该匹配所需的模式 `/home/patryk/images/DSC002.jpg`而不应该匹配。我想这与环视（前瞻）有关，但我仍然不知道如何做到这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:54:02.500

**旧答案**

如果您的正则表达式支持它，您可以在最后使用否定的lookbehind：

```
^.*+(?<!\.\w{2,})$ 
```

这将匹配一个字符串，该字符串的结束锚点前面*没有*您不想要的 icky 序列。

请注意，正如 m.buettner 所指出的，这使用了无限长度的后视，这是 .NET 独有的功能

* * *

**新答案**

然而，经过一番挖掘，我发现可变长度的*前瞻*得到了相当广泛的支持，所以这里有一个使用这些的版本：

```
^(?:(?!\.\w{2,}$).)++$ 
```

在对答案的评论中，您已声明您不想匹配末尾带有正斜杠的字符串，这是通过简单地在前瞻中添加正斜杠来完成的。

```
^(?:(?!(\.\w{2,}|/)$).)++$ 
```

请注意，我使用`\w`的是简洁，但它允许下划线通过。如果这很重要，您可以将其替换为`[^\W_]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:05:52.727

Asad 的版本非常方便，但只有 .NET 的正则表达式引擎支持可变长度的后视（这是为什么每个正则表达式问题都应该包含所使用的语言或工具的众多原因之一）。

如果我们考虑应该匹配的可能情况，我们可以将其减少为固定长度的后视（大多数引擎都支持，除了 JavaScrpit）。这将是末尾的一个或零个字母/数字（无论是否前面`.`）或两个或多个前面没有点的字母/数字。

```
^.*(?:(?<![a-zA-Z0-9])[a-zA-Z0-9]?|(?<![a-zA-Z0-9.])[a-zA-Z0-9]{2,})$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:56:57.523

这应该这样做：

```
^(?:[^.]+|\.(?![A-Za-z0-9]{2,}$))+$ 
```

它交替匹配一个或多个除点之外的任何内容，或者如果后面没有两个或多个字母数字字符和字符串结尾的点，则它会交替匹配。

**编辑：**升级它以满足新的要求是一样的：

```
^(?:[^./]+|/(?=.)|\.(?![A-Za-z0-9]{2,}$))+$ 
```

打破它，我们有：

*   `[^./]+` # 一个或多个任意字符，除了`.`or`/`

*   `/(?=.)` # 一个斜线，只要后面至少有一个字符

*   `\.(?![A-Za-z0-9]{2,}$)`# 一个点，除非它后跟两个或多个字母数字字符，然后是字符串的结尾

* * *

另一方面：**`[A-z]`是一个错误。** 它匹配所有大写和小写 ASCII 字母，但也匹配字符`[`, `]`, `^`, `_`, 反斜杠和反引号，它们的代码点恰好位于`Z`和之间`a`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:36:09.437

很少支持可变长度后视，但您不需要：

```
^.*(?<!\.[A-z0-9][A-z0-9]?)$ 
```

# css - 使用 css 自动将不同的列样式应用于表列

> ID：13335854
> 
> 赞同：1
> 
> 时间：2012-11-11T21:53:10.380
> 
> 标签：css

在一个页面中，我有许多 HTML 表格，其中包含许多列。我需要对它们应用不同的样式。所有列将具有不同的宽度，但在表格中它们将相同，我的意思是所有表格的第一列将相同，第二列和所有列相同。

CSS 应用于表格而不是列，有没有办法我只添加 css 类，我可能不必在 html 代码中应用它们，它们会自动应用。可能使用伪列或任何其他方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:49:16.947

如果您能够使用支持 CSS 的浏览器，`nth-child()`则可以使用：

```
tr td:nth-child(even) {
    background-color: #ffa;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9eASr/1/)。

在上面的演示中，我用来`:nth-child(even)`避免对第一个`td`元素（包含行标题）进行样式设置，当然，您可以在`th`元素中包含行标题（这可能在语义上更正确），或者，要设置`odd`列（或`odd` `td`元素）而*不是*的样式`:first-child`，可以使用`:not()`选择器：

```
tr td:nth-child(odd):not(:first-child) {
    background-color: #ffa;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9eASr/2/)。

如果您受限于必须支持不支持`:nth-child()`伪类的旧浏览器，您可以使用相邻兄弟选择器（尽管这不太易于维护）：

```
td + td, /* styles the second td */
td + td + td + td { /* styles the fourth td */
    background-color: #ffa;
}

td + td + td { /* styles the third td */
    background-color: #fff;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9eASr/3/)。

尽管使用类来设置样式会更容易（即使只为(`odd`或*)*`even`提供样式：

```
.even { /* styles the cells with the class of 'even' */
    background-color: #ffa;
}

.even + td { /* styles the cell that follows the cell with the 'even' class */
    background-color: #f90;
} 
```

您还可以使用`colgroup`and`col`元素为您的列定义类：

```
<table>
    <colgroup>
        <col class="first" />
        <col class="second" />
        <col class="third" />
        <col class="fourth" />
    </colgroup>
    <thead>
        <tr>
            <th></th>
            <th>Column one</th>
            <th>Column two</th>
            <th>Column three</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Row one</td>
            <td>row one, cell one</td>
            <td>row one, cell two</td>
            <td>row one, cell three</td>
        </tr>
        <tr>
            <td>Row two</td>
            <td>row two, cell one</td>
            <td>row two, cell two</td>
            <td>row two, cell three</td>
        </tr>
    </tbody>
</table> 
```

以下面的 CSS 为例（请注意，没有理由不设置其他`col`类的样式，我只是在此演示中选择不设置）：

```
.second, .fourth {
    background-color: #ffa;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9eASr/5/)。

参考：

*   [相邻兄弟 ( `+`) 组合](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)子。
*   [`col`](https://developer.mozilla.org/en-US/docs/HTML/Element/col).
*   [`colgroup`](https://developer.mozilla.org/en-US/docs/HTML/Element/colgroup).
*   [`:first-child`](http://www.w3.org/TR/selectors/#first-child-pseudo).
*   [`:not()`](http://www.w3.org/TR/selectors/#negation).
*   [`:not()`兼容性，在 Quirksmode](http://www.quirksmode.org/css/contents.html#t37)。
*   [`:nth-child()`](http://www.w3.org/TR/selectors/#nth-child-pseudo).
*   [`:nth-child()`兼容性，在 Quirksmode](http://www.quirksmode.org/css/contents.html#t38)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:23:10.217

您可以使用 CSS3 “n-th” 选择器，但它不适用于旧浏览器。因此，您最好的解决方案是在页面加载后应用 javascript（例如 jQuery）中的更改。

```
$(function() {
    $("table tr td:nth-child(n)").css('width', '100px');
}); 
```

或者你可以添加一个类

```
$("table tr td:nth-child(n)").addClass("myWidth1"); 
```

在你的 CSS 中

```
.myWidth1{ width: 100px } 
```

确保表格选择器捕获所有表格。

# node.js - 有没有更好的方法在 Node.js 中构造全局变量？

> ID：13335860
> 
> 赞同：1
> 
> 时间：2012-11-11T21:54:00.190
> 
> 标签：node.js

试图了解构造一些变量的最佳方法。例如，在我的 Node.js Express 应用程序中，我有以下内容`app.js`：

```
var poolModule = require('generic-pool');
global.pools = {
 /* ... */
}; 
```

`pools`我跟踪 MySQL 和 Redis 池的全局变量在哪里。我也想知道我是否可以对实际的 Redis 和 MySQL 对象（可能还有 configs 变量）做同样的事情，所以我不必在整个应用程序中都要求它们。而且因为它们将被使用得最多。

这是不好的做法吗？如果是，那么构建这种代码的更好方法是什么？

**编辑：**添加`global.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:53:50.520

如果你需要一个文件，你实际上总是需要同一个对象。这意味着你可以这样做：

```
module.exports = {
  // same object for everybody that requires me
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:28:55.640

您有正确的想法，但您想使用`module.exports`将对象导出为模块。CommonJS 的方法是在模块内有局部变量，在模块外使用导出的变量。通过这种方式，模块可以通过使用`require`. 这些变量并不是真正的“全局”变量，但在某种程度上更像是 C++ 中的“朋友”类。实际上，您可以让 poolModule 做的不仅仅是为您存储变量——您也可以在其中放置方法和其他功能，并使其在整个应用程序中可重用。

# visual-studio-2012 - 在动态磁贴中循环图像

> ID：13335865
> 
> 赞同：1
> 
> 时间：2012-11-11T21:55:02.827
> 
> 标签：visual-studio-2012, winjs

我有一个**winJS**应用程序，它是 Steam 游戏的工作启动器。我想让它在不运行的情况下循环浏览 5 张图像。

它只使用*小*图块——这个应用程序没有宽图块图像。

这是代码：

```
(function () {
"use strict";

WinJS.Namespace.define("Steam", {
    launch: function launch(url) {
        var uri = new Windows.Foundation.Uri(url);

        Windows.System.Launcher.launchUriAsync(uri).then(
             function (success) {
                 if (success) {
                     // File launched
                     window.close();
                 } else {
                     // File launch failed
                 }
             }
        );
    }
});

WinJS.Namespace.define("Tile", { 
    enqueue: function initialize() {
        var updaterHandle = Windows.UI.Notifications.TileUpdateManager.createTileUpdaterForApplication();
        updaterHandle.enableNotificationQueue(true);
        return updaterHandle;
    },
    update: function update () {
        var template = Windows.UI.Notifications.TileTemplateType.tileSquareImage;
        var tileXml = Windows.UI.Notifications.TileUpdateManager.getTemplateContent(template);

        var randIndx = Math.floor(Math.random() * 5);
        var randUpdatetime = 1000 * 3 * (((randIndx == 0) ? 1 : 0) + 1); // let the base image stay longer

        var tileImageAttributes = tileXml.getElementsByTagName("image");

        tileImageAttributes[0].setAttribute("src", "ms-appx:///images/Borderlands2/borderlands_2_" + randIndx + "_sidyseven.png");
        tileImageAttributes[0].setAttribute("alt", "Borderlands 2");

        var tileNotification = new Windows.UI.Notifications.TileNotification(tileXml);
        var currentTime = new Date();

        tileNotification.expirationTime = new Date(currentTime.getTime() + randUpdatetime);
        tileNotification.tag = "newTile";

        var updater = Tile.enqueue();
        updater.update(tileNotification);

        setTimeout('Tile.update();', randUpdatetime);
    }
});

WinJS.Binding.optimizeBindingReferences = true;

var app = WinJS.Application;
var activation = Windows.ApplicationModel.Activation;

app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {                 
        setTimeout('Steam.launch("steam://rungameid/49520");', 800);
        args.setPromise(WinJS.UI.processAll().then(function () {
            return WinJS.Navigation.navigate("/default.html", args).then(function () {
                Tile.update();
            });
        }));
    }
};

app.start();
})(); 
```

笔记：

*   该代码当前不循环图像，而是显然永远不会改变，或者在启动后用默认图像的小视图替换*应用程序名称文本。*这会在短时间内恢复为文本，并且循环可能会重复。它从不显示不同的图像（无论是在它错误显示的小图像中，还是在主图块中）。

*   当我在调试中运行并在阶段设置断点时 `TileUpdater.update(TileNotification)`，我可以在控制台中验证 image **src**属性是否设置为我想要的随机图像：

    `>>>>tileNotification.content.getElementsByTagName("image")[0].getAttribute("src")`

    `"ms-appx:///images/Borderlands2/borderlands_2_4_sidyseven.png"`

    但这从未真正显示在瓷砖上。

*   这些图像文件包含在解决方案中，它们出现在解决方案资源管理器的正确目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:58:42.917

如果在调试中正确设置了图像 src 属性，则图像可能没有正确的“构建操作”。

在每个图像的“属性”中，将“构建操作”设置为“资源”。

![在此处输入图像描述](../Images/c5a558bd9863596a5083d6098cceacc1.png)

# mediawiki - 以编程方式获取 MediaWiki 页面的来源

> ID：13335866
> 
> 赞同：1
> 
> 时间：2012-11-11T21:55:17.067
> 
> 标签：mediawiki

是否可以通过编程方式获取 MediaWiki 页面的来源？我想编写一个执行以下操作的函数（在类似 Java 的伪代码中）：

```
public static String getWikiText(articleURL){
//return the source of the page as wiki markup
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:43:51.150

[使用action=raw](https://www.mediawiki.org/wiki/Manual%3aParameters_to_index.php#Raw)发送 HTTP 请求。（您也可以使用 API，但这更复杂。）

# c# - 在 IDisposable 处理程序中包装 ReaderWriterLockSlim

> ID：13335868
> 
> 赞同：0
> 
> 时间：2012-11-11T21:55:29.710
> 
> 标签：c#, multithreading, readerwriterlockslim

全部，

对我来说，使用 IDisposable 模式来控制 ReaderWriterLockSlim 锁似乎很自然，因为它允许在没有额外的 try/catch 块的情况下清理锁。我注意到 BCL 中没有任何东西可以处理这个常见的（ish）任务，所以我想知道我下面的代码是否真的很幼稚？我在 SO 上看到了一些与这个一般领域相关的其他问题，但没有什么能正面解决这个想法的适当性。

问题也不在于是否应该调用 ReaderWriterLockSlim 对象上的 Dispose() 方法，而只是包装器。

```
public class LockWrapper : IDisposable
{
    private readonly ReaderWriterLockSlim @lock;
    private readonly bool writeRequired;

    public LockWrapper(ReaderWriterLockSlim @lock, bool writeRequired)
    {
        this.@lock = @lock;
        this.writeRequired = writeRequired;

        if (writeRequired)
        {
            @lock.EnterWriteLock();
        }
        else
        {
            @lock.EnterReadLock();
        }
    }

    public void Dispose()
    {
        if (writeRequired && @lock.IsWriteLockHeld)
        {
            @lock.ExitWriteLock();
        }
        else if (@lock.IsReadLockHeld)
        {
            @lock.ExitReadLock();
        }
    }
} 
```

用法：

```
var @lock = new ReaderWriterLockSlim(LockRecursionPolicy.SupportsRecursion);
using(var lockWrapper = new LockWrapper(@lock, true))
{
    //do something
} 
```

# sql - t-sql 返回行中唯一值的数量

> ID：13335869
> 
> 赞同：0
> 
> 时间：2012-11-11T21:55:33.250
> 
> 标签：sql, tsql

我已经尝试了几个小时来返回，第四行会告诉我不同​​的 doman_namn 的数量。我一直在尝试添加一个 COUNT(DISTINCT doman_namn) 但是我需要一个 group by，这反过来又破坏了目的。

这是存储过程，它有两个参数：

```
@keyword[varchar](100),
@domannamn [varchar](100) 
```

它使用两个看起来像这样的表

FIRST TABLE 表 t_doman 列；域名 ID 域名

SECOND TABLE 表 t_ranking 列；排名_位置排名_日期排名_关键字排名_id_doman

我使用@keyword 在 t_ranking 表中查找正确的行，然后我在 doman_id 上加入ranking_id_doman 以获得“doman_name”，每个日期都会有一组名称，这反过来又使名称重复出现每个日期，我都需要检查有多少不同的名称并连续返回。

我需要它像这样工作：

```
Ranking position,   date,       name,  number of distinct name's
1___________________2012-11-11, tony,  3 
2___________________2012-11-11, chris, 3
3___________________2012-11-11, peter, 3
1___________________2012-11-10, tony,  3
2___________________2012-11-10, chris, 3
3___________________2012-11-10, peter, 3 
```

* * *

```
 SELECT
 ranking_position,
 CONVERT(varchar(10),ranking_date, 120),
 doman_namn
 --Here's my my attempt COUNT(DISTINCT doman_namn) as 'number_of_discint_names'
 FROM 
     (SELECT 
      ranking_position,
      ranking_date,
      ranking_id_doman
      FROM dbo.t_ranking
      WHERE ranking_keyword = 'keyword'
      AND ranking_date BETWEEN DATEADD(day, -30, GETDATE()) AND GETDATE()
      AND ranking_id_doman IN (SELECT doman_id FROM dbo.t_doman WHERE doman_namn LIKE 'doman' + '%')) as tr
JOIN dbo.t_doman td on tr.ranking_id_doman = td.doman_id
--GROUP BY doman_namn ALSO IT DOES NOT WORK
ORDER BY ranking_date ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:08:34.653

```
Declare
  @keyword nvarchar(20) = N'keyword',
  @domannamn nvarchar(20) = N'C'

Select
  r.ranking_position,
  r.ranking_date,
  d.doman_name,
  Count(r.ranking_id_doman) Over (Partition By r.ranking_date)
From
  dbo.t_ranking r
    inner join
  dbo.t_doman d
    on r.ranking_id_doman = d.doman_id
Where
  ranking_keyword = @keyword And
  ranking_date Between DateAdd(day, -30, GetDate()) And GetDate() And
  d.doman_name like @domannamn + '%'
Order By
  2, 1 
```

[http://sqlfiddle.com/#!3/ccf10/2](http://sqlfiddle.com/#!3/ccf10/2)

正如理查德指出的那样，如果您在排名日期内有重复的ranking_id_doman 值并且您想要不同的值，这将不起作用。

# mysql - rake db:create 不适用于使用 MySQL (5.5.28) 的旧版 Rails 应用程序 (2.3.5)

> ID：13335871
> 
> 赞同：2
> 
> 时间：2012-11-11T21:55:42.853
> 
> 标签：mysql, ruby-on-rails, ruby

我是一名新的 Rails 开发人员，我正在开发旧版 Rails 应用程序。每当我运行 rake db:create 命令时，都会收到无法创建数据库的错误消息。我发现了许多与此相关的 StackOverflow 问题，但在对几乎所有解决方案排列进行故障排除时，我无法解决该问题。

我创建了三个数据库（dev、prod、test），创建了对这些数据库具有所有访问权限的用户，然后运行`rake db:create`​​.

我正在运行 Mac OS X Lion、MySQL 5.5.28、Rails 2.3.5、Ruby 1.8.7。这是我的设置

```
development:
  adapter: mysql
  encoding: utf8
  database: adva_development
  username: adva
  password: ****
  host: localhost
  socket: /tmp/mysql.sock 
```

这是错误：

```
Couldn't create database for {"adapter"=>"mysql", "username"=>"adva", "host"=>"localhost", "encoding"=>"utf8", "database"=>"adva_development", "socket"=>"/tmp/mysql.sock", "password"=>"****"}, charset: utf8, collation: utf8_unicode_ci (if you set the charset manually, make sure you have a matching collation) 
```

我已经完成了以下故障排除：

1.  验证用户和密码正确，用户可以访问数据库。（双重检查用户访问权限，`SELECT * FROM mysql.db WHERE Db = 'adva_development' \G;` 用户拥有所有权限。）

2.  验证套接字是否正确。我不太了解套接字，但我可以在 /tmp/mysql.sock 中清楚地看到它。

3.  检查排序规则和字符集。我发现我已经用拉丁字符集和排序规则创建了数据库，所以我重新创建了它们。我跑了`show variables like "collation_database";`，`show variables like "character_set_database";`然后分别带着 utf8 和 utf8_unicode_ci 回来了。

4.  我按照[这个问题](https://stackoverflow.com/questions/2672756/error-creating-rails-db-using-rake-dbcreate)中的说明进行操作。卸载 mysql gem 后，我运行了以下命令，但遇到了同样的错误：

    ```
    gem install --no-rdoc --no-ri mysql -- --with-mysql-dir=/usr/local/mysql-5.5.28-osx10.6-x86_64/bin --with-mysql-config=/usr/local/mysql-5.5.28-osx10.6-x86_64/bin/mysql_config 
    ```

5.  按照 Matt 的建议，以下是 a 所`rake --trace db:create`揭示的内容：

    ```
    ** Invoke db:create (first_time)
    ** Invoke db:load_config (first_time)
    ** Invoke rails_env (first_time)
    ** Execute rails_env
    ** Execute db:load_config
    ** Execute db:create
    Couldn't create database for {"database"=>"adva_development", "adapter"=>"mysql", "host"=>"127.0.0.1", "password"=>"woof2adva", "username"=>"adva", "encoding"=>"utf8"}, charset: utf8, collation: utf8_unicode_ci (if you set the charset manually, make sure you have a matching collation) 
    ```

三天零六七个小时后，我几乎没有选择。我尝试了各种随机的东西，比如用 127.0.0.1 替换 localhost 无济于事。

我的特定环境可能有问题吗？Mac OS X Lion + MySQL 5.5.28？我计划尝试在 Linux 环境中设置所有内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T15:33:10.373

将 'localhost' 更改为 '127.0.0.1' （回送地址），希望它的作品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:36:32.133

您可以尝试将 localhost 更改为`127.0.0.1`并删除`socket`以使用 TCP/IP 而不是本地套接字。

或者尝试验证您的数据库服务器是否使用与 Rails 相同的套接字：

`mysqladmin variables | grep socket`

如果这没有帮助，请尝试使用纯 Ruby 连接到数据库服务器并创建一个新数据库：

```
require 'rubygems'
require 'mysql'

begin
  db = Mysql.new('localhost', 'root', 'yourpassword')
  db.query('create database sample_database;');
rescue Mysql::Error => e
  puts e
ensure
  db.close unless db.nil?
end 
```

看看这是否运行。您应该安装了 mysql gem ( `gem install mysql`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T16:31:40.363

确保您运行的是更新版本的[mysql gem](https://rubygems.org/gems/mysql)。我遇到了这个问题 version `2.8`。升级以`2.9`解决问题。

# javascript - 如何检查 Node.js 中是否定义了变量？

> ID：13335873
> 
> 赞同：80
> 
> 时间：2012-11-11T21:56:33.773
> 
> 标签：javascript, node.js

我正在研究 node.js 中的一个程序，它实际上是 js。

我有一个变量：

```
var query = azure.TableQuery... 
```

看起来这行代码有时没有执行。

我的问题是：

我怎样才能做到这样的条件：

```
if this variable is defined do this.
else do this. 
```

我不能在js中做`(query!= null)`

我想看看这个变量是否被定义做一些事情。这个怎么做

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-11-11T21:58:07.733

```
if ( typeof query !== 'undefined' && query )
{
  //do stuff if query is defined and not null
}
else
{

} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-11T22:14:58.657

确定属性是否存在（但不是假值）：

```
if (typeof query !== 'undefined' && query !== null){
   doStuff();
} 
```

通常使用

```
if (query){
   doStuff();
} 
```

足够了。请注意：

```
if (!query){
   doStuff();
} 
```

即使查询是具有假值（0、假、未定义或空）的现有变量，doStuff() 也会执行

顺便说一句，有一种性感的咖啡脚本可以做到这一点：

```
if object?.property? then doStuff() 
```

编译为：

```
if ((typeof object !== "undefined" && object !== null ? object.property : void 0) != null) 

{
  doStuff();
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-12-05T08:28:05.160

对我来说，像这样的表达

```
if (typeof query !== 'undefined' && query !== null){
   // do stuff
} 
```

对于我想要使用它的频率来说，它比我想要的更复杂。也就是说，测试变量是否已定义/为空是我经常做的事情。我希望这样的测试很简单。为了解决这个问题，我首先尝试将上面的代码定义为一个函数，但是 node 只是给了我一个语法错误，告诉我函数调用的参数是未定义的。没用！所以，搜索并研究这一点，我找到了一个解决方案。也许不适合所有人。我的解决方案涉及使用[Sweet.js](http://sweetjs.org)定义宏。我是这样做的：

这是宏（文件名：macro.sjs）：

```
// I had to install sweet using:
// npm install --save-dev
// See: https://www.npmjs.com/package/sweetbuild
// Followed instructions from https://github.com/mozilla/sweet.js/wiki/node-loader

// Initially I just had "($x)" in the macro below. But this failed to match with 
// expressions such as "self.x. Adding the :expr qualifier cures things. See
// http://jlongster.com/Writing-Your-First-Sweet.js-Macro

macro isDefined {
  rule {
    ($x:expr)
  } => {
    (( typeof ($x) === 'undefined' || ($x) === null) ? false : true)
  }
}

// Seems the macros have to be exported
// https://github.com/mozilla/sweet.js/wiki/modules

export isDefined; 
```

这是宏的使用示例（在 example.sjs 中）：

```
function Foobar() {
    var self = this;

    self.x = 10;

    console.log(isDefined(y)); // false
    console.log(isDefined(self.x)); // true
}

module.exports = Foobar; 
```

这是主节点文件：

```
var sweet = require('sweet.js');

// load all exported macros in `macros.sjs`
sweet.loadMacro('./macro.sjs');

// example.sjs uses macros that have been defined and exported in `macros.sjs`
var Foobar = require('./example.sjs');

var x = new Foobar(); 
```

除了必须在代码中安装 Sweet、设置宏和加载 Sweet 之外，这样做的一个缺点是它会使 Node.js 中的错误报告变得复杂。它增加了第二层解析。还没有使用这么多，所以将亲眼目睹它是如何进行的。不过我喜欢 Sweet 并且我想念宏，所以会尽量坚持下去！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-11T22:05:32.457

如果您的变量未声明或定义：

```
if ( typeof query !== 'undefined' ) { ... } 
```

如果您的变量已声明但未定义。（假设这里的情况是变量可能未定义，但它可以是任何其他虚假值，例如`false`or `""`）

```
if ( query ) { ... } 
```

如果您的变量已声明但可以是`undefined`or `null`：

```
if ( query != null ) { ... } // undefined == null 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-10T19:43:17.767

对于简单的任务，我经常这样做：

```
var undef;

// Fails on undefined variables
if (query !== undef) {
    // variable is defined
} else {
    // else do this
} 
```

或者，如果您也只想检查空值..

```
var undef;

// Fails on undefined variables
// And even fails on null values
if (query != undef) {
    // variable is defined and not null
} else {
    // else do this
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-02T17:30:31.117

听起来您正在对对象进行属性检查！如果您想检查某个属性是否存在（但除了真值之外，还可以是 null 或 0 等值），**in**运算符可以提供一些不错的语法。

```
var foo = { bar: 1234, baz: null };
console.log("bar in foo:", "bar" in foo); // true
console.log("baz in foo:", "baz" in foo); // true
console.log("otherProp in foo:", "otherProp" in foo) // false
console.log("__proto__ in foo:", "__proto__" in foo) // true 
```

如您所见，**__proto__**属性将被扔到这里。这适用于所有继承的属性。为了进一步阅读，我推荐 MDN 页面：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-21T14:44:44.500

您可以使用双感叹号`!!`来检查某些内容是否已定义且不为空。

[![在此处输入图像描述](../Images/0db004ecd0009f96bdf9e981460aec79.png)](https://i.stack.imgur.com/wC9JJ.png)

# .htaccess - 简单的 htaccess 重定向扩展 .php

> ID：13335875
> 
> 赞同：1
> 
> 时间：2012-11-11T21:57:00.600
> 
> 标签：.htaccess, redirect, directory

我正在尝试为我的服务器执行此任务，但我不知道该怎么做。我需要将任何 url 重定向到 url.php。例如，将 domain.com/about 重定向到 domain.com\about.php。

我一直使用这段代码，这对我来说很好：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule ^([^\.]+)$ $1.php [L] 
```

问题是我需要对 domain.com/api/ 做同样的事情。在 API 文件夹中。我尝试更改脚本并添加其他类似的行，但它不能正常工作。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:09:02.250

更改`RewriteBase /`为`RewriteBase /api/`，一切都应该没问题（调用 api/about.php 等）

# webtest - Grails Canoo Webtest 插件：invoke() 无法在 POST 请求中发送 JSON 数据

> ID：13335876
> 
> 赞同：0
> 
> 时间：2012-11-11T21:57:04.847
> 
> 标签：webtest, canoo, canoo-webtest

我正在评估 Canoo Webtest 作为 Grails 插件的自动集成/功能测试。

我有一个我正在尝试测试的 REST 应用程序，但 Canoo Webtest**似乎没有在 POST 请求中正确发送 JSON 数据**。我的测试代码如下

```
invoke( description:"Add a product to shopping cart", 
        url:'shoppingCart/add', method:'POST', 
        content:'{"class":"shop.service.Product", "name":"A product", "description":"Manufactured by X", "price":99.9}'
        //contentFile: '../product.json'
        ) 
```

无论我使用 contentFile 方法还是将数据内联为内容属性，**请求正文都是空的。**测试报告显示数据已正确发送，但错误页面显示错误说明“JSONException：缺少值。在 ' 的字符 0 处。作为 GET 请求的响应的 JSON 数据恢复正常。

我已经用 curl 测试了相同的功能，它工作得非常好。Canoo Webtest 设置中是否缺少某些内容？

谢谢。

**编辑**：我正在使用 Grails 1.3.7 以防万一

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:07:05.257

好的。我开始尝试使用**invoke()**并且似乎将属性**soapAction**值设置为 true 可以解决问题。

我不知道为什么会这样。属性的[invoke() 文档说](http://webtest.canoo.com/webtest/manual/invoke.html)

```
soapAction
  Required? no
  If the HTTP method is POST and is in fact a SOAP POST request, 
  this allows the SOAP Action header to be set. Ignored for GETs. 
```

显然它设置了一些需要的请求头。没查过是哪一个。

感谢您阅读：）

尚不能将此答案标记为正确答案，但会在可能的情况下这样做。

# php - 选择自定义类函数

> ID：13335879
> 
> 赞同：1
> 
> 时间：2012-11-11T21:58:01.717
> 
> 标签：php

我有一个自定义 PHP 类，其中的方法很少。可以这样调用类方法：

```
<?php 
class someClass{
  function someMethod_somename_1(){
    echo 'somename1';       
  }

  function someMethod_somename_2(){
    echo 'somename2';   
  }
}
$obj = new someClass();
$methodName = $_GET['method_name'];
$obj->someMethod_{$methodName}(); //calling method
?> 
```

我的实际应用程序更复杂，但在这里我只提供这个简单的示例来了解主要思想。也许我可以在这里使用 eval 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:00:55.540

请不要使用[eval()](http://php.net/eval)因为它在大多数情况下都是*邪恶的。*

简单的字符串连接可以帮助您：

```
$obj->{'someMethod_'.$methodName}(); 
```

**您还应该验证用户输入！**

```
$allowedMethodNames = array('someone_2', 'someone_1');
if (!in_array($methodName, $allowedMethodNames)) {
  // ERROR!
}

// Unrestricted access but don't call a non-existing method!
$reflClass = new ReflectionClass($obj);
if (!in_array('someMethod_'.$methodName, $reflClass->getMethods())) {
  // ERROR!
}

// You can also do this
$reflClass = new ReflectionClass($obj);
try {
  $reflClass->getMethod('someMethod_'.$methodName);
}
catch (ReflectionException $e) {
  // ERROR!
}

// You can also do this as others have mentioned
call_user_func(array($obj, 'someMethod_'.$methodName)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T22:01:01.127

当然，拿这个：

```
$obj = new someClass();
$_GET['method_name'] = "somename_2";
$methodName = "someMethod_" . $_GET['method_name'];

//syntax 1
$obj->$methodName(); 

//alternatively, syntax 2
call_user_func(array($obj, $methodName)); 
```

在调用之前连接整个方法名称。

**更新：**

根据用户输入直接调用方法绝不是一个好主意。考虑之前对方法名称进行一些验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:02:14.673

您还可以利用 php 魔术方法，即[`__call()`](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)与[`call_user_func_array()`](http://www.php.net/manual/en/function.call-user-func-array.php)and结合使用[`method_exists()`](http://php.net/manual/en/function.method-exists.php)：

```
class someClass{
    public function __call($method, $args) {
         $fullMethod = 'someMethod_' . $method;
         $callback = array( $this, $fullMethod);

         if( method_exists( $this, $fullMethod)){
            return call_user_func_array( $callback, $args);
         }

         throw new Exception('Wrong method');
    }

    // ...
} 
```

为了安全起见，您可能希望创建一个禁止调用其他方法的包装器，如下所示：

```
class CallWrapper {
    protected $_object = null;

    public function __construct($object){
        $this->_object = $object;
    }

    public function __call($method, $args) {
         $fullMethod = 'someMethod_' . $method;
         $callback = array( $this->_object, $fullMethod);

         if( method_exists( $this->_object, $fullMethod)){
            return call_user_func_array( $callback, $args);
         }

         throw new Exception('Wrong method');
    }
} 
```

并将其用作：

```
$call = new CallWrapper( $obj);
$call->{$_GET['method_name']}(...); 
```

或者也许创建`execute`方法而不是添加到`someClass`方法`GetCallWrapper()`。

这样您就可以将功能很好地封装到对象（类）中，并且不必每次都复制它（如果您需要应用一些限制，例如权限检查，这可能会派上用场）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:05:58.313

可以将变量用作函数。例如，如果你有函数 foo() 你可以有一些变量 $func 并调用它。这是示例：

```
function foo() {
    echo "foo";
}

$func = 'foo';
$func(); 
```

所以它应该像`$obj->$func();`

# node.js - 使用passport.js在node.js中进行身份验证后重定向到上一页

> ID：13335881
> 
> 赞同：112
> 
> 时间：2012-11-11T21:58:17.897
> 
> 标签：node.js, authentication, redirect, express, passport.js

我正在尝试使用 node.js、express 和 passport.js 建立登录机制。登录本身工作得很好，会话也可以很好地使用 redis 存储，但是在提示进行身份验证之前将用户重定向到他开始的位置确实有一些麻烦。

例如，用户关注的链接`http://localhost:3000/hidden`然后被重定向到`http://localhost:3000/login`但我希望他再次被重定向回`http://localhost:3000/hidden`。

这样做的目的是，如果用户随机访问一个他需要先登录的页面，他将被重定向到 /login 站点，提供他的凭据，然后被重定向回他之前尝试访问的站点。

这是我的登录帖子

```
app.post('/login', function (req, res, next) {
    passport.authenticate('local', function (err, user, info) {
        if (err) {
            return next(err)
        } else if (!user) { 
            console.log('message: ' + info.message);
            return res.redirect('/login') 
        } else {
            req.logIn(user, function (err) {
                if (err) {
                    return next(err);
                }
                return next(); // <-? Is this line right?
            });
        }
    })(req, res, next);
}); 
```

这里是我的 ensureAuthenticated 方法

```
function ensureAuthenticated (req, res, next) {
  if (req.isAuthenticated()) { 
      return next();
  }
  res.redirect('/login');
} 
```

挂钩到`/hidden`页面

```
app.get('/hidden', ensureAuthenticated, function(req, res){
    res.render('hidden', { title: 'hidden page' });
}); 
```

登录站点的 html 输出非常简单

```
<form method="post" action="/login">

  <div id="username">
    <label>Username:</label>
    <input type="text" value="bob" name="username">
  </div>

  <div id="password">
    <label>Password:</label>
    <input type="password" value="secret" name="password">
  </div>

  <div id="info"></div>
    <div id="submit">
    <input type="submit" value="submit">
  </div>

</form> 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2014-01-16T00:16:30.207

在您的`ensureAuthenticated`方法中，将返回 url 保存在会话中，如下所示：

```
...
req.session.returnTo = req.originalUrl; 
res.redirect('/login');
... 
```

然后您可以将您的 passport.authenticate 路由更新为：

```
app.get('/auth/google/return', passport.authenticate('google'), function(req, res) {
    res.redirect(req.session.returnTo || '/');
    delete req.session.returnTo;
}); 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-11-11T22:20:07.557

我不知道护照，但我是这样做的：

我有一个在会话中使用的中间件...然后我重定向到 / `app.get('/account', auth.restrict, routes.account)`login`redirectTo`

```
auth.restrict = function(req, res, next){
    if (!req.session.userid) {
        req.session.redirectTo = '/account';
        res.redirect('/login');
    } else {
        next();
    }
}; 
```

然后在`routes.login.post`我执行以下操作：

```
var redirectTo = req.session.redirectTo || '/';
delete req.session.redirectTo;
// is authenticated ?
res.redirect(redirectTo); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-14T15:38:13.950

看看[connect-ensure-login](https://github.com/jaredhanson/connect-ensure-login)，它与 Passport 一起工作，完全可以满足您的需求！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-19T10:41:30.897

我的做事方式：

```
const isAuthenticated = (req, res, next) => {
  if (req.isAuthenticated()) {
    return next()
  }
  res.redirect( `/login?origin=${req.originalUrl}` )
}; 
```

**获取/登录**控制器：

```
if( req.query.origin )
  req.session.returnTo = req.query.origin
else
  req.session.returnTo = req.header('Referer')

res.render('account/login') 
```

**POST /登录**控制器：

```
 let returnTo = '/'
  if (req.session.returnTo) {
    returnTo = req.session.returnTo
    delete req.session.returnTo
  }

  res.redirect(returnTo); 
```

**POST /logout**控制器（不确定是否 100% ok，欢迎评论）：

```
req.logout();
res.redirect(req.header('Referer') || '/');
if (req.session.returnTo) {
  delete req.session.returnTo
} 
```

**清除 returnTo 中间件**（从会话中清除 returnTo 除了身份验证路由之外的任何路由 - 对我来说它们是 /login 和 /auth/:provider ）：

```
String.prototype.startsWith = function(needle)
{
  return(this.indexOf(needle) == 0)
}

app.use(function(req, res, next) {
  if ( !(req.path == '/login' || req.path.startsWith('/auth/')) && req.session.returnTo) {
    delete req.session.returnTo
  }
  next()
}) 
```

这种方法有**两个特点**：

*   *您可以使用isAuthenticated*中间件保护一些路由；
*   *在任何页面上*，您只需单击登录 URL，登录后*返回*该页面；

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-19T04:20:14.950

如果您使用的是[connect-ensure-login](https://github.com/jaredhanson/connect-ensure-login)，那么有一种超级简单的集成方式可以通过 Passport 使用`successReturnToOrRedirect`参数来执行此操作。使用时，passport 会将您发送回最初请求的 URL 或回退到您提供的 URL。

```
router.post('/login', passport.authenticate('local', {
  successReturnToOrRedirect: '/user/me',
  failureRedirect: '/user/login',
  failureFlash: true
})); 
```

[https://github.com/jaredhanson/connect-ensure-login#log-in-and-return-to](https://github.com/jaredhanson/connect-ensure-login#log-in-and-return-to)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-20T13:24:20.867

@chovy 和 @linuxdan 的答案有**错误**`session.returnTo`，如果用户在登录重定向后转到另一个页面（那不需要身份验证）并通过那里登录，则无法清除。因此，将此代码添加到他们的实现中：

```
// clear session.returnTo if user goes to another page after redirect to login
app.use(function(req, res, next) {
    if (req.path != '/login' && req.session.returnTo) {
        delete req.session.returnTo
    }
    next()
}) 
```

如果您从登录页面执行一些 ajax 请求，您也可以排除它们。

* * *

另一种方法**是**在`ensureAuthenticated`

```
req.flash('redirectTo', req.path)
res.redirect('/login') 
```

然后在 GET 登录

```
res.render('login', { redirectTo: req.flash('redirectTo') }) 
```

在视图中将隐藏字段添加到登录表单（jade 中的示例）

```
if (redirectTo != '')
    input(type="hidden" name="redirectTo" value="#{redirectTo}") 
```

在 POST 登录中

```
res.redirect(req.body.redirectTo || '/') 
```

请注意，redirectTo 将在第一次 GET 登录后清除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-08T14:11:34.980

实现此目的的最简单（且正确）的方法是[设置`failureRedirect`和`successRedirect`选项](http://passportjs.org/docs/authenticate#redirects)。

# ruby-on-rails - 为什么调用很多匿名函数这么慢？

> ID：13335886
> 
> 赞同：0
> 
> 时间：2012-11-11T21:59:14.930
> 
> 标签：ruby-on-rails, performance, optimization, view, lambda

从数据库中我加载了大约 1000 行。

我有一个打印表格的课程。在视图中，我几乎为每一列定义了一些规则，例如：

```
<% table.rules :date_uzp, lambda { |row| l row.date_uzp if row.date_uzp.present? } %>
<% table.rules :another_column, lambda { |row| helper_method row } %> 
```

最后，我只需调用 <%= table.print %>，它就会为 table 生成 html。

为什么我需要一个特殊的类来生成表格？表格在这个项目中是非常具体的，所以为了遵循 DRY 的原则，我有它的类..

但是有一个问题，如果我处理几乎所有的列并在它们上调用匿名函数，它会很慢。（匿名函数被调用了大约 10 000 次，我知道，这相当多，但不能这么慢） 页面加载大约 50 秒。

哪里有问题？你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:16:30.187

匿名函数在这里并不慢。肯定是函数的内容很慢。

我最喜欢的分析工具是[ruby​​-prof](https://github.com/rdp/ruby-prof)、[MiniProfiler](https://github.com/SamSaffron/MiniProfiler/tree/master/Ruby)和 puts-ing 内置的`Benchmark.measure`.

初步猜测是：

*   ^(以 O(n) 2)次运行的昂贵操作，因为在操作表时很容易进入
*   日期解析。我的经验是，一些日期解析函数很快，而另一些则可能很慢（注意到使用`date_uzp`; 不确定具体，只是指出它是一种可能性）。
*   加载 1000 个对象，然后在每个对象上加载多个关联（尤其是 has-many）。加载这么多活动记录对象可能真的很慢，特别是如果它增加了堆大小/开始触发大量垃圾收集。

编辑

好的，另一个想法。Lambdas（以及 ruby​​ 中的所有块）创建闭包来维护它们的上下文。也许您使用 lambdas 的策略是防止大量对象被垃圾收集？不过，我不确定如何建议您重构代码。我知道如何在没有闭包的情况下创建 lambda 的唯一方法是这样的：

```
def foo
  lambda {|row| helper_method row}
end 
```

但是必须有更好的方法来组织代码。

# macos - mac osx 10.8 ssh 可以工作，但 git 说无法解析主机名

> ID：13335888
> 
> 赞同：1
> 
> 时间：2012-11-11T21:59:26.107
> 
> 标签：macos, git, networking, ssh

我正在尝试通过 ssh 克隆一个远程 git repo。当我尝试 ssh 进入远程主机时，它会提示输入密码并且可以工作：

```
$ ssh gerry@5.12.221.37 
```

但是，当我尝试克隆存储库时，它会出现此错误

```
$ git clone ssh://gerry@5.12.221.37:/home/gerry/gitrepos/Test.git
ssh: Could not resolve hostname 5.12.221.37:: nodename nor servname provided, or not known
fatal: The remote end hung up unexpectedly 
```

没有任何网络问题，因为我什至可以远程登录到 5.12.221.37 端口 22。

我正在使用 mac osx 10.8，有谁知道我如何解决/解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T22:03:58.410

摆脱结肠：

`git clone ssh://gerry@5.12.221.37/home/gerry/gitrepos/Test.git`

# python - glob.iglob 结果按名称排序？

> ID：13335889
> 
> 赞同：6
> 
> 时间：2012-11-11T21:59:31.510
> 
> 标签：python, sorting, directory, glob

我需要遍历一个可能***非常***大的目录（任意大）。据我了解，常规`glob.glob`函数将*所有*匹配文件名的列表存储在内存中，但该`glob.iglob`函数使用迭代器。所以使用常规`glob.glob`函数是不可能的，因为目录中可能有***很多***文件。

我的问题是以`iglob`看似随机的顺序遍历目录。我希望它按字母顺序遍历文件。我不能一次得到所有文件名的列表，只是对它们进行排序，所以我想知道是否有一种方法可以`iglob`按字母顺序遍历目录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T22:02:36.147

不，没有，没有将目录的所有内容读入内存。操作系统按目录顺序提供文件名，如果要对它们进行排序，还需要将内容全部读入内存。

您可以在匹配的文件之后对结果进行排序，前提是该集合足够小以通过调用输出来`iglob()`放入内存：`sorted()``iglob()`

```
for filename in sorted(iglob(path)): 
```

请注意，当不递归到子目录时，`iglob()`已经[将单个目录的所有条目加载到列表中（部分原因是](https://github.com/python/cpython/blob/e7c495e32cb22a5334a75d5b0e848a8cd752717e/Lib/glob.py#L81-L85)[`fnmatch()`返回一个列表](https://github.com/python/cpython/blob/e7c495e32cb22a5334a75d5b0e848a8cd752717e/Lib/fnmatch.py#L48-L62)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:04:23.433

从`glob`模块的[文档](http://docs.python.org/2/library/glob.html)中：

> 该`glob`模块根据 Unix shell 使用的规则查找与指定模式匹配的所有路径名。不进行波浪号扩展，但`*`, `?`, 和用 表示的字符范围`[]`将被正确匹配。**这是通过协同使用`os.listdir()`**and `fnmatch.fnmatch()`函数来完成的，而不是通过实际调用子 shell 来完成。

如果我们查看文档`os.listdir`：

> os.listdir(路径)
> 
> 返回一个列表，其中包含路径给定的目录中条目的名称。 **该列表是任意顺序的**。它不包括特殊条目“。” 和 '..' 即使它们存在于目录中。

所以`glob.glob`不按字母顺序返回文件。文档中的任何地方都没有说明。依赖这种行为是一个错误。如果你想要一个有序的序列，你*必须*对结果进行排序。然后你可以很容易地想象没有办法`iglob`返回一个排序的结果，因为它甚至没有所有可用的结果。

如果内存真的是个问题，那么您有两种选择：

1.  放弃“aplhabetical order”要求，只需使用`iglob`.
2.  使用某种“桶排序”对数据进行排序，将大部分数据保存在磁盘上并将其分块加载到 RAM 中（这些技术在计算机编程艺术第 3 册中进行了解释）。这种方法会使您的程序变慢并且可能更难编写。但是，如果您真的不能将所有文件名保存在 RAM 中，那么您最终将不得不将它们保存在磁盘上。

# json - mustache 可以用来制作多语言 HTML 页面的原型吗？

> ID：13335890
> 
> 赞同：1
> 
> 时间：2012-11-11T21:59:39.877
> 
> 标签：json, templates, prototype, mustache

我正在为许多相关的 Web 应用程序构建前端原型，这些应用程序需要用 25 多种语言进行各种文本字符串测试（你知道确保为某个标题等保留的区域无论是什么语言都可以工作并且不会搞砸该设计）。

听起来 Mustache 模板可能很适合这个？

我希望我可以编写包含胡子标签的模板，然后将每种语言的示例字符串放在 JSON 文件中，然后使用某种切换（也许是备用网址来加载不同的语言？）来测试模板不同语言？

任何使用过胡子的人都可以确认这听起来是否是一个合理的用例吗？

是否有任何潜在的“陷阱”？或者，如果有人觉得有更好的方法来解决这个问题，我会全神贯注！

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:10:50.613

查看[远端](http://code.google.com/p/distal)。

您在 HTML 中编写原型并填充英文文本，然后在 HTML 中标记应替换其内容的元素。

例如，

```
<div data-qtext="main.intro">Welcome to StackOverflow</div>

<script>
var lang = {main: {intro: "Le France le StackOverflow"}};
function swap() {
  distal(document.body, lang);
}
</script> 
```

# c++ - 视觉c ++ fstream错误

> ID：13335896
> 
> 赞同：0
> 
> 时间：2012-11-11T22:00:06.620
> 
> 标签：c++, visual-c++, csv, fstream

首先，我是一名硬件程序员（HDL、uC 编程），几天前我的老板要求我用 Visual C++ 创建一个接口来控制 uC。我以前从未使用过 Visual C++，我的软件编程技能充其量只是中等水平。但是，我只有到周二才能让界面工作，因此由于我有时间框架，我不得不寻找示例并做同样的事情。所以，如果我问任何明显和愚蠢的问题，请原谅我。

在我的代码中，我必须将存储在数组中的值移动到 CSV 文件中。所以我必须使用逗号分隔我的值......但是，为了创建一个 CSV 文件，我必须使用 fstream （据我到目前为止所读的内容）。每当我使用

```
#include <fstream> 
```

我收到大量错误，例如：

```
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(244): error C3083: 'vc_attributes': the symbol to the left of a '::' must be a type
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(244): error C2039: 'YesNoMaybe' : is not a member of '`global namespace'' 
```

这是我与 fstream 相关的其余代码：

```
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;
using namespace System::IO::Ports;
#include <iostream>
#include <fstream>

      std::ofstream myfile;
            myfile.open("Data.txt");
            //find available ports
            private: void findports(void){
                         array<Object^>^ objectArray = SerialPort::GetPortNames();
                         this->comboBox4->Items->AddRange( objectArray );
                         array<String ^> ^ h = gcnew array<String ^>(24);
                         for(int i=0; i<=23; i++){
                             h[i]= String::Concat(i.ToString());
                         }
                         this->comboBox1->Items->AddRange( h );
                          array<String ^> ^ m = gcnew array<String ^>(60);
                         for(int i=0; i<=59; i++){
                             m[i]= String::Concat(i.ToString());
                         }
                         this->comboBox3->Items->AddRange( m );
                          array<String ^> ^ s = gcnew array<String ^>(24);
                         for(int i=0; i<=23; i++){
                             s[i]= String::Concat(i.ToString());
                         }
                         this->comboBox5->Items->AddRange( s );
                          array<String ^> ^ d = gcnew array<String ^>(366);
                         for(int i=0; i<=365; i++){
                             d[i]= String::Concat(i.ToString());
                         }
                         this->comboBox2->Items->AddRange( d);
                     }

        private: System::Void label1_Click(System::Object^  sender, System::EventArgs^  e) {
                 }
        private: System::Void label2_Click(System::Object^  sender, System::EventArgs^  e) {
                 }
    private: System::Void label4_Click(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void label5_Click(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void label6_Click(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

                 if((this->comboBox4->Text == String::Empty)||(this->textBox1->Text == String::Empty)||(this->textBox2->Text == String::Empty)){
                     this->textBox1->Text="missing port settings";
                     this->textBox2->Text="missing port settings";
                 }
                 else{ // start assigning
                     try{ // first make sure port isn't busy/open
                         if(!this->serialPort1->IsOpen){
                             // select the port whose name is in comboBox4 (select port)
                             this->serialPort1->PortName=this->comboBox4->Text;
                             //open the port
                             this->serialPort1->Open();

                             // sending
                             String^ name_ = this->serialPort1->PortName;
                             String^ sampling_period_ = this->comboBox5->Text;

                             String^ days_ = this->comboBox2->Text;

                             String^ hours_ = this->comboBox3->Text;

                             String^ minutes_ = this->comboBox1->Text;

                             String^ start_ = this->textBox1->Text;

                             String^ end_ = this->textBox2->Text;

                             //send data to setup timer on the microcontroller
                             this->serialPort1->WriteLine(sampling_period_);
                             this->serialPort1->WriteLine(days_);
                             this->serialPort1->WriteLine(hours_);
                             this->serialPort1->WriteLine(minutes_);
                             // send slave addresses
                             this->serialPort1->WriteLine(start_);
                             this->serialPort1->WriteLine(end_);

                             // receiving
                             int rec[100][8];
                             for (int i=0;i<sizeof(rec[0]);i++){
                                 for (int j=0;j<sizeof(rec);j++){
                                     rec[i][j]=int::Parse(this->serialPort1->ReadLine());
                                 }
                             }
                             myfile<<"ADC1"<<","<<"ADC2"<<","<<"ADC3"<<","<<"ADC4"<<","<<"ADC5"<<","<<"ADC6"<<","<<"ADC7"<<","<<"ADC8"<<endl;
                             for (int i=0;i<sizeof(rec[0]);i++){
                                 for (int j=0;j<sizeof(rec);j++){
                                     myfile<<rec[i][j]<<",";
                                 }
                                 myfile<<endl;
                             }

                         }
                         else{
                             this->textBox1->Text="Warning: port is busy or isn't open";
                             this->textBox2->Text="Warning: port is busy or isn't open";
                         }
                     }
                        catch(UnauthorizedAccessException^){
                            this->textBox1->Text="Unauthorized access";
                            this->textBox2->Text="Unauthorized access";
                        }
                     }

             }
    private: System::Void textBox1_TextChanged(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void label7_Click(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {

             }
    private: System::Void label8_Click(System::Object^  sender, System::EventArgs^  e) {
             }
    };
    } 
```

我希望在这里得到一些帮助或至少任何有用的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:05:40.100

```
#include <fstream>
std::ofstream myfile;
    myfile.open("Data.txt"); 
```

最后一行是一个语句，它只能出现在函数内部，而不是在您编写的命名空间范围内（即在任何函数体之外）。

```
44): error C3083: 'vc_attributes': the symbol to the left of a '::' must be a type
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h(244): error C2039: 'YesNoMaybe' : is not a member of '`global namespace'' 
```

此错误不可能来自您显示的代码，该代码未提及`vc_attribtues`or `YesNoMaybe`。如果您将代码简化到显示问题所需的最低限度，并发布与代码匹配的错误，您将获得更好的答案。

我不确定你期望从中得到什么，`sizeof(rec)`但它可能不是你想要的。

# java - 如何从 GAE java blobstore 上传获取文件名

> ID：13335899
> 
> 赞同：1
> 
> 时间：2012-11-11T22:00:18.890
> 
> 标签：java, google-app-engine, upload, blobstore, datastore

要将文件存储在 GAE blobstore 中，我将创建一个 jsp 来上传

```
<html>
<body>
<form action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post"     enctype="multipart/form-data">
    <input type="file" name="myFile"/> 
    <input type="file" name="myFile1"/>
    <input type="file" name="myFile2"/>
    <input type="submit" value = "Submit"/>
</form>
</body>
</html> 
```

现在，将文件名与此链接的正常方法是什么

```
blobkey=blobs.get("myFile"); 
```

我想用这个 blobkey 映射一个文件名，可能在数据存储中以供将来使用，那么如何上传文件名以让我的 servlet 使用，或者如何从这个 blobkey 派生文件名（路径可以省略）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:05:49.867

看起来它仍然使用 getParameter("filename") 东西来了解额外的信息

# ios - 一个 UIViewcontroller 使用两个视图

> ID：13335904
> 
> 赞同：2
> 
> 时间：2012-11-11T22:00:59.420
> 
> 标签：ios, uiviewcontroller

我正在为我的应用程序使用一个简单的 UIViewController，它并不太复杂。它有两页。在第一页上，我在文本框中输入数据以指示将在第二页上处理的用户可更改数据。

```
@property (weak, nonatomic) IBOutlet UITextField *routeText; 
```

当我在第二页上运行我的操作时，我使用这样的命令来访问在文本框中输入的内容：

```
NSString *variable = [[NSString alloc]initWithFormat:@"%@",self.routeLabel.text];    
self.consoleView.text = variable; 
```

但该值始终为 (null)。我对所有代码使用相同的 TravelViewController.h/.m。我的问题是：以这种方式共享它是不可接受的编码行为，还是我需要以不同的方式定义对象以便可以在视图之间共享文本？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:34:05.660

如果它是不同的视图控制器，则需要使用 @property 将文本从父视图控制器传递给子视图控制器。在第二类中声明它，当您从第一个屏幕推送到第二个屏幕时，在@property 中设置此值。之后，您可以使用 self.text 在第二个屏幕中使用它。

# javascript - 为什么body onload在chrome中不起作用

> ID：13335910
> 
> 赞同：3
> 
> 时间：2012-11-11T22:01:28.850
> 
> 标签：javascript, html

我遇到了一个问题，我的 body onload="constructor()" 没有运行。它在 Firefox 中对我来说很好，但我不明白为什么它在 chrome 中对我不起作用。这是我正在使用的代码，我创建了一个单独的文件并将所有内容删除到裸机中，以尝试找出问题所在：

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8" />
    <title>Personality Font</title>
    <link rel="stylesheet" type="text/css" href="p1.css" />
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript">
    //<![CDATA[

        function constructor(which)
        {
            console.log("IN CONSTRUCTOR"); //In Constructor
            var text = document.createElement('p');
            text.appendChild(document.createTextNode("BLAH"));
            document.getElementsByTagName('body')[0].appendChild(text);

        }

    //]]>
    </script>
</head>

<body onload = "constructor();">
    <h1>Personal Fonts: Find the Typeface that Matches Your Personality</h1>
    <form>

    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T22:05:04.883

Chrome 有一个名为 的内置函数`constructor`。调用其他函数。

# objective-c - iPhone应用程序的iPad字体大小增加

> ID：13335913
> 
> 赞同：3
> 
> 时间：2012-11-11T22:01:51.450
> 
> 标签：objective-c, ipad, uifont

我的 iPhone 应用在 iPad 上的 2x 模式下看起来很棒。唯一没有的是文字。这是我用来为某些变量定义字体大小的代码：

```
[letter setFont: [UIFont fontWithName:@"Helvetica" size:30]]; 
```

由于我在整个应用程序中使用了几种不同的字体大小，是否有一个简单的声明可以说明，如果在 iPad 上，大小：50？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T05:17:37.803

就像其他人提到的那样，通常最好有两个单独的界面 - 但如果您的特定应用程序在扩大规模时仍然运行良好，那么这应该可以解决您的问题：

利用：

```
#define IS_PAD  (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) 
```

确定应用程序是否在 iPad 上运行。然后，您可以使用三元运算符来选择合适的字体大小：

```
[letter setFont: [UIFont fontWithName:@"Helvetica" size:IS_PAD?50:30]]; 
```

这将为您在 iPad 上提供 50 的字体大小，为其他所有内容提供 30 的字体大小。

# css - Chrome/Safari 上的 CSS3 动画效果不同

> ID：13335924
> 
> 赞同：1
> 
> 时间：2012-11-11T22:03:12.663
> 
> 标签：css, skew, css-animations

我正在处理带有`skew()`变换的 CSS3 关键帧动画。我能够实现我在​​ Safari 6 中寻找的结果。但是，当我在另一个 Webkit 浏览器上查看页面时，Chrome 我得到了不同的动画结果。

这是我的代码：

HTML

```
<div id="test">
    webkit animation test
</div> 
```

CSS

```
#test {
    position: absolute;
    left: 200px;
    top: 0px;
    width: 200px;
    height: 200px;
    background-color: rgba(0,0,0,0.5);
    -webkit-animation-name: testBox;
    -webkit-animation-duration: 5s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-delay: 0s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: alternate;             /* alternate, normal */
    -webkit-animation-play-state: running;
}

@-webkit-keyframes testBox /* Safari and Chrome */ {
    0% {
        -webkit-transform: skew(70deg,0deg);
    }

    100% {
        -webkit-transform: skew(-70deg,0deg);
    }
} 
```

其他人有这个问题吗？

# ajax - 在 play2 中使用 AJAX 请求发布 JSON

> ID：13335925
> 
> 赞同：2
> 
> 时间：2012-11-11T22:03:13.057
> 
> 标签：ajax, json, post, frameworks, playframework-2.0

我正在使用播放框架 2.0.4

我有一条路线：

> POST /addMail 控制器.Application.addMail()

在我的控制器应用程序中，我定义了 addMail 方法：

```
public static Result addMail()
{
    JsonNode json = request().body().asJson();
    Long id = json.findPath("id").asLong(0);
    String email = json.findPath("email").getTextValue();
    GameScore gs = GameScore.findById(id);
    gs.setEmail(email);
    gs.save();
    return ok();
} 
```

如果我通过 CURL 调用此方法，我没有问题：

```
curl --header "Content-type: application/json" --request POST --data '{"id": 13, "email": "test@DB.com"}' http://localhost:9000/addMail 
```

但是，如果我通过 AJX 请求调用此方法，我将得到 500 响应。

```
$addMailBtn.click(function(event) { 
        $this = $(this);
                var id = $this.attr("id").substring(14);
        var email = $("#saisieMailField_" + id).val();
        $.ajax({
                type: 'POST',
                url: "@routes.Application.addMail()",
        dataType:"json",
        data: {"id":id, "email": '"' + email + '"'},
                success: location.reload()
        })
    } ); 
```

如果我在控制台中打印我的 json 数据，当我执行我的 ajax 请求时 json 数据为空，但通过 curl 没问题。

我试图在我的方法上添加 @BodyParser.Of(play.mvc.BodyParser.Json.class) 但它不会改变任何东西。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:14:05.287

这对我有用。请注意，我对 JSON 对象进行了字符串化，我认为这是您的问题。

```
$.ajax({
        type: "POST",
        url: "http://myservice:9000/api/v1/positions",        
        data: JSON.stringify({"nwLng":72.22,"nwLat":22.22, "seLng":22.22,"seLat":55.33}),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) { alert(data); },
        failure: function (errMsg) { alert(errMsg); }
    }); 
```

# c# - C# 程序在第二个 WebClient.DownloadString() 后停止响应

> ID：13335929
> 
> 赞同：1
> 
> 时间：2012-11-11T22:03:58.630
> 
> 标签：c#, web-services, webclient, downloadstring

我正在开发一个概念证明程序，该程序执行 webrequest`WebClient.DownloadString("http://website/members/login.php?user=" + textBox1.Text + "&pass=" + textBox2.Text);` 以获取用户是否是有效登录名的布尔值，然后如果是，它会给出成功通知，如果不是十则给出失败通知。

问题是当我第一次按下按钮尝试登录时它工作正常，但是当我再次按下它时，程序冻结并卡在 Webclient.download 字符串中。

如果有人能发现并告诉我出了什么问题，那就太好了。我提供以下代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Text;
using System.Net;
using System.IO;
using System.Diagnostics;
using System.Net;
using System.Collections;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public static WebClient webclient = new WebClient();

        HttpWebResponse wResp;
        WebRequest wReq;
        bool isConnected = false;
        private String Session = "";

        public Form1()
        {
            InitializeComponent();
        }

        public Boolean checkUser(String username, String password)
        {
                String login = `webclient.DownloadString("http://connorbp.info/members/auth.php?user=" + textBox1.Text + "&pass=" + textBox2.Text);`
                Boolean bLogin = Boolean.Parse(login);
                if (bLogin)
                {
                    Session = username + "-" + password;
                }
                return bLogin;
        }

        public int CanConnect(string dUrl)
        {
            wReq = WebRequest.Create(dUrl);
            int cnt = Connect();
            return cnt;
        }

        private int Connect()
        {
            try
            {
                wResp = (HttpWebResponse)wReq.GetResponse();
                isConnected = true;
                return 1;
            }
            catch (Exception)
            {
                return 0;
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            int init = CanConnect("http://connorbp.info/members/auth.php");
            if (init == 0)
            {
                notifyIcon1.ShowBalloonTip(200, "CBP Login", "Failed to connect to server! Try again later.", ToolTipIcon.Error);
            }
            else
            {
                if(checkUser(textBox1.Text, textBox2.Text))
                {
                    notifyIcon1.ShowBalloonTip(20, "CBP Login", "Logged In!", ToolTipIcon.Info);
                }
                else
                {
                    notifyIcon1.ShowBalloonTip(20, "CBP Login", "Invalid Username/Password!", ToolTipIcon.Error);
                }
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            this.MaximizeBox = false;
            notifyIcon1.ShowBalloonTip(20, "CBP Login", "for more cool things go to http://connorbp.info", ToolTipIcon.Info);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:10:32.070

您没有关闭响应。

第二个调用试图打开已经打开的东西，因此它挂起。

# mysql - Mysql中的优化/ COUNT(*)

> ID：13335932
> 
> 赞同：0
> 
> 时间：2012-11-11T22:04:31.063
> 
> 标签：mysql

我有一个有效的查询

```
$query_list_records = "SELECT COUNT(*)
                         FROM (SELECT comment_id from myl_r_comments
                                WHERE release_id=? LIMIT ? OFFSET ?) A"; 
```

这会从第二个 SELECT 中计算所有行。

但是出于优化目的，为什么以下行不起作用？

```
$query_list_records = "SELECT COUNT(*)
                         FROM myl_r_comments
                        WHERE release_id=? LIMIT ? OFFSET ?"; 
```

我认为，对于很多行，只返回 COUNT 值比返回很多行（选择一列）然后计算它们要好。

让我知道你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:06:05.817

在第一个版本中，`LIMIT`应用了 ，然后`COUNT(*)`获取了结果：例如，子查询返回*X*记录，限制为*Y*，而`COUNT(*)`在外部查询中返回*Y*。

在第二个版本中，`COUNT(*)`所有记录中的 都被获取，然后`LIMIT`被应用（但只有一个，聚合记录要限制）：所以*X*是返回的唯一记录（但`OFFSET`可能会导致它被排除在结果集中）。

你可以改为：

```
SELECT LEAST(GREATEST(COUNT(*) - ?, 0), ?) from myl_r_comments WHERE release_id=? 
```

# ios - 使用 AVAudioPlayer 在后台播放声音序列

> ID：13335940
> 
> 赞同：1
> 
> 时间：2012-11-11T22:05:48.533
> 
> 标签：ios, avaudioplayer, audio

我想用 播放声音序列`AVAudioPlayer`。前台一切正常，但在后台我有问题。

安排下一个声音后，它会在后台播放，但下一个声音初始化失败。

如何解决这个问题？

事实上，我有声音序列和起始时刻序列。当用户触摸按钮应用程序开始播放声音时。

我使用以下代码：

```
- (void)soundScheduleNext
{
    NSURL * url = ...; // get url of next sound file

    if (soundPlayer == nil)
        soundPlayer = [AVAudioPlayer alloc];
    soundPlayer = [soundPlayer initWithContentsOfURL:url error:nil];
    soundPlayer.delegate = self;

    AVAudioSession * audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];

    // if this is a first element of sound sequence...
    if (soundSeqNext == 0)
    {
        // ... play right now
        [soundPlayer prepareToPlay];
        soundStartMoment = [soundPlayer deviceCurrentTime];

        [soundPlayer play];
    } else {
        BOOL prepareToPlayOk = [soundPlayer prepareToPlay];

        // when second element of sequence play - prepareToPlayOk is YES; when third - prepareToPlayOk is NO :(
        NSLog(@"soundScheduleNext: prepareToPlayOk = %d", (int)prepareToPlayOk, nil);

        NSTimeInterval timeMoment = ... ; // get moment of time for next sound
        [soundPlayer playAtTime:timeMoment];
    }
    soundSeqNext++;
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    [self soundScheduleNext];
} 
```

`audioPlayerDidFinishPlaying`每次声音播放结束后都会调用该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:24:42.247

音频会话设置类别后的以下行解决了该问题：

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

更多信息，请访问[https://stackoverflow.com/a/8071865/13441](https://stackoverflow.com/a/8071865/13441)

# python - Tkinter 条目和 .get() 的问题

> ID：13335945
> 
> 赞同：0
> 
> 时间：2012-11-11T22:06:07.540
> 
> 标签：python, tkinter

我的 Tkinter Entry 小部件出现问题。我只是在测试一些东西，并想让我的回调打印出我在 Entry self.a 中输入的任何内容。但我收到了这个错误。

> 文件“C:\Python27\lib\lib-tk\Tkinter.py”，第 1410 行，在**调用**中 return self.func(*args) 文件“C:/Users/Andy/testimage.py”，第 146 行，在 get print a.get(self) NameError: global name 'a' is not defined

我想知道是否有人可以告诉我我做错了什么。我正确链接了回调函数，因为如果我让它打印“aasdfasd”，它会在我按下按钮时打印出来。

```
def clicked_wbbalance(self):
    self.top = Toplevel()
    self.top.title("LASKJDF...")
    Label(self.top, text="Enter low level").grid(row=0, column=0,padx=10)
    Label(self.top, text="Enter high level").grid(row=1, column=0,padx=10)
    Label(self.top, text="Values must be between 0 to 255").grid(row=3, column=0)
    Button(self.top, text="Ok", command=self.get).grid(row=3, column = 1)

    self.a =Entry(self.top).grid(row=0, column=1,padx=10)
    self.b =Entry(self.top).grid(row=1, column=1,padx=10)

def get(self):
    print self.a.get(self) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:31:51.653

正如 RocketDonkey 所指出的，您的回溯与您发布的代码不匹配。

您编写的代码将生成如下回溯：

```
AttributeError: 'NoneType' object has no attribute 'get' 
```

根本问题是`grid`返回`None`。这意味着属性`a`和`b`将是`None`因为它们被分配了调用的结果`grid`。通过将对象创建和小部件放置在不同的行上来解决这个问题：

```
self.a = Entry(self.top)
self.b = Entry(self.top)

self.a.grid(row=0, column=1,padx=10)
self.b.grid(row=1, column=1,padx=10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:22:13.623

您回溯说`print a.get(self) NameError: global name 'a' is not defined`，但是您发布的代码使用了语法`print self.a.get(self)`（这似乎是正确的）。因此，如果您在第 146 行检查，您没有`a`以. 尝试在第 146 行前面添加，看看问题是否仍然存在。`self``a``a``self``a`

# ios - ios在http请求后解析json结果

> ID：13335948
> 
> 赞同：0
> 
> 时间：2012-11-11T22:06:25.013
> 
> 标签：ios, json

我开始构建通过 http 请求从外部服务器读取的登录表单我需要解析 json 结果以获取用户名

```
- (IBAction)getlogin:(UIButton *)sender {
    NSString *rawStrusername = [NSString stringWithFormat:@"username=%@",_username.text];
    NSString *rawStrpassword = [NSString stringWithFormat:@"password=%@",_password.text];
    NSString *post = [NSString stringWithFormat:@"%@&%@", rawStrusername, rawStrpassword];
    // NSString *post = @"rawStrusername&rawStrpassword";
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    /* NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]]; */

    NSURL *url = [NSURL URLWithString:@"http://www.othaimmarkets.com/my_services_path/user/login.json"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    [request setHTTPMethod:@"POST"];

    /* [request setValue:postLength forHTTPHeaderField:@"Content-Length"]; */

    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSURLResponse *response;
    NSError *err;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];

    NSLog(@"responseData: %@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
    //NSLog(@"responseData: %@", responseData);
} 
```

我得到这个结果：

> {"sessid":"g2ev7til6d750ducrkege0cbj2","session_name":"SESS02795057fe9e6b2fc0777bf4057b248f","user":{"uid":"617","name":"mohammed.abdelrasoul@gmail.com","mail":"mohammed .abdelrasoul@gmail.com","mode":"0","sort":"0","threshold":"0","theme":"","signature":"","signature_format": "0","created":"1316602317","access":"1352643854","login":"1352666338","status":"1","timezone":"10800","language":"ar ","图片":"","init":"mohammed.abdelrasoul@gmail.com","数据":"a:5:{s:18:\"country_iso_code_2\";s:2:\"SA\";s:13:\"timezone_name\";s:11:\"Asia/Riyadh\";s:5 :\"block\";a:1:{s:7:\"webform\";a:1:{s:15:\"client-block-88\";i:1;}}s:13 :\"form_build_id\";s:37:\"form-3ae73833f08accc7abe5517347ea87eb\";s:7:\"contact\";i:0;}","country_iso_code_2":"SA","timezone_name":"亚洲/利雅得","block":{"webform":{"client-block-88":1}},"form_build_id":"form-3ae73833f08accc7abe5517347ea87eb","contact":0,"roles":{"2" :"认证用户"}}}webform\";a:1:{s:15:\"client-block-88\";i:1;}}s:13:\"form_build_id\";s:37:\"form-3ae73833f08accc7abe5517347ea87eb\" ;s:7:\"contact\";i:0;}","country_iso_code_2":"SA","timezone_name":"Asia/Riyadh","block":{"webform":{"client-block -88":1}},"form_build_id":"form-3ae73833f08accc7abe5517347ea87eb","contact":0,"roles":{"2":"authenticated user"}}}webform\";a:1:{s:15:\"client-block-88\";i:1;}}s:13:\"form_build_id\";s:37:\"form-3ae73833f08accc7abe5517347ea87eb\" ;s:7:\"contact\";i:0;}","country_iso_code_2":"SA","timezone_name":"Asia/Riyadh","block":{"webform":{"client-block -88":1}},"form_build_id":"form-3ae73833f08accc7abe5517347ea87eb","contact":0,"roles":{"2":"authenticated user"}}}client-block-88":1}},"form_build_id":"form-3ae73833f08accc7abe5517347ea87eb","contact":0,"roles":{"2":"authenticated user"}}}client-block-88":1}},"form_build_id":"form-3ae73833f08accc7abe5517347ea87eb","contact":0,"roles":{"2":"authenticated user"}}}

或者，为了便于阅读而格式化：

```
{
   "sessid":"g2ev7til6d750ducrkege0cbj2",
   "session_name":"SESS02795057fe9e6b2fc0777bf4057b248f",
   "user":{
      "uid":"617",
      "name":"mohammed.abdelrasoul@gmail.com",
      "mail":"mohammed.abdelrasoul@gmail.com",
      "mode":"0",
      "sort":"0",
      "threshold":"0",
      "theme":"",
      "signature":"",
      "signature_format":"0",
      "created":"1316602317",
      "access":"1352643854",
      "login":"1352666338",
      "status":"1",
      "timezone":"10800",
      "language":"ar",
      "picture":"",
      "init":"mohammed.abdelrasoul@gmail.com",
      "data":"a:5:{s:18:\"country_iso_code_2\";s:2:\"SA\";s:13:\"timezone_name\";s:11:\"Asia/Riyadh\";s:5:\"block\";a:1:{s:7:\"webform\";a:1:{s:15:\"client-block-88\";i:1;}}s:13:\"form_build_id\";s:37:\"form-3ae73833f08accc7abe5517347ea87eb\";s:7:\"contact\";i:0;}",
      "country_iso_code_2":"SA",
      "timezone_name":"Asia/Riyadh",
      "block":{
         "webform":{
            "client-block-88":1
         }
      },
      "form_build_id":"form-3ae73833f08accc7abe5517347ea87eb",
      "contact":0,
      "roles":{
         "2":"authenticated user"
      }
   }
} 
```

我如何获取对象数据或解析结果以获取用户名任何帮助或示例将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:16:49.413

您需要使用 NSJSONSerialization 类方法 JSONObjectWithData:options:error: 创建一个 NSDictionary：

```
NSError *error;
NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
if (! error) {
    NSLog(@"%@",jsonDict);
}else{
    NSLog(@"%@",error.localizedDescription);
} 
```

这将使您能够查看字典，这将更容易阅读。看起来您需要使用 objectForKey:@"sessid" 来获取用户，然后使用 objectForKey@"user"，然后使用 objectForKey:@"name" 来获取名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:14:24.517

查看这个解析 json 的框架。[https://github.com/stig/json-framework/](https://github.com/stig/json-framework/)

另请查看此答案[iPhone/iOS JSON parsing tutorial](https://stackoverflow.com/questions/5813077/iphone-ios-json-parsing-tutorial)。你会找到一个教程的链接，你可以通过它来熟悉 ios 中的 json 解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:09:43.337

要扩展[rdelmar 的答案](https://stackoverflow.com/a/13336029/1271826)（我认为您应该接受），您可以使用[`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)然后导航`NSDictionary`结果以提取`userName`：

```
NSError *error;
NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:responseData
                                                         options:0
                                                           error:&error];
if (error == nil) {
    NSDictionary *userDictionary = [jsonDict objectForKey:@"user"];
    NSString *userName = [userDictionary objectForKey:@"name"];

    // do what you need with the userName

} else {
    NSLog(@"%@",error.localizedDescription);
} 
```

或者，如果使用最新版本的 Xcode，您可以用`objectForKey`更简洁的[Modern Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=405)语法替换这些引用：

```
 NSDictionary *userDictionary = jsonDict[@"user"];
    NSString *userName = userDictionary[@"name"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:22:34.553

请参阅此[答案](https://stackoverflow.com/questions/13191005/how-to-upload-sqlite-database-file-to-server-from-iphone-application-in-ios/13192071#13192071)和一些代码：

```
NSMutableData *data; // Contains data received from the URL connection declares in header

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)dataIn 
{ 
// Do it this way because connection doesn't guarantee all the data is in
POLLog(@" Tide View connection");
[data appendData:dataIn];
}

- (void) connectionDidFinishLoading:(NSURLConnection *) conn 
{

NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSDictionary *results = [jsonString JSONValue]; // This is a new category added to the NSString by SBJSON
//100 parameters
for (int n=0;n<=100;n++)
    {
        // Get all the returned results
        params[n] = [[results objectForKey:[NSString stringWithFormat:@"param%d",n]] floatValue];

    } 
```

# ruby-on-rails - Rails 生成模型 - 在 DB:migrate 之后更改模型名称

> ID：13335949
> 
> 赞同：0
> 
> 时间：2012-11-11T22:06:27.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我使用以下方法创建了一个模型：

`rails generate model SavingsItem`

然后我跑了`rake db:migrate`。

现在，我想将模型重命名为`SavingsProduct`

我做了一个 rake db:rollback 然后直接进入我的迁移文件并更改模型名称和表名称。但是，当我`rake db:migrate`再次运行时，它会在我的数据库中创建正确的表名，但`savings_item.rb`仍然会创建。

为什么会这样？

这是我的迁移文件：

```
class CreateSavingsProducts < ActiveRecord::Migration
  def change
    create_table :savings_products do |t|
      t.string :name, :limit => 50
      t.string :description, :limit => 200
      t.decimal :price, :precision => 10, :scale => 2
      t.string :buy_url, :limit => 200
      t.string :image_url, :limit => 200
      t.integer :image_width, :limit => 11
      t.integer :image_height, :limit => 11
      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:17:40.110

> 当我再次运行 rake db:migrate 时，它​​会在我的数据库中创建正确的表名，但会创建 Saving_item.rb

迁移只会改变数据库；他们不创建或更改任何文件（schema.rb 除外）。生成器是创建和更改文件的对象，包括迁移文件。

如果您已经生成了模型，您可以简单地手动更改其名称。将文件更改`class SavingsItem`为`class SavingsProduct`并将其重命名`savings_item.rb`为`savings_product.rb`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:13:24.717

我不确定是否有办法重命名模型，但您可以简单地使用`destroy`摆脱错误命名的模型。像这样：`rails destroy model model_name`

destroy 删除`generate`命令自动生成的所有文件。

# linux - 将 VirtualBox .vdi Linux 机器移动到新主机

> ID：13335950
> 
> 赞同：-1
> 
> 时间：2012-11-11T22:06:29.027
> 
> 标签：linux, ubuntu, virtualization, virtualbox, ubuntu-12.04

几个月来，我一直很高兴地使用 Ubuntu 12.04 VM 作为网络服务器，在我的 Windows 7 机器上的 VirtualBox 上运行静态 IP（从主机、桥接网络连接、从主机通过 SSH 访问和共享文件夹）通过窗户）。

在`/etc/network/interfaces`中，我有：

```
address 192.168.1.112
netmask 255.255.255.0
network 192.168.1.0
broadcast 192.168.1.255
gateway 192.168.1.1
dns-nameservers 194.168.4.100 194.168.8.100 
```

我尝试在我的 Win7 笔记本电脑上创建一个新的虚拟机，方法是复制 .vdi 并用它创建一个新的 VirtualBox 机器，然后将静态 IP 更改为`192.168.1.116`，但我没有得到任何网络......它无法 ping无论如何，当我尝试通过 SSH 连接到 VM 时，它会显示“连接被拒绝”，并且它不会出现在我的 Windows 网络中的任何位置。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:59:23.877

VirtualBox 论坛上的“Perryg”解决了这个问题：

> 编辑`/etc/udev/rules.d/70-persistent-net.rules`，或者您可以删除规则，Linux 将在下次启动时对其进行配置。

这就是它的全部。

# javascript - 动态更改div中的文本

> ID：13335952
> 
> 赞同：2
> 
> 时间：2012-11-11T22:06:45.397
> 
> 标签：javascript, jquery, css

有人可以花点时间看看这个，让我知道我的代码哪里出错了吗？

出于某种原因，单击按钮时内容 div 不会更改。
这很简单，现在我因为找不到我的错误而感到很困惑。

CSS：

```
#wrapper {
margin: 0 auto;
    width:100%;
    max-height: 133px;
font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    line-height:1.5em;
}

#buttons {
width:340px;
    float: left;
    height: 133px;
    margin: 10px 10px 0 0px;
    border-right: 1px solid #666;
}

#button1 a {
outline: none;
text-indent: -5000px;
display:block;
width:146px;
height:105px;
background-image:url(images/sprite_v2.png);
background-position: -292px 0px;
background-repeat:no-repeat;
float:left;
margin-right:20px;
}

#button1 a:hover {
background-position: -292 -105px;
}

#button1 a:active {
background-position: -292 -210px;
}

#button2 a {
outline: none;
text-indent: -5000px;
display:block;
width:146px;
height:105px;
background-image:url(images/sprite_v2.png);
background-repeat:no-repeat;
background-position: -438px 0;
float:left;
}

#button2 a:hover {
background-position: -438px -105px;
}

#button2 a:active {
background-position: -438px -210px;
}

#content {
font-family: Arial, Helvetica, sans-serif;
    float: left;
    display:block;
}

a {
text-decoration:none;
}

ul {
overflow:hidden;
    margin: 10px 0 0 8px;
    padding:0;
}

li{
    line-height:1.5em;
    display:inline;
}

#content1 {
color:#953735;
}

#content2 {
color:#604a7b;
} 
```

JavaScript：

```
$('button').bind('click', function() {
    $('div#content').html($('div#content' + ($(this).index()+1)).html());
}); 
```

HTML：

```
<div id="wrapper">
<div id="button">
    <div id="button1">
        <a href="#" name="content1"></a>
    </div>
    <div id="button2">
        <a href="#" name="content2">Reporting Administrator</a>
    </div>
</div>
    <div id="content">
        <div id="content1">
            <ul>
                <li><a href="#">Stuff1</a></li><br />
                <li><a href="#">Stuff1</a></li><br />
                <li><a href="#">Stuff1</a></li>
            </ul> 
        </div>
        <div id="content2" style="display:none;"> 
            <ul>
                <li><a href="#">Stuff2</a></li><br />
                <li><a href="#">Stuff2</a></li><br />
                <li><a href="#">Stuff2</a></li>
             </ul> 
        </div>   
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:10:06.707

选择器`$('button')`是问题所在。您不想选择按钮 - 元素，而是选择 div`#button`中的元素，对吗？

`$("#button a")`因此，如果要将事件处理程序附加到元素内的所有链接，则应将其作为选择器`#button`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:26:04.910

David Müller 认为按钮选择器是一个问题是正确的。

链接上的事件没有发生切换，因为链接的索引将为 0，因为它们都是唯一的孩子。如果事件发生在父 div 上，则切换有效。下面是一个jsfiddle和代码。

[http://jsfiddle.net/VrKsh/2/](http://jsfiddle.net/VrKsh/2/)

```
<div id="wrapper">
<div id="button">
    <div id="button1">
        <a href="#" name="content1">Content1</a>
    </div>
    <div id="button2">
        <a href="#" name="content2">Content2</a>
    </div>
</div>
<div id="content">
    <div id="content1">
        <ul>
            <li><a href="#">Stuff1</a></li><br />
            <li><a href="#">Stuff1</a></li><br />
            <li><a href="#">Stuff1</a></li>
        </ul>
    </div>
    <div id="content2" style="display:none;">
        <ul>
            <li><a href="#">Stuff2</a></li><br />
            <li><a href="#">Stuff2</a></li><br />
            <li><a href="#">Stuff2</a></li>
         </ul>
    </div>   
</div>

<script type="text/javascript">
    $('#button div').bind('click', function() {
        $('div#content div:visible').hide();
        $('div#content' + ($(this).index() + 1)).show();
    });
</script> 
```

# html - 如何使 HTML 成为 href 超链接打开一个新窗口？

> ID：13335954
> 
> 赞同：67
> 
> 时间：2012-11-11T22:06:46.480
> 
> 标签：html, hyperlink, window.location

这是我的代码：

```
<a href="http://www.google.com" onClick="window.location.href='http://www.yahoo.com';return false;" target="_blank">test</a> 
```

当你点击它时，它会把你带到雅虎，但它没有打开一个新窗口？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-11-11T22:12:28.253

```
<a href="#" onClick="window.open('http://www.yahoo.com', '_blank')">test</a> 
```

就这么简单。

或者没有 JS

```
<a href="http://yahoo.com" target="_blank">test</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-05-14T09:47:46.630

为了在新窗口中打开链接，添加 Javascript 命令

`onclick="window.open('text-link.htm', 'name','width=600,height=400')``<a>`标签内：

```
<a href="../html-link.htm" target="popup" onclick="window.open('../html-link.htm','name','width=600,height=400')">Open page in new window</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-28T06:58:30.733

当您要打开新选项卡或浏览器用户首选项设置为打开新窗口而不是选项卡时，给出的答案可能会有所帮助，因为最初的问题是关于打开新窗口而不是选项卡，这对我有用。

```
<a href="#" onClick='window.open(url, "_blank", "resizable=yes, scrollbars=yes, titlebar=yes, width=800, height=600);'>test</a> 
```

[也检查这个](https://stackoverflow.com/questions/2572333/google-chrome-window-open-workaround)

# java - 添加了对小程序调用 Javascript 函数的支持，现在从 Tomcat 获取 404 No Context

> ID：13335958
> 
> 赞同：0
> 
> 时间：2012-11-11T22:07:14.767
> 
> 标签：java, tomcat, applet

我已经从 Tomcat 6 Web 应用程序更改了嵌入在网页中的小程序，以便能够调用 Javascript 函数（导入 netscape.javascript.*;），现在突然在使用 IE9 文本访问网页时出现 404 错误：

未找到错误404。此服务器上没有上下文匹配或处理此请求。此服务器已知的上下文是：html_javascript(/html_javascript)

和 Chrome 一样。

我需要做一些额外的事情来完成这项工作吗？为什么这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:24:09.580

通过将 MAYSCRIPT 添加到 html 中的小程序标记中解决了该问题。

像这样：

```
<applet code="com.example.MyApplet.class" name="myapplet"  codebase="http://localhost:8080/example/classes" align="baseline"
 width="200" height="200" MAYSCRIPT>
<PARAM NAME="model" VALUE="models/HyaluronicAcid.xyz">
alt="Your browser understands the &lt;APPLET&gt; tag but isn't running the applet, for some reason."
Your browser is completely ignoring the &lt;APPLET&gt; tag!
</applet> 
```

# java - hibernate 集合映射 - 如何将集合所有者 ID 作为外键放入集合元素的表中？

> ID：13335964
> 
> 赞同：0
> 
> 时间：2012-11-11T22:08:31.390
> 
> 标签：java, hibernate, jakarta-ee, hibernate-mapping

我有一个类`Product`和一个类`Part`，其中每个部分只能属于一个产品。每个产品都有一个零件清单，但零件没有参考它的产品。

```
@Entity
@Table (name= "products")
class Product {
  @Id
  @GeneratedValue
  @Column(name = "Id")
  int id;

  @Column(name = "Name")
  String name;

  @???
  List<Part> myParts; 
```

部分：

```
@Entity
@Table (name= "parts")
class Part {
  @Id
  @GeneratedValue
  @Column(name = "Id")
  int id;

  @Column(name = "Name")
  String name;
} 
```

在我的数据库中，“products”表不存储有关其部件的信息，但“parts”表在“product_id”行中跟踪产品。

产品：

| 编号 | 姓名 |

部分：

| 编号 | 姓名 | 产品编号 |

我认为 OO- 和 ORM“世界”的这种相反方法是很正常的，但我不知道如何将我的对象与 Hibernate 持久化到这种结构！

对于一对多注释，我只找到了零件 ID 将存储在产品表中的示例。对于多对一，似乎我需要在零件对象中引用产品，不是吗？

我希望我错了！;)

有谁知道是否有办法在不改变我的类或表结构的情况下映射它？

（如果你能用注释而不是 xml 来解释它，我会非常非常高兴:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:35:20.843

我认为您的意思是一对多的单向映射，请尝试以下操作：

```
@OneToMany
@JoinColumn(name="product_id")
List<Part> myParts; 
```

你可以在这里看到一个例子，[`@OneToMany`](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html)。查看该链接中的“示例 3”。

* * *

注意：由于表`product_id`中有 as 外键`parts`，因此建议`Product`在类中也有一个 type 字段`Part`。

# java - Java 数组异常消息

> ID：13335966
> 
> 赞同：-1
> 
> 时间：2012-11-11T22:08:34.853
> 
> 标签：java, arrays, exception

> **可能重复：**
> [ArrayIndexOutOfBoundsException](https://stackoverflow.com/questions/4420815/arrayindexoutofboundsexception)

如何防止显示以下消息：

Test.main (Test.java:28) 处的线程“main”java.lang.ArrayIndexOutOfBoundsException 中的异常

编译此代码时：

```
int [ ] a = { 2, 7, 8, 9, 11, 16 };  
for ( int i = 0; i <= a.length; i++ ) 
      System.out.println( a[i] ); // line 28 of class Test.java 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:09:16.623

尝试

```
for ( int i = 0; i <a.length; i++ ) 
  System.out.println( a[i] ); // line 28 of class Test.java 
```

**数组索引是从零开始的**。即，**数组索引从 0 开始到 ArrayLength-1**

在您的情况下，要访问数组的最后一个索引，您必须执行`a[a.length-1]`. 因此你的循环条件应该是`i<a.length`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:09:18.697

数组中的最后一个索引是`a.length - 1`这样，您可以使用：

```
for (int i = 0; i < a.length; i++) 
```

# javascript - 在 localStorage 中导出数据以供以后重新导入

> ID：13335967
> 
> 赞同：21
> 
> 时间：2012-11-11T22:08:37.400
> 
> 标签：javascript, import, export, local-storage

我想从我的 localStorage 中导出一些项目以将其保存在外部但以某种格式保存，以便我以后可以再次导入它。

我的尝试是编写可以稍后粘贴到文本区域中的可执行代码。然后该 textare 的值将简单地被 eval()ed。

问题：存储在 localStorage 中的数据存储为

```
var data = [];
data.push('sampledata');
data.push({sample: 'object'});
localStorage.setItem('varname',data); 
```

所以它包含我不喜欢的各种字符，比如'，'等

到目前为止，我的（不工作的）解决方案是：

```
var container = $('#localDataContainer');
container.append('localStorage.setItem("cockpitLastVisited","' + localStorage.getItem("cockpitLastVisited") + '");<br/>');
container.append('localStorage.setItem("cockpit_services","' + localStorage.getItem("cockpit_services") + '");<br/>');
container.append('localStorage.setItem("cockpit_users","' + localStorage.getItem("cockpit_users") + '");'); 
```

如果我的尝试似乎没问题，那么创建可以按原样执行的代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2016-01-15T17:40:39.547

这是导入/导出整个 localStorage 的方法

**出口**

```
copy(JSON.stringify(localStorage)); 
```

这会将您的 localStorage 复制到剪贴板。（您需要两个 JSON.stringify() 来转义引号。）

**进口**

```
var data = JSON.parse(/*paste stringified JSON from clipboard*/);
Object.keys(data).forEach(function (k) {
  localStorage.setItem(k, JSON.stringify(data[k]));
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-02-01T06:08:47.623

只是杰里米的改进版本。简化流程

```
copy('var data = '+JSON.stringify(localStorage)+';Object.keys(data).forEach(function (k){localStorage.setItem(k, JSON.stringify(data[k]));});'); 
```

在您需要导出的控制台中运行它，它将本地存储内容与代码一起复制到剪贴板，然后将其粘贴到您要导入的控制台中。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-11T22:15:05.233

您可以使用 JSON.stringify（对象到字符串）将对象编码为字符串，并使用 JSON.parse（字符串到对象）将字符串解码为对象。

写入本地存储

```
localStorage.setItem("varname",JSON.stringify(originalVarname)); 
```

从本地存储读取

```
var originalVarname= JSON.parse(localStorage.getItem("varname")); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-05-19T14:11:40.057

**出口**

```
copy(JSON.stringify(JSON.stringify(localStorage))); 
```

**进口**

```
var data = JSON.parse(/*previously copied stringified JSON from clipboard*/);
Object.keys(data).forEach(function (k) {
  localStorage.setItem(k, data[k]);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-18T13:47:02.987

[只是@iceLord](https://stackoverflow.com/a/54473783)答案的现代化版本。

只需在控制台中运行它，它会将恢复 localStorage 的代码放回剪贴板。

```
copy(`Object.entries(${JSON.stringify(localStorage)})
.forEach(([k,v])=>localStorage.setItem(k,v))`) 
```

书签版

```
javascript:prompt(`localStorage from ${location.host}${new Date().toLocaleString()}`, `/* localStorage from ${location.host}${new Date().toLocaleString()}*/Object.entries(  ${JSON.stringify(localStorage)}).forEach(([k,v])=>localStorage.setItem(k,v))`) 
```

# spring - 在 glassfish 上使用 jndi 和 jpa 和 spring

> ID：13335980
> 
> 赞同：1
> 
> 时间：2012-11-11T22:10:13.697
> 
> 标签：spring, jpa, glassfish, jndi

我有一个在 glassfish 3.1 上运行的 Web 应用程序。我正在使用配置了 spring 的 JPA (Hibernate)。这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="myPU">

        <class>org.myCompany.entities.Class1</class>

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
            <property name="hibernate.show_sql" value="true" />
        </properties>

    </persistence-unit>
</persistence> 
```

这是我的 ApplicationContext.xml 的一部分：

```
<tx:annotation-driven /> 
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
    p:entityManagerFactory-ref="entityManagerFactory" />

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/myDataSource" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="myPU" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />
        </bean>
    </property>
</bean> 
```

此外，我已经在 glassfish 服务器（jdbc 连接池和资源）中声明了我的数据源，并且 JNDI 名称是“jdbc/myDataSource”。问题是，在我通过 Eclipse 的 glassfish 插件发布的本地安装 glassfish 时，它工作正常但是当我在 glassfish 安装上手动部署 war 文件时（我在我的 VPS - CentOS 上尝试过）然后我得到这个错误：

```
Error occurred during deployment: Exception while preparing the app : Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException Internal Exception: java.sql.SQLException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused. Error Code: 0\. Please see server.log for more details. 
```

出于某种原因，该应用程序使用 glassfish 的默认 derby 数据源，而不是我定义的数据源。任何人都知道为什么以及如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:08:11.643

您是否将 JDBC 资源配置为使用正确的连接池？配置了一个默认的 derby 池。也许您只是为您的资源选择了错误的池？

# sql - SQL：在计算值上使用 Max() 选择多列

> ID：13335982
> 
> 赞同：1
> 
> 时间：2012-11-11T22:10:22.423
> 
> 标签：sql

真正的基本：我有以下数据的表 T：

```
ID   StartDate  Term (months)
----------------------
1    10/1/2012   12
2    10/1/2012   24
3    12/1/2012   12 
```

我需要知道具有最大结束日期的行的 ID。我已经成功地将结束日期计算为 select max( DateAdd(month, term, StartDate) from table [这将导致 10/1/2014]

如何获取包含最大结束日期的行的 ID 值和开始日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:13:09.900

微软 SQL：

```
SELECT TOP 1 ID, StartDate
FROM T
ORDER BY DateAdd(month, term, StartDate) DESC 
```

MySQL：

```
SELECT ID, StartDate
FROM T
ORDER BY DateAdd(month, term, StartDate) DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:18:52.920

如果多个 ID 具有相同的极端“结束日期”并且您都需要它们，您可以试试这个：

```
SELECT x.id
FROM (
   SELECT id
        , RANK ( ) OVER ( ORDER BY  DateAdd(month, term, StartDate) DESC) as rn
   FROM T
   ) x
WHERE t.rn = 1 
```

# apache-flex - 从 RSS 源的 AsyncListView 中修剪空白

> ID：13335986
> 
> 赞同：0
> 
> 时间：2012-11-11T22:11:05.300
> 
> 标签：apache-flex, actionscript, rss, trim

这是来自 Flex 移动项目的一些 Flex 代码。我想将 Rss Feed 加载到具有错误空白的 IList 中。到目前为止，我知道**Stringutil.trim(String)**。但我卡在我应该使用它来使列表工作的地方。请指教。

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:studierende="services.studierende.*"
    xmlns:allgemein="services.allgemein.*"
    xmlns:veranstaltung="services.veranstaltung.*"
    xmlns:wissenschaft="services.wissenschaft.*"
    overlayControls="false">
<fx:Script>
    <![CDATA[
        import flash.net.dns.AAAARecord;

        import mx.events.FlexEvent;
        import mx.utils.StringUtil;

        protected function openmenu(event:MouseEvent):void
        {}
        protected function reload(event:MouseEvent):void
        {
            asynclist.removeAll();
            getDataResult.token = feed1.getData();
        }

        protected function loadRSS(event:FlexEvent):void
        {
            getDataResult.token = feed1.getData();
            //I guess here is a good place to trim the whitespaces. But how ?

        }

        protected function loadfeed(event:MouseEvent,rid:Number):void
        {
            var rssid:Number = rid;
            switch(rssid)
            {
                case 0:
                    asynclist.removeAll();
                    getDataResult.token = feed1.getData();
                    break;
                case 1:
                    asynclist.removeAll();
                    getDataResult.token = feed2.getData();
                    break;
                 case 2:
                    asynclist.removeAll();
                    getDataResult.token = feed3.getData();
                    break; 
                 case 3:
                    asynclist.removeAll();
                    getDataResult.token = feed4.getData();
                    break; 
            }
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <s:CallResponder id="getDataResult"/>
    <allgemein:Allgemein id="feed1"/>
    <studierende:Studierende id="feed2"/>
    <veranstaltung:Veranstaltung id="feed3"/>
    <wissenschaft:Wissenschaft id="feed4"/>
</fx:Declarations>
<s:navigationContent>
    <s:Button id="menubtn" label="Menu" click="openmenu(event)"/>
</s:navigationContent>
<s:actionContent>
    <s:Button id="reloadbtn" label="RELOAD" click="reload(event)"/>
</s:actionContent>
    <s:List id="list" left="10" right="10" top="50" bottom="10" creationComplete="loadRSS(event)"
            itemRenderer="icItemRender" labelField="title">
        <s:AsyncListView id="asynclist" list="{getDataResult.lastResult}" />
    </s:List>
<s:HGroup x="10" y="10" width="748" height="32">
    <s:Button height="32" label="Allgemein" fontSize="12" click="loadfeed(event,0)"/>
    <s:Button height="32" label="Studierende" fontSize="12" click="loadfeed(event,1)"/>
    <s:Button height="32" label="Veranstaltung" fontSize="12" click="loadfeed(event,2)"/>
    <s:Button height="32" label="Wissenschaft" fontSize="12" click="loadfeed(event,3)"/>
</s:HGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:15:28.437

我假设您想从列表的每个元素中显示的标题中修剪空白。

最简单的方法可能是使用 labelFunction。将其设置在您的列表中，如下所示：

```
<s:List id="list" left="10" right="10" top="50" bottom="10" creationComplete="loadRSS(event)"
        itemRenderer="icItemRender" labelFunction="myLabelFunction"> 
```

请注意，我删除了您的 labelField 声明。函数应该是这样的：

```
<fx:Script>
    <![CDATA[
        private function myLabelFunction(item:Object):String {
            return Stringutil.trim(item.title);
        }
    ]]>
</fx:Script> 
```

您还可以创建自定义 itemRenderer 来实现相同的最终结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:46:10.743

我通过自定义项目渲染器在 flextras 的帮助下解决了问题

```
package
{
import com.adobe.fiber.styles.Style;

import flash.events.Event;
import flash.events.MouseEvent;
import flash.geom.Rectangle;
import flash.media.StageWebView;
import flash.net.URLRequest;
import flash.net.navigateToURL;

import mx.utils.StringUtil;

import spark.components.Button;
import spark.components.IconItemRenderer;
import spark.components.Image;
import spark.components.LabelItemRenderer;
import spark.components.supportClasses.StyleableTextField;

/**
 * 
 * ASDoc comments for this item renderer class
 * 
 */
public class asListItemRenderer extends IconItemRenderer
{
    private var titleDisplay:StyleableTextField;
    private var msgDisplay:StyleableTextField;
    private var link:String;
    private var readon:Image;
    private var stagewebview:StageWebView;
    private var warning:AlertPopUp;
    public function asListItemRenderer()
    {
        //TODO: implement function
        super();
        super.labelField = "title";
        super.messageField = "description";

    }

    /**
     * @private
     *
     * Override this setter to respond to data changes
     */
    override public function set data(value:Object):void
    {
        /*super.data = value;*/
        titleDisplay.text = value.title;
        msgDisplay.text = trimMessage(value);
        link = value.link;
        // the data has changed.  push these changes down in to the 
        // subcomponents here           
    } 

    /**
     * @private
     * 
     * Override this method to create children for your item renderer 
     */ 
    override protected function createChildren():void
    {
        titleDisplay = createDataField(false, false, "bold");
        addChild(titleDisplay);
        msgDisplay = createDataField(true, true);
        addChild(msgDisplay);
        readon = new Image();
        readon.source="assets/readmore_32px.png";
        readon.width=32;
        readon.height=32;
        addChild(readon);
        readon.addEventListener(MouseEvent.CLICK,openlink);

        // super.addEventListener(MouseEvent.CLICK,openlink);
        // create any additional children for your item renderer here
    }

    private function openlink(e:Event):void
    {

        /*if(StageWebView.isSupported==true){
            stagewebview=new StageWebView();
            stagewebview.viewPort=new Rectangle(0,0,stage.width,stage.height);
            stagewebview.stage=this.stage;
            stagewebview.loadURL(link);
        }else{
            warning = new AlertPopUp();
            warning.open(this);
        }*/
    }
    /**
     * @private
     * 
     * Override this method to change how the item renderer 
     * sizes itself. For performance reasons, do not call 
     * super.measure() unless you need to.
     */ 
    override protected function measure():void
    {
        //super.measure();
        // measure all the subcomponents here and set measuredWidth, measuredHeight, 
        // measuredMinWidth, and measuredMinHeight 
        measuredHeight = measuredMinHeight = 120;
        measuredWidth = measuredMinWidth = unscaledWidth;
    }

    /**
     * @private
     * 
     * Override this method to change how the background is drawn for 
     * item renderer.  For performance reasons, do not call 
     * super.drawBackground() if you do not need to.
     */
    override protected function drawBackground(unscaledWidth:Number, 
                                               unscaledHeight:Number):void
    {
        super.drawBackground(unscaledWidth, unscaledHeight);
        // do any drawing for the background of the item renderer here              
    }

    /**
     * @private
     *  
     * Override this method to change how the background is drawn for this 
     * item renderer. For performance reasons, do not call 
     * super.layoutContents() if you do not need to.
     */

    private function createDataField(multiline:Boolean = false, wordWrap:Boolean = false, style:String = "normal"):StyleableTextField
    {
        var labelField:StyleableTextField = new StyleableTextField();
        labelField.styleName = this;
        labelField.editable = false;
        labelField.selectable = false;
        labelField.multiline = multiline;
        labelField.wordWrap = wordWrap;
        labelField.setStyle("fontSize", 14);
        labelField.setStyle("color", 0x333333);
        labelField.setStyle("fontWeight", style);
        return labelField;
    }

    override protected function layoutContents(unscaledWidth:Number, 
                                               unscaledHeight:Number):void
    {
        setElementPosition(titleDisplay, 10, 10);
        setElementSize(titleDisplay, unscaledWidth, measuredMinHeight);
        setElementPosition(msgDisplay, 10, titleDisplay.y + 30);
        setElementSize(msgDisplay, unscaledWidth-50, measuredHeight);
        setElementPosition(readon,unscaledWidth-32,44);
        setElementSize(readon,32,32);
        // super.layoutContents(unscaledWidth, unscaledHeight);
        // layout all the subcomponents here   

    }
    private function trimMessage(item:Object):String {
        return StringUtil.trim(item.description);
    }

}
} 
```

# c++ - Visual C++ 2010：LNK1104、LNK1181 - .obj 文件不会自动生成

> ID：13335987
> 
> 赞同：3
> 
> 时间：2012-11-11T22:11:24.427
> 
> 标签：c++, windows-vista, .obj

我最近在我的“Windows Vista Home Premium”机器上下载了“Microsoft Visual C++ 2010 Express”版本。我是一名试图切换到 C++ 的 Java 程序员，这非常令人沮丧：

1.  我打开 Visual C++
2.  “文件->新建->项目...”
3.  选择“Win32 应用程序”，默认，默认，默认等...“完成”
4.  右键单击解决方案（或项目）->“构建”
5.  输出窗口显示，

    ```
    ------ Build started: Project: Engine, Configuration: Debug Win32 ------
    LINK : fatal error LNK1104: cannot open file 'Debug\Engine.obj'
    ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
    ```

我有时也会收到“LNK1181”错误。问题是编译器找不到这些对象，但如果我没记错的话，编译器应该在编译期间自动生成这些 .obj 文件。我检查了 'Engine.obj' 的 'Debug' 文件夹——它是一个空文件夹。那么，为什么 Visual C++ 不创建这些 .obj 文件呢？有人可以客观地告诉我为什么 Visual C++ 不会生成这些 .obj 文件吗？

作为旁注，我有一个暗示，这可能与我的系统类型（x32 与 x64）有关。我很确定我在基于 x64 的硬件上运行“Windows Vista Home Premium (x32)”。我遇到了 Microsoft Silverlight（当然是 Microsoft！）为我提供错误 .exe 的问题，因为该网站使用我的硬件凭据来确定适合我的计算机的版本。x64 不会安装在我的机器上，但是当我转到“系统信息”时，在“系统类型”下会显示“基于 x64 的 PC”。后来安装的x32版本就好了。也许我使用的 Visual C++ 版本存在兼容性问题？

更新：我尝试安装 x64 版本的 Visual Studio 2010 - 没有。同样的问题。

引擎.cpp：

```
 // Engine.cpp : Defines the entry point for the application.
    //

    #include "stdafx.h"
    #include "Engine.h"

    #define MAX_LOADSTRING 100

    // Global Variables:
    HINSTANCE hInst;                                // current instance
    TCHAR szTitle[MAX_LOADSTRING];                  // The title bar text
    TCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name

    // Forward declarations of functions included in this code module:
    ATOM                MyRegisterClass(HINSTANCE hInstance);
    BOOL                InitInstance(HINSTANCE, int);
    LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);
    INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);

    int APIENTRY _tWinMain(HINSTANCE hInstance,
                 HINSTANCE hPrevInstance,
                 LPTSTR    lpCmdLine,
                 int       nCmdShow)
    {
        UNREFERENCED_PARAMETER(hPrevInstance);
        UNREFERENCED_PARAMETER(lpCmdLine);

// TODO: Place code here.
MSG msg;
HACCEL hAccelTable;

// Initialize global strings
LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);
LoadString(hInstance, IDC_ENGINE, szWindowClass, MAX_LOADSTRING);
MyRegisterClass(hInstance);

// Perform application initialization:
if (!InitInstance (hInstance, nCmdShow))
{
    return FALSE;
}

hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_ENGINE));

// Main message loop:
while (GetMessage(&msg, NULL, 0, 0))
{
    if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
}

return (int) msg.wParam;
}

    //
    //  FUNCTION: MyRegisterClass()
    //
    //  PURPOSE: Registers the window class.
    //
    //  COMMENTS:
    //
    //    This function and its usage are only necessary if you want this code
    //    to be compatible with Win32 systems prior to the 'RegisterClassEx'
    //    function that was added to Windows 95\. It is important to call this function
    //    so that the application will get 'well formed' small icons associated
    //    with it.
    //
    ATOM MyRegisterClass(HINSTANCE hInstance)
    {
WNDCLASSEX wcex;

wcex.cbSize = sizeof(WNDCLASSEX);

wcex.style          = CS_HREDRAW | CS_VREDRAW;
wcex.lpfnWndProc    = WndProc;
wcex.cbClsExtra     = 0;
wcex.cbWndExtra     = 0;
wcex.hInstance      = hInstance;
wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_ENGINE));
wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
wcex.lpszMenuName   = MAKEINTRESOURCE(IDC_ENGINE);
wcex.lpszClassName  = szWindowClass;
wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

return RegisterClassEx(&wcex);
    }

    //
    //   FUNCTION: InitInstance(HINSTANCE, int)
    //
    //   PURPOSE: Saves instance handle and creates main window
    //
    //   COMMENTS:
    //
    //        In this function, we save the instance handle in a global variable and
    //        create and display the main program window.
    //
    BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
    {
       HWND hWnd;

       hInst = hInstance; // Store instance handle in our global variable

       hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,
          CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);

       if (!hWnd)
       {
          return FALSE;
       }

       ShowWindow(hWnd, nCmdShow);
       UpdateWindow(hWnd);

       return TRUE;
    }

    //
    //  FUNCTION: WndProc(HWND, UINT, WPARAM, LPARAM)
    //
    //  PURPOSE:  Processes messages for the main window.
    //
    //  WM_COMMAND  - process the application menu
    //  WM_PAINT    - Paint the main window
    //  WM_DESTROY  - post a quit message and return
    //
    //
    LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
    {
int wmId, wmEvent;
PAINTSTRUCT ps;
HDC hdc;

switch (message)
{
case WM_COMMAND:
    wmId    = LOWORD(wParam);
    wmEvent = HIWORD(wParam);
    // Parse the menu selections:
    switch (wmId)
    {
    case IDM_ABOUT:
        DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
        break;
    case IDM_EXIT:
        DestroyWindow(hWnd);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    break;
case WM_PAINT:
    hdc = BeginPaint(hWnd, &ps);
    // TODO: Add any drawing code here...
    EndPaint(hWnd, &ps);
    break;
case WM_DESTROY:
    PostQuitMessage(0);
    break;
default:
    return DefWindowProc(hWnd, message, wParam, lParam);
}
return 0;
    }

    // Message handler for about box.
    INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
    {
UNREFERENCED_PARAMETER(lParam);
switch (message)
{
case WM_INITDIALOG:
    return (INT_PTR)TRUE;

case WM_COMMAND:
    if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)
    {
        EndDialog(hDlg, LOWORD(wParam));
        return (INT_PTR)TRUE;
    }
    break;
}
return (INT_PTR)FALSE;
    } 
```

引擎日志：

```
 LINK : fatal error LNK1104: cannot open file 'Debug\Engine.obj' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:19:41.020

在带有 Visual C++ 2010 的 Windows 7 x64 上进行了完全相同的尝试。似乎没问题。

这是 Visual C++ 为 Engine.cpp 生成的内容：

```
// Engine.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

这是构建输出：

```
1>------ Build started: Project: Engine, Configuration: Debug Win32 ------
1>Build started 11/11/2012 2:18:10 PM.
1>PrepareForBuild:
1>  Creating directory "c:\users\administrator\documents\visual studio 2010\Projects\Engine\Debug\".
1>InitializeBuildStatus:
1>  Creating "Debug\Engine.unsuccessfulbuild" because "AlwaysCreate" was specified.
1>ClCompile:
1>  stdafx.cpp
1>  Engine.cpp
1>LinkEmbedManifest:
1>  Engine.vcxproj -> c:\users\administrator\documents\visual studio 2010\Projects\Engine\Debug\Engine.exe
1>FinalizeBuildStatus:
1>  Deleting file "Debug\Engine.unsuccessfulbuild".
1>  Touching "Debug\Engine.lastbuildstate".
1>
1>Build succeeded.
1>
1>Time Elapsed 00:00:02.97
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:08:59.707

转到以下路径

项目 -> 属性 -> c/c++ -> 生成预处理文件

只需将其设置为否

# jquery - 在超大幻灯片下方显示内容

> ID：13335990
> 
> 赞同：0
> 
> 时间：2012-11-11T22:11:38.917
> 
> 标签：jquery, slideshow, supersized

我正在尝试在行为正常的全屏幻灯片下方显示内容。只有当您向下滚动时，才会显示剩余的内容。因此，在加载时，幻灯片的高度和宽度仍应为 100%。

我尝试放置一个与浏览器高度相同大小的边距顶部（使用 js 检测）并将幻灯片位置放置为绝对位置，但这不起作用......

很想听听您对此的看法，非常感谢！

示例： http: [//www.fabrikgrafik.be/slider/](http://www.fabrikgrafik.be/slider/) （我试图在不丢失幻灯片功能的情况下获取幻灯片下方的红色内容 div）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:29:11.100

这真的很简单，除了添加以下 2 行 jQuery 之外，不要改变任何一分钟前的内容：

```
// made edit to hide content till slideshow is rdy
$("#content-wrapper").css("margin-top", $("#supersized").height()).show();
$(window).resize(function(e) { $("#content-wrapper").css("margin-top", $("#supersized").height()); }); 
```

# [更新了 jsFiddle](http://jsfiddle.net/SpYk3/vbyRd/)

此外，您可以更改此 CSS：

```
#controls-wrapper { display: none; position: absolute; } /* from fixed */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:16:20.600

我想通了....css风格

```
 #redDivId {position:absolute; top:100%;} 
```

看看这个[**小提琴**](http://jsfiddle.net/videsignz/9wCHZ/)

# r - 数据集的剩余变量

> ID：13335994
> 
> 赞同：2
> 
> 时间：2012-11-11T22:12:22.980
> 
> 标签：r, random, matrix

我有一个包含 150 个数字的数据集，从中抽取了 100 个数字。我如何识别（放入新矩阵）剩余的 50 个？

```
X <- runif(150)
Combined <- sample(X, 100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:28:09.287

将您的样本创建为单独的向量：

```
using <- sample(1:150, 100)

Entires <- All.Entries[using]
Non.Entries <- All.Entries[-using] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:54:24.493

All numbers:

```
x <- sample(10, 150, TRUE) # as an example 
```

A random sample:

```
Combined <- sample(x,100) 
```

The remaining numbers:

```
xs <- sort(x) # sort the values of x
tab <- table(match(Combined, xs))
Remaining <- xs[-unlist(mapply(function(x, y) seq(y, length = x),
                               tab, as.numeric(names(tab))))] 
```

Note. This solution also works if `x` has duplicated values.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T22:35:20.297

### 根据您的评论更新。

如果`Combined`是 的子集`X`，要查找那些`X`不在其中的元素，`Combined`您可以使用：

```
 X[ !(X %in% Combined) ] 
```

`X %in% Combined)`当元素在和元素不在时，将为您提供`X`与 value 相同大小的逻辑向量。`TRUE``Combined``FALSE`

作为课程解释：这个逻辑向量可以用作索引。 `X[ X %in% Combined ]`会给你所有`X`这样`X`的`Combined`。

由于您正在寻求相反的否定逻辑向量`X[ !(X %in% Combined) ]`以获取`X`所有`X`不在`Combined`.

* * *

**如果`X`包含重复项**，那么您可以根据名称进行过滤（当然假设名称是唯一的）

```
X[ !(names(X) %in% names(Combined)) ] 

# or if sampling by rows
X[ !(rownames(X) %in% rownames(Combined)) ] 
```

您可以轻松地将名称分配给`X`

```
names(X) <- 1:length(X)

# or for multi-dimensional
rownames(X)  <- 1:nrow(X) 
```

另请参阅帮助文档

```
?"%in%"  # note the quotes
?which
?match 
```

* * *

或者，您可以对索引进行采样，使用负号，如下`mat[-indices,]` 示例：

```
 # Create a sample matrix of 150 rows, 3 columns
    mat <- matrix(rnorm(450), ncol=3)

    # Take a sampling of indices to the rows
    indices <- sample(nrow(mat), 100, replace=F)

    # Splice the matrix
    mat.included <- mat[indices,]
    mat.leftover <- mat[-indices,]

    # Confirm everything is of proper size
    dim(mat)
    # [1] 150   3
    dim(mat.included)
    # [1] 100   3
    dim(mat.leftover)
    # [1] 50  3 
```

# json - RavenDB (RavenHQ) 和 Twilio.MVC 和 Newtonsoft.Json 依赖

> ID：13335995
> 
> 赞同：0
> 
> 时间：2012-11-11T22:12:24.877
> 
> 标签：json, ravendb, nuget, twilio, json.net

我一直在尝试让我的应用程序与 RavenHQ 对话并安装 Twilio 帮助程序包。我已经尝试安装最新的 Raven 客户端稳定版本，需要 Newtonsoft.Json 4.0.8 以及需要 Newtonsoft.Json 4.5.7 的 RavenDB .972 客户端。Twilio 想要将 Newtonsoft.Json 4.5.7 版本更新到 4.5.10。我收到“无法找到与‘Newtonsoft.Json 4.5.10’兼容的‘RavenDB.Client’版本”关于如何继续或任何解决方法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:34:22.683

尝试以下操作：

```
Uninstall-Package Newtonsoft.Json -Force
Install-Package RavenDB.Client -version 1.0.972 
```

或者，如果您从头开始：

```
Install-Package RavenDB.Client -version 1.0.972
Install-Package RestSharp
Install-Package Twilio -IgnoreDependencies 
```

# javascript - 为什么点击设置innerHTML会触发Chrome上的两个解析事件？

> ID：13335999
> 
> 赞同：8
> 
> 时间：2012-11-11T22:13:09.127
> 
> 标签：javascript, html, google-chrome, google-chrome-devtools

使用 Chrome 开发人员工具中的时间轴，我使用这段小代码通过**innerHTML**记录事件：

```
<!DOCTYPE html>

<html>
<head>
  <script>
    function test(){
      var wrap = document.getElementById('wrapper');
      wrap.innerHTML = "test";
    }
  </script>
</head>

<body>
  <input type="button" value="click" onClick="test();"/>
  <div id="wrapper"></div>
</body>
</html> 
```

而且我可以看到，一旦运行测试方法，就会触发两个解析事件：

![显示解析双重事件的 Chrome 时间轴](../Images/7152b70e8b729cee2a7b794273dab446.png)

我正在使用 Chrome 版本 23.0.1271.64 m

这是预期的吗？它是来自 Chrome 开发者工具的错误吗？还是在 Chrome 下有什么需要改进的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:54:24.677

经过一番玩弄之后，我猜想这与 Chrome 需要解析字符串“test”然后重新解析页面有关，或者可能只是添加字符串后的“wrap”元素。innerHTML 是一个奇怪的函数，因为它允许添加任何内容，因此必须进行一些验证/解析。

如果您将功能更改为此，这有点说明问题：

```
function test() {
    var wrap = document.getElementById('wrapper');
    var newtext = document.createTextNode("test");
    wrap.appendChild(newtext);
} 
```

...然后根本不会发生解析事件。