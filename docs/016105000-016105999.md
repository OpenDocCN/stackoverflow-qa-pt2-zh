# StackOverflow 问答 16105000-16105999

# wso2 - 在 BPEL (WSO2 BPS) 中迭代 DSS 响应

> ID：16105001
> 
> 赞同：0
> 
> 时间：2013-04-19T12:48:54.377
> 
> 标签：wso2, bpel, wso2carbon, synapse

我正在使用`WSO2 BPS and WSO2 DSS`.
DSS 具有`2 services`以下功能：
（1）返回状态列表和
（2）将记录插入表中。

我成功地从`BPEL Workflow`. 但我需要实现以下目标。
我的第一个 DSS 将返回“状态列表”。我必须迭代（使用`'forEach' or 'while'`或...）该响应并从中选择特定的节点（`StatusDescription`）并将其用于下一次 DSS 调用。我的第一个 DSS 回复如下。

```
<Response xmlns="http://ws.wso2.org/dataservice">
    <Status>
        <StatusId>1</StatusId>
        <StatusDescription>Active</StatusDescription>
    </Status>
    <Status>
        <StatusId>2</StatusId>
        <StatusDescription>Inactive</StatusDescription>
    </Status>
</Response> 
```

任何人都可以建议一些可以遍历上述 DSS 响应的教程或代码片段吗？即，我`bpel:finalCounterValue`将是“2”，因为上述 XML 中有 2 个“状态”节点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:32:37.957

我找到了迭代节点的方法。请在下面找到代码片段。

```
<bpel:forEach parallel="no" counterName="Counter" name="ForEach">
            <bpel:startCounterValue>
                <![CDATA[1]]>
            </bpel:startCounterValue>
            <bpel:finalCounterValue>                
                <![CDATA[count($GetStatusPLResponse.parameters/ns:Status)]]>
            </bpel:finalCounterValue>
            <bpel:scope>
                <!-- Some activity goes here. Say Assign or Invoke or .... -->
            </bpel:scope>
        </bpel:forEach> 
```

`count`命名空间下可用的方法`xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"`帮助我们找到节点数（`'Status'`）。
该`count`方法返回值“2”，因此`'forEach'`迭代两次。

祝学习愉快。

# asp.net - 单击超链接后如何在运行时更改按钮上的文本

> ID：16105005
> 
> 赞同：1
> 
> 时间：2013-04-19T12:49:09.747
> 
> 标签：asp.net, button, gridview, runtime

我有两个文本框一个按钮和一个gridview。Q.1 当用户在文本框中输入详细信息并按下提交按钮时，我想相应地更新网格视图 Q.2 当用户点击网格视图中存在的“编辑”链接时，我想更改提交的文本按钮更新按钮。我该怎么做

我已经尝试过的：

aspx.cs 代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        this.BindGrid();
        string ID = Request.QueryString["ID"];
        cmd = new SqlCommand("Select * from UserDetails where ID='" + ID + "'", con);
        con.Open();
        ad = new SqlDataAdapter(cmd);
        dt.Clear();
        ad.Fill(dt);
        if (dt.Rows.Count > 0)
        {
            tbid.Text = ID;
            TextBox1.Text = dt.Rows[0][1].ToString();
            TextBox2.Text = dt.Rows[0][2].ToString();
        }
        con.Close();
    }
}  
protected void btnSubmit_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=Test;Integrated Security=True");
    con.Open();

    string Name = TextBox1.Text;
    string Place = TextBox2.Text;

    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = "insert into UserDetails(Name,Place) values('" + Name + "','" + Place + "')";
        cmd.Parameters.AddWithValue("@Name", TextBox1.Text);
        cmd.Parameters.AddWithValue("@Place", TextBox2.Text);
        cmd.ExecuteNonQuery();
        Label1.Text = "Record Successfully inserted";
    }
    con.Close();
    btnSubmit.Text = "Update";
    TextBox1.Text = string.Empty;
    TextBox2.Text = string.Empty;
    }
private void BindGrid()
{
    con.Open();
    ad = new SqlDataAdapter("Select * from UserDetails", con);
    ad.Fill(dt);
    GridView1.DataSource = dt;
    GridView1.DataBind();
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:51:11.177

打电话`Refresh()`没用？我不确定 ASP.NET，但你必须在 Forms 中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:19:17.553

用户提交新数据后，您可以尝试再次调用您的 bindgrid 方法，这样它会在新数据保存后重新绑定。对于编辑部分，GridView 有一个编辑模板，您可以尝试使用：http: [//msdn.microsoft.com/en-us/library/ms972948.aspx](http://msdn.microsoft.com/en-us/library/ms972948.aspx)

# blackberry - 暂停（异常 IlegalStateException）黑莓 6.0

> ID：16105007
> 
> 赞同：1
> 
> 时间：2013-04-19T12:49:22.770
> 
> 标签：blackberry, java-me, blackberry-jde

以下是在调试时显示上述异常的代码：

首先，我试图从下面的菜单项中调用一个类 HTTPConnection。

```
protected MenuItem _SelectDealerItem = new MenuItem("Select Dealer",100,10)
{
    public void run()
    {
        new HTTPConnection();
    }
}; 
```

在 HTTPConnection 类中，我正在检查连接类型并调用另一个类 TSelectDealerScreen：

```
public class HTTPConnection {

ConnectionFactory _factory = new ConnectionFactory();

public HTTPConnection()
{
    int[] _intTransports = {
            TransportInfo.TRANSPORT_TCP_WIFI,
            TransportInfo.TRANSPORT_WAP2,
            TransportInfo.TRANSPORT_TCP_CELLULAR
    };

    for(int i=0;i<_intTransports.length;i++)
    {
        int transport = _intTransports[i];
        if(!TransportInfo.isTransportTypeAvailable(transport)||!TransportInfo.hasSufficientCoverage(transport))
        {
            Arrays.removeAt(_intTransports,i);
        }
    }

    TcpCellularOptions tcpOptions = new TcpCellularOptions();

    if(!TcpCellularOptions.isDefaultAPNSet())
    {
        tcpOptions.setApn("My APN");
        tcpOptions.setTunnelAuthUsername("user");
        tcpOptions.setTunnelAuthPassword("password");
    }

    if(_intTransports.length>0)
    {
        _factory.setPreferredTransportTypes(_intTransports);
    }

    _factory.setTransportTypeOptions(TransportInfo.TRANSPORT_TCP_CELLULAR, tcpOptions);
    _factory.setAttemptsLimit(5);

    Thread t = new Thread(new Runnable()
    {
        public void run()
        {
            ConnectionDescriptor cd = _factory.getConnection("http://excellentrealtors.info/Smart-Trace/get_dealer.php");
            if(cd!=null)
            {
                Connection c = cd.getConnection();
                displayContent(c);
            }
        }
    });
    t.start();
}

private void displayContent(final Connection conn)
{
    UiApplication.getUiApplication().pushScreen(new TSelectDealerScreen(conn));
}
} 
```

在 TSelectDealerScreen 类中，我只是试图读取流，但每当我尝试调试时它都会显示非法状态异常，我对黑莓编程不太熟悉，请提供建议。

```
public class TSelectDealerScreen extends MainScreen
{
RichTextField _rtfOutput = new RichTextField();

public TSelectDealerScreen(Connection conn) 
{   
    _rtfOutput.setText("Retrieving Data.Please Wait");
    add(_rtfOutput);
    ContentReaderThread t = new ContentReaderThread(conn);
    t.start();
}

private final class ContentReaderThread extends Thread {

    private Connection _connection;

    ContentReaderThread(Connection conn)
    {
        _connection = conn;
    }

    public void run()
    {
        String result = "";
        OutputStream os = null;
        InputStream is = null;

        try
        {
            OutputConnection outputConn = (OutputConnection)_connection;
            os = outputConn.openOutputStream();
            String getCommand = "GET " + "/" + " HTTP/1.0\r\n\r\n";
            os.write(getCommand.getBytes());
            os.flush();

            // Get InputConnection and read the server's response
            InputConnection inputConn = (InputConnection) _connection;
            is = inputConn.openInputStream();
            byte[] data = net.rim.device.api.io.IOUtilities.streamToBytes(is);
            result = new String(data, "US-ASCII");
            // is.close();
            System.out.print(result);
        }
        catch(Exception e)
        {
            result = "ERROR fetching content: " + e.toString();
        }
        finally
        {
            // Close OutputStream
            if(os != null)
            {
                try
                {
                    os.close();
                }
                catch(IOException e)
                {
                }
            }

            // Close InputStream
            if(is != null)
            {
                try
                {
                    is.close();
                }
                catch(IOException e)
                {
                }
            }
            // Close Connection
            try
            {
                _connection.close();
            }
            catch(IOException ioe)
            {
            }
        }
              // Show the response received from the web server, or an error message
        showContents(result);
    }      
}

public void showContents(final String result)
{
    UiApplication.getUiApplication().invokeLater(new Runnable()
    {
        public void run()
        {
            _rtfOutput.setText(result);
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:15:04.113

在你的`HTTPConnection`课堂上，你会：

```
Thread t =  new Thread(new Runnable()
{
    public void run()
    {
        ConnectionDescriptor cd =   _factory.getConnection("http://excellentrealtors.info/Smart-Trace/get_dealer.php");
        if(cd!=null)
        {
            Connection c    =   cd.getConnection();
            displayContent(c);
        }
    }
});
t.start(); 
```

`run()`这在后台线程上运行所有内容。但是，在里面`displayContent(c)`，你做：

```
UiApplication.getUiApplication().pushScreen(new TSelectDealerScreen(conn)); 
```

这是一个 UI 操作。

**尝试从后台线程修改 UI 通常会导致`IllegalStateException`.**

我相信你只需要用`pushScreen()`这个来结束调用：

```
private void displayContent(final Connection conn) {

    final UiApplication app = UiApplication.getUiApplication();
    app.invokeLater(new Runnable() {
       public void run() {
          // this code is run on the UI thread
          app.pushScreen(new TSelectDealerScreen(conn));
       }
    });
} 
```

此外，如果您是一名 Android 开发人员，并且需要帮助做普通的后台/UI 线程工作，您可以[查看我在“将 AsyncTask 移植到 BlackBerry Java”上写的其他答案](https://stackoverflow.com/a/13010227/119114)

# xml - Linq XML - 通过父节点和子节点的组合获取不同的值

> ID：16105010
> 
> 赞同：0
> 
> 时间：2013-04-19T12:49:43.037
> 
> 标签：xml, linq, distinct, parent

我做了一个 Linq 声明希望接收 XML 文件的所有节点。

```
foreach (var node in epaXmlLoad.Root.Descendants()
                                    .DescendantNodes()
                                    .OfType<XElement>()
                                    .Distinct())
{
    newEntity = true;
    xmlModel.Node = node.Name.ToString();
    xmlModel.ParentNode = node.Parent.Name.ToString();

    model.Save(xmlModel);
} 
```

这会将节点和该节点的父节点保存在表中。

但是当我运行它时，表中会有重复的数据。我不能区分节点值，只是因为有更多同名的子节点，但在它们之上还有其他父节点。

```
<EPC>
<General>
    <Input>3</Invoer>
    <Amount>3</Amount>
    <Name>Bla</Name>
</General>
<Sectors>
    <Sector>
        <Name>Blalbla</Perc>
        <UsageID>0</UsageID>
        <Detection>0</Detection>
    <Sector>
    <Sector>
        <Name>Blalbla</Perc>
        <UsageID>0</UsageID>
        <Detection>0</Detection>
    <Sector>
<Sectors>
<Devices>
    <Device>
        <Name>Bladiebla</name>
        <Amount>5</Amount>
        <Detection>True</Detection>
    </Device>
    <Device>
        <Name>Bladiebla2</name>
        <Amount>5</Amount>
        <Detection>True</Detection>
    </Device>
<Devices> 
```

^ 这个 XML 描述了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:58:00.983

尽管您的问题对预期结果不是很清楚，但您似乎正在尝试从 XML 中删除重复节点。

XML：

```
<Parent>
  <Child>
    <Value>42</Value>
  </Child>
  <Child>
    <Value>stackoverflow</Value>
  </Child>
  <Child>
    <Value>stackoverflow</Value>
    <Grandchild>17</Grandchild>
  </Child>
  <Child>
    <Value>42</Value>
  </Child>
</Parent> 
```

应转化为：

```
<Parent>
  <Child>
    <Value>42</Value>
  </Child>
  <Child>
    <Value>stackoverflow</Value>
  </Child>
  <Child>
    <Value>stackoverflow</Value>
    <Grandchild>17</Grandchild>
  </Child>
</Parent> 
```

这需要对整个树进行递归比较。使用`Distinct`on 元素会失败，因为它没有考虑到子元素。

```
public static XElement Reduce(XElement root)
{
    XElement result = new XElement(root.Name);
    result.Add(root.Nodes().OfType<XText>());

    List<XElement> children = new List<XElement>();

    foreach (var child in root.Elements())
    {
        var reducedChild = Reduce(child);

        if (!children.Any(c => IsDuplicate(c, reducedChild)))
        {
            children.Add(reducedChild);
        }
    }

    result.Add(children);

    return result;
}

public static bool IsDuplicate(XElement element1, XElement element2)
{
    if (element1.Name != element2.Name || element1.Value != element2.Value)
    {
        return false;
    }

    var children1 = element1.Elements();
    var children2 = element2.Elements();

    if (children1.Count() != children2.Count())
    {
        return false;
    }

    return children1.Zip(children2, (c1, c2) => IsDuplicate(c1, c2)).All(isDup => isDup);
} 
```

调用`Reduce`你的根`XDocument`将建立一个`XElement`具有不同元素的新的。您现在可以将所有节点添加到模型中。

请注意，这不考虑属性。另请注意，这可能不是该工作最有效的算法。

顺便说一句：您的示例 XML 充满了错误（标签未正确关闭）。

# java - java gui程序上的llegalFormatConversionException错误

> ID：16105011
> 
> 赞同：1
> 
> 时间：2013-04-19T12:49:42.903
> 
> 标签：java

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import java.net.*;
public class NameListListenerTest extends JFrame implements ActionListener{

    static ArrayList<String> nameList_2;
    static JFrame bframe;
    static JPanel p;
    //JButton userB;

    public NameListListenerTest() {
        try {
            JButton userB;
            //ArrayList<String> ls = new ArrayList<String>();

            String str = "hiwhatsupmate#!#jake sally joe#!#asdfasdf#!#kurt#!#";

            int start = str.indexOf("#!#");
            System.out.printf("%d\n", start);
            int end = str.indexOf("#!#", start+1);
            System.out.printf("%d\n",end);
            String userNames = str.substring(start+3, end-3);
            System.out.printf("%d\n",userNames);

            int x = userNames.length();
            while(true) {
                if(x > 1) {
                    if(userNames.indexOf(" ") == 0)
                        nameList_2.add(userNames.substring(1,userNames.indexOf(" ",1)));
                    else
                        nameList_2.add(userNames.substring(0,userNames.indexOf(" ")));
                }
                else
                    break;
            }   
                p = new JPanel(new GridLayout(nameList_2.size(),1));
                for(int i=0; i<nameList_2.size(); i++){
                    userB = new JButton(nameList_2.get(i));
                    userB.addActionListener(this);
                    p.add(userB);
                }
            }  catch (Exception e) {
                        e.printStackTrace();
                }
        }
    public static void main(String args[]) {
        //nameList_2.add("kurt");       
        bframe=new NameListListenerTest();  
        bframe.add(p);      

        bframe.setLocation(32,32);          
                bframe.setSize(50,500);
        bframe.setVisible(true);                
        bframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  

    }

    public void actionPerformed(ActionEvent e) {
        JButton jb = (JButton) e.getSource();
        System.out.printf("Connectin to user\n");

    }
} 
```

我的输出是

```
13
30 
java.util.IllegalFormatConversionException: d != java.lang.String
    at java.util.Formatter$FormatSpecifier.failConversion(Unknown Source)
    at java.util.Formatter$FormatSpecifier.printInteger(Unknown Source)
    at java.util.Formatter$FormatSpecifier.print(Unknown Source)
    at java.util.Formatter.format(Unknown Source)
    at java.io.PrintStream.format(Unknown Source)
    at java.io.PrintStream.printf(Unknown Source)
    at NameListListenerTest.<init>(NameListListenerTest.java:28)
    at NameListListenerTest.main(NameListListenerTest.java:53)
Exception in thread "main" java.lang.NullPointerException
    at java.awt.Container.addImpl(Unknown Source)
    at java.awt.Container.add(Unknown Source)
    at javax.swing.JFrame.addImpl(Unknown Source)
    at java.awt.Container.add(Unknown Source)
    at NameListListenerTest.main(NameListListenerTest.java:54)
Process java exited with code 1 
```

所以我的第一个打印语句有效，但我尝试注释掉一些东西，它似乎完全一样。我之前在没有整个子字符串和while循环部分的情况下让这个程序工作，但是我手动放入了一个ArrayList，然后在构造函数中添加了四个名称

编辑：

现在我得到

```
java.lang.NullPointerException
    at NameListListenerTest.<init>(NameListListenerTest.java:36)
    at NameListListenerTest.main(NameListListenerTest.java:53)
Exception in thread "main" java.lang.NullPointerException
    at java.awt.Container.addImpl(Unknown Source)
    at java.awt.Container.add(Unknown Source)
    at javax.swing.JFrame.addImpl(Unknown Source)
    at java.awt.Container.add(Unknown Source)
    at NameListListenerTest.main(NameListListenerTest.java:54) 
```

固定后`%s`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:52:00.927

格式说明符不正确。代替

```
System.out.printf("%d\n",userNames); 
```

和

```
System.out.printf("%s\n",userNames); 
```

此外，`ArrayList` `nameList_2`从未初始化导致`NPE`如编辑所示。

```
ArrayList<String> nameList_2 = new ArrayList<>() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:05:45.430

由于 p，你得到空指针异常。我认为 `nameList_2.add(userNames.substring(0,userNames.indexOf(" ")));`有问题因此`nameList_2.size()`返回 null

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:52:56.523

问题来自：

```
System.out.printf("%d\n",userNames); 
```

System.out.printf 遵循*C printf*语法。在这种语法中，%d 代替了一个整数，但你给它的是一个字符串。

# c# - 在 SQL Server 中对大型表的查询会超时

> ID：16105023
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:50:14.607
> 
> 标签：c#, sql-server

我正在运行像 ( `Select top 10 records, joins, counts, group by`) 这样的简单查询来根据要求获取行和统计信息。表有大约 150,000 到 200,000 行。所有主键和外键都定义明确。

但是我在运行查询时随机收到超时错误。相同的查询或存储过程需要不同的时间来完成。数据库托管在共享服务器上。我将命令超时属性设置为 600，但它不起作用。我的服务提供商说如果处理未完成，系统将在 30 秒后终止查询。他们告诉我调整查询以匹配时间。

例如。

```
CREATE PROCEDURE [dbo].[NP_TableReport]  
(    
 @CreatedOnFrom datetime = NULL,  
 @CreatedOnTo datetime = NULL
)    
AS    
BEGIN  

 SELECT COUNT(ID) [Count]    
 FROM Table1
 WHERE     
     (@CreatedOnFrom IS NULL OR @CreatedOnFrom <= CreatedOn)  
 AND (@CreatedOnTo IS NULL OR @CreatedOnTo >= CreatedOn)  
END 
```

请告诉我是什么导致了随机超时错误？当我在专用服务器上尝试相同的操作时，错误消失了。有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:57:41.780

`Table1`首先在`CreateOn`字段上添加索引。

使用`count(*)`而不是`count(id)`，除非您特别想计算列中的非空值`id`。

根据您的输入值，您有四个不同的查询，因此对它们进行专门化可能会有所帮助：

```
if (@CreatedOnFrom is null and @CreatedOnTo is null) begin

  select count(*) [count]
  from Table1

end else if (@CreatedOnFrom is null) begin

  select count(*) [count]
  from Table1
  where @CreatedOnTo >= CreatedOn

end else if (@CreatedOnTo is null) begin

  select count(*) [count]
  from Table1
  where @CreatedOnFrom <= CreatedOn

end else begin

  select count(*) [count]
  from Table1
  where @CreatedOnTo >= CreatedOn and @CreatedOnFrom <= CreatedOn

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:16:14.177

如果可以事先完成，我想我不会在查询中进行太多计算。带有空值的不等式通常非常严重，IMX。

```
CREATE PROCEDURE [dbo].[NP_TableReport]  
(    
 @CreatedOnFrom datetime = NULL,  
 @CreatedOnTo datetime = NULL
)    
AS    
BEGIN  

 SET @CreatedOnFrom = COALESCE(@CreatedOnFrom, CAST('01/01/1753' as datetime))
 SET @CreatedOnTo = COALESCE(@CreatedOnTo, CAST('12/31/9999' as datetime))

 SELECT COUNT(ID) [Count]    
 FROM dbo.Table1
 WHERE CreatedOn BETWEEN @CreatedOnTo AND @CreatedOnFrom

END 
```

请注意，如果`Table1.CreatedOn`包含午夜之后的时间组件，但您只想向过程提交日期，则可能需要使用它来代替：

```
 SET @CreatedOnTo = COALESCE(DATEADD(day,1,@CreatedOnTo), CAST('12/31/9999 23:59:59' as datetime)) 
```

您甚至可以从中减去一秒以获得`DATEADD`指定日期的最后一秒。

您可以将`COALESCE`语句放入`WHERE`子句中，但我发现这更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T09:22:38.013

对于超过 200K 的元组，平均查询可能很容易需要 30 秒以上才能完成。如果您的托管服务提供商不允许查询时间超过 30 秒，请考虑使用客户端技术获取和过滤数据。如果即使这样也不起作用，那么请考虑更改您的托管服务提供商或为您的应用程序购买单独的数据库托管服务。

您已经提到您已经在“createdOn”列上创建了一个索引。我认为您的查询和数据库状态目前处于最优化的形式。只有消除托管服务提供商施加的超时限制才能解决您的问题。

# tomcat - 在 utf-8 的浏览器选项卡中打开文本文件

> ID：16105029
> 
> 赞同：2
> 
> 时间：2013-04-19T12:50:32.557
> 
> 标签：tomcat, text, utf-8, character-encoding

有这个页面，我给用户一些链接。每个链接都针对一个文本文件。当用户单击它时，它只会在浏览器选项卡中打开文本。如何将编码设置为utf8？这些文件是 utf8 格式，但没有这样显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:22:18.673

如果您的意思是由 tomcat 提供的带有 .txt 扩展名的文本/普通文件，您可以

```
<mime-mapping>  
    <extension>txt</extension>  
    <mime-type>text/plain;charset=UTF-8</mime-type>  
</mime-mapping> 
```

在你的 web.xml

# android - 与“最小宽度 600 dp”选择器混淆

> ID：16105032
> 
> 赞同：7
> 
> 时间：2013-04-19T12:50:42.417
> 
> 标签：android, android-selector

在我的应用程序中，我支持手机/平板电脑的外形尺寸并拥有单独的布局，我使用选择器“layout”（用于手机）、“layout-sw600dp”（用于平板电脑）。

以下是详细信息：

[http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html](http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html)

```
Typical numbers for screen width dp are:
320: a phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc).
480: a tweener tablet like the Streak (480x800 mdpi).
600: a 7” tablet (600x1024).
720: a 10” tablet (720x1280, 800x1280, etc). 
```

我有一个 Nexus 4 手机，以下是它的属性

```
Size:       4.7 inches
Resolution: 768 x 1280 pixels
DPI:        318
dp:         386 
Here is the dp calculation
dp = (px * 160)/dpi
dp = (768 * 160)/318 
```

当我在 dp 计算公式中使用 768 px 时，dp 值为 386，但当我通过 1280 px 时，dp 值为 644。

有了以下理解，我认为 Nexus 4 景观会从 sw600dp 读取布局，但事实并非如此。

**由于分辨率为宽 X 高，旋转设备时会反转。**

我认为这是 sw 选择器与 3.2 之前的大型、xlarge 扇区相比的即兴创作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-26T07:10:57.487

As it says in the Android documentation [here](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts) in bold (scroll down a bit to the "smallestWidth" section of Table 2):

> The smallestWidth is a fixed screen size characteristic of the device; **the device's smallestWidth does not change when the screen's orientation changes**.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-13T10:53:43.897

无论设备方向如何，sw 数字始终是两个屏幕尺寸中较短的一个。这就是名称“smallestWidth”中的“smallest”的来源。与姜饼式“大”等相比的优势。选择器只是让您获得更精细的控制，并且更可预测您实际获得的屏幕尺寸，因为它不依赖于制造商如何对他们的屏幕尺寸进行分类。

如果要根据当前方向的屏幕宽度或高度选择布局，请使用名为`layout-w600dp`or的目录`layout-h600dp`。

# cakephp - CakePHP/Croogo：搜索带有一些特殊字符的字符串不会返回任何结果

> ID：16105039
> 
> 赞同：0
> 
> 时间：2013-04-19T12:50:56.597
> 
> 标签：cakephp, croogo

我注意到在 Croogo 的 NodesController::search() 中搜索带有一些非 ascii 字符的单词时存在错误，例如“üäö”。如果我搜索“Steuergeräte”（德语），即使我应该搜索，我也没有得到任何结果。如果我搜索“Steuergerate”（德语拼写错误），我会得到想要的结果。这太奇怪了。

我工作正常的数据库上的直接查询：

"SELECT * FROM i18n WHERE content LIKE '%Steuergeräte%';"

它返回预期的记录。

但这不是 unicode-chars 的普遍问题，例如，搜索日语单词按预期工作。所以这只影响一些字符。

Cakephp：2.4.0，克鲁戈：1.4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:38:29.080

好的，我找到了问题的原因。

在搜索视图中，要搜索的字符串被清理为：

```
 $q = Sanitize::clean($this->request->params['named']['q']); 
```

`'encode' => true`当设置（默认）时，默认情况下在字符串上运行 html_entities 。这将变成例如`ö`然后`&ouml;`搜索带有 html-entities 的单词。

我通过以下方式得到了解决方法：

```
 $q = $this->request->params['named']['q'];
     // Use encode=false on Sanitize::clean to prevent äüöß etc. getting
     // replaced by html entities. And strip tags manually first to prevent
     // html injected strings.
     $q = strip_tags($q);
     $q = Sanitize::clean($q, array('encode' => false)); 
```

**注意**：如果像我的情况一样，设置 TinyMCE，`'entity_encoding' => 'raw'`则节点表中的 body 字段也将包含 äöü 而不是 htmlentities，IMO 是用 htmlentities 替换它们的更好做法。虽然默认情况下，tinymce 用 htmlentities 替换字符，因此 body 字段将与 Croogo/Cakephp 的默认搜索行为一起使用。但是，例如，在标题字段中搜索不会。

**更新**

好的，正如标记评论所建议的，消毒和使用蛋糕的分页方法是不必要的，因此可以跳过消毒部分。我还发现使用 htmlspecialchars 作为strip_tags 更好，因为strip_tags 不会处理例如'&'，而在body 上，tinyMCE 将它们保存为html_entities。所以更新后的代码如下所示：

```
 $q = htmlspecialchars($this->request->params['named']['q']);
     // go on with searching for nodes on paginate-method 
```

# c# - C# 和 VB.NET 中的接口实现

> ID：16105040
> 
> 赞同：1
> 
> 时间：2013-04-19T12:50:57.083
> 
> 标签：c#, vb.net, interface

我在`C#`项目中定义了一个接口：

```
public interface IForm
{
    bool IsDisposed { get; }
    void Show();
} 
```

我`C#`在 WinForms 的一个类中实现了它

```
public partial class Form1 : Form, IForm {  } 
```

由于方法`Show()`和属性`IsDisposed`已经存在于`System.Windows.Forms.Form`类中，我不需要实现它。

但同样不适用`VB.NET`，`VB.NET`我必须定义成员，否则会出现编译错误。

```
Public Class Form1
    Implements WindowsFormsApplication1.IForm

    Public ReadOnly Property IsDisposed1 As Boolean Implements WindowsFormsApplication1.IForm.IsDisposed
        Get

        End Get
    End Property

    Public Sub Show1() Implements WindowsFormsApplication1.IForm.Show

    End Sub
End Class 
```

如果接口成员已经存在于基类中，为什么我必须在 VB.NET 中定义它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:55:27.747

VB 没有隐式接口实现，只有显式接口实现，而 C# 两者都支持。

这意味着您必须明确说明实现接口成员的确切成员。这增加了一些灵活性，例如，您可以将实现接口成员的方法设为私有或受保护，并且可以为其命名与接口成员不同的名称。

您可以在此处阅读有关此详细信息的更多信息：http: [//ondevelopment.blogspot.se/2008/10/implementing-interfaces-in-vbnet.html](http://ondevelopment.blogspot.se/2008/10/implementing-interfaces-in-vbnet.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:55:34.857

VB.NET 允许您以不同于它实现的函数/子的方式命名函数/子。这意味着您必须`Implements <Function/Sub>`在签名的末尾显式添加 。

在 C# 中，您不能这样做，因此实现“正常工作”而无需添加任何内容。

[MSDN](http://msdn.microsoft.com/en-us/library/4b3c4by9%28v=vs.71%29.aspx)：

> 实现成员的参数类型和返回类型必须与接口中的接口属性或成员声明相匹配。实现接口元素的最常见方法是使用与接口同名的成员

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:03:37.887

如果要覆盖 Form 的标准方法并将其替换为接口中定义的方法，请使用 shadows 关键字，否则您需要使用不同的名称，因为它们被视为两个单独的方法。

```
Public Class Form1
    Inherits Form
    Implements IForm

    Public Shadows Property IsDisposed As Boolean Implements IForm.IsDisposed

    Public Shadows Sub Show() Implements IForm.Show
        ' replaces original method in Form class
    End Sub

End Class 
```

选择：

```
Public Class Form2
    Inherits Form
    Implements IForm

    Public Property IsDisposed1 As Boolean Implements IForm.IsDisposed

    Public Sub Show1() Implements IForm.Show
        Me.Show() ' Original method still exists and is accessible like this
    End Sub
End Class 
```

# iphone - 为什么保留属性可能不会保留在 Objective-C 上？

> ID：16105042
> 
> 赞同：0
> 
> 时间：2013-04-19T12:51:00.317
> 
> 标签：iphone, ios, objective-c, properties, retain

为什么下面的代码会崩溃？注释代码不会崩溃。

```
@property (retain) NSDate *lastCurrentDate;

...

@synthesize lastCurrentDate;

- (void)viewWillAppear:(BOOL)animated {
    BOOL crash = [lastCurrentDate isEqualToDate:[NSDate date]]);
}

- (void)viewDidDisappear:(BOOL)animated {
    //lastCurrentDate = [[NSDate date] retain];
    lastCurrentDate = [NSDate date];
} 
```

那么，为什么在 Objective-C 上可能无法保留属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:05:35.377

当您编写时`@synthesize lastCurrentDate`- 您还创建了名为 ' `lastCurrentState`' 的变量，并且在您编写`lastCurrentDate = [NSDate date];`时直接访问此变量。属性应该通过点访问：`self.lastCurrentDate = ....;`

在最后的 xCodes 中，您不需要编写 synthesize - 它会自动完成，但会创建以 '_' 前缀命名的变量。它等于：`@synthesize variable = _variable;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:07:51.470

使用`self.lastCurrentDate = [NSDate date]`. 因为当您使用时`self.lastCurrentDate`，它将通过`setter`方法分配。您通过保留属性声明可变量，因此您的 setter 方法将执行两个操作，`assign`并且`retain`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:03:47.527

因为您直接分配给实例变量，而不是使用属性访问器方法：

```
self.lastCurrentDate = [NSDate date]; 
```

# spring - Spring mvc 测试 - 使用 Autowired 注释测试控制器

> ID：16105051
> 
> 赞同：1
> 
> 时间：2013-04-19T12:51:25.410
> 
> 标签：spring, spring-mvc, spring-test, spring-test-mvc

我正在尝试使用 spring 测试框架为我的控制器创建一些测试。

在这篇文章之后：http: [//blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)我创建了这个测试类

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration("classpath:testContext.xml")
public class ServiceRequestControllerTest {

    @Autowired
    private WebApplicationContext wac;

    @Autowired
    private ServiceRequestController productController;

    @Autowired
    private WSServiceRequestIO wsServiceRequestIO;
    @Autowired
    private Open311ResponseMarshaller open311ResponseMarshaller;
    @Autowired
    private Open311GETQueryStringParser open311GETQueryStringParser;
    @Autowired
    private Open311POSTQueryStringParser open311POSTRequestParser;
    @Autowired
    private Open311ResponseFactory responseFactory;

    private MockMvc mockMvc;

    @Before
    public void setup() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
    }

    @Test
    public void testTest() throws Exception {
        this.mockMvc.perform(get("/requests"));
    }
} 
```

我的 testContext.xml 是

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

    <bean class="org.mockito.Mockito" factory-method="mock">
        <constructor-arg value="utils.webservice.WSServiceRequestIO" />
    </bean>

    <bean class="org.mockito.Mockito" factory-method="mock">
        <constructor-arg value="open311.model.Open311ResponseMarshaller" />
    </bean>

    <bean class="org.mockito.Mockito" factory-method="mock">
        <constructor-arg
            value="open311.utils.Open311POSTQueryStringParser" />
    </bean>

    <bean class="org.mockito.Mockito" factory-method="mock">
        <constructor-arg
            value="open311.utils.Open311GETQueryStringParser" />
    </bean>

    <bean class="org.mockito.Mockito" factory-method="mock">
        <constructor-arg
            value="open311.model.Open311ResponseFactory" />
    </bean>

    <context:component-scan base-package="open311.controller" />
    <mvc:annotation-driven />

    <mvc:resources mapping="/services*" location="/resources/" />

</beans> 
```

现在，当我运行测试时，我会收到很多消息，例如：

```
2013-04-19 14:33:34 INFO  GenericTypeResolver:216 - Could not determine the target type for type argument [T] for method [public static <T> T org.mockito.Mockito.mock(java.lang.Class<T>)]. 
```

所以通过 mockito 推断类型存在一些问题，但是当我进入调试模式并检查我的控制器时，我仍然可以看到对象被正确注入。（我`@Autowire`在我的控制器中使用注释）。

无论如何，当我尝试运行此测试时，由于以下原因导致测试失败

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoSuchMethodError: javax/servlet/http/HttpServletResponse.getContentType()Ljava/lang/String;
    at org.springframework.web.servlet.DispatcherServlet.triggerAfterCompletionWithError(DispatcherServlet.java:1259)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:945)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:816)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:801)
    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:168)
    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:136)
    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:134)
    at open311.controller.ServiceRequestControllerTest.testTest(ServiceRequestControllerTest.java:58)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:600)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

什么可能是我的问题的根源？我认为我遵循了本教程的每一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:37:45.300

这`NoSuchMethodError`表明您的测试类路径上可能有不兼容的 Servlet API 版本。

此外，您需要`ServiceRequestController`在测试 XML 配置中包含 Spring MVC 配置以及 bean 定义，可以直接通过导入，也可以通过`@ContextConfiguration`.

# xcode - Domain=NSCocoaErrorDomain Code=513 仅在模拟器中

> ID：16105054
> 
> 赞同：0
> 
> 时间：2013-04-19T12:51:32.677
> 
> 标签：xcode, ipad, ios-simulator, nsfilemanager

我有一个 Ipad 应用程序，可以从 Internet 下载不同的文件。当我使用 Xcode Simulator 时，这个 App 效果很好。当我在 Ipad 上尝试应用程序时，应用程序开始时出现错误，并且由于此错误，应用程序无法运行。

```
error creating directory in createPath: Error Domain=NSCocoaErrorDomain Code=513 "The operation couldn’t be completed. (Cocoa error 513.)" UserInfo=0x2d3eb0 {NSFilePath=/var/mobile/Applications/DE851748-0D7A-4416-9B62-8EEEF9B80533/Cache, NSUnderlyingError=0x2cb8e0 "The operation couldn’t be completed. Operation not permitted"} 
```

我创建文件夹的代码：

```
-(void) createPath{
NSError *error;

[[NSFileManager defaultManager] createDirectoryAtPath:masterFolder
                               withIntermediateDirectories:YES
                                                attributes:nil
                                                     error:&error];
     if (error != nil) {
         NSLog(@"error creating directory in createPath: %@", error);

     }

} 
```

这是我的变量：

```
masterFolder = [NSHomeDirectory() stringByAppendingPathComponent:@"/Cache/"]; 
```

这是我知道的 Code 513 的一个老问题，我解释一下我到目前为止所做的事情：

1.  我从模拟器（重置）和 Ipad 中手动删除应用程序
2.  将 StringByAppendingString 更改为 StringByAppendingPathComponent ，如下所示： [Save UIImage in application path](https://stackoverflow.com/questions/9995993/save-uiimage-in-application-path/9996216)
3.  我已经使用了 Apple 的标准文件夹“Cache”，就像这里[NSFileManager 创建文件夹（Cocoa 错误 513。）](https://stackoverflow.com/questions/3439408/nsfilemanager-creating-folder-cocoa-error-513)
4.  是的，我已经重新启动了我的 Mac ;)

还有更多站点。但我不明白为什么模拟器的工作方式与原始 Ipad 不同。还是我监督了什么？！？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T13:31:52.583

我想知道它是否与文件名的大小写有关？

iOS 区分大小写，而 OSX 则不区分大小写，因此某些可能在模拟器上运行，而在 iOS 上不存在的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:17:43.150

所以，我只是改变我的文件夹，它的工作原理

```
masterFolder = [NSHomeDirectory() stringByAppendingPathComponent:@"/Cache/"]; 
```

在

```
masterFolder = [NSHomeDirectory() stringByAppendingPathComponent:@"/Documents/"]; 
```

但为什么 ？我不知道。在此站点上，您可以看到不同类型文件夹之间的差异 [1](http://www.cocoanetics.com/2010/03/directories-temp-cache-documents/)目录：临时、缓存、文档

# knockout.js - 如何在淘汰赛中将对象数组添加到可观察数组中？

> ID：16105059
> 
> 赞同：11
> 
> 时间：2013-04-19T12:51:40.270
> 
> 标签：knockout.js

我通过 ajax 获取大量对象，如果该数组有数据，那么它将被传递给我的视图模型中的 ImportObservableListItems：

```
 success: function (data) {
            debugger 
            if (data.length > 0) {

            ReadingList.ImportObservableListItems(data);

            } 
```

在视图模型中，我想将每个对象添加到一个可观察的数组中，但我需要每个对象的属性都是可观察的。但是，如果数组包含大量对象，则浏览器会崩溃。有什么办法可以防止吗？

```
self.ImportObservableListItems = function (data) {
            $.each(data, function(index, item) {
                var newListItem = {
                    MediaID: ko.observable(item.MediaID),
                    MediaName: ko.observable(item.MediaName),
                    MediaTypeID: ko.observable(item.MediaTypeID),
                    MediaTypeName: ko.observable(item.MediaTypeName),
                    Group1: ko.observable(item.Group1),
                    Group2: ko.observable(item.Group2),
                    Group3: ko.observable(item.Group3),
                    Group4: ko.observable(item.Group4),
                    Group5: ko.observable(item.Group5)
                };
                ReadingList.ReadingListItems.push(newListItem);
            });
        }; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-19T13:42:56.347

您可以通过一次推送所有项目来减少流失（推送接受多个项目）：

```
var items = $.map(data, function (item) {
    return {
        MediaID: ko.observable(item.MediaID),
        MediaName: ko.observable(item.MediaName),
        MediaTypeID: ko.observable(item.MediaTypeID),
        MediaTypeName: ko.observable(item.MediaTypeName),
        Group1: ko.observable(item.Group1),
        Group2: ko.observable(item.Group2),
        Group3: ko.observable(item.Group3),
        Group4: ko.observable(item.Group4),
        Group5: ko.observable(item.Group5)
    };
});

ReadingList.ReadingListItems.push.apply(ReadingList.ReadingListItems, items); 
```

这将导致在添加所有项目后仅发出一个通知，而不是每个项目一次。

# javascript - Ember Route 仅适用于手动刷新

> ID：16105060
> 
> 赞同：0
> 
> 时间：2013-04-19T12:51:54.390
> 
> 标签：javascript, ember.js, routes, ember-router

我是 ember 的新手，我想让 Route 使用字符串而不是 id 来获得更漂亮的 url。当我手动输入路径 example.com/#/Commune 时，这里的路由器代码正在工作。但是当使用 {{#linkTo "commune" name}}{{name}}{{/linkTo}} 时，url 正在正确更改但没有显示（如果我刷新浏览器它会显示）。任何的想法？

**JS：**

```
App.Router.map(function() {
    this.route('commune', {path: "/:commune_name"});
});

App.CommuneRoute = Em.Route.extend({
    model: function(params) {
        return App.CommunesController.findProperty('name', params.commune_name);
    }
}); 
```

如果我这样做：情况正好相反。（链接有效，但输入/刷新 aint）

```
App.CommuneRoute = Em.Route.extend({
    model: function(params) {
        return App.Commune.find(params.commune_name);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:41:44.233

需要将序列化添加到我的路线：

```
App.CommuneRoute = Em.Route.extend({
    serialize: function(model, params) {
        return {
            name: model._data.attributes.name
        };
    },
    model: function(params) {
        return App.CommunesController.findProperty('name', params.commune_name);
    }
}); 
```

# excel - 如何从 Excel VBA 中 FIND 函数的两个返回范围调整新范围的大小

> ID：16105061
> 
> 赞同：1
> 
> 时间：2013-04-19T12:51:56.830
> 
> 标签：excel, vba

在我的[上一个问题](https://stackoverflow.com/questions/16092433/how-to-fix-the-error-using-find-function-in-excel-vba)中，我询问了如何在 Excel 中处理 .FIND 函数的返回范围。现在我想要一个新的范围，这是调用 SEARCH 函数来查找“BEGIN”和“STOP”的结果

![在此处输入图像描述](https://i.stack.imgur.com/QXkqb.jpg)

我试过了

```
Set New_Range = Sheets(Selected_sheet).Range(Begin_RANGE).Resize(Stop_RANGE.Row, 0) 
```

其中 Begin_RANGE 和 Stop_Range 设置为 SEARCH 的返回值。

```
Private Function Search(rng As Range, FindString As String) As Range
    With rng
        Set Search = .Find(what:=FindString, _
                        After:=.Cells(.Cells.Count), _
                        LookIn:=xlValues, _
                        lookat:=xlWhole, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, _
                        MatchCase:=False)
     End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:58:59.453

在您的尝试中，您将列调整大小设置为 0，这将出错。您需要做的是将列数离散地记为 1，或者干脆将其省略，例如：

```
Set New_Range = Sheets(Selected_sheet).Range(Begin_RANGE).Resize(Stop_RANGE.Row) 
```

但是我会尝试消除开始单元格不在第 1 行中的任何潜在问题，但要像这样对待它的区别：

```
Set New_Range = Sheets(Selected_sheet).Range(Begin_RANGE).Resize(Stop_RANGE.Row - Begin_RANGE.Row + 1) 
```

**请记住**，在使用该`resize`函数时，您输入的数字就是结果大小。

# iphone - 如何在 iOS 上解压缩 .zip 文件？

> ID：16105072
> 
> 赞同：8
> 
> 时间：2013-04-19T12:52:30.337
> 
> 标签：iphone, ios, objective-c, in-app-purchase, storekit

StoreKit 下载 IAP 内容包后，它会向我返回一个 NSURL，如下所示：

> 文件：//localhost/private/var/mobile/Applications/45EF2B3A-3CAB-5A44-4B4A-631A122A4299/Library/Caches/BA32BC55-55DD-3AA4-B4AC-C2A456622229.zip/

尽管我发现所有消息来源都声称 StoreKit 会在下载内容包后解压缩，但它给了我一个 ZIP。此 ZIP 可能包含内容包的文件结构。但是我该如何解压呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-19T13:20:26.083

如果您使用 Swift 语言工作，请使用[Zip Foundation 。](https://github.com/weichsel/ZIPFoundation)它易于使用，是解压缩 zip 文件的最佳 swift 库之一。

压缩：

```
let fileManager = FileManager()
let currentWorkingPath = fileManager.currentDirectoryPath
var sourceURL = URL(fileURLWithPath: currentWorkingPath)
sourceURL.appendPathComponent("file.txt")
var destinationURL = URL(fileURLWithPath: currentWorkingPath)
destinationURL.appendPathComponent("archive.zip")
do {
    try fileManager.zipItem(at: sourceURL, to: destinationURL)
} catch {
    print("Creation of ZIP archive failed with error:\(error)")
} 
```

解压缩：

```
let fileManager = FileManager()
let currentWorkingPath = fileManager.currentDirectoryPath
var sourceURL = URL(fileURLWithPath: currentWorkingPath)
sourceURL.appendPathComponent("archive.zip")
var destinationURL = URL(fileURLWithPath: currentWorkingPath)
destinationURL.appendPathComponent("directory")
do {
    try fileManager.createDirectory(at: destinationURL,             withIntermediateDirectories: true, attributes: nil)
try fileManager.unzipItem(at: sourceURL, to: destinationURL)
} catch {
    print("Extraction of ZIP archive failed with error:\(error)")
} 
```

如果您使用的是 Objective-C，那么[SSZipArchive](https://github.com/soffes/ssziparchive)是最好的选择。

你可以用这个解压

```
NSArray  *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *outputPath = [documentsDirectory stringByAppendingPathComponent:@"/ImagesFolder"];

NSString *zipPath = Your zip file path;

[SSZipArchive unzipFileAtPath:zipPath toDestination:outputPath delegate:self]; 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T12:56:07.147

有一个很棒的 3rd 方工具，用于为 iPhone 压缩/解压缩文件

[https://github.com/soffes/ssziparchive](https://github.com/soffes/ssziparchive)

使用非常简单。希望有帮助！！

编辑：

我创建的快速方法需要 url，下载 zip 并解压缩

```
-(void)downloadAndUnzip : (NSString *)sURL_p : (NSString *)sFolderName_p
{
    dispatch_queue_t q = dispatch_get_global_queue(0, 0);
    dispatch_queue_t main = dispatch_get_main_queue();
    dispatch_async(q, ^{
        //Path info
        NSURL *url = [NSURL URLWithString:sURL_p];
        NSData *data = [NSData  dataWithContentsOfURL:url];
        NSString *fileName = [[url path] lastPathComponent];
        NSString *filePath = [NSTemporaryDirectory() stringByAppendingPathComponent:fileName];
        [data writeToFile:filePath atomically:YES];
        dispatch_async(main, ^

                 {
                       //Write To
                       NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                       NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
                       NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:sFolderName_p];

                       [SSZipArchive unzipFileAtPath:filePath toDestination:dataPath];

                   });
});

} 
```

# actionscript-3 - 纯动作脚本的 UI 框架

> ID：16105073
> 
> 赞同：-3
> 
> 时间：2013-04-19T12:52:32.663
> 
> 标签：actionscript-3, user-interface, frameworks

除了 Flex 之外，as3 中是否有任何用于 ui 开发的框架/库？只是普通的东西，比如带有卷轴、手风琴、旋转木马等的文本字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:57:43.360

是的，有:)

一些比较知名的是：

[http://www.minimalcomps.com/](http://www.minimalcomps.com/) - 这是非常轻量级且易于使用的，但蒙皮选项有限。

[http://feathersui.com/](http://feathersui.com/) - 这利用 Stage3D（即 gpu 渲染），因此非常适合移动应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:55:51.943

Aswing( [www.aswing.org](http://www.aswing.org/) ) 在为没有 Flex 的 Web 应用程序构建 UI 时最容易使用，但对于移动设备，feathersui( [http://feathersui.com/](http://feathersui.com/) ) 是唯一的选择。关于性能，两者都是负担得起的（但在我看来没有得到很好的优化）。

# c++ - 利用 libcurl 进度数据

> ID：16105076
> 
> 赞同：0
> 
> 时间：2013-04-19T12:52:37.847
> 
> 标签：c++, xcode, cocoa, libcurl

在 Xcode 中设置了一堆 curl_easy_setopt-functions 用于将文件上传到服务器/API，并且（经过大量试验和错误）它就像一个魅力。在经历了其他几个问答之后，我还设法设置了一个简单的 CURLOPT_PROGRESSFUNCTION，如下所示：

```
static int my_progress_func(void *p,
                        double t,
                        double d,
                        double ultotal,
                        double ulnow)
{
printf("(%g %%)\n", ulnow*100.0/ultotal);
// globalProgressNumber = ulnow*100.0/ultotal;
return 0;
} 
```

随着上传的进行，“0%.. 16%.. 58%.. 100%”输出到控制台；灿烂。我无法做的是实际使用这些数据（globalProgressNumber），例如。对于我的 NSProgressIndicator；CURL 有点劫持我的应用程序，并且在进度完成之前不允许任何其他输入/输出。

我尝试从 my_progress_func 更新 IBOutlets（例如 [_myLabel setStringValue:globalProgressNumber];），但静态 int 函数不允许这样做。[self] 也不允许，因此无法发布到 NSNotificationCenter： `[[NSNotificationCenter defaultCenter] postNotificationName:@"Progressing" object:self];`

我的 curl 函数从我的主类/窗口（NSPanel）运行。

关于如何在我的 .xib 上实现实时/更新元素有什么好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:38:47.260

> *CURL [...] 在进度完成之前不允许任何其他输入/输出。*

你是`curl_easy_perform`从主线程调用吗？如果是，你不应该这样做，因为这个函数是同步的，即它阻塞直到传输完成。

换句话说，长时间运行的任务（例如使用网络 I/O）必须在单独的线程上运行，而 UI 代码（例如更新标签的文本）必须在主线程上运行。

> *如何实现实时/更新元素*

您绝对应该注意在单独的线程中执行卷曲传输。

这可以通过将其包装成`NSOperation`一个自定义协议来通知委托进度（例如您的视图控制器）来轻松实现：

*   将您的操作推入`NSOperationQueue`,
*   操作队列将负责分离传输并将其运行到另一个线程中，
*   `CURLOPT_PROGRESSDATA`在操作方面，您仍然应该使用进度功能，并通过curl 选项将操作对象设置为不透明对象。通过这样做，每次调用进度函数时，您都可以通过强制转换`void *clientp`不透明指针来检索操作对象。**然后通知代理主线程**中的当前进度（例如使用`performSelectorOnMainThread`），以确保您可以执行 UI 更新，例如刷新您的`NSProgressIndicator`.

作为替代方案，`NSOperation`您还可以使用[Grand Central Dispatch](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW1) (GCD) 和块。如果可能，我强烈建议您使用[BBHTTP](https://github.com/brunodecarvalho/BBHTTP)，它是 iOS 5+ 和 OSX 10.7+ 的 libcurl 客户端（BBHTTP 使用 GCD 和块）。

仅供参考：这是一个[来自 BBHTTP 的示例，](https://github.com/brunodecarvalho/BBHTTP/blob/17189609949da7ab6464b0d5a6df4d8e5bfd38cf/Example/iOS%20Sample%20app/Classes/AppDelegate.m#L85-L103)它说明了如何使用上传进度块轻松执行文件上传 - 这适用于 iOS，但应该可以直接用于 OS X。

# mysql - 用于排序排行榜的 SQL 查询

> ID：16105080
> 
> 赞同：0
> 
> 时间：2013-04-19T12:52:48.890
> 
> 标签：mysql, sql, sql-server, sql-server-2008, tsql

如果我们有表，对排行榜最有效的 SQL 查询是什么：

```
[UserID], [Points] 
```

我想让结果按点和排名列排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:54:09.170

在 SQL Server 2008 中，您可以使用[排名函数](http://msdn.microsoft.com/library/ms189798.aspx)：

```
SELECT UserId,
       Points,
       RANK() OVER(ORDER BY Points DESC) AS Rank
FROM LeaderBoards
ORDER BY Points DESC 
```

[MySql 排名可能是这样的：](https://stackoverflow.com/questions/3333665/mysql-rank-function)

```
SELECT UserId,
       Points,
       @curRank := @curRank + 1 AS Rank
FROM LeaderBoards l, (SELECT @curRank := 0) r
ORDER BY Points DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:56:04.520

查询应该是：

SELECT UserID, Points FROM table ORDER BY Points

在您使用的任何显示技术（即 php 等）中，生成排名列可能更容易。它可以在大多数 SQL 风格中完成，但语法会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T01:17:49.310

这是一个利用 join 的解决方案：

```
SELECT t1.UserID, t1.Points, COUNT(t2.Points) AS Rank
FROM LeaderBoards t1
JOIN LeaderBoards t2 ON t1.Points < t2.Points OR (t1.Points=t2.Points and t1.UserID = t2.UserID)
GROUP BY t1.UserID, t1.Points
ORDER BY t1.Points DESC, t1.UserID DESC; 
```

我在 MySQL 上对此进行了测试。有关这方面的更详细文章，请参阅： [http ://www.artfulsoftware.com/infotree/qrytip.php?id=460](http://www.artfulsoftware.com/infotree/qrytip.php?id=460)

# html - windows phone 8 在输入字段中突出显示颜色

> ID：16105084
> 
> 赞同：0
> 
> 时间：2013-04-19T12:53:12.127
> 
> 标签：html, css, windows-phone-8, internet-explorer-10

在 Internet Explorer 10（移动版）中，选择框 () 在获得焦点后立即突出显示为蓝色（它是手机整个现代 UI 表面的蓝色）。选择标签的样式：

```
border-radius: 5px 5px 5px 5px;
font-size: 14px;
height: 25px;
letter-spacing: -1px;
float: left;
font-weight: 400;
padding: 0 5px 0 5px;
-webkit-appearance: none;
-ms-user-select: none;
background-origin: content-box, content-box;
background-repeat: no-repeat, repeat;
background-size: 11px 6px, 1px 160px;
background-position: right center, 0 -1px;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAMAQMAAACz9bS7AAAABlBMV…vQuZgJjsYojkBJQf75i4cGzcXt5HJQ/Djs7L5sApGeVNPJDzbGEbOb/85rAAAAAElFTkSuQmCC), url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAlgCAIAAADGR8ryAAACZ0lEQ…tDzV5P+JnOAzg9qR2Xlg+a8jAvtyK/P5fSI6Sf3c3NhwADAJ0Rj8qbukvYAAAAAElFTkSuQmCC);
border: 1px solid #CCCCCC; 
```

我希望“-ms-user-select：none”可以解决它，但没有......有没有人遇到过类似的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:12:21.960

我在 WP7 和 WP8 上遇到过类似的问题，解决方案是将焦点从选择框移动到点击事件上的假输入。

jQuery：

```
$('select').on('click', function() {
    $('input.fakeInput').focus().blur()
}) 
```

CSS：

```
.fakeInput {
    display: block;
    width:0;
    height:0;
    top: -999rem;
    position: absolute;
} 
```

注意：不要忘记仅为移动设备添加此代码，在桌面浏览器上它不会按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T07:36:04.947

IE 有自己的 CSS 伪元素来处理这个亮点。

CSS：

```
select::-ms-value{ background-color: transparent; color: black; } 
```

[您可以在此页面](http://msdn.microsoft.com/en-us/library/ie/hh869604%28v=vs.85%29.aspx)上阅读有关此内容的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:22:17.160

这很有趣，但由于我将这一行添加到我的样式表中，它一直突出显示蓝色，但在您从选择框中选择某些内容后不会保持这种状态。

如果有人回来解决这个问题，我想我会添加它作为答案。

```
:focus{outline: none;} 
```

# java - ActiveMQ 不启动，抛出 SQLSyntaxException

> ID：16105085
> 
> 赞同：0
> 
> 时间：2013-04-19T12:53:12.087
> 
> 标签：java

我正在迁移到 ActiveMQ 5.8.0 并有一个主从 ActiveMQ 设置。

这是我的 activemq.xml：

```
<!-- Allows us to use system properties as variables in this configuration file -->
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>file:${activemq.base}/conf/activemq.properties</value>
    </property>      
</bean>

<!-- 
    The <broker> element is used to configure the ActiveMQ broker. 
-->
<broker xmlns="http://activemq.apache.org/schema/core" brokerName="${broker.name}" dataDirectory="${activemq.base}/data" destroyApplicationContextOnStop="true">

    <destinationPolicy>
        <policyMap>
          <policyEntries>
            <policyEntry topic=">" producerFlowControl="true" memoryLimit="1mb">
              <pendingSubscriberPolicy>
                <vmCursor />
              </pendingSubscriberPolicy>
            </policyEntry>
            <policyEntry queue="NotificationQueue" producerFlowControl="true" memoryLimit="64mb" queuePrefetch="200" >
              <!-- Use VM cursor for better latency
                   For more information, see:

                   http://activemq.apache.org/message-cursors.html

              <pendingQueuePolicy>
                <vmQueueCursor/>
              </pendingQueuePolicy>
              -->
            </policyEntry>
            <policyEntry queue="ReportingQueue" producerFlowControl="true" memoryLimit="10mb" queuePrefetch="200" >
             </policyEntry>
          </policyEntries>
        </policyMap>
    </destinationPolicy> 

    <managementContext>
        <managementContext createConnector="false"/>
    </managementContext>

    <persistenceAdapter>
        <jdbcPersistenceAdapter dataSource="#oracle-ds" useDatabaseLock="true" lockAcquireSleepInterval="10000" lockKeepAlivePeriod="10000" databaseLocker="#custom-locker" createTablesOnStartup="false"/>           
    </persistenceAdapter>

    <systemUsage>
        <systemUsage sendFailIfNoSpaceAfterTimeout="30000">
        <!--<systemUsage>-->
            <memoryUsage>
                <memoryUsage limit="128mb"/>
            </memoryUsage>
            <!--<storeUsage>
                <storeUsage limit="1 gb" name="foo"/>
            </storeUsage>
            <tempUsage>
                <tempUsage limit="100 mb"/>
            </tempUsage>-->
        </systemUsage>
    </systemUsage>

    <transportConnectors>
        <transportConnector name="openwire" uri="${connection.uri}"/>
    </transportConnectors>

</broker>

<bean id="oracle-ds" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${database.driver.class.name}"/>
<property name="url" value="${database.url}"/>
<property name="username" value="${database.username}"/>
<property name="password" value="${database.password}"/>
<property name="initialSize" value="${initialSize}"/>
<property name="minIdle" value="${minIdle}"/>
<property name="defaultAutoCommit" value="${defaultAutoCommit}"/>
<property name="defaultReadOnly" value="${defaultReadOnly}"/>
<property name="maxActive" value="${maxActive}"/>
<property name="maxIdle" value="${maxIdle}"/>
<property name="poolPreparedStatements" value="${poolPreparedStatements}"/>
<property name="maxOpenPreparedStatements" value="${maxOpenPreparedStatements}"/>
<property name="maxWait" value="${maxWait}"/>
<property name="numTestsPerEvictionRun" value="${numTestsPerEvictionRun}"/>
<property name="testOnBorrow" value="${testOnBorrow}"/>
<property name="testOnReturn" value="${testOnReturn}"/>
<property name="testWhileIdle" value="${testWhileIdle}"/>
<property name="timeBetweenEvictionRunsMillis" value="${timeBetweenEvictionRunsMillis}"/>
<property name="validationQuery" value="${validationQuery}"/>
</bean>

<bean id="custom-locker" class="com.symantec.cda.activemq.failover.AMQCustomFailover">
    <property name="lockKeepAlivePeriod" value="10000" />
</bean>

<import resource="jetty.xml"/> 
```

在 CLI 上同时启动 master 和 slave 时，出现以下异常：

```
java.sql.SQLSyntaxErrorException: ORA-00904: "XID": invalid identifier

at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:91)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:112)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:173)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)
at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1030)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:194)
at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:785)
at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:860)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1186)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3381)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3425)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1490)
at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
at org.apache.activemq.store.jdbc.adapter.DefaultJDBCAdapter.doRecoverPreparedOps(DefaultJDBCAdapter.java:957)
at org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.recover(JDBCPersistenceAdapter.java:728)
at org.apache.activemq.store.jdbc.JdbcMemoryTransactionStore.recover(JdbcMemoryTransactionStore.java:160)
at org.apache.activemq.broker.TransactionBroker.start(TransactionBroker.java:97)
at org.apache.activemq.broker.BrokerService$5.start(BrokerService.java:2078)
at org.apache.activemq.broker.BrokerService.doStartBroker(BrokerService.java:636)
at org.apache.activemq.broker.BrokerService.startBroker(BrokerService.java:617)
at org.apache.activemq.broker.BrokerService.start(BrokerService.java:553)
at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1522)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:64)
at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:52)
at org.apache.activemq.xbean.XBeanBrokerFactory$1.<init>(XBeanBrokerFactory.java:101)
at org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:101)
at org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:65)
at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)
at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)
at org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:125)
at org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:101)
at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:150)
at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:104)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.activemq.console.Main.runTaskClass(Main.java:262)
at org.apache.activemq.console.Main.main(Main.java:115) 
```

错误 | 无法启动 Apache ActiveMQ (master, ID:symc-trustgateway-phy-be-51497-1366373603849-0:1)。原因：java.io.IOException：无法从：org.apache.activemq.store.jdbc.JdbcMemoryTransactionStore@5e0eb724 恢复。原因：java.sql.SQLSyntaxErrorException：ORA-00904：“XID”：标识符无效

我更改了我的 activemq.xml 以在其中硬编码 DB 详细信息（而不是从 activemq.properties 文件中引用）。所以 dataSource 属性现在指向这个：

```
<bean id="oracle-ds" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="url" value="jdbc:oracle:thin:@10.141.148.225:1521:CDAQA3"/>
    <property name="username" value="cdaapps"/>
    <property name="password" value="password"/>
    <property name="initialSize" value="${initialSize}"/>
    <property name="minIdle" value="${minIdle}"/>
    <property name="defaultAutoCommit" value="${defaultAutoCommit}"/>
    <property name="defaultReadOnly" value="${defaultReadOnly}"/>
    <property name="maxActive" value="${maxActive}"/>
    <property name="maxIdle" value="${maxIdle}"/>
    <property name="poolPreparedStatements" value="${poolPreparedStatements}"/>
    <property name="maxOpenPreparedStatements" value="${maxOpenPreparedStatements}"/>
    <property name="maxWait" value="${maxWait}"/>
    <property name="numTestsPerEvictionRun" value="${numTestsPerEvictionRun}"/>
    <property name="testOnBorrow" value="${testOnBorrow}"/>
    <property name="testOnReturn" value="${testOnReturn}"/>
    <property name="testWhileIdle" value="${testWhileIdle}"/>
    <property name="timeBetweenEvictionRunsMillis" value="${timeBetweenEvictionRunsMillis}"/>
    <property name="validationQuery" value="${validationQuery}"/>
</bean> 
```

仍然发生相同的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-06T19:45:12.530

在迁移到 ActiveMQ 5.8.0 时，下面的 sql 应该处理上述异常

```
ALTER TABLE ACTIVEMQ_MSGS Add  XID VARCHAR(250);
CREATE INDEX ACTIVEMQ_MSGS_XIDX ON ACTIVEMQ_MSGS (XID);
ALTER TABLE ACTIVEMQ_ACKS add  XID VARCHAR(250);
CREATE INDEX ACTIVEMQ_ACKS_XIDX ON ACTIVEMQ_ACKS (XID); 
```

# java - 通过 URLConnection 上传 Java 文件损坏

> ID：16105089
> 
> 赞同：0
> 
> 时间：2013-04-19T12:53:22.607
> 
> 标签：java, ftp, outputstream, urlconnection

我不确定为什么会不时发生这种情况，但是当我上传到远程 ftp 服务器时文件大小会有所不同。

这是我如何做到的：

```
 URLConnection uc;
            try {
                uc = Init.net.openConnection();
                OutputStream os = uc.getOutputStream();
                FileInputStream fis = new FileInputStream("List.jkm");
                byte[] buffer = new byte[1024];
                int count = 0;
                while((count = fis.read(buffer)) > 0) {
                    os.write(buffer, 0, count);
                }
                fis.close();
                os.flush();
            } catch (IOException e1) {
                e1.printStackTrace();
            } 
```

欣赏一些提示

# ruby - 翻转 ruby 哈希关联的内置方法

> ID：16105096
> 
> 赞同：2
> 
> 时间：2013-04-19T12:53:44.393
> 
> 标签：ruby, hashmap

假设我有一个 ruby​​ 具有一对一的对应关系，是否有一些内置方法可以反转 ruby​​ 哈希中的关联？我宁愿在不**显式**循环键的情况下这样做。

例如，假设我有：

```
a = {1 => "Foo", 2 => "Bar"}
a.reverse_association
a # ---> {"Foo" => 1, "Bar" => 2} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:57:29.913

是的，使用[`Hash#invert`](http://ruby-doc.org/core-2.0/Hash.html#method-i-invert)：

```
h = {a: 1, b: 2}
h.invert #=> {1 => :a, 2 => :b} 
```

# c# - 为什么 MessageBox 不是 TopMost？

> ID：16105097
> 
> 赞同：49
> 
> 时间：2013-04-19T12:53:45.183
> 
> 标签：c#, messagebox, topmost

我最近发现默认情况下 MessageBoxes 不是默认显示时最顶层的表单，我想知道是否有人知道您不希望消息框显示在其他窗口顶部的任何情况？

当我在加载应用程序时开始显示启动画面时，我发现了这个问题，看起来我的程序仍在运行，但`MessageBox`启动画面后面有一个等待输入。启动画面显示在不同的线程上调用消息框的线程，所以我想这就是它没有出现在启动画面上方的原因；但这仍然不能解释为什么 MessageBox 默认没有`MB_TOPMOST`标志？

**编辑**

为了更好地澄清：最后我不得不做类似的事情来制作一个消息框，代码并不完全正确，因为从内存中写入）

```
[DllImport("User32.dll")]
private int extern MessageBox(windowhandle, message, caption, flag);
public static void MessageBox(windowhandle, string message, string caption)
{
    MessageBox(windowhandle, message,caption, MB_TOPMOST);
} 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2014-05-18T16:00:36.243

如果您可以获得对话框应该出现在其顶部的窗口的句柄或引用，则建议的解决方案将起作用。但是，这可能并不总是可能或容易实现：

*   该窗口是一个启动屏幕，不应与您的业务逻辑紧密耦合
*   该窗口是由另一个类或库而不是当前类或库创建的
*   该窗口不受您的控制，即来自第三方（本机）库

在这种情况下，您*可以*使用 Win232 `MessageBox`API `User32.dll`，但也可以使用更简单的托管解决方案：

```
MessageBox.Show(new Form { TopMost = true }, "Hello, I'm on top!"); 
```

代码`new Form { TopMost = true }`将创建一个带有属性的隐藏表单，该`MB_TOPMOST`属性由消息框对话框窗口继承。结果，它将出现在所有其他窗口的顶部。使用`new Form()`内联没有副作用，没有视觉外观，它会被垃圾收集器正常销毁。

*注意：如果您还没有在表单中，请不要忘记命名空间，这是`System.Windows.Forms.MessageBox`，不是`System.Windows.MessageBox`！（谢谢，[user1](https://stackoverflow.com/questions/16105097/why-isnt-messagebox-topmost/23723931#comment46178269_23723931)）。*

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-04-19T13:20:37.613

在应用程序的最顶部显示 MessageBox

**代码**

```
//Should be MessageBox.Show() below
MessageBox.Show(this, "My top most message"); 
```

**不`MB_TOPMOST`默认的原因**

> 如果 MB_TOPMOST 将是默认值，那么`MessageBox`它将以“系统模式”模式显示，并且它将恰好在该表单的顶部，副作用是“系统模式”模式将导致`MessageBox`阻止*窗口*，直到消息被关闭通常它将是“应用程序模式”模式。

**参考链接**

1.  [MSDN 论坛 - 如何将 MessageBox 显示为最顶层窗口](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/7a515f66-8818-4ec5-9213-7ee479f8fb18/)
2.  [SO - 当应用程序最小化到托盘时 C# MessageBox 到前面](https://stackoverflow.com/a/4834954/468718)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T13:05:38.283

显示时`MessageBox`提供其所有者作为第一个参数。例如，从`Form`实例调用中调用时：

```
MessageBox.Show(this, "Message"); 
```

提供对拥有它的窗口的引用作为第一个参数。

消息框（以及一般的模态表单）*不会*出现在应用程序的所有窗口之上。*它们只出现在它们的主人*之上。如果您希望您的消息框（或其他模式表单）位于启动屏幕顶部，请将其所有者设置为启动表单实例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-28T07:05:11.040

我尝试粘贴更完整的代码片段，它肯定有效

```
 [CLSCompliant(false)]
    [DllImport("user32.dll", EntryPoint = "MessageBox")]
    public static extern int MessageBoxUser32(int hWnd, String text, String caption, uint type);

    const uint MB_TOPMOST = 0x00040000;
    const uint MB_OK  = 0x00000000;
    const uint MB_OKCANCEL = 0x00000001;
    const uint MB_ABORTRETRYIGNORE = 0x00000002;
    const uint MB_YESNOCANCEL = 0x00000003;
    const uint MB_YESNO = 0x00000004;
    const uint MB_RETRYCANCEL = 0x00000005;

     public static void ShowMessageBox(string message, bool topMost = true
        , string title = null, MessageBoxButtons buttons = MessageBoxButtons.OK)
    {
        if(topMost)
        {
            uint mbv = MB_TOPMOST;

            if (buttons == MessageBoxButtons.OK)
                mbv |= MB_OK;
            if (buttons == MessageBoxButtons.OKCancel)
                mbv |= MB_OKCANCEL;
            if (buttons == MessageBoxButtons.AbortRetryIgnore)
                mbv |= MB_ABORTRETRYIGNORE;
            if (buttons == MessageBoxButtons.YesNoCancel)
                mbv |= MB_YESNOCANCEL;
            if (buttons == MessageBoxButtons.YesNo)
                mbv |= MB_YESNO;
            if (buttons == MessageBoxButtons.RetryCancel)
                mbv |= MB_RETRYCANCEL;

            MessageBoxUser32(0, message, title == null ? string.Empty : title, MB_TOPMOST);
        }
        else
        {
            MessageBox.Show(message, title == null ? string.Empty : title, buttons);
        }
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-23T14:54:47.790

上面给出的答案显然是正确的，减去它需要在对象 new Form 上调用 System.iDisposable.Dispose 的事实。

```
MessageBoxButtons buttons = MessageBoxButtons.YesNo;
MessageBoxIcon icon = MessageBoxIcon.Error;
string message = Resources.ResourceManager.GetString("MESSAGE");
string caption = Resources.ResourceManager.GetString("TITLE");
DialogResult result;
Form form;
using (form = new Form())
{
    form.TopMost = true;
    result = MessageBox.Show(form, caption, message, buttons, icon);
}
if (result == DialogResult.Yes)
{
    // do something with the result
} 
```

更多：

[Top-Most-MessageBox 示例](https://gist.github.com/mikeyhalla/0c5f83225c5eb30cd75b92010b088dae#file-top-most-messagebox-cs)

# php - Zend 2 简单路由不能正常工作？

> ID：16105101
> 
> 赞同：0
> 
> 时间：2013-04-19T12:54:01.093
> 
> 标签：php, zend-framework2

我有这样的基本路线设置（只剩下相关部分）：

```
return array(
    'controllers' => array(
        'invokables' => array(
            'Main\Controller\Login' => 'Main\Controller\LoginController',
            'Main\Controller\Main' => 'Main\Controller\MainController',
            'Main\Controller\Index' => 'Main\Controller\IndexController',
            'Main\Controller\Candidate' => 'Main\Controller\CandidateController',
        ),
    ),

    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'literal',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        'controller' => 'Main\Controller\Index',
                        'action' => 'index',
                    ),
                ),
            ),
            'main' => array(
                'type' => 'literal',
                'options' => array(
                    'route' => '/ts',
                    'defaults' => array(
                        'controller' => 'Main\Controller\Main',
                        'action' => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'candidates' => array(
                        'type' => 'literal',
                        'options' => array(
                            'route' => '/candidate',
                            'defaults' => array(
                                'controller' => 'Main\Controller\Candidate',
                                'action' => 'index'
                            ),
                        ),
                        'may_terminate' => true,
                        'child_routes' => array(
                            'add' => array(
                                'type' => 'literal',
                                'options' => array(
                                    'route' => '/add'
                                ),
                                'defaults' => array(
                                    'action' => 'add'
                                ),
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ), 
```

所以我相信这些路线是：

```
/
/ts
/ts/candidate
/ts/candidate/add 
```

除了最后一个，一切都很顺利`/ts/candidate/add`

我做了一些基本的视图，每个都返回简单

```
echo '<action_name>' 
```

`action_name`控制器的动作在哪里。但是每次，当我进入时`/ts/candidate/add`，我`index action`从

```
'Main\Controller\CandidateController' 
```

而不是`add action`. 视图结构如下所示：

```
view
    -- errror
        -- 404.phtml
        -- index.phtml
    -- layout
        -- layout.phtml
        -- login.phtml
    -- main
        -- candidate
            -- index.phtml
            -- add.phtml
        -- main
            -- index.phtml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:07:54.047

您`defaults`的子路径在错误的位置，它们应该在里面`options`

```
 'child_routes' => array(
                        'add' => array(
                            'type' => 'literal',
                            'options' => array(
                                'route' => '/add'
                                // defaults go here
                                'defaults' => array(
                                    'action' => 'add'
                                ),
                            ),
                        ),
                    ), 
```

# sql - 使用多个表连接查询

> ID：16105102
> 
> 赞同：0
> 
> 时间：2013-04-19T12:54:04.897
> 
> 标签：sql, join, sum

以下是我的查询，我所做的是：

1) 从 ADV_CAMP 表中我获取 ADV_PACK 的 id；其表的 id 存储在 VIEWCAMP 表中。

这些是表之间的关系。

ADV_CAMP 数据的总金额存储在 ADV_PACK 表中，而 ADV_CAMP 表的花费金额存储在 VIEWCAMP 中。

2）所以我需要从 ADV_CAMP 表中获取两个随机值。存储在 VIEWCAMP 中的支出金额不会超过 ADV_PACK 总金额。

有没有办法在单个查询或任何其他解决方案中获取数据？

询问 ：

```
"SELECT *  FROM 
".ADV_CAMP.".c  
LEFT JOIN ".ADV_PACK.".p ON c.adv_pack=p.pack_id  
LEFT JOIN  ".VIEWCAMP.".v ON v.SUM(consumption_amount) > p.pack_credits;" 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:32:01.880

经过讨论并假设 和 之间的链接`ADV_CAMP`是`VIEWCAMP`由表和表中的`id`字段完成的，您可以尝试以下操作：`ADV_CAMP``adv_camp_id``VIEWCAMP`

```
SELECT 
    *  
FROM 
    ".ADV_CAMP." as c  
LEFT JOIN ".ADV_PACK." as p 
    ON c.adv_pack=p.pack_id  
LEFT JOIN (
    SELECT
        adv_camp_id,
        SUM(consumption_amount) as za_sum
    FROM 
        ".VIEWCAMP."
    GROUP BY
        adv_camp_id
) as tmp 
    ON tmp.adv_camp_id = c.id
    AND tmp.za_sum > p.pack_credits 
```

# windows - 看不到 windows phone 模板 - Visual Studio 2012 Premium - 不同的语言

> ID：16105104
> 
> 赞同：0
> 
> 时间：2013-04-19T12:54:12.633
> 
> 标签：windows, windows-phone-8

我已经安装了适用于 Windows Phone 8 的 SDK，但是我无法在 Visual Studio 2012 中创建 Windows Phone 项目

我知道它为什么不起作用，我的 Visual Studio 是法语，Windows Phone SDK 是英语

是否有任何无需重新下载相同语言的 sdk 或 vs 2012 的快速修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T21:19:12.357

不，您必须以相同的语言安装 Visual Studio 2012 和 Windows Phone SDK。否则模板不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T14:44:27.987

我完成了[Visual Studio 英语语言包](http://www.microsoft.com/en-US/download/details.aspx?id=30681)的下载并使用英语的 VS2012，而不是将模板从一种语言复制到另一种语言。

# sql - 当按与 ID 无关的条件排序时，选择出现在具有给定 ID 的行之后的行

> ID：16105105
> 
> 赞同：1
> 
> 时间：2013-04-19T12:54:13.043
> 
> 标签：sql, postgresql, activerecord

给定“人”表中的数据：

```
+----+-------+
| id | name  |
+----+-------+
|  1 | Jane  |
|  2 | Joe   |
|  4 | John  |
|  5 | Alice |
|  6 | Bob   |
+----+-------+ 
```

和顺序：

```
SELECT * FROM people ORDER BY name 
```

...这将返回：

```
+----+-------+
| id | name  |
+----+-------+
|  5 | Alice |
|  6 | Bob   |
|  1 | Jane  |
|  2 | Joe   |
|  4 | John  |
+----+-------+ 
```

如何编写一个查询（包括上面的顺序），它只返回具有给定 id 的行之后的行，例如，如果给定 id 为 1，它将返回：

```
+----+-------+
| id | name  |
+----+-------+
|  2 | Joe   |
|  4 | John  |
+----+-------+ 
```

需要明确的是，id 是可变的，并且事先不知道。

使用通常支持的 SQL 的方法会很棒，但如果 PostgreSQL 9.2 和 ActiveRecord 3.2 有任何其他用途，例如 OVER() 和 ROW_NUMBER()，我将使用它们。

[编辑] 我之前显示了错误的所需结果集，包括具有给定 ID 的行。但是，如问题中所述，结果集应仅包含给定 ID*之后的行。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:01:45.410

```
select *
from people
where
    name >= (
        select name
        from people
        where id = 1
    )
    and id != 1
order by name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:24:59.357

到目前为止，对于需要精度的情况，我发现的最简单的方法是结合窗口函数和 CTE，例如，在具有不同 ID 值的多个调用中没有丢失或重复结果，如下所示：

```
WITH ordered_people AS (
  SELECT *, ROW_NUMBER() OVER (ORDER BY name) AS n
  FROM people
  ORDER BY name
)

SELECT * 
  FROM ordered_people
  WHERE n > (SELECT n FROM ordered_people WHERE id = 1)
  ORDER BY name
; 
```

# java - GWT RequestFactory - 如何正确初始化它？

> ID：16105107
> 
> 赞同：1
> 
> 时间：2013-04-19T12:54:18.433
> 
> 标签：java, unit-testing, gwt, junit, requestfactory

我的 GWT 应用程序遵循 MVP 模式，将单例`EventBus`和`Display`+`Presenter`绑定在一起`Activity`（在 GIN 的帮助下）：

```
public class MyActivity implements Activity {
  @Inject MyDisplay display; //usually bound in Singleton scope
  @Inject MyPresenter presenter;

  ...
  @Override
  public void start(AcceptsOneWidget panel, EventBus eventBus) {
    diplay.bindPresenter(presenter);
    presenter.start(eventBus);
    panel.setWidget(display);
  }
  ...
} 
```

通常我会使用 GIN将新的特定实例注入`RequestFactory`特定的实例。`Presenter`我的演示者有`start()`方法，我可以传递`EventBus`代表`Activity`( `ResettableEventBus`) 创建的实例。

```
public MyPresenter {

  @Inject MyRequestFactory requestFactory;

  public void start(EventBus eventBus) {
    requestFactory.initialize(eventBus);
    ...
  }
  ...
} 
```

我认为让 GIN 创建和注入`MyRequestFactory`. 但是如果我想对`MyPresenter`using进行单元测试`RequestFactorySource`，我宁愿需要初始化`RequestFactory`using：

```
requestFactory.initialize(eventBus, new InProcessRequestTransport(processor)); 
```

问题来了。我可以`MyRequestFactory`在范围内绑定`Singleton`（生成的实例是否保持任何状态？），并用我的单例全局初始化它`EventBus`（它是否取决于`Activity`'s `EventBus`？） - 后果是什么？我假设`MyRequestFactory`注入到的实例`MyPresenter`已经为生产或测试初始化​​。另一种解决方案是在 中注入一些额外的`RequestFactory`初始化策略`MyPresenter`，但有必要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:43:42.350

`RequestFactory`旨在**用作**单*例*。

假设您还有一个应用程序范围的事件总线，它的工作方式与您今天使用的一样：RequestFactory 只发布到事件总线，它不监听事件。

# php - 仅匹配二级域中的字符串

> ID：16105110
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:54:24.827
> 
> 标签：php, regex, parsing, preg-match

用户在我的脚本中输入域/子域作为输入。我不想允许域内的特定字符串，但允许它们在子域内（如果使用子域）。

这是一个示例用户输入：

[此处允许出现坏词]。[此处不允许出现坏词]。[tld]

[不要在这里说坏话]。[tld]

请注意，TLD 可能由单个部分 (.com) 或多个部分 (.co.uk) 组成，应予以考虑。出于这个原因，一个简单的正则表达式将无法解决问题。

此外，坏词可能在域或子域本身之前、之后或之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:09:04.630

按照你的例子：

```
"^[^.]*bad[^.]*\.[^.]+$" 
```

如果匹配，则不应允许。

但是，如果您需要更通用的答案，则必须进行更多研究。

**编辑：**
如果您有二级域名列表：

```
"bad[^.]*\.(co.uk|com|...)$" 
```

尽管这可能会很慢。最好匹配bad，然后检查二级域名是否在列表中。

# facebook - 用于合并多个帐户和注册用户帐户的架构

> ID：16105112
> 
> 赞同：5
> 
> 时间：2013-04-19T12:54:29.837
> 
> 标签：facebook, security, architecture, oauth, multiple-login

[我的问题和这个](https://stackoverflow.com/questions/6666267/architecture-for-merging-multiple-user-accounts-together)几乎一样

唯一的区别是用户可以选择注册（提供他的用户名和密码）。用户应该只注册一个帐户，如果用户有相同的电子邮件我合并了这些帐户。我的应用程序有另一种登录方法，即通过 Facebook。

我基本上做的是

*   当用户第一次访问for站点时，他或她会创建一个用户帐户，在创建第三方身份记录后，它只有用户名、密码和邮件地址，然后与本地帐户配对。但是用户表将有一个空的用户名和密码，但电子邮件将填充我们从第三方服务提供商处检索到的用户电子邮件

第二个场景

*   用户尝试注册到该站点。检查邮箱是否存在合并本地创建的账户和第三方账户。

现在我的问题是我的方法安全可靠吗？如果不是合并帐户的最佳方法是什么，同时如果用户使用相同的电子邮件（来自第三方帐户的电子邮件）注册并且他有第三方帐户，那么这些帐户将被合并？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T23:32:39.907

我将提供两组行为，一组在登录时，另一组在注销时。

登录后，您可以链接到新的第三方帐户。例如，您使用电子邮件地址和密码注册，然后登录，然后您可以链接您的 Facebook 帐户。要将您授权的 Facebook 帐户与 Facebook 关联，然后将 Facebook 信息存储在该用户帐户记录中。

注销时，您必须使用现有凭据登录。如果在注销时尝试使用现有电子邮件地址创建帐户，您要么阻止登录，说“具有该电子邮件地址的帐户已存在”，要么立即要求用户登录以合并帐户（在这种情况下，它与链接外部帐户时的登录情况类似，只是身份验证操作的顺序相反）。

如果以上内容不清楚，我建议使用单个用户帐户以及记录该帐户与外部帐户之间联系的方法。您可以在 NoSQL 中执行此操作，只需将字段添加到用户文档，或者您可以通过使用一个表示外部帐户的表以将它们链接到用户 ID 的外键来执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:34:16.353

在我看来，只有一个帐户。一封电子邮件，一个帐户期间。可能有与该帐户相关联的各种属性，例如链接到一组 OAuth 凭据等。但基本上只有一个帐户。如果您的用户使用社交帐户注册过一次，然后尝试在您的网站上再次注册，请将他们发送到他们第一次注册时使用的社交网站并要求他们在那里登录。然后将它们自动登录到您的站点。如果用户在您的网站上有一个帐户，然后尝试使用社交帐户再次注册，请告诉他们您已经在该网站上拥有一个帐户并要求他们登录。恕我直言，保留单独的帐户并尝试合并它们是一个混乱的想法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-01T08:42:49.300

注意不要使用 oAuth 2.0 ！主要[作者本人辞职](http://hueniverse.com/2012/07/oauth-2-0-and-the-road-to-hell/)，因为它不如 1.0 版本安全。

您应该更喜欢 oAuth 1.0 或 OpenID。

您还可以查看[来自 Mozilla 的 Persona](http://www.mozilla.org/en-US/persona/)

# iphone - Facebook 发出安全警告：请把上面的 URL 当作你的密码对待，不要与任何人分享

> ID：16105113
> 
> 赞同：12
> 
> 时间：2013-04-19T12:54:40.230
> 
> 标签：iphone, ios, facebook, ipad

我已将 Facebook 与我的应用程序集成以发布内容。它一直工作到应用程序的 1.2 版，但现在我在登录后收到安全警告，如下所示。

关于这个安全警告的奇怪之处在于，它可以在我的一个 Facebook 帐户上正常工作，而没有像以前那样发出任何警告，但是我在另一个帐户中收到了这个警告。我附上了这个问题的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/TZvrn.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T12:33:43.457

禁用安全浏览是不值得的，因为我们不能让所有用户都禁用安全浏览。

我确实已经解决了。在这里查看我的答案。[逃离 Facebook 安全警告](https://stackoverflow.com/a/16831606/1309698)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:41:19.200

在网上花了很长时间搜索这个问题。最后我得到了关于它的答案。

**登录 Facebook 帐户**> 进入**隐私设置**> 点击页面**左侧**的安全标签 > 然后**禁用安全浏览**

现在重置您的模拟器，然后运行应用程序并再次登录它肯定会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-22T19:04:44.050

简短的回答是，如果您使用自己的 redirect_uri 而不是标准的 facebook ，则可以解决问题。当访问令牌返回时，标准的 www.facebook.com/connect/login_success.html 页面有一个计时器，它可能会在您的应用程序检索访问令牌之前更改 URL。

此问题可能与 Internet 延迟有关。我们有两个客户报告了这个问题，一个在缅甸，一个在英国。其他任何人都没有问题。假设您是这样授权的：

```
https://www.facebook.com/v2.10/dialog/oauth?client_id=999999999999999&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=token&scope=user_photos,user_events&display=popup 
```

对于默认的 redirect_uri ( [https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html) )，facebook 在 URL 的参数中返回 access_token，但该页面的 html 正文包含两个计时器：

```
 Success <br/>
<b id="warning" style="display: none; color:red">
    SECURITY WARNING: Please treat the URL above as you would your password and do not share it with anyone. 
    See the <a href="http://l.facebook.com/l.php?u=xxxxxxx" target="_blank" data-lynx-mode="hover">Facebook Help Center</a> for more information.
</b>
<script type="text/javascript">
    document.domain = 'facebook.com';
    if (window == top) {
        setTimeout(function () { document.getElementById("warning").style.display = "block"; }, 2000);
    }
    setTimeout(function () { if (window.history.replaceState) { window.history.replaceState({}, "", "\/connect\/blank.html#_=_"); } }, 2000);
</script> 
```

当任一计时器触发时，它将更改删除 access_token 的 URL。因此，只要您在它改变之前抓住它，一切都会奏效。在我们的例子中，我们在 Windows 下使用嵌入式浏览器控件并监控导航链接。只要代码可以在此超时发生之前接收到包含 access_token 的导航事件，那么一切正常。我们永远无法确定互联网连接的延迟以及用户计算机速度慢的某种组合是如何导致此问题的，但这解决了它。

在您的 Facebook 应用程序的 Facebook 登录设置中，将您自己的 URI 添加到有效 OAuth 重定向 URI 列表中。如果您重定向到自己的 html 页面，则可以避免 facebook 超时。

# windows-phone-7 - 图像 Uri 未出现在 XAML 中

> ID：16105114
> 
> 赞同：0
> 
> 时间：2013-04-19T12:54:42.407
> 
> 标签：windows-phone-7, xaml

我不明白这个问题：我有一个图像的链接，但它不可见：

```
<Image Source="http://www.bestofleboncoin.fr/img/adsok/thumbs/304409998.jpg" Margin="0,10,0,0" /> 
```

如果我下载这张图片并将其保存在解决方案中就可以了！

```
<Image Source="/304409998.jpg" Margin="0,10,0,0" /> 
```

如果我在我的个人网站上上传，这张图片也是可见的。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:32:40.293

您可以使用下载它`WebClient`然后将其显示在您的控件中吗？此外，出于性能原因，您应该这样做。

看起来好像有问题的网站禁止直接链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:27:45.073

我有一个小解决方案，但我不知道表演....

```
 <phone:WebBrowser Name="Browser" Source="{Binding Links[1].Uri}"  /> 
```

# javascript - Jquery没有正确附加值

> ID：16105119
> 
> 赞同：0
> 
> 时间：2013-04-19T12:54:57.670
> 
> 标签：javascript, jquery

我在页面加载时有一组固定的输入字段。我有显示值的复选框，当有人选中复选框时，值将添加到输入字段中。如果填写了所有输入字段，则会创建一个新字段。我的问题是，复选框值已正确插入现有输入字段，如果值超过，则会创建一个新输入字段，但在创建输入字段时不会立即插入值。只有在下一次单击时才会插入值新创建的输入字段。这是代码

```
<script>
    function fillin(entire,name,id,key) {
        if (entire.checked == true) {
            var split_info = new Array();
            split_info = name.split(":"); 
            var div = $("#Inputfields"+id);
            var till = (div.children("input").length)/4;
            var current_count = 0;
            for (var j=0;j<till;j++) {
                if (document.getElementById("insertname_"+j+"_"+id).value == "" && document.getElementById("insertnumber_"+j+"_"+id).value == "") {
                    document.getElementById("insertname_"+j+"_"+id).value = split_info[0];
                    document.getElementById("insertnumber_"+j+"_"+id).value = split_info[1];
                    break;
                } else
                    current_count = current_count+1;
                if (current_count == till) {
                    var x= addnew(id);
                    x =x+1;
                    $("#Inputfields"+id).find("#insertname_"+x+"_"+id).value = split_info[0];
                    alert($("#Inputfields"+id).find("#insertname_"+x+"_"+id).value);
                    document.getElementById("insertname_"+x+"_"+id).text = split_info[0];
                    //alert(document.getElementById("insertname_"+x+"_"+id).value);
                    //document.getElementById("insertnumber_"+x+"_"+id).value = split_info[1];
                }
            }
        } else {
        }
    }
</script>

<script>
function addnew(n) {
    //var id = $(this).attr("id");
    var div = $("#Inputfields"+n);
    var howManyInputs = (div.children("input").length)/4;
    alert(howManyInputs);
    var val = $("div").data("addedCount");

    var a = '<input type="search" id="insertinstitute_'+(howManyInputs)+'_'+n+'" placeholder="Institute" class="span3">';
    var b =  '<input type="search" id="insertname_'+(howManyInputs)+'_'+n+'" placeholder="name" class="span3">';
    var c =  '<input type="search" name="" id="insertnumber_'+(howManyInputs)+'_'+n+'" placeholder="number" class="span3">';
    var d =  '<input type="search" name="" id="insertarea_'+(howManyInputs)+'_'+n+'" placeholder="area" class="span3">';
    var fin = a+b+d+c;
    $(fin).appendTo(div);
    div.data("addedCount", div.data("addedCount") + 1);
    return howManyInputs;
}
</script> 
```

更新：谢谢大家。我能够找到错误。罪魁祸首是 `x =x+1;`。应该是`x`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:00:16.690

问题大概出在这里：

```
document.getElementById("insertname_"+x+"_"+id).text 
```

元素中没有`text`属性。有`textContent`（不在 IE8- 中）、`innerText`（在 IE 中）和`innerHTML`. 不过，jQuery 中有`text`方法。所以你可以这样做：

```
document.getElementById("insertname_"+x+"_"+id).innerHTML = ... 
```

或者

```
$("#insertname_"+x+"_"+id).text(...); 
```

此外，这些行：

```
$("#Inputfields"+id).find("#insertname_"+x+"_"+id).value = split_info[0];
alert($("#Inputfields"+id).find("#insertname_"+x+"_"+id).value); 
```

`.value`应该替换为`.val()`，因为这些是 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:52:43.473

由于很多原因，我已经修改了很多代码。比较两者。

```
function fillin(entire, name, id, key) {
    if (entire.checked) {
        var split_info = [];
        split_info = name.split(":");
        var div = $("#Inputfields" + id);
        var till = (div.children("input").length) / 4;
        var current_count = 0;
        var j = 0;
        for (j = 0; j < till; j++) {
            var myj = j + "_" + id;
            if ($("#insertname_" + myj).val() === "" && $("#insertnumber_" + myj).val() === "") {
                $("#insertname_" + myj).val(split_info[0]);
                $("#insertnumber_" + myj).val(split_info[1]);
                break;
            } else {
                current_count = current_count + 1;
            }
            if (current_count === till) {
                var x = addnew(id) + 1;
                div.find("#insertname_" + x + "_" + id).val(split_info[0]);
                alert(div.find("#insertname_" + x + "_" + id).val());
                $("#insertname_" + x + "_" + id).val(split_info[0]);
            }
        }
    }
}

function addnew(n) {
    var div = $("#Inputfields" + n);
    var howManyInputs = (div.children("input").length) / 4;
    alert(howManyInputs);
    var myi = (howManyInputs) + '_' + n + '"';
    var val = div.data("addedCount");

    var a = '<input type="search" id="insertinstitute_' + myi + ' placeholder="Institute" class="span3">';
    var b = '<input type="search" id="insertname_' + myi + '  placeholder="name" class="span3">';
    var c = '<input type="search" name="" id="insertnumber_' + myi + ' placeholder="number" class="span3">';
    var d = '<input type="search" name="" id="insertarea_' + myi + '  placeholder="area" class="span3">';
    var fin = a + b + d + c;
    $(fin).appendTo(div);
    div.data("addedCount", val + 1);
    return howManyInputs;
} 
```

# xcode - XCode 和 Qt 之间的犹豫

> ID：16105121
> 
> 赞同：2
> 
> 时间：2013-04-19T12:54:58.887
> 
> 标签：xcode, qt, video, graphics, project-planning

我计划使用通用模块在各种平台上开发一套应用程序。我还在 XCode 和 Qt 之间犹豫不决。这是我的发展计划：

1.  我需要尽快为 MacOSX 开发一个具有简单用户界面的产品 A
2.  我想在 iOS 上使用具有简单用户界面的通用模块开发类似的产品 (B)
3.  我想使用具有复杂用户界面的通用模块开发一个新产品（C）跨平台（Windows/MacOSX/Linux）

以下是要了解的内容列表：

*   产品 A 处理图形和视频，需要强大的性能（60fps 不是 58 或 59）。
*   我担心在 XCode 上开发产品 A，因为*XCode*是*****但我想知道如果我不使用本机代码是否存在一些性能问题。
*   我最终可以将 Android 用于产品 B，但我的大多数客户都使用 iOS
*   Qt 非常适合产品 C。

我的问题是我应该从 XCode 开始然后传递给 Qt 还是直接从 Qt 开始？我是一个初创公司，所以时间很重要，但产品 B 可能会延迟。我现在需要做出这个决定，所以我想听听你们的意见:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:07:32.477

可能我会因为这样的答案而被打败，但这是基于大约 15 年的 Qt 开发经验（我开始工作的第一个版本是 1.33 .. OMG）。

我的大部分职业生涯都在开发 Qt 跨平台应用程序（Win32/Linux/MacOS/embedded）。开发跨平台应用程序假设遵循一定的编码风格，库/第三方工具，你将在 Qt 之外使用，但主要问题是你应该是主要的开发平台，而其他的将只是目标。

关于开发平台（虽然我主要是 MacOSX 和 Linux 用户）我认为 VS 是最好的。可能是另一个主题的主题，但我相信 Visual Studio 是可用的最快的 C++ 开发平台。QtCreator（虽然它是一个非常好的工具）永远不会像原生 MS 产品那样很好地集成到 OS 内核中用于调试目的。同样适用于 Mac 和 Linux。你调试的所有东西最后都只是 GDB 的前端。如果你需要快速开发它，你的编辑器有多快，你从调试命令切换到第一个断点的速度有多快。对我来说可悲的是，在 Unix 中世界上没有什么比 Visual Studio for WinXX 更集成的开发了。

我使用 Mac 的最后 10-12 年.. 我目前的开发机器是 MacBook Pro（2011 年末）+ 16Gb .. Parallels VM + Win7 + VS2012 中的开发比 XCode 或 QtCreator 更快、更高效。

我知道 Mac 附带的 GDB 比我的毕业妈妈的车更老，并且将其更新到最新的稳定版使 QtCreator 的响应速度提高了 10 倍......但是你仍然每天编写 1000 多行代码，整体速度还不够好。

这不是因为 XCode 不好，而是 XCode 是一个 Objective-C 平台，我认为这不是尝试将 Qt 融入其中的正确方法。

重要提示：上面所说的一切都不适用于 VS2010，这是纯粹的 MS 错误。这是一个缓慢而有缺陷的环境，不应该被视为任何东西的生产环境。我的路径是（尽管我拥有所有主要的 MS VS 版本）6.0 -> 2008 -> 2012..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:28:19.397

您仍然可以将 XCode 用于 MacOSX 应用程序，因为所有工具和预设图形都已经存在，所以使用起来更加容易和快捷。

# wpf - 如何创建像 Word 选项一样的黄色切换按钮

> ID：16105122
> 
> 赞同：1
> 
> 时间：2013-04-19T12:55:00.813
> 
> 标签：wpf, wpf-controls

我正在尝试创建一个菜单，其按钮类似于 Word 中的选项菜单（如下）。

这是我缺少的特定 WPF 控件，还是自定义样式的按钮？我尝试在切换时设置背景，但它看起来不像：

```
 <ToggleButton>
                <Border>
                    <Border.Style>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="Background" Value="Transparent"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ElementName=parentButton, Path=IsChecked}" Value="True">
                                    <Setter Property="Background" Value="Orange"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <Label Content="Modify Variations"></Label>
                </Border>

            </ToggleButton> 
```

![在此处输入图像描述](https://i.stack.imgur.com/RI4Uv.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:32:31.510

像这样的模板会帮助你

```
<Window.Resources>
    <Style TargetType="ToggleButton">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Padding" Value="10,5,0,5"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border x:Name="bord" BorderThickness="{TemplateBinding Property=BorderThickness}" CornerRadius="3">
                        <ContentPresenter VerticalAlignment="{TemplateBinding Property=VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding Property=HorizontalContentAlignment}" Margin="{TemplateBinding Property=Padding}"/>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                           <!--put setters here to change button background when IsChecked = true-->
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

请注意，您可以添加其他触发器，例如：`IsEnabled`, `IsMouseOver`,`IsPressed`来自定义您自己的`ToggleButton`样式

**编辑：**

您还可以在此处获取 Microsoft Word 主题文件

[WPF Office 2010 蓝色主题](http://visualstudiogallery.msdn.microsoft.com/3947f3a9-054c-4637-9070-68aadbb1e8b1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:46:49.363

你可以这样试试！！！

```
 <ControlTemplate x:Key="ToggleButtonControlTemplate1" TargetType="{x:Type ToggleButton}">
        <Border x:Name="outerBorder" BorderBrush="Black">
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="Transparent" Offset="0"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                    <GradientStop Color="Transparent" Offset="0.125"/>
                    <GradientStop Color="Transparent" Offset="0.724"/>
                </LinearGradientBrush>
            </Border.Background>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal"/>
                    <VisualState x:Name="MouseOver">
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[0].(GradientStop.Offset)" Storyboard.TargetName="outerBorder">
                                <EasingDoubleKeyFrame KeyTime="0" Value="0.004"/>
                            </DoubleAnimationUsingKeyFrames>
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[0].(GradientStop.Color)" Storyboard.TargetName="outerBorder">
                                <EasingColorKeyFrame KeyTime="0" Value="#FFFDF9E8"/>
                            </ColorAnimationUsingKeyFrames>
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[2].(GradientStop.Color)" Storyboard.TargetName="outerBorder">
                                <EasingColorKeyFrame KeyTime="0" Value="#FFFDEAA2"/>
                            </ColorAnimationUsingKeyFrames>
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(GradientBrush.GradientStops)[3].(GradientStop.Color)" Storyboard.TargetName="outerBorder">
                                <EasingColorKeyFrame KeyTime="0" Value="#FFFDE794"/>
                            </ColorAnimationUsingKeyFrames>                             
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="outerBorder">
                                <EasingColorKeyFrame KeyTime="0" Value="#FFF7D84B"/>
                            </ColorAnimationUsingKeyFrames>
                            <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderThickness)" Storyboard.TargetName="outerBorder">
                                <EasingThicknessKeyFrame KeyTime="0" Value="1"/>
                            </ThicknessAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.CornerRadius)" Storyboard.TargetName="outerBorder">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <CornerRadius>5</CornerRadius>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed"/>
                    <VisualState x:Name="Disabled"/>
                </VisualStateGroup>
                <VisualStateGroup x:Name="CheckStates">
                    <VisualState x:Name="Checked">
                        <Storyboard>
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="innerBorder">
                                <EasingColorKeyFrame KeyTime="0" Value="#FFFFE48A"/>
                            </ColorAnimationUsingKeyFrames>
                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="innerBorder">
                                <EasingColorKeyFrame KeyTime="0" Value="#FFC2762B"/>
                            </ColorAnimationUsingKeyFrames>
                            <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderThickness)" Storyboard.TargetName="innerBorder">
                                <EasingThicknessKeyFrame KeyTime="0" Value="2"/>
                            </ThicknessAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.CornerRadius)" Storyboard.TargetName="innerBorder">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <CornerRadius>5</CornerRadius>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Unchecked"/>
                    <VisualState x:Name="Indeterminate"/>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Border x:Name="innerBorder" Background="Transparent" BorderBrush="Black">
                <TextBlock TextWrapping="Wrap" Text="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
        </Border>
    </ControlTemplate>

</Window.Resources>

<Grid x:Name="LayoutRoot">
    <ToggleButton Content="ToggleButton" Margin="172,145,93,147" Template="{DynamicResource ToggleButtonControlTemplate1}" />
</Grid> 
```

# jquery - jquery use :contains 为其他 div 编辑 css

> ID：16105128
> 
> 赞同：0
> 
> 时间：2013-04-19T12:55:21.387
> 
> 标签：jquery, contains

如果另一个 div 包含某些单词，我正在尝试使用 :contains 来更改 div 的 css 样式，例如我可以使用此代码来查找更改父级，但是对于不是父级的 div，我该如何做呢？

```
$(".readmorecircle:contains('Huge')").parent().css("border", "2px solid #ffff00"); 
```

我设置了一个小提琴，它是我无法弄清楚的最后一行？

[http://jsfiddle.net/bloodygeese/nTJTg/4/](http://jsfiddle.net/bloodygeese/nTJTg/4/)

最好知道如何根据一个 div 的内容同时更改几个 div 的 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:05:01.067

实际上，您在小提琴中的最后一行是不正确的。代替这个：

```
$(".readmorecircle:contains('Huge')").readmorecircle3().css("border", "2px solid #ffff00"); 
```

应该是这样的：

```
$(".readmorecircle:contains('Huge')").parent().css("border", "2px solid #ffff00"); 
```

此外，最后的 HTML 不正确。代替这个：

```
<div id="readmorecircle3"></div>
    <p class="readmorecircle">Huge</p> 
```

应该是这样的：

```
<div id="readmorecircle3">
   <p class="readmorecircle">Huge</p>
</div> 
```

更新：

```
if ($(".readmorecircle:contains('Huge')").length) {
    $("#readmorecircle3").css("border", "2px solid #ffff00");
} 
```

# c# - 按下一个按钮来增加一个变量，该变量会改变打印到屏幕上的值..？

> ID：16105129
> 
> 赞同：0
> 
> 时间：2013-04-19T12:55:25.593
> 
> 标签：c#, visual-studio-2010, class, user-interface

我知道我的问题有点模糊，但有点难以解释......

基本上我有一个带有 i++ 的事件按钮，它已经被声明：

```
 public void nextCardButton_Click(object sender, EventArgs e)
    {
        i++;
    } 
```

然后我有一个包含各种值的数组，下面是几个值的示例：

```
 myCard[0] = new Card("Vodka", 5, 6, 4, 0);
        myCard[1] = new Card("Gin", 7, 8, 3, 0); 
```

然后将其分成两个不同的玩家手。

然后我将我的值输出到我的 Windows 窗体应用程序中的标签中：

```
 label1.Text = player1[i].cardName;
        percentageLabel1.Text = player1[i].cardPercentage.ToString();
        qualityLabel2.Text = player1[i].cardQuality.ToString();
        quantityLabel2.Text = player1[i].cardQuantity.ToString();
        tasteLabel2.Text = player1[i].cardTaste.ToString(); 
```

如您所见，“i”负责更改输出的值...

我的问题是。如何增加“i”以更改标签中的值？我的代码在

```
public void topTrumps_Load(object sender, EventArgs e) 
```

我的按钮点击是

```
public void nextCardButton_Click(object sender, EventArgs e) 
```

对不起，如果这有点含糊，但我不知道还能问什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:00:05.410

我相信，你想要的是（大致）这个：

```
int i = 0;
public void nextCardButton_Click(object sender, EventArgs e)
{
    i++;

    label1.Text = player1[i].cardName;
    percentageLabel1.Text = player1[i].cardPercentage.ToString();
    qualityLabel2.Text = player1[i].cardQuality.ToString();
    quantityLabel2.Text = player1[i].cardQuantity.ToString();
    tasteLabel2.Text = player1[i].cardTaste.ToString();
} 
```

# code-snippets - 在片段中传递 TV 值（MODx Evo）

> ID：16105132
> 
> 赞同：0
> 
> 时间：2013-04-19T12:55:33.077
> 
> 标签：code-snippets, modx

使用 MODx Evo 1.0.9。我正在尝试使用以下代码段在模板中获取 youtube 视频标题：

```
<?php
$code = "<<<Youtube Video ID>>>";
$video_feed = file_get_contents("http://gdata.youtube.com/feeds/api/videos?v=2&q=".$code."&max-results=1&fields=entry(title)&prettyprint=true");
$video_obj = simplexml_load_string($video_feed);
$video_str = $video_obj->entry->title;
$output = $video_str;
return $output;
?> 
```

在上面的代码中，我想在`$code`变量中传递来自电视的 youtube 视频 ID。使用`[*youtubeID*]`不起作用。解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:36:23.133

如果它像 Revo 一样工作，那么 youtube id 可以作为您传递的变量或作为 scriptPrperty 使用，

```
[[!MySnippetName? &youTubeId='456']] 
```

然后在您的代码段中：

```
<?php
$code = $youTubeId;
//or
$code = $scriptPropertes('youTubeId);//might have to check this one. 
```

# r - 循环在 R 中不起作用

> ID：16105134
> 
> 赞同：0
> 
> 时间：2013-04-19T12:55:38.163
> 
> 标签：r

这不起作用，我不知道为什么。

```
look_up  <- data.frame(flat=c("160","130"),
                   street=c("stamford%20street", "doddington%20grove"),
                   city = c("London", "London"),
                   postcode = c("SE1%20", "se17%20"))

new <- data.frame()
for(i in 1:nrow(look_up)){
  new <- rbind(new,look_up$flat[i])
} 
```

如果有人能告诉我为什么，感激不尽！我的结果应该是一个数据框，其中有一列称为“flat”，每行的值分别为 160 和 130。一旦我明白了这一点，我就可以开始做我想做的真正的事情了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:58:46.687

不需要循环：

```
look_up[,"flat",drop=FALSE] 
```

如前所述，您的循环的问题是自动转换为因子。你可以把`options(stringsAsFactors=FALSE)`你的脚本放在前面来避免这种情况。

但是，几乎可以肯定，您正在以错误的方式处理您的实际问题。您可能应该问一个新问题，告诉我们您真正想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:02:25.353

您需要研究 的`stringsAsFactors`论点[`data.frame`](http://help.r-enthusiasts.com/library/base/html/data.frame.html)。

```
look_up  <- data.frame(flat=c("160","130"),
                   street=c("stamford%20street", "doddington%20grove"),
                   city = c("London", "London"),
                   postcode = c("SE1%20", "se17%20"), 
                   stringsAsFactors = FALSE)
look_up[, "flat", drop = FALSE ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:34:49.800

您还可以执行以下操作：

```
> look_up  <- data.frame(flat=c("160","130"),
+                        street=c("stamford%20street", "doddington%20grove"),
+                        city = c("London", "London"),
+                        postcode = c("SE1%20", "se17%20"))
> 
> new <- look_up[,1,drop=FALSE]
> new
  flat
1  160
2  130
> class(new)
[1] "data.frame" 
```

这表明您最终想要的输出是一个数据框，列上有 160 和 130。如果您不包括`drop=FALSE`这里，那么您的最终输出将是一个因素。希望这可以帮助。

# facebook - Edge Side Includes (ESI) 是否类似于 Facebook 的 BigPipe？

> ID：16105139
> 
> 赞同：2
> 
> 时间：2013-04-19T12:55:56.040
> 
> 标签：facebook, performance, web-applications, symfony, esi

每个对 Web 应用程序性能感兴趣的人都知道[Facebook 的 BigPipe](https://www.facebook.com/note.php?note_id=389414033919)背后的想法。

最近，Symfony 发布了一个新功能，称为[Fragments 子框架](http://symfony.com/blog/new-in-symfony-2-2-the-new-fragment-sub-framework)。

这个特性的想法是使用 ESI 技术，W3C 将其描述为[ESI 语言规范 1.0](http://www.w3.org/TR/esi-lang)。

我的问题是：Facebook 的 BigPipe 是否与这种 ESI 技术相关？我可以使用 ESI 实现 BigPipe 的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T00:25:36.633

可能没有您自己的 ESI 服务器实现，即使这样，是否值得性能打击也是值得怀疑的。

假设我正确理解 BigPipe 文章，服务器端所要做的就是 a) 立即将一些静态 HTML 内容刷新到客户端，b) 异步启动一些渲染线程并在线程完成渲染时刷新输出。其余的是 javascript 魔术，与服务器端框架无关。

Symfony 能够呈现一个简单的 HTML 文档并在其中包含 ESI 标记，因此 a) 被覆盖。但是 ESI 取决于遇到标签的顺序。这意味着虽然我认为大多数缓存服务器将开始异步处理所有 ESI 标记，但它们只能以特定顺序刷新输出。反过来，这意味着如果您的第一个 ESI 标记很慢，它将阻止任何其他“pagelet”被刷新给用户。

这就是为什么我认为您需要一种特殊类型的缓存服务器，它可以异步获取包含内容，同时*完全忽略*它们出现在文档中的位置。

另一个主要缺点是每个 ESI 标签都会导致它自己的 HTTP 请求到 symfony，这对于每个请求都有相当大的设置开销。

结论：如果您想返回一个缓存页面，该页面的生成成本很高，并且包含少量不可缓存的内容，那么 ESI 非常棒，但它可能不适合实现 BigPipe。

# qt - 参数中带有结构的 QT 信号

> ID：16105141
> 
> 赞同：1
> 
> 时间：2013-04-19T12:55:58.377
> 
> 标签：qt, signals, slot

我有课：

```
class SupervisionManager : public QThread {
    Q_OBJECT public:
    explicit SupervisionManager(ComAds* com, ComRegEtat* comEt,
                                ComRegOrdonnanceur* comOrdo,
                                QObject *parent = 0);
    ~SupervisionManager();  

protected:
    virtual void run();

private:
    void actionFromPlc();

    ComRegEtat::Antichoc antichoc;

signals:
    void majAntichoc(ComRegEtat::Antichoc&);
}; 
```

和实施：

```
void SupervisionManager::run() {
    manage=true;

    while(manage)
    {
        actionFromPlc();
        usleep(5000);
    }
}

void SupervisionManager::actionFromPlc() {
    antichoc.SAS = false;
    emit majAntichoc(antichoc);
} 
```

我将此信号与：

```
connect(manager, SIGNAL(majAntichoc(ComRegEtat::Antichoc&)),
        preparation, SLOT(affichageAntichoc(ComRegEtat::Antichoc&))); 
```

如何`struct`在其参数列表中发出带有 a 的信号？我想我必须使用 a`QSignalMapper`但我不明白如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:35:16.600

使用我的代码，在发出信号时不会调用插槽。

我找到了解决方案：

```
signals:
    void majAntichoc(ComRegEtat::Antichoc *); 
```

和

```
slot : 
    void affichageAntichoc(ComRegEtat::Antichoc *); 
```

而且我不必使用`QSignalMapper`.

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:39:19.837

与您发出其他东西的方式完全相同..

```
ComRegEtat::Antichoc  myStruct;
.. some initialisation code
emit majAntichoc(myStruct); 
```

我不确定最新的Qt（在他们更改了基于模板的信号/插槽之后），但在'emit'之前只是空定义，所以你应该像函数调用一样查看emit...

# css - 在浏览器中查看打印 css

> ID：16105147
> 
> 赞同：20
> 
> 时间：2013-04-19T12:56:09.940
> 
> 标签：css

我想知道如何检查我的打印 css，就像我用普通 css 检查我的元素时一样，我到处寻找插件和类似的东西

就像您在 chrome 中预览打印但您能够检查元素时一样

![在此处输入图像描述](https://i.stack.imgur.com/Otc1o.jpg)

```
@media print {
   p{color:red;}
   ..... my css
}
.sharebar {
    position: absolute;
    right: 0;
    top: 0;
    z-index: 195;
    font-size: 12px;
    font-family: 'Open Sans', sans-serif;
    font-weight: 400;
    text-transform: uppercase;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-19T13:01:57.480

Chrome 在[DevTools](https://developer.chrome.com/devtools)中提供了开箱即用的功能- 请参阅[CSS Media Type Emulation](https://developer.chrome.com/devtools/docs/device-mode#more-media-types)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-28T16:34:17.830

在 chrome 中执行此操作：

1.  打开开发者工具
2.  单击“自定义和控制 DevTools”汉堡菜单按钮。
3.  选择更多工具 > 渲染设置。
4.  选中渲染选项卡上的“模拟 CSS 媒体”复选框，然后选择打印媒体类型。

可以在[这里](https://stackoverflow.com/questions/9540990/using-chromes-element-inspector-in-print-preview-mode)找到非常详细的步骤。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-19T13:00:10.013

如果您使用的是 Firefox，则可以使用 Web 开发人员工具栏（以及许多其他好东西！）

[http://chrispederick.com/work/web-developer/](http://chrispederick.com/work/web-developer/)

安装工具栏后，可以在 CSS -> 按媒体类型显示样式 -> 显示打印样式下找到该选项。

# c# - 在性能关键型应用程序中处理异常的正确方法

> ID：16105151
> 
> 赞同：0
> 
> 时间：2013-04-19T12:56:16.803
> 
> 标签：c#, exception-handling

我正在开发一个并行处理顺序数据的应用程序。来自多个实体的数据点可以并行处理，但不能同时处理同一实体的两个数据点。实体 A 的第二个数据点高度依赖于第一个数据点的处理结果。但我想知道，处理第一个数据点时抛出的异常的最佳/正确方法是什么？我可以重试操作，显然是设置重试次数。但是如果操作无法在预设的重试次数内完成怎么办？我应该让应用程序崩溃并实施某种通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:58:14.997

在我看来，你有三个选择：

1.  捕获异常并继续。问题：这会损坏数据。
2.  尽可能优雅地关闭程序。当然，输出一些信息说明你为什么这样做。
3.  以某种方式设置一个标志，表示“不再为该实体处理任何数据点”，并继续处理其他实体。同样，您希望将错误通知用户。

# android - 在 Android 中以编程方式使用屏幕截图时保存空白文件

> ID：16105152
> 
> 赞同：6
> 
> 时间：2013-04-19T12:56:28.423
> 
> 标签：android, screen, screenshot

代码片段

```
void takeSnapShot() 
    {
        Process process = null;
        try
        {
        process = Runtime.getRuntime().exec("/system/bin/screencap -p /sdcard/snapshot/test_2.png" );

        try
        {
            process.waitFor();
        } catch (InterruptedException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        } catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我正在保存一个空文件，而如果我通过 adb shell 使用相同的命令，我会捕获我的屏幕。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:04:52.437

编辑：我之前的回答是错误的，任何应用程序都可以使用截屏命令。

可能是权限问题。您确定您有权写入 sdcard 吗？查看这篇文章，它涵盖了您的主题： [如何在没有 root 权限的情况下运行 android 系统应用程序？](https://stackoverflow.com/questions/12615240/how-to-run-android-system-app-without-root-permisson)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-27T17:25:07.897

我通过在我的清单中添加以下权限来解决这个问题。

```
<uses-permission
    android:name="android.permission.READ_FRAME_BUFFER"
    tools:ignore="ProtectedPermissions"/> 
```

**注意：**这是一个受保护的权限，我的应用程序是一个系统应用程序，也使用平台密钥签名。

# css - 显示无 是否减少加载时间，或者项目仍在加载但未显示

> ID：16105156
> 
> 赞同：8
> 
> 时间：2013-04-19T12:56:41.367
> 
> 标签：css, media-queries, load-time

我正在使用媒体查询构建响应式网站。我需要为非常小的屏幕切换到不同的导航方法。

对于桌面/平板电脑屏幕，我使用基于精灵的 UL/LI 列表方法。对于小型智能手机屏幕，我将提供简单的链接文本。

如果我使用，显示：无；为智能手机隐藏基于精灵的导航，精灵图像是否仍会加载，但只是不显示？我是否需要在智能手机的 css 媒体查询中解析图像参考？或者我应该完全将图像参考从最初的 css 中排除，因为我正在设计从小到大（即默认 css 用于小屏幕，然后媒体查询会随着屏幕变大而改变）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T14:08:56.817

回答你的问题，`display: none`不会***减少加载时间***。它仍然加载有问题的内容/类/代码，但浏览器不显示/渲染它们。

听起来您正在使用移动优先的方法，因此您可以：

1.  加载所有资产/类/脚本，无论您的目标是什么移动/平板电脑/桌面类，并使用媒体查询调整布局。

    *   这意味着所有内容（精灵等）将默认加载，即使某些设备类型不使用它们。
    *   内容/布局将根据媒体查询规则显示或隐藏。

2.  **仅当**媒体查询状态更改时才加载所需的资产/类/脚本。这样做的好处是，体验将与所讨论的设备类型更相关：

    *   更具反应性/及时的体验和功能加载
    *   可能会减少带宽
    *   为每种设备类型提供更紧密的设计体验
    *   可以有选择地加载一些资产（图像/背景等）

如果您考虑查看选项 2，那么有多种开源资产加载器允许您根据媒体查询状态更改加载 CSS 和 Javascript 代码。[注意：使用这种技术需要更多的努力/设计]。

使用[enquire.js](http://wicky.nillia.ms/enquire.js/)（还有其他资产加载器）的简化示例将允许您执行以下操作：

```
<script type="text/javascript">

  // MQ Mobile
  enquire.register("screen and (max-width: 500px)", {
      match : function() {
          // Load a mobile JS file
          loadJS('mobile.js');
          // Load a mobile CSS file
          loadCSS('mobile.css');
      }
  }).listen();

  // MQ Desktop
  enquire.register("screen and (min-width: 501px)", {
      match : function() {
          // Load a desktop JS file
          loadJS('desktop.js');
          // Load a desktop CSS file
          loadCSS('desktop.css');

      }
  }).listen();

</script> 
```

因此，如果浏览器的宽度为 501 像素或以上，则两者`desktop.js`都会`desktop.css`加载 - 启用在 501 像素下不可用且不需要的功能/资产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:58:31.887

所有项目都将被加载，但不会显示给最终用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T18:11:47.270

我搜索了同样的问题，不能同意 nickhar 的话：

> display: none 不会减少加载时间

我进行了速度测试，`display: none`DOM 加载速度提高了 2 倍。

但是 +1 提供有用的建议。

# android - 如何在android中使用instagram的关系API？

> ID：16105168
> 
> 赞同：0
> 
> 时间：2013-04-19T12:57:03.067
> 
> 标签：android, api, instagram

我正在尝试使用 instagram api，但我似乎不理解他们从关系端点发出的请求调用之一，所以这里是，

```
GET /users/{user-id}/relationship and POST /users/{user-id}/relationship 
```

此信息来自此页面“ [http://instagram.com/developer/endpoints/relationships/](http://instagram.com/developer/endpoints/relationships/) ”

如何使用此 API 用于 android 应用程序???带有示例以便更好地理解。

[我从该页面https://apigee.com/console/instagram](https://apigee.com/console/instagram)尝试了“apigee”，但出现如下错误：

```
{ "meta": {
"error_type": "APIInvalidParametersError",
"code": 400,
"error_message": "please supply action=approve,ignore,follow,block,unblock,unfollow"}} 
```

实际上我不知道如何使用上面描述的这个 POST 和 GET 方法......

对不起我糟糕的英语和语法错误。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T14:08:47.533

您可以将其与 curl post 方法一起使用。以下是与目标用户建立关系的示例代码

```
$data = "action=follow";
$ch = curl_init('https://api.instagram.com/v1/users/{user_id}/relationship?access_token={access_token}');
curl_setopt($ch, CURLOPT_POST, 1);
//curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
'Accept: application/json',
'Content-Length: ' . strlen($data)) );
$result = curl_exec($ch); 
```

# ruby - 带有空格 RUBY 的目录

> ID：16105169
> 
> 赞同：0
> 
> 时间：2013-04-19T12:57:03.537
> 
> 标签：ruby, file, directory, save, whitespace

在我的 ruby​​ 代码中，我想将一些内容保存在文件中。此文件应保存在其路径中带有空格的目录中。

如果该目录不存在，我会这样做：`Dir.mkdir(directory_name) unless File.exists?(directory_name)`

这适用于路径中没有空格的目录。

我将文件路径放在“”和“”中，但随后出现以下错误：

```
C:/Program Files (x86)/MantisScraper/mantis_final.rb:378:in `initialize': Invalid argument - "C:\Program Files (x86)\MantisScraper\testfiles\"test_cases_5_5_0.xml (Errno::EINVAL)
        from C:/Program Files (x86)/MantisScraper/mantis_final.rb:378:in `new'
        from C:/Program Files (x86)/MantisScraper/mantis_final.rb:378:in `writeX
ML'
        from C:/Program Files (x86)/MantisScraper/mantis_final.rb:418:in `<main> 
```

我也试过`directory_name.gsub(" ", "\s")`

没有任何帮助...

**编辑：**

批处理文件：

`set OUTPATH=C:\Program Files (x86)\MantisScraper\testfiles\
ruby "C:\Program Files (x86)\MantisScraper\mantis_final.rb"`

红宝石文件：

```
Dir.mkdir(ENV['OUTPATH']) unless File.exists?(ENV['OUTPATH'])   
filePath << ENV['OUTPATH'] << "test_cases.xml"  
datei = File.new(filePath, "w") 
```

程序运行，但想在目录 C:\Program 中写入 xml 文件

错误信息： `"C:\Program" konnte nicht gefunden werden. Stellen sie sicher, dass Sie den Namen richtig eingegeben haben und wiederholen sie den Vorgang.`

# asp.net-mvc - jQuery.Validation.Unobtrusive 客户端验证仅在脚本位于视图页面上时有效

> ID：16105170
> 
> 赞同：8
> 
> 时间：2013-04-19T12:57:05.223
> 
> 标签：asp.net-mvc, asp.net-mvc-4, unobtrusive-validation, client-side-validation, asp.net-mvc-validation

我有一个使用**jQuery.validation.js**插件和 MVC 的**jQuery.validation.unobtrusive.js的****ASP.NET MVC 4 应用程序**。我在视图模型上使用数据注释来验证文本框的输入是否为整数。

 ****此（嵌套）视图使用...加载到父视图中

```
<% Html.RenderPartial("New"); %> 
```

第一个初始页面加载，客户端验证工作。但是任何使用 ajax 调用重新加载嵌套视图，客户端验证不再有效。这是为什么？

**更新**：（来自以下*webdeveloper*解决方案的代码示例）

```
$.validator.unobtrusive.parse($('form')); 
```

例子：

```
var saveAndUpdate = function (url) {
    var myForm = $('form', $('#TheDivThatContainsTheNewHTML'));
    $.ajax({
        url: url,
        type: 'POST',
        data: myForm.serialize(),
        success: function (result) {
            $('#TheDivThatContainsTheNewHTML').html(result);
            $.validator.unobtrusive.parse($('#TheDivThatContainsTheNewHTML'));          
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
        },
        dataType: 'html'
    });
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T13:36:40.807

`But any reloading of the nested view with an ajax call, client side validation no longer works. Why is that?`

验证适用于`document ready`，当您刷新页面时，您应该手动为您的表单初始化验证。

像这样：

```
$.validator.unobtrusive.parse("form"); 
```

同样的问题：[jquery.validate.unobtrusive 不使用动态注入的元素](https://stackoverflow.com/questions/4406291/jquery-validate-unobtrusive-not-working-with-dynamic-injected-elements)****

# timer - 我在 Vizard 中错误地使用了“ontimer”吗？

> ID：16105171
> 
> 赞同：1
> 
> 时间：2013-04-19T12:57:05.540
> 
> 标签：timer, vizard

我对 Vizard 编程非常陌生，但我是一个非常强大的 .js 程序员。我有一个艺术画廊，我想要一个人从一张照片走到另一张照片。他需要在每张照片上等待几秒钟。

所以我有许多步行序列，我正在尝试使用“ontimer”功能来调用下一个步行序列并添加几秒钟的延迟。

它在 dostuff() 中第一次被调用时运行良好，但在 dostuff2() 中根本不起作用。我假设我错误地使用了'ontimer'，谁能解释我哪里出错了？

任何帮助或建议将不胜感激！

```
walkOne = vizact.walkto(4, -0.5, 4)
turnOne = vizact.turn(60)
walking_sequence = vizact.sequence( [walkOne, turnOne])

walkTwo = vizact.walkto(5.350, -0.5, -2)
turnTwo = vizact.turn(60)
walking_sequenceTwo = vizact.sequence( [walkTwo, turnTwo])

def dostuff():  
    male.addAction(walking_sequence)
    vizact.ontimer(10,dostuff2)

def dostuff2():
    male.addAction(walking_sequenceTwo)
    print(vizact.ontimer)
    vizact.ontimer(20,dostuff) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:15:06.520

破解它！完全摆脱了ontimer并改用waittimer，似乎工作正常。

```
walkOne = vizact.walkto(4, -0.5, 4)
turnOne = vizact.turn(60)
walking_sequence = vizact.sequence(walkOne, turnOne, vizact.waittime(10))

walkTwo = vizact.walkto(5.350, -0.5, -2)
turnTwo = vizact.turn(60)
walking_sequenceTwo = vizact.sequence(walkTwo, turnTwo, vizact.waittime(10))

def dostuff():  
    male.addAction(walking_sequence)
    dostuff2()

def dostuff2():
    male.addAction(walking_sequenceTwo)
    dostuff3() 
```

# windows-phone-7 - 列表框堆栈面板中的访问控制

> ID：16105172
> 
> 赞同：1
> 
> 时间：2013-04-19T12:57:09.827
> 
> 标签：windows-phone-7, xaml

我有这个 xaml

```
<ListBox x:Name="listBox"
         ScrollViewer.HorizontalScrollBarVisibility="Auto"
         Tap="listBox_Tap">
  <ListBox.ItemsPanel>
    <ItemsPanelTemplate>
      <StackPanel Orientation="Horizontal" />
    </ItemsPanelTemplate>
  </ListBox.ItemsPanel>
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Vertical">
        <Image Name="cPix"
               Source="{Binding Image}"
               Stretch="None"
               Margin="0,0,5,5"
               ToolTipService.Placement="Bottom"
               ToolTipService.ToolTip="{Binding Name}" />
        <TextBlock Text="{Binding Name}"
                   HorizontalAlignment="Center"
                   Foreground="Black" />
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

这个概念是，我希望列表框延迟加载图像，首先会有一个占位符图像，当图像完成下载时，占位符让位于下载的图像。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:08:48.783

你可以在你的`ViewModel`. 这是一个示例伪代码：

```
public BitmapImage Image
{
    get
    {
        if (_image == null)
            ImageManager.LoadImageAsync(_imageUri).ContinueWith(t=> Image = t.Result);
        return _image;
    }
    set
    {
        _image = value;
        NotifyPropertyChanged("Image");
    }
} 
```

您`ImageManager`将异步加载图像，无论是从缓存`IsolatedStorage`还是网络，完成后，它将完成内部`Task`.

# biztalk - 用于不合格服务的 BizTalk WCF 适配器

> ID：16105174
> 
> 赞同：0
> 
> 时间：2013-04-19T12:57:14.537
> 
> 标签：biztalk, biztalk-2010, biztalk-wcf

我目前需要配置一个动态发送端口来连接不符合 WS-I Basic Profile v1.1 的 ASMX Web 服务。具体来说，R9981 声明“*一个信封必须恰好有 0 个或一个 soap:Body 元素的子元素。* ”我正在使用的 Web 服务期望一个具有多个元素的主体，导致 SOAP 主体看起来像：

```
<Body>
    <FirstElement />
    <SecondElement />
</Body> 
```

我曾尝试同时使用 WCF-BasicHttp 和 WCF-Custom 适配器，但均未成功。似乎 BizTalk WCF 适配器无法处理具有多个元素的 SOAP 主体。

在接收位置，我使用模板将消息包装在一个元素下，以解决消息通过 BizTalk 传输的问题，我认为我可以使用自定义发送管道/自定义组件简单地拦截消息以去除包装元素。然后我尝试了一个带有消息检查器的自定义行为扩展，但这仍然发生在 BizTalk 的 WCF“BizTalkBodyWriter”工作之前。

因为我使用的是 ESB 2.1 工具包，所以我不能使用 HTTP 适配器从头开始创建我的 SOAP 消息。我最后的想法是我需要创建一个自定义 WCF LOB 适配器，但在我走这条路之前，我想确保我不会在这里让事情变得过于复杂，并且没有一个我刚刚忽略的简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:35:23.743

解决方案是创建一个自定义消息编码器。我遵循[WCF 互操作性和可扩展性 - 第一部分](http://www.falconwebtech.com/post/2010/04/01/WCF-Interoperability-and-Extensibility-Part-One.aspx)作为指南。

# javascript - 在活动页面上折叠手风琴菜单

> ID：16105176
> 
> 赞同：0
> 
> 时间：2013-04-19T12:57:22.870
> 
> 标签：javascript, jquery, html, jquery-ui, navigation

我使用 jQuery 1.4.3 和 jQuery UI 1.8.5 构建了一个垂直手风琴导航，以支持手风琴小部件的 hoverintent 版本。

它按预期工作，但是当用户导航到另一个页面时菜单会折叠。

有什么我忽略的吗？

**的HTML**

```
<nav class="span3">
<a href="index.html"><img src="img.png" width="250" /></a>
<ul class="wrap" id="mainNav">
    <li>
        <a href="javascript:void(0);" class="accordionButton">Lorem</a>
        <ul class="accordionContent" style="display: none;">
            <li>
                <a href="javascript:void(0);">Ipsum</a>
            </li>
            <li class="">
                <a href="javascript:void(0);">Dolor</a>
            </li>
            <li>
                <a href="javascript:void(0);">Sit</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="javascript:void(0);" class="accordionButton accordionButton noChild">Amet</a>
    </li>
    <li>
        <a href="javascript:void(0);" class="accordionButton accordionButton noChild">Consectetur</a>
    </li>
    <li>
        <a href="javascript:void(0);" class="accordionButton accordionButton noChild">Adipiscing</a>
    </li>
    <li>
        <a href="javascript:void(0);" class="accordionButton accordionButton noChild">Elit</a>
    </li>
</ul>
</nav> 
```

**JavaScript**

```
// verticle menu
function vertAccordHover() {"use strict";
    $accButtons.mouseover(function() {
        $(this).addClass('hover');
    }).mouseout(function() {
        $(this).removeClass('hover');
    });
}

function vertAccord() {"use strict";

    $("#mainNav").accordion({
        event : "mouseover",
        alwaysOpen : false,
        autoHeight : false,
        navigation : true,
        collapsible : true
    });

    $('.noChild').unbind('mouseover');
    $('#mainNav').accordion('activate', 0);                
    $('#mainNav').accordion( "option", "navigation", true );

    vertAccordHover();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:06:32.273

每次您转到新页面时，您的手风琴都会崩溃，因为您的浏览器会从头开始重新加载页面。在退出页面之前，您无法存储手风琴的状态。您可以通过在用户的浏览器上存储一个 cookie 来做到这一点

# e-commerce - 打开购物车价格问题

> ID：16105179
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:57:33.593
> 
> 标签：e-commerce, opencart

规范：电子商务 - Opencart 版本 1.5.2.1

* * *

**问题 ：**

在**前端显示输出**

例如：产品#1 - 价格：89.10 美元（不含税）

作为 Open cart - **Admin Panel**，我已指定为，

产品#1 - 价格：99.00 美元

* * *

没有应用税，没有应用折扣，也没有其他特殊优惠券或其他任何东西，但与在开放式购物车管理面板中输入的条目相比，前端仍然存在 9.9 美元的差异。

**如何解决打开购物车价格问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:06:31.787

在您的管理 -> 系统 -> 设置中编辑您的站点，选择**选项选项**卡并搜索*税收*部分。

如果您有**显示含税价格选项：**选中为**否**，请改为选中**是**（反之亦然）并**保存**。

这应该可以解决问题。

# java - 使用http发送图片

> ID：16105180
> 
> 赞同：0
> 
> 时间：2013-04-19T12:57:36.853
> 
> 标签：java, image, http, base64

我有以下设置。我必须通过 http 将图像发送到浏览器或其他设备。整个过程的棘手之处在于，我对 http-packet 创建的控制非常有限。我只能将内容类型字段和消息正文作为字符串提供。有没有办法创建一个包含具有这种有限配置工具的图像的 http 数据包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:03:09.493

你需要有：

> 内容类型为“应用程序/图像”
> 
> 正文中的数据为二进制

由于您的限制，因为您只能在正文中包含字符串，因此无法发送图像作为响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:56:04.347

您可以将图像转换为 base64 字符串：[http ://www.base64-image.de/](http://www.base64-image.de/)

# c# - MVC 4 - 实体框架、视图模型和对象上下文

> ID：16105181
> 
> 赞同：0
> 
> 时间：2013-04-19T12:57:37.313
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在使用带有 MVC 4 的实体框架来开发 Web 应用程序。我还使用了一个名为 VehicleTypeViewModel 的 ViewModel，它的创建方式如下：

```
public class VehicleTypeViewModel
{
    public VehicleType VehicleType { get; set; }

    public ProductType ProductType { get; set; }

    [RegularExpression(@"^[a-zA-Zàéèêçñ\s][a-zA-Zàéèêçñ\s-]+$", ErrorMessage = "Invalid name !")]
    public string Name { get; set; }

    [Range(0, 300)]
    public int CO2 { get; set; }

    public List<SelectListItem> ProductCompanies { get; set; }

    public List<SelectListItem> MotorTypes { get; set; }
} 
```

在我的编辑操作中，一切都很好，但只有一件事：当我调试时，到达`db.Attach(...)`步骤时，我的应用程序抛出一个异常，它说：

```
The object cannot be attached because it is already in the object context. An object can only be reattached when it is in an unchanged state. 
```

这是我的帖子操作：

```
[HttpPost]
public ActionResult Edit(VehicleTypeViewModel vtvm)
{
    ViewBag.Id_VehicleMotorType = new SelectList(db.VehicleMotorTypes, "Id_VehicleMotorType", "Name", vtvm.VehicleType.Id_VehicleMotorType);
    ViewBag.Id_ProductCompany = new SelectList(db.ProductCompanies, "Id_ProductCompany", "Name", vtvm.ProductType.Id_ProductCompany);

    vtvm.ProductCompanies = db.ProductCompanies.ToList().Select(c => new SelectListItem { Text = c.Name, Value = c.Id_ProductCompany.ToString() }).ToList();
    vtvm.MotorTypes = db.VehicleMotorTypes.ToList().Select(v => new SelectListItem { Text = v.Name, Value = v.Id_VehicleMotorType.ToString() }).ToList();

    VehicleType vehicleType = db.VehicleTypes.Single(v => v.Id_VehicleType == vtvm.VehicleType.Id_VehicleType);
    ProductType productType = db.ProductTypes.Single(p => p.Id_ProductType == vtvm.ProductType.Id_ProductType);
    VehicleMotorType vehicleMotorType = null;

    ModelStateDictionary errors = Validator.isValid(vtvm.ProductType);

    if (ModelState.IsValid)
    {
        if (errors.Count > 0)
        {
            ModelState.Merge(errors);
            return View(vtvm);
        }

        productType.Model = vtvm.ProductType.Model;
        productType.CatalogPrice = vtvm.ProductType.CatalogPrice;
        productType.Id_ProductCompany = vtvm.ProductType.Id_ProductCompany;

        if (!string.IsNullOrWhiteSpace(vtvm.Name) && (vtvm.CO2 > 0))
        {
            vehicleMotorType = new VehicleMotorType()
            {
                CO2 = vtvm.CO2,
                Name = vtvm.Name
            };

            vehicleType.CO2 = vtvm.VehicleType.CO2;
            vehicleType.VehicleMotorType = vehicleMotorType;
            vehicleType.Id_ProductType = vtvm.ProductType.Id_ProductType;
        }
        else
        {
            vehicleType.CO2 = vtvm.VehicleType.CO2;
            vehicleType.Id_ProductType = vtvm.ProductType.Id_ProductType;
            vehicleType.Id_VehicleMotorType = vtvm.VehicleType.Id_VehicleMotorType;
        }

        db.VehicleTypes.Attach(vehicleType);
        db.ProductTypes.Attach(productType);

        db.ObjectStateManager.ChangeObjectState(vehicleType, EntityState.Modified);
        db.ObjectStateManager.ChangeObjectState(productType, EntityState.Modified);

        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(vtvm);
} 
```

我不知道为什么我要处理这种错误。请问有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:07:45.810

交通，

简短的回答，你应该删除这 2 行

```
 db.VehicleTypes.Attach(vehicleType);
 db.ProductTypes.Attach(productType); 
```

当您从 EntityFramework 实例检索任何实体并修改任何属性时，Entity Framework 会自动跟踪更改。

要将更改应用于数据库，您只需调用

```
db.SaveChanges(); 
```

要更好地了解何时使用 Add 和 Attach 方法，您应该阅读此 [Entity Framework 4 - AddObject vs Attach](https://stackoverflow.com/questions/3920111/entity-framework-4-addobject-vs-attach)。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T09:28:57.340

只需删除“附加”，因为对象已经在数据库中，无需再次附加，只需更改状态并保存更改

```
 var comp = (from com in db.tbl_CompGroup where com.Group_Id == GroupID select com).FirstOrDefault();

        comp.Survey_Est = surveyPost.Survey_Est;

        //db.tbl_CompGroup.Attach(comp);
        db.ObjectStateManager.ChangeObjectState(comp, System.Data.EntityState.Modified);
        db.SaveChanges(); 
```

# mysql - MYSQL CAST AS DECIMAL 用于 VARCHAR 字段

> ID：16105185
> 
> 赞同：3
> 
> 时间：2013-04-19T12:57:44.970
> 
> 标签：mysql, decimal

我的客户给了我一个电子商务项目来修复一些错误。早期的**愚蠢**开发人员在 products 表中给出了价格字段 VARCHAR 数据类型而不是非常明显的 INTEGER，因此下一组开发人员为了根据价格范围进行搜索工作使用`CAST(PRICE AS DECIMAL)`。现在，我是第三个从事此工作的人，并发现它这种 CAST AS DECIMAL 的东西并不奇怪只适用于 0-500 的价格范围，但适用于所有其他价格范围，如 500-1000、1000-2000 等等.

查询类似于：

到目前为止的查询是：

```
 SELECT * FROM tbl_product where status=1 and subcat_id='128' and
 price>'0' and price<='500' ORDER BY CAST(price AS DECIMAL(12,2)) ASC 
```

这是以某种方式搜索价格为1000及以上的产品..请帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:11:08.033

这里最好的选择是接受 VARCHAR 不是正确的数据类型。你的行动计划很简单。

1.  添加新列 priceNew DECIMAL(12,2)
2.  将数据从 price 迁移到 priceNew
3.  确认 priceNew 中的数据正确后，删除 price 并将 priceNew 重命名为 price
4.  删除所有 CAST(price AS DECIMAL) hackjobs 并开始将数字作为数字处理
5.  更新任何 SELECT/UPDATE/INSERT 的价格以确保它处理正确的新数据类型

从长远来看，这将使您的头痛大大减少，并且将更加可靠/最佳。它还将允许 MySQL 正确地将其视为数字而不是字符串，因此基于该列选择范围的键/值将变得更加有效。

# asp.net - 通过代码更改 ASP.NET Membership Provider

> ID：16105187
> 
> 赞同：4
> 
> 时间：2013-04-19T12:57:47.737
> 
> 标签：asp.net, asp.net-membership

我们需要在 ASP.NET WebFroms 应用程序中同时支持两个成员资格提供程序。Indeed 用户通过勾选复选框表明他/她想通过`Asp Net Sql Membership Provider`或`Asp Net Active Directory Membership Provider`

我的想法是根据 Checkbox 选中值以编程方式更改成员资格提供程序。但不知道如何才能做到这一点。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:02:24.573

您需要的是一个组合的提供者，它包装了两个真实的提供者和一个可以确定应该使用哪个提供者的服务。

**更新**

您`CompositeProvider`可能看起来像这样，并且可以像任何其他提供商一样在您的 web.config 中注册。

```
public class CompositeProvider : MembershipProvider
{
    private MembershipProvider SqlProvider
    {
        get { return Membership.Providers["Sql Provider"]; }
    }

    private MembershipProvider AdProvider
    {
        get { return Membership.Providers["Ad Provider"]; }
    }

    // This property implements the logic that knows how
    // to switch between the two providers.
    private MembershipProvider Provider
    {
        get
        {
            var context = HttpContext.Current;

            if (context != null)
            {
                var session = context.Session;

                if (session != null &&
                    session["use_ad_provider"] == "true")
                {
                    return AdProvider;
                }
            }

            return SqlProvider;
        }
    }

    public override bool ChangePassword(string username, 
        string oldPassword, string newPassword)
    {
        return Provider.ChangePassword(username, oldPassword, newPassword);
    }

    public override bool DeleteUser(string username, 
        bool deleteAllRelatedData)
    {
        return Provider.DeleteUser(username, deleteAllRelatedData);
    }

    public override bool EnablePasswordReset
    {
        get { return Provider.EnablePasswordReset; }
    }

    public override bool EnablePasswordRetrieval
    {
        get { return Provider.EnablePasswordRetrieval; }
    }

    // TODO: Implementation of all other members.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T14:33:17.060

[这基本上与Steven's 的](https://stackoverflow.com/a/16105261/396)答案相同，但有一个完全实现的类（以节省其他人写这一切的时间）。

```
public class CompositeProvider : MembershipProvider
{

    public override string ApplicationName
    {
        get
        {
            return _provider.ApplicationName;
        }
        set
        {
            _provider.ApplicationName = value;
        }
    }

    private MembershipProvider _provider
    {
        get
        {
            // Insert your logic here to change between multiple providers
            if(SomeCondition == true)
                return Membership.Providers["AspNetSqlMembershipProvider"];
            else
                return Membership.Providers["AspNetSqlMembershipProvider2"];
        }
    }

    public override bool ChangePassword(string username, string oldPassword, string newPassword)
    {
        return _provider.ChangePassword(username, oldPassword, newPassword);
    }

    public override bool ChangePasswordQuestionAndAnswer(string username, string password, string newPasswordQuestion, string newPasswordAnswer)
    {
        return _provider.ChangePasswordQuestionAndAnswer(username, password, newPasswordQuestion, newPasswordAnswer);
    }

    public override MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)
    {
        return _provider.CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, out status);
    }

    public override bool DeleteUser(string username, bool deleteAllRelatedData)
    {
        return _provider.DeleteUser(username, deleteAllRelatedData);
    }

    public override bool EnablePasswordReset
    {
        get { return _provider.EnablePasswordReset; }
    }

    public override bool EnablePasswordRetrieval
    {
        get { return _provider.EnablePasswordRetrieval; }
    }

    public override MembershipUserCollection FindUsersByEmail(string emailToMatch, int pageIndex, int pageSize, out int totalRecords)
    {
        return _provider.FindUsersByEmail(emailToMatch, pageIndex, pageSize, out totalRecords);
    }

    public override MembershipUserCollection FindUsersByName(string usernameToMatch, int pageIndex, int pageSize, out int totalRecords)
    {
        return _provider.FindUsersByName(usernameToMatch, pageIndex, pageSize, out totalRecords);
    }

    public override MembershipUserCollection GetAllUsers(int pageIndex, int pageSize, out int totalRecords)
    {
        return _provider.GetAllUsers(pageIndex, pageSize, out totalRecords);
    }

    public override int GetNumberOfUsersOnline()
    {
        return _provider.GetNumberOfUsersOnline();
    }

    public override string GetPassword(string username, string answer)
    {
        return _provider.GetPassword(username, answer);
    }

    public override MembershipUser GetUser(string username, bool userIsOnline)
    {
        return _provider.GetUser(username, userIsOnline);
    }

    public override MembershipUser GetUser(object providerUserKey, bool userIsOnline)
    {
        return _provider.GetUser(providerUserKey, userIsOnline);
    }

    public override string GetUserNameByEmail(string email)
    {
        return _provider.GetUserNameByEmail(email);
    }

    public override int MaxInvalidPasswordAttempts
    {
        get { return _provider.MaxInvalidPasswordAttempts; }
    }

    public override int MinRequiredNonAlphanumericCharacters
    {
        get { return _provider.MinRequiredNonAlphanumericCharacters; }
    }

    public override int MinRequiredPasswordLength
    {
        get { return _provider.MinRequiredPasswordLength; }
    }

    public override int PasswordAttemptWindow
    {
        get { return _provider.PasswordAttemptWindow; }
    }

    public override MembershipPasswordFormat PasswordFormat
    {
        get { return _provider.PasswordFormat; }
    }

    public override string PasswordStrengthRegularExpression
    {
        get { return _provider.PasswordStrengthRegularExpression; }
    }

    public override bool RequiresQuestionAndAnswer
    {
        get { return _provider.RequiresQuestionAndAnswer; }
    }

    public override bool RequiresUniqueEmail
    {
        get { return _provider.RequiresUniqueEmail; }
    }

    public override string ResetPassword(string username, string answer)
    {
        return _provider.ResetPassword(username, answer);
    }

    public override bool UnlockUser(string userName)
    {
        return _provider.UnlockUser(userName);
    }

    public override void UpdateUser(MembershipUser user)
    {
        _provider.UpdateUser(user);
    }

    public override bool ValidateUser(string username, string password)
    {
        return _provider.ValidateUser(username, password);
    }
} 
```

# javascript - windows.onresize - 在创建变量之前阻止它执行

> ID：16105192
> 
> 赞同：0
> 
> 时间：2013-04-19T12:58:17.230
> 
> 标签：javascript, dom, map, domdocument

您好，我在互联网上搜索了答案，但我无法理解。所以我问。

我将从我遇到问题的脚本开始：

```
 window.onresize=function(){
     if(_UserMarkerNewPosition){               //_UserMarkerNewPosition is global and contains coordinates 
          _Map.panTo(_UserMarkerNewPosition); //_Map is global and contains the map object
     }
     else{
         _Map.panTo(_UserMarkerPosition);    //_UserMarkerPosition is global and contains coordinates
     }
  } 
```

这段代码适用于几乎所有情况，除了一种！我的应用程序找到用户位置。如您所知，当页面尝试访问用户的位置时，浏览器会询问用户是否分享他们的位置。这时错误来了。如果用户在浏览器问题时调整窗口大小，则 javascript 会显示**TypeError: _Map is Undifine**。导致此错误的原因是在调整窗口大小时未创建 _Map。所以我的问题是如何防止这种情况发生？

**如何在创建 _Map 对象之前停止 window.onresize 执行？**

任何帮助将不胜感激。非常感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:04:13.013

查看变量是否定义

```
window.onresize = function () {
    if (typeof _Map === "undefined") {
        return;
    }
    var whatToPanTo = (_UserMarkerNewPosition) ? _UserMarkerNewPosition : _UserMarkerPosition;
    _Map.panTo(whatToPanTo); 
}; 
```

如果不是，退出。

# c - c - 删除注释（/* 和 //）和字符串

> ID：16105194
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:58:29.067
> 
> 标签：c

谁能告诉我以下假设从输入中删除注释和字符串的代码有什么问题（但不是注释，这就是它识别注释的原因）？这与我之前的一个问题有关：[Removing comments with a rolling window without nested while loops](https://stackoverflow.com/questions/16086617/removing-comments-with-a-sliding-window-without-nested-while-loops)

```
#include <stdio.h>

int main()
{
    int c, c1 = 0, c2 = 0 ,state = 0, next = 0;
    while(1)
    {
        switch(state)
        {
           case 0: next = ((c2 == '*' && c1 == '/') ? 1 : (c2 == '\"') ? 2 : (c2 == '/' && c1 == '/') ? 3 : (c2 == '\'') ? 4: 0); break; 
           case 1: next = ((c2 == '/' && c1 == '*') ? 0 : 1); break; 
           case 2: next = ((c2 == '\"' && c1 != '\\') ? 0 : 2); break;
           case 3: next = ((c2 == '\n') ? 0 : 3); break;
           case 4: next = ((c2 == '\'' && c1 != '\\') ? 0 : 4); break;
           default: next = state; 
        }
        c = getchar(); if( c < 0) break;
        c1 = c2; c2 = c; // slide window
        if(state == 1)
        {
            if(c2 == '*')
            {
                c = getchar();
                c1 = c2; c2 = c;
                if(c2 != '/')
                   putchar(c1);
            }
            else
                putchar(c2);
        }
        else if(state == 2)
        {
            if(c2 != '"' || (c2 == '\"' && c1 != '\\'))
                putchar(c2);
        }
        else if(state == 3)
        {
                putchar(c2);
        }
        else
        state = next;
        // c2 is the current input byte and c1 is the previous input byte
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:58:08.343

我认为您实际上不需要一个滑动窗口来执行删除 C 和 C++ 注释的任务。您可以扩展您的状态机以包含一些用于跟踪逃逸等的附加状态......随着更多的状态，代码会变得更大，但它*可能会*在概念上使其更简单，因为您只有*一个*状态要跟踪。因此，将您的代码精神转换为我建议的新状态机公式，您会得到下面的代码（我也同意 Basile 的使用枚举的建议并将其包含在内）。

```
#include <stdio.h>

int main()
{
    enum {
        START, SLASH,
        STRING, CHAR, STRING_ESCAPE, CHAR_ESCAPE,
        SINGLE_LINE_COMMENT, MULTI_LINE_COMMENT, MULTI_LINE_END,
    } state = START;
    int c;

    while ((c = getchar()) != EOF) {
        switch (state) {
        case START:
        state_START:
            if (c == '/') { state = SLASH; break; }
            putchar(c);
            if (c == '\"') state = STRING;
            else if (c == '\'') state = CHAR;
            break;
        case SLASH:
            if (c == '/') state = SINGLE_LINE_COMMENT;
            else if (c == '*') state = MULTI_LINE_COMMENT;
            else { state = START; goto state_START; }
            break;
        case STRING:
            putchar(c);
            if (c == '"') state = START;
            else if (c == '\\') state = STRING_ESCAPE;
            break;
        case CHAR:
            putchar(c);
            if (c == '\'') state = START;
            else if (c == '\\') state = CHAR_ESCAPE;
            break;
        case SINGLE_LINE_COMMENT:
            if (c == '\n') state = START;
            break;
        case MULTI_LINE_COMMENT:
        state_MULTI_LINE_COMMENT:
            if (c == '*') state = MULTI_LINE_END;
            break;
        case STRING_ESCAPE:
            putchar(c);
            state = STRING;
            break;
        case CHAR_ESCAPE:
            putchar(c);
            state = CHAR;
            break;
        case MULTI_LINE_END:
            if (c == '/') state = START;
            else { state = MULTI_LINE_COMMENT; goto state_MULTI_LINE_COMMENT; }
            break;
        }
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:05:02.550

只是在不知道您的目的的情况下给您建议...您是否考虑过正则表达式来解决您的问题？假设您了解正则表达式，它可能会更快并且您的代码会更干净。

顺便说一句，我为您的问题找到了一个简洁的站点...它解释了如何从代码中获取这些注释...

[如何使用正则表达式获取评论](http://ostermiller.org/findcomment.html)

这是 C 中的正则表达式库[。](http://gnuwin32.sourceforge.net/packages/regex.htm)

# wordpress - 将 woocommerce 产品类型添加到正文类数组

> ID：16105195
> 
> 赞同：2
> 
> 时间：2013-04-19T12:58:30.890
> 
> 标签：wordpress, global, woocommerce

我正在尝试将 Woocommerce 产品类型添加到在 header.php 中调用的 Wordpress 正文标记类数组中

```
body_class(); 
```

我在functions.php中有以下函数，但它没有添加类。如果我删除条件并且只有

```
$classes[] = 'simple-product'; 
```

然后添加类。我认为这与获取全局值的问题有关。我打电话给 $woocommerce、$post 和 $product 全局变量，因为我不确定我真正需要哪个。

```
//Add Woocommerce body classes
add_filter('body_class','ttm_woocommerce_body_classes');
function ttm_woocommerce_body_classes($classes){
    global $woocommerce, $post, $product;
    if ( $product->product_type == 'simple' ) $classes[] = 'simple-product';
    return $classes;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:21:24.833

您是否尝试过`var_dump($product)`查看该对象中存在什么（如果有的话）？

根据[codex](http://docs.woothemes.com/document/class-reference/)，您可能必须自己使用 填充它`$post->ID`，如下所示：

```
//Add Woocommerce body classes
add_filter('body_class','ttm_woocommerce_body_classes');
function ttm_woocommerce_body_classes($classes){
    global $post;
    $product = get_product( $post->ID );
    if ( $product->product_type == 'simple' ) $classes[] = 'simple-product';
    return $classes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T13:19:57.003

在 woocommerce 页面中，在您的网站正文标签中添加 product_type 名称。首先你需要得到这个页面是一个产品页面。

与 get_product() 一起使用，您的页面正在使用 woocommerce 功能。

这是添加在 body 标记中添加的所有 product_type 名称的代码。

将此代码添加到您的激活主题文件夹中：functions.php

```

```
add_filter('body_class','obw_woocommerce_body_classes');
function obw_woocommerce_body_classes( $classes ) {
    global $woocommerce, $post, $product;
    $product = get_product( $post->ID );
    $product_type = $product->product_type;
    if ( $product->product_type == 'external' ) $classes[] = 'external-product';
    if ( $product->product_type == 'grouped' ) $classes[] = 'grouped-product';
    if ( $product->product_type == 'simple' ) $classes[] = 'simple-product';
    if ( $product->product_type == 'variable' ) $classes[] = 'variable-product';
    return $classes;
} 
```

```

# jquery - 对日期进行排序并显示非重复项

> ID：16105197
> 
> 赞同：2
> 
> 时间：2013-04-19T12:58:33.123
> 
> 标签：jquery, parsing, object

我的javascript代码中有这个：

```
function parsePerObject(data){
    // LOOP OBJECTS
    var content = "";
    $.each(data, function(key, value){ 
        content += "<li class='contentblock has-thumb'>";
        content += "<p><a href='/sessions/view/" + value.id + "'>" + value.name + "</p>";      
        content += "<p>" + value.starttime + " - " + value.endtime + "</p>";
        content += "<p>" + value.speaker + "</p>";             
    });

    $("#here").append(content);
} 
```

我想遍历数据。数据是一系列这样的对象：

```
{
    "21114"
    {
        "id":"21114",
        "external_id":"",
        "sessiongroupid":"1844",
        "eventid":"5588",
        "order":"0",
        "name":"localStorage HTML5 Session",
        "description":"localstorage",
        "starttime":"2013-04-23 12:00:00",
        "endtime":"2013-04-23 13:30:00",
        "speaker":"",
        "location":"",
        "mapid":"0",
        "xpos":"0.000000",
        "ypos":"0.000000",
        "maptype":"plan",
        "imageurl":"",
        "presentation":"",
        "organizer":"0",
        "twitter":"",
        "allowAddToFavorites":"0",
        "allowAddToAgenda":"0",
        "votes":"0",
        "url":"",
        "venueid":"0"
    },
    "21116"
    {
        //etc
    },
    //etc
} 
```

但现在我想根据日期对数据进行排序。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:57:09.360

诀窍是将对象转换为数组，然后使用[JavaScript 出色的 Array.sort 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)和自定义比较函数。

[http://jsfiddle.net/2BY5x/1/](http://jsfiddle.net/2BY5x/1/)

```
function parsePerObject(data){
    // Turn the data object into an array
    var dataArray = [];
    $.each(data, function (key, value) {
        dataArray.push(value);
    });

    // Sort data by starttime
    dataArray.sort(function (a, b) {
        if (a.starttime > b.starttime) {
            return 1;
        }
        if (a.starttime < b.starttime) {
            return -1;
        }
        return 0;
    });

    // LOOP OBJECTS
    var content = "";
    $.each(dataArray, function(i, item){
        content += "<li class='contentblock has-thumb'>";
        content += "<p><a href='/sessions/view/" + item.id + "'>" + item.name + "</p>";      
        content += "<p>" + item.starttime + " - " + item.endtime + "</p>";
        content += "<p>" + item.speaker + "</p>";             
    });

    $("#here").append(content);

} 
```

# php - PHPUnit 和 mysqli_connect 生成警告

> ID：16105198
> 
> 赞同：1
> 
> 时间：2013-04-19T12:58:35.567
> 
> 标签：php, mysql, unit-testing, phpunit

我是单元测试的新手，想开始用于我正在从事的大型项目。我在我的 Mac (10.8.3) 上与 MAMP 一起运行了 PHPUnit。我正在为其编写单元测试的应用程序在很大程度上依赖于数据库。

在我正在测试的其中一个类中，它使用创建与 MySQL 数据库的连接`mysqli_connect`- 但是它因以下错误而失败：

`Warning: mysqli_connect(): [2002] No such file or directory (trying to connect via unix:///var/mysql/mysql.sock) in /[PATH TO FILE]/database.php on line 340`

我在运行单元测试时无法连接到数据库，还是需要设置一些额外的东西？该数据库也在我的机器上本地运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:06:21.417

这是您问题的解决方案（希望如此）。

检查以下链接：

[警告：mysql_connect(): [2002] 没有这样的文件或目录（试图通过 unix:///tmp/mysql.sock 连接）](https://stackoverflow.com/questions/4219970/warning-mysql-connect-2002-no-such-file-or-directory-trying-to-connect-vi)

[mysql_connect-no-such-file](http://blog.mpdaugherty.com/2010/06/02/mysql_connect-no-such-file/)。

由于 php.ini 文件中的设置而发生此错误。您需要更改该文件。

希望这将为您提供一些解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:24:06.647

原来是 PHPUnit 在错误位置查找 MySQL 套接字的问题 - 设置的那个`php.ini`是正确的。

按照本教程的最后一个命令解决了这个问题：[http ://tommcfarlin.com/phpunit-wordpress-mamp/](http://tommcfarlin.com/phpunit-wordpress-mamp/)

# php - 如何查看当前登录到我系统的用户？

> ID：16105205
> 
> 赞同：0
> 
> 时间：2013-04-19T12:59:06.063
> 
> 标签：php, cakephp, authentication

我正在使用 CakePHP 2.3，这是我的`AppController.php`和`UsersController.php`文件，与用户登录相关的部分：

```
class AppController extends Controller {

public $helpers = array('Html', 'Form', 'Session');

   public $components = array(
      'RequestHandler',
      'Session',
      'Auth' => array(
          'loginRedirect' => array('controller' => 'dpts', 'action' => 'index'),
          'logoutRedirect' => array('controller' => 'users', 'action' => 'login')
      )
  );

  public function beforeFilter() {
    $this->UserAuth->beforeFilter($this); // Error fires here.
    $authUser = $this->UserAuth->getUser();
    $this->set('loggedInUser', $authUser);
  }

}

=================================================================================

<?php
class UsersController extends AppController {
    public function login() {
        if ($this->request->is('post')) {            
            if ($this->Auth->login()) {
                $this->redirect(array('action' => 'index', 'controller' => 'pages'));
            } else {
                $this->Session->setFlash(__('Correo y/o contraseña incorrecta.'));
            }
        }
    }
} 
```

如何获取当前登录用户的对象？

我在 AppController 的 beforeFilter() 中遇到错误：

> 致命错误：在第 50 行的 C:\xampp\htdocs\testapp\app\Controller\AppController.php 中的非对象上调用成员函数 beforeFilter()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:02:38.747

您可以使用以下代码获取当前用户的登录信息。

```
 function beforeFilter(){     
        $first_name = $this->Auth->user('first_name');
        $id = $this->Auth->user('id');
        $this->set('first_name', $first_name);
    } 
```

在 AppController.php 中添加代码

# batch-file - 使用命令提示符查找和删除文件夹

> ID：16105212
> 
> 赞同：2
> 
> 时间：2013-04-19T12:59:14.227
> 
> 标签：batch-file, command-prompt

在工作中，我们每天都会处理需要帮助以在家中登录网上银行的人。有时我们需要用户删除文件并指导他们这样做，这在很多时候会很烦人，因为用户对计算机没有经验，所以浪费了多达 20 分钟。

我们一直在讨论一个解决方案（如果可能的话），我们让用户下载我们告诉他们运行的批处理文件，然后可以为我们删除所需的文件。我在这里问这个问题，因为我们在这里工作的人都没有批处理文件的经验。

就我个人而言，我不时尝试过它，但我无法真正想出适合我们需求的解决方案，当我在网上搜索时，我也找不到适合的解决方案。该脚本必须自动找到该文件夹​​（如果可能）。

1.  这可能吗？
2.  你能帮我完成这个吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:46:25.663

也许这可以帮助你，我评论了它，所以你明白它在做什么；）

```
:: Program to remove Folders which fullfill the criterias

:: You won't see the commands in the console
@echo off

:: Go to drive C (i think you'll need application data or similar and this is 
:: on c, but if the bat is started in an other partition, it will search the 
:: one he starts in
C:
:: Go to the path in which you'll search, if you want C:\ , remove this
CD "C:\yoursearchstartpath"

:: Okay, this is the loop, it gets all folders ( /A -D  is for folders)
:: which have delMe in their name and then asks if you want to delete it
:: showing the path to make sure you don't delete sth accidentially
for /f "delims=" %%a IN ('dir /S /B /A -D *delMe*') do RD /S "%%a"

:: That the batch file is not closed automatically but shows that it's finished
set /p id="Finished, press Space to quit " %=% 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:54:57.500

一个简单的：

```
rd /s "%USERPROFILE%\.oces2" 
```

如果他们遵循某种模式（例如以 .oces 开头）：

```
@echo off
cd /d "%USERPROFILE%"
for /d %%i in (.oces*) do rd /s "%%i"
pause 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T13:19:04.560

看看这个链接

[http://support.microsoft.com/kb/65994](http://support.microsoft.com/kb/65994)

我创建了一个示例批处理文件 A.BAT。它检查 C:\Folder\F1 是否存在，如果可用则删除文件夹 F1

```
IF EXIST D:\FOLDER\F1 GOTO A
EXIT
:A
D:
DEL D:\FOLDER\F1\*.*
RMDIR F1 
```

希望能帮助到你

# html - 如何将自定义 HTML 添加到 Adob e Edge html 页面

> ID：16105218
> 
> 赞同：1
> 
> 时间：2013-04-19T12:59:24.750
> 
> 标签：html, adobe-edge

Adobe Edge 会在每次保存时替换项目 html 文件。

如何将自定义 HTML（例如脚本标签）添加到该 html 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:36:57.497

你能行的。

在 Adob​​e Edge 中打开项目并保存所有更改。

**当您的项目仍在 Adob​​e Edge 中打开**时，使用您选择的编辑器编辑 HTML 文件。

将文件保存在编辑器中。切换回边缘。您将被提示重新加载项目，如下所示：

*“index.html 已在 Edge Animate 之外更改。您要重新加载合成吗？您将丢失所有未保存的更改。”*

单击是。

从此时起，您的更改将在您保存项目时持续存在。

# ios - SPSearch Cocoalibspotify 的 CPU 使用率极高

> ID：16105219
> 
> 赞同：0
> 
> 时间：2013-04-19T12:59:29.957
> 
> 标签：ios, spotify, cocoalibspotify-2.0

我在我的 iPhone 应用程序中使用 CocoaLibSpotify。在某一时刻，用户可以选择在 Spotify 上搜索艺术家/歌曲等。搜索完成后，将使用搜索结果填充 UITableView。我注意到该应用程序在执行几次搜索后开始滞后很多。我在 Instruments 中启动了活动监视器，并注意到执行搜索后 CPU 使用率（活动监视器中的 CPU 百分比）攀升至 200% 左右。奇怪的是，有时需要 2 分钟才能恢复到 6% 左右的正常水平。这是我用来执行搜索的代码：

```
-(void)performSearch:(NSString *)searchString{

    if(!self.spotifySearch){
        self.spotifySearch = [SPSearch searchWithSearchQuery:searchString inSession:[SPSession sharedSession]];

        [SPAsyncLoading waitUntilLoaded:self.spotifySearch timeout:20.0 then:^(NSArray *loadedItems, NSArray *notLoadedItems){
            NSLog(@"Search completed");
            self.spotifySearch = nil;
        }];
    }
} 
```

显然，我的搜索方法并没有真正做太多，但简单地多次运行上述代码会导致大量 CPU 负载。有时它也会在只运行一次代码后发生。我现在的问题是：

1.  有什么我做错了吗？
2.  如何使用不同的搜索字符串运行多个 SPSearch？使用 SPSearch searchWithSearchQuery 重新初始化 SPSearch 对象是正确的方法吗？
3.  有没有办法取消正在运行的搜索？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:34:01.027

你确定它实际上是搜索造成的吗？众所周知，播放列表系统有时会导致 CPU 使用率过高。使用仪器来推断负载的确切原因，您将处于一个更好的位置来修复它。

你的方法没有错。要取消搜索，只需释放它，它就会消失。同时运行多个搜索实例也很好。

# spring - 使用 Spring Data REST 和 PUT 方法将值更新为 NULL

> ID：16105221
> 
> 赞同：3
> 
> 时间：2013-04-19T12:59:33.283
> 
> 标签：spring, rest, spring-data-rest

我正在使用使用 CRUD 存储库的 Spring Data REST，一些值应该是可选的 NULL，但是如果我尝试将它们设置为 null，则相关字段将被忽略。如果我发送非 NULL 数据，它会按预期工作

有没有办法允许这个功能？

这是一个示例 PUT 请求正文

```
{
 "name": "Ash Test",
 "distance": null,
 "paid": null,
 "startDate": null,
 "tags": [  ],
 "position": 3,
 "creator": true,
 "memberId": 55
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T07:32:39.990

在撰写本文时，这似乎是一个已知问题：

[https://jira.springsource.org/browse/DATAREST-130](https://jira.springsource.org/browse/DATAREST-130)

它同时影响 SDR 1.0.0.RELEASE 和 SDR 1.1.0.M1。我刚刚用 2.0.0.BUILD-SNAPSHOT 尝试过，空值目前也没有通过那里。

# asp.net-mvc-4 - HttpPost 不适用于 MVC 4 中的模态弹出窗口

> ID：16105222
> 
> 赞同：0
> 
> 时间：2013-04-19T12:59:36.440
> 
> 标签：asp.net-mvc-4, http-post, modal-dialog, actioncontroller

我有具有 CompanyTable 部分视图的视图。所以这个局部视图有一个 CreateBankAccount 局部视图。最后的部分视图代码是

```
@model Invoice.Model.BankAccount

<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

<a href="#@Model.TaxID" role="button" class="btn" data-toggle="modal">Launch demo modal</a>
<div id="@Model.TaxID" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
        @using (Ajax.BeginForm("CreateModal", "CompanyController", new AjaxOptions { UpdateTargetId = "modal", HttpMethod = "post" }))
        {
            @Html.ValidationSummary(true)

            <fieldset>
                <legend>BankAccount</legend>

                @Html.HiddenFor(model => model.ID)

                <div class="editor-label">
                    @Html.LabelFor(model => model.BankName)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.BankName)
                    @Html.ValidationMessageFor(model => model.BankName)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.CorrespondentAccount)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.CorrespondentAccount)
                    @Html.ValidationMessageFor(model => model.CorrespondentAccount)
                </div>                   
                <input type="submit" value="save" />
            </fieldset>
        }
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <input type="submit" class="btn btn-primary" value=" Save changes" data-dismiss="modal" />
    </div>
</div> 
```

所以这个局部视图是模态弹出窗口。我的问题是，当我想创建 bankAccount 时，我的 HttpPost 方法不起作用，并且我返回 Index 操作。我该如何解决？

# python - 在 django 中排序

> ID：16105224
> 
> 赞同：0
> 
> 时间：2013-04-19T12:59:53.160
> 
> 标签：python, django

试图在另一个对象中对一个对象进行排序。我想按下拉列表中显示的 A 名称排序。有人有想法吗？

```
Class A(models.model):
    name = models.CharField(max_length=200)

Class B(models.model):
    value = models.CharField(max_length=200)
    value2 = models.CharField(max_length=200)
    a = models.ForeignKey(A)

Class BForm(Forms.ModelForm):
    class Meta: 
        def myPage()
            myVar = BForm() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:03:02.243

我相信它就像这样简单：

```
aObjects = A.objects.order_by('name')[:30] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:04:52.863

您可以设置类的[`ordering`](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)属性。`Meta``A`

所以你可以定义`A`为

```
Class A(models.model) :
    name = models.charfield(max.length=200);

    class Meta:
         ordering = ['name'] 
```

# java - JAXB 无法识别类型只是将 xs:anyType 放入模式中

> ID：16105225
> 
> 赞同：2
> 
> 时间：2013-04-19T12:59:53.687
> 
> 标签：java, xml, jaxb, xsd

如何强制 JAXB 在以下示例中识别真实类型，因为它在生成 xml 模式时创建 xs:anyType

实现类

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Response", propOrder = { "message", "companies", "resultsCount",
        "exceptionMessage" })
@XmlSeeAlso({CompanyV8.class})
public class ResponseV8 extends Response<CompanyV8>  {

} 
```

父类

```
@XmlTransient
public abstract class Response<T extends CompanyDraft>  {

    private String message;
    @XmlElement(name = "company")
    private List<T> companies;
    private Integer gisResultsCount;
    private String exceptionMessage; 
```

模型类

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Company",  propOrder = { "id", ...omitted... })
public class CompanyV8 extends CompanyDraft {

    @XmlElement
    private String BvDId;
    @XmlElement
    private String globalHeadquarterBvDId;
    @XmlElement
    private String parentHeadquarterBvDId;
    @XmlElement
    private String domesticHeadquarterBvDId;
    @XmlElement
    private List<BusinessPartnerSegmentDetailedV8> businessPartnerSegment; 
```

xml 架构

```
<xs:sequence>
<xs:element minOccurs="0" name="message" type="xs:string"/>
<xs:element maxOccurs="unbounded" minOccurs="0" name="company" type="xs:anyType"/>
<xs:element minOccurs="0" name="gisResultsCount" type="xs:int"/>
<xs:element minOccurs="0" name="exceptionMessage" type="xs:string"/>
</xs:sequence> 
```

就像你可以看到 JAXB 创建 type="xs:anyType" 而不是 type="tns:Company"

# android-ndk - 运行时Android ndk异常错误

> ID：16105237
> 
> 赞同：0
> 
> 时间：2013-04-19T13:00:51.400
> 
> 标签：android-ndk

我已将一些本机代码移植到 android 并在运行时出现错误

```
 A/libc(7857): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1) 
```

但我无法找出我的代码的哪一部分引发了这个错误

如何在 android ndk 中显示这些错误信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:57:45.943

Android-NDK 中的 ndk-stack 是在 logcat 输出上运行的工具，如果幸运的话，这可能会提供完整的堆栈跟踪

```
ndk-stack -sym <path> [-dump <path>]
  -sym  Contains full path to the root directory for symbols.
  -dump Contains full path to the file containing the crash dump.
        This is an optional parameter. If ommited, ndk-stack will
        read input data from stdin
See docs/NDK-STACK.html in your NDK installation tree for more details. 
```

所以你可能想跑

```
logcat | ndk-stack -sym <the symbol file from your project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:01:19.927

如上所述，使用 ndk-stack。可以在[这里](http://www.codexperiments.com/android/2010/08/tips-tricks-debugging-android-ndk-stack-traces/)找到一个很好的指南。

# wordpress - BuddyPress 个人资料中的每个组类型是否可以有多个/无限条目？

> ID：16105239
> 
> 赞同：0
> 
> 时间：2013-04-19T13:00:56.320
> 
> 标签：wordpress, buddypress

我正在考虑将 BuddyPress 用于网站的个人资料部分。到目前为止看起来还不错，在我深入研究之前，我想知道是否可以为每个“配置文件组”表单设置多个条目。例如（使用 testbp.org 安装），在配置文件编辑表单上您可以单击“工作”部分并填写公司/职位/职位描述 - 这很好，但无需大量扩展代码，他们是否可以拥有无​​限的“工作”条目来创建工作历史，或者通常只是一？

谢谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:34:00.140

这很正常 - 但可以通过自定义代码轻松扩展。

# html - HTML5 History API：“返回”到另一个页面时显示 JSON，然后再次“转发”

> ID：16105242
> 
> 赞同：12
> 
> 时间：2013-04-19T13:01:18.500
> 
> 标签：html, back-button, browser-history, html5-history

我有一个页面，其中有几个搜索/过滤按钮，单击这些按钮时，会通过 AJAX 刷新下面列表的内容。

在此过程中，我正在修改历史记录（通过 pushstate），以便新过滤的页面可以添加书签，因此后退按钮可以使用。我也在监听 popstate 事件，对 Back 做出反应。

我的代码看起来或多或少是这样的：

```
window.addEventListener("popstate", function(ev) {
  if (!window.history_ready) { return; } // Avoid the one time it runs on load 
  refreshFilter(window.location.href, true);
});

refreshFilter: function(newURL, backButtonPressed){
  $.ajax({ url: newURL}).done( blah );

  if (!backButtonPressed) {
    window.history_ready = true;
    history.pushState(null, null, newURL);
  }
} 
```

这非常有效，除了一个奇怪的情况......

*   用户在页面“A”中
*   他们点击一个链接进入这个播放历史的页面（我们称之为“B”）
*   他们运行了几个过滤器，然后按了几次 Back，所以他们回到了“B”的初始状态
*   他们再次单击返回，这会将他们发送回“A”
*   此时，如果他们按下 Forward，浏览器不会再次向服务器请求页面“B”，而是简单地显示一堆 JSON 代码作为页面内容（这个 JSOn 是我的一个 AJAX 请求的响应过滤东西）

至少在最新的 Chrome 中

为什么会发生这种情况，我该如何避免？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T17:17:11.233

Chrome 会缓存您访问的页面，当您返回或前进时，它会使用缓存快速显示页面。如果您用于通过 AJAX 从服务器检索 JSON 的 URL 与 Chrome 会命中的 URL 相同，那么 Chrome 可能会从缓存中选择该页面，而不是漂亮的 HTML，它只是一个 JSON 转储。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-17T13:41:24.687

有一个缓存选项`$.ajax`：

```
$.ajax({ cache: false, url: newURL}) 
```

见[http://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T18:35:00.270

@pupeno 是对的，但要给出更面向解决方案的答案，您需要在服务器拥有的路由中区分 JSON 和 HTML。

我知道这样做的两种方法：
1）如果你打电话`/users`，你会得到HTML，如果你打电话，`/users.json`你会得到JSON。
2）如果你打电话`/users`，你会得到HTML，如果你打电话，`/api/users`你会得到JSON。

我更喜欢 1，但这取决于 web 框架是默认使用的还是你自己配置的。
1 用于 Ruby on Rails，2 也用于其他框架。

# c++ - 从字符串转换为整数的函数正在反向输出整数

> ID：16105246
> 
> 赞同：0
> 
> 时间：2013-04-19T13:01:44.353
> 
> 标签：c++

我有以下代码，它接受一个字符串（数字）并将其转换为一个整数值。但是整数输出是相反的。例如，如果您输入 5999，您将得到 9995 作为回报。我做错了什么？

```
int stringToInt(string myString, int m) {
    if (m == ((int)myString.length()-1))
        return (myString[m]-48);
    else
        return (10*(stringToInt(myString, m+1)) + (myString[m]-48));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:09:07.020

因为在数字表示法中，数字顺序从左到右递减，因此需要从字符串末尾（最低位数字）开始递归。您可以给出初始`m`as`myString.size()-1`并以相反的方式进行：

```
int stringToInt(string myString, int m) {
if (m == 0)
    return (myString[m]-48);
else
    return (10*(stringToInt(myString, m-1)) + (myString[m]-48));
} 
```

# java - 使用具有相同布局的二维数组绘制迷宫

> ID：16105252
> 
> 赞同：1
> 
> 时间：2013-04-19T13:01:59.170
> 
> 标签：java, grid, multidimensional-array, maze

我正在创建一个基于网格的迷宫游戏，我目前正在使用一个 10 x 10 2d 整数数组来处理绘制迷宫和简单的碰撞检测。

我的问题是，当使用嵌套的 for 循环绘制网格时，它会在列中绘制网格并且绘制的迷宫被翻转。例如

```
int [][] map= {
                 {0,0,0,0,0,0,0,0,0,0,},
                 {0,0,0,0,0,0,0,0,0,0,},
                 {2,1,1,1,0,0,0,0,0,0,},
                 {0,0,0,1,0,0,0,1,1,2,},
                 {0,0,0,1,0,0,0,1,0,0,},
                 {0,0,0,1,0,0,0,1,0,0,},
                 {0,0,0,1,1,1,1,1,0,0,},
                 {0,0,0,0,0,0,0,0,0,0,},
                 {0,0,0,0,0,0,0,0,0,0,},
                 {0,0,0,0,0,0,0,0,0,0,}
               };

for(int i=0;i<map.length;i++){
   for(int j=0;j<map.length[0];j++){
     switch(map[i][j]){
      case 0:drawRect(i,j,width,height,blue);
       break;
      case 1:drawRect(i,j,width,height,white);
       break;
      case 2: drawRect(i,j,width,height,red);
       break;
     }
   }  
} 
```

画了这个

![在此处输入图像描述](https://i.stack.imgur.com/7UF9v.jpg)

代替

![在此处输入图像描述](https://i.stack.imgur.com/nTp16.jpg)

我目前解决这个问题的方法是翻转 i 和 j 值。但是有没有办法以写出的方式绘制二维数组，或者甚至是创建仍然非常简单的网格迷宫的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:06:51.323

它正在横向绘制您的地图，因为您已经以这种方式读取了 i / j 值。循环获取左上角的值并在绘制时向下读取，然后进入下一列并再次向下绘制。这就是为什么翻转 i / j 会修复它的绘制方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:24:25.067

实际问题是您提供 row 和 col to `drawRect`，它需要 col 和 row。

在您的代码中， i 是当前行， j 是当前列。

但是，在 Rectangle 构造函数中：`Rectangle(int x, int y, int width, int height)`x 是列，y 是行。

正如其他人建议的那样，为了清楚起见，将 i 和 j 换成 row 和 col，然后以`drawRect`正确的顺序将它们传递给您。

# javascript - 允许固定的 div 再次滚动

> ID：16105263
> 
> 赞同：-3
> 
> 时间：2013-04-19T13:02:26.693
> 
> 标签：javascript, jquery, css, css-position

这有点复杂，因此请参阅此页面以获取示例：[No Nay Never post page](http://nonaynever.net/15150/will-burnley-go-down/)

当您向下滚动页面时，左侧的图像（实际上是整个左侧 div）粘在页面顶部。

当图像到达底部的“评论”部分时，我希望它停止被修复并再次滚动。

我无法理解如何做到这一点 - 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:07:49.923

当您开始滚动时，您会在达到`fixed`某个特定值后制作图像`scrollTop`，我假设？

`absolute`当达到更大时，您需要做的就是给元素一个位置`scrollTop`。有问题的绝对位置应该来自评论部分的顶部偏移量和粘性图像的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:08:40.617

您可能可以使用滚动功能来实现此目的，该功能会在用户每次滚动时检查页面位置

```
$(window).scroll(function() {
    //event will fire each time a user scrolls
    //get the top page position
    var screenTop = $(document).scrollTop();

    //Evaluate the position, do what you want
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:23:30.283

示例中的站点使用的是 scrollTop。在某个滚动点，使用 javascript 函数向 div (#left) 添加了一个“sticky”类：

```
function fixDiv() {
    var $div = $("#left");
    if ($(window).scrollTop() > $div.data("top")) { 
        $div.addClass("sticky"); 
    }
    else {
        $div.removeClass("sticky");
    }
} 
```

在这个小片段中读取给定的位置数据（“top”）

```
$("#left").data("top", $("#left").offset().top); // set original position on load
$(window).scroll(fixDiv); 
```

评论不言自明。读取原始位置，

这是“粘性”类：

```
.sticky {
    position: fixed !important;
    top: 0 !important;
} 
```

# android - 在多个 APP 之间共享的 AIDL 上的自定义 Parcelable 会导致 ClassNotDefError

> ID：16105265
> 
> 赞同：0
> 
> 时间：2013-04-19T13:02:35.413
> 
> 标签：android, android-service, parcelable, aidl, multi-project

我在 Eclipse 中有三个 Android 项目：

**应用 A（托管服务）**

**应用 B（使用 A 的服务）**

**AIDL（定义和一些自定义包裹）**

APP A 启动 APP B。APP B 通过 APP A 的 AIDL 使用服务。到目前为止运行良好。问题是在APP B中没有看到自定义的parcelable Objects。它总是导致ClassNotDef错误。

我从来没有在任何示例中看到过这样的场景，因为它们总是比我的场景容易得多。似乎 eclipse 没有将自定义 Parcelable 文件从 AIDL 项目添加到 APP B 中。我不知道为什么，但生成的 Java 文件包含正确的 Parcelable 引用，但它们在 AIDL project.jar 或 /bin 文件夹中丢失。

我已经阅读过有关复制 AIDL 文件的信息，但老实说，这是我**最**不想做的事情，因为这违反了良好的项目结构。

我们还在 CI 服务器上使用 maven 进行构建，生成的 Java 类和自定义 Parcelables 按预期在我的 APKLIB 项目中。

对我来说，它看起来更像是一个 Eclipse 问题，而不是其他任何东西，因为 maven 可以按预期编译和运行项目。

任何人都可以给我一个提示来设置这样一个可以在 Eclipse 中开始的场景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:53:37.860

如果您想在两个应用程序之间共享 Parcelable 类型，则必须在 Eclipse 的单独 Android 库项目中定义它们，并让您的两个应用程序项目都依赖它。

您可能已经知道，对于每个 Parcelable com.yourpackage.YourParcelableClass，为了能够在 AIDL 中引用 Parcelable 类型，您还需要将文件 YourParcelableClass.aidl 放在与 YourParcelableClass.java 相同的目录中，其内容：

```
package com.yourpackage;

parcelable YourParcelableClass; 
```

# angularjs - AngularJS 包含没有外部 html

> ID：16105272
> 
> 赞同：3
> 
> 时间：2013-04-19T13:02:58.187
> 
> 标签：angularjs, angularjs-ng-include

在 Angular js 中是否可以在不添加额外 html 的情况下包含某些内容。

我用了

```
<div ng-include>...</div> 
```

但我真的不需要html中的那个div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T18:20:56.090

我看不出创建一个`<div>`包含你的`ng-include`. 它所要做的就是提供`ng-include`要绑定的元素，以允许您使用该`ngInclude`指令。

正如@mark-rajcok 在他的评论中所说，您可以创建自己的 Angular 指令，但这会在您的页面上更加繁重，并且需要不必要的代码。坚持使用该元素要好得多。

# java - JFreeChart 选择一个区域而不缩放

> ID：16105277
> 
> 赞同：7
> 
> 时间：2013-04-19T13:03:10.603
> 
> 标签：java, zooming, jfreechart, area, chartpanel

我最近开始使用 JFreeChart 并且有一些我想做的事情，但我不确定它是否可能。我的程序应该从 wav 文件中绘制频谱图（声音图）。所以我设法从双数组列表中的 wav 文件中获取数据并将其显示在图表中。但是现在我希望能够在不缩放的情况下选择我的频谱图的一个区域（使用用于缩放的相同工具）并且能够只播放我的声音中的选定部分。但我根本找不到任何成功的方法。这是我的图表代码：

```
 package classes;

import java.awt.Color;
import java.awt.Paint;
import java.awt.Rectangle;
import java.io.File;
import java.io.IOException;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.Plot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.RectangleInsets;

public class Chart{
    JFreeChart chart;
    Plot plot;

    //Constructeur de la classe Chart
    public Chart(double[][] bs, int channel, int framesLength, float frameRate)
    {
        // Création d'un XY chart
        XYSeries series = new XYSeries("XYGraph");
        int i=0,j=0;
        float k=0;
        //Ajout de tous les points du tableau de 16 bytes dans le chart
        for( i=0; i <channel;i++)
        {
            for(j=0; j< framesLength;j++)
            {
                //Division des valeurs par 2^15 pour être entre 1 et -1
                series.add(k, (bs[i][j]/32768));
                //Echelle de X
                k+=(1/frameRate);
            }
        }
        // Ajoute la série au dataset
        XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(series);
        // Génération du graphe
        chart = ChartFactory.createXYLineChart(
        "Ajouter titre à la fonction de génération", // Titre
        "Temps (s)", // Nom de l'axe X
        "y-axis", // Nom de l'axe Y
        dataset, // Dataset
        PlotOrientation.VERTICAL, // Plot Orientation
        true, // Show Legend
        false, // Use tooltips
        false // Configure chart to generate URLs?
        );
        plot= (XYPlot) chart.getPlot();

    }
    //Renvoie le chart
    public JFreeChart getChart()
    {
        return chart;
    }

    public void color(Color c)
    {
        plot.setBackgroundPaint(c);
    }
} 
```

在这里我调用 Chart 类并使用它：

```
Chart chartUn= new Chart(bs, channels  , frameLength , frameRate);
        chartUn.color(Color.pink);
        vue.setChartPanelUn(new ChartPanel(chartUn.getChart(), false));
        vue.getChartPanelUn().setRangeZoomable(false);
        vue.getChartPanelUn().setMouseWheelEnabled(true); 
```

vue.getChartPanelUn() 返回一个 ChartPanel。你知道如何解决我的问题吗？非常感谢（如果我的英语并不总是准确的话，很抱歉：/）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T13:45:26.733

不要通过缩放来做到这一点，使用`MouseListener`添加到您`ChartPanel`的添加`Marker`到`Domain`轴。

在此示例中，我进行了子类`MouseAdapter`化，因此当您按下鼠标时，域值被捕获（`markerStart`），当您释放鼠标时，结束位置被更新（'markerEnd'）并且标记被添加到绘图（`updateMarker`）

然后你会得到一个这样的图表：

![带域标记的图表](https://i.stack.imgur.com/lfyPD.png)

请注意，在此示例中，我实际上关闭了缩放。

```
import java.awt.Color;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;

import javax.swing.JFrame;
import javax.swing.JPanel;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.IntervalMarker;
import org.jfree.chart.plot.Marker;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.Layer;

public class MouseMarkerDemo extends JFrame {

    public MouseMarkerDemo(String title) {
        super(title);
        JPanel chartPanel = createDemoPanel();
        chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
        setContentPane(chartPanel);
    }

    private final static class  MouseMarker extends MouseAdapter{
        private Marker marker;
        private Double markerStart = Double.NaN;
        private Double markerEnd = Double.NaN;
        private final XYPlot plot;
        private final JFreeChart chart;
        private  final ChartPanel panel;

        public MouseMarker(ChartPanel panel) {
            this.panel = panel;
            this.chart = panel.getChart();
            this.plot = (XYPlot) chart.getPlot();
        }

        private void updateMarker(){
            if (marker != null){
                plot.removeDomainMarker(marker,Layer.BACKGROUND);
            }
            if (!( markerStart.isNaN() && markerEnd.isNaN())){
                if ( markerEnd > markerStart){
                    marker = new IntervalMarker(markerStart, markerEnd);
                    marker.setPaint(new Color(0xDD, 0xFF, 0xDD, 0x80));
                    marker.setAlpha(0.5f);
                    plot.addDomainMarker(marker,Layer.BACKGROUND);
                }
            }
        }

        private Double getPosition(MouseEvent e){
            Point2D p = panel.translateScreenToJava2D( e.getPoint());
            Rectangle2D plotArea = panel.getScreenDataArea();
            XYPlot plot = (XYPlot) chart.getPlot();
            return plot.getDomainAxis().java2DToValue(p.getX(), plotArea, plot.getDomainAxisEdge());
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            markerEnd = getPosition(e);
            updateMarker();
        }

        @Override
        public void mousePressed(MouseEvent e) {
            markerStart = getPosition(e);
        }
    }

    private static XYDataset createDataset() {

        XYSeries series1 = new XYSeries("Data");
        series1.add(1.0, 1.0);
        series1.add(2.0, 4.0);
        series1.add(3.0, 3.0);
        series1.add(4.0, 5.0);
        series1.add(5.0, 5.0);
        series1.add(6.0, 7.0);
        series1.add(7.0, 7.0);
        series1.add(8.0, 8.0);

        XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(series1);
        return dataset;

    }

    private static JFreeChart createChart(XYDataset dataset) {

        JFreeChart chart = ChartFactory.createXYLineChart(
            "Mouse Marker",
            "X",
            "Y",
            dataset,
            PlotOrientation.VERTICAL,
            true,
            true,
            false
        );
        XYPlot plot = (XYPlot) chart.getPlot();
        plot.setDomainPannable(true);
        plot.setRangePannable(true);
        XYLineAndShapeRenderer renderer
                = (XYLineAndShapeRenderer) plot.getRenderer();
        renderer.setBaseShapesVisible(true);
        renderer.setBaseShapesFilled(true);
        return chart;
    }

    public static JPanel createDemoPanel() {
        final JFreeChart chart = createChart(createDataset());
        final ChartPanel panel = new ChartPanel(chart);
        panel.setRangeZoomable(false);
        panel.setDomainZoomable(false);
        panel.addMouseListener(new MouseMarker(panel));
        return panel;
    }

    public static void main(String[] args) {
        MouseMarkerDemo demo = new MouseMarkerDemo("JFreeChart: MouseMarkerDemo.java");
        demo.pack();
        demo.setVisible(true);
    }

} 
```

# javascript - 在 javascript 中处理大型 CSV 文件

> ID：16105280
> 
> 赞同：0
> 
> 时间：2013-04-19T13:03:29.650
> 
> 标签：javascript, performance, extjs, d3.js, client-server

我需要你们的一些建议。当我尝试处理大型 csv 文件时，我对遇到的一些问题感到有些困惑。我现在正在做的是使用 Javascript（客户端语言）来显示一些基于 csv 文件数据的图表。我正在使用 D3 和 Extjs 4.2 来做到这一点。

问题是，当我尝试处理包含 10000 行和至少 5 列的大型 csv 文件时（在文件中搜索并根据列中的值进行大量计算），这需要很多时间和一些次浏览器被粉碎。我想要一些关于我必须做些什么来提高应用程序性能的建议。

用 javascript 进行复杂计算是否正常或 javascript 无法进行复杂计算？

**一些解释：**

实际上，csv文件中的每一行至少包含5列（关键字，value1，value2...value4），除了第一列（关键字): *d3 中的平行坐标*. 对于每一列，当我有相同值的关键字时，我必须添加到坐标 X (dx)，例如：当我在第二列中有 3 个具有相同值的关键字时 - 例如 - 我放置第一个一个在 p(x,y) 中，第二个在 p(x+dx,y) 中，第三个在 p(x-dx,y) 中，这样它们在图形。所以我需要加载所有文件行，并且对于每一列，我必须搜索重复值以计算其坐标 x，y，然后将它们保存在一个数组中，因为我以后需要使用它们。在我的应用程序中。另一方面，我有一个工具可以选择每个 Ax -lasso select- 周围的区域，以获取该区域中的所有点。在这里，每次我使用套索工具时，我都必须搜索每个值是否在该区域内，并且当我有 10000 行时，这将需要很长时间才能完成。

# forms - Spring 3 表单验证显示错误消息但未显示字段名称

> ID：16105282
> 
> 赞同：1
> 
> 时间：2013-04-19T13:03:36.297
> 
> 标签：forms, spring, validation, annotations, field-names

我有一个 2 项表单，需要输入两个字段。我正在使用带注释的验证，并且收到错误消息，但它们不打印字段名称，只是“可能不是空白”而不是“一个可能不是空白”，其中一个是字段名称。

有任何想法吗？这是一个非常简单的例子：

```
@Controller
@SessionAttributes
 public class HomeController
{

private static final Logger logger  = LoggerFactory
                                            .getLogger(HomeController.class);

@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model)
{
    logger.info("Welcome home! The client locale is {}.", locale);
    model.addAttribute("homeformitem", new HomeFormItem());
    return "home";
}

@RequestMapping(value = "/", method = RequestMethod.POST)
public String home(
        @ModelAttribute("homeformitem") @Valid HomeFormItem item,
        BindingResult result)
{
    logger.info("Posting form");
    logger.info(item.toString());
    if (result.hasErrors())
    {
        return "home";
    } else
    {
        logger.info("No Errors");
        return "done";
    }
}
} 
```

这是表格。我收到错误消息，但没有收到字段名称。

# 表单验证！

```
 <f:form method="post" modelAttribute="homeformitem">
    <fieldset>
        <legend>Fields</legend> 
    <table>
        <tr><td colspan="3"><f:errors path="*"/></td></tr>
        <tr>
            <td><f:label path="one" for="one">One: </f:label></td>
            <td><f:input path="one" /></td>
            <td><f:errors path="one" cssClass="errorblock"/></td>
        </tr>
        <tr>
            <td><f:label path="two" for="two">Two: </f:label></td>
            <td><f:input path="two" /></td>
            <td><f:errors path="two" cssClass="errorblock"/></td>
        </tr>
        <tr>
            <td colspan="3"><input type="submit" value="Test" /></td>
        </tr>
    </table>
</fieldset>
</f:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:36:26.303

您需要一个`validation.properties`文件，`/WEB-INF/messages`其中包含与此类似的条目（例如）：

```
NotEmpty.homeFormItem.one=The field {0} is empty 
```

并且不要忘记添加一个 spring bean 来解决您的验证消息：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="/WEB-INF/messages/validation" />
</bean> 
```

# javascript - 将字符串内容写入 PDF

> ID：16105284
> 
> 赞同：2
> 
> 时间：2013-04-19T13:03:42.733
> 
> 标签：javascript, asp.net-mvc-3, pdf-generation

我已经构建了为用户查看的报告生成 pdf 文件的功能。

所以它当前所做的是当用户点击打印 pdf 按钮时

1.  获取需要打印的div的html内容
2.  使用带有 POST 的 jquery ajax 方法将此内容发送到控制器的方法
3.  在控制器中，它使用 html 文档字符串等包装内容`<html>`，`<body>`此外我还在那里添加了一些样式。
4.  然后这个 html 字符串被传递给我正在使用的工具之一，它返回这个字符串的 pdf 字节
5.  然后它将这些字节保存为文件夹中的 pdf 文件并返回该文件的路径。
6.  Jquery 然后在成功方法上打开此文件路径的窗口。

这一切都很好。

问题是

1.  它不会立即打开窗口，因为它会执行所有处理，然后在成功时打开窗口
2.  另外，我想知道我是否正确地执行了这一切或执行了一些额外的不必要的步骤，从这里我的意思是有没有更好的方法或短的方法来做到这一点。

像在获取 div 的内容后对字符串进行一些更改以直接在新窗口中将其显示为 pdf 内容等以避免服务器处理，这可能吗？

到目前为止，我一直试图直接显示内容，`data:application/pdf`但没有奏效。

如果那不可能，我想避免保存 pdf 文件，而只是显示将以 pdf 格式打开的视图，可能是通过设置它`content-type`，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:15:18.297

你所做的是最好的方法。（所有）浏览器不具备将 html 转换为 pdf 的功能，因此您不能只命令它们以 pdf 格式打开页面。您必须从服务器提供 pdf 文件。为了获得更多控制，您可以从指定 url 的脚本中提供文件并添加适当的标题：

```
header('Content-type: application/pdf');
header('Content-Disposition: inline; filename="the.pdf"'); // second parameter is the name of the file 
```

内容类型意味着浏览器将尝试使用适合此 MIME 类型的程序打开它。内联内容处置意味着浏览器将尝试在浏览器中打开它。

当服务器正在工作时，只需向用户显示“加载”图像。这样用户就会知道正在发生某些事情并且他需要等待。

# character-encoding - @font-face：图标字体和转换 CSS 字符（十六进制）值

> ID：16105289
> 
> 赞同：3
> 
> 时间：2013-04-19T13:03:47.657
> 
> 标签：character-encoding, icons, font-face, webfonts, icon-fonts

**背景**

我目前正在大量使用 webfonts，特别是图标字体。我需要确定特定图标是哪个字符用于测试目的，所以我可以简单地键入字符和/或复制粘贴它。

**例子**

大多数图标字体的 CSS 是相似的，使用 :before 伪方法，例如

```
.icon-search:before{content:"\f002"} 
```

**问题**

*   我相信这种编码被称为 CSS 字符（十六进制）这是正确的吗？
*   是否有任何工具允许我输入转义的 CSS 字符值并将其转换为我可以复制和粘贴的值
*   是否有可以将其转换为 HTML 十进制值的工具，例如 & = 简单的符号

**概括**

我希望能够找出它是哪个字符，这样我就可以简单地在键盘上输入它。我花了很长时间查找它，但不太确定这种类型的编码和转换叫什么，所以找不到我要找的东西。我会很感激一些指示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T16:28:49.253

**已解决** *- 下面的答案是为了完整性*

经过自己的一些研究，我只想确认CSS中使用的编码确实称为`HEX`编码。我确实找到了一个转换器，可以让我输入`HEX`值并将其转换为`Decimal` [http://www.binaryhexconverter.com/hex-to-decimal-converter](http://www.binaryhexconverter.com/hex-to-decimal-converter)

如果您想使用 HTML 实体，那么您需要做的就是将转换后的十进制值包装在强制`&# ;`实体开始/结束字符中，然后您就可以开始了。

**例子**

`(HEXvalue = \f002)`转换为`(Decimal = 61442)`

因此，这个 HTML 实体是`&#61442;`

# .net - 外部文件中的应用程序设置

> ID：16105291
> 
> 赞同：3
> 
> 时间：2013-04-19T13:03:53.843
> 
> 标签：.net, configuration

[我一直在尝试使用在http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource%28VS.85%29.aspx)上找到的一些代码来放置我的应用程序设置一个外部文件，但不能让它工作。

应用程序配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings">
          <section name="ConsoleApplication1.Settings" />
        </sectionGroup>
    </configSections>
    <applicationSettings>
        <ConsoleApplication1.Settings configSource="externalSettings.config" />
    </applicationSettings>
</configuration> 
```

外部设置.config：

```
<ConsoleApplication1.Settings>
  <setting name="TestSetting" serializeAs="String">
    <value>Hello</value>
  </setting>
</ConsoleApplication1.Settings> 
```

我正在尝试像您通常那样使用设置：

```
var test = ConsoleApplication1.Settings.Default.TestSetting; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-31T14:49:05.410

我确实遇到了同样的问题。它已在配置中使用正确的命名空间解决

设置类：

```
namespace ConsoleApp1.Properties {

[global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
[global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "16.0.0.0")]
internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase {

    private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

    public static Settings Default {
        get {
            return defaultInstance;
        }
    }

    [global::System.Configuration.ApplicationScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public string TestSetting {
        get {
            return ((string)(this["TestSetting"]));
        }
    }
}
} 
```

用法：

```
var test = ConsoleApp1.Properties.Settings.Default.TestSetting; 
```

配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
<sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
  <section name="ConsoleApp1.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />      
</sectionGroup>
</configSections>
  <applicationSettings>
    <Settings configSource="externalSettings.config" />
  </applicationSettings>
  <startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.7.2" />
  </startup>
</configuration> 
```

外部设置.config：

```
<ConsoleApp1.Settings>
<setting name="TestSetting" serializeAs="String">
 <value>Hello</value>
</setting>
</ConsoleApp1.Settings> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T13:30:17.703

检查这个帖子

[不同 .config 文件上的 AppSettings 未更新](https://stackoverflow.com/questions/1799413/appsettings-on-a-different-config-file-not-being-updated)

只需与您的解决方案进行比较

```
 <appSettings file="Settings.config">
    <add key="RestartApp" value="-1" />
  </appSettings>

  <appSettings>
    <add key="AppTitle" value="MVC Web Access" />
    <add key="DefaultWebpage" />
    <add key="CustomCSS" />
    <add key="TktsEmailTo" value="email@email.com" />
    <add key="EmailFrom" value="email@email.com" />
    <add key="EmailFromSMTP" value="mail.email.com" />
    <add key="EmailFromPW" value="fakePassword" />
  </appSettings>

  <appSettings file="Settings.config">
    <add key="RestartApp" value="-1" />
    <add key="AppTitle" value="New title" />
    <add key="DefaultWebpage" value="index.aspx" />
    <add key="CustomCSS" />
    <add key="TktsEmailTo" value="newemail@email.com" />
    <add key="EmailFrom" value="newemail@email.com" />
    <add key="EmailFromSMTP" value="mail.email.com" />
    <add key="EmailFromPW" value="NewFakePassword" />
  </appSettings> 
```

我用这种方法成功地将我的 appSettings 移动到另一个文件

希望能帮助到你

# css - 标签未显示在 Chrome 中，但确实显示在所有其他浏览器中

> ID：16105292
> 
> 赞同：2
> 
> 时间：2013-04-19T13:03:55.243
> 
> 标签：css, google-chrome

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:10:02.527

它正在工作（在 OSX 上的 Chrome 中检查）。

看起来您正在使用字体替换字体，该字体对应用粗体样式反应不佳。

要仔细检查粗体是否确实有效，请将 Inder 字体换成 Web 安全的替代字体（例如 Arial），如果使用 Arial 时粗体更加突出/可见，您知道它只是 Inder 字体。

小号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:07:53.123

我刚刚在 Chrome 中查看了该网站，标签中的文本正在为我显示。

主页上的文字是“这是本周可用的顶级零售优惠券，感谢您的零售助手！' 并且我可以看到源代码中的标签，并且文本以粗体显示。

```
<p><strong>Here are the top retail coupons available this week, thanks to Your Retail Helper!</strong> Check out my favorites below, but be sure to visit <a href="http://yourretailhelper.blogspot.com/" target="_blank">Your Retail Helper</a> for the complete list of deals:</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T03:25:38.317

我在我的 chrome 中遇到了同样的问题。我觉得是字体的问题。所以我改变了我的标准字体（“STHeiti”）来尝试改进我的猜测。我发现当我将字体更改为名称中没有“heiti”的字体系列时，<strong> 正在工作。而且我还将其他浏览器的标准字体更改为名为“ *xx* heiti”和“heiti *xx* ”的字体系列，然后 <strong> 不再工作。

所以，我发现“heiti”字体家族（例如STheiti、Heiti SC、Heiti TC等）是这个问题的“罪魁祸首”，<strong>在“heiti”字体中无效。“heiti”是“bold”的汉语发音。

换句话说，<strong> 标签在标准字体设置为任何“heiti”的浏览器中不起作用，因为这些字体系列已经具有“粗体”的含义。这是 <strong> 没有出现在您的 chrome 中的最终原因。

# .net - 在卸载过程中删除时未取消注册 dll 的后果？

> ID：16105294
> 
> 赞同：0
> 
> 时间：2013-04-19T13:03:59.937
> 
> 标签：.net, dll, com

可能发生的最糟糕的事情是什么？假设从硬盘中删除了一个应用程序，但 DLL 没有取消注册，然后安装了更新版本的应用程序。

旧 DLL 的注册最终会指向新 DLL，但包含不正确的类型数据吗？

如果新的 DLL 放在不同的地方，旧的注册是否会导致对（注册的）新的调用失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:36:44.397

对于 COM 注册的 DLL，我绝对建议在复制新文件之前取消注册。取消注册过程（使用安装程序完成时）将检测正在使用的 dll 并警告您需要重新启动。另外，这也意味着在复制新文件或注册新文件*时*无法加载 DLL（一旦取消注册） 。

# bash - 如何删除第一个 bash 参数并将其他参数传递给另一个命令？

> ID：16105299
> 
> 赞同：3
> 
> 时间：2013-04-19T13:04:18.997
> 
> 标签：bash, parameter-passing

在 bash`$@`中包含用于调用脚本的所有参数，但我正在寻找删除第一个参数的解决方案

```
./wrapper.sh foo bar baz ...:

 #!/bin/bash

 # call `cmd` with bar baz ... (withouyt foo one) 
```

我只想打电话`cmd bar baz ...`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:12:05.513

您可以使用[`shift`](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_07.html)来移动参数数组。例如，下面的代码：

```
#!/bin/bash
echo $@
shift
echo $@ 
```

产生，当用`1 2 3`prints调用时`1 2 3`，然后`2 3`：

```
$ ./example.sh 1 2 3
1 2 3
2 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:08:34.657

`shift`从 $@ 中删除参数。

> ## 班次 [n]
> 
> 移位位置参数。
> 
> 将位置参数 $N+1,$N+2 ... 重命名为 $1,$2 ... 如果没有给出 N，则假定为 1。
> 
> 退出状态：除非 N 为负数或大于 $#，否则返回成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-26T16:57:37.010

环境变量扩展！是一个非常便携的解决方案。

删除第一个参数：with $@

```
${@#"$1"} 
```

删除第一个参数：with $*

```
${*#"$1"} 
```

删除第一个和第二个参数：with $@

```
${@#"$1$2"} 
```

$@ 或 $* 都可以工作，因为扩展的结果是一个字符串。

链接： 从 Bash [http://www.tldp.org/LDP/abs/html/abs-guide.html#ARGLIST](http://www.tldp.org/LDP/abs/html/abs-guide.html#ARGLIST)
[中的字符串中删除固定前缀/后缀](https://stackoverflow.com/questions/16623835/remove-a-fixed-prefix-suffix-from-a-string-in-bash)

变量扩展是可移植的，因为它是在 gnu core-utils 下定义的
在此链接搜索“环境变量扩展”：
[https ://www.gnu.org/software/coreutils/manual/html_node/](https://www.gnu.org/software/coreutils/manual/html_node/)

# php - PHP Mysql COUNT 导致双循环

> ID：16105302
> 
> 赞同：0
> 
> 时间：2013-04-19T13:04:26.560
> 
> 标签：php, mysql, loops, count, while-loop

如果我有两个循环，我想知道如何计算结果！：

```
$select = "SELECT X FROM Y"

$result = mysql_query($select,$link);

$total = mysql_num_rows($result);

while($row = mysql_fetch_array($result)) {

    $Name = $row['X'];
    $select2 = "SELECT id FROM `".$Name."` ";
    $result2 = mysql_query($select2,$link) or die ('Erreur : '.mysql_error() );
    $total2 = mysql_num_rows($result2);
    while($row2 = mysql_fetch_array($result2)) { echo $row2['id']} } 
```

我想数一数我最后有多少 id 。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:14:02.997

就给这个

```
$select = "SELECT X FROM Y"

$result = mysql_query($select,$link);

$total = mysql_num_rows($result);

$finalTotal=0;
while($row = mysql_fetch_array($result)) {

$Name = $row['X'];
$select2 = "SELECT id FROM `".$Name."` ";
$result2 = mysql_query($select2,$link) or die ('Erreur : '.mysql_error() );
$total2 = mysql_num_rows($result2);
 $finalTotal = $finalTotal + $total2;
while($row2 = mysql_fetch_array($result2)) { echo $row2['id'];} }

echo "total id is ".$finalTotal; 
```

$finalTotal 将向您显示 id 的总数

# xml - WSO2 数据服务服务器 - 如何获取 XML 转义结果集

> ID：16105304
> 
> 赞同：0
> 
> 时间：2013-04-19T13:04:41.300
> 
> 标签：xml, escaping, stax, wso2dss

从 WSO2 数据服务服务器获取 XML 结果集，字段内的特殊字符不会被转义，例如“&”返回为“&”，“>”返回为“>”等等......

这样做，在从 WSO DS 服务器返回 XML 的过程中（例如使用 XML 流 API (StAX)），我的类崩溃，因为像 &、>、< 等字符被错误地解释。

使用交互式 SQL 工具将相同的数据库数据导出到 XML 我得到正确转义的字段，例如“&”返回为“&”。

请问，我如何告诉 WSO DS 服务器以安全的 XML 形式返回特殊字符，例如 "&" 作为 ""&" ？

提前感谢您，Ivano C.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:33:20.853

这有点奇怪，因为默认情况下这些字符应该被正确转义。因为，数据服务代码在内部使用 XML 库来设置 XML 元素内的值，所以它们应该被正确地转义，我个人看到这种情况发生得很好。您能否仔细检查从响应返回的内容，例如，不要从 Web 浏览器查看它，因为它们以可见的方式显示它们，而不是原始数据。例如，获取您正在查看的页面的来源或将其保存到文本文件并检查内容。

干杯，安佳娜。

# objective-c - pkgbuild postinstall 脚本在其他人的 Mac 上导致“安装失败”

> ID：16105306
> 
> 赞同：4
> 
> 时间：2013-04-19T13:04:44.767
> 
> 标签：objective-c, xcode, macos, pkgbuild

当我将安装后脚本附加到 pkg 时，我的自定义安装程序出现问题。在我的计算机上，安装工作得很好，但在其他用户的系统上安装了 .app，但安装后脚本在没有执行的情况下失败。

如果我删除`--scripts`pkgbuild 上的参数，安装程序不会产生任何问题。如果我添加它（即使`postinstall`脚本为空），则会显示“安装失败”消息。不产生日志。

pkg 是使用类似于以下的脚本构建的：

```
pkgbuild --identifier $PKG_IDENTIFIER \
         --version $APP_VERSION \
         --root $APP_PATH \
         --scripts Scripts/ \
         --install-location /Applications/$APP_NAME.app $TMP_PKG_PATH

productbuild --sign "Developer ID Installer: $COMPANY_NAME" \
             --distribution Distribution.xml \
             --package-path $INSTALLER_BUILD_PATH $INSTALLER_PKG_PATH 
```

在我的系统上，应用程序安装到 /Applications 中，安装后脚本运行并完成它的业务。在其他系统上，postinstall 似乎根本没有执行。

它已经在 OSX 10.8 和 10.7 上进行了测试，并且都遇到了同样的问题。安装后脚本在所有系统上独立测试（`./postinstall`在终端中使用）并且可以工作。

脚本如下所示：

```
#!/usr/bin/env sh
set -e

# Install launch agent
LAUNCH_AGENT_SRC="/Applications/MyApp.app/Contents/Resources/launchd.plist"
LAUNCH_AGENT_DEST="$HOME/Library/LaunchAgents/com.company.myapp.agent.plist"

# Uninstall old launch agent
if [ -f "$LAUNCH_AGENT_DEST" ]; then
  launchctl unload "$LAUNCH_AGENT_DEST"
  rm -f "$LAUNCH_AGENT_DEST"
fi

cp "$LAUNCH_AGENT_SRC" "$LAUNCH_AGENT_DEST"
launchctl load "$LAUNCH_AGENT_DEST"

# Open application
open -a "MyApp"

exit 0 
```

什么可能导致此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T05:19:03.337

似乎问题的原因是 if 语句。当它不存在时， if 的内容可能会导致错误触发，除非已经安装了启动代理。

我通过将代码切换为：

```
#!/usr/bin/env sh
set -e

# Launch agent location
LAUNCH_AGENT_SRC="/Applications/MyApp.app/Contents/Resources/launchd.plist"
LAUNCH_AGENT_DEST="$HOME/Library/LaunchAgents/com.company.myapp.agent.plist"

# Uninstall old launch agent
launchctl unload "$LAUNCH_AGENT_DEST" || true
rm -f "$LAUNCH_AGENT_DEST" || true

# Install launch agent
cp "$LAUNCH_AGENT_SRC" "$LAUNCH_AGENT_DEST" || true
launchctl load "$LAUNCH_AGENT_DEST" || true

# Open application
open -a "MyApp"

exit 0 
```

我之前在测试空脚本时犯的错误最后没有出现`exit 0`。所以现在当我开始工作时，我可以激活不同的代码行，看看是什么导致了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:12:14.550

您可能已经找到了答案，如果不看脚本就很难说，但是您能确保在安装后脚本的末尾有“exit 0”吗？

# ios - 在 iOS 上使用密码锁定时无法访问粘贴板

> ID：16105307
> 
> 赞同：0
> 
> 时间：2013-04-19T13:04:50.737
> 
> 标签：ios, ipad, keychain, pasteboard

我注意到每当我的设备被密码锁定时，我都无法访问 iOS 中的粘贴板。我知道钥匙串有限制，但不确定为什么它也会影响粘贴板。这是一个已知问题还是有目的的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:52:13.493

我假设这是**所需的功能**。

想象一个像 1Password 这样的应用程序。该应用程序支持将密码复制到粘贴/剪贴板。

如果我在我的设备上设置了密码，那可能是因为我不希望人们能够看到该设备上的数据——它可能包含诸如下一个 iPad 的所有规格和发布日期之类的东西。

作为用户，我可能不应该将这些信息复制到粘贴板，但是，嘿 - 我的设备被密码锁定了，对吧？没有人可以看到我的信息，对吧？

Apple 知道用户经常使用这种推理方式，而且，无论它有多么缺陷，您*为用户构建操作系统 - 而不是为您的操作系统构建用户*。*

* * *

[* 除非你是微软在构建 Windows 8。那么你可以打破所有规则，制作一个奇怪的操作系统。]

# java - 如何使用 PDFBOX java 提取字体颜色？

> ID：16105311
> 
> 赞同：0
> 
> 时间：2013-04-19T13:04:52.830
> 
> 标签：java, pdfbox

实际上我需要提取每个字符的字体颜色，在论坛下面找到了这段代码，但是在执行它时会抛出错误

```
Apr 19, 2013 6:23:45 PM org.apache.pdfbox.util.operator.pagedrawer.FillNonZeroRule process
WARNING: java.lang.ClassCastException: org.apache.pdfbox.util.PDFStreamEngine cannot be cast to org.apache.pdfbox.pdfviewer.PageDrawer
java.lang.ClassCastException: org.apache.pdfbox.util.PDFStreamEngine cannot be cast to org.apache.pdfbox.pdfviewer.PageDrawer"

PDDocument doc = null;
try {
    doc = PDDocument.load("C:/Path/To/Pdf/Sample.pdf");
    PDFStreamEngine engine = new PDFStreamEngine(ResourceLoader.loadProperties("org/apache/pdfbox/resources/PageDrawer.properties"));
    PDPage page = (PDPage)doc.getDocumentCatalog().getAllPages().get(0);
    engine.processStream(page, page.findResources(), page.getContents().getStream());
    PDGraphicsState graphicState = engine.getGraphicsState();
    System.out.println(graphicState.getStrokingColor().getColorSpace().getName());
    float colorSpaceValues[] = graphicState.getStrokingColor().getColorSpaceValue();
    for (float c : colorSpaceValues) {
        System.out.println(c * 255);
    }
}
finally {
    if (doc != null) {
        doc.close();
    } 
```

谁能帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:08:54.223

看看`org.apache.pdfbox.pdfviewer.PageDrawer`其中包含：

```
protected void processTextPosition( TextPosition text )
{
    try
    {
        PDGraphicsState graphicsState = getGraphicsState();
        Composite composite;
        Paint paint;
        switch(graphicsState.getTextState().getRenderingMode()) 
        {
            case PDTextState.RENDERING_MODE_FILL_TEXT:
                composite = graphicsState.getNonStrokeJavaComposite();
                paint = graphicsState.getNonStrokingColor().getJavaColor();
                if (paint == null)
                {
                    paint = graphicsState.getNonStrokingColor().getPaint(pageSize.height);
                }
                break;
            case PDTextState.RENDERING_MODE_STROKE_TEXT:
                composite = graphicsState.getStrokeJavaComposite();
                paint = graphicsState.getStrokingColor().getJavaColor();
                if (paint == null)
                {
                    paint = graphicsState.getStrokingColor().getPaint(pageSize.height);
                }
                break;
            case PDTextState.RENDERING_MODE_NEITHER_FILL_NOR_STROKE_TEXT:
                //basic support for text rendering mode "invisible"
                Color nsc = graphicsState.getStrokingColor().getJavaColor();
                float[] components = {Color.black.getRed(),Color.black.getGreen(),Color.black.getBlue()};
                paint = new Color(nsc.getColorSpace(),components,0f);
                composite = graphicsState.getStrokeJavaComposite();
                break;
            default:
                // TODO : need to implement....
                LOG.debug("Unsupported RenderingMode "
                        + this.getGraphicsState().getTextState().getRenderingMode()
                        + " in PageDrawer.processTextPosition()."
                        + " Using RenderingMode "
                        + PDTextState.RENDERING_MODE_FILL_TEXT
                        + " instead");
                composite = graphicsState.getNonStrokeJavaComposite();
                paint = graphicsState.getNonStrokingColor().getJavaColor();
        }
        graphics.setComposite(composite);
        graphics.setPaint(paint);

        PDFont font = text.getFont();
        Matrix textPos = text.getTextPos().copy();
        float x = textPos.getXPosition();
        // the 0,0-reference has to be moved from the lower left (PDF) to the upper left (AWT-graphics)
        float y = pageSize.height - textPos.getYPosition();
        // Set translation to 0,0\. We only need the scaling and shearing
        textPos.setValue(2, 0, 0);
        textPos.setValue(2, 1, 0);
        // because of the moved 0,0-reference, we have to shear in the opposite direction
        textPos.setValue(0, 1, (-1)*textPos.getValue(0, 1));
        textPos.setValue(1, 0, (-1)*textPos.getValue(1, 0));
        AffineTransform at = textPos.createAffineTransform();
        PDMatrix fontMatrix = font.getFontMatrix();
        at.scale(fontMatrix.getValue(0, 0) * 1000f, fontMatrix.getValue(1, 1) * 1000f);
        //TODO setClip() is a massive performance hot spot. Investigate optimization possibilities
        graphics.setClip(graphicsState.getCurrentClippingPath());
        // the fontSize is no longer needed as it is already part of the transformation
        // we should remove it from the parameter list in the long run
        font.drawString( text.getCharacter(), text.getCodePoints(), graphics, 1, at, x, y );
    }
    catch( IOException io )
    {
        io.printStackTrace();
    }
} 
```

并展示了如何提取颜色和其他属性。

# php - PHP/MySQL 内爆成多行？

> ID：16105315
> 
> 赞同：0
> 
> 时间：2013-04-19T13:05:00.270
> 
> 标签：php, mysql, implode

是否可以将复选框值内爆成多个值以插入数据库？

目前我有这个：

```
$tags = implode(', ', $_POST['checkboxname']); 
```

这给了我“testtag1，testtag2”的值

我将如何拆分它，以便它进入数据库，如：

```
Blog ID ¦ Tag
------------------
1       ¦ testtag1

1       ¦ testtag2 
```

不知道如何使内爆函数将它们分开，如下所示：

```
$query2 = mysqli_query($myConnection, "INSERT INTO blogtags (blogid, tag) VALUES('$blogid','$tags')") or die (mysqli_error($myConnection)); 
```

只需将两个值一起插入一行。

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:15:06.557

试试这个例子：

```
$tags = $_POST['checkboxname'] ; //Take the array of tags.
$id = 1 ;                        //Set needed id.

$values = array() ;

foreach($tags as $tag){
  $tag = $myConnection->real_escape_string($tag);
  $values[] = " ('{$id}', '{$tag}') " ;
}

$values = implode(" , ", $values) ;
$query = "INSERT INTO blogtags (blogid, tag) VALUES {$values} ; " ; 
```

# c++ - C++ 按列对二维向量进行排序

> ID：16105320
> 
> 赞同：1
> 
> 时间：2013-04-19T13:05:08.000
> 
> 标签：c++, sorting, vector, 2d

有人可以告诉我在不使用 boost 的情况下在 C++ 中按列对 2d 向量进行排序的最佳方法。我已经进行了一些搜索，但找不到一个好的答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:17:50.930

为了回答这个问题，我必须做出假设，这意味着你可以给我们更多信息。

假设1：您所说的“二维向量”是向量的向量，例如 a `vector<vector<int>>`。

假设 2a：内部向量是行，这意味着，您希望通过外部向量的内部向量的第二个元素对外部向量进行排序。在那种情况下[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)，它有一个将比较器作为其第三个参数的重载。您唯一需要做的就是编写一个比较器（即函数、函数对象、lambda 等），它接受两个向量并通过它们的第 N 个元素来比较它们。不应该太难。

假设 2b：内部向量是*columns*，即您想要对内部向量之一进行排序并将重新排序也应用于彼此的行。这有点复杂，例如，您可以制作另一个索引 0 到 N 的向量，并使用比较器对它进行排序，给定两个索引`i`并`j`通过实际比较`column[i]`和比较它们`column[j]`。对该向量进行排序后，您可以相应地重新排序所有列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:09:20.110

STL 中的 sort() 函数可以为您完成。您只需要编写一个函数来比较向量中的 2 个案例。

[http://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)

之后，这取决于您需要的排序类型，您可以逐列排序，然后是第一行。

# caching - 当按下返回按钮时，是什么决定了浏览器是再次访问服务器还是重新渲染它在内存中的内容？

> ID：16105323
> 
> 赞同：1
> 
> 时间：2013-04-19T13:05:14.097
> 
> 标签：caching, browser, http-headers, back-button

我正在开发一个 Rails 3 应用程序，我注意到当按下 Back 时，浏览器会重新显示它在内存中已有的页面，而不是访问服务器。

也就是说，我有 99% 的信心，在我开发的以前的应用程序中，情况并非如此，浏览器会再次访问服务器。

所以，如果我没记错的话，这一定是一些 HTTP 标头/Rails 设置的一些东西，以使事情变得更快捷。

我想知道它是什么，因为在我们通过 JS 大量修改 DOM 的页面中，这对我们来说是一种问题，并且用户最终按下后退并获得“原始”版本，而不是经过大量修改的版本，在某些情况下确实令人困惑。

* * *

**编辑：**我认为这样做已经解决了问题，但它没有：

```
def force_no_cache_on_back_button
  #expires_in -1, :public => false
  headers['Pragma'] = 'no-cache'
  headers['Cache-Control'] = 'no-cache; no-store; private; must-revalidate; max-age=0'
  headers['Expires'] = 1.day.ago.to_s
end 
```

令人惊讶的是，它*确实可以在 SSL 证书**损坏*的 HTTPS 上工作（我们为我们的登台服务器使用自签名），但它在生产环境中不起作用，具有“良好”的 SSL 证书。这很奇怪。

还有其他想法吗？

* * *

谢谢！
丹尼尔

# c# - 抛出异常后将值设置为静态属性

> ID：16105324
> 
> 赞同：0
> 
> 时间：2013-04-19T13:05:17.353
> 
> 标签：c#, exception, properties, static

我有以下静态属性：

```
private static _field;
public static MyProperty
{
    get
      {
         if(_field !=null)
            {
               return _field;
            }
          else
            {
               throw new NullReferenceException();
            }
       }
    set
       {
           _field=value;
       }
} 
```

现在我在`_field`初始化之前访问此属性，因此引发异常。现在，当我尝试为此属性设置值时，它仍然会引发异常。现在，在调用引发异常后，如何为该属性设置值`get`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:13:57.070

当您“尝试设置值”时不会抛出异常，只有在未初始化时尝试读取它时才会抛出异常。

在我看来，从属性的 get 访问器中引发异常[并不是最佳实践。](http://msdn.microsoft.com/en-us/library/ms229006.aspx)然后您应该返回一个默认值，或者在返回之前使用默认值初始化该字段。这样就可以避免此类问题。

我认为这样的事情会导致您的问题，某处：

```
if(MyProperty == SomeValue) // --> your custom  exception was already thrown
{
    // you never get here
} 
```

你可以这样做：

```
private static _field;
public static MyProperty
{
    get
    {
         if(_field ==null)
         {
               _field = defaultValue;
         }
         return _field;
    }
    set
    {
         _field=value;
    }
} 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/w86s7x04.aspx)：

> 避免从属性获取器中抛出异常。属性 getter 应该是没有任何先决条件的简单操作。如果 getter 可能抛出异常，请考虑将属性重新设计为方法。此建议不适用于索引器。由于参数无效，索引器可能会引发异常

# go - 如何在不阅读的情况下检查频道是否关闭？

> ID：16105325
> 
> 赞同：99
> 
> 时间：2013-04-19T13:05:24.147
> 
> 标签：go, channel

这是@Jimt 编写的Go 中worker 和controller 模式的一个很好的例子，以回答“Golang 中[是否有一些优雅的方式来暂停和恢复任何其他goroutine？](https://stackoverflow.com/a/16102304/55504) ”

```
package main

import (
    "fmt"
    "runtime"
    "sync"
    "time"
)

// Possible worker states.
const (
    Stopped = 0
    Paused  = 1
    Running = 2
)

// Maximum number of workers.
const WorkerCount = 1000

func main() {
    // Launch workers.
    var wg sync.WaitGroup
    wg.Add(WorkerCount + 1)

    workers := make([]chan int, WorkerCount)
    for i := range workers {
        workers[i] = make(chan int)

        go func(i int) {
            worker(i, workers[i])
            wg.Done()
        }(i)
    }

    // Launch controller routine.
    go func() {
        controller(workers)
        wg.Done()
    }()

    // Wait for all goroutines to finish.
    wg.Wait()
}

func worker(id int, ws <-chan int) {
    state := Paused // Begin in the paused state.

    for {
        select {
        case state = <-ws:
            switch state {
            case Stopped:
                fmt.Printf("Worker %d: Stopped\n", id)
                return
            case Running:
                fmt.Printf("Worker %d: Running\n", id)
            case Paused:
                fmt.Printf("Worker %d: Paused\n", id)
            }

        default:
            // We use runtime.Gosched() to prevent a deadlock in this case.
            // It will not be needed of work is performed here which yields
            // to the scheduler.
            runtime.Gosched()

            if state == Paused {
                break
            }

            // Do actual work here.
        }
    }
}

// controller handles the current state of all workers. They can be
// instructed to be either running, paused or stopped entirely.
func controller(workers []chan int) {
    // Start workers
    for i := range workers {
        workers[i] <- Running
    }

    // Pause workers.
    <-time.After(1e9)
    for i := range workers {
        workers[i] <- Paused
    }

    // Unpause workers.
    <-time.After(1e9)
    for i := range workers {
        workers[i] <- Running
    }

    // Shutdown workers.
    <-time.After(1e9)
    for i := range workers {
        close(workers[i])
    }
} 
```

但是这段代码也有一个问题：如果你想在退出`workers`时删除一个工作通道`worker()`，就会发生死锁。

如果你`close(workers[i])`，下次控制器写入它会导致恐慌，因为 go 无法写入关闭的通道。如果您使用一些互斥锁来保护它，那么它将被卡住，`workers[i] <- Running`因为`worker`它没有从通道读取任何内容并且写入将被阻塞，并且互斥锁将导致死锁。您也可以为通道提供更大的缓冲区作为解决方法，但这还不够好。

所以我认为解决这个问题的最好方法是`worker()`退出时关闭通道，如果控制器发现通道关闭，它将跳过它并且什么都不做。但是在这种情况下，我找不到如何检查通道是否已关闭。如果我尝试读取控制器中的通道，控制器可能被阻塞。所以我现在很困惑。

PS：恢复引发的恐慌是我尝试过的，但它会关闭引发恐慌的goroutine。在这种情况下，它将是控制器，所以没有用。

不过，我认为 Go 团队在下一个版本的 Go 中实现这个功能是有用的。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-04-21T02:19:40.800

没有办法编写一个安全的应用程序，您需要知道一个通​​道是否打开而不与它交互。

做你想做的事情的最好方法是使用两个渠道——一个用于工作，一个用于表明改变状态的愿望（以及如果这很重要，那么状态改变的完成）。

频道很便宜。复杂的设计重载语义不是。

[还]

```
<-time.After(1e9) 
```

是一种非常令人困惑和不明显的写作方式

```
time.Sleep(time.Second) 
```

保持简单，每个人（包括你）都能理解它们。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-04-19T13:25:49.987

可以通过一种 hacky 的方式，通过恢复引发的恐慌来为尝试写入的通道完成。但是如果不读取读取通道，则无法检查它是否已关闭。

要么你会

*   最终从中读取“真实”值 ( `v <- c`)
*   读取“真”值和“未关闭”指示符 ( `v, ok <- c`)
*   读取**零值**和“关闭”指示器 ( `v, ok <- c`)（[示例](https://gobyexample.com/closing-channels)）
*   将阻塞在永久读取的通道中 ( `v <- c`)

只有最后一个在技术上不会从频道中读取，但这没什么用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-08T18:54:47.647

我知道这个答案来得太晚了，我已经写了这个解决方案，Hacking [Go run-time](https://github.com/golang/go/blob/master/src/runtime/chan.go)，它不安全，它可能会崩溃：

```
import (
    "unsafe"
    "reflect"
)

func isChanClosed(ch interface{}) bool {
    if reflect.TypeOf(ch).Kind() != reflect.Chan {
        panic("only channels!")
    }

    // get interface value pointer, from cgo_export 
    // typedef struct { void *t; void *v; } GoInterface;
    // then get channel real pointer
    cptr := *(*uintptr)(unsafe.Pointer(
        unsafe.Pointer(uintptr(unsafe.Pointer(&ch)) + unsafe.Sizeof(uint(0))),
    ))

    // this function will return true if chan.closed > 0
    // see hchan on https://github.com/golang/go/blob/master/src/runtime/chan.go 
    // type hchan struct {
    // qcount   uint           // total data in the queue
    // dataqsiz uint           // size of the circular queue
    // buf      unsafe.Pointer // points to an array of dataqsiz elements
    // elemsize uint16
    // closed   uint32
    // **

    cptr += unsafe.Sizeof(uint(0))*2
    cptr += unsafe.Sizeof(unsafe.Pointer(uintptr(0)))
    cptr += unsafe.Sizeof(uint16(0))
    return *(*uint32)(unsafe.Pointer(cptr)) > 0
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-26T14:17:11.493

我经常遇到多个并发 goroutine 的问题。

它可能是也可能不是一个好的模式，但我为我的工人定义了一个结构体，为工人状态定义了一个退出通道和字段：

```
type Worker struct {
    data chan struct
    quit chan bool
    stopped bool
} 
```

然后你可以让一个控制器为工人调用一个停止函数：

```
func (w *Worker) Stop() {
    w.quit <- true
    w.stopped = true
}

func (w *Worker) eventloop() {
    for {
        if w.Stopped {
            return
        }
        select {
            case d := <-w.data:
                //DO something
                if w.Stopped {
                    return
                }
            case <-w.quit:
                return
        }
    }
} 
```

这为您提供了一种很好的方法来完全停止您的工作人员，而不会出现任何挂起或产生错误，这在容器中运行时尤其有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-24T08:01:45.363

好吧，你可以使用`default`分支来检测它，因为会选择一个关闭的通道，例如：下面的代码会选择`default`, `channel`, `channel`，第一个选择不会被阻塞。

```
func main() {
    ch := make(chan int)

    go func() {
        select {
        case <-ch:
            log.Printf("1.channel")
        default:
            log.Printf("1.default")
        }
        select {
        case <-ch:
            log.Printf("2.channel")
        }
        close(ch)
        select {
        case <-ch:
            log.Printf("3.channel")
        default:
            log.Printf("3.default")
        }
    }()
    time.Sleep(time.Second)
    ch <- 1
    time.Sleep(time.Second)
} 
```

印刷

```
2018/05/24 08:00:00 1.default
2018/05/24 08:00:01 2.channel
2018/05/24 08:00:01 3.channel 
```

请注意，请参阅@Angad 在此答案下的评论：

> 如果您使用的是缓冲通道并且它包含未读数据，则它不起作用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-28T08:14:24.927

除了关闭它之外，您还可以将您的频道设置为 nil。这样你就可以检查它是否为零。

操场上的例子：https: [//play.golang.org/p/v0f3d4DisCz](https://play.golang.org/p/v0f3d4DisCz)

编辑：这实际上是一个糟糕的解决方案，如下一个示例所示，因为在函数中将通道设置为 nil 会破坏它： https: [//play.golang.org/p/YVE2-LV9TOp](https://play.golang.org/p/YVE2-LV9TOp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-26T21:25:39.667

```
ch1 := make(chan int)
ch2 := make(chan int)
go func(){
    for i:=0; i<10; i++{
        ch1 <- i
    }
    close(ch1)
}()
go func(){
    for i:=10; i<15; i++{
        ch2 <- i
    }
    close(ch2)
}()
ok1, ok2 := false, false
v := 0
for{
    ok1, ok2 = true, true
    select{
        case v,ok1 = <-ch1:
        if ok1 {fmt.Println(v)}
        default:
    }
    select{
        case v,ok2 = <-ch2:
        if ok2 {fmt.Println(v)}
        default:
    }
    if !ok1 && !ok2{return}

} 
```

}

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-30T18:43:43.287

从文档中：

可以使用内置函数关闭通道。接收运算符的多值赋值形式报告是否在通道关闭之前发送了接收值。

[https://golang.org/ref/spec#Receive_operator](https://golang.org/ref/spec#Receive_operator)

Golang in Action 的示例显示了这种情况：

```
// This sample program demonstrates how to use an unbuffered
// channel to simulate a game of tennis between two goroutines.
package main

import (
    "fmt"
    "math/rand"
    "sync"
    "time"
)

// wg is used to wait for the program to finish.
var wg sync.WaitGroup

func init() {
    rand.Seed(time.Now().UnixNano())
}

// main is the entry point for all Go programs.
func main() {
    // Create an unbuffered channel.
    court := make(chan int)
    // Add a count of two, one for each goroutine.
    wg.Add(2)
    // Launch two players.
    go player("Nadal", court)
    go player("Djokovic", court)
    // Start the set.
    court <- 1
    // Wait for the game to finish.
    wg.Wait()
}

// player simulates a person playing the game of tennis.
func player(name string, court chan int) {
    // Schedule the call to Done to tell main we are done.
    defer wg.Done()
    for {
        // Wait for the ball to be hit back to us.
        ball, ok := <-court
        fmt.Printf("ok %t\n", ok)
        if !ok {
            // If the channel was closed we won.
            fmt.Printf("Player %s Won\n", name)
            return
        }
        // Pick a random number and see if we miss the ball.
        n := rand.Intn(100)
        if n%13 == 0 {
            fmt.Printf("Player %s Missed\n", name)
            // Close the channel to signal we lost.
            close(court)
            return
        }

        // Display and then increment the hit count by one.
        fmt.Printf("Player %s Hit %d\n", name, ball)
        ball++
        // Hit the ball back to the opposing player.
        court <- ball
    }
} 
```

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2015-07-20T11:58:28.340

首先检查通道是否有元素更容易，这将确保通道处于活动状态。

```
func isChanClosed(ch chan interface{}) bool {
    if len(ch) == 0 {
        select {
        case _, ok := <-ch:
            return !ok
        }
    }
    return false 
} 
```

* * *

## 回答 #10

> 赞同：-8
> 
> 时间：2013-04-19T13:19:07.203

如果您收听此频道，您总是可以发现该频道已关闭。

```
case state, opened := <-ws:
    if !opened {
         // channel was closed 
         // return or made some final work
    }
    switch state {
        case Stopped: 
```

但请记住，您不能两次关闭一个频道。这会引起恐慌。

# jquery - 使用 jQuery remove() 从元素中删除某些子元素

> ID：16105328
> 
> 赞同：1
> 
> 时间：2013-04-19T13:05:28.533
> 
> 标签：jquery

从文档[http://api.jquery.com/remove/](http://api.jquery.com/remove/)看来，

```
$('#id').remove('.class'); 
```

应该具有相同的效果

```
$('#id').children('.class').remove(); 
```

然而，只有后者按预期工作。

我做错了什么或误解了文档吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:07:29.840

您误解了文档。

传递给`.remove()`过滤*集合本身*的选择器，而不是任何子元素。
换句话说，你可以写

```
$('#id').children().remove('.class'); 
```

或者

```
$('#id > *').remove('.class'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:10:05.867

```
$('#id').children().find('.class').fadeOut(function(){
    $(this).remove();
}); 
```

尝试这个

# javascript - 如何使用 jquery 在一组选定元素中获取元素的顺序？

> ID：16105335
> 
> 赞同：1
> 
> 时间：2013-04-19T13:05:43.660
> 
> 标签：javascript, jquery

我需要在一组选定的元素中获取元素的顺序，例如：

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul>
<ul>
    <li>1</li>
    <li id="example">2</li>
    <li>3</li>
</ul>
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul>
<script>
    $('#example').click(function (e)) {
        $this = $(this);
        // some code
    });
</script> 
```

我需要知道 $this 在所有 li 元素中的顺序。例如，在这种情况下，代码应返回 5。

我的第一个想法是遍历所有 li 元素并比较每个元素，但我认为这种方法很慢。我还可以为每个 li 元素添加一个 data-order 属性，但是还有其他更简单或更快的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:12:50.810

试试这个

```
 $('#example').click(function (e) {
  var $this = $(this);
  var $index = $('li').index($this);
   alert($index + 1) //+1 because index start from 0
 }); 
```

[在这里摆弄](http://jsfiddle.net/ueyDy/)

**注意：这将选择`<li>`文档中的所有内容。具体来说，您可以给一个类/ID`ul`并使用类/ID选择器`$('.ulClass li').index($this);`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:13:03.487

但这将返回 4，因为计数从 0 开始。

```
 $('#example').on('click',function(e){
         $this = $(this);
        console.log($("li").index(this))
    }); 
```

[http://jsfiddle.net/szGtd/](http://jsfiddle.net/szGtd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:09:52.083

如果您的`ul`标签都包装在一个容器中，您可以执行以下操作：

```
var index = $('#container li').index($('#example')) + 1; 
```

小提琴[http://jsfiddle.net/DScxd/](http://jsfiddle.net/DScxd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:21:49.950

尝试

```
$("#example").click(function () {
  var index = $('li').index(this);
  console.log(index + 1)
}); 
```

见[http://jsfiddle.net/pAuMG/](http://jsfiddle.net/pAuMG/)

# python - PyCharm 远程调试

> ID：16105337
> 
> 赞同：6
> 
> 时间：2013-04-19T13:05:46.380
> 
> 标签：python, remote-debugging, pycharm

我有远程 Ubuntu 服务器，我正在尝试设置远程调试。配置如下[所示](http://blog.jetbrains.com/pycharm/2010/12/python-remote-debug-with-pycharm/)。

```
import sys
import pydevd
sys.path.append('/root/home/scripts/pycharm-debug.egg')
pydevd.settrace('my_remote_server_IP', port=51234,
stdoutToServer=True, stderrToServer=True) 
```

我还连接远程主机以将我的 python 脚本同步和上传到远程服务器。（工具 -> 部署 -> ...）

当我开始调试时：

```
C:\Python27\python.exe C:/Projects/python/demo.py
Could not connect to xx.xx.xx.166: 51234
Traceback (most recent call last):
  File "C:\Program Files (x86)\JetBrains\PyCharm 2.7.1\helpers\pydev\pydevd_comm.py", line 428, in StartClient
    s.connect((host, port))
  File "C:\Python27\Lib\socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 10061] ����������� �� �����������,

Process finished with exit code 1 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T13:48:35.450

函数的第一个参数`pydevd.settrace`应该是安装 PyCharm 的主机。不是远程服务器。同样在大多数情况下，如果您想远程运行和调试代码，使用[远程解释器功能](http://www.jetbrains.com/pycharm/webhelp/configuring-remote-python-interpreters.html)会更方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-01T09:20:54.727

我通过更改端口解决了这个问题。

# c# - 从 C# 传递 IDispatch 参数

> ID：16105339
> 
> 赞同：0
> 
> 时间：2013-04-19T13:05:50.397
> 
> 标签：c#, javascript, .net, com-interop, idispatch

我正在编写一个 C# COM dll，托管 C# 以及 Delphi 和 C++ 程序和 javascript 都将使用它。COM dll 包括一个监视器部分，应用程序在该部分注册一个应该向 dll 返回字符串值的函数。我之前已经为javascript“应用程序”做过这个，你只需将一个函数作为参数传递给dll。当 dll 需要查询 javascript“应用程序”时，将运行以下命令：

```
Type t = theScript.GetType();
object ret = t.InvokeMember("", BindingFlags.InvokeMethod, null, theScript, new object[] { }); 
```

“theScript”作为对象存储在 C# dll 中。据我了解，这是由 IDispatch 完成的。我现在的理论是我应该能够对其他语言使用相同的方法。所以我用这个签名做了一个 COM 可见的方法：

```
void RegisterQuery(object method); 
```

但是我不知道如何从 C# 将参数传递给这个方法。我尝试过使用委托，但调用委托只是从委托（返回 calss 名称的那个）返回 ToString() 方法。我尝试过的其他任何东西都无法编译。

所以我有两个问题：

1.  我应该如何从 C# 将方法参数传递给这个 dll，以便 dll 能够在需要时以上面指定的方式调用方法？
2.  这真的是 IDispatch 还是它适用于 javascript 的另一个原因？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T13:12:19.960

事实证明这真的很简单：

```
Type t = theScript.GetType();
object ret = t.InvokeMember(theObject, BindingFlags.InvokeMethod, null, theScriptName, new object[] { }); 
```

# android - android - 通过 android http 服务器上传文件

> ID：16105340
> 
> 赞同：0
> 
> 时间：2013-04-19T13:05:56.177
> 
> 标签：android, forms, http, upload

*你好*

我试图通过 HTTP 服务器将文件上传到 android，

我已经制作了 HTML 表单来上传文件，但是如何接收该文件以存储在 SDCard 中？

我只是收到文件名，没有别的。

*如何接收该文件？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T11:17:31.493

```
private void uploadFile(File file) throws IOException {
    Log.i(TAG, "Uploading " + file);
    String videoName = file.getParentFile().getName();

    AndroidHttpClient httpclient = AndroidHttpClient.newInstance(GoProLive.TAG);
    try {
        HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), ConnectTimeout);
        HttpConnectionParams.setSoTimeout(httpclient.getParams(), DataTimeout);
        HttpPost post = new HttpPost(
                String.format("http://" + ServerName + "/upload/%s/%s", user.getUsername(), file.getName()));
        post.setEntity(new FileEntity(file, "application/octet-stream"));

        SimpleDateFormat df = (SimpleDateFormat) SimpleDateFormat.getDateTimeInstance(SimpleDateFormat.SHORT, SimpleDateFormat.SHORT, Locale.US);
        df.applyPattern("EEE, dd MMM yyyy HH:mm:ss z");
        post.setHeader("Last-Modified", df.format(new Date(file.lastModified())));
        HttpResponse httpResponse = executePost(httpclient, post);
        int statusCode = httpResponse.getStatusLine().getStatusCode();
        if (statusCode == HttpStatus.SC_OK) {
            file.delete();
        } else {
            throw new HttpException("Failed to upload file " + file.getAbsolutePath(), statusCode);
        }
    } finally {
        httpclient.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:17:00.900

```
 MultipartEntity entity = new MultipartEntity();
  entity.addPart("type", new StringBody("photo"));
  entity.addPart("data", new FileBody(new File(filepath));
  httppost.setEntity(entity);
  HttpResponse response = httpclient.execute(httppost); 
```

比阅读这里的回复[这里的参考](http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/)

[或在此处](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)使用没有库多部分的此示例

# java - Java 线程访问另一个线程

> ID：16105343
> 
> 赞同：0
> 
> 时间：2013-04-19T13:06:07.533
> 
> 标签：java, multithreading, synchronization, thread-safety, thread-synchronization

我有两个实现 Runnable 接口的对象。

可以说我有**Thread_1**和**Thread_2**对象。

**Thread_1**有全局变量*myVariable；*和使用*myVariable*变量的方法*myMethod() 。*

 ***Thread_2**具有**Thread_1类型的变量**

所以这里是场景：

两个线程：**Thread_1**和**Thread_2**都在运行。

如果**Thread_1**当前正在使用*myMethod()*（它使用*myVariable*），同时**Thread_2**正在使用**Thread_1**的*myVariable*到**Thread_1**（不调用*myMethod()*方法），我是否应该同步*myVaribale*变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:10:48.250

`synchronize`如果*使用*意味着写入内存，您应该这样做。您可能也想考虑原子。

另外，你不应该把你的变量和方法放在`Thread`s. 仅`Thread`当您想添加特定于线程的功能并将其余部分留给`Runnable`s 或组成您的系统的任何其他类时才子类化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:30:23.333

“我是否应该同步 myVaribale 变量？”

这实际上取决于尝试使用您的代码归档的内容和变量的类型（如果它是类或原始类型）。同步必须是一个本地和特定问题的威胁，大多数情况下您没有使用标准程序。

我可以告诉你的是，这个全局变量 ,`myVariable`应该是`volatile`，以确保两个线程都可以看到所有修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:12:48.703

如果 Thread_1 当前正在使用 myMethod()（它使用 myVariable）并且同时 Thread_2 正在使用 Thread_1 的 myVariable --> 那么他们都使用它吗？一个是直接的，一个是通过方法的？

在这种情况下，变量在线程之间共享，您需要确保读/写发生原子。make 要么是 volatile，要么是它的 AtomicXXX 类，或者使用显式锁。

PS一个线程是另一个线程的成员？有趣的设计

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T16:30:26.457

您如何访问 myVariable 并不重要。只要您从多个线程访问它（任何变量），您就必须确保其线程安全、简单。您可以根据您要实现的目标使用 volatile、AtomicReference、lock 或 synchronize，这些方法中的任何一种。*

# android - 在 imageView 中显示位图的特定区域

> ID：16105346
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:06:19.403
> 
> 标签：android, listview, bitmap, resize, imageview

这是我的问题，我在 ListView 中显示一些图片来自网络。我想在我的 ImageView 中只显示我的图片的特定区域，而不调整它的大小。

这是一个具体的例子： [https ://docs.google.com/file/d/0B6J9AVdWXjwuWld5dU5CWXFSTjQ/edit?usp=sharing](https://docs.google.com/file/d/0B6J9AVdWXjwuWld5dU5CWXFSTjQ/edit?usp=sharing)

我认为使用 Bitmap 方法是可能的，但我真的不知道该怎么做......

感谢您的提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:15:14.423

是的，这样做的方法是从源图像中创建一个位图对象。这是一个例子：

```
File thumbFile = new File(thumbFileDir, imageName);
    //Bitmap source = your image
    Bitmap target= Bitmap.createBitmap(thumbSize, thumbSize,Config.ARGB_8888); //in my case the thumb image is square, use your dimensions instead of "thumbSize, thumbSize"
    Canvas canvas = new Canvas(target);
    float hScale = thumbSize/(float)source.getWidth(); //again, thumb dimensions here
    float vScale = thumbSize/(float)source.getHeight(); //and here
    float scale = Math.max(hScale, vScale);
    Matrix matrix = new Matrix();
    matrix.setScale(scale, scale);
    matrix.postTranslate(thumbSize/2 - source.getWidth()/2 * scale, thumbSize/2 - source.getHeight()/2 * scale); //and here
    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(source, matrix, new Paint()); 
```

“目标”对象是您所要求的

# c++ - 删除鼠标滚轮 QGraphics 视图上的滚动功能

> ID：16105349
> 
> 赞同：7
> 
> 时间：2013-04-19T13:06:27.740
> 
> 标签：c++, qt

我的小部件上有一个 QGraphicsView 窗口，并且刚刚为鼠标滚轮添加了一个事件，该事件可以放大图像。

但是，一旦我放大滚动条就会显示并且鼠标滚轮上的滚动功能会覆盖我拥有的缩放功能。

我想知道是否有任何方法可以一起删除滚动并添加拖动以移动选项，或者可能是 CTRL 和鼠标滚轮进行缩放，单独的鼠标滚轮可以控制滚动

这是我的缩放功能（我知道这并不完美），但如果有人能对此有所了解，那将是一个奖励

提前欢呼

```
void Test::wheelEvent(QWheelEvent *event)
{
    if(event->delta() > 0)
    {
        ui->graphicsView->scale(2,2);
    }
    else
    {
        ui->graphicsView->scale(0.5,0.5);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:46:04.493

您为包含 QGraphicsView 的 QWidget/QMainWindow 重新实现了 wheelEvent，但是 QGraphicsView 的 wheelEvent 保持不变。

您可以从 QGraphicsView 派生，为派生类重新实现 wheelEvent 并使用派生类而不是 QGraphicsView - 这样您甚至不需要在 QWidget/QMainWindow 中使用 wheelEvent，并且您可以自定义重新实现的 wheelEvent 来执行您想要的操作。像这样的东西：

头文件：

```
class myQGraphicsView : public QGraphicsView
{
public:
    myQGraphicsView(QWidget * parent = nullptr);
    myQGraphicsView(QGraphicsScene * scene, QWidget * parent = nullptr);

protected:
    virtual void wheelEvent(QWheelEvent * event);
}; 
```

源文件：

```
myQGraphicsView::myQGraphicsView(QWidget * parent)
: QGraphicsView(parent) {}

myQGraphicsView::myQGraphicsView(QGraphicsScene * scene, QWidget * parent)
: QGraphicsView(scene, parent) {}

void myQGraphicsView::wheelEvent(QWheelEvent * event)
{
    // your functionality, for example:
    // if ctrl pressed, use original functionality
    if (event->modifiers() & Qt::ControlModifier)
    {
        QGraphicsView::wheelEvent(event);
    }
    // otherwise, do yours
    else
    {
       if (event->delta() > 0)
       {
           scale(2, 2);
       }
       else
       {
           scale(0.5, 0.5);
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-19T20:21:02.867

Scrolling can be disabled with the following code:

```
 ui->graphicsView->verticalScrollBar()->blockSignals(true);
    ui->graphicsView->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    ui->graphicsView->horizontalScrollBar()->blockSignals(true);
    ui->graphicsView->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:45:12.267

我认为你的问题有一个更简单的答案。要禁用滚动条只需设置滚动条策略（QGraphicsView 只是 QScrollView），所以第 1 步）

```
setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff); 
```

这将禁用滚动条..

第2步）（如果你想保持简单）

```
QGraphicsView * pView;  // pointer to your graphics view
pView->setInteractive(true);
pView->setDragMode(QGraphicsView::ScrollHandDrag); 
```

这是获得你想要的结果的最快方法

# c# - 从 smtp 服务器获取附件大小

> ID：16105352
> 
> 赞同：1
> 
> 时间：2013-04-19T13:06:33.670
> 
> 标签：c#, smtp, size, email-attachments

我从 smtp 服务器获取附件大小时遇到​​问题。

例如用户想从 发送邮件`smtp.gmail.com`，我需要知道我可以附加多大的附件。

所以，我想向`EHLO`smtp 服务器发送命令，但我遇到了问题。

```
private long GetSizeAttachament()
{
    long Size = 0; 
    TcpClient smtpTest = new TcpClient();

    try
    {
        smtpTest.Connect(conf.SmtpServer, 25);
        if (smtpTest.Connected)
        {
            NetworkStream ns = smtpTest.GetStream();
            StreamReader clientStreamReader = new StreamReader(ns);
            StreamWriter clientStreamWriter = new StreamWriter(ns);
            clientStreamReader.ReadLine();

            clientStreamWriter.WriteLine("EHLO somehost");
            while (true)
            {
                string line = clientStreamReader.ReadLine();
                if(line.StartsWith("250"))
                {
                    if (Regex.Match(line, "250-SIZE (.*?)$").Groups.Count > 1)
                    {
                        Size = long.Parse(Regex.Match(line, "250-SIZE (.*?)$").Groups[1].Value);
                        break;
                    }
                }
            }

        }
    }
    catch
    {

    }

    smtpTest.Close();
    return Size;
} 
```

`conf.SmtpServer`是 smtp 服务器名称 - 例如`smtp.gmail.com`。

此代码冻结在

```
string line = clientStreamReader.ReadLine(); 
```

任何想法为什么？

# ios - QuickBlox：FB 用户无法登录聊天

> ID：16105353
> 
> 赞同：2
> 
> 时间：2013-04-19T13:06:39.880
> 
> 标签：ios, quickblox

我使用 QuickBlox ios SDK 创建了一个 ios 应用程序。我提供了手动和 Facebook 登录选项。使用 Facebook 登录后，我无法登录聊天。但是手动登录没有这样的问题。这是它显示的错误：QBChat/didNotAuthenticate，错误：

登录 Facebook 后，我需要做些什么才能登录聊天吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:19:45.287

请阅读聊天密码[http://quickblox.com/developers/Chat#Password](http://quickblox.com/developers/Chat#Password)

如果您使用社交登录，聊天密码将等于 qb 会话令牌

```
QBUUser *user = [QBUUser user];
user.ID = 298;
user.password = [BaseService sharedService].token;
[[QBChat instance] loginWithUser:user]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T07:56:38.977

您是否尝试使用此方法

```
[QBUsers logInWithSocialProvider:@"facebook" accessToken:@"my_fb_token" accessTokenSecret:nil delegate:self]; 
```

显式传递 facebook 令牌？

# c# - 在经典 ASP 中的每个午夜更新应用程序变量

> ID：16105357
> 
> 赞同：2
> 
> 时间：2013-04-19T13:06:55.857
> 
> 标签：c#, web-applications, asp-classic, application-variables

我有一个经典的 ASP 应用程序，它的连接字符串存储为应用程序变量并在`Application_OnStart()`事件中初始化。

我想在每个午夜更改这个连接字符串并让它指向其他数据库。

我想到了类似为连接字符串设置一个 XML，使用带有任务调度程序的 C# EXE 来更改它，然后重新启动 IIS，最后从 XML 中读取修改后的连接字符串`Application_OnStart()`，但我不希望用户丢失他们的会话。而且还有很多地方使用了这个连接字符串，所以我想不出在每个地方添加逻辑来读取 XML（使用 C# COM 组件）。

有没有办法实现这一目标？是否有任何存储/事件等可以在我可以存储此连接字符串并更新它而无需重新启动应用程序的地方使用？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:03:34.653

当您的应用程序启动时，您可以将[文件系统观察](http://msdn.microsoft.com/en-us/library/x7t1d0ky.aspx)程序添加到配置文件中，该配置文件将在更改时触发。在该事件处理程序中，您可以修改表示连接字符串的变量。

然后，您可以在任务调度程序中使用可执行文件来修改配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:06:18.793

您可以使用您使用代码修改的应用程序级变量 - 我认为它不会重置用户的会话：

```
<%@ Language="VBScript" %> 
<% 
Application.Lock  
Application("ConnString") = "new connection string"
Application.Unlock  
%> 
```

您可以制作一个 ASP 页面来进行更改。如果这是可以自动化的，您可以编写一些简单的东西来调用该页面并安排它。

# iphone - 当用户滚动 UITableView 时从 Web 服务加载更多数据

> ID：16105359
> 
> 赞同：-5
> 
> 时间：2013-04-19T13:07:00.780
> 
> 标签：iphone, ios, uitableview

我想在 uitableview 中创建加载更多数据，例如在结束时显示活动指示器并再次加载更多数据。我在 ios 开发中使用 asihttp 请求 Web 服务。所以请帮助我...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T13:17:34.150

一个开始的地方是使用`UIScrollViewDelegate`方法，`scrollViewDidScroll:`你需要检测你什么时候在底部`UITableView`。通过这样做，您可以添加您的`UIActivityIndicatorView`, 调用您的 Web 服务，更新您的`UITableViewDataSource`，并使用其他数据重新加载表。

例如

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.y == scrollView.contentSize.height - scrollView.frame.size.height) {
         // Make new request and add UIActivityIndicator
    }
} 
```

当您的 Web 服务返回其数据并更新数据源时，您可以调用`[tableView reloadData]`它，它将从您的数据源更新。

# jquery - jQuery 1.5.2 中未记录的重大更改

> ID：16105360
> 
> 赞同：2
> 
> 时间：2013-04-19T13:07:05.107
> 
> 标签：jquery

我正在尝试使用 jQuery 插件[CheckTree](http://static.geewax.org/checktree/index.html)来实现可选项目树。演示页面（上面的链接）引入了 jQuery 1.2.6 ...正如您所料，我的网站有一些更新的东西。

试验和错误已经确定该演示停止使用 jQuery 版本 1.5.2 或更高版本。有趣的是，[发行说明](http://blog.jquery.com/2011/03/31/jquery-152-released/comment-page-1/)说 jQuery 1.5.2 只是一个错误修复版本，并没有引入重大更改。我将问题归结为最简单的形式：

```
<!DOCTYPE html>
<html lang="en-gb">
    <head>
        <meta charset="utf-8">
        <title>Breaking change in jQuery 1.5.2?</title>
    </head>
    <body>
        <input type="checkbox">
        <button>Click me</button>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.js"></script>
        <script>
            $(function(){
                $(':checkbox').change(function(){ console.log('input checkbox change event'); });
                $("button").click(function(){
                    console.log('button clicked');
                    $(":checkbox").click();
                });
            });
        </script>
    </body>
</html> 
```

在 jQuery 1.5.1 中，单击按钮时不会触发复选框的更改事件。在 jQuery 1.5.2 中，触发了 change*事件*。

换句话说，当使用 jQuery 1.5.1 时，单击按钮会导致以下控制台输出：

```
button clicked 
```

使用 jQuery 1.5.2 时，单击按钮时会记录以下内容：

```
button clicked
input checkbox change event 
```

是否有任何文档来解释为什么会发生这种变化，以及我可以做些什么来解决它？该插件要求复选框更改事件不是由`$(":checkbox").click()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:12:13.710

我怀疑这更像是一个正在修复的错误，而不是破坏功能。换句话说，CheckTree 插件依赖于一个 jQuery 错误，因此在修复该错误时该插件崩溃了。

我刚刚与其中一位 jQuery 开发人员确认了这一点。他说：

> 我记得很清楚。如果调用它们，某些 DOM 方法最终应该会触发多个事件。这是旧 jQuery 不允许这样做的错误。就它是一个“突破性的变化”而言，嗯……对于很多人来说，它是一个“修复性的变化”。如果你依赖这个错误，那么是的，你的代码坏了。

这是来自 github 的相关拉取请求：[https ://github.com/jquery/jquery/pull/260](https://github.com/jquery/jquery/pull/260)

希望能回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:04:17.053

我已经实施了一项工作，但我仍然想查看更改行为的文档以了解发生了什么！

解决方法依赖于上述 JavaScript 可以重写为：

```
$(function(){
    $(':checkbox').bind('change',function(){ console.log('input checkbox change event'); });
    $("button").click(function(){
        console.log('button clicked');
        $(":checkbox").click();
    });
}); 
```

即我已经替换`change(fn)`为`bind('change',fn)`. 插件中有两个地方显式调用`change()`了复选框，因此它们可以类似地重写为`trigger('change')`.

拼图的最后一部分是将`change`事件重命名为其他名称，例如`foo`（因为它不再是关键字，而只是一个字符串）。

现在事件绑定是 to `foo`，而不是`change`，调用 to`click()`不会导致它在任何版本的 jQuery 中触发，并且我们`trigger('foo')`在需要触发时明确调用它。

# java - 000Z 时区的日历问题

> ID：16105367
> 
> 赞同：1
> 
> 时间：2013-04-19T13:07:29.823
> 
> 标签：java, calendar, dozer

我在使用 Java 日历时遇到了一个奇怪的情况。我正在使用推土机映射器来映射对象。

我的要求是我得到一个只接受 Calendar 类型的 XML 模式元素，

说元素`<expDtTime>2010-11-11T09:30:47.000Z</expDtTime>`

我必须转换它。我写了以下转换器：

```
public Calender m(Date source,Calender c) {
Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
calendar.setTime(source);
return calendar;
} 
```

我需要相同的格式。但它显示为

```
<expDtTime>2010-11-11T04:00:47.000Z</expDtTime> 
```

我希望我的对象具有相同的格式和价值。时间显示为 4:00。

有没有办法摆脱这个问题？

任何建议或帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:10:58.653

对于 XML dateTime 操作，请使用 javax.xml.datatype 包中的 XMLGregorianCalendar。

从字符串解析

```
XMLGregorianCalendar xgc = DatatypeFactory.newInstance().newXMLGregorianCalendar("2010-11-11T04:00:47.000Z");
GregorianCalendar gc = xgc.toGregorianCalendar(); 
```

从公历转换

```
XMLGregorianCalendar xgc = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc); 
```

格式为 XML dateType 字符串

```
 String xmlDate = xgc.toString(); 
```

# c - OpenMP：并行内同步

> ID：16105381
> 
> 赞同：0
> 
> 时间：2013-04-19T13:07:58.937
> 
> 标签：c, parallel-processing, synchronization, openmp, barrier

我有一个这样的代码

```
void h(particles *p) {    
    #pragma omp parallel for
    for (int i = 0; i < maxThreads; ++i) {
       int id = omp_get_thread_num();
       for (int j = 0; j < dtnum; ++j) {
           f( p, id);
           if ( j % 50 == 0 ) {
               if (id == 0) {
                   g(p);
               }
               #pragma omp barrier
           }
        }
    }
}
void f(particles *p, int id) {
   for (int i = id * prt_thread; i < (id + 1)*prt_thread; ++i) {
       x(p[i]);
   }
} 
```

基本上我想：1）产生给定数量的线程。每个线程将根据线程的 id 处理 p 的卡盘 2) p 的每个元素必须处理 dtnum 次。处理涉及随机事件 3）每50次迭代，一个线程必须执行另一个操作，而其他线程等待

问题：gcc 说警告：屏障区域可能没有紧密嵌套在工作共享、关键、有序、主或显式任务区域内

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:34:43.880

我认为你的代码是错误的。你说 ：

> p 的每个元素都必须处理 dtnum 次。

但是 p 的每个元素都将执行 maxThreads*dtnum 次。

您能否更明确地说明您的代码应该做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:11:03.370

很难从非常示意性的代码中分辨出来，但是如果您要做的只是每隔这么多迭代同步一次，那么将迭代循环从并行 omp for 循环中拉出来似乎最容易 - 无论如何这似乎更清楚 - 只需执行

```
const int iterblocks=50;

#pragma omp parallel shared(p, dtnum) default(none)
for (int jblock=0; jblock<dtnum/iterblocks; jblock++) {
    for (int j=0; j<iterblocks; j++) {
       #pragma omp for nowait
       for (int i=0; i<prt; i++)
           x(p[i]);
    }
    #pragma omp barrier
    #pragma omp single
     g(p);
    #pragma omp barrier
} 
```

# java - 枚举与类：代码重复、组合、扩展、泛型

> ID：16105383
> 
> 赞同：1
> 
> 时间：2013-04-19T13:08:03.903
> 
> 标签：java, inheritance, enums, composition, code-duplication

> 注意：我意识到这与[消除重复枚举代码](https://stackoverflow.com/questions/77213/eliminating-duplicate-enum-code)的问题非常相似，但我认为单独讨论这个问题可能很有用，因为我还提到了扩展（子类化）和泛型等问题。如果这看起来多余，我深表歉意。

我在前段时间编写的程序中实现了一些优化。当前的一个尝试消除由于缺乏对 Java 中的抽象枚举的支持而发生的代码重复（......以及次优设计，我承认这一点）。

这是当前问题的简化版本。有一个接口`IConfigResourceDescriptor`提供了将一些 XML 加载到某些类（实现`IResourceRoot`）的必要信息：

```
public interface IConfigResourceDescriptor {
    String getResourceName();
    String getResourceLocation();
    <T extends IResourceRoot> Class<T> getRootClass();
    IConfigType getConfigType();
    ...
} 
```

我有不同的配置集，可以由不同的应用程序或同一应用程序的不同部分定义，具体取决于那里的需要。例如，这里我展示了 2 组`ResourceDescriptorA`和`ResourceDescriptorB`，这样一组更面向业务逻辑 ( `ResourceDescriptorA`)，另一组更面向用户界面 ( `ResourceDescriptorB`)。如您所见，它们的代码是相同的；它们分开的唯一原因是保持这两组配置相互独立是有意义的，但从它们的实现的角度来看，它们是完全相同的。

```
public enum ResourceDescriptorA implements IConfigResourceDescriptor {
    MODEL("model.xml", "config/", Model.class, ConfigTypeA.MODEL),
    RULES("rules.xml", "config/validation/", Rules.class, ConfigTypeA.RULES),
    HELP("help.xml", "config/", Help.class, ConfigTypeA.HELP);

    private String resourceName;
    private String resourceLocation;
    private Class<? extends IResourceRoot> rootClass;
    private IConfigType configType;

    private <T extends IResourceRoot> ResourceDescriptorA(String resourceName,
       String resourceLocation, Class<T> rootClass, IConfigType configType) {
        this.resourceName = resourceName;
        this.resourceLocation = resourceLocation;
        this.rootClass = rootClass;
        this.configType = configType;
    }

    public String getResourceName() {
        return resourceName;
    }
    public String getResourceLocation() {
        return resourceLocation;
    }
    public <T extends IResourceRoot> Class<T> getRootClass() {
        return rootClass;
    }
    public IConfigType getConfigType() {
        return configType;
    }
    ...
} 
```

```
public enum ResourceDescriptorB implements IConfigResourceDescriptor {
    DIALOGS("dialogs.xml", "config/", Dialogs.class, ConfigTypeB.DIALOGS),
    FORMS("forms.xml", "config/", Forms.class, ConfigTypeB.FORMS),
    MENUS("menus.xml", "config/", Menus.class, ConfigTypeB.MENUS);

    private String resourceName;
    private String resourceLocation;
    private Class<? extends IResourceRoot> rootClass;
    private IConfigType configType;

    private <T extends IResourceRoot> ResourceDescriptorB(String resourceName,
       String resourceLocation, Class<T> rootClass, IConfigType configType) {
        this.resourceName = resourceName;
        this.resourceLocation = resourceLocation;
        this.rootClass = rootClass;
        this.configType = configType;
    }

    public String getResourceName() {
        return resourceName;
    }
    public String getResourceLocation() {
        return resourceLocation;
    }
    public <T extends IResourceRoot> Class<T> getRootClass() {
        return rootClass;
    }
    public IConfigType getConfigType() {
        return configType;
    }
    ...
} 
```

## 解决方案

我的想法是将代码移动到辅助类并从枚举中引用它。此外，为了避免有很多方法只是将调用包装到实际`IConfigResourceDescriptor`（帮助程序类），我定义了一个新接口`IConfigResourceDescriptorProvider`，它只返回`IConfigResourceDescriptor`，然后可用于获取配置的实际描述。枚举现在实现`IConfigResourceDescriptorProvider`而不是`IConfigResourceDescriptor`.

包含实际实现的新助手类：

```
public class ConfigResourceDescriptor implements IConfigResourceDescriptor {

    private String resourceName;
    private String resourceLocation;
    private Class<? extends IResourceRoot> rootClass;
    private IConfigType configType;

    public <T extends IResourceRoot> ConfigResourceDescriptor(String resourceName,
       String resourceLocation, Class<T> rootClass, IConfigType configType) {
        this.resourceName = resourceName;
        this.resourceLocation = resourceLocation;
        this.rootClass = rootClass;
        this.configType = configType;
    }

    public String getResourceName() {
        return resourceName;
    }
    public String getResourceLocation() {
        return resourceLocation;
    }
    public <T extends IResourceRoot> Class<T> getRootClass() {
        return rootClass;
    }
    public IConfigType getConfigType() {
        return configType;
    }
    ...
} 
```

枚举实现的新接口。它只是返回实际的描述符：

```
public interface IConfigResourceDescriptorProvider {
    IConfigResourceDescriptor getResourceDescriptor();
} 
```

枚举被简化：构造函数`ConfigResourceDescriptor`使用参数的值创建一个（帮助类）。`ConfigResourceDescriptor`是实际的描述符。

```
public enum ResourceDescriptorProviderA implements IConfigResourceDescriptorProvider {
    MODEL("model.xml", "config/", Model.class, ConfigTypeA.MODEL),
    RULES("rules.xml", "config/validation/", Rules.class, ConfigTypeA.RULES),
    HELP("help.xml", "config/", Help.class, ConfigTypeA.HELP);

    private IConfigResourceDescriptor resourceDescriptor;

    private <T extends IResourceRoot> ResourceDescriptorA(String resourceName,
       String resourceLocation, Class<T> rootClass, IConfigType configType) {
        resourceDescriptor = new ConfigResourceDescriptor(resourceName,
                  resourceLocation, rootClass, configType);
    }

    public IConfigResourceDescriptor getResourceDescriptor() {
        return resourceDescriptor;
    }
} 
```

```
public enum ResourceDescriptorProviderB implements IConfigResourceDescriptorProvider {
    DIALOGS("dialogs.xml", "config/", Dialogs.class, ConfigTypeB.DIALOGS),
    FORMS("forms.xml", "config/", Forms.class, ConfigTypeB.FORMS),
    MENUS("menus.xml", "config/", Menus.class, ConfigTypeB.MENUS);

    private IConfigResourceDescriptor resourceDescriptor;

    private <T extends IResourceRoot> ResourceDescriptorB(String resourceName,
       String resourceLocation, Class<T> rootClass, IConfigType configType) {
        resourceDescriptor = new ConfigResourceDescriptor(resourceName,
                  resourceLocation, rootClass, configType);
    }

    public IConfigResourceDescriptor getResourceDescriptor() {
        return resourceDescriptor;
    }
} 
```

这`ConfigResourceDescriptor`是一个类而不是枚举的事实也意味着它可以被扩展以提供额外的功能。也许那时我会有一个`ResourceDescriptorProviderC`实例化`AdvancedConfigResourceDescriptor`而不是`ConfigResourceDescriptor`并且能够提供更多功能：

```
public class AdvancedConfigResourceDescriptor extends ConfigResourceDescriptor {
    // additional methods
} 
```

事实上，现在枚举没有实现`IConfigResourceDescriptor`，而是`IConfigResourceDescriptorProvider`意味着我曾经做的地方......

```
ResourceDescriptorProviderA.MODEL.getResourceName(); 
```

...现在我必须做...

```
ResourceDescriptorProviderA.MODEL.getResourceDescriptor().getResourceName(); 
```

...但是资源描述符的使用在我的代码中非常集中，我只需要进行一些更改。我更喜欢这样，而不是必须在实现接口的*所有*枚举中定义*所有*包装器方法。我没有任何外部合同，所以我不会通过改变这个来破坏任何客户。

 *## 问题是...

这可以吗，或者有什么我没有预料到可能会出现问题的地方吗？您在这种方法中看到任何大的（或小的，或中等的）禁忌吗？有更好的方法吗？

这是反复出现的问题，我永远不确定正确的方法是什么。
我试图寻找有关使用枚举的好的和坏的做法，但是（令人惊讶的是）我只发现了非常基本的东西或例子，这些东西太具体而对我有用。如果你能推荐我能读到的关于这个主题的好文章/博客/书籍，我也会很感激。
谢谢！

* * *

## 泛型

使用类而不是枚举的另一个优点是我可以使它（和接口`IConfigResourceDescriptor`）通用：

```
public interface IConfigResourceDescriptor<T extends IResourceRoot> {
    String getResourceName();
    String getResourceLocation();
    Class<T> getRootClass();
    IConfigType getConfigType();
    ...
} 
```

```
public class ConfigResourceDescriptor<T extends IResourceRoot> implements IConfigResourceDescriptor<T> {

    private String resourceName;
    private String resourceLocation;
    private Class<T> rootClass;
    private IConfigType configType;

    public ConfigResourceDescriptor(String resourceName,
       String resourceLocation, Class<T> rootClass, IConfigType configType) {
        this.resourceName = resourceName;
        this.resourceLocation = resourceLocation;
        this.rootClass = rootClass;
        this.configType = configType;
    }

    public String getResourceName() {
        return resourceName;
    }
    public String getResourceLocation() {
        return resourceLocation;
    }
    public Class<T> getRootClass() {
        return rootClass;
    }
    public IConfigType getConfigType() {
        return configType;
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:16:55.513

我看不出你的方法有任何问题。您可能会遇到一个潜在的未来问题，但应该很容易避免。

当您希望将功能添加到您`enum`的 s. `enum`然后，处理附加到的数据在代理对象中而功能在代理对象中的事实可能会有点令人不安，`enum`特别是如果功能依赖于数据。

我喜欢你的方法，并打算自己研究它的用途。

同时，您可能还想尝试其他两种技术。

一个类似于你的，但它`enum`是一个对象的内部类，它继承自一个泛型超类，其泛型类型包括`enum`. [这](https://stackoverflow.com/a/14773325/823393)是一个包含示例的帖子。这里的技巧是将`EnumSet`枚举的一个传递给父构造函数，以便它可以提供通用功能。

第二种技术可能对您不太感兴趣，因为它实际上涉及对一个`enum`对象和另一个对象进行代理组合。[这](https://stackoverflow.com/a/16114128/823393)是最近发布的示例。*

# windows-phone-7 - Windows 手机 8：消息框

> ID：16105385
> 
> 赞同：-2
> 
> 时间：2013-04-19T13:08:14.937
> 
> 标签：windows-phone-7

我已经为 WP8 开发了 xaml 应用程序。我正在使用 MessageBox 来显示警报消息。它工作正常，但现在它在 Lumia 920 中无法正常工作，在 Lumia 620 上同样可以正常工作。在 Lumia 920 上测试时出现了多个警报，然后我只是连续按下确定按钮。有问题吗？在那之后消息框警报不起作用。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:20:04.427

您只需重新启动设备并检查它。

# websocket - WebSocket Onclose 状态码 1001 表示 Going Away 的意思

> ID：16105386
> 
> 赞同：14
> 
> 时间：2013-04-19T13:08:17.653
> 
> 标签：websocket

我在我的应用程序中使用 Web 套接字

在 onclose 事件中，我得到的状态代码为 1001

根据这个网站，状态码 1001 表示离开

[WebSockets 状态码](http://www.iana.org/assignments/websocket/websocket.xml#close-code-number-rules)

请让我知道 Status 1001 的含义（Going Away）到底是什么意思

请让我知道，提前谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T13:22:04.230

来自[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)：

```
 1001 indicates that an endpoint is "going away", such as a server
  going down or a browser having navigated away from a page. 
```

# twitter-bootstrap - Karma Runner > 在 angular 和 angular-mocks 引发异常之前加载 bootstrap.js

> ID：16105393
> 
> 赞同：5
> 
> 时间：2013-04-19T13:08:39.023
> 
> 标签：twitter-bootstrap, angularjs, angularjs-directive, karma-runner

我有一个 angularjs 应用程序，其中包含一些使用 jquery 和引导组件的指令。因此，为了测试指令，我在 karma.unit.conf.js 中定义了以下文件顺序：

```
files = [

 JASMINE,
 JASMINE_ADAPTER,

 'app/components/jquery/jquery.js',
 'app/scripts/vendor/bootstrap.js',

 'app/components/angular/angular.js',
 'app/components/angular-mocks/angular-mocks.js',
 'app/components/angular-ui/build/angular-ui.js',

 'app/scripts/app.js',

 'app/scripts/**/*.js',

 'test/spec/unit/**/*.js'

]; 
```

~~如果我先加载 angularjs 和 angular-mocks，然后加载 jquery 和 bootstrap，测试会运行并失败，因为 angular 使用自己的 jQLite。但是，如果我改变了我在这里写的顺序，那么这就是我得到的：~~

# 编辑：

我发现导致异常的不是 jQuery ......它是 bootstrap.js。如果我注释 bootstrap.js 行，测试就会运行（并且失败，正如预期的那样，因为从未加载过引导组件）。如果我如上所述加载引导程序（或在测试之前的任何其他地方），那么我会得到这个：

```
PhantomJS 1.8 (Linux) Directive: tkModal should make hidden element visible FAILED[39m
    at /home/ir/work/campari/app/components/jquery/jquery.js:1763
    at /home/ir/work/campari/app/components/jquery/jquery.js:2833
    at /home/ir/work/campari/app/components/jquery/jquery.js:2850
    at /home/ir/work/campari/app/components/jquery/jquery.js:2850
    at /home/ir/work/campari/app/components/jquery/jquery.js:2850
     ...
     at /home/ir/work/campari/app/components/jquery/jquery.js:2850
    at /home/ir/work/campari/app/components/jquery/jquery.js:2850
    at /home/ir/work/campari/app/components/jquery/jquery.js:2850
    at /home/ir/work/campari/app/components/jquery/jquery.js:3656
    at /home/ir/work/campari/app/components/jquery/jquery.js:648
    at /home/ir/work/campari/app/components/jquery/jquery.js:270
    at /home/ir/work/campari/app/components/jquery/jquery.js:3657
    at /home/ir/work/campari/app/components/jquery/jquery.js:3664
    at /home/ir/work/campari/app/components/angular-mocks/angular-mocks.js:1589
    at /home/ir/work/campari/app/components/angular-mocks/angular-mocks.js:1627 
```

在测试失败之前，该行`at /home/ir/work/campari/app/components/jquery/jquery.js:2850`无休止地重复了大约 15k 次（这似乎发生在 jQuery 尝试在 jquery.js:1763 处执行 internalData 函数时）。

~~任何想法将不胜感激~~

# 编辑：已解决

找到了答案，这是 2.3.0 版本中的引导问题，更新到 2.3.1 解决了它。见[https://github.com/twitter/bootstrap/issues/6835](https://github.com/twitter/bootstrap/issues/6835)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T16:27:27.583

找到了答案，这是 2.3.0 版本中的引导问题，更新到 2.3.1 解决了它。见[https://github.com/twitter/bootstrap/issues/6835](https://github.com/twitter/bootstrap/issues/6835)

# python - 如何在 models.ForeignKey 字段上添加绿色加号按钮？

> ID：16105402
> 
> 赞同：4
> 
> 时间：2013-04-19T13:09:12.767
> 
> 标签：python, django, foreign-keys, admin

我的models.py中有这样一个字段：

```
class Animal(models.Model):
    master = models.ForeignKey('masters.Master', blank=True, null=True, db_index=True, related_name='master_of') 
```

但是在 Django admin 中，右边没有绿色的小“+”按钮，所以你不能从那里添加新的 master，这不是很实用。

所以我希望绿色的“+”按钮出现在“master”字段上，以便能够直接从那里添加一个 master。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:36:38.397

您的主模型是否已在您的 admin.py 中注册？

如果没有，Django 将不会处理它。

# iphone - 如何在 IOS 中修复视图控制器的特定方向

> ID：16105410
> 
> 赞同：1
> 
> 时间：2013-04-19T13:09:30.363
> 
> 标签：iphone, ios, objective-c, ipad, screen-orientation

我正在开发一个 iPad 应用程序。它是在弹出窗口中捕获图像并在下一个视图中全屏裁剪图像。这里它由以下屏幕组成

1）`LoginViewContoller`（需要所有方向），

2）`SplitViewController`（需要所有方向），`

3）`ImageCropViewController`（只需要风景），

4）`SettingsViewController`（需要所有方向）。

在`ImageCropViewController`我正在编写以下代码：

```
- (BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

我得到了确切的方向。但它的作用`LoginViewController's`和`SettingViewController's`方向也是。

在`LoginViewController`and`SettingViewController`中，我正在编写以下代码

```
- (BOOL)shouldAutorotate
    {
        return YES;
    }

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape | UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

`SplitViewController`在从to导航时`ImageCropViewController`，我正在启动`ImageCropViewController`as `rootViewController`。

在 plist 我支持这样的方向

![在此处输入图像描述](https://i.stack.imgur.com/qmdVI.png) 我用谷歌搜索了它。并整合了可用的代码。但我没有找到任何解决方案。请帮我。它真的在浪费我的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:20:37.207

这是我在我的 iPhone 项目上设置它的方式，但对你来说应该没有什么不同：

首先，确保您的项目支持所有您想要的方向：

![支持的接口方向](https://i.stack.imgur.com/LJ7zz.png)

然后，在您的 SplitViewController、ImageCropViewController 和 SettingsViewController 上覆盖这些方法：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

最后，在 ImageCropViewController 上覆盖这些方法：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

让我知道它是否有帮助！

# apache - 基于 URL 参数有选择地强制使用 Apache 下载文件

> ID：16105412
> 
> 赞同：2
> 
> 时间：2013-04-19T13:09:48.977
> 
> 标签：apache, .htaccess, download, url-parameters

我有一个 Apache 2.2 正在运行，我强制使用这个 .htaccess 片段下载一些文件：

```
<Files *.*>
        ForceType application/octet-stream
        Header set Content-Disposition attachment
</Files> 
```

所有受影响的文件都在一个子文件夹中，所以到目前为止效果很好。不幸的是，现在事实证明这有时会导致问题（例如，jplayer 不喜欢那样）。我现在需要有选择地使用默认行为，或强制下载这些文件。

我想必须以某种方式选择带有 URL 参数的行为，以便

```
http://example.com/files/music.mp3 
```

会导致正常行为（即可以播放 MP3 的浏览器会这样做，而 jplayer 不会抱怨），并且

```
http://example.com/files/music.mp3?download=1 
```

会强制下载。但是我不知道如何根据参数的存在有选择地使用 ForceType。我知道使用一些 PHP 很容易实现，但如果可能的话，我想避免这种情况。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:02:55.907

一种相当有效的方法是创建另一个文件夹，称为 /download/，其中包含您的 htaccess 片段，并使用此添加的重写规则将所有 /download/ 文件请求重定向到 /file/ 文件夹.htaccess

```
RewriteEngine on
RewriteRule ^(.*)$ files/$1 [L] 
```

这样，出于分析/日志的目的，您可以使用良好的语义单独识别下载，并通常调用您的 /files/ 用于 html 嵌入使用，而 /files/ 请求不会有任何 .htaccess 性能下降，这不会受到 .htaccess 的影响从 /download/ 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:36:19.080

这里已经回答了一个类似的问题：

[https://stackoverflow.com/a/7446204/2291963](https://stackoverflow.com/a/7446204/2291963)

读取 QueryString，并将其设置为您决定使用的任何文件扩展名。

# php - WordPress 标题图片

> ID：16105415
> 
> 赞同：0
> 
> 时间：2013-04-19T13:09:56.013
> 
> 标签：php, wordpress

我的 WordPress 博客包含以下片段：

```
<?php
    $images = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'full');
    if (count($images) > 0) { ?>

       <div class="image-holder">
       <a href="<?php the_permalink(); ?>"><img src="<?php bloginfo('template_directory') ?>/javascript/timthumb.php?src=<?php echo $images[0]; ?>&amp;h=320&amp;w=630&amp;zc=1" alt="<?php the_title();?>"  /></a>             
       </div>

    <?php }
?> 
```

这会在实际内容的顶部显示标题图像（特色图像）并使用 timthumbb 调整其大小。这里一切都很好，但是如果没有定义的特色图像，它会显示损坏的 img src。有没有办法编辑它以便仅在实际存在的情况下显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:16:08.450

我用了这个，它工作正常：

```
// get the ancestors
$familyTree = get_ancestors($post->ID, 'page');
array_unshift($familyTree, $post->ID); //add the current page to the beginning of the list

// loop through the family tree until you find a result or exhaust the array
$featuredImage = '';
foreach ($familyTree as $family_postid) {
    if (has_post_thumbnail($family_postid)) {
        $featuredImage = get_the_post_thumbnail($family_postid, 'full');
        // the 'full' argument tells WordPress not to re-size the image to thumbnail dimensions
        break;
    }
}

// if the page has a featured image then show it
echo ($featuredImage ? $featuredImage : ""); 
```

它还将特色图片应用于子页面，除非子页面有自己的特色图片，不确定您是否想要，但如果没有特色图片，不显示任何内容应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:16:37.017

```
Try using this logic

<?php

    if($images[0]!='')
    {
     <div class="image-holder">
           <a href="<?php the_permalink(); ?>"><img src="<?php bloginfo('template_directory') ?>/javascript/timthumb.php?src=<?php echo $images[0]; ?>&amp;h=320&amp;w=630&amp;zc=1" alt="<?php the_title();?>"  /></a>             
           </div>
    }

    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:16:49.083

如果只有一张图片，您可以使用

```
if ($images[0]!='') { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:17:13.013

您可以使用该功能`has_post_thumbnail()`检查帖子是否有特色图片。

用法：

```
 $images = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'full');
    if (count($images) > 0) { ?>

       <div class="image-holder">
       <a href="<?php the_permalink(); ?>"><img src="<?php bloginfo('template_directory') ?>/javascript/timthumb.php?src=   <?php echo $images[0]; ?>&amp;h=320&amp;w=630&amp;zc=1" alt="<?php the_title();?>"  /></a>             
       </div>

    <?php }
} ?> 
```

# environment-variables - 如何添加到完整的环境路径？

> ID：16105416
> 
> 赞同：0
> 
> 时间：2013-04-19T13:10:01.920
> 
> 标签：environment-variables

我需要在环境路径中添加两个目录，但是当我输入第一个目录时，它会在中间被切断。在我看来，我的环境路径已满（那里有很多东西）。

如何将我的两个目录添加到环境路径？

我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:15:05.163

我猜你在windows下工作。制作 2 个新的环境变量。然后按名称将 2 个环境变量添加到环境路径，如下所示：

```
%variable_name1%;%variable_name2%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:20:14.597

在窗口中：

```
PATH="PATH1";"PATH2";%PATH% 
```

在 Unix 中：

```
PATH="PATH":"PATH":%PATH% 
```

注意：如果路径在 c:\Program Files\abc 之间包含空格，则需要引号

# java - Java Object.hashCode() - 地址还是随机()？

> ID：16105420
> 
> 赞同：24
> 
> 时间：2013-04-19T13:10:05.083
> 
> 标签：java

我试图了解该`hashCode()`方法的本机实现。这个方法到底返回了什么？它是内存地址还是随机值？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-19T13:33:36.903

`.hashCode()`本机实现依赖于 JVM。

例如 HotSpot 有 6 个`Object.hashCode()`实现。您可以`-XX:hashCode=n`通过命令行使用运行 JVM 的标志来选择它，其中 n：

> 0 – Park-Miller RNG（默认）
> 1 – f(address, global_statement)
> 2 – 常量 1
> 3 – 串行计数器
> 4 – 对象地址
> 5 – 线程局部 Xorshift

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-19T13:11:27.373

从[文档中](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)：

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。^(（这通常通过将对象的内部地址转换为整数来实现，但 Java TM)编程语言不需要这种实现技术。）

所以它*可能*与内存地址有关，但不一定是 - 而且您绝对不应该对它与内存有关的任何假设。

您对哈希码所做的任何事情都不应该关心这一点。您应该从哈希码中推断出的*唯一内容是：*

*   如果两个对象的哈希码相同，它们*可能*是相等的对象
*   如果两个对象的哈希码不同，则它们不是相等的对象（假设一个正确的实现，无论是否被覆盖）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T13:13:26.410

你的答案就[在这里](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)。如文档中所述：

*在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。^(（这通常通过将对象的内部地址转换为整数来实现，但 Java TM)编程语言不需要这种实现技术。）*

# android - 如何在 Android 中从 Sdcard 解析联系人 Vcard 文件

> ID：16105421
> 
> 赞同：1
> 
> 时间：2013-04-19T13:10:05.373
> 
> 标签：android

我正在尝试解析 Vcard 文件。这是我的代码。

```
public void get_vcf_data(String file) throws VCardException, IOException{
         VCardParser parser = new VCardParser();
            VDataBuilder builder = new VDataBuilder();

            //String file = path;

            //read whole file to string
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    new FileInputStream(file), "UTF-8"));

            String vcardString = "";
            String line;
            while ((line = reader.readLine()) != null) {
                vcardString += line + "\n";
            }
            reader.close();

            //parse the string
            boolean parsed = parser.parse(vcardString, "UTF-8", builder);
            if (!parsed) {
                throw new VCardException("Could not parse vCard file: " + file);
            }

            //get all parsed contacts
            List<VNode> pimContacts = builder.vNodeList;

            //do something for all the contacts
            for (VNode contact : pimContacts) {
                ArrayList<PropertyNode> props = contact.propList;

                //contact name - FN property
                String name = null;
                String number = null;
                String tel = null;
                for (PropertyNode prop : props) {
                    if ("FN".equals(prop.propName)) {
                        name = prop.propValue;
                        Contact_name.add(name);
                        Log.d("Name", name);
                        //we have the name now
                        break;
                    }
                }
                for (PropertyNode prop : props) {
                    if ("N".equals(prop.propName)) {
                        number = prop.propValue;
                        Contact_number.add(number);
                        Log.d("Name", number);
                        //we have the name now
                        break;
                    }
                }
                for (PropertyNode prop : props) {
                    if(" TEL".equals(prop.propName))
                    {
                        tel = prop.propValue;
                        Contact_tel.add(tel);
                        Log.d("Name", tel);
                    }
                }
                Log.d("Tag", ""+Contact_name.size()+"::"+Contact_number.size()+"::"+Contact_tel.size());

                //similarly for other properties (N, ORG, TEL, etc)
                //...

                System.out.println("Found contact: " + name);
            }
} 
```

但在while循环中遇到问题

```
while ((line = reader.readLine()) != null) {
                vcardString += line + "\n";
            } 
```

在while循环中不断循环，一旦进入就不会退出循环

# python - 在 python 中调用 dll 传递的值错误

> ID：16105423
> 
> 赞同：0
> 
> 时间：2013-04-19T13:10:10.270
> 
> 标签：python, dll, shared-libraries, ctypes, byref

我必须使用不同的 dll 导出此函数（每个 dll 一个函数）：

dll1：

```
DECLDIR void getFrameworkVersion(int* pMajor, int* pMinor, int* pBugfix); 
```

dll2：

```
void __stdcall getFrameworkVersion(int* pMajor, int* pMinor, int* pBugfix); 
```

我在python中导入两个dll都没有错误，并且调用它们也没有错误。但是我得到了错误的值

```
dll1 = cdll.LoadLibrary('dll1')
dll2 = oledll.LoadLibrary('dll2')

pMajor = pMinor = pbugFix = c_int()

dll1.getASTFrameworkVersion.argtypes = [ctypes.POINTER(ctypes.c_int), ctypes.POINTER(ctypes.c_int), ctypes.POINTER(ctypes.c_int)]
#test.eval.restype = ctypes.c_double
dll1.getASTFrameworkVersion(byref(pMajor), byref(pMinor), byref(pbugFix))
astVersion = "AST Framework version: " + str(pMinor.value) + "."  + str(pbugFix.value) + "."  + str(pMajor.value)

dll2.getFrameworkVersion.argtypes = [ctypes.POINTER(ctypes.c_int), ctypes.POINTER(ctypes.c_int), ctypes.POINTER(ctypes.c_int)]
dll2.getFrameworkVersion(byref(pMajor), byref(pMinor), byref(pbugFix))
asfVersion = "ASF Framework version: " + str(pMinor.value) + "."  + str(pbugFix.value) + "."  + str(pMajor.value) 
```

我得到这个输出：

```
 AST Framework version: 0.0.0
    ASF Framework version: 14.14.14 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:46:04.777

`pMajor = pMinor = bugFix = c_int()`错了：所有三个 Python 名称都是同一个`c_int`实例，因此将包含相同的值！您所做的相当于 C 中的以下代码：

```
int x;
getFrameworkVersion(&x, &x, &x); 
```

所以你得到的事实`0.0.0`可能是因为真正的结果会以 结尾`.0`，它会覆盖前两个值。

# android - 由于 sqlite 的问题，android 应用程序崩溃

> ID：16105425
> 
> 赞同：0
> 
> 时间：2013-04-19T13:10:12.853
> 
> 标签：android, database, sqlite, crash

我正在尝试编写一个应用程序，并且我想将 sql 用于我的数据库。几乎每个查询中的命令都有问题。这是我的 DBAdapter.java 文件：

```
public class DBAdapter {

static final String KEY_ROWID = "_id";
static final String KEY_HOUR_BEGIN = "hour_begin";
static final String KEY_HOUR_END = "hour_end";
static final String KEY_TEM_NAME = "tem_name";
static final String KEY_PERCENT = "percent";
static final String TAG = "DBAdapter";

static final String DATABASE_NAME = "MYDB";
static final String DATABASE_TABLE_TEMPLATE = "template";
static final int DATABASE_VERSION = 2;

static final String DATABASE_CREATE_TEMPLATE = 
        "create table template (_id integer primary key autoincrement, " +
        "tem_name text not null, hour_begin text not null, hour_end text not null, " +
        "percent text not null";

final Context context;

DatabaseHelper DBHelper;
SQLiteDatabase db;

public DBAdapter(Context ctx)
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context)
    {
        super(context,DATABASE_NAME,null,DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        try{
            db.execSQL(DATABASE_CREATE_TEMPLATE);
        }catch(SQLException e){
            e.printStackTrace();
        }

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Updating database from version " + oldVersion + " to "
    + newVersion + ", which will all old data");
        db.execSQL("DROP TABLE IF EXISTS template");
        onCreate(db);

    }
}

//opens the database
public DBAdapter open() throws SQLException
{
    db = DBHelper.getWritableDatabase();
    return this;
}

//closes the database
public void close()
{
    DBHelper.close();
}

            //insert template into the database
            public long insertTemplate(String tem_name, String hour_begin, String hour_end, String percent)
            {
                ContentValues initialValues = new ContentValues();
                initialValues.put(KEY_TEM_NAME, tem_name);
                initialValues.put(KEY_HOUR_BEGIN, hour_begin);
                initialValues.put(KEY_HOUR_END, hour_end);
                initialValues.put(KEY_PERCENT, percent);
                return db.insert(DATABASE_TABLE_TEMPLATE, null, initialValues);
            }

            //deletes a particular template
            public boolean deleteTemplate(long rowId)
            {
                return db.delete(DATABASE_TABLE_TEMPLATE, KEY_ROWID + "=" + rowId, null) > 0;
            }

            //retrieves all the template
            public Cursor getAllTemplates()
            {
                return db.query(DATABASE_TABLE_TEMPLATE, new String[] 
                        {KEY_ROWID, KEY_TEM_NAME, KEY_HOUR_BEGIN, KEY_HOUR_END, 
                        KEY_PERCENT}, null, null, null, null, null);
            }

            //retrieves a particular template
            public Cursor getTemplate(long rowId) throws SQLException
            {
                Cursor mCursor = 
                        db.query(true, DATABASE_TABLE_TEMPLATE, new String[]
                                {KEY_ROWID, KEY_TEM_NAME, KEY_HOUR_BEGIN, KEY_HOUR_END, 
                                KEY_PERCENT}, KEY_ROWID + "=" + rowId, 
                                null, null, null, null, null);
                if(mCursor != null)
                {
                    mCursor.moveToFirst();
                }
                return mCursor;
            }

            //updates a template
            public boolean updateTemplate(long rowId, String tem_name, String hour_begin, String hour_end, String percent)
            {
                ContentValues args = new ContentValues();
                args.put(KEY_TEM_NAME, tem_name);
                args.put(KEY_HOUR_BEGIN, hour_begin);
                args.put(KEY_HOUR_END, hour_end);
                args.put(KEY_PERCENT, percent);
                return db.update(DATABASE_TABLE_TEMPLATE, args, KEY_ROWID + "=" + rowId, null) > 0;
            } 
```

}

这是我的 mainActivity.java 这是在 onCreate 函数中：

```
DBAdapter db = new DBAdapter(this);
    db.open();

    //inserting template
    long id = db.insertTemplate("morning", "06:00", "14:00", "125");

    //getting all the templates
    Cursor c = db.getAllTemplates();
    if(c.moveToFirst())
    {
        do{
            DisplayTemplate(c);
        }while(c.moveToNext());
    }

    //getting one template
    Cursor c = db.getTemplate(1);
    if(c.moveToFirst())
        DisplayTemplate(c);
    else
        Toast.makeText(this, "template not found!", Toast.LENGTH_LONG).show();

    //updating one template
    if(db.updateTemplate(1, "fgdhjf", "12:30:", "20:32", "200"))
        Toast.makeText(this, "update successful", Toast.LENGTH_LONG).show();
    else
        Toast.makeText(this, "update unsuccessful", Toast.LENGTH_LONG).show();

    //deleting one template
    if(db.deleteTemplate(5))
        Toast.makeText(this, "delete successful", Toast.LENGTH_LONG).show();
    else
        Toast.makeText(this, "delete unsuccessful", Toast.LENGTH_LONG).show();

    db.close(); 
```

这是 onCreate 函数中的 DisplayTemplate 函数：

```
private void DisplayTemplate(Cursor c) {
    Toast.makeText(this, "template_id: " + 
c.getString(0) + "\n" + "name: " + 
            c.getString(1) + "\n" + 
"hour begin: " + c.getString(2) + "\n" + 
            "hour end: " + c.getString(3) + 
            "\n" + "percent: " + c.getString(4), 
            Toast.LENGTH_LONG).show(); 
```

mainActivity 中的每个函数都有问题。我检查了调试器，问题出在 DBAdapter 文件上。有人可以告诉我我做错了什么吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:34:52.190

这是语法的一个小问题。就这样。感谢您的时间

# mql4 - HTTP 将 MQL4 发布到 php

> ID：16105428
> 
> 赞同：0
> 
> 时间：2013-04-19T13:10:15.750
> 
> 标签：mql4, metatrader4

这是我尝试使用的一段代码，用于`POST`从 MQL4 脚本到名为 upload.php 的外部 php 脚本的一组 13 个参数值

```
 string headers = "Content-Type: application/x-www-form-urlencoded";
   string data    = "{\"ohlcVectors\":{\"ticker\":\"dax\",\"barIntervalSeconds\":300,\"open\":[6844.2998046875," +
      "6847.7998046875]},\"className\":\"MAIndicator\",\"parameters\":{\"periods\":2}}";

string acceptTypes[1] = {"*/*"};

   int HttpOpen    = InternetOpenA(   "HTTP_Client_Sample", 1, NULL, NULL, 0 );
   int HttpConnect = InternetConnectA( HttpOpen, "127.0.0.1", 7777, NULL, NULL, 3, 0, 1 );
   int HttpRequest = HttpOpenRequestA( HttpConnect, "POST", "/tradesheet/upload.php", NULL, NULL, acceptTypes, 0, 1 );
                     HttpSendRequestA( HttpRequest, headers, StringLen( headers ), data, StringLen( data ) ); 
```

编译器不断抛出一个**`data`**不兼容类型的错误。`data`当我正在寻找`MQL4`将参数发送到 php.ini 的方法时，该字符串是从站点中获取`POST`的。但我需要那个字符串`data`有我自己的参数值，但不知道如何把它放在正确的格式。

我尝试了很多搜索，但找不到任何有用的东西。

以下是我需要发送到upload.php 的参数列表。有人可以帮我安排**`HttpSendRequestA()`**预期的格式吗？

```
string params[13][13];
params[0][0] = "x1";
params[0][1] = "GOD@GMAIL.com";

params[1][0] = "x2";
params[1][1] = 10000;

params[2][0] = "x3";
params[2][1] = 10000;

params[3][0] = "x4";
params[3][1] = "fxpro";

params[4][0] = "x5";
params[4][1] = "usd";

params[5][0] = "x6";
params[5][1] = 10000;

params[6][0] = "x7";
params[6][1] = 5000;

params[7][0] = "x8";
params[7][1] = 10;

params[8][0] = "x9";
params[8][1] = 10;

params[9][0] = "x10";
params[9][1] = "sdfskfms";

params[10][0] = "x11";
params[10][1] = 232;

params[11][0] = "x12";
params[11][1] = 230;

params[12][0] = "x13";
params[12][1] = "fxpro"; 
```

万分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T21:34:59.263

很有可能您使用的是 build 600。Build 600 支持 Unicode 而不再支持 Ansi。

因此，这些是您必须使用的功能：

```
InternetOpenW
InternetConnectW
HttpOpenRequestW
HttpSendRequestW 
```

见下文：

[Mt4 b600 / ghttp.mqh 和 InternetOpenUrlA() 问题](http://forum.mql4.com/60826)

# node.js - 如何彻底断开与 socket.io 中的命名空间的连接？

> ID：16105429
> 
> 赞同：3
> 
> 时间：2013-04-19T13:10:18.493
> 
> 标签：node.js, sockets, azure, websocket, socket.io

我一直试图断开与命名空间甚至主套接字连接本身的连接，但一直失败。下面是我的代码

服务器端：

```
 socket.on('userDisconnect', function () {        
    socket.disconnect();
    console.log("User Disconnected");       

}); 
```

客户端：

```
// already connected to /world namespace
socket.emit('userDisconnect');
    socket.disconnect();
socket = io.connect('http://something/india' ); 
```

我尝试从客户端和服务端断开连接，但它不起作用。谁能指出错误。这是 socket.io 写入控制台的内容

```
 info  - booting client
 debug - websocket writing 0::/world
User Disconnected
   debug - client authorized for /india
   debug - websocket writing 1::/india 
```

/world 是它尝试断开连接然后尝试连接到 /india 名称空间的名称空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T12:16:25.293

这对我有用

```
broadcastSocket.packet({ type: 'disconnect' });
    broadcastSocket.$emit('disconnect');
    disconnectNamespace(broadcastSocket.name, broadcastSocket.socket);        

function disconnectNamespace (name,socket) {
    if (socket.namespaces[name]) {
        var nsp = socket.of(name);
        nsp.packet({ type: 'disconnect' });
        nsp.$emit('disconnect');
        delete socket.namespaces[name];

        if (Object.keys(socket.namespaces).length === 0) {
            socket.disconnect();
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T14:29:30.910

对于 socket.io v.1.3.2

创建：

```
sio = io('ws://localhost:13000/device'); 
```

删除：

```
sio.disconnect();
delete sio.io.nsps[sio.nsp]; // sio.nsp = '/device'
delete sio; 
```

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-16T22:13:03.403

在服务器上

```
nsp.on('connection', (socket) => {
   setTimeout(() => {
      socket.disconnect(false)
   }, 5000);
}); 
```

断开此客户端。如果 close 的值为 true，则关闭底层连接。否则，它只会断开命名空间。它在文档中[https://socket.io/docs/server-api/](https://socket.io/docs/server-api/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T17:01:35.813

您似乎没有告诉客户端在重新连接之前等待断开连接。

```
// already connected to /world namespace
socket.emit('userDisconnect');
socket.on('disconnect', function () {
  socket = io.connect('http://something/india');
  // stuff with india socket
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-03T22:19:15.343

在服务器或客户端上使用 disconnect() 方法（或两者都像您在示例中所做的那样）。当您第一次连接到服务器时，将 'forceNew':false 添加到客户端连接方法，如下所示：

```
var socket = io('http://localhost:3001', {'forceNew':false}); 
```

# php - PHP - 从 iframe 获取父窗口的 URL 参数

> ID：16105433
> 
> 赞同：1
> 
> 时间：2013-04-19T13:10:47.057
> 
> 标签：php, iframe, parameters, get

到目前为止，我可以将第一个 URL 参数及其值放入变量中 - 从子（iframed）页面。

例如[http://google.com/?x=123](http://google.com/?x=123) 我可以得到 x=123

我已将此代码用于 iframed 页面（子）。

```
<?php
   //Getting the parent window parameters
    $getURLVar = str_replace("?","",strrchr($_SERVER['HTTP_REFERER'],"?"));
    $getURLVar = str_replace("&","=",$getURLVar);
    $getURLVar = str_getcsv($getURLVar,"=");
    $i=0;
    foreach ($getURLVar as $value)
      {
        if ($i % 4)
            $value1[$i]=$value;

        else
            $value2[$i]=$value;

        $i++;
      } 
   // $getURLVar =array_combine($value2,$value1);

    //print_r($getURLVar);

list($v1, $v2) = $getURLVar;
 echo "$v1";

echo "$v2";

    ?> 
```

问题：如果我有超过 1 个参数怎么办？例如[http://google.com/&x=234&results=10](http://google.com/&x=234&results=10)

请帮我修改以上内容以支持超过 1 个参数。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:13:15.587

使用[http://www.php.net/manual/function.parse-str.php](http://www.php.net/manual/function.parse-str.php)和[http://www.php.net/manual/function.parse-url.php](http://www.php.net/manual/function.parse-url.php)来解析 HTTP_REFERER。

//编辑：

```
$referer = 'http://www.google.de/?q=test&foo=bar&blub=bla';

$url = parse_url($referer);

print_r($url);

if(!empty($url['query'])){
    parse_str($url['query'], $query_params);
    print_r($query_params);
} 
```

也许您应该阅读有关基础知识的更多信息...

# ios - 如何在 Objective-C 中解析 JSON 响应的数据？

> ID：16105437
> 
> 赞同：0
> 
> 时间：2013-04-19T13:11:04.557
> 
> 标签：ios, objective-c, json, facebook-graph-api, nsdictionary

我在这个[链接中得到了一个 JSON 输出](https://graph.facebook.com/419022638150395/photos/)

我在此输出中提取了 id。（IE）

419023188150340,
419023228150336,
419023278150331,
419023318150327,
419044998148159,
419045028148156

使用以下代码

```
[[dict objectForKey:@"data"]valueForKey:@"id"]; 
```

dict 具有显示在[链接上的总输出](https://graph.facebook.com/419022638150395/photos/)

我在表格视图中显示了这个。
现在，如果我点击表格视图中的单元格。该表应获取“图片”的值并将其显示在控制台（`NSLog`）中。

我使用以下代码获取响应并将其存储在字典中（此处为 dict）

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
{
    responseData=nil;
    idArray=nil;
    responseData=[[NSMutableData alloc]init];
    idArray=[[NSMutableArray alloc]init];
    dict=[[NSDictionary alloc]init];   
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    [responseData appendData:data];
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    dict=[NSJSONSerialization JSONObjectWithData:responseData options:0 error:NULL];
    [idArray addObjectsFromArray:[[dict objectForKey:@"data"]valueForKey:@"id"]];
    [tableVw reloadData];
} 
```

谁能告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:17:13.600

你这样做是不对的。你首先得到一个`NSArray`IDS，你必须循环它来提取每个ID。试试这个 -

```
NSArray *fbIds = [dict objectForKey:@"data"];
for(NSDictionary *fbId in fbIds)
{
    NSLog("FB ID: %@", [fbID valueForKey:@"id"]);
} 
```

一旦您提取了正确的 Facebook_ID，您就可以使用它`http://graph.facebook.com/419023188150340/picture`来获取您的图片。希望这可以帮助...

# gwtp - 在 GWTP 中，当创建一个新的 Presenter 时，我们使用 Hash Bang(!) 为它设置了一个 NameTokens，但是代码没有显示 Hash Bang，那么 hash bang 在哪里呢？

> ID：16105441
> 
> 赞同：0
> 
> 时间：2013-04-19T13:11:10.747
> 
> 标签：gwtp

好的，在GWTP（GWT Platform，不是Gwt）中，在eclipse中新建presenter时，会有一个字段“Token name:”供我们设置名称token。所以，我在 NameToken 的前面添加了一个 Hash Bang

```
abc.client.place.NameTokens#!myname 
```

& eclipse创建了java文件

```
@NameToken(NameTokens.myname) 
```

那么Hash Bang在哪里（！）？

另外，假设当我们第一次创建一个新的 Presenter 并且我们忘记将 Hash Bang 放在 NameToken 的前面，那么我们如何在不重新创建新的 Presenter 的情况下包含 Hash Bang 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:12:32.957

通常，您的名称标记应在`com.yourproject.client.place.NameTokens`类中作为常量字符串找到：

```
package com.yourproject.client.place;

public class NameTokens {
    public static final String home = "home";
    public static final String myname = "myname";
} 
```

如果要在哈希符号和名称标记之间添加感叹号，只需将其添加到字符串中：

```
package com.yourproject.client.place;

public class NameTokens {
    public static final String home = "home";
    public static final String myname = "!myname";
} 
```

# qt - 在 OpenCV 中使用 Haar 分类器进行键盘控制？

> ID：16105449
> 
> 赞同：0
> 
> 时间：2013-04-19T13:11:51.073
> 
> 标签：qt, opencv

我编写了一个代码，它使用 OpenCV 库从网络摄像头接收图像。在这个程序中，我尝试识别一个对象（例如一个箭头字母）。我的应用程序识别出这封信。假设我打开了一个 power point Presentation，我希望我的 Qt 应用程序能够模拟键盘。我的意思是，例如，当我的应用程序检测到网络摄像头前面有一个“右箭头”时，它将模拟通过键盘按下“右箭头键”，例如，如果 ppt 处于焦点位置，则 ppt 中的下一页开了。我也想知道 Qt 如何知道它在 ppt 中的焦点。

有没有办法做到这一点？

我在 opencv 中使用 Haar 分类器来检测对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:40:32.807

在 Windows 中，您需要使用[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)才能命令键盘字符。

Qt 没有任何内置的键盘命令协议来访问其他程序。

您还可以查看[Microsoft Office SDK](http://msdn.microsoft.com/en-us/office/aa905496.aspx)。

# solr - Solr - PatternTokenizer Factory 的模糊搜索问题

> ID：16105450
> 
> 赞同：0
> 
> 时间：2013-04-19T13:11:52.937
> 
> 标签：solr, fuzzy-search

我在我的应用程序中使用 Solr4.2。我已将我的文本字段定义更改为使用`Solr.PatternTokenizerFactory`而不是`Solr.StandardTokenizerFactory`，并更改了我的架构定义，如下所示

```
<fieldType name="text_token" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
       <tokenizer class="solr.PatternTokenizerFactory" pattern="[^a-zA-Z0-9&amp;\-']|\d{0,4}s:" />
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="false" />
       <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
       <tokenizer class="solr.PatternTokenizerFactory" pattern="[^a-zA-Z0-9&amp;\-']|\d{0,4}s:" />
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords_extra_query.txt" enablePositionIncrements="false" />
       <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
</fieldType> 
```

这样做之后，模糊搜索似乎不像以前那样正常工作了。

我正在搜索搜索词：`worde~1`

在搜索时，它以前返回大约 300 条记录，而现在它只返回 5 条记录。

这 5 条记录的单词有`WORD`, `WORDS`, `WORSE`。但它不会返回带有此类单词的其他文档。

不确定可能是什么问题。

任何人都可以帮我让它工作吗？

## 编辑 ：

正则表达式将按字母、数字、'&'、'-' 和 ns: （其中 n 是从 0 到 9999 的数字，例如 4323s: ）

例如，我的文字如下所示。

`this is nice* day & sun 53s: is risen.`

然后模式标记器应该创建标记为

`this is nice day & sun is risen`（所有单词都是 diff.token ）

模式似乎适用于不同的文本，

同样对于模糊搜索`worde~1`，我检查了 patterntokenizer 工厂的结果返回，有像“WORDS”、“WORDED....”这样的标点符号。

更奇怪的是，所有的结果都是大写的，没有小写的结果。尽管它也不会返回所有大写字母的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:48:12.340

我不认为我们可以用“分析器”做很多事情，因为它已经按照预期的方式工作了。在索引和查询期间应用标记器和过滤器的方式似乎没有任何危害。

因此，假设您的“分析器”部分很好，我认为您执行**模糊搜索**的方式需要进行一些修改。

您在搜索查询中使用的数字（在 ~ 之后）决定了模糊搜索的**精度**。

> “从 Lucene 1.9 开始，一个附加（可选）参数可以指定所需的相似度。该值介于 0 和 1 之间， **值接近 1**只有具有**更高相似度**的术语才会匹配。”

我的建议是减少这个值以获得更多的搜索结果。通过反复试验，您可以根据您的要求在模糊搜索中达到预期的相似度水平。

# java - 在 libGDX 中恢复屏幕，而不是创建新实例

> ID：16105463
> 
> 赞同：1
> 
> 时间：2013-04-19T13:12:17.520
> 
> 标签：java, libgdx

在 libGDX 中是否可以在不创建屏幕 A 的新实例的情况下点击屏幕 B 中的后退按钮后恢复屏幕 A？这样，我的玩家角色只需从其最后一个位置继续行走，而不是从起点行走。当用户从屏幕 A 导航到屏幕 B 时，屏幕 A 会暂停，但游戏不会。

我通常在 ScreenB 类中使用以下代码在屏幕之间切换：

```
btnLabsEnter.addListener(new InputListener(){
                 @Override
                    public boolean touchDown (InputEvent event, float x, float y, int pointer, int button) {
                      getGame().setScreen(new ScreenA(getGame()));
                          return true;
                 }
             }); 
```

然而，上面的代码是用于创建屏幕 A 的新实例，而不是显示以前隐藏的屏幕 A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:04:30.717

没有“正确”的方法可以做到这一点。例如，如果您的屏幕不需要大量资源，那么您可以在*Game*类中预先创建它们，然后在它们之间切换而无需创建新实例。

这就是我为《[非常愤怒的机器人](https://github.com/libgdx/libgdx/tree/master/demos/very-angry-robots/very-angry-robots/src/com/badlydrawngames)》所做的，两年前这款游戏在低端手机上运行得非常好。我不会每次都这样做，但对于资源轻的游戏来说，它运行得非常好。

```
/** Creates all the screens that the game will need, then switches to the main menu. */
@Override
public void create () {
    Assets.load();
    mainMenuScreen = new MainMenuScreen(this);
    playingScreen = new WorldPresenter(this);
    scoresScreen = new ScoresScreen(this);
    setScreen(mainMenuScreen);
} 
```

# android - Android Location.distanceTo(...) 和 Location.bearingTo(...) 没有返回正确的结果

> ID：16105464
> 
> 赞同：4
> 
> 时间：2013-04-19T13:12:17.250
> 
> 标签：android, location, distance, bearing

我已经看过几十篇关于此的帖子，所以请不要将其标记为重复，因为它不是。

所以运行以下代码：

```
private void testLocation(){
    double currentLat = 51.43376;
    double currentLng = -2.86221;

    double destLat = 51.43503; 
    double destLng = -2.86869;

    final float[] results= new float[3];
    Location.distanceBetween(currentLat, currentLng, destLat, destLng, results);
    Log.d("GPS", "results[0]: " + results[0]);
    Log.d("GPS", "results[1]: " + results[1]);
    Log.d("GPS", "results[2]: " + results[2]);

    Location here = new Location("Current");
    here.setLatitude(currentLat);
    here.setLatitude(currentLng);

    Location dest = new Location("Destination2");
    dest.setLatitude(destLat);
    dest.setLongitude(destLng);

    Log.d("GPS", "Bearing to dest: " + here.bearingTo(dest));
    Log.d("GPS", "Distance to dest: " + here.distanceTo(dest));
} 
```

输出是：

```
04-19 13:39:55.850: D/GPS(12398): results[0]: 472.2533
04-19 13:39:55.860: D/GPS(12398): results[1]: -72.5882
04-19 13:39:55.860: D/GPS(12398): results[2]: -72.59327
04-19 13:39:55.860: D/GPS(12398): Bearing to dest: 120.83207
04-19 13:39:55.860: D/GPS(12398): Distance to dest: 7893878.5 
```

正确的值应该是：距离 472.2533（所以 results[0] 是正确的）。方位角 285.454 度

所以我不知道 results[1] 和 results[2] 给出了什么。而且 BearingTo 和 distanceTo 都给出了完全错误的答案。

这意味着我一定做错了什么。任何人都可以帮忙。通常，我要做的就是计算目标点与当前位置点的距离和方向。如果有人有比上面显示的更好的方法，或者知道我做错了什么，请帮忙。

谢谢亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:15:20.763

> 计算出的距离存储在 results 中`[0]`。如果 results 的长度为 2 或更大，则初始方位存储在 results 中`[1]`。如果结果的长度为 3 或更大，则最终方位存储在结果中`[2]`-[文档](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29 "位置文档")

您在这里使用两个不同的值设置纬度两次：

```
here.setLatitude(currentLat);
here.setLatitude(currentLng); 
```

你在这里混合了纬度/经度值：

```
dest.setLongitude(destLat);
dest.setLatitude(destLng); 
```

检查并查看是否可以解决您的问题

计算距离和方位的两种方法应该产生相同的结果，因为相同的方法用于计算这些结果。查看[SDK 的源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/location/Location.java#Location.distanceTo%28android.location.Location%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:57:58.253

你确定你自己的方位计算是正确的吗？`results[2]: -72.59327`相当于 287.40673 度。

# graphics - OpenGL es 2.0 2D 平面旋转

> ID：16105466
> 
> 赞同：0
> 
> 时间：2013-04-19T13:12:23.017
> 
> 标签：graphics, opengl-es, rotation, 2d, projection

我一直在努力让一些带有纹理的四边形在 iPhone 平台上使用 OpenGL es 2.0 正确显示。我从这里的教程开始

[http://nehe.gamedev.net/tutorial/ios_lesson_02__first_triangle/50001/](http://nehe.gamedev.net/tutorial/ios_lesson_02__first_triangle/50001/)

它基本上只是制作一个简单的三角形并使用非常简单的着色器显示到屏幕上。当我在 Z 轴上旋转三角形时会出现问题。

这就是在没有应用任何旋转且在 Z 轴上旋转 90 度时三角形的外观。

![在此处输入图像描述](https://i.stack.imgur.com/RBB44.jpg)

我使用了 NEHE 教程站点的源代码项目，我所做的唯一更改是在顶点着色器中添加了一个世界矩阵

```
//the incoming vertex' position
attribute vec4 position;

//and its color
attribute vec3 color;

//the varying statement tells the shader pipeline that this variable
//has to be passed on to the next stage (so the fragment shader)
varying lowp vec3 colorVarying;

//added this matrix
uniform mat4 world;

//the shader entry point is the main method
void main()
{    
    colorVarying = color; //save the color for the fragment shader
    gl_Position = world * position; //multiplied the matrix with the position
} 
```

刚刚输出的像素着色器放置颜色。

在程序中已经建立并传递了世界矩阵如下

```
GLKMatrix4 _world = GLKMatrix4MakeRotation(1.5708, 0, 0, 1);
glUniformMatrix4fv(m_worldMat, 1, GL_FALSE, _world.m); 
```

这是我可以为这个问题复制问题的最简单方法。我还尝试创建一个从 0 到屏幕宽度和从 0 到屏幕高度的正交相机。

--------------------迭代 2 在 q______b 的建议之后------------------------- ----

所以我编辑了代码以进行正交投影。首先，我将三角形更改为矩形。这是顶点设置

```
 right = 0.75 * m_renderbufferWidth;
    left = 0.25 * m_renderbufferWidth;
    top = 0.55 * m_renderbufferHeight;
    bottom = 0.45 * m_renderbufferHeight;

    widthOver2 = (right - left) * 0.5;
    heightOver2 = (bottom - top) * 0.5;

    //push the vertex data into the buffer
    //4 floats define one vertex (x, y, z and w), first one is lower left
    geometryData.push_back(-widthOver2); geometryData.push_back(heightOver2 ); geometryData.push_back(1.0); geometryData.push_back(1.0);
    //we go counter clockwise, so lower right vertex next
    geometryData.push_back(widthOver2); geometryData.push_back(heightOver2); geometryData.push_back(1.0); geometryData.push_back(1.0);
    //top left vertex is last
    geometryData.push_back(-widthOver2); geometryData.push_back(-heightOver2); geometryData.push_back(1.0); geometryData.push_back(1.0);
    //top right vertex is last
    geometryData.push_back(widthOver2); geometryData.push_back(-heightOver2); geometryData.push_back(1.0); geometryData.push_back(1.0); 
```

这是更改后的绘图代码。我现在让正交相机从 0、0 变为屏幕尺寸，我在原点周围创建了矩形并平移到屏幕中间。

```
GLKMatrix4 temp = GLKMatrix4Identity;
GLKMatrix4 _world = GLKMatrix4Identity;
temp = GLKMatrix4Multiply(GLKMatrix4MakeTranslation(left + widthOver2, top + heightOver2, 0), GLKMatrix4MakeRotation(1.5708, 0, 0, 1));
_world = GLKMatrix4Multiply(GLKMatrix4MakeScale(1, 1, 1), temp);
glUniformMatrix4fv(m_worldMat, 1, GL_FALSE, _world.m);

GLKMatrix4 _projection = GLKMatrix4MakeOrtho(0, m_renderbufferWidth, 0, m_renderbufferHeight , -100, 100);
glUniformMatrix4fv(m_projectionMat, 1, GL_FALSE, _projection.m);

//initiate the drawing process, we want a triangle, start at index 0 and draw 3 vertices
        glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

这是顶点着色器部分。

```
void main()
{    
    colorVarying = color; //save the color for the fragment shader
    gl_Position = projection * world * position; //multiplied the matrix with the position
} 
```

我仍然面临同样的问题。我已经用最新的截图更新了原始帖子的链接，因为我没有足够的代表来发布超过 2 个链接

请帮助并感谢您迄今为止的建议和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:35:21.893

问题是你的左下角的逻辑坐标是{-1,-1}，右上角是{1, 1}，即正方形，但屏幕不是正方形，这就是你有失真的原因，所以你必须调整它通过设置正确的投影矩阵。您可以根据您的情况使用 GLKMatrix4MakeOrtho 计算它。

# c++ - 为什么 Visual Studio 2012 中的 locals 和 autos 窗口为空？

> ID：16105468
> 
> 赞同：1
> 
> 时间：2013-04-19T13:12:28.050
> 
> 标签：c++, visual-studio-2012

我想问我有一个简单的程序，我想在调试模式下看到它，但是当我在调试模式下启动它时，我的本地和汽车在 Visual Studio 2012 中是空的。我有 Windows 8 64 位、Visual Studio 2012、Sempron 2.7。这是代码：

```
#include <iostream>
using namespace std;
class A{
public:
    int a;
    int b;
    virtual void test(){
        cout<<"Test"<<endl;
    };
};
class B:public A{
public:
    virtual void test(){
        cout<<"Test2"<<endl;
    };
};
class C:public A{
public:
    virtual void test(){
        cout<<"Test3"<<endl;
    };
};
int main(){
    B a;
    C b;
    int l;
    a.test();
    b.test();
    return 0;
} 
```

![这是我的截图](https://i.stack.imgur.com/VOOTq.jpg)

如何启用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:13:28.477

看来您正在运行**发布**版本，这意味着编译器可能只是优化了它们。

如果您查看生成的代码，您可能只会看到一些`cout<<`'，而没有创建任何对象。

如果您想要有意义的调试信息，请将您的配置更改为**调试。**

# java - Saml 2.0 请求编码

> ID：16105477
> 
> 赞同：0
> 
> 时间：2013-04-19T13:12:56.937
> 
> 标签：java, authentication, url-encoding, saml-2.0

我正在尝试用 Java 对 Saml 2.0 请求进行编码，但是当我使用在线工具对其进行解码时，我得到了奇怪的字符。

这是输入字符串：

```
<samlp:AuthnRequest 
xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" 
ID="_8d7bd828-6f91-477a-b158-22d693f56972" 
Version="2.0" 
IssueInstant="2013-04-19T14:07:53Z" 
AssertionConsumerServiceURL="http://test">
<saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">
test
</saml:Issuer>
<samlp:NameIDPolicy 
Format="urn:oasis:names:tc:SAML:2.0:nameid-format:unspecified" 
AllowCreate="true" />
</samlp:AuthnRequest> 
```

这是我正在使用的代码：

```
byte[] xmlBytes = baos.toByteArray();

//Deflate
ByteArrayOutputStream byteOutputStream = new ByteArrayOutputStream();
DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(
                                                byteOutputStream);
try {
    deflaterOutputStream.write(xmlBytes, 0, xmlBytes.length);
    deflaterOutputStream.close();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

//BASE64 encode
Base64 base64Encoder = new Base64();
byte[] base64EncodedByteArray = base64Encoder.encode(xmlBytes);
String base64EncodedMessage = new String(base64EncodedByteArray);

// URL encode
String urlEncodedMessage = null;
try {
    urlEncodedMessage = URLEncoder.encode(base64EncodedMessage,"utf-8");
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
}
return urlEncodedMessage; 
```

当我通过在线解码工具运行生成的字符串时，我得到以下结果：

```
x?}?Mk?@??J????ILL@??`?0??^"??B???Gm?}W?`/^?03????,,­????
?=Z}??pT??[iA?-8??q
?I
??N
?h???GYN?\pZ?"?Y:??Pt9mS??<-D?$zCc?V                 
Ah?A??+Zq??8??|?d??$ZZ???J+?4
?/)?u????Kf?d>9??2.cf?-X?<?&??zq?K??A?O???ImZ??`76W???n?~???6
w?m?????
^???$????ie?;??3-I??k??7????Srtion">
test
</saml:Issuer>
<samlp:NameIDPolicy 
Format="urn:oasis:names:tc:SAML:2.0:nameid-format:unspecified" 
AllowCreate="true" />
</samlp:AuthnRequest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:00:35.837

您需要先使用 URL 解码器，然后再使用 Base64 解码器，这是您在做什么？

# javascript - 获取文本框中的当前光标位置

> ID：16105482
> 
> 赞同：39
> 
> 时间：2013-04-19T13:13:16.447
> 
> 标签：javascript, firefox, textbox, text-cursor

我需要一个代码来**在 textbox/textarea 中找到光标的当前位置**。它应该适用于 chrome 和 firefox。以下是我正在使用的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <script>
      function textbox()
      {
        document.getElementById('Javascript_example').value = document.activeElement.id;
        var ctl = document.getElementById('Javascript_example');
        alert(ctl);

        var startPos = ctl.selectionStart;
        alert(startPos);
        var endPos = ctl.selectionEnd;
        alert(endPos);
      }
    </script>
  </head>
  <body>

    <input id="Javascript_example" name="one" type="text" value="Javascript_example" onclick="textbox()">

  </body>
</html> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-19T13:39:36.993

除了您的 ID 属性中的无效空间以及您在检查选择之前替换输入值的事实之外，它看起来还不错。

```
function textbox()
{
        var ctl = document.getElementById('Javascript_example');
        var startPos = ctl.selectionStart;
        var endPos = ctl.selectionEnd;
        alert(startPos + ", " + endPos);
}
```

```
<input id="Javascript_example" name="one" type="text" value="Javascript example" onclick="textbox()">
```

此外，如果您支持 IE <= 8，则需要注意这些浏览器不支持`selectionStart`和`selectionEnd`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T13:24:50.070

这是一种可能的方法。

```
function isMouseInBox(e) {
  var textbox = document.getElementById('textbox');

  // Box position & sizes
  var boxX = textbox.offsetLeft;
  var boxY = textbox.offsetTop;
  var boxWidth = textbox.offsetWidth;
  var boxHeight = textbox.offsetHeight;

  // Mouse position comes from the 'mousemove' event
  var mouseX = e.pageX;
  var mouseY = e.pageY;
  if(mouseX>=boxX && mouseX<=boxX+boxWidth) {
    if(mouseY>=boxY && mouseY<=boxY+boxHeight){
       // Mouse is in the box
       return true;
    }
  }
}

document.addEventListener('mousemove', function(e){
    isMouseInBox(e);
}) 
```

# python - * 不支持的操作数类型：'float' 和 'Decimal'

> ID：16105485
> 
> 赞同：70
> 
> 时间：2013-04-19T13:13:25.863
> 
> 标签：python, django

我只是在学习类函数等，所以我决定创建一个简单的函数，它应该给我税额。

到目前为止，这是我的代码。

```
class VAT_calculator:
    """
     A set of methods for VAT calculations.
    """

    def __init__(self, amount=None):
        self.amount = amount
        self.VAT = decimal.Decimal('0.095')

    def initialize(self):
        self.amount = 0

    def total_with_VAT(self):
        """
        Returns amount with VAT added.
        """
        if not self.amount:
            msg = u"Cannot add VAT if no amount is passed!'"
            raise ValidationError(msg)

        return (self.amount * self.VAT).quantize(self.amount, rounding=decimal.ROUND_UP) 
```

我的问题是我收到以下错误：

> * 不支持的操作数类型：'float' 和 'Decimal'**

我不明白为什么这不起作用！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-19T13:18:10.597

似乎`self.VAT`是`decimal.Decimal`类型，`self.amount`是`float`你不能做的事情。

试试`decimal.Decimal(self.amount) * self.VAT`吧。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-01-28T22:55:20.137

正如错误所说，您的问题是您试图将 a 乘以`Decimal`a`float`

最简单的解决方案是重写任何引用以将其`amount`声明为 Decimal 对象：

`self.amount = decimal.Decimal(float(amount))`

并在`initialize`：

`self.amount = decimal.Decimal('0.0')`

另一种选择是在最后一行声明小数：

`return (decimal.Decimal(float(self.amount)) * self.VAT).quantize(decimal.Decimal(float(self.amount)), rounding=decimal.ROUND_UP)`

...但这似乎更混乱。

# php - 是否可以在 $.ajax 函数中重用通过 JSON 从 PHP 获取的数组？

> ID：16105490
> 
> 赞同：0
> 
> 时间：2013-04-19T13:13:43.083
> 
> 标签：php, jquery, ajax, json

这是交易：这个区域是为动态图表做准备，当我选择第一个选择输入时，我将打开一个新的选择输入。凭借其值（从第一个开始），我正在执行 SQL 查询并获取由第一个选择过滤的国家/地区数据。一切正常，但我确实想重新使用这个来自 PHP 的数组来创建最多 4 个新的选择。由于它保持在 $.ajax 成功内，我不确定我是否可以在外面使用它。

这是我的代码：

```
$(document).ready(function() {
   $('#indicators').change(function() {
      $('#country1').fadeIn('slow');
      var indic_val = $(this).val();
      $.ajax({
        url: 'scripts/chart_handler.php',
        dataType: "json",
        type: 'post',
        data: {'indicator' : indic_val},
        async:false,
        success: (function ( data ){
            $.each(data, function(i, key) {
                $('#country1').append('<option value="'+ key +'">'+ key +'</option>');
            });
        }),
      });
   }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:18:05.073

其实很简单。只需声明一个可在当前 AJAX 调用之外访问的变量，因此该变量在该范围内是持久的（在就绪函数内的匿名函数内）。

```
$(document).ready(function() {
    var jsonData; // this is the variable where we will store the data
    $('#indicators').change(function() {
        $('#country1').fadeIn('slow');
        var indic_val = $(this).val();
        $.ajax({
            url: 'scripts/chart_handler.php',
            dataType: "json",
            type: 'post',
            data: {'indicator' : indic_val},
            async:false,
            success: (function ( data ){
                jsonData = data; //that's all what you need
                $.each(data, function(i, key) {
                    $('#country1').append('<option value="'+ key +'">'+ key +'</option>');
                });
            }),
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:17:11.347

是的，你可以..创建一个函数并将数据作为参数传递

```
success: (function ( data ){
         myFunction(data);
        $.each(data, function(i, key) {
            $('#country1').append('<option value="'+ key +'">'+ key +'</option>');
        });
    }),

function myFunction(data){
  // do your stuff
} 
```

# c# - Microsoft Dynamics CRM SOAP “凭据被阻止。” 使用 Windows Live ID 进行身份验证时

> ID：16105493
> 
> 赞同：0
> 
> 时间：2013-04-19T13:13:46.087
> 
> 标签：c#, soap, dynamics-crm-2011, dynamics-crm, windows-live

嗨，我正在使用 C# 中的 SOAP 在线连接动态以添加自定义实体。正在使用的登录类型是 Windows Live 帐户。

当我尝试连接到服务器 atm 时遇到了一个奇怪的错误，它似乎只是从很少的解释开始。

当我尝试使用 windows live 进行身份验证时，我收到一个 xml 响应 [最后发布]，其中包含一条错误消息“凭据被阻止。”但是，当我尝试使用假用户名连接时，我知道这是无效的，我得到“输入并存储密码不匹配。”

我检查了我的 xml 响应，并且我的设备注册正常。它只是身份验证位。

crm 是否有可能以某种方式阻止了此登录（它仍然适用于登录 crm 本身，只是不适用于此肥皂登录）？

有没有办法将用户名列入白名单？

这是我发送以获取安全令牌的 xml：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope"
                xmlns:a="http://www.w3.org/2005/08/addressing"
                xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
                  <s:Header>
                    <a:Action s:mustUnderstand="1">
                    http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue</a:Action>
                    <a:MessageID>
                    urn:uuid:88dea52e-97a3-4222-82cd-3c4cde5e3e2f</a:MessageID>
                    <a:ReplyTo>
                      <a:Address>
                      http://www.w3.org/2005/08/addressing/anonymous</a:Address>
                    </a:ReplyTo>
                    <VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">
                    uIDPozBEz+P/wJdOhoN2XNauvYcAAAAAK0Y6fOjvMEqbgs9ivCmFPaZlxcAnCJ1GiX+Rpi09nSYACQAA</VsDebuggerCausalityData>
                    <a:To s:mustUnderstand="1">
                    https://login.live.com/extSTS.srf</a:To>
                    <o:Security s:mustUnderstand="1"
                    xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                      <u:Timestamp u:Id="_0">
                        <u:Created>2013-04-19T12:41:25.256Z</u:Created>
                        <u:Expires>2013-04-19T12:46:25.256Z</u:Expires>
                      </u:Timestamp>
                      <o:UsernameToken u:Id="user">
                        <o:Username>==USERNAME REMOVED FOR POST==</o:Username>
                        <o:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">
                        ==PASSWORD REMOVED FOR POST==</o:Password>
                      </o:UsernameToken>
                      <wsse:BinarySecurityToken ValueType="urn:liveid:device"
                      xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                        <EncryptedData Id="BinaryDAToken0"
                        Type="http://www.w3.org/2001/04/xmlenc#Element"
                        xmlns="http://www.w3.org/2001/04/xmlenc#">
                          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc">
                          </EncryptionMethod>
                          <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                            <ds:KeyName>http://Passport.NET/STS</ds:KeyName>
                          </ds:KeyInfo>
                          <CipherData>
                            <CipherValue>
                                ==LONG CYPHER VALUE REMOVED FOR POST==
                            </CipherValue>
                          </CipherData>
                        </EncryptedData>
                      </wsse:BinarySecurityToken>
                    </o:Security>
                  </s:Header>
                  <s:Body>
                    <t:RequestSecurityToken xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">
                      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
                        <a:EndpointReference>
                          <a:Address>urn:crmemea:dynamics.com</a:Address>
                        </a:EndpointReference>
                      </wsp:AppliesTo>
                      <wsp:PolicyReference URI="MBI_FED_SSL"
                      xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" />
                      <t:RequestType>
                      http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
                    </t:RequestSecurityToken>
                  </s:Body>
                </s:Envelope> 
```

这是我得到的回应：

```
<?xml version="1.0" encoding="utf-8" ?>
<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wst="http://schemas.xmlsoap.org/ws/2005/02/trust" xmlns:psf="http://schemas.microsoft.com/Passport/SoapServices/SOAPFault">
<S:Body>
<S:Fault>
<S:Code>
<S:Value>
S:Sender</S:Value>
<S:Subcode>
<S:Value>
wst:FailedAuthentication</S:Value>
</S:Subcode>
</S:Code>
<S:Reason>
<S:Text xml:lang="en-US">
Authentication Failure</S:Text>
</S:Reason>
<S:Detail>
<psf:error>
<psf:value>
0x80048823</psf:value>
<psf:internalerror>
<psf:code>
0x80041010</psf:code>
<psf:text>
The credential is blocked.&#x000D;&#x000A;</psf:text>
</psf:internalerror>
</psf:error>
</S:Detail>
</S:Fault>
</S:Body>
</S:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:13:29.810

当我摆脱 c# 代码中的换行符时，我的问题自行解决了： 我猜 xml 可能会在那里放入一个换行符。

我还删除了标签：“uIDPozBEz+P/wJdOhoN2XNauvYcAAAAAK0Y6fOjvMEqbgs9ivCmFPaZlxcAnCJ1GiX+Rpi09nSYACQAA”，因为它不需要，（可能会破坏它，但我怀疑它）

# pdf - 在进行签名验证时，我应该验证 PAdES 签名中的嵌入时间戳吗？

> ID：16105496
> 
> 赞同：0
> 
> 时间：2013-04-19T13:13:54.893
> 
> 标签：pdf, timestamp, digital-signature, bouncycastle

我试图了解是否以及如何验证带有嵌入时间戳的 PAdES 签名。这个嵌入的时间戳是从时间戳权威 (TSA) 获得的。

如果签名中包含 crl 文件或 ocsp 响应，我们一般应该首先从签名中验证证书链在这个时间戳对应的日期没有过期也没有被撤销。

由于来自 TSA 的时间戳也已签名，我试图弄清楚是否还应该验证此时间戳​​的证书链以及如何验证它？

使用 Bouncy Castle API，很容易通过以下代码验证时间戳

`TimeStampToken.validate((SignerInformationVerifier paramSignerInformationVerifier))`

但是，此方法不会验证证书链是否未过期或未撤销。此外，由于嵌入的时间戳不包含任何 crl 文件或 ocsp 响应，因此无法在时间戳嵌入签名的日期验证证书链。

那么，如果我们不能在嵌入时间戳对应的日期完全验证 TSA 的证书链，我们怎么可能验证 PAdES 签名呢？

# bash - 处理 bash 脚本中的双引号

> ID：16105499
> 
> 赞同：0
> 
> 时间：2013-04-19T13:14:02.673
> 
> 标签：bash, shell, lcov

我正在尝试编写一个 bash 脚本，该脚本将动态构建我需要执行的命令。（合并 lcov 文件）

到目前为止，我能够构建命令行，结果如下：

```
#!/bin/bash
LCOV_INPUT_FILES=""
while read FILENAME; do
    LCOV_INPUT_FILES="$LCOV_INPUT_FILES -a \"$FILENAME\""
done < <( find ../reports/coverage -name lcov.info )

echo lcov "${LCOV_INPUT_FILES}" -o ../reports/coverage.lcov
lcov "${LCOV_INPUT_FILES}" -o ../reports/coverage.lcov 
```

如果我在我的 shell 中运行该行`echo`输出，它可以工作，但我无法从我的脚本运行这个命令，而且我缺乏 bash 的伟大之处来调试它。

这是我从回声中得到的那种输出：

```
lcov  -a "../reports/coverage/Chrome 26.0 (Linux)/lcov.info" -a "../reports/coverage/Firefox 20.0 (Linux)/lcov.info" -a "../reports/coverage/PhantomJS 1.8 (Linux)/lcov.info" -o ../reports/coverage.lcov 
```

你知道这里有什么问题吗？

问候，

泽维尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:22:56.437

如果使用双引号`"${LCOV_INPUT_FILES}"`，bash 会将整个字符串视为一个单词。如果没有双引号，bash 会将变量的值拆分为空格。

对于您构造字符串的方式，唯一的选择是使用`eval`：

```
eval lcov "$LCOV_INPUT_FILES" -o ... 
```

还有其他选择。您可以使用数组来存储参数

```
LCOV_INPUT_FILES+=(-a "$FILENAME") 
```

然后用双引号扩展数组：

```
lcov "${LCOV_INPUT_FILES[@]}" -o ... 
```

# php - 为什么 ID 在我的 HABTM 关联中重复出现？

> ID：16105501
> 
> 赞同：0
> 
> 时间：2013-04-19T13:14:11.840
> 
> 标签：php, cakephp, cakephp-2.0

我正在使用最新版本的 cake php 2.3.2。我有三张桌子：

1.  域
2.  关键词
3.  域关键字

领域模型具有这种关联：

```
public $hasAndBelongsToMany = array(
    'Keyword' =>
        array(
            'className'              => 'Keyword',
            'joinTable'              => 'domains_keywords',
            'foreignKey'             => 'domain_id',
            'associationForeignKey'  => 'keyword_id',
            'unique'                 => 'keepExisting'
        )
); 
```

关键字模型：

```
public $hasAndBelongsToMany = array(
    'Domain' =>
        array(
            'className'              => 'Domain',
            'joinTable'              => 'domains_keywords',
            'foreignKey'             => 'keyword_id',
            'associationForeignKey'  => 'domain_id',
            'unique'                 => 'keepExisting'
        )
); 
```

如您所见，我使用**了 KeepExisting**

现在，我以这种方式在此表中添加 reconds：

```
$this->Domain->DomainsKeyword->save(
                array(
                    'domain_id'  => $domain_id,
                    'keyword_id' => $key_id
                )
            ) 
```

保存很好，但如果我一次又一次地这样做，记录会在我的数据库中重复。为什么？我使用了keepexisting...我不想多次使用同一记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:19:39.533

keepexisting 不应该通过保持现有关联来工作吗？我认为你必须使用

```
 'unique' => 'true' 
```

得到你想要的。

# vim - 如何将 Vim 的本地领导者设置为反斜杠？

> ID：16105504
> 
> 赞同：4
> 
> 时间：2013-04-19T13:14:23.647
> 
> 标签：vim

这适用于将本地领导者设置为减号键：

> :let mapleader = "-"

我不知道如何将其设置为反斜杠。我尝试了以下但无济于事：

> :let mapleader = "\"
> 
> :let mapleader = "\"
> 
> :让地图领袖 = \

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T13:22:20.867

转义反斜杠或使用单引号：

```
:let mapleader = "\\"
:let mapleader = '\' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T13:25:26.667

简单的方法是不设置它。当此变量为空（或设置为空字符串）时，它将默认为反斜杠。请务必查看帮助 ( [`:h mapleader`](http://vimdoc.sourceforge.net/htmldoc/map.html#mapleader))。

它不起作用，因为反斜杠作为双引号字符串中的转义字符，需要用另一个反斜杠 ( `"\\"`) 进行转义。

在您的问题标题中，您提到了一位当地领导人。如果您真的想在本地设置领导者（即，为当前缓冲区），您可能希望使用`maplocalleader` 。但是你需要`<LocalLeader>` 在你的地图中而不是`<Leader>`.

最后一点：在定义地图时使用领导者，以后更改它不会重新定义地图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T13:18:22.083

从在线帮助：

> 要定义使用“mapleader”变量的映射，可以使用特殊字符串“ `<Leader>`”。它被替换为“mapleader”的字符串值。如果“mapleader”未设置或为空，则使用反斜杠。

所以只需设置`mapleader`为空，默认情况下您将使用反斜杠：

```
:let mapleader = "" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T13:26:23.897

Vimscript 字符串的引用规则记录在`:help expr-string`.

我建议首选单引号`'strings'`，除非您需要包含特殊字符，例如`\n`; 这样，您将不得不减少逃避（和错误！）。

# c# - 可视化可编辑瓷砖地图的最佳方式？C# 和 Visual Studio 2012

> ID：16105505
> 
> 赞同：0
> 
> 时间：2013-04-19T13:14:26.630
> 
> 标签：c#, visual-studio-2012, 2d, paint, panels

**关于它：**我们正在使用 C# 在 Visual Studio 中构建一个关卡编辑器，导入早已消失的编辑地图。这些瓦片地图具有多个层并由多个瓦片组成。它们都显示在彼此之上。最后应该有一个选择框来选择一个图块。

**我们当前的方法：**在表格中为瓦片地图的每一层创建“面板”对象。当用相应的面板加载每一层时，我们将所有面板堆叠在一起，将每一层“父化”到下一层。选择框面板最后也有一个父级。（为什么？当不这样做时，顶层会将其背景设置为表单。这是灰色的。第二层将不可见）。所以它看起来像... SelectionBoxPanel -> Panel_3 -> Panel_2 -> Panel_1 -> BackgroundPanel。

**问题：**当调用 selectionBoxPanel 的绘制事件时（在场景上移动时），每个父面板都会被重绘。很明显它需要大量的 CPU 并且图层上的每个图块都会被刷新！

**问题：**是否有不同的文件（如着色器文件）或对象（如面板）或任何我们可以用于这些层的图形表示的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:13:12.637

我们解决了问题，

1.  我们将所有面板更改为图片框。（我们失去了滚动功能，但目前正在努力）。

2.  从育儿改为“Controls.Add(Child)”方法，因为图片框不包括育儿选项。

3.  对所有图片框应用双缓冲。

完毕。

# python - IndexError：列表索引超出范围

> ID：16105507
> 
> 赞同：2
> 
> 时间：2013-04-19T13:14:29.920
> 
> 标签：python, lxml, python-requests

我目前正在处理一段似乎适用于多个网站的代码，但是当再次运行下面的网站时，我得到了错误。IndexError：列表索引超出范围。起初我虽然我的 xpath 无效，但在进一步研究 xpath 后我知道它是正确的。我唯一的另一个是我可能需要提供一个浏览器用户代理等来模拟访问该网站的浏览器。

这是失败的代码部分

```
def safeweb(host):
    print "[*] Launching Norton Safeweb plugin against " + host
    url = 'http://safeweb.norton.com/report/show?url=' + host
    r = requests.get(url)
    html = r.text 
    #print html
    parser = etree.HTMLParser()
    tree = etree.parse(StringIO.StringIO(html), parser)
    #reporting starts here
    summary = tree.xpath("//*[@id='siteSummary']/table/tbody/tr[1]/td[2]/div/div[1]/div[2]/div")
    #print len(summary)
    print "[*] Summary: " + summary[0].text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:21:22.603

你真的应该使用`r.content`，*而不是* `r.text`在这里工作时`StringIO`。

`r.text`给你unicode，`r.content`给你原始字节。接下来，不需要使用`StringIO.StringIO`，`etree.fromstring(html)`就可以了。更好的是，将*原始*响应传递给`.parse()`：

```
tree = etree.parse(r.raw, parser) 
```

并让解析器直接读取响应。

如果您仍然遇到`IndexError`异常，那么您的 XPath 表达式与页面中的任何内容都不匹配。您必须改为保存 HTML 并手动分析它以查看该页面的不同之处。

# jsp - 会话注销中的问题

> ID：16105508
> 
> 赞同：0
> 
> 时间：2013-04-19T13:14:33.637
> 
> 标签：jsp, session, servlets, session-variables, sessiontracking

我读过我们可以在 servlet 中使用 logout() 方法。所以，我正在做这样的事情

```
HttpSession sr=request.getSession();
sr.logout(); 
```

但这给了我一个错误，它找不到符号 logout(); 请帮助。我希望用户注销并转到主页（home.jsp）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:27:08.813

`HttpServletRequest`有一个[注销](http://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/http/HttpServletRequest.html#logout%28%29)方法，但它假定您正在使用 servlet 方式来做安全性。它会清除安全上下文，但不会清除您的会话。

如果您只想清除会话，请执行

```
HttpSession sr = request.getSession();
sr.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:15:29.783

HttpSession 中不存在注销方法

```
//This code will redirect to  homepage.jsp
 RequestDispatcher rd = request.getRequestDispatcher("homepage.jsp");
  rd.forward(request, response); 
```

您可以使用`session.invalidate();`使会话无效

# php - 使用 php 的 eval() 将字符串作为变量执行

> ID：16105509
> 
> 赞同：-3
> 
> 时间：2013-04-19T13:14:35.087
> 
> 标签：php, string, variables

在以下字符串的情况下使用 php 的 eval() 函数的正确方法是什么，或者 eval() 上的正确替代方法是什么我尝试构建一个动态 CSV 解析器，它将 CSV 列分配给 mysql 表列，在 fgetcsv环形。文档说不应该使用，但我没有找到任何其他选择。

```
public function importCSV($params, $csv_file, $table) {

    if (!ini_get('safe_mode')) {
        @set_time_limit(0);
    }

    $into .='';
    $value .= '';
    foreach ($params as $param) {
        $values = explode('|', $param[value]);
        if ($param['name'] == 'Category') {
            $value .= 'get_' . $values[1] . '($data[' . $values[0] . ']),';
        } else {
            $value .= '$data[' . $values[0] . '],';
        }

        $into .= $values[1] . ',';
    }
    $value = substr($value, 0, -1);
    $into = substr($into, 0, -1);

    if (($file = fopen(JPATH_COMPONENT_ADMINISTRATOR . '/files/' . $file, "r")) !== FALSE) {
        $row = 0;

        $rows = count(file(JPATH_COMPONENT_ADMINISTRATOR . '/files/tieraerzte.csv'));
        while (($data = fgetcsv($file, 1000, ",")) !== FALSE) {
            //var_dump($data[0].''.$data[1]);
            $number_columns = count($data);
            $row = $row++;
            //here data should be inserted to mysql
            //var_dump(eval('return $'.$value .','));
            eval("$value");
        }
    }

    fclose($file);
}

'$data[0],get_plz($data[1]),get_ort($data[2]),$data[3],$data[4],$data[5],$data[6],$data[7],get_bundesland($data[8])' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:17:55.227

```
$code = '$data[0],get_plz()...';

// the following line will evaluate the code and create a new indexed array
eval('$result = array(' . $code . ');');

// use the results...
echo $result[0];
echo $result[1]; //etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:18:02.120

抱歉，没有正确的方法来使用 eval() - 根本不要使用它。

但是您可以使用[call_user_func()](http://php.net/manual/function.call-user-func.php)来执行您发布的字符串中定义的函数。要评估给定变量的内容，您可以使用[变量变量](http://php.net/manual/en/language.variables.variable.php)

尽管如此，你所指出的一切都会导致你的整体结构有一些非常错误的假设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:17:50.767

```
$elementsarr = explode(",",$string);
for ($i=0;$i<count($elementsarr);$i++) {
    eval($elementsarr[$i]);
} 
```

尽管您可能想要添加一些验证，但这应该可以工作。

如上所述，虽然 eval() 很糟糕。

# autocomplete - 同时在多个字段上自动完成

> ID：16105510
> 
> 赞同：0
> 
> 时间：2013-04-19T13:14:36.420
> 
> 标签：autocomplete, primefaces

我有一个名为`myPerson`. 它包含很多属性，还有两个名字属性： `firstname`，`lastname`

我想使用自动完成`myPerson`从数据库中选择对象。用户应该能够输入名字或姓氏，并且它应该以输入数据作为他们的名字或姓氏来提出建议。然后当用户按下提交时，将从数据库中完全检索所选的 myPerson （由于性能问题，它一开始没有完全加载）

所以我有

```
<p:autoComplete minQueryLength="3" value="#{myBean.autoCompleteValue}" effect="fade" completeMethod=#{myBean.autoComplete}" forceSelection="true"/> 
```

然后在 myBean 中：我在初始化时加载字符串列表中的名字和姓氏（我没有加载所有`myPerson`对象以解决性能问题。然后我的自动完成方法看起来像这样

```
public List<String> autoComplete(String prefix) {
        ArrayList<String> result = new ArrayList<String>();
        if ((prefix == null) || (prefix.length() == 0)) {
            // safety nets
            // do nothing
        } else {
            Iterator<String> iterator = names.iterator();
            while (iterator.hasNext()) {
                String elem = ((String) iterator.next());
                if (elem.toLowerCase().indexOf(prefix.toLowerCase()) == 0) {
                    result.add(elem);
                }
            }
        }
        return result;
    } 
```

这工作正常。当用户键入名字或姓氏的开头时，它会在自动完成组件的下拉菜单中得到建议。

我的问题在于之后发生的事情。如何加载`myPerson`从数据库中选择的内容。自动完成值将存储在`#{myBean.autoCompleteValue}` 但是我不再知道用户输入的是名字还是姓氏。我无法有效地在数据库中搜索，我将不得不按名字进行搜索，如果我不幸运，按姓氏搜索。

你知道如何更好地实现这一点吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:27:18.673

构造另一个类，例如`MyPersonTransfer`只包含名字、姓氏和数据库ID。然后使用这个类（而不是`String`）作为您的`autoComplete()`方法和其他任何地方（例如`value="#{myBean.autoCompleteValue}"`）的返回类型。这样，您还可以保存数据库`id`，然后您可以在选择它后使用它来加载完整的人。

# tsql - Invoke-Sqlcmd 有时会报 TSQL 错误有时不会？

> ID：16105525
> 
> 赞同：1
> 
> 时间：2013-04-19T13:15:22.667
> 
> 标签：tsql, powershell, error-handling, cmdlets, catch-block

我很困惑：

以下代码会产生错误：

```
try {
    invoke-sqlcmd -ServerInstance 'localhost' -Database 'tempdb' -Query 'CREATE TABLE foo (bar TINYINT IDENTITY(1,1) DEFAULT 1);;' -Verbose -ErrorLevel 0 -AbortOnError -ErrorAction Stop -OutputSqlErrors $true -ErrorVariable $err -OutVariable $err -SeverityLevel 0;
    "OK";
}
catch {
    "ERROR"
    $_
} 
```

结果：

> 错误 Invoke-Sqlcmd：无法在具有 IDENTITY 属性的列上创建默认值。表'foo'，列'bar'。

* * *

这件作品显然运行顺利：

```
try {
    invoke-sqlcmd -ServerInstance 'localhost' -Database 'tempdb' -Query 'SELECT CAST(111111111111 AS TinyINT) AS Error' -Verbose -ErrorLevel 0 -AbortOnError -ErrorAction Stop -OutputSqlErrors $true -ErrorVariable $err -OutVariable $err -SeverityLevel 0;
    "OK"
}
catch {
    "ERROR"
    $_
} 
```

结果：

```
OK 
```

* * *

**在这两种情况下都必须使用 catch-block！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T00:53:32.967

这是invoke-sqlcmd 的一个已知错误。我在[Connect](https://connect.microsoft.com/SQLServer/feedback/details/779320/invoke-sqlcmd-does-not-return-t-sql-errors)上登录，该项目被标记为已修复，但连接术语中的“已修复”并不一定意味着该修复已发布或计划在当前版本中发布。这只是意味着它已在内部修复，他们将在某一天发布它。

截至 2013 年 4 月 19 日，该修复程序尚未发布。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-19T14:18:37.233

我怀疑这与 Invoke-SqlCmd 发起的连接的配置有关；特别是，在 SQL Server 中将[ANSI_WARNINGS](http://msdn.microsoft.com/en-us/library/ms190368.aspx)设置为 OFF 允许您的 TSQL 块被评估为 NULL。

```
SET ANSI_WARNINGS OFF
SELECT CAST(111111111111 AS TinyINT) AS Error 
```

返回 NULL。

# javascript - 在 IE 9 javascript 中模拟点击

> ID：16105528
> 
> 赞同：2
> 
> 时间：2013-04-19T13:15:29.763
> 
> 标签：javascript, internet-explorer, event-handling, click

我在这里找到了这个代码片段，可以完美运行，但不适用于 IE。

```
var testTwo = document.getElementById('testOne')

function eventFire(el, etype){
  if (el.fireEvent) {
    (el.fireEvent('on' + etype));
  } else {
    var evObj = document.createEvent('Events');
    evObj.initEvent(etype, true, false);
    el.dispatchEvent(evObj);
  }
}

function testInt(){
eventFire(testTwo, "click");
};
setInterval(testInt, 3000); 
```

谁能告诉我如何让它在 IE 中工作？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:21:18.773

尝试

```
function eventFire(el, etype) {
    var event;
    if (document.createEvent) {
        event = document.createEvent("HTMLEvents");
        event.initEvent(etype, true, true);
    } else {
        event = document.createEventObject();
        event.eventType = etype;
    }

    event.eventName = etype;

    if (el.dispatchEvent) {
        el.dispatchEvent(event);
    } else {
        el.fireEvent("on" + etype, event);
    }
}} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/fc5Yk/2/)

取自[这个问题的逻辑](https://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:22:14.153

你应该可以`fireEvent`用来触发事件。 [这是关于它的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ie/ms536423%28v=vs.85%29.aspx)。

# javascript - 如果找不到字符串匹配，则执行代码

> ID：16105531
> 
> 赞同：1
> 
> 时间：2013-04-19T13:15:44.660
> 
> 标签：javascript, jquery, logic

所以这是我遇到的一个逻辑问题：

```
$('#id_country').change(function () { // ON CHANGE OF DROP DOWN
    var countryShortCode = $(this).val();
    $('#country-phone-code option').each(function () { //STRING MATCH AGAINST OTHER DROP DOWN
        if ($(this).text() == countryShortCode) { //THE PROBLEM I NEED AN 'ELSE' IF NO STRING MATCH FOUND
            alert("match found"); // (only one match will ever be found, if any)
        }
    });
}); 
```

如果没有字符串匹配，我需要执行一些代码。这是我目前无法做到的。

IE

```
$('#country-phone-code option').each(function () {
    if ($(this).text() == countryShortCode) {
        alert("");
    } else {
        //(if after traversing of each #country-phone-code option, no match was found, do something
    } 
```

为措辞不当的问题道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:20:29.270

```
$('#id_country').change(function(){ 
    var countryShortCode = $(this).val();
      var flag = false;
    $('#country-phone-code option').each(function(){ 

       if ($(this).text() == countryShortCode) { 
          flag = true;
          alert("match found"); 
       }

   });
     if(!flag) {

            alert("no match found");
        }

}); 
```

我认为你想要这个非常简单但很棘手。使用它并享受它。

# c++ - 编译器错误：“>”标记之前的预期主表达式

> ID：16105535
> 
> 赞同：2
> 
> 时间：2013-04-19T13:16:04.457
> 
> 标签：c++, qt, compiler-errors

```
#include <string>
...
template <typename DefinitionsIterator>
void parse(const CIET_NS ::VariadicArguments& argumentList, DefinitionsIterator firstDef, DefinitionsIterator lastDef, Map& res)
{
    for (int i = 0; i < argumentList.size(); ++i) {
        CIET_NS ::Object obj = argumentList.at(i);
        std::string objStr = obj.convert<std::string>();
        qDebug() << objStr.c_str();

        //qDebug() << argumentList.at(i).convert<std::string>().c_str();

    } 
```

此代码可以编译，但注释的行没有。我收到此错误

```
 error: expected primary-expression before '>' token 
```

这怎么可能发生？

```
template <typename ChildClass, typename ListElementType, typename DuplicateType>
class BasicObject
{
public:
    BasicObject();
    ~BasicObject();

public:
    Tcl_Obj* tclObject() const;
    Tcl_Obj* releaseObject();
    template <typename T>
    T convert(Interpreter& interp) const;
    template <typename T>
    T convert() const; 
```

`Object`来源于`BasicObject`

```
Compiler version:
g++ -v
Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.6/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-java-awt=gtk --host=x86_64-redhat-linux
Thread model: posix
gcc version 3.4.6 20060404 (Red Hat 3.4.6-9) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T13:40:22.730

当`convert`是一个模板，你必须指出（类似于使用`typename`来表示一个名称是一个类型）。

```
qDebug() << argumentList.at(i).template convert<std::string>().c_str();
                               ^^^^^^^^ 
```

否则编译器认为这`<`是一种比较，并且在看到`>`可以比较的东西之前会感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:10:54.980

你的编译器是古老的——根据你提供的数据，它是 GCC 3.4.6，它与 RHEL4 一起提供，几年前被供应商 EOL（是的，现在它处于“延长生命周期”直到 2015 年，这意味着你真的，真的不应该在上面部署新的应用程序）。

应该与任何受支持的 Qt 版本一起使用的最旧的 GCC 版本是 GCC 4.2（在特殊情况下）和 GCC 4.4（对于 Qt 4.7）。你的编译器有一个错误。为什么需要部署在这样一个无法编译有效 C++ 代码的古老平台上？

# scala - 如何“询问”一个 ActorSelection

> ID：16105536
> 
> 赞同：14
> 
> 时间：2013-04-19T13:16:07.027
> 
> 标签：scala, akka

我如何“询问”应该由其路径提供的演员？

```
ask(context.actorSelection("../foo"), GetInfoMessage) 
```

......导致 an`ActorSelection`但只有`ActorRef`s 可以“询问”。或者，`context.actorFor`返回一个`ActorRef`，但根据[文档](http://doc.akka.io/docs/akka/snapshot/general/addressing.html#What_is_the_Difference_Between_Actor_Reference_and_Path_)不推荐使用此函数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-10T15:21:21.230

从 Akka 2.2.1 开始，您可以使用从选择`ActorSelection.resolveOne`中获取`ActorRef`：

[http://doc.akka.io/api/akka/2.2.1/index.html#akka.actor.ActorSelection](http://doc.akka.io/api/akka/2.2.1/index.html#akka.actor.ActorSelection)

然后你可以像往常一样询问 ActorRef

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T13:40:17.583

稍后在该页面上，您将看到

> 要获取绑定到特定参与者生命周期的 ActorRef，您需要向参与者发送消息，例如内置的识别消息，并使用参与者回复的发送者引用。

所以这是一个三步过程。使用`actorSelection`，然后发送`Identify`，然后`ask`。

不过，这仅适用于 Akka 2.2，因此在 Akka 2.1 或更早版本中，您仍然需要使用`actorFor`.

基本原理在[2.2 迁移指南](http://doc.akka.io/docs/akka/snapshot/project/migration-guide-2.1.x-2.2.x.html#Use_actorSelection_instead_of_actorFor)中进行了解释。

# c++ - Boost.Python 自定义转换器

> ID：16105539
> 
> 赞同：4
> 
> 时间：2013-04-19T13:16:11.500
> 
> 标签：c++, python, boost, binding, boost-python

我有一个类以向量作为参数（二进制文件内容）。

我想将 python 'str' 类型转换为 unsigned char 的向量，但仅限于我的一个类方法。

```
BOOST_PYTHON_MODULE(hello) {  class_<Hello>("Hello").
     // This method takes a string as parameter and print it
     .def("printChar", &Hello::printChar)
     // This method takes a vector<unsigned char> parameter
     .def("storeFile", &Hello::storeFile) } 
```

使用自定义转换器似乎是我需要的，但如果我修改我的 boost::python::converter::registry ，它将修改我对 printChar 的所有调用，并且所有将字符串作为参数传递的 python 方法都将转换为向量。

如何注册每个方法转换器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T16:35:44.283

这个问题有两种方法：

*   导出一个辅助函数，因为`Hello.storeFile`它接受`boost::python::str`、`std::vector<unsigned char>`从字符串构造并委托给 C++`Hello::storeFile`成员函数。
*   编写自定义转换器。虽然转换器不能在每个函数的基础上注册，但它们的范围相当好，不会执行任何意外的转换。这种方法通常提供更多的可重用性。

* * *

### 辅助函数

使用辅助函数不会影响任何其他导出的函数。因此，python 字符串和之间的转换`std::vector<unsigned char>`只会发生在`Hello.storeFile`.

```
void Hello_storeFile(Hello& self, boost::python::str str)
{
  std::cout << "Hello_storeFile" << std::endl;
  // Obtain a handle to the string.
  const char* begin = PyString_AsString(str.ptr());
  // Delegate to Hello::storeFile().
  self.storeFile(std::vector<unsigned char>(begin, begin + len(str)));
}

...

BOOST_PYTHON_MODULE(hello)
{
  namespace python = boost::python;

  python::class_<Hello>("Hello")
    // This method takes a string as parameter and print it
    .def("printChar", &Hello::printChar)
    // This method takes a vector<unsigned char> parameter
    .def("storeFile", &Hello_storeFile)
    ;
} 
```

* * *

### 自定义转换器

转换器注册包含三个部分：

*   检查 a`PyObject`是否可转换的函数。返回`NULL`表示`PyObject`不能使用已注册的转换器。
*   一个构造函数，它从`PyObject`. `converter(PyObject)`只有在不返回时才会调用此函数`NULL`。
*   将被构造的 C++ 类型。

因此，对于给定的 C++ 类型，如果`converter(PyObject)`返回非`NULL`值，`construct(PyObject)`则将创建 C++ 类型。C++ 类型用作注册表的键，因此 Boost.Python 不应执行意外转换。

在这个问题的上下文中，我们想要一个转换器，用于返回非if的`std::vector<unsigned char>`地方，并将用于创建和填充。仅当导出的 C++ 函数具有（或 const 引用）参数并且从 python 提供的参数是字符串时，才会发生这种转换。因此，此自定义转换器不会影响具有参数的导出函数。`converter(PyObject)``NULL``PyObject``PyString``converter(PyObject)``PyObject``std::vector<unsigned char>``std::vector<unsigned char>``std::string`

这是一个完整的例子。我选择使转换器通用，以允许从 python 字符串构造多种类型。借助它的链接支持，它应该与其他 Boost.Python 类型具有相同的感觉。

```
#include <iostream>
#include <list>
#include <string>
#include <vector>

#include <boost/foreach.hpp>
#include <boost/python.hpp>

class Hello
{
public:
  void printChar(const std::string& str)
  {
    std::cout << "printChar: " << str << std::endl;
  }

  void storeFile(const std::vector<unsigned char>& data)
  {
    std::cout << "storeFile: " << data.size() << ": ";
    BOOST_FOREACH(const unsigned char& c, data)
      std::cout << c;
    std::cout << std::endl;
  }
};

/// @brief Type that allows for conversions of python strings to
//         vectors.
struct pystring_converter
{

  /// @note Registers converter from a python interable type to the
  ///       provided type.
  template <typename Container>
  pystring_converter&
  from_python()
  {
    boost::python::converter::registry::push_back(
      &pystring_converter::convertible,
      &pystring_converter::construct<Container>,
      boost::python::type_id<Container>());
    return *this;
  }

  /// @brief Check if PyObject is a string.
  static void* convertible(PyObject* object)
  {
    return PyString_Check(object) ? object : NULL;
  }

  /// @brief Convert PyString to Container.
  ///
  /// Container Concept requirements:
  ///
  ///   * Container::value_type is CopyConstructable from char.
  ///   * Container can be constructed and populated with two iterators.
  ///     I.e. Container(begin, end)
  template <typename Container>
  static void construct(
    PyObject* object,
    boost::python::converter::rvalue_from_python_stage1_data* data)
  {
    namespace python = boost::python;
    // Object is a borrowed reference, so create a handle indicting it is
    // borrowed for proper reference counting.
    python::handle<> handle(python::borrowed(object));

    // Obtain a handle to the memory block that the converter has allocated
    // for the C++ type.
    typedef python::converter::rvalue_from_python_storage<Container>
                                                                 storage_type;
    void* storage = reinterpret_cast<storage_type*>(data)->storage.bytes;

    // Allocate the C++ type into the converter's memory block, and assign
    // its handle to the converter's convertible variable.  The C++
    // container is populated by passing the begin and end iterators of
    // the python object to the container's constructor.
    const char* begin = PyString_AsString(object);
    data->convertible = new (storage) Container(
      begin,                          // begin
      begin + PyString_Size(object)); // end
  }
};

BOOST_PYTHON_MODULE(hello)
{
  namespace python = boost::python;

  // Register PyString conversions.
  pystring_converter()
    .from_python<std::vector<unsigned char> >()
    .from_python<std::list<char> >()
    ;

  python::class_<Hello>("Hello")
    // This method takes a string as parameter and print it
    .def("printChar", &Hello::printChar)
    // This method takes a vector<unsigned char> parameter
    .def("storeFile", &Hello::storeFile)
    ;
} 
```

以及示例用法：

```
>>> from hello import Hello
>>> h = Hello()
>>> h.printChar('abc')
printChar: abc
>>> h.storeFile('def')
storeFile: 3: def
>>> h.storeFile([c for c in 'def'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
Boost.Python.ArgumentError: Python argument types in
    Hello.storeFile(Hello, list)
did not match C++ signature:
    storeFile(Hello {lvalue}, std::vector<unsigned char, 
                                          std::allocator<unsigned char> >) 
```

有关自定义转换器和 C++ 容器的更多信息，请考虑阅读[此](https://stackoverflow.com/a/15940413/1053968)答案。

# arrays - Symfony2 表单“集合”+ 学说列“数组”= 空 form_widget

> ID：16105540
> 
> 赞同：1
> 
> 时间：2013-04-19T13:16:15.173
> 
> 标签：arrays, symfony, doctrine-orm, entity, symfony-forms

我对 Symfony2 的表单类型“集合”与学说的列“数组”有一个简单的问题。**

我的实体：

```
/**
 * @Column(type="array", nullable=true)
 * @var array
 */
private $specifications; 
```

我的“主要”表格：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('specifications', 'collection', array (
            'type' => new ProductSpecificationType(),
            'allow_add' => true,
            'allow_delete' => true,
            'by_reference' => false
        )
    );
} 
```

我的“ProductSpecificationsType”表格：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('group', 'text')
        ->add('info', 'text')
    ;
} 
```

我的输出带有按钮（树枝）：

```
{{ form_row(form.specifications) }}
<a data-prototype="{{ form_widget(form.specifications.vars.prototype) | e }}" href="#" onclick="return false;">Add</a> 
```

真正的输出是这个（html）：

```
<a data-prototype="" href="#" onclick="return false;">Add</a> 
```

如果我只使用 form_widget 而不是最后的“e”，就像“escape”一样。

保存后，实体与数组 column = null 一起保存。

因此，如果我将每个 FireBug 的这些行手动添加到 html 表单中

```
<input type="text" name="product[specifications][0][group]" value="Exam">
<input type="text" name="product[specifications][0][info]" value="ple">
<input type="text" name="product[specifications][1][group]" value="Extra">
<input type="text" name="product[specifications][1][info]" value="Example"> 
```

然后按“保存”，实体以这种格式保存：

```
a:2:{i:0;a:2:{s:5:"group";s:4:"Exam";s:4:"info";s:3:"ple";}i:1;a:2:{s:5:"group";s:5:"Extra";s:4:"info";s:7:"Example";}} 
```

我的问题：

1.  为什么我的原型是空的？

2.  为什么 form_widget 是空的？（如果我手动填写上面的数据也是空的！）

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T22:12:52.130

您是否尝试将 'prototype' => true 添加到“主”表单构建器？就像是：

```
$builder->add('specifications', 'collection', array (
        'type' => new ProductSpecificationType(),
        'allow_add' => true,
        'allow_delete' => true,
        'by_reference' => false,
        'prototype' => true
    )
); 
```

# entity-framework - 获取脚本以创建包含初始化程序数据的数据库

> ID：16105546
> 
> 赞同：5
> 
> 时间：2013-04-19T13:16:37.673
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

我想知道实体框架的迁移是否有可能获取 sql 脚本来创建我的数据库的内容，包括来自配置类中我的种子方法的所有数据：

```
protected override void Seed(Sotasa.DAL.SqlContext context)
{
    //Data I'd like to be included to the script
} 
```

Update-Database 命令的帮助看起来无法完成：

```
Update-Database [-SourceMigration <String>] [-TargetMigration <String>] [-Script] [-Force] [-ProjectName <String>] [-StartUpProjectName 
<String>] [-ConfigurationTypeName <String>] -ConnectionString <String> -ConnectionProviderName <String> [<CommonParameters>] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:17:44.353

这是我所做的，可能不是那么漂亮，但它适用于我们（注意这是我们本地的开发和 CI 环境）：

```
public class Configuration : DbMigrationsConfiguration<MyContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
        SetSqlGenerator(OracleConnectionInfo.InvariantName, new OracleEntityMigrationSqlGenerator());
    }

    protected override void Seed(MyContext context)
    {
        Logger.Write("In Seed method. User: " + userName);
        MyInitializer.AddUpdateDataSql(context);
    }
}

public class MyInitializer : MigrateDatabaseToLatestVersion<MyContext, Configuration>
{
    private const string Schemaname = "MYSCHEMA";

    public static void AddUpdateDataSql(Pronova2Context context)
    {
        DeleteTableData(context);
        DropCreateSequences(context);
        PopulateTypeTypeData(context);
        // etc.
    }

    private static void DeleteTableData(DbContext context)
    {
        context.Database.ExecuteSqlCommand(@"delete " + Schemaname + ".T_TABLE1"); }
        context.Database.ExecuteSqlCommand(@"delete " + Schemaname + ". T_TABLE2"); }
        // etc.
    }

    private static void DropCreateSequences(DbContext context)
    {
        context.Database.ExecuteSqlCommand(@"DROP SEQUENCE  " + Schemaname + ".T_TABLE1_SEQ"); }
        context.Database.ExecuteSqlCommand(@"DROP SEQUENCE  " + Schemaname + ".T_TABLE2_SEQ"); }
        // etc.
    }

    private static void PopulateTypeTypeData(DbContext context)
    {
        try { context.Database.ExecuteSqlCommand(@"Insert into " + Schemaname + ".T_TYPE_TYPE (TYPE_TYPE_ID,NAME,DESCRIPTION) values (1,'TypeType1','Name 1')");
        try { context.Database.ExecuteSqlCommand(@"Insert into " + Schemaname + ".T_TYPE_TYPE (TYPE_TYPE_ID,NAME,DESCRIPTION) values (2,'TypeType1','Name 2')");
        // etc.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:58:06.320

这是不可能的。（在 Seed 方法中生成数据以生成 SQL 语句）。

另一种解决方法是使用脚本来构建 -> 创建数据库 -> 使用数据编写数据库脚本？（Powershell 可能可以利用 sql server 管理对象来做到这一点。）

# python - 将一些列附加到列表矩阵列表

> ID：16105547
> 
> 赞同：2
> 
> 时间：2013-04-19T13:16:39.783
> 
> 标签：python, list, append

我在将两个列表合并为一个时遇到了一些麻烦。我认为有一个简单的解决方案，但我被困了几个小时。

我的两个列表列表例如：

```
a=[['1','2'],['3','4']]
b=[['5','6'],['7','8']] 
```

我试图得到的是：

```
c=[['1','2','5','6'],['3','4','7','8']] 
```

但我不知道列表有多少行和列。

我尝试使用该`zip`命令，但它产生了如下内容：

```
[(['1','2'],['5','6']),(['3','4'],['7','8'])] 
```

非常感谢您在这个问题上的任何帮助！！！

也许像[如何向数组添加额外的行和列？](https://stackoverflow.com/questions/2002415/how-can-i-add-an-additional-row-and-column-to-an-array)会工作，但我想有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:53:57.793

```
>>> a=[['1','2'],['3','4']]
>>> b=[['5','6'],['7','8']]
>>> [x + y for x, y in zip(a, b)]
[['1', '2', '5', '6'], ['3', '4', '7', '8']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:26:51.373

```
[sum(ai_bi, []) for ai_bi in zip(a, b)] 
```

扩展到 n 个列表列表：

```
L = (a, b, ...)
[sum(el, []) for el in zip(*L)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-09T22:25:28.807

如果两个列表的长度相同，您可以使用一个简单的循环：

```
listone = [['1','2'],['3','4']]
listtwo = [['5','6'],['7','8']]
newlist = []

for i in range(0, len(data)):
    newlist.append(listone[i] + listtwo[i])

print(newlist)
[['1','2','5','6'],['3','4','7','8']] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T13:30:02.223

如果您的列表具有相同的长度：

```
c = []
for idx in range(len(a)):
    c.append(a[idx]+b[idx]) 
```

虽然不是很优雅。

# c++ - 犰狳中的 4 维矩阵

> ID：16105548
> 
> 赞同：5
> 
> 时间：2013-04-19T13:16:42.343
> 
> 标签：c++, matrix, armadillo

我最近开始使用犰狳，虽然我很喜欢它，但如果它有存储 4D 矩阵的方法会很有用。有什么我遗漏的东西，或者解决方法吗？

最后一个维度只有三个大小，所以理论上我可以有类似的东西：

```
std::vector<arma::cube> 4Dmatrix(3);
for (int index=0; index<3; index++)
  4Dmatrix[index] = cube(size1, size2, size3); 
```

但是，感觉必须有更好的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T06:22:28.140

您可能会使用[`field`](http://arma.sourceforge.net/docs.html#field)将任意对象存储为向量、矩阵或立方体结构中的元素的类。例如（来自文档）创建`field`包含`vec`向量：

```
// create a field containing vectors
field<vec> F(3,2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T17:54:57.820

不，没有内置方法。如果您查看源代码，您会看到向量、矩阵和立方体有单独的实现。

也许[Boost 多阵列](http://www.boost.org/doc/libs/1_55_0/libs/multi_array/doc/index.html)可能对您有用。

# c - 在多个线程中共享一个结构

> ID：16105553
> 
> 赞同：0
> 
> 时间：2013-04-19T13:17:03.157
> 
> 标签：c, multithreading, irc

我正在 CI 中编写一个小型 IRC 程序，使用线程来处理多个客户端，并且我使用链表来存储每个客户端的 fd。因此，如果客户端发送消息，它将被写入其他客户端的 fd .

我不确定这是最好的方法，你能给我一些建议吗？？？

另外，通过这种方式，我需要在整个线程中共享结构（包含每个客户端的文件描述），所以如果线程中有更新，它将为其他人更新结构。我想知道如何我能做到这一点，我怎么能分享那个结构？

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:26:07.493

在不了解您的设计的更多信息的情况下，很难评论您的 FD 链接列表是否合适。

在线程之间共享数据结构方面，您无需做任何事情。线程共享内存空间，因此在一个线程中可见的任何内容都将在另一个线程中可见。您唯一的风险是您有多个线程一次修改结构，您可以通过使用互斥锁（互斥信号量）来防止这种情况。

由于您使用的是 Linux，我假设您使用的是 POSIX 线程 ( [pthreads](https://computing.llnl.gov/tutorials/pthreads/) )，在这种情况下，您需要查看[pthread_mutex_](https://computing.llnl.gov/tutorials/pthreads/#Mutexes)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:30:51.003

在您的设置中，我会使用：

*   每个通道一个输入队列，
*   每个客户端一个输出队列。

每当客户端线程接收到消息时，它都会将其发布到通道线程。当频道收到新帖子时，它会将其重新发布给所有客户。每个通道和客户端都可以表示为`struct`，然后可以由线程处理（每个线程具有一个或多个客户端或通道）。

所有队列都是简单的链表，使用`pthread_mutex_t`. 当一个函数需要访问它们时，它会锁定队列、添加消息并解锁。

*   [pthread_mutex_create](http://linux.die.net/man/3/pthread_mutex_create)
*   [pthread_mutex_lock](http://linux.die.net/man/3/pthread_mutex_lock)
*   [pthread_mutex_unlock](http://linux.die.net/man/3/pthread_mutex_unlock)

# java - ConcurrentHashMap 读写锁

> ID：16105554
> 
> 赞同：28
> 
> 时间：2013-04-19T13:17:08.840
> 
> 标签：java, multithreading, thread-safety, concurrenthashmap

我正在尝试找到这些问题的答案，但无法在 Google 或 Java 文档中找到。

*情况 1：*在 中`ConcurrentHashMap`，假设线程*t1*正在从段*n*读取，同时另一个线程*t2*想要在*同一段 n*上写入：

**问题一：**这两个操作是一个接一个，还是同时执行？

*情况 2：*在 中`ConcurrentHashMap`，假设线程*t1*正在段*n*上写入，同时另一个线程*t2*想要从*同一段 n*中读取，

**问题二：**这两个操作是一个接一个，还是同时执行？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-19T14:31:49.267

我认为 javadoc 回答了你的两个问题：

> 检索操作（包括 get）一般不会阻塞，因此可能与更新操作（包括 put 和 remove）重叠。检索反映了最近完成的更新操作在其开始时保持的结果。对于 putAll 和 clear 等聚合操作，并发检索可能仅反映插入或删除某些条目。

段用于更新操作：

> 更新操作之间允许的并发性由可选的 concurrencyLevel 构造函数参数（默认为 16）指导，该参数用作内部大小调整的提示。

因此，简而言之，读取不会被阻塞（它被实现为读取 volatile 变量）。如果在同一段中写入，则写入可能会相互阻塞。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-26T11:25:38.750

根据 ConcurrentHashMap Oracle 文档，

ConcurrentHashMap 的构造函数如下所示：

**公共 ConcurrentHashMap (int initialCapacity, float loadFactor, int concurrencyLevel)**

因此，上面的行创建了一个具有指定初始容量、负载因子和并发级别的新的空映射。其中，要从 ConcurrentHashMap 构造函数中考虑的重要参数：

*   **initialCapacity** - 初始容量。该实现执行内部大小调整以适应这么多元素。
*   **concurrencyLevel** - 估计的并发更新线程数。该实现执行内部大小调整以尝试容纳这么多线程。

在 ConcurrentHashMap Api 中，您将找到以下常量。

*   静态最终 int DEFAULT_INITIAL_CAPACITY = 16;
*   静态最终 int DEFAULT_CONCURRENCY_LEVEL = 16;

ConcurrentHashMap构造函数（或Object）的初始容量参数和并发级别参数默认设置为16。

因此，默认情况下，ConcurrentHashMap 维护了一个包含 16 个锁的列表（锁的数量等于初始容量，默认为 16），而不是 map 范围的锁，每个锁用于锁定 Map 的单个存储桶。这表示16个线程（线程数等于并发级别，默认为16个）可以同时修改集合，假设每个线程工作在不同的桶上。因此，与哈希表不同，我们执行任何类型的操作（更新、删除、读取、创建）而不锁定 ConcurrentHashMap 中的整个映射。

**检索操作（包括 get）一般不会阻塞。在这种情况下，它使用了 volatile 的概念。**，因此可能与更新操作（包括 put 和 remove）重叠。检索反映了最近完成的更新操作在其开始时保持的结果。

更新操作之间允许的并发性由可选的 concurrencyLevel 构造函数参数（默认为 16）指导，该参数用作内部大小调整的提示。该表在内部进行了分区，以尝试允许指定数量的并发更新而不会发生争用。因为哈希表中的放置本质上是随机的，所以实际的并发性会有所不同。理想情况下，您应该选择一个值来容纳尽可能多的线程同时修改表。使用显着高于您需要的值会浪费空间和时间，而显着降低的值会导致线程争用。

我希望它有帮助！

# excel - 在具有多种条件的excel工作表中格式化单元格

> ID：16105555
> 
> 赞同：1
> 
> 时间：2013-04-19T13:17:10.067
> 
> 标签：excel, excel-formula, conditional-formatting

我想要做的是格式 1 单元格让我们说 A1（如果 3 个条件为真，则更改它的背景颜色）我的意思是`&&`应该是这个条件。

我取得了成功，但只有一个条件。

例子：

我的列的 1 具有从 1 到 7 的数字，如果这个数字不同于 3、6 和 7，则更改单元格的背景颜色。

`=$A$1<>"3" && $A$1<>"6" && $A$1<>"7"`不工作所以有可能吗？

当我添加 3 个不同的条件时，它与`or (||)`.

那么有没有办法做到这一点？

希望我的问题足够清楚:)

先谢谢了：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:23:45.843

如果我没记错的话，没有“&&”或“||” 在 Excel 公式中。您可能可以改用“OR”和“AND”关键字。使用“条件格式”菜单，您必须在下拉菜单中选择“公式是”而不是“值是”。然后，您可以使用任何复杂的 Excel 公式（OR、AND、TRUE、...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:49:01.810

## 回答

```
=IF(AND(A1<>3,A1<>6,A1<>7),TRUE,FALSE) 
```

## 奖金 1 - 灵活的条件

为了使逻辑易于更改，请考虑将它们作为“3、6、7”放在单独的单元格 D1 中，然后将条件格式公式更改为：

```
=IF(ISERROR(FIND(A1,$D$1)),TRUE,FALSE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Q7oHY.jpg)

这也有助于 Excel 限制在同一公式中可以在 and() 或 () not() 中进行多少逻辑评估。我以前打过，但记不清具体多少了。也许其他人可以切碎一些光。

## Bonus 2 - 使用或不使用绝对参考？

您可以使用绝对引用 $A$1 检查多个单元格与 A1 的值：

![在此处输入图像描述](https://i.stack.imgur.com/T75Hv.jpg)

但是如果要检查多个单元格的值，请选择以 A1 为起点的多个单元格，然后不要使用绝对引用：

![在此处输入图像描述](https://i.stack.imgur.com/jKqGm.jpg)

同样，要检查另一列与 A 列中各自对应的行，请使用 $A1：

![在此处输入图像描述](https://i.stack.imgur.com/i0JVw.jpg)

请注意，Excel 特别关注“适用于”区域的起点。如果您使用条件格式公式对 A1 进行评估，则必须将 A1 作为“适用于”区域的开头：

![在此处输入图像描述](https://i.stack.imgur.com/qpbMH.jpg)

# python-2.7 - Python >> matplotlib：获取当前绘图的行数？

> ID：16105559
> 
> 赞同：3
> 
> 时间：2013-04-19T13:17:17.700
> 
> 标签：python-2.7, matplotlib

有没有办法获取 matplotlib 图上当前的行数？我发现自己使用计数器和乘法器在颜色图中设置颜色以逐步检查颜色值——这似乎相当不符合 Python 风格。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T13:36:53.957

an 中的所有`Line2D`对象`axes`都存储在一个列表中

```
ax.lines 
```

如果你只使用简单的线图，上面列表的长度就足够了。

如果使用`plt.errorbar`情况会稍微复杂一些，因为它会创建多个`Line2D`对象（中心线、垂直和水平误差线及其上限）。

* * *

如果您想自动化颜色以分配给线条，您可以创建一个像这样的循环

```
import itertools as it
colors = it.cycle(list of colors) 
```

然后调用下一个颜色`colors.next()`并在它到达最后一个后从第一个重新开始

# ios - 格式化和操作数据库数据以在表格视图中显示

> ID：16105561
> 
> 赞同：1
> 
> 时间：2013-04-19T13:17:28.947
> 
> 标签：ios, objective-c, xcode, json, uitableview

我正在开发一个应用程序，以在表格视图的 iOS 应用程序中显示存储在数据库中的用户信息。目前我正在使用从服务器记录所有信息到控制台（在调试区域）

```
NSLog(@"user information is as follows:  %@", JSON); 
```

它提供如下输出：

```
{ email = “andrew.smith19381223@gmail.com”;
    “first_name” = Andrew;
    “Last_name” = Smith 
    id = 12
    user_info=    (
                {
            "Room" = "Lab 2";
            DayNumber = 1;
       lesson = 2;
            id = 12;
            Instructor = "MR BEERRY";
            Group_No = 7;
        },
                {
            "class_room" = "S GEO";
            DayNumber = 1;
            lesson = 2;
            id = 12;
            teacher = "Mr RING";
            Group_No  = 7;
        }, 
```

...

我想在表格视图列中使用此信息并作为表格视图的参数（例如日期）。我应该如何在我的 iOS 应用程序中存储/格式化此信息，以便它可以用于表格视图。我有谷歌搜索了一段时间没有运气:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:50:45.063

使用 JSON 解析器（例如`NSJSONSerialization`）来解析 JSON 文本并创建*表示*。通用表示是 Foundation 对象的层次结构。在您的情况下，根元素是一个*JSON 对象*，它映射到`NSDictionary`表示中的 a 。该字典包含键`@"email"`, `@"first_name"`, `@"Last_name"`, `@"id"`,等。您可以使用您应该熟悉`@"user_info"`的方法访问键的相应值。`-objectForKey:`

key 对应的对象`@"user_info"`是 a `NSArray`，其元素是 kind 的对象`NSDictionary`。

等力。

由于 JSON 是一种动态数据结构，因此您需要在应用程序中了解 JSON 实际上应该是什么以及您在收到它时所期望的内容。也就是说，您可能期望某种结构和键以及某些值。为了让您的生活更轻松，您可以使用该表示来*初始化*您的“自定义模型” - 它具有您需要的属性和行为。

一旦你有了你的模型，像往常一样在`UITable`视图中显示它。

# three.js - 如何使用三个 js 将多个多边形创建为单个几何体

> ID：16105565
> 
> 赞同：0
> 
> 时间：2013-04-19T13:17:44.847
> 
> 标签：three.js

我有一些国家多边形。我想用三个 js 将它们绘制在我的球体顶部，但是当我尝试绘制这些多边形时，fps 下降，以 3fps....

有人告诉我创建一个几何图形并将所有多边形包含在其中，你有一个例子吗？

我在做什么：

```
foreach countrie in countries 
  geometry = new THREE.shapeGeometry();
  geometry.push(vectorArray);
  var mesh = new Mesh(geometry);
  globe.Add(mesh); 
```

三个 js 在超过 250 个国家/地区创建了超过 38k 的缓冲区。奇怪的行为，没有任何控制，我们不应该能够创建这样的缓冲区......所以我错在哪里？我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:11:28.170

对于此类情况， [three.js 类`THREE.GeometryUtils`](https://github.com/mrdoob/three.js/blob/master/src/extras/GeometryUtils.js)有许多有用的方法......

特别是，有一种`merge`方法可以将两个 Geometry 对象合并为一个。假设您有三个几何对象，`country1, country2, country3`。然后你可以做类似的事情：

```
temp = THREE.GeometryUtils.merge( country1, country2 );

allCountries = THREE.GeometryUtils.merge( temp, country3 ); 
```

希望这可以帮助！

# c# - Ajax 幻灯片放映扩展器不起作用

> ID：16105570
> 
> 赞同：2
> 
> 时间：2013-04-19T13:17:49.853
> 
> 标签：c#, asp.net, web, ajaxcontroltoolkit

我按照这个链接的教程[Ajax Slide show extender](http://www.aspdotnet-suresh.com/2011/03/ajax-slideshowextender-control-sample.html)

我的代码如下

```
<div>
    <table style="border:Solid 3px #D55500; width:400px; height:400px" cellpadding="0"  
           cellspacing="0">
        <tr style="background-color:#D55500">
            <td style=" height:10%; color:White; font-weight:bold; font-size:larger"  
                align="center">
                <asp:Label ID="lblTitle" runat="server"></asp:Label>
            </td>
        </tr>
        <tr>
            <td>
                <asp:Image ID="imgslides" runat="server" Height="400px" Width="400px" />
            </td>
        </tr>
        <tr>
            <td align="center">
                <asp:Label ID="lblimgdesc" runat="server"></asp:Label>
            </td>
        </tr>
        <tr>
            <td align="center">
                <asp:Button ID="btnPrevious" runat="server" Text="Prev" CssClass="button" />
                <asp:Button ID="btnPlay" runat="server" Text="Play" CssClass="button" />
                <asp:Button ID="btnNext" runat="server" Text="Next" CssClass="button" />
            </td>
        </tr>
    </table>
  <ajax:SlideShowExtender runat="server" AutoPlay="true" ImageTitleLabelID="lblTitle"  
   ImageDescriptionLabelID="lblimgdesc" Loop="true"
   NextButtonID="btnNext" PreviousButtonID="btnPrevious" PlayButtonID="btnPlay"   
   PlayButtonText="Play" StopButtonText="Stop"
   TargetControlID="imgslides" SlideShowServicePath="Slideshow.asmx"   
   SlideShowServiceMethod="GetSlides"></ajax:SlideShowExtender> 
```

在我的网络服务中我有一个文件

```
[WebMethod]     
    public AjaxControlToolkit.Slide[] GetSlides()
    {
        string[] ImageNames = System.IO.Directory.GetFiles(Server.MapPath(@"C:\Users\Mayer\Documents\Visual Studio 2010\Projects\Project1\Project1\Images\"));
        AjaxControlToolkit.Slide[] photos = new AjaxControlToolkit.Slide[ImageNames.Length];
        for (int i = 0; i < ImageNames.Length; i++)
        {
            string[] file = ImageNames[i].Split('\\');
            photos[i] = new AjaxControlToolkit.Slide("Images/" + file[file.Length - 1], file[file.Length - 1], "");
        }
        return photos;
    } 
```

我有图像文件夹，但看不到幻灯片

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:24:25.817

您应该将相对地址传递给`Server.MapPath`

它应该类似于：`~\Project1\Project1\Images\`而不是物理路径：
`C:\Users\Mayer\Documents\Visual Studio 2010\Projects\Project1\Project1\Images\`

> MapPath 方法将指定的相对或虚拟路径映射到服务器上相应的物理目录。

来自文档： http: [//msdn.microsoft.com/en-us/library/ms524632 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524632(v=vs.90).aspx)

# git - Git - 自定义合并驱动程序以忽略文件

> ID：16105577
> 
> 赞同：1
> 
> 时间：2013-04-19T13:17:56.147
> 
> 标签：git

我希望 Git 在合并期间忽略某些配置文件。我尝试通过将合并策略更改为“我们的”来更新 git 属性，如下所示。但这仅在存在合并冲突时才有效。 [http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Merge-Strategies](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Merge-Strategies)

我什至不希望在这些文件上发生自动合并。所以我想编写一个自定义合并驱动程序。自定义合并驱动程序是否可以停止对这些文件的自动合并？我找不到关于如何编写自定义合并驱动程序的好资源。驱动程序收到什么参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:58:02.583

我不会直接回答这个问题，而是尝试回答您遇到的问题，而不是回答您尝试实施的解决方案。

这通常表明您使用 git 的方式存在问题。人们经常遇到这个问题，因为他们正在使用 git 来部署他们的代码，并且想要针对不同的部署目标使用不同的配置文件。

通常最好稍微改变一下您的工作方式，以防止出现此类问题。[以下](https://gist.github.com/canton7/1423106)是针对此类问题的不同经过验证的解决方案的列表。

它归结为针对不同的部署目标使用不同的文件。例如，不要跟踪实际的配置文件，而是跟踪配置模板。这样，您可以更改实际的配置文件，而 git 不需要跟踪这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:37:46.583

如果我正确理解您的问题，您希望 git 忽略某些跟踪文件中的更改。

如果是这样尝试：

```
git update-index --assume-unchanged <file> 
```

如果您想再次开始跟踪更改，请运行以下命令：

```
git update-index --no-assume-unchanged <file> 
```

您还可以从中删除文件`git`并忽略它们（通过`.gitignore`），因为这听起来像是您滥用`git`以跟踪这些配置文件。

# jquery - jQuery 旋钮应用内部颜色

> ID：16105578
> 
> 赞同：2
> 
> 时间：2013-04-19T13:17:56.290
> 
> 标签：jquery, css

我想知道是否有人知道如何更改[jQuery Knob](http://anthonyterrien.com/knob/) Inner Circle 背景颜色？

```
<script>
    $(function($) {
        $(".knob").knob({
            //'readOnly':true,
            'fgColor':"#238eb1",
            'bgColor':'#1b1b1b'
        });
    });
</script>

<div class="nob">
            <input class="knob" data-bgColor="#fff" data-width="200" data-max="1499" data-displayPrevious=true value="1250">
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-05T23:10:42.420

我最终直接编辑了 jquery.knob.js 文件（从第 764 行开始）：

```
if (this.o.bgColor !== "none") {

            c.beginPath();
            c.strokeStyle = this.o.bgColor;
            c.arc(this.xy, this.xy, this.radius, this.endAngle - 0.00001, 
            this.startAngle + 0.00001, true);

            c.fillStyle="#fff";         // Added code to make the inner circle white
            c.fill();                   // Added code to make the inner circle white

            c.stroke();
        } 
```

您只需要确保“填充”发生在“中风”之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:27:38.487

您可以执行以下操作：

```
.parentElement {
    background: #ccc;
    border-radius: 50%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:18:46.597

检查以下代码：

```
$(".knob").knob({
    'fgColor': 'red',
    'bgColor': '#ccc000',
}); 
```

或检查以下小提琴：http: [//jsfiddle.net/itskawsar/6BYhF/2/](http://jsfiddle.net/itskawsar/6BYhF/2/)

我认为这会有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-24T22:51:34.753

给你...感谢GoDataFeed！

```
$(".knob").trigger("configure", { fgColor: color }).css("color",color); 
```

# vb.net - 一种快速读取文本文件行的更快方法

> ID：16105586
> 
> 赞同：1
> 
> 时间：2013-04-19T13:18:17.353
> 
> 标签：vb.net, text, task-parallel-library, streamreader

我的应用程序正在从代理服务器日志中查看巨大的文本文件（多达 50 万行）。问题是日志的正常 StreamRead 迭代可能需要过多的时间来处理，所以我正在寻找更快的东西。

在表单上，​​用户选择他们需要解析的文件并输入最多三个站点过滤器进行检查。然后应用程序打开文件并开始从文件中的每一行解析日期戳和网站 URL。平均速度大约是***每秒两行***，所以对于一个有 200,000 行的文件，这个过程大约需要 28 小时来处理一个文件。

我一直在阅读[Task](https://msdn.microsoft.com/en-us/library/system.threading.tasks.task%28v=vs.110%29.aspx)课程，我想这可能是要走的路，但微软没有给出一个很好的例子，那么我该如何完成呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:50:56.883

我认为您可以在读取大文件时使用**File.ReadLines() 。**根据 MSDN ：

> **ReadLines**和 ReadAllLines 方法的区别如下： 使用 ReadLines 时，可以在返回整个集合之前开始枚举字符串集合；使用 ReadAllLines 时，必须等待返回整个字符串数组才能访问该数组。因此，当您处理非常大的文件时，**ReadLines**会更有效率。

有关更多详细信息，请参阅[MSDN File.ReadLines()](http://msdn.microsoft.com/en-us/library/dd383503.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:42:19.477

谢谢，dbasnett ...结果是：00：00：00.6991336 172900

信不信由你，我发现了问题。我在 GroupBox 中有文本框，并使用 GroupBox.Text 属性将统计信息更新回用户，使用 GroupBox.Refresh() 更新 y 的 x 行和找到的匹配项等，因此用户对什么有所了解正在被发现。

通过保留这些信息并放入进度条，扫描速度呈指数级增长。使用 3 个过滤器，我能够在 3:19 分钟内解析 172900 行：

```
Scan complete!
Process complete!
Scanned 172900 lines out of 172900 lines.
Percentage (icc): 0.0052% (900 matches)
Percentage (facebook): 0.0057% (988 matches)
Percentage (illinois): 0.0005% (95 matches)
Total Matches: 1983
Elapsed Time: 00:03:19.1088851 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:16:53.483

与其猜测它为什么慢，不如从测量逐行读取文件所需的时间开始。

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim stpw As New Stopwatch
    Dim path As String = "path to your file here"
    Dim sr As New IO.StreamReader(path)
    Dim linect As Integer = 0
    stpw.Restart()

    Do While Not sr.EndOfStream
        Dim s As String = sr.ReadLine
        linect += 1
    Loop
    stpw.Stop()
    sr.Close()
    Debug.WriteLine(stpw.Elapsed.ToString)
    Debug.WriteLine(linect)
End Sub 
```

我针对我拥有的 20MB 的测试文件运行了这个。它接近 3,000,000 行长（行很短）。运行大约需要 0.3 秒。

运行此程序后，您将知道问题是读取还是处理，或两者兼而有之。

# ant - 想要从文件中删除 [echo]、[script] 之类的关键字

> ID：16105596
> 
> 赞同：2
> 
> 时间：2013-04-19T13:19:09.557
> 
> 标签：ant

我在过滤器链中使用过滤器，在支持过滤器链元素的任务中，即内置的 Concat、Copy、LoadFile、LoadProperties、Move 任务。

因此，例如，使用包含 linecontains 过滤器的过滤器链复制或移动文件。

在您的 linecontains 过滤器上使用 negate 参数来排除包含该字符串的行。

示例：考虑以下代码

```
<project default="test">
    <target name="test">
        <copy tofile="file.txt.edit" file="file.txt">
            <filterchain>
                <linecontains negate="true">
                    <contains value="[echo]"/>
                </linecontains>
            </filterchain>
        </copy>
    </target>
</project> 
```

* * *

```
outputs:

$ cat file.txt
[echo] Your project1 location is: D:/Project/Project1
[echo] Your project2 location is: D:/Project/Project2
[script] my script running
[echo] Your project3 location is: D:/Project/Project3
[echo] Your project4 location is: D:/Project/Project4

$ cat file.txt.edit
[script] my script running

Expected:
$ cat file.txt.edit
Your project1 location is: D:/Project/Project1
Your project2 location is: D:/Project/Project2
[script] my script running
Your project3 location is: D:/Project/Project3
Your project4 location is: D:/Project/Project4 
```

在这里，如果我使用过滤器链，那么完整的行将被删除。我只想要像 [echo]、[script]...等这样的词。应该被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:56:53.473

将您的`linecontains`元素替换为[`replaceregex`](https://ant.apache.org/manual/Types/filterchain.html#replaceregex)：

```
<tokenfilter>
    <replaceregex pattern="\[echo\]" replace="" />
</tokenfilter> 
```

对于多个令牌替换，修改`pattern="\[(echo|script)\]"`

# f# - 如何让 f# 脚本调用模块 func？

> ID：16105601
> 
> 赞同：1
> 
> 时间：2013-04-19T13:19:26.540
> 
> 标签：f#

只是试图构建一个 F# 库。到目前为止，它“看起来”是：

*   我只能从 .fs 源文件中引用 C# 库，

*   和 .fs 源文件不可用于 .fsx 脚本文件。

这些陈述是否正确？我读的例子说只使用一个打开，但这只能从 .fs 文件中使用。

有没有版本

```
#r "System.Drawing.dll" 
```

对于在同一个项目中通过 f# interactive (fsi) 使用的脚本文件？

另外，我发现顶级模块和低级模块之间的语法差异有点奇怪。顶我，顶层没有平等是很奇怪的。

```
module Utilities

    module et = 
```

为什么不保持一致并且对所有内容都使用“module moduleName =”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:28:16.020

请务必注意，F# 中 Visual Studio 中的“引用”仅适用于当前项目。如果您在脚本文件中工作，它不会看到项目引用的库。

要在脚本文件（例如`Script.fsx`）中引用库，您可以编写（可以使用绝对路径和相对路径）：

```
#r @"C:\<path_to_library>\library.dll" 
```

如果您想`Library.fs`从脚本文件加载不是脚本的文件（例如 ），您可以使用：

```
#load "Library.fs" 
```

`fs`文件本身不能包含类似 的指令，`#r`因此如果文件正在使用一些需要引用的库，则需要`#r`在主脚本文件中有一个指令（在加载源文件之前引用该库）。

至于模块不一致，主要是在使用`module Foo`or`namespace Foo`顶层的时候，不需要缩进文件的其余部分：

```
module Foo

let bar = 10
module Sub = 
  let bar = 12 
```

# android - 尝试从 android 应用中检索 versionCode 时出错

> ID：16105603
> 
> 赞同：0
> 
> 时间：2013-04-19T13:19:27.790
> 
> 标签：android

有谁知道出了什么问题？尝试从清单中检索版本代码时，我反复收到此错误：

```
04-19 15:09:34.778: W/ResourceType(29293): No package identifier when getting value for           resource number 0x00000001
04-19 15:09:36.833: W/System.err(29293): android.content.res.Resources$NotFoundException: String resource ID #0x1
04-19 15:09:36.843: W/System.err(29293):    at android.content.res.Resources.getText(Resources.java:242)
04-19 15:09:36.848: W/System.err(29293):    at android.widget.Toast.makeText(Toast.java:304)
04-19 15:09:36.853: W/System.err(29293):    at com.koeriers.standaard.actUpdate.onCreate(actUpdate.java:71)
04-19 15:09:36.863: W/System.err(29293):    at android.app.Activity.performCreate(Activity.java:5206)
04-19 15:09:36.863: W/System.err(29293):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-19 15:09:36.868: W/System.err(29293):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074)
04-19 15:09:36.873: W/System.err(29293):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
04-19 15:09:36.878: W/System.err(29293):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
04-19 15:09:36.883: W/System.err(29293):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
04-19 15:09:36.888: W/System.err(29293):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 15:09:36.893: W/System.err(29293):    at android.os.Looper.loop(Looper.java:137)
04-19 15:09:36.898: W/System.err(29293):    at android.app.ActivityThread.main(ActivityThread.java:4921)
04-19 15:09:36.898: W/System.err(29293):    at java.lang.reflect.Method.invokeNative(Native Method)
04-19 15:09:36.903: W/System.err(29293):    at java.lang.reflect.Method.invoke(Method.java:511)
04-19 15:09:36.908: W/System.err(29293):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
04-19 15:09:36.913: W/System.err(29293):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
04-19 15:09:36.918: W/System.err(29293):    at dalvik.system.NativeStart.main(Native Method)
04-19 15:09:37.043: D/dalvikvm(29293): GC_CONCURRENT freed 211K, 14% free 9864K/11399K, paused 13ms+13ms, total 77ms
04-19 15:09:37.093: W/ResourceType(29293): Failure getting entry for 0x010802c0 (t=7 e=704) in package 0 (error -75) 
```

这是我用来从清单文件中检索 versionCode 的代码：

```
int currentVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionCode; 
```

当然还有我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.myapp.default"
android:versionCode="1"
android:versionName="1.0" > 
```

我希望你们能帮助我。

我的 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    TLogFile.appendLog("i", "UPDATER", "Updaten");

    // setting some display
    setContentView(R.layout.frmupdate);
    TextView tv = new TextView(this);
    tv.setText("Loading...");

    // making sure the download directory exists
    checkAndCreateDirectory("/downloads");

    try {
        int currentVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionCode;
        Toast.makeText(this, currentVersion, Toast.LENGTH_LONG).show();
    } catch (NameNotFoundException n) {
        n.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // executing the asynctask
    new DownloadFileAsync().execute(fileURL);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:27:16.643

正如 logcat 所述，您`NotFoundException`在尝试调用`Toast.makeText()`. 虽然我在问题描述中看不到任何连接的代码`Toast`，但我会尝试猜测。中有两个重载`makeText()`方法`Toast`：

```
makeText(Context context, int resId, int duration) 
```

和

```
makeText(Context context, CharSequence text, int duration) 
```

可能您正在传递您的`versionCode`, 这是一个`int`, 作为第二个参数，并且当您想要调用的第二个版本时`makeText()`，调用的是第一个版本，其中.`versionCode`被视为`resId`. 可能没有具有此 ID 的资源，错误证明了这一点。所以你需要做的是`String.valueOf(versionCode)`作为第二个参数传递，然后`Toast`将显示`versionCode`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:27:06.140

```
PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
version = pInfo.versionName; 
```

检查这个答案：[https ://stackoverflow.com/a/6593822/1168654](https://stackoverflow.com/a/6593822/1168654)

## 编辑：更改此行

```
Toast.makeText(this, ""+currentVersion, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:27:32.953

看来您在任何 Toast 中都使用了这个 vesionCode。例如，如果你想在 textview tv 中显示它

tv.setetext（版本代码）；

所以这是触发 tv.setText(int resID);

但是在您的 R.java 中没有带有 versionCode 的资源 id。

所以要看版本代码先把它转成String。然后展示它。

# jquery - ASP.NET MVC 3.0 + Jquery 文件上传

> ID：16105604
> 
> 赞同：0
> 
> 时间：2013-04-19T13:19:30.660
> 
> 标签：jquery, html, asp.net-mvc

我正在使用 ASP.NET MVC3，我想在我的项目中使用上传器功能。

我点击了这个链接，是的，它确实有效： [文件上传 ASP.NET MVC 3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0)

但我确实想要一种不同的方法。

我需要从 Jquery 调用上传器，在 jQuery 中它将调用一个控制器，该控制器将返回 true 或 false 的结果：

HTML 代码：

```
<div id="dialogUpload" title="Upload file"  style="display:none;">
{
   <input type="file" name="postedFile" class="button"/>
}
</div> 
```

jQuery代码：

```
$("#dialogUpload").dialog({
        maxheight: 400,
        maxwidth: 400,
        resizable: true,
        draggable: false,
        resizable: false,
        modal: true,
        buttons: [{
            text: "Upload",
            click: function () {
                $.ajax({
                    type: "POST",
                    url: "Controller/UploadFile",
                    dataType: "json",
                    success: function (result) {
                            if (result == true) {
                                $("#dialogUpload").dialog("close");
                                ShowAlertMessage("File successfully Uploaded.");
                            }
                            else {
                                $("#dialogUpload").dialog("close");
                                ShowAlertMessage("Failed to upload the file.");
                            }
                    }
                });

            }
        }]

    }); 
```

在我的控制器内部将是这样的：

```
[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase postedFile)
{
    bool uploaded = false;
    if (postedFile != null && postedFile.ContentLength > 0)
    {
       var fileName = Path.GetFileName(postedFile.FileName);
       var path = Path.Combine("MYPATH",fileName);
       postedFile.SaveAs(path);
       uploaded = true;
    }
   return Content(uploaded);
} 
```

我试过了，但它没有返回到我的 Jquery，所以无论成功与否，我都无法打印消息框。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:25:55.653

尝试向 jQuery AJAX 调用的失败事件添加处理程序。这将为您提供有关未调用成功处理程序的原因的更多信息。

特别是，请确保请求发送到正确的 URL .... 是您的控制器`ControllerController`，因为这就是您的 AJAX 调用所期望的。

您可以使用浏览器的开发人员工具查看 AJAX 调用返回的状态和内容（通过在 IE 或 Chrome 中按 F12（不确定 Firefox））。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T05:30:37.693

它应该是 jsonResult 而不是 ActionResult 并且从控制器端你必须返回你的响应的序列化对象。然后你必须检查你的响应的状态是成功还是失败，如果它是成功的，然后根据那个打印你的消息如果是失败则失败消息。

像这样你必须传递 json 对象

```
return Json(mew {message=true}, JsonRequestBehavior.AllowGet); 
```

# xml - 结帐时出错 - AddBodyClass

> ID：16105610
> 
> 赞同：3
> 
> 时间：2013-04-19T13:19:50.313
> 
> 标签：xml, magento, layout, checkout

我在 local.xml 中添加了以下内容，以便在客户登录时添加额外的正文类：

```
<customer_logged_in>
<reference name="root">
  <action method="addBodyClass">
    <classname>logged-in</classname>
  </action>
</reference>
</customer_logged_in> 
```

这可行，但是当我转到 onepage checkout 时，出现以下错误：

```
a:5:{i:0;s:98:"Invalid method Mage_Checkout_Block_Onepage_Progress::addBodyClass(Array
(
[0] => logged-in
)
)";i:1;s:1967:"#0 [internal function]: Varien_Object->__call('addBodyClass', Array)
#1 [internal function]: Mage_Checkout_Block_Onepage_Progress->addBodyClass('logged-in') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:24:46.690

您的布局更新假定所有“根”块都继承自`Mage_Page_Block_Html`具有该`addBodyClass()`方法的类。不幸的是，这种情况并非如此。我认为没有简单的解决方法。

您可以通过创建观察者并挂钩事件来完成您想要做的`core_block_abstract_to_html_before`事情。从那里您可以检查客户是否已登录，检索正在呈现的块，并`addBodyClass()`在检查它是否具有方法（或在 try 块内）后调用它。不过，这可能会非常昂贵，因为每次页面加载都会调用它很多次——每个块调用一次。

作为 hack，您可以覆盖`Mage_Core_Block_Abstract`该类并将`addBodyClass()`方法复制到它。这应该可行，但它被认为是不好的做法，因为它*会*与任何其他尝试覆盖的模块冲突`Mage_Core_Block_Abstract`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-23T23:32:47.533

`Mage_Page_Block_Html`Cameron 本人对根块是继承的假设提出了一个很好的观点。我做了和你一样的假设，我的代码是一样的！我还发现这破坏了一些与结帐相关的逻辑（严格来说，它破坏了不用`Mage_Page_Block_Html`作根块的 AJAX 逻辑）。

但是，作为对卡梅隆自己答案的改进，实际上很容易通过观察者添加身体类而不用观察`core_block_abstract_to_html_before`。唯一的问题是您需要一个模块。因此，您要么需要为此目的制作一个，要么使用现有的有意义的。然后，最好是，我们想钩入一个在每次页面加载时触发一次的事件*always*。

嗯，有这样的事件。benmarks[为另一个问题提供了一个非常好的和简洁的答案](https://stackoverflow.com/a/15617264/733347)，给了我们一些提示。从中可以看出，好的事件可能是`controller_action_layout_generate_blocks_after`.

因此，通过像往常一样观察事件：

```
<controller_action_layout_generate_blocks_after>
    <observers>
        <tghpcore_controller_action_layout_generate_blocks_after>
            <type>singleton</type>
            <class>yourmodule/observer</class>
            <method>addBodyClasses</method>
        </tghpcore_controller_action_layout_generate_blocks_after>
    </observers>
</controller_action_layout_generate_blocks_after> 
```

您可以在观察者类中干净安全地实现相同的目的：

```
public function addBodyClasses($observer)
{
    /** @var $layout Mage_Core_Model_Layout */
    $layout = $observer->getEvent()->getLayout();
    // Retrieve the root block
    $root = $layout->getBlock('root');
    // Be 100% sure that there is a root block
    if($root) {
        // Check that the root block is a Magento page block that we can add body classes to
        if(is_a($root, 'Mage_Page_Block_Html')) {
            // Add logged in/out body classes
            if(Mage::helper('customer')->isLoggedIn()) {
                $root->addBodyClass('logged-in');
            } else {
                $root->addBodyClass('logged-out');
            }
            // You can even add more conditions and body classes for whatever you may want here
        }
    }
} 
```

对我来说工作得很好。希望它也适合你！

# javascript - JSP，Java Beans，如何记住位置

> ID：16105611
> 
> 赞同：0
> 
> 时间：2013-04-19T13:19:53.750
> 
> 标签：javascript, jquery, html, jsp, javabeans

对于“Web 工程”的作业，我们必须使用 JSP、Servlet 和 Java Bean 编写一个 Web 应用程序游戏。游戏的算法，使用 Servlet 作为控件，使用 JSP 作为模型/视图，使用 Beans 作为数据已经可以工作了。我现在有一个问题是可视化，JQuery/Javascript 函数。

基本上我有一个包含 7 个字段的列表，可以将汽车附加到其中。（汽车是跨度）这是一个骰子游戏，每一轮你骰子并向前移动领域。

我遇到了以下问题，我发现很难解决：

当然，在游戏开始时，汽车（跨度）被附加到起始字段，但如果它向前移动，我不知道如何保存汽车的位置。每次 JSP 在开始时刷新时，汽车都将位于起始字段。我已经尝试过将汽车的旧位置保存在 java bean 中，并在页面加载时附加到 Jquery 中的正确字段，但不知何故这不起作用。我想出的唯一一件事就是将游戏场的整个代码保存在 javabeans 中，但我认为这不是最佳解决方案，也许有人有更好的主意，或者知道为什么 appendTo 不起作用？

继承人代码：HTML

```
 <div class="field">
                        <h2 class="accessibility">Playfield</h2>
                        <ol id="road">
                            <li id="start_road">
                                <span class="accessibility">Startingfield</span>
                                <span id="player1">
                                    <span class="accessibility"><em>Player 1</em></span>
                                </span>
                                <span id="player2">
                                    <span class="accessibility"><em>Player 2</em></span>
                                </span>
                            </li>
                            <li class="empty_road" id="road_1">
                                <span class="accessibility">Field 2</span>
                            </li>
                            <li class="oil_road" id="road_2">
                                <span class="accessibility">Field 2</span>
                            </li>
                            <li class="empty_road" id="road_3">
                                <span class="accessibility">Field 2</span>
                            </li>
                            <li class="empty_road" id="road_4">
                                <span class="accessibility">Field 2</span>
                            </li>
                            <li class="oil_road" id="road_5">
                                <span class="accessibility">Field 2</span>
                            </li>
                            <li id="finish_road">
                                <span class="accessibility">Goalfield</span>
                            </li>
                        </ol>
                    </div> 
```

正如您所看到的，每次重新加载页面时跨度都在起始字段中，这就是问题所在。这里是 Jquery 函数：

```
$(document).ready(function() {
                $("player1").appendTo("<%= game.getoldPlayer1() %>");
                $("player2").appendTo("<%= game.getoldPlayer2() %>");
                prepareAnimation();
                $("#player1").fadeOut(700, function() {
                    $("#player1").appendTo("<%= game.getPlayer1() %>");
                    $("#player1").fadeIn(700);
                });
                $("#player2").delay(1400).fadeOut(700, function() {
                    $("#player2").appendTo("<%= game.getPlayer2() %>");
                    $("#player2").fadeIn(700,completeAnimation);                    
                });
}); 
```

我试图在开始时解决两个 appendTos 的问题，这应该将汽车设置到它们的旧位置，它们保存在 JavaBean 中，但不知何故它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:24:18.000

不确定这是否是打字错误，但您缺少`#`.

```
$("player1").appendTo("<%= game.getoldPlayer1() %>");
$("player2").appendTo("<%= game.getoldPlayer2() %>"); 
```

应该

```
$("#player1").appendTo("<%= game.getoldPlayer1() %>");
$("#player2").appendTo("<%= game.getoldPlayer2() %>"); 
```

# wix - 如何创建单个 RegistryKey 并从许多 RegistryValue 中引用它？

> ID：16105612
> 
> 赞同：1
> 
> 时间：2013-04-19T13:20:02.813
> 
> 标签：wix

我创建了一个 RegistryKey 和一个 RegistryValue 嵌套在这个 RegistryKey 中。后来我创建了另一个 RegistryValue - 没有嵌套在 WiX 的 XML 方案中的任何 RegistryKey 中。但是我希望这第二个 RegistryValue 实际上在安装完成后位于第一个 RegistryKey 内。所以我想从许多 RegistryValue 中引用一个 RegistryKey。怎么做？

它还要求各种注册表值位于各种组件中，因此我不能将所有注册表值放在 WiX 方案中的单个注册表项中。

示例如下所示。

```
 <Component>
    <RegistryValue
      Root="HKLM"
      Name="ShortcutInstalled"
      Key="SetupAndAccessoryData1"
      Type="integer"
      Value="1"
      KeyPath="yes"
      />
  </Component>
  <Component>
    <RegistryKey
      Id="SetupAndAccessoryData1"
      Action="createAndRemoveOnUninstall"
      Key="SOFTWARE\$(var.Manufacturer)\$(var.ProductName)\SetupAndAccessoryData"
      Root="HKLM"
      >
      <RegistryValue
        Type="string"
        Name="InstallDirectory"
        Value="[ProductDirectory]"
        KeyPath="yes"
        >
      </RegistryValue>
    </RegistryKey>
  </Component> 
```

现在，我必须使用与 RegistryKey 的 Key 属性相同的数据填充 ShortcutInstalled RegistryValue 的 Key 属性。但由于重构困难，我不想复制和粘贴它。我只想引用相同的注册表项。获得它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:10:07.393

当您在单个键下嵌套许多元素时，提供该`RegistryKey`元素主要是为了方便。`RegistryValue`但是，没有必要使用`RegistryKey`元素，因为它`RegistryValue`也可以提供完整路径。你上面的例子也可以写成：

```
<Component>
  <RegistryValue
     Root="HKLM"
     Key="SOFTWARE\$(var.Manufacturer)\$(var.ProductName)\SetupAndAccessoryData"
     Name="ShortcutInstalled"
     Value="1"
     Type="integer" />
</Component>
<Component>
  <RegistryValue
     Id="SetupAndAccessoryData1"
     Root="HKLM"
     Key="SOFTWARE\$(var.Manufacturer)\$(var.ProductName)\SetupAndAccessoryData"
     Name="InstallDirectory"
     Value="[ProductDirectory]"
     Type="string" />
  </RegistryValue>
</Component> 
```

这主要是一个偏好问题。或者，如果您需要在许多中引用相同的注册表项，`Components`那么您可以使用预处理器变量来存储路径的公共部分，然后在许多`RegistryValue`元素中使用它。例如，我们可以将上面的内容修改为：

```
<?define CommonReg = "SOFTWARE\$(var.Manufacturer)\$(var.ProductName)\SetupAndAccessoryData" ?>
<Component>
  <RegistryValue
     Root="HKLM"
     Key="$(var.CommonReg)"
     Name="ShortcutInstalled"
     Value="1"
     Type="integer" />
</Component>
<Component>
  <RegistryValue
     Id="SetupAndAccessoryData1"
     Root="HKLM"
     Key="$(var.CommonReg)"
     Name="InstallDirectory"
     Value="[ProductDirectory]"
     Type="string" />
  </RegistryValue>
</Component> 
```

# java - 使用 IntelliJ 设置的断点在远程自定义 java 代理的 premain 中不起作用

> ID：16105615
> 
> 赞同：5
> 
> 时间：2013-04-19T13:20:11.283
> 
> 标签：java, debugging, intellij-idea, agent

我已经开始实现一个简单的 Java 代理，它在 JVM 加载类之前执行一些检测。问题是我需要对此代理进行一些调试，但是到目前为止我尝试的方法都失败了（我尝试远程调试代理但它不起作用）

我使用 IntelliJ 和 Maven（生成 .jar 代理）。

所以我的问题是：远程调试一个简单的java代理有什么技巧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:01:10.040

事实证明，我有一个演示 Java 检测的项目，我已经在 IntelliJ 中对其进行了调试测试。断点工作。您可以将其用作参考。

[https://github.com/noahlz/weaver-demo](https://github.com/noahlz/weaver-demo)

IntelliJ 的示例运行/调试配置

![代理应用程序运行/调试](https://i.stack.imgur.com/1e8Ag.png)

此外，如果您正在远程调试，premain 可能会在您附加到调试器之前执行。尝试在您传递给运行代理代码的 JVM 的调试命令中更改`suspend=n`为。`suspend=y`这样，它将等到您连接 IntelliJ 后再继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-21T08:19:59.257

对于使用 VSCode 的人，我只是发现如果我使用集成终端，premain 中的断点对我有用，而如果我使用 internalConsole，它们就不起作用！！！

[![在此处输入图像描述](https://i.stack.imgur.com/USNuB.png)](https://i.stack.imgur.com/USNuB.png)

`"java.debug.settings.console": "integratedTerminal"`

# linux - 在 bash 中排序，基于列的排序部分

> ID：16105617
> 
> 赞同：0
> 
> 时间：2013-04-19T13:20:15.783
> 
> 标签：linux, bash

我有一个像这样的文件：

```
a1 blah
b2 blah
a3 blah
b1 blah
b3 blah
a2 blah 
```

如果我做

```
sort -k1,1 file.name 
```

我会得到这个：

```
a1
a2
a3
b1
b2
b3 
```

但是，我想得到这个订单：

```
a1
b1
a2
b2
a3
b3 
```

我怎样才能做到这一点？谢谢

编辑：我编辑了这个例子，前一个没有提出整个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:22:50.950

您正在寻找`sort -kN.M`！`N.M`表示`sort`从第 N 个字段的第 M 个字符开始。

初步解决方案：

```
sort -k1.2 your_file 
```

更新了一个：

```
sort -k1.2,k1.2 your_file 
```

所以它只会*按*这个特定的字符排序，不会走得更远。

输出：

```
a1 blah
b1 blah
a2 blah
b2 blah
a3 blah
b3 blah 
```

# sql-server - 用于备份和恢复 SQL Server 数据库的指令集（更改 .mdf 和 .log 文件）

> ID：16105630
> 
> 赞同：1
> 
> 时间：2013-04-19T13:20:51.327
> 
> 标签：sql-server, automation

我在这里有一系列重复性的工作。其中之一是从模板创建新数据库。

为了实现这一点，我们有一个 *master_db* 数据库，它的作用类似于模板，它的位置类似于`C:\Backup\master_db.bak`.

创建新数据库后`new_db`，右键单击它并通过*Task->Restore->Database*。在*常规*选项卡中，我选择*从设备*，然后我设置`C:\Backup\master_db.bak`为恢复源。在*选项选项*卡中，我将选择*覆盖现有数据库*，并且我还需要更改 .mdf 和 .log 文件（当前`C:\SQLData\master_db.mdf`和`C:\SQLData\master_db_log.ldf`in`C:\SQLData\new_db.mdf`和`C:\SQLData\new_db_log.ldf`）。

该迭代器处于正常工作状态，但为了自动化，我需要通过代码执行此步骤。我应该怎么办？我的`RESTORE`命令需要哪些参数？我应该使用什么命令来正确设置 .mdf 和 .ldf 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:26:56.407

```
restore database new_db from disk = 'C:\Backup\master_db.bak'
with
    move '<data_file>' to 'C:\SQLData\new_db.mdf',
    move '<log_file>' to 'C:\SQLData\new_db_log.ldf',
    replace 
```

您需要更新这些文件`<data_file>`的`<log_file>`逻辑文件名。您应该能够在 GUI 中看到它们。

# jquery - jQuery中变量之间的区别

> ID：16105633
> 
> 赞同：3
> 
> 时间：2013-04-19T13:21:03.587
> 
> 标签：jquery

谁能告诉我 jQuery 中的变量 $variable 和 $.Variable 有什么区别？例如：

```
$x='3';
$.y(parseInt($(this).val()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:24:16.067

第一个 ($x) 是一个变量（在这种情况下，它被分配了一个字符串 3 的值。第二个是对函数 y() 的函数调用，它可能是一个 jquery 扩展函数。在你的例子中，这个函数获取一个参数，该参数包含某个整数，该整数来自 $(this) 引用的某物的值。

请注意，$x 也可以很容易地成为 var x = '3'。您的示例中的赋值实际上有点奇怪，因为 $ 前缀通常表示该变量包含一些 jQuery 选择器结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:25:44.547

`$var`只是一个约定，告诉 var 包含一个 jQuery 包装的 DOM 选择，例如：

```
var $form = $('#yourForm'); 
```

`$.function`另一方面意味着您正在调用 jQuery 库的一些“静态”函数，例如`$.each()`，没有执行任何 DOM 选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:28:34.960

在 JavaScript 中，您可以让变量名称包含字符`$`. 如果你创建一个带有 script 标签的新 HTML 文档，你可以这样做：

```
var $test = 10;
console.log($test); 
```

它将登录`10`到控制台。

jQuery 使用`$`变量作为自身的简写，并且任何 jQuery 函数/扩展都可以从该对象中获得。以下内容可能会更清楚：

```
// Assume you have already loaded jQuery
$ == jQuery; // true!
$.test = 10; // Assign a random property to the "jQuery Object"
console.log($.test); // print out "10" 
```

现在，在您的示例中`$.y()`，有人通过添加一个名为 的方法来扩展 jQuery，该方法`y`可以作为`$.y()`. 在许多情况下，作为跟踪对象类型的一种方式，如果您有一个引用 jQuery 对象的变量，您可以在变量名称前加上 DollarSign：

```
var header = document.getElementById("header"); //without jQuery
var $header = $("#header"); // with jQuery 
```

以上不是规则，只是许多人为保持代码清晰而遵循的约定。

# php - 在php函数中返回一个值

> ID：16105637
> 
> 赞同：0
> 
> 时间：2013-04-19T13:21:09.430
> 
> 标签：php, random

嗨，我有这个代码，例如：

```
function generateRandStr($length){
      $randstr = "";
      for($i=0; $i<$length; $i++){
         $randnum = mt_rand(0,61);
         if($randnum < 10){
            $randstr .= chr($randnum+48);
         }else if($randnum < 36){
            $randstr .= chr($randnum+55);
         }else{
            $randstr .= chr($randnum+61);
         }
      }
      return $randstr;
   } 
```

但是当它试图在主上使用时：

```
 generateRandStr(10); 
    echo $irandstr; 
```

我不做什么？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:22:20.530

将返回的结果赋值给一个变量：

```
$mystring = generateRandStr(10); 
```

或将其传递给函数：

```
echo generateRandStr(10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:26:47.170

将值分配给您从函数中获得的某个变量。

```
$rand_str =  generateRandStr(10); 
echo $rand_str; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:24:31.360

你可以这样做：

```
echo generateRandStr(10); 
```

或者

```
$irandstr = generateRandStr(10); 
echo $irandstr; 
```

在上面的代码片段`$irandstr;`中没有分配任何值。

# python - Python Django 要求.txt

> ID：16105638
> 
> 赞同：13
> 
> 时间：2013-04-19T13:21:10.927
> 
> 标签：python, django, pip, requirements.txt

我有一个`requirements.txt`包含所有依赖项的文件，但未正确处理：

之后`pip install -r requirements.txt`，我得到以下信息`pip freeze`：

```
argparse==1.2.1
wsgiref==0.1.2 
```

但是当我进行 pip install 时：

```
numpy==1.6.2
Django==1.4.2
django-tastypie==0.9.14
pyes==0.19.1 
```

然后运行我的`pip install -r requirements.txt`. 然后它工作。

这是我的 requirements.txt 包含的内容：

```
numpy==1.6.2
Django==1.4.2
django-tastypie==0.9.14
urllib3==1.5
pyes==0.19.1
BeautifulSoup==3.2.1
MySQL-python==1.2.3
IMAPClient==0.9.1
Jinja2==2.6
Pillow==2.0.0
amqp==1.0.9
anyjson==0.3.3
billiard==2.7.3.22
celery==3.0.16
django-celery==3.0.11
django-compressor==1.3
django-concurrency
django-extensions==1.1.1
https://codeload.github.com/toastdriven/django-haystack/zip/master#egg=django-haystack
django-model-utils==1.2.0
django-multiforloop==0.2.1
django-social-auth==0.7.22
html5lib==0.95
httplib2==0.8
kombu==2.5.7
logilab-astng==0.24.2
logilab-common==0.59.0
oauth2==1.5.211
ordereddict==1.1
pycrypto==2.6
pylint==0.27.0
python-dateutil==1.5
python-openid==2.2.5
pytz==2013b
six==1.3.0
unittest2==0.5.1
wsgiref==0.1.2
xlrd==0.9.0
xmltodict==0.4.6
django-storages>=1.1.8
boto==2.8.0
lxml==3.1.0
pyelasticsearch==0.4.1
django-tastypie-elasticsearch==0.1.0 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-08T00:49:40.560

我试过了，问题出在 django-tastypie-elasticsearch 上。有一个已知问题，如果尚未安装 Django，则使用 pip 安装会失败。以下是问题报告：

[https://github.com/llonchj/django-tastypie-elasticsearch/issues/1](https://github.com/llonchj/django-tastypie-elasticsearch/issues/1)

看起来 django-tastypie-elastic 只有两个贡献者，所以你可能是一个人。好消息是这不是你的错！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-10-20T06:21:16.017

在 Mac 上：

`pip3 freeze > requirements.txt`

from：[自动创建 requirements.txt](https://stackoverflow.com/questions/31684375/automatically-create-requirements-txt)

* * *

然后，如果您想安装它们，并且您正在使用虚拟环境

`pip3 install -r requirements.txt`

来自： [如何根据本地目录中的 requirements.txt 文件使用 pip 安装软件包？](https://stackoverflow.com/questions/7225900/how-can-i-install-packages-using-pip-according-to-the-requirements-txt-file-from)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T14:30:27.777

“ [https://codeload.github.com/toastdriven/django-haystack/zip/master#egg=django-haystack](https://codeload.github.com/toastdriven/django-haystack/zip/master#egg=django-haystack) ”行不是有效的点子要求。它应该是“-e git+ [https://codeload.github.com/toastdriven/django-haystack/zip/master#egg=django-haystack](https://codeload.github.com/toastdriven/django-haystack/zip/master#egg=django-haystack) ”

# python - 将模型错误从一个应用程序导入另一个应用程序

> ID：16105639
> 
> 赞同：0
> 
> 时间：2013-04-19T13:21:16.223
> 
> 标签：python, django, models

我在 django 项目中有 2 个应用程序。我想将模型从一个应用程序导入到另一个应用程序。但它给了我

> NameError：未定义名称“JobGenre”

当我尝试同步数据库时

在`customer.models`

```
from job.models import JobGenre
class Worker(Costumer):
   keyword=models.ForeignKey(JobGenre, null=True) 
```

并且在`job.models`

```
class JobGenre(models.Model):
    genre=models.CharField(max_length=40) 
```

如果我使用

```
keyword=models.ForeignKey('job.models.JobGenre', null=True) 
```

它给

> 错误：一个或多个模型未验证：costumer.worker:'keyword' 与模型 job.models.JobGenre 有关系，该模型要么尚未安装，要么是抽象的。

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:33:17.443

```
keyword=models.ForeignKey('job.models.JobGenre', null=True) 
```

在我看来不正确。

请尝试：

```
keyword.models.ForeignKey('job.JobGenre', null=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:38:36.580

您不需要为 ForeignKey 方法提供完整的包路径。只需提供 appname.modelclass 即可。

```
keyword=models.ForeignKey('job.JobGenre', null=True) 
```

应该管用。请参考[这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)。

# ios - iOs：如何知道何时访问属性

> ID：16105642
> 
> 赞同：-3
> 
> 时间：2013-04-19T13:21:27.333
> 
> 标签：ios, debugging

我想知道何时访问特定属性（设置或获取）。我知道通过符号断点我可以知道何时调用方法或函数......它适用于属性吗？

@Vladimir & pedro.m：我试过你的答案，但似乎什么也没发生： ![在此处输入图像描述](https://i.stack.imgur.com/lyApj.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:28:07.240

是的，属性实际上只是为您定义 setter 和 getter 方法的快捷方式。

使用符号断点了解它们何时被访问：

![在此处输入图像描述](https://i.stack.imgur.com/Cocco.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:24:11.367

是的，因为属性只是调用访问器方法的语法糖，您可以为它们设置符号断点。如果您想同时跟踪 setter 和 getter 调用，则需要 2 个断点：for`-property`和`-setProperty:`方法。

# c++ - OpenGL转换/翻译/归一化坐标？

> ID：16105645
> 
> 赞同：1
> 
> 时间：2013-04-19T13:21:33.880
> 
> 标签：c++, opengl

我正在寻找一些（非弃用代码）OpenGL示例，它们实际上以使用非标准坐标的2D方式在从开始到结束的坐标之间逐步显示代码/转换。IE

```
GLfloat Square[] = 
{
    -5.5f, -5.0f, 0.0f, 1.0f,
    -5.5f,  5.0f, 0.0f, 1.0f,
    5.5f,  5.0f, 0.0f, 1.0f,
    5.5f, -5.0f, 0.0f, 1.0f
}; 
```

然后使用上述坐标，将它们转换为必要的坐标，以便它们映射到 -1,1 等并输出到屏幕。

我在网上找到的每个示例、教程等，都只能使用上述 -1<>1 范围内的坐标。

环境：C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:33:36.867

好吧，如果您使用 glm ( [http://glm.g-truc.net/index.html](http://glm.g-truc.net/index.html) )，您可以使用 glm::ortho 来创建视图矩阵，就像在旧式 OpenGL 中使用 glOrtho 一样。

例如：

```
glm::mat4 viewMatrix = glm::ortho(-5.0f, 5.0f, -5.0f, 5.0f, 0.0f, 1.0f); 
```

如果你然后将它插入你的着色器，你应该得到一个从 -5 到 +5 而不是 -1 到 +1 的映射，或者你想要的任何比例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:48:06.313

当您在项目中使用“无”转换时，您只需使用放置在“**标准化设备空间**”中的坐标。这实际上是一个在每个轴上范围从 -1 到 1 的框。

在这种情况下，在顶点着色器中会有类似这样的行：

```
gl_Position = attribVertexPos; // no transformation 
```

对于 2D，如果你想提供不同范围的坐标，你需要做的只是缩放位置：

*   对于范围 -10 到 10，使用带有代码的顶点着色器`gl_Position = attribVertexPos * 0.1`
*   或者你可以寻找一个缩放矩阵并使用它

# javascript - 通过制表符加入（）数组？

> ID：16105649
> 
> 赞同：0
> 
> 时间：2013-04-19T13:21:47.667
> 
> 标签：javascript

我正在尝试与依赖于通过 GET 请求作为制表符分隔的字符串发送的值的旧系统集成。`join()`我有我的数据在一个数组中，但是在以正确的方式尝试它时遇到了问题。

这是我尝试过的，但都不起作用；

```
var myArray = ["a", "b", "c"]

myArray.join(\t);
myArray.join(/\t/);
myArray.join('\t');
myArray.join('\\t');
myArray.join('   '); // tab character 
```

**编辑**

看起来实际的问题似乎是加入`\t`确实有效，但是当它被 URL 编码时，选项卡并没有变成`%09`它应该的样子，而是被删除了。

所需的 URL 编码变量：

```
"?tags=a%09b%09c" 
```

实际输出：

```
"?tags=abc" 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:25:55.433

这个适用于我的 chrome 控制台：

```
var myArray = ["a", "b", "c"];

console.log(myArray.join('\t')); 
```

请参阅此[jsfiddle](http://jsfiddle.net/mGZdk/1/)。

这个也有效：

```
myArray.join('   '); // tab character 
```

浏览器：Chrome 26.0.1410.65 (os x)

**编辑**：

```
var myArray = ["a", "b", "c"];

var string = myArray.join('\t');

var url = encodeURIComponent(string);

console.log(url); //output : a%09b%09c 
```

[http://jsfiddle.net/mGZdk/2/](http://jsfiddle.net/mGZdk/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:28:20.490

您的问题是您没有将其分配给新变量。Join() 不会修改原始变量。尝试这个：

```
var myArray = ["a", "b", "c"]

var array_string = myArray.join('\t');

alert(array_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:27:50.910

`\t`应该管用...

```
var arr = [1, 2, 3];
var str = arr.join("\t"); 
```

但是，您如何显示您的输出？如果您尝试在普通 HTML 页面上显示内容，选项卡将显示为空格。如果您将内容放在特殊元素中，例如`<pre>`，它们应该会正常显示。

我知道这是一个讨厌的解决方案，但你可以使用多个`&nbsp;`...

```
var arr = [1, 2, 3];
var str = arr.join("&nbsp;&nbsp;&nbsp;&nbsp;"); // s-sorry ;__; 
```

# c# - 使用 asp.net 和 Application_AcquireRequestState 将站点重定向到移动站点

> ID：16105653
> 
> 赞同：0
> 
> 时间：2013-04-19T13:21:52.583
> 
> 标签：c#, asp.net

我在 asp.net 中有网站，也有它的移动版本。我希望如果用户在移动设备中键入：

[http://example.com/ViewVacancy.aspx?ID=8674](http://example.com/ViewVacancy.aspx?ID=8674)

然后他被引导到：

[http://m.example.com/vacancy.aspx?name=8674](http://m.example.com/vacancy.aspx?name=8674)

我写了以下代码：

```
protected void Application_AcquireRequestState(object sender, EventArgs e)
    {

        HttpContext context = HttpContext.Current;

        if (context.Request.Browser.IsMobileDevice)
        {

            string uri = context.Request.Url.Authority.ToString(); 

            if (context.Request.Url.PathAndQuery.ToLower().Contains("viewvacancy"))
            {
                string query = context.Request.Url.Query; 
                query = query.Replace("ID", "Name");
                if (uri.ToString().StartsWith("http"))
                {
                    Uri nmobileURi = new Uri(context.Request.Url.Scheme + "://" + "m.example.com/vacancy.aspx" + query);
                    Response.Redirect(nmobileURi.ToString());
                }               
            }
            else
            {
                Response.Redirect("http://m.example.com");
            }
        }
        if (context.Request.ServerVariables["HTTP_USER_AGENT"] != null)
        {

            var userAgent = HttpContext.Current.Request.UserAgent.ToLower();
            if (userAgent.Contains("iphone") || userAgent.Contains("ipod")) 
            {
                Response.Redirect("http://example.com/downloadapp.htm");
                // iPhone
            }

            else if (userAgent.Contains("android"))
            {
                Response.Redirect("http://example.com/downloadgoogleplay.htm");
            }

            //Create a list of all mobile types
            string[] mobiles =
            new[]
            { "midp", "j2me", "avant", "docomo",
            "novarra", "palmos", "palmsource",
            "240×320", "opwv", "chtml",
            "pda", "windows ce", "mmp/",
            "blackberry", "mib/", "symbian",
            "wireless", "nokia", "hand", "mobi",
            "phone", "cdm", "up.b", "audio",
            "SIE-", "SEC-", "samsung", "HTC",
            "mot-", "mitsu", "sagem", "sony"
            , "alcatel", "lg", "eric", "vx",
            "NEC", "philips", "mmm", "xx",
            "panasonic", "sharp", "wap", "sch",
            "rover", "pocket", "benq", "java",
            "pt", "pg", "vox", "amoi",
            "bird", "compal", "kg", "voda",
            "sany", "kdd", "dbt", "sendo",
            "sgh", "gradi", "jb", "dddi",
            "moto", "iphone"
            };

            //Loop through each item in the list created above
            //and check if the header contains that text
            foreach (string s in mobiles)
            {
                if (context.Request.ServerVariables["HTTP_USER_AGENT"].
                ToLower().Contains(s.ToLower()))
                {                   
                    string uri = context.Request.Url.Authority.ToString(); 

                    if (context.Request.Url.PathAndQuery.ToLower().Contains("viewvacancy"))
                    {
                        string query = context.Request.Url.Query; 
                        query = query.Replace("ID", "Name");
                        if (uri.ToString().StartsWith("http"))
                        {
                            Uri nmobileURi = new Uri(context.Request.Url.Scheme + "://" + "m.example.com/vacancy.aspx" + query);
                            Response.Redirect(nmobileURi.ToString());
                        }
                    }
                    else
                    {
                        Response.Redirect("http://m.example.com");
                    }
                }
            }
        }
    } 
```

当用户键入时它正在工作

[http://example.com](http://example.com)

所以用户被重定向到：

[http://m.example.com](http://m.example.com)

但是当用户键入时：

[http://example.com/viewvacancy.aspx?id=8674](http://example.com/viewvacancy.aspx?id=8674)

它不会重定向到：

[http://m.example.com/vacancy.aspx?name=8674](http://m.example.com/vacancy.aspx?name=8674)

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:15:38.180

问题是**String.Replace()**

```
query = Regex.Replace(query, "id", "name", RegexOptions.IgnoreCase); 
```

# quickbooks - 如何在创建发票时添加组 - IPP 数据服务 - QuickBooks 桌面版

> ID：16105654
> 
> 赞同：1
> 
> 时间：2013-04-19T13:21:52.447
> 
> 标签：quickbooks, intuit-partner-platform, intuit

我们有一个名为“支付组”的组。在该组中，有两个项目是书籍，轮胎修理。我们正在尝试将此组添加到发票中。但是我们在创建发票时遇到了问题。

```
QBInvoiceService iInvoiceSer = QBServiceFactory.getService(platformSessionContext, QBInvoiceService.class);
 QBInvoice myInvoice = QBObjectFactory.getQBObject(platformSessionContext, QBInvoice.class);

  InvoiceHeader invoiceHeader = QBObjectFactory.getQBObject(platformSessionContext, InvoiceHeader.class);
  invoiceHeader.setCustomerName("John");
  invoiceHeader.setPONumber("999");
  invoiceHeader.setSalesTermName("Net 10");
  Calendar dueDate = Calendar.getInstance();
  dueDate.set(2013, 12, 01);
  invoiceHeader.setDueDate(dueDate);

  ArrayList<InvoiceLine> invoiceLineList = new ArrayList<InvoiceLine>();
  InvoiceLine invoiceLine = QBObjectFactory.getQBObject(platformSessionContext, InvoiceLine.class);
  invoiceLine.setItemName("Payment Group");   

  InvoiceLine invoiceLine1 = QBObjectFactory.getQBObject(platformSessionContext, InvoiceLine.class);
  invoiceLine1.setItemName("Books"); 
  invoiceLine1.setDesc("");
  invoiceLine1.setAmount(new BigDecimal(500));
  invoiceLine1.setQty(new BigDecimal(5));

  InvoiceLine invoiceLine2 = QBObjectFactory.getQBObject(platformSessionContext, InvoiceLine.class);
  invoiceLine2.setItemName("Tire Repair");
  invoiceLine2.setDesc("Tire Repair");
  invoiceLine2.setAmount(new BigDecimal(500));
  invoiceLine2.setQty(new BigDecimal(5));

  InvoiceLine invoiceLine3 = QBObjectFactory.getQBObject(platformSessionContext, InvoiceLine.class);
  invoiceLine3.setDesc("group description");
  invoiceLine3.setAmount(new BigDecimal(1000));    

invoiceLineList.add(invoiceLine);
invoiceLineList.add(invoiceLine1);
invoiceLineList.add(invoiceLine2);  

ArrayList<TaxLine> taxLineList = new ArrayList<TaxLine>();
           TaxLine taxLine = QBObjectFactory.getQBObject(platformSessionContext, TaxLine.class);
           taxLine.setTaxName("Net 10");
           taxLineList.add(taxLine);

           myInvoice.setHeader(invoiceHeader);
           myInvoice.setLine(invoiceLineList);
           myInvoice.setTaxLine(taxLineList);

           QBInvoice newInvoice = iInvoiceSer.addInvoice(platformSessionContext, myInvoice); 
```

发票创建成功。但不与桌面 QuickBooks 软件同步。对此有任何想法吗？是否可以在使用 ipp Java devkit 2.0.7 创建发票时添加组项目？API 是否可用？

# sqlite - SQLite 备份策略

> ID：16105662
> 
> 赞同：2
> 
> 时间：2013-04-19T13:22:37.993
> 
> 标签：sqlite, backup, database-backups

我正在尝试从每隔 5 分钟运行的 cronjob 备份我的 sqlite 数据库。数据库是“实时的”，因此在我要执行备份时正在运行查询。

我想确定，当我备份它时，数据库处于良好状态，以便我可以依赖备份。

**我目前的策略（伪代码）：**

```
function backup()
{
    #try to acquire the lock for 2 seconds, then check the database integrity
    sqlite3 mydb.sqlite '.timeout 2000' 'PRAGMA integrity_check;'
    if (integrity is ok and database was not locked)
    {
        #perform the backup to backup.sqlite
        sqlite3 mydb.sqlite '.timeout 2000' '.backup backup.sqlite'

        if (backup could be performed)
        {
            #Check the consistency of the backup database
            sqlite3 backup.sqlite 'PRAGMA integrity_check;'
            if (ok)
            {
                return true;
            }
        }
    }

    return false;
} 
```

现在，我的策略存在一些问题：

*   如果实时数据库被锁定，我会遇到问题，因为那时我无法执行备份。也许交易可以帮助那里？
*   如果`PRAGMA integrity_check;`备份和备份之间出现问题，我就完蛋了。

有任何想法吗？`sqlite3 .backup`顺便说一句，the和 a good old 有什么区别`cp mydb.sqlite mybackup.sqlite`？

**[编辑]**我在嵌入式系统上运行 nodejs，所以如果有人建议使用一些 ruby​​ 包装器的[sqlite 在线备份 api - 没有机会;(](http://www.sqlite.org/c3ref/backup_finish.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:49:24.290

如果要在查询运行时进行备份，则需要使用备份 API。[该文档](http://www.sqlite.org/backup.html)有一个正在运行的数据库的在线备份示例（示例 2）。我不了解 Ruby 参考，您可以将其集成到您的程序中，或者将其作为一个在实际应用程序之外运行的小型 C 程序来执行——我都做过。

对备份进行显式完整性检查是多余的。备份 API 保证目标数据库是一致的和最新的。（硬币的另一面是，如果您在备份运行时过于频繁地更新数据库，备份可能永远不会完成。）

可以使用“cp”进行备份，但不能备份正在运行的数据库。您需要在整个备份期间拥有一个独占锁，因此它并不是真正的“实时”。您还需要小心复制所有 sqlite 的临时文件以及主数据库。

我希望 sqlite3 ".backup" 命令使用备份 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T19:20:37.957

如果您无法使用备份 API，则必须使用另一种机制来防止在复制数据库文件时对其进行修改。

[使用BEGIN IMMEDIATE](http://www.sqlite.org/lang_transaction.html)开始事务：

> 在 BEGIN IMMEDIATE 之后，没有其他数据库连接能够写入数据库或执行 BEGIN IMMEDIATE 或 BEGIN EXCLUSIVE。但是，其他进程可以继续从数据库中读取。

# java - 使用 Thread.sleep() 进行流式传输

> ID：16105665
> 
> 赞同：1
> 
> 时间：2013-04-19T13:22:51.483
> 
> 标签：java, streaming, restlet

这个例子是基于书中的一个例子`Restlet in Action`。

如果我尝试

```
public class StreamResource extends ServerResource
{
    @Get
    public Representation getStream() throws ResourceException, IOException
    {
        Representation representation = new WriterRepresentation(MediaType.TEXT_PLAIN)
        {
            @Override
            public void write(Writer writer) throws IOException
            {
                String json = "{\"foo\" : \"bar\"}";
                while (true)
                {
                    writer.write(json);
                }
            }
        };

        return representation;
    }
} 
```

它可以工作，并不断将 json 字符串发送到客户端。

如果我像这样在 while 循环中引入延迟

```
String json = "{\"foo\" : \"bar\"}\r\n";

while (true)
{
    writer.write(json);
    try
    {
        Thread.sleep(250);
    }
    catch (InterruptedException e)
    {} 
} 
```

我希望客户能在一秒钟内获得 4 次数据，但客户似乎什么也得不到。

谁能解释为什么引入`Thread.sleep()`这样做？将流数据延迟引入客户端的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T12:56:11.220

您应该尝试使用 Jetty 连接器而不是内部 Restlet 连接器。尽管我们正在努力修复它，但该连接器尚未准备好投入生产。

你也可以试试 Simple 扩展，它的依赖 JAR 比 Jetty 扩展少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:41:45.557

您可以尝试[刷新](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Writer.html#flush%28%29)缓冲区，如下所示：

```
String json = "{\"foo\" : \"bar\"}\r\n";

while (true)
{
    writer.write(json);
    writer.flush();  // flush the buffer.
    try
    {
        Thread.sleep(250);
    }
    catch (InterruptedException e)
    {} 
} 
```

没有`writer.flush()`，写入者在写入套接字之前等待填充内部缓冲区。`Thread.sleep(250)`减少每秒产生的输出，因此需要更多的时间来填充缓冲区。

# perl - new() 的单个参数必须是 HASH 引用数据

> ID：16105668
> 
> 赞同：1
> 
> 时间：2013-04-19T13:23:01.843
> 
> 标签：perl

我有一个 perl 脚本，它适用于 perl 版本 5.8.8，但 5.14 出现错误：匿名哈希中的奇数个元素

这是我的代码：

```
$session->begin_privileged({ $_enable_password }) 
```

以前是这样的：

```
$session->begin_privileged( $_enable_password ) 
```

而此时我收到此错误：

```
Single parameters to new() must be a HASH ref data 
```

我有与上面类似的类型行，并且每个行都得到相同的单参数错误。

我用谷歌搜索了它，但找不到常规的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:36:39.247

如果`$session`是一个实例，[`Net::Appliance::Session`](https://metacpan.org/module/Net%3a%3aAppliance%3a%3aSession)那么您的调用应如下所示：

```
$session->begin_privileged({ password => $_enable_password }); 
```

但我仍然不确定这`$_enable_password`首先不是哈希引用，在这种情况下，您应该将其作为单个参数传递而不用大括号括起来。与 Perl v14 停止工作相比，更可能的解释`$_enable_password`是设置不正确。

# ios - 将按钮放置在模态视图控制器之外

> ID：16105673
> 
> 赞同：1
> 
> 时间：2013-04-19T13:23:11.960
> 
> 标签：ios, objective-c, uibutton, modalviewcontroller, bounds

我想在我在 iPad 应用程序上呈现的模态视图控制器的边界之外添加一个关闭按钮。

我尝试通过情节提要通常通过编码添加按钮，但是`UIButtons`视图被模态视图控制器的边界剪裁了。

**我的目的是：**我想在配置为表单的模态视图控制器的右上角添加一个关闭按钮。

我正在通过我之前的视图中的 segue 启动模态视图控制器。

随附的屏幕截图显示了我要实现的目标：

![所需结果](https://i.stack.imgur.com/Kvw1r.png)

# liferay - 如何在不呈现整个页面的情况下呈现 portlet。生命射线

> ID：16105674
> 
> 赞同：1
> 
> 时间：2013-04-19T13:23:25.067
> 
> 标签：liferay, portlet

我在同一页面上有两个 portlet。Portlet A 执行非常快的任务，而 Portlet B 执行非常慢的任务。Portlet B 从 A 读取参数。如果我对 A 进行更改（使用 RenderURL），Liferay 会呈现整个页面（包括慢速 Portlet B）。我怎么能说 Liferay 只渲染 Portlet A 而不是 Portlet B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:08:32.830

renderURL 将始终指向整个页面。如果您使用“手动”，例如没有其他框架的帮助，您将需要利用 resourceURL 并使用 Ajax 刷新您的 portlet 的内容。

另一种选择是将慢速 portlet B 声明为异步（“ajaxable”）并缓存输出，这样您就不必经常进行昂贵的呈现操作。ajaxable 选项在 liferay-portlet.xml 中可用，并记录在该文件中。RSS portlet (Liferay-OOTB) 是这样配置的，因为它可能需要一段时间才能收集到它的所有 RSS 提要并可以呈现。这可能是您所需更改的良好蓝图。

# excel - Excel VBA 范围查找和删除

> ID：16105676
> 
> 赞同：0
> 
> 时间：2013-04-19T13:23:28.330
> 
> 标签：excel, vba

我有几个关于 VBA 的问题，希望你们能帮助我。我是 VBA 的新手，因此非常感谢您提供的任何帮助。

**目标**- 如果在“valueRange”中找到类似的值，则从“cellRange”中删除所有行

*到目前为止的代码*

```
Sub DeleteRows()

Set valueRange = Worksheets("Delete Rows").Range("A4:A65000")
Set cellRange = Worksheets("Load File").Columns(Worksheets("Delete Rows").Range("F1").Value)

For Each Cel In cellRange.Cells
    For Each Value In valueRange.Cells
        If Cel.Value = Value.Value Then
            Cel.EntireRow.Delete
        End If
    Next Value
Next Cel
End Sub 
```

**问题 1：** valueRange 并不总是填充所有 65000 行。我怎样才能做到这一点，以便范围只从 A4 中获取那些：（直到它碰到一个空列）

**问题 2：**与问题 1 类似，但 cellRange

**问题3：**每当删除一行时，似乎都会影响范围的设置方式。这意味着如果它删除第 10 行，则循环转到第 11 行，而不再次检查第 10 行。我怎样才能告诉外观做第二遍或再次浏览文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:56:23.197

P1：这里有两个选项
a）如果Cel.Value是空的，退出对于
b）正确的范围选择，请在这里参考这个人：[Excel：选择所有行直到空单元格](https://stackoverflow.com/questions/10353367/excel-selecting-all-rows-until-empty-cell)

P2：同上

P3：由于 For-Each 不能“向后”，您可以做的最好的事情是
a) 不要删除该行，而是将它的数字存储在一个 Long 数组中，然后添加一个 For-Next 并删除“标记”行如：

```
For x = UBound(myLongArray)-1 To 0 Step -1
    cel(x).EntireRow.Delete
Next x 
```

b）而不是 For-Each，将行数（通过[`ROWS`函数](https://support.office.com/en-gb/article/ROWS-function-b592593e-3fc2-47f2-bec1-bda493811597)）存储在变量中，并使用“Step -1”循环遍历行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:57:08.547

正如其他人所提到的，删除时您必须后退一步。

此外，我进行了修改以避免对ValueRange中的每个单元格进行不必要的迭代，而是使用该`Match()`函数检查.`Cel.Value``ValueRange`

```
Sub DeleteRows()
Dim r as Long
Dim valueRange as Range, cellRange as Range
Dim Cel as Range

Set valueRange = Worksheets("Delete Rows").Range("A4:A65000").End(xlUp) '<~~ Get the last unused row
Set cellRange = Worksheets("Load File").Columns(Worksheets("Delete Rows").Range("F1").Value)

For r = cellRange.Cells.Count to 1 Step -1  '<~~ When deleting rows you must step backwards through the range to avoid the error you are encountering.'
    Set Cel = cellRange.Cells(r)

    'Check to see if Cel.Value exists in the ValueRange using the "Match" function'
    If Not IsError(Application.Match(Cel.Value,ValueRange,False) Then
        Cel.EntireRow.Delete
    End If
Next r
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:28:13.467

干得好。

```
' Declare your variables to get intellisense
Dim rngDelete As Range
Dim cellRange As Range
Dim valueRange As Range

' Get only the rows with data
Set valueRange = Worksheets("Delete Rows").Range("A4")
If valueRange.Offset(1, 0) <> "" Then
    Set valueRange = Worksheets("Delete Rows").Range(valueRange, valueRange.End(xlDown))
End If

' Get only the rows with data
Set cellRange = Worksheets("Load File").Cells(Worksheets("Delete Rows").Range("F1").value,1)
If cellRange.Offset(1, 0) <> "" Then
    Set cellRange = Worksheets("Load File").Range(cellRange, cellRange.End(xlDown))
End If

Dim cel As Range
Dim value As Range

' make cel your outer since it has more rows
For Each cel In cellRange.Cells
    For Each value In valueRange.Cells
        If value.value = cel.value Then
            ' Don't delete it yet but store it in a list
            If rngDelete Is Nothing Then
                Set rngDelete = cel.EntireRow
            Else
                Set rngDelete = Union(rngDelete, cel.EntireRow)
            End If
            ' no need to look further
            Exit For
        End If
    Next
Next

' Wipe them out all at once
rngDelete.Delete 
```

# sql-server-2008 - 用于代替触发器 SQL Server 的多行操作

> ID：16105679
> 
> 赞同：0
> 
> 时间：2013-04-19T13:23:31.953
> 
> 标签：sql-server-2008, triggers, auto-increment, sql-insert, multirow

## 场景/背景：

我正在尝试创建一个“测试”表。出于这个问题的目的，我的表将只有 5 列定义如下：

```
 CREATE TABLE TestTable
 (
      Id UNIQUEIDENTIFIER DEFAULT NEWID() NOT NULL,
      Name VARCHAR(75) NOT NULL,
      DateRequested DATETIME NOT NULL DEFAULT GETDATE(),
      TestYear AS YEAR(DateRequested) PERSISTED NOT NULL, -- computed column that shows the year the test was requested. I want to persist this column so I can index on it if need be.
      TestNumber CHAR(4) NOT NULL DEFAULT '0000', -- need this to auto increment but also needs to reset for the first test of the year.
      CONSTRAINT TestTablePK PRIMARY KEY(Id)
 );
 GO 
```

我的要求是我希望“TestNumber”根据年份“自动递增”。例如：

```
 GUID, Test 1 in Old Yr, 2013-01-01 05:00:00.000, 2013, 0001
 GUID, Test 2 in Old Yr, 2013-12-25 11:00:00.000, 2013, 0002
 GUID, Test 3 in Old Yr, 2013-12-26 09:00:00.000, 2013, 0003
 ...., ................, ......................., ...., N
 GUID, Test N in Old Yr, 2013-12-31 09:00:00.000, 2013, N+1
 GUID, Test 1 in New Yr, 2014-01-01 11:00:00.000, 2014, 0001   <-- reset to 1 
```

我在想这将是一个自动增量列，但是基于这是新年的第一次测试，我将如何重置它？所以到目前为止我的**错误**解决方案是一个“而不是插入”触发器，定义如下：

```
 CREATE TRIGGER InsteadOfInsertTrigger ON dbo.TestTable
 INSTEAD OF INSERT AS
 BEGIN
      -- Get the year of the test request being inserted from the pseudo-insert table.
      DECLARE @TestYear INT;
      SET @TestYear = (SELECT YEAR(DateRequested) FROM inserted);

      -- Grab the maximum TestNumber from TestTable based on the year
      -- that we are inserting a record for.
      DECLARE @MaxTestNumber INT;
      SET @MaxTestNumber = (SELECT MAX(TestNumber) FROM dbo.TestTable WHERE TestYear = @TestYear);

      -- If this is the first test of the year being inserted it is a special case
      IF @MaxTestNumber IS NULL
      BEGIN
           SET @MaxTestNumber = 0;
      END;

      -- Here we take the MaxTestNumber, add 1 to it, and then pad it with 
      -- the appropriate number of zero's in front of it 
      DECLARE @TestNumber VARCHAR(4);
      SET @TestNumber = (SELECT RIGHT('0000' + CAST((@MaxTestNumber + 1) AS VARCHAR(4)), 4));

      INSERT INTO dbo.TestTable(Name, DateRequested, TestNumber)
      SELECT Name, DateRequested, @TestNumber FROM inserted;

 END;
 GO 
```

现在这里有一些 DML 显示了正在运行的触发器：

```
 INSERT INTO TestTable(Name, DateRequested)
 VALUES('Some Test', '05-05-2013');
 INSERT INTO TestTable(Name, DateRequested)
 VALUES('Some Other Test', '12-25-2013');
 INSERT INTO TestTable(Name, DateRequested)
 VALUES('Blah Blah', '12-31-2013');
 INSERT INTO TestTable(Name, DateRequested)
 VALUES('Foo', '01-01-2014');
 SELECT * FROM TestTable ORDER BY TestYear ASC, TestNumber ASC; 
```

[![查询结果图片](https://i.stack.imgur.com/7XerH.jpg)](https://i.stack.imgur.com/7XerH.jpg)

因此，您可以看到我的触发器适用于单行插入，但敏锐的眼睛将能够判断它不适用于多行插入。

```
 CREATE TABLE TempTestTable
 (
      Name VARCHAR(75) NOT NULL,
      DateRequested DATETIME NOT NULL DEFAULT GETDATE()
 );
 GO

 INSERT INTO TempTestTable(Name, DateRequested)
 VALUES('Test1', '01-01-2012');
 INSERT INTO TempTestTable(Name, DateRequested)
 VALUES('Test2', '12-25-2012');
 INSERT INTO TempTestTable(Name, DateRequested)
 VALUES('Test3', '01-01-2013');
 INSERT INTO TempTestTable(Name, DateRequested)
 VALUES('Test4', '01-01-2014');

 -- This doesnt work because it is a multi-row insert.
 INSERT INTO TestTable(Name, DateRequested)
 SELECT Name, DateRequested FROM TempTestTable; 
```

## 我的问题

我意识到我可能可以使用存储过程来处理这个问题，并在更新表时强制用户使用存储过程，但我想格外小心并防止系统管理员能够使用不正确的“TestNumber”直接插入表。

所以 StackOverflow，我的问题是我怎样才能做到这一点？我会在我的替代插入触发器中使用光标吗？我正在寻找替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:53:56.487

这不是我写过的最整洁的东西，但似乎可以完成这项工作：

```
CREATE TRIGGER InsteadOfInsertTrigger ON dbo.TestTable
 INSTEAD OF INSERT AS
 BEGIN
    ;With Years as (
        select i.TestYear,
               COALESCE(MAX(tt.TestNumber),0) as YMax
        from inserted i left join TestTable tt
               on i.TestYear = tt.TestYear 
        group by i.TestYear
    ), Numbered as (
        select i.ID,i.Name,i.DateRequested,
               RIGHT('000' + CONVERT(varchar(4),
                  ROW_NUMBER() OVER (PARTITION BY i.TestYear
                                     ORDER BY i.DateRequested,i.Id) + YMax)
               ,4) as TestNumber
        from inserted i
            inner join
            Years y
                on
                    i.TestYear = y.TestYear
    )
    insert into TestTable (Id,Name,DateRequested,TestNumber)
    select Id,Name,DateRequested,TestNumber from Numbered;
 END; 
```

第一个[CTE](http://msdn.microsoft.com/en-gb/library/ms190766%28v=sql.105%29.aspx) ( `Years`) 查找感兴趣的每年使用次数最多的数字。然后，第二个 CTE ( `Numbered`) 使用这些值来[`ROW_NUMBER()`](http://msdn.microsoft.com/en-GB/library/ms186734.aspx)抵消`inserted`. 我选择了`ORDER BY`列，`ROW_NUMBER()`以便它尽可能具有确定性。

（我有一段时间对一件事感到困惑，但事实证明我可以使用`TestYear`from`inserted`而不必重复`YEAR(DateRequested)`公式）

# c# - 通过 HTTPS 发布 JSON

> ID：16105680
> 
> 赞同：1
> 
> 时间：2013-04-19T13:23:32.393
> 
> 标签：c#, json, web-services, https

过去我已经通过 HTTP 成功调用了 JSON Web 服务，但是现在我必须通过 HTTPS 进行 JSON POST。

我尝试使用适用于 HTTP 的代码，只是将被调用的 url 更改为 https，但它不起作用。

这是我正在使用的代码...

```
WebRequest wrGETURL;
wrGETURL = WebRequest.Create("https://apitest.example.com/geo/coverage/v1/?appId=2644571&appKey=836621d715b6ce4db5f007d8fa2214f");
wrGETURL.Method = "POST";
Stream objStream;
objStream = wrGETURL.GetResponse().GetResponseStream();
StreamReader objReader = new StreamReader(objStream);
string responseFromServer = objReader.ReadToEnd(); 
```

我在提琴手看到的错误消息是：

fiddler.network.https> 无法保护 apitest.example.com 的现有连接。对 SSPI 的调用失败，请参阅内部异常。InnerException: System.ComponentModel.Win32Exception (0x80004005): 客户端和服务器无法通信，因为它们没有共同的算法

任何人都可以帮我解决通过 HTTPS 拨打电话需要做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T03:09:00.623

您是否需要对服务器证书进行身份验证或回调？在大多数情况下，这对我有用：

```
 var httpWebRequest = (HttpWebRequest)WebRequest.Create("https://someurl/");
        httpWebRequest.ContentType = "application/json";
        httpWebRequest.Method = "POST";

        // Create NetworkCredential Object 
        NetworkCredential admin_auth = new NetworkCredential("username", "password");

        // Set your HTTP credentials in your request header
        httpWebRequest.Credentials = admin_auth;

        // callback for handling server certificates
        ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

        using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
        {
            string json = "{\"name\":\"TEST_123\"}";
            streamWriter.Write(json); 
            streamWriter.Flush();
            streamWriter.Close();
            var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
            using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
            {
                var result = streamReader.ReadToEnd();
                Console.WriteLine(result);
            }
       } 
```

# ios - 如果我要创建完全自定义的 getter 和 setter 方法，我还需要 @property 声明吗？

> ID：16105681
> 
> 赞同：2
> 
> 时间：2013-04-19T13:23:32.440
> 
> 标签：ios, objective-c, properties, getter-setter

所以我想在一个类上有一个“属性”，但我不想只将该属性保存在内存中，我想将它实际存储为 NSUserDefault 并在获得该属性时检索它。

因此，我有这样的方法：

```
- (void)setUser:(User *)user {
    // actually set the user as an NSUserDefault here
}

- (User *)user {
    // get the user from the NSUserDefaults and return it
} 
```

当我正在构建这些方法来为我完成工作时，`@property`在头文件中声明是否有任何意义？

我收到混杂的消息。有人说您应该声明该属性以强制人们使用 getter/setter 方法，但我不明白为什么人们不会被迫使用这些方法，如果它们都是可用的？

只是想澄清一下。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:30:50.117

您应该使用`@property`，因为这是在 Objective-C 对象上定义属性的现代方式，即使您自己实现了 setter 和 getter。

不是依赖约定，而是让编译器更清楚你的意图。在 IDE 中使用点表示法时，您还将获得更好的语法突出显示（尽管这可以说是 Xcode 错误）。

# javascript - 使用构造函数属性覆盖 JavaScript 中的方法

> ID：16105682
> 
> 赞同：1
> 
> 时间：2013-04-19T13:23:32.813
> 
> 标签：javascript

这是在 JavaScript 中实现方法覆盖的好/安全的跨浏览器方式吗？：

```
function Person(firstName, lastName)
{
  this.firstName = firstName;
  this.lastName = lastName;
};

Person.prototype.sayHi = function()
{
  return "Hi, my name is " + this.firstName;
};

function Employee(firstName, lastName, position)
{
  Person.call(this, firstName, lastName);
  this.position = position;
};

Employee.prototype = Object.create(Person.prototype);

Employee.prototype.sayHi = function()
{
  return this.constructor.prototype.sayHi() + " I'm a " + this.position;
} 
```

我也可以写：

```
Employee.prototype.sayHi = function()
{
  return Person.prototype.sayHi() + " I'm a " + this.position;
} 
```

但是对于这个解决方案，我指的是直接方法，或者

```
Employee.prototype.sayHi = function()
{
  return this.__proto__.sayHi() + " I'm a " + this.position;
} 
```

但这一个很糟糕，而且不是跨浏览器。

**编辑：我假设 Object.create 是跨浏览器，因为我可以使用 shim**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:34:09.517

不。

> ```
> Employee.prototype = Object.create(Person.prototype); 
> ```

[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)旧浏览器不支持，但您可以填充它。

> ```
> Employee.prototype.sayHi = function() {
>     return this.constructor.prototype.sayHi() + " I'm a " + this.position;
> } 
> ```

我不会用那个。您希望`this.constructor`成为`Person`您继承的对象，但情况可能并非如此。实际上，设置 是一个好习惯`Employee.prototype.constructor = Employee`，这会导致递归堆栈溢出到您的方法。

相反，您应该明确引用要使用的函数：

```
return Person.prototype.sayHi.call(this) + " I'm a " + this.position; 
```

如果你想要它动态，你会使用

```
return Object.getPrototypeOf(Employee.prototype).sayHi.call(this) + " I'm a " + this.position; 
```

但请注意，[`Object.getPrototypeOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)旧浏览器不支持此功能。因此，如果您需要跨浏览器和 DRY 方式，请使用模块模式：

```
(function(proto, super) {
     proto.sayHi = function() {
         return super.sayHi.call(this) + " I'm a " + this.position;
     };
     …
})(Employee.prototype, Person.prototype); 
```

或揭示原型模式：

```
Employee.prototype = (function(super) {
     var proto = Object.create(super);
     proto.sayHi = function() {
         return super.sayHi.call(this) + " I'm a " + this.position;
     };
     …
     return proto;
})(Person.prototype); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:35:27.743

您不应依赖 的`constructor`属性`prototype`来调用父函数，因为通常该属性应指向子构造函数。

```
Employee.prototype = Object.create(Person.prototype);
Employee.prototype.constructor = Employee; 
```

还有一些其他方法可以安全地访问父函数，例如`parent`直接引用原型，就像您在第二个示例中尝试做的那样，但是您的操作方式有问题。

如果您在`sayHi`不使用`call`or的情况下调用`apply`，`this`将在函数调用期间指向`Person.prototype`，这不是您想要的。您应该`sayHi`通过将上下文对象设置为当前员工实例来调用，如下所示：

```
Employee.prototype.sayHi = function() {
  return Person.prototype.sayHi.call(this) + " I'm a " + this.position;
}; 
```

另一种方法是在子原型中存储对父原型的引用。

```
 Employee.prototype.super = Person.prototoype;

 Employee.prototype.sayHi = function() {
    return this.super.sayHi.call(this) + " I'm a " + this.position;
 }; 
```

我见过的另一种有趣的方法是将子原型的每个函数包装在一个函数中，该函数动态设置对对象实例上父函数的引用，这样您就只能`this.parent()`用来调用该函数。但是我不推荐这种解决方案，因为它会降低性能并增加内存使用量。

我创建了一个**[jsFiddle](http://jsfiddle.net/Tke3E/)**来演示这个概念。

# asp.net - 对网格视图 OnRowDeleting 事件感到困惑？

> ID：16105684
> 
> 赞同：3
> 
> 时间：2013-04-19T13:23:37.987
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, gridview

今天，当我从网格视图中删除基于 id 的记录时，我遇到了一个问题，我为此使用了 OnRowCommand 事件。这是我的gridview代码：

```
<asp:GridView ID="gridShow" runat="server" AutoGenerateColumns="False" PageSize="5"
            AllowPaging="true" ShowHeader="false" OnRowCommand="s_index" OnRowDeleting="gridShow_RowDeleting">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:TextBox ID="txtID" runat="server" Text='<%#Eval("ID") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField ItemStyle-Width="15%">
                    <ItemTemplate>
                        <asp:TextBox ID="txtDescription" runat="server" Text='<%#Eval("RollNumber") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:TextBox ID="txtFname" runat="server" Text='<%#Eval("FirstName") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField ItemStyle-Width="15%">
                    <ItemTemplate>
                        <asp:TextBox ID="txtLname" runat="server" Text='<%#Eval("LastName") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField ItemStyle-Width="15%">
                    <ItemTemplate>

                        <asp:TextBox ID="txtEmail" runat="server" Text='<%#Eval("Email") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField ItemStyle-Width="15%">
                    <ItemTemplate>
                        <asp:Label ID="lblStatus" runat="server"></asp:Label>
                        <asp:HiddenField ID="hdnStatus" runat="server" Value='<%#Eval("UserName") %>' />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton ID="lb" runat="server" Text="Delete" CommandName="delete" CommandArgument='<%#Eval("ID") %>'></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

这是我的 C# 代码：

```
 protected void s_index(object sender, GridViewCommandEventArgs e)
 {
     if (e.CommandName == "delete")
     {
         oSRegisterBLL.BLLdelete(Convert.ToInt32(e.CommandArgument));
         gview();
      }
  }
  protected void gridShow_RowDeleting(object sender, GridViewDeleteEventArgs e)
  {
  } 
```

我通过在我的网格视图上添加 OnRowDeleting 事件并在后面的页面上添加该事件的定义成功地完成了这项任务，但是当我第一次删除这个事件时，我已经知道并发出“ASP.datashow_aspx”不包含“gridShow_RowDeleting”的定义并且找不到接受“ASP.datashow_aspx”类型的第一个参数的扩展方法“gridShow_RowDeleting”（您是否缺少 using 指令或程序集引用？）“

我很困惑为什么要使用 onrowcommand 事件在网格视图上添加 OnRowDeleting 事件？为什么我很困惑，因为如果我没有对这个事件做任何工作，那么为什么要使用这个事件？有没有办法只使用 onrowcommand 事件？或者添加 onrowdeleting 事件对于从 gridview 中删除记录是必不可少的？我想为此澄清一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:27:04.517

您的 aspx 标记`GridView`已在此处声明事件处理程序：

```
OnRowDeleting="gridShow_RowDeleting" 
```

因此，当您尝试将其从 coedebehind 中删除时，您将得到该异常。因此，只需删除事件处理程序，您就可以将其从代码隐藏中删除。

**编辑**

有一个删除按钮，甚至是一个`GridView`带有`CommandName`删除的常规按钮（这里就是这种情况），将自动尝试触发`OnRowDeleting`。

因此，即使您不使用它，也必须添加事件处理程序，或者您必须将其重命名`CommandName`为 eg `"DeleteUser"`，否则您会收到诸如“*未处理**的 GridView 'gridShow' 触发事件”之`RowDeleting`*类的异常。

# asp.net-mvc - 实体框架 - 仅考虑满足特定条件的记录

> ID：16105699
> 
> 赞同：3
> 
> 时间：2013-04-19T13:24:33.130
> 
> 标签：asp.net-mvc, entity-framework, multi-user

我正在开发一个使用一个数据库的项目（Web 应用程序 - ASP.NET MVC）。到目前为止，说数据库为一个客户端保存记录，但现在我需要将其转换为多客户端数据库。这个想法是我们在数据库中的每个表中添加一个列（例如 CompanyId），并且在查询中只考虑具有特定 CompanyId 的记录。

不幸的是，该项目现在已经相当发达，为每个服务调用、每个 Linq 查询等添加额外的参数真的很麻烦。我知道从一开始就应该以这种方式（多客户端）来处理它，现在我为此付出了代价。

所以我有两个选择：

1.  单一数据库 - 问题是如何告诉 EF 只考虑具有 CompanyId = X 的记录，而不是在每个 Linq 查询中写入 Where(i => i.CompanyId == X) 。

2.  一个 DB = 一个客户 - 为每个客户创建一个 db 似乎是一个很好的解决方案，但在我们的项目中，用户可以访问多个数据库（客户可以与许多公司相关联，并被要求在他想要的公司的上下文中进行选择一起工作，他可以​​自由地改变它）。pronblem 是我真的不知道如何在运行时更改连接字符串，我不知道这个解决方案是否可以。

您能否告诉我哪个选项更好以及如何处理？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:40:25.533

为什么你没有为每家公司提供单独但相同的模式。然后，您可以根据所选公司注入正确的数据库上下文对象。通过这种方式，您可以避免主要的数据库编辑，也可以避免公司 id 的条件。

# javascript - 网页加载“缩放”

> ID：16105700
> 
> 赞同：0
> 
> 时间：2013-04-19T13:24:40.733
> 
> 标签：javascript, android, html, mobile

我正在开发一个移动网站，无论出于何种原因，页面似乎每次都被放大了。我可以在触摸手机上轻松缩放它，它看起来差不多，但我想知道是否有人对如何防止这种情况发生有任何想法。

我已经在 Android 和 iPhone 上测试过这个问题，而且似乎两者都发生了。

除了页面加载后我无法缩放之外，这似乎并没有帮助

```
<meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1 minimum-scale=1"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:32:46.257

您可以尝试使用它：该块捏缩放

```
<meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:35:35.033

我会推荐以下元，因为它设置页面加载缩放，而不是阻止缩放功能。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

-编辑-我实际上并没有注意到您的元数据中已经有 initial-scale=1 。尝试改用“1.0”，我不确定它是否会有所作为。

# python - 正则表达式提取斜杠前的单词

> ID：16105706
> 
> 赞同：1
> 
> 时间：2013-04-19T13:25:00.007
> 
> 标签：python, regex

我想从下面的短语中提取两个单词 FIRST 和 SECOND，我尝试使用这个正则表达式来获取斜线之前的单词，但它不起作用：/顺便说一句，它在 python 上：

```
 import re 

    data = "12341    O:EXAMPLE (FIRST:/xxxxxx) R:SECOND/xxxxx id:1234"
    data2 = "12341    O:EXAMPLE:FIRST2:/xxxxxx) R:SECOND2/xxxxx id:1234"

    result = re.findall(r'[/]*',data)
    result2 = re.findall(r'[/]*',data2)
    print result,result2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:27:01.707

尝试

```
result = re.findall(r'\w+:?(?=/)',data) 
```

**解释：**

```
\w+   # Match one or more alphanumeric characters
:?    # Match an optional colon
(?=/) # Assert that the next character is a slash 
```

如果您不希望冒号成为匹配项的一部分（您的问题对此不清楚），请将可选冒号放入前瞻断言中：

```
result = re.findall(r'\w+(?=:?/)',data) 
```

# java - 在流程中动态设置变量不起作用

> ID：16105713
> 
> 赞同：2
> 
> 时间：2013-04-19T13:25:15.683
> 
> 标签：java, cxf, mule, ws-security

我需要使用 JAX WS 客户端访问服务。我需要在调用时提供身份验证令牌。

我使用以下配置在我的 Mule 流程中传递了一个令牌，但它不起作用。

```
<cxf:jaxws-client operation="addProduct"
     clientClass="org.example.productservice.ProductSService"
     port="ProductSvcPort" >            
        <cxf:ws-security>
            <cxf:ws-config>
                <cxf:property key="action" value="UsernameToken" />
                <cxf:property key="user" value="#[flowVars['token']]" />
                ........... 
```

请帮助我了解这里缺少什么。我可以看到调用变量“token”很好并且存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:16:35.607

不幸的是，这是一个已知问题： http: [//www.mulesoft.org/jira/browse/MULE-6796](http://www.mulesoft.org/jira/browse/MULE-6796)

# ruby - Rails 3 我想从另一个字符串中删除部分字符串

> ID：16105714
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:25:17.733
> 
> 标签：ruby, ruby-on-rails-3, string, gsub

我正在使用 rails 3 和 ruby​​ 1.9.3 我想要删除

> “[\

部分来自

> "[\"NAS1149C0363R"

我正在使用 sub 方法但无法实现所以请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:31:22.347

也许这会有所帮助：

`"[\"NAS1149C0363R".sub(/\[\"/,'')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:54:18.923

您可能的意思是要删除`[\"`，而不是`"[\`.

```
"[\"NAS1149C0363R".delete('["') 
```

# jenkins - Jenkins 参数化构建 - 作为其他参数函数的参数

> ID：16105717
> 
> 赞同：0
> 
> 时间：2013-04-19T13:25:29.493
> 
> 标签：jenkins, continuous-integration

我正在尝试在我的 Jenkins 参数化构建中为参数定义这些默认值：

```
p1 = x
p2 = ${p1}y // should evaluate to "xy" 
```

问题是，当我构建时，`p2`设置为`${p1}y`而不是`xy`.

![Jenkins 作业配置 (http://<domain>/jenkins/job/<job-name>/configure)](https://i.stack.imgur.com/kZCRN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-18T07:55:37.210

您可以添加 Pre-Built 步骤，而不是使用字符串参数，在其中执行 Execute Shell。输入以下内容。

```
echo p2=${p1}y 
```

所以 p2 可以在项目中访问。当你想使用相同的，使用**${p2}**

# c# - DataGridView 更改单元格背景颜色

> ID：16105718
> 
> 赞同：20
> 
> 时间：2013-04-19T13:25:36.653
> 
> 标签：c#, winforms, datagridview

我有以下代码：

```
private void dgvStatus_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    foreach (DataGridViewRow row in dgvStatus.Rows)
    {
        row.Cells[color.Index].Style.BackColor = Color.FromArgb(((GesTest.dsEssais.FMstatusAnomalieRow)row.DataBoundItem).iColor);
    }
} 
```

我正在尝试从背景颜色列设置每个单元格的背景颜色。这不起作用颜色永远不会改变。知道为什么吗？

我一直在环顾四周，但没有发现任何有用的东西

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-19T13:36:50.783

只需创建一个新的[DataGridViewCellStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellstyle(v=vs.110).aspx)对象，设置其背景颜色，然后将单元格的样式分配给它：

```
 DataGridViewCellStyle style = new DataGridViewCellStyle();
    style.BackColor = Color.FromArgb(((GesTest.dsEssais.FMstatusAnomalieRow)row.DataBoundItem).iColor);
    style.ForeColor = Color.Black;
    row.Cells[color.Index].Style = style; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-19T14:08:06.853

我终于设法让它工作了。这里的代码：

```
private void dgvStatus_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex != color.Index)
        return;

    e.CellStyle.BackColor = Color.FromArgb(int.Parse(((DataRowView)dgvStatus.Rows[e.RowIndex].DataBoundItem).Row[4].ToString()));
} 
```

如果有人知道更好的方法，请不要犹豫发布它。我愿意接受建议

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-02T11:54:24.603

如果您仍然对*为什么*这最初对您不起作用感兴趣：

您看不到对单元格样式所做的更改的原因是您在显示表单*之前*进行了这些更改，因此它们被忽略了。

在此处建议的事件中更改单元格样式可以完成这项工作，但它们被多次调用，导致您的样式更改发生的次数比您希望的多，因此效率不高。

为了解决这个问题，要么更改代码中显示表单的点之后的样式，要么订阅 Shown 事件，然后将更改放在那里（此事件的调用次数明显少于建议的其他事件）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-17T15:26:42.803

```
dataGridView1.Rows[i].Cells[7].Style.BackColor = Color.LightGreen; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-08T20:08:30.117

```
int rowscount = dataGridView1.Rows.Count;         

for (int i = 0; i < rowscount; i++)
{            
    if (!(dataGridView1.Rows[i].Cells[8].Value == null))
    {
        dataGridView1.Rows[i].Cells[8].Style.BackColor = Color.LightGoldenrodYellow;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-22T18:45:44.633

尝试以下方法（在 GridView 的 RowDataBound 方法中）：

```
protected void GridViewUsers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    // this will only change the rows backgound not the column header 

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Cells[0].BackColor = System.Drawing.Color.LightCyan; //first col
        e.Row.Cells[1].BackColor = System.Drawing.Color.Black; // second col
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-23T13:38:58.623

类似于所示和提到的：

**注意：**考虑到单元格将在 DataGridView 控件可见后更改其颜色**（仅） 。**因此，一种实用的解决方案是使用：

> VisibleChanged 事件

如果您希望在创建新行时保持您的风格；还订阅：

> 行添加事件

**示例如下：**

```
///<summary> Instantiate the DataGridView Control. </summary>
private DataGridView dgView = new DataGridView;

///<summary> Method to configure DataGridView Control. </summary>
private void DataGridView_Configuration()
{
    // In this case the method just contains the VisibleChanged event subscription.

    dgView.VisibleChanged += DgView_VisibleChanged;

    // Uncomment line bellow in case you want to keep the style when creating new rows.
    // dgView.RowsAdded += DgView_RowsAdded;
}

///<summary> The actual Method that will re-design (Paint) DataGridView Cells. </summary>
 private void DataGridView_PaintCells()
 {
     int nrRows = dgView.Rows.Count;
     int nrColumns = dgView.Columns.Count;
     Color green = Color.LimeGreen;

     // Iterate over the total number of Rows
     for (int row = 0; row < nrRows; row++)
     {
         // Iterate over the total number of Columns
         for (int col = 0; col < nrColumns; col++) 
         {
             // Paint cell location (column, row)
             dgView[col, row].Style.BackColor = green;
         }
     }
 }

///<summary> The DataGridView VisibleChanged Event. </summary>
private void DataGridView_VisibleChanged(object sender, EventArgs e)
{
    DataGridView_PaintCells();
}

/// <summary> Occurrs when a new Row is Created. </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void DataGridView_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{ 
    DataGridView_PaintCells(); 
} 
```

**最后：**只需调用 DataGridView_Configuration() （方法），
**即：**表单加载事件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-29T13:11:16.470

```
protected void grdDataListeDetay_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (e.Row.Cells[3].Text != "0")
        {
            for (int i = 0; i <= e.Row.Cells.Count - 1; i++)
            {
                e.Row.Cells[i].BackColor = System.Drawing.Color.Beige;
            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-05T15:25:48.240

您可以使用[`VisibleChanged`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.visiblechanged?view=netframework-4.8)事件处理程序。

```
private void DataGridView1_VisibleChanged(object sender, System.EventArgs e)
{
    var grid = sender as DataGridView;
    grid.Rows[0].Cells[0].Style.BackColor = Color.Yellow;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-08-20T05:21:09.130

```
dataGridView1[row, col].Style.BackColor = System.Drawing.Color.Red; 
```

# c# - 如何检查文本框是否仅以字母开头？

> ID：16105723
> 
> 赞同：0
> 
> 时间：2013-04-19T13:25:54.377
> 
> 标签：c#, wpf

我想从文本框中的字母开始。如何检查文本框是否仅以字母开头？例如：

*   N4534——真
*   NN435——真
*   2N645——错误
*   ?N645 -- 错误

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T13:29:57.670

尝试这个

```
string str = "N4535";
bool isLetter = !String.IsNullOrEmpty(str) && Char.IsLetter(str[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:09:48.813

```
 string input = "N4534 ";

    Regex reg = new Regex("^[a-zA-z].*$"); 

    // Match the input and write results
    Match match = reg.Match(input);

    return match.Success; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:35:39.137

1> 创建一个行为，如下[所示](http://wpftutorial.net/Behaviors.html)

2> 订阅 TextChanged 事件。

3> 应用正则表达式（例如“^[a-zA-z].*$”）

4> 如果 RegEx 返回 false，则为明文。

```
<TextBox Text="{Binding ...}" >
  <e:Interaction.Behaviors>
    <b:AlphaTextBehavior/>
 </e:Interaction.Behaviors>
</TextBox>

public class DragBehavior : Behavior<TextBox>
{

    protected override void OnAttached()
    {
      // AssociatedObject.TextChanged += 
    }
} 
```

# php - 未定义的索引：php中的id

> ID：16105733
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:26:29.473
> 
> 标签：php, indexing, undefined

我在 PHP 代码中遇到问题。我从电子书中得到了一些代码，但是当我尝试运行系统时，它给出了一些错误。我通过给出适当的引号修复了一些错误，但现在我遇到了一些其他错误。

如果有人帮助我解决以下错误，我会非常高兴：

**注意：未定义的索引：第 4 行 C:\xampp\htdocs\auction\index.php 中的 id**

这是我的 index.php 代码：

```
<?php
require("config.php");
require("functions.php");
$validid = pf_validate_number($_GET['id'], "value", $config_basedir);
require("header.php");
if($validid == 0) {
$sql = "SELECT items.* FROM items WHERE dateends > NOW()";
}
else {
$sql = "SELECT * FROM items WHERE dateends > NOW()
AND cat_id = " . $validid . ";";
}
$result = mysql_query($sql);
$numrows = mysql_num_rows($result);

echo "<h1>Items available</h1>";
echo "<table cellpadding='5'>";
echo "<tr>";
echo "<th>Image</th>";
echo "<th>Item</th>";
echo "<th>Bids</th>";
echo "<th>Price</th>";
echo "</tr>";

if($numrows == 0) {
echo "<tr><td colspan=4>No items!</td></tr>";
}

else {
while($row = mysql_fetch_assoc($result)) {
$imagesql = "SELECT * FROM images WHERE
item_id = " . $row['id'] . " LIMIT 1";
$imageresult = mysql_query($imagesql);
$imagenumrows = mysql_num_rows($imageresult);
echo "<tr>";
if($imagenumrows == 0) {
echo "<td>No image</td>";
}
else {
$imagerow = mysql_fetch_assoc($imageresult);
echo "<td><img src='./images/". $imagerow['name'] . "' width='100'></td>";
}
echo "<td>";
echo "<a href='itemdetails.php?id="
. $row['id'] . "'>" . $row['name'] . "</a>";
if($_SESSION['USERID'] == $row['user_id']) {
echo " - [<a href='edititem.php?id="
. $row['id'] . "'>edit</a>]";
}
echo "</td>";

$bidsql = "SELECT item_id, MAX(amount) AS
highestbid, COUNT(id) AS numberofbids FROM bids
WHERE item_id=" . $row['id'] . " GROUP BY item_id;";
$bidresult = mysql_query($bidsql);
$bidrow = mysql_fetch_assoc($bidresult);
$bidnumrows = mysql_num_rows($bidresult);
echo "<td>";
if($bidnumrows == 0) {
echo "0";
}
else {
echo $bidrow['numberofbids'] . "</td>";
}
echo "<td>" . $config_currency;
if($bidnumrows == 0) {
echo sprintf('%.2f', $row['startingprice']);
}
else {
echo sprintf('%.2f', $bidrow['highestbid']);
}

echo "</td>";
echo "<td>" . date("D jS F Y g.iA",
strtotime($row['dateends'])) . "</td>";
echo "</tr>";
}
}
echo "</table>";
require("footer.php");
?> 
```

你们中的一些人问，id 是从哪里来的。我不知道，但我在其他文件中搜索过，它们是：

bar.php：

```
<?php
require("header.php");
$catsql = "SELECT * FROM categories ORDER BY category ASC;";
$catresult = mysql_query($catsql);
echo "<h1>Categories</h1>";
echo "<ul>";
echo "<li><a href='index.php'>View All</a></li>";
while($catrow = mysql_fetch_assoc($catresult)) {
echo "<li><a href='index.php?id=". $catrow['id'] . "'>" . $catrow['category']. "</a>                    </li>";
   }
echo "</ul>";

?> 
```

header.php：

```
<?php
session_start();
require("config.php");
$db = mysql_connect($dbhost, $dbuser, $dbpassword);
mysql_select_db($dbdatabase, $db);
?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01
Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title><?php echo $config_forumsname; ?></title>
<link rel="stylesheet" href="stylesheet.css" type="text/css" />
</head>
<body>
<div id="header">
<h1>BidTastic Auctions</h1>
<div id="menu">
<a href="index.php">Home</a>
<?php
if(isset($_SESSION['USERNAME']) == TRUE) {
echo "<a href='logout.php'>Logout</a>";
}
else {
echo "<a href='login.php'>Login</a>";
}
?>
<a href="newitem.php">New Item</a>
</div>
<div id="container">
<div id="bar">
<?php require("bar.php"); ?>
</div>
<div id="main"> 
```

itemdetails.php

```
<?php
session_start();
include(“config.php”);
include(“functions.php”);
$db = mysql_connect($dbhost, $dbuser, $dbpassword);
mysql_select_db($dbdatabase, $db);
$validid = pf_validate_number($_GET[‘id’], “redirect”, $config_basedir);

if($_POST[‘submit’]) {
if(is_numeric($_POST[‘bid’]) == FALSE) {
header(“Location: “ . $config_basedir
. “itemdetails.php?id=” . $validid . “&amp;error=letter”);
}

$theitemsql = “SELECT * FROM items WHERE id = “ . $validid . “;”;
$theitemresult = mysql_query($theitemsql);
$theitemrow = mysql_fetch_assoc($theitemresult);
$checkbidsql = “SELECT item_id, max(amount) AS
highestbid, count(id) AS number_of_bids FROM
bids WHERE item_id=” . $validid . “ GROUP BY item_id;”;
$checkbidresult = mysql_query($checkbidsql);
$checkbidnumrows = mysql_num_rows($checkbidresult);

if($checkbidnumrows == 0) {
if($theitemrow[‘startingprice’] > $_POST[‘bid’]) {
header(“Location: “ . $config_basedir
. “itemdetails.php?id=” . $validid . “&amp;error=lowprice#bidbox”);
}
}

else {
$checkbidrow = mysql_fetch_assoc($checkbidresult);
if($checkbidrow[‘highestbid’] > $_POST[‘bid’]) {
header(“Location: “ . $config_basedir . “itemdetails.php?id=” .
$validid . “&amp;error=lowprice#bidbox”);
}
}

$inssql = “INSERT INTO bids(item_id, amount, user_id) VALUES(“
. $validid
. “, “ . $_POST[‘bid’]
. “, “ . $_SESSION[‘USERID’]
. “);”;
mysql_query($inssql);

header(“Location: “ . $config_basedir
. “itemdetails.php?id=” . $validid);
}
else {

$validid = pf_validate_number($_GET[‘id’], “redirect”,
$config_basedir);
require(“header.php”);
$itemsql = “SELECT UNIX_TIMESTAMP(dateends) AS dateepoch,
items.* FROM items WHERE id = “ . $validid . “;”;
$itemresult = mysql_query($itemsql);
$itemrow = mysql_fetch_assoc($itemresult);
$nowepoch = mktime();
$rowepoch = $itemrow[‘dateepoch’];
if($rowepoch > $nowepoch) {
$VALIDAUCTION = 1;
}
echo “&lt;h2>” . $itemrow[‘name’] . “&lt;/h2>”;

$imagesql = “SELECT * FROM images WHERE item_id = “ . $validid . “;”;
$imageresult = mysql_query($imagesql);
$imagenumrows = mysql_num_rows($imageresult);

$bidsql = “SELECT item_id, MAX(amount) AS highestbid,
COUNT(id) AS number_of_bids FROM bids WHERE item_id=”
. $validid . “ GROUP BY item_id;”;
$bidresult = mysql_query($bidsql);
$bidnumrows = mysql_num_rows($bidresult);

echo “&lt;p>”;
if($bidnumrows == 0) {
echo “&lt;strong>This item has had no bids</strong>
- <strong>Starting Price</strong>: “ . $config_currency
. sprintf(‘%.2f’, $itemrow[‘startingprice’]);
}
else {
$bidrow = mysql_fetch_assoc($bidresult);

echo “&lt;strong>Number Of Bids</strong>: “
. $bidrow[‘number_of_bids’] . “
- <strong>Current Price</strong>: “ . $config_currency
. sprintf(‘%.2f’, $bidrow[‘highestbid’]);
}

echo “ - <strong>Auction ends</strong>: “
. date(“D jS F Y g.iA”, $rowepoch);

echo “&lt;/p>”;
if($imagenumrows == 0) {
echo “No images.”;
}
else {
while($imagerow = mysql_fetch_assoc($imageresult)) {
echo “&lt;img src=’./images/” . $imagerow[‘name’] .”’ width=’200’&gt;”;
}
}

echo “&lt;p>” . nl2br($itemrow[‘description’]) . “&lt;/p>”;

echo “&lt;a name=’bidbox’&gt;”;
echo “&lt;h2>Bid for this item</h2>”;

if(isset($_SESSION[‘USERNAME’]) == FALSE) {
echo “To bid, you need to log in. Login
<a href=’login.php?id=” . $validid . “&amp;ref=addbid’&gt;here</a>.”;
}

else {
if($VALIDAUCTION == 1) {
echo “Enter the bid amount into the box below.”;
echo “&lt;p>”;
switch($_GET[‘error’]) {
case “lowprice”:
echo “The bid entered is too low.
Please enter another price.”;
break;
case “letter”:
echo “The value entered is not a number.”;
break;
}
?>

<form action=”&lt;?php echo pf_script_with_get($SCRIPT_NAME);
?>” method=”post”&gt;
<table>
<tr>
<td><input type=”text” name=”bid”&gt;</td>
<td><input type=”submit” name=”submit” value=”Bid!”&gt;</td>
</tr>
</table>
</form>

<?php
}
else {
echo “This auction has now ended.”;
}

$historysql = “SELECT bids.amount, users.username FROM bids,
users WHERE bids.user_id = users.id AND item_id = “
. $validid . “ ORDER BY amount DESC”;
$historyresult = mysql_query($historysql);
$historynumrows = mysql_num_rows($historyresult);
if($historynumrows >= 1) {
echo “&lt;h2>Bid History</h2>”;
echo “&lt;ul>”;
while($historyrow = mysql_fetch_assoc($historyresult)) {
echo “&lt;li>” . $historyrow[‘username’] . “ - “ .
$config_currency . sprintf(‘%.2f’, $historyrow[‘amount’]) . “&lt;/li>”;
}
echo “&lt;/ul>”;
    }
}
}
require(“footer.php”);
?> 
```

函数.php

```
<?php
function pf_script_with_get($script) {
$page = $script;
$page = $page . "?";
foreach($_GET as $key => $val) {
$page = $page . $key . "=" . $val . "&";
}

return substr($page, 0, strlen($page)-1);
}

function pf_validate_number($value, $function, $redirect) {
if(isset($value) == TRUE) {
if(is_numeric($value) == FALSE) {
$error = 1;
}
if($error == 1) {
header("Location: " . $redirect);
}
else {
$final = $value;
}
}
else {
if($function == 'redirect') {
header("Location: " . $redirect);
}
if($function == "value") {
$final = 0;
}
}
return $final;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:28:55.357

您是否将查询字符串参数传递`id`给您的页面？像`index.php?id=xxx`什么？如果没有，`$_GET['id']`将不会被定义，并且您不能只是访问它。您必须先检查它是否存在，例如`array_key_exists`.

PHP 在其错误消息中非常非常清楚。当你访问一个数组时，你给它一个“索引”（在 之间的部分`[]`）并且该索引映射到一个值。PHP 告诉您索引`"id"`不存在于您在第 4 行访问的任何数组中。如果您查看第 4 行，您会看到只有一个数组在该行的一个位置被访问`$_GET`，并且您可以查看您使用的索引是`id`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:28:39.617

你有问题

```
$_GET['id'] 
```

你是怎么得到这个id的，它来自查询字符串吗？不要这么想。放置isset函数来检查id是否在url中。因此，要解决您的问题，请执行此操作

```
$validid = 0;
if (isset($_GET['id'])) {
    $validid = pf_validate_number($_GET['id'], "value", $config_basedir);
} 
```

把它放在你的 index.php 中

# javascript - 从所有内容中删除 CSS 文件，但“附加”到某个 div

> ID：16105735
> 
> 赞同：1
> 
> 时间：2013-04-19T13:26:45.890
> 
> 标签：javascript, jquery, css

假设我有一个包含 CSS 文件的文档，它适用于文档中的所有元素。是否可以删除和/或附加此文件，使其仅影响某个 div 而不是整个文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:37:21.447

我假设您有一个包含大量元素的大型 div，并且您希望仅将 css 文件中包含的大量样式规则应用于这些元素，因此使用 div id 选择器并不是那么简单。

HTML5 的一个鲜为人知的特性是**Scoped CSS**。它是样式块的属性。具有 scoped 属性的样式块将覆盖通常在头部中找到的全局样式（无论是在样式块中还是在链接样式表中），但仅限于同一父级中的兄弟/后代元素。

[http://dev.w3.org/html5/markup/style.html#style.attrs.scoped](http://dev.w3.org/html5/markup/style.html#style.attrs.scoped)

[http://css-tricks.com/saving-the-day-with-scoped-css/](http://css-tricks.com/saving-the-day-with-scoped-css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:29:39.933

您可以轻松地覆盖 css 样式

```
<style type="text/css" rel="stylesheet">
 #id_of_element{
    /* add styles */
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:32:29.447

不，您不能对在 DOM 中附加 css 文件的位置进行任何操作以使其适用于特定的 DIV。你能做什么，其他人已经回答了......给你的 div 一些 id 或类（或找到另一种唯一标识它的方法）并确保你所有的特定 CSS 都属于该选择器。

# ruby - HTTParty：未定义的方法“代码”错误

> ID：16105746
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:27:09.360
> 
> 标签：ruby, httparty

出现错误：./http.rb:13: # (NoMethodError) 的未定义方法“代码”

```
#!/usr/bin/ruby

require 'rubygems'
require 'httparty'

class Foo
  include HTTParty
end

# Simple get with full url
r = Foo.get('http://www.google.com/')

p r.code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:50:12.097

Include HTTParty 也将指定模块的方法代码添加到 Foo 类中。见[混音](http://www.tutorialspoint.com/ruby/ruby_modules.htm)！

```
module HTTParty
  module AllowedFormatsDeprecation
    def get
      #...
    end
  end
end 
```

将 HTTParty 混入 Foo 应该可以工作

# add-in - 如何在 Visual Studion 2008 中创建解决方案加载项

> ID：16105747
> 
> 赞同：0
> 
> 时间：2013-04-19T13:27:15.647
> 
> 标签：add-in

我正在尝试借助此链接创建解决方案加载项：http: [//msdn.microsoft.com/en-gb/library/vstudio/ms165621(v=vs.80)](http://msdn.microsoft.com/en-gb/library/vstudio/ms165621(v=vs.80))

然而，我一直在输。我仔细遵循这些指示，但我认为我认为缺少一些重要的东西。所以，这是我正在做的事情的顺序，也是我打算得到的：

1.  在插件向导的帮助下创建默认插件解决方案。因为它计划成为一个解决方案插件，所以我删除了 XML 声明文件。
2.  在属性选项卡中选中“注册为 COM 对象”。
3.  使用 regasm 将加载项注册为 Windows 注册表中的 com 对象。
4.  这就是麻烦开始的地方。据我了解，我必须将链接中的以下代码写入加载项类文件的 OnConnect 事件。好的，我已经做到了。构建项目，一切都很好。

但我不明白如何将此加载项与解决方案相关联。MSDN 说：“当 Visual Studio 加载解决方案时，它首先检查解决方案 (.sln) 文件以查看它是否引用加载项。如果是，它加载它们并调用与常规 Visual Studio 加载项相同的 IDTExtensibility2 方法。”

当我尝试调试加载项时，我打开了我的外部解决方案，但在我的 OnConnect 事件中没有任何触发，直到我在加载项管理器窗口中检查了加载项。

是有意如此，还是我在此步骤中遗漏了一些重要的东西。正如我从描述中了解到的，当 IDE 打开任何解决方案文件时，必须立即触发解决方案的加载项 OnConnect。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T09:00:46.283

我知道这现在对您没有多大帮助，但可能对其他人有所帮助。上周我遇到了同样的问题，试图制作加载项，并且只能通过一种解决方案激活。结束在同一个 MSDN 页面上并停留在同一点:)。

要制作解决方案加载项，请按照问题中提供的链接进行操作。遵循除第 5 点之外列出的所有点 - 跳过在加载项逻辑中添加以下代码行：

```
EnvDTE.AddIn addin = _applicationObject.Solution.AddIns.Add("MyAddin.Connect", "MyAddinName", "My add-in description", true); 
```

打开文本编辑器并编辑 .sln。**在全局**部分的 .sln 文件末尾输入这些行：

```
Global
(...)        
    GlobalSection(ExtensibilityAddIns) = postSolution 
        MyAddin.Connect = 1;My add-in description;MyAddinName
    EndGlobalSection
EndGlobal 
```

这正是 _applicationObject.Solution.AddIns.Add() 在 .sln 文件中输入的内容 现在，当将此解决方案加载到 Visual Studio 中时，在加载解决方案时它也会加载此加载项。还要在此处添加一件事：以这种方式加载加载项时，传递给 OnConnection 函数的**connectMode参数具有值****ext_ConnectMode.ext_cm_Solution**。

希望能帮助到你 ：）

# sql - 一个表定义中可以包含多少个主键约束？

> ID：16105748
> 
> 赞同：-4
> 
> 时间：2013-04-19T13:27:15.867
> 
> 标签：sql, sql-server

有谁知道表定义中可以包含多少个主键约束？帮助 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:29:31.993

表中只能有一个主键，并且由于约束来自主键，因此会再次产生一个主键约束。

编辑：只是为了澄清主键约束只能是一个可以有多个列的约束，尽管在复合主键的情况下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:30:43.327

阅读本文，您将找到答案：

[主键约束](http://msdn.microsoft.com/en-us/library/aa933112%28v=sql.80%29.aspx)

还有一个澄清

[主键约束 SQL Server 2012](http://msdn.microsoft.com/en-us/library/ms179610.aspx)

# java - java - 从抽象类创建对象的实例

> ID：16105753
> 
> 赞同：0
> 
> 时间：2013-04-19T13:27:36.097
> 
> 标签：java, android, oop

我有一个表示数据库记录的抽象 Record 类，它有两个抽象方法：getTable() 和 getColumns()。然后我有一个扩展 Record 的 Customer 类，我在这个类中实现了这些抽象方法。

我试图弄清楚如何获取所有客户的列表，但要尽可能地保持方法可重用，所以我更喜欢 getAllRecords(Record record) 方法而不是 getAllCustomers() 方法。

这是我到目前为止所拥有的。我无法创建新的 Record() 对象，因为它是抽象的，需要创建传入的类的实例。

```
//i'd like to do something like this to get all of the Customers in the db 
// datasource.getAllRecords(new Customer());

public List<Record> getAllRecords(Record record) {
    List<Record> records = new ArrayList<Record>();

    Cursor cursor = database.query(record.getTable(),
        record.getColumns(), null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
      Record record = cursorToRecord(cursor, record);
      records.add(record);
      cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return records;
  }

  private Record cursorToRecord(Cursor cursor, Record record) {

    Record record = new Record(); <-- somehow clone a new instance of the record that was passed in

    record.setId(cursor.getLong(0));
    record.setValue("aKey",cursor.getString(1));
    return record;
  } 
```

使用某种 RecordRegistry 对象而不是为每个 Record 子类设置单独的工厂类是否有意义？

```
class RecordRegistry{

    private static final List<Record> RECORDS;

    static {
            final List<Record> records = new ArrayList<Record>();
            records.add(new Customer());
            records.add(new Company());

            RECORDS = Collections.unmodifiableList(records);
    }

    public List<Record> allRecords(){

        return RECORDS;
    }

    public Record buildRecord(Class cClass){

        String className = cClass.getName().toString();

        if(className.equalsIgnoreCase("customer")){
            return new Customer();
        }else if(className.equalsIgnoreCase("company")){
            return new Company();
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:47:06.950

您可以获得 的类`Record`，前提是 的所有子类`Record`都有一个无参数的构造函数。

```
Record newRecord = record.getClass().newInstance(); 
```

请注意，您可以只传递类而不是对象本身。

您还可以传递一个负责实例化正确类的工厂。

```
interface RecordFactory {
    Record create();
}

class CustomerFactory implements RecordFactory {
    Record create() {
        return new Customer();
    }
}

public List<Record> getAllRecords(RecordFactory factory) {
    ...
    for(...) {
        ...
        Record record = factory.create();
        ...
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:32:04.513

一个奇怪的用例。我会让`cursorToRecord`方法抽象。这将逻辑推入每个类，它知道如何从`Cursor`.

```
public abstract Record cursorToRecord(Cursor cursor, Record record); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:39:46.417

不直接回答您的问题，而是查看有关内容提供程序的 Android 指南 ( [https://developer.android.com/guide/topics/providers/content-providers.html](https://developer.android.com/guide/topics/providers/content-providers.html) )。它们允许灵活的数据访问以及其他好处。我发现它们值得最初的学习和设置工作（尤其是在使用 Loaders 时）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:47:11.743

反射呢？

```
Record newRecord = record.getClass().newInstance(); 
```

# django - Django admin：在 search_fields 中使用一对一的关系

> ID：16105756
> 
> 赞同：4
> 
> 时间：2013-04-19T13:27:42.970
> 
> 标签：django, django-admin, django-modeladmin

我正在尝试使用以下 Model 和 ModelAdmin 类向我的模型管理列表页面添加搜索：

**模型.py**

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
        user = models.OneToOneField(User)
        country = CountryField(blank=True, null=True) 
```

**管理员.py**

```
from django.contrib import admin
from models import UserProfile

class UserProfileAdmin(admin.ModelAdmin):
        list_display = ('user','country')
        search_fields = ['user'] 
```

但是在尝试访问管理面板中的 UserProfile 时出现以下错误：

```
 at /admin/profiles/userprofile/ Related Field has invalid
 lookup: icontains 
```

我还尝试了以下方法：

```
search_fields = ['user_username'] 
```

和

```
search_fields = ['user_name']
    def user_name(self,obj):
        return obj.user.username 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T13:31:01.270

`user__username`根据[查找 API “follow” 表示法](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields)，尝试使用。

# java - 按钮位置和位置不起作用

> ID：16105757
> 
> 赞同：0
> 
> 时间：2013-04-19T13:27:43.393
> 
> 标签：java, swing, jbutton, layout-manager, null-layout-manager

我最近尝试了一个关于 Swing 和 Java GUI 的在线教程，我决定复制教程代码，但添加了第三个按钮。我尝试添加一个红色的，我成功地做到了（它还没有做任何事情），但我遇到了一些坐标问题。每当我尝试运行它时，都会出现以下情况：

![在此处输入图像描述](https://i.stack.imgur.com/9dggS.jpg)

我真正需要帮助的只是坐标或框架的大小。我真的不知道从这里去哪里。我确定这是一个相对简单的问题，但是，谢谢！

```
import javax.swing.*;
import java.awt.Color;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class Test1 implements  ActionListener
{

// Definition of global values and items that are part of the GUI.
int blackScoreAmount = 0;
int greenScoreAmount = 0;
int redScoreAmount = 0;

JPanel titlePanel, scorePanel, buttonPanel;
JLabel blackLabel, greenLabel, redLabel, blackScore, greenScore, redScore;
JButton blackButton, greenButton, redButton, resetButton;

public JPanel createContentPane ()
{

    // We create a bottom JPanel to place everything on.
    JPanel totalGUI = new JPanel();
    totalGUI.setLayout(null);

    // Creation of a Panel to contain the title labels
    titlePanel = new JPanel();
    titlePanel.setLayout(null);
    titlePanel.setLocation(10, 0);
    titlePanel.setSize(180, 30);
    totalGUI.add(titlePanel);

    blackLabel = new JLabel("Black Team");
    blackLabel.setLocation(0, 0);
    blackLabel.setSize(120, 30);
    blackLabel.setHorizontalAlignment(0);
    blackLabel.setForeground(Color.black);
    titlePanel.add(blackLabel);

    greenLabel = new JLabel("Green Team");
    greenLabel.setLocation(130, 0);
    greenLabel.setSize(120, 30);
    greenLabel.setHorizontalAlignment(0);
    greenLabel.setForeground(Color.green);
    titlePanel.add(greenLabel);

    redLabel = new JLabel("Red Team");
    redLabel.setLocation(250, 0);
    redLabel.setSize(120, 30);
    redLabel.setHorizontalAlignment(0);
    redLabel.setForeground(Color.red);
    titlePanel.add(redLabel);

    // Creation of a Panel to contain the score labels.
    scorePanel = new JPanel();
    scorePanel.setLayout(null);
    scorePanel.setLocation(10, 40);
    scorePanel.setSize(180, 30);
    totalGUI.add(scorePanel);

    blackScore = new JLabel(""+blackScoreAmount);
    blackScore.setLocation(0, 0);
    blackScore.setSize(120, 30);
    blackScore.setHorizontalAlignment(0);
    scorePanel.add(blackScore);

    greenScore = new JLabel(""+greenScoreAmount);
    greenScore.setLocation(130, 0);
    greenScore.setSize(120, 30);
    greenScore.setHorizontalAlignment(0);
    scorePanel.add(greenScore);

    redScore = new JLabel(""+redScoreAmount);
    redScore.setLocation(250, 0);
    redScore.setSize(120, 30);
    redScore.setHorizontalAlignment(0);
    scorePanel.add(redScore);

    // Creation of a Panel to contain all the JButtons.
    buttonPanel = new JPanel();
    buttonPanel.setLayout(null);
    buttonPanel.setLocation(10, 80);
    buttonPanel.setSize(380, 80);
    totalGUI.add(buttonPanel);

    // We create a button and manipulate it using the syntax we have
    // used before. Now each button has an ActionListener which posts 
    // its action out when the button is pressed.
    blackButton = new JButton("Black Score");
    blackButton.setLocation(0, 0);
    blackButton.setSize(120, 30);
    blackButton.addActionListener(this);
    buttonPanel.add(blackButton);

    greenButton = new JButton("Green Score");
    greenButton.setLocation(130, 0);
    greenButton.setSize(120, 30);
    greenButton.addActionListener(this);
    buttonPanel.add(greenButton);

    redButton = new JButton("Red Score");
    redButton.setLocation(250, 0);
    redButton.setSize(120, 30);
    redButton.addActionListener(this);
    buttonPanel.add(redButton);

    resetButton = new JButton("Reset Score");
    resetButton.setLocation(0, 40);
    resetButton.setSize(250, 30);
    resetButton.addActionListener(this);
    buttonPanel.add(resetButton);

    totalGUI.setOpaque(true);
    return totalGUI;
}

// This is the new ActionPerformed Method.
// It catches any events with an ActionListener attached.
// Using an if statement, we can determine which button was pressed
// and change the appropriate values in our GUI.
public void actionPerformed(ActionEvent e) 
{
    if(e.getSource() == blackButton)
    {
        blackScoreAmount = blackScoreAmount + 1;
        blackScore.setText(""+blackScoreAmount);
    }
    else if(e.getSource() == greenButton)
    {
        greenScoreAmount = greenScoreAmount + 1;
        greenScore.setText(""+greenScoreAmount);
    }
    else if(e.getSource() == resetButton)
    {
        blackScoreAmount = 0;
        greenScoreAmount = 0;
        blackScore.setText(""+blackScoreAmount);
        greenScore.setText(""+greenScoreAmount);
    }
}

private static void createAndShowGUI() 
{

    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame frame = new JFrame("Black and Green");

    //Create and set up the content pane.
    Test1 demo = new Test1();
    frame.setContentPane(demo.createContentPane());

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(280, 190);
    frame.setVisible(true);
}

public static void main(String[] args) 
{
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    SwingUtilities.invokeLater(new Runnable()
    {
        public void run() 
        {
            createAndShowGUI();
        }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:31:22.080

您的帧是 280x190：

```
frame.setSize(280, 190); 
```

并且您尝试放置一个 x 原点为 250 且宽度大小为 120 -> 370 的红色按钮。如果添加新元素，只需相应地调整窗口框架大小。

对于这种任务，使用布局可能会更好（至少更简单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:34:18.370

您的窗口大小是“硬编码”的：

```
frame.setSize(280, 190); 
```

按钮的大小和位置也是如此：

```
redButton.setLocation(250, 0);
redButton.setSize(120, 30); 
```

您将宽度为 120 的按钮放在 280 大框架的位置 250 处，因此只有 25% 的按钮可见。

您必须调整框架的大小和按钮的位置，以使其完全可见和漂亮。

**编辑**

现在，许多其他回复者建议，如果您想改进您的应用程序，请尝试摆脱所有硬编码的值并改用布局管理器。

以下是关于它们的一些很好的解释：

*   [http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# sql - NOT IN() 的替代方案

> ID：16105761
> 
> 赞同：6
> 
> 时间：2013-04-19T13:27:54.487
> 
> 标签：sql, sql-server, sql-server-2008-r2

从 2012 年 11 月开始，我有一个包含 14,028 行的表。从 2013 年 3 月开始，我还有一个包含 13,959 行的表。我正在使用一个简单的`NOT IN()`子句来查看谁离开了：

```
select * from nov_2012 where id not in(select id from mar_2013) 
```

这返回了 396 行，我从来没有想过它，直到我去分析谁离开了。当我提取所有丢失成员的 id 并将它们放入临时表 ( `##lost`) 时，其中 32 个实际上仍在`mar_2013`表中。当我使用以下方法搜索他们的 ID 时，我可以将它们拉起：

```
select * from mar_2013 where id in(select id from ##lost) 
```

我不知道发生了什么。我会提到`id`我创建的字段是一个`IDENTITY`列。这会对使用匹配有什么影响`NOT IN`吗？有没有更好的方法来检查表之间的缺失行？我也试过：

```
select a.* from nov_2012 a left join mar_2013 b on b.id = a.id where b.id is NULL 
```

并收到了同样的结果。

这就是我创建身份字段的方式；

```
create table id_lookup( dateofcusttable date ,sin int ,sex varchar(12) ,scid int identity(777000,1)) 
insert into id_lookup (sin, sex) select distinct sin, sex from [Client Raw].dbo.cust20130331 where sin <> 0 order by sin, sex 
```

这就是我将 scid 添加到 March 表中的方式：

```
select scid, rowno as custrowno
into scid_20130331
from [Client Raw].dbo.cust20130331 cust
left join id_lookup scid
on scid.sin = cust.sin
and scid.sex = cust.sex

update scid_20130331
set scid = custrowno where scid is NULL --for members who don't have more than one id or sin information is not available

drop table Account_Part2_Current
select a.*, scid
into Account_Part2_Current
from Account_Part1_Current a
left join scid_20130331 b
on b.custrowno = a.rowno_custdmd_cust 
```

然后我将所有信息按 scid 分组

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T13:37:29.400

我更喜欢这种形式（[这就是为什么](http://www.sqlperformance.com/2012/12/t-sql-queries/left-anti-semi-join)）：

```
SELECT a.id --, other columns 
  FROM dbo.nov_2012 AS a
  WHERE NOT EXISTS (SELECT 1 FROM dbo.mar_2013 WHERE id = a.id); 
```

但是，这仍然应该给出与您尝试过的结果相同的结果，所以我怀疑您没有告诉我们的数据模型有些东西 - 例如，可以为`mar_2013.id`空吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:46:15.960

这在逻辑上等同于 not in 并且比 not in 更快。

```
where yourfield in
(select afield
from somewhere
minus
select
thesamefield
where you want to exclude the record
) 
```

根据 Aaron 的回答，它可能不如使用 where not exists 快，所以你应该只在不存在的情况下使用它并不能提供你想要的结果。

# c# - 从后面的代码构建 Listview

> ID：16105765
> 
> 赞同：0
> 
> 时间：2013-04-19T13:28:09.520
> 
> 标签：c#, asp.net, listview

我有一个大表，可以有许多空、空或假列。我只想展示值得展示的栏目。这是查询示例以及我如何尝试构建`listview`：

```
var query = (from q in db.tblIncidents
            where q.Id == searchQuery
            select  new
                {
                    q.victim,
                    q.reportedByVictimPostCode
                }).ToList();
lst_Results.DataSource = query;
lst_Results.DataBind();

foreach (var colitem in query)
{
    if (!colitem.victim == false)
    {
         ** Help required here please **           
        lst_Results.Items.Add(new ListViewDataItem(0,1));
    }
} 
```

我确实开始在 aspx 页面上构建我的列表视图，但意识到结果将是大量的空字段，如果用户没有输入任何内容，用户什么也看不到，这是浪费时间。

我想要做的是实现这一点，但在后面的代码中通过查询是否有要显示的结果。

```
<ItemTemplate>
    <tr>
        <td>Incident Id:</td>
        <td>
            <asp:Label ID="lbl_CustomerId" runat="server" Text='<%# Eval("Id") %>' />
        </td>
    </tr>
    <tr>
        <td>Reported by the Victim:</td>
        <td>
            <asp:Label ID="lbl_victim" runat="server" Text='<%# Eval("victim") %>' />
        </td>
    </tr>
</ItemTemplate> 
```

我会使用这样的东西吗？

```
lst_Results.InsertItem.DataItem(colitem.victim); 
```

我得到了哪个错误`method delegate or event expected`？

它知道插入`listItem`模板吗？

我有一个带有`itemPlaceholder`. `listview`工作正常只是想从后面的代码中定位它。

# ms-access - MS Access：搜索表单中的外部联接

> ID：16105766
> 
> 赞同：2
> 
> 时间：2013-04-19T13:28:13.023
> 
> 标签：ms-access

我有一个带有搜索表单的访问数据库。

我有一个“对象”表，其中包括一个“名称”字段，以及一个带有“名称”字段的“所有者”表。

在两者之间，我有一个连接表，所以我有一个多对多的关系

对象不一定有所有者。

在我的搜索表单中，我有两个未绑定的字段：“对象名称”和“所有者名称”。

**我想做的事：**

*   当用户将两个字段都留空时，他会获得所有对象的列表（包括那些没有所有者的对象），如果该对象有所有者，它也会显示在列表中。
*   当用户在“对象名称”字段中填写内容时，他会得到一个包含输入子字符串的所有对象的列表（包括那些没有所有者的对象）。
*   当用户在“所有者名称”字段中填写内容时，他会获得所有者名称包含输入的子字符串的所有对象的列表（忽略 NULL 所有者）。

**到目前为止我做了什么：**

我使用“对象名称”文本字段的值使用左外连接和 Object.name 上的条件进行了查询

这适用于用例 1 和 2，但在用例 3 中没有所有者过滤

但是，如果我根据“所有者名称”文本字段在 Owner.name 上添加条件，案例 3 工作正常，但案例 1 和 2 不再工作（使左外连接过时）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:32:17.050

在我看来，您可以使用带有以下记录源的连续表格...

```
SELECT Objects.ObjectName, ObjectOwners.OwnerName
FROM (ObjectOwnership INNER JOIN ObjectOwners ON ObjectOwnership.OwnerID = ObjectOwners.OwnerID) INNER JOIN Objects ON Objects.ObjectID = ObjectOwnership.ObjectID
UNION ALL
SELECT Objects.ObjectName, NULL AS OwnerName
FROM ObjectOwnership RIGHT JOIN Objects ON Objects.ObjectID = ObjectOwnership.ObjectID
WHERE ObjectOwnership.ObjectID IS NULL
ORDER BY 1, 2; 
```

...然后在表单标题中放置几个​​文本框和一个“过滤器”命令按钮，以更新表单`.Filter`属性以根据需要过滤记录，如下所示：

```
Private Sub cmdFilter_Click()
Dim sFilter As String
If IsNull(Me.txtObjectFilter.Value) And IsNull(Me.txtOwnerFilter.Value) Then
    Me.FilterOn = False
Else
    If IsNull(Me.txtObjectFilter.Value) Then
        sFilter = ""
    Else
        sFilter = "ObjectName LIKE ""*" & Me.txtObjectFilter.Value & "*"""
    End If
    If Not IsNull(Me.txtOwnerFilter.Value) Then
        If Len(sFilter) > 0 Then
            sFilter = sFilter & " AND "
        End If
        sFilter = sFilter & "Ownername LIKE ""*" & Me.txtOwnerFilter.Value & "*"""
    End If
    Me.Filter = sFilter
    Me.FilterOn = True
End If
End Sub 
```

当表单打开时，它会显示所有记录...

![首次打开.png](https://i.stack.imgur.com/coDx4.png)

...然后我们可以按对象过滤...

![对象过滤器.png](https://i.stack.imgur.com/uZrwY.png)

...或由所有者...

![所有者过滤器.png](https://i.stack.imgur.com/9S8Rt.png)

...或两者兼而有之，就此而言。

## 编辑

子表单的类似技术是将上面的查询另存为`[ObjectOwner_base_query]`并将其指定为`Record Source`子表单的，然后稍微更改 VBA 代码，以

```
Private Sub cmdFilter_Click()
Dim sFilter As String, sSQL As String
sFilter = ""

If Not IsNull(Me.txtObjectFilter.Value) Then
    sFilter = "ObjectName LIKE ""*" & Me.txtObjectFilter.Value & "*"""
End If

If Not IsNull(Me.txtOwnerFilter.Value) Then
    If Len(sFilter) > 0 Then
        sFilter = sFilter & " AND "
    End If
    sFilter = sFilter & "Ownername LIKE ""*" & Me.txtOwnerFilter.Value & "*"""
End If

sSQL = "SELECT * FROM ObjectOwner_base_query"
If Len(sFilter) > 0 Then
    sSQL = sSQL & " WHERE " & sFilter
End If
Me.RecordSource = sSQL
End Sub 
```

（似乎修改`.Filter`子窗体的属性会导致 Access 行为异常；更新`.RecordSource`属性似乎会产生更好的结果。）

# ravendb - 如何将 RavenDB 索引编写为预过滤的文档列表，不可搜索

> ID：16105768
> 
> 赞同：1
> 
> 时间：2013-04-19T13:28:19.630
> 
> 标签：ravendb

我想获取按属性（字符串）为空或为空的用户列表。

我为此创建了一个索引，但我不确定我的实现方式是否正确。

```
public class Users_Contributors : AbstractIndexCreationTask<User>
{
    public Users_Contributors()
    {
        Map = users => from user in users
                       where user.ContributionDescription != null && user.ContributionDescription != "" 
                       select new {};
    }
} 
```

所以我只想让 raven 为我“准备”用户列表。我只是要在查询时从该索引中取出所有用户对象，而无需额外的过滤/位置条件。

上面的代码是要走的路还是我可以以更好的方式实现相同的目标？我觉得我在这里错过了一些东西。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:21:23.597

这将工作得很好。结果将是索引仅包含在其`ContributionDescription`字段中具有某些内容的用户。

如果你想让它更容易阅读，你可以使用`string.IsNullOrEmpty`，但这不会对性能产生任何影响。

```
Map = users => from user in users
               where !string.IsNullOrEmpty(user.ContributionDescription)
               select new {}; 
```

由于末尾的空对象，它可能感觉很奇怪，但这只是定义了索引条目。如果您不按任何其他字段进行排序或过滤，那么使用空对象就可以了。请记住，`__document_id`无论您映射什么字段，都会创建条目。

# visual-studio - 如何使用 VS2012 和 TFS2012 在开发团队之间共享二进制文件

> ID：16105770
> 
> 赞同：1
> 
> 时间：2013-04-19T13:28:23.210
> 
> 标签：visual-studio, visual-studio-2012, tfs

我们是一个由许多开发人员组成的团队，他们致力于两种解决方案（Visual Studio 意义上的解决方案*.sln*）。我们使用 Visual Studio 2012。大多数开发人员只能访问一种解决方案，但需要来自这两种解决方案的二进制文件（和 .h/.lib）。

我们正朝着使用 Team Foundation 2012 的方向发展，但之前使用的是 Visual SourceSafe 6.0。

我们**不想**将二进制文件保留在数据库中（然而，这将允许开发人员通过 GLV 简单地获取它们。但生活并不那么简单......）

我们需要：

1.  每个分支中的分支和二进制文件（来自两个解决方案）。因此，如果一个人在分支“1”中开发，他/她需要使用分支“1”中的其他解决方案二进制文件。
2.  没有二进制文件被推入数据库（因为它们可以从代码中重建，我们不想无用地增加数据库的大小。）
3.  获取最新二进制文件的简单方法（如果不是 GLV，预构建事件?????? 或类似的东西。）
4.  开发人员可以在不获取最新版本的情况下保留他们拥有的二进制文件的版本。

**我坚信有一种方法可以满足我们的需要。**毕竟，我们肯定不是唯一拥有依赖其他团队二进制文件的孤立团队的人。我只是不知道该怎么做。

**编辑：** *GLV*的意思是“获取最新版本”。对不起，未定义的首字母缩写词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:52:56.530

在各个阶段将二进制文件签入源代码控制：发布、冲刺结束等。标记签入的每个版本的结果。

“其他团队”可以在特定标签级别从这些二进制文件中获取一个分支。在他们准备好之前，他们永远不需要知道后来的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T07:45:40.777

部分开发人员建议使用 nuget。

# unicode - 美国/英国是否使用非 ASCII 字符？

> ID：16105773
> 
> 赞同：0
> 
> 时间：2013-04-19T13:28:28.553
> 
> 标签：unicode, internationalization, non-ascii-characters

我是一名使用汉字的开发人员。我正在尝试将我的部分项目转换为英语。我目前正在重写项目的国际化模块。

我对英语的标准不熟悉，所以不知道非ascii是否被广泛使用？如果是：告诉我一些他们经常使用的字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:27:54.767

标准英文拼写使用破折号 (–)、大引号 (“, ”, ', ')；美式英语也使用破折号 (—)。根据惯例和偏好，也可以使用几个非 Ascii 字母，尤其是在法语或拉丁语单词中，例如 é、ë、ç 和 æ。此外，即使在非专业文本中，也可能会看到各种特殊字符，例如上标二 (²)、微标 (µ) 和度数 (°)。

# php - 查找本周和上周的 SQL 记录的问题

> ID：16105778
> 
> 赞同：0
> 
> 时间：2013-04-19T13:28:51.493
> 
> 标签：php, mysql, sql, date, strtotime

我已经有这个问题大约一个月了。我为我的公司建立了一个文案管理系统，以帮助减轻管理如此大项目的压力。系统按每周完成的项目向作者支付费用。由于工资限制，他们的支付期为周四上午 12:00 至周三上午 11:59。在作家的仪表板上，我显示了他们上周支付期间的总数，然后是他们本周所写的当前金额。

我正在使用 strtotime() 这样做：

```
$currentdate = date("Y-m-d");
$lastweekstart = date('Y-m-d', strtotime('2 thursdays ago'));
$lastweekend = date('Y-m-d', strtotime('last wednesday'));
$thisweekstart = date('Y-m-d', strtotime('last thursday')); 
```

然后我从数据库中检索上周的记录：

```
mysqli_query($con, "SELECT * FROM table_name WHERE username='$username' AND date BETWEEN '$lastweekstart' AND '$lastweekend'"); 
```

和本周：

```
mysqli_query($con, "SELECT * FROM table_name WHERE username='$username' AND date BETWEEN '$thisweekstart' AND '$date'"); 
```

这在一周的大部分时间里都很有效，但在星期四它变得有点疯狂。所以我开始尝试更改 $thisweekstart 和 $lastweekstart 的日期，这些日期一直有效到星期五，然后它又变得疯狂了。所以，基本上，下面是我当前的代码，除了星期五之外每天都可以使用。

```
$lastweekstart = date('Y-m-d', strtotime('2 thursdays ago'));
$lastweekend = date('Y-m-d', strtotime('last wednesday'));
$thisweekstart = date('Y-m-d', strtotime('last thursday'));
if ($date == date('Y-m-d', strtotime('thursday'))) {
    $thisweekstart = $date;
    $lastweekstart = date('Y-m-d', strtotime('last thursday'));
} else {
    if ($date == date('Y-m-d', strtotime('friday'))) {
        $lastweekstart = date('Y-m-d', mktime(0,0,0,date("m"),date("d")-8,date("Y")));  
    }
}

// counts descriptions written last week
$lastcount = 0;
$result = mysqli_query($con, "SELECT * FROM table_name WHERE username='$username' AND date BETWEEN '$lastweekstart' AND '$lastweekend'");
$lastcount = mysqli_num_rows($result);

// counts descriptions written this week
if ($thisweekstart == $date) {
    $result = mysqli_query($con, "SELECT * FROM table_name WHERE username='$username' AND date='$date'");
} else {
    $result = mysqli_query($con, "SELECT * FROM table_name WHERE username='$username' AND date BETWEEN '$thisweekstart' AND '$date'");
}
$thiscount = mysqli_num_rows($result); 
```

我对 PHP 还是很陌生，我的大脑在这个问题上被炒了。我需要焕然一新。你们（和女孩）怎么看？有没有比使用 strtotime() 更好的方法来处理几周？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:45:14.830

最好将 MySQL 用于这种功能（当 DB 为您提供这种功能时 - 使用它）

阅读 MySQL 中的 ***日期和时间函数***。这是函数和示例的列表 [https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html](https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html)

这只是一个起点。我认为在您的情况下，直接在 SQL 语句中使用 CUR_DATE()、DATE_SUB() 和 INTERVAL 就足够了。

您的商店日期应为以下任何类型的列：***日期、日期时间或日期戳：http:*** [//dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:50:57.613

我会把它放在这里，因为我可以更好地使用代码标签并拥有更多空间。

所以我们想要做的是从一个数据库中执行 2 个查询，其中第一个查询在上周一到上周日运行，第二个查询在这个周一到下周日运行

所以首先我们需要找到前一个星期天的日期和这个星期一的日期

```
$lastsunday = date('Y-m-d', strtotime('last sunday'));
$thismonday = date('Y-m-d', strtotime('this monday'));
//there's better ways of doing this probably but I'm just copy and pasting from your code above 
```

现在我们需要创建我们的 2 个 sql 查询

```
$last_week_sql = "SELECT * FROM table WHERE DateColumn>=DATE_SUB('$lastsunday',INTERVAL 7 DAY) AND DateColumn<='$lastsunday'";

$this_week_sql = "SELECT * FROM table WHERE DateColumn>='$thismonday' AND DateColumn<=DATE_ADD('$thismonday',INTERVAL 7 DAY)"; 
```

现在您会注意到我正在使用 >= <= 而不是`BETWEEN()`。这是因为 BETWEEN 明确表示它忽略了起点和终点，所以如果你有数字`BETWEEN(1,10)`，它只会匹配 2 -> 9 并忽略 1 和 10。它对日期也是如此。谨慎使用！

另请注意，当直接注入日期字符串变量时，它会用单引号 ' 包裹，这是因为 mysql 将日期输入视为字符串。

# sql-server - xp_logevent 过程和 Unicode 消息

> ID：16105779
> 
> 赞同：0
> 
> 时间：2013-04-19T13:28:53.983
> 
> 标签：sql-server, tsql

Microsoft SQL Server中的过程是否[`xp_logevent`](http://msdn.microsoft.com/en-us/library/ms186244%28v=sql.110%29.aspx)仅支持非 Unicode (varchar) 消息——即使在 MSSQL2012 中也是如此？

这个支持 Unicode 的过程的最佳替代方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:52:53.287

即使在 MSSQL 2012 上。

```
raiserror (N'ğ', 0, 0) with log 
```

# .net - 如何为 .NET 应用程序安装 Jet OLEDB 提供程序？

> ID：16105781
> 
> 赞同：1
> 
> 时间：2013-04-19T13:28:59.490
> 
> 标签：.net, ms-access, oledb, jet, ms-jet-ace

如何安装最新`JET OLEDB`的应用程序提供商`.NET`？

[这个链接](http://www.microsoft.com/en-my/download/details.aspx?id=13255)说**不要**为了安装提供`Microsoft Access Database Engine`程序而安装。**`JET OLEDB`**

 **`JET OLEDB`如果应用程序需要提供程序，那么应该如何安装它`.NET`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:31:57.117

正如 HansUp 在他的评论中所说，如果您的 .NET 应用程序以 32 位运行，那么您已经安装了 32 位 Jet 作为 Windows 的一部分，如果您的 .NET 应用程序以 64 位运行，那么您需要 64-位版本的 Access 数据库引擎 (ACE) 来操作 Jet .mdb 数据库。

我认为您在问题中引用的下载页面上的咨询也阅读了太多内容。它说：

> Access 数据库引擎 2010 Redistributable 不适合......供系统服务或服务器端程序使用，其中代码将在系统帐户下运行，或将同时处理多个用户身份，或高度可重入并期望无状态行为。示例包括...从服务器端 Web 应用程序（如 ASP.NET）调用的程序。

请注意，这里引用的是 ASP.NET，而不是一般的 .NET。**

# logging - 记录最佳实践 - 在目标方法的开头记录方法调用或记录？

> ID：16105783
> 
> 赞同：22
> 
> 时间：2013-04-19T13:29:00.733
> 
> 标签：logging, language-agnostic, coding-style

我们应该什么时候登录？在函数调用之前（示例 A）还是在目标方法的开头（示例 B）？

请注意，这个问题是关于确切的记录器函数调用位置，而不是一般的最佳记录实践。

**解决方案 A：记录函数调用**：

```
function someProcess() {
    log.info("Reading data");
    readDataFromIO();
    log.info("Outputing data");
    outputDataToScreen();
}

// ... other module:

function readDataFromIO() {
    ...
}

function outputDataToScreen() {
    ... 
} 
```

**解决方案 B：在方法开始时记录**：

```
function someProcess() {
    readDataFromIO();
    outputDataToScreen();
}

// ... other module:

function readDataFromIO() {
    log.info("Reading data");
    ...
}

function outputDataToScreen() {
    log.info("Outputing data");
    ... 
} 
```

在解决方案 A 中，当效率问题出现时，您可以自定义消息或退出日志记录，但是如果日志消息看起来相同，您可能会忘记记录并且您有很多重复的代码。在解决方案 B 中，没有忘记日志记录和代码重复的风险，但是您不能 100% 关闭日志记录逻辑，并且如果方法调用中出现错误（例如空指针异常），您将遇到麻烦。**哪个是最佳实践？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-27T23:11:37.483

当然，最佳实践是将日志记录放在您需要的地方。:-) 但是在您的示例中，最佳做法是根本不使用日志记录。

`TRACE`尽管在许多日志框架中都存在一个级别，但日志通常不利于跟踪程序流（这似乎是您正在尝试做的事情） 。日志的最佳用途是记录流经系统的数据，尤其是引起问题的数据 *。*

记录数据时，应将数据记录在可以最好地解释的上下文中。这通常是

*   在函数的开头（记录输入），
*   在函数结束时（记录输出或计时），或
*   检测到错误的地方。

要找出致命错误发生的位置，您应该有一个错误处理程序，该处理程序被告知致命错误并记录显示错误发生位置的堆栈跟踪。（最现代的语言默认执行此操作，而较旧的语言现在有启用此功能的方法。）您不应尝试记录执行路径以尝试定位问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-28T20:28:19.727

我在这里给出的做法不是来自任何来源，而是我使用并发现在多年使用中最有效的做法。

**登录方法**

方法是具有特定目的的代码块。将每个方法的日志记录在方法本身中。这样，当您从其他地方重新使用该方法时，您将不必在每个地方添加记录器。如果该方法恰好是从许多地方调用的 util，请降低该前缀的记录器级别或记录器优先级。

**使用 MDC/请求 id/线程名称**

要跟踪请求的流程或调用的来源，请在记录器中设置参数或使用线程名称，以便所有后续日志都具有标签并遵循该标签的日志。通常，最好在收到请求后立即在 logger 中设置标签。

**避免重复记录**

在代码中的某个逻辑阶段捕获异常并记录。例如 - 在具有以下堆栈 Action/JSP/Web 服务等的 Web 应用程序中 -> 模块调用 -> 帮助模块 -> Util -> 库。

在这里，我将在我的模块调用级别登录（对应于代码中的*someProcess()*）。任何内部调用都将是放在方法内的调试级别调用。或者，您可以使用更高的日志过滤器记录辅助模块等。

记录是一个非常主观的事情，它更多地与决定一种方式并在任何地方都坚持下去有关。没有*一种适合所有*解决方案的尺寸。您需要通过随着时间的推移一点一点地调整参数来确定您正在使用的记录器中的详细程度、性能与信噪比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T11:45:30.067

以下是我可以根据我自己的经验给你的提示（因为你已经标记了这个主题与语言无关，我会保持它的通用性）：

*   使用委托函数（或使用日志函数创建中央日志类）来记录消息。参数应包含日志消息、日志严重性和日志级别。应该在需要记录的任何地方调用此委托函数（或日志类中的函数）。它允许您轻松替换日志机制，例如从基于文件的日志更改为 Windows 事件日志。在此功能中，您还可以处理日志级别，即使其可配置以抑制警告等。
*   添加一个 try-catch以`someProcess()`允许捕获运行时错误
*   当你开始某事时记录，当你结束某事时，总是记录可能发生的错误。这些日志调用可以在函数内部本地进行，如示例 B 所示。
*   如果您使用的语言支持这一点，请编写一个函数/方法来记录异常：例如，在**C#**中，您可以为异常编写一个**[扩展方法](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods)** `public static void Log(this Exception ex) { // ... logging code ... }`，然后您可以在每个 catch 块中简单地调用它，例如：`try { ... } catch (Exception ex) { ex.Log(); }`
    它可以给它添加一个可选参数也很有用`public static void Log(this Exception ex, string message="") { ... logging code ... }`，这样你就可以向它传递额外的信息`ex.Log("readDataFromIO() - read error occurred");`。

这样可以避免您在问题中提到的缺点（重复代码，未捕获错误）。

如果可能的话，看看你正在使用的框架或语言是否已经有这样一个类（通常是这种情况）并使用它或开发你自己的使用它的框架（即你自己的集中式日志记录类）而不是重新发明轮子完全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T11:02:42.553

最佳实践：

*   使用某种 Logger 类/模块（取决于语言），允许您在不同级别（DEBUG、INFO 等）进行日志记录
*   在 LogLevel DEBUG 中记录非常基本的功能
*   在 LogLevel INFO 中记录更复杂的函数（例如调用其他基本函数的函数）
*   使用 LogLevel WARN 记录潜在问题
*   使用 LogLevel ERROR 记录错误和异常

单独的日志记录功能允许您根据效率打开/关闭日志记录。但你也有能力记录一切。

示例：在 Java 中，log4j 提供了出色的自定义选项。您可以定义 logLevel，并且可以定义哪些类应该打开日志记录。这样，您可以在基本级别 (WARN) 监视系统，如果发生错误，您可以为需要检查的某些类设置 DEBUG 级别。

这个过程很大程度上取决于您使用的语言（当然），但我认为这种“log4j”方法是一种非常好的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-27T20:30:47.370

除了之前所说的，我使用了一个有点笼统的日志记录概念。它可以帮助我发现某些情况确实比预期的更频繁或更少出现的情况。

我正在使用一个类`LogEvent`（代码是`Java`，但想法可以移植到大多数语言）：

```
public class LogEvent {
    private int count;
    private String name;

    public LogEvent(String name) {
        this.name = name;
        count = 1;
    }

    public int count() {
        return this.count;
    }

    public void inc() {
        count++;
    }

    public String name() {
        return this.name;
    }

    public void report() {
        if (count >= 1) {
            Util.info(name + " (x " + count + ")");
        }
        else {
            Util.info(name);
        }
    }
} 
```

**如何引发事件并收集它们的发生？**

`LogEvents`可以使用“注册” `LogEventCollection`：

```
import java.util.Map;
import java.util.TreeMap;

public class LogEventCollection {
    private Map<String, LogEvent> events;

    public EventCollection() {
        events = new TreeMap<String, Event>();
    }

    public void register(String name) {
        LogEvent ev;

        if (events.containsKey(name)) {
            ev = events.get(name);

            ev.inc();
        }
        else {
            ev = new LogEvent(name);

            events.put(name, ev);
        }
    }

    public void report(String title, int minCount) {
        Util.info("");

        if (!title.isEmpty()) {
            Util.info(title);
        }

        for (LogEvent ev : events.values()) {       
            if ((minCount < 0) || (ev.count() >= minCount)) {
                ev.report();
            }
        }
        Util.info("");
    }
} 
```

为了大致了解我的程序的内部事件，该`LogEventCollection`方法`report()`给出了所有事件`LogEvents`及其各自计数的列表。该列表可以按名称或事件频率排序。

多线程应用程序需要额外的锁定代码或线程安全集合，以防止在并发访问 LogEventCollection 期间发生冲突。

显然，这种方法可以通过添加条件事件来扩展（= 调用`register()`受某些条件保护）。或者可以在生产运行期间禁用事件记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-28T12:46:24.090

最佳做法是将调用 log() 放在函数中。每次调用该函数时，您都会看到一个跟踪，而不仅仅是从“someProcess”调用它时。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-29T10:44:28.020

最简单的解决方案是重载您的方法，这样您就可以指定何时“记录”以及何时不“记录”。

```
function someProcess() {
    readDataFromIO(true);  //This will make a "log"
    outputDataToScreen();  //This will make no "log"
}

// ... other module:

function readDataFromIO() {
    readDataFromIO(false); 
}

function readDataFromIO(bool makeLog) {
    if(makeLog)
        log.info("Reading data");
    ...
}

function outputDataToScreen() {
    outputDataToScreen(false);
}

function outputDataToScreen(bool makeLog) {
    if(makeLog)
        log.info("Outputing data");
    ... 
} 
```

# matlab - matlab animate 2 3d plots in同一张图，抓住一个而不是另一个

> ID：16105785
> 
> 赞同：0
> 
> 时间：2013-04-19T13:29:05.923
> 
> 标签：matlab, animation, 3d, plot

对于我目前在 matlab 中的项目，我正在模拟感染在全球的传播。我用来让感染跳跃的主要方法是预设机场位置。我还通过动画线条将感染从一个机场传播到另一个机场来展示它们。主地图是设置为默认 2D 视图的 3d 冲浪图，并且使用 plot3 绘制线条，它也在 2D 视图中。

除了一个问题，我一切正常。我需要在同一个图中同时为两个 3D 图表设置动画，但我需要让地图的动画保持不开启，同时允许连接机场的线的动画保持开启，以便所有路径仍将显示。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:25:55.800

让我举一个动画的例子，也许它会有所帮助：

```
figure('Renderer','zbuffer')

%# this is the surface we will be animating
Z = peaks;
hSurf = surf(Z);
axis tight;    %# fix axis limits

%# these are some fixed lines
hLine(1) = line([0 50], [0 50], [-5 5], 'Color','r' ,'LineWidth',4);
hLine(2) = line([40 0], [0 40], [-5 5], 'Color','g' ,'LineWidth',4);

%# some text as well
hTxt = text(10,40,5, '0');

%# iterations
for j = 1:20
    %# animate the Z-coordinates of the surface
    set(hSurf, 'ZData',sin(2*pi*j/20)*Z)

    %# change text
    set(hTxt, 'String',num2str(j))

    %# flush + a small delay
    pause(0.05)
end 
```

请注意我们如何保存图形对象（表面、文本和线条）的句柄，以便我们以后可以操作它们。

![动画](https://i.stack.imgur.com/QRQZj.gif)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:58:45.680

我想出了一种方法，方法是保存我不想更改的所有内容的句柄，始终保持不变，然后在添加新版本之前使用删除功能直接删除以前的版本。我还添加了 uistack 以便它们按照我想要的顺序出现在屏幕上

# jsp - 在链接 JSP 中选择多个参数

> ID：16105787
> 
> 赞同：0
> 
> 时间：2013-04-19T13:29:22.183
> 
> 标签：jsp, parameters

我在 JSP 中有一个多选列表，如下所示：

```
<td><span><b>Delivered by </b>&nbsp;&nbsp;&nbsp;</span></td>
                        <td><select multiple name="deliveredBy">
                                <option value="volvo">one</option>
                                <option value="saab">too</option>
                                <option value="mercedes">three</option>
                                <option value="audi">four</option>
                        </select></td> 
```

通过在列表中选择多个条目并提交表单，这些条目具有相同的参数。链接如下所示：

> `ReportingArea.jsp?member=fsafd&deliveredBy=volvo&deliveredBy=saab&deliveredBy=mercedes&deliveredBy=audi&calc=two&group1=Butter&Application=`

如何访问在我的 Java 代码列表中选择的各个 DeliverBy 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:33:50.587

只需使用[`ServletRequest#getParameterValues()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29).

```
String[] deliveredBy = request.getParameterValues("deliveredBy");
// ... 
```

* * *

**与具体问题无关，在**[为时已晚](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/)之前学习[servlet](https://stackoverflow.com/tags/servlets/info)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:35:08.797

```
String[] deliveredBy = request.getParameterValues("deliveredBy")

for(int i=0;i<deliveredBy.length;i++)
 System.out.println(deliveredBy[i]); 
```

# javascript - 如何使用javascript计算一些字段

> ID：16105790
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:29:34.933
> 
> 标签：javascript

如何使用javascript计算一些输入字段？
如果问题对你来说很容易，我真的很抱歉<3

```
<table>
<tr>
    <td>
    <input name="price_1" id="price_1" value="5" type="text">
    <input name="pieces_1" id="pieces_1" type="text">
    <input name="subtot_1" id="subtot_1" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="price_2" id="price_2" value="7" type="text">
    <input name="pieces_2" id="pieces_2" type="text">
    <input name="subtot_2" id="subtot_2" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="price_3" id="price_3" value="9" type="text">
    <input name="pieces_3" id="pieces_3" type="text">
    <input name="subtot_3" id="subtot_3" type="text">
    </td>
</tr>
<tr>
    <td id="total_price">21</td>
</tr> 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:02:19.307

嗨 Sanela 我创建了一个演示来帮助你，它使用 jQuery

演示

[http://jsfiddle.net/L9PJa/](http://jsfiddle.net/L9PJa/)

HTML

```
<table>
<tr>
    <td>
    <input name="price_1" id="price_1" class="price" value="5" type="text">
    <input name="pieces_1" id="pieces_1" type="text" value="1">
    <input name="subtot_1" id="subtot_1" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="price_2" id="price_2" class="price" value="7" type="text">
    <input name="pieces_2" id="pieces_2" type="text" value="1">
    <input name="subtot_2" id="subtot_2" type="text">
    </td>
</tr>
<tr>
    <td>
    <input name="price_3" id="price_3" class="price" value="9" type="text">
    <input name="pieces_3" id="pieces_3" type="text" value="1">
    <input name="subtot_3" id="subtot_3" type="text">
    </td>
</tr>
<tr>
    <td id="total_price"></td>
</tr>
<tr>
    <td><input type="button" id="button" value="calculate"></td>
</tr> 
```

JavaScript

```
$("#button").click(function() {
  $('#total_price').text('0');
  $(".price").each(function() {
    $(this).next().next().val(parseInt($(this).val())*parseInt($(this).next().val()));
    $('#total_price').text(parseInt($('#total_price').text())+parseInt($(this).next().next().val()));
  });
}); 
```

点击动态创建的元素

```
$("body").on("click", "#button", function() {
   $('#total_price').text('0');
   $(".price").each(function() {
      $(this).next().next().val(parseInt($(this).val())*parseInt($(this).next().val()));
      $('#total_price').text(parseInt($('#total_price').text())+parseInt($(this).next().next().val()));
   });
}); 
```

输入不相邻

```
$("body").on("click", "#button", function() {
   $('#total_price').text('0');
   $(".price").each(function() {
      $(this).next('input').next('input').val(parseInt($(this).val())*parseInt($(this).next('input').val()));
      $('#total_price').text(parseInt($('#total_price').text())+parseInt($(this).next('input').next('input').val()));
   });
}); 
```

# android - 在同一个 Android App 中使用 ARMv7 和 ARM 库

> ID：16105791
> 
> 赞同：1
> 
> 时间：2013-04-19T13:29:36.777
> 
> 标签：android, android-ndk, arm, andengine, dropbox-api

我在同一个 Android 应用程序中使用 Dropbox（同步 API）和 Andengine 时遇到了困难。两者都使用本机库，据我所知，Andengine 是为 ARMv7a 和 Dropbox 为 ARM 系统开发的。单独运行应用程序的每个部分，一切正常。但是，将这两个部分结合起来会导致：java.lang.UnsatisfiedLinkError: Couldn't load DropboxSync: findLibrary returned null。

似乎只有**armeabi-v7a**文件夹会在该文件夹出现后立即检查库？但是，libDropboxSync.so 仅位于**armeabi**文件夹中。

一切都使用运行 Android 4.1.2 的 Nexus S 进行测试。

在此先感谢，
斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:20:34.793

从[$NDK/docs/CPU-ARCH-ABIS.html](https://android.googlesource.com/platform/ndk/+/master/docs/CPU-ARCH-ABIS.html)：如果`primary-abi`找到`secondary`将不会被扫描。

```
III.3\. Automatic extraction of native code at install time:
-----------------------------------------------------------

When installing an application, the package manager service will scan
the .apk and look for any shared library of the form:

     lib/<primary-abi>/lib<name>.so

If one is found, then it is copied under $APPDIR/lib/lib<name>.so,
where $APPDIR corresponds to the application's specific data directory.

If none is found, and a secondary ABI is defined, the service will
then scan for shared libraries of the form: 
```

您可以通过以下方式进行检查；

```
$ adb shell getprop|grep abi
[ro.product.cpu.abi2]: [armeabi]
[ro.product.cpu.abi]: [armeabi-v7a] 
```

如您所见，主要 abi 比次要 abi 更具体。

解决方案方面，您可以将 armv5 库移动到 armv7-a 下。它*应该可以*工作，但它只对 . 下的此类设备可见`Google Play`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T07:06:16.120

查看第 3 点和第 4 点

> 1.  在 Android Studio 中，切换到“项目视图”。
> 2.  从下载的 SDK 中的 libs 目录中，将 dropbox-sync-sdk-android.jar 拖到项目的 app/libs 目录中。
> 3.  右键单击 dropbox-sync-sdk-android.jar 并选择“添加为库”。在出现的对话框中单击“确定”。
> 4.  在 app/src/main 下的项目中创建一个名为 jniLibs 的新目录。从 SDK 中，将 armeabi、armeabi-v7a、mips 和 x86 拖到新的 jniLibs 目录中。

# ios - 我正在尝试将带有按钮的子视图添加到窗口视图，但子视图上的按钮正在发送一个已释放的实例

> ID：16105792
> 
> 赞同：2
> 
> 时间：2013-04-19T13:29:37.673
> 
> 标签：ios, objective-c, subviews

我正在尝试创建一个自定义的类似警报的视图，该视图将在数据加载时显示，我还有一个取消按钮，以防加载时间过长。我在 ViewController 中创建它并将其作为子视图添加到窗口（不是 View Controller，因为我希望 Loading 警报视图尽可能地自行处理）。视图显示正常，但是当我单击按钮时，我收到一条“发送到已释放实例的消息”，我使用了 Zombie 工具，似乎所有保留它的东西都立即释放它（我正在使用 ARC）。

我注意到，如果我使用全局变量并将加载警报视图分配给它可以工作，但这不是预期的效果。我希望能够像 Alertview 一样显示它。这是我的“显示”功能，我该怎么做才能保留它自己（？）。

```
 - (void) show{

    //this is so the user can't accidentally hit a button in the parent view while the
    // alert is active
    parentView.view.userInteractionEnabled = NO;

    //I get the window
    id appDelegate = [[UIApplication sharedApplication] delegate];
    UIWindow *window = [appDelegate window];

    //I set up the view and create/assign the correct placement of it as well as 
    //make it invisible so I can fade it in later.
    self.view.alpha = 0.0;
    self.view.frame = [self createFrameFor:self.view withOffset:0];

    //since the view is smaller that the window I create an image that is the size 
    //of the window but semi-transparent
    UIImage *bg = [self setupBackground];
    backgroundView = [[UIImageView alloc] initWithImage:bg];
    backgroundView.alpha = 0.7;

    //I add the views to the window here
    [window addSubview:backgroundView];
    [window addSubview:self.view];

    [activityIndicator startAnimating];

    [self fadeIn:self.view];
    } 
```

# android - 布局在纵向模式下不起作用

> ID：16105795
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:29:42.700
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="1dip" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="20dp"
            android:text="Total Pregnancies"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="30dp"
            android:text="10"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="160dp"
            android:text="Full Term"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="75dp"
            android:text="11"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="190dp"
            android:text="Premature"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="30dp"
            android:text="12"
            android:textColor="#000000" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/linearLayout1"
        android:layout_below="@+id/linearLayout1"
        android:layout_marginTop="35dp"
        android:padding="1dip" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="20dp"
            android:text="Multiples"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="85dp"
            android:text="16"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="160dp"
            android:text="Living"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="95dp"
            android:text="17"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/linearLayout1"
        android:layout_centerVertical="true"
        android:padding="1dip" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="20dp"
            android:text="Ab Included"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="70dp"
            android:text="13"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="160dp"
            android:text="Ab Spontaneous"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="30dp"
            android:text="14"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="190dp"
            android:text="Ectopics"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="35dp"
            android:text="15"
            android:textColor="#000000" />
    </LinearLayout>

</RelativeLayout> 
```

谁能告诉我这个布局有什么问题，因为它似乎无法在`portrait`模式下工作，但在`landscape`. 我附上了我正在尝试做的屏幕截图，上面`lists`是添加到`ListView`.

**更新：**

在纵向模式下，视图会变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:40:05.813

所有`LinearLayout`s 都具有相同的 id `linearLayout1`。我认为您应该为不同的视图赋予不同的ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:42:17.607

你写的有一些问题：

1.  您假设无论屏幕是什么宽度都足够了。您可能想要添加一个[Horizo​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)或使用不同的布局。

2.  每个布局都有相同的 id。

3.  为什么你的 RelativeLayout 有 android:orientation="vertical"？

# jquery - 使用 Twitter Bootstrap Typeahead 处理对象

> ID：16105801
> 
> 赞同：5
> 
> 时间：2013-04-19T13:29:56.177
> 
> 标签：jquery, bootstrap-typeahead

我正在使用 Bootstrap Typeahead 插件，如下所示：

```
$('#Organisation').typeahead({
            source: function (query, process) {
                return $.get(AppURL + 'Organisations/Manage/SearchByName/',
                {
                    term: query
                },
                function (data) {
                    var results = [];
                    var fullResults = [];
                    $.each(data, function (index, item) {
                        results.push(item.label);
                        fullResults.push({
                            id: item.ID,
                            label: item.label
                        });
                    });

                    return process(results);

                });
            },
            updater: function (selection) {
                $('#OrganisationID').val(selection);
            }
        }); 
```

我有两个返回的数组，这是因为 Typeahead 只需要一个字符串列表而不是一个对象。第二个数组包含标签和 id。

一旦用户从列表中选择了一个项目，我需要从此选择中获取 ID，然后使用它插入隐藏字段。但是选择只是名称，因为 ID 不能通过 Typeahead 传递。

关于如何解决这个问题的任何想法？

两个返回数组的示例：

结果：`["Organisation 1","Organisation 2"]`

完整结果：`[{"label":"Organisation 1","ID":2},{"label":"Organisation 2","ID":1}]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:06:42.343

在网上搜索了一下后，我找到[了这个](http://tatiyants.com/how-to-use-json-objects-with-twitter-bootstrap-typeahead/)HowTo。他们在其中做你想做的事，但没有ajax。

您还应该能够从源函数返回一个对象，但是您需要重新实现 typeahead 的所有辅助函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T02:34:26.303

您[通常不能](https://github.com/twitter/bootstrap/pull/7298)在 Bootstrap Typeahead (2.x) 中直接使用 JSON 对象，但您可以轻松地对其进行调整。这个问题的措辞应该有助于人们在一个地方找到它。其他[问题](https://stackoverflow.com/questions/16072956/how-to-avoid-to-display-json-string-with-custom-typeahead)也提出了类似的问题，但与您所做的方式不同。

```
var typeahead = control.typeahead({ /* ... */ }).data('typeahead');

// manually override select and render
//  (change attr('data-value' ...) to data('value' ...))
//  otherwise both functions are exact copies
typeahead.select = function() {
    var val = this.$menu.find('.active').data('value')
    this.$element.val(this.updater(val)).change()
    return this.hide()
};
typeahead.render = function(items) {
    var that = this

    items = $(items).map(function (i, item) {
        i = $(that.options.item).data('value', item)
        i.find('a').html(that.highlighter(item))
        return i[0]
    });

    items.first().addClass('active')
    this.$menu.html(items)
    return this
}; 
```

除此之外，您必须覆盖`highlighter`、`matcher`、`sorter`和`updater`，但这些可以通过传递给预先输入的选项来完成，其中传入的`item`(s) 现在是您的 JSON 对象。

选择`item`s 时`updater`会调用，这是您设置值*和*使用 JSON 数据的方式：

```
updater: function (item) {
    someGlobalValue = item.id;

    // must return a normal string; sets the textbox value
    return item.name;
} 
```

这也意味着您不需要做任何花哨的事情来关联，或者以其他方式“记住”其他答案中 Typeahead 引用示例之外的项目。整个重写过程中最烦人的部分是`sorter`在每次使用中重写。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-28T17:03:22.910

我有一个丑陋的解决方案...

我需要能够搜索标题，但最终将 ID 放入文本输入中......

我的 JSON 是

```
[
{"id": 1, "title": "Foo foo foo"},
{"id": 2, "title": "Bar bar bar"},
...
] 
```

和我的电话...

```
$(function() {
    $.get("path/to/data.json", function(data){
          $(".typeahead").typeahead({
              "source": data,
              "displayText": function(item){
                  // OMG ugly !!! :p
                  if (item.id == undefined) return item;
                  return item.title + ' (' + item.id + ')';  
              },
              "updater": function(item) {
                  return item.id;
              }});
    }, 'json');
}); 
```

一切都照常工作，但是当您单击所选项目时，只有 id 被放入该字段...

完毕 ！丑陋但完成...

使用[https://github.com/bassjobsen/Bootstrap-3-Typeahead测试](https://github.com/bassjobsen/Bootstrap-3-Typeahead)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T08:51:56.657

考虑重写“matcher”、“sorter”、“updater”和“highlighter”函数，就像在[https://stackoverflow.com/a/14959406/593415中描述的那样](https://stackoverflow.com/a/14959406/593415)

这确实是一个技巧，因此您可以使用 Bootstrap Typeahead (2.x) 操作对象

# java - Java WebCam 捕获和显示

> ID：16105805
> 
> 赞同：0
> 
> 时间：2013-04-19T13:29:59.363
> 
> 标签：java, image, swing, webcam, image-capture

我目前正在寻找构建一个简单的应用程序。

我查看了其他似乎没有帮助的应用程序和堆栈溢出问题。

我想让应用程序使用 build i 网络摄像头拍摄图像并在摆动 gui 中显示。然后在 2 秒后拍摄另一张照片。检查它是否与第一张相同，否则丢弃它展示下？

我有以下问题：

*   我需要使用哪些库来从我的网络摄像头中抓取图片？
*   我如何确定图片何时发生变化，即拍照将其与上次保存的照片进行比较（如果有任何不同）？

是否可以轻松地做到这一点而不使用大量的库？

那里有任何示例/简单代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:58:05.430

要抓取图片，请查看[如何从网络摄像头捕获视频（在 java 中）？](https://stackoverflow.com/questions/2004405/how-to-capture-video-from-webcamin-java)

有很多关于锄头的例子来找出两个图像之间的差异，谷歌它：

[Java 图像比较/运动检测](http://mindmeat.blogspot.com.br/2008/07/java-image-comparison.html)

您可以使用 Java 媒体框架、OpenCv ...

我认为这个 gitHub 项目可以帮助你很多[sarxos/webcam-capture](https://github.com/sarxos/webcam-capture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:03:07.440

您可以使用完全用 java 编写的[lti-civil](http://lti-civil.org/)库，用于从网络摄像头捕获图像。为了比较两个图像，您应该编写一些图像匹配算法。另一种选择是[javacv](https://code.google.com/p/javacv/)（openCV 的 java 包装器），它可用于从网络摄像头抓取图像以及比较两个图像。

# search - 内网搜索引擎前端？

> ID：16105812
> 
> 赞同：5
> 
> 时间：2013-04-19T13:30:13.200
> 
> 标签：search, search-engine

我们目前正在使用许多开源和商业产品来存储不同类型的信息（在我们的内部网络中）。所有这些产品都带有自己的存储库（通常是数据库）和自己的搜索功能并存储不同类型的信息。

目前产品清单如下：

*   WordPress
*   吉拉
*   合流
*   共享点
*   动力轴
*   面条

我们面临的问题是，当一个人需要搜索信息时，需要登录所有这些不同的系统并在每个系统上执行搜索。

我在 Google 上搜索了“搜索引擎前端”、“元搜索引擎”等，但我找不到可以解决我们问题的明显内容。在这一点上，我不得不说我们对构建一个要搜索的“中央存储库”不感兴趣，而是我们需要一个可以接受来自用户的查询的前端，将其“打包”为以下格式每个单独的搜索引擎都理解、接收响应（JSON 或 XML）并将其呈现给用户

关于我们如何解决它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:49:33.413

您的策略是正确的：如果您对构建中央索引不感兴趣，您将需要一个应用程序来接受来自用户的查询，将其转换为每个单独的搜索引擎能够理解的格式，接收响应并将它们呈现给用户。这正是**元搜索引擎**所做的。即使您使用框架（例如[Carrot2](http://project.carrot2.org/)），编写这些查询和结果转换器可能还需要做很多工作，并且您可能会遇到缓慢的结果，因为元搜索永远不会比您搜索的组件的底层搜索模块更快.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T09:16:49.707

您可以将数据放入一个后端，而不是单独查询每个后端。

您可以将数据导出到 Apache Solr 服务器并使用 CorePages、[http://www.corepages.biz](http://www.corepages.biz)等前端。您可以为数据添加反向链接，以便直接跳转到搜索结果条目、Jira Ticket 或 wiki 文章。

# android - 是否可以将 XOR 数据发送到 MediaPlayer？

> ID：16105813
> 
> 赞同：0
> 
> 时间：2013-04-19T13:30:13.467
> 
> 标签：android, android-mediaplayer

我有异或的媒体文件。

我想用[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)类播放它们。是否可以即时解密媒体流（并能够倒带）？

很快，我想拥有`MediaPlayer`XOR 媒体文件的所有类功能。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:34:30.750

[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)可能级别太高而无法完成此操作。我建议看看[AudioTrack](http://developer.android.com/reference/android/media/AudioTrack.html)。如果您使用[InputStream](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)读取文件，那么您可以在将数据提供给 AudioTrack 实例之前对数据进行异或。这种方法的唯一缺点是您需要实现自己的查找机制。

# android - Android - 将文件或字节数组转换为 Blob

> ID：16105816
> 
> 赞同：1
> 
> 时间：2013-04-19T13:30:19.787
> 
> 标签：android, file, bytearray, blob

我一直在寻找很多，但我找不到这个简单问题的答案。

我想实现以下功能之一：

```
public Blob getBlob(Byte[] imageByteArray){

}

public Blob getBlob(File imageFile){

} 
```

请注意，这些函数是从 android 客户端调用的。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T13:39:43.877

```
//you bitmap image first get
Bitmap bitmap = BitmapFactory.decodeFile("/path/images/image.jpg");
//take on bytearrayoutputStream to convert into blolb  so here is you blob
ByteArrayOutputStream blob = new ByteArrayOutputStream();
bitmap.compress(CompressFormat.PNG, 0 "ignore png", blob);
byte[] bitmapdata = blob.toByteArray(); 
```

# php - 使用 PHP 解析/编辑 docx 文件

> ID：16105818
> 
> 赞同：0
> 
> 时间：2013-04-19T13:30:29.953
> 
> 标签：php, xml, xpath, xquery

我被要求编写一个 php 脚本，该脚本应该读取/解析 docx 文件并执行一些操作，例如复制特定的段落/表格并用值填充一些变量（#myvar 或 $myvar）。你们有什么建议，直接使用 word/document.xml 文件或将整个文档转换为 HTML 文件，然后使用 DOM 解析它（我不喜欢这个解决方案:()？要解析的 docx 的结构是尚未定义，这是我的工作！它必须尽可能通用。

为了清楚地了解我在做什么，docx 文件是一个 CV 模型，我必须用 DB 中的数据填充它。PS：我不知道如何使用 Xquery 有效地解析/修改 XML 文件，因为我唯一的解决方案是在该 docx 中使用变量（带有 $ 或 #.. 的纯文本）感谢您的帮助 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T23:01:19.957

有 2 个主要的 PHP 库能够创建 Word 文档。以下是两者的功能描述，它们可能会帮助您解决问题：

1.  [PHPWord](http://phpword.codeplex.com/) (opensource) - 允许加载模板文档和替换值...看看这个[库源代码中的例子](https://github.com/PHPOffice/PHPWord/blob/develop/src/Examples/Template.php)，也许你可以定义一个简历模板并用它来解决问题；
2.  [PHPDocX](http://www.phpdocx.com/)（基本功能免费，更高级功能付费）- 允许模板以及搜索和替换文档中的内容（可能仅在付费版本中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-28T08:37:22.987

这是一个老问题，但我想我给出一些指示，因为我已经为此苦苦挣扎了一段时间，最终在[github 上编写了我自己的包：wrklst/docxmustache](https://github.com/wrklst/docxmustache)。

以下是我知道的一些解决方案：

免费解决方案：

*   [https://github.com/PHPOffice/PHPWord](https://github.com/PHPOffice/PHPWord)（如上所述，繁琐，不是很能干）
*   [http://www.tinybutstrong.com/opentbs.php](http://www.tinybutstrong.com/opentbs.php)（有效但非常麻烦，如果您打算允许用户提供模板，还会引入很多安全问题）

部分免费和付费：

*   [https://www.phpdocx.com](https://www.phpdocx.com)
*   [http://www.docxpresso.com](http://www.docxpresso.com)（对我来说似乎是更完整的解决方案之一，199 欧元的服务器许可证也不太贵）
*   [https://modules.docxtemplater.com](https://modules.docxtemplater.com)

我与 opentbs 合作了很多，但我对它不满意，我目前正在尝试评估以编写更适合我特定需求的自己的解决方案。通常您需要： - 用于解压缩/重新压缩 docx 文件的 zip 类 - 用于替换值的模板引擎，我正在使用 mustache ( [https://github.com/bobthecow/mustache.php](https://github.com/bobthecow/mustache.php) ) - 如果您打算替换图像您还需要更高级的文件、参考和 xml 处理。Php 的 SimpleXMLElement 应该足以处理所有的 xml 操作。

当然，您始终可以将 docx 转换为更易于访问的格式，但这会极大地影响任何样式。如果那不是问题，我建议使用 libreoffice 将您的 docx 转换为 libreoffice 支持的任何格式。在基于 linux 的服务器上，您可以通过命令行轻松访问它，这里有一个使用 symfony 执行命令的示例：

```
$command = "soffice --headless --convert-to html ".$inputfile.' --outdir '.$outputfile.'/');
            $process = new \Symfony\Component\Process\Process($command);
            $process->start();
            while ($process->isRunning()) {}
            // executes after the command finishes
            if (!$process->isSuccessful()) {
                throw new \Symfony\Component\Process\Exception\ProcessFailedException($process);
            } 
```

如果您想在上下文中查看此内容，请查看我的[包 wrklst/docxmustache 。](https://github.com/wrklst/docxmustache)

祝你好运！

# css - 如何在锁定的 Intranet 中使用 google webfonts？

> ID：16105819
> 
> 赞同：2
> 
> 时间：2013-04-19T13:30:31.513
> 
> 标签：css, google-font-api

处理客户项目 - 重新设计他们的 Intranet。他们的安全设置方式，所有外部媒体都被拒绝，包括任何谷歌字​​体。棘手的部分是他们要求我们用谷歌字体重新设计。

提示用户自己安装字体当然是不可接受的。有没有办法可以下载 Google 字体文件并将其放在本地网站上？

* * *

**更新**：经过一番折腾，我发现您可以下载并使用压缩版的 google 字体来保持您的网站相对优化。转到导入 URL：

`http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700,300italic`

在`src`属性中（themes.googleusercontent.com URL）下载`.woff`它链接的文件，随意重命名，上传到您网站的媒体目录，然后指向该本地文件而不是 Google 的 URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:31:55.737

您可以从 Google 下载它们并将它们托管在您自己的服务器上

![下载按钮](https://i.stack.imgur.com/QizhG.jpg)

使用 Google 字体右上角的下载按钮下载您的收藏

* * *

请参阅[https://developers.google.com/fonts/faq#Download_Fonts](https://developers.google.com/fonts/faq#Download_Fonts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-18T02:52:40.693

正如@Mike 已经在评论中提到的那样，[localfont.com](http://localfont.com/)可以帮助您下​​载所有字体变体并生成跨浏览器 CSS 以供实施。您从 Google 字体本身获得的只是 TTF，因此不适用于所有浏览器。您可以通过访问 Google CSS 文件手动下载的内容实际上取决于您使用的浏览器。localfont.com 为 Google 字体上可用的所有字体提供 TTF、WOFF、WOFF2、EOT 和 SVG。

# c# - .NET 4.5 服务器端 WebSocket 是否使用 IOCP？

> ID：16105821
> 
> 赞同：0
> 
> 时间：2013-04-19T13:30:35.050
> 
> 标签：c#, asp.net, websocket, iocp

有谁知道 AspNetWebSocket（在 .NET Framework 4.5 中引入）是否使用 IOCP 来处理请求而不是每个连接一个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T08:50:11.637

有一个相对简单的方法可以让你自己解决这个问题。

*   创建一个简单的程序。
*   用任务监视器观察它并查看线程数。
*   为它创建许多 Web 套接字连接。
*   查看在连接处于活动状态时线程数是否增加。
*   将连接数与线程数进行比较。

但是，有什么关系呢？只要 API 满足您的性能和可扩展性要求，您只能从应用程序的性能测试中发现。

请注意，如果实现不使用 IOCP，我会感到非常惊讶，但问恕我直言毫无意义。

# javascript - 从 PhoneGap 中的 Urban Airship 推送通知中提取“额外”

> ID：16105822
> 
> 赞同：0
> 
> 时间：2013-04-19T13:30:42.817
> 
> 标签：javascript, json, cordova, push-notification, urbanairship.com

我正在通过 Urban Airship 从我自己的服务器向基于 PhoneGap 的 Android 应用程序发送推送通知。通知已成功发送 - 但是，我希望能够发送未显示在 Android 通知栏中的其他数据，但我仍然可以在应用程序中提取这些数据。据我了解，这应该作为键值对存储在推送通知的“额外”字段中。我在以正确的方式编码和提取它时遇到了麻烦。

服务器是一个简单的 ASP.NET Web 界面，带有一个将消息发送到 Urban Airship 的代码隐藏页面（基于此[https://stackoverflow.com/a/2528151/1822286](https://stackoverflow.com/a/2528151/1822286)）。我使用 JavaScript 和 JSON 将来自用户交互的数据（包括填写的表单和导入的 Google 地图实例的坐标）保存到隐藏字段中。然后，该字段由 ASP.NET 中的代码隐藏页面读取，并用于构造推送通知。

JavaScript 到隐藏字段 stringData（事件变量来自 Google Maps 实例，因为该部分有效，所以我在这里省略了）：

```
var allDataToString = {
    "alert": "\"" + document.getElementById("alertTextBox").value + "\"",
    "data": "\"" + document.getElementById("dataTextBox").value + "\"",
    "lat": "\"" + event.latLng.lat() + "\"",
    "lng": "\"" + event.latLng.lng() + "\""
};

document.getElementById("stringData").value = JSON.stringify(allDataToString); 
```

C# 代码隐藏页面中的推送通知消息：

```
string postData = "{\"aliases\": [],\"tags\": [],\"android\": {\"alert\": \"alerttest\",\"extra\": {\"data\": \"" + stringData.Value + "\", \"notificationtype\": \"1\"}},\"apids\": [\"APID\"]}"; 
```

更易读的版本：

```
string postData = 
    "{
    \"aliases\": [],
    \"tags\": [],
    \"android\": 
        {
        \"alert\": \"alerttest\",
        \"extra\": 
            {
            \"data\": \"" + stringData.Value + "\", 
            \"notificationtype\": \"1\"
            }
        },
    \"apids\": [\"APID\"]
    }"; 
```

消息已通过 Urban Airship 成功发送到我的手机。在应用程序中，我想提取 stringData.Value 部分，其中包含警报、数据、lat 和 lng 变量。我不确定错误是否在于我选择在服务器端对其进行编码的方式，还是在于我在客户端解析它的方式。令人困惑的是，Urban Airship 的文档和 Web 仪表板之间的术语不同，使用“alert”和“extra”，而他们的 PhoneGap 插件端的其他内容称为“incoming”和“incoming.message”。

在 PhoneGap JavaScript 中：

```
push.getIncoming(function(incoming) {
    if(incoming.extra!=undefined){
        var data = JSON.parse(incoming.extra.data);
        var alert = data.alert;
        var data = data.data;
        var lat = data.lat;
        var lng = data.lng;
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:21:36.950

解决了。我在 PhoneGap 中尝试了不同的提取组合，使用 Urban Airship 仪表板而不是从我自己的服务器发送消息，以最大限度地减少错误源的数量。在服务器端，我怀疑问题出在尝试发送字符串化 JSON 对象时，因为引号会干扰消息其余部分中的引号。将它们作为单独的键值对发送反而效果很好：

```
string postData = "{\"aliases\": [],\"tags\": [],\"android\": {\"alert\": \"" + someAlertValue + "\",\"extra\": {\"someKey\": \"" + someDataValue + "\", \"someKey2\": \"" + anotherDataValue + "\"}},\"apids\": [\"some apid\"]}"; 
```

那么在PhoneGap中提取“额外”消息的方法是：

```
var extra = incoming.extras; 
```

提取的每个键值对：

```
var someDataValue = extra.someKey;
var anotherDataValue = extra.someKey2; 
```

# version-control - 如何最好地在 TFS 2010 中的项目之间移动文件，同时保持对原始文件的更改？

> ID：16105830
> 
> 赞同：1
> 
> 时间：2013-04-19T13:31:02.777
> 
> 标签：version-control, tfs

如何最好地在 TFS 2010 中的项目之间移动文件，同时保持对原始文件的更改？

我有一个 asp.net mvc 4 项目，该项目分别使用位于两个独立项目中的视图和控制器；我希望将这些文件移动到 Web 项目，然后，我想从解决方案中删除现有的视图和控制器项目。

两个问题。

1.  当这一切发生时，现有的视图/控制器代码将会发生变化，我想保持这些变化。使用 TFS 2010 执行此操作的最佳方法是什么？

2.  如果有一个 TFS 2010“共享文件夹作为链接”会很好，因为仅查看就有 600 多个；如果归根结底，有没有办法不花一个月的时间将每个文件作为链接共享？

提前致谢。

# python - Python（奇怪）舍入值

> ID：16105833
> 
> 赞同：4
> 
> 时间：2013-04-19T13:31:08.287
> 
> 标签：python, numpy, floating-point

这个问题更多是出于好奇。

我正在创建以下数组：

```
A = zeros((2,2))
for i in range(2):
    A[i,i] = 0.6
    A[(i+1)%2,i] = 0.4
print A

>>>
   [[ 0.6  0.4]
   [ 0.4  0.6]] 
```

然后，打印它：

```
for i,c in enumerate(A):
    for j,d in enumerate(c):
        print j, d 
```

但是，如果我删除 j，我得到：

```
>>>
0 0.6
1 0.4
0 0.4
1 0.6 
```

但是，如果我从 for 中删除 j，我得到：

```
(0, 0.59999999999999998)
(1, 0.40000000000000002)
(0, 0.40000000000000002)
(1, 0.59999999999999998) 
```

这是因为我使用 0.6 创建矩阵的方式？它如何代表内部的真实价值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T20:13:43.053

这里发生了一些不同的事情。

首先，Python 有两种将对象转换为字符串的机制，称为`repr`和`str`。 `repr`应该提供“忠实”的输出，（理想情况下）可以很容易地准确地重新创建该对象，同时`str`旨在获得更多人类可读的输出。对于 Python 3.1 及以下版本中`repr`的浮点数，提供足够的数字来完全确定浮点数的值（以便评估返回的字符串会准确地返回该浮点数），同时`str` 四舍五入到小数点后 12 位；这具有隐藏不准确性的效果，但意味着非常接近的两个不同的浮点数最终可能具有相同的`str`值 - 这是 . 不会发生的事情`repr`。当你打印一个对象时，你会得到`str`那个物体的。相反，当您只是在解释器提示符处计算表达式时，您会得到`repr`.

例如（这里使用 Python 2.7）：

```
>>> x = 1.0 / 7.0
>>> str(x)
'0.142857142857'
>>> repr(x)
'0.14285714285714285'
>>> print x  # print uses 'str'
0.142857142857
>>> x  # the interpreter read-eval-print loop uses 'repr'
0.14285714285714285 
```

但是，从您的角度来看，有点令人困惑，我们得到：

```
>>> x = 0.4
>>> str(x)
'0.4'
>>> repr(x)
'0.4' 
```

这似乎与您在上面看到的内容不太吻合，但我们将在下面回到这一点。

要记住的第二件事是，在您的第一个示例中，您正在打印两个单独的项目，而在您的第二个示例（已`j`删除）中，您正在打印一个项目：长度为 2 的元组。有点令人惊讶的是，当用 转换一个元组以打印时`str`，Python 仍然使用`repr`来计算该元组*元素*的字符串表示：

```
>>> x = 1.0 / 7.0
>>> print x, x  # print x twice;  uses str(x)
0.142857142857 0.142857142857
>>> print(x, x)  # print a single tuple; uses repr(x)
(0.14285714285714285, 0.14285714285714285) 
```

这就解释了为什么在这两种情况下你会看到不同的结果，即使底层的浮点数是相同的。

但还有最后一块拼图。在 Python >= 2.7 中，我们在上面看到对于特定的 float `0.4`，该float 的`str`and`repr`是相同的。那么`0.40000000000000002`从哪里来呢？好吧，这里没有 Python 浮点数：因为您从 NumPy 数组中获取这些值，它们实际上是 type `numpy.float64`：

```
>>> from numpy import zeros
>>> A = zeros((2, 2))
>>> A[:] = [[0.6, 0.4], [0.4, 0.6]]
>>> A
array([[ 0.6,  0.4],
       [ 0.4,  0.6]])
>>> type(A[0, 0])
<type 'numpy.float64'> 
```

该类型仍然存储一个双精度浮点数，就像 Python 的浮点数一样，但它有一些额外的好处，使其能够与 NumPy 的其余部分很好地交互。事实证明，NumPy 计算a 的算法与 Python计算`repr`a 的算法略有不同。Python（在 >= 2.7 版本中）旨在提供仍然准确表示浮点数的最短字符串，而 NumPy 仅根据将基础值四舍五入为 17 位有效数字来输出字符串。回到上面那个例子，下面是 NumPy 的作用：`numpy.float64``repr``float``0.4`

```
>>> from numpy import float64
>>> x = float64(1.0 / 7.0)
>>> str(x)
'0.142857142857'
>>> repr(x)
'0.14285714285714285'
>>> x = float64(0.4)
>>> str(x)
'0.4'
>>> repr(x)
'0.40000000000000002' 
```

所以这三件事一起应该解释你所看到的结果。请放心，这完全是装饰性的：底层浮点值不会以任何方式改变；它只是被两种类型的`str`和的四种不同可能组合以不同的方式显示：和.`repr``float``numpy.float64`

Python 教程提供了有关Python 浮点数如何存储和显示的[更多详细信息，以及一些潜在的陷阱。](http://docs.python.org/2/tutorial/floatingpoint.html)[这个 SO question](https://stackoverflow.com/q/1436703/270986)的答案有更多关于`str`和之间区别的信息`repr`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:41:14.037

# 编辑：

别介意我，我没有意识到这个问题是关于 NumPy 的。

* * *

奇怪`0.59999999999999998`的朋友是 Python 准确表示所有计算机如何存储浮点值的最佳尝试：根据 IEEE 754 标准，作为一堆位。值得注意的是，`0.1`是二进制的非终止十进制，因此无法准确存储。（所以，大概是`0.6`和`0.4`。）

您通常看到的原因`0.6`是大多数浮点打印功能会完善这些不精确存储的浮点数，以使我们人类更容易理解它们。这就是您的第一个打印示例正在做的事情。

在某些情况下（即，当打印功能不尝试人类可读时），`0.59999999999999998`将打印完整的、略微偏离的数字。这就是您的第二个打印示例正在做的事情。

## tl;博士

这不是 Python 的错。这就是浮点数的存储方式。

# c# - 在 C# 中编辑绘图形状内的文本

> ID：16105834
> 
> 赞同：0
> 
> 时间：2013-04-19T13:31:20.857
> 
> 标签：c#, drawing

当我双击它时如何编辑绘图矩形（类图）的文本？这是 c# 中的代码我如何绘制类图

```
g1.DrawRectangle(pen, x1, y1, width, height); 
g1.DrawString("class Name", new Font("Arial", 10), new SolidBrush(Color.Black), x1,(y1 +5)); //TextRenderingHint 
g1.DrawLine(pen, x1, y1 + 23, x1 + width, y1 + 23); 
g1.DrawString("+ attribute :type ", new Font("Arial", 10), new SolidBrush(Color.Black), x1, (y1 + 30)); 
g1.DrawLine(pen, x1, y1 + 48, x1 + width, y1 + 48); 
g1.DrawString("+ operation (args list):return", new Font("Arial", 10), new SolidBrush(Color.Black), x1, (y1 + 55)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:44:29.107

好吧，你不能。
您不是在使用变量，而是在屏幕上呈现输出 -> 您绘制了一些东西。您需要找到该区域，将其擦除并重新绘制字符串。
如果要编辑内容，则需要将文本框或标签等控件集成到图表中。

# c - 声明一个大小为零的数组

> ID：16105837
> 
> 赞同：0
> 
> 时间：2013-04-19T13:31:23.313
> 
> 标签：c

我尝试声明一个大小为 0 的数组`a`：

```
int a[0]; 
```

我的 VC++ 6 编译器抛出无法创建零大小数组的错误。

如果我尝试在结构内部进行相同的声明，我不会收到任何错误。

```
struct st
{
    int a[0];
} 
```

代码被编译和链接，没有任何错误。有人可以帮助我了解编译器在上述两种情况下的反应。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:34:46.303

该结构是一种特殊情况。将空数组声明为结构的最后一个成员是一种常见模式，其中结构实际上是更大的可变长度内存块的一部分。有关更多说明，请参阅[结构中的空数组。](http://bytes.com/topic/c/answers/219484-empty-arrays-structs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:47:41.590

一些编译器支持使用零大小数组作为结构的最后一个元素的扩展，以表明您打算在那里分配一个您还不知道其大小的数组。然后，您可以使用该结构成员（大小为零的数组）来访问该数组的元素。

请注意，这不是 C89 的标准功能，C99 提供了替代解决方案：

```
struct st
{
    int a[];
} 
```

# jquery - jquery-# 是什么，我可以从中获取 DOM-Element 吗？

> ID：16105838
> 
> 赞同：0
> 
> 时间：2013-04-19T13:31:34.070
> 
> 标签：jquery

我想知道为什么这种方法：

```
window.location.hash = JSON.stringify($("body")[0]); 
```

将某种 jquery-id 添加到哈希中。它看起来像这样：

```
foo.htm#{"jQuery18305139440292647334":13} 
```

这个“id”是什么（怎么称呼？）有没有办法从这个id返回到DOM元素？页面重新加载后这个 id 是否一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:25:20.607

您的问题是它`JSON.stringify()`不适合序列化 DOM 元素或任何其他循环结构（如 jQuery 对象）。

除此之外，`JSON.stringify()`是浏览器特有的功能。您显然在 Firefox 中测试了您的代码，因为如果您尝试在 chrome 中执行相同操作，您将不会得到任何输出。

您可能会在此处找到更多有用的信息：[即使存在循环引用，如何将 DOM 节点序列化为 JSON？](https://stackoverflow.com/questions/2303713/how-to-serialize-dom-node-to-json)

至于为什么你得到随机数的问题，如果你问我，那只是一些 Firefox 的幕后魔术。要点是，您尝试做的事情不受支持或记录在案，并且可能总是会产生意想不到的结果。

我也不确定您要做什么，但是如果您打算从 URL 的井号标签中引用特定的 DOM 元素，请考虑添加 jQuery 选择器。

```
window.location.hash = encodeURIComponent('body:first');
// wil result in URL like: http://foo.htm#body%3Afirst 
```

然后在页面加载哈希后，您可以像这样检索元素：

```
var myjQueryObject = $(window.location.hash); 
```

# spring - Spring Security 3.1.3 @EnableWebSecurity

> ID：16105844
> 
> 赞同：2
> 
> 时间：2013-04-19T13:31:51.363
> 
> 标签：spring, spring-mvc, spring-security

我在 Spring Security 3.1.3 中找不到包含 @EnableWebSecurity 的包。我添加了 core、config、web 和 ldap 安全包，但注释仍然不可用。是否已被另一个注释取代？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:36:57.933

我认为 java 配置支持尚未随 Spring Security 一起发布，但可作为[spring-security-javaconfig](https://github.com/SpringSource/spring-security-javaconfig/blob/master/README.md)中的一个单独模块使用。请参阅链接页面中有关如何将 jar 包含到您的 Maven 构建中的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T09:13:14.827

我遇到了同样的问题，并且能够通过在 build.gradle 中添加“spring-boot-starter-security”作为依赖项来解决它，如可用的春季“入门”指南@ [https://spring.io/guides中所述/gs/安全网络/](https://spring.io/guides/gs/securing-web/)

# jquery - 如何在新窗口中加载部分视图？

> ID：16105845
> 
> 赞同：0
> 
> 时间：2013-04-19T13:31:52.937
> 
> 标签：jquery, asp.net-mvc, window.open, asp.net-mvc-partialview

我有一个 MVC 部分视图。我尝试通过调用控制器名称和操作名称来使用 window.open 加载它。我从操作中得到了相关的部分视图，但没有指向样式表和脚本的链接，因为这是一个新窗口。请问我该如何解决这个问题？

这是我正在使用的 javascript 代码：

```
 function OpenNewWindowForDetail(model) {
    $.ajax({
        url: '@Url.Action("ActionName", "ControllerName")',
        dataType: 'html',
        data: { 
              userid: model.UserId
        },
        type: 'POST',
        success: function (data) {
            var win = window.open('about:blank');
            with (win.document) {
                open();
                write(data);
                close();
            }

        }
    });

} 
```

顺便说一下，所有到样式表文件和 javascript 文件的链接都在 layout.cshtml 中。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:48:57.837

您应该将您的操作修改为带有布局的常规视图，而不是部分视图。在这种情况下没有理由使用局部视图。

也没有理由使用 AJAX。简单的锚`target='_blank'`就足够了。userId 可以通过 GET 参数传递。

# data-structures - 如何在 Clojure 中编写一个最短且最惯用的 CLI 计算器

> ID：16105847
> 
> 赞同：2
> 
> 时间：2013-04-19T13:31:57.433
> 
> 标签：data-structures, clojure, idioms

我喜欢通过制作像计算器这样的小工具来学习一门新语言。

虽然我已经搜索了很多关于特定案例的惯用示例（例如数组和列表的惯用用法），但我不知道如何将它们放在一起以**惯用**的方式编写这个小计算器。

所以这是我的代码：

```
(defn pre-process [s]
  "Seperate operands with operators and replace ( with l, ) with r"
  (re-seq #"\d+|[\+\-\*\/lr]" 
          (clojure.string/replace s #"\(|\)" {"(" "l" ")" "r"})))

(defn calc-once [stk] 
  "Take one operator from operator stack and apply it to 
  top two numbers in operand stack"
  (let [opt (:opt stk)
        num (:num stk)
        tmp-num (pop (pop num))
        tmp-opt (pop opt)
        last-two-num [(peek (pop num)) (peek num)]
        last-opt (peek opt)]
    (assoc stk 
           :num (conj tmp-num (apply (eval last-opt) last-two-num))
           :opt tmp-opt)))

(defn clean-stk [stk]
  (loop [stk stk]
    (if (> (count (:opt stk)) 1)
      (recur (calc-once stk))
      (peek (:num stk)))))

(defn calc
  "A simple calculator"
  [s]
  (clean-stk 
    (reduce
      (fn [stk item]
        (let [item (read-string item)
              operators #{'+ '- '* '/}
              prio {'+ 0 ; Define operator priority here
                    '- 0
                    '* 1
                    '/ 1
                    'l -1
                    'r -1
                    'dummy -2}
              add-to-num #(assoc %1 :num (conj (:num %1) %2))
              add-to-opt #(assoc %1 :opt (conj (:opt %1) %2))
              item-prio (get prio item)
              last-prio #(get prio (peek (:opt %)))]
          (cond
            (number? item) ; It's number
            (add-to-num stk item)
            (get operators item) ; It's operator
            (loop [stk stk]
              (if (<= item-prio (last-prio stk))
                (recur (calc-once stk))
                (add-to-opt stk item)))
            (= 'l item) ; (
            (add-to-opt stk item)
            (= 'r item) ; )
            (loop [stk stk]
              (if (not= (peek (:opt stk)) 'l)
                (recur (calc-once stk))
                (assoc stk :opt (pop (:opt stk)))))
            :else
            (println "Unexpected syntax: " item))))
        (apply (partial list {:num '() :opt '(dummy)}) ;; Basic structure of stack
               s)))) 
```

调用后：

```
(calc (pre-process (read-line)))) 
```

它可以计算如下：

```
(1 + 3) * ( 4 + 4)
32 
```

我认为我的代码可以通过

1.  消除那些`cond`

    或者

2.  尝试将其`{:num '() :opt '()}`变成更易于访问的数据结构

，但我不知道。

希望有人可以给我一些建议或指出我的代码（或我的问题的语法：P）的问题。

=====================================谢谢:)========== =======================

谢谢你们的帮助。我修改了我的代码，现在看起来好多了。但我还有一些问题：

1.  我应该将一些不太通用的函数（例如`add-to-num`）放入全局变量中吗？
2.  有没有人发现有时在 FP 中命名一个函数非常困难？特别是对于那些非泛型函数。

这是我的新代码：

```
(def prio 
  {'+ 0 ; Define operator priority here
   '- 0
   '* 1
   '/ 1
   'l -1
   'r -1
   'dummy -2})

(def operators #{'+ '- '* '/})

(defn pre-process [s]
  "Seperate operands with operators and replace ( with l, ) with r"
  (re-seq #"\d+|[\+\-\*\/lr]" 
          (clojure.string/replace s #"\(|\)" {"(" "l" ")" "r"})))

(defn calc-once [stk] 
  "Take one operator from operator stack and apply it to 
  top two numbers in operand stack"
  (let [opt (:opt stk)
        num (:num stk)
        tmp-num (pop (pop num))
        tmp-opt (pop opt)
        last-two-num [(peek (pop num)) (peek num)]
        last-opt (peek opt)]
    (assoc stk 
           :num (conj tmp-num (apply (eval last-opt) last-two-num))
           :opt tmp-opt)))

(defn process-stk [stk checker fn-ret]
  (loop [stk stk]
    (if (checker stk)
      (recur (calc-once stk))
      (fn-ret stk))))

(defn calc
  "A simple calculator"
  [s]
  (process-stk 
    (reduce
      (fn [stk item]
        (let [item (read-string item)
              add-to-num #(assoc %1 :num (conj (:num %1) %2))
              add-to-opt #(assoc %1 :opt (conj (:opt %1) %2))
              item-prio (get prio item)
              last-prio #(get prio (peek (:opt %)))]
          (cond
            (number? item) ; It's number
            (add-to-num stk item)
            (get operators item) ; It's operator
            (process-stk stk #(<= item-prio (last-prio %))
                         #(add-to-opt % item)) 
            (= 'l item) ; (
            (add-to-opt stk item)
            (= 'r item) ; )
            (process-stk stk #(not= (peek (:opt %)) 'l)
                           #(assoc % :opt (pop (:opt %))))
            :else
            (println "Unexpected syntax: " item))))
        (apply (partial list {:num '() :opt '(dummy)}) ;; Basic structure of stack
               s))
    #(> (count (:opt %)) 1)
    #(peek (:num %)))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T10:01:27.630

这是 M Smith 解决方案的正确版本，尽管我`eval`在我的代码中使用了，这通常是一个坏主意。我把它贴在这里，希望它可以帮助别人。

```
(defn calc [ arg ]
  (if (seq? arg)
    (let [[f s & r] arg
          f (calc f)]
      (if (nil? s) 
        f
        (let [[t ft & r2 ] r
              t (calc t)
              new-f ((resolve s) f t)]
          (cond
            (#{"*" "/"} (str s)) 
            (if ft
              (calc (concat `(~new-f) (rest r)))
              new-f)

            (nil? s) f

            :else 
            (if (#{"+" "/"} (str ft))
              (calc (concat `(~new-f) (rest r)))
              ((resolve s) f (calc r)))))))
    arg))

(defn main [inp]
  (let [tr (read-string (str "(" inp ")"))]
    (calc tr))) 
```

例子：

```
(println (main "2 - 4 + 8 * 16"))
(println (main "(1 + 2) * (10 - 4) / 9 * 6"))
(println (main "10 + 2 * 100 / ((40 - 37) * 100 * (2 - 4 + 8 * 16))")) 
```

结果：

```
126
12
1891/189 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:32:54.493

这需要一个宏观解决方案，如下所示。我确实作弊了，因为只有 2 个优先级，所以我不必计算堆栈来跟踪优先级。这个解决方案可以推广，但需要做更多的工作。

要记住 clojure 中宏的技巧是它们采用 clojure 结构（它是列表的嵌套列表）并返回不同的列表列表。宏简单地接受输入，将其`calc`包装在括号中并将其传递给 clojure 阅读器，该阅读器完成将输入字符串解析为符号列表的所有繁重工作。

然后 reorder-equation 函数将中缀转换为前缀顺序列表。该列表由宏返回，然后作为 clojure 代码进行评估。

检查 * 和 / 确保它们首先得到评估。看看它做了什么尝试

```
(reorder-equation '((1 + 3) * (4 + 4)))
 =>   (* (+ 1 3) (+ 4 4)) 
```

如您所见，它采用方程式并将其重写为有效的 clojure 表达式，然后将对其进行评估。

这可能看起来像是作弊，但随着您对 Clojure 越来越熟悉，您会意识到您可以让该语言完成很多繁重的工作。将输入解析为符号列表并将这些符号用作函数名称非常有意义。事实上，任何带有两个参数的函数在我们的计算器中都是有效的：

```
(calc "(1 + 3) < (4 + 4)")
=> true 
```

和

```
(calc "(1 + 3) str (4 + 4)")
=> "48" 
```

编码：

```
(defn reorder-equation [ arg ]
  (if (seq? arg)
    (let [[f s & r] arg
          f (reorder-equation f)]
      (cond
        (#{"*" "/"} (str s)) ( let [[t ft & r2 ] r
                                    t (reorder-equation t)]
                               (if ft
                                 (list ft (list s f t) (reorder-equation r2))
                                 (list s f t)))
        (nil? s) f
        :else (list s f (reorder-equation r))))
    arg))

(defmacro calc [inp] 
  (let [tr (read-string (str "(" inp ")"))]
    (reorder-equation tr))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T05:06:35.833

这是我的解决方案，它不使用正则表达式或宏，而是使用`partition`and`reduce`作为其解析逻辑。

一般的想法是您将用户输入视为初始值之后的符号对序列。所以你的算术表达式本质上是`'(<init-value> (op1 value1) (op2 value2) ...(opN valueN))`当然，`<init-value>`可能本身是一个括号，如果是这样，也必须首先减少。

`partition`然后将符号/值对的序列提供给`reduce`，它构造了一个有效的 Clojure 表达式，其中符号按优先级排列。我停止对无效符号（不是数字列表或符号）的评估，`reduce`方便地退出块`reduced`（在 1.5 中添加）。

一个重要的概念是遇到的任何列表（括号）最终都会归约为值，因此递归地是`reduce`-d。该函数`peel`处理嵌套列表，即`(((1 + 1)))`

它有点冗长（我更喜欢描述性变量名称），但它是正确的。我针对谷歌检查了几个相当复杂的嵌套表达式。

```
(def instructions
  (str "Please enter an arithmetic expression separated by spaces.\n"
       "i.e. 1 + 2 / 3 * 4"))

(defn- error
  ([]    (error instructions))
  ([msg] (str "ERROR: " (if (nil? msg) 
                         instructions 
                         msg))))

(def ^{:private true} operators {'* 1
                                 '/ 1
                                 '+ 0
                                 '- 0})
(def ^{:private true} operator? (set (keys operators)))

(defn- higher-precedence? [leftop rightop]
  (< (operators leftop) (operators rightop)))

(declare parse-expr)

(defn- peel
  "Remove all outer lists until you reach
   a list that contains more than one value." 
  [expr]
  (if (and (list? expr) (= 1 (count expr)))
    (recur (first expr))
    expr))

(defn- read-value [e]
  (if (list? e)
    (parse-expr (peel e))
    (if (number? e) e)))

(defn- valid-expr? [op right]
  (and (operator? op) 
       (or (number? right) (list? right))))

(defn- higher-precedence-concat  [left op right]
  (let [right-value (read-value right)
        last-left-value (last left)
        other-left-values (drop-last left)]
    (concat other-left-values `((~op ~last-left-value ~right-value)))))

(defn- parse-expr [s]
  (let [left             (read-value (first s))
        exprs            (partition 2 (rest s))
        [[op right] & _] exprs]
    (if (and left (valid-expr? op left))
      (let [right (read-value right)]
        (reduce (fn [left [op right]]
                  (if (valid-expr? op right)
                    (if (higher-precedence? (first left) op)
                      (higher-precedence-concat left op right) 
                      (list op left (read-value right)))
                    (reduced nil)))
          (list op left right) (rest exprs))))))

(defn calc [input]
  (try 
    (let [expr (-> (str "(" input ")") 
                   read-string ;; TODO: use tools.reader?
                   peel)]
      (if (list? expr)  
        (if-let [result (eval (parse-expr expr))]
          result
          (error))
        (error)))
  (catch java.lang.RuntimeException ex
    (error (.getMessage ex))))) 
```

[对照谷歌的在线计算器检查的](https://www.google.com/search?num=20&q=10+%2B+2+%2a+100+%2F+%28%2840+-+37%29+%2a+100+%2a+%282+-+4+%2B+8+%2a+16%29%29)示例：

```
(calc "10 + 2 * 100 / ((40 - 37) * 100 * (2 - 4 + 8 * 16))")
=> 1891/189
(double *1)
=> 10.00529100529101 
```

两个限制：表达式必须用空格分隔（即`1+2-3`不支持）[，就像 Incanter 的中缀数学一样](http://data-sorcery.org/2010/05/14/infix-math/)，并且因为我使用`read-string`用户输入可以有尾随括号（我认为这是一个错误，我必须使用更强大的 REPL 实现来修复）。

致谢：我使用[Eric Robert 的*Programming Abstractions in C*](http://www-cs-faculty.stanford.edu/~eroberts/books/ProgrammingAbstractionsInC/)（Addison Wesley，1997 年）作为上述编码的参考。第 14 章“表达式树”描述了一个几乎相同的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T10:15:30.197

我会尝试一下，但我无法让你的代码工作，所以我很难理解每个地方发生了什么。基本上，以下是猜测，并非完整的答案。希望有人可以进来并对其进行一些编辑并使其正常运行。

我将从基本前提开始：在我看来，您可以使用许多嵌套和匿名函数。你在任何地方看到#(xyz) 都可能被拉出到它自己的函数中。我很确定在任何编程语言中，函数内部的函数都是非常糟糕的形式，我觉得这里的形式很糟糕。我首先删除了匿名函数，包括散列函数和原始代码中的 (fn)。

我也不喜欢在我的 let-bindings 中嵌套函数。

```
(def prio 
  {'+ 0 ; Define operator priority here
   '- 0
   '* 1
   '/ 1
   'l -1
   'r -1
   'dummy -2})

(def operators #{'+ '- '* '/})

(defn pre-process [s]
  "Seperate operands with operators and replace ( with l, ) with r"
  (re-seq #"\d+|[\+\-\*\/lr]" 
          (clojure.string/replace s #"\(|\)" {"(" "l" ")" "r"})))

(defn calc-once [stk] 
  "Take one operator from operator stack and apply it to 
  top two numbers in operand stack"
  (let [opt (:opt stk)
        num (:num stk)
        tmp-num (pop (pop num))
        tmp-opt (pop opt)
        last-two-num [(peek (pop num)) (peek num)]
        last-opt (peek opt)]
    (assoc stk 
           :num (conj tmp-num (apply (eval last-opt) last-two-num))
           :opt tmp-opt)))

(defn process-stk [stk checker fn-ret]
  (loop [stk stk]
    (if (checker stk)
      (recur (calc-once stk))
      (fn-ret stk))))

(defn assoc-to-item [item]
  #(assoc %1 item (conj (item %1) %2)))

(defn priority [item]
  (get prio item))

(defn create-checker [op item v]
  (op item v))

(defn pre-calc [stk item s]
  (reduce
   (let [item (read-string item)
         add-to-num (assoc-to-item :num)
         add-to-opt (assoc-to-item :opt)
         item-prio (priority item)
         last-prio (priority (last (:opt)))]
     (cond
      (number? item) ; It's number
      (add-to-num stk item)

      (get operators item) ; It's operator
      (process-stk stk
                   (create-checker <= item-prio (last-prio))
                   add-to-opt) 

      (= 'l item) ; (
      (add-to-opt stk item)

      (= 'r item) ; )
      (process-stk stk
                   (create-checker not= (peek (:opt)) 'l)
                   #(assoc % :opt (pop (:opt %))))
      :else
      (println "Unexpected syntax: " item))))
  (apply (partial list {:num '() :opt '(dummy)}) ;; Basic structure of stack
         s))

(defn calc [s]
  "A simple calculator"
  (process-stk (pre-calc stk item s)
               #(> (count (:opt %)) 1)
               #(peek (:num %)))) 
```

进一步说明：

(peek) 非常模棱两可，我通常不喜欢使用它。从[备忘](http://clojuredocs.org/clojure_core/clojure.core/peek)单：

> 对于列表或队列，与 first 相同，对于向量，与 last 相同，但效率更高。如果集合为空，则返回 nil。

由于我不完全确定您始终使用什么结构（我认为它是 vec？）并且您确实这样做了，因此您可能想使用最后一个或第一个，哪个更合适。虽然它比上一个“效率更高”，但它并不能帮助我理解程序是如何工作的，所以在成品中使用 peek 而不是共享产品（请注意，你也不需要超速）。

我还认为 (cond) 应该明确地进行案例测试。

我试图通过确保 args 不那么模棱两可来使它更“惯用”。在您的原始代码中，您将大量函数（以及嵌套函数的结果）作为一个大参数传递给另一个函数。将所有这些分解为更小的功能是您需要做更多工作的地方。注意 calc 函数中发生的事情是如何更清楚的？

我把 calc 里面的 anon 函数取出来，输入了一个叫做 pre-calc 的函数。我仍然建议从 calc 中提取 anon 函数，并努力澄清 pre-calc 内部发生的事情。它仍然很难阅读，因为我真的无法猜测发生了什么。

我建议从以下内容开始，因为很难看到传入的 args 是什么（减少）。您可以看到这是多么令人困惑，因为我将 item 作为参数传递，然后我遵循您的模式并将 item 传递到 (read-string)，然后我将该结果绑定到 item。我不确定这是否是你的意图，但我肯定不会传入一个名为 let 的 arg，它们会将传递它的结果绑定到通过评估 item 创建的函数中。这给我造成了进一步的困惑，因为您已将 item 传递到 let-bound item-prio。我从来没有这样做过，所以我什至不知道这里是否正在评估 arg 项目或 let-bound 项目。

这是代码的那一部分。请注意现在很容易看到正在减少的内容？

```
(defn stack-binding [item]
  (let [item (read-string item)
        add-to-num (assoc-to-item :num)
        add-to-opt (assoc-to-item :opt)
        item-prio (priority item)
        last-prio (priority (last (:opt)))]
    (cond
     (number? item) ; It's number
     (add-to-num stk item)

     (get operators item) ; It's operator
     (process-stk stk
                  (create-checker <= item-prio (last-prio))
                  add-to-opt) 

     (= 'l item) ; (
     (add-to-opt stk item)

     (= 'r item) ; )
     (process-stk stk
                  (create-checker not= (peek (:opt)) 'l)
                  #(assoc % :opt (pop (:opt %))))
     :else
     (println "Unexpected syntax: " item))))

(defn pre-calc [stk item s]
  (reduce (stack-binding item)
          (apply (partial list {:num '() :opt '(dummy)}) ;; Basic structure of stack
                 s)) 
```

我可以写的还有很多，但正如我所说，我真的不知道一切是如何协同工作的。无论如何，这至少应该显示我在创建这个程序时会使用的一些逻辑。我会尝试更多地概括这一点并保留它，以便每个函数只有大约 10 个 LOC。

正如我所说，我希望其他人可以对此进行扩展或将其编辑为更可口的内容。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T04:32:48.910

最小的*惯用*计算器是 REPL！

如果中缀表示法是目标，我会去更改阅读器，以便数字成为算术函数 *、/、+、-、% 等的函数，因此 (7 + 5) 将被读取为 7，作为 Clojure函数（除了作为 java.lang.Number 之外），可以将 + 5 作为参数，类似于在 Smalltalk 中数字可以将算术运算理解为消息的方式。

# html - 在浏览器调整大小时将元素移动到新行

> ID：16105849
> 
> 赞同：1
> 
> 时间：2013-04-19T13:32:00.977
> 
> 标签：html, css, css-float

我正在寻找一种可以根据浏览器大小动态移动元素的解决方案。

例子：

我将使用“X”作为元素的示例

如果一个用户正在以类似于 Mac 的分辨率查看，他们将看到

XXXXXX - LI/DIV 的最大数量

如果浏览器被调整到一半大小，他们会看到

XXX - LIs / DIVs 数量的一半

尝试和复制的最佳方法是什么？在这里可以看到一个工作示例：[http ://www.therugcompany.com/gb/collection.html](http://www.therugcompany.com/gb/collection.html)

感谢寻找！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:34:02.957

如果 LI/DIV 是浮动元素，随着容器宽度变小，它们自然会下降到下一行。

W3Schools 有一个很好的例子来说明你所描述的，这里： [http ://www.w3schools.com/css/tryit.asp?filename=trycss_float_elements](http://www.w3schools.com/css/tryit.asp?filename=trycss_float_elements)

这来自主要的 CSS Float 主题页面，这里： [http ://www.w3schools.com/css/css_float.asp](http://www.w3schools.com/css/css_float.asp)

# css - 如何摆脱 chrome 浏览器中 textarea 底部与其包装 div 之间的差距？

> ID：16105854
> 
> 赞同：3
> 
> 时间：2013-04-19T13:32:10.043
> 
> 标签：css, google-chrome, html, textarea

我正在尝试在[https://gist.github.com/](https://gist.github.com/)页面中创建一个类似于描述字段的框。[这](http://jsfiddle.net/DCzBM/)是我的最小示例。如您所见（仅在 chrome 中），包装 div 之间的 textarea 底部有一个间隙。我怎样才能摆脱它？

```
<div style="
    padding: 3px;
    background-color: #eee;
    border-radius: 3px;
    width: 200px;">

      <div style="border: 1px solid #ccc;">
         <textarea style="width: 194px; resize: vertical; border: 0px; height: 124px; margin: 0px;"></textarea>
      </div>
    </div> 
```

这里有一个类似但很老的问题[，](https://stackoverflow.com/questions/789479/mozilla-3-0-8-and-chrome-height-in-em-bug-workaround)答案没有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T19:27:43.417

诀窍是把 textarea`display: block;`归功于[yuxel](https://twitter.com/yuxel)

只是一个说明：css 重置（雅虎的）不会改变 textarea 的显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:34:18.343

```
<div style="
padding: 3px;
background-color: #eee;
border-radius: 3px;
width: 200px;">

  <div style="border: 1px solid #ccc; margin:0; padding:0;">
     <textarea style="width: 194px; resize: vertical; border: 0px; height: 124px; margin: 0px; top:0; right:0; bottom:0; left:0;"></textarea>
  </div>
</div> 
```

是这样吗？

# powerbuilder - PowerBuilder - 来自光标的动态数据窗口

> ID：16105855
> 
> 赞同：1
> 
> 时间：2013-04-19T13:32:11.140
> 
> 标签：powerbuilder, datawindow

如何在 PowerBuilder 中创建动态数据窗口？

我在数据库中有返回游标的程序。如何使用此光标创建带有列的 DataWindow？

示例 1：光标：

```
SELECT DATA, ID FROM TABLE1
I want DW with columns:
DATA, ID 
```

示例 2：光标：

```
SELECT DATA, ID, COUNTRY FROM TABLE1
I want DW with columns:
DATA, ID, COUNTRY 
```

如何创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:39:47.733

您需要的是 Syntaxfromsql 函数。你可以在这里阅读更多：

[http://infocenter.sybase.com/archive/index.jsp?topic=/com.sybase.help.pb_10.5.psref/html/psref/CCJCHAJI.htm](http://infocenter.sybase.com/archive/index.jsp?topic=/com.sybase.help.pb_10.5.psref/html/psref/CCJCHAJI.htm)

对于您的示例：

```
string  ls_sql_syntax, ls_dw_source, ERRORS

ls_sql_syntax   = "SELECT DATA, ID, COUNTRY FROM TABLE1"
ls_dw_source    = SQLCA.SyntaxFromSQL(ls_sql_syntax, "Grid", ERRORS)
IF Len(ERRORS) > 0 THEN
    MessageBox("Caution", "SyntaxFromSQL caused these errors: " + ERRORS)
    RETURN 0
END IF
dw_work.Create( ls_dw_source, ERRORS)
IF Len(ERRORS) > 0 THEN
    MessageBox("Caution", "Create cause these errors: " + ERRORS)
    RETURN 0
END IF 
```

我们假设 dw_work 是数据窗口控件的名称。创建此“基本”数据窗口后，您可以在运行时使用 Modify 方法对其进行自定义。您可以设置几乎所有内容（宽度、高度、字体大小、颜色等）

更多信息在这里：

[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc00044_0250/html/dwprgnet/X_ref299343589.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc00044_0250/html/dwprgnet/X_ref299343589.htm)

我希望这会有所帮助。请随时询问更多。我们在我们的项目中大量使用这个动态数据窗口概念。

兄弟。加博尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T17:07:03.520

您可以使用 DataWindow 或 DataStore 的 Create() 函数轻松动态地动态创建数据对象，将语法正确的 DataWindow 源传递给它（就像您在 IDE 中的 DataWindow 上编辑源时看到的那样）。甚至还有一个函数，Transaction 对象的 SyntaxFromSQL()，它将帮助您从 SELECT 语句构建语法，尽管您可以根据需要构建此语法字符串。

我在您的问题中看到的问题是您不是从 SELECT 语句开始，而是从从数据库传回的游标对象开始。我不相信 PB 中的任何地方都支持这种游标。（您可以在 PowerScript 中创建光标，但据我了解，这是不同的。）因此，由于没有与 DBMS 生成的光标兼容的 DataWindow 语法，**我相信您的问题的答案就目前而言，它无法完成**。

如果您可以控制存储过程，另一种选择是将其更改为传回 SELECT 语句的字符串。这样，您不仅可以动态创建 DataWindow 语法 (SyntaxFromSQL()) 并生成 DataWindow (Create())，而且还可以获得更好的性能，因为 DataWindow*在大多数情况下*（例如，不是在 RetrieveRow 事件发生时） coded) 将使用“一个”网络事务在尽可能少的网络块中检索整个数据集，而游标一次只能检索一行。

祝你好运，

特里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:56:23.167

您可以向您的框架添加一个函数，该函数返回由提供的 SQL SELECT 动态创建的 DataStore。它的代码在[这里](http://forum.powerbuilder.us/viewtopic.php?f=4&t=12)。

# c# - 逐行读取大文本文件并搜索字符串

> ID：16105856
> 
> 赞同：2
> 
> 时间：2013-04-19T13:32:19.480
> 
> 标签：c#, string, file

我目前正在开发一个读取大约 50000 行文本文件的应用程序。对于每一行，我需要检查它是否包含特定的字符串。

目前，我使用常规`System.IO.StreamReader`方式逐行读取我的文件。

问题是文本文件的大小每次都会改变。我做了几个测试性能，我注意到当文件大小增加时，读取一行需要更多的时间。

### 例如 ：

读取包含 5000 行的 txt 文件：0:40
读取包含 10000 行的 txt 文件：2:54

读取 2 倍大的文件需要 4 倍的时间。我无法想象读取 100000 行文件需要多少时间。

这是我的代码：

```
using (StreamReader streamReader = new StreamReader(this.MyPath))
{
     while (streamReader.Peek() > 0)
     {
          string line = streamReader.ReadLine();

          if (line.Contains(Resources.Constants.SpecificString)
          {
               // Do some action with the string.
          }
     }
} 
```

有没有办法避免这种情况：更大的文件 = 更多的时间来阅读一行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T13:38:01.180

尝试这个：

```
var toSearch = Resources.Constants.SpecificString;
foreach (var str in File.ReadLines(MyPath).Where(s => s.Contains(toSearch))) {
    // Do some action with the string
} 
```

这通过在循环之前缓存值来避免在每次迭代中访问资源。如果这没有帮助，请尝试`Contains`根据高级字符串搜索算法（例如[KMP](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm) ）编写自己的算法。

* * *

注意：请务必使用[File.ReadLines](https://msdn.microsoft.com/en-us/library/dd383503%28v=vs.110%29.aspx)来懒惰地读取行（不像类似的方式`File.ReadAllLines`一次读取所有行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:37:50.227

使用`RegEx.IsMatch`，您应该会看到一些性能改进。

```
using (StreamReader streamReader = new StreamReader(this.MyPath))
{
 var regEx = new Regex(MyPattern, RegexOptions.Compiled);

 while (streamReader.Peek() > 0)
 {
      string line = streamReader.ReadLine();

      if (regEx.IsMatch(line))
      {
           // Do some action with the string.
      }
 }
} 
```

但是，请记住使用已编译的 RegEx。这是一篇[相当不错的文章](http://nathanbrixius.wordpress.com/2010/06/03/which-is-faster-regex-ismatch-or-string-contains/)，其中包含一些您可以查看的基准。

快乐编码！

# android - 如何使EditText中的文本垂直（Android）

> ID：16105861
> 
> 赞同：6
> 
> 时间：2013-04-19T13:32:36.773
> 
> 标签：android, android-edittext

（抱歉我的问题很糟糕。我现在已经更新了）

我怎样才能使它在 XML 文件中？我尝试使用以下代码，但不正确（我使用“android:rotation="-90" 进行旋转。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<FrameLayout
    android:layout_width="141dp"
    android:layout_height="200dp"
    android:layout_weight="0.41"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/sidebar_title"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/shape_card_sidebar"
        android:inputType="text"
        android:rotation="-90"
        android:text="I want to be like this" >
    </EditText>
</FrameLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/ZAe9h.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:49:02.857

You're going to run into several problems if you try to do it that way. The most obvious issue will be the incorrect measurement. Instead you should create a custom view. Something like this:

```
public class RotatedTextVew extends TextView {
    public RotatedTextView(Context context) {
        super(context);
    }

    public RotatedTextView(Context context, AttributeSet attrs) {
        super(context, attrs)
    }

    public RotatedTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // Switch dimensions
        super.onMeasure(heightMeasureSpec, widthMeasureSpec);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.save();
        canvas.rotate(90);
        super.onDraw(canvas);
        canvas.restore();
    }
} 
```

I haven't actually tested this, but this is how I'd start.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:54:22.043

将您的**FrameLayout**替换为 < **Relative** > 或 < **LinearLayout** >。还要设置父布局的 android:gravity="center" 属性。

# regex - 如何评估具有匹配组的数组中的正则表达式？

> ID：16105862
> 
> 赞同：0
> 
> 时间：2013-04-19T13:32:36.780
> 
> 标签：regex, delphi

我需要使用正则表达式解析类似数组的文本并获取匹配组。我要解析的文本的一个示例是：

```
['red','green', 'blue'] 
```

我想使用匹配组，因为我想提取它们。我正在使用这个正则表达式，但它找到的组并不像我预期的那样：

```
\[ *('.+?')( *, *('.+?'))* *\] 
```

这个想法是按以下顺序解析：

*   一个方括号
*   任意数量的空格
*   一组：
    *   单引号
    *   任何字符
    *   单引号
*   零个或多个组：
    *   任意数量的空格
    *   一个逗号
    *   任意数量的空格
    *   一组与
        *   单引号
        *   任何字符
        *   单引号
*   任意数量的空格
*   一个方括号

并得到一组每个解析的数组元素。

你能帮助我吗？

提示：测试正则表达式的简单方法是网站[http://rubular.com](http://rubular.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:37:19.833

这不会是一个极权主义的答案，但我相当肯定你不能通过“*”来检查空格，至少它可能取决于你使用的语言。

这是一个 C# 正则表达式示例，显示了检查空格的一些语言要求：[regex check for white space in middle of string](https://stackoverflow.com/questions/5531079/regex-check-for-white-space-in-middle-of-string)

编辑：我看到你添加了 Ruby 作为你的语言，不幸的是我在 Ruby 中并不冗长，所以我无法帮助你，抱歉。

Edit2：看到你强迫自己进入 Ruby 来调试你的正则表达式语句，我可以建议： http: [//www.debuggex.com/](http://www.debuggex.com/)它试图保持语言独立？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:40:11.377

试试这个正则表达式：，`'([^']+)'`它应该给你以下匹配组`red`，根据[rubular.com](http://rubular.com/)`green``blue`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:09:48.443

**您可以**使用一个正则表达式匹配任意数量的组：

```
^\[\s*|(?:\G'([^']+)'\s*(?:,\s*|]$))+ 
```

或像这样（应该更高效）：

```
^\[\s*+|(?>\G'([^']++)'\s*+(?>,\s*+|]$))++ 
```

这项工作在 ruby​​ 中就像之前问过的那样，在 delphi 中我不知道。

# javascript - 使用 node js 使用输入的用户名发送电子邮件

> ID：16105865
> 
> 赞同：2
> 
> 时间：2013-04-19T13:32:53.747
> 
> 标签：javascript, html, json, node.js

在我的应用程序中，我有一个 html 表单来添加用户。添加用户后，他们将使用`sendmail()`javascript 中的函数获取邮件。一切正常，邮件作为我的标准发送。但我想在我的电子邮件内容中添加用户名。例子：

```
DEAR {USERNAME}

(follwed by my message) 
```

HTML表单是：

```
<form id="frmAddUser" method="post" action="/add_value" class="form-horizontal">
    <div class="control-group">
        <label class="control-label" for="focusedInput">First Name</label>
        <div class="controls">
            <input class="input-xlarge focused" name="txtFirstName" type="text" id="txtFirstName" tabindex="2">
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="focusedInput">Last Name</label>
        <div class="controls">
            <input class="input-xlarge focused" name="txtLastName" type="text" id="txtLastName" tabindex="3">
        </div>
    </div>    

    <div class="form-actions">
        <input id="btnSubmit" class="btn btn-primary" value="Add User" onclick="return validateControls(this.form);" type="submit" />
        <input id="btnCancel" class="btn" value="Clear" onclick="document.getElementById('tsubmit').style.display='none'; document.getElementById('loadeux').style.display=''; return true;" type="submit" />
    </div>
</form> 
```

我的js是这样的：

```
exports.InsertData = function (req, res) {

    var timestamp = new Date();
    console.log(timestamp);

    obj._id = req.body.txtLoginId,
    obj.name = { f: req.body.txtFirstName, l: req.body.txtLastName },
    obj.email = req.body.txtEmailID,
    obj.MobileNo = req.body.txtmobile,
    obj.Phone_Ext = req.body.txtphone,
    obj.status = req.body.ddSfk,
    obj.isAdmin = req.body.ddlAdmin,
    obj.pwd = generatePassword(8),
    obj.ispwdChange = "False",
    obj.stamps = { 
        ins: timestamp,
        Ins_Ip: ipAddress()
    },
    qry.insert(obj.schUserData, obj, function (err, result) {

        if (err)
            return;

        sendMail(result.email, DbConfig.mailConfig.subject,'Dear{{{user}}}, Welcome to Bigtree Entertainment Pvt Ltd, Your Login details are below: your user name is: {{{user}}} and Password is:  '+ result.pwd)
    });

    res.redirect('/Group');
}

///*----------- User Send Mail ---------------*/

function sendMail(toMailId, subject, body) {

    for (var i = 0; i < 1; i++) {
        email.send({
            ssl: true,
            host: DbConfig.mailConfig.host,                     // smtp server hostname
            port: DbConfig.mailConfig.port,                     // smtp server port
            domain: DbConfig.mailConfig.domain,                 // domain used by client to identify itself to server
            to: toMailId,
            from: DbConfig.mailConfig.from,
            subject: subject,
            reply_to: DbConfig.mailConfig.reply_to,
            body: body,
            authentication: DbConfig.mailConfig.authentication, // auth login is supported; anything else is no auth
            username: DbConfig.mailConfig.username,             // username
            password: DbConfig.mailConfig.password,             // password
            debug: DbConfig.mailConfig.debug                    // log level per message
        },
        function (err, result) {

            if (err) { console.log(err); }
        });
    }
} 
```

我的Json是：

```
{ 
    "mongodbUrl":"mongodb://sfk:sfk@192.168.3.115:27017/BMS",
    "mailConfig" :{

        "host": "smtp.gmail.com",            
        "port": 465,                    
        "domain": "[127.0.0.1]",           
        "from":"example@gmail.com" ,
        "subject":"Please Use this Onetime password to create your own password",
        "reply_to": "example@gmail.com",
        "authentication": "login",       
        "username": "example@gmail.com",         
        "password": "paswd",           
        "debug": true      

        }
} 
```

# jquery - 日期范围选择器问题：rp.find('.range-end').datepicker('getDate') 返回 null

> ID：16105869
> 
> 赞同：4
> 
> 时间：2013-04-19T13:33:05.053
> 
> 标签：jquery, jquery-ui, daterangepicker

**设想**

一个非常简单的 daterangepicker 实例：

```
<div class="section">
    <label for="drp">date-range-picker</label>
    <input type="text" id="drp" />
    <script>
        (function(){
            $('#drp').daterangepicker({
                presetRanges: [
                        { text: 'Last 30 days',
                            dateStart: function () { return Date.parse('today').add({day: -30}) },
                            dateEnd: function () { return Date.parse('today').add({day: -1}); }
                        },
                        { text: 'Previous month'
                            , dateStart: function () { return Date.today().add({month:-1}).moveToFirstDayOfMonth()}
                            , dateEnd: function () { return Date.today().add({month:-1}).moveToLastDayOfMonth(); }
                        },
                        { text: 'Current month'
                            , dateStart: function () { return Date.today().moveToFirstDayOfMonth()}
                            , dateEnd: function () { return Date.today().add({day:-1}); }
                        }
                    ],
                presets: {dateRange: 'Select range'},
                rangeStartTitle: 'Start date', rangeEndTitle: 'End date', doneButtonText: 'Done', prevLinkText: 'Prev', nextLinkText: 'Next',
                rangeSplitter: ' - ', dateFormat: "dd/mm/yy", closeOnSelect: true
            });
        })();
    </script>
</div> 
```

其中包括：

```
<script type="text/javascript" language ="javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" language ="javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<script type="text/javascript" language ="javascript" src="client/date.js"></script>
<script type="text/javascript" language ="javascript" src="client/daterangepicker/daterangepicker.jQuery.js"></script> 
```

**问题**

在本地环境中，一切正常。在生产环境中，选择任何预设后会出现以下错误：

```
Uncaught TypeError: Cannot call method 'getDate' of null @daterangepicker.jQuery.js:162 
```

引发错误是因为执行下一条语句时：

var range_end = rp.find('.range-end'); [...] var rangeB = fDate( range_end.datepicker('getDate') );

我快疯了。似乎 daterangepicker 没有在`.range-end`类元素中初始化 datepicker。但我无法弄清楚出了什么问题。

(Chrome) 控制台中没有其他错误。

**参考**

*   [https://github.com/filamentgroup/jQuery-UI-Date-Range-Picker](https://github.com/filamentgroup/jQuery-UI-Date-Range-Picker)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T12:39:04.783

你能提供js小提琴吗？实际上，我无法对您的问题添加评论，因此我必须将其写为答案。

# mysql - 将 csv 文件拆分为块以使用 phpMyAdmin 导入

> ID：16105874
> 
> 赞同：0
> 
> 时间：2013-04-19T13:33:25.230
> 
> 标签：mysql

我需要通过 phpMyAdmin 导入一个 csv 文件，但它大于 2MB。

我已经阅读了答案：

*   使用 mysql 服务器 <file.csv
*   在 mysql 配置中增加上传文件的大小。

我无法使用 mysql，因为我没有直接访问服务器的权限，目前我无法更改配置。

我的问题是：您知道将（正确）分割成块的 csv 文件的程序吗？最喜欢的语言是 Java，但我会检查其他解决方案。

# android - 如何在点击android中的按钮时打开下面的自定义布局对话框？

> ID：16105875
> 
> 赞同：3
> 
> 时间：2013-04-19T13:33:31.890
> 
> 标签：android

我想在点击按钮上制作下拉自定义对话框。

![在此处输入图像描述](https://i.stack.imgur.com/8x1xT.png)

**单击计数器按钮，布局将显示在按钮下方。**

我看到了很多链接，但它们只打开列表：-

[操作栏下拉菜单打开和关闭项目样式](https://stackoverflow.com/questions/15824793/action-bar-dropdown-open-and-closed-item-styles)

**新的快速操作包**

上面的链接对我来说不是完整的。

**但是当我使用对话框时，它会出现在按钮的前面。**

所以如果你知道然后帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:45:30.000

我认为你可以通过使用来实现你正在寻找的东西

## getLocationOnScreen() api &

## 弹出窗口组件。

示例代码如下。

```
int[] location = new int[2];
counterView.getLocationOnScreen(location);
final View mView = inflater.inflate(R.layout.xxxx, null, false);
final PopupWindow popUp = new PopupWindow(mView, Width, Height, false);
popUp.setTouchable(true);
popUp.setFocusable(true);
popUp.setOutsideTouchable(true);
popUp.showAtLocation(view, Gravity.NO_GRAVITY, location[0], location[1]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-16T13:24:25.640

PopupWindow 也有一个方法`showAsDropDown`将弹出窗口显示为视图下方的下拉列表

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-07T12:34:43.690

```
public class MainActivity extends AppCompatActivity {

    private Button button;
    private WindowManager.LayoutParams layoutParams;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            ((Button) findViewById(R.id.button)).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                final View mView = LayoutInflater.from(MainActivity.this).inflate(R.layout.drop_down_layout, null, false);
                final PopupWindow popUp = new PopupWindow(mView, LinearLayout.LayoutParams.WRAP_CONTENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT, false);
                popUp.setTouchable(true);
                popUp.setFocusable(true);
                popUp.setOutsideTouchable(true);

            //Solution
                popUp.showAsDropDown(findViewById(R.id.button));
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T09:47:27.163

我试图在 PopupWindow 中**wrap_content**并感到惊讶，因为它仍然有效。

```
PopupWindow popupWindow = new PopupWindow(testView, LinearLayout.LayoutParams.WRAP_CONTENT,
                        LinearLayout.LayoutParams.WRAP_CONTENT, false); 
```

# c++ - makefile 有问题，没有参考

> ID：16105877
> 
> 赞同：0
> 
> 时间：2013-04-19T13:33:32.687
> 
> 标签：c++, makefile, cppunit

我有两个课程：EtatTrafic 和 EtatTraficTest。

这是我的生成文件：

```
#Makefile
CXX = g++
LDLIBS = -lcppunit

# a modifier en fonction des cas
OBJS = EtatTrafic.o EtatTraficTest.o 

all : TestUnitaire

TestUnitaire: $(OBJS)
    $(CXX) $^ -o $@ $(LDFLAGS) $(LDLIBS)

#création des objets
%.o : %.cpp
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -o $@ -c $<

# a modifier en fonction des cas
EtatTrafic.o: EtatTrafic.hpp 
EtatTraficTest.o: EtatTrafic.hpp EtatTraficTest.hpp 

clean:
    rm *.o $(EXEC) 
```

当我尝试编译时，会出现一些错误，例如：

```
EtatTraficTest.o: In function `EtatTraficTest::testConstructeur()':
EtatTraficTest.cpp:(.text+0xab): undefined reference to `EtatTrafic::EtatTrafic(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int)'
EtatTraficTest.cpp:(.text+0xeb): undefined reference to `EtatTrafic::EtatTrafic(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int)'
EtatTraficTest.cpp:(.text+0x169): undefined reference to `EtatTrafic::getNbVoitures() const'
EtatTraficTest.cpp:(.text+0x256): undefined reference to `EtatTrafic::getNbPietons() const' 
```

似乎我的课程之间没有联系......

我想要，这些是 EtatTrafic 的 .hpp 和 .cpp ：

```
//EtatTrafic.hpp
    #ifndef ETATTRAFIC_HPP_
#define ETATTRAFIC_HPP_

using namespace std;

/**
 * @class EtatTrafic
 * @brief Gestion des etats du trafic
 * @author Fasy
 * @author Pothier
 * @author Duval
 * @author Lupascu
 * @author Mira
 * @version 1.0
 * @date avril 2013
 */
class EtatTrafic {

    private :
    unsigned int nbPietons;
    unsigned int nbVoitures;
    unsigned int nbCamions;
    unsigned int nbMotos;
    unsigned int nbVelos;
    unsigned int nbAccident;

public :

    /**
     * @fn EtatTrafic(unsigned int nbPietons,unsigned int nbVoitures,unsigned int nbCamions,unsigned int nbMotos, unsigned int nbVelos)
     * @brief Constructeur paramétré
     * @param nbPietons : nombre de pietons presents dans la ville
     * @param nbVoitures : nombre de voitures presentes dans la ville
     * @param nbCamions : nombre de camions presents dans la ville
     * @param nbMotos :     nombre de motos presents dans la ville
     * @param nbVelos : nombre de velos presents dans la ville
     */
    EtatTrafic(unsigned int nbPietons,unsigned int nbVoitures,unsigned int nbCamions,unsigned int nbMotos, unsigned int nbVelos);

    /**
     * @fn unsigned int calculNbVehicules()
     * @brief calcul du nombre total de vehicules existants
     */
    unsigned int calculNbVehicules();
    /**
     * @fn unsigned int getNbAccidents()
     * @brief renvoie le nombre d'accidents
     */
    unsigned int getNbAccidents();

    /**
     * @fn unsigned int setNbAccidents()
     * @brief change le nombre d'accidents
     */
    unsigned int setNbAccidents();

    /**
     * @fn void setNbVoitures(unsigned int nbVt)
     * @brief changer le nombre de voitures dans la ville
     * @param nbVt :le nouveau nombre de voitures
     */
        void setNbVoitures(unsigned int nbVt);
        /**
         * @fn void setNbPietons(unsigned int nbP)
         * @brief changer le nombre de pietons dans la ville
         * @param nbVt :le nouveau nombre de pietons
         */
        void setNbPietons(unsigned int nbP);
        /**
         * @fn void setNbCamions(unsigned int nbC)
         * @brief changer le nombre de camions dans la ville
         * @param nbVt :le nouveau nombre de camions
         */
        void setNbCamions(unsigned int nbC);
        /**
         * @fn void setNbVelos(unsigned int nbVl)
         * @brief changer le nombre de Velos dans la ville
         * @param nbVt :le nouveau nombre de velos
         */
         void setNbVelos(unsigned int nbM);

         /**
          * @fn void setNbMotos(unsigned int nbM)
          * @brief changer le nombre de motos dans la ville
          * @param nbM :le nouveau nombre de motos
          */
         void setNbMotos(unsigned int nbM);
         /**
          * @fn unsigned int getNbVoitures() const
          * @brief Obtenir le nobre de voitures de la ville
          */
         unsigned int getNbVoitures() const;
         /**
          * @fn unsigned int getNbPietons() const
          * @brief Obtenir le nobre de pietons de la ville
          */
         unsigned int getNbPietons() const;
         /**
          * @fn unsigned int getNbCamions() const
          * @brief Obtenir le nobre de camions de la ville
          */

         unsigned int getNbCamions() const;
         /**
          * @fn unsigned int getNbVelos() const
          * @brief Obtenir le nobre de velos de la ville
          */
         unsigned int getNbVelos() const;

         /**
          * @fn unsigned int getNbMotos() const
          * @brief Obtenir le nobre de motos de la ville
          */
         unsigned int getNbMotos() const;

};

#endif /* ETATTRAFIC_HPP_ */

    // EtatTrafic.cpp

#include <cppunit/CompilerOutputter.h>
#include <cppunit/extensions/TestFactoryRegistry.h>
#include <cppunit/ui/text/TestRunner.h>

int main(int argc, char* argv[])
{
  // Get the top level suite from the registry
  // déclaration d'une suite de tests
  CppUnit::Test *suite = CppUnit::TestFactoryRegistry::getRegistry().makeTest();

  // Adds the test to the list of test to run
  // chargement de la suite de tests présentée dans la classe ...Test.hpp
  CppUnit::TextUi::TestRunner runner;
  runner.addTest( suite );

  // Change the default outputter to a compiler error format outputter
  // transformation du format de sortie
  runner.setOutputter( new CppUnit::CompilerOutputter( &runner.result(),
                                                        std::cerr ) );
  // Run the tests.
  // lancement des tests
  bool wasSucessful = runner.run();

  // Return error code 1 if the one of test failed.
  // retour
  return wasSucessful ? 0 : 1;
} 
```

这些是 EtatTraficTest 的 .hpp 和 .cpp ：

```
//EtatTrafictest.chpp
#ifndef ETATTRAFICTEST_H
#define ETATTRAFICTEST_H

//ligne a recopier
#include <cppunit/extensions/HelperMacros.h>

class EtatTraficTest : public CppUnit::TestFixture
{
//ligen a recopier (change le "MoneyTest")
 CPPUNIT_TEST_SUITE( EtatTraficTest );

 //ordre d'execution des tests
  CPPUNIT_TEST( testConstructeur );
  CPPUNIT_TEST( testCalculNbVehicules );

  //ligen a recopier
  CPPUNIT_TEST_SUITE_END();

public:

//déclaration des méthodes tests
  void testConstructeur();
  void testCalculNbVehicules();
  void testCalculNbAccident();

};

#endif

// EtatTraficTest.cpp
//include à appliquer sur nos classes
#include "EtatTraficTest.hpp"
#include "EtatTrafic.hpp"

//ligne à recopier tel quel
// Registers the fixture into the 'registry'
CPPUNIT_TEST_SUITE_REGISTRATION( EtatTraficTest );

//déclaration des méthodes tests 
// attention ces méthodes ne contiennent pas de paramètres !
void  EtatTraficTest::testConstructeur()
{
  // Set up
  // déclation des objets qui vont etre utilisés
  const unsigned int nbPietons0 =0;
  const unsigned int nbPietons1 =3;
  //const unsigned int nbPietons2 = ;
  const unsigned int nbVoitures0 =0;
  const unsigned int nbVoitures1 =2;  
  //const unsigned int nbVoitures2 = ;  
  const unsigned int nbCamions0 =0;  
  const unsigned int nbCamions1 =5;    
  //const unsigned int nbCamions2 = ;    
  const unsigned int nbMotos0 =0;    
  const unsigned int nbMotos1 =6;      
  //const unsigned int nbMotos2 = ;      
  const unsigned int nbVelos0 =0;   
  const unsigned int nbVelos1 =4;
  //const unsigned int nbVelos2 = ;

  // Process
  // appel de la méthode à tester (ici il s'agit du constructeur)

  //cas limite
   EtatTrafic etat0(nbPietons0, nbVoitures0, nbCamions0, nbMotos0, nbVelos0);

   //cas normal
   EtatTrafic etat1(nbPietons1, nbVoitures1, nbCamions1, nbMotos1, nbVelos1);

   //cas d'erreur
   //EtatTrafic etat2(nbPietons2, nbVoitures2, nbCamions2, nbMotos2, nbVelos2);

  // Check
  // lancement des tests unitaires 

  CPPUNIT_ASSERT_EQUAL( nbVoitures0, etat0.getNbVoitures() );
  CPPUNIT_ASSERT_EQUAL( nbPietons0, etat0.getNbPietons() );
  CPPUNIT_ASSERT_EQUAL( nbCamions0, etat0.getNbCamions() );
  CPPUNIT_ASSERT_EQUAL( nbMotos0, etat0.getNbMotos() );
  CPPUNIT_ASSERT_EQUAL( nbVelos0, etat0.getNbVelos() );

  CPPUNIT_ASSERT_EQUAL( nbVoitures1, etat1.getNbVoitures() );
  CPPUNIT_ASSERT_EQUAL( nbPietons1, etat1.getNbPietons() );
  CPPUNIT_ASSERT_EQUAL( nbCamions1, etat1.getNbCamions() );
  CPPUNIT_ASSERT_EQUAL( nbMotos1, etat1.getNbMotos() );
  CPPUNIT_ASSERT_EQUAL( nbVelos1, etat1.getNbVelos() );

  /*CPPUNIT_ASSERT_EQUAL( nbVoitures2, etat2.getNbVoitures() );
  CPPUNIT_ASSERT_EQUAL( nbPietons2, etat2.getNbPietons() );
  CPPUNIT_ASSERT_EQUAL( nbCamions2, etat2.getNbCamions() );
  CPPUNIT_ASSERT_EQUAL( nbMotos2, etat2.getNbMotos() );
  CPPUNIT_ASSERT_EQUAL( nbVelos2, etat2.getNbVelos() );*/

}
void  EtatTraficTest::testCalculNbVehicules()
{
  // Set up
  // déclation des objets qui vont etre utilisés
  const unsigned int nbPietons0 =0;
  const unsigned int nbPietons1 =3;
  //const unsigned int nbPietons2 = ;
  const unsigned int nbVoitures0 =0;
  const unsigned int nbVoitures1 =2;  
  //const unsigned int nbVoitures2 = ;  
  const unsigned int nbCamions0 =0;  
  const unsigned int nbCamions1 =5;    
  //const unsigned int nbCamions2 = ;    
  const unsigned int nbMotos0 =0;    
  const unsigned int nbMotos1 =6;      
  //const unsigned int nbMotos2 = ;      
  const unsigned int nbVelos0 =0;   
  const unsigned int nbVelos1 =4;
  //const unsigned int nbVelos2 = ;

const unsigned int nbVehiculeTotale0= nbPietons0+nbVoitures0+nbCamions0+nbMotos0+nbVelos0;
const unsigned int nbVehiculeTotale1= nbPietons1+nbVoitures1+nbCamions1+nbMotos1+nbVelos1;
//const unsigned int nbVehiculeTotale2= nbPietons2+nbVoitures2+nbCamions2+nbMotos2+nbVelos2;
 // Process
  // appel de la méthode à tester (ici il s'agit du constructeur)

  //cas limite
   EtatTrafic etat0(nbPietons0, nbVoitures0, nbCamions0, nbMotos0, nbVelos0);

   //cas normal
   EtatTrafic etat1(nbPietons1, nbVoitures1, nbCamions1, nbMotos1, nbVelos1);

   //cas d'erreur
   //EtatTrafic etat2(nbPietons2, nbVoitures2, nbCamions2, nbMotos2, nbVelos2);

   // Check
  // lancement des tests unitaires 

  CPPUNIT_ASSERT_EQUAL(nbVehiculeTotale0, etat0.calculNbVehicules() );
  CPPUNIT_ASSERT_EQUAL( nbVehiculeTotale1, etat1.calculNbVehicules() );
  //CPPUNIT_ASSERT_EQUAL( nbVehiculeTotale2, etat2.calculNbVehicules() );

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:13:19.157

您的编译器抱怨它找不到 的成员的定义`EtatTrafic`，例如`EtatTrafic::getNbVoitures()`. 这个方法是在（文件说该方法存在）中*声明*的，但它没有在您向我们展示的任何文件中*定义（没有文件说明该方法的**作用*）。`EtatTrafic.hpp`

 **按照惯例，方法的定义`EtatTrafic`应该在 中`EtatTrafic.cpp`，但它们不是。如果它们不存在，则必须编写它们；如果它们存在于其他文件中，则必须将它们移动到`EtatTrafic.cpp`，或将适当的目标文件添加到 makefile 变量`OBJS`中。**

# iphone - 如何使用 AV Foundation 连续捕获图像？

> ID：16105879
> 
> 赞同：0
> 
> 时间：2013-04-19T13:33:38.467
> 
> 标签：iphone, ios, avfoundation, avcapturesession

我正在尝试使用 AV Foundation 实现 QRcode 阅读器。我的计划是连续捕获图像，将捕获的图像发送到二维码检测器，直到识别出有效代码。检测器需要`CGImageRef`或`UIImage`作为输入。我的问题是：

1.  我应该使用哪个输出：`AVCaptureVideoDataOutput`或`AVCaptureStillImageOutput`？
2.  如何连续拍摄每张图像，例如 500 毫秒？间隔应该多长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:06:47.610

`AVCaptureVideoDataOutput`为您提供未压缩的 YUV 帧，如果它支持未压缩的输入，您可以轻松地将其发送到 QRCode 阅读器。因此，您将避免解码操作。

如果`AVCaptureVideoDataOutput`使用，您可以设置帧速率`AVFormatDescription`并将其设置为`AVCaptureDevice`. 启动后，`AVCaptureSession`您会以指定的帧速率连续接收帧，直到停止为止。通常，您可以设置 5 fps 并确保此操作是异步的，并且您最好在不同的线程中处理 QRCode，以便在两个帧捕获事件之间处理 QRCode 解码操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:30:39.933

创建 AVCaptureVideoDataOutput 的实例。将 AVCaptureDataOutput 的 sampleBufferDelegate 设置为您想要接收样本缓冲区的任何类（比如 x）。确认类 x 到 AVCaptureVideoDataOutputSampleBufferDelegate 协议。实现 - captureOutput:didOutputSampleBuffer:fromConnection: 类 x 中该协议的方法。将 AVCaptureVideoDataOutput 实例添加到 AVCaptureSession。然后开始会话。您将收到带有样本缓冲区的回调。

# php - Paypal 定期付款通过 PHP 中的 ACH

> ID：16105880
> 
> 赞同：1
> 
> 时间：2013-04-19T13:33:49.540
> 
> 标签：php, paypal, payment, recurring

我通过 Paypal 网站研究了 PHP 中的定期 ACH 付款，但找不到任何令人满意的解决方案。Paypal 提到了用于 C# 和 Java 的 SDKS 用于 Recurring ACH，但根本没有提到 PHP。是否可以为我的网站编写循环 ACH PHP 脚本？欢迎提出建议。

我已经通过 Paypal pro 集成了定期付款（使用信用卡），但我想通过 ACH 模式（使用银行账户）启用定期订阅的服务。用PHP可以吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:24:28.873

使用 Payflow 系统可以做到这一点，但我不知道我遇到过的任何 PHP 示例。您需要使用其中一个示例作为模型，并为此在 PHP 中构建您自己的代码。

# excel - 如何捕获#REF！在 Excel 中？

> ID：16105884
> 
> 赞同：4
> 
> 时间：2013-04-19T13:33:56.527
> 
> 标签：vba中捕获错误：, excel, excel-formula

我想知道如何`#REF!`在 Excel 中捕获错误。

我可以使用以下代码在[vba中捕获错误：](/questions/tagged/vba "显示标记为“vba”的问题")

```
 If WorksheetFunction.IsError(ActiveCell) Then
         If ActiveCell.Value = CVErr(xlErrRef) Then
              ActiveCell.Value = "Error"
         End If
   End If 
```

我想在 Excel 公式栏中编写相同的函数。任何想法如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:37:02.973

您可以在公式栏中使用 ISERROR 并检查是真还是假

这仅用于识别 isref 错误 =IFERROR(IF(ERROR.TYPE(A1)=4,"Ref Error",A1),"All GOOD")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:02:11.380

`=IF(ISERROR(A1),ERROR.TYPE(#REF!)=ERROR.TYPE(A1),FALSE)`

在 #ref 上返回 true，在所有其他错误上返回 false 或没有错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T13:40:51.577

**请注意**，单元格只会返回计算公式时遇到的*第一个*`#Name?`错误，因此如果单元格在错误之前发生`#Ref!`错误，则无法捕获潜在`#Ref!`错误。

也许是这样的：

`=AND(ISREF(A1),ISERR(A1))`

首先测试单元格是否包含 REFERENCE，然后检查它是否也包含错误。

我修改为使用`IsErr`而不是`IsError`忽略`N/A`类型错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T13:39:10.833

你可以使用公式`IF(ISERROR(ActiveCell),"Error")`

但是，这也会捕获所有其他错误。

# visual-studio-2010 - VS 2012 Intellisense 和 Class 突出显示不完全适用于旧的 ASP.NET 网站项目

> ID：16105885
> 
> 赞同：6
> 
> 时间：2013-04-19T13:33:57.923
> 
> 标签：visual-studio-2010, visual-studio-2012, intellisense, webforms

我的智能感知和类突出显示不适用于 ASP.NET 网站项目之一。 *它适用于所有其他项目，包括其他 ASP.NET 网站项目*，但不是这个。

该项目是用 VS2010 编写的，我继承了它，但我发现如果没有代码突出显示和自动完成，它很难使用！

**注意：我的一般 VS2012 设置似乎是正确的，因为我从未在加载其他项目时遇到过这种情况。我什至创建了一个新的 ASP.NET 网站项目来检查这一点，是的，在新项目中一切正常！**

如果我输入一个应该被识别的单词的第一个字母，例如“ `S`”，`System`那么点击`ctrl-space`会给我一个逻辑运算符、局部变量、类型的选项列表，例如：

`for`

`myLocalVar`

`string`

但没有课程选项 - 所以`System`没有出现，我的任何课程也没有。如果我确实输入了一个完整的类名，那么它将保持黑色并且不会突出显示。

这是智能感知不起作用和缺乏突出显示的两个屏幕截图。任何建议都非常感谢！

![智能感知失败](https://i.stack.imgur.com/ST4i0.png)

![代码高亮失败](https://i.stack.imgur.com/hiTTj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T10:07:45.250

这实际上是**我的 .suo 文件的问题**。这是存储一些用户设置等的文件。

我删除了这个文件，然后重新保存了解决方案（**.sln 文件**）。

下次我打开该网站时，我使用 .sln 文件打开它，而不是作为网站打开它：

> 文件->打开->项目/解决方案**而不是**文件->打开->网站。

希望这对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T04:57:05.027

几个问题，您是否有 ReSharper 或任何其他开发生产力工具可以更改此特定项目的设置？

如果没有，那么您是否查看过此 SO 问题中的建议？

[Intellisense 和代码建议在 Visual Studio 2012 Ultimate RC 中不起作用](https://stackoverflow.com/questions/10992983/intellisense-and-code-suggestion-not-working-in-vs2012-ultimate-rc)

# objective-c - 在 NSSavePanel 中按下 OK 后不能调用 beginSheet？

> ID：16105887
> 
> 赞同：1
> 
> 时间：2013-04-19T13:34:01.427
> 
> 标签：objective-c, cocoa, nsapplication, nssavepanel, cocoa-sheet

我的可可程序有一个保存功能，当用户选择保存目的地时，我将不得不调出另一个 NSPanel，以显示某种状态（即完成保存文件需要多长时间。这是我的代码：

```
- (IBAction)savePressed:(id)sender {
    __block NSSavePanel *saveDlg = [NSSavePanel savePanel];
    // Enable options in the dialog.
    [saveDlg setCanCreateDirectories:YES];
    [saveDlg setAllowedFileTypes:[NSArray arrayWithObject:@"zip"]];
    [saveDlg setCanSelectHiddenExtension:YES];
    [saveDlg beginSheetModalForWindow:self.window completionHandler:^ (NSInteger result) {
        if (result == NSOKButton) {
            [self triggerNSPanel];
        }

        saveDlg = nil;

    }];

}

- (void) triggerNSPanel {
    if (!self.myPanel)
        self.myPanel = [[NSPanel alloc] init];
    [NSApp beginSheet:self.myPanel modalForWindow:self.window modalDelegate:nil didEndSelector:nil contextInfo:nil];
....
} 
```

因此，一旦 NSSavePanel 消失（即按下 ok），我的 NSPanel 会显示 1/2 秒，然后它就消失了，即使我没有调用 NSApp endSheet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:53:23.797

可能是您从完成处理程序中调用 beginSheet 的问题。调用后可能会进行一些清理，从而杀死您的第二张工作表。尝试通过 performSelector:afterDelay 发送 triggerNSPanel（延迟可以为 0，因此它会在下一轮运行循环中触发）。

# jsf - 使用托管 bean 创建导航面板以填充内容面板

> ID：16105893
> 
> 赞同：0
> 
> 时间：2013-04-19T13:34:16.253
> 
> 标签：jsf, jsf-2

我有一个与数据库绑定的 JSF Web 应用程序。我有一个用于导航的左 div 面板和一个用于内容的右 div 面板。我可以用`<h:commandLink>`s 填充左侧的 div 面板来表示书籍章节。但是，我不确定如何连接`<h:commandLink>`s 来触发 bean 方法来调用数据库并用所需的内容填充正确的 div 面板。

这是导航的左侧 div 面板`nav.xhtml`：

```
<ui:composition>
    <h:outputText value="Navigation"/><br/>
    <ui:repeat value="#{tocBean.getTOC()}" var="TOC">       
        <li>   
            <h:form>
                <h:commandLink action="#{contentBean.getContent()}"> #{TOC}   
                    <f:param name="id" value="#{TOC}" />  
                </h:commandLink>  
            </h:form> 
        </li>   
        <!-- NewLine --> 
        <h:outputText value="&#10;" />
    </ui:repeat>  
</ui:composition> 
```

用`TOCBean`书籍章节名称填充列表。我正在尝试`#{contentBean.getContent()}`使用选定的章节名称执行支持 bean 方法，并将右侧的 div 面板填充到`content.xhtml`.

任何建议，将不胜感激。

# sql - Oracle 中的合并不会插入/更新任何行

> ID：16105900
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:34:25.817
> 
> 标签：sql, oracle, plsql, merge

你能建议一下，这个查询有什么问题吗？它总是提取 0 条记录而不是插入数据。我检查了选择查询，它正在返回行。但我不确定合并部分发生了什么错误，它没有插入/更新表。

```
ExtractType         NUMBER(9);
RecordsExtracted    NUMBER(9);
CurStatus           NUMBER(9);
StartDate           date;
ErrorMessage        NVARCHAR2(1000);
LastExtrctTimestamp DATE;
BEGIN
StartDate := sysdate;
ExtractType := 79;

-- Fetching the Last Extract Time Stamp 
Select  max(ExtractTimestamp) INTO LastExtrctTimestamp from ExtractRecords where Status = 2 and  ExtractRecords.ExtractType= ExtractType;

IF LastExtrctTimestamp IS NULL
THEN LastExtrctTimestamp := To_Date('01/01/1901', 'MM/dd/yyyy');
END IF;

MERGE INTO Table MCTH
USING (
    SELECT
            val1, val2, val3, .... val1
    FROM
            View_RPT
    WHERE TransitionDate >= LastExtrctTimestamp
) Core
ON(MCTH.valId= Core.ValId)
WHEN MATCHED THEN
UPDATE SET 
    MCTH.val1= Core.val1,
    MCTH.val2= Core.val2,
    MCTH.val3= Core.val3,
    .
    .
    MCTH.val4= Core.val4
WHEN NOT MATCHED THEN
INSERT (MCTH.val1,MCTH.val2,MCTH.val3,MCTH.val4,
        ...,MCTH.val5)
VALUES (Core.val1,Core.val2,Core.val3,Core.val4,
        ...,Core.val5);
RecordsExtracted := SQL%RowCount;       

DBMS_OUTPUT.put_line('MCTH Records Merged:' || RecordsExtracted);

COMMIT;

END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:16:47.690

将您的 pl/sql 逻辑滚动到合并语句中，您可以更轻松地测试核心是否返回您期望的内容：

```
merge into
  margincalltransitionhistory mcth
using (
  select
    margincalltransitionhistoryid,
    margincallid,
    fromworkflowstatename,
    toworkflowstatename, 
    transitiondate,
    transitionbyname,
    transitioncomment
  from
    margincalltranhistory_rpt
  where
    transitiondate >= (
      select  coalesce(max(extracttimestamp), date '1901-01-01')
      from    extractrecords
      where   status      = 2 and
              extracttype = 79)
  ) core
... 
```

看在上帝的份上，清理你的代码——我不知道你怎么能处理这些乱七八糟的东西。

# wpf - 具有绑定的 WPF 可见性资源

> ID：16105902
> 
> 赞同：4
> 
> 时间：2013-04-19T13:34:30.637
> 
> 标签：wpf, xaml, resources, visibility, .net-4.5

我有一个使用 MVVM Light 的 WPF 应用程序。在一个视图中，我得到了许多使用相同可见性绑定的控件。因为我不喜欢将我的长绑定路径插入到每个控件。我想使用资源...

```
<SomeControl>
  <SomeControl.Resource>
    <Visibility x:Key="myVisibilityResource" >
        <Binding Path="somePath" Converter="BoolToVisibilityConverter"></Binding>
    </Visibility>
  </SomeControl.Resource>
<SomeControl> 
```

在这个版本中，我得到了可见性不支持直接内容的错误。我必须这样写：

```
<Visibility x:Key="myVisibilityResource" >
    Collapsed
</Visibility> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:27:12.403

如果您只想在 XAML 中编写“可见”或“折叠”（如上一个示例中所示），则可以通过绑定来完成，[`ObjectDataProvider`](http://msdn.microsoft.com/en-us/library/system.windows.data.objectdataprovider.methodparameters.aspx)它[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/essfb559.aspx)用于解析给定文本（可以是“可见” 、“折叠”或“隐藏”）：

```
<Grid xmlns:sys="clr-namespace:System;assembly=mscorlib" >
    <Grid.Resources>
        <ObjectDataProvider x:Key="visibilityProvider"
                MethodName="Parse" 
                ObjectType="{x:Type sys:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="Visibility" />
                <sys:String>Visible</sys:String>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Grid.Resources>

    <Button x:Name="button1" Visibility="{Binding Source={StaticResource visibilityProvider}}" />

</Grid> 
```

在上面的代码中，我使用 an`ObjectDataProvider`返回一个[`Visibility`](http://msdn.microsoft.com/en-us/library/system.windows.visibility.aspx)枚举。绑定时的`ObjectDataProvider`调用。`Enum.Parse`按钮的`Visibility`属性绑定到`ObjectDataProvider`. 该`MethodParameters`属性指定 的参数`Enum.Parse`。

不幸的是，没有办法`MethodParameters`直接绑定到底层 ViewModel。如果你想这样做，我想你可以自己写，`ObjectDataProvider`或者你可以使用你自己的类/方法，而不是`Enum.Parse`返回正确的`Visibility`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:11:17.870

这样的事情怎么样？这并不完全符合您的要求，但是您将复制更少的代码，因为您不必每次都包含转换器。

```
<UserControl>
  <Grid>
    <SomeElement x:Name="Master" Visibility="{Binding somePath, Converter={StaticResource BoolToVisibilityConverter}}" />
    <SomeOtherElement Visibility="{Binding Visibility, ElementName=Master}" />
    <SomeOtherElement Visibility="{Binding Visibility, ElementName=Master}" />
  </Grid>
</UserControl> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-13T16:08:35.270

在资源中创建样式：

```
<Style TargetType="Control" x:Key="VisibilityStyle">
            <Setter Property="Visibility" 
 Value="{Binding Converter={StaticResource VisibleIfFalse}}"/>
</Style> 
```

然后只需添加对要隐藏/显示的项目的引用。

```
<TextBlock Text="123" Style="{StaticResource VisibilityStyle}"/>
<TextBlock Text="123" Style="{StaticResource VisibilityStyle}"/>
<TextBlock Text="123" Style="{StaticResource VisibilityStyle}"/>
<TextBlock Text="123" Style="{StaticResource VisibilityStyle}"/> 
```

这也适用于网格的标题......

# java - 使用 Hibernate 的浮点映射精度

> ID：16105903
> 
> 赞同：3
> 
> 时间：2013-04-19T13:34:36.987
> 
> 标签：java, hibernate

我正在尝试将浮点数存储在 MySQL 数据库中，但 Hibernate 的值与存储在列中的值不同，

在我的应用程序中，我计算：

```
float subtotal = 160.5f;
float ammount = (float) (subtotal * 0.1f); // this way I get the 10%
receipt.setAmmount(ammount);
receipt.save(); 
```

如果我记录该数量，我会得到如下信息：

```
19/04/2013 10:17:20 [INFO] ServiceImpl: Added ammount x $16.05 
```

我`ammount`在 mysql 数据库中的列是`FLOAT UNSIGNED`，当我进行选择时，我获得 16.05 作为值，但后来，当我使用 Hibernate 获取该对象时，ammount 字段为 16.049999237060547。

我的 hbm 专栏如下所示：

```
<property name="ammount" type="float"></property> 
```

我在[这里](https://stackoverflow.com/questions/399401/hibernate-and-currency-precision)和[这里](https://blogs.oracle.com/CoreJavaTechTips/entry/the_need_for_bigdecimal)阅读建议`BigDecimal`在 Java 中使用而不是`Float`为了`Double`钱，但我无法获得我应该在我的数据库中使用什么数据类型或如何配置 Hibernate 以使用该数据类型，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:41:37.387

> DECIMAL 和 NUMERIC 类型的推荐 Java 映射是 java.math.BigDecimal。java.math.BigDecimal 类型提供数学运算以允许 BigDecimal 类型与其他 BigDecimal 类型、整数类型和浮点类型相加、减、乘和除。
> 
> 检索 DECIMAL 和 NUMERIC 值的推荐方法是 ResultSet.getBigDecimal。JDBC 还允许以简单的字符串或字符数组的形式访问这些 SQL 类型。因此，Java 程序员可以使用 getString 来接收 DECIMAL 或 NUMERIC 结果。但是，这使得 DECIMAL 或 NUMERIC 用于货币值的常见情况

[**看这里**](https://stackoverflow.com/questions/7550337/what-type-would-you-map-bigdecimal-in-java-hibernate-in-mysql)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:42:18.283

我想我会尝试在数据库中将您的列定义为 NUMBER(6,2) 并在您的 java 层中使用 BigDecimal 对象。您不应该对货币使用浮点数。

# javascript - 第一个选项卡验证完成后如何启用第二个选项卡

> ID：16105904
> 
> 赞同：2
> 
> 时间：2013-04-19T13:34:42.833
> 
> 标签：javascript, jquery, html, css

我有以下字段的选项卡

```
 <div id="tabs">
  <ul>
    <li><a href="#tabs-1">Tab1</a> </li>
    <li><a href="#tabs-2">Tab2</a></li>
    <li><a href="#tabs-3">Tab3</a></li>
    <li><a href="#tabs-4">Tab4</a></li>
  </ul>
  <div id="tabs-1">
     <b>Name</b>
  <input type="text" id="name"><br/>
  <b>Age</b>
  <input type="text" id="age"><br/>
    <input type="submit" value="next" id="submit"/>
  </div>
  <div id="tabs-2">
  <form name="nithin">

  </div>
   <div id="tabs-3">
    <p>Tab3</p>
  </div>
   <div id="tabs-4">
    <p>Tab4</p>
  </div>
</div> 
<input type="checkbox" name="tabs-2" value="2">tabs-2 
<input type="checkbox" name="tabs-3" value="3">tabs-3 
<input type="checkbox" name="tabs-4" value="4">tabs-4 
<br> 
```

这里 tab-1 有两个字段。只有在第一个选项卡的验证完成后才能启用第二个选项卡。我们可以使用复选框选择显示/隐藏，但不会激活。我该怎么做？可以看代码[DEMO](http://jsfiddle.net/2aQ2g/52/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:36:03.697

在这个例子中，`input submit`有类`submit`。我也改变了标签`ids`（见小提琴）

小提琴[http://jsfiddle.net/Spokey/2aQ2g/54/](http://jsfiddle.net/Spokey/2aQ2g/54/)

```
$('.submit').click(function (e) {
    e.preventDefault(); //prevent from submission and do script instead
    //validation ....
    //if validation is okay, do below
    var nexttab = parseInt($(this).parent().next().attr('id').match(/\d+/g), 10);
    $('#tabs').tabs("enable", nexttab).tabs("select", nexttab);
    $('input[name="tabs-'+nexttab+'"]').removeAttr('disabled').prop('checked', true);
}); 
```

# tfs-power-tools - Shell 扩展：未在 Windows 资源管理器上下文中显示

> ID：16105909
> 
> 赞同：40
> 
> 时间：2013-04-19T13:34:47.087
> 
> 标签：tfs-power-tools

我有 Windows 7 专业版 x64。我的机器上安装了 Visual Studio 2010 Premium 和 Visual Studio 2012 Premium。

我在 2011 年 12 月安装了 TFS Power Tools。安装成功后我重新启动了计算机。然后我从 TFS 2010 中签出一个文件夹，但是当我右键单击该文件夹时，Windows 资源管理器上下文菜单中的 TFS 菜单项没有出现。

我什至通过卸载它重新安装它，重新启动电脑并再次安装它，然后再次重新启动它，但同样的问题。

我已按照此处概述的说明进行操作： [TFS Power Tools: Shell Extension: Context Menu Quirky and TFS Icons on Files/Folders missing](https://stackoverflow.com/questions/10442099/tfs-power-tools-shell-extension-context-menu-quirky-and-tfs-icons-on-files-fo)

但同样的问题发生同样的问题。有人知道我还能做些什么来让 TFS 菜单项出现在上下文菜单中吗？

提前致谢，

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-17T20:52:09.397

我不确定这是否会有所帮助，或者您是否愿意使用新版本，但我的环境和您的问题完全相同。

我所做的是我卸载了旧的 TFS Power Tools（在 Control-Panel/Programs-and-Features 中列出了“Microsoft Team Foundation Server”前缀和/或“Microsoft Visual Studio Team Foundation Server”）并安装了更新的RTM 版本。[您可以在http://www.microsoft.com/en-nz/download/details.aspx?id=35775](http://www.microsoft.com/en-nz/download/details.aspx?id=35775)下载它们并按照下面列出的相同顺序安装以下内容

1.  Team Foundation Server 2012 RTM Power Tools.msi
2.  Visual Studio Team Foundation Server 2012 更新 1 Power Tools.msi
3.  Visual Studio Team Foundation Server 2012 更新 2 Power Tools.msi

在开始之前关闭 Visual Studio，然后在安装后重新启动，之后您应该会看到上下文菜单以及指示它在 TFS 中的绿色箭头

这是它的截图

![在此处输入图像描述](https://i.stack.imgur.com/fOjbG.png)

另请注意，安装后这不会像这篇文章中所建议的那样立即发生：[TFS Power Tools: Shell Extension: Context Menu Quirky and TFS Icons on Files/Folders missing](https://stackoverflow.com/questions/10442099/tfs-power-tools-shell-extension-context-menu-quirky-and-tfs-icons-on-files-fo)

> TfsComProviderSvr.exe 有时需要一段时间来检查本地文件夹是否为工作区并注册 shell 扩展。

所以这取决于很多变量，你的 TFS 服务器速度、你的机器速度和你的网络速度。就我而言，我将其放置一夜以充分展示一切。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-22T14:51:11.010

Windows 对它可以支持的许多覆盖图标有限制。在我安装了谷歌驱动器、一个驱动器和保管箱之后，这开始发生在我身上，并且 TFSOverlay 被推到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ShellIconOverlayIdentifiers 的底部

您可以通过以下任一方式修复它

1.  卸载一些覆盖应用程序。（例如：删除 Google Drive 或 Dropbox）
2.  将 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ShellIconOverlayIdentifiers 中的 TFS 文件夹重命名为以数字开头，以便它们优先（例如：“1TfsOverlayAdd”、“2TfsOverlayEdit”等）。

此外，绿色图标通常会延迟出现在文件夹资源管理器中，因此请耐心等待。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-20T02:32:00.830

我遇到了同样的问题，只是我执行了这个文件：

> C:\Program Files (x86)\Microsoft Team Foundation Server 2012 Power Tools\TfsComProviderSvr.exe

几分钟后，菜单出现了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-06T09:19:51.823

当您在与登录用户不同的凭据（即具有管理员权限的帐户）下运行 Visual Studio 时，也会出现此问题。以同一用户身份登录会正确显示 ShellExtension。但这不是这里的选择......

我还没有找到解决办法。能够为**TfsComProviderSvr.exe**设置一些选项将是一项不错的功能，这样就可以让它监视与登录用户不同的“团队成员”的工作区文件夹...

我尝试使用其他凭据运行**Explorer.exe**，但这不会产生新的**TfsComProviderSvr.exe**。使用不同的凭据手动启动它似乎也不起作用。TfsComProviderSvr.exe 的实例总是（重新）为当前登录的用户生成。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-19T14:27:38.770

请原谅我分享了显而易见的问题，但我遇到了类似的问题，在我的情况下，默认选择的安装功能似乎与我预期的不同。

我使用“修改”而不是“修复”重新运行安装程序，并确认选择了 Windows Shell 扩展功能进行安装：

![设置屏幕截图](https://i.stack.imgur.com/Q45JH.png)

我正在运行一个类似的环境（VS 2010 Shell 和 VS 2013 Professional）。也许这会影响默认值。

这是我使用的[电动工具安装程序](https://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-14T11:06:27.720

我有一个类似的问题，我撕掉了旧版本，给了我一些问题，因为你必须停止 TFS 进程和资源管理器进程，但是一旦旧版本被卸载，你总是可以再次重新启动资源管理器。

*   然后我重新启动了我的机器。
*   安装最新版本：[http](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f) ://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f（版本 11.0.60506.0）
*   再次重新启动我的电脑
*   导航到源代码管理文件夹，所有 TFS 图标和外壳扩展现在开始出现。

最重要的是，最新版本对我有用，根本不需要摆弄 reg'values。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-06T23:40:14.840

这是我修复我的方法。我已经安装了 Visual Studio 2015 并为 VS 2015 安装了 TFS Power Tools。我还安装了 Visual Studio 2017。我通常使用 VS 2017 并在那里连接到 TFS。我没有将 VS 2015 附加到 TFS，并且电动工具菜单不会显示在资源管理器中。我终于意识到，当他们说您必须安装相同版本的 Visual Studio 时，您还必须将 Visual Studio Team Explorer 连接到 TFS。除此之外，您不必使用它，但必须使用对话框连接它，就像您在此处看到的那样。

[![连接到 Team Foundation Server](https://i.stack.imgur.com/4Lo7u.png)](https://i.stack.imgur.com/4Lo7u.png)

# javascript - jquery自动完成运行ajax但不显示结果

> ID：16105914
> 
> 赞同：2
> 
> 时间：2013-04-19T13:34:51.483
> 
> 标签：javascript, jquery, html, css, jquery-ui

我在我的网站上安装了 jquery 和 jquery ui，我有

```
$(document).ready(function(){
        //alert('it ran');
        $('.global_search').autocomplete({ source: "global_search.php", select: function( event, ui){ window.open( ui.item.url ); } });
    }); 
```

当我在 chrome 中查看网络选项卡时，我看到了结果 global_search.php?term=54650 （注意我搜索了 54650 ）

我得到的回应是

```
{"150000":{"name":"Event: TestRod08.28.2012","value":"Event: TestRod08.28.2012","link":"event_profile.php?event_id=2939"}} 
```

哪个应该显示“事件：TestRod08.28.2012”，点击应该转到 event_profile.php?event_id=2939 但列表永远不会显示？我有其他 jquery 自动完成在同一页面上工作，并且列表显示得很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:50:23.847

尝试

```
 $('#test').autocomplete({
    source : function(request, callback) {
        $.ajax({
            url : "data.json",
        datatype: 'json'
        }).done(function(data) {
            var results = []

            $.each(data, function(key, value) {
                        results.push({
                                    id : key,
                                    label : value.name,
                    url: value.link
                                });
                    });

            callback(results);
        });
    },
    select : function(event, ui) {
        window.open(ui.item.url);
    }
  }); 
```

演示：[Plunker](http://plnkr.co/edit/7kxw5FuWLOJWh1Mc8qCX?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:39:07.567

```
var options, a;
jQuery(function(){
  options = { serviceUrl:'global_search.php'};
  a = $('.global_search').autocomplete(options);
}); 
```

你可以试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:15:14.630

发现当我删除密钥时，我的 global_search.php 正在返回一个 json 对象而不是 json 数组（我有键值）它工作得很好

谢谢你们每一个人的帮助

# javascript - ImageAreaSelec：它不会在初始化时预览预选

> ID：16105917
> 
> 赞同：4
> 
> 时间：2013-04-19T13:35:05.357
> 
> 标签：javascript, jquery, jquery-plugins, methods, imageareaselect

这就是我预选的方式（感谢这个问题/答案[ImageAreaSelect: preselect最大的缩略图可能尊重 aspectRatio](https://stackoverflow.com/questions/15990847/imageareaselect-preselect-biggest-thumbnail-posible-respecting-aspectratio)）

```
var thwidth = $('#thumbnail').width();
    var thheight = $('#thumbnail').height();
    var aspectRatio = <?php echo $thumb_height/$thumb_width;?>;

var selWidth = 640;

var photo = $('#thumbnail'),
   photoWidth = parseInt($('#thumbnail').width()),
   maxWidth = Math.min(selWidth, photoWidth),
   maxHeight = maxWidth * aspectRatio,
   yTop = parseInt(photo.height()) / 2 - maxHeight / 2;

var thumbsel = $('#thumbnail').imgAreaSelect({ 
    x1: photoWidth / 2 - maxWidth / 2,
    y1: yTop,
    x2: (photoWidth / 2 - maxWidth / 2) + maxWidth,
    y2: yTop + maxHeight,
    aspectRatio: '1:<?php echo $thumb_height/$thumb_width;?>',
    onSelectStart: function(){
        $('#filters li').first().find('a').click();
    },
    onSelectChange: preview,
    onInit: preview,
    handles: true,
    resizable:true,
    show:true 
}); 
```

但是它似乎没有在Init上加载预览方法。用户需要重新选择、调整大小或至少拖动当前选择以便预览：

预览方法（取自他们的网站）

```
function preview(img, selection) {
    $('#filters li').first().find('a').click();
    var scaleX = <?php echo $thumb_width;?> / selection.width;
    var scaleY = <?php echo $thumb_height;?> / selection.height;

    $('#uploaded_file').css({
        width: Math.round(scaleX * <?php echo $current_large_image_width;?>) + 'px',
        height: Math.round(scaleY * <?php echo $current_large_image_height;?>) + 'px',
        marginLeft: '-' + Math.round(scaleX * selection.x1) + 'px',
        marginTop: '-' + Math.round(scaleY * selection.y1) + 'px'
    });
    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);
    $('#w').val(selection.width);
    $('#h').val(selection.height);
} 
```

我在init函数上试过这个：

```
$('.imgareaselect-selection').mouseup(); 
```

但是没有太大的成功...

但我相信解决方案是重新生成拖动的选择或类似的东西？

-编辑-

如果您查看此屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/uPiwX.png)

可以看到预选成功了，但是prevew没有..

如果我只是单击/移动选择：然后预览

![在此处输入图像描述](https://i.stack.imgur.com/dbDTW.png)

所以问题是：

如何重现更改的选择？通过插件方法或 DOM 事件

[JSFiddle](http://jsfiddle.net/QyVy6/7/)

-编辑2-

好吧，我提出了这个解决方案，为什么不在插件初始化后运行预览功能？

```
var my_options = {
        x1 : photoWidth / 2 - maxWidth / 2,
        y1 : yTop,
        width : (photoWidth / 2 - maxWidth / 2) + maxWidth - photoWidth / 2 - maxWidth / 2,
        height : yTop + maxHeight - yTop
}
preview('',my_options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T09:52:27.747

您在尝试手动构建选择对象时走在正确的轨道上，但我猜它不起作用，因为您没有填充 x2、y2 字段。这是页面加载时显示预览的工作示例：[JSFiddle](http://jsfiddle.net/QyVy6/16/)

HTML

```
<div class="box">
    <div align="center">
        <img src="http://funcook.com/upload_pic_r/resize_1366627050.jpg" id="thumbnail" alt="Create Thumbnail" />
            <h2>Previsualiza el resultado</h2>

        <div id="uploaded_file_holder" style="border:1px #e5e5e5 solid; float:left; position:relative; left: 44px; overflow:hidden; width:640px; height:380px;">
            <img id="uploaded_file" src="http://funcook.com/upload_pic_r/resize_1366627050.jpg" style="position: relative;" alt="Thumbnail Preview" />
        </div>
        <form method="post" action="/picture_recipe.php" class="save_recipe_image" name="thumbnail">
            <input type="hidden" id="x1" value="" name="x1" />
            <input type="hidden" id="y1" value="" name="y1" />
            <input type="hidden" id="x2" value="" name="x2" />
            <input type="hidden" id="y2" value="" name="y2" />
            <input type="hidden" id="w" value="" name="w" />
            <input type="hidden" id="h" value="" name="h" />
            <input type="hidden" value="206" id="id_recipe" name="id_recipe" />
            <input type="text" value="" id="effectApplied" name="effectApplied" style="display: none;" />
        </form>
    </div>
</div> 
```

jQuery

```
function preview(img, selection) {
    $('#filters li').first().find('a').click();
    var scaleX = 640 / selection.width;
    var scaleY = 380 / selection.height;

    $('#uploaded_file').css({
        width: Math.round(scaleX * 550) + 'px',
        height: Math.round(scaleY * 412) + 'px',
        marginLeft: '-' + Math.round(scaleX * selection.x1) + 'px',
        marginTop: '-' + Math.round(scaleY * selection.y1) + 'px'
    });

    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);
    $('#w').val(selection.width);
    $('#h').val(selection.height);
}

$(function () {
    var photo = $('#thumbnail'),
        selWidth = 640,
        aspectRatio = 0.59375,
        photoWidth = parseInt(photo.width()),
        maxWidth = Math.min(selWidth, photoWidth),
        maxHeight = Math.floor(maxWidth * aspectRatio),
        yTop = parseInt(photo.height()) / 2 - maxHeight / 2,
        selection = {
            x1: photoWidth / 2 - maxWidth / 2,
            y1: yTop,
            x2: (photoWidth / 2 - maxWidth / 2) + maxWidth,
            y2: yTop + maxHeight
        };

    selection.height = selection.y2 - selection.y1;
    selection.width = selection.x2 - selection.x1;

    var thumbsel = photo.imgAreaSelect({
        x1: selection.x1,
        y1: selection.y1,
        x2: selection.x2,
        y2: selection.y2,
        aspectRatio: '1:0.59375',
        onSelectStart: function () {
            $('#filters li').first().find('a').click();
        },
        onSelectChange: preview,
        onSelectEnd: preview,
        handles: true,
        resizable: true,
        show: true
    });

    preview(null, selection);
}); 
```

# iphone - 在 tableView:cellForRowAtIndexPath 中确定 iPhone 和 iPad 的不同单元格：

> ID：16105918
> 
> 赞同：0
> 
> 时间：2013-04-19T13:35:08.633
> 
> 标签：iphone, objective-c, ipad, uitableview, detection

我只是尝试为 iPhone 和 iPad 创建一个应用程序。为此，我创建了一个表格视图，该表格视图创建的单元格期望应用程序加载时将收到的 json。方法内部

```
tableView:cellForRowAtIndexPath: 
```

我启动将用于 iPhone 的单元格，并从 json 中设置特定值。我使用的单元格是我使用新对象和 NIB 文件创建的自定义单元格。代码如下所示：

```
static NSString *CellIdentifier = @"tvChannelIdentifier";

tvChannelCell *cell = (tvChannelCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"tvChannelCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}
.... 
```

现在我尝试让该应用程序也可以在 iPad 上运行，我创建了一个新的自定义单元格，还包含一个新对象和一个 NIB 文件。变量的名称与 customIPhoneCell 中的名称相同，因此我不必更改整个代码。我刚刚在 tableView:cellForRowAtIndexPath: 中插入了一个开关，以便显示正确的单元格，但代码无法访问它：

```
static NSString *CellIdentifier = @"tvChannelCell";
static NSString *IPadCellIdentifier = @"tvChannelIPadCell";

//determination which device ---> choose cell
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
    tvChannelCell *cell = (tvChannelCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

}else{

    tvChannelIPadCell = (tvChannelIPadCell *) [tableView dequeueReusableCellWithIdentifier:IPadCellIdentifier];
} 
```

我试图在类的顶部定义单元格对象，但是我不能使用相同的变量名。我还尝试选择 iPad 的 NIB 文件来检查它是否会显示，但没有任何反应。我试图在顶部设置一个 UITableviewcell，

```
UITableViewCell *cell 
```

并在 cellForRowAtIndexPath 中的开关内设置特定的单元格类型，但随后无法访问变量。

所以我的问题是，是否可以在 tableview 方法中进行此切换，或者我是否必须为每个单元格类型都有自己的变量名的每个设备编写几个部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:45:27.360

我所做的：

我**只创建了一个带有 2 个 xibs 的 UITableViewCell 子类**，一个用于 iPad 的 xib，另一个用于 iPhone。

```
tvChannelCell *cell = (tvChannelCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
NSArray *nib;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){

     nib = [[NSBundle mainBundle] loadNibNamed:@"tvChannelCell_iPhone" owner:self options:nil];

}else{

    nib = [[NSBundle mainBundle] loadNibNamed:@"tvChannelCell_iPad" owner:self options:nil];
}

    cell = [nib objectAtIndex:0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:40:19.557

这很简单，为什么不为 iPad 创建另一个 nib，并在设备是 iPad 时访问它。

你所有的代码都将保持不变，即你不需要像任何地方一样比较 iPad

喜欢：

```
if (cell == nil) {
    NSArray *nib;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
     nib = [[NSBundle mainBundle] loadNibNamed:@"tvChannelCell-iPad" owner:self options:nil];}
    else{
    nib = [[NSBundle mainBundle] loadNibNamed:@"tvChannelCell" owner:self options:nil];}
    cell = [nib objectAtIndex:0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:40:28.900

这行代码对区分 iphone 和 ipad 很有用，

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        tvChannelCell *cell = (tvChannelCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    }else{

        cell = (tvChannelIPadCell *) [tableView dequeueReusableCellWithIdentifier:IPadCellIdentifier];

     } 
```

# android - 刷新或更改 AlertDialog 消息

> ID：16105920
> 
> 赞同：16
> 
> 时间：2013-04-19T13:35:09.057
> 
> 标签：android, android-alertdialog

我创建了一个 AlertDialog

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
...
AlertDialog alert = builder.create();
alert.show(); 
```

片刻之后，我想更改 AlertDialog 消息而不关闭它。

可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T13:47:19.130

同意安卓开发者。你也可以使用

```
TextView messageView = (TextView) alert.findViewById(android.R.id.message); 
```

获得对 AlertDialog 的 messageTextView 的控制。然后你可以在那里设置新的文本。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-02-09T12:35:57.787

使用`alert.setMessage()`而不是`builder.setMessage()`. 随时调用 alert.setMessage() 并设置对话框的消息。

例子：

```
 AlertDialog.Builder dialogBuilder;
     AlertDialog alertDialog;

     @Override
     protected void onCreate(Bundle savedInstanceState)
     {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       dialogBuilder = new AlertDialog.Builder(MainActivity.this);
       alertDialog = dialogBuilder.create();
     }

     public void showAlert(int caller) {
       if(alertDialog != null && !alertDialog.isShowing()) {
        switch (caller){
            case 1:
                alertDialog.setMessage("First method call");
                break;
            case 2:
                alertDialog.setMessage("Second method call");
                break;
            case 3:
                alertDialog.setMessage("Third method call");
                break;
            }
            alertDialog.show();
         }
      } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-19T13:39:20.797

是的你可以。

例如，如果您使用自己的布局创建自己的对话框，则可以为每个视图设置一个 id，然后访问每个视图（例如 textView）并随时设置其新文本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-18T08:22:53.977

像这样从主设置器中设置**OnClickListener ：**

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(getActivity())
                        .setTitle(getResources().getString(R.string.dialog_title))
                        .setMessage("Waiting ...")
                        .setNeutralButton(R.string.check, null);

AlertDialog alertDialog = alertDialogBuilder.create();
alertDialog.show();

Button b_neutral = alertDialog.getButton(DialogInterface.BUTTON_NEUTRAL);
b_neutral.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        TextView tv_message = (TextView) alertDialog.findViewById(android.R.id.message);
                        tv_message.setText("Works ...");
    }
}); 
```

# javascript - 获取外部图像的文件扩展名

> ID：16105921
> 
> 赞同：1
> 
> 时间：2013-04-19T13:35:10.297
> 
> 标签：javascript

是否可以从 javascript 中的图像中获取文件扩展名，当您从另一台不关心扩展名的服务器获取文件扩展名时...

就像在 imgur 上一样，扩展名并不总是正确的，即。![.jpg](https://i.imgur.com/ymizy6N.jpg)，![.png](https://i.imgur.com/ymizy6N.png)
并且
![.gif](https://i.imgur.com/ymizy6N.gif)
都是相同的图像，但具有不同的扩展名

# java - android 的 XML 解析器不读取最后一个孩子

> ID：16105923
> 
> 赞同：0
> 
> 时间：2013-04-19T13:35:12.290
> 
> 标签：java, android, xml, xml-parsing, sd-card

我的安卓手机中的解析器有问题！这是 XML 的代码

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<file>
    <Staff>
        <connection>wifi</connection>
        <timestamp>20</timestamp>
        <sport>0</sport>
    </Staff>
    <Staff>
        <connection>3g</connection>
        <timestamp>40</timestamp>
        <sport>0</sport>
    </Staff>
    <Staff>
        <connection>wifi</connection>
        <timestamp>60</timestamp>
        <sport>0</sport>        
    </Staff>
    <Staff>
        <connection>3g</connection>
        <timestamp>80</timestamp>
        <sport>0</sport>        
    </Staff>
</file> 
```

这是我拥有的解析器代码

```
 try {
                    InputStream filename = null;
                Document obj_doc = null;
                DocumentBuilderFactory doc_build_fact = null;
                DocumentBuilder doc_builder = null;
                filename = new FileInputStream("/sdcard/data.xml");
                doc_build_fact = DocumentBuilderFactory.newInstance();
                doc_builder = doc_build_fact.newDocumentBuilder();
                System.out.println("readed data.xml");
                obj_doc = doc_builder.parse(filename);

                NodeList obj_nod_list = null;
                if (null != obj_doc) {
                    org.w3c.dom.Element feed = obj_doc.getDocumentElement();
                    obj_nod_list = feed.getElementsByTagName("file"); 
                }

                Element root = obj_doc.getDocumentElement();
                NodeList items = root.getElementsByTagName("Staff");
                System.out.println("items "+items.getLength());

                for (int i = 0; i < items.getLength(); i++) {
                    Node item = items.item(i);
                    NodeList properties = item.getChildNodes();
                    System.out.println("properties length "+item.getChildNodes().getLength()); 
//                  System.out.println("properties "+properties.getLength()); 
                    for (int j = 0; j < items.getLength(); j++) {
                        Node property = properties.item(j);
                       // System.out.println("properties "+property.getNodeName());   
                        String name = property.getNodeName();

                        if (name.equalsIgnoreCase("connection")) {
                             // Store it where you want
                                connection.add(property.getFirstChild().getNodeValue()); 
                             System.out.println("connection "+connection);
//                           System.out.println("connection "+connection.get(i));
                        }
                            if (name.equalsIgnoreCase("timestamp")) {
                                int inttimestamp = Integer.parseInt(property.getFirstChild().getNodeValue());
                                timestamp.add(inttimestamp); 

                             System.out.println("timestamp "+timestamp);
                        }
                            if (name.equalsIgnoreCase("sport")) {
                                int inttimestamp = Integer.parseInt(property.getFirstChild().getNodeValue());
                                capacity.add(inttimestamp); 

                             System.out.println("capacity "+capacity);
                        }

                    }
                }

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ParserConfigurationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

解析完成后！它无法读取最后一个孩子！这是运动！你能给我一个解决方案吗！此外，当我更改 xml 并首先放置“运动”时，它无法读取最后一个节点！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:25:10.027

我解决了！XML文件结构很糟糕！我改了之后！有效。谢谢你的遮阳篷

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:44:18.537

使用 jsoup html 解析器。[这里是官方网站](http://jsoup.org/)。您可以使用它来解析 html、xml 等。它是一个基于标签的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:47:52.183

这是一个使用 SAX 解析器的示例，它可以帮助您

解析器类：

```
 public class XMLParser extends DefaultHandler 
{
    // xml Tags name
    private final String TENDER_TYPE = "TenderType";
    private final String TRX_TYPE    = "TransactionType";
    private final String DATA_ELEM   = "DataElement";   
    //xml Values
    private final String NAME        = "Name";
    private final String VALUE       = "Value";
    private final String AMOUNT      = "Amount";
    private final String T_TYPE      = "TenderType";
    private final String CLRK_ID     = "ClerkId";
    private final String INV_NUM     = "InvoiceNum";
    private final String AUTH        = "Authorization";
    private final String ORIG_SEQ    = "OriginalSequence";
    private final String ORIG_REF    = "OriginalReference";
    private final String TAG         = "Tag";
    private final String DESCRIPTION = "Description";

    //list for imported Config data
    private ArrayList<TenderType> theTenderTypeList   = null;
    private TenderType currentTenderType              = null;

    private ArrayList<TransactionType> theTrxTypeList = null;
    private TransactionType currentTrxType            = null;

    private ArrayList<DataElement> theDataElementList = null;
    private DataElement currentDataElement            = null;

    @Override
    public void startDocument() throws SAXException 
    {
        super.startDocument();
        if(theTenderTypeList == null)
        {
            theTenderTypeList  = new ArrayList<TenderType>();
        }
        if(theTrxTypeList == null)
        {
            theTrxTypeList = new ArrayList<TransactionType>();
        }
        if(theDataElementList == null)
        {
            theDataElementList = new ArrayList<DataElement>();
        }
    }

    @Override
    public void startElement(String uri, String localName, String name, Attributes attributes) throws SAXException 
    {   
        if (localName.equalsIgnoreCase(TRX_TYPE))
        {           
            this.currentTrxType = new TransactionType(attributes.getValue(NAME),
                    attributes.getValue(VALUE),attributes.getValue(AMOUNT), 
                    attributes.getValue(T_TYPE),attributes.getValue(CLRK_ID),
                    attributes.getValue(INV_NUM), attributes.getValue(AUTH),
                    attributes.getValue(ORIG_SEQ), attributes.getValue(ORIG_REF));

            this.theTrxTypeList.add(currentTrxType);
        }
        else if (localName.equalsIgnoreCase(TENDER_TYPE))
        {           
            this.currentTenderType = new TenderType(attributes.getValue(NAME),
                                                    attributes.getValue(VALUE));
            theTenderTypeList.add(currentTenderType);
        }
        else if (localName.equalsIgnoreCase(DATA_ELEM))
        {           
            this.currentDataElement = new DataElement(attributes.getValue(TAG),
                                                    attributes.getValue(DESCRIPTION));
            theDataElementList.add(currentDataElement);
        }

    }

    public ArrayList<TenderType> getTenderTypeList()
    {
        return theTenderTypeList;
    }

    public ArrayList<TransactionType> getTrxTypeList()
    {
        return theTrxTypeList;
    }

    public ArrayList<DataElement> getDataElementList()
    {
        return theDataElementList;
    }

} 
```

然后你可以称之为：

```
SAXParserFactory fabrique = SAXParserFactory.newInstance();
        SAXParser parseur = null;

        try
        {
            parseur = fabrique.newSAXParser();
        } 
        catch (ParserConfigurationException e) 
        {
            System.out.println("Parse Config Exception");
        } 
        catch (SAXException e) 
        {
            System.out.println("SAX Parse Exception");
        }

        handler = new XMLParser();

        try 
        {
            /* Parse Config File */
            myFileCfg = new File(FolderPath + CFG_FILE_NAME);
            parseur.parse(myFileCfg, handler);

        } 
        catch (SAXException e) 
```

# html - 在 CSS 中保持活动状态

> ID：16105926
> 
> 赞同：1
> 
> 时间：2013-04-19T13:35:20.720
> 
> 标签：html, css

我正在创建一个登录表单，并且正在 JavaScript 中隐藏/显示状态。

有没有办法在我加载页面时，第一个按钮处于活动状态，而当我单击另一个按钮时，它变为活动状态而前一个按钮不再活动？

我的 HTML：

```
<a class="login-button" >login</a><a class="login-button">register</a><a class="login-button">cant login?</a> 
```

我的 CSS：

```
.login-button
{color:#00BFFF;
padding-right:20px;
}
.login-button:active
{ color:#FFF;
font-family:customfont-bold;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:46:27.817

正如@Sachin 指出的那样，您可以只使用 JavaScript，或者使用伪类在**纯 CSS中进行。**`:target`

您唯一应该做的就是将超链接引用 ( `href`) 添加到您的锚标记，我认为这会使您的标记更加语义化。

**HTML**

```
<a href="#login" id="login" class="login-button">login</a> 
```

**CSS**

```
#login:target {
  color:#FFF;
  font-family:customfont-bold;
} 
```

由于您将问题与[css](https://stackoverflow.com/questions/tagged/css) / [html](https://stackoverflow.com/questions/tagged/html)一样标记，因此我认为 CSS 解决方案会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:39:37.037

您可以使用 Javascript 或 Jquery 来实现此目的。这是给你的样本

```
$("a").click(function() {
    $("a").removeClass("active");
    $(this).addClass("active");
}); 
```

CSS

```
.active
{ 
  color:#FFF;
  font-weight:bold;
} 
```

当然，您可以更具体地使用选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:47:52.917

只需将您希望首先显示为活动的类重命名为`class="login-button active"`

然后插入一个 javascript 函数以从一个更改为另一个，例如：

```
function{ 
      var element = document.getElementsByClassName("login-button active");
      element.className="login-button";
} 
```

您还可以添加一些`id=""`以使更改更容易。然后你可以使用：

`var element = document.getElementById("yourID");`

# full-text-search - Sphinx 反向搜索 - 添加新项目时，对现有存储的关键字执行搜索

> ID：16105928
> 
> 赞同：0
> 
> 时间：2013-04-19T13:35:23.287
> 
> 标签：full-text-search, sphinx, django-sphinx

我有一个应用程序，人们可以在其中列出要出售/交换/赠送的东西，有 200 个字符的描述。我们称他们为卖家。

其他用户可以搜索东西——我们称他们为买家。

我有一个使用 Django、MySQL 和 Sphinx 进行文本搜索的系统。

假设买家正在寻找“T 恤”。他们没有得到任何他们想要的结果。我希望该应用程序让买家可以选择勾选“如果出现问题请告诉我”。

然后，当卖家列出“Quicksilver T 恤”时，这将触发对所有已保存搜索的反向搜索，以通知这些买家已列出与他们查询匹配的新项目。

显然，每次列出任何新项目（在循环中）以查找匹配项时，我都可以在每个保存的搜索上触发 Sphinx 搜索——但这将是疯狂和密集的。这是我想以理智的方式实现的效果-我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:47:29.343

你真的建立了一个反向索引！

将“搜索”存储在数据库中，并在其上建立索引。

因此，“T 恤”将是该索引中的一个文档。

然后，当提交新产品时，您针对该索引运行查询。使用 'Quorum' 语法甚至 match-any - 来获得只匹配一个关键字的匹配项。

因此，在您的示例中，查询将是`"Quicksilver t-shirt"/1`match `Quicksilver`OR `t-shirt`。但同样适用于更长的标题，甚至是整个描述。

该查询的结果将是匹配的（单个单词*）原始搜索列表。请注意，这还假设您将索引设置`-`视为单词字符。

*   *请注意，如果您允许更复杂的查询、多个关键字或否定以及 OR 括号、短语等，它会稍微复杂一些。但在这种情况下，反向搜索 jsut 会为您提供潜在匹配，因此您需要确认它仍然匹配。仍然有很多查询，但你不需要全部运行它

顺便说一句，我认为这些“反向”搜索的技术术语是`Prospective Search` [http://en.wikipedia.org/wiki/Prospective_search](http://en.wikipedia.org/wiki/Prospective_search)

# cookies - 如何在 ffmpeg HLS 中启用 cookie

> ID：16105929
> 
> 赞同：3
> 
> 时间：2013-04-19T13:35:23.787
> 
> 标签：cookies, ffmpeg, http-live-streaming

任何人都知道如何在 ffmpeg 中启用 cookie 交互？我有一个需要从服务器保存 cookie 的 HLS 流，但实际上这并没有发生。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T16:49:01.963

[您可以使用](http://github.com/svnpenn/a/blob/master/scripts/ff-cookie.sh) FFmpeg发送 标头

Linux

```
ffmpeg -i INPUT -headers $'Cookie: logged_in=yes; tracker=direct\r\n' 
```

视窗

```
powershell ffmpeg -i INPUT -headers "Cookie: logged_in=yes; tracker=direct`r`n" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-10T13:42:12.887

ffmpeg 中不支持 cookie。您需要自己实现该部分，或者可能使用支持 cookie 的 mplayer。

# core-data - 核心数据缓存 NSSet 属性

> ID：16105932
> 
> 赞同：0
> 
> 时间：2013-04-19T13:35:30.370
> 
> 标签：core-data, key-value-observing

不确定我的标题最能描述我的问题，但想不出更好的！

我有 2 个托管对象，“事务”和“拆分”。Transaction 与“Split”具有一对多的关系，因此具有拆分对象的 NSSet。Split 有 2 个属性，Category (NSString) 和 Amount (NSDecimalNumber)。

一个事务有一个值，我目前通过迭代拆分对象的 NSSet 来计算它，并将所有“金额”属性相加。

这工作正常，我似乎没有任何性能问题，但我怀疑当你有 1000 个事务时这不会很好地扩展。

我认为我需要做的是在 Transaction 对象上拥有一个“Amount”属性（作为cahce）并每次更新它，并对包含在其 NSSet 中的“Split”对象之一的“Amount”属性进行更改.

希望我到目前为止有意义..

我的问题是实现这一目标的最佳方式？感觉就像是 KVO 的设计初衷，但我之前并没有真正使用过它。当其中一个拆分的“金额”值发生变化并因此可以重新计算其自己的值时，是否需要通知我的交易对象？

或者这应该在拆分中 Amount 属性的设置器中完成？

确定这是一个常见问题，并且存在一个非常优雅的解决方案吗？非常感谢任何建议和示例代码..？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:57:07.350

我会去覆盖`amount`. 这样，如果有一天您需要优化或扩大规模，您可以将一对多关系更改为没有反向的关系，从而完全保存集合的创建（在删除反向的情况下执行删除会更复杂）。`Split`

代码看起来像：

```
//not tested
- (void) setAmount:(NSUInteger)amount
{
    [self willChangeValueForKey:@"amount"];
    [self setPrimitiveValue:@(amount) forKey:@"amount"];
    self.transaction.amount += amount;
    [self didChangeValueForKey:@"amount"];
} 
```

**编辑（@Tommy）：**

删除时，您需要减去`Split`金额：

```
- (void) prepareForDeletion
{
    self.transaction.amount -= self.amount;
} 
```

此外，设置上下文合并策略时要非常小心，因此来自不同上下文的事务更改不会相互覆盖（使用默认错误策略）。

# html - Dart 混淆类型错误

> ID：16105935
> 
> 赞同：6
> 
> 时间：2013-04-19T13:35:39.177
> 
> 标签：html, dart, dart-webui

我正在使用 dart 和 web_ui 构建一个 Web 应用程序。

在我添加 web_ui pub 之前一切正常，现在，当我尝试运行 build.dart 文件时出现错误：

```
Uncaught Error: type 'AttributeName' is not a subtype of type 'String' of 'name'. 
```

这是什么意思？

据我了解，这意味着在某处有一个名为“AttributeName”类的“name”实例正在扩展“String”类。

我搜索了我的整个项目，没有一个名为“AttributeName”的类，也没有一个“name”的实例。

我有最新的 Dart 编辑器和 SDK：

```
Dart Editor version 0.4.7_r21658
Dart SDK version 0.4.7.5_r21658 
```

编辑：这是我的 build.dart 文件：

```
import 'package:web_ui/component_build.dart';
import 'dart:io';

void main() {
  build(new Options().arguments, ['web/menyplattan.html']);
} 
```

另外，我更新了所有的酒吧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T04:58:21.173

此消息看起来 web_ui 未通过类型检查。

类似的[SO question](https://stackoverflow.com/questions/16080115/dart-webui-build-error) MarioP 链接到有一个堆栈跟踪，显示此消息来自 web ui 库本身。

你的 html 中有 xmlns 属性吗？看看这个[web-ui 问题](https://github.com/dart-lang/web-ui/issues/484)。

[AttributeName](https://github.com/dart-lang/html5lib/blob/master/lib/dom.dart)在 html5lib 库中定义。也许 web-ui 期待这个库的更新版本，但得到一个旧版本。确保您已完成 pub 安装。您还可以尝试删除您的包文件夹并进行全新的 pub 安装。

这可能是由过时的软件包引起的，但也可能是 web-ui 中的错误。看看您是否可以获得堆栈跟踪并[提交错误报告](https://github.com/dart-lang/web-ui/issues)，或者将其发布在[web-ui 邮件列表中](https://groups.google.com/a/dartlang.org/forum/#!forum/web-ui)。

# apache - Xdebug 和 Webgrind 无法工作

> ID：16105937
> 
> 赞同：1
> 
> 时间：2013-04-19T13:35:45.057
> 
> 标签：apache, zend-framework, xampp, xdebug

我使用以下链接在 Windows xampp 1.7.7 上安装了 xdebug 和 webgrind：[link](http://anantgarg.com/2009/03/10/php-xdebug-webgrind-installation/)。在去 http://localhost/webgrind 时会给出如下所示的内容，而不是显示配置文件。没有下拉菜单或可供选择的内容。

```
Select a cachegrind file above
(looking in C:\xampp\htdocs\webgrind\tmp/ for files matching /^cachegrind.out..+..+$/) 
```

但是我在 tmp 文件夹中有 2 个以 cachegrind.out 名称开头的文件。

我在（xampp/php/php.ini）中的设置是

```
zend_extension = "C:\xampp\php\ext\php_xdebug-2.2.2-5.3-vc9.dll"
xdebug.profiler_output_dir = "C:\xampp\htdocs\webgrind\tmp"
xdebug.profiler_enable = 1
xdebug.profiler_enable_trigger = 0
xdebug.profiler_output_name = cachegrind.out.%t.%p 
```

webgrind/config.php 设置

```
static $storageDir  = 'C:\xampp\htdocs\webgrind\tmp';
static $profilerDir = 'C:\xampp\htdocs\webgrind\tmp'; 
```

我也试过这些

```
static $storageDir = '';
static $profilerDir = '/tmp'; 
```

但没有结果。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T14:02:03.087

我有同样的 pb，在我的 windows 7 操作系统中安装 xampp 1.7.7 我发现
php_xdebug-2.2.2-5.3-vc9.dll 很糟糕，即使它是 php_xdebug-2.2.2-5.3-vc9。在查看 php.ini 后第一次下载的 exe 中，
我发现很好的默认 xdebug 就在这里，带有额外的线，所以我删除
了分号；
****[XDebug] zend_extension = "C:\Programs\xampp\php\ext\php_xdebug.dll"
xdebug.auto_trace
; 类型：布尔值，默认值：0
；
当此设置设置为 on 时，将在;之前启用对函数调用的跟踪 。脚本运行。这使得在 auto_prepend_file 中跟踪代码成为可能。
;xdebug.auto_trace = 0****

; xdebug.collect_includes
; 类型：布尔值，默认值：1
是的，xampp 附带了很好的 php_xdebug.dll，
所以使用它，不要看得太远 :) 也许这会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:39:27.147

我不小心得到了这个，在 xampp/php/php.ini 文件中玩值。这是`xdebug.profiler_append`从 0 到 1 的事物变化值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-03T19:11:50.007

由于便携式xampp，这也可能是相对寻址的问题。您可以像这样更改您的 Xdebug 地址。

前

```
[XDebug]
zend_extension = "\xampp\php\ext\php_xdebug.dll"
xdebug.profiler_append = 0
xdebug.profiler_enable = 1
xdebug.profiler_enable_trigger = 1
xdebug.profiler_output_dir = "\xampp\tmp"
xdebug.profiler_output_name = "cachegrind.out.%t-%s"
xdebug.remote_enable = 1
xdebug.remote_handler = "dbgp"
xdebug.remote_host = "127.0.0.1"
;xdebug.trace_output_dir = "\xampp\tmp" 
```

后

```
[XDebug]
zend_extension = "D:\xampp\php\ext\php_xdebug.dll"
xdebug.profiler_append = 0
xdebug.profiler_enable = 1
xdebug.profiler_enable_trigger = 1
xdebug.profiler_output_dir = "D:\xampp\tmp"
xdebug.profiler_output_name = "cachegrind.out.%t-%s"
xdebug.remote_enable = 1
xdebug.remote_handler = "dbgp"
xdebug.remote_host = "127.0.0.1"
;xdebug.trace_output_dir = "\xampp\tmp" 
```

# jquery - 我如何设置滑块插件以具有灵活的宽度

> ID：16105940
> 
> 赞同：0
> 
> 时间：2013-04-19T13:36:02.470
> 
> 标签：jquery, jquery-plugins, responsive-design, orbit

我正在使用 Orbit 滑块[http://www.zurb.com/playground/orbit-jquery-image-slider](http://www.zurb.com/playground/orbit-jquery-image-slider)插件，这似乎是一个非常好的滑块。但不幸的是，我无法使滑块灵活地进行自适应设计，我已经尝试了几乎所有它不起作用的东西。

在此处下载[http://matt.zurb.s3.amazonaws.com/orbit-1.2.3.zip](http://matt.zurb.s3.amazonaws.com/orbit-1.2.3.zip)

我的滑块目前位于 80% 宽度的包装器中

我想让滑块流畅地改变宽度。我可以更改下 css 中滑块的宽度`div.orbit-wrapper`和下图像的大小，`.orbit img`但是当将图像的宽度设置为`img`百分比时，图像消失，并且在开发人员收费上说它的宽度和高度为 1px –</p>

```
<body>

<div id="top_bar"><p>i am a fixed top bar</p></div>
<div id="wrapper">

    <div id="header">
        <img src="logo.png" width="400" height="100">
    </div>

    <div id="nav">
        <a href=""><p>Home</p><p>Get Started</p></a>
        <a href=""><p>About</p><p>What We Do</p></a>
        <a href=""><p>Gallery</p><p>Veiw our Work</p></a>
        <a href=""><p>Products</p><p>Browse</p></a>
        <a href=""><p>Contact</p><p>Get in Touch</p></a>
    </div>

    <div id="slider">
        <div id="featured"> 
            <img src="overflow.jpg" alt="Overflow: Hidden No More" />
            <img src="pb.png"  alt="HTML Captions" data-caption="#htmlCaption" />
            <img src="features.jpg" alt="and more features" />
        </div>
<!-- Captions for Orbit -->
        <span class="orbit-caption" id="htmlCaption">This is a caption</span>

    </div>
</div>

<script type="text/javascript">
    $(window).load(function() {
        $('#featured').orbit();
     });
</script>

</body>
</html> 
```

# linux - Visual Studio Express 2010 与 Linux gcc-4.3.2 上的 STL

> ID：16105942
> 
> 赞同：1
> 
> 时间：2013-04-19T13:36:05.980
> 
> 标签：linux, visual-studio-2010, stl, g++

我在 linux gcc-4.3.2 和 windows visual studio express 2010 上执行了代码。Linux 的执行时间约为 54 秒，而在 windows 系统上约为 1207 秒。

为什么会这样？该代码使用 C++ stl 映射、集合和向量。在 ideone 上执行相同的代码需要 9 秒。

[http://ideone.com/MxGogf](http://ideone.com/MxGogf)

stl 实现是否不同？

为了测量时间，我使用了以下内容：

```
int main(){
clock_t tStart = clock();
.
.
printf("\n%.4f\n",float(clock()-tStart)/CLOCKS_PER_SEC);
return 0;
} 
```

我知道这种测量时间的方法不准确，但是 54 和 1207 相距太远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:48:09.683

可能是因为您正在比较调试版本。不要那样做。

如果您想知道您的代码有多快，请*使用优化对其进行编译*。

MSVC++ 在调试版本中做*了很多*额外的断言和调试检查。

# c# - 检查 ax,y 位置是否在动态生成的椭圆内

> ID：16105943
> 
> 赞同：-1
> 
> 时间：2013-04-19T13:36:08.280
> 
> 标签：c#, random, position, ellipse

我正在尝试计算特定的 X、Y 位置是否位于 C# 中的椭圆内。

可用的变量有： X（要检查的 XI） Y（要检查的 YI） 椭圆的宽度 椭圆的高度 椭圆的 x 中心（因为椭圆是在某个位置绘制的）屏幕，必须计算）。椭圆的 y 中心（同样是随机位置，因此必须计算。

到目前为止，我尝试了基础数学，但这些并不能达到我需要的程度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:40:07.697

尝试`yourEllipse.RenderedGeometry.StrokeContains(Pen pen, Point point)`方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:47:45.220

椭圆是水平的还是旋转的？

对于具有中心`(xc,yc)`和半径的水平椭圆`rx`，`ry`其内的所有点都服从方程

```
((x-xc)/rx)^2 + ((y-yc)/ry)^2 <= 1 
```

`(x,y)`因此，只需根据上面的等式检查您的观点。

# c++ - 在 C++ 中返回 string.find() 的数量

> ID：16105946
> 
> 赞同：-3
> 
> 时间：2013-04-19T13:36:30.810
> 
> 标签：c++

在python中，当字符不在字符串中时返回'-1'：

```
a = "hello"
a.find("a") 
```

结果 ： `-1`

但在 C++ 中，它返回一个奇怪的数字！！！：

```
string a;
a = "hello";
a.find("a"); 
```

结果 ： `4294967295`

它是什么？？？所有字符串中的所有字符都相等吗？？？我怎么能说一个特殊的字符串不在文本中做一些工作？

我在 python 中知道，但在 C++ 中不知道...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:37:36.200

它返回`std::string::npos`，当 characted 不成立时`string`。`std::string::npos`由标准定义，如

```
static const size_type npos = -1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:38:33.750

它是`string::npos`。您应该使用以下内容来决定是否可以在给定字符串中找到特定字符串：

```
 size_t foundIndex = a.find("a");
  if ( foundIndex != string::npos)
  {
       cout << "found" <<endl;
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T13:41:20.353

如果没有找到特殊字符串，该`find()`方法将返回。`string::npos`因此，您应该始终使用以下语句来检查`find()`结果：

```
string::size_type index = str.find("value");
if (string::npos != index)
{
   // Do something.
} 
```

# ruby-on-rails - 瑞克。无法关闭服务器

> ID：16105947
> 
> 赞同：0
> 
> 时间：2013-04-19T13:36:31.480
> 
> 标签：ruby-on-rails, webrick

我的操作系统是 Ubuntu 10.04。我通过“rails s”命令启动了 WebRick。可现在已经无法阻止他了。我试图阻止他使用这个热键 Ctrl + C 和 Ctrl +Break ......但没有任何帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:57:20.237

由于它适用于提问者，因此我将在此处添加我的评论作为其他人的答案。

尝试（在新的终端窗口中）做`ps ax | grep ruby`. 您将看到正在运行的进程。然后做一个`kill -9 <process number>`.

# php - seo 效果 - 包含带有标签的文件

> ID：16105948
> 
> 赞同：0
> 
> 时间：2013-04-19T13:36:32.360
> 
> 标签：php, html, seo, include, w3c-validation

也许这是一个愚蠢的问题，但我没有找到任何答案，如果我有带有 html 标签头标签和元的文件。我将他包含在我的所有网页中，它会影响网站的 seo 吗？

我有一个名为“start_html.php”的文件，其中包含以下代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="description" content="bla bla.">
    <meta name="keywords" content="bla bla">
    <meta name="author" content="bla">
    <title>bla bla</title>
    <!-- CSS: -->
    <link href="style.css" rel="stylesheet" type="text/css" media="screen" />
    <!-- JavaScript -->
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

我从这一行开始每一页：`<?php include('start_html.php'); ?>`

**当我在 w3c 验证器上检查代码错误时，它说我没有这些标签，所以页面编码不好。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:39:11.357

如果该文件中的代码未显示在您的网页中，那么显然您的 PHP 代码不正确并且该文件未包含在内。您需要确保您有错误报告并显示所有错误，因为这会为您捕获。

[有关如何启用错误报告的](https://stackoverflow.com/questions/6575482/php-how-do-i-enable-error-reporting)信息，请参阅此 StackOverflow 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:40:47.027

您应该在所有页面上都有这些元和标题标签，因此从 PHP 中包含它们当然不是一个坏主意。但是，如果 W3 验证器告诉您这些标签不存在，您应该检查您的输出。也许从浏览器中的“显示源代码”开始，看看标签是否出现在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:41:42.630

如果您尝试发送源文件进行验证，您有： `<?php include('start_html.php'); ?>`

当然你会得到预期的结果——没有标签，因为源文件必须由 PHP 解析和处理。

您可以提供一个工作链接进行验证，或在执行后在浏览器中复制输出，保存文件并发送。

# performance - 矩阵乘法中的超线程和涡轮增压 - 使用超线程时性能更差

> ID：16105956
> 
> 赞同：2
> 
> 时间：2013-04-19T13:36:43.853
> 
> 标签：performance, intel, matrix-multiplication, eigen, hyperthreading

我正在调整我的 GEMM 代码并与 Eigen 和 MKL 进行比较。我有一个具有四个物理核心的系统。到目前为止，我一直使用 OpenMP 的默认线程数（我的系统上为 8 个）。我认为这至少与四个线程一样好。但是，我今天发现，如果我在一个大型密集矩阵 (1000x1000) 上运行 Eigen 和我自己的 GEMM 代码，我使用四个线程而不是八个线程可以获得更好的性能。效率从 45% 跃升至 65%。我认为这也可以在这个情节中看到 [https://plafrim.bordeaux.inria.fr/doku.php?id=people:guenneba](https://plafrim.bordeaux.inria.fr/doku.php?id=people:guenneba)

差异是相当大的。但是，性能不太稳定。使用 Eigen 和我自己的 GEMM 代码，每次迭代的性能都会有所提高。我很惊讶超线程使性能变得如此糟糕。我想这不是一个问题。这是一个意想不到的观察结果，我希望能得到反馈。

我看到这里也建议不使用超线程。
[如何加快 Eigen 库的矩阵乘积？](https://stackoverflow.com/questions/14783219/how-to-speed-up-eigen-librarys-matrix-product)

我确实有一个关于测量最大性能的问题。我现在要做的是运行 CPUz 并在运行 GEMM 代码时查看频率，然后在我的代码中使用该数字（在我使用的一个超频系统上为 4.3 GHz）。我可以相信所有线程的这个数字吗？我如何知道每个线程的频率以确定最大值？如何正确计算涡轮增压？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:26:48.493

超线程的目的是提高表现出高延迟的代码的 CPU 使用率。超线程通过同时处理两个线程来掩盖这种延迟，从而具有更多的指令级并行性。

但是，编写良好的矩阵乘积内核表现出出色的指令级并行性，因此可以利用近 100% 的 CPU 资源。因此，没有第二个“超”线程的空间，其管理的开销只会降低整体性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:14:52.507

除非我错过了什么，否则总是有可能的，你的 CPU 有一个时钟由它的所有组件共享，所以如果你在 4.3GHz（或其他）测量它的速率，那么这就是所有组件的速率，找出一个有意义的速度。如果不是这样，想象一下混乱，一些核心以一种速度运行，另一些核心以另一种速度运行；共享组件（例如内存访问）将变得无法管理。

至于超线程实际上会恶化矩阵乘法的性能，我并不感到惊讶。毕竟，超线程是穷人的并行技术，复制指令流水线而不是功能单元。一旦你的代码在`n*10^6`通过 FPU 推动你的连续内存位置时尖叫，响应管道停顿的上下文切换不会有太大帮助。在最好的情况下，另一个管道会在另一个上下文切换抢走你有用的时钟周期之前尖叫一段时间，最坏的情况是，内存层次结构中所有仔细排列的数据在每次切换时都会被严重破坏。

超线程不是为了并行数值计算速度而设计的，而是为了提高更一般的工作负载的性能；我们在高性能计算中使用通用 CPU 不是因为我们想要超线程，而是因为所有专业的并行数字 CPU 都已经走上正轨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T19:17:06.507

作为多线程并发服务的提供者，我探索了超线程如何在各种条件下影响性能。我发现，对于将其自身的高利用率线程限制为不超过实际可用物理处理器的软件，HT 的存在与否几乎没有什么区别。尝试使用比繁重计算工作更多线程的软件可能没有意识到它正在这样做，仅依赖于总处理器数量（在 HT 下翻倍），并且可以预见地运行得更慢。启用 HT 可能提供的最大好处可能是，您可以最大限度地使用所有物理处理器，而不会让系统的其余部分陷入瘫痪。如果没有 HT，软件通常不得不腾出一个 CPU 来保持主机系统正常运行。

# jquery - jQuery Animate - 侧边栏输入/输出 - 奇怪的行为

> ID：16105959
> 
> 赞同：1
> 
> 时间：2013-04-19T13:36:49.923
> 
> 标签：jquery, jquery-animate

1.  我一直在尝试使用 jQuery animate 在单击打开/关闭链接时从屏幕左侧滑动侧边栏 div 'in/out'。这工作正常。

2.  接下来，当用户滚动到侧边栏 div 的底部时，我想为侧边栏 div 设置动画，这也可以正常工作。

3.  当我在最后一个动画淡出侧边栏后再次尝试单击打开的链接时，就会出现问题。（在 pt.2 运行后）

当我点击打开的链接时，我得到了大约 3-4 秒的延迟，我无法弄清楚我做错了什么，真的很感激一些指针，因为现在我的方法已经变得相当卡住了。

谢谢。

**演示：http:** [//jsfiddle.net/fRFCN/5/](http://jsfiddle.net/fRFCN/5/)

1) 单击打开 2) 向下滚动 3) 侧边栏淡出 4) 再次单击打开 5) 等待 5-8 秒，然后侧边栏出现。第 4 步是延迟误差。

```
jQuery(document).ready(function() {

jQuery(".open a").on("click", function() { 

    jQuery('.sidebar').animate({
          'opacity': '1',
          right: '+=0'
    },300);

    return false; 

});

jQuery('.close').on('click', function() {            
        jQuery('.sidebar').animate({
              'opacity': '0',
              right: '+=0'
        },300);

        return false; 

 });

var element = jQuery('.sidebar');

jQuery(window).scroll(function() {

    var scroll = jQuery(window).scrollTop() + jQuery(window).height();
    var offset = element.offset().top + element.height();

    if (scroll > offset) {

        jQuery('.sidebar').animate({
              'opacity': '0',
              right: '+=0'
        },600);

    } 

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:29:53.413

问题是由于*每次*`scroll`向上或向下滚动窗口时都会触发代码，因此它排队了**很多**动画事件来隐藏侧边栏，即使在滚动回顶部后它们仍在运行并*隐藏*侧边栏. 因此，下一次*打开*将排在长队的最后，因此再次打开的可变时间延迟。

 *****```
$('#pullout').animate({
    'opacity': '0',
    right: '+=0'
},600); 
```

解决此问题的一种方法是添加一个条件来停止多次添加动画，例如：

```
var element = $('#pullout');

if (scroll > offset && $('#pullout').css('opacity') == 1) {
    $('#pullout').animate({
    'opacity': '0',
        right: '+=0'
    },600);
} 
```*****

# wcf - 使用具有多重绑定的 ServiceHostFactory 的 WCF 服务主机

> ID：16105963
> 
> 赞同：0
> 
> 时间：2013-04-19T13:36:55.263
> 
> 标签：wcf, factory, nettcpbinding, basichttpbinding, servicehost

我已经创建了 WCF 服务来托管在 IIS 上。我正在使用 ServiceHostFactory 方法来托管我的服务（使用 Unity 作为 DI）。

我想通过 HTTP 和 TCP 使用多重绑定来托管我的服务。

我尝试给出基地址，但它没有。仍然给我错误，因为服务注册了 HTTP 模式。

下面的代码片段可能会给你和想法。

```
public class MyServiceHostFactory : ServiceHostFactory
{
    protected override ServiceHost CreateServiceHost(
                                Type serviceType, Uri[] baseAddresses)
    {
        MyServiceHost serviceHost = new MyServiceHost(serviceType, baseAddresses);

        //configure container
        MyFactory.Register();

        return serviceHost;
    }
} 
```

配置文件：

```
<system.serviceModel>    
<services>
  <service name="My.Service.MyService">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:9000/MyService/"/>
        <add baseAddress="net.tcp://localhost:9001/MyService/"/>
      </baseAddresses>
    </host>
    <endpoint address="Question" binding="basicHttpBinding" contract="My.Contract.IQuestionContract" />
    <endpoint address="Answer" binding="basicHttpBinding" contract="My.Contract.IAnswerContract" />
    <endpoint address="Question" binding="netTcpBinding" contract="My.Contract.IQuestionContract" />
    <endpoint address="Answer" binding="netTcpBinding"  contract="My.Contract.IAnswerContract" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="MyServicebehavior">
      <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="True">
</serviceHostingEnvironment> 
```

谁能建议我可以做什么？

主要问题，是否可以使用具有多重绑定的 ServiceHostFactory 来托管服务？

如果是，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:10:27.173

我会尝试删除基本 net.tcp 地址并在端点上指定完整地址。

# php - 如何对下表进行排序并获得前 5-5 条记录，前 20-20 条记录？

> ID：16105967
> 
> 赞同：0
> 
> 时间：2013-04-19T13:37:07.757
> 
> 标签：php, mysql, database

这个查询给出了奇怪的结果：

```
 SELECT `user_id`,`rankType`
    FROM `ranks`
    WHERE `user_id` =23
    AND (`rankType` = "top5"
    OR `rankType` = "top20")
    ORDER BY rankType
    LIMIT 0 , 30 
```

这里是[**SQLfiddle**](http://www.sqlfiddle.com/#!2/44c4a/1/0)。

我想要实现的是：

1)只获取top5 rank类型的5条记录，rank类型top20的20条记录

2）我想显示**排名类型**`ascending order`的结果。（但如果你在演示小提琴中看到它显示的是恰当的，）**`may be it is only considering 2 from 20 & 5`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:45:47.767

```
(SELECT `id`,`user_id`,`rankType`
FROM `ranks`
WHERE `user_id` =23
AND `rankType` = "top5"
ORDER BY rankType
LIMIT 0, 5)

union 

(SELECT `id`,`user_id`,`rankType`
FROM `ranks`
WHERE `user_id` =23
AND `rankType` = "top20"
ORDER BY rankType
LIMIT 0, 20) 
```

如果稍后您想添加另一组排序/过滤列，请将其全部包装成类似

```
select * from ( /* previous query goes here */ ) tt
where id > 100
order by id 
```

请注意，它`ranktype`是 varchar，所以它是按字典顺序排序的，所以 top20 < top5。您必须使用自然排序或其他方法才能正确处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:49:32.577

```
SELECT `id`,`user_id`,`rankType`
FROM `ranks`
WHERE `user_id` =23
AND `rankType` = "top5" limit 5
union
SELECT `id`,`user_id`,`rankType`
FROM `ranks`
WHERE `user_id` =23
AND `rankType` = "top20" limit 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:44:27.773

您的结果实际上是按升序排列的，因为`varchar`在字符串比较中，列 rank_type 的类型为 top20 比 top5 排在首位。

如果您只想处理 top5 和 top20 之间的问题，一个肮脏的解决方案可能是：

```
ORDER BY rankType desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:47:48.297

一种可能性，无需执行两个查询并将它们联合起来：

```
ORDER BY FIND_IN_SET(rankType,'top5,top20') 
```**

# r - 从 Word 文档中提取半结构化文本

> ID：16105973
> 
> 赞同：2
> 
> 时间：2013-04-19T13:37:32.247
> 
> 标签：r, text-mining, tm

我想根据以下表格对一组文件进行文本挖掘。我可以创建一个语料库，其中每个文件都是一个文档（使用`tm`），但我认为创建一个语料库可能会更好，其中第二个表单表中的每个部分都是一个具有以下元数据的文档：

```
 Author       : John Smith
  DateTimeStamp: 2013-04-18 16:53:31
  Description  : 
  Heading      : Current Focus
  ID           : Smith-John_e.doc Current Focus
  Language     : en_CA
  Origin       : Smith-John_e.doc
  Name         : John Smith
  Title        : Manager
  TeamMembers  : Joe Blow, John Doe
  GroupLeader  : She who must be obeyed 
```

其中 Name、Title、TeamMembers 和 GroupLeader 是从表单的第一个表中提取的。通过这种方式，要分析的每个文本块都将保留其某些上下文。

解决这个问题的最佳方法是什么？我可以想到两种方法：

*   以某种方式将我拥有的语料库解析为子语料库。
*   以某种方式将文档解析为子文档并从中制作语料库。

任何指针将不胜感激。

这是表格： ![人力资源表格](https://i.stack.imgur.com/ojVNs.png)

[这是一个](https://docs.google.com/file/d/0B1krGGny7BduT2tVeGxCaW5XT2c/edit?usp=sharing)带有 2 个文档的语料库的 RData 文件。exc[[1]] 来自 .doc 和 exc[[2]] 来自 docx。他们都使用了上面的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:45:36.067

这是一种方法的快速草图，希望它可能会引起更有才华的人停下来并提出更有效和更强大的建议...使用`RData`您问题中的文件，我发现`doc`and`docx`文件的结构略有不同，因此需要略有不同方法（尽管我在元数据中看到您`docx`是“fake2.txt”，但真的如此`docx`吗？我在您的另一个 Q 中看到您使用了 R 之外的转换器，这一定是它的原因`txt`）。

```
library(tm) 
```

首先获取`doc`文件的自定义元数据。如您所见，我不是正则表达式专家，但大致是“摆脱尾随和前导空格”，然后“摆脱“单词””，然后摆脱标点符号……

```
# create User-defined local meta data pairs
meta(exc[[1]], type = "corpus", tag = "Name1") <- gsub("^\\s+|\\s+$","", gsub("Name", "", gsub("[[:punct:]]", '', exc[[1]][3])))
meta(exc[[1]], type = "corpus", tag = "Title") <- gsub("^\\s+|\\s+$","", gsub("Title", "", gsub("[[:punct:]]", '', exc[[1]][4])))
meta(exc[[1]], type = "corpus", tag = "TeamMembers") <- gsub("^\\s+|\\s+$","", gsub("Team Members", "", gsub("[[:punct:]]", '', exc[[1]][5])))
meta(exc[[1]], type = "corpus", tag = "ManagerName") <- gsub("^\\s+|\\s+$","", gsub("Name of your", "", gsub("[[:punct:]]", '', exc[[1]][7]))) 
```

现在看看结果

```
 # inspect
    meta(exc[[1]], type = "corpus")
Available meta data pairs are:
  Author       : 
  DateTimeStamp: 2013-04-22 13:59:28
  Description  : 
  Heading      : 
  ID           : fake1.doc
  Language     : en_CA
  Origin       : 
User-defined local meta data pairs are:
$Name1
[1] "John Doe"

$Title
[1] "Manager"

$TeamMembers
[1] "Elise Patton Jeffrey Barnabas"

$ManagerName
[1] "Selma Furtgenstein" 
```

`docx`对文件执行相同的操作

```
# create User-defined local meta data pairs
meta(exc[[2]], type = "corpus", tag = "Name2") <- gsub("^\\s+|\\s+$","", gsub("Name", "", gsub("[[:punct:]]", '', exc[[2]][2])))
meta(exc[[2]], type = "corpus", tag = "Title") <- gsub("^\\s+|\\s+$","", gsub("Title", "", gsub("[[:punct:]]", '', exc[[2]][4])))
meta(exc[[2]], type = "corpus", tag = "TeamMembers") <- gsub("^\\s+|\\s+$","", gsub("Team Members", "", gsub("[[:punct:]]", '', exc[[2]][6])))
meta(exc[[2]], type = "corpus", tag = "ManagerName") <- gsub("^\\s+|\\s+$","", gsub("Name of your", "", gsub("[[:punct:]]", '', exc[[2]][8]))) 
```

看看

```
# inspect
meta(exc[[2]], type = "corpus")
Available meta data pairs are:
  Author       : 
  DateTimeStamp: 2013-04-22 14:06:10
  Description  : 
  Heading      : 
  ID           : fake2.txt
  Language     : en
  Origin       : 
User-defined local meta data pairs are:
$Name2
[1] "Joe Blow"

$Title
[1] "Shift Lead"

$TeamMembers
[1] "Melanie Baumgartner Toby Morrison"

$ManagerName
[1] "Selma Furtgenstein" 
```

如果您有大量文档，那么`lapply`包含这些`meta`功能的功能将是可行的方法。

现在我们已经获得了自定义元数据，我们可以对文档进行子集化以排除该部分文本：

```
# create new corpus that excludes part of doc that is now in metadata. We just use square bracket indexing to subset the lines that are the second table of the forms (slightly different for each doc type)
excBody <- Corpus(VectorSource(c(paste(exc[[1]][13:length(exc[[1]])], collapse = ","), 
                      paste(exc[[2]][9:length(exc[[2]])], collapse = ","))))
# get rid of all the white spaces
excBody <- tm_map(excBody, stripWhitespace) 
```

看一看：

```
inspect(excBody)
A corpus with 2 text documents

The metadata consists of 2 tag-value pairs and a data frame
Available tags are:
  create_date creator 
Available variables in the data frame are:
  MetaID 

[[1]]
|CURRENT RESEARCH FOCUS |,| |,|Lorem ipsum dolor sit amet, consectetur adipiscing elit. |,|Donec at ipsum est, vel ullamcorper enim. |,|In vel dui massa, eget egestas libero. |,|Phasellus facilisis cursus nisi, gravida convallis velit ornare a. |,|MAIN AREAS OF EXPERTISE |,|Vestibulum aliquet faucibus tortor, sed aliquet purus elementum vel. |,|In sit amet ante non turpis elementum porttitor. |,|TECHNOLOGY PLATFORMS, INSTRUMENTATION EMPLOYED |,| Vestibulum sed turpis id nulla eleifend fermentum. |,|Nunc sit amet elit eu neque tincidunt aliquet eu at risus. |,|Cras tempor ipsum justo, ut blandit lacus. |,|INDUSTRY PARTNERS (WITHIN THE PAST FIVE YEARS) |,| Pellentesque facilisis nisl in libero scelerisque mattis eu quis odio. |,|Etiam a justo vel sapien rhoncus interdum. |,|ANTICIPATED PARTICIPATION IN PROGRAMS, EITHER APPROVED OR UNDER DEVELOPMENT |,|(Please include anticipated percentages of your time.) |,| Proin vitae ligula quis enim vulputate sagittis vitae ut ante. |,|ADDITIONAL ROLES, DISTINCTIONS, ACADEMIC QUALIFICATIONS AND NOTES |,|e.g., First Aid Responder, Other languages spoken, Degrees, Charitable Campaign |,|Canvasser (GCWCC), OSH representative, Social Committee |,|Sed nec tellus nec massa accumsan faucibus non imperdiet nibh. |,,

[[2]]
CURRENT RESEARCH FOCUS,,* Lorem ipsum dolor sit amet, consectetur adipiscing elit.,* Donec at ipsum est, vel ullamcorper enim.,* In vel dui massa, eget egestas libero.,* Phasellus facilisis cursus nisi, gravida convallis velit ornare a.,MAIN AREAS OF EXPERTISE,* Vestibulum aliquet faucibus tortor, sed aliquet purus elementum vel.,* In sit amet ante non turpis elementum porttitor. ,TECHNOLOGY PLATFORMS, INSTRUMENTATION EMPLOYED,* Vestibulum sed turpis id nulla eleifend fermentum.,* Nunc sit amet elit eu neque tincidunt aliquet eu at risus.,* Cras tempor ipsum justo, ut blandit lacus.,INDUSTRY PARTNERS (WITHIN THE PAST FIVE YEARS),* Pellentesque facilisis nisl in libero scelerisque mattis eu quis odio.,* Etiam a justo vel sapien rhoncus interdum.,ANTICIPATED PARTICIPATION IN PROGRAMS, EITHER APPROVED OR UNDER DEVELOPMENT ,(Please include anticipated percentages of your time.),* Proin vitae ligula quis enim vulputate sagittis vitae ut ante.,ADDITIONAL ROLES, DISTINCTIONS, ACADEMIC QUALIFICATIONS AND NOTES,e.g., First Aid Responder, Other languages spoken, Degrees, Charitable Campaign Canvasser (GCWCC), OSH representative, Social Committee,* Sed nec tellus nec massa accumsan faucibus non imperdiet nibh.,, 
```

现在文档已准备好进行文本挖掘，上表中的数据已从文档中移出并进入文档元数据。

当然，所有这些都取决于文档的高度规则性。如果每个文档的第一个表中的行数不同，那么简单的索引方法可能会失败（试一试，看看会发生什么），需要更健壮的东西。

**更新：更强大的方法**

更仔细地阅读了这个问题，并[获得了更多关于 regex 的教育](https://stackoverflow.com/q/16161573/1036500)，这是一种更强大且不依赖于对文档的特定行进行索引的方法。相反，我们使用正则表达式从两个单词之间提取文本以制作元数据并拆分文档

以下是我们如何制作用户定义的本地元数据（一种替换上述方法的方法）

```
library(gdata) # for the trim function
txt <- paste0(as.character(exc[[1]]), collapse = ",")

# inspect the document to identify the words on either side of the string
# we want, so 'Name' and 'Title' are on either side of 'John Doe'
extract <- regmatches(txt, gregexpr("(?<=Name).*?(?=Title)", txt, perl=TRUE))
meta(exc[[1]], type = "corpus", tag = "Name1") <- trim(gsub("[[:punct:]]", "", extract))

extract <- regmatches(txt, gregexpr("(?<=Title).*?(?=Team)", txt, perl=TRUE))
meta(exc[[1]], type = "corpus", tag = "Title") <- trim(gsub("[[:punct:]]","", extract))

extract <- regmatches(txt, gregexpr("(?<=Members).*?(?=Supervised)", txt, perl=TRUE))
meta(exc[[1]], type = "corpus", tag = "TeamMembers") <- trim(gsub("[[:punct:]]","", extract))

extract <- regmatches(txt, gregexpr("(?<=your).*?(?=Supervisor)", txt,  perl=TRUE))
meta(exc[[1]], type = "corpus", tag = "ManagerName") <- trim(gsub("[[:punct:]]","", extract))

# inspect
meta(exc[[1]], type = "corpus")

Available meta data pairs are:
  Author       : 
  DateTimeStamp: 2013-04-22 13:59:28
  Description  : 
  Heading      : 
  ID           : fake1.doc
  Language     : en_CA
  Origin       : 
User-defined local meta data pairs are:
$Name1
[1] "John Doe"

$Title
[1] "Manager"

$TeamMembers
[1] "Elise Patton Jeffrey Barnabas"

$ManagerName
[1] "Selma Furtgenstein" 
```

同样，我们可以将第二个表格的部分提取到单独的向量中，然后您可以将它们制作成文档和语料库，或者只是将它们作为向量处理。

```
txt <- paste0(as.character(exc[[1]]), collapse = ",")
CURRENT_RESEARCH_FOCUS <- trim(gsub("[[:punct:]]","", regmatches(txt, gregexpr("(?<=CURRENT RESEARCH FOCUS).*?(?=MAIN AREAS OF EXPERTISE)", txt, perl=TRUE))))
[1] "Lorem ipsum dolor sit amet consectetur adipiscing elit                             Donec at ipsum est vel ullamcorper enim                                            In vel dui massa eget egestas libero                                               Phasellus facilisis cursus nisi gravida convallis velit ornare a"

MAIN_AREAS_OF_EXPERTISE <- trim(gsub("[[:punct:]]","", regmatches(txt, gregexpr("(?<=MAIN AREAS OF EXPERTISE).*?(?=TECHNOLOGY PLATFORMS, INSTRUMENTATION EMPLOYED)", txt, perl=TRUE))))
    [1] "Vestibulum aliquet faucibus tortor sed aliquet purus elementum vel                 In sit amet ante non turpis elementum porttitor" 
```

等等。我希望这更接近你所追求的。如果没有，最好将您的任务分解为一组更小、更集中的问题，然后分别提问（或等待一位大师提出这个问题！）。

# java - 在制作自定义 Maven 插件时，先执行（）还是参数？

> ID：16105977
> 
> 赞同：1
> 
> 时间：2013-04-19T13:37:45.637
> 
> 标签：java, constructor, maven-2, maven-plugin

所以我有一个自定义的 maven 插件，它有一些我用作全局变量的参数。像这样：

```
/**
 * Parameter used keep the name of a file
 * @parameter expression="${filename}" @require
 */
String filename; 
```

**注意**：这是确切的语法。根据我的研究，我很确定这是正确的。

当然，如果这是一个普通的 Java 程序，并且您要`String filename`在上面的行之后打印，您会得到一个错误，因为它没有被初始化。它没有价值。

从我对 maven 插件的理解来看，当您放置`@parameter`和时，选项卡下该插件`@expression`的设置中的任何值现在都设置为Java 程序（或 maven 插件）中的对象。`pom.xml``<filename>``filename`

所以我的问题是哪个先出现？maven 是在 Java 插件中设置参数，还是`execute()`先调用方法？

原因是，我需要`filename`在方法中使用该字符串`execute()`。我希望我解释得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:43:48.933

您可以完全安全地使用`execute`方法中的属性。那时属性已经初始化，这就是重点。

# javascript - 如何将 JS Object Literal 与 jQuery 结合使用？

> ID：16105982
> 
> 赞同：0
> 
> 时间：2013-04-19T13:38:02.557
> 
> 标签：javascript, jquery, javascript-objects

我正在清理我的 JS 代码并想要创建命名空间并使用 JS OO。[我找到了Rebecca Murphey](http://rmurphey.com/blog/2009/10/15/using-objects-to-organize-your-code/)关于 Object Literal 模式 的非常棒的教程。

现在我想知道如何使用它来实现例如 jQuery UI 自动完成功能：

```
// Pseudocode
$('#input_field').myNameSpace.my_search();

var myNameSpace= {
  my_search : function() {
    $(this).autocomplete({...});
  },

  my_other_function: function() {}
}; 
```

目前我正在使用我自己的插件：

```
$('#input_field').my_search();

(function ($) {
  $.fn.my_search = function () {

    $(this).autocomplete({
      minLength: 2,
      source: function( request, response ) {
        jQuery.ajax({
          url: callback_url,
          dataType: "json",
          data: {
            term: request.term
          },
          success: function( data ) {
            response( jQuery.map( data, function( item ) {
              return {
                id: item.id,
                value: item.name,
                name_encoded: item.name_encoded
              }
            }));
          }
        });
      },
      select: function( event, ui ) {
        (...)
      }
    });
  }
})(jQuery); 
```

任何帮助表示赞赏。

**更新**
我的第一个示例非常接近，James Kyburz 也非常接近（但有效）。我已经简化了詹姆斯的答案以避免复杂的返回数据。

```
(function () {
  // Namspace which also kind of works like an interface
  $.fn.my_name_space = function(opt) {
    this.autosuggest_brand = autosuggest.autosuggest_brand;
    return this;
  }

  var autosuggest = {
    autosuggest_brand : function(action) {
      $(this).autocomplete({
        // Autocomplete stuff here
      });
    },
    som_other_function _ function() {}
  }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:11:27.830

不，您不能为 jQuery 插件使用命名空间（或者只是非常复杂 -当您*在命名空间对象上*执行方法时，选择的[上下文](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)会丢失）。`.my_search()`

 *您当前的插件很好；如果您想要命名空间，请使用前缀，例如`namespace_search`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:22:33.120

我还在尝试，但不认为这是可能的

一种方法是将所有内容包装在一个函数中，而不是命名空间......

```
$.fn.my_namespace = function() {
  var el = this;
  var foo = function() { console.log('foo', el); };
  var bar = function() { console.log('bar', el); };
  return { foo: foo, bar: bar };
}

$('input:first').my_namespace().foo() // foo, [input...]
$('input:first').my_namespace().bar() // bar, [input...] 
```

除非您需要使用 defineProperty 支持旧浏览器，否则可能是一种解决方案

```
Object.defineProperty($.fn, 'my_namespace', {
  get: function() {
    var el = this;
    return {
      foo: function() { console.log( 'foo', el); },
      bar: function() { console.log( 'bar', el); },
    }
  }
});

$('input:first').my_namespace.foo() // foo, [input...]
$('input:first').my_namespace.bar() // bar, [input...] 
```*

# javascript - 在 html 选择选项元素中提取 xml 元素

> ID：16105983
> 
> 赞同：2
> 
> 时间：2013-04-19T13:38:05.110
> 
> 标签：javascript, html, xml

我有一个糟糕的遗留 HTML 文档，其中包含一些用于创建元数据形式的混合 XML 和一些复杂的 JavaScript 来操作所有需要升级到 IE9 的元数据。目前，我在使用包含选项元素内的一些额外 XML 节点的选择控件时遇到问题：

```
<select id="NoOfApplicants_Q" onchange="validate_js(this);doNoOfApplicantsChange();">
    <option value="" selected="true">Please select
        <tla:instruction type="jscript" value="$jointApplication = false;"></tla:instruction>
        <tla:instruction type="hide" value="App2Identity"></tla:instruction>
        <tla:instruction type="hide" value="App2Applicant"></tla:instruction>
    </option>
    <option value="1">One
        <tla:instruction type="jscript" value="$jointApplication = false;"></tla:instruction>
        <tla:instruction type="hide" value="App2Identity"></tla:instruction>
        <tla:instruction type="hide" value="App2Applicant"></tla:instruction>
    </option>
    <option value="2">Two
        <tla:instruction type="jscript" value="$jointApplication = true;"></tla:instruction>
    </option>
</select> 
```

我需要使用 JavaScript 读取 tla:instruction 节点，以便对它们进行一些后续处理。但是，我目前拥有的代码行没有返回任何节点：

```
instructions = control.options[control.selectedIndex].getElementsByTagName('tla:instruction'); 
```

如果我通过 Watch 窗口检查 DOM，那么下面唯一的元素`control.options[control.selectedIndex]`就是选项中的文本元素。例如“请选择”、“一个”等。

**如何从所选选项中获取 tla:instruction 元素的数组/列表/集合？**

更新：是否可以通过将文件作为 XML 文档打开然后从那里提取它们来提取它们？

附加背景：上面的简化片段是我公司旧 VB6 产品中用作电子表格的更大文档的一部分。它**混合了 XML 和 HTML，没有架构**，并且仅通过[VB6 Web 浏览器](http://msdn.microsoft.com/en-GB/library/ms234651%28v=vs.80%29.aspx)控件显示。因为 Web 浏览器控件可以很好地处理格式错误的标记并且几乎忽略了 JavaScript 错误，所以设计中固有的所有问题都被允许恶化十年。

ps 请注意，我不能使用 jquery，因为旧文档是由第三方控制的。

pps[在此处查看与输入控件类似的问题](https://stackoverflow.com/questions/16087881/retrieve-child-nodes-of-specific-schema-type-from-input-control)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:57:43.350

我没有 VB6 Web 浏览器控件可以在与您完全相同的情况下进行测试，但是在 JSFiddle 上玩一点 Firebug 给了我一些想法（但显然，它在普通浏览器中不起作用）。根据您的测试/调试环境的设置方式，首先尝试计算选项元素的子元素，以查看 Javascript 是否可以远程看到它。

所以`control.options[control.selectedIndex].children.count`首先尝试，如果返回 1 或更多，请尝试循环遍历 children 集合。甚至可以查看`childNodes`选项元素的属性以查看返回的内容。

如果这些不返回您想要的，我认为没有办法在不将 XML 更改为 HTML 的情况下做到这一点。

**HTML**

```
<select id="NoOfApplicants_Q" onchange="getChangedValue(this)">
<option value="" selected="true">Please select
    <tla:instruction type="jscript" value="$jointApplication = false;"></tla:instruction>
    <tla:instruction type="hide" value="App2Identity"></tla:instruction>
    <tla:instruction type="hide" value="App2Applicant"></tla:instruction>
</option>
<option value="1">One
    <tla:instruction type="jscript" value="$jointApplication = false;"></tla:instruction>
    <tla:instruction type="hide" value="App2Identity"></tla:instruction>
    <tla:instruction type="hide" value="App2Applicant"></tla:instruction>
</option>
<option value="2">Two
    <tla:instruction type="jscript" value="$jointApplication = true;"></tla:instruction>
</option> 
```

**JS**

```
window.getChangedValue = function(SelectElement)
{
    var option = SelectElement.options[SelectElement.selectedIndex];
    alert("Count of Children Elements: "+option.children.length);
} 
```

[JSFiddle](http://jsfiddle.net/GXuZP/2/)

# c# - 程序运行时创建文件后目录被锁定

> ID：16105987
> 
> 赞同：3
> 
> 时间：2013-04-19T13:38:14.383
> 
> 标签：c#, directory, locked-files

在目录中创建文件后，只要创建该文件的程序正在运行，该目录就会被锁定。有什么办法可以解除锁吗？稍后我需要重命名目录几行，我总是得到一个`IOException`说法“访问路径”......“被拒绝”。

```
Directory.CreateDirectory(dstPath);
File.Copy(srcPath + "\\File1.txt", dstPath + "\\File1.txt"); // no lock yet
File.Create(dstPath + "\\" + "File2.txt"); // causes lock 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T13:43:37.880

`File.Create(string path)`创建一个文件并使流保持打开状态。

您需要执行以下操作：

```
Directory.CreateDirectory(dstPath);
File.Copy(srcPath + "\\File1.txt", dstPath + "\\File1.txt");
using (var stream = File.Create(dstPath + "\\" + "File2.txt"))
{
    //you can write to the file here
} 
```

using 语句确保您将关闭流并释放对文件的锁定。

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T13:40:27.073

你试过关闭你的`FileStream`吗？例如

```
var fs = File.Create(dstPath + "\\" + "File2.txt"); // causes lock
fs.Close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T13:56:16.223

我建议你使用一个`using`语句：

```
using (var stream = File.Create(path))
{
   //....
} 
```

但您还应该注意在 using 语句中使用对象初始化器：

```
using (var stream = new FileStream(path) {Position = position})
{
  //....
} 
```

在这种情况下，它将被编译为：

```
var tmp = new FileStream(path);
tmp.Position = position;
var stream = tmp;

try
{ }
finally
{
    if (stream != null)
        ((IDisposable)stream).Dispose();
} 
```

如果`Position`setter 抛出异常，`Dispose()`则不会为临时变量调用。

# c++ - 代码中的错误（例如“变量”）未在此范围内声明

> ID：16105994
> 
> 赞同：0
> 
> 时间：2013-04-19T13:38:41.387
> 
> 标签：c++

我需要帮助，我正在尝试制作一个程序，通过考虑一些变量来计算某人的净工资，在这种情况下，我只是为速度设定了常数。

这些变量是：姓名 Mary、工作时间 (35)、时薪 (10.50)、总工资 (367.50)、税收 (@20%=73.50)、PRSI (@2.5% =9.19) 和工会会费 (3.50)。

这些都经过计算以找到净工资。

我认为这很容易，但我不明白我哪里出错了，我的代码是：

```
#include <iostream>
#include <string>
using namespace std;

double net_pay (double hours, double gpay, double hrate, double dues,double tax, double taxr,double prsir,double prsi);

int main()
{

    string name;
    const double hrate = 10.50;
    const double taxr = .2;
    const double prsir = .025;
    const double dues = 3.50;
    const int hours = 35;
    cout << "enter name";
    cin >> name;

    net_pay ( hours,  gpay,  hrate, dues, taxr, tax, prsi, prsir);
    cout << name;
    cout << net_pay;

return 0;
}

double net_pay (double hours, double gpay, double hrate , double dues , double taxr, double tax , double prsi , double prsir) {

    gpay = hours * hrate;
    tax = gpay * taxr;
    prsi = prsir * gpay;
    return net_pay = gpay - (tax+prsi+dues);

}

//taxr = taxrate....prsir = prsirate....gpay = grosspay 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:44:09.183

您的返回变量 net_pay 是您的函数的名称。只需这样做：

```
double net_pay (double hours, double gpay, double hrate , double dues , double taxr, double tax , double prsi , double prsir) {

    gpay = hours * hrate;
    tax = gpay * taxr;
    prsi = prsir * gpay;
    return gpay - (tax+prsi+dues);

} 
```

并且它没有在你的 main 中声明：

```
int main()
{

string name;
const double hrate = 10.50;
const double taxr = .2;
const double prsir = .025;
const double dues = 3.50;
const int hours = 35;
cout << "enter name";
cin >> name;

double n_pay_var = net_pay ( hours,  gpay,  hrate, dues, taxr, tax, prsi, prsir);
cout << name;
cout << net_pay_var;

return 0;
} 
```

您也没有在 main 中为 net_pay() 函数调用声明所有变量：`gpay, tax and prsi.`

所以 ：

```
int main()
{

string name;
const double hrate = 10.50;
const double taxr = .2;
const double prsir = .025;
const double dues = 3.50;
const int hours = 35;
cout << "enter name";
cin >> name;

double tax ;//SET IT
double gpay;//SET IT
double prsi;//SET IT

cout << name;
cout << net_pay ( hours,  gpay,  hrate, dues, taxr, tax, prsi, prsir);

return 0;
}

double net_pay (double hours, double gpay, double hrate , double dues , double taxr, double tax , double prsi , double prsir) {

gpay = hours * hrate;
tax = gpay * taxr;
prsi = prsir * gpay;
return gpay - (tax+prsi+dues);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:44:48.323

您正在使用未定义的参数调用该函数：

```
net_pay ( hours,  gpay,  hrate, dues, taxr, tax, prsi, prsir); // No no!
                  ^^^^                      ^^^  ^^^^ 
```

主要没有定义这些。尝试定义`gpay`，`tax`并`prsi`在调用之前`net_pay`。

返回值时，您不需要将其设置为该函数：

```
return net_pay = gpay - (tax+prsi+dues);  // No no!
       ^^^^^^^^^ 
```

只是

```
return gpay - (tax+prsi+dues); 
```

此外，将结果存储`net_pay`在一个变量中：

```
double r = net_pay(hours,  gpay,  hrate, dues, taxr, tax, prsi, prsir);

cout << name;
cout << r;
cout << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:45:29.123

我认为这句话是错误发生的。

```
return net_pay = gpay - (tax+prsi+dues); 
```

net_pay 是一个方法名而不是一个变量，所以像下面这样改变它：

```
return gpay - (tax+prsi+dues); 
```

# python - tkinter - 如何打开多个文件对话框？

> ID：16105998
> 
> 赞同：1
> 
> 时间：2013-04-19T13:39:06.957
> 
> 标签：python, python-3.x, tkinter, tk

在 python 的默认编辑器 IDLE 中，可以同时打开多个“打开”对话框。

我正在查看他们的来源，但我找不到可以复制这种行为的地方。从他们`IOBinding.py`的：

```
from tkinter import filedialog as TkFileDialog
...

class IOBinding:
    ...
    def askopenfile(self):
        dir, base = self.defaultfilename("open")
        if not self.opendialog:
            self.opendialog = tkFileDialog.Open(master=self.text,
                                                filetypes=self.filetypes)
        filename = self.opendialog.show(initialdir=dir, initialfile=base)
        return filename 
```

所以他们确实使用了 tkinter 的内置 filedialog 模块，但我找不到一些“无模式”对话框的方法。我可以通过两个基本相同的代码打开对话框：

```
from tkinter import filedialog as tkFileDialog

file_name = tkFileDialog.Open( ... ).show()
file_name = tkFileDialog.askopenfilename() 
```

但它们会阻止整个应用程序 - 用户在关闭对话框之前无法切换窗口或发出新命令。另外，我不能从不同的线程调用这些对话框函数——这会杀死我的整个 Tk 应用程序。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:04:40.993

`filedialog`有`parent`选择权。您可以将其更改为隐藏窗口以防止阻塞根窗口：

```
from tkinter import filedialog as tkFileDialog
from tkinter import *

def ask_open():
    p = hidden if attach_to_hidden.get() else root
    tkFileDialog.Open(parent=p).show()

root = Tk()
hidden = Toplevel()
hidden.withdraw()

attach_to_hidden = IntVar()
Checkbutton(root, text='Attach to hidden window', variable=attach_to_hidden).pack()
Button(root, text='Open', command=ask_open).pack()

root.mainloop() 
```