# StackOverflow 问答 15261000-15261999

# python - 每次创建页面时，如何生成一定长度的随机 url？

> ID：15261000
> 
> 赞同：4
> 
> 时间：2013-03-07T00:38:04.710
> 
> 标签：python, url, data-structures, pyramid

在我的 python/pyramid 应用程序中，我让用户生成存储在 amazon s3 存储桶中的 html 页面。我希望每个页面都有一个单独的路径，例如 www.domain.com/2cxj4kl。我已经想出了如何生成要放入 url 的随机字符串，但我更关心重复。如何根据现有字符串列表检查每个字符串，以便不覆盖任何内容？我可以将每个字符串放入字典或数组中，并在每次创建新字符串时检查不断增长的数组/字典吗？继续增长这样的对象是否存在问题，它会以某种方式永久存在于应用程序内存中吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T21:33:41.200

在一些存储中存储现有标识符列表并将新标识符与列表进行比较的方法在简单的情况下可以工作，但是，如果您必须存储数十亿个标识符，或者如果您想要生成他们在不止一台机器上。这也使存储列表、检索、比较等变得复杂。更不用说锁定了——如果两个用户决定在同一秒创建一个页面怎么办？

通用唯一标识符 (UUID)[发生碰撞的几率非常低](http://en.wikipedia.org/wiki/Universally_unique_identifier#Random_UUID_probability_of_duplicates)——比我们的星球在接下来的五分钟内被黑洞吞噬的几率要低得多。如此之低，以至于您出于任何实际目的都可以忽略它。

Python 有一个名为[uuid](http://docs.python.org/2/library/uuid.html)的库来生成 UUID

```
>>> import uuid
>>> # make a random UUID
>>> u = uuid.uuid4()
>>> u.hex
'f3db6f9a34ed48938a45113ac4b5f156' 
```

生成的字符串长度为 32 个字符，这对您来说可能太长了。

或者，您可以像这样生成一个随机字符串：

```
''.join(random.choice(string.ascii_letters + string.digits) for x in range(12)) 
```

在 10-15 个字符长时，它可能比 UUID 随机性要小，但发生冲突的可能性仍然比亚马逊数据中心的看门人精神失常、用斧头摧毁你的服务器的可能性要低得多让数据中心着火:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:06:30.517

我是 Python 和编程的新手，但这里有一些我可以通过“随机字符串”的想法看到的问题：

如果您使用较短的字符串，您很可能最终会一遍又一遍地生成相同的字符串。另一方面，如果您使用较长的字符串，则获得相同字符串的变化较小。但是，您需要注意任何一种情况下的重复项。因此，我的建议是对您需要多少个 url 进行一些估计，并为其使用最佳字符串长度。

最简单的方法是将这些 url 保存在一个列表中，并在注册新的之前使用一个简单的 if 检查：

```
如果 url_list 中有 new_url：
    generate_new_url()
别的：
    url_list.append(new_url)

```

但是，听起来您也希望使用数据库来永久存储您的网址。在大多数基于 sql 的数据库中，您可以将 url 列设置为“唯一”；因此数据库会阻止您使用重复的网址。

我不确定，但使用数据库你可能可以这样做：

```
尝试：
    #向数据库中插入值
除了：
    generate_new_url()

```

# ios - 非连续 UISlider iOS

> ID：15261002
> 
> 赞同：0
> 
> 时间：2013-03-07T00:38:07.907
> 
> 标签：ios, objective-c, uikit, uislider

我将如何设置 UISlider 以便它不会连续滑动，而是只更改为离散值？我想在特定的时间间隔设置滑块的值，但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:49:50.473

当我需要在滑块上设置步长值时，我会使用此方法。将 sliderStepValue 更改为您需要的任何内容。

```
-(NSNumber *)updateSliderStepValueWithSlider:(UISlider *)slider {
    NSInteger sliderStepValue = 1.0f;

    float newStep = roundf((slider.value) / sliderStepValue);

    // Convert "steps" back to the context of the sliders values.
    slider.value = newStep * sliderStepValue;;

    return [NSNumber numberWithFloat:slider.value];
}

- (IBAction)mySliderChanged:(UISlider *)sender {
    NSNumber *sliderStepValue = [self updateSliderStepValueWithSlider:sender];  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:47:57.653

只是将返回值设置为整数？

```
- (IBAction)slider1Changed:(UISlider *)sender {
  NSInteger value = sender.value;

} 
```

# sql - 错误：子查询返回超过 1 个值

> ID：15261003
> 
> 赞同：0
> 
> 时间：2013-03-07T00:38:08.620
> 
> 标签：sql, sql-server

我更新整个表的查询如下所示：

```
update works set nIndex = cast(replace(replace((select strIndex 
 from works), char(10), ''), char(10), '') as int) 
```

但是，当我运行它时，出现此错误：

> “子查询返回的值超过 1 个。当子查询跟随 =、!=、<、<=、>、>= 或将子查询用作表达式时，这是不允许的。”

.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:41:14.077

您不需要子选择。尝试这个：

```
update works
     set nIndex = cast(replace(replace(strIndex, char(10), ''), char(10), '') as int) 
```

您的子选择正在返回*所有*值`strIndex`以更新每一行。那太矫枉过正了。只需对一行中的值执行`cast`and即可。`replace`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:40:28.427

正如错误所说，您在这里返回了多个记录：

```
select strIndex from works 
```

因此，您正在尝试使用 works 表中的每个 strIndex 值更新单个值。这行不通。

如何让它工作真的取决于你想要做什么。由于您还没有在这里讨论，我不会推测什么会解决这个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:03:27.827

您遇到的错误基本上是说您正在尝试为 nIndex 获取多个结果，因为这是以下结果： select strIndex from works

忘记所有的演员和替换你说： nIndex = (1, 2, 3, 4,...) 这是不可能的，因为你只能在那里给出一个值。

为此，您需要有一些限制结果的东西： select strIndex from works WHERE PRIMARY_KEY = SOMETHING 这不是解决您的问题的有效方法，但您可以理解。

由于两列在同一个表中，这根本没有必要，您可以简单地执行以下操作：

更新作品集 nIndex = cast(replace(replace(strIndex, char(10), ''), char(10), '') as int)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T00:53:34.510

您还可以在子查询中添加**TOP1**，这将修复该错误

```
update works set nIndex = cast(replace(replace((select TOP 1 strIndex 
from works), char(10), ''), char(10), '') as int) 
```

但由于我们没有上下文，因此不保证结果是您所期望的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T01:16:45.267

除了其他回复外，我怀疑您并不是要更换`char(10)`两次。您可能想要的是同时替换`char(10)`and `char(13)`：

```
UPDATE dbo.works 
  SET nIndex = CONVERT(INT, REPLACE(REPLACE(
    strIndex, CHAR(13), ''), CHAR(10), '')); 
```

当然，既然`strIndex`是字符串，它可能包含除 CR/LF 之外的其他字符，因此您可能需要添加一个`WHERE`子句：

```
WHERE ISNUMERIC(REPLACE(REPLACE(strIndex, CHAR(13), ''), CHAR(10), '')) = 1; 
```

或者您可以在更新中使用`CASE`表达式来确保将不兼容的值设置为`NULL`，例如：

```
UPDATE dbo.works 
  SET nIndex = CASE 
    WHEN ISNUMERIC(REPLACE(REPLACE(strIndex, CHAR(13), ''), CHAR(10), '')) = 1
  THEN 
    CONVERT(INT, REPLACE(REPLACE(
    strIndex, CHAR(13), ''), CHAR(10), '')) 
  ELSE NULL END; 
```

在 SQL Server 2012 中，这个逻辑要简单得多，例如[`TRY_CONVERT()`](http://msdn.microsoft.com/en-us/library/hh230993.aspx).

# python - 用python检测是否是英文文本

> ID：15261004
> 
> 赞同：7
> 
> 时间：2013-03-07T00:38:11.303
> 
> 标签：python, api, python-2.7, nlp

好吧，我知道这个问题被问了多次，但我仍然无法用“可用”解决方案来解决它。希望对如何检测我的句子有任何进一步的想法或概念是python中的英语。可用的解决方案：

*   语言检测器（在 ruby​​ 中，不在 python 中：/）
*   Google Translate API v2（不再免费，当我为学术目的做这个项目时，每月必须支付 20 美元。礼貌限制：0 个字符/天）
*   python的语言识别（找不到源代码，链接在下面。[自动语言识别](http://cogscicoder.blogspot.com/2009/03/automatic-language-identification-using.html)）
*   [Enchant](http://pythonhosted.org/pyenchant/)（它不适用于 python 2.7？我是 python 新手，有什么指南吗？我敢打赌这将是我需要的）
*   来自 NLTK 的 Wordnet（我不知道为什么缺少“wordnet.synsets”，只有“wordnet.Synset”可用。解决方案中的示例代码对我也不起作用 T_T，可能又是版本问题？）
*   将英语单词存储到列表中并比较该单词是否存在（是的，当句子来自推特时，这是一种不好的方法......你知道：P）

**工作解决方案**

最后经过一系列的尝试，以下是可行的解决方案（替代上述列表）

*   Wiktionary API（使用 Urllib2 和 simplejson 来解析它。然后查找键是否为 -1 表示该单词不存在。否则它是英文。当然，在 twitter 中使用必须将您的单词预处理为没有特殊字符，如 @ #,?!. 对于如何找到密钥将在此处引用[。Simplejson 和随机密钥值](https://stackoverflow.com/questions/15261465/simplejson-and-random-key-value)）
*   Dogukan Tufekci 的回答（勾选）（弱点：假设小于 20 个字符的句子必须安装 PyEnchant 否则它将返回 UNKNOWN。虽然 PyEnchant 不支持 Python 2.7，但意味着无法安装并且不能工作到少于 20字句）

***参考***

*   [检测文本是否为英文（批量）](https://stackoverflow.com/questions/4605062/detecting-whether-or-not-text-is-english-in-bulk)
*   [如何用Python检查一个单词是否是英文单词？](https://stackoverflow.com/questions/3788870/how-to-check-if-a-word-is-an-english-word-with-python)
*   [如何检索维基词典的单词内容？](https://stackoverflow.com/questions/2770547/is-there-an-api-available-to-retrieve-raw-wiktionary-data)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T00:49:41.247

您可以尝试我通过[Miguel Grinber 的 The Flask Mega Tutorial找到的](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xv-ajax)[guess_language](https://bitbucket.org/spirit/guess_language)库。看起来它支持 Python 2 和 3，所以应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:42:59.063

您也许可以利用隐马尔可夫模型来检测语言，每种语言都有自己的特征。

# ruby-on-rails - ruby 正则表达式（删除字符）

> ID：15261005
> 
> 赞同：1
> 
> 时间：2013-03-07T00:38:11.860
> 
> 标签：ruby-on-rails, ruby, regex

我正在从数据库中获取一些结果：

```
@log_detail = connection.execute("SELECT logs,setup FROM mastertest WHERE test_ins_id LIKE blah blah blah"); 
```

结果

```
 logs = a/atf/something
 setup = tb-1-atf with ac-2115 
```

我想

```
logs = atf/something
setup = 2115 
```

我为日志尝试了以下操作，但它似乎不起作用

```
@log_detail.each do |row|
    row[0] = row[0].drop(2) 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:50:56.293

尝试：

```
row[0] = row[0][2..-1] 
```

并查看[String](http://www.ruby-doc.org/core-2.0/String.html)`[]`上的方法。

# c# - 如何确定相对路径的最顶层文件夹（根）？

> ID：15261008
> 
> 赞同：0
> 
> 时间：2013-03-07T00:38:31.923
> 
> 标签：c#, .net, path

给定相对路径字符串：

```
"SomeFolder\\Container\\file.txt" 
```

我想确定最顶层的父文件夹或根文件夹，`"SomeFolder"`.

```
Path.GetPathRoot("SomeFolder\\Container\\file.txt"); // returns empty 
```

我宁愿避免使用“string voodoo”，以便可以将其移植到具有不同目录分隔符的系统中。

是否有一些我忽略的明显方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:45:51.543

从[Path.GetPathRoot 方法](http://msdn.microsoft.com/en-us/library/system.io.path.getpathroot.aspx)：

> 返回 path 的根目录，如“C:\”，如果 path 为 null，则返回 null，如果 path 不包含根目录信息，则返回空字符串。

你的路径没有根。这就是为什么你得到空字符串的原因。在调用`GetPathRoot()`.

```
var somePath = "SomeFolder\\Container\\file.txt";

String root;
if (Path.IsPathRooted(somePath))
    root = Path.GetPathRoot(somePath);
else
    root = somePath.Split(Path.DirectorySeparatorChar).First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:57:49.043

@Will 建议使用`Uri`该类，我已将其用于其他一些路径操作，效果很好。

我用以下方法解决了这个问题：

```
/// <summary>
/// Returns the path root if absolute, or the topmost folder if relative.
/// The original path is returned if no containers exist.
/// </summary>
public static string GetTopmostFolder(string path)
{
    if (path.StartsWith(Path.DirectorySeparatorChar.ToString()))
        path = path.Substring(1);

    Uri inputPath;

    if (Uri.TryCreate(path, UriKind.Absolute, out inputPath))
        return Path.GetPathRoot(path);

    if (Uri.TryCreate(path, UriKind.Relative, out inputPath))
        return path.Split(Path.DirectorySeparatorChar)[0];

    return path;
} 
```

**编辑：**

修改为去除前导目录分隔符。我预计它们不会有任何输入字符串，但最好计划一下以防万一。

# ember.js - ember 需要路由吗？

> ID：15261009
> 
> 赞同：2
> 
> 时间：2013-03-07T00:38:37.780
> 
> 标签：ember.js, wordpress

我正在[为 wordpress 编写一个提要阅读器插件](http://github.com/mattkatz/Wordprss "Wordpress 的 Feed 阅读器插件")。提要有条目。单击一个提要，显示该提要中的条目。

我在旧版本的 ember 中工作，但是当我尝试升级到候选版本时，似乎我们必须有一个路由器。定义路线等正在变成一个令人头疼的问题，我想知道我是否可以只使用我为 ember 准备的数据绑定。

有没有办法只使用数据绑定到控制器和模型而不必经历整个路由器业务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:30:02.437

> 有没有办法只使用数据绑定到控制器和模型而不必经历整个路由器业务？

是的，可以在没有路由器的情况下使用 ember。它仍然会在后台出现，但不会造成任何麻烦。只需设置，`location: 'none'`然后根据 需要进行自定义。您可能会发现自定义它仍然很有用。`App.ApplicationController``App.ApplicationView``application.hbs``App.ApplicationRoute`

```
App.Router.reopen({
  location: 'none'
}); 
```

FWIW @commadelimited 是对的，请查看 Peepcode 视频并考虑利用路由器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:08:45.077

Ember 的路由具有智能默认值，因此如果您的应用程序非常基础，您可能不需要触摸路由。

location:none 只是简单地使您的 url 不显示状态更改，这可能很有用

如果您的应用程序对路由没有任何用途（也许它非常小），您可以简单地将所有内容放入初始状态/路由的控制器中，而不必担心。

但即使你有几个状态的简单设置：

```
App.Router.map(function() {
    this.resource("index", { path: "/" }, function(){
        this.route("stuff", { path: "/stuff" });
        this.route("otherstuff", { path: "/otherstuff" });
    });
}); 
```

路由默认操作是处理其背后的魔法，所以你不需要做任何事情:)

# java - Java 支持 想不通

> ID：15261011
> 
> 赞同：0
> 
> 时间：2013-03-07T00:38:50.663
> 
> 标签：java

看了这个帖子实在是想不通：

[在 JLabel 中显示 BMP](https://stackoverflow.com/questions/593830/display-bmp-in-jlabel)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T00:51:27.350

你试试这个方法怎么样。

参考：[Java 技巧 43：如何在 Java 应用程序中读取 8 位和 24 位 Microsoft Windows 位图](http://www.javaworld.com/javatips/jw-javatip43.html)。

# javascript - Web Audio 启动和停止振荡器，然后再次启动它

> ID：15261030
> 
> 赞同：10
> 
> 时间：2013-03-07T00:40:30.430
> 
> 标签：javascript, audio, web-audio-api

我正在尝试启动和停止声音。那行得通。但我无法再次启动声音。

我真的需要再制造一个振荡器吗？这似乎非常不直观。一定会有更好的办法。

这就是我所拥有的一切：

```
oscillator1.noteOn(0);
oscillator1.noteOff(0); 
```

再次调用 noteOn 没有任何作用。为什么？超出了我的范围。

我还尝试将音量或在 Web Audio 人的上下文中设置为“增益”，等于零。但是由于某种原因，零增益会发出声音。什么增益值不会发出任何声音？

伙计，我不敢相信这是多么困难：/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T11:19:59.253

实际上，是的，您必须创建一个新的振荡器节点。API 的设计和优化可以与该模式一起使用。

Taoist 代码中的断开模式基本上是一种创建新振荡器的复杂方式（每次运行 oscOn 时都会这样做）。它永远不会在断开连接的旧振荡器上显式调用 noteOff，因此它可能仍在后台运行（不确定网络音频如何处理此问题），尽管由于它与音频链断开连接而听不见。因此，它可能会在后台堆叠正在运行并耗尽 CPU 的振荡器。

~~这是相同的代码，尽管正确使用了 noteOff()。[http://codepen.io/Theodeus/pen/afgqk](http://codepen.io/Theodeus/pen/afgqk)~~

~~这是相同的代码，虽然使用增益节点来控制振荡器，因此始终只使用相同的振荡器（尽管不建议这样做，最好为每个音符创建一个新的振荡器，我认为）[http://codepen .io/Theodeus/pen/aKFje](http://codepen.io/Theodeus/pen/aKFje)~~

**编辑 2015 年 4 月**
由于代码示例似乎在网络空间中丢失，这是我写的关于振荡器的教程，其中包含显示振荡器的一次性性质的代码示例。它与上面引用的代码并不完全相同，但它显示了相同的概念。[http://codepen.io/Theodeus/blog/web-audio-synth-part-1-generating-sound](http://codepen.io/Theodeus/blog/web-audio-synth-part-1-generating-sound) - 它的要点是：

```
//This won't work. Can't call play twice.
var context = new AudioContext(),
    oscillator = context.createOscillator();

oscillator.connect(context.destination);
oscillator.start(context.currentTime);
oscillator.stop(context.currentTime + 0.5);
oscillator.start(context.currentTime + 1);
oscillator.stop(context.currentTime + 1.5);

//this will work!
var context = new AudioContext(),
    oscillator;

function playOscillator(startTime, endTime) {
    oscillator = context.createOscillator();
    oscillator.connect(context.destination);
    oscillator.start(startTime);
    oscillator.stop(endTime);
}

playOscillator(context.currentTime, context.currentTime + 0.5);
playOscillator(context.currentTime + 1, context.currentTime + 1.5); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T00:50:31.387

您必须使用 .disconnect() 方法（除非规范最近发生了变化）。

我在这里写了这个：

[http://en.wikiaudio.org/Web_Audio_API:Toggle_oscillator_on_and_off](http://en.wikiaudio.org/Web_Audio_API:Toggle_oscillator_on_and_off)

**编辑**

当我只是想了解 Web Audio API 的工作原理时，这个响应是旧的。您不需要使用断开连接。

# passwords - 成对从列表中生成密码

> ID：15261034
> 
> 赞同：0
> 
> 时间：2013-03-06T23:29:15.440
> 
> 标签：passwords, truecrypt

我最近发现了我的一个旧的 TrueCrypt 卷文件，但是在尝试了一个小时的不同密码后，我还没有找到正确的密码。我知道我使用了旧密码的组合，但是手动尝试所有组合需要很长时间。我尝试了不同的程序（例如 Crunch）来构建一个单词表，但它们所做的只是生成 .txt 文件中每个条目的组合。

所以我的问题是：有没有人知道一个程序可以组合文件中的所有条目，但只能成对的两个？

例如：

字符串 1 = 你好

字符串 2 = 再见

输出 =

你好再见

再见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:22:47.307

在 Windows 下，以下命令会将两个密码的所有组合组合到一个新文件中，使用纯文本文件作为输入，并使用行分隔的密码。

```
for /F "tokens=*" %i in (passwords.txt) do @(
    for /F "tokens=*" %j in (passwords.txt) do
        @echo %i%j
)>> combinations.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:37:25.553

## 示例词表：`cat list.txt`

```
a
b
c
d 
```

## 脚本`cat list.py`：：

```
words = []
file = open('list.txt', 'r')
for word in file.readlines():
    words.append(word.replace('\n', ''))

#i - 1 is to prevent extending past the end of the list on last try
for i in range(len(words) - 1):
    #i + 1 is to prevent "wordword"
    for j in range(i + 1, len(words)):
        print words[i] + words[j]
        print words[j] + words[i] 
```

## 输出：`python list.py`

```
ab
ba
ac
ca
ad
da
bc
cb
bd
db
cd
dc 
```

# php - Facebook sdk 使用 php：如何获取已连接用户的用户 ID

> ID：15261037
> 
> 赞同：1
> 
> 时间：2013-03-07T00:40:43.217
> 
> 标签：php, facebook, sdk, facebook-php-sdk, userid

如何获取当前登录的用户 ID？

我很确定我的 appId 是正确的

```
 $facebook = new Facebook(array(
  'appId'  => '...',
  'secret' => '...',
)); 
```

我正在使用这种方法，但我返回 0；

```
$facebook->getUser(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:20:37.820

如果您想使用此代码获取 facebook 用户 ID

```
$facebook = new Facebook(array(
   'appId'  => 'your_app_id',
   'secret' => 'your_app_secret',
));     
$user = $facebook->getUser(); 
```

您有条件之前应该完成，第一个条件是您将该代码放在用户通过此代码提供的 fb 登录后重定向的页面中

```
$params = array(
    'display'=>'popup',
    'redirect_uri' => 'http://example.com'
);
$loginUrl = $facebook->getLoginUrl($params); 
```

或者第二个条件是您已经拥有用户“访问令牌”，所以代码将是这样的

```
$facebook = new Facebook(array(
   'appId'  => 'your_app_id',
   'secret' => 'your_app_secret',
));     
$facebook->setAccessToken('user_access_token');
$user = $facebook->getUser(); 
```

如果您不清楚使用 PHP SDK 的 Facebook 登录流程，可以访问此[页面](https://developers.facebook.com/docs/reference/php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:41:37.590

```
$myData=$facebook->api('/me'); 
```

## $myid=myData['id'];

## $myName=myData['name'];

## $myUsername=myData['username'];

```
[id] => your id
[name] => your full name
[first_name] => your firs name
[last_name] => lastname
[link] => profil link
[username] => username
[gender] => your gender (male,female)
[email] => your mail (if have email permission)
[timezone] => 2
[locale] => your locale
[verified] => 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:48:19.570

请遵循本指南：[登录服务器端应用程序](https://developers.facebook.com/docs/howtos/login/server-side-login/)。基本上，您必须生成一个登录 URL，接收 Facebook 生成的代码，并使用此代码请求访问令牌。

# css - 如何在 CSS 中水平对齐拇指指甲图像？

> ID：15261050
> 
> 赞同：1
> 
> 时间：2013-03-07T00:42:12.737
> 
> 标签：css, image, html, alignment, vertical-alignment

我试图在 div 标签内水平对齐一组图像，然后当图像超过 div 标签的长度时显示水平滚动条。我对 CSS 比较陌生，并且已经尝试了我能想到的一切。下面的代码垂直显示我的图像！！！

非常感谢您的帮助。

在正文标签内：

```
<div id="TNBox">
<ul class="imagelist">
    <li>
        <img id="tnimage1" src="images/tn-images/Rio-Street-Art-TN01.jpg">
    </li>
    <li>
        <img id="tnimage2" src="images/tn-images/Rio-Street-Art-TN02.jpg">
    </li>
    <li>
        <img id="tnimage3" src="images/tn-images/Rio-Street-Art-TN03.jpg">
    </li>
    <li>
        <img id="tnimage4" src="images/tn-images/Rio-Street-Art-TN04.jpg">
    </li>
    <li>
        <img id="tnimage5" src="images/tn-images/Rio-Street-Art-TN05.jpg">
    </li>
</ul>
</div>

And the CSS:

#TNBox {
    width: 500px;
    height: 88px;
    border: 1px solid black;
    position: absolute;
    left: 50px;
    top: 320px;
    overflow-x: auto;
    display: inline-block;
    text-decoration: none;
}
.imagelist {
    list-style: none;
    margin: 0px;
    padding: 0px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:21:14.973

```
#TNBox{
    width: 500px;
    height: 88px;
    border: 1px solid black;
    position: absolute;
    left: 50px;
    top: 320px;
    overflow-x: auto;
    display: inline-block;
    text-decoration: none;
    white-space:nowrap;
}
.imagelist{
    list-style: none;
    margin: 0px;
    padding: 0px;
}
.imagelist li{
    display:inline-block;
} 
```

**预览 >>** *[jsfiddle](http://jsfiddle.net/EaffC/2/)（我也设置了图片样式）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T01:32:37.307

链接到小提琴。我还更改了图像 url 以指向存在的东西

[http://jsfiddle.net/GVdMz/2/](http://jsfiddle.net/GVdMz/2/)

这是我添加的内容：

让图像水平显示

```
.imagelist li{
  display: inline;
} 
```

如果图像超出#TNBox 的宽度，这将出现水平滚动

```
#TNBox{
  white-space:nowrap;
} 
```

# python - 用于学习套接字/网络的 Python Twisted 或并发编程

> ID：15261052
> 
> 赞同：0
> 
> 时间：2013-03-07T00:42:27.360
> 
> 标签：python

好吧，这是我寻找帮助/指导的最后努力。我们才刚刚开始在大学学习 Python，我真的很想超越其他人，而且我一直专注于与 Python 建立网络。我看过扭曲的框架，它是巨大的！甚至 krondo.com 网站也是如此。

我已经在 LinuxQuestions 上看到过 Concurrence for python 几次，这似乎更容易（但是看起来 Concurrence 已经停止了？），并且想知道我是否更好地屈膝并真正陷入扭曲或尝试其他东西....不是我害怕努力工作，而是我不想走上一条当我完成后，我发现知道它在现实世界中的用途，或者知道它的路径。

对不起，这不是一个技术问题，但这确实是我知道我可以获得正确指导的唯一地方。如果你认为让我低头学习扭曲的东西值得我花时间，那我就别这么做了。在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:34:04.090

老实说，我会在框架上退后一步，在更基础的层面上使用 Python 标准库。python 文档是关于 Python 的一个非常好的和权威的信息来源。如果您正在研究网络，我建议您查看以下路径：

*   [插座](http://docs.python.org/2.7/library/socket.html)
    *   了解如何使用基本套接字连接、制作客户端和制作服务器。
*   [SSL](http://docs.python.org/2.7/library/ssl.html)
    *   许多 Web 服务使用它为 API 安全地传递数据。可能很难理解，但这是非常有价值的知识。
*   [选择](http://docs.python.org/2.7/library/select.html)
    *   处理连接到服务的多个客户端的一种方法。这进入了并发领域，这是一项相当受追捧的技能。
*   [线程](http://docs.python.org/2.7/library/threading.html)
    *   另一种处理多个连接、网络任务的方法。
*   [协议](http://docs.python.org/2.7/library/internet.html)
    *   现在您已经了解了基本的网络，是时候进入协议了。它们通过网络将特定格式的数据发送到可以处理此类数据的服务器。是的，我建议通过所有不同的协议。
*   [数据解析](http://docs.python.org/2.7/library/netdata.html)
    *   在不同协议通信过程中发送和接收的数据可以采用多种方式进行编码，以便于处理数据。
*   [打包和拆包](http://docs.python.org/2/library/struct.html)
    *   有时网络通信不是以标准格式完成的。如果没有可用的库，这些函数有助于处理二进制协议。
*   [泡菜](http://docs.python.org/2/library/pickle.html)
    *   这是一些高级的东西和 python 特定的。您可以使用它通过网络发送 python 对象。仅出于安全目的，请小心在**受信任的网络上执行此操作。**

考虑到这一点，这些是一般性建议。检查文档，编写一些代码，如果遇到困难，请提出问题。

# javascript - 谷歌如何制作他们的动画模因？

> ID：15261064
> 
> 赞同：1
> 
> 时间：2013-03-07T00:44:09.530
> 
> 标签：javascript, html, css

谷歌以在其主要服务中嵌入许多复活节彩蛋而闻名：

1.  [做一个barell roll](https://www.google.ht/search?hl=en&safe=off&output=search&sclient=psy-ab&q=Do%20the%20barell%20roll&btnK=#hl=en&safe=off&sclient=psy-ab&q=Do%20a%20barrel%20roll&oq=Do%20a%20barrel%20roll&gs_l=serp.3...4111.4111.3.4371.1.1.0.0.0.0.0.0..0.0.les;..0.0...1c.1.5.psy-ab.Ndv7EaZ5KDE&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43287494,d.b2I&fp=548854122be17fbe&biw=1366&bih=667)
2.  [虫族抢](https://www.google.ht/search?hl=en&safe=off&output=search&sclient=psy-ab&q=Do%20the%20barell%20roll&btnK=#hl=en&sugexp=les;&gs_rn=5&gs_ri=psy-ab&tok=wb1OznfBHM677aeGXUKKrA&pq=do%20a%20barrel%20roll&cp=4&gs_id=21&xhr=t&q=zerg%20rush&es_nrs=true&pf=p&safe=off&sclient=psy-ab&oq=Zurg&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43287494,d.b2I&fp=548854122be17fbe&biw=1366&bih=667)
3.  ...

对于动画 Doodle 或 Google play 音乐介绍网站，他们也有同样的东西。

[**直到最近他们发布了Do the Harlem Shake**](https://www.youtube.com/results?search_query=do%20the%20harlem%20shake&oq=do%20t&gs_l=youtube.1.0.35i39j0i3j0j0i3j0l6.1669.2332.0.4098.4.4.0.0.0.0.525.1399.0j1j1j0j1j1.4.0...0.0...1ac.1.lALL8oQ8buQ) one时，我才对它背后的技术感到好奇，我对此印象深刻 ：

所有的 HTML 元素都表现得像普通的 HTML 元素（a:hover、click...），只是它们被扭曲了。

我的猜测是他们使用 HTML5 和 JavaScript，但我想知道，**他们是否有特定的引擎/库/软件**（如[Adob​​e Edge](http://html.adobe.com/edge/animate/)）？

或者更准确地说，它是如何完成的？

# ruby-on-rails - Rails & Ransack - 根据模型中的定义进行排序/搜索

> ID：15261071
> 
> 赞同：6
> 
> 时间：2013-03-07T00:44:49.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, ransack

举例来说，我有一个带有`start_date`and的事件`length`（作为代表天数的整数）。

在模型中，我像您期望的那样简单地`end_date`定义：`start_date + length.days`

```
def end_date
  start_date + length.days
end 
```

在模板中一切正常，我可以`event.end_date`用来显示开始日期以及设置的天数，**但是**，我现在想使用 Ransack 在结束日期之前对事件进行排序。

的排序链接`start_date`如下所示：`<%= sort_link @q, :start_date, "Start" %>`

如果我对 end_date ( `<%= sort_link @q, :end_date, "End" %>`) 尝试相同的操作，不幸的是，它会默默地失败，因为我认为它正在寻找`end_date`表中的列而不是找到它。

我只是愚蠢还是我试图做一些 Ransack 根本不应该做的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T14:13:39.733

只是为了任何想看看我是如何做到的人的利益：

在我定义 end_date 的模型中

```
def end_date
  start_date + length.days
end 
```

然后我为 :end_date 添加了一个 'ranksacker' 方法

```
ransacker :end_date do |r|
   Arel::Nodes::SqlLiteral.new("DATE_ADD(`events`.`start_date`, INTERVAL `events`.`length` DAY)")
end 
```

老实说，我不知道这是否是执行上述子句的最佳/正确方法，但我对 SQL 比对 Ruby/Rails 熟悉得多，所以它对我来说如此开放。

有效的做法是创建一段 SQL，按照与 end_date (start_date + length) 相同的定义对查询进行排序

我现在可以在模板中使用以下代码作为排序链接（它允许 Ransacker 处理 ASC/DESC 而不会干扰 wil_paginate 等）：

`<%= sort_link @q, :end_date, "Event End Date" %>`

当您单击该链接时，您将收到如下查询：

`SELECT DISTINCT events.* FROM events ORDER BY DATE_ADD(events.start_date, INTERVAL events.length DAY) DESC LIMIT 30 OFFSET 0`- 由 Ransacker 在您的表中甚至不存在的列上创建和处理的所有内容！

再次快速免责声明，我已经学习 Rails 和 Ruby 大约 2 周了，来自 PHP 背景，所以我绝不是专家，这可能效率极低，或者可能有更好的“rails 方式” '我根本不知道。

# google-apps-script - 将对象属性存储在二维数组中

> ID：15261074
> 
> 赞同：0
> 
> 时间：2013-03-07T00:45:32.547
> 
> 标签：google-apps-script

我有一个对象数组，我需要将其转换为二维数组，这样我就可以写入谷歌电子表格，其中每个属性都写入一个单元格。我有以下功能：

```
function objectsToArray(objects) {
  var outPutArray = createArray(objects.length, objects[0].length);
  for (var i in objects) {
    for (var j in objects[i]) {
      if (objects.hasOwnProperty(i)) {
        outPutArray[i][j] = objects[i][j];
      }
    }
  }

  return outPutArray;
} 
```

示例对象：

```
object {
  name: John
  phone: 555-5555
  email: john@john.com
} 
```

问题在于，不是将属性值放在数组元素中（outputArray 应该看起来像是`[[John, 555-5555, john@john.com],[..., ..., ...]]`将属性添加到每个数组元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:24:51.657

这是一种方法...

```
function myFunction() {
  var objects = {};
  objects[0] = {"name": "John", "phone": "555-5555", "email": "john@john.com"};
  objects[1] = {"name": "Mary", "phone": "444-4444", "email": "mary@mary.com"};
  var outputArrary = objectsToArray(objects);
  Logger.log(outputArrary);
}

function objectsToArray(objects) {
  var outputArray = [];
  for (var i in objects) 
    outputArray.push([objects[i].name, objects[i].phone, objects[i].email]);
  return outputArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:38:36.177

在你的功能的第一部分，

```
function objectsToArray(objects) {
  var outPutArray = createArray(objects.length, objects[0].length); 
```

看起来你假设`objects`已经是一个二维数组。我将假设这`objects`是一个像这样的一维对象数组。`[{prop:value...},{...},{...}]`.

现在您要做的是从这些数据中生成 2 个数字索引。您需要确保 2D 数组的“第 1 列”是所有对象的相同属性。

所以你的第一个 for 循环应该在属性之上。另外，保留一个索引，这样你就知道你在哪个数字属性上。

```
var j = 0;
for (var prop in objects[0]) { 
```

然后你应该对所有对象进行循环。所以想法是，首先您将选择“名称”，然后遍历所有对象，将“名称”字段添加到每个对象的二维数组中。

```
 for (var i in objects) {
    outPutArray[i][j] = objects[i][prop];
  }
  j++;
} 
```

我认为您看到的主要问题是因为您没有使用数字索引。（`var j in objects[i]`：这定义`j`为属性，例如“名称”，而不是您所期望的数字索引）。

# javascript - 添加/删除 .append

> ID：15261078
> 
> 赞同：0
> 
> 时间：2013-03-07T00:45:50.180
> 
> 标签：javascript, jquery, html, css

我在这里有一个准备、暂停、播放脚本，所以还有一些其他的 widget.binds。在下面的 .PLAY 块中，我通过 widget.getsounds 添加了歌曲标题，因此当他们单击播放时，它们会从附加中出现。当他们单击另一个时，如何删除附加？

或者更简单地说，我如何删除 .appends 无论是否用于此特定目的？

```
widget.bind(SC.Widget.Events.PLAY, function () {
    $("#{STORIES.story_id}6 :image")
        .removeClass('buy')
        .removeClass('buyyy')
        .addClass('buyy');
    widget.getSounds(function (sound) {
        var a = sound.length;

        for (var i = 0; i < a; i++) {
            $('#trackinfo').append($('<span>', {
                text: sound[i].title
            }));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:52:54.397

使用 :last-child 选择器查找最后添加的内容，然后将其删除：

```
$('#trackinfo:last-child').remove(); 
```

# sql - 多个连接表上的聚合函数

> ID：15261087
> 
> 赞同：2
> 
> 时间：2013-03-07T00:46:43.713
> 
> 标签：sql, postgresql, left-join, aggregate-functions, cross-join

我有三张桌子：

```
CREATE TABLE foo (
    id bigint PRIMARY KEY,
    name text NOT NULL
);

CREATE TABLE foo_bar (
    id bigint PRIMARY KEY,
    foo_id bigint NOT NULL
);

CREATE TABLE tag (
    name text NOT NULL,
    target_id bigint NOT NULL,
    PRIMARY KEY (name, target_id)
); 
```

我正在尝试创建一个视图，以便获取 table 的所有字段、 where`foo`中的项目数以及`foo_bar`where`foo.id = foo_bar.foo_id`中所有标签的文本数组`foo.id = tag.target_id`。如果我们有：

```
INSERT INTO foo VALUES (1, 'one');
INSERT INTO foo VALUES (2, 'two');
INSERT INTO foo_bar VALUES (1, 1);
INSERT INTO foo_bar VALUES (2, 1);
INSERT INTO foo_bar VALUES (3, 2);
INSERT INTO foo_bar VALUES (4, 1);
INSERT INTO foo_bar VALUES (5, 2);
INSERT INTO tag VALUES ('a', 1);
INSERT INTO tag VALUES ('b', 1);
INSERT INTO tag VALUES ('c', 2); 
```

结果应返回：

```
foo.id    | foo.name     | count       | array_agg
--------------------------------------------------
1         | one          | 3           | {a, b}
2         | two          | 2           | {c} 
```

这是我到目前为止所拥有的：

```
SELECT DISTINCT f.id, f.name, COUNT(b.id), array_agg(t.name)
FROM foo AS f, foo_bar AS b, tag AS t
WHERE f.id = t.target_id AND f.id = b.foo_id
GROUP BY f.id, b.id; 
```

这些是我得到的结果（注意`count`不正确）：

```
foo.id    | foo.name     | count       | array_agg
--------------------------------------------------
1         | one          | 2           | {a, b}
2         | two          | 1           | {c} 
```

始终是标签的`count`计数，而不是不同`foo_bar`值的计数。我已经尝试重新排序/修改返回不同结果但不是我正在寻找的结果的`GROUP BY`和子句。`SELECT`我认为我在使用该`array_agg()`功能时遇到了问题，但我不确定是否是这种情况或如何解决它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T01:19:05.840

```
SELECT f.id, f.name, b.fb_ct, t.tag_names
FROM   foo f
LEFT JOIN  (
    SELECT foo_id AS id, count(*) AS fb_ct
    FROM   foo_bar
    GROUP  BY 1
    ) b USING (id)
LEFT JOIN  (
    SELECT target_id AS id, array_agg(name) AS tag_names
    FROM   tag
    GROUP  BY 1
    ) t USING (id)
ORDER  BY f.id; 
```

产生所需的结果。

*   `JOIN`用显式语法重写。使其更易于阅读和理解（和调试）。

*   通过加入多个`1:n`相关表，行将相互相乘，产生[笛卡尔积](https://en.wikipedia.org/wiki/Cartesian_product)——这是非常昂贵的废话。这是一个无意`CROSS JOIN`的代理。有关的：

    *   [两个 SQL LEFT JOINS 产生不正确的结果](https://stackoverflow.com/questions/12464037/two-sql-left-joins-produce-incorrect-result/12464135#12464135)
*   为避免这种情况，在聚合 ( ) 之前最多将*一个* `n`-table加入 -table 。您可以聚合两次，但在将-table加入-table*之前*单独聚合它们会更干净、更快捷。`1``GROUP BY``n`*`1`*

**   与您的原始版本（带有隐式`INNER JOIN`）相反。我**`LEFT JOIN`**用来避免丢失在or`foo`中没有匹配行的行。`foo_bar``tag`

    *   一旦`CROSS JOIN`从查询中删除了意外，就不需要再添加`DISTINCT`了——假设它`foo.id`是唯一的。*

# android - 具有两列和自动调整大小的图像的 Gridview

> ID：15261088
> 
> 赞同：182
> 
> 时间：2013-03-07T00:47:03.427
> 
> 标签：android, android-layout, android-gridview

我正在尝试用两列制作一个网格视图。我的意思是每行并排两张照片，就像这张图片一样。

![在此处输入图像描述](../Images/4a5a9042d8483977b312ec406206d074.png)

但是我的图片之间有空格，因为它的大小不一样。这就是我得到的。

![在此处输入图像描述](../Images/ceb8713b010095bd8e66417fe0edbd62.png)

如您所见，第一张图片隐藏了显示联系人姓名和电话号码的图例。并且其他图片没有正确拉伸。

这是我的**GridView** xml 文件。如您所见，`columnWidth`设置为**200dp**。**我希望它是自动**的，所以图片会根据每个屏幕尺寸自动调整大小。

```
<?xml version="1.0" encoding="utf-8"?>
<GridView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridViewContacts"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:numColumns="2"
    android:columnWidth="200dp"
    android:stretchMode="columnWidth"    
    android:gravity="center" /> 
```

这是项目 xml 文件，它代表每个项目本身。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageViewContactIcon"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="fitXY" />

    <LinearLayout
        android:id="@+id/linearlayoutContactName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:background="#99000000"
        android:layout_alignBottom="@+id/imageViewContactIcon">

        <TextView
            android:id="@+id/textViewContactName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#FFFFFF"
            android:textStyle="bold"
            android:textSize="15sp"
            android:text="Lorem Ipsum" />       

        <TextView
            android:id="@+id/textViewContactNumber"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#FFFFFF"
            android:layout_marginLeft="5dp"
            android:focusable="true"
            android:ellipsize="marquee"
            android:marqueeRepeatLimit="marquee_forever"
            android:textSize="10sp"
            android:text="123456789" />

    </LinearLayout>

</RelativeLayout> 
```

**所以我想要的是每行显示两个图像，并且无论屏幕大小如何，图像都会自动调整大小。我在布局上做错了什么？**

谢谢。

* * *

## 回答 #1

> 赞同：403
> 
> 时间：2013-03-07T05:49:39.957

这是一个相对简单的方法来做到这一点。将 GridView 放入布局中，设置拉伸模式以拉伸列宽，将间距设置为 0（或任何您想要的），并将列数设置为 2：

**资源/布局/main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <GridView
        android:id="@+id/gridview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:verticalSpacing="0dp"
        android:horizontalSpacing="0dp"
        android:stretchMode="columnWidth"
        android:numColumns="2"/>

</FrameLayout> 
```

制作一个`ImageView`保持其纵横比的自定义：

**src/com/example/graphicstest/SquareImageView.java**

```
public class SquareImageView extends ImageView {
    public SquareImageView(Context context) {
        super(context);
    }

    public SquareImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SquareImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        setMeasuredDimension(getMeasuredWidth(), getMeasuredWidth()); //Snap to width
    }
} 
```

使用此 SquareImageView 为网格项制作布局并将 scaleType 设置为 centerCrop：

**资源/布局/grid_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent"
             android:layout_height="match_parent">

    <com.example.graphicstest.SquareImageView
        android:id="@+id/picture"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="centerCrop"/>

    <TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="15dp"
        android:paddingBottom="15dp"
        android:layout_gravity="bottom"
        android:textColor="@android:color/white"
        android:background="#55000000"/>

</FrameLayout> 
```

现在为您制作某种适配器`GridView`：

**src/com/example/graphicstest/MyAdapter.java**

```
private final class MyAdapter extends BaseAdapter {
    private final List<Item> mItems = new ArrayList<Item>();
    private final LayoutInflater mInflater;

    public MyAdapter(Context context) {
        mInflater = LayoutInflater.from(context);

        mItems.add(new Item("Red",       R.drawable.red));
        mItems.add(new Item("Magenta",   R.drawable.magenta));
        mItems.add(new Item("Dark Gray", R.drawable.dark_gray));
        mItems.add(new Item("Gray",      R.drawable.gray));
        mItems.add(new Item("Green",     R.drawable.green));
        mItems.add(new Item("Cyan",      R.drawable.cyan));
    }

    @Override
    public int getCount() {
        return mItems.size();
    }

    @Override
    public Item getItem(int i) {
        return mItems.get(i);
    }

    @Override
    public long getItemId(int i) {
        return mItems.get(i).drawableId;
    }

    @Override
    public View getView(int i, View view, ViewGroup viewGroup) {
        View v = view;
        ImageView picture;
        TextView name;

        if (v == null) {
            v = mInflater.inflate(R.layout.grid_item, viewGroup, false);
            v.setTag(R.id.picture, v.findViewById(R.id.picture));
            v.setTag(R.id.text, v.findViewById(R.id.text));
        }

        picture = (ImageView) v.getTag(R.id.picture);
        name = (TextView) v.getTag(R.id.text);

        Item item = getItem(i);

        picture.setImageResource(item.drawableId);
        name.setText(item.name);

        return v;
    }

    private static class Item {
        public final String name;
        public final int drawableId;

        Item(String name, int drawableId) {
            this.name = name;
            this.drawableId = drawableId;
        }
    }
} 
```

将该适配器设置为您的`GridView`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    GridView gridView = (GridView)findViewById(R.id.gridview);
    gridView.setAdapter(new MyAdapter(this));
} 
```

并享受结果：

![示例网格视图](../Images/3b049dcec964117a80e0731e0cf55085.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-19T08:49:52.033

现在，遇到此问题的新用户可以使用另一种具有现代内置内容（例如**PercentRelativeLayout ）的简单方法。**感谢 android 团队发布这个项目。

```
<android.support.percent.PercentRelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:clickable="true"
app:layout_widthPercent="50%">

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/picture"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="centerCrop" />

    <TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:background="#55000000"
        android:paddingBottom="15dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="15dp"
        android:textColor="@android:color/white" />

</FrameLayout> 
```

为了获得更好的性能，您可以使用一些像 picasso 图像加载器这样的东西，它可以帮助您填充每个图像父级的整个宽度。例如在你的适配器中你应该使用这个：

```
int width= context.getResources().getDisplayMetrics().widthPixels;
    com.squareup.picasso.Picasso
            .with(context)
            .load("some url")
            .centerCrop().resize(width/2,width/2)
            .error(R.drawable.placeholder)
            .placeholder(R.drawable.placeholder)
            .into(item.drawableId); 
```

现在你不再需要 CustomImageView 类了。

**PS**我建议使用 ImageView 代替类 Item 中的 Type Int。

希望这有帮助..

# google-apps-script - 谷歌表单电子邮件确认脚本抛出未定义的错误

> ID：15261098
> 
> 赞同：0
> 
> 时间：2013-03-07T00:48:03.633
> 
> 标签：google-apps-script

我有一个谷歌表格，用户可以输入他们注册的运动项目。他们输入他们的电子邮件、地址、姓名等。然后，我在电子表格中为**Total**添加了一列，这是一个**数组**公式，根据他们的答案计算他们欠的总额。用户提交时带有表单的电子表格效果很好。

但是在脚本管理器中，我有一个在 onFormSubmit 上触发的函数（见下文）。当用户填写并提交表单时，会发送“确认”电子邮件，并且所有字段都应为它们应该是的，除了 Total 出现**未定义**- 这是 arrayformula 列。为什么？我们不能发送这些字段吗？我真的需要电子邮件告诉用户他们欠了多少钱。 **如何引用用户刚刚提交的行的 Total 列？**

```
function onFormSubmit(e) {
 var timestamp = e.values[0];
  var toAddress = e.values[1];
  var LastName = e.values[2];
  var Street = e.values[3];
  var City = e.values[4];
  var Zip = e.values[5];
  var Phone = e.values[6];
  var Student1 = e.values[7];
  var GradeS1 = e.values[8];
  var BdayS1 = e.values[9];
  var GenderS1 = e.values[10];
  var SportS1 = e.values[11];
  var Student2 = e.values[12];
  var GradeS2 = e.values[13];
  var BdayS2 = e.values[14];
  var GenderS2 = e.values[15];
  var SportS2 = e.values[16];
  var Student3 = e.values[17];
  var GradeS3 = e.values[18];
  var BdayS3 = e.values[19];
  var GenderS3 = e.values[20];
  var SportS3 = e.values[21];
  var Student4 = e.values[22];
  var GradeS4 = e.values[23];
  var BdayS4 = e.values[24];
  var GenderS4 = e.values[25];
  var SportS4 = e.values[26]; 
  var Total = e.values[30];

  var subject = "Registration"; 

  var htmlBody = "The Registration details you entered were as follows:" +
      "<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;Date/Time Submitted:  &nbsp;" + timestamp +
      "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Family:  &nbsp;" + LastName +
      "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Address:  &nbsp;" + Street + ", &nbsp;" + City + ", &nbsp;" + Zip + 
      "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Phone:  &nbsp;" + Phone +
      "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Student 1:  &nbsp;" + Student1 + ", &nbsp;" + GradeS1 + ", &nbsp;" + BdayS1 + ", &nbsp;" + GenderS1 + ", &nbsp;" + SportS1 +
      "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Student 2:  &nbsp;" + Student2 + ", &nbsp;" + GradeS2 + ", &nbsp;" + BdayS2 + ", &nbsp;" + GenderS2 + ", &nbsp;" + SportS2 +
      "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Student 3:  &nbsp;" + Student3 + ", &nbsp;" + GradeS3 + ", &nbsp;" + BdayS3 + ", &nbsp;" + GenderS3 + ", &nbsp;" + SportS3 +
      "<br/>&nbsp;&nbsp;&nbsp;&nbsp;Student 4:  &nbsp;" + Student4 + ", &nbsp;" + GradeS4 + ", &nbsp;" + BdayS4 + ", &nbsp;" + GenderS4 + ", &nbsp;" + SportS4 +
      "<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;TOTAL DUE:  &nbsp;<b>$" + Total + 
        "</b><br/><br/>Please send your payment, <b>checks payable to Our Company </B> , to:  &nbsp;<font color=\"red\"><b>Person Name</font></b>" +
      "<br/><br/>Your registration will not be activated until payment is received.  Thank you so much!" +
      "<br/><br/>From Our Company";

  var optAdvancedArgs = {name: "Our Company", htmlBody: htmlBody};

  MailApp.sendEmail(toAddress, subject, "Message Body", optAdvancedArgs);

} 
```

谢谢，如果你能帮忙，请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:06:11.700

你能发布你的数组代码吗？我猜这个数组的长度可能小于 30(29)。那个或数组以某种方式没有正确插入数据。我也喜欢在声明一个值时抛出一个 .toString() ；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:21:48.170

正如您在问题中提到的那样，TOTAL 变量没有在表单中定义，而是在电子表格中定义......所以它不对应于任何`e.parameter`链接到/随表单一起出现的变量是正常的。（e.values[x] 被引用到表单问题索引，而不是电子表格列，即使在实践中这些是相同的参考号）

您应该尝试将这个值放在它所在的位置，即在电子表格中！

由于我不知道您的电子表格布局，我无法告诉您它在哪里，但您应该可以轻松完成。

另一个可能的选择是通过在脚本级别执行与电子表格单元格中相同的操作来处理脚本本身中的数据......如果它只是添加变量值，那么实现起来应该不会太难。

# python - GAE：等待最终一致性需要多长时间？

> ID：15261099
> 
> 赞同：3
> 
> 时间：2013-03-07T00:48:04.890
> 
> 标签：python, google-app-engine, google-cloud-datastore, eventual-consistency

我有一个应用程序，我在其中创建大量实体。我不想将它们放在同一个实体组中，因为我可能会在短时间内创建很多它们——比如 24 小时内创建 100 万个。

在某些时候，我想通过这样的查询来获取所有这些实体：

```
Foo.all() 
```

在创建最后一个 Foo 实体后，我需要等待多长时间才能很有可能使用此查询获取所有 Foo 实体？

编辑：

从这个[问题](https://stackoverflow.com/questions/15460926/google-app-engine-ndb-put-and-then-query-there-is-always-one-less-item)来看，我似乎**无法**立即获得所有实体。很高兴知道我应该等多久。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:56:06.807

除了整个事情非常昂贵之外，您将能够立即获得所有实体。

请注意，遍历数百万个实体将需要使用 Tasks，如果这还不够，因为它们的最后期限为 10 分钟，您应该考虑使用[Backends](https://developers.google.com/appengine/docs/python/backends/)。

# r - 提取回归系数并将它们用于 R 中的另一个数据集

> ID：15261101
> 
> 赞同：1
> 
> 时间：2013-03-07T00:48:21.707
> 
> 标签：r, regression

假设我拟合了一个使用 x1,x2,..xn 预测 y 的标准线性模型，该模型具有很多二向交互作用，也可能是三向交互作用。然后我有一个单独的数据集，它有 x1,x2,...xn，并且想要创建 f(y)。是否有一种直接且简单的方法可以做到不涉及在 R 中手动定义每个交互？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:52:42.313

mnel 是正确的。

* * *

```
dat<-data.frame(matrix(rnorm(30), 10, 3))

names(dat)<-c("y", "x1", "x2")

ans<-lm(y~x1*x2,dat)

summary(ans) # note three parameters + one intercept

predict(ans, newdata=list(x1=0,x2=0))  #only need x1 and x2 for newdata, not interaction 
```

* * *

Newdata 可以包含任意数量的条目。给定先前拟合模型的所有参数，包括交互作用，结果将是新数据的预期结果。

# javascript - 一堆 Div 的 JavaScript 爆炸物理

> ID：15261103
> 
> 赞同：1
> 
> 时间：2013-03-07T00:48:27.670
> 
> 标签：javascript

我不知道我应该如何进行。

**我有一堆 div 相对于 document.body 绝对定位的**情况。**我知道每个 div 的大小和位置。我也有爆炸原点的位置。**

 ****我想做的目标** 是在爆炸原点模拟爆炸，让所有的 div 飞离爆炸但最终停下来。即模拟爆炸。

他们是那里的任何物理公式专家，可以告诉我我需要使用哪些公式吗？我的猜测类似于给爆炸点某种质量并使用它来计算 div 的速度。

我想把这件事做好，所以我对任何会产生不太现实效果的捷径公式并不感兴趣。

如果有任何高效、轻量级的 JavaScript 物理库可以让这项任务变得更容易，那就太好了。虽然不想要任何基于 jQuery 的东西，因为我需要尽可能地保持轻量级。并且没有库具有完整的代码库来处理 canvas 元素，因为这只会添加大量不需要的代码。

提前感谢，阿里。

**背景故事，与上述问题无关，请随意忽略** 我实现此功能的原因，因为我认为这对于一些史诗般的页面过渡效果会很好。所以我想通过爆炸所有主要的可见 div 来进行过渡。

到目前为止，我已经实现了一些代码，用一堆准备爆炸的小 div 替换视口中的大 div。

到目前为止，这是我的实现。您将看到对非 JavaScript 原生函数的引用，这是因为我使用的是 Closure 库，所以要显示所有内容就太过分了。

```
/**
 * @constructor
  */
 pwd.fx.Explode = function (div) {
     this.element_ = div;
 }

 /**
  * @public
  */
 pwd.fx.Explode.prototype.play = function () {
     this.viewportOffset = goog.style.getViewportPageOffset(document);
     this.size = goog.style.getBounds(this.element_);
     this.position = goog.style.getClientPosition(this.element_);
     this.backgroundColour = goog.style.getBackgroundColor(this.element_);

     // Set the explosion centre
     // relative to the viewport
     this.explosionEpicentre = new goog.math.Coordinate(
         this.position.x + Math.floor(this.size.width / 2),
         this.position.y + Math.floor(this.size.height / 2)
     );

     this.seperate();
 }

 /**
  * @private
  * Seperates the current div into loads of little divs
  */
 pwd.fx.Explode.prototype.seperate = function () {
     var idealSize = new goog.math.Size(35, 35);
     var widths = pwd.math.algorithms.getExactFit(idealSize.width, this.size.width);
     var heights = pwd.math.algorithms.getExactFit(idealSize.height, this.size.height);

     // Remove the node as it will be replaced by blocks
     goog.dom.removeNode(this.element_);

     var cumulativeHeight = 0;
     for (var i = 0; i < heights.length; i++) {
         var cumulativeWidth = 0;
         for (var j = 0; j < widths.length; j++) {
             var blockSize = new goog.math.Size(widths[j], heights[i]);
             var blockRelativePosition = new goog.math.Coordinate(cumulativeWidth, cumulativeHeight);
             cumulativeWidth += widths[j];
             var blockPosition = new goog.math.Coordinate.sum(this.position, blockRelativePosition);
             // Add the block
             this.addBlock(blockSize, blockPosition, this.backgroundColour);
         }
         cumulativeHeight += heights[i];
     }
 }

 /**
  * Add a block
  * All positions are relative to the viewport
  * @private
  */
 pwd.fx.Explode.prototype.addBlock = function (blockSize, blockPosition, backgroundColour) {
     var block = document.createElement("div");

     // Height and width
     block.style.width = blockSize.width + "px";
     block.style.height = blockSize.height + "px";

     // Positioning
     block.style.position = "absolute";
     block.style.left = this.viewportOffset.x + blockPosition.x + "px";
     block.style.top = this.viewportOffset.y + blockPosition.y + "px";

     // Styling
     block.style.backgroundColor = backgroundColour;

     // Add to document relative to viewport
     document.body.appendChild(block);

     // Explode block
     // TODO...?
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:32:10.220

你最好的选择是在物理论坛上提问。您只需要了解牛顿力学的基础知识。给你的物体一个质量。计算在任何一个时间点作用在每个人身上的净力。（爆炸和重力）。给定该力，您可以计算任何一个时间点的加速度。给定加速度，如果随着时间 t 保持不变，它会改变速度 v。如果你让它们静止，它会变得有点复杂，这会带来弹跳和摩擦。弹跳非常简单——如果速度为 v，弹跳系数为 a，那么在弹跳时，速度变为 -va。为了计算摩擦力，它与将物体推在一起的力成正比。摩擦力 = 这对表面的摩擦系数 x 将它们推在一起的力。（不管你信不信，这与它们的表面积无关——好吧，在大多数情况下。）要在 2D 中进行这些计算，你将把你的力、加速度、速度等分成两个分量，x 和 y。如果您知道绕直角三角形的方式，这很容易。（正弦，余弦，谭，毕达哥拉斯）。最后，如果您希望您的 div 相互碰撞，您需要了解动量守恒和可能的能量守恒，我不记得所有这些是如何工作的。

我想你不希望你的 div 旋转。角速度和动量以及所有比较复杂的东西。**

# css - 使用 CSS onfocus 选择器使字体粗细正常（没有任何格式）

> ID：15261107
> 
> 赞同：-2
> 
> 时间：2013-03-07T00:48:38.570
> 
> 标签：css

我有一个具有以下属性的输入变量文本：

```
<input type="text" style="font-style: italic; color:#808080; font-size: 16px; width: 510px;" id="categ" value="default" name="categ" onfocus="this.value = ''; this.style.color='black'; this.font_weight='normal'"> 
```

我想清除格式化样式onfocus。它会清除颜色和文本，但不会清除斜体字重。我也试过 font-weight 和 font.weight

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:53:51.580

你想要[`font-weight`](http://www.w3schools.com/jsref/prop_style_fontweight.asp)：

```
this.style.fontWeight="normal" 
```

更好的方法是使用 css：

```
#categ:focus{
    font-weight: normal;
    color:black;
}
#categ{
   font-style: italic; 
   color:#808080; 
   font-size: 16px; 
   width: 510px
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:50:03.753

如果记忆没有让我失望..

```
this.style.fontWeight='normal' 
```

然而，正如 bažmegakapa 在他的评论中所说的那样——这真的是很糟糕的做法。您应该为 onfocus 事件创建一个侦听器 - 例如在 jquery 中您可以使用该`.focus()`方法 - 并具有一个回调函数来更新元素的 css。

纯css会更好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:58:30.883

```
this.style.fontWeight='normal' 
```

更新

```
this.style.fontStyle='normal' 
```

预览 >> [jsfiddle](http://jsfiddle.net/d2h86/) 更新 >> [jsfiddle](http://jsfiddle.net/d2h86/4/)

# php - 从二维数组 php 中回显一个元素

> ID：15261111
> 
> 赞同：3
> 
> 时间：2013-03-07T00:49:03.660
> 
> 标签：php, arrays, multidimensional-array, echo

我正在尝试从存储在父数组单元格中的数组中回显单个元素。为了便于阅读，我们称父数组为$parent，子数组为$child。我想从 $child 中回显第二个元素。当我使用代码时：

```
echo "$parent[0][1]"; 
```

我得到数组到字符串的转换错误，后跟文本“[1]”。据我了解，“$parent[0]”应该被解释为 $child，这样下面的 [1] 就会从 $child 请求第二个元素。显然，这并没有发生，唯一被读取的部分是 $parent[0] ，然后因为该元素是一个数组而被退回。

此外，我的 $parent 数组由一个从表中提取数据的循环函数填充，因此将其元素保留为数字形式更简单。具体来说，$parent 的每个元素都包含一轮高尔夫的 id# 和日期，从一个满是高尔夫轮次的表格中检索。我的函数使用 mysql_query 拉取它们，然后在我的 $parent 数组中存储时循环 mysql_get_row。

我意识到这里有很多不必要的信息，但我希望它有助于避免在我的具体情况下不可行的解决方案。我的基本问题是，如何从嵌套在另一个数组中的数组中回显一个元素。

提前致谢。

*回答后编辑*

以下答案完美无缺，但我也发现了一个肮脏的解决方法。将 $child 数组分配给一个占位符，然后从占位符打印是可行的，但它需要更多的代码行并且看起来并不漂亮。

例如。

```
$holdArray = $parent[0];
echo "$holdArray[1]"; 
```

再次感谢您的快速和有用的回复。SE社区一如既往地通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:54:38.753

尝试

```
echo "{$parent[0][1]}"; 
```

演示：[http ://codepad.org/bAfbg1Fh](http://codepad.org/bAfbg1Fh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:57:10.903

`echo "{$parent[0][1]}";`或`echo $parent[0][1];`应该工作

或者，如果您的数组是关联尝试：`echo "{$parent['foo']['bar']}";`或者`echo $parent['foo']['bar'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T05:05:11.383

如果您的数组包含许多子数组并且您想要显示每个子数组，这是另一种解决方案。

```
foreach($parent as $child){
   echo $child[1];
   echo "<br>";
} 
```

如果您的数组仅包含单个子数组，您可以这样做：

```
$array = array(array(1,'edwards',"somesong.mp3"));
list($child) = $array;
echo $child[0]; // this will print 1 
```

或者

```
echo $parent[0][1]; 
```

# matlab - 在 MATLAB 中根据信号数据确定频率

> ID：15261122
> 
> 赞同：15
> 
> 时间：2013-03-07T00:50:05.123
> 
> 标签：matlab, signal-processing, frequency, noise

我有来自传感器的数据，我需要找到它的频率。看起来`fft()`似乎是要走的路，但 MATLAB 文档只显示了如何获取频率图，我不知道从那里做什么。

这是我的数据的样子：

![在此处输入图像描述](../Images/bf92f92633990ddea3ef47b4723cc9d4.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T02:12:20.133

一种方法确实是使用 fft。由于 fft 为您提供了信号的频率表示，因此您想要寻找最大值，并且由于 fft 是一个复杂的信号，您需要首先获取绝对值。该指数将对应于具有最大能量的归一化频率。最后，如果您的信号有偏移，就像您展示的那样，您希望在获取 fft 之前消除该偏移，这样您就不会在代表 DC 分量的原点处获得最大值。

我在一行中描述的所有内容都是：

```
[maxValue,indexMax] = max(abs(fft(signal-mean(signal)))); 
```

其中 indexMax 是可以找到最大 fft 值的索引。

注意：要从 indexMax 到实际感兴趣的频率，您需要知道 fft 的长度 L（与信号的长度相同）和采样频率 Fs。那么信号频率将是：

```
frequency = indexMax * Fs / L; 
```

或者，根据您拥有的信号，更快且工作得相当好，采用信号的自相关：

```
autocorrelation = xcorr(signal); 
```

并找到出现在自相关中心点之后的第一个最大值。（自相关将以其最大值在中间对称。）通过找到该最大值，您可以找到移位信号看起来或多或少与自身相似的第一个位置。即你找到你的信号的周期。由于偏移其周期倍数的信号总是看起来像它自己，因此您需要确保找到的最大值确实对应于信号的周期，而不是其倍数之一。

由于信号中的噪声，绝对最大值很可能出现在周期的倍数处，而不是周期本身。因此，要考虑该噪声，您将获取自相关的绝对最大值（自相关（长度（自相关）/2+1），然后找到自相关大于第一个最大值的 95% 的位置信号后半部分的时间。95%、99% 或其他数字将取决于有多少噪声会破坏您的信号。

更新：我意识到我假设您所说的信号的“频率”是指具有最多能量的音高或基本谐波或频率，但是您想查看它。如果频率是指信号的频率表示，那么对于第一个近似值，您只想绘制 FFT 的绝对值以了解能量的位置：

```
plot(abs(fft)); 
```

如果您想了解为什么存在绝对值，或者由于不表示 fft 的相位而丢失了哪些相关信息，您可能需要阅读有关 DFT 变换的更多信息，以准确了解您得到的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T04:40:05.013

我认为应该是

```
 (indexMax-1) * Fs / L 
```

abs(fft(x)) 的第一个元素是直流 (DC)，或偏置，或信号的平均值，或 X0。我们从第二个元素 (X1) 开始计数。如果我错了，请告诉我。谢谢。 [![在此处输入图像描述](../Images/f697bc8427594687374f6ff1b4fdb580.png)](https://i.stack.imgur.com/8xblD.png)

```
clear all
clc
close all
Fs = 1;
T = 11 % Note this T is deliberately chosen , so that we have about 1.7 cycle of cosine singal
t = 0:Fs:T; % T seconds
L = length(t); % L is the length of sample sequence
bias = 4
signal = sin(t) + bias;

[maxValue,indexMax] = max(abs(fft(signal-mean(signal))));

frequency_method1 = (indexMax-1) * Fs / (L-1);
frequency_method2 = (indexMax-1) * Fs / L;

number_of_cycles_method1 = frequency_method1*T

number_of_cycles_method2 = frequency_method2*T

subplot(2,1,1)
plot(t,signal,'-or') ; grid on;
legend('about 1.7 cycles of cosine signal')
subplot(2,1,2)
plot(abs(fft(signal-mean(signal))),'-xb'); grid on
legend('abs of fft')

number_of_cycles_method1 =

     2

number_of_cycles_method2 =

    1.8333 
```

# xml - 使用 XML Schema 保证未知深度的子元素

> ID：15261123
> 
> 赞同：1
> 
> 时间：2013-03-07T00:50:12.610
> 
> 标签：xml, xsd

我有一个 XML 模式，我知道一个元素必须有一个特定的子元素，但我不知道该子元素将存在的深度。以以下示例 XML 为例：

```
<node id="top">
   <node id="inner">
     <event/>
   </node>
</node>

<node id="top">
   <event/>
</node> 
```

我唯一的要求是`<event>`元素必须是元素的后代`<node id="top">`，但我不知道它会在什么深度出现。换句话说，`<node id="inner">`在顶部`<node id="top">`和一个元素之间可以有任意数量的`<event>`元素。在上面的示例中，这些中的每一个在架构中都是有效的。我尝试的解决方案是：

```
<xs:element name="node">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="node" minOccurs="0">
                <xs:complexType>
                     <xs:sequence>
                        <xs:element name="event"/>
                     </xs:sequence>
                   <xs:attribute name="id" fixed="inner"/>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
      </xs:complexType>
      <xs:attribute name="id" fixed="top"/>
</xs:element> 
```

但是，正如预期的那样，这并没有考虑到`<node>`元素之后可能出现的许多元素“深度” `<node id="top">`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:27:18.560

这是[回答](https://stackoverflow.com/questions/148988/recursion-in-xsd-schemas)！试试下面的东西

```
<?xml version="1.0"?> 
<xs:schema targetNamespace="http://test"
  elementFormDefault="qualified" attributeFormDefault="unqualified"
  xmlns:test="http://test"
  xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="nodes">   
      <xs:complexType> 
           <xs:sequence minOccurs="0" maxOccurs="unbounded">
                   <xs:element name="node"  type="test:nodeType" minOccurs="0" maxOccurs="unbounded"/>
</xs:sequence>
 </xs:complexType> 
  </xs:element>

<xs:complexType name="nodeType">  
                <xs:sequence minOccurs="0" maxOccurs="unbounded">
                           <xs:element name="event" minOccurs="0"/>
                           <xs:element name="node" type="test:nodeType" minOccurs="0">

</xs:schema> 
```

# ios - 在 iTunes Connect 中编辑详细信息

> ID：15261124
> 
> 赞同：3
> 
> 时间：2013-03-07T00:50:22.293
> 
> 标签：ios, app-store-connect

嗨 Therem 只是一个简单的问题。是否可以更改有关当前位于 iTunes 连接中但没有上传二进制文件的应用程序的详细信息。

例如，我想开始开发和测试inApp Purchases，但该应用程序还没有完成屏幕截图和图标等的阶段......所以如果我创建应用程序ID等并将其添加到带有黑色图像的iTunes商店对于屏幕截图，我可以稍后在批准之前更改吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:54:12.267

是的你可以。大多数元数据也可以在 AppStore 批准之外进行更改。

未经批准可编辑的有：

*   描述
*   （此版本的新功能）
*   支持网址
*   营销网址
*   隐私政策网址

批准前可编辑的有：

*   上述所有的
*   截图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-06T11:09:23.203

对于未来的访问者：您将在此处找到 Apple 当前关于“锁定”和“解锁”iTunes Connect 应用程序属性的文档：

[https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Appendices/Properties.html](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Appendices/Properties.html)

# jsf - 如何在另一个 Java Web 项目中导入一个 Java Web 项目？

> ID：15261125
> 
> 赞同：1
> 
> 时间：2013-03-07T00:50:24.207
> 
> 标签：jsf, jakarta-ee, maven, web, module

我想创建一个“模块”网络项目，它将用于许多其他网络项目，因为它的基本代码在所有项目之间共享，以及模块中的一些独立功能。

让我们将它们命名为`Module`项目和`Consumer`项目。我正在将 JSF 2 与 CDI/EJB`@Named('managedBean')`和 Maven 一起使用，但项目除外，该`Module`项目没有使用 EJB，因为它不是必需的（它仅包含 ManagedBeans 和 HTML 视图）。

我想要做的就是简单地将每个`Module`作为 Maven 依赖项导入`Consumer`并让它们一起工作。在一个完美的世界中，`Module`应该不仅包含 ManagedBeans 和 POJO，还包含 JSF (HTML) 文件，并且两个项目应该共享同一个会话，就好像它是一个一样。主要目的是通过维护和更新由其他 Web 项目简单导入的集中式代码库来促进维护；它应该共享相同的会话，因为它`Module`包含登录功能。

我已经尝试通过生成一个 build 来做到这一点，`mvn install`这`Module`是`jar`我对项目的依赖，但是在部署;时`Consumer`，我的 ManagedBeans 或 html 视图都没有被识别。我的 Web 服务器显示两个 Web 项目在部署时都已初始化（视图已初始化），但我只能访问页面和 bean。`Module``Consumer``Consumer``Consumer`

在ing the时构建和安装`Module`as`war`将不起作用，因为它显然只需要s。`mvn package``Consumer``jar`

如何在另一个 Java Web 项目中导入一个 Java Web 项目并让它们一起工作？

# mongodb - $exists 的 mongodb 索引

> ID：15261134
> 
> 赞同：2
> 
> 时间：2013-03-07T00:51:34.620
> 
> 标签：mongodb

给定形状如下的文件：

```
 { "some-blob-id": {
   { "error": "Some Error Message",
      "data": BinaryData(0, all-that-glop),
      "timestamp" : "time-for-completion-or-error"
   },
   ...
 } 
```

以及查询`$exists`some-blob-id.data 的愿望，合适的索引规范是什么？我不希望它在该二进制文件上建立索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:57:38.607

当您设置数据时，我会将另一个字段设置为 1（这很容易回填）。然后在这个新字段上添加一个稀疏索引。这可能是最优化的方法。

# c++ - 如何比较两个或多个相同大小的图像文件？

> ID：15261143
> 
> 赞同：-2
> 
> 时间：2013-03-07T00:52:34.563
> 
> 标签：c++, image, comparison

基本上我想编写一个程序来比较两个大小完全相同的不同图像文件，并且可以判断它们是否完全相同（视觉上）。例子：

```
 if( img1.jpg == img2.jpg)
                {
                       x = 1;
                }

                if( x == 1)
                {
                       do stuff;
                }

                else
                {
                       do other stuff;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:56:27.510

使用 fopen、fgetc 逐字节比较或使用[opencv 进行更](http://sublimated.wordpress.com/2011/01/25/image-difference-with-opencv/)合理的比较。

# ios - 翻转过渡后 UIBarButtonItem 自定义背景外观“跳跃”

> ID：15261148
> 
> 赞同：1
> 
> 时间：2013-03-07T00:53:11.437
> 
> 标签：ios, objective-c, iphone

出于某种原因，当我为 uibarbutton 项目设置自定义背景图像时：

```
UIImage *button30 = [[UIImage imageNamed:@"nav_bar_button_orange.png"]
                     resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
[[UIBarButtonItem appearance] setBackgroundImage:button30 forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault]; 
```

我的按钮在水平翻转时“跳跃”或更新它的宽度（或更准确地说是文本每一侧的填充）。

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStylePlain handler:^(id sender) {
    [self dismissViewControllerAnimated:YES completion:nil];
}]; 
```

忽略处理程序位，我正在使用 BlocksKit。

你可以在这里看到它发生：http: [//screencast.com/t/HZRBS70OT6wt](http://screencast.com/t/HZRBS70OT6wt)

### 附加信息

当我将按钮放在故事板而不是代码中时，它甚至会这样做。似乎只发生在水平翻转上。

## 原因：

显然它与使用自定义字体有关。几乎就像它一开始没有计算宽度一样。

# 示例项目

[在此示例项目中重新创建了问题](https://www.dropbox.com/s/dw3w9sbvfp14wl5/sample.zip)。如果有人知道如何解决这个问题会很高兴。不敢相信没有人遇到过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:40:02.757

我不知道这种行为的原因，但设置图像插入有助于解决这个问题。 ![在此处输入图像描述](../Images/04d9efda0890dd6508251da6dfeec549.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:24:36.963

每当您需要在栏按钮中进行 ui 修改时，最好使用自定义视图对其进行初始化。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:button30 forState:UIControlStateNormal];
[button addTarget:self action:@selector(dismissFuction:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

# python - SQLAlchemy：逗号如何确定查询返回字符串还是元组？

> ID：15261149
> 
> 赞同：0
> 
> 时间：2013-03-07T00:53:14.017
> 
> 标签：python, sqlalchemy

在 SQLAlchemy 中，如果您在查询中放置一个逗号，如下所示，您会得到一个“字符串”。如果你不放逗号，你会得到一个元组。为什么会这样？我看不到文档中解释的任何地方

使用 SQLAlchemy0.8

下面的代码返回一个**字符串**：

```
def get_password(self, member_id):
    for password, in session.query(Member.__table__.c.password).filter(self.__table__.c.id == member_id): 
        return password 
```

这将返回一个**类 'str'**： `'mypassword'`

虽然下面的代码返回一个元组；

```
def get_password(self, member_id):
    for password in session.query(Member.__table__.c.password).filter(self.__table__.c.id == member_id): 
        return password 
```

这将返回一个**类 'sqlalchemy.util._collections.KeyedTuple'**：`('mypassword',)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:56:21.797

这是因为查询*总是*返回一个元组，但逗号将该元组的元素分配给变量：

```
>>> foo, bar = (1, 2)
>>> foo
1
>>> bar
2
>>> baz, = (3, )
>>> baz
3 
```

这也适用于 for 循环：

```
>>> for a, b in [(1, 'x'), (2, 'y')]:
...     print a, "and b is", b
...
1 and b is x
2 and b is y 
```

这称为“元组解包”

# r - 在“长”数据结构中按因子的平均值对 R 中的箱线图进行排序

> ID：15261151
> 
> 赞同：4
> 
> 时间：2013-03-07T00:53:25.617
> 
> 标签：r, boxplot

我试图让箱线图从平均值最低的因素发展到平均值最高的因素。这是一个简单的例子：

```
a = rnorm(10,mean=3,sd=4)
b = rnorm(10,mean=-1,sd=2)
c = rnorm(10,mean=5,sd=6)
d = rnorm(10,mean=-3,sd=1)
e = rnorm(10,mean=0,sd=.5)

labs = c(rep("a",10),rep("b",10),rep("c",10),rep("d",10),rep("e",10))
mean =     c(rep(mean(a),10),rep(mean(b),10),rep(mean(c),10),rep(mean(d),10),rep(mean(e),10))
data = c(a,b,c,d,e)
df = data.frame(labs,data,mean)
df = df[order(df$mean),]
boxplot(data~labs,data=df)
#They are not ordered
df$labs = ordered(df$labs, levels=levels(df$labs))
boxplot(data~labs,data=df)
#It doesn't work 
```

我怎样才能让左边最小的因子排序，随着我向右移动而变大？对此有一些线程，但他们的方法对我不起作用。（也许是因为我的数据格式？）

**奖励积分**帮助我将 x 轴上的字母旋转 180 度。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T00:58:41.870

```
boxplot(data~reorder(labs,data),data=df) 
```

![在此处输入图像描述](../Images/dc46c543059ba316a27f664de57eea1d.png)

**编辑文本的旋转**

在图形和外边距中，文本只能以 90° 的倍数绘制，该角度由**las**设置控制。值 0 表示文本始终平行于相关轴绘制（即，在边距 1 和 3 中水平，在边距 2 和 4 中垂直）。值 2 表示文本始终垂直于相关轴。

绘图区域中的文本绘制（使用文本）将由以度为单位的**srt**参数控制。

```
 boxplot(data~reorder(labs,data),data=df, las=2,
        names=unique( paste(labs,'long')))

text(x=1,y=5,labels='Use srt to rotate text in the 
       plot region\n but las in figure and outer margins,',
      srt=50,cex=1,font=2) 
```

![在此处输入图像描述](../Images/093fb480d9e0f3443ab16f5617c476df.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T01:15:22.943

如果你使用`ggplot2` 它来做轴文本的旋转是非常简单的 `theme(axis.text.x = element_text(angle= 90)`

```
library(ggplot2)

ggplot(df, aes(x=reorder(labs, data), y = data)) + 
  geom_boxplot() + 
  theme(axis.text.x = element_text(angle=90)) + 
  labs(x= 'x') 
```

![在此处输入图像描述](../Images/b426a54dff44c626bf57d1a3de556258.png)

您最初的调用`ordered`不起作用的原因是您从原始数据中传递了级别，这些级别的顺序不正确，级别的顺序应该反映您想要的顺序。这就是`reorder`这种情况下的惯用方法。

和一个`lattice`解决方案，所以它不会被遗忘

```
library(lattice)
bwplot(data~reorder(labs,data), df, scales=  list(x= list(rot = 90))) 
```

![在此处输入图像描述](../Images/66f6a3e1d431b0065df17645b4cef902.png)

# javascript - Angular：从指令更 新模型

> ID：15261154
> 
> 赞同：10
> 
> 时间：2013-03-07T00:53:34.977
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope, angularjs-digest

我在这里有一个小提琴：http: [//jsfiddle.net/KdkKE/44/](http://jsfiddle.net/KdkKE/44/)

我想做的是创建一个“切换”组件，基本上是一个自定义复选框，但如果它是真或假，html 会发生变化，它绑定到控制器中的布尔值。

当用户单击切换时，模型会更新，指令的视图会发生变化。[它类似于指令文档http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)末尾的示例，但状态将被绑定，以便在启动时正确。

```
var app = angular.module('App', []);

function Ctrl($scope) {
    $scope.init = function() {
        $scope.foo = true
    }
}

 app.directive('toggle', function() {
        return {
            restrict: 'E',
            replace: true,
            transclude: true,
            scope: {
                label: '@',
                ngModel: '='
            },
            template: 
                '<div style="cursor: hand; cursor: pointer">{{label}}: {{ngModel}}</div>',
            link: function(scope, element, attrs, controller) {
                element.bind('click', function() {
                    scope.ngModel = false;
                    attrs.$set('ngModel', false);
                    console.log('plz', attrs.ngModel);
                });
            }
        };
    }); 
```

-

```
<div ng-app="App">
    <div ng-controller="Ctrl" ng-init="init()">
        <p>Foo in Ctrl: {{foo}}</p>  
        <toggle label="Foo" ng-model="foo"></toggle>
    </div>    
</div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T01:09:59.287

我认为您只是缺少使用[`$apply`](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply). 看到它在这里工作：http: [//jsfiddle.net/4TnkE/](http://jsfiddle.net/4TnkE/)

```
element.bind('click', function() {
    scope.$apply(function() {
        scope.ngModel = !scope.ngModel;
    });
}); 
```

也可以像这样使用它来避免嵌套在另一个函数中：

```
element.bind('click', function() {
    scope.ngModel = !scope.ngModel;
    scope.$apply();
}); 
```

# jquery - 使 jQuery 缩放 保持新尺寸

> ID：15261160
> 
> 赞同：0
> 
> 时间：2013-03-07T00:54:14.317
> 
> 标签：jquery, jquery-ui, jquery-animate, scale, jquery-effects

`div`单击按钮时，我正在尝试缩放一个圆形：

```
<button id="2007">2007</button>
<div id="test2"></div> 
```

我已经为初学者使用了 CSS 样式：

```
#test2 {
  background-color: red;
  opacity:0.5;
  border-radius: 50%;
  width: 300px;
  height: 300px;
  position: absolute;
  z-index:2;
} 
```

我的 JS 可以减少中间中心的 div 大小，就像我想要的那样：

```
$("#2007").click(function(){
    $("#test2").effect("scale",{percent: 50},"1000");
}); 
```

问题是，一旦缩放效果完成，DIV 就会恢复到原来的大小并跳转到一个新的位置。

有谁知道我如何将 DIV 保持在其按比例缩放的尺寸并防止它跳到重新定位？

[这是一个 JSbin 示例](http://jsbin.com/ogicuj/6/edit)- 只需单击“2007”按钮即可查看发生了什么。

**编辑：**我添加了一个[JSFiddle](http://jsfiddle.net/Koubenec/JQdHf/)

更改`.effect`为`.animate`根本不起作用，我确信必须有一种方法可以在`.effect`没有`div`跳转的情况下使用，但我仍然很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T10:03:19.423

为了保持最终状态，动画停止后 - 你只需要使用正确的 jquery 版本 + 正确的 jquery-ui 版本（我在这个例子中使用 jquery-1.7.2+jquery-ui-1.8.18 - 它可以工作):[活生生的例子](http://jsfiddle.net/snakeriot/K3Qn7/)

源代码：

```
 $("#big").click(function(){
     $(".target").effect( "size", 
      { to: {width: 200,height: 200} }, 1000 );
  });

  $("#small").click(function(){
     $(".target").effect( "size", 
      { to: {width: 100,height: 100} }, 1000 );
  }); 
```

如您所见，有特定的停止功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:45:34.933

jQuery UI 效果完成后会恢复原来的属性，你可以尝试使用 CSS 或者`.animate()`，这里是使用 CSS 的示例（[http://jsfiddle.net/steelywing/JQdHf/3/](http://jsfiddle.net/steelywing/JQdHf/3/)）

```
$("#2007").click(function(){
    $("#test2").css({
        'transition': 'all 1s',
        'transform': 'scale(0.5)',
    });
}); 
```

更新：看看这个图书馆（[https://github.com/rstacruz/jquery.transit](https://github.com/rstacruz/jquery.transit)），我认为这对你有好处=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:43:48.310

也许你可以尝试提供一个`callback`在效果完成后执行。

你可以在这里看到一个例子：http: [//jsfiddle.net/mULWX/1/](http://jsfiddle.net/mULWX/1/)

# c++ - 使用 fgets() 出错

> ID：15261161
> 
> 赞同：0
> 
> 时间：2013-03-07T00:54:17.027
> 
> 标签：c++, c, eclipse

嗨，有人可以帮我解决这个错误吗？我得到的错误是：

```
Building target: Programming Cpt220
/bin/sh: -c: line 0: syntax error near unexpected token `('
Invoking: MacOS X C++ Linker
/bin/sh: -c: line 0: `g++  -o "Programming Cpt220"  ./fgets()exampleFromTheNet.o   '
make: *** [Programming Cpt220] Error 2
g++  -o "Programming Cpt220"  ./fgets()exampleFromTheNet.o 
```

我不确定为什么 ist 要求 g++ -o 我在 Mac 上使用 eclipse。

```
#include <stdio.h>
#include <stdlib.h>

#define  MAX_LEN  100

int main(void)
{
   FILE *stream;
   char line[MAX_LEN], *result;

   stream = fopen("myfile.dat","r");

   if ((result = fgets(line,MAX_LEN,stream)) != NULL)
       printf("The string is %s\n", result);

   if (fclose(stream))
       printf("fclose error\n");

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:57:15.403

`()`从 C 文件的文件名中删除。

即`fgets()exampleFromTheNet.c`->`fgetsExampleFromTheNet.c`

`()``bash`在和其他贝壳中具有特殊含义。因此，建议避免在文件名中包含任何特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:56:19.670

看起来它期望在您的文件名中有一个“（）”，这会杀死您正在运行的 shell 脚本。

# batch-file - 如何将配置文件传递给bat文件中的exe？

> ID：15261163
> 
> 赞同：2
> 
> 时间：2013-03-07T00:54:27.267
> 
> 标签：batch-file, exe

我有 test.exe（控制台应用程序/windows 应用程序）并且`test.exe.config`在我机器上的同一目录中。

当我打开 DOS 提示符时，我可以运行`test.exe %1 %2 %3`，它成功地将数据插入到 MS SQL 表中。

test.exe.config 是从 app.config 编译而来的，其中包含：

```
<connectionStrings>
<add name="Common Instance" connectionString="data source=eeeeee;Integrated Security=SSPI;Initial Catalog=YYYY;User ID=xxx;Password=xxxx" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

但是当我运行包含此代码的 bat 文件时：

`START C:\aa\test.exe %1 %2 %3`

我收到此错误消息：

```
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Data.SqlClient.SqlException
Stack:
   at Microsoft.Practices.EnterpriseLibrary.Data.Database.GetNewOpenConnection() 
```

我在数据库上放了一个跟踪，当我运行 bat 文件时甚至没有命中。

好像我运行bat文件的时候，找不到数据库连接。

我试过了：

`START C:\aa\test.exe %1 %2 %3 "test.exe.config"`

`START C:\aa\test.exe %1 %2 %3 /config:test.exe.config`

`START C:\aa\test.exe %1 %2 %3 /config:App.config`

它们都不起作用。我会很感激一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:57:34.263

我的猜测是需要在批处理文件中设置工作目录。这就是它找不到`.config`文件的原因。将工作目录设置为应用程序和`.config`文件所在的文件夹。

```
cd C:\aa
start test.exe %1 %2 %3 
```

# wordpress - WooCommerce 特色产品

> ID：15261166
> 
> 赞同：-1
> 
> 时间：2013-03-07T00:54:46.537
> 
> 标签：wordpress, woocommerce

我正在尝试在我的 Wordpress 主页上构建一个功能，我可以在我的主页上显示特色产品的图像。我希望提取所选类别的最新图像并将其链接到产品。

任何人都知道如何通过 Woocommerce 实现这一目标？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:43:39.270

[请从http://www.woothemes.com/products/wootique/](http://www.woothemes.com/products/wootique/)免费下载 Wootique 主题，并查看它如何在首页显示特色产品。我想知道为什么您不想使用特色产品的图像。

# javascript - 在指针上居中拖放代理

> ID：15261167
> 
> 赞同：2
> 
> 时间：2013-03-07T00:55:16.640
> 
> 标签：javascript, extjs, drag-and-drop, extjs4, extjs4.1

我正在使用 ExtJS 拖放并尝试将拖动代理置于光标下方的中心（代理：表示被拖动元素的半透明填充物）。我可以像这样在物理上居中，但之后它不会正确下降：

```
view.dragZone = Ext.create('Ext.dd.DragZone', view.getEl(), {

    onStartDrag: function(x, y) {
        this.setDelta(150, 20); // (the element is 300 x 40)
    },

    //.. other DD configs

}); 
```

当我使用它并将光标移动到放置区域时，它只是滑回原始位置，就好像我将它随机放置在某个地方一样。

如果我不使用它，光标大约是对象的 20 像素 NW（即不居中），但我可以将它完全放在放置区域中。

我认为它可能与光标不*直接*位于放置区域上方有关，因为它现在直接位于拖动代理*上方。*我尝试重置拖放区的 z-index 以尝试将其*置于*拖动代理之上，但这似乎不起作用。尝试了其他一些不值得一提的非常随机的事情。

有没有人成功设置拖放以使拖动代理以光标为中心？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T04:52:44.160

我能够将代理居中并在[网格拖放插件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.DragDrop)的实时预览中看到它正确放置。

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name'],
    data: [["Lisa"], ["Bart"], ["Homer"], ["Marge"]],
    proxy: {
        type: 'memory',
        reader: 'array'
    }
});

var p = Ext.create('Ext.grid.Panel', {
    store: 'simpsonsStore',
    columns: [
        {header: 'Name',  dataIndex: 'name', flex: true}
    ],
    viewConfig: {
        plugins: {
            ptype: 'gridviewdragdrop',
            dragText: 'Drag and drop to reorganize'
        }
    },
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
});

p.view.plugins[0].dragZone.onStartDrag = function() {
    this.setDelta(80, 10);
}; 
```

`Ext.view.DragZone`看起来和 没有太大区别`Ext.dd.DragZone`。但是，`Ext.view.DropZone`添加了相当多的逻辑来检查记录被丢弃的位置。我猜这个逻辑可能是网格拖放插件正常工作的原因。

# ruby-on-rails-3 - Paperclip gem 触发 CSRF 令牌验证问题

> ID：15261169
> 
> 赞同：11
> 
> 时间：2013-03-07T00:55:44.380
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, paperclip, csrf

我有一个使用回形针 gem (v 3.4.0) 的 Rails 3.1 应用程序。简而言之。我有一个故事模型和一个帖子模型。一个故事可以有很多帖子。

```
#story.rb

class Story < ActiveRecord::Base

  attr_accessible :title, :user_id, :username, :posts_attributes

  belongs_to    :user
  has_many      :posts, :dependent  =>  :destroy,
                      :order => "created_at DESC"

  accepts_nested_attributes_for :posts, :reject_if => lambda { |t| t['contents'].nil? }

end 
```

* * *

```
#post.rb

class Post < ActiveRecord::Base

  attr_accessible :contents, :photo, :dimensions

  belongs_to    :story, :touch => true
  belongs_to    :user, :touch => true

  has_attached_file :photo, 
                    :styles => { 
                      :medium => { :geometry => "400x400>" },
                      :thumb => { :geometry => "100x100>" },
                    },
                    :processors => [:thumbnail],
                    :storage => :s3,
                    :s3_credentials => "#{Rails.root.to_s}/config/s3.yml",
                    :path => "/:style/:id/:filename"

  before_save   :extract_dimensions

  serialize   :dimensions

  validates   :contents,  :presence   => true,
                      :length         => {  :maximum => 399,
                                        :minimum => 5 } 
  validates   :user_id,   :presence => true

  validates_attachment_content_type :photo, 
    :content_type => ['image/jpeg', 'image/png', 'image/gif', 'image/jpg'],
    :message => "Sorry, we don't support that type of image format"

end 
```

如您所见，帖子可能有照片附件。我使用回形针来管理这些附件。

我使用 javascript/jquery 在客户端上生成动态发布这些帖子的表单。我的问题是这个。. . 如果帖子不包含照片附件，则一切正常。但是，如果帖子有照片附件，我会收到以下错误消息并且帖子不会发布：

```
WARNING: Can't verify CSRF token authenticity
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 61 LIMIT 1
   (0.3ms)  BEGIN
   (0.2ms)  COMMIT
Completed 401 Unauthorized in 238ms 
```

结果，我的会话数据被破坏了，我什至看不到 Firebug 的请求标头。put 请求根本不会出现在 firebug 中。

现在，毫不奇怪，我可以通过 PostController 中的以下内容解决这个问题：

```
skip_before_filter :verify_authenticity_token, :only => [:create] 
```

但我不想放弃这种安全感。我还尝试通过 js/jquery 将 CSRF 标头添加到我的表单中：

```
jQuery.ajaxSetup({ 
  beforeSend: function(xhr) {
    xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-          
            token"]').attr('content'));
  }
}); 
```

但这并不能解决问题，而且正如我上面所说的，我什至无法看到请求头数据以查看标头。

任何人都可以提出回形针触发问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T05:36:46.450

我知道自从我第一次发布上述问题以来已经有一段时间了，但是人们仍然在他们的搜索中找到它，所以我想我会用答案来更新东西。

我上面讨论的问题与回形针无关。提交表单时没有 csrf 令牌，因为我正在使用 remotipart.js 处理具有文件附件的表单的提交。Remotipart 通过将表单数据复制到 i-frame 来启用类似于 ajax 的表单提交，然后在您的站点保持活动状态时进行正常（即非 ajax）提交。有关通过 i-frame 上传 ajax 文件的更详细说明，请参阅[本文](http://www.alfajango.com/blog/ajax-file-uploads-with-the-iframe-method/)。

在以前版本的 remotipart 中，csrf 令牌没有被复制到 i-frame 提交的表单中。支持remotipart的好心人现在已经解决了这个缺点。[你可以在这里](https://github.com/JangoSteve/remotipart/commit/972e815045ba5b816814d10837fc8781d40fd5d9)找到修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T03:09:05.227

```
$.ajaxSetup({
    beforeSend: function(xhr) {
        xhr.setRequestHeader('X-CSRF-Token',
                             $('meta[name="csrf-token"]').attr('content'));
    }
}); 
```

在js中

并且在布局中

```
<%= csrf_meta_tags %> 
```

文件应该足以使它工作。

否则你可以使用`jquery-rails`处理 CSRF 令牌的 gem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-09T10:53:57.333

这是您解决问题所需要的：

[https://github.com/JangoSteve/remotipart](https://github.com/JangoSteve/remotipart)

# c++ - C++ 中的弗洛伊德算法

> ID：15261181
> 
> 赞同：0
> 
> 时间：2013-03-07T00:56:44.520
> 
> 标签：c++, floyd-warshall

我正在尝试在 C++ 中实现 Floryd 算法

我已经有了这个：

a 表示边缘开始的节点。

b 表示边结束的节点。

t 表示边缘的时间。

m 表示边数。

n 表示节点数。

```
typedef pair<int,int> nodo;
vector <nodo> g[100000];

void preguntarFloyd()
{
    g->clear();
    int  m;
    int contador = 0;
    cin m;

    for(int k = 0; k < m ; k++)
    {
        int a, b, t;
        cin >> a >> b >> t;
        g[a].push_back(nodo(b,t));
    }

    for (int k = 0; k < n; k++)
    {
        for(int i = 0; i < n; i++)
        {
            for(int j = 0; j <n; j++)
            {
                if(g[i][k].second + g[k][j].second < g[i][j].second )
                {
                    g[i][j].second = g[i][k].second + g[k][j].second;
                }
            }
        }
    }

} 
```

当我尝试代码时，程序崩溃说：“表达式：向量下标超出范围”

我希望你们能帮助我，因为我无法解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:06:19.797

表示图的两种最常见的方法是：

*   邻接表
*   邻接矩阵

你有一个数据结构，在初始化阶段你处理它就像它是一个邻接列表然后你尝试访问它，就像它是一个邻接矩阵一样。显然这永远不会奏效......

# css - 修改基础 CSS 框架的最佳实践

> ID：15261183
> 
> 赞同：-1
> 
> 时间：2013-03-07T00:56:56.457
> 
> 标签：css, zurb-foundation

在实现foundation.css框架时，我应该根据我的自定义需求（字体颜色、背景等）更新实际的foundation.css，还是应该使用辅助css进行自定义，这样当foundation.css需要更新时，我可以在不更新的情况下替换它失去我的定制。

让我知道你对这个策略的看法。这将是上面第二个选项的代码：

```
<link rel="stylesheet" href="css/foundation.css" media="screen, projection" />
<link rel="stylesheet" href="css/my-custom.css" media="screen, projection" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:23:06.603

好吧，我认为这更像是一个意见请求，而不是一个真正的问题。不过，我想说答案是，在这些情况下，一如既往，这取决于。

您当然可以用第二个 css 覆盖原始样式，我认为这就是他们在他们的文档中所建议的（我认为，在过去的 6 个月里，我没有使用 Foundation，抱歉）。它会正常工作，并且您未来的升级将更容易集成，以防框架得到一些。这无疑是一种完美的面向未来的方法。

性能方面，我建议直接自定义那个 CSS。我的理由是：

*   **更少的 KB**：你的 css 会更轻 = 加载速度更快。
*   **更少的 DOM 绘制**：浏览器不必以 Foundation 方式设置元素的样式，然后再以您的方式重新设置它们的样式。
*   **更少**的 HTTP 请求：浏览器只会下载一个 css，节省了一个额外的 HTTP 请求（加载时间更长）

因此，这完全取决于您，因为您是唯一知道网站是否需要更新框架的人。当我使用 Foundation 时，我从来不需要更新，而且我认为它已经过大量测试，几乎不需要*重要的更新。*

# python - sublime text 2 控制台和 python 3

> ID：15261193
> 
> 赞同：4
> 
> 时间：2013-03-07T00:58:00.743
> 
> 标签：python, python-3.x, sublimetext2

我可以为 sublime text 2 中的构建命令设置 python3.2（并使用 python3.2 构建），但是当调用控制台时`cmd`-```解释器是 mac 的默认 2.6 版本。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:31:39.517

Sublime Text 2 中的控制台使用 Python 的内部版本，即 2.6。如果不破坏一大堆东西，就没有办法改变它。不过，有一个解决方法。如果你只想要 ST2 中的 Python 控制台，请使用很棒的[SublimeREPL](https://github.com/wuub/SublimeREPL)包，它也可以通过[Package Control](http://wbond.net/sublime_packages/package_control)安装。除此之外，您可以发送选择或整个文件以通过您选择的 REPL 进行解释，包括 Python 3。`Packages/User/SublimeREPL/config/Python/Main.sublime-menu`使用以下内容创建：

```
[
     {
        "id": "tools",
        "children":
        [{
            "caption": "SublimeREPL",
            "mnemonic": "r",
            "id": "SublimeREPL",
            "children":
            [
                {"caption": "Python",
                "id": "Python",

                 "children":[
                    {"command": "repl_open",
                     "caption": "Python 3",
                     "id": "repl_python3",
                     "mnemonic": "p",
                     "args": {
                        "type": "subprocess",
                        "encoding": "utf8",
                        "cmd": ["python3", "-i", "-u"],
                        "cwd": "$file_path",
                        "syntax": "Packages/Python/Python.tmLanguage",
                        "external_id": "python",
                        "extend_env": {"PYTHONIOENCODING": "utf-8"}
                        }
                    }
                ]
                }
            ]
            }]
        }
] 
```

将`"cmd"`选项更改为二进制文件的**完整**路径。`python3`这样，您的更改将在任何 SublimeREPL 升级后继续存在。顺便说一句，这条路径适用于任何包，因此您可以随意自定义，而不必担心意外丢失所有包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:31:57.527

`Cmd`+```应该打开 Sublime Text 的嵌入式解释器控制台，即您在开发或调试 Sublime 插件时使用的解释器控制台。您可以通过注意到该`sublime`模块可用来验证这一点。

如果你真的想要 Python 3 控制台，请升级到嵌入 Python 3.3的[Sublime Text 3 。](http://www.sublimetext.com/3)[或者，使用SublimeREPL](https://github.com/wuub/SublimeREPL)之类的专用插件（请参阅@MattDMo 的答案）。

顺便说一句：如果您想要一个用于交互式 Python 工作的良好环境，我建议您忽略上述内容并尝试使用[**IPython Notebook**](http://www.ipython.org)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:28:00.763

您可以尝试在 Tools > Build System > New Build System 中设置类似于以下内容的环境变量

```
{
"path": "/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin",
"env":
{
    "PYTHONPATH":"/usr/local/lib/python:/usr/local/username/python/3.2/lib/python3.2/"
},//this comma!
"cmd": ["python3", "-u", "$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.python"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:24:00.097

您看到的是与 Sublime Text 捆绑在一起的 Python。我不会升级它，但如果你想使用自己的，你可以这样做：

```
ln -s $HOME/.pythonbrew/pythons/Python-2.6/lib/python2.6 /Your_Sublime_Install_Path/lib/python2.6 
```

# css - 在 CSS 中制作一个雪佛龙尖块

> ID：15261195
> 
> 赞同：0
> 
> 时间：2013-03-07T00:58:14.987
> 
> 标签：css

是否可以在纯 CSS 中制作如下所示的形状？我该怎么做呢？

我想要一个实心背景上的水平实心填充块，一端有一个人字形，与主块分开。

![我想要实现的示例](../Images/79b62e1a07390e065a9b66b92d874d62.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T01:17:43.103

您只需使用一些背景渐变即可完成此操作：

```
div {
    width: 300px;
    height: 50px;
    background-color: black;
    background-image:
        linear-gradient( -45deg, white 25px, transparent 25px),
        linear-gradient(-135deg, white 25px, transparent 25px),
        linear-gradient( -45deg, black 40px, transparent 40px),
        linear-gradient(-135deg, black 40px, transparent 40px),
        linear-gradient( -45deg, white 50px, transparent 50px),
        linear-gradient(-135deg, white 50px, transparent 50px);
} 
```

小提琴：http: [//jsfiddle.net/jonathansampson/fxj3u/](http://jsfiddle.net/jonathansampson/fxj3u/)

上面的代码没有任何必需的供应商前缀`linear-gradient`。为了在您的项目中使用它，您需要提供所有前缀，或者您可以简单地引用像[-prefix-free 之](http://leaverou.github.com/prefixfree/)类的工具（这是我使用的）。

![在此处输入图像描述](../Images/d4b0ca5e98d2f8b90fa62ba17d68a0b5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:06:27.510

你可以，你需要用几种不同的形状来构造它。您想按以下顺序制作这些形状：

1.  黑色矩形
2.  紫色背景的黑色三角形
3.  黑色背景的紫色三角形
4.  紫色背景的黑色三角形

查看[http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)了解如何创建形状。试一试，如果遇到困难，请返回您的 CSS/标记。

需要厌倦的东西：你可能需要使用`float:left;`这样的形状彼此相邻，它们之间没有任何间隙。

# java - 小程序不适用于 chrome

> ID：15261200
> 
> 赞同：1
> 
> 时间：2013-03-07T00:59:15.097
> 
> 标签：java, javascript, google-chrome, applet

嗨，我在小程序的 asp 文件中使用以下代码，但小程序在 Internet Explorer 中运行良好时无法加载到谷歌浏览器中。

```
<object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" width="1100" height="500" hspace="0" vspace="0" align="middle" name="graph" 
     codebase="http://java.sun.com/update/1.6.0/jinstall-6u31-windows-i586.cab#Version=6,0,0,5"
     id=JavaBeansBridge_Object1>

     <PARAM NAME ="CODE" VALUE="com.test.Graph" >
     <PARAM NAME ="CODEBASE" VALUE="/test/applet/" >
     <PARAM NAME ="ARCHIVE" VALUE="graphing.jar">
     <param name="GraphType" value="<%= GraphType%>">
     <% if GraphType = "1" then %>
         <param name="GraphTitle" value="Monthly">
     <% else %>
         <param name="GraphTitle" value="Daily">
     <%end if %>
    <param name = "type" value = "application/x-java-applet;version=1.6">
</object> 
```

我在我的 chrome 中测试了其他小程序网站，它们可以工作，虽然需要更新插件，但是当我这次点击运行时，小程序就可以工作了。但是我的小程序在 IE 中工作时不起作用

请告诉我问题出在哪里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:50:34.427

看来您正在使用 ERB；你可以发布原始输出吗？可能存在格式错误。

此外，请查看[Java 部署建议](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)。特别是，不要用 HTML 做事，而是尝试使用`deployJava.js`脚本。此脚本还将检查浏览器是否兼容以及 JRE 是否可用。

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
    var attributes = {codebase:'/test/applet/',
                      code:'com.test.Graph',
                      archive:'graphing.jar',
                      width:1100, height:500} ;
    var parameters = { ... your application parameters } ;
    var version = '1.6' ;
    deployJava.runApplet(attributes, parameters, version);
</script> 
```

# c# - 指针/内存引用的序列化/反序列化

> ID：15261201
> 
> 赞同：0
> 
> 时间：2013-03-07T00:59:19.180
> 
> 标签：c#, xml, pointers, serialization, unsafe

我正在编写一个 XML 序列化程序，它使用反射递归地爬过对象的公共或私有字段以存储为 XML 并稍后重建，并且在臭名昭著的不可序列化 DataTable 上测试我的序列化程序时，它以某种方式序列化然后尝试重新实例化某种指针，并且在这样做时越过了托管/非托管边界并且（谢天谢地）崩溃而不是乱码内存。我需要找到解决这个问题的方法，但我有点迷茫，因为我没有非托管代码的背景。

我知道您实际上不能按原样序列化指针或引用，因为指针或引用的值是内存地址，并且在重新实例化指针时，您不能期望正确的对象位于该地址XML。据我了解，我要么需要检测一个会导致此问题的对象并忽略它，要么找到并序列化指向的对象，然后在反序列化时对该对象进行反序列化，然后将指针指向所述对象的位置。但我也不知道该怎么做；我的第一个猜测是过滤 Type.IsPointer 似乎并没有解决问题。我要求的可以完成吗？有更好的解决方案吗？我可以用一些战略性的非托管代码来做到这一点吗？

上下文：我正在制作一个序列化程序，它可以序列化普通 XmlSerializer 不能序列化的类型（IDictionary、具有循环引用的类型等）。我的序列化器忽略了属性和 ISerializeable 或 IXMLSerializeable 的实现；它盲目地使用一些规则递归地序列化对象的所有字段。它有效，但它与某些对象猛烈撞击本机/托管边界。我没有使用二进制序列化，因为我的对象不断被修改，而且我不知道如何解决与二进制序列化的对象版本冲突。

编辑：这是在尝试重新实例化“System.Globalization.TextInfo”类时崩溃的代码，我认为这是深埋在 DataTable 某处的文化对象的一部分。这些函数递归地相互调用（总是从 ReInstantiateValueInstance 开始），直到重新实例化初始类型参数。

重新实例化 System.Globalization.TextInfo(CultureInfo) 时，在“bestCtor.Invoke(parameters.ToArray())”处引发托管/本机边界异常

```
 protected object ReCreateTypeWithParameters(Type t)
    {
        if (t.ToString() == "System.Type") return typeof(object); //we dont know the type of type

        var construct = StoreUtilities.GetConstructors(t); //gets any and all constructors for an object

        if (construct != null && construct.Count > 0)
        {
            var leastParams = (from c in construct
                               select c.GetParameters().Count()).Min();

            var bestCtor = (from c in construct
                            where c.GetParameters().Count() == leastParams
                            select c).FirstOrDefault(); //the best constructor has the least parameters - less can go wrong

            if (bestCtor != null)
            {
                List<object> parameters = new List<object>();

                foreach (var param in bestCtor.GetParameters())
                {
                    parameters.Add(ReInstantiateValueInstance(param.ParameterType));
                }

                return bestCtor.Invoke(parameters.ToArray()); //pointer types go boom here.
            }
        }           

        return null;
    }

    protected virtual object ReInstantiateValueInstance(Type t)
    {
        try
        {       
            if (t.ToString() == "System.Type") //we don't know the Type of Type
            {
                return typeof(object);
            }
            var construct = StoreUtilities.GetConstructors(t, true); //gets an object's parameterless constructors

            if (construct == null && t.IsGenericType) //no constructor, it's generic
            {
                object generic = ReCreateGenericType(t);

                if (generic == null) //if the generic type had no constructor, we use the activator.
                {
                    return Activator.CreateInstance(t);
                }
                else
                {
                    return generic;
                }
            }

            if (construct == null || construct.Count() == 0) //we have no constuctor. Try and make a placeholder object anyways.
            {
               return ReCreateTypeWithParameters(t);
            }

            object o = construct.First().Invoke(null);
            return o;
        }
        catch
        {
            return null;
        }
    }

    protected object ReCreateGenericType(Type t)
    {
        try
        {
            if (Type.IsGenericType != true) return null;
            var construct = StoreUtilities.GetConstructors(Type, false);

            if (construct != null && construct.Count() > 0)
            {
                construct = construct.OrderBy(i => i.GetParameters().Count()).ToList();
                var tParams = construct[0].GetParameters();
                List<object> paramList = new List<object>();

                foreach (var p in tParams)
                {
                    if (StoreUtilities.CanStoreAsString(p.ParameterType) == true)
                    {
                        object o = Activator.CreateInstance(p.ParameterType);
                        paramList.Add(o);
                    }
                    else
                    {
                        paramList.Add(ReInstantiateValueInstance(p.ParameterType));
                    }
                }

                return construct[0].Invoke(paramList.ToArray());
            }
            else
            {
                return Activator.CreateInstance(t);
            }
        }
        catch
        {
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:03:44.050

您无法按照说明解决此问题。您只是不*知道*对象是否包含对“非托管数据”的引用。它可能将指向非托管内存的指针存储在`Int64`, `String`,`byte[]`等中。开发人员使用各种技巧。

如果你能以某种方式检测到这一点，然后“忽略”具有非托管引用的对象，那么你就输了，因为当你去反序列化你的数据时，你最终会得到一个不完整的对象。

解决此问题的唯一方法是借助您正在序列化的对象。他们可以通过可选接口实现帮助序列化/反序列化无法通过反射或属性找到的数据。

唯一可以在没有这种帮助的情况下普遍工作的序列化程序往往要求他们正在序列化的对象是 POCO，这是有原因的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:40:02.497

我不确定托管/非托管与此有何相关性，但做到这一点的基本方法是在内部引用的序列化数据中具有某种抽象，一个标签。在序列化期间，您将添加对字典或类似的引用以及标签，因此您只需序列化对象一次。

反序列化将反映这个过程，只创建一次具有特定标签的引用，其余引用通过标签查找现有实例。

# javascript - Extjs 用 addCls() 改变绘图点的颜色，几乎明白了

> ID：15261202
> 
> 赞同：1
> 
> 时间：2013-03-07T00:59:21.127
> 
> 标签：javascript, css, extjs, charts, listener

我正在尝试**使用精灵的 addCls() 方法来更改散点图点的颜色，一旦它被单击。**到目前为止，我的代码更改了当您将鼠标悬停在该点上时出现的突出显示的颜色，而不是该点本身的颜色。

这是我的 itemclick 侦听器，在图表定义中的系列配置下定义。

```
 listeners: {
                    itemclick: function(record, o){
                            console.log(record.sprite);
                            record.sprite.addCls('green-sprite');
                    }
               } 
```

我的“绿色精灵”类的 CSS 如下所示：

```
 .green-sprite{
    stroke: rgb(0,100,0) !important;
    fill: rgb(0,100,0) !important;
    color: #99CC99 !important;
 } 
```

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:26:21.160

我创建了一个简单的示例，发现这是 ExtJS 呈现每个散点的方式。本质上，每个点由多个精灵组成。您可以通过 record.sprite 访问的是直接为数据点创建的精灵，但是为了应用阴影，渲染了其他几个精灵。

如果您关闭散点系列的阴影，那么它应该可以工作。例如

```
var win = Ext.create('Ext.Window', {
            width: 800,
            height: 600,
            hidden: false,
            shadow: false,
            maximizable: true,
            title: 'Scatter Chart Renderer',
            renderTo: Ext.getBody(),               
            layout: 'fit',
            items: {
                id: 'chartCmp',
                xtype: 'chart',
                style: 'background:#fff',
                animate: true,
                store: store1,
                axes: false,
                shadow: false,
                insetPadding: 50,            
                series: [{
                    type: 'scatter',
                    axis: false,
                    xField: 'data1',
                    yField: 'data2',
                    listeners: {
                        itemmouseup: function(record, o)
                        {
                            record.sprite.addCls('green-sprite');
                        }
                    },
                    color: '#ccc',
                    markerConfig: {
                        type: 'circle',
                        radius: 20,
                        size: 20
                    }
                }]
            }
        }); 
```

看看这个小提琴，看看一个工作示例： http: [//jsfiddle.net/JXUFN/](http://jsfiddle.net/JXUFN/) 我已经在 Chrome 和 Internet Explorer 9 中进行了测试，它似乎可以解决问题。

# python - rpy2中的geom_dotplot？

> ID：15261203
> 
> 赞同：0
> 
> 时间：2013-03-07T00:59:28.637
> 
> 标签：python, ggplot2, rpy2

当我尝试使用时，`gplot2.geom_dotplot`我得到了错误：

```
AttributeError: 'module' object has no attribute 'geom_dotplot' 
```

这个函数在 Rpy2 中有不同的名称吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:23:27.967

只是缺少该功能的映射。这是 rpy2 的一个错误。该修复程序将很快在存储库中（将与版本 2.3.4 一起发布）。

同时，一种解决方法是将以下内容添加到您的代码中：

```
from rpy2.robjects.lib import ggplot2

class GeomDotplot(ggplot2.Geom):
    _constructor = ggplot2.ggplot2_env['geom_dotplot']
ggplot2.geom_dotplot = GeomDotplot.new 
```

# google-apps-script - 获取网格计数谷歌应用程序

> ID：15261205
> 
> 赞同：0
> 
> 时间：2013-03-07T00:59:41.753
> 
> 标签：google-apps-script

我正在尝试创建一个动态网格，但我看不到从网格类中获取实际计数的方法。

有没有人找到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:38:37.297

您可以将值存储在隐藏的文本框中并使用 createFlexTable() 本身是一个动态样式网格。

# ruby - Ruby内部Hash类

> ID：15261208
> 
> 赞同：0
> 
> 时间：2013-03-07T01:00:13.547
> 
> 标签：ruby, hash, inner-classes, nested-class

例如

```
class C1
     class Hash
       def ok?
          return 'nested hash ok'
       end
      end
     def m1
        return Hash.new.ok?
     end
     def m2
        return {}.ok?
     end
end 
```

C1.new.m1 有效，但 C1.new.m2 无效。命名空间的不同含义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:06:03.950

您只需创建一个名为 的新类`Hash`，嵌套在其中`C1`。

您没有`Hash`像预期的那样向 Ruby 的类添加方法。如果您愿意，请将其移出`class Hash`并`C1`重新运行：代码将按预期执行。

正如您当前的代码一样，假设您将嵌套类命名为`MyThing`. 现在，你不会为了工作`{}.ok?`而工作，对吗？

回顾一下：

这会起作用：

```
class Hash
   def ok?
    return 'non-nested hash ok'
   end
end
class C1
     def m1
        return Hash.new.ok? #WORKS
     end
     def m2
        return {}.ok? #WORKS
     end
end 
```

这将失败：

```
class C1
    class MyThing
      def ok?
       return 'nested hash ok'
       end
    end
     def m1
        return MyThing.new.ok? #WORKS
     end
     def m2
        return {}.ok? #FAILS
     end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:08:10.640

```
class C1
  class Hash # defines C1::Hash
    def ok?
      return 'nested hash ok'
    end
  end

  def m1
    return Hash.new.ok? # refers to C1::Hash
  end

  def m2
    return {}.ok? # refers to Hash
  end
end 
```

没有基于名称空间的类的混合。他们是分开的。

# ruby - 使用 Watir 时出现“NameError：未初始化的常量 UserAgent”

> ID：15261209
> 
> 赞同：2
> 
> 时间：2013-03-07T01:00:17.980
> 
> 标签：ruby, selenium, webdriver, watir, irb

我是 ruby​​ 的新手，我似乎已经成功安装`watir-webdriver`和`webdriver-user-agent`gems，但是当我尝试按照[这里](http://watirwebdriver.com/mobile-devices/)的说明进行操作时，我偶然发现了。如何进行？

```
>> require 'watir-webdriver'
=> true
>> require 'webdriver-user-agent'
=> true
>> driver = UserAgent.driver(:browser => :chrome, :agent => :iphone, :orientation => :landscape)
NameError: uninitialized constant UserAgent
    from (irb):3
    from /usr/bin/irb:12:in `<main>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T01:06:34.600

尝试使用`Webdriver::UserAgent`

# jsf - 使用 insertChildren 并获取子属性

> ID：15261215
> 
> 赞同：6
> 
> 时间：2013-03-07T01:01:39.773
> 
> 标签：jsf, nested, components, children, composite

我实际上是在尝试创建一个自定义复合表组件，因为 h:datatable 或 p:datatable 不符合我的需要。然而，它应该像 primefaces 数据表一样使用。在我在复合组件中迭代时找到[JSF 复合组件子](https://stackoverflow.com/questions/4999720/jsf-composite-component-childrens)项 和 [公开列表项后，](https://stackoverflow.com/questions/11071413/expose-items-of-a-list-while-iterating-within-composite-component)我看到了终点线，但现在我被卡住了。

我的**xhtml**：

```
<h:body>
    <sm:datatable mode="columntoggle" id="mytable" value="#{managerBean.objects}" var="object">
        <sm:column header="KeyHeader" property="key">
            <h:outputText value="#{object.key}"/>    
        </sm:column>
        <sm:column header="ValueHeader" property="value">
            <h:outputText value="#{object.value}"/>    
        </sm:column>
    </sm:datatable>
</h:body> 
```

这是数据表**复合**：

```
<cc:interface>
    <cc:attribute name="id" />
    <cc:attribute name="mode" />
    <cc:attribute name="var" />
    <cc:attribute name="value" type="java.util.List"/>
</cc:interface>

<cc:implementation>
    <table data-role="table" data-mode="#{cc.attrs.mode}" id="my-table">
        <thead>
            <tr>
                <ui:repeat value="#{component.getCompositeComponentParent(component).children}" var="child">
                    <th>
                        <h:outputText value="#{child.attrs.header}"/>
                    </th>
                </ui:repeat>
            </tr>
        </thead>
        <tbody>
            <ui:repeat value="#{cc.attrs.value}" var="object">
                <tr>
                    <c:forEach items="#{cc.children}" var="child" varStatus="loop">
                        <cc:insertChildren/>
                    </c:forEach>
                </tr>
            </ui:repeat>
        </tbody>
    </table>
</cc:implementation> 
```

这就是**复合列**

```
<cc:interface>
    <cc:attribute name="header" />
    <cc:attribute name="property" />
    <cc:facet name="content"/>
</cc:interface>

<cc:implementation>
    <td><cc:insertChildren/></td>
</cc:implementation> 
```

**thead**独立工作

**tbody**独立工作

像上面那样把它们放在一起，我只会得到 tbody。标题总是空着有什么建议吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-24T20:51:25.160

这不是错误，它实际上按照 mojarra 中的设计工作。使用 cc:insertChildren 将子项移动到 cc:insertChildren 标记的父标记。这个问题等价于另一个问题并且具有相同的解决方案。请参阅我对[这个问题](https://stackoverflow.com/questions/6377542/jsf2-composite-components-are-cc-childcount-and-compositeinsertchildren/31619370#31619370)的回答。

基本上，您在`<ui:fragment>`周围放置一个`<cc:insertChildren>`，将该片段绑定到 FacesComponent bean 中的一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:44:56.553

`#{cc.children}`这相当于 `#{component.getCompositeComponentParent(component).children}`应该两者都可以工作，但由于某种原因在某些版本中无法工作，我猜这部分 JSF 仍然是小错误。

你有没有尝试过

```
 #{cc.getFacets().get('javax.faces.component.COMPOSITE_FACET_NAME').children} 
```

也请参考这个线程，

[在 JSF2 中，如何知道复合组件是否有子组件？](https://stackoverflow.com/questions/4983115/jsf2-has-children/4983235)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-10T12:12:45.223

我发现迭代孩子*并*在同一个组件中使用`<composite:insertChildren />`几乎是不可能的。至少在 Mojarra 2.2.6 实现中。

中间方面的方法对我也不起作用。

最终，我的解决方案是：

1.  按原样保留子组件（选项卡）
2.  从复合中删除所有代码：父（选项卡组）组件的实现
3.  `encodeAll()`在父组件对应的faces组件中实现

这个问题已经有一年多了。如果有更简单的解决方案，请分享。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T15:00:03.637

我遇到了同样的问题。我的解决方法是使用`renderFacet`, 而不是`insertChildren`.

迭代我使用过的插入元素：`#{cc.facets.yourFacetName.children}`并插入我使用过的元素本身：`<composite:renderFacet name="yourFacetName"/>`。

# triggers - adobe edge：如何制作触发照片动画？

> ID：15261221
> 
> 赞同：0
> 
> 时间：2013-03-07T01:02:13.953
> 
> 标签：triggers, adobe-edge

我在边缘重新创建了一个我最初在 Flash 中创建的网站。   [http://thepearlnj.com/](http://thepearlnj.com/)   我需要有关如何使珍珠徽标（在主页上）下方左侧的 3 个径向按钮在边缘工作的帮助。我想保持他们在照片之间制作动画/幻灯片的方式，如果有人可以设置一个简单的边缘文档，其中包含代表照片的 3 个框和 3 个按钮并上传它，我将不胜感激。这样我就可以查看按钮和时间线中的代码并弄清楚它是如何工作的。或者如果它真的很简单，请让我知道我需要在按钮上使用哪些代码来创建相同的效果。（我认为3张照片需要设置为符号，时间轴上有触发器）提前谢谢大家的帮助！-沙龙

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-30T18:20:07.063

请参阅以下项目示例...

[https://docs.google.com/file/d/0BzrivIceUbSWVWp2S1FuLTZRR00/edit?usp=sharing](https://docs.google.com/file/d/0BzrivIceUbSWVWp2S1FuLTZRR00/edit?usp=sharing)

我将 3 个按钮设置为具有悬停状态的符号。每个都有点击功能。我使用 JQUERY 为 IMAGEHOLDER 和 MASK 设置动画，一次只使一个图像可见。

享受！

亚当

# powershell - powershell get-childitem 到 csv 的详细信息

> ID：15261225
> 
> 赞同：2
> 
> 时间：2013-03-07T01:02:28.327
> 
> 标签：powershell, directory, enumerate

我正在尝试为具有深层文件夹结构的文件共享创建一个 CSV 文件。

我希望 CSV 看起来像：

```
filename, filepath, file type, folderStructure 
```

到目前为止，我有以下内容：

```
#Get-ChildItem -Path D:\ -Recurse
$directory="d:\"
gci $directory -recurse |
where {$_.psiscontainer} |
foreach {
    get-childitem $_.fullname |
    sort creationtime |
    select -expand fullname -last 1
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T02:11:20.027

您不需要在 Powershell 中递归递归。它将自动遍历子目录的所有子目录。

我也有点不确定你想要的一些信息，但这里有一个脚本，我相信你最想要的，而且 IMO 更容易阅读。

```
Get-ChildItem -Path X:\Test -Recurse |`
foreach{
$Item = $_
$Type = $_.Extension
$Path = $_.FullName
$Folder = $_.PSIsContainer
$Age = $_.CreationTime

$Path | Select-Object `
    @{n="Name";e={$Item}},`
    @{n="Created";e={$Age}},`
    @{n="filePath";e={$Path}},`
    @{n="Extension";e={if($Folder){"Folder"}else{$Type}}}`
}| Export-Csv X:\Test\Results.csv -NoTypeInformation 
```

您将需要更改路径，因为我为测试创建了此路径。我的结果在 Excel 中如下所示：

```
+-------------------------------+----------------+-------------------------------------+-----------+
|             Name              |    Created     |              filePath               | Extension |
+-------------------------------+----------------+-------------------------------------+-----------+
|         test2                 | 3/6/2013 19:21 | X:\Test\test2                       | Folder    |
|         Results.csv           | 3/6/2013 19:51 | X:\Test\Results.csv                 | .csv      |
|         test3                 | 3/6/2013 19:21 | X:\Test\test2\test3                 | Folder    |
|         New Text Document.txt | 3/6/2013 19:21 | X:\Test\test2\New Text Document.txt | .txt      |
+-------------------------------+----------------+-------------------------------------+-----------+ 
```

它在扩展名中显示“文件夹”的地方只是返回它是一个目录而不是空白（无扩展名）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:04:40.937

好的，我改变了它检查父母的方式。它不再直接查看 Parent 属性，现在应该更正它。

```
 Get-ChildItem -Path D:\ -Recurse |`
foreach{
$Item = $_
$Type = $_.Extension
$Path = $_.FullName

$ParentS = ($_.Fullname).split("\")
$Parent = $ParentS[@($ParentS.Length - 2)]

$Folder = $_.PSIsContainer
$Age = $_.CreationTime

$Path | Select-Object `
    @{n="Name";e={$Item}},`
    @{n="Created";e={$Age}},`
    @{n="Folder Name";e={if($Parent){$Parent}else{$Parent}}},`
    @{n="filePath";e={$Path}},`
    @{n="Extension";e={if($Folder){"Folder"}else{$Type}}}`
}| Export-Csv X:\Test\ResultsC.csv -NoTypeInformation 
```

它现在获取当前项目的路径，通过拆分 \ 将其转换为数组，然后在 ArryLength - 2 处为您提供值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:32:46.910

我不确定这是否是最好的方法，但它有效。我感觉代码可以缩短以获得文件的完整路径。

```
$myDirectory = "D:\"
Get-ChildItem -Path $myDirectory -Recurse |`
foreach{
$Item = $_
$Type = $_.Extension
$Path = $_.FullName

$ParentS = ($_.Fullname).split("\")
$Parent = $ParentS[@($ParentS.Length - 2)]
$ParentPath = $_.PSParentPath
$ParentPathSplit = ($_.PSParentPath).split("::")
$ParentPathFinal = $ParentPathSplit[@($ParentPathSplit.Length -1)]
#$ParentPath = [io.path]::GetDirectoryName($myDirectory)

$Folder = $_.PSIsContainer
$Age = $_.CreationTime

$Path | Select-Object `
    @{n="Name";e={$Item}},`
    @{n="Created";e={$Age}},`
    @{n="Folder Name";e={if($Parent){$Parent}else{$Parent}}},`
    @{n="filePath";e={$Path}},`
    @{n="Extension";e={if($Folder){"Folder"}else{$Type}}},`
    @{n="Folder Name 2";e={if($Parent){$Parent}else{$Parent}}},`
    #@{n="Folder Path";e={$ParentPath}},`
    @{n="Folder Path 2";e={$ParentPathFinal}}`

}| Export-Csv d:\ResultsC_2_F.csv -NoTypeInformation 
```

# extjs - 将 SVG 转换为 Ext.draw.Component 渐变

> ID：15261233
> 
> 赞同：0
> 
> 时间：2013-03-07T01:04:02.190
> 
> 标签：extjs, svg

假设我有一个 SVG 文件，并且我想将其设为 Ext.draw.Component，如何使我的 SVG 停止不透明度转换为 Ext.draw.Component 项？

例如，从**SVG 文件**中，我会有这样的东西：

```
<linearGradient ="linearGradient2920">
  <stop
     id="stop2922"
     style="stop-color:#000000;stop-opacity:1"
     offset="0" />
  <stop
     id="stop2924"
     style="stop-color:#000000;stop-opacity:0"
     offset="1" />
</linearGradient> 
```

在**Ext.draw.Component**中会是什么样子？会这样翻译吗？

```
gradients: [{
            {
            id: 'linearGradient2920',
            angle: 100,
            stops: {
                0: {
                    color: '#000000',
                    opacity: 100 //<---Is this even valid??
                },
                100: {
                    color: '#000000',
                    opactiy: 0 //<---Is this even valid??
                }
            }
        }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:16:42.747

我刚刚在 SVG 的 Ext.js 的源代码中找到了这个 - [http://docs.sencha.com/ext-js/4-1/source/Svg.html](http://docs.sencha.com/ext-js/4-1/source/Svg.html)

```
for (i = 0; i < ln; i++) {
            stop = gradient.stops[i];
            stopEl = me.createSvgElement("stop");
            stopEl.setAttribute("offset", stop.offset + "%");
            stopEl.setAttribute("stop-color", stop.color);
            stopEl.setAttribute("stop-opacity",stop.opacity);
            gradientEl.appendChild(stopEl);
        } 
```

注意**stop.opacity**。这似乎表明像在原始帖子中那样使用不透明度应该是有效的，但是我不确定它的比例是 1.0 还是 100。

# eclipse - Scala 2.10 的 Scala IDE 是否安装了 Akka Actors 库？

> ID：15261235
> 
> 赞同：6
> 
> 时间：2013-03-07T01:04:11.487
> 
> 标签：eclipse, scala, ide, akka, actor

我最近开始探索 Scala，并开始在我的 Eclipse (Indigo) 副本中安装 Scala IDE。我最初为 Scala 2.9 安装了 Scala IDE，但后来注意到有一个更新的版本可用于 Scala 2.10。在较旧的插件上安装较新的插件似乎有效，但是...

Scala 2.10 弃用了旧的 Scala Actors，转而支持 Akka Actors。因此，我正在尝试将导入添加到我的玩具 Scala 项目中：

```
import akka.actor.Actor 
```

这在 IDE 中被标记为错误

```
not found: object akka 
```

当我查看我的 Scala 项目的属性时，我确实没有看到 Akka 文档中提到的任何 akka-* jar 文件。

即使 Scala IDE 插件安装了 Scala 2.10 的其余部分，它们是否需要单独下载和安装？或者在集成 Akka Actor 以代替旧的 Scala Actors 时，包名称是否发生了变化？（文档没有这么说，但 Scala 2.10 版本是相当新的......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-19T15:14:18.070

不，它们没有打包在一起。

确保 Eclipse IDE 可以看到您的依赖项（Akka，以及您的 build.sbt 文件中引用的任何其他内容）的最简单方法是`sbt`使用`sbteclipse`插件来完成。这是我为同事写的说明：

* * *

**安装“sbteclipse”插件**

这个插件将允许 sbt 添加 Eclipse 需要的文件/引用来查找您在 build.sbt 中指定的所有依赖项。否则，您将能够使用 IDE，但您将寻找各种“找不到对象”错误。

只需确保将插件添加到您的全局*plugins.sbt*文件中即可。此文件（及其路径）可能不存在，因此您可能需要在以下位置创建它：

```
~/.sbt $ cd ~/.sbt/0.13/
~/.sbt/0.13 $ mkdir plugins 
```

编辑/创建*plugins.sbt*文件：

```
~/.sbt/0.13 $ vi plugins/plugins.sbt 
```

然后添加这一行（它可能是文件中唯一的一行）：

```
addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.5.0") 
```

**运行 sbteclipse**

要使用它，您只需在命令行上导航到 scala 项目并运行以下命令。如果您已经打开了 Eclipse，请继续并重新启动它。

```
/sites/ewuser (master)$ sbt eclipse 
```

参考：

*   [如何在 sbt、Eclipse 和 github 中初始化一个新的 Scala 项目](https://stackoverflow.com/questions/15381294/how-to-initialize-a-new-scala-project-in-sbt-eclipse-and-github)
*   [官方 sbteclipse 插件](https://github.com/typesafehub/sbteclipse)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T08:34:06.997

Akka 工件尚未与 Scala IDE 捆绑在一起，您必须将“akka-actor_2.10”和朋友添加到项目的依赖项中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T19:49:02.083

从下面的位置下载 eclipse 的 akka

[http://downloads.typesafe.com/akka/akka_2.11-2.4.1.zip?_ga=1.167921254.618585520.1450199987](http://downloads.typesafe.com/akka/akka_2.11-2.4.1.zip?_ga=1.167921254.618585520.1450199987)

解压拉链

将 lib 文件夹中的依赖项添加到项目中

# scala - 为什么 scala 中的 arity-1 语法不能为自调用编译？

> ID：15261236
> 
> 赞同：1
> 
> 时间：2013-03-07T01:04:38.707
> 
> 标签：scala

```
object Arity1 extends App{
    def say(something:String) = println(something)

    say ("this works")
    this say "this too"
    say "this shouldn't?"
} 
```

最后一句话是有道理的，不编译的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:47:19.730

因为有一种叫做后缀方法调用的东西。

当你写

```
def x(): Int = 1
x toString 
```

它实际上是以下内容：

```
def x(): Int = 1
x.toString() 
```

如您所见，它与您的代码示例有冲突，其中 Scala 正在寻找方法名称，但您提供的却是一个字符串，因此 Scala 对此抱怨。

# maven - karaf 的 features-maven-plugin generate-features-xml 目标的捆绑属性格式是什么

> ID：15261239
> 
> 赞同：3
> 
> 时间：2013-03-07T01:04:47.453
> 
> 标签：maven, osgi, apache-karaf

要列出您希望包含在生成的 features.xml 中的一堆包，文档说：

```
bundles File     A properties file that contains a list of bundles that will be used to generate the features.xml file 
```

但它忽略了说明这个文件应该是什么格式。文档给出了例子：

```
 <execution>
          <id>generate</id>
          <phase>generate-resources</phase>
          <goals>
            <goal>generate-features-xml</goal>
          </goals>
          <configuration>
            <bundles>src/main/resources/bundles.properties</bundles>
            <outputFile>target/features.xml</outputFile>
          </configuration>
        </execution> 
```

有人知道这个文件应该是什么样子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T20:13:10.503

正确的格式是

```
groupId/artifactId/version/type 
```

例子：

```
org.apache/bundle1/1.0/bundle 
```

对于它的价值，我试图让功能插件为我工作，但它没有，部分原因是文档不佳。我想动态构建一个 features.xml 来替换我的包的版本和我的功能中的包。使用 Maven 过滤来实现我的目标更容易，所以我就是这样做的。

# c++ - C++ — 参数数量错误

> ID：15261240
> 
> 赞同：0
> 
> 时间：2013-03-07T01:04:48.980
> 
> 标签：c++, loops

我似乎无法编译我的代码 - 这是我得到的错误：

**6\problem11.cpp(21)：错误 C2660：'calcScore'：函数不接受 0 个参数**

解决这个问题有什么帮助或建议吗？这是一个家庭作业问题，我似乎无法弄清楚如何解决该错误。我们目前还不允许使用数组。

```
#include <iostream>

using namespace std;

void getJudgeData(int);
void calcScore(float, float, float, float, float);
float findHighest(float, float, float, float, float);
float findLowest(float, float, float, float, float);

    int main()
    {
        getJudgeData(1);
        getJudgeData(2);
        getJudgeData(3);
        getJudgeData(4);
        getJudgeData(5);
        calcScore();

        system("pause");
        return 0;
    }

    void getJudgeData(int jnumber)
{
    float score1, score2, score3, score4, score5;

    switch(jnumber)
    {
        case 1: cout << "\nEnter the score for judge " << jnumber << ". ";
                cin >> score1;
                break;
        case 2: cout << "\nEnter the score for judge " << jnumber << ". ";
                cin >> score2;
                break;
        case 3: cout << "\nEnter the score for judge " << jnumber << ". ";
                cin >> score3;
                break;
        case 4: cout << "\nEnter the score for judge " << jnumber << ". ";
                cin >> score4;
                break;
        case 5: cout << "\nEnter the score for judge " << jnumber << ". ";
                cin >> score5;
                break;
                calcScore(score1, score2, score3, score4, score5);
    }
}

void calcScore(float one, float two, float three, float four, float five)
{
    float high, low, avg;

        high = findHighest(one, two, three, four, five);
        low = findLowest(one, two, three, four, five);

        avg = ((one + two + three + four + five) - (high+low))/3;

        cout << "Final score is: " << avg <<endl;
        return;
}

float findHighest(float high1, float high2, float high3, float high4, float high5) // find highest score 
{
    float high = 10;

        if (high1 > high)
        {
             high1 = high;
        }
        else if ( high2 > high)
        {
             high2 = high;
        }
        else if ( high3 > high)
        {
             high3 = high;
        }
        else if (high4 > high)
        {
             high4 = high;
        }
        else if ( high5 > high)
        {
             high5 =  high;
        }

        return  high;
}

float findLowest (float low1, float low2, float low3, float low4, float low5) // find lowest score
{
    float low = 1;

        if (low1 < low)
        {
            low1 = low;
        }
        else if (low2 < low)
        {
            low2 = low;
        }
        else if (low3 < low)
        {
            low3 = low;
        }
        else if (low4 < low)
        {
            low4 = low;
        }
        else if (low5 < low)
        {
            low5 = low;
        }

        return low;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:06:38.050

你有线

```
calcScore(); 
```

但是该函数需要参数（在其余代码中声明和定义）。

添加论据！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:06:53.963

```
calcScore(); 
```

正如编译器所说，你不能这样做，因为函数需要 4 个参数。

让我看看我是否明白你想要做什么。进行这些更改

```
float getJudgeData(int jnumber) //return the score
{
    float score; // only one score neeeded

    ...
    //calcScore(score1, score2, score3, score4, score5);
} 
```

您可以删除最后`calcScore`一行，因为

a) 无论如何都不会到达它，它是在 switch 内的 break 语句之后。
b) 此时您将获得一个分数。

```
int main()
{
    float score1, score2, score3, score4, score5;
    score1=getJudgeData(1);
    score2=getJudgeData(2);
    score3=getJudgeData(3);
    score4=getJudgeData(4);
    score5=getJudgeData(5);
    calcScore(score1, score2, score3, score4, score5);
    ...
} 
```

这可能只是做你想做的 - 获取每个浮点数，然后调用`calcScore`它们。

# visual-studio - 在 Visual Studio 中卸载不同的项目集

> ID：15261245
> 
> 赞同：7
> 
> 时间：2013-03-07T01:05:14.463
> 
> 标签：visual-studio, visual-studio-2012, projects-and-solutions

是否有 Visual Studio 的扩展提供为解决方案创建类似“卸载的项目配置文件”的能力？

我有一个包含大量项目（~100）的解决方案。在处理某个部分时，我可以卸载不相关的项目以提高性能。我希望能够保存这组已卸载的项目，以便当我切换到处理不同的部分时，我可以改为加载它的项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-06T07:51:50.083

我最终为 Visual Studio 2012 编写了自己的扩展来执行此操作 - [Loaded Projects](http://visualstudiogallery.msdn.microsoft.com/0c0b75ba-0f56-4809-b0b6-409f777982de)。

但后来我发现了[Funnel](http://visualstudiogallery.msdn.microsoft.com/5396fa4a-d638-471b-ac3d-671ccd2ea369)（由 Dimitri Dering 设计），它将相同的概念提升到了一个新的水平，具有更精致的 UI 和附加功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-01T11:49:12.657

Visual Studio 2019 有一个名为“解决方案筛选器文件”的新概念。

[https://docs.microsoft.com/en-us/visualstudio/ide/filtered-solutions?view=vs-2019](https://docs.microsoft.com/en-us/visualstudio/ide/filtered-solutions?view=vs-2019)

卸载所需内容后，您可以右键单击解决方案并执行“另存为解决方案过滤器”。它创建一个文件，该文件是要在打开时包含的项目列表。因此，如果添加了一个新项目，我认为它不会被选中。

另一个需要注意的重要功能是右键单击“显示卸载的项目”和右键单击“隐藏卸载的项目”。

仅供参考 - 该文件如下所示：

```
{
  "solution": {
    "path": "IvaraDotNet.sln",
    "projects": [
      "AssetManagement\\StaticLoad\\AssetManagementStaticLoad.vcxproj",
       ....
      "framework\\oqpersman\\oqpersman.vcxproj"
    ]
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-06T20:13:04.797

这家伙建议将项目划分为“解决方案文件夹”，以便您可以右键单击并加载/卸载给定解决方案文件夹中的所有项目：

[http://blogs.msdn.com/b/jjameson/archive/2009/03/06/large-visual-studio-solutions-by-loading-unloading-projects.aspx](http://blogs.msdn.com/b/jjameson/archive/2009/03/06/large-visual-studio-solutions-by-loading-unloading-projects.aspx)

他还展示了如何编写宏来加载或卸载项目组：

[http://blogs.msdn.com/b/jjameson/archive/2009/03/11/visual-studio-macros-for-unloading-reloading-projects.aspx](http://blogs.msdn.com/b/jjameson/archive/2009/03/11/visual-studio-macros-for-unloading-reloading-projects.aspx)

# javascript - Google Apps 脚本创建带有文件上传的表单

> ID：15261247
> 
> 赞同：1
> 
> 时间：2013-03-07T01:05:26.797
> 
> 标签：javascript, google-apps-script, google-apps

我正在创建一个基本表单，该表单通过文本框和下拉列表获取用户输入，提交后将登录到电子表格。到目前为止，这工作正常。我想添加到表单中的是“文件上传”功能，它允许某人选择文件并在提交表单时上传文件，因为来自文本框和下拉列表的数据值被记录到电子表格中。我已经查看了以下链接[https://developers.google.com/apps-script/class_fileupload](https://developers.google.com/apps-script/class_fileupload)但我很难将示例插入/添加到现有的 doGet 函数中。任何人都可以提供帮助或提供建议吗？这是到目前为止的 Google App 脚本代码。

**使用以下链接作为表单的基础： [https ://sites.google.com/site/appsscripttutorial/advanced-examples/insert-data-in-sheet-using-ui-forms](https://sites.google.com/site/appsscripttutorial/advanced-examples/insert-data-in-sheet-using-ui-forms)*

```
// Script-as-app template.
 var submissionSSKey = 'Spreadsheet Key goes Here';

 function doGet() {
   var app = UiApp.createApplication().setTitle('Loan Registration Processing');
   var panel = app.createVerticalPanel();
   var grid = app.createGrid(8,2).setId('loanGrid');
   var loanTypeLabel = app.createLabel('Loan Type');
   var loanList = app.createListBox().setName('Loan List').setWidth('120px').setName('LoanType');
   loanList.addItem('Select Option');    
   loanList.addItem('FHA');
  loanList.addItem('Convential');  
  loanList.addItem('VA');
  loanList.addItem('Reverse');
  loanList.addItem('HELOC');
   var borrowerNameLabel = app.createLabel("Borrower's Name");
   var borrowerTextbox = app.createTextBox().setWidth('150px').setName('borrower');
   var loanAmountLabel = app.createLabel('Loan Amount');
   var loanAmountTextbox = app.createTextBox().setWidth('150px').setName('amount');
   var appDateLabel = app.createLabel('Loan Date');
   var appDateTextbox = app.createTextBox().setWidth('150px').setName('date');
   var lienPostition = app.createLabel('Lien Position');
   var lienPos = app.createListBox().setName('Lien Position').setWidth('150px').setName('LienPosition');
  lienPos.addItem('Select Option');     
  lienPos.addItem('1st');
  lienPos.addItem('2nd');
   var propertyType = app.createLabel('Property Type');
   var propType = app.createListBox().setName('Property Type').setWidth('150px').setName('PropertyType');
  propType.addItem('Select Option');
  propType.addItem('1-4');
  propType.addItem('Manufactured');
   var submitButton = app.createButton('Submit'); 

   //Grid layout of items on form
   grid.setWidget(0, 0, loanTypeLabel)
  .setWidget(0, 1, loanList)
  .setWidget(1, 0, borrowerNameLabel)
  .setWidget(1, 1, borrowerTextbox)
  .setWidget(2, 0, loanAmountLabel)
  .setWidget(2, 1, loanAmountTextbox)
  .setWidget(3, 0, appDateLabel)
  .setWidget(3, 1, appDateTextbox)
  .setWidget(4, 0, lienPostition)
  .setWidget(4, 1, lienPos)
  .setWidget(5, 0, propertyType)
  .setWidget(5, 1, propType)
  .setWidget(6, 0, submitButton)

   //Event Handler
   var handler = app.createServerClickHandler('insertInSS');
   handler.addCallbackElement(panel);
   submitButton.addClickHandler(handler);  
   panel.add(grid);
   app.add(panel);
   return app;

 }
 //Function to insert data in the sheet on clicking the submit button
 function insertInSS(e){
   var app = UiApp.getActiveApplication();
   var LoanType = e.parameter.LoanType;
   var borrower = e.parameter.borrower;
   var amount = e.parameter.amount;
   var date = e.parameter.date;
   var LienPosition = e.parameter.LienPosition;
   var PropertyType = e.parameter.PropertyType;
   //app.getElementById('info').setVisible(true).setStyleAttribute('color','red');

   var sheet = SpreadsheetApp.openById(submissionSSKey).getActiveSheet();
   var lastRow = sheet.getLastRow();
   var targetRange = sheet.getRange(lastRow+1, 1, 1, 6).setValues([[LoanType,borrower,amount,date,LienPosition,PropertyType]]);
   return app;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:18:38.803

这是格式正确的代码：

```
// Script-as-app template.
var submissionSSKey = '*************';

function doGet(e) {
  var app = UiApp.createApplication().setTitle('Loan Registration Processing');
  var panel = app.createFormPanel();
  var grid = app.createGrid(8,2).setId('loanGrid');
  var loanTypeLabel = app.createLabel('Loan Type');
  var loanList = app.createListBox().setName('Loan List').setWidth('120px').setName('LoanType');
      loanList.addItem('Select Option');    
      loanList.addItem('FHA');
      loanList.addItem('Convential');  
      loanList.addItem('VA');
      loanList.addItem('Reverse');
      loanList.addItem('HELOC');
  var borrowerNameLabel = app.createLabel("Borrower's Name");
  var borrowerTextbox = app.createTextBox().setWidth('150px').setName('borrower');
  var loanAmountLabel = app.createLabel('Loan Amount');
  var loanAmountTextbox = app.createTextBox().setWidth('150px').setName('amount');
  var appDateLabel = app.createLabel('Loan Date');
  var appDateTextbox = app.createDateBox().setWidth('150px').setName('date');
  var lienPostition = app.createLabel('Lien Position');
  var lienPos = app.createListBox().setName('Lien Position').setWidth('150px').setName('LienPosition');
      lienPos.addItem('Select Option');     
      lienPos.addItem('1st');
      lienPos.addItem('2nd');
  var propertyType = app.createLabel('Property Type');
  var propType = app.createListBox().setName('Property Type').setWidth('150px').setName('PropertyType');
      propType.addItem('Select Option');
      propType.addItem('1-4');
      propType.addItem('Manufactured');
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('<B>PLEASE WAIT WHILE DATA IS UPLOADING<B>').setStyleAttribute('background','yellow').setVisible(false)
  //file upload
  var upLoadTypeLabel = app.createLabel('File Upload');
  var upLoad = (app.createFileUpload().setName('thefile'));

  //Grid layout of items on form
  grid.setWidget(0, 0, loanTypeLabel)
      .setWidget(0, 1, loanList)
      .setWidget(1, 0, borrowerNameLabel)
      .setWidget(1, 1, borrowerTextbox)
      .setWidget(2, 0, loanAmountLabel)
      .setWidget(2, 1, loanAmountTextbox)
      .setWidget(3, 0, appDateLabel)
      .setWidget(3, 1, appDateTextbox)
      .setWidget(4, 0, lienPostition)
      .setWidget(4, 1, lienPos)
      .setWidget(5, 0, propertyType)
      .setWidget(5, 1, propType)
      .setWidget(6, 0, upLoadTypeLabel)
      .setWidget(6, 1, upLoad)
      .setWidget(7, 0, submitButton)
      .setWidget(7, 1, warning)

  var cliHandler = app.createClientHandler().forTargets(warning).setVisible(true)
  submitButton.addClickHandler(cliHandler);  
  panel.add(grid);
  app.add(panel);
  return app;

}

 function doPost(e) {
  var app = UiApp.getActiveApplication();
  var LoanType = e.parameter.LoanType;
  var borrower = e.parameter.borrower;
  var amount = e.parameter.amount;
  var date = e.parameter.date;
  var LienPosition = e.parameter.LienPosition;
  var PropertyType = e.parameter.PropertyType;
  //app.getElementById('info').setVisible(true).setStyleAttribute('color','red');

  var sheet = SpreadsheetApp.openById(submissionSSKey).getActiveSheet();
  var lastRow = sheet.getLastRow();
  var targetRange = sheet.getRange(lastRow+1, 1, 1, 6).setValues([[LoanType,borrower,amount,date,LienPosition,PropertyType]]);
   // data returned is a blob for FileUpload widget
   var fileBlob = e.parameter.thefile;
   var doc = DocsList.createFile(fileBlob);
   return app
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T06:40:50.023

您必须将面板放入 formPanel，使用 submitButton 并在单个 doPost 函数中获取所有结果。无需在此上下文中定义处理程序或任何回调元素，因此您应该删除它们以避免冲突。

如果您查看作为参考显示的简单示例，您将看到表单提交必须采用的结构。我知道它也可以按照您的方式工作，但不适用于文件上传...

这是您的工作代码：我做了一些更改...[可在此处测试](https://script.google.com/macros/s/AKfycbxK43j2mKbOW-KJ3kHHuYGuTrtjyGXECuGeIp8FPrPPZHbe4tk/exec)

1.  将日期的文本框更改为日期框
2.  添加了一个客户端处理程序以在文件上传时显示警告，因为如果文件很大，这可能需要一段时间；-)

对不起，系统有问题，我无法正确格式化代码，我会再做一个答案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:31:37.000

我已经弄清楚如何将文件上传附加到网格并显示，允许文件选择和将数据值提交到电子表格。它不会将选择文件上传到我的驱动器。

我在下面发布更新的代码。关于为什么不将文件发布到我的驱动器的任何想法？

```
// Script-as-app template.
var submissionSSKey = 'Spreadsheet Key';

function doGet(e) {
  var app = UiApp.createApp ication().setTitle('Loan Registration Processing');
  var panel = app.createVerticalPanel();
  var grid = app.createGrid(8,2).setId('loanGrid');
  var loanTypeLabel = app.createLabel('Loan Type');
  var loanList = app.createListBox().setName('Loan List').setWidth('120px').setName('LoanType');
      loanList.addItem('Select Option');    
      loanList.addItem('FHA');
      loanList.addItem('Convential');  
      loanList.addItem('VA');
      loanList.addItem('Reverse');
      loanList.addItem('HELOC');
  var borrowerNameLabel = app.createLabel("Borrower's Name");
  var borrowerTextbox = app.createTextBox().setWidth('150px').setName('borrower');
  var loanAmountLabel = app.createLabel('Loan Amount');
  var loanAmountTextbox = app.createTextBox().setWidth('150px').setName('amount');
  var appDateLabel = app.createLabel('Loan Date');
  var appDateTextbox = app.createTextBox().setWidth('150px').setName('date');
  var lienPostition = app.createLabel('Lien Position');
  var lienPos = app.createListBox().setName('Lien Position').setWidth('150px').setName('LienPosition');
      lienPos.addItem('Select Option');     
      lienPos.addItem('1st');
      lienPos.addItem('2nd');
  var propertyType = app.createLabel('Property Type');
  var propType = app.createListBox().setName('Property Type').setWidth('150px').setName('PropertyType');
      propType.addItem('Select Option');
      propType.addItem('1-4');
      propType.addItem('Manufactured');
  var submitButton = app.createButton('Submit'); 

  //file upload
  var upLoadTypeLabel = app.createLabel('File Upload');
  var upLoad = (app.createFileUpload().setName('thefile'));

  //Grid layout of items on form
  grid.setWidget(0, 0, loanTypeLabel)
      .setWidget(0, 1, loanList)
      .setWidget(1, 0, borrowerNameLabel)
      .setWidget(1, 1, borrowerTextbox)
      .setWidget(2, 0, loanAmountLabel)
      .setWidget(2, 1, loanAmountTextbox)
      .setWidget(3, 0, appDateLabel)
      .setWidget(3, 1, appDateTextbox)
      .setWidget(4, 0, lienPostition)
      .setWidget(4, 1, lienPos)
      .setWidget(5, 0, propertyType)
      .setWidget(5, 1, propType)
      .setWidget(6, 0, upLoadTypeLabel)
      .setWidget(6, 1, upLoad)
      .setWidget(7, 0, submitButton)

  //Event Handler
  var handler = app.createServerClickHandler('insertInSS');
  handler.addCallbackElement(panel);
  submitButton.addClickHandler(handler);  
  panel.add(grid);
  app.add(panel);
  return app;

}
//Function to insert data in the sheet on clicking the submit button
function insertInSS(e){
  var app = UiApp.getActiveApplication();
  var LoanType = e.parameter.LoanType;
  var borrower = e.parameter.borrower;
  var amount = e.parameter.amount;
  var date = e.parameter.date;
  var LienPosition = e.parameter.LienPosition;
  var PropertyType = e.parameter.PropertyType;
  //app.getElementById('info').setVisible(true).setStyleAttribute('color','red');

  var sheet = SpreadsheetApp.openById(submissionSSKey).getActiveSheet();
  var lastRow = sheet.getLastRow();
  var targetRange = sheet.getRange(lastRow+1, 1, 1, 6).setValues([[LoanType,borrower,amount,date,LienPosition,PropertyType]]);
  return app;
}

 function doPost(e) {
   // data returned is a blob for FileUpload widget
   var fileBlob = e.parameter.thefile;
   var doc = DocsList.createFile(fileBlob);
 } 
```

# line-breaks - 当用户在他们的帖子中点击返回键时，Craigslist 和其他人如何插入？

> ID：15261248
> 
> 赞同：0
> 
> 时间：2013-03-07T01:05:32.230
> 
> 标签：line-breaks, craigslist

当我向 Craigslist 发布内容或选择其他网站时，我会按两次返回键以开始新段落。我不需要手动插入换行元素。Craigslist 的代码可以将回车键的双击识别为新段落的开头，并为我插入中断元素。

他们是怎么做到的？想创建一个网站，允许非技术用户在不使用 html 的情况下提交多段条目。没有成功在网上找到任何东西。如果有人能指出我正确的方向，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:09:29.777

我想他们会使用类似的东西 `nl2br()`

[http://www.php.net/manual/en/function.nl2br.php](http://www.php.net/manual/en/function.nl2br.php)

# bash - 如果多个 IF 为空，请执行某些操作

> ID：15261249
> 
> 赞同：1
> 
> 时间：2013-03-07T01:05:33.493
> 
> 标签：bash, if-statement

我正在寻找解决方案的建议以及处理确定多个 IF 是否为空的最佳方法。

我有：

```
if [ -n "$sfcompname" ]; then
        echo $sfcompname
fi
if [ -n "$sfcompip" ]; then
        echo $sfcompip
fi
if [ -n "$lacompname" ]; then
        echo $lacompname
fi
if [ -n "$lacompip" ]; then
        echo $lacompip
fi 
```

..我确信可以做得更好，但我目前的主要问题是试图说：

如果（所有这些 IF）= null

echo "请检查您输入的名称，然后重试"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:08:37.860

有点傻，但应该工作

```
if ! [[ ${sfcompname}${sfcompip}${lacompname}${lacompip} ]]
then
  echo "Please check the name you entered and try again"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:07:45.693

您可以为此使用另一个变量，将其初始化为一个值，然后在任何`if`语句触发时进行更改。然后到最后，如果它没有改变，那么你知道他们*都没有*被解雇。这样的事情就足够了：

```
fired=0

if [ -n "$sfcompname" ]; then
    echo $sfcompname
    fired=1
fi
if [ -n "$sfcompip" ]; then
    echo $sfcompip
    fired=1
fi
if [ -n "$lacompname" ]; then
    echo $lacompname
    fired=1
fi
if [ -n "$lacompip" ]; then
    echo $lacompip
    fired=1
fi

if [[ ${fired} -eq 0 ]] ; then
    echo 'None were fired'
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T09:01:15.820

另一种可能性是使用变量检查快捷方式：

```
name="$sfcompname$sfcompip$lacompname$lacompip"        
${name:?"Please check the name you entered and try again"} 
```

如果没有设置任何变量，这将退出程序。该消息是可选的，它覆盖标准的“参数为空或未设置”。

# ruby-on-rails - 如何在 rails rake 任务中将 development_structure.sql 文件导入我的测试数据库？

> ID：15261255
> 
> 赞同：0
> 
> 时间：2013-03-07T01:06:07.520
> 
> 标签：ruby-on-rails, ruby, rake

我正在使用 rails 2.3，并且我已经生成了一个`development_structure.sql`using

```
rake db:test:clone_structure 
```

如何将其导入我的测试数据库？是否有兼容 rails 2.3 的 rake 任务？

我`development_structure.sql`用作我添加到我的存储库中的数据库结构（而不​​是迁移）的参考，因此我想要一种简单的方法来测试不同的数据库结构作为数据库更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:27:41.437

尝试这个：

```
> rake db:test:prepare
Database mydb_test loaded from db/development_structure.sql. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:46:11.193

我认为你可以使用

```
rake db:structure:dump RAILS_ENV=test 
```

更新：我不知道我今天怎么了。你应该使用

```
rake db:setup RAILS_ENV=test 
```

如果我没记错的话，`structure.sql`如果你将 schema_format 设置为 sql

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:50:38.043

也许您想将此 .sql 转换为固定装置？每次进行 rake 测试时都会重新创建数据库

# python - 使用文件中的数据绘制日期和时间（x 轴）与值（y 轴）

> ID：15261260
> 
> 赞同：5
> 
> 时间：2013-03-07T01:06:19.393
> 
> 标签：python, matplotlib

我在文件（.dat）中有数据，格式为

> %dd %mm %yyyy %HH %MM %SS 值

用空格隔开。我想在 x 轴上绘制日、月、年和时间，在 y 轴上绘制值。它应该始终从文件中读取它，因为我有许多非常大的文件需要分析。

我最近的尝试：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from time import gmtime, strftime
date, time, level = np.loadtxt('my_file.txt', unpack=True, usecols = (0,1,2,3), converters={ 0,1: mdates.strpdate2num('%dd/%mm/%YY %HH:%MM')}) #read format of file
# then to plot 
plt.plot_date(x=date, y=level, fmt='%dd/%mm/%YY %HH:%MM') # fmt is changed from r- 
plt.title('title')
plt.ylabel('Waterlevel (m)')
plt.grid(True)
plt.show() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-08T23:09:55.090

如果我正确理解了您的问题，我相信这是一个可能的解决方案：

```
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from datetime import datetime
import numpy as np    

# Converter function
datefunc = lambda x: mdates.date2num(datetime.strptime(x, '%d %m %Y %H %M %S'))

# Read data from 'file.dat'
dates, levels = np.genfromtxt('file.dat',    # Data to be read
                              delimiter=19,  # First column is 19 characters wide
                              converters={0: datefunc}, # Formatting of column 0
                              dtype=float,   # All values are floats
                              unpack=True)   # Unpack to several variables

fig = plt.figure()
ax = fig.add_subplot(111)

# Configure x-ticks
ax.set_xticks(dates) # Tickmark + label at every plotted point
ax.xaxis.set_major_formatter(mdates.DateFormatter('%d/%m/%Y %H:%M'))

ax.plot_date(dates, levels, ls='-', marker='o')
ax.set_title('title')
ax.set_ylabel('Waterlevel (m)')
ax.grid(True)

# Format the x-axis for dates (label formatting, rotation)
fig.autofmt_xdate(rotation=45)
fig.tight_layout()

fig.show() 
```

`file.dat`例如_

```
01 06 2013 00 00 00 24.23
02 06 2013 01 00 00 22.23
03 06 2013 02 00 00 21.43
04 06 2013 03 00 00 24.32
04 06 2013 14 30 00 23.42
06 06 2013 03 00 00 24.32
07 06 2013 19 20 00 23.54
08 06 2013 03 00 00 26.23
08 06 2013 19 00 00 24.43
10 06 2013 12 40 00 23.22 
```

输出变成这样： ![在此处输入图像描述](../Images/83ff792fbd924c0e157d3ea0a18a679f.png)

# haskell - Haskell 中的动态编程

> ID：15261263
> 
> 赞同：0
> 
> 时间：2013-03-07T01:06:29.753
> 
> 标签：haskell, dynamic-programming

Haskell 是否提供任何用于动态编程的工具？在过程语言中，我会使用一个数组来存储基于递归关系的计算。我如何在 Haskell 中做类似的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T06:02:39.293

Many different ways depending on the situation. That said, often simple dynamic programming algorithms are far simpler in Haskell than in other languages because of Haskelll is lazy

Consider the Fibonacci function (the "Hello World" of functional programming)

```
fib n | n < 2 = 1
fib n | otherwise = fib (n-1) + fib (n-2) 
```

this runs in exponential time (grr). We could trivially store all the values of fib in a lazy infinitely long list

```
fibs = map fib [0..] 
```

now we can observe that

```
fibs !! n
 = (map fib [0..]) !! n =
 = fib ([0..] !! n)
 = fib n 
```

so far this doesn't help us, but we can use this equivalence to our advantage

```
fib n | n < 2 = 1
fib n | otherwise = (fibs !! (n-1)) + (fibs !! (n-2)) where
  fibs = map fib [0..] 
```

this provides a linear time solution to the Fibonacci function (although it leaks space...don't actually do it this way), and only works because Haskell is lazy. We defined an infinite data-structure in terms of a recurrence relation on itself. The miracle is that this runs in finite time (non strictness), that it runs in linear time is a product of the time optimality of call-by-need (Haskell's cost model). The reason for this linear time performance is that each entry in `fibs` is computed at most once (or possibly never).

# jquery - IE8 和 ealier 不会停止使用 javascript 输入非英文（如韩文、中文或日文）字符

> ID：15261269
> 
> 赞同：1
> 
> 时间：2013-03-07T01:06:45.887
> 
> 标签：jquery, internet-explorer-8, ime

我正在使用下面的 jquery。

```
$(document).ready(function () {
    $("#myTextBox").keydown(function () {
        return false;
        (Or when keypress) event.preventDefault();
    });
}); 
```

它适用于 IE 6-9、Chrome 中的英文 IME 模式。它停止用户在文本框中输入。但它不适用于 IE 6、7 和 8 中的韩语 IME 模式。但它适用于 IE 9。我没有用日语或中文测试，但我认为它会是一样的。

我需要做的是阻止用户在某些文本框中输入韩语字符。有谁知道为什么会在 IE 6-8 中发生这种情况？

**编辑** 根据 Fresheyeball 的想法，我得出了这个结果。

```
var korean = /[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF\uFFA1-\uFFFF]/g;
var chinese = /[\u4E00-\u62FF\u6300-\u77FF\u7800-\u8CFF\u8D00-\u9FFF]/g;
var japanese = /[\u3040-\u309F\u1B000-\u1B0FF\u30A0-\u30FF\u31F0-\u31FF\u1B000-\u1B0FF]/g;

<!--
// Korean - http://en.wikipedia.org/wiki/Hangul
U+AC00-U+D7AF
U+1100-U+11FF
U+3130-U+318F
U+A960-U+A97F
U+D7B0-U+D7FF
U+FFA1-U+FFFF

// Chinese - http://en.wikipedia.org/wiki/CJK_Unified_Ideographs
U+4E00-U+62FF
U+6300-U+77FF
U+7800-U+8CFF
U+8D00-U+9FFF

// Japanese(hiragana) - http://en.wikipedia.org/wiki/Hiragana
U+3040-U+309F
U+1B000-U+1B0FF

// Japanese(katakana) - http://en.wikipedia.org/wiki/Katakana
U+30A0-U+30FF
U+31F0-U+31FF
U+1B000-U+1B0FF
-->

$("#Text2").val($("#Text1").val().replace(korean, "")); 
```

但是，仍有一些错误需要修复。因为韩文、日文或中文中的一个字符，它不是整个字符。它仍在等待下一个角色命中。字母“A”只是“A”，它已完成输入。但KJC与那些有点不同。我想我可以解决这个问题。再次感谢 Fresheyeball。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:42:20.907

您还可以创建字符白名单并使用正则表达式进行验证：

```
 $('#myTextBox').keyup(function(){
      val = $(this).val();
      // use regex to determine if all the characters entered so far are valid
      // and remove invalid ones
      val = val.replace(/[\{rangeStart}-\{rangeStop}]/g, '');
      $(this).val(val);
  }); 
```

仅供参考，我对正则表达式不是很好，所以我的语法可能不正确。但从理论上讲，您应该能够使用正则表达式来测试 ascii 集的范围和单个 ascii 字符。

[http://www.javascriptkit.com/jsref/regexp.shtml](http://www.javascriptkit.com/jsref/regexp.shtml)参见 ascii 文字部分

# c++ - 从在 IIS 下运行的具有 Multipile 用户的 ActiveX DLL 调用时，C++ DLL 崩溃

> ID：15261274
> 
> 赞同：0
> 
> 时间：2013-03-07T01:07:28.313
> 
> 标签：c++, dll, iis-7, vb6, activex

我有一个项目，其中用 VB6 编写的 ActiveX DLL 正在调用 C++ DLL。ActiveX DLL 通过 IIS 7 通过 ASP“CreateObject”调用加载。

当只有一个 Web 用户访问该站点时，一切都运行良好（经过数千次迭代测试）。一旦 2 个或更多并发用户访问该站点，1 个或多个用户会话就会崩溃（通常会出现 500 错误）？

我怀疑这可能是由于 C++ DLL 不是正确的线程安全的，所以我使用全局互斥锁重写了它以限制访问。这没有效果。

老实说，因为 VB6 ActiveX DLL 的每个实例都在单线程单元中运行，所以我本来希望这不是问题？

任何人都可以阐明这里可能发生的事情吗？我怀疑我真的不明白当 IIS 加载多个 VB6 ActiveX DLL 实例时会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:45:47.230

ActiveX DLL 可以是单线程模型或单线程单元模型： ![单线程](../Images/4b13813cc4f5344a8c32af5444ae16ad.png)

![公寓螺纹](../Images/2d95a8440ebb85a4411b99698f5f08b7.png)

您是否编写了 ActiveX DLL？你能确定它的线程模型吗？

此外，您可能希望启用调试以查看是否可以在 Visual Studio 中捕获错误：http: [//www.falconwebtech.com/post/2010/12/28/Debugging-Classic-ASP-in-IIS7-and -VS2010.aspx](http://www.falconwebtech.com/post/2010/12/28/Debugging-Classic-ASP-in-IIS7-and-VS2010.aspx)

启用调试后，ASP 仅限于以单线程方式一次处理一个请求。因此，如果调试时没有发生错误，那么 ActiveX DLL 很可能是单线程的，而不是单元线程的。

另外，您知道设置[AspExecuteInMTA](http://msdn.microsoft.com/en-us/library/ms524510%28v=vs.90%29.aspx)吗？您可能需要检查它是否无意中设置为 true。

# google-chrome - 让谷歌浏览器不理会自己

> ID：15261278
> 
> 赞同：0
> 
> 时间：2013-03-07T01:07:45.670
> 
> 标签：google-chrome

让我先说这个问题：**这太疯狂了。我知道它是。**但这个要求不是我的，是别人的，我正在努力兑现它。

我需要安装[过期数月的 Google Chrome 浏览器](http://www.oldapps.com/index.php/google_chrome.php)，这样我就可以对其进行重复测试。但事实证明，关闭 Chrome 更新非常困难。

我做了禁用 chrome://plugins 中的“Google Update”插件的技巧。之后，我卸载了 Chrome 并安装了旧版本。我仔细检查了该版本是否为旧版本，并且更新无效（“错误 3”）。在此之后，我什至根本没有在 chrome://plugins 中看到“Google 更新”。所以我觉得我很好。

然后刚才，我打开Chrome再看一遍，又回到了最新版本！

有什么我忽略的吗？他们在这里做某种黑魔法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:18:39.053

## 视窗

对于 Microsoft Windows，这是我找到的最简单且影响最小的解决方案。

使用这些行创建一个文本文件：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Google\Update]
"AutoUpdateCheckPeriodMinutes"=dword:00000000
"UpdateDefault"=dword:00000000 
```

将其保存到桌面某处以“.reg”结尾的文件中。双击它以安装新的注册表项。

这会禁用自动更新，当您从工具菜单中打开“关于 Google Chrome”时，您会收到有用的消息“管理员已禁用更新”。

## 苹果电脑

（任何人可能想为 Mac OS 添加的说明都可以在这里...）

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-07T13:55:47.237

1.  不要这样做。
2.  真的。我不是在开玩笑。更新很重要。
3.  见#1。
4.  你还在这里，所以我只能假设你已经疯到真的想要关闭更新： http: [//support.google.com/installer/bin/answer.py](http://support.google.com/installer/bin/answer.py?hl=en&answer=146164) ?hl=en&answer=146164解释了如何您可以通过策略禁用更新。在本地编辑注册表项应该是有效的。

# checkbox - 复选框的 Dojo 状态转换

> ID：15261282
> 
> 赞同：0
> 
> 时间：2013-03-07T01:08:16.533
> 
> 标签：checkbox, dojo, stateful

所以对于 dijit/form/CheckBox，value 要么是一个字符串，要么是 true，要么是 false。这会导致我的数据源中的 Y/N 值出现问题。我试过做一个复选框子类来覆盖 _setValueAttr 和 _getValueAttr 以正确返回/设置 Y/N 但没有运气。

我还考虑将我的 mvc“at”函数与转换链接以转换数据，但显然这只适用于具有格式/解析功能的小部件（复选框不适用）。

那么，我还能如何将复选框链接到我的有状态复选框，其中 Y 表示选中，N 表示未选中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:02:36.540

如果您制作了自己的复选框，扩展了标准复选框并使其具有状态，那么您可以覆盖 _valueGetter 和 _valueSetter 函数来进行映射 Y/N - true/false

通常这应该足够了，但在小部件函数调用 this.get("value"); 的情况下是危险的。

# php - 使用 HTML 表单和 php

> ID：15261284
> 
> 赞同：-2
> 
> 时间：2013-03-07T01:08:18.623
> 
> 标签：php, html, forms, math

我正在制作一个类似计算器的 Web 应用程序，它询问用户名，然后在下一页显示他们的名字并添加他们的分数。我有三个问题：

1.  用户名不会显示在第二页上
2.  不会加分
3.  每当您为玩家 1 输入分数时，玩家 2 的分数将重置为零，并且 vise-versia

您可以访问该页面：ripdvd.x10.mx/index.php 提前致谢！

第一页：

```
<!DOCTYPE html>

<html>

<head>
<title>Select Players</title>
<link rel=StyleSheet href="style.css" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
    <form method="post" action="scoregen.php">
    <p class="par">
        <label for="player1">Please type in the one of the players first name:</label>
            <input type="text" id="player1" name="player1" size="17"  maxlength="17" class="textbox" />
    </p>

    <p class="par">
        <label for="player2">Please type in another players first name:</label>
            <input type="text" id="player2" name="player2" size="17"  maxlength="17" class="textbox" />
    </p>
        <input type="submit" class="button" name="button" value="Start Playing!" />

    </form>

</body>

</html> 
```

第二页（显示分数并提供更新它们的方法）

```
<?php
// Get data from HTML form.
//Gets the player names
$player1 = $_POST['player1'];
$player2 = $_POST['player2'];

$addScore1 = $_POST['addScore1'];
$addScore2 = $_POST['addScore2'];

$oldScore1 = $_POST['oldScore1'];
$oldScore2 = $_POST['oldScore2'];

$curr1=$_COOKIE["score1"]+$addScore1;
$curr2=$_COOKIE["score2"]+$addScore2;
setcookie("score1", $_COOKIE["score1"]+$addScore1, time()+3600);
setcookie("score2", $_COOKIE["score2"]+$addScore2, time()+3600);

//Reset cookies if reset button is 't', which makes it clear scores
if ($clse = t){
setcookie ("score1", "", time() - 3600);
setcookie ("score2", "", time() - 3600);
}

// Generate HTML form
?>
<!DOCTYPE HTML>
<html>
    <head>
        <title>Score Add</title>
        <link rel=StyleSheet href="style.css" type="text/css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>

    <body>
    <form method="post" action=" ">

     <p class="par">
            <label for="addScore1">Enter your score, <?php echo $player1; ?>:</label>
            <input type="text" name="addScore1" id="addScore1" class="textbox" />
            <input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $oldscore1; ?>" />
        <input type="submit" class="button" value="Add Score!" />
    </p>

    <p class="par">
        <label for="addScore2">Enter your score, <?php echo $player2; ?>:</label>
        <input type="text" name="addScore2" id="addScore2" class="textbox"/>
        <input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $oldscore2; ?>" />
        <input type="submit" class="button" value="Add Score!"/>
        </form>
         </p>

         <form method="post" action=" ">
         <input type="hidden" name="clsc" id="clsc" value="t" />
         <input type="submit" class="reset" value="Clear Scores" />
         </form>
<!--Shows player and score-->
    <p class="par"><?php echo $player1;?>:<?php echo $curr1?></p>
    <p class="par"><?php echo $player2;?>:<?php echo $curr2?></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:23:56.243

我对您的代码进行了几处更改（包括删除 cookie - 希望没关系）。如果你可以不吃饼干，试试这个：

```
<?php
// Get data from HTML form.
// Gets the player names
$player1 = $_POST['player1'];
$player2 = $_POST['player2'];

if ($_POST['addScore1'] == null)
    $addScore1 = 0;
else
    $addScore1 = $_POST['addScore1'];

if ($_POST['addScore2'] == null)
    $addScore2 = 0;
else
    $addScore2 = $_POST['addScore2'];

if ($_POST['oldScore1'] == null)
    $oldScore1 = 0;
else
    $oldScore1 = $_POST['oldScore1'];

if ($_POST['oldScore2'] == null)
    $oldScore1 = 0;
else
    $oldScore2 = $_POST['oldScore2'];

$curr1=$oldScore1+$addScore1;
$curr2=$oldScore2+$addScore2;

if ($_POST['clse'] == "t"){
    $curr1 = 0;
    $curr2 = 0;
}

// Generate HTML form
?>
<!DOCTYPE HTML>
<html>
    <head>
        <title>Score Add</title>
        <link rel=StyleSheet href="style.css" type="text/css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>

    <body>
        <form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
            <p class="par">
                <label for="addScore1">Enter your score, <?php echo $player1; ?>:</label>
                <input type="text" name="addScore1" id="addScore1" class="textbox" />
                <input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $curr1; ?>" />
                <input type="submit" class="button" value="Add Score!" />
            </p>
            <p class="par">
                <label for="addScore2">Enter your score, <?php echo $player2; ?>:</label>
                <input type="text" name="addScore2" id="addScore2" class="textbox"/>
                <input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $curr2; ?>" />
                <input type="submit" class="button" value="Add Score!"/>
            </p>
            <input type="hidden" name="player1" value="<?PHP echo $player1;?>" />
            <input type="hidden" name="player2" value="<?PHP echo $player2;?>" />
        </form>

        <form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
            <input type="hidden" name="clsc" id="clsc" value="t" />
            <input type="submit" class="reset" value="Clear Scores" />
        </form>

        <!--Shows player and score-->
        <p class="par"><?php echo $player1;?>:<?php echo $curr1?></p>
        <p class="par"><?php echo $player2;?>:<?php echo $curr2?></p>
    </body>
</html> 
```

请注意，我实际上并没有运行它，但请尝试一下，如果您遇到任何错误或仍有问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:41:01.277

试试这个：

索引.php

```
 <!DOCTYPE html>

<html>

<head>
<title>Select Players</title>
<link rel=StyleSheet href="style.css" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
    <form method="post" action="scoregen.php">
    <p class="par">
        <label for="player1">Please type in the one of the players first name:</label>
            <input type="text" id="player1" name="player1" size="17"  maxlength="17" class="textbox" />
    </p>

    <p class="par">
        <label for="player2">Please type in another players first name:</label>
            <input type="text" id="player2" name="player2" size="17"  maxlength="17" class="textbox" />
    </p>
        <input type="submit" class="button" name="names" value="Start Playing!" />

    </form>

</body>

</html> 
```

scoregen.php

```
<?php
    // Get data from HTML form.
    //Gets the player names
    if(isset($_POST['player1'])){
        $player1 = $_POST['player1'];
    }else{
        $player1 = "No Player"; 
    }   

    if(isset($_POST['player2'])){
        $player2 = $_POST['player2'];
    }else{
        $player2 = "No Player"; 
    }   

    //CHECKS IF THE ADDSCORE BUTTON IS HIT
    if(isset($_POST['AddScore'])){  
        $oldScore1 = $_POST['oldScore1'];
        $oldScore2 = $_POST['oldScore2'];

        if(!empty($_POST['addScore1'])){
            $addScore1 = $_POST['addScore1'];
        }else{
            $addScore1 = 0;
        }

        if(!empty($_POST['addScore2'])){
            $addScore2 = $_POST['addScore2'];
        }else{
            $addScore2 = 0;
        }

    }else{//INITIALIZES THE SCORES TO ZERO; OR SETS IT TO ZERO IF THE CLEAR SCORES BUTTON IS HIT
        $oldScore1 = 0;
        $oldScore2 = 0;
        $addScore1 = 0;
        $addScore2 = 0;

    }

    $curr1 = $oldScore1 + $addScore1;
    $curr2 = $oldScore2 + $addScore2;

    // Generate HTML form
    ?>
    <!DOCTYPE HTML>
    <html>
        <head>
            <title>Score Add</title>
            <link rel=StyleSheet href="style.css" type="text/css">
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        </head>

        <body>
        <form method="post" action=" ">

         <p class="par">
                <label for="addScore1">Enter your score, <?php echo $player1; ?>:</label>
                <input type="text" name="addScore1" id="addScore1" class="textbox" />

                <input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $curr1; ?>" />
            <input type="submit" name="AddScore" class="button" value="Add Score!" />
        </p>

        <p class="par">
            <label for="addScore2">Enter your score, <?php echo $player2; ?>:</label>
            <input type="text" name="addScore2" id="addScore2" class="textbox"/>

            <input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $curr2; ?>" />
            <input type="submit" name="AddScore" class="button" value="Add Score!"/>       
        </p>
                <input type="hidden" name="player1" value="<?php echo $player1;?>"/>
                <input type="hidden" name="player2" value="<?php echo $player2;?>"/>
        <p class="par">
              <input type="submit" class="reset" value="Clear Scores" />
        </p>

        </form>
    <!--Shows player and score-->
        <p class="par"><?php echo $player1;?>:<?php echo $curr1?></p>
        <p class="par"><?php echo $player2;?>:<?php echo $curr2?></p>
        </body>
    </html> 
```

1）我在这里没有使用cookies，你实际上不需要它来记录分数，你可以用它来保存用户名。

2) 你实际上可以只有一个 addScore 按钮，但在这段代码中它并不重要。无论如何它都会添加分数。

3）我总是检查是否设置了 POST 的一个元素或者它是否有一个值。所以我检查了分数和名字。

4）在您的代码的这一行中： `<input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $oldscore2; ?>" />` 我将 更改`$oldscore`为`$curr`，因为在下一次提交中需要 $curr 分数作为 oldscore ，因此分数会加起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:22:15.760

`$oldScore1`不相等`$oldscore1`

并且无论如何您都需要保留**新**值以发布到下一页

```
<input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $curr1; ?>" />
<input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $curr2; ?>" /> 
```

放下饼干，然后使用

```
$curr1=$oldScore1+$addScore1;
$curr2=$oldScore2+$addScore2; 
```

检查帖子是否设置为避免警告也是值得的，并确保它们是整数，例如

```
$oldScore1 = isset($_POST['oldScore1'])? (int)$_POST['oldScore1'] : 0;    
$oldScore2 = isset($_POST['oldScore2'])? (int)$_POST['oldScore2'] : 0; 
```

# python - Django Forms：如果选中布尔字段，则禁用字段

> ID：15261286
> 
> 赞同：5
> 
> 时间：2013-03-07T01:08:27.883
> 
> 标签：python, django, django-forms

这是我的表单的定义：

```
class WorkflowForm(forms.Form):   
    new_user = forms.BooleanField(required=False)
    user = ModelChoiceField(queryset=User.objects.all())
    description = forms.CharField(required=False, widget=forms.Textarea) 
```

*如果选中new_user*字段，我想禁用*用户*ModelChoiceField 。

 *那么是否可以在此类中定义一个字段对另一个字段的依赖关系，例如在我的情况下，modelchoicefield 依赖于是否检查了布尔字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:18:49.890

这是一个快速简单的，

```
<p>label for="id_new_user">New user:</label>
   <input type="checkbox" name="new_user" id="id_new_user" 
        onclick="javascript:toggleDiv('user_choice');" checked/></p> 

<p id="user_choice" style="display:none">        
    <label for="id_user">User:</label> 
    <select name="user" id="id_user">
        <option value="" selected="selected">---------</option>
        <option value="1">sam</option>
        <option value="2">usertest</option>
    </select> 
```

**表格.py**

```
class WorkflowForm(forms.Form):   
    new_user = forms.BooleanField(required=False, initial=True)
    user = ModelChoiceField(queryset=User.objects.all())
    description = forms.CharField(required=False, widget=forms.Textarea)

    def __init__(self, user, *args, **kwargs):
        super(WorkflowForm, self).__init__(*args, **kwargs)
        self.fields['user'].queryset = User.objects.all()
        self.fields['user'].widget.attrs['style'] = 'display:none'
        self.fields['user'].widget.attrs['id'] = 'user_choice'
        self.fields['new_user'].widget.attrs['onclick'] = "javascript:toggleDiv('user_choice');" 
```

**模板**

```
{{form.as_p}}

<script>
function toggleDiv(divId) {
    $("#"+divId).toggle(500);
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:24:31.083

由于您的表单不是 ModelForm，我假设您的意思是客户端：如果用户选中*新用户*复选框，则*用户*字段将被禁用。

你不能在 Python 端这样做，因为这一切都发生在浏览器中，而不是在服务器上。您需要使用 javascript。使用 jQuery 的示例：

```
 $(function() {
        $('#check').click(function() {
            var disable = $(this).is(':checked');
            $('#choice').attr('disabled', disable);
        });
    }); 
```

祝你好运。*

# python - 将点几何转换为列表

> ID：15261287
> 
> 赞同：1
> 
> 时间：2013-03-07T01:08:31.647
> 
> 标签：python, geometry, tuples, gdal, ogr

我有以下创建点几何的脚本。如何将此点几何转换为仅包含坐标的列表`[258432.79138201929, 1001957.4394514663]`？

```
>>> import ogr
>>> driver = ogr.GetDriverByName('ESRI Shapefile')
>>> pointshp = driver.Open('U:/My Documents/Tool/shp/point.shp', 0)

>>> pointlyr = pointshp.GetLayer()

>>> point_geom = point.GetGeometryRef()

>>> print point_geom

POINT (258432.79138201929 1001957.4394514663) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T04:28:22.240

通常一个点对象有 xyz 坐标。

```
[point_geom.x, point_geom.y] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:43:53.183

假设 point_geom 是字面意思`"POINT (258432.79138201929 1001957.4394514663)"`（即字符串）

你可以做：

```
map(float,point_geom[7:-1].split(' ')) 
```

`point_geom[7:-1]``"258432.79138201929 1001957.4394514663"` `point_geom[7:-1].split(' ')`Give将字符串强制转换为`['258432.79138201929', '1001957.4394514663']` `map(float,point_geom[7:-1].split(' '))`浮点数

# git - git new branch from commit 没有正确检出代码

> ID：15261291
> 
> 赞同：1
> 
> 时间：2013-03-07T01:08:54.943
> 
> 标签：git, git-branch

我有一个仓库，我的主人有很多提交......我想从第一次提交（原始代码）创建一个新的新分支，所以我执行以下操作：

`git checkout -b mybranch 4589D6a09505837ec03b`

第一个提交 ID在哪里`4589D6a09505837ec03b`...一切似乎都很好，现在我在`mybranch`. 但我看代码，它和我的完全一样`master`！我什至从新的签出分支运行我的服务器，它看起来与`master`. 也许id有问题..我怎么能要求github从master那里提取第一个提交？

**已编辑：**我可以从远程仓库的主分支执行此操作吗？只需将该代码分支到我的本地存储库中。我不想为它重新创建一个仓库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:18:14.383

你想做的是：

```
git checkout 4589D6a09505837ec03b
git checkout -b mybranch 
```

~~从[git checkout 的手册页中](https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)，当您将提交 id 放在放置它的位置时，您正在做的是告诉 git 从哪里*开始*存储库，而不是从哪里结束它，这就是我认为你是想做。（如果我的假设有误，请告诉我。）~~

编辑：这些命令与原始问题具有相同的行为。

# javascript - Jquery，插件未识别/调用

> ID：15261294
> 
> 赞同：2
> 
> 时间：2013-03-07T01:09:00.293
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, datatables

我正在尝试编写我的自定义插件（并弄清楚它们是如何工作的），用于对数据进行排序。问题是当我在数据表初始化中设置 sType 时，插件没有被识别/调用。

我只是将第一列设为可排序。

以下是代码：

插件文件

```
/**
 * Custom sort file name jquery.ui.customsort.js
 */

(function($) {
  jQuery.fn.dataTableExt.oSort['string-case-asc']  = function(x,y) {
     return ((x < y) ? -1 : ((x > y) ?  1 : 0));
  };
  jQuery.fn.dataTableExt.oSort['string-case-desc'] = function(x,y) {
      return ((x < y) ?  1 : ((x > y) ? -1 : 0));
  };
})(jQuery); 
```

初始化数据表的java脚本是：

```
/**
 * Initialization the data table
 */

  var oSortTable=null;
  $(function() {

/*Creating the html for the table with id 'sort_table'*/
var sorttablehtml = "<table id='sort_table'><thead><tr><th>FirstName</th>  <th>FamilyName</th></tr></thead><tbody>";
sorttablehtml +='<tr class="contactnamedetail"><td>New York</td><td>United States</td></tr>';
sorttablehtml +='<tr class="contactnamedetail"><td>Paris</td><td>Paris</td></tr>';
sorttablehtml +='<tr class="contactnamedetail"><td>Sydney</td><td>Australia</td></tr>';
sorttablehtml +='<tr class="contactnamedetail"><td>Berlin</td><td>Germany</td></tr>';
sorttablehtml +="</tbody></table>"; 

$('#sortingtable').html(sorttablehtml);
/*converting the table to datatable*/
oSortTable=$('#sort_table').dataTable({
      "aoColumns": [ 
                    { "sType": "string-case"},
                    { "bSortable": false }//Disable sorting on this column

                    ]
  });
}); 
```

我错过了一些我无法弄清楚的东西。在这方面的任何帮助将不胜感激。

控制台中的错误是：

```
 Timestamp: 3/7/2013 12:52:11 PM
 Error: TypeError: jQuery.fn.dataTableExt is undefined
 Source File: http://myorg:8080/jqueryproject/javascript/jquery/development-bundle/ui/jquery.ui.customsort.js
 Line: 6

 Timestamp: 3/7/2013 12:55:33 PM
 Error: TypeError: oCol is undefined
 Source File: http://myorg:8080/jqueryproject/javascript/datatables/media/js/jquery.dataTables.js
 Line: 784 
```

获取文件的顺序是：

```
<!-- Jquery files used for various plugins and widgets -->
<link type="text/css" href="/jqueryproject/javascript/jquery/development-bundle/themes /base/jquery.ui.all.css" rel="Stylesheet" />
<link type="text/css" href="/jqueryproject/javascript/jquery/development-bundle/demos /demos.css" rel="Stylesheet" />

<script type="text/javascript"  src="/jqueryproject/javascript/jquery/js/jquery- 1.7.2.min.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development- bundle/ui/jquery.ui.core.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development- bundle/ui/jquery.ui.widget.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development-bundle/ui/jquery.ui.datepicker.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development-bundle/ui/jquery.ui.tabs.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development-bundle/ui/jquery.effects.core.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development-bundle/ui/jquery.effects.fade.js"></script>

<script type="text/javascript"  src="/jqueryproject/javascript/datatables/media/js/jquery.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/datatables/media/js/jquery.dataTables.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/datatables/media/js/jquery.jeditable.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/datatables/media/js/jquery.validate.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/datatables/media/js/jquery.dataTables.editable.js"></script>

<link type="text/css" href="/jqueryproject/javascript/datatables/media/css/demo_page.css" rel="Stylesheet" />
<link type="text/css" href="/jqueryproject/javascript/datatables/media/css/demo_table_jui.css" rel="Stylesheet" />
<link type="text/css" href="/jqueryproject/javascript/datatables/media/css/demo_table.css" rel="Stylesheet" />
<link type="text/css" href="/jqueryproject/javascript/datatables/media/css/jquery.dataTables_themeroller.css" rel="Stylesheet" />
<link type="text/css" href="/jqueryproject/javascript/datatables/media/css/jquery.dataTables.css" rel="Stylesheet" />

<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development-bundle/ui/jquery.ui.customsort.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/jquery/development-bundle/ui/jquery.ui.fixedwidth.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/custom/jqueryproject.js"></script>
<script type="text/javascript"  src="/jqueryproject/javascript/custom /sortingtable.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:06:51.973

您以什么顺序加载外部文件？

**您是否在 dataTables .js 文件*之前*添加插件**？如果是这样，那可能是错误的原因。

之前在数据表论坛上也出现过类似的问题： [http ://www.datatables.net/forums/discussion/9661/.fn.datatableext-is-undefined/p1](http://www.datatables.net/forums/discussion/9661/.fn.datatableext-is-undefined/p1)

另外，我试图从您的代码示例中创建一个小提琴，但没有发现任何问题。

[http://jsfiddle.net/r4FBQ/](http://jsfiddle.net/r4FBQ/)

如果您查看小提琴 HTML 的框架源代码，您应该会看到插件代码是如何出现在 dataTables js 文件之后的。

```
<script type='text/javascript' src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
<script type='text/javascript'>
 // your plugin code...
</script> 
```

# concurrency - Redis 响应时间过长

> ID：15261303
> 
> 赞同：5
> 
> 时间：2013-03-07T01:10:36.797
> 
> 标签：concurrency, resources, redis, cpu-usage, server-load

`info`Redis 的响应延迟非常高，以至于在使用命令时无法输出信息`redis-cli`。

该服务器处理来自大约 200 个并发进程的请求，但它不存储太多信息（至少据我们所知）。当服务器响应时，该`info`命令会报告大约 20 - 30 MB 的已用内存。

在服务器上运行`top`时，在高响应延迟期间，CPU 使用率徘徊在 95 - 100% 左右。

这种行为的一些可能原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T19:47:47.223

仅根据提供的数据很难提出解释，但这是我的猜测。我想您已经检查了明显的延迟源（与持久性相关的那些），没有 Redis 命令在[慢速日志](http://redis.io/commands/slowlog)中占用 CPU ，并且 Python-rq 腌制的作业数据的大小并不大。

根据文档，Python-rq 将作业作为哈希对象插入到 Redis 中，并让 Redis 使相关键过期（500 秒似乎是默认值）以摆脱作业。如果您有一些严重的吞吐量，那么在某一时刻，您将在 Redis 中有许多项目等待过期。与待处理的工作相比，他们的数量会很高。

[您可以通过查看INFO](http://redis.io/commands/info)命令结果中要过期的项目数来检查这一点。

Redis 过期基于惰性机制（在访问密钥时应用）和基于密钥采样的活动机制，在事件循环中运行（在伪后台模式下，每 100 毫秒）。关键是当主动过期机制运行时，无法处理任何Redis命令。

为避免过多影响客户端应用程序的性能，每次触发活动机制时仅处理有限数量的键（默认情况下，10 个键）。但是，如果发现超过 25% 的密钥过期，它会尝试使更多的密钥和循环过期。这就是这种概率算法自动调整其活动以适应 Redis 必须过期的密钥数量的方式。

当许多密钥要过期时，这种自适应算法会显着影响 Redis 的性能。[您可以在此处](http://redis.io/topics/latency)找到更多信息。

我的建议是尝试通过设置过期时间来阻止 Python-rq 将项目清理委托给 Redis。无论如何，这对于排队系统来说是一个糟糕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:43:18.820

我认为减少 ttl 不应该是 Redis 过期键时避免 CPU 使用的正确方法。

Didier 说得很有道理，Python-rq 的当前架构通过使用 key-expire 功能将清理工作委托给 Redis。当然，就像迪迪埃所说的那样，这不是最好的方法。（这仅在 result_ttl 大于 0 时使用）

然后，当您有一组密钥/作业的到期日期接近另一个时，问题就会出现，并且可以在您创建大量作业时完成。

但是 Python-rq 在一个工作人员完成工作时设置过期键，

那么它就没有太大意义了，因为密钥应该在它们之间有足够的时间分布，以避免这种情况

# java - 处理大量 HttpRequest 的最有效方法

> ID：15261306
> 
> 赞同：1
> 
> 时间：2013-03-07T01:11:13.697
> 
> 标签：java, database, multithreading, networking, httprequest

我有一个相当直截了当的问题，我将执行大量 HTTP 请求来获取 XML 有效负载，我需要解析有效负载并对数据库进行一些更改。

我将非常频繁地执行这些请求，因此任何优化都会很好。

我想知道是否有更有效的方法来处理请求，因为这将花费最多的时间。我正在用 Java 编写它，我使用 SAXParser 来解析 XML 有效负载以获取我需要的数据。我正在为 Http 请求使用 HttpURLConnection 类，我只是运行一个同步的线程并等待每个请求。我尝试同时运行请求，但遇到了一些问题。我将在其上执行此操作的计算机功能非常强大，因此我不会遇到内存或处理问题。所以我的问题是：

1.  获取 XML 有效负载的哈希并将其存储在数据库中或解析 XML 并手动检查数据会更有效吗？
2.  是否有比 HttpURLConnection 更高效的 HttpRequests 库？
3.  可以通过线程化请求进行任何优化吗？

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:28:47.207

> 获取 XML 有效负载的哈希并将其存储在数据库中或解析 XML 并手动检查数据会更有效吗？

为 XML 有效负载计算哈希几乎肯定会比解析它更快。这是检测您是否已经拥有不需要重新解析的有效负载的好方法。

> 是否有比 HttpURLConnection 更高效的 HttpRequests 库？

当然，使用[Apache HttpComponents](http://hc.apache.org/)。[正如这个遗留但仍然相关的文档](http://hc.apache.org/httpclient-legacy/performance.html)中强调的那样，有几种方法可以调整它的性能。

> 可以通过线程化请求进行任何优化吗？

与所有与线程相关的事物一样，这将取决于几个因素，包括您的硬件配置（尤其是您的网络硬件）。从理论上讲，您应该从多线程中获得*一些好处。*我不会把它作为调优的第一要务。

# c++ - 初始化类成员的有效方法；堆和栈都分配

> ID：15261307
> 
> 赞同：-1
> 
> 时间：2013-03-07T01:11:17.943
> 
> 标签：c++, constructor, dynamic-memory-allocation

假设我们有以下内容：

```
//! SomeClass.hpp
class 
{
public:
    SomeClass( void );

   ~SomeClass( void ) 
    { 
       delete mFoo; 
       delete mBar; 
    }
    ...

private:
    Foo* mFoo;
    Bar* mBar;
    StackObj mStackFoo;
};

//! SomeClass.cpp
SomeClass::SomeClass( void )
{
     mFoo = new Foo;
     mBar = new Bar; 
     mStackFoo = StackObj( ... );
} 
```

现在，当我们初始化指针时，我的理解是构造函数会[创建 SomeClass 成员的不必要副本](http://www.parashift.com/c++-faq/init-lists.html)，因此只是为了分配内存而分配**然后释放内存。**

* * *

通常使用初始化列表，加上一个单独的初始化函数（用于堆分配的内存）作为避免这种情况的方法。Say`SomeClass`有一个私有成员函数，定义为`void initHeapMem( void )`. 那么我们可以这样做，

```
SomeClass::SomeClass( void )
    : mFoo( NULL ),
      mBar( NULL ),
      mStackFoo( ... )
{
     initHeapMem();
}

void SomeClass::initHeapMem( void )
{
    mFoo = new Foo;
    mBar = new Bar;
} 
```

自然，这*在一定程度上*解决了问题。我认为这里的问题是仍然存在另一个正在执行的函数调用的开销。

我们不能对原始指针使用初始化列表的原因是它们**不是线程安全**的。如果出现问题，程序抛出异常，仍然会出现内存泄漏。**注意：这是根据我所阅读的内容，如果这是错误的，我深表歉意**。

* * *

因此，使用 boost/C++11，我们可以使用来自`#include <tr1/memory>`头文件中指令的智能指针（假设我们使用的是 STL）。

如果我们要使用，例如`std::unique_ptr< T >`，那么我们将拥有`Bar* mBar`并`Foo* mFoo`替换为：

```
std::unique_ptr< Foo > mFoo;
std::unique_ptr< Bar > mBar; 
```

这将允许我们这样做，

```
SomeClass::SomeClass( void )
   mFoo( new Foo ),
   mBar( new Bar ),
   mStackFoo( ... )
{
} 
```

由于智能指针有效地将内存分配*包装*在*自己的*构造函数中。

虽然这是一个不错的解决方案，但我个人并不是对我创建的每个堆对象都使用智能指针的人，而且我知道 C++ 社区中的其他人也有同样的感受。

* * *

## **tl;博士**

有了所有这些，我真正想知道的是，除了我上面列出的那些之外，**是否有任何更有效的替代方法来初始化对象中的类成员**（尤其是随着 C++11 的出现）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:24:01.623

`unique_ptr`是正确的解决方案。它有几个优点：

*   它明确记录所有权。原始指针的问题之一是它们没有表明任何关于谁拥有它们的信息。`unique_ptr`您只有一个所有者，并且`move`如果您想转让它，则必须明确拥有所有权。

*   它基本上没有开销；唯一要做的`unique_ptr`就是调用删除器，无论如何你都会这样做。现在，您无需手动管理内存即可获得确定性内存行为的性能优势。

*   多亏了 RAII，它使线程安全和异常安全更容易实现。这意味着减少对指令顺序的担忧，减少明确的清理代码。您可以获得异常的好处，而不会出现在如此多的 C++03 代码中导致它们被避免的所有问题。

`shared_ptr`根据我的经验，需要的频率远低于`unique_ptr`. 共享所有权主要在您拥有诸如纹理或音频文件之类的不可变资源时很有用，其中加载和复制都很昂贵，但您希望在不使用时将其卸载。`shared_ptr`还强加了额外的安全性（特别是线程安全性）和引用计数的开销。

当然，缺点是智能指针会带来语法开销。它们不像原始指针那样“原生”。为此，您拥有`typedef`、`auto`、`decltype`和滚动您自己的便利功能，例如`make_unique`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T01:17:55.227

为什么你不能这样做？

```
SomeClass::SomeClass( void ) : 
mFoo(new Foo)
, mBar(new Bar)
{
} 
```

它们是原始指针，不会创建不必要的副本。

我还应该指出，您使用初始化列表的原因是，当执行构造函数主体时，对象处于有效状态（即所有成员都有有效值）。

```
SomeClass::SomeClass( void )
{
     //before this point, mFoo and mBar's values are unpredictable
     mFoo = new Foo;
     mBar = new Bar;
} 
```

关于异常， SomeClass 的析构函数只有[在构造函数本身抛出异常](http://www.parashift.com/c++-faq-lite/selfcleaning-members.html)时才会被调用。

最后，关于线程安全与否，这取决于每个线程是否有自己的 SomeClass 副本以及 SomeClass 是否包含正在写入的静态成员。

# php - 登录表单总是需要多次尝试

> ID：15261308
> 
> 赞同：0
> 
> 时间：2013-03-07T01:11:21.417
> 
> 标签：php, html

我在 PHP 中的登录脚本有一点问题。当用户登录时，它只有在第二次尝试后才能工作，没有错误，但看起来用户在第一次尝试时输入了错误的密码。

有时，当我一直在测试该站点时，在我第一次尝试登录后，它会将我发送回登录页面。然后我手动输入主页的 url，它有时会让我去那里。（顶部有一些 php 检查用户是否已经登录，所以我猜有时登录脚本会将 SESSION 设置为 true）

大多数时候它并没有这样做。它只会将我重定向回登录而不打印错误消息。我相信问题出在主页的顶部，而不是登录脚本，因为在删除重定向后，如果 mysql 没有返回与用户/密码匹配的行，它无论如何都会将我引导到登录页面。

这是我的登录脚本

```
<?php
session_start();
// Include required MySQL configuration file and functions

// Check if user is already logged in
if (isset($_SESSION['logged_in'])) {
    // If user is already logged in, redirect to main page
    redirect('home.php');
}
else {
        // Make sure that the user submitted a username/password and username
        // only consists of alphanumeric Chars

        if ( (!isset($_POST['username'])) || (!isset($_POST['password'])) OR
             ( !ctype_alnum($_POST['username'])) ) {

                redirect('login.php');
            }

        // Connect to database

        $mysqli = @new mysqli(DB_HOSTNAME, DB_USERNAME, DB_PASSWORD, DB_DATABASE);

        if (mysqli_connect_errno()) { printf ("Unable to connect to database %s",
                                        mysqli_connect_error());
                                        exit();
            }
        //Escape any unsafe characters before querying database
        $username = $mysqli->real_escape_string($_POST['username']);
        $password = $mysqli->real_escape_string($_POST['password']);

        // construct SQL statement for query & execute
        $sql = "SELECT * FROM peeps WHERE name = '" . $username . "'
                AND pword = SHA1('" . $password . "') ";

        $result = $mysqli->query($sql);

        // If one row is returned, username and password are valid.
        if ($result->num_rows == 1 ) {
            // Set the session variable for login status to true
            $_SESSION['logged_in'] = true;
            $_SESSION['name'] = $username;
            echo "successfull ";
            redirect('home.php');
        }
        else { 
                echo "didnt return row<hr>";
                 redirect back to login page.
                redirect('loginPage.php');
            }
    }
?> 
```

这是我主页顶部的代码..

```
<?php
// Start session
session_start();
// Include required functions file
require_once('functions.php');
// Check login status... if not logged in redirect to login screen
    if (check_login_status() == false) {
        redirect('loginPage.php');
    }
$username = $_SESSION['name'];

?> 
```

任何帮助将不胜感激，如果您想进一步澄清我的意思，您可以注册[GateKeeper](http://gatekeper.com)并查看我在说什么。

这也是我的第一个问题，所以对我如何提出的任何评论将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:31:04.870

我假设第一个页面是处理来自 loginPage.php（或 loginPage.php 本身）的表单的脚本，第二个页面是您在通过身份验证后访问的页面。

如果我没记错的话，问题似乎是有时您没有被正确识别，这会将您重新重定向到您的登录名。你能告诉我们 check_login_status() 函数的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:43:59.763

尝试通过替换来调试它

```
 if (check_login_status() == false) {
        redirect('loginPage.php');
    } 
```

和

```
 if (!isset($_SESSION['name'])) { #could be any session variables that you like..
    redirect('loginPage.php');
} 
```

或`print_r($_SESSION)`在您的主页上执行。

# maven - 在 Clojure 中使用本地 maven 存储库需要 java 类和命名空间组织

> ID：15261309
> 
> 赞同：1
> 
> 时间：2013-03-07T01:11:27.313
> 
> 标签：maven, clojure, namespaces, dependencies, repository

所以我想我一般理解需要和导入命名空间，例如 Clojure 源代码具有以下目录结构：clojure / src / clj / clojure / java / io.clj 。这意味着我可以要求这样的事情：

```
user> (ns foo
        (:require [clojure.java.io :as io]))
nil
foo> io/copy
#<io$copy clojure.java.io$copy@35f784d7> 
```

我将其解释为在 io.clj 文件中有一个名为 copy 的函数，该函数位于此命名空间 clojure.java.io 中，我现在可以在需要该命名空间时使用它。

现在到我的具体问题。我需要使用一个库，但 jar 不在 maven 上，所以我以标准方式设置了一个本地存储库，它工作正常。所以我现在在两个地方有需要的罐子：

```
/Users/ryanmoore/projects/proj_foo/maven_repo/net/sf/picard/1.86 
```

和

```
/Users/ryanmoore/.m2/repository/net/sf/picard/1.86 
```

问题出在 jar 里面，类的名称如

```
net/sf/picard/illumina/parser/readers/MMapBackedIteratorFactory.class
net/sf/picard/io/FastLineReader.class
net/sf/picard/metrics/MetricsFile.class
net/sf/picard/reference/FastaSequenceIndexEntry.class 
```

我无法要求这些课程，例如：

```
user> (require '[net.sf.picard.io/FastLineReader :as flr])
FileNotFoundException Could not locate FastLineReader__init.class or FastLineReader.clj on      classpath:   clojure.lang.RT.load (RT.java:432) 
```

我认为这与不匹配的名称和路径有关。在这个堆栈问题[中，在 Clojure 中使用命名空间的常见约定是什么？](https://stackoverflow.com/questions/2223190/what-are-common-conventions-for-using-namespaces-in-clojure)，它指出目录结构中的文件必须与命名空间匹配，否则 Clojure 将无法找到它们。

我的问题是我应该如何设置文件夹以便 Clojure 可以找到所有内容？

注意：Clojars 上有一个 picardtools 版本，但它是旧版本。另外，我尝试过并且遇到了与上述相同的问题。

编辑：感谢 mobyte 的回答，我现在得到了“Java 类被导入，不需要”。从这里[How to require java classes in clojure/leiningen](https://stackoverflow.com/questions/14711923/how-to-require-java-classes-in-clojure-leiningen?rq=1)指的是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:16:28.003

您需要使用`import`Java 类

```
(import '[net.sf.picard.io FastLineReader]) 
```

`require`适用于 Clojure 库：[http](http://clojuredocs.org/clojure_core/clojure.core/require) ://clojuredocs.org/clojure_core/clojure.core/require 。

# mysql - MySQL _ 在单个查询中检索多行和多列

> ID：15261311
> 
> 赞同：2
> 
> 时间：2013-03-07T01:11:45.407
> 
> 标签：mysql, sql

我是 MySQL 新手

我想从数据库中检索所有包含 StrainName=M18 的列，但出现错误。请帮助我

```
SELECT * 

strain.strainName,
feature.contigId,
feature.startPosition,
feature.stopPosition,
feature.orfId,
feature.orfType,
feature.funcClassification,
feature.rastId,
feature.strand 
from feature,strain 
where feature.id=strain.id and strainName='M18'; 
```

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'strain.strainName,feature.contigId,feature.startPosition,feature.stopPosition,fe' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:12:43.767

你需要在后面加逗号`*`

```
SELECT  *,                      -- <<====== HERE
        strain.strainName,
        feature.contigId,
        feature.startPosition,
        feature.stopPosition,
        feature.orfId,
        feature.orfType,
        feature.funcClassification,
        feature.rastId,
        feature.strand 
from    feature,strain 
where   feature.id=strain.id and 
        strainName='M18'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:24:49.733

获取所有列：

```
SELECT * from feature,strain 
where feature.id=strain.id and strainName='M18'; 
```

获取特定列：

```
SELECT                       
        strain.strainName,
        feature.contigId,
        feature.startPosition,
        feature.stopPosition,
        feature.orfId,
        feature.orfType,
        feature.funcClassification,
        feature.rastId,
        feature.strand 
from    feature,strain 
where   feature.id=strain.id and 
        strainName='M18'; 
```

# json - 如何使用 d3.js 同步加载 JSON 数据？

> ID：15261313
> 
> 赞同：10
> 
> 时间：2013-03-07T01:12:07.263
> 
> 标签：json, xmlhttprequest, d3.js, synchronous

当我的网站第一次初始化时，它会查询服务器以取回一些数据。在此数据返回之前，我无法在页面上布置任何内容。使用 d3.js，我可以使用 d3.json() 来获取我的数据，但是因为它是异步的，我需要将整个页面逻辑放在回调函数中。如何请求数据并等待它返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:10:48.173

你基本上是这样做的唯一方法。回调函数必须是启动其余代码的那个。但是，您不需要回调函数中的所有代码，您可以引入间接。因此，回调函数将调用另一个函数，该函数将是当前回调函数中的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-09T06:07:18.883

不建议在 JavaScript 中使用同步请求，因为它会阻塞整个线程并且在此期间什么都做不了。用户也不能很好地与网页交互。

如果它真的是您想要的，您可以执行以下操作（使用 jQuery）：

```
var jsonData;
jQuery.ajax({
  dataType: "json",
  url: "jsondatafile.json",
  async: false
  success: function(data){jsonData = data}
}); 
```

但是，即使是 jQuery，也不建议这样做，正如此处[jQuery.ajax() 文档](http://api.jquery.com/jQuery.ajax/)所解释的那样：

> Ajax 中的第一个字母代表“异步”，这意味着操作是并行发生的，并且不保证完成的顺序。$.ajax() 的 async 选项默认为 true，表示在发出请求后可以继续执行代码。强烈建议不要将此选项设置为 false（从而使调用不再是异步的），因为它可能导致浏览器无响应。

最后一点，我看不出是什么阻止您`success`以异步方式使用属性中的任何函数。大多数时候，将设计更改为使用异步请求都是值得的。根据经验，调试使用同步请求的页面是一件痛苦的事（尤其是当请求没有得到答复时......）。

# android - Nexus 7 Chrome 上计算的字体大小与 CSS 字体大小不同

> ID：15261315
> 
> 赞同：0
> 
> 时间：2013-03-07T01:12:27.533
> 
> 标签：android, css, responsive-design, cross-browser, font-size

我有一些 CSS 和 HTML 的`font-size`样式被明确设置为 13px，并且在大多数情况下它保持这种方式，但有时 Nexus 7 上的 Chrome 有时会显示同一页面的一部分为 14px；

不幸的是，我无法在 jsfiddle 中重新创建问题，所以我不确定发生了什么。

[在我尝试在http://jsfiddle.net/K9hyG/2/](http://jsfiddle.net/K9hyG/2/)重新创建问题时，可以看到一些我用来影响 font-family 和 font-size 的样式。

使用 Chrome 调试器时，我可以在 Computed Style 中看到以下有问题的段落之一：

```
border-collapse: separate;
color: rgb(51,51,51);
display: block;
font-family: Optima, Lucia, 'MgOpen Cosmetica', 'Lucida Sans Unicode', sans-serif;
font-size: 14px;
    font[size="2"] - 13px   default.aspx:427
    body - 13px             default.aspx:2
height: 36px;
text-align: left;
text-shadow: rgb(255,255,255) 0px 1px 0px;
width: 877px; 
```

文本阴影是由我使用 jQuery Mobile 生成的。在 Chrome 调试器中，出现了两个 text-shadow 指令实例。一个继承自div.ui-page.ui-body-c.ui-page-active（ui-body-c为激活组件），另一个继承自body.ui-mobile-viewport.ui-overlay-c，（ ui-overlay-c 是激活组件），但两个定义来自主题文件中 CSS 的同一部分。

如果我停用其中一个，违规段落在 Chrome 调试器中实际上更改为 13px，但在设备上看起来仍然相同。如果它们都在 Chrome 调试器中被停用，那么它会回到 14px。这仍然会发生，即使 text-shadow 设置为`rgb(255,255,255) 0px 0px 0px`.

我看过[这篇文章](https://stackoverflow.com/questions/13416989/computed-font-size-is-bigger-than-defined-in-css-on-the-asus-nexus-7)，但这个问题在很大程度上也没有得到解决。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T02:09:23.173

我的一位同事已经找到了答案。看起来我是[Font Boosting的不知情的受害者](https://bugs.webkit.org/show_bug.cgi?id=FontBoosting)

根据链接，可以通过提供`max-height: 1000000px`相关元素或`body, body *`所有元素来禁用字体增强。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T01:27:27.173

您的问题可能是由于 Chrome 的文本缩放设置，该设置出于可访问性原因将文本设置为特定比例。许多用户都在使用它，他们难以在手机上阅读小文本。您无法解决此问题，也不应尝试解决它，尤其是对于支持移动设备的网站。

![Chrome 可访问性选项](../Images/f91ea56e51e8245f61db94556cf6ef69.png)

我建议您要么忽略它，要么修改您的 CSS，使其支持略有不同的文本大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:55:48.750

经过一些测试，这条规则帮助了我。必须添加到包含提升文本的元素或其父元素，具体取决于 div/table 结构。

```
element or parent element { 
    /* prevent font boosting on mobile devices */
    width: 100%;
    height: auto;
    min-height: 1px;
    max-height: 999999px;
} 
```

也许必须根据您的需要更正宽度和高度值。

# vbscript - vbscript 检查进程是否正在运行，如果没有，则从网络复制文件

> ID：15261317
> 
> 赞同：1
> 
> 时间：2013-03-07T01:12:43.540
> 
> 标签：vbscript

我是 VB 脚本的新手，需要有关程序的帮助来执行以下操作，有人可以帮助我吗？如果整个程序可以嵌入到一个 vbscript 中，那就太好了。

写一个脚本来检查

1.  如果进程正在运行（例如 notepad++.exe），
2.  如果它正在运行，那么不要做任何事情。
3.  如果进程未运行，请检查 C:\Program Files(x86) 下是否存在目录
4.  假设该目录不存在，然后将 .exe 文件从网络共享位置复制到本地驱动器，然后
5.  然后以静默模式执行命令行安装。（示例> notepad++.exe -ms）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T23:05:22.087

你可以使用这个例子。您需要`if`检查并比较`objItem.Name = "notepad.exe"`并做任何您想做的事情：

```
 sComputerName = "."
   Set objWMIService = GetObject("winmgmts:\\" & sComputerName & "\root\cimv2")
   sQuery = "SELECT * FROM Win32_Process"
   Set objItems = objWMIService.ExecQuery(sQuery)
   'iterate all item(s)
   For Each objItem In objItems
       WScript.Echo "Process [Name:" & objItem.Name & "]"
   Next 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-30T13:34:09.977

另请注意，您可以`WHERE`在查询中使用语句：

```
SELECT * FROM Win32_Process WHERE Name LIKE '%notepad%' 
```

[在这里](https://msdn.microsoft.com/en-us/library/aa394372%28v=vs.85%29.aspx)您可以找到要查询的列的名称：

# php - 从选择下拉列表中用 php 保存 sql 变量

> ID：15261320
> 
> 赞同：-1
> 
> 时间：2013-03-07T01:12:53.333
> 
> 标签：php, sql, variables

我的代码中有以下选择。现在它将整个值发布到下一页，但是我如何将变量 $dagen 传递到下一页？

```
<form method="post" action="pagina4.php?lang=<?=$_SESSION['lang'];?>&naam=<?=$naam;?>&fietskeuze=<?=$fietskeuze;?>&opties=<?=$opties;?>&optieid=<?=$optieid;?>">
        <select id="dagen" name="dagen" style="width:250px;" style="height:250px;">
            <?php
            $query="SELECT * FROM $tabel WHERE fietstype='$fietskeuze'";
            $result=mysql_query($query) or die ("Ophalen prijzen mislukt: ".mysql_error());

            while ($row=mysql_fetch_array($result)) {
            $dagen=$row[dagen];
            $prijs=$row[prijs];
                echo "<option>
                    $dagen ".$lang['pagina3_dag']." - Tarief: EUR   ".$prijs."  
                </option>";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:17:51.013

你已经是了。您的一些变量在`$_GET`（操作属性的查询字符串）`dagen`中可用，但该变量将在`$_POST['dagen']`.

如果完整的字符串不是您想要的，您可以添加一个 value 属性来获取您的`$dagen`变量：

```
 echo "<option value="<?php echo $dagen; ?>">
     ... 
```

# c# - 解决 XNA 内容加载器 InvalidOperationException？

> ID：15261323
> 
> 赞同：3
> 
> 时间：2013-03-07T01:12:57.453
> 
> 标签：c#, xna-4.0

过去我发现 StackOverflow 是一个非常有用的参考，现在我遇到了自己的障碍，我想我会尝试在这里发帖。

我的问题是，每当我的游戏尝试加载 SoundEffect 文件时，它都会因 InvalidOperationException 而崩溃（详细消息：发生了意外错误）。这个游戏是在 XNA 4.0 框架上用 C# 编写的，Visual Studio 2010 express 作为我的 IDE。加载的音效都是 .wav 文件，并添加到游戏的 Content 项目中。

我检查了董事会并尝试了以下建议：

*   确认它设置的 content.rootDirectory - 它设置为“内容”
*   确认 content.load<> 正在通过正确的路径访问资源。使用反射，我得到了应用程序的当前目录，然后使用了根目录+它试图访问的路径。该文件肯定存在，可访问，并且位于该位置。
*   确保 ContentManager 内容不为空 - 使用调试确认，无论如何都会引发不同的异常。
*   确认 WAV 是 8 位或 16 位 PCM。确认的。
*   可能的标头损坏？此错误发生在我尝试加载的任何和所有音效上，因此它不是与一个文件有关的标题问题。

奇怪的是，这个错误似乎无处不在。过去一周它工作正常，今天它吓坏了——我没有做任何会影响内容加载过程的更改。

这是引发错误的代码：

```
public void LoadSoundEffect(ContentManager content, String assetPath)
{
    if (content != null && String.IsNullOrEmpty(assetPath) == false)
    {
        // This next line throws the exception.
        SoundEffect effectLoader = content.Load<SoundEffect>(assetPath);
        soundLibrary.Add(assetPath, effectLoader);
    }
} 
```

这是堆栈跟踪：

> 在 Microsoft.Xna.Framework.Helpers.ThrowExceptionFromErrorCode(Int32 错误) 在 Microsoft.Xna.Framework.Audio.SoundEffect.AllocateFormatAndData(Byte[] 格式, Byte[] > data, Int32 offset, Int32 count) 在 Microsoft.Xna.Framework .Audio.SoundEffect.Create(Byte[] format, Byte[] data, Int32 offset, Int32 count, Int32 loopStart, Int32 loopLength, TimeSpan duration) at Microsoft.Xna.Framework.Audio.SoundEffect..ctor(Byte[] 格式, Byte[] data, Int32 loopStart, Int32 loopLength, TimeSpan duration) at Microsoft.Xna.Framework.Content.SoundEffectReader.Read(ContentReader input, SoundEffect existingInstance) at Microsoft.Xna.Framework.Content.ContentReader.InvokeReader[T]( Microsoft.Xna.Framework.Content.ContentReader 上的 ContentTypeReader 阅读器，Object existingInstance）。ReadObjectInternal[T](Object existingInstance) 在 Microsoft.Xna.Framework.Content.ContentReader.ReadObjectT 在 Microsoft.Xna.Framework.Content.ContentReader.ReadAssetT 在 Microsoft.Xna.Framework.Content.ContentManager.ReadAsset[T](字符串assetName , Action`1 recordDisposableObject) 在 Microsoft.Xna.Framework.Content.ContentManager.Load[T](String assetName) 在 SerializableDataTypes.AudioManager.LoadSoundEffect(ContentManager content, String assetPath) 在 C:\Users\Mike\Documents\Visual Studio 2010\Projects\Res Judicata Chapter1\SerializableDataTypes\Script Elements\AudioManager.cs：第 78 行Action`1 recordDisposableObject) 在 Microsoft.Xna.Framework.Content.ContentManager.Load[T](String assetsName) 在 SerializableDataTypes.AudioManager.LoadSoundEffect(ContentManager content, String assetPath) 在 C:\Users\Mike\Documents\Visual Studio 2010 \Projects\Res Judicata Chapter1\SerializableDataTypes\Script Elements\AudioManager.cs:line 78Action`1 recordDisposableObject) 在 Microsoft.Xna.Framework.Content.ContentManager.Load[T](String assetsName) 在 SerializableDataTypes.AudioManager.LoadSoundEffect(ContentManager content, String assetPath) 在 C:\Users\Mike\Documents\Visual Studio 2010 \Projects\Res Judicata Chapter1\SerializableDataTypes\Script Elements\AudioManager.cs:line 78

在此先感谢您提供的任何帮助-我对此完全感到困惑，这是一个非常令人沮丧的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:28:55.933

只是出于好奇，您能否尝试以稍微不同的方式加载音效。

```
SoundEffect effect = content.Load<SoundEffect>(String.Format(@"{0}", soundEffectPath)) 
```

过去我在不使用字符串文字时加载某些内容类型时遇到过问题。

# android - 如何设置 Eclipse 在每次 Android 测试测试之前运行登录 Junit 测试？

> ID：15261324
> 
> 赞同：0
> 
> 时间：2013-03-07T01:12:57.980
> 
> 标签：android, eclipse, junit

我有数百个 Android jUnit 测试。当我调试一个测试时，它变得非常烦人，因为我们的 Android 应用程序需要登录。我确实有一个名为 AuthenticationTest 的测试来登录，如果我运行整个套件，它总是第一个运行的测试用例。该测试通过后，它将让应用程序与用户登录，其余测试可以继续运行。

当我进行调试时，我想找到一种方法让我先运行 AuthenticationTest，然后再运行我只想在 Eclipse 上调试的测试。我不想在每个测试用例中调用 login 方法，因为当我们在 CI 上运行所有测试时，它会使我们的测试效率低下。

任何想法？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:17:08.010

使用注释`@Before`

假设这是您的示例测试：

```
 public class Test{

    @Before public void initialize() {
       //do your login and authentication here or any setup
    }
    @Test public void testCase1() {
       //test case1
    }
    @Test public void testCase2() {
       test case2
    }
 } 
```

来源：http: [//junit.sourceforge.net/javadoc/org/junit/Before.html](http://junit.sourceforge.net/javadoc/org/junit/Before.html)

# jquery - 如何为 ADFS 身份验证设置骨干网/木偶应用程序？

> ID：15261326
> 
> 赞同：1
> 
> 时间：2013-03-07T01:13:17.597
> 
> 标签：jquery, backbone.js, marionette

我有一个需要通过 ADFS 进行身份验证的应用程序。目前，当我的主干模型请求 URL 时，应用服务器返回 ADFS 302 重定向，并且该过程停止在那里，因为 jquery 不会处理重定向。

我有另一种方法，应用程序转到身份验证页面并在 iframe 中向服务器加载虚假请求，这会处理所有重定向、ADFS 身份验证表单和 fedAuth cookie，然后我像往常一样转到我的应用程序和服务器请求顺利通过。

但是，此解决方案不考虑身份验证令牌到期，这可能随时发生。

当骨干模型向服务器发送请求时，有人知道如何进行 ADFS 协商吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:45:34.060

我有类似的问题，但使用 oauth 而不是 adfs。秘诀是覆盖 Backbone.ajax ......在那里，调用服务，但在返回之前检查 302 的响应。如果是 302，请执行您的身份验证操作，然后重试原始请求并返回 •that• 结果。现在，您的模型/集合可以整天调用服务，而无需了解每个请求在幕后处理的身份验证问题。

# android - 使用 Eclipse 与 Ant 构建 Android 库

> ID：15261331
> 
> 赞同：1
> 
> 时间：2013-03-07T01:14:50.417
> 
> 标签：android, ant, continuous-integration, android-library, eclipse-adt

我有一个简单的 Android 库项目，其中仅包含网络调用功能。它不需要继承任何 XML/资源等…来调用应用程序。当我使用 Eclipse IDE 构建这个项目时（右键单击项目并单击`Build Project`），它会在`bin/libproject.jar`. 我可以简单地将这个文件放到任何项目的构建路径中，它工作正常。

现在，我想为我的库实现持续集成。这意味着，我需要一些命令行方式来实现相同的目的（构建 jar，当我使用 构建项目时`ant`）。Ant 以不同的方式构建项目。它`classes.jar`在`bin/`文件夹中创建，与`libproject.jar`.

我相信 Eclipse `Build Project`（ADT rev-21）正在为我的库项目构建这个完整的 JAR（这更像是 JAR 之类的 java 项目）正在做一些神奇的事情。

你知道我怎样才能使用命令行实现同样的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:31:39.973

我使用 eclipse 4.3 w/ant 和 sdk 工具 21.1

IMO - 他们最近更改了关于 lib 依赖项的 sdk。

[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

见上面的链接。

我的示例库依赖项（传递）如下：

ABS <== 滑动菜单 <== 我的项目

所以，在 SM.project.properties... android.library.reference.1=../../src/ABS/library

并且，在 MP.project.properties ... android.library.reference.1=../../src/SlidingMenu/library

在 Eclipse 外部的终端会话中，使用 Eclipse 内部、ant 构建工具或 CLI 上的 ant 在 proj=SM 上运行的 ant 构建执行以下操作：

```
[javac] Note: Recompile with -Xlint:deprecation for details.
 [echo] Creating library output jar file...
  [jar] Building jar: /home/rob/src/tools/ActionBarSherlock-4.2.0/library/bin/classes.jar 
```

和 ant build, run on proj=MP 执行以下操作：

```
 Setting project property: out.library.jar.file -> /home/rob/src/SlidingMenu/library/bin/classes.jar
..
      [jar] Building jar: /home/rob/src/SlidingMenu/library/bin/classes.jar 
```

IMO - 你应该专注于两件事：

在依赖项的 file=project.properties 中获取正确的 lib 引用。

仔细检查eclipse项目/properties/java构建路径/顺序和导出

阅读链接，因为它包含与“订单导出”相关的多个特定注释...

当您在 ant 中构建依赖项目时，它应该在内部触发其他项目的构建。我认为这是在依赖项目的构建路径中控制的。

关于调试的附加说明 - 我无法直接从项目资源管理器中进行调试，因为启动器不喜欢 2 依赖项目的“classes.jar”。Debug 坚持在每个库的 ./bin 目录中有名称为“${project-name}.jar”的 jar。但是 ant 分配“classes.jar”，如上所示。

因此，为了调试，我在 Eclipse 中使用了 DDMS 选项卡的替代方法，该应用程序已经在运行。然后你找到进程并附加调试器。

# c# - System.TypeInitializationException：“提示”的类型初始化程序引发异常

> ID：15261332
> 
> 赞同：4
> 
> 时间：2013-03-07T01:15:03.480
> 
> 标签：c#, list, windows-phone-7, static-constructor

我正在尝试访问静态列表的值。但是，当我尝试这样做时，会引发此异常。

> System.TypeInitializationException：“提示”的类型初始化程序引发了异常。-- -> System.NullReferenceException：对象引用未设置为对象的实例

带有列表的类。

```
 public static class Tips
{
    //private List<Tip> roadtips = new List<Tip>();
    public static List<Tip> tips { get; set; }

     static Tips()
    {
        tips.Add(new Tip("Don't use your mobile phone whilst driving", "Making or receiving a call, even using a 'hands free' phone, can distract your attention from driving and could lead to an accident. "));
        tips.Add(new Tip("Children", "Children often act impulsively, take extra care outside schools, near buses and ice cream vans when they might be around."));
        tips.Add(new Tip("Take a break", "Tiredness is thought to be a major factor in more than 10% of road accidents. Plan to stop for at least a 15 minute break every 2 hours on a long journey."));
        tips.Add(new Tip("Don't drink and drive", "Any alcohol, even a small amount , can impair your driving so be a safe driver don't drive and drive."));
        tips.Add(new Tip("Anticipate ", "Observe and anticipate other road users and use your mirrors regularly."));
        tips.Add(new Tip("Use car seats ", "Child and baby seats should be fitted properly and checked every trip."));
        tips.Add(new Tip("Keep your distance ", "Always keep a two second gap between you and the car in front."));
    }
} 
```

这是试图访问列表的类。

```
 public partial class tip : PhoneApplicationPage
{
    public tip()
    {
        InitializeComponent();
        Random r = new Random();
        int rInt = r.Next(0, 6); 
        tipname.Text = Tips.tips[rInt].Name;
        tipdesc.Text = Tips.tips[rInt].Description;
    }
} 
```

是什么导致这种情况发生？有没有更好的方法来存储这些提示。我只需要一个提示列表来输出到 Windows 手机页面上的两个文本块。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T01:20:15.733

看起来您从未将自动实现的属性初始化`tips`为一个值。因此，它会`null`在您的静态初始化程序中导致异常。尝试初始化值

```
static Tips()
{
  tips = new List<Tip>();
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T01:20:22.867

提示尚未初始化。

你需要更新它。

```
 static Tips()
 {
    tips = new List<Tip>();
    tips.Add(new Tip("Don't use your mobile phone whilst driving", "Making or receiving 
    ...  
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T01:21:59.260

```
public static class Tips
{
    //private List<Tip> roadtips = new List<Tip>();
    public static List<Tip> tips { get; set; }

    static Tips()
    {
        tips = new List<Tip>(); 
        tips.Add(new Tip("Don't use your mobile phone whilst driving", "Making or receiving a call, even using a 'hands free' phone, can distract your attention from driving and could lead to an accident. "));
        tips.Add(new Tip("Children", "Children often act impulsively, take extra care outside schools, near buses and ice cream vans when they might be around."));
        tips.Add(new Tip("Take a break", "Tiredness is thought to be a major factor in more than 10% of road accidents. Plan to stop for at least a 15 minute break every 2 hours on a long journey."));
        tips.Add(new Tip("Don't drink and drive", "Any alcohol, even a small amount , can impair your driving so be a safe driver don't drive and drive."));
        tips.Add(new Tip("Anticipate ", "Observe and anticipate other road users and use your mirrors regularly."));
        tips.Add(new Tip("Use car seats ", "Child and baby seats should be fitted properly and checked every trip."));
        tips.Add(new Tip("Keep your distance ", "Always keep a two second gap between you and the car in front."));
    }
} 
```

# html - 什么是开放属性

> ID：15261333
> 
> 赞同：1
> 
> 时间：2013-03-07T01:15:11.977
> 
> 标签：html

我遇到过这样的 open 属性：

```
 $.attr('open') 
```

或者像这样： `<div open='whatever'></div>`

我似乎找不到此属性的文档。它有什么作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:19:03.567

它用于[`<details>`](http://www.w3.org/html/wg/drafts/html/master/interactive-elements.html#the-details-element)元素，因此您的示例`<div>`不正确。

[HTML5 规范](http://www.w3.org/html/wg/drafts/html/master/interactive-elements.html#attr-details-open)说：

> 内容`open`属性是一个布尔属性。如果存在，则表示要向用户显示摘要和附加信息。如果该属性不存在，则仅显示摘要。
> 
> 创建元素时，如果该属性不存在，则应隐藏附加信息；如果该属性存在，则应显示该信息。随后，如果属性被删除，那么信息应该被隐藏；如果添加了属性，则应显示信息。

*   [浏览器支持`<details>`](http://caniuse.com/details)
*   [还有一个有趣的小演示](http://jsfiddle.net/f39wk/)

# asp.net - 我应该返回视图以确认 aa 过程是否成功？

> ID：15261341
> 
> 赞同：1
> 
> 时间：2013-03-07T01:16:21.680
> 
> 标签：asp.net, asp.net-mvc, vb.net, asp.net-mvc-3

假设我有一个注册页面。这是一个简单的视图，只有“名称”和“电子邮件”输入框。当用户提交他们的详细信息时，控制器将在数据库中创建用户，然后返回（相同的）视图。

现在正在返回相同的视图，我希望视图检测到该过程是否成功。即我需要将一些东西传回视图，让它显示一些稍微不同的东西。该页面本质上是相同的，但我有一些文本“成功注册”而不是输入框。

一种方法：

```
ViewBag.RegistrationWasSuccessful = True 
```

然后在视图中简单地检查该变量是否为真，然后显示“成功”文本。

另一种方法是将其添加到模型中：

```
Function Registration(ByVal model as RegistrationView) As ActionResult
    If ModelState.IsValid Then
        model.RegistrationWasSuccessful = True
    End If
    Return View(model)
End Function 
```

再次检查该变量是否为真。

检查表单是否成功的最佳方法是什么？上面的方法看起来有点难看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:21:50.767

如果您正在寻找根据流程成功/失败显示成功或失败消息的最简洁、最简单的方法，我建议改为向您的 ViewBag 添加一条消息并在您的视图中发布成功或失败消息。

在你的控制器中

```
if processSuccess == true
   ViewBag.RegistrationMessage = "Success"
else 
   ViewBag.RegistrationMessage = "Failure" 
```

在您的视图显示中

```
<span> @ViewBag.RegistrationMessage </span> 
```

# birt - 在母版页中访问 birt 报告的标题

> ID：15261342
> 
> 赞同：1
> 
> 时间：2013-03-07T01:16:26.217
> 
> 标签：birt

我是 birt 的新手，并且正在使用具有母版页的报告。内部报告有一个在 XML 中显示的 title 属性：

```
<text-property name="title"> title here.</text-property> 
```

我想访问这个在每个内部报告中都不同的值并将其显示在母版页中。我不知道如何访问这个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:54:50.417

从同事那里得到了这个答案：

```
reportContext.getDesignHandle().getProperty("title") 
```

# distinct - Android SQLite3异常与DISTINCT？

> ID：15261343
> 
> 赞同：0
> 
> 时间：2013-03-07T01:16:27.797
> 
> 标签：distinct, android-sqlite

这个查询没有返回我所期望的。为什么？

桌子：

```
create table t
(
    comment varchar(10),
    id int
); 
```

数据：

```
insert into t values ('C1', 1);
insert into t values ('C2', 2);
insert into t values ('C3', 3);
insert into t values ('C4', 4);
insert into t values ('C5', 5);
insert into t values ('C6', 6);
insert into t values ('C7', 7);
insert into t values ('C8', 8);
insert into t values ('C9', 9);
insert into t values ('C1', 10); 
```

查询：

```
select distinct comment from t order by id desc limit 8; 
```

结果：

```
C9
C8
C7
C6
C5
C4
C3
C2 
```

当我离开 DISTINCT 时，我得到最后一行，但我想抑制重复。我的解决方法返回正确的结果集：

```
select comment from t group by comment order by max(id) desc limit 8; 
```

但是我很好奇我的查询是否无效（例如，T-SQL 不允许在一个查询中同时使用 DISTINCT 和 ORDER BY，除非有序列在选择列表中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T20:10:59.417

我猜，只是猜想，C1 没有选择，因为它有一个骗子，而且我猜它 SQL 选择了这个 id 10 而不是 1 的骗子。这就是为什么你的 ids 从 2 到 9（总共有 8 个像你一样） d 通过限制 8 从 SQL 询问）。请检查我的理论是否正确。我猜它的工作流程就像 id 为 1 的记录，ok no dupes，next，id2，no dupes，ok...，id 10 - 是 id 1 的骗子，删除 id 为 1 的记录，添加 id 为 10 的记录...

# asp.net-mvc - 为什么httphandler没有运行

> ID：15261346
> 
> 赞同：6
> 
> 时间：2013-03-07T01:16:31.780
> 
> 标签：asp.net-mvc, asp.net-mvc-4, httphandler, iis-express

我为生成图像的 ASP.NET MVC4 站点编写了一个 httpHandler。该`ProcessRequest`函数未被调用。关于为什么的任何想法？

MVC4、IIS Express、Windows 8 专业版

**Web.config > system.webServer**

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="TextImage" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
      <add name="TextImage" path="textimage/*.png" verb="*" resourceType="Unspecified" type="MultiStepUI.TextImageHandler, MultiStepUI_MOBETTER" />
    </handlers>
  </system.webServer> 
```

**用法**

```
<img src="/textimage/step1.png?q=Step 1&c=404040&w=30&h=250&z=12" /> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T19:01:26.160

如果一个人知道要寻找什么，就可以在网上找到答案。

MVC 路由引擎尝试将所有请求映射到控制器——在这种情况下，这不是我们想要的。除了在 Web.config 中注册处理程序之外，我们还需要告诉 MVC 路由引擎忽略 httpHandler `path`，以便 ASP.NET 引擎可以处理其路由。

我选择使用[Phil Haack 的示例](http://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx)

**为了对抗链接腐烂，这是文章的摘录**

> 默认情况下，ASP.NET 路由忽略对磁盘上不存在的文件的请求。我在之前关于即将发生的路由更改的帖子中解释了这样做的原因。长话短说，我们不希望路由尝试路由对静态文件（例如图像）的请求。不幸的是，当我们想起 ASP.NET 的许多功能请求磁盘上不存在的 .axd 文件时，这让我们头疼。
> 
> 为了解决这个问题，我们在 RouteCollection 上包含了一个新的扩展方法 IgnoreRoute，它创建了一个映射到 StopRoutingHandler 路由处理程序（实现 IRouteHandler 的类）的 Route。实际上，任何匹配“忽略路由”的请求都将被路由忽略，正常的 ASP.NET 处理将基于现有的 http 处理程序映射进行。因此，在我们的默认模板中，您会注意到我们定义了以下路由。
> 
> routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
> 
> 这处理标准的 .axd 请求。但是，在其他情况下，您可能会请求磁盘上不存在的文件。例如，如果您将 HTTP 处理程序直接注册到实现 IHttpHandler 的类型。更不用说浏览器自动发出的对 favicon.ico 的请求了。*ASP.NET 路由尝试将这些请求路由到控制器。*对此的一种解决方案是添加适当的忽略路由以指示路由应忽略这些请求。不幸的是，我们不能这样做：
> 
> {*path}.aspx/{*pathinfo}
> 
> *我们只允许一个包罗万象的路由，它必须发生在 URL 的末尾*。但是，您可以采取以下方法。在此示例中，我添加了以下两条路线。
> 
> routes.IgnoreRoute("{*allaspx}", new {allaspx=@".*\.aspx(/.*)?"});
> routes.IgnoreRoute("{*favicon}", new {favicon=@"(.*/)?favicon.ico(/.*)?"});
> 
> 我在这里所做的是 Eilon 向我展示的一种技术，它将所有 URL 映射到这些路由，然后通过约束字典限制要忽略的路由。所以在这种情况下，这些路由将匹配（并因此忽略）所有对 favicon.ico 的请求（无论是哪个目录）以及对 .aspx 文件的请求。由于我们告诉路由忽略这些请求，因此将发生对这些请求的正常 ASP.NET 处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T08:16:03.867

前面的答案是正确的，但文章已从此处放置的摘录中进行了编辑。忽略语句应为：

```
routes.IgnoreRoute("{*allaspx}", new {allaspx=@".*\.aspx(/.*)?"});
routes.IgnoreRoute("{*favicon}", new {favicon=@"(.*/)?favicon.ico(/.*)?"}); 
```

请注意原始中缺少的 {*allaspx} 和 {*favicon} 字符串中的“*”。在我点击链接并按照更新文章中的示例进行操作之前，我无法让它工作。

# css - 用 CSS not() 匹配多个元素

> ID：15261351
> 
> 赞同：1
> 
> 时间：2013-03-07T01:17:23.670
> 
> 标签：css, css-selectors

我必须更改整个页面上所有内容的样式，除了一大堆豁免元素。显然 CSS`not()`不支持这样的逗号语法：`:not(p, div)`. 我是否必须像下面这样列出一个巨大的列表，为每个列表重复样式，还是有更快的解决方案？

```
:not(p){xyz}
:not(div){xyz}
:not(a){xyz} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:19:20.670

尝试

```
:not(p):not(div):not(a){xyz} 
```

[http://jsfiddle.net/mowglisanu/MA3nM/](http://jsfiddle.net/mowglisanu/MA3nM/)

# iis-express - 如何触发 IISExpress 响应 applicationhost.config 中的更改

> ID：15261358
> 
> 赞同：0
> 
> 时间：2013-03-07T01:18:13.737
> 
> 标签：iis-express, applicationhost

我已经更新了

%userprofile%\documents\iisexpress\config\applicationhost.config

根据这篇文章的变化：

[http://ben.onfabrik.com/posts/aspnet-web-api-compression](http://ben.onfabrik.com/posts/aspnet-web-api-compression)

即，我添加了

```
<httpCompression ...>
    <dynamicTypes>
        <add mimeType="application/json" enabled="true" > 
```

在 Web API 响应中压缩 JSON。但是从响应头中的内容长度和内容类型来看，IISExpress 没有压缩响应，因此配置更改没有生效。

我还重新启动了 IISExpress。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:01:06.700

运行 IISExpress.exe 并输入“Q”来停止 IIS Express 并没有成功。但是关闭 Visual Studio 然后停止 IIS Express 确实如此。重新启动 VS 后，JSON 数据被压缩。

# windows-phone-7 - 重塑 WP7 应用程序

> ID：15261360
> 
> 赞同：1
> 
> 时间：2013-03-07T01:18:14.830
> 
> 标签：windows-phone-7, windows-phone-8, projects-and-solutions

我有一个需要重新命名的 WP7 应用程序。我正在使用 Visual Studio 2012。我的问题是如何以最自动化的方式管理品牌。
假设我为主要品牌开发了应用程序，我需要为次要品牌重新设计。二级品牌包括图像的变化和部分基本样式（基本样式被使用，因此被共享的其他样式和模板引用）。我宁愿让 XAP 只为自己的品牌提供图像。我还需要有可能将设计师与一个或另一个品牌一起使用。

我尝试为此目的使用 TFS 分支，它很令人满意，但是在每次合并时（主分支中的新功能或错误修复必须在辅助分支中合并），我需要注意不要覆盖图像和样式（如果更改），这是一个容易出错的过程，并导致未检测到的严重错误。

我正在考虑通过将所有不同的图像和样式移动到不同的“主题”类库中来将所有内容带回主分支并管理品牌，但是如何在参考之间轻松切换（我需要设计师，所以在设计时）？有没有办法为不同的解决方案配置提供不同的参考？

另一种选择可能是使用分支和 2 主题类库，在二级分支中，应用程序将引用二级主题类库。在纸上，这似乎是最好的选择，两个分支都将静态链接资源，他们将拥有他们的设计师品牌，合并不应影响“主题”库中的任何修改。在尝试之前，我想知道是否有人有更好的选择或预见到这方面的任何问题。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:21:31.330

我有类似的项目，我可以分享我试图解决它的方式。

我有以下项目结构

*   **AppName.Common** - 这里定义了所有通用代码、视图和数据模板

*   **AppName.Main** - 这里是主项目的 App.xaml，具有特定样式和图像的资源

*   **AppName.Branded** - 这是用于品牌项目的 App.xaml，具有特定样式和图像的资源。同样在 App.xaml 中，我配置了 IoC 容器，因为 Branded 和 Main 项目的某些行为不同。

所有样式都在 Resourced 字典的 App.xaml 中定义。因此，在运行时应用程序可以解决它们。有时您需要重新打开解决方案，而 ReSharper 也不支持，它无法解析您的样式。

Blend for VS 可以支持这种结构。您只需选择当前项目作为启动项目。

希望它会帮助你。

不要忘记，如果您从其他程序集导航到 View，您[需要更改 path](https://stackoverflow.com/questions/4985938/navigate-to-a-xaml-page-in-a-different-assembly-in-windows-phone-7)。

# c# - Monotouch UICalendar Portrait Weekview

> ID：15261364
> 
> 赞同：1
> 
> 时间：2013-03-07T01:18:40.853
> 
> 标签：c#, ios, xamarin.ios

我正在使用来自 github 的 UICalendar 库，它允许内置 iOS 日历的外观。

周视图在纵向视图中不起作用。我想做的是在纵向视图中将我自己的 DVC 推到它的位置。但是，我无法弄清楚在哪里创建视图并将其推送到项目中的视图。我主要是在看`CalendarView.cs`

我实际上将日历代码导入到我的项目中，以便我可以更改日历并直接与我的项目进行交互。如果有人可以帮助我在纵向模式下选择“周”时如何推送我的自定义 dvc，那就太棒了！

干杯

日历库：[https ://github.com/Clancey/UICalendar](https://github.com/Clancey/UICalendar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:17:11.513

这是通过`setupCustomInitialisation`方法完成的。

在这种情况下将`Case 2:`修改所有内容，以便您可以添加视图

`CalendarView.cs`第 719 行

# javascript - 停止表单操作重定向或 href 重定向

> ID：15261365
> 
> 赞同：2
> 
> 时间：2013-03-07T01:18:49.220
> 
> 标签：javascript, jquery, ajax, redirect, shopify

请帮忙。我正在尝试将 shopifys 购物车集成到 shopify 本身之外。基本上我需要提交一个表单并防止它被重定向，这样我就可以允许客户在结账之前添加他想要的所有项目而不是一个。

我一直在尝试两种方法：

仅使用链接的第一种方法：

```
<a href="http://statevintage.myshopify.com/cart/add" onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href; var v = document.createElement('input'); v.setAttribute('type', 'hidden'); v.setAttribute('name', 'id'); v.setAttribute('value', '281514140'); f.appendChild(v); var r = document.createElement('input'); r.setAttribute('type', 'hidden'); r.setAttribute('name', 'return_to'); r.setAttribute('value', 'back'); f.appendChild(r); f.submit(); return false;">BUY NOW</a> 
```

使用带有 return_to 的表单提交的第二种方法：

```
<form action="http://statevintage.myshopify.com/cart/add" method="post">
<input type="hidden" name="id" value="281514140" />
<input type="hidden" name="return_to" value="back" />
<input type="submit" value="BUY NOW" />
</form> 
```

无论我做什么，即使使用返回错误脚本，我仍然会被发送到结帐！

这家伙正在使用相同的表单功能，只是带有数量选项，[http://sageinvoices.co.uk/](http://sageinvoices.co.uk/)但由于某种原因，它在您实际结帐之前从未离开他的网站。应该是因为

```
 <input type="hidden" name="return_to" value="back" /> 
```

我已经关注了我能找到的每一个维基，我就是无法阻止表单重定向到我的结帐页面。我计划生成购物车计数和商品显示，然后允许用户在需要时结帐。我也不能为我的客户改变平台！它必须适用于shopify。我也不能使用他们的应用程序或 iframe 方法。该站点必须跨浏览器兼容且速度快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:35:01.510

如果你`f.submit()`是表格，它会按照它所说的去做：提交表格;-)

可以防止默认提交行为，例如使用 jQuery：

```
$('#target').submit(function() {
  alert('Handler for .submit() called.');
  return false;
}); 
```

# php - PHP数字加一

> ID：15261368
> 
> 赞同：3
> 
> 时间：2013-03-07T01:19:07.313
> 
> 标签：php, math, numbers

这是一个棘手的问题：我想在这个数字上加 +1：012345675901，预期的结果是：`012345675902`。相反，我得到：`2739134`当我这样做时：

```
echo (012345675901+1); 
```

当我尝试：

```
echo ('012345675901'+1); 
```

我明白了：`12345675902`这非常接近我的需要，但它删除了前导零。

当我这样做时：

```
echo (int) 012345675901; 
```

我明白了`2739133`。我也试过 bcadd() 没有成功：

```
echo bcadd(012345675901, 1); 
```

这导致`2739134`.

我知道我在这里遗漏了一些东西。我将衷心感谢您的帮助！

**更新 1** 答案 1 说这个数字是八进制的：

```
function is_octal($x) {
    return decoct(octdec($x)) == $x;
}

$number = is_octal(012345675901);
echo var_dump($number); 
```

以上返回**false**。我以为我需要将它从八进制转换为普通字符串，但没有用。我无法避免不使用上面的数字——我只需要把它加一。

**编辑 2**

这是正确的代码：

```
$str = '012345675901';

$str1 = ltrim($str, '0'); // to remove the leading zero
$str2 = bcadd($str1, 1); // +1 to your result
$str3 = strlen($str); // get the length of your first number
echo str_pad($str2, $str3, '0', STR_PAD_LEFT); // apply zeros 
```

谢谢你们每一个人的帮助！上面的代码产生：`012345675902`如预期的那样

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T01:19:49.657

领先`0`的是将您的数字视为八进制。

作为字符串输出所需的前导`0`纯粹是一种表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:32:00.753

请参阅代码进行解释。

```
$str = "012345675901"; // your number
$str1 = ltrim($str, '0'); // to remove the leading zero
$str2 = bcadd($str1, 1); // +1 to your result
$str3 = strlen($str); // get the length of your first number
echo str_pad($str2, $str3, '0', STR_PAD_LEFT); // apply zeros 
```

# jquery - 无法将事件侦听器绑定到动态创建的元素

> ID：15261371
> 
> 赞同：0
> 
> 时间：2013-03-07T01:19:22.327
> 
> 标签：jquery, html

我正在尝试将事件侦听器添加到动态创建的元素中，但这样做时遇到了麻烦。在下面的代码中，我永远无法检测到它`<p>`已被插入，因此我从未看到控制台消息`Bar Inserted`。我做错了什么吗？

[http://jsfiddle.net/3msVK/](http://jsfiddle.net/3msVK/)

```
 $('#button').click( function() {
        $('#foo').append('<p>foo</p>');
        $('p').append('<p>bar</p>');
    });  
    $('#foo').bind('DOMNodeInserted', function() {
        console.log('Foo Inserted');
    });  
    $('p').on('DOMNodeInserted', 'p', function() {
        console.log('Bar Inserted');
    });    

    <div id="foo">Foo</div>
    <div id="button">BUTTON</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:23:38.973

当您第一次附加侦听器时，`$('p')`不选择任何内容（因为`p`页面上还没有 a ）。您应该将侦听器附加到父级，`#foo`：

```
$('#button').click( function() {
    $('#foo').append('<p>foo</p>');
    $('p').append('<p>bar</p>');
});  
$('#foo').bind('DOMNodeInserted', function() {
    console.log('Foo Inserted');
});  
$('#foo').on('DOMNodeInserted', 'p', function() {
    console.log('Bar Inserted');
});    

<div id="foo">Foo</div>
<div id="button">BUTTON</div> 
```

# jquery - 使用自定义 KnockoutJS 绑定绑定不显眼的验证

> ID：15261373
> 
> 赞同：11
> 
> 时间：2013-03-07T01:19:40.987
> 
> 标签：jquery, asp.net-mvc-4, knockout.js, unobtrusive-validation

将 MVC 4 与 KnockoutJS 一起使用。我可以将不显眼的验证与自定义敲除绑定绑定吗？我目前正在使用带有`afterRender`. 我希望它自动添加到绑定中。像这样：

```
ko.bindingHandlers.egtZipRep = {
    init: function (element, valueAccessor, allBindingsAccessor, context) {
      $(element).inputmask("99999", { "placeholder": " " });
      egtUniqueNameBinding(element, ++ko.bindingHandlers['uniqueName'].currentIndex);

      applyValidationRules(element); // Is it possible to do this here?

      ko.bindingHandlers.value.init(element, valueAccessor, allBindingsAccessor, context);
    }
}; 
```

我整天都在摆弄它。如果效率极低，我就无法做到这一点。

我目前的做法如下。也许我应该对此感到高兴。但我猜人们之前已经尝试过这个。

```
self.ReferenceAfterRender = function (element) {
    bindUnobtrusiveValidation(element);
}

// Bind validation on new content
function bindUnobtrusiveValidation(element) {
   // Bind to fields - must be called everytime new field is created
   $.validator.unobtrusive.parseDynamicContent(element);
}

$.validator.unobtrusive.parseDynamicContent = function (selector) {
// Use the normal unobstrusive.parse method
$.validator.unobtrusive.parse(selector);

// Get the relevant form
var form = $(selector).first().closest('form');

// Get the collections of unobstrusive validators, and jquery validators
// and compare the two
var unobtrusiveValidation = form.data('unobtrusiveValidation');
var validator = form.validate();

if (typeof (unobtrusiveValidation) != "undefined") {
  $.each(unobtrusiveValidation.options.rules, function (elname, elrules) {
    if (validator.settings.rules[elname] === undefined) {
      var args = {};
      $.extend(args, elrules);
      args.messages = unobtrusiveValidation.options.messages[elname];
      $('[name=' + elname + ']').rules("add", args);
    } else {
      $.each(elrules, function (rulename, data) {
        if (validator.settings.rules[elname][rulename] === undefined) {
          var args = {};
          args[rulename] = data;
          args.messages = unobtrusiveValidation.options.messages[elname][rulename];
          $('[name=' + elname + ']').rules("add", args);
        }
      });
    }
  });
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T12:10:30.217

有趣的问题！这是一个**纯粹的 KnockoutJS + VanillaJS 解决方案**。可能会有一些皱纹、跨浏览器的东西（我在看着你，IE！）和粗糙的边缘。如果您愿意，请在评论中告诉我或建议更新答案。

* * *

**ViewModel 和验证规则：**
验证规则应该接近 ViewModel 的属性，很像 .NET 中的属性。KnockoutJS 的文档建议为此目的使用[扩展程序。](http://knockoutjs.com/documentation/extenders.html)用法如下所示：

```
self.name = ko.observable("Bob-Martin");
self.name = self.name.extend({ regex: { pattern: "^[^0-9]*$", message: "No digits plz!" } })
self.name = self.name.extend({ regex: { pattern: "^[^-]*$", message: "No dashes plz!" } }); 
```

**扩展器的代码：**
文档中的扩展器非常简单。这是处理多个验证错误的替代方法（尽管它需要对具有相同消息的多个规则进行一些工作）：

```
ko.extenders.regex = function(target, options) {
    options = options || {};
    var regexp = new RegExp(options.pattern || ".*");
    var message = options.message || "regex is mad at you, bro!";

    // Only create sub-observable if it hasn't been created yet
    target.errors = target.errors || ko.observableArray();

    function validate(newValue) {
        var matched = regexp.test(newValue);

        if (!matched && target.errors.indexOf(message) == -1) {
            target.errors.push(message);
        }
        else if (matched && target.errors.indexOf(message) >= 0) {
            // TODO: support multiple extender instances with same 
            // message yet different pattern.
            target.errors.remove(message);
        }
    }

    validate(target()); //initial validation
    target.subscribe(validate); //validate whenever the value changes
    return target; //return the original observable
}; 
```

**验证消息模板：**
为了使视图 DRY 和验证不显眼，我为验证错误定义了一个模板，如下所示：

```
<script type="text/html" id="validation">
    <span data-bind="foreach: $data" class="errors">
        <span data-bind='text: $data'> </span>    
    </span>
</script> 
```

**视图：**
实际的视图可以很简单：

```
<p>Name: <input data-bind='valueWithValidation: name' /></p> 
```

*Unobtrusive 和 DRY*，因为这里没有带有验证消息的标记。（如果您想要特殊标记进行验证，您*可以*只使用`value`绑定并为 . 创建单独的标记`name.errors`。）

**自定义绑定：**
自[定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)会按顺序执行：

1.  在输入字段之后注入模板。
2.  将正确的模板绑定与`name`可观察对象作为数据应用。
3.  将其余部分传递给`value`and`valueUpdate`绑定。

这是绑定（可能需要一些重构，但 jQuery/javascript 喜欢）：

```
ko.bindingHandlers.valueWithValidation = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        // Interception! Add validation markup to the DOM and
        // apply the template binding to it. Some of this code
        // can be more elegant, especially if you use jQuery or
        // a similar library.
        var validationElement = document.createElement("span");
        element.parentNode.insertBefore(validationElement, element.nextSibling);
        ko.applyBindingsToNode(validationElement, { template: { name: 'validation', data: valueAccessor().errors } });

        // The rest of this binding is handled by the default
        // value binding. Pass it on!
        ko.applyBindingsToNode(element, { value: valueAccessor(), valueUpdate: 'afterkeydown' });
    }
}; 
```

**演示：**
要查看所有这些操作，请查看[此 jsfiddle](http://jsfiddle.net/jeroenheijmans/X8gWd/)。

# ember.js - {{outlet}}、{{view}}、{{render}} 和 {{control}} 助手

> ID：15261377
> 
> 赞同：11
> 
> 时间：2013-03-07T01:19:58.963
> 
> 标签：ember.js

我正在尝试组合一个简单的主详细信息 Ember 应用程序。一侧是目录*树*，另一侧是文件列表。

Ember 提供了很少的助手来将上下文渲染到视图中。我可以使用其中哪些：

1.  目录树的子树。
2.  详细列表。

事实上，如果有人可以指出我可以阅读的任何文档，了解`{{render view}}`,`{{view view}}`和`{{control view}}`helpers 之间的区别以及如何正确使用它们，那将非常有帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-07T09:41:03.353

`{{view "directory"}}`在当前控制器的上下文中呈现视图。

`{{render "directory"}}`在单例的上下文中`App.DirectoryView`使用模板渲染视图`directory``App.DirectoryController`

`{{control directory}}`行为方式与每次渲染时`render`创建一个新实例的方式相同（与每次都使用相同的控制器实例不同）。`App.DirectoryController``render`

### 2014 年 2 月 18 日更新：`{{control}}`已被删除。

最后两个助手相对较新，因此没有太多关于它们的文档。[您可以在此处](http://emberjs.com/guides/views/inserting-views-in-templates/)找到`{{view}}`文档。

现在查看您的用例，我认为您不需要任何这些帮助程序。只需使用嵌套路由和`{{outlet}}`助手，它就应该可以工作。

```
App.Router.map(function(){
  this.resource('directories', function() {
     this.resource('directory', { path: '/:directory_id'}, function() {
       this.route('files');
     });
  });
}); 
```

您可以按照[本指南](http://emberjs.com/guides/routing/defining-your-routes/)在此基础上进行构建。

### 更新：`{{render}}`如果您传递模型，现在每次都会创建一个新实例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-07T09:48:31.700

**有关帮助程序渲染、部分、出口和模板**的非常好的解释，请查看这个[问题](https://stackoverflow.com/questions/14802223/different-rendering-techniques-in-emberjs-handlebars-template/14802424#14802424)。

作为一个粗略的总结，如何使用这些助手：

**{{render "navigation"}}** -> 在这个地方渲染 NavigationController 和 NavigationView。这对于控制器和视图不变的地方很有用，例如导航。

**{{outlet "detailsOutlet"}}** -> 这将提供一个存根/挂钩/点，您可以在其中渲染组件（控制器 + 视图）。可以将它与路由的[渲染方法一起使用。](http://emberjs.com/api/classes/Ember.Route.html#method_render)在您的情况下，您可能会有一个看起来像这样的详细信息路线。这会将带有 DetailsView 的 DetailsController 渲染到索引模板的出口“detailsOutlet”中。

```
App.DetailsRoute = Ember.Route.extend({
  renderTemplate: function() {
    this.render('details', {   // the template/view to render -> results in App.DetailsView
      into: 'index',          // the template to render into -> where the outlet is defined
      outlet: 'detailsOutlet',       // the name of the outlet in that template -> see above
    });
  }
}); 
```

**{{view App.DetailsView}}** -> 这将呈现给定的视图，同时保留当前的上下文/控制器。可能会更改上下文，例如使用您的主实体并将其详细信息传递给如下视图：

> {{view App.DetailsView contextBinding="masterEntity.details"}}

当您想将组件的某些部分封装在子视图中时，此助手很有用，这些部分具有自己的自定义逻辑，例如处理动作/事件。

**{{control}}**我知道 control 每次使用时都会实例化一个新控制器，但我看不出它适合你，也没有使用它的好例子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T04:25:35.003

了解 ember {{render}}、{{template}}、{{view}}、{{control}} 之间的区别

你可以参考这篇文章

[http://darthdeus.github.io/blog/2013/02/10/render-control-partial-view/](http://darthdeus.github.io/blog/2013/02/10/render-control-partial-view/)

# c - (.text+0xb6f): 未定义的对 `src_simple' 的引用

> ID：15261387
> 
> 赞同：-1
> 
> 时间：2013-03-07T01:21:44.273
> 
> 标签：c

我正在使用 libresample 重新采样数据。我在我的 C 代码中包含了 samplerate.h，但是当我编译它时显示错误 (.text+0xb6f): undefined reference to `src_simple' 有没有人有解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:08:45.257

根据[gcc 手册的“链接选项”部分](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Link-Options.html#Link-Options)，您应该能够链接到 lib *resample*，前提是 lib *resample* .a 存在于您的系统用于库的任何目录中，通过调用`gcc your_file.c -lresample`.

# kendo-ui - kendo.toString() 用于 MVVM 绑定上的日期

> ID：15261389
> 
> 赞同：1
> 
> 时间：2013-03-07T01:21:50.420
> 
> 标签：kendo-ui

当使用 Kendo DatePicker 和 Date(-62135578800000) 从编码到数组时，我的字符串日期值为 2013 年 3 月 2 日。我正在将 Kendo 数组绑定到模板，并希望日期对用户友好，例如“Sat, Mar 2”。我试过 toString 和 ParseDate 没有运气。我创建了一个小提琴[http://jsfiddle.net/srakestraw/Q3MF8/](http://jsfiddle.net/srakestraw/Q3MF8/)，但无法弄清楚我做错了什么。

当我加载页面时，我使用 Json.Encode 得到一个日期值，如 Date(-62135578800000)，见下文。

```
var viewModel = kendo.observable({
                slots: @Html.Raw(Json.Encode(Model.Slots))
              }); 
```

在前端，用户使用 KendoUI 日期选择器选择一个日期，然后我将值推送到数组中。我使用了错误的日期格式吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:35:11.740

问题是它`Date(-62135578800000)`不是一个有效的 JavaScript Date 对象：

`alert(typeof Date(-62135578800000)); // string`

这是更新的 jsfiddle：http: [//jsfiddle.net/Q3MF8/3/](http://jsfiddle.net/Q3MF8/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T19:40:19.970

这将以您可以使用的方式（ISO 8601）格式化日期，而不是那些可怕的 Json.Encode 格式化程序怪物。

```
@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model)) 
```

# c++ - 文件 I/O C++ ifstream 语法

> ID：15261391
> 
> 赞同：0
> 
> 时间：2013-03-07T01:21:51.510
> 
> 标签：c++, io, iostream, ifstream, file-io

我正在尝试编写一个程序来读取文本文件并执行它在文本文件中读取的数学运算。

例子： `+ 45 35`

我正在使用输入流来读取该文本块并在函数中的数字之前执行数学运算。

我已经寻找了一个多小时来寻找正确的语法，我正要扯掉我的头发。

我完全被困在弄清楚如何让流函数读取每个字符直到空白为止，但它一次读取一个字符，而 getline 甚至不是一个可识别的函数，我认为这对我的事业有帮助。

这就是我正在使用的，一次读取一个字符

```
char ch; 
inFile >> ch; 
```

什么是命令流内读取文本块直到它到达空白的正确语法是什么，有人可以建议我如何将文本文件中的数字加在一起吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:34:08.537

您是否有特定原因专注于使用文本块而不仅仅是读取值？

```
#include <iostream>
#include <sstream>
using namespace std;

int main()
{
    istringstream inf("   +  42   100");
    char op;
    int num1, num2;
    inf >> op >> num1 >> num2;
    cout << "Op: " << op << endl;
    cout << "Num1: " << num1 << endl;
    cout << "Num2: " << num2 << endl;

    // pin the op-char to the first operand
    istringstream inf2("-43 101");
    inf2 >> op >> num1 >> num2;
    cout << "Op: " << op << endl;
    cout << "Num1: " << num1 << endl;
    cout << "Num2: " << num2 << endl;
    return 0;
} 
```

**输出**

```
Op: +
Num1: 42
Num2: 100
Op: -
Num1: 43
Num2: 101 
```

如果您想使用保证每行只有一个操作和两个操作数的输入文件来执行此操作，则将是这样的：

```
ifstream inf(fname);
char op;
int o1, o2;
while (inf >> op >> o1 >> o2)
{
    // use your op and operands here.
    // switch (op)... etc.
} 
```

# hibernate - 使用 HSQLDB 内存数据库时，Hibernate/JPA EntityManager 不接受 HSQL 脚本的参数

> ID：15261394
> 
> 赞同：2
> 
> 时间：2013-03-07T01:22:08.817
> 
> 标签：hibernate, jpa, hsqldb, in-memory-database

以下代码适用于**MySQL**。

但是在切换**HSQLDB 内存数据库**（用于单元测试）时，相同的代码会失败，

> 查询 query = entityManager.createQuery("SELECT c FROM CartInvoiceEntity c WHERE c.invoiceId = :invoiceId");
> 
> query.setParameter("invoiceId", cartInvoiceEntity.getInvoiceId());

带有以下错误消息：

**org.hibernate.QueryParameterException：找不到命名参数 [invoiceId]**

调试时检查查询对象，我发现查询对象有一个参数字段。使用 MySQL 时，此参数在其 HashMap 中包含“invoiceId”。但是当切换到 HSQLDB 时，这个 HashMap 是空的——这就是抛出异常的原因。问题是为什么使用 HSQLDB 时 HashMap 为空。

以下是相关的 Maven 依赖项

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.16</version>
    </dependency>
    <dependency>
        <groupId>hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.10</version>
        <scope>test</scope>
    </dependency> 
```

从依赖层次结构中，我可以看到使用了 hibernate-jpa-2.0.api:1.0.1.Final，它是从 hibernate-core 和 hibernate-entitymanager JAR 中间接引用的。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:41:45.503

刚刚找到根本原因。在进行单元测试时（不一定有或没有 HSQLDB 等内存数据库），不知何故，Spring 组件扫描机制不适用于 JPA 持久性设置。这会导致 Hibernate 在查找参数时失败。Hibernate 仅在知道实体类时才查找参数。

我的解决方法是直接**将类条目（用于实体类）添加到 persistence.xml**中（在创建 EntityManagerFactory 时不知道如何在*org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean中执行此操作）。*

```
<persistence-unit name="my_unit">
    ...
    <class>my.entity.CartInvoiceEntity</class>
    ...
</persistence-unit> 
```

看：

> [http://www.springbyexample.org/examples/one-to-many-jpa-hibernate-config-jpa-config.html](http://www.springbyexample.org/examples/one-to-many-jpa-hibernate-config-jpa-config.html) [http://www.aoiblog.com/wp-content/uploads/2010/02/two .jpg](http://www.aoiblog.com/wp-content/uploads/2010/02/two.jpg)

但是我确实遇到了其他一些由于 HSQLDB 本身引起的问题，如下所示。

> 引起：org.hibernate.exception.GenericJDBCException：不支持该函数

此问题已通过升级 HSQLDB 的版本得到解决。请参阅以下 stackoverflow 链接：

> [休眠不支持的功能](https://stackoverflow.com/questions/10013975/function-not-supported-from-hibernate)

谢谢。

# java - 检查 HttpServletRequest 的连接是否仍然打开？

> ID：15261398
> 
> 赞同：2
> 
> 时间：2013-03-07T01:22:43.560
> 
> 标签：java, servlets, connection, jetty, httprequest

使用在 localhost 上运行的客户端和服务器的合成负载，我通过 tcpdump 和 netstat 验证客户端正在向服务器发送 FIN 数据包，但是连接卡在 CLOSE_WAIT 中，而请求仍在服务器上排队（我正在使用带有排队线程池的 Jetty）。当池中有一个工作线程可用时，即使客户端已经关闭了连接，servlet 也会照常处理该请求。

我想要的是一种测试连接是否已经关闭的方法，以防止服务器处理已经在客户端超时的请求（我知道我可以在客户端上设置一个带有时间戳的 http 标头并检查它服务器只要时钟同步，但我更愿意检查连接以查看它是否仍然打开）。

我正在尝试做的事情是否可能，如果可以，如何做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:55:19.993

我不这么认为。FIN 并不意味着连接断开。A向B发送一些数据，然后是FIN是完全有效的；然后 A 继续从 B 读取。这种半关闭状态没有错。

您更好的选择是提高服务器吞吐量，这样客户端就不必等待这么长时间。

# automation - 什么是补码以及如何绘制图形

> ID：15261404
> 
> 赞同：1
> 
> 时间：2013-03-07T01:23:20.777
> 
> 标签：automation, build-automation, dfa

我不知道在哪里问这个问题，在这里或在[数学](https://math.stackexchange.com/)部分或在[理论 cs](https://cstheory.stackexchange.com/)中。我在这里和那里看到过有关此主题的问题。

我也看到了[这个问题](https://stackoverflow.com/questions/14802732/finding-the-complement-of-a-dfa)，但它对我来说太高级了，我们还没有了解正则表达式是什么，所以我无法理解这个问题。

我问一个简单的问题，什么是补语？老师告诉我们的，我忘了说实话，我书中的图表也不清楚。

例如：

```
Let the Alphabet {0,1}. 
L1 = { w | w ends with 0}.
L2 = { w | w contains a positive even number of 0}.
Precise the complementary of L3, then give a DFA which accept it. 
```

那是我的作业，只要给我任何例子，我会自己解决，如果你能画出 L1 和 L2 的图并告诉我补码在哪里，那就太好了，这就是我理解的方式联合是，图表使它变得容易。

顺便说一句，老师更喜欢我们在线提交作业，有没有什么方法可以画出DFA？任何软件或网络应用程序？我不想用颜料

# jquery - 这段代码有什么问题吗？

> ID：15261405
> 
> 赞同：-4
> 
> 时间：2013-03-07T01:23:37.963
> 
> 标签：jquery

这段代码有问题，但我没有足够的经验来解决这个问题。希望得到一些帮助。

```
jQuery(document).ready(function(){

    $('#contactform').submit(function(){

        var action = $(this).attr('action');

        $("#message").slideUp(750,function() {
        $('#message').hide();

          $('#submit')
            .attr('disabled','disabled');
     if($('#process').val()=='1'){
        $.post(action, $('#contactform').serialize(),
            function(data){
                document.getElementById('message').innerHTML = data;
                $('#message').slideDown('slow');
                $('#contactform img.loader').fadeOut('slow',function(){$(this).remove();
                                                                      });
                $('#submit').removeAttr('disabled');
                if(data.match('success') != null) $('#contactform').slideUp('slow');

            }
        );
    else {
        $.post(action, $('#contactform').serialize(),
        function(data){
                document.getElementById('message').innerHTML = data;
                $('#message').slideDown('slow');
                $('#contactform img.loader').fadeOut('slow',function(){$(this).remove();
                                                                      });
                $('#submit').removeAttr('disabled');
                if(data.match('success') !== null) $('#contactform').slideUp('slow');
            }
        );

        });

        return false;
        });
    });

}); 
```

谢谢！！！这是HTML：

```
 <div id="message"></div>

    <form method="post" action="contact.php" name="contactform" id="contactform">

    <fieldset>

    <input type="hidden" name="process" id="process" value="1">

    <label for="name">Name<span class="required">*</span></label>
    <input name="name" type="text" id="name" size="30" value="" />

    <br />
    <label for="email">Email<span class="required">*</span></label>
    <input name="email" type="text" id="email" size="30" value="" />

    <br />
    <label for="phone">Phone<span class="required">*</span></label>
    <input name="phone" type="tel" id="phone" size="30" value="" />

    <br />
    <label for="comments">Comments<span class="required">*</span></label>
    <textarea name="comments" cols="40" rows="15" id="comments" style="width: 350px;"></textarea>

    <br />
    <label>Are you human?<span class="required">*</span></label>

    <label class="accesskey" for="verify">&nbsp;&nbsp;&nbsp;3 + 1 =</label>
    <input class="accesskey" name="verify" id="verify" size="4" value="" style="width: 30px;" /><br /><br />

    <input type="submit" class="submit" id="submit" value="Submit" />

    </fieldset>

    </form>
</div><!--end contact--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:28:23.427

你错过了一个`}`before`else {`和 end of the `else`before `return false`should be `}`，而不是`});` 至少这是一回事。

还有令人不安的缺乏评论。

```
} else {  // <= HERE add }
    $.post(action, $('#contactform').serialize(),
    function(data){
            document.getElementById('message').innerHTML = data;
            $('#message').slideDown('slow');
            $('#contactform img.loader').fadeOut('slow',function(){$(this).remove();
                                                                  });
            $('#submit').removeAttr('disabled');
            if(data.match('success') !== null) $('#contactform').slideUp('slow');
        }
    );

} // <= HERE remove );

return false; 
```

# c++ - 需要帮助穿越一棵树；霍夫曼编码

> ID：15261408
> 
> 赞同：1
> 
> 时间：2013-03-07T01:23:49.250
> 
> 标签：c++

我创建了一个霍夫曼树，它似乎是正确的，但是在遍历数据结构方面我很弱。我根据根树中包含的信息在纸上画出了树，它看起来很好，但是我的代码有问题，我不知道如何修复它。

第一个 0 持续存在，每次我正确时，它似乎都会在后面附加一个 0。

```
example:
L: 01
H: 1111

but my traversal gives me:
L: 001
H: 01010101 
```

代码片段

```
struct node
{
int symbol;
int frequency;
node* left;
node* right;
};

void Huffman::generateCode(node *tree, std::string code)
{
    if(tree->left == NULL && tree->right == NULL)
    {
        //std::cout << "Leaf Found: " << tree->symbol << "\t" << code << std::endl;
        mapCode.insert(std::pair<int, std::string>(tree->symbol,code));
    }
    if(tree->left != NULL)
    {
        code.append("0");
        generateCode(tree->left, code);
    }
    if(tree->right != NULL)
    {
        code.append("1");
        generateCode(tree->right, code);
    }
} 
```

更新已解决：我发现 code.append(); 功能搞砸了。我也改了代码+“0”；

```
void Huffman::generateCode(node *tree, std::string code)
{
    if(tree->left == NULL && tree->right == NULL)
    {
        std::cout << "Leaf Found: " << tree->symbol << "\t" << code << std::endl;
        mapCode.insert(std::pair<int, std::string>(tree->symbol,code));
    }
    if(tree->left != NULL)
    {
        generateCode(tree->left, code + "0");
    }
    if(tree->right != NULL)
    {
        generateCode(tree->right, code + "1");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:30:09.003

你错过了`else`s：

```
void Huffman::generateCode(node *tree, std::string code)
{
    if(tree->left == NULL && tree->right == NULL)
    {
        //std::cout << "Leaf Found: " << tree->symbol << "\t" << code << std::endl;
        mapCode.insert(std::pair<int, std::string>(tree->symbol,code));
    }
    else if(tree->left != NULL)
    {
        code.append("0");
        generateCode(tree->left, code);
    }
    else if(tree->right != NULL)
    {
        code.append("1");
        generateCode(tree->right, code);
    }
} 
```

# github - 有没有办法使用 Github 的 API 获取每种语言的存储库数量？

> ID：15261418
> 
> 赞同：3
> 
> 时间：2013-03-07T01:24:11.780
> 
> 标签：github, github-api

我想使用[Github API](http://developer.github.com/v3/)来检索每种语言的存储库数量。例如，

```
C++ 200,134
Java 175,432
C# 123,453
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:44:08.083

唯一具有过滤器参数的 API 将由[搜索存储库](http://developer.github.com/v3/search/#search-repositories)之一：

```
GET /legacy/repos/search/:keyword 
```

带有可选参数[language](https://github.com/languages)。

但这会返回多个页面上的存储库列表，因此您仍然需要自己计算总和。

请注意，最近（如 2013 年 3 月上旬），**[API 可能会将结果限制为仅 1000 个结果](https://twitter.com/go_nuts/status/309816657491156992)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-09T17:56:53.573

按照[VonC 的回答](https://stackoverflow.com/a/15269057/399105)，[搜索 API](https://developer.github.com/v3/search/#search-repositories)现在将为您提供与您的查询匹配的结果总数。因此，您可以使用它来获取一种特定语言的存储库总数：

```
GET /search/repositories?q=language:languagename 
```

语言名称不区分大小写，必须是 URL 编码的，并且空格必须替换为破折号。例如（目标 C++）：

```
GET /search/repositories?q=language:objective-c%2B%2B

{
    "total_count": 2090,
    ... 
```

# php - CodeIgniter 缓存文件删除公共访问

> ID：15261421
> 
> 赞同：0
> 
> 时间：2013-03-07T01:24:23.740
> 
> 标签：php, codeigniter, caching

我正在使用 Phil Sturgeon 的缓存库。

我将缓存文件存储在“root/app/cache”文件夹中。

“app”文件夹有“.htaccess”和“拒绝所有”，所以当你尝试在浏览器中去那里时，你会收到“禁止”消息。

“缓存”文件夹没有“.htaccess”，但是当我尝试去那里时，我仍然收到“禁止”消息。这一切都很好。

但是当我尝试转到该文件夹​​中的特定缓存文件时，我实际上可以看到该文件的内容。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:24:29.070

您可以做的是在 .htaccess 中添加一个 RewriteCondition 并重定向到一个空的地方，从而导致 404 错误。任何事情都可能奏效，只要举个例子，把它改成你的方便……

```
RewriteEngine On    
RewriteRule   ^/apps/(.*)  ^/someplaceelse/$1 [L,R] 
```

谢谢！

@leo。

# javascript - 如何将外部谷歌地图数据作为 KML 从 HttpResponse 直接获取到 Javascript 或 jQuery 中？

> ID：15261424
> 
> 赞同：1
> 
> 时间：2013-03-07T01:24:27.673
> 
> 标签：javascript, jquery, google-maps-api-3, kml, httpresponse

我正在做一个项目，我必须从几个外部 Google Maps 地图中获取数据（标记等）。我在客户端用 Javascript 写这个，理论上它都可以正常工作，但问题是当我使用 .get() 或 .ajax() 为每个地图调用 KML 生成 url 时，它会处理HttpGet-request，并返回 .KML 文件.. 但它将其放置在 HttpResponse 的“Content-disposition: attachment; filename=file.KML”属性中。

有没有办法用 JS/jQuery 把那个文件从那里取出来？读取文件本身没有问题，它是从 ResponseHeader 中取出的，这是问题所在，因为我无法将它本地保存在服务器上。

有任何想法吗？非常感谢您的洞察力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:46:19.120

geoxml3和[geoxml](http://code.google.com/p/geoxml3/) [-v3](http://code.google.com/p/geoxml-v3/)都是 Google Maps API v3 的第三方 KML 解析器。两者都通过 javascript 检索 KML 并将其呈现在 Google Maps API v3 地图上作为本机 Google Maps API v3 对象。两者都受到同域 XmlHttpRequest 对象安全限制，但可以通过使用代理来克服。

使用 geoxml3（通过代理）呈现 Google 地图“我的地点”KML 的示例：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?http%3A%2F%2Fmaps.google.com%2Fmaps%2Fms%3Fauthuser% 3D0%26vps%3D1%26ie%3DUTF8%26msa%3D0%26output%3Dkml%26msid%3D207980401364810598110.0004ab78bf6d3aeea442f](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?http%3A%2F%2Fmaps.google.com%2Fmaps%2Fms%3Fauthuser%3D0%26vps%3D1%26ie%3DUTF8%26msa%3D0%26output%3Dkml%26msid%3D207980401364810598110.0004ab78bf6d3aeea442f)

您的 KML：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?https%3A%2F%2Fmaps.google.nl%2Fmaps%2Fms%3Fie% 3DUTF8%26authuser%3D0%26msa%3D0%26output%3Dkml%26msid%3D211591338385347280942.0004d68aa8ea9e70e23f8](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?https%3A%2F%2Fmaps.google.nl%2Fmaps%2Fms%3Fie%3DUTF8%26authuser%3D0%26msa%3D0%26output%3Dkml%26msid%3D211591338385347280942.0004d68aa8ea9e70e23f8)

# java - 我怎样才能让java等待

> ID：15261425
> 
> 赞同：-3
> 
> 时间：2013-03-07T01:24:29.430
> 
> 标签：java, multithreading, loops, while-loop, wait

我问了一个关于我的实际问题的问题，但没有出现解决方案，所以我会尝试更加开放，我怎样才能让 java 等待某个输入？目前，我有一个半无限的 while 循环，它查看一个在另一个类中触发 ActionEvent 之前不会更新的变量。但是，我已经阅读了有关线程和其他一些内容的内容，很好奇是否有人可以详细说明这个主题？基本上我正在使用 GUI，我的窗口会弹出并要求输入密码，当按下按钮时会更改变量以退出循环。最奇怪的是它可以在学校计算机上运行，​​但不能在我自己的计算机上运行。我什至重新安装了我的 JDK，但事实并非如此。提出这可能是一个速度问题，但是通过打印语句，我看到变量已更新，而我猜只是停止查看它。

```
private static boolean running=true;

while(running){
}

...

public void actionPerformed(ActionEvent e){
    String temp = new String("");
    for(int x=0;x<passwordInput.getPassword().length;x++)
        temp+=passwordInput.getPassword()[x];
    PWCoder.passwordCheck(temp);
}

...

public static void passwordCheck(String pass){
if(pass.equals(password)){
    correctPW = true;
}
else if(pass.equals(overKey))
    PWCoder.override(password);
doneRunning();
}

...

public static void doneRunning(){
    running = false;
} 
```

有它会帮助的代码。应该或多或少按照它执行的顺序，但它不是一个块，而是多个类和所有。我尝试使用 volatile，但没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:32:00.603

如果您在多个线程中更新和读取变量（可能是原始值），您是否使用*volatile*关键字声明了变量。为了优化，您的线程可能已经缓存了值并且没有读取更改的值 --- volatile 强制 JVM 每次都读取变量而不缓存它。

除了声明变量 volatile 之外，如果不是原始字段，您可以考虑使用*同步*块来读取/写入变量，并且需要更多的原子操作来读取/写入值。

在您更新的代码示例中，*运行*变量和*密码*变量应声明为*volatile*，如下所示：

```
private static volatile boolean running = true; 
```

# ruby - 为什么不将属性传递给 Model.new 工作？

> ID：15261428
> 
> 赞同：0
> 
> 时间：2013-03-07T01:24:39.233
> 
> 标签：ruby, activerecord

我有一个`WordpressBlogger`具有这些属性的模型：（注意这些列的特定顺序：screen_name 是在生成表之后添加的）

```
id, rss_feed_id, blog_url, year_founded, created_at, updated_at, screen_name, latest_entry 
```

当我`blogger = WordpressBlogger.new(:screen_name => "test")`在控制台中执行此操作时，它似乎没有返回设置了 screen_name 的模型。

相反，我得到了这个：

```
=> #<WordpressBlogger id: nil, rss_feed_id: nil, blog_url: nil, year_founded: nil, created_at: nil, updated_at: nil, screen_name: nil, latest_entry: nil> 
```

然而，当我`blogger = WordpressBlogger.new(:year_founded => 2011)`在控制台中执行此操作时，它会返回一个具有此属性集的模型。

```
=> #<WordpressBlogger id: nil, rss_feed_id: nil, blog_url: nil, year_founded: 2011, created_at: nil, updated_at: nil, screen_name: nil, latest_entry: nil> 
```

`created_at`这是一个奇怪的 Rails 错误，如果数据库中的列是在 Rails 创建的属性之后，例如和，则属性没有设置`updated_at`？

更新：我忘了将它添加到 attr_accessible。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:29:00.957

最有可能的是，类中有对[attr_accessible](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)的引用`WordpressBlogger`。您可能需要将 year_founded 添加到允许批量分配的 attr_accessible 元素列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:29:13.827

它实际上并没有创建模型。注意没有`id`设置。要创建它，您必须要么

```
blogger = WordpressBlogger.new(:screen_name => "test")
blogger.save 
```

或者

```
blogger = WordpressBlogger.create(:screen_name => "test") 
```

这在你的模型中吗？

```
attr_accessor :screen_name, :year_founded 
```

或者你可能不得不再次`exit`运行`rails c`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:34:37.903

您很可能在运行迁移时运行了控制台。快速`reload!`或重新启动控制台应使所有列可见。

# objective-c - char、wchar_t 和 unichar

> ID：15261429
> 
> 赞同：2
> 
> 时间：2013-03-07T01:24:41.407
> 
> 标签：objective-c, unichar

我正在编写我的第一个 Objective-C/Cocoa 程序。（我已经知道 Windows 世界中的 C 和 C++，即 Visual C++。）看起来 Cocoa 可以使用该`char`类型，但更喜欢该`unichar`类型。看起来 Cocoa 也不太关心 wchar_t。那么我应该为我的代码的 C 部分使用什么类型，例如在结构中？如果答案是，`unichar`那么 , 等的等价物`const wchar_t* myString = L"this is my wchar string";`是什么`wcslcpy`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:38:10.623

除了不熟悉之外，还有什么理由不谈论 NSStrings 吗？

NSStrings 是 Objective C 中的标准字符串类型。除非您尝试将一些交叉编译的 C++ 库构建到 iOS / Macintosh 应用程序中，否则可能没有太多理由坚持使用 C 类型。

[这是一个相关问题](https://stackoverflow.com/questions/7753262/how-to-convert-wchar-t-to-nsstring)，其中还包括更多信息和某人的超级有用的一组方法，这些方法将 wchar_t 转换为 NSString 对象，反之亦然。

# .net - Powershell - 更改环境变量的值

> ID：15261431
> 
> 赞同：7
> 
> 时间：2013-03-07T01:24:47.000
> 
> 标签：.net, powershell, configuration, ssis

有没有办法通过powershell更改环境变量（系统）的值？我只能手动更改值并在重新启动 powershell 后查看更改。上下文：我们正在尝试动态设置间接 SSIS 配置的值，并且每个环境的配置文件都不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T02:36:55.760

要在系统级别设置环境变量（并使它们持久化），您需要使用 .Net Framework 方法`[Environment]::SetEnvironmentVariable()`

在当前会话中，您可以通过`$env:NAME = VALUE`.

请参阅[http://technet.microsoft.com/en-us/library/ff730964.aspx](http://technet.microsoft.com/en-us/library/ff730964.aspx)

# python - 在 Python 中使用 pygame 和 tkinter，如何使用同一个按钮暂停和取消暂停？

> ID：15261437
> 
> 赞同：0
> 
> 时间：2013-03-07T01:25:37.387
> 
> 标签：python, button, tkinter, pygame

Pygame 是您下载的一个扩展，它提供内置功能。我目前正在开发一个歌曲播放器，并且有一个暂停歌曲和取消暂停歌曲的按钮。如何组合这两个按钮，以便单击一次并暂停，然后再次单击并取消暂停等？我现在有两个功能需要合二为一，因为它们将分配给一个按钮..

这是我需要更改的代码：

```
def pausesong():
    pygame.mixer.music.pause()

def unpausesong():
    pygame.mixer.music.unpause() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-31T19:53:17.150

```
#resume song #pause the song
pause=False
a=0 #for testing
def pausesong():
    global index,a
    global pause
    a=a+1
    #print(pause,a)
    if pause == False:
        pygame.mixer.music.pause()
        pause = True
        print(pause,a)

    else:
        pygame.mixer.music.unpause()
        pause = False
        print(pause,a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:16:52.197

```
def play_pause():
    paused = not paused
    if paused: pygame.mixer.music.unpause()
    else: pygame.mixer.music.pause() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:26:41.367

我不熟悉 pygame，但一种简单的方法是添加一个可以检查的标志变量。

```
def pausesong():
    pygame.mixer.music.pause()
    paused = True

def unpausesong():
    pygame.mixer.music.unpause()
    paused = False 
```

然后在你的按钮事件中......

```
if paused:
    unpausesong()
else:
    pausesong() 
```

# linux - 创建一个 ruser 和 user 不同的进程

> ID：15261438
> 
> 赞同：2
> 
> 时间：2013-03-07T01:25:38.980
> 
> 标签：linux, perl, unix

任何人都可以帮助找到一种方法来创建一个用户和用户不同的进程吗？目前，我使用了这条线

```
sudo su david -c ./test.pl 
```

然后当我输入以下行以获取用户和用户时

```
ps -eo pid,user,ruser,fname,pcpu,nice,stime,time | grep test.pl
10322   david   david test.pl 12.4 20 13:37:00 01:38 
```

用户和用户仍然是相同的。我需要创建一个类似以下示例的流程：

```
ps -o user,ruser,comm -p 59515
    USER    RUSER COMMAND
    root csrethab xscreensaver 
```

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:48:27.093

[您可以通过设置特殊的$< 变量](http://perldoc.perl.org/perlvar.html#%24UID)在 perl 脚本中执行此操作。

这是一个例子：

```
system("ps -eo pid,user,ruser,fname,pcpu,nice,stime,time | grep $$");
$< = 1000;
print "Changed\n";
system("ps -eo pid,user,ruser,fname,pcpu,nice,stime,time | grep $$"); 
```

这将打印以下内容：

```
22460 root     root     perl      0.0   0 20:46 00:00:00
Changed
22460 root     jordan   perl      0.0   0 20:46 00:00:00 
```

在代码之外执行此操作的唯一方法是通过 setuid。setuid 位在 linux 的脚本中被忽略，因此 perl 无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:36:52.963

还有 sys::process 模块，它为你封装了这个：

[https://metacpan.org/pod/sys::process::user#SYNOPSIS](https://metacpan.org/pod/sys::process::user#SYNOPSIS)

# d3.js - 如何在 D3 强制布局中捕获击键事件？

> ID：15261447
> 
> 赞同：25
> 
> 时间：2013-03-07T01:27:31.130
> 
> 标签：d3.js, force-layout

我想响应针对我的力布局中节点的击键事件。我已经尝试添加我能想到的所有“keystroke”、“keypress”、“keyup”、“keydown”的变体，但它们都没有触发。我的鼠标事件触发得很好。我在 d3 源中找不到任何击键事件....有没有办法捕获击键？

```
 nodes.enter().append("circle")
            .on("click", function(d) { return d.clickHandler(self); })
            .on("mouseover", function(d) { return d.mouseOverHandler(self); })
            .on("mouseout", function(d) { return d.mouseOutHandler(self); })
            .on("keyup", function(d) { 
                console.log("keypress", d3.event); // also tried "keyup", "keydown", "key"
            })
            .classed("qNode", true)
            .call(force.drag); 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-07T03:47:00.487

我认为这里的问题是您正在尝试将键盘事件添加到不可聚焦的元素，尝试将`keydown`事件添加到可聚焦元素（在本例中为主体）：

```
d3.select("body")
    .on("keydown", function() { ... 
```

在这里，您可以使用 的属性`d3.event`，例如`d3.event.keyCode`，或者对于更特殊的情况，`d3.event.altKey`、`d3.event.ctrlKey`、`d3.event.shiftKey`等。

查看[KeyboardEvent 文档](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)也可能会有所帮助。

我在这里做了一个简单的键盘交互：http: [//jsfiddle.net/qAHC2/292/](http://jsfiddle.net/qAHC2/292/)

您可以通过创建一个变量来“选择”当前对象来扩展它以将这些键盘交互应用于 svg 元素：

```
var currentObject = null; 
```

然后在适当的鼠标事件方法期间更新此当前对象引用：

```
.on("mouseover", function() {currentObject = this;})
.on("mouseout", function() {currentObject = null;}); 
```

现在您可以在之前设置的键盘交互中使用此当前对象。

这是一个 jsfiddle 的实际操作：http: [//jsfiddle.net/qAHC2/295/](http://jsfiddle.net/qAHC2/295/)

# jquery - 如何使用 minimze 恢复 jquery 对话框

> ID：15261450
> 
> 赞同：0
> 
> 时间：2013-03-07T01:27:46.470
> 
> 标签：jquery, dialog

我正在尝试以编程方式单击还原按钮。

```
<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" style="white-space: nowrap;"><span class="ui-dialog-title" id="ui-dialog-title-module_scheduler" style="overflow: hidden; width: 112.21875px;"><img src="imgs/omButtons/omIcon.png" border="0" height="18"> Office Schedule</span><div class="ui-dialog-titlebar-buttonpane" style="position: absolute; top: 50%; right: 0.3em; margin-top: -10px; height: 18px;"><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button" style="position: static; top: auto; right: auto; margin: 0px;"><span class="ui-icon ui-icon-closethick">close</span></a><a class="ui-dialog-titlebar-maximize ui-corner-all" href="#" role="button" style="display: block;"><span class="ui-icon ui-icon-extlink">maximize</span></a><a class="ui-dialog-titlebar-restore ui-corner-all" href="#" role="button" style="display: block; right: 2.5em;"><span class="ui-icon ui-icon-newwin">restore</span></a><a class="ui-dialog-titlebar-minimize ui-corner-all" href="#" role="button" style="display: none;"><span class="ui-icon ui-icon-minus">minimize</span></a></div></div> 
```

我有

```
$('div [aria-labelledby="ui-dialog-title-module_scheduler"]').find('a .ui-dialog-titlebar-restore').click(); 
```

但是我不是 jQuery 专家，所以我猜某处的语法是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:59:37.767

你试过了`$('a.ui-dialog-titlebar-restore .ui-icon).click(function() {});`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:37:05.037

```
$('div[aria-labelledby=ui-dialog-title-module_scheduler]').find('a.ui-dialog-titlebar-restore').click(); 
```

删除空格和引号，做到了。谢谢。

# html - CSS 悬停效果

> ID：15261451
> 
> 赞同：0
> 
> 时间：2013-03-07T01:27:56.453
> 
> 标签：html, css, hover, effects

我正在创建一个网站，并希望通过加载另一个我在 Photoshop 中创建的颜色稍有不同的图像/按钮来在我的按钮上添加悬停效果。

当我应用代码时，什么也没有发生。

这是我的代码：

CSS：

```
#main{
    position: relative;
    background-color:#ececec;
    height:900px;
    margin-top: 10px;
    margin-left: 10px;
    margin-right: 10px;

}

    #main .button2{

        position: absolute;
        left:0.5%;
        top: 71.5%;
        z-index:20;
        width:170px;
        height:40px;
    }
    #main .button2:hover{
        background-image : url(images/buttBootsRollover.png);  

    } 
```

HTML：

```
<div id="main">
<article>

<section>
    <a href="#index.php" > <img src="images/buttGloves.png" class="button" /></a>
    <a href="#index.php" > <img src="images/buttBoots.png" class="button2" /></a>
    <a href="#index.php" > <img src="images/buttEqu.png" class="button3" /></a>
</section>

</article> 
```

这是可能提供更好概述的图片： ![在此处输入图像描述](../Images/acd307602410c28a50393d48534445e5.png)

最终我想在所有 9 个按钮上添加相同的悬停效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:32:39.227

只要有一个背景图像并隐藏一点。

例如 - 像这里演示的那样加倍[http://jsfiddle.net/edheal/Qb7YG](http://jsfiddle.net/edheal/Qb7YG)

这是代码

CSS：

```
#wibble
{
    background-image: url(http://well-spun.co.uk/portfolio/technologies/images/rollover.png);
    background-position: left top;
    background-repeat: no-repeat;
    height: 14px;
    width: 200px;
}

#wibble:hover
{
    background-position: left -14px;
} 
```

HTML：

```
<div id="wibble">
</div> 
```

图像高 28 像素 - 仅显示上半部分或下半部分，具体取决于它是否悬停。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:13:27.637

也许要实现你想要的，你需要帮助`jquery`

```
<div class="box">
    <a href="#index.php" > <img src="images/buttGloves.png" class="button" /></a>
    <div class="overlay">play me!</div>
</div>

<div class="box">
    <a href="#index.php" > <img src="images/buttBoots.png" class="button2" /></a>
<div class="overlay">play me!</div>
</div>

<div class="box">
    <a href="#index.php" > <img src="images/buttEqu.png" class="button3" /></a>
<div class="overlay">play me!</div>
</div> 
```

jQuery

```
$(function(){
    $(".box").hover(function(){
      $(this).find(".overlay").fadeIn();
    }
                    ,function(){
                        $(this).find(".overlay").fadeOut();
                    }
                   );        
}); 
```

工作[**演示**](http://jsfiddle.net/jhunlio/KVN8b/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:37:40.437

你这样做的方式有点不对劲。您正在为包含图像的元素设置 background-image 属性，该图像（可能）占据了元素的整个空间。尝试使用它会让你自己头疼，所以与其解释为什么你会得到你现在的结果，我只想告诉你不要那样做，并给你一个解决方案：

摆脱 div 元素中的 img 元素。将 button2 类的 background-image 属性更改为您想要的默认图像。保持 .button2:hover 属性不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T01:49:04.237

这就是你要找的。但我敢肯定，您至少没有在 Google 中尝试过。我建议你先学习一个简单的 CSS 教程。

```
#main{
    background-color:#ececec;
    height:500px;
    width: 600px;
    margin:0px auto;
}
.button{               
        z-index:1000;
        width:170px;
        height:40px;        
        display:block;
        background-repeat:no-repeat;
}  
#but_one{
    background-image : url(images/but_one.png);
} 
#but_two{
    background-image : url(images/but_two.png);
} 
#but_three{
    background-image : url(images/but_three.png);
} 
#but_one:hover{
    background-image : url(images/but_one_h.png);
} 
#but_two:hover{
    background-image : url(images/but_two_h.png);
} 
#but_three:hover{
    background-image : url(images/but_three_h.png);
} 
```

* * *

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="main.css" />
        <title>hi css</title>
    </head>
    <body>
    <div id="main">
    <a href="index.php" ><img id="but_one" class="button" /></a>
    <a href="index.php" ><img id="but_two" class="button" /></a>
    <a href="index.php" ><img id="but_three" class="button" /></a>
    <div>
    </body>
 </html> 
```

# android - 与 auth.extendSSOAccessToken 相关的 Facebook 错误

> ID：15261454
> 
> 赞同：7
> 
> 时间：2013-03-07T01:28:16.183
> 
> 标签：android, facebook, facebook-android-sdk, sdk3.0

我在我的应用程序中使用适用于 Android 的 Facebook SDK 3.0 在人们的墙上发布更新。在我的 facebook 洞察区域中，它说我的 API 调用中有大约 25% 导致 API 错误。在“最常见的 API 错误”下它说`auth.extendSSOAccessToken`。在“API 错误细分”下，它说没有 API 错误。

我在 Facebook 开发者网站上看到的唯一一次`auth.extendSSOAccessToken`引用是一个已修复的旧错误。我已经检查了令牌的到期日期，它们被设置为 2 个月后到期，因此生成的任何令牌都没有机会到期。

我假设会话在某处请求扩展单点登录访问令牌，但我不知道为什么。我也不知道这个错误是否限制了人们登录。我无法在我自己的测试设备上复制此错误，因此我只能获得 Facebook 洞察页面上提供的有限信息。

任何熟悉此错误并知道如何防止它的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T10:28:46.133

我不熟悉这种类型的错误，但是有一个新的 SDK 3.5，你可以试一试:-)。

[https://developers.facebook.com/docs/android/](https://developers.facebook.com/docs/android/)

# java - 如何在 Jackson 中禁用 fail_on_empty_beans？

> ID：15261456
> 
> 赞同：123
> 
> 时间：2013-03-07T01:28:26.953
> 
> 标签：java, jackson

使用jackson 2.1，如何禁用`fail_on_empty beans`错误消息似乎要我禁用？

我假设这只是世界上最简单的事情，但是已经晚了，我还没有找到简单的教程或任何从`api`. `SerializationFactory`? 为什么他们会让它变得如此不直观，然后让错误消息看起来如此简单？

尽管我*确实*喜欢错误消息，但我的意思是，它比 NPE 更好。

我假设有一种方法可以使用注释来做到这一点 - 但我根本不热衷于将它们用于我正在做的简单工作！

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-03-07T02:20:10.533

我相信你可以在每个班级或全球范围内做到这一点。

对于每个类，请尝试上面的类声明 @JsonSerialize。

对于映射器，这是一个示例：

```
ObjectMapper mapper = new ObjectMapper();
mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
// do various things, perhaps:
String someJsonString = mapper.writeValueAsString(someClassInstance);
SomeClass someClassInstance = mapper.readValue(someJsonString, SomeClass.class) 
```

下面的 StackOverflow 链接也有一个 Spring 项目的示例。

对于带有 Jersey 的 REST，我不记得我的头，但我相信它是相似的。

* * *

我挖了几个链接：（由于 Codehaus 关闭，编辑了第一个链接）。

*   [https://web.archive.org/web/20150513164332/https://jira.codehaus.org/browse/JACKSON-201](https://web.archive.org/web/20150513164332/https://jira.codehaus.org/browse/JACKSON-201)
*   [杰克逊序列化配置](https://stackoverflow.com/questions/5110586/jackson-serializationconfig)

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2018-08-02T09:28:15.377

如果您使用的是 Spring Boot，您可以在 application.properties 文件中设置以下属性。 `spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false`

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-01-07T13:18:57.200

如果您的类不包含任何公共方法/属性，您也会遇到同样的问题。我通常有专门的 DTO 用于 API 请求和响应，声明为公共的，但在一种情况下忘记将方法也公开 - 这首先导致了“空”bean。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-12-19T06:07:30.327

如果您希望在没有任何额外字段的情况下获取 JSON 对象 - 请将此注释添加到您的课程中，它对我来说非常适合。

```
@JsonIgnoreProperties({"hibernateLazyInitializer", "handler"}) 
```

你也可以在你的 application.properties 文件中添加这一行，但它会在你的 JSON 中添加一个额外的字段。

```
spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-04-13T22:25:16.807

您也可以注释类`@JsonIgnoreProperties(ignoreUnknown=true)`以忽略类中未定义的字段

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-03-09T12:18:16.320

在 Jersey Rest Services 中，只需使用 JacksonFeatures 注释......

```
@JacksonFeatures(serializationDisable = {SerializationFeature.FAIL_ON_EMPTY_BEANS})
public Response getSomething() {
    Object entity = doSomething();
    return Response.ok(entity).build();
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-07-20T12:21:48.637

就我而言，我错过了在导致此错误的字段之一中编写 @JsonProperty 注释。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-12T12:46:10.243

如果您使用 org.codehaus.jackson.map.ObjectMapper，那么请。使用以下几行

```
mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-12T12:53:43.517

要解决此问题，请配置您的 JsonDataFormat 类，如下所示

```
ObjectMapper mapper = new ObjectMapper();
mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS); 
```

这几乎等同于，

```
mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-12-05T01:48:30.160

在此处为不同的问题添加解决方案，但出现相同的错误...在动态构建 json（作为 api 响应或其他）时要小心，以转义字符串成员中的文字双引号。您可能正在使用自己的格式错误的 json。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-09-18T14:32:02.223

```
ObjectMapper mapper = new ObjectMapper(); 
```

你好，

当我使用`mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false)`

我的 json 对象值在角度页面中为“空白”，表示响应

**仅在以下设置的帮助下**解决****

 **```
mapper.setVisibility(mapper.getSerializationConfig().getDefaultVisibilityChecker().
withFieldVisibility(JsonAutoDetect.Visibility.ANY).withGetterVisibility(JsonAutoDetect.Visibility.NONE)
                .withSetterVisibility(JsonAutoDetect.Visibility.NONE)
                .withCreatorVisibility(JsonAutoDetect.Visibility.NONE)); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-12-10T07:33:01.227

我不完全理解这个异常背后的原因，但是对于 Spring Boot 项目，将以下内容添加到属性文件中是一种享受

应用程序.yml

```
spring:
  jackson:
   serialization:
     FAIL_ON_EMPTY_BEANS: false 
```

应用程序属性

```
spring.jackson.serialization.FAIL_ON_EMPTY_BEANS = false 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-22T10:39:35.253

就我而言，我不需要禁用它，而是必须将此代码放在我的班级之上：（这解决了我的问题）

```
 @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)//this is what was added
    @Value //this was there already
    @Builder//this was there already

public class NameOfClass {
     //some code in here.
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-27T11:24:01.003

如果是 Spring App，只需将代码粘贴到 config 类中即可

```
 @Bean
        public ObjectMapper getJacksonObjectMapper() {
            ObjectMapper objectMapper = new ObjectMapper();
            objectMapper.findAndRegisterModules();
            objectMapper.configure(
                    com.fasterxml.jackson.databind.SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
            objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
            objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
            return objectMapper;
        } 
```**

# javascript - 如何将字符串转换为javascript中的函数？

> ID：15261457
> 
> 赞同：2
> 
> 时间：2013-03-07T01:28:44.217
> 
> 标签：javascript, json

我没有找到google的关键字...

我的问题是

让我们有一个 json 数组

```
{
  "a":"b",
  "c" : "d",
  "api" : 
  {
    "name":"listOfNetwork",
    "param" :['xyz','xyz1']
  } 
} 
```

现在我有一个javascript方法

```
function listOfNetwork(param1, param2) //name-of-api, params
{
     // do something.
} 
```

如何通过从 JSON 中检索名称和参数来调用此函数。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T01:30:27.350

```
window[json.api.name].apply(this, json.api.param) 
```

就这样。

# java - 静态上下文中的非静态泛型类型

> ID：15261459
> 
> 赞同：-2
> 
> 时间：2013-03-07T01:29:00.333
> 
> 标签：java, generics, hashtable

我正在准备用 Java 编写各种数据结构来准备面试。不过，我在静态上下文中的泛型类型方面遇到了一些麻烦。我有一个需要是静态的散列函数，它需要一个通用参数，但编译器没有它。任何有关为什么会发生此错误以及如何更好地解决问题的帮助都将不胜感激。

```
public class Hashtable<K extends Comparable, T> {
    private int num_elem;
    private int num_buck;
    private ArrayList<LinkedList<Pair<K, T>>> buckets;

    private class Pair<K, T> {
        K key;
        T value;

        Pair(K key, T value) {
            this.key = key;
            this.value = value;
        }
    }

    public Hashtable(int size) {
        this.num_elem = size;
        this.num_buck = (int) (num_elem * 1.2);
        this.buckets = new ArrayList<LinkedList<Pair<K, T>>>();

        for (int i = 0; i < num_buck; i++)
            buckets.add(new LinkedList<Pair<K, T>>());
    }

    public static int hash(K key) {
        return (System.identityHashCode(key) * num_buck) / 97;
    }

    public static int compress(int hashval) {
        return hashval % num_buck;
    }

    public void add(K key, T value) {
        Pair p = new Pair<K, T>(key, value);
        int hashval = Hashtable.hash(key);
        buckets.get(Hashtable.compress(key)).add(p);
    }

    public T find(K key) throws exception {
        int hashval = Hashtable.hash(key);
        LinkedList<Pair<K, T>> ll = buckets.get(Hashtable.compress(hashval));

        Iterator iter = ll.iterator();

        while (iter.hasNext()) {
            Pair<K, T> p = iter.Next();

            if (p.key.compareTo(key) == 0)
                return p.value;
        }

        throw new Exception("Key not in HashTable");
    }

    public void remove(K key) {
    }

    public static void main(String[] args) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:36:45.373

正如已经指出的那样，你错过了`}`你的`hash`方法的结束。但是，静态方法不能引用类的类型参数，否则会报错：

```
non-static class K cannot be referenced from a static context 
```

但看起来该`hash`方法*不需要*是通用的。取而代之的是，它应该做得很好`Object`：

```
public static int hash(Object key) 
```

# python - Simplejson 和随机键值

> ID：15261465
> 
> 赞同：0
> 
> 时间：2013-03-07T01:29:42.373
> 
> 标签：python, python-2.7, simplejson

这是我从 API 服务器获得的值

> {"query":{"pages":{"-1":{"ns":0,"title":"spencerx","missing":""}}}}

假设我想确定它是否没有丢失单词，我会通过查看返回的“-1”来知道。但是当这个词存在时，它会返回我下面的 json

> {"query":{"pages":{"1080152":{"pageid":1080152,"ns":0,"title":"spencer"}}}}

这是一个随机数。我可以知道我怎么能检测到'-1'并确定这个词不存在吗？当我尝试打印 x['query']['pages'] 时，它只会将以下所有内容抛给我，但我不知道如何检测它的关键错误。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:31:12.430

try `print x['query']['pages'].keys()`，这将为您`['-1']`提供第一种情况和`['1080152']`第二种情况。

如果您只想`'-1'`签到`x['query']['pages']`：

```
if '-1' in x['query']['pages']:
   # dictionary x['query']['pages'] has '-1' as a key 
```

就足够了

# iphone - iOS 在后台输出流音乐

> ID：15261470
> 
> 赞同：3
> 
> 时间：2013-03-07T01:30:27.113
> 
> 标签：iphone, ios, audio, ios6, audio-streaming

简而言之，我正在开发一个类似 Sonos 的应用程序。也就是说，我试图通过 wifi 将音乐从 iPod 库流式传输到硬件。因此，声音将来自通过 wifi 连接到 iPhone 的硬件。

当应用程序处于前台但在后台应用程序将被终止时，这样做很容易。在 iPhone 设备本身的后台输出音频时是不同的。

我还注意到 Sonos 仅在 iOS 6 上支持此功能，所以我想知道是否有一些新的神奇 API 允许此功能。

我希望你们中的任何一位大师都能引导我走上正确的道路。

# c - 超出 C 中绑定的数组 - 为什么这不会崩溃？

> ID：15261472
> 
> 赞同：3
> 
> 时间：2013-03-07T01:30:33.877
> 
> 标签：c, arrays

我有这段代码，它运行得很好，我不知道为什么：

```
int main(){
   int len = 10;
   char arr[len];
   arr[150] = 'x';
} 
```

认真的，试试吧！它有效（至少在我的机器上）！但是，如果我尝试更改过大索引处的元素，例如索引 20,000，则它不起作用。所以编译器显然不够聪明，不能忽略那一行。

那么这怎么可能呢？我在这里真的很困惑......

* * *

好的，谢谢大家的回答！

所以我可以使用它来写入堆栈上其他变量消耗的内存，如下所示：

```
#include <stdio.h>
main(){
   char b[4] = "man";
   char a[10];
   a[10] = 'c';
   puts(b);
} 
```

输出“可以”。这是一件非常糟糕的事情。

好的谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:34:13.013

为了效率，C 编译器通常不会生成代码来检查数组边界。越界数组访问会导致“未定义的行为”，一种可能的结果是“它有效”。不能保证会导致崩溃或其他诊断，但是如果您使用的是支持虚拟内存的操作系统，并且您的数组索引指向尚未映射到物理内存的虚拟内存位置，那么您的程序更多可能会崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T01:39:26.467

> 那么这怎么可能呢？

因为堆栈在您的机器上足够大，以至于在堆栈上`&arr[150]`碰巧对应的位置有一个内存位置，并且因为您的小示例程序在其他任何*东西*引用该位置之前退出并且可能因为您而崩溃会覆盖它。

您使用的编译器不会检查超出数组末尾的尝试（C99 规范说 的结果`arr[150]`，在您的示例程序中，将是“未定义”，因此它*可能*无法编译它，但是大多数 C 编译器没有）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T02:04:32.547

大多数实现不检查这些类型的错误。内存访问粒度通常非常大（4 KiB 边界），细粒度访问控制的成本意味着默认不启用。有两种常见的错误导致现代操作系统崩溃的方法：要么从未映射的页面读取或写入数据（即时段错误），要么覆盖导致其他地方崩溃的数据。如果您不走运，那么缓冲区溢出不会崩溃（没错，*不幸*）并且您将无法轻松诊断它。

但是，您可以打开仪器。使用 GCC 时，在启用 Mudflap 的情况下进行编译。

```
$ gcc -fmudflap -Wall -Wextra test999.c -lmudflap
test999.c：在函数'main'中：
test999.c:3:9：警告：变量 'arr' 已设置但未使用 [-Wunused-but-set-variable]
test999.c:5:1：警告：控制到达非空函数的结尾 [-Wreturn-type]

```

运行它时会发生以下情况：

```
$ ./a.out
*******
挡泥板违规1（检查/写入）：时间=1362621592.763935 ptr=0x91f910 size=151
pc=0x7f43​​f08ae6a1 位置=`test999.c:4:13 (main)'
      /usr/lib/x86_64-linux-gnu/libmudflap.so.0(__mf_check+0x41) [0x7f43​​f08ae6a1]
      ./a.out(main+0xa6) [0x400a82]
      /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd) [0x7f43​​f0538ead]
附近对象 1：检查区域从 0B 开始到 141B 结束
挡泥板对象 0x91f960: name=`alloca region'
bounds=[0x91f910,0x91f919] size=10 area=heap check=0r/3w liveness=3
分配时间=1362621592.763807 pc=0x7f43​​f08adda1
      /usr/lib/x86_64-linux-gnu/libmudflap.so.0(__mf_register+0x41) [0x7f43​​f08adda1]
      /usr/lib/x86_64-linux-gnu/libmudflap.so.0(__mf_wrap_alloca_indirect+0x1a4) [0x7f43​​f08afa54]
      ./a.out(main+0x45) [0x400a21]
      /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd) [0x7f43​​f0538ead]
附近物体数量：1

```

哦，看，它崩溃了。

请注意，Mudflap 并不完美，它不会捕捉到您的所有错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T02:16:48.677

本机 C 数组不进行边界检查。这将需要额外的指令和数据结构。C 是为效率和精简而设计的，因此它没有指定以性能换取安全的特性。

您可以使用像 valgrind 这样的工具，它在一种模拟器中运行您的程序，并尝试通过跟踪哪些字节已初始化和哪些未初始化来检测缓冲区溢出等事情。但这并不是绝对可靠的，例如，如果溢出访问恰好执行对另一个变量的合法访问。

在引擎盖下，数组索引只是指针算术。当您说 时`arr[ 150 ]`，您只是将`sizeof`一个元素添加 150 倍并将其添加到的地址`arr`以获得特定对象的地址。该地址只是一个数字，它可能是无意义的、无效的，或者本身就是算术溢出。其中一些情况会导致*硬件*产生崩溃，当它找不到内存来访问或检测到类似病毒的活动时，但没有一个会导致软件生成的异常，因为没有软件挂钩的空间。如果你想要一个安全的数组，你需要围绕加法原理构建函数。

顺便说一句，您示例中的数组在技术上甚至不是固定大小的。

```
int len = 10; /* variable of type int */
char arr[len]; /* variable-length array */ 
```

使用非`const`对象设置数组大小是自 C99 以来的一项新功能。您也`len`可以是函数参数、用户输入等。这对于编译时分析会更好：

```
const int len = 10; /* constant of type int */
char arr[len]; /* constant-length array */ 
```

为了完整起见：C 标准没有指定边界检查，但也没有被禁止。它属于***未定义行为*的类别，或不需要生成错误消息的错误，并且可以产生任何影响。**可以实现安全数组，存在该特征的各种近似值。C*确实*朝这个方向点头，使其非法，例如，获取两个数组之间的差异，以便找到正确的越界索引来访问数组B中的任意对象A。但是该语言非常自由-形式，并且如果 A 和 B 是同一内存块的一部分，则`malloc`它是合法的。换句话说，您使用的 C 特定内存技巧越多，即使使用面向 C 的工具，自动验证就越困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T01:42:44.560

在 C 规范下，访问数组末尾的元素是*未定义的行为*。未定义的行为意味着规范没有说明会发生什么——因此，理论上任何事情都可能发生。该程序可能会崩溃，也可能不会，或者它可能会在几个小时后在完全不相关的功能中崩溃，或者它可能会擦除您的硬盘驱动器（如果您不走运并且将正确的位插入正确的位置）。

未定义的行为不容易预测，绝对不应该依赖它。如果它调用未定义的行为，仅仅因为某些东西似乎有效并不能使它正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T01:42:48.267

因为你很幸运。或者说不走运，因为这意味着更难找到错误。

*只有当您开始使用另一个进程*的内存（或在某些情况下未分配的内存）时，运行时才会崩溃。您的应用程序在打开时会获得一定数量的内存，这在这种情况下就足够了，您可以随意在自己的内存中乱七八糟，但您会给自己一个调试工作的噩梦。

# python - 实现双向链表的问题

> ID：15261481
> 
> 赞同：3
> 
> 时间：2013-03-07T01:31:23.213
> 
> 标签：python, linked-list, doubly-linked-list

我正在制作双向链表类。

```
def remove(self, item):
    current=self.__head
    prev=None
    found=False
    if(self.__size>=1):
        for i in range (0,self.__size):
            if(current.getData()==item):
                found=True
                pos=i#save the position to pop
                i=self.__size#leave the loop
            else:
                prev=current
                current=current.getNext()

        if(found==True):#excute only if the item is found
            if(prev==None):#first item found
                if(self.__size==1):
                    self.__head==None
                    self.__tail==None
                    current.setNext(None)
                    current.setPrevious(None)
                else:#size bigger than 2
                    self.__head==current.getNext()
                    current.setNext(None)
            else:
                if(current.getNext()==None):#last item found
                    self.__tail==prev
                    current.setPrevious(None)
                    prev.setNext(None)
                else:
                    Next=current.getNext()
                    current.setNext(None)
                    current.setPrevious(None)
                    Next.setPrevious(prev)
                    prev.setNext(Next)
            self.pop(pos)
            self.__size-=1 
```

这就是我到目前为止所做的。如果我运行下面的代码

```
 for i in range(0, 10):
    int_list2.add(i)
    int_list2.remove(1)
    int_list2.remove(3)
    int_list2.remove(2)
    int_list2.remove(0)
    print(int_list2) 
```

这些是我得到的输出

```
0

1

2

3

4 3

5 4 3

6 5 4 3

7 6 5 4 3

8 7 6 5 4 3

9 8 7 6 5 4 
```

我希望前 4 行（0~3）不显示任何内容，从第五行开始为 4，第六行为 5 4....等等。

最后我要 9 8 7 6 5 4

如何修复代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:35:39.737

部分问题出在 for 循环中 if 语句的第一部分：

```
for i in range (0,self.__size):
        if(current.getData()==item):
            found=True
            pos=i#save the position to pop
            i=self.__size#<--- doesn't leave the loop 
        else:
            prev=current
            current=current.getNext() 
```

设置`i=self.__size`不退出循环。改为使用`break`。

这样一来，当您找到该项目时，您会继续遍历循环，`current`而不是您要删除的项目。取而代之`current`的是您在 for 循环中查看的最后一个节点的值。

`==`当我确定你的意思是分配时，你也在使用`=`这些行：

```
self.__head==None   #should be self.__head=None
self.__tail==None   #should be self.__tail=None
current.setNext(None)
current.setPrevious(None) 
```

将 更改`==`为单个`=`. `if(found==True):`我想你在你的街区做了几次。这些行只是评估布尔表达式并将值丢弃。

改变这些东西，让我知道是否可以解决它。

另外，只是一个小提示：

如果您有一个布尔变量（如`found`），则不需要检查`found==True`，因为它的计算结果与 just 相同`found`。IE：

```
if(found==True):
   ... 
```

是相同的：

```
if(found):
   ... 
```

# java - 简单 Java 游戏中的状态转换

> ID：15261483
> 
> 赞同：1
> 
> 时间：2013-03-07T01:31:33.017
> 
> 标签：java, swing

我正在创建一个简单的滑动滚动游戏，该游戏在启动时应该有一个带有两个按钮（都是定制图像）的用户菜单 - 播放和退出。问题是我不知道如何将第一个（播放）选项链接到包含实际程序的框架（参见下面的代码） - 即当按下时，游戏本身开始。我对退出可能性有同样的问题。

期待有关实现活动按钮和平滑过渡的任何建议。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.Image;
import java.awt.Toolkit;
import javax.swing.JFrame;

public class Frame {

    public Frame(){

       JFrame frame = new JFrame();
       frame.add(new Board());
       frame.setTitle("2-D Test Game");
       Image im = Toolkit.getDefaultToolkit().getImage("img.png");
       frame.setIconImage (im);
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       frame.setSize(800,500);
       frame.setVisible(true);

    }

    public static void main(String[] args){
       new Frame();
    }
} 
```

# list - 如何使用算法 Find() 搜索 Stl 列表项

> ID：15261484
> 
> 赞同：0
> 
> 时间：2013-03-07T01:32:00.427
> 
> 标签：list, stl, find

我有一个具有这种结构的节点列表：

```
private:
    char namefield[30];
    char tam[3];
    char type[1];
}; 
```

我想使用算法类中的 find 函数查找和元素，但我想使用项目的 namefield 属性来完成，该`find`函数有一个要查找的项目作为参数，但问题是我想发送节点而不是节点本身..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:57:01.837

您可以使用`find_if`功能[http://www.cplusplus.com/reference/algorithm/find_if/](http://www.cplusplus.com/reference/algorithm/find_if/)。你为你的结构定义一个谓词（比较函数），如果两个结构的名称字段都为真，则返回真。或类似的东西

```
class Cmp : public std::unary_function<mystruct, bool> {
    std::string m_str;
public: 
    Cmp(const std::string &str) : m_str(str) {}
    bool operator()(const mystruct &val) const {
        return m_str.compare(val.namefield) ==0;
    }
};

std::find_if(cont.begin(), cont.end(), Cmp("foo")); 
```

`cont`你的结构的容器在哪里

# linux - 内核：在 do_execve_common 中获取命令行和 pid_parent？

> ID：15261490
> 
> 赞同：2
> 
> 时间：2013-03-07T01:32:22.807
> 
> 标签：linux, kernel, execve

是否可以在Linux内核的do_execve_common中获取即将创建的进程的命令行？换句话说，如何从 argv 中提取命令行并将其 printk 到 dmesg。

其次，是否也可以获取进程的pid和父pid？这些信息在 do_execve_common 附近是否可用？

我只需要在内核中做这些事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:51:25.257

我认为在调用 do_execve 时，task_struct 中的 pid & real_parent & comm 字段已经初始化。

所以你可以使用内核函数：getpid()、getppid() 和 get_task_comm() 来得到你想要的。我不确定这些功能是否存在于您的 Linux 内核版本中。如果没有，应该有一些类似的功能。

# mongodb - Mongoid：为什么获取计数比获取文档慢

> ID：15261492
> 
> 赞同：1
> 
> 时间：2013-03-07T01:32:42.220
> 
> 标签：mongodb, mongoid

我注意到一个奇怪的行为。它可能是 mongoid 或 mongodb，我不确定，但计数文档比获取文档慢。以下是我发出的查询：

```
Institution.all.any_of(:portaled_at.ne => nil).any_of(portaled: true).order_by(:portaled_at.desc).count
# mongodb query and timing as per mongoid logs, 
# times are consistent over multiple runs
# MONGODB (236ms) db['$cmd'].find({"count"=>"institutions", "query"=>{"$or"=>[{:portaled_at=>{"$ne"=>nil}}, {:portaled=>true}]}, "fields"=>nil}).limit(-1)
# MONGODB (245ms) db['$cmd'].find({"count"=>"institutions", "query"=>{"$or"=>[{:portaled_at=>{"$ne"=>nil}}, {:portaled=>true}]}, "fields"=>nil}).limit(-1)

Institution.all.any_of(:portaled_at.ne => nil).any_of(portaled: true).order_by(:portaled_at.desc).to_a
# mongodb query and timing as per mongoid logs
# times are not so consistent over multiple runs,
# but consistently much lower than count query
# MONGODB (9ms) db['institutions'].find({"$or"=>[{:portaled_at=>{"$ne"=>nil}}, {:portaled=>true}]}).sort([[:portaled_at, :desc]])
# MONGODB (18ms) db['institutions'].find({"$or"=>[{:portaled_at=>{"$ne"=>nil}}, {:portaled=>true}]}).sort([[:portaled_at, :desc]]) 
```

我相信 mongodb 不会将索引用于`$and`和`$or`查询，但如果重要的话，我有一个`portaled_at`按降序排列的稀疏索引。在大约 200,000 个文档中，只有大约 50-60 个设置了 portaled_at。

*   导轨 3.2.12
*   mongoid 2.6.0
*   MongoDB 2.2.3

这违反了我的常识，如果有人能解释发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:47:53.870

虽然这两者在 MongoDB 中通过不同的子系统运行（一个使用[runCommand](http://docs.mongodb.org/manual/reference/method/db.runCommand/)，另一个使用标准查询引擎），但这种情况下的具体问题很可能是当前版本的 MongoDb 中的已知问题。

快速总结是，没有获取的计数非常[慢](https://jira.mongodb.org/browse/SERVER-1752)，因为 MongoDb 正在做很多通常不必要的额外工作。已经在开发分支中修复了，所以发布的时候应该是2.4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T00:22:47.827

由于某种原因，Mongo 默认不计算仅使用索引的记录。但是，如果您正确构造查询，Mongo 将从索引中计数。诀窍是只获取索引中的字段，并且您必须指定一个查询。

在 Mongo Shell 中：

`db.MyCollection.find({"_id":{$ne:''}},{"_id":1}).count()`

您可以使用说明方法进行检查：

`db.MyCollection.find({"_id":{$ne:''}},{"_id":1}).explain()`

这将包含`"indexOnly" : true`在输出中。

同样，该命令可以直接通过助力车驱动程序执行，如下所示：

`Mongoid::Sessions.default.command(:count => "MyCollection", :query=>{"_id"=>{"$ne"=>""}}, :fields => {:_id=>1})`

其中，在我的基准测试中（在我的实时数据上，YMMV）比简单地快 100 倍`MyMongoidDocumentClass.count`

不幸的是，似乎没有办法通过 Mongoid gem 快速做到这一点。

# php - PHP MySQL 仅使用 SELECT 获取某些条目的 SUM

> ID：15261496
> 
> 赞同：0
> 
> 时间：2013-03-07T01:33:19.870
> 
> 标签：php, sql

在下表中，我将如何为特定年份（例如 2013 年）的价格总和编写一个选择子句？类似于 SUM（年份 = 2012 时的价格）。我将如何在 PHP mysql_fetch_array() 中引用该结果。

```
+++++++++++++++++++++++++++++

Price | Date | Month | Year |

+++++++++++++++++++++++++++++

9.00  |343345|   2   | 2013 |

3.00  |343445|   2   | 2013 |

4.00  |343245|   1   | 2013 |

1.00  |342245|   1   | 2013 |

5.00  |333355|   12  | 2012 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:34:51.960

使用别名：

```
SELECT SUM(price) AS my_sum 
WHERE year = 2102 
```

然后在php中：

```
$row = mysqli_fetch_assoc($result);
echo $row['my_sum']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:36:47.047

`select sum(price) from table where year = 2012;`

您可以通过以下方式引用它：

```
$data = mysql_fetch_array($query);
echo $data[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:48:32.727

对此的查询将是以下查询：

```
select sum(price) as total_price from your_table_name where Year='2012'; 
```

在 PHP 中，您可以将其用作：

```
$getTotal = mysql_query("select sum(price) as total_price from your_table_name where   Year='2012'");
while($resTotal = mysql_fetch_array($getTotal))
{
 $total = $resTotal['total_price'];
} 
```

现在你有一个变量 $total 中的总数

# ruby-on-rails-3 - 资源与资源

> ID：15261497
> 
> 赞同：2
> 
> 时间：2013-03-07T01:33:30.247
> 
> 标签：ruby-on-rails-3, rails-routing

我有一个用户模型 has_one :blog。在我的 routes.rb 文件中，我有`resource :blog`. 为什么它不创建路径`blog#show`？我需要自己创建一个吗？否则我该如何 link_to `blog#show`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:32:27.360

它确实创建了一条路径`blog#show`- 通过运行查看路线的输出`rake routes`。缺少的路线是`blog#index`，因为只有一条要显示。

有关奇异路线的更多信息，请参阅[http://guides.rubyonrails.org/routing.html#singular-resources](http://guides.rubyonrails.org/routing.html#singular-resources)。

# python - 循环遍历元组的python列表并更改值

> ID：15261499
> 
> 赞同：5
> 
> 时间：2013-03-07T01:33:43.717
> 
> 标签：python, list, tuples

我有这个代码

```
a=[(1,'Rach', 'Mell', '5.11', '160'),(2, 'steve', 'Rob', '6.1', '200'), (1,'Rach', 'Mell', '5.11', '160')] 
```

如果 id = 2，我想将姓氏 Rob 更改为 'Roberto'
所以我的想法是将元组更改为列表，以便轻松进行更改

我试过 ：

```
a_len = len(a)
count = 0
a_list = []
while(count < a_len):
     a_list.append(a[count])
     count ++

for x, element in a_list:
     if element[0] == 2:
          a_list[x] = Roberto 
```

但这不起作用，你们知道如何做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T01:57:13.937

这样做：

```
a=[(1,'Rach', 'Mell', '5.11', '160'),(2, 'steve', 'Rob', '6.1', '200'), (1,'Rach', 'Mell', '5.11', '160')]

for i,e in enumerate(a):
    if e[0]==2: 
        temp=list(a[i])
        temp[2]='Roberto'
        a[i]=tuple(temp)

print a 
```

印刷：

```
[(1, 'Rach', 'Mell', '5.11', '160'), (2, 'steve', 'Roberto', '6.1', '200'), (1, 'Rach', 'Mell', '5.11', '160')] 
```

如果你想要一个列表理解，这个：

```
>>> [t if t[0]!=2 else (t[0],t[1],'Roberto',t[3],t[4]) for t in a]
[(1, 'Rach', 'Mell', '5.11', '160'), (2, 'steve', 'Roberto', '6.1', '200'), (1, 'Rach', 'Mell', '5.11', '160')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T01:40:59.323

试试这个：

```
for idx, row in enumerate(a):
    id, name, surname, valA, valB = row
    if id == 2 and surname == 'Rob':
        a[idx] = (id, name, 'Roberto', valA, valB) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T01:42:13.160

简短的回答

```
a_list = [(_id, first, 'Roberto' if (last == 'Rob' and _id == 2) else last, x,y) for _id, first, last, x, y in a ] 
```

这是python的列表推导，它是python的一个很好的工具。

以上与以下代码含义相同：

```
a_list = []
for _id, first, last, x, y in a:

    if last == 'Rob' and _id == 2:
         last  =' Roberto'

    a_list.append((_id, first, last, x, y)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T01:42:39.647

试试这个：

```
a=[(1,'Rach', 'Mell', '5.11', '160'),(2, 'steve', 'Rob', '6.1', '200'), (1,'Rach', 'Mell', '5.11', '160')]

a_list = []
for ele in a:
    a_list.append(list(ele))

for ele in a_list:

    if ele[0] == 2:
        ele[2] = "Roberto"

print a_list 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T01:47:23.817

我对 Python 不是很熟悉，但是在这里

```
 for x, element in a_list:
           if element[0] == 2:
           a_list[x] = Roberto 
```

您没有从列表中选择项目。尝试

```
 for x in a_list:
           if x[0] == 2:
           x[3] = Roberto 
```

X 选择列表中的元组，括号选择元组内的数据。

# ios - iOS 应用程序多次被 Apple Store 拒绝

> ID：15261507
> 
> 赞同：1
> 
> 时间：2013-03-07T01:34:58.523
> 
> 标签：ios, xcode, app-store-connect

我在将 iOS 应用程序上传到 Apple 商店时遇到了一些问题。我第一次上传并提交了我的 iOS 应用程序，但被 Apple 团队拒绝了。他们提到他们想要对我的应用程序进行身份验证，所以我进行了身份验证并再次上传了我的二进制文件。第二次被拒绝了。这次他们提到我需要在我的应用程序中进行身份验证。那时我意识到我的应用程序没有更新。

第一次进行更改时，我使用 Xcode 中的 Organizer 上传我的二进制文件（导航到 Organizer -> Archives。然后首先验证并分发）。

第二次进行更改时，我使用 Organizer 再次上传更新后的二进制文件。

但是在所有情况下，我的二进制文件都没有更新。我如何解决这个问题，这对我来说真的很头疼。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:41:38.320

您需要在 iTunesConnect 审核信息中提供该身份验证数据。有特定的字段命名

> 模拟账户信息

和

> 复习笔记

在第一个字段中填写该帐户信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T12:24:51.923

在将二进制文件提交到 App Store 之前，请尝试在 Organizer 中检查存档日期。当您对应用程序存档进行任何更改时，再次将其反映在您的二进制文件上。否则，您的二进制文件不会反映您对代码所做的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T11:14:55.020

“beta”、“demo”、“trial”或“test”版本的应用程序将被拒绝。如果您在内容、名称等中使用任何与这些相关的词，将被拒绝。

其次，当您在应用程序中使用任何社交网站信息时，请特别注意。例如，假设您从 Facebook 获得了许多权限，但您没有在您的应用程序中使用该信息，您的应用程序将拒绝。因此，在使用来自社交网站的权限时要精确。

Apple 曾经拒绝了我的应用程序，因为我违反了将 2MB 数据从应用程序包解压到文件系统中的 iCloud 协议。所以对于下载超过 2MB 的数据不应该创建任何备份。为此，您可以使用非用户数据、缓存存储或将其标记为“不备份”。

希望有帮助！！

# c - 函数定义中的指针与数组：void fct1(int *p) 和 void fct1(int p[]) 有什么区别？

> ID：15261509
> 
> 赞同：5
> 
> 时间：2013-03-07T01:35:04.297
> 
> 标签：c, arrays, function, pointers

我想知道有什么区别

```
void fct1(int *p) 
```

和

```
void fct1(int p[]) 
```

我知道两者都是指针，但有什么区别

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T01:38:13.657

像这样用作函数参数时绝对没有区别。编译器对这两种形式一视同仁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T05:34:51.553

没有区别。为了完整起见，以下是标准所说的：

C99 标准 6.7.5.3 第 7 节

> 将参数声明为 ''array of *type* '' 应调整为 ''qualified pointer to *type* '', ...

# php - 防止用户输入过大 PHP“允许的内存大小”

> ID：15261511
> 
> 赞同：1
> 
> 时间：2013-03-07T01:35:15.003
> 
> 标签：php

我用 $_POST 获取了一些变量，主要由用户在表单上输入。为了防止在表单中插入巨大的值，我可以检查这些变量并在它们太长时向用户返回错误。

但是，如果用户输入一个非常长的值，我就不能这样做，因为在这种情况下，整个脚本在我什至可以拒绝处理该变量之前就崩溃了。这是否对我的服务器安全构成威胁？

如何在不增加默认内存限制的情况下解决此问题？可能吗？

使用 javascript 限制用户输入可能是一种选择，但用户可以通过禁用 javascript 轻松克服该限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:39:39.397

您可以使用 ini 指令限制帖子正文的最大大小`post_max_size`。但是它的默认值为 8M。如果它没有改变应该没问题，因为默认`memory_limit`是128M。（PHP 5.3）

但这当然取决于您将要对数据做什么以及 PHP 将为此消耗多少内存。极端地说，甚至可以创建一个示例脚本，以 1 字节输入达到内存限制。因此，您必须为您的应用程序找到合适的值。

从[文档](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)

> 设置允许的帖子数据的最大大小。此设置也会影响文件上传。要上传大文件，该值必须大于upload_max_filesize。如果您的配置脚本启用了内存限制，那么 memory_limit 也会影响文件上传。一般来说，memory_limit 应该大于 post_max_size。使用整数时，该值以字节为单位。也可以使用本常见问题解答中描述的速记符号。如果 post 数据的大小大于 post_max_size，则 $_POST 和 $_FILES 超全局变量为空。这可以通过多种方式进行跟踪，例如通过将$_GET 变量传递给处理数据的脚本，即，然后检查是否设置了$_GET['processed']。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:39:46.977

您可以访问 php.ini 吗？您可以设置upload_max_filesize / post_max_size

有关详细信息，请参见此处：http: [//php.net/manual/en/ini.core.php#ini.sect.file-uploads](http://php.net/manual/en/ini.core.php#ini.sect.file-uploads)

（ps 在 HTML 表单中设置 maxlength 很容易被恶意用户绕过）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:41:52.927

将客户端上的数据分割成部分，通过Ajax分块下载，然后将下载的部分保存到磁盘或数据库中。也许这样？

# bash - 如何在bash中读取字符串

> ID：15261514
> 
> 赞同：2
> 
> 时间：2013-03-07T01:36:06.560
> 
> 标签：bash

我的代码

```
FOO="dsad; dsadasddas; dadsad; dsdsad asdsdd"
echo "${FOO%%;*}"   
result: dsad

FOO="dsad; dsadasddas; dadsad; dsdsad asdsdd"
echo "${FOO##*;}"
result: dadsad; dsdsad asdsdd 
```

如何打印第一个分号的所有字符？

```
FOO="dsad; dsadasddas; dadsad; dsdsad asdsdd"
echo "${FOO???}"
result: dsadasddas; dadsad; dsdsad asdsdd 
```

如何打印最后一个分号之前的所有字符？

```
FOO="dsad; dsadasddas; dadsad; dsdsad asdsdd"
echo "${FOO???}"
result: dsadasddas; dadsad; dsdsad asdsdd 
```

帮助任何人？谢谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:29:19.020

使用`#`and`%`代替`##`and `%%`：

```
foo='one; two; three; four'

# All characters after first semicolon
echo "${foo#*;}"  # two; three; four

# All characters before last semicolon
echo "${foo%;*}"  # one; two; three 
```

`${var##glob}`并且`${var%%glob}`会尽可能的带走（贪心匹配）。`${var#glob}`并且`${var%glob}`会尽可能少地带走（不情愿的匹配）。

# windows - 如何测试 STDIN 是否有要阅读的内容（Windows 上的 Perl）

> ID：15261520
> 
> 赞同：1
> 
> 时间：2013-03-07T01:37:04.720
> 
> 标签：windows, perl, asynchronous, filehandler

我在 Perl 中遇到了一个问题。为了测试`STDIN`文件处理程序是否有东西可以立即读取，我想这样编程。

```
while(1)
{
     my ($l);
     if (TestCanRead(STDIN))
     {
         $l = <STDIN>;
         HandleRead($l);
     }
     else
     {
         HandleNotRead();
     }
} 
```

或者

```
 while(1)
 {
     my ($l);
     $l = ReadImmediate(STDIN);
     if (defined($l))
     {
         HandleRead($l);
     }
     else
     {
          HandleNotRead();
     }

 } 
```

有人能告诉我如何 在 Windows 系统上编写函数**ReadImmediate**或**TestCanRead吗？**谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:56:26.213

不幸的是，我没有要测试的 Windows 环境，但是 Perl 声称具有可移植性。因此，让我们假设 Unix 解决方案有效。

您想要`select`或围绕它的包装器。我通常使用`IO::Select`，它看起来像这样：

```
use IO::File;
use IO::Select;

my $select = IO::Select->new( \*STDIN );

while (1) {
    if (my @ready_FHs = $select->can_read(0)) {
        foreach my $FH (@ready_FHs) {
            say $FH->getline();
        }
    } else {
        say "Nothing to do; napping";
        sleep 1;
    }
} 
```

# sql - SQL：选择每个 page_id 只出现一次的 string_id

> ID：15261522
> 
> 赞同：3
> 
> 时间：2013-03-07T01:37:32.887
> 
> 标签：sql

这是我的桌子：

```
 page_id | string_id |       content
       1 |  terms_en | etc text lorem ipsum
       1 |  terms_es | etc espanol lorem    
       2 |   tabtext | stuff text lorem etc
       3 |  veh_name | etc stuff letters lala
       4 |   btn_txt | text for a button etc
       4 | alert_txt | text for an alert etc lala
       5 |  page_cnt | lala pagecontent etc lala 
```

我需要选择所有与它相关联的`page_id`s`page_id``string_id`

从本质上讲，我试图从这个表中返回`page_id`s: `2`、`3`和。`5`

我的 SQL 如下所示：

```
SELECT page_id, string_id
FROM lang_strings
WHERE string_id != 'content'
GROUP BY string_id, page_id
HAVING count(string_id) < 2 AND count(page_id) < 2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:48:45.330

你必须使用`count(distinct ...)`：

```
SELECT page_id, count(distinct string_id) 
FROM lang_strings
WHERE string_id != 'content'
GROUP BY page_id
HAVING count(distinct string_id) = 1 
```

`distinct`在句柄中使用具有*相同*`count()`的多行的情况，这当然会算作只有*一个*值（发生多次）。 *`string_id`*

 **您尚未指定您正在使用的数据库，因此您可能会发现您不必*选择* `count(distinct string_id)`查询即可工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:54:35.573

试试下面的代码

```
SELECT page_id FROM lang_strings
GROUP BY page_id
HAVING count(string_id) = 1 
```

由于您没有具体说明问题，我不明白您使用的原因 `WHERE string_id != 'content'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T02:04:34.727

您的查询的问题是您同时按 page_id 和 string_id 进行*分组*。

您可以通过按 page_id 分组来解决问题：

```
SELECT page_id, string_id
FROM lang_strings
WHERE string_id != 'content'
GROUP BY page_id
HAVING count(*) = 1 
```

这将返回`page_id`只有一行的 s。因此，它们只有一个字符串 id。

如果您的意思是字符串 id 只取一个值，但可以有多行，那么我建议使用以下`having`子句：

```
where max(string_id) = min(string_id) 
```

您还可以使用：

```
where count(distinct string_id) = 1 
```

但是，最大/最小比较通常比`count(distinct)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T01:49:03.410

尝试这个：

```
SELECT page_id
     , max(string_id) as string_id
FROM lang_strings
WHERE string_id != 'content'
GROUP BY page_id
HAVING count(page_id) = 1 
```

如果您只需要`page_id`，则可以使用 MAX 函数删除第二列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T01:52:44.300

这应该为你做。

```
SELECT page_id
FROM (
    SELECT DISTINCT
        page_id,
        string_id
    FROM lang_strings
) t1
GROUP BY t1.page_id
HAVING COUNT(page_id) = 1 
```**

# ruby-on-rails - 跟踪 heroku 数据库更改

> ID：15261523
> 
> 赞同：0
> 
> 时间：2013-03-07T01:37:36.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我的 Rails 应用程序已启动并正在运行。它是众包的，因此用户可以对数据库进行更改。我希望能够自己查看已删除或添加的内容。有没有办法查看和跟踪其他人对数据库所做的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:41:44.260

您可以使用像 Paper Trail [https://github.com/airblade/paper_trail](https://github.com/airblade/paper_trail)这样的 gem来创建数据库更新日志。它可以将所有更新记录到数据库中以供您将来查看。

# c++ - 错误：表达式必须具有 size() 的类类型

> ID：15261524
> 
> 赞同：2
> 
> 时间：2013-03-07T01:37:38.050
> 
> 标签：c++, size-t

该代码试图确定两个字符串是否具有相同的模式。

```
#include <iostream>
#include <vector>
#include <string>
#include <map>
#include <sstream>

bool findMatch(char * s1, char * s2){
    std::map<char, std::string> words;
    std::istringstream iss(s1);
    std::string word;
    //for (std::string::size_t i = 0; i < s2.size(); ++i)      //line 1
    //for (int i = 0; i < s2.size(); ++i)                      //line 2
    {
        if (!(iss >> word))
            return false; 
        std::string& mapping = words[s2[i]];
        if (mapping == "")
            mapping = word; 
        else if (mapping != word)
            return false; 
    }
    return !(iss >> word); 
}

int main(int argc, char * argv[]){
    bool b = findMatch("red blue blue red red yellow", "abbaac");
    std::cout << b << std::endl;
    return 0;
} 
```

**问题：** 我尝试了两次，第 1 行和第 2 行，但都没有成功

> 第 1 行，错误：类“...”没有成员“size_t”
> 
> 第 2 行：错误：char * s2 表达式必须具有类类型

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:44:51.060

至少有一些问题，`size_t`不是字符串的一部分，而 s2 不是`std::string`，所以你需要使用类似的东西`strlen`：

```
for (size_t i = 0; i < strlen(s2); ++i) 
```

这意味着您需要包括`cstring`

```
#include <cstring> 
```

`std::string`并且为了一致性起见，使用. 代替可能更有意义`char *`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T01:44:56.963

你有点不一致。您也使用`char*`和使用`std::string`s，`std::string`其好处是拥有`size`您在 for 循环中使用的方法。`std::string`没有`std::string::size_t`，要么是`size_t`要么`std::string::size_type`。

我会将您的`char*`参数替换为`const std::string&`，这样它就可以按您的预期工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T01:40:18.677

尝试将第 1 行更改为

```
for (size_t i = 0; i < strlen(s2); ++i) 
```

# jruby - NoVarsDynamicScope.java:87:in `setValue': java.lang.NullPointerException 在 Fedora 14 上使用 warbler 1.3.5 或 1.3.6 运行'jruby -S warble -T'

> ID：15261526
> 
> 赞同：1
> 
> 时间：2013-03-07T01:37:49.320
> 
> 标签：jruby, fedora, warbler

在成功地将成熟的 jruby servlet 项目从 Ubuntu 12.04 移植到 Fedora 14 之后，一切都可以构建 servlet。

```
jruby -S warble compiled 
```

工作正常，但随后

```
jruby -S warble war 
```

甚至只是：

```
jruby -S warble -T 
```

产量：

```
NoVarsDynamicScope.java:87:in `setValue': java.lang.NullPointerException
    from LocalAsgnNode.java:123:in `interpret'
    from BlockNode.java:71:in `interpret'
    from RescueBodyNode.java:108:in `interpret'
    from RescueNode.java:199:in `handleJavaException'
    from RescueNode.java:141:in `interpretWithJavaExceptions'
    from RescueNode.java:110:in `interpret'
    from BeginNode.java:83:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from ASTInterpreter.java:74:in `INTERPRET_METHOD'
    from InterpretedMethod.java:169:in `call'
    from DefaultMethod.java:191:in `call'
    from CachingCallSite.java:302:in `cacheAndCall'
    from CachingCallSite.java:144:in `callBlock'
    from CachingCallSite.java:153:in `callIter'
    from FCallNoArgBlockNode.java:32:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from ASTInterpreter.java:74:in `INTERPRET_METHOD'
    from InterpretedMethod.java:169:in `call'
    from DefaultMethod.java:191:in `call'
    from SuperCallSite.java:346:in `cacheAndCall'
    from SuperCallSite.java:146:in `callBlock'
    from SuperCallSite.java:151:in `call'
    from SuperCallSite.java:107:in `callVarargs'
    from ZSuperNode.java:102:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from ASTInterpreter.java:74:in `INTERPRET_METHOD'
    from InterpretedMethod.java:147:in `call'
    from DefaultMethod.java:183:in `call'
    from CachingCallSite.java:292:in `cacheAndCall'
    from CachingCallSite.java:135:in `call'
    from CallNoArgNode.java:63:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from RootNode.java:129:in `interpret'
    from ASTInterpreter.java:119:in `INTERPRET_ROOT'
    from Ruby.java:724:in `runInterpreter'
    from Ruby.java:2487:in `loadFile'
    from ExternalScript.java:66:in `load'
    from LoadService.java:270:in `load'
    from RubyKernel.java:1076:in `loadCommon'
    from RubyKernel.java:1058:in `load'
    from RubyKernel$s$0$1$load.gen:65535:in `call'
    from DynamicMethod.java:211:in `call'
    from DynamicMethod.java:207:in `call'
    from CachingCallSite.java:312:in `cacheAndCall'
    from CachingCallSite.java:169:in `call'
    from /usr/local/jruby-1.6.7.2/bin/warble:23:in `__file__'
    from /usr/local/jruby-1.6.7.2/bin/warble:-1:in `load'
    from Ruby.java:697:in `runScript'
    from Ruby.java:690:in `runScript'
    from Ruby.java:597:in `runNormally'
    from Ruby.java:446:in `runFromMain'
    from Main.java:369:in `doRunFromMain'
    from Main.java:258:in `internalRun'
    from Main.java:224:in `run'
    from Main.java:208:in `run'
    from Main.java:188:in `main' 
```

我在跑：

*   jruby 1.6.7.2 (ruby-1.8.7-p357) (2012-05-01 26e08ba) (OpenJDK Server VM 1.6.0_20) [linux-i386-java]

在 Fedora 14 下的 i686 机器上。最新的 JRuby 对于这个项目还不够成熟——我已经尝试过了。

我已经尝试重新安装 warbler-1.3.5 并将其升级到 1.3.6 并在本地重建它，但我总是遇到同样的错误。

我可以在在线搜索中找到可以追溯到 2 年前的相同错误，但没有后续讨论，也没有解决方案。任何帮助将不胜感激。

戴夫

# linux - 如何在 Linux 中保留虚拟内存？

> ID：15261527
> 
> 赞同：5
> 
> 时间：2013-03-07T01:38:04.927
> 
> 标签：linux, windows, mmap

我有一个应用程序在 Windows 上使用带有 MEM_RESERVE 标志的 VirtualAllocEx 保留一个连续的内存块。这会保留一个虚拟内存块，但不会用物理页面或页面文件块支持它。因此，访问分配的内存将导致分段错误——但其他分配不会与此虚拟内存块相交。

如何使用 mmap 为 Linux 做同样的事情？我确实注意到了[这个问题](https://stackoverflow.com/questions/3914202/how-can-i-reserve-memory-addresses-without-allocating-them)的答案，但这真的保证说，如果我不接触分配的页面，1 GB 的物理内存不会分配给我的进程吗？我不想要任何颠簸的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T01:46:53.477

我相信您应该能够通过将匿名内存映射到`PROT_NONE`. 访问`PROT_NONE`内存会导致段错误，但内存区域将被保留，不会用于任何其他目的。如果你想分配一个非常大的内存块，添加`MAP_NORESERVE`以确保默认的过度使用机制不会检查你的分配。

`PROT_NONE`通常用于堆栈末尾的“保护”页面。

# javascript - 向 jQuery 对象添加新方法

> ID：15261531
> 
> 赞同：1
> 
> 时间：2013-03-07T01:38:38.993
> 
> 标签：javascript, jquery, methods

我正在创建一个导航栏，该导航栏将根据您所在网站的哪个页面打开（PHP 生成的“选定”类）

我正在尝试在 jQuery 中创建一个方法并将其附加到某些对象的 ID。我想我想让它尽可能地模块化——而且我正在尝试更多地了解 javascript 中的 OOP。

这是我的 HTML：

```
<div id="workNav">Work</a></div>
<div  id="workNavContents">
  <a class="selected" href="foo.html">Video/Film</a>
  <a class="" href="foo.html">Photography</a>
</div>
<div id="clientsNav"><a href="#">Clients</a></div>
<div id="clientsNavContents">
  <a href="foo.html">Agencies/Clients</a>
  <a href="foo.html">Directors/Photographers</a>
</div> 
```

还有我的 Javascript：

```
var showSelected = new function(){
    if ($(this).children('.selected')){
        $(this).show();
    }
}

$('#workNavContents').showSelected = showSelected; 
$('#workNavContents').showSelected();

$('#clientNavContents').showSelected = showSelected; 
$('#clientNavContents').showSelected(); 
```

有些事情告诉我，我非常错过 jQuery 与 javascript 的关键点。任何帮助将非常感激。

谢谢！米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:41:01.127

`$(...)`每次调用它时都会返回一个新对象。

相反，您需要将您的方法添加到 jQuery 的*原型*中：

```
$.fn.showSelected = function() { ... }; 
```

然后可以通过所有 jQuery 对象访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:45:25.133

肯定少了一点理解。jQuery 让用户可以轻松地进行自定义。您需要做的就是访问 jQuery 的原型，它们通过`$.fn`. 一旦到位，就可以使用您的扩展程序。

请注意，我选择了淡入淡出，因此很明显它起作用了

```
var showSelected = function(){
  if ($(this).children('.selected')){
    $(this).hide().fadeIn(2000);
  }
}
$.fn.showSelected = showSelected;//you could also simply assign the function to this
$('#workNavContents').showSelected(); 
```

这是一个演示：http: [//jsfiddle.net/mEgsX/](http://jsfiddle.net/mEgsX/)

另请注意，您不需要使用`new`该功能。这创建了一个函数对象，并且是另一个完整的对话。

# android - 获取PhoneGap中资产文件夹的绝对路径

> ID：15261532
> 
> 赞同：12
> 
> 时间：2013-03-07T01:39:07.533
> 
> 标签：android, cordova, phonegap-plugins

有没有办法在 phonegap 资产文件夹中获取图像的绝对路径？

我需要使用 EmailComposer 插件在邮件中附加图像的绝对路径。

EmailComposer 插件需要这样的绝对路径：

```
 /storage/sdcard0/DCIM/Camera/20121124_125210.jpg 
```

但我要附加的图像在我的资产文件夹中，路径如下：

```
file:///android_asset/www/img/logo.png 
```

不工作

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-11-25T02:08:24.820

以防万一有人仍在寻找解决方案。现在 Cordova 实现了一种非常简单的方法来获取当前应用程序目录（在 Android、iOS 和 BlackBerry 10 上支持）：

`cordova.file.applicationDirectory`

例如，如果您想访问您的`res/audio`目录（在您的`www`）中的音频文件，您只需编写：

`cordova.file.applicationDirectory + 'res/audio/my-audio-file.mp3'`

[这](https://github.com/apache/cordova-plugin-file/#where-to-store-files)是完整的文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:59:51.387

看起来这是不可能的。

请参阅 [https://groups.google.com/forum/#!topic/phonegap/Sw2wThOYm8c](https://groups.google.com/forum/#!topic/phonegap/Sw2wThOYm8c)

从西蒙在那个帖子中的回应中，他说......

> “你不能做你想做的事。资产目录中的文件在技术上不在文件系统上，因此无法通过文件 API 访问它们。这意味着调用 window.resolveLocalFileSystemURI() 不会返回 FileEntry。它正确返回错误代码 1，即 NOT_FOUND_ERR。"

您需要文件的绝对路径才能使电子邮件附件插件正常工作。不幸的是，如果文件位于 assets 文件夹中，则无法使用 cordova 的文件 api 获取绝对路径。

有一个插件可以将文件从您的资产文件夹中复制出来并将它们放到 sdcard 上。然后，您可以将此文件的确切位置传递给电子邮件附件插件。不幸的是，如果您打算使用较新的科尔多瓦版本，下面的插件似乎已经过时了。

[https://github.com/gkcgautam/Asset2SD](https://github.com/gkcgautam/Asset2SD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:10:46.097

将 'file:///android_asset/www/img/logo.png' 传递给 window.resolveLocalFileSystemURI() ，得到的 FileEntry.fullPath 就是你想要的。查看文档以获取详细示例： [http ://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html](http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html)

# jquery - 检查 Youtube iFrame 内的内容是否已更改

> ID：15261534
> 
> 赞同：2
> 
> 时间：2013-03-07T01:39:15.687
> 
> 标签：jquery, html, iframe, youtube

我有一个`iframe`最初不包含视频的视频。当用户按下按钮时，将加载一个 Youtube 视频。为了检测 Youtube 视频何时完成加载，我`on()`用来检测 Youtube iframe 的 DOM 结构何时被修改。目前，当视频加载时，我在控制台中没有看到该`Video Loaded`消息。我的逻辑不正确吗？

```
<div id="button">BUTTON</div>

<div id="container">
    <iframe id="ytplayer" class="hide" type="text/html" width="840" height="470" 
    src="https://www.youtube.com/embed/" frameborder="0" allowfullscreen></iframe>
</div>

$(document).ready(function() {
    $('#button').click( function() {
        $('#ytplayer').attr('src', 'https://www.youtube.com/embed/w7bccxRvxDc?rel=0&showinfo=0');
    });  
    $('#container').on('DOMNodeInserted', '#ytplayer', function() {
        console.log('Video Loaded');
    });    
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:44:00.780

您可能想看看[YouTube iframe API](https://developers.google.com/youtube/iframe_api_reference)。它支持很多事件，包括视频加载时间。该 API 得到官方支持，因此您无需支持自定义构建的代码，以防 Google 更改某些内容。

# c - 在 C 中出现故障分割错误

> ID：15261542
> 
> 赞同：0
> 
> 时间：2013-03-07T01:40:11.550
> 
> 标签：c, shell, sorting, segmentation-fault

我的程序的一小部分有问题，它制作一个随机数列表，然后 shell 对它们进行排序，现在它不会完成计算，这让我认为循环没有完成。我遇到了分段错误错误，但我设法通过解决我访问数组的一些问题来解决这个问题。无论如何，一双新鲜的眼睛可能对我有好处。抱歉，如果选项卡已关闭。

我认为问题在于 shell_results 数组

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main()
{

  /*Initialize Random Array*/
  int *unsorted_list[1000000];
  int random_number;
  int i;

  for(i=0; i<1000000; i++){

    srand ( time(NULL) );
    random_number = rand();
    unsorted_list[i] = random_number; 
  }

  //Do C Shell Sort 
  double shell_results[10][2];

  double clock_diff;
  int j=1000000;
  clock_t t0, t1;
  int k;

  for(i=0;i<10;i++){
    /* Sort the list using shellSort and take the time difference */ 
    t0 = clock();
    shellSort(*unsorted_list, j);
    t1= clock();

    /*Take difference in time*/
    clock_diff = (t1 - t0); 

    /*Add time and list length to the results array*/
    shell_results[i][0] = (double)j;
    shell_results[i][1] = clock_diff;

    /*Check to make sure the array has been sorted*/
    checkSort(*unsorted_list, j);

    /*Re-initialize a longer array*/
    //j+=1000000;       
    for(k=0; k<j; k++){

      srand ( time(NULL) );
      random_number = rand();
      unsorted_list[k] = random_number; 
    }
  }

  return 0;
}

void shellSort(int *A, int n)
{
  int gap , i , j , temp; 

  for (gap = n/2; gap>0; gap /=2)
    for (i=gap; i<n; i++)
      for(j = i-gap; j>=0 && &A[j] > &A[j+gap]; j-=gap){
        temp = &A[j]; 
        A[j] = &A[j + gap]; 
        A[j + gap] = temp; 
      }
}

void checkSort(int *A, int n)
{
  int i;
  for(i=0;i<n;i++){
    if(&A[i]>&A[i+1]){
      printf("Error in sorting \n");
      break;    
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:44:02.290

首先，这条线

```
int *unsorted_list[1000000]; 
```

正在使用指针

一定

```
int unsorted_list[1000000]; 
```

当你填充它时会更好考虑

```
unsorted_list[i] = random_number; 
```

PS：只需要使用`srand`一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:50:44.700

> 抱歉，如果选项卡已关闭。

你能做点什么吗？如果没有，就没有必要抱歉。如果是这样，那就去做吧。

`int *unsorted_list[1000000];`unsorted_list 的类型是什么？一百万个指向 int 的指针的数组。

`unsorted_list[i] = random_number;`unsorted_list[i] 的类型是什么？指向 int 的指针。您确定将 int 值分配给指向 int 对象的指针是否合适？你的编译器没有警告你这一行吗？如果您将来能告诉我们有关警告的信息，那就太好了！

`shellSort(*unsorted_list, j);`更正了 unsorted_list 的类型后， 的类型是`*unsorted_list`什么？诠释。shellSort 期望什么类型？指向 int 的指针。

```
 for(j = i-gap; j>=0 && &A[j] > &A[j+gap]; j-=gap){
        temp = &A[j]; 
        A[j] = &A[j + gap]; 
        A[j + gap] = temp; 
    } 
```

&A[j] 的类型是什么？什么是温度类型？您的编译器在这里给您的警告*并不好*，事实上警告*从来都不是好的*。不要忽视他们！

你在看哪本书？

# mysql - 在 MySQL 中查询日期期间的故障安全方法是什么？

> ID：15261544
> 
> 赞同：1
> 
> 时间：2013-03-07T01:40:25.897
> 
> 标签：mysql, sql

在我的表格中，我使用时间戳字段来修复用户创建记录的时间和其他字段来查看他/她上次更新记录的时间。

然后，当我创建一个查询以向管理员显示从该月的第一天到最后一天创建或更新的记录时，如果我使用两个`TDateTimePick`组件来获取这些日期，我不会获得所有记录，因为该组件插入了当前时间，它与我的时间戳冲突。

为了摆脱这种情况，我现在使用一个文本字段，将日期保存为 YYYYMMDDHHMMSS 之类的数字，然后查询`Left(numered_date, 8) >= $begin_date and Left(numered_date, 8) <= $end_date`。

但是我的客户抱怨报告中缺少一些数据。

我究竟做错了什么？

有没有更好的（失败保存）方法来检查这些日期？

我有一个问题，我来自巴西，这里的日期就像 DD/MM/YYYY。为此，我有时必须创建一个新的文本字段，并将日期格式化为此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:15:20.407

我建议您使用日期时间字段。还有，看看

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

*   顺便说一句，我也是巴西人
*   如果您有其他疑问，请给我发邮件（葡萄牙语（如果您愿意））

[从这里编辑]
我说的太多了。我忘了提几件事。看看下面的命令，

```
SELECT FROM_UNIXTIME(1234567890, '%d / %m / %Y, %k : %i'); 
```

行。给你的另一个秘密（关于 Delphi）：（
很长时间我不使用 Delphi，但也许它对你有帮助）
你应该使用“AdoQuery”对象，而不是“ADO”对象。这样您就可以使用自己的选择。而且，您可以创建视图（当然它对任何语言都有帮助！）。您可以在获得格式化日期的女巫中创建视图（只是您想要的方式）。视图为我节省了很多时间，因为我不得不做大量的 DAO（数据访问对象）来列出论坛、主题、帖子等。然后我为它们做了一些视图。从我的观点来看，只有一个 DAO 用于查询。*伙计们，对不起我的英语顺便说一句

# database - 我应该在 Oracle 中使用 %TYPE 引用而不是标准数据类型吗？

> ID：15261545
> 
> 赞同：0
> 
> 时间：2013-03-07T01:40:29.510
> 
> 标签：database, oracle, oracle10g

如果我的数据库中有超过 200 个表，我应该使用 %TYPE 引用而不是标准数据类型吗？

与标准数据类型相比，使用 %TYPE 会降低性能吗？

我是 Oracle 的新手，也许这个问题很基础，但我认为这对像我这样的新手来说非常重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:50:31.617

TYPE 关键字在编译时解析，与性能无关。

您应该尽可能地使用它，因为它为您存储的程序和对象创造了灵活性。当被引用的对象发生更改并且引用它的程序使用 TYPE 引用进行更改时，调用者将自动获得更改 - 它只需重新编译并使用新定义。使用非 TYPE 引用，您的程序可能会中断，因为字段的定义类型对于引用的列来说太大了。

例如，如果我有一个简单的表：

```
CREATE TABLE A (I1 INTEGER, C1 VARCHAR2(10)); 
```

我有一个从该表中读取的存储过程：

```
PROCEDURE P
  var  VARCHAR2(10);
BEGIN
  SELECT C1 INTO var FROM A WHERE I1 = 1;
END; 
```

这有效，直到您修改列的长度：

```
ALTER TABLE A MODIFY C1 VARCHAR2(20); 
```

现在你可能会从你的选择中得到一个错误。

如果你这样写程序：

```
PROCEDURE P
  var  A.C1%TYPE;
BEGIN
  SELECT C1 INTO var FROM A WHERE I1 = 1;
END; 
```

然后你的代码是免疫的，因为 Oracle 会在你运行它时重新编译过程，检测 TYPE 引用。

# module - 允许用户在 Drupal7 中创建子用户，并允许他们向两个帐户添加付费服务

> ID：15261548
> 
> 赞同：0
> 
> 时间：2013-03-07T01:41:04.300
> 
> 标签：module, drupal-7, user-management

第一次在这里发帖！尽管 StackOverflow 多年来一直是无价之宝......

所以我正在为当地的非营利组织开发 Drupal 7 站点。该网站的目标之一是允许人们注册成为该组织的成员。这些会员资格是付费的，并且根据特定服务的不同而有所不同（有些是一次性收费，有些是经常性收费）。我想我可以用 ubercart 或类似的东西处理支付部分，但问题是弄清楚如何允许主要成员将子用户添加到他们的帐户中。主要成员可以免费将其家庭成员添加到他们的帐户中，因此一个用户可能有多个子用户（例如孩子和配偶）。

我已经尝试过 Subusers 模块，但它似乎有问题，不能按预期工作，并且没有得到维护或完全移植到 D7。我研究过有机群体，这似乎更适合大群人。有关系，但我只是不确定如何与其他模块一起实现它以使其工作。

有没有人有任何建议或提示可以为我指明正确的方向？我真的很想学习如何做到这一点，因为我计划在完成后将 Drupal 用于其他一些项目。谢谢！

# ajax - ajax POST 上的 IE 10 HTTP 401 错误

> ID：15261549
> 
> 赞同：4
> 
> 时间：2013-03-07T01:41:17.350
> 
> 标签：ajax, iis-7, http-post, internet-explorer-10, http-status-code-401

[我一直在追查一个问题](https://stackoverflow.com/questions/15210158/401-using-multiple-authentication-methods-ie-10-only)，并决定对这个问题进行最基本的再现，希望一个简化的问题能帮助我解决这个问题。

通过 javascript 中的 ajax 发布到 Web 服务时，我收到 401。我将包含尽可能多的信息以及我尝试过的所有故障排除步骤。

我在站点的根目录上创建了一个测试页面，并尝试了普通的 JS 和 jquery 来进行 ajax 调用，结果相同。我已经包含了注释掉的jquery...

**页**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//" "http://www.w3.org/TR/html4/loose.dtd">

<head>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

<script type="text/javascript">
/*$(document).ready(function() {
    $('#button').click(function() {
        var ID = 2;
        var firstname = $('#First_Name').val();
        var lastname = $('#Last_Name').val(); 

        $.ajax({
            type: 'POST',
            url: '/service/name/service.aspx/ChangeName',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: '{ "ID": "' + ID + '", "firstName": "' + firstname + '", "lastName": "' + lastname + '" }',
            success: function() {
                console.log('success');

            },
            error: function(d) {
                console.log(d.responseText);
            }
        });
    });
});*/

function runAjax() {
    //Create Http request depending on browser
    var xmlhttp;
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();}
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

    xmlhttp.onreadystatechange=function(){
      if (xmlhttp.readyState==4 && xmlhttp.status==200){
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;}
      }

    // Function to create 
    var url = "/service/name/service.aspx/ChangeName";
    xmlhttp.open("POST",url,true);
    xmlhttp.setRequestHeader("Content-Type", "application/json; charset=utf-8");
    var data=JSON.stringify({ "ID": "2", "firstName": "John", "lastName": "Doe" });
    xmlhttp.send(data);
}
</script>
</head>
<body>
<div id="myDiv">
      <table width="100%" cellpadding="3" cellspacing="0">
        <tbody>
        <tr>
            <td width="34%">
                <div align="right">
                    <strong>First Name: </strong>
                </div>
            </td>
            <td>
                <div>
                    <input name="First_Name" type="text"id="First_Name" size="20">
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div align="right">
                    <strong>Last Name: </strong>
                </div>
            </td>
            <td>
                <input name="Last_Name" type="text" id="Last_Name" size="20">
            </td>
        </tr>
      </tbody>
      </table>

      <div align="center">

        <input id="button" type="button" value="Update Student Details" onclick="runAjax();" style="margin:5px;">

        </div>
    </div>
</body>
</html> 
```

现在在除 IE10 之外的所有浏览器中都可以正常工作。在提琴手中，它显示 IE 收到 401 响应

**请求标头** *提琴手*

```
POST http://dev.mysite/service/name/service.aspx/ChangeName HTTP/1.1
Accept: */*
Content-Type: application/json; charset=utf-8
Referer: http://dev.mysite/test_page.html
Accept-Language: en-US
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; WOW64; Trident/6.0)
Connection: Keep-Alive
Content-Length: 46
DNT: 1
Host: dev.mysite
Pragma: no-cache

{"ID":"2","firstName":"John","lastName":"Doe"} 
```

**响应标头** *提琴手*

```
HTTP/1.1 401 Unauthorized
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.0
jsonerror: true
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
X-Powered-By: ASP.NET
Date: Thu, 07 Mar 2013 01:12:05 GMT
Content-Length: 105
Proxy-Support: Session-Based-Authentication 
```

我在服务器上启用了失败的请求跟踪，这是它为该调用提供的信息：

**失败的请求日志** *iis*

**1\. -GENERAL_REQUEST_START**

*   *站点 ID* - 2
*   *AppPoolId* - ASP.NET v4.0
*   *ConnId* - 1610622306
*   *RawConnId* - 0
*   *RequestURL* - [http://dev.mysite:80/service/name/service.aspx/ChangeName](http://dev.mysite:80/service/name/service.aspx/ChangeName)
*   *请求动词*- POST

**2\. -FILTER_START**

*   *过滤器名称 - C:\Windows\Microsoft.NET\Framework\ v4.0.30319* \aspnet_filter.dll

**3.-FILTER_END**

**4.-AspNetStart**

*   *连接ID* - 0
*   *上下文 ID* - {00000000-0000-0000-6425-0080000000BF}
*   *数据 1* - POST
*   *数据 2 - */service/name/service.aspx**
**   *数据3* -*

 ***5.-GENERAL_REQUEST_END**

*   *字节发送*- 359
*   *收到的字节数*- 440
*   *HttpStatus* - 401
*   *HttpSubStatus* - 0

通过简化 ajax 请求，我发现它不仅是 Windows 8 的问题，而且打开兼容模式也不起作用。

我已经尝试在 IIS 中禁用内核模式身份验证，我已经三重检查了 Web 服务文件夹的权限，[遵循了这些建议](https://serverfault.com/questions/484657/401-using-multiple-authentication-methods-ie-10-only/484677?noredirect=1#484677)，我什至尝试将 Web 服务与页面放在同一目录中。所有结果都相同......非常感谢任何方向或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-09T18:35:04.223

我知道这是一个老问题，但我遇到了这个问题，因为我遇到了类似的问题。然而，这对我有用 - 一旦我将它添加到 web.config 我停止收到 401 错误：

```
<webservices>
    <protocols>
        <add name="HttpGet"></add>
        <add name="HttpPost"></add>
    </protocols>
</webServices> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T02:20:26.953

只是好奇这是否与我遇到的问题相同。

在 URL 末尾添加斜杠是否可以解决 IE 10 中的问题？例如

```
/service/name/service.aspx/ChangeName/ 
```

代替

```
/service/name/service.aspx/ChangeName 
```

如果是这样，那么 Fiddler 和 IE 的 Eric Lawrence 在这里解释它，[http://blogs.msdn.com/b/ieinternals/archive/2010/11/22/internet-explorer-post-bodies-are-zero-bytes- in-length-when-authentication-challenges-are-expected.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/11/22/internet-explorer-post-bodies-are-zero-bytes-in-length-when-authentication-challenges-are-expected.aspx)*

# javascript-events - jQuery 动作在绑定到鼠标时有效，但在绑定到点击时无效

> ID：15261550
> 
> 赞同：1
> 
> 时间：2013-03-07T01:41:35.157
> 
> 标签：javascript-events, jquery

我是一个超级长期的读者，但在这里发表的评论很少。每次我有问题时，我都能够在我不得不真正提出任何问题之前寻找答案。我尽量不偷懒。

无论如何，我最近一直在自学更多的 jQuery，但我遇到了一个我不能仅仅搜索的问题。需要比我更多受过教育的眼睛。请注意，这与 Internet Exploder 不完全兼容（另一个线程的对话）

在这个小提琴中：http: [//jsfiddle.net/29Aat/65/](http://jsfiddle.net/29Aat/65/)

我将鼠标滚动绑定到从底部到窗帘的上下效果。它足以满足我的目的。向下滚动，主要内容显示。向上滚动，欢迎屏幕显示。

旁白：不要尝试以移动分辨率打开它...我还没有完成设置。可以说，不会有一堆层飞来飞去。

所以我有两个主要的功能来提升和降低百叶窗。

显示（）隐藏（）

```
// Function to show #main-content in standard resolution
function showit() {
    if ($('#main-content').hasClass('hideit')) {
        $('#main-content').removeClass('hideit').addClass('showit');
        $('#wrap').removeClass('cursor');
        $('#main-content').stop().animate({
            height: '+=' + realheight,
            opacity: 0.7
        });
        $('#welcome').stop().animate({
            opacity: 0,
            top: '-=10'
        }, 600).delay(400).animate({
            top: midpoint
        }, 100);
    }
}

// Function to hide #main-content in standard resolution
function hideit() {
    if ($('#main-content').hasClass('showit')) {
        $('#main-content').removeClass('showit').addClass('hideit');
        $('#wrap').addClass('cursor');
        $('#main-content').stop().animate({
            height: '-=' + realheight,
            opacity: 0
        });
        $('#welcome').stop().animate({
            opacity: 1,
            top: '+=10'
        }, 600);
    }
} 
```

当鼠标滚动调用 hideit() 时，窗帘完美落下。

当我点击红色的“X”来调用 hideit() - 主要内容窗帘的右上角 - 它无法正确执行。幕布不但没有落下，反而再次升起。

希望这里有人能帮忙解释一下。我无计可施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:51:06.483

你的问题是传播。按钮在`.closeit`里面`#wrap`。这意味着当您单击红色 X 时，该`hideit`函数将正确运行，但单击事件将传播并最终到达`#wrap`哪个也会处理它，运行`showit`- 导致您看到的奇怪效果。

您需要使用`event.stopPropagation()`关闭按钮的事件处理程序中的方法停止传播，如下所示：

```
// Activate the close button
$(".closeit").click(function (e) {
    hideit();
    e.stopPropagation();
}); 
```

[固定小提琴](http://jsfiddle.net/29Aat/66/)（也解除了移动设备的武装，所以我可以正确查看）

# c# - 为什么我需要使用自定义会话管理器？

> ID：15261555
> 
> 赞同：1
> 
> 时间：2013-03-07T01:41:51.777
> 
> 标签：c#, session

首先，请原谅我愚蠢的问题。我是 ASP.net 和 C# 的新手。当我用谷歌搜索了解 asp.net 中的会话时，我偶然发现了许多关于“自定义会话管理器”的讨论。

为什么我需要使用自定义会话管理器？我可以像下面的例子那样使用会话吗？

```
//Default.aspx

Session["name"] = "My Name"; 
```

然后

```
//NextPage.aspx

Label1.Text = "Hello" + (string)Session["name"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:45:38.580

可以使用不同的会话管理器来更改会话存储位置的行为，无论是在内存中、文件还是数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T00:17:12.790

有时您需要创建一个名为 Session Manager 的类来管理在应用程序屏幕之间传输的所有信息。

很多时候，这些变量用于向导或任何最终正确且必要的过程中删除或修改此类信息。通过这种方式，您可以通过对象或变量组来完成。

我的建议是创建并明智地使用它（记住您正在使用服务器的 (iis) 内存）

想法样本：

```
public class SessionManager
{
    //Groups of variables
    public enum Groups
    {
        Users,
        Processes
    }

    //Value keys
    private static int USERID
    {
        get { return USERID"; }
    }

    private static string USERGUID
    {
        get { return "USERGUID"; }
    }

    //Properties        
    public String UserGuid
    {
        get { return this.session[USERGUID]; }
        set { this.session[USERGUID] = value; }
    }

...

    //Finnish using values
    public bool Finnish(Groups group)
    {
        switch (group)
        {
            case Groups.Users:
                this.Session.Remove(USERID);
                this.Session.Remove(USERGUID);
                break;
            case Groups.Processes:
                this.Session.Remove(UP);
                this.Session.Remove(DOWN);
            default:
                return false;
        }
        return true;
    }

...

} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:45:48.137

不，您不需要“自定义会话管理器”——我已经使用 ASP.NET 将近 10 年了，以前从未遇到过这个术语。

您的示例使用`Session`是可以接受的（尽管调用 to`.ToString()`不是*那么*必要，但您可以直接将其强制转换为`String`which 可以防止空值）。

一般来说，您只需要担心自己`Session`是在使用多服务器 webfarm 还是负载平衡集群。

# python - 为什么 Python 2.7.3 认为我的 .csv 文档都在一行上？

> ID：15261557
> 
> 赞同：3
> 
> 时间：2013-03-07T01:41:58.850
> 
> 标签：python, python-2.7, csv, for-loop, line-endings

我是编程新手，在我的一些课程作业中遇到了一个我无法理解的问题。考虑一个名为“example.csv”的虚构文件，其内容如下。

```
Key1,Value1
Key2,Value2
Key3,Value3
... 
```

如果我运行以下代码，它会打印文件中的每一行，然后在最后一行打印一个星号。我希望它打印由星号分隔的每一行。

```
infile = open("example.csv", "r")
for line in infile:
    print line.strip()
    print '*'
    #row_elements = line.split(",")
    #print row_elements 
```

此外，如果我尝试通过删除上述代码中的哈希来分割每个逗号处的行，我会得到以下输出。

```
['Key1', 'Value1\rKey2', 'Value2\rKey3'... 
```

通过将 "\r" 传递给 .split() 方法，输出略有改善。

```
['Key1,Value1', 'Key2,Value2'... 
```

我仍然不明白为什么python首先认为整个文件都在一行上。有没有人对此有见识？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T02:10:17.947

您的文件`\r`用作行分隔符（也称为“CR”或“Classic Mac”换行约定）。默认情况下， Python`open`不处理这个问题。

您可以使用“通用换行符”模式（`'rU'`mode in `open`）正确打开文件。

（请注意，一些 Mac 文本编辑器仍将`\r`其用作行终止符，但谢天谢地，这些现在比几年前少得多。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T01:47:19.077

您的输入文件格式不正确。在 Linux 上，行由 . 分隔`'\n'`。在 Windows 上，行由 分隔`'\r\n'`，但运行时库中的代码会使其`'\r'`消失。

在您的文件中，行由 分隔`'\r'`，这不是*任何*现代操作系统的标准。也许创建该文件的程序在某些方面存在缺陷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T02:37:22.537

如果您正在处理 csv，您应该使用该[`csv`](http://docs.python.org/2/library/csv.html)模块，它会处理处理 csv 输入/输出所涉及的大部分废话。

```
import csv
with open("example.csv", "rb") as infile:
    reader = csv.reader(infile)
    for row in reader:
        print row # a list of items in your file 
```

当[`with`](http://docs.python.org/2/whatsnew/2.6.html#pep-343-the-with-statement)您退出语句块时，语句会自动为您关闭文件。

# requirejs - Durandal / Require.JS - 未找到信号器/集线器参考

> ID：15261560
> 
> 赞同：4
> 
> 时间：2013-03-07T01:42:19.903
> 
> 标签：requirejs, signalr, singlepage, durandal

我正在使用“HotTowel”单页应用程序模板，但我无法让 SignalR 正常工作。我收到以下错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found)
http://localhost:8184/signalr/hubs 
```

我有一种使用标准 MVC 4 单页应用程序的样板，有一个非常简单的集线器（用户在线计数器）。一切正常。

在我切换到“HotTowel”后它停止工作。我与 John Papa 进行了核对，他给了我一个建议，让我检查 Durandal 一侧，因为他提到他知道将对一些干扰某些路由的问题进行一些修复。

**主.js：**

```
require.config({
  paths: {
    "text": "durandal/amd/text",
    "signr": "../scripts/jquery.signalR-1.0.1.min"
  }
});
define(['durandal/app', 'durandal/viewLocator', 'durandal/system', 'durandal/plugins/router', 'services/logger', "signr"],
  function (app, viewLocator, system, router, logger, sigr) {

  // Enable debug message to show in the console
  system.debug(true);

  app.start().then(function () {
    toastr.options.positionClass = 'toast-bottom-right';
    toastr.options.backgroundpositionClass = 'toast-bottom-right';

    router.handleInvalidRoute = function (route, params) {
      logger.logError('No Route Found', route, 'main', true);
    };

    // When finding a viewmodel module, replace the viewmodel string 
    // with view to find it partner view.
    router.useConvention();
    viewLocator.useConvention();

    // Adapt to touch devices
    app.adaptToDevice();
    //Show the app by setting the root view model for our application.
    app.setRoot('viewmodels/shell', 'entrance');
  });
}); 
```

**全球.asax.cs：**

```
protected void Application_Start()
{
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    // Register the default hubs route: ~/signalr/hubs
    RouteTable.Routes.MapHubs();
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

**热毛巾\index.cshtml：**

```
<body>
  <div id="applicationHost">
    @Html.Partial("_splash")
  </div>

  @Scripts.Render("~/scripts/vendor")
    @if(HttpContext.Current.IsDebuggingEnabled) {
      <script type="text/javascript" src="~/App/durandal/amd/require.js" data-main="@Url.Content("~/App/main")"></script>
    } else {
      <!-- Remember to run the Durandal optimizer.exe to create the main-built.js  -->
      <script type="text/javascript" src="~/App/main-built.js"></script>
    }    
  <script type="text/javascript" src="~/signalr/hubs"></script>    
  @*<script src="~/App/services/hubs.js"></script>*@
</body> 
```

（我知道这可能不是放置它的地方，但我无法让它出现在我的资源中，直到我把它放在这里）-顺便说一句，如果你能告诉我正确的方法，我会很感激

我还能告诉你什么来帮助我解决这个问题？我有对 SignalR 等的所有引用...我有一个使用另一个项目模板的工作示例...

有人可以指导我吗？

它应该很容易复制：

1.  只需使用“热毛巾”模板
2.  添加所有 SignalR 引用
3.  用我的代码测试

我在想 Durandal 或 Require.Js 都会阻碍这一点。有人可以挽救这一天吗？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T22:52:08.207

问题是 SignalR 需要先注册其路由。HotTowel 模板尝试通过将 PreApplicationStartMethod 与 WebActivator 一起使用来“成为第一”。

解决此问题的几种方法.. 我们有可用的 WebActivator，因此您可以在 App_Start 中创建一个新类（例如 SignalRConfig.cs），如下所示：

```
[assembly: WebActivator.PreApplicationStartMethod(
typeof(SignalRConfig), "RegisterRoutes", Order = 1)]
public static class SignalRConfig
{
    public static void RegisterRoutes()
    {
        RouteTable.Routes.MapHubs();
    }
} 
```

这将在 HotTowel 之前注册 SignalR 的路线。在 global.asax 中删除您对 MapHubs 的调用，因为现在将为您处理。

或者，打开 HotTowelRouteConfig.cs 并删除/注释掉这个属性：

```
[assembly: WebActivator.PreApplicationStartMethod(
typeof(Empire.Web.App_Start.HotTowelRouteConfig), "RegisterHotTowelPreStart", Order = 2)] 
```

然后进入 global.asax，在调用 RouteTable.Routes.MapHubs() 之后，添加：

```
HotTowelRouteConfig.RegisterHotTowelPreStart(); 
```

在此之后，他们应该打得很好。

# ruby - 数组的 Ruby 哈希

> ID：15261568
> 
> 赞同：0
> 
> 时间：2013-03-07T01:42:46.777
> 
> 标签：ruby, arrays, hash

所以我有一个这样的哈希：

```
hash  = { "a"=>[1, 2, 3], "b"=>[18, 21, 9] } 
```

我想获得整个数组，而不仅仅是值。
看起来这应该有效：

```
hash.each{|key,value| value}

[1, 2, 3]
[18, 21, 9] 
```

但我得到的是数组 1、2、3 的各个元素。我知道我可以做 hash.values，但这给出了一个没有键的数组数组。我需要键/值（数组）对。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:45:46.270

您所描述的确实按预期工作：

```
=> {"a"=>[1, 2, 3], "b"=>[18, 21, 9]}
[4] pry(main)> hash.each { |k,v| puts v.length }
3
3 
```

您可以发布一段代码来说明您的具体问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:45:54.843

您的构造*确实*为您提供了整个数组：

```
irb(main):001:0> hash = { "a" => [1, 2, 3], "b" => [18, 21, 9] }
=> {"a"=>[1, 2, 3], "b"=>[18, 21, 9]}
irb(main):002:0> hash.each{ |key,value| puts value.class.name }
Array
Array 
```

也许你只是想`puts`一个数组？如果是这样，默认情况下将每个元素放在单独的行上。

```
irb(main):003:0> puts [1,2,3]
1
2
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T15:56:53.387

如果你有这个

```
hash = { "a"=>[1, 2, 3], "b"=>[18, 21, 9] } 
```

并且您希望仅使用密钥访问器返回整个数组。例如

```
hash[:a] = [1, 2, 3]
hash[:b] = [18, 21, 9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T01:48:22.413

不确定我是否完全理解，但您是否要求这样的东西（使用`.to_a`）：

```
hash = { "a"=>[1, 2, 3], "b"=>[18, 21, 9] }
 => {"a"=>[1, 2, 3], "b"=>[18, 21, 9]}
arr = hash.to_a
 => [["a", [1, 2, 3]], ["b", [18, 21, 9]]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T01:53:01.630

尝试这个：

```
hash.map { |k,v| { k => v} } 
```

它返回：

```
{"a"=>[1, 2, 3]}
{"b"=>[18, 21, 9]} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T01:54:10.047

这是你想要的吗？

```
hash.map{|key,value| [key]+value }
=> [["a", 1, 2, 3], ["b", 18, 21, 9]] 
```

# c++ - 精神 real_parser ".e"

> ID：15261571
> 
> 赞同：2
> 
> 时间：2013-03-07T01:43:04.403
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我正在尝试使用 real_parser 和以下 ureal_policies 解析实数：

```
template <typename T>
struct number_real_policies : qi::ureal_policies<T>
{
    static bool const expect_dot = true;

    template <typename Iterator, typename Attribute>
    static bool
    parse_nan(Iterator& first, Iterator const& last, Attribute& attr) {
        return false;
    }

    template <typename Iterator, typename Attribute>
    static bool
    parse_inf(Iterator& first, Iterator const& last, Attribute& attr) {
        return false;
    }
}; 
```

它似乎完美地解析了我需要的实数格式的所有变体，但我注意到以下字符串也被接受：“.12345.e12”。

在小数部分接受两个点是否正常（它仅适用于 E/e 之前的第二个点，并且 E/e 必须存在）？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:48:46.613

正如@llonesmiz 在我的测试应用程序中正确指出的那样，它完全按照设计工作：

**`[Live On Coliru](http://coliru.stacked-crooked.com/a/22d46fe76d8c3652)`**

看起来您忘记检查解析器退出代码？

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;

typedef std::vector<double> attr_t;

template <typename T>
struct number_real_policies : qi::ureal_policies<T>
{
    static bool const expect_dot = true;

    template <typename Iterator, typename Attribute>
    static bool
    parse_nan(Iterator& first, Iterator const& last, Attribute& attr) {
        return false;
    }

    template <typename Iterator, typename Attribute>
    static bool
    parse_inf(Iterator& first, Iterator const& last, Attribute& attr) {
        return false;
    }
};

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, attr_t(), Skipper>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        start %= *mydouble_;
        BOOST_SPIRIT_DEBUG_NODE(start);
    }

  private:
    qi::rule<It, attr_t(), Skipper> start;
    qi::real_parser<double, number_real_policies<double> > mydouble_;
};

bool doParse(const std::string& input)
{
    typedef std::string::const_iterator It;
    auto f(begin(input)), l(end(input));

    parser<It, qi::space_type> p;
    attr_t data;

    try
    {
        bool ok = qi::phrase_parse(f,l,p,qi::space,data);
        if (ok)   
        {
            std::cout << "parse success\n";
            std::cout << "data: " << 
                karma::format_delimited(karma::columns(3) [*karma::auto_], ' ', data) << "\n";
        }
        else      std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

        if (f!=l) std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";
        return ok;
    } catch(const qi::expectation_failure<It>& e)
    {
        std::string frag(e.first, e.last);
        std::cerr << e.what() << "'" << frag << "'\n";
    }

    return false;
}

int main()
{

    bool ok = doParse(
            "0\.    2\.    .3    \n  "
            "0.e7  2.e7  .3e7  \n"
            "0.e-7 2.e-7 .3e-7 \n"
            // shouldn't accept:
            //"0..e7\n"
            "0.3.e7\n"
            );
    return ok? 0 : 255;
} 
```

输出：

```
parse success
data: 0.0 2.0 0.3 
0.0 2.0e07 3.0e06 
0.0 2.0e-07 3.0e-08 
0.3 

trailing unparsed: '.e7
' 
```

# flash - flash ：从时间轴上的确切帧开始

> ID：15261574
> 
> 赞同：0
> 
> 时间：2013-03-07T01:43:24.850
> 
> 标签：flash, flash-cs6

我有一个包含许多帧的 Flash 项目。我想测试剪辑的一小部分，但每次我运行时，它都会从头开始运行，所以我必须等到我想要的帧。

所以，我的问题是：在 flash cs6 中，我怎样才能从时间轴上的精确帧运行。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:17:06.440

如果您的项目只是时间轴上的动画，您可以插入一些代码：

```
gotoAndPlay(10); // would jump to frame 10 when flash hits this bit of code 
```

在第一帧。您可以将它放在该框架的脚本区域中。但是，如果您的项目在时间轴上包含必须运行的其他代码（例如初始化或设置代码），那么您可能必须先模拟所有这些代码，然后才能跳转到某个帧，因为它可能会跳过它。

# c# - symbolbarcodescanner 不喜欢在扫描回调中被关闭

> ID：15261579
> 
> 赞同：1
> 
> 时间：2013-03-07T01:44:04.547
> 
> 标签：c#, windows-mobile, compact-framework, motorola

摩托罗拉符号条形码扫描器与委托事件函数一起使用，如果我尝试在该空间的上下文中禁用扫描器，我会得到一个空引用异常。

如果我只是禁用扫描仪但在该功能之外执行一切正常。

任何想法如何解决这个问题？扫描会打开一个新表单，这意味着需要禁用扫描仪...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:21:29.347

您可以在扫描仪回调函数中触发计时器。然后在计时器滴答回调中禁用设备。请记住，如果在计时器滴答之前再次点击扫描仪回调，您将需要重置计时器。否则可能会导致从扫描仪接收到的数据丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:00:44.583

扫描仪的启用是属性还是您实际上需要将其关闭？

在我使用的扫描仪无法关闭的项目中，我用我自己的来抽象他们的库，并在我的库上有一个 Enabled 属性。然后在我的课堂上，我只是让真实扫描仪的实例保持运行，如果我的 Enabled 属性被关闭，我没有向外部课堂提出事件。

因此，您也许可以在这里做类似的事情。

```
void ScannerCallback(object sender, EventArgse)
{
    if (Enabled)
    { 
      OnBarcodeArrived(this, EventArgs.empty);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:29:34.280

保罗的想法看起来很有趣。

另一种选择是根据使用该控件的 GotFocus 和 LostFocus 事件选择的控件来启用/禁用扫描仪。

一个事件可以连接所有这一切。

```
private void Control_FocusChanged(object sender, EventArgs e) {
  ScannerEnabled = ((Control)sender).Focused;
} 
```

（不过，您必须对该`ScannerEnabled`变量进行编码。

![属性窗口](../Images/8e944d0fb3ee307fdba997b92d5a9ef1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:27:43.053

我强烈建议您将扫描仪对象或围绕该对象的包装器创建为项目中的单例。我发现几个供应商的数据收集对象的 Dispose 处理是不确定的，对象的快速重建更是如此。通过使用单例，您可以避免整个问题。一个在启动时创建，一个在程序关闭时处理。

# javascript - jquery表单名称选择器在作为参数传递时不起作用

> ID：15261580
> 
> 赞同：0
> 
> 时间：2013-03-07T01:44:06.770
> 
> 标签：javascript, jquery

我有一个函数，它需要 4 个参数，即表单名称、按钮类、函数、事件类型我要做的就是选择表单的元素按钮并相应地调用函数，但它对我不起作用 **当我对表单进行硬编码时工作名称和按钮类**

```
registerFormEvent : function(formName,buttonClass,func,eventType) {
$('form[name= "demoForm"]').find('.submit').on(eventType,func); 
```

**虽然当我尝试将参数传递给表单名称和按钮类名称时它不起作用**

```
registerFormEvent : function(formName,buttonClass,func,eventType) {
    $('form[name= formName]').find(buttonClass).on(eventType,func);
} 
```

我知道它是一个语法错误，但我找不到解决方法..帮助真的很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:46:48.387

尝试这个：

```
registerFormEvent : function(formName,buttonClass,func,eventType) {
    $('form[name="'+formName+'"]').find(buttonClass).on(eventType,func);
} 
```

您需要在选择器中的字符串之外添加 formName 变量

# javascript - 检测 prev() 项目是否在当前元素之前？

> ID：15261581
> 
> 赞同：1
> 
> 时间：2013-03-07T01:44:28.183
> 
> 标签：javascript, jquery

如果我有以下代码：

```
<p>
Suspendisse dictum <span>feugiat</span> nisl ut dapibus. <span>Mauris</span><span> iaculis porttitor</span> posuere. Praesent id metus massa, ut blandit odio. Proin quis tortor orci.
</p> 
```

您使用以下代码：

```
$("span").click(function(){
    alert($(this).prev().text());
}); 
```

如果你点击`<span> iaculis porttitor</span>`它，它会发出警报`Mauris`。这是正确的行为，但我只想检测`prev()`元素是否就在当前单击的元素旁边。由于`<span> iaculis porttitor</span>`is的前一个元素`<span>Mauris</span>`，这可以正常工作。

但是，如果您单击`<span>Mauris</span>`，它会提醒`feugiat`，因为那是前一个元素的文本。我想要的是，这将返回 false，因为之前没有元素`<span>Mauris</span>`，只有文本。

这在 jQuery 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:51:19.307

您可以检查 previousSibling 是否为文本节点

```
$("span").click(function(){
  if (this.previousSibling){
    if (this.previousSibling.nodeType == 3){
        alert(false);
    }
    else{
        alert($(this.previousSibling).text());
    }
  }
}); 
```

[http://jsfiddle.net/mowglisanu/PUnce/](http://jsfiddle.net/mowglisanu/PUnce/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:56:59.587

不确定这是否会有所帮助，但可能会有所帮助。

考虑两个功能（都可能需要调试）：

```
function unwrapUnhighlighted ($container) {
    $container.find("span.unhighlighted").unwrap();
}

function rewrapUnhighlighted ($container) {
    $container.contents().each(function(){
        if (this.nodeType == 3) {
            $(this).wrap('<span class="unhighlighted" />')
        }
    });
} 
```

现在考虑`unwrapUnhighlighted(...)`在插入新`.highlight()`跨度之前调用`rewrapUnhighlighted (...)`，然后再调用。

因此，您应该保证每个文本片段都包含在`<span class="highlight">...</span>`or`<span class="unhighlighted">...</span>`中，并且 jQuery`.prev().text()`将按照您最初的预期工作。

对于调试，请提供`.unhighlighted`一些背景颜色以使类可观察。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:50:26.217

使用 jQuery 是不可能的。您将不得不求助于本机 DOM API。使用[`previousSibling`](https://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling)被点击的 DOM 对象的属性。[`nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)您可以通过查询其属性来检查该元素是文本节点还是元素节点。

# ssl - 为什么 DTLSv1_listen() 返回零？

> ID：15261584
> 
> 赞同：1
> 
> 时间：2013-03-07T01:44:59.487
> 
> 标签：ssl, openssl, dtls

我正在使用示例代码“dtls_udp_echo.c”学习 DTLS...

服务器：“DTLSv1_listen(ssl, &client_addr)”

底层套接字是非阻塞的，但会在可读性时唤醒。

一旦客户端执行 SSL_connect()，服务器就会被调用。所以我相信hello是由服务器发送和接收的。但是 DTLSv1_listen() 总是返回零，并且 client_addr 也全为零。我只是不明白有什么问题。

我接受相关帖子的建议添加 SSL_state_string_long()。它在 DTLSv1_listen() 返回 0 后打印“SSL 状态之前/接受初始化”。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:14:31.943

也许您启用了 cookie 交换？我不确定它是否在较新的 openssl 版本中默认启用。为了防止服务器受到 dos 攻击，hello 消息有不同的行为。客户端发送一个 hello，服务器用一个 helloVerifyRequest 应答。客户端发送一个带有附加 cookie 的 hello。服务器验证这个cookie，当它有效时，正常的握手例程继续。DTLSv1_listen 在发送此 HelloVerifyRequest 后返回 0。可能那是你的问题。我找到了一个关于客户端服务器与 dtls 通信的近乎完美的文档。这是[链接](http://sctp.fh-muenster.de/DTLS.pdf)。

# asp.net - IIS 中 HTML 页面的 URL 路由/MapRequestHandler 错误

> ID：15261586
> 
> 赞同：1
> 
> 时间：2013-03-07T01:45:07.250
> 
> 标签：asp.net, visual-studio-2008, web-config, iis-7.5, url-routing

在我的本地主机中，我无法设置工作环境。我从一切正常的登台复制了 web.config。我收到 html 页面的错误 404。

```
Module IIS Web Core
Notification    MapRequestHandler
Handler StaticFile
Error Code  0x80070002 
```

[我在本文](http://msdn.microsoft.com/en-us/magazine/dd347546.aspx)的 web.config 中添加了以下内容，这些内容在 Staging 中不存在并且仍然有效，但我在我的本地主机中添加但没有成功：

```
<modules runAllManagedModulesForAllRequests="true">
   <remove name="ScriptModule" />
   <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
   <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
</modules>
<handlers accessPolicy="Read, Execute, Script">
   <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

站点有 CMS 和 html 页面存储在 DB 中，不存在物理 HTML 页面。但我认为以下应该做重定向工作：

```
<httpErrors>
   <remove statusCode="404" subStatusCode="-1" />
   <error statusCode="404" prefixLanguageFilePath="" path="/_redirect.aspx" responseMode="ExecuteURL" />
</httpErrors> 
```

我还能在这里做什么来运行我的 html 页面？任何帮助都非常感谢！

# php - PHP时间计算产生不可靠的结果

> ID：15261587
> 
> 赞同：-2
> 
> 时间：2013-03-07T01:45:08.797
> 
> 标签：php, time

我有一个脚本，它使用以下逻辑来查看存储的 UNIX 时间戳是否早于 14 小时：

```
if ($data['today'][$city]['max']['imported'] < (time() - 50400)) { 
    // bad stuff
} else {
    // good stuff
} 
```

在六天左右的时间里，它每 10 分钟运行一次（通过 CRON 作业），它在一天中看似随机的时间出现了四次“坏东西”，没有明显的原因。$data['today'][$city]['max']['imported'] 的值来自一个 XML 文件，该文件在每次脚本运行时转换为数组形式。有 8 个城市，并且这个计算是在一个循环中迭代它们（因此是 $city）。XML 存储在文本文件中。

上次发生这种情况时，我已经实现了 $data['today'][$city]['max']['imported'] 值的保存，它绝对有效（即 10 分钟前）。

有什么明显的我错过了吗？

此外，如果有人知道一种更可靠的方法来检查时间戳是否超过 14 小时，我将不胜感激 - 这必须在 PHP 5.1.something 中工作，因此无法访问 DateTime 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:55:55.250

我会用`diff()`PHP 的`DateTime`类替换那个时间戳计算。正如您所拥有的那样，计算不会每年两次给出正确的结果：当夏令时导致一个小时的加法或减法时。

除此之外，您遇到的问题很可能与您`$data['today'][$city]['max']['imported']`的值不正确，或者由于服务器之间的时区差异以及`imported`时间戳来自何处而导致的时间戳差异有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:28:55.357

您的代码完全没有问题。代码应该可以完美运行，没有问题。我看到的唯一弱点`$city`是从您的 xml 文件中检索到的值。你说你的xml中只有8个城市，如果有人来自不同的城市，你有默认值吗？

`$data['today'][$city]['max']['imported']`解决问题的一种方法是在使用 if 语句之前检查您的值

像这样的东西可以帮助，检查你的字符串中是否有 10 个字符：

```
if (strlen($data['today'][$city]['max']['imported'] == 10) { 
//your code here
} 
```

# time - zsh 上的时间格式

> ID：15261588
> 
> 赞同：6
> 
> 时间：2013-03-07T01:45:17.997
> 
> 标签：time, zsh

我正在尝试运行命令

```
time -f "\t%E real,\t%U user,\t%S sys" ls -Fs 
```

在我的 zsh 上，但我得到了

```
zsh: command not found: -f 
```

但是我从 man docs of time 中得到了这行代码。

这是zsh的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T16:53:52.440

`zsh`内置函数（正如你现在所知道的`time`）没有`-f`选择；相反，您设置了 shell 参数的值`TIMEFMT`

```
$ TIMEFMT=$'\t%E real,\t%U user,\t%S sys'
$ time ls -Fs 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T01:53:09.093

尝试`/usr/bin/time -f "\t%E real,\t%U user,\t%S sys" ls -Fs`

[我在这里](https://askubuntu.com/questions/86193/command-not-found-when-trying-to-set-a-format-for-the-time-command)找到了这个答案

# php - 如何根据请求者映射 nginx 以响应？

> ID：15261599
> 
> 赞同：0
> 
> 时间：2013-03-07T01:46:23.867
> 
> 标签：php, nginx

我有一个 nginx 服务器，它应该响应几个包含 php 函数的不同网站：

```
file_get_contents(); 
```

查看日志时，我可以看到请求者的 ip：

```
191.56.110.18 - - [07/Mar/2013:00:46:53 +0000] "GET / HTTP/1.0" 200 151 "-" "-" 
```

但我希望 nginx 映射请求者的实际请求页面。因此，例如，当我的一个域用于`file_get_contents()`从页面获取响应时，`www.mydomaim.com/page20`nginx 会将其映射到包含字符串的文件`"this is page 20"`

我想也许我会在我的每个域中使用以下参数发出请求：

```
$_SERVER['SERVER_NAME'] 
```

所以电话会是这样的：

```
file_get_contents('http://www.nginxserver.com/?domainpage='. $_SERVER['SERVER_NAME']); 
```

但这只会返回域名，我认为这不是最佳选择。我显然是 nginx 的新手，正在寻找执行此地图功能的最佳方法。

我的目标是根据请求页面提供静态内容。我错过了什么吗？解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:44:58.223

*基于请求页面*：

该信息在引荐来源 http 标头中传递，可通过[$http_referer](http://wiki.nginx.org/HttpCoreModule#.24http_HEADER)变量从 nginx 内部访问。

请记住，虽然不能保证会设置或正确设置referer-header（欺骗或阻止referer header既简单又半常见）

# c++ - Visual C++ 控件数据绑定

> ID：15261601
> 
> 赞同：0
> 
> 时间：2013-03-07T01:46:36.190
> 
> 标签：c++, visual-c++, data-binding

Visual C++ Forms 有没有办法将对象中的变量绑定到屏幕上的文本框？比如在 C# WPF 中做的“数据源”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:39:14.477

是的，C++/CLI 是 C++ 的[扩展](http://en.wikipedia.org/wiki/C%2B%2B/CLI)，允许您为 .NET 编写 C++。

[您可以在此处](http://www.codeproject.com/Articles/19354/Quick-C-CLI-Learn-C-CLI-in-less-than-10-minutes)找到介绍性说明。它应该让您开始，然后您应该能够像使用任何其他 .NET 语言一样绑定事物。[这里](https://stackoverflow.com/questions/14002266/subscribe-propertychanged-events-of-window-in-c-cli)的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:02:39.377

是的，这是可能的，这里的样本很少

*   [如何使用 Visual C++ .NET 或 Visual C++ 2005 将对象数组绑定到 Windows 窗体](http://support.microsoft.com/kb/815799)
*   [使用 C++ 托管扩展对 Windows 窗体进行编程](http://msdn.microsoft.com/en-us/library/aa290064%28v=vs.71%29.aspx)
*   [如何：使用 Windows 窗体进行 DDX/DDV 数据绑定](http://technet.microsoft.com/en-us/subscriptions/downloads/1te0bbs8%28v=vs.90%29.aspx)

# jquery - 如何让下一个按钮转到页面上的下一个锚点w j Query

> ID：15261603
> 
> 赞同：0
> 
> 时间：2013-03-07T01:46:43.227
> 
> 标签：jquery, button, anchor

[http://jsfiddle.net/lizyo/geYka/18/](http://jsfiddle.net/lizyo/geYka/18/)

```
 $(document).ready(function () {
      $('.steps-content').css('display', 'none');
      $('#step_00').css('display', 'block');
   });

   $(document).on('click', '#steps-subnav li', function () {
      $('#steps-subnav li').removeClass('highlighted');
      $(this).addClass('highlighted');
   });

   $(document).on('click', '#steps-subnav a', function () {
      var linknum = $(this).attr('class').split('_')[1];
      $('#step_' + linknum).css('display', 'block');
      $('.steps-content').not("#step_" + linknum).css('display', 'none');
   }); 
```

我已经使用 jQuery 设置了一个子导航窗格，以 (1) 突出显示导航链接 (2) 显示相关内容。

现在，我正在努力让 NEXT 按钮自动将我带到下一个主题。

我（显然！）是 JQUERY 的新手。将不胜感激任何提示。或者关于如何改进我现有的 subnav 代码的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:16:15.420

尝试：

```
$(document).on('click', '#next', function () {

    var highlighted = $("#steps-subnav li").filter(".highlighted"),
        next = (highlighted.length > 0) ? highlighted.next() : $("#steps-subnav li:first");

    next.trigger("click");
    next.find("a").trigger("click");

}); 
```

[在这里](http://jsfiddle.net/geYka/19/)提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:41:13.657

试试这个：

```
 $(document).on('click', '.red-button', function () {
        var $current = $('#steps-subnav li.highlighted');
        $('#steps-subnav .highlighted').removeClass('highlighted');

        var $next = $current.is(':last-child')? $('#steps-subnav li:first').next(): $current.next();
        $next.addClass('highlighted');
        $next.children('a').trigger("click");
    }); 
```

# css - 如何使用带有`word-break：break-all`的自动CSS连字符？

> ID：15261605
> 
> 赞同：36
> 
> 时间：2013-03-07T01:46:51.893
> 
> 标签：css, word-break

我正在使用`word-break: break-all;`并想知道如何让浏览器自动插入[连字符](https://developer.mozilla.org/en-US/docs/CSS/hyphens)，如[MDN 示例](https://developer.mozilla.org/samples/cssref/hyphens.html)中所示。

```
div {
  width: 80px;
  height: 80px;
  display: block;
  overflow: hidden;
  border: 1px solid red;
  word-break: break-all;
  hyphens: auto;
  -ms-hyphens: auto;
  -moz-hyphens: auto;
}
```

```
<div>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</div>
```

这样文本将如下所示：

```
aaaaaaaa-
aaaaaaaa-
aaaaaaaa-
aaaaaaaa 
```

我也创建了一个[JSFiddle](https://jsfiddle.net/LJYj3/2/)。

这需要在 IE9/IE10 中工作，但如果它也能在 Firefox 和 Chrome 中工作就更好了。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-07T04:47:18.943

`word-break`属性和连字符是两个完全不同的东西。第一个，最初主要是为东亚语言设计的，对像英语这样的语言造成了不好的影响：它在某些点上任意截断单词，而没有指出单词已经断了。

所以你应该决定你是否有一个表达式，浏览器可以在任何时候插入换行符，或者你是否想要连字符。

对于连字符，CSS 代码本身是可以的，尽管许多人会建议将标准属性设置放在`hyphens: auto`最后，在前缀属性之后。但它要求在 HTML 标记中声明文本的语言，例如使用`<div lang=en>`. 此外，浏览器支持仍然有限：IE 9 不支持这种连字符，而 IE 10 中的支持涵盖了相对较少的语言集（当然包括英语）。

对于 IE 9 上的自动断字，您需要使用服务器端编程断字，或者更简单的客户端断字，以及诸如 Hyphenator.js 之类的[工具](http://code.google.com/p/hyphenator/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-07T02:01:47.657

该`-ms-hyphens`属性仅适用于 IE10+。在 IE9 或更低版本中是不可能的。

请参阅您提供的参考链接底部的浏览器兼容性图表。

它还不能在 Chrome 中工作：[WebKit Hyphenation](https://stackoverflow.com/questions/5356752/webkit-hyphenation)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-07T02:05:30.323

如果浏览器支持 & 语言包括连字符字典，则插入连字符。但是你的

`aaaaaaaaaaaaaaaaaa`

不在字典里。

[因此，您必须像在https://jsfiddle.net/LJYj3/5/](https://jsfiddle.net/LJYj3/5/)`&shy;`中那样插入您满意的软连字符

这里有更多值得思考的地方：[https ://stackoverflow.com/a/856322/1696030](https://stackoverflow.com/a/856322/1696030)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-09T17:47:48.277

我找不到任何 css 解决方案，所以用 js 修复它。

```
const addWordBreaks = (str, maxLength = 10) => {
    const words = str.split(" ");
    const newWords = [];
    words.forEach(function(word) {
      if (word.length > maxLength) {
        const firstWord = word.substr(0,maxLength);
        const endWord = word.substr(maxLength, word.length-1);
        newWords.push(firstWord +"- \n");
        newWords.push(endWord)
      } else {
        newWords.push(word)
      }
    });
     return newWords.join(" ");
  } 
```

# benchmarking - 使用 wrk 发布请求？

> ID：15261612
> 
> 赞同：34
> 
> 时间：2013-03-07T01:47:26.453
> 
> 标签：benchmarking, wrk

我开始尝试[wrk](https://github.com/wg/wrk)。它在服务器上使用起来非常简单，但我不知道如何执行其他类型的请求，例如 POST。事实上，我什至不知道这个工具是否允许它。文档非常少。

谢谢

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-11-12T20:57:10.317

现在这是可能的。这是一个示例[https://github.com/wg/wrk/blob/master/scripts/post.lua](https://github.com/wg/wrk/blob/master/scripts/post.lua)。

```
wrk.method = "POST"
wrk.body   = "foo=bar&baz=quux"
wrk.headers["Content-Type"] = "application/x-www-form-urlencoded" 
```

将其保存在脚本中并使用标志`*.lua`将其传递到您的命令行测试中。`-s`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2019-01-31T09:36:25.570

对于那些寻找内容类型“应用程序/json”示例的人：

```
wrk.method = "POST"
wrk.body = '{"firstKey": "somedata", "secondKey": "somedata"}'
wrk.headers["Content-Type"] = "application/json" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-05-24T20:06:13.923

我建议使用`wrk2`而不是，`wrk`因为 wrk2 为并发请求提供了更好的支持。当`content-type`标题是`application/json`然后请转义特殊字符，如`\n`with`\\n`和所有其他特殊字符。不这样做会向上游 API 发送一个无效的 json，这会浪费你调试的时间。

创建一个带有扩展名的文件`lua`并将以下内容粘贴到其中。保存它并将其与`-s`标志一起传递给 wrk2 命令。

```
wrk.method = "POST"
wrk.body = "{\"firstKey\": 'somedata', \"secondKey\": 'somedata'}"
wrk.headers["Content-Type"] = "application/json" 
```

您也可以添加多个标题作为

```
wrk.headers["Header1"] = "Header1_Val"
wrk.headers["Header2"] = "Header2_Val"
wrk.headers["Header3"] = "Header3_Val"
wrk.headers["Header4"] = "Header4_Val" 
```

```
wrk2 -t500 -c1000 -d160s -R10000 -s ~/Documents/luaTestScript.lua http://localhost:8080/test_endpoint 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-03-30T08:34:02.577

`post_binary.lua`这是一个用于发布二进制文件的示例 lua 脚本： `"Content-Type:application/octet-stream"`.

```
wrk.method = "POST"
wrk.headers["Content-Type"] = "application/octet-stream"

file = io.open("dog.jpg", "rb")
wrk.body = file:read("*a") 
```

然后尝试：`wrk "your_url" -s post_binary.lua --latency -t 1 -c 1 -d 30s -R 1`

# c# - .NET 正则表达式整个字符串匹配

> ID：15261613
> 
> 赞同：3
> 
> 时间：2013-03-07T01:47:27.877
> 
> 标签：c#, .net, regex, sqlclr

如果我们采用以下模式： 70000@.* 和 970000@.* 字符串 970000@ILoveFishSticksAndTarTarSauce.com:5060 将返回匹配 70000@.*

我理解它为什么匹配，但我需要修改正则表达式以只进行完整的字符串匹配。

有任何想法吗？

谢谢！

我正在使用 .Net 3.5 库

这是代码：

```
[Microsoft.SqlServer.Server.SqlProcedure]
    public static void RouteRegex(string phoneNumber, out string value)
    {
        if (string.IsNullOrEmpty(phoneNumber))
        {
            value = string.Empty;
            return;
        }
        const string strCommand =
            "Select RouteID,sequence,Pattern From SIPProxyConfiguration.dbo.Routes order by routeid, sequence asc";
        using (var connection = new SqlConnection("context connection=true"))
        {
            try
            {
                connection.Open();
                using (var command =new SqlCommand(strCommand,connection))
                {
                    using (var reader = command.ExecuteReader())
                    {
                        while (reader.Read())
                        {
                            var regEx = reader[2] as string;
                            if (string.IsNullOrEmpty(regEx)) continue;
                            var routeId = reader[0];
                            var sequence = reader[1];
                            var match = Regex.Match(phoneNumber, regEx);
                            Regex.IsMatch()
                            if (!match.Success) continue;
                            value = routeId.ToString();
                            return;
                        }
                    }

                }
                value = "No Match!";
            }
            catch (Exception ex)
            {
                value = ex.Message;
                return;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T01:52:19.933

尝试使用

```
^$ 
```

正则表达式中的运算符强制开始和结束匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T01:53:35.087

以 开始模式`^`并以 结束`$`。它们分别匹配行或字符串的开头和行或字符串的结尾。

```
"^70000@.*$" matches "70000@fishsticksforlife.com" but not "970000@tatatotartar.com"
"^970000@.*$" matches "970000@tatatotartar.com" 
```

# asp.net-mvc - 为什么我的剃刀助手没有在 Using 语句中执行？

> ID：15261614
> 
> 赞同：3
> 
> 时间：2013-03-07T01:47:33.520
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor

这种观点：

```
@Using Html.BeginForm
    SimpleMessage
End Using

@Helper SimpleMessage()
    @<p>This is a simple message</p>
End Helper 
```

结果是

```
<form action="/Controller/Action" method="post"></form> 
```

但

```
@* Now let's not call it from within a using *@
@SimpleMessage

@Helper SimpleMessage()
    @<p>This is a simple message</p>
End Helper 
```

结果是

```
<p>This is a simple message</p> 
```

为什么我的助手在我的内部不工作`Using Html.BeginForm`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T02:20:01.653

您需要`@`在辅助方法前面使用符号。

```
@Using Html.BeginForm
    @SimpleMessage
End Using 
```

# objective-c - UIImageView 的旋转动画会旋转其他东西

> ID：15261615
> 
> 赞同：-1
> 
> 时间：2013-03-07T01:47:34.467
> 
> 标签：objective-c, xcode, uiimageview

到目前为止我的代码是

```
rotateButton = [UIButton new];
    rotateButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [rotateButton setFrame:CGRectMake(334, 80, 100, 20)];
    [rotateButton addTarget:self action:@selector(rotateImageView:Degrees:InTimePeriod:) forControlEvents:UIControlEventTouchUpInside];
    [rotateButton setTitle:@"Rotate" forState:UIControlStateNormal];
    [self.view addSubview:rotateButton];

-(void)rotateImageView
{
    [self rotateImageView:imageView Degrees:90 InTimePeriod:1.5];
}

-(void)rotateImageView:(UIImageView*)imageView Degrees:(NSInteger)degrees InTimePeriod:(float)time
{
    CABasicAnimation *rotate;
    rotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    rotate.fromValue = [NSNumber numberWithFloat:0];
    rotate.toValue = [NSNumber numberWithFloat:DEGREES_TO_RADIANS(degrees)];
    rotate.duration = time;
    rotate.repeatCount = 1;
    [imageView.layer addAnimation:rotate forKey:@"Rotate"];
} 
```

但是，我用来开始旋转的按钮是我按下按钮后旋转的对象，而不是我希望它旋转的 imageView。如何使 imageView 旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:56:01.520

改变

```
 [rotateButton addTarget:self action:@selector(rotateImageView:Degrees:InTimePeriod:) forControlEvents:UIControlEventTouchUpInside]; 
```

至

```
 [rotateButton addTarget:self action:@selector(rotateImageView) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:09:20.460

```
 [rotateButton addTarget:self action:@selector(rotateImageView:Degrees:InTimePeriod:) forControlEvents:UIControlEventTouchUpInside]; 
```

您将@selector(rotateImageView:Degrees:InTimePeriod:) 设置为按钮的操作。按钮将自己作为@selector(rotateImageView:Degrees:InTimePeriod:) 的第一个参数默认发送给他，事实上，当函数是运行时，*imageView 指向按钮，这就是按钮旋转但 imageView.Do 正如 aeubanks 所说的原因。

# jquery - 在jquery mobile中提交表单后弹出对话框不起作用

> ID：15261618
> 
> 赞同：0
> 
> 时间：2013-03-07T01:47:51.413
> 
> 标签：jquery, asp.net, ajax, forms, jquery-mobile

我正在做一个简单的表单提交。在表单提交上我有表单 action="Facility.aspx".on Facility.aspx 我正在使用对话框弹出窗口。表单提交后这些对话框不起作用但它们之前工作提交表格。

**第一种形式的 HTML：**

```
<html> 
    <head> 
    <title>Facility</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
<body> 

<div data-role="page" id="arealistpage">

  <div data-role="header" data-theme="b">
      <a href="Facility.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l' rel="external">Back</a>
   </div><!-- /header -->

    <div data-role="content">  
  <form id="form1" method="post">
    <div id="AreaNoDiv" data-role="fieldcontain" class="field">
        <label for="Facility">Facility*</label>     
        <input id="Facility" name="shipNo_r" type="text" required/>
    </div>

     <div id="desDiv" data-role="fieldcontain" class="field">

        <label for="des" id="Label1" name="fnameLabel">Description*</label>     
        <input id="des" name="fname_r" type="text" required/>

    </div>
     <div id="submitDiv" data-role="fieldcontain" style="width: 30%">    
     <button class="btnLogin" data-theme="b" type="submit" id='mysubmit'>submit</button>
    </div>

    </form>

    </div><!-- /content -->

    <div data-role="footer" data-theme="b" data-position="fixed">

            <div data-role="navbar">
            <ul>

               <li><a href="" data-role="tab" data-icon="arrow-u" class="returnTopAction">Top</a></li>
            </ul>
        </div>
    </div>
</div><!-- /page -->
<script src="Submitscript.js" type="text/javascript"></script>
</body>
</html> 
```

**脚本：**

```
$('#arealistpage').live('pageshow',function(event){
var serviceURL = 'service1.asmx/SubmitList';
    $('#mysubmit').bind('click', function(e){
            $.ajax({
            type: "POST",
            url: serviceURL,
            data: '{"name":"' + name + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: successFunc,
            error: errorFunc
        });
    });

    function successFunc(data, status) {

        // parse it as object
       // var outStr = JSON.parse(data.d);
       // alert(outStr);
    }

    function errorFunc() {
        alert('error');
    }
}); 
```

**我的第二个表单提交后对话框不起作用的地方。**

```
<html> 
    <head> 
    <title>Facility</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
 <script type="text/javascript">
     $('#arealistpage').live('pageshow', function (event) {
         $('div[id="primaryList"] ul[data-role="listview"] a').bind("click", function () {
             var facilityid = $(this).data("facilityid");
             sessionStorage.facilityid = facilityid;
            });
     });
</script>

</head> 
<body> 

<div data-role="page" id="arealistpage">

  <div data-role="header" data-theme="b">
        <h1><a name="top"></a>Facility</h1>
       <a href="../MenuePages/Dictionaries.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l' rel="external">Back</a>
   <a href="AddFacility.aspx" data-role="button" data-icon="plus" data-theme="d" style="float:left;"  rel="external" data-transition="slide" data-ajax="false">Add</a>
    </div><!-- /header -->

    <div data-role="content">  
     <div id="primaryList">
    <ul data-role="listview" data-inset="true" data-theme="c"  data-filter="true" id="areaList" data-split-icon="gear" data-split-theme="d">

    </ul>

        </div>
    </div><!-- /content -->

    <div data-role="footer" data-theme="b" data-position="fixed">

            <div data-role="navbar">
            <ul>

               <li><a href="" data-role="tab" data-icon="arrow-u" class="returnTopAction">Top</a></li>
            </ul>
        </div>
    </div>
   <script src="FacilityScript.js" type="text/javascript"></script>

</div><!-- /page -->
  <div data-role="page" id="dialog">
  <div data-role="header" data-theme="b">
    <h1>Options</h1>
  </div>   
 <ul data-role="listview" data-inset="false"
                data-theme="c">
               <li data-icon="false"><a href="UpdateFacility.aspx"  data-ajax="false">Edit</a></li>

              <li data-icon="false"><a href="#divMsg" data-rel="dialog" data-transition="pop">Delete</a></li>

            </ul>   
</div> 
<div data-role="page" id="divMsg">
  <div data-role="header" data-theme="b">
    <h1>Confirmation</h1>
  </div>   

  <div data-role="content">  
  <a href="Facility.aspx" onclick="DeleteFacility(); return true" data-role="button"  data-ajax="false">Delete Record?</a>
  </div>
   <script src="FacilityScript.js" type="text/javascript"></script>
</div>
</body>
</html> 
```

**设施.js**

```
$('#arealistpage').live('pageshow', function (event) {
    $.mobile.showPageLoadingMsg();
    var serviceURL = '../ServiceScripts/FacilityWebService.asmx/GetFacilityList';

    $.ajax({
        type: "POST",
        url: serviceURL,
        data: param = "",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: successFunc,
        error: errorFunc
    });

    function successFunc(data, status) {

        // parse it as object
        var lankanListArray = JSON.parse(data.d);

        // creating html string
        var listString = ""; //'<ul data-role="listview" id="areaList">';
        var htmlList = "";

        // running a loop
        items = [];
        $.each(lankanListArray, function (index, value) {
            items.push('<li><a href="#dialog" data-rel="dialog" data-transition="pop" data-facilityid=' + this.FacilityID + '><p>Facility: ' + this.FacilityN + '  |&nbsp;&nbsp;Description: ' + this.FacilityDescription + '</p></a><a class="deleteMe"></a></li>');

        });

        $('#areaList').empty();
        $('#areaList').append(items.join(''));
        $('#areaList').listview('refresh');
        $.mobile.hidePageLoadingMsg();

    }

    function errorFunc() {
        alert('error');
    }
});

$('#arealistpage').live('pageshow', function (event) {

    $.mobile.showPageLoadingMsg();
    var serviceURL = '../ServiceScripts/FacilityWebService.asmx/InsertFacility';

    $('#btnAdd').bind('click', function (e) {
        var Facility = $("#Facility").val();
        var Description = $("#des").val();
        // e.preventDefault();
        $.ajax({
            type: "POST",
            url: serviceURL,
            data: '{"Facility":"' + Facility + '","FacilityDescription":"' + Description + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: successFunc,
            error: errorFunc
        });
    });
    function successFunc(data, status) {
        var lankanListArray = JSON.parse(data.d);

    }

    function errorFunc() {
        alert("Form Submit Error");

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:08:00.110

```
 <a href="AddFacility.aspx" data-role="button" data-icon="plus" data-theme="d" style="float:left;"  rel="external" data-transition="slide" data-ajax="false">Add</a> 
```

我通过删除 rel="external" 和 data-ajax="false" 标签解决了这个问题。在我的网络表单的上述代码行中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:18:24.560

作为 jQuery Mobile 中的一条经验法则，您需要为每个 yoru 页面设置唯一的 ID。我看到您的两个页面都使用了相同的 ID。更改你的页面的ID，并更改JS文件中的相关ID。

它应该可以正常工作。在我看来一切都很好。检查并更新我。

**更新**

您可以使用导航到新页面`$.mobile.changePage('yourpage.html');`

所以你应该在表单提交后在你的成功函数中调用上述方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:30:19.637

我有一个类似的问题。我在特定页面的 html 页面中的 data-role="page" 元素之外添加了一个脚本。因此，当页面更改时，我的弹出窗口不起作用，因为 JQM 仅呈现 data-role="page" 容器内的内容（或内部的 body 标记是页面在 html 文档中不可用）。因此，我在应用程序的起始页（即 index.html）的 pageinit 中添加了我的代码。我就是这样做的

```
$( document ).delegate("#addseat-page", "pageinit", function() {
  $("#vipPopup").popup(); //vip popup
  $("#popup-reservedseat").popup(); // reserved seat popup
}); 
```

它对我有用。

参考：http: [//jquerymobile.com/demos/1.2.1/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.2.1/docs/pages/page-scripting.html)

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-15T02:12:36.990

我有一个类似的问题。问题是关于弹出窗口的 ID。我的方法是生成一个随机后缀并将 de 字符串 ID 与此后缀连接。

# r - `sample()` 使用相同的 `set.seed()` 给出不同的值

> ID：15261619
> 
> 赞同：14
> 
> 时间：2013-03-07T01:47:59.853
> 
> 标签：r, sample, ggplot2, seeding

我正在创建一些随机样本并绘制它们并注意到一个奇怪的行为。加载 ggplot2 后采样值不同：

```
set.seed(111)
library(ggplot2)
sample(1:10, 10)
# [1]  8  4  5  3  7  1  6  2 10  9

set.seed(111)
sample(1:10, 10)
#  [1]  6  7  3  4  8 10  1  2  9  5 
```

我可以很容易地避免这种行为，但是 ggplot2 有什么理由改变种子值吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T01:49:34.393

我想我在其中一个 R 聊天室中看到了一些关于此的讨论：`ggplot2`调用随机数生成器以确定它是否/要提供哪个提示。

特别是，这是`ggplot2:::.onAttach`：

```
function (...) 
{
    if (!interactive() || stats::runif(1) > 0.1) 
        return()
    tips <- c("Need help? Try the ggplot2 mailing list: http://groups.google.com/group/ggplot2.", 
        paste("Find out what's changed in ggplot2 with\n", "news(Version == \"", 
            utils::packageVersion("ggplot2"), "\", package = \"ggplot2\")", 
            sep = ""), "Use suppressPackageStartupMessages to eliminate package startup messages.")
    tip <- sample(tips, 1)
    packageStartupMessage(tip)
} 
```

有趣的是，其中一个随机生成的提示会告诉您如何关闭提示...

# parsing - 我正在尝试使用 Powershell 解析非标准的 rss 提要

> ID：15261620
> 
> 赞同：2
> 
> 时间：2013-03-07T01:48:11.757
> 
> 标签：parsing, powershell, rss, pinterest

我的 Pinterest 提要将 RSS 标题截断为 20 个字符，我需要解析出“img src”和描述末尾的较长文本。

我非常简单的代码有效，但我不知道如何让我的新标题说“为什么你必须有一个#Elevator #Pitch - #marketing”

```
$feed = [xml](New-Object System.Net.WebClient).DownloadString('http://pinterest.com/bigoals365/feed.rss')

$feed.rss.channel.Item  | select title, link, description | Out-GridView 
```

我也尝试过 Invoke-WebRequest，它适用于基本检索，但描述的解析让我很难过。

我的提要看起来像这样（RSS 的一行）：

```
<item><title>Why You’ve Got to Ha</title><link>http://pinterest.com/pin/329888741425045427/</link> <description> &lt;p&gt;&lt;a href="http://pinterest.com/pin/329888741425045427/"&gt;&lt; img src="http://media-cache-lt0.pinterest.com/192x/bd/5e/7c/bd5e7cd628c21313d835a4e5c89d28ee.jpg"&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt; Why You’ve Got to Have an #Elevator #Pitch - #marketing&lt;/p&gt; </description> <pubDate>Wed, 06 Mar 2013 21:59:55 +0000</pubDate><guid>http://pinterest.com/pin/329888741425045427/ </guid></item> 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:07:47.227

也许这样？

```
$feed.rss.channel.item | %{ 
   if ($_.description -match '.*<img src="([^"]+)".*<p>(.*)</p>') { 
      $_.title = $matches[2];
      $_.link = $matches[1] 
   } 
   $_ 
} | select title, link, description | Out-GridView 
```

希望这可以帮助

/弗雷德里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:05:16.307

我想这就是你要找的

```
$feed.rss.channel.Item | 
    select -Property link, description, @{
        n = 'title'
        e = {[regex]::Matches($_.description, '<p>(.+?)</p>')[1].Groups[1].Value}
     } | ogv 
```

这使用带有 n（名称）和 e（表达式）键的哈希表创建自定义属性。

# objective-c - FBLoginView 如何检查用户是否接受了发布权限？

> ID：15261623
> 
> 赞同：0
> 
> 时间：2013-03-07T01:48:23.957
> 
> 标签：objective-c, facebook, ipad

使用 FBLoginView 时如何检查用户是否接受了发布权限。我设法通过询问发布权限来重新授权用户。我如何知道用户在对话框中选择了确定或在 reauthorizedWithPublishPermission 函数调用的处理程序中选择了不允许。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:25:15.223

假设您已经实现了 FBRequestDelegate、FBSessionDelegate，您应该根据用户的响应方式获得其中之一的回调：

FBRequestDelegate：

```
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error 
```

FBSessionDelegate：

```
- (void)fbDidNotLogin:(BOOL)cancelled 
```

这些位于[http://developers.facebook.com/docs/reference/iossdk/的 Facebook API](http://developers.facebook.com/docs/reference/iossdk/)

# unit-testing - 如何在 Windows Phone 中测试异步方法

> ID：15261624
> 
> 赞同：0
> 
> 时间：2013-03-07T01:48:24.737
> 
> 标签：unit-testing, windows-phone-7, asynchronous, restsharp

我需要在 Windows Phone 中编写一个单元测试来测试我的数据是否被反序列化为正确的类型。这是我到目前为止所做的。

```
[TestMethod]
    [Asynchronous]
    public void SimpleTest()
    {
        await pots = help.potholes(); 
```

我收到一条错误消息，说“罐子”不可等待。Pots 是一个列表，它应该接受来自对我的 web 服务进行异步调用的 potholes 函数的结果。

这是使用 Restsharp 进行调用的方法。

```
public void GetAllPotholes(Action<IRestResponse<List<Pothole>>> callback)
    {

        var request = new RestRequest(Configuration.GET_POTHOLE_ALL,Method.GET);
        request.AddHeader("Accept", "application/json");
        _client.ExecuteAsync(request, callback);

    } 
```

我怎样才能让花盆可以等待？在 Windows Phone 中测试休息服务的正确方法是什么？

我正在使用 Windows Phone 工具包测试框架

这是我正在关注的教程。 [异步测试](http://wp.qmatteoq.com/unit-testing-in-windows-phone-8-asynchronous-operations-and-mocking/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:42:55.823

“异步”一词现在在 .net 中被重载。

您引用的文章指的是`awaitable`方法，而不是通过回调异步的方法。

这是一个关于如何测试它的粗略想法。

```
[TestMethod]        
[Asynchronous]
public void SimpleTest()
{
    // set up your system under test as appropriate - this is just a guess
    var help = new HelpObject();

    help.GetAllPotholes(
        response =>
        {
            // Do your asserts here. e.g.
            Assert.IsTrue(response.Count == 1);

            // Finally call this to tell the test framework that the test is now complete
            EnqueueTestComplete();
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:33:28.633

正如 matt 所表达的，术语“异步”现在在多个上下文中使用，在 Windows Phone 上的测试方法的情况下，正如您在代码中看到的那样，它不是关键字，而是一个属性，其目标是释放工作线程到允许其他进程运行，并让您的测试方法等待 UI 或服务请求中可能发生的任何更改。

你可以做这样的事情来让你的测试等待。

```
[TestClass]
public class ModuleTests : WorkItemTest
{
    [TestMethod, Asynchronous]
    public void SimpleTest()
    {
        var pots;
        EnqueueDelay(TimeSpan.FromSeconds(.2)); // To pause the test execution for a moment.
        EnqueueCallback(() => pots = help.potholes());
        // Enqueue other functionality and your Assert logic
        EnqueueTestComplete();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:58:09.213

您正在以错误的方式使用 async .. await

试试这个

```
public async void SimpleTest()
{
    pots = await help.potholes();
    ....
} 
```

# python - 我究竟做错了什么？随机数猜谜游戏

> ID：15261629
> 
> 赞同：2
> 
> 时间：2013-03-07T01:48:34.423
> 
> 标签：python, python-3.x

首先，我感谢您提供的任何答案。

无论如何，我是 Python 和一般编程的初学者。我尝试创建自己的随机数猜测游戏，计算机在 1-15 之间选择一个随机数，yada yada。

我的问题是，当我试图告诉用户他们的猜测是太低还是太高时，程序要么终止，而不会通知用户它们是否正确。或者它只是不断循环。

> 太低了，请再猜：14
> 
> 正确的！你猜到我的号码了！
> 
> 太低了，请再猜：12
> 
> 太低了，请再猜一猜：1
> 
> 太低了，请再猜一猜：

这是我这个程序的全部代码：

```
import random
from time import sleep

number = random.randint(1,15)
play = input("Hello! Would you like to play (Y/N) ")

if play in('y', 'Y'):
    sleep(.75)

    print("I've chosen a number between 1 and 15.") 
    sleep(.5)

    guess = int(input("What is my number? "))

    while guess >= number:
        guess = int(input("Too High, please guess again: "))
        if guess == number:
            print("Correct! You've guessed my number!")

    while guess <= number:
        guess = int(input("Too Low, please guess again: "))

        if guess == number:
            print("Correct! You've guessed my number!")

else:
    exit 
```

再次感谢您的任何回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:51:46.983

如果我猜低，它会让我进入“猜数字以下”循环。如果我猜到了这个数字，循环就会结束并将我排除在程序之外。

你需要做的是有一个whileguess！= number的组合循环，并检查循环内的上下和相等。，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T01:53:46.983

你的循环逻辑有点扭曲。

```
while guess >= number:
    guess = int(input("Too High, please guess again: "))
    if guess == number:
        print("Correct! You've guessed my number!")

while guess <= number:
    guess = int(input("Too Low, please guess again: "))

    if guess == number:
        print("Correct! You've guessed my number!") 
```

1.  当猜测太高时你循环。一个低猜测打断了这一点。
2.  您在猜测太低时循环。一个高猜测打断了这一点。

因此，如果我们先进行低位猜测，然后进行高位猜测，但我们仍然不正确，我们已经逃脱了这`while`对配对并且不能再试一次。

相反，试试这个单循环结构：

```
while guess != number: 
```

而在其中，`if`对于`<=`、`==`和`>=`。干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T01:54:18.187

按如下方式更改您的时间：

```
while guess != number:
    if (guess > number):
        print("Too High!")
    else:
        print("Too Low!")
    guess = int(input("Please guess again: "))

print("Correct! You guessed my number!") 
```

# android - 如果私钥被盗，我使用 3rd 方 API 的移动应用程序会做什么？

> ID：15261631
> 
> 赞同：2
> 
> 时间：2013-03-07T01:48:55.903
> 
> 标签：android, security, rest, oauth, oauth-2.0

我的移动应用程序使用 3rd 方 API 来访问一些资源。它有一个公钥和一个私钥。对于每个请求，我使用私钥对一些特定数据进行一些哈希计算，并将结果发送到服务器。服务器将使用我的私钥验证结果，以确保请求有效。私钥不会通过网络发送。

但是，私钥应该保存在客户端中。我认为其他人通过一些逆向工程找到它并不是一件难事。使用私钥是否更安全？

如果密钥被盗，我可以更改私钥。但是原来的应用程序不能再使用了。这是解决这个问题的更好方法吗？

（我设置了自己的代理服务器可以解决部分问题。有没有更好的方法？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T01:51:05.403

我建议将第 3 方 API 访问卸载到您控制的 REST 服务。从那时起，您获得的私有 API 访问密钥被安全地锁定在您拥有的机器上，并且不太可能被泄露。

然后，您只需更新您的移动应用程序以通过明确定义的端口和地址联系您的服务器（可选地进行某种您想要处理流量的验证），然后根据需要转发该请求。这还允许您非常精细地控制您希望向最终用户公开的 3rd 方 API 的哪些特定部分。

分发用于 3rd 方 API 访问的私钥可能是一个非常糟糕的主意（并且可能违反您的服务条款），因为恶意客户端可能会通过胡乱乱搞服务而导致很多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:35:21.140

我对这件事不是很熟悉，但你不应该使用公钥在客户端编码你的东西而不是使用私钥吗？

这就是拥有公钥/私钥组合的意义：每个人都可以免费使用公钥来编码某些东西，但是一旦编码，消息只能使用私钥解码；它安全地存储在受保护良好的服务器上。

# javascript - var 元素上的 JavaScript 警告

> ID：15261635
> 
> 赞同：-4
> 
> 时间：2013-03-07T01:49:15.880
> 
> 标签：javascript, string, exception, warnings, identifier

已定义：

```
var ru_cryptopro_npcades_10_native_bridge = {

    callbacksCount : 1,
    callbacks : {},

    resultForCallback : function resultForCallback(callbackId, resultArray) {

        var callback = ru_cryptopro_npcades_10_native_bridge.callbacks[callbackId];

        if (!callback) return;

        callback.apply(null, resultArray);

    },

    call : function call(functionName, args, callback) {

        var hasCallback = callback && typeof callback == "function";
        var callbackId = hasCallback ? ru_cryptopro_npcades_10_native_bridge.callbacksCount++ : 0;

        if (hasCallback) ru_cryptopro_npcades_10_native_bridge.callbacks[callbackId] = callback;

        var iframe = document.createElement("IFRAME");
        var arrObjs = new Array("_CPNP_handle");

        try {

            iframe.setAttribute("src", "cpnp-js-call:" + functionName + ":" + callbackId+ ":" + encodeURIComponent(JSON.stringify(args, arrObjs)));

        }
        catch(e) {

            alert(e);

        }

        document.documentElement.appendChild(iframe);
        iframe.parentNode.removeChild(iframe);
        iframe = null;

    },

}; 
```

收到这样的警告： ***警告 1 预期标识符或字符串 C:\Users\Administrator\documents\visual studio 2010\Projects\WebAppSelf3\WebAppSelf3\js\CadesLoad.js 453 1 WebAppSelf3***

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:56:07.807

该错误是指`,`大块后的逗号`call: function .....{}`。它是畸形的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T01:56:41.973

Chrome 解析得很好，但我有一种预感，无论你有什么环境抛出这个错误，都不喜欢你的对象文字中的尾随逗号。

```
 },

}; 
```

这可能需要：

```
 }

}; 
```

这又是奇怪的，因为这似乎至少在某些浏览器中有效：http: [//jsfiddle.net/Aa6yc/1/](http://jsfiddle.net/Aa6yc/1/)

虽然它肯定不是好的形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:56:23.453

此类错误的原因通常可能是对象或数组定义中的逗号错误：

```
var obj = {
   id: 23,
   name: "test",  <--
} 
```

参考：[Javascript 错误的可能情况：“预期的标识符、字符串或数字”](https://stackoverflow.com/questions/2149762/possible-cases-for-javascript-error-expected-identifier-string-or-number)

# c# - 使用对象初始化构造的嵌套事务范围会导致错误

> ID：15261638
> 
> 赞同：5
> 
> 时间：2013-03-07T01:49:41.607
> 
> 标签：c#, .net, transactionscope, object-initialization

在我的 C# 代码中，我使用嵌套事务范围。我有一个同样创建 TransactionScope 对象的实用程序类。外部作用域和内部作用域的构造方式完全相同。

如果我像下面的第一个示例那样构造 TransactionScope 对象，则嵌套的事务范围可以很好地协同工作：

```
public static TransactionScope CreateTransactionScope()
{
   var transactionOptions = new TransactionOptions();
   transactionOptions.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;
   transactionOptions.Timeout = TransactionManager.MaximumTimeout;
   return new TransactionScope(TransactionScopeOption.Required, transactionOptions);
} 
```

但是，如果我像这样构造 TransactionScope 对象，则会出现异常：

```
public static TransactionScope CreateTransactionScope()
{
   var transactionOptions = new TransactionOptions
   {
      IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted,
      Timeout = TransactionManager.MaximumTimeout
   };
   return new TransactionScope(TransactionScopeOption.Required, transactionOptions);
} 
```

错误内容为：“*为 TransactionScope 指定的事务具有与为范围请求的值不同的 IsolationLevel。参数名称：transactionOptions.IsolationLevel* ”。

谁能向我解释为什么使用对象初始化会导致这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-19T10:48:27.660

当外部事务隔离级别与您要分配给事务范围的不同时，会发生此错误。这意味着调用您的方法并尝试分配您想要的隔离，事务管理器检测到存在具有不同隔离级别的现有事务，并抛出异常。

```
var transactionOptions = new TransactionOptions
{
   IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted,
   Timeout = TransactionManager.MaximumTimeout
};

return new TransactionScope(TransactionScopeOption.RequiredNew,TransactionOptions); 
```

RequireNew 强制创建一个新的内部事务。我建议进行这种动态检查，这是当前的隔离，类似于以下内容：

```
if (Transaction.Current != null && Transaction.Current.IsolationLevel != myIsolationLevel)
{
   scopeOption = TransactionScopeOption.RequiresNew;
} 
```

编辑：正如评论中所建议的，值得一提的是，RequiresNew 确实创建了一个新事务，并且从本质上讲，这与外部事务是隔离的。我发现了一个非常好的阅读材料，它很好地解释了事务在这里的工作原理：[https ://www.codeproject.com/articles/690136/all-about-transactionscope](https://www.codeproject.com/articles/690136/all-about-transactionscope)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T07:24:12.837

您是否绝对确定只有换出上述方法会导致异常？它们在功能上应该是 100% 等效的。

只需干运行这两种变体就可以了：

```
using (var aa1 = CreateTransactionScopeGood())
    using (var aa2 = CreateTransactionScopeGood())
        Console.WriteLine("this will be printed");

using (var aa1 = CreateTransactionScopeBad())
    using (var aa2 = CreateTransactionScopeBad())
        Console.WriteLine("this will be printed"); 
```

你能提供一种重现它的方法吗？

但是，只有在同一事务中混合不同的 s 时，我才能重现您的异常`IsolationScope`，这确实会导致异常：

```
using (new TransactionScope(TransactionScopeOption.Required, new
        TransactionOptions { IsolationLevel = IsolationLevel.Chaos }))
    using (new TransactionScope(TransactionScopeOption.Required, new
            TransactionOptions { IsolationLevel = IsolationLevel.Serializable }))
        Console.WriteLine("this will not be printed"); 
```

# rest - REST - Jersey - 提供跨站点访问

> ID：15261640
> 
> 赞同：0
> 
> 时间：2013-03-07T01:50:11.880
> 
> 标签：rest, jersey, jsonp

我想我正在尝试对我正在处理的 REST API 做出一些设计选择。

- 提供跨站点访问是个好主意吗？换句话说，我是否应该允许[JSONP](http://en.wikipedia.org/wiki/JSONP)响应。我倾向于提供 JSOP 响应，因为我猜测如果我不允许 JSONP，那么在浏览器中运行的 javascript 客户端将无法访问我的 API。如果您有任何支持或反对这个想法的经验，我将不胜感激。

- 使用 Jersey，我可以通过使用 a 注释我的方法`@Produces("application/javascript")`并返回`JSONWithPadding`. 像这样：

```
 @GET
    @Produces("application/javascript")
    @Path("{film_id}")
    public JSONWithPadding crossSitefilmWithID(
                @DefaultValue(NO_ID) @PathParam("film_id") final String filmId,
                @DefaultValue(CALLBACK) @QueryParam("callback") String callback) {
    ....
        return new JSONWithPadding(films.get(id), callback);
    } 
```

上面的示例有效，但我不知道如何返回 a `javax.ws.rs.core.Response`（当我实例化 a 时，Jersey 抛出异常`JSONWithPadding(response, callback)`。

所以我猜如果我需要向客户端返回元信息，我需要设计自己的响应类版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:25:19.457

JSONP 有很多细节。看看[JSONP 到底是什么？](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about/2067584#2067584)了解更多信息。在这一点上，如果您想从其他域提供对您的 API 的 JavaScript 访问，那么这是可行的方法。如果它对您的应用程序有意义，则取决于您。

至于第二个问题，我一直这样做是为了向客户提供 XML、JSON 和 JSONP：

```
@GET
@Path("/thing")
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON, CustomMediaTypes.APPLICATION_JSONP})
public Response doThing(@QueryParam("callback") @DefaultValue("fn") String callback) {      
  // Do the thing
  GenericEntity<MyThing> response = new GenericEntity<MyThing>(thing){};
  return Response.ok(new JSONWithPadding(response, callback)).build();
} 
```

# html - 仅在高度不同时将图像垂直对齐到画廊底部

> ID：15261641
> 
> 赞同：1
> 
> 时间：2013-03-07T01:50:15.063
> 
> 标签：html, css, image, alignment

我正在建立一个图片库，但遇到了问题。如果图像标签的长度都相同，它们会完美对齐，但如果标签长于一行，它会将图像向上推，而不是在下方创建更多的空白区域。我怎样才能解决这个问题？

我希望图像全部对齐到一行，并且文本从那里向下对齐。

我尝试将它放入一个 jsfiddle 但无论出于何种原因我都无法让它工作......这是制作这个的 HTML

```
<div class="thumbrow">
    <div style="min-width:400px;" class="thumbrow">
        <div style="width:100px;" class="thumbs">
            <div style="width:100px;" class="imgbox">
                <a target="_blank" title="Hydrangeas" rel="lightbox[test]" href="http://jacobraccuia.com/test/wp-content/uploads/gallery/test/Hydrangeas.jpg">
                    <img width="100" height="75" src="http://jacobraccuia.com/test/wp-content/uploads/gallery/test/thumbs/Hydrangeas.jpg">
                </a>
            </div>
            <p>Hydrangeas</p>
        </div>
        <div style="width:100px;" class="thumbs">
            <div style="width:100px;" class="imgbox">
                <a target="_blank" title="Chrysanthemum" rel="lightbox[test]" href="http://jacobraccuia.com/test/wp-content/uploads/gallery/test/Chrysanthemum.jpg">
                    <img width="100" height="75" src="http://jacobraccuia.com/test/wp-content/uploads/gallery/test/thumbs/Chrysanthemum.jpg">
                </a>
            </div>
            <p>Chrysanthemum</p>
       </div>
       <div style="width:100px;" class="thumbs">
            <div style="width:100px;" class="imgbox">
                <a target="_blank" title="Lighthouse" rel="lightbox[test]" href="http://jacobraccuia.com/test/wp-content/uploads/gallery/test/Lighthouse.jpg">
                    <img width="100" height="75" src="http://jacobraccuia.com/test/wp-content/uploads/gallery/test/thumbs/Lighthouse.jpg">
                </a>
            </div>
            <p>Lighthouse</p>
        </div>
    </div>
</div> 
```

和 CSS

```
.thumbgal .thumbs {
    float: left;
    margin: 0 5px;
}
.imgbox {
    position: relative;
    text-align: center;
}   
.thumbrow {
    float: left;
    overflow: hidden;
}
.thumbs p {
    font-size: 12px;
    line-height: 16px;
    word-wrap: break-word;
} 
```

请帮助：D

![在此处输入图像描述](../Images/9ab054ec650ec07b9d04a8f95b1a9d67.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:30:07.633

嗨，我认为您在`.thumbs` *检查* [演示中添加样式是错误的](http://jsfiddle.net/jhunlio/nKkWX/1/)

```
.thumbs {
    float:left;
    margin-right:10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:01:47.607

如果您不需要显示图像的全文，则可以快速解决您的问题，可能是将文本限制在一定宽度并在溢出时添加省略号。

这将代替打破单词来换行，并将标签的高度保持在一行。

```
.thumbs p {
  font-size: 12px;
  line-height: 16px;
  width: 100px; /* Some width */
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
} 
```

编辑：仔细看看，从给出的代码。我用小提琴试了一下，对我来说效果很好。我只是在`.thumbs`. [http://jsfiddle.net/nKkWX/](http://jsfiddle.net/nKkWX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:42:38.070

将您的`thumbs`div`display`值设置为`inline-block`并将它们垂直对齐到顶部：

```
.thumbs {
  margin: 0 5px;
  display:-moz-inline-stack;
  display: inline-block;
  vertical-align: top;
} 
```

[在这里](http://jsfiddle.net/ultranaut/Pskqb/)拉小提琴。

# adobe-analytics - 如何将列表（逗号分隔）传递给 Omniture 中的流量变量？

> ID：15261644
> 
> 赞同：3
> 
> 时间：2013-03-07T01:50:26.763
> 
> 标签：adobe-analytics

我有一个“分类”字段，我想将它传递给 Omniture。此分类字段可以有多个值，我想分别计算每个分类的计数。让我用一个例子来解释我的问题：

项目可以与多个分类相关联。假设我们正在谈论一个名为“Item1”的项目。该项目可以与分类“Tx1”、“Tx2”、“Tx3”相关联。

所以js代码会是这样的，

```
s.prop1 = "Item1"
s.prop2 = "Tx1, Tx2, Tx3" 
```

我期待omniture为“Tx1”、“Tx2”和“Tx3”存储单独的桶/计数器。但是 Omniture 为“Tx1、Tx2、Tx3”创建了一个存储桶。我希望有一种方法可以分别对待它们。理想情况下，我不想在单独的 prop 变量中分别传递分类法。

如果有人能指出我正确的方向，我将不胜感激。

谢谢， 拉格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:23:44.283

实际上 Omniture 确实支持列表样式的道具，恰当地称为列表道具。您必须与客户关怀部交谈才能为您的道具启用它，并且您需要指定要使用的分隔符（如逗号）。然后你会完全按照你的做法填充它，除了逗号和值之间没有空格。（“a，b，c”不是“a，b，c”）。

另一种选择是 Racheet 提到的列表 eVar。不同之处在于列表道具发送值并且每个值都在道具变量范围内，而列表 eVar 值是使用 eVar 范围记录的。

如果您决定使用 list eVar 而不是 list prop 来执行此操作，请阅读 Omniture 如何为它们处理分配......有一些影响需要考虑，因为它们只能设置为第一个或最后一个分配......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:30:23.470

从版本 15 开始，Omniture 确实具有您正在寻找的功能。不幸的是，它不会在道具中做到这一点。您需要使用稍微不同的变量类型。您要查找的变量是一个列表 eVar。

每个实现都有其中三个可用：

1.  s.list1
2.  列表2
3.  列表3

[这是 Omniture 介绍它们的博客文章。](http://blogs.adobe.com/digitalmarketing/analytics/15-for-15-your-kiss-is-on-my-list-var/) 您还可以在 Adob​​e Marketing Cloud 界面内的知识库文章 10549 中找到有关它们的信息。

# c# - 如何在 MessageBox 上显示 FARPROC 内存地址

> ID：15261645
> 
> 赞同：0
> 
> 时间：2013-03-07T01:50:35.660
> 
> 标签：c#, c++, c, dll

所以我试图用 FARPROC 的内存地址弹出一个 MessageBox，这样我就可以看到这个值。不过我好像做不到。我也尝试过一些古怪的东西。

这是我上次尝试的无效示例。

```
MessageBox(NULL, (LPCSTR) (WCHAR) myFarproc, "Loader", NULL); 
```

它只是使程序崩溃，并且

```
MessageBox(NULL, (LPCSTR) myFarproc, "Loader", NULL); 
```

显示乱码。还要注意的是，调用这个 dll 代码的程序是用 C# 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:53:43.317

您不能只将指针转换为字符串并期望某些内容清晰，特别是如果您将随机指针转换为指向 C 样式字符串的指针（这就是 LPCSTR）。

您需要做的是使用类似的东西将指针的数值转换为字符串`sprintf_s`并显示结果字符串。

例如（从记忆中，没有编译它）：

```
char buffer[9];   // Adjust size if you're on a 64-bit system
sprintf_s(buffer, "%x", (size_t)myFarProc); 
```

这是假设您可以使用 sprintf_s 的 C++ 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:11:21.440

我想我做到了。我这样做正确吗？

```
size_t pAddy = (size_t) myFarproc;
stringstream ss;
char buff[10];
ss << itoa(pAddy,buff,16);
MessageBox(NULL, (LPCSTR) ss.str().c_str(), "Address", NULL); 
```

# ios - 后台线程上的核心数据获取请求仅适用于首次获取

> ID：15261648
> 
> 赞同：2
> 
> 时间：2013-03-07T01:50:45.930
> 
> 标签：ios, xcode, core-data, nsmanagedobject, nsoperationqueue

我正在使用 NSOperationQueue 和 NSInvocationOperation 在我的 UIViewController 上调用一个方法，然后该方法调用另一个类中的一个方法，该方法反过来解析来自 Web 的 XML 文件并更新一些核心数据托管对象。

这个过程在我第一次运行应用程序时有效，但是当我第二次调用该方法时（再次显示 UIViewController 时），它不会执行 XML 解析器类中的 executeFetchRequest 语句之后的任何行。这是我用来执行的代码：

我有一个 UITableViewController，它在加载时从我的核心数据存储中获取停车场的所有静态信息：

```
- (void)viewDidLoad
{
    NSLog(@"viewDidLoad");
    [super viewDidLoad];

    southeastCarparks = [[NSMutableArray alloc] init];
    southwestCarparks = [[NSMutableArray alloc] init];
    northeastCarparks = [[NSMutableArray alloc] init];
    northwestCarparks = [[NSMutableArray alloc] init];
    carparkLocations = [[NSMutableArray alloc] initWithObjects:southeastCarparks, southwestCarparks, northeastCarparks, northwestCarparks, nil];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"CarparkInfo" inManagedObjectContext:self.managedObjectContext];

    [fetchRequest setEntity:entity];
    NSError *error;
    self.carparkInfos = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

    for (CarparkInfo *carpark in self.carparkInfos){
        if ([carpark.details.region isEqualToString:@"Southeast"]){
            [southeastCarparks addObject:carpark];
        } else if ([carpark.details.region isEqualToString:@"Southwest"]){
            [southwestCarparks addObject:carpark];
        } else if ([carpark.details.region isEqualToString:@"Northeast"]){
            [northeastCarparks addObject:carpark];
        } else if ([carpark.details.region isEqualToString:@"Northwest"]){
            [northwestCarparks addObject:carpark];
        }
    }

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(loadXMLData)
                                             name:@"appDidBecomeActive"
                                           object:nil];
} 
```

然后当视图出现时，我调用 loadXML 方法访问网络并从 xml 文件中获取最新的停车位信息

```
- (void) viewDidAppear:(BOOL)animated
{
    [self loadXMLData];
    NSLog(@"viewDidAppear");
}

- (void) loadXMLData {
    NSLog(@"loadXMLData");

    NSOperationQueue *queue = [NSOperationQueue new];
    NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                        selector:@selector(loadXMLDataWithOperation)
                                                                          object:nil];
    [queue addOperation:operation];
}

- (void) loadXMLDataWithOperation {
    xmlParser = [[XMLParser alloc] loadXMLByURL:xmlFileURL];

    [self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:YES];
} 
```

在 XMLParser 类中，我获取传入的 xmlFileURL，从 Web 检索它，解析它，然后尝试更新 Core Data 存储中的可用空间

```
-(id) loadXMLByURL:(NSString *)urlString
{
    _carparks = [[NSMutableArray alloc] init];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if (![elementName isEqualToString:@"carpark"]){
        return;
    }

    currentCarpark = [Carpark alloc];

    NSString *name = [attributeDict objectForKey:@"name"];
    currentCarpark.name = name;

    NSString *spaces = [attributeDict objectForKey:@"spaces"];
    currentCarpark.spaces = spaces;

    [self.carparks addObject:currentCarpark];
    currentCarpark = nil; 

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    // set up the managedObjectContext to read data from CoreData
    id delegate = [[UIApplication sharedApplication] delegate];
    self.managedObjectContext = [delegate managedObjectContext];

    NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"CarparkInfo" inManagedObjectContext:self.managedObjectContext];

    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"code=%@",name]];

    NSError *error;
    CarparkInfo *cgCarpark;

    // THIS IS THE LAST LINE TO BE EXECUTED THE 2ND TIME AROUND. THE APPLICATION DOESN'T THROW AN ERROR BUT DOESN'T GO ON TO UPDATE THE CARPARK OBJECT ON THE LINE AFTER
    cgCarpark = [[self.managedObjectContext executeFetchRequest:fetchRequest error:&error] lastObject];

    cgCarpark.availableSpaces = spaces;
    error = nil;
    if (![self.managedObjectContext save:&error]) {
        //Handle any error with the saving of the context
    }
} 
```

我在使用托管对象上下文的方式上做错了吗？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:54:37.493

我认为@Mark_Kryzhanouski 是正确的，您遇到了僵局。可能是因为您`NSManagedObjectContext`在多个线程上访问您的。你需要小心你的线程`Core data`。您`NSOperation`将在后台线程上运行，因此对您的调用`NSManagedObjectContext`不会与第一次调用在同一线程上`viewDidLoad`。`Core Data`这是一些并发的参考资料...

[OS X v10.7 和 iOS 5.0](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-CoreData/index.html)的 Core Data和Core Data 发行说明的[并发性](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)

在 WWDC 2012 视频“Session 214 - Core Data Best Practices”中也有一个很好的 WWDC 演示文稿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:52:06.437

只需在获取结果控制器之前编写以下语句

```
self.fetchedResultsController = nil; 
```

# actionscript-3 - Away3D：如何调整 ObjectContainer3D 实例的大小

> ID：15261649
> 
> 赞同：0
> 
> 时间：2013-03-07T01:50:51.943
> 
> 标签：actionscript-3, flash, 3d, away3d

我的问题是：如何调整 ObjectContainer3D 实例的大小（因为它没有“宽度”、“高度”和“深度”属性）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:31:24.890

在 3D 空间中没有像素的概念。通常大小以“单位”为单位。您正在寻找的是一种渲染像素完美纹理的方法。因此，映射到 3D 对象的像素在屏幕上呈现为像素。这通常是通过在距相机特定距离处移动对象来实现的。

这是我在该主题上找到的[博客文章的链接，它应该为您指明正确的方向。](http://www.blackspell.de/2011/02/away3d-pixel-precision-pixel-perfect-display/)

最后，实际 3D 对象的大小并不重要。重要的是比例，主要是根据需要渲染纹理的纵横比。要在屏幕上渲染 400 像素 x 200 像素的纹理，3D 平面可以是 4 单位 x 2 单位。之后将其正确定位在相机前面将在屏幕上生成 400 像素 x 200 像素的图像。

hth。

J。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:31:49.663

也许您可以使用“scaleX”、“scaleY”、“scaleZ”或“scale”。

请注意，这将影响 3D 空间内 ObjectContainer3D 中对象的大小。鉴于 3D 对象具有宽度、高度和深度，不确定这是否是您想要做的。

# google-bigquery - 在 bigquery 中，有没有办法通过浏览器界面将数据字段设置为可为空

> ID：15261652
> 
> 赞同：4
> 
> 时间：2013-03-07T01:51:14.877
> 
> 标签：google-bigquery

在 bigquery 中，有没有办法通过浏览器界面将数据字段设置为可为空？

如果不是，并且我在一列中混合了整数和 NULL 值，bigquery 是否会接受该字段的类型“整数”还是需要“字符串”？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T07:50:35.827

**更新 (2016-07-06)：**您现在可以在 Web UI 的架构视图中编辑字段模式并将新字段添加到架构中。

* * *

~~浏览器界面当前无法直接更新现有表的模式。但是，如果您正在创建一个新表，则默认情况下您将获得可为空的字段。~~

我不确定我是否理解你的第二个问题。对于具有“整数”类型和“可空”节点的字段，整数和 NULL 值的混合可以正常工作，但如果模式是“必需的”则不行（因为这不允许 NULL 值）。您可以选择将所有这些数据表示为字符串数据，但这会降低效率并且查询起来不太方便。

请注意，将数据导入为 CSV 时，NULL 值由一个空字段表示，而不是由字符串“NULL”表示。

# javascript - 在 d3.js 中解析字符串到日期

> ID：15261654
> 
> 赞同：4
> 
> 时间：2013-03-07T01:51:23.817
> 
> 标签：javascript, d3.js

我正在尝试使用 d3.js 解析日期字符串。格式就像`"2012-11-02T08:32:55-04:00"`

您可以在下面看到控制台输出。相关 API 在[这里](https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-format)。正如文档所解释的那样，D3 解析器更加严格。但是，我期待 '%Y-%m-%dT%H:%M:%SZ' 作为格式字符串。返回null。任何帮助表示赞赏。

谢谢。

```
format = d3.time.format('%Y-%m-%dT%H:%M:%SZ')
%Y-%m-%dT%H:%M:%SZ
format.parse("2012-11-02T08:32:55-04:00");
null
format.parse("2011-07-01T19:15:28Z");
Fri Jul 01 2011 19:15:28 GMT-0400 (EDT)
format = d3.time.format('%Y-%m-%dT%H:%M:%S%Z')
%Y-%m-%dT%H:%M:%S%Z
format.parse("2011-07-01T19:15:28Z");
null
format.parse("2012-11-02T08:32:55-04:00");
null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:59:42.577

根据该API：

> **尚不支持解析以下指令**：
> %j - 一年中的一天。
> %U - 一年中的周数。
> %w - 工作日编号。
> %W - 一年中的周数。
> **%Z - 时区偏移量，例如“-0700”。**
> %% - 文字“%”字符。

因此，除非您删除日期的 -[time_zone] 部分，否则您可能会不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T16:42:47.637

这已不再是这种情况。时区包含在 d3js 的 3.3.x 版本中。

d3js 拉取请求：[https ://github.com/mbostock/d3/pull/1495](https://github.com/mbostock/d3/pull/1495)

# objective-c - Obj C - 有没有办法让方法返回调用它的方法？

> ID：15261658
> 
> 赞同：1
> 
> 时间：2013-03-07T01:51:43.177
> 
> 标签：objective-c, algorithm, methods

我想知道是否有办法实现以下要求：

首先，有一个`methodA`，它接受一个输入`objA`并检查`objA`该方法是否有效。如果有效，则返回一个 object `objB`。但是，如果`objA`无效，它只会返回`objA`自己。请注意，即使`objA`是有效的，返回的`objB`可能仍然与 相同`objB`。

然后，在,中有一个`methodB`and被调用。如果 的输入有效，则程序继续运行而不会出错。但是，如果使用无效输入调用，则应该终止（也就是返回某个指示错误的字符串）以防止将来崩溃。`method``methodA``methodA``methodA``methodB`

我能想到的当前解决方案是在其中创建`(BOOL)methodAInputIsValid:(obj)input`一个`methodB`：

```
if(methodAInputIsValid:input) {
    obj objReturn = methodA:input;
}else{
    //show error warning
    return;
}
//continue doing something with objReturn and finally return some valid thing 
```

代码的一个问题是，`(BOOL)methodAInputIsValid:(obj)input`由于`methodA:(obj)input`在`methodA`. 所以我想更有效地使用有效性测试，以便它适用于`methodB`并删除`(BOOL)methodAInputIsValid`.

这是我能想到的一种可能的应用：

在程序中，用户被要求输入一个字符串，该字符串将指导程序的操作。但是，输入字符串可能需要标准化，例如将所有字母转换为小写，将所有单引号转换为双引号，并自动补全任何缺少的右括号或引号。但是，如果用户只是输入了无法标准化的废话，那么程序应该终止并警告用户该问题。这两种方法是`(BOOL)isStandardizeable:(NSString *)input`和`(NSString *)standardize:(NSString *)input`。因为`(NSString *)standardize`已经返回一个`NSString *`，我不能让它返回另一个`BOOL`，对吧？所以下面的代码是无法实现的：

```
if(standardize:input){
    NSString *result = standardize:input;
} else {
    NSLog(@"unrecognizable input!");
    return;
}
//continue... 
```

谁能想到一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:55:11.700

实际上，如果输入无效，我只会`methodA`返回。`nil`这是向调用者发出失败信号的一种相当常见的方法。如果您真的需要方法的“身份”部分，只需让调用者做

```
id res = [... methodA:input];
if(res == nil)
    res = input; 
```

# php - Joomla 3 批量用户导入

> ID：15261670
> 
> 赞同：2
> 
> 时间：2013-03-07T01:53:13.860
> 
> 标签：php, mysql, joomla

我正在使用 Joomla 3，我希望能够通过 sql 或 csv 批量导入大约 500 个用户。我一直在寻找一个扩展来做到这一点，但我只能找到 2.5 版的解决方案，它不会安装到 3 版中。

基本上我正在寻找的是关于如何将用户添加到 joomla 3 数据库的描述或某种架构视图。

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:55:24.250

Joomla 是一个很棒的程序。虽然，我还是推荐 2.5，因为它有更多的模块并且得到更好的支持。3还有bug。但祝你好运，我希望你能找到答案，赢家！

你真棒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T20:15:50.107

我找到了这个，但我还没有尝试过。[http://www.joomlarra.com/arra-user-export-import-for-joomla-3.0-and-2.5/vmchk.html](http://www.joomlarra.com/arra-user-export-import-for-joomla-3.0-and-2.5/vmchk.html)

我知道 joomlaxi 为所有 joomla 和 jomsocial 用户的 impex 做了一个。我正在尝试确定它是否可以处理对 joomla 3 用户表的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T23:09:31.617

我也找不到它，所以我更新了为 Joomla 1.5 编写的 PHP 脚本以使用新的数据库模式。

```
<?php

// Handle form upload
if(isset($_POST['import'])) 
    {

    $mysql_host             = trim($_POST['mysql_host']);
    $mysql_user             = trim($_POST['mysql_username']);
    $mysql_password         = trim($_POST['mysql_password']);
    $mysql_schema           = trim($_POST['mysql_schema']);
    $table_prefix           = trim($_POST['table_prefix']);

    // Validate MySQL details    
    if(!mysql_connect($mysql_host, $mysql_user, $mysql_password) || !mysql_select_db($mysql_schema)) {
        echo 'Supplied MySQL details were incorrect - aborting';
        return;
        }

        // set tablenames
        $tb_users = $table_prefix . 'users';
        $tb_usergroups = $table_prefix . 'usergroups';
        $tb_user_usergroup_map = $table_prefix . 'user_usergroup_map';

        // Validate File Name
        if($_FILES["csv"]["error"] != 0) {
            printf('Invalid file name: "%s" - Error code "%s" <br />', $_FILES['csv']['tmp_name'], $_FILES["csv"]["error"]);
            die('<strong>Upload aborted...</strong><br />');
        } else {
            printf('Importing the following csv file<br />
                    File: "%s"<br />
                    Size: "%s" bytes<br />', $_FILES['csv']['name'], $_FILES['csv']['size']);
        }

        // open cvs file
        $fp = fopen($_FILES['csv']['tmp_name'], 'r');

        // validate data
        $valid_data = true;
        while($user = fgetcsv($fp)) {

            // Verify name
            if(!isset($user[0])) {
                display_user('<br /><strong>ERROR!!! Invalid Name </strong><br />', $user);
                $valid_data = false;
            } elseif($user[0] == '') {
                display_user('<br /><strong>ERROR!!! Invalid Name </strong><br />', $user);
                $valid_data = false;
                }

            // Verify username
            if(!isset($user[1])) {
                display_user('<br /><strong>ERROR!!! Invalid username </strong><br />', $user);
                $valid_data = false;
            } elseif($user[1] == '') {
                display_user('<br /><strong>ERROR!!! Invalid username </strong><br />', $user);
                $valid_data = false;
            }

            // Verify email
            if(!isset($user[2])) {
                display_user('<br /><strong>ERROR!!! Invalid email </strong><br />', $user);
                $valid_data = false;
            } elseif($user[2] == '') {
                display_user('<br /><strong>ERROR!!! Invalid email </strong><br />', $user);
                $valid_data = false;
            }

            // Verify Password
            if(!isset($user[3])) {
                display_user('<br /><strong>ERROR!!! Invalid password </strong><br />', $user);
                $valid_data = false;
            } elseif($user[3] == '') {
                display_user('<br /><strong>ERROR!!! Invalid password </strong><br />', $user);
                $valid_data = false;
            }

            // Verify usergroup
            if(!isset($user[4])) {
                display_user('<br /><strong>ERROR!!! Invalid usergroup </strong><br />', $user);
                $valid_data = false;
            } elseif($user[4] == '') {
                display_user('<br /><strong>ERROR!!! Invalid usergroup </strong><br />', $user);
                $valid_data = false;
            }

            // Check duplicate username
            $sql = '
                    SELECT COUNT(*) AS duplicate_username
                    FROM    '.$tb_users.'
                    WHERE   username = "'.$user[1].'"'; 

            $result = mysql_query($sql);
            if (!$result) {
                die('Invalid query: ' . mysql_error());
            }

            while ($row = mysql_fetch_assoc($result)) {
                $duplicate_users = $row['duplicate_username'];
            }

            if ($duplicate_users > 0) {
                display_user('<br /><strong>ERROR!!! Duplicate username </strong><br />', $user);
                    $valid_data = false;
            }

            // Check duplicate email
            $sql = '
                    SELECT COUNT(*) AS duplicate_email
                    FROM    '.$tb_users.'
                    WHERE   email = "'.$user[2].'"'; 

            $result = mysql_query($sql);
            if (!$result) {
                die('Invalid query: ' . mysql_error());
            }

            while ($row = mysql_fetch_assoc($result)) {
                $duplicate_users = $row['duplicate_email'];
            }

            if ($duplicate_users > 0) {
                display_user('<br /><strong>ERROR!!! Duplicate email </strong><br />', $user);
                    $valid_data = false;
            }

    }

    if(!$valid_data) {
        die('<strong>CSV file contains errors. Upload Aborted!</strong>');
    } else {
        printf('<strong>Data is valid. Uploading users...</strong><br />');
    }

    // Count initial users
    $sql = '
            SELECT COUNT(*) AS initial_users
            FROM    '.$tb_users.'
           '
        ; 

    $result = mysql_query($sql);
    if (!$result) {
        die('Invalid query: ' . mysql_error());
    }

    while ($row = mysql_fetch_assoc($result)) {
        $initial_users = $row['initial_users'];
    }

    // Load users
    // open cvs file
    $fp = fopen($_FILES['csv']['tmp_name'], 'r');

    $counter = 0;
    while($user = fgetcsv($fp)) {

        // Check duplicate username
        $valid_username = true;
        $sql = '
                SELECT COUNT(*) AS duplicate_username
                FROM    '.$tb_users.'
                WHERE   username = "'.$user[1].'"'; 

        $result = mysql_query($sql);
        if (!$result) {
            die('Invalid query: ' . mysql_error());
        }

            while ($row = mysql_fetch_assoc($result)) {
            $duplicate_username = $row['duplicate_username'];
        }

        if ($duplicate_users > 0) {
            display_user('<br /><strong>ERROR!!! Duplicate username found in database</strong><br />', $user);
                $valid_username = false;
        }

        // Check duplicate email
        $valid_mail = true;
        $sql = '
                SELECT COUNT(*) AS duplicate_email
                FROM    '.$tb_users.'
                WHERE   email = "'.$user[2].'"'; 

        $result = mysql_query($sql);
        if (!$result) {
            die('Invalid query: ' . mysql_error());
        }

        while ($row = mysql_fetch_assoc($result)) {
            $duplicate_users = $row['duplicate_email'];
        }

        if ($duplicate_users > 0) {
            display_user('<br /><strong>ERROR!!! Duplicate email found in database</strong><br />', $user);
                $valid_mail = false;
        }

        if(!$valid_username or !$valid_mail) {
            printf('<strong>WARNING!!! User not uploaded</strong><br /><br />');
        } else {

            // Upload user
            display_user('<br />', $user);

            // Encypt password if required      
            $user_password = isset($_POST['md5_passwords']) ? md5($user[3]) : sql_prep($user[3]);

            // Insert record into users
            $sql = "
                INSERT INTO ".$tb_users." 
                SET
                    name            = '".sql_prep($user[0])."',
                    username        = '".sql_prep($user[1])."',
                    email           = '".sql_prep($user[2])."',
                    password        = '".$user_password."',
                    registerDate    = NOW(),
                    activation      = '',
                    params          = '{\"admin_style\":\"\",\"admin_language\":\"\",\"language\":\"\",\"editor\":\"\",\"helpsite\":\"\",\"timezone\":\"\"}',
                    otpKey          = '',
                    otep            = ''                
            ";

            $result = mysql_query($sql);
            if (!$result) {
                die('Invalid query: ' . mysql_error());
                }

            // Retrieve last uploaded user's ID
            list($user_id) = mysql_fetch_row(mysql_query('SELECT LAST_INSERT_ID()'));

            printf('Assigned user ID: '.$user_id.'<br />');

            // Insert record user_group_map
            $sql = '
                    INSERT INTO '.$tb_user_usergroup_map.'
                SET
                    user_id   = '.$user_id.',
                    group_id  = '.$user[4].'
               ';

            $result = mysql_query($sql);
            if (!$result) {
                die('Invalid query: ' . mysql_error());
                }

        echo 'done.<br />';
        flush();

        }

        // Update counter
        $counter++;

   }

    // Count final users
    $sql = '
            SELECT COUNT(*) AS final_users
            FROM    '.$tb_users.'
           '
        ; 

    $result = mysql_query($sql);
    if (!$result) {
        die('Invalid query: ' . mysql_error());
    }

    while ($row = mysql_fetch_assoc($result)) {
        $final_users = $row['final_users'];
    }

    if(($final_users - $initial_users) == $counter) {
        echo '<br /><br /><strong>Done. <br />
              Uploaded '.$counter.' users </strong>';
    } else {
        echo '<br /><br /><strong>ERROR!!! <br />
              Uploaded only some users</strong><br />
              Users submitted: '.$counter.'<br />
              Users uploaded : '.($final_users - $initial_users);
    }

} else {

   // show upload form
   ?>
   <html><head><title>Bulk import users into Joomla 3</title></head><body>
   <h1>Import Users to Joomla</h1>
   <p>
       Use this script to do a bulk import of users into Joomla 1.5.<br />
    Upload a CSV file with the following format:<br />
    <code>
        name, username, email, password, group_number
    </code><br />
    Wrap details with commas in them in quotes.
    </p>
    <hr />
    <form action="<?php echo $_SERVER['PHP_SELF'] ?>" method="post" enctype="multipart/form-data"> 
        <input type="hidden" name="import" value="1" />
        <table cellpadding="4px">
            <tr>
                <td>CSV File: </td>
                <td><input type="file" name="csv" /></td>
            </tr>
            <tr>
                <td>MD5 Hash Passwords: </td>
                <td><input type="checkbox" name="md5_passwords" /><br /><small>*Check this option if the passwords in your CSV are in plain text</small></td>
            </tr>
            <tr>
                <td>Joomla Table Prefix: </td>
                <td><input type="text" name="table_prefix" value="jos_" /></td>
            </tr>
            <tr>
                <td>Joomla Database Name: </td>
                <td><input type="text" name="mysql_schema" value="joomla" /></td>
            </tr>
            <tr>
                <td>MySQL Host: </td>
                <td><input type="text" name="mysql_host" value="localhost" /></td>
            </tr>
            <tr>
                <td>MySQL Username: </td>
                <td><input type="text" name="mysql_username" value="" /></td>
            </tr>
            <tr>
                <td>MySQL Password: </td>
                <td><input type="password" name="mysql_password" value="" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="submit" name="submit" value=" Import Users! " /></td>
            </tr>
        </table>
    </form>
    </body></html>

    <?php

}   

function sql_prep($var) {
    return mysql_real_escape_string($var);
}

function display_user($message, $user) {

    printf($message);
    printf('Name: "%s" ... ', sql_prep($user[0]));
    printf('  Username: "%s" ... ', sql_prep($user[1]));
    printf('  Password: "%s" ... ', sql_prep($user[3]));
    printf('  Mail: "%s" ... ', sql_prep($user[2]));
    printf('  Group: "%s" ', sql_prep($user[4]));
    printf('<br />');

    return;

}

?> 
```

# c - Execvp 未在循环中执行 n 次

> ID：15261673
> 
> 赞同：0
> 
> 时间：2013-03-07T01:53:28.607
> 
> 标签：c

假设输入是一个指向数组的指针，它在每个元素处存储，“ls -l”在位置 0，然后 cat helloworld.txt 在位置 1，依此类推，我希望创建主要参数，即 ls、cat、 pwd，然后执行。本质上，我正在做的是我有一个包含所有这些命令的文件，我首先将它们存储在我的输入变量中，该变量被声明为 char *input[10]。现在我在那个数组中有我需要的东西，我可以提取单个的主要命令，比如 ls、cat，我希望执行所有这些命令。

例如，

如果位置 0 有 ls -l，我的第一个变量有 ls，我希望将它传递给 execvp，然后位置 1 可能有 cat sample.txt，现在我的变量首先是 cat，我将它与整个传递给 execvp cat sample.txt（输入[i]），执行vp。由于某种奇怪的原因，这不起作用。如何在 execvp 中循环运行所有这些命令，以便一旦完成，所有这些命令都已成功运行。这是我的尝试，在第一个循环结束时，我运行了一个 execvp，我希望它完成，然后我提取进一步的输入等，等等。

帮帮我。

```
 for(i=0; i<lineCount; i++)
        {

            first = malloc(sizeof(char)*50); 

            for(j=0; j<strlen(input[i]); j++)
            {
                if(input[i][j]!=' ')
                {
                    first[j]=input[i][j];
                }
                else
                {    
                    break;
                }
            } 

            execvp(first, input[i]);

         } 
```

我尝试执行 execp(first, input) 但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:56:28.453

这是[opengroup exec 手册](http://pubs.opengroup.org/onlinepubs/009604499/functions/exec.html)在第一段中所说的：

> 成功的 exec 不会有任何返回，因为调用进程映像被新进程映像覆盖。

我建议阅读[opengroup fork 手册](http://pubs.opengroup.org/onlinepubs/009604499/functions/fork.html)，并结合使用 fork 和 exec。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T02:05:41.707

如果您使用 execvp() 一次，所涉及的进程的执行上下文将被更改，但调用 execvp 的进程的 pid 除外，因此您的循环将无法工作，因为一旦 execvp() ，将不会有任何更多的迭代。

execvp() 主要是由子进程调用，在您的情况下，对于 'n' 个 execvp() 调用，必须有新的 'n' 个子进程分叉，

良好做法：

*   使用 execl、execv、execle、execve、execlp、execvp、系统调用族和子进程。

*   新进程映像加载到子进程后，执行后，收集进程启动的退出代码，并执行任何必要的错误处理。

*   子进程现在处于僵尸状态，父进程必须执行 wait()/waitpid() ，并等待所有子进程终止，然后退出。

-- 编辑 -- 供 OP 参考的 POC 代码

```
#include <stdio.h> 
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

int  main(void)
{
pid_t cpid;
int   status = 0;

cpid = fork();
  if (cpid == 0)
  {
   char *cmd[] = { "ls", "-l", (char *)0 };
   int ret = execv ("/bin/ls", cmd);
  }
wait(&status);
  if(status < 0)
     perror("Abnormal exit of program ls");
  else
     printf("Exit Status of ls is %d",status);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:58:17.920

`exec` *用 you替换*正在运行的进程`exec`，因此它永远不会返回，`success`因为该进程将被替换。

如果你想运行一堆进程，简单的方法是使用类似`popen`或`system`运行它们的实用程序函数。要完全控制，请对要运行的每个命令使用一次常用的 UNIX `fork`/组合。`exec`

# unit-testing - 使用生成的输入和预期输出进行单元测试

> ID：15261679
> 
> 赞同：1
> 
> 时间：2013-03-07T01:54:24.333
> 
> 标签：unit-testing, testing

我正在为一个类似于数据库查询的方法编写一些简单的单元测试：它返回一个可以使用限制（最多 n 个结果）和一个页面（第 p 个 n 个结果集）自定义的结果列表. 我想测试几个案例，例如：

*   返回所有结果
*   返回有限结果集的第一页
*   返回有限结果集的任意页面
*   返回超出结果总数的有限结果集的最后一页
*   返回超出结果总数的页面

我需要模拟返回的结果（实际上是名称），所以我只是用一个计数器生成它们，以便根据需要列出“名称 #1”、“名称 #2”等。每个测试看起来（大致）如下：

```
public void testGetMockCandidatesLimited() throws Exception {
    int numResults = 4;
    setupMock(numResults);
    results = queryFunction(...);

    // Check that the expected number of results was returned
    assertEquals(numResults, results.size());
    // Check that the results are correct and in order
    for (int i = 0; i < numResults; i++) {
        assertEquals(result.get(i).getName(), "Name #" + (i + 1));
    }
} 
```

我的问题是：以这种方式“生成”预期答案可以吗？这是一个微不足道的例子，但下一步是编写一个测试来编写一个测试以分别获得两个结果的第二页，我有：

```
 final int TEST_LIMIT = 2, TEST_PAGE = 1;
    // Check that the expected number of results was returned
    assertEquals(numResults, results.size());
    // Check that the results are correct and in order
    for (int i = TEST_LIMIT * TEST_PAGE; i < TEST_LIMIT * TEST_PAGE + TEST_LIMIT; i++) {
        assertEquals(result.get(i).getName(), "Name #" + (i + 1));
    } 
```

现在碰巧这个测试是“正确的”，因为我将采用我期望的值并确保结果是“Name #3”和“Name #4”。但是，我的 queryFunction 也会以相同的方式（`limit * page + limit`某种事物）计算返回的结果。

这是令人担忧的，因为如果测试以与被测单元相同的方式生成预期答案，则它不会检测该方法中是否存在错误。然而，用常量命名输入值使得测试比仅仅在任何地方插入 1 到 4 之间的魔法整数更具可读性。

对于可读性和可维护性（例如，将来是否需要更改值），处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:54:24.333

在问这个问题时，我想我已经说服自己，解决方案是将预期值也定义为预先的常量，例如：

```
final int LIMIT = 2, PAGE = 1, MIN_RESULT = 3, MAX_RESULT = 4; 
```

...然后在断言中使用这些值。这保留了命名键值的所有可读性，并阻止了生成预期输出的诱惑。在这种情况下，我仍然会使用循环来生成`Name #MIN`and之间的每个预期名称`Name #MAX`，但边界本身将是显式静态的。

这是尽可能好，还是有更好的方法来处理这种重复性？

# iphone - 应用程序抛出错误“此类与键视图的键值编码不兼容。” 经过长时间的良好工作

> ID：15261682
> 
> 赞同：0
> 
> 时间：2013-03-07T01:54:52.460
> 
> 标签：iphone, objective-c, interface-builder, ios6.1

我在一个我已经工作了一段时间的项目上遇到了这个错误：“由于未捕获的异常'NSUnknownKeyException'而终止应用程序，原因：'[setValue:forUndefinedKey:]：这个类不是键值编码兼容的关键观点。'”（它适用于我的每个网点）。

在我尝试绕过代码签名并尝试使用 Instruments 进行一些分析之前，我的应用程序运行良好（实际上我发现了 Instruments 的错误）。
（附加信息）我构建了 UIViewController 的子类，其中包含 .h .m 和 .xib 文件，名为 EEMainViewController。我在我的 EEAppDelegate 中实例化它以将其显示为我的主窗口的子视图。在 .xib 中，我有 1 个视图、3 个 UIPickers 和 2 个 UITextField。一旦只有一个出口链接到 FO，程序退出并抛出错误，当没有链接时，它表示“视图”属性尚未设置（这是正常的，因为它没有连接） .

我已经检查了所有的 IB 和 Bindings blahblah，在我的情况下似乎没有任何工作：我所有的插座都正确连接（XCode 在 .h 文件中的 @property 旁边显示灰点）并且我正在实例化正确的类在我的代码中。这很奇怪。

如果您想要一段代码（只有一段，它变得非常庞大），请随时向我要一些。谢谢阅读 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:20:22.583

我找到了解决问题的方法：我从项目中删除了 EEMainViewController（确保我的 .xib 中的所有插座都已断开连接）并将 .h 和 .m 内容粘贴到我创建的名为 EERootViewController 的新类中，替换所有出现的我的代码中的“EERootViewController”的“EEMainViewController”。我从头开始重建 .xib 并像以前一样连接。一切似乎都很好。
不幸的是，我不知道问题出在哪里，所以我想我们不会了解更多关于这个案例的信息。
我仍然没有将此线程标记为已完成，以防万一找到问题的原因。

打扰了！

# ios - 将 touchupinside 添加到以编程方式创建的按钮，并将 NSDate 提交到文本字段

> ID：15261688
> 
> 赞同：0
> 
> 时间：2013-03-07T01:55:28.480
> 
> 标签：ios, objective-c, xcode

我遇到的问题是我不确定如何将 touchupinside 添加到保存日期按钮的以下代码中。我只是想启动一个 UIDatePicker 并将日期提交到文本字段中，然后将其关闭。

所以我不知道如何将这个以编程方式创建的按钮链接到 datePicker 方法。不仅如此，我之前没有使用过 UIDatePicker，因此将其读入文本字段我有点模糊。文本字段是 dateFieldText。

一旦用户点击保存日期，UIDatePicker 就会被关闭。

谢谢您的帮助。这个问题对我来说有点复杂。

```
 - (void)textFieldDidBeginEditing:(UITextField *)sender
        {
            sender.delegate = self;
                if([sender isEqual:dateFieldText])
                {
                    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
                                               initWithTitle:@"Save Date"
                                               style:UIBarButtonItemStyleDone
                                               target:self
                                               action:@selector(datePicker)];

                self.navigationItem.rightBarButtonItem = doneButton;

            }
            else{
                UIBarButtonItem *submitButton = [[UIBarButtonItem alloc]
                                               initWithTitle:@"Done"
                                               style:UIBarButtonItemStyleDone
                                               target:self
                                               action:@selector(datePicker)];
                self.navigationItem.rightBarButtonItem = submitButton;

            }  
        }

    -(IBAction)datePicker
    {
        UIDatePicker *datePicker = [[UIDatePicker alloc] init];
        datePicker.datePickerMode = UIDatePickerModeDateAndTime;
        [datePicker addTarget:self action:@selector(saveDate)  forControlEvents:UIControlEventValueChanged];
        [self.dateFieldText setInputView:datePicker];
    }

    // I haven't made the saveDate method yet... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:19:58.910

你有一些连接不正确的东西。您需要在创建文本字段时将日期选择器设置为文本字段的 inputView，而不是在用户点击未添加的按钮之后，直到用户将焦点放在文本字段上。

您也不需要完成按钮和保存日期按钮。要么有一个完成按钮，要么有一个保存和取消按钮。

您还需要实现`textFieldDidEndEditing`委托方法来删除您添加的任何按钮。

您的`saveDate`方法将需要使用当前选择的日期更新文本字段的文本（在将日期转换为带有 的字符串之后`NSDateFormatter`）。

完成/保存/取消按钮的操作（无论您最终做什么）只需调用`resignFirstResponder`文本字段即可。这将关闭日期选择器。按钮操作可能还需要酌情保存或恢复日期值。

# javascript - ko.computed 在 ko.observableArray 上

> ID：15261690
> 
> 赞同：1
> 
> 时间：2013-03-07T01:55:43.450
> 
> 标签：javascript, knockout.js

我正在尝试使用计算来计算某些产品的总数。

```
function productViewModel(){

    self = this;
    function productModel(data)
    {
        var self=this;
        self.id=ko.observable(data.id);
        self.codigo=ko.observable(data.codigo);
        self.recurso=ko.observable(data.recurso);
        self.unidad=ko.observable(data.unidad);
        self.precio_unitario=ko.observable(0);
        self.cantidad=ko.observable(0);
        self.total=ko.computed(function()
            {
                return self.precio_unitario()*self.cantidad(); 
            },productModel); 
    }

    self.products = ko.observableArray([]);

    self.addProduct = function(product)
    {
        self.products.push(new productModel(product));
    };
    self.removeProduct = function()
    {
        self.products.remove(this);
    };

}

orden = new productViewModel()
ko.applyBindings(orden); 
```

但是什么时候`precio_unitario`和`cantidad`都改变了。`total`不更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:58:28.417

```
function productModel(data)
{
    var self=this;
    ...
    self.total=ko.computed(function()
        {
            return self.precio_unitario()*self.cantidad(); 
        },this); 
} 
```

您应该将 ko.computed 绑定到`this`不绑定到函数。您希望它绑定到创建的对象，而不是构造函数，构造函数上没有这些属性。由于您使用的是 self，因此默认情况下实际上会处理它，如果您愿意，可以完全省略第二个参数。

在构造函数内，`this`或`self`将引用使用`new`运算符时创建的对象。因此，所有属性都将在该对象上创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T02:27:11.567

`self = this;`应该是`var self = this;`；否则，您将覆盖全局`self`. 也取出`,productModel`计算；这不是必需的。

重要部分：

```
function productViewModel() {
    var self = this;

    function productModel(data) {
        var self = this;
        ...
        self.total = ko.computed(function() {
            return self.precio_unitario()*self.cantidad(); 
        });
    }
    ...
} 
```

确保您始终使用正确的格式写入可观察对象也很重要。它应该是`self.catidad(newValue);`而不是`self.catidad = newValue;`

# mobile - 移动网站的规格是什么？

> ID：15261701
> 
> 赞同：1
> 
> 时间：2013-03-07T01:56:29.283
> 
> 标签：mobile, web

我正在尝试将我当前的网站转换为移动版本。我将创建不同的视图（我正在使用 codeigniter），但要确保 CSS 在所有手机上看起来都很完美。移动网站的通用/标准规格是什么？

另外，推荐什么语言？我在想只是将 CSS 更改为特定宽度并根据该宽度重新设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:59:40.807

由于移动设备的屏幕宽度/高度没有固定限制。您必须考虑对尺寸使用百分比值。这样您的移动网站将更加兼容。

有关有效的移动网站的信息，即您应该包含哪些内容和不应该包含哪些内容。看看这里 [http://www.qsrweb.com/article/202567/3-tips-for-creating-an-effective-mobile-website](http://www.qsrweb.com/article/202567/3-tips-for-creating-an-effective-mobile-website)

对于与宽度相关的查询，请参阅此，

[我的网站的移动版，最佳设计宽度是多少？](https://stackoverflow.com/questions/2126662/mobile-version-of-my-website-what-design-width-is-optimal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:59:48.610

快速谷歌搜索产生以下结果：

W3C的想法：[http ://www.w3.org/standards/webdesign/mobilweb.html](http://www.w3.org/standards/webdesign/mobilweb.html)

Smashing Magazine 的想法（我之前喜欢过他们的一些比较文章）：[http ://www.smashingmagazine.com/guidelines-for-mobile-web-development/](http://www.smashingmagazine.com/guidelines-for-mobile-web-development/)

您将希望您的页面易于使用，首先将显示的文本保持在最低限度（即摘要+扩展内容），并且整体运行速度快。您可能希望对 CSS 之类的东西有多个级别的后备，以便运行 CSS 1/2 浏览器的人仍然可以使用该网站，即使 CSS3 浏览器可能有更好的体验。

您的站点还可以利用[媒体查询](http://css-tricks.com/css-media-queries/)来根据用户屏幕的大小选择样式表（有几种标准尺寸，特别是如果您考虑到流行的设备）。

Javascript 和其他类似的东西也应该适用于后备。使用 HTML5 画布和 WebSocket 之类的东西很好，因为它们可以直接由移动设备硬件辅助，但是您的脚本也应该处理那些不可用的东西。

而且，与往常一样，易于导航的页面与正常开发一样有很长的路要走。如果用户可以通过查看页面来直观地了解如何使用它（请记住，您的直观并不总是与其他人相同），那么我认为您走在正确的轨道上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:10:19.827

为移动设备设计网站有很多方法。最直接的方法是为移动站点构建一个完全独立的用户界面。

下一个方法是使用 CSS 媒体查询。这允许您重新使用当前的 UI 和样式，但您可以将其内容定制为特定的宽度和设备。

最后，是完全响应式设计。它与媒体查询非常相似，只是它使用百分比而不是绝对像素。这是最无缝的方式，标准宽度的网页可以缩放以适应较小移动设备的屏幕。它甚至可以轻松扩展！

这是开始学习响应式网页设计以及它如何应用于移动设备的好地方 - [http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

在该站点上尝试缩放浏览器的大小。注意布局如何变化。这就是工作中的 CSS 媒体查询。

# concurrency - 互斥问题中“切片”的含义

> ID：15261702
> 
> 赞同：1
> 
> 时间：2013-03-07T01:56:29.773
> 
> 标签：concurrency, operating-system, mutual-exclusion

以下语句中的“切片”是什么意思：

```
p0 tests lock (now, slice before actually setting lock) 
```

作者试图表明该程序不满足互斥锁。它来自[http://www.mcs.csueastbay.edu/~billard/os/mutex.txt](http://www.mcs.csueastbay.edu/~billard/os/mutex.txt)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:01:56.323

从上下文来看，我认为这意味着上下文切换（即当前点存在*时间片边界）。*因此，

```
p0 tests lock (now, slice before actually setting lock)
p1 tests lock (this makes p1 think it is still available) 
```

方法

```
p0 tests lock
timeslice ends -- context switch to p1
p1 tests lock
... 
```

# r - 将变量名称分配给 mcmc 对象列表

> ID：15261705
> 
> 赞同：0
> 
> 时间：2013-03-07T01:56:48.773
> 
> 标签：r, coda, mcmc

也许这里对 mcmc 对象有更多经验的人可以帮助我。

问题：我有一个存储了 20 多个 mcmc 对象的列表。我需要为每个 mcmc 对象分配变量名。

我有另一个列表，其中包含存储的每个 mcmc 的所有变量名称（作为数据框中的列）。

我可以使用 coda 包中的“varnames”函数单独执行此操作，如下所示：

作为“投票”我的数据框列表和“后验”我的 mcmc 对象列表..

```
names <- votes[[1]]$legis # extracts the names variable for the first dataframe on the list.
varnames(posterior[[1]]) <- names # assings the extracted names as variable names fo the first mcmc object on the list. 
```

但是，我不想一个接一个地做这件事，我想一次做所有的事情。我试过下面的代码......

```
p2 <- lapply(posterior, function(x)varnames(posterior[[x]]) <- names) 
```

但我明白了`Error in *tmp*[[x]] : Recursive indexing failed at level 2`。我已经尝试了该行的一些变体，但我很难理解如何正确索引它，或者如何做我想做的事情。

我知道这是一个特定的问题，但也许这里有人可以给我一个提示或什么。

在此先感谢您的帮助。抱歉，我无法提供一些数据，但很难获得可行的样本。

问候，费德里科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:03:51.720

你不需要做任何 lapply。

尝试`names(posterior) <- votes[[1]]$legis`

# vim - VIM 函数参数传递

> ID：15261708
> 
> 赞同：10
> 
> 时间：2013-03-07T01:57:01.363
> 
> 标签：vim

我正在尝试创建一个简单的 vim 脚本函数，但遇到了麻烦。此函数需要获取两个输入字符串并运行搜索并替换它们的所有实例。我现在有以下内容：

```
 function! FindAndReplaceAll(from, to)                                           
     echo a:from                                                                   
     :%s/a:from/a:to/gc                                                            
  endfunction 
```

当我做：

```
:call FindAndReplaceAll("test", "test2") 
```

echo a:from 工作正常，但 :%s... 正在作用于 from 和 to 文字。我注意到我的 vim 语法高亮甚至没有将它们突出显示为变量，所以我似乎有一个基本的语法问题。

我的问题是：

1.  正确的语法是什么？我将不胜感激解释原因而不仅仅是答案。为什么上面的不正确？
2.  无论如何允许这被称为

    ：调用 FindAndReplaceAll(test, test2)

所以我不必添加引号......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T02:08:11.843

你需要改变

`:%s/a:from/a:to/gc`

到：

`exe '%s/' . a:from . '/' . a:to . '/gc'`

你的陈述是按*字面意思*解释的。即它将在当前缓冲区中将字符串“a:from”替换为字符串“a:to”。

但是您打算将评估的字符串替换为评估的`a:from`字符串`a:to`。这可以通过内置`exe[cute]`函数来实现（您可以通过键入：`:h exe`在命令行模式下获得帮助）。

至于您的第二个问题，您必须使用引号，否则它们将被视为变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:07:41.993

命令行应该用 `execute' 调用，而不是直接文本：

```
 function! FindAndReplaceAll(from, to)                                           
     echo    a:from                                                                   
     execute "%s/" . a:from . "/" . a:to . "/gc"                                                            
 endfunction 
```

# c# - 为什么没有触发 catch 块？

> ID：15261710
> 
> 赞同：1
> 
> 时间：2013-03-07T01:57:09.587
> 
> 标签：c#, asp.net, exception

我正在尝试将错误记录到文件中，但似乎无法在发生错误时运行 catch 块。以下是代码示例：

```
try  
{  
     cmd.ExecuteNonQuery();  
}  
catch (MySQLException ex)  
{   
     //run some logging code  
}  
finally  
{  
     //clean up the resources  
} 
```

问题是当出现异常时，我从内置的网络服务器中得到错误，这是一个未处理的异常。当我调试代码在异常处停止然后继续到 finally 块。有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T02:01:30.803

`ExecuteNonQuery()`引发类型异常`SqlException`。

所以我不确定是什么`MySQLException`，但你需要抓住一个`SqlException`.

看看这个以获得额外的信息：

*   [SqlCommand.ExecuteNonQuery 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)
*   [SqlException 类](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:12:15.977

似乎抛出的异常不是类型`MySQLException`或任何从它派生的异常。所以 catch 块永远不会捕获它，finally 块会直接执行！

要检查引发了哪种异常，请将代码修改为：

```
try  
{  
   cmd.ExecuteNonQuery();  
}  
catch (MySQLException ex)  
{   
   //run some logging code  
}  
catch (Exception ex)
{
   // any other exception will be handled here
}
finally  
{  
   //clean up the resources  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:12:03.383

[该方法可以抛出不同类型的异常](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

*   无效转换异常
*   异常
*   IO异常
*   无效操作异常
*   ObjectDisposedException

# linq - Linq to Crm (2011) 无法通过系统用户的用户名搜索

> ID：15261720
> 
> 赞同：1
> 
> 时间：2013-03-07T01:58:42.437
> 
> 标签：linq, dynamics-crm-2011, dynamics-crm

我有一个 win 应用程序，它使用 linq to crm 在 Crm 2011（IFD）中按用户名查询系统用户。我有以下代码片段，它显示了我要完成的工作。该方法执行没有错误，但是没有找到记录。用户名在 CRM 中显示为“domain\testuser”。

```
 public static SystemUser LookUpSystemUser()
    {
        var username= "domain\\testuser");

        var list = (from c in Context.CreateQuery<SystemUser>()
                    where c.DomainName.Equals(username)
                    select c).ToList();

        return list.FirstOrDefault();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T06:03:21.993

重新创建应用程序似乎可以解决问题。仍然没有代码差异，所以仍然不确定发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T05:04:35.993

这确实不是您问题的答案，并且在您的特定情况下，由于每个域名只有一个 SystemUser，这实际上并不重要，但这是最佳实践。

调用`ToList()`LINQ 语句时，它将返回 SQL 数据库中与查询匹配的所有实体。然后调用`FirstOrDefault()`将返回第一个客户端。

而不是`ToList()`只对一个感兴趣时调用，调用`FirstOrDefault()`. 这实际上会导致`Top 1`添加到选择查询中。这将减少在 SQL 服务器、CRM Webserver 上消耗的资源以及在 SQL 服务器、CRM Webserver 和客户端之间传输的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:27:16.240

尝试运行这个方法（或它的规范等效方法），看看你是否得到任何东西。如果是这样，您可以收紧*Select*语句中的条件。

```
public static SystemUser LookUpSystemUser()
{
  return Context.CreateQuery<SystemUser>()
    .Select(element => true)
    .FirstOrDefault();
} 
```

请记住*default(SystemUser)*将产生*null*。

*不在电脑上，没测试过。*

# php - How to change PHP master value of memory_limit

> ID：15261722
> 
> 赞同：1
> 
> 时间：2013-03-07T01:58:49.787
> 
> 标签：php

I trying to change the php memory_limit **master value** but still cant make it.

in htaccess i put '**php_value memory_limit 1024M**', it's only change the **local value**..

Any ideas to change the master value?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:02:01.343

更新您的 php.ini 文件。如果您在无法访问它的共享主机上，那么您唯一的选择是在本地设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:03:33.540

如果要更改主值，则需要找到位于服务器上的 php.ini 文件。如果您在查找文件时需要帮助，请查看[https://stackoverflow.com/a/2750582/254973 。](https://stackoverflow.com/a/2750582/254973)

只需编辑该 php.ini 文件中的值，就可以了。可能会根据其配置重新启动网络服务器。

这很可能需要您的托管服务器上的提升/root 访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:04:02.433

检查 php.ini 文件的位置

php -i | grep php.ini

配置文件 (php.ini) 路径 => /usr/lib/lib 加载的配置文件 => /usr/lib/php.ini

像这样，用你最喜欢的编辑器编辑文件：记事本、vim、emacs、pico ......

pico /usr/lib/php.ini

搜索并更改内存限制并重新启动 apache。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T02:04:05.490

将 php ini memory_limit = 128M 更改为您想要的

# git - GitHub server-side clone repo

> ID：15261723
> 
> 赞同：1
> 
> 时间：2013-03-07T01:58:56.680
> 
> 标签：git, github, git-clone

On GitHub, I would like to create a clone of a repo. Not a branch or fork, but clone a repo into a new totally distinct repo. Hopefully I can accomplish this purely on the server-side ( i.e. not involving local repos ) and then git-clone the just-cloned repo to a local repo.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:21:39.370

Github 目前不支持无分叉的服务器端克隆。

要通过本地克隆复制 repo，您​​可以按照 Github 帮助文章[Duplicating a repo](https://help.github.com/articles/duplicating-a-repository)进行操作。

如果您有充分的理由不能克隆它并将其推回（例如，repo 大小是天文数字并且您不需要本地克隆，因为您正在为客户执行此操作），您可以尝试[联系 Github 支持](https://help.github.com/contact)并询问他们为你做。（同样，他们可能只会在你有充分理由的情况下才会这样做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:28:45.510

在你的 GitHub 帐户上创建一个新的 repo 并获取 URL，假设它是

```
https://github.com/baltostar/myproject.git 
```

克隆你感兴趣的仓库：

```
git clone https://github.com/otheruser/project.git
cd project 
```

将您的 GitHub 存储库添加为新的远程：

```
git remote add balto-github https://github.com/baltostar/myproject.git 
```

将您感兴趣的分支推送到您的新仓库中：

```
git push balto-github master 
```

或者`:`，如果现有分支不适合您，也可以选择使用语法为分支指定新名称：

```
git push balto-github localbranch:newbranchname 
```

从那里，您可以完全从头开始您的本地存储库

```
cd ..
rm -rf project 
```

# javascript - 将 childNodes 转换为下划线数组的最佳方法

> ID：15261725
> 
> 赞同：0
> 
> 时间：2013-03-07T01:59:15.457
> 
> 标签：javascript, arrays, underscore.js

我想将 Element 的 childNodes 转换为 javascript 中的数组。

如何将 childNodes 转换为数组？有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:53:13.633

我用 _.toArray() 做到了这一点

html部分：

```
<div id="testdiv"><div id="t1"></div><div id="t2"></div><div id="t3"></div><div id="t4"></div><div id="t5"></div></div> 
```

js：

```
var td = document.getElementById("testdiv");
console.log(_.toArray(td.childNodes)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:03:58.857

不需要下划线，我想到了：`[].concat.apply([],nodelist)`

但是，由于较旧的浏览器需要数组而不是类似数组的对象，因此它不适用于所有浏览器，所以我只使用它：

```
function toarray(obj) {
    var l = obj.length, i, out = [];
    for(i=0; i<l; i++) out[i] = obj[i];
    return out;
} 
```

这可能是最简单的方法，也是最兼容的。

# javascript - Javascript Object.defineProperty 设置方法触发属性更改

> ID：15261726
> 
> 赞同：2
> 
> 时间：2013-03-07T01:59:30.370
> 
> 标签：javascript, object, coffeescript, setter, ecmascript-5

以具有 details 属性的 Person 类的以下（咖啡脚本）示例为例，该类又具有自己的属性：

```
class Person
  constructor: ->
    details =
      name: ''
      age: 0

    Object.defineProperty this, 'details',
      enumerable: yes
      get: => details
      set: (value) =>
        console.log 'set details:', value
        details = value

p = new Person

# does NOT trigger details set()
p.details.name = 'Simon'

# DOES trigger details set(), but takes a bit of effort...
details = p.details
details.name = 'Someone else'
p.details = details 
```

显然，如果我只是将姓名和年龄定义为 Person 类的属性，我可以避免这个问题，但这只是一个示例。

是否有任何简单的方法可以让我的详细信息 set() 方法在其属性更改时触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:15:40.013

并不真地。至少不简单。

`p`与 完全不同的对象`p.details`。修改`p.details`根本不会改变任何事情`p`。所以它不会收到消息。

您需要做的是安装一些代码，使 details 对象在其自身属性发生更改时向其父对象发送消息。这也意味着它需要知道它的父母是什么。

```
class Person
  constructor: ->
    details =
      name: ''
      age: 0

    Object.defineProperty this, 'details',
      enumerable: yes
      get: -> details
      set: (value) ->
        console.log 'set details:', value
        details = value

        # set parent object to tell when something changes
        value._parent = this

        # create a name setter, which tells it's parent when it changes.
        Object.defineProperty details, 'name',
          enumerable: yes
          get: -> @_name
          set: (value) ->
            @_parent.didUpdateDetails()

     # trigger setter to install hook
     @details = details

   didUpdateDetails: ->
     console.log 'Updated details!'

p = new Person
p.details.name = 'Alex'
# logs: "Updated details!" 
```

是的，这确实有效：http: [//jsfiddle.net/PkyaU/1/](http://jsfiddle.net/PkyaU/1/)

但老实说，这有点疯狂。你确定这是你需要做的吗？也许你应该重新考虑你的方法。

# javascript - 使用 jQuery 访问两种类型的输入

> ID：15261734
> 
> 赞同：1
> 
> 时间：2013-03-07T02:00:36.223
> 
> 标签：javascript, jquery, jquery-selectors

我有以下代码：

```
$('input[type="text"]').each(function(indx){ 
```

目前，这允许访问类型为文本的输入，但如果我想访问 type="text" 和 type="password" 的输入怎么办。

我该如何设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T02:02:00.753

您可以使用[Multiple Selector](http://api.jquery.com/multiple-selector/)，它只是逗号分隔选择器的一个花哨名称（与您在 CSS 中使用的相同）：

```
$('input[type="text"],input[type="password"]').each(function(indx){ 
```

# mysql - 如何将 csv 数据文件复制到 Amazon RedShift？

> ID：15261743
> 
> 赞同：18
> 
> 时间：2013-03-07T02:02:08.043
> 
> 标签：mysql, csv, amazon-redshift

我正在尝试将一些 MySQL 表迁移到 Amazon Redshift，但遇到了一些问题。

步骤很简单： 1\. 将 MySQL 表转储到 csv 文件 2\. 将 csv 文件上传到 S3 3\. 将数据文件复制到 RedShift

第 3 步出现错误：

SQL 命令是：

> 从 's3://ciphor/TABLE_A.csv' 复制 TABLE_A CREDENTIALS 'aws_access_key_id=xxxx;aws_secret_access_key=xxxx' delimiter ',' csv;

错误信息：

> 执行 SQL 命令时出错：copy TABLE_A from 's3://ciphor/TABLE_A.csv' CREDENTIALS 'aws_access_key_id=xxxx;aws_secret_access_key=xxxx ERROR: COPY CSV is not supported [SQL State=0A000] Execution time: 0.53s 1 个语句失败。

我不知道 csv 文件的格式是否有任何限制，比如分隔符和引号，我在文档中找不到它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T04:10:08.777

问题最终通过使用解决：

> 从 's3://ciphor/TABLE_A.csv' 复制 TABLE_A CREDENTIALS 'aws_access_key_id=xxxx;aws_secret_access_key=xxxx' delimiter ',' removequotes;

更多信息可以在这里找到[http://docs.aws.amazon.com/redshift/latest/dg/r_COPY.html](http://docs.aws.amazon.com/redshift/latest/dg/r_COPY.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-19T20:12:49.310

现在 Amazon Redshift 支持 COPY 命令的 CSV 选项。最好使用此选项正确导入 CSV 格式的数据。格式如下所示。

```
COPY [table-name] FROM 's3://[bucket-name]/[file-path or prefix]'
CREDENTIALS 'aws_access_key_id=xxxx;aws_secret_access_key=xxxx' CSV; 
```

默认分隔符是 ( , )，默认引号是 ( " )。您也可以像这样使用 CSV 和 DELIMITER 选项导入 TSV 格式的数据。

```
COPY [table-name] FROM 's3://[bucket-name]/[file-path or prefix]'
CREDENTIALS 'aws_access_key_id=xxxx;aws_secret_access_key=xxxx' CSV DELIMITER '\t'; 
```

使用旧方法（DELIMITER 和 REMOVEQUOTES）有一些缺点，REMOVEQUOTES 不支持在封闭的文件中包含换行符或分隔符。如果数据可以包含此类字符，则应使用 CSV 选项。

有关详细信息，请参阅以下链接。

[http://docs.aws.amazon.com/redshift/latest/dg/r_COPY.html](http://docs.aws.amazon.com/redshift/latest/dg/r_COPY.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T12:21:51.210

如果您想为自己保存一些代码/您有一个非常基本的用例，您可以使用 Amazon Data Pipeline。它统计一个现场实例并在亚马逊网络中执行转换，它是非常直观的工具（但非常简单，所以你不能用它做复杂的事情）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T12:33:28.240

你可以试试这个

从 's3://ciphor/TABLE_A.csv' CREDENTIALS 'aws_access_key_id=xxxx;aws_secret_access_key=xxxx' csv 复制 TABLE_A；

CSV 本身表示逗号分隔值，无需为此提供分隔符。请参考链接。

[ [http://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html#copy-format]](http://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html#copy-format])

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-01T16:19:15.483

我总是这个代码：

```
COPY clinical_survey
FROM 's3://milad-test/clinical_survey.csv' 
iam_role 'arn:aws:iam::123456789123:role/miladS3xxx'
CSV
IGNOREHEADER 1
; 
```

**描述**：
1- 复制 S3 中文件存储的名称
2- 文件的 FROM 地址
3- iam_role 是 CREDENTIAL 的替代品。请注意，iam_role 应在控制台的 iam 管理菜单中定义，然后在 trust 菜单中也应分配给用户（这是最难的部分！）
4- CSV 使用逗号分隔符
5- IGNORHEADER 1 是必须的！否则会抛出错误。（跳过我的 CSV 的一行并将其视为标题）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-23T15:34:25.520

看起来您正在尝试将本地文件加载到 REDSHIFT 表中。CSV 文件必须在 S3 上才能使 COPY 命令起作用。

如果您可以将数据从表中提取到 CSV 文件，那么您还有一个脚本选项。您可以使用 Python/boto/psycopg2 组合将您的 CSV 加载脚本写入 Amazon Redshift。

在我的[MySQL_To_Redshift_Loader 中](https://github.com/redshift-tools/mysql-to-redshift-loader/blob/master/mysql_to_redshift_loader.py)，我执行以下操作：

1.  将 MySQL 中的数据提取到临时文件中。

    ```
    loadConf=[ db_client_dbshell ,'-u', opt.mysql_user,'-p%s' % opt.mysql_pwd,'-D',opt.mysql_db_name, '-h', opt.mysql_db_server]    
    ...
    q="""
    %s %s
    INTO OUTFILE '%s'
    FIELDS TERMINATED BY '%s'
    ENCLOSED BY '%s'
    LINES TERMINATED BY '\r\n';
    """ % (in_qry, limit, out_file, opt.mysql_col_delim,opt.mysql_quote)
    p1 = Popen(['echo', q], stdout=PIPE,stderr=PIPE,env=env)
    p2 = Popen(loadConf, stdin=p1.stdout, stdout=PIPE,stderr=PIPE)
    ... 
    ```

2.  使用 boto Python 模块和分段上传将数据压缩并加载到 S3。

    ```
    conn = boto.connect_s3(AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY)
    bucket = conn.get_bucket(bucket_name)
    k = Key(bucket)
    k.key = s3_key_name
    k.set_contents_from_file(file_handle, cb=progress, num_cb=20, 
    reduced_redundancy=use_rr ) 
    ```

3.  使用 psycopg2 COPY 命令将数据附加到 Redshift 表。

    ```
    sql="""
    copy %s from '%s' 
    CREDENTIALS 'aws_access_key_id=%s;aws_secret_access_key=%s' 
    DELIMITER '%s' 
    FORMAT CSV %s 
    %s 
    %s 
    %s;""" % (opt.to_table, fn, AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY,opt.delim,quote,gzip, timeformat, ignoreheader) 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-24T10:55:34.950

由于已经提供了解决方案，我将不再重复显而易见的事情。

但是，如果您收到更多无法解决的错误，只需在连接到任何 Redshift 帐户时在工作台上执行：

```
select * from stl_load_errors [where ...]; 
```

stl_load_errors 以历史方式包含所有 Amazon RS 加载错误，普通用户可以查看与他/她自己的帐户对应的详细信息，但超级用户可以拥有所有访问权限。

详细信息请参阅： [Amazon STL 加载错误文档](http://docs.aws.amazon.com/redshift/latest/dg/r_STL_LOAD_ERRORS.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-11T08:37:33.993

评论有点晚了，但它可能很有用：-

您可以使用开源项目将表直接从 mysql 复制到 redshift- [sqlshift](https://github.com/goibibo/SqlShift)。

它只需要火花，如果你有纱线，那么它也可以使用。

优点：- 它将使用主键自动决定**distkey**和**交错排序键。**

# symfony - 自定义资产过滤器开发 - 不断缓存？

> ID：15261744
> 
> 赞同：1
> 
> 时间：2013-03-07T02:02:18.633
> 
> 标签：symfony, filter, assetic

我在开发自定义资产过滤器时遇到问题。[我松散地按照此处找到的博客文章](http://richardmiller.co.uk/2011/05/24/symfony2-make-your-own-assetic-filter/)中的步骤进行操作，并且大部分情况下都可以正常工作。导致我挂断的事情是，如果我对`filterLoad`or`filterDump`方法进行更改，它通常会在第一次出现，但其他更改不会。似乎东西正在被缓存，但不在通常的 Symfony2 缓存目录中。到目前为止，这非常模糊，所以如果我可以提供任何其他信息，请告诉我。

变更示例：

```
public function filterLoad(AssetInterface $asset)
{
    $asset->setContent('this');
}

public function filterDump(AssetInterface $asset)
{

    $asset->setContent('that');
} 
```

# javascript - ?= 与 ||= 在 CoffeeScript 中

> ID：15261745
> 
> 赞同：0
> 
> 时间：2013-03-07T02:02:27.793
> 
> 标签：javascript, coffeescript, operators

我正在尝试为“如果未定义或初始化变量，则声明并初始化”选择一个可靠的运算符。

考虑一个例子（语义并不重要）：

```
window.test ?= 123

location.origin ||= location.protocol + "//" + location.host 
```

这将被翻译成以下 Javascript：

```
var _ref;

if ((_ref = window.test) == null) {
  window.test = 123;
}

location.origin || (location.origin = location.protocol + "//" + location.host); 
```

哪种方法更好？在我看来，`||=`操作符更可靠，因为它也解释了“未定义”但是为什么 CoffeeScript 提倡使用`?=`代替呢？我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T02:05:08.417

在 JavaScript 中，`undefined == null`¹，所以它确实解释了`undefined`. `||=`通常是不可取的，因为它会覆盖任何假值，即使它不是`null`or `undefined`，例如，零或假。

¹在 JavaScript 中，`==`有时会隐式强制值，其中一种情况是`null`and `undefined`。（参见[规范中第 11.9.3 节](http://es5.github.com/#x11.9.3)的第 2 和第 3 项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:46:05.537

> 我正在尝试为“如果未定义或初始化变量，则声明并初始化”选择一个可靠的运算符。

在符合 ECMA-262 的主机中，不可能有条件地声明变量。可以测试全局变量是否存在，因为它们是全局（窗口）对象的属性（但它不会告诉您它们是作为全局变量还是属性创建的）。要测试全局：

```
// In global scope:
var global = this;

// Wherever:
if (global.hasOwnProperty('foo')) { // throws an error in IE
  // foo is a property of the global object
} 
```

无法测试局部变量（例如在函数内），因为您无法访问变量对象或执行上下文对象来测试它，您所能做的就是测试`undefined`或使用`try..catch`（丑陋）。但需要这样做是非常糟糕的设计。

如果意图是有条件地创建全局对象的属性，那么上述导致：

```
if (!global.hasOwnProperty('foo')) { // throws an error in IE
  global.foo = 'whatever';
} 
```

但是，如果您还想测试该属性是否已被赋值，那么：

```
if (typeof global.foo == 'undefined') { // works everywhere 
```

似乎更合适，好像上面返回 true，然后它没有被声明，没有被赋值，或者被赋值为`undefined`. 在所有情况下，您现在可能都想分配一个值。

测试`null`似乎并不明智，因为它具有该值的唯一方法是显式分配它（这意味着该属性存在并且已被分配一个值）。

# java - 如何在java中从支持中计算置信度

> ID：15261748
> 
> 赞同：1
> 
> 时间：2013-03-07T02:02:43.563
> 
> 标签：java, data-mining, apriori

现在我正在开发一个程序，该程序获取对电影评分的用户列表并计算对所有电影的支持。我给我的程序一个我想计算的电影的最大数量、一个支持最小值和一个置信度最小值。

目前，我的程序计算对所有单部电影的支持，并将满足最低支持的电影打印到具有支持值的文件中。

然后，它从满足最低支持的单个电影继续，计算也满足最低支持的电影对，并将这些统计数据打印到新文件中。

这种情况一直持续到不再有满足最小支持或达到最大电影数量的电影对/集。

电影的最大数量是一个简单的整数。例如，如果我将其设置为 3，它将仅计算对单个电影、2 个电影对和 3 个电影集的支持，并将所有单曲、对和集及其各自的支持打印回每个文件。

我的一个输出文件的示例如下所示...

```
 99 195 347,0.21314952279957583
    99 343 347,0.24284199363732767
    99 343 361,0.23329798515376457
    99 347 361,0.23223753976670203
    343 347 361,0.20254506892895016 
```

这是三部电影的集合，空格分隔后跟一个“，”，然后是支持值。单个电影和电影对文件看起来完全相同，但在逗号前只有 1（或 2）个电影 ID。

注意：我有一个电影 ID（编号）到电影名称的映射，以便稍后打印。

我的问题......根据我所拥有的，有没有办法让我计算所有可能规则的置信度并打印/保存满足最低置信度百分比的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:58:41.677

嗯，**你试过什么？**

互联网上到处都是 APRIORI 伪代码，也有数百种实现。大多数人未能有效实施的部分是将候选人数量保持在最低限度的规则——你不想尝试所有大小为 3 或更大的组合。完成所有组合花费的时间太长而且毫无价值。

Apriori 的关键是下一轮候选者的生成和修剪。

另一方面，置信度定义非常简单。

计算一个规则，然后仅通过整个项目集和头部的支持来计算置信度。显然您已经获得了支持，因此计算置信度应该是对您的支持值数据库的两次查找。

# java - 使用 Spring MVC 上传文件

> ID：15261749
> 
> 赞同：1
> 
> 时间：2013-03-07T02:03:02.790
> 
> 标签：java, spring-mvc, file-upload

**更新：**我观察到传递空值的原因是`enctype="multipart/form-data"`，但需要该部分才能将文件传递给控制器​​。下面的问题仍然存在。

* * *

我一直在尝试设置一个允许用户上传文档的 Spring MVC 页面。我环顾四周，似乎对我应该如何实现这个（使用“commons-fileupload”和“commons-io”）有了一个大致的了解，所以以下是我的视图、控制器和模型。

看法：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<%@ page session="false" %>
<html>
<head>
<title>Upload Document</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">     

    </script>
    <script type="text/javascript" src="resources/rulesextractor.js"></script>
    <link rel="stylesheet" type="text/css" href="./resources/css/rulesextractor.css" />     
</head>
<body>
<c:import url = "./header.jsp">
    <c:param name = "title" value = "Upload Document"/>
    <c:param name = "region" value = "${region}"/>
</c:import>
<br>
    Please choose a Document to upload
<br>

<form:form method="POST" modelAttribute="uploadForm" commandName="uploadForm" name="uploadForm" id="uploadForm" enctype="multipart/form-data">
    <form:input path="fileData" name="fileData" type="file"/>
<br>
    <input type="submit" name="submit" value="Submit" id="subbtn"/>
    <input type="button" value="Main Menu" onclick="back();"/>
</form:form>

</body>
</html> 
```

控制器：

```
@Controller
public class UploadController extends BaseController {
private static final Logger logger = LoggerFactory.getLogger(FlowController.class);

//@Autowired
//private UserPreferences userPreferences;  

@Autowired 
GenericSearchBO genericSearchBO;

@RequestMapping(value = "upload", method = RequestMethod.GET)
public String getUploadPage(Model m){
    logger.info("UploadController: Getting Upload page");
    updateRegionOnModel(m);
    m.addAttribute(new UploadForm());
    return "/pages/upload";
}
@RequestMapping(method = RequestMethod.POST)
public String create(@Valid UploadForm UploadForm, BindingResult result){
    if (result.hasErrors())
    {
      for(ObjectError error : result.getAllErrors())
      {
        System.err.println("Error: " + error.getCode() +  " - " + error.getDefaultMessage());
      }
      return "/pages/upload";
    }

    // Some type of file processing...
    System.err.println("-------------------------------------------");
    //.getOriginalFilename()
    System.err.println("Test upload: " + UploadForm.getFileData());
    System.err.println("-------------------------------------------");

    return "redirect:/pages/upload";
}
} 
```

模型：

```
public class UploadForm {

private CommonsMultipartFile fileData;

public CommonsMultipartFile getFileData() {
    System.out.println("REACHED GET METHOD");
    return fileData;
}
public void setFileData(CommonsMultipartFile fileData) {
    System.out.println("REACHED SET METHOD");
    this.fileData = fileData;
}
} 
```

我是 Spring 和 MVC 的新手，但我正在慢慢掌握它。这里的问题是我实际上正在输入控制器的`public String create(@Valid UploadForm UploadForm, BindingResult result)`方法，但是 UploadForm 被作为空值传递，而我终其一生都无法弄清楚，这让我非常沮丧。任何帮助或提示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T22:27:21.227

在您的 servlet.xml 中，您必须添加：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="100000"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:00:41.107

这是使用 multipart/form-data 实现的

```
<form:form id="" action="xxx.do" method="post"
      modelAttribute="uploadFile"  enctype="multipart/form-data">  
<form:input path="data" id="data" type="file" />
</form:form> 
```

模型类

```
public class uploadFile{
       private CommonsMultipartFile data; 
       //getter and setter
} 
```

在控制器中

```
@RequestMapping(value = "/upload", method = RequestMethod.POST)  
public ModelAndView fileUpload(uploadFile fileuploaded,
                               BindingResult result, 
                               HttpSession session){
                       ...
} 
```

读取文件

```
BufferedReader br = new BufferedReader(
new InputStreamReader(fileuploaded.getFileData().getInputStream())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-04T02:35:10.840

```
index.jsp
<a href="uploadform">Upload Image</a>  
Emp.java
package com.javatpoint;  
import java.io.BufferedOutputStream;  
import java.io.File;  
import java.io.FileOutputStream;  
import javax.servlet.ServletContext;  
import javax.servlet.http.HttpServletRequest;  
import javax.servlet.http.HttpServletResponse;  
import javax.servlet.http.HttpSession;  
import org.apache.commons.fileupload.disk.DiskFileItemFactory;  
import org.apache.commons.fileupload.servlet.ServletFileUpload;  
import org.springframework.stereotype.Controller;  
import org.springframework.web.bind.annotation.ModelAttribute;  
import org.springframework.web.bind.annotation.RequestMapping;  
import org.springframework.web.bind.annotation.RequestMethod;  
import org.springframework.web.bind.annotation.RequestParam;  
import org.springframework.web.multipart.commons.CommonsMultipartFile;  
import org.springframework.web.servlet.ModelAndView;  

@Controller  
public class HelloController {  
    private static final String UPLOAD_DIRECTORY ="/images";  

    @RequestMapping("uploadform")  
    public ModelAndView uploadForm(){  
        return new ModelAndView("uploadform");    
    }  

    @RequestMapping(value="savefile",method=RequestMethod.POST)  
    public ModelAndView saveimage( @RequestParam CommonsMultipartFile file,  
           HttpSession session) throws Exception{  

    ServletContext context = session.getServletContext();  
    String path = context.getRealPath(UPLOAD_DIRECTORY);  
    String filename = file.getOriginalFilename();  

    System.out.println(path+" "+filename);        

    byte[] bytes = file.getBytes();  
    BufferedOutputStream stream =new BufferedOutputStream(new FileOutputStream(  
         new File(path + File.separator + filename)));  
    stream.write(bytes);  
    stream.flush();  
    stream.close();  

    return new ModelAndView("uploadform","filesuccess","File successfully saved!");  
    }  
}  
web.xml
<?xml version="1.0" encoding="UTF-8"?>  
<web-app version="2.5"   
    xmlns="http://java.sun.com/xml/ns/javaee"   
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">  
 <servlet>  
    <servlet-name>spring</servlet-name>  
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>  
    <load-on-startup>1</load-on-startup>  
</servlet>  
<servlet-mapping>  
    <servlet-name>spring</servlet-name>  
    <url-pattern>/</url-pattern>  
</servlet-mapping>  
</web-app>  
spring-servlet.xml
Here, you need to create a bean for CommonsMultipartResolver.

<?xml version="1.0" encoding="UTF-8"?>  
<beans xmlns="http://www.springframework.org/schema/beans"    
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    
    xmlns:p="http://www.springframework.org/schema/p"    
    xmlns:context="http://www.springframework.org/schema/context"    
    xsi:schemaLocation="http://www.springframework.org/schema/beans    
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd    
http://www.springframework.org/schema/context    
http://www.springframework.org/schema/context/spring-context-3.0.xsd">    

<context:component-scan base-package="com.javatpoint"></context:component-scan>  

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">  
<property name="prefix" value="/WEB-INF/jsp/"></property>  
<property name="suffix" value=".jsp"></property>  
</bean>  

<bean id="multipartResolver"   
class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>  

</beans>  
uploadform.jsp
Here form must be method="post" and enctype="multipart/form-data".

<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>  

<!DOCTYPE html>  
<html>  
 <head>  
 <title>Image File Upload</title>  
 </head>  
 <body>  
<h1>File Upload Example - JavaTpoint</h1>  

<h3 style="color:red">${filesuccess}</h3>  
<form:form method="post" action="savefile" enctype="multipart/form-data">  
<p><label for="image">Choose Image</label></p>  
<p><input name="file" id="fileToUpload" type="file" /></p>  
<p><input type="submit" value="Upload"></p>  
</form:form>  
</body>  
</html> 
```

# spring - Spring - 为什么在setter方法之后调用初始化

> ID：15261760
> 
> 赞同：0
> 
> 时间：2013-03-07T02:04:16.280
> 
> 标签：spring

只是好奇。

1.  为什么在setter方法之后进行bean初始化？我认为初始化最好在 setter 方法之前完成 - 比如在将值设置为实例成员之前进行验证以确保它是好的

2.  为什么 beanPostProcessor 在具有 beforeInitialization 方法时会考虑初始化后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:47:45.480

1.  据我了解，setter 等的调用被认为是设置 bean 初始状态的操作。如果没有 bean 集的初始状态，您将无法进行任何有意义的初始化。试想如果在setter之前进行初始化会发生什么：（假设我们使用的是setter注入，而不是ctor注入） bean是通过调用默认的ctor创建的，然后你调用初始化，那你可以初始化什么？bean 只是一个空白对象，没有正确注入依赖项。如果您可以在这种情况下进行初始化，则可以简单地将这种初始化放入您的 ctor 中。

2.  对于 BeanPostProcessor，我相信“post”不是指 post-initialize。它只是让您在创建 bean 之后进行后期处理（即后期创建）。因为通常在两个不同的时间进行这种后处理，即在 bean 初始化之前和之后。因此对于这两种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:14:39.717

1.  所以初始化可以使用 bean 上设置的值。
2.  因为它是一个*后*处理器。

# php - 将值传递给类 php

> ID：15261761
> 
> 赞同：0
> 
> 时间：2013-03-07T02:04:26.953
> 
> 标签：php, mysql, class

```
 <?php
class RegisterUser{
  var $email;
  var $password;
  var $password_hash;
  var $roleid;
  public function __construct($email, $password, $roleid){
    $this->email = $email;
    $this->password = $password;
    $this->roleid = $roleid;
    $this->addUsertoDB();
  }

  public function addUsertoDB(){
    $this->password_hash = md5($this->password);
    $checkemail = mysql_query("SELECT * FROM users WHERE (email ='" . mysql_real_escape_string($this->email) . "')");
    if(mysql_num_rows($checkemail) == 1){
      echo '<script type="text/javascript"> alert ("Email already used!");</script>';
    }
    else{
      $register = "INSERT INTO users(email, password, roleid) VALUES('$this->email', '$this->password_hash', '$this->$roleid')";
      if($query_run = mysql_query($register)){
        echo('<scrip type="text/javascript"> alert("Registration complete!"); location.replace("login")</script>');
      }
      else{
        die('<script type="text/javascript"> alert("Error inserting data!");</script>');
      }
    }
  }
}

$connect = new RegisterUser('carloadap@htomail.com', 123, 1);
?> 
```

这是我的代码，我一直收到错误，我不知道如何弄清楚。我希望你们做到了。

这是错误。

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 17 行的 C:\xampp\htdocs\myPHPWebsite\include\classRegister.php 中给出
> 
> 可捕获的致命错误：RegisterUser 类的对象无法在第 21 行的 C:\xampp\htdocs\myPHPWebsite\include\classRegister.php 中转换为字符串

更新

```
 <?php
require 'connectDB.php';
class RegisterUser{
  var $email;
  var $password;
  var $password_hash;
  var $roleid;
  public function __construct($email, $password, $roleid){
    $this->email = $email;
    $this->password = $password;
    $this->roleid = $roleid;
    $this->addUsertoDB();
  }

  public function addUsertoDB(){
    $this->password_hash = md5($this->password);
    $checkemail = mysql_query("SELECT * FROM users WHERE (email ='" . mysql_real_escape_string($this->email) . "')");
    if(mysql_num_rows($checkemail) == 1){
      echo '<script type="text/javascript"> alert ("Email already used!");</script>';
    }
    else{
      $register = "INSERT INTO users(email, password, roleid) VALUES('$this->email', '$this->password_hash', '$this->$roleid')";
      if($query_run = mysql_query($register)){
        echo('<scrip type="text/javascript"> alert("Registration complete!"); location.replace("login")</script>');
      }
      else{
        die('<script type="text/javascript"> alert("Error inserting data!");</script>');
      }
    }
  }
}

$connect = new RegisterUser('carloadap@htomail.com', 123, 1);
?> 
```

这是我得到的错误

> 连接到数据库！可捕获的致命错误：RegisterUser 类的对象无法在第 22 行的 C:\xampp\htdocs\myPHPWebsite\include\classRegister.php 中转换为字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:29:56.587

形成您给我们的错误

```
Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in
C:\xampp\htdocs\myPHPWebsite\include\classRegister.php on line 17 
```

似乎`$checkmail`值不是有效的`mysql_num_rows()`结果。检查您的查询，并尝试在您的数据库控制台上运行它（如果您使用的是 phpmyadmin）。

```
public function addUsertoDB(){
    ...
    $query = "SELECT * FROM users WHERE (email ='" . mysql_real_escape_string($this->email) . "')";
    checkemail = mysql_query($query) or die(mysql_errno() . " : " . mysql_error() . " : " . $query);
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:08:04.620

第一个错误是由您的 MySQL 中的某些错误引起的。尝试在
`if($e = mysql_error()) die("MySQL error: ".$e);`查询后添加。

除此之外，您可捕获的致命错误是由错误`$this->roleid`地写入引起的`$this->$roleid`。另请注意，您未能在该行上转义字符串，因此您很容易受到注入。仅保护第一个查询是不够的，您必须每次都这样做；）

# ios - NSPredicate 比较两个集合和多对多关系

> ID：15261762
> 
> 赞同：1
> 
> 时间：2013-03-07T02:04:27.873
> 
> 标签：ios, objective-c, core-data

两个模型类

```
AUser
- name

AGroup
- users 
```

组和用户共享多对多关系。

我想检查两组是否共享完全相同的用户（不是更多的用户或更少的用户）

但不幸的是，我收到以下错误：*此处不允许使用多键*

请注意，我查看了其他 SO 问题，但似乎没有一个适合，因为我在过去 2 小时内尝试使用他们的方法，但我无法让它发挥作用。或者至少我不太了解它们。

我的谓词也可以比较两个可变集吗？

```
- (BOOL)conversationExists:(NSMutableSet *)members {
    NSFetchRequest *request= [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"AGroup" inManagedObjectContext:_managedObjectContext];
    NSPredicate *predicate =[NSPredicate predicateWithFormat:@"users==%@",members]; 
    //There is more code that I have not shown here as it is irrelevant to the question
    //Mainly The NSPredicate line is the problem
} 
```

非常感谢您的参与。对此，我真的非常感激。

来自， *新 iOS 程序员*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:11:45.620

这篇文章有一个答案：[How to use the "ALL" aggregate operation in a NSPredicate to filter a CoreData-based collection](https://stackoverflow.com/questions/5302611/how-to-use-the-all-aggregate-operation-in-a-nspredicate-to-filter-a-coredata-b)

基本上是这样的：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(members, $member, $member IN %@).@count = %d", members, [members count]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T06:22:16.110

为什么它必须是谓词？

有什么问题`[[groups valueForKey:@"users"] isEqualToSet:members]`？

# c++ - X11 函数具有未定义的引用，但看起来没问题。IDE 不会抱怨这些库

> ID：15261767
> 
> 赞同：0
> 
> 时间：2013-03-07T02:05:13.727
> 
> 标签：c++, c, debian, x11, codeblocks

无法构建我的 C 程序。

我正在开发一个 v4l2 程序来激活我的网络摄像头并开始录制。我有几个包括：（它们都可以）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <getopt.h>             /* getopt_long() */
#include <unistd.h>
#include <errno.h>
#include <stdint.h>

#include <sys/ipc.h>
#include <sys/shm.h>
#include <X11/Xlib.h>
#include <X11/extensions/XShm.h> 
```

这些功能是 whitin /X11

我在 Eclipse、Netbeans 和 Code::Blocks 中出现了这个错误，所以我确信这是一个 SO 问题。他们不会抱怨找不到库或找不到内部引用（在我的包含中包含这些库的内部）。

我已经尝试过 Ubuntu 12、Debian 6 Squeezy 和 7 Wheezy。

```
||=== Build: Release in v4l2 (compiler: GNU GCC Compiler) ===|
obj/Release/viewer.o||In function `image_destroy':|
viewer.c|| undefined reference to `XDestroyImage'|
viewer.c|| undefined reference to `XFreeGC'|
viewer.c|| undefined reference to `XShmDetach'|
viewer.c|| undefined reference to `XFreePixmap'|
obj/Release/viewer.o||In function `image_create':|
viewer.c|| undefined reference to `XCreateGC'|
viewer.c|| undefined reference to `XGetWindowAttributes'|
viewer.c|| undefined reference to `XShmCreateImage'|
viewer.c|| undefined reference to `XShmAttach'|
viewer.c|| undefined reference to `XCreateImage'|
viewer.c|| undefined reference to `XShmQueryExtension'|
viewer.c|| undefined reference to `XShmPixmapFormat'|
viewer.c|| undefined reference to `XShmCreatePixmap'|
obj/Release/viewer.o||In function `image_put':|
viewer.c|| undefined reference to `XPutImage'|
viewer.c|| undefined reference to `XShmPutImage'|
obj/Release/viewer.o||In function `main':|
viewer.c:(.text.startup+0x186)||undefined reference to `XOpenDisplay'|
viewer.c:(.text.startup+0x1ac)||undefined reference to `XScreenOfDisplay'|
viewer.c:(.text.startup+0x1e9)||undefined reference to `XCreateSimpleWindow'|
viewer.c:(.text.startup+0x244)||undefined reference to `XMapRaised'|
viewer.c:(.text.startup+0x25e)||undefined reference to `XStoreName'|
viewer.c:(.text.startup+0x27b)||undefined reference to `XGetWindowAttributes'|
viewer.c:(.text.startup+0x8c6)||undefined reference to `XPending'|
viewer.c:(.text.startup+0x8e3)||undefined reference to `XNextEvent'|
viewer.c:(.text.startup+0xa85)||undefined reference to `XPending'|
viewer.c:(.text.startup+0xaa2)||undefined reference to `XNextEvent'|
viewer.c:(.text.startup+0xedf)||undefined reference to `XPending'|
viewer.c:(.text.startup+0xefc)||undefined reference to `XNextEvent'|
||=== Build failed: 26 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===| 
```

我正在使用debian 7 Wheeze ...我正在尝试以这种方式编译：gcc -O2 -L/usr/X11R6/lib -lX11 -lXext -o viewer viewer.c

这条路径不存在，我怎样才能找到正确的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:45:27.597

在系统上其他一些动态链接的 X 程序的路径上运行 ldd 以查看库的加载位置。例如

```
ldd /usr/bin/gnome-session 
```

# soap - IDEONE 的 SOAP 有效负载示例

> ID：15261770
> 
> 赞同：0
> 
> 时间：2013-03-07T02:05:37.870
> 
> 标签：soap

有没有人获得 ideone.com 服务的示例 SOAP 有效负载？

我已经尝试了几个客户端，包括 Firefox SOA 客户端（从服务返回错误）、在读取 wsdl 时崩溃的 360Works java soap 客户端以及什么都不返回的在线 soapclient.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:27:54.430

我尝试了您提到的两个 SOAP 客户端，soapclient.com 和 Firefox SOA，并成功访问了 ideone.com 上的服务。

首先，确保您在尝试服务时使用的是 API 密码，而不是站点密码。

使用soapclient.com，确保您以XML 格式查看结果。如果您选择 HTML（他们的选项之一），您将看不到任何内容。

对于这两个客户端，如果此字段的值为“OK”，请确保您不会将键名称为“error”的状态解释为表示已返回错误。这表明成功。

# ruby-on-rails-3 - Rails 应用程序的安全会话 cookie

> ID：15261772
> 
> 赞同：4
> 
> 时间：2013-03-07T02:05:45.187
> 
> 标签：ruby-on-rails-3, https, devise, session-cookies

我的 session_store.rb 中有以下配置

```
Fuel::Application.config.session_store :cookie_store,
  :key => "_secure_session",
  :secure => !(Rails.env.development? || Rails.env.test?),
  :domain => :all 
```

在 application_controller.rb

```
def default_url_options
  return { :only_path => false, :port => 443, :protocol => 'https' }
end 
```

我正在使用设计，我的 rails3 服务器在 HAProxy 后面运行。HAProxy 终止 HTTPS 流量并将 HTTP 请求传递给 Rails。我的问题是当我在 session_store.rb 中打开 :secure => true 时，用户被重定向回登录页面，并显示消息“未授权”。我已经尝试了很多调试它，不知道如何让它工作。

在这种情况下，HAProxy 是终止所有安全流量并将非安全流量传递到 rails 的反向代理。当 rails 将 cookie 设置为安全时，它本身无法访问它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-15T20:25:16.727

对于您的正常会话 cookie，您正确地执行了此操作。您应该会在浏览器中看到“_secure_session”cookie 被正确设置为安全。对于设计“记住我”cookie，您需要在设计配置中进行设置。在 config/initializers/devise.rb 中，您会在第 133 行附近的某处找到一条线，看起来像

```
# Options to be passed to the created cookie. For instance, you can set
# :secure => true in order to force SSL only cookies.
# config.cookie_options = {} 
```

我将其更改为：

```
config.rememberable_options = {:secure => Rails.env.production?} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:17:22.423

如果在初始身份验证时没有将 Set-cookie 发送到浏览器，那么这听起来像是一个设计问题。

如果 Set-cookie 将发送到浏览器，但没有在下一个 https:// 请求中被发回，那么它可能与 :secure => 设置不匹配。

如果 cookie 是由浏览器发送的，但不是由 HAProxy 传递的，那么这是 HAProxy 配置问题。

如果 cookie 在 ruby​​ 环境中，并且由于策略而被忽略，那么它是 Ruby 代码中的某个地方的问题 - 猜测，围绕安全/不安全 cookie 匹配。

# intuit-partner-platform - 必须指定到期日和到期日之一以指示期限类型

> ID：15261773
> 
> 赞同：0
> 
> 时间：2013-03-07T02:05:47.200
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在使用 .Net 的 ipp devkit 2.0 并尝试添加一个名为 Due on Receipt 的新销售条款。这个销售期限的到期日为 0。如果我去 QB Online 并使用 UI 添加到期日为 0 的收货到期，它可以正常工作。但是，当我尝试使用 devkit 添加它时，我不断收到错误消息

“验证销售期限类型时出错：必须指定到期日和到期日之一以指示期限类型。”

如何创建一个名为“收据到期”的术语？

我使用的代码如下：

```
qboSalesTerm.ItemsElementName = new Intuit.Ipp.Data.Qbo.ItemsChoiceType3[]
                {
                    Intuit.Ipp.Data.Qbo.ItemsChoiceType3.DueDays,
                    Intuit.Ipp.Data.Qbo.ItemsChoiceType3.DiscountDays,
                    Intuit.Ipp.Data.Qbo.ItemsChoiceType3.DiscountPercent
                };
        qboSalesTerm.Items = new object[]
                {
                    DueDays,
                    DiscountDays,
                    DiscountPercent
                }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:48:49.447

如果您想要 0 DueDays，您应该设置该变量。

但是，QBO IDS V2 中似乎存在一个错误，不允许您将 DueDays 设置为 0。

我已经提交了一个错误 - QBO-10473。

一旦你得到这个集合，你应该得到以下错误：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<FaultInfo xmlns="http://www.intuit.com/sb/cdm/baseexceptionmodel/xsd">
    <Message>Error validating Due Days:Invalid integer.
</Message>
    <ErrorCode>TERM_REQUEST_BAD</ErrorCode>
    <Cause>TERM_INVALID_DUE_DAYS</Cause>
</FaultInfo> 
```

# cordova - 升级到 PhoneGap 2.5.0 时出现 Xcode 链接器错误

> ID：15261774
> 
> 赞同：9
> 
> 时间：2013-03-07T02:05:52.640
> 
> 标签：cordova, ios6

按照PhoneGap Documentation的指南升级他们的库，我没有任何问题。但是，当我检查时`device.cordova`，它显示“2.3.0”，这是我以前的版本。

当我安装cordova.2.3.0时，我确实运行了

```
[phonegap-2.3.0]/bin/update_cordova_subproject [myproject] 
```

因为该项目是从其他计算机复​​制过来的。认为它显示 2.3.0 因为我使用该 CordovaLib 子项目的绝对路径，所以我再次更新我的子项目

```
[phonegap-2.5.0]/bin/update_cordova_subproject [myproject] 
```

现在，当我构建项目时，出现此错误

```
Undefined symbols for architecture armv7:
  "_ALAssetPropertyDate", referenced from:
      ___23-[CDVFile getMetadata:]_block_invoke in libCordova.a(CDVFile.o)
      ___27-[CDVFile getFileMetadata:]_block_invoke in libCordova.a(CDVFile.o)
  "_OBJC_CLASS_$_ALAssetsLibrary", referenced from:
      objc-class-ref in libCordova.a(CDVFile.o)
      objc-class-ref in libCordova.a(CDVFileTransfer.o)
      objc-class-ref in libCordova.a(CDVURLProtocol.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谁能帮我解决错误？或者至少让我知道这些错误是什么意思？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T07:12:46.537

As Gary mentioned, you need to add the AssetsLibrary.framework. Add it from the Linked and Frameworks list. Now what happened to me is twas added at the root of the project tree, you can just drag it down to the Frameworks folder.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-07T02:09:53.323

看起来您需要链接到 AssetsLibrary.framework

# bash - Capistrano 设置配置环境变量

> ID：15261778
> 
> 赞同：1
> 
> 时间：2013-03-07T02:06:35.817
> 
> 标签：bash, capistrano, web-deployment

我很震惊，我无法通过谷歌搜索找到它，但我想知道如何设置 capistrano 部署，其中环境变量存储重要的配置变量（api 密钥等）。我知道如何在代码中访问它们，只是无法设置环境变量。

我正在运行 Ubuntu 12.10 X64 服务器，而 capistrano 似乎没有加载我的 .bashrc 文件。

我可以将环境变量放在哪里，以便在运行任何命令时加载它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:31:09.993

您可以通过创建`~/.ssh/environment`文件来设置环境变量，如下所示：

```
PATH=/opt/bin:/usr/local/bin:/usr/bin:/bin
朗=C

```

请注意，您应该设置`PermitUserEnvironment`为`yes`并`/etc/ssh/sshd_config`重新启动`sshd`守护程序。

# c++ - 将字符串文字读入指针时出现令人尴尬的错误

> ID：15261783
> 
> 赞同：-3
> 
> 时间：2013-03-07T02:07:35.407
> 
> 标签：c++, pointers, hexdump

我觉得这个帖子有点迟钝，但我不知道为什么我的程序在从键盘读取字符串文字时会爆炸（即，然后将其分配给指针）。

调试了一个多小时，程序从键盘读取时一直在爆炸。

我已经尝试了一切来解决这个问题。将字符串初始化为字符串文字（即编译器说它有 nullptr 的问题）。这几乎就像我在某个地方有一个看不见的角色。如果有人能告诉我我做错了什么，我将不胜感激。

**主文件**

```
#define _CRTDBG_MAP_ALLOC
#include <crtdbg.h>

#include <iostream>
#include <fstream>
#include "protocol.h"

int main()
{
_CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);

int menuChoice = 0;

char * fileName = nullptr;
char * byteArray = nullptr;
char * hexArray = nullptr;
int numberOfBytes = 0;

PrintMenu();
GetMenuChoice(menuChoice);
ExecuteMenuChoice(menuChoice, fileName, byteArray, hexArray, numberOfBytes);

return 0;
} 
```

**协议.cpp**

```
void GetFile(char * fileName)
{

//Prompt user for binary file
std::cout << "\nEnter filename: " << std::endl;

//Read in location of binary file
std::cin.ignore(std::cin.rdbuf()->in_avail());
std::cin.getline(fileName, 256);
std::cin.clear();
std::cin.ignore(std::cin.rdbuf()->in_avail());
} 
```

**协议.h**

```
#ifndef PROTOCOL_H
#define PROTOCOL_H

//Function declarations
void PrintMenu();
void GetMenuChoice(int &menuChoice);
void ExecuteMenuChoice(int menuChoice, char *& fileName, char *& byteArray,
                   char *& hexArray, int numberOfBytes);
void NewLine();
void ThankUser();
void ErrorMessage();

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:13:11.547

您发布的代码不完整，但我没有看到您在调用`std::cin.getline(fileName, 256)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:13:26.123

我没有看到你*打电话* `GetFile`的任何地方，但看起来它需要一个分配的缓冲区或一个字符数组。在`main()`您声明 a`char *fileName`但不为其分配任何内存。如果您致电 (from `main()`) `GetFile(fileName)`，那么我预计它会崩溃。您要么需要分配空间，要么需要分配空间`main()`来`GetFile()`读取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:23:07.670

传递要填充的字符串文字没有任何意义。您需要传递一个缓冲区：

```
#include <iostream>
#include <fstream>
#include <stdlib.h> // for _MAX_PATH

int main()
{
    char filename[_MAX_PATH];

    GetFile(filename);

    std::cout << filename << std::endl;
} 
```

[**`_MAX_PATH`**](http://msdn.microsoft.com/en-us/library/930f87yf.aspx)比硬编码一个像`256`.

更好的是使用 a[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)并完全删除这些缓冲区大小！

```
#include <iostream>

void GetFile(std::string& fileName)
{
    std::cout << "\nEnter filename: " << std::endl;

    std::getline(std::cin, fileName);
}

int main()
{
    std::string filename;

    GetFile(filename);

    std::cout << filename << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T02:26:14.660

cin::getline() 不会为您分配内存来将字符串文字存储到`fileName`. 您必须通过分配内存来为其提供内存空间`fileName`，就像

```
fileName = new char[_MAX_PATH]; 
```

最后，别忘了释放内存

```
delete[] fileName; 
```

# r - 通过 R 中的 xts 进行动态周期子集

> ID：15261785
> 
> 赞同：2
> 
> 时间：2013-03-07T02:07:42.037
> 
> 标签：r, time-series, xts

假设我们有一个 OHLC 的 xts 对象返回 SPX ( `SPX`)的系列

如果我想动态地对这些回报进行子集化，以便我们可以将`Business Day 9`每个月的期间子集`2 business days before the end of the month`化为 ，那么使用 xts 执行此操作的最有效方法是什么？

我尝试过嵌套一些`.index`/`xts`函数的组合，例如

```
SPX[.indexmday(SPX)==1] 
```

以及一些日期功能，`RQuantLib`但`lubridate`成功程度不同。

我敢肯定有一种相当方便和有效的方法来做这个任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:24:56.370

`head`这是一种对and使用负值的方法`tail`：

```
SPX <- getSymbols("^GSPC", src="yahoo", auto.assign=FALSE)
do.call(rbind, lapply(split(SPX, 'months'), function(x) tail(head(x, -2), -9))) 
```

它按“月”分割，然后对每个月应用一个函数。该函数获取除前 9 天之外的所有`xts`. 最后，`rbind`将结果组合成一个`xts`对象。

**编辑：**

您可以使用`xts::first`and`xts::last`代替`head`and`tail`以便它可以使用除每日以外的频率。

```
do.call(rbind, lapply(split(SPX, 'months'), function(x) {
  first(xts::last(x, "-2 days"), "-9 days")
})) 
```

**更新地址评论：**

如果要对子集进行其他操作，则需要检查以确保至少有 1 行数据。如果对于给定的月份，您的 xts 对象在 9 号之后和 2 号到最后一天之前没有天，则上面的匿名函数将返回`NULL`.

```
do.call(rbind, lapply(split(SPX, 'months'), function(x) {
  dat <- first(xts::last(x, "-2 days"), "-9 days")
  if (NROW(dat) > 0) OpCl(dat)
})) 
```

尽管在这种情况下，您只需调用`OpCl()`我原始答案的结果即可获得相同的结果。

```
tmp <- do.call(rbind, lapply(split(SPX, 'months'), function(x) {
  first(xts::last(x, "-2 days"), "-9 days")
}))
OpCl(tmp) 
```

# ios - 文字转语音iphone应用

> ID：15261786
> 
> 赞同：0
> 
> 时间：2013-03-07T02:07:45.483
> 
> 标签：ios

晚上好，

我正在寻找用于 iphone 应用程序开发的简单文本到语音。我看到很多关于这个的帖子，包括...

[iPhone 的文本到语音库](https://stackoverflow.com/questions/12839671/text-to-speech-libraries-for-iphone/12839821#12839821)

问题虽然，这个链接是所有第三方开发人员使用文本到语音。我认为苹果有一个类参考来创建演讲？（nsspeechsynthesizer）有人可以解释一下吗？苹果不为我们提供这个吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-20T12:06:21.123

iOS 7 有 AVSpeechSynthesizer 类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T02:14:58.437

NSSpeechSynthesizer 在 Mac 上运行良好。VSSpeechSynthesizer 可用于 iOS - 但它是一个私有 API，因此可能会被应用商店拒绝。但是，您仍然可以制作应用程序供私人消费。我认为这是一个错误，因为它使得为视力不佳的人创建可访问的应用程序变得更加困难。我已提交错误 ID #：9451650 错误标题：VSSpeechSynthesizer 是私有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T02:13:15.010

正如其他答案所提到的，Apple 在 iOS 中不包含 NSSpeechSynthesizer，仅在 Mac OS X 中包含。

# pthreads - 分离线程的 Pthread 库清理

> ID：15261787
> 
> 赞同：0
> 
> 时间：2013-03-07T02:07:48.570
> 
> 标签：pthreads

我试图弄清楚 NPTL 在退出时如何清理分离线程的资源（堆栈空间等）。可加入线程很容易，调用 pthread_join 等待特定线程退出，然后回收其资源。没问题，但是 NPTL 怎么知道一个分离的线程已经退出呢？有谁知道或至少知道谁会知道？

谢谢， 丰富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:01:43.490

线程函数返回后，NPTL会检查线程是否被分离，如果分离则直接释放线程的所有内容，如果加入则将线程控制块（TCB）留给pthread_join释放TCB。

有关详细信息，[http:](http://raison.gegahost.net/?p=91) //raison.gegahost.net/?p=91可能会有所帮助。

# python - Python：替换重音符号（é 到 e）、删除 [^a-zA-Z\d\s] 和 lower() 的有效方法

> ID：15261793
> 
> 赞同：15
> 
> 时间：2013-03-07T02:08:35.630
> 
> 标签：python, regex

使用 Python 3.3。我想做以下事情：

*   用基本字符（例如 ô 到 o）替换特殊的字母字符，例如 e 锐音 (é) 和 o 抑扬符 (ô)
*   删除除字母数字和字母数字字符之间的空格以外的所有字符
*   转换为小写

这是我到目前为止所拥有的：

```
mystring_modified = mystring.replace('\u00E9', 'e').replace('\u00F4', 'o').lower()
alphnumspace = re.compile(r"[^a-zA-Z\d\s]")
mystring_modified = alphnumspace.sub('', mystring_modified) 
```

我该如何改进呢？效率是一个大问题，特别是因为我目前正在循环内执行操作：

```
# Pseudocode
for mystring in myfile:
    mystring_modified = # operations described above
    mylist.append(mystring_modified) 
```

有问题的文件每个大约有 200,000 个字符。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-07T02:12:48.983

```
>>> import unicodedata
>>> s='éô'
>>> ''.join((c for c in unicodedata.normalize('NFD', s) if unicodedata.category(c) != 'Mn'))
'eo' 
```

还可以查看[unidecode](https://pypi.python.org/pypi/Unidecode)

> Unidecode 提供的是一条中间道路：函数 unidecode() 获取 Unicode 数据并尝试用 ASCII 字符（即 0x00 和 0x7F 之间的通用显示字符）来表示它，其中选择在两个字符集之间映射时采取的折衷方案是接近拥有美式键盘的人的选择。
> 
> 生成的 ASCII 表示的质量各不相同。对于源自西方的语言，它应该介于完美和良好之间。另一方面，中文、日文或韩文等语言的音译（即用罗马字母传达文本在其他书写系统中表达的发音）是一个非常复杂的问题，这个图书馆甚至没有尝试解决它。它在上下文无关的逐个字符映射中画线。因此，一个好的经验法则是，您要音译的脚本离拉丁字母越远，音译就会越差。
> 
> 请注意，此模块通常比简单地从字符中去除重音（这可以在 Python 中使用内置函数完成）产生更好的结果。它基于手动调整的字符映射，例如还包含符号和非拉丁字母的 ASCII 近似值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T02:23:43.747

您可以使用[str.translate](http://docs.python.org/3.3/library/stdtypes.html#str.translate)：

```
import collections
import string

table = collections.defaultdict(lambda: None)
table.update({
    ord('é'):'e',
    ord('ô'):'o',
    ord(' '):' ',
    ord('\N{NO-BREAK SPACE}'): ' ',
    ord('\N{EN SPACE}'): ' ',
    ord('\N{EM SPACE}'): ' ',
    ord('\N{THREE-PER-EM SPACE}'): ' ',
    ord('\N{FOUR-PER-EM SPACE}'): ' ',
    ord('\N{SIX-PER-EM SPACE}'): ' ',
    ord('\N{FIGURE SPACE}'): ' ',
    ord('\N{PUNCTUATION SPACE}'): ' ',
    ord('\N{THIN SPACE}'): ' ',
    ord('\N{HAIR SPACE}'): ' ',
    ord('\N{ZERO WIDTH SPACE}'): ' ',
    ord('\N{NARROW NO-BREAK SPACE}'): ' ',
    ord('\N{MEDIUM MATHEMATICAL SPACE}'): ' ',
    ord('\N{IDEOGRAPHIC SPACE}'): ' ',
    ord('\N{IDEOGRAPHIC HALF FILL SPACE}'): ' ',
    ord('\N{ZERO WIDTH NO-BREAK SPACE}'): ' ',
    ord('\N{TAG SPACE}'): ' ',
    })
table.update(dict(zip(map(ord,string.ascii_uppercase), string.ascii_lowercase)))
table.update(dict(zip(map(ord,string.ascii_lowercase), string.ascii_lowercase)))
table.update(dict(zip(map(ord,string.digits), string.digits)))

print('123 fôé BAR҉'.translate(table,)) 
```

产量

```
123 foe bar 
```

* * *

不利的一面是，您必须列出所有要翻译的特殊重音字符。@gnibbler 的方法需要更少的编码。

从好的方面来说，该`str.translate`方法应该相当快，并且一旦`table`设置好，它就可以在一个函数调用中处理您的所有要求（缩小、删除和删除重音符号）。

* * *

顺便说一句，200K 字符的文件不是很大。因此，将整个文件读入单个`str`，然后在一个函数调用中翻译它会更有效。

# file-io - Windows 8，打印到 PostScript 打印机到文件

> ID：15261795
> 
> 赞同：2
> 
> 时间：2013-03-07T02:08:56.287
> 
> 标签：file-io, printing, ghostscript

我错过了一些愚蠢的简单事情吗？

我有一台新的 Windows 8 机器...... 64 位。从旧机器上的应用程序中，我生成报告输出到“通用 PostScript 打印机”，该打印机配置为发送到 FILE（不是 LPT、COM、TCP/IP）。

在尝试应用程序时，它无法将输出生成到所提供的文本文件中。

所以，我将我的应用程序排除在外。我只是去控制面板，选择这台打印机，然后告诉 Windows 打印机对话框进行测试打印。它会出现一个对话框来输入文件名，然后我将它放入一个我拥有完全权限的文件夹中......它失败了......我什至尝试以“管理员”的身份删除任何可能的“权限”问题，但它仍然失败。

我在原本应该如此简单的东西上遗漏了什么，即使是 MS 对话框/测试打印也不起作用。

* * *

```
To clarify what I DID do..
Control Panel - get to devices / printers
Add Printer -- clicked on the "printer not found"
Radio for "Add a local printer or network printer..." -- next
Use an existing port -- FILE: (Print to File)   -- next
Manufacturer - Generic  -- Printers - Generic XPS Class Driver (A) -- next
(used the driver already installed since I tried previously) -- next
Printer name: -- left alone by default of "Generic Color XPS Class Driver (A) -- next
Do not share this printer -- next
Print a test page -- dialog defaults to "Libraries\Documents\", I entered myTest.prn -- Save
It APPEARS to generate the file... however, it only creates the file as a zero-byte size 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:18:56.743

更新......在挖掘和挣扎的同时，我实际上向微软开了一张支持票。他们已经确认这个特定过程是一个错误，并将在补丁上工作（准备好后与其他补丁一起交付）。

另一个更新！

显然，我从 DELL 购买的机器只有 Windows 8 BASIC 版本。通过多次来回的支持电话，当尝试使用安装了 Windows 的新机器提供的默认驱动程序中的某些打印机驱动程序（例如 Microsoft PS 彩色打印机 - 用于 Post-Script 输出）时，这是一个特定的问题。

我们的工作。

为了笑，我最终去了惠普的网站（惠普打印机有多普遍：），下载了 2500 LaserJet 的打印机驱动程序并安装了那个版本的 PostScript 打印机。安装它并尝试输出后，我可以毫无问题地将输出生成到文本文件......即使默认设置为 LPT1: 并被重定向到 postscript 内容的输出文本文件。

因此，最终，通过使用另一个供应商的打印机驱动程序进行 postscript 打印解决了问题，我很高兴。

# java - 任何Java库来过滤一个对象的属性？

> ID：15261796
> 
> 赞同：0
> 
> 时间：2013-03-07T02:09:13.877
> 
> 标签：java, object, filter, field

是否有任何用于大对象的过滤器/网格属性的 java 库，生成一个具有较少属性的新小对象？
我需要从一个对象中提取一些字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:11:16.087

使用 BeanUtils 库。具体来说，[这种方法](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object,%20java.lang.String%5B%5D%29)

# php - 比较文本框中的两个日期

> ID：15261803
> 
> 赞同：0
> 
> 时间：2013-03-07T02:10:14.180
> 
> 标签：php, date, textbox, comparison

假设在我的数据库中我存储了我的日期，我想将它与当前日期进行比较。我怎么能比较它？

在我的第一个文本框中，我将回显数据库中的数据，在第二个文本框中将是当前日期

如果我的数据库中的 currentdate > data，第一个文本框将是红色的。如果我的数据库中的 currentdate < date，第一个 texbox 将变为绿色。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:16:23.077

使用该`DATEDIFF`功能来执行此操作。

假设您有一个来自数据库/php 的日期变量：

```
$date_variable = //put your date info from your database here 
```

对于当前日期，您可以使用`NOW()`

所以，它看起来像这样：

```
<?php 
if (DATEDIFF(NOW(), $date_variable) < 0) {
    /// do some stuff
} else {
//do some other different stuff
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:37:51.593

如果您的日期存储（或转换为）*Year-Month-Day* ，则可以进行基本比较。

```
$d1="2013-03-06 00:00:00"; #DB value
$d2=date("Y-m-d H:i:s"); #Now
$c=($d1 > $d2) ? "#f44" : "#4f4";

echo "<input type='text' style='background-color:$c' value='$d1'>";
echo "<input type='text' value='$d2'>"; 
```

# delphi - 如何在 IIS7 64bit 中配置 Delphi 2010 ISAPI.dll？

> ID：15261808
> 
> 赞同：0
> 
> 时间：2013-03-07T02:10:40.207
> 
> 标签：delphi, iis-7, isapi

使 ISAPI dll 在 IIS7 中工作以进行查询 www.website.com/test/bin/ISAPIGet.dll?a=b 所需的最少步骤是什么？请不要参考顶级谷歌搜索，它们非常通用并且不起作用。我在Delphi2010中写了非常简单的ISAPIGet.dll，在IIS5 Win2000中效果很好。然后我把它放在 IIS7 SBS2008 上，放到 C:\inetpub\wwwroot\website\test\bin 文件夹中。为 /website 创建网站，为 /test 创建网站，为 /bin 创建 VirtualDirectory，在 /bin 的 HandlerMappings 中为我的 ISAPIGet.dll 添加脚本映射 *.dll，在 ISAPIandCgiRestrictions 中允许我的 dll，创建 32 位 ApplicationPool 非托管代码，经典模式，绑定到 /test 应用程序。在查询 www.website.com/test/bin/ISAPIGet.dll?a=b 时，我遇到各种错误，例如 500、503（当 AppPool 失败时），而主页 www.website.com 工作正常。我还应该做什么？我是否需要配置 web.config 文件，在哪里以及如何配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T06:19:55.960

我记得，让我们的 ISAPI DLL 在 WinSvr2008R2(64b) 上的 IIS7 中运行时，我遇到了类似的问题。我写下了一些快速笔记，以帮助我重复最终让它工作的步骤。我会尝试在这里提供这些（至少我们做了什么）。

1.  授予 IUSR 对文件夹的“读取和执行、列出文件夹内容和读取”权限`C:\PathToISAPI_DLL`
2.  将 ISAPI DLL 需要运行的所有 DLL 文件复制到`c:\windows\syswow64`文件夹中（例如 midas.dll、dbxmss.dll 等）
3.  启动 IIS 管理器
4.  添加应用程序池“MyAppPool”[无托管，经典，立即开始]
5.  更改新应用程序池的“高级设置”以允许 32 位，并设置空闲超时
6.  使用“MyAppPool”将应用程序“MyApp”添加到您的网站，并将物理路径设置为`C:\PathToISAPI_DLL`

现在您必须在 DOS 提示符下执行几个步骤才能完成配置：

```
cd /d c:\windows\system32\inetsrv

REM *** Grant rights to execute the DLL ***
appcmd.exe set config -section:isapiCgiRestriction /+[path='C:\PathToISAPI_DLL\ISAPI.dll',allowed='true']

REM *** Grant the url of the Execute access for hander mappings ***
appcmd.exe set config "Default Web Site/MyApp/ISAPI.DLL" "/commit:Default Web Site/MyApp" /section:handlers /accessPolicy:Read,Script,Execute

REM *** Make sure you have an ISAPI module mapping for *.dll at that path ***
appcmd.exe list config "Default Web Site/MyApp" /section:handlers | findstr /i *.dll 
```

这就是我的笔记的范围。我已经成功地跟踪了他们几次，并且一直有效。我**从来**没有能够只使用 GUI 来让它工作。我**总是**不得不`appcmd`在 DOS 提示符下运行命令来完成配置。

有时我仍然会看到 404 错误，在这种情况下，我会从包含 ISAPI.DLL 的文件夹中删除 web.config，然后`appcmd`再次运行最后两个命令。当然，我的 ISAPI DLL 在 web.config 文件中没有任何其他设置，所以删除它并没有什么坏处……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T06:47:01.177

不只是因为 dll 是 32 位，而 IIS7 是 64 位进程，所以无法读取 Delphi 32 位 dll？

您的主页是由 IIS 处理的静态 html，没有问题。

但是当 IIS 尝试加载时`ISAPIGet.dll`，它会失败，因为它不是 64 位库，或者它的依赖项之一丢失。

*   您*确定*在 32 位模式下使用 IIS7 应用程序池吗？
*   您是否在同一路径或 c:\windows\syswow64 中拥有所有需要的子库和 bpl？

# android - 在 Android 中动态添加线性布局

> ID：15261811
> 
> 赞同：3
> 
> 时间：2013-03-07T02:10:52.147
> 
> 标签：android, dynamic, view, android-linearlayout

我正在尝试动态添加 LinearLayouts 但它不起作用。我想我只需要另一双眼睛来审视它。谁能帮我？

```
LinearLayout parentLayout = (LinearLayout)findViewById(R.id.parentLayout);
        lLayout = new LinearLayout[8];
        for(int i = 0; i < lLayout.length; i++) {
            lLayout[i] = new LinearLayout(this);
            lLayout[i].setId(i);
            lLayout[i].setOrientation(LinearLayout.HORIZONTAL);
            if(i%2 == 0) {
                lLayout[i].setBackgroundColor(Color.GREEN);
            } else {
                lLayout[i].setBackgroundColor(Color.MAGENTA);
            }
            parentLayout.addView(lLayout[i]);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:26:21.173

您需要设置 LayoutParams，尝试添加：

```
lLayout[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:24:40.863

看起来您正在尝试使用线性布局自己制作一个列表视图，而不是实际使用已经支持的 ListView。

如果你真的想这样做，你应该首先给视图内的布局一个宽度和高度。我还将列表放在滚动视图中，以防它溢出外部布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:37:27.217

也许试试这个

```
LinearLayout parentLayout = (LinearLayout)findViewById(R.id.parentLayout);
        lLayout = new LinearLayout[8];
        for(int i = 0; i < lLayout.length; i++) {
            lLayout[i] = new LinearLayout(this);
            lLayout[i].setId(i);
            lLayout[i].setOrientation(LinearLayout.HORIZONTAL);
            if(i%2 == 0) {
                lLayout[i].setBackgroundColor(Color.GREEN);
            } else {
                lLayout[i].setBackgroundColor(Color.MAGENTA);
            }

            LinearLayout.LayoutParams myLayoutParams = new LinearLayout.LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);

            myLayoutParams.leftMargin = 0;
            myLayoutParams.topMargin = 50 * i;
            myLayoutParams.width = myScreenSize; //e.g. 480
            myLayoutParams.height = 50;

            lLayout[i].setLayoutParams(myLayoutParams);

            parentLayout.addView(lLayout[i]);
        } 
```

# java - Java AudioSystem：读取 32 位 Wav 文件

> ID：15261812
> 
> 赞同：2
> 
> 时间：2013-03-07T02:10:56.597
> 
> 标签：java, wav, javax.sound.sampled

我正在读取 16 位和 24 位采样位深度的音频文件，并毫无困难地解析它们以确定它们的长度。但是，当读取 32 位文件时，我得到

```
javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input file
at javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1170)
... 
```

32 位测试文件以与其他文件相同的方式手动编码（线性 PCM）。我想知道 AudioSystem 是否不支持 32 位 Wav，或者是否有解决方法。作为参考，这是我的课程：

```
import java.io.*;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

public class soundUtility {
    public static double getWavDuration(File filename)
    {   
        AudioInputStream stream = null;
        try 
        {
            stream = AudioSystem.getAudioInputStream(filename);
            AudioFormat format = stream.getFormat();
            return filename.length() / format.getSampleRate() / (format.getSampleSizeInBits() / 8.0) / format.getChannels();
        }
        catch (Exception e) 
        {
            e.printStackTrace();
            return -1;
        }
        finally
        {
            try { stream.close(); } catch (Exception ex) { }
        }
    }

    public static void main(String[] args) {

    try {
        // ===== TESTS: toggle these calls to test the included files =====
        // File soundFile = new File("16bit.mono.441k.30secs.wav");
        // File soundFile = new File("24bit.48k.11secs.stereo.wav");
        File soundFile = new File("32bit.Floating.Stereo.48k.wav");
        // ===========

        System.out.println(getWavDuration(soundFile));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-10T17:09:01.253

老问题，但这是我自己研究的问题。我的测试可以确认 16bit 48kHz PCM 可以工作，而 32bit 不能。

但是我的测试也暗示 24 位不起作用：

```
 No line matching interface Clip supporting format PCM_SIGNED 48000.0 Hz, 24 bit, stereo, 6 bytes/frame, little-endian is supported. 
```

这是一个在 96Khz、32 位创建并从 Audacity 导出的 .wav 文件，在该文件中它被渲染为 24 位 48Khz wav。

这似乎反映在文档中：[https ://docs.oracle.com/javase/8/docs/technotes/guides/sound/](https://docs.oracle.com/javase/8/docs/technotes/guides/sound/)

“声音格式：8 位和 16 位音频数据，单声道和立体声，采样率从 8 kHz 到 48 kHz”

因此，恐怕没有可用的 32 位浮点数，而且我无法重现您的 24 位浮点数有效的结果。

# django - Django 独特的批量插入

> ID：15261821
> 
> 赞同：3
> 
> 时间：2013-03-07T02:11:51.073
> 
> 标签：django, django-models, django-database

我需要能够快速批量插入大量记录，同时仍确保数据库中的唯一性。要插入的新记录已经被解析，并且是唯一的。我希望有一种方法可以在数据库级别而不是在代码本身中强制执行唯一性。

我使用 MySQL 作为数据库后端。如果 django 在任何其他数据库中支持此功能，我可以灵活地更改后端，因为这是一个要求。

Django中的批量插入不使用该`save`方法，那么如何一次插入几百到几千条记录，同时仍然尊重唯一字段和唯一一起字段？

* * *

我的模型结构经过简化，看起来像这样：

```
class Example(models.Model):
    Meta:
        unique_together = (('name', 'number'),)

    name = models.CharField(max_length = 50)
    number = models.CharField(max_length = 10)
    ...
    fk = models.ForeignKey(OtherModel) 
```

**编辑：**

应该插入尚未在数据库中的记录，而应该忽略已经存在的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:07:28.197

正如miki725 所提到的，您当前的代码没有问题。我假设您正在使用**bulk_create**方法。确实，在使用 bulk_create 时不会调用 save() 方法，但在 save() 方法内部并未强制执行字段的唯一性。当您使用 unique_together 时，在创建表时将**唯一约束**添加到 mysql 中的基础表：

姜戈：

```
unique_together = (('name', 'number'),) 
```

MySQL：

```
UNIQUE KEY `name` (`name`,`number`) 
```

因此，如果您使用任何方法（save、bulk_insert 甚至原始 sql）将值插入表中，您将从 mysql 获得此异常：

```
Duplicate entry 'value1-value2' for key 'name' 
```

**更新：**

bulk_insert 的作用是创建一个大查询，用一个查询一次插入所有数据。因此，如果其中一个条目是重复的，则会引发异常并且不会插入任何数据。

1- 一种选择是使用 bulk_insert 的 batch_size 参数并使其在多个批次中插入数据，这样如果其中一个失败，您只会错过该批次的其余数据。（取决于插入所有数据的重要性以及重复条目的频率）

2-另一种选择是在批量数据上编写一个for循环并逐个插入批量数据。这样，仅针对该行引发异常，并插入其余数据。这将每次都查询数据库，当然要慢得多。

3-第三个选项是解除唯一约束，使用 bulk_create 插入数据，然后编写一个删除重复行的简单查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:27:04.720

Django 本身并不强制执行`unique_together`meta 属性。这是由数据库使用该`UNIQUE`子句强制执行的。您可以根据需要插入尽可能多的数据，并保证指定的字段是唯一的。如果不是，那么将引发异常（不确定是哪一个）。`unique_together`有关[文档](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)的更多信息。

# android - Android 上 chrome 25 中的语音输入

> ID：15261822
> 
> 赞同：3
> 
> 时间：2013-03-07T02:11:56.473
> 
> 标签：android, html, google-chrome, speech

在 PC 上，运行 chrome 25（非测试版）会显示一个麦克风图标，单击它会提示输入。当我停止说话时，我的警报呼叫被执行。都好。在运行 Android 4.04 的运行 chrome 25（非测试版）的 Galaxy Note 智能手机上，加载同一页面不会显示麦克风图标。也不适用于运行 android jelly bean 的 Google Nexus-10 平板电脑。

我也尝试过，它也无法在 android chrome 25 上显示麦克风选项。

鉴于 Chrome 25 版本吹捧 Android 语音功能以及 Android 和桌面 Chrome 之间的更多兼容性，我很惊讶这不起作用。其他人尝试过这个并让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:43:03.063

从 M25 和 M26 Beta 开始，它未在 Chrome for Android 中实现。

您应该为这个错误加注星标[https://code.google.com/p/chromium/issues/detail?id=112934](https://code.google.com/p/chromium/issues/detail?id=112934)

同样令人感兴趣的是连续语音输入 API，因此请关注此问题[https://code.google.com/p/chromium/issues/detail?id=116954](https://code.google.com/p/chromium/issues/detail?id=116954)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T15:59:06.003

[CanIUse](http://caniuse.com/#search=speech%20recognition)表示此功能在 2016 年 12 月 7 日发布的 Chrome 55 中可用

# comparison - 布尔比较

> ID：15261823
> 
> 赞同：1
> 
> 时间：2013-03-07T02:11:57.273
> 
> 标签：comparison, scheme, boolean, computer-science, boolean-expression

我正在做一些 HtDP（如何设计程序）的练习，我有点卡在布尔比较问题上。它是这样的。

```
 (define b1 true)

    (define b2 false) 
```

编写一个表达式来计算 b1 是否为假且 b2 是否为真。如果 false 产生 No ，反之亦然。

现在这就是我想出的全部：

```
 (and b1 true) => true 
```

（无耻。我知道，但我对此很陌生，而且我真的很慢赶上）

您能给我的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:22:14.653

将问题转换为代码非常简单。作为第一种方法，让我们用伪代码逐字复制问题：

```
(b1 == false) AND (b2 == true) 
```

现在，您将如何在 Scheme 中编写以上内容？请记住，Scheme 使用前缀表示法

```
(<???> (<???> b1 false) (<???> b2 true)) 
```

通过更多的练习，相同的代码可以像这样更紧凑地编写（再次，首先是伪代码）：

```
NOT b1 AND b2 
```

这应该很简单，可以用 Scheme 编写：

```
(<???> (<???> b1) b2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:20:31.007

不确定这是否是 HtDP 编写表达式的方式，但是您可以编写一个简单的真值表并找到布尔表达式：

b1 | b2 | 是

0 | 0 | 0

0 | 1 | 1

1 | 0 | 0

1 | 1 | 0

因此 Y = (NOT b1) AND b2 => TRUE

# traits - 对 chaco 工具生成的事件做出反应：触发事件时如何从 chaco 工具中获取值？

> ID：15261824
> 
> 赞同：0
> 
> 时间：2013-03-07T02:11:59.703
> 
> 标签：traits, enthought, chaco

实际上这应该是一个非常简单的问题，但我正在经历 chaco 和特征的相当陡峭的学习曲线......

我目前正在编写一个应用程序来使用 chaco 和特征绘制医学图像，我只想从图像中选择一个像素位置并使用这个像素位置对图像堆栈进行评估。所以我开始编写我自己的 Chaco 工具，它可以对图像图上的鼠标点击做出反应。到目前为止，这工作正常。当我点击 imageplot 时，我可以看到工具内的鼠标坐标（定制的 PixelPickerTool）。但是，由于我想在工具外部使用此坐标值，我的问题是：当触发事件时，如何将坐标移交给工具外部的另一个对象或变量。

为了说明我想要做什么，我附上了我正在编写的两个类的主要结构：

```
class PixelPickerTool(BaseTool):
    '''Pick a Pixel coordinate from an image'''

    ImageCoordinates = [0,0]

    def normal_left_down(self, event):       
        print "Mouse:", event.x, event.y,
        click_x, click_y = self.component.map_data((event.x, event.y))
        img_x = int(click_x)
        img_y = int(click_y)
        coord = [img_x, img_y]
        if ( (img_x > self.ImageSizeX) or (img_x < 0) ):
             coord = [0,0]
        if ( (img_y > self.ImageSizeY) or (img_y < 0) ):
             coord = [0,0]

        print coord
        # this print gives out the coordinates of the pixel that was clicked - this works fine...
        # so inside the picker too I can get the coordinates
        # but how can I use the coordinates outside this tool ?

class ImagePlot(HasTraits):
    # create simple chaco plot of 2D numpy image array, with a simple interactor (PixelPickerTool) 
    plot = Instance(Plot)
    string = String("hallo")
    picker = Instance(PixelPickerTool)

    traits_view = View(
        Item('plot', editor=ComponentEditor(), show_label=False,width=500, height=500, resizable=False),
        Item('string', show_label=False, springy=True, width=300, height=20, resizable=False),
        title="")   

    def __init__(self, numpyImage):
        super(ImagePlot, self).__init__()
        npImage = np.flipud(np.transpose(numpyImage))

        plotdata = ArrayPlotData(imagedata = npImage)

        plot = Plot(plotdata)
        plot.img_plot("imagedata", colormap=gray)

        self.plot = plot
        # Bild Nullpunkt ist oben links!
        self.plot.default_origin = 'top left'

        pixelPicker = PixelPickerTool(plot)
        self.picker = pixelPicker
        plot.tools.append(pixelPicker) 
```

我想在这个 ImagePlot 类的某处使用由 PixelPickerTool 测量的坐标。例如，通过将它们移交给另一个对象，例如 MyImageSeries.setCoordinate(xy_coordinateFromPickerTool) 那么当触发事件时，如何将像素坐标从 PickerTool 移交给此类中的某个成员变量？也许是这样的： self.PixelCoordinates = picker.getPixelCoordinates() 可以工作吗？但是我怎么知道，当 on_normal_left_down 函数在选择器中执行时？

最后，我想将坐标交给另一个类，该类保存更多图像以处理图像并在 ImagePlot 中确定的像素位置进行拟合。我试图在我的 imagePlot 类中使用类似“_picker_changed”的东西来检测是否在 PickerTool 中触发了事件，但这没有检测到事件触发。所以也许我做错了什么......

谁能告诉我如何从这个选择器工具中获取事件和相关变量？

干杯，

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:52:43.887

“但我怎么知道，on_normal_left_down 函数是在何时在选取器中执行的？”

您可能有几种方法可以做到这一点，但一种方法是简单地按照您的要求进行操作并触发您明确定义的事件。

例如：

```
from traits.api import Event

class PickerTool(BaseTool):
  last_coords = SomeTrait
  i_fired = Event

  def normal_left_down(self,event):
     # do whatever necessary processing
     self.last_coords = do_some_stuff(event.some_attribute)
     # now notify your parent
     self.i_fired = True 
```

然后从你想显示的任何地方收听 plot.picker.i_fired ，并在 plot.picker.last_coords 中查看保存的状态。

如果您想对这些坐标执行的操作非常简单，那么您可以做的另一件事可能会更简单，只需传递选择器需要与之交互的数据结构的初始化（或通过对 self.parent 的一系列调用来获取它们）并直接在选择器内完成您的工作。

# asp.net-mvc - Web API OData 控制器和授权属性

> ID：15261836
> 
> 赞同：3
> 
> 时间：2013-03-07T02:13:01.433
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, odata, .net-4.5

我正在尝试使用 MVC 样式授权过滤器作为 OData Web API 控制器的 Get() 操作方法的属性，但授权过滤器被忽略。可以将授权属性与 EntitySetController 或 ODataController 一起使用吗？

```
public class MyEntityController : EntitySetController<MyEntity, int>
{
    [CustomAuthorizeAttribute(AccessPermission.View)]
    [Queryable( AllowedQueryOptions = AllowedQueryOptions.All)]
    public override IQueryable<MyEntity> Get()
    {
        // Contents omitted.
    }
}

public class CustomAuthorizeAttribute : AuthorizeAttribute
{
    public AccessPermission RequiredPermission { get; set; }

    public CustomAuthorizeAttribute(AccessPermission requiredPermission)
    {
        RequiredPermission = requiredPermission;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:33:11.113

是的，他们可以，但自定义身份验证属性应该继承自`System.Web.Http.AuthorizeAttribute`

试试这个实现：

```
public class CustomAuthorizeAttribute : System.Web.Http.AuthorizeAttribute
{
    public AccessPermission RequiredPermission { get; set; }

    public CustomAuthorizeAttribute(AccessPermission requiredPermission)
    {
        RequiredPermission = requiredPermission;
    }
} 
```

# sharepoint - Sharepoint 2010 - 将“u”参数传递给高级搜索

> ID：15261837
> 
> 赞同：1
> 
> 时间：2013-03-07T02:13:05.943
> 
> 标签：sharepoint, search, sharepoint-2010

场景 - 我正在构建一个站点来容纳许多报告 - 在一个主 Web 下有三十个左右的子站点，用于不同的报告类别，每个站点中有几个库，每个单独的报告一个库。总共有 30 个报告类别（站点）中的大约 600 个报告（库）。此设计已确定，不能更改。

我计划/想要一个高级搜索页面来搜索所有报告，使用各种自定义元数据列。这一点很简单，我可以开箱即用。

最重要的搜索标准之一是要搜索哪个报告，正如我所提到的，其中有很多。指令是让报告类型添加“不可见” - 他们将选择报告类别，然后选择报告类型，然后显示搜索页面。搜索应该“知道”正在搜索哪个报告。

范围选择不是一个可行的选项，因为库太多了，而且随着新报告的创建，还会添加更多库。

现在，如果我将“u”参数添加到 URL 中，我可以在结果中得到我想要的结果：

```
results.aspx?k="RunDate=1/23/13"&U=http://site/report_type/library" 
```

（为清楚起见，地址未转义）

我的挑战是找到一种方法将该参数提供给高级搜索，并让它附加到其生成的查询的末尾。

我相信只需对 webpart 稍作调整就可以完成，但我需要在正确的方向上稍加推动。

或者，和往常一样，如果你们都有更聪明的想法，我可以做到。

现在，我有第二个问题，不同的报告有自己不同的元数据列集，他们只希望每个报告都显示正确的列，但一次只有一个危机。

编辑 - 经过进一步研究，我似乎无法扩展高级搜索 webpart，因为它是密封类型。有没有人可以解决这个问题，或者有我可以破解的第三方高级搜索页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-20T16:17:06.337

我能够通过覆盖负责重定向的 JavaScript 函数 NavigateTo(url) 找到解决此问题的方法。我的解决方案可以在[这里找到](https://sharepoint.stackexchange.com/questions/100267/sharepoint-2010-advanced-search-appened-to-keyword-query/100371#100371)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:23:26.383

您实际询问的是上下文搜索框，因为该`u`参数类似于*上下文搜索范围*。

我不确定标准搜索框是否可以按照您想要的方式进行配置，因此它总是添加查询字符串`u=<current url>`。我认为您将不得不求助于一些（即使是简单的）代码。

您可以在此处找到一个示例：[在内容编辑器 Web 部件中创建 SharePoint 上下文搜索框](http://joshmccarty.com/2010/11/create-a-sharepoint-contextual-search-box-in-a-content-editor-web-part/)。当然，您可以对服务器端代码做同样的事情，但由于您只想添加一个查询字符串参数，JavaScript 就足够了。

# zen-cart - 如何显示我的 ez 页面链接？

> ID：15261840
> 
> 赞同：1
> 
> 时间：2013-03-07T02:13:24.703
> 
> 标签：zen-cart

如何显示我的 ez 页面链接？

我创建了 ez 页面，但在索引中看不到任何链接。为什么？如何显示它？

![在此处输入图像描述](../Images/ee6b14103bf940c7b8905551fb514265.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:23:33.313

如果页眉、侧边栏和页脚指示器打开，它应该显示在您的页眉、侧边栏和页脚中。

也许您更改了这些文件之一或没有启用边箱？

标题：包括/模板/YOUR_TEMPLATE/common/tpl_header.php

页脚：包括/模板/YOUR_TEMPLATE/common/tpl_footer.php

Sidebox：在 admin->tools->layout box controller 中开启 EZPages sidebox

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:10:45.810

我不久前也遇到了这个问题。

您必须输入除 0 以外的排序顺序，以使其显示在任何地方。

我希望这会有所帮助。

# android - 在方向更改时更改主屏幕小部件布局

> ID：15261843
> 
> 赞同：1
> 
> 时间：2013-03-07T02:13:30.900
> 
> 标签：android, android-layout, android-widget, homescreen, android-orientation

每当方向改变时，是否可以在主屏幕小部件上有不同的布局？例如，在横向模式下，我想显示一些 textViews 和 ImageViews，但是当切换到纵向模式时，我想隐藏这些 textViews 并且只显示 ImageView，并且小部件具有不同的大小。可以做到这一点以及如何做到这一点？提前致谢。

# php - PHP未定义变量，但脚本运行完美，如果我定义变量它不起作用

> ID：15261844
> 
> 赞同：0
> 
> 时间：2013-03-07T02:13:43.143
> 
> 标签：php, variables, undefined

我有一个未定义变量的问题，如果我定义了脚本无法正常工作的变量，我知道这是一个简单的答案，我只是找不到它。

这是我的代码：（我在 for each 循环中使用它）

```
$weight= ($item['weight']*$item['quantity']);  
$totalweight = ($totalweight + $weight) 

echo $totalweight; 
```

该脚本运行良好，并给了我正确的答案，除了我在第 2 行 $totalweight 上得到一个未定义的变量错误

我试图设置变量然后中断计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:20:52.357

您需要在循环*之外*初始化变量，这样它就不会在每次迭代时被覆盖：

```
$totalweight = 0;
foreach ($items as $item) {
    $weight= ($item['weight']*$item['quantity']);  
    $totalweight = ($totalweight + $weight) 
}

echo $totalweight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:19:34.547

你是如何设置变量的？PHP 正在生成此通知，因为您要求它添加`$totalWeight`并且`$weight`它不知道是什么`$totalWeight`。

要删除此通知，您可以执行以下操作：

```
$totalWeight = 0;
$weight= ($item['weight']*$item['quantity']);  
$totalweight = ($totalweight + $weight);

echo $totalweight; 
```

尽管最好将行更改为：

```
$totalweight = $weight; 
```

（当然，除非这段代码在循环等中运行）。

# perl - 模板工具包显示结果一次 foreach 循环

> ID：15261845
> 
> 赞同：0
> 
> 时间：2013-03-07T02:13:44.493
> 
> 标签：perl, template-toolkit

我目前正在使用 Template Toolkit，在 TT 之前从未学习或使用过。

例如，我有 10 个文件，5 个日期为 dd/mm/2011 年的文件和 5 个日期为 dd/mm/2012 的文件。我只需要显示一次年份。我尝试使用 foreach 循环，但不是显示 2011 5 次和 2012 5 次，我希望它只显示 1 次。

我需要实现的是获得年份并使用它来创建一个链接来显示那一年的那些文档。

希望大家理解，有好心人帮帮我。=x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:59:37.827

您将在 TT 中使用与在任何其他编程语言中使用的类似方法。记下您看到的最后一年，如果不同，只打印当前的。

这是一个简单的示例，您可以使用`tpage`.

```
$ cat years.tt 
[%- dates = [ '01/11/2012', '01/12/2012', '01/01/2013', '01/02/2013'];
    lastyear = '';
    FOREACH date IN dates;
        bits = date.split('/');
        IF bits.2 != lastyear;
            bits.2 _ "\n";
        END;
        bits.0 _ '/' _ bits.1 _ "\n";
        lastyear = bits.2;
    END -%]
$ tpage years.tt
2012
01/11
01/12
2013
01/01
01/02 
```

但是您几乎肯定会考虑将更合理的数据结构传递给 TT。

# c# - c#相当于c++“floor”函数

> ID：15261846
> 
> 赞同：-2
> 
> 时间：2013-03-07T02:13:46.433
> 
> 标签：c#, floating-point, int, floor

我正在寻找 C# 中 floor(x) 的实现，以便它与 C++ 版本匹配。

```
floor of 2.3 is 2.0
floor of 3.8 is 3.0
floor of -2.3 is -3.0
floor of -3.8 is -4.0 
```

由于 C++ 审阅者将检查我的代码，`floor`在 C# 中什么实现是合理的，这样他就不会拔出他的（最后剩下的）头发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T02:14:32.353

您可以使用[数学](http://msdn.microsoft.com/en-us/library/system.math.aspx)类。有很多重载形式[`Math.Floor`](http://msdn.microsoft.com/en-us/library/system.math.floor.aspx)

1.  [`Math.Floor(Double)`](http://msdn.microsoft.com/en-us/library/e0b5f0xb.aspx)
2.  [`Math.Floor(Decimal)`](http://msdn.microsoft.com/en-us/library/k7ycc7xh.aspx)

* * *

简单用法：

```
Math.Floor(2.3) // == 2.0
Math.Floor(3.8) // == 3.0
Math.Floor(-2.3) // == -3.0
Math.Floor(-3.8) // == -4.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T02:14:53.320

只需使用`Math.Floor`. 与 C++ 一样，它向负无穷大舍入`floor`。从[文档中](http://msdn.microsoft.com/en-us/library/e0b5f0xb.aspx)：

> 此方法的行为遵循 IEEE 标准 754 第 4 节。这种舍入有时称为向负无穷舍入。换句话说，如果 d 为正，则任何小数部分都会被截断。如果 d 为负数，任何小数部分的存在都会导致它被四舍五入为较小的整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T02:15:40.357

数学库可以满足您的需要。文档在[这里](http://msdn.microsoft.com/en-us/library/system.math.floor%28v=vs.71%29.aspx)。更重要的是，地板一词被定义为始终按照您的描述行事。有关[数学底函数的详细信息，请参见维基百科](http://en.wikipedia.org/wiki/Floor_and_ceiling_functions#Definition_and_properties)

# python - 具有随机像素颜色的 100x100 图像

> ID：15261851
> 
> 赞同：14
> 
> 时间：2013-03-07T02:14:25.850
> 
> 标签：python, image, matplotlib, python-imaging-library, draw

我正在尝试制作`100x100`每个像素为不同随机颜色的图像，例如以下示例：

![在此处输入图像描述](../Images/2d8e8e4058969e3d1de8b5874d51388e.png)

我试过用`matplotlib`，但运气不好。我应该使用 PIL 吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-07T02:33:26.087

如果你想创建一个图像文件（并在其他地方显示它，不管有没有 Matplotlib），你可以使用 NumPy 和 Pillow，如下所示：

```
import numpy
from PIL import Image

imarray = numpy.random.rand(100,100,3) * 255
im = Image.fromarray(imarray.astype('uint8')).convert('RGBA')
im.save('result_image.png') 
```

这里的想法是创建一个数值数组，将其转换为 RGB 图像，并将其保存到文件中。如果你想要灰度图像，你应该使用`convert('L')`而不是`convert('RGBA')`.

[![](../Images/09f805c4e84ba0ae2315af2600dd41a8.png)](https://i.stack.imgur.com/XG7Tn.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-07T02:18:11.373

这很简单`numpy`和`pylab`。您可以将颜色图设置为您喜欢的任何颜色，这里我使用光谱。

```
from pylab import imshow, show, get_cmap
from numpy import random

Z = random.random((50,50))   # Test data

imshow(Z, cmap=get_cmap("Spectral"), interpolation='nearest')
show() 
```

![在此处输入图像描述](../Images/94c764c18f9be3538f89df0fe3e1cf09.png)

您的目标图像看起来具有像素密度高于 100x100 的灰度颜色图：

```
import pylab as plt
import numpy as np

Z = np.random.random((500,500))   # Test data
plt.imshow(Z, cmap='gray', interpolation='nearest')
plt.show() 
```

![在此处输入图像描述](../Images/f884f7bdf1ae1d04c269ea4c2a6bd554.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-07T03:16:54.120

我想写一些简单的 BMP 文件，所以我研究了格式并写了一个非常简单的[bmp.py 模块](http://www.ptmcg.com/geo/python/bmp.py.txt)：

```
# get bmp.py at http://www.ptmcg.com/geo/python/bmp.py.txt
from bmp import BitMap, Color
from itertools import product
from random import randint, choice

# use a set to make 256 unique RGB tuples
rgbs = set()
while len(rgbs) < 256:
    rgbs.add((randint(0,255), randint(0,255), randint(0,255)))

# convert to a list of 256 colors (all you can fit into an 8-bit BMP)
colors = [Color(*rgb) for rgb in rgbs]

bmp = BitMap(100, 100)
for x,y in product(range(100), range(100)):
    bmp.setPenColor(choice(colors))
    bmp.plotPoint(x, y)

bmp.saveFile("100x100.bmp", compress=False) 
```

样本 100x100.bmp：

![100x100.bmp](../Images/d835349702d737a68a3d31b373c8916e.png)

对于稍大的像素大小，请使用：

```
PIXEL_SIZE=5
bmp = BitMap(PIXEL_SIZE*100, PIXEL_SIZE*100)
for x,y in product(range(100), range(100)):
    bmp.setPenColor(choice(colors))
    bmp.drawSquare(x*PIXEL_SIZE, y*PIXEL_SIZE, PIXEL_SIZE, fill=True)

filename = "%d00x%d00.bmp" % (PIXEL_SIZE, PIXEL_SIZE)
bmp.saveFile(filename) 
```

![500x500.bmp](../Images/439be6044ecdae6ea06586704bb6d4d9.png)

您可能不想使用 bmp.py，但这向您展示了您需要做什么的总体思路。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-05-23T11:36:30.657

```
import numpy as np
import matplotlib.pyplot as plt

img = (np.random.standard_normal([28, 28, 3]) * 255).astype(np.uint8)

# see the raw result (it is 'antialiased' by default)
_ = plt.imshow(img, interpolation='none')
# if you are not in a jupyter-notebook
plt.show() 
```

会给你这个 28x28 RGB 图像：

![图像](../Images/3e5804293fdb4c0627f560e63823e382.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-07T18:33:38.500

我相信该数组的颜色图是骨骼，即

```
#import the modules
import numpy as np
import matplotlib.cm as cm
import matplotlib.pyplot as plt

rand_array=np.random.rand(550,550) #create your array
plt.imshow(rand_array,cmap=cm.bone) #show your array with the selected colour
plt.show() #show the image 
```

如果您想要一个 100x100 数组，请将 550 更改为 100

[![在此处输入图像描述](../Images/23c7515bc72403bdea65dcc3ae07745a.png)](https://i.stack.imgur.com/GvVr0.png)

# mvvm - SelectedItem 必须始终设置为有效值

> ID：15261859
> 
> 赞同：0
> 
> 时间：2013-03-07T02:15:04.150
> 
> 标签：mvvm, windows-phone

我有两个视图模型，在第一个视图模型上我有一个列表框：

```
<ListBox x:Name="MainMenu" toolkits:TiltEffect.IsTiltEnabled="True" 
 SelectedItem="{Binding SelectedItem, Mode=TwoWay}" 
 ItemTemplate="{StaticResource MainMenu}" 
 ItemsSource="{Binding Categories}" Margin="0,97,0,0" 
 Tap="MainMenu_Tap"> 
```

在第二页，我有一个列表选择器

```
<toolkit:ListPicker Margin="0,153,0,0" Background="{StaticResource PhoneAccentBrush}" VerticalAlignment="Top"
 ItemsSource="{Binding Categories}"
 SelectedItem="{Binding Item}"
 ItemTemplate="{StaticResource CategorySelector}"
 FullModeHeader="Category" 
 FullModeItemTemplate="{StaticResource FullCategorySelector}"
 BorderBrush="{StaticResource PhoneAccentBrush}"/> 
```

我想要的是当我导航到第二页时，第一页中的选定项目将在第二页中被选中。但是当我导航到第二页时，我总是得到所选项目必须始终设置为有效值。

**第一个视图模型**

```
private CategoryModel _selectedItem = null;
public CategoryModel SelectedItem
{
    get { return _selectedItem; }
    set
    {
        if (_selectedItem == value)
        {
            return;
        }

        var oldValue = _selectedItem;
        _selectedItem = value;

        RaisePropertyChanged("SelectedItem", oldValue, value, true);
    }
} 
```

**第二个视图模型**

```
private CategoryModel _item = null;
public CategoryModel Item
{
    get { return _item; }
    set
    {
        if (_item == value)
        {
            return;
        }

        var oldValue = _item;
        _item = value;

        // Update bindings, no broadcast
        RaisePropertyChanged("Item");
    }
} 
```

![在此处输入图像描述](../Images/035740fdfed1b98438a19a6d8ea046db.png)

**编辑**

当我将第二页中的列表选择器更改为列表框时，它工作得很好。

所以这是一个问题[，请在此处输入链接描述](http://phone.codeplex.com/workitem/10665)。我应该怎么做才能让这个东西与 listpicker 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T15:43:30.407

ListPicker 使用 Items.IndexOf 来获取应该选择的项目实例的索引。

如果实例不匹配（它不是集合中的对象实例），IndexOf 将返回 -1，并抛出 InvalidOperationException 并显示消息：“SelectedItem 必须始终设置为有效值”。

覆盖集合中类型的 Equals 方法，它将按预期工作。

例子：

```
public override bool Equals(object obj)
{
         var target = obj as ThisTarget;
         if (target == null)
             return false;

         if (this.ID == target.ID)
             return true;

         return false;
 } 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:29:07.560

我认为您混淆了视图和视图模型。

因为您在 XAML 中绑定所选项目，所以当解析 XAML 并创建页面时，它会尝试绑定到尚未创建的集合中的项目。这就是为什么在后面的代码中设置此错误时有关错误的评论建议解决方法。

在`Tap`第一页的处理程序中，我假设您将所选项目的一些详细信息传递到第二页。因此，您可以删除所选项目的 XAML 绑定，并在`OnNavigatedTo`第二页的事件处理程序中设置代码中的绑定，一旦您知道 ItemsSource 已被填充。

或者，您可以考虑让两个页面共享相同的视图模型实例。

# ios - 自动调整 UIScrollView 大小以适合 UILabel 文本

> ID：15261860
> 
> 赞同：0
> 
> 时间：2013-03-07T02:15:04.237
> 
> 标签：ios, objective-c, uiscrollview

我已经搜索了很长一段时间，我找到的每个答案似乎都不起作用。我有一个视图，下面的代码，它包含一堆从另一个视图的 YouTube 视频描述中提取的文本。显然，视频的描述长度不同，这就是问题所在。我想让滚动视图只在标签的最后一个文本行之后向下滚动到大约 10 个像素。

在这段代码中，我没有这样做，我有它的固定大小。

任何人都可以帮忙吗？我一直在寻找几天，我似乎可以找到一个合适的解决方案。

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

VideoDescription = [VideoDescription stringByTrimmingCharactersInSet:
                    [NSCharacterSet whitespaceAndNewlineCharacterSet]];

//int a = VideoDescription.length;
//NSLog([NSString stringWithFormat:@"%i", a]);

if(VideoDescription.length < 310)
{
    VideoDescription = [VideoDescription stringByAppendingString:@"\n_______________________________________________"];
    VideoDescription = [VideoDescription stringByAppendingString:@"\n\nFor the best viewing experience, please use WiFi."];
    VideoDescription = [VideoDescription stringByAppendingString:@"\n\nWant an app like this for your YouTube Channel? Go to www.apps4tubers.com to find out how you can get one!"];
    VideoDescription = [VideoDescription stringByAppendingString:@"\n\nDon't forget to rate this app! Love it? Hate it? Regardless we love to hear your comments and suggestions!"];
}
else if(VideoDescription.length < 380)
{
    VideoDescription = [VideoDescription stringByAppendingString:@"\n_______________________________________________"];
    VideoDescription = [VideoDescription stringByAppendingString:@"\n\nFor the best viewing experience, please use WiFi."];
    VideoDescription = [VideoDescription stringByAppendingString:@"\n\nWant an app like this for your YouTube Channel? Go to www.apps4tubers.com to find out how you can get one!"];
}
else if(VideoDescription.length > 379 && VideoDescription.length < 410)
{
    VideoDescription = [VideoDescription stringByAppendingString:@"\n_______________________________________________"];
    VideoDescription = [VideoDescription stringByAppendingString:@"\n\nWant an app like this for your YouTube Channel? Go to www.apps4tubers.com to find out how you can get one!"];
}
else
{
    VideoDescription = [VideoDescription stringByAppendingString:@"\n\nFor the best viewing experience, please use WiFi."];
}

CGRect scrollViewFrame = CGRectMake(0, 0, 320, 480);
TheView = [[UIScrollView alloc] initWithFrame:scrollViewFrame];
CGSize scrollViewContentSize = CGSizeMake(320, 650);
[TheView setContentSize:scrollViewContentSize];
[TheView setPagingEnabled:NO];
TheView.showsHorizontalScrollIndicator = NO;
TheView.showsVerticalScrollIndicator = YES;
TheView.bounces = NO;
[self.view addSubview:TheView];

UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
self.navigationItem.backBarButtonItem = backButton;

Background = [[UILabel alloc] initWithFrame: CGRectMake(00, 25, 1000, 1600)];
Background.center = CGPointMake(00, 00);
Background.backgroundColor = [self colorWithHexString:@"111625"];
[TheView addSubview: Background];

VideoDecrip = [[UILabel alloc] initWithFrame: CGRectMake(00, 25, 320, 400)];
VideoDecrip.center = CGPointMake(160.5, 400);
VideoDecrip.text = VideoDescription;
VideoDecrip.font = [UIFont fontWithName: @"Cochin-Bold" size: 13.5];
VideoDecrip.textColor = [self colorWithHexString:@"D1E751"];
VideoDecrip.shadowColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:.35];
VideoDecrip.layer.shadowOpacity = 0;
VideoDecrip.shadowOffset = CGSizeMake(1,1);
VideoDecrip.layer.masksToBounds = NO;
VideoDecrip.backgroundColor = [UIColor clearColor];
VideoDecrip.textAlignment = NSLineBreakByWordWrapping;
VideoDecrip.adjustsFontSizeToFitWidth = YES;
VideoDecrip.numberOfLines = 0;
[VideoDecrip sizeToFit];
[TheView addSubview: VideoDecrip];

NSLog(@"%i", VideoDecrip.text.length);

VideoTitleBorder = [[UILabel alloc] initWithFrame: CGRectMake(00, 25, 320.5, 30)];
VideoTitleBorder.center = CGPointMake(160, 182.5);
VideoTitleBorder.shadowOffset = CGSizeMake(1,1);
VideoTitleBorder.backgroundColor = [self colorWithHexString:@"0B486B"];
VideoTitleBorder.layer.borderColor = [UIColor darkGrayColor].CGColor;
VideoTitleBorder.layer.borderWidth = .4;
[TheView addSubview: VideoTitleBorder];

VideoTitle = [[UILabel alloc] initWithFrame: CGRectMake(00, 25, 320, 26)];
VideoTitle.text = VidTitle;
if([VideoTitle.text length] < 20)
{
    VideoTitle.center = CGPointMake(160, 182.5);
}
else if([VideoTitle.text length] < 30)
{
    VideoTitle.center = CGPointMake(160, 182);
}
else
{
    VideoTitle.center = CGPointMake(160, 179);
}
VideoTitle.font = [UIFont fontWithName: @"ArialRoundedMTBold" size: 25];
VideoTitle.textColor = [self colorWithHexString:@"BEF202"];
VideoTitle.shadowColor = [UIColor blackColor];
VideoTitle.backgroundColor = [UIColor clearColor];
VideoTitle.shadowOffset = CGSizeMake(1,1);
VideoTitle.textAlignment = NSTextAlignmentCenter;
VideoTitle.adjustsFontSizeToFitWidth = YES;
[TheView addSubview: VideoTitle];

VideoTitleBorder2 = [[UILabel alloc] initWithFrame: CGRectMake(00, 25, 160, 500)];
VideoTitleBorder2.center = CGPointMake(400, 125);
VideoTitleBorder2.shadowOffset = CGSizeMake(1,1);
VideoTitleBorder2.backgroundColor = [self colorWithHexString:@"0B486B"];
VideoTitleBorder2.layer.borderColor = [UIColor darkGrayColor].CGColor;
VideoTitleBorder2.layer.borderWidth = 2.0;
[self.view addSubview: VideoTitleBorder2]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:45:00.600

尝试`sizeToFit`在标签上使用，然后设置滚动视图`contentSize`：

```
[label sizeToFit];  
[scrollView setContentSize:CGSizeMake(CGRectGetWidth(self.view.frame), CGRectGetHeight(label.frame) + 10)]; 
```

使用`sizeToFit`非常好，只需确保您的标签在调用之前已经是正确的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:44:18.450

简而言之，您可以使用该`NSString`方法`-sizeWithFont:forWidth:lineBreakMode:`来确定字符串将在具有给定宽度和换行模式的容器中呈现多高。您可以使用它来调整大小`UILabel`并适当地设置滚动视图的内容大小。

# javascript - 'null' 不是 Google 图表的对象（选择菜单、onchange 事件的问题）

> ID：15261862
> 
> 赞同：2
> 
> 时间：2013-03-07T02:15:11.187
> 
> 标签：javascript, jquery, select, google-visualization, onchange

我正在使用以下脚本：

```
<header>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
</header>

<body>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Header');
    data.addColumn('number', '');
    data.addColumn('number', '');
    data.addRows([
      ['Monday',300,43],
      ['Tuesday',250,545],
      ['Wednesday',122,78],
      ['Thursday',348,92],
      ['Friday',23,61],
      ['Saturday',39,93]
    ]);
    var options = {
      title: '',
      hAxis: {title: '',  titleTextStyle: '#efede9'},
      backgroundColor: '#efede9',
      legend: 'none'
    };
    var chart = new google.visualization.AreaChart(document.getElementById('area_chart_google'));
    chart.draw(data, options);
  }
</script>

<div id="area_chart_google" class="area-chart"></div>
<body> 
```

我无法在 Header 中使用脚本，因为我使用的是动态内容。

当我第一次加载页面并刷新它之后，我发现它可以工作。我现在的问题是我正在使用带有 onchange 事件的选择菜单，类似于：

```
<select id="form_frame1" name="frame1" onchange="getChart(this);">
 <option value="area_chart_google" >Area Chart</option>
 <option value="area_chart_2" selected="selected">Stacked Chart</option>
</select> 
```

我的 getChart 函数是：

```
function getChart(selection) {
 if (selection.value == "area_chart_2") {
    document.getElementById('area_chart_2').style.display = 'block';
    document.getElementById('area_chart_google').style.display = 'none';
}

 else {   
    document.getElementById('area_chart_2').style.display = 'none';
    document.getElementById('area_chart_google').style.display = 'block';
   }
} 
```

因此，一旦我的 area_chart_google 未显示（显示：无）并且我选择它，我就会收到错误消息：

```
*Firebug* google-visualization-errors-all-1 
*Chrome* Cannot read property 'length' of null
*Safari* 'null' is not an object 
```

我猜是**getElementById**的东西，所以我尝试使用：

```
window.onload = function(){ javascript code here } 
```

并且：

```
$(document).ready(function() {
   javascript code here
});​ 
```

什么都没发生。我没有收到任何错误，但图表没有出现。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:41:47.843

这对我有用：

```
function getChart(selection) {
  if (selection.value == "area_chart_2") {
  document.getElementById('area_chart_2').style.display = 'block';
  document.getElementById('area_chart_google').style.display = 'none';
}

else {   
  document.getElementById('area_chart_2').style.display = 'none';
  document.getElementById('area_chart_google').style.display = 'block';
  drawChart(); //call this function when using this Google Chart
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:26:26.203

您需要先加载 Google API：

`<script type="text/javascript" src="http://www.google.com/jsapi"></script>`

您的脚本中还应该有适当的`<body>`和`<head>`标签。

否则代码很好。以下对我来说很好：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Header');
        data.addColumn('number', '');
        data.addColumn('number', '');
        data.addRows([
          ['Monday',300,43],
          ['Tuesday',250,545],
          ['Wednesday',122,78],
          ['Thursday',348,92],
          ['Friday',23,61],
          ['Saturday',39,93]
        ]);
        var options = {
          title: '',
          hAxis: {title: '',  titleTextStyle: '#efede9'},
          backgroundColor: '#efede9',
          legend: 'none'
        };
        var chart = new google.visualization.AreaChart(document.getElementById('area_chart_google'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body> 
    <div id="area_chart_google" class="area-chart"></div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:26:47.700

不确定，但尝试这样做：

```
google.load("visualization", "1", {packages:["corechart"]});
//..your drawChart() function code here
$(document).ready(function() {
  google.setOnLoadCallback(drawChart);
}); 
```

我希望您已经在标题中包含以下脚本：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

# sql - SQL Server Express 2012 外键不会填充到表中

> ID：15261863
> 
> 赞同：0
> 
> 时间：2013-03-07T02:15:17.243
> 
> 标签：sql, sql-server, null, foreign-keys

我在这里不知所措，所以任何帮助将不胜感激。这是我正在运行的三个查询：

```
CREATE TABLE Contact
(ContactID  VARCHAR(10) NOT NULL,
ContactCompanyName  VARCHAR(80),
ContactFirstName    VARCHAR(30),
ContactLastName VARCHAR(30),
EmployeeID  VARCHAR(15),
CONSTRAINT Contact_PK PRIMARY KEY (ContactID));

GO

CREATE TABLE CompanyRepresentative
(EmployeeID VARCHAR(15) NOT NULL,
RepFirstName    VARCHAR(30),
RepLastName VARCHAR(30),
CONSTRAINT CompanyRepresentative_PK PRIMARY KEY (EmployeeID));

GO 
```

其次是：

```
ALTER TABLE Contact
ADD CONSTRAINT fk_EmployeeID1
FOREIGN KEY(EmployeeID)REFERENCES CompanyRepresentative(EmployeeID);

GO 
```

最后：

```
INSERT dbo.Contact (ContactID, ContactCompanyName, ContactFirstName,    

ContactLastName)
VALUES
('PC7432', 'Krueger Bakeries', 'Brian', 'Jones'),
('PC5317', 'Advanced Data Storage', 'Mark', 'Pulley'),
('PC2931', 'M&D Graphics and Design', 'Mike', 'Dorris'),
('PC1753', 'Apex Digital Solutions', 'Janice', 'Becker'),
('PC8527', 'Infensus Consultants', 'Narbeth', 'Pokrehl');

GO

INSERT dbo.CompanyRepresentative (EmployeeID, RepFirstName, RepLastName)
VALUES
('TBOC53297', 'Mike', 'Hartman'),
('TBOC32781', 'Lynn', 'Kynes'),
('TBOC12783', 'Jason', 'McCann'),
('TBOC43971', 'Susan', 'Mueller'),
('TBOC29753', 'Greg', 'Krebs');

GO 
```

当我跑

```
select * from Contact 
```

EmployeeID 字段不显示表 dbo.CompanyRepresentative 中外键 EmployeeID 的值，而是显示“NULL”。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:20:44.570

你必须`EmployeeID`像这样插入。否则，默认情况下**SQL Server**会插入`NULL`该字段。

```
INSERT dbo.Contact (ContactID, ContactCompanyName, ContactFirstName, ContactLastName, EmployeeID)
VALUES
('PC7432', 'Krueger Bakeries', 'Brian', 'Jones', 'TBOC53297'),
('PC5317', 'Advanced Data Storage', 'Mark', 'Pulley','TBOC32781'),
('PC2931', 'M&D Graphics and Design', 'Mike', 'Dorris','TBOC12783'),
('PC1753', 'Apex Digital Solutions', 'Janice', 'Becker','TBOC43971'),
('PC8527', 'Infensus Consultants', 'Narbeth', 'Pokrehl','TBOC29753');

GO 
```

# java - 字符串加密调度的错误：(char) (ch + key) % 26

> ID：15261875
> 
> 赞同：0
> 
> 时间：2013-03-07T02:16:30.830
> 
> 标签：java, encryption, cryptography

问题一：这里有两个代码微调器。代码 A 运行错误。但我不知道出了什么问题。

问题二：代码B是对的。但我不明白为什么需要删除'A'。然后在 fmod 之后添加“A”。“A”的作用是什么？为什么删除后有错误？

代码 A (ch + key) % 26 )

代码 B ('A' + ((ch -'A' + key) % 26))

```
 public void run() {    
        setFont("Arial-PLAIN-24");
        String line = readLine ("Enter line: ");
        int key = readInt ("Enter key: ");
        String siphertext = encryptCaesar(line , key);
        println("The result is: " + siphertext);
        String newplain = encryptCaesar(siphertext , -key);
        println("newplain:" + newplain);    
    }

    private String encryptCaesar(String str , int key){
        if(key < 0){
            key = 26 - ( -key % 26 );
        }

        String result = "";
        for(int i = 0; i < str.length(); i++){
            char ch = str.charAt(i);        
            result += encryptChar(ch,key);
        }
        return result;
    }

    private char encryptChar(char ch, int key){
        if(Character.isUpperCase(ch)){
            return ( (char) ('A' + ((ch -'A' + key) % 26)) );
        }
        return ch;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:33:45.647

> **15.7.3 余数运算符 %**
> 
> ...从这个规则可以看出，只有当被除数为负时，余数运算的结果才能为负，只有当被除数为正时才能为正。

然后提供了一个示例：

```
int e = (-5)%3; // -2
int f = (-5)/3; // -1
System.out.println("(-5)%3 produces " + e +
                   " (note that (-5)/3 produces " + f + ")"); 
```

如果结果`((ch -'A' + key) % 26))`是否定的，那么结果不是`(char) ('A' + ((ch -'A' + key) % 26))`一些非字母字符吗？也许您需要将 26 添加到任何负值或找到绝对值，以便它们为正值并产生实际的字母字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:45:16.827

**添加'A'**以确保*“encryptChar”*方法的结果是ASCII范围内的有效字符`64 to 90`，即`A (CAPITAL) to Z (CAPITAL)`. [请参阅此处](http://www.asciitable.com/)的 ASCII 表。

在您的代码中减去**“A”**也可以忽略。那就是下面也可以工作，

```
('A' + ((ch + key) % 26)) 
```

# objective-c - 如何为明天早上 8 点创建日期对象

> ID：15261876
> 
> 赞同：2
> 
> 时间：2013-03-07T02:16:34.407
> 
> 标签：objective-c, nsdate, uilocalnotification, nsdatecomponents

我通常对此很满意，但我在处理这个`NSDate`对象时遇到了麻烦。我需要`NSDate`为明天早上 8 点（相对）设置一个对象。我将如何做到这一点，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T02:37:15.983

以下是[WWDC 2011 会议 117 - 执行日历计算](https://developer.apple.com/videos/wwdc/2011/?id=117)教我的方法：

```
NSDate* now = [NSDate date] ;

NSDateComponents* tomorrowComponents = [NSDateComponents new] ;
tomorrowComponents.day = 1 ;
NSCalendar* calendar = [NSCalendar currentCalendar] ;
NSDate* tomorrow = [calendar dateByAddingComponents:tomorrowComponents toDate:now options:0] ;

NSDateComponents* tomorrowAt8AMComponents = [calendar components:(NSEraCalendarUnit|NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:tomorrow] ;
tomorrowAt8AMComponents.hour = 8 ;
NSDate* tomorrowAt8AM = [calendar dateFromComponents:tomorrowAt8AMComponents] ; 
```

可惜iOS没有`[NSDate dateWithNaturalLanguageString:@"tomorrow at 8:00 am"]`。谢谢[rmaddy](https://stackoverflow.com/users/1226963/rmaddy)指出这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-08T13:25:01.923

在**Swift 2.1**中：

```
 let now = NSDate()
    let tomorrowComponents = NSDateComponents()
    tomorrowComponents.day = 1

    let calendar = NSCalendar.currentCalendar()
    if let tomorrow = calendar.dateByAddingComponents(tomorrowComponents, toDate: now, options: NSCalendarOptions.MatchFirst) {

        let flags: NSCalendarUnit = [.Era, .Year, .Month, .Day]
        let tomorrowValidTime: NSDateComponents = calendar.components(flags, fromDate: tomorrow)
        tomorrowValidTime.hour = 7

        if let tomorrowMorning = calendar.dateFromComponents(tomorrowValidTime) {
            return tomorrowMorning
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-10T10:04:27.273

**斯威夫特 3+**

```
private func tomorrowMorning() -> Date? {
    let now = Date()
    var tomorrowComponents = DateComponents()
    tomorrowComponents.day = 1
    let calendar = Calendar.current
    if let tomorrow = calendar.date(byAdding: tomorrowComponents, to: now) {
        let components: Set<Calendar.Component> = [.era, .year, .month, .day]
        var tomorrowValidTime = calendar.dateComponents(components, from: tomorrow)
        tomorrowValidTime.hour = 7
        if let tomorrowMorning = calendar.date(from: tomorrowValidTime)  {
            return tomorrowMorning
        }

    }
    return nil
} 
```

# c# - 如何检查节点是否有一个为空的子元素？

> ID：15261877
> 
> 赞同：0
> 
> 时间：2013-03-07T02:16:46.777
> 
> 标签：c#, xml, linq

我有以下代码，

```
XDocument doc = XDocument.Parse(input);

var nodes = doc.Element(rootNode)
               .Descendants()
               .Where(n => 
                    (n.Value != "0" 
                    && n.Value != ".00" 
                    && n.Value != "false" 
                    && n.Value != "") 
                    || n.HasElements)
               .Select(n => new 
                { 
                    n.Name, 
                    n.Value, 
                    Level = n.Ancestors().Count() - 1, 
                    n.HasElements 
                });

var output = new StringBuilder();    
foreach (var node in nodes)
{
    if (node.HasElements)
    {
        output.AppendLine(new string(' ', node.Level) + node.Name.ToString() + ":");              
    }
else
{
} 
```

我的问题是，如果我的父节点只有一个空子节点，我需要插入一个额外的空行。我不知道如何检查唯一的孩子是否为空。

我可以使用获得后代的数量`Descendants = n.Descendants().Count()`但我不知道如何测试唯一的孩子是否为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:55:11.320

我的理解是，据我了解，您需要所有只有一个子节点的父节点，并且该子节点为空-

这是一个完成此任务的简单测试：它没有专门使用您的示例，但可以完成任务。如果您提供您的 XML 的外观，我可以尝试修改我的示例以适合您的帖子，如果以下内容不容易移植到您的项目中:)

（取自控制台应用程序，但实际获取节点的查询应该可以工作。

```
static void Main(string[] args)
{
    var xml = @"<root><child><thenode>hello</thenode></child><child><thenode></thenode></child></root>";
    XDocument doc = XDocument.Parse(xml);

    var parentsWithEmptyChild = doc.Element("root")
        .Descendants() // gets all descendants regardless of level
        .Where(d => string.IsNullOrEmpty(d.Value)) // find only ones with an empty value
        .Select(d => d.Parent) // Go one level up to parents of elements that have empty value
        .Where(d => d.Elements().Count() == 1); // Of those that are parents take only the ones that just have one element

    parentsWithEmptyChild.ForEach(Console.WriteLine);

    Console.ReadKey();
} 
```

这仅返回第二个节点，即仅包含一个空节点的节点，其中 empty 被假定为 string.Empty 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:58:12.450

我试图自己解决这个问题，这就是我想出的：

```
XDocument doc = XDocument.Parse(input);

         var nodes = doc.Element(rootNode).Descendants()
             .Where(n => (n.Value != "0" && n.Value != ".00" && n.Value != "false" && n.Value != "") || n.HasElements)
             .Select(n => new { n.Name, n.Value, Level = n.Ancestors().Count() - 1, 
                n.HasElements, Descendants = n.Descendants().Count(), 
                FirstChildValue = n.HasElements?n.Descendants().FirstOrDefault().Value:"" });

         var output = new StringBuilder();

         foreach (var node in nodes)
         {            
            if (node.HasElements)
            {               
               output.AppendLine(new string(' ', node.Level) + node.Name.ToString() + ":");
               if (0 == node.Level && 1 == node.Descendants && String.IsNullOrWhiteSpace(node.FirstChildValue))
                  output.AppendLine("");
            } 
```

# git - GitHub 是否会收集拉取请求中引用的悬空提交？

> ID：15261880
> 
> 赞同：30
> 
> 时间：2013-03-07T02:17:07.050
> 
> 标签：git, github, branch

时不时会出现以下情况……</p>

> 我`git checkout -b experiment`，提交一些实验性更改，并打开一个拉取请求。经过一番讨论，拉取请求被拒绝。

如果我现在要删除远程分支，这是否会使差异在某些时候无法访问，或者 GitHub 是否确保出现在拉取请求中的提交不会被垃圾收集，即使它们没有出现在任何分支上？

我想删除死分支，但前提是这样做不会减少被拒绝的拉取请求的历史价值。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-07T10:54:38.863

不，它们不会是 gc，因为即使您删除分支，它们也不是完全未被引用的。

Github 为每个拉取请求创建一个分支（实际上是两个）。它们位于非默认命名空间中，因此当您从存储库中提取（或获取）它们时通常不会得到它们。

要查看它在实践中的样子，请执行 a `git ls-remote <REMOTE>`，其中`<REMOTE>`是远程的名称（如果它是您的 repo 知道的）或 URL（它不需要`git remote add`为它工作）。这个遥控器应该有一些拉取请求，否则你将无法理解我的意思。

这将列出远程上的所有参考（所有分支和标签），您将看到一些参考，例如`refs/pull/<number>/head`和`refs/pull/<number>/merge`。这些分别指的是 PR 中的最新提交和它被合并的提交。

# c++ - 迭代器创建中的 typename 和 typedef

> ID：15261886
> 
> 赞同：0
> 
> 时间：2013-03-07T02:18:11.080
> 
> 标签：c++, templates, typedef, typename

我有这个代码：

```
template <typename T>
class CircularBuffer
{
 public:
  typename typedef std::list<T>::iterator iterator;

  //other code
}; 
```

迭代器声明中的 typename 有什么作用？我知道 typedef 是在说“我有一个列表迭代器，我想称之为'iterator'。但是 typename 的目的是什么？仅仅是因为我的列表可以存储我需要的任何 typename T 吗？是为了什么别的？

谢谢，

汤姆

编辑：是不是因为列表迭代器是一个合格的依赖类型，所以我需要 typename 在它之前？或者，更正确地说，我正在定义的 typedef，基于 std::list::iterator 类型的“迭代器”是一个合格的依赖类型，因为它是一个合格的依赖列表的迭代器？

# android - 在 android 上设置 Google maps API v2，错误膨胀类片段

> ID：15261893
> 
> 赞同：4
> 
> 时间：2013-03-07T02:18:45.073
> 
> 标签：android, google-maps-android-api-2, android-fragmentactivity

因此，我正在关注适用于 android 的 Google maps API v2，试图在屏幕上获取基本地图。完成所有步骤后，我得到一个“错误膨胀类片段”其他人遇到了同样的问题，但似乎没有一个解决方案有效。确切的错误：`android.view.InflateException: Binary XML file line #10: Error inflating class fragment`

.java：

```
import android.os.Bundle;
import android.view.Menu;
import android.support.v4.app.FragmentActivity;

public class GoogleMaps extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_google_maps);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.google_maps, menu);
        return true;
    }

} 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".GoogleMaps" >
    <fragment 
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"
        android:name="com.testing.svma.MainActivity"/>
</RelativeLayout> 
```

我想我已经正确设置了 Google Play 服务，它会在第一次导航到页面时要求下载它们。这是我的project.properties：

```
# Project target.
target=android-17
android.library=false
android.library.reference.1=../../../android-sdks/extras/google/google_play_services/libproject/google-play-services_lib 
```

日志猫：

```
...
03-06 21:12:44.751: I/System.out(9122): Debugger has connected
03-06 21:12:44.751: I/System.out(9122): waiting for debugger to settle...
03-06 21:12:46.166: I/System.out(9122): debugger has settled (1487)
03-06 21:12:50.634: D/dalvikvm(9122): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
03-06 21:12:50.634: W/dalvikvm(9122): VFY: unable to resolve instance field 23
03-06 21:12:50.634: D/dalvikvm(9122): VFY: replacing opcode 0x52 at 0x0012
03-06 21:12:50.634: D/dalvikvm(9122): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
03-06 21:12:51.126: W/dalvikvm(9122): Unable to resolve superclass of Lmaps/p/s; (427)
03-06 21:12:51.126: W/dalvikvm(9122): Link of class 'Lmaps/p/s;' failed
03-06 21:12:51.126: W/dalvikvm(9122): Unable to resolve superclass of Lmaps/y/bo; (3820)
03-06 21:12:51.126: W/dalvikvm(9122): Link of class 'Lmaps/y/bo;' failed
03-06 21:12:51.126: W/dalvikvm(9122): Unable to resolve superclass of Lmaps/i/k; (4208)
03-06 21:12:51.126: W/dalvikvm(9122): Link of class 'Lmaps/i/k;' failed
03-06 21:12:51.126: E/dalvikvm(9122): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-06 21:12:51.126: W/dalvikvm(9122): VFY: unable to resolve new-instance 3540 (Lmaps/i/k;) in Lmaps/z/ag;
03-06 21:12:51.126: D/dalvikvm(9122): VFY: replacing opcode 0x22 at 0x006d
03-06 21:12:51.149: D/dalvikvm(9122): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag; 
```

我已经尝试了这些线程的解决方案，但没有运气：

[膨胀类片段时出错](https://stackoverflow.com/questions/6424853/error-inflating-class-fragment)

[Google Maps V2 - 膨胀类片段时出错](https://stackoverflow.com/questions/14740048/google-maps-v2-error-inflating-class-fragment)

我也只是按照本教程进行操作并得到了同样的错误：

[https://www.youtube.com/watch?v=OZRgiwGfvSQ](https://www.youtube.com/watch?v=OZRgiwGfvSQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T14:17:01.977

我遇到了同样的问题，并尝试了 2 天的每个可能性，但我改变了我的布局 xml 文件，并且在 java 代码中我使用了 supportmapfragment

还从包资源管理器中导入 android 支持库

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

<fragment
        android:name="com.google.android.gms.maps.SupportMapFragment"

        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T14:39:41.270

这个问题通常源于您的项目缺少`android-support`库。发生这种情况是因为旧版本的 api 片段不存在，因此您需要添加此库以便在旧版本的 Android 中添加对片段的支持。

为此，请右键单击您的项目，然后：

![在此处输入图像描述](../Images/33b04ff69d52761b187c4a38d9104cd4.png)

此外，您可以阅读我写的关于在您的应用程序中实现 Google 地图的博客文章：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-01T16:32:02.097

我通过在清单中添加这些行来解决这个问题。

```
<meta-data android:name="com.google.android.gms.version"
       android:value="@integer/google_play_services_version"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-08T04:35:28.283

我有同样的错误并设法通过不同的stackoverflow答案多次尝试来解决它：

不确定哪个/哪个有助于解决问题，但我将仅列出我所做的事情：

*   右键单击项目 -> 属性 -> Android -> 将项目构建目标更改为 Android 4.1.2（Android 开源项目） -> 在库下，删除 google-play-service-lib 并将其添加回来 -> 单击“应用" -> 后面跟着 "OK"
*   右键单击 Project -> Android Tools -> Fix Project Properties (by [Emil Adz](https://stackoverflow.com/a/17171784/1487702) )
*   在课堂上参考谷歌地图（由[Basavaraj Hampali 提供](https://stackoverflow.com/a/17169004/1487702)）

    ```
    private GoogleMap mMap;

    mMap = ((SupportMapFragment) this.getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
    if (mMap== null) {
        Toast.makeText(this,"Map not Available", Toast.LENGTH_LONG).show();
    } 
    ```

*   扩展 android.support.v4.app.FragmentActivity 而不仅仅是“FragmentActivity”（by [ayush1794](https://stackoverflow.com/a/20062770/1487702)）

    ```
    extends android.support.v4.app.FragmentActivity 
    ```

希望它有所帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T12:34:22.913

按照此[链接中的所有步骤](https://developers.google.com/maps/documentation/android/)

你错过了参考谷歌地图在你的代码中添加这个

```
public class GoogleMaps extends FragmentActivity {
    private GoogleMap mMap;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_google_maps);
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.google_maps, menu);
        return true;
    }

} 
```

除了添加地图键，将播放服务添加到项目

# javascript - glDatePicker 日期格式

> ID：15261896
> 
> 赞同：0
> 
> 时间：2013-03-07T02:19:11.770
> 
> 标签：javascript

对不起，

我问如何在 gldatapicker 2 中格式化日期？

经过：

```
 $(window).load(function()
    {

{
    showAlways: true,
    allowMonthSelect: false,
    allowYearSelect: false,
    selectableYears: [2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020],

selectableDateRange: [ { from: new Date(2013, 2, 01), to: new Date(2013, 2, 10) } ] 
```

至：

selectableDateRange: [ { from: new Date(01, 2, 2013), to: new Date(10, 2, 2013) } ]

如果你可以从 12 月改变 = 0

十二月 = 1

谢谢您，很抱歉给您带来麻烦，但我找不到任何答案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T06:10:55.917

我们可以使用“onClick”回调来格式化日期。

```
$('.date-picker').glDatePicker(
    {
        onClick: function(target, cell, date, data) {
            target.val(date.getFullYear() + '-' +
                date.getMonth() + '-' +
                date.getDate());

            if(data != null) {
                alert(data.message + '\n' + date);
            }
        }            
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-10T14:15:31.317

函数GetFormattedDate（今天时间）{

```
//alert((todayTime.getMonth() + 1) + '#' + todayTime.getDate() + '#' +  todayTime.getFullYear());

return  todayTime.getFullYear()+'-'+(todayTime.getMonth() + 1) + '-' + todayTime.getDate() ; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T09:11:13.020

创建一个小函数来转换已经格式化的日期。将格式化的日期解析为函数Assign el a value。

我在这种情况下创建的函数是 toDate

```
`
onClick: (function(el, cell, date, data) {
        var armco= date.toLocaleDateString();       
        armco=toDate(armco);
        el.val(armco);
    })

function toDate(selector) {

    var from = selector.split("/");

    var myformat=from[2]+'-'+from[1]+'-'+from[0];   

    return myformat;
}
` 
```

# kineticjs - Kineticjs 删除多个形状

> ID：15261897
> 
> 赞同：1
> 
> 时间：2013-03-07T02:19:12.337
> 
> 标签：kineticjs

我添加了 10 个可拖动的矩形，我希望能够在它们被一个一个单击时将它们删除。现在它只删除第一个，然后不再删除。是否可以向矩形 ID 添加点击事件？

[http://jsfiddle.net/dmYbA/](http://jsfiddle.net/dmYbA/)

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 400
  });

  var layer = new Kinetic.Layer();

for (var i = 0; i< 10; i++) {

  var rect = new Kinetic.Rect({
    x: 239 + (i *3),
    y: 75 + (i * 3),
    width: 100,
    height: 50,
    fill: 'blue',
    stroke: 'black',
    strokeWidth: 4,
      draggable: true,
      id: i
  });

rect.on('click', function() {
   rect.hide();

});

  // add the shape to the layer
  layer.add(rect);

  // add the layer to the stage
  stage.add(layer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:26:05.317

为了能够一次删除每个矩形，我首先将新层移动到 for 循环内。我还添加了一个组，每个矩形都添加到其中。然后在 rect.on 内部将其设置为 this.remove() 而不是 rect.remove()。

[http://jsfiddle.net/DP53S/](http://jsfiddle.net/DP53S/)

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 400
  });

for (var i = 0; i< 10; i++) {
   var group = new Kinetic.Group({
    draggable: true
});
  var layer = new Kinetic.Layer();
  var rect = new Kinetic.Rect({
    x: 239 + (i *3),
    y: 75 + (i * 3),
    width: 100,
    height: 50,
    fill: 'blue',
    stroke: 'black',
    strokeWidth: 4
  });

rect.on('click', function() {
   this.remove();
   layer.draw();

});

  // add the shape to the layer
  group.add(rect)
  layer.add(group);

  // add the layer to the stage
  stage.add(layer);
} 
```

# ajax - 从 Ajax 返回打印 json 值

> ID：15261898
> 
> 赞同：0
> 
> 时间：2013-03-07T02:19:16.590
> 
> 标签：ajax, json

我不知道为什么我的代码没有在屏幕上打印键和值。警报消息是“[对象错误]”。

你能告诉我如何在屏幕上打印键和值巴黎吗？

索引.html

```
<script>
$.ajax({
       type: "POST",
       url: "image_finder.php",
       data: dataString,
       dataType: 'json',
       error:function(xhr,status,e){       
            alert('Error');
       },
       success: function(data) {
         $.each(data, function(key, val) {
            alert(key); // problem 
         });

       },
       error:function(xhr, status, error) {
           alert(error);
       }

    });
</script> 
```

json返回

```
test{"tags":[{"cid":"14","url":"http:\/\/localhost\/","img_url":"http:\/\/static.naver.net\/www\/up\/2013\/0305\/mat_173330634c.jpg","img_name":"mat_173317134c.jpg","html":"<div id=\"hotspot-19\" class=\"hs-wrap hs-loading\">\r\n<img src=\"http:\/\/static.naver.net\/www\/up\/2013\/0305\/mat_173330634c.jpg\">\r\n<div class=\"hs-spot-object\" data-type=\"spot\" data-x=\"95\" data-y=\"64\" data-width=\"30\" data-height=\"30\" data-popup-position=\"left\" data-visible=\"visible\" data-tooltip-width=\"200\" data-tooltip-auto-width=\"true\">\r\nasdf\r\n<\/div>\r\n<div class=\"hs-spot-object\" data-type=\"spot\" data-x=\"168\" data-y=\"53\" data-width=\"30\" data-height=\"30\" data-popup-position=\"left\" data-visible=\"visible\" data-tooltip-width=\"200\" data-tooltip-auto-width=\"true\">\r\nrere\r\n<\/div>\r\n<\/div>\r\n","jscript":""}]} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T02:21:45.653

您正在返回无效的 JSON `image_finder.php`- 寻找一个流浪者`print 'test';`或`echo 'test';`在`image_finder.php`.

您可以使用[http://jsonlint.com/](http://jsonlint.com/)之类的服务来验证从后端脚本返回的 JSON。当 JSON 无效时，jQuery 会出错，这就是为什么 Alert 消息是`[Object Error]`

# java - java有频率表吗？

> ID：15261899
> 
> 赞同：3
> 
> 时间：2013-03-07T02:19:22.150
> 
> 标签：java, object

Java 有内置的频率表吗？我记得在我的一个类中使用了一个，并且我知道 Python 有一个，但我不记得是我自己构建了一个，还是 Java 有一个可供使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T02:23:55.520

我假设“频率表”是指价值计数图。
答案是**否定**的。

但是，创建一个表现良好的人并不是一件容易的事：

```
Map<T, Integer> freq = new HashMap<T, Integer> () {
    @Override
    public Integer get(Object key) {
        return containsKey(key) ? super.get(key) : 0;
    }
} 
```

然后，在使用时，您不必在获取频率时使用空检查使代码混乱：

```
freq.get(value);  // returns zero for not found 
```

或者在递增时：

```
freq.put(value, freq.get(value) + 1); // always works, won't throw NPE etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:22:47.430

不是内置的，但您可以检查[Apache Commons Statistics](http://commons.apache.org/proper/commons-math//userguide/stat.html)。它有一个简单的频率表构建器，允许查找频率、累积频率、计数等。

# ms-access - 有没有比 DLookup 更快的替代品？

> ID：15261902
> 
> 赞同：2
> 
> 时间：2013-03-07T02:19:37.433
> 
> 标签：ms-access, vba, ms-access-2007

我`DLookup`用来搜索表中的字段。它运行正确，但速度很慢。我有什么办法可以加快速度吗？

这是我现有的代码：

```
Private Sub cmdLogin_Click()

strUserLevel = ""

If IsNull(Me.cmbUserName) Or Me.cmbUserName = "" Then
    MsgBox "You must enter a User Name.", vbOKOnly, "Required Data"
    Me.cmbUserName.SetFocus
    Exit Sub
End If

If IsNull(Me.txtPassword) Or Me.txtPassword = "" Then
        MsgBox "You must enter a Password.", vbOKOnly, "Required Data"
        Me.txtPassword.SetFocus
    Exit Sub
End If

'strUserName = cmbUserName.Value

If Me.txtPassword.Value = DLookup("Password", "tableUser", "[lngEmpID]=" & Me.cmbUserName.Value) Then
    lngMyEmpID = Me.cmbUserName.Value
    strUserLevel = DLookup("Department", "tableUser", "[lngEmpID]=" & Me.cmbUserName.Value)
    strUserName = DLookup("User_Name", "tableUser", "[lngEmpID]=" & Me.cmbUserName.Value)
    boolInventoryMDL = DLookup("Inventory", "tableDepartment", "[Department]=""" & strUserLevel & """")
    boolDispositionMDL = DLookup("Disposition", "tableDepartment", "[Department]=""" & strUserLevel & """")
    boolReviewCloseMDL = DLookup("Review", "tableDepartment", "[Department]=""" & strUserLevel & """")
    boolAdministratorMDL = DLookup("Administrator", "tableDepartment", "[Department]=""" & strUserLevel & """")
    boolUserListMDL = DLookup("UserList", "tableDepartment", "[Department]=""" & strUserLevel & """")
    boolUserLevelMDL = DLookup("UserLevel", "tableDepartment", "[Department]=""" & strUserLevel & """")

    If strUserLevel = "Superuser" Then
        MsgBox "Welcome back Superuser! You can access all the modules here..", vbOKOnly, "Caution"
    Else
        MsgBox "Welcome! Login Success!", vbOKOnly, "Login Page"
    End If
    DoCmd.Close acForm, "frmLogin", acSaveNo
    DoCmd.OpenForm "frmModule"

Else
    MsgBox "Password Invalid.  Please Try Again", vbOKOnly, "Invalid Entry!"
    Me.txtPassword.Value = ""
    Me.txtPassword.SetFocus
End If 
```

结束子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:03:01.603

我不认为问题是由于`DLookup`. 相反，问题在于代码使用了很多。

根据查询打开一个记录集，`tableUser`并从该记录集中获取您需要的值。然后从查询中打开第二个记录集`tableDepartment`并获取剩余值。

```
Dim db As DAO.database
Dim qdf As DAO.QueryDef
Dim rs As DAO.Recordset
Dim strSelect As String

strSelect = "SELECT u.Password, u.Department, u.User_Name" & vbCrLf & _
    "FROM tableUser AS u WHERE u.lngEmpID = [which_EmpId];"
Set db = CurrentDb
Set qdf = db.CreateQueryDef(vbNullString, strSelect)
qdf.Parameters("which_EmpId") = Me.cmbUserName
Set rs = qdf.OpenRecordset(dbOpenSnapshot)
If Not rs.EOF Then
    If rs![Password] = Me.txtPassword Then
        strUserLevel = rs!Department
        strUserName = rs!User_Name
        rs.Close

        ' open another recordset from a query of tableDepartment
        ' to retrieve your bool????? values

    End If
End If 
```

在那个缩写示例中，我使用了一个临时`QueryDef`的参数化`SELECT`查询。但是，您最好将该 SQL 保存为命名查询，也许是*qryFetchUserData*。然后在运行时，您可以简单地打开保存的查询，而不是每次都重新创建查询。

```
Set qdf = db.QueryDefs("qryFetchUserData") 
```

为获得最佳性能，您应该添加索引`tableUser.lngEmpID`，`tableDepartment.Department`如果它们尚未编入索引。

# matlab - 用 Matlab 找到线性独立向量的最大子集

> ID：15261904
> 
> 赞同：-1
> 
> 时间：2013-03-07T02:19:39.423
> 
> 标签：matlab, matrix

我需要创建一个 matlab 函数，该函数在矩阵 A 中找到最大的线性独立向量子集。

将程序的输出初始化为0，对应于空集（不包含列向量）。从左到右一一扫描A的列；如果将当前列向量添加到目前找到的线性独立向量集使新的向量集线性相关，则跳过该向量，否则将该向量添加到解集；并移至下一列。

```
function [ out ] = maxindependent(A) 
%MAXINDEPENDENT takes a matrix A and produces an array in which the columns 
%are a subset of independent vectors with maximum size. 
[r c]= size(A); 
out=0; 
A=A(:,rank(A)) 
for jj=1:c 
  M=[A A(:,jj)] 
  if rank(M)~=size(M,2) 
    A=A 
  elseif rank(M)==size(M,2) 
    A=M 
  end 
end 
out=A 

if max(out)==0 
 0; 
end 

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:29:24.623

矩阵中线性独立向量的数量等于矩阵的[秩](http://en.wikipedia.org/wiki/Matrix_rank)，并且线性独立向量的特定子集不是唯一的。任何线性独立向量的“最大子集”都将具有等于秩的大小。

在 MATLAB 中有一个函数：

```
n = rank(A); 
```

您描述的算法不是必需的；你应该只使用SVD。这里有一种简洁的方法：[如何在 MATLAB 中给定一组向量，获取最大独立向量？](https://stackoverflow.com/questions/5721523/how-to-get-the-maximally-independent-vectors-given-a-set-of-vectors-in-matlab)

# service - 致命——未提供主机名：'api.vcap.me/services/v1/offerings'

> ID：15261905
> 
> 赞同：0
> 
> 时间：2013-03-07T02:19:54.157
> 
> 标签：service, cloud-foundry

全部

在cloudfoundry中配置echo服务，echo_gateway输出控制台启动如下

```
[2013-03-07 09:53:56.135519] echo_gateway - pid=25534 tid=a837 fid=d765  
FATAL -- Hostname not supplied: 'api.vcap.me/services/v1/offerings' ruby-1.9.2-p180/lib/ruby/gems/1.9.1/ruby/1.9.1/gems/addressable-2.2.8/lib/addressable/uri.rb:2253:in `validate'|
ruby-1.9.2-p180/lib/ruby/gems/1.9.1/ruby/1.9.1/gems/addressable-2.2.8/lib/addressable/uri.rb:1193:in `port='|
ruby-1.9.2-p180/lib/ruby/gems/1.9.1/ruby/1.9.1/gems/em-http-request-1.0.0.beta.3/lib/em-http/http_options.rb:41:in `set_uri'|
ruby-1.9.2-p180/lib/ruby/gems/1.9.1/ruby/1.9.1/gems/em-http-request-1.0.0.beta.3/lib/em-http/http_options.rb:8:in `initialize'|
ruby-1.9.2-p180/lib/ruby/gems/1.9.1/ruby/1.9.1/gems/em-http-request-1.0.0.beta.3/lib/em-http/request.rb:7:in `new'|
ruby-1.9.2-p180/lib/ruby/gems/1.9.1/ruby/1.9.1/gems/em-http-request-1.0.0.beta.3/lib/em-http/request.rb:7:in `new'|
/home/zhangyunpeng/cloudfoundry/vcap/services/echo/vendor/cache/vcap-services-base-0346efd96d31/lib/base/catalog_manager_base.rb:24:in `create_http_request'|
/home/zhangyunpeng/cloudfoundry/vcap/services/echo/vendor/cache/vcap-services-base-0346efd96d31/lib/base/catalog_manager_v1.rb:130:in `advertise_service_to_cc'|
/home/zhangyunpeng/cloudfoundry/vcap/services/echo/vendor/cache/vcap-services-base-0346efd96d31/lib/base/catalog_manager_v1.rb:56:in `block (2 levels) in update_catalog'|
/home/zhangyunpeng/cloudfoundry/vcap/services/echo/vendor/cache/vcap-services-base-0346efd96d31/lib/base/catalog_manager_v1.rb:55:in `each'|
/home/zhangyunpeng/cloudfoundry/vcap/services/echo/vendor/cache/vcap-services-base-0346efd96d31/lib/base/catalog_manager_v1.rb:55:in `block in update_catalog' 
```

在 VMC 中，通过 VMC info --services 无法列出回显服务选项。

我觉得和我的Vcap环境有关，因为代码一样，在同事那里可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:04:06.060

我建议你看看这里：http: [//support.cloudfoundry.com/entries/20485171-How-to-Add-a-System-Service-to-OSS-Cloud-Foundry-Step-by-Step -指南](http://support.cloudfoundry.com/entries/20485171-How-to-Add-a-System-Service-to-OSS-Cloud-Foundry-Step-by-Step-guide)。

# mongodb - 使用 Mongodb 的 java 驱动程序，如何在同一字段上搜索多个值？

> ID：15261909
> 
> 赞同：3
> 
> 时间：2013-03-07T02:20:29.783
> 
> 标签：mongodb, mongodb-java

我对 mongo 有点陌生。我想在一个字段上查询多个值。在 SQL 中，我想要这样的东西：

```
select * from table where field in ("foo","bar") 
```

假设我在 mongodb 中有以下文件

```
{
  "_id":"foo"
}
{
  "_id":"bar"
} 
```

我只是想模仿这个查询：

```
db.coll.find( { _id: { $in: [ "foo", "bar" ] } } ); 
```

我想检索 _id 为“foo”或“bar”的所有文档。我想使用java驱动程序来做到这一点。

我尝试了类似的东西

```
BasicDBObject query = new DBObject()
query.append("_id","foo");
query.append("_id","bar");
collection.find(query); 
```

但这似乎只返回“bar”文件。

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T03:03:42.637

要使用运算符，使用这样创建查询`$in`可能更容易：`QueryBuilder`

```
QueryBuilder qb = new QueryBuilder();
qb.put("_id").in(new String[] {"foo", "bar"});
collection.find(qb.get()); 
```

或者更干净一点：

```
DBObject query = QueryBuilder.start("_id").in(new String[] {"foo", "bar"}).get();
collection.find(query); 
```

# javascript - 如何在文本框中输入值（嵌套在表单中的 HTML 表中）并将其传递给 Javascript 函数

> ID：15261912
> 
> 赞同：0
> 
> 时间：2013-03-07T02:20:49.727
> 
> 标签：javascript, forms, jsp, html-table, textbox

我有一个 JSP，并且访问了一个 bean 的 ArrayList 来填充一个包含产品详细信息的 HTML 表。该表还显示了一个“数量”文本框，当用户填写该文本框时，应将值传递给 JS 函数。JS 函数反过来应该计算产品的总价格（“数量”*“单价”）。我正在尝试访问“数量”文本框并获取其值 onChange，但我只得到空值或未定义。我已经尝试了许多在线可用的解决方案（尤其是 SO），但这不起作用。任何帮助将不胜感激。

我的代码如下所示：

JS代码

```
<script type = "text/javascript">
    function calculateTotalPrice(tbval) {

 var t = tblContents.getElementsByTagName('qtyText')[0];
     alert("total qty is :" +t);
 var x = tblContents.getElementsByTagName('price')[0];
     alert("price is :" +x);
 var y = t*x;
 var h = tblContents.getElementsByTagName('totalPrice')[0];
 h.value = y;
alert("price set")
</script> 
```

JSP 代码

```
<table>
 <c:forEach items="${beanListInServlet1}" var= "exBean">
    <form action="ExampleServlet" method = "post" name = "tableForm">
       <input type="hidden" name="Id" value= "<c:out Value = "${exBean.Id}"/>"  />

<tr>         
      <td>
        <c:out Value = "${exBean.price}"/>            
      </td>

      <td>
        <input name = "qtyText" type = "textbox" size = "2"  defaultValue = "0" onChange         
          = "calculateTotalPrice()"/>
      </td>

      <td>
         <input name ="price" type = "hidden" value= "<c:out Value = "${exBean.price}"/>"  />
         <input name = "totalprice" type = "textbox" border = "0" size = "2" defaultValue    
           = "0" />          
      </td>
   </c:forEach>  
  </form>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:32:02.703

你需要把它传递*给*你的函数调用，ala

```
 calculateTotalPrice(this)

 here is some addition info:

  function calculateTotalPrice(tbval) {

 myForm = document.forms[0];
 txtEntry = tbval.value;// or myForm.elements["name"].value
        alert("total qty is :" + txtEntry);
    var x = myForm.elements["price"].value
        alert("price is :" +x);
    var y = txtEntry*x;
    var h = tblContents.getElementsByTagName('totalPrice')[0];
  //  h.value = y;
  //  alert("price set") 
```

# ruby-on-rails - Rails 基于 cookie 的会话：将会话范围与过期时间混合

> ID：15261914
> 
> 赞同：3
> 
> 时间：2013-03-07T02:21:10.903
> 
> 标签：ruby-on-rails, session

所以我在[这里](https://stackoverflow.com/questions/14712968/session-expiration-not-working-in-rails/14713390#14713390)以不同的方式提出了这个问题，但没有得到答案，所以我将尝试重新措辞，因为这似乎是一个非常简单的问题。

我有一个带有基于 cookie 的会话的 Rails 应用程序。默认情况下，它们没有任何 expires_at 时间戳，因此会话 cookie 的范围是“会话”。这是你的香草 Rails 会话的东西。

现在我想创建一个“演示用户”功能，我会在 15 分钟后将用户踢出。为此，我想在 Time.now + 15.minutes 的会话 cookie 上设置 expires_at

```
session[:expires_at] = Time.now + 15.minutes
```

现在上面的这段代码确实执行了，但它对 cookie 的范围没有影响。范围仍然是“会话”。如何将范围从“会话”更改为日期时间？

如果我在 production.rb 中将整个应用程序的 Session 配置为

```
:expire_after => 24.hours
```

然后它会工作......但问题是我想有选择地控制会话cookie的到期日期。

**编辑**：事实证明，当我设置 session[:expires_at] 时对 cookie 的范围没有影响的原因是因为后续请求正在破坏会话 cookie 并将其重置回会话。仍然不确定该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:07:17.567

也许不是依赖 cookie 过期（请参阅[“Ruby On Rails 安全指南”](http://guides.rubyonrails.org/security.html)中的第 2.9 节，了解它为什么不好），类似于[这个答案](https://stackoverflow.com/questions/5860950/setting-session-timeout-in-rails-3)，在会话本身（例如）中存储会话创建时的时间戳`session[:created_at]`，然后检查每个请求如果这些“演示用户”需要过期：

```
before_filter :check_session

def check_session
  # TODO: check session validity
  if session[:demo_user] && session[:created_at] > 15.minutes.ago
    reset_session
    # TODO: redirect to login page
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:36:53.293

虽然不是非常优雅的方式，但这适用于单个会话：

```
...
request.env['rack.session.options'] = {expire_after: 15.minutes}
session[:user_id] = 1
... 
```

# regex - 正则表达式：忽略“！” 区分/合并两个带有以“！”开头的注释的文件

> ID：15261916
> 
> 赞同：1
> 
> 时间：2013-03-07T02:21:38.953
> 
> 标签：regex, merge, fortran, diff

我想合并 - 或至少区分 - 两个 Fortran 名称列表文件，同时忽略空格。和以 . 开头的行`!`。

我试过了

```
diff -w -u -I '!.*' FILE1 FILE2 
diff -w -u -I '\!.*' FILE1 FILE2
meld FILE1 FILE2 
```

但没有 regex-fu 似乎无法忽略！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:25:08.780

使用 时`-I`，`diff`仅跳过*每个*更改的行与正则表达式匹配的大块。因此，您需要提前过滤掉这些行。

假设您使用的是 shell `bash`，您可以使用*进程替换*：

```
diff -w -u <(grep -v '^!' FILE1) <(grep -v '^!' FILE2) 
```

请注意，这可能会更改报告的行号和统一的输出。

# sql - 多表 SQL 查询返回意外结果

> ID：15261917
> 
> 赞同：1
> 
> 时间：2013-03-07T02:21:45.447
> 
> 标签：sql, sql-server, database, relational-database

我有一张名为“ELEMENTS”的桌子。在此查询中，结果应该与 ELEMENTS 中的行数一样多。

ELEMENT 表具有与其他表中的文本值相对应的数值。我画了这张有关系的图。线条表示相应的键，圆圈是我需要的文本值。

![在此处输入图像描述](../Images/9580e00cc86d62c9b2408afc08313247.png)

这是我的查询：

```
SELECT  ELEMENTS.RID,
        TAXONOMIES.SHORT_DESCRIPTION,
        type,
        ELEMENT_NAME,
        ELEMENT_ID,
        SUBSTITUTION_GROUPS.DESCRIPTION,
        namespace_prefix,
        datatype_localname 
FROM ELEMENTS,SUBSTITUTION_GROUPS,TAXONOMIES,SCHEMAS,DATA_TYPES  
WHERE
    ELEMENTS.TAXONOMY_ID = TAXONOMIES.RID AND
    ELEMENTS.SUBSTITUTION_GROUP_ID = SUBSTITUTION_GROUPS.RID AND 
    ELEMENTS.ELEMENT_SCHEMA_ID = SCHEMAS.RID AND
    ELEMENTS.DATA_TYPE_ID = DATA_TYPES.RID 
```

当我应该有数千条记录时，这给了我 20 条左右的记录。我查看了记录，但无法找出它正在显示的记录中的模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:27:38.350

据推测，您的维度要么为 NULL，要么未完全填充。您可以使用以下方法解决此问题`left outer join`：

```
SELECT ELEMENTS.RID, TAXONOMIES.SHORT_DESCRIPTION, type, ELEMENT_NAME, ELEMENT_ID, 
       SUBSTITUTION_GROUPS.DESCRIPTION, namespace_prefix, datatype_localname 
FROM ELEMENTS left outer join
     SUBSTITUTION_GROUPS
     on ELEMENTS.SUBSTITUTION_GROUP_ID = SUBSTITUTION_GROUPS.RID left outer join
     TAXONOMIES
     on ELEMENTS.TAXONOMY_ID = TAXONOMIES.RID left outer join
     SCHEMAS
     on ELEMENTS.ELEMENT_SCHEMA_ID = SCHEMAS.RID left outer join
     DATA_TYPES
     on ELEMENTS.DATA_TYPE_ID = DATA_TYPES.RID 
```

如果你正在学习 SQL，你应该学习：

1.  正确的 ANSI 标准 JOIN 语法
2.  为查询中的每个字段加上其来源表的前缀
3.  使用简短但易于理解的别名，例如元素的“e”和分类的“t”。

# android - 下载多个图像 - 可以下载所有图像但图像都相同

> ID：15261920
> 
> 赞同：1
> 
> 时间：2013-03-07T02:21:50.870
> 
> 标签：android, json, url, download, android-asynctask

我的应用程序从 JSON 获取图像名称。然后我将该名称连接到另一个 url 以下载图像。我可以下载所有图像，但我下载的所有图像都是相同的。例如，我的图像名称 (1,2,3,4,5,6,7) 但是当我下载时，我可以得到它，但都是 (1,1,1,1,1,1,1)。

`DownloadImageTask`我有日志字符串`name`和`reviewImageLink`. 结果很好。它显示不同的名称和网址。但

`DownloadFullImageTask``onPostExcecute`我也记录了 String ，`name`但它显示相同的名称（1,1,1,1,1,1,1）。

我怎样才能下载我所有的图像而不是相同的？

JSON

```
{"pictures": [
{
    "picture_url": "2de19d49ecc640e94b1a306944e161ef.png"
},
{
    "picture_url": "bee57cbb42c364592e7472b442c58868.jpg"
},
{
    "picture_url": "b718041660189162080ff86b09370ec8.jpg"
},
{
    "picture_url": "7022dec80bb604bcbba51d28ce8bc31c.jpg"
},
{
    "picture_url": "0be79b2cd531adf02487e8d54f736c0f.jpg"
},
{
    "picture_url": "2101134bcfc1356df1ff187a8f9510f8.jpg"
},
{
    "picture_url": "2de62e026b3378bbbdfe687cd43d5b0e.jpg"
}]} 
```

AsyncTask 下载图片和json

```
public class DownloadImageTask extends AsyncTask<String, Void, Void> {

@Override
protected Void doInBackground(String... params) {

    placeList = new ArrayList<HashMap<String, String>>();
    JSONParser jParser = new JSONParser();
    JSONObject jsonO = jParser.getJSONUrl(url);

        // for " piture " Object in json
        pictures = jsonO.getJSONArray("pictures");
        for (int i = 0; i < pictures.length(); i++) {
            JSONObject jObj = pictures.getJSONObject(i);
            int cafe_id = jObj.getInt(TAG_CAFE_ID);
            String picture_url = jObj.getString(TAG_PICTURE_URL);

            // Table Picture
            Model_Insert model_Insert = new Model_Insert();
            model_Insert.setCafe_Id(cafe_id);
            model_Insert.setPitureUrl(picture_url);
            model_Insert = dataSource.createTablePicture(model_Insert);
            Log.i("pic", " Picture " + model_Insert.getPitureurl());
            HashMap<String, String> map = new HashMap<String, String>();
            map.put(TAG_PICTURE_URL, picture_url);
            placeList.add(map);

            // Execute DownloadFullImageTask
            reviewImageLink = "http://xxx.xxx/xxx/place_pictures/"+picture_url;
            URL reviewImageURL;
            Log.i("url", reviewImageLink);
            String name = reviewImageLink.substring(reviewImageLink.lastIndexOf("/") + 1);
            try {
                reviewImageURL = new URL(reviewImageLink);
                if (!hasExternalStoragePublicPicture(name)) {
                    isImage = false;
                    new DownloadFullImageTask().execute(reviewImageURL);
                    Log.v("log_tag", "if");
                    isImage = true;
                    File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(),getResources()
                                    .getString(R.string.directory));
                    sdImageMainDirectory.mkdirs();
                    File file = new File(sdImageMainDirectory, name);
                    Log.v("log_tag", "Directory created");
                }

            } catch (MalformedURLException e) {
                Log.v(TAG, e.toString());
            }
        }

    } catch (JSONException e) {
        // TODO: handle exception
    }
    return null;
}

protected void onPostExecute(Void unused) {
     ShowAllContent(); // When Finish Show Content
} 
```

}

AsyncTask 执行 url

```
public class DownloadFullImageTask extends AsyncTask<URL, Integer, Bitmap> {

protected Bitmap doInBackground(URL... paths) {
    URL url;
    try {
        url = paths[0];
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        int length = connection.getContentLength();
        InputStream is = (InputStream) url.getContent();
        byte[] imageData = new byte[length];
        int buffersize = (int) Math.ceil(length / (double) 100);
        int downloaded = 0;
        int read;
        while (downloaded < length) {
            if (length < buffersize) {
                read = is.read(imageData, downloaded, length);
            } else if ((length - downloaded) <= buffersize) {
                read = is.read(imageData, downloaded, length - downloaded);
            } else {
                read = is.read(imageData, downloaded, buffersize);
            }
            downloaded += read;
            publishProgress((downloaded * 100) / length);
        }
        Bitmap bitmap = BitmapFactory.decodeByteArray(imageData, 0,
                length);
        if (bitmap != null) {
            Log.i(TAG, "Bitmap created");
        } else {
            Log.i(TAG, "Bitmap not created");
        }
        is.close();
        return bitmap;
    } catch (MalformedURLException e) {
        Log.e(TAG, "Malformed exception: " + e.toString());
    } catch (IOException e) {
        Log.e(TAG, "IOException: " + e.toString());
    } catch (Exception e) {
        Log.e(TAG, "Exception: " + e.toString());
    }
    return null;
}

protected void onPostExecute(Bitmap result) {
    String name = reviewImageLink.substring(reviewImageLink.lastIndexOf("/") + 1);
    if (result != null) {
        hasExternalStoragePublicPicture(name);
        saveToSDCard(result, name);
        isImage = true;

    } else {
        isImage = false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:58:48.250

在`onPostExecute`您`DownloadFullImageTask`使用公共领域：`reviewImageLink`. 但是这个字段被你的其他任务改变了。要解决此问题，我建议您在 DownloadFullImageTask 中放置一个内部变量，您可以在其中保存来自 doInBackground 的路径 [0] 并改用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:56:22.867

通过多线程加载、内存缓存或外部缓存获得更好的性能。我建议你看看这个图书馆

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

它很强大！

# jersey - 使用 Jetty 6 加载 webapp JAR 的问题

> ID：15261923
> 
> 赞同：0
> 
> 时间：2013-03-07T02:22:02.750
> 
> 标签：jersey, jetty, classloader

我有一个 Jetty 6.1.9 环境，我试图引导一个“爆炸”的 WAR 样式上下文，但是，我收到了 NoClassDefFoundError 错误。

Jetty env 是这样引导的：

```
public class MyServer {

  public static void main(String[] argv) {

         jetty_default = jetty_default + "/web-content/jetty-6.1.9";
         String jetty_home = System.getProperty("jetty.home", jetty_default);

         Server server = new Server();
         Connector connector = new SelectChannelConnector();
         connector.setPort(7895);

         server.setConnectors(new Connector[]{connector});

         WebAppContext myAppCxt= new WebAppContext();
         myAppCxt.setContextPath("/foo");
         myAppCxt.setWar(jetty_home + "/wardirs/myApp");

         myAppCxt.setDefaultsDescriptor(jetty_home + "/etc/webdefault.xml");

         myAppCxt.setInitParams(initParamsMaps);
         myAppCxt.setTempDirectory(aTmpDir);

         server.setHandler(processingNodeAppCxt);
         server.start();

  } 
```

wardirs/myApp 的布局是这样的

*   看守
    *   我的应用程序
        *   网络信息
            *   库\ jdom.jar
            *   web.xml

我得到错误的类在 foo.jar 中。

感觉就像 Jetty 在 WEB-INF/lib 目录中找到了 JAR，因为在启动服务器后 foo.jar 被锁定（我尝试删除它）并且当我杀死服务器时它被解锁。

如果我手动将 JAR 放在运行 MyServer 的 main 方法的 java cmd 行的类路径上，那么一切正常，但是，我希望这些 JAR 存在于 WEB-INF\lib 目录中并按应有的方式自动拾取。

实际的例外是：

```
Mar 06, 2013 9:07:25 PM sun.reflect.NativeMethodAccessorImpl invoke0
SEVERE: /foo/api/process
java.lang.NoClassDefFoundError: org/jdom/Content
    at com.foo.MyManager$Status.createICProcessor(MyManager.java:231)
    at com.foo.myApp.Api.process(API.java:xxx)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:149)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:259)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:83)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:71)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:990)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:941)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:932)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:384)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:451)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:632)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:842)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:648)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450)
Caused by: java.lang.ClassNotFoundException: org.jdom.Content
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 35 more 
```

由于这感觉像是一个类加载器上下文问题，我唯一能想到的另一件事是堆栈跟踪顶行中引用的 MyManager 正在其自己的线程中运行，该线程由 webapp 的 ServletContextListener 启动，如下所示：

```
 myMgrThread = new Thread(myManager);
        long myMgrThreadId = myMgrThread.getId();
        myMgrThread .setName("MyApp_MyMgr-" + myMgrThreadId);
        myMgrThread .setPriority(Thread.NORM_PRIORITY);
        myMgrThread .setDaemon(true);
        myMgrThread .start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:17:49.380

根据您的项目布局，以及那个stacktrace，它找到`com.foo.myApp.Api`并且`com.foo.MyManager`在您的`WEB-INF/lib/foo.jar`就好了，但是它没有找到`org.jdom.Content`

`org.jdom.Content`存在于您`wEB-INF/lib/foo.jar`的? 或者在你没有提到的类似文件中`WEB-INF/lib/jdom.jar`？或者您是否希望`org.jdom.Content`从父类加载器中找到（换句话说，无论`MyServer`类是从哪个类加载器开始的）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:40:13.320

我想我回答了我自己的问题。正在其中运行的 IDE 项目不会将 'webapp' .class 文件移动到“$jetty_home/wardirs/myApp/WEB-INF/classes”中，正如 servlet 规范所期望的那样。相反，它将它们包含在调用 MyServer.main 的类路径中。

当我将应用程序类复制到“$jetty_home/wardirs/myApp/WEB-INF/classes”时，NOCLASSDEFERRORs 消失了。所以现在这些类是 WEB-INF/classes 并且在类路径上调用 main。

正如您可能在这里所说的那样，这个项目在 webapp 和容器之间没有分离关注点。应用程序和码头的所有类和 JARS 都被一起转储了，它“工作”。我一直在尝试将事情分开，以便 webapp 类和依赖的 JAR 被清楚地分开，例如。引入 ServletContextListener 以将之前从“main”引导的 webapp 代码移动到其中，将 JAR 移动到 WEB-INF/lib 等。这就像试图从头发上取下口香糖一样。

# c++ - 如何为 gcc 找到正确的路径来定位库？Debian 7 喘息

> ID：15261924
> 
> 赞同：0
> 
> 时间：2013-03-07T02:22:07.273
> 
> 标签：c++, c, gcc, debian

我怎样才能找到这样的 gcc 命令的正确路径：

```
gcc -O2  -L/usr/X11R6/lib -lX11 -lXext -o viewer viewer.c 
```

我在 /usr/include/X11 和 /usr/include/X11/extensions 中安装了这些库。我不知道用于 -lX11 和 -lXext 的路径

它是默认的 debian 7 Wheeze 安装。无需手动更改路径或类似的东西

# c - C 操作数评估顺序的意外行为

> ID：15261926
> 
> 赞同：0
> 
> 时间：2013-03-07T02:22:15.360
> 
> 标签：c, evaluation, operands

所以只是为了好玩，我有这个代码片段：

```
#include <stdio.h>
main()
{
 int i;
 int a;
 i = 17;
 //scanf("%d", &i);
 a = (i+=5) * (i-=3);
 printf("a is %d, i is %d\n", a, i);
} 
```

在 C 规范中，它说操作数评估的顺序是**undefined**，所以我期望看到 22 * 19 或 19 * 14。但是，结果是 19 * 19：

```
~ $ gcc a.c
~ $ ./a.out
a is 361, i is 19 
```

我想了想，我能想到的唯一解释是编译器对`(i+=5)`' 的值进行了“延迟”评估，它认为`(i+=5)`' 的值只是 i 的值。对于`(i-=3)`.

但是，如果我取消注释`scanf()`：

```
#include <stdio.h>
main()
{
 int i;
 int a;
 i = 17;
 scanf("%d", &i);
 a = (i+=5) * (i-=3);
 printf("a is %d, i is %d\n", a, i);
} 
```

现在我在提示符下输入 17：

```
~ $ gcc a.c
~ $ ./a.out
17
a is 418, i is 19 
```

为什么它表现出不同的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T02:25:38.600

这是**未定义的行为**。C 标准规定，不允许`i`在两个序列点（在这种情况下，语句前后的分号）之间多次修改同一个对象（在这种情况下）。

未定义的行为意味着*任何事情都*可能发生。它看起来可以正常工作。它可能会给出错误的答案。它可能会使您的进程崩溃。它可以擦除您的硬盘驱动器。或者它甚至可以让你的 CPU 着火。根据语言标准，这些都是允许的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-17T19:37:47.827

可能主要区别在于，在您的第一种情况下，可以在它的整个生命周期内预测*i*，因此优化器会预先计算它并用常量值替换变量。

在您的第二个示例中， scanf 使该优化变得不可能。编译器无法提前知道*i*的值是什么，并且执行您所期望的，这是标准未定义的。

# scala - 在 Scala Dispatch 0.9.5 中插入 Oauth 标头的方法？

> ID：15261928
> 
> 赞同：2
> 
> 时间：2013-03-07T02:22:32.677
> 
> 标签：scala, http, http-headers, scala-dispatch

使用相当简单和优雅的 Scala Dispatch HTTP 库。由于 Twitter Search API 现在使用 OAuth 1.0A，我显然需要开始注入 Consumer 和 AccessToken 信息。我在下面有一个简单的请求：

```
val request = url("https://api.twitter.com/1.1/search/tweets.json?q=%23%sresult_type=mixed&count=4" format w.queryValue)
val response = Http(request OK as.String) 
```

如果我已经知道我的 Consumer 和 AccessToken 信息，有什么方法可以向其中添加标头？文档相当稀缺。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T19:53:58.103

我不熟悉 OAuth API，但 Dispatch 允许您使用`<:<`方法/运算符添加任意 HTTP 请求标头。

因此，将上面的代码示例和来自 Twitter 开发者网站的[“授权请求”示例混合在一起，您可能会得到如下内容：](https://dev.twitter.com/docs/auth/authorizing-request)

```
val authentication = """OAuth oauth_consumer_key="xvz1evFS4wEEPTGEFPHBog", oauth_nonce="kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg",  oauth_signature="tnnArxj06cWHq44gCs1OSKk%2FjLY%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1318622958", oauth_token="370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb", oauth_version="1.0""""

val request = url("https://api.twitter.com/1.1/search/tweets.json?q=%23%sresult_type=mixed&count=4" format w.queryValue)
val authHeader = Map("Authentication" -> authentication) 
val requestWithAuthentication = request <:< authHeader
val response = Http(requestWithAuthentication OK as.String) 
```

我还没有验证这是否真的有效，但希望它能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T00:46:00.773

我正在使用调度这样做：

```
private def buildSearchReq(searchTerm: String, lat: Double, long: Double): Req = {
  val consumer = new ConsumerKey(consumerKey, consumerSecret)
  val requestToken = new RequestToken(token, tokenSecret)
  val req = url(searchUrl)
    .addQueryParameter("term", searchTerm)
    .addQueryParameter("radius_filter", "40000")
    .addQueryParameter("ll", s"$lat,$long")
  new SigningVerbs(req).sign(consumer, requestToken)
} 
```

如果你愿意，你也可以做更多这样的事情：

```
private def buildSearchReq(searchTerm: String, lat: Double, long: Double): Req = {
  val req = url(searchUrl) <<? Map("term" -> searchTerm, "radius_filter" -> "40000", "ll" -> s"$lat,$long")
  new SigningVerbs(req).sign(new ConsumerKey(consumerKey, consumerSecret), new RequestToken(token, tokenSecret))
} 
```

可能还有更简洁的方法，但你明白了。

# html - CSS 实用程序类 - 违反关注点分离

> ID：15261932
> 
> 赞同：2
> 
> 时间：2013-03-07T02:22:50.240
> 
> 标签：html, css, less

考虑一下，在使用 CSS 预处理时：

```
.pull-right {
    float: right;
} 
```

```
<div class="pull-right"><span>My content being pulled to the right</span></div> 
```

或者

```
.pull-right {
    float: right;
}

.login {
    .pull-right;
} 
```

```
<div class="login">My login form</div> 
```

从教条上讲，我不喜欢实用程序类将样式问题渗入我的文档标记中。

务实地说，我喜欢实用程序类的易用性，而且我不需要一个单独的类来定位我需要拉到右边的每个元素。

有没有人因为在大型项目中使用实用程序类而被烧毁，其中结构必须更改，因此意味着 HTML 标记*和*样式的更改？

如果我正在着手一个非常大的 UI 项目，我应该避免让样式问题进入我的标记的实用程序类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:02:48.460

这是一个有点主观的问题，不适合 Stack Overflow。但让我试着这样回答。

1.  “有没有人在大型项目中使用实用程序类被烧毁。” 我毫不怀疑有些人曾经有过一段时间。每当您将公开的外观类混入 html 中时，如果外观必须更改，*就会出现烧毁。*

2.  实用程序类有第三种用途，而不是您所描述的。JavaScript 可用于在某些时候动态添加一个类，以允许该类影响 HTML 内容。当然，这与您的第一个示例有关，但不会硬编码到 html 中，因此请避免您提出的问题。

3.  最后，如何使用它真的取决于您的需求和期望。对于您的特定示例，添加`float: right`到`.logo`类中与在其上使用实用程序 mixin 一样容易，因为该 mixin 中只有一行 CSS 代码。如果有十行，那么使用 mixin for`.logo`会更有意义。我假设 bootstrap 将该 mixin 定义为一个直接类，以便您可以灵活地根据需要使用它，直接添加类或作为 mixin。如果他们打算将其纯粹作为一个 mixin，那么他们的定义将是`.pull-right()`（带有括号），因此它不会创建`pull-right`作为类添加到元素上的选项。

因此，您是否应该避免将其用作直接课程完全取决于您愿意为所描述的场景承担什么风险。你*可能*会被烧死，但也许不会。这完全取决于某些事情发生变化的可能性、您将其引入 HTML 的次数，以及可能还有一些我没有想到的其他因素。只有您可以评估是否使用它的风险水平和回报水平。

# javascript - 超链接目标

> ID：15261945
> 
> 赞同：1
> 
> 时间：2013-03-07T02:23:57.373
> 
> 标签：javascript, css, html

在 HTML 超链接中，有没有办法在第一页中显示第二页内容？

例子：

第一页：

```
<a href="image1.html">image1</a> <a href="image2.html">image2</a>

<div> show image on first page here </div> 
```

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:25:29.570

```
<iframe src="page.html" id="page"></iframe
<a href="new.html" target="page">Open new.html in an iframe</a> 
```

您可以使用 iFrame。这将创建一个以 page.html 作为其源的 iframe，以及一个将其切换到 new.html 的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:27:49.510

我想你想使用[frame](http://www.w3.org/TR/html4/present/frames.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:02:48.387

我不知道为什么（可能是因为您标记了 javascript），我认为您正在尝试制作更像这样的东西（在 div 中加载 ajax）：

```
<!DOCTYPE html>
<html lang="es">
<head>
  <title>Hope this helps!</title>
 </head>
 <body>

 <a href="#" id="secondpage">Second Page here!</a>

     <div id="hereitgoes">
     </div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript">
    $(document).ready(function() {  

            $('document').ready(function(){
                    $("#secondpage").click(function(){
                            $("#hereitgoes").load("secondpage.html");
                    });
            });
    });

    </script>
  </body>
</html> 
```

请记住，您必须在 Web 服务器下运行它才能工作。

希望它有所帮助，并且这是您想要的！

# meteor - 保护客户端上的数据

> ID：15261946
> 
> 赞同：2
> 
> 时间：2013-03-07T02:24:27.970
> 
> 标签：meteor

我想知道人们是否以及如何阻止客户端上的数据访问？人们是否关心能够使用 Meteor 应用程序从 JS 控制台执行插入/更新/删除？

我发现这篇[文章](http://andrewscala.com/meteor/)描述了如何限制客户端上的数据库访问，但它已经很老了，不确定它是否仍然相关。他们将此描述为一种防止客户端更新数据库的方法：

```
// Relies on underscore.js. In your project directory:
// $ meteor add underscore
Meteor.startup(function() {
    var collections = ['collection_name_1', 'collection_name_2'];

    _.each(collections, function(collection) {
        _.each(['insert', 'update', 'remove'], function(method) {
            Meteor.default_server.method_handlers['/' + collection + '/' + method] =     function() {};
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:01:28.853

Meteor 帐户系统自 0.5.0 起已扩展。它提供了一种`collection.allow`方法，允许您定义访问集合的限制。检查[文档](http://docs.meteor.com/#allow)。

Meteor 上的`insecure`包允许所有客户端编辑数据库中的任何集合。您需要确保`meteor remove insecure`，这将默认拒绝所有客户端写入数据库。

[各方](http://www.meteor.com/examples/parties)示例截屏视频详细讨论了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T12:54:45.247

我最近问了一个类似的问题（[我必须在 Collection.allow 和 Collection.deny 中涵盖哪些逻辑以确保其安全？](https://stackoverflow.com/questions/21968840/what-logic-must-i-cover-in-collection-allow-and-collection-deny-to-ensure-its-s)）

我发现 Meteor 的允许和拒绝集合非常不安全。你是对的，任何人都可以编辑他们可用的数据。您可以自行编写 Allow 函数来正确检查用户可能如何操作文档。

在某个阶段，我确信 Meteor 将内置诸如模式检查之类的功能，或者将来可能更容易做到这一点。现在，我已经得出结论，我发现的最简单和最干净的事情就是撤销客户端的所有服务器端数据库权限，并使用 Meteor.calls 执行所有写入操作，并以这种方式进行我自己的验证

# itextsharp - 使用带有 TextField 的 iTextSharp 从 HTML 创建 PDF 并稍后编辑

> ID：15261955
> 
> 赞同：0
> 
> 时间：2013-03-07T02:25:14.567
> 
> 标签：itextsharp, itext

我需要从 HTML 创建 PDF 文件。生成的 PDF 需要有 iTextSharp TextField 或类似的东西。我需要在文本字段中使用适当的文本更新 PDF 文档。

注意事项：

```
1\. The PDF length (page numbers) may vary.
2\. Due to this, I may have to only know the name of the field to set value to. 
```

或者

我可以从 HTML 创建 PDF。由于 PDF 的内容可能会有所不同，我不知道需要编辑的块的确切位置。无论块的位置如何，我都需要在块上准确地标记文本（即块可能存在于任何页面中）。

示例场景：

1.  从 HTML 创建 PDF。
2.  它被发送到批准过程。一旦获得批准，批准人的姓名就会打印在特定的位置（但是，上面提到的签名区域可能会出现在任何页面上，因为它取决于 HTML 的内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:20:04.767

两个可以帮助你的资源：

本文详细介绍了如何使用 asp.net 和 itextsharp 创建 pdf。整篇文章对像我这样的初学者非常有用，但是详细介绍如何从 HTML 创建 pdf 的部分可能对您解决问题很有用。
[http://www.4guysfromrolla.com/articles/030911-1.aspx](http://www.4guysfromrolla.com/articles/030911-1.aspx) 我会特别注意他如何替换他正在加载的 HTML 模板中的占位符。看起来你可能想朝那个方向前进。

现在更直接地回答您的问题，您是否考虑过使用可填写的表格？这是一个相关的 Stack Overflow 帖子。 [使用 ITextSharp 创建可填写的 PDF 表单](https://stackoverflow.com/questions/9350186/creating-a-fillable-pdf-form-with-itextsharp)

正如我所说，我是一个初学者，所以我不能从这里帮助你。但是如果运气好的话，您可以将它们放在一起并完成您正在寻找的东西。

让我知道这是否有帮助祝你好运！

# java - 如何复制ant运行后创建的文件

> ID：15261977
> 
> 赞同：0
> 
> 时间：2013-03-07T02:27:04.953
> 
> 标签：java, eclipse, ant, eclipse-plugin

我的蚂蚁代码

```
<?xml version="1.0" encoding="UTF-8"?>
<project default="plugin_export" name="build">
  <target name="plugin_export">
    <pde.exportPlugins destination="C:\" exportSource="false" exportType="directory" plugins="MyPlugin" useJARFormat="true" allowbinarycycles="true" filename="MyPlugin.jar" qualifier="X" />
    <waitfor maxwait="15" maxwaitunit="minute">
      <copy todir="j:\eclipse-rcp-juno-SR1-win32\dropins\">
        <fileset dir="c:\plugins\">
          <include name="*" />
        </fileset>
      </copy>
    </waitfor>
  </target>
</project> 
```

它不起作用，因为我得到

> windows_build.xml:8：waitfor 不支持嵌套的“复制”元素。

pde.exportPlugins 部分由 eclipse 自动生成，它运行后台进程，使用插件创建 jar。

我想将该插件复制到我使用的 3 个 eclpse 实例中，并将其放在 dropins 文件夹中。怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:57:53.253

要在构建完成后完成任务，您可以使用 buildlistener。
Kev Jackson 在他的演示文稿中实现了一个非常有用的 exec-listener =
[http://people.apache.org/~kevj/ossummit/extending-ant.html](http://people.apache.org/~kevj/ossummit/extending-ant.html)（资源包含在演示文稿中）。
对于每个构建结果（BUILD SUCCESSFUL | BUILD FAILED），它提供了一个任务容器，您可以将所有内容放入其中应该在构建完成后运行：

```
<exec-listener onSuccess="true">
    <echo>Executing after BUILD SUCCESSFUL...</echo>
    <exec executable="..">
      <arg value="..."/>
    </exec>
    <mail ... />
   ..other tasks
  </exec-listener>
<exec-listener onSuccess="false">
    <echo>Executing after BUILD FAILED...</echo>
    <exec executable="..">
      <arg value="..."/>
    </exec>
    <mail ... />
   ..other tasks
  </exec-listener> 
```

# php - php下载链接返回内部服务器错误

> ID：15261988
> 
> 赞同：0
> 
> 时间：2013-03-07T02:28:04.310
> 
> 标签：php

我正在尝试在我的表单中创建下载链接，以便人们可以下载上传文件夹中的文件。我使用下面的代码

```
<?php

$path = $_SERVER['DOCUMENT_ROOT']."/content/uploads/"; // change the path to fit your     websites document structure
$fullPath = $path.basename($_REQUEST['download_file']);

if (is_readable ($fullPath)) {
$fsize = filesize($fullPath);
$path_parts = pathinfo($fullPath);
$ext = strtolower($path_parts["extension"]);
switch ($ext) {
    case "pdf"||"docx"||"doc"||"jpg"||"jpeg":
    header(("Content-type: lappication/pdf")||("Content-type: application/msword")||("Content-type: image/jpeg")); // add here more headers for diff.     extensions
    header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\"");     // use 'attachment' to force a download
    break;
    default;
    header("Content-type: application/octet-stream");
    header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
}
header("Content-length: $fsize");
header("Cache-control: private"); //use this to open files directly
readfile($fullPath);
exit;
} else {
        die("Invalid request");
} 
```

然后我通过将下载链接放在我的表格中进行测试

```
<h2>Forms Available</h2>

<a href="content/grants/download.php?download_file=some.pdf">Download here</a>
<a href="content/grants/download.php?download_file=">Download here</a>
<a href="content/grants/download.php?download_file=IntroLetter.docx">Download here</a>
<a href="content/grants/download.php?download_file=Conference Grant Application Form.doc">Download here</a> 
```

从那个4下载链接。第一个返回“无效请求”，我知道，因为该文件不存在。第二个链接弹出下载框下载空文件。我敢打赌，因为它真的是空的。对于第三个和第四个链接，该文件确实存在于文件夹中，但它返回

内部服务器错误

服务器遇到内部错误或配置错误，无法完成您的请求。

请联系服务器管理员 webmaster@miitresearch-postgraduates.com 并告知他们错误发生的时间，以及您可能所做的任何可能导致错误的事情。

服务器错误日志中可能提供有关此错误的更多信息。

此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误

可能是什么问题呢？问：）

# c# - 属性中的冒号被 XmlDocument 截断？

> ID：15261990
> 
> 赞同：2
> 
> 时间：2013-03-07T02:28:14.423
> 
> 标签：c#, .net, xml, xml-serialization

我正在尝试将带有冒号的属性添加到新元素，但是在保存到文件时它会被剥离？我正在尝试为一些遗留应用程序编写它来解释，所以我无法控制 XML 的格式。那么如何添加带有冒号的属性呢？

```
var element = doc.CreateElement("item");
element.SetAttribute("name", "Something");
element.SetAttribute("type:this", "MyClass.Somewhere"); 
```

目前，上述结果为，`<item name="Something" this="MyClass.Somewhere" name="Something" />`但我希望结果为`<item name="Something" type:this="MyClass.Somewhere" />`. 关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T06:37:08.400

根据[hakre](https://stackoverflow.com/users/367456/hakre)的评论：

加上`attribute`那个`namespace`。它应该可以工作（即使前缀会不同），只需指定`namespace urn:jugnut:configuration:type`

# python - 为什么 Python 中的 mmap 实现为共享库？

> ID：15261992
> 
> 赞同：2
> 
> 时间：2013-03-07T02:29:06.013
> 
> 标签：python, mmap

我是 python 新手。但我很好奇为什么 python 中的 mmap 被实现为共享库，而不是 .py 文件。这使得我的 IDE 无法索引 mmap 的源代码。

这是我的 python3.2 环境（ubuntu 12.04）中的输出：

```
markz@markz-hp6200:~$ python3.2
Python 3.2.3 (default, Oct 19 2012, 20:10:41) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import mmap
>>> print(mmap.__file__)
/usr/lib/python3.2/lib-dynload/mmap.cpython-32mu.so
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:37:04.190

`mmap`使用特定于操作系统的工具，例如`mmap`Linux 上的函数（和`MapViewOfFile`Windows 上的函数）。这些在 Python 中不能直接使用（例如通过`os`模块），因此至少`mmap`必须用 C 编写模块的一部分才能调用这些函数。

这种特殊用途与效率无关——模块必须用 C （或 use `ctypes`）编写才能使用此操作系统功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:35:10.510

用 C 编写的 Cpython 标准库中有很多东西。其他示例是( ) 的部分，`itertools`( )的部分......我认为主要原因之一是为了提高效率。开发人员决定，如果他们使用编译语言，他们可以让代码运行得更快。`csv``_csv``collections``_collections`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T02:37:19.037

`mmap`是用 C 实现的，而不是 python。用 C 实现的扩展模块必须是共享库。

为什么？在这种情况下，可能是因为没有访问 C 就无法实现功能。在 python 中实现的模块是使用其他模块中提供的功能来实现的。但是 mmap 功能是通过调用 C 标准库函数来实现的。它不可能是一个python文件。

# matlab - Matlab：神经网络时间序列预测？

> ID：15261996
> 
> 赞同：13
> 
> 时间：2013-03-07T02:29:24.920
> 
> 标签：matlab, machine-learning, neural-network, time-series, prediction

**背景：**我正在尝试使用 MATLAB 的神经网络工具箱来预测数据的未来值。我从 GUI 运行它，但我还包括下面的输出代码。

**问题：**我的预测值落后于实际值 2 个时间段，我不知道如何实际看到“t+1”（预测）值。

**代码：**

```
% Solve an Autoregression Time-Series Problem with a NAR Neural Network
% Script generated by NTSTOOL
% Created Tue Mar 05 22:09:39 EST 2013
%
% This script assumes this variable is defined:
%
%   close_data - feedback time series.

targetSeries = tonndata(close_data_short,false,false);

% Create a Nonlinear Autoregressive Network
feedbackDelays = 1:3;
hiddenLayerSize = 10;
net = narnet(feedbackDelays,hiddenLayerSize);

% Choose Feedback Pre/Post-Processing Functions
% Settings for feedback input are automatically applied to feedback output
% For a list of all processing functions type: help nnprocess
net.inputs{1}.processFcns = {'removeconstantrows','mapminmax'};

% Prepare the Data for Training and Simulation
% The function PREPARETS prepares timeseries data for a particular network,
% shifting time by the minimum amount to fill input states and layer states.
% Using PREPARETS allows you to keep your original time series data unchanged, while
% easily customizing it for networks with differing numbers of delays, with
% open loop or closed loop feedback modes.
[inputs,inputStates,layerStates,targets] = preparets(net,{},{},targetSeries);

% Setup Division of Data for Training, Validation, Testing
% For a list of all data division functions type: help nndivide
net.divideFcn = 'dividerand';  % Divide data randomly
net.divideMode = 'time';  % Divide up every value
net.divideParam.trainRatio = 70/100;
net.divideParam.valRatio = 15/100;
net.divideParam.testRatio = 15/100;

% Choose a Training Function
% For a list of all training functions type: help nntrain
net.trainFcn = 'trainlm';  % Levenberg-Marquardt

% Choose a Performance Function
% For a list of all performance functions type: help nnperformance
net.performFcn = 'mse';  % Mean squared error

% Choose Plot Functions
% For a list of all plot functions type: help nnplot
net.plotFcns = {'plotperform','plottrainstate','plotresponse', ...
  'ploterrcorr', 'plotinerrcorr'};

% Train the Network
[net,tr] = train(net,inputs,targets,inputStates,layerStates);

% Test the Network
outputs = net(inputs,inputStates,layerStates);
errors = gsubtract(targets,outputs);
performance = perform(net,targets,outputs)

% Recalculate Training, Validation and Test Performance
trainTargets = gmultiply(targets,tr.trainMask);
valTargets = gmultiply(targets,tr.valMask);
testTargets = gmultiply(targets,tr.testMask);
trainPerformance = perform(net,trainTargets,outputs)
valPerformance = perform(net,valTargets,outputs)
testPerformance = perform(net,testTargets,outputs)

% View the Network
view(net)

% Plots
% Uncomment these lines to enable various plots.
%figure, plotperform(tr)
%figure, plottrainstate(tr)
%figure, plotresponse(targets,outputs)
%figure, ploterrcorr(errors)
%figure, plotinerrcorr(inputs,errors)

% Closed Loop Network
% Use this network to do multi-step prediction.
% The function CLOSELOOP replaces the feedback input with a direct
% connection from the outout layer.
netc = closeloop(net);
[xc,xic,aic,tc] = preparets(netc,{},{},targetSeries);
yc = netc(xc,xic,aic);
perfc = perform(net,tc,yc)

% Early Prediction Network
% For some applications it helps to get the prediction a timestep early.
% The original network returns predicted y(t+1) at the same time it is given y(t+1).
% For some applications such as decision making, it would help to have predicted
% y(t+1) once y(t) is available, but before the actual y(t+1) occurs.
% The network can be made to return its output a timestep early by removing one delay
% so that its minimal tap delay is now 0 instead of 1\.  The new network returns the
% same outputs as the original network, but outputs are shifted left one timestep.
nets = removedelay(net);
[xs,xis,ais,ts] = preparets(nets,{},{},targetSeries);
ys = nets(xs,xis,ais);
closedLoopPerformance = perform(net,tc,yc) 
```

**提出的解决方案：**我相信答案就在代码“早期预测网络”的最后一部分。我只是不确定如何消除“一个延迟”。

**附加问题：**是否有可以从中输出的功能，以便我可以一遍又一遍地使用它？还是我只需要在获得下一个时间段的数据后继续重新训练？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T12:06:46.603

为了确保这个问题在答案已经存在时不会保持开放，我将发布似乎解决该问题的评论：

感谢@DanielTheRocketMan

> 我相信你应该分步骤工作：
> 
> 1.  查看数据是否静止
> 2.  如果没有，处理它（例如，区分数据）
> 3.  测试最可能的模型，例如 ar 模型
> 4.  尝试非线性模型，例如 nar
> 5.  去一个nn模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T16:12:37.013

尝试更简单的版本。我已经测试了这段代码，这段代码对我来说很好。

```
inputs = X;  %define input and target
targets = y;

hiddenLayerSize = 10;
net = patternnet(hiddenLayerSize);

%   Set up Division of Data for Training, Validation, Testing

net.divideParam.trainRatio = 70/100;
net.divideParam.valRatio = 15/100;
net.divideParam.testRatio = 15/100;

[net,tr] = train(net,inputs,targets);

outputss(x,:) = net(inputs);

errors = gsubtract(targets,outputss);
mse(errors) 
```