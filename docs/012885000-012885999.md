# StackOverflow 问答 12885000-12885999

# html - How to get a sprite to rotate to face the mouse position, using HTML5 canvas?

> ID：12885001
> 
> 赞同：1
> 
> 时间：2012-10-14T18:05:51.753
> 
> 标签：html, canvas

I'm trying to follow [this tutorial](http://active.tutsplus.com/tutorials/games/hit-the-target-with-a-deadly-homing-missile/) to create a homing missile in Flash, except I'd like to adapt it to use HTML5 canvas. I'm struggling with getting the sprite to face the direction of the mouse; it rotates but doesn't always face the mouse! I've put up a fiddle so you can see what's going on.

[http://jsfiddle.net/Mr4Tz/](http://jsfiddle.net/Mr4Tz/)

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:48:10.663

传递给 HTML5 旋转方法的角度值应该以弧度为单位，但您传递的是度数。

根据您的示例，这应该有效：

```
var targetX  = mouse.x - missile.x
,   targetY  = mouse.y - missile.y
,   rotation = Math.atan2(targetY, targetX);

context.rotate(rotation); 
```

# ios - Animate uicollectionview cells on selection

> ID：12885003
> 
> 赞同：3
> 
> 时间：2012-10-14T18:06:03.867
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewcell

I have created a customlayout and set my cells position attribute in `layoutAttributesForItemAtIndexPath` like this

```
attributes.center = CGPointMake((size.width/2 - 100) + 100, (size.height/2 - 150) +100); 
```

I would like to animate a cell when it is selected. replicating the kind of animations we get with the `initialLayoutAttributesForAppearingItemAtIndexPath` & `finalLayoutAttributesForDisappearingItemAtIndexPath`.

I'd like to do this when a cell is selected and de-selected.

so for instance:

Cell A is in position `0,0`. Cell B is in position `50,100`. If I select cell B I'd like to animate it to `0,0`. and at the same time animate cell A to `50,100`. basically switching positions, but animated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-05T10:25:58.437

也许是不同的方法。只需覆盖 collectionViewCell 中的 isSelected 即可。

```
 override var isHighlighted: Bool {
    didSet {
        if isHighlighted {
            UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseOut, animations: {
                // animate highlight
            }, completion: nil)
        } else {
            UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseOut, animations: {
                // animate unHighligh
            }, completion: nil)
        }
    }
} 
```

在这篇文章[UICollectionView: Animate cell size change on selection](https://stackoverflow.com/questions/13780153/uicollectionview-animate-cell-size-change-on-selection/46052728#46052728)中，您可以看到有关如何为大小更改设置动画的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:47:23.723

我在 UICollectionViewDelegate 中使用 didSelectItemAtIndexPath 为属性设置动画：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    [_collectionView.collectionViewLayout invalidateLayout];
    UICollectionViewLayoutAttributes *newAttributes = [_collectionView layoutAttributesForItemAtIndexPath:indexPath];

    //use new attributes for animation
} 
```

# php - show loading gid after press any letter

> ID：12885006
> 
> 赞同：0
> 
> 时间：2012-10-14T18:06:17.293
> 
> 标签：php, javascript, forms

I'm trying to show a loading gif after to press some key on a form.

I have this code. When I press a key the image is shown, but then if you did not press anything, still displays..... I want something that when I press a key the imagen is display and when I stop to press keys the imagen stop to showing

```
<html>
<head>
    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>  
</head>
<body>
    Enter your name: <input type="text" id="fname" onkeyup="displayResult()">
    <img src="ajaxload.gif" id="load" style="display: none">
    <script>
        function displayResult()
        {
            $("#load").show();
        }
    </script>
</body> 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:10:08.153

这应该有效：

```
$('#fname').keydown(function(){$("#load").show();});
$('#fname').keyup(function(){$("#load").hide();}); 
```

尽量避免内联事件处理程序。

[这](http://jsfiddle.net/xY9YN/1/)是一个做你想做的小提琴。我没有你的图片，所以我使用了一个 div。

# wordpress - get list of older post in wordpress

> ID：12885009
> 
> 赞同：0
> 
> 时间：2012-10-14T18:06:47.687
> 
> 标签：wordpress, plugins

Is there any function that can let me display older posts and post dates at the bottom of each post?The older posts must be in the same category. I searched on the internet but it seems that everyone just display one previous post only

Thank you very much

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:44:45.213

您可以使用 wp 过滤器来实现这一点

```
// Return posts from the last 30 days:
function filter_where( $where = '' ) {
// posts in the last 30 days
$where .= " AND post_date > '" . date('Y-m-d', strtotime('-30 days')) . "'";
return $where;
}

add_filter( 'posts_where', 'filter_where' );
$query = new WP_Query( $query_string );
remove_filter( 'posts_where', 'filter_where' ); 
```

或者

```
// Return posts for March 1 to March 15, 2010:
function filter_where( $where = '' ) {
// posts for March 1 to March 15, 2010
$where .= " AND post_date >= '2010-03-01' AND post_date < '2010-03-16'";
return $where;
}

add_filter( 'posts_where', 'filter_where' );
$query = new WP_Query( $query_string );
remove_filter( 'posts_where', 'filter_where' ); 
```

有关更多信息，请参阅此[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:12:59.227

[get_posts 函数](http://codex.wordpress.org/Function_Reference/get_posts)允许您为帖子构建复杂的查询，您可以使用它来获取带有 order 和 category 参数的旧帖子。

# jquery - Space on right side of website

> ID：12885011
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:06:51.677
> 
> 标签：jquery, html, css

I have an odd space I can't seem to get rid of on my site. I have spend the last few days messing with the css to try and make the #menubar cover 100% width as it is suppose to but can't work it out.

It becomes much more prominent when accessing the site via a smartphone. I am using flex slider jquery plugin for the images, but have changed it on my clients request to re size based on height rather than width.

site is [http://www.testsite.co.nz/](http://www.testsite.co.nz/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:12:45.950

你有一个 CSS 规则：

```
body > div {
    padding: 2px;
} 
```

你的标题`<div>`有`width:100%`. 所以它比视口宽 4px。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T05:06:49.880

您可能在某些东西上有边距（某些东西，例如身体默认有边距）。

最简单的方法是在谷歌浏览器中打开您的网站并检查元素，这将向您显示边距。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:12:28.450

确保`html`并`body`设置为`width: 100%`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:48:20.303

我改变了

```
<div id="logo" onclick="location.href='http://www.sgphotostudio.co.nz';" style="cursor: pointer;"></div> 
```

至

```
<img src="../img/SGlogo.png" onclick="location.href='http://www.sgphotostudio.co.nz';" class="main_logo"> 
```

并在下面添加了样式

```
#menubar img.main_logo {
    border: medium none;
    cursor: pointer;
    float: left;
    height: 76px;
    margin: 6px 0 0 200px;
}
#menu {
    float: left;
    list-style: none outside none;
    margin-top: 34px;
    width: auto;
    z-index: 10;
} 
```

# ruby - What's the base URL for my app?

> ID：12885012
> 
> 赞同：2
> 
> 时间：2012-10-14T18:07:16.267
> 
> 标签：ruby, rack, camping

In Camping/Rack, how can I get the base URL for my app? I want to know so I can put it in an email it sends.

It might be (in development)

or

```
http://localhost:9292 
```

or

```
http://localhost:80/game 
```

or in production

```
http://fancy-snake.heroku.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:20:47.083

你必须要小心一点，因为有一些微妙的潜在陷阱。这[`Rack::Request`门课](https://github.com/rack/rack/blob/1.4.1/lib/rack/request.rb)在这里可能会有所帮助。

首先，您无法真正获取*应用程序*的 url ，因为它可能会响应多个 url（通过 Rack 路由、Apache 配置等），因此您正在查看获取特定*请求*的 url 。如果您只提供来自一个 url 的请求，这无关紧要。

请求的方案在`env`下的哈希中`rack.url_scheme`，但这仅适用于请求的“最后一站”。如果您的应用程序位于某种代理（Nqinx、Apache 等）之后，那么您想要获取真实请求的方案，而不是从代理到运行您的应用程序的机器的请求。如果您正确配置了代理，它应该设置一个标头，这样您就可以知道原始方案是什么。[`Rack::Request`有一种`scheme`](https://github.com/rack/rack/blob/1.4.1/lib/rack/request.rb)将这些标头考虑在内的[方法。](https://github.com/rack/rack/blob/1.4.1/lib/rack/request.rb)

url 的主机*可能*在key`env`下的 hash 中`HTTP_HOST`，但是这个 header 不一定存在（诚然，现在这不太可能）。你应该依靠`SERVER_NAME`and `SERVER_PORT`。此外还有处理代理请求的问题，您需要原始请求的主机名，而不是后端服务器。再次，`Rack::Request`提供处理这些问题的方法[`host_with_port`](https://github.com/rack/rack/blob/1.4.1/lib/rack/request.rb#L88-94)。[`host`](https://github.com/rack/rack/blob/1.4.1/lib/rack/request.rb#L110-113)

`Rack::Request`还提供了一种结合方案和主机的[`base_url`方法](https://github.com/rack/rack/blob/1.4.1/lib/rack/request.rb#L110-113)，如果与默认值（80 或 443）不同，则仅包含端口。

您的应用程序的挂载位置位于键`env`下的哈希中`SCRIPT_NAME`。这将`/game`在您的第二个示例中，如果您的应用程序安装在服务器的根目录中，则可以为空。同样，`Rack::Request`提供了一个[`script_name`方法](https://github.com/rack/rack/blob/1.4.1/lib/rack/request.rb#L25)，虽然这个方法只是简单地返回`env`散列中条目的值。

所以，总而言之，你可能想要使用这样的东西：

```
req = Rack::Request.new env
url = req.base_url + req.script_name 
```

这看起来很简单，但正在为您处理各种可能性。

此外，您可能会发现[Rack 规范](http://rack.rubyforge.org/doc/SPEC.html)对阅读很有用，它包含应该在`env`散列中的各种条目的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T18:20:37.373

到目前为止我有

```
url = @env['rack.url_scheme'] + "://" + @env['HTTP_HOST'] + R(LoginX, u.secret) 
```

这似乎适用于第一种和第三种情况。我不知道它是否写如果应用程序在`localhost/prefix`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:38:28.187

Camping 有一个助手调用[`URL`](https://camping.github.io/camping.io/api/#M000004)，它返回绝对 URL 到你的应用程序：

```
URL()               # => #<URL:http://test.ing/blog/>
URL() + "view/12"   # => #<URL:http://test.ing/blog/view/12>
URL("/view/12")     # => #<URL:http://test.ing/blog/view/12> 
```

# c# - Windows service with timer

> ID：12885013
> 
> 赞同：31
> 
> 时间：2012-10-14T18:07:22.660
> 
> 标签：c#, .net, windows, timer, windows-services

I have created a windows service with timer in c#.net. it works fine while i debug/build the project in visual studio but it does not perform its operation after installation.

What might be the reason behind this ?

code :

```
public partial class Service1 : ServiceBase
{
        FileStream fs;
        StreamWriter m_streamWriter;
        Timer tm = new Timer();

        public Service1()
        {
            InitializeComponent();

            this.ServiceName = "timerservice";

            tm.Interval = 2000;
            tm.Tick += new EventHandler(PerformOperations);
            tm.Start();

            fs = new FileStream(@"c:\mcWindowsService.txt", FileMode.OpenOrCreate, FileAccess.Write);

            m_streamWriter = new StreamWriter(fs);
            m_streamWriter.BaseStream.Seek(0, SeekOrigin.End);
        }

        private void PerformOperations(object sener, EventArgs e)
        {
            //StreamWriter swr = new StreamWriter("c:\\test_from_database.txt",true);

            try
            {
                OdbcConnection con = new OdbcConnection("DSN=liquor_data");

                OdbcDataAdapter adp = new OdbcDataAdapter("", con);

                DataSet ds = new DataSet();

                string sql = "select * from item_group";
                adp.SelectCommand.CommandText = sql;

                adp.Fill(ds, "item_group");

                foreach (DataRow dr in ds.Tables["item_group"].Rows)
                {
                    //      swr.Write(dr["group_name"].ToString() + "\t\t" + DateTime.Now.TimeOfDay.ToString() + "\n");

                    //Console.WriteLine(dr["group_name"].ToString() + "\t\t" + DateTime.Now.TimeOfDay.ToString() + "\n");
                    m_streamWriter.WriteLine(dr["group_name"].ToString() + "\t\t" + DateTime.Now.TimeOfDay.ToString() + "\n");
                }

                m_streamWriter.Flush();
            }

            catch (Exception ex)
            {
                // swr.Write("Error :"+ ex.Message + "\t\t" + DateTime.Now.TimeOfDay.ToString() + "\n"); }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-14T20:10:19.463

使用 Windows 服务的第一种方法并不容易..

很久以前，我写了一个 C# 服务。

这是 Service 类的逻辑（经过测试，工作正常）：

```
namespace MyServiceApp
{
    public class MyService : ServiceBase
    {
        private System.Timers.Timer timer;

        protected override void OnStart(string[] args)
        {
            this.timer = new System.Timers.Timer(30000D);  // 30000 milliseconds = 30 seconds
            this.timer.AutoReset = true;
            this.timer.Elapsed += new System.Timers.ElapsedEventHandler(this.timer_Elapsed);
            this.timer.Start();
        }

        protected override void OnStop()
        {
            this.timer.Stop();
            this.timer = null;
        }

        private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            MyServiceApp.ServiceWork.Main(); // my separate static method for do work
        }

        public MyService()
        {
            this.ServiceName = "MyService";
        }

        // service entry point
        static void Main()
        {
            System.ServiceProcess.ServiceBase.Run(new MyService());
        }
    }
} 
```

我建议您在单独的静态方法中编写您的真实服务工作（为什么不，在控制台应用程序中......只需添加对它的引用），以简化调试和清洁服务代码。

确保间隔足够，并仅在 OnStart 和 OnStop 覆盖中写入日志。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T19:41:37.380

您需要将主要代码放在`OnStart`方法上。

我的另一个[SO 答案](https://stackoverflow.com/questions/10575900/c-sharp-windows-service-with-awareness-of-system-time)可能会有所帮助。

您将需要放置一些代码以在 visual-studio 中启用调试，同时保持您的应用程序作为 Windows 服务有效。这个其他[SO 线程](https://stackoverflow.com/questions/125964/easier-way-to-start-debugging-a-windows-service-in-c-sharp)涵盖了调试 Windows 服务的问题。

**编辑**：

另请参阅[此处](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart(v=vs.80).aspx)提供的文档以了解 MSDN 上的`OnStart`方法，您可以在其中阅读：

> 不要使用构造函数来执行应该在 **OnStart**中的处理。使用**OnStart**处理服务的所有初始化。构造函数在应用程序的可执行文件运行时调用，而不是在服务运行时调用。可执行文件在**OnStart**之前运行。例如，当您继续时，不会再次调用构造函数，因为 SCM 已将对象保存在内存中。如果**OnStop**释放在构造函数中而不是在**OnStart**中分配的资源，则在第二次调用服务时不会再次创建所需的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-24T11:47:51.530

这是一个工作示例，其中服务的执行是在 Timer 的 OnTimedEvent 中启动的，它在 ServiceBase 类中作为委托实现，并且 Timer 逻辑封装在一个名为 SetupProcessingTimer() 的方法中：

```
public partial class MyServiceProject: ServiceBase
{

private Timer _timer;

public MyServiceProject()
{
    InitializeComponent();
}

private void SetupProcessingTimer()
{
    _timer = new Timer();
    _timer.AutoReset = true;
    double interval = Settings.Default.Interval;
    _timer.Interval = interval * 60000;
    _timer.Enabled = true;
    _timer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
}

private void OnTimedEvent(object source, ElapsedEventArgs e)
{
    // begin your service work
    MakeSomething();
}

protected override void OnStart(string[] args)
{
    SetupProcessingTimer();
}

...
} 
```

间隔在 app.config 中以分钟为单位定义：

```
<userSettings>
    <MyProject.Properties.Settings>
        <setting name="Interval" serializeAs="String">
            <value>1</value>
        </setting>
    </MyProject.Properties.Settings>
</userSettings> 
```

# windows - 从批处理文件中的新命令提示符终止进程

> ID：12885021
> 
> 赞同：1
> 
> 时间：2012-10-14T18:07:57.603
> 
> 标签：windows, process, batch-file, cmd, taskkill

我有这个坐在一个批处理文件中，我想知道它为什么会抛出

> “系统找不到文件TASKLIST”

```
FOR /F "usebackq tokens=2 skip=2" %%i IN (TASKLIST /FI "IMAGENAME eq explorer.exe") DO taskkill /F /PID %%i 
```

更重要的是，问题在于该命令 - 杀死 explorer.exe - 必须在该命令生成的 cmd 中运行

```
at xx:xx /interactive "cmd.exe" 
```

我将如何将该 taskkill 命令通过管道传送到由 at 命令生成的新命令提示符中？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:31:41.183

如果要处理命令的退出，请使用带有“backq”参数的单引号或反引号：

```
FOR /F "tokens=2 skip=2" %%i IN ('TASKLIST /FI ^"IMAGENAME eq explorer.exe^"') DO taskkill /F /PID %%i 
```

（我不确定你的反引号是否显示，因为它们是stackoverflow中代码块的元符号）

Taskkill 也可以通过镜像名称杀死一个进程

```
taskkill /im explorer* /f 
```

# php - 使用 LAC 和 Cell id 获取坐标时出现纬度错误

> ID：12885023
> 
> 赞同：2
> 
> 时间：2012-10-14T18:07:58.010
> 
> 标签：php, google-maps, gsm

我正在使用 php 从 MCC、MNC、LAC 和小区 ID 获取纬度和经度。当我在计算机上的 Wampserver 上运行我的代码时，我得到了正确的纬度和经度，它被绘制在谷歌地图上。但是当我将它部署在我的 Web 服务器上时，我得到了不同的价值。

进入MCC时正确的经纬度：505；跨国公司：1个；拉丁美洲和加勒比：30817；小区 ID：2922 是 (-31.844589,115.80378) 。但是我在我的服务器上得到了 (4263.122707,115.803781) 。

这是我正在使用的代码：

```
 <?php
                if (isset($_POST["lac"]) && isset($_POST["cid"]) && isset($_POST["mnc"]) && isset($_POST["mcc"])) {
                $lac = $_POST["lac"];
                    $cid = $_POST["cid"];
                    $mcc = $_POST["mcc"];
                    $mnc = $_POST["mnc"];
                        $data = 
                            "\x00\x0e". 
                            "\x00\x00\x00\x00\x00\x00\x00\x00". 
                            "\x00\x00". 
                            "\x00\x00". 
                            "\x00\x00". 
                            "\x1b". 
                            "\x00\x00\x00\x00".  
                            "\x00\x00\x00\x00".  
                            "\x00\x00\x00\x00".  
                            "\x00\x00". 
                            "\x00\x00\x00\x00".  
                            "\x00\x00\x00\x00".  
                            "\x00\x00\x00\x00".  
                            "\x00\x00\x00\x00".  
                            "\xff\xff\xff\xff". 
                            "\x00\x00\x00\x00";

                    $is_umts_cell = ($cid > 65535);
                    if ($is_umts_cell) // GSM: 4 hex digits, UTMS: 6 hex digits 
                        $data[0x1c] = 5;
                    else
                        $data[0x1c] = 3;

                    $hexmcc = substr("00000000".dechex($_POST["mcc"]),-8);
                    $hexmnc = substr("00000000".dechex($_POST["mnc"]),-8);
                    $hexlac = substr("00000000".dechex($_POST["lac"]),-8);
                    $hexcid = substr("00000000".dechex($_POST["cid"]),-8);

                    //echo "<p>MCC=$hexmcc MNC=$hexmnc LAC=$hexlac CID=$hexcid";

                    $data[0x11] = pack("H*",substr($hexmnc,0,2));
                    $data[0x12] = pack("H*",substr($hexmnc,2,2));
                    $data[0x13] = pack("H*",substr($hexmnc,4,2));
                    $data[0x14] = pack("H*",substr($hexmnc,6,2));

                    $data[0x15] = pack("H*",substr($hexmcc,0,2));
                    $data[0x16] = pack("H*",substr($hexmcc,2,2));
                    $data[0x17] = pack("H*",substr($hexmcc,4,2));
                    $data[0x18] = pack("H*",substr($hexmcc,6,2));

                    $data[0x27] = pack("H*",substr($hexmnc,0,2));
                    $data[0x28] = pack("H*",substr($hexmnc,2,2));
                    $data[0x29] = pack("H*",substr($hexmnc,4,2));
                    $data[0x2a] = pack("H*",substr($hexmnc,6,2));

                    $data[0x2b] = pack("H*",substr($hexmcc,0,2));
                    $data[0x2c] = pack("H*",substr($hexmcc,2,2));
                    $data[0x2d] = pack("H*",substr($hexmcc,4,2));
                    $data[0x2e] = pack("H*",substr($hexmcc,6,2));

                    $data[0x1f] = pack("H*",substr($hexcid,0,2));
                    $data[0x20] = pack("H*",substr($hexcid,2,2));
                    $data[0x21] = pack("H*",substr($hexcid,4,2));
                    $data[0x22] = pack("H*",substr($hexcid,6,2));

                    $data[0x23] = pack("H*",substr($hexlac,0,2));
                    $data[0x24] = pack("H*",substr($hexlac,2,2));
                    $data[0x25] = pack("H*",substr($hexlac,4,2));
                    $data[0x26] = pack("H*",substr($hexlac,6,2));

                    /* I used file_get_contents() at my laptop webserver, but it seems like the PHP version 
                     * at my hosting company is old and it is not supporting that. 
                     * For the hosting company, here we're using cURL.
                     */
                    $use_curl = true;
                    if ($use_curl) {
                        $ch = curl_init();
                        curl_setopt($ch, CURLOPT_URL, "http://www.google.com/glm/mmap");
                        curl_setopt($ch, CURLOPT_HEADER, true);
                        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                        curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1); 
                        curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-type: application/binary"));
                        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
                        curl_setopt($ch, CURLOPT_POST, 1);
                        $response = curl_exec($ch);
                        if (curl_errno($ch)) 
                            exit("Error: Failed to post data $str curl_errno($ch)");

                        $header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
                        $str = substr($response, $header_size);

                        curl_close($ch);
                    } else {
                        $context = array (
                            'http' => array (
                                'method' => 'POST',
                                'header'=> "Content-type: application/binary\r\n"
                                            . "Content-Length: " . strlen($data) . "\r\n",
                                            'content' => $data
                            )
                        );
                        $xcontext = stream_context_create($context);
                        $str=file_get_contents("http://www.google.com/glm/mmap", FALSE, $xcontext);
                    }

                    $opcode1 = ((ord($str[0]) << 8)) | ord($str[1]);
                    $opcode2 = ord($str[2]);

                    if (($opcode1 != 0x0e) || ($opcode2 != 0x1b)) 
                        exit("<p>Error: Invalid opcode $opcode1 $opcode2\. Maybe the LAC/CID is invalid");

                    $retcode = ((ord($str[3]) << 24) | (ord($str[4]) << 16) | (ord($str[5]) << 8) | (ord($str[6])));
                    if ($retcode != 0) 
                        exit("<p>Error: Invalid return code $retcode. Maybe the LAC/CID is invalid");

                    $lon = ((ord($str[11]) << 24) | (ord($str[12]) << 16) | (ord($str[13]) << 8) | (ord($str[14]))) / 1000000;
                    $lat = ((ord($str[7]) << 24) | (ord($str[8]) << 16) | (ord($str[9]) << 8) | (ord($str[10]))) / 1000000;

                    // exit script if cannot geocode cell e.g. not on google's database
                    if ($lat == 0 and $lon == 0)
                        exit('ERROR: cannot determine cell tower location from cell LAC: ' . $_POST["lac"] . ', ' . 'CID: ' . $_POST["cid"]);

                    $addr = ''.$lat . ',' . $lon;
                    $t = urlencode(" (MCC=$mcc MNC=$mnc LAC=$lac CID=$cid)");
                    //echo "<p><a href='http://maps.google.com/maps?q=$addr$t' target='_top'>Lat=$lat Lon=$lon</a>";
                }
            ?>

            <form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">

                        <div >MCC
                            <input type="text" size="5" name="mcc" value="<?php if(isset($mcc)) echo $mcc; else echo ""?>">
                        MNC
                            <input type="text" size="5" name="mnc" value="<?php if(isset($mnc)) echo $mnc; else echo ""?>">
                        LAC
                            <input type="text" size="5" name="lac" value="<?php if(isset($lac)) echo $lac; else echo ""?>">
                        CID
                            <input type="text" size="5" name="cid" value="<?php if(isset($cid)) echo $cid; else echo ""?>">

                        <input type="Submit" value="Check it"></div>

            </form>

            <p>
            <iframe 
                width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" 
                src="http://maps.google.com/maps?q=<?php if(isset($addr)) echo $addr; else echo ''?>&ie=UTF8&ll=<?php if(isset($addr)) echo $addr; else echo ''?>&sll=<?php if(isset($addr)) echo $addr; else echo ''?>&z=11&output=embed"></iframe>

            </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:08:27.610

它是一个 64 位的问题。

负纬度/经度值无法正确转换。

在这里查看答案：

[PHP 和 Apache2 中的奇怪行为：不同服务器中的不同输出](https://stackoverflow.com/questions/14099457/weird-behaviour-in-php-and-apache2-different-output-in-different-servers)

# iphone - iPhone iOS 可以渲染 UIView 弯曲吗？

> ID：12885028
> 
> 赞同：2
> 
> 时间：2012-10-14T18:08:27.700
> 
> 标签：iphone, objective-c, ios, uiview, core-graphics

> **可能重复：**
> [显示弯曲的文本](https://stackoverflow.com/questions/10792948/showing-curved-text)

我有一个带有 UILabel 的 UIView。如何使用 renderInContext 和其他图形操作使 UIView 看起来是弯曲的，如下例所示？

![弯曲的文字](../Images/6a9af3d0787e666e30331c84010f7ad7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:29:50.030

以下核心文本教程具有您需要的完全相同的示例。

[http://invasivecode.tumblr.com/core-text](http://invasivecode.tumblr.com/core-text)

# android - Android 本机 Twitter 应用程序 - 不重定向回原始应用程序

> ID：12885029
> 
> 赞同：3
> 
> 时间：2012-10-14T18:08:28.790
> 
> 标签：android, twitter, twitter4j, signpost

我有一个项目，在发布推文之前，我使用 twitter oAuth 流程来验证用户的身份。

问题是 oAuth 在流程结束时重定向回应用程序不起作用，但只有当用户为流程选择 Twitter 应用程序时 - 即“使用...完成此操作”同时具有浏览器和 Twitter。

当使用浏览器完成 oAuth 流程时，这 100% 有效 - twitter 页面重定向，应用程序特定的 URL 被捕获，并且在调用 onResume 时应用程序被传递了正确的意图。

原生 Android Twitter 应用程序继续显示“将您重定向回应用程序。这可能需要一些时间”，并且它不会重定向。事实上，在进入本地 Twitter 应用程序时，logcat 中没有关于身份验证过程的更多内容。还应该注意的是，单击上一页上的“取消”按钮也不会执行任何操作 - logcat 中没有任何内容表明 Twitter 本地应用程序甚至试图回调到原始应用程序。

这是触发 oAuth“Auth Url”意图时的 logcat：

```
I/ActivityManager(  251): START {act=android.intent.action.VIEW     dat=https://twitter.com/oauth/authorize?oauth_token=zpY3RH5tzyM2SuB2TfNfI1tou8VpLTw14xNmMFs8A flg=0x3000000 cmp=com.twitter.android/.UrlInterpreterActivity u=0} from pid 251
I/ActivityManager(  251): START {dat=https://twitter.com/oauth/authorize?oauth_token=zpY3RH5tzyM2SuB2TfNfI1tou8VpLTw14xNmMFs8A cmp=com.twitter.android/.WebViewActivity u=0} from pid 8560
V/PhoneStatusBar(  352): setLightsOn(true)
I/ActivityManager(  251): Displayed com.twitter.android/.WebViewActivity: +225ms (total +267ms)
D/TilesManager( 8560): new EGLContext from framework: 5151cd88 
D/GLWebViewState( 8560): Reinit shader
D/GLWebViewState( 8560): Reinit transferQueue
W/ThrottleService(  251): unable to find stats for iface rmnet0
D/AudioHardware(   90): AudioHardware pcm playback is going to standby.
D/AudioHardware(   90): closePcmOut_l() mPcmOpenCnt: 1
D/SizeAdaptiveLayout(  352): com.android.internal.widget.SizeAdaptiveLayout@42100048child view android.widget.FrameLayout@420a2188 measured out of bounds at 95px clamped to 96px
D/SizeAdaptiveLayout(  352): com.android.internal.widget.SizeAdaptiveLayout@41e4ac40child view android.widget.FrameLayout@4204c8b8 measured out of bounds at 95px clamped to 96px
D/dalvikvm( 8272): WAIT_FOR_CONCURRENT_GC blocked 0ms
D/dalvikvm( 8272): GC_EXPLICIT freed 365K, 11% free 10374K/11655K, paused 2ms+3ms, total 36ms 
```

我很清楚 Twitter 应用程序设置中的“虚拟 URL”问题，并且由于浏览器流程运行良好，我看不出这是问题所在。

在 Nexus S + Android 4.1.1 以及 LG Sprint（不确定型号）+ Android 2.3.3 上进行的测试。这两种情况下的行为是相同的。

# python - 过滤数组返回参数

> ID：12885034
> 
> 赞同：0
> 
> 时间：2012-10-14T18:09:08.323
> 
> 标签：python, filter, arguments, scipy

又来了：

我想要一个很像*filter*的函数，但它应该返回*参数*而不是值：

```
data = numpy.array([0.0, 35., 2., 44., numpy.pi, numpy.sqrt(2.)])
args_pass_A = some_sort_of_f(lambda x: x<4., data)
print(args_pass_A)
[0, 2, 4, 5]
args_pass_B = some_sort_of_f(lambda x: x>=44., data)
print(args_pass_B)
[3] 
```

我试图在 scipy.stats 和 scipy.stats.mstats 中查找，我最近被定向到*mquantiles*（谢谢 aganders3）。这会响铃吗？我也尝试在 numpy 文档中查找，但没有运气。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:56:25.677

对于这种情况，我只使用`where` [[docs]](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)：

```
>>> import numpy
>>> data = numpy.array([0.0, 35., 2., 44., numpy.pi, numpy.sqrt(2.)])
>>> data
array([  0\.        ,  35\.        ,   2\.        ,  44\.        ,
         3.14159265,   1.41421356])
>>> numpy.where(data < 4)
(array([0, 2, 4, 5]),)
>>> numpy.where(data > 44.)
(array([], dtype=int64),)
>>> numpy.where(data >= 44.)
(array([3]),) 
```

请注意，您要查找的实际上是返回元组的第一个元素：

```
>>> numpy.where(data < 4)[0]
array([0, 2, 4, 5]) 
```

您可以使用这些索引`data`再次索引：

```
>>> data[numpy.where(data < 4)[0]]
array([ 0\.        ,  2\.        ,  3.14159265,  1.41421356]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:46:12.087

您可以使用`enumerate`函数，它接受一个列表 ( `orig_list`) 并返回对列表，其中第一个元素是项目 in 的索引，`orig_list`第二个元素是来自 的项目`orig_list`。

例子：

```
orig_list = numpy.array([0.0, 35., 2., 44., numpy.pi, numpy.sqrt(2.)])
filter_func = lambda (idx, value): value<4.
filtered_pairs = filter(filter_func, enumerate(orig_list))
result = map(lambda (idx, value): idx, filtered_pairs) 
```

`itemgetter`您还可以用 stdlib 函数（模块运算符）替换 id 提取器：

```
from operator import itemgetter
orig_list = numpy.array([0.0, 35., 2., 44., numpy.pi, numpy.sqrt(2.)])
filter_func = lambda (idx, value): value<4.
result = map(itemgetter(0), filter(filter_func, enumerate(orig_list))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:18:56.043

```
>>> def some_sort_of_f(data, condition = lambda x: x<4.):
        rez=[]
        for i in range(len(data)):
            if condition(data[i]):
                rez.append(i)
        return rez

>>> data = [0.0, 35., 2., 44.]
>>> some_sort_of_f(data)
[0, 2]
>>> 
```

# android - 带有 StateListDrawable 的 ImageView 不起作用

> ID：12885036
> 
> 赞同：2
> 
> 时间：2012-10-14T18:09:24.640
> 
> 标签：android, imageview, statelistdrawable

这看起来很简单，但它只是行不通。ImageView 应在选中时更改位图，但始终显示未选中的图像：

```
public void addImage()
{
  ImageView imageView = new ImageView(context);
  m_draw = new StateListDrawable();

  m_draw.addState(android.util.StateSet.WILD_CARD, m_bitmapUnchecked);
  m_draw.addState(new int[] { android.R.attr.state_checked }, m_bitmapChecked);

  imageView.setImageDrawable(m_draw);

  this.addView(imageView);
}

public void onClick(View v)
{
  m_draw.setState(new int[] { android.R.attr.state_checked });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-12T20:57:54.673

第一个匹配状态是要设置的状态。您应该将 WILD_CARD 作为最后一个状态。

# javascript - 如何在带有散列元素的 URL 中使用 regexp/javascript-method 获取 URL 参数？

> ID：12885037
> 
> 赞同：0
> 
> 时间：2012-10-14T18:09:26.280
> 
> 标签：javascript, url, parameters, hashtag

我正在尝试从 url 中提取字符串。URL 可以是：

```
http://page.de/s/project.html?id=1 
```

或者

```
http://page.de/s/project.html?id=1/#/s/project.html?id=x 
```

我需要提取最后一个`?id=-value`，但我不能让它去。这就是我所拥有的：

```
url_snip = key.replace("?id=","") 
```

仅适用于第一个 URL。

**问题：**无论 URL 是什么，
是否有一种或方法可以获取最后一个 id 值？`regexp`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:12:33.267

`split`您可以使用on提取`location.search`

```
var ids = window.location.search.split('&')[0].split('=');
ids[0] //id;
 ids[1] //1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:12:48.087

鉴于您发布的两种形式：

```
url_snip = key.substring(key.lastIndexOf('=') + 1); 
```

[JS Fiddle 演示（诚然使用函数，但方法相同）](http://jsfiddle.net/davidThomas/2a25h/)。

还有一种选择，使用`split()`：

```
var parts = url.split('=');
    return parts[parts.length - 1]; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2a25h/2/)。

# c# - 如何使用资源构建独立的 exe？

> ID：12885038
> 
> 赞同：2
> 
> 时间：2012-10-14T18:09:31.550
> 
> 标签：c#, wpf, resources, exe

我有一个带有图像资源的 WPF 应用程序。当我构建程序时，bin 文件夹中有一个名为“resources”的目录，其中包含我的图像。如果我在没有文件夹的情况下运行程序，它会崩溃。如何将资源嵌入应用程序中，使其可以独立运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T18:18:57.340

您必须将图像文件的构建操作设置为`Resource`，如[这里](https://stackoverflow.com/a/12693661/1136211)所示。一个名为的图像文件的 Uri`Image.png`将是这样的：

```
pack://application:,,,/Resources/Image.png 
```

另请参阅 WPF 中的 MSDN 页面[Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)。

# c# - Windows 8 应用程序使用 Xaml 和 C# 来实现不同的屏幕尺寸和 DPI？

> ID：12885045
> 
> 赞同：1
> 
> 时间：2012-10-14T18:10:42.053
> 
> 标签：c#, xaml, windows-8, windows-runtime

是否有任何方法或使用 xaml 为 Windows 8 应用程序创建通用尺寸模板，以便我们可以创建不同屏幕尺寸和 DPI 的应用程序。正如我们在 Android 中所做的那样，我们将图像和屏幕 UI 放在不同的文件夹中，而应用程序会根据不同的屏幕尺寸和 DPI 来选择它？我正在尝试为此设计一个通用模板，但只是询问MS是否已经创建了类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T19:14:20.067

除了 VS2012 附带的默认模板外，我不知道有任何其他模板。使用差异。如果您知道如何开始，要求并不是那么麻烦。以下是您可能已经看过的一些信息，但我会在此处为那些阅读您的问题以寻找一些信息的人添加它:)

对于缩放到屏幕尺寸和分辨率有不同的建议。

**关于像素密度和图像：**

[缩放至像素密度的指南（Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

基本上，您可以像这样创建文件夹：

选项 #1 - 文件命名约定： ...\test.scale-100.jpg \test.scale-140.jpg \test.scale-180.jpg

选项 #2 - 文件夹命名约定：...\scale-100\test.jpg \scale-140\test.jpg \scale-180\test.jpg

在 XAML 中

```
<Image Grid.Row="0" Grid.Column="1" x:Name="testImage" Source="test.jpg" Margin="2,2,2,2"/> 
```

资源加载很智能，将从正确的文件夹中获取正确的图像

**至于缩放到屏幕**

[缩放至屏幕指南（Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)

你可以：

a) 有一个固定的布局，可以缩放以适应屏幕创建一个[Viewbox](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.viewbox.aspx)控件并将您的控件添加到它，将大小设置为您想要支持的最小大小。不要添加默认自适应的应用栏或其他东西！定义信箱样式和颜色，不要忘记添加不同的 res。我在上面显示的图像。或者使用矢量图形或 XAML。

b) 自适应布局，-查看*VS2012 附带的默认模板*，它们使用自适应布局。

c) 我确定还有其他选项/变化

# c# - 停车费计算

> ID：12885048
> 
> 赞同：1
> 
> 时间：2012-10-14T18:10:53.753
> 
> 标签：c#, if-statement

解决了。非常感谢所有提供意见的人。这里很棒的社区。

我有一项任务，其中一部分程序需要计算客户的停车费。

费用以小时和 1/2 小时为增量。

确定小时数和分钟数。第 1 至 30 分钟按小时费率的 1/2 收费。从 31 到 59 的分钟按一小时计费。

每小时收费 2.00 美元。停车没有最长时间限制。

我被困在如何正确编码这个问题上。我想它使用 if 语句，这不是问题。但是由于没有最大时间限制，我不知道如何正确编码，或者至少如何开始它。

到目前为止，这是我整个项目的代码，我只是不知道如何开始处理程序的这一部分。

```
 public Waterpark()
    {
        InitializeComponent();
    }

    private void individualButton_Click(object sender, EventArgs e)
    {
        if (groupNameTextBox.Text.Trim() != string.Empty)
        {
            try
            {
                groupAmount = int.Parse(groupNameTextBox.Text);
                try
                {
                    parkingMinutes = int.Parse(parkedTextBox.Text);
                    IndividualTotals();
                }
                catch
                {
                    MessageBox.Show("Must be an integer.", "INPUT ERROR");
                    parkedTextBox.Focus();
                    parkedTextBox.SelectAll();
                }
            }
            catch
            {
                MessageBox.Show("Must be an integer.", "INPUT ERROR");
                peopleTextBox.Focus();
                peopleTextBox.SelectAll();
            }
        }
        else
        {
          MessageBox.Show("Must be a valid group name.", "INPUT ERROR");
          groupNameTextBox.Focus();
          groupNameTextBox.SelectAll();
        }    
    }

    private void eventOneCheckBox_CheckedChanged(object sender, EventArgs e)
    {
        eventInt += 1;
        eventInt -= 1;
    }

    private void eventTwoCheckBox_CheckedChanged(object sender, EventArgs e)
    {
        eventInt += 1;
        eventInt -= 1;
    }

    private void eventThreeCheckBox_CheckedChanged(object sender, EventArgs e)
    {
        eventInt += 1;
        eventInt -= 1;
    }

    private void eventFourCheckBox_CheckedChanged(object sender, EventArgs e)
    {
        eventInt += 1;
        eventInt -= 1;
    }

    private void eventFiveCheckBox_CheckedChanged(object sender, EventArgs e)
    {
        eventInt += 1;
        eventInt -= 1;
    }

    private void IndividualTotals()
    {
        extraInt = eventInt - 1;

        switch(extraInt)
        {
        case 1:
            extraFee = 3.00;
            break;
        case 2:
            extraFee = 5.00;
            break;
        case 3:
            extraFee = 6.00;
            break;
        case 4:
            extraFee = 7.00;
            break;
        default:
            extraFee = 00.00;
            break;

        int hoursParked = minutesParked / 60;
        int minutesRemainder = hoursParked % 60;
        double hoursCost = hoursParked * 2;

        if (minutesRemainder <= 30)
        {
            minutesCost = 1;
        }

        else
        {
            minutesCost = 2;
        }
        parkingFee = hoursCost + minutesCost;

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T18:36:12.613

首先，我建议*将*界面（用于输入数据的按钮和文本框）与计算费用的*逻辑分开。*这将通过创建新方法来完成，该方法接受参数（如小时费和总停车时间）并返回总成本（就像*rsbarro*建议的那样）。然后一些按钮点击事件只会检查输入的正确性，调用计数函数，并将它返回的内容放到某个文本框中，无论如何。

如果我理解正确的话，计算费用的实际功能应该不会很难写，如果你考虑如何手动为人停车，例如 20 分钟、30 分钟，然后是 50、60、100、200， 300等。

我将基于此编写其余部分：

> 确定小时数和分钟数。第 1 至 30 分钟按小时费率的 1/2 收费。从 31 到 59 的分钟按一小时计费。
> 
> 每小时收费 2.00 美元。停车没有最长时间限制。

因为这对我来说不是很清楚 - 我应该按 1/2 小时的 13/30 收费 13 分钟，这将是 ~0.43 美元，还是 1 美元，31 分钟是 2.00 美元？那么 61 分钟将是 3.00 美元——这是我的解释。

1.  **确定总分钟数。**

    考虑用户如何提供输入。一个带有分钟的文本框？两个带有小时/分钟的文本框？*一个hh:mm*格式的文本框？但是，找到计算*总分钟数的*方法，因为这是您最终费用的基础。

2.  **数数**

    由于每 60 分钟将收取 2.00 美元，我们可以通过将分钟数除以 60（或 61，取决于解释）并取商（其整数部分）来轻松找到小时数。意思是：

    ```
    25 div 60 = 0
    35 div 60 = 0
    60 div 60 = 1
    95 div 60 = 1
    128 div 60 = 2 
    ```

    在这里我们很容易看到，在 25 和 35 分钟内没有完整的小时，而在 60 分钟内则有一个小时。在 128 分钟内有两个完整小时，我们应该向我们的客户收取费用。这意味着某些*结果值*( `rv`) 将是`rv = (minutes / 60) * 2;`。

    现在我们必须为剩余的时间（不是整小时）添加费用。这里我们有两种选择：如果余数少于 30，我们只收取 1.00 美元。如果超过 30，我们向可怜的家伙收取 2.00 美元。`modulo`使用除法得到余数：

    ```
    25 mod 60 = 25
    35 mod 60 = 35
    60 mod 60 = 0
    95 mod 60 = 35
    128 mod 60 = 8 
    ```

    所以，让我们采取`remainder = minutes % 60;`. 并检查选项（因为这是你的任务，我会用伪代码编写）：

    ```
    remainder <- minutes mod 60;
    if remainder =< 30:
       add $1.00 to the fee
    else: # (if remainder is more than 30, namely 31..59)
       add $2.00 to the fee 
    ```

之后，只需按您的功能返回总费用（全时费用+剩余费用）并呈现给用户。

同样出于好奇：`eventInt`您的代码中到底是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:43:23.280

我讨厌做别人的功课，但这一个真的很简单。您根本不需要 if 语句。不要认为它是每 60 分钟 2 美元。相反，它是每 30 分钟 1 美元。要获得 30 分钟增量的数量，只需将人停放的分钟数除以 30，然后四舍五入到最接近的 int`Math.Ceiling()`

它实际上是一个 1-liner：

```
[TestClass]
public class Parking
{
    private int GetParkingCharge(int minutesParked)
    {
        return (int)Math.Ceiling(minutesParked/30f);
    }

    [TestMethod]
    public void TestParking()
    {
        Assert.AreEqual(0, GetParkingCharge(0));
        Assert.AreEqual(1, GetParkingCharge(25));
        Assert.AreEqual(2, GetParkingCharge(45));
        Assert.AreEqual(2, GetParkingCharge(60));
        Assert.AreEqual(3, GetParkingCharge(61));
        Assert.AreEqual(3, GetParkingCharge(90));
        Assert.AreEqual(4, GetParkingCharge(91));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:46:45.760

这似乎是一个足够的算法：

```
public static float Charge(int lengthInMinutes)
    {
        float charge = 0.0f;
        while (lengthInMinutes >= 60)
        {
            charge += 2;
            lengthInMinutes -= 60;
        }

        // use this code instead of the 'if else' blog below to charge for ever minute after that for half the rate
        //float chargePerMinute = (float)((2.0f / 2) / 60);
        //charge += (float)lengthInMinutes * chargePerMinute;

        // at this point, we'll only have less than 60 minutes
        if (lengthInMinutes > 30)
        {
            charge += 2;
        }
        else if (lengthInMinutes > 0)
        {
            charge += 1;
        }
        if (charge > float.MaxValue)
            return float.MaxValue;
        return charge;
    } 
```

测试的主要功能：

```
class Program
{
    static void Main(string[] args)
    {
        float charge = ParkingCharges.Charge(100);
        Console.WriteLine(charge.ToString("000.00"));
        Console.ReadKey();
    }
} 
```

编辑：另外，如果您的输入不同（假设您正在获得一个时间类，或者它可能是浮点形式，只需先将其转换为分钟）

# c# - 我尝试清理/重置/清除 C# 中的列表，但它给了我 InvalidOperationException 错误

> ID：12885052
> 
> 赞同：0
> 
> 时间：2012-10-14T18:11:27.167
> 
> 标签：c#, list, invalidoperationexception

这是静态 int 方法的一部分：

```
int answer = 0;
foreach(int getal in savedNumbers)
{
    Console.WriteLine(getal);
    answer = answer + getal;
    savedNumbers.Clear(); // after this line, I'm getting an error.
}
return answer; 
```

请帮助我......我不知道为什么 savedNumbers.Clear() 不在该行工作。

编辑：谢谢，问题解决了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:14:10.327

`You can't modify the collection while enumerating over it`. 所以，例外是有效的。完成枚举后清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:13:32.990

您不能在迭代同一列表时修改列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:13:35.390

您正在枚举它的中间清除列表。枚举过程中不能修改列表。

```
int answer = 0;
foreach(int getal in savedNumbers)
{
    Console.WriteLine(getal);
    answer = answer + getal;
}
savedNumbers.Clear(); 
return answer; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:14:43.690

迭代时，您无法更改列表/集合，而您可以使用循环执行相同的操作，如下所述：

```
for (int i = 0 i < savedNumbers.Count; i++)
{
    var getal = savedNumbers[i];
    Console.WriteLine(getal);
    answer = answer + getal;
    savedNumbers.Clear();
} 
```

枚举时不能修改集合。即使没有考虑线程问题，该规则仍然存在。来自[MSDN](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx)：

> 只要集合保持不变，枚举数就保持有效。如果对集合进行了更改，例如添加、修改或删除元素，则枚举器将不可恢复地失效，并且其行为未定义。

参考：

1.  [在枚举时修改 .NET 字典](https://stackoverflow.com/questions/2347269/modifying-net-dictionary-while-enumerating-through-it)
2.  [为什么通过集合枚举会引发异常但遍历其项目不会](https://stackoverflow.com/questions/739326/why-does-enumerating-through-a-collection-throw-an-exception-but-looping-through)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T18:14:50.337

[msdn 说](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.71%29.aspx)：foreach 语句用于遍历集合以获取所需的信息，**但不应用于更改集合的内容，**以免产生不可预知的副作用

# concurrency - 如何在更换当前引擎的同时保持系统运行

> ID：12885053
> 
> 赞同：1
> 
> 时间：2012-10-14T18:11:26.917
> 
> 标签：concurrency, race-condition

我们有两个系统，`A`和`B`。系统 B 发送写入和读取请求，并且 A 使用 A 中的现有引擎 E_current 为每个读取请求返回响应。每个写入请求都会导致现有引擎 E_current 的修改。

E_current 将定期被 E_new 替换。在更新过程中，E_new 还不能使用。此续订过程中出现的一些读取请求取决于续订过程开始后出现的写入请求。新引擎 E_new 还应该对更新过程中出现并已由 .

更新过程完成后，E_current 将被驱逐，E_new 变为 E_current。

***要求：***

1.  请求是完全并发的。例如，在处理读取请求时可能会出现写入请求。
2.  对任何引擎 E 的多次修改都可能导致状态不一致，应保持状态一致性。

***图表：***

[https://dl.dropbox.com/u/3482709/stack1.jpg](https://dl.dropbox.com/u/3482709/stack1.jpg)

[https://dl.dropbox.com/u/3482709/stack2.jpg](https://dl.dropbox.com/u/3482709/stack2.jpg)

# matlab - 链码无限循环

> ID：12885055
> 
> 赞同：2
> 
> 时间：2012-10-14T18:11:31.550
> 
> 标签：matlab, image-processing

我正在实现链码，我偶然发现了一个小问题。首先我做什么：

我从边界上的某个像素开始，然后根据此检查存在哪个相邻像素：

```
3  2  1
 \ | /
4-- --0
 / | \
5  6  7 
```

虽然在这里我有一个问题：

![在此处输入图像描述](../Images/7a8d165a5d77d72665466215ebda3f60.png)

小红点是算法开始的地方。那么第一个方向是 2 然后 1 然后 0 然后 0 等等...

如果您跟随黄点，您会看到它以两个相邻的点结束。这就是算法在方向 4 中前进的地方（因为在方向 0、1、2 或 3 上没有值为 1 的像素）。虽然在下一步它会检查方向 0（它始终是第一个开始的方向）......当然它存在，因为它是前一个点并且会向右走。在这里，它陷入了无限循环（从左到右，从右到左）。

我现在的问题是，我该如何解决这个问题？

我使用的代码是：

```
% Implementation of tangent angle function (chain code)

clear 
clc

directions = [ 1, 0
               1,-1
               0,-1
              -1,-1
              -1, 0
              -1, 1
               0, 1
               1, 1]

I = imread('./IMAGES/1/M_201005_1_0001.pgm');
Ibw = im2bw(I,0.15); % This is also by setting all the pixels with intesity lower than 17 to 0;

tanAngFunc ={};

[row,col] = find(Ibw);

y = col(find(max(row)==row))
x = max(row)

imshow(I)
hold on;
plot(y,x,'r.','MarkerSize',1)
hold on

l=1;

  not_done = true;
  while not_done
    if l== 36
        'test'
    end

      % Right (0)
      if Ibw(x+directions(1,2),y+directions(1,1)) ~=0

            tanAngFunc{l} = 0;
           x=  x+directions(1,2);
           y= y+directions(1,1);

      % Above right(1)
      elseif Ibw(x+directions(2,2),y+directions(2,1)) ~=0
            tanAngFunc{l} = 2;
            x= x+directions(2,2);
            y= y+directions(2,1);

      % Above (2)
      elseif Ibw(x+directions(3,2),y+directions(3,1)) ~=0
            tanAngFunc{l} = 2;
            x= x+directions(3,2);
            y= y+directions(3,1); 

      % Above left (3)
      elseif Ibw(x+directions(4,2),y+directions(4,1)) ~=0
            tanAngFunc{l} = 2;
            x= x+directions(4,2);
            y= y+directions(4,1);

      % Left (4)
      elseif Ibw(x+directions(5,2),y+directions(5,1)) ~=0
            tanAngFunc{l} = 2;
            x= x+directions(5,2);
            y= y+directions(5,1);

      % Bottom left (5)
      elseif Ibw(x+directions(6,2),y+directions(6,1)) ~=0
            tanAngFunc{l} = 2;
            x= x+directions(6,2);
            y= y+directions(6,1);

      % Bottom (6)
      elseif Ibw(x+directions(7,2),y+directions(7,1)) ~=0
            tanAngFunc{l} = 2;
            x= x+directions(7,2);
            y= y+directions(7,1);

      % Bottom right (7)
      elseif Ibw(x+directions(8,2),y+directions(8,1)) ~=0
            tanAngFunc{l} = 3;
            x= x+directions(8,2);
            y= y+directions(8,1);
      end

      plot(y,x,'y.','MarkerSize',3)
      hold on

      pause(1)
      l = l + 1;

    not_done = (x ~= col(find(max(row)==row)) && y ~= max(row));
  end 
```

在这张图片上： ![在此处输入图像描述](../Images/bc5f62b690c9ebca273f320e0d2a75f3.png)

如果您想自己尝试一下

**编辑：**

正如评论中所建议的，在我的第二个版本中，我确保算法没有使用以前访问过的像素。结果： ![在此处输入图像描述](../Images/5b86cb2be90c0f13bc295ebc0eaa6bc0.png)

如您所见，这不是一个有效的答案。

**编辑 2**

关于@jonas 的更新解决方案。我很快把它放在excel中，这样更容易理解。（尚未找到带 1 的像素，已找到像素 x）。

![在此处输入图像描述](../Images/9d37451d48e94e64a6c64d34958b61f9.png)

所以这不是 100% 有效的，当使用一个巨大的数据集时，确保每张图片的边缘都是 2 像素宽是相当不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:22:01.877

您的算法的问题在于它只检查要访问的“候选”像素是否是对象的一部分——但不执行额外的检查来确保像素是边界的一部分。这就是为什么它会愉快地穿过物体的内部。

一种流行的边界追踪算法是摩尔邻域追踪算法。除了[维基百科页面](http://en.wikipedia.org/wiki/Moore_neighborhood)，看看[这个页面](http://www.imageprocessingplace.com/downloads_V3/root_downloads/tutorials/contour_tracing_Abeer_George_Ghuneim/moore.html)，它更详细地解释了算法背后的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:58:50.197

解决此问题的最简单方法是使用函数[BWTRACEBOUNDARY](http://www.mathworks.com/help/images/ref/bwtraceboundary.html)。

用你的起点`(x,y)`，你会写：

```
B = bwtraceboundary(Ibw,[x,y],'N'); 
```

绘制在图像上的结果如下所示：

![在此处输入图像描述](../Images/ec9b458378d9e1289c3e3228850d3562.png)

**编辑**

如果不能使用`bwtraceboundary`，则应首先仅获取边界像素：

边界 = Ibw - imerode(Ibw,ones(3));

只要您的对象宽于两个像素，这将避免几乎所有问题。

# java - 打破循环中的方法

> ID：12885056
> 
> 赞同：-4
> 
> 时间：2012-10-14T18:11:43.780
> 
> 标签：java, methods, if-statement, while-loop, break

我的 if 语句中有一个带有 break 语句的方法。该方法在一个while循环中。如果我在方法的 if 语句中使用 break 或者我必须使用[嵌套循环](https://stackoverflow.com/questions/324831/breaking-out-of-a-nested-loop)，它会跳出 while 循环吗？

```
public int x=0;public int y=0;
public boolean endCondition = true;
public void someMethod()
{
  if(x!=y) {//do something}
  else break;
} 
while(endCondition==true)
{ 
  this.someMethod();
}
System.out.println("Bloke"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:14:24.797

如果`break`没有循环或`switch`. 你需要使用`return`. 但这似乎是一个无休止的方法调用，会导致**StackOverflow**异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:09:44.897

You probably need to return a boolean value from the method, which you can then use to decide whether to break the loop.

It's not important in this simple example, but it's usually a good idea to label your loops when using `break`, so it's clear what you are breaking out of, especially when using nested loops. See the label `FOO` below.

```
public boolean someMethod()
{
  if(x!=y) 
  {
    //do something
    return false;
  }
  return true; // break
} 

FOO:while(true)
{ 
  if(someMethod()) break FOO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:22:52.503

要从一个功能中脱颖而出，您必须使用`return`. `break`只会让你从你调用它的内部循环中脱离出来。

# html - 如何使用拉伸 100% 高度的渐变效果在 html/css 中制作垂直边框

> ID：12885057
> 
> 赞同：1
> 
> 时间：2012-10-14T18:11:46.917
> 
> 标签：html, css

因此，我正在为我所属的俱乐部构建布局，无论如何，我使用的布局具有边框沿整个页面的一侧延伸的效果，但使用顶部和底部附近的渐变进行篡改。这是布局 - 我指的是页面左侧的软阴影： [https ://dl.dropbox.com/u/6809301/sogawebsite.jpg](https://dl.dropbox.com/u/6809301/sogawebsite.jpg)

我通常认为自己对 html/css 相当精通，但我真的很难完成这项工作。如果没有在父容器上明确指定高度，我无法在主体展开时拉伸边框。使用边边框渐变，我们真的有 3 个部分 - 需要停靠到容器顶部的顶部，停靠到页面底部的底部 - 两者都可以设为静态高度，中间保持纯色但需要根据页面高度进行拉伸。

任何帮助都会被挪用。我一直觉得基于高度的缩放在 html 中有些尴尬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:36:43.940

一种可能的选择是使用具有 100% 高度和[CSS 渐变](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_gradients)作为生成伪元素的背景的绝对定位的生成内容（`:before`用于左侧“边框”和右侧）。对于 IE9 及更低版本，可以使用常规单色边框作为后备。`:after`

有关工作示例，请参见[现场演示。](http://jsfiddle.net/WT4a3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:37:46.510

明智的做法是使用[渐变边框](http://css-tricks.com/examples/GradientBorder/)，特别是`border-image`。浏览器支持并不完美，但由于这是一个非常非必要的效果，所以稍微优雅的降级不会对全面提高性能造成伤害。

这是一个小[演示](http://codepen.io/anon/pen/kxaLn)。

我使用[了 SASS（带有 Compass）](http://compass-style.org/)，它将编译成 CSS（缩小！）并为您处理供应商前缀：

```
div  
  border-width: 3px
  +border-image(linear-gradient(top, rgba(0,0,0,0), black, black, rgba(0,0,0,0)) 1 100%) 
```

但是，如果你是一个受虐狂，你可以手动完成 CSS：

```
div {
border-width: 3px;
-moz-border-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0), #000000, #000000, rgba(0, 0, 0, 0)) 1 100%;
-webkit-border-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, rgba(0, 0, 0, 0)), color-stop(33.33333%, #000000), color-stop(66.66667%, #000000), color-stop(100%, rgba(0, 0, 0, 0))) 1 100%;
-webkit-border-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0), #000000, #000000, rgba(0, 0, 0, 0)) 1 100%;
-o-border-image: -o-linear-gradient(top, rgba(0, 0, 0, 0), #000000, #000000, rgba(0, 0, 0, 0)) 1 100%;
border-image: linear-gradient(top, rgba(0, 0, 0, 0), #000000, #000000, rgba(0, 0, 0, 0)) 1 100%;} 
```

如果这对您不起作用，请查看有关 CSS 技巧的其他一些技术，或使用图像。

# azure - 关闭实例后 Azure 虚拟机存储是否丢失？

> ID：12885061
> 
> 赞同：1
> 
> 时间：2012-10-14T18:12:03.070
> 
> 标签：azure, virtual-machine

如果我在我的 Azure 虚拟机上安装了一些东西，比如说 NotePad++ 和一些个人文件，如果虚拟机关闭/重新启动，这些数据会丢失吗？

我知道在 Amazon EC2 上，实例关闭并尝试确认 Azure 是否具有同样烦人的“功能”后数据会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:41:52.497

如果您谈论的是 Windows Azure 的新（预览版）VM 功能，您可能就是这样，答案是您*不会*丢失您的存储。虚拟机由持久存储支持。

顺便说一句，如果您使用的是 EBS 支持的 VM，EC2 上的答案是相同的。

# android - 从 AsyncTask 更新两个分离的小部件

> ID：12885066
> 
> 赞同：2
> 
> 时间：2012-10-14T18:12:28.930
> 
> 标签：android, json, multithreading, widget

我想要什么：当用户添加小部件时，警报管理器开始更新添加的小部件。小部件从互联网（json 资源）获取数据。小部件使用专用的 json 页面（每个小部件都有一个获取数据的页面：例如 test.json?page=5）

我已经有一个扩展 AppWidgetProvider 的类。在这个类中有一个函数：`private void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId)` 在这个函数里面有：

```
remoteViews = new RemoteViews(context.getPackageName(),  R.layout.widget);
new HttpRequestTask(SELECTED_PAGE).execute(remoteViews); 
```

这是 HttpRequestTask 类：

```
 class HttpRequestTask extends AsyncTask<RemoteViews, Void, String> {

        private RemoteViews rv;
        private String url;

        public HttpRequestTask(String string) {
            url = string;
        }

        protected String doInBackground(RemoteViews... contextParam) {
            String html = "";
            try {
                rv = contextParam[0];
                HttpClient client = new DefaultHttpClient();
                HttpGet request 

= new HttpGet("http://www.hwlogos.com/"+url+".txt");
            HttpResponse response;      
            response = client.execute(request);     

            InputStream in = response.getEntity().getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            StringBuilder str = new StringBuilder();
            String line = null;
            while((line = reader.readLine()) != null)
            {
                str.append(line);
            }
            in.close();
            html = str.toString();

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return html;
     }

     protected void onPostExecute(String html) {
         rv.setTextViewText(R.id.ip, html);
     }
} 
```

问题是文本没有更新！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:32:51.190

我认为您错过了 onPostExecute() 中的字符串，例如：

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());
appWidgetManager.updateAppWidget(allWidgetIds, rv); 
```

当您调用 appWidgetManager.updateAppWidget(...) 时会发生更新，但是当您只调用 rv.setTextViewText(R.id.ip, html); - 它没有。

希望它会有所帮助。

# python - 与 SQLAlchemy 一起使用的 Python 框架

> ID：12885068
> 
> 赞同：4
> 
> 时间：2012-10-14T18:12:33.313
> 
> 标签：python, frameworks, web, turbogears2

我正计划使用 Turbogears 2 开始一个项目。但我注意到，特别是在 stackoverflow.com 上，似乎没有太多关于它的问题。根据 Wikipedia 的说法，该框架似乎仍在积极开发中（最后一个稳定版本大约在 50 天前发布）。我选择 TG2 主要是因为它支持 SQLAlchemy，因此我找到了一个满足我需求的卓越 ORM 解决方案。

**问题**：

*   你会认为 TG2 是一个有未来的框架，还是一种垂死的技术？
*   考虑到上一个问题的答案，您是否建议将其用于新项目？
*   如果答案是“否”，还有哪些类似于 TG2 的 Python 框架（特别是：高度模块化，与 SQLAlchemy 集成），还有哪些？

希望这些不会被归类为“开放式”问题。干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T18:58:38.673

绝对去[金字塔](http://www.pylonsproject.org/)

它是高度模块化的，并且具有将 SqlAlchemy 用作 ORM 的本机“脚手架”。

您还可以将 SqlAlchemy 与[FormAlchemy](https://github.com/FormAlchemy/formalchemy)结合使用，FormAlchemy是建立在 SqlAlchemy 之上的表单系统。

同一个开发者发布了[pyramid_formalchemy](https://github.com/FormAlchemy/pyramid_formalchemy)模块来帮助您将所有这些设置在一起。

# java - Java - 关于命令行\IDE 执行的“user.dir”属性

> ID：12885074
> 
> 赞同：0
> 
> 时间：2012-10-14T18:12:56.030
> 
> 标签：java

我`System.getProperty("user.dir")`用作入口点（绝对路径），其中任何其他文件（和目录）遍历相对于入口点是相对的。

`user.dir`无论程序是从命令行调用还是由 IDE（如预期的那样）调用，该属性都有不同的值。

确保`user.dir`属性在执行环境中“独立”的最佳实践是什么？

**更新：**如果您在 IDE 中使用 Eclipse，请检查 Eclipse 中的[System.getProperty("user.dir") 异常](https://stackoverflow.com/questions/722003/system-getpropertyuser-dir-anomaly-in-eclipse)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:31:16.030

和类似属性的全部意义`user.dir`在于，它依赖于执行环境。

所以答案是：不要

在 Eclipse 中您可以做的是编辑运行配置以使用适合您需要的工作目录。我猜这也将在其他 IDE 中可用。

# ruby-on-rails - 在 Rails 中使用 Rack::FiberPool 时没有日志

> ID：12885078
> 
> 赞同：1
> 
> 时间：2012-10-14T18:13:10.353
> 
> 标签：ruby-on-rails, rack, eventmachine

我正在使用带有 Rails 的[Rack FiberPool 。](https://github.com/mperham/rack-fiber_pool)当我在开发模式下运行时，控制台上没有日志显示（静态资产和活动记录日志都没有）。

日志包含对调试有用的信息，如何将其返回到控制台？

# javascript - 单击两次时更改div的颜色？

> ID：12885082
> 
> 赞同：1
> 
> 时间：2012-10-14T18:13:40.507
> 
> 标签：javascript, background-color

我有一个带有 onClick 命令的链接来更改背景颜色。当您单击它时，颜色会很好地改变，但是当您再次单击它时，如何使背景颜色变为正常？

```
onClick="style.backgroundColor='#3E729F';" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T18:15:46.300

您可以在脚本元素中定义一个函数：

```
<script>
var oldColor;
function switchColor(el) {
   if (oldColor) {
        el.style.backgroundColor = oldColor;
        oldColor = null;
   } else {
       oldColor = el.style.backgroundColor;
       el.style.backgroundColor = '#3E729F';
   }
}
</script> 
```

并这样称呼它：

```
onclick="switchColor(this);" 
```

[示范](http://jsfiddle.net/EwaCW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:45:16.870

如果只需要添加或删除背景颜色，则可以检查元素是否具有背景颜色。

```
<script>
function highlight(e) {
    if (e.style.backgroundColor) {
        e.style.backgroundColor = null;
    } else {
        e.style.backgroundColor = "#ffa";
    }
}
</script>
<div onclick="highlight(this);">a</div>
<div onclick="highlight(this);">a</div> 
```

# cakephp - 如何在 Cakephp 中的链接内显示图像

> ID：12885083
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:13:44.070
> 
> 标签：cakephp, cakephp-2.1

> **可能重复：**
> [CakePHP：链接中的图像，想要使链接指向图像位置](https://stackoverflow.com/questions/1878301/cakephp-image-inside-link-want-to-make-link-point-to-image-location)

我正在尝试将图像（在 $avatar 中）添加到 cakephp 中的链接，但它显示为文本

```
echo $this->Html->link( $avatar, '/notifications/ajax_show', array( 
    'class' => 'overlay', 
    'title' => 'text' ) 
)); 
```

无法使用 $this->Html->image 的 url 参数，因为我想在 URL 上设置一个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:30:37.417

转义参数不仅有据可查，还有一个完全相同的示例可用： [http ://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::link](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::link)

# wpf - 如何在 WPF 中将一维 ObservableCollection 显示为矩阵？

> ID：12885085
> 
> 赞同：0
> 
> 时间：2012-10-14T18:13:53.427
> 
> 标签：wpf

我有一个一维的 ObservableCollection。如何将其显示为多维集合（矩阵）？

例如：我有图像列表（url）我想显示它，所以一行中会有三个图像，并且与 count/3 一样多的行将等于。

我发现了如何将二维列表绑定到网格，但没有我想要的。

这是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:20:05.440

是`overriding`的`ItemsPanel`，你可以`ItemsControl`像这样 -

```
<ItemsControl>
   <ItemsControl.ItemsPanel>
      <ItemsPanelTemplate>
         <UniformGrid Rows="3" Columns="3"/>
      </ItemsPanelTemplate>
   </ItemsControl.ItemsPanel>
</ItemsControl> 
```

# java - 纠正 JMF 视频捕获

> ID：12885087
> 
> 赞同：1
> 
> 时间：2012-10-14T18:13:59.780
> 
> 标签：java, jmf

我在 stackoverflow.com 看到了以下代码，并复制到你在 JMF 上提交的我的系统中：

```
import Logging.LogRunner; //Logging.LogRunner is absent s error occurs
import java.util.Vector;
import java.awt.*;
import java.awt.event.*;
import javax.media.*;
import javax.media.format.*;
import javax.media.protocol.*;
import javax.media.datasink.*;
import javax.swing.JButton;
import javax.swing.JOptionPane;

/**
 * Records audio and video from a usb camera and saves it to disk. Essentially what is happening
 * is we are creating two video streams and an audio stream. We use two video streams
 * so one can be sent to the file, and the other can be sent to the gui to show the
 * user what they are currently recording. This class is configured to use a certain
 * audio and video format, but this can easily be changed to fit dirrenet needs.
 * This class was created with
 * help from http://www.codeproject.com/KB/audio-video/Java_Video_Capture.aspx.
 * Please refer to that site for more information.
 * @author dvargo
 */

public class VideoRecorder
{

    /**
     * The source of the video stream
     */
    CaptureDeviceInfo device = null;

    /**
     * The location of media content
     */
    MediaLocator ml = null;

    /**
     * MediaHandler for rendering and controlling time based media data
     */
    Player player = null;

    /**
     * The screen that will display the video as it is being recorded
     */
    Component videoScreen = null;

    /**
     * The Processor processes data and creates an output in the destination 
     * format required
     */
    Processor processor = null;

    /**
     * takes a DataSource as input and renders the output to a specified destination
     */
    DataSink dataSink = null;
    /**
     * 
     */
    TheDataSinkListener dataSinkListener = null;
    /**
     * The form for the video and other gui compoenents
     */
    Frame frm = null;
    /**
     * A reference to the Starter class.
     */
    VideoStarter theForm = null;  //VideoStarter does not exist so error occurs

    /**
     * Used to determine if something went wrong
     */
    boolean error = false;

    /**
     * Basic Constructor to begin recording video to a specified file path. This
     * constructor initalizes everything needed to begin recording.
     * @param saveFileTo The path and file name of where to save the video.
     * @param inForm Reference to the Starter class that initatied this recording.
     */
    public VideoRecorder(String saveFileTo,VideoStarter inForm)
    {
        theForm = inForm;
        try
        {
            //gets a list of devices how support the given video format
            Vector deviceList = CaptureDeviceManager.getDeviceList(new YUVFormat());

            //if we couldnt find anything to record from
            if(deviceList.size() == 0)
            {
                LogRunner.dialogMessage(this.getClass(),"No video capture devices could be found.");
                error = true;
                return;
            }

            // get video device - the first one is almost always the only available camera
            device = (CaptureDeviceInfo) deviceList.firstElement();
            ml = device.getLocator();

            //create a source from the device
            DataSource ods = null;
            ods = Manager.createDataSource(ml);

            /*
             * Clone the video source so it can be displayed and used to capture
             * the video at the same time. Trying to use the same source for two
             * purposes would cause a "source is in use" error
             */
            DataSource cloneableDS = Manager.createCloneableDataSource(ods);
            DataSource PlayerVidDS = cloneableDS;

            // The video capture code will use the clone which is controlled by the player
            DataSource CaptureVidDS = ((javax.media.protocol.SourceCloneable) cloneableDS).createClone();

            /*
             * Display video by starting the player on the source clonable data source
             * the clones are fed data stopping the player will stop the video flow
             * to the clone data source
             */
            player = Manager.createRealizedPlayer(PlayerVidDS);
            player.start();

            // get an audio device and create an audio data source
            deviceList = CaptureDeviceManager.getDeviceList(new javax.media.format.AudioFormat(null));
            device = (CaptureDeviceInfo) deviceList.firstElement();
            ml = device.getLocator();
            DataSource audioDataSource = Manager.createDataSource(ml);

            // merge audio and video data sources
            DataSource mixedDataSource = null;
            DataSource dsArray[] = new DataSource[2];
            dsArray[0] = CaptureVidDS; // this is a cloned datasource and is controlled by the master clonable data source
            dsArray[1] = audioDataSource;
            try
            {
                mixedDataSource = javax.media.Manager.createMergingDataSource(dsArray);
            }
            catch (Exception e)
            {
                //exception handling here
                error = true;
                System.out.println("Error 1");
                e.printStackTrace();
            }

            // setup output file format to msvideo
            FileTypeDescriptor outputType = new FileTypeDescriptor(FileTypeDescriptor.MSVIDEO);

            // setup output video and audio data format
            Format outputFormat[] = new Format[2];
            //outputFormat[0] = new VideoFormat(VideoFormat.RGB);
            outputFormat[0] = new VideoFormat(VideoFormat.YUV);
            outputFormat[1] = new AudioFormat(AudioFormat.LINEAR);

            // create a new processor
            ProcessorModel processorModel = new ProcessorModel(mixedDataSource, outputFormat, outputType);
            try
            {
                processor = Manager.createRealizedProcessor(processorModel);
            }
            catch (Exception e) {
                // exception handling here
                error = true;
                System.out.println("Error 2");
                e.printStackTrace();
            }

            try
            {
                // get the output of the processor to be used as the datasink input
                DataSource source = processor.getDataOutput();

                // create a File protocol MediaLocator with the location of the file to which bits are to be written
                MediaLocator mediadestination = new MediaLocator("file:" + saveFileTo);

                // create a datasink to create the video file
                dataSink = Manager.createDataSink(source, mediadestination);

                // create a listener to control the datasink
                dataSinkListener = new TheDataSinkListener();
                dataSink.addDataSinkListener(dataSinkListener);
                dataSink.open();

                // now start the datasink and processor
                dataSink.start();

                processor.start();
            } 
            catch (Exception e)
            {
                // exception handling here
                error = true;
                System.out.println("Error 3");
                e.printStackTrace();
            }

            //set up the gui
            createGui();

        }
        catch (Exception e)
        {
            System.out.println("Error 4");
            LogRunner.getLogger().warning("Error recording video - " + e.getMessage());
            e.printStackTrace();
            error = true;
        }
    }

    /**
     * Flag that determines if something went wrong
     * @return True if something did go wrong, false if everything is fine.
     */
    public boolean getError()
    {
        return error;
    }

    /**
     * Creates the gui used to display what is currently being recorded.
     */
    private void createGui()
    {
            videoScreen = player.getVisualComponent();
            frm = new Frame("Recording");
            frm.setSize(300, 300);
            frm.setLayout(new BorderLayout());
            frm.add(videoScreen,BorderLayout.CENTER);
            JButton close = new JButton("Click Here when done");
            frm.add(close,BorderLayout.SOUTH);
            close.setVisible(true);
            close.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(ActionEvent e) {

                    // Stop the processor doing the movie capture first
                    processor.stop();
                    processor.close();

                    // Closing the processor will end the data stream to the data sink.
                    // Wait for the end of stream to occur before closing the datasink
                    dataSinkListener.waitEndOfStream(10);
                    dataSink.close();

                    // stop and close the player which closes the video data source
                    player.stop();
                    player.close();

                    theForm.done();

                    // dispose of the frame and close the application
                    frm.setVisible(false);

            }
        });
            frm.setAlwaysOnTop(true);
            frm.setUndecorated(true);
            frm.setLocationRelativeTo(theForm.mainWindow);
            frm.setVisible(true);

    }
}

/**
 *
 * Control the ending of the program prior to closing the data sink
 */
class TheDataSinkListener implements DataSinkListener {

    boolean endOfStream = false;

    // Flag the ending of the data stream
    public void dataSinkUpdate(DataSinkEvent event)
    {
        if (event instanceof javax.media.datasink.EndOfStreamEvent)
        {
            endOfStream = true;
        }
    }

    /**
     * Cause the current thread to sleep if the data stream is still available.
     * This makes certain that JMF threads are done prior to closing the data sink
     * and finalizing the output file
     */
    public void waitEndOfStream(long checkTimeMs) {
        while (!endOfStream)
        {
            try
            {
                //Thread.currentThread().sleep(checkTimeMs);
                Thread.sleep(checkTimeMs);
            } 
            catch (InterruptedException ie)
            {
                System.out.println("Error 5");
                e.printStackTrace();
            }
        }
    }

    public static void main(String []args)
    {

        new VideoRecorder("d:/yusuf/abc.mpg",theForm);
    }
} 
```

但是我在哪里可以获得 Logging.LogRunner 和 VideoStarter。对于这些，我的程序在编译期间显示错误。显示以下错误消息

```
1.
symbol:   variable LogRunner
  location: class VideoRecorder
F:\Tutorials\Java Tutorial\Programs\VideoRecorder\src\VideoRecorder.java:206: error: cannot find symbol
            LogRunner.getLogger().warning("Error recording video - " + e.getMessage());

2.
public VideoRecorder(String saveFileTo,VideoStarter inForm)
                                           ^
  symbol:   class VideoStarter
  location: class VideoRecorder 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T16:28:51.040

我真的是那个写的。很抱歉延迟回复，因为我确定您已经过去了，但它可能对将来的某人有用。LogRunner 是我们用来写出日志消息的类。您可以删除它，或使用任何您喜欢的日志记录。

VideoStarter 只是一个启动视频录制过程的 JWindow。这个类也不需要它来工作。

# jquery - DIV中的随机位置，不工作jQuery

> ID：12885092
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:14:49.650
> 
> 标签：jquery, css

所以我想实现这一点： [http ://superdit.com/2010/12/25/moving-element-to-random-position-inside-a-container/](http://superdit.com/2010/12/25/moving-element-to-random-position-inside-a-container/)

我认为我的 .js 代码应该没问题，仍然是#pageWrap（我的容器）之外的“心脏”动画。怎么了？

链接到我的网站：[http ://carlpapworth.com/htmlove/fumbling.html](http://carlpapworth.com/htmlove/fumbling.html)

编辑：实际上我有两个问题，第二个是悬停动作只发生一次，在第一个“悬停动画效果”之后它停止工作。PLZ帮助:)

HTML：

```
<body>
<header>

<div id="headerTitle"><a href="index.html">&lt;html<span class="heart">&hearts;</span>ve&gt;</a>
            </div>
            <div id="help">
                <h2>?</h2>
                <div id="helpInfo">
                    <p>The name of the puzzle should lead u to success!</p>
                </div>
            </div>
        </header>
    <div id="reward">
        <div id="rewardContainer">
            <div id="rewardBG" class="heart">&hearts;
            </div>
            <p>OMG, this must be luv<br><a href="index.html" class="exit">x</a></p>
        </div>
    </div>  
    <div id="pageWrap">
        <div id="goal">
            <a href="#reward" class="heart">&hearts;</a>
        </div>  
    </div> <!-- END Page Wrap -->
    <footer>
        <div class="heartCollection">
            <p>collect us if u need luv:<p>
            <ul>
                <li><a id="collection1">&hearts;</a></li>
                <li><a id="collection2">&hearts;</a></li>
                <li><a id="collection3">&hearts;</a></li>
                <li><a id="collection4">&hearts;</a></li>
                <li><a id="collection5">&hearts;</a></li>
                <li><a id="collection6">&hearts;</a></li>
            </ul>
        </div>
        <div class="credits">with love from Popm0uth ©2012</div>
    </footer>

</body> 
```

CSS

```
body{
    overflow: hidden;
    }

#pageWrap{
padding: 20px 20px 100px 20px;
position: relative;
width: 100%;
height: 700px;
text-align: center;
display: block;
}

header{
position: fixed;
width: 100%;
height: 60px;
margin: 0 auto;
left: 0px;
background: url(../images/bg.png) solid;
z-index: 2000;
display: block;
}

#goal{
position: relative;
width: 100px;
height: 100px;
left: 50%;
top: 25%;
margin-left: -100px;
padding: 30px;
display: block;
}

a.heart{
font-size: 80px;
text-align: center;
display: block;
}

footer{
position: fixed;
bottom: 0px;
padding: 10px; 
width: 100%;
height: 100px;
background: /*url(../images/bgFooter.png)*/ #dddddd;
z-index: 2000;
} 
```

JS：

```
$(document).ready(function() {
function randomFromTo(from, to){
            return Math.floor(Math.random() * (to - from + 1) + from);
}

            /* get container position and size
             * -- access method : cPos.top and cPos.left */
            var cPos = $('#pageWrap').offset();
            var cHeight = $(window).height() - $('header').height() - $('footer').height();
            var cWidth = $(window).width() - $('header').width() - $('footer').width(); 

            // get box padding (assume all padding have same value)
            var pad = parseInt($('#goal').css('padding-top').replace('px', ''));

            // get movable box size
            var bHeight = $('#goal').height();
            var bWidth = $('#goal').width();

            // set maximum position
            maxY = cPos.top + cHeight - bHeight - pad;
            maxX = cPos.left + cWidth - bWidth - pad;

            // set minimum position
            minY = cPos.top + pad;
            minX = cPos.left + pad;

            // set new position         
            newY = randomFromTo(minY, maxY);
            newX = randomFromTo(minX, maxX);

        $('#goal').mouseenter(function() {
            $(this).stop(true,true).animate({
                left: newY,
                top: newX
                });
        });
});

    /*
    function randomFromTo(from, to){
            return Math.floor(Math.random() * (to - from + 1) + from);
        }

    function moveRandom {
            /* get container position and size
             * -- access method : cPos.top and cPos.left
            var cPos = $('#pageWrap').offset();
            var cHeight = $('#pageWrap').height();
            var cWidth = $('#pageWrap').width();

            // get box padding (assume all padding have same value)
            var pad = parseInt($('#pageWrap').css('padding-top').replace('px', ''));

            // get movable box size
            var bHeight = $('#goal').height();
            var bWidth = $('#goal'+id).width();

            // set maximum position
            maxY = cPos.top + cHeight - bHeight - pad;
            maxX = cPos.left + cWidth - bWidth - pad;

            // set minimum position
            minY = cPos.top + pad;
            minX = cPos.left + pad;

            // set new position         
            newY = randomFromTo(minY, maxY);
            newX = randomFromTo(minX, maxX);

            $('#goal').animate({
                top: newY,
                left: newX
                }, 500, function() {
            });
        }   
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:35:10.393

您不必指定#pageWrap 的高度和宽度。您必须根据窗口大小来计算它。

替换这个：

```
var cHeight = $('#pageWrap').height();
var cWidth = $('#pageWrap').width(); 
```

接着就，随即：

```
var cHeight = $(window).height() - $('header').height() - $('footer').height();
var cWidth = $(window).width() - $('header').width() - $('footer').width(); 
```

你没看到这里有什么奇怪的吗？

```
left: newY, 
top: newX 
```

应该

```
left: newX, 
top: newY 
```

一切都会到位:)

编辑：

该`onmouseover`事件不会发出一次信号，每次鼠标悬停在该区域上时都会处理它，但您只需在代码开始时初始化最终目标点。所以移动的物体停留在同一个地方。

最后你应该修改你的脚本如下：

```
$(document).ready(function() {

  function randomFromTo(from, to){
     return Math.floor(Math.random() * (to - from + 1) + from);
  }

  $('#goal').mouseenter(function() {

    var cPos = $('#pageWrap').offset();
    var cHeight = $(window).height() - $('header').height() - $('footer').height();
    var cWidth = $(window).width();

    // get box padding (assume all padding have same value)
    var pad = parseInt($('#goal').css('padding-top').replace('px', ''));

    // get movable box size
    var bHeight = $('#goal').height();
    var bWidth = $('#goal').width();

    // set maximum position
    maxY = cHeight - bHeight - pad;
    maxX = cWidth - bWidth - pad;

    // set minimum position
    minY = cPos.top + pad;
    minX = cPos.left + pad;

    // set new position
    newY = randomFromTo(minY, maxY);
    newX = randomFromTo(minX, maxX);

    $(this).animate({
            left: newX,
            top: newY
    });
  });
}); 
```

# memory - 我可以自定义 Azure 虚拟机上的内存量吗？

> ID：12885094
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:15:26.770
> 
> 标签：memory, azure, virtual-machine

我正在查看 Azure[完整计算器](https://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)，但没有看到用于调整内存的滑块。他们是否允许自定义内存大小，还是我坚持这些愚蠢的配置？我希望至少有 16GB，并且能够像 300GB+ 这样更高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:39:26.680

有五种尺寸（特小、小、中、大和特大），它们是固定的。超大的是一个 16GB 的虚拟机，但在操作系统开销之后，你只能得到 14GB。

随着时间的推移，可能会出现其他大小，但您不太可能很快看到 300GB。Windows Azure 使用商品服务器，它们几乎没有那么多 RAM。

# php - 从给定时间减去一秒

> ID：12885098
> 
> 赞同：17
> 
> 时间：2012-10-14T18:15:43.867
> 
> 标签：php, datetime, time

我想加 1 天，然后从给定时间减去（减）1 秒。

我做了：

```
$fromDate = date("Y-m-d", strtotime("2012-09-28")).' 00:00:00';
$date = strtotime(date("y-m-d H:m:s", strtotime($fromDate)) . " +1 day") - 1;
$toDate = date('Y-m-d H:m:s', $date);
echo $toDate; 
```

但不是`2012-09-28 23:59:59`它返回`2012-09-29 00:09:59`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-14T18:19:04.367

您正在转来转去，而不是在代码中找到重点。这是我的`DateTime`对象解决方案：

```
$time = new DateTime("2012-09-28");
$time->modify("+1 day");
$time->modify("-1 second");

var_dump($time); 
```

或者，如果您只需要一天的最后一秒，为什么不只是：

```
$time = "2012-09-28";
$time .= " 23:59:59"; 
```

因为每天的秒数/分钟/小时数不太可能改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T18:21:19.883

如果我理解你的话，你只想要一天的最后一秒，对吧？

如果是这种情况，那么您可以：

```
$theDate = "2012-09-28";
$fromDate = $theDate." 00:00:00";
$toDate = $theDate." 23:59:59"; 
```

# java - 递归是如何工作的？

> ID：12885105
> 
> 赞同：1
> 
> 时间：2012-10-14T18:16:45.747
> 
> 标签：java, recursion

请以最简单的方式解释递归的工作原理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T18:26:23.013

如前所述，递归是函数调用自身的时候。这里说明了使用`factorial`，其中`factorial(5)`数学评估为值`5 * 4 * 3 * 2 * 1`。

```
public int factorial(int x) {
   if (x == 1) return 1;
   else return x * factorial (x - 1);
}

// Try routine
factorial(3); 
```

评估为

```
 factorial(1) = 1                                        = 1
 factorial(2) = 2 * factoral(1)                          = 2 * 1 
 factorial(3) = 3 * (2 * factorial(2) * (factorial(1))   = 3 * 2 * 1
 ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T18:27:11.037

通常，它是一个函数，它自己*计算一个结果，然后调用自己来获取其余的结果*。

例如，要获得小于或等于 3 的所有正数，该函数会说：“一个结果是 3，其余结果都是小于或等于 2 的正数。让我们用 2 来称呼自己并将结果添加到我计算的那个。”

当然，递归函数需要小心有一个“结束条件”，否则它们永远不会返回结果。在这个例子中，结束条件是当函数以 0 调用时，它应该只返回 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:19:01.780

递归是一种从自身内部调用自身的方法。

例子：

```
public void recur(int x)
    recur(10);
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T18:19:03.440

这是递归方法的一个简单示例：-

```
public int recur(int count) {
   if (count < 10) {
       return count + recur(count++);
   }
   return count;
}

System.out.println(recur(0));  // Invoke first time 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T18:20:09.573

递归是函数调用自身的时候：

```
int factorial(int integer)
{
    if (integer == 1)
        return 1;
    else
        return (integer*(factorial(integer-1)));
} 
```

# javascript - 在叠加 DIV 中显示 Facebook 喜欢按钮 - 一次，在第二个页面视图上，持续 20 秒

> ID：12885106
> 
> 赞同：1
> 
> 时间：2012-10-14T18:16:46.337
> 
> 标签：javascript, jquery

我想在覆盖 div（页面底部）中显示 Facebook 的点赞按钮，但是还有一些额外的请求使它变得复杂。

1.  访问者在生成第二个页面视图时会看到它（他们来到网站并至少再打开一个页面）
2.  它应该只出现一次
3.  它应该只显示大约 20 秒（或任何其他秒数）或直到您单击“x”按钮
4.  它前面会有一个简短的文本（欢迎来到 Example.com...）。理想情况下，所有内容都在此代码中，无需从页面中提取额外的 DIV。

我设法创建了一个关闭按钮。这是代码：

```
$(document).ready(function(){
    $('#closebutton').click(function(){
        $('#facebookdiv').remove();
        $(this).remove();
        document.cookie="removeit=yes";
    });    
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
    {
      x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
      y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
      x=x.replace(/^\s+|\s+$/g,"");
        if (x=="removeit")
       {
        $('#facebookdiv').remove();
        $('#closebutton').remove();
        }
      }
}); 
```

这可以实现吗？如何实现？这是一个带有一些我正在试验的代码的 jsFiddle：http: [//jsfiddle.net/tj8N6/3/](http://jsfiddle.net/tj8N6/3/)

先感谢您！

编辑

我当前测试 HTML 页面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
<script type="text/javascript" src="http://http://code.jquery.com/jquery-1.6.4.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){

$.cookie('fbbox', '1', { path: '/', domain: 'www.example.com' });

if($.cookie('fbbox') == null) { 
    $.cookie('fbbox', '1', {expires:7, path:'/'});
}

if($.cookie('fbbox') == 1) { 
    $.cookie('fbbox', '2', {expires:7, path:'/'});
}

});

var buttonShowTime=20000;
if (fbbox == '2') {
    $('#facebookdiv').show();
    setTimeout(function() {
        $('#facebookdiv').hide();

    }, buttonShowTime);

}
</script>

</head>

<body> 

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="facebookdiv">
<div class="fb-like" data-href="https://www.facebook.com/stackoverflowpage" data-send="false" data-width="450" data-show-faces="false" data-colorscheme="dark" data-font="arial"></div>
<div id="closebutton">X</div>
</div>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:32:34.823

使用从 1 开始的增量 cookie，如果值 =2 则显示按钮。

隐藏按钮使用`setTimeout()`

```
/* set time for button to show*/
var buttonShowTime=20000;
if (cookieVal == '2') {
    $('#buttonElemnt').show();
    setTimeout(function() {
        $('#buttonElemnt').hide();

    }, buttonShowTime);

} 
```

其余的将在 html 中完成。创建一个关闭按钮并为其应用单击处理程序。

```
$('#faceBookClose').click(function(){
     $('#buttonElemnt').hide();
}); 
```

如果按钮已经被用户隐藏，再次隐藏它的调用`setTimeout()`不会导致任何问题

# c# - 带小数点的文本框显示格式

> ID：12885107
> 
> 赞同：4
> 
> 时间：2012-10-14T18:17:02.683
> 
> 标签：c#, .net, textbox

我想在每组 3 位数字后添加“，”。例如：当我输入 123456789 时，文本框将显示 123,456,789，我使用以下代码得到它：

```
private void textBox1_KeyUp(object sender, KeyEventArgs e)
{
    if (!string.IsNullOrEmpty(textBox1.Text))
    {
        System.Globalization.CultureInfo culture = new System.Globalization.CultureInfo("en-US");
        decimal valueBefore = decimal.Parse(textBox1.Text, System.Globalization.NumberStyles.AllowThousands);
        textBox1.Text = String.Format(culture, "{0:N0}", valueBefore);
        textBox1.Select(textBox1.Text.Length, 0);
    }
} 
```

我想更具体地了解这种格式。我只想为此文本框键入数字并使用十进制格式（之后键入 .）`123,456,789.00`，我尝试使用此代码：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!char.IsControl(e.KeyChar) && !char.IsDigit(e.KeyChar) && e.KeyChar != '.')
    {
        e.Handled = true;
    }
} 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:51:24.593

[http://msdn.microsoft.com/en-us/library/fzeeb5cd.aspx#Y600](http://msdn.microsoft.com/en-us/library/fzeeb5cd.aspx#Y600)

将值解析为十进制数据类型后，只需使用 分配`textbox1.Text`该十进制变量的值`ToString`，并将其传递给格式参数。

```
TextBox1.Text = valueBefore.ToString("C") 
```

至于防止输入到文本框，我认为肯定已经有一种模式了。

无论如何，试试这个：

```
if !(Char.IsControl(e.KeyChar) || Char.IsDigit(e.KeyChar) || (e.KeyChar == Keys.Decimal && !(TextBox1.Text.Contains("."))))
{
    e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:34:39.727

[您可以使用MSDN](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)中定义的数字分组格式字符串 类似以下内容应该可以工作（修改版）：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    decimal myValue;
    if (decimal.TryParse(textBox1.Text, out myValue))
    {
        textBox1.Text = myValue.ToString("N", CultureInfo.CreateSpecificCulture("en-US"));
        textBox1.SelectionStart = 0;
        textBox1.SelectionLength = 0;
    }
}

private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!char.IsDigit(e.KeyChar) && e.KeyChar != '.')
    {
        e.Handled = true;
    }           
} 
```

# php - PDO 返回新 ID 错误

> ID：12885108
> 
> 赞同：0
> 
> 时间：2012-10-14T18:17:21.370
> 
> 标签：php, pdo

我今天的问题是，在我将新行插入数据库后，我试图返回一个 id。

```
 $sql = ('INSERT INTO `tSections`(`sSection`, `pCity_id`) VALUES (:sSection, :pCity_id) RETURNING pSection_id');  
$new_section = $DBH->prepare($sql); 
```

没有返回 pSection_id 它工作正常。任何想法或解决方案。我假设我只是忘记了一些简单的事情。

希望很快能收到你们的来信。

这是它给出的错误

> 未捕获的异常“PDOException”，带有消息“SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在第 1 行的“返回 pJob_Type_id”附近使用的正确语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T18:21:36.017

`RETURNING`在 MySQL 中没有这样的东西。

你正在寻找[`PDO::lastInsertID()`](http://il.php.net/manual/en/pdo.lastinsertid.php).

# javascript - Javascript：Math.random

> ID：12885110
> 
> 赞同：9
> 
> 时间：2012-10-14T18:17:54.907
> 
> 标签：javascript, math

如果 num 参数是 52，有多少个可能的返回值？是52还是53？如果我理解正确，Math.random 使用从 0 到 1 的随机值。如果是这样，那么 0 是一个可能的返回值，52 也是如此。这导致 53 个可能的返回值。它是否正确？我问的原因是，我正在从中学习的一本书将此代码用于一副纸牌。我想知道 num 是否应该等于 51 ？

谢谢 ...

```
function getRandom(num) {
    var my_num = Math.floor(Math.random * num);
    return my_num;
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T18:27:15.057

```
Math.floor(Math.random() * num) // note random() is a function. 
```

这将返回从 0（包括 0）到`num`（不包括`num`）的所有整数。

`Math.random`返回一个介于 0（包括）和 1（不包括）之间的数字。将结果乘以 X 会得到 0（包括）和 X（不包括）之间的值。添加或减去 X 会使范围移动 +-X。

[以下是MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)提供的一些方便的功能：

```
// Returns a random number between 0 (inclusive) and 1 (exclusive)
function getRandom() {
  return Math.random();
}

// Returns a random number between min and max
function getRandomArbitrary(min, max) {
  return Math.random() * (max - min) + min;
}

// Returns a random integer between min and max
// Using Math.round() will give you a non-uniform distribution!
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T18:22:51.743

由于`Math.random`返回介于`[0,1)`(`1`不包括在内) 之间的实数，**因此**乘以结果会返回介于 之间的实数`[0, 52)`。

由于您正在计算结果，因此返回的最大数量是`51`并且有`52`不同的值（计数`0`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T18:19:55.597

由于 Math.random 的值从 0 变化到 1（不包括）；因此，如果您在 getRandom 中传递 52，则返回值将在 0 到 52（不包括）之间变化。所以 getRandom 只能返回 52 个值。当您使用 Math.floor 时。可以返回的最大值是 51。

# radio-button - 如何取消选择单选按钮？

> ID：12885113
> 
> 赞同：0
> 
> 时间：2012-10-14T18:18:11.997
> 
> 标签：radio-button, windows-phone-7.1

```
bool isChecked = false;

private void Agency3_Checked(object sender, RoutedEventArgs e)
{
  isChecked = (bool)(((RadioButton)sender).IsChecked);
}

private void Agency3_Click(object sender, RoutedEventArgs e)
{
    RadioButton currentButton = (RadioButton)sender;
    if ((bool)currentButton.IsChecked && !isChecked)
    {
        currentButton.IsChecked = false;
    }
    else
    {
        currentButton.IsChecked = true;
        isChecked = false;
    }
} 
```

此代码有助于在已选择单选按钮时单击它时取消选择该单选按钮。

我从 StackOverflow 上的一篇文章中得到了这个，但它已关闭。

单击单选按钮时，是否都没有调用 Agency3_Click() 和 Agency3_Checked() 函数？

它们的调用顺序是什么，这使得取消选择单选按钮的行为成为可能？

# c - RPC - 冲突类型错误

> ID：12885114
> 
> 赞同：0
> 
> 时间：2012-10-14T18:18:13.867
> 
> 标签：c, linux, rpc

我有以下名为 paper.x 的 .x 文件。当我在 rpc 中创建服务器以调用该函数时，会发生以下错误

**paperserverproc.c:23:5：错误：“add_procedure_1_svc”的类型冲突 paper.h:46:15：注意：“add_procedure_1_svc”的先前声明在这里**

```
#include <limits.h>
struct paper_saved{
    char author_name[CHAR_MAX];
    char paper_title[CHAR_MAX];
    int paper_id;
    char paper_file_name[CHAR_MAX]; 
    char  paper_content[CHAR_MAX];   
};
struct paper_info_saved{
    char author_name[CHAR_MAX];
    char paper_title[CHAR_MAX];
    int paper_id;
    char paper_file_name[CHAR_MAX]; 

};
struct list_papers{
    paper_saved paper;
    struct list_papers *next; 
}; 

program PAPER_PROGRAM
{
  version PAPER_VERSION
  {
    int ADD_PROCEDURE(paper_saved) = 1;        /* Procedure nb */
    void LIST_PROCEDURE(void)=2;
    paper_info_saved INFO_PROCEDURE(int)=3;
    paper_saved FETCH_PROCEDURE(int)=4;
    void REMOVE_PROCEDURE(int)=5;
   } = 1;                             /* Version nb */
} = 0x20001234;                      /* Program number */ 
```

我用这种方式调用程序，第 23 行是我声明函数时的行，如下所示

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include "paper.h"
#include <ctype.h>
#include <limits.h>
.......
int add_procedure_1_svc(paper_saved *paper_pointer, struct svc_req *rqstp) 
```

这是 rpcgen 生成的 paper.h 文件，我不知道它提到的第 46 行有什么问题

```
 /*
 * Please do not edit this file.
 * It was generated using rpcgen.
 */

#ifndef _PAPER_H_RPCGEN
#define _PAPER_H_RPCGEN

#include <rpc/rpc.h>

#ifdef __cplusplus
extern "C" {
 #endif

struct paper_saved {
    char author_name[127];
    char paper_title[127];
    int paper_id;
    char paper_file_name[127];
     char paper_content[127];
};
typedef struct paper_saved paper_saved;

struct paper_info_saved {
    char author_name[127];
    char paper_title[127];
    int paper_id;
    char paper_file_name[127];
};
typedef struct paper_info_saved paper_info_saved;

struct list_papers {
    paper_saved paper;
     struct list_papers *next;
};
typedef struct list_papers list_papers;

#define PAPER_PROGRAM 0x20001234
#define PAPER_VERSION 1

#if defined(__STDC__) || defined(__cplusplus)
#define ADD_PROCEDURE 1
extern  int * add_procedure_1(paper_saved *, CLIENT *);
extern  int * add_procedure_1_svc(paper_saved *, struct svc_req *);
#define LIST_PROCEDURE 2
extern  void * list_procedure_1(void *, CLIENT *);
extern  void * list_procedure_1_svc(void *, struct svc_req *);
#define INFO_PROCEDURE 3
extern  paper_info_saved * info_procedure_1(int *, CLIENT *);
extern  paper_info_saved * info_procedure_1_svc(int *, struct svc_req *);
#define FETCH_PROCEDURE 4
extern  paper_saved * fetch_procedure_1(int *, CLIENT *);
extern  paper_saved * fetch_procedure_1_svc(int *, struct svc_req *);
#define REMOVE_PROCEDURE 5
extern  void * remove_procedure_1(int *, CLIENT *);
extern  void * remove_procedure_1_svc(int *, struct svc_req *);
extern int paper_program_1_freeresult (SVCXPRT *, xdrproc_t, caddr_t);

#else /* K&R C */
#define ADD_PROCEDURE 1
extern  int * add_procedure_1();
extern  int * add_procedure_1_svc();
#define LIST_PROCEDURE 2
extern  void * list_procedure_1();
extern  void * list_procedure_1_svc();
#define INFO_PROCEDURE 3
extern  paper_info_saved * info_procedure_1();
extern  paper_info_saved * info_procedure_1_svc();
#define FETCH_PROCEDURE 4
extern  paper_saved * fetch_procedure_1();
extern  paper_saved * fetch_procedure_1_svc();
#define REMOVE_PROCEDURE 5
extern  void * remove_procedure_1();
extern  void * remove_procedure_1_svc();
extern int paper_program_1_freeresult ();
#endif /* K&R C */

/* the xdr functions */

#if defined(__STDC__) || defined(__cplusplus)
extern  bool_t xdr_paper_saved (XDR *, paper_saved*);
extern  bool_t xdr_paper_info_saved (XDR *, paper_info_saved*);
extern  bool_t xdr_list_papers (XDR *, list_papers*);

#else /* K&R C */
extern bool_t xdr_paper_saved ();
extern bool_t xdr_paper_info_saved ();
extern bool_t xdr_list_papers ();

#endif /* K&R C */

#ifdef __cplusplus
}
#endif

#endif /* !_PAPER_H_RPCGEN */ 
```

所以正确的 .h 文件是

```
#include <limits.h>
struct paper_saved{
    char author_name[CHAR_MAX];
    char paper_title[CHAR_MAX];
    int paper_id;
    char paper_file_name[CHAR_MAX]; 
    char  paper_content[CHAR_MAX];   
};
struct paper_info_saved{
    char author_name[CHAR_MAX];
    char paper_title[CHAR_MAX];
    int paper_id;
    char paper_file_name[CHAR_MAX]; 

};
struct list_papers{
    paper_saved paper;
    struct list_papers *next; 
}; 
typedef int p_id;
program PAPER_PROGRAM
{
  version PAPER_VERSION
  {
    p_id ADD_PROCEDURE(paper_saved) = 1;        /* Procedure nb */
    void LIST_PROCEDURE(void)=2;
    paper_info_saved INFO_PROCEDURE(int)=3;
    paper_saved FETCH_PROCEDURE(int)=4;
    void REMOVE_PROCEDURE(int)=5;
   } = 1;                             /* Version nb */
} = 0x20001234;                      /* Program number */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:19:36.580

该函数被声明为返回`int`：

```
int add_procedure_1_svc(paper_saved *paper_pointer, struct svc_req *rqstp) 
```

但是`extern`作为返回`int*`

```
extern  int * add_procedure_1_svc(paper_saved *, struct svc_req *); 
```

其中之一一定是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:07:10.723

文件paper.h的第46行有什么？. 检查第 46 行的 paper.h 文件，看看函数签名是否相同。它是由 rpcgen 自动生成的吗？

# asp.net-mvc - 即使连接字符串在实体框架中的数据库名称错误，DataBase.Exist() 也会返回 true

> ID：12885116
> 
> 赞同：3
> 
> 时间：2012-10-14T18:18:38.807
> 
> 标签：asp.net-mvc, entity-framework

我是 EF 5.0 的新手，我故意在 Web.Config 的连接字符串中设置了错误的数据库名称。即初始目录=“错误的数据库名称”；

现在我创建了一个布尔属性，它检测数据库是否存在。如下所示 - 其中 context 是 EFDbContext。

```
bool IsDatabaseExist = context.DataBase.Exists(); 
```

我的问题是，即使我提供的数据库名称是错误的，为什么这总是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:38:05.667

如果您没有向 DbContext 派生类的构造函数提供连接字符串，则您没有使用连接字符串。最简单的方法是在调用 DbContext 构造函数的 DbContext 派生类中创建一个无参数构造函数 - 如下所示：

```
public class MyContext : DbContext
{
    public MyContext() : base("name=connectionStringName")
    { }
    ...
} 
```

connectionString name 是配置文件中连接字符串的名称。

如果要检查应用程序使用的连接字符串，可以执行以下操作：

```
((SqlConnection)myContext.Database.Connection).ConnectionString 
```

这里的 myContext 是 DbContext 派生类的一个实例

# java - 使用 Java 分隔符匹配任意一个字符

> ID：12885118
> 
> 赞同：0
> 
> 时间：2012-10-14T18:18:43.643
> 
> 标签：java, character, delimiter

我已经进行了搜索，但无法找到一个可以解释的示例，以便我理解或与我的确切问题有关。我正在尝试编写一个程序来消除字母 A 和 B 并读取其间的数字，例如 A38484B3838。我尝试使用

```
 scanner.useDelimiter("[AB]"); 
```

但它不起作用。它在它之后抛出无效输入（我正在阅读`scanner.nextInt()`）。谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:27:13.967

```
public static void main(String[] args) {
  String s = "A38484B3838";
  Scanner scanner = new Scanner(s).useDelimiter("[AB]");
  while (scanner.hasNextInt()) {
    System.out.println(scanner.nextInt());
  }
} 
```

生产

```
38484
3838 
```

这似乎是您期望的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:24:09.523

尝试使用**正则表达式**。它可以真正促进您的工作。

```
public static void main(String[] args)
{
    String str = "A38484B3838";
    String regex = "(\\d+)";

    Matcher m = Pattern.compile(regex).matcher(str);

    ArrayList<Integer> list = new ArrayList<Integer>();

    while (m.find()) {
        list.add(Integer.valueOf(m.group()));
    }

    System.out.println(list);
} 
```

**上述程序的**输出：****

 **> [38484, 3838]**

# asp-classic - 预期语句结束错误

> ID：12885126
> 
> 赞同：0
> 
> 时间：2012-10-14T18:19:06.420
> 
> 标签：asp-classic, vbscript, ms-access-2007

这是我的代码：

```
MM_redirectLoginSuccess = "pat/detail.asp?Patient_Id=<%=(Recordset1.Fields.Item("Patient_Id").Value)%>" 
```

我收到此错误：

> Microsoft VBScript 编译错误“800a0401”
> 
> 预期的语句结束
> 
> /mp/patTest.asp，第 42 行

浏览器不显示任何内容。我想将 Patient_Id 传递给 detail.asp 页面，并且从数据库中获取 Patient_Id 的值。所以我觉得在传递这些值时存在语法错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:31:57.637

下面的代码不是已经被包围了`<% %>`吗？

```
MM_redirectLoginSuccess = "pat/detail.asp?Patient_Id=<%=(Recordset1.Fields.Item("Patient_Id").Value)%>" 
```

如果是这样，它应该是：

```
<%
    MM_redirectLoginSuccess = "pat/detail.asp?Patient_Id=" & _
        Recordset1.Fields.Item("Patient_Id").Value

%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:31:23.007

我想你想要这样的东西：

```
MM_redirectLoginSuccess = "pat/detail.asp?Patient_Id=" & Recordset1.Fields.Item("Patient_Id").Value) 
```

# android - 带有处理程序的 Android 自定义视图

> ID：12885128
> 
> 赞同：0
> 
> 时间：2012-10-14T18:19:18.287
> 
> 标签：android, multithreading, animation, view

我正在寻找一种在 Android 中为自定义视图设置动画的简单方法。我试图避免使用 animator 对象，但想使用原始线程。我所做的是通过创建一个**扩展**android.view.View 的类来创建一个自定义视图。然后我重写**onDraw**方法并使用画布绘制一个矩形。我想要缩小的矩形，所以我保留一个代表矩形右侧的 x 值的变量。然后我希望矩形的右边缘随着时间的推移而缩小。我想做的是创建一个新线程，启动它并让它改变矩形的值。**在您调用View.invalidate**之前，除了视图不会更新之外，所有这些都有效**. 问题是我不能从我产生的线程中调用它，因为它不是 UI 线程。我阅读了有关使用处理程序的解决方案......但我仍然不确定这是否是正确的解决方案以及如何使用它们。**

 **```
package com.example.practicum;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.os.Handler;
import android.os.Message;
import android.util.AttributeSet;
import android.view.View;

public class TimerControl extends View implements Runnable, Handler.Callback
{
    private Paint paint;
    private Rect rect;
    private Thread t;
    private Handler h;

    public TimerControl(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        // TODO Auto-generated constructor stub

        paint = new Paint();
        paint.setColor(Color.BLUE);
        rect = new Rect(0,0,60,60);
        t = new Thread(this);
        t.start();

        h = new Handler(this);
        //h.post(this);
    }

    @Override
    public void onDraw(Canvas canvas)
    {
        canvas.drawRect(rect, paint);
    }

    @Override
    public void run()
    {
        rect.right = rect.right-1;
        while(true)
        {
            rect.right = rect.right-1;
            this.invalidate();
            try
            {
                Thread.sleep(5000);
                h.sendEmptyMessage(0);
            } 
            catch (InterruptedException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    @Override
    public boolean handleMessage(Message msg)
    {

        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:34:48.773

您可以定义一个全局处理程序（在 UI 线程中）：

```
Handler mHandler = new Handler(); 
```

然后，从您的线程中，调用：

```
mHandler.post(new Runnable() {
    public void run() {             
        // call some method on the UI thread
    }
}); 
```**

# design-patterns - 使用不同的消息格式与多个 Web 服务进行通信

> ID：12885138
> 
> 赞同：2
> 
> 时间：2012-10-14T18:20:27.437
> 
> 标签：design-patterns, integration

我正在开发一个应用程序，该应用程序当前使用 Web 服务将更新发送到另一个内部系统。

我现在必须向许多第三方提供更新。每个都有不同的接受更新的方式，一个提供网络服务，另一个接受平面文件（具有自己的格式）上传，另一个想要一个 CSV 文件 ftped 到特定位置。

一些第三方希望每分钟更新一次，而另一些第三方则对每日更新感到满意。

我将不得不为每个第三方编写特定的代码，但我想遵循一些好的设计方法，允许我在不更改内部软件的情况下根据需要添加尽可能多的第三方。

我应该使用什么设计模式/原则来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:46:50.993

听起来`Bridge`设计模式将符合对象结构的要求。您希望保持客户端界面统一，以便为所有第三方（或组件）准备文件\报告并提交给第三方。

上传到 FTP 或向 Web 服务发送消息的算法可以使用`Strategy`设计模式来实现。如果需要更改时间表以每天、每周或每月提交更新，则只需更改`Strategy`.

实现完整的解决方案还需要一两个以上的设计模式，我想一旦你开始设计解决方案，你就会明白这一点。

# iphone - Flurry 分析似乎没有在 ios 4.2 中记录事件

> ID：12885139
> 
> 赞同：1
> 
> 时间：2012-10-14T18:20:28.617
> 
> 标签：iphone, objective-c, ios, analytics, flurry

在过去的几天里，我遇到了 Flurry api 的问题，而且它似乎停止了工作。

我构建的 ios 版本是 4.2，Flurry 版本是 Flurry iPhone SDK v4.0.4

在我的代码中，我正在这样做：

```
[Flurry setDebugLogEnabled:YES];

[Flurry startSession:@"MY_API_KEY"];

[Flurry logEvent:@"Entered app"]; 
```

我得到：

```
Oct 12 18:17:40 unknown myApp[2981] <Warning>: Flurry: startSession 
called for the first time

Oct 12 18:17:40 unknown myApp[2981] <Warning>: Flurry: Start session 
called with apiKey[MY_API_KEY]

Oct 12 18:17:40 unknown myApp[2981] <Warning>: Flurry: Trim white space 
and use apiKey[MY_API_KEY]

Oct 12 18:17:40 unknown myApp[2981] <Warning>: initial network status [1] 
=========

Oct 12 18:17:40 unknown myApp[2981] <Warning>: FlurrySession: Add session 
with startTime[2012-10-11 19:36:13 +0000] to saved sessions

Oct 12 18:17:40 unknown myApp[2981] <Error>: -[__NSCFNumber length]: 
unrecognized selector sent to instance 0x4504a0

Oct 12 18:17:40 unknown myApp[2981] <Warning>: Flurry: Finish starting 
session with apiKey[MY_API_KEY]

Oct 12 18:17:40 unknown myApp[2981] <Warning>: FlurrySession: dealloc 
session 
```

并且在调试中似乎没有记录或查看任何事件 Entered app，除了：

```
Oct 12 18:23:11 unknown myApp[2981] <Warning>: Flurry: setGender[M]

Oct 12 18:25:03 unknown myApp[3001] <Warning>: Flurry: setUserID[5] 
```

此外，如果在 xcode 中运行它，它会在这一行停止

```
[Flurry startSession:@"MY_API_KEY"]; 
```

只有在按两次 continue 程序执行后，程序才会继续运行。

在 iphone（没有 xcode）中它运行顺利，但调试日志是相同的，并且似乎没有记录任何事件。

有什么建议么？

ps 试图和 Flurry 支持讨论这个问题，现在已经 3 天没有人回复我了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:41:36.863

很高兴看到问题得到解决。似乎由于某种原因您的邮件没有到达 Flurry。如有任何其他问题，请随时写信至 support@flurry.com。我们将确保您的查询在 24 小时内得到答复。（全面披露：我在 Flurry 的支持团队工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:52:11.280

似乎是`[Flurry setUserID:currUserId]`currUserId`NSNumber* (due to passing of id currUserId),`引起了问题。始终确保传递 value `NSString* to Flurry`，也在 events 值中传递......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T05:31:31.670

如果我们在后台使用flurry事件，我们应该启用[Flurry setBackgroundSessionEnabled:YES]；在 Appdelegate 中的 didFinishLaunchingWithOptions 下。启用后台会话避免了[_NSCF Number length]的错误，它可以跟踪事件。

# php - Yii：如何从 CDataProvider 获取记录，以及如何回显记录字段？

> ID：12885142
> 
> 赞同：2
> 
> 时间：2012-10-14T18:20:35.080
> 
> 标签：php, yii

我的模型中有一个自定义数据提供程序

我在控制器中尝试了这个

```
public function actionMonthTotal()
{
    $model=new Rapporti();
    $this->render('monthTotal',array(
            'dataProvider'=>$model->monthTotal(),
    ));
} 
```

其中monthTotal是给我一个DataProvider的模型函数

实际上，“monthTotal”是 view.php 的副本/过去，它使用使用 _monthTotal 的 clistView，即 _view.php 的副本/过去

我需要简单地从 dataProvider 获取数据集（a 'SELECT COUNT, SUM, SUM, etc..."）并迭代到记录集以将简单的 TABLE 回显到 monthTotal 视图中。所以...

**如何使用视图中的 dataProvider 来获取记录以及如何迭代槽记录？**

我的月总数是这个，并且在“报告”模型中

实际上报告在关系报告 N -> 1 Pionierato （对不起意大利语术语，但只是对象名称）

```
public function totalMonth() {
    $criteria = new CDbCriteria();
    $criteria->with = array ('pionierato');
    $criteria->condition = 'dataBetel=:month';
    $criteria->select = "COUNT(t.id) as numProclamatori,
                            pionierato.tipo as tipoPionierato,
                            SUM(libri) as sommaLibri,
                            SUM(opuscoli) as sommaOpuscoli,
                            SUM(ore) as sommaOre,
                            SUM(riviste) as sommaRiviste,
                            SUM(visite) as sommaVisite,
                            SUM(studi) as sommaStudi";

    $criteria->group  = "t.dataBetel, t.pionieratoId";
    $criteria->params = array ('month' => "2012-09-01");

    $dataProvider=new CActiveDataProvider('Rapporti', 
                                           array ('criteria' => $criteria)
                                         );

    return $dataProvider;
} 
```

我需要使用这个 dataprovider 来获取它将输出的 3 条记录并打印一个 3 行表。静止的。

使用第一个答案的建议，我得到了这个：

![实际结果](../Images/1ed86a0399de2578bf0881602b7c8aed.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:32:09.403

我以这种方式获得了结果：

```
<?php 

foreach ($dataProvider->getData() as $id => $singleRecord) {
        $this->renderPartial('_monthTotal', array('data' => $singleRecord));
}

?> 
```

并删除 clistview 小部件。

但是您的回答对我帮助很大，所以我会优先考虑您，谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T19:30:39.563

尝试：

```
public function actionMonthTotal()
{
    $model = Rapporti::model()->monthTotal();
    $this->render('monthTotal',array(
            'dataProvider'=>$model,
    ));
} 
```

这应该可行，您正在创建一个名为 $model 的对象，该对象的值等于 Rapporti 模型中方法 monthTotal() 的返回值

如果这不起作用，通过将它（减去返回部分）复制到您的控制器而不是从模型中调用它来检查您是否确实从您的 monthTotal 函数中获得了结果。

[在您的 monthTotal 视图中，您可以使用CListView](http://www.yiiframework.com/doc/api/1.1/CListView)遍历活动记录，如下所示：

```
<?php $this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view',
)); ?> 
```

每次迭代都会调用一个名为“_view”的子视图。可以使用 $data 访问该记录的数据（例如：$data->id）；

下面是一个不使用 CActiveDataprovider 的查询示例：

```
$model = Rapporti::model()->findAll(array(
    'condition' => 'dataBetel=:month',
    ...
)); 
```

您可以尝试...或者您可以使用 findAllBySql() 而不是 findAll() 并以这种方式输入您的查询。然后，您将能够使用 foreach() 循环遍历您的数据集

# jquery - Jquery 用类和 id 值设置 div

> ID：12885144
> 
> 赞同：0
> 
> 时间：2012-10-14T18:20:40.320
> 
> 标签：jquery, ruby-on-rails

我有这样的jQuery代码：

```
jQuery(function($) {
  $(document).ready(function () {
    $('.lol').each(function(index) {
      console.log("#"+$(this).attr("id"));
      $.ajax({ 
        url: "/articles/get_prices/nr="+$(this).attr("nr")+"&br="+$(this).attr("br")+"&type="+$(this).attr("type"), 
        type: "GET", 
        data: {},
        success: function(text)
        {
          $("#"+$(this).attr("id")).html(text);
        },
        error: function(){
          alert('Ошибка javascript');
        },
        dataType : "html"
      });
    });
  });
}); 
```

和这样的haml代码

```
.box{:id => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '')} 
```

方法

```
def get_prices()
    nr = params[:nr]
    br = params[:br]
    type = params[:type]
    @pr = find_price(nr, br, type)
    respond_to do |format|
      format.html { render :partial=>"search_trees/price" }
    end
  end 
```

我需要设置这个 div jquery 值，但它都是动态的，所以在页面加载后，它转到 db，并通过 id（每个框的另一个）设置它一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:58:36.067

试试这个，你的 js 文件：

```
$(document).ready(function(){
  $('.lol').each(function() {
    url = "/articles/get_prices/nr="+$(this).attr("nr")+"&br="+$(this).attr("br")+"&type="+$(this).attr("type")+'&id='+$(this).attr('id');
    $.get(url,function(){},'script');
  })
}) 
```

（您使用脚本数据类型执行 ajax 请求，因此响应被执行，您不需要自己处理）

你的控制器：

```
def get_prices()
  nr = params[:nr]
  br = params[:br]
  type = params[:type]
  @pr = find_price(nr, br, type)
  @id = params[:id]
  respond_to do |format|
    format.js { render :partial=>"search_trees/price" }
  end
end 
```

（添加实例变量 @id 并渲染一个 js 视图，因为 ajax 请求是“脚本”类型）

您的观点（search_trees/price.js.erb，提交 js 文件很重要）

```
$("#<%= @id -%>").html(<%= javascript_escape(render(:partial => "search_trees/price.html")) -%>); 
```

（渲染html视图并设置div的html）

如果出现问题，您可能需要添加一些检查以发出警报（例如...您无法对 @pr 对象进行处理），因此您涵盖了这两种情况：

在你看来：

```
<%- if @pr.nil? -%>
  alert('Ошибка javascript');
<%- else -%>
  $("#<%= @id -%>").html(<%= escape_javascript(render(:partial => "search_trees/price.html")) -%>);
<%- end -%> 
```

# php - 提取字符串的一部分？

> ID：12885147
> 
> 赞同：0
> 
> 时间：2012-10-14T18:15:21.653
> 
> 标签：php, extract

如何从这个字符串中提取 4？

```
$string = "Rank_1:1:4"; 
```

我正在尝试从 Googles 服务器获取 pagerank，最后一个值 (4) 是实际的 pagerank。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T18:22:40.280

尝试

```
$string = "Rank_1:1:4";
$data = explode(':',$string);
echo end($data); 
```

编辑

根据@MichaelHampton，如果他们稍后添加更多字段，则使用如下

```
$string = "Rank_1:1:4";
$data = explode(':',$string);
echo $data[2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T18:23:44.627

PHP 有很多你可以使用的字符串函数...

变量

```
$find = ":";
$string = "Rank_1:1:4"; 
```

使用`substr`

```
echo substr($string, strrpos($string, $find) + 1); 
```

使用`strrchr`

```
echo ltrim(strrchr($string, $find),$find); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:26:51.037

```
$pattern = '/:\d+$/';
preg_match($pattern, $string, $matches);
$rank = substr($matches[0],1); 
```

# javascript - modalColor: 'greenYellow'(background) 在弹出窗口中在哪里？

> ID：12885156
> 
> 赞同：1
> 
> 时间：2012-10-14T18:22:22.997
> 
> 标签：javascript, jquery, popup, bpopup

[jQuery.bPopup.js](http://jsfiddle.net/centerwow/24A9b/820/) **示例 2b**中有示例

 **我想用一些样式文本和窗口背景创建弹出窗口，我尝试实现 **示例 2b，自定义设置：带有自定义设置的简单 jQuery 弹出窗口（牙买加弹出窗口，放松人）**

```
$('element_to_pop_up').bPopup({
        fadeSpeed: 'slow', //can be a string ('slow'/'fast') or int
        followSpeed: 1500, //can be a string ('slow'/'fast') or int
        modalColor: 'greenYellow'
    }); 
```

但我想念一些东西。谢谢你的帮助。

[jsFiddle 演示](http://jsfiddle.net/centerwow/24A9b/820/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:30:14.307

问题是

```
appendTo: 'form' 
```

我很确定面具（绿色黄色的东西）必须贴在身体上。

如果你删除它，它会起作用；）**

# c++ - 击败编译器

> ID：12885160
> 
> 赞同：4
> 
> 时间：2012-10-14T18:22:43.037
> 
> 标签：c++, intel, intrinsics, avx

我正在尝试使用英特尔内在函数来击败编译器优化代码。有时我能做到，有时我做不到。

我想问题是，*为什么有时我可以击败编译器，但有时却不行*？使用 Intel 内在函数时，我得到了 0.006 秒的时间`operator+=`（相对于使用纯 C++ 时的 0.009 秒），但`operator+`使用内在函数的时间为 0.07 秒，而纯 C++ 只有 0.03 秒。

```
#include <windows.h>
#include <stdio.h>
#include <intrin.h>

class Timer
{
  LARGE_INTEGER startTime ;
  double fFreq ;

public:
  Timer() {
    LARGE_INTEGER freq ;
    QueryPerformanceFrequency( &freq ) ;
    fFreq = (double)freq.QuadPart ;
    reset();
  }

  void reset() {   QueryPerformanceCounter( &startTime ) ;  }

  double getTime() {
    LARGE_INTEGER endTime ;
    QueryPerformanceCounter( &endTime ) ;
    return ( endTime.QuadPart - startTime.QuadPart ) / fFreq ; // as double
  }
} ;

inline float randFloat(){
  return (float)rand()/RAND_MAX ;
}

// Use my optimized code,
#define OPTIMIZED_PLUS_EQUALS
#define OPTIMIZED_PLUS

union Vector
{
  struct { float x,y,z,w ; } ;
  __m128 reg ;

  Vector():x(0.f),y(0.f),z(0.f),w(0.f) {}
  Vector( float ix, float iy, float iz, float iw ):x(ix),y(iy),z(iz),w(iw) {}
  //Vector( __m128 val ):x(val.m128_f32[0]),y(val.m128_f32[1]),z(val.m128_f32[2]),w(val.m128_f32[3]) {}
  Vector( __m128 val ):reg( val ) {} // 2x speed, above

  inline Vector& operator+=( const Vector& o ) {
    #ifdef OPTIMIZED_PLUS_EQUALS
    // YES! I beat it!  Using this intrinsic is faster than just C++.
    reg = _mm_add_ps( reg, o.reg ) ;
    #else
    x+=o.x, y+=o.y, z+=o.z, w+=o.w ;
    #endif
    return *this ;
  }

  inline Vector operator+( const Vector& o )
  {
    #ifdef OPTIMIZED_PLUS
    // This is slower
    return Vector( _mm_add_ps( reg, o.reg ) ) ;
    #else
    return Vector( x+o.x, y+o.y, z+o.z, w+o.w ) ;
    #endif
  }

  static Vector random(){
    return Vector( randFloat(), randFloat(), randFloat(), randFloat() ) ;
  }

  void print() {

    printf( "%.2f %.2f %.2f\n", x,y,z,w ) ;
  }
} ;

int runs = 8000000 ;
Vector sum ;

// OPTIMIZED_PLUS_EQUALS (intrinsics) runs FASTER 0.006 intrinsics, vs 0.009 (std C++)
void test1(){
  for( int i = 0 ; i < runs ; i++ )
    sum += Vector(1.f,0.25f,0.5f,0.5f) ;//Vector::random() ;
}

// OPTIMIZED* runs SLOWER (0.03 for reg.C++, vs 0.07 for intrinsics)
void test2(){
  float j = 27.f ;
  for( int i = 0 ; i < runs ; i++ )
  {
    sum += Vector( j*i, i, i/j, i ) + Vector( i, 2*i*j, 3*i*j*j, 4*i ) ;
  }
}

int main()
{
  Timer timer ;

  //test1() ;
  test2() ;

  printf( "Time: %f\n", timer.getTime() ) ;
  sum.print() ;

} 
```

## 编辑

我为什么要这样做？VS 2012 分析器告诉我我的向量算术运算可以使用一些调整。

![在此处输入图像描述](../Images/fde04cb8e9b7513e189c388c08341db8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T00:05:03.983

正如 Mysticial 所指出的，工会黑客是`test2`. 它强制数据通过 L1 缓存，虽然速度很快，但有一些延迟，远远超过向量代码提供的 2 个周期的增益（见下文）。

但也要考虑到 CPU 可以乱序并行运行多条指令（超标量 CPU）。例如，Sandy Bridge 有 6 个执行单元，p0--p5，浮点乘法/除法运行在 p0，浮点加法和整数乘法运行在 p1。此外，除法比乘法/加法多花费 3-4 倍的周期，并且不是流水线的（即执行单元在执行除法时无法启动另一条指令）。所以在 中`test2`，当向量代码在单元 p0 上等待昂贵的除法和一些乘法完成时，标量代码可以在 p1 上执行额外的 2 条加法指令，这很可能会消除向量指令的任何优势。

`test1`不同的是，常数向量可以存储在`xmm`寄存器中，在这种情况下，循环只包含加法指令。但是代码并没有像预期的那样快 3 倍。原因是流水线指令：每条加法指令都有 3 个周期的延迟，但是当它们相互独立时，CPU 可以在每个周期开始一个新的指令。这是每分量向量加法的情况。因此，向量代码在每个循环迭代中执行一条加法指令，延迟时间为 3 次，而标量代码执行 3 条加法指令，仅花费 5 个周期（1 个启动/周期，第 3 个延迟为 3：2 + 3 = 5）。

关于 CPU 架构和优化的一个非常好的资源是[http://www.agner.org/optimize/](http://www.agner.org/optimize/)

# jquery - jQuery 向下滑动示例

> ID：12885161
> 
> 赞同：1
> 
> 时间：2012-10-14T18:22:44.947
> 
> 标签：jquery, hide, slide

我有一个名为“bottomtabdivright”的div，当我悬停时显示一些css，显示名为“showme”的div。描述部分中[greenieproducts.com](http://greenieproducts.com/portable-solar-generator-sunxgen-800-80w-monocrystalline-solar-panel800w-power-inverter105-amph-deep-cycle-battery/)上的示例....

我希望 div “showme” 向下滑动并出现，而不是仅仅在那里出现。我认为这可以通过一些 jquery 代码来完成？这是我第一次深入研究 jquery，但我不确定从哪里开始。这是我到目前为止得到的

```
#showme {display:none;}
#bottomdivtabright:hover #showme {border:3px solid white;outline:3px solid black;background-color:black;display:block;width:450px;position:absolute;right:5px;top:48px;padding:10px;} 
```

你们太棒了，谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:28:23.423

使用以下 jQuery 代码：

```
$(function() {
    $('#bottomdivtabright').hover(function() {  
        $('#showme').slideDown();
    }, function() { 
        $('#showme').slideUp();
    });
}); 
```

# python - Python 注释的一组双引号？

> ID：12885168
> 
> 赞同：5
> 
> 时间：2012-10-14T18:23:44.650
> 
> 标签：python, coding-style, comments

在查看 edX.org 上的在线[CS188.1x](https://www.edx.org/courses/BerkeleyX/CS188.1x/2012_Fall/about)课程中使用的一些代码（由讲师编写的代码）时，我注意到重复使用一组双引号（就像可能在 str 周围使用一样）用作注释。

我以前没有见过这个，也没有在[PEP8](http://www.python.org/dev/peps/pep-0008/#comments)中提到过我能找到的，但它似乎工作正常。任何人都可以启发我吗？

这是一个例子：

```
class SomeClass():
    """
    Some docstring info, using standard 'triple double quotes'
    """
    def  __init__(self):
        "This is the comment style to which I'm referring."
        some.code = foo      # Here's a normal inline comment

    def bar(self, item):
        "Here is another example of the comment style"
       return wtf 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T18:25:57.923

[文档字符串](http://www.python.org/dev/peps/pep-0257/)是作为类、方法、函数或模块中的第一条语句出现的任何字符串文字。从风格上讲，通常和首选使用三引号格式以允许更长、格式更好的文档字符串，并引起对它们的注意以便于参考，但任何字符串都符合条件。

文档字符串与注释不同，因为注释与程序的执行完全无关，而文档字符串在运行时通过访问对象的`__doc__`变量可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:10:30.493

那只是文档字符串。这是一个很好的设计建议。例如，如果你在你的 python shell 中加载那个类，你可以调用 a`help(bar)`并且你会得到`"Here is another example of the comment style"`

# java - Java - 使用递归的二叉树镜像

> ID：12885170
> 
> 赞同：0
> 
> 时间：2012-10-14T18:23:49.407
> 
> 标签：java, recursion, tree

我正在为二叉树编写镜像方法。我的类的工作方式是我有一个抽象类 BinaryTree，它有子类 EmptyTree 和 ConsTree。我在为 ConsTree 编写方法时遇到问题。该类看起来像这样：

```
public class ConsTree<T> extends BinaryTree<T>
{
    BinaryTree<T> left;
    BinaryTree<T> right;
    T data;

    public BinaryTree<T> mirrorImage() 
    {
        ConsTree<T> tree = new ConsTree<T>(this.data, this.right, this.left); //In the constructor, the second parameter sets the left tree, so creates a new tree with the left and right trees swapped
        if(this.left == null && this.right == null)
                return tree;
        if(this.left == null)
                return tree + this.right.mirrorImage();
        else if(right == null)
                return tree + this.left.mirrorImage();

        return tree + this.left.mirrorImage() + this.right.mirrorImage();
} 
```

显然这不起作用，因为我不能对 BinaryTree 对象使用“+”运算符，但是这是我想要完成的基本思想。我只是对如何将树木组合在一起有点困惑。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:29:55.723

你想如何返回树和正确的mirrorImage！？简单，返回

```
 this.right.mirrorImage();
    this.left.mirrotImage(); 
```

代替

```
 tree + this.right.mirrorImage();
    tree + this.left.mirrorImage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:30:09.493

我认为`BinaryTree`没有`mirror`方法。

在这种情况下，您的返回类型不应该是`BinaryTree<T>`but `ConstTree<T>`，因为您需要分支来实现`mirrorImage()`。

我觉得令人费解的是，在您拥有分支的镜像之前，您将分支分配给构造函数中返回的树。逻辑是

1) 获取左右分支的镜像

2）用镜像创建一棵树。

您正在设置一些永远不会使用的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-17T21:14:27.147

```
public class BinaryTreeMirror {

    public static TreeNode mirrorOf(TreeNode rootNode) {
        if (rootNode == null) {
            return rootNode;
        } else {
            TreeNode temp = rootNode.right;
            rootNode.right = rootNode.left;
            rootNode.left = temp;
            mirrorOf(rootNode.right);
            mirrorOf(rootNode.left);
        }
        return rootNode;
    }
} 
```

# c - C中随机数生成器背后的逻辑

> ID：12885171
> 
> 赞同：2
> 
> 时间：2012-10-14T18:24:05.453
> 
> 标签：c

> **可能重复：**
> [随机数生成器如何工作？](https://stackoverflow.com/questions/1716308/how-does-a-random-number-generator-work)

C 编译器如何决定是否应该在随机数生成函数中生成下一个数字？例如，它总是在给定范围内生成一个新的随机数。这是怎么做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:26:58.490

这取决于所讨论的伪随机数生成器 (PRNG) 的具体实现。有很多变体在使用。

一个常见的例子是[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)(LCG) 系列。这些由递归关系定义：

   X [n+1] <- aX [n] + c (mod m)

因此，PRNG 中的每个新样本仅由前一个样本以及常数 a、c 和 m 确定。请注意，a、c 和 m 的选择至关重要，如此[处](http://en.wikipedia.org/wiki/Linear_congruential_generator)所述。

LCG 非常简单和高效。它们通常用于标准库提供的随机数生成器。然而，它们的统计特性很差，并且为了更好的随机性，更高级的 PRNG 是首选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:28:39.297

它通过保持一些状态并在每次调用函数时修改状态来生成下一个数字。这样的函数称为*伪随机数生成器。* 创建 PRNG 的一种旧方法是*线性同余生成器，*这很简单：

```
static int rand_state;
int rand(void)
{
    rand_state = (rand_state * 1103515245 + 12345) & 0x7fffffff;
    return rand_state;
} 
```

如您所见，如果您知道前一个数字，则此方法允许您预测系列中的下一个数字。还有更复杂的方法。

已经为特定目的设计了各种类型的伪随机数发生器。有一些安全的 PRNG，虽然速度很慢，但即使你知道它们是如何工作的也很难预测，还有像 Mersenne Twister 这样的大型 PRNG，它们具有很好的分布特性，因此对于编写 Monte Carlo 模拟很有用。

根据经验，线性同余生成器足以编写游戏（怪物造成多少伤害），但不足以编写模拟。研究人员选择较差的 PRNG 用于他们的项目的历史是丰富多彩的。因此，他们的模拟结果令人怀疑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:29:00.087

它不是一个编译器，而是一个 C 库，它具有生成伪随机（不是真正的随机！）数字的功能。

通常为此使用[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T18:29:14.477

好吧，C 编译器不会做出这样的决定。下一个随机数取决于算法。生成随机数并不是一件容易的事。看一眼

*   [http://www.math.utah.edu/~pa/Random/Random.html](http://www.math.utah.edu/~pa/Random/Random.html)
*   [http://computer.howstuffworks.com/question697.htm](http://computer.howstuffworks.com/question697.htm)
*   [http://en.wikipedia.org/wiki/Random_number_generation](http://en.wikipedia.org/wiki/Random_number_generation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T18:32:22.130

在stackoverflow中有很多关于这个的问题。这里有几个。你可以从这些中获得帮助。

[rand() 的实现](https://stackoverflow.com/questions/1167253/implementation-of-rand)

[c语言中的兰德函数](https://stackoverflow.com/questions/8658784/rand-function-in-c)

[兰德实施](https://stackoverflow.com/questions/4768180/rand-implementation)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T18:33:26.903

这其实是一个很大的话题。一些关键的事情：

*   随机数生成是在运行时完成的，而不是在编译时完成的。
*   提供随机性的策略很大程度上取决于（或应该取决于）应用程序。例如，如果您只需要在给定范围内均匀分布的一系列值，则使用线性同余生成器等解决方案。如果您的应用程序与安全/加密相关，您将需要更强大的属性，即您的值既是随机分布的又是不可预测的。
*   一个主要挑战是获取“真实”随机性，您可以使用它来播种伪随机生成器（它将真实随机性“拉伸”成任意数量的可用随机性）。一种常见的技术是使用一些不可预测的系统状态（例如，对鼠标位置或按键时间进行采样），然后使用伪随机生成器为整个系统提供随机性。

# python - 需要帮助将我的课程组合在一起 Python

> ID：12885174
> 
> 赞同：-2
> 
> 时间：2012-10-14T18:24:50.850
> 
> 标签：python, urllib2

我正在尝试创建一种方法来更改 urllib2.build_opener() 的 User-Agent

到目前为止，这就是我所得到的：

# 爬虫.py

```
import urllib, urllib2, cookielib
from bs4 import BeautifulSoup
import urlopener
import re, os

class Crawler():
    def __init__(self):
        # Web site that contains all the browser headers
        self.url = 'http://somewebsite'
        self.opener = urlopener.opener()
        self.web_page=self.opener.open(self.url)
        self.soup=BeautifulSoup(self.web_page.read())
def current_browser(self):
        try:
            web_page=self.opener.open(self.url)
            soup=BeautifulSoup(web_page.read())
            return soup.find(id='uas_textfeld').string
        except urllib2.HTTPError:
            print 'ERROR' 
```

# urlopener：

```
import cookielib
import urllib, urllib2
import linecache, random

cj=cookielib.CookieJar()
useragent='Mozilla/5.0 (BlackBerry; U; BlackBerry 9850; en-US) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.0.0.115 Mobile Safari/534.11+'

def opener():
    #Process Hadlers
    opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
    opener.addheaders=[
                    ('User-Agent', useragent),
                    ('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                    ('Accept-Language', 'en-gb,en;q=0.5'),
                    ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'),
                    ('Keep-Alive', '115'),
                    ('Connection', 'keep-alive'),
                    ('Cache-Control', 'max-age=0'),
                ]
    return opener

#randomly change browser
def browser_change(f_path):
    #f_path is a path to the file that contains browsers
    #To get the file uncoment next lines
    #c=Crawler()
    #c.get_to_the_mobile_browser_list()
    f=open(f_path, 'r+')
    count=0
    for line in f.xreadlines(): count+=1
    br_num=random.randint(1,count)
    useragent=linecache.getline(f_path, br_num)
    return opener() 
```

# 这就是我测试 Crawler.py 的方式：

```
c=Crawler()
print 'Current Browser :\n',c.current_browser()
f_path='/home/vor/mob_brows.txt'
opener=urlopener.browser_change(f_path) # The problem is right here!!!!!
b=Crawler()
print 'New Browser:\n',b.current_browser() 
```

在我的输出中当前浏览器和新浏览器是相同的

```
Current Browser :
Mozilla/5.0 (BlackBerry; U; BlackBerry 9850; en-US) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.0.0.115 Mobile Safari/534.11+
New Browser:
Mozilla/5.0 (BlackBerry; U; BlackBerry 9850; en-US) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.0.0.115 Mobile Safari/534.11+ 
```

文件 mob_brows.txt 包含如下信息：

```
Mozilla/5.0 (Linux; U; Android 2.3.3; zh-tw; HTC_Pyramid Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
Mozilla/5.0 (Linux; U; Android 2.3.3; zh-tw; HTC_Pyramid Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari
Mozilla/5.0 (Linux; U; Android 2.3.3; zh-tw; HTC Pyramid Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
Mozilla/5.0 (Linux; U; Android 2.3.3; ko-kr; LG-LU3000 Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
Mozilla/5.0 (Linux; U; Android 2.3.3; en-us; HTC_DesireS_S510e Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:50:48.693

修改`opener`以接受用户代理作为参数...

```
def opener(user_agent):
    #Process Hadlers
    opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
    opener.addheaders=[
                    ('User-Agent', user_agent),
                # snip...
                ]
    return opener 
```

然后生成具有不同用户代理字符串的开启者列表...

```
# this could be nicer, but demonstrates the point
openers = [opener(agent) for agent in open('your_f_path')] 
```

然后从随机模块中使用您在课堂上`choice`分配的开场白。`self.opener = urlopener.opener()``Crawler`

```
from random import choice
use_to_open = choice(openers) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T18:50:34.310

你的代码是错误的，你将不得不重新制作它

这就是我做我的网络爬虫的方式：

[https://github.com/mouuff/MouCrawler/blob/master/moucrawler.py](https://github.com/mouuff/MouCrawler/blob/master/moucrawler.py)

# matlab - 使用 imagesc 进行分割

> ID：12885176
> 
> 赞同：0
> 
> 时间：2012-10-14T18:24:56.543
> 
> 标签：matlab, image-processing, image-scaling

我观察到，每当我使用该命令时`imagesc(image);`，生成的图像都会有一些区域是黄色的，而背景是红色的。

有没有办法分割图像的这些区域？如果没有，它们是否有任何可用于阈值的类似模式，或者颜色表示是否毫无意义？

我在 Windows 上使用 Matlab R2012a。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:03:36.103

当您使用 imagesc （图像比例的缩写）时，您通过将该矩阵的最小值映射到颜色图的一端并将矩阵的最大值映射到另一端来可视化矩阵。

默认情况下，MATLAB 使用正常的 RGB 颜色范围的 jet() 颜色图。如果图像的某些部分变成黄色，则表示矩阵的元素处于最高值和最低值之间的某个特定位置。

希望下面的示例更清楚地说明了这一点，并展示了如何分割矩阵的“黄色”区域（它本身实际上没有任何颜色）

```
colorRes = 256;

%# In a jet colormap with size 256, yellow is at placement 159
yellow = 159;
yellowScale = ((yellow/256));

image = repmat(1:colorRes,40,1);

figure(1);clf;
colormap(jet(colorRes))

subplot(2,1,1)
imagesc(image)
title('Original image')

%# Segment out yellow
colorDist = 1/colorRes*5; %# Make scalar higher to include colors close to yellow
imageSegmented = zeros(size(image));
imageSegmented(abs(image/colorRes-yellowScale)< colorDist) = 1;

subplot(2,1,2)
imagesc(imageSegmented)
title('Yellow segmented out') 
```

![在此处输入图像描述](../Images/58ca0f83228bff7da0a9654baa67cf1e.png)

# web - 文件权限 - 谁是 Web 服务器中的所有者、组、公共

> ID：12885183
> 
> 赞同：5
> 
> 时间：2012-10-14T18:25:59.313
> 
> 标签：web, file-permissions

我已经阅读了许多有关文件权限的教程，但他们所说的只是例如“如果您不希望其他人写入您的文件，请将其设置为 xxx ...”
但在虚拟主机中，谁是谁？只有一个web服务器（apache）和php和mysql等程序。没有“其他用户”。教程说apache被认为是“公共的”。但我有一个 php 脚本，它可以获取上传的文件并将其放在“下载”目录中。我将该目录的权限设置为 744。这意味着组和公共应该只能“读取”并且所有者具有完全访问权限。我希望我上传的文件不会被传输到该目录，因为“公共”没有“写”权限。但文件在那里。更令我困惑的是，当我尝试下载文件时，出现“禁止”错误。我希望能够下载该文件，因为公众拥有“读取”权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-21T08:51:26.080

这种情况下的用户是 Web 服务器本身。Apache 在向服务器文件系统读取和写入文件时，通常以用户“apache”或“www-data”的身份运行。服务器应该可以读取静态内容。上传位置必须是可写的。根据系统上的其他用户，您可能会认为 Web 服务器是“其他”用户，而网站管理员帐户是实际的文件所有者。

# eclipse - 以文本形式获取 Javadoc

> ID：12885184
> 
> 赞同：0
> 
> 时间：2012-10-14T18:26:04.107
> 
> 标签：eclipse, javadoc

Eclipse 再次让我大吃一惊：似乎没有容易访问的方法可以从 Javadoc 预览中复制文本或 html。我刚刚在 Javadoc 中写了一篇实质性的文章，假设我能够只选择和复制所选内容。我可以选择，但不能复制。

我弄错了吗？如果我不是，那么获取一个 Javadoc 注释的呈现文本或 html 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:30:20.653

拖放似乎有效。（在我提交 Q 后几分钟发现。）

# c++ - linux x64 c++ 为链表分配了太多内存；为什么？

> ID：12885186
> 
> 赞同：1
> 
> 时间：2012-10-14T18:26:44.387
> 
> 标签：c++, memory-management, linked-list

我将使用在 stackoverflow 上看到的链表示例代码来说明问题。

我的 c++ 编写的程序（x64）包含这个链表代码：

旧代码片段已删除；如果评论不再有意义，我很抱歉。

添加了完整的工作代码来显示我的问题是什么。编译：g++linkedlist.cpp -o 链表

```
#include <cstdlib>
#include <iostream>

using namespace std;

 struct node
{
    public :
          unsigned int part1; // 4 bytes
          unsigned int part2; // 4 bytes
          node *next;         //pointer, 8 bytes on 64 bit system
      unsigned int read_part1();
 };

struct LinkedList
 {
     public:
     LinkedList();
          void insert(unsigned int data[], unsigned int data1);
          bool isEmpty() const;
          node* head;
 };

unsigned int node::read_part1() {
return part1;
}
 LinkedList::LinkedList():
 head(NULL)
{
}

bool LinkedList::isEmpty() const
{
  return (head == NULL);
}

  void LinkedList::insert(unsigned int data[], unsigned int data1)
 {

    node* oldHead = head;
    node* newHead = new node();
    newHead->part1 = data[0];
    newHead->part2 = data1;
    newHead->next = oldHead;
    head = newHead;

  }

unsigned int allocations = 300000000;
unsigned int index_size = 430000000;//index of lists, 430m,.
                    //will be creatad on heap
    LinkedList *list = NULL;

int main(int argc, char *argv[])

{
LinkedList list_instance;

cout << "1 LinkedList instance takes [" << sizeof(list_instance) << "] bytes in memory!"<< endl;

node node_instance;

cout << "1 node instance takes [" << sizeof(node_instance) <<"] bytes in memory !"<< endl;

    try{
    list = new LinkedList[index_size];
    }

     catch(std::bad_alloc) {
    cout << "Error allocating memory" << endl;
     return 0;
    //reboot code
    }

unsigned int some_data[] = {00, 01};
unsigned int index;

LinkedList *list_instance2 = NULL;

cout << "Allocating ..." << endl;

for (int i=0; i<allocations; i++)
{

index = rand();
unsigned short inde = (unsigned short)index;
list_instance2 = &list[inde];

list_instance2->insert(some_data, some_data[1]);

}

unsigned long sk = ((allocations * sizeof(node_instance) + index_size*sizeof(list_instance))) / (1024*1024*1024);

cout << "This process *should* consume around " << sk <<" GBytes of memory, but does it ?"<< endl;

cout << "Allocating done, *check the process size* and press any number key + ENTER to exit ..." << endl;

int u=0;
cin >> u;

return 0;
} 
```

编译它，运行它，看看你的进程大小是否与预期的一致。如果不是 - 问题出在哪里？

哦，我在 64 位 slackware 13.37 上使用未修改的默认内核运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:02:47.410

在我的盒子上，[稍微修改了源代码](http://liveworkspace.org/code/e45f030c6d21cda073401cdb24faaa6f)（见下文附注）

*   它使用 1243 MiB 而不是使用标准库堆例程的“预期”785 MiB
*   使用 Google 的 tcmalloc 时它使用 791 MiB
*   使用 Boost Object Pool 分配节点时使用 840 MiB（使用标准库堆**或**tcmalloc）

在堆例程的实现中开销非常明显。

这是代码：

*   注意`new (nothrow)`那里的使用。
*   另外，开始时的基线测量（我`pmap $(pgrep test) | tail`在 linux 上使用过）
*   注意 中的选择`insert`：

    ```
    void LinkedList::insert(unsigned int data[], unsigned int data1)
    {
    #if 1
        head = new node { data[0], data1, head };
    #else
        static boost::object_pool<node> node_pool;

        node* add = node_pool.malloc();
        *add = node { data[0], data1, head };
        head = add;
    #endif
    } 
    ```

    更改`#if 1`为`#if 0`使用 Boost 对象池

*   节点分配循环出现异常

    ```
    index = rand();
    unsigned short inde = (unsigned short)index;
    list_instance2 = &list[inde];
    list_instance2->insert(some_data, some_data[1]); 
    ```

    我将其更改为您可能想要的：

    ```
    list[rand() % index_size].insert(some_data, some_data[1]); 
    ```

```
#include <stdlib.h>
#include <iostream>
#include <boost/pool/object_pool.hpp>

using namespace std;

struct node
{
    unsigned int part1; // 4 bytes
    unsigned int part2; // 4 bytes
    node *next;         //pointer, 8 bytes on 64 bit system
};

struct LinkedList
{
public:
    LinkedList();
    void insert(unsigned int data[], unsigned int data1);
    bool isEmpty() const;
    node* head;
};

LinkedList::LinkedList():
    head(NULL)
{
}

bool LinkedList::isEmpty() const
{
    return (head == NULL);
}

void LinkedList::insert(unsigned int data[], unsigned int data1)
{
#if 1
    head = new node { data[0], data1, head };
#else
    static boost::object_pool<node> node_pool;

    node* add = node_pool.malloc();
    *add = node { data[0], data1, head };
    head = add;
#endif
}

const unsigned int allocations = 30000000;
const unsigned int index_size = 43000000;//index of lists
//will be creatad on heap
LinkedList *list = NULL;

int main(int argc, char *argv[])
{
    LinkedList list_instance;
    cout << "1 LinkedList instance takes [" << sizeof(list_instance) << "] bytes in memory!"<< endl;
    node node_instance;
    cout << "1 node instance takes [" << sizeof(node_instance) <<"] bytes in memory !"<< endl;
    cout << "Before dynamic allocations: *check the baseline process size* and press ENTER to start allocating ..." << endl;
    std::string s;
    std::getline(std::cin, s);
    list = new (nothrow) LinkedList[index_size];
    if (!list)
    {
        cout << "Error allocating memory" << endl;
        return 1;
    }
    unsigned int some_data[] = {00, 01};
    cout << "Allocating nodes ..." << endl;
    for (unsigned int i=0; i<allocations; i++)
    {
        list[rand() % index_size].insert(some_data, some_data[1]);
    }
    unsigned long sk = ((allocations * sizeof(node_instance) + index_size*sizeof(list_instance))) >> 20;
    cout << "This process *should* consume around " << sk <<" MiB of memory, but does it ?"<< endl;
    cout << "Allocating done, *check the process size* and press ENTER to exit ..." << endl;
    std::getline(std::cin, s);
    return 0;
} 
```

# java - 从文件输入中查找java中的最大值

> ID：12885188
> 
> 赞同：0
> 
> 时间：2012-10-14T18:26:48.413
> 
> 标签：java, max, min

我是 Java 新手，我正在尝试编写一个程序，要求用户输入仅包含数字的 txt 文件的名称，程序将输出文件中数字的总和、平均值、最大值和最小值. 我已经编写了大部分程序，但是我一直试图找到值的最大值和最小值。您可以提供的任何信息都会有所帮助，如果我不够清楚，我可以尝试详细说明。到目前为止，我的代码是：

```
public class NumberFile{
    public static void main(String[] args){

      boolean goodName = false;
      int currentNumber, sum = 0, numberCount=0;
      Scanner numberFile = null;
      FileReader infile; 

      Scanner input = new Scanner(System.in);
      System.out.println("Please enter the name of the file you wish to import: ");
      String fileName = input.nextLine();

      while (!goodName){
        try{
          infile = new FileReader(fileName);
          numberFile = new Scanner(infile);
          goodName = true;
        }
        catch (IOException e){
          System.out.println("invalid file name, please enter another name");
          fileName = input.nextLine();
        }
      }
      while (numberFile.hasNextInt()){
        currentNumber = numberFile.nextInt();
        sum+=currentNumber;
        numberCount++;
      }
      System.out.println("The sum of the numbers is " +sum);

      System.out.println("The average of the numbers is " + ((double) sum)/numberCount);

    } // end main
} // end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:30:15.817

有两个变量 min 和 max（当然 min 和 max 最初应该是 int.max） 提示：

```
if(currentNumber < min)
{
  min= currentNumber;
}

if(currentNumber > max)
{
 max = currentNumber 
} 
```

以上将在您的文件读取循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:32:25.627

声明两个 int 变量 - 一个“min”和一个“max”。用 Integer.MAX_VALUE 初始化 min，用 Integer.MIN_VALUE 初始化 max。

然后在你的while循环中检查每个数字与这些变量 - 即。如果数字小于“min”，则将其分配为新的“min”值。如果它大于“max”，则将其分配为新的“max”值。

希望这可以澄清，它非常简单，所以我没有放任何代码，所以你可以自己实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:32:35.687

```
int min=Integer.MAX_VALUE;
int max=Integer.MIN_VALUE;
while (numberFile.hasNextInt()){
   currentNumber = numberFile.nextInt();
   sum+=currentNumber;
   numberCount++;

   if(min>currentNumber){
      min=currentNumber;
    }
   if(max<currentNumber){
      max=currentNumber;
    }
} 
```

每次读取小于当前最小值的新值时，将最小值声明为最大 int 值并重新分配最小值。最大值也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-15T09:18:47.523

我有一个实例，我需要从包含大量插入语句的 .sql 文件中找到最大的 Id。这些语句还插入了 Id 以及所有其他字段。我认为这将是一个很好的例子，因为该文件不仅有整数，而且有大量的混合数据类型。下面是我的程序，

```
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Scanner;

/**
 * @author Hamzeen. H.
 * @date 15/10/2015
 */
public class Driver {

    public Driver() {
    }

    private void readData() {
        try {
            Scanner inputFile = new Scanner(new DataInputStream(
                    new FileInputStream("all_inserts.sql")));
            long highest = 0L;

            while (inputFile.hasNext()) {
                String strNum = buildNumber(inputFile.next());

                if (!strNum.equals("")) {
                    Long temp = Long.parseLong(strNum);
                    if (temp > highest) {
                        highest = temp;
                    }
                }
            }
            System.out.println("Highest:: " + highest);
            inputFile.close();
        } catch (IOException e) {
            System.out.println("Problem finding file");
        }
    }

    private String buildNumber(String str) {
        StringBuilder strBuilder = new StringBuilder();

        for (int i = 0; i < str.length(); i++) {
            char ch = str.charAt(i);
            if (Character.isDigit(ch)) {
                strBuilder.append(ch);
            } else if ('.' == ch || !Character.isDigit(ch) || ',' == ch) {
                return strBuilder.toString().trim();
            }
        }
        return strBuilder.toString().trim();
    }

    public static void main(String args[]) {
        new Driver().readData();
    }
} 
```

# java - 即时更改十六进制整数的 alpha 值

> ID：12885192
> 
> 赞同：0
> 
> 时间：2012-10-14T18:27:03.563
> 
> 标签：java, android

我有这个循环运行了数千次（所以需要高效）。它改变位图像素的值。

我希望能够运行循环并将某组像素“切换”为 alpha，然后在稍后将它们切换回来。

我的问题是。如何切换值？所以说 0xFFCC1BE0 变成 0x00CC1BE0 然后如果我想切换回 0xFFCC1BE0 我只需将 00 也转为 FF。

由于内存不足，我无法制作两个位图 :-(

无论如何，这是我到目前为止所得到的：

```
private void setTransparencyOnLightMap(float WidthPercentage, float LeftPosition)
{
    int blankPixel = 0x00000000;
    int savedPixel = 0x00000000;
    int desiredAlpha = 200; //Can also be 0x00
    //Find away of turning alhpa off and on.

    for(int BMx = 0; BMx < mLightMap.getWidth(); BMx++)
    {
        for(int BMy = 0; BMy < mLightMap.getHeight(); BMy++)
        {
            if(mLightMap.getPixel(BMx, BMy) != blankPixel) //Make sure don't overwrite blank transparent pixels.
            {
                savedPixel = mLightMap.getPixel(BMx,BMy);
                savedPixel = savedPixel | (desiredAlpha << 24);

                mLightMap.setPixel(BMx, BMy, savedPixel);
            }   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:51:34.043

您可以像这样切换像素的 alpha：

```
savedPixel = savedPixel & 0x00FFFFFF;
savedPixel = savedPixel | (desiredAlpha << 24); 
```

第一行将 savedPixel 的 8 个最高有效位清零（这些是保存 alpha 的位）。第二行将 savedPixel 的 8 个最高有效位设置为 desiredAlpha。请注意，desiredAlpha 必须介于 0 和 255 之间（这些是可以存储在 8 位中的整数）。

请注意，这使用了非常有效的位运算符 (&, |, <<)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:12:28.110

在我看来，为了减少内存使用，您可以只保存每个像素的原始 Alpha 值而不是整个 ARGB 值 - 为此使用一个字节数组，其大小为原始位图的 1/4。还为新的 Alpha 使用位掩码，这样您就可以使用`&`Tristan Hull 所描述的按位 AND ( ) ...

```
byte[] savedAlphaArray = new byte[mLightMap.getWidth(), mLightMap.getHeight()];
int desiredAlphaMask = 0x00FFFFFF;
int pixel; 
```

然后保存 Alpha 值并应用位掩码，请执行以下操作...

```
for (int i = 0; i < mLightMap.getWidth(); i++) {
    for (int j = 0; j < mLightMap.getHeight(); j++) {
        pixel = mLightMap.getPixel(i, j);
        savedAlphaArray[i, j] = (pixel & 0xFF000000) >> 24;
        mLightMap.setPixel(i, j, desiredAlphaMask & pixel);
    }
} 
```

要“切换”回来，请执行以下操作...

```
for (int i = 0; i < mLightMap.getWidth(); i++) {
    for (int j = 0; j < mLightMap.getHeight(); j++) {
        pixel = mLightMap.getPixel(i, j);
        mLightMap.setPixel(i, j, savedAlphaArray[i, j] << 24 & pixel);
    }
} 
```

# php - 在 Zend Framework 2 中获取用于导航的活动模块

> ID：12885198
> 
> 赞同：1
> 
> 时间：2012-10-14T18:27:44.840
> 
> 标签：php, zend-framework2, zend-navigation

我正在使用 Skeleton Zend Framework 2 来构建我的应用程序。

我想修改 layout.phtml 中的当前导航栏以显示 2 个链接作为标准，然后根据用户权限显示更多链接。

我将如何让正在使用的活动模块（ZfcUser 的 /user）显示为 li class="active"，以及如何根据加载的模块实现导航项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:59:22.517

在控制器中，您可以获得如下活动模块：

```
$modules = $this->getEvent()->getApplication()->getServiceManager()->get('modulemanager')->getLoadedModules();
$moduleNames = array_keys($modules); 
```

然后你可以检查模块名称加载的模块：

```
$moduleLoaded = in_array('ZfcUser', $moduleNames); //true or false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:16:20.293

问题来了……您对“活动模块”的定义是什么？在 ZF2 中，模块由顶级命名空间松散地定义，但这也不是绝对的，因为模块可以根据需要在多个命名空间下提供代码。

我写了一篇关于配置特定于模块的布局的博客文章，我在其中更详细地解释了这个问题，并展示了基于活动模块执行操作的一种可能的“解决方案”：[http ://blog.evan.pro/ zend-framework-2 中的模块特定布局](http://blog.evan.pro/module-specific-layouts-in-zend-framework-2)

在该示例中，我使用事件标识符附加到“调度”事件，该事件标识符是模块名称（命名空间），它仅在被调度的控制器的顶级命名空间中触发（我专门将此功能添加到 ZF2 ，因为它在测试阶段已成为一个常见问题）。如果您对它的工作原理或原因感到好奇，请参阅[https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/AbstractController.php#L153-159](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/AbstractController.php#L153-159)（特别是写作时的第 158 行这个）。

或者，您可以附加到调度事件，并获取正在调度的控制器的顶级命名空间。同样，不能保证这实际上是您正在寻找的“模块名称”，并且在调度请求时最好只考虑控制器和操作，而不是“这是哪个模块？”

```
class Module
{
    public function onBootstrap($e) {
        $events = $e->getApplication()->getEventManager()->getSharedManager();
        $events->attach('Zend\Mvc\Controller\AbstractActionController', 'dispatch', function($e) {
            $controllerClass = get_class($e->getTarget()); // $e->getTarget() is the controller
            $controllerTopNamespace = substr($controllerClass, 0, strpos($controllerClass, '\\'))

            // Do whatever here, maybe something like:
            // $nav = $e->getTarget()->getServiceLocator()->get('navigation');
            // $nav->...
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T09:14:33.203

在控制器中，您可以通过这种方式检查活动模块

```
$bIsModule = (bool) $this->getEvent()
             ->getApplication()
             ->getServiceManager()
             ->get('modulemanager')
             ->getModule('ZfcUser'); // returns true or false 
```

# web - 想像的问题：后记委托失败

> ID：12885200
> 
> 赞同：2
> 
> 时间：2012-10-14T18:28:09.337
> 
> 标签：web, webserver, imagemagick, imagick

我希望 ImageMagick 与 gs 和 imagick 一起工作。我正在尝试执行代码行（它获取多页/图层 pdf 的第一行以显示它）。此代码不应该是错误的来源，它是服务器端问题。

```
$img = new Imagick($pdf_file."[0]"); 
```

在源网页上，我收到此错误：

```
exception 'ImagickException' with message 'Postscript delegate failed... 
```

我已经做了很多谷歌搜索/尝试来解决这个问题。我有：

*   重新安装了 gs 和 ImageMagick（由于我使用的是 RC 而不是稳定版，目前 imagick 给了我一个奇怪的错误）
*   将扩展名添加到 php.ini (imagick.so)
*   重新配置 ImageMagick 安装以包括 --with-gslib（gs 已添加到列表中）
*   动态链接的 /usr/bin 的（用于 gs）
*   其他一些东西（是的，它们都可用并已安装）。

convert 命令确实有效，我已经测试并确认了它的用法，它运行良好，没有错误。生成的 PDF 完美显示。

```
convert test.pdf test2.pdf 
```

我已经用尽了我能想到的几乎所有东西，以及谷歌和其他网站提供的大部分内容。有人对解决此问题的最佳方法有任何建议吗？我很高兴生成日志等，只是不确定究竟什么会帮助解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:49:57.577

在您处理*PDF时，我对提到**PostScript*委托的消息有点怀疑……您确定您确实将 PDF，而不是 PostScript 提供给您的 ImageMagick 进程。

 *在调试的**第一**阶段，您应该将`-verbose`参数添加到您正在运行的任何 ImageMagick 命令中。这将（至少）向您显示 IM 用于调用 Ghostscript 的确切命令行。然后你可以手动运行这个 GS 命令，看看你可能会得到什么样的错误信息。接下来，您可以运行此 GS 命令，但添加一个`-dDEBUG`以获取更多信息。

在调试的**第二**阶段，您可以添加`-debug configure`, `-debug trace`and `-debug all`（如果您知道如何解释打印的信息，它可能会或可能不会给您额外的线索）...特别是如果您与`convert -list delegate`.*

# regex - 在使用 sed 保留参数的同时查找替换

> ID：12885205
> 
> 赞同：0
> 
> 时间：2012-10-14T18:28:44.037
> 
> 标签：regex, sed, replace

我有一个 tex 文件，其中包含形式命令的实例，`\qdb{123}`其中 123 可以概括为任意长度的任意数量。我需要将这些语句转换成更复杂的东西：比如`\text1{123}\text2{123}`. 这个想法是括号内的数字在新输出中被多次使用。

我需要一个 tex`\newcommand`函数之外的方法（这将是一个预处理步骤）。sed 是正确的工具，如果是，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:36:36.217

一个简单的解决方案可能如下所示：

输入：

```
asldkfj aslfj ;aldfj \qdb{123} asdflk
% 
\qdb{452345} somecommand \texttt{asdf} 
```

输出：

```
asldkfj aslfj ;aldfj \text1{123}\text2{123} asdflk
% 
\text1{452345}\text2{452345} somecommand \texttt{asdf} 
```

**通过运行（输出到控制台，用于测试）：**

```
sed -e 's/\\qdb{\([0-9]*\)}/\\text1{\1}\\text2{\1}/g' test.txt 
```

**通过运行（直接在文件上进行更改）：**

```
sed -i -e 's/\\qdb{\([0-9]*\)}/\\text1{\1}\\text2{\1}/g' test.txt 
```

适应`\\text1{\1}\\text2{\1}`您的需求。`\1`是对匹配号码的反向引用。

不用说：*确保有备份！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:41:14.943

如果 ruby​​ 可用，那么可能是这样的：

```
prompt> irb
>> s = "lorem \\qdb{123} ipsum \\qdb{123} lorem"
=> "lorem \\qdb{123} ipsum \\qdb{123} lorem"
>> s.gsub /\\qdb\{(\d+)\}/m, '\text1{\1}\text2{\1}'
=> "lorem \\text1{123}\\text2{123} ipsum \\text1{123}\\text2{123} lorem"
>> 
```

反斜杠需要额外的反斜杠转义。

# java - Java 格式化输出

> ID：12885210
> 
> 赞同：0
> 
> 时间：2012-10-14T18:29:13.160
> 
> 标签：java, format, tostring, pow

我根本没有 Java 经验，并且正在使用文本编辑器编写代码，所以我看不出问题是什么（我从命令行运行）我看到错误并且知道它是什么但我不知道如何要解决这个问题

```
System.out.print(String.format("%7d", Math.pow(n,2).toString())); 
```

我也试过没有`.toString()` 基本上，如果我只打印 n 它可以工作，但是 power 函数给我一个错误可能是因为返回类型，但是 pow 应该返回一个 double 并且字符串格式 %7d 可能也是 double 对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:31:29.367

您使用了错误的格式说明符..`%d`用于整数。

`Math.pow()`返回`double`不能调用`toString()`方法的原语。

尝试使用`%7s`which is for `String`，并将您的原始双精度值转换为`Wrapper type`： -

```
String.format("%7s", Double.valueOf(Math.pow(n,2)).toString()) 
```

* * *

但是，您不需要将参数转换为`String`，您可以直接使用`double value`with `%f`：-

```
String.format("%.3f", Math.pow(n,2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:33:54.877

您很可能希望使用`f`而不是`d`不使用`toString`. 如果您确实能够做到`toString`（正如 Quoi 指出的那样，您不能从原语中做到），那么将无法使用`Formatter`s 期望使用的`Number`对象（`Double`在您的情况下）。

这是[`Formatter`](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)使用的[`String.format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:44:06.510

双精度的正确格式是 %f 而不是 %d 所以修改你的代码：

```
 System.out.print(String.format("%7f",  Math.pow(n,2))); 
```

另见：[链接](https://stackoverflow.com/questions/4568345/java-methodoverloading-error-with-double-values)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:35:48.167

问题在于`toString`方法。您已经给出了格式说明符`%7d`，这意味着`integer`. 您不能打印字符串来代替它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T18:33:49.520

`Math#pow(double,double)`返回原始双精度值，您不能调用`toString`方法。使用 f 代替 d，d 表示十进制整数。

```
 System.out.format("%7f", Math.pow(n,2)); 
```

最好从 Eclipse 或任何其他编辑器开始编写代码。

# c# - 最小化 XAML 应用程序启动时间

> ID：12885216
> 
> 赞同：0
> 
> 时间：2012-10-14T18:30:10.500
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

Microsoft 的文章 ( [http://msdn.microsoft.com/en-us/library/windows/apps/hh994639.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh994639.aspx) ) 指出您可以创建一个扩展的初始屏幕页面，在此期间您可以创建 MainPage，然后导航到它一次加载。

唯一的问题是，一个页面的Loaded事件永远不会触发，直到页面到该`Window.Current.Content`属性。

有人对此有解决方案吗？- 我的 MainPage 有相当多的 XAML，在低端设备上加载需要一段时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:27:51.037

默认情况下，该应用在其视觉根目录中有一个 Frame 控件。例如，您可以通过将您自己的 UserControl（我通常称之为 AppShell）放在那里进行修改，它具有所有页面使用的 Frame，您可以有一个用于弹出窗口、登录屏幕等或扩展启动屏幕的层。

要解决您的问题 - 只需将 Frame 和扩展的初始控件都放在 Grid 中，并且仅在加载扩展的初始控件后导航到您的第一页。那么其他一切都应该很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:20:11.273

如果您将 MainPage 与 ASP.NET 中的 MasterPage 类似地使用，则 MainPage 应该具有 APP Bar 定义，并且在正文中应该只包含一个单帧元素。使用此模式来设置应用程序的内容，而不是

```
Window.Current.Content = // An Application Page 
use
AppFrame.Content = //An Application Page 
```

还可以考虑，从 MainPage 元素中删除 Mainpage 代码并将其放置在自定义用户控件中，然后您可以从 userControl 冒泡一个事件，供 MainPage 处理。它还允许您在应用程序的其他位置使用该功能，而无需完全重新创建逻辑和 UI。

这是 MainPage 的示例 XAML：

>

```
<Page.Resources>
    <ResourceDictionary x:Name="CommonStyles" Source="/Common/StandardStyles.xaml" />
</Page.Resources>
<Page.TopAppBar>
    <AppBar x:Name="NavigationAppBar" Padding="10,0,10,0" AutomationProperties.Name="Global App Bar" >
        <Grid>                
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <StackPanel x:Name="LeftCommands" Orientation="Horizontal" Grid.Column="0" HorizontalAlignment="Left">
            <!-- App Bar Buttons Removed --> 
            </StackPanel>
        </Grid>
    </AppBar>
</Page.TopAppBar>

<!--
    This grid acts as a root panel for the page that defines two rows:
    * Row 0 contains the back button and page title
    * Row 1 contains the rest of the page layout
--> 
```

使用 Getter 和 Setter 将 Frame 类型的公共属性添加到应用程序视图模型

```
public Frame SelectedAppFrame {get;set;} 
```

在 MainPage.xaml.cs 文件中分配一个属性：

```
ApplicationViewModel vm = this.PageBackgroundGrid.DataContext as ApplicationViewModel;
vm.SelectedAppFrame = this.AppFrame; 
```

并且在应用程序视图模型中进行通用导航的代码是：

```
public void HandleNavigaitionEvent(object sender, string pageName, Frame AppFrame, StackPanel stack)
        {
            var content = Pages.Where(i => i.Name == pageName).FirstOrDefault();
            NavigateTrigger(AppFrame, content);
        }

public void NavigateTrigger(Frame AppFrame, LayoutAwarePage content)
        {
            EventAggregator.GetEvent<PageNavigatedEvent>().Publish(content);
            AppFrame.Content = content;
            NaviagationPath.Add(content);
        } 
```

这样，您可以从应用程序中可以访问 ApplicationViewModel 的任何位置将更改传播到 AppFram 中（应该无处不在）。

# django - 如何在 Django 中间件中设置 cookie？

> ID：12885221
> 
> 赞同：4
> 
> 时间：2012-10-14T18:30:31.073
> 
> 标签：django, cookies, middleware

我尝试了几个版本：

```
def process_response(self, request, response):

    if not request.COOKIES.get('new_user', None):

        print "cookie"

        max_age = 365 * 24 * 60 * 60  # 10 years
        expires = datetime.datetime.utcnow() + datetime.timedelta(seconds=max_age)
        response.set_cookie('new_user', expires=expires)

    return response 
```

但它不起作用：我在每次页面请求时都会打印“cookie”，并且我的 FF 开发工具栏 cookie 列表中没有出现 cookie。我没有将任何浏览器设置为拒绝 cookie。

我目前正在使用开发服务器，并且我确实将公共和会话中间件设置为设置中的第一个。我没有设置任何 cookie 设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T04:09:00.667

经过几个小时的搜索，我发现您必须设置`max_age`参数：

```
response.set_cookie('ref', request.GET.get('ref', ''),
                    expires=expires.utctimetuple(), max_age=max_age) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:14:43.093

来自 Django[文档](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse.set_cookie)：

> expires 应该是格式为**"Wdy, DD-Mon-YY HH:MM:SS GMT"**的字符串或**UTC 格式的 datetime.datetime 对象**。如果 expires 是一个日期时间对象，将计算 max_age。

所以，试试吧：

```
>> import datetime
>>max_age = 365 * 24 * 60 * 60  # 10 years
>>expires = datetime.datetime.now() + datetime.timedelta(seconds=max_age)

# Cookie to GMT format via strftime method
>>response.set_cookie('new_user', expires=expires.strftime("%a, %d-%b-%Y %H:%M:%S GMT")) 
```

或者

```
>> response.set_cookie('new_user', expires=expires.utctimetuple()) 
```

我更喜欢第一种方法。

# java - java - 如何根据java中的模式生成随机数/字符串？

> ID：12885222
> 
> 赞同：0
> 
> 时间：2012-10-14T18:30:32.037
> 
> 标签：java, parsing, random, pattern-matching

我想根据以下模式生成一个随机数：

```
random.int= pattern="[0-9]{%len%}"   
random.big_integer= pattern="[0-9]{%len%}"  
random.long= pattern="[0-9]{%len%}"   
random.string= pattern="[A-Z][a-z]{0,%len%}"  
random.char= pattern="[A-Z]{1}"  
random.byte= pattern="[A-Z][0-9]{1}"  
random.short= pattern="[0-9]{%len%}"  
random.float= pattern="[0-9]{%len%}\\.[0-9]{%scl%}"  
random.double= pattern="[0-9]{%len%}\\.[0-9]{%scl%}"  
random.big_decimal= pattern="[0-9]{%len%}\\.[0-9]{%scl%}" 
```

所以，我的输入将是“len”、“scl”和数据类型。基于这些输入，我将不得不读取相应的模式并生成输出。对于单次运行期间的每个调用，此输出应该是随机的。如果我重新运行程序，输出应该是相同的。

在 JAVA 中实现这一目标的最佳方法是什么？

例如，如果我调用 generateRandomOutput("float",5,2) [datatype,length,scale] 我的输出应该有一个随机浮点数，例如：21453.67（这基于上述模式“random.float” )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:43:29.880

简单来说，就是换个基地。`Math.random`您可以通过获取 a并乘以 26来生成随机字符，结果会告诉您随机字母在字母表中的位置（ `[A-Z]`）。

获取具有两个随机字符的字符串需要乘以 26^2 并将数字更改为以 26 为底（或者，将随机数乘以 26 两次）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:13:26.760

试用[快速检查](http://java.net/projects/quickcheck/pages/Home)

它为您提供了出色的[原始生成器](http://quickcheck.java.net/nonav/javadoc/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T19:53:24.263

> 如果我重新运行程序，输出应该是相同的。

听起来你真的不希望它是*随机*的吗？

查看一种方法散列函数，如 MD5、SHA 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T19:46:15.920

不可能确定符合正则表达式的所有可能字符串，只有一些简单的正则表达式，例如您拥有的。因此，我怀疑是否有图书馆可以帮助您。

我建议您使用自己的更简单的格式，例如`A`=> AZ、`a`=> az、`d`=> 0-9、nnn 作为重复，任何其他字符作为本身。

ef 而不是

```
random.byte= pattern="[A-Z][0-9]{1}" 
```

我会

```
random.byte.pattern=Ad 
```

这将更容易解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T19:15:39.647

首先，您需要一个可以“播种”的随机数生成器，这样您就可以在每次运行时提供相同的种子，以便运行可重现。您可以播种 java.util.Random。

接下来，我建议您编写一个标准例程，给定一个长度和一个字母，将提供一个包含那么多随机字符的字符串。然后为您的每种数据类型编写例程以调用公共例程来获取字符串，并将它们转换为所需的类型。

标准程序相当简单：

*   接收长度和字母参数。

*   从您的 RNG 中获取下一个随机整数。

*   取随机整数并计算字母表长度的模数。

*   使用模数从字母表中选择下一个字符 - 将其推入结果字符串。

*   重复直到你积累了指定数量的字符。

在特定类型的例程中，您使用适当的参数调用上述常用函数（两次，插入“.”，用于浮点/双精度/大十进制），然后使用 Datatype.getDatatype（替换适当的数据类型名称）转换结果字符串为正确的类型。因此，特定于类型的例程大多是“样板”。

传递给通用例程的“字母表”是数字类型“0123456789”，“字符”类型是“ABCD..WXYZ”，“字节”类型是“ABCD..WXYZ0123..789”（或者你打算因为它是“0123456789ABCDEF”？）。

# javascript - 用于验证可变长度时间的 JavaScript 正则表达式

> ID：12885225
> 
> 赞同：0
> 
> 时间：2012-10-14T18:31:03.160
> 
> 标签：javascript, regex

这是我验证长度可能在 1 到 4 个字符之间的字符串的要求（H 代表小时，M 代表分钟）：

1 个字符 = H（0-9 之间的数字）

2 个字符 = HH（第一个 H 是 0-2 之间的数字，第二个是 0-9 之间的数字，但如果第一个是 2，那么第二个只能是 0-4）

3 个字符 = HMM（第一个 H 是 0-9 之间的数字，第一个 M 是 0-5 之间的数字，第二个 M 是 0-9 之间的数字）

4 个字符 = HHMM（第一个 H 是 0-2 之间的数字，第二个是 0-9 之间的数字，但如果第一个是 2，那么第二个只能是 0-4，第一个 M 是 0-5 之间的数字，第二个 M是 0-9 之间的数字）

使这个具有挑战性的是，我事先不知道字符串的长度，并且相同的数字可能意味着不同的事情，具体取决于字符串的长度。关于 JavaScript 正则表达式的任何想法来验证这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:40:12.697

您可以使用这样的正则表达式：

```
^(2[0-4]|[01]?\d)([0-5]\d)?$ 
```

分解：

```
^                   beginning of string
2[0-4]              digit 2 followed by digit 0-4
|                   or
[01]?\d             digit 0-1, optional, followed by any digit
([0-5]\d)?          digit 0-5 followed by any digit, as whole optional
$                   end of string 
```

注意：也许您的意思是 0-23 小时而不是 0-24 小时：

```
^(2[0-3]|[01]?\d)([0-5]\d)?$ 
```

# ios - 沿贝塞尔路径拖动 UIView

> ID：12885226
> 
> 赞同：2
> 
> 时间：2012-10-14T18:31:10.947
> 
> 标签：ios, animation, uiview

我需要将 UIView 沿着贝塞尔路径从一个点拖到另一个点，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T07:47:42.783

This is the easiest way to do drag a uiview from one point to another point.

```
UIBezierPath *path  = [UIBezierPath bezierPath];
[path moveToPoint:startingPoint];
[path addLineToPoint:endPoint]; //you can use addCurveToPoint: , addArcToPoint:, etc

CAKeyframeAnimation *pathAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
pathAnimation.duration = 10.0;
pathAnimation.path = path;
pathAnimation.removeOnCompletion = NO ;
[myView.layer addAnimation:pathAnimation forKey:@"pathAnimation"]; 
```

# macos - Google Go HelloWorld 教程出错了

> ID：12885235
> 
> 赞同：3
> 
> 时间：2012-10-14T18:32:07.547
> 
> 标签：macos, google-app-engine, go

从以下位置开始学习 Google Go HelloWorld 教程：

[https://developers.google.com/appengine/docs/go/gettingstarted/helloworld](https://developers.google.com/appengine/docs/go/gettingstarted/helloworld)

在 MacBook Pro 上使用 OS X 10.8.2。

遵循这些步骤，但是当我运行第一个代码（ dev_appserver.py myapp/ ）时，我在问题末尾列出了错误。

这是hello world程序：

```
package hello

import (
    "fmt"
    "net/http"
)

func init() {
    http.HandleFunc("/", handler)
}

func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "Hello, world!")
} 
```

这是配置文件：

```
application: helloworld
version: 1
runtime: go
api_version: go1 
```

处理程序：

```
- url: /.*
  script: _go_app 
```

已经在 stackoverflow 上搜索和搜索，但没有找到解决方案。

如果您有任何想法/建议，请告诉我。

```
Last login: Sun Oct 14 13:05:37 on ttys000
derek-etnyres-macbook-pro-2:~ dereketnyre$ dev_appserver.py myapp/
WARNING  2012-10-14 18:19:54,239 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
Warning: You are using a Python runtime (2.7) that is more recent than the production runtime environment (2.5). Your application may use features that are not available in the production environment and may not work correctly when deployed to production.
CRITICAL 2012-10-14 18:19:54,686 appcfg.py:562] The api_version specified in app.yaml (go1) is not supported by this release of the SDK.  The supported api_versions are ['1']. 
```

==========

# 更新

将 api_version 更改为 1 ( api_version: 1)，它确实有帮助。仍然给出错误消息，但服务器启动。

它现在说：

```
derek-etnyres-macbook-pro-2:~ dereketnyre$ dev_appserver.py myapp/
WARNING  2012-10-14 21:03:14,910 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
Warning: You are using a Python runtime (2.7) that is more recent than the production runtime environment (2.5). Your application may use features that are not available in the production environment and may not work correctly when deployed to production.
INFO     2012-10-14 21:03:15,324 appcfg.py:585] Checking for updates to the SDK.
INFO     2012-10-14 21:03:15,551 appcfg.py:603] The SDK is up to date.
WARNING  2012-10-14 21:03:15,551 datastore_file_stub.py:518] Could not read datastore data from /var/folders/s0/095xdtkd3cgbjp73tpxx309r0000gn/T/dev_appserver.datastore
WARNING  2012-10-14 21:03:15,552 simple_search_stub.py:949] Could not read search indexes from /var/folders/s0/095xdtkd3cgbjp73tpxx309r0000gn/T/dev_appserver.searchindexes
WARNING  2012-10-14 21:03:15,562 dev_appserver.py:3621] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: No module named _imaging
INFO     2012-10-14 21:03:15,570 dev_appserver_multiprocess.py:655] Running application dev~helloworld on port 8080: http://localhost:8080
INFO     2012-10-14 21:03:15,570 dev_appserver_multiprocess.py:657] Admin console is available at: http://localhost:8080/_ah/admin 
```

当我使用 Safari 访问 localhost:8080 时 - 不显示 hello 字词 - 会出现一个充满 python 脚本异常的屏幕。

在最底部它说：

```
<type 'exceptions.Exception'>: no goroot found at /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/goroot 
      args = ('no goroot found at /Applications/GoogleAppEngine...bundle/Contents/Resources/google_appengine/goroot',) 
      message = 'no goroot found at /Applications/GoogleAppEngine...bundle/Contents/Resources/google_appengine/goroot' 
```

看起来路径设置不正确？

python错误的全文是：

```
pe 'exceptions.AttributeError'> Python 2.7.2: /usr/bin/python
Sun Oct 14 21:29:05 2012
A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.

 /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py in _HandleRequest(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>)
   2952         outfile = cStringIO.StringIO()
   2953         try:
=> 2954           self._Dispatch(dispatcher, self.rfile, outfile, env_dict)
   2955         finally:
   2956           self.module_manager.UpdateModuleFileModificationTimes()
self = <google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>, self._Dispatch = <bound method DevAppServerRequestHandler._Dispat...v_appserver.DevAppServerRequestHandler instance>>, dispatcher = <google.appengine.tools.dev_appserver.MatcherDispatcher object>, self.rfile = <socket._fileobject object>, outfile = <cStringIO.StringO object>, env_dict = {'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'C1DFD96E', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.2', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...}
 /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py in _Dispatch(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>, dispatcher=<google.appengine.tools.dev_appserver.MatcherDispatcher object>, socket_infile=<socket._fileobject object>, outfile=<cStringIO.StringO object>, env_dict={'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'C1DFD96E', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.2', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...})
   2822           dispatcher.Dispatch(app_server_request,
   2823                               outfile,
=> 2824                               base_env_dict=env_dict)
   2825         finally:
   2826           request_file.close()
base_env_dict undefined, env_dict = {'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'C1DFD96E', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.2', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...}
 /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.MatcherDispatcher object>, request=<AppServerRequest relative_url: / path: _go_app ...p', mode 'rb' at 0x106afb030> force_admin: False>, outfile=<cStringIO.StringO object>, base_env_dict={'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'C1DFD96E', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.2', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...})
    705         forward_request = dispatcher.Dispatch(request,
    706                                               outfile,
=>  707                                               base_env_dict=base_env_dict)
    708 
    709         while forward_request:
base_env_dict = {'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'C1DFD96E', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.2', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...}
 /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.CGIDispatcher object>, request=<AppServerRequest relative_url: / path: _go_app ...p', mode 'rb' at 0x106afb030> force_admin: False>, outfile=<cStringIO.StringO object>, base_env_dict={'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'C1DFD96E', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.2', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...})
   1770                      memory_file,
   1771                      outfile,
=> 1772                      self._module_dict)
   1773     finally:
   1774       logging.root.level = before_level
self = <google.appengine.tools.dev_appserver.CGIDispatcher object>, self._module_dict = {'codecs': <module 'codecs' from '/System/Library/Framework...framework/Versions/2.7/lib/python2.7/codecs.pyc'>, 'email': <module 'email' from '/System/Library/Frameworks...k/Versions/2.7/lib/python2.7/email/__init__.pyc'>, 'email.Charset': <email.LazyImporter object>, 'email.Encoders': <email.LazyImporter object>, 'email.Errors': <email.LazyImporter object>, 'email.FeedParser': <email.LazyImporter object>, 'email.Generator': <email.LazyImporter object>, 'email.Header': <email.LazyImporter object>, 'email.Iterators': <email.LazyImporter object>, 'email.MIMEAudio': <email.LazyImporter object>, ...}
 /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py in ExecuteCGI(config=<AppInfoExternal version=1 source_lang...e=None runtime=go api_config=None >, root_path='/Users/dereketnyre/myapp', handler_path='_go_app', cgi_path='/Users/dereketnyre/myapp/_go_app', env={'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_LANGUAGE': 'en-us', ...}, infile=<cStringIO.StringO object>, outfile=<cStringIO.StringO object>, module_dict={'codecs': <module 'codecs' from '/System/Library/Framework...framework/Versions/2.7/lib/python2.7/codecs.pyc'>, 'email': <module 'email' from '/System/Library/Frameworks...k/Versions/2.7/lib/python2.7/email/__init__.pyc'>, 'email.Charset': <email.LazyImporter object>, 'email.Encoders': <email.LazyImporter object>, 'email.Errors': <email.LazyImporter object>, 'email.FeedParser': <email.LazyImporter object>, 'email.Generator': <email.LazyImporter object>, 'email.Header': <email.LazyImporter object>, 'email.Iterators': <email.LazyImporter object>, 'email.MIMEAudio': <email.LazyImporter object>, ...}, exec_script=<function ExecuteOrImportScript>, exec_py27_handler=<function ExecutePy27Handler>)
   1588     from google.appengine.ext.go import execute_go_cgi
   1589     return execute_go_cgi(root_path, config, handler_path, cgi_path,
=> 1590         env, infile, outfile)
   1591 
   1592 
env = {'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_LANGUAGE': 'en-us', ...}, infile = <cStringIO.StringO object>, outfile = <cStringIO.StringO object>
 /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/go/__init__.py in execute_go_cgi(root_path='/Users/dereketnyre/myapp', config=<AppInfoExternal version=1 source_lang...e=None runtime=go api_config=None >, handler_path='_go_app', cgi_path='/Users/dereketnyre/myapp/_go_app', env={'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_LANGUAGE': 'en-us', ...}, infile=<cStringIO.StringO object>, outfile=<cStringIO.StringO object>)
    519     RAPI_HANDLER = handler.ApiCallHandler()
    520     GO_APP = GoApp(root_path)
=>  521   GO_APP.make_and_run(env)
    522 
    523 
global GO_APP = None, GO_APP.make_and_run undefined, env = {'APPENGINE_RUNTIME': 'go', 'APPLICATION_ID': 'dev~helloworld', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_LANGUAGE': 'en-us', ...}
<type 'exceptions.AttributeError'>: 'NoneType' object has no attribute 'make_and_run' 
      args = ("'NoneType' object has no attribute 'make_and_run'",) 
      message = "'NoneType' object has no attribute 'make_and_run'" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:54:19.433

扩展凯尔的答案，这就是我为使其正常工作所做的工作：

1.  下载 SDK
2.  将其解压缩到 /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine
3.  关闭（如果打开）GAE 启动器并重新运行它
4.  启动您的应用程序并在浏览器中打开它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T03:21:12.020

Go 使用与您安装的 python 版本不同的 SDK。请在此处下载：

[适用于 Go 的 Google App Engine SDK](https://developers.google.com/appengine/downloads#Google_App_Engine_SDK_for_Go)

确保`dev_appserver.py`在启动服务器时执行它的脚本。

# javascript - 序列化一个 javascript 对象

> ID：12885236
> 
> 赞同：0
> 
> 时间：2012-10-14T18:32:08.437
> 
> 标签：javascript, jquery, serialization

也许这是有史以来最愚蠢的问题，但不知何故我自己无法弄清楚。我有一个对象（javascript 对象），我想使用 jQuery ajax 将其传递给我的 PHP 脚本。当我尝试传入对象时，会引发错误，这可能是因为对象无法按原样传递，但必须进行序列化。

我已经尝试了几件事，例如`$(ui.item).serialize()`or`ui.item.serialize()`并将其直接传递给 PHP script `ui.item`。但这不起作用。

这是（子）代码。关于如何将对象序列化/传递`ui.item`给我的脚本的任何建议？

```
select: function(event, ui){
  $(this).autocomplete('close');
  $(this).val(ui.item.value);
  $.ajax({
    url:      ABS_BASE + 'ajax/ajax-search-set-location.php',
    data:     ui.item,
    dataType: 'json',
    type:     'POST',
    success:  function(result){ alert(result); return false; }              
  });       
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T18:33:56.360

JSON.stringify() 转换为 json 字符串。使用 php.ini 中的等效函数进行解码。

# json - 区别：Riak.mapValuesJson() 和 JSON.parse()

> ID：12885237
> 
> 赞同：0
> 
> 时间：2012-10-14T18:32:13.257
> 
> 标签：json, riak

我想知道 Riak.mapValuesJson() 和 JSON.parse() 之间是否有任何区别。我不知道 Riak.mapValuesJson() 所以在我的 Riak 数据库中的 map reduce 函数中，我一直使用 JSON.parse() 工作我不确定是否有额外的优化或内置 riak 版本中的东西如果 Riak.mapValuesJson() 是 JSON.parse() 的别名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:12:30.087

它使用 JSON.parse()

见：[https ://github.com/basho/riak_kv/blob/master/priv/mapred_builtins.js](https://github.com/basho/riak_kv/blob/master/priv/mapred_builtins.js)

```
mapValues: function(value, keyData, arg) {
  if (value["not_found"]) {
    return [value];
  }
  var data = value["values"][0]["data"];
  if (Riak.getClassName(data) !== "Array") {
    return [data];
  }
  else {
    return data;
  }},
mapValuesJson: function(value, keyData, arg) {
  if (value["not_found"]) {
    return [value];
  }
  var newValues = Riak.mapValues(value, keyData, arg);
  return newValues.map(function(nv) { return JSON.parse(nv); });
} 
```

编辑：

第一步是在 if 语句中确保对象有值，因为即使没有值，riak 也会返回一个对象，允许您设置一个值。

下一步是调用父对象并使用回调调用该方法以解析现在解码的 json 数据，它添加到 if 语句和初始化对象的两者之间不应该有任何主要的速度差异，但它确实使调用 map reduce 更容易，我会在较小的存储桶上使用它，而 JSON.pare() 在较大的存储桶上使用

# regex - 雅虎管道正则表达式修饰符

> ID：12885243
> 
> 赞同：2
> 
> 时间：2012-10-14T18:33:00.237
> 
> 标签：regex, yahoo-pipes

我在 Yahoo Pipes 上使用正则表达式匹配时遇到了麻烦，似乎他们不使用正常的 Perl 语法。

在以下屏幕截图中，“Test”完全匹配“Test”，而不是“test”，因此匹配区分大小写。如何使它不区分大小写？

![在此处输入图像描述](../Images/d5a93d08ea909a9be470371ee4d6d864.png)

```
/Test/i 
```

不工作）：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T18:42:54.553

我发现有所谓的“嵌入式修饰符”，所以

```
(?i)Test 
```

现在匹配 "test" 和 "Test" :-)

来源： [http ://discuss.pipes.yahoo.com/Message_Boards_for_Pipes/threadview?m=tm&bn=pip-DeveloperHelp&tid=891&mid=893&tof=-1&rt=2&frt=2&off=1](http://discuss.pipes.yahoo.com/Message_Boards_for_Pipes/threadview?m=tm&bn=pip-DeveloperHelp&tid=891&mid=893&tof=-1&rt=2&frt=2&off=1)

[http://perldoc.perl.org/perlre.html](http://perldoc.perl.org/perlre.html)

# ruby-on-rails - 使用 CanCan 通过父关联授权子对象

> ID：12885246
> 
> 赞同：4
> 
> 时间：2012-10-14T18:33:04.657
> 
> 标签：ruby-on-rails, ruby, authorization, cancan

我们可以根据父对象的关联来检查子对象的权限吗？

`Group`我在（父级）和之间`User`通过（关联）有一个多对多关联（参见下面`Membership`的关联）。我有一个`Event`属于 a`Group`和 a的（子）模型`User`。`Membership`有一个名为 的列`role`，这就是我想要建立权限的基础。

我想确保 a`user`只能创建 a`event`如果它`user`是属于`owner`的`group`那个`event`。`owner`我的意思是有`Membership.where(user_id: user, group_id: group, role: 'admin')`记录。

[文档在Accessing Parent in Ability](https://github.com/ryanb/cancan/wiki/Nested-Resources)下提到了这一点，但他们没有提到通过关联。

```
# in Ability
can :manage, Task, :project => { :user_id => user.id } 
```

将该示例转换为我的用例：

```
# in Ability
can :create, Event, :group => { group.owner == user } 
```

我已经有一个 group.owner 设置：

```
class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :group, inverse_of: :memberships
end

class User < ActiveRecord::Base
  has_many :memberships
  has_many :groups, through: :memberships

  has_many :ownerships, class_name: 'Membership', conditions: { role: 'admin' }
  has_many :owned_groups, through: :ownerships, source: :group

  has_many :events
end

class Group < ActiveRecord::Base
  has_many :memberships
  has_many :users, through: :memberships

  has_one :ownership, class_name: 'Membership', conditions: { role: 'admin' }
  has_one :owner, through: :ownership, source: :user

  has_many :events
end

class Event < ActiveRecord::Base
  belongs_to :organizer, class_name: 'User', foreign_key: 'user_id'
  belongs_to :group
end 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:53:37.223

听起来您的许可应该基于组：

```
can :create_events, Group, owner_id: user.id 
```

您是否为组和事件使用嵌套路由？

**编辑：**

```
can :create_events, Group, owner: { id: user.id } 
```

# java - 为什么 HttpUrlConnection 在移动数据连接上抛出 SSLException？

> ID：12885247
> 
> 赞同：18
> 
> 时间：2012-10-14T18:33:10.463
> 
> 标签：java, android, ssl, android-networking

在使用 Android 的`HttpUrlConnection`库发出 HTTPS 请求时，我有时会看到以下异常被抛出：

```
javax.net.ssl.SSLException: SSL handshake aborted: ssl=0x5c1b18a0: I/O error during system call, Connection reset by peer
at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:395)
... 
```

在深入研究这个问题后，我了解到

*   在wifi上一切正常
*   仅当设备处于移动数据连接时才会引发异常
*   在首先通过 wifi 进行 HTTPS 后，通过移动数据连接往往可以正常工作一段时间
*   该问题似乎发生在少数特定的移动运营商上

会发生什么？某些移动运营商是否会干扰 HTTPS 流量？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-14T18:33:10.463

**简短的回答**：

事实证明，一些移动运营商将为 DNS 查找返回一个 IP 地址，该地址本应因不存在而失败。应用程序连接的服务器有时会无法解析，运营商会尝试通过提供类似网站的页面来提供帮助。

* * *

**更长的答案**：

我的应用程序连接到的服务器的主机名有时无法解析。这通常会抛出一个`UnknownHostException`指示 DNS 故障。我希望这种情况偶尔会发生，应用程序会处理它。这`SSLException`是一个异常现象。

在拦截失败的 DNS 查找的运营商上，将 Web 浏览器导航到不存在的主机将显示“搜索结果”页面，旨在帮助您找到所需内容。（一些 DLS/有线 ISP 也这样做。）但是，对于发出 HTTPS 请求的应用程序，这会破坏 SSL 握手，因为远程主机与应用程序所期望的不同。

根本原因是一个行为不端的 DNS 服务器，它会为我的应用程序正在使用的其中一个服务器返回一个不存在的主机错误。通过 wifi 连接似乎更可靠（由于同一 DNS 服务器的另一个怪癖）。通过 wifi 连接将允许缓存 DNS 条目，从而在我们随后通过移动数据连接进行连接时暂时掩盖问题。但是，大多数情况下，移动运营商会拦截失败的 DNS 查找并将我们重定向到意外的主机名，从而导致 SSL 握手失败。

# python - Python - 在 Control+C 上杀死多个线程

> ID：12885252
> 
> 赞同：1
> 
> 时间：2012-10-14T18:33:33.140
> 
> 标签：python

我究竟做错了什么 ？

我只需要在 Control+C 上杀死两个线程。

```
def cleanup_stop_thread():
    for thread in enumerate():
        if thread.isAlive():
            try:
                self._Thread__stop()
            except:
                print(str(thread.getName()) + ' could not be terminated')

if __name__ == '__main__':  
    try:
        threading.Thread(target = record).start()
        threading.Thread(target = ftp).start()
    except (KeyboardInterrupt, SystemExit):
        cleanup_stop_thread();
        sys.exit() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T18:39:26.557

与其尝试在 Ctrl+C 上杀死它们，不如让它们成为守护线程？然后当主线程死亡时它们会自动退出。

```
t1 = threading.Thread(target=record)
t1.daemon = True
t1.start()

t2 = threading.Thread(target=ftp)
t2.daemon = True
t2.start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:46:25.983

如果您想在键入 CTRL+C 时终止所有线程，只需添加一个 try 块并导入 os 并在您想要终止所有内容时执行 os._exit(0) 还检查 atexit 模块

希望它有所帮助:)

# r - R grep 由特殊字符分隔的整个单词

> ID：12885257
> 
> 赞同：1
> 
> 时间：2012-10-14T18:34:11.130
> 
> 标签：r, regex

假设有一个形式为`"foo"`or的序列向量`"foo|baz|bar"`（一个单词或多个单词，由特殊字符 like 分隔`"|"`），并且我们还给定了一个单词，我们想找出它与向量的哪些项目与**整个单词**匹配。

例如，单词`"foo"`在 中有一个完整的匹配项，但在or`"foo|baz|bar"`中没有一个完整的匹配项。`"foobaz|bar"``"bazfoo"`

首先，我尝试使用`"\\b"`它来指示整个单词的开始或结束边缘，并且它成功地工作：

```
grep("\\bfoo\\b", "foo")         # match
grep("\\bfoo\\b", "foobaz|bar")  # mismatch    
grep("\\bfoo\\b", "bazfoo")      # mismatch 
```

然后我尝试添加`"|"`作为两端的另一个可能的分隔符，并`"\\b"`使用`[`and将其分组`]`：

```
grep("[|\\b]foo[|\\b]", "foo|baz|bar")  # mismatch!
grep("[|\\b]foo[|\\b]", "foo")          # mismatch! 
```

后来我发现`\\b`不是字符串的*开头*或*结尾*`,|-^.`的指示符，而是整个单词的开头或结尾（很多字符，如空格而**不是**数字和下划线`_`分隔整个单词）。所以`"[|\\b]foo[|\\b]"`匹配所有这些字符串：`"foo", "foo|bar|baz", "foo-bar", "baz foo|bar"`但不匹配`"foo_bar"`or `"foo2"`。

但我的问题仍然存在：为什么`"[|\\b]foo[|\\b]"`模式无法匹配`"foo"`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:37:44.503

你可以使用`strplit`：

```
> "foo" %in% unlist(strsplit("foo|baz|bar", split = "|", fixed = TRUE))
[1] TRUE 
```

您可以对其进行矢量化：

```
> z <- c("foo|baz|bar", "foobaz|bar", "bazfoo")
> x <- c("foo", "foot")
> sapply(strsplit(z, split = "|", fixed = TRUE), function(x,y)y %in% x, x)
      [,1]  [,2]  [,3]
[1,]  TRUE FALSE FALSE
[2,] FALSE FALSE FALSE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T19:00:47.820

\b 匹配以下位置

1.  在字符串的第一个字符之前，如果第一个字符是单词字符。
2.  在字符串的最后一个字符之后，如果最后一个字符是单词字符。
3.  在字符串中的两个字符之间，其中一个是单词字符，另一个不是单词字符。（单词字符是a-zA-Z1-9_）

自从 | 代表正则表达式中的交替运算符，您将不得不对其进行转义。

所以正则表达式`\bfoo\b`会匹配`foo`，`foo|bar`因为 | 是一个非单词字符。无需使用字符集`[\b\|]`

编辑：正如弗洛德尔在 \b 下面指出的，字符集中代表退格字符。所以它会匹配 | 在 [\b\|] 而不是单词边界内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:40:36.207

由于`|`在正则表达式中具有特殊含义，因此您需要对其进行转义，即使用`\\|`：

```
ptn <- "\\bfoo[\\|\\b]"

grep(ptn, "foo|baz|bar") 
[1] 1

grep(ptn, "foo")          
integer(0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:50:17.260

这也可以：

```
gregexpr("foo|", "foo|baz|bar", fixed = TRUE)[[c(1, 1)]] > 0
gregexpr("foo|", "foobaz|bar", fixed = TRUE)[[c(1, 1)]] > 0    
gregexpr("foo|", "bazfoo", fixed = TRUE)[[c(1, 1)]] > 0 
```

这种方法的不同之处在于您可以利用您提供的间距选项`gregexpr`来查找由两个单词组成的单词：

```
gregexpr("foo|", "baz foo|", fixed = TRUE)[[c(1, 1)]] > 0 
gregexpr("  foo|", "baz foo|", fixed = TRUE)[[c(1, 1)]] > 0 
```

# matlab - 在循环中使用计时器

> ID：12885258
> 
> 赞同：1
> 
> 时间：2012-10-14T18:34:12.693
> 
> 标签：matlab, user-interface, timer, error-handling, matlab-guide

我的 GUI 的目的是显示图像并获得用户的响应：按键（E 或 I）或无响应。在图像本身之间应该有 3 秒的暂停显示一些文本（`a7 UIcontrol`在我的代码中）。问题是我需要做 30 次，所以我使用了一个带有计时器的循环。但是图形用户界面效果不佳..

它应该执行以下操作：

```
for 30 times do
    2 sec showing text (a7)
    then showing an image for 3 sec or until I\E are pressed
end 
```

这是我的代码；我要添加两个版本，因为它们的主要区别在于 TIMER 功能和属性。

[https://docs.google.com/document/d/1N6LSDAYo_DVrBCUbuPth4JPCvkI3pBNcnAZcV6Kl9wM/编辑](https://docs.google.com/document/d/1N6LSDAYo_DVrBCUbuPth4JPCvkI3pBNcnAZcV6Kl9wM/edit)
更易读的版本： http: [//pastebin.com/vd3HNGv1](http://pastebin.com/vd3HNGv1)

照片在这里（尽管您可以使用任何 2 张照片）：[https ://picasaweb.google.com/alex.goltser/ScrapbookPhotos](https://picasaweb.google.com/alex.goltser/ScrapbookPhotos)

起初问题总是一个错误：

> 您尝试在计时器工作时启动它

但现在它是另一回事..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:48:29.417

为什么要运行计时器功能？

这是运行循环的另一种方式：

```
for repeat = 1:30

    *show text*
    drawnow %# to make sure the graphics are updated
    pause(2) %# wait two seconds

    *show image*
    drawnow
    t = tic;
    done = false;
    while ~done && toc(t)<3 %# checks for keypress or until 3 secs
       *check for keypress*
       if E/I key has been pressed
          done = true;
       end
    end
end %# repeat 30x 
```

# windows - Win32 C++ - 恢复窗口时做某事，哪个消息？

> ID：12885264
> 
> 赞同：4
> 
> 时间：2012-10-14T18:34:54.360
> 
> 标签：windows, winapi

所以，我有一个使用纯 WinAPI 的基于对话框的应用程序。有一个主对话框，然后是工具窗口的多个其他对话框。这些工具窗口旨在自由浮动，用户可以拖动、隐藏和显示它们，但它们没有任务栏条目。这是我的意图，但问题是，当我从主窗口切换到不同的应用程序时，然后单击主窗口的任务栏条目，主窗口会显示，但工具窗口不会。它们隐藏在主窗口后面，有时隐藏在其他应用程序的窗口后面，在您移动所有最顶层的窗口并找到工具窗口之前，您无法使用它们。

所以，我试图解决这个问题的是，当用户从最小化恢复窗口时，我想枚举所有工具窗口并将它们带到前面，也许通过调用`SetActiveWindow()`.

但是当窗口恢复时会发送什么消息？我在想 WM_SHOW 或 WM_RESTORE，但它们不存在。

另一个问题，如果您回答这个问题，第一个问题是无关紧要的，因为我将不再需要使用该解决方法：有没有更好的方法将所有工具窗口放在前面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T18:41:36.417

为工具窗口赋予`WS_POPUP`样式（而*不是* `WS_OVERLAPPED`），并使主窗口成为其父窗口（严格来说它是它们的所有者窗口）。这样工具窗口将保留在主窗口的顶部。这可能（也可能不是）是您想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T18:40:43.247

对这个问题的天真回答是倾听[`WM_SIZE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646.aspx)并回应`wParam`.`SIZE_RESTORED`

另一个明显的可能性是使所有工具窗口都归主窗口所有。只要您对工具窗口始终位于主窗口顶部感到满意，这将解决您的问题。拥有的窗口在所有者最小化时将被隐藏，并在所有者恢复时重新显示。

[在有关窗口功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx)的 MSDN 主题中了解有关所有权的更多信息。

# javascript - Rails：使用 ajax 填充引导下拉列表

> ID：12885265
> 
> 赞同：8
> 
> 时间：2012-10-14T18:35:30.897
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, twitter-bootstrap

我目前有一个显示通知的下拉菜单

```
<li class="notifications dropdown"> 
  <a class="dropdown-toggle" id="dLabel" role="button" data-remote="true" data-toggle="dropdown" data-target="#" href="/notifications"><i class="icon-user"></i> Notifications</a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
  </ul>
</li> 
```

ul 下拉列表是空的，但是单击链接时，我想用 rails 中的数据填充菜单。

我目前在 notifications.js.erb 中有这个

```
$(".nav li.notifications .dropdown-menu").remove();
$(".nav li.notifications").append("<%= escape_javascript(render('users/notifications', notifications: @notifications)) %>"); 
```

通常我会将下拉链接设置为远程，但由于我使用的是引导程序的下拉列表，因此不会向 notification.js.erb 发送请求。我怎样才能在那里手动调用代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:47:59.570

我会添加 JavaScript 代码来进行调用：

```
$(document).ready(function() {
    $('#dLabel').click(function() {
        // Only call notifications when opening the dropdown
        if(!$(this).hasClass('open')) {
           $.ajax({
              type: "GET",
              url: "/notifications",
              async: false,
              dataType: "script"
           });
        }
    });
}); 
```

您也可以使其异步并暂时将加载图标放入菜单中...

# ios - 无法加载网页并出现错误：在此服务器上找不到请求的 URL

> ID：12885267
> 
> 赞同：5
> 
> 时间：2012-10-14T18:35:37.353
> 
> 标签：ios, iphone, xcode, cordova

我的 PhoneGap 应用程序遇到一个奇怪的错误：每次运行模拟器（或手机上的测试部署应用程序）时，我都会收到错误消息

```
Failed to load webpage with error: The requested URL was not found on this server. 
```

每次我运行模拟器时它都能正常工作。自从我第一次部署我的应用程序以来，这种情况就一直在发生。我当时没有使用任何插件，但从那以后我一直在尝试让 Facebook iOS SDK 工作，这可能不相关，但我的应用程序实际成功启动的时间，我无法点击任何事物。

神救救我。

这*是*我第一次构建 iOS 应用程序，所以这可能是一个新手错误 - 在此之前我的应用程序只是一个移动网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T14:34:20.817

我刚遇到这个问题。网址区分大小写。所以如果你有`Login.html`文件名，它不应该`login.html`在代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:57:14.090

这是导致此问题的 javascript 重定向。不惜一切代价避免`window.location = ???`在PhoneGap中使用初始页面加载:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:28:11.357

`kill -9 ps ax | grep Simulator | grep -v grep | awk '{print $1}'`

在终端上试试这条线，然后运行。可能模拟器有问题，会解决的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T19:19:18.953

我遇到过同样的问题。然而，这是一个不同的原因。

我们有一个使用干净 url 的 webapp。我们使用 htaccess 来自动检查 .html。这样，我们在代码/网址中的链接只是 myapp.com/page1 vs myapp.com/page1.html

当我开始探索港口到 phonegap 时，这让我头疼了大约一个小时。什么都行不通。我是phonegap的新手，所以我不确定它是什么。我做了白名单、外部主机等。然后我意识到我在 phonegap 目录中没有 htaccess 文件，我需要完整的链接。

我知道它的具体。但是对于它的价值，你有它。

# php - 如果 CakePHP 放弃对 JS/AJAX 引擎的支持，它的性能会不会有好处？

> ID：12885270
> 
> 赞同：0
> 
> 时间：2012-10-14T18:35:52.863
> 
> 标签：php, performance, cakephp

我的主要问题：

**如果完全从核心中删除对 JS 助手的支持，是否会对 CakePHP 的性能（即更快的视图渲染）产生任何实际影响？**

我的推理：

现在，CakePHP 有一些类允许程序员使用 PHP 创建基本的客户端代码，包括效果和 AJAX 请求。

与 View 对象存在一些耦合，这可能会降低性能。

考虑到很多框架正在转向 RESTful 模型，通常很难跟上客户端框架的变化，同时将它们与服务器端框架耦合，比如 CakePHP。

我想知道是否值得放弃对 JS/AJAX 的支持并专注于 PHP 框架模式。当然，我们失去了通过帮助程序编写一些 JS 代码的能力，但在我看来，最好还是留给 JS 框架。

好处是减少耦合，减轻重量，并可能提高性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T18:39:43.990

JsHelper 无论如何都会从 3.0 的核心中删除 :) 我怀疑是否有任何重大的性能增强。做出这个决定的主要原因是生成 js 代码的 php 包装函数的功能非常有限，迟早你会发现它阻碍了你的开发，而不是加速开发。所以决定去掉 JsHelper 并减少维护的代码。

# css - 如何将一种颜色变成另一种颜色？

> ID：12885275
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:36:45.107
> 
> 标签：css, styles

RGBA(255, 0, 0, 1); // 红色的

rgba(0, 255, 0, 1); // 刚刚变成红绿

你会怎么转 rgba(154, 155, 235); （一种浅紫蓝色）变成同一种颜色只有橙色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:42:32.293

你的问题很令人困惑（也仅供参考，你`rgba`在上一个例子中也误用了，但你在其他地方正确使用了它，所以这可能只是一个疏忽）但我假设你想保持颜色的亮度和饱和度并修改色调。要做到这一点，请`hsl`改为

```
hsl(239, 67%, 76%) 
```

相当于

```
rgb(154, 155, 235) 
```

所以通过使用`hsl`你现在可以改变色调

```
hsl(239, 67%, 76%)

hsl(14, 67%, 76%)

hsl(167, 67%, 76%)

hsl(0, 67%, 76%) 
```

您可以`hsl`在任何使用普通十六进制颜色或`rgba`颜色的地方使用。

有关示例，请参见[http://jsfiddle.net/a7pGB/](http://jsfiddle.net/a7pGB/)

# android - 在 HTTP 请求期间触发 Android 中的桌面网页

> ID：12885282
> 
> 赞同：0
> 
> 时间：2012-10-14T18:37:55.233
> 
> 标签：android, http, post, httpclient, google-docs

我正在尝试从我的手机在 Android 中将数据发布到 Google 文档，但是每当我发送请求时，我都会返回一个奇怪的 html（不是错误）页面。

如果我将在设备上生成的相同 url 复制/粘贴到我的桌面浏览器中，它就可以正常工作（我使用的是 Postman，所以它不是 Post/Get 动词错误）。

我的猜测是 Google 文档将我的设备识别为 Android 设备并将我的请求重定向到 Android google 文档页面。有什么办法可以阻止这种情况发生？

这是我的代码：

```
HttpClient httpclient = new DefaultHttpClient();

        try {
              HttpPost httppost = new HttpPost("https://docs.google.com/macros/exec?" +
                    "service=..." +
                    "&Param1=" + java.net.URLEncoder.encode(param1, "ISO-8859-1"));

              Log.v("Request", httppost.getURI().toString());

              InputStream localInputStream = httpclient.execute(httppost).getEntity().getContent();
              byte bytes[] = new byte[20000];
              localInputStream.read(bytes);

              Log.e("LOG", new String(bytes));

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        } 
```

这是我返回的页面：

```
10-14 14:27:39.749: E/html(15814): <!DOCTYPE html>
10-14 14:27:39.749: E/html(15814): <html lang="en">
10-14 14:27:39.749: E/html(15814):   <head>
10-14 14:27:39.749: E/html(15814):   <meta charset="utf-8">
10-14 14:27:39.749: E/html(15814):   <title>Welcome to Google Docs</title>
10-14 14:27:39.749: E/html(15814): <style type="text/css">
10-14 14:27:39.749: E/html(15814):   html, body, div, h1, h2, h3, h4, h5, h6, p, img, dl,
10-14 14:27:39.749: E/html(15814):   dt, dd, ol, ul, li, table, tr, td, form, object, embed,
10-14 14:27:39.749: E/html(15814):   article, aside, canvas, command, details, fieldset,
10-14 14:27:39.749: E/html(15814):   figcaption, figure, footer, group, header, hgroup, legend,
10-14 14:27:39.749: E/html(15814):   mark, menu, meter, nav, output, progress, section, summary,
10-14 14:27:39.749: E/html(15814):   time, audio, video {
10-14 14:27:39.749: E/html(15814):   margin: 0;
10-14 14:27:39.749: E/html(15814):   padding: 0;
10-14 14:27:39.749: E/html(15814):   border: 0;
10-14 14:27:39.749: E/html(15814):   }
10-14 14:27:39.749: E/html(15814):   article, aside, details, figcaption, figure, footer,
10-14 14:27:39.749: E/html(15814):   header, hgroup, menu, nav, section {
10-14 14:27:39.749: E/html(15814):   display: block;
10-14 14:27:39.749: E/html(15814):   }
10-14 14:27:39.749: E/html(15814):   html {
10-14 14:27:39.749: E/html(15814):   font: 81.25% arial, helvetica, sans-serif;
10-14 14:27:39.749: E/html(15814):   background: #fff;
10-14 14:27:39.749: E/html(15814):   color: #333;
10-14 14:27:39.749: E/html(15814):   line-height: 1;
10-14 14:27:39.749: E/html(15814):   direction: ltr;
10-14 14:27:39.749: E/html(15814):   }

... and so on. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:50:11.503

我猜他们通过用户代理字符串确定它是否是电话。找到适合您的浏览器的用户代理，然后使用以下链接进行更改。

[更改用户代理](https://stackoverflow.com/questions/2529682/setting-user-agent-of-a-java-urlconnection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:06:33.747

所以问题在于权限，而不是用户代理。我设置了对任何人的访问权限，但没有设置“任何人，甚至是匿名的”。

# java - 使用正则表达式匹配多个组的惰性（不贪婪）

> ID：12885283
> 
> 赞同：10
> 
> 时间：2012-10-14T18:37:59.070
> 
> 标签：java, php, ruby, regex, perl

我想获取`<tag></tag>`标签对之间任何值的内容。

```
<tag>
This is one block of text
</tag>

<tag>
This is another one
</tag> 
```

我想出的正则表达式是

`/<tag>(.*)</tag>/m`

但是，它似乎很贪婪，并且会捕获括号内的所有内容，直到最后一个`</tag>`. 我希望它尽可能地懒惰，以便每次看到结束标签时，它都会将其视为匹配组并重新开始。

如何编写正则表达式，以便能够在给定场景中获得多个匹配项？

我在以下链接中包含了我所描述的示例

[http://rubular.com/r/JW5M3rnqIE](http://rubular.com/r/JW5M3rnqIE)

注意：这不是 XML，也不是真正基于任何现有的标准格式。我不需要任何复杂的东西，比如带有漂亮解析器的成熟库。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T18:39:15.857

使用正则表达式模式：

```
/<tag>(.*?)<\/tag>/im 
```

懒惰（非贪婪）是`.*?`，不是`.*`。

要查找多个匹配项，请使用：

```
string.scan(/<tag>(.*?)<\/tag>/im) 
```

# c# - 控制器的动作参数不接受 /

> ID：12885287
> 
> 赞同：0
> 
> 时间：2012-10-14T18:38:49.793
> 
> 标签：c#, asp.net-mvc, routes

我有控制器的动作

```
 public string Index(string id)
    {
        return id;
    } 
```

我在 Global.asax.cs 中只有这条路线

```
routes.MapRoute(
            "Default", 
            "{id}", 
            new { controller = "Start", action = "Index", id = UrlParameter.Optional }              
        ); 
```

对于像“http://localhost/stuff”和“http://localhost/hello”这样的网址，它可以工作。但它不适用于像“http://localhost/stuff/add”这样的 url。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:19:09.497

在 id 前添加通配符（星号）：

```
 routes.MapRoute(
            "Default",
            "{*id}",
            new {controller = "Start", action = "Index", id = UrlParameter.Optional}
            ); 
```

# c# - 如何为我的应用程序设置默认浏览器？

> ID：12885288
> 
> 赞同：3
> 
> 时间：2012-10-14T18:38:59.087
> 
> 标签：c#, wpf, http, registry, default-browser

我制作了一个程序来处理 http 链接。如何将默认浏览器设置为我的 exe？我只需要更改 http 协议，而不是文件关联。我已经设置了命令行参数处理。我不想使用 .reg 文件，因为它要求用户添加密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:12:07.570

您可以在静默模式 ("/S") 下运行 regedit。

或者运行 cmd 脚本：

```
reg add HKEY_CLASSES_ROOT\http\shell\open\command /ve /d "path\to\app \"%1\"" /f 
```

（对于已注册的 http 处理程序 - 覆盖 "\shell\open\command" 键中现有的空参数）。

**更新**您还可以根据[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/dd203067%28v=vs.85%29.aspx)尝试使用默认浏览器 (HKEY_CURRENT_USER\SOFTWARE\Clients\StartMenuInternet) 。但是您也可以处理本地文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T20:33:43.360

@TomTom 抱歉，我没有足够的代表发表评论。;)

仅仅因为 Firefox 和其他几个浏览器很受欢迎并不意味着它在某种程度上是“特殊的”，因为它可以询问您是否要更改设置。定制应用程序没有理由不能做到这一点。

@msbg，既然您在那里发表评论，您可能已经找到了[如何使用 c# 或批处理文件更改默认浏览器的答案](https://stackoverflow.com/questions/968449/how-do-i-change-default-browser-using-c-sharp-or-batch-file)

How to find all the browsers installed on a machine which is the other answer at [How to find all the browsers installed on a machine](https://stackoverflow.com/questions/2370732/how-to-find-all-the-browsers-installed-on-a-machine) which is refer to [http://msdn.microsoft.com/en-us/library/dd203067%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd203067%28VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:57:41.737

你不。这不是程序特定的设置，它是系统范围的。

您可以做的是启动一个特定的 exe（浏览）并将其 URL 作为参数。但总的来说，对不起，这是一个系统级设置（甚至不是用户）iirc。

# r - 因子（）中未指定的水平

> ID：12885289
> 
> 赞同：4
> 
> 时间：2012-10-14T18:39:13.347
> 
> 标签：r, na, r-factor

我正在使用 R 中带有代码簿的数据集，它基本上告诉我因子变量的不同级别的标签应该是什么。例如，使用密码本，我可以看到在我的“性别”变量中，0 是“女性”，1 是“男性”。我正在使用这些信息来相应地标记变量中的值。

然而，令我沮丧的是，我最近发现密码本并不完整。例如，对于一个变量，它告诉我 1 是“是”，2 是“否”，但没有告诉我 7、8 和 9 是什么，我可以在数据中看到。我想做的是按如下方式标记这个变量（或类似的东西）：

```
data$variable <- factor(data$variable,
                        levels=c(1, 2, 7, 8, 9),
                        labels=c("Yes", "No", "7", "8", "9")) 
```

基本上，我希望所有未在密码本中指定的级别都被标记为它们自己。我遇到的问题是这个密码本缺少很多这些，我真的不想手动查看我的数据中的所有未定义值来构造上述代码的永远变量。另外，如果我只是省略了那些缺失的级别，R 会自动将它们标记为“NA”，这是我不想要的。

摘要：我试图弄清楚如何使用因子（），而不是将所有未指定的级别标记为“NA”，而是将它们标记为它们自己。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T18:48:50.757

您可以在创建一个因子后转换级别，以便我们可以利用它来发挥我们的优势。

```
mydat <- c(1, 2, 3,2,3,4,3,2,1,2,4,4,6,5,7,8,9)
# convert to factor ignoring code book
dat <- factor(mydat)
# Create map corresponding to codebook levels
mymap <- c("1" = "Yes", "2" = "No")
# Figure out which levels are accounted for by codebook
id <- levels(dat) %in% names(mymap)
# Convert to appropriate values
levels(dat)[id] <- mymap[levels(dat)[id]] 
```

或者（可能更容易一些）

```
# alternatively we can construct the map if we have two vectors
# of the value and the codebook value
val <- c(1, 2)
lev <- c("Yes", "No")

dat <- factor(mydat)
levels(dat)[val] <- lev 
```

# android - 使用sqlite3在android中创建数据库的问题

> ID：12885292
> 
> 赞同：0
> 
> 时间：2012-10-14T18:39:19.943
> 
> 标签：android, database, android-sqlite

我正在使用 sqlite3 使用 SQLiteOpenHelper 类创建数据库，但无法创建数据库。使用的代码如下：

```
public class ABCHelper extends SQLiteOpenHelper {

public static final String TABLE_COMMENTS = "comments";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_COMMENT = "comment2";

private static final String DATABASE_NAME = "commments.db";
private static final int DATABASE_VERSION = 1;

// Database creation sql statement
private static final String DATABASE_CREATE = "create table "
        + TABLE_COMMENTS + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_COMMENT
        + " text not null);";

public ABCHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
    Log.d("EventsData", "onCreate: " + DATABASE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(ABCHelper.class.getName(), "Upgrading database from version "
            + oldVersion + " to " + newVersion
            + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COMMENTS);
    onCreate(db);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:00:58.023

如果您将 'text' 更改为 VARCHAR(255) 怎么办？

# c++ - C ++将数组参数传递给函数

> ID：12885293
> 
> 赞同：0
> 
> 时间：2012-10-14T18:39:24.137
> 
> 标签：c++, arrays, pointers, multidimensional-array

我想将一个数组的引用从一个对象`GameModel`传递给另一个对象`PersonModel`，存储引用，然后在 PersonModel 中使用这个数组，就像在 GameModel 中一样，但是......

我对传递数组过程有一个可怕的误解：在类中`PersonModel`，我想在构造函数中通过引用传递数组（参见下面的代码块）。但是标记的行会引发编译错误

```
 PersonModel::PersonModel( int path[FieldSize::HEIGHT][FieldSize::WIDTH], int permissionLevel ) { 
        this->path = path; //<------ ERROR here:
        //PersonModel.cpp:14:22: error: incompatible types in assignment of 'int (*)[30]' to 'int [31][30]'

        this->permissionLevel = permissionLevel;
    } 
```

这是头文件`PersonModel.h`

```
#ifndef PERSON_MODEL
#define PERSON_MODEL

#include "data/FieldSize.h"

namespace game{
    class IntPosition;
    class MotionDirection;

    class PersonModel {
        protected:
        int path[FieldSize::HEIGHT][FieldSize::WIDTH];
        int permissionLevel;

        public:
        PersonModel( int path[FieldSize::HEIGHT][FieldSize::WIDTH], int permissionLevel );
        void setMotionDirection ( MotionDirection* md);
        void step(long time);
        void reset(long time);
    };
}

#endif 
```

正如我现在所看到的，我可以将`int path[FieldSize::HEIGHT][FieldSize::WIDTH];`声明更改为，`int (*path)[FieldSize::WIDTH];`但它更加混乱。

帮助我理解这个主题：将传递的引用存储到数组以供以后使用的正确方法是什么，就像通常的二维数组一样。

**更新：**

该数组是由位掩码表示的游戏字段图块属性的映射，因此它实际上是只读的。类的所有封装对象都`GameModel`应该读取这个数组，但我绝对不想复制它或添加一些额外的功能。

没有框架，只有裸 Android-NDK。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:12:40.877

我认为您已经陷入了相信某人告诉您“C 中的数组和指针是相同的”的经典陷阱。

我要做的第一件事是为数组定义一个类型：

```
typedef int PathArray[FieldSize::HEIGHT][FieldSize::WIDTH]; 
```

然后，您无需担心对整数数组的引用与对整数的引用数组之间的混淆。

然后，您的 PersonModel 包含对其中之一的*引用*。

```
PathArray &path; 
```

并且，因为它是一个引用，所以它必须在构造函数初始化列表中进行初始化，而不是在构造函数体中。

```
 PersonModel::PersonModel( PathArray &aPath, int aPermissionLevel ) :
   path(aPath),
   permissionLevel(aPermissionLevel)
 {
 } 
```

当然，持有这样的引用有点吓人，因此您可能需要考虑使用 boost::shared_ptr 或类似的东西来使生命周期管理更加健壮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T18:46:55.153

1.  不能像在 C++ 中使用值类型那样分配数组
2.  int path[x][y] 解析为 int (*)[y] 类型

可能的解决方案是：

1.  使用 memcpy/复制
2.  使用 std::array

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T23:31:33.493

数组的名称是第一个元素上的指针，所以，你可以试试

```
PersonModel( int (*path)[FieldSize::HEIGHT][FieldSize::WIDTH], int permissionLevel ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:43:09.350

您不能分配给这样的数组。但是，您可以使用数组是一个连续的内存区域这一事实，即使有一个数组数组，也可以使用例如`memcpy`复制数组：

```
memcpy(this->path, path, FieldSize::HEIGHT * FieldSize::WIDTH * sizeof(int)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T21:56:57.870

您必须将指针传递给二维数组，因为您不能像代码片段中所述那样传递数组。我建议使用 STL 数组类型。诚然 std::array 是 C++ '11 标准，因此旧编译器可能不支持它。您也可以使用已经存在较长时间的矢量。

```
vector<vector<int>>path; 
```

您将不得不在构造函数中调整二维向量的大小。索引看起来有点滑稽：

```
path[1].[1] .... 
```

使用向量，您可以通过引用传递它。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-14T18:45:46.097

在 C++ 中，'=' 是为原始类型实现的`int`，`double`但不适用于数组（数组不是原始类型），所以你不应该使用 '=' 将数组分配给新数组，而应该使用一些东西`memcpy`来复制数组。`memcpy`将内存复制到另一个内存，因此您可以使用它将数组复制到另一个数组：

```
// memcpy( dst, src, size );
memcpy( this->path, path, FieldSize::HEIGHT * FieldSize * WEIGHT * sizeof(int) ); 
```

# eclipse - 如何通过eclipse在JUnit测试中使用persistence.xml和hibernate.cfg.xml？

> ID：12885295
> 
> 赞同：6
> 
> 时间：2012-10-14T18:39:25.270
> 
> 标签：eclipse, hibernate, jpa, junit, jpa-2.0

很长一段时间以来，我一直在寻找答案，然后才来到这里问这个问题。我的问题很简单：使用 JPA Entity Manager API 时无法运行任何 JUnit 测试。看来我的测试没有读取`persistence.xml`文件。

当我调用时`new Configuration().configure().buildSessionFactory()`，它就像一个魅力，但调用时抛出异常`Persistence.createEntityManagerFactory("myapp")`是：

> javax.persistence.PersistenceException：在 com.myapp.Test01 的 javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47) 的 javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69) 中没有名为 myapp 的 EntityManager 的持久性提供程序。 setUpBeforeClass(Test01.java:22)

我的 JavaSE 项目具有以下结构：

```
myapp
++src/main/java
   ++com.myapp.model
      ++// My entity classes are here
++src/test/java
   ++com.myapp
      ++Test01.java
++src/main/resources
  ++hibernate.cfg.xml
  ++META-INF 
    ++persistence.xml 
```

看起来`persistence.xml`像：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    version="2.0">
    <persistence-unit name="myapp" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.ejb.cfgfile" value="hibernate.cfg.xml"></property> 
        </properties>
    </persistence-unit>
</persistence> 
```

你知道如何解决这个问题吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T20:10:14.523

将配置放入`src/test/resources/META-INF`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T20:11:42.283

我的猜测是那`org.hibernate.ejb.HibernatePersistence`不在你的类路径上。那不在主要的 Hibernate jar 中，它在 hibernate-entitymanager 或类似的 jar 中。

在调用之前的代码中可以做几个快速的实验`Persistence.createEntityManagerFactory()`：

```
System.out.println(getClass().getResource("META-INF/persistence.xml")); 
```

和：

```
System.out.println(Class.forName("org.hibernate.ejb.HibernatePersistence")); 
```

检查 Eclipse 是否正在复制您的资源也是明智的；执行 Project > Clean，然后查看您的 Eclipse 构建输出目录以查看 persistence.xml 是否在您期望的位置。我有时会遇到 Eclipse 出于某种原因不复制资源的情况。

# jquery - 检查一行中所有文本框中的值

> ID：12885297
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:39:36.790
> 
> 标签：jquery

当我检查任何文本框在提供的行中是否有值或者它只检查第一个文本框时，我不断返回一个对象。如果任何文本框有值，我想将一行传递给 chkblock 函数并得到一个真正的返回。

提前感谢您的帮助，罗伊

你可以在这里看到整个事情：http: [//jsbin.com/igaror/1/edit](http://jsbin.com/igaror/1/edit)

```
 <html>
    <head>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <meta charset=utf-8 />
    <title>JS Bin</title>
    <!--[if IE]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
      article, aside, figure, footer, header, hgroup, 
      menu, nav, section { display: block; }
    </style>
    </head>
    <body>
      <table>
        <tr>
          <td><input type="checkbox" /><input id='1' class='name' type='hidden' value='test 1'/></td>
          <td><input type="text" class="room" value="44"/></td>
          <td><input type="text" class="room" /></td>
          <td><input type="text" class="room" /></td>
        </tr>
        <tr>
          <td><input type="checkbox" /><input id='1' class='name' type='hidden' value='test 2'/></td>
          <td><input type="text" class="room" /></td>
          <td><input type="text" class="room" /></td>
          <td><input type="text" class="room" /></td>
        </tr>
      </table>
    </body>
    </html>

   $('.room').change(function() {
     var row = $(this).closest("tr");
     var block = false; //row.find(":text.room").val() !== "";
     var vname = row.find(":input.name").val();
     block = chkblock2(row);
       alert("name: " + vname + " block:" + block);
     if(vname == "test 1"){
       $(this).closest("table").find(":input.name").each(function() {
         if ($(this).val() == "test 2"){
           var row = $(this).closest('tr');
           row.find(":text").attr("disabled",block);
           row.find(":text").val("");
              }
     });
             $(this).closest("table").find(":input.name").each(function() {
         if ($(this).val() == "test 1"){
           $(this).closest("tr").find(":text").attr("disabled",false);
           //$(this).val('');
              }
     });

     } else if(vname == "test 2"){

       $(this).closest("table").find(":input.name").each(function() {
         if ($(this).val() == "test 1"){
           var row = $(this).closest('tr');
           row.find(":text").attr("disabled",block);
           row.find(":text").val("");
              }
     });

        $(this).closest("table").find(":input.name").each(function() {
         if ($(this).val() == "test 2"){
           $(this).closest("tr").find(":text").attr("disabled",false);
           //$(this).val('');
              }

     });  

     }

   });

function chkblock(row){
  return row.find("input:text:not(:empty)");
}

function chkblock2(row){
  row.find(":input.room").each(function() {
    if ($(this).val() !== "" ){
      return true;
    }
    });
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:52:09.517

我建议您为此使用数据绑定：使用 JSON 对象和 knockoutjs 来获取输入值，而不是通过 jquery 进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:26:04.557

我最终只是用这个更新的函数在 td 中循环。感谢大家的意见。

```
function chkblock2($row){
  for (var i = 1; i < 4; ++i){
    if($row.find("td:eq(" + i + ") input.room").val() !== ""){
      return true;
    }
  }
    return false;
} 
```

# asp.net - 如何正确使 ASP.NET datagridview 排序号？

> ID：12885298
> 
> 赞同：0
> 
> 时间：2012-10-14T18:39:39.493
> 
> 标签：asp.net

我已经将一个表绑定到一个带有自动生成列的网格视图。第一个 db 列是数字 id。但是 viewgrid 对 html 列进行排序，就好像它是字符类型（1、2、213、4、...）一样。

如何使其考虑数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:49:09.507

`DataFormatString`您可以在 GridView 的 html 代码中尝试

```
DataFormatString="{0:N}" 
```

更多关于[BoundColumn.DataFormatString 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundcolumn.dataformatstring.aspx)

> N = 以数字格式显示数值。

# asp.net-mvc - 在控制器中使用 [AllowAnonymous] 执行 MVC 操作之前运行代码

> ID：12885301
> 
> 赞同：3
> 
> 时间：2012-10-14T18:39:52.557
> 
> 标签：asp.net-mvc, controller, action

我有一堆在类级别范围内具有 [AllowAnonymous] 属性的控制器。在执行此类控制器中的任何操作之前，我需要检查一些事情。例如，我可能会做这样的事情：

```
[AllowAnonymous]
public class MyController : Controller
{
    [HttpGet]
    public ActionResult Index()
    {
        // do some preliminary work

        // run action-specific code
    }
} 
```

因为我有很多这样的控制器和动作，所以复制粘贴相同的代码是一个乏味的过程。有没有办法以更简单的方式为每个匿名操作执行此初步代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T18:42:34.193

您可以创建自己的操作过滤器。

创建一个继承`ActionFilterAttribute`和覆盖的类`OnActionExecuting`。
将该属性应用于控制器或操作，它将在对该控制器或操作的每个请求之前运行。

# jquery - ajax 调用后在下一个函数中使用 var

> ID：12885304
> 
> 赞同：0
> 
> 时间：2012-10-14T18:40:18.837
> 
> 标签：jquery

> **可能重复：**
> [jQuery：同时选择一个元素的类和 id？](https://stackoverflow.com/questions/1944302/jquery-select-an-elements-class-and-id-at-the-same-time)

当我对一个函数进行这个 ajax 调用时，我需要用一个类和一个特定的 id 更新一个 div：

```
 $(function() {
        $(".click-follow").click(function() {

            var user_id = "<?=$id?>";
            var id = $(this).attr('title');
            var dataString = 'user_id=' + user_id + '&id=' + id;

            $.ajax({
                type: "POST",
                url: "/ajax/follow.php",
                data: dataString,
                }).done(function( result ) {
                    myresult(result);
            });

            return false; 
        });
    });

function myresult(result) {
var result_lines = result.split("<splitter>");    
if (result_lines[0] == '1') {
    $('.click-follow').html(result_lines[1]).fadeIn(500);
    $('.follow').html(result_lines[2]).fadeIn(500); 
} else if (result_lines[0] == '2') { 
    $('.click-follow').html(result_lines[1]).fadeIn(500); 
    $('.follow').html(result_lines[2]).fadeIn(500); 

}
return true; 
```

}

所以我想在函数 myresult 中使用 var id，例如：

```
 $('.click-follow#' + id).html(result_lines[1]).fadeIn(500); 
```

例如：我有 3 个 div：

```
 <div class="click_follow" id="1"></div>
 <div class="click_follow" id="2"></div>
 <div class="click_follow" id="3"></div> 
```

当我单击 div 1 时，我也想更新 div 1。但是我不知道如何在 ajax 调用后调用的函数中使用 var id。问题是不知道 div 的数量......所以它可以是 20 个 div 或 2 个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:45:20.153

```
$(".click-follow").click(function() {
  $("#fade").fadeIn()
}); 
```

[演示](http://codepen.io/anon/pen/igxsb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:12:35.300

我认为您真正想要的是对单击的元素的引用，这非常简单：

```
$(".click-follow").click(function() {
    var element = this;
     //...

     $.ajax({
         type: "POST",
         url: "/ajax/follow.php",
         data: dataString,
     }).done(function( result ) {
         myresult(element, result);
     });
});

function myresult(element, result) {
    // ...
    $(element).html(result_lines[1]).fadeIn(500);
} 
```

# mysql - 请解决mysql插入查询中的语法错误

> ID：12885309
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:40:45.290
> 
> 标签：mysql, sql, debugging

我正在使用 mysql 5.5.27

在看起来像双引号的地方是两个单引号更靠近，它们实际上是数据库中的 excel 表中的空值。

我收到以下错误，

```
com.mysql.jdbc.exceptions.jdbc4.MySQLS… You have an error in your SQL syntax; 
  check the manual that corresponds to your MySQL server version for the right 
  syntax to use near 'CASE,lname,fname,gender,dob,ssn,… at line 1 
```

实际查询是

```
Insert into 
  work(CASE,lname,fname,gender,dob 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:42:41.920

“CASE”是保留字：见[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

你可以逃避它：

```
Insert into child(`CASE`,LASTNAME,FIRSTNAME,GENDER,DOB… American','1689 Crucible Street','','Pittsburgh','PA','15210','(4… 
```

但我个人更喜欢重命名该列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:42:49.803

CASE 是保留字...引用它..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:47:06.587

对于 mysql：

```
insert into tableName values() 
```

无论如何，您有 SQL 语法错误：

插入子项(CASE,LASTNAME,FIRSTNAME,GENDER,DOB... American','1689 Crucible Street','','Pittsburgh','PA','15210','(4...</p>

1.  案例是一个保留词：[http ://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)
2.  在**DOB... American'** 你错过了一个**'** ( *'DOB... American'* )

# php - 无法插入换行符

> ID：12885313
> 
> 赞同：-1
> 
> 时间：2012-10-14T18:41:31.067
> 
> 标签：php

我有这个代码：

```
<?php 
$ip = $_SERVER["REMOTE_ADDR"];

echo $ip;
echo "\n";
echo strftime('%c');
echo "\n";
echo date_default_timezone_get();
echo "\n";
?> 
```

所有三个输出都应该在三个单独的行上，但它们都在同一行上。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:47:22.893

如果您想在浏览器中查看换行符的输出，请使用 html 换行符`<br>`而不是`\n`. 浏览器将空格（`\n`是一个空格）折叠成一个`' '`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T18:46:47.590

默认情况下，浏览器将输出解释为 html。如果您想“查看”实际输出，请在文件开头添加此内容。

```
header("Content-type: text/plain"); 
```

或使用 a`<br />`而不是简单的换行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:55:00.303

只需添加[pre 标签 - 预格式化文本](http://www.w3schools.com/tags/tag_pre.asp) `<pre>`

```
$ip = $_SERVER["REMOTE_ADDR"];

echo "<pre>";
echo $ip;
echo "\n";
echo strftime('%c');
echo "\n";
echo date_default_timezone_get();
echo "\n";
echo "</pre>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:46:53.910

浏览器中的 php-output 格式为 Html。在 Html 中，您需要标签 <br> 开始一个新行... :-)

```
echo "<br>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T18:47:59.490

如果您以 HTML 格式查看页面，那么所有内容都将在一行中。您需要添加换行符。

```
echo $ip . "<br />\n"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T18:52:38.007

如果您打算以 HTML 格式查看输出，则需要使用 HTML *line-breaks*。

```
<?php 
$ip = $_SERVER["REMOTE_ADDR"];

echo $ip."<br>";
echo strftime('%c')."<br>";
echo date_default_timezone_get()."<br>";
?> 
```

# ios - 将 UIButton 锚定到 UITableViewController 视图的底部

> ID：12885318
> 
> 赞同：9
> 
> 时间：2012-10-14T18:42:12.517
> 
> 标签：ios, cocoa-touch, uiview, uitableview

我有以下要求。当 a`UITableViewController`的视图显示时，行数是可变的。在行下方，应显示一个按钮。

当行数较少时，按钮应锚定在视图的底部。

当行数较大时，删除按钮应紧跟在最后一行之后。

换句话说：

![在此处输入图像描述](../Images/bc12463ae568621ad217c89ac970dfd7.png)

并不是：

![在此处输入图像描述](../Images/9d45912f143807c2173f480eb8b4483c.png)

到目前为止，我对此的最佳尝试涉及设置 a`tableFooterView`并尝试使用 的 更新其高度`contentSize`，`UITableView`但我遇到了各种问题。我可能会继续走这条路并寻求帮助，但首先我想知道是否有人有其他（更好的）解决方案。

结果必须与双倍大小的状态栏（例如在通话期间）很好地配合，我的目标是 iOS 6.0。我没有使用界面生成器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:43:10.113

实现此效果的一种可能解决方案可能必须使用两种不同的解决方案。

1.  如果行数意味着按钮将离开屏幕，那么像你一直在做的那样使用 footerView。

2.  如果行数意味着按钮不会离开屏幕，那么

    1.  将按钮添加到 tableView
    2.  实现`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`并更新按钮的框架以从底部偏移。

从底部的偏移量可能遵循一些这样的逻辑

1.  yOffset = CGRectGetHeight(tableView.frame) - (CGRectGetHeight(button.frame) + somePadding)
2.  yOffset += tableView.contentOffset.y

这意味着按钮仍会随着滚动而上下移动，但您不必弄乱 footerView 的高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:01:49.887

将表格视图和按钮都保留在滚动视图中。将按钮保留在滚动视图的底部。为了正确滚动工作，您可能需要设置`scrollEnabled`滚动视图的属性。有关该检查的更多详细信息

[在 UIScrollView 内滚动 UITableView](https://stackoverflow.com/questions/3422915/scrolling-a-uitableview-inside-a-uiscrollview)

编辑：

yourView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin ;

检查此问题的已接受答案，以获取有关使用代码实现支柱和弹簧的更多详细信息： [UIView autoresizingMask - Interface Builder to Code - Programmatically create struts and springs - Swift or Objective-C](https://stackoverflow.com/questions/10468389/uiview-autoresizingmask-interface-builder-to-code-programmatically-create-st)

# nopcommerce - 如何在目录设置中添加新设置值

> ID：12885321
> 
> 赞同：2
> 
> 时间：2012-10-14T18:42:34.260
> 
> 标签：nopcommerce

我想在 nopcommerce 2.65 中向名为 CustomerEnterPricePercentageSurcharge 的目录设置添加一个小数设置。我按照[如何在客户设置](https://stackoverflow.com/questions/12031896/how-to-add-new-setting-value-in-customer-settings)线程中添加新设置值的说明进行操作。

但是，按照上述线程中提到的 3 个步骤（下面列出并针对目录设置进行了修改）后，当登录到管理部分并保存目录设置时，该值始终为 0.0000。似乎它没有保存（或加载）“catalogsettings.customerenterpricepercentagesurcharge”设置值。有人可以帮我澄清什么价值没有被保存吗？

1.  更新 Nop.Admin/Models/Setting/CatalogSettingsModel.cs 与

    ```
    [NopResourceDisplayName("Admin.Configuration.Settings.Catalog.CustomerEnterPricePercentageSurcharge")]
    public decimal CustomerEnterPricePercentageSurcharge { get; set; } 
    ```

2.  更新 Nop.Admin/Views/Setting/Catalog.cshtml 与

    ```
     <tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.CustomerEnterPricePercentageSurcharge):
        </td>
        <td class="adminData">
            @Html.EditorFor(model => model.CustomerEnterPricePercentageSurcharge)
            @Html.ValidationMessageFor(model => model.CustomerEnterPricePercentageSurcharge)
        </td>
     </tr> 
    ```

3.  添加：

    ```
    "catalogsettings.customerenterpricepercentagesurcharge" under (configuration ->setting->AllSetting) and updating the 
    ```

非常感激您的帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:55:39.967

老实说，您实际上不必在`Nop.Admin/Views/Setting/Catalog.cshtml`

你可以避免这一切，而且很简单：

1.  在所有设置中添加一个新值。

2.  然后要使用它，只需将一个新字段添加到：

    Nop.Core.Domain.Catalog.CatalogSettings

如

```
 /// <summary>
    /// Gets or sets a surcharge
    /// </summary>
    public decimal CustomerEnterPricePercentageSurcharge { get; set; } 
```

# c# - 实体框架 - 子对象中的外键

> ID：12885322
> 
> 赞同：0
> 
> 时间：2012-10-14T18:42:36.683
> 
> 标签：c#, entity-framework, fluent-interface

我正在使用 Entity Framework 从数据库中检索博客数据。我有一个类“BlogPost”和一个类“作者”。一位作者可能有许多博客文章，但作者对象本身并不包含它们的列表。就 Author 对象而言，它独立于所有博客文章。

Author 类的一个实例作为属性包含在 BlogPost 中。每个作者都有一个 AuthorId。我想从我的数据库中提取一个给定的博客，并让 Author 对象填充相关数据。我已经设法通过在我的 BlogPost 类中包含 AuthorId 属性来做到这一点，使用以下代码来映射对象：

```
this.HasRequired(t => t.Author).WithMany().HasForeignKey(x => x.AuthorId); 
```

然而，我想做的是能够做同样的事情，但不必将 AuthorId 属性直接包含在模型中。原因是，由于 Author 对象已经包含对应的 ID，因此我将同一条信息重复两次。我想按照以下方式做一些事情：

```
this.Property(t => t.Author.Id).HasColumnName("id_user");
this.HasRequired<TwitterUser>(t => t.Author).WithMany().HasForeignKey(t => t.Author.Id); 
```

那么，有什么方法可以检索 Author 子对象，而不必将 AuthorID 冗余存储在 BlogPost 对象中以及 Author 对象本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:56:04.977

您使用的语法称为“外键关联”，它是在 EF 4 中引入的，因为它解决了许多问题。例如，当使用 FK 关联时，您可以自动执行级联删除。

你可以在这里阅读更多关于它们的信息：

[http://blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity-framework.aspx](http://blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity-framework.aspx)

您仍然可以使用简单的导航属性以旧方式进行操作。但是您将需要稍微不同的语法。一件事是独立关联要求您在两端都有导航属性，并且您说您只想要这种单向。因此，您要么向作者实体添加关联，要么使用 FK 关联。

您可能还会发现我们自己的 Ladislav Mrnka 的这篇文章很有用：

[http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/](http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/)

另请注意，根据 EF 团队的说法，独立关联的性能可能比 FK 关联差得多，尽管这似乎仅限于视图生成，因此这是一次性启动成本（每次启动应用程序或应用程序域时）。此外，对于小型模型，您可能不会注意到它。：

[http://msdn.microsoft.com/en-us/data/hh949853.aspx](http://msdn.microsoft.com/en-us/data/hh949853.aspx)

编辑：

正如@Slauma 所指出的，您可以使用 .Map 属性来映射独立关联，如下所示：

```
this.HasRequired(t => t.Author).WithMany().Map(m => m.MapKey("AuthorId")); 
```

# php - PHP中的长随机字符串生成器

> ID：12885336
> 
> 赞同：3
> 
> 时间：2012-10-14T18:43:55.100
> 
> 标签：php, random

有谁知道如何`string`在 PHP 中生成一个长的（例如 280 个字符）随机字符，而不必使用`for`循环遍历字符 280 次的循环？我需要它来创建自定义会话 ID。

在我看来，PHPSESSID 太短且不太随机，不够安全。我知道 Facebook 和 Twitter，使用长会话 ID（分别为 150、550 个字符）。

可以选择使用`MD5`字符串或`Bcrypt`加密不同的字符串，例如`PHPSESSID`主机、用户代理等，但我不确定这是正确的做法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T19:01:21.860

如果您要问这样的问题，那可能意味着您对密码学或安全性一无所知。尝试生成“长随机字符串”，因为正如您所说，“PHPSESSID 不够安全”可能会导致您使用自定义且不安全的实现。

生成随机字符串是**不可能**的，至少在您当前的硬件上不是：您可以近似一个公平的伪随机生成器，但这仅对教育目的有用。

PHP 的 Session ID 生成算法相当高效；如果您认为它不够安全，那么您可能会浪费时间来改进它。如果您正在寻找最大的安全性（例如使用客户端证书），您可能希望使用不同的身份验证机制。

如果 Twitter、Facebook 或其他具有类似流量的网站使用更长的会话 ID，这可能不是因为它更安全（在某种程度上），而是因为它避免了冲突。

最后，如果您想要更长的会话 ID 而不尝试编写自己的算法，您应该使用以下 PHP 配置指令：

[`session.hash_function`](http://www.php.net/manual/en/session.configuration.php#ini.session.hash-function)它可以采用 PHP 已知的任何哈希算法。

您可能还想使用[`session.bits_per_characters`](http://www.php.net/manual/en/session.configuration.php#ini.session.hash-bits-per-character)来缩短或延长字符串。请注意，如果您这样做，字符串可能会更长或更短，但数据保持不变——只是表示方式不同（以 16 为基数、以 32 为基数等）

附加信息：

您还可以通过使用自定义源（文件）并设置种子的长度来增加熵：

```
ini_set("session.hash_function", "sha512");
ini_set("session.bits_per_charater", 4); // 4 means hex
ini_set("session.entropy_file", "/dev/urandom");
ini_set("session.entropy_length", "512"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T18:49:28.103

它可以是~~二进制~~十六进制吗？

```
bin2hex(mcrypt_create_iv(140, MCRYPT_DEV_URANDOM)); 
```

或者，如果您有权访问[`hash_pbkdf2()`](http://php.net/manual/en/function.hash-pbkdf2.php)：

```
hash_pbkdf2('sha256', PHPSESSID, mt_rand(), 1, 280, false); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-14T19:00:41.823

您可能会发现，并非“长”会话 id 中的所有位都是纯随机的 - 它们可能会为应用程序提供额外信息，以实现关键信息的快速提取。

默认情况下 PHP 会话 id 并不算太糟糕，并且可以通过提供一些额外的熵来改进（例如来自 /dev/urandom）

查看php源码中[ext/session/session.c中的php_session_create_id](https://github.com/php/php-src/blob/master/ext/session/session.c#L279)

它是这样的：

*   获取一天中的时间
*   获取远程IP地址
*   使用当前时间的秒数和微秒以及 IP 地址构建一个字符串
*   将其输入配置的[会话哈希函数](http://uk3.php.net/manual/en/session.configuration.php#ini.session.hash-function)（MD5 或 SHA1）
*   如果已配置，则从[熵文件中提供一些额外的随机性](http://uk3.php.net/manual/en/session.configuration.php#ini.session.entropy-file)
*   生成最终哈希值

因此，获取副本或预测会话 id 非常困难。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-14T18:46:21.523

给自己做一根长绳子，然后[洗牌](http://www.php.net/manual/en/function.shuffle.php)。

```
$string = 'asdfhdfiadfshsdfDSGFADSFDSFDSFER524353452345';
$new_string = shuffle($string); 
```

# actionscript-3 - 从字符串创建不同的类

> ID：12885337
> 
> 赞同：0
> 
> 时间：2012-10-14T18:43:57.120
> 
> 标签：actionscript-3, flash, oop

你好，我有这段代码，它必须做的是当有一些类（总是扩展 Box 类）时，如果已经有一个相同类型的它加载那个并且没有一个则必须生成它创建了一个新的。

```
private var _l:Vector.<Box> = new Vector.<Box>();
public function respawn(shapeId:int, className:String = "Box"):Class {
        var l:int = _l.length, i:int;
        var c:Class;
        var ct:Class = getDefinitionByName(className) as Class;
        for (i = 0; i < l; i++) {
            c = _l[i];
            if (!c.active && c.shapeId == shapeId) {
                return c;
            }
        }
        c = new ct();
        _l[l] = c;

        return c;
    } 
```

如果我尝试此代码，它会生成以下错误：

```
Implicit coercion of a value of type com.shapes:Box to an unrelated type Class.
Implicit coercion of a value of type Class to an unrelated type com.shapes:Box 
```

我该如何解决这个问题，以便我可以创建不同类型的类，这些类都扩展了 Box 类并将它们放入`Vector.<Box>`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:48:12.630

Object 是所有 ActionScript 类的超类，而不是 Class。

此外，您还可以：

```
var box:Object = new Box(); 
```

但你不能：

```
var box:Box = new Object(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:33:06.667

就像 Max Golovanchuk 说的那样，我必须针对对象而不是类。

```
public function respawn(shapeId:int, className:Class):Object {
    var l:int = _l.length, i:int;
    var c:Box;
    for (i = 0; i < l; i++) {
        c = _l[i];
        if (c.shapeId == shapeId) {
            return c;
        }
    }
    c = new className();
    _l[l] = c;

    return c;
} 
```

# silverlight - 在 Silverlight 中导航到不同的程序集

> ID：12885338
> 
> 赞同：1
> 
> 时间：2012-10-14T18:44:03.727
> 
> 标签：silverlight, navigation, silverlight-5.0

我正在尝试导航到位于不同程序集中的页面，但没有成功。

我做了一个非常简单的 Silverlight 导航应用程序来说明我的观点：

[![我的项目](../Images/3d714f5817a847967cc28ff9792d5410.png)](https://i.stack.imgur.com/gkmYF.jpg)

我只是有一个`Hyperlink`：

```
NavigateUri="/PageClassLibrary;component/Pages/PageInLibrary.xaml" 
```

在调用页面（**MainNavigationApp中的****MainPage.xaml** ）中，我现在有一个没有 UriMappings 的框架。

 **```
 <Grid x:Name="LayoutRoot">

      <navigation:Frame x:Name="ContentFrame"
                        Style="{StaticResource ContentFrameStyle}"
                        Navigated="ContentFrame_Navigated"
                        NavigationFailed="ContentFrame_NavigationFailed">
      </navigation:Frame>

      <Grid x:Name="NavigationGrid" Style="{StaticResource NavigationGridStyle}">

         <StackPanel x:Name="LinksStackPanel" Style="{StaticResource LinksStackPanelStyle}">

            <HyperlinkButton x:Name="Link3"
                             Style="{StaticResource LinkStyle}"
                             NavigateUri="/PageClassLibrary;component/Pages/PageInLibrary.xaml"
                             TargetName="ContentFrame"
                             Content="page in a class library" />
         </StackPanel>

      </Grid>

    </Grid> 
```

但是当我运行它时，我收到一条错误消息，指出找不到该页面：

> 找不到页面：“/PageClassLibrary;component/Pages/PageInLibrary.xaml”

我什至修改**了 MainNavigationApp**依赖项，检查**依赖于 PageClassLibrary**，但它并没有改善结果。

我没有主意了。有人有提示吗？

这是解决方案：

[https://skydrive.live.com/#cid=B79120F33F3A7A64&id=B79120F33F3A7A64%21105](https://skydrive.live.com/#cid=B79120F33F3A7A64&id=B79120F33F3A7A64%21105)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:32:13.247

啊啊啊！，解决方案就在我眼前。只需添加对组件的引用即可。呸！**

# php - php - xml - 从 20 个或一组长度中随机选择 3 个

> ID：12885341
> 
> 赞同：0
> 
> 时间：2012-10-14T18:45:06.800
> 
> 标签：php, xml

> **可能重复：**
> [php - xml - 随机过滤并存储订单](https://stackoverflow.com/questions/12865906/php-xml-random-filter-and-store-the-order)

需要从提要中选择 3 个 xml 集（随机）。我也提供了 XML 格式（用于一个项目）。它将在 XML 中设置 20 个或更多项目集。我必须从中随机选择 3 个项目集并以相同的 xml 格式发布。

```
<?php
// Load our XML document
$doc = new DOMDocument();
$doc->load('feed.xml');

// Create an XPath object and register our namespaces so we can
// find the nodes that we want    
$xpath = new DOMXPath($doc);
$xpath->registerNamespace('p', 'http://purl.org/dc/elements/1.1/'); 
```

此处随机插入 3 篇文章。

```
// Write our updated XML back to a new file
$doc->save('feedout.xml');

?> 
```

XML 格式

```
<?xml version="1.0"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>title</title>
    <link>http://li.com</link>
    <description>li.com</description>
    <image>
      <url>http://www.li.com/feedlogo.gif</url>
      <title>link.com</title>
      <link>http://link.com</link>
    </image>
    <language>en-us</language>
    <copyright>C/copyright>
    <generator>G</generator>
    <item>
      <title><![CDATA[Title]]></title>
      <link><![CDATA[http://li.com/]]></link>
      <guid isPermaLink="true"><![CDATA[http://li.com/]]></guid>
      <description><![CDATA[ Desc]]></description>
      <dc:creator><![CDATA[be]]></dc:creator>
      <pubDate>Mon EST</pubDate>
      <dc:identifier>12</dc:identifier>
      <category domain="category"><![CDATA[cat]]></category>
      <category domain="blogger:name"><![CDATA[cat]]></category>
      <enclosure url="pic" length="" type="image/jpeg"/>
    </item>
  </channel>
</rss> 
```

# c# - C# - make Regex 检测任何不是数字的字符

> ID：12885345
> 
> 赞同：0
> 
> 时间：2012-10-14T18:45:34.303
> 
> 标签：c#, regex

以前在[如何检查字符串是否包含从 a 到 z 的任何字母？](https://stackoverflow.com/questions/12884610/how-to-check-if-a-string-contains-any-letter-from-a-to-z#12884639)我已经学会了如何使用正则表达式来检测从`a`to的字母`z`。

我们也可以让 Regex 来检测任何符号吗？喜欢`. , ! ? @ # $ % ^ & * ( )`或任何其他。

更具体地说，我只想接受**我**的`string`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:49:56.700

要匹配仅包含数字或空字符串的字符串，请使用正则表达式模式`^\d*$`

要匹配仅包含数字的字符串，不允许空字符串使用正则表达式模式`^\d+$`

```
Console.WriteLine((new Regex(@"^\d+$")).IsMatch(string) ? "Yes" : "No"); 
```

**[在此处](http://ideone.com/MZryl)**测试此代码。

* * *

[在http://www.regular-expressions.info/dotnet.html](http://www.regular-expressions.info/dotnet.html)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:54:06.833

```
using System.Text.RegularExpressions; 
```

首先创建正则表达式数字

```
private Boolean number(string obj)
        {
            Regex r = new Regex(@"^[0-9]+$");
            Match m = r.Match(obj);
            if (m.Success == true) return true;
            else { return false; }
        } 
```

并确保这是数字

```
if (number(textBox1.Text) == true)
            {
                MessageBox.Show("text box couldn't filled with numbers", "WARNING", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T19:05:03.170

如果您想要一个*比正则表达式更快且更*易于*维护的*解决方案：

```
string num = "123456a";
bool isOnlyDigits = num.All(char.IsDigit); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:50:52.610

`Regex`您可以通过遵循某些约定来创建自己的。请参阅此[Regex Cheat Sheet](http://regexlib.com/%28A%28WWrrbShGqsK-q9hDTTZWJDJyHaroOS2i0Srx9NzZ3GhmdgoAAfb61CQytP9pFb_9MVceuDA2rOJeX9ez8jNA2pLzAYiPnqaUwNaqH5paYlmfpBbMZEacZMP2gA3wsoh23T00U55TBJVTSVes197dQ_9KAgTzg60rX_I5n7UEWxTrhsXnzWhSaFvtGrygAnwH0%29%29/CheatSheet.aspx "正则表达式备忘单")创建您自己的 Regex。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T18:52:51.987

`\d+`将匹配 1 个或多个数字。

例如：

```
var myString = @"fasd df @###4 dfdfkl  445jlkm  kkfd ## jdjfn ((3443  ";
var regex = new Regex(@"(\d+)");
var matches = regex.Match(myString); // This will match: 4, 445 and 3443 
```

希望这可以帮助。

# javascript - 切换 Div 的逻辑

> ID：12885351
> 
> 赞同：0
> 
> 时间：2012-10-14T18:46:07.557
> 
> 标签：javascript, css, html, dom

我有个问题。我已经在这个网站上工作了一段时间，但我遇到了一点砖墙。我已经考虑过几次了，我不知道该怎么做。

我在一个页面上有 5 种不同的内容配置，我需要在它们之间进行交换。应该发生的是，当用户单击一个按钮时，应该会发生一系列动画，并最终将按钮和顶部替换为按下的那个。位于顶部的那个应该返回到其原始位置（“主页”应该始终在顶部，“关于”应该始终在其下方，除非它是当前页面）。

我的网站在这里，`http://www.logicanddesign.ca`所有的 javascript 都开放供您查看。你们能提供的任何帮助都会有帮助。我想在不完全重写我的网站的情况下这样做，但如果这是唯一的方法，我会的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:22:04.127

好吧，我想指出的第一件事是，您将`button_click`函数与图像相关联，而不是与`div`包含它们的 s 相关联。最好使用`div`标签进行事件处理。

其次，您只移动当前按钮和按下的按钮。为了达到您想要的效果，您需要在 和 的默认位置之间移动`buttonPressed`按钮`currentPage`。

此外，您不能只`moveUp`为按下的按钮静态定义功能而没有别的。因为有时您需要在按下的按钮和当前按钮之间向上移动按钮。 ![在此处输入图像描述](../Images/3af5eba3be4ebd3b53892f467a144441.png)

显然，当您将`div`s 设置为动画时，您需要考虑中间移动。可能在`moveDivs`函数中。

[我做了一个小提琴，代表你可以做哪些改变来达到所需的效果，但我觉得我写的东西一团糟。](http://jsfiddle.net/wZZvH/)那种值得做噩梦的烂摊子，真的……

在我看来，您可以创建一个 javascript 类来处理动画和动作。制作一个类将使代码更加简洁，并且您可以无限期地添加按钮而不会破坏您的代码。

# database - 如何使用 yii 添加父表值 CGridView

> ID：12885352
> 
> 赞同：0
> 
> 时间：2012-10-14T18:46:10.167
> 
> 标签：database, activerecord, yii, yii-components

目前我的 CGridView 给出了以下结果。

[http://imageshack.us/a/img821/2391/44264318.png](http://imageshack.us/a/img821/2391/44264318.png)

这里的 City 实际上是来自父表的 CityID。City 表和 Campus 表是一对多的关系。我想从父表中显示 city.cityname 而不是 city.cityid。有人可以帮忙吗。数据库结构如下

[http://imageshack.us/photo/my-images/845/82338990.png/](http://imageshack.us/photo/my-images/845/82338990.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:48:22.660

将该列更改为

```
array (
'name'=>'mycol
'value'=>'$data->city->cityname',
); 
```

其中 city 是关系名称，cityname 是来自链接类的属性。

排序看这篇文章[http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:10:27.283

在您的网格列中使用：

```
array (
   ...
   'city.cityname',
   ... other columns...
); 
```

# c++ - 具有不同概率的随机数

> ID：12885356
> 
> 赞同：9
> 
> 时间：2012-10-14T18:46:34.763
> 
> 标签：c++, random, probability

> **可能的重复：**
> [用于从每个元素具有不同概率的列表中选择的 C++ 函数](https://stackoverflow.com/questions/2649717/c-function-for-picking-from-a-list-where-each-element-has-a-distinct-probabili)

我需要根据我可以定义的概率（0.25、0.50、0.75）随机确定是或否结果（抛硬币的类型）。

因此，例如，我想随机确定是或否，其中是有 75% 的机会被选中。我有什么选择？有没有我可以使用的 C++ 库？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-14T18:47:54.940

您可以使用以下功能轻松实现此`rand`功能：

```
bool TrueFalse = (rand() % 100) < 75; 
```

`rand() % 100`会给你一个 0 到 100 之间的随机数，它低于 75 的概率是 75% 。您可以将 替换`75`为您想要的任何概率。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T18:48:07.633

检查 C++11 伪随机数库。

[http://en.cppreference.com/w/cpp/numeric/random](http://en.cppreference.com/w/cpp/numeric/random)

[http://en.wikipedia.org/wiki/C%2B%2B11#Extensible_random_number_facility](http://en.wikipedia.org/wiki/C%2B%2B11#Extensible_random_number_facility)

```
std::random_device rd;
std::uniform_int_distribution<int> distribution(1, 100);
std::mt19937 engine(rd()); // Mersenne twister MT19937

int value=distribution(engine);
if(value > threshold) ... 
```

像这样，然后说所有高于 75 的都是真的，低于的都是假的，或者你想要的任何阈值

与`rand`您实际上可以控制数字生成的属性不同，我也不相信 rand 在其他答案中使用（使用模数）甚至呈现均匀分布，这很糟糕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T18:56:00.793

`std::random_device`或者`boost::random`如果`std::random_device`不是由您的 C++ 编译器实现，`boost::random`则可以使用a`bernoulli_distribution`来生成随机`bool`值！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T18:50:37.027

```
#include <cstdlib>
#include <iostream>
using namespace std;

bool yesOrNo(float probabilityOfYes) {
  return rand()%100 < (probabilityOfYes * 100);
}

int main() {
    srand((unsigned)time(0)); 
    cout<<yesOrNo(0.897);
} 
```

如果您调用`yesOrNo(0.75)`它将返回`true`75% 的时间。

# c# - 从 TCP 客户端接收数据时出错

> ID：12885367
> 
> 赞同：0
> 
> 时间：2012-10-14T18:47:31.923
> 
> 标签：c#, sockets, tcpclient, tcplistener, tcp-ip

我编写了一个监听端口并接收一些数据包的应用程序，根据我的自定义协议，数据包是 49 字节到 1500 字节，我可以从数据包中的数据长度看出。我应该解释和处理 49 字节数据包和更大数据包中的数据的方式是不同的。

问题是，当我收到小于 1374 字节的数据包时，一切正常，但是当数据包长度变长时，我收到以下异常，并且我还丢失了数据的最后 4 个字节（我已经使用 1384 字节数据包进行了测试，我丢失最后 4 个字节）

引发的异常：索引超出范围。必须是非负数且小于集合的大小。参数名称：startIndex

每个 49 字节的数据包有 35 字节的数据，更大的数据包的数据长度是不确定的（因为压缩）。

我发现有时最后 4 个字节位于单独的“字节”和“结果”变量中，这意味着它们被视为新数据包，并且没有附加到它们所属的数据包上。

这是接收数据的代码：

```
TcpClient Client = obj as TcpClient;
        EndPoint ep = Client.Client.RemoteEndPoint;
        List<Byte> result = new List<byte>();
        result.Capacity = 2000;
        try
        {

            NetworkStream stream = Client.GetStream();
            int i = 49;
            while ((i = stream.Read(bytes, 0,49)) != 0)
            {

                for (int id = 0; id < i; id++)
                {
                    result.Add(bytes[id]);
                }
//reading data length to determine packet length
                byte[] tmp = new byte[2];
                tmp = BitConverter.GetBytes(BitConverter.ToUInt16(result.ToArray(), 9));
                if (BitConverter.IsLittleEndian)
                {
                    Array.Reverse(tmp);
                }
                Int16 l = BitConverter.ToInt16(tmp, 0);
                if (l>35)
                {
                    stream.Read(bytes, result.Count, l - 35);
                    for (int id = 49; id <((l-35)+49); id++)
                    {
                        result.Add(bytes[id]);
                    }
                    if (this.TCPDataReceivedHandler != null)
                    {
                        this.TCPDataReceivedHandler(ep, result.Count, result.ToArray());
                        result.Clear();
                        Array.Clear(bytes, 0, 2000);
                        result.Capacity = 2000;
                    }
                }
                else
                {
                    if (this.TCPDataReceivedHandler != null)
                    {
                        this.TCPDataReceivedHandler(ep, result.Count, result.ToArray());
                        result.Clear();
                        Array.Clear(bytes, 0, 2000);
                        result.Capacity = 2000;
                    }
                }

            }
            System.Diagnostics.Debug.WriteLine("client Close");
            Client.Close();

        }
        catch (System.Exception ex)
        {
            throw ex;
        }
        finally
        {
            Client.Close();
            this.clients.Remove(Client);
        } 
```

根据 Greg Suggestion 和我的研究，我也尝试使用以下方法：

```
NetworkStream stream = Client.GetStream();
            int bytesread = 0, OffsetTemp = 0;

            while (stream.CanRead)
            {
                OffsetTemp = 0;

                bytesread += stream.Read(bytess, OffsetTemp, 11);
                OffsetTemp = OffsetTemp + 11;

                byte[] tmp = new byte[2];
                tmp = BitConverter.GetBytes(BitConverter.ToUInt16(bytess.ToArray(), 9));
                if (BitConverter.IsLittleEndian)
                {
                    Array.Reverse(tmp);
                }
                Int16 l = BitConverter.ToInt16(tmp, 0);

                bytesread += stream.Read(bytess, OffsetTemp++, 11 + l + 3);
                for (int id = 0; id < l + 14; id++)
                {
                    result.Add(bytess[id]);
                }

                if (this.TCPDataReceivedHandler != null)
                {
                    this.TCPDataReceivedHandler(ep, result.Count, result.ToArray());
                    result.Clear();
                    Array.Clear(bytess, 0, 2000);
                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:53:06.867

使用 TCP 时，您必须记住，您放入的数据块的大小*不能保证*与您在接收端取出的数据块的大小相同。TCP 是一种流协议，因此它保证相同的字节以与发送的顺序相同的顺序到达另一端（如果不是，则套接字连接将被重置）。TCP 在对 的调用之间不维护任何类型的块边界`send()`，并且块可以根据网络条件任意拆分或合并。

您的接收器必须准备好从对 的调用中接收任何数量的数据`stream.Read()`，但您的代码似乎没有这样做。例如，即使一次`stream.Read()`只接收*一个*字节，正确编写的接收器代码也应该继续正常工作。

# c# - 在 XAML 中找不到程序集引用，但在 xaml.cs 类中引用时代码编译

> ID：12885371
> 
> 赞同：17
> 
> 时间：2012-10-14T18:47:56.947
> 
> 标签：c#, .net, wpf, xaml, mdi

我在添加 dll 引用时遇到了一个奇怪的问题。我有一个 WPF 应用程序并正在尝试使用 WPF MDI 库：[http ://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)

如说明中所述（非常模糊），我右键单击 VS2012 中的引用，单击`Add reference..`，单击`Browse..`并添加我下载的 dll。

接下来，我在窗口的 XAML 中添加了以下行：`xmlns:mdi="clr-namespace:WPF.MDI;assembly=WPF.MDI"`如说明中所述。

但是，当尝试`<mdi:MdiContainer>`在 XAML 中添加时，会显示以下错误消息：

`The type 'mdi:MdiContainer' was not found. Verify that you are not missing an assembly reference and that all referenced assemblies have been built.`

`The name "MdiContainer" does not exist in the namespace "clr-namespace:WPF.MDI;assembly=WPF.MDI".`

这是我的 XAML：

```
<Window x:Class="QueryBuilder.Table"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mdi="clr-namespace:WPF.MDI;assembly=WPF.MDI"
        Height="300" Width="300" WindowStyle="ToolWindow" ResizeMode="NoResize" ShowInTaskbar="False">
</Window> 
```

这个问题困扰了我一整天。我已经尝试了几乎所有可以想象的东西。值得注意的一件事是，我已经从图书馆的站点下载了示例应用程序，并且可以毫无问题地运行它。除此之外，我已将其添加到我的项目的 xaml.cs 类中：`WPF.MDI.MdiContainer d = new WPF.MDI.MdiContainer();`它可以毫无问题地编译。

另请注意，我最初的问题是[在这里](https://stackoverflow.com/questions/12884408/adding-dll-reference/12884756#comment17447229_12884756)提出的，但没有任何建议有效。然而，问题现在已经改变，因为上面的段落似乎表明代码在后面的代码中成功编译，但在 XAML 文件中没有。

**编辑：**我还想补充一点，我可以浏览程序集参考的代码，如下所示。

![在此处输入图像描述](../Images/c05a7bb9ed3366eada030a49dbf9a6fb.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T19:21:01.267

我终于自己解决了这个问题 - 将把这个答案留在这里，以防有人在某个时候遇到同样的问题。将解决方案本身添加到程序集的引用路径中即可解决问题！可惜没有记录在案……

**编辑：**澄清一下，我所做的是添加解决方案，而不是 dll。换句话说，我添加了 MDI 解决方案及其所有类。这自然适用于源代码也可用的 DLL。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-29T13:29:55.337

如果 Visual Studio 即使在您尝试了所有操作后仍继续抱怨和下划线，请使用任务管理器终止 XDesProc.exe 进程，然后重新构建解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T07:40:25.857

[从http://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)获得 sln 文件。构建了那个项目并使用了 bin 中的新 .dll，使用了它，然后它对我来说很好用。

# php - Ajax 表单提交和刷新页面出 DIV

> ID：12885380
> 
> 赞同：1
> 
> 时间：2012-10-14T18:48:34.050
> 
> 标签：php, ajax, forms, submit, page-refresh

我正在使用 ajax 表单提交脚本，例如

```
 <script type="text/javascript">  
  $(document).ready(function(){  
    $("#login").submit(function(event) {  

        /* stop form from submitting normally */  
        event.preventDefault();   

        $.post( 'login.php', $("#login").serialize(),  
          function( data ) {  
              $("#loginoutput").append(data);  
          }  
        );  
      });  
  });  
</script> 
```

. . .

当表单提交 loginoutput DIV 中显示的所有内容时。错误、控件和成功消息等。但我想在提交成功后重定向主页，但在 DIV 部分完成重定向。我想刷新不在 DIV 部分的整个页面。但是在 DIV 中进行的所有重定向都像输出消息一样。

表单提交后如何刷新整个页面？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:54:32.720

如果您想在成功的 ajax 发布后刷新屏幕。然后只需在 ajax 调用的成功函数中刷新屏幕，如下所示：

```
$.post( 'login.php', 
    $("#login").serialize(),
    function(data) { // will trigger after successful request (HTTP 200)
        document.location.reload(true);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:24:09.003

您也可以使用这个小解决方案：

```
var form = document.getElementById("login");
$.post('login.php', form.serialize(),
       function(data) {
          var response = data;
          if(response.length > 0){
            document.location.reload(true);
          } else {
            console.log('error');
          }  
       }
}); 
```

# r - 如何在 R 中使用 ggplot2 重新排列多面条形图中的变量？

> ID：12885383
> 
> 赞同：3
> 
> 时间：2012-10-14T18:48:53.720
> 
> 标签：r, ggplot2, bar-chart

> **可能重复：**
> [ggplot2条形图中的顺序条](https://stackoverflow.com/questions/5208679/order-bars-in-ggplot2-bar-graph)

我有一个大型数据集，包括不同“区域”中的 %coral cover。在 R 中使用 ggplot 我设法生成了下面的图，这几乎是我想要的！

我基本上想交换各个方面`(Coral.graph$Zone)`，以便他们去；蓝色，黄色，绿色。另外，我想`(Coral.graph$cover)`在 x 轴上交换变量，以便它们读取；Branching, Massive, Table.Plate, Other.Hard, Soft, Sand, Rock, Ruble, Macroalgea, Other. 目前它们都按字母顺序排序（因为我是新用户，所以我无法发布我的图表..）

按照链接答案中的说明进行操作后，我仍在苦苦挣扎。链接的答案以“递减”顺序列出了变量......因为我的不是数字我试过按我想要的顺序列出它们，但我的代码编写显然不准确......请帮忙！

我的代码是

```
coralgraph <- Coral.graph
bar <- ggplot(coralgraph, aes(Coral,Cover))
bar + stat_summary(fun.y=mean, geom="bar", fill="White", colour="Black") + 
      facet_wrap(~Zone) + 
      stat_summary(fun.data= mean_cl_normal, geom= "errorbar", width=0.2) + 
      labs(x="Cover Type", y="Mean Percentage Cover") + 
      theme(legend.position="none") + 
      coord_flip() 
```

这是我使用 R 的第二周，所以我还是新手！对不起，如果这是一个明显的问题！

# facebook-graph-api - 删除 Facebook 帖子时出错：OAuthExceptionMessage: (#200) 此帖子不是由应用程序创建的

> ID：12885387
> 
> 赞同：1
> 
> 时间：2012-10-14T18:49:18.160
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-page

我有一个 Facebook 应用程序和一个 Facebook 地方页面。

[我已使用http://www.facebook.com/add.php?api_key=251531424968346&pages=1&page=108505012565098](http://www.facebook.com/add.php?api_key=251531424968346&pages=1&page=108505012565098)将应用程序链接到页面

我可以从位置作为我的 Facebook 位置的用户发布帖子。我想使用 Facebook SDK DELETE 方法以编程方式删除这些帖子。要删除的代码是

```
function deletepost(responseid){
        FB.api('/'+responseid, 'delete',
         function(response){
            if (response.error)
            {
            alert(response.error.message);
      });
  } 
```

我尝试将 resposeid 设置为 _ 和

有了这个，我得到一个错误“（＃200）这篇文章不是由应用程序创建的”

确实，帖子不是由应用程序创建的，而是页面（和应用程序）的所有者，我不能以任何方式删除页面上的任何帖子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:33:00.700

您只能删除帖子

*   由您的应用发布，使用发布它们的用户的应用访问令牌或用户访问令牌
*   在您管理的页面的时间线上，使用该页面的页面访问令牌。

听起来你没有做任何一个 - 错误消息可能是正确的

# povray - 如何在 POV-Ray 中将图像包裹在盒子周围？

> ID：12885389
> 
> 赞同：3
> 
> 时间：2012-10-14T18:49:26.870
> 
> 标签：povray

我正在尝试构建一个非常简单的场景，即几个圣诞礼物用包装纸包裹着它们。这是我尝试执行此操作的方法，但图像（wrapping_paper.jpg）只是被映射到盒子面上，然后在 Z 方向上“挤出”。

```
box { <0,0,0>, <1,1,1>
  texture {
    pigment { 
      image_map {
        jpeg "wrapping_paper.jpg" 
        once
      }
    }
  }
 rotate <-30,40,-7>
 translate <-0.5, -0.5, -0.5>
} 
```

我尝试了不同的 map_type 设置、uv_mapping 和其他一些东西，但我无法让它看起来正确。这似乎是一件如此简单的事情，我不敢相信它很难做到。我只是在寻找错误的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:07:12.560

语法可能是关键。

这是一个示例教程： [http ://www.f-lohmueller.de/pov_tut/backgrnd/p_sky9.htm](http://www.f-lohmueller.de/pov_tut/backgrnd/p_sky9.htm)

这里有一些代码是从我刚刚用我自己的 png 测试出来的那个 tute 中提取和修改的。作为动画运行以验证它是否正在执行您想要的操作：

```
box{ <-1, -1, -1>,< 1, 1, 1>
 texture{ uv_mapping
 pigment{
 image_map{ png "your_very_own.png"
            map_type 0    // planar
            interpolate 2 // bilinear
            once //
          } //  end of image_map
} // end of pigment
finish { ambient 1 diffuse 0 }
 } // end of texture
scale 10.00  
rotate clock*(50*z+120*y)
translate 100*z
} 
```

# jquery-ui - Jquery最小范围滑块 - 类型错误

> ID：12885391
> 
> 赞同：0
> 
> 时间：2012-10-14T18:49:27.487
> 
> 标签：jquery-ui, jquery-ui-slider

我正在使用 jquery 滑块。我检查了 jQuery 和 Jquery ui 是否已加载，但我收到一个错误，即

类型错误：jQuery("#slider-range-min").slider

滑块的代码是

```
jQuery(function() {

    //var $jq = jQuery.noConflict();    
        jQuery( "#slider-range-min" ).slider({
            range: "min",
            value: 37,
            min: 1,
            max: 700,
            slide: function( event, ui ) {
                jQuery( "#amount" ).val( "jQuery" + ui.value );
            }
        });
        jQuery( "#amount" ).val( "jQuery" + jQuery( "#slider-range-min" ).slider( "value" ) );
    });
    </script>
    <p>
    <label for="amount">Maximum price:</label>
    <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
</p>

<div id="slider-range-min"></div> 
```

我已经从 jquery ui 站点复制了代码，只是将 $ 替换为 jQuery。'$' 没有加载，所以我必须使用'jQuery'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:14:15.637

问题与您包含的 JQuery 脚本库有关。其中一些丢失或未正确包含，因此请确保您已将这些包含在`<head></head>`标记中：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
```

# caching - 为什么添加任意 GET 变量会加快长时间的请求？

> ID：12885395
> 
> 赞同：2
> 
> 时间：2012-10-14T18:49:51.453
> 
> 标签：caching, networking, get, httprequest

有时，我请求一个页面，但接收请求的响应然后加载页面需要*很*长时间（有时请求超时，我从未得到响应）。

但是，如果我打开一个新选项卡，复制确切的 URL，然后将其附加一个任意`GET`变量（具有任意值），请求会很快得到响应（就像正常状态一样），然后页面加载，尽管没有那个任意`GET`变量，请求没有得到响应。

举一个假的例子，如果我要求：

[http://example.com/](http://example.com/)

加载可能需要很长时间，还没有收到任何响应，但是如果我只是打开一个新选项卡（同时）并请求：

[http://example.com/?foo=bar](http://example.com/?foo=bar)

它像魔术一样加载！

为什么会发生在我身上？我的浏览器和页面服务器之间的路径可能是什么原因？这与 ISP 服务器缓存有什么关系吗？

任何解释都非常感谢，因为我真的很想知道原因！

**PS：**我在叙利亚（互联网网络中任何疯狂的事情都可能发生），这不仅发生在我身上，而且发生在我认识的所有人身上。

**编辑：**

请注意，即使 URL 已经有`GET`变量，也会发生这种情况，例如，我有一个博客，有时请求此页面（我更改了域）：

[http://myblogdomain.com/wp-admin/admin.php?page=jetpack](http://myblogdomain.com/wp-admin/admin.php?page=jetpack)

需要很长时间（有时会超时），但如果我打开一个新标签并请求：

[http://myblogdomain.com/wp-admin/admin.php?page=jetpack&foo=bar](http://myblogdomain.com/wp-admin/admin.php?page=jetpack&foo=bar)

它加载速度很快（正常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:09:55.980

It's likely that there is a caching proxy and/or firewall between you and the rest of the internet. There is probably a rule in the proxy that says URLs with GET parameters can pass through since they are likely to return unique content, but URL's without parameters must be fetched through a cache. The cache is likely overloaded or broken.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:26:42.710

您可能有一个代理需要对每个域执行一次冗长的过程（内容检查、DNS 查找等）。

当您打开第二个选项卡时，该长度过程已经开始（对于第一个选项卡），因此不会花费很长时间。

如果是这种情况，使用查询字符串打开第一个选项卡而没有打开第二个选项卡仍然会导致第二个选项卡加载速度更快。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T10:39:08.760

1-形成网络开发人员的观点：要了解有关这次花费的更多详细信息，我可以查看我最好的朋友（萤火虫）的网络选项卡

![在此处输入图像描述](../Images/eaa4d979f0ea9c127e451f16b808b9b0.png)

正如您在上面看到的，我可以看到页面上的每个步骤花费了多少时间。

2-尽管我认为应该将这个问题移至[https://serverfault.com/](https://serverfault.com/)以从网络极客那里获得答案

# wordpress - 由于某些不正确的页面重定向，无法访问 wp-admin

> ID：12885403
> 
> 赞同：0
> 
> 时间：2012-10-14T18:50:35.653
> 
> 标签：wordpress, admin

我客户的一个基于 wordpress 的网站存在无法访问其管理面板的问题。有一些页面重定向问题，我无法找出原因。我试图通过重命名“插件”文件夹来解决这个问题，但对我不起作用。

有人可以指导我解决这个问题吗？

这是截图

![wp管理问题](../Images/b2b3e0cf1e33c3a662e1c702620a7aae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:47:29.697

当我在编辑中做错了什么`.htaccess`并且基本上创建了一个无限重定向循环时，我通常会遇到这个问题，并且因为你刚刚移动了这是可能的。那是我根据你提供的相对较少的信息投入资金的地方。插件或主题也可以通过[Wp_Rewrite](http://codex.wordpress.org/Class_Reference/WP_Rewrite)创建大约相同的问题。您重命名了插件文件夹。尝试重命名主题以强制 WordPress 回退到默认主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:55:27.820

您最近是否移动了 WordPress 安装？在这种情况下，您可能需要在数据库中进行一些更新。表中的条目`wp_options`告诉 wordpress 您的安装位置，它们必须是正确的。

手动检查`siteurl`和`home`条目，或随心所欲地更改这些和其他几个硬编码条目：

```
update wp_options set option_value = replace(option_value, 'old.com', 'new.com'); 
```

# c# - 字符串替换为另一个字符C#

> ID：12885407
> 
> 赞同：0
> 
> 时间：2012-10-14T18:50:41.580
> 
> 标签：c#, c#-4.0

我的消息通常在 SMSgateway 中是这样的（网关将消息转发到我们的应用程序），

> sett pØll 1 2 3 4 5 6 7 8 121011（此消息正确）

但在某些情况下，这条消息就像，

> sett p&oslas;ll 1 2 3 4 5 6 7 8 121011（此消息不正确，Ø 附带&oslas;）

此消息以字符串形式出现，当消息到来时 &oslas; 我需要将其替换为Ø。有时它带有另一个名称，例如 gordØn(gord&oslas;n) 它总是以 & 符号 & 结束 ; 符号。

在这里我尝试做到这一点，但我的知识不足以完成这个..

```
 protected void Page_Load(object sender, EventArgs e)
{

    try
    {
        string mobileNo = Request.QueryString["msisdn"];
        int  dest = int.Parse(Request.QueryString["shortcode"].ToString());
        string messageIn = Request.QueryString["msg"];
        string operatorNew = Request.QueryString["operator"];

        string []reparr = messageIn.Split(' ');//split it & then check contains
        reparr[1].Contains = '&';
        reparr[1].Contains = ';';
        // In here i need to check that character & replace it to originalone.

        Label1.Text = "ok";

        WriteToFile(mobileNo, dest, messageIn, operatorNew,true,"",""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:52:50.843

这些看起来像 HTML 实体。您可以尝试使用以下方法对它们进行解码[`HttpUtility.HtmlDecode`](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)：

```
string messageIn = HttpUtility.HtmlDecode(Request.QueryString["msg"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:04:12.860

I am not aware about web namespace utilities but you may use below code (if position of & and ; is always going to be in beginning of message and these characters will not appear inside message text):

```
String s = @"sett p&oslas;ll 1 2 3 4 5 6 7 8 121011";
Int32 startIndex = s.IndexOf("&");
String s1 = s.Replace(s.Substring(startIndex, s.IndexOf(";") - startIndex + 1), "Ø"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:54:51.753

您可以使用 HttpServerUtility.UrlDecode 来解码 url 参见[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.urldecode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.urldecode.aspx)

# bash - ack-grep 安装脚本中不熟悉的 shell 语法

> ID：12885417
> 
> 赞同：5
> 
> 时间：2012-10-14T18:51:44.247
> 
> 标签：bash, shell, installation, ack

从 ack 安装页面 (http://betterthangrep.com/install/) 有一个带有 curl 的单行安装：

```
curl http://betterthangrep.com/ack-standalone > ~/bin/ack && chmod 0755 !#:3 
```

我知道它是从网站获取文件并将其保存到 ~/bin/ack，然后设置权限，但最后一部分 (!#:3) 是做什么的？（我不认识语法，谷歌搜索没有产生任何有用的结果）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T19:03:12.510

请参阅 man bash 中名为 HISTORY EXPANSION 的部分，特别是 Word Designators 小节。 `!#:3`指管道的第三个单词，即（在您的示例中）`~/bin/ack`。按顺序，命令的单词是`curl`, 0; `http://betterthangrep.com/ack-standalone`, 1; `>`, 2; `~/bin/ack`, 3; `&&`, 4; `chmod`, 5; `0755`, 6; `!#:3`, 7\. 也就是说，`!#:3`是一种重复文件名而不使用单独的变量或文字文本的方法。

关于`>`和空格的问题，请注意这`>`是一个元字符，man bash 将其定义为“在不加引号时分隔单词的字符。以下之一： | &; ( ) < > 空格制表符”。所以空格不影响是否`>`算作记号。但请注意，在以下示例中，`3`引用了第一个，以便 bash 不会将其解释为`3>`重定向的一部分。输入该行时，bash 会回显扩展的行，然后执行它。

```
$ seq '3'>bbb;cat !#:3 !#:2 ccc; head !#:3 !#:8
seq '3'>bbb;cat bbb > ccc; head bbb ccc
==> bbb <==
1
2
3

==> ccc <==
1
2
3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T19:03:37.127

`!#`表示执行到目前为止键入的命令，但您可以使用 . 指定参数`:n`。`:0`将是第一个单词 ( `curl`)，`:1`第二个单词 ( )`http...`等等。

# routing - Angular JS：同一页面上有2个应用程序，只有1个应该影响浏览器的位置

> ID：12885422
> 
> 赞同：3
> 
> 时间：2012-10-14T18:52:31.690
> 
> 标签：routing, angularjs

我正在寻找一种在单个页面上托管 2 个 Angular JS 应用程序的解决方案。额外的要求是，这些应用程序中只有 1 个应该依赖/影响真实 URL。这是代码：

```
<!doctype html>
<html>
<head>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.2/angular.min.js"></script>

    <script type="text/javascript">
        var app1 = angular.module("app1", [], function($routeProvider) {
            $routeProvider
                    .when("/1", { template: "<h1>app 1 page 1</h1>" })
                    .when("/2", { template: "<h1>app 1 page 2</h1>" })
                    .otherwise({ redirectTo: "/1" });
        });

        var app2 = angular.module("app2", [], function($routeProvider) {
            $routeProvider
                    .when("/1", { template: "<h1>app 2 page 1</h1>" })
                    .when("/2", { template: "<h1>app 2 page 2</h1>" })
                    .otherwise({ redirectTo: "/1" });
        });

        $(function() {
            angular.bootstrap($(".app1")[0], ["app1"]);
            angular.bootstrap($(".app2")[0], ["app2"]);
        });
    </script>
</head>

<body>
    <div class="app1">
        <h1>App 1</h1>
        <ul>
            <li><a href="#/1">Go 1</a></li>
            <li><a href="#/2">Go 2</a></li>
        </ul>
        <ng-view></ng-view>
    </div>

    <div class="app2">
        <h1>App 2</h1>
        <ul>
            <li><a href="#/1">Go 1</a></li>
            <li><a href="#/2">Go 2</a></li>
        </ul>
        <ng-view></ng-view>
    </div>
</body>

</html> 
```

我想做的是：

**当用户`#/1`手动导航到时，结果是：**

```
app 1 page 1
app 2 page 1 
```

**当用户`#/2`手动导航到时，结果是：**

```
app 1 page 2
app 2 page 1 
```

**当用户单击 app1 中的链接时，这些链接确实会影响浏览器的位置，这些链接由 app1 处理，并且 app2 始终重置为其`#/1`（因此，无论 URL 是什么，app2 都应该是它自己的`#/1`）。**

**当用户点击app2中的链接时，这不会影响浏览器的位置，这些链接不被app1处理，只有app2受到影响。当用户点击 Refresh 时，app2 应重置为其“零状态”，即`#/1`**

我能想到的唯一解决方案是摆脱 app2 中的路由，而只使用`onclick`/`ng-click`作为链接。这似乎是一个肮脏的黑客。

我仍然可以在 app2 中使用路由吗？如果您有这个想法，可能您知道解决问题的完全不同的解决方案 - 如果您分享它也会不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:04:31.183

通常需要在同一页面上使用多个应用程序。

这有帮助吗？
--> [http://jsfiddle.net/2yUAD/1/](http://jsfiddle.net/2yUAD/1/) <--

基本思想（这就是我使用这个出色的框架处理多应用程序的方式）是“分出”模块应用程序。我总是有一个“页面”应用程序，并随时随地初始化子应用程序。

干杯。

# api - 有没有办法查看与打开的图形对象关联的操作？

> ID：12885423
> 
> 赞同：2
> 
> 时间：2012-10-14T18:52:32.687
> 
> 标签：api, facebook-graph-api, facebook-opengraph

我有一个自定义的打开图形操作，它将用户连接到一个打开的图形对象。

是否有可能（使用 facebook api）：

1）给定一个用户和一个对象——看看两者之间是否存在联系？

2) 查看与给定对象的所有连接

也许有 FQL 之类的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:19:09.193

给定动作类型和用户，您可以检查该用户所做的所有动作

```
/USER_ID/namespace:action 
```

这将返回一组基于此类型的操作。

如果您指的是页面中定义的元对象，则目前无法从 FQL 中查询此对象，除此之外

```
 SELECT url, id, type, site FROM object_url WHERE id = object_id 
```

这并没有真正的帮助，因为也没有办法列出与用户关联的对象

# javascript - 表单按钮 onclick 打开一个新页面

> ID：12885429
> 
> 赞同：1
> 
> 时间：2012-10-14T18:52:52.873
> 
> 标签：javascript, button, onclick

我在按钮 onclick 上调用下面的脚本，其中 .value 是依赖于下拉部分的 URL。当单击按钮时，我希望生成的 URL 在新窗口 ('_blank') 中打开。我怎样才能修改这个代码来做到这一点？任何帮助表示赞赏。

```
function openResultsPage() {
    if(document.getElementById('selectedRace').value){
                            window.location.href = document.getElementById('selectedRace').value;
                        }   
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T18:59:28.747

你可以试试这个：

```
function openResultsPage() {
  if(document.getElementById('selectedRace').value){
    var href = document.getElementById('selectedRace').value
    window.open(href,'_blank').value;
  }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:56:12.820

您应该使用 window.open 打开一个新窗口

**注意：**我在第三个参数中使用高度和宽度来确保 window.open 打开新窗口而不是新选项卡

```
function openResultsPage() {
    if(document.getElementById('selectedRace').value) {
        window.open(document.getElementById('selectedRace').value,'','width=700, height=500');
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:55:40.333

你可以试试这个。

```
<head>
<base target="_blank">
</head> 
```

# xcode - 您可以在 xCode 4.5.1 中将默认笔尖大小设置为 3.5" 吗？

> ID：12885435
> 
> 赞同：0
> 
> 时间：2012-10-14T18:53:35.933
> 
> 标签：xcode, view, size, default, nib

自从每次我创建新的笔尖或故事板时将 xCode 更新到最新版本（v. 4.5.1）后，它假定默认视图大小为 4 英寸（即：反映新的 iPhone 5）。但是，我正在工作通过许多教程和教科书，我正在学习 Objective C，它们都使用 3.5" 视图大小。我知道如何进入并将视图大小更改回 3.5 英寸（根据我之前的帖子/问题[在这里](https://stackoverflow.com/questions/12750862/change-default-xib-view-in-xcode-4-5-to-3-5-and-not-4)），但我想知道 xCode 中是否有一种方法可以在每次创建时将 3.5 设置为永久默认视图大小一个新的笔尖/故事板。我环顾四周，没有明显的方法。我真的厌倦了一遍又一遍地将笔尖/视图设置为 3.5 英寸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T03:44:44.683

如果您的界面使用故事板：

使用“文本编辑器”打开 *.Storyboard

然后走到尽头并找到 `<simulatedScreenMetrics key="destination" type="retina4"/>`

删除 `type="retina4"`

那么它将是 3.5 的默认尺寸”

如果不是 Storyboard，它使用 Xib 也许你应该编辑每个文件。 [如何在界面生成器中制作与 4 英寸 iPhone 兼容的 uitableview](https://stackoverflow.com/questions/12406505/how-to-make-a-uitableview-in-interface-builder-compatible-with-a-4-inch-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:30:57.803

在 xib 中，如果单击主视图，则可以在模拟指标中选择大小。和故事板一样，你选择一个 viewController，你可以在模拟指标中选择大小

# javascript - 提交 HTML 表单以在新页面中显示输入的信息

> ID：12885442
> 
> 赞同：0
> 
> 时间：2012-10-14T18:54:21.813
> 
> 标签：javascript, html, forms

我有一个 HTML 表单（称为**form.html**）和一个 JavaScript 函数，这样当提交表单时，就会显示该表单中的信息。
现在我希望所有这些信息都显示在新的 HTML 页面（称为**confirm.html**）中，我应该从哪里开始？

**注意：**没有 php 或服务器端或任何真正相关的东西，这只是简单的离线 HTML 表单问题，我在同一个文件夹中只有 2 个 html 位置，我将在我的浏览器上对其进行测试，仅此而已。我唯一担心的是如何在 confirm.html 文件中使用 form.html 文件中的信息，因为它们显然是分开的。

非常感谢，这是我的 form.html（我还没有 confirm.html）

```
 <HTML>
      <HEAD>
        <TITLE>Contact</TITLE>

        <script type="text/javascript">

          function addtext()
          {
             var fname = document.myform.first_name.value;
             var lname = document.myform.last_name.value;
             var email = document.myform.email.value;

             document.writeln("Thank you! You have just entered the following:");
             document.writeln("<pre>");
             document.writeln("First Name    : " + fname);
             document.writeln("Last Name     : " + lname);
             document.writeln("Email Address : " + email);
          }
        </script>
      </HEAD>
      <BODY>

      <center>
<b>CONTACT US</b> <br></br>   
<form name="myform">

  <label for="first_name">First Name </label>
  <input  type="text" name="first_name" maxlength="50" size="30">
    <br>
  <label for="last_name">Last Name </label>
  <input  type="text" name="last_name" maxlength="50" size="30">
    <br>
  <label for="email">Email Address</label>
  <input  type="text" name="email" maxlength="80" size="30">
    <br>
  <input type="submit" value="Submit" onClick="addtext()">

</form>

    </BODY>
    </HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:01:03.363

查看`window`JavaScript 的对象：http: [//www.devguru.com/technologies/javascript/10855.asp](http://www.devguru.com/technologies/javascript/10855.asp)

它有一个属性`location`，如果你写进去，你的浏览器会重定向：

```
window.location = "http://www.google.com"; 
```

但请注意，这不会将**您**的数据发布到 confirm.html。您在没有服务器端脚本的情况下尝试做的事情并不是很有用。HTML 表单将使用[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)（通用网关接口）将数据发送到服务器，然后服务器可以处理信息。如果您使用该`file://`协议（正如您似乎正在做的那样；所有本地静态文件），则没有服务器端来处理数据，只有 JavaScript。

如果使用 GET 方法通过 CGI 发送数据，您可以使用 javaScript 从 URL 中提取数据（如另一个[问题](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)中所述）。为此，只需`form`像这样更新您的：

```
<form action="confirm.html" method="get"> 
```

并且不要`onClick`在提交按钮上放置处理程序，只需让它提交即可。

尽管存在许多其他工具，但这种方式更适合这项工作：服务器端脚本语言，示例包括 PHP、ASP、JSP。对于本地设置，最好使用[XAMPP](http://www.apachefriends.org/en/xampp.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:29:53.590

如果您不想依赖服务器端技术，这会变得更加复杂（我可能会补充一点，也很老套）。可能最简单的方法是在提交时生成这样的 url -

```
http://localhost/confirm.html?first_name=val1&last_name=val2&email=val3 
```

然后添加一些代码到confirm.html 来解压它。[这是](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)一个您可能会发现有帮助的相关问题。

如果您允许我发表一下社论，您到底想做什么？如果这只是一个了解 html 工作原理的个人项目，那么我强烈建议您开始学习服务器端技术——一旦您开始想要处理用户数据并保持状态，您几乎不得不使用服务器. 网络在设计上是无状态的；如果不使用服务器，或者通过一些非常复杂的 AJAX 和 DOM 更新技术（无论如何往往依赖于专门的服务器文件），您就无法在页面之间传递变量。您可以使用现有技术在本地运行 PHP 和 MySQL 服务器，如果您有兴趣扩展您的 Web 技术知识，这是不可避免的一步。

# android - 小部件 post() 与处理程序 post() 之间有什么区别？

> ID：12885443
> 
> 赞同：7
> 
> 时间：2012-10-14T18:54:22.200
> 
> 标签：android

我有一个 WebView，我在 AsyncTask.doInBackground 中使用 loadUrl 对其进行了初始化。我像下面这样初始化它：

```
webView.post(new Runnable() {               
    @Override
    public void run() {
        webView.loadUrl(authURL);                   
    }
}); 
```

AsyncTask 在 Activity.onCreate() 中最后执行，问题是大多数时候网页没有加载，我看到白屏。如果我用处理程序替换 webView，那么一切都很好。我在这里想念什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T03:46:17.293

如果它需要在 UI 线程上运行，你为什么要这样做`doInBackground()`？

`Hander.post()`和之间的区别在于`View.post()`，它将在创建实例的线程（不一定是 UI 线程）`Handler`上运行您的代码，而始终在 UI 线程上运行它（因为视图绑定到它）。`Handler``View`

# web-services - OWL API - Web 服务发现上下文中的 OWL 类包含测试

> ID：12885444
> 
> 赞同：3
> 
> 时间：2012-10-14T18:54:28.923
> 
> 标签：web-services, semantic-web, owl, service-discovery, reasoning

我有非常艰巨的任务摆在我面前，所以我欢迎任何帮助和建议。

我必须实现 Java Web 服务，该服务将匹配另外两个给定的 Web 服务以实现语义相似性。这两个其他 Web 服务将使用 OWL-S 来描述，它使用来自 OWL 本体的概念。S1 将是我正在寻找的 Web 服务（我的查询），而 S2 将是存储库中的服务（广告）。所以我需要从我的 Java 代码中访问 OWL-S 描述和 OWL 本体。

我正在使用 Eclipse、Tomcat、OWL API 和 HermiT 语义推理器。

我有非常原始的匹配算法，主要目标是将服务 S1 输入和输出与 S2 输入和输出进行匹配。

我是这个主题的初学者，我从未使用过 OWL API，也从未使用过本体。

我目前的待办事项清单： 1\. 从 OWL-S 加载一个过程参数类型（OWL 类）。假设 S1 输入是 C1 类型，S2 输入是 C2 类型。2\. 查找类 C1 和 C2 是否在我的本体 O 中。 3\. 检查类 C2 是否包含类 C1，或者它们在我的本体 O 中是否在语义上相同。

对于这些任务，我将不胜感激任何我找不到的代码示例或片段。特别是检查 C2 类是否包含 C1 类。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:24:01.457

OWLAPI 网站上有一些关于使用 OWL-API 的合理[文档](http://owlapi.sourceforge.net/documentation.html)，其中一些示例应该为您提供足够的信息来实现您正在考虑的基本算法。

此外，在“OWL 语义服务匹配”上进行谷歌学术搜索——在这个领域有很多先前的工作。这对代码示例没有帮助，但有更复杂的服务匹配方案可供您在基本示例运行后尝试。另外，如果你打算在这个领域工作，了解其他人一直在做什么会有所帮助。

最后，您可能想查看[OWL-S API](http://on.cs.unibas.ch/owls-api/)，我认为它基于 Jena，因此您必须废弃您当前拥有的任何代码，但它是为使用 OWL-S 服务描述而设计的有效 API，这可能会让你的生活更轻松。

# emacs - Emacs 插入寄存器

> ID：12885447
> 
> 赞同：0
> 
> 时间：2012-10-14T18:54:35.700
> 
> 标签：emacs, insert

我正在编写一个函数来插入寄存器“N”。问题是当我插入寄存器时，它会将点放在插入的寄存器之前，而我希望该点位于我插入的任何寄存器之后。

我试图通过尝试`set-command-mark`( `C-SPC`) 两次，然后插入寄存器，然后弹出标记两次 ( `C-u` `C-SPC`*2) 来完成此操作。我想免费做这个宏，但问题是我不知道用什么论据来提供帮助`set-command-mark`。也许有人知道如何让它以这种方式工作，或者有更好的主意？

如果需要更多代码来说明案例：

```
(defun Navi-insert-register ()
 (interactive)
  (set-mark-command)
  (set-mark-command)
  (insert-register ?N)
 ...
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:37:10.167

来自插入注册文档

> 通常将点放在插入的文本之前和标记之后。如果可选的第二个参数不为零，则将标记放在前面并指向后面。

只需将第二个参数作为`t`.

```
(defun Navi-insert-register ()
 (interactive)
 (insert-register ?N t)
) 
```

# ruby - Heroku 上没有这样的文件 'config/database.yml'

> ID：12885453
> 
> 赞同：4
> 
> 时间：2012-10-14T18:55:05.653
> 
> 标签：ruby, heroku, rack

我的应用程序是一个 Ruby 机架应用程序。当我的 Heroku 应用程序启动时，它会中断，因为

> /app/config.ru:8:in `read': 没有这样的文件或目录 - config/database.yml (Errno::ENOENT)

为什么会这样？我了解 Heroku 旨在创建此文件 [https://devcenter.heroku.com/articles/cedar-migration](https://devcenter.heroku.com/articles/cedar-migration)

> 数据库凭据仍将自动配置：在 slug 编译时，从环境中解析 DATABASE_URL 的 config/database.yml 将被写入应用程序。

令人沮丧的是，[https:](https://devcenter.heroku.com/articles/ruby) //devcenter.heroku.com/articles/ruby 上的文档没有解释`database.yml`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:33:56.237

好的，第一件事 - heroku 不使用 database.yml 文件。默认情况下，rails app 会自动从 config/ 目录加载它。并且无需在 config.ru 中手动加载。如果你想在 heroku PosgreSQL 中使用 - 只需添加附加组件。Heroku 将做所有其他事情来链接您的应用程序和数据库。如果您想使用外部 MySQL 服务器，您应该使用 Amazon RDS 插件

```
heroku addons:add amazon_rds url=mysql2://user:pass@dbhost/dbname 
```

通过这个你可以使用任何数据库。我通过 Amazon RDS 插件使用 GoDaddy mysql 基础。

无论如何，您的 config.ru 第 8 行中的问题类似于

```
read 'config/database.yml' 
```

删除它并查看与heroku不冲突的其他方式

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:32:17.110

Heroku 似乎只有`config/database.yml`在您有一个`config`处于源代码控制之下的文件夹时才会创建它。文档中没有解释。

# mysql - 如何构造一个mysql子查询

> ID：12885454
> 
> 赞同：1
> 
> 时间：2012-10-14T18:55:28.393
> 
> 标签：mysql, group-by

我有一个用户表和一个约会表。对于任何一天，我想要一个选择

1) 预约的 user_id

2) 该用户在指定日期的约会次数。

似乎我可以其中一个，但我不确定如何使用一个查询来做到这一点。例如，我可以这样做：

```
SELECT user_id FROM appt_tbl WHERE DATE(appt_date_time) = '2012-10-14' 
group by user_id; 
```

这将为我提供当天有约会的用户，但我如何向此查询添加另一列，该列将为我提供每个用户有多少约会？假设我需要某种子查询，但我不确定如何构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:58:20.537

尝试将 COUNT(*) 添加到您的查询中：

```
SELECT user_id, COUNT(*) FROM appt_tbl WHERE DATE(appt_date_time) = '2012-10-14' 
group by user_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T18:58:38.533

SQL 使用“聚合函数”的概念来获取这些信息。您可以将它们与任何聚合查询一起使用（即其中包含“分组依据”）。

```
SELECT user_id, count(*) as num_apts ... 
```

# c# - 有没有办法在 C# 中简化这种反射委托代码？

> ID：12885459
> 
> 赞同：3
> 
> 时间：2012-10-14T18:55:55.397
> 
> 标签：c#, reflection, delegates

在[这个](https://stackoverflow.com/a/12867132/171121)响应中，我提出了以下帮助方法，不同的`Task`创建者可以重用它来将事件转换为任务完成源。

```
// Helper method
static Task<T> TaskFromEventHelper<T>(object target, string eventName, Func<TaskCompletionSource<T>, object> resultSetterFactory) {
    var tcs = new TaskCompletionSource<T>();
    var addMethod = target.GetType().GetEvent(eventName).GetAddMethod();
    var delegateType = addMethod.GetParameters()[0].ParameterType;
    var d = Delegate.CreateDelegate(delegateType, resultSetterFactory(tcs), "Invoke");
    addMethod.Invoke(target, new object[] {d});
    return tcs.Task;
}

// Empty events (Action style)
static Task TaskFromEvent(object target, string eventName) {
    return TaskFromEventHelper(target, eventName, (Func<TaskCompletionSource<object>, object>)(tcs => (Action)(() => tcs.SetResult(null))));
}

// One-value events (Action<T> style)
static Task<T> TaskFromEvent<T>(object target, string eventName) {
    return TaskFromEventHelper(target, eventName, (Func<TaskCompletionSource<T>, object>)(tcs => (Action<T>)(tcs.SetResult)));
}

// Two-value events (Action<T1, T2> or EventHandler style)
static Task<Tuple<T1, T2>> TaskFromEvent<T1, T2>(object target, string eventName) {
    return TaskFromEventHelper(target, eventName, (Func<TaskCompletionSource<Tuple<T1, T2>>, object>)(tcs => (Action<T1, T2>)((t1, t2) => tcs.SetResult(Tuple.Create(t1, t2)))));
} 
```

在我给出的使用辅助方法的三个示例中，都有一个`tcs.SetResult`组件，这让我认为也有一种方法可以将其移至辅助方法，这可能会简化签名，因此辅助方法可能只有接受 a `Func<?, T>`，这`Func`将获取 the 的输出`event`并将其转换为任何`tcs.SetResult`需要的内容。

即，我认为必须有一种方法来创建一个助手，所以我可以把它写成

```
// Empty events (Action style)
static Task TaskFromEvent(object target, string eventName) {
    return TaskFromEventHelper<object>(target, eventName, new Func<object>(() => null));
}

// One-value events (Action<T> style)
static Task<T> TaskFromEvent<T>(object target, string eventName) {
    return TaskFromEventHelper<T>(target, eventName, new Func<T, T>(t => t));
}

// Two-value events (Action<T1, T2> or EventHandler style)
static Task<Tuple<T1, T2>> TaskFromEvent<T1, T2>(object target, string eventName) {
    return TaskFromEventHelper<Tuple<T1, T2>>(target, eventName, new Func<T1, T2, Tuple<T1, T2>>(Tuple.Create));
} 
```

，但这就是为什么我不知道上面`?`的内容。`Func<?, T>`例如，这个需要 `?`是*两个*参数。它可以以`object`某种方式传递吗？我觉得这是可能的，但如果是这样的话，它需要一些真正的反射魔法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:31:01.393

您可以使用`Expression`：

```
static Task<T> TaskFromEventHelper<T>(object target, string eventName, Delegate resultSetter)
{
    var tcs             = new TaskCompletionSource<T>();
    var addMethod       = target.GetType().GetEvent(eventName).GetAddMethod();
    var delegateType    = addMethod.GetParameters()[0].ParameterType;
    var methodInfo      = delegateType.GetMethod("Invoke");
    var parameters      = methodInfo.GetParameters()
                                    .Select(a => Expression.Parameter(a.ParameterType))
                                    .ToArray();

    // building method, which argument count and
    // their types are not known at compile time
    var exp = // (%arguments%) => tcs.SetResult(resultSetter.Invoke(%arguments%))
        Expression.Lambda(
            delegateType,
            Expression.Call(
                Expression.Constant(tcs),
                tcs.GetType().GetMethod("SetResult"),
                Expression.Call(
                    Expression.Constant(resultSetter),
                    resultSetter.GetType().GetMethod("Invoke"),
                    parameters)),
            parameters);

    addMethod.Invoke(target, new object[] { exp.Compile() });
    return tcs.Task;
} 
```

# html - CSS 截断输入框的结尾

> ID：12885465
> 
> 赞同：4
> 
> 时间：2012-10-14T18:56:31.683
> 
> 标签：html, css

看在上帝的份上！！为什么我的输入框右边被截断了？我查看了 chrome 中的填充和边距，但看不出是什么原因造成的。我对此很陌生，但这仍然是一个谜。

[http://jsfiddle.net/GCt3z/1/](http://jsfiddle.net/GCt3z/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T19:00:18.523

因为它是 100% + 10px (padding) + 2px (border) 宽。尝试使用：

```
-webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
        box-sizing: border-box; 
```

查看更新的小提琴 > [http://jsfiddle.net/GCt3z/2/](http://jsfiddle.net/GCt3z/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:00:31.330

`.fieldwrapper`有`overflow: hidden`。您设置`label`为浮动，这意味着下一个 div 将获得整个包装的宽度。这会将其移动到标签的右侧，与两个标签的父级相同。您需要为`.fieldwrapper`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:59:26.573

您的输入比其溢出设置为隐藏的父级长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:59:29.743

更改`.fieldwrapper`为`{ overflow: auto;}`，您可以看到输入溢出该 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T19:05:13.387

Try to reduce `width:100%` to `width:96%` in `.field` class, then the issue will be solved

# sql-server-2008 - SQL Server：用不同的值更新多行

> ID：12885468
> 
> 赞同：3
> 
> 时间：2012-10-14T18:57:09.657
> 
> 标签：sql-server-2008

我正在尝试使用不同的值更新多行，但不需要匹配任何特定的 ID。

当然，两个不同表上的两列将具有相同数量的记录。

例如，我有一个表`Table1`和`Column1`一个查询，其中列出了该表中*的10 个项目（`ID`不连续*）。

```
ID  ItemName
1    Item1
2    Item2
4    Item3
5    Item4
6    Item5
8    Item6
9    Item7
14    Item8
18    Item9
23    Item10 
```

现在，我有另一个表`Table2`，`Column2`我想用上面的 10 个项目进行更新。

这也有不同的 ID，但是`ItemName`是空白/空值。

```
ID   ItemName
301    NULL
321    NULL
323    NULL
331    NULL
333    NULL
335    NULL
336    NULL
355    NULL
377    NULL
388    NULL 
```

所以，我正在寻找一个查询，我可以在其中更新`Table2`和`Column2`中的这 10 个项目`Table1`，结果如下所示

```
ID   ItemName
301    ITem1
321    ITem2
323    ITem3
331    ITem4
333    ITem5
335    ITem6
336    ITem7
355    ITem8
377    ITem9
388    ITem10 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T19:03:22.000

```
WITH CTE1
     AS (SELECT *,
                Row_number() OVER (ORDER BY ID) AS RN
         FROM   Table1),
     CTE2
     AS (SELECT *,
                Row_number() OVER (ORDER BY ID) AS RN
         FROM   Table2)
UPDATE CTE2
SET    ItemName = CTE1.ItemName
FROM   CTE2
       JOIN CTE1
         ON CTE1.RN = CTE2.RN 
```

## [SQL小提琴](http://www.sqlfiddle.com/#!3/49aee/1)

# lua - 运算符重载不起作用

> ID：12885477
> 
> 赞同：4
> 
> 时间：2012-10-14T18:58:26.427
> 
> 标签：lua

在阅读**《Lua 编程》时**，我尝试了书中给出的运算符重载示例

```
Set = {}

mt = {}
mt.__add = Set.union

--create a new set with the values of the given list
function Set.new (l) 
    local set = {}
    setmetatable (set, mt)
    for _, v in ipairs (l) do 
        set [v] = true
    end
    return set
end 

function Set.union (a, b)
    local result = Set.new {}
    for k in pairs (a) do result [k] = true end
    for k in pairs (b) do result [k] = true end
    return result
end

function Set.intersection (a, b)
    local result = Set.new {}
    for k in pairs (a) do result [k] = b[k] end
    return result
end

function Set.tostring (set)
    local l = {}
    for e in pairs (set) do
        l[#l + 1] = e
    end
    return "{" .. table.concat (l, ", ") .. "}"
end 

function Set.print (s)
    print (Set.tostring (s))
end 

s1 = Set.new {10, 20, 30, 50}
s2 = Set.new {30, 1}

Set.print (s1)
Set.print (s2)

s3 = s1 + s2
Set.print (s3) 
```

但是最近`lua for windows`我收到以下错误

```
lua: C:\meta.lua:47: attempt to perform arithmetic on global 's1' (a table value)
stack traceback:
    C:\meta.lua:47: in main chunk
    [C]: ?
{30, 10, 20, 50}
{1, 30} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T21:32:31.263

你做这个任务太早了：

```
mt.__add = Set.union 
```

因为`Set.union`还没有初始化。

将其移至下方`Set.union`，它将起作用。

出于同样的原因，如果你分配`mt.__mul`，这应该在下面`Set.intersection`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T19:06:25.870

您需要定义`mt`为合适的元表：

```
mt = { __add = Set.union, __mul = Set.intersection, __tostring = Set.tostring } 
```

# delphi - Delphi 异常不允许我看到局部变量

> ID：12885480
> 
> 赞同：6
> 
> 时间：2012-10-14T18:58:48.870
> 
> 标签：delphi

在 Delphi 中调试时，异常会正确地告诉我导致错误的代码行，但我无法访问任何局部变量。这是调试器的限制吗？还是我错过了一些简单的东西？目前我只好把所有的局部变量都镜像到一个全局的就行了，重新编译程序，希望能再次出现同样的异常。

例如

```
MyArray[I]:=Foo(...); 
```

如果`I`超出范围（打开边界检查），我看不到变量`I`是什么，除非我将它镜像到上一行的全局范围的调试变量。

或者如果我有

```
MyInteger:=Trunc(MyFloat), 
```

而且`MyFloat`是`6.1E+17`，我不知道它的价值是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T21:38:50.560

当您在调用堆栈窗口中选择正确的行时，您可以看到局部变量的值。在引发异常之前通常是一两行。

实施时我手头没有确切的版本，但它绝对是较新的版本之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:21:44.713

据我所知，“问题”是由编译器引起的。编译器的优化功能就像一个垃圾收集器，它在不再使用时释放函数中声明的变量。

为了克服这个问题，编写一个异常处理程序并在异常捕获块中伪造使用该变量。

# python - SQLAlchemy 查询函数

> ID：12885494
> 
> 赞同：0
> 
> 时间：2012-10-14T19:00:34.373
> 
> 标签：python, python-2.7, sqlalchemy

我有一个函数，它接受一个参数，运行一个查询，最后在某些计算后返回一些值。

我的查询与此类似：

```
def my_function(passed_argument):
    query = Session.query(t).filter(t.column_c == passed_argument).all()
    # ... do some work with query
    return some_value 
```

然而，我想要实现的是：向函数传递一个包含多个值的列表（而不是单个参数），并让 t.column_c 匹配其中的任何一个。

前任。**`Select * from t where column_c = my_list[0] or column_c = my_list[1] or column_c = my_list[2] ..`**等等。

这样做的方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:08:47.150

我会推荐这样的东西：

```
def my_function(*passed_arguments):
    query = Session.query(t).filter(t.column_c.in_(passed_arguments)).all()
    # ... do some work with query
    return some_value 
```

您可以像这样调用该方法：

```
my_function(123, 456, 789) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:09:35.380

您可以使用 SQL 关键字将该过滤放入查询中`IN`：

```
SELECT col1 FROM table WHERE col1 IN (2,3,5,7)
SELECT col2 FROM table WHERE col2 IN ('text1','text2') 
```

# android - 在 Android 上使用 ORMLite 保存集合时出现问题

> ID：12885499
> 
> 赞同：4
> 
> 时间：2012-10-14T19:00:57.377
> 
> 标签：android, ormlite

我有两个班级：

```
public class Questionnaire {

    @DatabaseField(generatedId=true, useGetSet=true)
    private Long id;

    @DatabaseField
    private int type;

    @DatabaseField
    private String title;

    @DatabaseField
    private String description;

    @ForeignCollectionField(eager = true)   
    private Collection<Question> questions; 
// Get and Set omitted 
```

和

```
 public class Question {

        @DatabaseField(generatedId=true, useGetSet=true)
        private Long id;

        @DatabaseField
        private int type;

        @DatabaseField
        private String description;

        @DatabaseField(foreign = true, foreignAutoRefresh= true)
        private Questionnaire questionario;
//get and set ommited 
```

当我保存带有问题列表的问卷时。对象是持久的，但我失去了关系。

我这样保存：

```
ForeignCollection<Question> questions =
    getDao(Questionnaire.class).getEmptyForeignCollection("questions");

for(Question question : DataUtil.getAllQuestions()) {
    questions.add(question);
}

Questionnaire questionnarie = new Questionnaire();
questionnarie.setQuestions(questions);
questionnarie.setTitle("Normal");
questionnarie.setDescription("Questionário normal");
getDao(Questionnaire.class).createOrUpdate(questionarie); 
```

当我从数据库中检索此寄存器时，`Question`数据没有参考`Questionnaire`，并且我`Questionnaire`没有填写问题列表。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T15:29:21.463

问题是您没有在对象`questionario`上设置字段。`Question`关系是从`Question`到关联`Questionnaire`。表中没有任何东西`Questionnaire`指向相反的方向。请参阅[有关异物的文档](http://ormlite.com/docs/foreign-object)。

我建议执行以下操作：

```
Dao<Questionnaire, Long> dao = getDao(Questionnaire.class);
ForeignCollection<Question> questions =
    dao.getEmptyForeignCollection("questions");

Questionnaire questionnarie = new Questionnaire();
questionnarie.setQuestions(questions);
questionnarie.setTitle("Normal");
questionnarie.setDescription("Questionário normal");
dao.createOrUpdate(questionarie);

for(Question question : DataUtil.getAllQuestions()) {
    // you must set the questionnarie field on the Question
    // if it is a generated-id, it must be set _after_ it has been created
    question.setQuestionnaire(questionnarie);
    questions.add(question);
} 
```

# c# - 从 Windows Mobile 打印 pdf 文件

> ID：12885508
> 
> 赞同：-1
> 
> 时间：2012-10-14T19:01:56.417
> 
> 标签：c#, pdf, printing, windows-mobile

我使用第三方库 (iText) 在 Windows Mobile 6.5 上创建了 PDF 文件，但它似乎不支持打印生成的 PDF。谁能推荐一种从移动设备打印保存的 PDF 文件的方法？

我已经在网上搜索过，但我很难找到可以让我这样做的 SDK。该应用程序是用 C# 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:48:30.943

看看这个第 3 方库[http://www.fieldsoftware.com/PrinterCE_NetCF.htm](http://www.fieldsoftware.com/PrinterCE_NetCF.htm)。

不确定它是否可用于打印 PDF，但您可以使用该库直接在选择的打印机上打印。你需要PDF文件吗？

# php - PHP语法错误问题

> ID：12885510
> 
> 赞同：1
> 
> 时间：2012-10-14T19:02:20.443
> 
> 标签：php

我的 php 脚本遇到了这个奇怪的问题。

我有

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING 
in simpleTest.php on line 82 
```

我不确定为什么我的代码不起作用。

```
<?php
    foreach ( $response->getPods() as $pod ) {
?>
      <tr>
        <td>
          <h3><?php echo $pod->attributes['title']; ?></h3>   //line 82..this gives me error...

   <?php
           foreach ( $pod->getSubpods() as $subpod ) {
     ?>
  <img src="<?php echo $subpod->image->attributes['src']; ?>">  //this would gives me error too...
              <hr>
    <?php
            }
    ?> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:04:11.597

您缺少外部 foreach 循环的右花括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:08:10.433

```
<?php foreach ( $response->getPods() as $pod ) { 
      echo "<tr><td><h3>".$pod->attributes['title']."</h3>";
      foreach ( $pod->getSubpods() as $subpod ) {
          echo "<img src='".$subpod->image->attributes['src']."'><hr>";
      }
}?> 
```

Coderabbi 是对的，缺少一个卷曲。

# asp.net - 在整个页面上显示图像

> ID：12885512
> 
> 赞同：2
> 
> 时间：2012-10-14T19:02:57.267
> 
> 标签：asp.net

当用户单击按钮时，如何在整个页面上显示图像？（意味着我在页面上有多个控件，并希望在所有控件上显示此图像）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:11:05.213

您可以在按钮单击事件中编写此行

```
ClientScript.RegisterClientScriptBlock(GetType(), "key", "javascript: document.body.background = 'Untitled.jpg'; document.body.style.backgroundRepeat = 'no-repeat'; document.body.style.backgroundPosition = '300px 300px'; ", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:20:51.310

您正在寻找[模态窗口](http://en.wikipedia.org/wiki/Modal_window)，有一些很棒的 jQuery 插件。我真的很喜欢一个叫[Reveal](http://www.zurb.com/playground/reveal-modal-plugin)的。

自己做。设置一个“位置：绝对”和一个高于 div 上其他元素的“z-index”，并触发它使用 javascript 显示/隐藏，你应该没问题。

# .net - #IF Silverlight 用于接口

> ID：12885518
> 
> 赞同：0
> 
> 时间：2012-10-14T19:03:38.490
> 
> 标签：.net, silverlight, multi-targeting

我有一个多目标域项目（SL 和 .Net 4.0），颜色等问题我正在使用#if SILVERLIGHT 构造，但现在我需要使用我的域项目的 SL 项目有几个实现 INotifyDataErrorInfo 的类不是在 .Net 4.0 站点上实施，我永远不会使用它。

我将不胜感激如何制作这样的东西

```
public class MyDomainClass: INotifyPropertyChanged, #IF Silverlight INotifyDataErrorInfo
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:24:45.587

假设您可以在 silverlight 中使用 partial 关键字：

```
public partial class MyDomainClass: INotifyPropertyChanged 
{
 // implement everything on INotifyPropertChanged 
}

#IF Silverlight 
public partial class MyDomainClass:INotifyDataErrorInfo 
{
     // implement everything on INotifyDataErrorInfo 
     // if needed using the stuff from the 'shared' class
}
#ENDIF 
```

# c# - C# 继承构造函数

> ID：12885519
> 
> 赞同：0
> 
> 时间：2012-10-14T19:03:44.560
> 
> 标签：c#, asp.net, asp.net-mvc, class, constructor

我有许多类属性，并且只为一个字段创建另一个构造函数比继承之类的更难。

例如，我有一个带有一个主构造函数和一个带有一个参数的构造函数的类

```
public class mySampleClass
{
    //properties
    public string Default{get;set;}

    public mySampleClass()
    {
       // fill all properties with default values 
         Default = "First";  
    }

    public mySampleClass(string value)
    {
       // i want here to use default constructor and just manipulate  some property with 'value' 
        value = Default; // value = First
    }
} 
```

第二个构造函数是否可以从第一个构造函数继承所有默认属性并仅从附加值中操作一些数据，或者我必须再次为第二个构造函数构建所有默认值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T19:05:01.330

目前尚不清楚“继承所有默认属性”是什么意思，但您可以让第二个构造函数*调用*第一个，如下所示：

```
// Class name fixed to comply with conventions
public MySampleClass(string value) : this()
{
} 
```

然而，通常情况下，你会以相反的方式做事：让参数*更少的*构造函数调用参数*更多*的构造函数，只留下最具体的构造函数做任何工作：

```
public MySampleClass() : this("default value")
{
   // Empty
}

public MySampleClass(string value)
{
   // Assign values to properties here
} 
```

这通常避免在无参数构造函数中设置默认值，然后在另一个构造函数中覆盖它。

# ruby - Sinatra：数组到 HTML 表中

> ID：12885520
> 
> 赞同：3
> 
> 时间：2012-10-14T19:03:53.657
> 
> 标签：ruby, sinatra

我是新来的西纳特拉。

我目前在一个应该使用数组的项目上工作，

*例如：* `ary = ['a','b','c']`

将其转换为 HTML 表格（可能使用 .erb 文件）。

该表应具有与字符串一样多的单列（动态）。

*例如：*

*   一种
*   b
*   C
*   （数组的任何其他项目）

我真的不知道如何做到这一点，我尝试了类似项目的代码，但没有奏效。我希望它甚至可以做到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:13:58.163

在控制器中做

```
get '/something' do
  @ary = ['a','b','c']
  erb :'something'
end 
```

在名为某事的视图中，您可以执行

```
<table>
<% @ary.each do |elem| %>
  <tr>
    <td>
      <%= elem %>
    </td>
  </tr>
<% end %>
</table> 
```

# java - How to use p:tabMenu with Ajax

> ID：12885526
> 
> 赞同：1
> 
> 时间：2012-10-14T19:04:15.807
> 
> 标签：java, jsf, jsf-2, primefaces

I have a `p:tabMenu` which is used to display tabs.

```
<p:tabMenu id="tabs" activeIndex="0" >  
    <p:menuitem value="tab1" url="/tab1.jsf" />
    <p:menuitem value="tab2" url="/tab2.jsf" />
</p:tabMenu> 
```

In order to make the loading of the tabs more smooth (I don't want to see the tab blinking) can I somehow use Ajax?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:28:11.730

缓存 ( `cache=true`) 选项卡内容将使加载更加顺畅。默认情况下启用缓存。此外，如果您想在每个选项卡更改时进行 ajax 调用，请使用以下`tabChange`事件：

```
<p:tabMenu id="tabs" activeIndex="0" dynamic="true">

    <p:ajax event="tabChange" listener="#{tabBean.onTabChange}"/>

    <p:menuitem value="tab1" url="/tab1.jsf" />
    <p:menuitem value="tab2" url="/tab2.jsf" />
</p:tabMenu> 
```

有关详细示例，请参阅[TabView - 更改侦听器](http://www.primefaces.org/showcase-labs/ui/tabviewChangeListener.jsf)演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T01:48:51.653

设置`dynamic="true"`在您的`<p:tabMenu/>`, 自动触发一个 ajax 请求。在 primefaces 演示网站上非常明显。另请参阅[primefaces 演示](http://www.primefaces.org/showcase-labs/ui/tabviewHome.jsf)。

编辑：更仔细地考虑你的问题，如果你正在寻找的视觉效果是*平滑*`effect`的，你应该将你的 tab参数设置为任何 primefaces [effects](http://www.primefaces.org/showcase/ui/effects.jsf)。我个人最喜欢的是`effect="slide"`

# emacs - Emacs 从 init 文件中的颜色主题覆盖背景颜色

> ID：12885528
> 
> 赞同：5
> 
> 时间：2012-10-14T19:04:27.147
> 
> 标签：emacs

我安装了 emacs，创建了一个 .emacs.d 目录并创建了一个 init.el 文件：

```
(require 'package)                                                              
(add-to-list 'package-archives                                                  
             '("melpa" . "http://melpa.milkbox.net/packages/") t)               
(package-initialize)                                                            

(when (not package-archive-contents)                                            
  (package-refresh-contents))                                                   

(defvar my-packages                                                             
  '(starter-kit                                                                 
    starter-kit-bindings                                                        
    starter-kit-lisp                                                            
    clojure-mode                                                                
    color-theme                                                                 
    nrepl))                                                                     

(dolist (p my-packages)                                                         
  (when (not (package-installed-p p))                                           
    (package-install p)))                                                       

(require 'color-theme)                                                          
(color-theme-initialize)                                                        
(color-theme-charcoal-black)                                                    
(color-theme-install-frame-params '((background-color . "black"))) 
```

当我打开 emacs 时，我最终得到了`color-theme-charcoal-black`颜色，其默认的灰色背景。如果我打开 init.el 和`eval-buffer`，背景会根据需要变黑。

我怎样才能在不需要的情况下获得这种影响`eval-buffer`？

我也试过：

```
(add-hook 'after-init-hook 
          '(lambda () (color-theme-install-frame-params 
                       '((background-color . "black")))) 
```

类似于这个问题： [https ://superuser.com/questions/481793/permanently-override-background-colour-of-emacs-theme](https://superuser.com/questions/481793/permanently-override-background-colour-of-emacs-theme)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:13:41.443

好吧，这不是在 Emacs 24 中设置主题的方法，但您可以修补旧主题使其像新主题一样工作。这是我为自己制作的主题示例，但您可以选择您喜欢的主题并替换值。我还没有完成这个，但它已经接近完成了:)

完成后，将文件保存到 ~/.emacs.d/themes/charcoal-black-theme.el

在你的 .emacs 中：

```
(add-to-list 'custom-theme-load-path (expand-file-name "~/.emacs.d/themes/"))
(setq custom-enabled-themes '(charcoal-black)) 
```

完成后，Emacs 会询问您是否要将主题目录和主题永久添加到启用的主题中。如果您的回答是肯定的，它会在`(custom-set-variables ...)`

示例主题如下：

[http://pastebin.com/S2BHmd5s](http://pastebin.com/S2BHmd5s)

# css - 将较宽的 div 放在较宽的 div 上

> ID：12885529
> 
> 赞同：0
> 
> 时间：2012-10-14T19:04:30.103
> 
> 标签：css, html, positioning

我是网络开发的新手。我的容器 div 设置为`margin: 0 auto; position: relative;`并显示在屏幕中间。我`banner`在容器中有一个 div，它有一些背景颜色，我想扩展屏幕的整个宽度。我决定在 div 之外使用另一个 div，`container`其背景颜色和高度与我的`banner`div 相同，并将其命名为 header。但是我怎样才能把它们放在另一个上面，更准确地说，是`container`div 放在`header`div 上？

**编辑：** 一些html：

```
<body>
  <div id="header"></div>
  <div id="container">
    <div id="banner">
      <img src="images/banner.gif" width="450" height="80" alt="parul library" />
    </div>
  </div>
</body> 
```

CSS：

```
#container{
position:relative;
top:0;
width: 968px;
background:#FFF;
margin: 0 auto;
padding-left: 10px;
padding-right: 10px;
overflow: hidden;
}

#header {
position:absolute;
top:0;
height: 80px;
background: rgb(222,239,255); /* Old browsers */

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:17:00.457

尝试将此 CSS 用于标题 div：

```
.header {
    background: #bada55;
    height: 90px;
    width: 100%;
    position: absolute;
} 
```

并确保容器具有`position: relative;`其样式定义。

这是一个工作演示：http: [//jsfiddle.net/rkJMJ/](http://jsfiddle.net/rkJMJ/)

**Update for the HTML and CSS posted in the question:**

(Added `width: 100;` to the #header style def)

```
#container{
position:relative;
top:0;
width: 968px;
background:#FFF;
margin: 0 auto;
padding-left: 10px;
padding-right: 10px;
overflow: hidden;
}

#header {
position:absolute;
top:0;
height: 80px;
width: 100%;
background: rgb(222,239,255); /* Old browsers */
} 
```

# php - How to echo only one title from $categories array

> ID：12885531
> 
> 赞同：-2
> 
> 时间：2012-10-14T19:04:40.373
> 
> 标签：php

hope someone can help with echo only "title_2 with books1,..." from multiple titles in $categories array

example arrays:

```
$categories= array(

'title_1' => "Books", 
"books1" => array( "Books1", "set1", "type"), 
"books2" => array( "books2", "set1", "type"), 
"books3" => array( "books3", "set5", "type"),

'title_2' => "Books_2", 
"books1" => array( "Books1", "set1", "type"), 
"books2" => array( "books2", "set1", "type"), 
"books3" => array( "books3", "set5", "type"),

'title_3' => "Books_3", 
"books1" => array( "Books1", "set1", "type"), 
"books2" => array( "books2", "set1", "type"), 
"books3" => array( "books3", "set5", "type"),
,....
); 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:08:50.427

This is very easy ....

```
$categories= array(

'title_1' => "Books", 
"books1" => array( "Books1", "set1", "type"), 
"books2" => array( "books2", "set1", "type"), 
"books3" => array( "books3", "set5", "type"),

'title_2' => "Books_2", 
"books1" => array( "Books1", "set1", "type"), 
"books2" => array( "books2", "set1", "type"), 
"books3" => array( "books3", "set5", "type"),

'title_3' => "Books_3", 
"books1" => array( "Books1", "set1", "type"), 
"books2" => array( "books2", "set1", "type"), 
"books3" => array( "books3", "set5", "type"),

);

echo "<pre>";
echo $categories['title_2'] , "\n"  , implode(",",$categories['books1']); 
```

Output

```
Books_2
Books1,set1,type 
```

# php - PHP 卷曲和 Cookie

> ID：12885538
> 
> 赞同：33
> 
> 时间：2012-10-14T19:05:24.840
> 
> 标签：php, authentication, cookies, curl

我对 PHP Curl 和 cookie 身份验证有一些问题。

我有一个文件**Connector.php**，它对另一台服务器上的用户进行身份验证并返回当前用户的 cookie。

问题是我想用 curl 验证成千上万的用户，但它一次只为一个用户验证和保存 COOKIES。

connector.php 的代码是这样的：

```
 <?php
    if(!count($_REQUEST)) {
        die("No Access!");
    }

    //Core Url For Services
    define ('ServiceCore', 'http://example.com/core/');

    //Which Internal Service Should Be Called
    $path = $_GET['service'];

    //Service To Be Queried
    $url = ServiceCore.$path;

    //Open the Curl session
    $session = curl_init($url);

    // If it's a GET, put the GET data in the body
    if ($_GET['service']) {
        //Iterate Over GET Vars
        $postvars = '';
        foreach($_GET as $key=>$val) {
            if($key!='service') {
                $postvars.="$key=$val&";
            }
        }
        curl_setopt ($session, CURLOPT_POST, true);
        curl_setopt ($session, CURLOPT_POSTFIELDS, $postvars);
    }

    //Create And Save Cookies
    $tmpfname = dirname(__FILE__).'/cookie.txt';
    curl_setopt($session, CURLOPT_COOKIEJAR, $tmpfname);
    curl_setopt($session, CURLOPT_COOKIEFILE, $tmpfname);

    curl_setopt($session, CURLOPT_HEADER, false);
    curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($session, CURLOPT_FOLLOWLOCATION, true);

    // EXECUTE
    $json = curl_exec($session);
        echo $json;
    curl_close($session);
?> 
```

下面是认证过程：

1.  用户输入用户名和密码：`Connector.php?service=logon&user_name=user32&user_pass=123`
2.  `Connector.php?service=logosessionInfo`根据之前使用登录服务保存的 cookie 返回有关用户的信息。

问题是此代码为每个用户将 cookie 保存在一个文件中，并且无法处理多个用户身份验证。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-14T19:11:02.617

您可以使用 curl opt 指定 cookie 文件。您可以为每个用户使用一个唯一的文件。

```
curl_setopt( $curl_handle, CURLOPT_COOKIESESSION, true );
curl_setopt( $curl_handle, CURLOPT_COOKIEJAR, uniquefilename );
curl_setopt( $curl_handle, CURLOPT_COOKIEFILE, uniquefilename ); 
```

处理它的最佳方法是将您的请求逻辑粘贴到 curl 函数中，并将唯一的文件名作为参数传递。

```
 function fetch( $url, $z=null ) {
            $ch =  curl_init();

            $useragent = isset($z['useragent']) ? $z['useragent'] : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0.2) Gecko/20100101 Firefox/10.0.2';

            curl_setopt( $ch, CURLOPT_URL, $url );
            curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
            curl_setopt( $ch, CURLOPT_AUTOREFERER, true );
            curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
            curl_setopt( $ch, CURLOPT_POST, isset($z['post']) );

            if( isset($z['post']) )         curl_setopt( $ch, CURLOPT_POSTFIELDS, $z['post'] );
            if( isset($z['refer']) )        curl_setopt( $ch, CURLOPT_REFERER, $z['refer'] );

            curl_setopt( $ch, CURLOPT_USERAGENT, $useragent );
            curl_setopt( $ch, CURLOPT_CONNECTTIMEOUT, ( isset($z['timeout']) ? $z['timeout'] : 5 ) );
            curl_setopt( $ch, CURLOPT_COOKIEJAR,  $z['cookiefile'] );
            curl_setopt( $ch, CURLOPT_COOKIEFILE, $z['cookiefile'] );

            $result = curl_exec( $ch );
            curl_close( $ch );
            return $result;
    } 
```

我用它来快速抓取。它需要 url 和一系列选项。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-02-21T19:34:33.103

在处理类似问题时，我在结合了我在网络上遇到的大量资源并添加了我自己的 cookie 处理后创建了以下函数。希望这对其他人有用。

```
 function get_web_page( $url, $cookiesIn = '' ){
        $options = array(
            CURLOPT_RETURNTRANSFER => true,     // return web page
            CURLOPT_HEADER         => true,     //return headers in addition to content
            CURLOPT_FOLLOWLOCATION => true,     // follow redirects
            CURLOPT_ENCODING       => "",       // handle all encodings
            CURLOPT_AUTOREFERER    => true,     // set referer on redirect
            CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
            CURLOPT_TIMEOUT        => 120,      // timeout on response
            CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
            CURLINFO_HEADER_OUT    => true,
            CURLOPT_SSL_VERIFYPEER => true,     // Validate SSL Certificates
            CURLOPT_HTTP_VERSION   => CURL_HTTP_VERSION_1_1,
            CURLOPT_COOKIE         => $cookiesIn
        );

        $ch      = curl_init( $url );
        curl_setopt_array( $ch, $options );
        $rough_content = curl_exec( $ch );
        $err     = curl_errno( $ch );
        $errmsg  = curl_error( $ch );
        $header  = curl_getinfo( $ch );
        curl_close( $ch );

        $header_content = substr($rough_content, 0, $header['header_size']);
        $body_content = trim(str_replace($header_content, '', $rough_content));
        $pattern = "#Set-Cookie:\\s+(?<cookie>[^=]+=[^;]+)#m"; 
        preg_match_all($pattern, $header_content, $matches); 
        $cookiesOut = implode("; ", $matches['cookie']);

        $header['errno']   = $err;
        $header['errmsg']  = $errmsg;
        $header['headers']  = $header_content;
        $header['content'] = $body_content;
        $header['cookies'] = $cookiesOut;
    return $header;
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-14T19:16:52.080

首先使用 tempnam() 函数创建临时 cookie：

```
$ckfile = tempnam ("/tmp", "CURLCOOKIE"); 
```

然后执行 curl init 将 cookie 保存为临时文件：

```
$ch = curl_init ("http://uri.com/");
curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec ($ch); 
```

或者使用存储在临时文件中的 cookie 访问页面：

```
$ch = curl_init ("http://somedomain.com/cookiepage.php");
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec ($ch); 
```

这将初始化页面的 cookie：

```
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-17T17:44:58.693

在这里您可以找到一些关于 cURL 和 cookie 的有用信息[http://docstore.mik.ua/orelly/webprog/pcook/ch11_04.htm](http://docstore.mik.ua/orelly/webprog/pcook/ch11_04.htm)。

您还可以像函数一样使用这个做得好的方法[https://github.com/alixaxel/phunction/blob/master/phunction/Net.php#L89 ：](https://github.com/alixaxel/phunction/blob/master/phunction/Net.php#L89)

```
function CURL($url, $data = null, $method = 'GET', $cookie = null, $options = null, $retries = 3)
{
    $result = false;

    if ((extension_loaded('curl') === true) && (is_resource($curl = curl_init()) === true))
    {
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_FAILONERROR, true);
        curl_setopt($curl, CURLOPT_AUTOREFERER, true);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);

        if (preg_match('~^(?:DELETE|GET|HEAD|OPTIONS|POST|PUT)$~i', $method) > 0)
        {
            if (preg_match('~^(?:HEAD|OPTIONS)$~i', $method) > 0)
            {
                curl_setopt_array($curl, array(CURLOPT_HEADER => true, CURLOPT_NOBODY => true));
            }

            else if (preg_match('~^(?:POST|PUT)$~i', $method) > 0)
            {
                if (is_array($data) === true)
                {
                    foreach (preg_grep('~^@~', $data) as $key => $value)
                    {
                        $data[$key] = sprintf('@%s', rtrim(str_replace('\\', '/', realpath(ltrim($value, '@'))), '/') . (is_dir(ltrim($value, '@')) ? '/' : ''));
                    }

                    if (count($data) != count($data, COUNT_RECURSIVE))
                    {
                        $data = http_build_query($data, '', '&');
                    }
                }

                curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
            }

            curl_setopt($curl, CURLOPT_CUSTOMREQUEST, strtoupper($method));

            if (isset($cookie) === true)
            {
                curl_setopt_array($curl, array_fill_keys(array(CURLOPT_COOKIEJAR, CURLOPT_COOKIEFILE), strval($cookie)));
            }

            if ((intval(ini_get('safe_mode')) == 0) && (ini_set('open_basedir', null) !== false))
            {
                curl_setopt_array($curl, array(CURLOPT_MAXREDIRS => 5, CURLOPT_FOLLOWLOCATION => true));
            }

            if (is_array($options) === true)
            {
                curl_setopt_array($curl, $options);
            }

            for ($i = 1; $i <= $retries; ++$i)
            {
                $result = curl_exec($curl);

                if (($i == $retries) || ($result !== false))
                {
                    break;
                }

                usleep(pow(2, $i - 2) * 1000000);
            }
        }

        curl_close($curl);
    }

    return $result;
} 
```

并将其作为`$cookie`参数传递：

```
$cookie_jar = tempnam('/tmp','cookie'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T19:12:22.150

`CURLOPT_COOKIEFILE`您可以使用和为每个用户定义不同的 cookie `CURLOPT_COOKIEJAR`。为每个用户制作不同的文件，以便每个用户在远程服务器上都有自己的基于 cookie 的会话。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-01T07:09:21.537

上面描述的解决方案，即使具有唯一的 CookieFile 名称，也可能会导致大量问题。

我们必须使用此解决方案提供大量身份验证，并且由于高文件读写操作，我们的服务器出现故障。

解决方案是使用 Apache 反向代理并完全忽略 CURL 请求。

可以在此处找到如何在 Apache 上使用代理的详细信息： [https ://httpd.apache.org/docs/2.4/howto/reverse_proxy.html](https://httpd.apache.org/docs/2.4/howto/reverse_proxy.html)

# jquery - jquery jscrollpane container acting like an iframe

> ID：12885540
> 
> 赞同：0
> 
> 时间：2012-10-14T19:05:45.633
> 
> 标签：jquery, ajax, iframe, jscrollpane, jquery-jscrollpane

I dont' want it to be an iframe for the jscrollpane container. How would i fix this problem? Right now its acting like an iframe... I'm trying to create content inside the jscrollpane container and shifting it outside of the container (using absolute positioning and negative px values), but it gets cut out from the containers.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:10:25.283

实际上jscrollpane设置溢出：隐藏在主容器上。它是设置自定义滚动的关键样式。所以如果你需要搬出一些东西，它应该在这个容器之外。您可以尝试使用填充，并尝试将其等于您的最大偏移元素。或者您可以尝试将其设置在外部并为滚动事件设置侦听器。

# node.js - 柔术'没有方法'getWindowSize'错误

> ID：12885546
> 
> 赞同：0
> 
> 时间：2012-10-14T19:06:32.357
> 
> 标签：node.js, nodejitsu

我通过运行命令在 Windows 上安装了 Jitsu：

```
npm install jitsu -g 
```

我以管理员权限在 CMD.ece 中运行了该命令。首次安装并进入密码阶段时，出现以下错误：

```
 timers.js:96
 if(!process.lsteners('uncaughtException').length) throw e:
 TypeError: Object #<MuteStrea< has no method 'getWindowSize' 
```

这只是错误的一部分，它很长，并且逐个字符地编写它需要一个小时。

当我尝试恢复密码时，错误再次发生。虽然我的帐户确认成功，但当我想重置密码时，我收到了一封电子邮件，运行了 reset passowrd 命令（“用户忘记了”），但同样的错误再次出现。

我使用 Nodjitsu PaaS。

需要你帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:04:24.997

基本上，这里最有可能发生的情况是`readline`安装在系统上的模块版本需要 node >=0.6.20 （因此 MuteStream.getWindowSize 存在），并且 npm 能够以某种方式不匹配所有内容。您可以通过确保节点和 jitsu 都是最新的来解决此问题。:)

TL；DR：将 node.js 更新到 0.8.x。

# ruby - 无法在 Lion 上构建 Ruby 1.9.3

> ID：12885548
> 
> 赞同：4
> 
> 时间：2012-10-14T19:06:38.270
> 
> 标签：ruby, macos, osx-lion

在切换到 Lion（并从头开始重建我的系统）后，我决定`rbenv`在此过程中也尝试一下。不幸的是，自从切换以来，我一直无法编译 Ruby 1.9.3，现在我仍然使用我在 Snow Leopard 上编译的 Ruby。我希望有人能发现继续躲避我的任何东西。以下是我一直在进行的假设：

*   Ruby 1.9.3-p125 及更高版本支持 clang
*   [XCode 4.3.x 引入了一些不稳定性](https://stackoverflow.com/questions/9525213/ruby-fails-on-osx-lion-with-rbenv#9612521)
*   ruby-build 项目的几个问题（例如，[#87](https://github.com/sstephenson/ruby-build/issues/87)、[#137](https://github.com/sstephenson/ruby-build/issues/137)）表明它现在可以正确处理 1.9.3 安装

到目前为止我已经尝试过：

1.  手动构建

    ```
    ./configure && make && make install 
    ```

2.  让`ruby-build`做#1。为了我。

    ```
    rbenv install -v 1.9.3-p286 
    ```

3.  使用非 LLVM 编译器进行编译（通过安装`apple-gcc42`Homebrew 包）

    ```
    CC=/usr/local/bin/gcc-4.2 rbenv install -v 1.9.3-p286 
    ```

4.  尝试该`shared`选项，因为它适用于 Snow Leopard

    ```
    CONFIGURE_OPTS="--with-shared" rbenv install -v 1.9.3-p286 
    ```

并且每次构建以相同的、晦涩的方式失败时：通过不存在的测试和失败的`Array`相关测试：

```
configuring win32ole
Failed to configure win32ole. It will not be installed.
configuring zlib
/bin/sh: line 0: cd: ext/-test-/array/resize: No such file or directory
/bin/sh: line 0: cd: ext/-test-/add_suffix: No such file or directory
make[1]: *** [ext/-test-/array/resize/all] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: *** [ext/-test-/add_suffix/all] Error 1
make: *** [build-ext] Error 2 
```

( [rbenv](https://dl.dropbox.com/u/179488/stackoverflow/ruby-build.20121014142510.9826.log)完整登录)

我正在使用 Xcode 命令行工具的最新版本（2012 年 10 月），但不是 Xcode 本身。相关的组件版本是：

```
gcc -v
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)

cc -v
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix 
```

除了我上面尝试过的之外，我还搜索了网络无济于事。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T22:23:38.340

我有同样的问题。在我的情况下，我添加`.`到我的 CDPATH（通过`export CDPATH=.:$CDPATH`），并且能够通过 rbenv 安装来构建 ruby​​。我最近一直在修补 CDPATH，所以有可能（甚至很可能）是我自己造成了这个问题。

# matlab - A Simple example to Train and Test classification with matlab

> ID：12885552
> 
> 赞同：-1
> 
> 时间：2012-10-14T19:07:03.320
> 
> 标签：matlab, classification

I'm a beginner in matlab. I need a simple example showing how to do a Train and Test classification in matlab.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:06:05.537

这是matlab中机器学习的一个很好的介绍。对于那些含糊不清的问题，谷歌帮了大忙！

[http://www.cs.toronto.edu/~hinton/csc2515/matlab2.pdf](http://www.cs.toronto.edu/~hinton/csc2515/matlab2.pdf)

# c++ - 从通过脚本调用的 C++ 函数调用对象实例

> ID：12885555
> 
> 赞同：1
> 
> 时间：2012-10-14T19:07:49.880
> 
> 标签：c++, qt, qtscript

我有一个名为 Jellyfish 的类，它使用单例设计模式：

水母.h

```
#ifndef JELLYFISH_H
#define JELLYFISH_H

#include <QHash>
#include <QScriptEngine>

class QScriptValue;

class Jellyfish : public QObject
{

    public:

         static Jellyfish * getInstance();
         static Jellyfish * instance;

    private:

        Jellyfish();

};

#ifndef 
```

水母.cpp

```
Jellyfish * Jellyfish::instance = NULL;

Jellyfish * Jellyfish::getInstance()
{

    if ( !Jellyfish::instance )
    {
        Jellyfish::instance = new Jellyfish();
    }

    return Jellyfish::instance;

} 
```

当我在 main.cpp 并进行测试时，我没有错误：

主文件

```
#include <QApplication>

#include "jellyfish.h"

class Jellyfish;

int main( int argc, char *argv[] )
{

    QApplication app( argc, argv );

    Jellyfish *toto = Jellyfish::getInstance();
    Jellyfish *toto2 = Jellyfish::getInstance();
    Jellyfish *toto3 = Jellyfish::getInstance();

    return app.exec();

} 
```

但我想`Jellyfish`在外部 QScript 文件中使用一些静态方法：

水母.h

```
private:

    static QScriptValue set( QScriptContext *context, QScriptEngine *engine );
    QScriptEngine *script_engine; 
```

水母.cpp

```
Jellyfish::Jellyfish()
{

    script_engine = new QScriptEngine;

    /* ... */

    initScriptEngine();

}

void Jellyfish::initScriptEngine()
{

    QScriptValue object = script_engine->newQObject( this );

    object.setProperty( "set", script_engine->newFunction( set ) );

    script_engine->globalObject().setProperty( "jellyfish", object );

}

QScriptValue Jellyfish::set( QScriptContext *context, QScriptEngine *engine )
{

    // I have to load instance because I am in a static method.
    // But this is where the application loop endlessly.
    Jellyfish *jellyfish = Jellyfish::getInstance();
    return true;

} 
```

最后是解析的脚本：

```
jellyfish.set( "line_numbers",  true ); 
```

**问题**

当我运行应用程序时，`getInstance()`总是会创建一个新的 Jellyfish 实例。但真正的问题是，在使用 debug( `qDebug() << "test";`) 的输出上，我可以看到应用程序循环运行，`Jellyfish::getInstance();`直到我得到一个`sgmentation fault`.

有人可以帮我理解这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:54:40.417

这是因为您的 Jellyfish 构造函数递归地调用自己！

在调试器中中断你的程序，你会看到这样的回溯：

```
 ...
   Jellyfish::Jellyfish()
   Jellyfish::getInstance()
   Jellyfish::set
   Jellyfish::initScriptEngine() 
   Jellyfish::Jellyfish()
   Jellyfish::getInstance() 
```

问题是您的构造函数调用`Jellyfish::getInstance()`，但是当构造对象时`Jellyfish::instance`仍然为 NULL：

```
Jellyfish * Jellyfish::getInstance()
{

    if ( !Jellyfish::instance )
    {
        // this line
        // Jellyfish::instance = new Jellyfish();
        // is equivalent to
        Jellyfish * temp = new Jellyfish(); // *
        Jellyfish::instance = temp; // not NULL after construction
    }

    return Jellyfish::instance;

} 
```

如果您从构造函数调用 getInstance() ，那么它将始终导致无限递归（直到段错误）。唯一的解决方案是不从您的构造函数调用 Jellyfish::initScriptEngine() - 而是显式调用：

```
 Jellyfish::getInstance()->initScriptEngine(); 
```

# css - CSS Div overlapping

> ID：12885562
> 
> 赞同：1
> 
> 时间：2012-10-14T19:08:40.187
> 
> 标签：css

I'm confused in some CSS trick. The scenario is painted below. In the 2nd container is a plugin like [http://workshop.rs/projects/coin-slider/](http://workshop.rs/projects/coin-slider/)

I want to move that 2nd container up (the green one), to be connected with the menu bar. The purpose is, I want the Image Logo overlaping the 2nd container. How can I achieve that ? I tried simply set the negative value of the `margin-top` property of the 2nd container but it causes that the div's are moved.

![.](../Images/5beda8e40e5228a0dfa4c6c3922699ff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:21:09.687

这应该这样做：

```
#container-2 {
  display:block;
  position:relative;
  top:-0px /* <-- Put actual value here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:22:58.847

如果你可以发布你的css代码会更容易。

一些可能性：
将“图像标志”`margin-bottom`设置为负值并确保容器#1`height`不会阻止底部容器上升。

或设置两个容器`position: absolute`，然后设置属性`top`以匹配所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T19:24:08.840

我会选择一个`position: absolute`图像标志。

# sql - 如何在 postgresql 的“tablefunc”查询中包含空值？

> ID：12885572
> 
> 赞同：4
> 
> 时间：2012-10-14T19:09:45.923
> 
> 标签：sql, postgresql, table-functions

我正在尝试使用[交叉表](http://www.postgresql.org/docs/9.1/static/tablefunc.html)函数`postgresql`来创建一个`pivot table`. 但是，我很难理解如何在查询中构造我的 SQL。我的数据由四列组成，如下所示：

![在此处输入图像描述](../Images/4d74cf9fde10faca97fa1a2fa56a0b23.png)

我使用以下代码创建此表：

```
CREATE TABLE ct(id SERIAL, zone_id int, group_id int, area double precision);
INSERT INTO ct(zone_id, group_id, area) VALUES(1,2,6798.50754160784);
INSERT INTO ct(zone_id, group_id, area) VALUES(1,3,10197.7613124118);
INSERT INTO ct(zone_id, group_id, area) VALUES(2,1,85708.8676744647);
INSERT INTO ct(zone_id, group_id, area) VALUES(2,2,56006.5971338327);
INSERT INTO ct(zone_id, group_id, area) VALUES(2,3,5584.33145616642);
INSERT INTO ct(zone_id, group_id, area) VALUES(2,5,8611.99732832252);
INSERT INTO ct(zone_id, group_id, area) VALUES(2,6,36103.5509183704);
INSERT INTO ct(zone_id, group_id, area) VALUES(2,8,9801.14541428806);
INSERT INTO ct(zone_id, group_id, area) VALUES(5,1,45796.0020793546); 
```

并`postgresql`密切关注文档，我在`crosstab`查询中使用以下代码：

```
SELECT *
FROM crosstab(
  'select zone_id, group_id, area
   from ct
   ')
AS ct(row_name integer, 
      g_1 double precision, 
      g_2 double precision, 
      g_3 double precision, 
      g_4 double precision, 
      g_5 double precision, 
      g_6 double precision, 
      g_7 double precision, 
      g_8 double precision); 
```

这导致下表不是我想要的：

![在此处输入图像描述](../Images/ba0641d6c66e1a3c0da2d2c1b1444fc1.png)

例如，在第二行，我想要以下值：

```
85708.8676744647, 56006.5971338327, 5584.33145616642, NULL, 8611.99732832252, 36103.5509183704, NULL, 9801.14541428806 
```

相反，这些值为：

```
85708.8676744647, 56006.5971338327, 5584.33145616642, 8611.99732832252, 36103.5509183704, 9801.14541428806 
```

但是，似乎这些`null`值被忽略了，因此我的列名`g1`,`g8`不对应于原始组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:55:00.543

使用带有[**两个参数**](http://www.postgresql.org/docs/current/interactive/tablefunc.html#AEN142877)[`crosstab()`的变体](http://www.postgresql.org/docs/current/interactive/tablefunc.html#AEN142877)**：**

 **```
SELECT * FROM crosstab(
   'SELECT zone_id, group_id, area
    FROM   ct
    ORDER  BY 1,2'

   ,'SELECT g FROM generate_series(1,8) g'  -- ! Provide values explicitly
   )
AS ct(
     row_name integer
   , g_1 float8, g_2 float8
   , g_3 float8, g_4 float8
   , g_5 float8, g_6 float8
   , g_7 float8, g_8 float8); 
```

从而明确声明哪个值进入哪个输出列。所以函数知道在哪里填写`NULL`值。在这种情况下`generate_series()`，为 8 行提供数字 1-8 会派上用场。`VALUES`表达式将是另一种选择：

```
'VALUES (1), (2), (3), (4), (5), (6), (7), (8)' 
```

另外，不要忘记`ORDER BY`第一个参数查询中的子句。

我[在这个相关的答案中提供了详细的解释](https://stackoverflow.com/a/11751905/939860)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:39:56.387

我无法使其在[演示](http://sqlfiddle.com/#!12/a50ff/1)中工作，因为我无法创建 tablefunc 扩展，但它可以在运行 9.2.1 的桌面上工作：

```
SELECT *
FROM crosstab(' 
    select 
        s.zone_id, s.group_id, area
    from 
        ct
        right join (
            (select distinct zone_id from ct) z(zone_id)
            cross join
            generate_series(1, 8) g(group_id)
        ) s on s.group_id = ct.group_id and s.zone_id = ct.zone_id
    order by s.zone_id, s.group_id
') AS ct (
    row_name integer, 
    g_1 double precision, 
    g_2 double precision, 
    g_3 double precision, 
    g_4 double precision, 
    g_5 double precision, 
    g_6 double precision, 
    g_7 double precision, 
    g_8 double precision
); 
```**

# oracle - Execute immediate inside FORALL statement

> ID：12885574
> 
> 赞同：1
> 
> 时间：2012-10-14T19:10:09.893
> 
> 标签：oracle

I have a procedure in which 100 tables have to be updated one by one. All tables have the same column to be updated. For improving the performance I am trying to use Execute Immediate with FORALL but I am getting a lot of compilation errors.

Is it syntactically possible to update 100 different tables inside a FORALL statement using Execute immediate.

My code looks something like this.

```
Declare
  TYPE u IS TABLE OF VARCHAR2(240) INDEX BY BINARY_INTEGER;
      Table_List u;
FOR somecursor IN (SELECT variable1, variable2 FROM SomeTable) 
    LOOP 
        BEGIN 
            Table_List(1) := 'table1'; 
            Table_List(2) := 'table2'; 
            ......
            ......
            table_list(100):= 'table100';
       FORALL i IN Table_List.FIRST .. Table_List.LAST 
           EXECUTE IMMEDIATE 'UPDATE :1 SET column = :3 WHERE column = :2' 
             USING Table_List(i), somecursor.variable1, somecursor.variable2 ; 
     end loop; 
```

I hope people can understand what I am trying to do through this code. If something is big time wrong please suggest me what exactly is the syntax and if it can be done in some other efficient way also.

Thanks a lot for all the help which comes my way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:07:41.797

(1) 不，您不能使用绑定变量作为表名。

(2) 当您使用 EXECUTE IMMEDIATE 时，这意味着动态 SQL - 但 FORALL 要求只执行*一条*语句。一旦你指定了一个不同的表，你就在谈论一个不同的语句（不管表的结构是否恰好是等价的）。

您将不得不在普通的 FOR 循环中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:40:00.713

只是猜测，但我认为您不能将绑定变量用作表名。你有没有尝试过：

```
EXECUTE IMMEDIATE 'UPDATE ' || Table_List(i) || ' SET column = :2 WHERE column = :3' ... 
```

# css - IE9 CSS float margin bug

> ID：12885578
> 
> 赞同：-2
> 
> 时间：2012-10-14T19:10:20.243
> 
> 标签：css, css-float

Hi I have this working upper menu section in Chrome/firefox and proper browsers, but its broken in IE 9 in the searchbar/social icon header area.

***edits to help crappiness of this post, sorry :(***

This is now what the header HTML looks like

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->language; ?>" lang="<?php echo $this->language; ?>" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

[http://radiantrfid.com/](http://radiantrfid.com/)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:11:32.943

将您的标题更改为

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

并删除前两个空行：doctype 应该在第一个。

这将使 IE 尊重标准并像其他浏览器一样工作。

# css - 页面布局不一致，CSS似乎不是问题？

> ID：12885579
> 
> 赞同：1
> 
> 时间：2012-10-14T19:10:22.307
> 
> 标签：css

我在这里有一个页面：http: [//dev.textcube.ch/oneandonly/index.php/galerie/shima/](http://dev.textcube.ch/oneandonly/index.php/galerie/shima/)其中 subnav 可以使用样式#vertmenu 但是在另一个页面上，样式和页面布局与 subnav 相同被推到左边[http://dev.textcube.ch/oneandonly/index.php/galerie/yuma/](http://dev.textcube.ch/oneandonly/index.php/galerie/yuma/)

（用户名：textcube / 密码：textcube3600 作为登录将弹出访问页面）

```
#vertmenu {
font-family: Arial, Helvetica, sans-serif;
font-size: 100%;
margin-top: 20px;
float: left; 
clear: both;
background: url(../images/subnav_bg.png) no-repeat;
height: 180px;
width: 195px !important;
padding: 40px 60px 60px 20px !important;
} 
```

我不知道为什么会这样，我检查了 CSS 并检查了两个页面上 Chrome 中的元素，看看是否有任何冲突，但我什么也看不到。

请问有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:20:00.673

在第二页中，您包含`view.css`，它具有以下规则：

```
* {
    margin: 0;
    padding: 0;
} 
```

这将删除`ul`. 您只需将以下声明添加到您的`#vertmenu .nav`规则中：

```
padding-left: 40px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:25:00.227

通过检查两个页面，第二页中的额外内容是`margin:0;` `padding:0`via的存在`view.css`。它会导致布局中断。

# python - 如何使用eclipse将命令行参数传递给python

> ID：12885584
> 
> 赞同：0
> 
> 时间：2012-10-14T19:10:51.820
> 
> 标签：python

> **可能重复：**
> [在 Eclipse(Pydev) 中将命令行参数传递给 Python 脚本](https://stackoverflow.com/questions/4355721/passing-command-line-argument-to-python-script-within-eclipsepydev)

我有一个包含以下行的 python 脚本：

```
reportIP(sys.argv[1]) 
```

当我运行代码时，我收到以下错误：

```
IndexError: list index out of range 
```

我知道有一个参数需要通过。如果我在添加 PyDev 后从 eclipse 运行我的代码，我该怎么做？请尽量详细一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:13:12.393

来自[Andrew White](https://stackoverflow.com/users/278836/andrew-white)的[https://stackoverflow.com/a/4355739/1204143](https://stackoverflow.com/a/4355739/1204143)：

> 单击工具栏中的播放按钮向下箭头 -> 运行配置 ->（双击）Python 运行 -> 右侧的参数选项卡。
> 
> 从那里您可以填写程序参数文本框。

# php - xampp、php 和 mysql 需要函数错误

> ID：12885588
> 
> 赞同：-3
> 
> 时间：2012-10-14T19:11:03.970
> 
> 标签：php, mysql, apache, xampp

我正在开发会员系统，但每次运行我的索引页面时，我都会收到此错误，我什至不明白，请帮忙

> 警告：require(Tutorials\mysql.php) [function.require]: failed to open stream: No such file or directory in C:\xampp\htdocs\xampp\Tutorials\index.php on line 3
> 
> 致命错误：require() [function.require]：无法在 C:\xampp\htdocs\xampp\Tutorials\ 中打开所需的 'Tutorials\mysql.php' (include_path='.;C:\xampp\php\PEAR')第 3 行的 index.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:13:57.027

在第 3 行的文件 index.php 中，它要求您有一个文件 mysql.php，但解释器在给定位置丢失或找不到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:18:34.200

转到`C:\xampp\php\`并找到该文件`php.ini`。

找到设置`include_path`并添加目录`C:\xampp\htdocs`

最后你应该有一些看起来像：

`include_path = ".;C:\xampp\php\PEAR;C:\xampp\htdocs`或类似的。

不要忘记重新启动您的 XAMPP 堆栈！

之后，您的堆栈将在您设置的新路径中查找您尝试包含/需要的文件。

同样在 index.php 的 require 行中，尝试以下操作：

`require_once($_SERVER['DOCUMENT_ROOT'] . '/Tutorials/mysql.php');`

这将使您尝试包含的文件的路径非常明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T19:22:26.673

打开 index.php 并将第 3 行从

```
require(Tutorials\mysql.php) 
```

至

```
require(mysql.php) 
```

# c# - 哥们，我的对象呢？或者，为什么 Linq 不返回我的对象 ？

> ID：12885590
> 
> 赞同：20
> 
> 时间：2012-10-14T19:11:10.413
> 
> 标签：c#, .net, linq

一旦我获得了 Linq 查询的结果，我并不总是很高兴。可能会出现我期待的结果，但事实并非如此。例如，我的客户期望客户在客户列表中，但事实并非如此。是我的客户在说“伙计，我的客户在哪里？”，而不是我。我是花花公子，要继续做花花公子，我必须给我的客户一个理由。

**有没有一种简单的方法来获取给定的对象实例和 Linq 查询并确定查询中的哪些表达式排除了该实例？**

**编辑**好的，这是一个更好的例子

输出应该是这样的：

> 您的客户被排除在外有两个原因：
> 
> 客户名字是 Carl，但应该是 Daniel
> 
> 客户年龄为 18 岁，但应大于 20

```
 public class Customer
    {
        public string FirstName { get; set; }
        public int Age { get; set; }
    }

    [Test]
    public void Dude_wheres_my_object_test1()
    {
        var daniel = new Customer { FirstName = "Daniel", Age = 41 };
        var carl =  new Customer {  FirstName = "Carl", Age= 18 };
        var Customers = new List<Customer>() { daniel, carl };

        // AsQueryable() to convert IEnumerable<T> to IQueryable<T> in 
        //the case of LinqtoObjects - only needed for this test, not 
        //production code where queies written for LinqToSql etc normally 
        //return IQueryable<T>
        var query = from c in Customers.AsQueryable()
                    where c.Age > 20
                    where c.FirstName == "Daniel"
                    select c;
        //query would return Daniel as you'd expect, but not executed here.

        //However I want to explain why Carl was not in the results

        string[] r = DudeWheresMyObject(query, carl);
        Assert.AreEqual("Age is 18 but it should be > 20", r[0]);
        Assert.AreEqual("FirstName is Carl but it should be Daniel", r[1]);

        //Should even work for a Customer who is not 
        //in the original Customers collection...
        var ficticiousCustomer = new Customer { FirstName = "Other", Age = 19};
        string[] r2= DudeWheresMyObject(query, 
                                         ficticiousCustomer);
        Assert.AreEqual("Age is 19 but it should be > 20", r2[0]);
        Assert.AreEqual("FirstName is Other but it should be Daniel", r2[1]);
    }

    public string[] DudeWheresMyObject<T>(IQueryable<T> query, T instance)
    {
        //Do something here with the query.Expression and the instance

    } 
```

首先，在我尝试编写一些花哨的 Fluent 框架之前，**有人已经这样做了吗？**

到目前为止，我已经考虑导航表达式树并针对仅包含我的对象的 IQueryable 执行每个分支。现在我没有大量使用原始表达式树的经验，所以我希望那些必须提出任何陷阱甚至解释这是否是死胡同以及原因的人。

我担心由此产生的任何结果都应该：

*   可重用 - 应适用于与返回同一类的 Linq 查询比较的任何对象。
*   不影响原始查询的性能（这应该只是标准的 Linq）。
*   应该与 Linq 实现无关。
*   如果在缺少的实例上设置了多个属性值，将其从结果中排除，则应报告所有这些原因。

**编辑** 我并不是建议我使用不同的查询排列多次对数据库执行 LinqToSql 并比较结果。相反，我正在寻找一种方法来获取单个实例并将其与表达式树进行比较（无需再次直接执行查询）

另外，我想说明其他人是否会觉得这很有用。如果是这样，我会考虑启动一个开源项目来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:44:18.317

我认为您必须将查询重新创建为 linq-to-objects 并处理 linq-to-sql/entities/whatever 和 linq-to-objects 之间的细微差别，接受某些提供程序不起作用现实地。

你有你想在内存`IEnumerable<T>`或其他东西中找到的对象。

你必须以某种方式走过表达式树并剪掉叶子，所以说你有：

```
where obj.foo == true && obj.bar == "yes" 
```

您必须弄清楚这一点，`obj.foo == true`然后`obj.bar == "yes"`离开并从那里开始。这将是表达式树的一种深度优先搜索。

因此，构造 linq 到只有这些叶子的对象查询。查看对象是否包含在结果中。如果不是，那么我们已经找到了它被排除的原因，如果不是，那么就上树（即，使 where 查询包含更多子句，越来越接近原始子句，直到对象从结果中消失）。

正如我所看到的，困难的部分将是处理原始 linq 到“whatever”和链接到对象之间的差异，弄清楚在哪里拆分 where claues，处理诸如连接之类的东西，它也可以排除一些东西，以及处理类似的东西`SqlMethods.Like`。不能在 linq to objects 中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T23:07:29.223

对于过滤掉结果的一次性探索，很难击败[LINQPad](http://www.linqpad.net)`Dump`中的方法。这是他们的一个样本的摘录，显示了它的实际效果：

```
// Dump returns exactly what it was given, so you can sneakily inject
// a Dump (or even many Dumps) *within* an expression. This is useful
// for monitoring a query as it progresses:

new[] { 11, 5, 17, 7, 13 }  .Dump ("Prime numbers")
.Where (n => n > 10)        .Dump ("Prime numbers > 10")
.OrderBy (n => n)           .Dump ("Prime numbers > 10 sorted")
.Select (n => n * 10)       .Dump ("Prime numbers > 10 sorted, times 10!"); 
```

这给出了格式良好的结果表：

![LINQPad 结果](../Images/7c6a091a89d4f902c0886eb26d67cacc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T00:26:21.333

通过一些有趣的表达式黑客，您可以看到集合中每个项目的每个阶段的评估结果。命中断点后检查本地`result`以查看评估结果。要实际使用评估结果，只需附加`.Where(x => x.IsIncludedInResult).Select(x => x.EvaluationTarget)`到生成报告的行。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Linq.Expressions;

namespace ConsoleApplication4
{
    [DebuggerDisplay("{Condition} on {EvaluationTarget} is {EvaluationResult}")]
    public class ReportItem<T>
    {
        public string Condition { get; private set; }

        public IEnumerable<ReportItem<T>> NestedReports { get; private set; }

        public object EvaluationResult { get; private set; }

        public T EvaluationTarget { get; private set; }

        public ReportItem(Expression condition, IEnumerable<ReportItem<T>> nestedReports, T evaluationTarget, object evaluationResult)
        {
            Condition = condition.ToString();
            NestedReports = nestedReports;
            EvaluationTarget = evaluationTarget;
            EvaluationResult = evaluationResult;
        }

        public override string ToString()
        {
            return string.Format("{0} on {1} is {2}", Condition, EvaluationTarget, EvaluationResult);
        }
    }

    [DebuggerDisplay("Included: {IsIncludedInResult} \n{Summary}")]
    public class Report<T>
    {
        public ReportItem<T> Contents { get; private set; }

        public T EvaluationTarget { get; private set; }

        public Report(T source, Expression<Func<T, bool>> predicate)
        {
            EvaluationTarget = source;

            IsIncludedInResult = predicate.Compile()(source);

            Contents = Recurse(predicate.Parameters.Single(), predicate.Body, source);
        }

        private object Evaluate(Expression expression, ParameterExpression parameter, T source)
        {
            var expr = Expression.Lambda(expression, parameter);
            var @delegate = expr.Compile();
            var value = @delegate.DynamicInvoke(source);
            return value;
        }

        private ReportItem<T> Recurse(ParameterExpression parameter, Expression sourceExpression, T source)
        {
            var constantExpression = sourceExpression as ConstantExpression;

            if(constantExpression != null)
            {
                return new ReportItem<T>(sourceExpression, null, source, Evaluate(constantExpression, parameter, source));
            }

            var unaryExpression = sourceExpression as UnaryExpression;

            if(unaryExpression != null)
            {
                var content = Recurse(parameter, unaryExpression.Operand, source);
                var result = Evaluate(sourceExpression, parameter, source);
                return new ReportItem<T>(sourceExpression, new[]{content}, source, result);
            }

            var binaryExpression = sourceExpression as BinaryExpression;

            if(binaryExpression != null)
            {
                var left = Recurse(parameter, binaryExpression.Left, source);
                var right = Recurse(parameter, binaryExpression.Right, source);
                var item = new ReportItem<T>(sourceExpression, new[] {left, right}, source, Evaluate(sourceExpression, parameter, source));
                return item;
            }

            var methodCallExpression = sourceExpression as MethodCallExpression;

            if(methodCallExpression != null)
            {
                var args = methodCallExpression.Arguments.Select(x => Evaluate(x, parameter, source)).ToArray();
                var result = methodCallExpression.Method.Invoke(Expression.Lambda(methodCallExpression.Object, parameter).Compile().DynamicInvoke(source), args);
                return new ReportItem<T>(sourceExpression, null, source, result);
            }

            throw new Exception("Unhandled expression type " + sourceExpression.NodeType + " encountered");
        }

        public bool IsIncludedInResult { get; private set; }

        public string Summary
        {
            get { return Contents.ToString(); }
        }

        public override string ToString()
        {
            return Summary;
        }
    }

    public static class PredicateRunner
    {
        public static IEnumerable<Report<T>> Report<T>(this IEnumerable<T> set, Expression<Func<T, bool>> predicate)
        {
            return set.Select(x => new Report<T>(x, predicate));
        }
    }

    class MyItem
    {
        public string Name { get; set; }

        public int Value { get; set; }

        public override int GetHashCode()
        {
            return Value % 2;
        }

        public override string ToString()
        {
            return string.Format("Name: \"{0}\" Value: {1}", Name, Value);
        }
    }

    class Program
    {
        static void Main()
        {
            var items = new MyItem[3];
            items[0] = new MyItem
            {
                Name = "Hello",
                Value = 1
            };

            items[1] = new MyItem
            {
                Name = "Hello There",
                Value = 2
            };
            items[2] = new MyItem
            {
                Name = "There",
                Value = 3
            };

            var result = items.Report(x => !x.Name.Contains("Hello") && x.GetHashCode() == 1).ToList();
            Debugger.Break();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T19:57:28.313

这有点棘手，就像在您的示例中一样，您总是可以编写一些代码来检查细节并报告“我搜索了术语 x 并且我返回的对象不在术语 x 中”。

不过，我会像其他人建议的那样，这将与'return me x'然后在代码中运行一个查询'x where x.property = y'并报告不匹配。

在此之后，我想问题是为了生成非匹配列表，您的查询或对象图将变得非常庞大，因为您需要原始对象最初包含（或通过惰性扩展加载包括）许多排列来确定匹配与否。

这与在首先从对象开始并根据条件进行子选择的地方运行查询相反，您想要选择然后选择性地超级选择，捕获非条件。

这是一个有趣的问题，我通常会先解决客户端或代码方面的问题，然后才能返回对象。但我想完美的解决方案是返回一个单一的解决方案，也许检查它的链接关联。这些链接不会太难找到一个通用的“我没有这些”类型的原因，但是给出一个“我有这个链接，而不是那个链接”的回应会更难。

您可能需要提供一种基于某种形式的谓词构建器的方法，该构建器采用字段和搜索词并在事情不匹配时返回适当的消息。在我看来，这似乎是两个略有不同的问题。

现在有点漫无边际，但很想听到这个问题的任何答案！...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-14T19:26:41.750

我想我遵循你的意思。我认为您想要做的是执行两个查询，一个有选择标准，一个没有，然后对它们执行 Linq except 以确定哪些项目被排除在外，然后遍历该列表并确定哪些标准导致它们被排除。

我真的想不出更好的方法来做到这一点。

像这样的东西：

```
var a = db.Trades.Where(z => z.user == x && z.date == y);

var b = a.Where(z => z.TradeCurrency != null && z.TradeUnderlying.Index != null);

var c = a.Except(b);

List<string> reasons;
foreach(var d in c) {
    if (d.TradeCurrency == null)
        // add reason
    ... etc..
} 
```

这将执行单个查询（将有几个子查询）并且只返回被排除的结果（而不是试图返回所有可能非常大的结果）。当然，除非您有一百万条被排除的记录并且只有少数被包含的记录。

不确定这有多有效，尽管与我想不到的方式相比。

**编辑：**

我认为您忘记了 Linq 查询在您调用实现它们的操作之前不会执行。在这个例子中，数据库只被命中一次，尽管这里有几个 linq 查询对象。在不执行查询的情况下修改表达式树。

因此，在本例中，当`foreach()`发生这种情况时，将执行单个数据库查询（带有多个子查询）。

# android - 完成活动，以便计数器重置

> ID：12885596
> 
> 赞同：0
> 
> 时间：2012-10-14T19:12:26.627
> 
> 标签：android

我正在尝试使用计分器、计分器等制作游戏，但我发现当我使用该`finish()`方法完成游戏活动时，`ints`仍然有与以前相同的数字，有没有办法让事情当活动已关闭而没有强制关闭时，不再保留在内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:15:55.063

> 我正在尝试使用得分计数器、回合计数器等制作游戏，但我发现当我使用 finish() 方法完成游戏活动时，整数仍然具有与以前相同的数字

然后，您将信息存储在活动生命周期之后的某个位置，例如静态数据成员。

# icecast - 冰播2。两个来源，相同的流

> ID：12885597
> 
> 赞同：4
> 
> 时间：2012-10-14T19:12:28.850
> 
> 标签：icecast

是否可以在同一个挂载点有 2 个源？

例子：

源 1（来自 S1 IP 地址）将音乐发送到 IP Icecast2 服务器。源 2（来自 S2 IP 地址）向 Ip Icecast2 服务器发送语音。

监听器运行：mplayer ip_icecast2:8000/example.ogg..

收听者在发送时收听音乐和声音。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:09:38.303

Liquidsoap should be able to handle the mixing and setting the proper metadata.. The web site is at [http://savonet.sourceforge.net/](http://savonet.sourceforge.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T00:10:08.977

是的，但不是单独使用 Icecast。

您需要做的是混合两个流。Icecast 没有任何功能可以做这样的事情。有很多方法可以做到这一点。我可能会考虑将流与 FFMPEG 混合在一起。您可以使用[`amerge`和`amix`过滤器](http://ffmpeg.org/trac/ffmpeg/wiki/FilteringGuide)。

现在，您需要将 FFMPEG 的输出发送到您的 Icecast 服务器。通过一些脚本，您应该能够将 STDOUT 从 FFMPEG 通过管道传输到与 Icecast 的 TCP 连接。在发送数据之前，您需要发送[适当的标头以及不](https://stackoverflow.com/a/9985297/362536)发送的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:34:55.830

您实际上可以在没有其他任何东西的情况下做到这一点，您需要指定 3 个流

*   溪流
*   居住
*   自动DJ

该技巧依赖于一个名为 fallback 的标签，您可以直接在 icecast xml 文件上对其进行配置，它会执行类似的操作 - 如果现场音频不可用，则回退到 autodj，其中任何一个都将直接在流上播放，优先考虑居住

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T15:46:03.480

我假设您的意思是来自不同 URL 的一种音频来源和一种说话来源。如果您不知道如何使用 Soap，您可以使用 SAM 广播器之类的第 3 方应用程序同时获取音频和音乐流。

这将解码流并像传统的音频混合器一样将它们混合，然后重新编码并作为一个流发送到单个 Icecast 服务器。

请记住，如果您正在进行配音，则需要处理延迟。即，在您将要讲话的音频部分之后，最终听众将听到讲话。这取决于所涉及的缓冲区长度，并且是因为 SAM 广播公司将在您所在的同一位置“收听”音频（假设您正在对源音频流讲话）。然后你需要添加，播放缓冲区 SAM 需要处理，播放你的语音流进行混合和传递。

# python - 定义python函数来查找组合

> ID：12885599
> 
> 赞同：-4
> 
> 时间：2012-10-14T19:12:29.137
> 
> 标签：python, string, function

我需要创建一个 python 函数，以递归方式查找函数内所有可能的设定长度字母组合。例如，在单词 'unicorn' 中使用它来查找长度为 3 的所有组合将返回：

['orN'，'crN'，'coN'，'cor'，'irN'，'ioN'，'ior'，'icN'，'icr'，'ico'，'nrN'，'noN'，'也不是'，'ncN'，'ncr'，'nco'，'niN'，'nir'，'nio'，'nic'，'urN'，'uoN'，'uor'，'ucN'，'ucr' ，'uco'，'uiN'，'uir'，'uio'，'uic'，'unN'，'unr'，'uno'，'unc'，'uni']

我什至不知道从哪里开始。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:14:57.930

[`itertools.combinations`](http://docs.python.org/library/itertools.html#itertools.combinations)：

```
print [''.join(x) for x in itertools.combinations('unicorn', 3)] 
```

如果您想要与您要求的输出*完全相同的输出：*

```
>>> print [''.join(x) for x in itertools.combinations('unicorN', 3)][::-1]
['orN', 'crN', 'coN', 'cor', 'irN', 'ioN', 'ior', 'icN', 'icr', 'ico', 'nrN', 'noN', 'nor', 'ncN', 'ncr', 'nco', 'niN', 'nir', 'nio', 'nic', 'urN', 'uoN', 'uor', 'ucN', 'ucr', 'uco', 'uiN', 'uir', 'uio', 'uic', 'unN', 'unr', 'uno', 'unc', 'uni'] 
```

# mysql - sql多对多选择与连接

> ID：12885602
> 
> 赞同：0
> 
> 时间：2012-10-14T19:12:50.707
> 
> 标签：mysql, sql

我正在尝试做一个选择声明，但我无法让它工作。

我有 3 张桌子： `places`, `tags`,`places_tags`

```
Places:
   - id
   - name

Tags:
   - id
   - name

Places_tags:
   - place_id
   - tag_id
   - order 
```

我正在尝试选择地点并加入插入的第一个标签（使用顺序）

```
        SELECT p.*, t.tag_id AS 标记
        FROM `places` 作为 p
        LEFT JOIN places_tags t ON (t.place_id = p.id)
        按 p.id 分组

```

这就是我现在所拥有的。我需要添加诸如 ORDER BY order DESC 之类的东西...

我认为我做得不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:18:36.900

像下面这样的东西应该可以工作：

```
SELECT 
   p.name AS "place", 
   t.name AS "firstTag" 
FROM 
   places p 
   LEFT JOIN
   places_tags pt1 
      ON pt1.place_id = p.id
   LEFT JOIN
   places_tags pt2 
      ON pt2.place_id = p.id AND pt2.tag_id < pt1.tag_id
   LEFT JOIN 
   tags t 
      ON t.id = pt1.tag_id
WHERE
   pt2.tag_id IS NULL 
```

# mysql - 在两个新表中将表合并为一个具有相同生成数的表

> ID：12885607
> 
> 赞同：1
> 
> 时间：2012-10-14T19:13:32.863
> 
> 标签：mysql, sql, database

我找到了一些选项来运行 mysql 查询以将一个表迁移/拆分为 2 个新表，但是我想在新表上创建的字段之一必须与另一个新表中的字段相同：

因此，从“From_payments”表中，我想创建两个名为“To_paymenttransaction”和“To_paymentinfo”的新表。许多字段是预定义的，有些来自旧表。唯一的问题是预定义字段“paymentinfoid”必须与两个新表相同。

```
**To_paymenttransaction** --- < --- **From_payments**

paymenttransactionid ------- < --- (Generate next available number in this column)

paymentinfoid -------------- < --- (Generate next available number in this column)

transactionid --------------- < --- txn_id

state ---------------------- < --- (Set all to "1")

amount -------------------- < --- mc_gross

currency ------------------- < --- mc_currency

dateline -------------------- < --- payment_date

paymentapiid --------------- < --- (Set all to "1")

request -------------------- < --- (Set all to "NULL")

reversed ------------------- < --- (Set all to "0")

**To_paymentinfo** -----------< 

paymentinfoid -------------- < --- (Same generated number that goes to the paymentinfoif field in To_paymenttransaction table )

hash ----------------------- < --- (Set all to "Imported")

subscriptionid --------------- < --- (Set all to "1")

subscriptionsubid ------------ < --- ("2" IF above field mc_gross is 4, "1" IF above field mc_gross is 6, "0" IF above field mc_gross is 10)

userid   ---------------------- < --- userid

completed ------------------ < --- (Set all to "0") 
```

有任何想法吗？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:07:51.313

也许在拆分之前在原始表上生成 paymentinfoid。然后，您可以将该单个条目复制到每个新表中。

# django - Django如何通过GET请求链接排序和过滤

> ID：12885609
> 
> 赞同：0
> 
> 时间：2012-10-14T19:13:48.147
> 
> 标签：django, filter, request, chaining

当我选择排序时，我真的不能自动包含每页过滤器。如何使这些过滤器对彼此“可见”？我需要包括或阅读什么？

那是我观点的一小部分.py

```
if order == 'asc':
    p = p.order_by('name')
elif order == 'desc':
    p = p.order_by('-name')
elif order == 'price_asc':
    p = p.order_by('price_netto')
elif order == 'price_desc':
    p = p.order_by('-price_netto')
else:
    p.order_by('name')

if limit == "12":
    per_page = "12"
elif limit == "24":
    per_page = "24"
elif limit == "48":
    per_page = "48"
else:
    from endless_pagination.settings import PER_PAGE
    per_page = PER_PAGE 
```

HTML

```
 <select onchange="location = this.options[this.selectedIndex].value">
            <option value="">--- Sortowanie ---</option>
            <option rel="order" value="?order=desc">Malejąco według nazwy</option>
            <option rel="order" value="?order=asc">Rosnąco według nazwy</option>
            <option rel="order" value="?order=price_asc">Rosnąco według ceny</option>
            <option rel="order" value="?order=price_desc">Malejąco według ceny</option>
        </select>
        Produktów na stronę:
        <a rel="limit" href="?limit=12">12</a>, <a rel="limit" href="?limit=24">24</a>, <a rel="limit" href="?limit=48">48</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:29:14.617

为什么不使用javascript，jquery。您需要一个函数来读取查询字符串并覆盖您正在更改的项目。

```
 <select id="sort-dropdown">
        <option value="">--- Sortowanie ---</option>
        <option rel="order" value="desc">Malejąco według nazwy</option>
        <option rel="order" value="asc">Rosnąco według nazwy</option>
        <option rel="order" value="price_asc">Rosnąco według ceny</option>
        <option rel="order" value="price_desc">Malejąco według ceny</option>
    </select>
    Produktów na stronę:
    <a rel="limit" id="limit-12" href="#">12</a>, <a rel="limit" id="limit-24" href="#">24</a>, <a rel="limit" id="limit-48" href="#">48</a> 
```

然后 javascript 将如下所示：

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}
function redirect(order, limit) {
  window.location.url = "?order=" + order + "&limit=" + limit;
}

$("#sort-dropdown").change(function () {
  redirect($(this).val(), getParameterByName("limit"));
});

$("#limit-12").change(function () {
  redirect(getParameterByName("order"), "12");
});

$("#limit-24").change(function () {
  redirect(getParameterByName("order"), "24");
});

$("#limit-48").change(function () {
  redirect(getParameterByName("order"), "48");
}); 
```

# objective-c - 无法识别的选择器：[NSSQLToMany _setInverseManyToMany:]

> ID：12885611
> 
> 赞同：2
> 
> 时间：2012-10-14T19:13:52.753
> 
> 标签：objective-c, ios, core-data, restkit, nsmanagedobject

这是我遇到过的最奇怪的错误，仅仅是因为我在任何地方都找不到任何关于它的信息。

背景：

我有一个使用映射到核心数据的 RestKit（当前主）的应用程序。我正在使用自定义映射提供程序（的子类`RKObjectMappingProvider`）。这会生成我需要的所有映射，类似于[RKGithub](https://github.com/RestKit/RKGithub)项目。

我的一些对象具有多对多关系，因此我必须在设置其他对象之后注册一些关系（在映射提供程序中）以避免无限递归。（朋友有_many Friends has_many Friends...）

当应用程序运行并且 RestKit 自行配置时，此行（中`RKManagedObjectStore.m`）出现错误

```
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:_managedObjectModel]; 
```

我无法进入“initWithManagedObjectModel：”方法。我得到的唯一信息是日志中的这个异常：

```
-[NSSQLToMany _setInverseManyToMany:]: unrecognized selector sent to instance 0xcc78890 
```

我不知道是什么原因造成的，也不知道如何解决。我找不到任何有关它的文档，甚至找不到以前遇到此问题的任何人。我只能找到这个 iOS 框架的转储：

```
public struct NSSQLManyToMany : IEquatable<NSSQLManyToMany> {
        internal NObjective.RuntimeObject Handle;
        public static readonly RuntimeClass ClassHandle = CoreDataCachedClasses.NSSQLManyToMany;
        public static implicit operator IntPtr( NSSQLManyToMany value ) {
            return value.Handle;
        }
        public static implicit operator NObjective.RuntimeObject( NSSQLManyToMany value ) {
            return value.Handle;
        }
        public override bool Equals( object value ) {
            var compareTo = value as NSSQLManyToMany?;
            return compareTo != null && Handle == compareTo.Value.Handle;
        }
        public bool Equals( NSSQLManyToMany value ) {
            return Handle == value.Handle;
        }
        public static bool operator ==( NSSQLManyToMany value1, NSSQLManyToMany value2 ) {
            return value1.Handle == value2.Handle;
        }
        public static bool operator !=( NSSQLManyToMany value1, NSSQLManyToMany value2 ) {
            return value1.Handle != value2.Handle;
        }
        public NSSQLManyToMany( IntPtr value ) {
            this.Handle = new RuntimeObject( value );
        }
        public static NSSQLManyToMany alloc() {
            return new NSSQLManyToMany( ClassHandle.InvokeIntPtr( Selectors.alloc ) );
        }
        unsafe public NObjective.RuntimeObject inverseColumnName() {
            RuntimeObject ___occuredException;
            var ___result = NativeMethods.inverseColumnName( Handle, CachedSelectors.inverseColumnName, out ___occuredException, 0 );
            if( ___occuredException != RuntimeObject.Null ) throw RuntimeException.Create( ___occuredException ); 
            return new NObjective.RuntimeObject( ___result );
        }
        unsafe public NObjective.RuntimeObject inverseManyToMany() {
            RuntimeObject ___occuredException;
            var ___result = NativeMethods.inverseManyToMany( Handle, CachedSelectors.inverseManyToMany, out ___occuredException, 0 );
            if( ___occuredException != RuntimeObject.Null ) throw RuntimeException.Create( ___occuredException ); 
            return new NObjective.RuntimeObject( ___result );
        }
        unsafe public bool isMaster() {
            RuntimeObject ___occuredException;
            var ___result = NativeMethods.isMaster( Handle, CachedSelectors.isMaster, out ___occuredException, 0 );
            if( ___occuredException != RuntimeObject.Null ) throw RuntimeException.Create( ___occuredException ); 
            return ___result;
        }
        unsafe public bool isReflexive() {
            RuntimeObject ___occuredException;
            var ___result = NativeMethods.isReflexive( Handle, CachedSelectors.isReflexive, out ___occuredException, 0 );
            if( ___occuredException != RuntimeObject.Null ) throw RuntimeException.Create( ___occuredException ); 
            return ___result;
        }
        private static class NativeMethods {
            [DllImport(Runtime.InteropLibrary, EntryPoint = "objc_msgSend_eh2")]
            public static extern IntPtr inverseColumnName( RuntimeObject ___object, Selector ___selector, out RuntimeObject ___occuredException, int ___stackSize );
            [DllImport(Runtime.InteropLibrary, EntryPoint = "objc_msgSend_eh2")]
            public static extern IntPtr inverseManyToMany( RuntimeObject ___object, Selector ___selector, out RuntimeObject ___occuredException, int ___stackSize );
            [DllImport(Runtime.InteropLibrary, EntryPoint = "objc_msgSend_eh2")]
            public static extern bool isMaster( RuntimeObject ___object, Selector ___selector, out RuntimeObject ___occuredException, int ___stackSize );
            [DllImport(Runtime.InteropLibrary, EntryPoint = "objc_msgSend_eh2")]
            public static extern bool isReflexive( RuntimeObject ___object, Selector ___selector, out RuntimeObject ___occuredException, int ___stackSize );
        }
        static internal class CachedSelectors {
            public static readonly Selector inverseColumnName = "inverseColumnName";
            public static readonly Selector inverseManyToMany = "inverseManyToMany";
            public static readonly Selector isMaster = "isMaster";
            public static readonly Selector isReflexive = "isReflexive";
        }
    } 
```

这很明显似乎有一个二传手：

```
public NSSQLManyToMany( IntPtr value ) {
        this.Handle = new RuntimeObject( value );
    } 
```

有任何想法吗？

编辑：我应该补充一点，我已经尝试了所有“简单”的解决方案。从 sim 中删除应用程序不起作用。

我怀疑这可能是因为我有一个实体与同一个（不同的）实体有两个“拥有并属于许多”关系。但我不明白为什么这会是一个实际问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:04:33.000

刚刚想通了！

我在一个实体上有两个关系指向另一个实体，它们无意中具有相同的逆。

为了显示：

```
Part:
   has many (Car*)cars, inverse parts
   has one (Car*)deliveryTruck, inverse parts 
```

有点做作，但想法就在那里。我不得不将第二个更改为`parts`其他属性。

希望这将帮助其他人使用相同的神秘错误消息。你会期望 clang 会警告你这样的事情！（如果你根本没有逆矩阵，这已经够吓人了）。

# css - 怎么能

> ID：12885614
> 
> 赞同：1
> 
> 时间：2012-10-14T19:13:56.857
> 
> 标签：css

我正在尝试在 an 周围创建一个边框，`<H2>`并且边框总是呈现比文本大得多的`<h2>`内容。任何地方都没有设置大小。H2包含一个25px字体大小的文本，让Chrome Developer Tools -> Metrics报告H2的大小为980x183，我可以明显看到这**超出了右边的文本，一直向上越过文本到屏幕顶部，在文本的左侧很远。**

那么，在没有设置大小的情况下，H2 元素的面积怎么会比文字大这么多呢？我可能需要为任何人提供更多上下文来回答这个问题，但似乎这个问题应该能够独立存在。

包含 H2 是 0px x 0px，这`<div>`也让我有点吃惊，但我已经用谷歌搜索了很多，不觉得这可能是相关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:56:09.660

尝试添加 CSS：

```
 h2 { display: inline; padding:0;margin:0} 
```

h2 元素显示为具有默认边距和填充的块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:21:20.657

`<h1>`是一个**块级元素**，默认情况下**会拉伸到其容器的整个宽度**。那将意味着`h2` **框**和`h2` **文本**的宽度不一样。

我不确定您的具体情况，但您可能希望将`display`设置更改为`inline`or`inline-block`并尝试这些结果。

# iphone - iPhone SSID 检查不可靠

> ID：12885624
> 
> 赞同：0
> 
> 时间：2012-10-14T19:15:23.953
> 
> 标签：iphone, ios, nsstream, cfnetwork

我的应用程序要求用户的 iPhone 连接到第 3 方硬件设备，该设备广播一个 SSID，其中包含产品名称（始终相同），后跟一个单元号（即 ProductName_123）；本质上是一个俘虏网络。在允许用户与我的应用程序交互之前，我确保 iPhone 当前已连接到适当的 SSID。我使用以下方法（出于隐私原因，我对产品名称进行了混淆）：

```
- (BOOL) connectedToHardwareDevice
{

    /* Retrieve Interface Information */
    CFArrayRef myArray = CNCopySupportedInterfaces();
    CFDictionaryRef captiveNtwrkDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));

    /* Put network information into an iterable dictionary */
    NSDictionary *dict = ( NSDictionary*) captiveNtwrkDict;
    NSString* ssid = [dict objectForKey:@"SSID"];

    /* Look for the Hardware Device name in the SSID */
    rangeOfString:@"ProductName"].location == NSNotFound || ssid == NULL)
    {      
        return false;
    }
   else
    {        
        return true;
    }    
} 
```

在我的 iPhone 无线网络设置中，我为我的测试设备声明了一个静态 IP，这加快了连接过程，因为避免了 DHCP。但是，通常我会打开应用程序并提示我的“未连接”警报，这是由上述返回 false 的方法触发的。考虑到我使用当前 SSID 更新视图中的文本字段，我觉得这非常奇怪，**尽管显示了警报，但这通常是正确的。**

**我的问题如下：有没有更可靠的方法来实现我的目标？我做错了吗？为了获得更可靠的结果，我可以更改我的方法的某些部分吗？**

谢谢！如果需要任何其他信息，请随时询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:14:01.787

我的解决方案是再次运行该方法，直到计数器达到 20。如果计数器达到 20 并且 SSID 仍然不匹配，则假设用户未连接到硬件设备并进入“等待 WiFi 连接”循环. 这可能不是最优雅的，但它确实有效。

# javascript - 防止 iOS WebApp 中的水平滚动

> ID：12885625
> 
> 赞同：6
> 
> 时间：2012-10-14T19:15:35.317
> 
> 标签：javascript, html, ios, css, horizontal-scrolling

我以前也遇到过类似的问题，并且永远无法真正理解解决方法，所以我最终依赖于 iScroll 之类的插件。这是一个如此简单的任务，我拒绝为它包含一个插件——我想要的是防止 iOS 中的水平滚动。这包括可能在页面上但不可见的任何内容的橡皮筋效果。

据我了解，我需要先完全禁用橡皮筋，然后将触摸滚动应用到容器元素（我给它的 id 为“touch”）。不确定这是否是正确的方法？

```
$(document).bind('touchmove', function(e) {
  if (!e.target == '#touch') {
    e.preventDefault();
  }
}); 
```

#touch 的风格

```
-webkit-overflow-scrolling: touch;
overflow: hidden;
height: 100%;
@media only screen and (max-width: 768px) {
  width: 768px;
} 
```

这不会阻止水平宽度保持在 728 像素，但是，用户仍然可以滚动并查看隐藏的内容。想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T20:43:21.600

好吧，上面的元数据很有用：

```
<meta content="yes" name="apple-mobile-web-app-capable" />
 <meta content="minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no" name="viewport" /> 
```

它们可以防止 Safari 中用户旋转屏幕时发生的错误。但是，完成所需功能的最合适方法是：

*   使用隐藏溢出的父 div，并确保根据视口和子 div 限制此 div 的高度溢出：auto 或 css 3 overflow-y:scroll。所以基本上如果子 div 内的内容的大小超过了孩子的默认大小，你可以垂直/水平滚动它。因为父级有overflow:hidden，所以不会显示子级以外的内容，所以得到了合适的滚动效果。** 此外，如果您使用溢出：隐藏并阻止所有触摸事件的默认设置，则不会出现滚动或奇怪的浏览器行为**

*   在 JavaScript 的帮助下，确保 DOM 中的每个元素都根据视口进行缩放，因此尽可能避免对尽可能多的元素使用静态大小。

*   绑定 touchStart、touchMove 和 touchEnd 事件。除非同时监听到 touchMove 事件，否则 Safari 并不总是触发 touchEnd 事件。即使它只是一个占位符，也要把它放在那里以避免在 Safari 中出现不一致的行为。

*   可以通过两种方式进行水平滑动：在检测到滑动方向后在同一个 div 中加载新内容，或者用所有元素填充该子 div，然后您就可以开始了，实际上将子级在其父级中的边距/位置移动到'滚动'。动画可用于更流畅的界面。

*   绑定你的触摸事件监听器。我不知道您使用的是什么库或事件管理系统，但这没关系。只需为相应的任务调用相应的函数。

*   获取滑动方向（左/右）：

```
var slideBeginX; 
function touchStart(event){event.preventDefault();//always prevent default Safari actions
    slideBeginX = event.targetTouches[0].pageX;
};

function touchMove(event) {
event.preventDefault();
// whatever you want to add here
};

function touchEnd(event) {
event.preventDefault();
var slideEndX = event.changedTouches[0].pageX;

// Now add a minimum slide distance so that the links on the page are still clickable
if (Math.abs(slideEndX - slideBeginX) > 200) {
if (slideEndX - slideBeginX > 0) {
// It means the user has scrolled from left to right
} else {
// It means the user has scrolled from right to left.
};
};
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T23:09:33.093

以下链接可能对您有用，此处禁用垂直并启用水平，您只需根据您的目的稍微调整代码。

[jquery-tools-touch-horizo​​ntal-only-disable-vertical-touch](https://stackoverflow.com/questions/11940351/jquery-tools-touch-horizontal-only-disable-vertical-touch)

如果您不关心垂直滑动，您也可以尝试以下代码 -

```
document.ontouchmove = function(e){
     e.preventDefault();
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T02:18:28.857

这适用于我在 Android、iPhone 和 iPad 上。

```
<!doctype html>
<html>
    <head>
        <meta content="yes" name="apple-mobile-web-app-capable" />
        <meta content="minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no" name="viewport" />
        <title>Main</title>
    </head>
    <body>
...
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T01:11:40.530

如果您不使用元数据，您将*始终*获得橡皮筋效果。

```
<meta name="viewport" content="width=device-width" /> 
```

即使页面完全适合用户仍然可以将页面拉伸得比它应该能够走的更宽，你必须使用视口来防止这种情况，没有其他办法......

# asp.net - 在客户端调用树视图展开/折叠功能的接口？

> ID：12885627
> 
> 赞同：0
> 
> 时间：2012-10-14T19:15:53.703
> 
> 标签：asp.net, treeview

是否有任何内置的 javascript 函数可以从客户端展开/折叠任何树视图特定节点？

实际上，我正在使用启用了复选框的树视图，并且我希望最初折叠和取消选中特定节点，并且在选中时应该展开。

任何内置的东西或想法？我还没有找到任何方法...

**编辑：**

我尝试检查折叠的节点是否在页面上不可见（显示：无或其他内容），以便我可以使用一些 javascript 使它们在父节点的复选框更改时可见，但发现它们根本没有呈现在页面上： (

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:23:24.863

找到了答案！

我错了，它确实使用 [display:none] 渲染折叠节点，所以我的问题解决了。

我现在在树视图上绑定客户端 onclick 事件，并且根据我的要求，当检查父节点时，我正在使折叠的节点可见。

谢谢！

# c - 更改 scanf() 分隔符

> ID：12885628
> 
> 赞同：3
> 
> 时间：2012-10-14T19:15:58.507
> 
> 标签：c, scanf, delimiter

我的目标是将分隔符更改`scanf`为“ `\n`”。我尝试使用`scanf("%[^\n]s",sen);`单个输入并且工作正常。但是当我将同一行放在`for`多个句子的循环中时，它给了我垃圾值。

有谁知道为什么？

* * *

这是我的代码：

```
char sen[20];
for (i=0;i<2;i++)
{
    scanf("%[^\n]s",sen);
    printf("%s\n",sen);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T19:41:45.117

考虑这个（C99）代码：

```
#include <stdio.h>

int main(void)
{
    char buffer[256];

    while (scanf("%255[^\n]", buffer) == 1)
        printf("Found <<%s>>\n", buffer);
    int c;
    if ((c = getchar()) != EOF)
        printf("Failed on character %d (%c)\n", c, c);
    return(0);
} 
```

当我运行它并输入一个字符串“绝对是任何带有空格`TAB``TAB`标签的东西！”时，它给了我：

```
Found <<absolutely anything with   spaces       tabs galore!>>
Failed on character 10 (
) 
```

当然， ASCII (UTF-8) 10 [10]是换行符。

这能帮助你理解你的问题吗？

* * *

> 它在这种情况下有效（对于单行），但如果我想将多行输入放入数组数组中，那么它会失败。而且我不明白如何`scanf`在您的代码中返回值？

`scanf()`许多（大多数？）有经验的 C 程序员避免和`fscanf()`喜欢瘟疫是有原因的；他们很难正常工作。我会推荐这种替代方案， using `sscanf()`，它不会得到与执行相同的`scanf()`执行`fscanf()`。

```
#include <stdio.h>

int main(void)
{
    char line[256];
    char sen[256];

    while (fgets(line, sizeof(line), stdin) != 0)
    {
        if (sscanf(line, "%255[^\n]", sen) != 1)
            break;
        printf("Found <<%s>>\n", sen);
    }
    int c;
    if ((c = getchar()) != EOF)
        printf("Failed on character %d (%c)\n", c, c);
    return(0);
} 
```

这将读取输入行（使用`fgets()`它确保没有缓冲区溢出（假设该`gets()`功能，如果您听说过它，将您的计算机熔化成金属和硅池），然后用于`sscanf()`处理该行。这处理换行符，这是原始代码的失败。

```
char sen[20];
for (i=0;i<2;i++)
{
    scanf("%[^\n]s",sen);
    printf("%s\n",sen);
} 
```

问题：

1.  你不检查是否`scanf()`成功。
2.  在第一次迭代时将换行符留在缓冲区中；第二次迭代生成返回值 0，因为要读取的第一个字符是换行符，它是扫描集排除的字符。
3.  您看到的胡言乱语可能是第一行输入，重复。事实上，如果不是有界循环，它不会等你再输入任何东西；它会一遍又一遍地吐出第一行。

* * *

### 返回值来自`scanf()`

`scanf()`（来自 ISO/IEC 9899:1999）的定义是：

> §7.19.6.4 scanf 函数
> 
> 概要
> 
> ```
>  #include <stdio.h>
>  int scanf(const char * restrict format, ...); 
> ```
> 
> 描述
> 
> 2 该`scanf`函数等效于`fscanf`在 的参数`stdin`之前插入参数`scanf`。
> 
> 退货
> 
> 3`scanf`如果在任何转换之前发生输入失败，该函数将返回宏 EOF 的值。否则，该`scanf`函数返回分配的输入项的数量，如果发生早期匹配失败，该数量可能少于提供的数量，甚至为零。

请注意，当我的第一个程序中的循环退出时，这是因为`scanf()`返回 0，而不是 EOF。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-07T18:29:14.303

`%[^\n]`将换行符留在缓冲区中。`%[^\n]%*c`吃掉换行符。在任何情况下，`%[^\n]`都可以读取任意数量的字符并导致缓冲区溢出或更糟。我使用格式字符串`%*[^\n]%*c`从文件中吞噬一行输入的其余部分。例如，可以读取一个数字并通过 丢弃该行的其余部分`%d%*[^\n]%*c`。如果数字后面有注释或标签，或者其他不需要的数据，这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-28T21:56:26.927

```
char sen[20];
for (i=0;i<2;i++)
{
  scanf("%[^\n]s",sen);
  printf("%s\n",sen);
  getchar();
} 
```

希望这会有所帮助...实际上“\ n”保留在流输入缓冲区中... Ee需要在再次调用scanf之前将其刷新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-06T15:37:59.567

我知道我迟到了，但是经过很长时间测试 C 后我遇到了同样的问题。
这里的问题是新行被视为下一次迭代的输入。

所以，这是我的解决方案，用于`getchar()`丢弃输入流的换行符：

```
char s[10][25];
int i;

for(i = 0; i < 10; i++){
    printf("Enter string: ");
    scanf("%s", s[i]);
    getchar();
} 
```

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-25T07:25:09.653

在循环中使用`scanf("%[^\n]", sen)`时，出现的问题是`\n`停留在输入缓冲区内并且没有被刷新。结果下一次，当使用相同的输入语法时，它会读取`\n`并认为它是一个空输入。解决此问题的一个简单但有效的解决方案是使用：

```
char sen[20];
for (i=0;i<2;i++)
{
    scanf("%[^\n]%*c",sen);
    printf("%s\n",sen);
} 
```

`%*c`摆脱`\n`输入缓冲区中的字符。

# javascript - 我可以用 JavaScript 替换 \u00A0 和换行序列吗？

> ID：12885629
> 
> 赞同：1
> 
> 时间：2012-10-14T19:16:39.350
> 
> 标签：javascript, replace, special-characters

使用 jQuery 文本，我收到了一个包含很多 \u00A0 字符的字符串。另外，我按顺序收到了很多\r\n\r\n ...。

要输出，我需要将 \u00A0 字符替换为全局空格。我还需要从 \r\n 序列中，如 \r\n\r\n\r\n 只留下一个符号 \n。

是否可以通过 JavaScript 替换来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:24:52.607

```
str.replace(/\u00A0/g, " ").replace(/[\r\n]+/g, "\n"); 
```

# java-native-interface - 本机方法中的致命错误：传递给 JNI 的全局或本地引用错误

> ID：12885633
> 
> 赞同：1
> 
> 时间：2012-10-14T19:17:30.033
> 
> 标签：java-native-interface

设置 -Xcheck:jni 选项并调用我的本机方法时出现此错误。

错误是：本机方法中的致命错误：传递给 JNI 的全局或本地引用错误

我把本地方法（C代码）贴在这里，希望知道这段代码有什么问题的人能不吝赐教。谢谢你。

```
 #include <stdio.h>  
    #include <stdlib.h>  
    #include <string.h>  
    #include "fns_data.h"  
    #include "fns_client.h"  
    #include "sockRW.h"  
    #include "/usr/local/include/jni.h"  
    #include "JNIiSearchLib.h"  
    #include "com_eds_wise_util_JNIiSearchLib.h"  

    JNIEXPORT jstring JNICALL  
    Java_com_eds_wise_util_JNIiSearchLib_jniFNSSearchClient (  
        JNIEnv *env, jobject obj, jstring jip_addr, jint jport_number,  
        jstring jfield, jstring jquery_str, jint jhitnum)  
    {  
        HitIds           *hit_list   = NULL;  
        hitListPktStruct *hitPkt     = NULL;  
        int               hit_number = 0;  
        int               i          = 0;  
        int               fnsErrno   = 0;  
        char             *result_str = NULL;  
        jstring          *rslt_str   = NULL;  
        const char       *cip_addr   = NULL;  
        const char       *cquery_str = NULL;  
        char              errbuf[1024];  

        cip_addr   = (*env)->GetStringUTFChars(env, jip_addr, 0);  
        if (cip_addr == NULL) {  
            return ((* env)->NewStringUTF (env, "Error: Cannot get IP address."));  
        }  

        cquery_str = (*env)->GetStringUTFChars(env, jquery_str, 0);  
        if (cquery_str == NULL) {  
            (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);  
            (*env)->DeleteLocalRef(env, cip_addr);  
            return ((* env)->NewStringUTF (env, "Error: Cannot get query string."));  
        }  
        printf ("[Java_JNILib_jniFNSSearchClient] ipaddress[%s] portnumber[%d]"  
                " querystr[%s]\n\n", cip_addr, jport_number, cquery_str);  

        /* Search and get back the handler & total hits 
         */  
        hit_list = fns_search_client0 (cip_addr, jport_number,  
                                       "PN", cquery_str, &hit_number);  

        /* Display total hits 
         */  
        printf ("Total hits = %d\n", hit_number);  

        /* Enumerate every item in the result list and display them. 
         * The results are returned as a string to Java in the following manner: 
         * 
         * "[hitresult1|hitresult2|hitresult3|..|hitresultN]\0" 
         * 
         *     where hitresultN = 94-byte record 
         * 
         * [+string94+|+string94]+stringTerminator  
         */  
        printf ("malloc[%d]\n", (hit_number * 95) + 3);  

        result_str = malloc (((hit_number * 95)+3) * sizeof(char));  
        if (result_str == NULL) {  
            printf ("Out of memory, unable to malloc\n");  
            rslt_str = (* env)->NewStringUTF (env, "Error: Out of memory, unable to malloc");  

            if (hit_list) {  
                FREE_STRING (hit_list);  
            }  
            if (hitPkt) {  
                FREE_HITLIST_STRUCT (hitPkt);  
            }  
            (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);  
            (*env)->ReleaseStringUTFChars (env, jquery_str, cquery_str);  
            (*env)->DeleteLocalRef(env, cip_addr);  
            (*env)->DeleteLocalRef(env, cquery_str);  

            fflush(stdout);  
            return (rslt_str);  
        }  

        sprintf (result_str, "[");  
        for (i = 0; i < hit_number; i++) {  
            strcat (result_str, hitPkt->docNameList[i]);  
            if (i != (hit_number - 1)) {  
                strcat (result_str, "|");  
            }  
        }  
        strcat (result_str, "]");  

        printf ("\n\nFNS search result:[From Library]\n");  
        printf ("%s\n\n",result_str);  

        /* free the handler 
         */  
        if (hit_list) {  
            FREE_STRING (hit_list);  
        }  

        /* free the result lists 
         */  
        if (hitPkt) {  
            FREE_HITLIST_STRUCT (hitPkt);  
        }  

        /* prepare stuff for Java 
         */  
        rslt_str = (* env)->NewStringUTF (env, result_str);  

        /* free our memory 
         */  
        if (result_str) {  
            free (result_str);  
        }  
        (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);  
        (*env)->ReleaseStringUTFChars (env, jquery_str, cquery_str);  
        (*env)->DeleteLocalRef(env, cip_addr);  
        (*env)->DeleteLocalRef(env, cquery_str);  

        fflush(stdout);  
        return (rslt_str);  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:55:32.660

我想知道这甚至是如何编译的。`jstring`已经是指针类型，所以你的

```
jstring          *rslt_str   = NULL; 
```

是一个指向指针的指针，我想知道编译器如何将它作为 retval`GetStringUTFChars`并`return`完全从您的本机方法中获取。

# c++ - c++ 中的多线程服务器：内存泄漏

> ID：12885635
> 
> 赞同：1
> 
> 时间：2012-10-14T19:17:50.370
> 
> 标签：c++, multithreading

我正在用 c++(linux) 编写一个多线程服务器。我的问题是我的代码在最初的几个请求中运行良好，但之后它显示“free:Invalid pointer”。我知道这个错误可能来自我的代码的任何部分，但是对于下面的代码片段，如果我走上正轨，我想知道建议。

// 这是 pthread_create 中使用的辅助函数

```
void *Parse::serveRequest_helper(void *c)
{

  Parse *P1 =(Parse *)c;
  P1->serveRequest();
} 
```

// 在这个函数上 10 个线程在持续工作

```
void Parse::serveRequest()
{
  pthread_detach(pthread_self());
  while(1)
   {
       pthread_mutex_lock(&print_lock);
       if(requestqueue.empty())
          pthread_cond_wait(&print_cond, &print_lock);
       SendData *S = new SendData;
       clientInfo c;
       cout<<"Inside Serving thread"<<endl;
       c = requestqueue.front(); //assuming this queue has data coming from   some other scheduler thread function 
       requestqueue.pop();
       S->requestPrint(c);
       delete S;
       pthread_mutex_unlock(&print_lock);
           cout<<" Inside Thread is out"<<endl;
   }
 } 
```

// 下面的函数我用来将文件的数据写入套接字。

// 当一个线程将处理这个函数时，文件指针将是该线程的本地指针，或者对于所有 10 个线程，它都是全局的 .. ?

```
void SendData::requestPrint(clientInfo c)
{

if (write(c.accept,"Requested File Data :", 21) == -1)
            perror("send");
ifstream file;
file.open(c.filename.c_str());
if (file.is_open())
{
      string read;
      while (!file.eof() )
      {
          getline(file,read);
          if (write(c.accept, read.c_str(), (size_t)read.size()) == -1)
              perror("send");

      }

}
file.close();
close(c.accept);
} 
```

# java - 如何将数组列表中的数据导入 JTable？

> ID：12885637
> 
> 赞同：-1
> 
> 时间：2012-10-14T19:18:07.120
> 
> 标签：java, swing, jtable, tablemodel

> **可能重复：**
> [有什么方法可以使用 ArrayList 中的数据创建 JTable？](https://stackoverflow.com/questions/12880722/is-there-any-way-by-which-i-can-create-a-jtable-using-the-data-in-an-arraylist)

我的程序代码如下：

```
//A loan Amortization example
public class LoanTable 
{

public static void main(String[] args) 
{
    double p,n,r,a,rb,ia,pa,pno=1;

    //creating a double arraylist
    List<double[]> l = new ArrayList<double[]>();

    p=250000;
    n=360;
    r=0.416/100;
    a=1342.05;

    rb=p;

//calculating the amount as interest, amount as principal and remaining balance 
    for(int i=1; i<=n;i++)
    {
        ia=(rb*r);
        pa=a-ia;
        rb=rb-pa;

        l.add(new double[] { pno,a,ia,pa,rb });

        pno++;

    }

    for (double[] row : l) 
    {
        System.out.println(Arrays.toString(row));

    }

}
} 
```

如何导入行中的值来创建表？导入值变得困难。

输出有点像：

[1.0、1342.05、1040.0、302.04999999999995、249697.95]

[2.0、1342.05、1038.7434719999999、303.30652800000007、249394.64347200003]

[3.0、1342.05、1037.48171684352、304.56828315648、249090.07518884353]

[4.0、1342.05、1036.214712785589、305.835287214411、248784.23990162913]

[5.0、1342.05、1034.942437990777、307.1075620092229、248477.13233961992]

[6.0、1342.05、1033.6648705328187、308.3851294671813、248168.74721015274]

[7.0、1342.05、1032.3819883942353、309.6680116057646、247859.07919854697]

[8.0、1342.05、1031.0937694659553、310.9562305340446、247548.12296801293]

[9.0、1342.05、1029.8001915469338、312.2498084530662、247235.87315955988]

[10.0、1342.05、1028.501232343769、313.5487676562309、246922.32439190365]

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:27:51.407

一种方法是`List<double[]>`使用`AbstractTableModel`. 网上有很多关于这个表模型的[好例子](https://stackoverflow.com/questions/4303680/java-swing-extend-abstracttablemodel-and-use-it-with-jtable-several-question)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:20:52.187

*使用JTable*时要理解的关键是每个 JTable 都在内部由*TableModel*支持。如果您不熟悉使用表格，我建议您将[“如何使用表格”](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)作为开始学习实施的好地方

每个表模型基本上都实现了 TableModel 接口。对于您的方案，您应该考虑创建自己的表模型，扩展[AbstractTableModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)类。根据javadoc，

> 要创建一个具体的 TableModel 作为 AbstractTableModel 的子类，您只需提供以下三种方法的实现：
> 
> **公共 int getRowCount();**
> **公共 int getColumnCount();**
> **public Object getValueAt(int row, int column);**

因此，您对 TableModel 的实现将至少是这样的 [请注意，我说的最低*限度**是因为您还希望覆盖此类的其他方法，例如 getColumnNames(...)* ]：

```
import java.util.List;  
import javax.swing.table.AbstractTableModel;

public class MyTableModel extends AbstractTableModel {

    private List<double[]> dataList;

    public MyTableModel(List<double[]> dataList){
        this.dataList = dataList;
    }

    @Override
    public int getRowCount() {
        return dataList.size();
    }

    @Override
    public int getColumnCount() {
        return (dataList.size() > 0) ? dataList.get(0).length : 0;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {

        if(rowIndex < dataList.size()){
            double[] columns = dataList.get(rowIndex);
            if(columns.length > columnIndex){
                return columns[columnIndex];
            }
        }
        return null;
    }
} 
```

# javascript - Google Maps v3 事件点击循环

> ID：12885638
> 
> 赞同：-1
> 
> 时间：2012-10-14T19:18:19.410
> 
> 标签：javascript, jquery, events, google-maps, google-maps-api-3

我的脚本有问题，有人可以帮助我吗？

```
//Add event to google maps click => open marker.infobox
   for(var marker in markersWithArray){
       var lastInfoWindow; //Get lastInfoWindow for close google maps infowindow
       var markerI = markersWithArray[marker]; //Get marker from loop
       var infoWindow = markerI.infoWindow; //get infoWindow from marker, work prefectly
       console.log(infoWindow) // => all time good, object with
                               //    info box. All time unique id and content.

       google.maps.event.addListener(markerI, 'click', function() {
           console.log(infoWindow); //Problem here, object too, but id and content have 
                                    //a last value what recorded on top (console.log) 
                                    //last value of cycle
           if(lastInfoWindow)
               lastInfoWindow.close();
           infoWindow.open(map, this);
           lastInfoWindow = infoWindow;
       });
    } 
```

谁能告诉我如何在事件“google.maps.event.addListener”中获得价值？？谢谢 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:38:07.730

如果您的标记有一个信息窗口作为属性（我不认为它是一个记录的属性，但您的问题暗示它存在），这应该有效：

```
 google.maps.event.addListener(markerI, 'click', function() {
       console.log(this.infoWindow);
       if(lastInfoWindow)
           lastInfoWindow.close();
       this.infoWindow.open(map, this);
       lastInfoWindow = this.infoWindow;
   }); 
```

# ruby-on-rails - Backbone 和 Rails 获取

> ID：12885640
> 
> 赞同：0
> 
> 时间：2012-10-14T19:18:21.750
> 
> 标签：ruby-on-rails, ruby, json, ruby-on-rails-3, backbone.js

所以我用 model.fetch 拉入一个模型

该模型有一个集合。json 包含一个数组（停止）。模型中的集合被数组覆盖，因为这是 model.fetch 返回的 json 包含的内容。有没有办法解决？

```
App.Models.Itinerary = Backbone.Model.extend({
    url: '',
    ID: "",
    Name: "",
    stops: new App.Collections.StopCollection(), 
```

然后我调用 window.Itinerary.fetch()

和停止现在是一个数组（具有正确的数据）

我回来的 JSON 是

（模型）

```
{"ID":"7cd9dcdc-54f1-4704-a8be-393d67559b7e","Name":"China","stops": 
```

（收藏）

```
 [{"ID":"1","Name":"Jordan Stop","Notes":"Ayo Notes!","OrderNumber":null},
{"ID":"5","Name":"Another Jordan Stop","Notes":"Aya Notes :-!","OrderNumber":null}]} 
```

# prolog - 在 prolog 中打印自定义结果

> ID：12885646
> 
> 赞同：0
> 
> 时间：2012-10-14T19:19:10.080
> 
> 标签：prolog

我正在开发一个简单的序言程序。这是我的问题。

说我已经有一个事实`fruit(apple).`

我希望程序接受这样的输入`?- input([what,is,apple]).`

和输出`apple is a fruit`

对于输入，`?-input([is,apple,a,fruit])`
而不是默认的 print `true`or `false`，我希望程序打印一些更好的短语，例如`yes`and`no`

有人可以帮我弄这个吗？

我的代码部分如下：

```
input(Text) :-
   phrase(sentence(S), Text), 
   perform(S).
   %...
sentence(query(Q))     --> query(Q).

query(Query) --> 
   ['is', Thing, 'a', Category],
   { Query =.. [Category, Thing]}.

% here it will print true/false, is there a way in prolog to have it print yes/no, 
%like in other language: if(q){write("yes")}else{write("no")}
perform(query(Q))     :- Q. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:36:17.870

在 Prolog 中有一个构造 if/else：

```
perform(query(Q)) :-
  (  Q
  -> write(yes:Q)
  ;  write(no)
  ), nl. 
```

当我需要对输出格式进行更严格的控制时，我使用[format](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%274.31.2%27,swi%28%27/doc/Manual/format.html%27%29%29)。不是很友好，但提供了大多数常见的选择......

# html - 内联外部的 CSS 不同行为

> ID：12885647
> 
> 赞同：0
> 
> 时间：2012-10-14T19:19:13.670
> 
> 标签：html, css, styles

我正在学习 css atm，我正在尝试使用外部 css 来设置我所有网站的样式。我发现如果我这样做：

```
<ul id="menu" style="width:420px; margin:0 auto"> 
```

我得到了我想要的结果，但是如果我在外部文件上执行它，例如：

这是css文件：

```
*{
margin:0px;
padding:0px;}

header, section, footer, aside, nav, article, hgroup {
display:block;}

body {
width:100%;
display:-webkit-box;
background-color: #808286;
-webkit-box-pack: center;}

#container {
max-width: 1000px;
margin: 20px 0px;
display:-webkit-box;
background-color: #FFFFFF;
display:-webkit-box;
-webkit-box-orient: vertical;
-webkit-box-flex: 1; }

#top_header {
background-color: #fdd023;
padding: 20px;
border: 2px solid #49207e;}

#new_div {
display:-webkit-box;
-webkit-box-orient: horizontal; }

#navigation_bar {
border: 1px solid #5970B2;
padding: 0;}

#main_section   {
border: 1px solid blue;
-webkit-box-flex: 1;
margin: 20px;
padding: 20px;}

 #side_left {
border: 1px solid red;
width: 220px;
margin: 20px 0px;
padding: 30px;
background: #66CCCC;}

 #main_footer {
text-align: center;
padding: 20px;
border-top: 2px solid green;}

#menu {
    width:420px; 
    margin:0 auto;}
#menu li {
list-style: none;
display: inline;
}

#menu li a {
display: inline;
padding: 0 8px 0px;
text-align: center;
text-decoration: none;
}

#menu div {
position: absolute;
visibility: hidden;
margin: 0;
padding: 0;
background: #EAEBD8;
border: 1px solid #5970B2}

#menu div a {
position: relative;
display: block;
margin: 0;
padding: 5px 10px;
width: auto;
white-space: nowrap;
text-align: left;} 
```

这是 HTML 代码：

```
<div id="container">
    <nav id="navigation_bar">
    <ul id="menu">
        <li>
            <a href=""">
                A
            </a>
                <div id="firstMenu">
                    <a href="#">1</a>
                    <a href="#">2</a>
                </div>
        </li>
        <li>
            <a href="">
                B
            </a>

                <div id="secondMenu">
                    <a href="#">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#">4 </a>
                </div>
        </li>
        <li>
            <a href="">
                C
            </a>
        </li>
        <li>
            <a href="">
                D
            </a>
        </li>
        <li>
            <a href="">
                E
            </a>
        </li>
        </ul>
        <div style="clear:both"></div>
    </nav> 
```

我得到了不同的布局。第一个居中我的菜单栏，第二个给我一点填充。我正在使用 Chrome，但我想我可能在这里遗漏了一个关键概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:24:11.027

您看到的差异是由于页面上的一些其他代码造成的。

如果应用了 CSS 规则（在应用级联之后），那么就渲染而言，它来自哪里并不重要。

# ios - 在 iOS 6 中绘制 3D MKPolyline

> ID：12885649
> 
> 赞同：2
> 
> 时间：2012-10-14T19:19:35.880
> 
> 标签：ios, mapkit

有没有办法在 iOS 6 中使用他们的新地图绘制 3D MKPolyline？（例如，飞机着陆轨迹）

# typescript - 使用保留关键字的打字稿定义文件

> ID：12885652
> 
> 赞同：3
> 
> 时间：2012-10-14T19:19:54.197
> 
> 标签：typescript

如何为命名为保留关键字的函数（全局范围）创建类型定义，例如“模块”（qunit，[http](http://api.qunitjs.com/module/) ://api.qunitjs.com/module/ ）？

有前缀字符或我可以使用的东西吗？一个在编译时简单地被删除的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:41:26.133

我也认为没有办法。在这些情况下，您可以使用以下内容：

```
QUnit.module('module_name'); 
```

我正在处理[此链接](https://github.com/borisyankov/DefinitelyTyped/blob/master/qunit/qunit.d.ts)上的 qunit.d.ts 文件。有了它，您可以使用我上面放置的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:15:40.927

我不相信目前有办法做到这一点 - 没有什么像 CoffeeScripts 反引号语法。

一种解决方法是在 JavaScript 中创建一个函数来给模块函数起别名：

JavaScript

```
function moduleAlias(name, lifecycle) {
    module(name, lifecycle);
} 
```

打字稿

```
declare var moduleAlias: { (name: string, lifecycle: any) : void; };

moduleAlias('Test', {}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T06:12:21.493

根据我的回答[，](https://stackoverflow.com/a/14098120/131578)这对我有用：

```
declare var module: any;
(module).exports = MyClass; 
```

# javascript - 在 ajax 加载的内容上加载滑块

> ID：12885655
> 
> 赞同：0
> 
> 时间：2012-10-14T19:20:06.800
> 
> 标签：javascript, jquery, html, ajax

我正在使用的滑块是这个： http: [//www.stunicholls.com/gallery/jquery-slide-anything.html](http://www.stunicholls.com/gallery/jquery-slide-anything.html)

它在普通的 html 上工作正常，但是当我把它加载到 ajax 加载的内容上时，它不再工作了，我该如何修复它？

这是滑块的js：

```
 $(window).load(function(){
    /* just one variable to set-up */

    speed = 600;
    tabColor = '#069';
    tabCurrent = '#09c';

    /* setting the initial state of the slideshow and first image */
    var picVar = $('.iStu12 li.images div.slide div.slidePanel');
    totPic = picVar.length;
    curPicWidth = picVar.eq(0).width();
    curPicHeight = 480;
    totWidth = 0;

    /* calculate the total width of the images and set the div.slide to match */
    $.each((picVar), function() {
    caption=$(this).attr('caption');
    $('.iStu12 li.caption').append('<b>'+caption+'</b>');
    totWidth = totWidth+$(this).width();
    });
    $('ul.iStu12 li.images div.slide').width(totWidth);

    current=0;
    var captionVar = $('.iStu12 li.caption b');
    tabSet ()

    /* resize the containing elements, left/right arrow positions and add the first image caption */
    resize(curPicWidth,curPicHeight)

    /* monitor 'next' clicks */
    $('.iStu12 li.next').click (function() {
        picVar = $('.iStu12 li.images div.slide div.slidePanel');

        /* animate the line of images left one photo - then remove the first image from set, make it the last image then finally move the set to absolute position left:0 */
        curPicWidth = picVar.eq(0).width();
        curPicHeight = 480;
        $('ul.iStu12 li.images div.slide').animate({left:-curPicWidth}, speed, 
            function() {
            $('ul.iStu12 li.images div.slide').find('div.slidePanel:first').remove().appendTo('ul.iStu12 li.images div.slide');
            $('ul.iStu12 li.images div.slide').css('left','0px'); 
        });
        /* get the width, height and alt for the currently displayed image */
        curPicWidth = picVar.eq(1).width();
        curPicHeight = 480;
        /* animate the containing elements and left/right arrow positions to match the current image */
        resize(curPicWidth,curPicHeight)
        current++
        if(current==totPic) {current=0;}
        tabSet ()

    });

    /* monitor 'previous' clicks */
    $('.iStu12 li.prev').click (function() {
        /*  get the last image from the set and make it the fist image, then set the left position of the set to minus the width of the new first image */
        $('ul.iStu12 li.images div.slide').find('div.slidePanel:last').remove().prependTo('ul.iStu12 li.images div.slide');
        picVar = $('.iStu12 li.images div.slide div.slidePanel');

        curPicWidth = picVar.eq(0).width();
        curPicHeight = 480;

        $('ul.iStu12 li.images div.slide').css('left',-curPicWidth); 
        /* animate the first image to left = 0 */
        $('ul.iStu12 li.images div.slide').animate({left:0}, speed);

        /* animate the containing elements, left/right arrow positions to match the current image and change the caption */
        resize(curPicWidth,curPicHeight)
        current--
        if(current==-1) {current=totPic-1;}
        tabSet ()

    });

    /* tab clicking routine */
    $('.iStu12 li.caption b').click (function() {
        clicked = $(this).index()
        /* if to the right of the current tab then slide left */
        if (clicked>current) {
            rotate=clicked-current;
            picVar = $('.iStu12 li.images div.slide div.slidePanel');
            curPicWidth = 0;

            for (var i=0; i<rotate; i++) {
                curPicWidth = curPicWidth+picVar.eq(i).width();
            }
            $('ul.iStu12 li.images div.slide').animate({left:-curPicWidth},{queue:false, duration:speed,  
                complete: function() {
                for (var n=0; n<rotate; n++) {
                $('ul.iStu12 li.images div.slide').find('div.slidePanel:first').remove().appendTo('ul.iStu12 li.images div.slide');
                $('ul.iStu12 li.images div.slide').css('left','0px'); 
                }}
            });

            /* get the width, height and alt for the currently displayed image */
            curPicWidth = picVar.eq(rotate).width();
            curPicHeight = picVar.eq(rotate).height();
            /* animate the containing elements and left/right arrow positions to match the current image */
            resize(curPicWidth,curPicHeight)
            current=clicked;
            tabSet ()
        }
        /* if to the left of the current tab then slide right */
        if (clicked<current) {
            rotate=current-clicked;
            picVar = $('.iStu12 li.images div.slide div.slidePanel');
            curPicWidth = 0;

            for (var i=0; i<rotate; i++) {
                curPicWidth = curPicWidth+picVar.eq(totPic-1).width();
                $('ul.iStu12 li.images div.slide').find('div.slidePanel:last').remove().prependTo('ul.iStu12 li.images div.slide');
            }

            $('ul.iStu12 li.images div.slide').css({left:-curPicWidth, 
                complete: function() {
                /* animate the first image to left = 0 */
                $('ul.iStu12 li.images div.slide').animate({left:0}, speed);
                }
            });
            /* get the width, height and alt for the currently displayed image */
            picVar = $('.iStu12 li.images div.slide div.slidePanel');
            curPicWidth = picVar.eq(0).width();
            curPicHeight = 480;
            /* animate the containing elements and left/right arrow positions to match the current image */
            resize(curPicWidth,curPicHeight)
            current=clicked;
            tabSet ()
        }
    });

    $('.iStu12 li.caption b').mouseover (function() {
        if ($(this).index()!==current) {
            $(this).css('background',tabCurrent);
        }
    }).mouseout(function(){
        if ($(this).index()!==current) {
            $(this).css('background',tabColor);
        }
    });

    function tabSet () {
        captionVar.css('background',tabColor);
        captionVar.eq(current).css('background',tabCurrent);
    }

    /* resize the containing elements, the left/right arrow positions and update the caption */
    function resize (w,h) {
        $('.iStu12').animate({width:w, height:h},speed);
        $('.iStu12 li.images').animate({width:w, height:h},speed);
    }

    }); 
```

我这样加载它：

```
 <script type="text/javascript" src="js/loader.js"></script>
    <script type="text/javascript" src="js/stu12.js"></script> 
```

先是ajax内容，然后是滑块的js

这是 loader.js 的内容：

```
$(document).ready(function(){

// load home when the page loads
$("#content").load("home.html", function(){
  $(this).fadeIn("slow");
});

// load artworks page
$("#artworks > a").click(function(){
    $("#content").hide();
    $("#content").load("artworks.html", function(){
        $(this).fadeIn("slow");
    });
});

    // load projects page
    $("#artworks ul li a").click(function(){
        $("#content").hide();
        $("#content").load("project.html", function(){
            $(this).fadeIn("slow");
        });
    });

    // load single project page         
    $("#project_page").live("click", function(){
        $("#content").hide();
        $("#content").load("project.html", function(){
            $(this).fadeIn("slow");
        });
    });

        // load single project page         
        $("#project_slider").live("click", function(){
            $("#content").hide();
            $("#content").load("project_inside.html", function(){
                $(this).fadeIn("slow");
            });
        });

        // back to projects page        
        $(".back").live("click", function(){
            $("#content").hide();
            $("#content").load("project.html", function(){
                $(this).fadeIn("slow");
            });
        }); 

// load prensa page
$("#prensa_nav").click(function(){
    $("#content").hide();
    $("#content").load("prensa.html", function(){
      $(this).fadeIn("slow");
    });
});

// load contacto page
$("#contacto_nav").click(function(){
    $("#content").hide();
    $("#content").load("contacto.html", function(){
      $(this).fadeIn("slow");
    });
}); 

// active menu item
$(function() {
    $('#menu li').click(function() {
        $('#menu li').each(function() {
            $(this).removeClass('active');
        });
        $(this).addClass('active');
    });
});

/* Menu dropdown */
$(document).ready(function($){

    // Add class of drop if item has sub-menu
    $('ul.submenu').closest('li').addClass('drop');

    // Left Sidebar Main Navigation
    var menu_ul = $('.menu > li.drop > ul'),
        menu_a  = $('.menu > li.drop > a');

    menu_ul.hide()    

    menu_a.click(function(e) {
        e.preventDefault();
        if(!$(this).hasClass('active')) {
            menu_a.removeClass('active');
            menu_ul.filter(':visible').slideUp('normal');
            $(this).addClass('active').next().stop(true,true).slideDown('normal');
        } else {
            $(this).removeClass('active');
            $(this).next().stop(true,true).slideUp('normal');
        }
    });

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:00:03.220

看`stu12.js`，它不是为处理异步加载到各种`slidePanel`div 中的数据而设计的。

要解决此问题，我建议您在将 slidePanel 加载到 HTML 后加载 JS。

看代码，我不确定 slidePanels 是在哪里加载的？在动态加载的 HTML 文件之一中？如果多个 HTML 文件具有这些滑动面板，您将遇到问题。

因此，首先从您的 HTML 中删除这一行：

```
<script type="text/javascript" src="js/stu12.js"></script> 
```

如果 slidePanels 仅在一个 HTML 文件中，则在`$(this).fadeIn("slow");`要动态加载滑块 JavaScript 的语句之前添加相关 HTML 加载：

```
 $.getScript("js/stu12.js")
      .done(function(script, textStatus) {
            console.log( textStatus );
      })
      .fail(function(jqxhr, settings, exception) {
           console.log( "Error loading stu12.js: " + exception);
   }); 
```

如果您在多个动态加载的 HTML 页面中有这些滑动面板，那么我建议您更改 JavaScript，以便在页面加载时动态加载*所有*HTML 页面，但隐藏在不同的 div 中，然后可以使用不同的点击功能显示.

一旦加载了所有 HTML 页面，您就可以加载滑块 JavaScript：

```
$('#content').ajaxStop(function() {
       $.getScript("js/stu12.js")
          .done(function(script, textStatus) {
                console.log( textStatus );
          })
          .fail(function(jqxhr, settings, exception) {
               console.log( "Error loading stu12.js: " + exception);
       });
}); 
```

# c++ - 在没有 netbeans 的情况下运行 C++ netbeans 项目

> ID：12885657
> 
> 赞同：1
> 
> 时间：2012-10-14T19:20:14.667
> 
> 标签：c++, linux, netbeans-7

好吧，我一直在用 netbeans 用 C++ 开发一个应用程序。现在是我想使用不同工具来测量/测试/改进我的应用程序的时候了，例如“valgrid”或分析器。Netbeans 为我拥有的每一对 .h 和 .cpp 类以及 main.cpp 创建了一个 .o 文件。如何链接所有这些以从命令行运行它们？在运行时我应该考虑我添加的外部库吗？我只需要找到可执行文件并从命令行运行它。

谢谢 ;）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T19:26:26.480

您应该考虑编写一个[makefile](http://en.wikipedia.org/wiki/Makefile)。这是一个[教程](http://mrbook.org/tutorials/make/)。

# jquery - 如何使 jquery 单击事件仅在第一次单击时触发

> ID：12885660
> 
> 赞同：27
> 
> 时间：2012-10-14T19:20:44.543
> 
> 标签：jquery

我有两个 div（.basic1 和 .basic2）。我希望 .basic1 在点击时淡出，而 .basic2 在我工作出色的情况下淡出。唯一的问题是一旦.basic2淡入，如果用户继续点击链接（.navbar1），它会一遍又一遍地淡入这个div。我知道我需要使用 .bind() 函数，但我似乎无法弄清楚在我的代码中放置它的位置。谢谢！

```
$(document).ready(function() {
    $('.navbar1').click(function(e){
        e.preventDefault();

        $('.basic2').hide().load('.basic2', function() {
            $(this).delay(600).fadeIn(1000);
            $('.basic1').fadeOut(1000);
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-14T19:21:48.100

使用[`.one()`](http://api.jquery.com/one/)：

```
$('.navbar1').one('click', function(e) { 
```

`click`一旦触发它，它就会取消绑定事件。

如果您不希望双击某个元素，则应该使用以下方法：

```
$(document).on('click', '.navbar1:not(.clicked)', function() {
    // ...
}); 
```

要使`.navbar1`不可点击，只需运行`$('.navbar1').addClass('clicked')`. 要使其可点击，请执行相反的操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T19:22:36.757

请参阅 jQuery[`one()`](http://api.jquery.com/one/)了解一次性事件处理程序。IE

```
$(document).ready(function() {
    $('.navbar1').one('click', function(e){
        e.preventDefault();

        $('.basic2').hide().load('.basic2', function() {
            $(this).delay(600).fadeIn(1000);
            $('.basic1').fadeOut(1000);
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-14T19:22:52.397

jQuery正好为此提供了[.one()方法。](http://api.jquery.com/one/)

```
$(document).ready(function() {
    $('.navbar1').one('click', function(e){
        e.preventDefault();
        $('.basic2').hide() 
        .load('.basic2', function() {
            $(this).delay(600).fadeIn(1000);
            $('.basic1').fadeOut(1000);
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-09-24T20:37:34.150

## 使用现代 Js 事件，“一次”！

```
const navbar = document.getElementsByClassName("navbar1")[0];
navbar.addEventListener("click", function() {
    // Add one-time callback
}, {once : true}); 
```

[文档](https://developers.google.com/web/updates/2016/10/addeventlistener-once),[可以使用](http://caniuse.com/#feat=once-event-listener)

# svn - 单个图像文件作为 SVN 外部文件

> ID：12885661
> 
> 赞同：10
> 
> 时间：2012-10-14T19:20:45.557
> 
> 标签：svn, tortoisesvn, svn-externals

我正在尝试添加图像，`svn:externals`但 TortoiseSVN 以某种方式拒绝它。

目前，我在本地驱动器上有两个存储库，名为`repoA`和`repoB`. 还有两个名为`workA`和的工作目录签出`workB`。`workA`是 的 结帐`repoA`并且`workB`是 的 结帐`repoB`。

结构是这样的：

> Z:\repos\repoA
> 
> Z:\repos\repoB
> 
> Z:\项目\workA
> 
> Z:\项目\workB

我做了什么：

1.  右键单击`Z:\Projects\workB`->`TortoiseSVN -> Properties`
2.  按下`New -> Externals`
3.  按下`New`，输入`trunk/screenshot.jpg`本地路径和`file:///Z:/repos/repoA/trunk/screenshot.jpg`URL。

    ![在此处输入图像描述](../Images/45784eb2720e19d7ede96f7b8b9ba91f.png)

    ![在此处输入图像描述](../Images/e8b932dc4efd7b82f329ab357379e700.png)

4.  按下`OK`关闭所有设置窗口。

5.  右键单击`Z:\Projects\workB`->`SVN Commit..`
6.  右键单击`Z:\Projects\workB`->`SVN Update..`

我得到这个错误：

> Z:\Projects\workB\trunk\screenshot.jpg
> 
> 不支持的外部：外部文件的 url
> 
> 'file:///Z:/repos/repoA/trunk/screenshot.jpg' 不在存储库中
> 
> 'file:///Z:/repos/repoB'

![在此处输入图像描述](../Images/9d4b353cba0ecba506a3f331f8d54812.png)

当我在 上提交新更改时`workB/trunk`，它不会更新图像。所以执行`SVN Update`不会`workB/trunk`从 repoA 导入图像。我还导入了一个文件夹，`svn:externals`并且它下的文件已正确导入。所以我怀疑无法指定单个文件。我不知道。

在回购浏览器中，真实文件不存在，只有链接文件。

![在此处输入图像描述](../Images/add1de54108bae0b947f1f1b02ac1ec9.png)

里面有`repoA`真实的图像文件，虽然错误说没有。

![在此处输入图像描述](../Images/31019d69d92ca5a49b08627988a62846.png)

那么有可能做到吗？还是我做错了？

**更新**

根据[这篇文章](http://svnbook.red-bean.com/nightly/en/svn.advanced.externals.html)，

> Subversion 1.6 还引入了对文件外部定义的支持。文件外部文件的配置就像目录的外部文件一样，并在工作副本中显示为版本化文件。
> 
> 例如，假设您的存储库中有文件 /trunk/bikeshed/blue.html，并且您希望该文件（在修订版 40 中出现）在 /trunk/www/ 的工作副本中显示为 green.html .

所以 v1.6 或更高版本似乎是可能的。我正在使用*svn，版本 1.7.6 (r1370777)*。附加参考：

*   [我们可以为 debian 中的单个文件设置 svn:external](https://stackoverflow.com/questions/1371583/can-we-set-svnexternal-for-a-single-file-in-debian)
*   [我们可以在 Subversion 中将单个文件设置为外部文件吗？](https://stackoverflow.com/questions/1355956/can-we-set-a-single-file-as-external-in-subversion)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T19:46:46.990

我认为这是因为您**不能在两个不同的存储库**（在您的示例中为 RepoA 和 repoB）之间使用外部文件功能。

在官方文档中查看此限制：http:
[//tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-externals.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-externals.html)

抽象的：

> 外部文件的 URL 必须与将插入外部文件的 URL 位于同一存储库中；不支持跨存储库文件外部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T14:14:51.440

我遇到了同样的问题，似乎您曾经能够在 Subversion 1.6 中拥有外部文件，但现在在 subversion 1.7 中修复了“错误”！并且您只能将外部文件夹从一个存储库转移到另一个存储库，而不是文件

# php - 如何使用条件标签将对象放置在除首页之外的所有页面上？

> ID：12885666
> 
> 赞同：0
> 
> 时间：2012-10-14T19:21:29.653
> 
> 标签：php, html, image, wordpress, if-statement

我试图在除 Wordpress 网站主页之外的所有页面上放置一个“返回主页”按钮。我已成功将项目放置在所有页面上，但无法弄清楚如何从主页中删除它。我知道我可能需要使用条件标签，但并没有太多地使用它们。

这是我在 header.php 中使用的代码：

```
<div class="outer"><a href="http://s416809079.onlinehome.us/"><img src="http://theshalomimaginative.com/testsite/wp-content/themes/pilot-fish/images/Untitled-1.png"/></a></div> 
```

我需要使用什么才能使图像不在主页上？

任何有关如何做到这一点的帮助都会很棒！谢谢！

这是该网站的链接： http: [//s416809079.onlinehome.us/](http://s416809079.onlinehome.us/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:28:04.973

使用[`is_home()`](http://codex.wordpress.org/Function_Reference/is_home)或[`is_front_page()`](http://codex.wordpress.org/Function_Reference/is_front_page)。哪个有效取决于您的主题和配置的一些特性。你会有：

```
<?php
if (!is_home()) { ?>
    <div class="outer"><a href="http://s416809079.onlinehome.us/"><img src="http://theshalomimaginative.com/testsite/wp-content/themes/pilot-fish/images/Untitled-1.png"/></a></div><?php
} ?> 
```

或与`is_front_page()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:26:21.903

您应该更改 CSS 文件中属性的参数 CSS 数据`.outer`。

```
div.outer img
{
    width: 300px;
    height: 300px;
    float: left;
    left: 10px;
    top: 10px;
} 
```

# javascript - 是否可以将字体系列设置为

> ID：12885667
> 
> 赞同：2
> 
> 时间：2012-10-14T19:21:34.480
> 
> 标签：javascript, html

可以设置`font-family`一个`<option>`吗？我试过`font-family`了，但没有用。这是我的代码：

```
var fonts = ["Arial", "Helvetica", "Serif", "Cambria"];
for (i = 0; i < fonts.length;i++) {
    var font  = document.createElement("option");
    var fontT = document.createTextNode(fonts[i]);

    document.getElementById ("t-font").appendChild (font);
    font.appendChild (fontT);
    font.style.fontFamily = fonts[i];
} 
```

（[演示](http://jsfiddle.net/ru6gM/)）

js有什么问题还是用html根本不可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:32:58.467

适用规范中没有任何内容阻止您在选项元素上设置字体系列，但浏览器支持参差不齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:53:22.657

我认为您应该更改方法（或 HTML 标记），因为该`select`元素不适合此目的。每个浏览器的行为都不同。我会使用`RADIO`按钮。像这样：

```
<div id="choose_font">
</div>
<script>
    var fonts = ["Arial", "Helvetica", "Serif", "Cambria"];
    var container = document.getElementById('choose_font');
    for (i = 0; i < fonts.length;i++) {
        var input = document.createElement('INPUT');
        var label = document.createElement('LABEL');
        input.setAttribute("id","t_"+fonts[i]);
        input.setAttribute("type","radio");
        input.setAttribute("name","t_font");
        label.setAttribute("for","t_"+fonts[i]);
        label.style.fontFamily = fonts[i];
        label.appendChild(document.createTextNode(fonts[i]));
        container.appendChild(input);
        container.appendChild(label);
        container.appendChild(document.createElement('BR'));
    }
</script> 
```

使用适当的 CSS，您可以使它看起来像一个选择。

# iphone - 屏幕旋转处理ios

> ID：12885671
> 
> 赞同：0
> 
> 时间：2012-10-14T19:22:15.347
> 
> 标签：iphone, ios, navigationcontroller, screen-rotation

应用程序包含 5 个具有网格状层次结构的页面，即可以从任何页面访问每个页面。每个页面都有纵向和横向支持。

因此，当从导航控制器推送和弹出视图控制器时，我无法处理旋转。

任何人都可以向我建议可用于实现上述内容的所需方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:13:01.770

这可能是 iOS 6 的问题。 UINavigationController 不会自动调用`supportedInterfaceOrientations:`，除非你告诉它。

查看这个[问题](https://stackoverflow.com/questions/12504464/ios-6-uitabbarcontroller-supported-orientation-with-current-uinavigation-control)的答案。

创建一个类别似乎是最好的解决方案。

```
@implementation UINavigationController (iOS6OrientationFix)

-(BOOL) shouldAutorotate {
    return [self.topViewController shouldAutorotate];
} 

-(NSUInteger) supportedInterfaceOrientations {
    return [self.topViewController supportedInterfaceOrientations];
}

@end 
```

# android - 适用于 android 的自定义小部件（按钮、框等）

> ID：12885675
> 
> 赞同：0
> 
> 时间：2012-10-14T19:22:48.317
> 
> 标签：android, android-widget, custom-widgets

使用自定义样式的小部件（小部件是指 gui 元素，如按钮、框、菜单）开发 android 应用程序有哪些可能性。我想开发不使用 android 标准外观和感觉的 android 应用程序。有哪些可用的小部件库？还有其他方法可以实现这一目标吗？

一种可能性是使用 html 和 phonegap 并使用 css 设置应用程序的样式。但我正在寻找一种非 html 和 phonegapesque 方式来实现这一点。

例如，查看下一页中提到的应用程序：

[http://androidquark.com/top-6-best-alternative-photography-apps-instagram/](http://androidquark.com/top-6-best-alternative-photography-apps-instagram/)

他们自己绘制小部件吗？或者可以使用其中一个答案中提到的主题来实现这种效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:34:50.017

您几乎可以按照自己的方式自定义小部件。例如，按钮很容易通过使用 ImageButton 进行自定义，并将其分配给您想要的任何图形。这是一个调色板中的自定义“按钮”示例，即将发布到我的应用程序的更新中……甚至蜡笔也是按钮。

![在此处输入图像描述](../Images/2d6577d17e34416a5dae5746ecf2fd8d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T23:11:10.830

你可以在这里找到它们的集合： [https ://github.com/mingyuan-xia/DevAndroidQuickly](https://github.com/mingyuan-xia/DevAndroidQuickly)

# php - 我可以用“，”分隔mysql行中的数据并破译该数据吗？

> ID：12885678
> 
> 赞同：1
> 
> 时间：2012-10-14T19:23:04.753
> 
> 标签：php, mysql

好的，我正在制作一个个人资料页面，我将在其中调用所有用户的信息。在网站内，用户将获得积分并获得徽章。我有35个徽章。而不是在我的用户表中为每个用户的每个徽章（是/否来决定用户是否获得徽章）都保留一行，我想知道如何在不炸毁用户表的情况下做到这一点。

我有一个带有索引、名称、描述和照片的徽章表。我想知道我可以在我的用户表中为徽章制作一行，并用“，”分隔徽章编号。然后破译徽章，使它们都打印在页面上。我觉得我可以做到，但不知道怎么做。

请帮忙。接受其他建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:25:53.910

您正在描述[多对多关系](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)；使用[联结表](http://en.wikipedia.org/wiki/Junction_table)来表示它。

创建一个用户表和一个徽章表。然后创建一个带有`user_id`和`badge_id`作为外键的 Users_Badges 表（它们将一起形成一个[复合键](http://www.sqa.org.uk/e-learning/MDBS01CD/page_19.htm)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:28:16.340

您可以创建这样的表结构。

**表结构**

**用户**

userId 用户名

**徽章**

徽章ID 徽章名称

**用户徽章**

userId 徽章ID

**-- 返回给定用户在单行和逗号分隔字段中的所有徽章。**

```
select group_concat(b.badgeName) as usersAllBadges
from user_badges ub
inner join users u on u.userId = ub.userId
inner join badges b on b.badgeId = ub.badgeID
where ub.userID=1 
```

**-- 返回给定用户的所有徽章单独的行。**

```
select b.badgeName
from user_badges ub
inner join users u on u.userId = ub.userId
inner join badges b on b.badgeId = ub.badgeID
where ub.userID=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T19:32:01.200

你标记了 php 所以我假设 php

```
 explode(',',$data); 
```

[http://www.php.net](http://www.php.net)

# c - 在 C 中使用 OpenSSL 库解密时，PEM_read_RSAPrivateKey 返回“Illegal Seek”

> ID：12885680
> 
> 赞同：4
> 
> 时间：2012-10-14T19:23:18.427
> 
> 标签：c, openssl, rsa

这个问题一直让我抓狂！:) 我正在生成几个公钥/私钥对，但是当我加载私钥时出现错误。我正在使用 C。请注意，我确实在键上使用了密码“password”，它设置为 #define，但我尝试将其作为字符串手动输入，没有区别。这是我生成密钥的方式：

```
FILE *fp;
OpenSSL_add_all_algorithms();
RSA *rsa=NULL;
unsigned char seed[KEYSIZE];
int i;

//Seed PRNG
srand(time(NULL));
RAND_bytes(seed, KEYSIZE - 1);

//Generate a key
if ((rsa=RSA_generate_key(KEYSIZE,65537,NULL,NULL)) == NULL) ERR_get_error();

//Write the public key
fp = fopen(pubkey,"w");
if (!PEM_write_RSA_PUBKEY(fp, rsa)) {
    printf("Error writing public key\n"); exit(1);
}
fclose(fp);

//Write the private key
fp = fopen(privkey,"w");
if (!PEM_write_RSAPrivateKey(fp, rsa, EVP_des_ede3_cbc(), NULL, 0, NULL, PASSWORD))
{
   printf("Error writing private key\n"); exit(1);
}
fclose(fp); 
```

这成功完成，我最终将文件放在适当的位置，它们看起来不错。我还使用这些文件在命令行上成功加密/解密，所以我知道它们可以工作！

这是我加载私钥的方式：

```
static void decrypt(int locale) {
FILE *key; 
RSA *rsa;

key = fopen(PRIVATEKEY, "r");
if (key == NULL) perror("Error reading private key");

rsa = PEM_read_RSAPrivateKey(key, NULL, NULL, PASSWORD); // THIS BREAKS!
if (rsa == NULL) perror("Private Key not valid");  // I always get this error :(

if (rsa != NULL) RSA_free(rsa);
fclose(key);} 
```

有什么建议么？我浏览了源文件 rsa.c，这基本上就是他们在那里的操作方式，除了他们使用 BIO 而不是 freads。我不明白为什么我的方式不应该工作！

这是`strace`输出的相关部分：

```
open("/opt/evoting/keys/priv/mix1.priv", O_RDONLY) = 15
fstat64(15, {st_mode=S_IFREG|0644, st_size=1751, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb773c000
read(15, "-----BEGIN RSA PRIVATE KEY-----\n"..., 4096) = 1751
dup(2)                                  = 16
fcntl64(16, F_GETFL)                    = 0x2 (flags O_RDWR)
fstat64(16, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 2), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb773b000
_llseek(16, 0, 0xbfba00d0, SEEK_CUR)    = -1 ESPIPE (Illegal seek)
write(16, "Private Key not valid: Resource "..., 56Private Key not valid: Resource     temporarily unavailable ) = 56
close(16)                               = 0
munmap(0xb773b000, 4096)                = 0
close(15)                               = 0
munmap(0xb773c000, 4096)                = 0 
```

此外， perror 会产生错误“资源不可用”。我不确定那是什么，但我将硬和软 ulimit 重置为非常高，但它什么也没做。我将该函数复制到它自己的文件中并编译它，它不会在那里产生错误（尽管它仍然无法读取密钥）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T20:36:12.860

啊哈！好吧，我刚刚学到了很多关于解决这些问题的知识，希望它可以帮助其他人。我的大部分信息来自这个线程：[http ://readlist.com/lists/openssl.org/openssl-users/2/10340.html](http://readlist.com/lists/openssl.org/openssl-users/2/10340.html)

基本上我不需要使用`perror`，而是使用`ERR_print_errors_fp(stderr)`. 这给了我一个实际的错误消息，如下所示：

```
3077973640:error:0906B072:lib(9):func(107):reason(114):pem_lib.c:530: 
```

然后我使用命令：`openssl errstr 0906B072`并得到：

```
error:0906B072:PEM routines:PEM_get_EVP_CIPHER_INFO:unsupported encryption 
```

这基本上让我回到了创建我的密钥对的地方，我在其中指定了 CBC: EVP_des_ede3_cbc()，RSA 不支持它。所以你去吧！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-30T12:21:04.257

我找到了解决方案-您`OpenSSL_add_all_ciphers()`之前只需调用函数

> `OpenSSL_add_all_ciphers()`将所有加密算法添加到表中，包括基于密码的加密算法。
> 
> 密码和摘要查找函数用于库的许多部分。如果表未初始化，则几个函数将行为不端并抱怨他们找不到算法。这包括 PEM、PKCS#12、SSL 和 S/MIME 库。这是 OpenSSL 邮件列表中的常见查询。
> 
> 在所有算法中调用 OpenSSL_add_all_algorithms() 链接：因此静态链接的可执行文件可能非常大。如果这很重要，可以只添加所需的密码和摘要。

[http://www.openssl.org/docs/crypto/x509.html#](http://www.openssl.org/docs/crypto/x509.html#)

# ios - 如何为 iOS 应用程序的版本更新收费

> ID：12885681
> 
> 赞同：0
> 
> 时间：2012-10-14T19:23:19.597
> 
> 标签：ios, app-store

是否可以为新版本的 iOS 应用程序收费？它是否与应用程序的主要版本更新相关联？

我的应用程序目前是 1.8 版本，新版本几乎是重写，我希望它是对下一个版本的付费更新。

如果我将版本升级到 2.x，那会自动成为付费更新吗？否则有什么方法可以完成付费更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:28:41.097

如果您希望每个用户（包括您当前的用户）为新版本付费，您需要将其作为新应用程序提交。当前用户将免费下载更新。如果您更改价格等级，新用户将为应用程序付费。不，更新不会自动成为付费更新。现有用户可以免费更新。

但是，您可以创建应用内购买来解锁新功能。这将确保即使是当前用户也需要为“更新”付费。

# bash - 使用 find 命令搜索直到第一个匹配

> ID：12885694
> 
> 赞同：2
> 
> 时间：2012-10-14T19:24:34.707
> 
> 标签：bash, command, find

我只需要搜索可以在任何地方的特定目录有没有办法运行这个命令直到第一次匹配？谢谢！我现在正在使用

```
find / -noleaf -name 'experiment' -type d | wc -l 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:35:03.927

正如鲁道夫·穆尔鲍尔（Rudolf Mühlbauer）所说，该`-quit`选项告诉`find`您要退出。手册页示例是
`find /tmp/foo /tmp/bar -print -quit`
仅打印`/tmp/foo`.

稍微更一般地说，`find`可能是您想做的错误工具。见`man locate`。例如，在我的系统上，
`locate experiment | head -3`
产生

```
/usr/lib/tc/experimental.dist
/usr/share/doc/xorg/reference/experimental.html
/usr/share/doc/xorg/reference/experimental.txt 
```

while`locate -r 'experimental..$'`产生（为简洁起见，剪掉了 6 行）

```
/usr/src/linux-headers-3.2.0-24-generic/include/config/experimental.h
 (snip)
/usr/src/linux-headers-3.2.0-32-generic/include/config/experimental.h 
```

# mysql - mysql将一个列值替换为另一个

> ID：12885702
> 
> 赞同：0
> 
> 时间：2012-10-14T19:25:26.307
> 
> 标签：mysql

我正在尝试从 mysql 数据库中提取学生和他们注册的课程。我想用输出中的课程名称替换课程 ID。

我有这些表和列：

表：`users_to_courses` 列：`users_LOGIN`和`courses_ID`

表：`users` 列：`login`，`name`和`surname`

表：`courses` 列：`id`和`name`

这些表在以下方面联系在一起：

```
users_to_courses.users_LOGIN = users.login 
users_to_courses.courses_ID = courses.id 
```

我正在尝试获取姓氏、姓名、课程（按姓名而不是 id）的输出，因此它看起来像 Smith、John Chemistry、Physics、Composition

这是我尝试失败的方法：

```
SELECT
users.surname,
users.name,
users.login,
users_to_courses.users_LOGIN,
(select group_concat (courses.name) from courses
where users_to_courses.users_LOGIN = users.login and users_to_courses.courses_ID =    
courses.id
GROUP BY users.surname) as courses
from courses join users_to_courses
on courses.id = users_to_courses.courses_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:55:04.497

```
SELECT users.login, users.surname, users.name, courses.name
FROM users_to_courses
INNER JOIN users ON users_to_courses.users_LOGIN = users.login
INNER JOIN courses ON users_to_courses.courses_ID = courses.id
GROUP BY users_to_courses.users_LOGIN 
```

users_to_courses 表是如何组织的并不完全清楚，如果它是每行条目一个类，那么你将最终每类一个行，但是对应于相同用户 ID 的所有行在表中都是连续的。 .

如果 users_to_courses.courses_ID 条目是多个课程 ID 的列表，这可能不起作用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:34:23.257

```
 SELECT users.surname, users.name, users.login, users_to_courses.users_LOGIN from courses c 
 INNER JOIN users_to_courses uc ON  uc.courses_ID = c.id
 INNER JOIN login l ON uc.users_login = l.login 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T19:34:52.337

试试这个

```
Select

    u.surname,
    u.name,
    u.login,
    uc.users_LOGIN,
    c.Name,

    --added this line
    group_concat (c.name)  
From users_to_courses uc
JOIN users u ON uc.users_LOGIN = u.login 
JOIN courses c ON uc.courses_ID = c.id

-- added this line
GROUP BY u.surname, u.name, u.login, uc.users_LOGIN 
```

# c# - MySQL 中 INNER JOIN 的语法错误

> ID：12885713
> 
> 赞同：1
> 
> 时间：2012-10-14T19:26:45.030
> 
> 标签：c#, mysql, inner-join

尝试从 MySql 服务器内部连接数据库时出现错误。

我收到此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“lines INNER JOIN snippets ON snippets.id = lines.snippetid_fk WHERE lines.snippe”附近使用正确的语法

我在 ASP.Net C# 中编码。

这是我给出错误的函数：

```
MySqlConnection conn = new MySqlConnection();

string mysql = "Server=***;Database=***;User=***;pwd=***";
conn.ConnectionString = mysql;

MySqlCommand cmd = new MySqlCommand();
cmd.CommandText = "SELECT * FROM lines " +
                  "INNER JOIN snippets ON snippets.id = lines.snippetid_fk " +
                  "WHERE lines.snippetid_fk = 1";
cmd.Connection = conn;

DataTable dt = new DataTable();
MySqlDataAdapter adapter = new MySqlDataAdapter(cmd);

adapter.Fill(dt);

Repeater_codebank.DataSource = dt;
Repeater_codebank.DataBind(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:34:30.670

根据文档，`lines`是在[MySQL 保留字列表中](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

为了使您的查询正常工作，您必须在表名周围添加反引号：

```
cmd.CommandText = "SELECT * FROM `lines` " +
                  "INNER JOIN snippets ON snippets.id = lines.snippetid_fk " +
                  "WHERE `lines`.snippetid_fk = 1"; 
```

# cordova - 没有 Cordova 特性的 IBM Worklight 项目。我选择了混合应用程序

> ID：12885726
> 
> 赞同：0
> 
> 时间：2012-10-14T19:28:01.860
> 
> 标签：cordova, ibm-mobilefirst

我在 IBM Worklight 中创建了一个混合应用程序。添加了 android 作为目的地。当我尝试编译时，它无法识别 cordova.js 或任何 phonegap 代码。因此，当我搜索 Cordova.jar 或 cordova.js 时，找不到它。

有没有人遇到过这个问题以及任何其他手动修复它的方法？

谢谢和问候， 普兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:59:26.697

一旦您构建了一个具有 Android（或任何其他移动）环境的项目，Worklight Studio 将自动生成一个原生 Android 项目，其中包含您在 project/apps/your-app-name/android/native 文件夹中的 Web 资源。该项目将自动导入到您的 Eclipse 中。

Cordova.js 和 Cordova.jar 文件会自动添加到本机项目中。

# mysql - 表字段的国际化

> ID：12885730
> 
> 赞同：0
> 
> 时间：2012-10-14T19:28:21.707
> 
> 标签：mysql, database, database-design, internationalization, logic

我正在学习数据库国际化并有一个“小”问题。

我有一个名为的表，`categories`其中包含字段`id`,等。并且，该表也具有字段、、和其他字段。`name``description``products``id``category_id``name``description`

```
categories table
id | name | description | ...others 
```

和

```
products table
id | category_id | name | description | ...others 
```

我需要将这些（和其他）表国际化。因此，开始的方法是再创建三个表并更改第一个表。

```
languages table
id | name | code

categories table
id | ...others

category_languages table
id | category_id | language_id | name | description

products table
id | category_id | ...others

product_languages table
id | product_id | language_id | name | description 
```

好吧，主要问题是：有办法将本地化“集中”在一张表中吗？我忘记了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:35:03.073

您可以在一个表中添加翻译的标签和翻译，然后在每个表的新列中添加翻译的标签。您将有一个名为 translations 的表，其中 id 列可以是标签和翻译列：

```
id | label | translation | language_id 
```

在每张桌子上：

```
id | some columns | translation_label 
```

# java - 将字符附加到字符串上

> ID：12885731
> 
> 赞同：0
> 
> 时间：2012-10-14T19:28:33.547
> 
> 标签：java, file, text, input, char

我正在尝试编写代码以将给定文本文件的所有字符（包括空格）导入单个字符串以进行分析。为此，我正在使用 Java 中的给定文件，并且在将它们放在一起时遇到了一个奇怪的错误。我根本不熟悉编码，希望得到澄清。发生的事情是在下面的代码中，当我设置

text.append(ch);

我有默认构造函数无法处理 X 抛出的异常的错误，必须定义显式构造函数；

当我设置 text.append('ch');

上述错误消失了，我的“ch”行只给出了无效的 char const。错误，可以通过删除''来修复。

所以我认为我必须从Java为我的给定构造一个显式构造函数，这是必要的吗？因为我不知道该怎么做，所以有一个迂回的解决方案会很好。

```
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.lang.StringBuilder;

public class TextReader //cannot place inputs/outputs of string on this line
{

StringBuilder text = new StringBuilder();
//StringBuilder google
//google end of file check java

InputStream in = new FileInputStream("charfile.txt");
Reader r = new InputStreamReader(in, "US-ASCII");
int intch;
{
while ((intch = r.read()) != -1)
{
    char ch = (char) intch;
        // ...
    text.append(ch); //if I make this a 'ch', the errors above go away, what's the problem?
}
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:33:52.107

您需要将语句放在代码块中，例如`main`方法。

```
public static void main(String[] args) throws IOException {
    StringBuilder text = new StringBuilder();
    // StringBuilder google
    // google end of file check java

    InputStream in = new FileInputStream("charfile.txt");
    Reader r = new InputStreamReader(in, "US-ASCII");
    int intch;
    {
        while ((intch = r.read()) != -1) {
            char ch = (char) intch;
            // ...
            text.append(ch); 
        }
    }
} 
```

声明

```
InputStream in = new FileInputStream("charfile.txt");
Reader r = new InputStreamReader(in, "US-ASCII"); 
```

两者都抛出不能在类块中发生的检查异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:34:54.650

实际上 java 中的 IO 需要 try 和 catch 块，否则它会给你错误。同样在上面的代码中，您必须将声明放在显式定义构造函数中

```
TextReader()
{
//----------- Your Code here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T19:44:16.770

当你这样做时`text.append(ch);`，错误不应该出现在这一行。它可能会抱怨其他问题，例如未处理或抛出的预期异常，例如

**处理：**

```
 try{
    while ((intch = r.read()) != -1){
        char ch = (char) intch;
            // ...
        text.append(ch);
    }
       }catch(IOException ioex){
          ioex.printStackTace();
       } 
```

**抛出：**

`throws`将带有子句的方法声明更改为：

```
 public static void main(String[] args) throws IOException{ 
```

当您说 时`text.append('ch');`，您的参数不再是变量或单个字符文字。**您应该在该行收到编译错误。**尽管您可以像单个角色一样做一些`text.append('c');`事情`c`。

# raphael - 在 Raphael 中只转换一个属性

> ID：12885733
> 
> 赞同：1
> 
> 时间：2012-10-14T19:29:03.717
> 
> 标签：raphael

我有一个 Raphael 集，我想垂直移动 400 像素。

当我绘制路径时，我对集合中的所有路径应用了单独的 x 轴变换。当我尝试应用 y 轴变换时，我丢失了 x 值。解决方案是什么？

```
sampleIcon = self.paper.path(path).attr({'transform': 't' + (someWidth*index) + ',60' });

iconSet.push(sampleIcon);

// when I click on something
iconSet.animate({transform: 't' + (original x-transform value for each icon) + ',400'}); 
```

或者有没有办法完全省略 x 变换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:40:02.537

在我看来，Raphael 对这个问题（任意对象集的批量动画）缺乏全面的解决方案是其最严重的限制之一。但是，如果您需要做的只是翻译项目（并且不使用重叠动画），那么您很幸运！

只需将“append”修饰符添加到您的翻译字符串中，如下所示：

```
iconSet.animate({transform: '...t' + (original x-transform value for each icon) + ',400'}); 
```

这将有效地将给定的翻译“添加”到集合中每个项目的当前翻译状态。当然，您可以对旋转和缩放做同样的事情。

# javascript - 如何通过 JQuery 和 JQueryUI 获得我需要的东西（即：我不想导入它们）

> ID：12885736
> 
> 赞同：0
> 
> 时间：2012-10-14T19:29:15.400
> 
> 标签：javascript

我真的有一个这样的脚本：

```
$(function() {
         $( sliderRange ).slider({
             range: true,
             min: 0,
             max: time2 - time1,
             values: [ 0, time2 - time1 ],
             slide: function( event, ui ) {
                ...
             }
         });
      }); 
```

它构成了复杂网络应用程序的一小部分。

整个网络应用程序。不需要 JQuery 或 JQueryUI（上面的代码段需要）

想到我必须使用 JQuery 和 JQueryUI 只是为了那一点点，这很烦人。有没有办法找出我必须导入的代码（因为我可能使用了他们 2% 的功能，我宁愿将 2% 的代码内联）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:40:55.390

我不知道它是否真的对你有帮助，但你总是可以有条件地从 CDN 加载 jQuery 库，只有当它不可用时：

```
<script type="text/javascript">!window.jQuery && document.write(unescape('%3Cscript src="http://code.jquery.com/jquery-1.8.2.js"%3E%3C/script%3E'))</script> 
```

如果用户之前访问过使用相同 CDN 的站点，并且您自己没有托管该文件，则您无需支付性能损失。

# regex - Tcl：仅当字符串后跟数字时才匹配字符串[正则表达式]

> ID：12885738
> 
> 赞同：0
> 
> 时间：2012-10-14T19:29:27.977
> 
> 标签：regex, tcl

鉴于我有以下输出：

```
Loopback1 is up, line protocol is up 
  Hardware is Loopback
  Description: ** NA4-ISIS-MGMT-LOOPBACK1_MPLS **
  Internet address is 84.116.226.27/32
  MTU 1514 bytes, BW 8000000 Kbit, DLY 5000 usec, 
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation LOOPBACK, loopback not set
  Keepalive set (10 sec)
  Last input 12w3d, output never, output hang never
  Last clearing of "show interface" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/0 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     Received 0 broadcasts (0 IP multicasts)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
     6 packets output, 456 bytes, 0 underruns
     0 output errors, 0 collisions, 0 interface resets
     0 output buffer failures, 0 output buffers swapped out 
```

如何匹配 "Loopback1" 而不是 "Loopback" ？换句话说，只有在接口名称旁边有一个数字时，我如何才能匹配 Tcl 中的接口名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:33:20.610

使用前瞻

```
Loopback(?=\d+) 
```

它仅匹配 Loopback 中的 Loopback，后跟任意位数。如果要匹配环回和号码，请使用`Loopback\d+`

# javascript - 用javascript计算日期和开始日期和天数

> ID：12885743
> 
> 赞同：0
> 
> 时间：2012-10-14T19:30:02.560
> 
> 标签：javascript, ajax, datetime

我正在尝试从开始日期和天数计算日期，因此基本上将天数添加到开始日期并获得结束日期。问题是我得到了一些奇怪的结果，但只有一次，我已经几天时间试图弄清楚这一点。

功能是：

```
CallculateDateFromDays = function(startDate, days) {
var policy_start_date_array = startDate.split("-");
var policy_start_date = new Date(policy_start_date_array[2], policy_start_date_array[1]-1, policy_start_date_array[0]);
var policy_start_date_add = new Date(policy_start_date.getTime() + ((days-1) * 24 * 60 * 60 * 1000));
var dateString = ("0" + (policy_start_date_add.getDate())).slice(-2) + "-" + ("0" + (policy_start_date_add.getMonth()+1)).slice(-2) + "-" + policy_start_date_add.getFullYear();
return dateString;} 
```

问题是它在我使用日期“28-10-2012”之前一直有效，即使我增加了 2 天，它也会给我返回相同的日期。

任何想法，我都很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:40:33.310

10 月 28 日，时间从 DST 变为“正常”，因此一天不等于 24 小时。这可能会导致您的代码出现问题。

还有为什么`(days-1) * 24 * 60 * 60 * 1000`？如果您设置`days`为`1`整个表达式计算为零...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T19:42:36.203

由于夏令时结束，您当地的时区可能会发生变化。

```
> new Date(2012, 9, 28)
Sun Oct 28 2012 00:00:00 GMT+0200
> // 48 hours later:
> new Date(new Date(2012, 9, 28) + 2 * 24 * 60 * 60 * 1000)
Mon Oct 29 2012 23:00:00 GMT+0100 
```

始终使用 UTC 方法！

顺便说一句，使用 增加天数要容易得多`setDate`，这也适用于时区问题：

```
function calculateDateFromDays(startDate, days) {
    var datestrings = startDate.split("-"),
        date = new Date(+datestrings[2], datestrings[1]-1, +datestrings[0]);
    date.setDate(date.getDate() + days);
    return [("0" + date.getDate()).slice(-2), ("0" + (date.getMonth()+1)).slice(-2), date.getFullYear()].join("-");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T19:40:07.373

有一种更简单的方法可以实现：http: [//jsfiddle.net/pjambet/wZEFe/2/](http://jsfiddle.net/pjambet/wZEFe/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T19:39:51.180

使用 javascript 日期格式：

[如何格式化 JavaScript 日期](https://stackoverflow.com/questions/3552461/how-to-format-javascript-date)

因此，您不必手动尝试解析日期字符串。

# java - 什么样的json以length开头

> ID：12885744
> 
> 赞同：0
> 
> 时间：2012-10-14T19:30:04.263
> 
> 标签：java, json

我从服务器获取一个 json 数组，如下所示

```
69[0,{"dabcdefghij":{},"abcdefg":"20","abcdefghijklmn":"10, AB-11111"}] 
```

我知道[]里面的数据是json。但是服务器也在发送 json 的长度。现在我发现第一次出现**[**并解析 json。

这是正确的方法吗？我正在使用gson。有没有更好的方法来解析这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:50:45.470

`69[0,{"dabcdefghij":{},"abcdefg":"20","abcdefghijklmn":"10, AB-11111"}]`根据[json.org](http://www.json.org/) ，它不是有效的 JSON，因为它不是对象也不是数组。

> JSON 建立在两种结构之上：
> 
> *   名称/值对的集合。在各种语言中，这被实现为对象、记录、结构、字典、哈希表、键控列表或关联数组。
>     
>     
> *   值的有序列表。在大多数语言中，这被实现为数组、向量、列表或序列。

# python - 尝试将参数传递给 unittest 子类时出现 Python TypeError

> ID：12885748
> 
> 赞同：1
> 
> 时间：2012-10-14T19:30:33.903
> 
> 标签：python, unit-testing, subclass

我正在尝试将参数传递给 unittest 子类方法。请原谅我的无知——我几天前才开始用 Python 编码。我显然可以对子类本身的参数进行硬编码，但这会消除它与其他用户名/密码组合的重用。当我在下面运行 run_tests.py 时，我收到错误“TypeError：runTest() 恰好需要 3 个参数（给定 4 个）”。

这是run_tests.py：

```
from selenium import webdriver
import unittest
from testcases import login

def my_suite():

    suite = unittest.TestSuite()
    suite.addTest (login.Login().runTest("username1", "password1", "page title"))
    return suite

if __name__ == '__main__':
    runner = unittest.TextTestRunner()
    runner.run(my_suite()) 
```

这是测试用例/basetestcase.py：

```
from selenium import webdriver
import unittest

class BaseTestCase (unittest.TestCase):

def setUp(self):
    self.driver = webdriver.Firefox()

    self.driver.implicitly_wait(30)
    self.base_url = "http://website"

def tearDown(self):
    self.driver.quit() 
```

这是测试用例/login.py

```
import common_page_elements
from basetestcase import BaseTestCase

class Login (BaseTestCase):
    def runTest(username, password, verification):
        """ Test logging in. """
        driver = self.driver
        driver.get(self.base_url)
        driver.find_element_by_id(common_page_elements.textfield_username).clear()
        driver.find_element_by_id(common_page_elements.textfield_username).send_keys(username)
        driver.find_element_by_id(common_page_elements.textfield_password).clear()
        driver.find_element_by_id(common_page_elements.textfield_password).send_keys(password)
        driver.find_element_by_name(common_page_elements.button_submit).click()        

        self.assertTrue(verification in self.driver.title) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:31:56.877

由于`runTest`已成为类方法，因此您必须包含`self`参数：

```
class Login (BaseTestCase):
    def runTest(self, username, password, verification):
                ^^^^ 
```

# search - 禁止搜索词

> ID：12885751
> 
> 赞同：1
> 
> 时间：2012-10-14T19:30:57.723
> 
> 标签：search, keyword, adsense

这是我在这里的第一篇文章，如果我做错了，请见谅。我已经搜索了我的问题，但找不到。

我运行一个视频元搜索引擎。

我最近被 Google Adsense 禁止，因为我的网页包含“成人内容”和“成人关键字”。

我想知道如何禁止在我的网站上搜索“性”等词。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:45:35.533

在您的代码中，当他们单击搜索或按 Enter 键时，调用的“方法”应该只在字符串中搜索这些关键字。如果它有一个被阻止，不要让它显示结果。需要注意的是，有许多成人视频，但没有一个可以反映它的名称。您可以考虑按内容评级过滤结果。

# iphone - iOS 6.0 / iPhone 5 检测蓝牙 4.0 加密狗

> ID：12885754
> 
> 赞同：1
> 
> 时间：2012-10-14T19:31:54.567
> 
> 标签：iphone, core-bluetooth

CoreBluetooth 是否允许检测蓝牙 4.0 加密狗？或者外围设备是否必须在“Made for iPhone”程序下才能被检测到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:04:35.260

加密狗基本上将模拟器从 iPhone 4 *（不支持 BLE4.0）*转换为 iPhone 4S *（支持 BLE4.0）*

如果您使用的是较旧的 Mac，那么您需要做一些事情来让它加载您的加密狗。

[http://www.atpeaz.com/index.php/2012/using-unsupported-bluetooth-4-0-usb-dongle-with-os-x/](http://www.atpeaz.com/index.php/2012/using-unsupported-bluetooth-4-0-usb-dongle-with-os-x/)

然后，您需要发出终端命令，以便模拟器使用新的 BLE 4.0 加密狗。

[http://developer.apple.com/library/ios/#technotes/tn2295/_index.html](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)

## 终端命令

这需要在模拟器未运行时发出，在此命令之后，然后启动模拟器。

```
sudo nvram bluetoothHostControllerSwitchBehavior="never" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:41:35.450

加密狗是您要与之通话的外围设备吗？

加密狗不需要是 MFI 才能被检测到。如果您使用的是 iPhone 4S（带有蓝牙 4.0），您可以在没有 MFI 的情况下与它通话。但是，如果您的设备不支持蓝牙 4.0，则与设备通信（即创建 EASession、NSStreamInput/Output）需要该设备为 MFI。

# c# - NullReferenceException：对象引用未设置为 SerialPort.ReadLine() 方法上的对象实例

> ID：12885763
> 
> 赞同：0
> 
> 时间：2012-10-14T19:33:16.490
> 
> 标签：c#, serial-port, grasshopper

运行下面的代码时，我得到以下`NullReferenceException`. 我错过了什么？

```
 System.NullReferenceException was unhandled
  Message=Object reference not set to an instance of an object.
  Source=Silkworm
  StackTrace:
       at UnhandledExceptionLogger.UnhandledDomainException(Object sender, UnhandledExceptionEventArgs args) 
```

代码：

```
 //Fields
            List<string> myReceivedLines;

            //subscriber method for the port.DataReceived Event
            private void DataReceivedHandler(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
            {
                SerialPort sp = (SerialPort)sender;
                while (sp.BytesToRead > 0)
                {
                    try
                    {
                        myReceivedLines.Add(sp.ReadLine());
                    }
                    catch (TimeoutException)
                    {
                        break;
                    }
                }
            }

            protected override void SolveInstance(IGH_DataAccess DA)
            {

                string selectedportname = default(string);
                DA.GetData(1, ref selectedportname);
                int selectedbaudrate = default(int);
                DA.GetData(2, ref selectedbaudrate);
                bool connecttodevice = default(bool);
                DA.GetData(3, ref connecttodevice);

                SerialPort port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); //Create the serial port
                port.DtrEnable = true;   //enables the Data Terminal Ready (DTR) signal during serial communication (Handshaking)

                port.Open();             //Open the port

                if ((port.IsOpen) && (connecttodevice == true))
                {
                    port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);
                    DA.SetDataList(0, myReceivedLines);
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:35:25.550

```
myReceivedLines = new List<string>() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T19:36:16.320

`myReceivedLines`已声明，但从未赋值，因此它保持为空。您可能想要初始化它，例如：

```
List<string> myReceivedLines = new List<string>(); 
```

然后，您可以继续使用它。

# python - Heroku 上的 Python。记录选项？

> ID：12885766
> 
> 赞同：6
> 
> 时间：2012-10-14T19:33:26.890
> 
> 标签：python, logging, heroku, flask

我现在在 Heroku 上使用 Flask，我希望能够将错误记录到文件中（通过 FileHandler）。

我不认为 Heroku 正式支持这一点。

在 heroku 的日志页面上，提到了一些 syslogs 和 drains，设置起来似乎相当复杂。

我想要一些快速简单的东西。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T19:38:07.220

`stdout`根据他们的[文档](https://devcenter.heroku.com/articles/python-faq#what-happens-to-data-written-to-standard-out)，您的应用程序写入的任何内容都将最终出现在 Heroku 的应用程序合并日志中，然后您可以使用`heroku log`其他工具访问这些日志。这可能是将日志从您的应用程序获取到您可以查看它们的位置的最快/最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-03T11:17:47.027

关注[heroku 日志记录](https://devcenter.heroku.com/articles/logging)

要查看您的日志，我们有：

1.  logs 命令默认检索 100 条日志行。

> heroku 日志

2.  最多显示 1500 行，--num（或 -n）选项。

> heroku 日志 -n 200

3.  实时显示日志

> heroku 日志 --tail

4.  如果你在 heroku 上有很多应用程序

> heroku 日志 --app your_app_name

5.  您可以使用此插件[papertrail](https://addons.heroku.com/papertrail)。每日日志量（10mb），日志回溯（2天），归档时长（7天）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T19:53:43.477

如果你想要自己的文件，我会试试这个：

```
print('Hello', 'World', 2+3, file=open('file.txt', 'w')) 
```

您可以按照 Minh Nguyen 所说的去做，或者您可以添加[纸迹](https://elements.heroku.com/addons/papertrail)dyno，可以将其配置为通过电子邮件或 slack 发送更新。

# android - Android ADK 蓝牙设备兼容性

> ID：12885774
> 
> 赞同：3
> 
> 时间：2012-10-14T19:34:13.370
> 
> 标签：android, arduino

我正在尝试开始使用 Android ADK。

我的目标是通过蓝牙连接 Arduino UNO + 蓝牙和 Android 设备。

我发现 ADK 需要用于 Android 2.3.4 的 Linux 内核 2.6.35+ 以允许通过 USB 进行通信。

所以很明显，所有的设备都应该支持这个USB通信的要求。

但是蓝牙呢？这是否意味着相同的规则适用于蓝牙交互？是否可以与设备建立连接和数据交换，例如使用 Android 2.1（API 级别 7）。

所以，任何解释都非常感谢

**更新#1** 我的主要目标是通过蓝牙将 Android 2.1 设备与 Arduino 连接起来。我的第一个想法是我应该使用 ADK，但我发现至少对于 USB，它取决于 linux 内核版本。但我认为仍然可以使用蓝牙而不是 USB，并且可能我仍然可以使用 ADK，如果不是，我如何在没有 ADK 的情况下通过蓝牙将 Arduino 与 android 连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:17:22.440

好吧..不确定我是否完全理解您的问题，但我会尽力为您提供最佳答案。

ADK和蓝牙没有关系。如果您使用 USB 电缆将兼容 ADK 的开发板与 Android 手机连接，则需要 ADK。USB 兼容板或 ADK 扩展板包含一个 USB 外围控制器，因此它可以通过电缆控制 USB 设备。

在您的情况下，您的 Arduino 和 android 设备之间不需要任何物理连接，因此这是蓝牙连接的问题。您只需在手机上使用[便宜的蓝牙模块](http://dx.com/p/jy-mcu-arduino-bluetooth-wireless-serial-port-module-104299?item=11)（无论如何都不需要是 Android）。

现在您必须将蓝牙模块与您的 Arduino 连接起来。现在您有两个启用蓝牙的设备，因此您可以进行通信了。我在网上找到了一些不错的教程，您可以将其用作起点。

[如何通过蓝牙控制 Arduino](http://www.instructables.com/id/how-to-Control-arduino-by-bluetooth-from-PC-pock/)

[Arduino安卓蓝牙通信](http://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/)

如果您需要进一步说明，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:36:51.500

自第 5 级以来，蓝牙功能似乎已成为[Android API](http://developer.android.com/reference/android/bluetooth/package-summary.html)的一部分。因此，Android 2.1 应该可以正常工作！

# wpf - 生成的 Xaml 代码和自定义 C# 代码不会产生相同的输出？

> ID：12885778
> 
> 赞同：2
> 
> 时间：2012-10-14T19:34:44.743
> 
> 标签：wpf, foreground

我构建了一个 xaml 类，然后意识到如果我想将它用作抽象基类，则必须在没有 xaml 的情况下构建它。但是当我完成将我的 xaml 转换为 C# 时，结果并没有输出相同的内容。

例如，前景不一样。（左侧为 ViewDialogX，右侧为 ViewDialogC）

![xaml 与 c# 实例](../Images/7acfd30d6a75300c4aea3cc3b5ab08c6.png)

ViewDialogX.xaml

```
<ContentControl x:Class="xmlns.ViewDialogX"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:my="clr-namespace:xmlns"
             HorizontalAlignment="Center" VerticalAlignment="Center">
    <ContentControl.Template>
        <ControlTemplate TargetType="my:ViewDialogX">
            <Border MinWidth="160" MinHeight="90" Margin="1,2,3,3" Padding="4">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" Opacity="3" ShadowDepth="0" />
                </Border.Effect>
                <GroupBox Header="{TemplateBinding Title}" Background="{DynamicResource ControlBackgroundBrush}">
                    <Grid Width="{TemplateBinding ContentWidth}" Height="{TemplateBinding ContentHeight}">
                        <ContentPresenter Margin="{TemplateBinding Padding}" Content="{TemplateBinding Content}" />
                    </Grid>
                </GroupBox>
            </Border>
        </ControlTemplate>
    </ContentControl.Template>
</ContentControl> 
```

ViewDialogX.xaml.cs

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;
using System.Windows.Media.Effects;
using System.Windows.Markup;

namespace xmlns
{
    public partial class ViewDialogX : ContentControl
    {
        public ViewDialogX()
        {
            InitializeComponent();
        }

        public static readonly DependencyProperty TitleProperty =
            DependencyProperty.RegisterAttached("Title", typeof(string), typeof(ViewDialogX), new PropertyMetadata(" "));
        public string Title { get { return (string)this.GetValue(TitleProperty); } set { this.SetValue(TitleProperty, value); } }

        public static readonly DependencyProperty ContentWidthProperty =
            DependencyProperty.RegisterAttached("ContentWidth", typeof(double), typeof(ViewDialogX), new PropertyMetadata(double.NaN));
        public double ContentWidth { get { return (double)this.GetValue(ContentWidthProperty); } set { this.SetValue(ContentWidthProperty, value); } }

        public static readonly DependencyProperty ContentHeightProperty =
            DependencyProperty.RegisterAttached("ContentHeight", typeof(double), typeof(ViewDialogX), new PropertyMetadata(double.NaN));
        public double ContentHeight { get { return (double)this.GetValue(ContentHeightProperty); } set { this.SetValue(ContentHeightProperty, value); } }

        public virtual void OnClosing(CancelEventArgs e) { }
        public virtual void Close() { }
    }
} 
```

ViewDialogC.cs

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;
using System.Windows.Media.Effects;
using System.Windows.Markup;

namespace xmlns
{
    public class ViewDialogC : ContentControl
    {
        public ViewDialogC()
        {
            if (!DesignerProperties.GetIsInDesignMode(this))
            {
                this.SetValue(ViewDialogC.HorizontalAlignmentProperty, HorizontalAlignment.Center);
                this.SetValue(ViewDialogC.VerticalAlignmentProperty, VerticalAlignment.Center);

                FrameworkElementFactory border = new FrameworkElementFactory(typeof(Border));
                border.SetValue(Border.MinWidthProperty, 160d);
                border.SetValue(Border.MinHeightProperty, 90d);
                border.SetValue(Border.MarginProperty, new Thickness(1, 2, 3, 3));
                border.SetValue(Border.PaddingProperty, new Thickness(4));
                border.SetValue(Border.EffectProperty, new DropShadowEffect() { BlurRadius = 10, Opacity = 3, ShadowDepth = 0 });
                FrameworkElementFactory group = new FrameworkElementFactory(typeof(GroupBox));
                group.SetValue(GroupBox.HeaderProperty, new TemplateBindingExtension(ViewDialogC.TitleProperty));
                group.SetResourceReference(GroupBox.BackgroundProperty, "ControlBackgroundBrush");
                FrameworkElementFactory grid = new FrameworkElementFactory(typeof(Grid));
                grid.SetValue(Grid.WidthProperty, new TemplateBindingExtension(ViewDialogC.ContentWidthProperty));
                grid.SetValue(Grid.HeightProperty, new TemplateBindingExtension(ViewDialogC.ContentHeightProperty));
                FrameworkElementFactory content = new FrameworkElementFactory(typeof(ContentPresenter));
                content.SetValue(ContentPresenter.MarginProperty, new TemplateBindingExtension(ViewDialogC.PaddingProperty));
                content.SetValue(ContentPresenter.ContentProperty, new TemplateBindingExtension(ViewDialogC.ContentProperty));
                grid.AppendChild(content);
                group.AppendChild(grid);
                border.AppendChild(group);
                this.SetValue(ViewDialogC.TemplateProperty, new ControlTemplate(typeof(ViewDialogC)) { VisualTree = border });
            }
        }

        public static readonly DependencyProperty TitleProperty =
            DependencyProperty.RegisterAttached("Title", typeof(string), typeof(ViewDialogC), new PropertyMetadata(" "));
        public string Title { get { return (string)this.GetValue(TitleProperty); } set { this.SetValue(TitleProperty, value); } }

        public static readonly DependencyProperty ContentWidthProperty =
            DependencyProperty.RegisterAttached("ContentWidth", typeof(double), typeof(ViewDialogC), new PropertyMetadata(double.NaN));
        public double ContentWidth { get { return (double)this.GetValue(ContentWidthProperty); } set { this.SetValue(ContentWidthProperty, value); } }

        public static readonly DependencyProperty ContentHeightProperty =
            DependencyProperty.RegisterAttached("ContentHeight", typeof(double), typeof(ViewDialogC), new PropertyMetadata(double.NaN));
        public double ContentHeight { get { return (double)this.GetValue(ContentHeightProperty); } set { this.SetValue(ContentHeightProperty, value); } }

        public virtual void OnClosing(CancelEventArgs e) { }
        public virtual void Close() { }
    }
} 
```

实现xml代码：

```
 <my:ViewDialogX Title="Test">
        <Button Content="Button" />
    </my:ViewDialogX>
    <my:ViewDialogC Title="Test">
        <Button Content="Button" />
    </my:ViewDialogC> 
```

额外样式：

```
<SolidColorBrush x:Key="ControlBackgroundBrush" Color="#333333" />
<SolidColorBrush x:Key="NormalBackgroundBrush" Color="#595959" />
<LinearGradientBrush x:Key="ShineBrush" StartPoint="0,0.042" EndPoint="0,0.971">
    <GradientStop Color="#59FFFFFF" Offset="0" />
    <GradientStop Color="#26FFFFFF" Offset="0.467" />
    <GradientStop Color="#00FFFFFF" Offset="0.475" />
</LinearGradientBrush>
<LinearGradientBrush x:Key="HoverShineBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#4CFFFFFF" Offset="0" />
    <GradientStop Color="#26FFFFFF" Offset="0.467" />
    <GradientStop Color="#10FFFFFF" Offset="0.475" />
    <GradientStop Color="#10FFFFFF" Offset="0.856" />
    <GradientStop Color="#26FFFFFF" Offset="1" />
</LinearGradientBrush>
<SolidColorBrush x:Key="DisabledForegroundBrush" Color="#ADADAD" />
<SolidColorBrush x:Key="DisabledBackgroundBrush" Color="#787878" />
<SolidColorBrush x:Key="DisabledBorderBrush" Color="#AAA" />
<Style TargetType="{x:Type GroupBox}" BasedOn="{x:Null}">
    <Setter Property="Background" Value="{x:Null}" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="BorderBrush" Value="{DynamicResource ControlBackgroundBrush}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Padding" Value="3" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type GroupBox}">
                <DockPanel>
                    <Grid x:Name="HeaderGrid" DockPanel.Dock="Top">
                        <Border x:Name="BackgroundElement" Background="{DynamicResource NormalBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" />
                        <Border x:Name="ShineElement" Background="{DynamicResource ShineBrush}" BorderThickness="0" Margin="1" CornerRadius="3" />
                        <Border x:Name="ShineBorderElement" BorderBrush="{DynamicResource HoverShineBrush}" BorderThickness="1" CornerRadius="2" Margin="{TemplateBinding BorderThickness}" />
                        <ContentPresenter x:Name="ContentElement" SnapsToDevicePixels="True" ContentSource="Header"  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Margin="4" RecognizesAccessKey="True" />
                    </Grid>
                    <Border DockPanel.Dock="Bottom" Margin="0,-1,0,0" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3">
                        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Margin="{TemplateBinding Padding}" />
                    </Border>
                </DockPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{DynamicResource DisabledForegroundBrush}" />
                        <Setter Property="Background" Value="{DynamicResource DisabledBackgroundBrush}" TargetName="BackgroundElement" />
                        <Setter Property="BorderBrush" Value="{DynamicResource DisabledBorderBrush}" TargetName="ShineBorderElement" />
                        <Setter Property="Opacity" TargetName="HeaderGrid" Value="0.75" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我的问题再次是：为什么 ViewDialogX 和 ViewDialogC 的输出不一样？

（不知何故 ViewDialogC 正在编辑组框的前景。）

**编辑：**

我在这条线上找到了前景变化的原因：

```
group.SetResourceReference(GroupBox.BackgroundProperty, "ControlBackgroundBrush"); 
```

（请参阅 ViewDialogX.xaml 了解我想要实现的目标）

我可以将背景硬设置为特定颜色，甚至可以将其绑定到模板父属性，但是当 FrameworkElementFactory 获取属性的动态资源类型时，前景会从 TemplateParent 继承。这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:28:53.927

我已联系 Microsoft WPF 开发团队。他们承认这是一个错误，但将其列为低优先级并且不太可能修复。

我对这个示例的解决方法：使用另一个控件来调用 *.SetResourceReference 并绘制背景，而不是使用 GroupBox。

# php - 在 Zend Framework 2 中设置 PHP 设置

> ID：12885779
> 
> 赞同：0
> 
> 时间：2012-10-14T19:34:47.270
> 
> 标签：php, zend-framework2

我正在使用 Zend Framework 2 创建一个应用程序，我真正喜欢的功能之一是能够根据环境设置 PHP 设置（主要是在开发环境中启用错误显示）。据我所知，从[我有限的研究](http://www.zfdaily.com/2012/04/configuring-php-settings-in-zf2/)中可以看出，此功能尚不（或不会）存在，您必须为其创建自定义解决方案。

我错了还是这是 ZF 2.0.2 的唯一解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T05:57:43.553

你是对的，从 2.0.2 开始，ZF2 中没有“内置”解决方案。如果您使用 PHP 配置文件，您可以简单地将 ini_set() 调用放在那里。我在我的博客上概述了执行环境特定配置文件的方法：[http ://blog.evan.pro/environment-specific-configuration-in-zend-framework-2](http://blog.evan.pro/environment-specific-configuration-in-zend-framework-2)

快速浏览一下，您提供的链接上的解决方案应该在 2.0.2 中仍然有效。就我个人而言，正如我所说，我只是将 ini_set() 调用放在我的配置中，而不是为引导事件附加一个额外的侦听器、对配置键的额外检查和一个 foreach 循环，但这就是 ZF2 的美妙之处：如果您正在寻找一种通过配置提供 PHP 设置的简单方法，那么这里有一个模块！

# vb.net - 无法解析引用程序集。无法解析引用程序集。

> ID：12885786
> 
> 赞同：1
> 
> 时间：2012-10-14T19:35:12.980
> 
> 标签：vb.net, visual-studio-2010, windows-phone-7

我真的不知道我的代码发生了什么。你能检查一下吗？我得到那个错误：无法解析引用程序集。请检查参考程序集。你调用的对象是空的。

MainPage.xaml：

```
<phone:PhoneApplicationPage
x:Class="PhoneApp2.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"
                Orientation="Vertical">
        <CheckBox Name="cb1" Content="Running" 
                  Checked="cb1_Checked" Unchecked="cb1_Unchecked" />
        <CheckBox Name="cb2" Content="Biking"
                  Checked="cb2_Checked" Unchecked="cb2_Unchecked" />
        <CheckBox Name="cb3" Content="Swimming" />
        <CheckBox Name="cb4" Content="Free weights" />
    </StackPanel>
</Grid> 
```

主页.xaml.vb

```
Imports System
Imports System.Collections.Generic
Imports System.Linq
Imports System.Net
Imports System.Windows
Imports System.Windows.Controls
Imports System.Windows.Documents
Imports System.Windows.Input
Imports System.Windows.Media
Imports System.Windows.Media.Animation
Imports System.Windows.Shapes
Imports Microsoft.Phone.Controls

Namespace PhoneApp2
Partial Public Class MainPage
    Inherits PhoneApplicationPage
    Private cbStates As List(Of Boolean)
    ' Constructor
    Public Sub New()
        InitializeComponent()
        cbStates = New List(Of Boolean)()
    End Sub

    Protected Overrides Sub OnNavigatedTo(e As System.Windows.Navigation.NavigationEventArgs)
        MyBase.OnNavigatedTo(e)
        cbStates = DB.readStates()
        If cbStates.Count > 0 Then
            cb1.IsChecked = cbStates(0)
            cb2.IsChecked = cbStates(1)
            cb3.IsChecked = cbStates(2)
            cb4.IsChecked = cbStates(3)
        Else
            If cb1.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb2.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb3.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb4.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
        End If
    End Sub

    Protected Overrides Sub OnNavigatedFrom(e As System.Windows.Navigation.NavigationEventArgs)
        MyBase.OnNavigatedFrom(e)
        DB.saveStates(cbStates)
    End Sub

    Private Sub cb1_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(0) = True
        End If
    End Sub

    Private Sub cb1_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(0) = False
        End If
    End Sub

    Private Sub cb2_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(1) = True
        End If
    End Sub

    Private Sub cb2_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(1) = False
        End If
    End Sub
End Class
End Namespace 
```

# asp.net - 从 XML 数据集中选择某些属性到 GridView

> ID：12885793
> 
> 赞同：0
> 
> 时间：2012-10-14T19:35:44.847
> 
> 标签：asp.net, xml, gridview, amazon-web-services, dataset

[按照此处](http://www.shabdar.org/asp-net/69-implementing-amazon-api-signed-requests-helper-in-aspnet-and-c.html)的 Amazon Web Service API 示例，我得到了填充有 XML ResponseStream 的 DataSet，如下所示：

```
DS.ReadXml(responseStream); 
```

然后通过 DataBind 将其传递给 GridView，如下所示：

```
GridView1.DataSource = DS.Tables["ItemAttributes"];
GridView1.DataBind();
GridView2.DataSource = DS.Tables["Item"];
GridView2.DataBind(); 
```

问题是，我从该 XML 和两个表中获取所有列，并且我只想在一个表中显示 XML 属性中的某些列（DetailPageURL、Author、Title）。我在类似的帖子中尝试了一些东西，但没有一个奏效。在将流放在 GridView 之前，我还尝试将流传递给 XDocument，但出现“缺少根元素”错误。此外，尝试使用 Linq 提取这些列，但没有成功。不过，我的知识有限，所以我可能对代码做错了。

数据集中的 XML 响应片段是：

```
<ItemSearchResponse xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
<OperationRequest>
<HTTPHeaders>
<Header Name="UserAgent" Value="Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"/>
</HTTPHeaders>
<RequestId>fafe85b6-3002-49ec-b716-e2057f9b94a0</RequestId>
<Arguments>
<Argument Name="Operation" Value="ItemSearch"/>
<Argument Name="Service" Value="AWSECommerceService"/>
<Argument Name="Signature" Value="..."/>
<Argument Name="AssociateTag" Value="..."/>
<Argument Name="Version" Value="2011-08-01"/>
<Argument Name="Keywords" Value="harry potter"/>
<Argument Name="AWSAccessKeyId" Value="..."/>
<Argument Name="Timestamp" Value="2012-10-14T15:16:02.000Z"/>
<Argument Name="SearchIndex" Value="Books"/>
</Arguments>
<RequestProcessingTime>0.0701880000000000</RequestProcessingTime>
</OperationRequest>
<Items>
<Request>...</Request>
<TotalResults>8394</TotalResults>
<TotalPages>840</TotalPages>
<MoreSearchResultsUrl>...</MoreSearchResultsUrl>
<Item>
<ASIN>059035342X</ASIN>
<DetailPageURL>...</DetailPageURL>
<ItemLinks>...</ItemLinks>
<ItemAttributes>
<Author>J.K. Rowling</Author>
<Creator Role="Illustrator">Mary GrandPré</Creator>
<Manufacturer>Scholastic Paperbacks</Manufacturer>
<ProductGroup>Book</ProductGroup>
<Title>Harry Potter and the Sorcerer's Stone (Book 1)</Title>
</ItemAttributes> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:27:13.493

为了回答我自己的问题，我声明了两个新的 DataTables，并在其中放置了所需的列，如下所示：

```
var dataTable1 = DS.Tables["Item"];
var dataTable2 = DS.Tables["ItemAttributes"];

if (dataTable1.Rows.Count > 0)
{
    foreach (DataRow row in dataTable1.Rows)
    {
        var url = row["DetailPageURL"].ToString();
    }
}

if (dataTable2.Rows.Count > 0)
{
    foreach (DataRow row in dataTable2.Rows)
    {
        var title = row["Title"].ToString();
        var author = row["Manufacturer"].ToString();
    }
} 
```

我现在需要的是找到一种方法将两个表放在一起，因为这会显示错误：

```
dataTable1.Merge(dataTable2);
DataTable merged = dataTable1;
GridView1.DataSource = merged; 
```

# webrtc - WebRTC 是否允许创建音频、视频和文本聊天？

> ID：12885794
> 
> 赞同：1
> 
> 时间：2012-10-14T19:35:44.393
> 
> 标签：webrtc, libjingle

我想创建音频、视频和文本消息聊天。是否可以使用 WebRTC？或者它只允许音频和视频聊天？

我的应用程序的一侧将使用浏览器实现。另一个 - 使用 C++ 原生 API。

有没有人有本机 C++ API 和/或 javascript 的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:32:44.220

WebRTC 规范仍在不断变化，但规范中有一个[DataChannel API](http://www.w3.org/TR/webrtc/#peer-to-peer-data-api)，它在 Firefox 和 Chrome 中都以早期形式实现。DataChannels 旨在允许您在对等点之间发送任意字节，并且该规范提供了可靠（类似 TCP）和不可靠（类似 UDP）的通道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:11:15.237

我不确定 WebRTC 是否允许文本聊天。我能够成功地创建一个执行所有这些的 Android 应用程序，但只能结合 Google 的[Libjingle](https://code.google.com/p/libjingle/)和[WebRTC](https://code.google.com/p/webrtc/)库。在 Libjingle 库中，有几个示例程序/代码段可以演示该库的功能。Libjingle 中的调用示例听起来与您想要做的非常相似，这也是我构建 Android 应用程序的基础。唯一的问题是我还没有将它移植到网络浏览器，所以我不确定 Libjingle 是否可以使用它。

我已经开始研究它，并且我[发现 WebRTC 讨论组中的一些人](https://groups.google.com/forum/?fromgroups=#!topic/discuss-webrtc/26UNDNm-q0w)已经为使用 WebRTC 构建的 Web 浏览器开发了一个非常好的多用户视频聊天应用程序。它能够进行视频（连同语音）通信以及文本聊天。我不知道这是否重要，但这一切都发生在一个界面中（这意味着它似乎不允许分离/单一形式的通信——仅限文本、仅限语音、仅限视频）。我敢肯定，如果您想要/需要，将它们全部分开不会太难。他们已将所有代码发布到[GitHub 上](https://github.com/webRTC)，并且似乎正在积极更新和改进它。

# java - JEdi torPane 或任何 java 文本区域填充 JFrame？

> ID：12885796
> 
> 赞同：0
> 
> 时间：2012-10-14T19:35:58.810
> 
> 标签：java, jframe, layout-manager, jtextcomponent

我正在用java编写一个简单的文本编辑器，我以前做过，现在我有了一些新的想法，通常当我在我的JFrame上有一个FlowLayout时放入一个JTextArea时，它会填充JFrame的剩余部分。然而这一次不是。有人可以帮我试着让它填满我的 JFrame 的其余部分吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:38:53.717

[http://docs.oracle.com/javase/tutorial/uiswing/layout/layoutlist.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/layoutlist.html) Java 确实有各种布局。要进行动态身体变化，您必须学习更灵活的布局，例如网格或网格袋布局。希望这有帮助。

# python - 从表示列表的字符串创建列表

> ID：12885797
> 
> 赞同：0
> 
> 时间：2012-10-14T19:36:02.053
> 
> 标签：python, json, api, xmlrpcclient

> **可能重复：**
> [如何将表示嵌套列表的字符串解析为实际列表？](https://stackoverflow.com/questions/1926741/how-do-i-parse-a-string-representing-a-nested-list-into-an-actual-list)

如何从该字符串中获取错误列表？

```
>>> out = "<class 'api.exceptions.DataError'>:[u'Error 1', u'Another error']" 
```

我尝试使用 json 模块，但没有成功。

```
>>> import json
>>> errors = out.split(":")[-1]
>>> my_list = json.loads(errors) 
```

我得到这个例外：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 384, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

你能建议一些方法来调整代码以获得我想要的吗？

**编辑：添加了用例。**

我的问题适用的上下文是：

```
try:
    # some code generating an xmlrpclib.Fault exception
    pass
except xmlrpclib.Fault, err:
    # here print dir(err) gives:
    # ['__class__', '__delattr__', '__dict__', '__doc__', '__format__',
    # '__getattribute__', '__getitem__', '__getslice__', '__hash__', '__init__',
    # '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', 
    # '__setattr__', '__setstate__', '__sizeof__', '__str__', '__subclasshook__', 
    # '__unicode__', '__weakref__', 'args', 'faultCode', 'faultString', 'message']

    exit(err.faultString)
    # exits with: "<class 'api.exceptions.DataError'>:[u'Error 1', u'Another error']" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:38:07.063

你应该使用：

```
import ast

ls="['a','b','c']"

ast.literal_eval(ls)
Out[178]: ['a', 'b', 'c'] 
```

或完整的：

```
In [195]: ast.literal_eval(out.split(':')[1])
Out[195]: [u'Error 1', u'Another error'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:43:58.747

看起来您试图打印异常；您可以使用参数访问*异常*的`.args`参数：

```
print exc.args[0] 
```

# python - 访问从 CSV 文件读取的行时列表索引超出范围

> ID：12885799
> 
> 赞同：1
> 
> 时间：2012-10-14T19:36:34.427
> 
> 标签：python, csv, python-2.7

我正在尝试在 python 中读取 csv 文件。csv 文件有 1400 行。我使用以下命令打开了 csv 文件：

```
import csv  
import sys             
f=csv.reader(open("/Users/Brian/Desktop/timesheets_9_1to10_5small.csv","rU"),
    dialect=csv.excel_tab) 
```

然后我尝试遍历文件以使用以下命令从每一行中提取名字：

```
for row in f:
    g=row
    s=g[0]  
    end_of_first_name=s.find(",")
    first_name=s[0:end_of_first_name] 
```

我收到以下错误消息：

> Traceback（最近一次调用最后一次）：
> 文件“”，第 3 行，模块
> s=g[0]
> IndexError: list index out of range

有谁知道我为什么会收到此错误消息以及如何纠正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:49:23.253

您不应*以*`U`通用换行模式 ( )打开文件。改为以二进制模式打开文件：

```
f=csv.reader(open("/Users/Brian/Desktop/timesheets_9_1to10_5small.csv","rb"),
    dialect=csv.excel_tab) 
```

CSV*自己*处理换行符，包括管理引号中的换行符。

接下来，打印您的行`print repr(row)`以验证您是否获得了预期的输出。使用`repr`而不是常规的字符串表示可以向您展示更多关于您正在处理的对象的*类型*，突出显示字符串与整数（`'1'`vs. `1`）等差异。

第三，如果要选择字符串的一部分直到分隔符（例如逗号），请使用[`.split(delimiter, 1)`](http://docs.python.org/library/stdtypes.html#str.split)or [`.partition(delimiter)[0]`](http://docs.python.org/library/stdtypes.html#str.partition)：

```
>>> 'John,Jack,Jill'.partition(',')[0]
'John' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:58:06.397

row 和 g 指向一个空列表。我不知道这是否一定意味着它是文件中的空行，因为 csv 可能有其他问题。

```
line_counter = 0
for row in f:
    line_counter = line_counter + 1
    g=row
    if len(g) == 0:
        print "line",line_counter,"may be empty or malformed"
        continue 
```

或者，正如 Martijn 指出的那样，Pythonic 方式是使用枚举：

```
for line_counter, row in enumerate(f,start=1):
    g=row
    if len(g) == 0:
        print "line",line_counter,"may be empty or malformed"
        continue 
```

# c# - c#在运行时设计Crystal Report

> ID：12885801
> 
> 赞同：5
> 
> 时间：2012-10-14T19:36:51.960
> 
> 标签：c#, crystal-reports, runtime

有没有办法在运行时编辑现有的水晶报表？

例如：我想在表格中插入主题。比我想将主题名称作为水晶报告中的列。比我想在另一个表中插入这些科目的分数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T18:47:48.003

简短的回答是肯定的。您可以使用 Crystal SDK 生成一个 Crystal Document 对象并从它们访问字段和数据连接参数。请注意，直接在报表上更改字段是**有风险**的，因为这意味着更新报表可能会破坏您的代码。最好将更改的数据作为存储过程或视图的结果呈现出来，然后将报告指向它。

[SAP Srytal Sdk 示例](http://scn.sap.com/docs/DOC-28305)提供了一些修改报告的优秀示例。

# c# - WPF 应用程序在第一次交互后停止/冻结，例如单击按钮

> ID：12885803
> 
> 赞同：10
> 
> 时间：2012-10-14T19:37:06.923
> 
> 标签：c#, wpf, performance, buttonclick, intellitrace

我目前在 WPF 中遇到问题。UI 加载正常，但是每当进行第一次用户交互时，例如单击按钮，应用程序似乎停止运行，或者例如，如果我有两个显示 MessageBox 的按钮，第一次单击将等待几秒钟然后显示MessageBox，但任何后续交互都是即时的和响应式的。

有没有其他人经历过这个？如果是这样，有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-07T08:25:24.957

我有同样的问题。每次我从 a`Button`或`ICommand`UI 调用第一次交互时，都会冻结半秒钟。

我根据作者的提示直接从文件夹启动应用程序来追踪问题。这解决了问题，但我也想知道为什么会发生这种情况，并思考直接执行和调试之间的区别。

所以我发现这是`IntelliTrace`导致冻结的原因，因为我激活它一次以调试 ADO.NET 应用程序，所以它仍然处于启用状态。禁用后，UI Freeze 消失了。要禁用它，请转到调试 -> IntelliTrace -> 打开 IntelliTrace 设置 -> 取消选中“启用 IntelliTrace”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-06T19:42:04.590

感谢您报告此性能问题。我们已经对其进行了调查并对其进行了追踪。我们正在考虑在未来的版本中解决这个问题。以下是解决此问题的步骤。应用解决方法后，无需禁用“手势”事件或 IntelliTrace。

1.  在 Admin 帐户下打开一个 cmd 窗口
2.  cd /d "%programfiles(x86)%\Microsoft Visual Studio 12.0\Common7\IDE\Remote Debugger\x64"
3.  %windir%\Microsoft.NET\Framework64\v4.0.30319\ngen.exe install /NoDependencies /ExeConfig:.\msvsmon.exe Microsoft.VisualStudio.vil.host.dll

如果您使用的是虚拟机，您可能希望在应用解决方法之前先保存快照。如果您遇到任何其他问题，请告诉我们。谢谢。

阿齐姆汗

# drupal - Drupal：按日期拆分视图

> ID：12885806
> 
> 赞同：0
> 
> 时间：2012-10-14T19:37:22.083
> 
> 标签：drupal, views

我目前正在一个包含课程日期列表的小型网站上工作。

我正在使用带有视图的 Drupal 7。我做了一个视图，所有课程都按日期排序，这是一个很长的列表，所以我正在考虑添加一个标题，标题之间有月份。

例如，现在我的列表如下所示：

*   课程 1
*   课程 2
*   课程 3
*   ...

我想拥有：

一月

*   课程 3
*   课程 4

二月

*   课程 3
*   课程 4

我对drupal很陌生，所以我希望有人能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:33:51.240

我找到了一个有效的解决方案。在 drupal 视图中，您可以按字段值对字段进行分组。我找到了一个截屏视频，它解释了如何做到这一点：

[http://www.youtube.com/watch?v=Cp2SPiwA2Qg](http://www.youtube.com/watch?v=Cp2SPiwA2Qg)

# testng - testng 测试可以依赖于在不同类中运行的测试吗？

> ID：12885809
> 
> 赞同：1
> 
> 时间：2012-10-14T19:37:33.287
> 
> 标签：testng

假设两个测试都在同一个文件中，我会

```
@Test(groups="basic", dependsOnGroups="someCleverGroupName") 
```

如果我的小组在其他课程中被提及，该如何处理？

现在，我理所当然地得到了`depends on nonexistent group`例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:44:56.320

确保在您的`testng.xml`.

# php - mod重写有一些问题

> ID：12885811
> 
> 赞同：2
> 
> 时间：2012-10-14T19:37:47.823
> 
> 标签：php, apache, .htaccess, mod-rewrite, hyperlink

```
Options +FollowSymLinks  
RewriteEngine On  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  
RewriteRule ^profile/(\w+)/*$ ./index.php?page=showuser&username=$1 
```

好的，所以我有这段代码可以完全按照它想要的方式重写我的 URL（站点名/配置文件/用户名）。

现在假设我只想访问（站点名/配置文件/）。我必须写什么规则才能让它工作而不给我一个错误？

我是 mod rewrite 的新手，所以如果这个问题对你们中的一些人来说似乎很愚蠢，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:20:11.690

```
RewriteRule ^profile/$ ./index.php?page=profile [L,NC] 
```

末尾的美元与 URL 的末尾匹配。在这种情况下，之后不能有其他任何东西`profile/`

# c++ - RubyMotion 中的第 3 方 C++ 库

> ID：12885816
> 
> 赞同：0
> 
> 时间：2012-10-14T19:38:10.527
> 
> 标签：c++, objective-c, rubymotion

我正在尝试使用 RubyMotion 为 iOS 开发编译一些第 3 方 C++ 库。我有一个围绕库的 Objective-C 包装器，格式为 .h 和 .mm 文件，但我不知道如何处理它们。

我假设它们进入 my_app/vendor/my_lib/，但我如何告诉 RubyMotion 文件？

我已将库添加到我的 Rakefile 中的项目中：

```
app.vendor_project('vendor/my_lib', :static) 
```

这会拾取 .h/.a 文件。RubyMotion 是否也会获取 .the mm（和相应的 .h）文件，还是我需要将此文件标记为包装器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:50:15.467

您需要在 App.setup 部分的 Rakefile 中添加一行，如下所示：

```
app.vendor_project('vendor/my_lib', :static) 
```

这将使构建过程在该目录中查找要编译的 .h/.mm 文件，以及要链接到应用程序的 .a 文件。[这里](http://www.rubymotion.com/developer-center/guides/project-management/#_using_3rd_party_libraries)有更多信息。

# javascript - 如何通过 src 插入脚本标签并执行响应？

> ID：12885817
> 
> 赞同：1
> 
> 时间：2012-10-14T19:38:17.827
> 
> 标签：javascript, javascript-events

我有一个脚本标签，它通过 src 调用远程 javascript 片段，并将其写入页面，从而在该过程中呈现横幅。

我正在寻找一种调用脚本的方法，或者通过 javascript 插入脚本。现在它看起来像这样：

```
<div id="<?php print $banner_id; ?>" class="banner-responsive <?php print $breakpoints; ?>">
  <script src="<?php print $url; ?>"></script>
</div> 
```

这是横幅供应商提供的首选方法。我正在寻找一种更像这样的方法来实现它：

```
<div class="banner">
  <div id="<?php print $banner_id; ?>">
    <script type="text/javascript">
      function banner_load(){
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = '<?php print $url; ?>';
        var x = document.getElementById('<?php print $banner_id; ?>');
        x.parentNode.appendChild(s);
      }
      if (window.attachEvent)
        window.attachEvent('onload', banner_load);
      else
        window.addEventListener('load', banner_load, false);
    </script>
  </div>
</div> 
```

这类作品。它插入脚本标签，并调用远程 url。但它不会像示例 1 中那样执行接收到的 JS 片段，因此不会出现横幅。有没有办法让我随意执行脚本 src？

**src 响应可能如下所示：**

```
document.write("<a target='_blank' href='http://domain/?options'><img src='http://domain/whateever-930x180px.jpg' alt='Click here' /></a>"); 
```

* * *

我想这样做，所以我可以根据预定义的断点在特定时刻切换横幅。你们会怎么做呢？有什么想法吗？

* * *

更新：我无法控制输出。它是一个外部横幅供应商。我认为这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:04:12.377

您无法动态加载使用`document.write()`并获得所需结果的 javascript。

加载 DOM 后动态加载的 javascript 运行。在`document.write()`DOM 加载后使用时，它会清除整个文档并开始一个新的空文档。因此，它不会做你想做的事。

如果您想动态加载 Javascript，那么您将需要使用 DOM 操作（例如`document.createElement()`和`elem.appendChild()`）将您的横幅插入现有 DOM 而不是使用`document.write()`. 仅当它与顺序加载的 javascript 内联或通过标记中的标记（而不是通过动态加载的 javascript）`document.write()`内联完成时，才对此类问题有用。`<script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:52:18.680

有几种方法可以做到这一点：

1.  您可以返回 HTML 片段，然后使用 appendChild 编写横幅，而不是返回 document.write。通常使用 document.write 是一种不好的 JavaScript 做法。

2.  如果您必须使用 document.write，则不要插入脚本标签 url，而是将来自 url 的响应直接插入到您的`banner_load`函数中。

# c# - SqlCommand 返回值参数

> ID：12885818
> 
> 赞同：4
> 
> 时间：2012-10-14T19:38:40.303
> 
> 标签：c#, sql-server, ado.net

也许查看此代码的其他人将能够告诉我为什么 returnID 始终为 0。我正在尝试从插入的记录中检索新 ID。

```
public int AddToInventory(int PartID, int QtyOnHand, int SpokenFor, int LowOrderQty, int HighOrderQty, decimal LastBuyPrice, 
                                    decimal AvgBuyPrice)

        {
        ConfigDAL config = new ConfigDAL();
        string connstr = config.GetConnString();
        SqlConnection conn = new SqlConnection(connstr);

        string query;
        query = "INSERT INTO Inventory (PartID, QtyOnHand, SpokenFor, LowOrderQty, HighOrderQty, LastBuyPrice, "
                    + "AvgBuyPrice, CreatedOn, CreatedBy, ModifiedOn, ModifiedBy) "
                    + "Values (@PartID, @QtyOnHand, @SpokenFor, @LowOrderQty, @HighOrderQty, @LastBuyPrice, @AvgBuyPrice, "
                    + "@CreatedOn, @CreatedBy, @ModifiedOn, @ModifiedBy)";

        SqlCommand cmd = new SqlCommand(query, conn);
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Parameters.AddWithValue("@PartID", PartID);
        cmd.Parameters.AddWithValue("@QtyOnHand", QtyOnHand);
        cmd.Parameters.AddWithValue("@SpokenFor", SpokenFor);
        cmd.Parameters.AddWithValue("@LowOrderQty", LowOrderQty);
        cmd.Parameters.AddWithValue("@HighOrderQty", HighOrderQty);
        cmd.Parameters.AddWithValue("@LastBuyPrice", LastBuyPrice);
        cmd.Parameters.AddWithValue("@AvgBuyPrice", AvgBuyPrice);
        cmd.Parameters.AddWithValue("@CreatedOn", DateTime.Now);
        cmd.Parameters.AddWithValue("@CreatedBy", GlobalProp.UserName);
        cmd.Parameters.AddWithValue("@ModifiedOn", DateTime.Now);
        cmd.Parameters.AddWithValue("@ModifiedBy", GlobalProp.UserName);
        cmd.Parameters.Add("@ID", SqlDbType.Int).Direction = ParameterDirection.ReturnValue;
        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close();
        int returnID = (int)cmd.Parameters["@ID"].Value;

        return returnID;
        } 
```

记录很好地插入到表中，但返回值不正确。我这样做正确吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:41:59.893

在您的 SQL 查询中再添加一行：

> 选择@ID = scope_identity()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T19:44:47.637

没有您在哪里设置 ID，因此您可以预期该值会发生变化。你必须这样做

```
 Select @ID = @Scope_Identity() -- If ID column is an Identity column 
```

或者

```
Select @ID = @SomeGeneratedValue 
```

尝试这个

```
query = "INSERT INTO Inventory (PartID, QtyOnHand, SpokenFor, LowOrderQty, HighOrderQty, LastBuyPrice, "
                + "AvgBuyPrice, CreatedOn, CreatedBy, ModifiedOn, ModifiedBy) "
                + "Values (@PartID, @QtyOnHand, @SpokenFor, @LowOrderQty, @HighOrderQty, @LastBuyPrice, @AvgBuyPrice, "
                + "@CreatedOn, @CreatedBy, @ModifiedOn, @ModifiedBy);"
                + " Declare @ID int;"
                + " Select @ID = Scope_Identity()"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T10:14:23.810

以我的经验，**方向 ReturnValue**不起作用。这是有道理的，因为在像您这样的命令中，@ID 是一个脚本变量，因此它更像是一个输出参数而不是返回值。

对我来说，最好使用**ParameterDirection.Output**而不声明 @ID（它是用*.Output*选项声明的）：

```
cmd.Parameters.Add("@ID", SqlDbType.Int).Direction = ParameterDirection.Output;
query = "INSERT INTO Inventory (PartID, QtyOnHand, SpokenFor, LowOrderQty, HighOrderQty, LastBuyPrice, "
            + "AvgBuyPrice, CreatedOn, CreatedBy, ModifiedOn, ModifiedBy) "
            + "Values (@PartID, @QtyOnHand, @SpokenFor, @LowOrderQty, @HighOrderQty, @LastBuyPrice, @AvgBuyPrice, "
            + "@CreatedOn, @CreatedBy, @ModifiedOn, @ModifiedBy);"
            + " Set @ID = Scope_Identity()"; 
```

# ruby-on-rails - 在 Rails 上调试生产服务器 (linode) ruby

> ID：12885819
> 
> 赞同：1
> 
> 时间：2012-10-14T19:38:43.317
> 
> 标签：ruby-on-rails, capistrano, postgresql-9.1, unicorn, linode

在部署站点时，我是一个完全的新手，请原谅这个问题的含糊不清。

我按照 ryan bates 第 337 集 (https://github.com/railscasts/337-capistrano-recipes) 部署了我的 rails 应用程序。我正在使用带有 postgres 的 ubuntu 10.04 lts、nginx、unicorn 和 capistrano。

在 cap deploy:cold 之后一切似乎都很好。

但是当我点击我的 ip 时，我的 rails 应用程序给了我这个错误：

```
We're sorry, but something went wrong. 
```

我知道这不是一个非常有用的错误消息。我认为它与数据库有关，因为我之前在使用 postgresql 在 heroku 上部署时见过它。

我不知道如何在 linode 服务器上检查我的日志文件并获取有关如何调试它的更多信息。

非常感谢任何指导。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:43:44.483

您需要使用 ssh 登录到您的 linode 服务器并自己查看日志文件。

`config/deploy.rb`Railscast 文件中的这一行：

```
set :deploy_to, "/home/#{user}/apps/#{application}" 
```

告诉您应用程序部署到 linode 服务器上的哪个目录。在该目录中，您应该会看到一个名为`shared/log`;的目录。你的日志应该在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:50:56.667

*我在OpenShift*上部署 Rails 应用程序时遇到了类似的问题。

在我的情况下，错误是由缺少资产产生的，未在*清单*文件中定义。

事实证明，它必须与*assets*做一些事情。我开始挖掘它，我发现它是在 Rails 找不到您正在寻找的资产时生成的，因为它们要么丢失，要么未编译，要么未包含在清单中（直接通过名称或间接通过要求树）。

第一种情况很清楚。您应该将它们包含在您的应用程序代码中，或者您应该将它们添加到您的设备中。第二种情况对您来说应该不是问题，因为 OpenShift 会为您做到这一点。但是，如果您确实对此有疑问，请在论坛中搜索有关不编译资产的问题。

The third case has two solutions. There is a right one and quick one. I'll need an expert's opinion about the second one. Here they are: You need to add the asset (usually a stylesheet and/or some third-party tool) to the list of items to precompile in the environment application.rb.

```
config.assets.precompile += ['960sm.css'] 
```

Or the quick way I found, which will work universally for all your assets: There is a setting in the `config/environments/production.rb`

```
config.assets.compile = true 
```

Set it to true like that and this should solve the problem.

I hope this helps. I spent two weeks digging on the same problem.

# java - 检查一个字符是否是Java中的特殊字符

> ID：12885821
> 
> 赞同：9
> 
> 时间：2012-10-14T19:38:47.667
> 
> 标签：java, special-characters

> **可能重复：**
> [JAVA：检查字符串中是否有特殊字符](https://stackoverflow.com/questions/1795402/java-check-a-string-if-there-is-a-special-character-in-it)

我是一名新手程序员，正在寻求帮助确定字符是否为特殊字符。我的程序要求用户输入文件名，程序读取文件中的文本并确定文本中有多少空格、数字、字母和特殊字符。我已经完成了确定空格、数字和字母的代码，但是我不确定如何检查字符是否为特殊字符。感谢您提供的任何帮助，如果有不清楚的地方，我可以尝试详细说明。到目前为止，我的代码是：

```
import java.util.Scanner;
import java.io.*;

public class TextFile{

public static void main(String[] args){

  Scanner input = new Scanner (System.in);
  String fileName;
  boolean goodName = false;
  int blankCount = 0;
  int letterCount = 0;
  int digitCount = 0;
  int specialcharCount = 0;
  String currentLine;
  char c;
  Scanner lineFile= null;
  FileReader infile;

  System.out.println("Please enter the name of the file: ");
  fileName = input.nextLine();

  while (!goodName) {
    try{
      infile = new FileReader(fileName);
      lineFile = new Scanner(infile);

      goodName= true;
    }
    catch(IOException e) {
      System.out.println("Invalid file name, please enter correct file name: ");
      fileName=input.nextLine();
    }
  }

  while (lineFile.hasNextLine()){
    currentLine = lineFile.nextLine();
    for(int j=0; j<currentLine.length();j++){
      c=currentLine.charAt(j);
      if(c== ' ') blankCount++;
      if(Character.isDigit(c)) digitCount++;
      if(Character.isLetter(c)) letterCount++;
      if() specialcharCount++;
    }
  }
}
} 
```

我需要在最后的 if 语句中添加一些东西来增加 specialcharCount。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-14T19:54:20.117

此方法检查字符串是否包含*特殊字符*（根据您的定义）。

```
/**
 *  Returns true if s contains any character other than 
 *  letters, numbers, or spaces.  Returns false otherwise.
 */

public boolean containsSpecialCharacter(String s) {
    return (s == null) ? false : s.matches("[^A-Za-z0-9 ]");
} 
```

您可以使用相同的逻辑来计算字符串中的特殊字符，如下所示：

```
/**
 *  Counts the number of special characters in s.
 */

 public int getSpecialCharacterCount(String s) {
     if (s == null || s.trim().isEmpty()) {
         return 0;
     }
     int theCount = 0;
     for (int i = 0; i < s.length(); i++) {
         if (s.substring(i, 1).matches("[^A-Za-z0-9 ]")) {
             theCount++;
         }
     }
     return theCount;
 } 
```

另一种方法是将所有特殊字符放入 String 并使用[String.contains](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)：

```
/**
 *  Counts the number of special characters in s.
 */

 public int getSpecialCharacterCount(String s) {
     if (s == null || s.trim().isEmpty()) {
         return 0;
     }
     int theCount = 0;
     String specialChars = "/*!@#$%^&*()\"{}_[]|\\?/<>,.";
     for (int i = 0; i < s.length(); i++) {
         if (specialChars.contains(s.substring(i, 1))) {
             theCount++;
         }
     }
     return theCount;
 } 
```

***注意***：您必须使用*反斜杠转义**反斜杠* 和`"`字符。

 ** * *

以上是一般如何解决此问题的示例。

对于问题中所述的确切问题，@LanguagesNamedAfterCoffee 的答案是最有效的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T19:45:58.767

看看类的[`java.lang.Character`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html)静态成员方法（isDigit、isLetter、isLowerCase、...）

**例子：**

```
String str = "Hello World 123 !!";
int specials = 0, digits = 0, letters = 0, spaces = 0;
for (int i = 0; i < str.length(); ++i) {
   char ch = str.charAt(i);
   if (!Character.isDigit(ch) && !Character.isLetter(ch) && !Character.isSpace(ch)) {
      ++specials;
   } else if (Character.isDigit(ch)) {
      ++digits;
   } else if (Character.isSpace(ch)) {
      ++spaces;
   } else {
      ++letters;
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T19:54:54.213

您可以使用[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex)。

```
String input = ...
if (input.matches("[^a-zA-Z0-9 ]")) 
```

如果您对“特殊字符”的定义只是任何不适用于您已有的其他过滤器的东西，那么您可以简单地添加一个`else`. 另请注意，您必须`else if`在这种情况下使用：

```
if(c == ' ') {
    blankCount++;
} else if (Character.isDigit(c)) {
    digitCount++;
} else if (Character.isLetter(c)) {
    letterCount++;
} else { 
  specialcharCount++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T21:20:40.383

我会做什么：

```
char c;
int cint;
for(int n = 0; n < str.length(); n ++;)
{
    c = str.charAt(n);
    cint = (int)c;
    if(cint <48 || (cint > 57 && cint < 65) || (cint > 90 && cint < 97) || cint > 122)
    {
        specialCharacterCount++
    }
} 
```

这是一种简单的做事方式，无需导入任何特殊类。将其粘贴在方法中，或直接放入主代码中。

ASCII 图表：[http ://www.gophoto.it/view.php?i=http://i.msdn.microsoft.com/dynimg/IC102418.gif#.UHsqxFEmG08](http://www.gophoto.it/view.php?i=http://i.msdn.microsoft.com/dynimg/IC102418.gif#.UHsqxFEmG08)*

# data-structures - 如果您知道二叉树的节点数，如何找到二叉树的最小高度？

> ID：12885824
> 
> 赞同：2
> 
> 时间：2012-10-14T19:38:56.873
> 
> 标签：data-structures, tree, computer-science, binary-tree, discrete-mathematics

设 n 为二叉树的节点数，那么找出二叉树的最小高度的一般函数项是什么？

我认为这将是 n=floor(log2(n))+1。但是，我想，我错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-05T10:21:01.650

看到记住这个概念

> 为了使高度最小，您必须给出每个级别，它可以容纳的最大节点数

所以对于高度为 h 的树，树总共可以容纳的最大节点数 = 2^(h+1)-1，所以 **n<=2^(h+1)-1**
解决后你会得到
**h>=log(n+1)base2 -1**
现在决定 log 的 floor 或 ceil，这样想

> 如果我的登录是 3.56.. 那么这意味着直到高度 3 每个级别都被完全消耗，最后一个级别没有完全填充。因此，正如高度的定义所说，它是从根到叶的最长路径，所以在高度中我们也将包括最后一层。

因此 ceil 将比 floor 更受欢迎。通过这种方法，您还可以找到 m-ary 树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T19:52:17.540

从[二叉树高度](https://stackoverflow.com/questions/1951091/binary-tree-height?rq=1)：

> 如果你有 N 个元素，二叉树的最小高度将为 log2(N)+1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T19:52:48.120

尝试通过归纳来证明这一点。二叉树的类型是归纳的，有两个构造函数：

*   `Leaf(v)`
*   `Node(Tree,Tree)`

您现在可以使用结构归纳来显示二叉树的最小高度。要获得最小高度，您有一个*完整*的二叉树。这是一棵二叉树，对于任何子树，它的子树都具有相同的高度。（这基本上意味着如果你把树画出来，你看不到任何“洞”。）所以假设你有这种类型的树，我们要证明它的高度是`floor(log_2(n)) + 1`。你可以通过转动它并说：假设我有一棵高度为的树`floor(log_2(n))+1`，证明它最多有`n`节点。您可以通过对构造函数的结构归纳来证明这一点。

# php - MySql，如何删除循环数据

> ID：12885825
> 
> 赞同：-1
> 
> 时间：2012-10-14T19:39:13.647
> 
> 标签：php, mysql, database, phpmyadmin, mysqli

我有这段代码，我需要删除单击提交按钮的行

```
<fieldset id=''><form method='post' action='del_menu.php'>
                <?php

                    mysql_set_charset('utf8');
                    $result = mysql_query("SELECT * FROM obedy ORDER BY datum DESC");
                    while ($row = mysql_fetch_array($result, MYSQL_NUM)) {

                        $time = strtotime( $row[0] );
                        $myDate = date( 'd.m.', $time );
                        $w_day = date( 'N', $time );
                        $ww_day = $w_day-1;

                        echo "<p>" . $myDate . "&emsp;";
                        echo "<input type='text' name='menu1' id='menu1' class='input' value='". $row[1] ."' size='37'/>";
                        echo "<input type='text' name='menu2' id='menu2' class='input' value='". $row[2] ."' size='37'/>";
                        echo "<input type='text' name='menu3' id='menu3' class='input' value='". $row[3] ."' size='37'/>";
                        echo "<input type='submit' formaction='del_menu.php' class='button' value='Smazat' />";
                        echo "</p>";

                        $the_row=" $row[0]";

                        }

                    mysql_free_result($result);

                ?>
                </form></fieldset> 
```

我该怎么做？感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:03:59.103

您可以使用隐藏的输入元素来存储 id（行的主键，即该行上唯一的键，以便您可以识别它）。代码应如下所示：

```
echo "<input type='hidden' name='id' id='id' class='input' value='". row['id_identifier'] . "' />"; 
```

在每次提交时，您可以检查 POST 变量，在本例中为 $_POST['id']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:48:52.570

在您的表中创建一个主键并将该键发布到您的表单中。然后使用键删除该行。

# sql-server - 创建新表错误

> ID：12885828
> 
> 赞同：0
> 
> 时间：2012-10-14T19:39:41.310
> 
> 标签：sql-server, database

我创建了这个表，我试图填充它，但我不断收到错误。

这是创建表语句：

```
--Creating the table
CREATE TABLE tblModule07Partition_RI
(
    column01 int,
    column02 varchar not null CONSTRAINT column02default DEFAULT 'N/A',
CONSTRAINT column01Key PRIMARY KEY (column01)
)
ON psPartitionModule07_RI (column01)
WITH (DATA_COMPRESSION = ROW)
GO

--6 Inserting records into the table

INSERT INTO tblModule07Partition_RI
VALUES (50,'First Partition 1') 
```

错误是这样的：

```
Msg 208, Level 16, State 1, Line 1
Invalid object name 'tblModule07Partition_RI'. 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:20:30.850

```
CREATE TABLE tblModule07Partition_RI (
    column01 int,
    column02 varchar not null DEFAULT 'N/A',
    CONSTRAINT column01Key PRIMARY KEY (column01)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:43:43.023

如果我删除了您的创建表脚本 def 在 SQL Server 2000 中工作

```
ON psPartitionModule07_RI (column01)
WITH (DATA_COMPRESSION = ROW) 
```

部分。

当然，这在我的服务器上不起作用，但它表明其余代码*确实*创建了一个表。所以也许你需要检查这部分是否正确。

也就是说，您的`column02`定义不适合您的数据，因为您没有正确定义列的长度。

如果要输入**“第一个分区 1”，**则需要将其定义为（至少）`varchar(17)`

# java - 设置键盘快捷键的actionCommand

> ID：12885829
> 
> 赞同：0
> 
> 时间：2012-10-14T19:39:44.987
> 
> 标签：java, swing, event-handling, action, undo-redo

作为注释程序的一部分，我有一段代码负责撤消绘制在图像上的最后一点：

```
Action undoListener = new AbstractAction(){
    public void actionPerformed(ActionEvent actionEvent){
        System.out.println(actionEvent.getActionCommand());
        imagePanel.undoLastPoint();
    }
};
JButton undoPointButton = new JButton("Undo Last Point");
undoPointButton.addActionListener(undoListener);
KeyStroke ctrlZKeyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_Z, ActionEvent.CTRL_MASK);
JPanel thisContentPane = (JPanel)this.getContentPane();
thisContentPane.getInputMap().put(ctrlZKeyStroke, "undo");
thisContentPane.getActionMap().put("undo", undoListener); 
```

如您所见，用户可以`undo`通过单击撤消按钮或按键盘上的`Ctrl`+来激活操作。`Z`我很想看看为这些方法中的每一个返回的操作命令显示了什么。对于按钮单击，输出是明智的 - 它打印“撤消最后一点”。然而，对于键盘快捷键，它会向终端打印一个奇怪的 2X2 二进制数字网格。

我想知道是否有一种方法可以显式设置键盘快捷键返回的操作命令，因为区分两者或显示它们代表相同的东西可能很有用。

我已经在 J​​ava API 中查找了`InputMap`、`ActionMap`和 ，`KeyStroke`但没有找到任何线索。也许问题在于我正在`actionCommand`以完全错误的方式思考什么是什么以及它的用途是什么？

# java - 动态组合框

> ID：12885834
> 
> 赞同：0
> 
> 时间：2012-10-14T19:40:13.820
> 
> 标签：java, swing, netbeans

我有一个 Jcombobox 显示项目列表 - 红色、蓝色、黄色和绿色，现在我希望 jcombox 在字符串 x 超过 300 个字符时仅显示红色和蓝色，如果字符串 x 更多则仅显示黄色和绿色超过 500 个字符。我怎么能在 java 中做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:44:49.807

您只需要一个 if 条件，如果 x 大于 300 且小于 500，则用红色和蓝色项目填充 jcombobox，否则超过 500，然后用绿色和黄色项目填充。 [http://www.exampledepot.com/egs/javax.swing/combobox_CbAddItems.html](http://www.exampledepot.com/egs/javax.swing/combobox_CbAddItems.html) 这是一个简单的例子，可以在 java 中添加和删除 jcombo 框。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:40:50.110

您可以使用允许您实时过滤结果的代理组合框模型。代理模型将使用您现有的模型并过滤结果，以便组合框仅看到过滤后的结果...

这是`ListModel`我用于此目的的 a 的实现...

```
public class FilteredListModel extends AbstractListModel implements ListDataListener {

    private ListModel peer;
    private List<Integer> lstFilteredIndicies;
    private IFilterable filter;

    public FilteredListModel() {
        lstFilteredIndicies = new ArrayList<Integer>(25);
    }

    public FilteredListModel(ListModel model) {
        this();
        setModel(model);
    }

    public FilteredListModel(ListModel model, IFilterable filter) {
        this();

        setModel(model);
        setFilter(filter);
    }

    public void setModel(ListModel parent) {
        if (peer == null || !peer.equals(parent)) {
            if (peer != null) {
                fireIntervalRemoved(this, 0, peer.getSize() - 1);
                peer.removeListDataListener(this);
            }
            peer = parent;
            lstFilteredIndicies.clear();
            if (peer != null) {
                peer.addListDataListener(this);
            }
            filterModel();
        }
    }

    public ListModel getModel() {
        return peer;
    }

    public int getSize() {
        IFilterable filter = getFilter();
        return filter == null ? getModel() == null ? 0 : getModel().getSize() : lstFilteredIndicies.size();
    }

    public Object getElementAt(int index) {
        IFilterable filter = getFilter();
        ListModel model = getModel();
        return filter == null ? model == null ? null : model.getElementAt(index) : model.getElementAt(lstFilteredIndicies.get(index));
    }

    public int indexOf(Object value) {
        int index = -1;
        for (int loop = 0; loop < getSize(); loop++) {
            Object at = getElementAt(loop);
            if (at == value) {
                index = loop;
                break;
            }
        }
        return index;
    }

    public void intervalAdded(ListDataEvent e) {
        IFilterable filter = getFilter();
        ListModel model = getModel();

        if (model != null) {
            if (filter != null) {
                int startIndex = Math.min(e.getIndex0(), e.getIndex1());
                int endIndex = Math.max(e.getIndex0(), e.getIndex1());
                for (int index = startIndex; index <= endIndex; index++) {
                    Object value = model.getElementAt(index);
                    if (filter.include(value)) {
                        lstFilteredIndicies.add(index);
                        int modelIndex = lstFilteredIndicies.indexOf(index);
                        fireIntervalAdded(this, modelIndex, modelIndex);
                    }
                }
            } else {
                fireIntervalAdded(this, e.getIndex0(), e.getIndex1());
            }
        }
    }

    public void intervalRemoved(ListDataEvent e) {
        IFilterable filter = getFilter();
        ListModel model = getModel();

        if (model != null) {
            if (filter != null) {
                int startIndex = Math.min(e.getIndex0(), e.getIndex1());
                int endIndex = Math.max(e.getIndex0(), e.getIndex1());
                for (int index = startIndex; index <= endIndex; index++) {
                    if (lstFilteredIndicies.contains(index)) {
                        int filterIndex = lstFilteredIndicies.indexOf(index);
                        lstFilteredIndicies.remove(filterIndex);
                        fireIntervalRemoved(this, filterIndex, filterIndex);
                    }
                }
            } else {
                fireIntervalRemoved(this, e.getIndex0(), e.getIndex1());
            }
        }
    }

    public void contentsChanged(ListDataEvent e) {
        filterModel();
    }

    public void setFilter(IFilterable value) {
        if (filter == null || !filter.equals(value)) {
            filter = value;
            if (getModel() != null) {
                fireIntervalRemoved(this, 0, getModel().getSize() - 1);
            }
            filterModel();
        }
    }

    public IFilterable getFilter() {
        return filter;
    }

    protected void filterModel() {
        if (getSize() > 0) {
            fireIntervalRemoved(this, 0, getSize() - 1);
        }
        lstFilteredIndicies.clear();

        IFilterable filter = getFilter();
        ListModel model = getModel();
        if (filter != null && model != null) {
            for (int index = 0; index < model.getSize(); index++) {
                Object value = model.getElementAt(index);
                if (filter.include(value)) {
                    lstFilteredIndicies.add(index);
                    fireIntervalAdded(this, getSize() - 1, getSize() - 1);
                }
            }
        }
    }

    public void updateFilter() {

        IFilterable filter = getFilter();
        ListModel model = getModel();

        if (filter != null && model != null) {
            for (int index = 0; index < model.getSize(); index++) {
                Object value = model.getElementAt(index);
                if (filter.include(value)) {
                    if (!lstFilteredIndicies.contains(index)) {
                        lstFilteredIndicies.add(index);
                        fireIntervalAdded(this, getSize() - 1, getSize() - 1);
                    }
                } else if (lstFilteredIndicies.contains(index)) {
                    int oldIndex = lstFilteredIndicies.indexOf(index);
                    lstFilteredIndicies.remove(oldIndex);
                    fireIntervalRemoved(this, oldIndex, oldIndex);
                }
            }
        }
    }
} 
```

可过滤接口

```
public interface IFilterable<O> {
    public boolean include(O value);    
} 
```

和一个`ComboBoxModel`实现...

```
public class FilterableComboBoxModel extends FilteredListModel implements ComboBoxModel {

    private FilterableComboBoxModel(ComboBoxModel model) {
        super(model);
    }

    public ComboBoxModel getComboBoxModel() {
        return (ComboBoxModel) getModel();
    }

    public void setSelectedItem(Object anItem) {
        getComboBoxModel().setSelectedItem(anItem);
    }

    public Object getSelectedItem() {
        return getComboBoxModel().getSelectedItem();
    }

} 
```

基本上，您需要做的就是将模型包装在过滤后的模型中......

```
ComboBoxModel originalModel = ...;
FilterableComboBoxModel filteredModel = new FilterableComboBoxModel(origialModel);
comboBox.setModel(filteredModel(originalModel)); 
```

从那里，您只需提供`IFilterable`接口的实现以及您需要的逻辑并将其提供给 filtereredModel。

当出现您可能需要重新过滤模型的情况时，您可以简单地调用`FilterableComboBoxModel#updateFilter`

# java - 如何使用java和jdbc和sql成功访问另一台计算机上的数据库？

> ID：12885836
> 
> 赞同：3
> 
> 时间：2012-10-14T19:40:32.023
> 
> 标签：java, mysql, jdbc

我在另一台电脑上有这个数据库，我想通过使用这样的连接字符串来访问它。

```
Class.forName("com.mysql.jdbc.Driver");
         con = DriverManager.getConnection("jdbc:mysql://192.168.0.1/dbtina","root","1234"); 
```

“dbtina”是我们的数据库。“1234”是我们的密码。我们已经将我们的 ip 配置为这样，因为我们使用的是有线连接（点对点）。

```
Exception: Communications link failure

Last packet sent to the server was 0 ms ago.* 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T05:18:50.097

只需禁用防火墙。或为 mysql 打开端口 3306 如果有帮助，请使用此链接

[手动打开端口](http://support.microsoft.com/kb/308127)

即使这样做了，您也可能会遇到安全异常。使用 mysql`GRANT`查询来授予权限。

mysql> GRANT ALL PRIVILEGES ON db_base.* TO db_user @'ip_address' IDENTIFIED BY 'db_passwd';

[授予示例](http://www.ntchosting.com/mysql/grant.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T19:49:36.843

在DB所在电脑的防火墙上打开**3306端口。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T19:46:37.020

您必须在数据库计算机上配置防火墙以允许来自特定端口上不同计算机的流量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-15T13:13:14.337

```
GRANT ALL PRIVILEGES ON *.* TO 'USERNAME'@'%' IDENTIFIED BY 'PASSWORD' WITH GRANT OPTION; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-01-25T13:49:36.983

相应地更改您的代码：

```
Class.forName("com.mysql.jdbc.Driver");         
con = DriverManager.getConnection("jdbc:mysql://192.168.0.1:3306/dbtina",
  "root","1234"); 
```

# iphone - UIAnimation 阻止奇怪的行为

> ID：12885840
> 
> 赞同：1
> 
> 时间：2012-10-14T19:41:53.473
> 
> 标签：iphone, ios, uiview, uiviewanimation

大家好，感谢阅读，

我试图使用动画块制作一个简单的波浪动画：

```
[UIView animateWithDuration:0.6 delay:i*delay options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionAutoreverse animations:^{
        tab.frame = CGRectMake(tab.frame.origin.x,
                               tab.frame.origin.y-WAVE_SIZE,
                               tab.frame.size.width,
                               tab.frame.size.height);
    } completion:^(BOOL finished) {

        tab.frame = CGRectMake(tab.frame.origin.x,
                               tab.frame.origin.y+WAVE_SIZE,
                               tab.frame.size.width,
                               tab.frame.size.height);
    }]; 
```

问题是当动画结束时，当我试图将视图返回到以前的状态时，一个奇怪的跳转会潜入（因为我正在使用重复效果）注意完成块。

如果有人遇到这样的问题，请分享，

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:05:10.337

这与完成块触发时从视图的模型值更新图层有关，这些值设置为动画的中间。我发现让这种事情在 100% 的时间内工作而无需放弃 API 的唯一方法`CAAnimation`是将动画链接成两半，而不是`UIViewAnimationOptionAutoreverse`像这样使用：

```
[UIView animateWithDuration:0.3
                      delay:i*delay
                    options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationCurveEaseIn
                 animations:^{
                     tab.frame = CGRectMake(tab.frame.origin.x,
                                            tab.frame.origin.y-WAVE_SIZE,
                                            tab.frame.size.width,
                                            tab.frame.size.height);
                 }
                 completion:^(BOOL finished) {
                     [UIView animateWithDuration:0.3
                                           delay:0.0
                                         options: UIViewAnimationCurveEaseOut
                                      animations:^{
                                          tab.frame = CGRectMake(tab.frame.origin.x,
                                                                 tab.frame.origin.y+WAVE_SIZE,
                                                                 tab.frame.size.width,
                                                                 tab.frame.size.height);
                                      }
                                      completion:NULL];

                 }]; 
```

这确保在每个动画结束时，视图的模型值（即其当前位置）与动画的最后一帧相同。这意味着您不会得到那种抖动效果。

这让人`UIViewAnimationOptionAutoreverse`显得有些无意义。如果它可以使视图的模型值与动画的最后一帧不同，为什么还要使用它？好吧，当与`UIViewAnimationOptionRepeat`它结合使用时，会产生相当令人愉悦的效果，该效果会来回移动直到被移除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:19:51.967

斜杠是对的。在这个简单的场景中解决问题的另一种更简单的方法是在动画之前保存帧，然后恢复它，a la：

```
CGRect oldFrame = tab.frame;

[UIView animateWithDuration:0.6 delay:i*delay options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionAutoreverse animations:^{
    CGRect newFrame = oldFrame;
    newFrame.origin.y -= WAVE_SIZE;
    tab.frame = newFrame;
} completion:^(BOOL finished) {
    tab.frame = oldFrame;
}]; 
```

# windows-7 - 如何为命令提示符分配快捷键以便它可以打开多个窗口？

> ID：12885841
> 
> 赞同：3
> 
> 时间：2012-10-14T19:41:57.910
> 
> 标签：windows-7, command-prompt, keyboard-shortcuts

在我曾经拥有（或在工作中使用过）的每台 Windows 机器上，我都分配了一个快捷键，以便在输入快捷键时打开一个命令提示符窗口。

如果您多次输入此快捷键，则会同时打开多个命令提示符窗口——这正是我所期望的。

我最新的 Windows 家用笔记本电脑配备了 Windows 7，我仍然能够对其进行设置以执行此功能。我的笔记本电脑@work 直到最近还是一台 XP 机器，我再次设置它以这种方式运行。

但是，当我的笔记本电脑@work 最近升级到 Windows 7 机器时，我像往常一样定义了快捷键，它现在只打开一个命令提示符窗口。只要这个窗口是打开的，任何进一步使用快捷键都只是切换到那个打开的窗口。

如何获得打开多个窗口的预期行为？我怀疑它可能与注册表有关，但到目前为止我还无法缩小范围。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:44:55.163

完成此操作的最简单方法是将命令提示符固定到任务栏，然后按 WinLogo + 其中数字是栏上的数字（从左到右计数）。因此，如果您的命令提示符是从左到右的第 4 个，它将是 Winlogo + 4，您可以随意发送垃圾邮件，并且它将不断打开新窗口。

如果您只是从开始菜单右键单击命令提示符并单击属性然后转到快捷方式选项卡并设置键盘快捷键，它将不会打开新窗口，这只会打开命令提示符一次，如果您快速发送垃圾邮件可能会打开两次够了，但是当窗口处于活动状态时，它就不会再打开了。所以最好的方法是上面的第一种方法。我希望这有帮助。

# javascript - 使最宽的文本行适合 div 并更改第二行以匹配比率

> ID：12885844
> 
> 赞同：1
> 
> 时间：2012-10-14T19:42:43.357
> 
> 标签：javascript, jquery, html, css

我的想法是让一个 div 展示两个文本行根据文本长度和字体大小相互比较的外观。

问题是，我想在一个固定宽度的 div 中展示它。

因此，最宽的文本行（不一定是字体最大的文本行，也不一定是字符最多的文本行）的大小应调整为始终位于 div 的边缘 - 在一行上。

同时，不那么宽的文本行的字体大小也应调整大小以保持两行之间的比例。

我刚刚写了这段代码：

**脚本**

```
<script>
 function typeFunction() {
document.getElementById('boxOne').innerHTML = document.getElementById("lineOne").value;
document.getElementById('boxTwo').innerHTML = document.getElementById("lineTwo").value;

document.getElementById('boxPreviewOne').innerHTML = document.getElementById("lineOne").value;
document.getElementById('boxPreviewTwo').innerHTML = document.getElementById("lineTwo").value;

checkWidth();
}

function fontSize(fontsize,target) {
target.style.fontSize = fontsize;
checkWidth();
} 

function checkWidth() {
ratio = document.getElementById("sizeOne").value.replace(/\D/g, '')/document.getElementById("sizeTwo").value.replace(/\D/g, '');

widthOne = document.getElementById("boxOne").offsetWidth;
widthTwo = document.getElementById("boxTwo").offsetWidth;

if (widthOne >= widthTwo) {
document.getElementById('boxPreviewOne').style.fontSize = "MAX_FONT_SIZE";
if (ratio>=1) {
document.getElementById('boxPreviewTwo').style.fontSize = "MAX_FONT_SIZE/ratio";
} else {
document.getElementById('boxPreviewTwo').style.fontSize = "MAX_FONT_SIZE*ratio";
}
} else {
document.getElementById('boxPreviewTwo').style.fontSize = "MAX_FONT_SIZE";
if (ratio>=1) {
document.getElementById('boxPreviewOne').style.fontSize = "MAX_FONT_SIZE*ratio";
} else {
document.getElementById('boxPreviewOne').style.fontSize = "MAX_FONT_SIZE/ratio";
}
}
}
</script> 
```

**HTML**

```
Line One: <input id="lineOne" onKeyUp="typeFunction()" value="This is line one">
<select id="sizeOne" onchange="fontSize(this.value,boxOne);">   
<option value="10px">10 cm</option>        
<option value="20px" selected="selected">20 cm</option>  
<option value="30px">30 cm</option>      
</select> 

<br>
Line Two: <input id="lineTwo" onKeyUp="typeFunction()" value="This is line two">
<select id="sizeTwo" onchange="fontSize(this.value,boxTwo);">   
<option value="10px" selected="selected">10 cm</option>        
<option value="20px">20 cm</option>  
<option value="30px">30 cm</option>      
</select>

<br>
<br>

<div style="width:700px;">
<span id="boxOne" style="font-size:20px">This is line one</span><br>
<span id="boxTwo" style="font-size:10px">This is line two</span>
</div>

<br><br>
Preview:<br>
<div class="Mainbox" style="width:400px;border:1px solid black">
<span id="boxPreviewOne" style="font-size:64px">This is line one</span><br>
<span id="boxPreviewTwo" style="font-size:32px">This is line two</span>
</div>

Line One: <input id="lineOne" onKeyUp="typeFunction()" value="This is line one">
<select id="sizeOne" onchange="fontSize(this.value,boxOne);">   
<option value="10px">10 cm</option>        
<option value="20px" selected="selected">20 cm</option>  
<option value="30px">30 cm</option>      
</select> 

<br>
Line Two: <input id="lineTwo" onKeyUp="typeFunction()" value="This is line two">
<select id="sizeTwo" onchange="fontSize(this.value,boxTwo);">   
<option value="10px" selected="selected">10 cm</option>        
<option value="20px">20 cm</option>  
<option value="30px">30 cm</option>      
</select>

<br>
<br>

<div style="width:700px;">
<span id="boxOne" style="font-size:20px">This is line one</span><br>
<span id="boxTwo" style="font-size:10px">This is line two</span>
</div>

<br><br>
Preview:<br>
<div class="Mainbox" style="width:400px;border:1px solid black">
<span id="boxPreviewOne" style="font-size:64px">This is line one</span><br>
<span id="boxPreviewTwo" style="font-size:32px">This is line two</span>
</div> 
```

**这是代码的示例图像+概念场景的图像：**
![在此处输入图像描述](../Images/190fdf5db7164f537ebdd4c4c5507065.png)

![在此处输入图像描述](../Images/3a939311998ea40d0b25bb7e8b7d3d78.png)

**恐怕我只能靠自己了。**
显然还有很长的路要走。

1.  我宁愿只将文本输入镜像一次，但我认为不可能找到最宽的线。
2.  我不知道如何获得我所谓的“MAX_FONT_SIZE”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:30:40.257

这是一个 jQuery 解决方案，可以满足您的需求。使用`em`字体大小的单位使它更简单。适合在右边缘不是 100% 完美，但通过一些调整可以做得更好。一些 CSS 技巧应该会有所帮助

Concept 将文本放入屏幕外跨度，获取该跨度的宽度并与容器的宽度进行比较。这允许简单的`em`计算。

代码非常简单，因此不需要太多解释

演示：http: [//jsfiddle.net/KxjHC/2/](http://jsfiddle.net/KxjHC/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:04:21.307

不知道您是否对 jQuery 插件感到满意，但如果是这样，这可能是一个不错的选择：

[http://www.zachleat.com/web/bigtext-makes-text-big/](http://www.zachleat.com/web/bigtext-makes-text-big/)

它使用起来非常简单，这是项目页面的演示：http: [//jsfiddle.net/zachleat/WzN6d/](http://jsfiddle.net/zachleat/WzN6d/)

将您的 html 更改为：

```
<div class="Mainbox" style="width:400px;border:1px solid black">
    <div id="boxPreviewOne">This is line one</div>
    <div id="boxPreviewTwo">This is line two</div>
</div> 
```

然后申请：

```
$('.Mainbox').bigtext();​ 
```

这是您的代码的实时示例：http: [//jsfiddle.net/TqK4M/1/](http://jsfiddle.net/TqK4M/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:52:51.260

我很抱歉用 jquery 标记这个，因为我不够熟练，无法实际实现你的答案。

我在这里找到了部分解决方案：[Auto-size dynamic text to fill fixed size container](https://stackoverflow.com/questions/687998/auto-size-dynamic-text-to-fill-fixed-size-container)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T23:14:04.737

这应该或多或少地满足您的要求：

```
$(".linecontainer").each(function() {
    var maxWidth = $(this).width();
    var largestWidth = 0;
    var largestSpan;
    $(this).find("span")
        .each(function() {
            $(this).data("originalSize", parseInt($(this).css("font-size")));
            if ($(this).width() > largestWidth)
            {
                largestWidth = $(this).width();
                largestSpan = $(this);
            }
        });
    var largestSizeFound = false;
    var largestSize = 0;
    var sizeRatio;
    while (largestSizeFound == false && largestSize < 1000)
    {
        largestSize++;
        largestSpan.css("font-size", largestSize + "px");
        if (largestSpan.width() > largestSpan.parents(".linecontainer").width())
        {
            largestSize--;
            largestSizeFound = true;
            sizeRatio = largestSize / largestSpan.data("originalSize");
        }
    }
    $(this).find("span")
        .each(function() {
            $(this).css("font-size", parseInt(sizeRatio * $(this).data("originalSize")) + "px")
        })
});​ 
```

HTML

```
<div class="linecontainer">
    <div><span class="lineone">this is the first line of text</span></div>
    <div><span class="linetwo">another line of text</span></div>
</div> 
```

CSS

```
.linecontainer { width:250px; overflow:hidden; }
.linecontainer span { white-space:nowrap;  }
.lineone { font-size:20px; }
.linetwo { font-size:10px; }​ 
```

[http://jsfiddle.net/SZG7E/](http://jsfiddle.net/SZG7E/)

# php - 单页安全 Ajax 表单 - 用于信用卡支付，需要跨域解决方案

> ID：12885847
> 
> 赞同：0
> 
> 时间：2012-10-14T19:42:52.473
> 
> 标签：php, javascript, html, jquery

我正在开发单页 Ajax 应用程序（纯 HTML/CSS/Javascript、jQuery，与 PHP 服务器端的任何通信（例如读取报价和价格并保存已完成的购买）都是通过 jQuery AJAX 请求完成的。HTML 表单仅用于阅读信用卡数据，它们被提交到 PHP 服务器页面，所有处理（与支付提供商的通信）都在 PHP 服务器上完成

一切正常，除了我担心（可能没有根据）是否可以接受 Ajax 表单中的信用卡数据。主要问题是： - 如果提交通常的 HTML/PHP 表单（例如 POST 提交），那么 brwoser 和服务器之间的所有流量都是安全的（假设 HTML/PHP 表单带有 https url 等）。但是 AJAX 流量会发生什么，特别是如果它被提交到另一个域（使用 pJSON）？此流量是否加密？

也许用 AJAX 表单捕获信用卡数据根本不是一个好主意？

# javascript - 具有自动播放和手动滑动功能的 JContent

> ID：12885848
> 
> 赞同：1
> 
> 时间：2012-10-14T19:43:00.767
> 
> 标签：javascript, jquery, slider

我的客户想要一个自动播放内容的内容滑块，如果用户点击下一个/上一个，他也可以手动滑动内容。

[JContent 滑块](http://do-web.com/jcontent/overview "JContent 滑块")

我找到了这个内容滑块，它非常适合我的其他要求，所以我不想要另一个脚本，只是询问是否有办法修改它以在手动模式下启用自动播放？

我已经尝试过了，但是当我打开自动播放时，上一个/下一个按钮不再起作用，并且自动播放变得疯狂，就像快速滑动内容一样。
（还有一件事，盘旋选项对我来说也很重要）

# batch-file - BATCH 将希伯来语写入文本文件

> ID：12885849
> 
> 赞同：1
> 
> 时间：2012-10-14T19:43:04.910
> 
> 标签：batch-file, dos

我想在 cmd 窗口中 键入“ ”时将“ `אבג`”写入 txt 文件 ，它看起来像：http: [//i.stack.imgur.com/A02rD.png](http://i.stack.imgur.com/A02rD.png) 并且当我按下 Enter 时，文本文件内容是：

`echo אבג >> c:\test.txt`

```
€‚ 
```

如何将希伯来文文本写入文本文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:34:45.057

[解决此问题的一种方法是通过获取实体](http://archive.tlt.psu.edu/suggestions/international/bylanguage/hebrewchart.html)将字母打印到 html 文件：

```
@echo off
set gimel= ^^^&#1488;
set kaf= ^^^&#1499;
set alef= ^^^&#1488;
setlocal 
echo  ^<html^>  ^<body^> %gimel% %kaf% %alef% ^</body^> ^</html^> > herb.html 
```

# java - jar文件打不开

> ID：12885852
> 
> 赞同：1
> 
> 时间：2012-10-14T19:43:21.023
> 
> 标签：java, jar, manifest, executable

我为我的项目创建了一个jar文件，但是出现了以下警告，当双击它时，它没有打开

> 警告：[选项] 引导类路径未与 -source 1.6 1 警告一起设置

我正在使用 NetBeans 7.0.1 / Windows 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:53:27.403

警告*不一定*是使其可点击的问题。

要使 JAR 可执行，您必须在 JAR 的“清单”文件中指定“主”类，例如：

```
 Manifest-Version: 1.0
  Main-Class: MyMainClass 
```

然后创建 jarfile，指定上面的清单文件。如果手动执行此操作，则类似于：

```
jar cvfm myapp.jar myManifest *.class 
```

如果您改为从 NetBeans 创建 JAR，我希望有一个设置：

**更新**请参阅[在 NetBeans](https://stackoverflow.com/questions/602537/producing-executable-jar-in-netbeans)中生成可执行 jar 以获取相关信息。

如果不指定主类，则JAR可以作为库使用，但不能直接作为程序执行，不使用命令行脚本指定运行哪个类，例如

```
java -cp myjar.jar com.myco.myproj.MyMainClass 
```

which runs Java, putting your jarfile on the classpath (i.e. making all your classes available) and specifies that `MyClass` is the main class, i.e. the starting point for your application. `MyClass` *must* have a `main` method defined, or this won't work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:50:35.757

该警告表明，编写某些库/依赖项的 Java 版本与编译项目所用的版本之间可能存在差异。

根据我的经验，通常可以忽略此警告。但这肯定是轶事。

`-Xlint:-options`将来，可以使用Netbeans 中“附加编译器选项”中的标志禁用警告。

更官方的解释可以在[这里](https://blogs.oracle.com/darcy/entry/bootclasspath_older_source)找到。

# python - Numpy标准差对我不起作用

> ID：12885860
> 
> 赞同：1
> 
> 时间：2012-10-14T19:44:03.370
> 
> 标签：python, numpy

我在这个`for`循环中出错的地方，它意味着将特定的语料库、样本大小和样本数量作为输入，然后给出预期编号的平均值和标准偏差。情绪标记？

```
def test_iterate(corpus_reader, sample_size, number_of_samples):
for i in xrange(number_of_samples):
    tokens = corpus_reader.sample_words_by_sents(sample_size)
    sents = corpus_reader.sample_sents(sample_size)
    print expected_sentiment_tokens(tokens)
    s = []
    s.append(expected_sentiment_tokens(tokens))
    s = array(s)
print "Average expected no of sentiment tokens: %s" % average(s)
print "Standard deviation of sentiment tokens: %s" % std(s)

test_iterate(rcr, 500, 3) 
```

返回

```
181.166666667
186.277777778
185.5
Average expected no of sentiment tokens: 185.5
Standard deviation of sentiment tokens: 0.0 
```

由于某种原因，平均值被设置为最后一个样本，而不是对所有样本进行平均和标准偏差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:04:25.500

使用调试器（甚至打印语句）查看您正在调用的统计对象平均和标准......正如 DSM 提到的，它可能是标准 0（即单个数字或类似的东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:19:33.620

如上所述，缩进在 Python 中很重要，因此请始终确保问题中的代码看起来与屏幕上的代码一样。否则我们必须猜测，如果我们错了，我们可能会沿着错误的路线走下去。无论如何，这个：

```
s = []
s.append(expected_sentiment_tokens(tokens)) 
```

将继续制作一个空列表并每次在循环中附加一个值。只做预期的情绪开始，你可能想要类似的东西

```
def test_iterate(corpus_reader, sample_size, number_of_samples):
    s = []
    for i in xrange(number_of_samples):
        tokens = corpus_reader.sample_words_by_sents(sample_size)
        exp_sent = expected_sentiment_tokens(tokens)
        print exp_sent
        s.append(exp_sent)
    print "s =", s    
    print "Average expected no of sentiment tokens: %s" % average(s)
    print "Standard deviation of sentiment tokens: %s" % std(s)

test_iterate(rcr, 500, 3) 
```

[记住，缩进很重要]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:55:14.627

在 Python 中，缩进很重要。我相当确定您运行的代码与您显示的代码的缩进方式不同。让我们看看您运行的“实际”代码。此外，尝试运行较小的虚拟测试，例如 test_iterate(tcr,1,1) [如果这有意义 - 如果没有，则使用您可以生成的最小案例] 并让它打印出中间结果。我的期望是，当标准差为 0 时，您正在处理大小为 1 的列表。尝试找到您的数据列表应该增长的位置并验证它是否会增长。

# oracle - 解释计划：通过索引的 varchar2 字段从 100K 记录表中选择未使用索引

> ID：12885862
> 
> 赞同：2
> 
> 时间：2012-10-14T19:44:05.453
> 
> 标签：oracle, sql-execution-plan

我同意 Tom Kyte 关于全表扫描不是邪恶[来源](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:9422487749968)的观点，但只有在表相对较小的情况下。因此，拥有此类表的附加索引是多余的。但是，不应将具有 100.000 条记录的表视为小表，但此类表的解释计划显示已执行表全扫描。所以，我在本地安装了 Oracle 的笔记本电脑上做了一个小实验：

1）首先，创建my_table：

```
CREATE TABLE my_table(
  "ID" NUMBER NOT NULL ENABLE, 
  "INVOICE_NO" VARCHAR2(10), 
  CONSTRAINT "test _PK" PRIMARY KEY ("ID")
) 
```

2）然后，为 invoice_no 列创建索引（因为将使用它进行过滤）：

```
CREATE INDEX "my_table_index1" ON my_table (invoice_no) 
```

3）然后，插入100K记录：

```
DECLARE
  mod_val NUMBER;
BEGIN
  FOR i IN 1..100000 LOOP
    mod_val := MOD(i,6);
    IF (mod_val = 0) THEN
      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-110');
    ELSIF (mod_val = 1) THEN
      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-111');
    ELSIF (mod_val = 2) THEN
      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-112');
    ELSIF (mod_val = 3) THEN
      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-113');
    ELSIF (mod_val = 4) THEN
      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-114');
    ELSIF (mod_val = 5) THEN
      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-115');
    END IF; 
  END LOOP;
  COMMIT;
END; 
```

4）然后更新一条随机记录（只是为了强调选择）：

```
BEGIN
  UPDATE my_table SET INVOICENO = 'exception' WHERE id = 50000;
  COMMIT;
END; 
```

5）然后使用解释计划执行选择：

```
EXPLAIN PLAN FOR
  SELECT * FROM my_table WHERE invoice_no = 'exception'; 
```

6）然后抓取统计数据：

```
 SELECT * FROM TABLE(dbms_xplan.display); 
```

7）并得到结果：

```
"PLAN_TABLE_OUTPUT"
"Plan hash value: 3804444429"
" "
"------------------------------------------------------------------------------"
"| Id  | Operation         | Name     | Rows  | Bytes | Cost (%CPU)| Time     |"
"------------------------------------------------------------------------------"
"|   0 | SELECT STATEMENT  |          | 83256 |  1626K|   103   (1)| 00:00:02 |"
"|   1 |  TABLE ACCESS FULL| MY_TABLE | 83256 |  1626K|   103   (1)| 00:00:02 |"
"------------------------------------------------------------------------------"
" "
"Note"
"-----"
"   - dynamic sampling used for this statement (level=2)" 
```

**结论**：很奇怪，闻起来很“神奇”，为什么 Oracle 决定不使用 invoice_no 字段上的索引并扫描 83256 条记录？我同意我的笔记本电脑没有因并发用户超载，表的大小不是很大（包含数字和 varchars），但是，我不喜欢这种魔法，想知道这种行为的原因:)

**UPDATE** : I just added some dummy value (see below) to invoice_no field to all records - just to increase the size of the table, however, table full scan remains: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"

**UPDATE2**：我也执行了分析表，但结果是一样的：

```
ANALYZE TABLE my_table COMPUTE STATISTICS; 
```

**UPDATE3**：试图强制使用索引，但结果是一样的（也许语法错误？）：

```
EXPLAIN PLAN FOR 
  SELECT /*+ INDEX(my_table my_table_index1) */ * FROM my_table t WHERE invoice_no = 'exception' 
```

**UPDATE4**：最后，能够“告诉 Oracle”使用索引 - 执行新的收集表统计程序：

```
BEGIN
  DBMS_STATS.GATHER_TABLE_STATS ( OWNNAME=>user
                             , TABNAME=>'my_table');
END; 
```

这是解释计划的输出：

```
"--------------------------------------------------------------------------------------"
"| Id  | Operation                   | Name            | Rows  | Bytes | Cost (%CPU)| Time     |"
"-----------------------------------------------------------------------------------------------"
"|   0 | SELECT STATEMENT            |                 |     1 |   294 |     5   (0)| 00:00:01 |"
"|   1 |  TABLE ACCESS BY INDEX ROWID| MY_TABLE        |     1 |   294 |     5   (0)| 00:00:01 |"
"|*  2 |   INDEX RANGE SCAN          | my_table_index1 |     1 |       |     4   (0)| 00:00:01 |"
"-----------------------------------------------------------------------------------------------"
" "
"Predicate Information (identified by operation id):"
"---------------------------------------------------"
" "
"   2 - access(""INVOICE_NO""='exception')" 
```

因此，Oracle 似乎决定在某个时间点使用某种查询方法，并且即使情况发生变化也不会更新它。我同意这一点，但奇怪的是为什么当我刚刚创建、插入和执行选择时它没有为这个测试用例选择正确的方法。我们是否总是至少在开始时执行 DBMS_STATS.GATHER_TABLE_STATS 来告诉 Oracle 使用最佳查询方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:39:25.387

最初创建表时，只有 7 个不同的值`INVOICE_NO`。因此，默认情况下，Oracle 预计针对仅指定谓词的表的查询`INVOICE_NO`将返回大约每 7 行中的 1 行（约 14.3% 的行），这通常意味着表扫描会更有效而不是索引扫描（确切的截止点将取决于许多不同的参数——如果某些系统期望检索 15% 的行，则完全有可能选择索引扫描）。

最初运行查询时，表上没有统计信息，因此 Oracle 被迫进行动态采样（请注意查询计划中的注释“用于此语句的动态采样（级别 = 2）”）。这旨在非常快速地为优化器收集一些基本统计信息。但是，动态采样旨在优化速度而不是准确性，因此统计质量通常不是最佳的。在您的第一个示例中，Oracle 估计查询返回 83256 行（占总数的 83.2%），这可能意味着它高估了表中的行数并低估了`INVOICE_NO`列中不同值的数量。

您是否使用

```
BEGIN
  DBMS_STATS.GATHER_TABLE_STATS ( OWNNAME=>user
                             , TABNAME=>'my_table');
END; 
```

在第 4 步之后但在第 5 步之前，假设您没有更改任何`DBMS_STATS`默认设置，您会有更好的统计信息，但您仍然（很可能）会进行表扫描。Oracle 将估计 14286 行（7 行中的 1 行）。

```
SQL> SELECT * FROM TABLE(dbms_xplan.display);

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 3804444429

------------------------------------------------------------------------------
| Id  | Operation         | Name     | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |          | 14286 |   195K|   104   (2)| 00:00:02 |
|*  1 |  TABLE ACCESS FULL| MY_TABLE | 14286 |   195K|   104   (2)| 00:00:02 |
------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

   1 - filter("INVOICE_NO"='exception') 
```

为了获得更好的计划，您需要在`INVOICE_NO`列上有一个直方图。这将告诉 Oracle 中的数据`INVOIE_NO`不是均匀分布的，因此某些值（即“异常”）比其他列更具选择性。当您收集统计信息时，您可以指定要收集单个列、所有索引列的直方图，或者您可以指定希望 Oracle 自动确定哪些列需要直方图（我们稍后再谈）。如果要强制 Oracle 收集所有索引列的直方图，

```
SQL> exec dbms_stats.gather_table_stats( 'SCOTT', 
                                         'MY_TABLE', 
                                          method_opt => 'FOR ALL INDEXED COLUMNS SIZE 254' );

PL/SQL procedure successfully completed. 
```

假设 有 255 个或更少的不同值`INVOICE_NO`，此直方图将使 Oracle 准确跟踪每个不同值的常见程度（如果有超过 255 个不同值，则 Oracle 将需要合并相邻值，这可能会使您的直方图不太准确） .

在默认的 Oracle 10.2 或 11.2 安装中，默认`method_opt`设置将是“FOR ALL COLUMNS SIZE AUTO”。这告诉 Oracle 在它确定合适的任何列上收集直方图。为此，Oracle 会查找数据分布高度倾斜的列以及该列出现在谓词中的位置。所以早些时候，当我谈到在第 4 步和第 5 步之间收集统计信息时，Oracle 没有收集直方图，`INVOICE_NO`因为虽然它知道数据是倾斜的，但它不知道您要根据该列查询表.

在第 7 步之后，如果您再次使用完全相同的命令收集统计信息

```
BEGIN
  DBMS_STATS.GATHER_TABLE_STATS ( OWNNAME=>user
                             , TABNAME=>'my_table');
END; 
```

然后，Oracle 会看到在共享池中`MY_TABLE`有一个针对该谓词的查询。`INVOICE_ID`这将允许它意识到`INVOICE_NO`满足这两个条件以获得直方图，因此这一次，它将在 上收集直方图`INVOICE_NO`。这允许优化器意识到您的查询仅返回 1 行，并意识到索引扫描将是最有效的计划

```
SQL> SELECT * FROM TABLE(dbms_xplan.display);

PLAN_TABLE_OUTPUT
----------------------------------------------------------------------------------------------------
Plan hash value: 3377519735

-----------------------------------------------------------------------------------------------
| Id  | Operation                   | Name            | Rows  | Bytes | Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |                 |     1 |    14 |     4   (0)| 00:00:01 |
|   1 |  TABLE ACCESS BY INDEX ROWID| MY_TABLE        |     1 |    14 |     4   (0)| 00:00:01 |
|*  2 |   INDEX RANGE SCAN          | my_table_index1 |     1 |       |     3   (0)| 00:00:01 |
-----------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - access("INVOICE_NO"='exception') 
```

所以，好消息是 Oracle 足够聪明，最终会发现它需要一个直方图才能为该查询生成最佳计划。坏消息是，如果您在向表中填充数据时不通过收集包括直方图在内的统计数据来告诉 Oracle，在 Oracle 弄清楚它需要什么之前，您可能会得到糟糕的计划。

在实际系统中，您通常会在绝大多数查询中使用绑定变量而不是文字。当您在针对具有直方图的列的查询中使用绑定变量时，会引入一组新问题。如果您的应用程序中有查询

```
 SELECT * 
   FROM my_table 
  WHERE invoice_no = :1; 
```

如果绑定值“5570-110”，则需要进行表扫描，但如果绑定值“异常”，则需要进行索引扫描。在 Oracle 10.2 中，Oracle 将进行绑定变量窥视，这意味着当 Oracle 进行硬解析时，它将查看绑定变量的值并生成针对该绑定值进行优化的计划。不幸的是，在 10g 中，每个查询只能有一个计划，因此您一次只能针对两种情况之一获得最佳计划，而您获得的计划将取决于首先遇到哪个绑定值的运气。在 11g 中，您可以获得自适应游标共享，其中 Oracle 为不同的绑定变量值维护多个查询计划，尽管这会引入一些您需要注意的额外复杂性。

哦，顺便说一句，您的提示不起作用，因为您为索引使用了区分大小写的名称。您的提示需要使用区分大小写的索引名称。您还需要使用别名而不是表名

```
SELECT /*+ INDEX(t "my_table_index1") */ * 
  FROM my_table t 
 WHERE invoice_no = 'exception' 
```

这是使用区分大小写的标识符通常是一个主要问题的（许多）原​​因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:02:47.193

我在你的测试中得到了这个，没有任何统计数据更新： 计划：

`SELECT STATEMENT ALL_ROWS`: 成本：1 字节：20 基数：1

`TABLE ACCESS BY INDEX ROWID TABLE SYS.MY_TABLE`: 成本：1 字节：20 基数：1

`INDEX RANGE SCAN INDEX SYS.my_table_index1`：成本：1 基数：1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T21:02:22.247

> *我们是否总是至少在开始时执行 DBMS_STATS.GATHER_TABLE_STATS 来告诉 Oracle 使用最佳查询方法？*

不，不一定。

Oracle 会自动执行此操作（除非您已将其关闭）。但在默认安装中，它每天只会收集一次统计信息。因此，在大负载之后，统计信息不是最新的——尽管我预计 11.x 会在填充表后立即使用索引。

因此，每次更改数据的*主要*部分时，运行`dbms_stats.gather_table_stats()`或者即使`dbms_stats.gather_schema_stats()`更改了更多表也是一个好主意。

“一天一次”策略对于大多数工作负载来说已经足够了，但是如果您有更快的变化条件，您可能需要调整 Oracle 如何计算统计信息的参数。

有关更多详细信息，请参阅手册：[http ://docs.oracle.com/cd/E11882_01/server.112/e16638/stats.htm#g49431](http://docs.oracle.com/cd/E11882_01/server.112/e16638/stats.htm#g49431)

# jquery - jquery表单序列化空字符串

> ID：12885872
> 
> 赞同：3
> 
> 时间：2012-10-14T19:44:55.517
> 
> 标签：jquery, forms, serialization

我有以下表格：

```
<form id="searchform_txtRepeatComplaint" name="searchform_txtRepeatComplaint">
   <input name="datasource" type="hidden" value="TDA">
   <input name="from" type="hidden" value="eci_data">
   <input name="where" type="hidden" value="">
   <input name="componentname" type="hidden" value="txtRepeatComplaint">
   <input name="staticstrings" type="hidden" value="">
   <input name="staticfields" type="hidden" value="">
   <input class="nostyle" name="returnfield" type="hidden" value="Complaintinformation_ID">
   <input class="nostyle" name="returnid" type="hidden" value="Complaintinformation_ID">
eCI ID:<input  class="nostyle" type="text" name="Complaintinformation_ID" id="Complaintinformation_ID" style="width:150px;"/> 
Complaint number: <input  class="nostyle" type="text" name="eci_number" id="eci_number" style="width:150px;"/>
</form> 
```

这是一个更大的表单标签中的表单。我也有以下JS代码：

```
var data_save = $("#searchform_txtRepeatComplaint").serializeArray();
alert(data_save); 
```

警报显示为空。（甚至没有显示 [Object]，它只是一个空的警报框）。我究竟做错了什么？

**未来读者的解决方案：** 我找到了解决此错误的方法。我将 FORM 更改为 DIV 并添加了输入选择器，如下所示：

```
var data_save = $("#searchform_txtRepeatComplaint input").serializeArray(); 
```

另外：文档状态 serializeArray() 不适用于表单中的表单（无论如何这都是非法的 HTML）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:47:12.040

您错过了选择器中的 #

```
var data_save = $("#searchform_txtRepeatComplaint").serializeArray(); 
```

代替

```
var data_save = $("searchform_txtRepeatComplaint").serializeArray(); 
```

此外，要调试代码，您应该使用 console.log() 而不是 alert()。检查对象/数组更有用。

# javascript - 追加和转义

> ID：12885873
> 
> 赞同：1
> 
> 时间：2012-10-14T19:45:10.343
> 
> 标签：javascript, jquery

在追加之前如何逃脱？以下错误地附加

```
'<a here."="" goes="" string"="" title="Some " href="#">Hello</a>' 
```

在代码中：

```
$(function(){
    var t='Some "string" goes here.';
    var jqueryObj=$('#elem');
    jqueryObj.append('<a href="#" title="'+t+'">Hello</a>');
}); 
```

编辑后的修订代码

```
var $accounts=$('#accountList');
$accounts.find('li.accountList').remove();
for (var i = 1; i < data.o.a.length; i++) {
    $accounts.append('<li class="item displayAccount">'
    +'<input type="checkbox" checked="checked" class="cb" name="accounts[]" value="'+i+'" />'
    +'<span class="name">'+data.o.a[i].name
      +((data.o.a[i].e.length)?' <a class="displayError" href="#" title="'+escape(mkList(data.o.a[i].e))+'">Error</a>':null)
    +'</span>'
    +'</li>');
}
if(data.o.a[0].c.length) {$accounts.append('<li class="item displayAccount"><input type="checkbox" disabled="disabled" value="0"><span class="name">UNASSIGNED</span></li>');}
$accounts.find('a.displayError').displayError(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T19:46:55.250

jQuery 有一个[很好的语法](http://api.jquery.com/jQuery/#jQuery2)来安全地创建元素：

```
$('<a>', {
    href: '#',
    title: t,
    text: 'Hello'  // Replace `text` with `html` if you need to.
}).appendTo(jqueryObj); 
```

* * *

你的代码很大程度上依赖于字符串，所以我做了我能做的，但它可以变得更漂亮：

```
for (var i = 1; i < data.o.a.length; i++) {
    var $li = $('<li class="item displayAccount"></li>');
    var $input = $('<input type="checkbox" checked="checked" class="cb" name="accounts[]" />').val(i).appendTo($li);
    var $span = $('<span class="name"></span>').appendTo($li);

    if (data.o.a[i].e.length) {
        $('<a class="displayError" href="#">Error</a>').attr('title', mkList(data.o.a[i].e)).appendTo($span);
    }

    $li.appendTo($accounts);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T19:53:31.360

我想我会提供与 Blender 不同的答案，以防万一您不想使用该方法。

```
function escapeQuotes(str){
    return str.replace(/"/g, '&quot;');
} 
```

将用 . 替换双引号`&quot;`。

# java - cygwin bash：java：找不到命令

> ID：12885874
> 
> 赞同：2
> 
> 时间：2012-10-14T19:45:22.600
> 
> 标签：java, cygwin

所以我不得不重新安装我的系统。我在 C:\cygwin\bin 中安装了 Cygwin

我使用了以前安装的批处理文件：“start_cygwin.bat”

```
@echo off  
C:  
chdir C:\cygwin\bin  
bash -c "cd /cygdrive/e/apache-solr-3.5.0/example/;java -Dsolr.solr.home="./example-DIH/solr/" -jar start.jar" 
```

但运行此命令后：

```
bash -c "cd /cygdrive/e/apache-solr-3.5.0/example/;java -Dsolr.solr.home="./example-DIH/solr/" -jar start.jar" 
```

我得到错误：

*bash：java：找不到命令*

我认为它与java有关，但我安装了java jdk 6.27（之前运行良好），当我在命令提示符中键入“java”时，我看到了可能的java命令列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:47:11.853

它无法找到您的`java.exe`文件。

要解决此问题，您有两种选择：

1.  在 PATH 中添加 Java 安装文件夹

2.  `java.exe`在上述命令中使用完整路径，即`java`使用`/home/../jdk.../bin/java`.

两个选项之一，应该有助于解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T12:25:06.830

如果使用 java/bin 的路径不起作用，那么您可以尝试
- 创建符号链接：`ln -s /cygdrive/c/Program\ Files/Java/jre1.8.0_102/bin/java.exe /usr/bin/java`
- 创建别名：`alias java="/cygdrive/c/Program\ Files/Java/jre1.8.0_102/bin/java.exe"`
- 将 java 路径添加到路径：`export JAVA_HOME="/cygdrive/c/Program\ Files/Java/jre1.8.0_102"`
`export PATH="$PATH:$JAVA_HOME/bin"`

# iphone - 如何将视网膜图像添加到我的应用程序？我只是添加像“@2x”吗？

> ID：12885875
> 
> 赞同：-2
> 
> 时间：2012-10-14T19:45:21.733
> 
> 标签：iphone, objective-c, ios, cocoa-touch, retina-display

我有一个充满图像的应用程序，但是当你在视网膜显示器上运行它时，它会被像素化，我有相同的图像具有双分辨率，但我不知道如何将它们添加到我的项目中......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:50:36.167

是的，只需在图像文件的名称中添加“@2x”即可。

因此，如果您有一个低分辨率的图像“someimage.png”，请将此图像的高分辨率版本命名为“someimage@2x.png”。

然后您在代码中无事可做，因为当您编写`[UIImage imageNamed:@"someimage"]`或`[UIImage imageNamed:@"someimage.png"]`运行时将根据用户运行您的应用程序的 iPhone 的分辨率加载正确的图像“someimage.png”或“someimage@2x.png”。

* * *

有关更多信息，**请阅读Apple 文档中的[资源编程指南](https://developer.apple.com/Library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html#//apple_ref/doc/uid/TP40010156-CH15)**，尤其是“**更新您的图像资源文件**”段落，其中详细解释了所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:50:15.627

和你的标题一样。使用与原始图像相同的名称但使用“@2x”将图像添加到您的项目中。例如，如果您有“example.png”，则将 Retina 图像添加到名为“example@2x.png”的项目中，如果 Xcode 检测到 Retina 显示器，它将自动使用该图像。不需要编码。

# sharepoint - 如何自动部署和构建我的 SharePoint 解决方案？

> ID：12885876
> 
> 赞同：0
> 
> 时间：2012-10-14T19:45:30.583
> 
> 标签：sharepoint, deployment, tfs

我有新的 TFS 和 VS12。我的计划是，通过默认模板构建定义自动部署和构建我的 SharePoint 解决方案。我已经有一个部署脚本。

到目前为止，一切都很好。我相信，我应该通过编辑 DefaultTemplate11.1.xaml 将我的部署脚本集成到默认模板中。

我的第一个问题：正确吗？

我的第二个问题：我该怎么做？

先感谢您。马库斯·塞布

# scala - 如何使用列表映射呈现表单

> ID：12885880
> 
> 赞同：6
> 
> 时间：2012-10-14T19:46:06.203
> 
> 标签：scala, playframework-2.0

我有一个带有嵌套映射列表的表单，但在模板中迭代它时遇到问题。表格看起来像这样

```
val assignmentForm : Form[AssignmentData] = Form(
   "acceptedSign" -> nonEmptyText(),
    mapping("activities" -> list (    
      mapping("activityId" -> optional(text), 
          "activityStatus" -> optional(text)) 
          (ActivityData.apply)(ActivityData.unapply))
    )(AssignmentData.apply)(AssignmentData.unapply)
) 
```

我将此表单传递到模板中并尝试遍历**活动**。到目前为止，结果只有编译器错误或表单的完整元数据转储。

这给出了完整表单的元数据+数据转储，包括活动。（**LI**标签是一个包含输入字段的选项卡导航器）

```
@repeat(assignmentForm("activities")) { activity =>
                    <li>@activity("activityId")</li>
                    } 
```

迭代*类型的*作品（是代码运行），但从用户的角度来看它是完全不可用的。

我也尝试过各种 for 循环，只给我编译器错误，说

```
value map is not a member of play.api.data.Field 
```

我的问题是：

1.  是否应该可以构建这样的表格，以及如何完成？
2.  对于呈现具有一对多关系的输入表单，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:01:27.930

解决方案就这么简单，navtab.scala.html

```
@**
* Generate an LI element
*@

@(field: play.api.data.Field)
<li><a href='#@field.id' data-toggle="modal">@field("activityStatus").value</a></li> 
```

然后对模板中的映射集合重复

```
<ul  id="activities">
    @repeat(assignmentForm("activities"), min=0) { activity =>
        @navtab(activity)
    }
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T03:32:48.983

You can use `indexes` method to render list(seq, array) values.

```
@assignmentForm("activities").indexes.map(i =>
  assignmentForm("activities").indexes(s"[$i]").value
) 
```

But this is unuseful, so I created implicit method

```
import play.api.data.Field

object FieldExtend {
  implicit class FieldExtend(field: Field) {
    def values: Seq[Option[String]] = {
      field.indexes.map(i => field(s"[$i]").value)
    }
    def containsValue(value: Byte): Boolean = {
      values.contains(Some(value.toString))
    }
  }
} 
```

After import this class, you can use `@assignmentForm("activities").values`

# jquery - 为什么我不能在不同的页面上调用同一个 Google 地图？jQuery手机

> ID：12885882
> 
> 赞同：2
> 
> 时间：2012-10-14T19:46:17.963
> 
> 标签：jquery, mobile, maps

对编程这一方面来说是真正的新手，但试图让我的脚湿透。

我创建了一个地图，让它显示并正常运行没有问题，但是当我尝试将相同的地图放在不同的页面上时，它不会显示地图。它为地图创建了一个空间，但我看不到它。

只有在以下情况下，我才能在第二页上加载地图：我将它放在我的代码中的原始地图页面之前。

如何让地图在两个页面上都显示？

相关脚本：

```
 var map;
  function initialize() {
  var myOptions = {
      zoom: 17,
      center: new google.maps.LatLng(45.628936,-122.672273),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);

var myMarkers = [
    ['angst', 45.629281,-122.671468, 4],
    ['northbank', 45.62911,-122.671468, 3],
    ['gallery360', 45.628144,-122.67245, 5],
    ['auroa', 45.629118,-122.671763, 5],    

  ];

  for (var i = 0; i < myMarkers.length; i++) {
      var newMarker = myMarkers[i];
      var markerLatLng = new google.maps.LatLng(newMarker[1], newMarker[2]);
      var marker = new google.maps.Marker({
          position: markerLatLng,
          map: map,
          title: newMarker[0],
          zIndex: newMarker[3]
      });

   }

 } //close initialize function

 google.maps.event.addDomListener(window, 'load', initialize); 
```

页面之所以有效，是因为它首先出现在代码中：

```
<div data-role="page" id="map" data-theme="a">

<div data-role="content" id="content" data-theme="a">   
    <div id="map_canvas"> </div>    
</div><!-- /content -->

<div data-role="footer" id="footer">    
    <div id="nav" data-role="navbar" >
        <ul>
            <li><a href="#galleries">Galleries</a></li>
            <li><a href="#shows">Shows</a></li>
            <li><a href="#map">Map</a></li>
        </ul>
    </div>
</div> <!-- end of footer-->

</div> <!-- end of #map page --> 
```

我无法加载的页面，除非它在之前的代码之前进行了编码。

```
<div data-role="header" id="header" >
    <a href="index.html" data-role="home" data-icon="home"  id="homebutton" >Home</a>  <!--home button on header bar-->
    <h1>Gallery 360</h1>
</div> <!--end of the header div-->

<div data-role="content" id="gallerylist" data-theme="c">   

    <img src="images/360.jpg" class="pagebackground" />
    <div id="map_canvas"> </div>    
</div><!-- /content -->

<div data-role="footer" id="footer">    
    <div id="nav" data-role="navbar" >
        <ul>
            <li><a href="#galleries" >Galleries</a></li>
            <li><a href="#shows" >Shows</a></li>
            <li><a href="#map">Map</a></li>
        </ul>
    </div>
</div> <!-- end of footer-->
</div><!-- /page #g360 --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:11:19.973

我也没有经验，但可能是因为你没有把“data-role='page'id=''”放在第二页

# php - 使用“Jquery 文件上传插件”将文件直接上传到 FTP 服务器

> ID：12885883
> 
> 赞同：1
> 
> 时间：2012-10-14T19:46:33.080
> 
> 标签：php, javascript, jquery, host

我在我的网站上使用“ [Blueimp Jquery 文件上传插件](https://github.com/blueimp/jQuery-File-Upload)”，并且我允许用户在我的服务器上上传文件。我在 HostGator 上托管了我的网站。问题是用户上传文件的大小不能超过64MB/文件，搜索后发现HostGator在“php.ini”文件中设置了上传文件的最大限制为64MB/文件，我不能更改此大小限制。

但实际上我可以直接通过 FTP 上传任意大小的文件，没有任何限制。

所以，我问是否有一种解决方法可以用来避免这个 HostGator 限制，或者是否有办法允许用户通过 FTP 将文件直接上传到服务器抛出这个 jquery 插件“web 应用程序”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:55:58.097

您**绝对**可以更改 hostgator 的最大文件大小设置，就像我之前做过几次一样。

在您选择的目录中，创建一个 .htaccess 文件。在此文件中包含 php 覆盖设置。

```
php_value upload_max_filesize 200M
php_value post_max_size 200M 
```

除非最近几个月发生了一些变化，否则这种解决方法一直对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:56:58.970

jupload 可以通过 ftp 上传

[http://jupload.sourceforge.net/](http://jupload.sourceforge.net/)

这是一个不错的解决方案。虽然并非所有用户都启用 java，但您可以让您的 html 页面优雅地降级为 http 上传，在这种情况下，唯一丢失的用户是那些想要上传大文件的用户。

或切换虚拟主机 - 另一个简单有效的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-17T21:03:33.573

您可以将 FTP 与“Blueimp Jquery 文件上传插件”一起使用，但它需要一些 PHP 编码*。*不要`UploadHandler`破坏类（file-uploads/server/php/UploadHandler.php），而是应该扩展它并根据需要覆盖函数。

将 file-uploads/server/php/index.php 的内容替换为以下内容：

```
require('UploadHandler.php');

/*
 *  custom class for uploading files, simply extends the UploadHander class
 */
class CustomUploadHandler extends UploadHandler {

    /*
     * rewreite the handle_file_upload() function to use FTP to send the files to the FTP server
     */
    protected function handle_file_upload($uploaded_file, $name, $size, $type, $error, $index = null, $content_range = null) {
        $file = new stdClass();
        $file->name = $this->get_file_name($uploaded_file, $name, $size, $type, $error,
            $index, $content_range);
        $file->size = $this->fix_integer_overflow((int)$size);
        $file->type = $type;
        if ($this->validate($uploaded_file, $file, $error, $index)) {
            $this->handle_form_data($file, $index);
            $upload_dir = $this->get_upload_path();
            if (!is_dir($upload_dir)) {
                mkdir($upload_dir, $this->options['mkdir_mode'], true);
            }
            $file_path = $this->get_upload_path($file->name);
            $append_file = $content_range && is_file($file_path) &&
                $file->size > $this->get_file_size($file_path);
            if ($uploaded_file && is_uploaded_file($uploaded_file)) {
                // multipart/formdata uploads (POST method uploads)
                if ($append_file) {
                    file_put_contents(
                        $file_path,
                        fopen($uploaded_file, 'r'),
                        FILE_APPEND
                    );
                } else {
                    move_uploaded_file($uploaded_file, $file_path);
                }
            } else {
                // Non-multipart uploads (PUT method support)
                file_put_contents(
                    $file_path,
                    fopen('php://input', 'r'),
                    $append_file ? FILE_APPEND : 0
                );
            }
            $file_size = $this->get_file_size($file_path, $append_file);
            if ($file_size === $file->size) {
                $file->url = $this->get_download_url($file->name);
                if ($this->is_valid_image_file($file_path)) {
                    $this->handle_image_file($file_path, $file);
                }
            } else {
                $file->size = $file_size;
                if (!$content_range && $this->options['discard_aborted_uploads']) {
                    unlink($file_path);
                    $file->error = $this->get_error_message('abort');
                }
            }
            $this->set_additional_file_properties($file);
        }

        /* 
         * now send it to the FTPserver
         */
        $source_file = $file_path; // the path of the file to upload
        $destination_file = '/your/path/' . $file->name; // the file path to upload to (must have trailing / in the path before the $file->name is appended)

        $ftp_error = $this->ftp_upload($source_file, $destination_file);

        if ($ftp_error != '') {
          $file->error = $ftp_error;
        }

        return $file;
    }

    /*
     * new function for uploading using FTP
     */
    protected function ftp_upload($source_file, $destination_file) {

        $ftp_server = 'YOUR FTP HOST NAME';
        $ftp_user_name = 'YOUR USER NAME';
        $ftp_user_pass = 'YOUR PASSWORD';
        $port_number = YOUR FTP PORT NUMBER;

        $error = '';

        // set up basic connection
        $conn_id = ftp_connect($ftp_server, $port_number); 
        if (!$conn_id) {
            $error = "FTP connection has failed! Connection attempt was blocked." ;
            return $error;
        }

        // login with username and password
        $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); 

        // check connection
        if (!$login_result) { 
            $error = "FTP connection has failed! ";
            $error .= "Could not log into fpt://$ftp_server for user $ftp_user_name"; 
            return $error;
        }

        // upload the file
        $upload = ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY); 

        // check upload status
        if (!$upload) { 
            $error = "FTP upload has failed!";
        } else {
            $error =  "Uploaded $source_file to $ftp_server as $destination_file";
        }

        // close the FTP stream 
        ftp_close($conn_id); 

        return $error;
    }

}

// options to pass to the upload handler object
$options = [
   // ANY OPTIONS, SUCH AS FILE UPLOAD LOCATION
   'upload_url' => 'fpt://YOUR-FTP-SERVER-NAME/files/',
];

// finally, instantiate the new class   
$upload_handler = new CustomUploadHandler($options); 
```

请注意，这只是在将文件上传到上传服务器后，通过 ftp 将文件复制到 ftp 服务器。这意味着您将拥有同一个文件的两个副本。您可以删除最初上传的文件而无需太多额外工作，但请确保首先完成 ftp 操作。

您将需要这个***并且***您将需要 Ohgodwhy 所描述的 .htaccess apache 设置

# jquery - 如何在淘汰赛中触发验证

> ID：12885885
> 
> 赞同：0
> 
> 时间：2012-10-14T19:46:38.683
> 
> 标签：jquery, kendo-ui, knockout-validation

我正在开发一个安排工作的应用程序。现在，我有*Monthly*、*Weekly*、*Daily*和特定日期的单选按钮。现在，如果用户选择最后一个单选按钮，我会显示所有日期的复选框（星期日，星期一...）。我已经对单选按钮进行了淘汰赛验证

```
 self.processSchedule.ScheduleType.subscribe(function (newValue) {
        resetSubcontrolsForScheduleType();
    }); 
```

现在，如果更改了单选按钮选择，则单选按钮上的验证将正确触发。我需要的是，如果选中任何日期的复选框，我需要触发单选按钮上的验证。有没有一种方法可以在复选框的值更改时触发单选按钮的验证？

# javascript - Strange JS or CSS (Can't figure out which one make issue) 相关问题

> ID：12885894
> 
> 赞同：0
> 
> 时间：2012-10-14T19:47:48.877
> 
> 标签：javascript, html, css, debugging, layout

请访问[此链接](http://vefaestetik.az/?debug)。

当我在 chrome 或 firefox 上打开它并多次刷新时，我得到以下屏幕：

![在此处输入图像描述](../Images/b4085ab1210b30eb1a001cdf8b809c31.png)

我真的不明白为什么会出现这个问题。此外，两种浏览器上的萤火虫都没有错误：Chrome 和 Firefox。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:07:27.003

尝试给出`#front-slides`一个高度（在这种情况下为 370px）并将其设置为`overflow: hidden;`，然后删除`.slides_container`.

这似乎解决了我的问题，问题似乎是`.slides_control`高度设置错误，显然它在加载之前设置为图像高度。

您的其他解决方案是手动将`.slides_control`' 高度设置为 370px 或更改计算直到页面加载完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:09:22.403

具有“slides_control”类的 dom 元素的高度正在动态设置。

有时是 18px ，但在其他情况下是 370px 。

如果您将高度明确设置为 370 像素，它可以工作，但您可能需要进一步研究它为什么在您的代码中设置不同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:19:37.923

问题是，您的功能（与滑块相关）在所有图像加载之前触发。移动，`window.onload`如下所示

```
window.onload = function () {
    //##########################################
    // Front slides
    //##########################################

    $('#front-slides').slides({
        preload: true,
        preloadImage: 'design/img/elems/loading.gif',
        generateNextPrev: false,
        play: 5000,
        pause: 2500,
        hoverPause: true,
        animationStart: function(current){
            $("#headline h6").fadeOut("slow");
        },
        animationComplete: function(current){
            $slideCaption = $(".slides_container div.slide:eq("+ (current-1) +") .caption").text();
            $("#headline h6").text($slideCaption);
            if($slideCaption != ''){
                $("#headline h6").fadeIn("slow");
            }else{
                $("#headline").hide("slow");
            }
        }

    });

    // default headline
    $firstCaption = $(".slides_container div.slide:eq(0) .caption").text();
    if($firstCaption != ''){
        $("#headline h6").text($firstCaption);
    }else{
        $("#headline").hide();
    }

} 
```

# database-connection - scrapyd 连接到自己的数据库（mysql.db）而不是 127.0.01:3306

> ID：12885895
> 
> 赞同：0
> 
> 时间：2012-10-14T19:48:18.940
> 
> 标签：database-connection, scrapy, scrapyd

我有一个scrapy项目，它的蜘蛛如下图所示。当我用这个命令运行这个蜘蛛时，蜘蛛会工作：`scrapy crawl myspider`

```
class MySpider(BaseSpider):
    name = "myspider"

    def parse(self, response):
        links = SgmlLinkExtractor().extract_links(response)

        for link in links:
            item = QuestionItem()
            item['url'] = link
            yield item

    def __init__(self):
        start_urls = []

        conn = MySQLdb.connect(host='127.0.0.1',
                       user='root',
                       passwd='xxxx',
                       db='myspider',
                       port=3306)
        cur = conn.cursor()
        cur.execute("SELECT * FROM pages")
        rows = cur.fetchall()
        for row in rows:
            start_urls.append(row[0])

        self.start_urls = start_urls 

        conn. close() 
```

在我使用“scrapy deploy -p mysqlproject”将该项目部署到scrapyd之后，然后使用`"curl http://localhost:6800/schedule.json -d project=mysql -d spider=myspider"`

问题是 start_urls 没有从数据库中填充。相反，sql 命令返回一个空数组。因为（我猜）它连接到由 dbs_dir 配置的自己的 mysql.db，如下所示：http: [//doc.scrapy.org/en/0.14/topics/scrapyd.html#dbs-dir](http://doc.scrapy.org/en/0.14/topics/scrapyd.html#dbs-dir)

如何在 scrapyd 和 mysql 服务器而不是 mysql.db 之间建立连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:24:38.373

我猜你的问题不是 dbs_dir 只指向内部 SQLite 数据库。也许您正在连接到在 scrapyd 的部署服务器上运行的 MySQL 服务器，而不是包含 start_urls 的服务器。

# javascript - getUserMedia - 如何检测设备是否真的有摄像头

> ID：12885896
> 
> 赞同：15
> 
> 时间：2012-10-14T19:48:36.757
> 
> 标签：javascript, camera, getusermedia, modernizr, mediadevices

我正在使用 html5/javascript getUserMedia api 编写一个 js 应用程序，如果可用，它将使用设备的相机。我正在使用 Modernizr 来检测（浏览器的）功能，如下所示：

```
if (Modernizr.getusermedia) { 
```

在真正的块内：

```
navigator.getUserMedia(
    {   // we would like to use video but not audio
        // This object is browser API specific! - some implementations require boolean properties, others require strings!
        video: true, 
        audio: false
    },
    function(videoStream) {
        // 'success' callback - user has given permission to use the camera
        // my code to use the camera here ... 
    },
    function() {
        // 'no permission' call back
        console.log("user did not give access to the camera");
    }               
); 
```

这工作正常。但我发现 Modernizer.getUserMedia 调用根据支持 api 的浏览器返回 true，而不是设备是否真的有摄像头。

IE。在我的带有 iSight 摄像头和当前版本 Chrome 的 MacBook 上，Modernizr.getUserMedia 返回 true，然后 navigator.getUserMedia(...) 提示允许使用摄像头。出色的

但是，在另一台没有摄像头但使用当前版本的 Chrome 的机器上，Modernizr.getUserMedia 返回 true，这意味着 navigator.getUserMedia(...) 提示允许使用设备没有的摄像头。没那么优秀！

有谁知道是否可以检测到相机的存在？理想情况下，如果他们没有相机，我不想提示用户访问相机的权限！

干杯

弥敦道

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-03T12:05:19.993

您可以使用 MediaStreamTrack.getSources。这将返回连接到 PC 的视频和音频设备列表。这不需要用户许可。

然后，您可以将 ID 传递给 getUserMedia 以获取所需的媒体设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-05T08:21:22.317

这帮助了我：

```
function(videoStream) {
    // 'success' callback - user has given permission to use the camera
    if (videoStream.getVideoTracks().length > 0) {
        // my code to use the camera here ... 
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-29T18:25:54.787

`navigator.mediaDevices`在过去五年左右的时间里，api 已经稳定下来。

您现在可以通过浏览器 javascript 执行此操作。

```
{
  navigator.mediaDevices.enumerateDevices()
  .then ( function (devices) {
      console.log(devices)
      const videoDevices = devices.filter(device => device.kind === 'videoinput')
      console.log(videoDevices)
  })
} 
```

如果你的机器有任何视频设备，你会`videoDevices`在过滤阵列后得到一些东西`devices`。

但是，除非您的程序已经调用`getUserMedia()`并获得了许可，否则您无法（至少在 Google Chrome 上）知道您拥有多少个网络摄像头或它们的`label`值（名称）是什么。因为网络蠕虫。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T18:22:05.900

getUserMedia API 仍然很新鲜，并且会有一些错误和需要改进的地方，比如这个问题。

但目前我没有办法让你检查计算机是否真的有摄像头。尽管您可以使用 Flash :-( 来检测它，但我认为...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-22T14:45:38.350

您可以使用 Muaz Khan webrtc 实验中的 DetectRTC： [https ://github.com/muaz-khan/WebRTC-Experiment/tree/master/DetectRTC](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/DetectRTC)

利用：

```
DetectRTC.audioInputDevices
DetectRTC.audioOutputDevices
DetectRTC.videoInputDevices 
```

获取设备。

# winapi - 阻止来自特定键盘的击键

> ID：12885897
> 
> 赞同：2
> 
> 时间：2012-10-14T19:48:42.707
> 
> 标签：winapi, capture, keystroke

我想阻止来自特定键盘的所有击键（由其 HID/名称标识，所以我猜它是低级的东西）在它们到达焦点应用程序之前。但我仍在使用这个禁用的键盘（我正在敲击键盘）。我想我需要一个应用程序的钩子，但我不知道该怎么做。也许你可以给我一些有用的链接？

问候，

编辑：

我认为我需要一个低级挂钩，因为一般挂钩（我的意思是挂钩所有现有的窗口和线程）在 .net 框架中不可用，涉及用户空间。此外，我使用 RAWINPUT 从键盘获取键入的击键。因此，如果我制作一个挂钩来阻止来自特定设备的击键，那么该挂钩是否也能阻止 RAWINPUT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:01:15.850

应用程序可以通过[获取原始输入数据](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645543%28v=vs.85%29.aspx)来区分输入源。然而，应用程序需要处理 WM_INPUT 而不是 WM_CHAR、WM_MOUSEMOVE 或 WM_APPCOMMAND。

# excel - Excel 语法错误

> ID：12885898
> 
> 赞同：1
> 
> 时间：2012-10-14T19:48:43.740
> 
> 标签：excel, excel-formula

我在以下 Excel 公式中找不到语法错误：

我在 K7:M11 中有三张数据，即 s_core1、s_core2、s_core3。搜索键在 A6:C6、A7:B7 等。如果 A6 为 core1，则应使用工作表 s_core1 中的数据进行查找。如果是core2，应该使用sheet s_core2中的数据来查找。

```
=INDEX(INDIRECT("s_"&A6&"!"&"$K$11:$M$11"),MATCH(C6,INDIRECT("K"&MATCH(B6,INDIRECT("s_"&A6&"!$J$7:$J$9"),0)+6&":M"&MATCH(B6,INDIRECT("s_"&A6&"!$J$7:$J$9"),0)+6),0)) 
```

请帮帮我。

如果需要，这是供参考的来源：

请参考论坛附件中的excel文件：

[http://www.excelforum.com/excel-formulas-and-functions/868258-look-up-in-different-sheets.html?p=2968043#post2968043](http://www.excelforum.com/excel-formulas-and-functions/868258-look-up-in-different-sheets.html?p=2968043#post2968043)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:44:26.437

您不是在第二个 INDIRECT 函数中引用工作表 - 添加粗体部分代替**“K”**

=INDEX(INDIRECT("s_"&A6&"!"&"$K$11:$M$11"),MATCH(C6,INDIRECT( **"s_"&A6&"!K"** &MATCH(B6,INDIRECT("s_"&A6&"! $J$7:$J$9"),0)+6&":M"&MATCH(B6,INDIRECT("s_"&A6&"!$J$7:$J$9"),0)+6),0))

# c++ - 这两种说法有什么区别

> ID：12885901
> 
> 赞同：5
> 
> 时间：2012-10-14T19:48:59.443
> 
> 标签：c++, oop

这两种说法有什么区别？

```
ob.A::ar[0] = 200;
ob.ar[0] = 200; 
```

`ob`类的对象在哪里`A`

```
class A
{
    public:
        int *ar;
        A()
        {
            ar = new int[100];
        }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T19:52:59.073

没有区别。在这种情况下，显式命名空间限定`ar`是多余的。

在（多个，非虚拟）继承重新定义 name 的情况下，它可能不是多余的`ar`。样本（人为）：

```
#include <string>

class A 
{
    public:
        int *ar;
        A() { ar = new int[100]; }
        // unrelated, but prevent leaks: (Rule Of Three)
       ~A() { delete[] ar; }
    private:
        A(A const&);
        A& operator=(A const&);
};

class B : public A
{
    public:
        std::string ar[12];
};

int main()
{
    B ob;
    ob.A::ar[0] = 200;
    ob.ar[0] = "hello world";
} 
```

[在http://liveworkspace.org/code/d25889333ec378e1382cb5af5ad7c203](http://liveworkspace.org/code/d25889333ec378e1382cb5af5ad7c203)上查看

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T19:56:31.817

在这种情况下没有区别。

这个符号：

`obj.Class::member`

只是为了解决来自继承的歧义：

```
class A {
public:
  int a;
}

class B {
public:
  int a;
}

class C : public A, B {
   void func() {
      // this objects holds 2 instance variables of name "a" inherited from A and B
      this->A::a = 1;
      this->B::a = 2;
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T19:54:22.910

在这种情况下没有区别。但是想象一下 ob 属于 C 类，它继承自 A 类和 B 类，并且 A 和 B 都有一个字段 ar。那么除了显式指定您引用的继承数据成员之外，没有其他方法可以访问 ar。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T20:00:52.107

你应该读这个

```
ob.A::ar[0] = 200;
ob.ar[0] = 200; 
```

像这样

`A::ar[0]`对于 是一样的`ar[0]`，所以2行基本上是一样的，操作符`::`用来表示所谓*的命名空间解析*，或者只是命名空间。

因为`ob`是 A 类型的对象，所以命名空间解析是隐式的，`A::`在访问`ar[0]`.

# android - 如何设置单个gridview单元格的背景颜色

> ID：12885903
> 
> 赞同：10
> 
> 时间：2012-10-14T19:49:01.773
> 
> 标签：android, gridview

我有一个 GridView，每个单元格都包含一些文本，我希望能够设置单个单元格的背景颜色。

我的 GridView 的 XML 是：

```
<GridView android:id="@+id/students_grid"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:numColumns="6"
          android:gravity="center"
          android:stretchMode="columnWidth">
</GridView> 
```

我的 GridView 的代码是：

```
GridView gridView = (GridView) findViewById(R.id.students_grid);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, student_array);
gridView.setAdapter(adapter); 
```

我曾希望我能够使用以下方法设置单个单元格的背景颜色：

```
gridView.getChildAt(random_student).setBackgroundColor(Color.parseColor("#18A608")); 
```

但是，这会引发空指针异常，进一步检查似乎 gridview.getChildCount() 返回 0。我已经看到 gridview.getCount 正确返回了 gridview 中的项目数，但这无助于我设置单个单元格的背景颜色。

有什么想法我接下来要去哪里吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-27T17:47:05.830

解决这个问题的关键是首先了解如何`ListView`和`GridView`工作。`GridView`上下滚动时创建和销毁子视图。如果您在 a 中看不到一个项目，`GridView`这意味着它没有子视图，它将在用户实际滚动到它时创建。`GridView`使用 an`Adapter`创建视图并`GridView`在它们离开屏幕时回收视图，并要求适配器将回收的视图重用于屏幕上的新视图。通常`Adapter`会膨胀资源布局以创建新视图。

所以这意味着每次它想在屏幕上显示一个子视图时都会调用它，它可能会传递一个`GridView`名为.`getView(...)``Adapter``convertView`

解决方案是覆盖`getView(...)`，调用 super 以正常`Adapter`创建并使用数组中的数据填充视图，`String`但在最后添加一些代码，然后我们将视图返回给`GridView`设置视图的颜色。

```
new ArrayAdapter<String>(context, android.R.layout.simple_list_item_1, student_array) {
  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);

    int color = 0x00FFFFFF; // Transparent
    if (someCondition) {
      color = 0xFF0000FF; // Opaque Blue
    }

    view.setBackgroundColor(color);

    return view;
  }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-09T08:52:21.113

**您必须创建十六进制颜色代码数组并传递给自定义适配器类的主要活动**

```
public class MainActivity extends Activity {
GridView gridView;

    String[] gridColor ={

            "#008B8B",
            "#00FF00",
            "#48D1CC",
            "#556B2F",
            "#696969",
            "#6B8E23",
            "#8FBC8F",
            "#AFEEEE",
            "#B8860B",
            "#BDB76B",
            "#D8BFD8",
            "#DEB887",
            "#FFFF00",
            "#FFF0F5",
            "#EE82EE",
            "#DC143C",
            "#C0C0C0"
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Grid adapter = new Grid(MainActivity.this,gridColor);
        gridView=(GridView)findViewById(R.id.grid_view);

        gridView.setAdapter(adapter);

        gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                                    int position, long id)
            {
                Toast.makeText(MainActivity.this, "You Clicked On " +gridcolor[+ position], Toast.LENGTH_SHORT).show();

            }
        });

    }

} 
```

*在自定义适配器代码将是这样的，其中颜色代码将被解析*

```
public class Grid extends BaseAdapter {

    private Context mContext;
    private final String[] menu;
    private final int[] Imageid;
    private final String[] gridcolor;

    public Grid(Context context,String[] menu,int[] Imageid,String[] gridcolor)
    {
        mContext=context;

        this.gridcolor=gridcolor;
    }

    @Override
    public int getCount() {
        return gridcolor.length;
    }

    @Override
    public Object getItem(int i) {
        return null;
    }

    @Override
    public long getItemId(int i) {
        return 0;
    }

    @Override
    public View getView(int i, View view, ViewGroup viewGroup) {
        View grid;
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (view == null) {

            grid = new View(mContext);
            grid = inflater.inflate(R.layout.grid_layout, null);

            grid.setBackgroundColor(Color.parseColor(gridcolor[i]));

        } else
        {
            grid =  view;
        }

        return grid;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T19:55:59.657

您需要创建一个自定义布局并在您的适配器中使用它而不是`android.R.layout.simple_list_item_1`. 例如：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
    android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"
    android:background="#18A608"
     /> 
```

（我只是复制了最新版本`simple_list_item_1.xml`并在最后添加了新的背景颜色。）

将此保存为`grid_layout.xml`in`res/layout`并将适配器的构造函数更改为：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.grid_layout, student_array); 
```

# java - 关闭挂钩的最佳位置

> ID：12885912
> 
> 赞同：4
> 
> 时间：2012-10-14T19:50:12.190
> 
> 标签：java

我有一个调用 Thread 类并启动线程的 main() 方法。这个线程有一个 while(threadBool) 循环，所以我需要在退出程序时停止它（通过将 threadBool 设置为 false）。放置 addShutdownHook() 的最佳位置在哪里？在 main() 方法中

```
Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {

            public void run() {
                class.threadBool=false;
            }
        })); 
```

或在启动此线程的同一类中

```
Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {

            public void run() {
                threadBool=false;
            }
        })); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T19:53:27.290

最好的地方根本就没有。由于程序意外中断以挽救可以挽救的东西，关闭挂钩只是最后的手段。

相反，您应该组织您的代码，以便有一个明确定义的入口点、主体和出口点。然后，您可以在退出点停止线程。

# regex - Emacs 调用对齐正则表达式

> ID：12885916
> 
> 赞同：3
> 
> 时间：2012-10-14T19:50:24.980
> 
> 标签：regex, function, emacs, alignment

我正在尝试将参数传递给 Emacs (Lisp) 中的 align-regexp 函数：

```
(defun align-on-comment-char ()
  (interactive)
  (align-regexp (region-beginning) (region-end) "#")
) 
```

我实际上想专门为我的所有模式执行此操作，对于每种模式，我想绑定一个“对齐到注释字符（`;`对于 emacs lisp，`%`对于 Latex，`#`对于 R）”。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:00:33.507

`comment-start`并且`comment-end`是获取当前模式的注释字符串的常用变量。

在调用 align-regexp 时，您还需要附加一些魔法来获得正确的匹配。像奥列格一样，我不得不通过查看源代码来解决这个问题。这里的错误消息并不是真正的描述性，我真的认为这值得一个错误报告或至少一个文档修复。

```
(defun align-comment (beg end)
  (interactive "r")
  (align-regexp beg end (concat "\\(\\s-*\\)" comment-start))
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T20:16:04.423

你应该稍微改变你的代码。

例如像这样：

```
(defun align-on-comment-char (beg end)
  (interactive "r")
  (align-regexp beg end "\\(\\s-*\\)#")
) 
```

魔术字符串`"\\(\\s-*\\)"`取自`align-regexp`.

如果您想为所有模式使用单一功能，请使用`comment-start`@pmr 指出的变量。

```
(align-regexp beg end (concat "\\(\\s-*\\)" comment-start)) 
```

# gps - 当电池电量不足或连接到电源时更改 GPS minTime，requestLocationUpdates

> ID：12885927
> 
> 赞同：4
> 
> 时间：2012-10-14T19:51:47.010
> 
> 标签：gps, location, locationmanager, locationlistener

我将 locationManagers 设置如下：

```
long MIN_TIME_BETWEEN_GPS_UPDATES = 0; // in min! 
long MAX_TIME_BETWEEN_GPS_UPDATES = 1; //in min!
int DISTANCE_BETWEEN_UPDATES = 0;
mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,(MAX_TIME_BETWEEN_GPS_UPDATES * 60 * 1000), DISTANCE_BETWEEN_UPDATES, mlocListener); 
```

现在，当连接充电器时，我想减少 minTime

```
mlocManager.removeUpdates(mlocListener);
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,(MIN_TIME_BETWEEN_GPS_UPDATES * 60 * 1000), DISTANCE_BETWEEN_UPDATES, mlocListener); 
```

当我断开充电器时，我想增加 minTime 以便 gps 每分钟给我一个更新。

```
mlocManager.removeUpdates(mlocListener);
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,(MAX_TIME_BETWEEN_GPS_UPDATES * 60 * 1000), DISTANCE_BETWEEN_UPDATES, mlocListener); 
```

因此，每次我想要更改 minTime 时，我都会调用 .removeUpdate 函数，然后再次调用 .requestLocationUpdates 函数来更改设置。

但是，这对我不起作用。如果我想再次更改设置，我需要打开 gps 并重新打开。

任何人在更改 locationManager 的设置 (minTime) 以更改位置更新之间的间隔时遇到问题？

# ruby-on-rails - 锚标记Rails中的无序列表

> ID：12885929
> 
> 赞同：0
> 
> 时间：2012-10-14T19:52:08.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试将锚标记放在导轨中的无序列表周围。我在网上找不到任何东西。在 Rails 中不可能做到这一点，还是非常微不足道，我错过了一个明显的事情。我对 ruby​​-on-rails 语法不太熟悉，因为我是 Rails 的新手。

这是我想要实现的目标：

```
<article id="bookmark-list">
    <h1>Popular Bookmark List</h1>

    <div class="bookmark">
        <a href="../bookmarks/show.html">
            <ul>    
                <li>Article</li>
                <li>How did they find that monkey?</li>
                <li>&bigstar;&bigstar;&bigstar;&star;&star;</li>
            </ul>
        </a>
    </div>

    <div class="bookmark">
        <a href="../bookmarks/show.html">
            <ul>    
                <li>Article</li>
                <li>How did they find that monkey?</li>
                <li>&bigstar;&bigstar;&bigstar;&star;&star;</li>
            </ul>
        </a>
    </div>
</article> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:02:27.343

如果您使用的是 ERB，那么您的*视图*应如下所示

```
<% @items.each do |item| %>
  <div class="bookmark">
  <a href="<%= item.link %>">
    <ul>
      <li><%= item.title %></li>
    </ul>
  </a>
  </div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:55:37.723

你需要做这样的事情：

```
<%= link_to(@profile) do %>
  <strong><%= @profile.name %></strong> -- <span>Check it out!</span>
<% end %>
# => <a href="/profiles/1">
       <strong>David</strong> -- <span>Check it out!</span>
     </a> 
```

[来源](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

# c# - 仅获取在程序集中定义的类型

> ID：12885932
> 
> 赞同：3
> 
> 时间：2012-10-14T19:52:36.373
> 
> 标签：c#, .net-4.0

> **可能重复：**
> [调用 Assembly.GetTypes() 时如何防止 ReflectionTypeLoadException](https://stackoverflow.com/questions/7889228/how-to-prevent-reflectiontypeloadexception-when-calling-assembly-gettypes)

我想获取程序集中的所有类型。但是，我收到以下错误：

> System.Reflection.ReflectionTypeLoadException：无法加载一种或多种请求的类型。

问题是我从中获取类型的程序集引用了另一个仅在生产环境中可用而不在单元测试环境中可用的程序集。

那么，有什么方法可以过滤 GetTypes 或类似的东西，只返回程序集中实际定义的类型而不获取类型加载异常？

例如替换

```
.Assembly.GetTypes().Where(t => t.Namespace.Equals(... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T20:13:38.420

`GetTypes`仅获取程序集中定义的类型，但是，您可能无法加载它们，因为它们引用了您尚未加载或找不到的程序集中的类型。例如，如果您尝试加载派生自此其他程序集中的类的类型，那么您将获得一个`ReflectionTypeLoadException`. `Types`您可以从异常对象的属性中获取您确实加载的类型。请注意，`null`您无法加载的每种类型都有一个，并且该`LoaderExceptions`属性对它们中的每一个都有一个例外。

```
public static Type[] GetTypesLoaded(Assembly assembly)
{
    Type[] types;
    try
    {
      types = assembly.GetTypes();
    }
    catch (ReflectionTypeLoadException e)
    {
      types = e.Types.Where(t => t != null).ToArray();
    }

    return types;    
} 
```

# android - 有没有办法使用 webview 通过网络加载 html 页面？

> ID：12885935
> 
> 赞同：2
> 
> 时间：2012-10-14T19:52:57.570
> 
> 标签：android

所以我对android编程很陌生，需要将当前嵌入基本程序的预先存在的登录系统转换为android。基本上它只是网络上嵌入的一些文件，这些文件完成了所有工作。不幸的是，目前我无权访问这些文件，因此我无法将它们存储在本地并以这种方式在 webview 中使用它们。我真的找不到像这样的另一个案例，所以我希望有更多经验的人可以为我指出正确的方向或帮助我。我可能遗漏了一些东西，所以如果有人需要更多信息，请随时询问。提前致谢。

# java - Eclipse - 另一个项目中的参考文件

> ID：12885950
> 
> 赞同：5
> 
> 时间：2012-10-14T19:53:51.657
> 
> 标签：java, eclipse, file, relative-path

**编辑：**我在帖子底部的解决方案。

我有 2 个项目在 Eclipse 中共享相同的 XML/XSD 数据。我尝试了许多不同的方法将数据分解为一个单独的项目，然后通过各种方法引用它，但运气不佳。我的目标是，我可以分别为每个项目单击在 Eclipse 中运行，并且它们都从相同的数据加载。

最终构建项目时，将有 3 个 jars（两个项目，+一个 lib），它们将与 xml 和 xsd 文件夹位于同一目录中。因此，任何对 XSD/XML 的文件引用当前都采用如下格式：

```
File file = new File("xml/pixtilemaps.xml"); 
```

这在 eclipse 中不起作用，但在导出期间起作用，因为文件结构是合理的。我尝试在每个项目中使用虚拟文件夹，但看起来对相关文件的运行时引用不像我期望的那样使用虚拟文件夹。我尝试将每个都添加为链接资源，在构建路径上添加项目等，但无论我做什么，它似乎都没有将 xml 文件夹视为相对文件夹。我收到如下错误：file:/F:/workspace/com.myoid.editor/xsd/pixtilemaps.xsd 不存在。因为它与项目相关。我也试图找到一个运行配置解决方案，但显然有一些我不明白要让它以我想要的方式工作。

总而言之，在第三个 Eclipse 项目中有一个 xsd 文件夹，xml 文件夹，我希望 1 和 2 能够通过相对文件路径访问，例如

```
File file = new File("xml/pixtilemaps.xml"); 
```

**我如何修复它：**

好的.. 所以.. 也许有更好的解决方案，但这是我想出的... 在运行配置下的 Eclipse 中，您可以指定运行启动的工作目录。因此，我将两个项目的所有 xml/xsd 放在同一个“工作目录”中。在每个项目的运行配置中，我将工作目录指向第三个项目，中提琴，它就像我预期的那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:59:03.337

在前两个项目的构建路径中添加第三个项目作为`project reference`.

使用[**ClassLoader.getResourceAsStream**](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)代替`File`前两个项目，如下所示：

```
 this.getClass().getClassLoader().getResourceAsStream("/xml/pixtilemaps.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:05:16.690

您是否尝试通过项目菜单 -> 属性 -> java 构建路径 -> 添加项目来引用项目 1 和项目 2 中的项目 3？

# android - 无法在 Android 中创建带有子文件夹的 txt 文件

> ID：12885958
> 
> 赞同：0
> 
> 时间：2012-10-14T19:55:03.410
> 
> 标签：android, file

各位程序员。Cuold 你可以看看这个简单的代码片段并告诉我这里有什么问题吗？

```
File dir = new File(Environment.getExternalStorageDirectory() + "/asteroids/modules"); 
File file = new File(Environment.getExternalStorageDirectory() + "/asteroids/modules/" + fileName);             
if (!file.exists()) {     
    dir.mkdir();
    file.createNewFile();              
} 
```

我继续`ENOENT (No such file or directory)`前进`file.createNewFile();`

我只想在我的 SD 卡上的 2 个子文件夹中创建一个简单的 txt 文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:02:31.043

可能的情况是该`asteroids`目录不存在，因此您无法`modules`在其中创建目录。

用于`dir.mkdirs()`确保所有父目录也被创建。

# ocaml - 如何构建 OCaml 交叉编译器

> ID：12885960
> 
> 赞同：50
> 
> 时间：2012-10-14T19:55:05.213
> 
> 标签：ocaml, cross-compiling

在找到为目标机器[生成合适的配置文件](https://stackoverflow.com/a/12877685/1683555)的方法之后，仍然必须构建交叉编译器本身。[如果主机和目标系统差异太大，使用此处描述](https://stackoverflow.com/a/12737332/1683555)的 1 1/2 构建的方法（以及更多详细信息，请参见[此处](http://psellos.com/ocaml/compile-to-iphone.html)）似乎不起作用。这是构建脚本的更改部分（可以通过 获取`$ svn cat svn://svn.psellos.com/trunk/ocamlxarm/3.1/xarm-build`）

```
# Small steps
config1 () {
    # Configure for building bytecode interpreter to run on Intel OS X.
    # But specify * architecture for assembly and partial link.
    echo 'xarm-build: ----- configure phase 1 -----'
    ./configure \
            -prefix "" \
            -no-curses \
            -no-tk \
            -no-graph \
            -as "" \
            -aspp ""\
            -partialld ""
    # Post-modify config/Makefile to select the * back end for
    # ocamlopt (to generate * assembly code).
    $SED -i'.bak'\
        -e '1i\# modified by xarm-build for OCamlXARM' \
        -e 's/^ARCH[    ]*=.*/ARCH=/' \
        -e 's/^MODEL[    ]*=.*/MODEL=/' \
        config/Makefile
        #-e 's/^SYSTEM[      ]*=.*/SYSTEM=/' \
    $SED -i'.bak'\
        -e '1i\/* modified by xarm-build for OCamlXARM*/' \
        -e 's/^#define[     ][  ]*HAS_STACK_OVERFLOW_DETECTION.*$//' \
        config/s.h

    # Post-modify utils/config.ml to tell ocamlopt to create *
    # binaries for itself.  Also tell ocamlc and ocamlopt to use *
    # architecture when compiling C files.
    make utils/config.ml 
    $SED -i'.bak'\
        -e 's#let[  ][  ]*mkexe[    ]*=.*#let mkexe ="'"$CC"'"#' \
        -e 's#let[  ][  ]*bytecomp_c_compiler[  ]*=.*#let bytecomp_c_compiler ="'"$CC"'"#' \
        -e 's#let[  ][  ]*native_c_compiler[    ]*=.*#let native_c_compiler ="'"$CC"'"#' \
        utils/config.ml
}

build1 () {
    # Don't assemble asmrun/*.S for Phase 1 build.  Modify Makefile
    # temporarily to disable.  Be really sure to put back for Phase 2.
    echo 'xarm-build: ----- build phase 1 -----'
    trap 'mv -f asmrun/Makefile.aside asmrun/Makefile' EXIT
    mv -f asmrun/Makefile asmrun/Makefile.aside
    $SED -e '/^[    ]*ASMOBJS[  ]*=/s/^/#/' \
        -e 's#^include[     ][  ]*../config/Makefile#include ../config/Target/Makefile#' \
        asmrun/Makefile.aside > asmrun/Makefile
    make world && make opt
    mv -f asmrun/Makefile.aside asmrun/Makefile
    trap - EXIT
} 
```

编译卡在*stdlib*子文件夹中，其中调用约定的断言失败。

```
let loc_external_arguments =
  match Config.system with
  | "rhapsody" -> poweropen_external_conventions 0 7 100 112
  | "elf" | "bsd" -> calling_conventions 0 7 100 107 outgoing 8
  | _ -> assert false 
```

为了达到这一点，必须修改*amsrun/Makefile*以使用交叉编译工具链，并且`HAS_STACK_OVERFLOW_DETECTION`必须从*config/sh*中删除，因为否则无法编译*amsrun/signals_asm.c 。*

那么有没有办法使这项工作，或者以[这种方式](http://brion.inria.fr/gallium/index.php/CrossCompiler)的其他方法更适合（并与 OCaml 的 4.00.0 版本一起使用）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-11T07:48:40.047

这个问题已经回答了自己……以一种相当奇怪的方式。它真正要求的是（在 2012 年）针对 Ocaml 4.x 版的 iOS（未指定版本）的交叉编译器。问题中的代码转储试图将 Jeffrey Scofield 的交叉编译指令和脚本 (ocamlxarm/3.1) 用于 Ocaml 3.1.x，这对 Ocaml 4.0 不太适用。但是问题链接到的[Scofield 的网页](http://psellos.com/ocaml/compile-to-iphone.html)在此期间已经更新（最后一次是在 2014 年 12 月），实际上为 Ocaml 4.0（当前为 ocaml-4.01.0+xarm-4.0.2-v7）提供了解决方案，从而使这里提出的问题（“有没有办法使这项工作”）没有实际意义或相当微不足道。任何一个：

*   下载该网页上当前提供的预构建的[ocaml-4.01.0+xarm-4.0.2-v7.dmg包。](http://psellos.com/pub/ocamlxarm/ocaml-4.01.0+xarm-4.0.2-v7.dmg)请务必阅读使用说明，并使用他的[交叉编译包装脚本](http://psellos.com/pub/ocamlxarm/ocamloptrev)让您的生活更轻松，该脚本可让您在 iOS 7 和 8 目标之间切换。或者，如果您仍然需要从源代码构建 Ocaml 交叉编译器...
*   按照页面“附录：从源代码构建”部分中的说明进行操作（似乎没有 HTML 锚点，抱歉）。不幸的是，这些说明大约有 12 段（9KB 的文本）长，所以我不打算在这里复制它们。它们包括一个链接，指向将OCaml 4.0.1 交叉编译到 iOS[所需的补丁。](http://psellos.com/pub/ocamlxarm/ocamlxarm-4.0.2.diff)希望该网页上所写的正是用于构建上述 ocaml-4.01.0+xarm-4.0.2-v7.dmg 的步骤。但是，由于该 dmg 包没有类似 Apple 等效的[RedHat 样式 SRPM](http://www.rpm.org/max-rpm/ch-rpm-philosophy.html)（Apple 甚至有等效技术吗？），因此无法完全确定用于生成上述 dmg 的步骤完全是在那个网页上转载。*试着自己按照这些步骤来看看它们是否有效。*

 *但是我认为，通过从斯科菲尔德的网页下载预先构建的 4.0.1 二进制文件，从一般意义上的“有没有办法使这项工作”基本上解决了这里提出的问题......在问题中链接。Scofield 的 ocamlxarm 构建系统版本 3.1 无法交叉编译 Ocaml 4.0 的问题应该是目前没人关心的众所周知的问题。我认为，如果 Scofield 的说明或 4.0 补丁不起作用，则应单独询问，因为此处问题中的细节错误似乎与该场景无关。

（如果上面的内容看起来过于迂腐，那主要是由于 mods 的要求，我将我的答案扩展到了目前的状态。）

尽管 OP 可能并不关心我在这一段中要说什么，但考虑到他的问题标题是多么笼统，我会指出还有一个相当新的项目维护一个针对 Android 的 OCaml 交叉编译器，称为[opam-android](https://github.com/whitequark/opam-android). 而这个在 git repo 中将其所有构建位作为脚本，因此可能更容易窃取它是如何完成的。比较这两个交叉编译器的补丁，除了：你需要为特定的目标平台破解它之外，一般来说如何使 OCaml 作为交叉编译器工作并没有太多可以说的。我要说的一件事是，Scofield 的 iOS 补丁比 Android 补丁更具侵入性（而且时间更长）。Scofield 的许多补丁都与寄存器级代码生成有关。我对 iOS 内部的了解还不够，无法说明为什么 iOS 需要这些更改，而 Android 不需要这些更改，即使它们基本上使用相同的 ARM CPU 系列。也许有人应该把这个作为一个真正有趣/不平凡的问题来问，杰弗里斯科菲尔德本人可能会很乐意回答。*

# c# - .net in Coldfusion (8) - “Class My.CSharp.Class not found in the specified assembly list.”

> ID：12885964
> 
> 赞同：0
> 
> 时间：2012-10-14T19:55:52.873
> 
> 标签：c#, .net, coldfusion

我创建了一个类库 (dll)，我想在 Coldfusion 中使用它。该库在从测试控制台应用程序运行时运行良好，但是当我尝试将其加载到 Coldfusion 中时，我收到错误“Integration.Microsoft.Exchange.Email not found in the specified assembly list.”。我对 C# 很陌生，所以我假设我做错了什么，但我不知道它是什么。

冷熔代码：

```
<cfobject 
    action      =   "create"
    type        =   ".net" 
    name        =   "DotNetObject" 
    class       =   "Integration.Microsoft.Exchange.Email"
    assembly    =   "path\to\my\folder\Integration.Microsoft.Exchange.dll"
> 
```

C#代码结构：

```
namespace Integration.Microsoft.Exchange
{
    public class Email
    {
        public static void New ()
        {
        }
    }
} 
```

我尝试了一个不同的dll（仍然通过程序集属性指定），它工作正常。我建立班级的方式有问题吗？

实际的两个 C# 类文件可在此处获得：[http ://www.seedata.co.uk/samples/csharp-exchange-integration/Classes.zip](http://www.seedata.co.uk/samples/csharp-exchange-integration/Classes.zip)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:34:52.297

对于其他遇到 CF 和 .net 问题的人来说，我的问题的最终解决方案非常简单。

1.  在 Visual Studio 中编译时，我没有注意目标 .net 版本（显然我知道，但我这样做时只编写了几个小时的 C# 代码）
2.  虽然我的机器上安装了相关的 .net 版本，但服务器的 .net 版本与我使用的库不兼容

因此，在开发服务器上从 .net 3.0 到 3.5 的简单升级（在 CF8 上不能使用高于 3.5 的任何内容）并将我的 Visual Studio 项目也编译到 3.5 解决了这个问题。

对于任何与此作斗争并想放弃的人来说，一旦你开始工作，这个功能真的非常好！

# php - 在使用 call_user_func_array 调用的方法中使用 $this

> ID：12885968
> 
> 赞同：9
> 
> 时间：2012-10-14T19:56:04.930
> 
> 标签：php, arrays, oop

我有一个方法，简化如下：

```
class Foo {

   public function bar($id) {
      // do stuff using $this, error occurs here
   }

} 
```

像这样称呼它效果很好：

```
$foo = new Foo();
$foo->bar(1); 
```

但是，如果我使用 调用它[`call_user_func_array()`](http://php.net/call_user_func_array)，如下所示：

```
call_user_func_array(array("Foo", "bar"), array('id' => 1)); 
```

应该相等*，*我收到以下错误：

> 致命错误：不在对象上下文中时使用 $this

*（`$this`未定义）*

为什么是这样？有什么我想念的吗？我应该如何做到这一点，以便我仍然可以`$this`在被调用的方法中使用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T19:58:00.047

`array("Foo", "bar")`等于`Foo::bar()`，即一个静态方法 - 这是有道理的，因为`$foo`它没有在任何地方使用，因此 PHP*无法*知道要使用哪个实例。

你想要的是`array($foo, "bar")`调用*实例*方法。

有关各种可调用对象的列表，请参见[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)。

* * *

您还需要将参数作为索引数组而不是关联数组传递，即`array(1)`而不是`array('id' => 1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-27T18:25:43.067

您可以使用以下方法执行相同操作：

```
(new $className())->$methodName(...$arrayWithParams) 
```

# c++ - GLUT 使用 Code::Blocks 编译错误

> ID：12885980
> 
> 赞同：2
> 
> 时间：2012-10-14T19:57:47.990
> 
> 标签：c++, opengl, compilation, glut, codeblocks

一周前，当我第一次尝试使用 GLUT 并按照[本教程](http://www.sci.brooklyn.cuny.edu/~goetz/codeblocks/glut/)进行操作时，它没有任何错误。现在，一周后，我安装了相同的软件，相同的库，但每次我尝试编译项目时都会遇到这些错误（它会突出显示 glut.h 文件中的一行）：

```
obj\Debug\main.o(.text+0x1c)||In function `glutInit_ATEXIT_HACK':|
C:\Program Files\CodeBlocks\MinGW\include\GL\glut.h|486|undefined reference to `__glutInitWithExit@12'|
obj\Debug\main.o(.text+0x3d)||In function `glutCreateWindow_ATEXIT_HACK':|
C:\Program Files\CodeBlocks\MinGW\include\GL\glut.h|503|undefined reference to `__glutCreateWindowWithExit@8'|
obj\Debug\main.o(.text+0x5d)||In function `glutCreateMenu_ATEXIT_HACK':|
C:\Program Files\CodeBlocks\MinGW\include\GL\glut.h|549|undefined reference to `__glutCreateMenuWithExit@8'| 
```

我卸载了 Code:Blocks，删除了 GLUT 文件（glut.h、glut32.dll、glut.a）并重新安装了所有内容，但我仍然遇到同样的错误。我完全确定我的链接器设置没问题，因为我已经按照教程进行操作。我也尝试了其他教程，但得到相同的结果，一堆错误。

我做错了什么，我该如何解决？

编辑：固定！所需要的只是`#include <GL/gl.h>`在包括`GL/glut.h`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-03T15:23:14.997

我必须在`#include <GL/gl.h>`之前添加`#include <GL/glut.h>`。我不知道为什么，但现在所有的例子似乎都编译得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-12T11:50:08.237

我不知道为什么我的评论被删除了，但最后它确实通过添加 windows.h 库来工作......

# perl - 将文本文件中相同键的多个值分组以形成单个键值对

> ID：12885983
> 
> 赞同：0
> 
> 时间：2012-10-14T19:58:05.307
> 
> 标签：perl, bash, shell, awk

首先，如果这个问题有更好的标题，我全神贯注！

有没有更好的方法来做到这一点？

我有一个`input.txt`这种格式的数据文件：

```
field1=value1
field2=value2
field3=value3
.
.
.
field1=value4
field2=value5
field3=value6 
```

依此类推……最后想得到：

```
field1,value1 value4 ... valueM
field2,value2 value5 ... valueN
field3,value3 value6 ... valueO 
```

我试过的：

1.  生成唯一键：`cat input.txt |awk -F"=" '{print $2}' |sort -u > data_key`

2.  循环遍历行`data_key`

> ```
> #!/bin/bash
> 
> file=input.txt
> keys=`cat data_key`
> 
> for value in $keys
> do
>   output=`cat $file |grep $value |awk -F"=" '{print $2}' |tr -s '[:space:]' '[ *]' `
>   echo $value, $output
> done 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:07:22.037

Perl 解决方案。它对字段进行哈希处理，每个字段都与一个值数组相关联。不过，输出行的顺序是随机的。

```
perl -e 'while (<>) {
             chomp;
             ($f, $v) = split /=/, $_, 2;
             push @{ $h{$f} }, $v;
         }
         print "$_,@{ $h{$_} }\n" for keys %h;
    ' input.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:09:13.737

以下基于 awk 的解决方案应该可以工作。这使用由字段名称键入的关联数组。遇到值时将它们连接起来。

```
awk -F'=' '{z[$1]=z[$1]" "$2} END{for(i in z){print(i","z[i])}}' file_name.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:26:27.740

```
awk -F"=" '{a[$1]=a[$1]","$2;}END{for(i in a)print i,a[i];}' your_file 
```

测试如下：

```
> cat temp
field1=value1
field2=value2
field3=value3
field1=value4
field2=value5
field3=value6
> awk -F"=" '{a[$1]=a[$1]","$2;}END{for(i in a)print i,a[i];}' temp
field1 ,value1,value4
field2 ,value2,value5
field3 ,value3,value6
> 
```

# sql - SQL Server 中的字符串到日期时间

> ID：12885986
> 
> 赞同：1
> 
> 时间：2012-10-14T19:58:49.313
> 
> 标签：sql, sql-server, date, type-conversion, string-formatting

我有一列 varchar 类型，它包含大量数据（我们正在谈论数百万条记录）。我只选择日期列，如下所示：

```
select Value from mytable where ISDATE(mytable.Value) = 1 
```

我想将结果中的所有值转换为`MM/dd/yyyy HH:mm:ss tt`

请注意，这些值具有许多不同的格式。

我怎样才能在 SQL Server 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:04:12.410

试试这个

```
SELECT CONVERT(VARCHAR(10), CAST(value as datetime), 101) + ' ' 
     + substring(convert(varchar(20), CAST(value as datetime), 9), 13, 5) 
     + ' ' + substring(convert(varchar(30), CAST(value as datetime), 9), 25, 2) As dateValue
FROM mytable 
WHERE ISDATE(mytable.Value) = 1 
```

有关 SQL SERVER 日期格式的更多信息

[SQL Server 日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)

# javascript - 了解 JavaScript 作用域

> ID：12885988
> 
> 赞同：0
> 
> 时间：2012-10-14T19:59:14.750
> 
> 标签：javascript, scope

我正在尝试更好地理解 JavaScript 范围，但不确定为什么某些东西不起作用。

我已经定义了一个这样的对象：

```
var my_obj =
{
    foo:function()
    {
        this.bar()
    },
    bar:function()
    {
        console.log('hello world!');
    }
}
my_obj.foo(); 
```

但我收到错误“TypeError：this.bar is not a function”，我不明白为什么。

我也在尝试使用我之前在这个新块中编写的另一段代码，但这也不能正常工作。这里会发生以下情况：

```
var my_obj =
{
    foo:function()
    {
        feedback('hello world!');
    }
}
my_obj.foo();

feedback = function(msg,y)
{
     if( !y )
     {
         setTimeout(function()
         {
             feedback(msg,1);
         } , 1000 );
         return;
     }
     else
     {
         console.log(msg);
     }
} 
```

这曾经可以正常工作（如果我从全局范围内调用了 feedback()），但是现在，从 foo 调用反馈很好，但是除非我从 setTimeout 中调用 window.feedback()，否则对反馈的超时调用会失败。

关于这些问题的任何想法？

谢谢

更新

这是我的代码（这将给出两个错误）：http: [//jsbin.com/ecotoj/12/edit](http://jsbin.com/ecotoj/12/edit)

感谢 Asad 向我展示了在 $.ajax 中更改了“this”的上下文的问题（并且您可以在 $.ajax 中使用 jQuery 的上下文选项重新定义它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:05:24.327

在第二个问题中，您在定义之前调用反馈。`my_obj.foo()`定义后尝试调用`feedback`。此外，确保所有这些都发生在全局范围内（因为您试图引用全局对象`feedback`）

# templates - Handlebar.js 预编译模板；这是什么意思？

> ID：12885992
> 
> 赞同：2
> 
> 时间：2012-10-14T19:59:30.763
> 
> 标签：templates, compilation, express, handlebars.js

我对[预编译 Handlebar.js 模板](http://handlebarsjs.com/precompilation.html)的实际含义有点困惑。由于车把需要数据，即`<tag>{{title}}</tag>`我通过 Express.js 发送的数据，即使有预编译的模板意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T20:09:42.597

在这种情况下编译意味着将您的模板字符串转换为 Javascript 函数。对于您的示例，生成的函数体将类似于`return '<tag>' + title + '</tag>'`. 这比使用正则表达式处理模板要快。这也意味着编译后的模板可以在没有整个 Handlebars 库的情况下在浏览器中使用。

# wpf - SMO：服务器“。”的还原失败

> ID：12885994
> 
> 赞同：3
> 
> 时间：2012-10-14T19:59:42.193
> 
> 标签：wpf, sql-server, c#-4.0, restore, smo

我正在使用以下 SMO 代码尝试恢复 SQL Server 数据库：

```
Server _server;
ServerConnection _conn;

public void Restore(string destinationPath)
{
   Restore res = new Restore();
   _conn = new ServerConnection { ServerInstance = "." };
   _server = new Server(_conn);

   try
   {
       string fileName = destinationPath;
       const string databaseName = "RelationAtOffice";

       res.Database = databaseName;
       res.Action = RestoreActionType.Database;
       res.Devices.AddDevice(fileName, DeviceType.File);

       res.PercentCompleteNotification = 10;
       res.ReplaceDatabase = true;
       res.PercentComplete += new PercentCompleteEventHandler(ProgressEventHandler);
       res.SqlRestore(_server);

       System.Windows.Forms.MessageBox.Show("Restore of " + databaseName + " Complete!", "Restore", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }
    catch (SmoException exSMO)
    {
       System.Windows.Forms.MessageBox.Show(exSMO.ToString());
    }
    catch (Exception ex)
    {
        System.Windows.Forms.MessageBox.Show(ex.ToString());
    }
} 
```

为什么将以下代码链接到正确答案。但是我的代码不起作用？代码喜欢在一起。我使用了 wpf 和以下链接用户 winapp

[关联](http://www.codeproject.com/Articles/123441/SQL-Server-2008-Backup-and-Restore-Databases-using)

SMO 错误：

> Microsoft.SqlServer.Management.Smo.FailedOperationException：服务器“MORTEZA”的还原失败。
> ---> Microsoft.SqlServer.Management.Smo.SmoException：
> System.Data.SqlClient.SqlError：无法获得独占访问，因为数据库正在使用中。 在 Microsoft.SqlServer.Management.Smo.BackupRestoreBase.ExecuteSql （服务器服务器，StringCollection 查询）在 Microsoft.SqlServer.Management.Smo
> 的 Microsoft.SqlServer.Management.Smo.ExecutionManager.ExecuteNonQueryWithMessage（StringCollection 查询，ServerMessageEventHandler dbccMessageHandler，布尔错误AsMessages） 。 Restore.SqlRestore（服务器 srv）
> 
> 在 RelationAtOfficeApp.Admin.AdministratorMainPage.Restore(String destinationPath) 在 E:\prozhe\RelationAtOfficeApp\RelationAtOfficeApp\RelationAtOfficeApp\Admin\AdministratorMainPage.xaml.cs:line 268

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T20:32:39.330

最可能的原因是：

*   您已从服务器备份 - 备份`Data.mdf`到`Data_Log.ldf`文件`Backup.bak`中

*   在同一台（服务器）机器上，您现在正尝试恢复同一个数据库

在这种情况下，`.mdf`and`.ldf`应该被覆盖——但这不会发生，因为 SQL Server 仍然控制着那个数据库——所以恢复失败，因为数据和日志文件不能被覆盖。

有两种方法可以解决这个问题：

1.  定义“文件重定位”，例如在恢复时定义一个新的数据和日志文件名。这样，您的数据库现在已恢复，并且文件以新名称放置在 SQL Server 数据目录中。

    这需要类似他的代码：

    ```
    ....  
    res.Devices.AddDevice(fileName, DeviceType.File);

    // define "file relocation" - for all "logical" files in a SQL Server database,
    // define a new physical location where the file will end up at          
    RelocateFile relocateDataFile = new RelocateFile("Data", @"(your data dir)\RestoredData.mdf");
    RelocateFile relocateLogFile = new RelocateFile("Log", @"(your log dir)\Data\RestoredData_log.ldf");

    res.RelocateFiles.Add(relocateDataFile);
    res.RelocateFiles.Add(relocateLogFile); 
    ```

2.  如果您不想创建新文件，您应该能够通过设置向 SMO Restore 指定要使用恢复操作替换现有数据库：

    ```
    res.ReplaceDatabase = true; 
    ```

    打电话之前

    ```
    res.SqlRestore(_server); 
    ```

**更新：**我在示例中使用的逻辑文件名当然只是示例 - 在您的情况下，您的备份文件很可能包含*其他逻辑文件名*，您需要在代码中使用这些文件名。

您可以通过以下两种方式找出您的数据库包含哪些逻辑文件名：

1.  正如错误消息中明确指出的那样 - 您可以在 SQL Server Management Studio 中使用命令`FILELISTONLY`上的选项，从而在还原文件之前检查文件。尝试这样的事情：`RESTORE``.bak`

    ```
    RESTORE FILELISTONLY
    FROM DISK = N'path-and-full-file-name-of-your-bak-file-here.bak' 
    ```

    这将为您提供一个小网格，其中包含文件中包含的逻辑和物理文件名`.bak`。

2.  如果您的数据库仍然连接到您的服务器，您可以使用`Object Explorer`SQL Server Management Studio 中的 找出数据库的逻辑文件名是什么；右键单击您选择的数据库，然后您将看到此对话框，在该`Files`部分中，您将获得所需的信息：

![在此处输入图像描述](../Images/0046c1946ac464db41ae5064c9ca1998.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T14:17:40.037

除了[marc-s](https://stackoverflow.com/users/13302/marc-s)的回答之外，您还可以在之前添加一行代码来解决“正在使用的数据库”错误`.SqlRestore()`：

```
_server.KillAllPrecesses("MyDatabaseName");
res.SqlRestore(_server); 
```

这模拟了与 Sql Server Management Studio 还原完全相同的行为：

[![在此处输入图像描述](../Images/61a425aca88525302c017bc92ff03c9d.png)](https://i.stack.imgur.com/UPyCR.jpg)

# ruby-on-rails - Capybara + RSpec 在新型号规格上的问题

> ID：12885996
> 
> 赞同：1
> 
> 时间：2012-10-14T19:59:46.677
> 
> 标签：ruby-on-rails, rspec, capybara

所以我在没有测试的情况下制作了我的第一个 Rails 应用程序。现在我正在重做应用程序并首先进行测试。我正在为我正在创建的模型（任务）制定请求规范。我正在测试用于创建新任务的表单。

任务数应该改变 1（即保存了一个新任务），但它没有改变。我基本上遵循了 Michael Hartl 的代码。

```
Error:
1) Task Pages Creating a Task with valid information creates a Task
   Failure/Error: expect { click_button "Create task" }.to change(Task, :count).by(1)
   count should have been changed by 1, but was changed by 0
# ./spec/requests/tasks_pages_spec.rb:22:in `block (4 levels) in <top (required)>' 
```

相关代码：型号

```
class Task < ActiveRecord::Base
  attr_accessible :begin_time, :day, :end_time, :gear, :notes, :preset, :room, :setup,                  
  :strike

  validates :room, presence: true
  validates :begin_time, presence: true
  validates :end_time, presence: true
  validates :gear, presence: true
  validates :day, presence: true
end 
```

控制器

```
def new
  @task = Task.new
end

def create
  @task = Task.new(params[:task])

  if @task.save
    redirect_to root_path
  else
    render 'new'
  end
end 
```

集成测试

```
require 'spec_helper'

describe "Task Pages" do

  subject { page }

  describe "Creating a Task" do

    let(:submit) { "Create task" }
    before { visit new_task_path }

    describe "with valid information" do 
      before do 
        fill_in "Day",    with: Date.today
        fill_in "Room",   with: "6W-002"
        fill_in "Begin",  with: Time.now
        fill_in "End",    with: 1.hour.from_now
        fill_in "Gear",   with: "LCD"
      end

      it "creates a Task" do 
        expect { click_button "Create task" }.to change(Task, :count).by(1)
      end

    end
  end
end 
```

和形式

```
<%= form_for(@task) do |t| %>

  <%= t.label :day %>
  <%= t.text_field :day %>

  <%= t.label :room %>
  <%= t.text_field :room %> 

  <%= t.label :begin_time, "Begin" %>
  <%= t.text_field :begin_time %> 

  <%= t.label :end_time, "End" %>
  <%= t.text_field :end_time %> 

  <%= t.label :gear %>
  <%= t.text_field :gear  %> 

  <%= t.label :day %>
  <%= t.text_field :day %> 

  <%= t.submit "Create task", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:22:14.587

您的表单有`:day`两次该字段。第一个可能由您的测试填充，然后被第二个中的空值破坏。

# actionscript-3 - 如何访问蒙版层内的影片剪辑

> ID：12885997
> 
> 赞同：1
> 
> 时间：2012-10-14T20:00:24.850
> 
> 标签：actionscript-3, flash, actionscript

我有动作脚本代码层。部分代码示例..

```
var allMC = new Array();
allMC[0] = allitems_1.item_1;
allMC[1] = allitems_1.item_2;
allMC[2] = allitems_1.item_3;
allMC[3] = allitems_1.item_4; 
```

此代码将对 mc 的引用存储在数组中。一切都很完美。

但是当我将此层转换为遮罩层并运行闪光灯时，它会说：

场景 1，“背景”层，第 1 帧，第 56 行 1120：访问未定义的属性 allitems_1。

*allitems1 也是我为舞台上的影片剪辑实例设置的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:48:47.067

您可以将您`ActionScript`的蒙版图层放在单独的图层上。在时间轴上工作时，通常被认为是一种很好的做法，专门为您制作一个图层`ActionScript`并进行标记。