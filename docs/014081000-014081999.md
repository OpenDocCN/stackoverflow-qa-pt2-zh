# StackOverflow 问答 14081000-14081999

# c++ - Visual Studio: how to handle project dependencies right?

> ID：14081002
> 
> 赞同：9
> 
> 时间：2012-12-29T11:01:44.703
> 
> 标签：c++, visual-studio, dependencies, project

I'm writing a program (in C++), which requires several VS projects, that I would like to put in the same VS solution. I'm using Visual Studio 2010.

Here is simply the wanted architecture : I'm using a 3rd party library (A) for my project, I have all the headers and .lib files, that I compiled with the source code.

With this library, I'm writing my own classes and function. That is my project (B).

Then I would like to develop two interfaces for the users: A command line interface (C1) and a GUI interface (C2), that are using the classes and functions defined in (B).

```
A <-- B <-- C1
        <-- C2 
```

I'm new to Visual Studio, and I don't know how to handle these dependencies properly. Shall I use project dependencies (in the solution properties) or references (in the project properties) ? In fact, I'm not sure what dependencies and references are doing exactly.

Shall I compile B into some .lib library, or do something else ? If I do so, have to link only B.lib to my C1 and C2 projects, or should I also link A.lib (in other words, is the content of A.lib included somehow in B.lib ?). And of course I would want the dependencies to be handle well, in order to always work with the up-to-date version of each project.

Is there a good way of doing it ? Thank's in advance, and have a nice week-end :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-11T03:12:23.913

是的。使用项目参考。

[这是微软的官方回答](http://msdn.microsoft.com/en-us/library/ee817675.aspx)。虽然该页面讨论的是 .NET，但对于本机项目来说也几乎相同。

TL;DR 版本：

项目参考的优势：

1.  他们在加载了解决方案和项目集的所有开发工作站上工作。这是因为项目文件中放置了一个项目全局唯一标识符 (GUID)，该文件在当前解决方案的上下文中唯一标识了引用的项目。
2.  它们使 Visual Studio .NET 构建系统能够跟踪项目依赖关系并确定正确的项目构建顺序。
3.  它们避免了引用程序集在特定计算机上丢失的可能性。
4.  它们会自动跟踪项目配置更改。例如，当您使用调试配置进行构建时，任何项目引用都引用由引用的项目生成的调试程序集，而它们引用发布配置中的发布程序集。这意味着您可以跨项目自动从调试切换到发布版本，而无需重置引用。
5.  它们使 Visual Studio .NET 能够检测和防止循环依赖。

[这是关于VS 2010 中的项目设置更改的](http://blogs.msdn.com/b/vcblog/archive/2010/02/16/project-settings-changes-with-vs2010.aspx)另一篇不错的文章，其中还指出引用比项目依赖项更受欢迎。其实文章里还说VS2010解决方案转换器会自动检测Project依赖，并将其更改为Project引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-12T09:15:29.170

我工作的公司的政策是使用项目参考。

项目引用更有用，因为它们保留了给定项目依赖于项目的项目信息。如果您随后必须将项目添加到新解决方案中，则不必返回旧解决方案文件来找出给定项目所依赖的项目。

# python - Python：读取具有树深度级别的列表并输出类似嵌套列表的树

> ID：14081005
> 
> 赞同：0
> 
> 时间：2012-12-29T11:01:56.197
> 
> 标签：python, list, recursion, tree, nested

所以这是我的问题：

我已成功将行缩进级别的文本文件解析为如下列表：

```
A = [[1,'a'],[1,'b'],[2,'c'],[2,'d'],[1,'e'],[2,'f']] 
```

list 中的每个元素`A`都是一个长度为 2 的列表。每个元素对应于从文本文件中读取的一行。`A[x][0]`是`indent level`文本文件中`A[x][1]`的行的，是行的内容，其中`x`是 中任何元素的索引`A`。

例如`A[1] = [1,'b']`，`1`缩进级别和`'b'`行文本在哪里。 `A[2]`并且`A[3]`是`A[1]`ie 子缩进行的子代。

我正在尝试获取将采用以下格式的输出列表：

```
B = [['a'],['b',['c','d']],['e',['f']]] 
```

这样，当我迭代时，`B[x][0]`我将只获得第一级缩进项，并且能够递归地转到每个元素。

该算法应该能够处理无限深度，即如果`A[3]`后面跟着元素`[3,'z']`它应该是一个嵌套列表`A[3]`。

我已经探索了一些解决类似问题和使用的其他帖子，`itertools.groupby`但不幸的是，我无法充分理解它们，无法将其应用于我的问题。

真的很感谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:24:50.053

试试这个简单的基于堆栈的算法：

```
A = [[1,'a'],[1,'b'],[2,'c'],[2,'d'],[1,'e'],[2,'f']]
stack = [ [] ]
for level, item in A:
    while len(stack) > level:
        stack.pop()
    while len(stack) <= level:
        node = (item, [])
        stack[-1].append(node)
        stack.append(node[1])

result = stack[0] 
```

这将创建一个结构，如：

```
[('a', []), ('b', [('c', []), ('d', [])]), ('e', [('f', [])])] 
```

哪个，IMO，使用起来更方便，但如果需要，将它转换为你的应该没问题：

```
def convert(lst):
    return [ [x, convert(y)] if y else x for x, y in lst]

result = convert(stack[0])
print result
# ['a', ['b', ['c', 'd']], ['e', ['f']]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:39:55.933

递归解决方案，该方法返回输入列表的一部分的格式化列表，该列表位于给定级别和给定级别以下。格式就像列夫描述的那样，因为它是一致的。注意：方法破坏输入列表。

```
A = [[1,'a'],[1,'b'],[2,'c'],[2,'d'],[4,'x'],[5,'y'],[1,'e'],[2,'f']]

def proc_indent(level, input_list):
  if not input_list or level > input_list[0][0]:
    return None
  this_level = input_list.pop(0)[1] if level == input_list[0][0] else None
  up_levels = []
  while True:
    r = proc_indent(level+1, input_list)
    if r is None:
      break
    up_levels.append( r )
  if not up_levels:
    return [this_level]
  up_levels = [i for u in up_levels for i in u]
  return [this_level, up_levels] if this_level else [up_levels]

print proc_indent(0, list(A))  # copy list, since it is destructed in a recursion 
```

# ruby-on-rails - How to get full asset path in rails model

> ID：14081008
> 
> 赞同：3
> 
> 时间：2012-12-29T11:02:10.023
> 
> 标签：ruby-on-rails, ruby, google-maps, gmaps4rails

I'm using `gmap4rails` in my application which says to specify a marker you should define a method in your model. But how can i get full image url for that?

Now I have the following code in my model

```
def gmaps4rails_marker_picture
{
  "picture" => helpers.asset_path("marker.png"),
   "width" => 20,
   "height" => 33
}
end

def helpers
  ActionController::Base.helpers
end 
```

But this only give me path for an image?

I've also tried to do it like this

```
Rails.application.routes.url_helpers.root_url + helpers.image_path("marker.png") 
```

but that gives me an error:

```
Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true 
```

Any way to make this work?

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-13T09:09:51.163

Look at [How to set config.action_controller.default_url_options = {:host = '#''} on per environment basis](https://stackoverflow.com/questions/5691727/how-to-set-config-action-controller-default-url-options-host-on-per). You need to set Rails.application.routes.default_url_options or to pass :host option to root_url(host: 'foo.bar') To set different host option for different environments you can use ./config/environments/xx.rb files

# javascript - 动态更改属性值以更改颜色选择器

> ID：14081010
> 
> 赞同：0
> 
> 时间：2012-12-29T11:02:23.707
> 
> 标签：javascript, jquery, html

我需要动态更改属性值以更改颜色选择器：

```
<input id="uno" type="minicolors" name="123"   data-slider="wheel" /> 
```

这些是等价的

```
$("#uno").val(str[1]);
$("#uno").value(str[1]);
$('input[name="123"]').val(str[1]);
$('input[name="123"]').attr('value',str[1]);
$('input[name="123"]').attr('input',str[1]);
$('INPUT[type=minicolors]').attr('value',str[1]); 
```

该值显示在文本区域中，但不会更改颜色选择器上的滑块！

我试过这个但不起作用！

```
// $('input[name="123"]').attr('rgbObject',str[1]);  // no
// $('input[name="123"]').attr('rgbString',str[1]);  //no
// $.minicolors.rgbString(str[1]); //no 
```

这是用于测试变量 => 完成工作

```
$('input[name=123]').css("background", str[1]); // <==background text area color for testing 
```

我必须使用哪个属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:18:45.133

在这里你可以看到它是如何工作的：http: [//labs.abeautifulsite.net/jquery-miniColors/](http://labs.abeautifulsite.net/jquery-miniColors/)

你必须使用

```
$.minicolors.refresh() 
```

一旦您更改了文本值以刷新颜色选择器。

# java - 使用来自其他类的片段管理选项卡活动

> ID：14081015
> 
> 赞同：0
> 
> 时间：2012-12-29T11:02:40.487
> 
> 标签：java, android, class, android-fragments

我在另一个类中有一个片段，我想从我的标签活动中启动它（谷歌直接提供）：

这是我的 FragmentActivity 中控制片段的部分，我不想要虚拟的，而是我在另一个类中创建的

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.

                    // Here is my fragment
        Fragment fragment = new MyFragment();
        return fragment;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase();
        case 1:
            return getString(R.string.title_section2).toUpperCase();
        case 2:
            return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
} 
```

这是我的 MyFragment ：

```
public class MyFragment extends Fragment{

public Search() {
    // TODO Auto-generated constructor stub
}
public View onCreateView(String name, Context context, AttributeSet attrs) {
    // TODO Auto-generated method stub
    TextView textView = new TextView(context);
    textView.setText("search page");
    return textView;
}
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:27:00.823

好的，答案很简单：

```
public View onCreateView(String name, Context context, AttributeSet attrs) {
// TODO Auto-generated method stub
TextView textView = new TextView(context);
textView.setText("search page");
return textView;
} 
```

不是一个真正的方法，我什至不知道为什么 Eclipse 在我创建类时给了我这个。

真正的方法是：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    TextView textView = new TextView(context);
    textView.setText("search page");
    return textView;
} 
```

这只是参数的问题。

# c# - How to call javascript on user control

> ID：14081017
> 
> 赞同：0
> 
> 时间：2012-12-29T11:02:52.817
> 
> 标签：c#, javascript, asp.net

I have webapplication in c# asp.net 4.0

I have User Control in that I have written javascript :-

```
<script>
    function SetValue() {        
        alert(document.getElementById('offSetClient').value);
    }
</script>

<asp:HiddenField ID="clientDateTime" runat="server" />
<asp:HiddenField ID="offSetClient" runat="server" Value="Test"/> 
```

and this User Control added into a web form. Please suggest me how can I call this javascript on User Control page load.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:05:56.943

You can use `Page.ClientScript.RegisterStartupScript` to attain this.

```
protected void Page_Load(object sender, EventArgs e)
{
   Page.ClientScript.RegisterStartupScript(GetType(), "ShowAlert", "SetValue('" + offSetClient.ClientID + "');", true);
} 
```

Please add an input parameter for the function to get the object of hidden field and pass the same from function.

```
<script type="text/javascript">
  function SetValue(objHdn) {
    alert(document.getElementById(objHdn).value);
  }
</script> 
```

# sql - How to do this in SQL (Access SQL)

> ID：14081018
> 
> 赞同：1
> 
> 时间：2012-12-29T11:03:00.567
> 
> 标签：sql, ms-access-2003

I have a table that has the following fields:

1- Name

2- Dept

3- DateWorked

5- Session

the table filled with data about people from different departments that worked on different date and different sessions (AM/PM). I want to count the number of sessions that all people in a specific dept worked. Please note that:

1- Several people work on a department.

2- Each person may work several sessions. (on different date)

3- I want to know thw number of session that any persion of a department worked. for example, it doesn't matter if on say 28/12/2012 AM, two person from sale department worked, It should be counted as one.

I maybe able to write access VBA code to do this, but I prefer a sql query to do this.

Can you please give me a clue how I can do this?

I am using Access 2003.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:10:02.887

例如，请给出一个创建表和一个日期。但我会托盘：

```
SELECT Dep, DateWorked, COUNT(*) as ammount FROM your_table GROUP BY DateWorked, Dep 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:16:22.397

```
select t1.Dept, count(*) from
(
    select distinct Dept, DateWorked, Session from t
) AS t1
group by t1.Dept; 
```

# asp.net - The server tag is not well formed?

> ID：14081019
> 
> 赞同：0
> 
> 时间：2012-12-29T11:03:16.733
> 
> 标签：asp.net, regex

I am getting the above error. I want to validate the textbox which allow some special characters but not letters and numbers. For that I wrote the below code but it is giving the above error.

The code

```
<asp:TextBox ID="txtTag" runat="server" Width="250"></asp:TextBox>&nbsp;&nbsp;&nbsp;
<asp:RegularExpressionValidator ID="reg1" runat="server"
    ControlToValidate="txtTag" ErrorMessage="*" Text="please check" 
    ValidationExpression="/^[[\]'/\\@ &(){}+$%#=~"-`/*.&]([[\]'/\\@ &(){}+$%#=~"-`/*.&]*)$/" /> 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:11:00.817

转义`ValidationExpression`with中的引号`&quot;`：

```
ValidationExpression="/^[[\]'/\\@ &(){}+$%#=~&quot;-/*.&]([[]'/\@ &(){}+$%#=~&quot;-/*.&]*)$/" 
```

否则它们会与外部引号发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:11:43.717

利用

```
/^[[\]'/\\@ &amp;(){}+$%#=~&quot;-/*.&amp;]([[]'/\@ &amp;(){}+$%#=~&quot;-/*.&amp;]*)$/ 
```

作为`ValidationExpression`.

# ios - iOS InApp Purchase

> ID：14081020
> 
> 赞同：0
> 
> 时间：2012-12-29T11:03:29.337
> 
> 标签：ios, in-app-purchase, in-app-billing

I just wonder if there is anyway to check if a user(email) already buy an in app purchase item in my application.

For example I buy an item on my iPhone, then I log in on my iPad with same itune account. the application will know that this user did buy the item.

Thanks, Huy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:17:02.467

当您在许多应用程序中使用恢复购买选项时，也会发生同样的事情。

```
SKPaymentTransactionStateRestored 
```

是当您尝试购买已购买的商品时从服务器检索的常量。

请查看这个关于 inApp 购买的好教程：[inApp 购买](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:22:04.910

从[应用内购买编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW1)：

> Store Kit 提供内置功能来恢复非消耗品、自动更新订阅和免费订阅的交易。

您可以通过`StoreKit`调用`restoreCompletedTransactions`. `SKPaymentQueue`然后，您的应用将收到用户之前购买的每种产品的交易。只需处理这些交易并解锁新设备上的功能和/或下载内容。

如果您的产品是消耗品（用于游戏的金币、健康包等），**则不**适用，您必须自行跟踪购买情况。

您将需要设置一个服务器来跟踪每笔交易。您需要实现一种方法来跨设备验证用户身份（通过电子邮件注册、Facebook 登录等）。一旦用户在新设备上登录，您的服务器就可以告诉应用程序应该解锁/下载什么。

# opengl - OpenGL使用对数坐标轴

> ID：14081024
> 
> 赞同：4
> 
> 时间：2012-12-29T11:04:29.780
> 
> 标签：opengl

OpenGL是否支持自定义（在我的情况下是对数）坐标空间？我需要显示一些原始数据，最好有一个 Y 对数轴。目的不是改变这些数据，而是让 GPU 完成大部分工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T11:53:02.920

假设数据是动态的，GPU 将是你最好的选择。

只需使用 glsl 转换顶点着色器中的坐标`log()`。

如果您需要 log10，请使用

```
log10(x) = log(x) / log(10) = (1 / log(10)) * log(x) 
```

确保预先计算`1 / log(10)`。

在一个简单的实现中，片段着色器中的任何颜色阴影都将是像素上的线性（即源数据上的指数）......这是对数图中常见的视觉表示，因此您可能不需要担心这一点。

# php - Issue in creating datatable with codeigniter

> ID：14081026
> 
> 赞同：1
> 
> 时间：2012-12-29T11:04:40.960
> 
> 标签：php, codeigniter, datatable

I am trying to create Datatable with CodeIgniter using [these files](https://github.com/blake-nouribekian/codeigniter-datatables).

In data.php(controller) which I've renamed to datatable.php I added "$this->getTable();" in function index() and only defined $aColumns and $sTable according to my need. No other changes are made.

I run the code using this URL : "localhost/codeigniter/index.php/datatable" I am new to this so still not removed the index.php and I don't use base_url so I accordingly made changes in index.php while loading scripts and css. Also I've changed the sAjaxSource to datatable/getTable and class name to Datatable as I've changed the file name.

The main problem is the execution is not entering this foreach loop. The echo statement is not executed.

```
foreach($rResult->result_array() as $aRow)
    {
        echo '123';
        $row = array();

        foreach($aColumns as $col)
        {
            $row[] = $aRow[$col];
        }

        $output['aaData'][] = $row;
    } 
```

And I get the output as follows:

```
{"sEcho":0,"iTotalRecords":32,"iTotalDisplayRecords":"32","aaData":[]} 
```

The aaData should display the 32 records in JSON format but it is not doing so. I am not getting where am I wrong ?

Appended: getTable() function:

```
public function getTable()
{
    $aColumns = array('student_id', 'exam_id', 'subject_id', 'marks_achieved');

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "student_id";

    // DB table to use
    $sTable = 'marks';
    //

    $iDisplayStart = $this->input->get_post('iDisplayStart', true);
    $iDisplayLength = $this->input->get_post('iDisplayLength', true);
    $iSortCol_0 = $this->input->get_post('iSortCol_0', true);
    $iSortingCols = $this->input->get_post('iSortingCols', true);
    $sSearch = $this->input->get_post('sSearch', true);
    $sEcho = $this->input->get_post('sEcho', true);

    // Paging
    if(isset($iDisplayStart) && $iDisplayLength != '-1')
    {
        $this->db->limit($this->db->escape_str($iDisplayLength), $this->db->escape_str($iDisplayStart));
    }

    // Ordering
    if(isset($iSortCol_0))
    {
        for($i=0; $i<intval($iSortingCols); $i++)
        {
            $iSortCol = $this->input->get_post('iSortCol_'.$i, true);
            $bSortable = $this->input->get_post('bSortable_'.intval($iSortCol), true);
            $sSortDir = $this->input->get_post('sSortDir_'.$i, true);

            if($bSortable == 'true')
            {
                $this->db->order_by($aColumns[intval($this->db->escape_str($iSortCol))], $this->db->escape_str($sSortDir));
            }
        }
    }

    if(isset($sSearch) && !empty($sSearch))
    {
        for($i=0; $i<count($aColumns); $i++)
        {
            $bSearchable = $this->input->get_post('bSearchable_'.$i, true);

            // Individual column filtering
            if(isset($bSearchable) && $bSearchable == 'true')
            {
                $this->db->or_like($aColumns[$i], $this->db->escape_like_str($sSearch));
            }
        }
    }

    // Select Data
    $this->db->select('SQL_CALC_FOUND_ROWS '.str_replace(' , ', ' ', implode(', ', $aColumns)), false);
    $rResult = $this->db->get($sTable);

    // Data set length after filtering
    $this->db->select('FOUND_ROWS() AS found_rows');
    $iFilteredTotal = $this->db->get()->row()->found_rows;

    // Total data set length
    $iTotal = $this->db->count_all($sTable);

    // Output
    $output = array(
        'sEcho' => intval($sEcho),
        'iTotalRecords' => $iTotal,
        'iTotalDisplayRecords' => $iFilteredTotal,
        'aaData' => array()
    );
    foreach($rResult->result_array() as $aRow)
    {
        echo '123';
        $row = array();

        foreach($aColumns as $col)
        {
            $row[] = $aRow[$col];
        }

        $output['aaData'][] = $row;
    }
    echo json_encode($output);
} 
```

Regarding SQL code, I've added the records manually in phpmyadmin not using queries.

Any issues in the SQL code ?

```
CREATE TABLE IF NOT EXISTS `marks` (
`student_id` int(10) NOT NULL,
`exam_id` varchar(10) NOT NULL,
`subject_id` int(10) NOT NULL,
`marks_achieved` int(10) NOT NULL,
KEY `student_id` (`student_id`),
KEY `exam_id` (`exam_id`),
KEY `subject_id` (`subject_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:30:45.083

创建如下表：

```
CREATE TABLE IF NOT EXISTS `marks` (
  `student_id` int(10) unsigned NOT NULL,
  `exam_id` int(10) unsigned NOT NULL,
  `subject_id` int(10) unsigned NOT NULL,
  `marks_achieved` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`student_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

INSERT INTO `marks` (`student_id`, `exam_id`, `subject_id`, `marks_achieved`) VALUES
(1, 210, 340, 'really good'),
(2, 220, 440, 'super'); 
```

编辑 getTables() 函数以指定列：

```
$aColumns = array('student_id', 'exam_id', 'subject_id', 'marks_achieved'); 
```

更改表中的名称，编辑此行：

```
$sTable = 'marks'; 
```

你的桌子可能不完全是这样，但我没有问题让它工作。这是回显的 JSON 输出：

```
{"sEcho":0,"iTotalRecords":2,"iTotalDisplayRecords":"2","aaData":[["1","210","340","really good"],["2","220","440","super"]]} 
```

更改以下内容：

```
if(isset($iDisplayStart) && $iDisplayLength != '-1') 
```

至：

```
if(( ! empty($iDisplayStart)) && $iDisplayLength != '-1') 
```

它应该在第 35 行或附近。

# sql - Primary key consists of a foreign key and a identity and should reset identity under a condition

> ID：14081027
> 
> 赞同：1
> 
> 时间：2012-12-29T11:04:44.027
> 
> 标签：sql, sql-server, sql-server-2008

```
create table Linq_TB
{
   url_id int NOTNULL,
   Pg_Name nvarchar(50) NOTNULL,
   URL nvarchar(50) NUTNULL,

   CONSTRAINT Linq_id PRIMARY KEY (url_id,DBCC Checkident(Linq_TB,RESEED,0) case url_id not in(select URL_Id from URL_TB ))
} 
```

I want to make a table which it's primary key is `Linq_id` and gets it's value from both the `url_id` and identity with start from 1 and increments 1 by 1\. `url_id` is a foreign key. For example if `url_id` is 1, `linq_id`'s will be 11, 12, 13,... and I also want to reset `linq_id` identity when the `url_id` changes.

What should the query be? The query above doesn't work, why?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:47:05.887

好吧，约束包含条件而不是要执行的代码。您应该考虑为您的任务使用存储过程以及分配 ID 的本地方法。

但是，将主键“漂亮”或格式化并不是一种常见的做法，因为没有真正的好处（可能出于调试目的除外）。

我不建议在您的 url_ID 更改时执行 DBCC。这对性能有很大的负面影响。

你为什么不把身份证原样留下呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:03:27.673

您可以使用下表和触发器定义来执行此操作：

```
CREATE TABLE Linq_TB
(
   url_id INT NOT NULL,
   Linq_id INT NOT NULL,
   Pg_Name NVARCHAR(50) NOT NULL,
   URL NVARCHAR(50) NOT NULL,

   CONSTRAINT PK_Link_TB PRIMARY KEY (url_id, Linq_id),
   CONSTRAINT FK_URL_TB_URL_ID FOREIGN KEY (url_id) REFERENCES URL_TB (url_id)
)
GO

CREATE TRIGGER tr_Linq_TB_InsertUpdate
ON Linq_TB
INSTEAD OF INSERT
AS
    INSERT INTO Linq_TB
    SELECT i.url_id,
        ISNULL(tb.Linq_id, 0)
            + row_number() over (partition by i.url_id order by (select 1)),
        i.Pg_Name, i.URL
    FROM inserted i
    LEFT OUTER JOIN 
            (
            SELECT url_id, MAX(Linq_ID) Linq_id
            FROM Linq_TB
            GROUP BY url_id
            ) tb ON i.url_id = tb.url_id
GO 
```

定义您的`CREATE TABLE`列和约束。并且，触发器创建逻辑以在您的`Linq_id`列中为每个`url_id`.

请注意，触发器中的逻辑是不完整的。有几个问题没有解决：1）如果对`url_id`一行进行更改，触发器不会更新`Link_id`，以及 2）删除行将导致`Linq_TB`列序列出现间隙。

# backbone.js - Jinja2, Backbone.js and progressive enhancement

> ID：14081035
> 
> 赞同：5
> 
> 时间：2012-12-29T11:05:54.323
> 
> 标签：backbone.js, jinja2

I have a working website build on top of Google App Engine (Python + Jinja2 template engine). I would like to start redesigning it to be single page application using Backbone.js and Underscore.js. The goal is to use progressive enhancement strategy.

The site will still be rendered using backend on the first visit. And then if the browser supports JavaScript the Backbone.js will take over.

I decided to do it this way for two reasons. First all the links I already have will stay intact and second the Google indexing bot will be able to crawl the site content.

I have two problems with this approach:

1.  I need to have two templates for almost everything on my site one on the backend (Jinja2) and one on the frontend (Underscore.js). I was wondering what are the best practices in cases like this? Is there anything you can suggest to avoid having two templates for everything?

2.  How do I load the templates for the frontend to use Backbone.js + Underscore.js? I can load them all in the initial request or request them asynchronously when they are needed.

I appreciate any thoughts! Thanks.

Some resources:

[http://ricostacruz.com/backbone-patterns/](http://ricostacruz.com/backbone-patterns/)

This one describes how to bind Backbone.js to existing HTML: [http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-2-progressive-enhancement-with-backbone-js/](http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-2-progressive-enhancement-with-backbone-js/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T19:24:36.010

所以我最近（今年）经历了类似的情况。我会让你知道#1是一件非常难以处理的事情。请记住，您不仅需要复制模板，还需要复制围绕您网站的所有业务逻辑。例如，假设您允许用户在特定页面上添加评论。使用您描述的方法，您必须在服务器端和客户端都有一个评论模板，此外，复制在客户端和服务器上添加/删除/编辑评论所需的逻辑（到容纳有和没有 javascript 的用户）。使用 Jinja2 功能块很容易复制模板，但逻辑的复制是有趣的地方。我试图做到这一点，并在几个月后完成了一次完整的重写。

所以我给你的建议是放弃你可以同时支持 javascript 和非 javascript 用户的想法。使您的网站适合其中之一。我个人选择自己走javascript路线。这使您有两个选择。制作一个单页应用程序，或者制作一个很大程度上利用 javascript 来实现功能，但在服务器端呈现所有内容的应用程序。可能还有许多其他选项，但这是我见过的最受欢迎的两个。我选择了第二个选项。所以我所做的是，初始页面加载是由服务器完成的。Backbone.js 然后使用每个元素并从中生成模型和视图。这主要是利用`data`属性完成的。因此，例如要创建一个评论视图，我将有一个这样的元素：

```
<div class="comment" data-id="1" data-body="You Suck"></div> 
```

然后我会使用上述评论，并从中创建一个模型，如下所示：

```
var CommentModel = Backbone.Model.extend();

var comment_el = $('.comment');
var comment_model = new CommentModel($(comment_el).data()); 
```

最后，我将使用创建的模型支持视图，然后可以向站点添加功能：

```
var CommentView = Backbone.View.extend({
    initialize: function() {},
    edit: function() {},
    delete: function() {}
});

var comment_view = new CommentView({
    model: comment_model
}); 
```

然后你可能会问，“如果我需要重新渲染一些东西，我不需要客户端模板吗？” 没有。客户端模板是一个相当新的东西。我个人尽量避免使用它们，因为我认为我们还没有完全做到这一点，而且我一直觉得单页应用程序的响应速度不足以满足我的口味。我敢肯定，在这点上会有很多人不同意我的观点，但这是我在最近的项目中所采取的立场。话虽如此，我在服务器上渲染所有内容并以 JSON 的形式将 html 发送到客户端，然后将其注入 DOM。所以我有大量的 api 端点，它们将 JSON 返回到我的 Backbone.js 代码。这就是我目前正在解决的问题，但这个问题通常在很大程度上是情境性的。你必须真正看看你的需求是什么。值得一提的是，我目前的系统很大程度上基于 Twitter 在尝试了整个单页应用程序之后最终决定做的事情。你可以阅读它[在这里](http://engineering.twitter.com/2012/05/improving-performance-on-twittercom.html)。

# wpf - wpf - 窗口冻结

> ID：14081037
> 
> 赞同：0
> 
> 时间：2012-12-29T11:05:59.247
> 
> 标签：wpf, xaml, window

当我单击按钮打开一个窗口时，父窗口冻结。如果我再次最小化和最大化父窗口，它会再次正常工作。

系统配置

*   Windows 7、64 位操作系统。
*   .Net 框架 3.5 SP1
*   视觉工作室快车 2008

以下是我可以重现此问题的简单应用程序。

Window1.xaml

```
<Window x:Class="WpfApplication1.Window1"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="Window1" Height="300" Width="300">
  <StackPanel>
    <TextBox Width="200"/>
    <Button Content="click" Click="Button_Click"/>
  </StackPanel>
</Window> 
```

Window1.xaml.cs

```
namespace WpfApplication1 {
/// <summary>
/// Interaction logic for Window1.xaml
/// </summary>
public partial class Window1 : Window {
    public Window1() {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e) {
        (new Window2()).ShowDialog();
    }
}
} 
```

Window2.xaml

```
<Window x:Class="WpfApplication1.Window2"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window2" Height="300" Width="300" WindowStyle="ToolWindow">
<Grid>

</Grid>
</Window> 
```

如果我删除**WindowStyle="ToolWindow"**效果很好 ！！！！！！

应用程序.xaml

```
<Application x:Class="WpfApplication1.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
StartupUri="Window1.xaml">
<Application.Resources>

</Application.Resources>
</Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:27:45.003

显示而不是显示对话框将起作用，但也许您的意图更像是一个子窗口，请参阅[http://wpftoolkit.codeplex.com/wikipage?title=ChildWindow&referringTitle=Home](http://wpftoolkit.codeplex.com/wikipage?title=ChildWindow&referringTitle=Home)了解详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:10:19.143

调用`ShowDialog()`阻塞了你的 GUI 线程。

有关不阻塞主线程的替代方法，请参阅[此问题。](https://stackoverflow.com/questions/428494/is-it-possible-to-use-showdialog-without-blocking-all-forms)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T11:11:00.173

使用`Show`而不是`ShowDialog`在模态模式下打开一个窗口

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T11:18:35.770

如果您使用 ShowDialog() 尝试将 Window1 设置为 Window2 的所有者：

```
 Window2 w = new Window2 { Owner = this };
        w.ShowDialog(); 
```

# dart - 节点、子节点、追加新元素

> ID：14081045
> 
> 赞同：7
> 
> 时间：2012-12-29T11:06:37.413
> 
> 标签：dart

鉴于此代码：

```
Element elem  = new Element.html("<p>This is a paragraph.</p>");

document.body.append(elem);
document.body.children.add(elem);
document.body.nodes.add(elem); 
```

当我`add`to`body.children`或 to时，结果是相同的`body.nodes`。两者有什么区别？哪个更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-29T14:58:45.747

我会试着简单地解释一下。

让我们假设这个 HTML 片段：

```
<div>
  Hey!
  <span>How is it going?</span>
</div> 
```

现在，问题是[`children`](http://api.dartlang.org/docs/bleeding_edge/dart_html/Element.html#children)属性来自`Element`类。它返回其他`Element`对象的列表：

```
List<Element> children 
```

因此，元素可以有作为元素的孩子，依此类推。

但是我们有[`nodes`](http://api.dartlang.org/docs/bleeding_edge/dart_html/Node.html#nodes)属性，它来自`Node`类。它返回其他`Node`对象的列表：

```
List<Node> nodes 
```

因此，节点可以有子节点，这些子节点本身也是节点。

您应该问的问题是节点和元素之间有什么区别？

让我在我们之前的 HTML 片段中添加一些注释：

```
<div> <!-- Element -->
  Hey! <!-- Node -->
  <span> <!-- Element -->
    How is it going? <!-- Node -->
  </span>
</div> 
```

请记住，`Element`extends `Node`，这意味着`<div>`and`<span>`不仅是元素，而且是节点！一切都是 HTML 中的节点。事实上，即使是评论`<!-- foo -->`也是节点！

当您访问该[`nodes`](http://api.dartlang.org/docs/bleeding_edge/dart_html/Node.html#nodes)属性时，您将检索节点列表，基本上是其下所有内容的列表，包括 HTML 注释和文本。

检索上面[`nodes`](http://api.dartlang.org/docs/bleeding_edge/dart_html/Node.html#nodes)的`<div>`标签将返回一个`Node`（“嘿！”）和一个`Element`（`<span>`）。但是，检索该[`children`](http://api.dartlang.org/docs/bleeding_edge/dart_html/Element.html#children)属性只会返回一个带有单个`Element`( `<span>`) 的列表。

因此，`nodes`字面上包含所有内容，包括元素、文本节点、注释、文档类型等等。

现在回答你的问题：

```
 document.body.append(elem);
 document.body.children.add(elem); 
```

这两个是一样的，第一个只是为了方便的包装。

当您*添加*到`nodes`or`children`时，实际上并没有太大区别。但是，如果您检索该属性，结果可能会有所不同。我通常会建议您使用`children`，因为结果更符合您的预期。

在实施方面，Kyrra 提到的差异很小，但没什么大不了的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:33:30.203

编辑：凯的回答要好得多。

ORIGINAL:
`document.body.append(elem)`只是`document.body.children.add(elem)`.

同样，`document.body.elements`它只是`document.body.children`.

`.nodes`并`.children`使用不同的底层类来实现它们的功能。在功能方面，这两个孩子提供了相同的 List 函数集。两者都缺少以下实现：`sort`, `setRange`, `removeRange`,`insertRange`和`length`. 不过，未来可能会实现 3 个范围功能。

节点和子节点之间的重要区别在于`nodes`使用**延迟初始化**来访问子节点。具体来说，它的构造函数只是：

```
_ChildNodeListLazy(this._this); 
```

虽然 for 的构造函数`children`：

```
_ChildrenElementList._wrap(Element element)
  : _childElements = element.$dom_children,
    _element = element; 
```

该类`children`在构造时立即调用 $dom_children，以确保 DOM 中的子项可访问。在`nodes`您执行某些操作（例如添加项目）之前，该类不会使用任何本机 $dom_* 调用。

除此之外，似乎是一样的`nodes`。`children`

至于哪个更好，这取决于您的用例。如果您要保存对子列表的引用但不立即访问它，`nodes`那就更好了。但是现在两者都不是那么高效，因为每次调用 getter 时都创建包装类的新实例（调用`nodes`创建_ChildrenElementList 类的新实例）。因此，如果您要对 body 的孩子进行大量后续调用，我建议使用该符号。`children``body.children``..`

```
document.body.children
    ..add(a)
    ..add(b)
    ..add(c)
    ..add(d); 
```

`..`您可以在[语言导览](http://www.dartlang.org/docs/dart-up-and-running/ch02.html#classes)中查看有关级联运算符的更多信息。

# python - 从 Python 中的给定字符串中删除所有形式的 URL

> ID：14081050
> 
> 赞同：6
> 
> 时间：2012-12-29T11:07:12.507
> 
> 标签：python, regex

我是 python 新手，想知道是否有更好的解决方案来匹配可能在给定字符串中找到的所有形式的 URL。谷歌搜索后，似乎有很多解决方案可以提取域，用链接替换它等，但没有一个可以从字符串中删除/删除它们。我在下面提到了一些例子供参考。谢谢！

```
str = 'this is some text that will have one form or the other url embeded, most will have valid URLs while there are cases where they can be bad. for eg, http://www.google.com and http://www.google.co.uk and www.domain.co.uk and etc.'

URLless_string = re.sub(r'(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|

(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))', '', thestring)

print '==' + URLless_string + '==' 
```

错误日志：

```
C:\Python27>python test.py
  File "test.py", line 7
SyntaxError: Non-ASCII character '\xab' in file test.py on line 7, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T11:59:37.713

您的代码中有一个错误（实际上是两个）：

1.你应该在倒数第二个单引号前加一个反斜杠来转义它：

```
URLless_string = re.sub(r'(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}     /)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))', '', thestring) 
```

2.你不应该使用`str`作为变量的名称，因为它是一个保留关键字，所以命名它`thestring`或其他任何东西

**例如：**

```
thestring = 'this is some text that will have one form or the other url embeded, most will have valid URLs while there are cases where they can be bad. for eg, http://www.google.com and http://www.google.co.uk and www.domain.co.uk and etc.'

URLless_string = re.sub(r'(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))', '', thestring)

print URLless_string 
```

结果：

`this is some text that will have one form or the other url embeded, most will have valid URLs while there are cases where they can be bad. for eg, and and and etc.`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-29T11:25:11.993

在源文件顶部包含编码行（正则表达式字符串包含非 ascii 符号，如`»`），例如：

```
# -*- coding: utf-8 -*-
import re
... 
```

还要用三重单引号（或双引号）包围您的正则表达式字符串 -`'''`或者`"""`代替单引号，因为该字符串本身已经包含引号符号（`'`和`"`）。

```
r'''(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))''' 
```

# java - 在 JPopupMenu 中为 JMenuItems 创建快捷方式

> ID：14081056
> 
> 赞同：2
> 
> 时间：2012-12-29T11:07:55.010
> 
> 标签：java, swing, jpopupmenu, jmenuitem

我需要 JPopupMenu 中 JMenuItems 的快捷方式。在下面给出的代码中，快捷方式不起作用。

```
import java.awt.event.*;
import javax.swing.*;
import static java.awt.event.InputEvent.CTRL_DOWN_MASK;

public class test3 implements ActionListener {

    JPopupMenu pop;

    void gui() {
        JFrame f = new JFrame();

        pop = new JPopupMenu();
        JMenuItem it1 = new JMenuItem("new");
        JMenuItem it2 = new JMenuItem("old");
        it1.setAccelerator(KeyStroke.getKeyStroke('N', CTRL_DOWN_MASK));
        it2.setAccelerator(KeyStroke.getKeyStroke('O', CTRL_DOWN_MASK));
        it1.addActionListener(this);
        it2.addActionListener(this);
        pop.add(it1);
        pop.add(it2);
        JTextArea ta = new JTextArea(20, 40);
        ta.add(pop);

        ta.addMouseListener(new MouseAdapter() {

            public void mousePressed(MouseEvent me) {
                if (me.isPopupTrigger()) {
                    pop.show(me.getComponent(), me.getX(), me.getY());
                }
            }

            public void mouseReleased(MouseEvent me) {
                if (me.isPopupTrigger()) {
                    pop.show(me.getComponent(), me.getX(), me.getY());
                }
            }
        });

        f.add(ta);
        f.pack();

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setVisible(true);
    }

    public void actionPerformed(ActionEvent ae) {
        if (ae.getActionCommand().equals("new")) {
            System.out.println("new");
        } else if (ae.getActionCommand().equals("old")) {
            System.out.println("old");
        }

    }

    public static void main(String[] argv) {
        test3 t = new test3();
        t.gui();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:16:04.627

您发布的代码的唯一问题是语法错误。否则它正在工作。CTRL_DOWN_MASK 是 KeyEvent 类中的常量，因此您需要声明：

```
 KeyEvent.CTRL_DOWN_MASK 
```

所以该行应该是：

```
 it1.setAccelerator(KeyStroke.getKeyStroke('N', KeyEvent.CTRL_DOWN_MASK)); 
```

并从您的代码中删除静态导入行。这应该可以按预期编译和工作。

# ravendb - 多租户/共享应用系统，如何维护多个特定于租户的标识符？

> ID：14081057
> 
> 赞同：0
> 
> 时间：2012-12-29T11:08:00.777
> 
> 标签：ravendb, multi-tenant

我有一个多租户系统，每个租户共享相同的代码库实例，但有自己的数据库。

我正在使用 RavenDB 进行持久性，标准 c# 外观/BLL​​ 后端用 Asp.net WebAPI 包装，我发现在每个触及数据库的较低级别操作（在我的业务逻辑类的深处），我需要传入一个标识符，以便我的 RavenDb 客户端会话知道要对哪个数据库进行操作。

当用户进行身份验证时，我解析适当的数据库标识符，将其存储在会话管理器中。对 Web API 层的每个调用都会传入一个会话 ID，该会话 ID 在后端解析数据库 ID，然后将其用于传入每个门面/BLL 调用。

我的所有依赖项都是通过 WebAPI 级别的 IoC 容器处理的，但我无法在此阶段传入数据库 ID，因为每个登录的用户都可能不同。

这当然越来越乏味。

有人可以就我可以做些什么来缓解这种情况给我一些指导吗？也许是某种策略注入/AOP 解决方案？

我的后端代码的粗略示例看起来像..

```
public class WidgetService()
{
     private WidgetBLL _widgetBLL;
     private ISessionManager _sessionManager;

     public WidgetService(WidgetBLL _widgetBLL, ISessionManager sessionManager)
     {
          _widgetBLL = widgetBLL;
          _sessionManager = sessionManager
     }

     public Widget getWidget(string sessionId, string widgetId)
     {
          string DbId = sessionManager.ResolveDbId(sessionId)
          return _widgetBLL.GetWidget(string dbId, string widgetId);
     }
}

public class WidgetManager()
{
    public GetWidget(string dbId, string widgetId)
    {
          using (IDocumentSession session = documentStore.OpenSession(dbId) 
          {
             var widget = session.load<Widget>(widgetid);
          }
          return widget;
    }
} 
```

DBID 是该特定用户所属的特定租户的标识符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T09:32:55.837

您需要更改使用会话的方式。与其自己打开和关闭会话，不如在 IoC 代码中执行此操作。然后你传递一个已经为正确的数据库打开的会话。

# html - 我无法在 iframe 中设置视频。怎么做？

> ID：14081059
> 
> 赞同：0
> 
> 时间：2012-12-29T11:08:22.383
> 
> 标签：html, css, video, iframe, embed

我正在使用 iframe 在 wordpress 网站中嵌入视频。但是视频没有完全显示在我的页面上。只有视频的左侧部分可见。剩余的部分正在被切割。

我正在使用的代码是：

```
<P ALIGN=left><iframe src="http://www.abc.com/embed/B5EECA7CE46B5A09" height="460" width="800" frameborder="0" scrolling="no" marginwidth="10"></iframe></P> 
```

我从该网站获得的实际代码是

```
<iframe src="http://www.abc.com/embed/B5EECA7CE46B5A09" width="600" height="360" frameborder="0" scrolling="no"></iframe> 
```

所以我尝试设置左对齐，为 marginwidth 设置不同的值，但没有任何效果。在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T16:01:09.533

默认情况下，WordPress 不允许您在帖子或评论中添加一些 html 标签 ( `iframes`, `style`, `script`...)。您必须安装一个插件（如[http://wordpress.org/extend/plugins/easy-iframe-loader/](http://wordpress.org/extend/plugins/easy-iframe-loader/)）才能在 wordpress 中使用 iframe。

如果您的博客托管在 wordpress.com 上，那么对不起，AFAIK 无法在那里安装插件。

# sql - 使用聚合函数运行 sum

> ID：14081060
> 
> 赞同：0
> 
> 时间：2012-12-29T11:08:29.127
> 
> 标签：sql, sql-server-2005

我正在检索`mlog`表的结果并在以下代码 1 的帮助下计算 的小计`qtyn`。我不知道如何将我的第二个代码标准与第一个结合起来。

谢谢你的帮助

1.

```
SELECT autn, date, itcode, qtyn, out,
       date, phstock,
       qtyn + COALESCE(
                (SELECT SUM(qtyn) FROM  dbo.mlog b
                 WHERE b.autn < a.autn
                     AND itcode = '40'), 0) AS balance
FROM dbo.mlog a
WHERE (itcode = '40')
ORDER BY autn 
```

2.

```
date >=(SELECT MAX([date]) FROM mlog) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:41:26.130

要将条件附加到代码中，请使用`AND`or `OR`。例如：

```
SELECT a.autn, a.date, a.itcode, a.qtyn, a.out,
       a.date, a.phstock,
       a.qtyn + COALESCE(
                (SELECT SUM(b.qtyn) FROM  dbo.mlog b
                 WHERE b.autn < a.autn
                     AND b.itcode = '40'), 0) AS balance
FROM dbo.mlog a
WHERE (a.itcode = '40' AND a.date >= (SELECT MAX([c.date]) FROM mlog c) )
ORDER BY a.autn 
```

*未经测试，但应该做你想做的*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:31:03.143

我听说 SQL Server 的效率相当低`coalesce()`，因为它运行第一部分两次。这是另一种写法：

```
with ml as (
    SELECT ml.autn, ml.date, ml.itcode, ml.qtyn, ml.out, ml.date, ml.phstock
    FROM dbo.mlog ml
    WHERE ml.itcode = '40' AND ml.date >= (SELECT MAX(ml1.date]) FROM mlog ml1)
   )
select ml.*,
       (select sum(m1l.qtyn) from ml ml1 where ml1.autn <= ml.autn) as balance
from ml
ORDER BY ml.autn 
```

我还想知道该`where`子句是否会更有效：

```
 WHERE ml.itcode = '40' AND ml.date = (SELECT top 1 ml1.date FROM mlog ml1 order by ml1.date desc) 
```

# android - 应用生命周期和广播接收器

> ID：14081064
> 
> 赞同：1
> 
> 时间：2012-12-29T11:08:56.460
> 
> 标签：android, broadcastreceiver, broadcasting

我想知道当您从主要活动中创建广播接收器（在我的情况下为接近警报接收器）时会发生什么，并且应用程序进程由于某种未知原因而被终止？

我希望在我注册的广播接收器中接收我的接近警报，无论我的应用程序状态如何，这会发生还是我需要做一些特别的事情来确保这一点？

编辑澄清：

我必须从我的应用程序中注册接收器，而不是通过清单。由于我想要多个邻近警报，因此对于每个（不同的）位置，我将需要动态创建接收器，因为我需要为每个位置注册接收器，但不幸的是，它具有唯一的 ID。

创建我的意图/待定意图/广播接收器的代码：

```
 double latitude = location.getLat();
    double longitude = location.getLon();
    Intent intent = new Intent(PROX_ALERT_INTENT_ID);
    PendingIntent proximityIntent = PendingIntent.getBroadcast(activity.getApplicationContext(), 0, intent, 0);
    lm.addProximityAlert(
        latitude, // the latitude of the central point of the alert region
        longitude, // the longitude of the central point of the alert region
        POINT_RADIUS, // the radius of the central point of the alert region, in meters
        PROX_ALERT_EXPIRATION, // time for this proximity alert, in milliseconds, or -1 to indicate no                           expiration
        proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected
    );

    IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT_ID);

    activity.registerReceiver(new ProximityIntentReceiver(location), filter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:16:26.780

如果您希望`BroadcastReceivers`无论您的应用程序处于何种状态都可以触发，那么您应该通过您的应用程序`AndroidManifest.xml`文件注册它们。

下面是如何做到这一点。

1.  定义一个扩展`BroadcastReceiver`并实现该`onReceive()`方法的类。我看到你已经这样做了 -`ProximityIntentReceiver`是那个班级。

2.  在您的 AndroidManifest.xml 文件中添加：

    > ```
    > <application>
    > ...
    >     <receiver
    >         android:name=".MyReceiver"
    >         android:exported="false" >
    >         <intent-filter>
    >                <action android:name="my.app.ACTION" />
    >         </intent-filter>
    >     </receiver> 
    > </application> 
    > ```

`MyReceiver`您的接收器类的名称在哪里（`ProximityIntentReceiver`在您的情况下）， my.app.ACTION 是您的接收器将侦听的操作（在您的情况下，我猜它是 的值`PROX_ALERT_INTENT_ID`）。

**注意：**说你的接收者的名字是`.MyReceiver`假设它位于你的应用程序的根包中。如果不是这种情况，那么您需要提供从根目录开始的该类的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-02T23:22:54.493

@Mathias：我动态注册广播接收器并且即使在应用程序被终止时也处于活动状态的方式是通过运行服务并从那里注册接收器。希望能帮助到你。

# rest - 如何使具有 JSONP 功能的 Rest 服务在 Sharepoint 2007 (MOSS) 中运行？

> ID：14081065
> 
> 赞同：2
> 
> 时间：2012-12-29T11:09:02.027
> 
> 标签：rest, sharepoint-2007, jsonp, moss

我们需要从 javascript 访问一个 sharepoint 2007 站点。基本上我们需要使用 search.asmx 服务，但由于它不支持 rest 也不支持 jsonp 它不能直接使用。

最初的计划是制作支持rest和jsonp的自定义wcf服务。这是一项小任务，但是当我将服务提供给 Sharepoint 的人时，他们都无法将其打包到 wsp 包中以便在 sharepoint 2007 中安装并使其正常工作。

根据这个问题[Rest Webservices for Sharepoint 2007](https://stackoverflow.com/questions/9830128/rest-webservices-for-sharepoint-2007)这可能不是那么容易，rest-typed urls 需要一个 httpmodule。将其作为独立应用程序运行的另一个想法可能还不够，因为我认为该服务需要访问 SPContext。

是否可以只创建一个[应用程序页面](http://msdn.microsoft.com/en-us/library/ee231581.aspx)并在代码中覆盖渲染，清除输出缓冲区，更改 mime 类型并渲染 json 序列化数据？所以网址是`http://spsite/mycustomquery.aspx?q=mysearchtext&start=0&count=200&callback=mycallbackfunction`.

应用程序页面至少会支持 Get，但它是否有权访问 SPContext？

这是我开始使用的 wcf 服务。

合同

```
[ServiceContract]
public interface IRestSPQuery
{
    [OperationContract]
    [WebGet(UriTemplate = "query/{queryText}/{startAt}/{count}?callback={callback}", ResponseFormat = WebMessageFormat.Json)]
    [JSONPBehavior(callback = "callback")]
    ResultTable Query(string queryText, string startAt, string count, string callback);
} 
```

执行

```
 public ResultTable Query(string queryText, string startAt, string count, string callback)
    {
        //http://sharepointsite/_vit_bin/CustomQuery/RestSPQuery.svc/Query/searchtext/0/200?callback=myfunction

        KeywordQuery keywordQuery = new KeywordQuery(SPContext.Current.Site);
        keywordQuery.StartRow = startAt;
        keywordQuery.RowLimit = count;
        keywordQuery.SortList.Add("Rank", SortDirection.Descending);
        keywordQuery.QueryText = queryText;
        ResultTableCollection searchResults = keywordQuery.Execute();
        ResultTable relevantResultsTable = searchResults[ResultType.RelevantResults];
        return relevantResultsTable;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:44:39.297

您可以尝试将“.ashx”文件添加到实现`IHttpHandler`. 根据这篇[博客文章](http://www.lifeonplanetgroove.com/2010/10/15/adding-and-deploying-generic-handlers-ashx-to-a-sharepoint-2010-visual-studio-project/)，您可以通过将应用程序页面添加到您的解决方案来做到这一点，但将其保存为“.ashx”扩展名。这篇文章是为 SharePoint 2010 编写的，但您必须检查它是否适用于 2007。在文章的其余部分之后，您应该能够为 REST/JSONP 设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:20:27.377

我最终创建了一个自定义 aspx 页面并覆盖了 Render 方法并在那里输出 json/jsonp 并将内容类型更改为 application/json。

可以在这里找到解决方案和准备部署的 wsp 文件[http://www.filedropper.com/restqueryservice](http://www.filedropper.com/restqueryservice)。

# google-app-engine - GAE Golang Gorilla mux - 404 页面未找到

> ID：14081066
> 
> 赞同：10
> 
> 时间：2012-12-29T11:09:37.727
> 
> 标签：google-app-engine, go, mux

我在 GAE 中使用 gorilla mux 时遇到了一些问题。

当我尝试它时，我'找不到 404 页面'。未调用 rootHandler 函数（未生成跟踪）

以下是我的代码的一部分，有什么想法吗？

提前考虑

```
...
    func init() {
     r := mux.NewRouter()
     r.HandleFunc("/",rootHandler)
    }
    func rootHandler(w http.ResponseWriter, r *http.Request) {
     var functionName = "rootHandler"
     c := appengine.NewContext(r)
     c.Infof(functionName+"-start")
     defer c.Infof(functionName+"-end")
... 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-29T15:03:44.250

您必须将请求路由到您的多路复用路由器。`http`AppEngine 使用的包有`DefaultServeMux`，但`mux`没有。（并且它不会自行注册其路线`net/http`）

也就是说，您所要做的就是注册您的`mux`路由器`net/http`：

```
func main() {
    r := mux.NewRouter()
    r.HandleFunc("/", HomeHandler)
    r.HandleFunc("/products", ProductsHandler)
    r.HandleFunc("/articles", ArticlesHandler)
    http.Handle("/", r)
} 
```

（直接来自文档）

这里的重要部分是`http.Handle("/", r)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-13T15:33:25.460

您还可以将路由器作为第二个参数传递给，`ListenAndServe`因为它实现了`http.Handler`接口。

```
router := mux.NewRouter()
router.HandleFunc("/", HomeHandler)
http.ListenAndServe(":8080", router) // pass the router here 
```

# embedded - 嵌入式目标到主机通信

> ID：14081067
> 
> 赞同：0
> 
> 时间：2012-12-29T11:09:45.380
> 
> 标签：embedded, usb, freertos

我有以下问题：

一个微控制器，可以通过几个通信接口与 PC 交谈：RS232，USB 存在。以太网不可用。该软件是带有可选嵌入式操作系统的裸机。

硬件并不重要，因为它适用于任何微控制器和物理通信接口。

同时需要几个沟通渠道：

*   1 用于简单的控制台 - 调试目的：uC <-> PC
*   1 用于从 ADC 获取实时样本到 PC：uC -> PC
*   1 用于将实时样本从 PC 发送到 DAC：PC -> uC

*   1 设置采集/转换、启动/停止等不同参数：uC <-> PC

理想情况下，应仅使用一个物理接口 RS232 或 USB（首选）。

是否已经有一些东西可以在单个物理通道上复用不同的通道？消息传递，远程过程调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:28:47.107

如果您在 uC 上有一个 IP 堆栈，那么您可能可以使用[SLIP](http://en.wikipedia.org/wiki/Serial_Line_Internet_Protocol)或[PPP](http://en.wikipedia.org/wiki/Point-to-Point_Protocol)通过串行链路进行通信。另一方面，如果你有一个准系统，看看那些协议和[HDLC](http://en.wikipedia.org/wiki/High-Level_Data_Link_Control)之类的东西，因为你最终会实现类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:52:05.940

一个明显的选择是使用[TCP/IP](http://en.wikipedia.org/wiki/Internet_protocol_suite)堆栈。每个打开的“[套接字](http://en.wikipedia.org/wiki/Internet_socket)”都独立于任何其他的，一个链接可以支持多个同时连接。

TCP/IP 可以通过以太网或通过 PPP 或 SLIP 的串行连接传输。通过实现 CDC/ACM 类设备，可以通过 USB 模拟异步串行连接（COM 端口），但是如果您的设备要在商业上发布，您将需要 USB 供应商 ID。

某种多线程内核可能会使处理多个连接更简单，但绝不是必要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-29T13:49:15.607

> RS232

几乎没有人仍然在 PC/笔记本电脑上提供 RS232。

> 是否已经有一些东西可以在单个物理通道上复用不同的通道？

您之前提到您想使用 USB，它支持设备上的多个管道，称为端点。USB 标准最多允许 32 个，但特定的微控制器可能实现的端点较少，或者对端点类型有限制。

在 PC（主机）端，您可以使用 WinUSB 或 LibUSB 访问这些管道。

编辑：

我个人使用 USB-to-RS232 转换器，它们可以工作，但我必须强烈建议不要使用它们进行新设计：

*   不同的 USB 端口会导致不同的 COM 端口号
*   在端口“正在使用”时拔出 USB2COM 会导致重新插入时 COM 端口无法工作
*   廉价转换器的许多驱动程序问题
*   祝你好运尝试为旧适配器找到 Win8 驱动程序
*   1ms USB 帧时间会对某些 RS232 协议产生负面影响

所有问题都是小问题，但直接使用 USB 时可以避免这些问题。

> 实时样本

这就提出了可用带宽的问题，USB 通常有 12 MBit/s（在某些高端微机上甚至是 480）。大多数 USB-2-RS232 适配器的最大输出速率为 460800 或 921600 波特。

# prolog - 计算序言中的重复元素

> ID：14081074
> 
> 赞同：0
> 
> 时间：2012-12-29T11:10:54.190
> 
> 标签：prolog

我在 Prolog 中遇到了这个主题的问题。问题是我想计算出现在列表中的重复元素的数量，并且我还想在另一个列表中填充 1，对于重复元素的每次出现，如果不重复，则为 0，例如

我有一个这样的列表：[420,325,420,582,135,430,582]，结果应该是 [1,0,1,1,0,0,1]。

我尝试了一些代码片段，这让我发疯了。

我试过的最后一个代码是：

```
count_duplicates([],[]).
count_duplicates([Head|Tail],[1|LS]):-
    member(Head,Tail),
    count_duplicates([Tail|Head],LS).

count_duplicates([Head|Tail],[0|LS]):-
    \+ member(Head,Tail),
    count_duplicates([Tail|Head],LS). 
```

这个谓词接收一个列表并且必须生成结果列表

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:41:18.813

你可以试试这个：

```
count_duplicate(In, Out) :-
    maplist(test(In), In, Out).

test(Src, Elem, 1) :-
    select(Elem, Src, Result),
    member(Elem, Result).

test(_Src, _Elem, 0). 
```

**编辑**没有地图列表，你可以做

```
count_duplicate(In, Out) :-
    test(In, In, Out).

test(_, [], []).

test(In, [Elem | T], [R0 | R]) :-
    select(Elem, In, Rest),
    (   member(Elem, Rest) -> R0 = 1; R0 = 0),
    test(In, T, R). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:48:50.917

我会使用一些可用的列表处理内置函数重写：

```
count_duplicates(L, R) :-
    maplist(check(L), L, R).

check(L, E, C) :-
    aggregate(count, member(E, L), Occurs),
    ( Occurs > 1 -> C = 1 ; C = 0 ). 
```

接着就，随即

```
?- count_duplicates([420,325,420,582,135,430,582],L).
L = [1, 0, 1, 1, 0, 0, 1]. 
```

关于您的代码，我认为终止很简单：

```
count_duplicates([],[]).
count_duplicates([Head|Tail],[1|LS]):-
    member(Head,Tail),
    count_duplicates(Tail,LS).
count_duplicates([Head|Tail],[0|LS]):-
    \+ member(Head,Tail),
    count_duplicates(Tail,LS). 
```

注意我更正了递归调用，并认为可以使用 if .. then .. else .. 构造以稍微更有效的方式（源代码和运行时）完成。

```
count_duplicates([],[]).
count_duplicates([Head|Tail],[R|LS]):-
    ( member(Head,Tail) -> R = 1 ; R = 0 ),
    count_duplicates(Tail,LS). 
```

它更干净，不是吗？member/2 它只被调用一次，这是一个很大的收获，并考虑使用[memberchk](http://www.swi-prolog.org/pldoc/doc_for?object=memberchk/2) /2 而不是 member/2。

但是该代码**未能**将最后一次出现标记为多个。

# javascript - jQuery：事件监听器没有被触发

> ID：14081079
> 
> 赞同：0
> 
> 时间：2012-12-29T11:11:25.477
> 
> 标签：javascript, jquery

我正在尝试使用 Jquery 将事件侦听器添加到 html 元素。

**测试.html**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
<script src="test.js"></script>

  <body>
      <select id="options" >                                                                                                                   
         <option value="volvo">Volvo</option>                                                                                                  
         <option value="saab">Saab</option>
         <option value="mercedes">Mercedes</option>
         <option value="audi">Audi</option>
      </select>
  </body> 
```

**测试.js**

```
alert("outside function");
$('#options').change(function() {

    alert("inside function");
    var x = $('#options option:selected').text();
    alert(x);
}); 
```

现在，当我打开`file:///home/ronnie/check/popup.html`并且选择任何选项时，我的 jquery 函数不会被触发，我只会`outside function`弹出。

我在 jsfiddle 中尝试了相同的代码，它工作得非常好[http://jsfiddle.net/Vj9LK/](http://jsfiddle.net/Vj9LK/)。

所以，我的问题是为什么它不能在铬中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T11:15:08.097

您正在选择`$("#options")`in ，它在构建之前在标签`test.js`中定义。jQuery 有一个功能可以等待所有内容都构造好，以便您可以选择元素：`<script>``<body>`

```
$(document).ready(function() {
  // contents of test.js
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T11:15:13.947

您是否将更改功能放在文档中（准备好）？

尝试这个

```
alert("outside function");

$(document).ready(function(){
    $('#options').change(function() {
        alert("inside function");
        var x = $('#options option:selected').text();
        alert(x);
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T11:15:29.597

DOM 尚未加载。您需要使用`.ready`功能 - [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
alert("outside function");
$(function(){
  $('#options').change(function() {

    alert("inside function");
    var x = $('#options option:selected').text();
    alert(x);
  });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-29T11:15:49.037

将您的代码放入 $(document).ready()

```
$(document).ready(function(){
    alert("outside function");
    $('#options').change(function() {

        alert("inside function");
        var x = $('#options option:selected').text();
        alert(x);
    });
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-29T11:15:33.543

我怀疑原因可能是这样的：

当您`<script src="test.js"></script>`在 html 文件中执行此操作时，您尚未定义`options`select 标记，因此 onchange 函数未正确注册。所以在定义`select`标签后尝试一下。

或者选择`$(document).ready(function(){})`哪个给你想要的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-29T12:06:15.237

使用这个代码它的工作，确保总是写在之后

```
 <html>
    <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>

     <select id="options" >                                                                                                                   
             <option value="volvo">Volvo</option>                                                                                                  
             <option value="saab">Saab</option>
             <option value="mercedes">Mercedes</option>
             <option value="audi">Audi</option>
          </select>
     <script>
       $('#options').change(function() {

        alert("inside function");
        var x = $('#options option:selected').text();
        alert(x);
    });
    </script>
    </body>
    </html> 
```

# django - 一周中的几天 Django

> ID：14081080
> 
> 赞同：0
> 
> 时间：2012-12-29T11:11:43.097
> 
> 标签：django

请解释一下，这是怎么做的：我有一个星期数（例如 52）和年份（2012）。那么，我如何获得天数（星期一 - 24，星期二 - 25 等）。是的，我读过[这个](http://docs.python.org/2/library/datetime.html)，但我不明白，该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:47:17.077

我会这样做：

```
from datetime import date, timedelta

def get_weekdays(year, week):
    january_first = date(year, 1, 1)
    monday_date = january_first + timedelta(days=week * 7 - january_first.weekday())

    # monday, tuesday, .. sunday
    return [(monday_date + timedelta(days=d)).day for d in range(7)] 
```

（我的星期从星期一开始）

# algorithm - 跟踪赛车游戏过程中的进度

> ID：14081082
> 
> 赞同：0
> 
> 时间：2012-12-29T11:11:54.103
> 
> 标签：algorithm, game-engine

我很惊讶我在网上找不到太多关于此的内容，也许我只是不知道要搜索的正确术语。

我正在制作一个自上而下的赛车游戏，并且想知道跟踪赛道周围赛车进度的最佳方法是什么，即在赛道周围的任何给定点告诉哪些赛车领先于其他赛车，并且还制作确保完成整个圈数，等等。该路线被定义为外部和内部赛道边界的一系列坐标。

我可以想到几种方法——例如在每个角落放置检查点，并通过它在前一个和下一个检查点之间的位置来获得汽车的进展——但这似乎不是特别优雅或健壮。有没有“标准”的做法？还是更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:21:40.767

这是我的建议 - 它可能不是绝对准确，但应该足以满足您的需要。

首先为课程定义一个中心轴 - 因为您的课程似乎由一系列直线段组成，这可能是与课程边界等距的线。现在跟踪一条线上的进度比跟踪二维的进度更容易，所以我建议你将汽车的位置投影在那个中心轴上。我认为简单的正交投影在这里会做得最好。只需在中心轴上找到最接近汽车位置的点，并将其用于跟踪进度。

计算中心轴的总长度，然后计算沿中心轴的总长度，直到每辆汽车的投影。这会给你汽车的进步。如果总长度为 T 并且直到投影的距离为 t，则汽车将通过`t/T`路线或路线的`t*100/T`百分比。

# unit-testing - 寻找 ServiceStack 的真实示例

> ID：14081084
> 
> 赞同：2
> 
> 时间：2012-12-29T11:12:07.637
> 
> 标签：unit-testing, servicestack, ormlite-servicestack

作为一个在这个秋天浪费了几周时间来配置和重新配置 IIS 服务器以进行 WCF、身份验证、使 EntityFramework 正常运行等的人，我真的很想在即将到来的新项目中使用 ServiceStack。

我想全力以赴，即这次我想完全跳过微软特定的东西。

我正在寻找一个使用 ServiceStack 的真实示例，我一直在研究 Rockstars 和 SocialBootstrapApi，但我想要更大的东西。

我的要求：

*   它至少应该是两个子项目，一个包含 Web 部件，一个包含业务逻辑。
*   除了 ServiceStack.OrmLite 和业务逻辑部分中的一些常见内容之外，我不希望有任何 ServiceStack 的东西
*   业务逻辑的单元测试
*   ServiceStack 服务的单元测试

有谁知道这样一个我可以查看源代码的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:59:39.033

听起来您正在寻找一个规定的 n 层架构，并期望它应该如何构建。您使用[ServiceStack](http://www.servicestack.net/)的事实在这里是一个红鲱鱼，因为 ServiceStack 服务只是一个标准的、自动连接的 C# 类，它是完全可模拟和可单独测试的（因此您可以像测试任何其他类一样测试它）或使用自托管的 ServiceStack HttpListener将其作为[集成测试进行测试。](https://github.com/ServiceStack/ServiceStack/blob/master/tests/RazorRockstars.Console.Files/ReqStarsService.cs)

我个人不喜欢规定的架构，因为我更喜欢随着代码库的增长而重构我的代码库，并且只根据需要添加架构和委托。我提供了如何在我的 ServiceStack 服务中分离层的示例，并描述了[我在该线程中的同一应用程序中通常具有的一些不同级别的体系结构](https://groups.google.com/d/msg/servicestack/1pA41E33QII/R-trWwzYgjEJ)。ServiceStack 试图鼓励的一件事是将您的服务模型保持在一个独立的且很大程度上无 dep 的程序集中，该程序集与您的实现分离。

与任何其他 DAL 相比，OrmLite 也不需要任何特别注意。如果您选择将其封装在 Repository 类中，那么您将得到一个标准 C# 类（即 Repository），它只接受并返回干净的 POCO。根据您测试数据访问层的首选方法，您可以选择在测试服务时模拟存储库，或者选择使用内存中的 Sqlite db 并使用测试数据模拟 RDBMS 数据库，以进行也测试 RDBMS 访问的集成测试。

基本上，ServiceStack 嵌入了一个 IOC 并促进了干净的依赖注入 C# 服务，使您可以自由地以您已经习惯的首选样式测试您的服务。也就是说，您不需要更改架构或测试策略来支持 ServiceStack，因为它应该已经让您可以像往常一样自由地开发服务。

# android - 数据库未从资产文件夹复制到设备

> ID：14081085
> 
> 赞同：5
> 
> 时间：2012-12-29T11:12:12.767
> 
> 标签：android, sqlite, assets

我的文件`assets`夹中有一个 .db 文件。我已经将它复制到`data/data/<packagename>/databases/`模拟器中的文件夹并且它工作正常..

但是当我在设备上运行它时，它会强制关闭。它正在显示

```
SQLite exception: no such table: tbl_user 
```

这是我的代码..

```
public class DatabaseHelper extends SQLiteOpenHelper {

        public DatabaseHelper() {

            super(dataContext, DATABASE_NAME, null, 1);

            DB_PATH = "/data/data/"
                    + dataContext.getApplicationContext().getPackageName()
                    + "/databases/";

            Log.d("PATH", DB_PATH);

            boolean dbExist = checkDataBase();
            if (!dbExist) {

                this.getReadableDatabase();
                try {
                    copyDataBase();

                } catch (IOException e) {
                    Log.d("Error", e.toString());
                }
            }

        }

        private void copyDataBase() throws IOException {
            // TODO Auto-generated method stub

            InputStream inFile = dataContext.getAssets().open(DATABASE_NAME);
            String outFileName = DB_PATH + DATABASE_NAME;
            OutputStream myOutput = new FileOutputStream(outFileName);
            byte[] buffer = new byte[1024];
            int length;
            while ((length = inFile.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }
            // Close the streams
            myOutput.flush();
            myOutput.close();
            inFile.close();
        }

        private boolean checkDataBase() {
            // TODO Auto-generated method stub

            File dbFile = new File(DB_PATH + DATABASE_NAME);

            return dbFile.exists();

        } 
```

我应该做其他事情来将该数据库复制到设备吗？？？

谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T06:13:08.247

得到答案... :)

从这里..

[http://www.anddev.org/networking-database-problems-f29/missing-table-in-sqlite-with-specific-version-of-desire-hd-t50364.html](http://www.anddev.org/networking-database-problems-f29/missing-table-in-sqlite-with-specific-version-of-desire-hd-t50364.html)

这是版本 2.3.6 的问题......它正在与其他设备一起使用......只是添加了三行来解决问题......

```
boolean dbExist = checkDataBase();
        SQLiteDatabase db_Read = null;
        if (!dbExist) 
        {
            db_Read = this.getReadableDatabase(); 
            db_Read.close();

            try 
            {
                copyDataBase();
            } 
            catch (IOException e) 
            {
                Log.d("Error", e.toString());
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:58:28.593

只需将资产文件夹中的数据库文件 .db 扩展名更改为 .png 或任何其他可在 2.1、2.2 及更高版本设备中使用的压缩格式

# ruby-on-rails - Ruby on Rails 使用值数组搜索以在多个字段（数据表）中查找

> ID：14081087
> 
> 赞同：1
> 
> 时间：2012-12-29T11:12:20.100
> 
> 标签：ruby-on-rails, ruby, activerecord, datatables

我实现了像[http://railscasts.com/episodes/340-datatables](http://railscasts.com/episodes/340-datatables)上提出的数据表，它工作得很好。不幸的是，它与在输入字段中使用空格进行搜索无关。如果我用搜索功能实现它，用 javascript 处理它就可以了。

所以我想要做的是在数据库中搜索许多字段，其中 sql 的参数被空格（参数的动态大小）分割，例如。“name1 street city” -> 这意味着返回的对象必须在一个对象字段中包含所有三个“name1”、“street”、“city”。

下面是一个例子：Person :name, :address, :city, :country

人（“彼得·梅耶”、“某街 111”、“纽约”、“美国”）

*   如果用户使用“Peter York”进行搜索，它应该会找到该对象
*   如果用户用“Peter Los Angeles”搜索它应该找不到任何东西
*   如果用户搜索“111 Mayer States York”，它应该会找到该对象

好吧，我可以写很多不同的 sql，尊重参数的数量，但这不是很好

有没有简单的方法来解决这个问题？

仅使用第一个参数进行搜索后进行过滤不是一种选择，因为分页不再起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:58:54.640

您可以执行以下操作：

1.  连接所有必须在一个字符串中找到的属性

    `search_attributes = [person.name1, person.address, person.city, person.country].join(' ')` 对于您的示例`search_attributes`将等于`"Peter Mayer Some Street 111 New York United States"`

2.  然后遍历查询中的每个字符串并确保在`search_attributes`using中找到它`.include?`，并且仅当在发送的查询中找到所有字符串时才返回记录`search_attributes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:46:23.477

我现在是这样做的：

```
searchData = params[:sSearch].split(" ")

searchString = "1 = 1"
searchParams = {}
i = 0
searchData.each do |searchParam|
    searchString += " AND (persons.name like :search"+i.to_s+" or persons.address like
     :search"+i.to_s+" or persons.city like :search"+i.to_s+" or persons.country like    
     :search"+i.to_s+"+")"

    searchParams["search#{i}".to_sym] = "%"+searchParam+"%"
    i += 1
end

Person.where(searchString, searchParams) 
```

# assembly - 将 2 个像素点在一起

> ID：14081088
> 
> 赞同：2
> 
> 时间：2012-12-29T11:12:28.867
> 
> 标签：assembly, graphics, x86, dos, framebuffer

我在第一个像素的旁边点了一个像素，但结果不同。第二个像素离第一个像素很远。

怎么了？

```
org 100h
;change to 320x200 graphic mode
mov ax, 13
int 10h

;frame buffer location
push 0xa000
pop es
xor di, di

;dot 2 pixels
mov ax, 1
mov [es:di], ax
inc di
mov [es:di], ax

;prevent ending
a:
jmp a 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T11:20:35.680

有两个错误。

首先，8 位/像素的 BIOS 320x200 是视频模式`13h`( `19d`)，而不是`13d`您所拥有的。

要解决这个问题：

```
mov ax,13h
int 10h 
```

另一个错误是您写入`ax`而不是`al`视频内存。替换`ax`为`al`或任何其他 8 位寄存器 ( `ah`, `bl`, `bh`, `cl`, `ch`, `dl`, `dh`)：

```
mov al,1
mov [es:di],al
inc di
mov [es:di],al 
```

那应该这样做。

# android - 弹出窗口中的空指针异常在位置显示

> ID：14081091
> 
> 赞同：0
> 
> 时间：2012-12-29T11:13:01.107
> 
> 标签：android, popup

我在以下代码片段中遇到一个错误。我尝试调试它但没有用。

代码片段 -

```
 public void createNewList(){
            popupCreateList = new PopupWindow(popupCreateListView,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            popupCreateList.setBackgroundDrawable(new BitmapDrawable());
            popupCreateList.setOutsideTouchable(true);
            ((LinearLayout)popUpListView.getParent()).removeView(popUpListView);
            Log.i(TAG,"popupCreateList-->>>" + popupCreateList + R.layout.layout_task_manager);
   EXCEPTION--> popupCreateList.showAtLocation(findViewById(R.layout.layout_task_manager), Gravity.CENTER, 0, 0);

            //popupCreateList.showAsDropDown(listsButton, 50, -30);
            } 
```

日志猫 -

```
12-29 04:20:44.041: E/AndroidRuntime(885): FATAL EXCEPTION: main
12-29 04:20:44.041: E/AndroidRuntime(885): java.lang.NullPointerException
12-29 04:20:44.041: E/AndroidRuntime(885):  at android.widget.PopupWindow.showAtLocation(PopupWindow.java:809)
12-29 04:20:44.041: E/AndroidRuntime(885):  at ray.kaushik.simple.task.manager.TaskManagerActivity.createNewList(TaskManagerActivity.java:338)
12-29 04:20:44.041: E/AndroidRuntime(885):  at ray.kaushik.simple.task.manager.TaskManagerActivity.onMenuItemSelected(TaskManagerActivity.java:323)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:958)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
12-29 04:20:44.041: E/AndroidRuntime(885):  at android.view.View$PerformClick.run(View.java:16966)
12-29 04:20:44.041: E/AndroidRuntime(885):  at android.os.Handler.handleCallback(Handler.java:615)
12-29 04:20:44.041: E/AndroidRuntime(885):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-29 04:20:44.041: E/AndroidRuntime(885):  at android.os.Looper.loop(Looper.java:137)
12-29 04:20:44.041: E/AndroidRuntime(885):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-29 04:20:44.041: E/AndroidRuntime(885):  at java.lang.reflect.Method.invokeNative(Native Method)
12-29 04:20:44.041: E/AndroidRuntime(885):  at java.lang.reflect.Method.invoke(Method.java:511)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-29 04:20:44.041: E/AndroidRuntime(885):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-29 04:20:44.041: E/AndroidRuntime(885):  at dalvik.system.NativeStart.main(Native Method) 
```

编辑 - 1

我正在尝试显示弹出窗口的 findViewById(R.layout.layout_task_manager) 获得 NULL 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:23:24.667

您正在使用

```
findViewById(R.layout.layout_task_manager) 
```

这不是一个 id，而是一个布局。在 xml 中为其分配一个 id（使用 android:id）并在此处使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:22:41.227

R.layout.XYZ 我们在充气中使用。这不是此布局中任何元素的 id。

# css - 下面的 div 具有固定的高度，上面的 div 填充了剩余的垂直空间？

> ID：14081094
> 
> 赞同：1
> 
> 时间：2012-12-29T11:13:24.600
> 
> 标签：css, html

如何创建一个具有固定高度并保持在页面底部的 div，而在其上方的另一个 div 占据剩余的垂直空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:30:33.963

像[这样](http://cssdesk.com/3H8H7)的东西应该可以实现您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:02:00.877

我认为调整页面大小时，其他任何示例都不能很好地工作。

这类事情最好用几行 javascript 来完成，因为一般来说 CSS 做得不好。

有关工作演示，请参见此处。mod.it 要求您在 chrome 中查看演示，但演示中的代码是跨浏览器的，并且可以在任何地方工作。

[https://mod.it/6hQaRsEL](https://mod.it/6hQaRsEL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T11:35:58.423

像这样试试

[看演示](http://jsfiddle.net/53r5z/)

使用高度：继承您的第一个 div，它采用剩余的可用高度

html

```
<div id='container'>
<div id='first'>
    First Div content
</div>
    <div id='second'>
        Second div content
    </div>
</div> 
```

CSS

```
#container{
width: 600px;
height: 450px;
border: 1px solid black;
}
#second{
position: relative;
bottom: 100px;
height: 100px;
background-color: green;
}  
#first{
height: inherit;
background-color: red;
} 
```

# csv - 使用 IKVM 和 WEKA 将 CSV 转换为 ARFF

> ID：14081096
> 
> 赞同：1
> 
> 时间：2012-12-29T11:13:44.477
> 
> 标签：csv, weka, ikvm, arff

```
CSVLoader loader = new CSVLoader();
loader.setSource(new File("));
Instances data = loader.getDataSet(); 
```

当我在 java 中运行上面的代码时，它工作正常。

但是当我使用下面的代码在 c# 中做同样的事情时，它会抛出异常

```
weka.core.Instances instsOrg = csvLoader.getDataSet(); 
```

异常消息是“'weka.core.converters.ConverterUtils' 的类型初始化程序引发了异常”

```
 string filename = "myCSVfile.csv"";
 weka.core.converters.CSVLoader csvLoader = new weka.core.converters.CSVLoader();
 csvLoader.setSource(new java.io.File(filename));
 weka.core.Instances instsOrg = csvLoader.getDataSet();

 weka.core.converters.ArffSaver saver = new weka.core.converters.ArffSaver();
 saver.setInstances(data);
 saver.setFile(new File("myCSVfile.arff"));
 saver.writeBatch(); 
```

我添加了 weka.dll 、 IKVM.OpenJDK.Core.dll 和 IKVM.Runtime 作为参考文件。任何人都可以帮我摆脱这个例外吗？？？请尽可能尽快回复 ：（

# javascript - 什么是客户端验证脚本中不显眼的 JavaScript

> ID：14081098
> 
> 赞同：-1
> 
> 时间：2012-12-29T11:13:55.367
> 
> 标签：javascript, asp.net

> **可能的重复：**
> [用外行术语来说，什么是 Unobtrusive Javascript？](https://stackoverflow.com/questions/4478795/what-is-unobtrusive-javascript-in-layman-terms)

我指的是他们提到的一个[网站](http://msdn.microsoft.com/en-us/library/ms171868.aspx#web)，如下所示

> ASP.NET 4.5 包括以下新功能：
> 
> *   在客户端验证脚本中支持不显眼的 JavaScript。

“不显眼的 JavaScript”是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:16:15.257

不显眼的 Javascript 意味着它不会干扰标记 (HTML)。

例如

HTML 中突兀的 JS：

```
<a onclick="myFunction()">My Link</a> 
```

不显眼的 JS：

在 HTML 中：

```
<a>My Link</a> 
```

在 JS 中：

```
$('a').click(function() {
    //Code in here
); 
```

请注意，在不显眼的示例中，JS 可以完全存储在单独的 JS 文件中。

# coldfusion - 在 Transfer ORM (Coldfusion) 中将属性添加到多线程连接

> ID：14081105
> 
> 赞同：2
> 
> 时间：2012-12-29T11:14:51.987
> 
> 标签：coldfusion, transfer-orm

我正在使用传输，并且文章和视频之间存在多对多关系。我需要做的是在将每个视频添加到文章时为其添加时间戳。即我有两张桌子：

*   文章（ID、标题、正文）
*   视频（ID，网址）

然后我有一个链接表：

*   article_videos(articleID, videoID)

我需要在 article_videos 中添加一个额外的列 timeStamp：

*   article_videos(articleID, videoID, timeStamp)

我遇到的问题是，当我尝试在链接表中创建一个额外的属性时，它不起作用。

我的转移 ORM 配置：

```
<package name="article">
    <object name="Article" table="article">
        <id name="ID" type="numeric"/>
        <property name="Title" type="string" column="title"/>
        <property name="Body" type="string" column="body"/>

        <manytomany name="Videos" table="article_videos">
            <link to="article.Atricle" column="articleID"/>
            <link to="assets.Video" column="videoID"/>
            <collection type="array">
                <order property="OrderIndex" order="asc"/>
            </collection>
            <property name="TimeStamp" type="timestamp" column="timeStamp"/>
        </manytomany>
    </object>
</package>

<package name="assets">
    <object name="Video" table="video">
        <id name="ID" type="numeric"/>
        <property name="url" type="string" column="url"/>
    </object>
</package> 
```

问题是 ManyToMany 中的新属性是不允许的，它会抛出一个错误，指出 Transfer 配置格式错误。

我应该在哪里以及如何添加时间戳，因为该视频可能在多篇文章中使用，因此该文章中的视频需要时间戳？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:49:20.137

您可能需要做的是为您的`article_videos`联接创建一个新对象。

因为 Transfer ORM 透明地处理多对多连接，所以如果您想在连接上添加和访问其他属性，您不需要直接与连接表交互，您需要创建一个新对象。有几种方法可以实现这一目标。

如果您仍然想透明地处理多对多关系并且时间戳将由数据库自动填充，您可以保持关系不变并添加一个新对象表示`article_videos`和一个新关系将该对象连接到文章和视频对象.

因此，您将添加一个表示 的新对象`article_videos`，我还可能向数据库添加一个代理键，或者您可能想要使用复合 ID：

```
<object name="ArticleVideo" table="article_videos">
  <id name="ID" type="numeric"/>
  <property name="TimeStamp" type="timestamp" column="timeStamp"/>
</object> 
```

然后你会更新你的`Article`对象来引用这个新对象：

```
<object name="Article" table="article">
  <id name="ID" type="numeric"/>
  <property name="Title" type="string" column="title"/>
  <property name="Body" type="string" column="body"/>

  <manytomany name="Videos" table="article_videos">
    <link to="article.Article" column="articleID"/>
    <link to="assets.Video" column="videoID"/>
    <collection type="array">
      <order property="OrderIndex" order="asc"/>
    </collection>
  </manytomany>

  <onetomany name="ArticleVideo">
    <link to="article.ArticleVideo" column="articleID"/>
    <collection type="array">
      <order property="TimeStamp" order="asc"/>
    </collection>
  </onetomany>
</object> 
```

您还将更新您的`Video`对象：

```
<object name="Video" table="video">
  <id name="ID" type="numeric"/>
  <property name="url" type="string" column="url"/>

  <onetomany name="ArticleVideo">
    <link to="article.ArticleVideo" column="videoID"/>
    <collection type="array">
      <order property="TimeStamp" order="asc"/>
    </collection>
  </onetomany>
</object> 
```

这样，您可以正常使用与`Article`对象的`Video`关系，但如果需要，可以访问其他属性：

```
// Creating the join using the many-to-many relationship
article = transfer.get("article.Article", 1);
article.addVideo(video); 
```

然后，您还可以访问联接，如何获取将上述关系与联接相关联的信息可能需要一些工作，因此您可能必须预先决定您正在创建的联接是否需要更多信息：

```
// Creating the join using the ArticleVideo object
articleVideo = transfer.new("article.ArticleVideo");
articleVideo.addParentArticle(article);
articleVideo.addParentVideo(video);
transfer.save(articleVideo);

// Using a composite ID to access the ArticleVideo
articleVideo = transfer.get("article.ArticleVideo", {
  "ArticleID" = 1,
  "VideoID" = 1
});
WriteOutput("The timestamp is: #articleVideo.getTimeStamp()#"); 
```

否则，您可以调整所有关系，但这需要您在视频和文章之间使用中间对象。如果它只是一个时间戳，那么它可能是不必要的。

# ruby-on-rails - Rails 如何使用 image_tag 列出文件夹中的所有图像？

> ID：14081109
> 
> 赞同：12
> 
> 时间：2012-12-29T11:15:11.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我试图获取“app/assets/images/slide”文件夹中的所有图像并将它们与标签一起放置（按顺序）。所以，它看起来像这样：

```
<img src="1.jpg" >
<img src="2.jpg" >
<img src="3.jpg" > 
```

我怎样才能做到这一点？（我使用 Rails 3.2.9）

这是我尝试过的代码（感谢 Khaled）。但它会输出所有图像路径的纯文本列表。我需要显示图像：

```
@images = Dir.glob("app/assets/images/slide/*.jpg")

@images.each do |image|
    image_tag image.gsub("app/assets/images/", "")
end 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-29T11:23:49.063

在您的控制器操作中，获取所有图像路径。

```
@images = Dir.glob("app/assets/images/slide/*.jpg") 
```

然后在你看来（假设是haml）

```
- @images.each do |image|
   = image_tag "slide/#{image.split('/').last}" 
```

假设 erb

```
 <% @images.each do |image| %>
   <%= image_tag "slide/#{image.split('/').last}" %>
 <% end %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-11T23:01:16.873

为确保运行，您可以使用：

```
@images = Dir.glob("#{Rails.root}/app/assets/images/camisas/*.jpg") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T11:35:25.307

为我工作并显示图像：

```
Dir.glob('app/assets/images/slide/*').map do |path| 
  image_tag "slide/#{ File.basename(path) }"
end.reduce(&:+) 
```

您想摆脱 File#basename 的完整路径，以便它与预编译资产 afaik 一起使用。您也不需要指定 .jpg，因为它是一个图像文件夹，并且可以有 .png。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T11:23:09.300

```
files = Dir.glob('app/assets/images/slide/*')
files.each do |file|
  puts file
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T11:23:47.493

从文档中，`image_tag`返回源的 html 图像标记。它不能一次显示所有图像。您应该制作一个自定义助手来阅读和浏览您的目录。

# php - 如何将图形包含到 html2pdf 中？

> ID：14081113
> 
> 赞同：1
> 
> 时间：2012-12-29T11:15:39.480
> 
> 标签：php, pdf, graph, charts

我正在使用 maxChart.class.php 创建图形并使其正常工作。

我也在使用 html2pdf.class.php 来创建在线 pdf 报告。我试图在 pdf 文件中包含图表，但它不起作用。

我的代码是

```
$rowval=$sqcat1->qcategory;
$data3["$rowval"]=$per;

$content = "
<page>

$content.=$mc3 = new maxChart($data3);    
  $mc3->displayChart('',1,450,400,true);
"    

</page>";

  require_once("/pdf1/html2pdf.class.php");
    $html2pdf = new HTML2PDF('P','A4','en');
    $html2pdf->WriteHTML($content);
    $html2pdf->Output('demo.pdf'); 
```

如何在文件中添加图表？

任何人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:02:21.197

我使用 MPDF 和 SVGGraphs 来做到这一点

在 php 变量中添加图形值的代码

```
$html.='<br>'.$graph->Fetch("CylinderGraph",true).'<br>'; 
```

MPDF 代码

```
include("/mpdf.php");

$mpdf=new mPDF('c'); 
$mpdf->SetHTMLHeader($header);
$mpdf->WriteHTML($html);

$mpdf->Output();
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:34:57.290

您可以执行以下操作：

*   使图表成为图像并将该图像嵌入文档中，使用`<img src=...`
*   使用二进制数据显示图表图像`<img src="data:image/png;base64,binarycontentherebase64encoded...">`

# php - 致命错误：在 joomla 解决方案中超过 30 秒的最大执行时间而不更改 ini 文件

> ID：14081116
> 
> 赞同：0
> 
> 时间：2012-12-29T11:15:46.240
> 
> 标签：php, mysql, joomla2.5

我创建了一个 Joomla 扩展，在其中我将记录从表 A 存储到表 B。如果表 A 包含的数据较少，我的脚本工作正常。如果表 A 包含大量数据。在插入这个巨大的数据时，执行超出并显示此错误“致命错误：/mysite/libraries/joomla/database/database/mysqli.php 在第 382 行的最大执行时间超过 30 秒”。我可以通过更改 ini 文件来克服这个问题，但是它的 Joomla 扩展名是人们将在他们的网站中使用它的，所以我不能告诉他们在 ini 文件中进行更改，事实上我不想告诉他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:31:06.273

看看这个

[http://davidwalsh.name/increase-php-script-execution-time-limit-ini_set](http://davidwalsh.name/increase-php-script-execution-time-limit-ini_set)

```
ini_set('max_execution_time', 300); 
```

使用这种方式或

```
set_time_limit(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:28:21.833

**在您编写查询代码set_time_limit(0)**的页面开头使用以下代码 ；

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T20:20:54.737

从技术上讲，您可以使用[`set_time_limit`](http://www.php.net/manual/en/function.set-time-limit.php). 就个人而言，我不会搞乱其他人在他们的服务器上设置的限制，假设他们出于某种原因（性能、安全性——尤其是在共享托管环境中，经常发现像 Joomla! 这样的软件）。此外，`set_time_limit`如果 PHP 在安全模式下运行，将无法工作。

因此，您剩下的就是**将任务拆分**为多个步骤。例如，如果您的表有 100000 条记录，并且您测量可以在合理的时间内处理大约 5000 条记录，那么请在 20 个单独的步骤中执行操作。

在平均系统上，每个步骤的执行时间应该少于 30 秒。请注意，步数是动态的，您以编程方式将记录数除以一个常数（在测试期间找出一个有用的值）以获得运行时的步数。

您需要将脚本分成两部分，一部分找出所需的步骤数，将它们显示给用户，并通过向第二个脚本发送 AJAX 请求（例如：“处理记录 5001 到 10000 ")，并在适当的服务器响应到达（即请求完成）时将步骤标记为已完成（供用户查看）。

第二部分完全是服务器端的并接受 AJAX 请求。该脚本在服务器上执行实际工作。它必须接收某种参数（“处理记录 5001 到 10000”请求）以了解它应该处理哪个步骤。当它完成它的步骤时，它会向客户端脚本返回一个“成功”（或可能是“失败”）代码，以便它可以通知用户。

这个主题有一些变化，例如，您可以构建一个将用户重定向到自身的脚本，但使用不同的参数，因此它知道它在哪里停止并且可以从那里继续下一步。通常，您会希望解决方案能够为用户提供尽可能多的信息和控制权。**

# hadoop - 将1亿个文件写入s3

> ID：14081123
> 
> 赞同：2
> 
> 时间：2012-12-29T11:16:28.297
> 
> 标签：hadoop, amazon-s3, elastic-map-reduce, amazon-emr, emr

我的主要目的是根据每条记录的 id 将记录拆分成文件，现在有超过 150 亿条记录，肯定会增加。我需要使用 Amazon EMR 的可扩展解决方案。我已经为具有大约 9 亿条记录的较小数据集完成了这项工作。

输入文件为 csv 格式，其中一个字段需要是输出中的文件名。所以说有以下输入记录：

```
awesomeId1, somedetail1, somedetail2
awesomeID1, somedetail3, somedetail4
awesomeID2, somedetail5, somedetail6 
```

因此，现在应该有 2 个文件作为输出，一个名为`awesomeID1.dat`，另一个为`awesomeID2.dat`，每个文件都有与各自 ID 相关的记录。

输入大小：每月总计 600 GB（gzippef 文件的大小），每个文件约为 2 3 GB。我需要一次处理大约 6 个月或更长时间。所以总数据大小为 6*600 GB（压缩）。

以前我在根据 id 值写入 s3`Too many open files`时遇到错误。`FileByKeyTextOutputFormat extends MultipleTextOutputFormat<Text, Text>`然后正如我在[这里](https://stackoverflow.com/questions/12953251/too-many-open-files-in-emr)解释的那样，我没有将每个文件都直接写入 s3，而是将它们写入本地并分批 1024 个文件移动到 s3。

但是现在随着数据量的增加，我收到了来自 s3 的以下消息，然后它跳过了写入有问题的文件：`"Please reduce your request rate."`此外，我必须在具有 200 台 m1.xlarge 机器的集群上运行，这需要大约 2 小时，因此它也很贵！

我想要一个**可扩展**的解决方案，如果将来数据量再次增加，它不会失败。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:23:48.187

以下是有关减速错误的一些信息：[https](https://forums.aws.amazon.com/message.jspa?messageID=89722#89816) ://forums.aws.amazon.com/message.jspa?messageID=89722#89816您应该按字母顺序插入 S3。此外，限制是动态的，并且会随着时间的推移重新调整，因此请放慢速度并尝试稍后提高您的速度。

也许您最好使用数据库而不是文件系统？总数据集有多大？

DynamoDB 可能很合适，但可能会很贵，每月 1 美元/GB。（因为它使用 SSD 作为后备存储。）

RDS 是另一种选择。其定价为 0.10 美元/GB/月。

更好的办法是在 EC2 上托管您自己的 NoSQL 或其他数据存储，例如在新的 hs1.8xlarge 实例上。您可以仅在需要时启动它，并在不需要时将其备份到 S3。

# php - 通过 php 脚本连接到 TCP/IP 服务器

> ID：14081124
> 
> 赞同：19
> 
> 时间：2012-12-29T11:16:28.720
> 
> 标签：php, tcp

我需要在我的网站上实现一个 php 脚本，该脚本将执行以下操作：

1.  连接到远程服务器
2.  向服务器发送数据包
3.  从服务器接收数据包

一切已经在服务器端配置好响应数据包请求，我只需要弄清楚如何使用 php 连接到 TCP/IP 服务器。

朝哪个方向看有什么想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-29T11:49:33.387

轻松使用 php 套接字：

```
<?php
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    fwrite($fp, "Your message");
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
}
?> 
```

要了解更多信息，请访问[http://php.net/manual/en/function.fsockopen.php](http://php.net/manual/en/function.fsockopen.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-29T11:22:52.163

```
<?php
error_reporting(E_ALL);

/* Allow the script to hang around waiting for connections. */
set_time_limit(0);

/* Turn on implicit output flushing so we see what we're getting
 * as it comes in. */
ob_implicit_flush();

$address = '192.168.1.53';
$port = 10000;

if (($sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP)) === false) {
    echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
}

if (socket_bind($sock, $address, $port) === false) {
    echo "socket_bind() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n";
}

if (socket_listen($sock, 5) === false) {
    echo "socket_listen() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n";
}

do {
    if (($msgsock = socket_accept($sock)) === false) {
        echo "socket_accept() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n";
        break;
    }
    /* Send instructions. */
    $msg = "\nWelcome to the PHP Test Server. \n" .
        "To quit, type 'quit'. To shut down the server type 'shutdown'.\n";
    socket_write($msgsock, $msg, strlen($msg));

    do {
        if (false === ($buf = socket_read($msgsock, 2048, PHP_NORMAL_READ))) {
            echo "socket_read() failed: reason: " . socket_strerror(socket_last_error($msgsock)) . "\n";
            break 2;
        }
        if (!$buf = trim($buf)) {
            continue;
        }
        if ($buf == 'quit') {
            break;
        }
        if ($buf == 'shutdown') {
            socket_close($msgsock);
            break 2;
        }
        $talkback = "PHP: You said '$buf'.\n";
        socket_write($msgsock, $talkback, strlen($talkback));
        echo "$buf\n";
    } while (true);
    socket_close($msgsock);
} while (true);

socket_close($sock);
?> 
```

[这只是来自网络的示例，用于进一步查看文档](http://php.net/manual/en/function.socket-create.php)

连接到 tcp 服务器

```
 $host="192.168.1.99"; 
    $port = 1234; // open a client connection 
    $fp = fsockopen ($host, $port, $errno, $errstr); 
    if (!$fp) { 
    $result = "Error: could not open socket connection"; 
    } 
    else { // get the welcome message fgets ($fp, 1024); // write the user string to the socket 
    fputs($fp, $message); // get the result $result .= fgets ($fp, 1024); // close the connection
    fputs ($fp, "END");
    fclose ($fp); // trim the result and remove the starting ?
    $result = trim($result);
    $result = substr($result, 2); // now print it to the browser 
    } ?> 
    Server said: <? echo $result; ?> 
```

# html - 如何在页面中嵌入 PDF 查看器？

> ID：14081128
> 
> 赞同：97
> 
> 时间：2012-12-29T11:17:01.240
> 
> 标签：html, pdf

如果我没记错的话，Google Docs 提供了一种显示 PDF 的方法，该 PDF 通过`<iframe>`.

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-12-29T11:23:16.007

您可以考虑使用Philip Hutchison 的[PDFObject](https://github.com/pipwerks/PDFObject)。

或者，如果您正在寻找非 Javascript 解决方案，您可以使用如下标记：

```
<object data="myfile.pdf" type="application/pdf" width="100%" height="100%">
  <p>Alternative text - include a link <a href="myfile.pdf">to the PDF!</a></p>
</object> 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-12-29T11:37:26.970

[PDF.js](https://mozilla.github.io/pdf.js/)是一个 HTML5 技术实验，它探索构建一个忠实高效的可移植文档格式 (PDF) 渲染器，无需原生代码帮助。它由社区驱动并得到 Mozilla 实验室的支持。

[你可以在这里](https://mozilla.github.io/pdf.js/web/viewer.html)看到演示。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-03-26T11:10:52.613

这样可能会更好一些

```
<embed src= "MyHome.pdf" width= "500" height= "375"> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-09-02T00:23:07.920

如果我没记错的话，OP 是在询问（尽管后来接受了 .js 解决方案）Google 的嵌入式 PDF 显示服务器是否会在他自己的网站上显示 PDF。

所以，一年半后：是的，它会的。

请参阅[http://googlesystem.blogspot.ca/2009/09/embeddable-google-document-viewer.html](http://googlesystem.blogspot.ca/2009/09/embeddable-google-document-viewer.html)。此外，请参阅[https://docs.google.com/viewer](https://docs.google.com/viewer)，并插入您要显示的文件的 URL。

编辑：重新阅读，OP 要求不使用 iFrames 的解决方案。我认为 Google 的查看器不可能做到这一点。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-29T11:19:11.243

试试**Flex Paper** [http://flexpaper.devaldi.com/](http://flexpaper.devaldi.com/)

它像 scribd 一样工作

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-11T00:18:48.797

请务必跨不同的阅读器偏好测试任何解决方案。站点访问者可能将其浏览器设置为在 Reader/Acrobat 中打开 PDF，而不是在浏览器中打开，例如，通过禁用 Firefox 中的 Acrobat 插件。

我不能确定我的结果，因为我有两个不同的 Acrobat 插件，Firefox 可以识别它们，因为我有不同版本的 Adob​​e Acrobat 和 Adob​​e Reader，但看起来你至少需要测试如果网站访问者会发生什么将他们的浏览器设置为不在浏览器中打开 PDF。当他们查看看似可用的网页并且他们的浏览器正在唠叨他们打开他们认为他们没有请求的 PDF 文件时，这可能会很烦人。在某些情况下，PDF 文件会在 Adob​​e Reader 而不是浏览器中自动打开，而在其他情况下，浏览器会弹出一个对话框，提示该文件不存在。

我遇到了与 iframe 和对象的不匹配，不同代码的不同问题。

这适用于简单的 HTML 代码。我还没有尝试过建议的框架。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-01-24T10:32:09.150

使用引导程序，您可以拥有一个响应式和移动优先的嵌入文件。

```
<div class="embed-responsive embed-responsive-16by9">
  <iframe class="embed-responsive-item" src="address of your file" allowfullscreen></iframe>
</div>

Aspect ratios can be customized with modifier classes.
<!-- 21:9 aspect ratio -->
<div class="embed-responsive embed-responsive-21by9">
  <iframe class="embed-responsive-item" src="..."></iframe>
</div>

<!-- 16:9 aspect ratio -->
<div class="embed-responsive embed-responsive-16by9">
  <iframe class="embed-responsive-item" src="..."></iframe>
</div>

<!-- 4:3 aspect ratio -->
<div class="embed-responsive embed-responsive-4by3">
  <iframe class="embed-responsive-item" src="..."></iframe>
</div>

<!-- 1:1 aspect ratio -->
<div class="embed-responsive embed-responsive-1by1">
  <iframe class="embed-responsive-item" src="..."></iframe>
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-02T15:23:12.377

coolwanglu 的 pdf2htmlEX 可能是将 pdf 文件转换为 html 的最佳解决方案。您可以进行简单的转换，然后将 html 页面嵌入为 iframe 或类似的东西。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-16T17:46:48.963

我真的会选择 FlowPaper，尤其是他们的新元素模式，可以在这里找到： [https ://flowpaper.com/demo/](https://flowpaper.com/demo/)

它在保持文本清晰的同时显着扁平化 PDF，这意味着它将在移动设备上加载得更快

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-18T08:35:57.467

```
<iframe src="https://docs.google.com/viewer?url=**https://www.fsc.esn.ac.lk/sites/default/files/2021-10/AcSchedule.pdf**&embedded=true" style="width:100%; height:500px;" frameborder="0"></iframe> 
```

应将 URL **[https://www.fsc.esn.ac.lk/sites/default/files/2021-10/AcSchedule.pdf](https://www.fsc.esn.ac.lk/sites/default/files/2021-10/AcSchedule.pdf)**替换为您自己的地址

# delphi - Delphi双字节数组

> ID：14081129
> 
> 赞同：13
> 
> 时间：2012-12-29T11:18:07.370
> 
> 标签：delphi, pointers

将双精度值转换为其字节表示的简单方法？我尝试使用如下指针：

```
var
  double_v:double;
  address:^double;
....
double_v:=100;
address:=@double_v; 
```

但我的每一个概念：如何从地址中读取这8个字节，以“AV”结尾。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-29T11:24:43.630

使用变体记录

```
Type
  TDoubleAndBytes = Record
    case boolean of
      false : (dabDouble : Double);
      true  : (dabBytes : Array [0..7] Of Byte);
  end; 
```

将双精度值分配给 dabDouble 并通过 dabBytes 读取字节

```
var
  myVar : TDoubleAndBytes;
  i : integer;

begin
  myVar.dabDouble := 100;
  for i:=0 to 7 do write(myVar.dabBytes[i]); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-29T11:46:43.373

在 XE3 中有用于简单类型的记录助手，[`TDoubleHelper`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.TDoubleHelper).

这有效：

```
var
  d : Double;
  i : Integer;
begin
  d := 100.0;
  for i := 0 to 7 do
    WriteLn(d.Bytes[i]);
end; 
```

在 XE2 中有一个声明[`TDoubleRec`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.TDoubleRec)，这是一个高级记录。

例子：

```
var
  dRec : TDoubleRec;
  i : Integer;
begin
  dRec := 100.0;
  for i := 0 to 7 do
    WriteLn(dRec.Bytes[i]);
end; 
```

访问双精度字节的另一个常见选项是使用 a [`typecast`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Expressions_(Delphi)#Typecasts)：

```
type
  TDoubleAsByteArr = array[0..7] of byte;
var
  d : Double;
  i : Integer;
begin
  d := 100.0;
  for i := 0 to 7 do
    WriteLn(TDoubleAsByteArr(d)[i]);
end; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-29T12:22:48.850

使用“绝对”的两个例子......

用作函数

```
function GetDoubleByte(MyDouble: Double; Index: Byte): Byte;
var
  Bytes: array[0..7] of Byte absolute MyDouble;
begin
  Result := Bytes[Index];
end;

procedure TForm1.Button1Click(Sender: TObject);
var
 MyDouble:Double;
 DoubleBytes:Array[0..7] of Byte absolute MyDouble; // direct local use
begin
  MyDouble := 17.123;
  ShowMessage(IntToStr(DoubleBytes[0])); // local usage

  ShowMessage(IntToStr(GetDoubleByte(MyDouble,0))); // via function call

end; 
```

# c# - SharpDevelop 改变代码风格

> ID：14081132
> 
> 赞同：3
> 
> 时间：2012-12-29T11:18:35.397
> 
> 标签：c#, coding-style, sharpdevelop

我想从这里改变 SharpDevelop 的风格

* * *

![前](../Images/d443d7b3284100be700aa75e3f7e2342.png)

* * *

对此

* * *

![必需的](../Images/9d1fceda9c4da043cf8722a6a643ff51.png)

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:25:12.697

您将不得不修改 SharpDevelop 源文件，以便立即获得您的自定义样式。没有 IDE 设置可以更改它。

作为一种解决方法，您可以使用 AStyle Addin，

[http://alex.codeplex.com/](http://alex.codeplex.com/)

# javascript - 通过动态加载的 AJAX 设置标题

> ID：14081133
> 
> 赞同：0
> 
> 时间：2012-12-29T11:18:36.540
> 
> 标签：javascript, jquery, html, ajax

我目前解析了一些使用此脚本加载的 AJAX：

```
function parseScript(_source) {
    var source = _source;
    var scripts = source.match(/<script[^>]*src=[^>]*>/g);
    if (scripts) {
    for (var i = 0; i < scripts.length; i++) {
        src = scripts[i].match(/src=("([^"]*)"|'([^']*)')/);
        src = src[2] || src[3];
        if (src) {
            addScriptTag(src);
        }
    }
    }
    var scripts = new Array();

    return source;
} 
```

我一直在尝试找到标题并将其添加到当前标题之前，例如“加载的页面标题 - 加载页面标题”，尝试了一些`<title>`匹配但仍然没有成功。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:35:22.717

您可以使用 jQuery 使用此代码更改标题

```
$('title').text('new title text goes here'); 
```

这是您想要的还是您正在寻找如何在发送到 parseScript 函数的源中找到标题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:37:14.460

如果没有 RegEx，您的代码会容易得多：

```
function parseScript() {
    var scripts = document.getElementsByTagName('script');
    for (var i = 0; i < scripts.length; i++) {
        var src = scripts[i].src;
        if(src) {
            addScriptTag(src);
        }
    }
} 
```

# javascript - 为什么我不能打印我的对象数据？

> ID：14081137
> 
> 赞同：-1
> 
> 时间：2012-12-29T11:19:31.600
> 
> 标签：javascript, node.js

这是我的代码：

```
var express = require('express');
var app = express();
var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'root',
  password : '1',
  database : 'test'
});
connection.connect();

app.configure(function(){
    app.set('view engine', 'jade');
    app.set('views', __dirname + '/html');
});

app.get('/index/:name',function(req, res){
    data = connection.query('SELECT * FROM deneme', function(err, rows, fields){
        if(err) throw err;
        veri = rows;
        return veri;
    });

    res.render('index', {
        title: req.params.name,
        data: data
    });
});

app.listen(8080); 
```

不久我想打印我的mysql数据

```
INSERT INTO `deneme` (`id`, `name`) VALUES
(1, 'yusuf'),
(2, 'ali'); 
```

当我调用 localhost:8080/index/yusuf 时，它显示如下：

```
[object Object] 
```

我可以打印什么数据？

**编辑**

我的 index.jade 文件：

> ！！！5 html头标题=标题正文p=数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:21:28.030

如果你想要一个字符串表示，你可以使用`JSON.stringify(myObject)`.

## 编辑：

```
res.render('index', {
    title: req.params.name,
    data: JSON.stringify(data)
}); 
```

但我不确定这是否是你想要的。您可能希望通过引用它们来访问数据的属性： `#{data.someProperty}`.

或者您可以让数据对象在打印时返回一个字符串表示。[这是一个例子](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)。

# php - 在 MySQL 中使用 PCRE 正则表达式

> ID：14081138
> 
> 赞同：4
> 
> 时间：2012-12-29T11:19:39.673
> 
> 标签：php, mysql, regex, database, pcre

有没有办法通过生产服务器上的 MySQL 数据库可靠地启用和使用全功能的 PCRE 正则表达式，即使用捕获组、模式修饰符（区分大小写/不区分大小写、多行）、元字符、转义序列（`\s`, `\w`）和其他 PCRE 好东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T11:29:20.367

[MySQL UDF](http://www.mysqludf.org/lib_mysqludf_preg/)

> lib_mysqludf_preg 是一个 mysql UDF（用户定义函数）库，提供对 PCRE（perl compatible-regular-expressions）库的访问以进行模式匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-23T09:37:58.727

切换到 MariaDB。从 10.0.5 开始，MariaDB 支持 PCRE [https://mariadb.com/kb/en/mariadb/pcre/](https://mariadb.com/kb/en/mariadb/pcre/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T13:05:45.427

# php - 处理请求后 xmlhttprequest 是否保持连接打开？

> ID：14081141
> 
> 赞同：7
> 
> 时间：2012-12-29T11:20:15.880
> 
> 标签：php, javascript, ajax, codeigniter, xmlhttprequest

我做了一个简单的ajax...

请求和响应标头都包含连接：`Keep-Alive`

我凝视了一下，看到客户端因此与服务器保持持久连接。这支持流水线，客户端可以发送多个请求而无需等待每个响应。

所以我有一些问题：

1.  xmlhttprequest 实际上在哪里打开到服务器的连接？
2.  创建许多 xmlhttprequest 对象是打开它们自己的连接还是使用流水线在同一连接上发送它......？
3.  我想处理同时请求..我可以排队请求（存储参数）..并在onreadystate提供函数来处理它..即调用递归发出请求的函数？或者这根本不是一个好主意？
4.  连接何时关闭..在什么阶段？

*其他信息：* 我不想为 ajax 使用 jquery 或任何其他库。不过你可以提出建议。我可以检查它们是如何工作的。我正在使用 javascrip 和 php（codeigniter 框架）。我希望能够处理达到限制时发出的多个请求（2）..和队列请求。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T15:40:02.700

XMLHttpRequest 是一个对象，可让您在不刷新页面的情况下从服务器请求和接收数据。它使用`HTTP`或`HTTPS`请求。它与请求和接收 HTML 页面基本相同。您可以同步或异步打开它们。

```
XMLHttpRequest.open( Method, URL, Asynchronous, UserName, Password ) 
```

这里，`Method`是`HTTP`使用的请求方法。见[http://www.w3.org/TR/XMLHttpRequest/#the-open()-method](http://www.w3.org/TR/XMLHttpRequest/#the-open()-method)

> 我想处理同时请求..我可以排队请求（存储参数）..并在onreadystate提供函数来处理它..即调用递归发出请求的函数？或者这根本不是一个好主意？

我会创建一个 XMLHttpRequests 数组并处理数据并从数组中删除 XMLHttpRequest `onreadystatechange`。请记住，您将收到混合顺序的异步响应，或者可能根本不会收到响应。

> 连接何时关闭..在什么阶段？

它在收到数据后立即关闭。请注意，这`keep-alive`是关于保持会话活动，而不是连接。

# ios - IOS用户在应用程序启动时在textView区域启动

> ID：14081153
> 
> 赞同：0
> 
> 时间：2012-12-29T11:22:16.653
> 
> 标签：ios, xcode, cocoa-touch, textview

在我的第一个视图中，我有一个 textView 区域。到目前为止，用户必须单击/触摸该区域才能开始输入。

我希望光标在视图加载时处于该区域，这样您就可以直接开始输入，可以这样做吗？

我也希望键盘动画（然后会直接发生）移动得更慢，这也可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:27:07.210

你需要调用`becomeFirstResponder`你的`textArea`in`viewDidAppear`方法。

```
- (void)viewDidAppear:(BOOL)animated
{
   [yourTextArea becomeFirstResponder];
} 
```

`becomeFirstResponder`从`viewDidLoad`不能正常工作。

如果您需要实现慢速动画，您可以使用：

```
[UIView animateWithDuration:1.0 animations:^
{
     [yourTextArea becomeFirstResponder];
}]; 
```

根据您的需要更改持续时间。

* * *

完全实现的代码如下所示：

```
- (void)viewDidAppear:(BOOL)animated
{
   [UIView animateWithDuration:1.0 animations:^
   {
      [yourTextArea becomeFirstResponder];
   }];
} 
```

# c++ - 将 {pointer to function with C links} 分配给 {pointer to function with C++ links}，反之亦然

> ID：14081154
> 
> 赞同：3
> 
> 时间：2012-12-29T11:22:26.500
> 
> 标签：c++, function-pointers, extern, linkage

这段代码合法吗？

```
extern "C" typedef void (ft_blah_c)();
/*extern "C++"*/ typedef void (ft_blah_cpp)();

extern "C" void fn_blah_c() {}
/*extern "C++"*/ void fn_blah_cpp() {}

ft_blah_c *g_Blah_c = fn_blah_cpp; // <--- ?
ft_blah_cpp *g_Blah_cpp = fn_blah_c; // <--- ? 
```

我有具有类似分配的真实代码，它编译和执行没有任何问题（MSVC 2010）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T11:52:58.147

一般来说，这不应该工作。问题是，当您调用`fn_blah_c`或`fn_blah_cpp`直接调用时，编译器*知道*要使用的函数和调用约定，但是如果将它们存储在函数指针中，编译器只能看到该指针，并且只能使用函数指针的类型来确定如何传递参数和返回类型。

如果 C 和 C++ 的调用约定在您的环境中是相同的，那么它可以工作（这可能是您的编译器允许它的原因），但通常情况并非如此，分配应该失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T19:18:03.270

不，这是不合法的；函数类型之间的转换不能是隐式的。

在函数类型之间显式转换是合法的：

```
ft_blah_c *g_Blah_c = reinterpret_cast<ft_blah_c>(fn_blah_cpp);
ft_blah_cpp *g_Blah_cpp = reinterpret_cast<ft_blah_cpp>(fn_blah_c); 
```

然而，实际上通过不同类型的函数指针调用函数是未定义的行为。在调用函数之前，您必须转换回原始类型。

在标准范围之外，其根本原因是用于调用函数的机器指令可能因函数的语言链接而异。这被称为[“调用约定”](http://en.wikipedia.org/wiki/Calling_convention)，涉及许多细节，例如参数和返回值传递约定、函数序言和结尾等。

例如，具有 C 语言链接的函数可能希望在堆栈上找到其参数，而具有 C++ 语言链接的函数可能希望在寄存器中传递参数。如果调用代码不知道正确的链接，它将把参数数据放在一个地方，而函数将在另一个地方查找并且只读取垃圾，因此无法正确操作。

# jquery - 如何防止浏览器（firefox）每次显示时都下载embed src？

> ID：14081161
> 
> 赞同：0
> 
> 时间：2012-12-29T11:22:48.130
> 
> 标签：jquery, flash, embed, show

我在我的滑块中嵌入了标签来显示 Flash 动画。浏览器每次显示时都会下载 swf 文件（src 属性不会改变）。此滑块中的图像仅被获取一次，而每次都嵌入对象。

您知道如何停止此下载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:48:20.400

除了 Tom 分享的内容之外，您还应该检查您是否正在查看正确的参数。

如果您可能正在查看获取请求，请确保它不是“**未修改**”：

![在此处输入图像描述](../Images/c409c31d9ed0b6a71d94b38ed600e5ef.png)

如果是，那么您不必担心，它来自缓存。

浏览器处理冗余请求并从缓存中加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:33:51.793

这可能取决于下载 SWF 文件时从服务器返回的 Cache-Control HTTP 标头。如果标头如下：`Cache-Control:max-age=900`这意味着资源将在您的浏览器中缓存 900 秒。如果标头是`Cache-Control:max-age=0`这意味着没有缓存，并且每次请求页面时都会下载资源。

您可以使用 Firefox Firebug 检查 Cache-Control 标头（来自 Adob​​e 网站的 SWF 请求示例）

![在此处输入图像描述](../Images/a540cdd7f7cbc7f2a176159395bedc27.png)

**编辑**

如果您注意到`Cache-Control`设置为，`max-age=0`那么您将不得不更改服务器上的配置。从浏览器的角度来看，您无能为力。您还应该看到`Cache-Control`为图像设置的标题；您可以比较它们的值。

# c - 使用链表实现队列时出现未知编码错误

> ID：14081163
> 
> 赞同：2
> 
> 时间：2012-12-29T11:22:52.723
> 
> 标签：c, algorithm, data-structures, queue

以下是我使用链表实现队列。我对数据结构完全陌生，正在尝试实现队列数据结构。这段代码编译成功，但一旦我尝试运行它，程序就会崩溃。我不知道怎么做解决这个问题。如果你们有任何线索，我的代码有什么问题，请给我一个想法。

谢谢你的帮助。

这是我的 C 代码：

```
#include<stdio.h>
#include<stdlib.h>
#define null 0
typedef struct node//node of a linked list
{
    int info;//info part of node
    struct node* next;// next pointer of a node
}*nodeptr;
typedef struct queue
{
    nodeptr front;//front pointer of a queue
    nodeptr rear;//rear pointer of a queue
} *QUEUE;

int empty_queue(QUEUE qwe)//if queue is empty then return 1
{
    if (qwe->front==null)
    return 1;
    else
    return 0;
}
void insert_queue( QUEUE qwe,int x)
{
    nodeptr p=(nodeptr)malloc(sizeof(struct node));//allocate new memory space to be added to queue
    p->next=null;
    p->info=x;
    if(empty_queue(qwe))//if the queue is empty,front and rear point to the new node
    {
    qwe->rear=p;
    qwe->front=p;
    return; 

    }
    qwe->rear->next=p;
    qwe->rear=p;
    //rear points to the new node
    return; 
}
int delete_queue(QUEUE qwe)
{   
    int x;
    if(empty_queue(qwe))//if queue is empty then it is the condition for underflow
    {
        printf("underflow\n");
        return;
    }
    nodeptr p=qwe->front;//p points to node to be deleted
    x=p->info;//x is the info to be returned
    qwe->front=p->next;
    if(qwe->front==null)//if the single element present was deleted
    qwe->rear=null;
    free(p);
    return x;

}
int main()
{
    int a;
    QUEUE qwe;
    qwe->rear=null;
    qwe->front=null;
    printf("enter values to be enqueued and -1 to exit\n");
    while(1)
    {
        scanf("%d",&a);
        if(a==-1)
        break;
        insert_queue(qwe,a);
    }
    printf("the values you added to queue are\n");
    while(!empty_queue(qwe))
    printf("%d\n",delete_queue(qwe));
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T11:25:34.417

`QUEUE qwe;`声明一个指向未初始化内存的指针。您需要在堆栈上为队列分配内存

```
struct queue qwe
qwe.rear=null; 
```

或在堆上动态

```
QUEUE qwe = malloc(sizeof(*qwe));
qwe->rear=null;
...
free(qwe); /* each call to malloc requires a corresponding free */ 
```

当您将指针隐藏在 typedef 后面时，很容易引入这种类型的 buf。另一种解决方案是更改`QUEUE`为 type `struct queue`。然后，您更有可能注意到代码中任何未初始化的指针。

# ruby-on-rails - 在 Rails 中建立 ActiveRecord 关联时是否总是需要数据库迁移？

> ID：14081166
> 
> 赞同：0
> 
> 时间：2012-12-29T11:23:12.123
> 
> 标签：ruby-on-rails, activerecord, migration

许多 Rails 教程将 ActiveRecord 关联的设置描述为需要建立外键的数据库迁移（例如，使用 has_many/belongs_to 关系）。然而其他文档似乎完全省略了迁移部分，只是更新模型、嵌套路由等。

迁移是否总是需要将两种资源绑定在一起，还是只需要某些类型的关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:27:57.983

是的，它是创建关联的必需品。但是在某处我看到了仅为模型中的注释 has_many/belongs_to 属性创建关联的 gem。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:28:37.957

您必须始终在相关的表之间有外键，例如：如果您有两个模型`User`和`Task`，您需要存储任务所属的用户，因此您始终需要关系的外键，您可以在您的数据库而不需要迁移，但这是一种非常糟糕的做法，因为迁移提供回滚，并且在您与其他人在同一个项目中工作时是必不可少的。

# javascript - Firefox 的 window.close() 解决方法

> ID：14081176
> 
> 赞同：0
> 
> 时间：2012-12-29T11:23:51.653
> 
> 标签：javascript, firefox

> **可能重复：**
> [window.close() 在 Firefox 上不起作用，有什么解决方法吗？](https://stackoverflow.com/questions/1754374/window-close-doesnt-work-on-firefox-any-work-around)

我正在使用 firefox 17.0.1 并且该方法`window.close()`不适用于我，这是`<button onclick="window.close()">Close<button>` 适用于 chrome 的代码，如何在 firefox 中使用 js 关闭当前窗口？

# amazon-web-services - 如何在浏览器中编辑 AWS S3 中的文件？

> ID：14081177
> 
> 赞同：34
> 
> 时间：2012-12-29T11:24:38.230
> 
> 标签：amazon-web-services, amazon-s3, cloud, text-editor

我在 Amazon 的 S3 系统上托管了我的主页。为了更改页面上的信息，目前，我必须更改计算机上的文件并上传新版本。但是，我想直接在浏览器中更改 S3 存储桶中的文件（在任何地方更改）。

是否有可以将 S3 用作“文件系统”并允许我更改文本文件（例如 html、css、js 等）的基于云的文本编辑器？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2018-09-24T21:47:13.337

我会使用`S3 Sync`from`awscli`下载文件并在本地编辑它们，然后再将它们同步回原始位置并更新原始文件。

此处有关 S3 同步的文档：[https ://docs.aws.amazon.com/cli/latest/reference/s3/sync.html](https://docs.aws.amazon.com/cli/latest/reference/s3/sync.html)

编辑：示例：

1.  `aws s3 sync s3://mybucket .`
2.  在本地编辑文件
3.  `aws s3 sync . s3://mybucket`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T11:51:51.210

您可以使用免费的[CloudBerry Explorer for Amazon S3](http://www.cloudberrylab.com/download-thanks.aspx?prod=cbes3free)直接从 S3浏览、设置您的存储桶、上传、下载和**编辑**您的文件

CloudBerry[宣布](http://blog.cloudberrylab.com/2012/01/how-to-edit-multiple-files-with.html)了舒适的多文件编辑和自动上传您的更改。

**编辑**

如果您需要基于 Web 的编辑器，您可能想看看这个[浏览器编辑器](http://www.karamasoft.com/ultimateeditor/samples/contenthandling/editorcontentamazons3/editorcontentamazons3.aspx)。显然它能够从 s3 存储桶中读取文件，但需要安装在您自己的网络空间中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-29T11:27:00.213

不，目前没有 AWS 支持的在浏览器中编辑 S3 文件的方法（就像您可以在 cPanel 中一样）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-11-17T03:07:44.610

如果您使用 VSCode 并安装*AWS 扩展*，您可以：

1.  在您在 VSCode 窗口中获得的 AWS Explorer 中打开 S3 中所需的存储桶
2.  在 AWS Explorer 中右键单击所需文件，然后选择“下载为...”，选择位置，然后按“下载”
3.  在本地编辑文件
4.  在 AWS Explorer 中再次右键单击该文件并选择“Upload to Parent...”，选择该文件，然后按“Upload”

# .net - 想要显示和存储数据库中的图像

> ID：14081178
> 
> 赞同：0
> 
> 时间：2012-12-29T11:24:40.377
> 
> 标签：.net, ext.net

我的数据库中有一个客户表。其中有一个字段图像，其中存储了文件的名称。现在我希望当我保存数据时，图像应该存储在我项目的图像文件夹中，并且图像（文件名）的名称应该存储在数据库中？我怎样才能做到这一点？此外，如果我想编辑客户端的数据，则相应的客户端图像应显示在面板中。我希望图像显示在图像字段中

```
<ext:Panel ID="Panel1" runat="server" Height="370"  RowSpan="3" Width="300"  Title="Upload Visiting card">
    <Items>
          <ext:Image ID="Image1" runat="server" Height="300" Padding="10">
                    </ext:Image>
        <ext:FileUploadField ID="FileUploadField1" runat="server" FieldLabel="Upload Image" 
        Width="285" LabelWidth="70" >
        </ext:FileUploadField>
    </Items>
</ext:Panel> 
```

我怎么能在 ext.net 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T02:00:49.237

请看一下这些例子：

[http://examples.ext.net/#/Miscellaneous/Image/Resizable/](http://examples.ext.net/#/Miscellaneous/Image/Resizable/) http://examples.ext.net/#/Form/FileUploadField/Basic/

要从数据库显示图像通常最好创建通用处理程序（ashx）并将 ImageUrl 设置为带有图像 ID 的处理程序。

上面的例子给出了文件上传的基本理解。有很多关于在 ASP.NET 上保存图像的示例。例如，[http://www.codeproject.com/Articles/126421/Image-Handling-In-ASP-NET](http://www.codeproject.com/Articles/126421/Image-Handling-In-ASP-NET)和[http://csharpdotnetfreak.blogspot.com/2009/07/fileupload-control-save-images-database .html](http://csharpdotnetfreak.blogspot.com/2009/07/fileupload-control-save-images-database.html)

# objective-c - exportAsynchronouslyWithCompletionHandler 因多个视频文件而失败（代码=-11820）

> ID：14081186
> 
> 赞同：8
> 
> 时间：2012-12-29T11:26:18.970
> 
> 标签：objective-c, ios, video

我正在录制小视频剪辑（大约一秒钟左右，前后摄像头都有，可能有不同的方向）。然后尝试使用 AVAssetExportSession 合并它们。我基本上用适当的变换和音频和视频轨道制作合成和视频合成。

问题是，在 iOS 5 上，如果您有 4 个以上的视频剪辑，它会失败，而在 iOS 6 上，限制似乎是 16 个剪辑。

这对我来说似乎真的很令人费解。AVAssetExportSession 是在做一些奇怪的事情，还是对可以传递给它的剪辑数量有一些未记录的限制？以下是我的代码的一些摘录：

```
-(void)exportVideo
{
    AVMutableComposition *composition = video.composition;
    AVMutableVideoComposition *videoComposition = video.videoComposition;
    NSString * presetName = AVAssetExportPresetMediumQuality;

    AVAssetExportSession *_assetExport = [[AVAssetExportSession alloc] initWithAsset:composition presetName:presetName];
    self.exportSession = _assetExport;

    videoComposition.renderSize = CGSizeMake(640, 480);
    _assetExport.videoComposition = videoComposition;

    NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent: @"export.mov"];
    NSURL *exportUrl = [NSURL fileURLWithPath:exportPath];

    // Delete the currently exported files if it exists
    if([[NSFileManager defaultManager] fileExistsAtPath:exportPath])
        [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];

    _assetExport.outputFileType = AVFileTypeQuickTimeMovie;
    _assetExport.outputURL = exportUrl;
    _assetExport.shouldOptimizeForNetworkUse = YES;

    [_assetExport exportAsynchronouslyWithCompletionHandler:^{
        switch (_assetExport.status)
        {
            case AVAssetExportSessionStatusCompleted:
                NSLog(@"Completed exporting!");
                break;
            case AVAssetExportSessionStatusFailed:
                NSLog(@"Failed:%@", _assetExport.error.description);
                break;
            case AVAssetExportSessionStatusCancelled:
                NSLog(@"Canceled:%@", _assetExport.error);
                break;
            default:
                break;
        }
    }];
} 
```

以下是这些作品的制作方式：

```
-(void)setVideoAndExport
{
    video = nil;
    video = [[VideoComposition alloc] initVideoTracks];

    CMTime localTimeline = kCMTimeZero;

    // Create the composition of all videofiles
    for (NSURL *url in outputFileUrlArray) {
        AVAsset *asset = [[AVURLAsset alloc]initWithURL:url options:nil];
        [video setVideo:url at:localTimeline];
        localTimeline = CMTimeAdd(localTimeline, asset.duration); // Increment the timeline
    }
    [self exportVideo];
} 
```

这是 VideoComposition 类的主要内容：

```
-(id)initVideoTracks
{
    if((self = [super init]))
    {
        composition = [[AVMutableComposition alloc] init];
        addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        mainInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
        instructions = [[NSMutableArray alloc] init];
        videoComposition = [AVMutableVideoComposition videoComposition];
    }
    return self;
}

-(void)setVideo:(NSURL*) url at:(CMTime)to
{
    asset = [[AVURLAsset alloc]initWithURL:url options:nil];

    AVAssetTrack *assetTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

    AVMutableCompositionTrack *compositionTrackVideo = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionTrackVideo insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack: assetTrack atTime:to error:nil];

    AVMutableCompositionTrack *compositionTrackAudio = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionTrackAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:[[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:to error:nil];

    mainInstruction.timeRange = CMTimeRangeMake(kCMTimeZero, CMTimeAdd(to, asset.duration));

    AVMutableVideoCompositionLayerInstruction *layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionTrackVideo];

    [layerInstruction setTransform: assetTrack.preferredTransform atTime: kCMTimeZero];
    [layerInstruction setOpacity:0.0 atTime:CMTimeAdd(to, asset.duration)];
    [instructions addObject:layerInstruction];

    mainInstruction.layerInstructions = instructions;
    videoComposition.instructions = [NSArray arrayWithObject:mainInstruction];
    videoComposition.frameDuration = CMTimeMake(1, 30);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T08:45:30.237

Okay, I also contacted Apple about this issue and they gave a response:

"This is a known condition. You are hitting the decoder limit set in AVFoundation."

They also asked me to file a bug report on the issue, since the error message that AVAssetExportSession gives if vague and misleading. So I filed a bug report to apple complaining about the fact that the error message is bad.

So these limits in AVAssetExportSession are confirmed. In iOS 5 the decoder limit is 4 and in iOS 6 it was raised to 16\. The main issue here is that the error reported by AVAssetExportSession is bad as it only reports: 11820 "Cannot Complete Export" instead of actually telling us that we have hit a limit.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T17:30:11.797

我也遇到过类似的问题。我已经设法通过将资产插入组合而不是将轨道插入可变轨道来修复它。因此，在您的“setVideo”代码中，而不是这一行：

```
[compositionTrackVideo insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack: assetTrack atTime:to error:nil]; 
```

尝试这个：

```
[self insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofAsset:asset atTime:to error:nil] 
```

# http - 如何解析 POST 请求的正文

> ID：14081189
> 
> 赞同：0
> 
> 时间：2012-12-29T11:26:51.907
> 
> 标签：http, parsing, post, parameters

我需要解析一个 POST 请求，特别是它的参数。我理解它的方式是请求的主体包含形式的参数列表`key1=value&key2=value`或其他数据，如上传的文件。有没有办法确定我得到了什么（参数或文件数据）？

一个快速的解决方案可能是正则表达式，但文件也可能包含以下形式的数据`key1=value&key2=value`

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T11:43:46.383

> 有没有办法确定我得到了什么（参数或文件数据）？

是的，但不是来自身体。您需要阅读请求标头`Content-Type`。

如果是`Content-Type: multipart/form-data`，则您已经获得了可以包含文件数据的复杂 MIME 多部分语法。

如果是`Content-Type: application/x-www-form-urlencoded`，则您已获得类似查询字符串的参数。

如果它是其他东西（例如`application/json`），您有一个自定义 POST 请求被其他东西触发，而不是直接提交表单，在这种情况下，由您决定该格式是什么。

# jquery - jQuery 文档布局（多种功能）

> ID：14081194
> 
> 赞同：0
> 
> 时间：2012-12-29T11:27:24.423
> 
> 标签：jquery, class, function, mouseenter, mouseleave

所以我是一名初级 c# 开发人员，目前我正在为自己编写一个新网站。我目前正在尝试这样做，以便我能够有一个类，一个名为“default”的锚标记，然后当你在锚上使用 mouseenter() 时，它将删除该类，然后添加“徘徊”。

然后当你 mouseleave() 时，“悬停”类被删除，“默认”类被再次附加。

然后我还会有一个 click() 调用来删除“默认”或“悬停”，然后附加“活动”类

我在如何布局我的 .js 文档时遇到了一些麻烦，这确实是一个非常愚蠢的问题......但我只是不确定如何编写一个 .js 文档，并拥有这些多个根据锚元素发生的情况调用不同的函数，所有这些都在一个文档中。

任何帮助表示赞赏，干杯，
-亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:36:34.600

可以使用任何 CSS 属性（例如颜色、字体系列、背景等）为链接设置样式。

链接的特殊之处在于它们可以根据它们所处的状态进行不同的样式设置。

四个链接状态是：

*   a:link - 一个正常的、未访问过的链接
*   a:visited - 用户访问过的链接
*   a:hover - 用户将鼠标悬停在链接上时的链接
*   a:active - 点击时的链接

因此，您可以将链接的样式设置为

```
a.default         {color:#336699;} 
a.default:link    {color:#FF0000;}      
a.default:visited {color:#00FF00;}  
a.default:hover   {color:#FF00FF;}  
a.default:active  {color:#0000FF;} 
```

[在这里演示](http://www.w3schools.com/css/tryit.asp?filename=trycss_link)

参考：[w3schools](http://www.w3schools.com/css/css_link.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:31:40.380

要使用 jQuery 执行此操作：

```
$('a.default').hover(
    function(){
        $(this).toggleClass('default hover');
    },
    function(){
        $(this).toggleClass('default hover');
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/gfJ6g/)。

或者你可以使用：

```
$('a.default').hover(
    function(){
        $(this).removeClass('default').addClass('hover');
    },
    function(){
        $(this).removeClass('hover').addClass('default');
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/gfJ6g/1/)。

但是，老实说，CSS 也可以工作，而且要简单得多：

```
a.default:link,
a.default:visited {
    /* default styles */
}

a.default:hover,
a.default:active {
    /* hovered styles */
} 
```

[JS 小提琴演示](http://jsfiddle.net/gfJ6g/3/)。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).
*   [`toggleClass()`](http://api.jquery.com/toggleClass/).

# php - 在 php 中的 simplexml_load_file 中设置连接超时

> ID：14081196
> 
> 赞同：1
> 
> 时间：2012-12-29T11:27:33.447
> 
> 标签：php, timeout, simplexml

我使用`simplexml_load_file()`功能从远程网络获取天气。

它在正常情况下工作正常。但是当互联网不可用时，我的脚本会等待很长时间才能响应。

我已经从嵌入式板而不是浏览器执行 php 页面。

所以我想为此抽出时间。

是否可以将连接超时`simplexml_load_file()`？

如果有其他选择，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:29:11.277

您正在寻找名为 的 PHP 函数`set_time_limit()`，它允许您限制 PHP 脚本的执行时间。

# php - 通过短查询选择多条记录

> ID：14081202
> 
> 赞同：0
> 
> 时间：2012-12-29T11:27:59.110
> 
> 标签：php, mysql, pdo

```
function comp_post_code($comp_post_code){
global $host, $dbname, $user, $pass;
$DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
$DBH->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION); ///*** for error handling
$STH = $DBH->prepare("SELECT * from uk_data where 
comp_post_code like :comp_post_code and cat1 like :cat");
$STH->bindValue(':cat', "%$cat1%", PDO::PARAM_STR);
$STH->bindValue(':comp_post_code', "%$comp_post_code%", PDO::PARAM_STR);
$STH->execute();
$STH->setFetchMode(PDO::FETCH_ASSOC);
return $STH;
} 
```

我有cat1到cat10 ..我想在不编写长代码的情况下获得数据输出

```
 and comp_post_code like :comp_post_code and cat2 like :cat
 and comp_post_code like :comp_post_code and cat3 like :cat 
```

我有办法解决这个问题...我们可以编写 ong 代码并退出，但仍然想知道我们可以用其他方式吗？

表结构

comp_post_code cat1 cat2 cat3 cat4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:42:59.767

根据您评论的详细信息：

```
SELECT * from uk_data where 
comp_post_code like :comp_post_code AND (
cat1 like :cat OR
cat2 like :cat OR
cat3 like :cat OR
cat4 like :cat OR
cat5 like :cat OR
cat6 like :cat OR
cat7 like :cat OR
cat8 like :cat OR
cat9 like :cat OR
cat10 like :cat
) 
```

# javascript - JavaScript中的XPCOM，launchFunctionW？

> ID：14081206
> 
> 赞同：0
> 
> 时间：2012-12-29T11:28:34.510
> 
> 标签：javascript, firefox-addon, mozilla, xpcom

我研究了一个开源的Firefox插件，我想知道下面的代码片段做了什么动作。我对代码一无所知？？

```
enter: function()
        {
            if (this.xpcomObject != undefined || this.createXPCOMObject())
                this.xpcomObject.launchFunctionW("enter", "", "", "");
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:01:08.523

在 Mozilla 源代码中搜索“launchFunctionW”产生零结果（请参阅[http://mxr.mozilla.org/comm-central/search?string=launchfunctionw&filter=](http://mxr.mozilla.org/comm-central/search?string=launchfunctionw&filter=) ^[^\0]*%24&tree=comm-central 尝试做到这一点）。因此，这个函数很可能是由你的插件定义的。

从函数的命名和 XPCOM 对象的存在来看，我怀疑这个函数可能只是用 C++ 编写的。周围有二进制对象吗？你有它的来源吗？您是否尝试过搜索“launchFunctionW”的源目录？

如此稀缺的信息很难帮助你...

# jquery - jQuery 仅部分适用于 Click 功能

> ID：14081210
> 
> 赞同：1
> 
> 时间：2012-12-29T11:28:59.090
> 
> 标签：jquery, ajax

我有一点 jQuery（请原谅可怕的 html 附加 - 这些最终将被缩短！）

```
$(function () {
  $(".follow").click(function () {
    var element = $(this);
    var I = element.data("userid");
    var info = 'id=' + I;
    var Something = $('#latestbettors tr[data-userid=' + I + ']').find('td:eq(0)').text();

    $.ajax({
      type: "POST",
      url: "follow.php",
      data: info,
      success: function () {
        $('.follow[data-userid=' + I + ']').fadeOut(200).hide();
        $('.following[data-userid=' + I + ']').fadeIn(200).show();
        if ($('#yourfollowers table tr > td:contains("You arent currently following any bettors")')) {
          $('#yourfollowers table tr:contains("You aren\'t currently following any bettors")').remove();
        }
        if ($('#yourfollowers tr:contains("' + I + '")') && $('#yourfollowers tr > td:contains("' + Something + '")').length < 1) $('#yourfollowers table').fadeIn(200).append("<tr data-userid='" + I + "'><td>" + Something + "</td><td><a href='#'data-userid='" + I + "' class='following'></a><a href='#' data-userid='" + I + "' class='follow' style='display:none'></a></td></tr>");
      }
    });
    return false;
  });
});

$(function () {
  $(".following").click(function () {
    var element = $(this);
    var J = element.data("userid");
    var infos = 'id=' + J;

    $.ajax({
      type: "POST",
      url: "unfollow.php",
      data: infos,
      success: function () {
        $('.following[data-userid=' + J + ']').fadeOut(200).hide();
        $('.follow[data-userid=' + J + ']').fadeIn(200).show();
        $('#yourfollowers tr[data-userid=' + J + ']').fadeOut(200).remove();

        if ($('#yourfollowers table tr').length == 0) {
          $('#yourfollowers table').append('<tr><td>You aren\'t currently following any bettors</td></tr>');
        }
      }
    });
    return false;
  });
}); 
```

我有两张桌子——最新的投注者和关注者。最新的投注者表包括所有新注册的用户，每个用户旁边都有一个关注按钮（如果用户关注他们，则关注他们）......下表包括用户正在关注的所有用户，每个用户旁边都有一个关注按钮。

当用户单击“最新投注者”表中的关注按钮时，它会将他们关注的用户附加到“关注表” - 这很有效。但是，当用户在“关注”表中单击“关注”按钮后 - 什么也没有发生？为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:33:50.820

对于动态生成的元素，事件应该从元素或文档对象的静态父对象之一委托，您可以使用`on`or`delegate`方法：

```
$(document).on('click', '.following', function(){ 
```

如果您使用 1.7 以下版本的 jQuery，您还可以使用`delegate`方法：

```
$(document).delegate('.following', 'click', function(){ 
```

[由[@Exception](https://stackoverflow.com/users/1008575/exception)更新：]

你也可以使用

```
$('.following').live('click', function(){ 
```

但`live`在最新版本的 jQuery 中已弃用。如果您使用旧的 jQuery 版本，它现在可能可以工作，但它可能不适用于您使用的最新版本的 jQuery。

# java - 从超类错误中调用子类的重写方法？

> ID：14081211
> 
> 赞同：0
> 
> 时间：2012-12-29T11:29:02.793
> 
> 标签：java, superclass

我有以下两组 Java 代码。第一个有效，第二个无效？

```
package animal;

import javax.swing.JOptionPane;
import java.util.ArrayList;

public class Animal {

    public static void main(String[] args) {
        Animal createAnimals = new Animal();
        createAnimals.printInfo();
        String userInput = createAnimals.userInputHandle();
        Fishes a = new Fishes();

        switch (userInput) {
            case ("shark"):
                a.printInfo();
        }
    }

    private void printInfo() {
        JOptionPane.showMessageDialog(null, "Welcome to Animal Kingdom.");
    }

    private String userInputHandle() {
        String userInput;
        userInput = JOptionPane.showInputDialog("Select animal from the "
                + "following list"
                + "\n1.Dog\n2.Cat\n3.Snake\n4.Frog"
                + "\n5.Human\n6.Shark\n7.Sea Gulls");
        userInput = userInput.toLowerCase();

        return userInput;
    }
}

class Fishes extends Animal {

    public void printInfo() {
        JOptionPane.showMessageDialog(null, "Shark belongs to Fish subclass of Animal kingdom.");

    }
} 
```

第二组代码是

```
package animal;

import javax.swing.JOptionPane;
import java.util.ArrayList;

public class Animal {

    public static void main(String[] args) {
        Animal createAnimals = new Animal();
        createAnimals.printInfo();
        String userInput = createAnimals.userInputHandle();

        ArrayList<Animal> animalList = new ArrayList<Animal>();

        animalList.add(new Fishes());

        switch (userInput) {
            case ("shark"):
                animalList.get(0).printInfo();
            case ("sea gulls"):
        }
    }

    private void printInfo() {
        JOptionPane.showMessageDialog(null, "Welcome to Animal Kingdom.");
    }

    private String userInputHandle() {

        String userInput;
        userInput = JOptionPane.showInputDialog("Select animal from the "
                + "following list"
                + "\n1.Dog\n2.Cat\n3.Snake\n4.Frog"
                + "\n5.Human\n6.Shark\n7.Sea Gulls");
        userInput = userInput.toLowerCase();

        return userInput;
    }
}

class Fishes extends Animal {

    public void printInfo() {
        JOptionPane.showMessageDialog(null, "Shark belongs to Fish subclass of Animal kingdom.");

    }
} 
```

这里`printInfo`没有调用被覆盖的方法，`animalList.get(0).printInfo()`而是调用了类动物的方法？为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T11:35:50.243

`#printInfo``private`在子类中并且`Animal`不能被子类覆盖，您应该将其设为`protected`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:36:31.513

**私有**方法不会在子类中**被覆盖。**改变

```
 private void printInfo() { 
```

至

```
 public  void printInfo() { 
```

或者

```
 protected  void printInfo() { 
```

在*动物班*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T11:36:16.017

尝试将对象转换为子类，即 (Fishes)animalList.get(0).printInfo();

请注意，在强制转换之前，使用 instanceof 比较器检查对象使用的 if 语句始终是一个好主意。

# xml - Xquery 节点返回 HTML 代码并且浏览器不读取它

> ID：14081212
> 
> 赞同：3
> 
> 时间：2012-12-29T11:29:06.403
> 
> 标签：xml, xquery, xpath-3.0, xquery-3.0

我有一个如下所示的 XML 代码：

```
<description>&lt;div style=&quot;text-align: justify;&quot;&gt;El Casino de Asturias alberga una sala polivalente para cualquier tipo de acto desde conferencias, convenciones o reuniones de trabajo, hasta banquetes y celebraciones. Dispone de programaci&#243;n mensual de conciertos y actividades y de una variada carta de c&#243;cteles.&lt;br/&gt;&lt;br/&gt;&lt;h4&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;Descuento del 30% con la tarjeta tur&#237;stica Gij&#243;n Card (S&#243;lo en la entrada al recinto, no incluye espect&#225;culos)&lt;br/&gt;&lt;/span&gt;&lt;/h4&gt;&lt;/div&gt;</description> 
```

我知道它是西班牙语，但只要看看 html 代码，在 XML 中间就有一些“divs”、“ul”（obiusly “li”）

嗯....当我在它上面创建一个 XQuery 查询时，我把这个描述放在表的一行中，如下所示：

```
<table id="pubs" border="1">
        { 
        for $dir in doc("/db/Ocio/pubs.xml")//dir
        order by $dir/name
        return
            <tr>
            <td><p>{$dir/description/text()}</p></td>
            </tr>
        }
</table> 
```

问题是，当我在网上显示这个文本时，文本完全是 xml 文本，我的浏览器不解析 HTML 代码并显示类似的东西`"<ul><li>somethins...</li></ul>"`，我不知道如何强制浏览器解析 html，我用谷歌搜索它，但所有的解决方案都给了我如何使用 Xquery 创建 HTML，而不是强制浏览器解析 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T18:17:41.953

**如果您有 XQuery 3.0，那么您可以`parse-xml()`像这样使用新功能**：

```
 let $doc := 
    <description>&lt;div style=&quot;text-align: justify;&quot;&gt;El Casino de Asturias alberga una sala polivalente para cualquier tipo de acto desde conferencias, convenciones o reuniones de trabajo, hasta banquetes y celebraciones. Dispone de programaci&#243;n mensual de conciertos y actividades y de una variada carta de c&#243;cteles.&lt;br/&gt;&lt;br/&gt;&lt;h4&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;Descuento del 30% con la tarjeta tur&#237;stica Gij&#243;n Card (S&#243;lo en la entrada al recinto, no incluye espect&#225;culos)&lt;br/&gt;&lt;/span&gt;&lt;/h4&gt;&lt;/div&gt;</description>

     return
        <table id="pubs" border="1">
            <tr>
            <td><p>{$doc/text()/parse-xml(.)}</p></td>
            </tr>
</table> 
```

**执行此 XQuery 时，会生成正确的结果（标记 -- 不是文本）**：

```
<table id="pubs" border="1">
  <tr>
    <td>
      <p>
        <div style="text-align: justify;">El Casino de Asturias alberga una sala polivalente para cualquier tipo de acto desde conferencias, convenciones o reuniones de trabajo, hasta banquetes y celebraciones. Dispone de programación mensual de conciertos y actividades y de una variada carta de cócteles.<br/>
          <br/>
          <h4>
            <span style="font-weight: bold;">Descuento del 30% con la tarjeta turística Gijón Card (Sólo en la entrada al recinto, no incluye espectáculos)<br/>
            </span>
          </h4>
        </div>
      </p>
    </td>
  </tr>
</table> 
```

# c# - 登录屏幕中的屏幕截图

> ID：14081220
> 
> 赞同：0
> 
> 时间：2012-12-29T11:30:05.800
> 
> 标签：c#, windows, winforms, winlogon, printscreen

我正在尝试获取 Windows 7 登录屏幕（或切换用户屏幕）的打印屏幕以在我的应用程序中使用。

事实上，我不知道该怎么做。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T11:44:32.953

您需要创建一个 Windows 服务，以便即使用户未登录，它也可以运行，请查看这篇[文章](http://myhosting.com/blog/2010/09/creating-windows-service-visual-studio-2010/)，有关更多信息，请阅读 MSDN ..

对于屏幕截图：

```
ScreenCapture sc = new ScreenCapture();
// capture entire screen, and save it to a file
Image img = sc.CaptureScreen();
// display image in a Picture control named imageDisplay
this.imageDisplay.Image = img; 
// capture this window, and save it
sc.CaptureWindowToFile(this.Handle,"C:\\temp2.gif",ImageFormat.Gif); 
```

来源： http: [//www.developerfusion.com/code/4630/capture-a-screen-shot/](http://www.developerfusion.com/code/4630/capture-a-screen-shot/)

# c# - object[] = object[] f = new object[] 和 var f = new [] 的区别？

> ID：14081222
> 
> 赞同：1
> 
> 时间：2012-12-29T11:30:37.480
> 
> 标签：c#, anonymous-types

我是 C# 的新手，我想在最近的一个项目中使用匿名类型，但我遇到了一个需要你帮助的困惑问题。我一开始使用 object[]，但出现错误。代码如下所示：

```
 List<object> f = new List<object>(); 
        f.Add(new { Name = 1, Age = 31 });
        f.Add(new { Name = 2, Age = 31 });
        f.Add(new { Name = 3, Age = 4 });
        f.Add(new { Name = 4, Age = 1 });
        f.Add(new { Name = 5, Age = 1 });
        var a = f[0].Age; // no use 
```

但是这段代码很有用：</p>

```
 var f = new []
    {
        new { Name = 1, Age = 31 },
        new { Name = 2, Age = 31 },
        new { Name = 3, Age = 4 },
        new { Name = 4, Age = 1 },
        new { Name = 5, Age = 1 }
    };
    var a = f[0].Age; 
```

我只想使用匿名类型的列表并访问它的成员。我的方法有什么问题，我应该怎么做才能实现我的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T11:34:50.327

安`Object`没有`Age`财产。因此，第一种方法无法编译，因为您已将匿名类型装箱为对象。

第二个有效，因为编译器知道它是哪种（匿名）类型。

您不能在当前方法之外使用匿名类型。因此，我建议使用具体类型。

```
class Person
{
    public int Age{ get;set; }
    public string Name{ get;set; }
} 
```

现在使用它：

```
var f = new List<Person>(){
             new Person{ Name = "1", Age = 31 },
             new Person{ Name = "2", Age = 31 },
             new Person{ Name = "3", Age = 4 },
             new Person{ Name = "4", Age = 1 },
             new Person{ Name = "5", Age = 1 }
};
var a = f[0].Age; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T11:34:25.760

**编辑**- 更新的答案。原始答案在最后。

以下不起作用

```
List<object> f = new List<object>(); 
```

因为对象没有`Age`属性。

要获取 Age 属性，您需要将类型转换为具体类型。但是由于您使用了匿名类型，因此您在编码时没有具体类型（因此您无法转换它）。

另一种（不鼓励的）替代方法是使用`reflection`

```
 PropertyInfo[] properties = f[0].GetType().GetProperties();
 var ageProperty = properties.First (x=> x.Name == "Age");
 var a = ageProperty.GetValue (f[0],null); // no use 
```

另一种选择（如果是 .NET 4.0 及更高版本）是使用关键字[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx).

```
 dynamic obj = f[0];
   int age = obj.Age;
   Console.WriteLine(age); // prints 31 
```

* * *

**原始答案**

改变

```
object[] f = new object[] 
```

到

```
 var f = new [] 
```

第一个会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:19:12.290

一个问题是因为您使用的是匿名类型（但也许这没关系，因为您首先尝试使用它们）您实际上无法声明或传递此列表（您如何声明`List<SomeAnonymousTypeThatDoesNotHaveAName>`？）

您可以通过利用泛型类型推断和使用泛型和作弊`var`：

```
public List<T> BuildList<T>(params T[] entries)
{
    return new List<T>(entries);
} 
```

当您`BuildList`再次调用 时，因为它们是匿名类型，您无法显式分配`<T>`，但您可以让类型推断处理它！

```
var list = BuildList(
    new { Name = 1, Age = 31 },
    new { Name = 2, Age = 31 },
    new { Name = 3, Age = 4 },
    new { Name = 4, Age = 1 },
    new { Name = 5, Age = 1 }); 
```

类型推断可以很好地处理匿名类型并构建您的列表！

```
Console.WriteLine(list.Count); //5
Console.WriteLine(list[0].Name + ", " + list[0].Age); //1, 31
Console.WriteLine(list.GetType().FullName); //System.Collections.Generic.List`1[[<>f__AnonymousType0`2[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], query_jyattd, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null]] 
```

编辑：更好的是做一个扩展方法！

```
public static class ArrayExtensions
{
    public static List<T> MakeAnonymousList<T>(this T[] entries)
    {
        return new List<T>(entries);
    }
} 
```

然后你可以像这样使用它：

```
var list = new[] {
    new { Name = 1, Age = 31 },
    new { Name = 2, Age = 31 },
    new { Name = 3, Age = 4 },
    new { Name = 4, Age = 1 },
    new { Name = 5, Age = 1 }}
    .MakeAnonymousList(); 
```

编辑：很酷的事情是你有一个完整的功能`List<T>`，你可以添加/删除/Linq。添加项目*必须*使用相同的参数和顺序：

```
list.Add(new { Name = 6, Age = 2 }); //OK
list.Add(new { Age = 2, Name = 6 }); //compile error!

var maxAge = list.Max(person => person.Age);
var oldPerson = list.Where(person => person.Age == maxAge).First();
Console.WriteLine(maxAge); //31
Console.WriteLine(oldPerson.Name + ", " + oldPerson.Age); //1, 31 
```

智能感知也很好用！

# http - 当我使用 telnet 与 http 服务器通信时，NVT 是否有任何副作用？

> ID：14081224
> 
> 赞同：0
> 
> 时间：2012-12-29T11:30:55.950
> 
> 标签：http, network-protocols, telnet

我正在研究 HTTP 协议，并尝试使用 telnet 与 http 服务器进行通信。一开始我并没有想太多，但是当我了解更多之后，我对telnet使用的NVT感到困惑。

我搜索了很多参考资料，似乎 HTTP 协议不使用 NVT。那就是问题所在。Telnet 将我的输入转换为 NVT ASCII，但 http 服务器不知道这一点。我认为telnet能与http服务器正常通信的原因是因为NVT ASCII在发送数据时等于ASCII。我想知道 NVT 是否将行尾更改为 CR 而不是 CRLF，telnet 是否仍能与 http 服务器正确通信。

我想知道我是否正确。如果我是对的，当我使用 telnet 执行此操作时，NVT 是否有任何副作用，为什么？如果我错了，那是 telnet 正确执行此操作的原因吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:35:01.677

您应该安装 Wireshark，这是一个网络嗅探器，可让您查看在您的界面上运行的每一位数据（字面上和比喻上）。这将允许您在数据包级别检查数据，这意味着您可以准确查看为 CR/CRLF 发出的字节。它（或其他类似的实用程序，如 tcpdump）对于诊断和黑盒化在文档中不容易回答的奇怪的低级网络行为至关重要。

# objective-c - 在 Objective-C 中在 iOS 6 上调整 MKMapView 的框架

> ID：14081226
> 
> 赞同：5
> 
> 时间：2012-12-29T11:31:16.863
> 
> 标签：objective-c, ios6, mkmapview

我正在尝试调整在 IB 上为 4 英寸设备创建的 MKMapView 的框架，但它不起作用。这是我在 viewDidLoad 上的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    // Resizing UILabel for 4-inch screen
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568) // 4 inch
    {
        mapView.frame = CGRectMake(0, 44, 320, 504);
    }
    else // 3.5 inch
    {
        mapView.frame = CGRectMake(0, 44, 320, 416);
    }
    // END - Resizing UILabel for 4-inch screen
} 
```

谁能告诉我这个设置有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T14:59:33.473

如果您只想将 mapView 设置为与视图控制器视图相同的大小（即填充屏幕），请将地图视图的框架设置为视图的边界，并为它们提供相同的自动调整大小掩码（您可以这样做在 viewDidLoad 中，您不必测试屏幕尺寸）

```
mapView.frame = self.view.bounds;
mapView.autoresizingMask = self.view.autoresizingMask; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T17:28:21.863

我对静态表视图有同样的问题一个单元格包括一个 MapView。

不同的 iphone 屏幕尺寸：地图视图单元格的不同单元格高度。

我查看了不同的方法，例如：

```
mapView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight); 
```

对我来说不幸的是，它仅在用户重新定位移动设备 => 重绘时才有效？

我的解决方案是在 IB 中正确使用 AUTO LAYOUT 并使用 constraint 它解决了我的问题

```
Left Horizontal Space Constraint = '0'
Right Horizontal Space Constraint = '0'
Top Vertical Space Constraint = '0'
Bottom Vertical Space Constraint = '0' 
```

--> 这是我在 stackoverflow.com 上的第一篇文章！:-)

# php - php服务器webservice不返回值

> ID：14081227
> 
> 赞同：0
> 
> 时间：2012-12-29T11:31:22.013
> 
> 标签：php, soap

我正在编写我的第一个 php web 服务（服务器端），但客户端调用没有收到任何数据。
我正在使用网络上的 SoapClient (http://soapclient.com/SoapClient) 检查服务，并调用 AggiornaCampionati 函数，这是回复：

```
 <?xml version="1.0" encoding="UTF-8" ?> 
 - <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.aicsparma.it/websrvs">
 - <SOAP-ENV:Body>  
 <ns1:AggCampiosResponse />   
 </SOAP-ENV:Body>  
 </SOAP-ENV:Envelope> 
```

那是空的（返回消息是 ok(AggCampiosResponse) ）！
服务器代码非常简单：

```
<?php

function AggiornaCampionati($args) {
    //return gettype($args)." - ".print_r($args);
    return("Pippo");
}

function AggiornaCampionato($args) {
    //$args = (int)$args;
    return 10;
}

function AggiornaRisultati($args) {
    $args = (int)$args;
    return $args;
}

function AggiornaCategoria($args) {
    //$args = (int)$args;
    return 10;
}

ini_set("soap.wsdl_cache_enabled", "0"); // disabling WSDL cache

$server = new SoapServer("aicscalcio.wsdl");
$server->addFunction("AggiornaCampionati");
$server->addFunction("AggiornaCampionato");
$server->addFunction("AggiornaRisultati");
$server->addFunction("AggiornaCategoria");

try {
    $server->handle();
}
catch (Exception $e) {
    $server->fault('Sender', $e->getMessage());
}
?> 
```

为什么不返回字符串值？
其他函数也不返回任何值！！
我如何确定调用 PHP 函数？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:41:57.983

解决了！
我不能直接返回字符串！
正确的功能是：

```
function AggiornaCampionati($args) {
return array( "sresult" => $args->nomeCampio,
    "iresult" => $args->id );
} 
```

（同时我还添加了一个整数）。
其他功能同理。

# django - 为什么 Django 和 AngularJS 在实现小部件/指令时不遵循它们的 MVC 模式？

> ID：14081230
> 
> 赞同：2
> 
> 时间：2012-12-29T11:31:44.367
> 
> 标签：django, model-view-controller, design-patterns, angularjs

Django 和 Angular 遵循 MVC（这种或另一种..）模式，因此应该将 HTML 与代码隐藏分开。

但是在浏览 Django 源代码时你可以很容易地发现：

```
class ClearableFileInput(FileInput):
    ....

    template_with_initial = u'%(initial_text)s: %(initial)s %(clear_template)s<br />%(input_text)s: %(input)s'

    template_with_clear = u'%(clear)s <label for="%(clear_checkbox_id)s">%(clear_checkbox_label)s</label>' 
```

而不是编写模板并使用 Context 渲染它。

或者

```
def as_table(self):
    "Returns this form rendered as HTML <tr>s -- excluding the <table></table>."
    return self._html_output(
        normal_row = u'<tr%(html_class_attr)s><th>%(label)s</th><td>%(errors)s%(field)s%(help_text)s</td></tr>',
        error_row = u'<tr><td colspan="2">%s</td></tr>',
        row_ender = u'</td></tr>',
        help_text_html = u'<br /><span class="helptext">%s</span>',
        errors_on_separate_row = False) 
```

而不是使用模板标签，或者使用外部模板。

* * *

与 AngularJS 相同，在主页上的示例中，您可以找到：

```
 this.addPane = function(pane) {
          if (panes.length == 0) $scope.select(pane);
          panes.push(pane);
        }
      },
      template:
        '<div class="tabbable">' +
          '<ul class="nav nav-tabs">' +
            '<li ng-repeat="pane in panes" ng-class="{active:pane.selected}">'+
              '<a href="" ng-click="select(pane)">{{pane.title}}</a>' +
            '</li>' +
          '</ul>' +
          '<div class="tab-content" ng-transclude></div>' +
        '</div>',
      replace: true 
```

而不是仅仅使用 templateUrl 而不是将模板写在一个单独的文件中，而不是在代码中。

这有充分的理由吗？还是其他一些合理的原因？

我自己没有找到一个，在编写小部件/指令时，我设法将 html 与代码分开，并且一切都按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:49:20.477

这显然是一个糟糕的模式；在 django 的情况下，有人努力在 GSoC 项目中修复它，但由于 django 模板速度慢，简单的字符串格式化要快得多，并且使用模板渲染字段被证明是一个真正的瓶颈，所以它很困难。`as_table`看起来像是为了向后兼容而保留在源代码中的剩余部分；开发人员不需要使用它。

我没有使用 AngularJS 的经验，但可能是单独文件中的模板意味着额外的 HTTP 请求。

# row - HBase FilterList.Operator.MUST_PASS_NONE 功能

> ID：14081232
> 
> 赞同：0
> 
> 时间：2012-12-29T11:31:50.950
> 
> 标签：row, filtering, hbase

我在 FilterLists 的层次结构中添加了多个行过滤器，它允许我仅从 HBase 表中过滤我需要的内容，如下所示：

```
FilterList list = new FilterList(FilterList.Operator.MUST_PASS_ONE);
FilterList uidList = new FilterList(FilterList.Operator.MUST_PASS_ALL);
if(term.length()>longSize){
    long highValue = Long.parseLong(term.substring(longSize));
    uidList.addFilter(new RowFilter(CompareFilter.CompareOp.GREATER_OR_EQUAL,
                            new BinaryComparator(Bytes.add(prefix, Bytes.toBytes(addLongPadding(lowValue))))));
    uidList.addFilter(new RowFilter(CompareFilter.CompareOp.LESS_OR_EQUAL,
                            new BinaryComparator(Bytes.add(prefix, Bytes.toBytes(addLongPadding(highValue))))));
} else
    uidList.addFilter(new RowFilter(CompareFilter.CompareOp.EQUAL,
                            new BinaryComparator(Bytes.add(prefix, Bytes.toBytes(addLongPadding(lowValue))))));
list.addFilter(uidList); 
```

这只是一个例子，在`list`. 有没有办法可以使用`FilterList`运算符来否定过滤器？对于这个例子，我需要过滤所有不在`lowValue`and之间的行，`highValue`而 else 分支的行是`NOT_EQUAL`我的 value( `lowValue == highValue`)。

我知道运营商是基于的`NAND`，`NOR`所以在技术上它是可能的，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:58:16.013

hbase 列没有 between 运算符。如果你想要那些类型的过滤器，你需要根据你的要求写在自己身上。

检查此代码段：

```
public ArrayList<HashMap<String, String>> between(String tableName,String colFamilyName, String [] colName,String betweenColName,String lowerValue,String upperValue)
{
    ResultScanner rs=null;
    ArrayList<HashMap<String, String>> al = new ArrayList<HashMap<String, String>>();
    Result res = null;
    try
    {
        HTable table = new HTable(conf, tableName);
        Scan scan = new Scan();
        SingleColumnValueFilter singleColumnValueFilterA = new SingleColumnValueFilter(
                Bytes.toBytes(colFamilyName), Bytes.toBytes(betweenColName), CompareOp.GREATER, Bytes.toBytes(lowerValue));
                singleColumnValueFilterA.setFilterIfMissing(true); 
        SingleColumnValueFilter singleColumnValueFilterB = new SingleColumnValueFilter(
                Bytes.toBytes(colFamilyName), Bytes.toBytes(betweenColName), CompareOp.LESS_OR_EQUAL, Bytes.toBytes(upperValue));
        singleColumnValueFilterB.setFilterIfMissing(true); 
        FilterList filter = new FilterList(Operator.MUST_PASS_ALL, Arrays.asList((Filter) singleColumnValueFilterA,
                singleColumnValueFilterB)); 
        scan.setFilter(filter); 
        rs = table.getScanner(scan);
        while((res=rs.next()) != null)
        {
            HashMap<String, String> map = new HashMap<String,String>();
            String s = null;
            for(int j=0 ; j < colName.length ; j++)
            {
                byte[] obtainedRow = res.getValue(Bytes.toBytes(colFamilyName),Bytes.toBytes(colName[j]));
                s = Bytes.toString(obtainedRow);
                map.put(colName[j],s);
            }           
            al.add(map);
        }
    } catch (IOException e)
    {
        System.out.println("Exception occured in retrieving data");
    }
    finally
    {
        rs.close();
    }
    return al;
} 
```

# ios - OSX（还有 iOS）：有没有办法知道缓存的用户 GPS 位置？

> ID：14081237
> 
> 赞同：3
> 
> 时间：2012-12-29T11:32:50.160
> 
> 标签：ios, macos, geolocation, location

为了确定用户的位置，我使用 CoreLocation 框架（我目前正在开发一个 OSX 应用程序（位置由 wifi 确定），但我的问题也可能适用于 iOS 应用程序）和以下委托方法：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

当由于某种原因无法找到用户位置时（例如，如果用户的计算机没有连接到互联网），则调用以下方法：

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

在这种情况下，我想获取最后一个已知的用户位置。我想知道是否有办法获得这个最后一个已知位置。某处是否有一系列以前确定的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:54:38.537

请参考官方文档：

[http://developer.apple.com/library/ios/ipad/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/doc/c_ref/CLLocation](http://developer.apple.com/library/ios/ipad/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/doc/c_ref/CLLocation)

据此，

```
@property(readonly, nonatomic) CLLocation *location 
```

> 如果从未检索到任何位置数据，则此属性的值为 nil。**在 iOS 4.0 及更高版本中，此属性可能在启动时包含更新的位置对象。**具体来说，如果正在运行重要的位置更新并且您的应用程序已终止，则此属性会在您的应用程序重新启动时使用最新的位置数据进行更新（并且您创建一个新的位置管理器对象）。此位置数据可能比您的应用程序处理的最后一个位置事件更新。

所以这是获得最后一个已知位置的唯一方法。如果它不为零，则可以使用它！

# java - 列表正在用最近的值替换所有旧值

> ID：14081240
> 
> 赞同：0
> 
> 时间：2012-12-29T11:33:38.053
> 
> 标签：java, android, arraylist, hashmap

我遇到了一个奇怪的问题，我没有找到任何解释，我将在代码中评论如下：

```
 final List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();

        Map<String,Object> map = new HashMap<String,Object>();
//for example payss ArrayList contains `A,B,C,D,E,F,G`
        for (int i=0;i<payss.size();i++){

        Bitmap contact_pic=pays_drapeaux.get(i);   
        drawable=new BitmapDrawable(contact_pic); 
        map.put("pays", payss.get(i).getNom());
        Log.i("PAYS",payss.get(i).getNom()); //here it shows correctly the values one by one
        map.put("drapeau",drawable);

        list.add(map);

       }
  //here want to show what the list contains after setting it above
    for (int i=0;i<list.size();i++){
    Log.i("VALUES",list.get(i).values().toString()); //but here it shows G,G,G,G,G,G,G
        } 
```

正如你所看到的，我最后有一个`list`变量，它的所有值都是最近的`payss`值（G）。知道为什么我会面临这个问题。谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:39:59.250

您只使用一个`Map`对象并将其多次添加到列表中。在第一个循环中，条目总是被覆盖（因为只有一个映射）。很明显，只有最后一个值存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T11:40:37.163

```
Map<String,Object> map = new HashMap<String,Object>(); 
```

在 for 循环中写上一行。这是非常愚蠢的错误;) :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T11:46:56.250

您必须在 for 循环中创建新地图，

```
for (int i=0;i<payss.size();i++){

        map = new HashMap<String, Object>();

        Bitmap contact_pic=pays_drapeaux.get(i);   
        drawable=new BitmapDrawable(contact_pic); 
        map.put("pays", payss.get(i).getNom());
        Log.i("PAYS",payss.get(i).getNom()); //here it shows correctly the values one by one
        map.put("drapeau",drawable);

        list.add(map);

       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T11:40:00.453

昨晚我没有找到解决方案，但今天早上我精神焕发：D。这是解决方案：我必须在每个 for 循环中创建一个 Map。

```
for (int i=0;i<payss.size();i++){
                Map<String,Object> map = new HashMap<String,Object>();

                Bitmap contact_pic=pays_drapeaux.get(i);   
                drawable=new BitmapDrawable(contact_pic); 
                 map.put("pays", payss.get(i).getNom());
                 map.put("drapeau",drawable);
                Log.i("PAYS",payss.get(i).getNom());

                 list.add(map);
} 
```

# android - 有没有办法让视图绘制在所有其他视图之上？

> ID：14081248
> 
> 赞同：2
> 
> 时间：2012-12-29T11:34:45.323
> 
> 标签：android, android-layout, android-view

我想知道是否有办法让视图绘制在所有其他视图之上，即使它属于被其他视图覆盖的视图组？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:21:06.043

我找到了解决我的情况的方法，但它仍然会在超出其边界的视图周围绘制一些黑色像素。似乎我必须将这些视图移动到覆盖我需要的区域的父视图......无论如何，如果有人想尝试它，这就是我所做的：

```
@Override protected void dispatchDraw(Canvas canvas)
{
    Rect clip=new Rect(); getDrawingRect(clip);
    int saveCount=canvas.save(Canvas.CLIP_SAVE_FLAG);
    canvas.clipRect(clip,Region.Op.REPLACE);
    super.dispatchDraw(canvas);
    canvas.restoreToCount(saveCount);
} 
```

该函数属于包含我要在其父项强制执行的原始边界之外绘制的子视图的视图组。如果您想为视图使用不同的边界，可以将剪辑区域更改为任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:54:49.173

我之前和你有同样的问题，现在我从这个帖子中得到了答案。 [什么是android.widget.FrameLayout](https://stackoverflow.com/questions/12335578/what-is-android-widget-framelayout)

Android 会将应用程序放置到一个框架布局中（它的 id 是 android.R.id.content），我们可以将其称为 ContentView。你可以通过'hierarchyviewer'看到它，它是/android-sdk/tools/下的一个工具，允许检查视图层次结构。您可以看到您的应用程序放置在 FrameLayout 中。

您可以从其当前视图组中删除任何视图并添加到 ContentView。因此它将放置在所有其他视图之上。

您可以执行以下操作：

```
//Remove view from current viewgroup
WebView mWebView = (WebView)findViewById(id);
ViewGroup currentParent = (ViewGroup)mWebView.getParent();
currentParent.removeView(mWebView);

//Add the view to ContentView(android.R.id.content)
FrameLayout contentView = (FrameLayout)this.getDecorView().findViewById(android.R.id.content);
FrameLayout.LayoutParams fl = new FrameLayout.LayoutParams(MATCH_PARENT,MATCH_PARENT);
contentView.addView(mWebView,fl); 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:48:07.463

使用`ViewGroup.bringChildToFront(View child)`. 虽然这在 a 中没有达到预期的效果`LinearLayout`，因为 Z 顺序直接链接到排序顺序，所以在这种情况下，它只是将 the 移动`View`到底部。

# mysql - 如何在mysql中使用带有已定义参数的REGEXP？

> ID：14081258
> 
> 赞同：1
> 
> 时间：2012-12-29T11:35:39.703
> 
> 标签：mysql, regex, stored-procedures

我有一个如下的存储过程：

```
SET temp_Today = SUBSTR(( NOW() + 0) FROM 3 FOR 6);
SET temp_LastIdDoc = CONCAT(temp_Today,temp_IdAgency);
SELECT NumDoc FROM tbldocument WHERE NumDoc REGEXP '^temp_LastIdDoc'; 
```

我知道这是错误的，因为它搜索以“temp_LastIdDoc”开头的 NumDoc。如何在此查询中使用 temp_LastIdDoc 作为参数？另一个问题是我如何将后面的字符限制为 4 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:52:47.193

字符串以变量开头，`temp_LastIdDoc`以 4 个字符 ( `....$`)结尾

```
SELECT NumDoc FROM tbldocument 
  WHERE NumDoc REGEXP CONCAT('^',temp_LastIdDoc,'....$'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:47:00.847

您可以使用这种方式 -

```
SET temp_LastIdDoc = CONCAT('^', temp_Today, temp_IdAgency);
SELECT NumDoc FROM tbldocument WHERE NumDoc REGEXP temp_LastIdDoc; 
```

# jquery - 将两个字段值相乘

> ID：14081262
> 
> 赞同：0
> 
> 时间：2012-12-29T11:36:14.550
> 
> 标签：jquery

我有两个表单字段，字段 1 是包含不同套餐和价格的选择菜单，字段 2 是您想要的金额。现在我找到了一些代码，它从字段 1 和字段 2 中获取值并将它们相加，最后显示总和。

我想更改它以获取字段 1 中的值并将其与字段 2 中的值相乘，我该怎么做？

这是代码：（“sv_313”是包，“amountk”是乘以它的值）

```
$(function() {
    $('#sv_313').on('change', function() {
        calculate();
    });

    $('input[name=amountk]').on('blur', function() {
        calculate();
    });
});

function calculate() {
    var $select = $('#sv_313').val();
    var $text = $('input[name=amountk]').val();

    if ($select == undefined || $select == '' ||$select == 'Select One') {
        $select = 0;
    }
    else {
        $select = parseFloat($select);
    }
    //
    if ($text == undefined || $text == '') {
        $text = 0;
    }
    else {
        $text = parseFloat($text);
    }

    $('.coverage').html($select + $text);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:38:43.580

您可以使用

```
$('.coverage').html($select * $text); 
```

# javascript - 为什么不会这个循环？获取 - TypeError: document.getElementById(...) is null

> ID：14081264
> 
> 赞同：0
> 
> 时间：2012-12-29T11:36:20.090
> 
> 标签：javascript

我仍在学习 JavaScript，因此欢迎任何使用完整的建议。我正在制作一个彩票模拟器，它一切正常，但是.....当我单击要运行的函数时，会生成随机数并进行比较，但是当我尝试循环函数时，我得到 - TypeError: document.getElementById （...） 一片空白。

我已经尝试了一些东西，但我认为我对此完全摸不着头脑。

有问题的代码是。

```
 var automateLottery = function(){
    numberOfWeeks = numberOfWeeks + 1;//tally up rounds
    //drawUniqueNumbers();

var p_01 = parseInt(document.getElementById("picked_number_01").value);
var p_02 = parseInt(document.getElementById("picked_number_02").value);
var p_03 = parseInt(document.getElementById("picked_number_03").value);
var p_04 = parseInt(document.getElementById("picked_number_04").value);
var p_05 = parseInt(document.getElementById("picked_number_05").value);
var p_06 = parseInt(document.getElementById("picked_number_06").value);

var r_01 = parseInt(document.getElementById("random_01").value);
var r_02 = parseInt(document.getElementById("random_02").value);
var r_03 = parseInt(document.getElementById("random_03").value);
var r_04 = parseInt(document.getElementById("random_04").value);
var r_05 = parseInt(document.getElementById("random_05").value);
var r_06 = parseInt(document.getElementById("random_06").value);

if(p_01===r_01||p_01===r_02||p_01===r_03||p_01===r_04||p_01===r_05||p_01=== r_06){
        document.getElementById("compare_01").value = ("You have matched number " + " " +p_01 );
        addUpMatches(1);
    }else{
        document.getElementById("compare_01").value = ("No matches" )
    };

if(p_02===r_01||p_02===r_02||p_02===r_03||p_02===r_04||p_02===r_05||p_02===r_06){
        document.getElementById("compare_02").value = ("You have matched number" + " " +p_02 );
        addUpMatches(1);
    }else{
        document.getElementById("compare_02").value = ("No matches" )
    };      

if(p_03===r_01||p_03===r_02||p_03===r_03||p_03===r_04||p_03===r_05||p_03===r_06){
        document.getElementById("compare_03").value = ("You have matched number" + " " +p_03 );
        addUpMatches(1);
    }else{
        document.getElementById("compare_03").value = ("No matches" )
    };

if(p_04===r_01||p_04===r_02||p_04===r_03||p_04===r_04||p_04===r_05||p_04===r_06){
        document.getElementById("compare_04").value = ("You have matched number" + " " +p_04 );
        addUpMatches(1);
    }else{
        document.getElementById("compare_04").value = ("No matches" )
    };

if(p_05===r_01||p_05===r_02||p_05===r_03||p_05===r_04||p_05===r_05||p_05===r_06){
        document.getElementById("compare_05").value = ("You have matched number" + " " +p_05);
        addUpMatches(1);
    }else{
        document.getElementById("compare_05").value = ("No matches" )
    };

if(p_06===r_01||p_06===r_02||p_06===r_03||p_06===r_04||p_06===r_05||p_06===r_06){
        document.getElementById("compare_06").value = ("You have matched number" + " " +p_06 );
        addUpMatches(1);
    }else{
        document.getElementById("compare_06").value = ("No matches" )
    };

declareMatches();//----Add up per round and total
    document.getElementById("amountOfMatched").value = ("You have matched" + " " +totalMatchedThisRound + " "+ "numbers"); 
    document.getElementById("weeks").value = ("You have played for" + " " +numberOfWeeks + " "+ "and have won £"+ totalWinnings );
    document.getElementById("amountOfThreeMatches").value = ("You have so far had" + " " +match3 + " "+ "matches of three"  );
    document.getElementById("amountOffourMatches").value = ("You have so far had" + " " +match4 + " "+ "matches of four"  );
    document.getElementById("amountOffiveMatches").value = ("You have so far had" + " " +match5 + " "+ "matches of five"  );
    document.getElementById("amountOfsixMatches").value = ("You have so far had" + " " +match6 + " "+ "matches of six"  );

    clearCount();//clears amount matched every round
    cleartempTotal();//clears total matched every round

 };

 for( var i = 0; i < 10 ; i++){
    automateLottery();
 }; 
```

HTML：

```
<div id="random_numbers">
<FORM NAME="random_numbs" ACTION="" METHOD="GET">

    <INPUT TYPE="text" class="ran_numb" id="random_01" NAME="slot_01" VALUE="">
    <INPUT TYPE="text" class="ran_numb" id="random_02" NAME="slot_02" VALUE="">
    <INPUT TYPE="text" class="ran_numb" id="random_03" NAME="slot_03" VALUE="">
    <INPUT TYPE="text" class="ran_numb" id="random_04" NAME="slot_04" VALUE="">
    <INPUT TYPE="text" class="ran_numb" id="random_05" NAME="slot_05" VALUE="">
    <INPUT TYPE="text" class="ran_numb" id="random_06" NAME="slot_06" VALUE="">
    <br/><br/>
    <INPUT TYPE="button" NAME="button2" Value="Draw Numbers"      onClick="drawUniqueNumbers()">
</FORM> 
```

```
 <div id="matched_numbers">
<FORM NAME="myform" ACTION="" METHOD="GET">

    <INPUT TYPE="text"  NAME="matched_01" id="compare_01" VALUE=""><br>
    <INPUT TYPE="text"  NAME="matched_02" id="compare_02" VALUE=""><br>
    <INPUT TYPE="text"  NAME="matched_03" id="compare_03" VALUE=""><br>
    <INPUT TYPE="text"  NAME="matched_04" id="compare_04" VALUE=""><br>
    <INPUT TYPE="text"  NAME="matched_05" id="compare_05" VALUE=""><br>
    <INPUT TYPE="text"  NAME="matched_06" id="compare_06" VALUE=""><br>
    <br/>
    <INPUT TYPE="text"  NAME="numbers3" id="amountOfMatched" VALUE="You have matched 0 numbers"><br>
    <br>

    <INPUT TYPE="text"  NAME="numbers4" id="amountOfThreeMatches" VALUE=""><br>
    <INPUT TYPE="text"  NAME="numbers5" id="amountOffourMatches" VALUE=""><br>
    <INPUT TYPE="text"  NAME="numbers6" id="amountOffiveMatches" VALUE=""><br>
    <INPUT TYPE="text"  NAME="numbers6" id="amountOfsixMatches" VALUE=""><br>
    Stats<br>
    <INPUT TYPE="text"  NAME="weeks"  id="weeks" VALUE=""><br>
</FORM> 
```

这是一些html。

只是为了确认表单和变量中有值。我设置了一个按钮来触发功能“automateLottery”，它工作正常。它获取生成的随机数并将它们与选择的数字进行比较，然后编译统计数据。问题是当我在循环中设置automateLottery 时，它不起作用。

我应该把我所有的代码放在这里吗？或者这已经足够了吗？

再次感谢

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:03:13.527

首先，您的 null 异常可能来自为空或不存在的 html 元素。

其次，使用循环来处理所有匹配的语句。

例如：

```
for (var i = 1; i = <6; i++)
{
    var variable = parseInt(document.getElementById("picked_number_" + i).value);
    if (variable == Math.floor((Math.random()*100)+1))
    {
        alert("You've won!");
    }
} 
```

在这种情况下，您只需要有一些正确的 html 元素，其 id 为“picked_number_”，并且在循环中使用了变量号。(var i) 你的随机数是在 if 语句中生成的，如果匹配你就赢了：D

顺便说一句，这个脚本使用 1 到 100 之间的随机数。

希望这对您有所帮助。

# c - 如何强制 fseek() 移动光标

> ID：14081265
> 
> 赞同：1
> 
> 时间：2012-12-29T11:36:20.650
> 
> 标签：c, gcc, stdio

我有一个创建多个线程的程序，每个线程都尝试在不同位置（偏移量）的文件中写入 100 个字节。第一个线程从 0 开始写入 100 个字节，第二个从 100 开始写入 100 个字节，第三个从 300 开始写入 100 个字节，依此类推如果线程按此顺序执行，一切正常，我不需要 fseek。但是对于实时并发，如果我将第一个线程置于“sleep(2)”状态 2 秒，等到所有其他线程完成，然后使用 fseek 将文件光标移动到文件的开头，这不会发生。我使用互斥锁来处理并发。代码示例：

```
 offset=0;//for the first thread
    char data[100];
    int length; // how many chars are currently in data
    FILE * f;

    pthread_mutex_lock(&mutexFileWrite);
    f = fopen(fileName, "a");
    fseek(f,offset, SEEK_SET);  
    fwrite(data,sizeof(char),length,f);
    fclose(f);
    pthread_mutex_unlock(&mutexFileWrite); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T11:46:06.170

如果您不打算仅追加文件，请不要以追加模式打开文件。

从 POSIX 参考[`fopen`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fopen.html)：

> 打开带有附加模式的文件（a 作为模式参数中的第一个字符）将导致对文件的所有后续写入被强制到当时的当前文件结尾，**而不管对 fseek() 的干预调用**。

看起来你正在寻找`r+`模式。

# android - 为多个目标构建可加载内核模块 (LKM)

> ID：14081268
> 
> 赞同：1
> 
> 时间：2012-12-29T11:36:30.813
> 
> 标签：android, cross-platform, kernel-module

我是安卓 LKM 的开发者。Android 可在例如 ARM、ARMv7、x-86 等上运行。

目前，我正在为

```
EXTRA_CFLAGS +=-march=armv7-a
$(MAKE) ARCH=arm CROSS_COMPILE... modules 
```

并在我的手机上安装它。

但是我应该如何为群众做这件事呢？

我想我必须用几种配置（ARCH=x-86 等）构建 LKM 吗？

我目前正在通过 android-app 自动对其进行安装 - 对吗，然后我必须确定我的应用程序中的环境并为 insmod 选择正确的内核模块？

提前感谢您的帮助！

# c - 用于 C 中动态分配内存的互斥锁

> ID：14081277
> 
> 赞同：1
> 
> 时间：2012-12-29T11:37:34.063
> 
> 标签：c, multithreading, pthreads, mutex, dynamic-allocation

我正在阅读`Thread Synchronization`《Unix 环境中的高级编程》一书。

[在本节](http://infohost.nmt.edu/~eweiss/222_book/222_book/0201433079/ch11lev1sec6.html)中，有一个将互斥锁与动态分配的对象一起使用的示例。我对此也有一些疑问。

在这里，我分享发生的事件时间表*（从上到下）*以解释我的疑问：

1.  已创建线程 1。
2.  Thread1 创建一个 mutex var 对其进行初始化并将其放在全局列表中，以便其他人可以使用它。
3.  现在 Thread1 获得了一个锁来使用共享数据结构，比如说`ds`。Thread1 需要做大量的工作`ds`，即 Thread1 将长时间获取这个锁。
4.  现在，虽然 Thread1 仍然获得了锁，但 Thread2 被创建了。
5.  现在Thread2也想用ds。
6.  所以 Thread2 必须首先增加显示对 ds 的引用的计数器增加。为此*（根据本书）*，它首先需要`mutex_t`在增加计数之前使用相同的变量获取锁。
7.  但是由于 Thread1 已经在这个变量上获得了锁`mutex_t`，所以当 Thread2`lock()`在递增计数之前调用时，它必须等到 Thread1 解锁锁。

**疑点**：

1.  关于他在谈论哪个全局列表*（意味着只是制作任何列表并将其引用传递给所有线程或任何特定列表）*？
2.  当 Thread1 创建锁变量时，它将计数设置为 1。然后 Thread2 正在等待将此计数增加到 2。但是假设在执行当前工作之后 Thread1 不需要使用 ds。因此，在解锁之前，它也会减少计数或先解锁，然后`foo_rele()`再次调用锁定并减少计数。现在有可能在 Thread2 增加计数之前，Thread1 减少它。如果是（根据我），那么我的数据结构将被破坏？所以我认为这本书的这个例子有一点错误。如果我们使用不同的 mutex_var 来增加计数会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:02:36.337

答：我认为在“全局列表”一词下，作者理解线程之间共享的所有变量。

例子：

```
struct foo* shared_foo; /* This pointer is shared between all threads */

struct foo* foo_alloc(void)
{
   /* This pointer is local to the thread which allocates the memory */
   struct foo *fp;

    if ((fp = malloc(sizeof(struct foo))) != NULL) {
        /* whatever */
    }
    /* local pointer value returned */
    return(fp);
}

/* probably somewhere in the code the shared pointer (on the 'global list') is initialized this way */
shared_foo = foo_alloc(); 
```

B. 嗯...我真的不明白你说什么。你能把你的场景写成一个列表吗？在我看来`f_count`，在初始化期间设置为标志“此互斥锁正在使用中”。因此，当互斥体空闲时，该`f_count`值设置为 1。当`Thread1`获取锁时，它的值设置为 2。当它释放锁时，该值设置回 1。有效`f_count`值为：1（初始化和空闲）和 2 （已初始化且忙）。为了释放互斥锁，您只需`foo_rele`在它被占用时调用两次（`f_count`= 2）或在它空闲时调用一次（`f_count`= 1）。然后`f_count`值达到 0 并且互斥体被移除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:15:28.143

对，所以示例 11.10 就是关于结构 foo 中的内容。每个结构都有一个锁，因此线程 1 要对对象进行操作，线程 1 需要在对象内持有互斥锁。

给出的示例不完整，我可以理解您的困惑。在线程不再需要该对象之前，不应调用 foo_rele。如果另一个线程想要使用 foo，它应该调用 foo_hold() 来增加引用计数 (fp->count++)。是的，有一个竞争条件，线程 2 可能想要得到它，而线程 1 正在释放它。

这对于多线程编程来说绝对是不寻常的——一个线程很可能会删除你想在你的线程中工作的东西，除非代码是专门为避免这种情况而编写的。避免例如包括对象列表的锁定，如果我的线程持有列表锁定，其他线程不能添加或删除列表中的东西（并且不应该搜索列表，因为我可能只是添加或删除某些内容，并且不能保证列表是一致的）。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T12:36:39.237

1.  线程共享内存，因此任何全局变量对于同一进程中的所有线程都是可见的（因此不需要将指针传递给每个线程）。

2.  使用互斥锁时，您必须相信线程可以按任何顺序锁定互斥锁（POSIX 不保证任何特定顺序）。因此，线程 1 完全有可能在任何其他线程获得对互斥锁的访问权之前创建、使用和销毁该结构。

PS我理解你的疑惑。我在代码片段中真正缺少的是另一个互斥锁实际上阻止了同时写入结构。

# jquery - jQuery 每个循环不适用于 json 数据

> ID：14081279
> 
> 赞同：4
> 
> 时间：2012-12-29T11:38:00.333
> 
> 标签：jquery, loops, each

我有一组 jSon 数据（无错误），我需要使用 $.each 函数循环，但它只显示来自 jSon 的最后一条数据记录。

这是我的 jquery：

```
$.ajax({
type: "POST",
url: '/update-recent-stat',
dataType: 'json',
success: function(jsonData)
    {
        var counterjson = 1;

        $.each(jsonData, function(i, value){
            var count = counterjson++;
            var link = jsonData[count].linkid;
            var time = jsonData[count].time;
            var value = jsonData[count].value;
            var sender = jsonData[count].sender;

           $("#DownBoxL ul li").html("<div class=Timestamp>"+time+"</div><div class=UserName><a href=\"#"+link+"\">"+sender+"</a> ("+count+") msg sent!</div><div class=TagValue>+"+value+"</div>").show();
         });
    }
}); 
```

所以 jSon 数据是一个包含 15 条记录的集合，例如：

```
[{"counter":"1","linkid":"1448524027","sender":"User1","value":"5","time":"5 sec ago"},{"counter":"2","linkid":"1448524027","sender":"User2","value":"5","time":"5 min ago"}] 
```

为了记录，这段代码只显示最后一条记录！

有谁知道问题出在哪里？

感谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:44:49.673

`li`因为您每次都覆盖所有的 HTML。您可以使用`eq`使相同的代码工作。并且使用`$.getJSON`它很容易用于 JSON 数据，并且足以满足您的要求。

```
$.getJSON('/jsonurl/file.json', function(jsonData)
{
   var counterjson = 1;

   $.each(jsonData, function(i, value){
        var count = counterjson++;
        var link = jsonData[count].linkid;
        var time = jsonData[count].time;
        var value = jsonData[count].value;
        var sender = jsonData[count].sender;

        $("#DownBoxL ul li:eq(" + i + ")).html("<div class=Timestamp>"+time+"</div><div class=UserName><a href=\"#"+link+"\">"+sender+"</a> ("+count+") msg sent!</div><div class=TagValue>+"+value+"</div>").show();
     });
} 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:01:40.487

正如汤姆所说，您反复覆盖而不是附加到 HTML。

然而，一般来说，从 JavaScript 编写 HTML 标记并不是一个好主意。例如，如果`sender`字符串可以包含 HTML 特殊字符，例如`<`，那么您就是给自己一个客户端 HTML 注入漏洞。

jQuery 为您提供了一些很好的工具，可以轻松地直接访问 DOM 节点。使用它们，您最终可以获得更易于维护和更安全的代码。例如。

```
success: function(jsonData) {
    $.each(jsonData, function(i, value){
        $('#DownBoxL ul li').append(
            $('<div class="Timestamp">', {text: value.time})
        ).append(
            $('<div class="UserName">').append(
                $('<a>', {href: '#'+value.linkid, text: value.sender})
            ).append(' ('+i+') msg sent!')
        ).append(
            $('<div class="TagValue">', {text: value.value})
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T11:45:38.510

这将起作用

```
success: function(jsonData)
{
    var count= 1;
    var htmlData = '';

    $.each(jsonData, function(i, value){

        count++;
        var link = jsonData[count].linkid;
        var time = jsonData[count].time;
        var value = jsonData[count].value;
        var sender = jsonData[count].sender;

       htmlData += "<div class=Timestamp>"+time+"</div><div class=UserName><a href=\"#"+link+"\">"+sender+"</a> ("+count+") msg sent!</div><div class=TagValue>+"+value+"</div>";
     });

     $("#DownBoxL ul li").html( htmlData ).show();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T11:48:46.853

值与 jsonData[i] 相同；

```
success: function(jsonData)
{
    var htmlData = '';
    $.each(jsonData, function(i, value){    
       htmlData += "<div class=Timestamp>"+value.time+"</div><div class=UserName><a href=\"#"+value.link+"\">"+value.sender+"</a> ("+ ( i+1 ) +") msg sent!</div><div class=TagValue>+"+value.value+"</div>";
     });

     $("#DownBoxL ul li").html( htmlData ).show();

} 
```

# php - SQL 防止重复输入

> ID：14081283
> 
> 赞同：2
> 
> 时间：2012-12-29T11:39:27.257
> 
> 标签：php, sql, duplicates

用户发送 sql 查询，有时（通常是服务器繁忙）重复的 sql 行。我想阻止它。例如，如果用户同时发送相同的查询，则 sql 只接受一个查询。我不想总是删除它。我可以在 phpmyadmin 上做吗？

如果我不能，这个 php 中的问题： [http ://www.speedyshare.com/S4QRj/Automation.php](http://www.speedyshare.com/S4QRj/Automation.php)

我认为在这段代码中：

```
 private function returnunitsComplete() {
    global $database;
    $time = time();
    $q = "SELECT * FROM ".TB_PREFIX."movement, ".TB_PREFIX."attacks where ".TB_PREFIX."movement.ref = ".TB_PREFIX."attacks.id and ".TB_PREFIX."movement.proc = '0' and ".TB_PREFIX."movement.sort_type = '4' and endtime < $time";
    $dataarray = $database->query_return($q);

    foreach($dataarray as $data) {

    $tribe = $database->getUserField($database->getVillageField($data['to'],"owner"),"tribe",0);

    if($tribe == 1){ $u = ""; } elseif($tribe == 2){ $u = "1"; } elseif($tribe == 3){ $u = "2"; } elseif($tribe == 4){ $u = "3"; } else{ $u = "4"; }
    $database->modifyUnit(
            $data['to'],
            array($u."1",$u."2",$u."3",$u."4",$u."5",$u."6",$u."7",$u."8",$u."9",$tribe."0","hero"),
            array($data['t1'],$data['t2'],$data['t3'],$data['t4'],$data['t5'],$data['t6'],$data['t7'],$data['t8'],$data['t9'],$data['t10'],$data['t11']),
            array(1,1,1,1,1,1,1,1,1,1,1)
    );
    $database->setMovementProc($data['moveid']);
    } 
```

有时返回单位和报告重复。对不起，我的英语不好。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:42:09.173

`CONSTRAINT`在你的表中使用`PRIMARY KEY`和/或`UNIQUE KEY`。他们不会接受相同的价值。

**例子**

```
CREATE TABLE Persons
(
P_Id int NOT NULL,
LastName varchar(255) NOT NULL,
PRIMARY KEY (P_Id)  //primary key
) 
```

有关更多信息，请参阅[此处](http://www.w3schools.com/sql/sql_unique.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T11:53:21.983

如果要确保列对`col1`和`col2`表`tbl1`不包含重复的值对（但每列本身可以），您可以创建必要的唯一索引

```
ALTER TABLE tbl1
  ADD UNIQUE KEY(col1, col2) 
```

文档（MySQL）：[http ://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

# javascript - 从回调中访问 `this`

> ID：14081287
> 
> 赞同：4
> 
> 时间：2012-12-29T11:40:13.543
> 
> 标签：javascript, backbone.js, scope, callback

类似的问题已经在这里问过[如何触发model.save（）的成功回调？](https://stackoverflow.com/questions/5757555/how-do-i-trigger-the-success-callback-on-a-model-save)，但仍然没有回答如何从回调中触发事件。

所以这是`success`我代码中的回调，我想在其中调用`addOne`事件来呈现保存的评论。一切正常，除了`this.addOne(receivedItem);`- 我不能`this`在回调中使用来触发这个事件。其他地方——我可以。

如何解决这个问题呢？

```
CommentsListView = Backbone.View.extend({
    ...
    addOne: function (item) {
        var commentView = new CommentView({
            model: item
        });
        this.$el.append(commentView.render().el);
    },
    addNewComment: function (event) {
        var item = {
            post_id: this.$('#post_id').val(),
            text: this.$('#text').val()
        };
        var commentItem = new CommentItem();
        commentItem.save({'model':item}, { 
            success: function(receivedItem, response) {
                this.addOne(receivedItem); // Uncaught TypeError: Object [object Window] has no method 'addOne'.
            }
        }, this);
    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T11:43:11.047

发生这种情况是因为成功回调具有不同的范围，并且`this`不指向您的视图。
为了快速解决这个问题，只需引用`this`并使用它：

```
var self = this;
commentItem.save({'model':item}, { 
    success: function(receivedItem, response) {
        self.addOne(receivedItem); // works
    }
}); 
```

或者您可以使用下划线的[`bind`](http://underscorejs.org/#bind)方法将不同的上下文绑定到函数：

```
success : _.bind(function(receivedItem, response) {
    this.addOne(receivedItem); 
}, this) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T20:15:31.377

这可能是一个迟到的答案。但会帮助正在寻找它的人。这是从 settimeout 回调访问“this”关键字

```
CommentsListView = Backbone.View.extend({
...
    addOne: function (item) {
        // DO Stuff
    },
    addNewComment: _.bind(function (event) {
        setTimeout(_.bind(function(){ 
            this.addOne(/*receivedItem*/);
        }, this), 1000);
    }, this)
}); 
```

# c++ - Visual Studio 中的丰富用户界面应用程序

> ID：14081291
> 
> 赞同：3
> 
> 时间：2012-12-29T11:40:55.537
> 
> 标签：c++, visual-studio-2010, user-interface, effects

我是一个菜鸟`C++`程序员。我想开发`GUI`应用程序。我使用的是 Visual Studio 2010。通常，`Visual Studio`项目从旧式界面开始，其中有一个带有菜单的框架。但我想构建一个具有更丰富图形元素的应用程序。就像 Windows 8 开始屏幕.. 或 Visual Studio 开始页面。请教我如何做那些花哨的效果。

**编辑：**我不喜欢使用`flash`或者因为他们需要在使用前安装其他程序。~~`JavaFX`~~ `Java`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:11:34.347

好吧，基本上你在这里没有太多选择。关于您的选择（MS Visual Studio），它们是：

*   **MFC/C++** - 一点都不方便，我可以说这是个小麻烦。但是很多程序都是在 MFC 库的帮助下编写的。这是一种规范的方式:)
*   **Windows Forms/C++** - 实际上它不是常用的 C++，而是 C++/CLI。差别不大，但有[几点](http://www.codeproject.com/Articles/8074/Hello-C-CLI-Part-1)[需要](http://www.codeproject.com/Articles/6882/A-first-look-at-C-CLI) 注意。例如，您可以查看[C++/CLI 备忘单](http://www.codeproject.com/Articles/320761/Cplusplus-CLI-Cheat-Sheet)。不常用，但是，嘿，您可以使用 Windows 窗体！
*   **Windows Forms/C#** ——对我来说，这种组合几乎是完美的。没什么可补充的。
*   **WPF/C#** - 更有趣。任何控件都可以以任何方式进行修改，但是您必须了解很多技巧和操作方法才能使所有操作正常工作。在这种情况下，我强烈建议使用[WPF Toolkit](http://wpf.codeplex.com/releases/view/40535)。不管怎样，你可以为 WPF 找到很多很酷的东西（我什至曾经做过一个带有一堆与工业相关的 UI 元素（阀门、泵等）的迷你 SCADA）。别忘了，你也可以做**动画**。这很容易。
*   **MSVS/C++**的 Qt 插件 - 最后但并非最不重要的选择。您在 Qt Quick - GUI IDE 中制作的所有 UI。此外，您还有一个最大的槽/信号交互模型（在 Qt5.0 中得到了改进）。

我现在的选择绝对是 Qt。顺便说一句，它是跨平台的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:50:35.573

对于 C++，您可以创建一个 WinForms（Windows 窗体）项目。

但是现在 WPF 比 WinForms 更受欢迎，而且 WPF 通常用于 C# 或 VB.NET。我不确定是否可以从 C++ 使用，但如果是这样，它的支持就会很差。如果您已经了解 C++，那么 C# 非常容易学习。

如果你想在 Windows 8 中创建 Windows Store 应用，你也可以使用 C++/CX，但这需要 VS 2012。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T01:53:03.943

所以你真的很想做这些华丽的东西，嗯？好吧，您可以制作一个 Windows 应用商店应用程序，但如前所述，它需要 Visual Studio 2012。

也看看这个问题：[如何在 Visual Studio 中开发独特的 GUI？](https://stackoverflow.com/questions/9169876/how-to-develop-unique-guis-in-visual-studio)

![性感的东西...](../Images/35928136d4b1da5d9068cc5b094c90af.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T12:58:24.783

您有几个 GUI 选项，您可以从中选择 wxWidgets、Qt、Ultimate++。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-11T06:17:00.307

或者你可以使用 Embarcadero C++ Developer ----> 实际上 Firemonkey 太棒了，看看 [C++ Builder](http://www.embarcadero.com/products/cbuilder)

# android - 使用xml解析获取请求的资源不支持http方式POST

> ID：14081296
> 
> 赞同：1
> 
> 时间：2012-12-29T11:42:02.093
> 
> 标签：android

我是 android 新手，我在我的应用程序中使用 xml 解析。我遵循以下链接： [http](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial.In) ://www.androidhive.info/2011/11/android-xml-parsing-tutorial。在我的活动中，我正在使用以下代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.practicetests);

    lvPracticeTests=(ListView)findViewById(R.id.practicetestslist);
    btnBack=(Button)findViewById(R.id.back);

    btnBack.setOnClickListener(this);

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Log.e("xml",xml);
XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL); // getting XML
Log.e("xml",xml);
} 
```

但我在 logcat 中收到以下错误：这是 logcat 中的 xml 值：消息“：”请求的资源不支持 http 方法 'POST'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:54:18.997

只需更换`HttpPost post= new HttpPost(URL);`

进入

```
HttpGet get=new HttpGet(URL); 
```

在您的解析器类中

我想你的问题会解决的。

# c# - 调试混淆代码

> ID：14081297
> 
> 赞同：1
> 
> 时间：2012-12-29T11:42:07.957
> 
> 标签：c#, debugging, obfuscation

我有一个应用程序被`EazFuscator.NET`. 但是，调试它是完全不可能的（即使它是一个小应用程序），例如，这是一个错误报告：

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index

Stacktrace:
at System.ThrowHelper.ThrowArgumentOutOfRangeException(ExceptionArgument argument, ExceptionResource resource)
at System.ThrowHelper.ThrowArgumentOutOfRangeException()
at .(Object , RunWorkerCompletedEventArgs )
at System.ComponentModel.BackgroundWorker.OnRunWorkerCompleted(RunWorkerCompletedEventArgs e)
at System.ComponentModel.BackgroundWorker.AsyncOperationCompleted(Object arg) 
```

它清楚地表明错误是在后台工作人员中引起的。由于它是一个小型应用程序，我感觉我知道在哪里，但这仅仅是因为它是一个小型应用程序。

我已经附加了用户的配置文件，并且有一个复选框可以在错误报告中包含屏幕截图。

有什么方法可以让我更轻松地进行调试，同时仍然有混淆的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:58:29.507

我也有在小型混淆程序上调试客户问题的经验。我可以建议你两个选择：

1）为您的程序制作可配置的详细日志记录，客户端可以在设置中启用。您可以使用此日志记录收集大量信息（例如：每个重要方法的入口点以及传递给它的参数）。一般来说，在您的程序中拥有良好的日志记录可以大大节省调试客户端（而不仅仅是客户端）问题的时间。

2) 此外，如果用户允许您访问环境，您可以暂时使用未混淆的应用程序重新安装应用程序（或更改特定的 DLL）。调试完成后 - 只需恢复更改的 DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-11T18:14:16.073

大多数混淆器生成映射文件，显示原始类/方法名称与混淆的名称之间的映射。您应该将这些文件存储在每个版本的某个地方，或者......并使用它们来查找真正的堆栈跟踪。

# iphone - ULabel 的 center 属性的值根据它绑定到的边缘而变化

> ID：14081299
> 
> 赞同：2
> 
> 时间：2012-12-29T11:42:50.500
> 
> 标签：iphone, ios, interface-builder, iphone-5

**快速版本：**为什么 UILabel 的“中心”属性的值在它的大小属性绑定到其父容器的顶部和底部时会发生变化，我可以做些什么来改变或绕过这种行为？

**带有详细信息的长版：** 我在这样的两个标签之间画一条线（黄线）：

![在此处输入图像描述](../Images/76bd7d847f5b3aa3657784447fdf93db.png)

为了计算线的端点，我使用了 UILabels 的 center 属性（在这张照片中，标签说 2.5kHz 和 20Hz），然后是标签高度的 + 或 - 一半。这种技术在下面的示例/图片中效果很好。然而，在我将屏幕尺寸切换为 iPhone5（更高）的设计阶段，我将“20 Hz”标签绑定到底部而不是顶部，方法是在尺寸检查中更改它，如下图所示。请注意，在这两种情况下，原点仍位于左上角：

![在此处输入图像描述](../Images/9be12dab601a026f33c212272bcb89f6.png) ![在此处输入图像描述](../Images/472d064c76a7772f4ac9e82606302754.png)

这改变了 center 属性的行为方式，因此将产生以下行：

![在此处输入图像描述](../Images/23c61f663db8324a45a48f2d4bb12749.png)

在这里，我重新定位了 UILabel 只是为了演示。请注意，行尾应位于标签顶部的中心：

![在此处输入图像描述](../Images/2131684ab37a1932460a20bb173536b4.png)

我打印了标签的中心点。一次绑定到顶部，然后再次绑定到底部：

绑定到顶部 {290, 326.5}

绑定到底部 {290, 370.5}

我尝试了一种解决方法，方法是使用 origin.y 并从那里进行偏移，但这具有相同类型的效果。

我希望它在完成后看起来像这样，但在更高的 iPhone 5 屏幕上：

![在此处输入图像描述](../Images/490c01625f3d8d25a06d726dff46c3a8.png)

* * *

编辑：根据@ott 的要求，添加计算行端点的代码片段

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGPoint begin = self.frequencyMaxLabel.center;
    begin.y += self.frequencyMaxLabel.frame.size.height/2.0;

    CGPoint end = self.frequencyMinLabel.center;
    end.y -= self.frequencyMinLabel.frame.size.height/2.0;

    // This is an object of two CGPoints to represent a line
    VWWLine* frequenciesLine = [[VWWLine alloc]
                                initWithBegin:begin
                                andEnd:end];

    // Pass the line to a UIView subclass where it is drawn
    [self.configView setLineFrequencies:frequenciesLine];
    [frequenciesLine release];

    // .... other code truncated for example
} 
```

以及画线的代码（在 UIView 子类中，上面代码段中的 self.configView ）

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef cgContext = UIGraphicsGetCurrentContext();

    CGContextBeginPath(cgContext);
    CGContextSetLineWidth(cgContext, 2.0f);

    CGFloat yellowColor[4] = {1.0, 1.0, 0.0, 1.0};

    CGContextSetStrokeColor(cgContext, yellowColor);
    [self drawLineWithContext:cgContext
                    fromPoint:self.lineFrequencies.begin
                      toPoint:self.lineFrequencies.end];
    CGContextStrokePath(cgContext);

    //...... truncated. Draw the other lines next
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T04:48:35.160

`viewDidLoad`在系统为当前设备和界面方向布置视图之前，您会收到消息。将该代码移至`viewDidLayoutSubviews`.

此外，您可能想查看`CAShapeLayer`.

# cuda - BFS 的最短路径，将代码从 CUDA 移植到 openCL

> ID：14081307
> 
> 赞同：0
> 
> 时间：2012-12-29T11:44:22.653
> 
> 标签：cuda, opencl, breadth-first-search

我目前正在移植一个 CUDA 代码，该代码在（无向）图中找到从每个节点到其他节点的最短路径。所以基本上，CUDA 代码构造了一个从文本文件中读取的图形。然后它继续构建相邻数组 h_v 和 h_e。

```
For example
A B
A C
B C
gives 
h_v[0] = 0, h_e[0]=1
h_v[1] = 0, h_e[1]=2
h_v[2] = 1, h_e[2]=2 
```

然后它调用内核使用 BFS 计算每个节点的最短路径。

**cuda主机代码如下：**

```
int cc_bfs(int n_count, int e_count, int *h_v, int *h_e, float *h_cc, bool ec){
  int *d_v, *d_e;

  cudaCheckError(cudaMalloc((void **)&d_v, sizeof(int)*e_count));
  cudaCheckError(cudaMalloc((void **)&d_e, sizeof(int)*e_count)); 

  cudaCheckError(cudaMemcpy(d_v, h_v, sizeof(int)*e_count, cudaMemcpyHostToDevice));
  cudaCheckError(cudaMemcpy(d_e, h_e, sizeof(int)*e_count, cudaMemcpyHostToDevice));

  int *d_d, *d_dist; 

  cudaCheckError(cudaMalloc((void **)&d_d, sizeof(int)*n_count));
  cudaCheckError(cudaMalloc((void **)&d_dist, sizeof(int)));

  int *h_d;
  h_d=(int *)malloc(sizeof(int)*n_count);
  bool *d_continue;
  cudaCheckError(cudaMalloc((void**)&d_continue, sizeof(bool)));

  for(int s=0; s<n_count; s++){ //BIG FOR LOOP

    //////code to initalize h_d[i]
    for(int i=0; i<n_count; i++)
      h_d[i]=-1;
    h_d[s]=0; //for marking the root
    cudaCheckError(cudaMemcpy(d_d, h_d, sizeof(int)*n_count, cudaMemcpyHostToDevice));
    //////////////////////////////

    ///////////////////////////////
    int threads_per_block=e_count;
    int blocks=1;
    if(e_count>MAX_THREADS_PER_BLOCK){
      blocks = (int)ceil(e_count/(float)MAX_THREADS_PER_BLOCK); 
      threads_per_block = MAX_THREADS_PER_BLOCK; 
    }
    dim3 grid(blocks);
    dim3 threads(threads_per_block);
    /////////////////////////////////

    bool h_continue;
    int h_dist=0;
    cudaCheckError(cudaMemset(d_dist, 0, sizeof(int)));
    do{
      h_continue=false;
      cudaCheckError(cudaMemcpy(d_continue, &h_continue, sizeof(bool), cudaMemcpyHostToDevice));
      cc_bfs_kernel<<<grid, threads>>>(d_v, d_e, d_d, d_continue, d_dist, e_count);
      checkCUDAError("Kernel invocation");
      cudaThreadSynchronize();
      h_dist++;
      cudaCheckError(cudaMemcpy(d_dist, &h_dist, sizeof(int), cudaMemcpyHostToDevice));//for what?
      cudaCheckError(cudaMemcpy(&h_continue, d_continue, sizeof(bool), cudaMemcpyDeviceToHost));
    }while(h_continue);

    ///////////////////
    //then code to read back h_d from device

} 
```

**这是cuda内核**

```
__global__ void cc_bfs_kernel(int *d_v, int *d_e, int  *d_d,
    bool *d_continue, int *d_dist, int e_count){
  int tid = blockIdx.x*blockDim.x + threadIdx.x;
  if(tid<e_count){
    /* for each edge (u, w) */
    int u=d_v[tid];
    int w=d_e[tid];
    if(d_d[u]==*d_dist){ //of the interest root
      if(d_d[w]==-1){ //not yet check
        *d_continue=true; //continue
        d_d[w]=*d_dist+1; //increase
      }   
    }   
  }
} 
```

这是我将其移植到 openCL 的努力。我只是openCL的业余爱好者，所以我正在尽力逐行移植原始代码:(

**openCL 主机代码**

```
cl_mem d_d= clCreateBuffer(context,CL_MEM_WRITE_ONLY| CL_MEM_USE_HOST_PTR,sizeof(int)*n_count, NULL,NULL);
cl_mem d_dist= clCreateBuffer(context,CL_MEM_READ_WRITE| CL_MEM_USE_HOST_PTR,sizeof(int), NULL,NULL);
int *h_d;
h_d=(int *)malloc(sizeof(int)*n_count);
cl_mem d_continue = clCreateBuffer(context,CL_MEM_READ_WRITE| CL_MEM_USE_HOST_PTR,sizeof(bool), NULL,NULL);
float* h_cc;
h_cc = (float *)malloc(sizeof(float)*n_count);

cl_mem d_v= clCreateBuffer(context,CL_MEM_READ_ONLY| CL_MEM_USE_HOST_PTR,sizeof(int)*e_count, NULL,NULL);
cl_mem d_e= clCreateBuffer(context,CL_MEM_READ_ONLY| CL_MEM_USE_HOST_PTR,sizeof(int)*e_count, NULL,NULL);

err = clEnqueueWriteBuffer(queue, d_v, CL_TRUE, 0, e_count * sizeof(int), host_v, 0, NULL, NULL);
err = clEnqueueWriteBuffer(queue, d_e, CL_TRUE, 0, e_count * sizeof(int), host_e, 0, NULL, NULL);

size_t global_size= e_count;

for(int s=0; s<n_count; s++)
{ //BIG LOOP

    //initalize h_d[i]
    for(int i=0; i<n_count; i++)
        h_d[i]=-1;
    h_d[s]=0;

    //copy h_d to d_d
     err = clEnqueueWriteBuffer(queue, d_d, CL_TRUE, 0,
        n_count * sizeof(int), h_d, 0, NULL, NULL);

    bool h_continue;
    int h_dist=0;
    int mark = 0;
    int* h_id;
    h_id= (int*) malloc(sizeof(int)*e_count);
    cl_mem id= clCreateBuffer(context,CL_MEM_WRITE_ONLY| CL_MEM_USE_HOST_PTR,
            sizeof(int)*e_count, NULL,NULL);

    do{
        h_continue=false;
        err = clEnqueueWriteBuffer(queue, d_continue, CL_TRUE, 0,
          sizeof(bool), &h_continue, 0, NULL, NULL);

        err = clSetKernelArg(kernel, 0, sizeof(cl_mem), (void *)&d_v);
        err = clSetKernelArg(kernel, 1, sizeof(cl_mem), (void *)&d_e);
        err = clSetKernelArg(kernel, 2, sizeof(cl_mem), (void *)&d_d);
        err = clSetKernelArg(kernel, 3, sizeof(cl_mem), (void *)&d_continue);
        err = clSetKernelArg(kernel, 4, sizeof(cl_mem), (void *)&d_dist);
        err = clSetKernelArg(kernel, 5, sizeof(int), (void *)&e_count);
        err = clSetKernelArg(kernel, 6, sizeof(cl_mem), (void *)&id);

        /////EXECUTE
        cl_event sync1;
        err = clEnqueueNDRangeKernel(queue, kernel, 1, NULL, 
            &global_size, NULL, 0, NULL, &sync1); //wait for this to finish (to synchronize)                
        err = clWaitForEvents(1, &sync1);
        clReleaseEvent(sync1);          
        ///////////////////

        err = clEnqueueReadBuffer(queue, id, CL_TRUE, 0,
        sizeof(int)*e_count, h_id, 0, NULL, NULL);

        printf("e_count = %d error : %d\n",e_count, err);//check error?

        for(int j = 0; j< e_count; j++)
        {
            printf("%d ",h_id[j]);
        }

        h_dist++;
        mark++;//for debug
        err = clEnqueueWriteBuffer(queue, d_dist, CL_TRUE, 0,
        sizeof(int), &h_dist, 0, NULL, NULL);
        err = clEnqueueReadBuffer(queue, d_continue, CL_TRUE, 0,
        sizeof(bool), &h_continue, 0, NULL, NULL);
    }
    while(h_continue);

    err = clEnqueueReadBuffer(queue, d_d, CL_TRUE, 0,
        n_count*sizeof(int), h_d, 0, NULL, NULL); 
```

**和 openCL 内核**

```
__kernel void cc_bfs_kernel(__global int *d_v, __global int *d_e, __global int  *d_d,
    __global bool *d_continue, __global int *d_dist, const int e_count, __global int *id)
{

        int tid = get_global_id(0)-get_global_offset(0);
        //barrier(CLK_GLOBAL_MEM_FENCE);

        for (int i = 0; i< e_count; i++)
        {
            id[i]=i;
        }

        if(tid<e_count){
            id[tid]= tid;
            /* for each edge (u, w) */
            int u=d_v[tid];
            int w=d_e[tid];
            if(d_d[u]==*d_dist){ //of the interest root
                if(d_d[w]==-1)
                { //not yet check 
                    *d_continue=true; //continue
                    d_d[w]=*d_dist+1; //increase
                }   
            }   
        }
} 
```

代码不能给出正确的结果，所以我通过打印一些值来调试它（内核内部的 tid，用于检查代码通过 while 循环的次数的标记值）。可悲的是， tid 给出了垃圾值，它只经过一次 while 循环。你能指出我在这里缺少什么吗？

我还有一个疑问：我怎样才能做类似 cudathreadsynchronize() 的事情？在这个版本的 openCL 中，我将 clEnqueueNDRangeKernel 与命令事件相关联并等待它，但显然我似乎没有工作:(

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:24:00.560

**首先，您应该通过检查错误代码**来确保每个步骤都是正确的。

例如，AFAIK，此代码无效：

```
clCreateBuffer(context, CL_MEM_WRITE_ONLY | CL_MEM_USE_HOST_PTR, sizeof(int)*e_count, NULL,NULL) 
```

因为您要求使用**分配的内存区域**而您没有提供任何：**host_ptr**参数确实是**NULL**。

要么删除这个标志，要么如果你真的想要主机内存指定：**CL_MEM_ALLOC_HOST_PTR**。

检查 API 文档以了解每个函数如何检索状态：使用返回值或专用参数（最后一个），如 clCreateBuffer 所做的：[http ://www.khronos.org/registry/cl/sdk/1.2/ docs/man/xhtml/clCreateBuffer.html](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateBuffer.html)

对于您的代码，它应该给出**CL_INVALID_HOST_PTR**错误。

# python - 为什么在这种情况下不需要全局关键字？

> ID：14081308
> 
> 赞同：20
> 
> 时间：2012-12-29T11:44:29.970
> 
> 标签：python, global-variables

```
cache = {}
def func():
    cache['foo'] = 'bar'
print cache['foo'] 
```

输出

```
bar 
```

为什么这有效，为什么不需要使用`global`关键字？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-29T11:46:17.317

因为您没有*分配*给`cache`，所以您正在更改字典本身。`cache`仍然指向字典，因此本身没有改变。该行`cache['foo'] = 'bar'`转换为`cache.__setitem__('foo', 'bar')`。换句话说， 的值`cache`是一个 python `dict`，并且该值本身是可变的。

如果您尝试`cache`通过使用`cache = 'bar'`来更改所指的内容，那么您将更改`cache`指向的内容，然后您需要`global`关键字。

也许我对类似问题的这个较早的答案可以帮助您理解差异：[Python list doesn't reflect variable change](https://stackoverflow.com/questions/12080552/python-list-doesnt-reflect-variable-change-new-to-python/12080644#12080644)。

# php - 将数组从 php 发送到 javascript

> ID：14081312
> 
> 赞同：0
> 
> 时间：2012-12-29T11:44:46.787
> 
> 标签：php, jquery, arrays, post, send

我正在使用 php 脚本在屏幕上抓取一个站点，该脚本最终创建了一个数组，我想将其发送回 javascript 调用程序函数。在下面的代码中，我尝试使用“print_r”将其打印出来，这根本没有给我任何结果（？）。如果我在元素上回显（例如 $addresses[1]），则会显示该元素。

那么，为什么我没有从 php 函数中得到任何东西，以及将数组发送回调用 js 函数的最佳方式是什么？

提前非常感谢！

**js：**

```
$.post( 
   "./php/foo.php",
   {
    zipcode: zipcode
   },
  function(data) {
     $('#showData').html(data);
  }
); 
```

**php:**

```
$tempAddresses = array();
$addresses = array();

$url = 'http://www.foo.com/addresses/result.jspv?pnr=' . $zipcode;

$html = new simple_html_dom();
$html = file_get_html($url);

foreach($html->find('table tr') as $row) {
    $cell = $row->find('td', 0);

    array_push($tempAddresses, $cell);
}

$tempAddresses = array_unique($tempAddresses);

foreach ($tempAddresses as $address) {
    array_push($addresses, $address);
}

print_r($addresses); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T11:53:57.643

您可以使用 JSON 将数组返回到客户端，它可以通过 AJAX 发送，就像您在现有代码上所做的一样。

使用`json_encode()`PHP，此函数会将您的 PHP 数组转换为 JSON 字符串，您可以使用它通过 AJAX 将其发送回您的客户端

在您的 PHP 代码中（仅用于演示它是如何工作的）

**json.php**

```
<?php
$addresses['hello'] = NULL;
 $addresses['hello2'] = NULL;
if($_POST['zipcode'] == '123'){ //your POST data is recieved in a common way
  //sample array
  $addresses['hello'] = 'hi';
  $addresses['hello2'] = 'konnichiwa';
}
else{
   $addresses['hello'] = 'who are you?';
   $addresses['hello2'] = 'dare desu ka';
} 
 echo json_encode($addresses);  
?> 
```

然后在您的客户端脚本中（最好使用 Jquery 的长 AJAX 方式）

```
$.ajax({
     url:'http://localhost/json.php',
     type:'post',
     dataType:'json',
     data:{ 
         zipcode: '123' //sample data to send to the server
     }, 
     //the variable 'data' contains the response that can be manipulated  in JS 
     success:function(data) { 
          console.log(data); //it would show the JSON array in your console
          alert(data.hello); //will alert "hi"
     }
}); 
```

参考

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

[http://json.org/](http://json.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:52:03.577

js应该是

```
$.ajax({
     url:'your url',
     type:'post',
     dataType:'json',
     success:function(data) {
      console.log(JSON.stringify(data));
     }
    }); 
```

服务器

```
$tempAddresses = array();
$addresses = array();

$url = 'http://www.foo.com/addresses/result.jspv?pnr=' . $zipcode;

$html = new simple_html_dom();
$html = file_get_html($url);

foreach($html->find('table tr') as $row) {
    $cell = $row->find('td', 0);

    array_push($tempAddresses, $cell);
}

$tempAddresses = array_unique($tempAddresses);

foreach ($tempAddresses as $address) {
    $arr_res[] =$address;
}
header('content-type:application/json');
echo json_encode($arr_res); 
```

# visual-studio-2012 - 更新到 Resharper 7.1.1 后，specflow 测试开始失败

> ID：14081315
> 
> 赞同：1
> 
> 时间：2012-12-29T11:45:07.753
> 
> 标签：visual-studio-2012, resharper

我有两个程序集：1.带有功能文件的 AcceptanceTests 2.带有步骤定义的 AccountAbstractSteps

AcceptanceTests 有对 AccountAbstractSteps 的引用（复制本地 = true），并且在 AcceptanceTests app.config 我有

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="specFlow" type="TechTalk.SpecFlow.Configuration.ConfigurationSectionHandler, TechTalk.SpecFlow" />
  </configSections>
  <specFlow>
    <unitTestProvider name="MsTest.2010" />
    <stepAssemblies>
      <stepAssembly assembly="AccountAbstractSteps" />
    </stepAssemblies>
  </specFlow>
  <appSettings>
    <add key="homeUrl" value="http://localhost:1338" />
  </appSettings>
</configuration> 
```

在 resharper 更新后，所有测试都失败并显示消息

```
Class Initialization method AcceptanceTests.Features.MyFeature.FeatureSetup threw exception. System.IO.FileNotFoundException: System.IO.FileNotFoundException: Could not load file or assembly 'AccountAbstractSteps' or one of its dependencies. The system cannot find the file specified.=== Pre-bind state information ===
LOG: User = mycomp\myuser
LOG: DisplayName = AccountAbstractSteps
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: AccountAbstractSteps | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = mypath/Source Code/TestResults/comp 2012-12-29 13_35_22/Out
LOG: Initial PrivatePath = NULL
Calling assembly : TechTalk.SpecFlow, Version=1.9.0.77, Culture=neutral, PublicKeyToken=0778194805d6db41.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: mypath\TestResults\comp 2012-12-29 13_35_22\Out\AcceptanceTests.DLL.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL mypath/TestResults/comp 2012-12-29 13_35_22/Out/AccountAbstractSteps.DLL.
LOG: Attempting download of new URL mypath/TestResults/comp 2012-12-29 13_35_22/Out/AccountAbstractSteps/AccountAbstactSteps.DLL.
LOG: Attempting download of new URL mypath/TestResults/comp 2012-12-29 13_35_22/Out/AccountAbstractSteps.EXE.
LOG: Attempting download of new URL mypath/TestResults/comp 2012-12-29 13_35_22/Out/AccountAbstractSteps/AccountAbstactSteps.EXE.
.
    at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, ref StackCrawlMark stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, ref StackCrawlMark stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, ref StackCrawlMark stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, ref StackCrawlMark stackMark, IntPtr pPrivHostBinder, Boolean forIntrospection)
   at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, ref StackCrawlMark stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.Load(String assemblyString)
   at TechTalk.SpecFlow.Infrastructure.BindingAssemblyLoader.Load(String assemblyName)
   at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   at System.Collections.Generic.List`1.InsertRange(Int32 index, IEnumerable`1 collection)
   at TechTalk.SpecFlow.Infrastructure.TestRunnerFactory.Create(Assembly testAssembly)
   at TechTalk.SpecFlow.TestRunnerManager.CreateTestRunner(TestRunnerKey key)
   at TechTalk.SpecFlow.TestRunnerManager.GetTestRunner(TestRunnerKey key)
   at TechTalk.SpecFlow.TestRunnerManager.GetTestRunner(Assembly testAssembly, Boolean async)
   at TechTalk.SpecFlow.TestRunnerManager.GetTestRunner()
   at AcceptanceTests.Features.Home.MyFeature.FeatureSetup(TestContext testContext) in MyFeature.feature.cs: line 0 
```

# c# - C#\HtmlAgilityPack 解析其他然后 FIreBug

> ID：14081319
> 
> 赞同：0
> 
> 时间：2012-12-29T11:45:36.693
> 
> 标签：c#, html-parsing, firebug, html-agility-pack

我`HtmlAgilityPack`用来解析 Html 节点，我使用 firebug 搜索我正在寻找的节点属性，比如类名为“ABC”的 div 我注意到有时我没有得到我正在寻找的 div 的结果，我调试它并看到对于同一个 Node:S，from firebug 和 from 是不同`XPATH`的`HtmlAgilityPack`

```
/html[1]/body[1]/div[2]/div[3]/table[1]/tr[1]/td[1]/table[1]/tr[1]/td[1]/table[1]/tr[1]/td[1]/div[1]/table[1]/tr[1]/td[1]/div[1]/table[1]/tr[2]/td[1]/div[2]/table[1]/tr[1]/td[1]/div[1]/td[1]/div[1]

/html/body/div[3]/div[3]/table/tbody/tr/td/table/tbody/tr/td/table/tbody/tr/td/div/table/tbody/tr/td/div/table/tbody/tr[2]/td/div[2]/table/tbody/tr/td/div/div/table/tbody/tr[3]/td/table/tbody/tr/td[2]/div 
```

第一个是萤火虫。有谁知道我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T14:35:55.817

有两个可能的原因

1.  HTML 敏捷包未正确解析 HTML
2.  页面加载后，该网页已被客户端脚本更改。当您使用 Firebug 查看时，您看到的是 DOM，而不是 HTML 源代码。HAP 只能使用 HTML 源代码。

您会注意到在您显示的路径中（例如）HAP 版本中没有 TBODY 标记。TBODY 在 HTML 标记中是可选的，但在完整的 DOM 中仍然是必需的标记。如果缺少 TBODY，浏览器 HTML 解析器将始终添加它。HAP 不会。这可能导致在浏览器中工作的路径在 HAP 中失败

HAP 的替代方案是[CsQuery](http://www.github.com/jamietre/csquery)（在[nuget](http://nuget.org/packages/csquery)上），它使用符合标准的 HTML 解析器（实际上 - 与 Firefox 相同的解析器）。CsQuery 是一个 C# jquery 端口，它适用于 CSS 选择器（不是 xpath）。它应该为您提供与浏览器显示的 DOM 相匹配的 DOM。但是，如果问题仅仅是 javascript 正在改变 DOM，这不会改变任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T17:22:52.733

Html Agility Pack 只专注于标记。它不知道事物将如何呈现。我认为 Firebug 依赖于当前的 in-firefox-memory DOM，这可能会有很大的不同。这就是为什么您会看到诸如 TBODY 之类的元素仅存在于 DOM 中，而不存在于标记中（它们是可选的）。

此外，您还可以添加一个事实，即给定 Xml 节点有无限可能的 XPATH 表达式。

无论如何，一般来说，使用 Html Agility Pack 进行查询时所需的 XPATH 不需要工具提供的完整 XPATH 表达式。您只需要关注判别式，例如特定属性（如类）、id 等......您的代码将更能抵抗更改。但这意味着您需要了解一些有关 XPATH 的知识（这是一个很好的起点：[XPath 教程](http://www.w3schools.com/xpath/default.asp)）。所以你真的想构建这样的 XPATH 表达式：

```
//div[@class = 'ABC'] 
```

这将获取所有具有名为“ABC”的 CLASS 属性的 DIV 元素。

# printing - 来自聚类分析的 SAS 打印变量

> ID：14081321
> 
> 赞同：2
> 
> 时间：2012-12-29T11:45:59.010
> 
> 标签：printing, cluster-computing, sas

我已经使用 proc cluster 在 SAS 中进行了集群分析。

如何让 SAS 打印所选集群的数量？如果我选择了 clusters = 7，我想打印 7 个集群，其中包含每个集群中的观察值。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T15:42:19.357

使用`OUT=`on 选项`PROC CLUSTER`创建 SAS 数据集并使用`PROC TREE`将源记录关联到所需的集群数量。然后您可以对结果进行排序并按集群打印：

```
proc tree data=Tree    /* Data set created by PROC CLUSTER */
          out=New      /* New data set to create */
          nclusters=7  /* Number of clusters you want */
          noprint;
   id idvar;           /* ID variable from PROC CLUSTER */
   copy a b c;         /* Other variables from input data */
run;

proc sort data=new;
   by cluster idvar;
run;

proc print data=new;
   by cluster;
   id cluster;
run; 
```

有关更多信息，请参阅SAS 文档中的[此示例。](http://support.sas.com/documentation/cdl/en/statug/63962/HTML/default/viewer.htm#statug_cluster_sect002.htm)

# c++ - 神秘错误；即使在初始化之后，C++ 类的私有变量也不打印其值

> ID：14081323
> 
> 赞同：0
> 
> 时间：2012-12-29T11:46:15.547
> 
> 标签：c++

我创建了一个 String 类，它有两个私有成员 int length 和一个字符指针。有两个构造函数初始化这些成员。我的问题为什么 s1.print() 在我的代码中不起作用？

```
#include <iostream>

#include <string.h>

using namespace std;

class String {
  int length;
  char * ptr;
  public:
    String(int N, char s[]) {
      ptr = new char[N];
      strcpy(s, ptr);
    }
  String(int N) {
    ptr = new char[N];
  }
  String concat(String s2) {
    String result(s2.length + length, strcat(ptr, s2.ptr));
  }
  void print(void) {
    cout << ptr << endl;
  }
};

int main() {
  char temp[50];
  cin >> temp;
  String s1(strlen(temp) + 1, temp);
  //String s2(strlen(temp)+1, temp);
  s1.print();
  //s1.concat(s2);
  //s1.print();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:35:53.220

为了打印 char* 您需要将其转换为字符串然后打印。我建议您的数组大小为 N + 1 并在 ptr[N] = '\0' 处添加一个 NULL 终止符

# ruby-on-rails - 如何在 Rails 中构建数据结构，以便可以像这样迭代它

> ID：14081326
> 
> 赞同：0
> 
> 时间：2012-12-29T11:46:31.727
> 
> 标签：ruby-on-rails, ruby

我正在努力尝试弄清楚如何在 ruby​​ 中构建数据结构。

在我看来，我希望像这样迭代它

```
<% @conversations.each do |conversation| %>
    <%= "#{conversation.meta.subject} - #{conversation.meta.created_at} %>

    <% conversation.messages.each do |message| %>
         <%= message.name %>
    <% end %>

<% end %> 
```

消息来自活动记录查询

```
@messages = Message.find_by_name('john') 
```

Meta是这样的哈希

```
@meta = { 'subject ' => 'John Messages', 'created_at' => '2012-12-28 10:20:55.230286' } 
```

如何将其转换为我需要的 @conversations 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:37:27.430

我没有测试它。尝试并发布反馈。

```
class Conversation
  attr_reader :name

  class Meta
    attr_accessor :subject, :created_at
    def initialize(attributes = {})
      attributes.each do |key, value|
        send("#{key}=", value)
      end
    end
  end

  def initialize(name)
    @name = name
    messages # preload
  end

  def messages
    @messages ||= Message.where(:name => name).order("created_at") # .find_by_name returns a single object, but you waiting for an Array, so use .where
  end

  def default_meta_attributes
    {:subject => "#{name} Messages", :created_at => messages.last.created_at}
  end

  def meta(attrs={})
    @meta ||= Meta.new(attrs.blank? ? default_meta_attributes : attrs)
  end

end

# test

@conversations = []
@conversations << Conversation.new("John")

@conversations.each do |conversation|
  puts conversation.meta.subject
  puts conversation.meta.created_at
  puts "Now conversation messages of #{conversation.name}"
  conversation.messages.each do |message|
    puts message.name
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T11:52:05.430

```
Conversation
 - subject : string

has_many :messages

Message
 - name : string

belongs_to :conversation 
```

更改此行：

```
<%= "#{conversation.meta.subject} - #{conversation.meta.created_at} %> 
```

到

```
<%= "#{conversation.subject} - #{conversation.created_at} %> 
```

@conversations 可能来自用户的对话，因此请设置 Conversation belongs_to :user

# asp.net - 如何在 Asp.Net MVC 3 中对使用具有子实体的数据模型的类进行单元测试

> ID：14081332
> 
> 赞同：2
> 
> 时间：2012-12-29T11:47:24.730
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, unit-testing, moq

在我的网上商店应用程序中，我有一个“购物车”类，可以添加、删除和计算商品的总价值。数据模型如下：1 个项目包含 1 个产品和 1 个运输。产品有价格字段，运输有成本字段。这是购物车类代码：

```
public class CartLine
{
    public Item Item { get; set; }
    public int Quantity { get; set; }
}

public class Cart
{
    private List<CartLine> lineCollection = new List<CartLine>();

    // methods: 
    // Add(Item item, int quantity) 
    // Remove(Item item)

    public decimal ComputeTotalProductValue()
    {
        return lineCollection.Sum(l => l.Item.Product.Price*l.Quantity);
    }

    // methods with the same principle: 
    // ComputeTotalShippingValue()
    // ComputeOveralValue()
} 
```

这是我的单元测试（当然不起作用）：

```
[TestMethod]
    public void Can_Compute_Total_Values()
    {
        // Arrange 
        var itemMock = new Mock<IItemsRepository>();
        itemMock.Setup(i => i.GetItems()).Returns(new[]
            {
                new Item { ItemId = 1, ProductId = 1, ShippingId = 1 },
                new Item { ItemId = 2, ProductId = 2, ShippingId = 2 }
            });

        var productMock = new Mock<IProductRepository>();
        productMock.Setup(p => p.GetProducts()).Returns(new[]
            {
                new Product { ProductId = 1, Price = 10 },
                new Product { ProductId = 2, Price = 20 }
            });

        var shippingMock = new Mock<IShippingRepository>();
        shippingMock.Setup(s => s.GetShippings()).Returns(new[]
            {
                new Shipping { ShippingId = 1, Cost = 2 },
                new Shipping { ShippingId = 2, Cost = 5 }
            });

        var item1 = itemMock.Object.GetItems().ToArray()[0];
        var item2 = itemMock.Object.GetItems().ToArray()[1];    

        var target = new Cart();

        //Act
        target.Add(item1, 2);
        target.Add(item2, 4);

        decimal totalProduct = target.ComputeTotalProductValue();
        decimal totalShipping = target.ComputeTotalShippingValue();
        decimal overalSum = target.ComputeOveralValue();

        // Assert
        Assert.AreEqual(totalProduct, 100);
        Assert.AreEqual(totalShipping, 24);
        Assert.AreEqual(overalSum, 124);
    }
} 
```

该问题可能与将项目绑定到产品和运输有关。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T15:08:29.993

这里的根本问题是有关如何持久化模型的详细信息已泄漏到模型类中，因此使用模型的类（例如 Cart 使用 Item）有一定的义务了解您的持久层，它们不应该需要去做。这是太多的耦合，这就是让你的测试变得困难的原因。

考虑重新定义`Item`并添加`ItemDescription`这样的：

```
public class Item
{
   public Product Product {get;set;}
   public Shipping Shipping {get;set;}
}

public class ItemDescription
{
   public int ProductId {get;set;}
   public int ShippingId {get;set;}
} 
```

这使您可以很容易地测试 Cart 和其他使用您的`Item`类的类。如果您需要，我可以添加一个示例，但我猜这对您来说很明显。如果由于某种原因您无法更改，请将`Item`这种方法颠倒过来并创建一个`FullyConsitituedItem`类供您`Cart`使用。

这里的代价是你必须创建另一个`Item`从`ItemDescription`s 构造 s 的类，但实际上你无论如何都会这样做，它只会在整个地方零碎完成。添加`ItemDescription`使其明确，这更好，更具可读性。当然更可测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:55:54.717

您需要在测试方法中直接分配`Product`和`Shipping`。`item1``item2`

见代码示例：

```
[TestMethod]
public void Can_Compute_Total_Values()
{
    // Arrange 
    var item1 = new Item {
        Product = new Product { Price = 10 },
        Shipping = new Shipping { Cost = 2 }
    };

    var item2 = new Item {
        Product = new Product { Price = 20 },
        Shipping = new Shipping { Cost = 5 }
    };

    var target = new Cart();

    //Act
    target.Add(item1, 2);
    target.Add(item2, 4);

    decimal totalProduct = target.ComputeTotalProductValue();

    // Assert
    Assert.AreEqual(totalProduct, 100);

    Console.ReadLine();
} 
```

正如评论中提到的那样，没有必要模拟存储库，因为它们没有在正在测试的方法中使用。此方法更希望这样做`Product`并且`Shipping`已经初始化。
所以你需要手动准备正确的初始数据进行测试:)。

# jquery - 一个带委托的鼠标插件？

> ID：14081334
> 
> 赞同：0
> 
> 时间：2012-12-29T11:47:37.400
> 
> 标签：jquery, events, mouse

我正在使用 Remy Sharp 的名为[MouseHold Event](http://remysharp.com/2006/12/15/jquery-mousehold-event/)的 jQuery 插件，我尝试使用 .on() 方法绑定它，但是它不起作用。

```
$('#button').mousehold(function() {
   console.log(1);
}); 
```

上面的代码可以正常工作，如果#button 在 DOM 中，但如果不是，按钮是动态创建的。

那么，谁能帮帮我？如何使用 .on() 方法绑定 mousehold 事件，以使以下代码工作？

```
$('body').on('mousehold', '#button', function() {
    console.log(1);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:51:16.277

[Remy Sharp's`$.fn.mousehold`](http://remysharp.com/demo/mousehold.js)是一个 jQuery 插件，不是事件类型，您不能使用`.on()`任何事件处理程序绑定来绑定它。

* * *

## 更新

我建立了一个[`$.fn.mousehold`](https://github.com/aeurielesn/jQuery.fn/blob/master/$.fn.mousehold/$.fn.mousehold.js)与委托配合使用的插件。方法签名是：

> **`.mousehold( [selector], handler(eventObject) [, delay] )`**
> 
> *   **`selector`**：一个选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器被`null`或省略，事件总是在到达被选元素时触发。
>     
>     
> *   **`handler(eventObject)`**：触发​​事件时执行的函数。该值`false`也可以作为简单地返回的函数的简写`false`。
>     
>     
> *   **`delay`**：一个数字，确定在连续触发之前要等待的毫秒数。默认值为`100`。

例子：

```
$('#button').mousehold(function(evt) {
  console.log(evt.times);
}); 
```

```
$(document).mousehold("#button", function() {
  console.log(evt.times);
}, 200); 
```

[**这里有一个活生生的例子。**](http://jsfiddle.net/JXTDA/)

# c++ - 矢量排序与对象？

> ID：14081335
> 
> 赞同：5
> 
> 时间：2012-12-29T11:47:38.903
> 
> 标签：c++, algorithm, class, sorting, vector

因此，在标题的 c++ 文档中，有一个不错的函数可以让您对向量进行排序。我有一堂课`Person`。我有一个指向该类 ( `vector<Person*>`) 对象的指针向量，我想通过不同的参数来比较人们，例如年龄、姓名长度等。

我已经有返回所需变量的函数，但我不知道该怎么做。这是 C++ 参考[http://www.cplusplus.com/reference/algorithm/sort/中的排序向量函数的链接](http://www.cplusplus.com/reference/algorithm/sort/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-29T11:50:33.867

这很简单：

```
struct student
{
  string name;
  string grade;
};

bool cmd(const student & s1, const student & s2)
{
   if (s1.name != s2.name) return s1.name < s2.name;
   return s1.grade < s2.grade;
} 
```

然后：

```
vector<student> s;
sort(s.begin(), s.end(), cmd); 
```

学生将按字母顺序排序。如果两个学生有相同的名字，他们将使用他们的成绩进行排序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T13:30:43.737

尝试使用对象的相同属性覆盖诸如“<”、“>”之类的运算符。之后，您可以重新定义某种排序操作。

# java - 使用 URL java 连接到 localhost 时出错

> ID：14081337
> 
> 赞同：0
> 
> 时间：2012-12-29T11:48:07.537
> 
> 标签：java, sockets, url, networking, io

```
 try {
        URL u = new URL("http://[::1]/index.php");
        InputStream in = u.openStream();    
        int b;
        while ((b = in.read()) != -1) {
        System.out.write(b);
        }
       }
        catch (MalformedURLException e) {System.out.println(e);}
        catch (IOException e) {System.out.println(e);} 
```

**返回**

> 运行：java.net.ConnectException：连接被拒绝：连接 BUILD SUCCESSFUL（总时间：1 秒）

为什么会抛出错误？如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:50:55.110

您需要在您的本地主机上运行并监听端口 80 的服务器，否则您会收到连接被拒绝错误。

# mysql - 获取看起来像包含多个混合词的字符串的记录

> ID：14081338
> 
> 赞同：5
> 
> 时间：2012-12-29T11:48:12.293
> 
> 标签：mysql, sql, full-text-search, string-matching

**数据库类型**：MySql

**假设我的表**中有两行这样的：

> **[1.]** *“彼得昨天**去***
> **公园” [2.]** *“彼得明天要去公园”*

...并假设我将其作为模式字符串：

> *“马克**昨天****去了**电影院”*

 **...如何查询以获取第一条记录？在许多其他情况下，第一条记录将是我正在寻找的记录：

> *-“伦纳德昨晚**去了***
> *图书馆” -“杰克去年**去了**伦敦”*

...等等。

* * *

**注意**：我没有显示表结构，因为真正的问题是我必须寻找的条件。但是，我们可以假设该表称为**table**，并且有两个字段（*id*和*string*）

**编辑**：我知道 MySql 中有[FULLTEXT 索引](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)可能有助于完成这项工作。我还读过它们[不适用于**innoDB**表](http://dev.mysql.com/doc/refman/5.0/en/fulltext-restrictions.html)（我正在使用）。*（如果不可能，我可以重新设计我的数据库以使该表成为 MyISAM）*

**编辑**：正如 eggyal 在对该问题的第一条评论中所说，“v5.6”也支持**innoDB**表。

**编辑**：另一个例子是：

> **[1.]**今天的天空**看起来很蓝**
> **[2.]**今天的火看起来很红

我想通过假设获得第一条记录：

> 今天的海洋**看起来很蓝**

...作为模式字符串。

（在这种情况下，第二个记录也将是匹配项，相关性低于第一个记录，因为它**包含*****$*** **today***）*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:59:58.407

您可以`like`在查询中使用。请参阅以下示例：

```
mysql> select * from statements;
+----------------------------------+
| sentence                         |
+----------------------------------+
| Peter went to the park yesterday |
| Mark went to the cinema          |
| Peter is going the park tomorrow |
| Mark went to the park yesterday  |
| Mark went to the park tommorow   |
+----------------------------------+
5 rows in set (0.00 sec)

mysql> select * from statements where sentence like '% went to the park yesterday';
+----------------------------------+
| sentence                         |
+----------------------------------+
| Peter went to the park yesterday |
| Mark went to the park yesterday  |
+----------------------------------+
2 rows in set (0.00 sec)

mysql> select * from statements where sentence like '% went to the park %';
+----------------------------------+
| sentence                         |
+----------------------------------+
| Peter went to the park yesterday |
| Mark went to the park yesterday  |
| Mark went to the park tommorow   |
+----------------------------------+
3 rows in set (0.00 sec) 
```***

# java - 如何将 TextView 声明为全局变量以在其他类中使用

> ID：14081339
> 
> 赞同：1
> 
> 时间：2012-12-29T11:48:15.767
> 
> 标签：java, android, android-intent

我是一个新的安卓开发者。我想在所有活动中使用相同的**TextView 。**但是，我不知道如何将 TextView 声明为全局变量以及如何使用它来显示活动中的文本。请帮我。**代码很简单。** 感谢每一个人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:04:07.760

将带有 id 的文本视图的 XML 代码编写为：

```
<TextText
    android:id="@+id/textview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

比在您的活动中在 onCreate() 方法之前将其声明为：

```
public static TextView textview = (TextView) findViewByID(Your ID); 
```

比这将可供所有课程使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-16T18:21:18.773

你可以在任何地方使用它：

```
TextView textview = (TextView) findViewByID(Your ID);
 textview = (TextView) findViewByID(Your ID); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T11:52:57.177

使其成为单例。或者只保留一个公共静态引用。

```
public class MyReference {
    public static TextView myTextView = new TextView();
} 
```

然后你可以通过调用在任何地方使用它`MyReference.myTextView`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-29T12:04:25.560

我认为这个[链接](http://alinberce.wordpress.com/2012/02/20/android-edittext-with-custom-font-and-clear-button/)对

[http://alinberce.wordpress.com/2012/02/20/android-edittext-with-custom-font-and-clear-button/](http://alinberce.wordpress.com/2012/02/20/android-edittext-with-custom-font-and-clear-button/)

您`Editbox`只需创建一次并在应用程序中的任何地方使用

`Layout`在文件中使用天气或在 java 中动态使用`Class`

# python - 有没有办法用 PyCharm 捕获单元测试异常？

> ID：14081343
> 
> 赞同：13
> 
> 时间：2012-12-29T11:48:47.790
> 
> 标签：python, unit-testing, debugging, exception, pycharm

python unittest 运行器处理所有异常。我想用我的调试器捕捉它们。

有没有办法让我的 unittest 运行器重新引发测试异常以终止进程？我想自己处理它们。

**编辑**：找到解决方案。

你可以创建一个 unittest.TestSuite 并调用[debug()](http://docs.python.org/2/library/unittest.html#unittest.TestSuite.debug)来运行你想要调试的测试——包括用你的调试器捕获异常！

使用这种模式可以轻松完成：

```
import unittest

class DebuggableTestCase(unittest.TestCase):
    @classmethod
    def debugTestCase(cls):
        loader = unittest.defaultTestLoader
        testSuite = loader.loadTestsFromTestCase(cls)
        testSuite.debug()

class MyTestCase(DebuggableTestCase):
    def test_function_that_fails(self):
        raise Exception('test')

if __name__ == '__main__':
    MyTestCase.debugTestCase() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-24T20:45:09.907

*我知道这是一个旧线程，当问到这个问题时，也许其中一些事情并不存在。但只是为了后代...*

[您可以`unittest`使用 py.test 作为测试运行器来运行测试。](https://pytest.org/en/latest/unittest.html)您将立即获得一些[很棒的功能](http://pytest.org/en/latest/)。直接针对您的问题，有一些使用 py.test 进行调试的好方法，包括使用 PyCharm。

特别是使用 PyCharm 调试*任何故障*，事后检查 - 你所要求的 - 你可以安装`pytest-pycharm`插件。

```
pip install pytest-pycharm 
```

（我在每个项目的 virtualenv 中工作，所以这对我来说没有缺点。我建议您也这样做。否则，请注意您正在全局安装它，并且此插件将对使用此 Python 解释器的所有项目有效.)

也可以看看：

*   JetBrains PyCharm 文档 re: [Testing Frameworks](https://www.jetbrains.com/help/pycharm/2016.1/testing-frameworks.html)，它将告诉您如何使用 py.test 作为 PyCharm 中的测试运行程序。
*   堆栈溢出线程：[调试 pycharm/pydev 中的 pytest 事后异常](https://stackoverflow.com/questions/14086067/debugging-pytest-post-mortem-exceptions-in-pycharm-pydev)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-07T18:28:29.200

添加到问题本身的解决方案并不是很好的IMO：

1.  它不适用于 PyCharm unittest runner，因此您只能将其作为脚本进行调试，而不是作为测试。
2.  它不打印有关测试进度和结果的信息。

我的解决方案更“hacky”，但没有提到缺点。此外，只有在调试器下运行测试时，测试行为才会发生变化。

如果测试不期望出现异常，则会在异常处理程序中调用 unittest.TestResult.addError。我重新定义了这个方法来重新引发正在处理的异常。

我使用这个类作为我的测试用例的父类：

```
class DebuggableTestCase(unittest.TestCase):
    def __add_error_replacement(self, _, err):
        value, traceback = err[1:]
        raise value.with_traceback(traceback)

    def run(self, result=None):
        if result and sys.gettrace() is not None:
            result.addError = self.__add_error_replacement
        super().run(result) 
```

解决方案已使用 Python 3.4 和 PyCharm 3.4 进行了测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T12:08:53.920

如果您想要检查单元测试失败的原因，那么您实际上不需要引发异常。

只需在发生异常的行设置断点并在调试模式下运行。PyCharm 将进入调试屏幕，让您检查变量和调用堆栈。

# c# - 将 HtmlAgilityPack 设置为与 Mono for Android 一起使用

> ID：14081345
> 
> 赞同：1
> 
> 时间：2012-12-29T11:48:59.383
> 
> 标签：c#, xamarin.android, html-agility-pack

我以前也问过类似的问题，但没有人回答。如何设置`HtmlAgilityPack`为使用 Mono for Android？我已经添加了参考，`.dll`但是在尝试使用时`HtmlDocument`出现错误

> System.Xml 版本 2.0.0.0 或 4.0.0.0 丢失。

但是有一个对 System.Xml 版本 2.0.5.0 的默认引用。如果我引用 4.0.0.0 它可以工作，但是某些 Mono for Android 的东西不起作用。这里的一个用户给了我一个Android特定版本，但它似乎不包含`HtmlWeb`，这意味着它没有用。如何设置`HtmlAgilityPack`为使用 Mono for Android？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:09:36.023

您需要[针对 Mono for Android 程序集重建 HtmlAgilityPack 源代码](http://forums.xamarin.com/discussion/comment/2139/#Comment_2139)。

# css - 如何强制 CSS3 幻灯片动画以正确的顺序显示？

> ID：14081351
> 
> 赞同：1
> 
> 时间：2012-12-29T11:49:39.000
> 
> 标签：css, animation, slideshow, direction

我的网页上有 4 张图片。我正在使用 CSS 在无限循环中从一个图像淡入到下一个图像。我想强制“幻灯片”的方向，以便它从 html 中引用的第一个图像开始，然后依次移动到第四个（1 -> 2 -> 3-> 4），然后返回开始并无限循环.

如果我尝试在 CSS 中指定正确的顺序，则在从头开始进入循环之前，第四张图像会先显示并有很长的延迟。

我只能让图像以相反的顺序正确循环——也就是说 4、3、2、1。除了我计划为不支持 CSS3 的浏览器回退到 jQuery Cycle Lite 之外，我不会介意，而且我知道 Cycle Lite 将按照标记中引用图像的顺序循环（1,2， 3,4 等）。

我的代码如下：

**HTML**

```
<div id="cf4a" class="shadow">
   <img alt="Image1" src="../Banners/Image1.png" />
   <img alt="Image2" src="../Banners/Image2.png" />
   <img alt="Image3" src="../Banners/Image3.png" />
   <img alt="Image4" src="../Banners/Image4.png" />
</div> 
```

**CSS**

```
@-webkit-keyframes cf4FadeInOut {
   0% {opacity:1;}
   19% {opacity:1;}
   25% {opacity:0;}
   94% {opacity:0;}
   100% {opacity:1;}
}

@-moz-keyframes cf4FadeInOut {
   0% {opacity:1;}
   19% {opacity:1;}
   25% {opacity:0;}
   94% {opacity:0;}
   100% {opacity:1;}
}

@-o-keyframes cf4FadeInOut {
   0% {opacity:1;}
   19% {opacity:1;}
   25% {opacity:0;}
   94% {opacity:0;}
   100% {opacity:1;}
}

@keyframes cf4FadeInOut {
   0% {opacity:1;}
   19% {opacity:1;}
   25% {opacity:0;}
   94% {opacity:0;}
   100% {opacity:1;}
}

#cf4a {
   position:relative;
   height:350px;
   width:990px;
   margin:30px auto;
}

#cf4a img {
   position:absolute;
   left:0;
}

#cf4a img {
   -webkit-animation-name: cf4FadeInOut;
   -webkit-animation-timing-function: ease-in-out;
   -webkit-animation-iteration-count: infinite;
   -webkit-animation-duration: 32s;

   -moz-animation-name: cf4FadeInOut;
   -moz-animation-timing-function: ease-in-out;
   -moz-animation-iteration-count: infinite;
   -moz-animation-duration: 32s;

   -o-animation-name: cf4FadeInOut;
   -o-animation-timing-function: ease-in-out;
   -o-animation-iteration-count: infinite;
   -o-animation-duration: 32s;

   animation-name: cf4FadeInOut;
   animation-timing-function: ease-in-out;
   animation-iteration-count: infinite;
   animation-duration: 32s;
}

#cf4a img:nth-of-type(1) {
   -webkit-animation-delay: 0s;
   -moz-animation-delay: 0s;
   -o-animation-delay: 0s;
   animation-delay: 0s;
}

#cf4a img:nth-of-type(2) {
   -webkit-animation-delay: 8s;
   -moz-animation-delay: 8s;
   -o-animation-delay: 8s;
   animation-delay: 8s;
}

#cf4a img:nth-of-type(3) {
   -webkit-animation-delay: 16s;
   -moz-animation-delay: 16s;
   -o-animation-delay: 16s;
   animation-delay: 16s;
}

#cf4a img:nth-of-type(4) {
   -webkit-animation-delay: 24s;
   -moz-animation-delay: 24s;
   -o-animation-delay: 24s;
   animation-delay: 24s;
} 
```

因此，如果有人可以就如何在不显示第四张幻灯片 24 秒的情况下让我的幻灯片正常工作提出建议，我将不胜感激。

感谢和抱歉，很长的帖子。

莱昂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:32:32.697

在您的情况下，最简单的方法是更改​​他们的`z-index`

```
#cf4a img:nth-of-type(1) {
   -webkit-animation-delay: 0s;
   -moz-animation-delay: 0s;
   -o-animation-delay: 0s;
   animation-delay: 0s;

    z-index:4;
}

#cf4a img:nth-of-type(2) {
   -webkit-animation-delay: 8s;
   -moz-animation-delay: 8s;
   -o-animation-delay: 8s;
   animation-delay: 8s;

    z-index:3;
}

#cf4a img:nth-of-type(3) {
   -webkit-animation-delay: 16s;
   -moz-animation-delay: 16s;
   -o-animation-delay: 16s;
   animation-delay: 16s;

    z-index:2;
}

#cf4a img:nth-of-type(4) {
   -webkit-animation-delay: 24s;
   -moz-animation-delay: 24s;
   -o-animation-delay: 24s;
   animation-delay: 24s;

    z-index:1;
} 
```

**演示在** [http://jsfiddle.net/gaby/ZUErm/](http://jsfiddle.net/gaby/ZUErm/)

# c++ - 将工作委托给超类的构造函数

> ID：14081352
> 
> 赞同：1
> 
> 时间：2012-12-29T11:49:51.893
> 
> 标签：c++, constructor, polymorphism

> **可能重复：**
> [C++ 超类构造函数调用规则](https://stackoverflow.com/questions/120876/c-superclass-constructor-calling-rules)

您如何将工作委托给超类的构造函数？例如

```
class Super {
public:
    int x, y;
    Super() {x = y = 100;}
};
class Sub : public Super {
public:
    float z;
    Sub() {z = 2.5;}
}; 
```

如何`Sub::Sub()`调用`Super::Super()`，以便我不必在两个构造函数中设置`x`和？`y`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T11:54:13.930

使用构造函数的成员初始化列表：

```
class Super {
public:
    int x, y;
    Super() : x(100), y(100)  // initialize x and y to 100
    {
       // that was assignment, not initialization
       // x = y = 100;
    }
};
class Sub : public Super {
public:
    float z;
    Sub() : z(2.5) { }
}; 
```

您不需要显式调用基类的*默认*构造函数，它会在派生类的构造函数运行之前自动调用。

另一方面，如果您希望使用参数构造基类（如果存在这样的构造函数），那么您 *需要*调用它：

```
class Super {
public:
    int x, y;
    explicit Super(int i) : x(i), y(i)  // initialize x and y to i
    { }
};
class Sub : public Super {
public:
    float z;
    Sub() : Super(100), z(2.5) { }
}; 
```

此外，任何*可以*不带参数调用的构造函数也是默认构造函数。所以你可以这样做：

```
class Super {
public:
    int x, y;
    explicit Super(int i = 100) : x(i), y(i)
    { }
};
class Sub : public Super {
public:
    float z;
    Sub() : Super(42), z(2.5) { }
};
class AnotherSub : public {
public:
    AnotherSub() { }
    // this constructor could be even left out completely, the compiler generated
    // one will do the right thing
}; 
```

并且仅当您不希望使用默认值初始化基成员时才显式调用它。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T11:51:21.007

`member initialize list`如果您愿意，可以调用基本构造函数，实际上 Super() 构造函数会被自动调用。

不要忘记将超级析构函数设为虚拟。

```
class Super {
public:
    int x, y;
    Super() : x(100),y(100) {}
    virtual ~Super(){}
}; 
```

如果应该允许通过指向 Super 的指针进行删除，那么 Super 析构函数必须是公共的和虚拟的。

# javascript - jQuery position().left 在动画 marginLeft '-=300px' 后总是 === 0

> ID：14081359
> 
> 赞同：1
> 
> 时间：2012-12-29T11:50:55.693
> 
> 标签：javascript, jquery, jquery-animate, position

这现在快把我逼疯了！我想使用 - 边距为元素“左”设置动画。但是，一旦显示了所有子元素，我也想在相反的方向上为相同的元素设置动画。我的脚本不是那么简单但类似：

```
timer = setInterval(function(){
    var direction = ($('ul','.column').css('margin-left') <= 0)? '-=': '+=';
    $('ul','.column').animate({marginLeft:direction+($('li','.column').width())+'px'},500);
},1000); 
```

我也尝试过`$('ul,'.column').position().left <=0`代替上述条件。我的问题是`margin-left`永远`position().left`不会返回负变量：S。如果变量“应该”为负，它总是返回为 0。我可以很容易地计算出我希望动画朝相反方向移动的位置，但如果条件不是负数，这将不起作用。

我非常感谢您对为什么`margin-left`并`position().left`始终返回 0 而不是 -1000 或其他什么的一些见解。但是，如果您有替代解决方案，我仍然会很高兴:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:55:46.633

jQuery 的 CSS margin-left 将返回一个字符串，如：`20px`你需要摆脱 'px' 使用

```
parseInt( $('ul','.column').css('margin-left') , 10 ) 
```

所以应该是：

```
timer = setInterval(function(){
    var margLeft = parseInt( $('ul','.column').css('margin-left') , 10);
    var direction =  margLeft<=0 ? '-=': '+=';
    $('ul','.column').animate({ marginLeft: direction+($('li','.column').width()) },500);
},1000); 
```

如果我记得很清楚，Chrome 在动画元素时遇到了问题，这些元素没有在 CSS 中指定应用动画的属性，这意味着：确保在样式表中为您计划动画的元素的左边距设置一个值。

# ejb-3.0 - EJB 3.0 从单个会话 bean EJB 3.0 访问两个数据库

> ID：14081362
> 
> 赞同：1
> 
> 时间：2012-12-29T11:51:26.623
> 
> 标签：ejb-3.0, jboss5.x

我想从 EJB 3.0 中的单个无状态会话 bean 访问两个数据库。我创建了一个会话 bean，在其中声明了两个实体管理器，以便与两个数据库进行通信。实体管理器在我的无状态会话 bean 中以这种方式定义：

```
@PersistenceContext (unitName="abc") private EntityManager manager;
@PersistenceContext (unitName="xyz") private EntityManager manager1; 
```

使用第一个实体管理器，我从一个数据库中获取数据，然后使用第二个实体管理器将其插入到第二个数据库中。我现在的问题是我可以声明两个实体管理器，但我不能同时使用它们。我必须使用其中一个注释掉，否则我会得到这个异常：

```
Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection
Caused by: org.jboss.util.NestedSQLException: Could not enlist in transaction on
entering meta-aware object!;
  - nested throwable:" "Caused by:  
    org.jboss.resource.JBossResourceException: Could not enlist in transaction on entering meta-aware object"
    "Caused by: javax.transaction.SystemException: java.lang.Throwable:" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:23:27.827

无状态会话 bean 中的每个方法都会获得一个事务。如果您在该方法中访问多个数据库，则必须有 xa 数据源，而不是 tx。

我以前遇到过这种情况，并且有一个解决方法。为每个数据库创建单独的无状态会话 bean，然后关闭原始无状态会话 bean 中原始方法的事务：

```
@EJB(mappedName="com.abc.AbcManager")
private AbcManager abcManager;

@EJB(mappedName="com.xyz.XyzManager")
private XyzManager xyzManager;

@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
public MyResponse getMyData(MyRequest request) throws MyException {
    Collection<Data> data = abcManager.getData();

    xyzManager.storeData(data);

    return null;
} 
```

新会话 bean 上的方法将创建它们自己的事务，但您仍然可以让一个无状态会话 bean 协调其他两个。

# javascript - 修复溢出中的定位元素：滚动

> ID：14081366
> 
> 赞同：2
> 
> 时间：2012-12-29T11:51:57.320
> 
> 标签：javascript, jquery, html, css

我正在尝试使元素始终位于窗口的右上角。

问题是当滚动条出现时，它保持相同的位置并忽略滚动条的大小。

现在的样子：

![在此处输入图像描述](../Images/b0b4cfb8af882984d9112d9fc47132bc.png)

我希望它看起来如何：

![在此处输入图像描述](../Images/d18c4da5a3374b4127bfb922ac7e9dec.png)

```
.outer {
    position: relative;
    height: 100px;
    overflow-x: hidden;
    overflow-y: auto;
    width: 100%;
}
.icon {
    position: fixed;
    right: 0;
    top: 0;
    background: red;
    width: 10px; height: 10px;   
} 
```

​</p>

小提琴：http: [//jsfiddle.net/L5YhF/](http://jsfiddle.net/L5YhF/)

有什么技巧可以解决吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:57:59.397

尝试制作正确的属性：

```
right: 10px; 
```

或您需要的任何偏移量。

**编辑 ：**

根据这个问题的回答[如何获得浏览器的滚动条大小？](https://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes)您可以编写一个 javascript 函数，以跨浏览器的方式以您想要的方式放置您的图标。这个小提琴的例子：

[http://jsfiddle.net/L5YhF/9/](http://jsfiddle.net/L5YhF/9/)

代码：

```
function getScrollBarWidth () {
  var inner = document.createElement('p');
  inner.style.width = "100%";
  inner.style.height = "200px";

  var outer = document.createElement('div');
  outer.style.position = "absolute";
  outer.style.top = "0px";
  outer.style.left = "0px";
  outer.style.visibility = "hidden";
  outer.style.width = "200px";
  outer.style.height = "150px";
  outer.style.overflow = "hidden";
  outer.appendChild (inner);

  document.body.appendChild (outer);
  var w1 = inner.offsetWidth;
  outer.style.overflow = 'scroll';
  var w2 = inner.offsetWidth;
  if (w1 == w2) w2 = outer.clientWidth;

  document.body.removeChild (outer);
  return (w1 - w2);
};

window.onload = function() {
    var scrollWidth = getScrollBarWidth ();
    var ico = document.getElementById('ico');
    ico.style.right = scrollWidth + "px";
}; 
```

# primefaces - 如何为 primefaces menuitem 使用转换器

> ID：14081370
> 
> 赞同：0
> 
> 时间：2012-12-29T11:52:36.163
> 
> 标签：primefaces, converter, menuitem, selectonemenu

当我使用 p:menuItem 时，我无法像在 p:selectOneMenu 中那样找到转换器属性。有没有其他选择？请告诉我。

我正在使用 primefaces 3.4.2 版本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:07:27.013

您可以仅在作为值持有者的组件中使用转换器（这些是输入元素）。Menuitem 是 UICommand 组件，它会触发一些操作。只有您可以转换的输出才是价值。为此，您必须自己进行字符串转换。您必须在支持 bean 中执行此操作，并在 EL 页面上读取该值。

# image - Three.js 没有显示我的纹理

> ID：14081371
> 
> 赞同：2
> 
> 时间：2012-12-29T11:52:44.067
> 
> 标签：image, textures, webgl, three.js

我需要制作一个带有纹理的球。我是 WebGL 和 Three.js 的新手。问题是我看到了一个白色球体，但没有看到上面的纹理。作为新用户，我无法提交图片。

代码部分是这样的：

```
function init() {

            canvas = document.getElementById( 'canvas' ); 

            camera = new THREE.PerspectiveCamera( 90, window.innerWidth / window.innerHeight, 1, 10000 );
            camera.position.z = 1000;

            scene = new THREE.Scene();

                            camera.lookAt (scene.position); 

                            var llum = new THREE.DirectionalLight();
                            llum.intensity=50;

                            llum.position.x=camera.position.x;
                            llum.position.y=camera.position.y;
                            llum.position.z=camera.position.z;

                            llum.lookAt(scene.position);

                            scene.add(llum);

                            var texture = THREE.ImageUtils.loadTexture('ull.jpg');

            texture.needsUpdate = true;

            var material = new THREE.MeshBasicMaterial( texture );

            var quality = 16, step = 1024 / quality;

            var geom = new THREE.SphereGeometry(500,100,100);

            mesh = new THREE.Mesh( geom, material );

            scene.add( mesh );

            renderer = new THREE.WebGLRenderer({ antialias: true});
            renderer.setSize( window.innerWidth, window.innerHeight );

            canvas.innerHTML = ""; 

                            //Afegim al canvas el que hem de renderitzar
            canvas.appendChild( renderer.domElement );

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );

            window.addEventListener( 'resize', onWindowResize, false );

        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:32:14.703

它应该是这样的：

```
var material = new THREE.MeshBasicMaterial( { map: texture } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-14T17:43:32.293

由于这是显示在 Google 搜索结果中的第一页，因此我将发布针对我的解决方案的解决方案。我在正方形上绘制纹理，但正方形实际上是向后旋转的，所以相机看到正方形的背面没有纹理，在固定旋转后一切正常。

```
 var geometry = new THREE.PlaneGeometry(FLOOR_SIZE, FLOOR_SIZE, 10, 10);

    var loader = new THREE.TextureLoader();
    loader.load('images/floor.jpg', function ( texture ) {
        var material = new THREE.MeshBasicMaterial({
            map: texture, 
            overdraw: 0.5
        });

        var floor = new THREE.Mesh( geometry, material );

        // ROTATION THAT MADE SQUARE INVISIBLE WAS Math.PI/2

        floor.rotation.x = -Math.PI/2;
        floor.position.y = -0.1;
        scene.add(floor);
     }); 
```

# javascript - 序列化淘汰视图模型，想法？

> ID：14081376
> 
> 赞同：0
> 
> 时间：2012-12-29T11:53:02.480
> 
> 标签：javascript, knockout.js

我正在尝试将视图模型序列化为 json，但我只`undefined`参与`ko.toJSON(PageViewModel)`其中。任何想法？

```
function PageViewModel() {

    //Properties
    this.Name = ko.observable();
    this.Title = ko.observable();
    this.Language = ko.observable();

    //Seo
    this.SEOKeywords = ko.observable();
    this.SEODescription = ko.observable();
    this.SEOIndexPage = ko.observable();
    this.SEOGeoPositionLatitude = ko.observable();
    this.SEOGeoPositionLongitude = ko.observable();
    this.SEOGeoPositionPlaceName = ko.observable();
    this.SEOGeoPositionRegion = ko.observable();

} 
```

```
ko.applyBindings(new PageViewModel());
window.loadFirebugConsole;
console.log(ko.toJSON(PageViewModel)); 
```

谢谢米克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T12:33:03.493

您正在尝试序列化函数而不是对象。将您的代码更新为：

```
var vm = new PageViewModel();
ko.applyBindings(vm);
window.loadFirebugConsole;
console.log(ko.toJSON(vm)); 
```

# android - ImageView 上的 setPadding 崩溃活动

> ID：14081378
> 
> 赞同：1
> 
> 时间：2012-12-29T11:53:03.137
> 
> 标签：android, nullpointerexception, imageview, android-actionbar-compat

我使用 actionbarcompat 在预 Honeycomp 设备上也有一个操作栏。

由于主页图标和操作栏的标题之间没有空格，我将其添加到我的活动中：

```
// add padding to the right of home item
ImageView view = (ImageView)findViewById(android.R.id.home);
view.setPadding(0, 0, 10, 0); 
```

实际上第二行（setPadding）导致了崩溃。

它在 Jelly Bean 设备上运行良好。但我得到一个空指针异常，例如在 Android 2.3 设备上运行它。

这是崩溃的 logcat 输出：

```
12-29 11:44:36.968: E/AndroidRuntime(329): FATAL EXCEPTION: main
12-29 11:44:36.968: E/AndroidRuntime(329): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.GetRichOrDieSmoking/com.GetRichOrDieSmoking.MainScreen}: java.lang.NullPointerException
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.os.Looper.loop(Looper.java:123)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-29 11:44:36.968: E/AndroidRuntime(329):  at java.lang.reflect.Method.invokeNative(Native Method)
12-29 11:44:36.968: E/AndroidRuntime(329):  at java.lang.reflect.Method.invoke(Method.java:507)
12-29 11:44:36.968: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-29 11:44:36.968: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-29 11:44:36.968: E/AndroidRuntime(329):  at dalvik.system.NativeStart.main(Native Method)
12-29 11:44:36.968: E/AndroidRuntime(329): Caused by: java.lang.NullPointerException
12-29 11:44:36.968: E/AndroidRuntime(329):  at com.GetRichOrDieSmoking.MainScreen.onCreate(MainScreen.java:463)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-29 11:44:36.968: E/AndroidRuntime(329):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-29 11:44:36.968: E/AndroidRuntime(329):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:56:21.213

[`android.R.id.home`](http://developer.android.com/reference/android/R.id.html#home)仅在 API 级别 11 中引入。因此无法在 Android 2.3 中创建视图。因此，当您尝试在您得到的空视图上设置填充时，在以下行中`NullPointerException`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:46:51.993

由于 API 级别，您可能无法访问主视图。

为操作栏使用第三方库以支持低 API 级别。

我强烈建议使用[actionBarSherlock](http://actionbarsherlock.com/)。

# iphone - 允许输入文本，除了 UITextview 中图像占用的空间

> ID：14081380
> 
> 赞同：1
> 
> 时间：2012-12-29T11:53:15.773
> 
> 标签：iphone, objective-c, uiimageview, uitextview, cursor-position

在我的应用程序中，我有一个`UITextView`. 在那`UITextView`，当我单击工具栏中的相机按钮时，我有两个选项：使用照片或拍摄新照片。然后我通过`UIImageview`在`UITextView`. 添加图像后。如果我在键盘上输入字母，就会在图像后面打印出来。

如何避免在该图像旁边打印文本并禁止光标在图像后面打印？

我需要将光标移动到`UIImageview`位置的末尾。可能吗？

# java - 在另一个 JFrame 中使用 JButton 刷新 JTable？

> ID：14081388
> 
> 赞同：0
> 
> 时间：2012-12-29T11:54:12.763
> 
> 标签：java, swing, jdbc, jtable, jbutton

我创建了两个`JFrame`s. 第 1 帧有 a `JTable`，第 2 帧有`JButton`. `JTable` 包含来自 MySQL 表的数据。我想要做的是：当我单击第`JButton`2`JTable`帧时，需要刷新第 1 帧。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T01:15:32.873

让您的[`TableModel`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)导出[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)触发`TableModelEvent`适合所做的任何更改。使用`Action`构建按钮。单击按钮并`Action`触发时，任何侦听表模型的表都会自动更新。[这里](https://stackoverflow.com/a/13500910/230513)和[这里](https://stackoverflow.com/a/4039359/230513)都有相关的例子。

另请参阅[*多个 JFrame 的使用，好/坏做法？*](https://stackoverflow.com/q/9554636/230513)

# iphone - UIMenuController 在 ios6 中不起作用

> ID：14081390
> 
> 赞同：1
> 
> 时间：2012-12-29T11:54:28.810
> 
> 标签：iphone, cocoa-touch, ios6

我正在开发 ios6，并且正在开发一个 iphone 应用程序。在这个应用程序中，我使用`UIMenuController`复制选项。复制选项在 ios5 中工作正常，但在 ios6 中不起作用。我无法显示复制选项。

下面我附上了我的代码。请有人帮我解决这个问题。

```
- (BOOL) canPerformAction: (SEL) action withSender: (id) sender
{
    if (action == @selector(paste:))
    {
        return NO;
    }
    else
    {  
        return (action == @selector(copy:)); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:34:20.640

```
- (BOOL) canPerformAction: (SEL) action withSender: (id) sender
{
    if (action == @selector(paste:))
    {
        return NO;
    }
    else
    {  
        return (action == @selector(copy:)); 
    }
} 
return [super canPerformAction:action withSender:sender];
} 
```

试试这个，希望有帮助！！

# php - ai联系安全验证码在joomla 2.5中不起作用

> ID：14081393
> 
> 赞同：1
> 
> 时间：2012-12-29T11:54:47.130
> 
> 标签：php, jquery, ajax, joomla2.5, captcha

我在我的 joomla 2.5 站点中安装了一个名为 ai_contact_safe 的联系我们组件。问题是，我在这个组件中找不到验证码。我只能在那个地方找到 3 个点。我在管理端启用了验证码选项。

这是我的[链接](http://keralacarpentry.com/freedom2/index.php/contact-us)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:09:41.100

这是一个 Jquery 无冲突错误，很容易修复。打开模板并添加：

```
<script type="text/javascript">jQuery.noConflict();</script> 
```

它会解决的。

# matlab - 在 MATLAB GUIDE 中将 helpdlg('helpstring') 置于最前面

> ID：14081394
> 
> 赞同：1
> 
> 时间：2012-12-29T11:54:50.437
> 
> 标签：matlab, dialog, matlab-guide

我试图弹出一个帮助窗口，所以用户看到的第一件事就是一个帮助窗口。但它留在我的 GUIDE 窗口的后面。我将代码放在我的打开函数中。

```
% --- Executes just before layout is made visible.
function layout_OpeningFcn(hObject, ~, handles, varargin)
% Open the help dialog
helpdlg('My help message')

% opening code here...

guidata(hObject, handles); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:43:06.133

您要做的是中断OpeningFcn的执行以显示窗口。为避免在点击“ok”后等待很长时间，您应该将帮助信息放在 OpeningFcn 的末尾。

```
% --- Executes just before layout is made visible.
function layout_OpeningFcn(hObject, ~, handles, varargin)
% Open the help dialog
h = helpdlg('My help message');

% opening code here...

guidata(hObject, handles);

%# optional: set(hObject,'visible','on')
%# if you want to have the GUI be visible when the dialogue pops up.

uiwait(h); %# wait for closing the window 
```

# c# - C# 用户登录处理

> ID：14081404
> 
> 赞同：0
> 
> 时间：2012-12-29T11:56:01.513
> 
> 标签：c#, .net, login

我目前正在用 C#（Windows 8 Windows Store App，.Net 4.5）编写一个应用程序，它高度依赖于我以前从未工作过的一件事：用户管理。

要完成的应用程序必须访问基于 Windows 的服务器，并使用该服务器解析登录信息，然后根据该用户数据显示功能、配置文件信息等。现在我被困在了真正的开始，我不知道如何解决整个应用程序的全局用户（很像 XBox 应用程序，在每个应用程序的右上角都有一个小的用户表示会很好）屏幕）。

关于平台：我们使用Windows解决方案进行全网用户管理（运行Microsoft ActiveDirectory服务器），为Exchange和SharePoint服务器提供信息。我要做的是通过AD服务器对用户进行身份验证，拉取信息（全名，角色，访问权限，其他用户数据），然后使用这些信息，首先在右上角显示用户配置文件（XBox Win8应用程序样式），并加载可访问的功能（这将基于用户的角色和其他域，例如组）。

如果有人知道教程或解决方案可以让我更深入地解决这部分问题，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:50:31.697

.NET Framework 中包含用于处理活动目录请求的特定库。看这里： [C# 中对 Active Directory 的通用身份验证调用](https://stackoverflow.com/questions/778990/generic-authentication-call-to-active-directory-in-c-sharp)

[http://support.microsoft.com/kb/316748](http://support.microsoft.com/kb/316748)

# header - 为 Arduino 以太网上的传出 UDP 数据报设置 IP 数据包的生存时间 (TTL)

> ID：14081407
> 
> 赞同：3
> 
> 时间：2012-12-29T11:56:21.513
> 
> 标签：header, udp, ip, arduino, ttl

我正在使用 Arduino 以太网将 UDP 数据报发送到远程主机。我用来发送单个数据报的代码是：

```
Udp.begin(localPort);
...
Udp.beginPacket(remoteIP, remotePort);
Udp.write(data);
Udp.endPacket(); 
```

我的问题是我需要自定义传出 UDP/IP 数据包的 TTL，但是[Udp.begin](http://arduino.cc/en/Reference/EthernetUDPBegin)、[Udp.beginPacket](http://arduino.cc/en/Reference/EthernetUDPBeginPacket)、[Udp.write](http://arduino.cc/en/Reference/EthernetUDPWrite)和[Udp.endPacket](http://arduino.cc/en/Reference/EthernetUDPEndPacket)都没有提供参数来设置此类选项。

我知道 TTL 字段属于[IP 标头](http://en.wikipedia.org/wiki/IPv4_header#Header)，但您似乎没有使用 Arduino 的以太网/套接字/w5100 库处理原始 IP 数据包。

我查看了上述函数的定义，特别是`EthernetUDP::beginPacket`在我想在传递消息的有效负载之前找到有用的东西，但我被卡住了，因为它只包含对`startUDP()`(socket. cpp），后者处理我不清楚的 W5100 类的方法。

有人知道是否有某种高级工具来设置数据包的 TTL，还是应该更深入地研究库来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T13:41:16.933

最后我找到了解决方案。WIZnet W5100 插座提供描述插座行为的寄存器，如[W5100 数据表版本 1.1.6](http://www.sparkfun.com/datasheets/DevTools/Arduino/W5100_Datasheet_v1_1_6.pdf)中所述。这些寄存器之一是`Socket 0 IP TTL (S0_TTL)`（地址`0x0416`）。我看到这些寄存器被写入`startUDP`函数 (in `socket.cpp`) 以设置套接字的目标 IP 地址和端口：

```
W5100.writeSnDIPR(s, addr);
W5100.writeSnDPORT(s, port); 
```

所以我在那儿附加了一个电话

```
W5100.writeSnTTL(s, (uint8_t) 255); // set TTL to 255 
```

它确实有效，即草图已编译。这种方法没有记录，我通过查看其他寄存器写入方法并在网上找到了几个使用它的项目来发现它。

我还编写了[这个补丁](http://pastebin.com/e8WtA5C8)`Udp.beginPacket(remoteIP, remotePort, ttl)`来提供对Arduino 1.0.1 - 2012.05.21 附带的以太网库的覆盖。

# c# - 扩展的 UIButton 边框最初未绘制

> ID：14081410
> 
> 赞同：31
> 
> 时间：2012-12-29T11:56:47.940
> 
> 标签：c#, mono, xamarin.ios, uibutton, uikit

我正在尝试创建一个自定义 UIButton，它从`UIButtonType.RoundedRect`.

我添加的功能正在运行，但我的按钮的初始圆角边框状态存在问题。我的扩展按钮的边框直到被点击后才被绘制。

![前后截图](../Images/db65385158efdc13f0ae63afc84d1fc7.png)

更新（2013 年 1 月 24 日）：根据 Richard Marskell 的要求添加了红色背景测试的结果，得出的结论是仅绘制了按钮的标签。`BackgroundColor = UIColor.Red;`

![红色背景测试，前后截图](../Images/8e0fdd0a1f8dbac9db48f79529fddce7.png)

下面是我创建自定义按钮的源代码。

```
public class TestView : UIView
{
    public TestView(IntPtr p) : base(p) { }

    public TestView(RectangleF bounds)
    {
        Frame = bounds;
        BackgroundColor = UIColor.White;

        UIButton button1 = new UIButton(UIButtonType.RoundedRect);
        button1.Frame = new RectangleF(20,20,100,50);
        button1.SetTitle("Button 1", UIControlState.Normal);
        AddSubview(button1); // Drawn Correctly

        MyButton button2 = new MyButton();
        button2.Frame = new RectangleF(20,90,100,50);
        button2.SetTitle("Button 2", UIControlState.Normal);
        AddSubview(button2); // Only drawn correctly after Tap

        // EDIT: Added to test Miguel's theory
        UIButton button3 = UIButton.FromType(UIButtonType.RoundedRect);
        button3.Frame = new RectangleF(20,160,100,50);
        button3.SetTitle("Button 3", UIControlState.Normal);
        AddSubview(button3); // Drawn Correctly
    }
}

public class MyButton : UIButton
{
    public MyButton() : base(UIButtonType.RoundedRect) { }
} 
```

*   我只是不确定如何在加载视图时强制正确绘制边框。
*   我不需要 type 的按钮`UIButtonType.Custom`，因为我不想自己设置按钮的样式。
*   当我调试时，MyButton 的类型正确设置为`UIButtonType.RoundedRect`.
*   MyButton (button2) 的 UIButton 基本属性与 UIButton 实例 (button1) 的属性相匹配。

![调试](../Images/dfb3e2fffd4faa9027f7338dee068364.png)

我该如何解决这个问题？

* * *

更新（2013 年 1 月 31 日）：Herman Schoenfeld 为这个 bug 提供了合适的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T05:52:42.040

这有效

```
public class MyButton : UIButton
{
    public MyButton() : base(UIButtonType.RoundedRect) { }

    public override RectangleF Frame {
        get {
            return base.Frame;
        }
        set {
            var temp = TranslatesAutoresizingMaskIntoConstraints;
            TranslatesAutoresizingMaskIntoConstraints = false;
            var constraints = new [] {
                NSLayoutConstraint.Create(this, NSLayoutAttribute.Width, NSLayoutRelation.Equal, null, NSLayoutAttribute.NoAttribute, 1.0f, value.Width),
                NSLayoutConstraint.Create(this, NSLayoutAttribute.Height, NSLayoutRelation.Equal, null, NSLayoutAttribute.NoAttribute, 1.0f, value.Height)
            };
            AddConstraints(constraints);
            SizeToFit();
            RemoveConstraints(constraints);
            base.Frame = value;
            TranslatesAutoresizingMaskIntoConstraints = temp;
        }
    }
} 
```

这只是一种解决方法，它似乎是一个错误。SizeToFit() 解决了这个问题，其他代码维护了框架。

# python - 如何使用 if_py 将部分命令发送到 vim（在 Ex 模式下）？

> ID：14081413
> 
> 赞同：1
> 
> 时间：2012-12-29T11:57:14.793
> 
> 标签：python, vim

我正在尝试在**Ctrl-f**上打开一个文件。如果在存在空缓冲区**“无”**的情况下键入命令，那么我希望在该缓冲区中打开文件，但如果没有空缓冲区，我想使用 **:tabnew**打开一个新缓冲区，然后打开文件中。为此，我有一个函数**OpenFile**被调用。

```
function! OpenFile()
python << EOF
import vim
import re
buffer = vim.current.buffer
name = str(buffer.name)
if re.match('None', name):
    vim.command(':e ')
else:
    vim.command(':tabnew')
    vim.command(':e ')
EOF
endfunction

"Open file
 :map <C-f> :call OpenFile()<CR> 
:imap <C-f> <Esc>:call OpenFile()<CR> 
```

vim.command 执行命令所以这相当于 :w!ENTER 我想要做的是设置命令的一部分.. :e FILENAME ENTER

所以我想通过 python 函数以 Ex 模式发送 :e 部分并让用户输入文件名并按 ENTER

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:13:48.263

首先，你为什么用 Python 写这个？当然，Vimscript 有点奇怪（但自从 Vim 7 变得很像 Python），无论如何你需要了解集成点，而这个任务几乎没有真正的逻辑。

这最容易通过映射表达式 ( `:help map-expression`) 解决：

```
:noremap <expr> <C-f> empty(bufname('')) ? ':edit ' : ':tabnew ' 
```

如果必须，将条件提取到函数中并在 Python 中编码，但我建议坚持使用 Vimscript，除非逻辑非常复杂或者您可以从某些库中受益。

# ruby - 将“puts”模拟到 Rspec 中的文件

> ID：14081414
> 
> 赞同：2
> 
> 时间：2012-12-29T11:57:16.383
> 
> 标签：ruby, rspec

我有一个带有以下方法的愚蠢的“队列类 [1]”，我想用 Rspec 来指定。我对测试写入文件系统是否有效（它有效，我的计算机有效）不感兴趣，而是对正确的数据是否被写掉感兴趣。

```
def write transaction
  File.open("messages/#{@next_id}", "w") {|f| f.puts transaction }
  @next_id += 1
end 
```

测试的规范是：

```
describe TransactionQueue do
  context "#write" do
    it "should write positive values" do
      open_file = mock File
      open_file.stub(:puts)

      File.any_instance.stub(:open).and_yield(open_file)
      File.any_instance.should_receive(:open)
      open_file.should_receive(:puts).with("+100")

      @queue = TransactionQueue.new
      @queue.write("+100")
    end
  end
end 
```

运行此程序失败，因为我的 Mocks 从未收到预期的“打开”和“放置”消息。

我可以这样嘲笑`File`吗？我使用`any_instance`正确吗？我尝试存根“块收益”是否正确？

如果可以避免，我宁愿不使用像 FakeFS 这样的额外 gem；这与其说是让它发挥作用；bu主要是关于实际了解正在发生的事情。因此，我试图避免额外的宝石/复杂层。

[1] 课程来自[The Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)；但这些测试与 Cucumber 本身无关。我在看书时不知何故破坏了代码；并想通过为本书未编写测试的部分编写单元测试来找出什么：辅助类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T12:17:23.183

`File`它不是您期望接收该`open`方法的类的“任何实例” ；它是`File`类本身：

```
 File.stub(:open).and_yield(open_file)
  File.should_receive(:open) 
```

此外，不要同时使用存根和期望。如果要验证`File.open`实际调用的是：

```
 File.should_receive(:open).and_yield(open_file) 
```

如果您只想存根`open`方法*以防*它被调用，但不想要求它作为`@queue.write`方法的行为：

```
 File.stub(:open).and_yield(open_file) 
```

（这是凭记忆，几个月没用RSpec了。）

# iphone - 从另一个 NSString 和密钥获取加密的 NSString

> ID：14081416
> 
> 赞同：-1
> 
> 时间：2012-12-29T11:57:17.883
> 
> 标签：iphone, objective-c, ios, encryption

如何使用字符串和密钥生成加密字符串？就像是...

```
NSString *key = @"password";
NSString *stringToBeEncrypted = @"This is important";
NSString *result = [Encryptor encryptedStringForKey:key string:stringToBeEncrypted]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:02:04.330

经常使用的一种是 AES256Encryption，它的实现方式如下：

```
NSString *stringToBeEncrypted = @"This is important";
NSString *key = @"password"; 

NSLog( @"Original String: %@", stringToBeEncrypted );

NSString *encryptedString = [stringToBeEncrypted AES256EncryptWithKey:key];

NSLog( @"Encrypted String: %@", encryptedString );

NSLog( @"Decrypted String: %@", [encryptedString AES256DecryptWithKey:key] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:12:54.960

编码有很多种，

这里有一个样本，

```
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
NSString *key = @"my password";
NSString *secret = @"text to encrypt";
NSData *plain = [secret dataUsingEncoding:NSUTF8StringEncoding];
NSData *cipher = [plain AES256EncryptWithKey:key];
plain = [cipher AES256DecryptWithKey:key];
[pool drain];

- (NSData*) encryptString:(NSString*)plaintext withKey:(NSString*)key {
    return [[plaintext dataUsingEncoding:NSUTF8StringEncoding] AES256EncryptWithKey:key];
}

- (NSString*) decryptData:(NSData*)ciphertext withKey:(NSString*)key {
    return [[[NSString alloc] initWithData:[ciphertext AES256DecryptWithKey:key]
                                  encoding:NSUTF8StringEncoding] autorelease];
} 
```

# arrays - 存储在单元格中的数据和在 MATLAB 中存储为双精度的数据有什么区别？

> ID：14081418
> 
> 赞同：1
> 
> 时间：2012-12-29T11:57:25.480
> 
> 标签：arrays, matlab, matrix, double, cell-array

我有两个对我来说看起来完全相同的变量，但一个是`<double>`，另一个是`<cell>`。在代码中，它们似乎是由`cell2mat`. 我知道这是一个数据存储的问题，但我只是看不到 and 的区别和`cell`定义`double`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T15:51:06.970

添加到 nrz 的答案中，值得注意的是，在存储单元数组时会有额外的内存开销。例如，考虑以下代码：

```
A = 1:5
B = {A}
C = num2cell(A)
whos 
```

产生以下输出：

```
A =
     1     2     3     4     5

B =    
    [1x5 double]

C = 
    [1]    [2]    [3]    [4]    [5]

  Name      Size            Bytes  Class     Attributes    
  A         1x5                40  double              
  B         1x1               152  cell                
  C         1x5               600  cell 
```

*   从第一行可以看出，double 的基本 1×5 向量`A`在内存中占用 40 个字节（每个 double 占用 8 个字节）。
*   第二行显示仅`A`使用单个单元格进行包装以产生`B`额外的 112 字节。这是 MATLAB 中单个单元的开销。
*   第三行确认，因为`C`包含 5 个单元格并占用 (112+8)×5 = 600 字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T12:48:24.747

数组和元胞数组可能是 MATLAB 中最常用的两种数据类型。

一维和二维数组是矩阵，就像数学中的线性代数一样。但是数组也可以是多维（n维）数组，也叫张量，MATLAB称它们为多维数组。此外，MATLAB 不区分标量和数组，也不区分向量和其他矩阵。标量只是 MATLAB 中的 1x1 数组，向量是 MATLAB 中的 Nx1 和 1xN 数组。

一些例子：

```
MyScalar = 1;
MyHorizVector = [ 1 2 3 ];
MyVertVector = [ 1 2 3 ]';
MyMatrix = [ 1, 2; 3, 4 ];
My4Darray = cat(4, [ 1 2; 3 4], [ 5 6; 7 8 ], [ 9 10; 11 12 ], [ 13 14; 15 16 ]);

class(MyScalar)
ans =
    double

class(MyHorizVector)
ans =
    double

class(MyVertVector)
ans =
    double

class(MyMatrix)
ans =
    double

class(My4Darray)
ans =
    double 
```

因此，所有这 5 个不同数组的类是`double`，正如`class`命令所报告的那样。`double`表示使用的数值精度（双精度）。

元胞数组是一个更抽象的概念。一个元胞数组可以包含一个或多个数组，也可以包含其他类型的非数组变量。单元阵列还可以容纳其他单元阵列，这些单元阵列可以再次容纳单元阵列可以容纳的任何内容。因此，元胞数组也可以递归地存储在另一个数组中。

元胞数组可用于将不同的对象组合成单个变量，例如。被传递给函数或用`cellfun`. 每个单元阵列由 1 个或多个单元组成。任何数组都可以使用`{` `}`运算符转换为元胞数组，结果是一个 1x1 元胞数组。还有可用`mat2cell`的`num2cell`命令。

```
MyCellArrayContainingMyScalar = { MyScalar };
MyCellArrayContainingMyHorizVector = { MyHorizVector };
MyCellArrayContainingMyCellArrayContainingMyScalar = { MyCellArrayContainingMyScalar }; 
```

上面创建的所有元胞数组都是 1x1 元胞数组。

```
class(MyCellArrayContainingMyScalar)
ans =
    cell

class(MyCellArrayContainingMyHorizVector)
ans =
    cell

class(MyCellArrayContainingMyCellArrayContainingMyScalar)
ans =
    cell 
```

但并非所有元胞数组都可以使用 转换为矩阵`cell2mat`，因为单个元胞数组可以包含多个不同的数据类型，这些数据类型不能存在于同一个数组中。

这些确实有效：

```
cell2mat(MyCellArrayContainingMyScalar)
ans =
    1

cell2mat(MyCellArrayContainingMyHorizVector)
ans =
    1     2     3 
```

但这失败了：

```
cell2mat(MyCellArrayContainingMyCellArrayContainingMyScalar);

Error using cell2mat (line 53)
Cannot support cell arrays containing cell arrays or objects. 
```

但是让我们尝试另一种由不同数组组成的元胞数组：

```
 MyCellArray{1} = [ 1 2 3 ];
 MyCellArray{2} = 'This is the 2nd cell of MyCellArray!';

class(MyCellArray)
ans =
    cell 
```

此元胞数组也不能使用以下方法转换为数组`cell2mat`：

```
cell2mat(MyCellArray)

Error using cell2mat (line 46)
All contents of the input cell array must be of the same data type. 
```

希望这有助于得到一个想法。

# javascript - 在 javascript 文件中播放框架 2 - i18n

> ID：14081421
> 
> 赞同：3
> 
> 时间：2012-12-29T11:58:12.990
> 
> 标签：javascript, scala, internationalization, playframework-2.0

我正在使用 Scala Play Framework 2。我想要多语言 javascript 文件，并且可以将其放入`Messages("title.items")`javascript 文件中是完美的。

为此，我认为我们应该创建一个注入 Lang 对象的新 Asset 控制器。有没有更好的办法？我在哪里可以找到一些资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T13:41:47.707

您可以将[JsMessages](https://github.com/julienrf/play-jsmessages)插件用于 Play2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T21:52:29.953

我是这样用的。

`ApplicationController.scala`.

```
class ApplicationController @Inject() (
  val messagesApi: MessagesApi
) extends Controller with I18nSupport {

  def messages(): EssentialAction = {
    Ok("window.messagesApi=".concat(Json.toJson(messagesApi.messages("en")).toString).concat(";")).as(JAVASCRIPT)
  }
} 
```

`routes`

```
GET /messages.js controllers.ApplicationController.messages() 
```

# android - 没有出现带有 Open-GL 的三角形？

> ID：14081422
> 
> 赞同：1
> 
> 时间：2012-12-29T11:58:23.080
> 
> 标签：android, opengl-es

我做了一个活动来显示一个三角形，但在运行时它没有显示三角形；我不知道错误在哪里，但每次肯定都有一个随机的彩色背景，而且我没有任何`force closes`或一些`errors`

## 三角obj.class：

```
package com.exmple.open_gl;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.util.Random;

import javax.microedition.khronos.opengles.GL10;

public class Triangleobj {
// -------------------------
FloatBuffer VBuff, CBuff;
ByteBuffer Ibuff;
private Random r = new Random();
private float[] vertices = { -1.0f, -1.0f, 1.0f, -1.0f, 0f, 1.0f },
        color = { r.nextFloat(), r.nextFloat(), r.nextFloat(),
                r.nextFloat(), r.nextFloat(), r.nextFloat(), r.nextFloat(),
                r.nextFloat(), r.nextFloat(), r.nextFloat(), r.nextFloat(),
                r.nextFloat(), };
private byte[] indices = { 0, 1, 2 };

// -------------------------
public Triangleobj() {
    // ----------------------------------------------------------
    ByteBuffer bb = ByteBuffer.allocateDirect(vertices.length * 4);
    bb.order(ByteOrder.nativeOrder());
    VBuff = bb.asFloatBuffer();
    VBuff.put(vertices);
    VBuff.position(0);

    // ----------------------------------------------------------
    Ibuff = ByteBuffer.allocateDirect(indices.length);
    Ibuff.order(ByteOrder.nativeOrder());
    Ibuff.put(indices);
    Ibuff.position(0);

    // ----------------------------------------------------------
    bb = ByteBuffer.allocateDirect(color.length * 4);
    bb.order(ByteOrder.nativeOrder());
    CBuff = bb.asFloatBuffer();
    CBuff.put(color);
    CBuff.position(0);

    // ----------------------------------------------------------
}

public void draw(GL10 gl) {
    gl.glFrontFace(GL10.GL_CCW);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, VBuff);
    gl.glColorPointer(4, GL10.GL_BYTE, 0, CBuff);
    gl.glDrawElements(GL10.GL_TRIANGLES, indices.length,
            GL10.GL_UNSIGNED_BYTE, Ibuff);
    gl.glDisableClientState(GL10.GL_COLOR_ARRAY);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);

}} 
```

## 三角形渲染器类：

```
package com.exmple.open_gl;

import java.util.Random;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLSurfaceView.Renderer;
import android.opengl.GLU;
import android.os.SystemClock;

public class triangleRenderer implements Renderer {
Triangleobj t;

public triangleRenderer() {
    t = new Triangleobj();
}

@Override
public void onDrawFrame(GL10 gl) {

    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    t.draw(gl);
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glOrthof(0f, 1.0f, 0f, 1.0f, -1.0f, 1.0f);

}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    gl.glDisable(GL10.GL_DITHER);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
    Random r = new Random();
    gl.glClearColor(r.nextFloat(), r.nextFloat(), r.nextFloat(),
            r.nextFloat());
    gl.glClearDepthf(1.0f);

}

} 
```

## 三角类：

```
package com.exmple.open_gl;

import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.app.Activity;

public class Triangle extends Activity {
private GLSurfaceView gls;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    gls = new GLSurfaceView(this);
    gls.setRenderer(new triangleRenderer());
    setContentView(gls);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    gls.onPause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    gls.onResume();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T16:15:26.250

我使用您的代码编写了自己的 opengl 应用程序，该应用程序在背景前显示了一个带有随机颜色的彩色三角形。我发现设置颜色缓冲区存在问题。因此，我没有使用颜色缓冲区，而是在我的三角形绘制函数中使用以下代码行来设置三角形的颜色。您也可以这样做，因为它会阻止绘制三角形。

```
gl.glColor4f(0.3f, 0.3f, 0.3f, 1.0f); 
```

我还编写了自己的顶点和索引数组，因为我不了解您的顶点、颜色和索引数组。

```
private float[] vertices = { 0.0f, 0.5f, 0.0f,
                            -0.5f, -0.5f, 0.0f,
                            0.5f, -0.5f, -1.0f };
private byte[] indices = { 0, 1, 2 }; 
```

以下代码示例显示了我的完整代码。

**三角对象.java**

```
public class TriangleObject {

private FloatBuffer vertexBuffer;
private ByteBuffer indexBuffer;

private float[] vertices = { 0.0f, 0.5f, 0.0f,
                            -0.5f, -0.5f, 0.0f,
                            0.5f, -0.5f, -1.0f };

private byte[] indices = { 0, 1, 2 };

public TriangleObject() {

    ByteBuffer byteBuf = ByteBuffer.allocateDirect(vertices.length * 4);
    byteBuf.order(ByteOrder.nativeOrder());
    vertexBuffer = byteBuf.asFloatBuffer();
    vertexBuffer.put(vertices);
    vertexBuffer.position(0);

    indexBuffer = ByteBuffer.allocateDirect(indices.length);
    indexBuffer.put(indices);
    indexBuffer.position(0);

}

public void draw(GL10 gl) {
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glFrontFace(GL10.GL_CCW);
    gl.glColor4f(0.3f, 0.3f, 0.3f, 1.0f);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glDrawElements(GL10.GL_TRIANGLES, indices.length, GL10.GL_UNSIGNED_BYTE, indexBuffer);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
}   
} 
```

**三角渲染器.java**

```
public class TriangleRenderer implements Renderer {

TriangleObject t;

public TriangleRenderer() {
    t = new TriangleObject();
}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    gl.glDisable(GL10.GL_DITHER);
    Random r = new Random();
    gl.glClearColor(r.nextFloat(), r.nextFloat(), r.nextFloat(), r.nextFloat());
    gl.glClearDepthf(1.0f);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
}

@Override
public void onDrawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glLoadIdentity();
    t.draw(gl);
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
}
} 
```

**三角活动.java**

```
public class TriangleActivity extends Activity {

private GLSurfaceView glSurface;
private TriangleRenderer glRenderer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    glSurface = new GLSurfaceView(this);
    glRenderer = new TriangleRenderer();
    glSurface.setRenderer(glRenderer);
    setContentView(glSurface);
    glSurface.requestFocus();
    glSurface.setFocusableInTouchMode(true);
}

@Override
protected void onPause() {
    super.onPause();
    glSurface.onPause();
}

@Override
protected void onResume() {
    super.onResume();
    glSurface.onResume();
}
} 
```

**编辑：**

我继续弄清楚为什么颜色缓冲区不起作用。每个顶点需要一个由四个浮点值 (rgba) 组成的颜色。因此，我添加了以下颜色数组。

```
private float[] colors = { 0.0f, 1.0f, 0.0f, 1.0f,
        1.0f, 0.0f, 0.0f, 1.0f,
        0.0f, 1.0f, 0.0f, 1.0f,
        0.0f, 0.0f, 1.0f, 1.0f,
        0.1f, 0.0f, 0.0f, 1.0f,
        0.1f, 0.0f, 0.0f, 1.0f,
        0.1f, 0.0f, 0.0f, 1.0f,
        0.1f, 0.0f, 0.0f, 1.0f,
        0.1f, 0.0f, 0.0f, 1.0f}; 
```

和

```
byteBuf = ByteBuffer.allocateDirect(colors.length * 4);
byteBuf.order(ByteOrder.nativeOrder());
colorBuffer = byteBuf.asFloatBuffer();
colorBuffer.put(colors);
colorBuffer.position(0); 
```

和

```
...
gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
...
gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer);
...
gl.glDisableClientState(GL10.GL_COLOR_ARRAY); 
```

整个颜色缓冲区都在工作。

# c# - HierarchicalDataTemplate 不适用于 UserControls

> ID：14081424
> 
> 赞同：2
> 
> 时间：2012-12-29T11:58:24.243
> 
> 标签：c#, wpf, user-controls, treeview, hierarchicaldatatemplate

我有一个类`MyClass`，它继承自`UserControl`：

```
public class MyClass : UserControl
{
    public string NodeName { get; set; }
    public ObservableCollection<MyClass> Children { get; set; }
    //...
} 
```

我有 HierarchicalDataTemplate ：

```
<HierarchicalDataTemplate DataType="{x:Type sp:MyClass}"
                          ItemsSource="{Binding Path=Children}">
    <TextBlock Text="{Binding Path=NodeName}" />
</HierarchicalDataTemplate> 
```

在这种情况下，`TreeView`仅显示像控件一样的顶级 MyClass，但不像绑定到 NodeName 及其子级的 TextBlock。这是为什么？

如果我不继承`MyClass`一切`UserControl`都很好。

```
 public class MyClass
 { 
     public string NodeName { get; set; }
     public ObservableCollection<MyClass> Children { get; set; }
 } 
```

那么在第一种情况下我该如何修复它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:09:30.653

你不应该使用控件作为你的 DataContext。相反，您应该将数据与视图分开，这意味着您将拥有两个类：

1.  一个 UserControl，它具有一个`TreeView`并且还定义了分层数据模板。
2.  一个数据类`MyDataClass`，它包含应该用于显示树的数据。

然后，只需将 设置`TreeView.ItemsSource`为根`MyClass`对象。

```
public class MyTreeUserControl : UserControl
{
} 
```

```
<HierarchicalDataTemplate DataType="{x:Type sp:MyDataClass}"
                          ItemsSource="{Binding Path=Children}">
    <TextBlock Text="{Binding Path=NodeName}" />
</HierarchicalDataTemplate> 
```

```
public class MyDataClass
{ 
    public string NodeName { get; set; }
    public ObservableCollection<MyDataClass> Children { get; set; }
} 
```

# javascript - jQuery，数据表转换单元格

> ID：14081431
> 
> 赞同：1
> 
> 时间：2012-12-29T11:58:56.310
> 
> 标签：javascript, jquery, datatables

我使用 jquery (www.datatables.net) 的 DataTables 插件。如何转换像

```
name www
n1   w1
n2   w2
n3   w3
name www 
```

变成

```
name www
n1   <a href="w1">w1</a>
n2   <a href="w2">w2</a>
n3   <a href="w3">w3</a>
name www 
```

在 jquery 中安装代码在这里：

```
$(document).ready(function() {
   $('#example').dataTable();
   $('#example').convertCell(setCell("<a href="getCell()">getCell()</a>"));//How to put it better?
}); 
```

和 html 代码是

```
<div id="dynamic">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th width="15%">Name</th>
            <th width="15%">Www</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
</div> 
```

问候：数据表初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:20:12.153

我不确定插件，但你可以使用：

```
$('.example').each(function(){
    $(this).wrap(function() {
        return '<a href="' + $(this).text() + '" />';
    });
}); 
```

将每个元素与类包装`.example`在指向每个元素的文本的链接中。

# php - PHP fileupload：如果名称相同，则保留两个文件

> ID：14081432
> 
> 赞同：3
> 
> 时间：2012-12-29T11:58:57.357
> 
> 标签：php, file-upload, file-rename

如果文件名已经存在，PHP中是否有任何漂亮的解决方案允许我使用自动递增数字扩展文件名？我不想用一些不可读的东西重命名上传的文件。所以我认为这样会很好：（允许所有图像文件。）

```
Cover.png
Cover (1).png
Cover (2).png
… 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T12:20:59.953

首先，让我们分开扩展名和文件名：

```
$file=pathinfo(<your file>); 
```

为了更轻松地检查和附加文件，请将文件名保存到新变量中：

```
$filename=$file['filename']; 
```

然后，让我们检查文件是否已经存在并保存新的文件名，直到它不存在：

```
$i=1;
while(file_exists($filename.".".$file['extension'])){
 $filename=$file['filename']." ($i)";
 $i++;
} 
```

给你，你有一个`<append something>`不存在的原始文件。

**编辑：** 添加了自动增量编号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:17:14.507

知道了：

```
if (preg_match('/(^.*?)+(?:\((\d+)\))?(\.(?:\w){0,3}$)/si', $FILE_NAME, $regs)) {
        $filename = $regs[1];
        $copies = (int)$regs[2];
        $fileext = $regs[3];

        $fullfile = $FILE_DIRECTORY.$FILE_NAME;
        while(file_exists($fullfile) && !is_dir($fullfile))
        {
                $copies = $copies+1;
                $FILE_NAME = $filename."(".$copies.")".$fileext;
                $fullfile = $FILE_DIRECTORY.$FILE_NAME;
        }
}
return $FILE_NAME; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-27T18:08:21.487

您可以使用下面的此功能来获取上传的唯一名称

```
function get_unique_file_name($path, $filename) {
    $file_parts = explode(".", $filename);
    $ext = array_pop($file_parts);
    $name = implode(".", $file_parts);

    $i = 1;
    while (file_exists($path . $filename)) {
        $filename = $name . '-' . ($i++) . '.' . $ext;
    }
    return $filename;
} 
```

将该功能用作

```
$path = __DIR__ . '/tmp/';
$fileInput = 'userfile';

$filename = $path . 
    get_unique_file_name($path, basename($_FILES[$fileInput]['name']));

if (move_uploaded_file($_FILES[$fileInput]['tmp_name'], $filename)) {
    return $filename;
} 
```

[您可以在 github 页面](https://github.com/tofeeq/utils-php/blob/master/upload.php)获取工作脚本

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-29T12:08:50.073

使用`file_exists()`函数和`rename()`函数来实现你想要做的事情！

# codeigniter - 如何从 CodeIgniter 控制器关闭颜色框

> ID：14081433
> 
> 赞同：0
> 
> 时间：2012-12-29T11:59:02.553
> 
> 标签：codeigniter

我想从控制器关闭 Colorbox。我使用了这段代码，但它不起作用：

```
<?= "$(document).ready(function() { $.colorbox.close(); });"; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T15:53:23.763

对我来说，它们有两种选择：

a）（简单）在您的控制器内部打印 js ，例如： `echo "<script type='text/javascript'> parent.$.fn.colorbox.close(); </script>";`

但是如果你在重定向之后使用redirect("yoursite"); codeigniter 将显示 error ，另一个选项是：

b）您需要在视图中创建一个简单的 .php 文件，例如 close_colorbox.php ，在里面写下这段代码： `if (isset($script)) { echo $script; }`

在您的控制器中包含下一个代码之后：

```
$data['script'] = " <script type='text/javascript'> window.top.location.reload(); parent.$.fn.colorbox.close(); </script> ";

$this->load->vars($data);

$this->load->view('close_colorbox'); 
```

*注意：window.top.location.reload(); 如果要重新加载父内容，则为可选

# java - 服务器端 - 进度条

> ID：14081435
> 
> 赞同：5
> 
> 时间：2012-12-29T11:59:26.477
> 
> 标签：java, javascript, jquery, ajax, struts2

我目前正在开发一个文件转换程序，一旦文件被上传，它会将文件转换为不同的文件格式（ppt，pdf），这通常需要很长时间，具体取决于文件大小。由于文件转换发生在后端，我希望用户看到文件转换的进度（类似于进度条，例如“52% 文件正在转换”）无论如何我可以向用户显示当前的进度文件转换（发生在后端）？在文件转换期间，我只能显示状态（以数字（由我正在使用的 API 提供））

我不知道从哪里开始有人可以提供一些见解或方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T13:24:08.643

如果您使用的是 Struts2，请查看[`Execute and Wait Interceptor`](http://struts.apache.org/2.x/docs/execute-and-wait-interceptor.html). 它使用您的任务创建新线程，该线程将在后台执行，同时您可以向用户显示一些进度。

在`struts.xml`文件中将`execAndWait`拦截器添加到您的长时间运行的操作并定义两个结果`wait`和`success`.

```
<action name="longRunningAction" class="...">
  <interceptor-ref name="defaultStack"/>
  <interceptor-ref name="execAndWait"/>
  <result name="wait">longRunningAction-wait.jsp</result>
  <result name="success">longRunningAction-success.jsp</result>
</action> 
```

您仍然需要通过 AJAX 或简单的页面刷新在您的 JSP 中轮询此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:32:45.767

你在说：`During file conversion I am only able to show the status(in numbers(provided by the API I am using))`

这个数字是多少？是转换多少文件的百分比？如果是，那么您只需要导入`jQuery UI`库并添加`.progressbar()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T08:47:04.117

简单的解决方案：使用 Struts2-Jquery 标签

并使用 gif 图像在您的提交标签上定义指示器

例如。

```
 `<form action="...">
     <s:file ..../>
     <sj:submit indicator="imgId"> 
 </form>

 <img id="imgId" src="images/indicator.gif" alt="Loading..."     
  style="display:none"/>
     ` 
```

# r - 计算共享出现次数并删除重复项

> ID：14081439
> 
> 赞同：1
> 
> 时间：2012-12-29T11:59:57.480
> 
> 标签：r, plyr

我有这个 `data.frame`：

```
df <- read.table(text= "   section to from    time
                             a     1  5        9       
                             a     2  5        9        
                             a     1  5        10       
                             a     2  6        10       
                             a     2  7        11       
                             a     2  7        12       
                             a     3  7        12       
                             a     4  7        12
                             a     4  6        13  ", header = TRUE) 
```

每行标识一个 id 在某个时间点`to`和`from`在某个时间点同时出现`time`。基本上是一个时间明确的 id 网络`to`和`from`.

我想知道哪些id 在特定时间范围内`to`共享一个id，即. 在其他情况下，我想知道 ids 1 和 2 是否在两天内都去咖啡店。，即`from``2``to``5`

id`1`和`2`in `to`shared id分别在`5`9和 10 ，因此将 在时间窗口 2 内共享事件。如果他们还在时间点 13 共享 id，例如`from``time``1``from`

```
 a     1  5        9       
                             a     2  5        9        
                             a     1  7        13       
                             a     2  7        13 
```

然后`1`会`2`得到一个`2`

所以我想要的最终输出`df`是：

```
 section to.a to.b    noShared
                             a     1    2        1       
                             a     2    3        1        
                             a     2    4        1       
                             a     3    4        1 
```

我可以通过以下方式获得一些方法：

```
library(plyr)                            
library(tnet)

a <- ddply(df, .(section,to,time), function(x)  
          data.frame(from = unique(x$from)) )

b <- ddply(a, .(section,time), function(x) {

            b <- as.tnet(x[, c("to","from")], type="binary two-mode tnet")
            b <- projecting_tm(b, method="sum")
            return(b)

       }) 
```

这让我知道每个点内`to`共享 ID 中的哪些 ID。`from``time`

但是，有两个主要问题`b`。

**首先**在每个时间点内，这对`ids`在两个方向上出现两次，即

```
 1  2  5  9 # id 1 and 2 went to coffee shop 5  at time 9
 2  1  5  9 # id 2  and 1 went to coffee shop 5 at time 9

 I only want each sombination to appear once: 

  1  2  5  # id 1 and 2 went to coffee shop 5  at time 9</strike> 
```

~~**其次**，我需要在时间窗口内对结果进行分类，以便我的最终结果没有时间只是共享事件的数量，即~~

* * *

**编辑**

时间问题的问题比预期的要多。对于这个问题，第一个问题就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:16:55.320

对于 b 的生成（问题的第一部分）

我更改`projecteing_tm`了网络转换的代码。

```
b <- ddply(a, .(section,time), function(x) {
  ## first I create the origin network
  net2 <- x[, c("to","from")]
  colnames(net2) <- c('i','p')
  net2 <- net2[order(net2[, "i"], net2[, "p"]), ]
  np <- table(net2[, "p"])
  net2 <- merge(net2, cbind(p = as.numeric(rownames(np)),np = np))
  ## trasnformed network
  net1 <- merge(net2, cbind(j = net2[, "i"], p = net2[, "p"]))
  net1 <- net1[net1[, "i"] != net1[, "j"], c("i", "j","np")]
  net1 <- net1[order(net1[, "i"], net1[, "j"]), ]
  index <- !duplicated(net1[, c("i", "j")])
  net1 <- cbind(net1[index, c("i", "j")])
  net1
}) 
```

所以在这里你得到你的 b 没有任何警告

```
> b
  section time i j
1       a    9 1 2
2       a    9 2 1
3       a   12 2 3
4       a   12 2 4
5       a   12 3 2
6       a   12 3 4
7       a   12 4 2
8       a   12 4 3 
```

对于问题的第二部分，您要从 b 中删除重复项吗？

```
b[!duplicated(t(apply(b[3:4], 1, sort))), ]
  section time i j
1       a    9 1 2
3       a   12 2 3
4       a   12 2 4
6       a   12 3 4 
```

对于这一部分，我在这里使用这个[问题](https://stackoverflow.com/questions/14078507/remove-duplicated-2-columns-permutations)的答案。

# mysql - 一张表的数据库选择查询逻辑

> ID：14081440
> 
> 赞同：2
> 
> 时间：2012-12-29T12:00:02.090
> 
> 标签：mysql, sql, database, select

我有一张像下面这样有价值的桌子预订

```
id           email 
1           a@a.com
2           a@a.com 
3           b@b.com
4           c@c.com
5\.          c@c.com 
```

我想要这样的输出

```
email       id
a@a.com     1,2
b@b.com     3
c@c.com     4,5 
```

你能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:00:39.210

在`MysQL`, 使用`GROUP_CONCAT`函数

```
SELECT email, GROUP_CONCAT(id) id
FROM tableName
GROUP BY email 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/5bda6/3)

# html - div中的Jquery滚动会影响页面

> ID：14081443
> 
> 赞同：0
> 
> 时间：2012-12-29T12:00:24.140
> 
> 标签：html, scroll

大家好，我有一个页面，对于样式问题，我必须有一个 div：

```
overflow:scroll 
```

但是进入 div 的滚动条非常难看，所以我把它隐藏了，但现在用户无法理解他是否到达了页面底部。

如何添加滚动条来替换浏览器的默认滚动条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:15:28.313

您可以使用多种 javascript 解决方案之一：

见[http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

基本上，由于跨浏览器的不一致和缺乏 w3c 标准（不同的浏览器可能支持也可能不支持），尝试设置浏览器原生滚动条的样式是不明智的

通过使用 javascript 解决方案（在没有 javascript 的情况下降级回默认滚动条），您可以应用任何块级元素并完全按照您的需要设置样式。

# php - 如何在 Ubuntu 中使用 Pthreads PHP 扩展

> ID：14081444
> 
> 赞同：5
> 
> 时间：2012-12-29T12:00:33.223
> 
> 标签：php, ubuntu, pthreads

[我对Pthreads PHP 扩展](https://github.com/krakjoe/pthreads)有疑问。我已经编译了启用 ZTS ( `--enable-maintainer-zts`) 的 PHP，并通过 pecl 安装了 pthread，还尝试手动编译扩展。

看来我真的不知道如何使用它。我以为我可以像使用任何其他内置类一样在 PHP 中使用 Thread 类，但没有运气，因为 PHP 无法识别它。POSIX 函数似乎可以工作。

我正在使用带有 mod_php 5.4.6 的 Ubuntu 12.10 服务器 64 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T01:24:25.677

如果您无法访问扩展类，则不会加载它。

我认为您打开了一个错误报告，我回复说您的配置行格式错误。

您要使用的配置行是：

```
./configure --enable-pthreads --enable-maintainer-zts 
```

上面的命令会将 pthreads 构建为 DSO。

```
./configure --enable-pthreads=static --enable-maintainer-zts 
```

上述命令会将 pthread 静态构建到 PHP 中。

两者都受到 5.3、5.4 甚至 5.5 的同等支持。

此外，如果您要覆盖系统安装，那么您应该使用特定`--prefix`的，例如，如果您的 php 可执行文件位于`/usr/bin`（您可以使用“which php”确定），那么`--prefix=/usr`将覆盖您的系统安装。

清理您的旧安装（如果源仍然可用，请进行卸载）。重新开始，确保您要么覆盖系统安装，要么完全隔离这个安装。

解决后请更新错误报告。

# objective-c - 在 iphone 的 uitablview 单元格上创建标签？

> ID：14081446
> 
> 赞同：3
> 
> 时间：2012-12-29T12:00:38.713
> 
> 标签：objective-c, ios, json

我是 iPhone devlopemnt 的新手，我正在开发一个应用程序。在该应用程序中，我需要在`UITableView`. 为了解决这个问题，我遵循一些概念，例如动态创建标签`UITableViewCell`以显示商品及其价格。

在应用程序中，第一个`indexid == 1`意味着我在单击列表上的特定单元格时显示列表位置，我正在获取最喜欢的项目列表，其价格意味着 indexid = 2 ...单击后退按钮 indexid = 1 然后我需要隐藏该标签.. .但标签没有隐藏它显示标价而不是项目列表

```
lblText.text = nil;
btnBack.hidden = FALSE;
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{     
     cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
     cell.textLabel.font = [UIFont boldSystemFontOfSize:14.0];
     cell.textLabel.highlightedTextColor = [UIColor orangeColor];

}

    /////////////////////   Cell Title    /////////////////////
    if (indexId == 1) 
    {
//        NSLog(@"%@",lblText1);
       cell.textLabel.text = [NSString stringWithFormat:@"%@", [test.arrTitle objectAtIndex:indexPath.row]];
        lblText = [[UILabel alloc] initWithFrame:CGRectMake(250, 7, 40, 30)]; // For right alignment
        lblText.text = [test.arrId objectAtIndex:indexPath.row];
        [lblText setTextAlignment:UITextAlignmentCenter];
        lblText.textColor = [UIColor redColor];
        lblText.backgroundColor = [UIColor clearColor];
        [cell addSubview:lblText];

       cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"products-category-bg.png"]];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        [lblText release];

    }
    else
    {
        lblText.hidden = YES;
        cell.textLabel.text = [NSString stringWithFormat:@"  %@", [test.arrTitle objectAtIndex:indexPath.row]];        

            cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"product-bg-hover.png"]];
    }       
    return cell;
} 
```

我有以下问题。标签创建正常，但单击后退按钮后，我在主表视图中获得标签值。

如何释放带有数据的标签对象？

感谢和问候

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:49:48.970

如果您对应用程序中的不同状态使用相同的表视图实例，那么您也将重复使用之前创建的单元格：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

对于每个单元格，当`indexid == 1`您也这样做时：

```
[cell addSubview:lblText]; 
```

对我来说，这表示您创建的每个单元格（并且将被重复使用）都有一个`UILabel`添加为子视图。要真正重用该单元格，您需要`UILabel`在逻辑表明您需要再次添加它之前将其删除。这不仅会在您不需要时删除单元格，还会阻止您在运行时向单元格添加额外的 UILabel 实例。在检查之前尝试添加下面的代码`indexid`

```
if (cell == nil)
{     
     cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
     cell.textLabel.font = [UIFont boldSystemFontOfSize:14.0];
     cell.textLabel.highlightedTextColor = [UIColor orangeColor];
}

// Be sure to remove the UILabels on the re-used cell.
for(UIView *view in cell.subviews)
    if ([view isKindOfClass:([UILabel class])])
        [view removeFromSuperview];

if (indexid == 1) { .... 
```

这将在每次创建单元格时删除 UILabel，允许您有条件地将其重新添加为子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:59:36.920

尝试为您的标签设置标签（将帮助您将数据设置为标签，您可以通过调用获取标签

> [单元格viewWithTag：`theLabelTag`]

其中`theLabelTag`标签可以是索引）并将标签值设置为

```
tableView: willDisplayCell: forRowAtIndexPath: 
```

代替

> 表视图：cellForRowAtIndexPath：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:05:42.147

您的代码对我来说看起来不错，只需将上面代码中的一行替换为下面写的链接

```
[cell.contentView addSubview:lblText]; 
```

反而

```
[cell addSubview:lblText]; 
```

希望它能解决您的问题。

# ajax - codeigniter中的Ajax分页错误

> ID：14081447
> 
> 赞同：1
> 
> 时间：2012-12-29T12:01:03.470
> 
> 标签：ajax, codeigniter, jquery, pagination

我有以下代码，我从教程中修改了

但问题是，我无法在我的视图页面中正确显示结果..

如果我在控制器中显示数组，那么它可以正常工作，但在视图中，它会抛出错误..

```
<?php
class test extends CI_Controller {

    public function index($start = 0) {
            $this->load->model('pages_model');
            $data_page=$this->pages_model->get_pages();

    $this->load->helper('url');
    $this->load->library('pagination');

    $config['base_url']   = base_url().'test/index';
    $config['total_rows'] = count($data_page);
    $config['per_page']   = 5;

    $data['user'] = array();

    for($i=$start; $i<$start+$config['per_page']; $i++) 
    {
      if (isset($data_page[$i])) {
        $data['user'] = $data_page[$i];

      }
    }
    //print_r($data['user']['page_id']); // this line displays 3, since the tupple with id 3 has maximum priority 5

    $this->pagination->initialize($config);
    $data['pagination'] = $this->pagination->create_links();

    if ($this->input->post('ajax')) {
      $this->load->view('test', $data);
    } else {
      $this->load->view('test', $data);
    }
  }

}

?> 
```

现在是模型

```
<?php
class pages_model extends CI_Model{
    function __construct() {
        parent::__construct();
    }
function get_pages()
    {
        return $this->db->query("SELECT * FROM td_pages ORDER BY page_priority ASC")->result_array();
    }
}
?> 
```

最后是视图

```
<!DOCTYPE html>
<html>
<header>
  <title>CodeIgniter Ajax Jquery Pagination</title>
  <script src="<?php echo base_url(); ?>assets/front_assets/js/jquery-1.7.1.min.js"></script>
  <script>
  $(function() {
    applyPagination();

    function applyPagination() {
      $("#ajax_paging a").click(function() {
        var url = $(this).attr("href");
        $.ajax({
          type: "POST",
          data: "ajax=1",
          url: url,
          beforeSend: function() {
            $("#content").html("");
          },
          success: function(msg) {
            $("#content").html(msg);
            applyPagination();
          }
        });
        return false;
      });
    }
  });
  </script>
</header>
<body>

<div id="content">
  <div id="data">
    <?php foreach($page_frag as $ut)
    {?>
        <div><?php echo $ut['page_slug'];?></div>
    <?php } ?>
  </data>

  <div id="ajax_paging">
    <?php echo $pagination; ?>
  </div>
</div>
</div>
</body>
</html> 
```

问题是视图以错误的方式显示结果，但如果我在控制器中显示，那么它表明控制器中的数组工作正常......

请帮我解决问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:09:30.983

您正在 ajax 请求中加载整个视图，其中还包含正文和头部文本，创建一个包含以下内容的单独视图并将其加载到您的 ajax 请求中。

```
<div id="data">
    <?php foreach($page_frag as $ut)
    {?>
        <div><?php echo $ut['page_slug'];?></div>
    <?php } ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:26:57.553

你在做什么是错误的

分页意味着不仅从客户端卸载服务器的处理能力/内存。

您正在提取所有结果，然后对它们进行分页，同时您应该要求 MySQL 为您分页并有第二个查询来为您提供使用它的结果数量。

如果您的链接中有 index.php，那么您必须使用 site_url() 而不是 base_url() ＆请注意，两者都接受一个参数，因此您不需要像这样连接它：

```
site_url('test/index'); 
```

codeigniter 使用 GET 方法，而在您的 javascript 代码中，您使用的是 POST。

一种更简单的方法是捕获分页 li > a 分页标签并在容器内处理它。

# python - 如何在通过 Ctrl-v 选择的一堆行上调用一个函数？

> ID：14081450
> 
> 赞同：2
> 
> 时间：2012-12-29T12:01:19.957
> 
> 标签：python, vim

我正在通过 Ctrl-v（可视模式）选择一些文本。然后我输入 \s 来对齐这些行并像这样对它们进行排序：

```
"Strip trailing space
 :map <Leader>S :1,$ s/\s\+$//g<CR>
:imap <Leader>S :1,$ s/\s\+$//g<CR> 
```

如何将所有选定的行传递给 Sort()。我认为 **vim.current.range**对象可能会这样做，但没有成功。目前，Sort() 函数通过 cr[0] 一次读取 1 行文本。我需要做的是将分割线存储在矩阵中，计算所需的长度/列并将它们打印到缓冲区中。

```
function! Sort()
python << EOF
import vim
cr = vim.current.range
line = cr[0]
line = line.split()
fmt_str = ['%8s' for word in line]
fmt_str = ' '.join(fmt_str)

line = tuple([word for word in line])
print(fmt_str)
cr[0]= fmt_str % line
EOF
endfunction

"Sort and align
:map <Leader>s :call Sort()<CR> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:27:13.947

当您希望映射在视觉选择上起作用时，您需要使用`:vnoremap`. 一个 Ex 命令（如`:call`）将自动在`'<,'>`前面加上可视范围。然后将每行调用一次普通函数，但您可以定义一种特殊类型的函数 (cp. `:help function-range-example`) 来处理范围本身。

由于您似乎想使用 Python，我只需删除前置范围并通过和标记`<C-u>`访问选择的边界，然后通过以下方式访问和修改行：`<``>``vim.current.buffer[lnum]`

```
:vnoremap <Leader>s :<C-u>call Sort()<CR>
function! Sort()
    ...
    start = vim.current.buffer.mark('<')[0]
    end = vim.current.buffer.mark('>')[0] 
```

# php - PHP避免魔术方法中的递归

> ID：14081457
> 
> 赞同：1
> 
> 时间：2012-12-29T12:02:34.340
> 
> 标签：php, magic-methods

我还没有找到我在这里发布的问题的完全相同的副本，所以这里是：

```
class CBaseEntity
{
    public function __construct()
    {

    }

    public function __get($property)
    {
        $property = "m_".$property;
        echo $property;
        if(property_exists($this, $property))
        {           
            $result = $this->$property;
            return $result;
        }
        else 
        {
            throw new Exception("Property not found $property");
        }
    }
}

class CCategoryEntity extends CBaseEntity
{
    private $m_id;
    private $m_name;
    private $m_description;

    public function __construct()
    {

    }

    public static function CreateFromParams($id,$name, $description)
    {
        $instance = new CCategoryEntity();
        $instance->m_id=$id;
        $instance->m_name=$name;
        $instance->m_description=$description;
        return $instance;
    }

    public static function CreateFromArray(array $catData)
    {
        $instance = new CCategoryEntity();
        $instance->m_id = $catData["id"];
        $instance->m_name = $catData["name"];
        $instance->m_description = $catData["description"];
        return $instance;
    }
}

    $categoryEntity = CCategoryEntity::CreateFromParams(3, "EntityA", "Entity");
    echo $categoryEntity->name;

Fatal error: Uncaught exception 'Exception' with message 'Property not found m_m_name'
 Exception: Property not found m_m_name in ***\models\BaseModel.php on line 33 
```

似乎该`name`属性是通过`get`魔术方法解析的，但是这个 getter 主体中的返回将再次发出对自身的调用，而不是不知何故智能地停止，因为字符串`$property`与所寻找的属性的名称一致。我可以进行字符串比较并查看属性是否以 开头`m_`，但我不希望在这种情况下已经发出第二个调用。

还有其他涉及类似代码的 SO 问题不会产生不必要的递归。php有什么变化还是默认行为？可以做些什么来以优雅的方式达到此设计的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:06:15.330

我不知道你的意思，但没有第二个电话。当您访问类之外的属性时，`__get()`只会调用一次。`$this->$property`方法内部`__get()`不会触发另一个调用。

来自 PHP 文档：

> 当与尚未声明或在当前范围内不可见的属性或方法交互时，将调用重载方法。

这意味着`__get()`只有在没有可用于该调用的属性时才调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:42:13.180

出现递归是因为您只检查属性是否存在，而不是是否可以从当前范围访问。由于它被声明为私有，因此无法从父类或子类访问它，只能在声明它的类中访问它，这就是为什么`__get`第二次调用它（第一次是不存在的属性，现在是不可访问的属性）。尝试[get_object_vars](http://php.net/manual/en/function.get-object-vars.php)以获取可访问的属性。

您可能希望对其进行保护，或为私有属性定义公共 getter 方法。

# objective-c - NSDictionary 获取对象

> ID：14081460
> 
> 赞同：2
> 
> 时间：2012-12-29T12:02:39.250
> 
> 标签：objective-c, cocoa-touch, key, nsdictionary, nsmutabledictionary

我得到这个`NSMutableDictionary`包含一个对象和一个键。关键是：TemplateID 和 Object 是一个数字。我的问题是我不能把对象拿出来，没有钥匙。

任何人都可以帮忙吗？

```
// Defining stuff...
templateData = [[NSMutableArray alloc] initWithCapacity:0];
[templateData addObjectsFromArray:[[WebXML sharedInstance] extractAddTemplate]];
NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:templateData, @"TemplateID", nil];

// First method...
NSArray *keys = [dict allKeys];
id aKey = [keys objectAtIndex:0];
id anObject = [dict objectForKey:aKey];

NSLog(@"anObject: %@", anObject);
// In NSLog it says: anObject: TemplateID = <theObject>;
// I just want anObject: <theObject>

// Second method...
for (id key in dict) {
    id anObject = [dict objectForKey:key];

    NSLog(@"anObject: %@", anObject);
    // In NSLog it says: anObject: TemplateID = <theObject>;
    // I just want anObject: <theObject>
}

// Third method...
NSArray  * myArray = [NSArray arrayWithObject:@"TemplateID"];
NSMutableDictionary *anotherDict = [[NSMutableDictionary alloc] initWithObjects:templateData forKeys:myArray];

NSLog(@"anotherDict: %@", anotherDict);
// In NSLog it says: anotherDict: TemplateID = <theObject>;
// I just want anotherDict: <theObject> 
```

// 米克尔

# neo4j - Neo4j php：无法通过 Cypher 删除节点

> ID：14081461
> 
> 赞同：1
> 
> 时间：2012-12-29T12:03:06.973
> 
> 标签：neo4j

我无法使用 neo4php(using cypher api) 删除节点。

这是我的小代码：

```
$client = new Everyman\Neo4j\Client();
$queryString = "START n = node(*) return n";
$query = new Everyman\Neo4j\Cypher\Query($client, $queryString);
$result = $query->getResultSet();

foreach ($result as $row) {
    $id = $row['n']->getId();
    $deletequery = "START node = node(".$id.")" 
    ." Delete node";
    $query = new Everyman\Neo4j\Cypher\Query($client, $deletequery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T04:36:12.827

我得到了答案。实际上删除节点后，我必须使用 $query->getResult 获取结果

# eclipse - Eclipse 32位崩溃linux

> ID：14081463
> 
> 赞同：0
> 
> 时间：2012-12-29T12:03:26.463
> 
> 标签：eclipse

当我在 linux 中启动 eclipse(32) 时（eclipse 64 正确启动）- 我看到这个错误：

```
JVM terminated. Exit code=13
    /usr/bin/java
    -Xms40m
    -Xmx512m
    -XX:MaxPermSize=256m
    -jar /home/devil/bin/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
    -os linux
    -ws gtk
    -arch x86
    -showsplash /home/devil/bin/eclipse//plugins/org.eclipse.platform_4.2.1.v201209141800/splash.bmp
    -launcher /home/devil/bin/eclipse/eclipse
    -name Eclipse
    --launcher.library /home/devil/bin/eclipse//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.200.v20120522-1813/eclipse_1502.so
    -startup /home/devil/bin/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
    --launcher.overrideVmargs
    -exitdata 6d8006
    -vm /usr/bin/java
    -vmargs
    -Xms40m
    -Xmx512m
    -XX:MaxPermSize=256m
    -jar /home/devil/bin/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 
```

这是什么意思？请帮帮我

版本 java - 6 uname ：

```
linux devil-desktop 3.5.0-21-generic #32-Ubuntu SMP Tue Dec 11 18:51:59 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

爪哇版：

```
java version "1.6.0_38" Java(TM) SE Runtime Environment (build 1.6.0_38-b05) Java HotSpot(TM) Server VM (build 20.13-b02, mixed mode) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:57:03.630

好的，您很可能在您的机器上运行 64 位版本的 java。
您的 32 位版本的 eclipse 拒绝启动，因为它需要在 32 位版本的 java 上运行。

您需要做的是获取一个 32 位版本的 java，将其解压缩并告诉 eclipse 在哪里可以找到它。
这是我找到的指南，其中更详细地描述了此过程：
[http ://racaelandtom.info/node/1485](http://rachaelandtom.info/node/1485)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:15:40.853

我遇到了类似的问题。虽然通过从 OpenJDK 切换到 SunJDK 解决了这个问题。希望它也适用于你

# jquery - .live('pageshow') 需要用户手动刷新才能工作

> ID：14081464
> 
> 赞同：1
> 
> 时间：2012-12-29T12:03:38.087
> 
> 标签：jquery, ajax, jquery-mobile, live

```
$('#home').live('pageshow', function(event) {
    $.mobile.showPageLoadingMsg();
    var task = getUrlVars()["que"];
    var page = getUrlVars()["page"];
    var query = '';
    if(page == undefined){
        page = 0;
    }
    var nextPage = page+1;
    if(task == undefined){
        task = 'home';      
    }
    switch(task){
        case 'home':
            query = 'task=home&page='+page;
            break;
    }
    $.get('http://myappserver.com/api.php?'+query,function(data,response){
        alert(response);
        alert(data);
        var json = eval(data);
        var list = '';
        for (var i=0;i<json.length;i++){
            var item = json[i];
            var img = 'http://myappserver.com'+item.img;
            list += '<li><a href="page.html?id=' + item.id + '">' +
                        '<img src="' + img + '" class="recipeAvatarList"/>' +
                        '<h4>' + item.value + '</h4>' +
                        '<p>' + item.familia + '</p>' +
                        '<span class="ui-li-count">' + item.votos + '</span></a>';
                 +'</li>';
        }
        list += '<li><a href="index.html?que='+task+'&page='+nextPage+'">Cargar más..</a></li>';
        $('#mainlist').html(list).listview('refresh');
        $.mobile.hidePageLoadingMsg();
    });  

}); 
```

在哪里

```
function getUrlVars() {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

这似乎很有效，可以在第一页中加载结果，但是如果您注意到，我会附加一个链接来加载下一页：

```
list += '<li><a href="index.html?que='+task+'&page='+nextPage+'">Cargar más..</a> 
```

问题是，当单击该链接时，它会正确加载下一个 URL，并且数据和响应警报具有预期的内容，但未填充列表...用户必须手动刷新该视图才能这样做..

这是因为我不应该使用 `.live('pageshow')`吗？

-编辑-

页面标记是这样的

```
<div id="home" data-role="page" >     
                <header role="banner" class="clearfix" >        
                    <h1>Title</h1>       
                </header>
                <div data-role="content">
                        <div class="">
                            <input type="search" id="buscar_receta" placeholder="busca recetas" />
                                <a href="search.html" class="advancedSearchLink">+ Busqueda avanzada</a>
                        </div>
                </div>
                <div data-role="content">
                    <ul id="mainlist" data-role="listview" >

                    </ul>

                </div>        
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T14:35:59.167

问题是你所说的：你不应该使用`$.live`jQueryMobile（除非你*真的*必须）。

尝试从此更改您的代码：

```
$('#home').live('pageshow', function(event) {
    //your code here
} 
```

对此：

```
$('#home').on('pageshow', function(event) {
    //your code here
} 
```

**说明**：页面默认由 jqMobile 使用 ajax 加载，因此新内容将添加到现有 DOM。如果使用`$(#home).live('pageshow', ...)`，相当于`$(#home).on('pageshow', 'html', ...)`，则*要求*HTML 元素*侦听*`pageshow`事件。

每次您再次（通过 ajax）加载同一个页面时，事件绑定都会再次完成到同一个 HTML 元素，并且您的代码会执行两次，然后是 3 次，然后是 4 次......

您可能想在那里阅读这个相关问题和我的答案：[JQueryMobile 听点击](https://stackoverflow.com/questions/13754818/jquerymobile-listen-click)

## 更新：

对不起！我在注意到你的评论之前回答了。您的代码中存在问题，因为您使用的是`live`代替，但您的主要问题是您打开链接的方式：每次单击时`on`它都会创建第二个，并且*您的重复列表中的第一个*可能正在正确更新，但是你在屏幕上有第二个空的网格。`<div id='home'>`

 *您必须对加载数据的方式进行一些更改才能使其正常工作。请阅读我在您的问题中的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:43:41.627

**.live**是一种已弃用的方法。所以尝试使用以下...

```
$('#home').on('pageshow', function(event) {

} 
```

或者你可以使用

```
$('#home').delegate('pageshow', function(event) {

} 
```

参考[这里](http://api.jquery.com/on/)*

# iphone - 为 UITapGestureRecogniser 识别多个 UILabel 点击

> ID：14081466
> 
> 赞同：3
> 
> 时间：2012-12-29T12:03:59.060
> 
> 标签：iphone, xcode, uitapgesturerecognizer

在我的视图加载中，我有两个 UILabel，并且我为两者添加了相同的 tapGesture。如果点击特定标签，则应该执行其功能。但我无法这样做？

```
-(void)viewDidLoad{
  lblEditProfile.userInteractionEnabled = YES;
  UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelClicked:)];
    [tapGestureRecognizer setNumberOfTapsRequired:1];
   [lblEditProfile addGestureRecognizer:tapGestureRecognizer];
   [tapGestureRecognizer release];

   lblViewDetails.userInteractionEnabled = YES;
  tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelClicked:)];
    [tapGestureRecognizer setNumberOfTapsRequired:1];

    [lblViewDetails addGestureRecognizer:tapGestureRecognizer];
    [tapGestureRecognizer release];
}

-(IBAction)labelClicked:(UITapGestureRecognizer*)tapGestureRecognizer
{

    currentLabel = (UILabel *)tapGestureRecognizer.view;
    NSLog(@"tap %@",tapGestureRecognizer.view);

    if(currentLabel.text==@"Edit Profile")
    {

        UserProfile *userProfile = [[UserProfile alloc] initWithNibName:@"UserProfile" bundle:nil];
        userProfile.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:userProfile animated:YES];
        [userProfile release];

    }
    else
    {

        ViewDetails *viewDetails = [[ViewDetails alloc] initWithNibName:@"UserAppointments" bundle:nil];
        viewDetails.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController: viewDetails animated:YES];
        [viewDetails release];

    }

} 
```

但是当我点击 EditProfile 标签时，它会被阻止。

如何识别单击了哪个标签并相应地执行所需的操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T12:12:13.703

像这样使用标签格式。这将是有效的

```
-(void)viewDidLoad{
  lblEditProfile.userInteractionEnabled = YES;
  lblEditProfile.tag = 1;
  UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelClicked:)];
    [tapGestureRecognizer setNumberOfTapsRequired:1];
   [lblEditProfile addGestureRecognizer:tapGestureRecognizer];
   [tapGestureRecognizer release];

   lblViewDetails.userInteractionEnabled = YES;
   lblViewDetails.tag = 2;
  tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelClicked:)];
    [tapGestureRecognizer setNumberOfTapsRequired:1];

    [lblViewDetails addGestureRecognizer:tapGestureRecognizer];
    [tapGestureRecognizer release];
}

-(IBAction)labelClicked:(UITapGestureRecognizer*)tapGestureRecognizer
{

    currentLabel = (UILabel *)tapGestureRecognizer.view;
    NSLog(@"tap %d",tapGestureRecognizer.tag);

    if(currentLabel.tag == 1)
    {

        UserProfile *userProfile = [[UserProfile alloc] initWithNibName:@"UserProfile" bundle:nil];
        userProfile.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:userProfile animated:YES];
        [userProfile release];

    }
    else if(currentLabel.tag == 2)
    {

        ViewDetails *viewDetails = [[ViewDetails alloc] initWithNibName:@"UserAppointments" bundle:nil];
        viewDetails.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController: viewDetails animated:YES];
        [viewDetails release];

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:13:41.757

像这样检查：

```
 if(currentLabel == lblEditProfile)
    //code here
  else
     //code here 
```

# iphone - PFQuery 排除特定列

> ID：14081471
> 
> 赞同：1
> 
> 时间：2012-12-29T12:04:16.797
> 
> 标签：iphone, objective-c, ios, ipad, parse-platform

在一个类的所有列中，有两列存储图像。column1 和 column2 存储图像。

现在，我想要实现的目标是从这些列中的任何一个获取图像。即获取除第1列之外的所有列或获取除第2列之外的所有列。这样，避免下载其他无用的图像列数据，从而减少网络使用。

这是我尝试过的代码。我无法找到它是否有可能实现这一目标。

```
PFQuery *query=[PFQuery queryWithClassName:@"MyUsers"]; 

[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {

    for(NSDictionary *dic in objects){

        //I want either of image in column "column1" & "column2"

        PFFile *file=[dic objectForKey:@"column1"];

        PFFile *file2=[dic objectForKey:@"column2"];

        self.imgV.image=[UIImage imageWithData:[file getData]];
    }

}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:36:49.323

PFQuery 提供的结果不包括实际 PFFile 的内容，而是指向文件本身的指针。您可以通过调用其任何 getData 方法来选择性地下载 PFFile。一旦文件被下载一次，它将被本地缓存到磁盘。

# oracle - oracle 从模式中删除选定的对象

> ID：14081474
> 
> 赞同：1
> 
> 时间：2012-12-29T12:05:06.177
> 
> 标签：oracle

我想从模式中删除对象，并且我已将所有不应删除的对象存储在表中，所有其他不在表中的对象都应删除。我有以下不起作用的代码可以在这里帮助我。我在网上搜索过只有一件事“删除所有对象”与我的情况无关。

```
DECLARE
    stringa VARCHAR2(100);
    stringb VARCHAR2(1000) := '';
    CURSOR cur IS
      SELECT *
      FROM   user_objects;
BEGIN
    FOR c IN cur LOOP
        BEGIN
            stringa := '';

            BEGIN
                SELECT tab_name
                INTO   stringb
                FROM   zretain_list;

                IF c.object_type = 'VIEW' THEN
                  stringa := 'drop view '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'TABLE'
                      AND c.object_name != stringb THEN
                  stringa := 'drop table  "'
                             || c.object_name
                             || '" cascade constraints';

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'SEQUENCE' THEN
                  stringa := 'drop sequence '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'PACKAGE' THEN
                  stringa := 'drop package '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'TRIGGER' THEN
                  stringa := 'drop trigger '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'PROCEDURE' THEN
                  stringa := 'drop procedure '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'FUNCTION' THEN
                  stringa := 'drop function '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'SYNONYM' THEN
                  stringa := 'drop synonym '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'INDEX' THEN
                  stringa := 'drop index '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'PACKAGE BODY' THEN
                  stringa := 'drop PACKAGE BODY '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                ELSIF c.object_type = 'DATABASE LINK' THEN
                  stringa := 'drop database link '
                             || c.object_name;

                  EXECUTE IMMEDIATE stringa;
                END IF;
            EXCEPTION
                WHEN OTHERS THEN
                  NULL;
            -- PURGE recyclebin
            END;
        END;
    END LOOP;
END;

/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:00:47.740

你可以从类似的东西开始

```
begin
  For i in (select object_type, object_name from user_objects o
            where object_name != 'ZRETAIN_LIST' and object_type in ('TABLE', 'FUNCTION', 'PROCEDURE', 'PACKAGE', 'SEQUENCE' )
            and not exists ( select 1 from zretain_list where tab_name = o.object_name ) )
  loop
    execute immediate 'drop '||i.object_type || ' ' || i.object_name ;
  end loop;
end;
/ 
```

# java - preon 如何使用 bean 属性？

> ID：14081479
> 
> 赞同：0
> 
> 时间：2012-12-29T12:05:40.047
> 
> 标签：java, preon

我需要读取一个二进制文件，其中字节数组的大小取决于一个可选值以及一个常数。如何使用 Preon 实现这一目标？

似乎字节数组大小计算不能是有条件的，即。大小="adaptationFieldControl==0b10 || 自适应字段控制==0b11 ? 184-adaptationFieldLength : 184"

使用一种方法（参见下面的示例）计算动态大小会使 Preon 失败，原因是：org.codehaus.preon.el.BindingException：无法为名为 getPayloadLength 的绑定数据创建绑定。

```
public class packet {
    @BoundNumber(size = "2")
    byte adaptationFieldControl;

    /**
     * Returns the size of the payload if present in the packet
     * @return size corrected for adaptation fields
     */
    public int getPayloadLength() {
        if(isAdaptationFieldsPresent()) {
            return 188 - (4+adaptationFieldLength);
        }
        return 188-4;
    }

    @If("adaptationFieldControl==0b10 || adaptationFieldControl==0b11")
    @BoundNumber(size="8")
    short adaptationFieldLength;

    @If("adaptationFieldControl==0b01 || adaptationFieldControl==0b11")
    @BoundList(size="payloadLength")
    byte[] payload; 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:19:14.423

除非我完全弄错了，否则如果条件为假，`@If`注释实际上会阻止该字段被注册*。*因此，根据 Preon 的说法，*没有*称为`addaptationFieldLenght`. 这样，Preon 现在可以绑定到方法了。从技术上讲，没有什么可以阻止它实现，但我想确保您始终可以生成文件格式的合理 HTML 描述，并且如果隐藏在方法主体中的逻辑，则无法将其转换为文档。

如果你有一些复杂的逻辑根本不适合 Limbo 表达式，你最好`Codec`为它创建一个。这样，您可以确保您的逻辑也记录在生成的文件格式的描述中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:06:23.490

Preon 使用语言“Limbo”来实现表达式求值。在 Limbo 中，计算结果为 true 的表达式将取值“1”（假值为“0”）。

结果是表达式：

```
size=adaptationFieldControl==0b10 || adaptationFieldControl==0b11
    ? 184-adaptationFieldLength : 184 
```

可能会采取以下形式：

```
size=184-(adaptationFieldControl==0b10||adaptationFieldControl==0b11)
    *adaptationFieldLength 
```

我测试了它，不幸的是它接缝方法大小不接受它。我得到了例外：

```
org.codehaus.preon.el.InvalidExpressionException: NoViableAltException(18@[]) 
```

似乎只有“@If”注释才能理解逻辑标记。

作为一种解决方法，我建议您定义两个以“@If”注释为前缀的字段，然后实现一个 get 方法，测试这两个字段是否为“null”并返回“non-null”。

# php - 传递查询字符串变量而不刷新页面

> ID：14081482
> 
> 赞同：-2
> 
> 时间：2012-12-29T12:05:52.613
> 
> 标签：php, javascript, html

我的问题是如何在同一页面上传递查询字符串变量而不用 php 刷新页面？我的代码如下：

```
<a href="?id=1&pid=2"><img src="a.jpg"></a>

<?php
$a = $_GET['id'];
$b = $_GET['pid'];
?> 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:08:57.323

**你不能。**

PHP 需要在服务器上执行，因此您必须使用 AJAX 并相应地更新您的页面，或者只是刷新您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:09:47.500

**您可以**通过向服务器发送 AJAX 请求。Ajax 是一种通过 Javascript 发送异步请求的方法。请注意，jQuery 有一个很好的[库](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:21:47.397

使用[jquery](http://jquery.com/)来解决这个问题。通过在 jquery 中使用 $.ajax，您可以在不刷新页面的情况下完成您需要的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T12:45:06.317

```
<html>
<head>
<title>Test</title>
<meta name="" content="">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#image_id").click(function(){
            var dataString = 'a=10&b=20';
            $.ajax({
                type:'POST',
                url:'foo.php',
                data:dataString,
                success:function(data) {
                    if(data=="Something") {
                        // Do Something
                    } else {
                        // Do Something
                    }   
                }           
            });
        });
    });
</script>
</head>
<body>
    <img id="image_id" src="images/bg.jpg" />
</body>
</html> 
```

然后在“foo.php”页面中执行此操作

```
if(isset($_POST['a'])) {
   // DO SOMETHING

} 
```

记住要发送到“数据”的东西

```
success:function(data) 
```

必须在 foo.php 页面中回显

# c++ - Qt 5.0 和 c++11 与 OSX Mountain Lion

> ID：14081490
> 
> 赞同：3
> 
> 时间：2012-12-29T12:06:49.340
> 
> 标签：c++, macos, c++11, qt5

离开 7 年后，我再次尝试 C++。我已经下载了新发布的用于 osx 的 Qt 5.0 sdk，但我无法获得使用 Qt Creator 编译的基本 c++11 功能。以下声明：

```
auto i = 3; 
```

导致编译错误：

```
mainwindow.cpp:19: error: ISO C++ forbids declaration of 'i' with no type 
```

我用谷歌搜索了类似的问题，并找到了建议

```
QMAKE_CXXFLAGS += -std=c++11
  or
CONFIG += c++11 
```

在 .pro 文件中。不幸的是没有成功。在无法识别的命令行选项上构建失败。

我一定做错了什么。有什么建议么？

谢谢，

弗兰斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:35:18.723

它看起来像 Qt Creator for Mac 错误。我用

```
QMAKE_CXXFLAGS += -std=c++11 -stdlib=libc++ -mmacosx-version-min=10.7
LIBS += -stdlib=libc++ -mmacosx-version-min=10.7 
```

在 .pro 文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T14:47:30.810

我不知道这对你来说是否仍然是一个问题。

在我当前的系统（Max OS X Yosemite - Qt 5.4 - QtCreator 3.0 - XCode 6.1.1）上，这就像一个魅力：

在 .pro 文件中：

```
macx {
    QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.7
    QMAKE_CXXFLAGS += -mmacosx-version-min=10.7
    QMAKE_CFLAGS += -mmacosx-version-min=10.7
    QMAKE_MAC_SDK = macosx10.9
}

macx {
    QMAKE_CXXFLAGS += -std=c++11 -stdlib=libc++
    QMAKE_CFLAGS += -std=c++11 -stdlib=libc++
}
CONFIG += c++11 
```

确保您也安装了最新的 Mac OS X SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:08:54.487

根据[gcc 功能列表](http://gcc.gnu.org/projects/cxx0x.html)，通过以下`auto`方式支持`gcc 4.4`：

```
g++ -std=c++0x 
```

你也可以试试这个`gcc-specific`表格：

```
g++ -std=gnu++0x 
```

在您的情况下，可能会出现另一个问题（g++ 参数未正确提升到编译器）。

# java - 如何获得完整十六进制文件的总长度（英特尔和摩托罗拉十六进制文件）？

> ID：14081492
> 
> 赞同：0
> 
> 时间：2012-12-29T12:06:57.910
> 
> 标签：java, intel, motorola

我想获取英特尔和摩托罗拉 S19 hex 文件的完整 hex 文件中不同地址记录中存在的所有数据记录的总长度。

例如，

:020000048000FC

:10246200464C5549442050524F46494C4500464C33

:10247200464C554944ABACDEAF46494C4500464C33

:02000004800AFC

:10246200464C5549442050524F46494C4500464C33

:10247200464C554944ABACDEAF46494C4500464C33

:020000049000FC

:10246200464C5549442050524F46494C4500464C33

:10247200464C554944ABACDEAF46494C4500464C33

:00000001FF

（请忽略上述示例 hex 文件中记录之间的空格）。

我用谷歌搜索了同样的东西，但我找不到任何有用的东西。

我正在尝试比较两个十六进制文件。为了比较，我想获得完整的十六进制文件的长度。但我不知道要获得完整十六进制文件的确切长度。

有人可以帮我吗？

提前致谢 ！

完整的十六进制文件定义为：

在 Intel Hex File 的情况下，每一行都定义为记录，并且必须以 :（冒号）开头。它可以是地址或数据记录。十六进制文件可以包含任意数量的地址记录。地址记录可以包含其数据记录。每个数据记录的长度在 :（冒号）之后的第一个字节中指定。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Intel_HEX](http://en.wikipedia.org/wiki/Intel_HEX)。

我想计算完整十六进制文件中数据记录的总长度。即 hex 文件中每个对应地址记录下存在的所有数据记录的长度总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:13:02.703

> 我正在尝试比较两个十六进制文件。为了比较，我想获得完整的十六进制文件的长度。但我不知道要获得完整十六进制文件的确切长度。

你为什么不使用[`length()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#length%28%29)：

```
File hexFile = new File("/path/to/your/hexfile");
long length = hexFile.length(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:23:09.457

要确定大小，您可以使用 ls -l 命令。为了比较，您可以使用 MD5，并生成一个哈希值。

# iphone - 添加回调以在 iOS 中按下按住按钮

> ID：14081494
> 
> 赞同：0
> 
> 时间：2012-12-29T12:07:03.307
> 
> 标签：iphone, ios

> **可能重复：**
> [检测何时按下主页按钮 iOS](https://stackoverflow.com/questions/10324596/detect-when-home-button-is-pressed-ios)

我需要知道用户在使用我的应用程序时何时按下保持按钮并在此之后运行一个方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:36:12.373

根据我发布的副本，您可以响应的唯一事件（无论哪个按钮实际触发行为）是应用程序生命周期事件；

请参阅此处的附加说明；

[是否可以区分锁定设备和将应用程序发送到后台？](https://stackoverflow.com/questions/7754317/is-it-possible-to-distinguish-between-locking-the-device-and-sending-an-app-to-b)

# java - 将位图保存到 SD 卡后图像质量下降

> ID：14081497
> 
> 赞同：1
> 
> 时间：2012-12-29T12:07:27.423
> 
> 标签：java, android, image

我正在使用一个活动来显示完整图像，并且用户有一个按钮来保存它。

图像正在从我在 Internet 上托管图像的 URL 加载到 imageview 中。

我将图像保存为 PNG 文件。

保存图像后，其质量会降低。我知道PNG不是无损的，但是有什么方法可以保存图像而不影响质量或分辨率？

这是代码：

```
buttonSave.setOnClickListener(new Button.OnClickListener()
{
    public void onClick(View arg0) 
    {
        fullSizeImage.buildDrawingCache();
        Bitmap bm=fullSizeImage.getDrawingCache();
        String root = Environment.getExternalStorageDirectory().toString();
        File myDir = new File(root + File.separator + "MyWallpapers");
        if(!myDir.exists())
        {
            myDir.mkdir();
        }
        String fname = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date())+".png";
        File file = new File (myDir, fname);
        /*if (file.exists ()) file.delete (); */
        try 
        {
            //FileOutputStream out = new FileOutputStream(file);
            /*FileOutputStream out = new FileOutputStream(file);

            bm.compress(Bitmap.CompressFormat.PNG, 100, out);*/

            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            bm.compress(Bitmap.CompressFormat.PNG, 100, bytes);

            file.createNewFile();
            //write the bytes in file
            FileOutputStream fo = new FileOutputStream(file);
            fo.write(bytes.toByteArray());
            bytes.flush();
            bytes.close();
            /*out.flush();
            out.close();*/
            Toast.makeText(FullSizeImageDisplay.this, "Wallpaper Saved in SDcard/MyWallpapers folder",Toast.LENGTH_SHORT).show();
            String[] paths = {root + File.separator + "MyWallpapers"};

            String[] mediaType = {"image/png"};
            MediaScannerConnection.scanFile(FullSizeImageDisplay.this, paths, mediaType, null);
            ContentValues values = new ContentValues();
            values.put(MediaStore.Images.Media.DATA, file.getAbsolutePath());
            values.put(MediaStore.Images.Media.MIME_TYPE, "image/png"); 

            getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }

        OutputStream fOut = null;
        Uri outputFileUri;

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:20:13.917

```
fullSizeImage.buildDrawingCache();
Bitmap bm=fullSizeImage.getDrawingCache(); 
```

fullSizeImage 在哪里可能是一个图像视图。

我看到加载图像时出现问题。您一定使用过 BitmapFactory.Options 之类的东西

进行以下更改

```
BitmapFactory.decodeStream(<param1>,param2,null); 
```

# java - 在两个随机边界之间创建一个随机整数

> ID：14081500
> 
> 赞同：1
> 
> 时间：2012-12-29T12:08:33.973
> 
> 标签：java, random

> **可能重复：**
> [使用 Java 在一个范围内生成随机数](https://stackoverflow.com/questions/363681/generating-random-number-in-a-range-with-java)

我正在尝试创建一个高于一个边界值且低于另一个边界值的随机数。该数字也可以等于任一边界。

两个边界都是随机创建的。highNumber 是 0 到 100 之间的随机数，lowNumber 是 0 到 highNumber 一半之间的随机数。

目前我的代码如下：

```
 public static void createCorrectNumber() {
            random = new Random();
            correctNumber = random.nextInt(highNumber)+1;
            correctNumber -= lowNumber;
    } 
```

这不起作用，因为当下限被拿走时，它可能会低于边界。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:11:55.723

采用

```
correctNumber = random.nextInt(highNumber - lowNumber + 1) + lowNumber; 
```

# matlab - 神经网络激活

> ID：14081506
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:08:58.080
> 
> 标签：matlab, artificial-intelligence, classification, perception

从这个[网站](http://computing.dcu.ie/~humphrys/Notes/Neural/single.neural.html)，

输出节点有一个“阈值”t。

规则：

```
If summed input ≥ t, then it "fires" (output y = 1). 
Else (summed input < t) it doesn't fire (output y = 0). 
```

y 如何等于`zero`。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:45:35.673

神经网络有一个所谓的“激活函数”，它通常是某种形式的类似 sigmoid 的函数，将输入映射到单独的输出。

[http://zephyr.ucd.ie/mediawiki/images/b/b6/Sigmoid.png](http://zephyr.ucd.ie/mediawiki/images/b/b6/Sigmoid.png)

对您来说，它恰好是 0 或 1，并且使用比较而不是 sigmoid 函数，因此您的激活曲线将比上图更清晰。在上述图表中，您`t`的阈值在 X 轴上为 0。

所以作为伪代码：

`sum = w1 * I1 + w2 + I2 + ... + wn * In`

`sum`是所有神经元输入的加权和，现在你所要做的就是将该总和`t`与阈值 进行比较：

```
if sum >= t then y = 1      // Your neuron is activated
else y = 0 
```

您可以使用最后一个神经元的输出作为网络输出来预测 1/0、真/假等。

如果您正在研究 NN，我建议您从 XOR 问题开始，那么一切都会有意义。

# php - PHP 自动生成新页面

> ID：14081508
> 
> 赞同：6
> 
> 时间：2012-12-29T12:09:15.490
> 
> 标签：php, html, dynamic

我正在制作一个社交网络类型的网站，用户可以在其中上传他们的项目进行评分。但是，我正在尝试改进网站的布局方式，因此希望在用户插入新项目后自动生成页面。add.php 页面具有以下形式：

```
<form action="add.php"  method="post"  autocomplete="on" enctype="multipart/form-data" action="<?php echo                  $_SERVER['PHP_SELF']; ?>" method="POST" id="pic">
    <p> <label for="jname" class="iconic user"> Name of Jam <span class="required">*</span></label> <input type="text" name="jname" id="jname" value="<?php if (isset($_POST['jname'])) echo $_POST['jname']; ?>" required="required" placeholder="Input your Name of Jam here"  /> </p>

    <p> <select name="jtype" id="jtype" value="<?php if (isset($_POST['jtype'])) echo $_POST['jtype']; ?>" required="required">
            <option value="jam">Jam</option>
            <option value="jelly">Jelly</option>
            <option value="marmalade">Marmalade</option>
            <option value="preserve">Preserve</option>
        </select> </p>

    <p> <label for="producer" class="iconic user"> Jam Producer <span class="required">*</span></label>     <input type="text" name="producer" id="producer" value="<?php if (isset($_POST['producer'])) echo $_POST['producer']; ?>" required="required" placeholder="Input the producer of the Jam here"  /> </p>
    Upload a picture of your jam: </br> </br> <input name="userfile" type="file" /> </br>
    <input type="submit" name="submit" value="Register" />    
    <input type="hidden" name="submitted" value="TRUE" />

</form> 
```

提交表单后，我希望它为该新用户创建的项目生成一个新页面。有没有一种相当简单的方法来做到这一点？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T12:21:58.567

您不必为每个项目实际“创建”新的 html 页面。

您可以将此信息保存到数据库（例如 mysql）。

然后你可以创建另一个 php 文件，比如“item.php”并从 mysql 数据库中访问不同的条目，如下所示：

item.php?id=1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T12:20:37.123

这通常不是此类网站的创建方式。（即：您不会在提交表单时自己生成物理页面。）相反，您通常会将表单数据存储在数据库中，然后根据 URL 检索/显示它 - 或者通过解码 URL 本身通过“控制器”或使用查询字符串变量，例如`?producerid=x`. 然后，该数据将用于填充模板。

老实说，我真的建议您获取最近的 PHP 书籍（就数据库访问而言，您应该使用 PDO 或 MySQLi）或遵循一些在线教程 - 虽然最初看起来这不会是一种有意义的进步形式，从长远来看，它可能会带来可观的红利。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T12:14:25.693

通常这样的事情没有新的页面生成。您应该创建一个模板并从其他来源（如 XML 文件或数据库）加载动态信息，使其看起来像一个全新的页面。

只是：

1.  查看每个项目页面的共同点
2.  定义一个包含通用代码的模板
3.  从数据库中检索动态信息（例如项目信息）
4.  使用嵌入在 HTML 中的 PHP 加载动态 HTML

一个例子：

Facebook 不会为每个用户注册创建一个新页面。有一个 HTML 模板，它定义了个人资料照片的位置、帖子的位置和样式、朋友列表的位置和样式以及任何个人资料页面共有的内容，然后在您调用此类页面时加载不同的信息马克、弗兰克、杰夫等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-24T22:54:58.197

最好和最有效的方法是将数据存储在数据库中，并在用户单击特定项目时检索它。但有一件事，如果你的计划的一部分是让谷歌搜索引擎访问你的网站，你必须生成单独的网页......因为，谷歌只是一个网络爬虫......它不能进入​​ mysql 或其他数据库.

# javascript - 如何在 json 搜索中处理“空”值

> ID：14081512
> 
> 赞同：0
> 
> 时间：2012-12-29T12:09:31.303
> 
> 标签：javascript, jquery

JavaScript 还是新手，我正在我的 JSON 中搜索数字，但 JSON 有很多空值。如何忽略搜索中的空值？

```
$.each(geojson.features, function (i, v) {
    if (v.properties.code.toString().search((/2/i)) != -1) {
        Count++;
    }
}); 
```

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:12:57.847

你可以这样做

```
 if (v.properties.code && v.properties.code.toString().search((/2/i)) != -1) {
            Count++;
        } 
```

先检查值不为空，然后搜索字符串

# algorithm - 纹理映射通用算法

> ID：14081514
> 
> 赞同：1
> 
> 时间：2012-12-29T12:09:32.947
> 
> 标签：algorithm, graphics, texture-mapping

纹理映射的一般算法是什么？

我已经搜索了谷歌，但我没有看到任何纹理映射的伪代码算法。你能给它，一步一步地展示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:18:32.670

纹理映射的一般思想是：

1.  您将纹理表示为函数 f(u,v) - 或函数 f(u,v,w) - 在请求的 2D 或 3D 位置提供颜色或灰色阴影。
2.  您有一个从对象坐标 (x,y[,z]) 到纹理坐标 (u,v[,w]) 的映射。

纹理函数和坐标映射如何实现取决于实际需要，可能会有很大差异。如果您的纹理是由位图定义的，那么您将需要双线性或三次过滤来对 u 或 v 的非整数值进行插值。将 3D 对象表面上的点 (x,y,z) 映射到纹理坐标（u，v）。

# mysql - 关闭 Perl MySQL 插入语句中的警告？

> ID：14081519
> 
> 赞同：0
> 
> 时间：2012-12-29T12:09:59.413
> 
> 标签：mysql, perl, dbi

我正在使用 Perl DBI 插入 MySQL 数据库。一些变量被故意设置为

```
 undef 
```

其中变量的值不可用，因此该变量旨在

```
 NULL 
```

在数据库中。

但是，我在插入语句中收到有关未初始化值的警告。

这里的最佳做法是什么？据我所知，除了在没有可用值时将变量设置为 undef 之外，没有其他方法可以在 MySQL 数据库中正确分配 NULL。我应该关闭未初始化值的警告吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:14:43.040

你可能正在做

```
$dbh->do("INSERT INTO Foo ( field ) VALUES ( '$x' )"); 
```

在这种情况下，您将插入一个空字符串，而不是 NULL，when `$x`is `undef`。它还会中断其他值（例如，包含单引号的值）。这是你应该做的：

```
my $x_lit = defined($x) ? $dbh->quote($x) : 'NULL';
$dbh->do("INSERT INTO Foo ( field ) VALUES ( $x_lit )"); 
```

或者更好：

```
$dbh->do("INSERT INTO Foo ( field ) VALUES ( ? )", undef, $x); 
```

# c# - 玩家和瓷砖之间的碰撞检测

> ID：14081523
> 
> 赞同：1
> 
> 时间：2012-12-29T12:10:28.970
> 
> 标签：c#, xna

我正在尝试在我的平台游戏中实现基本的（目前）碰撞检测。我有每个大小为 16 x 16 的瓷砖。字符大小为 32 x 32 像素，并有自己的边界框。现在，在我的 Tile 类中，我有一个 bool，isSolid。我的数组中的每个图块也有一个矩形用于它们各自的边界框。

我正在检查玩家和瓷砖之间是否存在交叉点：

```
if (player.GetBoundingBox().Intersects(map.tiles[(int)player.position.Y / 16,
(int)player.position.X / 16].bounds) && map.tiles[(int)player.position.Y / 16,  
(int)player.position.X / 16].isSolid) 
{
...
} 
```

现在，我的问题是这是非常不准确的，因为我正在四舍五入。我现在累死了，我一生都无法弄清楚如何正确地做到这一点。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:30:19.630

好吧，这可能并不完全是“基本的”，它工作得非常好并且没有任何问题，因为它会计算 X 轴和 Y 轴分离，这种碰撞结构将在以后帮助你。（我从旧的 Platformer Starter 工具包代码切换到这个，这是非常错误的）

假设你已经有了重力方法，让我们开始吧。

这应该在您的下降和速度逻辑之后，它将看到需要检查哪些轴。

```
 float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds; //If you havent already, get the elapsed time
            if (velocity.X != 0f)
            {
                Position += velocity.X * Vector2.UnitX * elapsed;
                HandleCollisions(CollisionDirection.Horizontal);
            }
            if (velocity.Y != 0f)
            {
                Position += velocity.Y * Vector2.UnitY * elapsed;
                HandleCollisions(CollisionDirection.Vertical);
            } 
```

现在对于非常重要的 HandleCollisons 方法

```
 private void HandleCollisions(CollisionDirection direction)
        {
            // Get the player's bounding rectangle and find neighboring tiles.
            Rectangle bounds = player.GetBoundingBox();
            int leftTile = (int)Math.Floor((float)bounds.Left / Tile.Width);
            int rightTile = (int)Math.Ceiling(((float)bounds.Right / Tile.Width)) - 1;
            int topTile = (int)Math.Floor((float)bounds.Top / Tile.Height);
            int bottomTile = (int)Math.Ceiling(((float)bounds.Bottom / Tile.Height)) - 1;

            // Reset flag to search for ground collision.
            isOnGround = false;

            // For each potentially colliding tile,
            for (int y = topTile; y <= bottomTile; ++y)
            {
                for (int x = leftTile; x <= rightTile; ++x)
                {
                   Rectangle tileBounds = Level.GetBounds(x, y);
                    // If this tile is collidable,
                    bool IsSolid = map.tiles[x,y].IsSolid;
                    Vector2 depth;
                    if (isSolid && TileIntersectsPlayer(BoundingRectangle, tileBounds, direction, out depth))
                    {

                            if ((collision == ItemCollision.Platform && movement.Y > 0))
                                continue;
                            isOnGround = true;
                            if (isSolid || isOnGround)
                            {
                                if (direction == CollisionDirection.Horizontal)
                                {
                                    position.X += depth.X;
                                }
                                else
                                {

                                    isOnGround = true;
                                    position.Y += depth.Y;
                                }
                            }

                    }
                }
            }
            // Save the new bounds bottom.
            previousBottom = bounds.Bottom;

        }
        public static bool TileIntersectsPlayer(Rectangle player, Rectangle block, CollisionDirection direction, out Vector2 depth)
        {
            depth = direction == CollisionDirection.Vertical ? new Vector2(0, player.GetVerticalIntersectionDepth(block)) : new Vector2(player.GetHorizontalIntersectionDepth(block), 0);
            return depth.Y != 0 || depth.X != 0;
        } 
```

就是为了那个！它会检测碰撞，但我们需要让它计算出碰撞后将玩家向后推的程度！您将需要这两种扩展方法。

```
public static float GetHorizontalIntersectionDepth(this Rectangle rectA, Rectangle rectB)
        {
            // Calculate half sizes.
            float halfWidthA = rectA.Width / 2.0f;
            float halfWidthB = rectB.Width / 2.0f;

            // Calculate centers.
            float centerA = rectA.Left + halfWidthA;
            float centerB = rectB.Left + halfWidthB;

            // Calculate current and minimum-non-intersecting distances between centers.
            float distanceX = centerA - centerB;
            float minDistanceX = halfWidthA + halfWidthB;

            // If we are not intersecting at all, return (0, 0).
            if (Math.Abs(distanceX) >= minDistanceX)
                return 0f;

            // Calculate and return intersection depths.
            return distanceX > 0 ? minDistanceX - distanceX : -minDistanceX - distanceX;
        }

        public static float GetVerticalIntersectionDepth(this Rectangle rectA, Rectangle rectB)
        {
            // Calculate half sizes.
            float halfHeightA = rectA.Height / 2.0f;
            float halfHeightB = rectB.Height / 2.0f;

            // Calculate centers.
            float centerA = rectA.Top + halfHeightA;
            float centerB = rectB.Top + halfHeightB;

            // Calculate current and minimum-non-intersecting distances between centers.
            float distanceY = centerA - centerB;
            float minDistanceY = halfHeightA + halfHeightB;

            // If we are not intersecting at all, return (0, 0).
            if (Math.Abs(distanceY) >= minDistanceY)
                return 0f;

            // Calculate and return intersection depths.
            return distanceY > 0 ? minDistanceY - distanceY : -minDistanceY - distanceY;
        } 
```

请注意，您可能需要稍微修改一下，因为玩家的位置是左下角。对于垂直和水平，还需要一个碰撞枚举。请告诉我这是否缺少任何东西。

# android - 通过将 rgb 视为 java 中的字符串将 RGB 转换为 HEX 代码

> ID：14081524
> 
> 赞同：0
> 
> 时间：2012-12-29T12:10:31.283
> 
> 标签：android

在我的项目中，我尝试将`rgb`值考虑为字符串转换为`hex`我在下面的代码中尝试过的值，但没有帮助一点..plz.help我。

```
 String myColorString = "rgb(26,33,37)";
    int color = Integer.parseInt(myColorString, 16);
    int r = (color >> 16) & 0xFF;
    int g = (color >> 8) & 0xFF;
    int b = (color >> 0) & 0xFF;
    FooterColor.setBackgroundColor(Color.rgb(r, g, b)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:28:04.827

我建议使用 .subString() 之类的字符串操作方法，然后使用 split 方法。它使用简单。

```
String colrStr="rgb(12,13,14)";
String tempStr=colrStr.substring(4,11);
String rgbArray[]=tempStr.split(","); 
```

# android - JSON解析是在listview中解析数据和图像的正确方法吗

> ID：14081527
> 
> 赞同：0
> 
> 时间：2012-12-29T12:11:32.300
> 
> 标签：android, json

我很困惑如何在另一个数组中为 Json 响应数组使用循环。以下是我的 jsonresponse 如何循环此以获取列表视图中的数据和图像

```
`{
"status": "ok", 

    "posts": [
        {
            "id": 2498,
            "title": "jigsaw lamp imported from thailand",
            "content": "<p>Hi. It&#8217;s a invitation to have a look at a unique lamp shade called jigsaw lamp from thailand. Available in multi attractive colours.</p>\n",
            "date": "2012-12-26 09:48:15",
             "author": {
                "name": "Tapas123456",
                            },
                "attachments": [
                {
                    "description": "",
                    "caption": "",
                    "mime_type": "image/jpeg",
                    "images": {
                    "thumbnail": {
                    "url": "http://site/wp-content/uploads/2012/12/646675-50x47.jpg",
                        }
                    }
                  ]
                },........ 
```

以下是我用来循环的代码这是正确的做法吗？

```
 ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);
            try {
            posts = json.getJSONArray(KEY_POSTS);
    // looping through all song nodes <song>
            for(int i = 0; i < posts.length(); i++){
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable
                String id = c.getString(KEY_ID);
                String title = c.getString(KEY_TITLE);
                String date = c.getString(KEY_DATE);
                String content = c.getString(KEY_CONTENT);

                // Phone number is agin  JSON Object
                JSONObject author = c.getJSONObject(KEY_AUTHOR);
                String name = author.getString(KEY_NAME);

                JSONArray attachments = json.getJSONArray(KEY_ATTACHMENTS);

                for(int j = 0; j < attachments.length(); j++){
                    JSONObject d = attachments.getJSONObject(j);
                    JSONObject images = d.getJSONObject(KEY_IMAGES);

                    JSONObject thumbnail = d.getJSONObject(KEY_THUMB_URL);
                    String url = thumbnail.getString(KEY_URL);
                }
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        map.put(KEY_ID, id);
        map.put(KEY_TITLE, title);
        map.put(KEY_DATE, date);
        map.put(KEY_NAME, name);
        map.put(KEY_CONTENT, content);

        // adding HashList to ArrayList
        songsList.add(map); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:19:37.753

只需替换以下代码

```
for(int j = 0; j < attachments.length(); j++){
                    JSONObject d = attachments.getJSONObject(j);
                    JSONObject images = d.getJSONObject(KEY_IMAGES);

                    JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                    String url = thumbnail.getString(KEY_URL);
                } 
```

而不是旧代码。

# python - 尝试使用 cx_freeze 将 python 文件转换为可执行文件时出错

> ID：14081528
> 
> 赞同：1
> 
> 时间：2012-12-29T12:11:33.113
> 
> 标签：python, pyqt, cx-freeze

我有 PyQt 的代码：

```
import sys

from PyQt4.QtGui import *
from PyQt4.QtCore import *
from PyQt4.QtWebKit import *

def main():
    page = raw_input('Escriu una web: ')
    app = QApplication(sys.argv)
    view = QWebView()
    view.settings().setAttribute(QWebSettings.JavascriptEnabled, True)
    view.load(QUrl(page))
    view.setWindowTitle('Titanicus 0.1')
    view.show()
    app.exec_()

if __name__ == '__main__':
    main() 
```

我的 setup.py 文件是这样的：

```
 import sys
    from cx_Freeze import setup, Executable

    setup(
        name = "On Dijkstra's Algorithm",
        version = "3.1",
        description = "A Dijkstra's Algorithm help tool.",
        executables = [Executable("nautilus.py")]) 
```

我已经建立了文件夹，但是当我尝试打开新的 exe 文件时，它返回了该错误：

```
File "ExtensionLoader_PyQt4_QtGui.py", line 11, in <module>
ImportError: No module named atexit 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T02:39:40.967

尝试这样的事情：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore, QtWebKit, QtNetwork

class myWindow(QtWebKit.QWebView):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)
        self.setWindowTitle('Titanicus 0.1')
        self.settings().setAttribute(QtWebKit.QWebSettings.JavascriptEnabled, True)

        page = raw_input('Escriu una web: ')
        self.load(QtCore.QUrl(page))

if __name__ == "__main__":
    import  sys

    app  = QtGui.QApplication(sys.argv)
    main = myWindow()
    main.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:18:12.697

我会尝试添加`options = {"build_exe" : {"includes" : "atexit" }}`到`setup.py`，

参考。[https://bitbucket.org/reclosedev/cx_freeze/src/f3cacc2fd45a/samples/PyQt4/setup.py](https://bitbucket.org/reclosedev/cx_freeze/src/f3cacc2fd45a/samples/PyQt4/setup.py)

# java - weblogic 托管日志中的安全性：090759

> ID：14081530
> 
> 赞同：0
> 
> 时间：2012-12-29T12:11:50.497
> 
> 标签：java, sql, sqlexception

我在 weblogic 管理的日志文件中出现以下错误，并且无法跟踪客户端 IP 或 URL 的来源。看起来服务器上正在发生一些 SQL 注入，因此请提供详细信息以防止它并获取有关它的更多详细信息。

```
<[ACTIVE] ExecuteThread: '14' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1355487016719> <BEA-000000> <[Security:090759]A SQLException occurred while retrieving password information
java.sql.SQLException: [Security:090798]Invalid characters found in input @^Y@.@o*.2,./2|pq{jvk@-1('@lvo)&1,.1(.1.+(@./*
        at weblogic.security.providers.authentication.shared.DBMSUtils.verifyInputCharactersName(DBMSUtils.java:338)
        at weblogic.security.providers.authentication.shared.DBMSSQLRuntimeQueryImpl.executeUserPassword(DBMSSQLRuntimeQueryImpl.java:71)
        at weblogic.security.providers.authentication.shared.DBMSAtnLoginModuleImpl.authenticateDBMS(DBMSAtnLoginModuleImpl.java:672)
        at weblogic.security.providers.authentication.shared.DBMSAtnLoginModuleImpl.login(DBMSAtnLoginModuleImpl.java:271)
        at com.bea.common.security.internal.service.LoginModuleWrapper$1.run(LoginModuleWrapper.java:110)
        at com.bea.common.security.internal.service.LoginModuleWrapper.login(LoginModuleWrapper.java:106)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.security.auth.login.LoginContext.invoke(LoginContext.java:769)
        at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186)
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683)
        at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)
        at javax.security.auth.login.LoginContext.login(LoginContext.java:579)
        at com.bea.common.security.internal.service.JAASLoginServiceImpl.login(JAASLoginServiceImpl.java:113)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.bea.common.security.internal.utils.Delegator$ProxyInvocationHandler.invoke(Delegator.java:57)
        at $Proxy17.login(Unknown Source)
        at weblogic.security.service.internal.WLSJAASLoginServiceImpl$ServiceImpl.login(Unknown Source)
        at com.bea.common.security.internal.service.JAASAuthenticationServiceImpl.authenticate(JAASAuthenticationServiceImpl.java:82)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.bea.common.security.internal.utils.Delegator$ProxyInvocationHandler.invoke(Delegator.java:57)
        at $Proxy37.authenticate(Unknown Source)
        at weblogic.security.service.WLSJAASAuthenticationServiceWrapper.authenticate(Unknown Source)
        at weblogic.security.service.PrincipalAuthenticator.authenticate(Unknown Source)
        at weblogic.servlet.security.internal.SecurityModule.checkAuthenticate(SecurityModule.java:236)
        at weblogic.servlet.security.internal.SecurityModule.checkAuthenticate(SecurityModule.java:185)
        at weblogic.servlet.security.internal.BasicSecurityModule.checkUserPerm(BasicSecurityModule.java:75)
        at weblogic.servlet.security.internal.SecurityModule.checkAccess(SecurityModule.java:106)
        at weblogic.servlet.security.internal.ServletSecurityManager.checkAccess(ServletSecurityManager.java:82)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2122)
        at weblogic.servlet.security.internal.AuthFilterChain$LastFilter.doFilter(AuthFilterChain.java:45)
        at weblogic.servlet.security.internal.AuthFilterChain.doFilter(AuthFilterChain.java:37)
        at com.bea.common.security.internal.service.SAMLSingleSignOnServiceImpl.callChain(SAMLSingleSignOnServiceImpl.java:416)
        at com.bea.common.security.internal.service.SAMLSingleSignOnServiceImpl.doRedirectFilter(SAMLSingleSignOnServiceImpl.java:407)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.bea.common.security.internal.utils.Delegator$ProxyInvocationHandler.invoke(Delegator.java:57)
        at $Proxy22.doRedirectFilter(Unknown Source)
        at weblogic.security.providers.saml.SAMLServletAuthenticationFilter.doFilter(SAMLServletAuthenticationFilter.java:101)
        at weblogic.servlet.security.internal.AuthFilterChain.doFilter(AuthFilterChain.java:37)
        at weblogic.servlet.security.internal.SecurityModule$ServletAuthenticationFilterAction.run(SecurityModule.java:612)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(Unknown Source)
        at weblogic.servlet.security.internal.SecurityModule.invokeAuthFilterChain(SecurityModule.java:501)
        at weblogic.servlet.security.internal.BasicSecurityModule.handleFailure(BasicSecurityModule.java:114)
        at weblogic.servlet.security.internal.BasicSecurityModule.checkUserPerm(BasicSecurityModule.java:80)
        at weblogic.servlet.security.internal.SecurityModule.checkAccess(SecurityModule.java:106)
        at weblogic.servlet.security.internal.ServletSecurityManager.checkAccess(ServletSecurityManager.java:82)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2122)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2092)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1406)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T19:43:01.777

这是 weblogic 验证用户 ID 输入作为其登录实现的一部分。我相信 Oracle 的 OID 不允许在用户 ID 中使用撇号。也许有人只是用经典的键盘粉碎测试您的网站，并且碰巧以这样一种方式粉碎了按键，从而为用户 ID 输入了撇号。

Weblogic 似乎正在检查输入的用户输入是否包含“无效”字符，这意味着使用 userID 进行 sql 注入攻击。但是我的理解是他们使用的是[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)，这使得验证字符的输入有点奇怪。这可能只是对在其后端 LDAP 中构成有效用户 ID 的限制。

在您的情况下，用户输入了以下内容：

```
@^Y@.@o*.2,./2|pq{jvk@-1('@lvo)&1,.1(.1.+(@./* 
```

这个答案大部分是基于这个[论坛讨论](https://forums.oracle.com/thread/907243)。

我确实检查了 metalink.oracle.com，但没有找到论坛中列出的 SR。

# java - 在java中使用XML访问数据库（oracle）

> ID：14081533
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:12:05.483
> 
> 标签：java, xml, database, oracle

有没有办法使用**XML**从 java 访问数据库。我不想从我的 java 代码中触发查询。我开始了解 MLIP（消息级接口端口），但在互联网上并没有太多关于它的信息。

也得到了一个链接

[http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb01int.htm#g1054540](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb01int.htm#g1054540)

但不清楚。我的应用程序使用带有 MVC 架构的 jsp 和 servlet，无法将其迁移到 struts 和 hibernate 等框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:01:13.883

XML 是一种格式化数据的机制，因此可以在系统之间进行交换。虽然它现在用于其他用途，但它不是数据库访问协议。

如果您不想使用 JDBC，那么您必须选择其他协议。Oracle XML DB 支持 FTP、WebDAV 和通过 HTTP(S) 的直接访问。 [了解更多](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb22pro.htm#ADXDB2500)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:43:24.687

我不确定，但我认为[MyBatis](http://www.mybatis.org)（以前称为 iBatis）是您正在寻找的。它是一个通过扩展 XML 文件而不是 Java 代码中的 SQL 查询来简化访问数据库的框架。因此，只要您的查询参数和输出相同，您就可以操纵它们而无需更改 Java 代码，甚至无需重新编译它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T07:57:35.317

您可能会从下面的链接中得到答案。

[http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/11g/r1/prod/datamgmt/xmldb/xmldb.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/11g/r1/prod/datamgmt/xmldb/xmldb.htm)

# c++ - 为什么我会被核心转储？（CPP代码）

> ID：14081535
> 
> 赞同：0
> 
> 时间：2012-12-29T12:12:18.877
> 
> 标签：c++

```
string s;
cin>>s;
string::iterator it;
it=s.begin();
s.push_back('0');
s.erase(it);
cout<<s<<endl; 
```

每次我输入一个 4 个字母的字符串，例如“milk”，结果都是核心转储。其他多于或少于 4 个字母的单词也可以很好地工作。怎么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:19:30.847

`0`添加到末尾后尝试分配迭代器

```
string s;
cin>>s;
s.push_back('0');
string::iterator it;
it=s.begin();
s.erase(it);
cout<<s<<endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:32:03.813

修改字符串会使从字符串生成的任何迭代器无效。

从技术上讲，它们仅在字符串重新调整大小时才会失效。
但是，除非您采取明确的预防措施来防止字符串重新调整大小，否则您必须假定当您向字符串中添加增加大小的内容时，任何迭代器都无效。

见：www.sgi.com/tech/stl/basic_string.html

> 另请注意，根据 C++ 标准，basic_string 具有非常不寻常的迭代器失效语义。迭代器可以通过交换、保留、插入和擦除（以及等效于插入和/或擦除的功能，例如清除、调整大小、追加和替换）来无效。
> 
> 但是，此外，第一次调用任何非常量成员函数，包括非常量版本的 begin() 或 operator[]，可能会使迭代器无效。（这些迭代器无效规则的目的是为实现者提供更大的实现技术自由度。）在此实现中，begin()、end()、rbegin()、rend()、operator[]、c_str() 和 data( ) 不要使迭代器无效。

# c++ - “错误 C2059：语法错误：'if'”（Visual C++ 2010 Professional）

> ID：14081547
> 
> 赞同：2
> 
> 时间：2012-12-29T12:14:16.537
> 
> 标签：c++, syntax

在谷歌搜索之后，我发现我在“如果”之前遗漏了一些东西。据我所知没有。说真的，我在这里错过了什么？我在第 44 行有这个错误，我清楚地看到了所有的括号和分号。

```
#include "Entity.h"
#include "string.h"
#include "surface.h"
#include "stdlib.h"
#include "template.h"
#include "SDL.h"
#include "game.h"
#include "Ghosts.h"
#include "Character.h"
#include "Tile.h"

using namespace Tmpl8;

Surface* Map = new Surface("assets/map.png");
Surface* Spook = new Surface("assets/ghost.png");
Surface* Player = new Surface("assets/char.png");
Sprite* Play = 0;
Invader Invaders[55];
Character c;

Tile* myTile = new Tile(96,96); //Define new tile.
Tile* tileArray[3000/96][3280/96]; //Define size total tiles.

TileProperties myTileset[2] = {
    {true,  0,  0}, //Tile 0 = solid wall, graphics at 0,0
    {true, 96,  0} //Tile 1 = open space, graphics at 96,0
};

const int MAP_WD = 5;
const int MAP_HT = 5;

int map[MAP_WD * MAP_HT] = {
    1,1,1,1,1,
    1,1,0,0,1,
    1,0,0,0,1,
    1,0,1,0,1,
    1,1,1,1,1
};

const TileProperties& GetTile(int x, int y) {
    return myTileset[map[(y*MAP_HT) + x]];
}

if (GetTile(c.Xpos, c.Ypos).Wall) { //Here's the trouble.

} 
```

错误：

```
1>c:\nhtv\year 1\block b\pr2\f. gauntlet\game.cpp(44): error C2059: syntax error : 'if'
1>c:\nhtv\year 1\block b\pr2\f. gauntlet\game.cpp(44): error C2143: syntax error : missing ';' before '{'
1>c:\nhtv\year 1\block b\pr2\f. gauntlet\game.cpp(44): error C2447: '{' : missing function header (old-style formal list?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:16:04.337

“如果”在全局范围内。你必须把它放在一个方法/函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:21:10.393

您必须简单地将其`if`放入某个函数中。在 C/C++ 中，除了变量/数据结构/函数等之外，编写一些代码。函数之外的声明是非法的。

# c# - JsonSerializer 无法从 StreamReader 读取流

> ID：14081550
> 
> 赞同：0
> 
> 时间：2012-12-29T12:14:56.860
> 
> 标签：c#, json, stream, streamreader

我无法让*`DataContractJsonSerializer`*对象吞下我的流。当我在注释掉的行处于活动状态的情况下执行代码时，我会看到提供的文本（它是一个可解析的 JSON 对象），所以我知道流工作正常。

然而，出于某种原因，编译器抱怨说*`streamReader`*我试图把它塞进它的喉咙*`ReadObject`*不是*`Stream`*. 嗯，不是吗？！

> 参数 1：无法从 'System.IO.StreamReader' 转换为 'System.IO.Stream'

我错过了什么，我该如何解决？

```
using (StreamReader streamReader = new StreamReader(...))
{
  //String responseText = reader.ReadToEnd();
  MyThingy thingy = new MyThingy();
  DataContractJsonSerializer serializer 
    = new DataContractJsonSerializer(thingy.GetType());
  thingy = serializer.ReadObject(streamReader);
} 
```

我正在调整[这个例子](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.95%29.aspx)来处理**我的**流。我应该从不同的角度来处理它吗？如果是这样 - 如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:34:39.530

你可以试试这个：

```
using (StreamReader streamReader = new StreamReader(...))
{
  DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(MyThingy));
  MyThingy thingy = (MyThingy) serializer.ReadObject(streamReader.BaseStream);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:35:11.433

您正在尝试放入流的**阅读器**而不是实际的流。跳过`using`省略号后面隐藏的 和 任何内容（即，当您创建 的实例时作为参数输入的任何内容`StreamReader`），您可能可以将其放入`ReadObject`.

此外，您在读取数据时会遇到问题，因为`ReadObject`将返回一个类型的实例，`Object`您需要将其转换为`MyThingy`. 由于它是可空的（我假设），因此您不必键入 cast 而是 as-ify 它。

```
MyThingy thingy = new MyThingy();
DataContractJsonSerializer serializer 
  = new DataContractJsonSerializer(thingy.GetType());
Stream stream = ...;
thingy = serializer.ReadObject(stream) as MyThingy; 
```

您当然可以跳过倒数第二行并将流直接放入最后一行。

感谢@JohanLarsson（所有瑞典人都很棒，尤其是像我一样来自斯德哥尔摩的人）：
如果您不能或不想`StreamReader`在您的声明中省略`using`声明，我建议您查看一下`BaseStream`属性得到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T12:47:53.710

我一直在使用这个：

```
 // get stuff here
 String json = GetJSON();

 List<T> result;
 using (var ms = new MemoryStream(Encoding.Unicode.GetBytes(json)))
 {
      var serializer = new DataContractJsonSerializer(typeof(List<T>));
      result = (List<T>)serializer.ReadObject(ms);
 } 
```

# c# - 如何在 webmatrix 中识别 loing 成功与否？

> ID：14081551
> 
> 赞同：0
> 
> 时间：2012-12-29T12:15:05.833
> 
> 标签：c#, asp.net, webmatrix

我很新，`webmatrix`我已经为登录页面编写了代码，但我不知道我的登录是否成功？简而言之，如果登录成功，我如何切换下一页是我的代码

```
 @{
    var db=Database.Open("TestData");
    var UserName=Request.Form["UserName"];
    var Password=Request.Form["Password"];
    var error=false;

    if (IsPost){

   var loginquery="SELECT * FROM Test_tb where UserName=@0 and Password=@1";
   db.Execute(loginquery,UserName,Password);

   }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:10:39.437

试试这个：

```
var loginquery="SELECT Count(*) FROM Test_tb where UserName=@0 and Password=@1";
var success = (int)db.QueryValue(loginquery,UserName,Password); 
```

如果成功为0，则登录不成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T23:00:33.980

你必须更换

```
db.Execute(loginquery,UserName,Password); 
```

和

```
var userData = db.QuerySingle(loginquery,UserName,Password); 
```

并测试 userData 是否为空（登录不成功）或不为空（登录成功）

```
if (userData == null) {
    // login unsuccessfull
} else {
    // login successfull
} 
```

不过，请考虑在您的 WebMatrix 站点中实施安全性的更好方法。

WebMatrix 包括带有登录和注销方法的 WebSecurity 帮助程序和一个 Starter Site 模板，该模板可用于启动具有注册和登录功能的站点。这是关于使用模板的教程：[向 ASP.NET 网页 (Razor) 站点添加安全性和成员资格](http://www.asp.net/web-pages/tutorials/security/16-adding-security-and-membership)。

# php - php会递归执行自己吗？

> ID：14081566
> 
> 赞同：0
> 
> 时间：2012-12-29T12:17:03.227
> 
> 标签：php, apache, security

我有一个简单的问题。如果我编写了一个 php 文件，它会回显另一个正确的 php 语句，这会被执行吗？例如：

```
<html>
<body>
<?php echo "hello: "."<?php echo '1';?>"; ?>
</body>
</html> 
```

这会产生输出：`Hello: 1`？

我会说不，但如果我在 Apache 下运行它，“内部回声”会被“净化”为`<!--?php echo '1';?-->`，这让我相信它可以。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:28:51.133

感谢上帝，它没有。为了执行一个字符串，你应该（**不**）使用`eval()`：

```
<html>
<body>
<?php echo "hello: ".eval("echo '1';"); ?>
</body>
</html> 
```

# c# - C#如何从链接获取推文

> ID：14081567
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:17:02.870
> 
> 标签：c#, twitter

如主题所述，如何通过链接接收推文的图片、作者​​和内容？示例链接：[https](https://twitter.com/HonorioAranda/status/284190886341005312) ://twitter.com/HonorioAranda/status/284190886341005312 如何从此链接获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:23:03.313

Twitter 已经发布了一个 API。

看看它：

> [http://api.twitter.com/](http://api.twitter.com/)

我相信你会在那里找到一些有用的东西。例如[https://dev.twitter.com/docs/api/1/get/statuses/show/:id](https://dev.twitter.com/docs/api/1/get/statuses/show/:id)

只是适应它或使用它。它返回一个字符串。

# java - Spring mvc将url“myapp.com/Foo/12345/test-one”重写为“myapp.com/Foo/12345/test-one-ab”

> ID：14081570
> 
> 赞同：2
> 
> 时间：2012-12-29T12:17:22.260
> 
> 标签：java, spring, url, spring-mvc

我想使用普通的 spring mvc 控制器并使用路径变量请求映射。

我不想转发或重定向，只需更改用户看到的字符串。

```
@RequestMapping(value = "/Foo/{id}/*", method = RequestMethod.GET)
public ModelAndView getFoo(@PathVariable final String friendlyUrl) {
//how can I rewite the url that user sees ?
} 
```

**（与您在 stackoverflow 上更改现有问题的标题时的行为相同）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:21:31.780

如果您在 wireshark、firebug 或您看到的东西中查看流量，stackoverflow 会向最终 URL 发送 HTTP 301 Moved Permanently。你也可以这样做。

为此，您需要`HttpServletResponse`，您可以将其添加到方法签名中以将其注入。设置永久重定向：

```
String rightUrl = urlCompleter.complete(friendlyUrl);
response.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);
response.setHeader("Location", rightUrl); 
```

您需要自己实施的地方`urlCompleter`，例如。查看数据库条目表并找到正确的 url 组件。

# java - linux中文件的奇怪getName（）结果

> ID：14081572
> 
> 赞同：1
> 
> 时间：2012-12-29T12:17:30.107
> 
> 标签：java, linux, windows

我有一些从 UNC 路径读取名称的代码：

```
File f = new File(//fileshare/folder/file.txt)
System.out.println(f.getName()) 
```

在 Windows 上，这给出：

```
file.txt 
```

但在linux上它给出：

```
//fileshare/folder/file.txt 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:25:13.320

在我的系统（Ubuntu 12.04）上，它给出`file.txt`：

```
$ cat Test.java 
import java.io.File;
class Test {
  public static void main(String[] args) {
    File f = new File("//fileshare/folder/file.txt");
    System.out.println(f.getName());
  }
}
$ javac Test.java && java Test
file.txt 
```

`f.getPath()`return `/fileshare/folder/file.txt`，这表明多个斜杠减少为一个，这是 Unix 系统上的习惯（必需？）。

当然，UNC 路径在 Windows 之外的任何设备上都毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-10T08:29:54.540

尝试使用 Apache Commons 中的 org.apache.commons.io.FilenameUtils，getName() 方法应确保对完整路径的一致解析，无论您运行的平台如何。

# javascript - 复制 Excel 的“排序依据”、“然后依据”行为

> ID：14081573
> 
> 赞同：2
> 
> 时间：2012-12-29T12:17:36.180
> 
> 标签：javascript, arrays, sorting

复制 Excel 对 JS 的排序的最佳方法是什么？

假设我有一个包含项目的数组：

```
[6,0.75]
[6,0.81]
[9,0.75]
[4,0.20] 
```

按第一个键对它们进行排序很容易，但是如何复制“然后按”排序？Excel 将使用第一个键 desc 和第二个键 desc 吐出以下结果：

```
[9,0.75]
[6,0.81]
[6,0.75]
[4,0.20] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:12:57.710

对于给定的示例，有更简单的方法可以做到这一点，但在一般情况下，您可以将一个函数传递给 sort 方法，该方法将按指定顺序比较每对值。（[jsfiddle](http://jsfiddle.net/zKYj9/3/)）

```
var arr1 = [[6, 0.75], [6, 0.81], [9, 0.75], [4, 0.20]],
    arr2 = [[6, 0.75], [6, 0.81], [9, 0.75], [4, 0.20]],
people = [{name: 'Jim', age: 40}, {name: 'Sally', age: 35},
          {name: 'Tim', age: 20}, {name: 'Jim', age: 72}];

function orderedComparison(indices) {
    return function(a, b) {
        for (var i = 0; i < indices.length; i++) {
            if (a[indices[i]] > b[indices[i]]) return 1;
            if (a[indices[i]] < b[indices[i]]) return -1;
            // (if a == b, check next index)
        }
    }
}
// sort by first item in each pair, then 2nd
arr1.sort(orderedComparison([0, 1]));
console.log(arr1);
// sort by 2nd item then 1st
arr2.sort(orderedComparison([1, 0]));
console.log(arr2); 
people.sort(orderedComparison(['name', 'age']));
console.log(people);​ 
```

请注意，以下内容（首先按优先级较低的键然后按优先级较高的键排序）可能会起作用，但[不能保证](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)。

```
arr1.sort(function(a, b) {return a[1] - b[1]});
arr1.sort(function(a, b) {return a[0] - b[0]}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:43:02.040

您可以通过缩放每个子索引来复制此功能，以便它们的大小不会重叠并使用标准比较`Array.sort();`

这个 jsfiddle 演示了它：http: [//jsfiddle.net/Jd2ne/2/](http://jsfiddle.net/Jd2ne/2/)

提示：如果你不知道量级是多少，当你用科学计数法写出数字时，它是十的指数。即：6 = 6 * 10^0 => 6 的大小为零。

# ios - 在 Core Data 中使用表别名的 SQL SELECT

> ID：14081575
> 
> 赞同：1
> 
> 时间：2012-12-29T12:17:48.453
> 
> 标签：ios, sql, core-data, select

我想使用 Core Data 执行以下 SQL 查询：

```
SELECT t1.date, t1.amount + SUM(t2.amount) AS importantvalue
FROM specifictable AS t1, specifictable AS t2
WHERE t1.amount < 0 AND t2.amount < 0 AND t1.date IS NOT NULL AND t2.date IS NULL
GROUP BY t1.date, t1.amount; 
```

现在，看起来 CoreData 获取请求只能从单个实体获取。有没有办法在一个提取请求中完成整个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:17:22.957

我知道的最好方法是为您希望一起获取的实体创建一个抽象父实体。

因此，如果您有 - “肉类”、“蔬菜”和“水果”实体，您可以为“食物”创建父抽象实体，然后获取“食物”实体中的所有甜实体。这样，您将获得所有甜美的“肉类”、“蔬菜”和“水果”。

看这里： Apple 文档中的[实体继承](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMOM.html#//apple_ref/doc/uid/TP40002328-SW11)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:49:37.420

尼古拉，

Core Data 不是 SQL 系统。它有更原始的查询语言。虽然这看起来是赤字，但实际上并非如此。它迫使您将东西放入 RAM 并在那里而不是在数据库中进行复杂的计算。NSSet/NSMutableSet 操作非常快速有效。这也导致了更快的应用程序。（这在闪存很慢的 iOS 上尤为明显，因此，大获取是首选。）

在回答您的问题时，是的，提取请求在单个实体上运行。不，您不仅限于该实体的数据。一种是使用关键路径来遍历谓词语言中的关系。

Shannoga 的回答是解决您的问题的一种好方法。但我对您实际上试图用您的数据模型完成什么来判断使用实体继承是否是您的应用程序的正确路径知之甚少。可能不是。

来自服务器的 SQL 模式在 CD 应用程序中可能没有意义。查询语言和数据在 UI 中的使用方式都可能强制使用不同的结构。（例如，在 iOS 上使用 fetched results 控制器可能会迫使您以不同于在服务器上的方式对数据进行非规范化。）

实体继承，就像 OOP 中的继承一样，是一种僵硬的技术。很难改变。因此，我小心翼翼地使用它。当我使用它时，我在一些获取中获得了性能，并在其他计算中获得了一些简化。在其他时候，这是错误的答案，性能明智。

真正的答案是一个问题：你真正想要做什么？

安德鲁

# spine.js - Spine.js 模型 - 在 id 更新之前创建资源

> ID：14081576
> 
> 赞同：1
> 
> 时间：2012-12-29T12:17:51.873
> 
> 标签：spine.js

伙计们，

我有两个模型，`Notebook`和`Note`。笔记属于一个笔记本，笔记本有很多笔记。

在我的应用程序中，我有一个非常常见的 3 列视图，第一列列出笔记本，第二列列出与所选笔记本对应的笔记，第三列包含当前选定笔记的形式。

![在此处输入图像描述](../Images/68c56a6edee1fbedbd68bcf909780b9b.png)

在 Spine 中，我没有使用关系模块。每次用户选择笔记本时，我都会调用`get /notebooks/:id/notes`来获取所选笔记本对应的笔记并渲染笔记列表，当用户点击创建新笔记时，我将创建一个笔记模型的 Spine 对象与当前选定的 notebook_id 和打电话`save()`。它适用于现有的笔记本电脑。

但是当用户创建新笔记本时会出现问题。如果用户单击以在此新笔记本中创建新笔记，则在笔记本创建 ajax 完成之前，我没有数据库中的实际笔记本 ID。所以我想我必须等待`notebook create`ajax回调，在此之前我会阻止用户点击创建一个新的笔记。

但从 Spine 文档中，Alex 说：`Waiting for a server response goes against the whole concept of an asynchronous user interface`.

那么，这样做的正确方法是什么？我做对了吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:47:50.900

在某些情况下，不等待服务器响应要复杂得多。非阻塞 UI 何时值得额外的开发工作和代码复杂性由您决定。在这种情况下，当笔记本上的 id 更新时触发更新笔记上的参考 id 应该不是很困难，但是听起来您不希望在此之前尝试持久化笔记。不过，这在没有阻塞 UI 的情况下是可行的。

# php - 如何使用 id 在linkedin 中获取用户个人资料图片？

> ID：14081578
> 
> 赞同：1
> 
> 时间：2012-12-29T12:17:58.970
> 
> 标签：php, linkedin

是否有任何直接 url 可以使用linkedin id 或名称来获取图像。

在这里我得到图像，但它是缩略图[链接](http://m3.licdn.com/mpr/mprx/0_5R4EH7AXk7EbawaQF0ezHDhw6fZBaSOQbx2zHDrnJWubAdd6djHQQSkZHG4eSE0Ek4VNFEabeAMw) 是否可以获得实际图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:43:42.610

使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)获取内容，然后使用[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)将图像存储在服务器中。

如果这不起作用，请使用[php curl](http://php.net/manual/en/book.curl.php)

# assembly - 从汇编代码中获取反汇编字节

> ID：14081580
> 
> 赞同：0
> 
> 时间：2012-12-29T12:18:08.127
> 
> 标签：assembly, binary, hex, disassembly

我想知道是否有任何程序可以将我的汇编代码转换为反汇编字节，如下所示：

```
mov 0×01, %eax to B8 01 00 00 00 
```

有什么我看不到的技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:20:14.887

是的，这样的工具称为[assembler](http://en.wikipedia.org/wiki/Assembly_language#Assembler)。要获取原始（平面）机器代码，您可以使用`nasm`例如（假设为 x86）：

```
nasm -f bin foo.s -o foo.bin 
```

# javascript - 表格长度中的 jQuery 表格

> ID：14081583
> 
> 赞同：1
> 
> 时间：2012-12-29T12:18:24.883
> 
> 标签：javascript, jquery, html-table

我有两个 html 表：

```
<table id="tabA">
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>
    <table id="tabB">
      <tr>
        <td>&nbsp;</td>
      </tr>
    </table>
    </td>
  </tr>
</table> 
```

所以，如果我使用`$("#tabA tr").length`我收到 3 而不是 2。我只想计算 tabA 的长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:19:46.617

使用`$("#tabA > tbody > tr").length`. 您的选择器返回 tabA 中的所有 tr 元素，而不仅仅是它的直接后代。

这是[对子选择器的参考](https://developer.mozilla.org/en-US/docs/CSS/Child_selectors)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T12:22:25.210

这应该有效：

```
$("#tabA > tbody > tr").length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T12:19:57.240

您可以使用`direct child`选择器：

```
$("#tabA > tr").length 
```

或`children`方法：

```
$("#tabA").children('tr').length 
```

但是浏览器为元素添加`tbody`包装器，选择器和方法不返回正确的值，您可以编写代码：`tr``direct child``children`

```
$("#tabA > tbody > tr").length 
```

# jquery - jQuery如何在多个选择框中设置选定的值

> ID：14081592
> 
> 赞同：0
> 
> 时间：2012-12-29T12:19:39.500
> 
> 标签：jquery, drop-down-menu, always-on-top

我正在研究一个默认情况下不应该占用太多空间的多选框。因此它会在鼠标悬停时展开。

当用户选择了值时，我希望选择框成为所选值数量的大小。这可行，但问题是选定的值不会在选择框的顶部，第一个将始终显示在顶部，如果选定的值不在顶部，这将使选定的值隐藏。当用户离开选择框时，如何确保第一个选定值始终位于顶部？

我在这里发布了完整的示例。[http://jsfiddle.net/pNu2b/3/](http://jsfiddle.net/pNu2b/3/)

这是我正在使用的代码：

```
<select id="yearOfBirth" name="yearOfBirth" size="4" multiple="multiple" style="cursor:pointer;" id="yearOfBirth">option value="" style="background-color:#000000; color:#FFFFFF;" selected="selected">Year of birth</option>
<option value="1990">1990</option>
<option value="1991">1991</option>
<option value="1992">1992</option>
<option value="1993">1993</option>
<option value="1994">1994</option>
<option value="1995">1995</option>
<option value="1996">1996</option>
<option value="1997">1997</option>
<option value="1998">1998</option>
</select>

$(document).ready(function() {

$("#yearOfBirth").on('mouseenter',function(){
$(this).animate({"size": "10"}, "fast");
});
$("#yearOfBirth").on('mouseleave',function(){
var countSize = $("#yearOfBirth :selected").length;
$(this).animate({"size": countSize+1}, "fast");
});

}); 
```

只是为了澄清。如果选择 1997 和 1998。离开选择框时将显示 1990 和 1991。我想显示选定的值。就像图像中的右侧是正确的，左侧是错误的。 [http://tinypic.com/r/1ie7mc/6](http://tinypic.com/r/1ie7mc/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:25:39.157

请尝试代码...

```
 $(document).ready(function() {

      $("#yearOfBirth").on('mouseenter',function(){ 
      $(this).attr('size',10);
  });
  $("#yearOfBirth").on('mouseleave',function(){
     var countSize = $("#yearOfBirth :selected").length;
     $(this).attr('size' ,countSize+1 );
  });
 }); 
```

​</p>

# email - grails mail：在电子邮件中从数据库中呈现个人资料图片

> ID：14081597
> 
> 赞同：3
> 
> 时间：2012-12-29T12:20:05.633
> 
> 标签：email, grails, groovy, amazon-s3, imagesource

在 grails-mail 插件中，您需要在服务中定义内联图像数据，假设您使用的是来自服务的 grails 邮件。

你在你的 service.groovy 中这样做

```
inline 'header', 'image/jpg', new File('./web-app/images/mailAssets/alert_header_pre.png') 
```

在您的服务定义中，可以说：

```
def mailService
def contactUser(userName, email) {
    mailService.sendMail {
        multipart true
        to email
        from "marc.heidemann@live.de"
        subject "Hello from grails-mail"
        text "Hallo from grails-mail multipart text modus"
        html view:"/alert/test", model:[name:userName]
        inline 'header', 'image/jpg', new File('./web-app/images/mailAssets/alert_header_pre.png')
        inline 'footer', 'image/jpg', new File('./web-app/images/mailAssets/suchebottomre.gif')
    }
} 
```

目前，该应用正在渲染页脚和页眉图像，好的。

好的，现在这个项目的计划者的计划是在他们的电子邮件中呈现来自数据库（大约 15.000 个用户）的个人资料图片 - 如果没有在 service.groovy 中声明每个用户的个人资料图片，如何实现这一点？此外，这些图片存储在我的亚马逊 s3 应用程序之外。这可能是邮件插件的边界还是可以让它工作？如果不可能，您会为那些计划和创意人员提供什么作为替代方案？欢迎任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T14:32:40.367

1.  循环访问您的用户。
2.  [使用grails-aws-plugin](http://grails.org/plugin/aws)从 S3 获取相应的图片。
3.  将图片插入电子邮件
4.  使用邮件插件发送邮件

这样您就不必在服务中声明它。您可以从 S3 下载图片以将它们用作内嵌图片，也可以使用 S3 提供的 url。

要访问文件以进行内联使用：

```
def file = aws.s3().on(bucket).get(name, path) 
```

要获取公共网址：

```
def url = aws.s3().on(bucket).url(name, path) 
```

# sql - oracle唯一约束

> ID：14081602
> 
> 赞同：0
> 
> 时间：2012-12-29T12:20:25.603
> 
> 标签：sql, database, oracle11g

我正在尝试将一个表中的不同值插入到另一个表中。我的目标表有一个主键`studentid`，当我`id`从源执行不同的目标时，加载成功。当我尝试将一堆列从源加载到目标时，包括`student_id`，我收到一个错误*唯一约束被违反*。目标上只有一个约束，即 上的主键`studentid`。

我的查询看起来像这样（只是一个例子）

```
insert into target(studentid, age, schoolyear)
  select distinct id, age, 2012 from source 
```

为什么上面的查询返回一个错误，而下面的查询工作得很好

```
insert into target(studentid)
  select distinct id from source 
```

帮我解决这个问题。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:26:43.173

在您的**第一个查询中，您正在选择三列的不同组合，**即

```
select distinct id, age, 2012 from source 
```

不仅仅是独特的身份。在这种情况下，可能会出现重复 ID。例如，您的上述查询对此有效

```
id age
1   23
1   24
1   25
2   23
3   23 
```

但是在您的**第二个查询中，您只选择了不同的 id**

```
select distinct id from source 
```

所以这会像这样返回，

```
id
1
2
3 
```

在这种情况下，没有办法重复，您插入目标也不会失败。

如果您真的想在目标上使用约束进行批量插入，那么请使用任何聚合函数

```
select id, max(age), max(2012) group by id from source 
```

或者，如果您不想从源到目标丢失任何记录，则删除对目标的约束并将其插入。

希望这可以帮助

# c# - 实现通用 Web 服务的想法

> ID：14081604
> 
> 赞同：0
> 
> 时间：2012-12-29T12:20:33.823
> 
> 标签：c#, generic-programming

我正在考虑一个中/大型项目，它需要存储不同的数据类型并将它们呈现给不同的客户。

我现在苦苦挣扎的是，如何构建一个能够存储不同类型对象并在需要时查询它们的数据和服务层。

举个例子，考虑一个客户端-服务器应用程序，其中客户端只能读取每个单独的服务器的广播，现在想想花店和餐馆用智能手机向街上的人广播他们的数据的场景。

```
class SoCalledServer
{
    public AccessibleClientData Broadcast(ClientData broadcastMessage)
    {
        Broadcast(broadcastMessage)
    }
}

class RestaurantClient : AbstractClient
{
    public SomeGenericDataType menu;
    public RestaurantClient()
    {
        menu = new SomeGenericDataType<List>();
        menu.Add("Sushi");
        menu.Add("Fried potatoes");
    }

    public override void BeginBroadcast()
    {
        server.Broadcast(menu);
    }
}

class FlowerShopClient : AbstractClient
{
    public SomeGenericDataType flowersOnSale;
    public FlowerShopClient()
    {
        flowersOnSale = new SomeGenericDataType<List>();
        flowersOnSale.Add("Daisy");
        flowersOnSale.Add("Rose");
    }

    public void BeginBroadcast()
    {
        server.Broadcast(flowersOnSale);
    }
} 
```

在这个例子中，我有两种不同类型的数据（一种是餐厅的菜单，另一种是花店的鲜花），它们可以有不同的成员（例如，菜单有价格和成分，花店的数据有花名和描述、数量和/或价格等...），并且可以扩展此“客户”样本。

我应该如何为这种类型的应用程序建模？我应该使用什么样的数据库模式来存储身份不明的和各种类型的数据？我的服务器和客户端应用程序应该如何相互通信？最重要的是客户端应该如何获取广播的数据类型（来自泛型）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:28:16.020

该服务将如何处理这些数据？它只会保存它吗？它会用这些数据做一些计算吗？你的描述太笼统了。

假设您只想写入/保存/读取数据，您可以简单地保存字符串并让客户端自己进行解析。可以根据id查询。键/值和文档数据库就是这样工作的。

更重要的是，您应该考虑服务的职责应该是什么，并相应地设计内部结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:44:37.110

另一个想法是将它们反序列化为 XML 或 Json。一些提示：

```
 // get stuff here
        String json = GetJsonString(expression));

        List<T> result;
        using (var ms = new MemoryStream(Encoding.Unicode.GetBytes(json)))
        {
            var serializer = new DataContractJsonSerializer(typeof(List<T>));
            result = (List<T>)serializer.ReadObject(ms);
        } 
```

或 XML：http: [//msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

您可以将对象转换为 XML/Json 进行传输。然后，为了存储，在类未知的一侧将它们反序列化为匿名对象（没有指定的类）。

有了这个，即使类别未知，您也始终可以存储所有数据。无处不在，每时每刻。

# php - CodeIgniter MSSQL 编码问题（问号）

> ID：14081612
> 
> 赞同：1
> 
> 时间：2012-12-29T12:21:15.403
> 
> 标签：php, sql-server, codeigniter, encoding

我将 CodeIgniter 与 MSSQL 驱动程序 ( `$db['default']['dbdriver']`) 一起使用。

我正在连接到远程数据库。在主机名中，我有服务器的 IP。数据库排序规则是`SQL_Latin1_General_CP1_CI_AS`.

问题是当我获取数据时，希伯来语显示为问号。我尝试了各种字符集、iconv 和 mb 转换的组合，但似乎都不起作用。

我认为这是连接字符串中的内容，但是使用 MSSQL 驱动程序没有连接字符串。当我使用 ODBC 驱动程序尝试它时，它工作正常（ODBC 的设置在我的本地机器上工作，但不是从安装了 MSSQL 扩展的服务器上工作，因此我使用的是 MSSQL 驱动程序）。

任何帮助将不胜感激。

我已经切换到 PDO，现在有时我会得到：

```
Fatal error: Cannot access property started with '\0' in /var/www/clients/client1/web2/web/cliqa/ci/system/database/drivers/pdo/pdo_result.php on line 176 
```

我想它发生在连接失败时。有时它会正确显示（但带有问号），有时我会收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:37:40.947

**解决方案：**

被朋友解决了，不得不对服务器的配置做点什么：

```
cat /etc/freetds.conf 
```

创建一个新实例

```
[annoyingRemoteHostSrv]
    host = IP_ADDRESS
    port = 1433 
    tds version = 8.0
    client charset = UTF-8 
```

希望它可以帮助任何人;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:25:05.737

尽可能使用 Unicode 数据类型 - `nvarchar`. 因此，无论源代码页如何，服务器排序都不会影响您的数据。

# cocos2d-iphone - CCSprite setTexture 创建黑色方形 cocos2d (iOS)

> ID：14081613
> 
> 赞同：0
> 
> 时间：2012-12-29T12:21:20.450
> 
> 标签：cocos2d-iphone, textures, ccsprite

我正在尝试制作一个屏幕，在其中列出带有答案的问题。好的答案应该有绿色标记，不好的答案应该有红色标记。

创建屏幕时，我将所有标记设置为绿色或红色。当我从网站加载问题和答案时，我正在更改标记以表示正确/错误的答案。

我的问题是，我没有出现新的标记，而是在新制造商应该出现的地方收到了一个黑色方块。奇怪的是，如果我最初将标记设置为绿色，那么绿色标记仍然会出现，但红色的不是，反之亦然。

这是我的标记更改代码：

```
-(void) SetMarker:(int)ToColor {

switch (ToColor) {
    case Marker_Red: {
        [Marker_Sprite setTexture:[[CCSprite spriteWithFile:@"RedDot.png"] texture]];
            break;
    }
    case Marker_Green: {
        [Marker_Sprite setTexture:[[CCSprite spriteWithFile:@"GreenDot.png"] texture]];
        break;
    }
    default:
        break;
}
} 
```

我正在使用 Cocos2d 版本 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T18:51:05.937

我认为你应该`[Marker_Sprite visit];`在设置纹理后调用，以便精灵再次调用它的绘制方法并且纹理会改变。

要么使用动画，要么在 2 个纹理之间过渡。

另外......而不是`[[CCSprite spriteWithFile:@"GreenDot.png"] texture]`使用`[[CCTextureCache sharedTextureCache]addImage:@"GreenDot.png"];` 。这纯粹是为了优化:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:52:22.833

我实际上已经找到了这个问题的答案。似乎纹理更改最初是由主线程进行的，这导致了问题。

解决方案是将调用 setMarker 函数的函数的调用放入主线程，如下所示：

[self performSelectorOnMainThread:@selector(SetGoodAnswer) withObject:nil waitUntilDone:YES];

-（无效）SetGoodAnswer {

```
for (int i=1; i<5; i++) {
    [ButtonSprites[i] SetMarker:AnswerGood[i-1]];
} 
```

}

在此调用进行更改后，所有标记都正确显示。

# javascript - 按两个值对数组进行排序

> ID：14081616
> 
> 赞同：0
> 
> 时间：2012-12-29T12:21:57.397
> 
> 标签：javascript, arrays, sorting

> **可能重复：**
> [对对象数组进行排序的简单函数](https://stackoverflow.com/questions/8175093/simple-function-to-sort-an-array-of-objects)

编写脚本时，对数组进行排序时出现问题。我有一个对象数组：

```
[{gold: false, range: 1601}, {gold: true, range: 13}, {gold: false, range: 375}, {gold: true, range: 601} 
```

但它应该看起来像这样：

```
[{gold: true, range: 13}, {gold: true, range: 601}, {gold:false, range: 375}, {gold: false, range: 1601}] 
```

我想得到一个数组，其中的键按增加范围排序。但是如果有黄金键值是真的，那么他们是第一个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T12:32:09.993

使用这样的东西：

```
yourArray.sort(function(a, b){
    return a["gold"] == b["gold"] ? a["range"] - b["range"] : a["gold"] ? -1 : 1;
}); 
```

甚至这样：

```
yourArray.sort(function(a, b){
    return  b["gold"] - a["gold"] || a["range"] - b["range"];
}); 
```

第二种方法实际上真的很酷））您可以将此模式用于对象中的任意数量的字段，只需按它们的重要性对它们进行排序。如果某个字段应该按升序排序 - 比 a["..."] - b["...]，如果按降序排序 - 比 b["..."] - a["..."]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T12:28:38.873

尝试

```
var arr = [{gold: false, range: 1601}, {gold: true, range: 13}, {gold: false, range: 375}, {gold: true, range: 601}], 
    sorter = function(a, b) {
      if(a.gold && !b.gold) {return -1;}
      if(!a.gold && b.gold) {return 1;}
      return a.range - b.range;
    };

arr.sort(sorter); 
```

# android - Horizo ntalScrollView 以防止内存不足问题并在 android 的水平滚动中加载快速图像

> ID：14081623
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:22:40.170
> 
> 标签：android, android-layout, android-widget

我想将延迟加载功能添加到Horizo​​ntalScrollView，Linearlayout作为一个孩子，我正在添加到线性布局，我希望当图像视图失焦时，水平滚动视图无法加载，但当它进入可见区域时它会加载图像（一种延迟加载）。

我想要那个，因为附加到子视图的位图可以被回收并在子视图可见时再次创建位图，但问题是如何制作这样的自定义视图。我不能使用画廊视图，因为它不能解决我的目的我看到视图组具有 dispatchingViewVisibility 和 dispatchOnDraw 的功能，但不确定如何将其与 Horizo​​ntalScrollView 一起使用。？

我只想在水平滚动视图中加载快速图像，我以编程方式添加并防止 OOM 问题。

任何建议和帮助将不胜感激

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:59:44.877

您可以使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，或使用其他人创建的 Horizo​​ntalListView（例如，[此处](http://androidtrainningcenter.blogspot.co.il/2012/04/creating-horizontal-listview-in-android.html)、[此处](http://www.dev-smart.com/archives/34)和[此处](https://github.com/vieux/Android-Horizontal-ListView)）。

在适配器中，设置一个 asyncTask 来加载信息，如果您要转到一个被回收的新视图，请取消它拥有的 asyncTask 以便它启动一个新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:37:26.197

尝试使用 ViewPager。与 Horizo​​ntalScrollView 类似，但使用适配器作为子视图源。

# ruby - 如何从对象列表中形成一个数组

> ID：14081627
> 
> 赞同：0
> 
> 时间：2012-12-29T12:22:56.687
> 
> 标签：ruby

我对 ruby​​ 知之甚少，我的以下实现很有效，但我真的觉得这种方法有些限制

```
@surfaces = []
Surface.all.each do |surface|
    @surfaces << surface.name
end 
```

目的是提取每个表面对象的名称值并将它们形成一个数组，有人能告诉我这样做的聪明方法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:25:09.047

您可以使用`Surface.all.collect(&:name)`.

编辑：这相当于做这样的事情：

```
Surface.all.collect do |s|
  s.name
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:25:41.667

用于[`Enumerable#map`](http://apidock.com/ruby/Enumerable/map)通过元素的一对一映射将一个可枚举转换为另一个可枚举。[`Symbol#to_proc`](http://apidock.com/rails/Symbol/to_proc)当映射涉及对输入可枚举的每个元素简单地调用单个方法时，结合使用。

这两个是等价的：

```
@surfaces = Surface.all.map(&:name)

@surfaces = Surface.all.map do |surface|
  surface.name
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T19:39:02.023

仅供参考，收集别名并将其映射到 Ruby 中的相同内部模式。

这是堆栈流参考：[Ruby 中 map 和 collect 的区别？](https://stackoverflow.com/questions/5254732/ruby-difference-between-map-and-collect)

# iphone - NSCFCalendar toDate 返回 nil

> ID：14081631
> 
> 赞同：1
> 
> 时间：2012-12-29T12:23:39.893
> 
> 标签：iphone, ios, uitableview, nsdate

我正在解析一个日期，并希望将其转换为用户当前所在的时区。此外，我想显示一个倒计时，显示距离特定日期还有多少天。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *MyIdentifier = @"MyIdentifier";
    MyIdentifier = @"tblCellView";

    TableCellView *cell = (TableCellView *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if(cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"TableCellView" owner:self options:nil];
        cell = tblCell;
    }

    NSString *cellstring = [NSString stringWithFormat:@"%@", [[self.parseResults objectAtIndex:indexPath.row] objectForKey:@"title"]];
    NSString *cellnumber = [NSString stringWithFormat:@"%@", [[self.parseResults objectAtIndex:indexPath.row] objectForKey:@"number"]];

    NSString *epinumber = [cellnumber stringByReplacingOccurrencesOfString:@"-" withString:@""];

    NSString *celldescription = [NSString stringWithFormat:@"%@",[[self.parseResults objectAtIndex:indexPath.row] objectForKey:@"date"]];

    //NSLog(@"%@", celldescription);
    //celldescription returns a value

    NSString *finalString = [celldescription stringByReplacingOccurrencesOfString:@"EST" withString:@""];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];

    [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"EST"]];
    // this is imporant - we set our input date format to match our input string
    // if format doesn't match you'll get nil from your string, so be careful
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss"];
    NSDate *dateFromString = [[NSDate alloc] init];
    // voila!
    dateFromString = [dateFormatter dateFromString:finalString];

    NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];

    [dateFormatter1 setDateFormat:@"EEE, dd MMM yyyy HH:mm aaa"];

    NSString *dateDisplay = [dateFormatter1 stringFromDate:dateFromString];

    [dateFormatter release];

    NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]autorelease];

    int units = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

    NSDateComponents *components = [calendar components:units fromDate:[NSDate date] toDate:dateFromString options:0];
    NSString *string = [NSString stringWithFormat:@"%d", [components day]];

    if (indexPath.row == 0) {
        cell.cellText.textColor = [UIColor redColor];
    } else {
        cell.cellText.textColor = [UIColor blackColor];
    }

    [cell setLabelText:cellstring];
    [cell setDateText:dateDisplay];
    [cell setCountText:string];
    [cell setNumberText:epinumber];

    return cell;
} 
```

但我总是收到以下错误：

```
2012-12-29 13:10:23.139 spncountdown[87678:c07] *** -[__NSCFCalendar components:fromDate:toDate:options:]: toDate cannot be nil
I mean really, what do you think that operation is supposed to mean with a nil toDate?
An exception has been avoided for now.
A few of these errors are going to be reported with this complaint, then further violations will simply silently do whatever random thing results from the nil.
Here is the backtrace where this occurred this time (some frames may be missing due to compiler optimizations):
(
    0   CoreFoundation                      0x012c1c78 -[__NSCFCalendar components:fromDate:toDate:options:] + 200
    1   spncountdown                        0x000340bf -[SixthViewController convertWork] + 831
    2   spncountdown                        0x00033c14 -[SixthViewController tableView:cellForRowAtIndexPath:] + 820
    3   UIKit                               0x020988fb -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 412
    4   UIKit                               0x020989cf -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:] + 69
    5   UIKit                               0x020811bb -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1863
    6   UIKit                               0x02091b4b -[UITableView layoutSubviews] + 241
    7   UIKit                               0x0202e2dd -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 279
    8   libobjc.A.dylib                     0x030ad6b0 -[NSObject performSelector:withObject:] + 70
    9   QuartzCore                          0x01dcdfc0 -[CALayer layoutSublayers] + 240
    10  QuartzCore                          0x01dc233c _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 468
    11  QuartzCore                          0x01dc2150 _ZN2CA5Layer28layout_and_display_if_neededEPNS_11TransactionE + 26
    12  QuartzCore                          0x01d400bc _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 324
    13  QuartzCore                          0x01d41227 _ZN2CA11Transaction6commitEv + 395
    14  QuartzCore                          0x01de3b50 +[CATransaction flush] + 52
    15  UIKit                               0x01ff3edf _afterCACommitHandler + 132
    16  CoreFoundation                      0x0127aafe __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30
    17  CoreFoundation                      0x0127aa3d __CFRunLoopDoObservers + 381
    18  CoreFoundation                      0x012587c2 __CFRunLoopRun + 1106
    19  CoreFoundation                      0x01257f44 CFRunLoopRunSpecific + 276
    20  CoreFoundation                      0x01257e1b CFRunLoopRunInMode + 123
    21  GraphicsServices                    0x03b127e3 GSEventRunModal + 88
    22  GraphicsServices                    0x03b12668 GSEventRun + 104
    23  UIKit                               0x01fddffc UIApplicationMain + 1211
    24  spncountdown                        0x00003222 main + 130
    25  spncountdown                        0x00003155 start + 53
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:31:49.790

很明显，您的`dateFromString`is `nil`，这可能是因为日期格式问题。尝试打印出格式化的字符串并理解为什么`NSDateFormatter`没有正确解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T13:32:27.017

I fixed this issue for me. I hope this can help to anyone. My problem was with the code which is commented. I solved the problem with new written code which are below this commented code. Code is given as:

```
//    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    //    df.dateStyle = NSDateFormatterMediumStyle;
    //
    //    NSCalendar *calendar = [NSCalendar currentCalendar];
    //    int year   =    [[calendar components:NSYearCalendarUnit  fromDate:[datePickerView date]] year];
    //    int month  =    [[calendar components:NSMonthCalendarUnit fromDate:[datePickerView date]] month];
    //    int day    =    [[calendar components:NSDayCalendarUnit   fromDate:[datePickerView date]] day];
    //    

    NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[datePickerView date]];
    NSInteger day = [components day];
    NSInteger month = [components month];
    NSInteger year = [components year];

    date = [NSString stringWithFormat:@"%d-%d-%d",year,month, day];
    NSLog(@"Updated Date: %@",date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:31:43.223

作为您的`NSLog`打印件：`Wed, 27 Feb 2013 21:00:00`

使用此代码：

```
NSString *finalString=@"Wed, 27 Feb 2013 21:00:00";
NSDateFormatter *dateFormatter2=[NSDateFormatter new];
[dateFormatter2 setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss"];

NSLog(@"finalString: %@",[dateFormatter2 dateFromString:finalString]);

NSDate *dateFromString =[dateFormatter2 dateFromString:finalString];

[dateFormatter2 setDateFormat:@"dd MMM YYYY"];
NSLog(@"dateFromString  : %@",[dateFormatter2 stringFromDate:dateFromString]); 
```

输出：

```
finalString: 2013-02-27 15:30:00 +0000
dateFromString  : 27 Feb 2013 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-24T10:43:43.490

我解决了我的问题。在下面的示例中，我为“日期”传递了“零”。

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *comps = [gregorian components:NSWeekdayCalendarUnit fromDate:date]; 
```

# apache - 使用 post 方法 php 获取数据的问题

> ID：14081632
> 
> 赞同：1
> 
> 时间：2012-12-29T12:23:47.970
> 
> 标签：apache, cakephp, http-post, httprequest, postdata

我使用 cakephp 创建了一个网站，其中表单元素是动态的。我的表单中有大约 400 个单选按钮和文本。正确生成和提交的表单将在我的本地系统中产生所有价值。

当我在实时服务器上测试此功能时，我没有获得所有 400 单选按钮的数据，它在大约 250 左右后停止。如果我减少循环并在 200 以下进行，那么一切都很好。

在谷歌上搜索时，我在 php 中设置了发布数据大小，但它没有用。

如果需要在相关的 apache 服务器中进行任何类型的设置，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:57:57.453

得到解决方案..

我们需要将 max_input_vars 设置为默认 1000。这意味着我们只能在一个请求中发布 1000 个元素。您需要在 php.ini 文件中添加它

```
 max_input_vars = 3000 
```

这将允许从页面发布 3000 个元素。

# javascript - 自动更新 Chrome 扩展计数器

> ID：14081636
> 
> 赞同：2
> 
> 时间：2012-12-29T12:24:09.230
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在学习如何开发 Chrome 扩展程序。

我有一个[柜台](http://i.imgur.com/DZOm7.png)。

这是我的代码：

```
$(document).ready(function(){

 var i = 0;
  setInterval(function() {
   i++;
   chrome.browserAction.setBadgeText ( { text: i.toString() } );
   chrome.browserAction.setBadgeBackgroundColor({color: "#000"})

  }, 1000);

}) 
```

并且计数器仅在我单击该图标时才起作用，我如何让他始终更新，而不仅仅是在我单击它时。

[这](http://pastebin.com/aFBDStyX)是我的 manifest.json 文件

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:33:35.400

把这个放进去`background.js`

```
var i = 0;
window.setInterval(function() {
  chrome.browserAction.setBadgeText({text:String(i)});
  i++;
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T07:00:04.367

这是另一个使用递归而不是`SetInterval()`函数的工作变体。

参考[**YouTube 视频**](http://www.youtube.com/watch?v=i_qE1iAmjFg#t=7m46s)

### 对`manifest.json`文件所做的更改

消除`"persistent" : true`，因为[默认情况下](https://developer.chrome.com/extensions/background_pages.html)它们被赋予一个值`true`。

### 添加到的代码`weather.js`

我使用递归而不是，[这里](https://stackoverflow.com/questions/729921/settimeout-or-setinterval)`Setinterval()`有一些有趣的差异

```
//Counter Initialized to Zero
var i = 0;
(function updateCounter() {
    //Counter Incremented
    i++;
    //Counter is set to Badge
    chrome.browserAction.setBadgeText({
        text: i.toString()
    });
    //Used timeout with same interval
    setTimeout(updateCounter, 1000);
})();
//Badge Background color is set to black
$(document).ready(function () {
    chrome.browserAction.setBadgeBackgroundColor({
        color: "#000"
    })
}) 
```

# c++ - 事件处理：当接收者期望派生类时从基类发送事件

> ID：14081637
> 
> 赞同：1
> 
> 时间：2012-12-29T12:24:10.633
> 
> 标签：c++

这段代码将问题提炼为本质：

基础设施类：

```
struct EventReceiverBase {
    virtual ~EventReceiverBase() { }
};

template<typename T>
struct EventReceiver : public virtual EventReceiverBase {
    virtual void receiveEvent(T* pSender) = 0;
};

struct EventSender {
    EventReceiverBase* pReceiver;

    template<typename T>
    void sendEvent(T* pSender) {
        EventReceiver<T>* pCastedReceiver =
            dynamic_cast<EventReceiver<T>*>(pReceiver);
        // HERE IS THE PROBLEM
        // pCastedReceiver is null. T is BaseSender. The pointer
        // being casted is really of type EventReceiver<DerivedSender>*,
        // but it tries to cast to EventReceiver<BaseSender>*, and that
        // fails.
        pCastedReceiver->receiveEvent(pSender);
    }
}; 
```

用户类别：

```
struct BaseSender : public virtual EventSender {
    void f() {
        sendEvent(this);
    }
};
struct DerivedSender : public BaseSender { };

struct MyClass : public virtual EventReceiver<DerivedSender> {
    void receiveEvent(DerivedSender* pSender) { }
};

int main() {
    MyClass my;
    DerivedSender derivedSender;
    derivedSender.pReceiver = &my;
    derivedSender.f();
} 
```

我可以改写这个问题（没有双关语）以避免这个问题吗？我希望使用户类尽可能简单，同时尽可能接近这种方式公开事件发送和接收功能。

例如，我可以通过让 MyClass 也从 EventReceiver<BaseSender> 派生来“修复”它，但我真的很想避免这种情况，因为这意味着每个接收事件的类都需要额外的工作。

编辑：可执行粘贴： http: [//liveworkspace.org/code/4bm6OU](http://liveworkspace.org/code/4bm6OU) $13

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:41:40.257

您看到问题的原因与`f`函数在`BaseSender`: 中的位置有关，在下面的调用`sendEvent`中，`this`表示指向`BaseSender`. 本质上，下面的调用

```
void f() {
    sendEvent(this);
} 
```

是写这个的简短方法：

```
void f() {
    sendEvent<BaseSender>(this);
} 
```

移动`f`到`DerivedSender` [解决这个问题](http://ideone.com/LpM1d9)。

另一种选择是制作`BaseSender::f`模板：

```
template <typename T>
void f() {
    sendEvent<T>((T*)this);
} 
```

并这样称呼它：

```
derivedSender.f<DerivedSender>(); 
```

这看起来不是特别好，但可能是在现实世界`f`很大的情况下代码复制粘贴的解决方法。

另一种解决方案是制作`BaseSender`一个模板，如下所示：

```
template<typename T>
struct BaseSender : public virtual EventSender {
    void f() {
        sendEvent((T*)this);
    }
};
struct DerivedSender : public BaseSender<DerivedSender> {
}; 
```

这也有效（[链接到 ideone](http://ideone.com/Fc6Urh)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:30:05.457

这应该是个问题。pSender 将指向原始对象，除非您正在做一些非常奇怪的事情。

但是，您在 MyClass 中的 receiveEvent 应该接受一个`BaseSender *`对象，然后您必须将其强制转换为 DerivedSender （或者更好的是，仅使用基中定义的虚拟方法 - 这是您通常应该做的事情）

# php - 在多文件上传器中验证 JS 中的多图像格式

> ID：14081640
> 
> 赞同：1
> 
> 时间：2012-12-29T12:24:55.520
> 
> 标签：php, javascript, jquery, html

我想验证图像格式期间`submit`或`onchange`将由多个文件上传器浏览。

但是之后`Google`和之后我无法在`JS`脚本中找到多个图像浏览验证.. 这是`HTML`

```
<input type="file" id='uploadImg' name='uploadImg[]' multiple >
<input id="imgaeupload" value="Submit" type="submit" name='uploadImage'/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T12:57:19.893

文件上传元素的 Files 属性包含选定文件的列表，您可以遍历列表并验证每个文件：

```
 function validate() {
    var uploadImg = document.getElementById('uploadImg');
    //uploadImg.files: FileList
    for (var i = 0; i < uploadImg.files.length; i++) {
       var f = uploadImg.files[i];
       if (!endsWith(f.name, 'jpg') && !endsWith(f.name,'png')) {
           alert(f.name + " is not a valid file!");
           return false;
       } else {
           return true;

       }
    }
}

function endsWith(str, suffix) {
   return str.indexOf(suffix, str.length - suffix.length) !== -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-04T04:45:45.963

**在javascript中制作用于图像上传验证的通用函数**

1.  *在 HTML 文件中*

    ```
    &lt;input type="file" name="productImage_name[]" multiple="multiple" onchange="imageTest(this)"&gt; 
    ```

2.  *在 Java 脚本文件中*

    ```
     function imageTest(field){
        var regex =  /(\.jpg|\.jpeg|\.png|\.gif)$/i; // Check file type .jpg, .jpeg, .png, .gif etc.

     var target = window.location.protocol + "//" + window.location.host + "/" + window.location.pathname;
     // target = http:  //  localhost  /  KapdaSearch/V1/Development/public/company

     var fileUploadPath = target.replace(/public.*/, "public/storage/images/"); // Here 1st parameter is regular expression 2nd is replace string with
     // fileUploadPath = http://localhost/KapdaSearch/V1/Development/public/storage/images/

    //alert(field.value); // It gives you fake path of file because of some security reason like C:/fakepath/abc.png
    // We need only file name so use field.files[0].name instead of field.value

    // Image validation when you select multiple images at once
     for(var i=0; i<field.files.length; i++){
    var fieldName = field.files[i].name; // Guess file name = xyz.png   

    var imgPath = fileUploadPath+fieldName; 
    // http://localhost/KapdaSearch/V1/Development/public/storage/images/xvz.png
    // Check file type is correct or not
    if(fieldName.match(regex)){
        // Check file already exist or not
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open('HEAD', imgPath, false);
        xmlhttp.send();
        if (xmlhttp.status == "404") {
            field.setCustomValidity('');
        } else {
            field.setCustomValidity('This '+fieldName+' is already exist. Change file name than upload..');
        }
    }
    else{
        field.setCustomValidity('This '+fieldName+' is invalid..');
    }
    } //End for loop
    } // End function 
    ```

# c# - 我想通过代码创建一个.cs文件的dll

> ID：14081641
> 
> 赞同：-6
> 
> 时间：2012-12-29T12:25:08.243
> 
> 标签：c#

我想通过代码创建一个 .cs 文件的 dll，通过在 c# 中编程，任何人都可以帮助我如何做到这一点，这意味着我有两个类“Class1”和“Class2”，我想为 class1 创建 dll编程，所以我怎么可能请帮我做。

编辑：

```
ProcessStartInfo info = new ProcessStartInfo(@"C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.exe");

info.Arguments = @" /out:E:\pratik\file option\Class1.dll Class1.cs";
info.UseShellExecute = true;
Process.Start(info); 
Console.ReadLine(); 
```

我已使用此代码创建它正在运行的 dll，但我没有在给定路径上获取 dll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:40:50.240

您可以将[编译器用作服务 - CodeDomCompiler](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)功能来动态创建 dll/exe。

[如何使用 C# 编译器以编程方式编译代码](http://support.microsoft.com/kb/304655)

[使用 CodeDom 编译 - 关于 codeproject 的文章](http://www.codeproject.com/Articles/7119/Compiling-with-CodeDom)

另一种方法是编译文件[CSC.exe 命令行工具](http://msdn.microsoft.com/en-us/library/vstudio/78f4aasd.aspx)创建库。为此，您需要使用适当的参数启动新进程。

```
 Process.Start( Path.Combine(GetCscFolderLocation() ,"csc"),  "/target:library File1.cs File2.cs /reference: <reference 1> <reference2> ..."

 string GetCscFolderLocation()
 {
 // Getting CSC location
 } 
```

获取 CSC.exe 文件夹位置很棘手。按照[这个](https://stackoverflow.com/a/6660569/649524)得到一个想法。

以下示例在默认编辑器中启动文本文件。

```
Process.Start(@"C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.e‌​xe", @"/target:library /out:C:\test\test.dll c:\test\File.cs"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:30:21.847

去视觉工作室的新项目

根据需要选择类库名称

现在，把你需要的方法、属性放在那个类中

建造它。

将此引用添加到您的项目。

# android - 9patch 在 android 中无法正常工作

> ID：14081643
> 
> 赞同：0
> 
> 时间：2012-12-29T12:25:09.343
> 
> 标签：android, android-layout, nine-patch

我正在尝试向我的应用程序添加一个 9 补丁图。在我的应用程序图像中，我必须考虑两件事。一个是中间圆圈，另一个是图像页眉和页脚的两个说明。在不分散这些的情况下，我必须对图像进行拉伸。根据 9patch，我标记了拉伸区域，但它没有按我的预期工作。

我注意到当我按下 ctr 键并按下黑色方块时，它会变成红色。这是什么意思？

特此附上图片以了解这个想法。![9补丁图像](../Images/2340a18cab201dfb3967921c63030ece.png)

我想你可以注意到图像的左右边框。在那里，我在应该拉伸的地方做了黑色。但它不像我预期的那样。另一个问题是之前的 9patch 图像中的图像周围有一个白边框。

谁能告诉我在哪里做错了？

这是输出![在此处输入图像描述](../Images/22c0b051b3f26ae3be559f30c147ca1c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:43:29.637

1.  红色像素仍然是一个新功能，还不能工作。

2.  你把它保存为png还是jpg（必须是png）？您是否还记得将文件名更改为在扩展名前添加“.9”？

3.  尝试使用 sdk 中包含的 9-patch 工具。它还将向您显示拉伸后的外观预览。

4.  有很多关于如何处理 9-p​​atch 图像的教程。对于左侧和顶部部分，您选择要拉伸的部分，对于右侧和底部部分，您选择放置内容的位置（例如按钮中的文本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:33:27.773

在这方面工作了几天后，我只是想分享我的知识。9patch 图像实际上适用于按钮小图标、小标签等。当背景图像不包含大量颜色和设计时，它们适用于背景布局。在上述问题中，当使用 9patch 技术拉伸图像时，很难得到一个好的外观。

我的解决方案是针对这种情况使用不同的布局文件。当我们必须更改为手机完成的设计时，此技术用于平板电脑等大型显示器。以下是文件结构的排列方式。

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation 
```

任何对此感兴趣的人都可以从这个 [http://developer.android.com/guide/practices/screens_support.html获得更多信息](http://developer.android.com/guide/practices/screens_support.html)

# c# - 如何使用 C# 通过 WAVECOM 多端口 USB 调制解调器发送短信

> ID：14081645
> 
> 赞同：0
> 
> 时间：2012-12-29T12:25:15.207
> 
> 标签：c#

谁能告诉我如何`WAVECOM`使用 C# 通过多端口 USB 模式发送短信？我安装了驱动程序并连接了 sim 卡。但我不知道如何从中发送短信。一根A型USB线连接PC，另一端是B型USB连接器。我正在使用 TATA docomo sim 卡进行连接

```
[PC] ----------------------------------------------------> [MODEM]
== A-type USB output          B-type USB input 
```

# c# - NUnit：无法加载程序集 nunit.framework

> ID：14081646
> 
> 赞同：7
> 
> 时间：2012-12-29T12:25:19.307
> 
> 标签：c#, .net, visual-studio-2010, nunit

尝试执行引用 nunit.framework 的单元测试失败：

```
System.IO.FileNotFoundException: Could not load file or assembly
'nunit.framework, Version=2.5.10.11092, Culture=neutral,
PublicKeyToken=96d09a1eb7f44a77' or one of its dependencies. The
system cannot find the file specified. 
```

我的场景如下：
Visual Studio 2010 TFS
C# and .NET Framewok v4.0
NUnit 2.6.0.12051

详细解释：
我有一个测试项目，它引用了一些dll，一个是nunit.framework.dll。此 dll (nunit.framework.dll) 指向安装 nunit 2.6.0.12051 的文件夹。我通过 nunit-x86.exe 执行 NUnit（不是来自 Visual Studio），一旦启动，我就会加载测试项目（它是一个类库，dll）。Nunit 尝试加载，但出现上述错误。测试项目编译 好的，dll 生成正确。测试项目也针对 .NET Framework v4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-14T19:24:25.257

请尝试重定向配置文件中的程序集绑定：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="nunit.framework" publicKeyToken="96d09a1eb7f44a77" culture="neutral"/>
            <bindingRedirect oldVersion="0.0.0.0-2.6.0.12051" newVersion="2.6.0.12051"/>
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

您可能已经有上述记录。在这种情况下，只需调整“newVersion”值。

# objective-c - 在 XIB 文件上显示菜单

> ID：14081654
> 
> 赞同：1
> 
> 时间：2012-12-29T12:26:44.203
> 
> 标签：objective-c, cocoa, nsmenu, nswindowcontroller

我有 2 个 XIB 文件

1.  具有菜单的标准主菜单文件

2.  我用一个窗口向项目添加了另一个 XIB 文件我向 XIB 文件添加了一个菜单

我用以下代码显示 XIB 文件窗口

```
myController = [[NSWIndowController alloc]initWIthNibName......]];
[window showWindow]; 
```

我的问题：如何将菜单连接到 XIB/Window 以显示它。

1.  我如何使窗口模态。

# php - 在非对象 jQuery Wordpress 上调用成员函数 get_col()

> ID：14081655
> 
> 赞同：1
> 
> 时间：2012-12-29T12:26:45.253
> 
> 标签：php, jquery, ajax, wordpress

我的 WordPress 插件中有许多 php 文件，我遇到问题的主文件中有一个类，我可以在加载显示页面时从中调用一个方法，并且工作正常，但是当我尝试从我的 jQuery 帖子中的第三个文件我得到了问题标题中的错误。据说该错误在该类的文件中，但我看不到错误。我已确保`global $wpdb`已将其添加到每个函数中，因此第一个函数可以获取曲目名称，但如果我通过最后一个代码再次调用它作为测试，则不会。任何帮助，将不胜感激。

**类文件**

```
<?php
class SelectList
{
public $tableName;
public $driverTableName;
public $classTableName;
public $posTableName;
public $trackTableName;

public function __construct()
{
    global $wpdb;
     $tableName = $wpdb->prefix . "raceresults";
     $driverTableName = $wpdb->prefix . "driverData";
     $classTableName = $wpdb->prefix . "classData";
     $posTableName = $wpdb->prefix . "posData";
     $trackTableName = $wpdb->prefix . "trackData";
}

public function ShowTrack()
{
    global $wpdb;
    $category = '<option value="0">choose...</option>';
    $postids = $wpdb->get_col("SELECT trackName FROM wp_trackData;");
    foreach ($postids as $value) 
    {
        $category .= '<option value="' . $value . '">' . $value . '</option>' ;
    }
    return $category;
}

public function ShowDate($track)
{
    global $wpdb;
    $type = '<option value="0">choose...</option>';
    $postids2 = $wpdb->get_col("SELECT DISTINCT raceDate FROM wp_raceresults WHERE trackName = '" . $track . "';");
    foreach ($postids2 as $value2) 
    {
        $type .= "<option>" . $value2 . "</option>"; 
    }
    return $type;
}
}

$opt = new SelectList(); 
```

**jQuery 代码**

```
jQuery(document).ready(function()
{
    jQuery("select#kDate").attr("disabled","disabled");
    jQuery("select#kTrack").change(function()
    {
        jQuery("select#kDate").attr("disabled","disabled");
        jQuery("select#kDate").html("<option>wait...</option>");
        var id = jQuery("select#kTrack option:selected").attr('value');

        jQuery.post("<?php echo plugins_url("/race-results/getResults.php"); ?>", {id:id} , function(data)
        {
            jQuery("select#kDate").removeAttr("disabled");
            jQuery("select#kDate").html(data);
        })
        .success(function() { alert("success"); })
        .error(function(xhr, status, detail) { alert("error ("+status+") : " + detail); })
     });
  }); 
```

**获取结果**

```
<?php
include "popDrp.php";
echo $opt->ShowDate($_POST[id]);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:45:35.577

您的代码的问题在于您没有“引导”您的 wordpress，因此您在执行 ajax 请求时没有正确加载 wordpress 对象和类。一个简单（但不正确）的解决方案是在文件的开头添加`getResults.php`如下内容：

```
require_once( "relative/path/to/your/wp-load.php" ); 
```

但更好的是，阅读这篇文章：

*   [http://codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)
*   [http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress/](http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress/)

# objective-c - NSKeyValueChangeSetting 的目的是什么

> ID：14081659
> 
> 赞同：1
> 
> 时间：2012-12-29T12:27:02.497
> 
> 标签：objective-c, key-value-observing

在我的`observeValueForKeyPath:ofObject:change:context:`方法中，我对这些情况进行了切换：

```
case NSKeyValueChangeReplacement: /* replace an existing row */
case NSKeyValueChangeInsertion: /* insert a new row */
case NSKeyValueChangeRemoval: /* remove an existing row */ 
```

到现在为止还挺好。

我也必须处理`NSKeyValueChangeSetting`，但我不知道要编码什么。

```
case NSKeyValueChangeSetting: /* what about this one? */ 
```

那么它的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:30:43.050

从[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20002299-SW11)：

> 表示观察到的关键路径的值被设置为一个新值。当观察对象的属性以及指定一对一和对多关系的属性时，可能会发生这种变化。

基本上这是一个简单的旧“键值更改”式“通知”，可以这么说。

# c# - 在windows8中将鼠标悬停在gridviewitem上时如何更改其颜色

> ID：14081667
> 
> 赞同：0
> 
> 时间：2012-12-29T12:28:15.640
> 
> 标签：c#, xaml, gridview, windows-8

我创建了一个网格视图，当鼠标移到它上面时，背景颜色变为紫色，我怎样才能停止这种颜色变化行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:11:09.140

在 WPF 中，这很简单。您需要覆盖[SystemColors.HighlightBrushKey](https://stackoverflow.com/a/1278299/649524)。

在 Windows 8 Modern UI 应用程序中，这并不复杂。它涉及使用[视觉状态管理器](http://www.markermetro.com/2011/11/technical/windows-8-metro-style-apps-layout-and-orientation-management-with-xaml/)覆盖控制模板和视觉状态的变化。此[msdn 论坛问题](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/3faadbc2-4ec8-4235-959c-2c0bb4701814)中提供了解决方案。

# scala - 在Scala中，有时两个元素不应该变成一个元素时如何折叠？

> ID：14081671
> 
> 赞同：7
> 
> 时间：2012-12-29T12:28:34.070
> 
> 标签：scala, folding, fold

我有一个 Pair 列表，它表示具有开始索引和结束索引的行。类型是 (Int,Int) 是两个整数的元组。

例如，现在我希望将任何相互接触的线连接在一起。

List( (1,5),(6,10),(12,20) ) 应该转换为 List( (1,10), (12,20) ) 因为线 (1,5) 接触线 (6,10 ）。只有接触的线连接在一起成为一条线。

我的第一个想法是在列表中使用 foldleft，问题是 foldleft 需要将两个元素转换为一个元素，最终最终只输出一个 (Int,Int)。

第二个想法是我编写的递归解决方案，但这似乎不是最好或最简单的想法。我们采用两个元素，有时输出一个或两个元素的想法似乎应该应用于许多情况，就像 foldleft 一样。

有没有解决这个问题的通用方法或模式或库？

* * *

一条线在一维平面上，它不是 ax,y 点。(Int,Int) 是一维平面上的起点和终点。

明确触摸的定义。列表中没有一行重叠，这是一个前提条件，即 (1, 3) 和 (2, 4) 不能存在于列表中，因为它们重叠。

(1,3), (4,5) 可以存在于列表中，因为它们不重叠。

(1,3), (4,5) 确实接触，因为 3 和 4 之间的距离正好为 1。

对于问题 ((1, 5), (6, 10), (6, 12), (13, 15)) 中给出的列表，这是一个无效列表，因为 (6, 10), (6, 12 ) 重叠。

* * *

为了您的信息，这是我在这里写这个问题之前的工作代码，您可以看到它不是很好。我只是在使用我构建递归函数的知识来构建结果并返回结果。

```
 private def joinAtoB(a: LineLike, b: LineLike): LineLike = {
    newFunction(a.start, b.end)
  }

  private def joinTouchingLines(a: LineLike, b: LineLike): Option[LineLike] = {
    if ((a.end + 1) == b.start)
      Some(joinAtoB(a, b))
    else
      None
  }

  @tailrec
  def joinLinesRec(list: List[LineLike], result: List[LineLike] = List[LineLike]())
                     :List[LineLike] = {
    list match {
      case Nil => result
      case item :: Nil => item :: result

      case first :: second :: rest => {
        val joined = joinTouchingLines(first, second)
        val prepend = joined match {
          case None => List(first, second)
          case Some(joinedItem) => List(joinedItem)
        }
        joinLinesRec(rest, prepend ::: result)
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T13:20:38.200

您可以使用`foldRight`而不是`foldLeft`与模仿 cons ( `::`) 的二进制函数一起使用，除非相邻元素接触：

```
def combine(x: (Int, Int), lst: List[(Int, Int)]) = (x, lst) match {
  case (_, Nil) => List(x)
  case ((a, b), (c, d) :: rest) => if (c == b+1)
                                     (a, d) :: rest
                                   else
                                     (a, b) :: lst
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T13:16:27.823

使用 foldLeft 执行此操作很简单，但如果您在我们重叠或接触时取出规则部分，则更简单：

```
def touching(fp: (Int, Int), sp: (Int, Int)) = 
  if (fp._2 >= sp._1) sys.error("Overlap " + fp + " and " + sp) 
  else if (fp._2 == sp._1 - 1) true 
  else false 
```

然后，您可以决定何时要追加以及何时要扩展最后一对：

```
list.foldLeft(List[(Int,Int)]()){
  (l, p) => 
    if (l.isEmpty || !touching(l.head, p)) p :: l
    else (l.head._1, p._2) :: l.tail
}.reverse 
```

# yii - Yii CDbCriteria：如何使用 AR 从“3rd”表中获取价值？

> ID：14081681
> 
> 赞同：0
> 
> 时间：2012-12-29T12:29:32.707
> 
> 标签：yii

我有表格：司机、司机谈判、基地谈判和团队

在 DriverController 模型中，我想获取驱动程序正在与之协商的 team_id（位于 base_negotiation 中）。

在驱动程序模型中，我有：

```
'driverNegotiation' => array(self::HAS_ONE, 'DriverNegotiation', 'driver_id') 
```

在 DriverNegotiation 中：

```
'baseNegotiation' => array(self::BELONGS_TO, 'BaseNegotiation', 'base_negotiation_id') 
```

在 DriverController 我正在构建类似的东西：

```
$criteria=new CDbCriteria(array(
    'condition' => 'baseNegotiation.team_id=13',
    'with' => 'driverNegotiation',
    'together' => true,

)); 
```

但我得到：

```
Column not found: 1054 Unknown column 'baseNegotiation.team_id' in 'where clause'. 
The SQL statement executed was: SELECT COUNT(DISTINCT `t`.`id`) FROM `driver` `t` 
LEFT OUTER JOIN `driver_negotiation` `driverNegotiation` ON 
(`driverNegotiation`.`driver_id`=`t`.`id`) WHERE (baseNegotiation.team_id=13) 
```

因此，我可以从 driver_nagotiation 表中获取所有内容，但不能从一张表中获取任何内容。

我需要使用 join 来获得正确的东西还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T15:59:35.420

```
'with' => 'driverNegotiation.baseNegotiation' 
```

这成功了。

# c# - 使用其他名称模拟 Exe

> ID：14081683
> 
> 赞同：0
> 
> 时间：2012-12-29T12:29:39.957
> 
> 标签：c#, process, window, exe

我有一个名为 mct.exe 的 exe

现有的 c# 应用程序之一每次都会检查 mct.exe 的实例，如果实例为零，它将触发 exe，如果有任何 mct.exe 已经在运行，它将不会触发 exe，即不超过一个 mct。 exe 将在给定时间运行。这是因为 mct.exe 会占用很高的 cpu 使用率，如果有多个 mct.exe 实例长时间运行，系统可能会变得无响应。

现在，我需要将相同的 mct.exe 用于同一服务器上的另一个应用程序，并且我无法编辑现有应用程序来检查 mct.exe 的两个实例。那么有没有可能我可以将 mct.exe 模拟为另一个名为 mockmct.exe 的 exe 并将 mockmct.exe 用于我的第二个应用程序？

我也明白 mockmct.exe 也将占用与 mct.exe 相同数量的 cpu，但这没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:33:33.943

你不能把看门狗作为最简单的解决方案吗？现在，如果你不能，它是否以管理员身份运行？如果不是，那么它应该只检查当前用户的进程 - 这样你就可以作为另一个用户运行你的第二个 mct.exe 并且它应该对看门狗不可见......

# javascript - 在Javascript中找出元素的n

> ID：14081686
> 
> 赞同：2
> 
> 时间：2012-12-29T12:30:16.327
> 
> 标签：javascript, jquery, count, integer

我有一堆div。

```
<div id="container">

  <div><a>One</a></div>
  <div><a>Two</a></div>
  <div><a>Three</a></div>
  <div><a>Four</a></div>

</div> 
```

我必须使用 Javascript 和 jQuery 找出在哪个 div 中单击了**a**元素。

必须返回一个**整数**，基于单击**a**元素的*div* （第*一个、第二个、第三个或第四个）*。

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:35:40.580

```
var divs = $('#container').on('click', 'a', function() {
   alert(divs.index(this.parentNode));
}).children('div'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:33:50.460

您应该使用从[`.parent()`](http://api.jquery.com/parent)中获取，然后使用获取其兄弟姐妹中的位置..`div``a`[`.index()`](http://api.jquery.com/index)

```
$('#container a').click(function(){
   var self = $(this),
       clickedDiv = self.parent(),
       index = clickedDiv.index();

   alert(index); // first is 0, second is 1 etc...
}); 
```

* * *

不太冗长的语法是

```
$('#container a').click(function(){
   var index = $(this).parent().index();

   alert(index); // first is 0, second is 1 etc...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T18:37:33.110

本机 JavaScript 实现使用[`Array.prototype.forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach),[`.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)和[`.addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener).

`<a>`如果每人只有一个`<div>`

```
Array.prototype.forEach.call( // for each
    document.querySelectorAll('#container a'), // <a> in #container
    function (elm, idx, arr) { // get it's info (index etc.) then
        elm.addEventListener('click', function () {console.log(idx);}, false);
            // make clicking it log it's index
    }
); 
```

或者如果有很多`<a>`s`<div>`

```
Array.prototype.forEach.call( // for each
    document.querySelectorAll('#container div'), // <div> in #container
    function (elm, idx, arr) { // get it's info (index etc.) then
        Array.prototype.forEach.call( // loop over each
            elm.querySelectorAll('a'), // <a> in that <div>
            function (a_elm, a_idx, a_arr) { // and
                a_elm.addEventListener('click', function () {console.log(idx);}, false);
                    // make clicking it log the index of the <div>
            }
        );
    }
); 
```

注意记录的索引将从`0`1 日开始。***

# android - Android ADT 插件错误：main.xml:/ 为零

> ID：14081690
> 
> 赞同：2
> 
> 时间：2012-12-29T12:30:30.683
> 
> 标签：android, eclipse, adt

我是这个网站的新手，所以请原谅我的格式问题。我的问题是，当我尝试在我的 xml 文档的图形布局选项卡中向我的 xml TableLayout 添加一行时，我在 eclipse 中遇到了这个错误。我的错误如下

```
Exception raised during rendering: / by zero
Exception details are logged in Window > Show View > Error Log 
```

这是我的 XML 代码。出于某种原因，即使在 main.xml 文件中自动添加了一行，图形布局也会显示错误。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tableLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:padding="5dp"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

</TableLayout> 
```

如果您对我做错了什么有任何想法，或者您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T12:34:45.460

请`android:stretchColumns="*"`从 TableLayout 中删除。

或者请提供任何数字而不是**“*”，**例如`android:stretchColumns="2"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T21:39:58.163

我偶然发现了同样的问题，我想我们都在关注 Deitel 的“Android for Programmers”一书（特别是，这个问题起源于第 127 页）。我决定放弃它并寻找其他地方。这本书明确说将 android:stretchColumns 设置为“*”，几段后他们要求您将行添加到 TableLayout。他们测试过吗？

# c++ - 如何通过编写编辑器来学习 C++？

> ID：14081691
> 
> 赞同：1
> 
> 时间：2012-12-29T12:30:35.403
> 
> 标签：c++, open-source, scintilla

我想参与一些开源项目。

我知道一点 c++，但我还没有用它创建一个项目：我想更好地学习 c++。为了参与一些开源项目，我想我需要熟悉 C++，因为开源项目的代码相当复杂。

所以我打算创建一个简单的编辑器作为学习练习，比如记事本++，但要简单得多。

有没有像图书馆一样[闪烁](http://www.scintilla.org/)的图书馆？我在谷歌搜索但没有找到任何东西。

如果我走错了方向，有人会告诉我学习 C++ 的更好方法吗？我不是在寻找“灵丹妙药”，而是在寻找要学习的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:48:34.973

所以，开始写一个简单的编辑器。如果您具备文件处理和 GUI 的基础知识，这并不容易，但也不是很困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:59:13.913

你的方法非常好。尝试通过着手一个项目来学习一门语言是一个绝妙的主意。请记住，一个项目，即使是像文本编辑器这样的“简单”项目，也可能比您一开始所期望的要大得多，并且要准备好做出很多错误的开始并不得不重写大量代码。毕竟，这就是锻炼的意义。

我不清楚的是为什么您对闪烁不满意但同时正在寻找替代方案。我建议您开始使用它并初步了解“完整”项目的外观（对于“完整”的某些定义），然后您将能够更好地了解闪烁或闪烁的优点和缺点其他各种图书馆。

在学习 C++ 方面，既然你在征求建议，我可以推荐一本书：[A. Koening 和 B. Moo 的《Accelerated C++》](http://www.acceleratedcpp.com/)。

# php - 卷曲停止工作

> ID：14081696
> 
> 赞同：5
> 
> 时间：2012-12-29T12:30:50.820
> 
> 标签：php, curl

我想从列表中搜索一些关于单词的链接。所以我正在制作一个脚本：

```
//html code here.
<?
if (array_key_exists('form_action', $_POST)){
$pel=$_POST['url'];
$toplist=file_get_contents($pel);
$listgrabbing=explode("\r\n",$toplist);
foreach($listgrabbing as $item)
{    

$useragent="Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.1; .NET CLR 1.1.4322; Alexa Toolbar; .NET CLR 2.0.50727)";
$urlto=$item;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $urlto);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
curl_setopt($ch, CURLOPT_COOKIEJAR, "COOKIE.txt"); 
curl_setopt($ch, CURLOPT_COOKIEFILE, "COOKIE.txt"); 
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,10); 
$buffer = curl_exec($ch);
$po = strpos($buffer,"article");
if ($po===false)
{
echo ($item."---Word didn't found!");
echo "<br>";
}
else {
echo ($item."---Word Found!");
echo "<br>";
}
}
}
?> 
```

它工作正常。但有时脚本会突然停止工作。我不知道为什么。可能会进入一个没有响应的站点。但为此我使用了`CURLOPT_CONNECTTIMEOUT`. 但我没有发现脚本有什么问题。

**实际上我的问题是，脚本在运行时突然停止。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T15:22:45.143

尝试这些`CURLOPT_LOW_SPEED_TIME`选项`CURLOPT_LOW_SPEED_LIMIT`

```
// the download speed must be at least 1 byte per second
curl_setopt(CURLOPT_LOW_SPEED_LIMIT, 1);
// if the download speed is below 1 byte per second for
// more than 30 seconds curl will give up
curl_setopt(CURLOPT_LOW_SPEED_TIME, 30); 
```

如果对于给定的超时，下载速率低于给定的阈值，这将防止 curl 在慢速或死连接上“挂起”。达到超时时，您可以重试或跳过网址：

```
// skips the url if errors on download
$buffer = curl_exec($ch);
if ($buffer === FALSE) { 
    echo curl_error($ch);
    continue;
} 
```

“停止工作”可能有几个原因。最简单的是，远程服务器在没有发送 TCP FIN 的响应期间崩溃了。（我在野外见过这个）。所以底层的 TCP 连接不会关闭，curl 会永远等待剩余的字节。

此外，在建立连接后在传输期间阻止端口的防火墙规则也可能是原因。不太可能，但在野外也见过。

我可以想象的另一个原因是，远程服务器计算了错误的“Content-Length”HTTP 标头。与 HTTP/1.1 的“连接：保持活动”一起，这可能会使 curl 在等待永远不会发送的剩余字节时“挂起”。为了防止这种情况，您应该明确使用标题“连接：关闭”。这可以按如下方式完成：

```
curl_setopt(CURLOPT_HTTPHEADER, array('Connection: close')); 
```

但是，我的建议只是防止您的脚本挂起的解决方法。如果您想了解curl 挂起的**原因**，您必须跟踪网络流量。你可以使用 Wireshark。

# javascript - 使用服务器端 jQuery 的 Java EE Web App？

> ID：14081697
> 
> 赞同：0
> 
> 时间：2012-12-29T12:30:51.620
> 
> 标签：javascript, jquery, jakarta-ee, serverside-javascript

我有一个 Java EE Web 应用程序，我想使用服务器端 jQuery 来处理一些 HTML。这是过程 -

1.  用户安装了我写的 chrome 扩展
2.  用户在浏览器上访问网页
3.  chrome 扩展选择页面上的一个元素并将其放入一个字符串中。通过元素，我的意思是`<div>`具有许多子元素（可能有自己的子元素等......）
4.  然后，chrome 扩展通过 AJAX 将 HTML 字符串发送到服务器
5.  然后在服务器上，我想使用 jQuery 处理这个 HTML。

我可以在客户端的浏览器中进行处理，但我选择将其发送到服务器，因为我不希望每个人都可以使用 javascript/jquery 代码。

那么，是否可以在服务器上使用 jQuery 来处理 HTML？

# javascript - 更改此 Button 脚本中的链接功能

> ID：14081700
> 
> 赞同：1
> 
> 时间：2012-12-29T12:31:12.923
> 
> 标签：javascript, button, hyperlink, mouseover

嗨，我是新来的，也许有人可以帮助我。是否可以更改此 Button javascript 以便打开链接页面而不在新窗口中？

**头**

```
<style>

.thisclass{background-color:transparent}

</style>
<script language="javascript">

function change(color){
var el=event.srcElement
if (el.tagName=="INPUT"&&el.type=="button")
event.srcElement.style.backgroundColor=color
}

function jumpto2(url){
window.location=url
}
</script> 
```

**身体**

```
<form onMouseOver="change('transparent')" onMouseOut="change('transparent')"><p>
<input type="button" name="Button" class="thisclass" value="Ken Videos" onMouseOver="this.style.color='#0000FF'" 
onMouseOut="this.style.color='#000000'" onMouseDown="this.style.color='#FFFFFF'" style="color: #000000; font-family: 
Arial; font-weight: bold; font-size: 12pt; width: 156; height: 30; border: 4px double #FFFFFF" onClick="fenster=window.open('ger_mitglieder-videos-ken.htm', 
'fenster','toolbar=no,status=no,menubar=no,scrollbars=yes,width=900,height=650, left = 50, top = 100')"></p>
</form> 
```

# python - 使用 python 解析非常大的 xml 文件时出现问题

> ID：14081701
> 
> 赞同：2
> 
> 时间：2012-12-29T12:31:16.597
> 
> 标签：python, xml-parsing

我有一个大的 xml 文件（大约 84MB），格式如下：

```
<books>
    <book>...</book>
    ....
    <book>...</book>
</books> 
```

我的目标是提取每一本书并获得它的属性。我试图解析它（就像我对其他 xml 文件所做的那样），如下所示：

```
from xml.dom.minidom import parse, parseString

fd = "myfile.xml"
parser = parse(fd)
## other python code here 
```

但代码似乎在解析指令中失败。为什么会发生这种情况，我该如何解决？

我应该指出，该文件可能包含希腊语、西班牙语和阿拉伯语字符。

这是我在 ipython 中得到的输出：

```
In [2]: fd = "myfile.xml"

In [3]: parser = parse(fd)
Killed 
```

我想指出计算机在执行过程中冻结，所以这可能与内存消耗有关，如下所述。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T13:09:02.580

尝试使用更易于使用的[lxml 。](http://lxml.de/)

```
#!/usr/bin/env python
from lxml import etree

with open("myfile.xml") as fp:
    tree = etree.parse(fp)
    root = tree.getroot()

    print root.tag

    for book in root:
        print book.text 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T13:49:59.683

我强烈建议在这里使用 SAX 解析器。我不建议`minidom`在任何大于几兆字节的 XML 文档上使用。我已经看到它使用大约 400MB 的 RAM 读取大小约为 10MB 的 XML 文档。我怀疑您遇到的问题是由`minidom`请求过多的内存引起的。

Python 带有一个 XML SAX 解析器。要使用它，请执行以下操作。

```
from xml.sax.handlers import ContentHandler
from xml.sax import parse

class MyContentHandler(ContentHandler):
    # override various ContentHandler methods as needed...

handler = MyContentHandler()
parse("mydata.xml", handler) 
```

您的`ContentHandler`子类将覆盖[ContentHandler](http://docs.python.org/2/library/xml.sax.handler.html#contenthandler-objects)中的各种方法（例如`startElement`、`startElementNS`、或。这些处理由 SAX 解析器在读取您的 XML 文档时生成的事件`endElement`。`endElementNS``characters`

SAX 是一种比 DOM 更“低级”的 XML 处理方式。除了从文档中提取相关数据外，您的 ContentHandler 还需要跟踪它当前包含的元素。然而，从好的方面来说，由于 SAX 解析器不会将整个文档保存在内存中，它们可以处理任何大小的 XML 文档，包括那些比您的更大的文档。

我没有尝试在这种大小的 XML 文档上使用其他 DOM 解析器，例如 lxml，但我怀疑 lxml 仍然需要相当长的时间并使用大量内存来解析您的 XML 文档。如果每次运行代码时都必须等待它读取 84MB XML 文档，这可能会减慢您的开发速度。

最后，我不相信你提到的希腊语、西班牙语和阿拉伯语字符会引起问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T13:03:48.653

有 2 种 XML 解析器（这适用于任何语言）。

1.  DOM 解析（这是您正在使用的）。在这种类型中，整个 XML 文件被读入内存结构，然后通过方法访问。

2.  SAX 解析。这是一种解析算法，它以逐步方式读取每段 XML。这种技术可以让您更好地检测和处理错误。

一般来说，DOM 比 SAX 更容易，因为很多细节都由它的本地方法处理。

SAX 更具挑战性，因为您必须编写 SAX 解析“运行”在 XML 文档遍历期间的方法。

# iphone - 使用自定义视图或 UIImageView

> ID：14081704
> 
> 赞同：0
> 
> 时间：2012-12-29T12:31:27.433
> 
> 标签：iphone, objective-c, ios, uiview, uinavigationcontroller

我正在考虑仅使用图像视图或子类 UIView 并覆盖 drawRect 方法。视图应该看起来像这样 ![在此处输入图像描述](../Images/4dba1bf65e3766e351bda50335c64a85.png) 值得子类化还是应该只使用图像？

最后，表格的每一行都包含一个标签和一个文本字段。它是具有注册进度所需数据的公式。

我的第二个问题是，如何禁用 NavigationControllers Navbar 的 titleView 动画？如果 titleView 动画，即使它里面的图像相同，它看起来有点奇怪。

感谢每一个广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:49:46.190

这看起来像某种表格，所以最合适的是分组的`UITableView`. 要使单元格看起来像您的图像，您可以将`backgroundView`属性设置为`UIImageView`具有可拉伸的`UIImage`。

一般来说，您应该尽可能使用可拉伸`UIImage`的，而不是进行自定义绘图。如果你绘制每个视图，你绘制的每个视图都需要它自己的后备存储（每个像素 4 个字节），即使绘制的内容是相同的。多次使用同一个图像只需要该图像的内存一次。如果您使用可拉伸的图像，您可以节省更多内存。

自定义绘图只能用于无法使用图像创建的事物或在某些特殊情况下出于性能原因。将其用于自定义背景总是很浪费。

# javascript - TypeError：字符串不是函数

> ID：14081724
> 
> 赞同：3
> 
> 时间：2012-12-29T12:33:38.217
> 
> 标签：javascript, string, object, instantiation, typeerror

在下面的代码中，`TypeError: string is not a function`第 30 行`var myColour = new colour(255,255,255);`被抛出。任何人都可以看到代码有什么问题。非常感谢。

```
var bodies = [];
var orbits = [];
var colours = [
    new colour(45, 45, 45),
    new colour(255, 0, 0),
    new colour(0, 157, 255),
    new colour(77, 250, 81),
    new colour(255, 247, 0)
];

function colour(red, green, blue)
{
    this.red = red;
    this.green = green;
    this.blue = blue;
};

window.onload = function() {
    var c = document.getElementById("theCanvas");
    var ctx = c.getContext("2d");
    ctx.beginPath();
    ctx.arc(95,50,40,0,2*Math.PI);
    ctx.stroke();
    for (var colour in colours){
        console.log(colour.red);
        console.log(colour.green);
        console.log(colour.blue);
    };
    var myColour = new colour(255,255,255);
    console.log(myColour.red);
    console.log(myColour.green);
    console.log(myColour.blue);
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T12:36:21.510

`colour`您在循环中调用了一个局部变量`for...in`，这不是一个函数。将该变量更改为构造函数以外的其他内容，例如`c`它会正常工作。您的代码，更正：

```
var bodies = [];
var orbits = [];
var colours = [
    new colour(45, 45, 45),
    new colour(255, 0, 0),
    new colour(0, 157, 255),
    new colour(77, 250, 81),
    new colour(255, 247, 0)
];

function colour(red, green, blue)
{
    this.red = red;
    this.green = green;
    this.blue = blue;
};

window.onload = function() {
    var c = document.getElementById("theCanvas");
    var ctx = c.getContext("2d");
    ctx.beginPath();
    ctx.arc(95,50,40,0,2*Math.PI);
    ctx.stroke();
    for (var c in colours){
        console.log(c.red);
        console.log(c.green);
        console.log(c.blue);
    };
    var myColour = new colour(255,255,255);
    console.log(myColour.red);
    console.log(myColour.green);
    console.log(myColour.blue);
};​ 
```

[演示](http://jsfiddle.net/RUBT7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T12:44:43.960

`colour`中定义的局部变量`for (var colour in colours)`将被*[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)*到`onload`函数的开头，因此它将隐藏全局函数`colour`。将后者更改为`Colour`将解决您的问题。此外，将用作名称的函数的名称大写是一个很好的约定`Class`。

# asp.net - 将会话值分配给 Asp.net 中的标签

> ID：14081728
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:34:03.273
> 
> 标签：asp.net, visual-studio-2008, session, label, contentplaceholder

我有两个母版页。在第一个母版页中，我有一个 login.aspx 页面，它打开一个会话 [“用户名”]。在第二个母版页中，我有一个链接到它的子母版页。在子母版页中，我在父母版页的 contentplaceholder 中有一个 contentplaceholder。除了子母版页的 contentplaceholder 之外，我可以将会话值分配给任何地方的标签。没有错误，但运行时的标签显示为空白。我希望将 session["username"] 值分配给标签。

```
Label1.text=(string)session["username"] doesnt work. 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:08:51.057

> 除了子母版页的 contentplaceholder 之外，我可以将会话值分配给任何地方的标签。

好的，如您所知，`session`变量在整个 Web 应用程序中都保持其值。因此，您的会话在不同页面上运行良好意味着标签显示`session["username"]`. 如果是这样，那么您应该在`variable(Label1.Text)`分配值时拥有。

> 这是正确的标签吗？
> 你的标签可见吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:36:11.797

```
Label1.Text= Session["username"] == null ? "Guest." : (string)Session["username"]; 
```

使用此代码，您将不再看到空白标签，它决定显示用户名（如果存在）或“Guest”。如果`Session["username"]`为空。

当会话未填充时，这意味着您的假设（您的会话具有价值）是错误的，您需要仔细查看您的会话获得价值的代码，看看那里出了什么问题。

# icons - 使用法师发布（图标文件）

> ID：14081729
> 
> 赞同：0
> 
> 时间：2012-12-29T12:34:19.837
> 
> 标签：icons, publish, mage

我已经使用 mag 发布了一个应用程序。
一切正常，但图标文件未显示。
我用过 -if 和 -IconFile，但没有用。图标文件为 ico 格式。这有什么意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:04:59.853

根据此链接中的 MSDN 资源[Mage.exe](http://msdn.microsoft.com/en-us/library/acz3y3te%28v=vs.100%29.aspx)

您应该指定 .ICO 图标文件的完整路径，但它不起作用;-)

我在应用程序.exe文件旁边的项目调试文件夹中复制了图标文件，并且在-if或-IconFile命令之后只使用了“filename.extension”，如下所示：-if icon.ico

# android - 电影类的图形问题

> ID：14081736
> 
> 赞同：1
> 
> 时间：2012-12-29T12:34:45.017
> 
> 标签：android, gif

你好，节日快乐！经过大量搜索，我最终定义了一个自定义类来在 android 上播放动画 gif。在某些手机中它可以完美运行，但在某些手机（和一些模拟器配置文件）中却没有。问题是蓝色“闪烁”（[视频示例](https://www.dropbox.com/sh/5plnl4rlsmn6zhw/LmIQApmbvH/Cat%20Project/video_issue/graphics-phone01.mp4)）。我尝试启用/禁用硬件加速渲染，但没有效果。任何想法？

```
/**
 * Main proportion of this class is to play .gif files with the minimum CPU and
 * memory demands. Is way more memory efficient than DrawableAnimation class,
 * the only drawback is that you have to specify targetSdkVersion="3" in
 * Manifest.xml cause of backward incompatibilities.
 * 
 * @author Nilos Psathas
 * 
 */
public class GifMovieView extends View
{
    private Movie movie;
    private long movieStart;

    /**
     * should we keep the last frame when the animation ends? or we will shown
     * the first frame again?
     */
    private boolean keepLastFrame;
    private boolean stopInformed;
    private float sx;
    private float sy;
    private int elapsed;

    private GifAnimListener listener;

    public GifMovieView(Context context, int resId)
    {
        super(context);
        InputStream s = null;

        byte[] bytes = null;

        s = context.getResources().openRawResource(resId);
        try
        {
            bytes = new byte[s.available()];
            s.read(bytes);
        }
        catch (IOException ex)
        {
            Log.d("anim", "cant load a gif! " + ex);
        }

        movie = Movie.decodeByteArray(bytes, 0, bytes.length);

        stopInformed = keepLastFrame = false;
        movieStart = -1;
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        canvas.drawColor(Color.TRANSPARENT);
        canvas.scale(sx, sy);
        super.onDraw(canvas);

        if (movieStart == -1)
        {
            return;
        }

        long now = SystemClock.uptimeMillis();

        if (movieStart == 0)
        {
            movieStart = now;
            listener.onAnimStart();
        }

        elapsed = (int) (now - movieStart);

        if (!isRunning())
        {
            if (keepLastFrame)
            {
                movie.setTime(movie.duration());
            }
            else
            {
                movie.setTime(0);
            }

            if (!stopInformed)
            {
                stopInformed = true;
                listener.onAnimEnd();
            }
        }
        else
        {
            int relTime = (int) ((elapsed) % movie.duration());
            movie.setTime(relTime);
        }

        movie.draw(canvas, 0, 0);
        this.invalidate();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        sx = ((float) getWidth()) / ((float) movie.width());
        sy = ((float) getHeight()) / ((float) movie.height());
    }

    public void start()
    {
        stopInformed = false;
        movieStart = 0;
        setVisibility(VISIBLE);
        invalidate();
    }

    public void forceStop()
    {
        setVisibility(GONE);
        movieStart = -1;
        listener.onForceStop();
    }

    public void stop()
    {
        movieStart = SystemClock.uptimeMillis() - movie.duration();
        invalidate();
    }

    public boolean isRunning()
    {
        return movieStart != -1 && elapsed < movie.duration();
    }

    public void setKeepLastFrame(boolean keepLast)
    {
        keepLastFrame = keepLast;
    }

    public void setListener(GifAnimListener listener)
    {
        this.listener = listener;
    }

    /**
     * Simple interface for animation events
     * 
     * @author Nilos Psathas
     * 
     */
    public interface GifAnimListener
    {
        public void onAnimStart();

        public void onAnimEnd();

        public void onForceStop();
    }
} 
```

# c - 关于整数常量表达式的说明

> ID：14081737
> 
> 赞同：3
> 
> 时间：2012-12-29T12:35:01.090
> 
> 标签：c, c99

我在某处读过整数常量表达式包含整数常量，例如：

```
(5 + 5) //integer constant expression 
```

那是我见过的唯一例子。

现在，从标准中说：

> (C99 6.6/6) 整数常量表达式应具有整数类型，并且只能具有整数常量、枚举常量、字符常量、结果为整数常量的 sizeof 表达式和作为强制转换的直接操作数的浮点常量的操作数。整数常量表达式中的强制转换运算符只能将算术类型转换为整数类型，但作为 sizeof 运算符的操作数的一部分除外。

那么，如果我是对的，所有这些整数表达式都在下面吗？

```
int i; float f = 3.14f;

i = 42;
i = f;
i = (int)(5/3.14f); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T12:40:15.637

`(int)(5/3.14f)`不是整数常量表达式。

您正在使用一个浮动常量，它不是*cast 的直接操作数*。

当然在`i = f;`对象`f`中也不是整数常量表达式。

# html - 页面刷新后如何在输入字段中保留值

> ID：14081740
> 
> 赞同：1
> 
> 时间：2012-12-29T12:35:15.400
> 
> 标签：html, forms, input

我想知道如果用户在表单中输入内容时点击刷新按钮，是否有办法将文本保留在输入字段中。

```
<form>
    <input type="text" name="aaa"/>
</form> 
```

刷新页面后，我想将此文本保留在输入字段中。可能吗？请任何人帮助我给出合适的答案或参考。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:40:18.560

这很可能使用一些 javascript。您可以跟踪输入字段的所有更改，并在每次更改时将输入字段的当前值存储在 SessionStorage 或 LocalStorage 中。您必须安装一个 onload 处理程序，将存储的值写回输入字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:42:36.517

您不能强制浏览器自行执行此操作。此外，您的服务器端脚本语言在这里毫无用处，因为您希望它在**刷新**页面后工作，这意味着服务器端不了解字段的值。因此，您需要使用像 Javascript 这样的客户端脚本来执行此操作。一旦值在 cookie 或会话中发生变化，就立即存储它们，并将它们从 cookie 或会话中填写到表单中。

# javascript - 拖动时更改光标

> ID：14081741
> 
> 赞同：2
> 
> 时间：2012-12-29T12:35:21.517
> 
> 标签：javascript, jquery, html, drag-and-drop, cursor

> **可能重复：**
> [更改 HTML5 拖放文件的鼠标光标（GMail 拖放）](https://stackoverflow.com/questions/8459838/changing-mouse-cursor-for-html5-drag-drop-files-gmail-drag-drop)

我正在为 Google Chrome 开发拖放扩展。

用户可以将页面上的选定文本拖放到使用潜水实现的特定区域并添加到 DOM。当文本被拖动到此类区域并且尚未放下时，应更改光标样式。这些区域的光标在`dragstart`使用 jQuery 的文档事件中更改：

```
 $(".dropArea").css("cursor", "help"); 
```

此解决方案不起作用。任何人都可以帮助找到解决此问题的正确方法吗？

更新：

示例[http://jsfiddle.net/mYpXQ/2/](http://jsfiddle.net/mYpXQ/2/)

# c++ - For a class constructor, what is the difference between the assignment via parentheses or the equal sign?

> ID：14081743
> 
> 赞同：1
> 
> 时间：2012-12-29T12:35:42.967
> 
> 标签：c++, class, constructor

> **Possible Duplicate:**
> [Initializing fields in constructor - initializer list vs constructor body](https://stackoverflow.com/questions/9903248/initializing-fields-in-constructor-initializer-list-vs-constructor-body)

In a lecture I attended, the lecturer talked briefly in C++ about non-default class constructors. He stated specifically that one version was preferable to the other. He showed these two examples:

```
Point::Point(double x, double y, double z)
: x_(x), y_(y), z_(z)
{}

Point::Point(double x, double y, double z)
{ x_= x; y_= y; z_= z; } 
```

He mentioned that the first example (using parentheses) was the preferred way to write the constructor.

My question is: What's the difference and why does it matter? In what way is the first superior to the second?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T12:40:18.593

The reason is that the first is *not* an assignment, it’s an initialisation, and the second code is actually identical to this:

```
Point::Point(double x, double y, double z)
: x_(), y_(), z_()
{ x_= x; y_= y; z_= z; } 
```

That is, all members are default-initialised here before being assigned. That doesn’t work when their types have no default constructor. For instance:

```
class Foo {
    Foo(); // Private, undefined constructor
public:
    Foo(int) { }
};

class Bar {
    int& i;
    Foo f;

public:
    Bar() { i = 0; f = Foo(0); }
}; 
```

This code won’t work because `Bar`’s constructor relies on the existence of a default constructor for `f` and an initialiser for `i`, neither of which exists.

But even if all members are default-constructible or initialisable, it is still advisable to initialise them in the initialisation list rather than via assignment in the constructor: if nothing else, it’s more efficient (because otherwise you’ll perform redundant operations which may be costly in some cases).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:39:18.570

The first copy-constructs the members prior to the constructor body being entered. Note: This is part of the larger subject of what is called a constructor *initializer list* in C++. It is *mandatory* for certain member variable types to be represented in the initializer list, among them reference members, members that have non-default construction (i.e. require parameters for their constructors), and const members. The usage in the case presented in the question is to invoke copy-constuction, as opposed to default-construction followed by in-body assignment, which brings us to...

The second default-constructs the members prior to the constructor body being entered, then assigns their values within the body. This is only viable for members that support default construction.

Of the two, the first is generally preferred, especially for complex data types that have expensive default-initialization. Said-initialization will likely be partially or completely wasted because of the ensuing assignment that is about to take place. You're generally better off foregoing that and using copy-construction instead. Note: *All* intrinsic data types (`int`, `float`, pointers, etc) support copy-constuction.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:40:33.583

The second way performs a default construction, then an assignment.

If a default constructor isn't available it won't work, and either way it might not be as cheap.

Also, the first method can call an explicit constructor while the second one doesn't.

# dependency-injection - 将 Unity DI 与多个程序集一起使用

> ID：14081744
> 
> 赞同：1
> 
> 时间：2012-12-29T12:35:53.340
> 
> 标签：dependency-injection, unity-container, enterprise-library-5

我正在为基于 Web 的 CMS 平台开发一些可重用的组件，并想研究使用 Unity 而不是 Spring.NET。

在解决方案 #1 中，我在分层架构中开发了各种组件。使用 Spring.NET，我可以在其中一个程序集中嵌入一个 XML 配置文件，该文件声明哪些对象被加载到 DI 容器中。关键是组件的构建者应该决定哪些实现是组件上下文中的首选实现。

在我的其他解决方案中，我只需添加一个引用以从程序集中加载配置，然后将这些元素加载到该网站的运行容器中。

在 Unity 下，这种场景的配置策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T06:28:02.123

Unity 支持[XML 配置](http://msdn.microsoft.com/en-us/library/ff660935%28v=pandp.20%29.aspx)（AKA 设计时配置）和[编程配置](http://msdn.microsoft.com/en-us/library/ff660858%28v=pandp.20%29.aspx)（AKA 运行时配置）。XML 配置必须遵循[Unity 配置架构](http://msdn.microsoft.com/en-us/library/ff660914%28v=pandp.20%29.aspx)。

开箱即用的 XML 配置与 .NET 配置挂钩，因此如果不想使用 app.config/web.config 并手动加载，我认为您必须创建自己的 ConfigurationSection 类来加载配置信息：

```
public class MyUnityConfigurationSection : UnityConfigurationSection
{
    public string Serialize()
    {
        return SerializeSection(null, UnityConfigurationSection.SectionName, 
            ConfigurationSaveMode.Full);
    }

    public void LoadConfigurationFile(string fileName)
    {
        Deserialize(File.ReadAllText(fileName));
    }

    public void Deserialize(string xml)
    {
        using (var sr = new StringReader(xml))
        using (var reader = XmlTextReader.Create(sr))
        {
            base.DeserializeSection(reader);
        }
    }
} 
```

然后您可以从字符串或文件加载配置：

```
string configString = "<unity xmlns=\"http://schemas.microsoft.com/practices/2010/unity\">\r\n  <container>\r\n    <register type=\"IEmployee\" mapTo=\"FakeEmployee\" />\r\n    </container>\r\n</unity>";

var config = new MyUnityConfigurationSection();
config.Deserialize(configString);

IUnityContainer container = new UnityContainer();
container.LoadConfiguration(config); 
```

您可能希望在配置程序集中创建一个方法：

```
public void Configure(IUnityContainer container)
{
    // internally configure the container via XML or programmatically
} 
```

# javascript - 是否可以完全混淆 Chrome 扩展中使用的 javascript

> ID：14081745
> 
> 赞同：3
> 
> 时间：2012-12-29T12:35:55.893
> 
> 标签：javascript, google-chrome, google-chrome-extension

我的 Chrome 扩展中有一些敏感的 Javascript，我不想让客户看到。是否可以通过混淆来保护此代码。我不打算“设置一些障碍”，我正在寻找 100% 完全的安全性，无论使用 Chrome 扩展程序的人都无法理解 Javascript。

因为如果不是这样，只需要一个人来解密代码，我就会遇到一场灾难。那么，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:38:25.137

不，这是不可能的！

在机器上运行的每一段代码都可以不混淆，即使是 *.exe 文件！由于使用了 JavaScript，这要简单得多。

您应该将应用程序的敏感部分移至外部资源（例如服务器）。永远不要把敏感的逻辑放在客户端！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:38:07.657

## 不。

***即使是用类似Assembly***编写的程序也没有`"100% complete security"`. 使用 NPAPI，您可以更本地化以使其更难，但没有办法获得 100% 的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:38:20.427

> 因为如果不是这样，只需要一个人来解密代码，我就会遇到一场灾难。

然后寻找另一个解决方案。混淆没有 100% 完全的安全性。混淆可以减缓逆向工程，但不能阻止它。如果您的代码对于浏览器的 javascript 引擎来说是可以理解的，那么对于一个足够坚定的人来说也是可以理解的。

当您描述您想要隐藏的内容、为什么需要它以及为什么需要隐藏它时，我们可能会想出一个更好的解决方案。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-29T13:24:15.017

**不**，您永远无法保护客户端 javascript。对于坚定的黑客来说，混淆只是一个小障碍。它不是任何形式的安全性，它甚至不接近您要求的“100% 完全安全性”。您根本无法使用基于客户端的代码获得这种类型的安全性，尤其是基于客户端的 javascript 代码。

如果您希望您的算法或实现安全，因此无法看到代码，那么您必须在服务器上实现该部分代码，以便您可以保护和控制对代码的访问。然后，您在客户端上的扩展程序可以要求服务器使用安全代码为其执行任务。

# php - PHP中的比较运算符“IF”

> ID：14081753
> 
> 赞同：2
> 
> 时间：2012-12-29T12:36:42.250
> 
> 标签：php, if-statement

> **可能重复：**
> [嵌套 php 三元故障：三元输出！= if - else](https://stackoverflow.com/questions/4807454/nested-php-ternary-trouble-ternary-output-if-else)

为什么这个工作：

```
if($db->f('item_bonus') > 0)
    $bonus = $db->f('item_bonus').' (i)';
elseif($db->f('manufacturer_bonus') > 0)
    $bonus = $db->f('manufacturer_bonus').' (m)';
elseif($db->f('category_bonus') > 0)
    $bonus = $db->f('category_bonus'). ' (c)'; 
```

但这不起作用：

```
$bonus = $db->f('item_bonus') > 0 ? $db->f('item_bonus').' (i)' : $db->f('manufacturer_bonus') > 0 ? $db->f('manufacturer_bonus').' (m)' : $db->f('category_bonus') > 0 ? $db->f('category_bonus'). ' (c)' : '0'; 
```

我做错了什么？`$db->f`返回数字，浮点型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:42:35.720

尝试分组：

```
$bonus = $db->f('item_bonus') > 0 ? $db->f('item_bonus').' (i)' : ($db->f('manufacturer_bonus') > 0 ? $db->f('manufacturer_bonus').' (m)' : ($db->f('category_bonus') > 0 ? $db->f('category_bonus'). ' (c)' : '0')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:47:44.203

最好将三元运算符与简单的 if/else 语句一起使用，以便将来如果您需要再次检查代码时可以理解它们。因此，在这种情况下，最好让您发布的第一段代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:50:44.050

如果您的推理是取消硬编码的 if 语句，您可以将函数和数据分开......

```
// Important stuff
// Change the order of bonus importance using this array
$bonus_precedence = array("item", "manufacturer", "category");
// Change the symbol for each item with this associative array
$bonus_markers = array(
  "item" => "i",
  "manufacturer" => "m",
  "category" => "c"
);

// Magic beyond here
foreach($bonus_precedence as $bonus_type) {
  // Get the next bonus type
  $bonus = $db->f("{$bonus_type}_bonus");
  // Was there a bonus
  if($bonus > 0) {
    // Output the bonus in full and break the loop
    $bonus_marker = $bonus_markers[$bonus_type];
    $bonus .= " ($bonus_marker)";
    break;
  } 
} 
```

如果硬编码无关紧要，请坚持使用长 if 语句。您可以轻松评论它，并且易于阅读和评论：

```
// Only one bonus type is allowed
// Item bonuses are the most important if there is
// an item bonus we ignore all other bonuses
if($db->f("item_bonus") > 0) {
  $bonus = "{$db->f("item_bonus")} (i)";

// Manufacturer bonuses are the next most important
} elseif($db->f("manufacturer_bonus") > 0) {
  $bonus = "{$db->f("manufacturer_bonus")} (m)";

// Category bonus is the fallback if there are no 
// other bonuses
} elseif($db->f("category_bonus") > 0) {
  $bonus = "{$db->f("category_bonus")} (c)";
} 
```

否则至少尝试使其易于理解：

```
// Only one bonus type is allowed
$bonus = 

  // Item bonuses are the most important if there is
  // an item bonus we ignore all other bonuses
  ($db->f("item_bonus") > 0 ? "{$db->f("item_bonus")} (i)" : 

    // Manufacturer bonuses are the next most important
    ($db->f("manufacturer_bonus") > 0 ? "{$db->f("manufacturer_bonus")} (m)" : 

      // Category bonus is the fallback if there are no 
      // other bonuses
      ($db->f("category_bonus") > 0 ? "{$db->f("category_bonus")} (c)" : "0")
    )
  ); 
```

# javascript - 在（jquery？）循环中使用 ajax

> ID：14081754
> 
> 赞同：1
> 
> 时间：2012-12-29T12:36:42.077
> 
> 标签：javascript, jquery, ajax

我有一个 jquery 循环，我想为循环中的每个元素调用和使用 ajax。

```
var splitted = [1,2,3];
var categoriesID = [4,5,6];
$.each(splitted, function(index, val)
{
        $.ajax({
          type: "GET",
          url: 'index.php?act=ajax&op=showCategories&manufacturer='+val+'&categories='+categoriesID,
          success: function(data) {

            $(".manufacturer\\[" + val + "\\]").show();
            $(".manufacturer\\[" + val + "\\]").html(data);
            //alert('Load was performed.');

          }
        });

}); 
```

问题是我注意到可能每个元素都使用相同的 ajax 连接，我的结果是相同的——当然对于每个元素我应该得到不同的结果。

那么 - 我如何在每个循环中关闭并重新打开 ajax 连接？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:51:40.450

最好使用纯 js 做一个简单的循环，并使用[jquery ajax](http://api.jquery.com/jQuery.ajax/)来简化对服务器的 ajax 调用。对于您从服务器收到的相同（坏）结果，我的观点是您发送或不发送相同的参数然后收到相同的结果，您能否提供获取数据的逻辑... Ajax 是异步的名字说。所以不需要打开关闭连接，它们是在并行matherr中完成的。jquery 将负责打开/关闭。也看看[如何提问](https://blog.stackoverflow.com/2010/10/asking-better-questions/)

```
for (var i = 0; i < 3; i++) {

    $.ajax({
        type: "POST",
        data: i, //0,1 and 2
        url: myUrlString,
        success: function (data) {

            console.log(data);
        }
    });
}; 
```

# jquery - 使用 jquery 的 URL 验证正则表达式有什么问题？

> ID：14081758
> 
> 赞同：3
> 
> 时间：2012-12-29T12:37:13.277
> 
> 标签：jquery, regex, validation, url

> **可能重复：**
> [检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)

我有这个验证功能：

```
function validate_url(url)
    {
        var pattern1= new RegExp(/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/);
        var pattern2= new RegExp(/^[A-Za-z][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*[.][A-Za-z][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*([.][A-Za-z][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*)*$/);
        if (pattern1.test(url) || pattern2.test(url))
            return true;
        else
            return false;
    } 
```

我想检查这些模式的 url 验证：

```
 * www.example.com
     * http://www.example.com
     * http://example.com
     * http://example.example.com
     * https://www.example.com
     * https://example.com
     * https://example.example.com
     * example.example.com
     * example.com 
```

“.com”是可选的。

实际上，在我测试这个网址之前它一直在工作：

```
 www,google.com 
```

它接受逗号！我试图从我的正则表达式中删除它，它仍然接受它！它出什么问题了 ？我为我的案例搜索了一个合适的正则表达式，但它们太大了，并没有给我想要的东西。有什么建议吗？提前致谢

# objective-c - 从 NSDictionary 中添加 objectAtIndex: 1 -9

> ID：14081764
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:37:53.407
> 
> 标签：objective-c, ios, nsdictionary

我想从一个`NSDictionary`

一次 10 个，所以 objectAtIndex 0 到 9

现在只添加：

```
AddObject:[[[json objectForKey:@"one"] objectAtIndex:1] ObjectForKey:@"likes"]; 
```

那9次，有没有更简单的方法可以做到这一点，并且只在对象存在时添加。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:47:16.720

试试这个：

```
NSArray *shotsArr = [json objectForKey:@"shots"];
NSMutableArray *allViewsCounts = [NSMutableArray array];
for (NSDictionary *shotDict in shotsArr) {
    NSNumber *viewsCount = [shotDict objectForKey:@"views_count"];
    [allViewsCounts addObject:viewsCount];
} 
```

如果您希望此数组中只有 10 个对象：

```
__block NSMutableArray *allViewsCounts = [NSMutableArray array];
[shotsArr enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSDictionary *shotDict = obj;
    NSNumber *viewsCount = [shotDict objectForKey:@"views_count"];
    [allViewsCounts addObject:viewsCount];
    if (idx == 10) {
        *stop = YES;
    }
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:41:34.580

简单地使用 for 循环

```
for (int i=0;i<10;i++){
     if([[[json objectForKey:@"one"] objectAtIndex:i] ObjectForKey:@"likes"]){
          AddObject:[[[json objectForKey:@"one"] objectAtIndex:i] ObjectForKey:@"likes"];
     }
} 
```

# c# - 如何在没有 PInvoke 或 Windows 8 管理员提升的 .NET 中获取物理扇区大小

> ID：14081765
> 
> 赞同：0
> 
> 时间：2012-12-29T12:37:57.897
> 
> 标签：c#, .net, windows-8

我知道在 Windows 8\server 2012 中有一个名为 FileFsSectorSizeInformation 的新本机 API，可以从任何文件句柄中获取物理扇区大小，即使是在 SMB2 上也没有管理员提升。我正在寻找 .NET 等价物。这是有关本地方式的更多信息。

[http://msdn.microsoft.com/en-us/library/windows/desktop/hh848035(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh848035(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/jj216474.aspx](http://msdn.microsoft.com/en-us/library/jj216474.aspx)

我正在使用 .NET 4.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T14:49:33.700

不，这不是由 .NET 包装的。它不是一个 api，它是一个*驱动程序控制代码*。您需要 pinvoke DeviceIoControl() 才能使用它。.NET 通常会避免这些低级驱动程序实现细节，因为它们很难在 Windows 版本之间保持稳定。

请注意这里，一般来说，您打算做的事情没有多大意义。必须调用 FileStream.Flush() 以确保在程序崩溃之前写入日志数据，这样您就可以确保拥有最新的日志。*将true*传递给过载对性能极为不利，磁盘写入非常慢，只有当您的程序习惯于蓝屏机器时才需要这样做。然后，您也应该对驱动器扇区大小不感兴趣。因为您可以利用这些知识的唯一方法是缓冲日志数据。如果您还使用 Flush()，缓冲是您最不想做的事情。

# sql - 范围：按两个日期之间的差异排序

> ID：14081768
> 
> 赞同：1
> 
> 时间：2012-12-29T12:38:18.627
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, postgresql

我想创建一个范围，从最近的日期到最远的日期对数据进行排序。

例如，我有 3 个值：

```
<Value id: 1, date: '2012-12-20'>
<Value id: 2, date: '2012-12-28'>
<Value id: 3, date: '2012-12-31'> 
```

然后我想对最接近给定日期的日期进行排序：`2012-12-29`.
结果我应该有这个命令：`2, 3, 1`。
如果我选择`2012-12-30`结果必须是：`3, 2, 1`.

我试过这样的事情：

```
scope :order_by_closest_date, lambda{|time| 
  select("*, (date - DATE('#{time}')) AS time").order("time ASC")
} 
```

但它不起作用。
有关信息：Rails 3.2.9 Ruby 1.9.3 Postgresql 9.1.4。
有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:00:30.270

### 简单查询

^(第一个示例`date`根据初始问题使用列。)

不确定 Ruby 语法，但正确的 SQL 语句应该是：

```
SELECT * 
FROM   tbl
ORDER  BY @(date_col - '2012-12-29'::date) 
```

[`@`是“绝对值”运算符。](http://www.postgresql.org/docs/current/interactive/functions-math.html)

永远不要使用`date`or`time`作为标识符。虽然在 PostgreSQL 中被允许（有一些限制），但这些是[SQL 标准中的保留字，](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)它会导致令人困惑的错误消息和可能的意外错误。

### 杰出的表现

^(`timestamp`其余部分根据评论中的更新与一列一起使用。)

对于小型表或临时查询，上述解决方案就可以了。对于中型或大型表，如果性能很重要，我建议采用更复杂的方法。

Condicio sine qua non 是or列上的**索引。**像这样：`date``timestamp`

```
CREATE INDEX tbl_my_timestamp_idx ON tbl(my_timestamp); 
```

有了索引，下面的查询将*削弱*大表的简单查询的性能：

```
SELECT *
FROM  (
    (
    SELECT *
    FROM   tbl
    WHERE  my_timestamp >= '2012-12-30 11:32'::timestamp
    ORDER  BY my_timestamp
    LIMIT  3
    )

    UNION ALL
    (
    SELECT *
    FROM   tbl
    WHERE  my_timestamp < '2012-12-30 11:32'::timestamp
    ORDER  BY my_timestamp DESC
    LIMIT  3
    )
    ) x
ORDER  BY @extract('epoch' FROM (my_timestamp - '2012-12-28 11:32'::timestamp))
LIMIT  3; 
```

*   `UNION ALL`-的两条腿周围的括号`SELECT`不是可选的。需要适用`LIMIT`于每条腿。

*   如果您按附加列排序，请在索引中反映这一点 - 在这种情况下使用[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)。

### 怎么会这样？

第一个查询使用表达式作为条件。Postgres 必须为每一行计算一个值，然后按结果排序并选择前几行。小桌子没问题，但大桌子*非常*昂贵。**O(n)** ; `n`是表中的行数。它不能使用普通索引。加上在所有行中排序和挑选获胜者的一些不小的成本。
您*可以*在表达式上创建一个索引，这将是最快的，但这仅适用于比较恒定的时间戳 - 这几乎不是一个实际的用例。

第二个查询根据您在索引中的时间戳找到位置，顺序读取接下来几行的元组指针，并直接从表中获取它们（或者甚至直接从索引中获取，在 9.2 中使用仅索引扫描）。两次，一次上升，一次下降，因为我们不知道同行如何比较。但这只是**2 x O(log(n))**（[典型的 b-tree 查找成本](http://en.wikipedia.org/wiki/B-tree)）计算仅针对少数预先选择的行进行。从小样本中挑选获胜者的成本是微不足道的。

只需测试[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html). 在对真实表格的快速测试中，我得到了**1000 的因子，表格有 50k 行**。并且它不断扩大以适应更大的桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:51:12.333

尝试

```
scope :order_by_closest_date, lambda{|time| 
  select("*, DATEDIFF(date,DATE('#{time}')) AS time").order("time ASC")
} 
```

# python - 过滤器中的值很少（模板django）

> ID：14081781
> 
> 赞同：0
> 
> 时间：2012-12-29T12:40:45.580
> 
> 标签：python, django

以下主要思想：我有一个列表和一个值，我从模板中获得。所以，我需要获取该列表的第一个元素 -

```
list['value'] 
```

在模板中我有：

```
{% load get_number %}
{{  list, value |get_number }} 
```

在 get_number.py 中：

```
#!/usr/bin/python
from django import template
register = template.Library()

@register.filter(name='get_number')
def get_number(arr, value):
    return arr[int(value)] 
```

但它不起作用。我在 Google 中搜索，它说 Django 不支持过滤器中的一些元素（{{ list, value |get_number }}）。这对我来说很奇怪，因为在 php 中我可以 $list['value'] 没有任何过滤器等。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:45:03.890

这样做

```
{{  list|get_number:value }} 
```

仅供参考：您可以使用点符号来索引模板中的列表

```
{{list.0}} or {{list.1}} 
```

# windows-phone-7 - 如何使用isolatedstoragefile将多组数据写入文件

> ID：14081784
> 
> 赞同：1
> 
> 时间：2012-12-29T12:40:55.303
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, isolatedstoragefile

我的 Windows Phone 应用程序中有一个列表框，它的数据模板中有 4 个文本框控件来表示问题、答案、日期和电子邮件 ID。

当用户保存这些数据时，我想将它们保存到本地存储中，以便以后可以读取它以在应用程序中显示相同的数据。那么如何使用isolatedstoragefile将多组数据写入一个文件，每组数据的每一行都包含上述数据（问题、答案、日期和电子邮件）。

在阅读每条记录时，我如何以不同的方式阅读每一列（问题、答案、日期和电子邮件 ID）？我知道我们可以在写入时连接它们并在读取每一行时拆分它们。但我想知道隔离存储文件 api 中是否提供了一种方法来读取我上面想要的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:47:31.320

就像使用“普通”文件一样。

我不是二进制或 XML 序列化的忠实粉丝，所以我会用分号分隔 4 个字段，并将每个项目（问题；答案；日期；电子邮件 ID）写在新行上。将生成的字符串保存到文件中。

然后在阅读时，将整个文件读入一个字符串，用换行符分割它，你会得到所有的项目。对于每一行（项目），使用分号将其拆分，您将获得 4 个字段，您可以将它们转换为所需的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:10:43.907

[我使用来自http://whydoidoit.com/](http://whydoidoit.com/)的 Silverlight 序列化程序，并将对象序列化到独立存储。它是一个非常好的序列化程序——速度快而且文件很小。用于保存和检索的代码是

```
public static void SaveFile(string filename, object serializableObject, Type type)
    {
        using (IsolatedStorageFile userStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (userStore.FileExists(filename))
            {
                userStore.DeleteFile(filename);
            }

            using (IsolatedStorageFileStream stream = userStore.CreateFile(filename))
            {
                SilverlightSerializer.Serialize(serializableObject, stream);
            }
        }
    }

    public static object LoadSerializedObjectFromFile(string filename, Type type)
    {
        using (IsolatedStorageFile userStore =
          IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (userStore.FileExists(filename))
            {
                using (IsolatedStorageFileStream stream = userStore.OpenFile(filename, FileMode.Open))
                {
                    return SilverlightSerializer.Deserialize(stream);
                }
            }
        }
        return null;
    } 
```

我通常将单个文件包装在存储库中（模式）。例如，在我的 Good Deal 应用程序中，我有一个 DealRepository。在该存储库中，我有一个静态 Load 方法，如下所示：

```
 private static IDeal LoadRecentDeal()
    {
        IDeal savedDeals = IsolatedStorageHelper.LoadSerializedObjectFromFile(RecentDealFileName, typeof(Deal)) as Deal;
        if (savedDeals != null)
        {
            return savedDeals;
        }
        else
        {
            return Deal.CreateNewDeal(RecentDealFileName);
        }
    } 
```

内部保存方法是这样的：

```
public void Save(IDeal deal)
    {
        deal.LastModifiedDate = DateTime.Now;

        // 
        string fileName;
        if (deal.Name == RecentDealFileName)
        {
            fileName = RecentDealFileName;
        }
        else
        {
            fileName = SavedDirectoryName + Path.DirectorySeparatorChar + deal.ID.ToString();
        }

        IsolatedStorageHelper.SaveFile(fileName, deal, typeof(IDeal));       
    } 
```

此外，IsolatedStorageHelper 和存储库上还有其他几种方法用于执行操作，例如保存多个文件中的列表并返回它们......等等。一切都取决于您的需求 - 但我建议您查看 Silverlight 序列化程序，它可以做到很简单。

# ruby-on-rails - 如何连接配置文件控制器和用户控制器？

> ID：14081788
> 
> 赞同：0
> 
> 时间：2012-12-29T12:41:30.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我通过设计拥有 USER 并通过脚手架创建了配置文件，现在一切正常，但我无法将用户与配置文件“连接”。

这是我到目前为止所做的 -

用户.rb

```
has_one :profile 
```

配置文件.rb

```
belongs_to :user 
```

我也通过配置文件表中的迁移创建了 user_id 列。

现在，当我登录并填写表格 /profiles/new 时，它会创建配置文件，但它无法链接到用户，因为 user_id 字段为 NULL。此外，用户可以创建多个配置文件，而我认为他只能创建一个，因为我已经提出：has_one 关系？

任何帮助？

编辑 - 在profiles_controller 文件中，我也尝试更改

```
@user_profile = UserProfile.new(params[:user_profile]) 
```

至

```
@user_profile = current_user.userprofile.new(params[:user_profile]) 
```

但它给出了未定义的方法'UserProfile'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:45:56.773

```
@user_profile = current_user.userprofile.new(params[:user_profile]) 
```

应该

```
@user_profile = current_user.build_user_profile(params[:user_profile]) 
```

# mongodb - osx-10.8.2 上的开发环境出现问题

> ID：14081793
> 
> 赞同：0
> 
> 时间：2012-12-29T12:42:20.010
> 
> 标签：mongodb, web, osx-mountain-lion, homebrew, automake

我最近学到了很多东西，在这样做的过程中似乎搞砸了我的 Mac。

有人可以告诉我这意味着什么以及如何解决它吗？

> **$ brew doctor**
> 警告：“config”脚本存在于您的系统或 Homebrew 目录之外。 `./configure`脚本经常查找 *-config 脚本以确定是否安装了软件包，以及在编译和链接时要使用哪些附加标志。
> 
> 如果配置脚本覆盖系统或 Homebrew 提供的同名脚本，则在路径中包含其他脚本可能会混淆通过 Homebrew 安装的软件。我们发现了以下“配置”脚本：
> 
> ```
> /usr/local/php5/bin/curl-config
> /usr/local/php5/bin/freetype-config
> /usr/local/php5/bin/icu-config
> /usr/local/php5/bin/libmcrypt-config
> /usr/local/php5/bin/libpng-config
> /usr/local/php5/bin/libpng12-config
> /usr/local/php5/bin/php-config
> /usr/local/php5/bin/xml2-config
> /usr/local/php5/bin/xslt-config
> /Library/Frameworks/Python.framework/Versions/2.7/bin/python-config
> /Library/Frameworks/Python.framework/Versions/2.7/bin/python2-config
> /Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config 
> ```
> 
> 警告：在 /usr/local/lib 中发现了未编译的 dylib。如果您不是故意将它们放在那里，它们可能会在构建 Homebrew 公式时引起问题，并且可能需要删除。
> 
> 意外的dylib：
> 
> ```
> /usr/local/lib/libjpeg.8.dylib
> /usr/local/lib/libmcrypt.4.4.8.dylib
> /usr/local/lib/libpng15.15.dylib 
> ```
> 
> 警告：在 /usr/local/lib 中找到未编译的 .la 文件。如果您不是故意将它们放在那里，它们可能会在构建 Homebrew 公式时引起问题，并且可能需要删除。
> 
> 意外的 .la 文件：
> 
> ```
> /usr/local/lib/libjpeg.la
> /usr/local/lib/libmcrypt.la
> /usr/local/lib/libpng15.la 
> ```
> 
> 警告：在 /usr/local/lib/pkgconfig 中找到未编译的 .pc 文件。如果您不是故意将它们放在那里，它们可能会在构建 Homebrew 公式时引起问题，并且可能需要删除。
> 
> 意外的 .pc 文件：
> 
> ```
> /usr/local/lib/pkgconfig/libpng15.pc 
> ```
> 
> 警告：在 /usr/local/lib 中找到未编译的静态库。如果您不是故意将它们放在那里，它们可能会在构建 Homebrew 公式时引起问题，并且可能需要删除。
> 
> 意外的静态库：
> 
> ```
> /usr/local/lib/libjpeg.a
> /usr/local/lib/libpng15.a 
> ```
> 
> 警告：您的酒窖中有未连接的小桶 未连接小桶
> 可能会导致构建问题，并导致依赖这些小桶的啤酒在构建后无法正常运行。在这些上运行`brew link`：
> 
> ```
> automake
> mongodb
> node 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:26:26.383

因此，我通过手动修复和修复自制软件抱怨的所有内容，让我的系统准备好运行。我删除了所有额外的配置文件、.pc、.la 和 .dylib 文件。然后我 brew 链接 automake、mongodb 和 node。

# php - 查询和回显解决方案？

> ID：14081796
> 
> 赞同：-3
> 
> 时间：2012-12-29T12:42:38.973
> 
> 标签：php, mysql, sql

很难弄清楚如何进行 mysql 查询并将数据输出到如下表所示的表中。

现在已经玩了几天没有运气，所以任何帮助将不胜感激。

下图显示了我的 3 个数据库表（以简单形式）以及我尝试使用 PHP/MYSQL 输出的内容。

该图像还显示了每个用户在每个类别中的列表总数（计数），我无法弄清楚我是如何将它们连接在一起的。

希望这有点道理！

![http://img.photobucket.com/albums/v432/Winegums/table_zps2b57f483.jpg](../Images/5145572f6b67da9d1b43b23913f89885.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:46:31.457

最初，你可以这样做，

```
SELECT  a.user_name,
        SUM(CASE WHEN c.cat_name = 'books' THEN 1 ELSE 0 END) books,
        SUM(CASE WHEN c.cat_name = 'videos' THEN 1 ELSE 0 END) videos
FROM    users a 
        LEFT JOIN downlods b
            ON a.user_ID = b.user_ID
        LEFT JOIN download_cats c
            ON b.cat_id = c.cat_id
GROUP BY a.user_name 
```

但我猜你的桌子上有*未知数量*的。*动态 SQL*`cat_name`更受欢迎，

 *```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(CASE WHEN c.cat_name = ''',
      cat_name,
      ''' THEN 1 ELSE 0 END) AS ',
      cat_name
    )
  ) INTO @sql
FROM download_cats;

SET @sql = CONCAT(' SELECT  a.user_name, ', @sql, ' 
                    FROM    users a 
                            LEFT JOIN downlods b
                                ON a.user_ID = b.user_ID
                            LEFT JOIN download_cats c
                                ON b.cat_id = c.cat_id
                    GROUP BY a.user_name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```*

# shell - 从编译的可执行文件生成 CLI shell 脚本代码？

> ID：14081799
> 
> 赞同：8
> 
> 时间：2012-12-29T12:43:01.787
> 
> 标签：shell, haskell, scheme, ocaml, robustness

# 问题，讨论的话题

我对从以更健壮性、性能良好且与平台无关的编译语言（例如 OCaml）编写的代码生成命令行 shell 脚本源代码非常感兴趣。基本上，您将使用编译语言进行编程以执行您想要的与操作系统的任何交互（我建议：更复杂的交互或不容易以独立于平台的方式进行的交互），最后您将编译它到本机二进制可执行文件（最好），它将生成一个 shell 脚本，该脚本会在 shell 中影响您用编译语言编写的内容。[**已添加**]：对于“效果”，我的意思是设置环境变量和 shell 选项，执行某些非标准命令（标准脚本“胶水”将由编译的可执行文件处理，并将被排除在生成的 shell 脚本之外）和这样的。

到目前为止，我还没有找到任何这样的解决方案。与今天的其他可能性相比，它似乎相对容易*实现，例如将 OCaml 编译为 JavaScript。

*   我描述的内容是否已经（公共）实现？
*   *还有哪些与我所描述的（非常*）相似的可能性，它们在哪些方面与此不同？（我想到了语言到语言的编译（从编译到 sh），尽管这似乎不必要地难以实现。）

**我*不是*什么意思**

1.  另一种外壳（如 Scsh）。您管理的系统可能并不总是允许用户或一个管理员选择 shell，我也希望它是一个专门为其他人（客户、同事和其他人）提供的系统管理解决方案，那些不能期望的人接受不同的外壳。
2.  一个替代解释器，用于非交互式 shell 脚本通常服务的目的（如 ocamlscript）。就个人而言，我在避免为此目的编写 shell 脚本方面没有问题。我这样做是因为 shell 脚本通常更难维护（例如，对某些字符敏感以及对诸如“命令”之类的可变事物的操作）并且更难制作到与流行的通用编程语言可以提供的相同级别的功能（例如例如，在这方面将 Bash 与 Python 进行比较）。*但是，在某些情况下需要本机 shell 脚本，例如 shell 启动时由 shell 提供的 shell 配置文件。*

# 背景

**实际应用**

你们中的一些人可能会怀疑我所描述的实际用途。一个实际应用是根据各种条件定义 shell 配置文件（例如，配置文件所在的系统平台/操作系统、安全策略遵循的内容、具体的 shell、登录/非登录类型shell，交互/非交互类型的 shell）。与（精心设计的）通用 shell 配置文件作为 shell 脚本相比的优势在于性能（可以生成压缩/优化源代码而不是人工编写的脚本解释的本机机器代码）、稳健性（类型检查、异常处理，功能的编译时验证，生成的二进制可执行文件的加密签名），功能（较少或不依赖用户级 CLI 工具，

**实施细节，附带问题**

1.  程序员应该能够控制生成的 shell 脚本的通用程度。例如，可能每次运行二进制可执行文件并输出适当的 shell 配置文件代码，或者它可以简单地生成一个固定的 shell 脚本文件，以适应一次运行的情况。在后一种情况下，列出的优势——特别是那些健壮性（例如异常处理和对用户空间工具的依赖）的优势要有限得多。**[添加]**
2.  生成的 shell 脚本是某种形式的通用 shell 脚本（如 GNU autoconf 生成）还是适应特定 shell（动态或非动态）的 shell-native 脚本对我来说不是主要问题。
3.  easy*：在我看来，这可以通过在基本 shell 内置函数的库中提供可用函数来实现。这样的函数将简单地将自身加上传递的参数转换为语义适当且语法正确的 shell 脚本语句（作为字符串）。

感谢您的任何进一步想法，尤其是具体建议！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-29T18:26:05.460

没有为此的 Haskell 库，但您可以使用抽象语法树来实现它。我将构建一个简单的玩具示例，它构建一个与语言无关的抽象语法树，然后应用一个将树转换为等效 Bash 脚本的后端。

我将使用两个技巧在 Haskell 中对语法树进行建模：

*   使用 GADT 对类型化的 Bash 表达式进行建模
*   使用免费的 monad 实现 DSL

GADT 技巧相当简单，我使用了几种语言扩展来使语法更甜美：

```
{-# LANGUAGE GADTs
           , FlexibleInstances
           , RebindableSyntax
           , OverloadedStrings #-}

import Data.String
import Prelude hiding ((++))

type UniqueID = Integer

newtype VStr = VStr UniqueID
newtype VInt = VInt UniqueID

data Expr a where
    StrL   :: String  -> Expr String  -- String  literal
    IntL   :: Integer -> Expr Integer -- Integer literal
    StrV   :: VStr    -> Expr String  -- String  variable
    IntV   :: VInt    -> Expr Integer -- Integer variable
    Plus   :: Expr Integer -> Expr Integer -> Expr Integer
    Concat :: Expr String  -> Expr String  -> Expr String
    Shown  :: Expr Integer -> Expr String

instance Num (Expr Integer) where
    fromInteger = IntL
    (+)         = Plus
    (*)    = undefined
    abs    = undefined
    signum = undefined

instance IsString (Expr String) where
    fromString = StrL

(++) :: Expr String -> Expr String -> Expr String
(++) = Concat 
```

这让我们可以在 DSL 中构建类型化的 Bash 表达式。我只实现了一些原始操作，但您可以轻松想象如何与其他人一起扩展它。

如果我们不使用任何语言扩展，我们可能会编写如下表达式：

```
Concat (StrL "Test") (Shown (Plus (IntL 4) (IntL 5))) :: Expr String 
```

这没关系，但不是很性感。上面的代码用于`RebindableSyntax`覆盖数字文字，以便您可以替换`(IntL n)`为`n`：

```
Concat (StrL "Test") (Shown (Plus 4 5)) :: Expr String 
```

同样，我已经`Expr Integer`实现`Num`，因此您可以使用以下方法添加数字文字`+`：

```
Concat (StrL "Test") (Shown (4 + 5)) :: Expr String 
```

同样，我使用`OverloadedStrings`这样您就可以`(StrL str)`用 just替换所有出现的`str`：

```
Concat "Test" (Shown (4 + 5)) :: Expr String 
```

我还覆盖了 Prelude`(++)`运算符，以便我们可以连接表达式，就好像它们是 Haskell 字符串一样：

```
"Test" ++ Shown (4 + 5) :: Expr String 
```

除了`Shown`从整数到字符串的转换之外，它看起来就像原生的 Haskell 代码。整洁的！

现在我们需要一种方法来创建用户友好的 DSL，最好使用`Monad`语法糖。这就是免费单子的用武之地。

一个自由的 monad 采用一个代表语法树中单个步骤的函子，并从中创建一个语法树。作为奖励，它始终是任何函子的 monad，因此您可以使用`do`符号来组装这些语法树。

为了演示它，我将在前面的代码段中添加更多代码：

```
-- This is in addition to the previous code
{-# LANGUAGE DeriveFunctor #-}

import Control.Monad.Free

data ScriptF next
    = NewInt (Expr Integer) (VInt -> next)
    | NewStr (Expr String ) (VStr -> next)
    | SetStr VStr (Expr String ) next
    | SetInt VInt (Expr Integer) next
    | Echo (Expr String) next
    | Exit (Expr Integer)
  deriving (Functor)

type Script = Free ScriptF

newInt :: Expr Integer -> Script VInt
newInt n = liftF $ NewInt n id

newStr :: Expr String -> Script VStr
newStr str = liftF $ NewStr str id

setStr :: VStr -> Expr String -> Script ()
setStr v expr = liftF $ SetStr v expr ()

setInt :: VInt -> Expr Integer -> Script ()
setInt v expr = liftF $ SetInt v expr ()

echo :: Expr String -> Script ()
echo expr = liftF $ Echo expr ()

exit :: Expr Integer -> Script r
exit expr = liftF $ Exit expr 
```

函子代表了我们 DSL 中的`ScriptF`一个步骤。 `Free`本质上创建了一个`ScriptF`步骤列表并定义了一个 monad，我们可以在其中组装这些步骤的列表。您可以将该`liftF`功能视为采取一个步骤并通过一个操作创建一个列表。

然后我们可以使用`do`符号来组装这些步骤，其中`do`符号连接这些动作列表：

```
script :: Script r
script = do
    hello <- newStr "Hello, "
    world <- newStr "World!"
    setStr hello (StrV hello ++ StrV world)
    echo ("hello: " ++ StrV hello)
    echo ("world: " ++ StrV world)
    x <- newInt 4
    y <- newInt 5
    exit (IntV x + IntV y) 
```

这显示了我们如何组装我们刚刚定义的原始步骤。这具有 monad 的所有优点，包括对 monadic 组合子的支持，例如`forM_`：

```
import Control.Monad

script2 :: Script ()
script2 = forM_ [1..5] $ \i -> do
    x <- newInt (IntL i)
    setInt x (IntV x + 5)
    echo (Shown (IntV x)) 
```

请注意我们的`Script`monad 是如何强制类型安全的，即使我们的目标语言可能是无类型的。您不能`String`在期望的地方意外使用文字，`Integer`反之亦然。您必须使用类型安全的转换（如`Shown`.

另请注意，`Script`monad 会在 exit 语句之后吞下任何命令。他们甚至在到达口译员之前就被忽略了。当然，您可以通过重写`Exit`构造函数以接受后续`next`步骤来更改此行为。

这些抽象语法树是纯粹的，这意味着我们可以纯粹地检查和解释它们。我们可以定义多个后端，例如将我们的`Script`monad 转换为等效 Bash 脚本的 Bash 后端：

```
bashExpr :: Expr a -> String
bashExpr expr = case expr of
    StrL str           -> str
    IntL int           -> show int
    StrV (VStr nID)    -> "${S" <> show nID <> "}"
    IntV (VInt nID)    -> "${I" <> show nID <> "}"
    Plus   expr1 expr2 ->
        concat ["$((", bashExpr expr1, "+", bashExpr expr2, "))"]
    Concat expr1 expr2 -> bashExpr expr1 <> bashExpr expr2
    Shown  expr'       -> bashExpr expr'

bashBackend :: Script r -> String
bashBackend script = go 0 0 script where
    go nStrs nInts script =
        case script of
            Free f -> case f of
                NewInt e k ->
                    "I" <> show nInts <> "=" <> bashExpr e <> "\n" <>
                        go nStrs (nInts + 1) (k (VInt nInts))
                NewStr e k ->
                    "S" <> show nStrs <> "=" <> bashExpr e <> "\n" <>
                        go (nStrs + 1) nInts (k (VStr nStrs))
                SetStr (VStr nID) e script' ->
                    "S" <> show nID <> "=" <> bashExpr e <> "\n" <>
                        go nStrs nInts script'
                SetInt (VInt nID) e script' ->
                    "I" <> show nID <> "=" <> bashExpr e <> "\n" <>
                        go nStrs nInts script'
                Echo e script' ->
                    "echo " <> bashExpr e <> "\n" <>
                        go nStrs nInts script'
                Exit e ->
                    "exit " <> bashExpr e <> "\n"
            Pure _ -> "" 
```

我定义了两个解释器：一个用于表达式语法树，一个用于 monadic DSL 语法树。这两个解释器将任何与语言无关的程序编译成等效的 Bash 程序，以字符串表示。当然，代表的选择完全取决于您。

每次我们的`Script`monad 请求一个新变量时，这个解释器都会自动创建新的唯一变量。

让我们试试这个解释器，看看它是否有效：

```
>>> putStr $ bashBackend script
S0=Hello, 
S1=World!
S0=${S0}${S1}
echo hello: ${S0}
echo world: ${S1}
I0=4
I1=5
exit $((${I0}+${I1})) 
```

它生成一个执行等效的独立于语言的程序的 bash 脚本。同样，它也翻译`script2`得很好：

```
>>> putStr $ bashBackend script2
I0=1
I0=$((${I0}+5))
echo ${I0}
I1=2
I1=$((${I1}+5))
echo ${I1}
I2=3
I2=$((${I2}+5))
echo ${I2}
I3=4
I3=$((${I3}+5))
echo ${I3}
I4=5
I4=$((${I4}+5))
echo ${I4} 
```

所以这显然不是全面的，但希望这能给你一些想法，让你知道如何在 Haskell 中惯用地实现它。如果您想了解更多关于使用免费 monad 的信息，我建议您阅读：

*   [为什么自由单子很重要](http://www.haskellforall.com/2012/06/you-could-have-invented-free-monads.html)
*   [使用免费的 Monad 净化代码](http://www.haskellforall.com/2012/07/purify-code-using-free-monads.html)

我还在这里附上了完整的代码：

```
{-# LANGUAGE GADTs
           , FlexibleInstances
           , RebindableSyntax
           , DeriveFunctor
           , OverloadedStrings #-}

import Control.Monad.Free
import Control.Monad
import Data.Monoid
import Data.String
import Prelude hiding ((++))

type UniqueID = Integer

newtype VStr = VStr UniqueID
newtype VInt = VInt UniqueID

data Expr a where
    StrL   :: String  -> Expr String  -- String  literal
    IntL   :: Integer -> Expr Integer -- Integer literal
    StrV   :: VStr    -> Expr String  -- String  variable
    IntV   :: VInt    -> Expr Integer -- Integer variable
    Plus   :: Expr Integer -> Expr Integer -> Expr Integer
    Concat :: Expr String  -> Expr String  -> Expr String
    Shown  :: Expr Integer -> Expr String

instance Num (Expr Integer) where
    fromInteger = IntL
    (+)         = Plus
    (*)    = undefined
    abs    = undefined
    signum = undefined

instance IsString (Expr String) where
    fromString = StrL

(++) :: Expr String -> Expr String -> Expr String
(++) = Concat

data ScriptF next
    = NewInt (Expr Integer) (VInt -> next)
    | NewStr (Expr String ) (VStr -> next)
    | SetStr VStr (Expr String ) next
    | SetInt VInt (Expr Integer) next
    | Echo (Expr String) next
    | Exit (Expr Integer)
  deriving (Functor)

type Script = Free ScriptF

newInt :: Expr Integer -> Script VInt
newInt n = liftF $ NewInt n id

newStr :: Expr String -> Script VStr
newStr str = liftF $ NewStr str id

setStr :: VStr -> Expr String -> Script ()
setStr v expr = liftF $ SetStr v expr ()

setInt :: VInt -> Expr Integer -> Script ()
setInt v expr = liftF $ SetInt v expr ()

echo :: Expr String -> Script ()
echo expr = liftF $ Echo expr ()

exit :: Expr Integer -> Script r
exit expr = liftF $ Exit expr

script :: Script r
script = do
    hello <- newStr "Hello, "
    world <- newStr "World!"
    setStr hello (StrV hello ++ StrV world)
    echo ("hello: " ++ StrV hello)
    echo ("world: " ++ StrV world)
    x <- newInt 4
    y <- newInt 5
    exit (IntV x + IntV y)

script2 :: Script ()
script2 = forM_ [1..5] $ \i -> do
    x <- newInt (IntL i)
    setInt x (IntV x + 5)
    echo (Shown (IntV x))

bashExpr :: Expr a -> String
bashExpr expr = case expr of
    StrL str           -> str
    IntL int           -> show int
    StrV (VStr nID)    -> "${S" <> show nID <> "}"
    IntV (VInt nID)    -> "${I" <> show nID <> "}"
    Plus   expr1 expr2 ->
        concat ["$((", bashExpr expr1, "+", bashExpr expr2, "))"]
    Concat expr1 expr2 -> bashExpr expr1 <> bashExpr expr2
    Shown  expr'       -> bashExpr expr'

bashBackend :: Script r -> String
bashBackend script = go 0 0 script where
    go nStrs nInts script =
        case script of
            Free f -> case f of
                NewInt e k ->
                    "I" <> show nInts <> "=" <> bashExpr e <> "\n" <> 
                        go nStrs (nInts + 1) (k (VInt nInts))
                NewStr e k ->
                    "S" <> show nStrs <> "=" <> bashExpr e <> "\n" <>
                        go (nStrs + 1) nInts (k (VStr nStrs))
                SetStr (VStr nID) e script' ->
                    "S" <> show nID <> "=" <> bashExpr e <> "\n" <>
                        go nStrs nInts script'
                SetInt (VInt nID) e script' ->
                    "I" <> show nID <> "=" <> bashExpr e <> "\n" <>
                        go nStrs nInts script'
                Echo e script' ->
                    "echo " <> bashExpr e <> "\n" <>
                        go nStrs nInts script'
                Exit e ->
                    "exit " <> bashExpr e <> "\n"
            Pure _ -> "" 
```

# android - ListView 中未设置 Drawable

> ID：14081804
> 
> 赞同：0
> 
> 时间：2012-12-29T12:43:53.460
> 
> 标签：android, android-listview, simpleadapter

我有一个包含从不同 URL 检索的位图的位图列表。

```
@Override
protected List<Bitmap> doInBackground(Void... params) {
    for (int i=0;i<payss.size();i++){
        try {
            list_drapeaux.add(BitmapFactory.decodeStream((InputStream)new URL(payss.get(i).getLogo()).getContent()));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return list_drapeaux;
} 
```

`payss.get(i).getLogo())`包含不同的图像 URL。

我正在使用 SimpleAdapter 在 ListView 中设置这些图像：

```
final List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();
for (int i=0;i<payss.size();i++){
    Map<String,Object> map = new HashMap<String,Object>();
    Bitmap contact_pic = pays_drapeaux.get(i);   
    drawable = new BitmapDrawable(contact_pic); 
    map.put("pays", payss.get(i).getNom());
    map.put("drapeau",contact_pic);
    Log.i("PAYS",payss.get(i).getNom());
    list.add(map);
}
SimpleAdapter adapter = new SimpleAdapter(fa, (List<? extends Map<String, ?>>) list,
    R.layout.pays_item, new String[] {"drapeau","pays"},
    new int[] { R.id.image,R.id.text_pays});
setListAdapter(adapter); 
```

我正在将 Bitmap 转换为 Drawable 并将其添加到地图然后列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:41:21.583

我建议使用[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)而不是 SimpleAdater，因为它可以让您更灵活地显示数据的内容和方式，并通过 getView 方法设置图像（观看[此视频](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)了解更多信息）。

另外，我建议永远不要以这种方式存储位图，因为您不知道与可用内存相比它们使用了多少内存。改用缓存机制（阅读[此处](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)了解更多信息）。

# javascript - javascript增强原型和链

> ID：14081805
> 
> 赞同：1
> 
> 时间：2012-12-29T12:43:57.717
> 
> 标签：javascript, prototype, chain, function-object

我不明白为什么如果我将属性或函数添加到现有函数对象的原型中，则该属性或函数不会被识别为属于该对象。

例子：

```
var a = function() {};
a.prototype.c = function() {/* code */};
a.c();           //c is not a function 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T12:48:27.703

这是因为您将它添加到该函数的原型中，而不是添加到它本身。但是，如果您从中制作一个新对象，您将拥有`c`

```
var a = function() {};
a.prototype.c = function() {/* code */};

var b = new a;
b.c(); // works as expected 
```

# java - java和python中的漩涡散列给出不同的结果

> ID：14081806
> 
> 赞同：1
> 
> 时间：2012-12-29T12:44:07.947
> 
> 标签：java, python, hash, whirlpool

我有两个项目。[panager](https://github.com/ttouch/panager)和[panager-android](https://github.com/ttouch/panager-android)。我使用漩涡哈希算法，并且使用相同的数据 panager 给出的结果与 panager-android 不同。panager 是用 python 编写的，而 panager-android (guess) 是用 java 编写的。我是 Java 新手，所以放轻松：P

在 python 中，我使用在网上找到的模块（whirlpool.py），在 java 中，我使用 jacksum 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:00:40.960

Whirlpool 规范有不同版本，它们为相同的输入生成不同的输出。看起来`whirlpool.py`可能正在实现原始的 Whirlpool（称为“Whirlpool-0”），而在 panager-android 中您使用的是 Whirlpool-2：

```
AbstractChecksum encode = JacksumAPI.getChecksumInstance("whirlpool2"); 
```

尝试将其更改为“whirlpool0”，看看它是否与您的 Python 实现匹配。如果做不到这一点，请尝试“whirlpool1”。

[对于给定的测试输入](https://en.wikipedia.org/wiki/Whirlpool_%28cryptography%29#Version_changes)，维基百科已经知道每个版本的 Whirlpool 哈希值，您可以使用它来识别有问题的 Whirlpool 实现的版本，或者找出它是否完全错误和损坏。

# javascript - 当我尝试连接数据库时有什么问题吗？

> ID：14081809
> 
> 赞同：0
> 
> 时间：2012-12-29T12:44:37.330
> 
> 标签：javascript, node.js

这是我的代码：

```
var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'root',
  password : '1',
  database : 'test'
});
connection.connect();

data = connection.query('SELECT * FROM deneme', function(err, rows, fields){
    if(err) throw err;
    veri = rows;
    return veri;
});

console.log(data); 
```

当我运行这个文件（index.js）如下

> 节点索引.js

它返回一些错误并且不显示数据。

我的mysql数据如下：

```
INSERT INTO `deneme` (`id`, `name`) VALUES
(1, 'yusuf'),
(2, 'ali'); 
```

问题是什么？

错误是：

```
{ _callback: [Function],
  _ended: false,
  _callSite: '    at Query.Sequence (/home/yusuf/Masaüstü/node/node_modules/mysql/lib/protocol/sequences/Sequence.js:15:21)\n    at new Query (/home/yusuf/Masaüstü/node/node_modules/mysql/lib/protocol/sequences/Query.js:11:12)\n    at Protocol.query (/home/yusuf/Masaüstü/node/node_modules/mysql/lib/protocol/Protocol.js:41:24)\n    at Connection.query (/home/yusuf/Masaüstü/node/node_modules/mysql/lib/Connection.js:90:25)\n    at Object.<anonymous> (/home/yusuf/Masaüstü/node/index.js:10:19)\n    at Module._compile (module.js:446:26)\n    at Object..js (module.js:464:10)\n    at Module.load (module.js:353:31)\n    at Function._load (module.js:311:12)\n    at Array.0 (module.js:484:10)',
  sql: 'SELECT * FROM deneme',
  typeCast: true,
  nestTables: false,
  _resultSet: null,
  _results: [],
  _fields: [],
  _index: 0,
  _loadError: null,
  _events: { error: [Function], packet: [Function], end: [Function] } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T15:04:11.270

您要同步而不是异步地做某事。

你的问题在这里：

```
data = connection.query('SELECT * FROM deneme', function(err, rows, fields){
    if(err) throw err;
    veri = rows;
    return veri;
});

console.log(data); 
```

您在执行回调之前记录数据。这就是为什么您需要在其回调中包含代码的原因，因此它说“一旦您完成了获取数据库结果，请执行此操作”。

```
data = connection.query('SELECT * FROM deneme', function(err, rows, fields){
    if(err) throw err;
    veri = rows;
    console.log(veri); // will be logged once its finished
}); 
```

您可以通过执行以下操作访问此函数之外的结果：

```
var results;
data = connection.query('SELECT * FROM deneme', function(err, rows, fields){
    if(err) throw err;
    veri = rows;
    results = veri;
    someOtherFunction();
});

var someOtherFunction = function(){
  console.log(results);
} 
```

您可以查看一个名为的模块，该模块`async`擅长做您想做的事情。

[https://github.com/caolan/async](https://github.com/caolan/async)

附言

欢迎来到nodejs。

# android - 在android应用程序中从互联网检索一个简单的字符串

> ID：14081812
> 
> 赞同：0
> 
> 时间：2012-12-29T12:44:48.263
> 
> 标签：android, string, private

我有一个简单的问题：我有一个私人社区 android 应用程序不在市场上，所以我的问题是当我升级到应用程序时，我想要一个按钮，让应用程序的用户验证他们的应用程序是否是过时了。。

所以我想要一种简单的方法来从我更新到网络的文件中检索一个简单的字符串以及应用程序的版本，接下来我的应用程序将比较文件中的版本和当前安装在手机上的版本。

你能给我一些方向吗？

在 Dropbox 中存储一个 xml 并解析它？:S 有什么更实用的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:49:30.020

谷歌：“Android php json”没有双引号......

# silverlight - WP7 XAML 绑定到父级中的属性

> ID：14081815
> 
> 赞同：0
> 
> 时间：2012-12-29T12:45:09.257
> 
> 标签：silverlight, windows-phone-7, data-binding

我正在用 WP7 (Silverlight 3) 编写应用程序。我有一个看起来像这样的视图模型

```
public class MainViewModel
{
   public List<ActivityTypes> ActivityTypes{get;set;}
   public RelayCommand LoadActivity{get;set;}
} 
```

我的页面数据上下文设置为视图模型，并且我有一个列表框，其项目源设置为 ActivityTypes 集合。在列表框中，我试图呈现一个按钮列表，这些按钮的命令绑定到视图模型上的 LoadActivity 属性。如果您想知道它是什么，RelayCommand 是 MVVM Light 工具包的一部分。

我遇到的问题是我找不到将按钮命令绑定到 LoadActivity 属性的方法，因为我的列表框的 itemsource 设置为 Activitytypes 集合，并且此属性位于父级中。我读过关于 FindAncester 的文章，但 Silverlight 3 似乎不支持它。

我的 XAML 看起来像这样

```
 <UserControl.Resources>
        <DataTemplate x:Key="ActivityTypeListTemplate">
            <StackPanel>
                <Button Command="{Binding LoadActivity}"> <!--binding not found as we're in the collection-->
                    <TextBlock Text="{Binding Name}" FontSize="50"/>
                </Button>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}">
        <ListBox Margin="0" ItemsSource="{Binding ActivityTypes}" ItemTemplate="{StaticResource ActivityTypeListTemplate}"/>
    </Grid> 
```

编写这样的代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:35:59.693

没有“直接”的方法可以做到这一点。您可以将 Buttons DataContext 设置为 MainViewModel（最好作为 StaticResource 链接）并且它会起作用。

看看[Bind to parent object in xaml](https://stackoverflow.com/questions/8789537/bind-to-parent-object-in-xaml)

# java - java - 如何在没有数据库的情况下将值存储在jtable中

> ID：14081816
> 
> 赞同：0
> 
> 时间：2012-12-29T12:45:10.503
> 
> 标签：java, sql

```
private void bt_commit1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
        DBUtil util = new DBUtil();
        try {

            Connection con = util.getConnection();
            PreparedStatement stmt = con.prepareStatement("INSERT INTO dbo.bk_det(rm_id,bk_name,bk_branch) VALUES (?,?,?)");
            String rm = (tf_rm_id.getText().trim() == null || tf_rm_id.getText().equals("")) ? "0" : tf_rm_id.getText();
            String a = (txtbkname.getText().trim() == null || txtbkname.getText().equals("")) ? "UNKNOWN" : txtbkname.getText();
            String b = (txtbkbranch.getText().trim() == null || txtbkbranch.getText().equals("")) ? "UNKNOWN" : txtbkbranch.getText();

            stmt.setString(1, ""+(rm));
            stmt.setString(2, ""+(a));
            stmt.setString(3, ""+(b));

            stmt.execute();
            JOptionPane.showMessageDialog(null, "COMMITED SUCCESSFULLY!");
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex.getMessage());
            Logger.getLogger(Demo.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

我实际上想在不使用 sql 数据库的情况下将值存储在表中。在这里，我正在使用 sql 语句连接到我的数据库，但我想在没有数据库的情况下将 netbeans 中的 java gui 中的值存储到 jtabel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:03:36.143

由于 JTable 是一个 GUI 组件，因此您不能在其中存储值。它只渲染它们。一旦对该组件的每个引用都丢失了，您就无法保存您的信息。

另一方面，Netbeans 它只是一个 IDE，如 eclipse 或其他。您可以在其编辑器上绘制一个 JTable 组件并启动您的应用程序，但它不能完成存储目的。

尽管如此，如果您正在寻找 MySQL、PostgreSQL 或 Oracle 等数据库以外的存储机制，您可以使用 MySQLite 或 XML 文件，仅举几例。

# java - 如何从地理编码网址获取状态元素

> ID：14081818
> 
> 赞同：0
> 
> 时间：2012-12-29T12:45:22.883
> 
> 标签：java, gson, latitude-longitude, geocode, google-latitude

我想从地理编码 url 中获取状态元素的值。

```
{

    "results": [
        {
            "address_components": [
                {
                    "long_name": "India",
                    "short_name": "IN",
                    "types": [
                        "country",
                        "political"
                    ]
                }
            ],
            "formatted_address": "India",
            "geometry": {
                "bounds": {
                    "northeast": {
                        "lat": 35.5043404,
                        "lng": 97.395555
                    },
                    "southwest": {
                        "lat": 6.747138899999999,
                        "lng": 68.1623859
                    }
                },
                "location": {
                    "lat": 20.593684,
                    "lng": 78.96288
                },
                "location_type": "APPROXIMATE",
                "viewport": { … }
            },
            "types": [
                "country",
                "political"
            ]
        }
    ],
    "status": "OK"

} 
```

> 我可以使用以下代码获得纬度。我试图获取状态元素，但仍然无法弄清楚如何去做。这里我使用 gson。

```
URL url = new URL("http://maps.googleapis.com/maps/api/geocode/json?address=india&sensor=false");

  String output = new Scanner(url.openStream()).useDelimiter("\\A").next();
  JsonParser jsonParser = new JsonParser();
  JsonObject lat = jsonParser.parse(output).getAsJsonObject().getAsJsonArray("results").get(0).getAsJsonObject().getAsJsonObject("geometry").getAsJsonObject().getAsJsonObject("location");
   String latitude = lat.get("lat").getAsString(); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T14:03:33.550

你可以使用

```
String status = jsonParser.parse(output).getAsJsonObject().get("status").getAsString(); 
```

但请确保只解析一次输出，即将结果存储`jsonParser.parse(output).getAsJsonObject()`在局部变量中。

# android - 何时以及如何退出文件上传服务

> ID：14081823
> 
> 赞同：1
> 
> 时间：2012-12-29T12:45:48.377
> 
> 标签：android

1.  我有一个实现文件上传服务的类。Activity 绑定到它并为其提供要上传的文件列表，然后立即解除绑定。这些文件然后由服务在后台线程（异步任务）中一一上传。

2.  我使用 startService() 在我的仪表板活动中启动此服务，以便它一直运行直到专门调用 stopService()。

3.  现在，我的问题是我什么时候停止这项服务？

基本上我需要检查两个条件： 1：所有文件都已上传；2：应用程序已退出。此外，要退出应用程序，用户必须按仪表板活动上的后退按钮。

我本可以覆盖后退按钮并查询服务是否还有任何文件，但我不想使用该方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:47:36.077

> Activity 绑定到它并为其提供要上传的文件列表，然后立即解除绑定。

我建议然后使用`startService()`而不是`bindService()`.

> 这些文件然后由服务在后台线程（异步任务）中一一上传。

这似乎更适合`startService()`和`IntentService`（或者[，`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)如果您担心设备在上传过程中睡着了）。

> 我使用 startService() 在仪表板活动中启动此服务

如果您用于`startService()`发送工作，则不需要这样做。

> 这样它就会一直运行，直到专门调用 stopService() 为止。

理想情况下，服务会自行关闭，就像这样`IntentService`做一样。毕竟，只有服务才知道服务何时完成。

> 我的问题是我什么时候停止这项服务？

当你没有更多的工作要做的时候。`IntentService`自动执行此操作。如果您真的想维护自己的线程池来完成工作，那么当您的工作队列为空并且所有线程都完成时，`stopSelf()`从服务内部调用。

> 基本上我需要检查两个条件：1：所有文件都已上传

是的。

> 2：应用程序已退出

不，您的 UI 不应该关心服务是否正在运行。该服务应该照顾好自己。

> 此外，要退出应用程序，用户必须按仪表板活动上的后退按钮。

欢迎用户随意离开您的应用程序：BACK、HOME、RECENTS、a `Notification`、来电等。

> 有什么建议么？

使用`IntentService`. 通过调用 发送要上传的作业，将`startService()`所有需要的数据打包到`Intent`使用的 with `startService()`（例如，额外的）中。做你的上传工作`onHandleIntent()`。如果需要，可以使用`LocalBroadcastManager`让应用程序中的 Activity 了解上传状态，这样如果他们愿意，他们可以在其 UI 中反映这一点。`IntentService`将在其工作队列清空时自行停止。

# mysql - 获取mysql中的好友列表

> ID：14081825
> 
> 赞同：1
> 
> 时间：2012-12-29T12:46:15.027
> 
> 标签：mysql, sql, sql-server

我有一张像这里的桌子：

```
friend : (userid , friendid) 
```

所以，如果`user_a`是朋友`user_b`，我会将下面的行加载到表格中

```
user_a , user_b 
```

而且**我不**插入`usar_b , user_a`表中。

那么如何使用 mysql 查询获取 user_b 的好友列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T12:55:45.570

假设您想要userA的朋友
您需要获取userA的所有朋友，并将其与朋友为userA的所有用户联合。

假设 userA 的 ID 是`1001`查询将是

```
select UserID from Friends
where FriendID = 1001
Union All
select FriendID from Friends
where UserID = 1001 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:49:04.847

该条件`(t1.id<t2.id)`允许我们仅包含一对`a,b`并排除`b,a`

```
select t1.userid user1, t2.userid user2
FROM friends t1
JOIN friends t2 ON (t1.friend=t2.id) and (t1.id<t2.id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:54:47.640

```
select a.user,a.friend from 
friend a,friend b
where a.user=b.user and
a.friend=b.friend and a.user<>b.friend
and a.friend<>b.user 
```

尝试这个

# java - hibernate.hbm2ddl.import_files：文件路径

> ID：14081832
> 
> 赞同：5
> 
> 时间：2012-12-29T12:47:12.087
> 
> 标签：java, sql, spring, hibernate, import

我需要hibernate读取一个sql文件并在实例化过程中做它需要做的任何事情`SessionFactory`，所以我做了以下配置：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="hibernate.hbm2ddl.import_files">/WEB-INF/resources/sql/quartz.sql</prop>
        </props>
    </property>
    <property name="packagesToScan" value="com.edfx.adb.persist.entity" />
    <property name="entityInterceptor" ref="entityInterceptor" />
</bean> 
```

这些`quartz.sql`文件包含为 Quartz Scheduler 创建表所需的脚本。但似乎它不起作用；在 sql 文件中定义的要创建的表不会被创建，而是由带注释的类定义的表被创建。

这是`sql`文件的内容：

```
#
# Quartz seems to work best with the driver mm.mysql-2.0.7-bin.jar
#
# PLEASE consider using mysql with innodb tables to avoid locking issues
#
# In your Quartz properties file, you'll need to set 
# org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
#

DROP TABLE IF EXISTS QRTZ_FIRED_TRIGGERS;
DROP TABLE IF EXISTS QRTZ_PAUSED_TRIGGER_GRPS;
DROP TABLE IF EXISTS QRTZ_SCHEDULER_STATE;
DROP TABLE IF EXISTS QRTZ_LOCKS;
DROP TABLE IF EXISTS QRTZ_SIMPLE_TRIGGERS;
DROP TABLE IF EXISTS QRTZ_SIMPROP_TRIGGERS;
DROP TABLE IF EXISTS QRTZ_CRON_TRIGGERS;
DROP TABLE IF EXISTS QRTZ_BLOB_TRIGGERS;
DROP TABLE IF EXISTS QRTZ_TRIGGERS;
DROP TABLE IF EXISTS QRTZ_JOB_DETAILS;
DROP TABLE IF EXISTS QRTZ_CALENDARS;

CREATE TABLE QRTZ_JOB_DETAILS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    JOB_NAME  VARCHAR(200) NOT NULL,
    JOB_GROUP VARCHAR(200) NOT NULL,
    DESCRIPTION VARCHAR(250) NULL,
    JOB_CLASS_NAME   VARCHAR(250) NOT NULL,
    IS_DURABLE VARCHAR(1) NOT NULL,
    IS_NONCONCURRENT VARCHAR(1) NOT NULL,
    IS_UPDATE_DATA VARCHAR(1) NOT NULL,
    REQUESTS_RECOVERY VARCHAR(1) NOT NULL,
    JOB_DATA BLOB NULL,
    PRIMARY KEY (SCHED_NAME,JOB_NAME,JOB_GROUP)
);

CREATE TABLE QRTZ_TRIGGERS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    TRIGGER_NAME VARCHAR(200) NOT NULL,
    TRIGGER_GROUP VARCHAR(200) NOT NULL,
    JOB_NAME  VARCHAR(200) NOT NULL,
    JOB_GROUP VARCHAR(200) NOT NULL,
    DESCRIPTION VARCHAR(250) NULL,
    NEXT_FIRE_TIME BIGINT(13) NULL,
    PREV_FIRE_TIME BIGINT(13) NULL,
    PRIORITY INTEGER NULL,
    TRIGGER_STATE VARCHAR(16) NOT NULL,
    TRIGGER_TYPE VARCHAR(8) NOT NULL,
    START_TIME BIGINT(13) NOT NULL,
    END_TIME BIGINT(13) NULL,
    CALENDAR_NAME VARCHAR(200) NULL,
    MISFIRE_INSTR SMALLINT(2) NULL,
    JOB_DATA BLOB NULL,
    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (SCHED_NAME,JOB_NAME,JOB_GROUP)
        REFERENCES QRTZ_JOB_DETAILS(SCHED_NAME,JOB_NAME,JOB_GROUP)
);

CREATE TABLE QRTZ_SIMPLE_TRIGGERS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    TRIGGER_NAME VARCHAR(200) NOT NULL,
    TRIGGER_GROUP VARCHAR(200) NOT NULL,
    REPEAT_COUNT BIGINT(7) NOT NULL,
    REPEAT_INTERVAL BIGINT(12) NOT NULL,
    TIMES_TRIGGERED BIGINT(10) NOT NULL,
    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
        REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
);

CREATE TABLE QRTZ_CRON_TRIGGERS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    TRIGGER_NAME VARCHAR(200) NOT NULL,
    TRIGGER_GROUP VARCHAR(200) NOT NULL,
    CRON_EXPRESSION VARCHAR(200) NOT NULL,
    TIME_ZONE_ID VARCHAR(80),
    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
        REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
);

CREATE TABLE QRTZ_SIMPROP_TRIGGERS
  (          
    SCHED_NAME VARCHAR(120) NOT NULL,
    TRIGGER_NAME VARCHAR(200) NOT NULL,
    TRIGGER_GROUP VARCHAR(200) NOT NULL,
    STR_PROP_1 VARCHAR(512) NULL,
    STR_PROP_2 VARCHAR(512) NULL,
    STR_PROP_3 VARCHAR(512) NULL,
    INT_PROP_1 INT NULL,
    INT_PROP_2 INT NULL,
    LONG_PROP_1 BIGINT NULL,
    LONG_PROP_2 BIGINT NULL,
    DEC_PROP_1 NUMERIC(13,4) NULL,
    DEC_PROP_2 NUMERIC(13,4) NULL,
    BOOL_PROP_1 VARCHAR(1) NULL,
    BOOL_PROP_2 VARCHAR(1) NULL,
    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP) 
    REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
);

CREATE TABLE QRTZ_BLOB_TRIGGERS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    TRIGGER_NAME VARCHAR(200) NOT NULL,
    TRIGGER_GROUP VARCHAR(200) NOT NULL,
    BLOB_DATA BLOB NULL,
    PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
        REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
);

CREATE TABLE QRTZ_CALENDARS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    CALENDAR_NAME  VARCHAR(200) NOT NULL,
    CALENDAR BLOB NOT NULL,
    PRIMARY KEY (SCHED_NAME,CALENDAR_NAME)
);

CREATE TABLE QRTZ_PAUSED_TRIGGER_GRPS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    TRIGGER_GROUP  VARCHAR(200) NOT NULL, 
    PRIMARY KEY (SCHED_NAME,TRIGGER_GROUP)
);

CREATE TABLE QRTZ_FIRED_TRIGGERS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    ENTRY_ID VARCHAR(95) NOT NULL,
    TRIGGER_NAME VARCHAR(200) NOT NULL,
    TRIGGER_GROUP VARCHAR(200) NOT NULL,
    INSTANCE_NAME VARCHAR(200) NOT NULL,
    FIRED_TIME BIGINT(13) NOT NULL,
    PRIORITY INTEGER NOT NULL,
    STATE VARCHAR(16) NOT NULL,
    JOB_NAME VARCHAR(200) NULL,
    JOB_GROUP VARCHAR(200) NULL,
    IS_NONCONCURRENT VARCHAR(1) NULL,
    REQUESTS_RECOVERY VARCHAR(1) NULL,
    PRIMARY KEY (SCHED_NAME,ENTRY_ID)
);

CREATE TABLE QRTZ_SCHEDULER_STATE
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    INSTANCE_NAME VARCHAR(200) NOT NULL,
    LAST_CHECKIN_TIME BIGINT(13) NOT NULL,
    CHECKIN_INTERVAL BIGINT(13) NOT NULL,
    PRIMARY KEY (SCHED_NAME,INSTANCE_NAME)
);

CREATE TABLE QRTZ_LOCKS
  (
    SCHED_NAME VARCHAR(120) NOT NULL,
    LOCK_NAME  VARCHAR(40) NOT NULL, 
    PRIMARY KEY (SCHED_NAME,LOCK_NAME)
);

commit; 
```

这是我放置`sql`文件的位置：

![在此处输入图像描述](../Images/5586629be49a75e371f8c646f792b2a9.png)

放置文件的正确路径是什么？

我正在使用带有 Spring 3 的 Hibernate 4。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-29T12:50:07.967

> hibernate.hbm2ddl.import_files....
> 
> 这些语句仅在创建模式时执行，即如果 hibernate.hbm2ddl.auto 设置为 create 或 create-drop。

来自[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#configuration-misc-properties](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#configuration-misc-properties)

而你的是更新，似乎这可能是原因。

# java - 使用 bean 类填充 Jtextfield 时出现 java.lang.NullPointerException

> ID：14081833
> 
> 赞同：1
> 
> 时间：2012-12-29T12:47:13.583
> 
> 标签：java, mysql, swing, netbeans, javabeans

这是我的课程，它是一个由两个选项卡组成的 gui，我的个人资料和编辑个人资料。当索引值更改为1.当标签索引为0时，我在“MyProfiletabStateChanganged”方法中存在问题，'MyProfile（）'方法成功执行，但是当索引为1时，'EditProfile（）'给出太多错误. editprofile() 的目的只是从 bean 类中提取值并将其设置为适当的文本字段。我究竟做错了什么？请注意使用 setter 方法正确填充了 bean 类变量，但是在这个类中我无法使用 getter 检索值？也许它正在检索，但问题在于无法将其设置为文本字段。

```
public class MainMenu extends javax.swing.JFrame {

    Academic ac = new Academic();
    academicBean bn = new academicBean();

    /**
     * Creates new form MainMenu
     */
    public MainMenu() {
        initComponents();
        // myProfile(); 
        // editProfile(); 
    }

    public void myProfile() {
        ac.retrieveAcademic();
        nameLabel.setText(""+ac.title+" "+ac.forename+" "+ac.surname);
        roleLabel.setText("Role:    " + ac.role);
        roomLabel.setText("Room:    " + ac.room);
        pageLabel.setText("Page:    " + ac.page);
        hoursLabel.setText("Hours:   " + ac.hours);
        phoneLabel.setText("Phone:   " + ac.phone);
        mobileLabel.setText("Mobile:  " + ac.mobile);
        emailLabel.setText("Email:   " + ac.email);
        imageLabel.setIcon(ac.format);
    }

    public void editProfile() {
        ac.retrieveAcademic();
        idLabel.setText("Academic Id:    "+bn.getAcademicId());
        txt_title.setSelectedItem(bn.getTitle().toString());
        txt_fn.setText(bn.getForename().toString());
        txt_ln.setText(bn.getSurname().toString());
        combo_role.setSelectedItem(bn.getRole().toString());
        txt_room.setText(bn.getRoom().toString());
        txt_page.setText(bn.getPage().toString());
        txt_hours.setText(bn.getHours().toString());
        txt_phone.setText(bn.getPhone().toString());
        txt_mobile.setText(bn.getMobile().toString());
        txt_email.setText(bn.getEmail().toString());
    }

    private void myProfileTabStateChanged(javax.swing.event.ChangeEvent evt) {
        JTabbedPane sourceTabbedPane = (JTabbedPane) evt.getSource();
        int index = sourceTabbedPane.getSelectedIndex();

            if (index == 0) {
            myProfile();
        }

        else if (index == 1) {
            editProfile(); 
        }
    } 
```

//类学术

```
public class Academic extends javax.swing.JFrame {
   String filename = null;
   int s = 0;
   byte[] person_image = null;
   ImageIcon format = null;

   LoginBean l = new LoginBean();
   Connection con = javaconnect.ConnectDB();
   academicBean bean = new academicBean();

   PreparedStatement pst = null;
   ResultSet rs = null;

   int id;
   String title;
   String titleValue;
   String forename;
   String surname;
   String role;
   String roleValue;
   String room;
   String page;
   String hours;
   String phone;
   String mobile;
   String email;
   byte[] imagedata = null;

   public Academic() {
      initComponents();
   }

   @SuppressWarnings("unchecked")
   public void retrieveAcademic() {

      try {
         pst = con
               .prepareStatement("SELECT * FROM AcademicInfo where Email=? and Password=?");
         pst.setString(1, l.getUsername());
         pst.setString(2, l.getPassword());
         rs = pst.executeQuery();
         while (rs.next()) {
            id = (rs.getInt(1));
            bean.setAcademicId(id);
            title = (rs.getString(2));
            bean.setTitle(title);
            forename = (rs.getString(3));
            bean.setForename(forename);
            surname = (rs.getString(4));
            bean.setSurname(surname);
            role = (rs.getString(5));
            bean.setRole(role);
            room = (rs.getString(6));
            bean.setRoom(room);
            page = (rs.getString(7));
            bean.setPage(page);
            hours = (rs.getString(8));
            bean.setHours(hours);
            phone = (rs.getString(9));
            bean.setPhone(phone);
            mobile = (rs.getString(10));
            bean.setMobile(mobile);
            email = (rs.getString(11));
            bean.setEmail(email);
            imagedata = (rs.getBytes("Image"));
            format = new ImageIcon(imagedata);

         } // end while

      } catch (SQLException ex) {
         Logger lgr = Logger.getLogger(Academic.class.getName());
         lgr.log(Level.SEVERE, ex.getMessage(), ex);

      } finally {

         try {
            if (rs != null) {
               rs.close();
            }
            if (pst != null) {
               pst.close();
            }
            if (con != null) {
               con.close();
            }

         } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(Academic.class.getName());
            lgr.log(Level.WARNING, ex.getMessage(), ex);
         }
      }
   }
} 
```

// 豆类

```
public class AcademicBean {

private int academicid;
private String title;
private String forename;
private String surname;
private String role;
private String room;
private String page;
private String hours;
private String phone;
private String mobile;
private String email;
private byte []  image;
private String pass; 

 //Setters

public void setAcademicId (int academicid) {
    this.academicid = academicid;
}   
public void setTitle(String title) {
    this.title = title;
}   
public void setForename(String forename) {
    this.forename = forename;
}
public void setSurname(String surname) {
    this.surname = surname;
}
public void setRole(String role) {
    this.role = role;
}
public void setRoom(String room) {
    this.room = room;
}
public void setPage(String page) {
    this.page = page;
}
public void setHours(String hours) {
    this.hours = hours;
}
public void setPhone(String phone) {
    this.phone = phone;
}
public void setMobile(String mobile) {
    this.mobile = mobile;
}

public void setEmail(String email) {
    this.email = email;
}
public void setImage (byte [] image) {

     this.image = image; 
 }
public void setPassword (String pass) {

     this.pass= pass;
 }

//Gettters 

public String getPassword () {

     return pass;  
 }

public int getAcademicId() {

     return academicid; 
 }

public byte [] getImage() {
     return image;
 }
public String getTitle() {
    return title;
}
public String getForename() {
    return forename;
}
public String getSurname() {
    return surname;
}
public String getRole() {
    return role;
}
public String getRoom() {
    return room;
}
public String getPage() {
    return page;
}
public String getHours() {
    return hours;
}
public String getPhone() {
    return phone;
}
public String getMobile() {
    return mobile;
}
public String getEmail() {
    return email;
}
} 
```

//堆栈跟踪

```
线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException
  在 org.sqlite.PrepStmt.(PrepStmt.java:37)
  在 org.sqlite.Conn.prepareStatement(Conn.java:231)
  在 org.sqlite.Conn.prepareStatement(Conn.java:224)
  在 org.sqlite.Conn.prepareStatement(Conn.java:213)
  在 eecsCRM.Academic.retrieveAcademic(Academic.java:68)
  在 eecsCRM.MainMenu.editProfile(MainMenu.java:50)
  在 eecsCRM.MainMenu.myProfileTabStateChanged(MainMenu.java:569)
  在 eecsCRM.MainMenu.access 300 美元（MainMenu.java:13）
  在 eecsCRM.MainMenu$4.stateChanged(MainMenu.java:194)
  在 javax.swing.JTabbedPane.fireStateChanged(JTabbedPane.java:400)
  在 javax.swing.JTabbedPane$ModelListener.stateChanged(JTabbedPane.java:253)
  在 javax.swing.DefaultSingleSelectionModel.fireStateChanged(DefaultSingleSelectionModel.java:116)
  在 javax.swing.DefaultSingleSelectionModel.setSelectedIndex(DefaultSingleSelectionModel.java:50)
  在 javax.swing.JTabbedPane.setSelectedIndexImpl (JTabbedPane.java:599)
  在 javax.swing.JTabbedPane.setSelectedIndex(JTabbedPane.java:574)
  在 javax.swing.plaf.basic.BasicTabbedPaneUI$Handler.mousePressed(BasicTabbedPaneUI.java:3628)
  在 javax.swing.plaf.synth.SynthTabbedPaneUI$1.mousePressed(SynthTabbedPaneUI.java:279)
  在 java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:262)
  在 java.awt.Component.processMouseEvent(Component.java:6264)
  在 javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
  在 java.awt.Component.processEvent(Component.java:6032)
  在 java.awt.Container.processEvent(Container.java:2041)
  在 java.awt.Component.dispatchEventImpl(Component.java:4630)
  在 java.awt.Container.dispatchEventImpl(Container.java:2099)
  在 java.awt.Component.dispatchEvent(Component.java:4460)
  在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
  在 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4235)
  在 java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
  在 java.awt.Container.dispatchEventImpl(Container.java:2085)
  在 java.awt.Window.dispatchEventImpl(Window.java:2478)
  在 java.awt.Component.dispatchEvent(Component.java:4460)
  在 java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
  在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
  在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
  在 java.awt.EventDispatchThread.pumpEventsForHierarchy (EventDispatchThread.java:174)
  在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
  在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
  在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:02:03.957

只是一个疯狂的猜测：您似乎至少有两个完全不相关的 AcademicBean 对象（请注意，该类应命名为AcademicBean），**一个**在 Academic 中，一个在 MainMenu 中。我怀疑它们应该是相同的。

也许 MainMenu 应该有：

```
academicBean bn = ac.getAcademicBean(); 
```

和学术有：

```
public academicBean getAcademicBean() {
   return bean;
} 
```

以便 MainMenu 可以提取 Academic 的 bean，使 bean 变量引用同一个 bean 对象。

# html - 使用 CSS 垂直对齐嵌套的 DIV

> ID：14081835
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:47:29.467
> 
> 标签：html, css

看看

[http://jsfiddle.net/user0815/ZU9bT/](http://jsfiddle.net/user0815/ZU9bT/)

我希望两个包含图像的 DIV 都应该在外部 DIV 内垂直对齐。

我尝试了使用的常见技巧

```
display: table-cell
vertical-align: center 
```

但没有爱。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:53:27.753

它应该是`vertical-align: middle`而*不是* `vertical-align: center`。

检查这个**演示**：http: [//jsfiddle.net/ZU9bT/2/](http://jsfiddle.net/ZU9bT/2/)

* * *

**更新了演示**，`display: inline-block`而不是：http `float: left`: [//jsfiddle.net/ZU9bT/3/](http://jsfiddle.net/ZU9bT/3/)

# iphone - iPhone TextView 被键盘隐藏

> ID：14081841
> 
> 赞同：0
> 
> 时间：2012-12-29T12:48:02.200
> 
> 标签：iphone, objective-c, ios, uitextfield

选中时我有一个`UITextView`可编辑的键盘。问题是当文本太大时，他会躲在键盘后面。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:01:52.600

通过此代码向上移动您的视图

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
  //change origin y 
[UIView beginAnimations:nil context:self.view];
            [UIView setAnimationDuration:0.25];
            [self.view setFrame:CGRectMake(0,-150,320,436)];
            [UIView commitAnimations];

}
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
   //reset origin y 
[UIView beginAnimations:nil context:self.view];
            [UIView setAnimationDuration:0.25];
            [self.view setFrame:CGRectMake(0,0,320,436)];
            [UIView commitAnimations];

} 
```

根据您的要求设置 x 和 y 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:57:17.083

这个问题已经被问过很多次了。请在发布问题之前进行一些谷歌搜索。无论如何...

看到其他人提出的[这个问题](https://stackoverflow.com/questions/1126726/how-to-make-a-uitextfield-move-up-when-keyboard-is-present?page=1&tab=active#tab-top)并已成为社区维基。这个问题已经发布了 31 个答案。

另外，您可以参考[本教程](http://www.iphonesampleapps.com/2009/12/adjust-uitextfield-hidden-behind-keyboard-with-uiscrollview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:57:27.780

编辑 UITextField 时更改基本视图大小，减小基本视图原点 y 以编辑文本字段

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
  //change origin y 
}
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
   //reset origin y 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T13:39:31.867

使用`UITextfield`.

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
            [UIView beginAnimations:nil context:self.view];
            [UIView setAnimationDuration:duration];
            //change origin y 
            [self.view setFrame:CGRectMake(X,newY,width,height)];
            [UIView commitAnimations];

}
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
            [UIView beginAnimations:nil context:self.view];
            [UIView setAnimationDuration:duration];
            //reset origin y 
            [self.view setFrame:CGRectMake(X,Y,width,height)];
            [UIView commitAnimations];
} 
```

不要忘记在“.h”文件和适当的文本文件中设置 UITextFieldDelegate `textfiled.delegate = self`。

# c# - 此操作会创建结构不正确的文档

> ID：14081843
> 
> 赞同：26
> 
> 时间：2012-12-29T12:48:09.930
> 
> 标签：c#, asp.net, .net, linq, linq-to-xml

我是新手`XML`并尝试了以下方法，但我遇到了一个例外。有人能帮我吗？

例外是`This operation would create an incorrectly structured document`

我的代码：

```
string strPath = Server.MapPath("sample.xml");
XDocument doc;
if (!System.IO.File.Exists(strPath))
{
    doc = new XDocument(
        new XElement("Employees",
            new XElement("Employee",
                new XAttribute("id", 1),
                    new XElement("EmpName", "XYZ"))),
        new XElement("Departments",
            new XElement("Department",
                new XAttribute("id", 1),
                    new XElement("DeptName", "CS"))));

    doc.Save(strPath);
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-29T12:52:33.493

XML 文档必须只有一个根元素。但是您正在尝试在根级别添加`Departments`和节点。`Employees`添加一些根节点来解决这个问题：

```
doc = new XDocument(
    new XElement("RootName",
        new XElement("Employees",
            new XElement("Employee",
                new XAttribute("id", 1),
                new XElement("EmpName", "XYZ"))),

        new XElement("Departments",
                new XElement("Department",
                    new XAttribute("id", 1),
                    new XElement("DeptName", "CS"))))
                ); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-29T12:55:18.053

您需要添加根元素。

```
doc = new XDocument(new XElement("Document"));
    doc.Root.Add(
        new XElement("Employees",
            new XElement("Employee",
                new XAttribute("id", 1),
                    new XElement("EmpName", "XYZ")),
        new XElement("Departments",
            new XElement("Department",
                new XAttribute("id", 1),
                    new XElement("DeptName", "CS"))))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-02T19:36:33.460

在我的情况下，我试图向 xDocument 添加多个 XElement，这会引发此异常。请参阅下面的正确代码，它解决了我的问题

```
string distributorInfo = string.Empty;

        XDocument distributors = new XDocument();
        XElement rootElement = new XElement("Distributors");
        XElement distributor = null;
        XAttribute id = null;

        distributor = new XElement("Distributor");
        id = new XAttribute("Id", "12345678");
        distributor.Add(id);
        rootElement.Add(distributor);

        distributor = new XElement("Distributor");
        id = new XAttribute("Id", "22222222");
        distributor.Add(id);
        rootElement.Add(distributor);

        distributors.Add(rootElement);

 distributorInfo = distributors.ToString(); 
```

请参阅下文了解我在distributorInfo 中得到的信息

```
<Distributors>
 <Distributor Id="12345678" />
 <Distributor Id="22222222" />
</Distributors> 
```

# c++ - 放置新的和私有的构造函数

> ID：14081844
> 
> 赞同：1
> 
> 时间：2012-12-29T12:48:18.280
> 
> 标签：c++, memory-management, placement-new

我有一个使用新位置的自定义内存分配器。然后我有一个具有私有构造函数的类，当我尝试使用我的内存分配器时，它抱怨构造函数是私有的。

这是我的函数，它分配内存并使用placement new调用构造函数：

```
template <class T, typename arg0>
inline T* AllocateObject(arg0& a0) { return new (InternalAllocate(sizeof(T))) T(a0); } 
```

这是我要分配的课程：

```
/* MeshPtr definition */
   typedef boost::shared_ptr<Mesh> MeshPtr;

/* Mesh defintion */
    class Mesh
    {
    public:
        static MeshPtr CreateMesh(IVertexBuffer* vertexBuffer);
        ~Mesh();

        IVertexBuffer* GetVertexBuffer();

    private:
        Mesh(IVertexBuffer* vertexBuffer);

        IVertexBuffer* mVertexBuffer;
    };

 MeshPtr Mesh::CreateMesh(IVertexBuffer* vertexBuffer)
    {
        return MeshPtr(HeapAllocator::GetDefaultHeapAllocator().AllocateObject<Mesh>(vertexBuffer), boost::bind(&HeapAllocator::DeallocateObject<Mesh>, &HeapAllocator::GetDefaultHeapAllocator(), _1));
    } 
```

如前所述，错误是`error C2248: 'Mesh::Mesh' : cannot access private member declared in class 'Mesh'` 有没有好的方法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:06:39.987

选项 1：使自定义分配器成为您班级的朋友。

选项 2：将自定义分配器中的实际分配作业委托给非成员函数，并使该特定非成员函数成为您类的朋友。

选项 2b：将自定义分配器中的实际分配作业委托给非成员函数，并将非成员函数专门化为调用`Mesh::InitializeMesh`（或你有什么）而不是`Mesh::Mesh`.

选项 3：创建一个`AllocateObject`同样采用初始化函子的版本，允许调用者传入内存块的初始化方式。默认初始化函子将采用任意数量的 args 并调用placement new。在这种情况下，您传入的那个可能会做同样的事情（但要成为该类的朋友），或者它可能是指向某个静态方法的指针`Mesh`，或者您有什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:02:15.640

使用私有构造函数的典型情况是类设计者不希望类的“典型”构造。在这种特殊情况下，该类的所有者似乎希望您使用 Mesh::CreateMesh - 也许您可以直接修改它以直接使用您的分配器 - 而不是通过模板？

# objective-c - iOS6中MKPolylines的延迟绘制

> ID：14081847
> 
> 赞同：1
> 
> 时间：2012-12-29T12:48:28.467
> 
> 标签：objective-c, ios6, mapkit

我有在地图上绘制 MKPolylines 的代码，直到 iOS6 的发布一切正常。在 iOS6 中，根据数组中坐标的数量，多段线的绘制从几秒延迟到 30-40 秒。在 iOS5 中并非如此。我可以在不同版本的模拟器中看到同样的问题。

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
MKOverlayView* overlayView = nil;

    MKPolylineView *polylineView;
    polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];

    if(overlay == self.routeLine)
    {
        polylineView.fillColor = [UIColor blackColor];
        polylineView.strokeColor = [UIColor blackColor];
        polylineView.lineWidth = 12;
    }
} 
```

我在 viewDidAppear 中添加了叠加层，但我也尝试在 viewWillAppear 中添加它，结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:20:20.577

我找到了我的问题的解决方案。

我取回了发送回调的数据。当我添加覆盖时，我从错误的线程添加它，这导致了问题。

所以从这里：

```
// add the overlay to the map
[self.mapView addOverlay:self.routeLine]; 
```

这有助于：

```
dispatch_async( dispatch_get_main_queue(), ^{

     // add the overlay to the map
     [self.mapView addOverlay:self.routeLine];
 }); 
```

# php - 文本比较

> ID：14081851
> 
> 赞同：2
> 
> 时间：2012-12-29T12:48:58.193
> 
> 标签：php, algorithm

我有 500 多篇文章的数据库，每 5 分钟 php 脚本检查带有新闻的 XML 文件。我需要忽略我已经拥有的文章。我需要检查新闻的相似性，因为有些人只是重写它。例如：

一个人会写：“你好，我叫约翰！你好吗？”
第二个会写：“你好！你好吗？我叫约翰！”

这不是一个很好的例子，但我有这个问题。为了比较文本，我将使用 shingles 算法。但是怎么做更好呢？我认为每次使用数据库检查 xml 中的每篇文章都不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:14:05.620

由于您只有 500 多篇文章，因此每 5 分钟检查一次应该不成问题。

如果您无论如何都想改进这一点，您可以添加另一个表（md5 或 sha1 哈希，文本源）并存储您检索文本的源以及一些哈希。当您查看新文章时，您可以改为与哈希值进行比较，看看您是否已经看过这篇文章。

# html - 为什么文本不与顶部对齐？

> ID：14081854
> 
> 赞同：0
> 
> 时间：2012-12-29T12:49:12.847
> 
> 标签：html, css, alignment, positioning

我的页面顶部有这个菜单栏，但没有正确对齐。

链接旨在与栏对齐，因此它们的高度相同。

[这里的例子。](http://dans.comuv.com/)

HTML：

```
<html>
<head>
<title>DatNerd - Home</title>
<!--External Javascripts-->
<script src="externals/javascript/jquery-1.8.3.js"></script>
<script src="externals/javascript/jquery-ui.js"></script>
<script src="externals/javascript/jquery.cookie.js"></script>
<script src="externals/javascript/animated-hover.js"></script>
<script src="externals/javascript/javascript.js"></script>
<script src="externals/javascript/mobdetect.js"></script>
<!--External CSS-->
<link rel="stylesheet" href="externals/css/main.css" />
<link rel="stylesheet" href="externals/css/jquery-ui.css" /></head>
<body>

<div id="toolbar">
<ul>
<li><a href="#">Home</a></li>
<li><a href="#">Contact</a></li>
<li><a href="#">Stats</a></li>
<li><a href="#">Projects</a></li>
</ul>
</div>

</body>
</html> 
```

CSS：

```
#toolbar
{
background: #b2b2b2; /* Old browsers */
background: -moz-linear-gradient(top,  #b2b2b2 2%, #2b2b2b 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(2%,#b2b2b2), color-stop(100%,#2b2b2b)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #b2b2b2 2%,#2b2b2b 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #b2b2b2 2%,#2b2b2b 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #b2b2b2 2%,#2b2b2b 100%); /* IE10+ */
background: linear-gradient(to bottom,  #b2b2b2 2%,#2b2b2b 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b2b2b2', endColorstr='#2b2b2b',GradientType=0 ); /* IE6-9 */
width:100%;
height:40px;
position:fixed;
top:0;
left:0;
line-height:40px;
}

#toolbar ul
{
list-style-type:none;
}
#toolbar a
{
float:left;
width:100px;
text-decoration:none;
color:white;
background-color:purple;
height:100%;
text-align:center;
}

#toolbar a:hover
{
background-color:#ff3300;
}

#toolbar li {
display:inline;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:51:43.100

您需要将 ul 的边距和填充设置为 0。您的浏览器（用户代理）具有默认样式。对于 ul，这包括边距、填充、列表样式等。您已经清除了列表样式类型，但没有其他内容。

```
#toolbar ul {
    padding: 0;
    margin: 0;
} 
```

在浏览器中按 F12 以启动开发者工具。在这里，您可以检查元素以找到有问题的 CSS。如果您使用的是 FireFox，则可能需要安装 FireBug。其他主要浏览器都预装了开发工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:52:57.237

```
#toolbar ul {
  margin: 0;
  padding: 0;
} 
```

通常，您可能会发现重置样式表很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T12:54:01.937

尝试这个：

```
#toolbar ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T13:20:16.093

将其粘贴在您的 css 中，因为它有助于阻止项目符号等.. 制作 ul li 列表时

```
ol, ul{list-style:none;} 
```

# regex - 正则表达式所有不包含字符串的 URL

> ID：14081859
> 
> 赞同：4
> 
> 时间：2012-12-29T12:49:50.280
> 
> 标签：regex, google-analytics, goal-tracking

我似乎有点脑子放屁。我让谷歌正确地计算了我的转换，但我得到了误报。

这是当前的目标 RegEx，效果很好。

```
^/click/[0-9]+\.html\?.* 
```

但我也希望 RegEx 不包含任何`&confirm=1`我在 RegEx 中如何做到这一点的问题，我认为我可能可以使用`[^(?:&confirm=1)]`，但我认为这是无效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-19T12:42:14.133

使用“排除”，而不是“包含”过滤器选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:01:54.693

恐怕你不能......我以前试过这样做，我发现你曾经能够做到这一点`negative lookahead`（见鲁本斯），但谷歌分析在某些时候停止支持这一点（来源：[http://productforums.google.com/forum/#!topic/analytics/3YnwXM0WYxE](http://productforums.google.com/forum/#!topic/analytics/3YnwXM0WYxE)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T02:32:26.550

尝试这个：

```
^/click/[0-9]+\.html\?(?!.*\bconfirm=1).* 
```

我稍微改变了它，所以它仍然会排除 if`confirm=1`是第一个参数（前面是`?`而不是`&`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-17T13:21:38.627

也许我来晚了一点。

怎么写：

```
[^(&confirm=1)] 
```

?

# java - Java 时间（分：秒：毫秒）

> ID：14081864
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:50:26.017
> 
> 标签：java

嘿，我知道如何将长时间格式化为 Minutes:Seconds:Miliseconds 例如 01:57:934 我可以使用`String.format(0#.0#.###)`，但是如何将这么长的时间转换为时间；？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:54:46.590

从 1.5 开始就有 java.util.concurrent.TimeUnit 类，像这样使用它：

```
long millis = System.currentTimeMillis();
String.format("%d min, %d sec", 
TimeUnit.MILLISECONDS.toMinutes(millis),
TimeUnit.MILLISECONDS.toSeconds(millis) - 
TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis))
); 
```

对于 1.5 以下的 Java 版本或不完全支持 TimeUnit 类的系统（如 API 版本 9 之前的 Android），可以使用以下公式：

```
int seconds = (int) (milliseconds / 1000) % 60 ;
int minutes = (int) ((milliseconds / (1000*60)) % 60);
int hours   = (int) ((milliseconds / (1000*60*60)) % 24); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T12:55:58.330

假设您的时间少于一小时，我会使用 SimpleDateFormat。

```
String text = new SimpleDateFormat("mm:ss:SSS").format(new Date(time)); 
```

或者你可以使用简单的数学。

```
String text = String.format("%02d:%02d:%03d", time/60000, time/1000%60, time/1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:52:57.360

long timeDiff = (d1.getTime() - d2.getTime());

```
 String diff=String.format("%d year(s) %d day(s) %d hour(s) %d min(s) %d sec(s)",(TimeUnit.MILLISECONDS.toDays(timeDiff)/365),TimeUnit.MILLISECONDS.toDays(timeDiff)%365,
            TimeUnit.MILLISECONDS.toHours(timeDiff)
            - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS
            .toDays(timeDiff)),
            TimeUnit.MILLISECONDS.toMinutes(timeDiff)
            - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS
            .toHours(timeDiff)),
            TimeUnit.MILLISECONDS.toSeconds(timeDiff)
            - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS
            .toMinutes(timeDiff)));
    System.out.println(diff); 
```

在 d1 & d2 在这里指定正确的日期。然后你会得到正确的答案

# iphone - Segue 不执行

> ID：14081866
> 
> 赞同：1
> 
> 时间：2012-12-29T12:50:33.503
> 
> 标签：iphone, ios, segue

我目前正面临一些我觉得很奇怪的事情。在我的故事板中，有一个 TableViewController 填充了静态单元格。

当我选择其中一行时，我想执行一个简单的 segue（推送到另一个视图控制器）。所以我从相关的表格单元格“ControlDrag”到兄弟控制器，但是当点击一个单元格时，什么也没有发生。除此之外，我确实尝试将 segue 触发分配给单元格的附件视图（一个显示按钮）。在这种情况下，segue 被有效地触发了。

所以这是我的问题：我应该使用“编程方式”来处理单元格上的点击（tableview 委托方法和手动 segue 执行），还是界面构建器中缺少一些东西？顺便说一句，我们如何解释附件按钮视图的行为差异？

这是两个截图

*   应该触发 segue 的单元格选择

    ![应该触发 segue 的单元格选择](../Images/584bf3e4808ef4a7c3da4030b16f676d.png)

    并且，执行 segue 的辅助动作

    ![附属动作](../Images/c830df928252e4b8e14e73008d137ea7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:28:45.187

我终于找到了问题所在。我在视图控制器上附加了一个手势识别器，它正在捕捉单元格上的点击事件。

# database - 打开 App 时出现 Filesystemerror(12)

> ID：14081868
> 
> 赞同：1
> 
> 时间：2012-12-29T12:50:52.757
> 
> 标签：database, sqlite, blackberry, file-connection

当我打开应用程序时，有时它无法访问数据库并视为 SD 卡中没有可用的数据库。首次启动 App 时不会产生此问题。它在 App 的第 3 次或第 4 次启动时生成。我认为当我关闭应用程序时，它不会关闭数据库连接，并且在启动应用程序时，它会显示`'Filesystemerror(12) & Database is null or closed'`错误并且没有从数据库中获取任何数据。

当我启动应用程序时，它会一次又一次地重复。当我重新启动黑莓时，它工作正常。因为它持有任何数据库连接。请告诉我如何在 App 关闭时关闭所有数据库连接和 sqlite 连接。请给出任何解决方案并问我，如果你没有得到问题。

# c# - 如何在我的 wpf 应用程序中避免深度克隆

> ID：14081872
> 
> 赞同：0
> 
> 时间：2012-12-29T12:51:21.383
> 
> 标签：c#, wpf, clone, freeze

我有一个 PointCollection 对象，我想将其克隆到另一个对象中，但问题是 - 我必须使用 Freeze 并克隆我的 PointCollection 中的每个点，这会花费我在我的应用程序中无法承受的大量宝贵的处理时间。

我这样做的方式是：

```
 pointCollection.Freeze();
Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal,
        new Action(() => MainWindow.SpectrumList[antennaName].spectrumViewModel.AntennaPoints = pointCollection.Clone())); 
```

有没有可能的不同方式（也许是通过发送参考，虽然我试过了，但它抛出了一个异常）来做到这一点？

# javascript - 使用 Jquery 或 Javascript 在文本框中验证十进制字段

> ID：14081873
> 
> 赞同：0
> 
> 时间：2012-12-29T12:51:22.180
> 
> 标签：javascript, jquery, jquery-ui

我在论坛上搜索，但没有找到正确的答案。我正在尝试的是

1.  接受十进制数字的文本框，因此用户应该能够输入 0 或 1 个小数点，即。点（。）
2.  点前最多 5 位，点后最多 5 位
3.  不允许使用其他字符，但箭头键和 f1 f2 等其他键应该可以使用

例如。它应该对以下有效 12345 12345.1 12345.12345 1.12345 .12345

在制作这个文本框时需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:10:27.487

试试这个：

```
function isFloat(s) {
    return s ? /\d{1,5}(?:\.\d{1,5})?/.test(s) : true;
}

$('input.float').on('change', function() {
  if (!isFloat($(this).val())) {
    alert('not a float');
  }
}); 
```

这是小提琴：http: [//jsfiddle.net/foxbunny/Vabj4/](http://jsfiddle.net/foxbunny/Vabj4/)

该代码没有使该字段成为必填项。如果它是空的，它就会过去。如果您可以通过`true`将三元条件更改为`false`（第 2 行）来更改它。

编辑：

哦，如果你想限制对某些键的输入，你应该重新考虑。这不是一个很好的用户体验。人们习惯于输入任何东西。最好只是警告他们。这样做更便宜，而且足够有效：

[http://jsfiddle.net/foxbunny/Vabj4/1/](http://jsfiddle.net/foxbunny/Vabj4/1/)

# javascript - 如果重复，则删除文本

> ID：14081876
> 
> 赞同：2
> 
> 时间：2012-12-29T12:51:39.980
> 
> 标签：javascript, jquery

我有一个基本上看起来像这样的 div：

```
<div class="wrapper">

<img src="#" />

<a href="#" class="link"> SomeText </a>

<a href="#" class="provider"> SomeText </a>

<div class="description">Text Text Text</div>

</div> 
```

如您所见，其中的文本与我的问题`.provider`相同`.link` ：如果有这样的文本重复，我如何删除整个 div (.wrapper)？请注意文本未设置，它可以是任何东西，因此它是一个 var：

```
var text = $('.provider').text();

$('.wrapper a:contains(text)').remove(); 
```

这是我没有运气的众多尝试之一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T12:55:57.747

这应该做的工作：

```
$('div.wrapper').each(function() {
    if($('.link', this).text() == $('.provider', this).text())
        $(this).remove();
});​ 
```

（例如：http: [//jsfiddle.net/8b655/](http://jsfiddle.net/8b655/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:59:09.260

```
var text = $('.provider').text();

$('.wrapper a:contains('+text+')').parent().remove();​​​​​​​ 
```

可能是这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T13:00:48.383

```
$('.wrapper').filter(function(){
    var a = $('a.link', this).text(), b = $('a.provider', this).text();
    return $.trim(a) === $.trim(b)
}).remove() 
```

# xcode - Xcode 自定义转场 - Cover Vertical 的对面（从上到下） - 完整新手

> ID：14081880
> 
> 赞同：8
> 
> 时间：2012-12-29T12:51:51.353
> 
> 标签：xcode, segue

一段时间以来，我一直在尝试创建与垂直封面相反的自定义 segue（创建从上到下的效果动画）。我查看了其他问题，google 和 youtube，但无法使其正常工作。我是对课程等都是全新的，因此分步指南或视频中的任何帮助都会非常好。我相信这个 URL 正在尝试做一些类似于我想要的事情：

[http://jrwren.wrenfam.com/blog/2012/02/01/storyboard-custom-segue-for-custom-pushviewcontroller-animation/](http://jrwren.wrenfam.com/blog/2012/02/01/storyboard-custom-segue-for-custom-pushviewcontroller-animation/)，我就是无法让它工作。

如果你们中的任何人都知道一种方法来创建一个从上到下版本的封面垂直转场，你能帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T13:45:14.233

好吧，您会想要创建 UIStoryBoardSegue 的子类，就像演练向您展示的那样，但是在 Storyboard 类的 .m 文件（实现）下，您需要以下代码作为您的 -(void)perform：方法 -

```
-(void)perform{
UIViewController *sourceViewController = (UIViewController *) self.sourceViewController;
UIViewController *destinationViewController = (UIViewController *) self.destinationViewController;
[sourceViewController.view addSubview:destinationViewController.view];
[destinationViewController.view setFrame:sourceViewController.view.window.frame];
[destinationViewController.view setTransform:CGAffineTransformMakeTranslation(0, -sourceViewController.view.frame.size.height)];
[destinationViewController.view setAlpha:1.0];

[UIView animateWithDuration:0.75
                      delay:0.0
                    options:UIViewAnimationOptionTransitionFlipFromTop
                 animations:^{
                     [destinationViewController.view setTransform:CGAffineTransformMakeTranslation(0, 0)];
                     [destinationViewController.view setAlpha:1.0];
                 }
                 completion:^(BOOL finished){
                     [destinationViewController.view removeFromSuperview];
                     [sourceViewController presentViewController:destinationViewController animated:NO completion:nil];
                 }];} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-22T17:16:02.463

以@dmason82 的回答为基础，翻译成 Swift，并稍微简化一下，这对我有用：

```
class UIStoryboardSegueFromTop: UIStoryboardSegue {
    override func perform() {
        let src = self.sourceViewController as UIViewController
        let dst = self.destinationViewController as UIViewController

        src.view.superview?.insertSubview(dst.view, aboveSubview: src.view)
        dst.view.transform = CGAffineTransformMakeTranslation(0, -src.view.frame.size.height)

        UIView.animateWithDuration(1.0, animations: {
            dst.view.transform = CGAffineTransformMakeTranslation(0, 0)

            }) { (Finished) in
                src.presentViewController(dst, animated: false, completion: nil)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-12T21:36:58.497

这是我使用情节提要实现对面封面垂直转场

[https://github.com/viccarre/OppositeCoverVerticalSegue](https://github.com/viccarre/OppositeCoverVerticalSegue)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-18T17:15:13.030

嗨，我刚刚尝试了另外两个答案，但它没有按您的要求工作。为了创建一个自定义的segue，看起来与cover vertical（模态segue默认）完全相反，我创建了这个代码：

```
- (void)perform
{
UIViewController *sourceViewController = self.sourceViewController;
UIViewController *destinationViewController = self.destinationViewController;

[sourceViewController presentViewController:destinationViewController animated:NO completion:nil];
[destinationViewController.view addSubview:sourceViewController.view];
[sourceViewController.view setTransform:CGAffineTransformMakeTranslation(0, 0)];
[sourceViewController.view setAlpha:1.0];

[UIView animateWithDuration:0.75
                      delay:0.0
                    options:UIViewAnimationOptionTransitionFlipFromBottom
                 animations:^{
                     [sourceViewController.view setTransform:CGAffineTransformMakeTranslation(0,destinationViewController.view.frame.size.height)];
                     [sourceViewController.view setAlpha:1.0];
                 }
                 completion:^(BOOL finished){
                     [sourceViewController.view removeFromSuperview];
                     }];

}

@end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-19T16:13:27.807

要完成 dmason 的回答并让您的控制器朝相反的方向展开 - 从它来的地方返回，请在呈现的视图控制器中执行此操作：

```
[UIView animateWithDuration:0.75
                      delay:0.0
                    options:UIViewAnimationOptionTransitionFlipFromBottom
                 animations:^{
                     [self.view setTransform:CGAffineTransformMakeTranslation(0, -self.view.frame.size.height)];
                 }
                 completion:^(BOOL finished){
                     [self dismissViewControllerAnimated:NO completion:nil];
                 }
 ]; 
```

伯格的回答对我不起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-23T18:23:51.843

dmason 的回答很棒，如果您想添加一个展开转场，以便您的模态在关闭时正确动画，您的执行操作可能看起来像这样（在新的自定义转场类中）

```
- (void)perform
{
    UIViewController *sourceViewController = self.sourceViewController;
    UIViewController *destinationViewController = self.destinationViewController;

    [sourceViewController dismissViewControllerAnimated:NO completion:nil];
    [destinationViewController.view addSubview:sourceViewController.view];

    [UIView animateWithDuration:0.75
                     animations:^{
                         sourceViewController.view.center = CGPointMake(sourceViewController.view.center.x, sourceViewController.view.center.y-600);
                     }
                     completion:^(BOOL finished){
                         [sourceViewController.view removeFromSuperview];
                     }
     ];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-11T19:47:38.220

我建议你使用 Hero 库来实现这一点。它添加了很多动画和过渡，特别是在视图控制器之间：[https](https://github.com/lkzhao/Hero/blob/master/README.md) ://github.com/lkzhao/Hero/blob/master/README.md 有一个过渡叫做“Cover”，你可以选择方向（左, 上, 右, 下)

# c++ - 是否可以在 C++ 运行时创建变量

> ID：14081882
> 
> 赞同：-2
> 
> 时间：2012-12-29T12:52:05.987
> 
> 标签：c++

每次调用函数时是否可以为函数创建一个新变量？我正在考虑制作一个巨大的数组，并且每次调用函数时只使用不同的块，但我更愿意按需创建变量，这在 C++ 中是否可行？

示例：用户键入 asdf 并单击保存，触发 savetext 功能

```
void savetext(textvariable)
{
static int //(this variable name should somehow become asdf) = somedata;
return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:01:44.837

每次输入一个函数，里面的所有变量都是新的。除非您需要比函数寿命更长的对象，或者您不知道需要多少个对象，否则无需显式创建变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:57:02.770

如果您有一些东西，例如，将东西添加到数组中，那么`vector`就是正确的解决方案。该类`vector`将根据您的需要自动增长，使用该`push_back`函数向自身添加内容。

vector 类在很大程度上充当了一个随需要而增长的数组，因此它非常易于使用。

# android - 什么是 MediaPlayer.OnInfoListener “代码 703”？

> ID：14081894
> 
> 赞同：8
> 
> 时间：2012-12-29T12:53:34.613
> 
> 标签：android, android-mediaplayer, live-streaming

我正在通过`MediaPlayer`. 缓冲开始时，会抛出代码 701。当缓冲结束时，会抛出代码 702。

所有代码都可以在这个[链接](http://developer.android.com/reference/android/media/MediaPlayer.html#Callbacks)上找到。

但是，`MediaPlayer.OnInfoListener`首先抛出代码 703，我在任何地方都找不到。这是代码和调试输出。

```
mPlayer.setOnInfoListener(new MediaPlayer.OnInfoListener() {
    @Override
    public boolean onInfo(MediaPlayer mediaPlayer, int i, int i2) {
       Log.d(TAG, "MediaPlayer.OnInfoListener: " + i);
        return false;
    }
}); 
```

日志猫：

```
12-29 13:40:54.995: DEBUG/StreamingService(13811): MediaPlayer.OnInfoListener: 703
12-29 13:40:55.000: DEBUG/StreamingService(13811): MediaPlayer.OnInfoListener: 701
12-29 13:41:09.055: DEBUG/StreamingService(13811): MediaPlayer.OnInfoListener: 702
12-29 13:41:10.770: DEBUG/StreamingService(13811): MediaPlayer.OnCompletionListener 
```

**通过703**抛出的代码是什么`MediaPlayer.OnInfoListener`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-29T16:02:23.510

代码 703 应该是`MEDIA_INFO_NETWORK_BANDWIDTH`：“*最近的带宽*”（[来源](https://www.codeaurora.org/gitweb/quic/la/?p=platform/frameworks/av.git;a=blob;f=include/media/mediaplayer.h;h=1fad3833159dd95f1a0e7172929003dc37146da4;hb=jb_2.2_rb2_5.2#l111)）。

这并不是真正的错误。它是有关媒体框架中正在发生的事情的信息的状态代码。查看`AwesomePlayer`源代码，我发现`MEDIA_INFO_NETWORK_BANDWIDTH`如果流数据缓存运行不足，它就会发送出去，如果你突然禁用互联网连接，最终会发生这种情况。然后它将暂停播放并开始尝试缓冲更多数据，这由`MEDIA_INFO_BUFFERING_START`消息（代码 701）指示。

# android - 如何在android中使用retrace.bat

> ID：14081899
> 
> 赞同：5
> 
> 时间：2012-12-29T12:54:21.633
> 
> 标签：android, proguard

我在命令提示符下使用**retrace.bat -verbose mapping.txt obfuscated_trace.txt 。**

但它在 obfuscated_trace.txt 中没有显示**任何内容。**mapping.txt 从项目中复制。

**步：**

1.  `cd *\android-sdk\tools\proguard\bin`

2.  `retrace.bat -verbose mapping.txt obfuscated_trace.txt`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-24T03:07:22.793

您可以使用回溯 GUI。[在此处](http://blog.simplyadvanced.net/android-how-to-decode-proguards-obfuscated-code-from-stack-trace/)查看有关如何使用 Retrace GUI 的分步详细信息。

基本步骤如下：

1.  打开 /tools/proguard/bin/proguardgui.bat
2.  选择左栏中的“ReTrace”选项。
3.  添加您的映射文件和混淆的堆栈跟踪。
4.  点击“回溯！”</li>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-12T06:39:00.080

请遵循以下几点。

1.  打开终端/cmd

2.  cd **/sdk/tools/proguard/bin/proguardgui.jar

3.  参考附图，回溯 GUI 弹出

4.  选择您的映射文件并复制粘贴您的混淆堆栈跟踪

而已。简单易行

[![在此处输入图像描述](../Images/0cf4ec7fc1ab404214e163a384f8b7e8.png)](https://i.stack.imgur.com/egxdF.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:36:19.313

你的 obfuscated_trace.xt 实际上必须有一个堆栈跟踪......在这个文件中粘贴一个堆栈跟踪并再次运行它并取消混淆代码

# c++ - 关键点附近的关键字“auto”

> ID：14081900
> 
> 赞同：-4
> 
> 时间：2012-12-29T12:54:28.533
> 
> 标签：c++, loops, c++11, auto

> **可能重复：**
> [C++0x 自动关键字多少是太多了](https://stackoverflow.com/questions/6434971/how-much-is-too-much-with-c0x-auto-keyword)

我发现在临界点附近使用“自动”可能会导致一些问题。

这是示例代码：

```
#include <iostream>
#include <typeinfo>
#include <limits>

using std::cout;
using std::endl;
using std::numeric_limits;
using std::cerr;

int main() {
   auto i = 2147483647 /* numeric_limits<int>::max() */ ;
   cout << "The type of i is " << typeid(i).name() << endl;

   int count = 0;
   for (auto i = 2147483647; 
        i < 2147483657 /* numeric_limits<int>::max() + 10 */ ; ++i) {
       cout << "i = " << i << " " << endl;

       if (count > 30) {
           cerr << "Too many loops." << endl;
           break;
       }
       ++count;
   }

   return 0;
} 
```

“auto”决定了“i”的类型是整数，但整数的上限是2147483647，很容易溢出。

这是[Ideone(gcc-4.5.1)](http://ideone.com/O2cgBe)和[LWS(gcc-4.7.2)](http://liveworkspace.org/code/1K6H3s$0)的输出。它们是不同的：“i”在[Ideone(gcc-4.5.1)上的循环中保持 2147483647 并在](http://ideone.com/O2cgBe)[LWS(gcc-4.7.2)](http://liveworkspace.org/code/1K6H3s$0)上溢出。但它们都不是预期的结果：10 个周期，每次 +1。

我应该避免在临界点附近使用“自动”吗？或者我如何在这里适当地使用“自动”？

更新：有人说“尽可能使用汽车”。在这个[线程](https://stackoverflow.com/questions/6434971/how-much-is-too-much-with-c0x-auto-keyword)中你告诉我。我认为这不太对。“long long int”类型更适合这里的“int”类型。我想知道哪里可以安全地使用“自动”，哪里不能。

[更新 2：Herb Sutter文章](http://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/)的解决方案 4(b)应该已经回答了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:02:10.057

如果它是正确的，你应该只依靠类型推导来计算你的变量的类型。在这里，编译器推断它是一个`int`，就标准而言这是*正确*的，但是您的具体问题需要具有更大范围的另一种类型。当您使用 时`auto`，您是在说“编译器最了解”，但编译器并不总是知道一切。

你不会`auto`在这里使用，就像你不会使用`int`. 你可以让你的文字有更高的等级（坚持`L`或`LL`在它之后——尽管它们不能保证比你的更大`int`），然后`auto`会推导出一个更大的整数类型。

更不用说`auto`在这种情况下真的不会为您节省任何费用。`auto`通常用于避免键入长而丑陋的类型或您不知道的类型。在这种情况下，类型并不长而丑陋，而且您确实知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:04:02.210

`auto`只是一个[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)。它不是一种类型，它只是推断右侧应该是什么类型，并以此决定该变量的类型。

如果你给它文字，它只会推断出编译器给出的默认类型。
您只需要知道实际类型是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T13:04:05.687

`int`除非您明确更改其类型，否则数字文字（没有小数点）始终是。

```
int x = 2147483657; // 2147483657 is treated as an int.
                    // If it does not fit tough it will be truncated
                    // according to standard rules.

long x = 2147483657L; // The L suffix tells the compiler to treat it as a long.
                      // Here you will get the correct value assuming long is larger than int. 
```

在你的情况下：

```
for(auto i = 2147483647;i < 2147483657;) // is not going to work as i is always 
                                         // an int and literal overflows.

// Try correct types:

for(auto i = 2147483647L; i < 2147483657L;++i) //Now it should work correctly. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T13:09:00.023

你对`auto`. 您的期望是`auto`自动推断出*最适合您要对变量**执行***的操作的类型。这是*语义分析*，编译器**不应该这样做**（大多数情况下，他们不能）。他们无法期待您稍后在程序中使用您声明的变量的方式。

关键字只会让`auto`您免于在左侧显式写出右侧出现的表达式类型的负担，避免可能的冗余和与之相关的所有问题（如果右侧表达式的类型发生变化怎么办？）

这就是说，所有其他答案都是正确的：如果您希望变量`i`不溢出，则应为其分配一个`long long`文字（使用`LL`后缀）。

# .net - 在桌面 .NET 应用程序中远程执行报表

> ID：14081910
> 
> 赞同：-1
> 
> 时间：2012-12-29T12:55:26.987
> 
> 标签：.net, reporting-services, remote-desktop, timeoutexception

当我使用使用 SSRS 报告的桌面应用程序的远程桌面执行模式时，如果用户尚未登录到服务器，则在运行 reoprt 的应用程序中会出现此错误：

> ASP.NET 会话已过期
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：Microsoft.Reporting.WebForms.AspNetSessionExpiredException：ASP.NET 会话已过期
> 
> 源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：[AspNetSessionExpiredException：ASP.NET 会话已过期]
> Microsoft.Reporting.WebForms.ReportDataOperation..ctor()
> +722 Microsoft.Reporting.WebForms.HttpHandler.GetHandler(String operationType) +687
> Microsoft.Reporting.WebForms.HttpHandler。 ProcessRequest(HttpContext context) +57 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +599
> System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +171

如果用户通过“远程桌面连接”登录服务器，该用户的错误就会消失。

任何人都知道为什么会引发此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:14:43.517

我通过更改我的 webapp 的 IIS 设置解决了这个问题。如果您遇到此类问题，您需要转到服务器上的 IIS 设置（管理工具）。然后在“默认网站”下右键单击您的网站。单击属性并转到 ASP.net 选项卡。之后单击“更改配置...”按钮。将出现一个表单，其中有一个名为“身份验证”的选项卡。单击它并将“身份验证模式”更改为“无”。这将解决 Windows 身份验证模式下 RDP 中的访问阻止问题。

问候

# android - 将样式应用于全屏（从/到）

> ID：14081913
> 
> 赞同：1
> 
> 时间：2012-12-29T12:55:56.680
> 
> 标签：android

我已经为淡入和淡出创建了一个带有 2 个 xml 的动画目录，我解决了将它与活动和对话框构建器一起使用的问题：

```
overridePendingTransition(R.anim.fadein,R.anim.fadeout); 
```

使用此代码进入全屏我不知道如何应用样式：

```
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
            getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

如何将样式应用于全屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:32:28.250

```
<activity android:name=".yourActivityName"
          android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"> 
```

> 1.你可以应用这个maifest文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T15:01:40.280

就像...
在 values/styles.xml

```
<resources> 
   <style name="CodeFont" parent="android:Theme.NoTitleBar.Fullscreen">
      <item name="android:windowNoTitle">true</item> 
      ...
   </style>
</resources> 
```

在 AndroidManifest.xml 中

```
<activity 
    android:name=".MainActivity" 
    android:theme="@style/CodeFont"> 
```

也可以看看..
[http://ajitmahajani.wordpress.com/2012/03/27/android-full-screen-activity/](http://ajitmahajani.wordpress.com/2012/03/27/android-full-screen-activity/)
[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html) .. .

# database - WP7 数据库选择 SQLite 或 SQL Server CE

> ID：14081916
> 
> 赞同：0
> 
> 时间：2012-12-29T12:56:16.483
> 
> 标签：database, sqlite, windows-phone-7, sql-server-ce

我正在开发 Windows Phone 7 应用程序。我们在 android 版本中使用 sqlite 数据库。

我在这里找到了一些答案，既然 Mango 支持它，我们应该使用 SQL Server CE，但我没有找到任何性能比较。

我只是设法发现 SQLite 更快更小，而且 SQL Server CE 更容易在 .NET 中实现。

有人做过性能比较吗？

使用 SQL Server CE 背后的任何其他原因？

我的表格包含一些字符串和一些存储为 byte[] 的缩略图。其中一项功能是基于键盘输入的动态搜索，这就是我如此关注性能的原因。

# android - 将 iOS Objective-c 应用程序移植到 Android Java

> ID：14081924
> 
> 赞同：6
> 
> 时间：2012-12-29T12:57:49.393
> 
> 标签：android, ios

我的应用程序是一个医疗数据查看器，患者佩戴一个通过低功耗蓝牙传输数据的传感器。该应用程序是用 Objective C 开发的，针对 iOS 平台。现在需要将应用程序移植到 Android 平台。

目前iOS的设计和实现如下：

*   通信 - Objective C，特定于核心蓝牙 API
*   数据/持久性 - 目标 C，使用 FMDatabase 作为 SQLite 的接口
*   算法/逻辑 - 目标 C
*   ui - 基于 Phonegap 的 JavaScript/HTML5

由于通信特定于 Core Bluetooth API，因此必须针对 Android 重新编写。ui 层应该易于移植，无需太多更改，因为它完全依赖于 Phonegap。然而，对于持久性和逻辑层，我正在寻找一种方法来自动将它们转换为 Android，或者以它们可在两个平台上重用的方式重新编写它们。

一种方法是自动将相关代码从 Objective C 转换为 Java。对于非 UI 类，有一个[转换器可以从 Java 转换为 Objective C。](http://www.androidcentral.com/google-develops-tool-translate-java-ios-friendly-objective-c-code)

iOS/objective C 到 Android/Java 是否有类似的转换器？是否有其他可以使用的方法或框架？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T13:02:26.930

好像有： [http ://code.google.com/p/objc2j/](http://code.google.com/p/objc2j/)

该存储库应该可以通过[http://objc2j.googlecode.com/svn/访问](http://objc2j.googlecode.com/svn/)

自己没有查，所以请发表您对此的看法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T13:20:42.453

谷歌有一些开源项目可以做到这一点。

您将需要使用 SVN 来访问这些存储库。以下是链接：

Java 到目标 C： [http ://code.google.com/p/j2objc/](http://code.google.com/p/j2objc/)

目标 C 到 Java：[http ://code.google.com/p/objc2j/](http://code.google.com/p/objc2j/)

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T21:35:21.153

你最好的选择是使用[Apportable](http://apportable.com/)。它是一个提供 clang 端口、objective-c 运行时和 iOS 上的大多数框架（包括 UIKit）的平台。

目前还没有核心蓝牙包装器，但您可以为此从他们的平台调用 java API。FMDatabase 可以正常工作，Phone gap 接口理论上应该可以正常工作。

不过，我会避免使用代码生成器的建议。如果您有一种重要的代码库，他们最终会花费大量时间重新实现您已经构建的所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-06T15:00:25.810

我在类似的场景中使用过[O2J - Objective-C to Java Converter](https://itunes.apple.com/us/app/o2j-objective-c-to-java-automatic/id988532240?ls=1&mt=12 "O2J")，效果很好。

无需太多工作，它将在您的算法/逻辑上做得很好。

它是可定制的，因此您可以为您的蓝牙代码添加自己的翻译。如果 API 的工作方式相同，您可以通过将蓝牙方法调用直接转换为 java 来获得，但它们可能不会。最好在您的 Objective-C 代码中为蓝牙添加一层间接层，以便真正轻松地提供 Android 特定的实现。例如创建一个BluetoothHelper.m 和一个BluetoothHelper.java，翻译会更顺畅。

我已经将它用于使用 FMDatabase 的项目。对于 FMDatabase 部分，我们已经将 FMDatabase/FMResultSet 作为间接层！我自己实现了 FMDatabase/FMResultSet，因为 sqlite Objective-c（基于 c 的 sqlite 函数）的 API 与 Android 太不同了。O2J 帮助我开始翻译 FMDatabase/FMResultSet，这就是我最终得到的...

调频数据库：

```
public class FMDatabase
{

    private SQLiteDatabase database;
    private HashMap<String, SQLiteStatement> compiled;

    public FMDatabase(SQLiteDatabase database)
    {
        this.database = database;
    }

    public FMResultSet executeQuery_arguments(String sql, Object... args)
    {

        synchronized (database)
        {
            String[] selectionArgs = objectArgsAsStrings(args);
            Cursor rawQuery = database.rawQuery(sql, selectionArgs);
            return new FMResultSet(rawQuery);
        }
    }

    public FMResultSet executeQuery(String sql, Object... args)
    {
        synchronized (database)
        {
            String[] selectionArgs = objectArgsAsStrings(args);
            Cursor rawQuery = database.rawQuery(sql, selectionArgs);
            return new FMResultSet(rawQuery);
        }
    }

    public String debugQuery(String sql, Object...args)
    {
        StringBuilder sb = new StringBuilder();
        FMResultSet rs = executeQuery(sql, args);
        rs.setupColumnNames();
        HashMap names = rs.columnNameToIndexMap();
        Set ks = names.keySet();
        for (Object k : ks)
        {
            sb.append(k);
            sb.append("\t");
        }
        sb.append("\n");
        while(rs.next())
        {
            for (Object k : ks)
            {
                String key = k.toString();
                if(rs.getType(key) == Cursor.FIELD_TYPE_STRING)
                {
                    sb.append(rs.stringForColumn(key));
                }
                else if(rs.getType(key) == Cursor.FIELD_TYPE_INTEGER)
                {
                    sb.append(rs.longForColumn(key));
                }
                else if(rs.getType(key) == Cursor.FIELD_TYPE_FLOAT)
                {
                    sb.append(rs.doubleForColumn(key));
                }
                else if(rs.getType(key) == Cursor.FIELD_TYPE_BLOB)
                {
                    sb.append(rs.stringForColumn(key));
                }
                else
                {
                    sb.append("<NOT STRING>");
                }
                sb.append("\t");
            }
            sb.append("\n");
        }
        return sb.toString();
    }

    public String[] objectArgsAsStrings(Object... args)
    {
        String[] selectionArgs = new String[args.length];
        for (int i = 0; i < args.length; i++)
        {
            Object o = args[i];
            if(o instanceof Date)
            {
                selectionArgs[i] = Long.toString(((Date) o).getTime());
            }
            else if(o instanceof Boolean)
            {
                selectionArgs[i] = ((Boolean) o).booleanValue() ? "TRUE" : "FALSE";
            }
            else
            {
                selectionArgs[i] = args[i] == null ? "" : o.toString();
            }
        }
        return selectionArgs;
    }

    public boolean executeUpdate_arguments(String sql, Object... args)
    {
        synchronized (database)
        {
            String[] selectionArgs = objectArgsAsStrings(args);
            database.execSQL(sql, selectionArgs);
            return true;
        }
    }

    public boolean executeUpdate(String sql, Object... args)
    {
        synchronized (database)
        {
            SQLiteStatement statement = bindToCachedCompiledStatement(sql, args);
            statement.execute();
            return true;
        }
    }

    private SQLiteStatement bindToCachedCompiledStatement(String sql, Object... args)
    {
        HashMap<String, SQLiteStatement> statments = getCompiledStatements();
        SQLiteStatement statement = statments.get(sql);
        if (statement == null)
        {
            statement = database.compileStatement(sql);
            statments.put(sql, statement);
        }
        statement.clearBindings();
//      bindAllArgsAsStrings(statement, objectArgsAsStrings(args));
        bindAllArgs(statement, args);
        return statement;
    }

    private void bindAllArgs(SQLiteStatement statement, Object[] bindArgs)
    {
        if (bindArgs == null)
        {
            return;
        }
        int size = bindArgs.length;
        for (int i = 0; i < size; i++)
        {
            Object arg = bindArgs[i];
            int index = i + 1;
            if(arg == null)
            {
                statement.bindNull(index);
            }
            else if (arg instanceof String)
            {
                statement.bindString(index, (String) arg);
            }
            else if (arg instanceof Double || arg instanceof Float)
            {
                Number numArg = (Number) arg;
                statement.bindDouble(index, numArg.doubleValue());
            }
            else if (arg instanceof Integer || arg instanceof Long)
            {
                Number numArg = (Number) arg;
                statement.bindDouble(index, numArg.longValue());
            }
            else
            {
                statement.bindString(index, arg.toString());
            }
        }
    }

    public long executeInsert(String string, Object... args)
    {
        synchronized (database)
        {
            SQLiteStatement statement = bindToCachedCompiledStatement(string, args);
            try
            {
                return statement.executeInsert();
            }
            catch (Exception e)
            {
                Log.i("STD", "No Rows inserted", e);
                return 0;
            }
        }
    }

    public void bindAllArgsAsStrings(SQLiteStatement statement, String[] bindArgs)
    {
        if (bindArgs == null)
        {
            return;
        }
        int size = bindArgs.length;
        for (int i = 0; i < size; i++)
        {
            statement.bindString(i + 1, bindArgs[i]);
        }
    }

    private HashMap<String, SQLiteStatement> getCompiledStatements()
    {
        if (compiled == null)
        {
            compiled = new HashMap<String, SQLiteStatement>();
        }
        return compiled;
    }

    public boolean rollback()
    {
        synchronized (database)
        {
            database.execSQL("ROLLBACK;");
        }
        return true;
    }

    public boolean commit()
    {
        synchronized (database)
        {
            database.execSQL("COMMIT;");
        }
        return true;
    }

    public boolean beginDeferredTransaction()
    {
        synchronized (database)
        {
            database.execSQL("BEGIN DEFERRED TRANSACTION;");
        }
        return true;
    }

    public boolean beginTransaction()
    {
        synchronized (database)
        {
            database.execSQL("BEGIN EXCLUSIVE TRANSACTION;");
        }
        return true;
    }

    public boolean open()
    {
        return true;
    }

    public void setShouldCacheStatements(boolean shouldCacheStatements)
    {
        // TODO
    }

} 
```

FM结果集：

```
public class FMResultSet
{
    private boolean columnNamesSetup;
    private HashMap<String, Number> columnNameToIndexMap;
    private Cursor rawQuery;

    public FMResultSet(Cursor rawQuery)
    {
        this.rawQuery = rawQuery;
    }

    public void close()
    {
        rawQuery.close();
    }

    public void setupColumnNames()
    {

        if (columnNameToIndexMap == null)
        {
            this.setColumnNameToIndexMap(new HashMap());
        }

        int columnCount = rawQuery.getColumnCount();

        int columnIdx = 0;
        for (columnIdx = 0; columnIdx < columnCount; columnIdx++)
        {
            columnNameToIndexMap.put(rawQuery.getColumnName(columnIdx).toLowerCase(), new Integer(columnIdx));
        }
        columnNamesSetup = true;
    }

    public boolean next()
    {
        return rawQuery.moveToNext();
    }

    public int columnIndexForName(String columnName)
    {

        if (!columnNamesSetup)
        {
            this.setupColumnNames();
        }

        columnName = columnName.toLowerCase();

        Number n = columnNameToIndexMap.get(columnName);

        if (n != null)
        {
            return NumberValueUtil.intVal(n);
        }

        Log.i("StdLog", String.format("Warning: I could not find the column named '%s'.", columnName));

        return -1;
    }

    public int intForColumn(String columnName)
    {

        if (!columnNamesSetup)
        {
            this.setupColumnNames();
        }

        int columnIdx = this.columnIndexForName(columnName);

        if (columnIdx == -1)
        {
            return 0;
        }

        return intForColumnIndex(columnIdx);
    }

    public int intForColumnIndex(int columnIdx)
    {
        return rawQuery.getInt(columnIdx);
    }

    public long longForColumn(String columnName)
    {

        if (!columnNamesSetup)
        {
            this.setupColumnNames();
        }

        int columnIdx = this.columnIndexForName(columnName);

        if (columnIdx == -1)
        {
            return 0;
        }

        return longForColumnIndex(columnIdx);
    }

    public long longForColumnIndex(int columnIdx)
    {
        return (long) rawQuery.getLong(columnIdx);
    }

    public boolean boolForColumn(String columnName)
    {
        return (this.intForColumn(columnName) != 0);
    }

    public boolean boolForColumnIndex(int columnIdx)
    {
        return (this.intForColumnIndex(columnIdx) != 0);
    }

    public double doubleForColumn(String columnName)
    {

        if (!columnNamesSetup)
        {
            this.setupColumnNames();
        }

        int columnIdx = this.columnIndexForName(columnName);

        if (columnIdx == -1)
        {
            return 0;
        }

        return doubleForColumnIndex(columnIdx);
    }

    public double doubleForColumnIndex(int columnIdx)
    {
        return rawQuery.getDouble(columnIdx);
    }

    public String stringForColumnIndex(int columnIdx)
    {
        return rawQuery.getString(columnIdx);
    }

    public String stringForColumn(String columnName)
    {

        if (!columnNamesSetup)
        {
            this.setupColumnNames();
        }

        int columnIdx = this.columnIndexForName(columnName);

        if (columnIdx == -1)
        {
            return null;
        }

        return this.stringForColumnIndex(columnIdx);
    }

    public Date dateForColumn(String columnName)
    {

        if (!columnNamesSetup)
        {
            this.setupColumnNames();
        }

        int columnIdx = this.columnIndexForName(columnName);

        if (columnIdx == -1)
        {
            return null;
        }

        return new Date((this.longForColumn(columnName)));
    }

    public Date dateForColumnIndex(int columnIdx)
    {
        return new Date((this.longForColumnIndex(columnIdx)));
    }

    public byte[] dataForColumn(String columnName)
    {
        if (!columnNamesSetup)
        {
            this.setupColumnNames();
        }

        int columnIdx = this.columnIndexForName(columnName);

        if (columnIdx == -1)
        {
            return null;
        }

        return this.dataForColumnIndex(columnIdx);
    }

    public byte[] dataForColumnIndex(int columnIdx)
    {

        return rawQuery.getBlob(columnIdx);
    }

    public HashMap columnNameToIndexMap()
    {
        return columnNameToIndexMap;
    }

    public void setColumnNameToIndexMap(HashMap value)
    {

        columnNameToIndexMap = value;
    }

    @SuppressLint("NewApi")
    public int getType(String string)
    {
        return rawQuery.getType(columnIndexForName(string));
    }

} 
```

# c++ - 如何划分程序 - Qt、C++ 使用 mvc 逻辑

> ID：14081925
> 
> 赞同：3
> 
> 时间：2012-12-29T12:57:57.257
> 
> 标签：c++, qt

一开始我想说我刚开始学习QT，所以我对这方面的了解真的不深。我写了简单的任务管理，当然它是一个控制台应用程序。我使用了类似于 MVC 模式的逻辑（控制器、视图、动作、模型）。

例如，让我们以用户登录为例。我创建了 LoginController 类的实例，然后 LoginController 创建了正在等待用户输入数据的 LoginView 实例 - 登录名、密码。登录名和密码保存为 LoginView 成员。然后在 LoginController 中读取这些数据并将它们作为参数传递给 UserVerificationAction 构造函数。此类的构造函数将此数据保存为其类的成员。接下来在 LoginController 中，我调用 UserVerification 类的方法 - action() 来验证登录名和密码。然后根据验证结果创建 MenuController 实例或 LoginFailiedView 实例。这种机制是整个程序中的用户（CreateUserController、AddTaskController）等。我使用了虚拟方法，所以 MenuController 包含大约 20 行代码并且非常易于阅读。

我想使用 Qt 来实现更精确的 GUI 我想使用信号和插槽机制，但我有一个难题。也许最好在 LoginView 类中创建一个插槽，然后创建动作实例，而不是将输入的数据传递给 LoginView 成员，然后在 LoginController 中创建实例和动作类。也许有更好的方法来做到这一点。我希望你给我一些关于我应该如何正确地做的提示

ps对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:12:41.193

在 Qt 中，“控制器”的概念有些模糊。它往往是模型和视图的一部分。这并不意味着您不能编写控制器来链接模型和视图逻辑。

通常你会看到一个为它的动作发出信号的视图。然后将它们直接连接到模型上的兼容插槽或您编写自己的插槽的子类中。

例如，如果您有一个主窗口。此窗口可能会创建一个模型和一个视图作为子项。然后它可以在连接模型和视图的窗口子类上定义槽。这意味着您的窗口是一个视图和一个控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:54:59.963

Qt 提供[模型/视图](http://qt-project.org/doc/qt-4.8/model-view-programming.html)架构。
它引入了 3 个类：Model、View 和 Delegate，用于存储、呈现和编辑数据。

我相信这就是您正在寻找的。

# magento - 用于迁移的 magento nginx 重定向

> ID：14081927
> 
> 赞同：2
> 
> 时间：2012-12-29T12:58:19.853
> 
> 标签：magento, configuration, nginx

我有2个网站。假设网站 A 和 B。两者都使用 Magento。

B 中几乎所有的产品也都内置在 A 中。

网站 B 将被关闭，因此其所有匹配的产品将被重定向到网站 A。对于其他页面（不匹配的产品和其他 url）将被重定向到 A 的主页。

我创建了将匹配产品从 B 映射到 A 的脚本（将其放在名称 mapping.txt 下），它包含大约 20000 个 url。

为了进行重定向，我使用了 nginx HttpMapModule (http://wiki.nginx.org/HttpMapModule)

我可以通过使用这个conf来映射它：

```
map $uri $new{
    default http://www.a.com/?ref=b;
    include /some/path/mapping.txt;
}

server {
    listen 80 ;
    listen 443 ssl;
    server_name www.b.com;
    root /some/path/www/b;

    #redirect b
    rewrite ^ $new redirect;

    location / {
        index index.html index.php;
        try_files $uri $uri/ @handler;
        expires 30d;
    }
    .
    .
    .
} 
```

问题是，我希望能够访问 B 的管理页面。由于默认地图，我无法再访问`http://www.b.com/admin`。

然后，我更改了conf：

```
map $uri $new{
    default http://www.a.com/?ref=b;
    include /some/path/mapping.txt;
}

server {
    listen 80 ;
    listen 443 ssl;
    server_name www.b.com;
    root /some/path/www/b;

    location / {
        #redirect b
        rewrite ^ $new redirect;
        index index.html index.php;
        try_files $uri $uri/ @handler;
        expires 30d;
    }
    .
    .
    .
} 
```

通过这个配置，我仍然无法访问`http://www.b.com/admin`，但我可以访问`http://www.b.com/index.php/admin`，但 css 和 js 没有加载，因为请求（`http://www.b.com/skin/.....`并被`http://www.b.com/js/.....`重定向到`http://www.a.com/?ref=b`）

但是这个conf也有问题，如果我输入它不会重定向到A的主页`http://www.b.com/index.php/customer/account/login`

mapping.txt 的示例内容：

```
/product-abc.html http://www.a.com/product-abc12.html;
/category-a/product-xyz.html http://www.a.com/product-xyz.html;
/category-b/category-d/product-123.html http://www.a.com/category-e/product-12z.html; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:47:07.603

对于这些一般情况，您可以在 .htaccess 上使用简单的域重定向...

```
RewriteCond %{HTTP_HOST} ^www.a.com$ [NC]
RewriteRule ^(.*)$ http://www.b.com/$1 [R=301,L] 
```

# login - 如图所示，这种登录类型是什么？

> ID：14081928
> 
> 赞同：0
> 
> 时间：2012-12-29T12:58:30.297
> 
> 标签：login, router

我正在编写代码以登录路由器并获取一些设置。我为 HTML 登录编写的代码不适用于路由器登录。

我已经包含了图像。它是什么 ？我可以用 c#、python 或 C 编写代码来登录吗？

![在此处输入图像描述](../Images/37cd4174fd9046db95dad86764873478.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:00:20.457

这是[基本访问身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)。是的，只要您可以为请求指定自定义 HTTP 标头，您就可以使用任何您熟悉的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:07:57.493

正如 Jifri 所说，这是基本访问身份验证。您可以通过将用户名和密码作为您请求的 URL 的一部分发送来登录它：

[http://用户名：密码@url.com](http://username:password@url.com)

请参阅此处的讨论：[https url 中的用户名和密码](https://stackoverflow.com/questions/4980912/username-and-password-in-https-url)

# javascript - JQuery 追加元素超出父 div 宽度？

> ID：14081930
> 
> 赞同：0
> 
> 时间：2012-12-29T12:59:06.860
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我有一个使用引导类 span9 设置样式的 html div。

```
<div class="span9">
     <div id = "selectedtags" class="well">
     </div>
     <button class="btn" type="button" id="delegatecontent">Create report</button>
</div> 
```

我想要实现的是，在以下 li 标签（实际上是 20+ li 标签）上编写一个 jquery 点击事件，并将新创建的元素附加到 #selectedtags div 中。

```
<li class="dbcol">Location_Id</li>
<li class="dbcol">Location_Name</li>
<li class="dbcol">Location_EN</li> 
```

以下是我的 javascript (Jquery) 代码，用于在 #selectedtags div 中附加 span 标签。

```
$(document).ready(function() {  
            $('.dbcol').live('click', function () {
                var str = "";
                str = $(this).closest("ul").attr("id");
                var master_name = "";
                if (str == "countryselect") {master_name = "Country_Master"}
                if (str == "stateselect") {master_name = "State_Master"}
                if (str == "locationselect") {master_name = "Location_Master"}
                if (str == "hotelselect") {master_name = "Hotel_Master"}      
                var $newelement = "";

                $newelement += '<span class="label label-info isr" style="margin-top:3px; margin-bottom:2px; margin-right:5px; margin-left:3px; padding:2px;" id = ' +str+ '>';
                $newelement += master_name + '.';
                $newelement += $(this).text() + "  ";
                $newelement += '<i class="icon-remove icon-white"></i>';
                $newelement += '</span>';

                $(this).remove();
                $("#selectedtags").append($newelement);
            });

            $("i").hover(
            function () {
                $(this).removeClass('icon-white');
            });

            $('i').live('click',function() {
                var id = '#'
                id += $(this).closest("span").attr("id");
                var trt = $(this).closest("span").text();
                trt = trt.substring(trt.indexOf('.')+1);
                $(id).append('<li class="dbcol">' + trt +'</li>');
                $(this).closest("span").remove();
            });

            $("#delegatecontent").live('click',function() {
                var strqw ="";
                var final_string = "Select ";
                $('.isr').each( function() {
                    var df = $(this).text();
                    if (strqw == ""){
                        strqw += df;
                    }
                    else
                    {
                        strqw += ', '; 
                        strqw += df;
                    }
                });
                final_string += strqw;               
                alert (final_string);
            });
        }); 
```

一切正常，Jquery 代码确实在 div 中附加了新创建的 span 标签，但是新标签超出了 div 宽度（span9），而不是进入下一行。

除了默认的引导样式外，还添加了以下内容：

```
body {padding-top: 40px; padding-bottom: 40px; font-family: 'Monda', sans-serif;}
ul li {cursor: pointer;} 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:44:04.530

类标签 label-info 导致了这里的问题。

```
$newelement += '<span class="label label-info isr" style="margin-top:3px; margin-bottom:2px; margin-right:5px; margin-left:3px; padding:2px;" id = ' +str+ '>';
$newelement += master_name + '.';
$newelement += $(this).text() + "  ";
$newelement += '<i class="icon-remove icon-white"></i>';
$newelement += '</span>'; 
```

I am using the bootstrap class "label label-info" to style the newly created span tags.

If i remove the class label label-info the code works fine.

```
$newelement += '<span class="isr" style="margin-top:3px; margin-bottom:2px; margin-right:5px; margin-left:3px; padding:2px;" id = ' +str+ '>';
$newelement += master_name + '.';
$newelement += $(this).text() + "  ";
$newelement += '<i class="icon-remove icon-white"></i>';
$newelement += '</span>'; 
```

I am using a custom style now for span tags.

Thanks for help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:00:15.827

在“selectedtags”div 上尝试溢出：隐藏样式。

IE

```
<div class="span9">
     <div id = "selectedtags" class="well" style='overflow:hidden'>
     </div>
     <button class="btn" type="button" id="delegatecontent">Create report</button>
</div> 
```

# javascript - JavaScript 正则表达式匹配中的移动索引

> ID：14081935
> 
> 赞同：6
> 
> 时间：2012-12-29T12:59:41.260
> 
> 标签：javascript, regex

我有这个正则表达式来从文本中提取双字

`/[A-Za-z]+\s[A-Za-z]+/g`

而这个示例文本

`Mary had a little lamb`

我的输出是这个

`[0] - Mary had; [1] - a little;`

而我的预期输出是这样的：

`[0] - Mary had; [1] - had a; [2] - a little; [3] - little lamb`

我怎样才能实现这个输出？据我了解，搜索索引移动到第一个匹配项的末尾。我怎样才能把它移回一个字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T14:09:29.667

## 滥用 String.replace 函数

我使用了一个小技巧来使用这个[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter)函数。由于该`replace`函数循环匹配并允许我们指定一个函数，因此可能性是无限的。结果将在`output`.

```
var output = [];
var str = "Mary had a little lamb";
str.replace(/[A-Za-z]+(?=(\s[A-Za-z]+))/g, function ($0, $1) {
    output.push($0 + $1);
    return $0; // Actually we don't care. You don't even need to return
}); 
```

***由于输出包含输入字符串中的重叠部分，因此当我们使用前瞻*** ¹匹配当前单词时，有必要不消耗下一个单词。

正则表达式的`/[A-Za-z]+(?=(\s[A-Za-z]+))/g`作用与我上面所说的完全一样：它一次只会使用该`[A-Za-z]+`部分（正则表达式的开头）的一个单词，并预测下一个单词`(?=(\s[A-Za-z]+))` ²，并*捕获*匹配的文本。

传递给函数的`replace`函数将接收匹配的字符串作为第一个参数，并在后续参数中接收捕获的文本。（还有更多 - 检查[文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)- 我在这里不需要它们）。由于前瞻是*零宽度*（不消耗输入），因此整个匹配也方便地是第一个单词。前瞻中的捕获文本将进入第二个参数。

## RegExp.exec 的正确解决方案

请注意，`String.replace`函数会产生替换开销，因为根本不使用替换结果。如果这是不可接受的，您可以`RegExp.exec`在循环中使用函数重写上面的代码：

```
var output = [];
var str = "Mary had a little lamb";
var re = /[A-Za-z]+(?=(\s[A-Za-z]+))/g;
var arr;

while ((arr = re.exec(str)) != null) {
    output.push(arr[0] + arr[1]);
} 
```

## 脚注

1.  在其他支持可变宽度负向后看的正则表达式中，可以检索前一个单词，但 JavaScript 正则表达式不支持负向后看！。

2.  `(?=pattern)`是前瞻的语法。

## 附录

`String.match`不能在这里使用，因为它在`g`使用标志时会忽略捕获组。捕获组在正则表达式中是必需的，因为我们需要环顾四周以避免消耗输入并匹配重叠文本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T13:07:58.397

它可以在没有正则表达式的情况下完成

```
"Mary had a little lamb".split(" ")
      .map(function(item, idx, arr) { 
          if(idx < arr.length - 1){
              return item + " " + arr[idx + 1];
          }
       }).filter(function(item) {return item;}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T13:20:33.347

这是一个非正则表达式解决方案（这不是一个真正的常规问题）。

```
function pairs(str) {
  var parts = str.split(" "), out = [];
  for (var i=0; i < parts.length - 1; i++) 
    out.push([parts[i], parts[i+1]].join(' '));
  return out;
} 
```

传递你的字符串，你会得到一个数组。

### [演示](http://jsbin.com/aqiroy/1/)

* * *

旁注：如果您担心输入中的非单词（为正则表达式提供案例！），您可以在循环内和循环内`parts[i]`运行测试。如果测试失败：不要将它们推到.`parts[i+1]``for``out`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T14:11:24.560

您可能会喜欢的一种方式是：

```
var s = "Mary had a little lamb";

// Break on each word and loop
s.match(/\w+/g).map(function(w) {

    // Get the word, a space and another word
    return s.match(new RegExp(w + '\\s\\w+'));

// At this point, there is one "null" value (the last word), so filter it out
}).filter(Boolean)

// There, we have an array of matches -- we want the matched value, i.e. the first element
.map(Array.prototype.shift.call.bind(Array.prototype.shift)); 
```

如果您在控制台中运行它，您将看到`["Mary had", "had a", "a little", "little lamb"]`.

通过这种方式，您可以保留原始的正则表达式，并且可以在其中执行您想要的其他内容。尽管周围有一些代码使它真正起作用。

顺便说一句，这段代码不是跨浏览器的。IE8及以下不支持以下功能：

*   Array.prototype.filter
*   Array.prototype.map
*   函数.prototype.bind

但它们很容易调整。或者使用`for`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T18:57:41.473

出于对“前瞻”概念的充分推崇，我仍然提出了一个`pairwise`函数（[demo](http://jsfiddle.net/xtofl/B2jc7/)），因为对字符流进行标记实际上是 Regex 的任务，而如何处理标记的决定取决于业务逻辑。至少，这是我的看法。

遗憾的是 Javascript 还没有成对出现，但这可以做到：

```
function pairwise(a, f) {
  for (var i = 0; i < a.length - 1; i++) {
     f(a[i], a[i + 1]);
  }
}

var str = "Mary had a little lamb";

pairwise(str.match(/\w+/g), function(a, b) {
  document.write("<br>"+a+" "+b);
});

​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-29T13:13:50.363

开始了：

你仍然不知道正则表达式内部指针是如何工作的，所以我将通过一个小例子给你解释一下：

`Mary had a little lamb`用这个正则表达式`/[A-Za-z]+\s[A-Za-z]+/g`

在这里，正则表达式的第一部分：`[A-Za-z]+`将匹配`Mary`，因此指针将位于`y`

```
Mary had a little lamb
    ^ 
```

在下一部分（`\s[A-Za-z]+`）中，它将匹配一个空格，后跟另一个单词，所以......

```
Mary had a little lamb
        ^ 
```

指针将是单词`had`结束的地方。所以这是你的问题，你不希望增加正则表达式的内部指针，这是如何解决的？环顾四周是你的朋友。使用环视（lookahead 和lookbehind），您可以在不增加正则表达式的主要内部指针的情况下浏览您的文本（它会为此使用另一个指针）。

所以最后，匹配你想要的正则表达式是：`([A-Za-z]+(?=\s[A-Za-z]+))`

解释：

唯一认为您不知道该正则表达式的是该`(?=\s[A-Za-z]+)`部分，这意味着`[A-Za-z]+`必须后跟一个单词，否则正则表达式将不匹配。这正是您似乎想要的，因为内部指针不会增加，并且会匹配除最后一个以外的所有单词，因为最后一个不会跟一个单词。

然后，一旦你有了它，你只需要替换你现在所做的一切。

这里有一个工作示例，[DEMO](http://regex101.com/r/gO7bB5)

# python - Pymunk（花栗鼠） - 如何暂时关闭具体物体的物理/碰撞

> ID：14081949
> 
> 赞同：1
> 
> 时间：2012-12-29T13:01:03.140
> 
> 标签：python, collision, game-physics, chipmunk, pymunk

如何关闭某些对象的碰撞，然后在 python 中使用 pymunk lib 再次打开它？

让我根据下面的代码向您展示示例。我希望所有红球都通过线的第一个边界并停在下边界。蓝色球仍应与上边界碰撞。

代码中需要改变什么？

```
import pygame
from pygame.locals import *
from pygame.color import *
import pymunk as pm
from pymunk import Vec2d
import math, sys, random

def to_pygame(p):
    """Small hack to convert pymunk to pygame coordinates"""
    return int(p.x), int(-p.y+600)

pygame.init()
screen = pygame.display.set_mode((600, 600))
clock = pygame.time.Clock()
running = True

### Physics stuff
space = pm.Space()
space.gravity = (0.0, -900.0)

## Balls
balls = []

### walls
static_body = pm.Body()
static_lines = [pm.Segment(static_body, (111.0, 280.0), (407.0, 246.0), 0.0),
                pm.Segment(static_body, (407.0, 246.0), (407.0, 343.0), 0.0),
                pm.Segment(static_body, (111.0, 420.0), (407.0, 386.0), 0.0),
                pm.Segment(static_body, (407.0, 386.0), (407.0, 493.0), 0.0)]  
for line in static_lines:
    line.elasticity = 0.95
space.add(static_lines)

ticks_to_next_ball = 10

while running:
    for event in pygame.event.get():
        if event.type == QUIT:
            running = False
        elif event.type == KEYDOWN and event.key == K_ESCAPE:
            running = False

    ticks_to_next_ball -= 1
    if ticks_to_next_ball <= 0:
        ticks_to_next_ball = 100
        mass = 10
        radius = random.randint(10,40)
        inertia = pm.moment_for_circle(mass, 0, radius, (0,0))
        body = pm.Body(mass, inertia)
        x = random.randint(115,350)
        body.position = x, 600
        shape = pm.Circle(body, radius, (0,0))
        shape.elasticity = 0.95
        space.add(body, shape)
        balls.append(shape)

    ### Clear screen
    screen.fill(THECOLORS["white"])

    ### Draw stuff
    balls_to_remove = []
    for ball in balls:
        if ball.body.position.y < 200: balls_to_remove.append(ball)

        p = to_pygame(ball.body.position)
        if ball.radius > 25:
            color = THECOLORS["blue"]
        else:
            color = THECOLORS["red"]
        pygame.draw.circle(screen, color, p, int(ball.radius), 2)

    for ball in balls_to_remove:
        space.remove(ball, ball.body)
        balls.remove(ball)

    for line in static_lines:
        body = line.body
        pv1 = body.position + line.a.rotated(body.angle)
        pv2 = body.position + line.b.rotated(body.angle)
        p1 = to_pygame(pv1)
        p2 = to_pygame(pv2)
        pygame.draw.lines(screen, THECOLORS["lightgray"], False, [p1,p2])

    ### Update physics
    dt = 1.0/60.0
    for x in range(1):
        space.step(dt)

    ### Flip screen
    pygame.display.flip()
    clock.tick(50)
    pygame.display.set_caption("fps: " + str(clock.get_fps())) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T17:35:23.873

Chipmunk 有一些过滤冲突的选项： http: [//chipmunk-physics.net/release/ChipmunkLatest-Docs/#cpShape-Filtering](http://chipmunk-physics.net/release/ChipmunkLatest-Docs/#cpShape-Filtering)

听起来您只需要使用图层位掩码即可。

前任：

```
# This layer bit is for balls colliding with other balls
# I'm only guessing that you want this though.
ball_layer = 1
# This layer bit is for things that collide with red balls only.
red_ball_layer = 2
# This layer bit is for things that collide with blue balls only.
blue_ball_layer = 4

# Bitwise OR the layer bits together
red_ball_shape.layers = ball_layer | red_ball_layer
blue_ball_shape.layers = ball_layer | blue_ball_layer

# Lower border should collide with red only
upper_border_shape.layers = red_ball_layer

#Upper border with blue balls only
lower_border_shape.layers = blue_ball_layer 
```

我从未真正亲自使用过 Pymunk，但我猜它会将 Chipmunk 图层属性简单地暴露为 .layers

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T13:26:02.903

在 Pymunk 中，您可以使用[ShapeFilter](http://www.pymunk.org/en/latest/pymunk.html#pymunk.ShapeFilter)类来设置对象可以碰撞的类别（层）。我将上下线放入类别 1 和 2 中，然后设置球的蒙版，以便它们忽略这些层。您需要了解[位掩码的](https://en.wikipedia.org/wiki/Mask_(computing))工作原理。

这是基于原始问题中的代码的完整示例（按鼠标左键和右键生成球）。

```
import sys
import pygame as pg
from pygame.color import THECOLORS
import pymunk as pm

def to_pygame(p):
    """Small hack to convert pymunk to pygame coordinates"""
    return int(p[0]), int(-p[1]+600)

pg.init()
screen = pg.display.set_mode((600, 600))
clock = pg.time.Clock()

space = pm.Space()
space.gravity = (0.0, -900.0)

# Walls
static_body = space.static_body
static_lines = [
    pm.Segment(static_body, (111.0, 280.0), (407.0, 246.0), 0.0),
    pm.Segment(static_body, (407.0, 246.0), (407.0, 343.0), 0.0),
    pm.Segment(static_body, (111.0, 420.0), (407.0, 386.0), 0.0),
    pm.Segment(static_body, (407.0, 386.0), (407.0, 493.0), 0.0),
    ]
for idx, line in enumerate(static_lines):
    line.elasticity = 0.95
    if idx < 2:  # Lower lines.
        # The lower lines are in category 2, in binary 0b10.
        line.filter = pm.ShapeFilter(categories=2)
    else:  # Upper lines.
        # The upper lines are in category 1, in binary 0b1.
        line.filter = pm.ShapeFilter(categories=1)
space.add(static_lines)

balls = []
running = True

while running:
    for event in pg.event.get():
        if event.type == pg.QUIT:
            running = False
        elif event.type == pg.KEYDOWN and event.key == pg.K_ESCAPE:
            running = False
        if event.type == pg.MOUSEBUTTONDOWN:
            radius = 15 if event.button == 1 else 30
            mass = 10
            inertia = pm.moment_for_circle(mass, 0, radius, (0,0))
            body = pm.Body(mass, inertia)
            body.position = to_pygame(event.pos)
            shape = pm.Circle(body, radius, (0,0))
            shape.elasticity = 0.95
            if shape.radius > 25:
                # bin(pm.ShapeFilter.ALL_MASKS ^ 1) is '0b11111111111111111111111111111110'
                # That means all categories are checked for collisions except
                # bit 1 (the upper lines) which are ignored.
                shape.filter = pm.ShapeFilter(mask=pm.ShapeFilter.ALL_MASKS ^ 1)
            else:
                # Ignores category bin(2), '0b11111111111111111111111111111101'
                # All categories are checked for collisions except bit 2 (the lower lines).
                shape.filter = pm.ShapeFilter(mask=pm.ShapeFilter.ALL_MASKS ^ 2)

            space.add(body, shape)
            balls.append(shape)

    screen.fill(THECOLORS["white"])

    balls_to_remove = []
    for ball in balls:
        if ball.body.position.y < 100:
            balls_to_remove.append(ball)

        p = to_pygame(ball.body.position)
        if ball.radius > 25:
            color = THECOLORS["red"]
        else:
            color = THECOLORS["blue"]
        pg.draw.circle(screen, color, p, int(ball.radius), 2)

    for ball in balls_to_remove:
        space.remove(ball, ball.body)
        balls.remove(ball)

    for line in static_lines:
        body = line.body
        pv1 = body.position + line.a.rotated(body.angle)
        pv2 = body.position + line.b.rotated(body.angle)
        p1 = to_pygame(pv1)
        p2 = to_pygame(pv2)
        pg.draw.lines(screen, THECOLORS["gray29"], False, [p1, p2])

    # Update physics.
    dt = 1.0/60.0
    for x in range(1):
        space.step(dt)

    pg.display.flip()
    clock.tick(50)

pg.quit()
sys.exit() 
```

# apache - htaccess 重写除索引文档以外的子域的路径

> ID：14081951
> 
> 赞同：1
> 
> 时间：2012-12-29T13:01:35.190
> 
> 标签：apache, .htaccess

我的网站中有以下结构，我需要将所有流量重定向到子域

结构：

```
domain.com/subdomain/
                 .../folder1/folder/1.txt
                 .../folder1/folder/2.txt
                 .../folder2/folder/1.txt
                 .../folder2/folder/1.txt
                 .../index.php 
```

我想将除 index.php 或 (domain.com/subdomain/) 之外的所有流量重定向到子域

例子：

```
domain.com/subdomain/folder1/folder/1.txt    --->    subdomain.domain.com/folder1/folder/1.txt
domain.com/subdomain/folder1/folder/2.txt    --->    subdomain.domain.com/folder1/folder/1.txt 
```

但

```
domain.com/subdomain/index.php    --->    No redirect
domain.com/subdomain/    --->    No redirect 
```

这就是我想出的：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)$ http://subdomain.domain.com/$1 [NC] 
```

这适用于所有请求，但我想从这个 RewriteRule 中排除 / & index.php

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:29:14.253

你需要的比那里多一点。您必须首先使用 . 检查域`RewriteCond`。该模式`^subdomain/?(index\.php)?$`应匹配对子域根的请求或`index.php`带有或不带有`/`. 从技术上讲，它也可以匹配`subdomainindex.php`没有`/`between 的无效值，但无论如何都会导致 404。

```
RewriteEngine On
# If the requested domain isn't already the subdomain...
RewriteCond %{HTTP_HOST} !^subdomain\. [NC]
# Rewrite it to the subdomain
# unless it is a request for index.php or /
RewriteRule ^subdomain/?(index\.php)?$ - [L]
RewriteRule ^subdomain/(.*) http://subdomain.com/$1 [L,R=301,NC] 
```

# asp.net-mvc-4 - 自定义 SimpleMembership 提供程序

> ID：14081961
> 
> 赞同：3
> 
> 时间：2012-12-29T13:02:38.700
> 
> 标签：asp.net-mvc-4, simplemembership

我在 mvc4 应用程序中使用简单的成员资格提供程序，我可以看到为此生成的五个表。我可以看到用户名和密码存储在不同的表中。我想用一些自定义字段将用户名和密码保存在同一张表上。所以我通过继承 ExtendingMembership Provider 创建自己的 Membership Provider。我对此有一些疑问。

1.  我的应用程序使用 3 层架构（BLL、DAL 和表示层）并为帐户和管理员创建了 2 个区域。所以在这里我不知道在哪里放置我的会员提供者，然后通过应用程序的每个部分访问它以使用授权属性。
2.  我正在重写此方法 CreateUserAndAccount，我是否需要实现自己的逻辑来将用户注册数据保存到数据库。但是我发现只传递了一些参数，如何使用字典对象将剩余的自定义字段从视图传递到控制器？

    ```
    public override string CreateUserAndAccount(string userName, string password, bool     requireConfirmation, IDictionary<string, object> values)
    {
        throw new NotImplementedException();
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:32:33.993

至于问题#2：看看我这个周末问的这个问题...... [SimpleMemership CreateUserAndAccount Customization](https://stackoverflow.com/questions/14542257/simplememership-createuserandaccount-customization) - 特别是我在问题中链接的博客文章，因为它对扩展 SimpleMembership 非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T23:03:59.217

对于#1：`ExtendedMembershipProvider`根据需要使用 DI 注入 BLL 层。在您的 DI 配置中将其映射到 Membership.Provider。这实际上是一个 DAL，不应包含业务逻辑。最好还是围绕 WebSecurity 创建一个外观并将其注入到您的 BLL 中。

对于＃2：是的，`ExtendedMembershipProvider`接口使用键/值对字典，可用于使用您选择的实现将用户配置文件属性映射到数据库模式。

`SimpleMembershipProvider`通过将字典键映射到相应的数据库列来做到这一点。创建记录后，您可以`UserProfile`直接使用 EF 和模型管理用户数据。

实现自己`ExtendedMembershipProvider`的工作量很大，我不建议这样做。与遗留迭代相比，该`SimpleMembershipProvider`架构相对干净，我认为您需要一个很好的理由来将密码列移动到用户表，而不是仅仅配置`SimpleMembershipProvider`为使用您自己的架构，并将密码留在正确的位置。

# algorithm - 使用不相交集数据结构，图论

> ID：14081962
> 
> 赞同：5
> 
> 时间：2012-12-29T13:03:05.627
> 
> 标签：algorithm, data-structures, graph, graph-algorithm

我在空闲时间练习解决编程问题。这个问题我前段时间发现了，但仍然不知道如何解决：

> 对于具有 n 个顶点和 m 个边（均小于 2 × 10 ⁶）的给定无向图，我需要将其顶点拆分为尽可能多的组，但有一个条件：来自不同组的每一对顶点通过边连接。每个顶点恰好在一个组中。最后，我需要知道每个组的大小。

当我想出这个解决方案时，我感到很自豪：考虑原始图的[补充图](http://en.wikipedia.org/wiki/Complement_graph)并为其使用不相交集数据结构。它给了我们正确的答案（不难证明）。但这只是理论上的解决方案。在给定的约束下，它非常非常糟糕，不是最优的。但我相信这种方法可以以某种方式巧妙地解决。但是怎么做？

任何人都可以帮忙吗？

编辑：对于顶点从 1 到 7 和 16 条边的图：

> 1 3
> 
> 1 4
> 
> 1 5
> 
> 2 3
> 
> 3 4
> 
> 4 5
> 
> 4 7
> 
> 4 6
> 
> 5 6
> 
> 6 7
> 
> 2 4
> 
> 2 7
> 
> 2 5
> 
> 3 5
> 
> 3 7
> 
> 1 7

我们有 3 个大小的组：1、2 和 4。

这些组分别是：{4}、{5,7}、{1,2,3,6}。有边连接来自不同组的每对顶点，我们不能创建更多组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T18:56:45.250

我认为您缺少的唯一要素是如何处理稀疏图。

让我们从寻找最大可能的完整图的角度来考虑这个问题，我唯一能做的就是将一组节点（比如 v_1，...，v_k）组合在一起，并将新的超级节点边仅提供给那些`u`连接的节点对*所有*v_1, ..., v_k。

如果您的图形的边少于 n^2/4，则随机抽样`n`节点对，注意哪些对没有被边连接。Union-find 是一种简单的编码方式。现在使用您通过此随机抽样找到的集合作为组来重建图形。在这个简化图上递归。（我不太确定如何分析这一步，但我相信每个样本重建周期都会以高概率将图形大小至少减少一个常数因子，因此整个过程需要近乎线性的时间。）

一旦你有一个相当密集的图（至少 n^2/4 边），你可以转换为邻接矩阵表示并完全按照你的建议做 --- 检查所有节点对，每当你看到两个节点时进行联合没有被边缘连接，并读取集合。

# facebook - 在 Facebook 社交插件中检测“喜欢”

> ID：14081965
> 
> 赞同：0
> 
> 时间：2012-12-29T13:03:34.297
> 
> 标签：facebook, facebook-like, facebook-social-plugins

我有一个带有[Facebook Like](http://developers.facebook.com/docs/reference/plugins/like/)按钮（社交插件）的网页。当用户喜欢该页面时，我需要在我的页面上显示额外的信息。

我知道有[类似](https://stackoverflow.com/questions/2837999/event-handling-to-detect-if-user-clicks-a-like-button-in-xfbml-page) [的](https://stackoverflow.com/questions/10160487/detect-facebook-like-message) [问题](https://stackoverflow.com/questions/4360058/facebook-like-box-how-to-detect-if-user-already-liked-the-page)，但答案是使用该`edge.create`事件来对用户单击“赞”按钮做出反应。这工作正常，除非在加载页面之前发生类似情况。

其他人建议使用 a`signed_request`但我相信这仅适用于画布应用程序，

我知道我可以使用 API 来检查类似内容，但这需要用户授予权限，但我想以匿名方式执行此操作（我不想知道用户是谁，我只想知道他们是否喜欢这个页面）。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:48:35.833

使用 javascript onclick 来检测何时单击like 按钮并使用 localStorage 来存储信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:10:39.173

好吧，这正是拥有画布应用程序和仅使用插件的网站之间的区别。该插件允许（您允许）用户喜欢某个 URL，仅此而已。为了让在 Facebook 之外运营的网站明确访问该数据，它需要正确的权限，正如您所指出的那样……`user_likes`权限。

如果没有`signed_request`用户的 a 或相关权限，我认为您无法区分“喜欢”您的 URL 的用户。

# ios - 从变量以编程方式设置 UISegmentedControl 文本

> ID：14081973
> 
> 赞同：3
> 
> 时间：2012-12-29T13:04:56.757
> 
> 标签：ios, xcode, uisegmentedcontrol

我`UISegmentedControl`对使用情节提要有一个看法，目前正在使用以下代码行以编程方式设置文本：

```
[segMonth setTitle:@"Month 1" forSegmentAtIndex:0];
[segMonth setTitle:@"Month 2" forSegmentAtIndex:1]; 
```

我还有一个使用此代码的日期函数，它获取当前月份的数字（1-12）：

```
// Date
    NSDate *now = [NSDate date];
    NSString *strDate = [[NSString alloc] initWithFormat:@"%@",now];
    NSArray *arr = [strDate componentsSeparatedByString:@" "];
    NSString *str;
    str = [arr objectAtIndex:0];

    NSArray *arr_my = [str componentsSeparatedByString:@"-"];

    NSInteger month = [[arr_my objectAtIndex:1] intValue];
//End Date 
```

我试图将当前月份的第一段命名为“十二月”，将下个月的第二段命名为“一月”。

我尝试使用以下代码，但它似乎不起作用：

```
[segMonth setTitle:@"%d" forSegmentAtIndex:0];
[segMonth setTitle:@"%d" forSegmentAtIndex:1]; 
```

显然，这也只会给出月份的数字，而不是名称..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:11:15.173

您正在传递一个字符串格式化程序并期望它包含月份的名称。尝试

```
[segMonth setTitle:[NSString stringWithFormat:@"%@",str1] forSegmentAtIndex:0];
[segMonth setTitle:[NSString stringWithFormat:@"%@",str2] forSegmentAtIndex:1]; 
```

str1 和 str2 应该是包含月份名称的字符串（可通过 NSDateFormatter 获得）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T13:17:28.357

从这样的数字中获取月份名称：

```
 NSDateFormatter *df = [[[NSDateFormatter alloc] init] autorelease];
 NSString *monthName = [[df monthSymbols] objectAtIndex:(yourMonthNumberHere-1)]; 
```

现在使用它：

```
 [segMonth setTitle:monthName forSegmentAtIndex:0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T13:55:58.623

我看过你的代码，其中包含一个很难从`NSDate`我知道的月份中获得一个月的方法，这可能不是答案。但我只是要求您检查此代码，以了解获取月份、日期或时间或任何与`NSDate`.

```
NSDate *today = [NSDate date];
NSCalendar *gregorian = [[NSCalendar alloc]
                         initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [gregorian components:NSMonthCalendarUnit fromDate:today];
NSInteger currentMonth = [components month]; // this will give you the integer for the month number

[components setMonth:1];
NSDate *newDate = [gregorian dateByAddingComponents:components toDate:today options:0];
NSDateComponents *nextComponents = [gregorian components:NSMonthCalendarUnit fromDate:newDate]; 
```

**更新：**

```
NSInteger nextMonth = [nextComponents month]; // this will give you the integer for the month number 
```

正如@Prince 所说，您可以从`NSDateFormatter`. 无论如何，我重复一遍让你明白。

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
NSString *currentMonthName = [[df monthSymbols] objectAtIndex:(currentMonth-1)];
NSString *nextMonthName = [[df monthSymbols] objectAtIndex:(nextMonth-1)];

[segMonth setTitle:currentMonthName forSegmentAtIndex:0];
[segMonth setTitle:nextMonthName forSegmentAtIndex:1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T13:52:07.363

```
int currentMonth = 12;   //December
int nextMonth = 1;   //January
NSDateFormatter *df1 = [[[NSDateFormatter alloc] init] autorelease];
NSString *currentMonthName = [[df1 monthSymbols] objectAtIndex:(currentMonth-1)];

NSDateFormatter *df2 = [[[NSDateFormatter alloc] init] autorelease];
NSString *nextMonthName = [[df2 monthSymbols] objectAtIndex:(nextMonth-1)];

[segMonth setTitle:currentMonthName forSegmentAtIndex:0];
[segMonth setTitle:nextMonthName forSegmentAtIndex:1]; 
```

请注意，您需要从 currentMonth 和 nextMonth（从 1 到 12）中减去 1，因为 monthSymbols 是从零开始的。

# algorithm - IOI 限定符 INOI 任务 2

> ID：14081979
> 
> 赞同：0
> 
> 时间：2012-12-29T13:06:40.880
> 
> 标签：algorithm

我无法弄清楚如何以有效的方式解决以下链接中的问题 2： [http ://www.iarcs.org.in/inoi/2012/inoi2012/inoi2012-qpaper.pdf](http://www.iarcs.org.in/inoi/2012/inoi2012/inoi2012-qpaper.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T18:23:38.953

您可以在 On log n) 时间内执行此操作。（如果你真的愿意，也可以是线性的。）首先，使用一些非常大的负数将输入数组填充到 2 的下一次幂。现在，构建一个区间树状数据结构；通过将数组分成两半来递归地对数组进行分区。树中的每个节点代表一个子数组，其长度是 2 的幂，并且从一个位置开始，该位置是其长度的倍数，并且每个非叶节点都有一个“左半边”子节点和一个“右半边”子节点。

计算，对于树中的每个节点，当您添加`0,1,2,3,...`到该子数组并获取最大元素时会发生什么。请注意，这对于代表长度为 1 的子数组的叶子来说是微不足道的。对于内部节点，这只是长度/2 + 右孩子的左孩子的最大值。所以你可以在线性时间内构建这棵树。

现在我们想在这棵树上运行一系列`n`查询并打印出答案。查询的形式是“如果我添加`k,k+1,k+2,...n,1,...,k-1`到数组并报告最大值会发生什么？”

请注意，当我们将该序列添加到整个数组时，n 和 1 之间的中断要么发生在开始/结束处，要么发生在中间，或者在左半部分的某个地方，或者在右半部分的某个地方。因此，将数组划分为`k,k+1,k+2,...,n`部分和`1,2,...,k-1`部分。如果您在树中识别出代表子数组的所有节点，这些子数组完全位于两个序列之一内，但其父节点不存在或跨越断点，您将拥有 O(log n) 个节点。您需要查看它们的值，添加各种常量并取最大值。所以每个查询都需要 O(log n) 时间。

# python - 如何将强度矩阵转换为 tiff 多页

> ID：14081980
> 
> 赞同：0
> 
> 时间：2012-12-29T13:07:00.597
> 
> 标签：python, image, tiff

如何将强度矩阵（灰度）转换为图像`.tif`多页。

矩阵的每一列都必须转化为一张图片`.tif`，毕竟多页`.tif`图片必须是分组的。

**编辑：**

事实上，我的矩阵看起来像这样（我只给出了几个强度）

```
 132.23016 243468.60938    0.00000
 133.69370 333476.46875    0.00000
 139.01859 402385.59375    0.00000
 142.57642 250488.65625    0.00000
 146.34622 305834.59375    0.00000
 148.19623 217373.21875 217373.21875
 151.67098 650373.31250 650373.31250
 166.51741 229359.75000 229359.75000
 188.57649    0.00000 243086.14062
 201.84036    0.00000 217570.73438
 202.03575    0.00000 343220.56250
 204.74856    0.00000 225089.40625
 208.34233    0.00000 222927.35938 
```

我想将每一列转换为图像`tif`（灰度）。如何转换图像中的这些强度`tif`并将它们压缩成单个图像`tiff`（多页）？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:28:51.360

使用[Python Imaging Library](http://www.pythonware.com/products/pil/index.htm)，专门[`Image.frombuffer`](http://www.pythonware.com/library/pil/handbook/image.htm)或`Image.fromstring`来自`Image`模块。另请参阅[本页](http://www.pythonware.com/library/pil/handbook/decoder.htm)上的“原始解码器”部分。

# html - 对齐链接文本

> ID：14081981
> 
> 赞同：0
> 
> 时间：2012-12-29T13:07:25.750
> 
> 标签：html, css, text

我正在研究网站的 CSS 设计......每当发布链接时，它们的格式就像

[http://img4.ru/images/2012/12/29/lO5z.png](http://img4.ru/images/2012/12/29/lO5z.png)

如您所见，右侧未对齐。

我怎样才能把它变成类似的东西

[http://img4.ru/images/2012/12/29/btxDU.png](http://img4.ru/images/2012/12/29/btxDU.png)

我已经尝试了所有我知道的...

```
text-align:jutify, letter-spacing, etc. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T13:10:33.540

使字体等宽，Mac 的 Menlo，Win 7+ 的 Consolas，甚至 Courier New 都是相当标准的字体。

在您的 CSS 中使用：

```
.whatever-class {
    font-family: Menlo, Consolas, Courier New, monospace;
} 
```

将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T13:12:16.297

您可以在标签中包含链接`<pre></pre>`，这将提供所需的外观。

# r - 如何为动态名称变量赋值

> ID：14081982
> 
> 赞同：20
> 
> 时间：2012-12-29T13:07:40.683
> 
> 标签：r

您好我正在尝试使用 for 循环命名变量，以便为我的变量获取动态名称。

```
for (i in 1:nX) {
    paste("X",i, sep="")=datos[,i+1]
    next
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-29T13:11:46.180

使用`assign`如下：

```
x <- 1:10

for(i in seq_along(x)){
  assign(paste('X', i, sep=''), x[i])
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-29T13:28:14.493

`assign`当有许多变量并且经常查找它们时使用它可能是一个好主意。在环境中查找比在向量或列表中查找要快。数据对象的单独环境是个好主意。

另一个想法是使用`hash`包。它执行查找的速度与环境一样快，但使用起来更舒适。

```
datos <- rnorm(1:10)
library(hash)
h <- hash(paste("x", 1:10, sep=""), datos)
h[["x1"]] 
```

这是查找 10^5 次的 10000 个变量的时间比较：

```
datos <- rnorm(1:10000)
lookup <- paste("x", sample.int(length(datos), 100000, replace=TRUE), sep="")

# method 1, takes 16s on my machine
names(datos) <- paste("x", seq_along(datos), sep="")
system.time(for(key in lookup) datos[[key]])

# method 2, takes 1.6s on my machine
library(hash)
h <- hash(paste("x", seq_along(datos), sep=""), datos)
system.time(for(key in lookup) h[[key]])

# method 3, takes 0.2s on my machine
e <- new.env()
for(i in seq_along(datos)){
  assign(paste('x', i, sep=''), datos[i], envir=e)
}
system.time(for(key in lookup) e[[key]]) 
```

然而，方法 1 的矢量化版本是最快的，但并不总是适用

```
# method 4, takes 0.02s
names(datos) <- paste("x", seq_along(datos), sep="")
system.time(datos[lookup]) 
```

# javascript - 使用 JayData 过滤 Header Detail Table - Inner Join SQL, oData

> ID：14081989
> 
> 赞同：1
> 
> 时间：2012-12-29T13:09:19.500
> 
> 标签：javascript, odata, jaydata, datajs

你好我有点新并使用 JayData 和 oData 所以请原谅我的无知。

这是我的对象结构：

```
$data.Entity.extend('PlannerModel.vMasterPlanner', {
    'Sequence_Number': { key:true,type:'Edm.Int32',nullable:false,required:true },
    'Scenario_Name': { type:'Edm.String',nullable:true,maxLength:250 },
    'Activity_ID': { type:'Edm.String',nullable:false,required:true,maxLength:250 },
    'Activity_Description': { type:'Edm.String',nullable:true,maxLength:500 },
    'Object_ID': { type:'Edm.String',nullable:true,maxLength:250 },
    'Object_Description': { type:'Edm.String',nullable:true,maxLength:400 },
    'Operation_Code': { type:'Edm.String',nullable:false,required:true,maxLength:250 },
    'Operation_Description': { type:'Edm.String',nullable:true,maxLength:50 },
    'Crew_ID': { type:'Edm.String',nullable:true,maxLength:250 },
    'Crew_Name': { type:'Edm.String',nullable:true,maxLength:50 },
    'Period': { type:'Edm.Int32',nullable:true },
    'vActivity': { type:'PlannerModel.vActivity',required:true,inverseProperty:'vMasterPlanners' }   });

 $data.Entity.extend('PlannerModel.vActivity', {
    'Activity_ID': { key:true,type:'Edm.String',nullable:false,computed:true },
    'Activity_Name': { type:'Edm.String',nullable:false,required:true },
    'vMasterPlanners': { type:'Array',elementType:'PlannerModel.vMasterPlanner',inverseProperty:'vActivity' }   });

$data.EntityContext.extend('PlannerServiceLibrary.PlannerEntities', {
    ProgressDetails: { type: $data.EntitySet, elementType: PlannerModel.ProgressDetails },
      ProgressHeaders: { type: $data.EntitySet, elementType: PlannerModel.ProgressHeader },
      vCrews: { type: $data.EntitySet, elementType: PlannerModel.vCrew },
      vPeriods: { type: $data.EntitySet, elementType: PlannerModel.vPeriod },
      vOperations: { type: $data.EntitySet, elementType: PlannerModel.vOperation },
      vActivities: { type: $data.EntitySet, elementType: PlannerModel.vActivity },
      vMasterPlanners: { type: $data.EntitySet, elementType: PlannerModel.vMasterPlanner }   }); 
```

稍微解释一下：Table Master planner 是一个明细表，Table activity 是表头表我需要从活动表（表头）中选择所有活动，其中在明细表中找到的工作人员 ID 例如 = 2 如何我使用 oData 和 JayData 来做到这一点

我目前正在使用

```
provider.vActivities.filter(function (ac) { 
return ac.vMasterPlanners.Crew_ID == "FM2_F/W" })
               .toArray(function (e) {
                   console.log(e);
               }); 
```

这是要处理的错误未知表达式类型：EntitySetExpression localhost/mobile-web/htdocs/assets/jayData/jaydata.js 第 89 行

请帮助任何人！

谢谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:57:15.127

您需要“一些”或“每个”运算符，请参阅此[http://jaydata.org/blog/using-some-and-every-with-jaydata-odata-provider](http://jaydata.org/blog/using-some-and-every-with-jaydata-odata-provider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:44:17.533

它看起来像一个已知问题，我已将其添加到 github [http://github.com/jaydata/jaydata/issues/70](http://github.com/jaydata/jaydata/issues/70)

# .net - 在代码隐藏中注册依赖属性绑定

> ID：14081990
> 
> 赞同：1
> 
> 时间：2012-12-29T13:09:36.717
> 
> 标签：.net, wpf, vb.net, dependency-properties

**问题是如何设置依赖属性以将其绑定到任何其他依赖属性并稍后释放它。**

UserControl1 中有一个依赖属性

```
#Region "INotifyPropertyChanged Members"

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Protected Sub RaisePropertyChanged(ByVal name As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(name))
    End Sub

#End Region

#Region "BorderSize"

    Dim _BorderSize As Double = 1

    ''' <summary>
    ''' Gets or sets the BorderSize property. This observable property 
    ''' indicates ....
    ''' </summary>
    Public Overridable Property BorderSize() As Double
        Get
            Return _BorderSize
        End Get
        Set(ByVal value As Double)
            If _BorderSize <> value Then
                _BorderSize = value
                RaisePropertyChanged("BorderSize")
            End If
        End Set
    End Property

#End Region 
```

公共共享类中的一个依赖属性。

```
Public Class MyPublicClass
    Implements INotifyPropertyChanged

#Region "INotifyPropertyChanged Members"

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Protected Sub RaisePropertyChanged(ByVal name As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(name))
    End Sub

#End Region

#Region "BorderSize"

    Dim _BorderSize As Double = 1

    ''' <summary>
    ''' Gets or sets the BorderSize property. This observable property 
    ''' indicates ....
    ''' </summary>
    Public Property BorderSize() As Double
        Get
            Return _BorderSize
        End Get
        Set(ByVal value As Double)
            If _BorderSize <> value Then
                _BorderSize = value
                RaisePropertyChanged("BorderSize")
            End If
        End Set
    End Property

#End Region

End Class 
```

在 MainWindow.xaml.vb（代码隐藏）上，需要取消注册旧的用户控件并注册新的选定用户控件，以使用新用户控件的属性设置 Shared MyPublicClass。

**如何在代码隐藏中手动取消注册和注册依赖属性？**

*******解决了***********

 ***```
Dim myDataObject As New MyData(DateTime.Now)
Dim myBinding As New Binding("MyDataProperty")
myBinding.Source = myDataObject
BindingOperations.SetBinding(myText, TextBlock.TextProperty, myBinding) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:36:19.977

您需要创建一个Binding 对象，然后使用SetBinding 在目标上设置。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/ms742863.aspx](http://msdn.microsoft.com/en-us/library/ms742863.aspx)***

# javascript - 缩短用于搜索的查询字符串和许多过滤器

> ID：14081991
> 
> 赞同：2
> 
> 时间：2012-12-29T13:09:41.303
> 
> 标签：javascript, jquery, url, serialization, query-string

我正在构建一个使用许多过滤器的搜索功能。我决定使用 get 方法而不是 post（不同的原因）。问题是，当使用许多过滤器时，查询字符串会变得很长，尤其是当我使用同名过滤器时，我会得到

```
myurl.com?filter1[]=val1&filter1[]=val2&filter2=val 
```

为了获得更好的控制并防止 0 值，我尝试了 serializeArray：

```
var array = {}; 
jQuery.each(jQuery('form').serializeArray(), function(index,val) {
if (val.value != 0 )
    array[value.name] = val.value;
}); 
```

但是这样它会用 filter1 的最后一个值覆盖第一个 filter1，所以多个值不起作用。然后我有“问题”来创建查询字符串。我不是 javascript 教授。所以我需要一点帮助。

我能做什么，所以我得到一个查询字符串，如下所示：

```
myurl.com?filter1=val1|val2&filter2=val and so on 
```

HTML 是“普通”输入字段

```
<input type="checkbox" name="filter1[]" />
<input type="text" name="filter2" /> 
```

先感谢您

鲁文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:32:23.613

这个怎么样（[工作演示](http://jsfiddle.net/VFCw8/3/)）：

```
<form action="search.html">
    <input type="text" value="val1" name="filter1" />
    <input type="text" value="val2" name="filter1" />
    <input type="text" value="val" name="filter2" />
    <input type="submit" value="search" name="cmdSearch" />
</form>
​
<script>
    // don't do anything until document is ready
    $(function() {

        // register to form submit event
        $('form').submit(function(e){

            // stop the form from doing its default action (submit-GET)
            e.preventDefault();

            // initialise url
            var url = '';

            // keep track of previously enumerated field
            var prev = '';      

            // iterate all fields in the form except the submit button(s)
            $('input:not([type="submit"])', $(this)).each(function(){

                // get the name of this field, with null coalesce
                var name = $(this).attr('name') || '';

                // get the value of this field
                var val = $(this).attr('value');

                // does this field have the same name as the previous?
                if (name.toLowerCase() == prev.toLowerCase()) {

                    // same name therefore we have already appended the name
                    // append value separator
                    url += '|';
                }
                else {

                    // different name, track new name
                    prev = name;

                    // append parameter separator, parameter name, equals char
                    url += '&' + name + '=';
                }

                // append value of this field         
                url += val;
            });

            // removing leading ampersand
            if (url.length && [0] == '&') {
                url = url.substring(1);            
            }       

            // insert leading question mark
            url = '?' + url;

            // insert url from "action" attribute of the form
            url = $(this).attr('action') + url;

            // display url (delete this line)
            alert(url);

            // redirect to the new url (simulates the GET)
            window.location.href = url;
        });
    });
</script> 
```

# php - 声明财产的价值等于父母的价值

> ID：14081993
> 
> 赞同：-1
> 
> 时间：2012-12-29T13:09:54.050
> 
> 标签：php, oop

我有一个名为“人”的父类。“个人”是“人”的子类。

在“人”中，我有一个名为“$_pk_person”的受保护属性；

在“个人”中，我想创建一个名为“$_fk_individual_person”的受保护属性，其值等于“$_pk_person”的继承值。

我不应该仅仅通过说明来做到这一点：

```
protected $_fk_individual_person = {$this->_pk_person}; 
```

或者

```
protected $_fk_individual_person = $_pk_person; 
```

或者

```
protected $_fk_individual_person = get_pk_person(); 
```

或者

```
protected $_fk_individual_person = self::get_pk_person(); 
```

或者

```
protected $_fk_individual_person = self::_pk_person; 
```

或者

```
protected $_fk_individual_person = parent::_pk_person; 
```

或者

```
protected $_fk_individual_person = parent::get_pk_person(); 
```

在“个人”课堂上？？

他们都没有工作。我一定是在某个地方犯了一个根本性的错误，因为我是一个完全的新手。

请帮帮我。

使用 CONSTRUCTOR 后，我的班级看起来像这样：

```
class individual extends person {
public $_fk_individual_person;
function __construct() {
    $this->_fk_individual_person = $this->_pk_person;
}
} 
```

我测试了它，但屏幕是空白的：$xyz = new individual();

```
$xyz->pk_person='abcd';

echo $xyz->_fk_individual_person; 
```

我现在哪里糊涂了？对不起，但我是一个绝对的新手（昨天才开始 oop 编码，这是我的第一堂课）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T13:16:25.670

如果没有构造函数，您将无法做到这一点。因为初始化必须是 const 或在编译时已知。看手册：

> 类成员变量称为“属性”。您可能还会看到使用“属性”或“字段”等其他术语来提及它们，但出于本参考的目的，我们将使用“属性”。它们是通过使用关键字 public、protected 或 private 之一定义的，后跟一个普通的变量声明。**这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。**

但是使用构造函数是要走的路：

```
class individual extends person {
    protected $_fk_individual_person;
    function __construct() {
        $this->_fk_individual_person = $this->_pk_person;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T13:13:15.370

您需要在子类构造函数中执行赋值。

```
class B extends A{
   function __construct() {
      $this->_fk_individual_person = $this->_pk_person;
   }
} 
```