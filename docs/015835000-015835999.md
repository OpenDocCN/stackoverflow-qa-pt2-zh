# StackOverflow 问答 15835000-15835999

# c# - 提高 .Net 内存速度和效率

> ID：15835009
> 
> 赞同：0
> 
> 时间：2013-04-05T13:17:34.147
> 
> 标签：c#, .net, memory-management, garbage-collection

我有一项服务，我会在很长一段时间内查询一次，我想“简化”或提高其内存分配的效率。

大多数时候它只是坐着等待，偶尔它会收到一个需要分配**大量** 内存的请求，并对其进行一些处理。我事先不知道类型或结构 - 这取决于请求，并且变化很大。

现在，大处理请求被一些喋喋不休（其他请求）排除，这可能需要几秒钟。

我想要做的是，当喋喋不休（较小的请求）开始时，对 .Net 框架说：转到 Windows，并为自己获取几 GB 的内存，这样当我询问时它会更快可用，当我完成了，对 .Net 说：我目前没有使用的所有东西，你可以还给我，因为我暂时不需要它。

* * *

在我们说话时，我开始进行分析……但我怀疑这将是可以改进的问题的一部分。

我会尽力澄清情况。

我有一个位于服务器上的服务，95% 的时间什么都不做。偶尔它会收到一个请求来做一些主要是内存密集型的处理。

我提前一点时间知道这一切都会发生。

我想做的只是提示 GC“很快将需要大量内存”，然后“暂时不需要任何特别的东西”

* * *

好的。我已经完成了分析，并决定我不在乎这个。分配确实需要一些时间（几到几十毫秒），但与其他处理相比微不足道......

关于发布部分，它最终会发生，并且不会真正干扰服务器的其余部分......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:23:39.963

如果您希望能够保留一块内存供您使用，请参阅：

[在 C# 中分配“非托管”内存](https://stackoverflow.com/questions/2648560/allocating-unmanaged-memory-in-c-sharp)

请注意，这样做可能会有风险，并且 .NET VM 中的垃圾收集器和内存分配已经相当不错了。

如果内存分配可以在很大程度上被缓存，那么我建议缓存可以这样做的内容，以便`WeakReference`快速连续的请求可以从访问缓存的数据中受益，但是如果在间隔相当大的请求之间进行垃圾收集，那么数据可以释放并在下一个请求中重新创建。

请参阅：[弱参考优势](https://stackoverflow.com/questions/310685/weak-references)

并且：http: [//msdn.microsoft.com/en-gb/library/system.weakreference.aspx](http://msdn.microsoft.com/en-gb/library/system.weakreference.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:23:48.733

大多数时候 GC 足够聪明，可以为您执行此操作。但是，这是一个架构问题，可以通过修改服务中的活动流来解决。

例如，您可以在请求到来之前提前分配处理大请求所需的对象。但是，对于解除分配，要么显式地为它们实现不可分配接口，并在它们被使用后销毁它们，要么将其留给 GC。

此外，您必须了解内存分配的工作原理。为了获得为 .Net 对象分配的内存，您必须提前知道对象的类型。仅仅分配一块普通的内存对你没有任何帮助。大多数情况下，与框架用于为对象分配内存的 malloc 相比，对象创建或克隆代码更消耗资源。

考虑到细节，我想说即使你能成功地完成这个例程，它也会变得更加复杂，并且可能会给你的代码添加更多的错误。最好把它留给 .Net 框架。它非常擅长分配和释放内存。

# android - 如何修改 Facebook 的 Webview 以使其正确显示在设备屏幕上？

> ID：15835011
> 
> 赞同：0
> 
> 时间：2013-04-05T13:17:40.523
> 
> 标签：android, facebook, webview

我正在开发一个连接到 Facebook 并共享一些内容的小 Android 应用程序。我想知道是否有办法修改这个默认 Facebook 的 web 视图的大小（高度和宽度），因为它有点高，并且因为应用程序的顶部栏默认设置是隐藏的。

这可能吗？我正在使用适用于 Android 的最新 Facebook SDK：3.0

谢谢我提前。

编辑：网络视图是这样的。 ![在此处输入图像描述](https://i.stack.imgur.com/IE0vE.png)

它应该是这样的，但就像我的情况一样，它有点高并且隐藏了应用程序顶部栏的一部分。例如，Facebook 的名字在哪里，网页视图的顶部只显示一半。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:21:41.170

通过使用适用于 Android 的 SDK，这似乎是 Facebook 的 API 的正常行为，因为可用的示例具有相同的行为。请参阅[https://github.com/facebook/facebook-android-sdk上的 SessionLoginSample](https://github.com/facebook/facebook-android-sdk)

我想就是这样。希望能帮助到你。

也感谢大家的帮助。

# c# - C# Control.Invoke 方法组

> ID：15835016
> 
> 赞同：2
> 
> 时间：2013-04-05T13:17:56.277
> 
> 标签：c#, multithreading, delegates, invoke

我正在使用线程在程序的 UI 中运行长时间的操作，这样它就不会被锁定。但是，在这些任务中，我需要更新控件，这不可能不是来自创建它们的线程。建议使用 control.BeginInvoke(Delegate) 来执行你想要的方法。

但是，要做到这一点，您必须声明一个委托类型，然后才能调用它们。

所以，它是这样的：如果我想执行方法 void Update()，我必须去：

```
delegate void CallbackVoid();
void Update() {...}

...(in task code)...
this.BeginInvoke(new CallbackVoid(Update)); 
```

对于那里的每一种方法，这都是相当烦人的。我不能以某种方式自然地做到这一点，例如：

```
void Update() {...}    
this.BeginInvoke(Update); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:23:13.560

简化事情的一种选择是添加扩展方法：

```
public static void BeginInvokeAction(this Control control, Action action)
{
    control.BeginInvoke(action);
} 
```

然后你可以使用：

```
this.BeginInvokeAction(action); 
```

这样做的原因是我们现在为编译器提供了一个具体的委托类型，以将方法组转换为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:20:52.740

**更新**：**适用于 WPF ！！！**

您可以在匿名方法中使用短语法，甚至无需声明您的方法

```
 Dispatcher.BeginInvoke(DispatcherPriority.Background, new MethodInvoker(() =>   
                {
                   //Your Update code
                })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:23:57.903

尝试以下操作：

```
 if (this.controlname.InvokeRequired && !this.controlname.IsDisposed)
                {
                    Invoke(new MethodInvoker(delegate()
                        {
                            //Update control on GUI here!

    }));
    else if(!this.controlname.IsDisposed)
   {
                           //AND here!
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:41:41.743

`BeginInvoke`是异步的，`Invoke`是同步的，你使用哪一个取决于你想要做什么。如果您需要在继续之前完成调用，那么您需要同步调用。

这是我最喜欢的同步调用构造：

```
 static void InvokeIfRequired(Control control, Action action)
 {
    if (control.InvokeRequired)
    {
        control.Invoke(action);
    }
    else
    {
        action.Invoke();
    }
 } 
```

用过的：

```
void MyTestFunction()
{
    InvokeIfRequired(myControl, () =>
        {
            MyFunction();
            MyOtherFunction();
        });

    // Or more simply:
    InvokeIfRequired(myControl, () => MyFunction());
} 
```

创建动作有一点开销，但它大大简化了代码，不必考虑各处的细节。

# java - OSGi 服务：调用 DLL 的 java.lang.UnsatisfiedLinkError -- 将 DLL 作为单元测试调用时没有错误

> ID：15835018
> 
> 赞同：1
> 
> 时间：2013-04-05T13:17:59.517
> 
> 标签：java, dll, java-native-interface, osgi, swig

用于视频编码的 Java 类加载包含 C++ 代码的 DLL

```
Unpacking debugging symbols for VideoSource.dll to \path
Checking for VideoSource.pdb...
Checking for videosource.pdb... 
```

然后尝试从该 DLL 实例化本机 (C++) 类：

```
 // VideoSource() is implemented in C++ and wrapped with JNI, 
    // wrapper files were generated with SWIG 
    _videoProvider = new generated.VideoSource(); 
```

当 Java 类作为 JUnit 测试（提取视频数据）执行时，这种方法有效。

**当我将 Java 类作为 OSGi 服务启动时，同样的事情也不起作用。**

本质上，执行的是相同的代码。DLL 仍然成功加载，但上面显示的本机 (C++) 类的实例化现在引发异常：

```
 java.lang.UnsatisfiedLinkError: generated.VideoSourceSWIGJNI.new_VideoSource()J 
```

**当我将 Java 类作为 OSGi 服务启动而不是作为 JUnit 测试执行时，有什么不同？我该怎么做才能让它发挥作用？**

**背景**
生成.VideoSource() 是

```
 public VideoSource() {
       this(VideoSourceSWIGJNI.new_VideoSource(), true);
    } 
```

VideoSourceSWIGJNI.new_VideoSource() 是

```
 public final static native long new_VideoSource(); 
```

C++ 实现是

```
VideoSource::VideoSource() {    
   // init frame count
   m_frame_cnt = 0;
   [..]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:20:25.610

谢谢，普斯，给了我一点压力。在问“我是否必须尝试任何事情”之后？我很快得到了答案：

为了用我自己的话恢复来源（ [1](https://stackoverflow.com/questions/9533595/osgi-framework-hangs-when-loading-native-library)、[2](http://wiki.osgi.org/wiki/Manifest)、[3](http://josh-in-antarctica.blogspot.de/2008/05/visualizer-part-2-osgi-native-libraries.html)、[4 ）：](http://holistictendencies.wordpress.com/2011/03/28/bundle-nativecode-using-platform-specific-dlls-from-osgi/)

**当本机代码（例如 .so 或 .dll 库）应在 OSGi 包中使用时，必须在包的清单中声明相应的库。**

清单文件可以显式编辑，如提到的源中所述，或者在使用 maven 时通过适当的插件，例如 apache felix 隐式编辑。使用的插件在 POM 文件中配置，将自动修改清单。

# perl - 使用电子表格::WriteExcel

> ID：15835021
> 
> 赞同：0
> 
> 时间：2013-04-05T13:18:00.560
> 
> 标签：perl, parsing

我想从一张 Excel 表格中提取一些信息并将其重新格式化为另一张表格。数据结构类似于：

```
 col1      col2
row1  School    1
row2  Dean      John
row3  No.stu.   55
row4  some irrelevant stuff
row5  School2   2
row6  Dean      Tony
row7  No. stu.  60
row8  some irrelevant stuff
row9  School    3
row10 Dean      James
row11 No.stu.   56
row12 No. teacher 20 
```

我想要实现的输出是：

```
 col1 col2 col3
row1 School Dean No.stu.  No. teacher
row2 1      John  55
row3 2      Tony  60
row4 3      James 56       20 
```

我被建议用来从 Excel 中提取信息的代码如下（感谢来自*[PerlMonks](https://en.wikipedia.org/wiki/PerlMonks)*的 hdb ）。

```
use strict; use warnings;

use Spreadsheet::ParseExcel;

my ($infile) = @ARGV;

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse($infile);
die $parser->error unless defined $workbook;
my ($worksheet) = $workbook->worksheets();

my %data; # Accumulate data here
my $row = 0;
my $school = 0;
while (1) {
    my $cell = $worksheet->get_cell($row, 0);
    last unless defined($cell);
    my $key =  $cell->value();
    my $data = $worksheet->get_cell($row++, 1)->value();
    if( $key eq "School" ) {
        $school = $data;
    }
    else {
        $data{$school}{$key} = $data;
    }
} 
```

现在下一步是将所有内容重新写入新的 Excel 工作表。我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:38:22.317

你的代码有点破。这是我的：

```
use strict;
use warnings;

use Spreadsheet::ParseExcel;
use FindBin qw($Bin);

my ($infile) = @ARGV;

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse("$Bin/Test.xls");
die $parser->error unless defined $workbook;
my ($worksheet) = $workbook->worksheets();

my %data;
my $row    = 0;
my $school = "";
while (1) {
    my $cell = $worksheet->get_cell( $row, 0 );
    last unless defined($cell);

    my $key = $cell->value();
    my $value = $worksheet->get_cell( $row++, 1 )->value();

    if ( $key eq "School" ) {

        $school = $value;
        next;
    }

    $data{$school}->{$key} = $value;
}
sleep 1;

use Spreadsheet::WriteExcel;

$workbook = Spreadsheet::WriteExcel->new('Result.xls');

$worksheet = $workbook->add_worksheet();
my $col = 0;
$row = 0;

$worksheet->write( $row++, $col,
    [ "School", "Dean", "No.stu.", "No. teacher" ] );

foreach my $school ( sort keys %data ) {

    $worksheet->write( $row++, $col,
        [ $school, @{ $data{$school} }{ "Dean", "No.stu.", "No. teacher" } ] );
}
$workbook->close(); 
```

# c++ - 在纯文本小部件中显示双精度值时出错

> ID：15835026
> 
> 赞同：0
> 
> 时间：2013-04-05T13:18:15.733
> 
> 标签：c++, visual-studio-2010, qt

[更新]

这是我的代码：

```
double tmp=0;

double A=4.87149e+07;
double B=10;
double C=5.29e-06;
...

double sum=0;
ofstream M2;
M2.open("C:/capture/M2.doc");
for (i=0;i<916;i++)
{
    for (int j=0;j<916;j++)
    {
            tmp=A*B*C;
            sum= sum+tmp;
            M2 << sum << "\n";
    }
} 
```

'我有什么上面：

当我打印总和时，它给了我一个 NaN 结果。

当我从求和公式中省略 C 时，它给了我一个非 Nan 结果。因此，我相信编译器假装它是关于 +oo/-oo 乘法（A 很大，C 很小），但事实并非如此！

我正在处理这样的重要数据。

我想在 TextEdit 的末尾打印结果：

```
plainTextEdit->setPlainText(QString::number(sum)); 
```

一旦我恰好达到 i 计数循环 (458) 和 j (458) 的一半，Sum 的值就等于 -1.#IND

如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:09:25.117

运行以下：

```
#include <iostream>
#include <fstream>
#include <QDebug>

int main(int argc, char *argv[])
{
    double tmp=0;

    double A=4.87149e+07;
    double B=10;
    double C=5.29e-06;

    double sum=0;
    std::ofstream M2;
    M2.open("M2.doc");
    for (int i=0;i<916;i++)
    {
        for (int j=0;j<916;j++)
        {
                tmp=A*B*C;
                sum= sum+tmp;
                M2 << sum << "\n";
        }
        qDebug() << sum;
    }
} 
```

产量：（M2.doc 的第 1-10 行）

```
2577.02
5154.04
7731.05
10308.1
12885.1
15462.1
18039.1
20616.1
23193.2
25770.2 
```

...（第 209760-209770 行）209764 是 i = 458 和 j = 458

```
5.40555e+008
5.40558e+008
5.4056e+008
5.40563e+008
5.40566e+008
5.40568e+008
5.40571e+008
5.40573e+008
5.40576e+008
5.40579e+008
5.40581e+008 
```

...（第 839047 到 839056 行也就是结尾）

```
2.16224e+009
2.16224e+009
2.16224e+009
2.16225e+009
2.16225e+009
2.16225e+009
2.16225e+009
2.16226e+009
2.16226e+009
2.16226e+009 
```

我在 Notepad++ 中打开了文件，因为 MS Word 很难处理这么长的文件。 `tmp`可能被编译器优化为几乎完全像一个常量: `2577.02`，或者如果你使用 printf 你可以很容易地看到一些额外的精度: `2577.018210`. 该`qDebug()`行对终端产生类似的答案。

[谷歌的计算器输出](https://www.google.com/search?q=4.87149e%2b07%2a5.29e-06%2a10&aq=f&oq=4.87149e%2b07%2a5.29e-06%2a10)

`double`可以跟踪大量值：

```
#include <limits>
//...
printf("%g\n", std::numeric_limits<double>::min());
printf("%g\n", std::numeric_limits<double>::max()); 
```

打印出来

```
2.22507e-308
1.79769e+308 
```

用我的设置。

我希望这会有所帮助。

# c# - MVC 4 - 报告服务和存储过程

> ID：15835032
> 
> 赞同：1
> 
> 时间：2013-04-05T13:18:24.983
> 
> 标签：c#, sql, asp.net-mvc, stored-procedures, reporting-services

我正在使用 MVC4 和实体框架来开发 Intranet Web 应用程序，其中一项要求是该应用程序将能够创建报告。所以我正在使用报告服务来做到这一点。

在我的报告文件 (.rdlc) 中，我有一个表，它应该包含我在表“Persons”中的所有记录。我创建了一个存储过程，它从我的数据库中获取所有人员以及一个允许下载报告的操作。

事情是，我不知道如何告诉我的操作我的数据源是我的存储过程。

这是我的行动：

```
public ActionResult PersonReport()
{

    ReportViewer personReportViewer = new ReportViewer();

    List<ReportParameter> reportParameters = new List<ReportParameter>();

    reportParameters.Add(new ReportParameter("Title", "Test"));

    personReportViewer.LocalReport.SetParameters(reportParameters);

    personReportViewer.ProcessingMode = ProcessingMode.Local;
    personReportViewer.LocalReport.ReportEmbeddedResource = 
       HttpContext.Server.MapPath(".") + "\\Reporting\\Templates\\"
        + "PersonReport.rdlc";

    byte[] byteArray = personReportViewer.LocalReport.Render("PDF");

    Response.ClearHeaders();
    Response.AddHeader("Content-Disposition", 
         "attachment; Filename=\"" + DateTime.Now + "_Title_" + "\"");
    Response.AddHeader("Content-Transfer-Encoding", "Binary");
    Response.BinaryWrite(byteArray);
    Response.Flush();
    Response.End();

    return RedirectToAction("Index");
} 
```

这是我的存储过程：

```
ALTER PROCEDURE dbo.GetAllPersons

AS

BEGIN

    SET NOCOUNT ON

    SELECT * FROM  bm_Persons;

END 
```

关于如何做到这一点的任何想法？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:26:03.653

您需要运行该过程并将结果传递给 ReportViewer。
但是你是如何**做到**的，目前无法回答。您是否使用普通的旧 ADO.NET 连接到您的数据库、实体框架或 NHibernate 等...

您的存储过程将返回结果集合，因此我会将其分配给一个变量并将其传递给 ReportViewer。或者有一个方法`GetAllPersons`返回一个`Array`or`IList<T>`或其他合适的类型，然后你可以在你的方法范围之外使用它。

鉴于您正在使用 EF，那么为了从您的存储过程中获得一组结果，您将需要一个类似于我从[我在评论中提到的答案](https://stackoverflow.com/a/10254855/96505)中获取的方法：

```
public static DataSet ExecuteStoredProcedure(ObjectContext db, 
                                             string storedProcedureName, 
                                             IEnumerable<SqlParameter> parameters)
{
    var connectionString = 
        ((EntityConnection)db.Connection).StoreConnection.ConnectionString;
    var ds = new DataSet();

    using (var conn = new SqlConnection(connectionString))
    {
        using (var cmd = conn.CreateCommand())
        {
            cmd.CommandText = storedProcedureName;
            cmd.CommandType = CommandType.StoredProcedure;
            foreach (var parameter in parameters)
            {
                cmd.Parameters.Add(parameter);
            }

            using (var adapter = new SqlDataAdapter(cmd))
            {
                adapter.Fill(ds);
            }
        }
    }

    return ds;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T13:27:36.400

我认为您需要设置`ReportViewer1.LocalReport.DataSources`：

```
SqlCommand cmd = new SqlCommand();

cmd.Parameters.Add(new SqlParameter("@StartDate", startDate)); 
cmd.Parameters.Add(new SqlParameter("@EndDate", endDate)); 

var thisConnectionString = ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString; 

SqlConnection thisConnection = new SqlConnection(thisConnectionString); 

cmd.Connection = thisConnection; 

cmd.CommandText = string.Format("[dbo].[StoredProcedureName]"); 
cmd.CommandType = CommandType.StoredProcedure; 
SqlDataAdapter da = new SqlDataAdapter(cmd); 

System.Data.DataSet thisDataSet = new System.Data.DataSet(); 

da.Fill(thisDataSet); 

////////////
/// HERE ///
////////////
ReportDataSource datasource = new ReportDataSource(rptName, thisDataSet.Tables[0]); 

ReportViewer1.LocalReport.DataSources.Clear(); 
ReportViewer1.LocalReport.DataSources.Add(datasource); 

....................

ReportViewer1.LocalReport.Refresh(); 
```

# haskell - “无法匹配预期类型”错误

> ID：15835037
> 
> 赞同：0
> 
> 时间：2013-04-05T13:18:36.300
> 
> 标签：haskell, match

这是我的代码：

```
xandy :: Element_w_Coord Cell -> Coord
xandy (e, (x, y)) = (x, y)

transition_world :: Ordered_Lists_2D Cell -> Element_w_Coord Cell -> Ordered_Lists_2D Cell
transition_world world (cell, (x, y)) = case (cell, (x, y)) of
    (Head, (x, y))-> map_Ordered_Lists_2D Tail world
    (Tail, (x, y)) -> map_Ordered_Lists_2D Conductor world
    (Empty, (x, y)) -> map_Ordered_Lists_2D Empty world
    (Conductor, (x, y))  -> map_Ordered_Lists_2D Head world 
```

这是错误消息：

```
Sources/Transitions/For_Ordered_Lists_2D.hs:33:43:
    Couldn't match expected type `Element_w_Coord e0 -> Cell'
                with actual type `Cell'
    In the first argument of `map_Ordered_Lists_2D', namely `Tail'
    In the expression: map_Ordered_Lists_2D Tail world
    In a case alternative:
        (Head, (x, y)) -> map_Ordered_Lists_2D Tail world 
```

有人喜欢告诉我我的代码有什么问题吗？

顺便说一句，这里是定义

```
type Ordered_Lists_2D e = [Sparse_Line e]

data Sparse_Line e = Sparse_Line {y_pos :: Y_Coord, entries :: Placed_Elements e}

data Placed_Element  e = Placed_Element {x_pos :: X_Coord, entry :: e}
type Placed_Elements e = [Placed_Element e]

map_Ordered_Lists_2D :: (Element_w_Coord e -> b) -> Ordered_Lists_2D e -> Ordered_Lists_2D b
map_Ordered_Lists_2D f world =  case world of
   l: ls -> map_line f l: map_Ordered_Lists_2D f ls
   []    -> []
   where
      map_line :: (Element_w_Coord e -> b) -> Sparse_Line e -> Sparse_Line b
      map_line f line = Sparse_Line {y_pos = (y_pos line), entries = map_elements f (y_pos line) (entries line)}

         where
            map_elements :: (Element_w_Coord e -> b) -> Y_Coord -> Placed_Elements e -> Placed_Elements b
            map_elements f y elements = case elements of
               c: cs -> Placed_Element {x_pos = (x_pos c), entry = f ((entry c), ((x_pos c), y))}: map_elements f y cs
               []    -> [] 
```

感谢任何可以给我一些建议的人XD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:26:01.713

的第一个参数`map_Ordered_Lists_2D`应该是一个函数，但是你传递的是它`Tail`，它的类型是`Cell`。

以下将进行类型检查，并应作为起点帮助您：

```
transition_world world (cell, (x, y)) = case (cell, (x, y)) of
    (Head, (x, y))-> map_Ordered_Lists_2D (const Tail) world
    (Tail, (x, y)) -> map_Ordered_Lists_2D (const Conductor) world
    (Empty, (x, y)) -> map_Ordered_Lists_2D (const Empty) world
    (Conductor, (x, y))  -> map_Ordered_Lists_2D (const Head) world 
```

（该函数`const`接受一个值并将其转换为一个始终返回相同值的函数，而不管其参数如何。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:53:08.030

首先尝试使函数更小，例如：

```
xandy :: Element_w_Coord Cell -> Coord
xandy (_, coord) = coord

transition_world :: Ordered_Lists_2D Cell -> Element_w_Coord Cell -> Ordered_Lists_2D Cell
transition_world world (cell, _) = map_Ordered_Lists_2D (transition_cell cell) world 
     where
        transition_cell :: Cell -> Cell
        transition_cell cell
               | Head = Tail 
               | Tail = Conductor
               | Empty = Empty
               | Conductor = Head 
```

和

```
map_Ordered_Lists_2D :: (Element_w_Coord e -> b) -> Ordered_Lists_2D e -> Ordered_Lists_2D b
map_Ordered_Lists_2D f world =  map (map_line f) world
  where
    map_line :: (Element_w_Coord e -> b) -> Sparse_Line e -> Sparse_Line b
    map_line f line = Sparse_Line {y_pos = y_pos line, entries = map_elements f (y_pos line) (entries line)}
    map_elements :: (Element_w_Coord e -> b) -> Y_Coord -> Placed_Elements e -> Placed_Elements b
    map_elements f y elements = let 
            place_e c = Placed_Element {x_pos = x_pos c, entry = f (entry c, (x_pos c, y))}
          in 
            map place_e elements 
```

# c - 在 C 中通过 fork() 创建子进程

> ID：15835045
> 
> 赞同：2
> 
> 时间：2013-04-05T13:18:54.780
> 
> 标签：c, process, parent-child, fork

我对 C 完全陌生，并且正在学习流程。我对下面的代码实际上在做什么有点困惑，它取自 Wikipedia，但我在几本书中看到了它，并且不确定为什么，例如，我们这样做了`pid_t pid;`then `pid = fork();`。我的阅读似乎表明子进程返回 a `pid`of ，但是，我认为非常原始的父进程在看到根为 的树后`0`会保持`pid`of 。`0``pid 0`

例如，`pid = fork();`对父母做了什么？因为它不为孩子做同样的事情吗？并且不会`pid = fork();`将其放入循环中，因为它会为每个孩子执行此操作？

基本上，有人可以向我解释每一步，就好像我是五岁一样？也许更年轻？谢谢！

```
#include <stdio.h>   /* printf, stderr, fprintf */
#include <sys/types.h> /* pid_t */
#include <unistd.h>  /* _exit, fork */
#include <stdlib.h>  /* exit */
#include <errno.h>   /* errno */

int main(void)
{
   pid_t  pid;

   /* Output from both the child and the parent process
    * will be written to the standard output,
    * as they both run at the same time.
    */
   pid = fork();

   if (pid == -1)
   {
      /* Error:
       * When fork() returns -1, an error happened
       * (for example, number of processes reached the limit).
       */
      fprintf(stderr, "can't fork, error %d\n", errno);
      exit(EXIT_FAILURE);
   }
   else if (pid == 0)
   {
      /* Child process:
       * When fork() returns 0, we are in
       * the child process.
       */
      int  j;
      for (j = 0; j < 10; j++)
      {
         printf("child: %d\n", j);
         sleep(1);
      }
      _exit(0);  /* Note that we do not use exit() */
   }
   else
   {
      /* When fork() returns a positive number, we are in the parent process
       * (the fork return value is the PID of the newly created child process)
       * Again we count up to ten.
       */
      int  i;
      for (i = 0; i < 10; i++)
      {
         printf("parent: %d\n", i);
         sleep(1);
      }
      exit(0);
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:58:45.100

执行 fork() 函数后，您有两个进程，它们都在 fork 调用后继续执行。两个进程之间的唯一区别是 fork() 的返回值。在原始进程中，即“父进程”，返回值是子进程的进程 id (pid)。在新克隆的进程“子”中，返回值为 0。

如果您不测试 fork() 的返回值，则两个进程的操作将完全相同。

注意：要了解 fork() 函数为何有用，您需要阅读 exec() 函数的作用。此函数从磁盘加载一个新进程，并将调用者进程替换为新进程。fork() 和 exec() 的组合实际上是启动不同进程的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:02:47.773

成功完成后，`fork()`（[来源](http://linux.die.net/man/3/fork)）：

*   应返回 0 给子进程
*   并将子进程的进程ID返回给父进程。

你给出的例子解释得很好。但是，我想明确指出，两个进程（父进程和子进程）都应继续从该`fork()`函数执行。

如果您想知道孩子的 PID（来自孩子的代码），请使用`getpid` [API](http://linux.die.net/man/3/getpid)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:21:55.713

`fork`是一个返回两次的函数 - 一次返回父级，一次返回子级。

对于孩子，它返回`0`，对于父母孩子的pid，任何正数；对于这两个进程，在分叉后继续执行。

子进程将运行`else if (pid == 0)`块，而父进程将运行`else`块。

# etl - Talend 内部变量

> ID：15835046
> 
> 赞同：4
> 
> 时间：2013-04-05T13:18:59.737
> 
> 标签：etl, data-migration, talend

我正在 Talend 做一个数据迁移项目，其中一项任务是我需要处理一个包含许多列的大表并将（旧）数据映射到新模型的不同值。
我有一个包含三列的唯一映射表。

例子：

```
 Column name | Value old | Value new
      "col 1"         1           3
      "col 1"         3           2
      "col 2"         10          7
        etc 
```

这样我就可以使用“列名”来引用与我需要映射的列相关的值。

使用“列名”在映射表中使用旧值作为查找：当旧值匹配时，它返回新值。

我可以为每一列手动执行此操作，但有数百个，这意味着每列至少重复一个哈希。

我对如何更简单地执行此操作感到困惑，并且对于原始表中的每个可能列仅执行一次。

现在我正在做一个巨大的 tMap 并使用大量查找：每列一个。

任何想法表示赞赏。

-

我有一些额外的想法：
1）有没有办法知道连接两个组件的链接名称？然后我可以更轻松地重用相同的连接并在 tMap 上进行过滤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T17:02:30.127

我可以使用 tMemorizeRows 解决它，使用 tJavaFlex 将整个映射表保存到内存中，然后使用例程读取它们。

我所做的是，记住整张表，我只有一张表，三列，第一列表示我必须做的映射类型，第二列是原始代码，第三列是替换代码。

记住数据后，我使用 tJavaFlex 创建了三个列表，每列一个，然后将这些列表移动到全局变量映射中。

然后我创建了一个接收所有三个列表和两个代码的例程，第一个是映射名称（第一列过滤器），第二个是原始代码（第二列过滤器）。使用两者我可以查明替换代码的位置，并将其返回。

最后，在使用 tMap 读取主要数据流时，我为第一列的每个不同值创建了一个变量（即，为每种类型的映射创建一个变量），然后调用我使用原始代码开发的例程 +映射名称。

我在 tMemorizeRows 中使用的代码是：

开始代码

```
java.util.Set<String> iLista;
java.util.List<String> lLOV=new java.util.ArrayList<String>();
java.util.List<String> lS6=new java.util.ArrayList<String>();
java.util.List<String> lS8=new java.util.ArrayList<String>(); 
```

主要代码

```
lLOV.add(LOV_tMemorizeRows_1[icount]);
lS6.add(S6_NAME_tMemorizeRows_1[icount]);
lS8.add(S8_NAME_tMemorizeRows_1[icount]); 
```

结束代码

```
globalMap.put("lLOV",lLOV);
globalMap.put("lS6",lS6);
globalMap.put("lS8",lS8); 
```

常规代码

```
/*
 * Toma los valores generados de la LOV y matchea con S8, requiere la ejecucion del job
 * Genericos\GeneradorLOV
 * 
 * {talendTypes} String | String
 * 
 * {Category} MigracionDatos
 * 
 * {param} string(entrada.LOV) Identifica el tipo de LOV
 * 
 * {param} string(entrada.S6_NAME) Indica el valor del campo en Siebel 6 
 * 
 * {param} ((java.util.List<String>) globalMap.get("lLOV"))
 * 
 * {param} ((java.util.List<String>) globalMap.get("lS6"))
 * 
 * {param} ((java.util.List<String>) globalMap.get("lS8"))

 * 
 */
   public static String calculaLOV(String CampoLOV, String CampoS6, java.util.List<String> listaLOV, java.util.List<String> listaS6,java.util.List<String> listaS8   ) {
       /*
        * java.util.List<String> listaLOV = ( java.util.List<String>) globalMap.get("lLOV");
        * java.util.List<String> listaS6 = ( java.util.List<String>) globalMap.get("lS6");
        * java.util.List<String> listaS8 = ( java.util.List<String>) globalMap.get("lS8");
        */

       String C1 = CampoLOV;
       String C2 = CampoS6;

       int posicionC1 = listaLOV.indexOf(C1);

       // encontró el LOV
       if(posicionC1 >= 0) {

        java.util.List<String> listaS6_Iterada = new java.util.ArrayList<String>();

        // Genera la lista intermedia con los valores
        for (int contador = posicionC1; contador < listaLOV.size() ; contador++) {
            listaS6_Iterada.add(listaS6.get(contador));
            if(!listaLOV.get(contador).toString().equals(C1)) {break;}
        }

        int posicionC2 = listaS6_Iterada.indexOf(C2);
        if(posicionC2 >= 0) {

            int posicionFinal = posicionC1 + posicionC2;

            return listaS8.get(posicionFinal);
        } else {
            return "";
        }
       } else {
        return "";
       }
   } 
```

# c - IF() 函数在比较浮点数时如何工作？

> ID：15835048
> 
> 赞同：1
> 
> 时间：2013-04-05T13:19:16.217
> 
> 标签：c, floating-point, floating-point-conversion

If() 函数实际上是如何工作的。当我运行这三个程序时，我完全糊涂了。谁能解释一下这些输出是怎么来的？

**方案一：**

```
int main(void)
{
  float a=4.2;
  clrscr();
  if(a==4.2)
    printf("Equal");
  else if(a<4.2)
    printf("Less");
  else if(a>4.2)
    printf("Greater");
  getch();
} 
```

**输出：**少

**方案二：**

```
int main(void)
{
  float a=3.2;
  clrscr();
  if(a==3.2)
    printf("Equal");
  else if(a<3.2)
    printf("Less");
  else if(a>3.2)
    printf("Greater");
  getch();
} 
```

**输出：**更大

**方案 3：**

```
int main(void)
{
  float a=3.5;
  clrscr();
  if(a==3.5)
    printf("Equal");
  else if(a<3.5)
    printf("Less");
  else if(a>3.5)
    printf("Greater");
  getch();
} 
```

**输出：**相等

# c++ - C++“标准”中缺乏标准化的命名约定

> ID：15835051
> 
> 赞同：0
> 
> 时间：2013-04-05T13:19:38.377
> 
> 标签：c++, stl, naming-conventions, standards, std

只是我，还是“标准”C++ 库在命名约定方面完全不统一？

有 underscore_identifiers，然后有许多 undecoratedidentifiers，然后有一些大写的 like `std::ios_base::Init`，然后是全小写的 STL 类，以及其他奇怪的东西。

这种乱七八糟的命名规范怎么可能被归类为标准，这是一个逻辑悖论……

为什么不强制执行命名约定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:21:30.313

> 这种混乱的命名约定怎么能被归类为标准[？]

不幸的是，标准性与整洁性是正交的。

> 为什么不强制执行命名约定？

好吧，你显然从来没有参加过委员会！

# android - 如何知道从 Android BroadcastReceiver 发送/传递了哪些短信？

> ID：15835052
> 
> 赞同：3
> 
> 时间：2013-04-05T13:19:41.057
> 
> 标签：android, sms, broadcastreceiver, smsmanager

我制作了一个简单的应用程序来在 android 上发送多条短信。我找不到已发送/已发送的短信，因为发送通知没有说明它是针对哪个短信发送的。

**这是我的代码：**

```
 this.destination = data[0];
    this.body = data[1];

    PendingIntent piSend = PendingIntent.getBroadcast(aCtx, 0, new Intent(Cons.SMS_SENT),0);
    PendingIntent piDelivered = PendingIntent.getBroadcast(aCtx, 0, new Intent(Cons.SMS_DELIVERED), 0);

    SmsManager smsManager = SmsManager.getDefault();
    smsManager.sendTextMessage(destination, null, body, piSend, piDelivered); 
```

然后我使用广播接收器来获取交付状态

```
public class DeliverSMSBroadcastReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {

    switch (getResultCode())
    {
        case Activity.RESULT_OK:
            Toast.makeText(context, "SMS delivered",
                    Toast.LENGTH_SHORT).show();
            Log.d(Cons.TAGS+" RK","RESULT_OK=> DELIVER");
            break;
        case Activity.RESULT_CANCELED:
            Toast.makeText(context, "SMS not delivered",
                    Toast.LENGTH_SHORT).show();
            Log.d(Cons.TAGS+" RK","RESULT_CANCELED");
            break;
    }}
} 
```

这是我的活动：

```
public class SenderPage extends Activity {
private EditText txtRecepients = null;
private EditText inputSMSText = null;
private Button btnSendSMS = null;

private final BroadcastReceiver outgoingSMSBR = new OutgoingSMSBroadcastReceiver();
private final BroadcastReceiver deliverSMSBR = new DeliverSMSBroadcastReceiver();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.senderpage);
    Log.i(Cons.TAGS, "Sender Page Start");

    this.setTitle("Send Message");

    this.txtRecepients = (EditText) findViewById(R.id.txtRecepients);
    this.inputSMSText = (EditText) findViewById(R.id.inputSMSText);
    this.btnSendSMS = (Button) findViewById(R.id.btnSendSMS);

    txtRecepients.setText("087722079905");      //087722079905 //081214571542

    btnSendSMS.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            //Toast.makeText(SenderPage.this, "Clicked send", Toast.LENGTH_SHORT).show();
            String txtRecepients = SenderPage.this.txtRecepients.getText().toString();
            String inputSMSText = SenderPage.this.inputSMSText.getText().toString();

            new Sender(SenderPage.this,Cons.TAGS).execute(txtRecepients, inputSMSText);
        }
    });

    //txtRecepients.getText().toString();
}

@Override
protected void onResume() {
    registerReceiver(outgoingSMSBR, new IntentFilter(Cons.SMS_SENT));
    registerReceiver(deliverSMSBR, new IntentFilter(Cons.SMS_DELIVERED));
    super.onResume();
}

@Override
protected void onPause() {
    unregisterReceiver(outgoingSMSBR);
    unregisterReceiver(deliverSMSBR);
    super.onPause();
} 
```

}

当我发送多条短信时，如何获取发送信息以确定发送的是哪条短信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:20:46.707

最后，我通过使用 sms create datetime 将意图附加内容添加到待处理意图中得到了答案，然后根据附加数据发送的日期时间更新 sms 状态，这是代码段：

```
Intent sentIntent = new Intent(Cons.SMS_SENT);
sentIntent.putExtra("createdTime", createdTime);

Intent deliveryIntent = new Intent(Cons.SMS_SENT);
deliveryIntent.putExtra("createdTime", createdTime); 
```

然后我可以通过创建时间确定发送/发送哪些短信

```
 public void onReceive(Context context, Intent intent) {
        String smsDateTimeAsID = intent.getStringExtra("createdTime");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T09:32:12.810

Cons.SMS_SENT 和 Cons.SMS_DELIVERED 值

```
 String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED"; 
```

# phpmyadmin - 在 phpmyadmin vagrant 中增加上传大小

> ID：15835053
> 
> 赞同：1
> 
> 时间：2013-04-05T13:19:43.197
> 
> 标签：phpmyadmin, vagrant

嗨，我正在使用 r8 灯在 vagrant 上运行我的服务器[https://github.com/r8/vagrant-lamp](https://github.com/r8/vagrant-lamp)

我正在尝试增加我在 phpmyadmin 中上传的大小，目前为（最大：2,048 KiB）。

我已经尝试编辑 php.ini.erb 文件，但没有运气我也尝试重新启动我的服务器，再次没有运气！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T21:23:59.873

不知道这将如何适用于 phpMyAdmin，但我在本地 Wordpress 网站上遇到了同样的问题。为了解决这个问题，在更改 php.ini.erb 文件的值后，我将这些行添加到 .htaccess

`php_value upload_max_filesize 20M
php_value post_max_size 20M
php_value max_execution_time 200
php_value max_input_time 200`

# iphone - 使用 wikiitude sdk 增强现实

> ID：15835054
> 
> 赞同：0
> 
> 时间：2013-04-05T13:19:46.000
> 
> 标签：iphone, ios, objective-c, augmented-reality, wikitude

我正在使用 wikiitude sdk 开发增强现实应用程序。我对这个 sdk 很陌生。我已经按照 sdk 文档指南实施了所有内容。但我无法在 AR-Browser 视图中绘制 POI 点。为了生成 POI 点，我使用了以下代码。

```
- (NSMutableArray *)generatePois:(NSUInteger)numberOfPois
{
    NSLog(@"%s",__PRETTY_FUNCTION__);
    NSMutableArray *poiArray = [NSMutableArray arrayWithCapacity:numberOfPois];

    for (NSUInteger i = 0; i < numberOfPois; ++i) {
        objGlobalDatas=[arrayItems objectAtIndex:i];

        WTPoi *poi = [[WTPoi alloc] init];
        NSString *strId=objGlobalDatas.arId;
        NSInteger poiId=[strId integerValue];
        poi.id = poiId;
        poi.name = objGlobalDatas.name;
        NSLog(@"poi name =%@",objGlobalDatas.name);
        poi.detailedDescription = objGlobalDatas.poi_description;
       // poi.type =  i%3; // set the type from 0->2->0->2...
        poi.type=1;
        NSString *strLat=objGlobalDatas.latitude;
        NSString *strLng=objGlobalDatas.longitude;
        float lan=[strLat doubleValue];
        float lng=[strLng doubleValue];
        poi.latitude = lan ;//+ WT_RANDOM(-0.01, 0.01); // set the latitude around your current location
        poi.longitude = lng;// + WT_RANDOM(-0.01, 0.01);
        poi.altitude = YOUR_CURRENT_ALTITUDE + WT_RANDOM(0, 200); // altitude offset
        poi.poiimg=objGlobalDatas.poi_indicator_image;

        poi.weburl=objGlobalDatas.website;
        poi.distance=objGlobalDatas.distance;
        [poiArray addObject:poi];
        [poi release];

    }
    NSLog(@"check =%@",poiArray);
    return poiArray;
} 
```

我通过解析 JSON 链接获取 POI 点的数据后调用了此函数。在 poiArray 中，我在当前的纬度和经度周围得到了三个对象。但没有显示在 AR-Browser 视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:34:22.637

这是与 Wikiitude SDK api 相关的所有代码吗？如果是这样，你错过了`[architectView callJavaScript:@"*jsonString*"]`电话。此调用将加载在 json 字符串中定义的位置，以在 AR 中加载。仔细查看 SimpleARBrowser 示例。它演示了在 AR 中加载您的位置的所有必要步骤。

# c++ - 数组列表打印错误的数字

> ID：15835062
> 
> 赞同：2
> 
> 时间：2013-04-05T13:20:15.757
> 
> 标签：c++

我是 C++ 新手，我正在尝试编写一个程序来接收一组考试结果并将它们打印在直方图中。我正在分阶段编写代码，此时我正试图让它获得考试成绩，然后将它们打印在一个列表中，以确保它在进入直方图之前工作。

我的问题是，当我将我的数字输入到我的数组中然后打印它们时，我会得到一个奇怪的数字，例如我输入数字 1,2,3,4

预期的控制台输出：1 2 3 4

实际输出：-858993460 1 2 3 4

所以我知道这一定是我的代码有问题，但是我不确定有人可以帮忙吗？

代码：

```
void readExamMarks(int examMarks[], int sizeOfArray){

   cout << "Please enter a set of exam marks to see a histogram for:" << endl;
   for( int x = 0; x < sizeOfArray; x++){
      cin >> x;
      examMarks[x] = x;
   }
}

void printExamMarks(int examMarks[], int sizeOfArray){

    system("cls");
    for(int x = 0; x < sizeOfArray; x++){

        cout << examMarks[x] << endl;
    }
}

int main() 
{ 
    int examMarks[5];

    readExamMarks(examMarks, 5);
    printExamMarks(examMarks,5);

    system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:22:12.783

您正在重用`x`数组索引和数据：

```
for( int x = 0; x < sizeOfArray; x++){
    cin >> x;
    examMarks[x] = x;
} 
```

您需要为数组索引使用单独的变量：

```
int x = 0;
for( int idx = 0; idx < sizeOfArray; idx++){
    cin >> x;
    examMarks[idx] = x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:23:26.303

问题在这里：

```
for( int x = 0; x < sizeOfArray; x++){
   cin >> x;
   examMarks[x] = x;
} 
```

您正在使用`x`as 数组索引，并且始终接受`x`作为输入值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:23:27.877

```
for( int x = 0; x < sizeOfArray; x++){
    cin >> x; 
```

您正在阅读循环迭代器。它应该是

```
int temp
for( int x = 0; x < sizeOfArray; x++){
    cin >> temp;
    examMarks[x] = temp; 
```

# regex - 正则表达式替换后

> ID：15835067
> 
> 赞同：1
> 
> 时间：2013-04-05T13:20:33.663
> 
> 标签：regex, insert, replace

我有一些链接模板，我需要替换这些链接中的子字符串。链接模板：

1.  “/all_news”
2.  “/all_news/”
3.  “/all_news/page1”
4.  “/all_news/page1/”

所有这些模板都意味着同一件事——新闻页面的第一页没有过滤。

所以我需要：

第一个模板 - 插入“/pageX”

第二个模板 - 插入“pageX”

第 3 和第 4 个模板 - 替换页码

只有一个正则表达式有可能吗？

如果是，请帮助我。

如果不是，那么我有第二个问题：也许可以替换“/pageX”上“/all_news”之后的所有内容？

我的意思是下一个逻辑：

1.  字符串开始
2.  好的，我看到子字符串“/all_news”
3.  即使不存在任何内容，我也会替换“/all_news”之后的所有内容（如果字符串以“/all_news”结尾）
4.  我返回“/all_news/pageX”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:23:43.813

这样就可以了。

```
'/all_news/page1'.replace(/(.*\/all_news).*/,'$1' + '/pageX'); 
```

只为所有。

Java 向后看。它否定了对 1 美元的需求。解决方案如下所示：

```
String result = "/all_news/page1";
String pattern = "(?<=\\/all_news).*";
System.out.println(result.replaceAll(pattern,"/PageX")); 
```

干杯。

# java - mysql 的 Ant 构建失败

> ID：15835076
> 
> 赞同：1
> 
> 时间：2013-04-05T13:21:09.567
> 
> 标签：java, mysql, ant, build

当我使用 mysql 运行 Ant 构建时，会发生以下错误

```
 Cannot run program "mysql" (in directory 
 "D:\Projects\OBSWorkspace\schoolforms\db"):    
  CreateProcess error=2, The system cannot find the file specified 
```

当我在本地 cmd 中运行 mysql 时，出现以下消息

```
ERROR 1045 (28000): Access denied for user 'ODBC'@'localhost' (using password: 
NO) 
```

如何运行 ant 以从脚本生成和创建数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:51:29.853

首先你需要尝试通过 cmd 线连接 mysql，例如 int 这种方式`mysql -u root -p root`知道你能做到。其次，您可以使用以下代码从 ant build 执行此操作：

```
<project name="mysql.test" default="mysqltest">

    <target name="mysqltest">
        <exec executable="cmd.exe">
            <arg value="mysql" />
            <arg value="-u root" />
            <arg value="-p root" />
        </exec>
    </target>

</project> 
```

您可能尝试不通过`cmd`，这就是您无法连接的原因。

# php - symfony2 中的监听器

> ID：15835077
> 
> 赞同：-5
> 
> 时间：2013-04-05T13:21:10.150
> 
> 标签：php, symfony

如何在 symfony 中使用事件监听器。
这可能像在java中一样吗？
即当我从选择列表中选择一个值时，我可以获得所选值。可以应用监听器吗？

```
$builder          
            ->add('numberrange', 'entity', array(
              'class'    => 'TelnOperatorBundle:Numberrange',
              'property' => 'De',
              'multiple' => true,

            ));

            $id= $builder->getData()->getNumberrange();
            $builder->add('subnumbers', 'entity', array(
              'class'    => 'TelnOperatorBundle:Subnumber',
              'property' => 'Fromsub',
              'multiple' => true,
              'query_builder' => function(\Teln\OperatorBundle\Entity\SubnumberRepository $er) use ($id)
                                         {

                                         $qb = $er->createQueryBuilder('t')
                                                  ->where('t.numberrange =:id')
                                                  ->setParameter('id', $id); 

                                          return $qb;

                                          },
              )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:39:23.513

首先：你试过什么？

第二：不，这是不可能的。您想要实现的目标只能使用 JavaScript 完成（使用 jQuery 时更容易）。

您可以通过 AJAX 将点击事件的结果发送到 Symfony 控制器并评估值，做一些魔术并返回您想要的任何内容，然后在您的网站上处理返回的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:29:58.807

尽管您的问题含糊不清并且您似乎跳过了谷歌搜索，但您可能希望坚持使用 jQuery / Javascript 侦听器：[阅读此](http://api.jquery.com/on/)。它解释了如何以 jQuery 方式设置监听器。

# javascript - Chrome 扩展程序 - 仅在单击按钮时运行内容脚本

> ID：15835080
> 
> 赞同：11
> 
> 时间：2013-04-05T13:21:15.383
> 
> 标签：javascript, google-chrome-extension

我已经看得很清楚了，但我似乎无法找到并回答这个问题（好吧，无论如何都对我有用）。

我制作了一个 Chrome 扩展程序，它应该只在单击图标时运行我的内容脚本中的代码，但它总是在页面加载后立即运行。有没有办法防止这种情况发生？我可以为 run_at 输入的所有可能的字符串都不能真正满足这一点。

这是两个脚本中的示例代码：

内容脚本：

```
function runIt() {
    console.log('working');
}
runIt(); 
```

背景.js：

```
chrome.browserAction.onClicked.addListener(function(activeTab) {
    chrome.tabs.executeScript(null, {file: "content.js"});
}); 
```

页面加载后，它将记录“工作”，然后单击每个按钮。有没有办法在页面加载后立即停止运行？

提前感谢所有贡献。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T14:16:37.070

背景页面中的`browserAction.onClicked`代码完全符合您的要求。如果您想`content.js`在页面加载时停止作为内容脚本运行，只需**不要将其作为内容脚本包含**在您的清单中。

具体来说，在您的`manifest.json`文件中，您有一些看起来像这样的行：

```
"content_scripts": [
  {
    "matches": ["*://*/*"],
    "js": ["content.js"]
  }
], 
```

只需删除这些行，脚本将在页面加载时停止运行，而您的点击侦听器代码将继续工作。

# ios - 限制某些视图的自动旋转

> ID：15835084
> 
> 赞同：2
> 
> 时间：2013-04-05T13:21:25.923
> 
> 标签：ios, objective-c, view, autorotate

我的应用程序包含两个表视图控制器。在第一个中，我希望视图能够左右旋转（除了纵向模式），但是在第二个表视图控制器中（我在从第一个表中点击一个单元格后导航到）我想要它只能在纵向模式下查看。我试过这段代码，但它没有用，它一直在旋转。

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL) shouldAutorotate {
    return NO;
} 
```

注意：我确实从项目目标的“摘要”选项卡中启用了左/右/纵向。任何修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:44:58.493

为 UINavigationController 创建一个类别，其中包括以下方法：

（适用于 iOS 6 和 iOS 5）

```
- (BOOL)shouldAutorotate
    {
        return self.topViewController.shouldAutorotate;
    }

    - (NSUInteger)supportedInterfaceOrientations
    {
        return self.topViewController.supportedInterfaceOrientations;
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
        return [self.topViewController shouldAutorotateToInterfaceOrientation:toInterfaceOrientation];
    } 
```

然后在你的控制器中实现这些方法

第一的：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    if (RUNNING_IPAD) {
        return UIInterfaceOrientationMaskAll;
    }
    else {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    };
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    if (RUNNING_IPAD) {
        return YES;
    }
    else {
        return toInterfaceOrientation != UIInterfaceOrientationMaskPortraitUpsideDown;
    }
} 
```

第二：

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
       return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
        return NO;
} 
```

项目的旋转设置应如下所示：

![设置](https://i.stack.imgur.com/QnYNN.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:15:49.413

实际上我找到了解决我的问题的方法：

```
-(BOOL)shouldAutorotate{
    return YES;
}

-(NSInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

即使您在项目 Traget 的“摘要”选项卡中切换了左/右方向，这也会将视图限制为纵向。

# java - JSTL 从对象数组中获取值

> ID：15835085
> 
> 赞同：0
> 
> 时间：2013-04-05T13:21:27.930
> 
> 标签：java, jsp, struts, jstl

我的动作类有一个像这样的对象数组，

```
Object[] varCount = (Object[]) countList.get(0); 
```

我的调试显示了 varCount 的值。我将此对象数组放入模型中，如下所示：

```
model.put("varCount ", varCount ); 
```

在 JSP 中我迭代如下：

```
<c:forEach var="varCount " items="${model.varCount }" varStatus="loop">
     <tr>
     <td align="center">&nbsp;<c:out value="${varCount[0]}"/></td>
</tr>
     </c:forEach> 
```

我得到以下错误：

```
Wrapped exception:
javax.servlet.jsp.JspException: An error occurred while evaluating custom action attribute "value" with value "${varCount [0]}": Unable to find a value for "0" in object of class "java.math.BigDecimal" using operator "[]" (null)
    at org.apache.taglibs.standard.tag.common.core.ImportSupport.acquireString(ImportSupport.java:306)
    at org.apache.taglibs.standard.tag.common.core.ImportSupport.doEndTag(ImportSupport.java:16 
```

我如何获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:28:26.163

像这样使用来获取所有数组对象

```
<c:forEach var="item" items="${model.varCount }" varStatus="loop">
 <tr>
 <td align="center">&nbsp;<c:out value="${item}"/></td>
  </tr>
 </c:forEach> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:32:32.247

`model.varCount`是一个数组或对象，包含 BigDecimal 实例。

forEach 循环遍历该数组的所有元素。在每次迭代中，当前元素都存储在`varCount`page 属性中。当前元素是 的一个实例`BigDecimal`。`varCount[0]`因此没有意义。

# line - glDrawArrays 扭曲输出到 CCRenderTexture

> ID：15835089
> 
> 赞同：0
> 
> 时间：2013-04-05T13:21:37.817
> 
> 标签：line, textures, draw

如果 CCRenderTexture 不是完整的窗口大小，则 glDrawArrays 输出会更小并且角度奇怪。在我的测试代码中，对角线应该以 45 度角从一个角延伸到另一个角。如何正确绘制这条平滑线？我是 cocos2d 的新手，非常感谢任何帮助。

```
//compute vertex points for smooth line triangle strip
CGPoint start = CGPointMake(0., 0.);
CGPoint end = CGPointMake(200., 200.);
float lineWidth = 10.0;
float deltaX = end.x - start.x;
float deltaY = end.y - start.y;
float length = sqrtf(deltaX*deltaX+deltaY*deltaY);
if (length < 0.25) return;  //line too small to show on display
float offsetX = -lineWidth*deltaY/length;
float offsetY = lineWidth*deltaX/length;

GLfloat lineVertices[12]; //6 vertices x,y values
lineVertices[0] = start.x + offsetX;
lineVertices[1] = start.y + offsetY;
lineVertices[2] = end.x + offsetX;
lineVertices[3] = end.y + offsetY;
lineVertices[4] = start.x;
lineVertices[5] = start.y;
lineVertices[6] = end.x;
lineVertices[7] = end.y;
lineVertices[8] = start.x - offsetX;
lineVertices[9] = start.y - offsetY;
lineVertices[10] = end.x - offsetX;
lineVertices[11] = end.y - offsetY;

ccColor4F colorVertices[6];
ccColor4F color1 = {1., 0., 0., 0.};
ccColor4F color2 = {1., 0., 0., 1.};
colorVertices[0] = color1;
colorVertices[1] = color1;
colorVertices[2] = color2;
colorVertices[3] = color2;
colorVertices[4] = color1;
colorVertices[5] = color1;

CCRenderTexture *rtx = [CCRenderTexture renderTextureWithWidth:200 height:200];
[rtx beginWithClear:1\. g:1\. b:1\. a:1.];

[shaderProgram_ use];
ccGLEnableVertexAttribs(kCCVertexAttribFlag_Position | kCCVertexAttribFlag_Color);
glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, lineVertices);
glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colorVertices);
glViewport(0,0, screenWidth, screenHeight);  //dimensions of main screen
glDrawArrays(GL_TRIANGLE_STRIP, 0, 6);

[rtx end];
[rtx saveToFile:@"lineDrawTest" format:kCCImageFormatPNG]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:18:56.270

我添加了一个 glViewport 调用来将视图设置为原始的全屏尺寸。glDrawArrays 现在以正确的大小和角度绘制平滑线。

# iphone - 自定义单元格无法在 ios 6 的表格视图中显示

> ID：15835090
> 
> 赞同：1
> 
> 时间：2013-04-05T13:21:37.993
> 
> 标签：iphone, ios, ipad, uitableview

```
#import "MasterViewController.h"
#import "DetailViewController.h"

@interface MasterViewController ()
@end

@implementation MasterViewController

 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
  {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
     if (self) {
          self.title = NSLocalizedString(@"Master", @"Master");
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        self.clearsSelectionOnViewWillAppear = NO;
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    }
  }
  return self;
 }

   - (void)dealloc
   {
      [_detailViewController release];

    [super dealloc];
    }

   - (void)viewDidLoad
    {
       [super viewDidLoad];

     }

    - (void)didReceiveMemoryWarning
     {
         [super didReceiveMemoryWarning];
         // Dispose of any resources that can be recreated.
      }

     #pragma mark - Table View

        - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
         {
               return 1;
         }

        - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
         {
                return 5;
          }
         -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    return 100.0;
         }

       // Customize the appearance of table view cells.
        - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
       {
             static NSString *CellIdentifier = @"CustomCell";
             CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier: CellIdentifier];

            if (cell == nil)
          {
               cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

          }

    cell.cellDate.text=@"date";
     cell.cellDescription.text =@"Description";
     cell.cellImageview.image = [UIImage imageNamed:@"facebook.png"];
      cell.cellTitle.text = @"Title";
      return cell;

    }

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    if (!self.detailViewController) {
        self.detailViewController = [[[DetailViewController alloc] initWithNibName:@"DetailViewController_iPhone" bundle:nil] autorelease];
    }
       [self.navigationController pushViewController:self.detailViewController animated:YES];
}
    else
   {

   }
  }

@end 
```

* * *

## .h 文件

```
 #import <UIKit/UIKit.h>
    #import "CustomCell.h"
    #import "XMLStringFile.h"

  @class DetailViewController;

 @interface MasterViewController : UITableViewController{

 }

 @property (strong, nonatomic) DetailViewController *detailViewController;
 @property(strong,nonatomic)CustomCell *customCell;
  @end 
```

* * *

自定义单元格.h

* * *

```
 #import <UIKit/UIKit.h>

  @interface CustomCell : UITableViewCell{

   IBOutlet UIImageView *cellImageview;
   IBOutlet UILabel *cellTitle; 
   IBOutlet UILabel *cellDescription;
   IBOutlet UILabel *cellDate;

 }
 @property (retain, nonatomic) IBOutlet UIImageView *cellImageview;
 @property (retain, nonatomic) IBOutlet UILabel *cellTitle;
 @property (retain, nonatomic) IBOutlet UILabel *cellDescription;
 @property (retain, nonatomic) IBOutlet UILabel *cellDate;

 @end 
```

* * *

CustomCell.m

* * *

```
 #import "CustomCell.h"

      @implementation CustomCell

    @synthesize cellDate;
   @synthesize cellDescription;   
  @synthesize cellImageview;
 @synthesize cellTitle;

 - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
}
return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated 
{
[super setSelected:selected animated:animated];

// Configure the view for the selected state
}

- (void)dealloc {
    [super dealloc];
 }
@end 
```

* * *

> 这是我的两个类问题是在customcell 的tableview 数据中无法在白屏上显示。在这里，我使用 masterdetails 视图模板在 ios 中工作。这里我还在编译源中添加了 m 文件 Customcell.xib 大小为 300X100 这里我的输出我的 xib 文件如下 ![这是我的 CustomCell.xib](https://i.stack.imgur.com/rxSII.png)

![这是我的输出屏幕](https://i.stack.imgur.com/ZSrJS.png)

请帮我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:26:56.413

```
 if(cell == nil)
 {
     NSArray *outlets = [NSArray arrayWithArray:[[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil]];
     for(id obj in outlets)
     {
         if([obj isKindOfClass:[UITableViewCell class]])
         {
             cell = (CustomCell *)obj;
         }
     }
 } 
```

如果您`CustomCell`是通过`XIB`然后在您的单元格所在的位置编写此代码`nil`。

**编辑： -**
这可能是原因 - 我认为你没有改变你`CustomCell`的班级名称。跟着这些步骤 -

1.  取一个`XIB`名字`CustomCell.xib`然后删除它的视图。
2.  取一个`UITableViewCell`并根据你设置它的高度和结构。
3.  选择`File's Owner`并将其类名更改为`CustomCell`，与...相同的操作`UITableViewCell`选择它并将其类名更改为`CustomCell`。
4.  现在连接所有`subView`的**IBOutLets**。

**注意：-** *通过右键单击**not from**选择`IBOutLets``UITableViewCell``File's Owner`*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:35:48.370

如果电池设计在笔尖中，那么您需要从笔尖加载电池。

这实际上`UIKit`从 iOS 5开始支持

您需要做的是将您的笔尖注册到`UITableView`.

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  [self.tableView registerNib:[UINib nibWithNibName:@"Customcell" bundle:nil]   
       forCellReuseIdentifier:@"CustomCell"];

  //...
} 
```

现在你`tableView:cellForRowAtIndexPath:`只需要看起来像这样

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"CustomCell";
  CustomCell *cell = (id)[tableView dequeueReusableCellWithIdentifier: CellIdentifier];

  cell.cellDate.text        = @"date";
  cell.cellDescription.text = @"Description";
  cell.cellImageview.image  = [UIImage imageNamed:@"facebook.png"];
  cell.cellTitle.text       = @"Title";

  return cell;
} 
```

**注意**

一定要记得`CustomCell`在xib中设置为reuseIdentifier

**其他一些观察**

*   真的，您应该将 ARC 用于新项目。
*   `@synthesize`是隐含的，因此在大多数情况下不需要
*   `#import "CustomCell.h"`in可能是个坏主意`MasterViewController.h`。您应该将其移至`.m`并在其中使用前向声明`.h`-`@class CustomCell;`
*   您也不需要为属性声明支持 ivars，因为这些也将由编译器生成，例如您不需要声明以下内容

    ```
    @interface CustomCell : UITableViewCell {
      IBOutlet UIImageView *cellImageview;
      IBOutlet UILabel *cellTitle; 
      IBOutlet UILabel *cellDescription;
      IBOutlet UILabel *cellDate;
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T13:36:16.847

在 viewDidLoad 中执行以下操作

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   UINib *nib = [UINib nibWithNibName:@"Customcell" bundle:nil];
   [[self tableView] registerNib:nib forCellReuseIdentifier:@"CustomCell"];
} 
```

# java - 如何使用 java 和 poi 或任何其他库读取 excel 文件并将这些数据插入数据库？

> ID：15835091
> 
> 赞同：-1
> 
> 时间：2013-04-05T13:21:39.293
> 
> 标签：java, database, excel, servlets

我正在使用 servlet 并尝试读取用户上传的 excel 文件并插入数据库。我的 excel 采用这种格式：ID IP1 IP2 USER TKTNO（这些也是 excel 和数据库表中的标题）

在这些标题下，我在 excel 文件中有数据，我必须读取并插入数据库。请迫切需要帮助....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:31:38.070

我为此目的使用 Docx4J ... 与 Docx 和 xlsx 很好 [http://www.docx4java.org/trac/docx4j](http://www.docx4java.org/trac/docx4j)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:33:19.003

这就是使用 apache POI 库读取 excel 文件的方式，我想这对于初学者来说已经足够了，现在您可以获取存储在一些集合对象中的单元格值并根据要求将对象存储到数据库中

```
package com.Excel;

import java.io.*;
import java.util.Iterator;

import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class ReadExcelFile {
    public static void main(String[] args) 
    {
        try {

            FileInputStream file = new FileInputStream(new File("C:/Users/hussain.a/Desktop/mar_25/Tradestation_Q4 Dashboard_Week 5_1029-1104.xlsx"));
            XSSFWorkbook workbook = new XSSFWorkbook(file);
            XSSFSheet sheet = workbook.getSheetAt(0);
            Iterator<Row> rowIterator = sheet.iterator();
            rowIterator.next();
            while(rowIterator.hasNext())
            {
                Row row = rowIterator.next();
                //For each row, iterate through each columns
                Iterator<Cell> cellIterator = row.cellIterator();
                while(cellIterator.hasNext())
                {
                    Cell cell = cellIterator.next();
                    switch(cell.getCellType()) 
                    {
                        case Cell.CELL_TYPE_BOOLEAN:
                            System.out.println("boolean===>>>"+cell.getBooleanCellValue() + "\t");
                            break;
                        case Cell.CELL_TYPE_NUMERIC:
                            System.out.println("numeric===>>>"+cell.getNumericCellValue() + "\t");
                            break;
                        case Cell.CELL_TYPE_STRING:
                            System.out.println("String===>>>"+cell.getStringCellValue() + "\t");
                            break;
                    }
                }
                System.out.println("");
            }
            file.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

# ajax - 来自内联编辑的 POST 值

> ID：15835094
> 
> 赞同：0
> 
> 时间：2013-04-05T13:21:44.227
> 
> 标签：ajax

我使用了 [从跨度更改表格单元格到单击输入的](https://stackoverflow.com/questions/11882693/change-table-cell-from-span-to-input-on-click)代码- 用于内联编辑的替换现在我想通过 ajax 发布值，但我不知道如何。我只想发布用户编辑的评论并在数据库上更新它们这是我到目前为止的方式：

```
$.ajax({
        type: "POST",
        url: "comments.php",//to update the comments
        data: "data"

                }); 
```

不知道下一步该放什么。当用户点击输入区域时是否可以发布值？数据必须是`serialize`吗？
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:25:45.550

```
$.ajax({
        type: "POST",
        url: "comments.php",//to update the comments
        data: {"comments":$("yourformId").serialize()},
        success:function(res)
         {
           //Do what ever you want 
         }

           }); 
```

而在你的`comments.php`只是`print_r($_POST)`会通过ajax给你发布的数组

如果您使用`form.serialize`，您将从您提交的表单中获取所有数据

# c - 指针和数组之间的效率（更少的汇编指令不会花费更少的时间）

> ID：15835095
> 
> 赞同：6
> 
> 时间：2013-04-05T13:21:45.920
> 
> 标签：c, visual-studio-2010, assembly

有人说：“任何可以通过数组下标实现的操作，也可以用指针来完成，指针版本一般会更快”。

我怀疑上面的结果，所以我做了以下测试：</p>

在下面的文章中，我们不关心编译器优化。关于编译器优化如何影响指针和数组之间的效率，请注意：[效率：数组与指针](https://stackoverflow.com/questions/2305770/efficiency-arrays-vs-pointers)

（Visual Studio 2010，调试模式，无优化）

```
#include <windows.h>
#include <stdio.h>

int main()
{
    int a[] = {10,20,30};
    int* ap = a;

    long counter;

    int start_time, end_time;
    int index;

    start_time = GetTickCount();
    for (counter = 1000000000L; counter>0; counter--)
    {
        *(ap+1) = 100;
    }
    end_time = GetTickCount();
    printf("10 billion times of *ap = %d\n", end_time-start_time);

    start_time = GetTickCount();
    for (counter = 1000000000L; counter>0; counter--)
    {
        a[1] = 101;
    }
    end_time = GetTickCount();
    printf("10 billion times of a[0] = %d\n", end_time-start_time);

    return 0;
} 
```

结果是：</p>

```
10 billion times of *ap = 3276
10 billion times of a[0] = 3541 
```

指针似乎有点快。但是对比了拆机后，我陷入了更深的困惑。</p>

（Visual Studio 2010，调试模式，无优化）

```
; 17   :         *(ap+1) = 100;
mov eax, DWORD PTR _ap$[ebp]
mov DWORD PTR [eax+4], 100          ; 00000064H

; 25   :         a[1] = 101;
mov DWORD PTR _a$[ebp+4], 101       ; 00000065H 
```

从汇编输出来看，通过指针访问内存需要 2 条指令，而数组只需要 1 条指令。

**为什么数组执行的指令更少，但它所花费的时间并不比指针少？**

它与cpu缓存相关联吗？如何修改我的测试代码来证明它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:13:02.470

首先也是最重要的，C 语言没有速度。这是 C 的实现引入的一个属性。例如，C 没有速度，但 GCC 编译器生成的代码的速度可能与 Clang 编译器生成的代码不同，而且它们都可能生成的代码超出 -执行由 Cint 或 Ch 解释器产生的行为。所有这些都是 C 实现。其中一些比其他的慢，但*速度无论如何不能归因于 C*！

**C标准的6.3.2.1**说：

> 除非它是 sizeof 运算符、_Alignof 运算符或一元 & 运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为 ''array of type'' 的表达式将转换为具有type ''pointer to type'' 指向数组对象的初始元素并且不是左值。

这应该表明您的代码`*(ap+1)`和`a[1]`代码中都是*指针操作*。此翻译将在 Visual Studio 的编译阶段发生。因此，这不应该对运行时产生任何影响。

**关于“数组下标”的**6.5.2.1说：****

 **> 其中一个表达式应具有类型“指向完整对象类型的指针”，另一个表达式应具有整数类型，并且结果具有类型“类型”。这似乎表明数组下标运算符实际上是一个指针运算符......

正如我们之前假设的，这`ap[1]`确实是一个*指针操作*的确认。然而，在运行时，数组已经被转换为指针。性能应该相同。

***……那么，为什么它们不一样？***

您使用的操作系统有什么特点？它不是一个多任务、多用户的操作系统吗？假设操作系统要在不中断的情况下完成第一个循环，然后中断第二个循环并将控制权切换到不同的进程。这种中断不会使您的实验无效吗？您如何衡量任务切换引起的中断频率和时间？请注意，这对于不同的操作系统会有所不同，并且操作系统是*实现*的一部分。

你使用的CPU有什么特点？它是否有自己的快速内部机器代码缓存？假设你的整个第一个循环，它包含的计时机制很好地适合代码缓存，但第二个循环被截断了。这不会导致缓存未命中，并且在您的 CPU 从 RAM 中获取剩余代码时等待很长时间吗？您如何测量由缓存未命中引起的中断时间？请注意，这对于不同的 CPU 会有所不同，并且 CPU 是*实现*的一部分。

这些问题应该引发一些问题，例如“这个微优化基准是否解决了有意义或重要的问题？”。优化的成功取决于问题的大小和复杂性。找到一个重要问题，解决它，分析解决方案，优化它并再次分析它。这样，您可以提供有关*优化版本的速度有多快的*有意义的信息。你的老板会对你更满意，只要你不透露优化可能只与你的*实施*相关，正如我之前提到的。我敢肯定，您会发现最不担心的是*数组取消引用与指针取消引用*。**

# angularjs - 有没有办法让 AngularJS 与 HTML-first 一起工作？

> ID：15835098
> 
> 赞同：8
> 
> 时间：2013-04-05T13:21:57.530
> 
> 标签：angularjs, seo

有没有办法让 HTML 视图中包含来自服务器的预填充值，然后让 AngularJS 将这些值读入其中`$scope`？

我正在考虑 HTML 是这样的场景：

```
<div ng-controller="TestController">
    <div ng-bind="title">Test Title</div>
    <div ng-bind="itemCount">33</div>
    <div ng-repeat="item in items">
        <div ng-bind="item.title">Item 1 Title</div>
    </div>
</div>
<button ng-click="update()">Update</button> 
```

JavaScript 是这样的：

```
function TestController($scope) {
    $scope.update = function() {
        console.log($scope.title); // Should log "Test Title"
    };
} 
```

这背后的想法是让**服务器呈现****搜索引擎可以索引**的HTML ，但具有内容的**JavaScript 模型表示，**以便通过 JS 进行操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:48:17.960

虽然`ng-init`是一种解决方案，但它需要您显式设置值。所以这里有一个替代解决方案。

[http://plnkr.co/edit/pq8yR9zVOHFI6IRU3Pvn?p=preview](http://plnkr.co/edit/pq8yR9zVOHFI6IRU3Pvn?p=preview)

**注意**：此解决方案不适用于`ng-repeat`. 控制流指令不能与此一起使用。但是对于从中简单地提取信息`ng-bind`来说效果很好。您需要做的就是将`default`指令（plunk 中的代码）添加到您正在执行绑定的任何位置，它将提取文本内容并将其推送到范围变量。

**编辑（使用 ng-repeat 的解决方案）：**

所以，我在想一种方法让 ng-repeat 也以同样的方式工作。但是让 ng-repeat 像这样工作并不是一件容易的事（请参阅代码以获取证明：P）。我终于找到了解决方案 - 给你：

[http://plnkr.co/edit/GEWhCNVMeNVaq9JA2Xm2?p=preview](http://plnkr.co/edit/GEWhCNVMeNVaq9JA2Xm2?p=preview)

在使用它之前，您需要了解几件事。这还没有经过彻底的测试。它仅适用于重复数组（而不是对象）。可能存在未涵盖的情况。我正在覆盖 ngRepeat 本身，这可能会产生其他后果。当您遍历项目（在您的服务器端代码中）时，不要忘记添加`default="true"`第一个元素和`default`其余元素。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:01:15.810

我认为您真正想要的是通过并行提供静态文件来使您的应用程序可搜索。在此处阅读更多信息[http://www.yearofmoo.com/2012/11/angularjs-and-seo.html](http://www.yearofmoo.com/2012/11/angularjs-and-seo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:39:31.130

将值添加 `ng-init`到您的元素中，以便它以您想要的方式工作。

[http://docs.angularjs.org/api/ng.directive:ngInit](http://docs.angularjs.org/api/ng.directive:ngInit)

# python - 列出命名空间包中的模块

> ID：15835099
> 
> 赞同：9
> 
> 时间：2013-04-05T13:21:58.173
> 
> 标签：python, module, namespaces, package, inspect

我试图让 Python 列出命名空间包中的所有模块。

我有以下文件结构：

```
cwd
|--a
|  `--ns
|     |--__init__.py
|     `--amod.py
|--b
|  `--ns
|     |--__init__.py
|     `--bmod.py
`--c
   `--ns
      |--__init__.py
      `--cmod.py 
```

每个都`__init__.py`通过以下行将其包定义为命名空间包：

```
__import__('pkg_resources').declare_namespace(__name__) 
```

该`amod`模块包含一个类`A`，`bmod`包含另一个类`B`并`cmod`包含`C`该类。

当有一个干净的环境时，会发生以下情况：

```
>>> import inspect, sys, glob
>>> sys.path += glob.glob('*')
>>> import ns
>>> inspect.getmembers(ns, inspect.ismodule)
[] 
```

如您所见，模块未列出。

现在，当我手动导入模块然后再次调用检查时：

```
>>> inspect.getmembers(ns, inspect.ismodule)
[('amod', <module 'ns.amod' from 'a/ns/amod.pyc'>), ('bmod', <module 'ns.bmod' from 'b/ns/bmod.pyc'>), ('cmod', <module 'ns.cmod' from 'c/ns/cmod.pyc'>)] 
```

现在我希望`inspect`调用工作而不需要手动导入模块，那么我该如何实现呢？

# xml - 将 XmlTextWriter 与 iTunes 播客一起使用

> ID：15835104
> 
> 赞同：1
> 
> 时间：2013-04-05T13:22:10.307
> 
> 标签：xml, vb.net, podcast, xmltextwriter

我有以下代码为 iTunes 播客生成 XML 播客文件：

```
Dim writer As New XmlTextWriter("c:\jdir\test.xml", System.Text.Encoding.UTF8)

writer.WriteStartDocument(True)
writer.Formatting = Formatting.Indented
writer.Indentation = 4

writer.WriteStartElement("channel")

writer.WriteStartElement("title")
writer.WriteString("My Podcast")
writer.WriteEndElement()
....etc etc.. 
```

但是当我来到这部分时：

```
<itunes:image href="http://www.mywebsitehere.com/student.jpg" />        
<itunes:category text="Education">      
    <itunes:category text="Education Technology"/>      
</itunes:category>      
<itunes:category text="Higher Education"/> 
```

我不确定如何将**href=**添加到元素本身以及**text=**？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:39:56.980

您可以使用.. 添加**href=**和**text =**`WriteAttributeString`

试试下面的代码..可能会帮助你......

```
 writer.WriteStartElement("itunes:image")
    writer.WriteAttributeString("href", "http://www.mywebsitehere.com/student.jpg")
    writer.WriteEndElement()
    writer.WriteStartElement("itunes:category")
    writer.WriteAttributeString("text", "Education")
    writer.WriteStartElement("itunes:category", Nothing)
    writer.WriteAttributeString("text", "Education Technology")
    writer.WriteEndElement()
    writer.WriteEndElement()
    writer.WriteStartElement("itunes:category")
    writer.WriteAttributeString("text", "Education Technology")
    writer.WriteEndElement() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:51:09.757

Fwiw，使用 VB，您可以使用 LINQ to XML 和对象初始化程序大大简化此操作。请注意，您需要为 iTunes 命名空间添加导入，但之后您可以简单地执行以下操作：

```
Dim myXml = <channel>
  <itunes:title>My Podcast</itunes:title>
  <itunes:image href="http://www.mywebsitehere.com/student.jpg" />        
  <itunes:category text="Education">      
    <itunes:category text="Education Technology"/>      
  </itunes:category>      
  <itunes:category text="Higher Education"/>
</channel>

MyXml.Save("c:\jdir\test.xml") 
```

如果要从变量中插入值，只需像使用 ASP.Net 一样使用 <% SomeValue %> 即可。

# actionbarsherlock - ActionBarSherlock 缺少 libary.jar

> ID：15835107
> 
> 赞同：1
> 
> 时间：2013-04-05T13:22:23.063
> 
> 标签：actionbarsherlock

我试图添加 actionbarsherlock 库 moet 我收到以下错误：

```
The project cannot be built until build path errors are resolved            Unknown Java Problem 
```

当我查看“构建路径”选项卡时，我看到 libary.jar 丢失了。但是没有名为 libary.jar 的文件？

我已经将编译器设置为 Java 1.6，但它仍然无法正常工作。两个项目的目标SDK都是Android 4.0

我希望任何人都可以提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:35:11.767

我尝试切换到 Java 1.7 并让 Android 修复我的项目属性。（我收到一条消息）。之后，它对我有用！

# scala - Scala Play 2.1.0 - Heroku 上没有出现资产？

> ID：15835108
> 
> 赞同：3
> 
> 时间：2013-04-05T13:22:29.427
> 
> 标签：scala, heroku, playframework

我的应用程序在开发中运行良好（图片显示），但在部署到 Heroku 时，它们神秘地消失了。

代码是

```
<img src="@routes.Assets.at("images/myImage.png")"" /> 
```

Heroku 是在搞砸还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:08:36.323

确保你的项目`public`目录在你的 git repo 中。

# excel - 刷新 Power Pivot 窗口

> ID：15835109
> 
> 赞同：1
> 
> 时间：2013-04-05T13:22:33.837
> 
> 标签：excel, pivot, powerpivot, vba

如何在我打开 excel 文件时自动刷新 Power Pivot 窗口，而无需`Power Pivot Window`选择 Power Pivot 选项卡中的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:49:37.970

维诺特，

通过将代码放在工作簿模块中并使用 Open_Event 在工作簿打开时触发它，可以编写触发“全部刷新”的 VBA。

如果您使用的是 2010，那么您将需要使用由[Tom Gleeson](http://blog.gobansaor.com/vba-code-to-automate-a-powerpivot-refresh/)开发的这种高度创新的技术。

如果您使用的是 2013，那么随着数据模型正式向 VBA 公开，事情会变得更加简单。有几个资源，包括[这个](http://www.vandeputte.org/2012/07/powerpivot-nuggets-part-18-automate.html)。

HTH 雅各布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:18:03.093

PowerPivot 选项卡中有一个全部刷新按钮可用于此目的。这避免了为了刷新而必须打开 PowerPivot 窗口。

不过需要注意的是：据我所知，这只会更新从当前 Excel 工作簿链接的表格 - 对于其他类型的连接，您必须转到 PowerPivot 窗口并刷新相应的表格。

以下是我在 Excel 2013 中找到的有关您的问题的解决方案的一些信息： [http ://www.vandeputte.org/2012/07/powerpivot-nuggets-part-18-automate.html](http://www.vandeputte.org/2012/07/powerpivot-nuggets-part-18-automate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T13:08:09.513

从 Excel（不是 Power Pivot Manager）打开：

*   数据
*   连接
*   连接

然后，选择您的数据源并单击*Properties*。打开文件时，您应该会看到一个用于刷新数据的复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T15:23:42.897

您还可以**右键单击**任何 Power Pivot 图表或表格，**然后单击数据透视表选项...**，然后在**数据下，您可以****在打开文件时**选择刷新数据

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T16:25:25.427

Excel 2013 允许通过 VBA 进行完整的数据模型刷新。我在仪表板上添加了一个按钮并分配了以下宏：

子刷新（）

ActiveWorkbook.Model.Refresh

结束子

-梅丽莎

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-30T14:20:13.897

这是 Excel 2010 的特定问题。在 Excel 2013 及更高版本中，Excel 功能区上的“刷新”图标符合您的预期。然而，在 Excel 2010 链接表中，数据模型和数据透视表/图表不会通过刷新图标刷新。

我们有一个比 Tom Gleeson 描述的更好、更简单的解决方案[https://ukanexcel.wordpress.com/2016/11/30/refreshing-power-pivot-in-excel-2010/](https://ukanexcel.wordpress.com/2016/11/30/refreshing-power-pivot-in-excel-2010/)**

# testing - 对布尔数据进行分类时，WEKA 训练集和测试集不兼容

> ID：15835113
> 
> 赞同：0
> 
> 时间：2013-04-05T13:22:38.680
> 
> 标签：testing, classification, weka

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:00:24.340

```
For the last line with attribute ‘imf’, the labels are reversed 
so I assume that this is the cause of the problem: 
but how can I solve it? 
```

Change test arff file so that it has same header with training file. Both training and testing file should have same header information apart from relation name. Make it so that last line of header is

```
@attribute imf {TRUE,FALSE} 
```

I had the same problem see this [question and answer](https://stackoverflow.com/questions/11792905/same-instances-header-arff-for-all-my-database-queries). Basically you decide a header information and put it to another file. Then your every data set use same header information. Either do this using coding or create arff files by hand.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:47:41.053

I had an email exchange with Eibe Frank of Weka yesterday re this point. The conversation can be seen here:

[https://list.scms.waikato.ac.nz/pipermail/wekalist/2013-April/057698.html](https://list.scms.waikato.ac.nz/pipermail/wekalist/2013-April/057698.html)

He made several suggestions including using the same Weka NumericToNominal object for both training and testing datasets, or to preserve the same object by serialisation if training and testing datasets are generated at different times.

In my case, however, the best solution is to use integers 1 and 0 in place of TRUE and FALSE respectively, and regenerate the datasets affected.

Thanks to Atilla Ozgur though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T10:41:03.833

If we substitute the TRUE and FALSE with 0 and 1\. We could not use some algorithms which are based on nominal results.

# c# - C# 调整多维数组的大小

> ID：15835114
> 
> 赞同：2
> 
> 时间：2013-04-05T13:22:41.647
> 
> 标签：c#, multidimensional-array, resize

如何调整多维（`int`、`char`、`string`、`double`等）数组的所有尺寸？

我做了这个工作，但它只适用于`Array`类：

```
private Array ResizeArray(object Arr, int[] boyutlari)
{
    Array myArray = ((Array)Arr);
    Type type = Arr.GetType().GetElementType();
    Array _arr = Array.CreateInstance(type, boyutlari);

    int[] arrMin = new int[boyutlari.GetLength(0)];
    int sayboyut = 0;
    foreach (int i in boyutlari)
    {
        arrMin[sayboyut] = Math.Min(i, myArray.GetLength(sayboyut));
        sayboyut++;
    }

    int tumOlasiliklarAdet = 1;
    foreach (int intMin in arrMin)
    {
        tumOlasiliklarAdet *= intMin;
    }

    long[] arrDegerler = new long[myArray.Rank];
    for (int iy = 0; iy < tumOlasiliklarAdet; iy++)
    {

        for (int ix = 0; ix < myArray.Rank; ix++)
        {
            int toplamSagOlasilik = 1;

            for (int isagsay = ix + 1; isagsay < myArray.Rank; isagsay++)
                toplamSagOlasilik *= arrMin[isagsay];

            arrDegerler[ix] = (iy / toplamSagOlasilik) % arrMin[ix];
        }
        var ss = ((Array)Arr).GetValue(arrDegerler);
        _arr.SetValue(ss, arrDegerler);
    }

    return _arr;
} 
```

用法：

```
public Array arrKlasorlerDosyalar = Array.CreateInstance(typeof(string), 1, 2);

int[] boyutlar = new int[]
    { 10 /*1th dimension length*/, 2 /*2th dimension length*/};

arrKlasorlerDosyalar = ResizeArray((object)arrKlasorlerDosyalar, boyutlar); 
```

# jquery - 如何选择具有特定 css 属性的最后一个孩子？

> ID：15835116
> 
> 赞同：4
> 
> 时间：2013-04-05T13:22:46.100
> 
> 标签：jquery, jquery-selectors

我正在尝试选择`display:block`在隐藏的父元素中具有属性的每个最后一个元素。

[**这是一个可以玩的示例小提琴。**](http://jsfiddle.net/3h9CB/20/)

**html:**

```
<ul style="display:none;">
    <li>1</li>
    <li>2</li>
    <li>3</li><!-- my goal is find last visible child on every hidden ul -->
    <li style="display:none;">4</li>
</ul> 
```

**jQuery：**

```
$('ul').each(function() {
    visibleCountOnEachUl =+ 0;
    $(this).children('li').each(function(index) {
        if ( $(this).css('display') === 'block' ) {
            visibleCountOnEachUl += 1;
            $(this).addClass('theseAreVisible');
            //this part works;
            //i can select elems elems which got display:block

            //but can't select the last elem on each ul
            //if ( index === (visibleCount-1) ) {
                //$(this).addClass('last-visible');
            //}
        }
    });
});

$('ul').find('li:visible:last').addClass('last-visible');
//This won't effect on child elements while their parent is hidden. 
```

我发现了这个类似的[问题](https://stackoverflow.com/questions/8496592/select-every-visible-last-child-in-jquery)，但解决方案适用于可见的父级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:25:53.203

试试这个：

```
$('ul').each(function() {
    $(this).children('li').each(function(index, elem) {
            var l = $(elem).parent().find('li').filter(function() {
                return $(this).css('display') === 'block';
            }).length;
            if (index == l-1)
                $(this).addClass('last-visible');
    });
}); 
```

[**这是工作的jsFiddle。**](http://jsfiddle.net/H6Dbd/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T17:59:50.723

当父级为 display:block 时，这将起作用：

```
$('ul li:visible:last').addClass('select'); 
```

当父元素为 display:none 时，您应该将元素定位为绝对、可见性：隐藏或将它们定位在视口之外。

```
if( $('ul').css('display','none') ){

        $('ul').css({
            'display':'block',
            'position': 'absolute',
            'visibility': 'hidden'});

        $('ul li:visible:last').addClass('select');
    } 
```

# java - 在java中使用tcp传输文件时出错

> ID：15835121
> 
> 赞同：0
> 
> 时间：2013-04-05T13:22:59.083
> 
> 标签：java, file, tcp

我正在开发一个 Web 应用程序，`jsp`在该应用程序中我使用 a`tcp connection`将文件从服务器发送到客户端。但是在这样做的同时，程序进入了一个无限循环。它不返回任何东西。谁能帮帮我吗？

我在这里发布服务器和客户端代码。

服务器代码：

```
byte[] sendData = new byte[1024];
byte[] receiveData = new byte[1024];
sendData = "FILE".getBytes();
DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 5006);
clientSocket.send(sendPacket);
sendData = file.getBytes();
sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 5006);
clientSocket.send(sendPacket);

ServerSocket serverSocket = new ServerSocket(5494);
Socket socket = serverSocket.accept();

File transferFile = new File("C:\\Users\\Krishna\\Documents\\LanMan\\" + file);
byte[] bytearray = new byte[(int) transferFile.length()];
FileInputStream fin = new FileInputStream(transferFile);
BufferedInputStream bin = new BufferedInputStream(fin);
bin.read(bytearray, 0, bytearray.length);
OutputStream os = socket.getOutputStream();
os.write(bytearray, 0, bytearray.length);

DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
clientSocket.receive(receivePacket);
String a = (new String(receiveData, "UTF-8")).trim();
//if(a.equals())
os.flush();
//bin.close();
socket.close();
serverSocket.close(); 
```

客户端代码：

```
if (a.startsWith("FILE")) {
    byte b[] = new byte[1024];

    received = new DatagramPacket(receiveData, receiveData.length);
    serversocket.receive(received);
    a = (new String(receiveData, "UTF-8")).trim();

    int filesize = 2022386;
    int bytesRead;
    int currentTot = 0;
    socket = new Socket(ip, 5494);
    byte[] bytearray = new byte[filesize];
    InputStream is = socket.getInputStream();
    FileOutputStream fos = new FileOutputStream("C:\\LanMan\\" + a);
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    bytesRead = is.read(bytearray, 0, bytearray.length);
    currentTot = bytesRead;

    do {
        bytesRead = is.read(bytearray, currentTot, (bytearray.length - currentTot));
        if (bytesRead >= 0) currentTot += bytesRead;
    } while (bytesRead > -1);

    bos.write(bytearray, 0, currentTot);
    bos.flush();
    bos.close();
    //fos.close();
    //is.close();

    sendData = "OK".getBytes();
    DatagramPacket send = new DatagramPacket(sendData, sendData.length, ip, port);
    serversocket.send(send);
    socket.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:45:03.260

你实现了一个死锁。

服务器写入文件内容，然后等待来自客户端的数据报包，关闭套接字。

客户端读取直到服务器关闭套接字，然后发送一个数据报包。

所以每一方都在等待另一方。

此外，永远不要像在服务器代码中那样忽略 InputStream.read() 方法的结果。您永远不能假设所有文件都将在一次调用中读取。

# php - Android Web 服务不解析来自 localhost 的数据

> ID：15835125
> 
> 赞同：0
> 
> 时间：2013-04-05T13:23:24.640
> 
> 标签：php, android, json, localhost

我正在尝试将 Android App 连接到 java webservice 以获取 pHp 解析值。

PHP脚本是：

```
<?php
$data = array('name' => 'Froyo', 'version' => 'Android 2.2'); 
print (json_encode($data)); 
?> 
```

Java WebService 是：

```
package com.json.php;

import android.app.Activity;
import android.os.Bundle;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import android.widget.TextView;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

public class JSONExampleActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://127.0.0.1/test.php");
        TextView textView = (TextView)findViewById(R.id.textView1);
        try {

            HttpResponse response = httpclient.execute(httppost);
            String jsonResult = inputStreamToString(response.getEntity().getContent()).toString();
            JSONObject object = new JSONObject(jsonResult);

            String name = object.getString("name");
            String verion = object.getString("version");
            textView.setText(name + " - " + verion);

        } 
        catch (JSONException e) {
            e.printStackTrace();
        } 
        catch (ClientProtocolException e) {
            e.printStackTrace();
        } 
        catch (IOException e) {
            e.printStackTrace();
        }

       }
    private StringBuilder inputStreamToString(InputStream is) {
        String rLine = "";
        StringBuilder answer = new StringBuilder();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));

        try {
         while ((rLine = rd.readLine()) != null) {
          answer.append(rLine);
           }
        }

        catch (IOException e) {
            e.printStackTrace();
         }
        return answer;
       }
} 
```

我在HttpPost中都试过了`http://127.0.0.1/test.php and http://localhost/test.php`，它不起作用。我在浏览器上检查了我的 php 文件，结果很好。我哪里错了？另外我正在使用Mac，由于所有权限问题，这是否与问题有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:33:32.483

看看这个页面：http: [//developer.android.com/tools/devices/emulator.html#networkaddresses](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

您会注意到它们指的是：

*   `10.0.2.2`作为主机环回接口的特殊别名（即开发机器上的 127.0.0.1）
*   `127.0.0.1`as 被仿真设备自己的环回接口

希望我回答并解决了您的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:31:03.077

您不应使用 127.0.0.1 或 localhost 因为 Android 模拟器在虚拟机 (QEMU) 中运行，因此此处 127.0.0.1 或 localhost 将是模拟器自己的环回地址。

如果您从 Android 模拟器引用系统上的本地主机，那么您必须使用`http://10.0.2.2/`. 如果 Web 服务不在您的开发机器上，则使用您的服务器 IP。

如果您的服务器是 Windows，则从命令提示符运行命令“ipconfig”以查找 IP 地址。

参考：[模拟器网络](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:33:44.363

感谢@silentw ..我想出了如何让它工作！刚刚将 HttpPost 更改为`http://10.0.2.2/test.php`

# c# - 无法使用客户端服务器方法通过 WAN 连接服务器？

> ID：15835127
> 
> 赞同：0
> 
> 时间：2013-04-05T13:23:26.663
> 
> 标签：c#, client-server

我正在开发简单的客户端服务器应用程序，它就像一个聊天 Messenger。我正在使用客户端服务器方法。我的应用程序在 LAN 局域网上运行良好。但是当它尝试与 LAN 外部进行通信时。然后没有响应客户端。虽然我知道使用宽带连接并位于 WAN 上的服务器 IP 地址（通过外部方式）。我想我无法解析 IP 地址，或者出现类似代理的问题。任何人都可以帮助我吗？问候 ！阿卜杜拉

```
//
/*   Server Program    */

using System;
using System.Text;
using System.Net;
using System.Net.Sockets;

public class serv {
    public static void Main() {
    try {
        IPAddress ipAd = IPAddress.Parse("172.21.5.99");
         // use local m/c IP address, and 
         // use the same in the client

/* Initializes the Listener */
        TcpListener myList=new TcpListener(ipAd,8001);

/* Start Listeneting at the specified port */        
        myList.Start();

        Console.WriteLine("The server is running at port 8001...");    
        Console.WriteLine("The local End point is  :" + 
                          myList.LocalEndpoint );
        Console.WriteLine("Waiting for a connection.....");

        Socket s=myList.AcceptSocket();
        Console.WriteLine("Connection accepted from " + s.RemoteEndPoint);

        byte[] b=new byte[100];
        int k=s.Receive(b);
        Console.WriteLine("Recieved...");
        for (int i=0;i<k;i++)
            Console.Write(Convert.ToChar(b[i]));

        ASCIIEncoding asen=new ASCIIEncoding();
        s.Send(asen.GetBytes("The string was recieved by the server."));
        Console.WriteLine("\nSent Acknowledgement");
/* clean up */            
        s.Close();
        myList.Stop();

    }
    catch (Exception e) {
        Console.WriteLine("Error..... " + e.StackTrace);
    }    
    }

}

---------------------------------------------------------------------------

/*       Client Program      */

using System;
using System.IO;
using System.Net;
using System.Text;
using System.Net.Sockets;

public class clnt {

    public static void Main() {

        try {
            TcpClient tcpclnt = new TcpClient();
            Console.WriteLine("Connecting.....");
            // here is local ip.. 
            // if i replace it with WAN IP it does not communicate.
            tcpclnt.Connect("172.21.5.99",8001);
            // use the ipaddress as in the server program

            Console.WriteLine("Connected");
            Console.Write("Enter the string to be transmitted : ");

            String str=Console.ReadLine();
            Stream stm = tcpclnt.GetStream();

            ASCIIEncoding asen= new ASCIIEncoding();
            byte[] ba=asen.GetBytes(str);
            Console.WriteLine("Transmitting.....");

            stm.Write(ba,0,ba.Length);

            byte[] bb=new byte[100];
            int k=stm.Read(bb,0,100);

            for (int i=0;i<k;i++)
                Console.Write(Convert.ToChar(bb[i]));

            tcpclnt.Close();
        }

        catch (Exception e) {
            Console.WriteLine("Error..... " + e.StackTrace);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:27:23.063

你检查过防火墙/路由器吗？

大多数情况下，未经请求的传入连接会被拒绝并且会失败，因为它们在来源和性质上可能是恶意的。

但是，您可以通过查看 NAT 遍历来解决其中一些问题

请参阅：[tcp 客户端与不同网络中的服务器通信（NAT 问题）](https://stackoverflow.com/questions/14342915/tcp-client-to-communicate-with-server-present-in-different-network-nat-issue)

# mysql - 显示 2 个外键的值

> ID：15835133
> 
> 赞同：1
> 
> 时间：2013-04-05T13:23:38.937
> 
> 标签：mysql, sql, database, foreign-keys, sql-view

我正在创建一个 MySQL 数据库，它具有以下形式的关系：

![数据库](https://i.stack.imgur.com/F4nbY.png)

我想要实现的是创建一个同时显示两对夫妇详细信息的视图，例如列名是：

```
|| P1_First_Name || P1_LastName || P1_Gender || P2_FirstName || P2_LastName || P2_Gender || 
```

但是我不确定如何做到这一点。到目前为止，我有一些类似的东西

```
CREATE VIEW CoupleDetails AS
SELECT People.`First Name`, People.`Last Name`, People.`Gender`
FROM Couples
LEFT JOIN People ON People.NI_Number = Couples.ni_person1; 
```

这对于获取第一人称的详细信息很有效。在过去的几个小时里，我一直在尝试创建一个表格来显示我需要的列，但是我无法像上面描述的那样工作——坦率地说，我不确定我要做什么！有人可以为我提供正确方向的指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:26:33.627

您需要将 table`People`与 table 连接两次，`Couples`因为 table 有两列`Couples`依赖于 table `People`。

我认为 table 上的列`Couples`是必需的（*或不可为空的*），因为当只有一个人时你不能打电话给一对`:)`

```
CREATE VIEW CoupleDetails 
AS
SELECT  b.FirstName P1_FirstName,
        b.LastName P1_LastName,
        b.Gender = P1_Gender,
        c.FirstName P2_FirstName,
        c.LastName P2_LastName,
        c.Gender = P2_Gender
FROM    Couples a
        INNER JOIN People b
            ON a.ni_person1 = b.NI_Number
        INNER JOIN People c
            ON a.ni_person2 = c.NI_Number 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# wolfram-mathematica - 仅在 z 轴上添加 parametricplot3d

> ID：15835138
> 
> 赞同：0
> 
> 时间：2013-04-05T13:23:50.970
> 
> 标签：wolfram-mathematica

我试图仅在 z 轴中添加这个参数图（现在当我添加它时，它会在 x、y 和 z 中扩展），这个求和的效果将是正弦波的幅度相加。这就是我现在所拥有的。 [http://imgur.com/j9hN7VR](http://imgur.com/j9hN7VR)

这是我用来实现它的代码：

```
frequency = 1000;
speed = 13397.2441;
wavelength = speed/frequency;
s = (r - 2);
t = (r - 4);
u = (r - 6);
v = (r - 8); 
ParametricPlot3D[{{r*Cos[q] - 4, r*Sin[q], Sin[(2*Pi)/wavelength*(r)]},
  {s*Cos[q] - 2, s*Sin[q], Sin[(2*Pi)/wavelength*(s + wavelength/4 - 1)]},
  {t*Cos[q], t*Sin[q], Sin[(2*Pi)/wavelength*(t + wavelength/4 + 0.5)]},
  {u*Cos[q] + 2, u*Sin[q], Sin[(2*Pi)/wavelength*(u + wavelength/4 + 1.65)]},
  {v*Cos[q] + 4, v*Sin[q],  Sin[(2*Pi)/wavelength*(v + wavelength/4 + 3.5)]}},
  {r, 0, 25}, {q, 0, Pi}, PlotPoints -> 30, Mesh -> 20, PlotRange -> {{-25, 25}, {0, 35}, {-6, 6}}] 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T18:57:11.343

不幸的是，我找不到答案，所以我最终只是在 MATLAB 中进行模拟，而不是通过在该字段上生成所有值（在矩阵中），然后像我在这里尝试做的那样求和。

# android - Android Multispinner - 如何更新复选框？

> ID：15835139
> 
> 赞同：0
> 
> 时间：2013-04-05T13:23:51.353
> 
> 标签：android, checkbox, android-spinner, onclicklistener

我使用的 multispinner 代码几乎可以在每个询问 multispinner 的主题中找到。

```
@Override
public boolean performClick() {
    if (MainActivity.getSharedInstance().mp != null)
        if (MainActivity.getSharedInstance().mp.isPlaying())
        {
            MainActivity.getSharedInstance().mp.stop();
            //MainActivity.getSharedInstance().mp.release();
        }
    AlertDialog.Builder builder = new AlertDialog.Builder(getContext());
    builder.setMultiChoiceItems(
            items.toArray(new CharSequence[items.size()]), selected, new DialogInterface.OnMultiChoiceClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which, boolean isChecked) {
                    if (which == 0)
                    {
                        if (isChecked == true)
                        {
                            selected[0] = true;
                            selected[1] = false;
                            selected[2] = false;
                            selected[3] = false;
                            selected[4] = false;
                            selected[5] = false;
                            selected[6] = false;
                            selected[7] = false;
                        }
                        else
                            selected[0] = false;
                    }
                    else
                    {
                        if (isChecked == true)
                        {
                            selected[which] = true;
                            selected[0] = false;
                        }
                        else
                            selected[which] = false;
                    }   
                }
            });
    builder.setPositiveButton(android.R.string.ok,
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
    builder.setOnCancelListener(this);
    builder.show();
    return true;
} 
```

如果选中第一个复选框，我希望 multispinner 取消选中所有其他复选框，并在选中其他任何复选框时取消选中第一个复选框。

我上面的代码的结果是，当我在 multispinner 对话框中时，它不起作用，但是如果我选中第一个复选框并关闭然后重新打开 multispinner，那么其他复选框会更新并且我想要的未选中。

如何在不需要关闭然后重新打开 multispinner 对话框的情况下执行此操作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:01:50.413

对于遇到相同问题的每个人，都可以使用它来更新对话框：

`((AlertDialog) dialog).getListView().setItemChecked(which, false);`

# android - 检查网页/Webview是否包含某些单词（android）

> ID：15835151
> 
> 赞同：1
> 
> 时间：2013-04-05T13:24:21.973
> 
> 标签：android, webview, notifications

我正在创建一个应用程序，如果网页（显示已取消的课程）包含您所在的课程，我想向用户发出通知。

如何做到这一点？
我是否必须`webview`在后台使用 a 并每隔 x 分钟重新加载一次并检查它是否包含某些单词，如果包含，请发出通知？如果是这样，我如何检查 a 中的某些单词`webview`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:33:51.970

这在 WebView 中很容易实现，不需要不必要的代码。以下代码将找到字符串（您也可以设置一个[FindListener](http://developer.android.com/reference/android/webkit/WebView.FindListener.html)来通知您是否/何时找到该字符串，我没有使用它但它在那里）：

```
String string = "text you want to find";
webview.findAll(string); //works for API levels 3 - 16
webview.findAllAsync(string); //works for API levels 16 and up 
```

如您所见，如果您想支持低于 16 的 API 级别，则必须同时使用这两种方法。尽管两者都有相同的侦听器，因此您只需要一个侦听器，请查看上面的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:35:30.090

我还没有在 Android 中这样做过。但我在其他环境中做过。您可能能够从缓存中提取最后一页并对其进行解析。否则，使用 Java 来拉回每个页面并进行解析。van Raak 先生对这项服务有一个好主意。你可能已经有一个并且可以添加它。虽然 JSoup 很方便，但它有点胖。你可以很容易地做你自己的轻量级过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:34:22.147

如果数据无法通过任何其他方式（如 RSS 提要或某种其他类型的 URL 请求）获得，您可以使用[jSoup](http://jsoup.org/)之类的内容抓取网页。您可以简单地给 jSoup 网页的 URL，它会返回网页的原始 HTML 文件。您可以遍历 DOM 元素并获得所需的确切文本。

您还必须创建一个即使在您不使用应用程序时也能运行的 Android 服务。每 X 分钟，这将进行网页抓取，并在需要时发出通知。

# html - 位置跨度悬在相对父级上

> ID：15835155
> 
> 赞同：3
> 
> 时间：2013-04-05T13:24:30.837
> 
> 标签：html, css, css-position

我正在尝试定位一个跨度，使其位于其兄弟姐妹之上并“悬停”或定位在其父代之上。父级相对定位。

请查看我的[小提琴](http://jsfiddle.net/bflemi3/aNkSw/)以获得整个图片

它现在的样子...

![在此处输入图像描述](https://i.stack.imgur.com/IxRue.png)

这就是我想要的样子... ![在此处输入图像描述](https://i.stack.imgur.com/0RVFg.jpg)

跨度（工具提示）：

```
.grid-window span.validation-message:after {
    border-color: #F2DEDE transparent transparent;
    border-style: solid;
    border-width: 8px;
    content: "";
    height: 0;
    left: 0;
    position: absolute;
    top: 40px;
    width: 0;
}
.grid-window span.validation-message {
    background: none repeat scroll 0 0 #F2DEDE;
    border: 1px solid #EED3D7;
    border-radius: 3px 3px 3px 3px;
    box-shadow: 1px 1px 2px 0 rgba(0, 0, 0, 0.098);
    color: #B94A48;
    font-size: 14px;
    height: 20px;
    left: 263px;
    line-height: 20px;
    padding: 10px;
    position: absolute;
    text-align: center;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.098);
    top: -26px;
    width: 100px;
} 
```

父元素：

```
element.style {
    display: block;
    height: auto;
    left: 488px;
    outline: 0 none;
    top: 100px;
    width: 400px;
    z-index: 1002;
}
.ui-dialog {
    overflow: visible;
    padding: 0.2em;
    position: absolute;
    width: 300px;
} 
```

**更新**

正如 Rohrbs 所建议的，如果我明确设置跨度的宽度（工具提示），那么它确实会挂在表单上。但这并不实用，因为每个工具提示都可能显示不同的消息。所以我的问题现在变成了 -**如何将宽度设置为动态并且仍然让跨度（工具提示）悬在表单上？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:37:56.213

如果你`width`在课堂`.grid-window span.validation-message`上手动设置`width: 50%;`它会像你想要的那样挂在边缘。您只需保持消息足够短以确保正确安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:06:26.957

将您的样式`.grid-window .control-group .controls`设置为`position: relative;`只有您的绝对定位`.grid-window span.validation-message`才能按您的意愿工作。

看到**[这个小提琴](http://jsfiddle.net/aNkSw/19/)**

**更新** 您想成为您的工具提示宽度变量，因此我已经替换了`position: absolute;`to `position: relative;`in`.grid-window span.validation-message`并添加了`left: 175px; top: -25px; float: left;`width `min-width: 0; max-width: 500px;`: auto; 也工作。使这项工作如你所愿。注意浮动是必须的，否则它将不起作用。

所以，主要的变化**（最重要的部分）**是`float: left; position: relative;`，`.grid-window span.validation-message`你也不需要`position: relative;`声明`.grid-window .control-group .controls`

看到**[这个小提琴](http://jsfiddle.net/aNkSw/20/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:05:34.453

在`.ui-dialog .ui-dialog-content`DIV 上，只需将溢出从自动更改为可见，这将有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T18:07:12.183

我设法解决了您的问题，只需对您的 CSS 和 HTML（类名）进行细微更改。

您可以通过更新的小提琴查看结果：http: [//jsfiddle.net/aNkSw/16/](http://jsfiddle.net/aNkSw/16/)

我为每个跨度添加了一个不同的类，并且仅将这个 CSS 位调整为：

```
.grid-window span.validation-message-id:after, .grid-window span.validation-message-name:after {
    border-color: #F2DEDE transparent transparent;
    border-style: solid;
    border-width: 8px;
    content: "";
    height: 0;
    width: 0;
    position: absolute;
    bottom: -16px;
    left: 10px;
}
.grid-window span.validation-message-id {
    background: none repeat scroll 0 0 #F2DEDE;
    border: 1px solid #EED3D7;
    border-radius: 3px 3px 3px 3px;
    box-shadow: 1px 1px 2px 0 rgba(0, 0, 0, 0.098);
    color: #B94A48;
    font-size: 14px;
    line-height: 20px;
    overflow: visible;
    padding: 10px;
    position: absolute;
    margin: -81px 0 0 0;
    left: 292px;
    z-index: 99;
    text-align: center;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.098);
    width: 200px;
}
.grid-window span.validation-message-name {
    background: none repeat scroll 0 0 #F2DEDE;
    border: 1px solid #EED3D7;
    border-radius: 3px 3px 3px 3px;
    box-shadow: 1px 1px 2px 0 rgba(0, 0, 0, 0.098);
    color: #B94A48;
    font-size: 14px;
    line-height: 20px;
    overflow: visible;
    padding: 10px;
    position: absolute;
    margin: -41px 0 0 0;
    left: 292px;
    z-index: 99;
    text-align: center;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.098);
    width: 200px;
} 
```

我不能说我同意你如何编码整个事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T11:24:24.563

如果你可以使用一个额外的元素，这是一个我经常使用这种定位的解决方案：HTML：

```
<div class="validation-message-wrapper">
<span class="validation-message" style="">Please enter a number</span>
</div> 
```

CSS：

```
.validation-message-wrapper {
    width:0;
    position: absolute;
    right: 70px;
    top: 0;
    height: 0;
} 
```

线索是创建一个大小为零的参考点 ( the `.validation-message-wrapper`) 将其定位在您想要的位置，然后将您的元素相对于它定位。

这是一个工作演示：[DEMO](http://jsfiddle.net/pavloschris/aNkSw/22/)

我还做了一些其他小的 CSS 更改，只是为了稍微调整一下：

```
 .ui-dialog .ui-dialog-titlebar {
    padding: 0.4em 1em;
    position: relative;
}

.grid-window span.validation-message:after {
    border-color: #F2DEDE transparent transparent;
    border-style: solid;
    border-width: 8px;
    content:"";
    height: 0;
    left: 0;
    bottom: -16px;
    position: absolute;
    width: 0;
}
.grid-window span.validation-message {
    background: none repeat scroll 0 0 #F2DEDE;
    border: 1px solid #EED3D7;
    border-radius: 3px 3px 3px 3px;
    box-shadow: 1px 1px 2px 0 rgba(0, 0, 0, 0.098);
    color: #B94A48;
    font-size: 14px;
    height: auto;
    left: 0px;
    bottom: 0;
    line-height: 20px;
    padding: 10px;
    position: absolute;
    text-align: center;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.098);
    margin-top: -40px;
    width: 200px;
} 
```

我希望这会有所帮助。

如果您想要更通用的东西，我制作了一个 jQuery 工具提示插件 ( [tipy](http://www.xpy.gr/tipy) )，它非常易于使用和实现。

# mysql - 合并两个复杂的 MYSQL 查询

> ID：15835156
> 
> 赞同：0
> 
> 时间：2013-04-05T13:24:30.873
> 
> 标签：mysql

我需要有关合并两个复杂 MYSQL 查询的方法的帮助。

查询一：

```
SELECT  p.*
FROM    posts p
    INNER JOIN
    (
        SELECT  a.ID
        FROM    posts a
                INNER JOIN post_tags b
                    ON a.ID = b.post_ID
        WHERE   a.post LIKE '%mmmm%' AND
                b.tagname IN ('#test','#iseeyou')
        GROUP   BY ID
        HAVING  COUNT(DISTINCT b.tagname) = 2
    ) sub ON p.ID = sub.ID
ORDER   BY p.upvotes DESC, p.unix_timestamp DESC 
```

查询 2：

```
SELECT p.*, ((upvotes + 1.9208) / (upvotes + downvotes) - 1.96 * SQRT((upvotes * downvotes)
 / (upvotes + downvotes) + 0.9604) / (upvotes + downvotes))
 / (1 + 3.8416 / (upvotes + downvotes)) AS ci_lower_bound 
 FROM posts p WHERE upvotes + downvotes > 0 
 AND p.unix_timestamp BETWEEN 1363023402 AND 1363109802 ORDER BY ci_lower_bound DESC 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!2/56c63/1)给出了一个小表定义

实际上，第一个是搜索查询，第二个根据过去 24 小时内的投票给出最受欢迎的结果，所以我想根据第二个中使用的公式以及时间范围使用搜索查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:23:16.923

像这样进行最小的更改（如果我正确理解了您想要的内容）

```
SELECT  p.*, ((upvotes + 1.9208) / (upvotes + downvotes) - 1.96 * SQRT((upvotes * downvotes)
 / (upvotes + downvotes) + 0.9604) / (upvotes + downvotes))
 / (1 + 3.8416 / (upvotes + downvotes)) AS ci_lower_bound 
FROM    posts p
    INNER JOIN
    (
        SELECT  a.ID
        FROM    posts a INNER JOIN post_tags b  ON a.ID = b.post_ID
        WHERE   a.post LIKE '%mmmm%' AND b.tagname IN ('#test','#iseeyou')
        GROUP   BY ID
        HAVING  COUNT(DISTINCT b.tagname) = 2
    ) sub ON p.ID = sub.ID
WHERE upvotes + downvotes > 0 
AND p.unix_timestamp BETWEEN 1363023402 AND 1363109802 
ORDER BY ci_lower_bound DESC 
```

可能更有效地交换子选择上的 WHERE 子句（like 上的前导 % 将不使用索引，因此将其与 post_tags 上易于索引的检查结合起来可能更有效））

```
SELECT  p.*, ((upvotes + 1.9208) / (upvotes + downvotes) - 1.96 * SQRT((upvotes * downvotes)
 / (upvotes + downvotes) + 0.9604) / (upvotes + downvotes))
 / (1 + 3.8416 / (upvotes + downvotes)) AS ci_lower_bound 
FROM    posts p
    INNER JOIN
    (
        SELECT  a.ID
        FROM    post_tags b STRAIGHT_JOIN posts a ON a.ID = b.post_ID
        WHERE   a.post LIKE '%mmmm%' AND b.tagname IN ('#test','#iseeyou')
        GROUP   BY ID
        HAVING  COUNT(DISTINCT b.tagname) = 2
    ) sub ON p.ID = sub.ID
WHERE upvotes + downvotes > 0 
AND p.unix_timestamp BETWEEN 1363023402 AND 1363109802 
ORDER BY ci_lower_bound DESC 
```

# java - 如何结合 servlet 和 java portlet 来处理来自 portlet 的请求？

> ID：15835167
> 
> 赞同：0
> 
> 时间：2013-04-05T13:25:14.930
> 
> 标签：java, servlets, portlet

有一个数据库服务器和一个安装了 portlet 的门户。Portlet 代表一个视图，分为两部分。在左侧有一个导航树。当用户单击树节点时，他从数据库服务器获取信息，portlet 应该在视图的右侧显示此信息。

我假设 portlet 视图页面包含 javascript 代码，当用户单击树节点时，portlet 向 servlet 发送请求，获取 servlet 响应，解析它并更新视图。

Portlet 视图布局如下所示：

![](https://i.imgur.com/x2o3fC5.png)

如果它只是基于 servlet 的应用程序，那么我将实现从页面到服务器的 javascript 调用，返回 json，在页面上解析它并更新页面表示。

但是 java portlet 有点不同，我没有找到方法来做到这一点。

我的问题是有一种方法可以将带有 portlet 的 servlet 打包到一个 *.war 文件中，并实现从 portlet 到该 servlet 的请求。Portlet 将所有请求发送到该 servlet，然后 servlet 访问数据库服务器，然后将结果发送到该 portlet。

如果答案是“是” - 我该怎么做。因为我尝试用portlet 打包servlet，但是这样的portlet 不起作用。

如果答案是“否”——在 portlet 中实现这个“数据查询->响应->更新视图”序列的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:14:32.637

我的非工作 servlet+portlet 组合的原因是 portlet 视图 jsp 中指定的 servlet 的路径不正确。

现在任务已解决，下面有详细信息。我认为这将帮助面临同样问题的人。

假设，我们有一个 servlet `GetData`，它执行以下操作：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/plain;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        out.println("Hello there! Привееееет!");
    } finally {            
        out.close();
    }
} 
```

下面有代码`TestPortlet_view.jsp`

```
<%@page contentType="text/html"%>
<%@page pageEncoding="UTF-8"%>

  <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script>
  function loadData() {
    $.get('<%=request.getContextPath()%>' + '/GetData', function(data) {
        alert(data);
    });    
  }
  </script> 
 <input type="button" value="Hit me" onClick="javascript:loadData();"/> 
```

下面是 Portlet 在门户上部署时的图片。

![](https://i.imgur.com/4pTKWxp.png)

当我们点击按钮时：

![](https://i.imgur.com/JxkxHa9.png)

瞧，它有效:)

特别感谢[McDowell](https://stackoverflow.com/users/304/mcdowell)的提醒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:45:14.877

很高兴您对您想要做的事情有答案，但我认为使用 portlet API 中的 serveResource 方法来执行此操作可能更简单、更清晰。在 portlet 2.0 规范中添加 serveResource 方法的主要原因之一是使 portlet 中的 AJAX 功能更简单。

# c# - 查询包含多个字符串中的一个或多个的字符串

> ID：15835170
> 
> 赞同：3
> 
> 时间：2013-04-05T13:25:36.847
> 
> 标签：c#, asp.net, linq

我在这里找到了一个例子：

```
var foo = things.Where(data => myList.Contains(data.Title)); 
```

然而，这是精确的字符串匹配。如果 data.Title.ToLower() 包含在列表 ToLower() 中找到的任何字符串，我只对它感兴趣。

说列表有苹果，在里面预定时钟。

data.Title 例如：Apple Jacks、Book Club、Clockwork Book，这些都可以。但是 Claws and Foods、Clicks、Application Fundamentals 将不被接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:29:32.723

您要查找`Title`可能包含的每个项目（忽略大小写）：

```
var foo = things.Where(data => myList
                .Any(item => data.Title.ToLower().Contains(item.ToLower()))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:34:29.523

```
var myList = new List<string> { "apple", "book", "ClocK" };
var things = new List<string> { "Apple Jacks", "Book Club", "Clockwork Book", "Claws and Foods", "Clicks", "Application Fundamentals" };
var myRegex = new Regex(string.Join("|", myList.Select(x => Regex.Escape(x))), RegexOptions.IgnoreCase);
foreach (var matchingThing in things.Where(x => myRegex.IsMatch(x)))
    Console.WriteLine(matchingThing); 
```

输出：

```
Apple Jacks
Book Club
Clockwork Book 
```

# codeigniter - Code Igniter - 从 where_in 中删除单引号

> ID：15835172
> 
> 赞同：4
> 
> 时间：2013-04-05T13:25:41.503
> 
> 标签：codeigniter, activerecord

我有 2 个查询：

```
$genres = $this->db->select('Group_Concat(intGenreId) strDJGenres')
                                ->from('tblDJGenres')
                                ->where('intDJId', $this->session->userdata('non_admin_userid'))
                                ->get()
                                ->row();

            $results = $this->db->select('tblTracks.*, tblGenres.strName as strGenreName')
                                ->from('tblTracks')
                                ->join('tblGenres', 'tblTracks.intGenreId = tblGenres.intGenreId', 'left')
                                ->where_in('tblTracks.intGenreId', $genres->strDJGenres)
                                ->get()
                                ->result(); 
```

第一个查询返回一个字符串，例如

> '1,2,3,4,8,6,5,7,45,66'

我在第二个查询的 where_in 子句中使用它。问题是使用这个字符串，它正在编写如下 SQL：

```
SELECT `tblTracks`.*, `tblGenres`.`strName` as strGenreName FROM (`tblTracks`) LEFT JOIN `tblGenres` ON `tblTracks`.`intGenreId` = `tblGenres`.`intGenreId` WHERE `tblTracks`.`intGenreId` IN ('1,2,3,4,8,6,5,7,45,66') 
```

使用引号将其视为单个值。我怎样才能得到第二个查询来执行我想要的呢？IE

```
.... where `tblTracks`.`intGenreId` IN (1,2,3,4,8,6,5,7,45,66) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T14:00:27.697

可以将多个值`where_in`作为`array`.

* * *

可以使用以下方法删除字符串开头和结尾的引号`trim()`：

```
$dj_genres = trim($genres->strDJGenres, "'"); 
```

然后可以将此字符串转换为***字符串数组***，以传递给`where_in`第二个查询的子句。

```
$dj_genres_array = explode(",", $dj_genres); 
```

或者，如果您需要一个***整数数组***：

```
$dj_genres_int_array = array_map('intval', $dj_genres_array); 
```

* * *

您可以将结果数组添加到第二个查询中：

```
// ...    
->where_in('tblTracks.intGenreId', $dj_genres_array)
// ... 
```

或者：

```
// ...    
->where_in('tblTracks.intGenreId', $dj_genres_int_array)
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T09:22:40.600

JLeft 给出的答案：

可以使用以下函数删除字符串开头和结尾的引号：

```
$dj_genres = trim($genres->strDJGenres, "'"); 
```

然后可以将此字符串转换为字符串数组，以传递给第二个查询的 where_in 子句。

```
$dj_genres_array = explode(",", $dj_genres); 
```

如果你需要一个整数数组，可以这样生成：

```
$dj_genres_int_array = array_map('intval', $dj_genres_array); 
```

工作得很好......谢谢JLeft

# fuelphp - FuelPHP 自定义环境

> ID：15835176
> 
> 赞同：0
> 
> 时间：2013-04-05T13:25:51.090
> 
> 标签：fuelphp

我正在将现有的 FuelPHP 应用程序移动到一个新环境中，并且我已经达到了可以在默认 4（即开发、测试、阶段、生产）之外添加另一个环境的地步，这些都已经在其他地方使用。

是否有任何相当直接的方法可以为 FuelPHP 添加额外的环境？如果有，我将不胜感激有关如何操作的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:06:39.830

是的，它可能，但它没有记录在任何地方，这是我在查看您的帖子后发现的黑客方法

以下是在 FUel php 应用程序中创建自定义环境的步骤

例如，您需要将新环境称为“实验”

1\. 在fuel/app/config 目录中创建一个名为experiment 的文件夹

2\. 在 fuel/app/config/experiment 目录中创建 db.php 文件，其中包含以下内容，您可以添加其他配置，但以下是默认数据库配置（根据您的平台进行更改），其他迁移文件也可以从其他迁移文件复制到此文件夹环境

```
return array(
    'default' => array(
        'connection'  => array(
            'dsn'        => 'mysql:host=localhost;dbname=yourappdatabasename',
            'username'   => 'yourDBuname',
            'password'   =>  'yourDBpassword',
        ),
    ),
); 
```

3\. 接下来更改 Fuel/app/bootstrap.php 文件中的环境名称

```
Fuel::$env = (isset($_SERVER['FUEL_ENV']) ? $_SERVER['FUEL_ENV'] : Fuel::EXPERIMENT); 
```

4\. 然后打开 Fuel/core/classes/Fuel.php 文件并在类的顶部添加一个新的常量到 Fuel 类，如下所示，我想你可以找到其他环境也在那里声明。

```
const EXPERIMENT = 'experiment'; 
```

这就是您在 Fuel php 应用程序中创建的新自定义环境的全部内容，

> 注意： - 这种方法是一种未经正式记录的黑客方法
> 
> 在这里发帖，希望它可以帮助您或其他有类似要求的人

**编辑： - 这是版本> 1.5**

步骤 1 和步骤 2 相同

3\. （假设您使用的是 Apache）通过将以下行添加到您的 VirtualHost 配置，将 FUEL_ENV 服务器变量设置为您的新环境名称：

```
SetEnv FUEL_ENV experiment 
```

这就是它的全部内容（无论如何在 Apache 上）。无需向 core/fuel.php 添加 const（根据预定义的环境）。这是不必要的，只会使升级 Fuel 的核心变得困难。

# sql-server - 复制基于 3 列的不同记录

> ID：15835180
> 
> 赞同：0
> 
> 时间：2013-04-05T13:25:56.293
> 
> 标签：sql-server

我在一个名为 Temp 的表中有大量数据。此数据由重复项组成。不是整行，而是 3 列中的相同数据。它们是 HouseNo、DateofYear、TimeOfDay。

我只想将“Temp”中的不同行复制到另一个表“ThermData”中。

基本上我想要做的是将所有不同的行从 Temp 复制到不同的 ThermData（HouseNo，DateofYear，TimeOfDay）。类似的东西。

我知道我们不能那样做。我如何做到这一点的替代方法。

帮帮我吧。我已经尝试了很多东西，但还没有解决得到它。

* * *

样本数据。重复的值就像....我想根据 HouseNo,DateofYear,TimeOfDay 的值删除重复的行

* * *

```
HouseNo DateofYear TimeOfDay Count
102 10/1/2009    0:00:02 AM 2
102 10/1/2009    1:00:02 AM 2
102 10/1/2009    10:00:02 AM    2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:36:35.053

这是一个基于 Orders 表的 Northwind 示例。

基于 (EmployeeID , ShipCity , ShipCountry) 列存在重复项。

如果您只执行这两行之间的代码：

```
/* Run everything below this line to show crux of the fix */
/* Run everything above this line to show crux of the fix */ 
```

你会看到它是如何工作的。基本上：

(1) 您对感兴趣的 3 列运行 GROUP BY。 **（衍生1重复）**

(2) 然后您使用这 3 列连接回表。**（关于 ords.EmployeeID = derived1Duplicates.EmployeeID 和 ords.ShipCity = derived1Duplicates.ShipCity 和 ords.ShipCountry = derived1Duplicates.ShipCountry）**

(3) 然后对于每个组，用基数（1、2、3、4 等）标记它们**（使用 ROW_NUMBER()）**

(4) 然后你保留每个组中基数为“1”的行。**（其中derived2DuplicatedEliminated.RowIDByGroupBy = 1）**

```
 Use Northwind
    GO

declare @DestinationVariableTable table ( 
    NotNeededButForFunRowIDByGroupBy int not null ,
    NotNeededButForFunDuplicateCount int not null ,
    [OrderID] [int] NOT NULL,
    [CustomerID] [nchar](5) NULL,
    [EmployeeID] [int] NULL,
    [OrderDate] [datetime] NULL,
    [RequiredDate] [datetime] NULL,
    [ShippedDate] [datetime] NULL,
    [ShipVia] [int] NULL,
    [Freight] [money] NULL,
    [ShipName] [nvarchar](40) NULL,
    [ShipAddress] [nvarchar](60) NULL,
    [ShipCity] [nvarchar](15) NULL,
    [ShipRegion] [nvarchar](15) NULL,
    [ShipPostalCode] [nvarchar](10) NULL,
    [ShipCountry] [nvarchar](15) NULL
)

INSERT INTO @DestinationVariableTable (NotNeededButForFunRowIDByGroupBy , NotNeededButForFunDuplicateCount , OrderID,CustomerID,EmployeeID,OrderDate,RequiredDate,ShippedDate,ShipVia,Freight,ShipName,ShipAddress,ShipCity,ShipRegion,ShipPostalCode,ShipCountry )

Select RowIDByGroupBy , MyDuplicateCount , OrderID,CustomerID,EmployeeID,OrderDate,RequiredDate,ShippedDate,ShipVia,Freight,ShipName,ShipAddress,ShipCity,ShipRegion,ShipPostalCode,ShipCountry
From
(
/* Run everything below this line to show crux of the fix */
Select
 RowIDByGroupBy = ROW_NUMBER() OVER(PARTITION BY ords.EmployeeID , ords.ShipCity , ords.ShipCountry ORDER BY ords.OrderID )
 , derived1Duplicates.MyDuplicateCount
, ords.* 
from
  [dbo].[Orders] ords
 join
 (
select EmployeeID , ShipCity , ShipCountry , COUNT(*) as MyDuplicateCount from [dbo].[Orders] GROUP BY EmployeeID , ShipCity , ShipCountry /*HAVING COUNT(*) > 1*/
) as derived1Duplicates
on  ords.EmployeeID = derived1Duplicates.EmployeeID and  ords.ShipCity = derived1Duplicates.ShipCity and  ords.ShipCountry = derived1Duplicates.ShipCountry 
/* Run everything above this line to show crux of the fix */
)
as derived2DuplicatedEliminated
where derived2DuplicatedEliminated.RowIDByGroupBy = 1

select * from @DestinationVariableTable 
```

*强调文字**强调文字**强调文字*

# javascript - 获取计数并将它们分组

> ID：15835181
> 
> 赞同：1
> 
> 时间：2013-04-05T13:25:57.190
> 
> 标签：javascript, python, mongodb, python-2.7, pymongo

我正在使用 python 和 pymongo。

在 mongo 集合之一中保存来自不同国家的不同消息。每份文件都有一个国家短代码来表明他们的国家。我可以知道如何将它们分组并获取每个国家/地区代码的计数吗？

例如

```
{u'tweet': u"If you're male and own an iPhone, get new star soccer. Holy shit it's addictive", u'loc': u"US", u'_id': ObjectId('515ecace4e18187ca67ddfcb'), u'time': datetime.datetime(2013, 4, 5, 12, 59, 57)} 
```

上面是一行带有位置的消息，在我的数据库中可能有 US、SG、AU 等等......不同的位置会有不同的消息数量。我该如何查询或者这是任何可能的方法？谢谢

**更新**

我想获得计数的原因是因为我需要将数据注入到以下代码中，以便[谷歌图表](https://developers.google.com/chart/interactive/docs/gallery/geochart)为我生成图表。

```
var data = google.visualization.arrayToDataTable([
      ['Country', 'Popularity'],
      ['Germany', 200],
      ['United States', 300],
      ['Brazil', 400],
      ['Canada', 500],
      ['France', 600],
      ['RU', 700]
    ]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:47:42.417

使用聚合框架。

```
db.collection.aggregate({$group:{_id:"$loc", count: {$sum:1}}} 
```

这将为您返回每个国家/地区的提及次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:39:17.583

我的第一反应是在阅读 MongoClient 游标时将记录分组到字典中。每个键都是一个国家，每个值都是该国家所有记录的列表。

```
import pymongo
con = pymongo.MongoClient()
db = con.myDatabase
col = db.myCollection
cursor = col.find()

data = {}
for c in cursor:
    if not c["loc"] in data.keys():
        data[c["loc"]] = []
    data[c["name"]].append(c) 
```

这当然假设每条记录都有您示例中的“loc”键。

# ruby - 红宝石宝石“twitter_oauth”中的代理

> ID：15835191
> 
> 赞同：1
> 
> 时间：2013-04-05T13:26:24.700
> 
> 标签：ruby, proxy, rubygems, twitter-oauth, test-environments

我的 Ruby (Sinatra + twitter_oauth) 项目的测试环境位于代理后面。

在[文档](https://github.com/moomerman/twitter_oauth#working-with-a-proxy)中，我阅读了如何将 twitter_oauth gem 与代理一起使用。但那里的作者说：

> 首先你需要通过 Twitter API 直接通过 OAuth 授权 Twitter 用户（这部分不能被代理）

但不幸的是，在这一步中，我在本地测试时收到代理错误。

有没有可能代理这个？

```
 client = TwitterOAuth::Client.new(
    :consumer_key => 'YOUR_APP_CONSUMER_KEY',
    :consumer_secret => 'YOURA_APP_CONSUMER_SECRET'
    )
    request_token = client.request_token(:oauth_callback => 'YOUR_CALLBACK_URL') 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T18:13:00.353

否，但如果围绕身份验证检查本地环境，则可以跳过 OAuth：

```
def localhost
 client = "Test"
 request_token = "Me"

def webhost
 client = TwitterOAuth::Client.new(
 :consumer_key => 'YOUR_APP_CONSUMER_KEY',
 :consumer_secret => 'YOURA_APP_CONSUMER_SECRET'
 )
 request_token = client.request_token(:oauth_callback => 'YOUR_CALLBACK_URL') 
```

# gwt - 使用GWT和JDO，为什么执行查询总是返回null？

> ID：15835195
> 
> 赞同：0
> 
> 时间：2013-04-05T13:26:31.787
> 
> 标签：gwt, null, google-cloud-datastore, jdo

过去几个月我一直在使用 GWT，我需要开始工作的最后一件事是使用 GAE 而不是 SQLITE 将我的应用程序数据存储在 JDO 对象中。
我的应用程序成功地将对象（在本例中为论坛主题）保存到数据存储区（我已在 appspot/appengine 日志查看器中确认了这一点）。当我像这样对主题 ID 进行硬编码时，我设法获取了其中一个对象：

```
 pManager.getObjectById(Topic.class, 1); 
```

但是，当我尝试使用 Query 类并获取包含所有主题的 List 时，我从 execute 方法中得到的所有内容都是空的。如果我清除主题的数据存储区，我可以打印结果列表的大小（因此它不应该为空），但是当数据存储区中有主题时，它总是会生成`List<Topic> null`.

这是有问题的代码：

```
// Fetches all Topic-objects from the App Engine storage and 
// puts them in an ArrayList that is returned.
public ArrayList<Topic> getAllTopics() {

    ArrayList<Topic> queryResults = new ArrayList<Topic>();
    PersistenceManager pManager = PMF.get().getPersistenceManager();
    pManager.getFetchPlan().setGroup(FetchGroup.ALL);
    Query topicQuery = pManager.newQuery(Topic.class);

    // Does not make any difference what query I use
    //Query topicQuery = pManager.newQuery(Topic.class);

    Topic newTopic = null;
    try {
        System.out.println("Will now try to execute the query...");
        List<Topic> results = (List<Topic>)topicQuery.execute();
        System.out.println("Result size: " + results.size());
        System.out.println("Query now done executing.");
        for (Topic t : results) {
            // Does not seem to make any difference either
            //      newTopic = pManager.detachCopy(t);
            //      queryResults.add(newTopic);
            queryResults.add(t);
        }
        // I can fetch one topic when hard-coding the ID.
        //      queryResults.add(pManager.getObjectById(Topic.class, 1));
    } catch(Exception e) {
        System.out.println("Exception when getting all topics on server: " + e.getMessage() + " - ");
        System.out.print( e.getStackTrace());
    } finally {
        topicQuery.closeAll();
        pManager.close();
    }   

    return queryResults;
} 
```

这是使主题对象持久化的代码：

```
 // Creates a topic object and stores it in App Engine
// Returns true if it succeeded, otherwise false
public Boolean createTopic(String title_, String text_) {

    PersistenceManager pManager = PMF.get().getPersistenceManager();
    UserAuthImpl newUserAuth = new UserAuthImpl();

    if(newUserAuth.returnUser().isEmpty() || newUserAuth.returnUser() == null ) 
        return false;

    Topic newTopic = new Topic(newUserAuth.returnUser(), title_, text_, new Date(Calendar.getInstance().getTimeInMillis()));

    try {
        // Did not help: pManager.setDetachAllOnCommit(true);
        pManager.makePersistent(newTopic);
    } catch(Exception e) {
        System.out.println("Error while creating topic: " + e.getMessage());
        return false;
    } finally {
        pManager.close();
    }
    return true;
} 
```

这是主题对象类：

```
package se.biffnet.tddi15.forum.client;

import java.io.Serializable;

import java.util.Date;

import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.IdentityType;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@SuppressWarnings("serial")
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
public class Topic implements Serializable {

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
long    topicID;

@Persistent
String  authorID;

@Persistent
String  postTitle;

@Persistent
String  postText;

@Persistent
Date    postDate;

public Topic(String authorID_, String postTitle_, String postText_, 
        java.util.Date date) {
    authorID    = authorID_;
    postTitle   = postTitle_;
    postText    = postText_;
}

public Topic() {
    authorID    = "";
    postTitle   = "";
    postText    = "";
    postDate    = null;
}

public String getPostTitle() {
    return postTitle;
}

public void setPostTitle(String postTitle) {
    this.postTitle = postTitle;
}

public String getPostText() {
    return postText;
}

public void setPostText(String postText) {
    this.postText = postText;
}

public long getTopicID() {
    return topicID;
}

public String getAuthorID() {
    return authorID;
}

public Date getPostDate() {
    return postDate;
    } 
} 
```

所以我想问题是：
为什么`execute()`总是返回null？非常感谢您的帮助 =)

EDIT2：必须更改 logging.properties 才能看到调试消息。这是我的错。日志太大，无法在此处发布，因此这里是 pastebin 的链接：http: [//pastebin.com/CGX1Aug0](http://pastebin.com/CGX1Aug0)

EDIT3：异常及其堆栈跟踪：

```
java.lang.NullPointerException: null
com.google.appengine.datanucleus.query.QueryEntityPKFetchFieldManager.fetchLongField(QueryEntityPKFetchFieldManager.java:74)
org.datanucleus.identity.IdentityUtils.getApplicationIdentityForResultSetRow(IdentityUtils.java:101)
com.google.appengine.datanucleus.EntityUtils.entityToPojo(EntityUtils.java:1011)
com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:229)
com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:226)
com.google.appengine.datanucleus.query.LazyResult.resolveNext(LazyResult.java:96)
com.google.appengine.datanucleus.query.LazyResult$LazyAbstractListIterator.computeNext(LazyResult.java:229)
com.google.appengine.datanucleus.query.AbstractIterator.tryToComputeNext(AbstractIterator.java:131)
com.google.appengine.datanucleus.query.AbstractIterator.hasNext(AbstractIterator.java:126)
com.google.appengine.datanucleus.query.LazyResult$AbstractListIterator.hasNext(LazyResult.java:183)
se.biffnet.tddi15.forum.server.DbHandlerImpl.getAllTopics(DbHandlerImpl.java:75)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_$1.run(Method_.java:167)
java.security.AccessController.doPrivileged(Native Method)
com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.privilegedInvoke(Method_.java:164)
com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.invoke_(Method_.java:125)
com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.invoke(Method_.java:43)
com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
org.mortbay.jetty.Server.handle(Server.java:326)
org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
java.lang.Thread.run(Thread.java:722) 
```

# mysql - 如何将 iOS 应用程序连接到数据库（mySQL 和 SequelPro）？

> ID：15835198
> 
> 赞同：0
> 
> 时间：2013-04-05T13:26:44.813
> 
> 标签：mysql, objective-c, database, core-data, sequelpro

我正在寻找一种将应用程序与数据库连接的方法，该数据库是在 Sequel Pro 中创建的，该数据库与 mySQL Server（通过 MAMP 启动）连接。我已经搜索了一些解决方案，但是有数百个不同的帖子，有些人说 SQLite 将是唯一的可能性，有些人说 CoreData 将是完美的。

现在我找到了一个名为“MCPKit”的框架，但这个框架并不是最新的，而且看起来 Apple 本身也推荐使用 CoreData 进行数据管理。（[https://developer.apple.com/technologies/ios/data-management.html](https://developer.apple.com/technologies/ios/data-management.html)）

我不熟悉 CoreData，如果有人知道另一种建立连接的方法，我会很高兴。

我尝试尽可能具体，但如果您已经有一些问题，请提出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:55:20.550

可以连接到 mysql 数据库。我是通过 php 完成的，它返回了一个我的应用程序解析和存储的 xml 文件。

这个链接也涵盖了这个主题。

[如何从 iPhone 连接到 MySQL 数据库？](https://stackoverflow.com/questions/468618/how-to-connect-to-a-mysql-database-from-an-iphone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:45:10.307

Core Data 是一种用于在 iOS 中持久化对象的技术，通常用作本地数据库。事实上，`NSPersistentStore`iOS 中几乎总是作为 SQLite 数据库实现的。但是，如果您希望通过网络调用从服务器上的数据库中获取数据，Core Data 不会这样做。

简短的回答是您需要在您的服务器上构建一个允许您访问数据的 Web 服务。处理服务和移动设备之间通信的一个好方法（虽然肯定不是唯一的方法）是使用套接字。 [这是一个教程](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server) ，可以让您有一个良好的开端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:47:43.143

CoreData 实际上使用 SQLite ...您可以使用 NSURLRequest 访问您的数据库，然后使用请求创建一个 NSData。根据您的服务器返回给您的格式（即 JSON），您可以将 NSData 转换为字典。使用 JSON 看起来像这样：

```
 NSDictionary *contentDictionary = [NSJSONSerialization JSONObjectWithData:contentServerResponse options:NSJSONReadingMutableContainers error:nil]; 
```

然后您可以访问 Dictionary 通常的 Key-Value-Access 并将内容分配给您的 ViewController。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:49:10.453

如果您使用 MAMP，请尝试编写 php 脚本文件来访问 mySQL 数据库，并使用 PHP 中的 json_encode 函数将其作为 JSON 文本回显。你有很多解析器来解析 iOS 中的 JSON。

# java - 当它们是同名的多个类时，识别特定的包含项目类

> ID：15835202
> 
> 赞同：0
> 
> 时间：2013-04-05T13:26:53.033
> 
> 标签：java, spring

我的项目中包含 (2+) 个项目，`genxml`例如`framework1`和`framework2`. 它们是同一框架的略有不同的版本，并且都具有类`AbstractScreenTest.class`。每个`AbstractScreenTest.class`都有不同的注释

```
@MyAnnotation(name="version",  value = "71automation")
@MyAnnotation(name="version",  value = "72automation") 
```

无论如何使用注释或其他方式我可以指定我想在下面的代码中使用哪个 AbstractScreenTest.class 因为目前只使用找到的第一个实例。

```
ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(true);
provider.addIncludeFilter(new AssignableTypeFilter(AbstractScreenTest.class));
Set<BeanDefinition> components = provider.findCandidateComponents(candiatePackage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:54:37.303

这不是 Spring 的问题，JVM 不能在一个类加载器中同时加载一个类的两个版本。

加载同一类的不同版本的唯一方法是使用具有不同类路径的两个不同的类加载器。没有简单的解决方案，特别是如果这些框架使用其他可以交互的类。

# css - 居中水平无序列表的css问题

> ID：15835206
> 
> 赞同：1
> 
> 时间：2013-04-05T13:27:08.040
> 
> 标签：css, centering

我无法将用于导航的无序列表居中。我查看了其他建议并尝试修复它，所以现在我的代码一团糟。我一生都无法弄清楚出了什么问题。我尝试过的所有解决方案仍然没有在窗口中将列表居中。添加溢出：可见将其拉伸但不是 100%，并且当窗口增大时它不会扩展。

```
#navbar {
position: fixed;
top:-17px;
margin-bottom: 10px;
font-family:Verdana, Geneva, sans-serif;
margin: 0;
padding: 0; 
```

}

```
#navbar ul > li {
display: inline-block; 
float: none;
color:white;
font-size: 14px;
margin-right: 35px;
margin-left: 35px;
padding: .2em 1em;
overflow:visible; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:44:40.717

这是你想要的？

[http://jsfiddle.net/talymo/6FGbw/](http://jsfiddle.net/talymo/6FGbw/)

```
#navbar {
    position:fixed;
    list-style:none;
    margin:0;
    padding:0;
    width:100%;
    text-align:center;
}

    #navbar li{
        padding:10px;
        display:inline-block;
    }

    <ul id="navbar">
        <li>Thing 1</li>
        <li>Thing 2</li>
        <li>Thing 3</li>
    </ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:39:06.153

如果将其添加到代码中会怎样：

```
text-align: center 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:40:22.733

您可以尝试的一件事是将列表放入 div 并将样式添加`text-align:center;`到 div。

之后只需`position:fixed;`从`#navbar`.

*或者您可以将列表包装在`<center> </center>`标签中。*

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T13:40:47.983

尝试：

```
#navbar ul {
text-align: center;
} 
```

JSFiddle：http: [//jsfiddle.net/zgwxP/](http://jsfiddle.net/zgwxP/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T13:41:42.530

假设您的导航栏有一些设置宽度，您可以`text-align:center`在您的`ul`

[jsFiddle](http://jsfiddle.net/Tyriar/MD6N3/1/)

```
/* Give the navbar a width */
#navbar {
    left:0;
    right:0;
}

#navbar ul {
    padding:0;
    text-align:center;
} 
```

# actionscript-3 - ActionScript 3.0，Flash 在 gotoAndStop() 中冻结

> ID：15835207
> 
> 赞同：0
> 
> 时间：2013-04-05T13:27:14.973
> 
> 标签：actionscript-3, flash-cs6

我正在制作一个 Flash 文件，我正在使用 Adob​​e Flash CS6 制作它，因此使用 ActionScript 3.0 进行编码，我有一种名为“About”的“链接”，它应该将 Flash 移动到具有“关于”内容，在我的情况下，这里的数字是 290。

这是我单击“关于”按钮的代码：

```
import flash.events.MouseEvent;

var frameNumber:int;
var counter:int;

function onClick3(event:MouseEvent):void
{
    if (counter%2 == 0)
    {
        frameNumber = currentFrame;
        gotoAndStop(290);
    }
    else
    {
        gotoAndStop(frameNumber);
    }
    counter++;
}
aboutButton.addEventListener(MouseEvent.CLICK, onClick3); 
```

这应该在偶数点击时显示“关于”框架（从零开始），并返回到在奇数点击时点击“关于”的框架，如下所示：

单击“关于”-> 显示关于。

再次单击“关于”-> 隐藏关于并返回调用框架。

再次单击“关于”-> 显示关于。

等等..

它适用于在框架和“关于”框架（290）之间移动，但问题是我也有“下一个”和“上一个”按钮，但是当我从“关于”页面返回时，整个闪光灯冻结，除了“关于”按钮之外没有任何作用，那么这里有什么问题？什么可以解决这个问题？

如果存在，有没有办法将我的“关于”部分显示为 Flash 中的弹出消息？

# html - 如何在已有的项目中应用新的 CSS？

> ID：15835208
> 
> 赞同：0
> 
> 时间：2013-04-05T13:27:15.900
> 
> 标签：html, css, zurb-foundation, ganglia

我正在一个已经使用 a 的项目中工作`stylesheet`，但我想使用[Foundation](http://foundation.zurb.com/)改进网站。我试图将新`stylesheet` 的项目放入项目中，但事情是[这样](https://i.stack.imgur.com/4Wi2a.png)的：

![前](https://i.stack.imgur.com/4Wi2a.png)

变成[了这样](https://i.stack.imgur.com/PRHEc.png)： ![后](https://i.stack.imgur.com/PRHEc.png)

所以我只是停止使用`Foundation`，但我真的很想使用它，但是如何使用呢？你们做了什么来`CSS`在已经拥有的项目中应用新的？

**更新**

```
<!-- CSS Ganglia -->
<link type="text/css" href="css/smoothness/jquery-ui-1.9.1.custom.min.css" rel="stylesheet" />
<link type="text/css" href="css/jquery.liveSearch.css" rel="stylesheet" />
<link type="text/css" href="css/jquery.multiselect.css" rel="stylesheet" />
<link type="text/css" href="css/jquery.flot.events.css" rel="stylesheet" />
<link type="text/css" href="./styles.css" rel="stylesheet" />
<!-- /CSS Ganglia -->

<!-- CSS Integra -->
<link type="text/css" href="css/integra/style.css" rel="stylesheet" />
<!-- /CSS Integra -->

<!-- CSS Foundation -->
<!-- <link rel="stylesheet" href="css/foundation/normalize.css" />   -->
<!-- <link rel="stylesheet" href="css/foundation/foundation.css" />  --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:34:29.743

这是一个非常复杂的过程，您将在这里执行... 99.99% 的时间您不能只是“即插即用”，可以说是使用新样式表。例如，您的两个输入很可能已`float: left`在旧样式表中定义。新的样式表覆盖了这些样式，并使它们基本上`float: none`破坏了布局。

那你该怎么办。

将当前站点复制到开发目录（只需在根目录中创建一个名为 dev 的文件夹，然后在该目录中复制整个站点。您将使用此目录进行开发，而无需修改当前活动的站点。

在当前样式表下方包含您的基础样式表。然后慢慢浏览旧样式表并找出被覆盖的内容并将其合并到新样式表中。

# html - 如何进行上传后分块（与下载分块）

> ID：15835209
> 
> 赞同：1
> 
> 时间：2013-04-05T13:27:16.963
> 
> 标签：html, playframework

因此，在 playframework 中，我可以流回任何响应，因此当我收到 json 请求时，我可以进行 http 分块并将响应流回以获取一些非常大的响应。我想知道是否可以在 POST 调用上执行相同的操作。如果客户有一个非常非常大的 POST 调用，他们可以向我发送请求吗？这可以用html吗？

也就是说，如果我不能这样做，我需要一个 api，curl 或其他一些非浏览器客户端将使用它来上传文件（json 请求或 csv 等）。如何创建这样的api？

我应该注意，我不能一次收到整个请求，否则会内存不足。我需要接收片段，当我收到片段时，一次将其放入后端数据存储区。

此外，curl 语法是什么，以确保它正在流式传输文件，而不是在一个会破坏服务器的巨大请求中发送它？如何强制客户端将文件流式传输？

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T10:41:48.090

[您可以使用EssentialAction](http://www.playframework.com/documentation/2.2.x/api/scala/index.html#play.api.mvc.EssentialAction)完全控制 HTTP 请求处理。EssentialAction 处理请求正文并返回结果。

Normal Play [Action](http://www.playframework.com/documentation/2.2.x/api/scala/index.html#play.api.mvc.Action)是 EssentialAction 的一个特例。Actions 处理请求正文并返回结果，但它们总是分两步执行它们的处理。操作首先解析请求正文。然后Actions将解析后的值解析为一个函数，得到一个Result。对你来说，有一个单独的解析步骤是个问题，因为这意味着解析后的值需要存储在内存中。

如果您使用 EssentialAction，那么您可以避免将解析后的值存储在内存中，因为您可以在请求正文到达时对其进行处理。

您需要做的是向您的控制器添加一个返回 EssentialAction 的方法。

EssentialAction 的签名是：

```
trait EssentialAction extends (RequestHeader) ⇒ Iteratee[Array[Byte], SimpleResult] 
```

EssentialAction 需要接受请求头，然后返回一个 iteratee 来处理请求体。iteratee 将在请求主体到达时增量处理它。您可以使用 iteratee 在每件到达时将每件放入您的数据存储中。处理完所有部分后，您可以返回一个结果。

更多信息在这里：[http](http://www.playframework.com/documentation/2.2.x/HttpApi) ://www.playframework.com/documentation/2.2.x/HttpApi 。

# windows - 实现虚拟文件系统时可以安全忽略的各种系统文件列表

> ID：15835213
> 
> 赞同：4
> 
> 时间：2013-04-05T13:27:22.807
> 
> 标签：windows, performance, macos, file, webdav

我正在开发一个 WebDAV 服务器，它在虚拟文件系统中显示来自数据库的信息。

因此，用户能够在服务器上创建文件，并且它们会自动创建回数据库中。

现在，一旦用户连接到服务器，一些操作系统倾向于立即创建自己的元数据文件/文件夹（考虑 Thumbs.db、desktop.ini、.fseventsd、DS_Store，...）

这些文件使数据库变得混乱 - 并且往往也会降低性能（例如，OSX 会在打开文件夹后立即进行大量索引，这意味着对数据库的大量命中）

因此，为了性能和清洁度，我正在寻找由各种操作系统创建的（元）文件/文件夹的“完整”列表 - 这些是“安全”的，可以被服务器抑制。

到目前为止我的清单：

```
//TODO: get rid of system files
/*
 *** everywhere
 * Thumbs.db
 * desktop.ini
 * .DS_Store
 * .desktop
 * AlbumArt*.jpg
 * Folder.jpg
 * ._[ParentFoldername]   // e.g. /foo/bar/._bar
 * ._[ExistingFoldername] // e.g. /foo/._bar
 * ._[ExistingFilename]   // e.g. /foo/bar/._baz (baz is a legit file inside bar)
 * ._.                    // ?!? 
 *** root only
 * System Volume Information
 * .fseventsd
 * $recycling.bin
 * $Recycle.Bin
 * Recycled
 * .Trashes
 * hiberfil.sys
 * pagefile.sys
 * .hidden
 * mach_kernel
 * Backups.backupdb
 * Contents
 *
 *** special
 * .metadata_never_index // fake this file in root
 *                       // (should keep OSX from indexing)
 */ 
```

我现有的 OSX 测试结构是：

```
/MarioDemo/
/FrankTest/
/TestItemRelation/

/.metadata_never_index

/MarioDemo/Alphabetical/
/MarioDemo/Hierarchical/ 
```

这里是 OSX 在打开 /MarioDemo/ 时请求的文件：

![来自 OSX 的发现](https://i.stack.imgur.com/PdHwS.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T22:57:35.327

我猜你的清单已经很完整了。除非您特别想过滤掉特定的文件类型，否则我只会添加以下内容：

```
.DS_Store?
._*
.Spotlight-V100
.DocumentRevisions-V100
.fseventsd
.MobileBackups
Icon?
__MACOSX
ehthumbs.db
desktop.ini
*.desktop
*.bak
.*~
*~ 
```

我从一个名为[Ignoramus](https://github.com/rolandwalker/ignoramus)的项目中获取这些信息。带有模式的相关文件在[这里](https://github.com/rolandwalker/ignoramus/blob/master/ignoramus.el)，采用 emacs 格式。完全匹配的列表打印在下面，这就是我从中获取的：

```
"$RECYCLE.BIN"                         ; ms-windows
".AppleDouble"                         ; OS X
".DS_Store"                            ; OS X
".DocumentRevisions-V100"              ; OS X
".LSOverride"                          ; OS X
".Rhistory"                            ; R
".Spotlight-V100"                      ; OS X
".TemporaryItems"                      ; OS X
".Trashes"                             ; OS X
".actionScriptProperties"              ; actionscript
".apt_generated"                       ; gwt
".build"                               ; perl
".buildpath"                           ; eclipse
".builds"                              ; visualstudio
".bzr"                                 ; bazaar
".cdv"                                 ; codeville
".classpath"                           ; eclipse
".com.apple.timemachine.donotpresent"  ; OS X
".com.apple.timemachine.supported"     ; OS X
".coverage"                            ; python
".cproject"                            ; eclipse
".directory"                           ; KDE
".dropbox"                             ; dropbox
".dropbox.cache"                       ; dropbox
".emacs.desktop"                       ; emacs desktop.el
".emacs.desktop.lock"                  ; emacs desktop.el
".eunit"                               ; erlang
".externalToolBuilders"                ; eclipse
".flexProperties"                      ; actionscript
".fseventsd"                           ; OS X
".git"                                 ; git
".hg"                                  ; mercurial
".idea"                                ; various
".ido.last"                            ; emacs ido-mode
".last_cover_stats"                    ; perl
".lein-deps-sum"                       ; leiningen
".loadpath"                            ; eclipse
".netrwhist"                           ; vim
".org-id-locations"                    ; emacs org-mode
".pc"                                  ; quilt
".project"                             ; eclipse
".projectile"                          ; emacs projectile
".recentf"                             ; emacs recentf
".redcar"                              ; redcar
".rspec"                               ; rails
".sass-cache"                          ; sass
".scala_dependencies"                  ; scala
".svn"                                 ; subversion
".tox"                                 ; python
".wmncach.el"                          ; emacs WoMan
".yardoc"                              ; yard
"_MTN"                                 ; monotone
"__history"                            ; delphi
"_build"                               ; perl
"_cgo_defun.c"                         ; go
"_cgo_gotypes.go"                      ; go
"_darcs"                               ; darcs
"_obj"                                 ; go
"_sgbak"                               ; vault
"_site"                                ; jekyll
"_test"                                ; go
"_testmain.go"                         ; go
"_yardoc"                              ; yard
"aclocal.m4"                           ; automake
"auto-save-list"                       ; emacs
"autom4te.cache"                       ; autoconf
"bin-debug"                            ; various
"bin-release"                          ; various
"blib"                                 ; perl
"build"                                ; various
"Build"                                ; various
"Build.bat"                            ; perl
"COMMIT_EDITMSG"                       ; git
"cmake_install.cmake"                  ; cmake
"CMakeCache.txt"                       ; cmake
"CMakeFiles"                           ; cmake
"cover_db"                             ; perl
"cscope.csd"                           ; cscope
"cscope.files"                         ; cscope
"cscope.inc"                           ; cscope
"cscope.lst"                           ; cscope
"cscope.out"                           ; cscope
"cscope.out.po"                        ; cscope
"cscope.tmplist"                       ; cscope
"CVS"                                  ; CVS
"Debug"                                ; various
"debug"                                ; various
"depcomp"                              ; automake
"DerivedData"                          ; xcode
"Desktop.ini"                          ; ms-windows
"ehthumbs.db"                          ; ms-windows
"git-rebase-todo"                      ; git
"gwt-unitCache"                        ; gwt
"gwt_bree"                             ; gwt
"install-sh"                           ; automake
"install_manifest.txt"                 ; cmake
"InstalledFiles"                       ; ruby
"Makefile.in"                          ; automake
"MCVS"                                 ; meta-CVS
"META.yml"                             ; perl
"MERGE_MSG"                            ; git
"minimal-session-saver-data.el"        ; emacs minimal-session-saver
"MYMETA.yml"                           ; perl
"nbbuild"                              ; netbeans
"nbdist"                               ; netbeans
"nosetests.xml"                        ; python
"pm_to_blib"                           ; perl
"Profile"                              ; various
"profile"                              ; various
"RCS"                                  ; RCS
"Release"                              ; various
"release"                              ; various
"SCCS"                                 ; SCCS
"Session.vim"                          ; vim
"slprj"                                ; matlab
"SQUASH_MSG"                           ; git
"TAGS"                                 ; ctags/etags
"tags"                                 ; ctags/etags
"TestResult"                           ; visualstudio
"testresult"                           ; visualstudio
"Thumbs.db"                            ; ms-windows
"tmtags"                               ; textmate
"xcuserdata"                           ; xcode
"xhtml-loader.rnc"                     ; emacs nxhtml
"{arch}"                               ; arch - todo is this correct?
"~.dep"                                ; xcode
"~.dot"                                ; xcode
"~.nib"                                ; xcode
"~.plst"                               ; xcode
"test.out"                             ; generic testing
"test_out"                             ; generic testing
"test.output"                          ; generic testing
"test_output"                          ; generic testing 
```

# openstack - 无法在 openstack 中创建超过 2 GB 的卷

> ID：15835215
> 
> 赞同：5
> 
> 时间：2013-04-05T13:27:26.417
> 
> 标签：openstack, openstack-nova, openstack-horizon

我已经在本地机器上安装了 OpenStack。我能够执行所有功能，例如上传图像、创建和启动实例、关联浮动 IP 等。但我无法创建超过 2 GB 的容量。如果我创建任何超过 2 GB 的卷，那么它会在我的仪表板上显示“错误”状态。创建的空间少于 2 GB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:57:08.097

听起来您的 VG 可能只有 2G 大小？尝试更深入地查看卷日志，或执行 vgs/lvs 并查看可用容量与已用容量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T16:22:20.947

我遇到了同样的问题。[这就是我解决它的方法。](http://udaraliyanage.wordpress.com/2014/05/23/openstack-increase-volume-capacity/)

执行“vgs”命令查看服务器的卷组。您将看到类似于下面的内容，即具有 VSize 2GB 的卷组。

```
$vgs
  VG            #PV #LV #SN Attr   VSize   VFree
  stack-volumes   3   1   0 wz--n-  10.00g 10.00g
  stratos1        1   2   0 wz--n- 931.09g 48.00m 
```

这应该是 Openstack 用来创建卷和卷快照的卷组 (stack-volumes)。为了创建更多卷和更大的卷，您必须增加卷组的容量。在这种情况下，要扩展的卷组是“stack-volumes”。

让我们创建一个 50GB 的分区。

```
dd if=/dev/zero of=cinder-volumes bs=1 count=0 seek=50G
losetup /dev/loop3 cinder-volumes
fdisk /dev/loop3 
```

在 fdisk 提示符下，输入以下命令：

```
n
p
1
ENTER
ENTER
t
8e
w 
```

创建物理卷

```
root@stratos1:~# pvcreate /dev/loop3
  Physical volume "/dev/loop3" successfully created 
```

扩展卷组“stack-volumes”。

```
root@stratos1:~# vgextend stack-volumes  /dev/loop3 
```

卷组“stack-volumes”成功扩展

让我们看看有关可用物理设备的详细信息。您将看到列出的新设备。

```
root@stratos1:~# pvs
  PV         VG            Fmt  Attr PSize   PFree
  /dev/loop0 stack-volumes lvm2 a-    10.01g 10.01g
  /dev/loop3 stack-volumes lvm2 a-    50.00g 50.00g 
```

现在通过执行 vgdisplay 命令检查卷组的详细信息。您将看到卷组中有更多可用空间（60GB，因为我们增加了 50GB）`stack-volumes`。

```
root@stratos1:~# vgdisplay
  --- Volume group ---
  VG Name               stack-volumes
  System ID             
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  303
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                1
  Open LV               1
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               60.00 GiB
  PE Size               4.00 MiB
  Total PE              23040
  Alloc PE / Size       7680 / 30.00 GiB
  Free  PE / Size       15360 / 60.00 GiB
  VG UUID               bM4X5R-hC3V-zY5F-ZMVI-s7dz-Kpiu-tPQ2Zt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T12:34:15.440

如果您使用的是 DevStack 实例，则默认卷支持文件为 5GB。通过在命令行上运行“pvs”或“vgs”（作为 root 用户）检查您的卷备份文件有多少是空闲/使用的。

# java - 如何更改实习生 Android 可绘制对象的颜色？

> ID：15835218
> 
> 赞同：3
> 
> 时间：2013-04-05T13:27:32.747
> 
> 标签：java, android, colors, icons, drawable

我试图将 Android 的实习生图标（anrdoid.R.drawable.bla）放入 ImageButton 中，我想更改图标的颜色（不是背景！），但它不像我想要的那样工作。

这是我尝试过的：

我的布局中的 ImageButton：

```
<ImageButton
    android:id="@+id/imageButton1"
    android:layout_marginTop="100dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/background"
    android:src="@android:drawable/ic_lock_silent_mode" /> 
```

我在活动中尝试过的内容：

```
Drawable myIcon = getResources().getDrawable( android.R.drawable.ic_lock_silent_mode); 
    ColorFilter filter = new LightingColorFilter( R.color.blue, R.color.blue);
    myIcon.setColorFilter(filter); 
```

无论我为 LightingColorFilter 尝试了什么值，它总是给出相同的结果。Imagebutton 内的图标变暗。但这不是我想要的。我只是想从我的colors.xml 中应用一种颜色，但不知何故不起作用。

这甚至是我要去的正确方向吗？或者是否还有其他操作（我并不是说在 Photoshop 中为自己着色并将它们放入 drawables 文件夹）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:39:39.223

这对我有用，例如它将涂成深灰色：

```
ImageButton imgBtn = (ImageButton) findViewById(R.id.imageButton11); // image button
            imgBtn.setColorFilter(getResources().getColor(android.R.color.darker_gray), Mode.SRC_ATOP); 
```

# java - 如何将 Skydrive API 的 LiveConnectClient 和会话对象存储在 sharedpreferences 中

> ID：15835221
> 
> 赞同：0
> 
> 时间：2013-04-05T13:27:37.917
> 
> 标签：java, android, live-sdk

我可以在 android 中使用 skydrive API 登录到 skydrive。现在我想在另一个活动中使用相同的会话对象和 liveconnectclient 对象。我怎样才能做到这一点？

```
public void onAuthComplete(LiveStatus status, LiveConnectSession session,Object userState)
    {
        if (status == LiveStatus.CONNECTED)
        {

            client = new LiveConnectClient(session);

            Log.i("message", client.toString());
            // StoreSkydriveSession(session);
            txtskydrive.setText("Connected");
            skydrivefolder.setEnabled(true);
            isSkydriveConnected=true;
        } 
        else
        {
            txtskydrive.setText("Not Connected");
            Toast.makeText(getApplicationContext(), "Not Signed In",
                    Toast.LENGTH_LONG).show();
            // this.resultTextView.setText("Not signed in.");
            client = null;
        }
    } 
```

我能够登录。现在我应该如何以及在哪里存储客户端和会话对象，以便我可以在其他活动中使用它。

我曾尝试使用 bean 来设置和获取值，但是当我尝试获取它时，它会引发空指针异常。

我尝试将其存储在共享首选项中，但我无法将其从字符串转换为 LiveConnectClient 对象。

谢谢 ：）

编辑：

我认为我们可以使用 GSON ... Gson（也称为 Google Gson）是一个开源 Java 库，用于将 Java 对象序列化和反序列化到（和从）JSON

```
SharedPreferences mPrefs = getPreferences(MODE_PRIVATE);

For save

 Editor prefsEditor = mPrefs.edit();
 Gson gson = new Gson();
 String json = gson.toJson(client); //LiveConnectClient Object
 prefsEditor.putString("MyObject", json);
 prefsEditor.commit();
For get

Gson gson = new Gson();
String json = mPrefs.getString("MyObject", "");
LiveConnectClient obj = gson.fromJson(json, MyObject.class); 
```

我认为这应该工作....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:46:29.150

如果您需要在不同的活动中访问相同的对象，那么最简单的方法是 - 只需创建某种处理程序类：

```
class LiveConnectClientHandler{

public static LiveConnectClient client;

} 
```

然后当你得到它时：

```
public void onAuthComplete(LiveStatus status, LiveConnectSession session,Object userState) {
if (status == LiveStatus.CONNECTED) {
LiveConnectClientHandler.client = new LiveConnectClient(session); 
```

因此，在其他活动中，您可能会通过 LiveConnectClientHandler.client 获得此信息。

但我不确定这是正确的方法。

首先，应该将数据从一个活动发送到另一个活动。

其次，您可能有其他方法来获取 LiveConnectSession 对象吗？因为对于一些简单的字符串资源，比如access_token，它只能是shell。

# scala - 我怎样才能展平这个 Future[T] 结构？

> ID：15835222
> 
> 赞同：12
> 
> 时间：2013-04-05T13:27:41.713
> 
> 标签：scala, asynchronous, future

给定以下示例：

```
 val handler : Connection = new DatabaseConnectionHandler()
  val result : Future[Future[Future[Option[ResultSet]]]] = handler.connect
    .map( (parameters) => handler )
    .map( connection => connection.sendQuery("BEGIN TRANSACTION SERIALIZABLE") )
    .map( future => future.map( query => query.rows ) )
    .map( future => handler.sendQuery("COMMIT").map( query => future ) ) 
```

是否有可能将其展平以`Future[Option[ResultSet]]`在 Scala 中的未来结构中的未来中接收一个而不是这个未来？

我目前正在使用 Scala 的 2.10 Future 和 Promise，但我找不到解决方法。我知道我可以使用嵌套回调，但我宁愿避免这种情况，因为代码看起来很糟糕。

`Connection`特征在[这里](https://github.com/mauricio/postgresql-netty/blob/master/src/main/scala/com/github/mauricio/postgresql/Connection.scala)定义。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-05T13:37:42.937

每当您`map`使用类型参数时，`A => Future[B]`您都应该真正使用`flatMap`.

代码将是这样的：

```
 val connection : Connection = new DatabaseConnectionHandler( DefaultConfiguration )
  val result: Future[QueryResult] = connection.connect
    .flatMap( _ => connection.sendQuery("BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ") )
    .flatMap( _ => connection.sendQuery("SELECT 0") )
    .flatMap( _ => connection.sendQuery("COMMIT").map( value => query ) ) 
```

或者，您可以使用理解。[它`flatMap`为你](http://docs.scala-lang.org/tutorials/FAQ/yield.html)使用。

```
val connection : Connection = new DatabaseConnectionHandler( DefaultConfiguration )
val result: Future[QueryResult] = for {
  _ <- connection.connect
  _ <- connection.sendQuery("BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ")
  _ <- connection.sendQuery("SELECT 0")
  queryResult <- connection.sendQuery("COMMIT").map( value => query )
} yield { queryResult } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T13:38:00.337

您应该在这里使用 a`flatMap`而不是 a `map`。

`flatMap`期望一个函数`fun`返回一个未来，`g`并返回`h`持有来自返回的未来的值的`g`未来`fun`。

此外，请考虑在`for`-comprehension 中编写此内容，请参阅[此处](http://docs.scala-lang.org/overviews/core/futures.html)的方法。

# javascript - 在 Datepicker 文本字段中输入文本

> ID：15835223
> 
> 赞同：2
> 
> 时间：2013-04-05T13:27:43.450
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我正在使用 jQueryUI 将日期选择器添加到文本字段。一切正常，但正因为如此，我无法在文本字段中输入任何文本。我只能通过日期选择器添加日期。

但我希望用户也能够`NOW` 在文本字段中输入内容。但是当前输入手动文本被阻止，如您在此示例小提琴中所见：http: [//jsfiddle.net/Kugzd/](http://jsfiddle.net/Kugzd/)

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:29:50.017

只需添加`constrainInput: false`到您的日期选择器选项

```
$(function() {
    $('.date').datepicker({
        constrainInput: false
    });
}); 
```

检查[文档](http://api.jqueryui.com/datepicker/#option-constrainInput)

演示：http: [//jsfiddle.net/Kugzd/2/](http://jsfiddle.net/Kugzd/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:33:25.563

除了使用`constraintInput`选项（如另一个答案所述）之外，请考虑将 datepicker 与[Date.js](http://www.datejs.com/)库结合使用，它允许您使用诸如 , 之类的单词和表达式 `today`，`tomorrow`并将`next Tuesday`它们转换为日期。

# dde - 无法使用 python 建立 DDE 连接。win32ui 似乎无法正常工作

> ID：15835228
> 
> 赞同：3
> 
> 时间：2013-04-05T13:28:18.837
> 
> 标签：dde

我是 Python 新手（2.7 版）。很长一段时间以来，我一直在使用一些 Excel 工作簿，这些工作簿使用 DDE 功能来捕获“实时市场数据”——由一个市场数据提供者（“Matriks”，如果有的话）提供服务。

为了简化我的整体流程，我决定绕过这个 excel 工作簿来进行数据捕获，而是决定使用 python 代码来执行相同的任务。

问题是，1）当我使用 Pythonwin 运行代码（如下提供）时，我得到“错误：无法创建服务器”。

2) 当我使用 IDLE 运行这个非常简单的代码时，我得到“ImportError: This must be an MFC application - try 'import win32ui' first”。

（当然，我下载并运行了 win32ui。）

任何帮助表示赞赏。

```
# DDE code
# excel equivalent of this code is: =MTX|DATA!EURUSD.SON
import win32ui
import dde

s=dde.CreateServer()
s.Create("MTX")
c=dde.CreateConversation(s)
c.ConnectTo("DATA","SON")
c.Connected()
c.Request("EURUSD")

# returns
# Traceback (most recent call last):
#  File "C:\IQTrader\_script\_obj\DDEClient.py", line 12, in <module>
#   import dde
# ImportError: This must be an MFC application - try 'import win32ui' first 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:12:28.230

问题已解决。错误的最基本原因是 pywin 模块。

对于那些面临同样问题的人： 1\. 完全删除 pythonwin 和 pywin32_system32 文件夹（大概在 C:\Python27\Lib\site-packages 下）

2.检查你的pywin32版本；对于使用 v2.7 的用户，它应该是 214（不是 218）

3.从适当的资源下载pywin32-214.win32-py2.7（一个是这个：http: [//sourceforge.net/projects/pywin32/files/pywin32/Build%20214/](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20214/)）

4.一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T21:12:24.517

我有一个类似的问题。我不得不：

1.  卸载 Python 2.7 64 位
2.  安装 Python 2.7 32 位
3.  使用 pywin32 版本 214
4.  以管理员身份运行 cmd.exe，以便 c.ConnectTo() 连接成功

但是，我仍然遇到一个奇怪的问题，即我必须同时打开 Excel 并使用一个包含值 =MTX|DATA!EURUSD.SON 的单元格，以便 python 脚本返回有效的报价。否则，我只会得到“N/A”作为返回值。

@Aykut 你也遇到过这个问题吗？

# bash - while循环中的bash“读取行”永远不会结束

> ID：15835231
> 
> 赞同：2
> 
> 时间：2013-04-05T13:28:21.570
> 
> 标签：bash

我有以下代码从文件中读取行并输出计数：

```
while read -u 3 -r line; do
    echo $i
    i=$(( i + 1))
done 3<"$IN_FILE" 
```

（我想在循环内做更多，但这说明了问题）。

这个循环对我来说永远不会结束。我的`IN_FILE`包含 2880 万行（用 确认`wc -l`），但在我手动杀死它之前，它会继续运行并且输出计数高达 ~35M。如果我使用 head/tail 创建这个文件的一个小样本，它运行得很好并按预期终止。

有谁知道可能导致这种情况的原因？我的文件可能包含一些特殊字符会导致重定向进入循环吗？

如果相关，我正在 Mac OS X 终端中运行这个 bash 脚本......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:30:55.107

也许尝试使用`split -l 1000000 $IN_FILE`将其分解为 29 个文件，看看其中是否有任何奇怪的行为？

# url-rewriting - Express JS：重写 url 看起来像 /article_name-id.html

> ID：15835232
> 
> 赞同：0
> 
> 时间：2013-04-05T13:28:22.563
> 
> 标签：url-rewriting, express

我正在建立一个新版本的网站，我必须负责旧网址看起来像： [http ://website.com/article_title_rewrited-article_id.html](http://website.com/article_title_rewrited-article_id.html)

实际上，我尝试做类似的事情：

```
app.get('/:title\-:id([0-9]).html', function...); 
```

但它当然失败了！

我可以使用 expressjs 进行这种类型的重写，还是使用另一种方法来移植 url 重写？

提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:31:14.370

我看到您正在尝试使用 Express url 路由解析器以及 REGEX 表达式，不幸的是这不起作用，您必须使用其中一个。

删除字符串并使用 REGEX 模式放置。然后 REGEX 表达式中的组将在 req.params[0] 和 req.params[1] 中可用。

```
app.get(/(.+)\.html/, function(req, res, next) {
  res.redirect(req.params[0].substring(0, req.params[0].length - 5)); // -5 for length of '.html'
}); 
```

我相信应该（未经测试）对所有 .html 扩展名进行一般排序，如果这可以是一个有用的指南:)

# java - 允许父级处理鼠标事件

> ID：15835241
> 
> 赞同：2
> 
> 时间：2013-04-05T13:28:53.340
> 
> 标签：java, swing

我将 a 添加`JPanel`到 a `JRadioButton`- 以便我可以在单选按钮中显示我想要的任何内容。

这一切都按预期工作。但是为了允许文本换行，我使用了 a`JTextArea`并将其添加到`JPanel`单选按钮中包含的内容中。

现在我有一个问题，如果用户单击`JTextArea`，则使用 ，`JTextArea`因此`mouseEvent`单选按钮没有响应（它没有“选择”）。

有没有办法让`JTextArea`忽略鼠标点击，以便父母可以处理它？

我尝试将`JTextArea`' 的侦听器添加到`radioButton`。

我还尝试完全删除它的侦听器，但是这两次尝试都失败了。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:30:45.060

**强者当心**

大多数 JSomething 并不*打算*用作容器，即使它是可能的——无论如何，这样做的结果或多或少在视觉和行为上是不确定的！

也就是说，最近做了它，以实现类似于 Windows 任务对话框的东西。如果要求包括保持按钮可点击（以及为什么你会误用它作为容器:-) 主要问题（布局分开）是使所有添加的组件完全鼠标透明。这比预期的要困难得多。最低要求是不允许添加 mouseListener 并禁用接受 mouseEvents：

```
final JTextArea area = new JTextArea("replacement ..") {

    @Override
    public synchronized void addMouseListener(MouseListener l) {
        LOG.info("adding here ...?");
    }

    @Override
    public synchronized void addMouseMotionListener(
            MouseMotionListener l) {
    }

    @Override
    public synchronized void addMouseWheelListener(
            MouseWheelListener l) {
    }

    @Override
    public void addNotify() {
        disableEvents(AWTEvent.MOUSE_EVENT_MASK | 
                AWTEvent.MOUSE_MOTION_EVENT_MASK | 
                AWTEvent.MOUSE_WHEEL_EVENT_MASK);
        super.addNotify();
    }
}; 
```

另外确保它不可聚焦

```
area.setEditable(false);
area.setFocusable(false);
area.setRequestFocusEnabled(false); 
```

加上取消注册拖动和工具提示

```
ToolTipManager.sharedInstance().unregisterComponent(area);
area.setDragEnabled(false); 
```

尽管如此，前面可能仍然会有惊喜，fi 调用以下两次（即再次禁用和启用），这将在内部重新启用 mouseEvent：

```
area.setAutoscrolls(!area.getAutoscrolls()); 
```

所以说到底，我们可能会侥幸逃脱——但永远不能完全确定我们成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:25:17.677

那这个呢？创建自己的 MouseListener 并将其添加到 TextArea

```
JPanel p = new JPanel();
JTextArea t = new JTextArea("line \n line");
t.addMouseListener(new MyMouseListener());
p.add(t);
jRadioButton1.add(p);
jRadioButton1.addMouseListener(new MyRadioButtonMouseListener()); 
```

在 MyMouseListener Dispatch 事件中

```
private class MyMouseListener implements MouseListener {

    @Override
    public void mouseClicked(MouseEvent e) {
        Component source = (Component) e.getSource();
        source.getParent().getParent().dispatchEvent(e); // 2x getParent() because JTextArea->JPanel->JRadio
    }
    .
    .
    .
    } 
```

最后是 RadioButtonMouseListener

```
private class MyRadioButtonMouseListener implements MouseListener {

    @Override
    public void mouseClicked(MouseEvent e) {
        System.out.println("CLICK ON RADIOBUTTON !!");
    }
.
.
.
} 
```

# html - 带有悬停边框的 PIE

> ID：15835245
> 
> 赞同：0
> 
> 时间：2013-04-05T13:29:14.080
> 
> 标签：html, css, css3pie

有一个简单的例子： http: [//fsou1.ru/files/verstka_examples/14/index2.html](http://fsou1.ru/files/verstka_examples/14/index2.html)

我使用 PIE.js 在 IE 中附加边框半径，但是当我在悬停事件上添加“边框：30px 纯黑色”时，PIE.js 不想围绕这个添加的边框！

是否有任何解决方案可以在悬停事件上添加边框？

![在此处输入图像描述](https://i.stack.imgur.com/mI1UO.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:48:20.140

添加一个`span{ border: 30px solid transparent }`，然后做`span:hover{ border-color: #000 }`. 那应该解决它。问题是，通过仅在悬停时添加该边框，您基本上是在要求 PIE 重新绘制元素，并且看到它基本上只是一个 shiv，它不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:36:08.277

如果我没有完全迷失，这是 PIE 在页面渲染时运行以将元素添加到 DOM 的问题，因此它可以伪造边框半径的外观。

PIE 默认情况下不监听任何事件（我不确定是否可以这样做）。

# javascript - 嵌套对象实例

> ID：15835247
> 
> 赞同：1
> 
> 时间：2013-04-05T13:29:20.487
> 
> 标签：javascript

我有嵌套对象和原型设计的问题。在以下示例中，我正在创建对象“o”的 2 个实例

```
var o = function(){};

o.prototype = {
val : 1,
test : {
        val2 : 1
    }
};

var t1 = new o();
var t2 = new o();

t1.val = 5;
t2.val = 20;

t1.test.val2 = 5;
t2.test.val2 = 10;

console.log(t1.val) //5
console.log(t2.val) //20

console.log(t1.test.val2) //10
console.log(t2.test.val2) //10 
```

我的问题是为什么 t1.test.val2 === t2.test.val2，其中 t1 和 t2 是不同的变量，它们不应该完全分开吗？

如何修复该代码以将所有对象和变量分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:34:04.750

当你定义一个新对象时，原型被复制，但原型中的对象并*没有被深度复制*；它们是*通过引用*复制的。因此，每个新`o`实例都有一个对原型*完全相同的*成员对象的复制*引用。*

 *相反，`test`在构造函数中创建对象，以便每个实例都有自己的副本：

```
var o = function(){
    this.test = {
        val2 : 1
    }
};

o.prototype = {
    val : 1   // this is fine, since primitive values aren't copied by reference
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:34:13.257

发生这种情况是因为您正在修改共享对象的属性（即原型）。您的代码与以下内容基本相同：

```
var val = 1;
var test = {
    val2 : 1
};

var t1 = {
    val: val,
    test: test
};
var t1 = {
    val: val,
    test: test
};

t1.val = 5; // changing property
t2.val = 20; // changing property

t1.test.val2 = 5; // changing property of shared object
t2.test.val2 = 10; // changing property of shared object 
```

要解决这个问题，请不要使用原型，即

```
var o = function(){
    this.val = 1;
    this.test = {
        val2 : 1
    };
    // test is no longer shared, exists per instance
}; 
```*

# .net - windows重启后如何自动启动自己的可执行文件？

> ID：15835248
> 
> 赞同：2
> 
> 时间：2013-04-05T13:29:24.223
> 
> 标签：.net, windows, winforms, registry, winreg

假设我有一个在 Windows 上运行的 C# .NET 2.0+ 应用程序。并且在某个特定时间点，它会强制 Windows 重新启动。windows重新启动后如何自动启动此应用程序以继续程序做一些工作？我需要以某种方式在代码中做到这一点，但我不知道如何。指出我，请提供有关此的一些信息，否则某些代码会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:30:40.567

有几种选择。

1 将其注册为 Windows 服务。

2 在开始按钮的启动部分放置一个链接

3 在注册表中创建一个条目`(HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run)`

最好的是第一个，因为这是自动启动应用程序的推荐方法。您将受益于：

*   **services.msc**中的标准控制
***   允许您监视 Windows 服务状态的应用程序*   Msbuild 或 powershell 命令允许您轻松地与您的服务交互，以便作为持续集成过程的一部分进行部署。**

 **但是您的应用程序将需要一些更改，并且必须是控制台应用程序。检查此[链接](http://msdn.microsoft.com/en-GB/library/aa984464%28v=vs.71%29.aspx)以使自己有所了解。如果您有一个 winforms 应用程序，请选择选项 2 或 3（3 更好）**

# java - 更改 eclipse.ini 文件后 Eclipse 无法创建 Java 虚拟机

> ID：15835250
> 
> 赞同：2
> 
> 时间：2013-04-05T13:29:25.380
> 
> 标签：java, eclipse, configuration, configuration-files

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-showlocation
-showsplash
org.eclipse.platform
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-vm
C:/Program Files/Java/jdk1.7.0_09/jre/bin/server/jvm.dll
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Dhelp.lucene.tokenizer=standard
-Declipse.p2.unsignedPolicy=allow
-Xms512m
-Xmx384m
-Xss4m
-XX:PermSize=128m
-XX:MaxPermSize=384m
-XX:CompileThreshold=5
-XX:MaxGCPauseMillis=10
-XX:MaxHeapFreeRatio=70
-XX:+CMSIncrementalPacing
-XX:+UnlockExperimentalVMOptions
-XX:+UseG1GC
-XX:+UseFastAccessorMethods
-Xincgc 
-XX:-DontCompileHugeMethods 
-XX:MaxInlineSize=1024  
-XX:FreqInlineSize=1024 
-Dcom.sun.management.jmxremote
-Dorg.eclipse.equinox.p2.reconciler.dropins.directory=C:/Prog/Java/eclipse_addons
-Dsun.lang.ClassLoader.allowArraySyntax=true
-debug
org.eclipse.equinox.p2.core/debug=true
org.eclipse.equinox.p2.core/reconciler=true 
```

这是我更改后的 eclipse.ini 文件。这是我更改之前的 eclipse.ini 文件：

```
 -startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m 
```

有人有什么建议吗？我尝试更改： -Dosgi.requiredJavaVersion=1.6 -Xms512m 到 -Dosgi.requiredJavaVersion=1.7 -Xms1024m 没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:39:04.990

一个原因是您的 -Xms 参数（初始堆大小）定义了比 -Xmx 参数（最大堆大小）更大的堆大小，您应该修复它。如果修复后问题仍然存在，请尝试恢复到原始 eclipse.ini 文件并一一应用参数以查看哪个是另一个“错误的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:52:02.833

你似乎一口气改变了很多事情。

作为一般策略，我建议恢复到原始设置，然后一次更改一项，从最重要的一项开始……或最有可能起作用的一项。

# android - 创建 AVD 时如何更改 Android 版本？

> ID：15835256
> 
> 赞同：1
> 
> 时间：2013-04-05T13:29:46.037
> 
> 标签：android, eclipse, avd

我在 Eclipse 中启动了 android 项目，并在项目选项中选择了 android 版本 4.2.2。现在，当我尝试创建 AVD 时，无法选择 CPU/ABI，因为没有为此目标安装系统映像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:38:55.433

所以打开`SDK Manager`并下载所需的`CPU image`，`SDK version`你想拥有：

![在此处输入图像描述](https://i.stack.imgur.com/1fKqf.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:51:18.880

您可以在 android manifest 中更改它，我们可以选择根据这样的 api 级别更改版本...

安卓：m​​inSdkVersion="10"

android:targetSdkVersion="17"/> 例如。如果你想保留你的基本版本 2.3.3 那么上面的代码是给你的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:42:18.713

它在名为**“AndroidManifest.xml”**的项目文件夹中更改

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="9" /> 
```

将targetsdkversion更改为您创建的兼容模拟器

**或者** 如果你想在 4.2 中运行它

从**Android SDK Manager下载****4.2 版**的最新 API

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:42:55.547

右键单击您的项目

1.  选择属性
2.  从左侧选择 Android
3.  选择您拥有系统映像的项目构建目标，然后按 OK

[![](https://i.imgur.com/nwHddla.png?1 "由 imgur.com 主办")](https://imgur.com/nwHddla)**

# groovy - 如何在 Griffon 的 textField 上添加自动生成的 id？

> ID：15835263
> 
> 赞同：0
> 
> 时间：2013-04-05T13:30:03.157
> 
> 标签：groovy, griffon

我试过一个关于自动生成 id 的代码。我想在 JTextField 上尝试一下，但我不知道应该把它放在哪里。

这是我的代码：

--PembelianController.groovy--

```
String generateID() {
        String date = DateTime.now().toString("yyyyMMdd")
        List list = findAllPembelian([orderBy: 'noNota', orderDirection: 'desc'])
        Integer num = list.size()==0? 0: list[0].kode[12..-1].toInteger() + 1
        return String.format("NT00%s%04d", date, num)
} 
```

--PembelianView.groovy--

```
label('No Nota:')
textField(id: 'noNota', columns: 20, text: bind('noNota', target: model, mutual: true), errorPath: 'noNota')
errorLabel(path: 'noNota', constraints: 'wrap') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:13:55.530

嗯，这取决于你什么时候想做。您可以随时分配`textField.text = generateID()`。您可以在绑定期间分配值

```
textField(id: 'noNota', columns: 20, errorPath: 'noNota',
      text: bind('noNota', target: model, mutual: true, value: generateID())) 
```

# matlab - 如何在另一个函数中使用 matlab 函数的输出？

> ID：15835264
> 
> 赞同：0
> 
> 时间：2013-04-05T13:30:05.907
> 
> 标签：matlab, function

我正在为我的学位项目开发虹膜识别系统（请记住，我没有 Matlab 的背景，也没有任何课程或任何内容，但我必须用它来实施我的项目><）。

我想问一下，如何在另一个函数中使用 Matlab 函数的输出？就像如何获取函数的输出，比如说“分段”函数，然后将其传递或在另一个函数中使用它，例如“标准化”。

有什么方法可以将它存储在变量中或类似其他编程语言的东西中？我希望你们明白我的意思&我希望我能得到答案:)

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:51:35.163

花 3 分钟阅读任何 matlab 入门指南，

例如这个

[http://alice.nc.huji.ac.il/~hvuag/neuromath/math/Matlab_Tutorial.pdf](http://alice.nc.huji.ac.il/~hvuag/neuromath/math/Matlab_Tutorial.pdf)

Matlab 是巨大的，它可以让你花费数年时间去探索每一个角落，好处是，你可以从第 2 分钟就开始工作。简单的事情非常简单。

回答你的问题，变量分配是微不足道的

```
a=max(1,2)
b=max(a,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:36:15.323

只需将输出参数添加到您的第一个函数，并将输入参数添加到您的第二个函数，如下所示：

```
function theOutput = doSomething()
    theOutput = someValue; 
```

然后，第二个功能：

```
function doSomethingElse(theInput)
    disp(theInput); % Will print value of someValue returned from first function, assuming you call doSomethingElse passing this value 
```

但是，如果您不熟悉这些基本概念，我建议您通读 MATLAB 语言。请记住，[文档](http://www.mathworks.co.uk/help/matlab/)包含有关大多数主题的大量信息。对于这个特定问题，请参阅[函数关键字](http://www.mathworks.co.uk/help/matlab/ref/function.html)文档。

# .net - 在 WinForms.NET 中，如何正确更新 UI 以响应后台任务

> ID：15835265
> 
> 赞同：1
> 
> 时间：2013-04-05T13:30:07.673
> 
> 标签：.net, winforms, task, background-thread

我使用以下代码

```
var UiScheduler = TaskScheduler.FromCurrentSynchronizationContext();
CancellationToken cancellationToken = cancellationTokenSource.Token;
const TaskContinuationOptions continuationOptions = TaskContinuationOptions.OnlyOnRanToCompletion;

Task<string> task = Task<string>.Factory.StartNew(() => getSomeText(), cancellationToken);
task.ContinueWith(t => label.Text = t, cancellationToken, continuationOptions, UiScheduler); 
```

在一些后台任务之后更新 UI。但是，如果在任务完成之前关闭了表单，那么无论如何都会完成更新。是否有一些最佳实践来避免这种情况？当表单已经消失时，一些控件开始出现错误以响应使用它们。我现在检查“Disposing”和“IsDisposed”以避免这种情况，但我不确定这是否是正确的方法以及是否可能存在其他线程问题/竞争条件。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:39:17.980

您可以处理`FormClosing`事件以拦截表单的关闭。其中`FormClosingEventArgs`包含有关表单关闭原因的信息，例如用户请求、系统关闭等。然后您可以通过取消任务或关闭表单来响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:45:56.923

在更新 UI 之前检查`Form.IsDisposed` *UI 线程*是可行的方法，并且将避免任何竞争条件。

如果您`FormClosing`按照 John Willemse 的建议处理事件，您将能够请求取消任务 - 但仍然可能存在竞争条件，这意味着任务将完成并更新 UI。

# java - 使用 Mockito 验证递归方法调用的最佳实践

> ID：15835266
> 
> 赞同：4
> 
> 时间：2013-04-05T13:30:17.090
> 
> 标签：java, unit-testing, mocking, mockito

考虑这个示例类：

```
public class Processor {
  private final Dependency dependency;

  public Processor(Dependency dependency) {
    this.dependency = dependency;
  }

  public void processUsers(List<Integer> userIds, int attempt) {
    if (attempt == 0) {
      //log initial processing
    } else if (attempt > 0 && attempt < 5) {
      //log retry processing
    } else {
      //log processing limit exceeded
      return;
    }
    List<Integer> failedIds = new ArrayList<Integer>();
    for (Integer userId : userIds) {
      try {
        processUser(userId);
      } catch (Exception ex) {
        //logging
        failedIds.add(userId);
      }
    }
    if (failedIds.isEmpty()) {
      //log ok
    } else {
      processUsers(failedIds, attempt + 1);
    }
  }

  public void processUser(Integer userId) throws Exception{
    //dependency can throw exception
    dependency.call();
  }
} 
```

我想验证`processUsers`抛出异常时该方法调用自身。这是我的暴躁测试：

```
public class ProcessorTest {
  @Test
  public void processShouldCallItselfWithFailedSublistWhenProcessingFails(){
    Dependency dependency = mock(Dependency.class);
    when(dependency.call()).thenThrow(Exception.class);
    Processor processor = new Processor(dependency);
    processor.processUsers(Arrays.asList(new Integer[]{1,2,3}), 0);
    //need to verify processor will call #processUsers recursively
    //because the dependency thrown Exception, how?
  }
} 
```

在某些情况下，验证该方法以递归方式调用自身的最佳实践是什么？

我正在使用 TestNG + Mockito 和这种冗长的语言称为`JAVA`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:38:11.820

`dependency.call()`您可以验证调用的次数。这将告诉您重试有效 - 仅通过调用次数：

```
@Test
public void processShouldCallItselfWithFailedSublistWhenProcessingFails() {
    Dependency dependency = mock(Dependency.class);
    when(dependency.call()).thenReturn(1, 2).thenThrow(Exception.class).
        thenReturn(4);
    Processor processor = new Processor(dependency);
    processor.processUsers(Arrays.asList(new Integer[]{1, 2, 3}), 0);
    verify(dependency, times(4)).call();
} 
```

这会告诉你重试最终失败了，异常太多：

```
@Test
public void processShouldFailAfterTooManyRetries() {
    Dependency dependency = mock(Dependency.class);
    when(dependency.call()).thenThrow(Exception.class);
    Processor processor = new Processor(dependency);
    final List<Integer> userIds = Arrays.asList(new Integer[]{1, 2, 3});
    final int expectedRetries = 5;
    processor.processUsers(userIds, 0);
    verify(dependency, times(expectedRetries * userIds.size())).call();
} 
```

如果对依赖项的调用实际上使用了 userId，那么您实际上可以检查所有预期的调用是否`dependency.call(int userId)`发生。这会告诉你，如果有足够的重试次数，它们都经历了：

```
@Test
public void processShouldCallItselfWithFailedSublistWhenProcessingFails() {
    Dependency dependency = mock(Dependency.class);
    when(dependency.call(anyInt())).
        thenReturn(1, 2).thenThrow(Exception.class).thenReturn(4);
    Processor processor = new Processor(dependency);
    processor.processUsers(Arrays.asList(new Integer[]{1, 2, 3}), 0);
    verify(dependency).call(1);
    verify(dependency).call(2);
    verify(dependency, times(2)).call(3);
}

@Test
public void processShouldFailAfterTooManyRetries() {
    Dependency dependency = mock(Dependency.class);
    when(dependency.call(anyInt())).thenThrow(Exception.class);
    Processor processor = new Processor(dependency);
    final List<Integer> userIds = Arrays.asList(new Integer[]{1, 2, 3});
    final int expectedRetries = 5;
    processor.processUsers(userIds, 0);
    for (Integer userId : userIds) {
        verify(dependency, times(expectedRetries)).call(userId);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:33:05.137

不确定最佳实践，但您可以通过验证方法被调用的次数来实现

```
 int invocationCount = 5; // Or any other desired number
 verify(processor,times(invocationCount)).processUsers(); 
```

# c++ - QThread 和 QTimer

> ID：15835267
> 
> 赞同：3
> 
> 时间：2013-04-05T13:30:17.377
> 
> 标签：c++, qt, qthread, qtimer

我正在开发一个使用 Qt 4.6 开发的应用程序。

我想创建一个在单独线程中计数的自定义计时器。但是，我希望这个计时器能够向主线程发送信号。

我将 QThread 子类化，但它似乎不起作用。

这是 Timer.h：

```
#ifndef TIMER_H
#define TIMER_H

#include <QtCore/QObject>
#include <QtCore/QThread>
#include <QtCore/QTimer>

class Timer : public QThread
{
    Q_OBJECT
public:
    explicit Timer(QObject *parent = 0);
    ~Timer();

    // true if the timer is active
    bool isCounting();

    // start the timer with a number of seconds
    void startCounting(int value = 300);
    void stopCounting();

    // the number of seconds to reach
    int maximum();

    // the current value of the timer
    int value();

    // elapsed time since the timer has started
    int elapsedTime();

signals:
    // sent when the timer finishes to count
    void timeout();
    // an event is emited at each second when the timer is active
    void top(int remainingSeconds);

protected:
    // launch the thread
    //virtual void run();

private slots:
    // decrements the remaining time at each second and emits top()
    void timerEvent();

private:
    QTimer* _timer;
    // remaining time
    int _left;
    // number of seconds at timer startup
    int _maximum;
};

#endif // TIMER_H 
```

和 Timer.cpp：

```
#include "Timer.h"

Timer::Timer(QObject *parent) :
    QThread(parent)
{
    _timer = new QTimer(this);
    _maximum = 0;
    _left = 0;
    connect(_timer, SIGNAL(timeout()), this, SLOT(timerEvent()));
}

Timer::~Timer()
{
    delete _timer;
}

bool Timer::isCounting()
{
    // test if timer still active
    return _timer->isActive();
}

void Timer::startCounting(int value)
{
    qDebug() << QString("Start timer for %1 secs").arg(QString::number(value));
    if(_left != 0 || _timer->isActive())
    {
         _timer->stop();
    }

    _maximum = value;
    _left = value;

    // emit the first top
    emit top(_left);

    // start the timer: 1000 msecs
    _timer->start(1000);

    // start the thread
    start();
}

void Timer::stopCounting()
{
    qDebug() << QString("Stopping timer at %1 secs => %2 secs remaining.").arg(QString::number(elapsedTime()), QString::number(_left));
    // stop timer
    _timer->stop();
    _left = 0;
    _maximum = 0;
    // kill thread
    terminate();
}

int Timer::maximum()
{
    return _maximum;
}

int Timer::value()
{
    return _left;
}

void Timer::timerEvent()
{
    qDebug() << "Timer event";
    if(--_left == 0)
    {
        // stop timer
        _timer->stop();
        // emit end of timer
        emit timeout();
        // stop thread
        terminate();
    }
    else
    {
        // emit a signal at each second
        emit top(_left);
    }
}

int Timer::elapsedTime()
{
    return (_maximum - _left);
} 
```

**编辑**

我意识到我试图移动到另一个线程的对象实际上是一个单例。这可能会导致问题（[请参见此处](http://en.wikipedia.org/wiki/Singleton_pattern#Implementation)）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T13:51:50.100

在这种特殊情况下，您不需要子类 QThread。一般来说，除非你确定它是你需要的，否则不要继承 QThread。

这是一个快速示例，如何在线程中设置工作程序和计时器并启动它：

工人阶级：

```
class Worker : public QObject
{
    Q_OBJECT
public:
    explicit Worker(QObject *parent = 0) : QObject(parent) {}

signals:
    void doSomething();

public slots:
    void trigger() {
        emit doSomething();
    }
}; 
```

主文件

```
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    MainThreadObject o;

    QThread *thread = new QThread;
    Worker w;
    QTimer timer;
    timer.setInterval(1000);

    timer.moveToThread(thread);
    w.moveToThread(thread);

    QObject::connect(thread, SIGNAL(started()), &timer, SLOT(start()));
    QObject::connect(&w, SIGNAL(doSomething()), &o, SLOT(doSomething()));
    QObject::connect(&timer, SIGNAL(timeout()), &w, SLOT(trigger()));

    thread->start();

    return a.exec();
} 
```

所以，我们有`MainThreadObject`which 代表一个 QObject 派生在主线程中。我们创建了定时器和`Worker`对象，它们只是用来包装一个信号和槽，以避免子类化 QThread 的需要。定时器被设置，它和worker被移动到新线程，线程`started()`信号连接到定时器`start()`槽，工作`doSomething()`信号连接到主线程对象`doSomething()`槽，最后定时器`timeout()`信号连接到工作`trigger()`槽。然后启动线程，启动事件循环中的整个链。

因此，`MainThreadObject::doSomething()`每秒都会调用一次，并从辅助线程发出信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T06:31:17.620

尝试

```
QMetaObject::invokeMethod(&timer, "start", Qt::QueuedConnection); //timer->start() 
```

如果你想立即启动计时器

或者

```
QMetaObject::invokeMethod(&timer, "start", Qt::QueuedConnection , Q_ARG(int, 1000 )); //timer->start(200) 
```

如果您想在 1000 秒后启动计时器

在非 GUI 线程中（QThread 或 Pthread 回调）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:39:23.467

首先，如果你从 QThread 子类化，你必须实现 run() 方法，如果没有，那么这样做没有意义，你可以从 QObject 继承。

其次，您的 QTimer 必须驻留在运行事件循环的线程中。如果没有事件循环，就不能传输 Qt 排队信号。您可以通过在线程的 run 方法中调用 exec() 来启动事件循环：

```
void Timer::run() {
    exec();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:57:11.620

可能的原因是，您的计时器对象不在具有事件循环的线程中。需要事件循环来触发信号。

但是，我建议您不要采用这种方法。计时器在不同平台上使用不同的机制，您的代码在不同平台上的行为可能与预期不同。

# python - 创建空字典列表

> ID：15835268
> 
> 赞同：14
> 
> 时间：2013-04-05T13:30:19.203
> 
> 标签：python, list, dictionary

我想创建一个包含空目录的可变长度列表。

```
n = 10 # size of list
foo = []
for _ in range(n)
    foo.append({}) 
```

你会以同样的方式这样做，还是有类似的东西？

```
a = [{}*n] 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-05T13:31:06.760

列出理解来救援！

```
foo = [{} for _ in range(n)] 
```

恐怕没有更短的符号了。在 Python 2 中，您使用`xrange(n)`而不是`range(n)`避免实现无用的列表。

另一种方法是创建一个只有*一个*字典`[{}] * n`的长度列表，引用时间。在向字典添加键时，这会导致令人讨厌的意外。`n`*`n`*

# function - 功能参数检查

> ID：15835269
> 
> 赞同：2
> 
> 时间：2013-04-05T13:30:20.757
> 
> 标签：function, powershell

我正在编写一些基本的 powershell 库，我需要检查特定参数是否在一组值中。

在这个例子中，我定义了一个带有可选参数的函数 ALV_time。如果定义，它可能只有 2 个值，否则我会发出警告。它有效，但这是只允许某些参数值的正确方法还是有标准方法？

```
$warningColor = @{"ForegroundColor" = "Red"}

function AVL_Time {
    [CmdletBinding()]
    param (
        $format
    )

    process {
        # with format parameter
        if ($format) {
            # list format possible parameters
            $format_parameters = @("short: only date", "long: date and time")
            if ($format -like "short") {
                $now = Get-Date -Format "yyyy-MM-dd"
            }
            # long date
            elseif ($format -like "long") {
                $now = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
            }
            # if wrong format parameter
            else {
                Write-Host @warningColor "Please use only those parameters:"
                $format_parameters | foreach {
                    Write-Host @warningColor "$_"
                }
            }
        }
        # without format parameter
        else {
            $now = Get-Date -Format "yyyy-MM-dd"
        }

        # return time
        return $now
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:35:41.230

这将为您进行检查：

```
Param( 
        [ValidateSet("short","long")] 
        [String] 
        $format ) 
```

具有更多验证的示例脚本：

```
Function Foo 
{ 
    Param( 
        [ValidateSet("Tom","Dick","Jane")] 
        [String] 
        $Name 
    , 
        [ValidateRange(21,65)] 
        [Int] 
        $Age 
    , 
        [ValidateScript({Test-Path $_ -PathType 'Container'})] 
        [string] 
        $Path 
    ) 
    Process 
    { 
        "Foo $name $Age $path" 
    } 
} 
```

# php - PHP-file_get_contents 未能打开流：连接被拒绝

> ID：15835274
> 
> 赞同：13
> 
> 时间：2013-04-05T13:30:33.137
> 
> 标签：php, file-get-contents

我正在使用以下 API 获取使用 IP 的国家代码

```
http://api.hostip.info/country.php?ip=' . $IP 
```

示例：在**本地主机上**

```
$IP = '202.71.158.30';

//pass the ip as a parameter for follow URL it will return the country

$country_code = file_get_contents('http://api.hostip.info/country.php?ip=' . $IP); 
```

它在这里工作正常并显示国家代码。

但它在**服务器上显示错误**

例子：

```
$IP=$_SERVER['REMOTE_ADDR'];

$country_code = file_get_contents('http://api.hostip.info/country.php?ip=' . $IP); 
```

显示以下错误：

> 警告：file_get_contents（[http://api.hostip.info/country.php?ip=101.63.xx.xxx](http://api.hostip.info/country.php?ip=101.63.xx.xxx)）[function.file-get-contents]：无法打开流：/srv/disk4/1322145 中的连接被拒绝/www/servername.in/app/header.php 第 12 行

这有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T14:06:15.097

您可以使用 CURL 代替 file_get_contents()

```
<?php
    $IP = '202.71.158.30'; 
    $runfile = 'http://api.hostip.info/country.php?ip=' . $IP;

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $runfile);

    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

    $content = curl_exec ($ch);

    curl_close ($ch); 

    echo $content; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:33:26.327

某些服务器不允许通过您的请求中的 IP 地址进行访问。您可以使用`CURL`来防止此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-15T08:40:55.990

在我的例子中，Plesk 中的扩展突然开始对发出请求`Fail2Ban`的服务器进行 IP 阻止。`file_get_contents()`这可能不是问题，但我只是想让你意识到这种可能性。

# typo3 - 当 postuserfunc 调用时，如何从 Extbase 扩展中访问内容变量？

> ID：15835279
> 
> 赞同：1
> 
> 时间：2013-04-05T13:30:48.287
> 
> 标签：typo3, extbase

如 api.typo3.org 中的[文档](http://typo3.org/api/typo3cms/class_t_y_p_o3_1_1_c_m_s_1_1_extbase_1_1_core_1_1_bootstrap.html#a890c7dde66b4a9462983759de4d9576a)所述，未使用 Bootstrap->run 的内容参数。我需要一种在 extbase 扩展中准确处理这些内容的方法。

扩展程序由以下方式调用：

```
 page = PAGE
    page {
        stdWrap {
            htmlSpecialChars = 0
            postUserFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
            postUserFunc {
                extensionName = MyExtension         
                pluginName   = Pi1
                controller   = Firstcontroller
                vendorName    = MyCompany
                action       = list 

            }
        }
       ...... 
```

如何访问 (postuserfunc-) 内容？我尝试使用 ContentObject，但在任何地方都找不到内容。

```
$this->configurationManager->getContentObject() 
```

有解决方法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:26:05.633

我假设你想获得 cObject 记录？您快到了：

```
$contentRecord = $this->configurationManager->getContentObject()->data; 
```

# javascript - Javascript“for”语法

> ID：15835287
> 
> 赞同：1
> 
> 时间：2013-04-05T13:31:09.443
> 
> 标签：javascript

所以在[这个问题](https://stackoverflow.com/questions/15833756/what-was-used-to-compress-this-code)中，我询问了一些 Javascript 是如何被压缩的。这个问题得到了回答，但下面的片段让我非常困惑，以至于我不得不问另一个问题。这里是：

```
for (Y = 0; $ = 'zxqj`_^ZWVUQONMKJIHGCA@8$  ' [Y++];) 
     with(_.split($)) _ = join(pop());
eval(_) 
```

这种语法从何而来？我有点理解操作的第三个是（`[Y++]`），但为什么它在括号中，为什么它之前没有任何分号？另外，在第 2 行：在我看来`_`是一个正在声明的变量，但是什么样的变量类型是`with(_.split($))`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:34:31.940

任何`for`命令都可以分解。从“经典”循环开始：

```
for( i=0; i<end; i++) 
```

这转化为：

*   放`i=0`
*   只要重复以下操作`i<end`：
    *   运行块中的代码
    *   增量`i`

因此，将其应用于您的代码：

*   放`Y=0`
*   只要字符串位置 Y 的字符存在（即 Y 不超过字符串的长度），将该字符分配给`$`然后递增 Y，然后：
    *   运行块中的代码
    *   什么都不做（第二个分号后什么都没有）

它很丑陋，但如果你把它分解，它仍然是有意义的。

# graph - 在 OCaml 中以**纯**功能方式进行 DFS 和 BFS for Graph

> ID：15835295
> 
> 赞同：2
> 
> 时间：2013-04-05T13:31:22.143
> 
> 标签：graph, functional-programming, ocaml

我`Map`用来实现`pure functional` `DFS`和`BFS`用于图形。

这是我的代码：

```
module IntMap = Map.Make(struct type t = int let compare = compare end);;
module IntSet = Set.Make(struct type t = int let compare = compare end);;

type digraph = int list IntMap.t;;

exception CantAddEdge;;

let create v = 
  let rec fill i acc =
    if i < v then
      fill (i+1) (IntMap.add i [] acc)
    else 
      acc
  in 
  fill 0 IntMap.empty;;

let num_vertices g = IntMap.cardinal g;;

let add_edge u v g = 
  if IntMap.mem u g && IntMap.mem v g then 
    let add u v g =
      let l = IntMap.find u g in 
      if List.mem v l then g
      else IntMap.add u (v::l) g
    in 
    add u v (add v u g)
  else 
    raise CantAddEdge;;

let dfs_path u g =
  let rec dfs current visited path =
    let dfs_child current (visited, path) c =
      if not (IntSet.mem c visited) then
         dfs c (IntSet.add c visited) (IntMap.add c current path)
      else 
         (visited, path)
    in 
    List.fold_left (dfs_child current) (visited, path) (IntMap.find current g)
  in 
  let (v, p) = dfs u (IntSet.singleton u) IntMap.empty
  in 
  p;;

let bfs_path u g =
  let rec bfs current_list v p n =
    let bfs_current (v,p,n) current  =
      let bfs_child current (v, p, n) c = 
         if not (IntSet.mem c v) then begin
           print_int c;
           ((IntSet.add c v), (IntMap.add c current p), (c::n))
         end 
         else 
           (v, p, n)
      in 
      List.fold_left (bfs_child current) (v, p, n) (IntMap.find current g)
    in 
    let (v,p,n) = List.fold_left bfs_current (v,p,n) current_list
    in 
    if n = [] then p
    else bfs n v p []
  in  
  bfs [u] (IntSet.singleton u) IntMap.empty [];; 
```

* * *

我知道代码很长，但我真的希望得到一些建议：

1.  是否值得真正实现一组纯函数式的图算法？我这样做是因为我现在已经习惯`functional`和讨厌`imperative`了。
2.  我的实现是否在某些部分或全部方面过于复杂？
3.  虽然我喜欢`functional`，但我个人认为我所做的实现似乎比`imperative`array-everywhere 版本更复杂。我的感觉对吗？

* * *

**编辑**

添加`Bipartite`代码

```
(* basically, we have two sets, one for red node and the other for black node*)
(* we keep marking color to nodes via DFS and different level of nodes go to coresponding color set*)
(* unless a node is meant to be one color but already in the set of the other color*)
type colorType = Red | Black;;
let dfs_bipartite u g =
  let rec dfs current color red black block  =
    if block then (red, black, block)
    else 
      let dfs_child current color (red, black, block) c =
    if block then (red, black, block)
    else 
      let c_red = IntSet.mem c red and c_black = IntSet.mem c black in
      if (not c_red) && (not c_black) then
        if color = Red then
          dfs c Black (IntSet.add c red) black false
        else
          dfs c Red red (IntSet.add c black) false
      else if (c_red && color = Black) || (c_black && color = Red) then (red, black, true)
      else (red, black, block)
      in 
      List.fold_left (dfs_child current color) (red, black, block) (IntMap.find current g)
  in 
  let (r, b, block) = dfs u Black (IntSet.singleton u) IntSet.empty false
  in 
  not block;; 
```

* * *

**编辑 2**

具有基于列表的路径的 DFS

```
let dfs_path u g =
  let rec dfs current visited path =
    let dfs_child (visited, path) c =
      if not (IntSet.mem c visited) then begin
    print_int c;
    dfs c (IntSet.add c visited) (c::path)
      end 
      else (visited, path)
    in 
    List.fold_left dfs_child (visited, path) (IntMap.find current g)
  in 
  let (v, p) = dfs u (IntSet.singleton u) [u]
  in 
  p;; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:15:41.097

我不确定你所说的有价值是什么意思。将这项任务设置为学习练习是值得的。使用不可变数据来解决实际的现实世界图问题也是值得的。在我看来，图形处理并不是一个纯函数式代码成本高于通常愿意为收益付费的应用领域。

您将路径表示为从每个节点到下一个节点的地图。这很好，因为您可以在中间启动路径。但是对于许多应用程序来说，列表是一种更简单、更自然的路径表示。无论如何，您的代码是一个相当重量级的表示，因此它使您的代码比我预期的要重一些。（顺便说一句，这很难弄清楚——一些评论会有所帮助。）

我个人认为这段代码并不比命令式更复杂。我还认为，当被视为链接结构时，数组无法很好地表示图形。所以我不相信“到处都是数组”的解决方案是你想要比较的。我个人会与基于 malloc()/struct 的（a la C）或基于对象的解决方案进行比较。

当将图表示为邻接矩阵时，我会说数组表示更具竞争力。如果您的图表大小变化很大，或者您想通过整数以外的键访问节点，地图仍然有很多优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:03:54.337

1.  如果您在开源社区中找不到好的代码，那么这样做是值得的。不要重新发明轮子。

2.  还有一篇文章对 OCaml 的 DFS 算法进行了广泛的解释，OCaml 中的[拓扑排序](https://stackoverflow.com/questions/4653914/topological-sort-in-ocaml) 我建议尝试将 bfs、bfs_current 和 bfs_child 写入单个函数。

# c - 将字符串数组传递给C中的函数

> ID：15835300
> 
> 赞同：0
> 
> 时间：2013-04-05T13:31:41.670
> 
> 标签：c

我刚刚学习 C，有人可以解释为什么下面的代码在打印数组的第一个元素后会产生分段错误吗？

工作代码会是什么样子？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define ELEMENTS 8

void make(char ***array) {

*array = malloc(ELEMENTS * sizeof(char *));

    (*array)[0] = "test0";
    (*array)[1] = "test1";
    (*array)[2] = "test2";
    (*array)[3] = "test3";
    (*array)[4] = "test4";
    (*array)[5] = "test5";
    (*array)[6] = "test6";
    (*array)[7] = "test7";
    (*array)[8] = "test8";

}

int main(int argc, char **argv) 
{
char **array;
make(&array);

int i;
for (i = 0; i < ELEMENTS; ++i) {
    printf("%s\n", array[i]);
    free(array[i]);
}
free(array);
return 0; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:35:14.323

1.  您的数组大小是`8`，但您访问的是 index `8`，它是数组末尾的一个。如果你不明白，请计算元素的数量......

2.  您调用`free`分配的字符串常量。不要这样做。只为`free`你`malloc`，即为`array`，不`array[0]`为`array[8]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:38:54.283

当您将文字字符串放入 C++ 中`"test0"`时，它实际上存储在无法修改的特殊内存位置。在行

```
(*array)[0] = "test0"; 
```

你将你指向`char*`那个内存位置，这是可以的。但是，稍后，当您调用 时`free(array[i]);`，您会尝试释放相同的内存，这是一个禁忌。通常，仅`free()`当您以前`malloc()`在同一变量上使用过时才使用。

此外，正如其他人所说，您需要分配一个大小为 9 的数组，因为您使用的是 9 个元素。

# python - 使用一个命令通过循环绘制大量轴对象

> ID：15835301
> 
> 赞同：1
> 
> 时间：2013-04-05T13:31:43.747
> 
> 标签：python, loops, matplotlib

假设我有一堆 ax1,ax2,ax3... 我想通过绘图函数运行它们：

```
def plotxy(ax,x,y):
    x = np.array(x)
    y = np.array(y)
    ax.plot(x,y) 
```

（明显简化）

我将如何重复命令而不做：

```
plotxy(ax1,x,y)
plotxy(ax2,x,y)
...
plotxy(axn,x,y) 
```

我确信有一种方法可以创建一个临时变量，它将 axn 保存在一个循环中，该循环可能只有一行。有任何想法吗？这将大大缩短我的代码，因为我需要使用相同的命令绘制大量的东西，但 x & y 和多个子图不同。

我想这是使用循环构造变量名的一个大问题的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:37:31.410

你可以尝试这样的事情：

```
import matplotlib.pyplot as plt
fig, axs = plt.subplots(nrows=3, ncols=2)

for ax in axs.flat:
    plotxy(ax,x,y) 
```

如果您使用`plt.subplot`或者`plt.axes`您可以手动创建轴列表/数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:00:48.190

您还可以使用[map](http://docs.python.org/2/library/functions.html#map)，`x`并`y`作为名称空间变量和`axx`一些可迭代您的轴对象：

```
x = ...
y = ...

def plotxy(ax):
    ax.plot(x,y)

map(plotxy,axx) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:37:06.653

我可能在你的问题中遗漏了一些东西，但你为什么不只使用一个简单的循环呢？

```
for ax in ( ax1, ax2, ..., axn ):
    plotxy(ax,x,y) 
```

您还可以避免显式列出所有变量：

```
axes = ( locals()['ax%d'%i] for i in range(1, n+1) )
for ax in axes:
    plotxy(ax,x,y) 
```

# iphone - 在 iOS 5 及以下版本中，一个视图控制器出现在另一个视图控制器上

> ID：15835304
> 
> 赞同：0
> 
> 时间：2013-04-05T13:31:52.463
> 
> 标签：iphone, ipad, xcode4.5

我有一个带有两个视图控制器的 UItabbarController。当我单击一个视图控制器中的登录按钮时，它应该将我带到另一个 tabbarController。发生这种情况时，我会在当前 tabbarcontroller 的顶部获得第一个视图控制器，它看起来像另一个视图控制器。它在 iPhone 6.0 模拟器中运行良好，但如 iPhone 5.0 模拟器中所述失败。

在 appDelegate.m 中：

```
 - (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
  {
    switch (state) {
    case FBSessionStateOpen:
        if (!error) {

            if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone)
            {
                FLogin *flogin=[[FLogin alloc]initWithNibName:@"FLogin" bundle:nil];

                self.window.rootViewController=fblogin;  // I think because of this I m getting this issue

            }

        }

} 
```

在flogin.m

```
 tab=[[[UITabBarController alloc]init]autorelease];
          ViewController *searchViewController=[[[ViewController   alloc]initWithNibName:@"ViewController" bundle:nil]autorelease];
            Account *account=[[[Account alloc]initWithNibName:@"Account" bundle:nil]autorelease];
            account.title=@"My Account";

            tab.viewControllers=[NSArray arrayWithObjects:searchViewController,account,nil];
            for(UIViewController *tab1 in  tab.viewControllers)

            {
                if ([[[UIDevice currentDevice] systemVersion] floatValue]>5.0 ||[[[UIDevice currentDevice] systemVersion] floatValue]==5.0)
                {
                    [tab.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                            [UIFont fontWithName:@"TimesNewRomanPS-BoldMT" size:16.0], UITextAttributeFont, nil]
                                                  forState:UIControlStateNormal];
                }
            }

            [self presentModalViewController:tab animated:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:08:13.000

您是说您只想以编程方式切换选项卡以响应登录吗？如果是这样，您不应该使用`presentModalViewController:`. 切换选项卡的正确方法是使用 UITabBarController 方法。

```
[self.tabBarController setSelectedIndex:1]; 
```

或者

```
[self.tabBarController setSelectedViewController:self.myOtherViewController]; 
```

# php - Javascript，使用 Highcharts 显示带有 JSON 数据的排名图表

> ID：15835306
> 
> 赞同：0
> 
> 时间：2013-04-05T13:31:58.607
> 
> 标签：php, json, highcharts

我正在尝试使用 javascript Highcharts 显示 JSON 数据的排名图表。我似乎无法显示图表。

这是javascript代码：

```
$(document).ready(function() {
var options = {
    chart: {
            renderTo: 'drawing',
            zoomType: 'x',
            width: 900,
            height: 222
    },
    exporting: {
        enabled:true      
    },
    title: {
        text: url+' - '+keyword
    },
    credits: {
        text: '****',
        href: 'http://***/'
    },
    xAxis: {
        type: 'datetime',
        dateTimeLabelFormats: {
            day: '%b %e '   
        }
    },
    yAxis: [{
        //min: 1,
        allowDecimals: false,
        reversed: true,
        ///: .2,
        //maxPadding: .2,

        title: {
            text: 'Rankings'
        }
    },],

    tooltip: {
        crosshairs: true,
        shared: true
    },
    series: [{}]
};  

var url =  "http://*******/chart.php";
    $.getJSON(url,  function(data) {

        $.each(data, function(arrayID,group) {
            $.each(group.data, function(id,val) {
            arg = val[0].replace(/Date.UTC\((.*?)\)/, '$1').split(',');
            var timestamp = Date.UTC.apply( null , arg );
            date=new Date(timestamp);
            data[arrayID].data[id][0] = timestamp;
            });
        });

        options.series[0].data = data;
        var chart = new Highcharts.Chart(options);
    });                          
}); 
```

我们的 PHP 脚本给了我们这个 JSON：

```
[{"name":"Google Rank","data":[["Date.UTC(2013,04,05)","23"],["Date.UTC(2013,04,04)","23"],["Date.UTC(2013,04,03)","22"],["Date.UTC(2013,04,02)","24"],["Date.UTC(2013,04,01)","26"],["Date.UTC(2013,03,31)","24"],["Date.UTC(2013,03,30)","24"],["Date.UTC(2013,03,29)","25"],["Date.UTC(2013,03,28)","25"],["Date.UTC(2013,03,27)","25"],["Date.UTC(2013,03,26)","26"],["Date.UTC(2013,03,25)","25"],["Date.UTC(2013,03,24)","24"],["Date.UTC(2013,03,23)","-"],["Date.UTC(2013,03,22)","10"],["Date.UTC(2013,03,21)","10"],["Date.UTC(2013,03,20)","10"],["Date.UTC(2013,03,19)","10"],["Date.UTC(2013,03,18)","10"],["Date.UTC(2013,03,17)","10"],["Date.UTC(2013,03,16)","9"],["Date.UTC(2013,03,15)","9"],["Date.UTC(2013,03,14)","9"],["Date.UTC(2013,03,13)","9"],["Date.UTC(2013,03,12)","9"]],"visible":"true","pointInterval":"86400000","showInLegend":"false"},{"name":"Bing Rank","data":["Date.UTC(2013,2,9)",9],"visible":"true","pointInterval":"86400000","showInLegend":"false"}] 
```

请注意，JSON 数据将数字表示为字符串，这可能是一个问题。

生成 JSON 数据的 PHP 代码：

```
$googledata = array();
while($gkdata = mysql_fetch_assoc($keywordquery)){
    $explodedate = explode("-", $gkdata['date']);
    $year = $explodedate[0];
    $month = $explodedate[1];
    $day = $explodedate[2];    
    $googledata[] = array(
        "".$year.",".$month.",".$day."",  
        $gkdata['grank']     //$gkdata['grank'] should be a number, but is sometimes a dash so it's cast to an accommodating datatype: string.
    );
}

$chartdata = array(
    array(
        "name" => 'Google Rank',
        "data" => $googledata,
        "visible" => 'true',
        "pointInterval" => '86400000',
        "showInLegend" => 'false',
    ),
    array(
        "name" => 'Bing Rank',
        "data" => array(
            'Date.UTC(2013,2,9)', 
            9
        ),
        "visible" => 'true',
        "pointInterval" => '86400000',
        "showInLegend" => 'false',
    )
); 
```

除了没有数据的图表本身，Highcharts 不会显示任何其他内容。应该在`Date.UTC(2013,03,12)`X 轴上，它旁边的数字应该是等级数。任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:37:09.797

该图表将数据作为 [x,y]。如果您希望日期位于 y 轴上，只需将数据的顺序反转为 ['value',dateamp']。

编辑：

我从文本中不确定您遇到的问题是什么，但是您的代码会出现的一个问题是您的数字数据值是以字符串形式返回的，用引号括起来。

在 json 编码之前，您需要在 php 中将它们转换为整数，以便它们以不带引号的形式作为整数出现。

您应该会从中看到一个错误：[http ://www.highcharts.com/errors/14](http://www.highcharts.com/errors/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:11:57.117

You are expecting `$gkdata['grank']` to always return a number, it sometimes returns a dash `-`. The Array Object is using the datatype which best represents the data, and it chooses string. If you want to force it as int, you'll have to use a data structure that only allows integers to be put in it. Then it will puke when you try to put in a dash, which it should be doing, because how do you plot a DASH on a chart?

Had you taken off your blindfold, and looked at the error HighCharts returned to you, you would see this:

**Highcharts Error #14 String value sent to series.data, expected Number**

This happens if you pass in a string as a data point, for example in a setup like this:

```
series: [{
    data: ["3", "5", "1", "6"]
}] 
```

Highcharts expects the data values to be numbers. The most common reason for this is that data is parsed from CSV or from a XML source, and the implementer forgot to run parseFloat on the parsed value.

For performance reasons internal type casting is not performed, and only the first value is checked (since 2.3).

So fix your code to make grank always a number. HighCharts won't plot strings for performance reasons.

# php - MySQL错误：表名不正确

> ID：15835310
> 
> 赞同：0
> 
> 时间：2013-04-05T13:32:14.483
> 
> 标签：php, mysql, sql

我对 Web 开发很陌生，所以我很有可能在这里做一些非常愚蠢的事情。

我正在使用 AJAX 将数据发送到 PHP 文件，该文件将使用数据运行 SQL 命令来更新表。我正在处理编辑文章，所以我的 PHP 文件需要知道三件事：文章的原始名称（供参考）、新名称和新内容。我还告诉它用户正在查看哪个页面，以便它知道要编辑哪个表。

```
 $('#save_articles').click(function () {

    var current_page = $('#current_location').html();
    var array_details = {};
    array_details['__current_page__'] = current_page;

        $('#article_items .article_title').each(function(){

            var article_name = $(this).html(); //The text in this div is the element name
            var new_article_name = $(this).next('.article_content');
            new_article_name = $(new_article_name).children('.article_content_title').html();
            var new_article_content = $(this).next('.article_content');
            new_article_content = $(new_article_content).children('.article_content_content').html();

            array_new_deets = {new_name:new_article_name, content:new_article_content};
            array_details[article_name] = array_new_deets;

        });

        send_ajax("includes/admin/admin_save_articles.php", array_details);

    }); 
```

在 PHP 文件中，我首先检索当前页面并将其存储在 $sql_table 中，然后从 $_POST 中删除当前页面变量。然后我运行这个。

```
foreach($_POST as $key => $value){

        $original_name = $key;
        $new_name = $value['new_name'];
        $new_cont = $value['content'];

        $query =    "UPDATE 
                        `$sql_table`
                    SET 
                        `element_name`= '$new_name',
                        `element_content` = '$new_cont',
                    WHERE
                        `element_name` = '$original_name'";

        $query = mysql_query($query);

        if(!$query){

                die(mysql_error());

            }

    } 
```

我总是收到一条错误消息，说“sitep_Home”是一个不正确的表名。它不仅是我数据库中的真实表，而且我实际上更改了它的名称以确保它不是关键字或其他东西的问题。

如果我改为在没有变量 $sql_table 的情况下运行查询（指定该表称为“sitep_Home”），则查询将接受该表。然后它实际上并没有更新表，我怀疑这是因为 WHERE 参数也使用了一个变量。

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:59:54.897

在执行之前转储/记录您的查询 - 之后问题应该很明显（我怀疑表名中有一些额外的字符）。

几件事：

*   您永远不应该信任您的用户并接受他们将在 $_POST 中发送给您的所有内容，而是将白名单用于您要更新的字段
*   您的代码容易受到 SQL 注入的影响，我建议至少使用一些框架/[独立库](http://dibiphp.com/)或[PDO](http://www.php.net/manual/en/book.pdo.php) ，避免将来不推荐使用的[mysql_query 。](http://php.net/manual/en/function.mysql-query.php)检查这个以获得一些解释[http://www.phptherightway.com/#databases](http://www.phptherightway.com/#databases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:41:16.397

尝试使用`$sql_table`，就`'$sql_table'`好像您确定这包含正确的表名一样。就像您正在使用其他列的值检查这是否有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:37:12.973

MySQL 中的表名区分大小写。请检查案件是否有错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-11T15:58:13.487

你必须在这个 ``qoutes. 当您动态创建mysql表时，在创建之前修剪（mysql名称表的$variable）非常重要，因为如果“mysql名称表的$variable”在edns或启动mysql中有空间，则不会创建表。最后，当您在查询中调用 mysql 名称表的 $variable 时，您必须再次修剪（mysql 名称表的 $variable）。

# iphone - 在 iOS 的通知中传递 CGPoint

> ID：15835312
> 
> 赞同：1
> 
> 时间：2013-04-05T13:32:29.683
> 
> 标签：iphone, ios, ios5, cgpoint

我想将 CGpoint 发送到我的主控制器类。所以我使用通知发送cgpoint，但我不知道如何从接收方的通知中提取cgpoint。我的日志输出只得到 0.00。

这是我的代码。

AT发件人：

```
 NSValue *pointAsObject =[NSValue valueWithCGPoint:CGPointMake(touchDetectingView.lastTouchPosition.x, touchDetectingView.lastTouchPosition.y)];
  [[NSNotificationCenter defaultCenter] postNotificationName: @"swap" object:pointAsObject]; 
```

AT接收头文件：

```
- (void)incomingNotification:(NSNotification *)notification; 
```

在接收器 M 文件

```
[super viewDidLoad];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(incomingNotification:) name:@"swap" object:nil];

- (void)incomingNotification:(NSNotification *)notification
{
     NSValue *pointAsObject = [[notification userInfo] valueForKey:@"swap"];
    NSLog (@"Successfully received the test notification %f",pointAsObject.CGPointValue.y);
} 
```

但我只得到 0.00 OUTPUT ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:36:34.090

```
- (void)incomingNotification:(NSNotification *)notification
{
     NSValue *pointAsObject = [notification object];
    NSLog (@"Successfully received the test notification %f",pointAsObject.CGPointValue.y);
} 
```

# symfony - 使用标签在翻译中使用占位符

> ID：15835315
> 
> 赞同：8
> 
> 时间：2013-04-05T13:32:41.280
> 
> 标签：symfony, internationalization, twig

在 Symfony / Twig 中，我可以通过在翻译块中使用百分比来使用标签。例如：

```
Hello {{nickname}} 
```

会成为

```
{% trans %}Hello %nickname%{% endtrans %} 
```

这按预期工作。我传递给 Twig 的带有占位符的数组会自动映射到 %placeHolder%。不涉及额外的工作。因此，这适用于控制器中的我的 PHP 数组：

```
Array('nickname' => 'rolandow') 
```

当我想在翻译块中使用昵称时，我所要做的就是用百分比 % 包围它。不幸的是，当我将它传递给`trans`.

现在我想使用标签翻译整个文本块。我不知道如何在翻译中使用标签。所以，我的树枝看起来像这样：

```
{{ say.hello|trans }} 
```

还有我的翻译片段

```
<trans-unit id="1">
  <source>say.hello</source>
  <target>Hello %nickName%, how are you doing today? lots-of-text-here</target>
</trans-unit> 
```

我通过在我的模板中使用它来让它工作，但感觉就像做两次一样。我现在需要再次将占位符数组放入 trans 函数中。例如：

```
{{ say.hello|trans('%nickName%' : nickName) }} 
```

如果我想在我的控制器中使用给树枝的其他标签，我也需要将它们传递给翻译器。我不能以某种方式传递完整的数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-22T06:10:31.650

`{{ say.hello|trans('%nickname%': 'rolandow') }}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T20:37:44.130

这里有几个问题，所以让我们讨论一下。

1) Twig 的行为不像 Doctrine 查询，其中每个参数都必须有界。您可以将包含未使用参数的数组传递给`trans`，因此如果您不想指定`{'key': 'value', 'key2': 'value2'...}`给过滤器，只需传递整个数组（例如：`| trans(array)`）。那是@Luke 点。

2）您可以使用多种方式翻译文本块，最简单的是`{% set %}`。标签有两种使用`{% set %}`方式：

*   `{% set var = expression %}`or`{% set var1, var2 = expression1, expression2 %}`是最知名和最常用的方法：您只需将一些值放入一个或多个变量中。

*   `{% set var %}`文本块`{% endset %}`允许您在该变量内设置整个文本块。如果您想将该块放入过滤器（例如`escape`，，或在您的情况下，`trans`），这很有用。

因此，要翻译一段文本，您将执行以下操作：

```
{% set variable %}
block to translate %placeholder%
{% endset %}
{{ variable | trans(array) }} 
```

无论如何，我看不到一次翻译整个块的任何兴趣：我们`| trans`通常在属性（例如`say.hello`）之后使用，我无法想象您的 xlf/yml 翻译文件具有这样的设计。如果您只想使用翻译器来完成占位符，只需使用为该工作编写的 Twig :-)

`placeholder`3）关于在你的参数数组的键中替换`%placeholder%`：Twig 的要点是：把你想要的东西作为占位符。这样，如果您的翻译句子包含多个`%`，您可以使用`$something$`,`#something#`甚至`something`作为占位符。

如果您的数组键不包含这些`%`，则需要添加它们，您别无选择。如果您真的想在 Twig 文件上执行此操作，您可以创建一个宏来为您完成这项工作，并将其放入您在基本布局中导入的文件中。

就像是 ：

```
{% macro trans_pct(property, params) %}
  {% set newParams = [] }
  {% if params %}
    {% for key, value in params %}
      {% set newParams['%' ~ key ~ '%'] = value %}
    {% endfor %}
  {% endif %}
  {{ property | trans(newParams) }}
{% endmacro %} 
```

然后将其与`{{ _self.trans_pct('hello.say', array) | trim }}`.

备注：

*   `_self`是存储宏的模板（有关详细信息，请参阅[文档）。](http://twig.sensiolabs.org/doc/tags/macro.html)

*   `trim`之所以使用，是因为我编写了带有缩进和换行符的宏（这更容易阅读）。默认情况下，这些空格是打印的。

# python - Python -c 开关

> ID：15835316
> 
> 赞同：7
> 
> 时间：2013-04-05T13:32:43.810
> 
> 标签：python, bash, shell, quoting

我目前有

```
".".join(str(z) for z in [int(x, 16) for x in (re.sub(r'(.{2})(?!$)', r'\1.', "00112233")).split('.')])
'xx.xx.xx.xx' 
```

哪个有效，但是当我尝试通过 python -c 开关使用它时它失败了？

```
[root@monty ~]# python -c "import re ; ".".join(str(z) for z in [int(x, 16) for x in (re.sub(r'(.{2})(?!$)', r'\1.', "00112233")).split('.')])"
python -c "import re ; ".".join(str(z) for z in [int(x, 16) for x in (re.sub(r'(.{2})(?"import re ; ".".join(str(z) for z in [int(x, 16) for x in (re.sub(r'(.{2})(?python)', r'\1.', "00112233")).split('.')])")', r'\1.', "00112233")).split('.')])"
-bash: syntax error near unexpected token `str' 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:33:50.390

看起来像命令行上的引用问题。

尝试将 Python 字符串用单引号括起来，而不是在其中使用单引号。

您还可以使用`\"`.

```
$ python -c 'import re;print ".".join(str(z) for z in [int(x, 16) for x in (re.sub(r"(.{2})(?!$)", r"\1.", "00112233")).split(".")])'
0.17.34.51 
```

注意：由于您不再运行 python 解释器，因此您需要显式打印结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T14:01:43.147

在引用的 heredoc 中输入您的脚本，而不是使用`python -c`，这样您就可以完全解决问题；此外，这使您可以在代码中使用换行符，因此它更具可读性。

```
python - <<'EOF'
import re
print ".".join(str(z) for z in [int(x, 16)
                                for x in (re.sub(r'(.{2})(?!$)',
                                          r'\1.',
                                          "00112233")).split('.')])
EOF 
```

请注意，您必须使用`<<'EOF'`而不是`<<EOF`在这里；前者阻止外壳尝试扩展heredoc 的内容。

* * *

如果您*真的*想使用`python -c`，那么这种方法仍然可以从用于将脚本捕获到变量中的 heredoc 中受益：

```
python_script=$(cat <<'EOF'
import re
print ".".join(str(z) for z in [int(x, 16)
                                for x in (re.sub(r'(.{2})(?!$)',
                                          r'\1.',
                                          "00112233")).split('.')])
EOF
)

python -c "$python_script" 
```

# regex - 在个人资料文本中，我想添加一个正则表达式，以确保用户输入至少 50 个字符

> ID：15835317
> 
> 赞同：0
> 
> 时间：2013-04-05T13:32:44.140
> 
> 标签：regex

我希望用户能够输入带有空格的配置文件文本（我添加了空格），但也允许使用逗号和点。
现在，如果用户在文本中有逗号，则会出现错误。
我用过这个：

```
 /^[a-zA-Z0-9 ]{50,}+$/ 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:40:25.650

你可以试试这个正则表达式：

```
/^[a-zA-Z0-9\s,.]{50,}$/ 
```

添加`,`和`.`允许 和 。也是。\s 允许空间。
`{50,}`确保输入至少为 50 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:38:41.573

我相信您正在寻找的是以下正则表达式：

```
/^([a-zA-Z0-9\s,.]+){50,}$/ 
```

解释：允许一个或多个字母（大写和小写）、数字 (0-9)、逗号、至少 50 个字符长的句点

我用 \s 替换了空格，以便更清楚地看到您的空间也被编辑为允许一个点。

# tfsbuild - Team Foundation Build Service 构建在错误的位置 - VS2008 Team System

> ID：15835323
> 
> 赞同：1
> 
> 时间：2013-04-05T13:32:58.813
> 
> 标签：tfsbuild

这涉及到我如何定义 TFS 构建代理在构建之前/构建时将源代码拉到哪里。

我们正在一个更快的新 Win7x64 Pro 服务器上重建我们过时和缓慢的 WinXP 构建服务器。所有软件都已安装，并且现有的构建定义使用新的构建代理定义成功启动。新旧构建代理之间唯一明显的区别是代理名称和目标服务器名称：构建被定义为放置在每台服务器上的相同共享中 (\\servername\builds)，并且每个构建代理都定义了构建位置作为 $(Temp)\$(BuildDefinitionPath)。我们已经注意在新机器上重新创建与旧机器完全相同的构建位置文件夹结构。两种构建服务都在同一个帐户 (\DevBuildServer) 下运行，尽管通常在不登录 Windows 的情况下运行构建。

但是有一个障碍：使用相同的构建定义，旧的构建代理正确地将源代码获取到所需的目标位置（旧服务器上的 d:\temp），但是新的构建代理将它全部获取到错误的驱动器和路径在新服务器上。

从日志中：

旧版本代理：获取 TeamFoundationServerUrl="http://devserver2:8080/" BuildUri="vstfs:///Build/Build/3437" Force=True Overwrite=False PopulateOutput=False Preview=False Recursive=True Version="C6165 " Workspace="DEVBUILDSERVER_25" 获取 d:\Temp\Matrix5Branches\Matrix5313\Sources....等

新构建代理：获取 TeamFoundationServerUrl="http://devserver2:8080/" BuildUri="vstfs:///Build/Build/3459" Force=True Overwrite=False PopulateOutput=False Preview=False Recursive=True Version="C6176 " Workspace="DEVBUILDSERVER2_30" 获取 C:\Users\DEVBUILDSERVER\AppData\Local\Temp\Matrix5Branches....等

问题是在新服务器上目标路径太长，所以构建失败。此外，我们需要将构建本身放在单独的驱动器上，这样它们就不会被备份。所以在新的构建服务器上，我需要将源代码的目标路径设置为 d:\temp。我的问题是：构建目标文件夹（即构建完成的位置）的位置/路径如何/在哪里设置？我已经尝试从头开始创建一个新的构建代理定义和一个新的构建，但我找不到任何定义的地方，但显然它在某个地方，因为构建旧构建服务器的人已经管理了它。

TIA - 如果我今天解决了这个问题，我可以期待一个轻松的周末......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:54:55.450

问题在于在[`Working Directory`](http://msdn.microsoft.com/en-us/library/bb399135%28v=vs.100%29.aspx#agent_properties_workdir)Build Agent Properties 中使用 $(Temp) 。这使用 TEMP 环境变量，在 Windows 7 上默认为[%SystemDrive%\Users{username}\AppData\Local\Temp](http://en.wikipedia.org/wiki/Environment_variable#Default_Values_on_Microsoft_Windows)

有两种选择：

1.  更改 TEMP 环境变量
2.  更改构建代理上的工作目录设置

# php - 暴饮暴食饼干处理

> ID：15835324
> 
> 赞同：6
> 
> 时间：2013-04-05T13:33:00.500
> 
> 标签：php, rest, session, cookies, guzzle

我正在构建一个基于 Guzzle 的客户端应用程序。我被 cookie 处理困住了。我正在尝试使用[Cookie 插件](http://guzzlephp.org/guide/plugins.html#cookie-plugin)来实现它，但我无法让它工作。我的客户端应用程序是标准的 Web 应用程序，只要我使用相同的 guzzle 对象，它看起来就可以工作，但是跨请求它不会发送正确的 cookie。我`FileCookieJar`用于存储 cookie。如何跨多个 guzzle 对象保留 cookie？

```
// first request with login works fine
$cookiePlugin = new CookiePlugin(new FileCookieJar('/tmp/cookie-file'));
$client->addSubscriber($cookiePlugin);

$client->post('/login');

$client->get('/test/123.php?a=b');

// second request where I expect it working, but it's not...
$cookiePlugin = new CookiePlugin(new FileCookieJar('/tmp/cookie-file'));
$client->addSubscriber($cookiePlugin);

$client->get('/another-test/456'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-09T22:22:32.777

您正在创建`CookiePlugin`第二个请求的新实例，您还必须在第二个（以及后续）请求中使用第一个实例。

```
$cookiePlugin = new CookiePlugin(new FileCookieJar('/tmp/cookie-file'));

//First Request
$client = new Guzzle\Http\Client();
$client->addSubscriber($cookiePlugin);
$client->post('/login');
$client->get('/test/first');

//Second Request, same client
// No need for $cookiePlugin = new CookiePlugin(...
$client->get('/test/second');

//Third Request, new client, same cookies
$client2 = new Guzzle\Http\Client();
$client2->addSubscriber($cookiePlugin); //uses same instance
$client2->get('/test/third'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T19:12:45.643

```
$cookiePlugin = new CookiePlugin(new FileCookieJar($cookie_file_name));

// Add the cookie plugin to a client
$client = new Client($domain);
$client->addSubscriber($cookiePlugin);

// Send the request with no cookies and parse the returned cookies
$client->get($domain)->send();

// Send the request again, noticing that cookies are being sent
$request = $client->get($domain);
$request->send();

print_r ($request->getCookies()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-09T12:29:30.017

如果所有请求都在同一个用户请求中完成，则当前答案将起作用。但是，如果用户先登录，然后浏览该站点并稍后再次查询“域”，则它将不起作用。

这是我的解决方案（使用 ArrayCookieJar()）：

**登录**

```
$cookiePlugin = new CookiePlugin(new ArrayCookieJar());

//First Request
$client = new Client($domain);
$client->addSubscriber($cookiePlugin);
$request = $client->post('/login');
$response = $request->send();

// Retrieve the cookie to save it somehow
$cookiesArray = $cookiePlugin->getCookieJar()->all($domain);
$cookie = $cookiesArray[0]->toArray();

// Save in session or cache of your app.
// In example laravel:
Cache::put('cookie', $cookie, 30); 
```

**其他要求**

```
// Create a new client object
$client = new Client($domain);
// Get the previously stored cookie
// Here example for laravel
$cookie = Cache::get('cookie');
// Create the new CookiePlugin object
$cookie = new Cookie($cookie);
$cookieJar = new ArrayCookieJar();
$cookieJar->add($cookie);
$cookiePlugin = new CookiePlugin($cookieJar);
$client->addSubscriber($cookiePlugin);

// Then you can do other query with these cookie
$request = $client->get('/getData');
$response = $request->send(); 
```

# javascript - 如何查找文本区域中的文本是否换行为多行？

> ID：15835327
> 
> 赞同：3
> 
> 时间：2013-04-05T13:33:12.923
> 
> 标签：javascript, jquery, textarea, line-breaks, word-wrap

如何查找 textarea 中的长文本是否包含在两行或多行中？

我不是在谈论[这里](https://stackoverflow.com/questions/3697096/finding-number-of-lines-in-an-html-textarea)讨论的新行字符。

我知道插件[Textarea Line Count](https://bitbucket.org/MostThingsWeb/textarea-line-count/wiki/Home)

有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:55:16.670

我对此进行了试验，并提出了一个涉及以下内容的hack：

1.  在 textarea 中禁用文本换行（加上禁用填充）

2.  检查 textarea`scrollWidth`是否大于它的`width`.

我使用的基本逻辑是，如果文本跨越多行，这意味着关闭换行时，我们应该得到一个水平滚动条。

**演示**：http: [//jsfiddle.net/fnG3d/](http://jsfiddle.net/fnG3d/)

*免责声明：下面的代码是 10 分钟的结果，绝对不是生产质量*

```
function checkMulti(id) {
    var ta = $('#'+id), multi = false;

    // disable wrapping, padding and enable horiz scoll
    ta.addClass('nowrap');

    // check if there is anything to be scrolled horizontally (means multi-lines otherwise)
    multi = ( ta[0].scrollWidth > ta.width() );

    // checking done. remove the class.
    ta.removeClass('nowrap');

    alert('Spread over multiple-lines: ' + multi);
}

/* the nowrap class */
.nowrap {
    overflow-x: scroll;
    white-space: nowrap;
    padding: 0;
} 
```

# ruby - rvm 系统安装，bin 未正确符号链接

> ID：15835329
> 
> 赞同：0
> 
> 时间：2013-04-05T13:33:18.843
> 
> 标签：ruby, ubuntu, rvm

我在 ubuntu 12.04 上并安装了 rvm 系统范围：
`$ \curl -L https://get.rvm.io | sudo bash -s stable`

到目前为止，我一直执行单用户安装，老实说，我对系统范围安装的结果感到非常困惑。
它确实将 rvm bin 目录放在了我的路径中，但它用无法直接使用的名称符号链接了所有二进制文件。
这是否意味着我应该一个一个地对它们进行符号链接？
出事了吗？
这是默认行为吗？

```
appusr@server-name:/usr/local/rvm/bin$ ll
total 60
drwxrwsr-x  2 root     rvm   4096 Apr  5 13:11 ./
drwxrwsr-x 23 root     rvm   4096 Apr  5 13:04 ../
-rwxrwxr-x  1 root     rvm    578 Apr  5 13:04 bundle*
lrwxrwxrwx  1 appusr   rvm     41 Apr  5 13:11 erb-ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/erb*
lrwxrwxrwx  1 appusr   rvm     48 Apr  5 13:11 erb-ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/erb*
lrwxrwxrwx  1 appusr   rvm     41 Apr  5 13:11 gem-ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/gem*
lrwxrwxrwx  1 appusr   rvm     48 Apr  5 13:11 gem-ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/gem*
lrwxrwxrwx  1 appusr   rvm     41 Apr  5 13:11 irb-ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/irb*
lrwxrwxrwx  1 appusr   rvm     48 Apr  5 13:11 irb-ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/irb*
-rwxrwxr-x  1 root     rvm    556 Apr  5 13:04 rake*
lrwxrwxrwx  1 appusr   rvm     42 Apr  5 13:11 rake-ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/rake*
lrwxrwxrwx  1 appusr   rvm     49 Apr  5 13:11 rake-ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/rake*
lrwxrwxrwx  1 appusr   rvm     42 Apr  5 13:11 rdoc-ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/rdoc*
lrwxrwxrwx  1 appusr   rvm     49 Apr  5 13:11 rdoc-ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/rdoc*
lrwxrwxrwx  1 appusr   rvm     40 Apr  5 13:11 ri-ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/ri*
lrwxrwxrwx  1 appusr   rvm     47 Apr  5 13:11 ri-ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/ri*
lrwxrwxrwx  1 appusr   rvm     42 Apr  5 13:11 ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/ruby*
lrwxrwxrwx  1 appusr   rvm     49 Apr  5 13:11 ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/ruby*
-rwxrwxr-x  1 root     rvm   1307 Apr  5 13:04 rvm*
-rwxrwxr-x  1 root     rvm   1512 Apr  5 13:04 rvm-auto-ruby*
-rwxrwxr-x  1 root     rvm   1803 Apr  5 13:04 rvm-exec*
-rwxrwxr-x  1 root     rvm  13130 Apr  5 13:04 rvm-installer*
-rwxrwxr-x  1 root     rvm   3850 Apr  5 13:04 rvm-prompt*
-rwxrwxr-x  1 root     rvm   2263 Apr  5 13:04 rvm-shell*
-rwxrwxr-x  1 root     rvm    648 Apr  5 13:04 rvm-smile*
-rwxrwxr-x  1 root     rvm   2229 Apr  5 13:04 rvmsudo*
lrwxrwxrwx  1 appusr   rvm     44 Apr  5 13:11 testrb-ruby-2.0.0-p0 -> /usr/local/rvm/wrappers/ruby-2.0.0-p0/testrb*
lrwxrwxrwx  1 appusr   rvm     51 Apr  5 13:11 testrb-ruby-2.0.0-p0@global -> /usr/local/rvm/wrappers/ruby-2.0.0-p0@global/testrb*
appusr@server-name:/usr/local/rvm/bin$ 
appusr@server-name:/usr/local/rvm/bin$ 
appusr@server-name:/usr/local/rvm/bin$ 
appusr@server-name:/usr/local/rvm/bin$ which ruby
appusr@server-name:/usr/local/rvm/bin$ which irb
appusr@server-name:/usr/local/rvm/bin$ which gem
appusr@server-name:/usr/local/rvm/bin$ /usr/bin/env ruby -v
/usr/bin/env: ruby: No such file or directory
appusr@server-name:/usr/local/rvm/bin$ ruby -v
The program 'ruby' can be found in the following packages:
 * ruby1.8
 * ruby1.9.1
Ask your administrator to install one of them
appusr@server-name:/usr/local/rvm/bin$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:25:55.747

您应该`/usr/local/rvm/wrappers`特别检查`/usr/local/rvm/wrappers/default`可以`PATH`在环境中没有其他设置的情况下使用的二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:52:13.533

我相信我发现了问题所在。显然`rvm`没有作为函数正确加载，即
`$ type rvm | head -n 1`
没有返回“rvm 是一个函数”，而是像“rvm is hashed”（...？...）。

有趣的是，问题不仅限于系统范围的安装。我对系统范围的**rvm**安装进行了内爆，删除了 中的引用`/etc`，然后再次安装它而没有`sudo`...同样的问题。

我会说这是我的错，“我的”是指我不知道**bash**如何处理某些用户切换。它可能对其他人也有用，所以我会报告我所做的。

我以普通用户的身份 ssh 进入服务器，然后切换到将运行 rails 堆栈的用户：（`su appusr`使用 bash）。

之后，我安装`rvm`使用：
`$ \curl -L https://get.rvm.io | bash -s stable`

* * *

当我尝试系统范围的安装时，我当然也将用户添加到**rvm**组：
`$ sudo usermod -a -G rvm appusr`

* * *

...然后注销并再次登录：`exit`，然后再次`su appusr`。

现在，似乎这样做**bash**只是 sourcing `~/.bashrc`，而不是`~/.bash_profile`rvm 放置语句以`rvm`作为函数加载的位置：
`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"`

不过，`rvm`二进制文件在我的**PATH**中，我可以发出安装 ruby​​ 所需的命令。
到现在为止还挺好。
问题是安装后它以某种方式未能选择我安装的**唯一** `ruby`解释器作为默认解释器，因此它没有创建符号链接。

我注意到了这一点，因为当我发布时，我看到`rvm list`了：

```
rvm rubies

   ruby-2.0.0-p0 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

...注意它是如何**没有**标记的`=*`。
我使用了 command `rvm use ruby-2.0.0-p0 --default`，并被警告说 rvm 没有*作为函数加载，*并且某些东西无法工作（无法记住确切的消息）。

这是一个突破，当我找到时，`~/.bash_profile`我可以成功地选择它，`ruby`并且立即创建所有符号链接（`ruby`、`irb`、`rake`等）。

不过，这并不理想。
我的文件夹的默认设置`$HOME`通常包含三个文件：`~/.profile`和`~/.bash_profile`（`~/.bashrc`加上 的文件`zsh`）。
`~/.bash_profile`是由**rvm**安装添加的，我有它 source `~/.profile`。，然后，如果正在使用 **bash**
`~/.profile`，则自动获取源。`~/.bashrc`

 **但是，正如我所说，通过执行`su appusr` **bash**只是 sources `~/.bashrc`，因此无法解析将*rvm 作为函数*加载的语句。很烦人。
告诉`~/.bashrc`源代码`~/.bash_profile`需要某种控制（一个 ENV 变量？）以避免无限引用循环，而且似乎有点矫枉过正......
所以我刚`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"`进入`~/.bashrc`，我想说现在一切似乎都正常了。**

# jquery - 使用图像切换多个 div

> ID：15835331
> 
> 赞同：-1
> 
> 时间：2013-04-05T13:33:24.750
> 
> 标签：jquery, image, toggle

我喜欢 Vytautas Butkus 对这个问题的解决方案（第二个答案在[jQuery hide and show toggle div with plus and minus icon](https://stackoverflow.com/questions/14186565/jquery-hide-and-show-toggle-div-with-plus-and-minus-icon) and a demo [here](http://jsfiddle.net/z7F75/41/)）：

```
 $(".toggle").on("click", function(e){
    $(this).toggleClass("expanded");
    $content.slideToggle();
  }); 
```

但是，如果每页有多个 div，则此代码会同时切换它们。其他解决方案接近我正在寻找的东西，但我喜欢这段代码使用图像，在切换时更改图像，并且不使用锚标签。如何修改此代码以使其功能相同但仅打开被单击的 div？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:39:50.733

```
$(document).ready(function(){

   $(".slidingDiv").hide();
   $(".show_hide").show();

   $('.show_hide').toggle(function(){
       var that = $(this);
       $(this).next(".slidingDiv").slideDown(
         function(){
          that.text("-")
         }
       );
   },function(){
       var that = $(this);
       $(this).next(".slidingDiv").slideUp(
       function(){
          that.text("+")
       }
       );
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:36:06.433

`next()`如果您的带有类切换的 div 和带有类内容的 div 分别彼此相邻，则可以使用...

```
$(document).ready(function () {
  var $content = $(".content").hide();
  $(".toggle").on("click", function (e) {
    $(this).toggleClass("expanded");
    $(this).next().slideToggle();
  });
}); 
```

[在这里工作小提琴](http://jsfiddle.net/bipen/z7F75/47/)

# java - JRadioButton 输入无响应

> ID：15835334
> 
> 赞同：0
> 
> 时间：2013-04-05T13:33:35.397
> 
> 标签：java, swing, input, jradiobutton

我是Java的新手，并且一般编程。我正在尝试一个练习，在选择时，我可以在其中创建可更改背景颜色的无线电按钮。在我使用Eclipse IDE的那一刻。

Eclipse 没有给我任何错误，我可以很好地运行 b/m 程序，单选按钮显示出来并且可以点击。但是，当我选择单选按钮时，它们无法更改背景颜色。我会很感激我能得到的任何答案和指示。

谢谢！

```
 import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;
    import javax.swing.event.*;

    public class Gui{
    //Declares Variables
    JRadioButton red=new JRadioButton("red");
    JRadioButton blue=new JRadioButton("blue");
    JRadioButton yellow=new JRadioButton("yellow");
    ButtonGroup group = new ButtonGroup();
    //Constructor
    public Gui(){
        //Sets title
        super("RadioButton Exercise");
        //Sets layout as default
        setLayout(new FlowLayout());
        //Adds the JRadioButtons
        add(red);
        add(blue);
        add(yellow);
        //Groups the variables
        group.add(red);
        group.add(blue);
        group.add(yellow);
        //Creates HandlerClass object
        HandlerClass handler = new HandlerClass();
        //When buttons are clicked, HandlerClass is called
        red.addItemListener(handler);
        blue.addItemListener(handler);
        yellow.addItemListener(handler);

    }

    public class HandlerClass implements ItemListener{
        public void itemStateChanged(ItemEvent x){
            if(x.getSource()==red){
                setBackground(Color.RED);
            }
            else if(x.getSource()==blue){
                setBackground(Color.BLUE);
            }
            else{
                setBackground(Color.YELLOW);
            }
        }
    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:37:42.267

假设你的意思是

```
public class Gui extends JFrame { 
```

不是`JRadioButton`没有响应，问题是`setBackGround`直接在框架上调用，而不是它的可见组件，即`ContentPane`. 您可以使用：

```
getContentPane().setBackground(Color.RED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:52:04.657

你有类似的条件`x.getSource()==red`。它不比较`objects`；它比较`object references`。所以即使两个不同的对象引用指向*同一个*对象，这样的表达式也会产生`False`。

如果要比较对象，则需要使用`equals`方法。为了`equal`产生有意义的结果，这两个对象应该是相同的类型。

我建议如下：`(JradioButton)x.getSource().equals(red);`

# vb.net - UltraGrid 获取所有单元格

> ID：15835337
> 
> 赞同：2
> 
> 时间：2013-04-05T13:33:43.957
> 
> 标签：vb.net, infragistics, ultrawingrid

我找不到将**所有**单元格放入`UltraGrid`. 我想在 foreach 循环中通过它们。

有没有办法让他们全部获得？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:37:03.450

遍历所有[`Rows`](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGridBase~Rows.html)网格，然后遍历所有[`Cells`](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGridRow~Cells.html)行：

```
foreach(var row in myGrid.Rows)
{
   foreach(var cell in row.Cells)
   {
      // Do stuff
   }
} 
```

# jquery - jQuery - onChange 事件不会在结果站点上触发

> ID：15835343
> 
> 赞同：1
> 
> 时间：2013-04-05T13:34:07.157
> 
> 标签：jquery, onchange

我遇到了一个不寻常的错误，我不知道为什么。

我有一个带有搜索掩码的页面。根据您的选择，我通过 JSON 从 php 文件中获取可用数据并用它填充选择选项。其目的是当您选择特别优惠时，您只会列出可用的优惠类型和地区，而不是那些没有优惠的活动。

主要它适用于页面的每个站点，使用 document.Ready 函数或 onchange="updateFunction" 事件。

现在，当我搜索和显示数据 (GET) 时工作​​正常，onChange jQuery 事件似乎没有触发，我不知道为什么。这是我得到的……（我之前用 doc.ready 函数做过）

```
 function updateDestination(){
    $('select#feld-urlaubsart').change(function() {
      var options = '';
      $.getJSON("database/checkoffers.php",{offertype: $(this).val()}, function(data){
        for (var i = 0; i < data.length; i++) {
           options += '<option value="' + data[i].optionValue + '">' + data[i].optionDisplay + '</option>';
        }
        $("select#feld-reiseziel").html(options);
       });
     });
    }

    function updateRegions(){
      $('select#feld-reiseziel').change(function() {
        var options = '';
        $.getJSON("database/checkregions.php",{country: $(this).val()}, function(data){
         for (var i = 0; i < data.length; i++) {
           options += '<option value="' + data[i].optionValue + '">' + data[i].optionDisplay + '</option>';
        }
        $("select#feld-region").html(options);
       });
      });
    } 
```

以前有人遇到过同样的问题吗？

编辑 ：

```
<select id="feld-urlaubsart" name="Urlaubsart" title="Bitte Angebotsart auswählen...">
<option value="0" selected="selected">Alle anzeigen</option>
<optgroup label="Golfurlaub mit Greenfees" title="Golfurlaub mit Greenfees">
<option value="1" title="Alle Greenfee Angebote">Alle Greenfee-Angebote</option>
<option value="2" title="Top-Angebote">Top-Angebote</option>
<option value="3" title="Golfurlaub mit 4 Tage Greenfee">Golfurlaub mit 4 Tage Greenfee</option>
<option value="4" title="Golfurlaub mit 5 Tage Greenfee">Golfurlaub mit 5 Tage Greenfee</option>
<option value="5" title="Golfurlaub mit 6 Tage Greenfee">Golfurlaub mit 6 Tage Greenfee</option>
<option value="6" title="Golfurlaub mit 7 Tage Greenfee">Golfurlaub mit 7 Tage Greenfee</option>
<option value="7" title="Golfurlaub mit 14 Tage Greenfee">Golfurlaub mit 14 Tage Greenfee</option>
<option value="8" title="Sonderangebote">Sonderangebote</option>
</optgroup>

<optgroup label="Golfreisen mit Golfkurs" title="Golfreisen mit Golfkurs">
<option value="9" title="Alle Golfkurs-Angebote">Alle Golfkurs-Angebote</option>
<option value="10" title="Top-Angebote">Top-Angebote</option>
<option value="11" title="Golfreise mit Platzreifekurs">Golfreise mit Platzreifekurs</option>
<option value="12" title="Golfreise mit DGV-Platzreifekurs">Golfreise mit DGV-Platzreifekurs</option>
<option value="13" title="Golfreise mit Turnierreifekurs">Golfreise mit Turnierreifekurs</option>
<option value="14" title="Golfreise mit Handicapkurs">Golfreise mit Handicapkurs</option>
<option value="15" title="Golfreise mit Wochenend-Intensivkurs">Golfreise mit Wochenend-Intensivkurs</option>
<option value="16" title="Golfreise mit Turniergolfwoche">Golfreise mit Turniergolfwoche</option>
<option value="17" title="Professionell begleitete Golfreise">Professionell begleitete Golfreise</option>
</optgroup>
</select>

Reiseland<br />
<select id="feld-reiseziel" name="Reiseziel" title="Bitte Reiseland auswählen...">
<option value="Egal" selected="selected">Alle anzeigen</option>

<?php foreach ($data as $row) : ?>
<option value="<?php echo $row['OfferCountry'] ; ?>" title="<?php echo $row['OfferCountry'] ; ?>"><?php echo $row['OfferCountry'] ; ?></option>
<?php endforeach; ?>
</select>

<select id="feld-region" name="Region" title="Bitte Region auswählen...">
<option value="Egal" selected="selected">Alle anzeigen</option>
<?php foreach ($data as $row) : ?>
<?php if(!empty ($row['OfferRegion'])) :?>
<option value="<?php echo $row['OfferRegion'] ; ?>" title="<?php echo $row['OfferRegion'] ; ?>"><?php echo $row['OfferRegion'] ; ?></option>
<?php endif; ?>
<?php endforeach; ?>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:39:19.620

尝试将其委​​托给文档

```
 $(document).on('change','select#feld-urlaubsart',function(){
  .....
 }); 
```

而且我认为您不需要函数来调用更改事件...删除该函数`function updateDestination(){`， `function updateRegions(){`除非您出于其他原因调用它

# python - 拦截文本框中任何类型的文本删除

> ID：15835344
> 
> 赞同：0
> 
> 时间：2013-04-05T13:34:11.723
> 
> 标签：python, tkinter

如何在我的 Tkinter 程序中拦截任何文本删除？

到目前为止，我已绑定`<Delete>, <Cancel>, <BackSpace>`，但我不知道如何检查用户在进行选择时何时按下键 - 导致所选文本删除。

我已经在我的程序中使用 了 Bryan Oakley在此处建议 的在[文本小部件中应用标签](https://stackoverflow.com/questions/7659069/apply-tags-in-a-text-widget/7663455#7663455)`MyText`的方法的类，但是该方法在用户按下键**后**触发，所以如果我在那里检查是否存在选择，我发现没有。`OnKey``OnKey`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:00:37.637

我应该向您推荐使用[http://effbot.org/tkinterbook/text.htm](http://effbot.org/tkinterbook/text.htm)选择标签，以了解选择是什么，将其放在类的属性中，并在引发事件 OnKey 时查看它**

# ios6 - TextField 在退格键上清除内容

> ID：15835347
> 
> 赞同：0
> 
> 时间：2013-04-05T13:34:19.663
> 
> 标签：ios6, textfield, backspace

我已经在`storyboard`一个视图中设置了两个内容`textfields`：一个打开了安全选项，另一个没有。

我已经在关联的 viewController`textfields`的方法中设置了那些内容。`viewDidLoad`如果我选择打开安全注释的文本字段，然后选择另一个并单击退格键，后者的所有内容都会被清除。如果我第一次直接选择没有安全选项的文本字段，则不会发生这种情况。

有人知道这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T13:44:01.490

看起来这是一个错误，出现在`iOS6`并与引入的更改相关`UITextField`，其他人也观察到 和 之间的行为`iOS5`变化`iOS6`；看到这篇[文章](https://stackoverflow.com/questions/14400724/backspace-functionality-in-ios-6-ios-5-for-uitextfield-with-secure-attribute)：（iOS 6 和 iOS 5 中的退格功能，用于具有“安全”属性的 UITextfield）

# command-line - jpegtran 整个目录

> ID：15835351
> 
> 赞同：7
> 
> 时间：2013-04-05T13:34:24.923
> 
> 标签：command-line, directory, putty, libjpeg

我想使用命令行中的 jpg 图像优化整个测试文件夹。我发现了这个，但它不起作用：

```
cd /home/site/html/update/test/
find . -exec jpegtran -optimize "{}" "{}.opti.jpg" "{}" \; 
```

我想覆盖现有的图像。

建议？

回答：

```
find /img/path -name "*.jpg" -type f -exec jpegtran -copy none -optimize -outfile {} {} \; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-19T01:03:55.143

回答：

```
find /img/path -name "*.jpg" -type f -exec jpegtran -copy none -optimize -outfile {} {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T08:00:25.250

虽然它很早就在这里解决了，但**谈论的是 Python 方法：**

```
import subprocess
for image_name in arr:
    subprocess.call(["jpegtran", "-your", "-instructions"]) 
```

假设您的指令类似于：

`jpegtran -optimize -progressive -scans script_new.txt -outfile progressive.jpg original.jpg`

所以你的指令会是这样的：

```
subprocess.call(["jpegtran", "-optimize", "-progressive", "-scans", f"{scan_name}.txt", "-outfile", name_progressive, name_original]) 
```

为方便起见，name_progressive、name_original 和 scan_name 是变量，使用 f-string 概念。

# java - Android，使用异步任务从 url 中获取文本

> ID：15835357
> 
> 赞同：1
> 
> 时间：2013-04-05T13:34:33.607
> 
> 标签：java, android, url, android-asynctask

是的，我认为就这一点而言，您应该将我视为一个完整的菜鸟，我已经过头了。

我试图从几个部分教程中拼凑出我对此的理解，每个教程都涉及我想做的不同方面。

总而言之，我想做的就是从 URL 读取文本以显示在文本视图中，我的理解是自 3.0 更新以来我需要一个 AsyncTask 来执行此操作。

任何关于我哪里出错的帮助都会很棒，因为我不明白是什么导致了错误以及如何解决。

我确实知道 doInBackground 的 try 和 catch 中包含的代码在 3.0 更新之前可以自行运行。这是否也需要修改以使用 Async 但我不知道。

我还想，一旦对这个问题进行排序，可能会出现其他问题，如果有人发现一些明显的东西，如果你能指出的话，我将不胜感激。

```
String Event;
TextView eventText;
TextView titleText;

String HTML;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newevent);

    titleText = (TextView) findViewById(R.id.Title);
    eventText = (TextView) findViewById(R.id.Event);

    new eventupdate().execute();

}

public class eventupdate extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... url) {

        try {

            Thread.sleep(4000);                 

            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpGet httpGet = new HttpGet(
                    "http://masterzangetsu.eu/Apps/rocksoctest"); // URL!
            HttpResponse response = httpClient.execute(httpGet,
                    localContext);
            String result = "";

            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(response.getEntity().getContent()));

            String line = null;
            while ((line = reader.readLine()) != null) {
                result += line + "\n";
                HTML = result;
            }

        } catch (InterruptedException e) {

            e.printStackTrace();

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        eventText.setText("" + HTML);

        // TODO Auto-generated method stub
        return null;
    }

} 
```

LogCat 错误是：

```
W/dalvikvm(394): threadid=9: thread exiting with uncaught exception (group=0x40015560)
E/AndroidRuntime(394): FATAL EXCEPTION: AsyncTask #1
E/AndroidRuntime(394): java.lang.RuntimeException: An error occured while executing doInBackground()
E/AndroidRuntime(394):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
E/AndroidRuntime(394):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
E/AndroidRuntime(394):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
E/AndroidRuntime(394):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
E/AndroidRuntime(394):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
E/AndroidRuntime(394):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
E/AndroidRuntime(394):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
E/AndroidRuntime(394):  at java.lang.Thread.run(Thread.java:1019)

E/AndroidRuntime(394): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.

E/AndroidRuntime(394):  at android.view.ViewRoot.checkThread(ViewRoot.java:2932)
E/AndroidRuntime(394):  at android.view.ViewRoot.requestLayout(ViewRoot.java:629)
E/AndroidRuntime(394):  at android.view.View.requestLayout(View.java:8267)
E/AndroidRuntime(394):  at android.view.View.requestLayout(View.java:8267)
E/AndroidRuntime(394):  at android.view.View.requestLayout(View.java:8267)
E/AndroidRuntime(394):  at android.view.View.requestLayout(View.java:8267)
E/AndroidRuntime(394):  at android.widget.ScrollView.requestLayout(ScrollView.java:1291)
E/AndroidRuntime(394):  at android.view.View.requestLayout(View.java:8267)
E/AndroidRuntime(394):  at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:257)
E/AndroidRuntime(394):  at android.view.View.requestLayout(View.java:8267)
E/AndroidRuntime(394):  at android.widget.TextView.checkForRelayout(TextView.java:5521)
E/AndroidRuntime(394):  at android.widget.TextView.setText(TextView.java:2724)
E/AndroidRuntime(394):  at android.widget.TextView.setText(TextView.java:2592)
E/AndroidRuntime(394):  at android.widget.TextView.setText(TextView.java:2567)
E/AndroidRuntime(394):  at com.MasterZangetsu.kentrocksoc.nextEvent$eventupdate.doInBackground(nextEvent.java:81)
E/AndroidRuntime(394):  at com.MasterZangetsu.kentrocksoc.nextEvent$eventupdate.doInBackground(nextEvent.java:1)
E/AndroidRuntime(394):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
E/AndroidRuntime(394):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:37:26.440

这条线在这里

```
 eventText.setText("" + HTML); 
```

导致你的问题。您无法更新`UI`from `doInBackground()`。它必须在其他方法之一中完成或发送回主要`Activity`方法。在这里你可以做到`onPostExecute()`

[通读 AyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)

有不同的方法可以实现这一点，但您可以将`AsyncTask`返回结果更改为`onPostExecute()`

```
public class eventupdate extends AsyncTask<String, Void, String> // change last param 
```

然后在中添加`onPostExecute()`方法和更改`return`语句`doInBackground()`

```
public class eventupdate extends AsyncTask<String, Void, String>

 @Override
 protected void onPostExecute(String result) {
        super.onPostExecute(result);
         eventText.setText("" + result);
}

 @Override
    protected String doInBackground(String... url) {
   // do your work
   return HTML; 
```

# numpy - 如何用 python numpy 矢量化解决这个练习？

> ID：15835358
> 
> 赞同：0
> 
> 时间：2013-04-05T13:34:36.427
> 
> 标签：numpy

如何使用 python Numpy 矢量化解决第 2 页上的练习 4.5？

下载链接：

[https://dl.dropbox.com/u/92795325/Python%20Scripting%20for%20Computational%20Scien%20-%20H.P.%20%20Langtangen.pdf](https://dl.dropbox.com/u/92795325/Python%20Scripting%20for%20Computational%20Scien%20-%20H.P.%20%20Langtangen.pdf)

我用 Python 循环试过这个，但我需要矢量化版本。

```
from numpy import *
import time

def fun1(x):
       return 2*x+1

def integ(a,b,n):
       t0 = time.time()
       h = (b-a)/n
       a1 = (h/2)*fun1(a)
       b1 = (h/2)*fun1(b)
       c1 = 0
       for i in range(1,n,1):
              c1 = fun1((a+i*h))+c1
       t1 = time.time()
       return a1+b1+h*c1, t1-t0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:20:09.890

要*“矢量化”*使用`numpy`，这意味着不是像这样进行显式循环，

```
for i in range(1, n):
    c = c + f(i) 
```

然后你应该把`i`它做成一个 numpy 数组，然后简单地取它的总和：

```
i = np.arange(1,n)
c = i.sum() 
```

numpy 会自动为您进行矢量化。这更快的原因是由于各种原因，numpy 循环以比普通 python 循环更好的优化方式完成。一般来说，循环/数组越长，优势就越大。这是您实现的梯形积分：

```
import numpy as np

def f1(x):
    return 2*x + 1

# Here's your original function modified just a little bit:
def integ(f,a,b,n):
    h = (b-a)/n
    a1 = (h/2)*f(a)
    b1 = (h/2)*f(b)
    c1 = 0
    for i in range(1,n,1):
        c1 = f((a+i*h))+c1
    return a1 + b1 + h*c1

# Here's the 'vectorized' function:
def vinteg(f, a, b, n):
    h = (b-a) / n
    ab = 0.5 * h * (f(a)+f(b)) #only divide h/2 once

    # use numpy to make `i` a 1d array:
    i = np.arange(1, n) 
    # then, passing a numpy array to `f()` means that `f` returns an array
    c = f(a + h*i) # now c is a numpy array

    return ab + c.sum() # ab + np.sum(c) is equivalent 
```

在这里，我将把我命名的内容导入`tmp.py`到`ipython`会话中，以便比使用更容易计时`time.time`：

```
import trap
f = trap.f1
a = 0
b = 100
n = 1000

timeit trap.integ(f, a, b, n)
#1000 loops, best of 3: 378 us per loop

timeit trap.vinteg(f, a, b, n)
#10000 loops, best of 3: 51.6 us per loop 
```

哇，快七倍。

看看它是否对较小的人有很大帮助`n`

```
n = 10

timeit trap.integ(f, a, b, n)
#100000 loops, best of 3: 6 us per loop

timeit trap.vinteg(f, a, b, n)
#10000 loops, best of 3: 43.4 us per loop 
```

不，小循环要慢得多！非常大`n`呢？

```
n = 10000

timeit trap.integ(f, a, b, n)
#100 loops, best of 3: 3.69 ms per loop

timeit trap.vinteg(f, a, b, n)
#10000 loops, best of 3: 111 us per loop 
```

快三十倍！

# c# - C# Winforms Designer 无法打开，因为它在同一程序集中找不到类型

> ID：15835360
> 
> 赞同：17
> 
> 时间：2013-04-05T13:34:37.367
> 
> 标签：c#, winforms, custom-controls, windows-forms-designer

我收到以下错误

> 找不到类型“My.Special.UserControl”。请确保引用了包含此类型的程序集。如果此类型是您的开发项目的一部分，请确保已使用当前平台或任何 CPU 的设置成功构建项目。

但是没有任何意义的是它`My.Special.UserControl`与表单在同一个程序集中。`My.Special.UserControl`更重要的是，如果我查看 Designer.cs 文件中的代码，似乎有一些参考。该程序集构建良好，并且运行良好。只有设计师有问题。

因此，我们必须通过手动调整 Designer.cs 文件来完成所有设计工作。我怎样才能让设计师再次工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-25T03:50:36.187

以下程序对我有用：

1.  删除源代码目录中的 /bin 和 /obj 文件夹。
2.  重新启动 VS（确保有问题的表单设计器已关闭）
3.  编译
4.  再次在 Designer 中打开表单。问题应该得到解决。

我确定不需要同时删除 /bin 和 /obj，但我无法重现错误并找到更具体的解决方案。（我的项目通常足够小，重新编译整个项目没什么大不了的。）

通常，此错误似乎发生在重构/重命名违规类的对象之后。所以我的猜测是，在重构用户控件或自定义控件后，有一个 VS 错误不会重新编译适当的目标文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-03-30T15:34:28.673

将项目类型临时更改为x86，编译并打开Designer。Visual Studio 是一个 32 位应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T13:39:11.050

您的表单/用户控件的加载或初始化部分可能发生了异常。您可以尝试注释掉那里的任何代码并重新尝试在设计器中打开吗？

您可以使用 Visual Studio 的另一个实例将调试器附加到您的 Visual Studio 实例，而不是让您打开窗体。一旦发生异常，您将能够查明出现问题的位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-20T16:28:32.610

我遇到了完全相同的问题。我相当确定它已连接到平台目标 x64。这是一篇相关文章，将其作为 Visual Studio 中的错误提及：

[https://stackoverflow.com/a/11582828/7665665](https://stackoverflow.com/a/11582828/7665665)

我如何处理：虽然我的解决方案实际上只有 x64，但我为项目创建了另一个平台目标 x86，只是为了能够使用设计器。现在我将目标切换到 x86，以便在 VS Designer 中查看我的控件。对于其他一切，我切换回 x64。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-13T07:15:00.857

从 VS 2017 社区版转到专业版时，我遇到了类似的问题。

1.  关闭 VS
2.  转到项目文件夹
3.  删除 .vs 文件夹。如果需要，请备份。
4.  开始 VS

这应该可以解决问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-16T10:06:10.727

我对从我的 form.cs 中的标准 .NET 控件派生的用户控件有同样的问题。以上没有对我有用（我的解决方案编译为 x64，因为其他非托管组件仅支持 x64）。

我最终创建了一个单独的项目“Utils”并将有问题的派生控件移至该项目。这就像一个魅力！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-31T08:56:31.983

将项目目标切换到 x86 是我唯一可能的解决方案

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-25T02:17:00.847

就我而言，我只是卸载项目并再次重新加载

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-01T17:40:33.327

今天发生在我身上。清理、重建、重新启动 Vs 甚至重新启动都没有帮助。一切都按预期运行，唯一不起作用的是 VS 中的设计器。

在我的情况下，由于没有任何工作，我去了设计器文件，删除了有问题的控件，然后添加了一个新控件。重命名，重新分配事件侦听器并且它起作用了。

Designer 现在可以工作了，但如果这一定是某种 VS 错误，我不知道。

* * *

这不是我来 SO 时想阅读的答案，但我会发布它以防以后对任何人有帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-13T17:27:29.773

对我来说，我删除了表单的 .resx 文件，它构建并显示在设计器中，没问题。去搞清楚....

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-25T09:30:30.300

在我的项目中，只有当我在解决方案的单独项目中创建自定义用户控件时它才有效：

1.  添加新项目“类库（.NET Framework）”
2.  添加对 System.Windows.Forms & System.Drawing 的引用
3.  在新项目中添加新用户控件的源
4.  构建解决方案
5.  打开设计器
6.  在窗体中拖动新的用户控件

在我的例子中，当我在表单中拖动自定义用户控件时，设计器会自动添加对新项目的引用。

希望这可以帮助其他偶然发现这个问题的人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-19T09:07:21.203

当我对 DataGridView 进行子分类时，我也有类似的经历。以下程序对我有用：

1.  关闭表单设计器选项卡
2.  关闭 VS (2015)
3.  删除项目的 /bin 和 /obj 文件夹
4.  重启VS
5.  重建解决方案

我不知道可以跳过哪些步骤，因为我没有花时间完善流程。

# c# - NPOI：编辑单元格

> ID：15835361
> 
> 赞同：0
> 
> 时间：2013-04-05T13:34:39.350
> 
> 标签：c#, excel, npoi

我正在使用以下代码编辑 excel 文件的单元格，但在 escel 文件中看不到我的更改。

```
 using (var fs = new FileStream(reconnFileName, FileMode.Open, FileAccess.ReadWrite))
    {
        HSSFWorkbook template = new HSSFWorkbook(fs, true);
        ISheet sheet = template.GetSheetAt(0);

        int rownumber=3;
        foreach(StringBuilder cardHolderValue in cardHolderValues)
        {
            sheet.GetRow(rownumber).Cells[2].SetCellValue(cardHolderValue.ToString());
            rownumber++;
        }
    } 
```

而且我在其中找不到任何`Save()`功能。请让我知道如何保存我的编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:39:02.340

看：[http](http://dotnetslackers.com/articles/aspnet/Create-Excel-Spreadsheets-Using-NPOI.aspx#s7-conclusion) ://dotnetslackers.com/articles/aspnet/Create-Excel-Spreadsheets-Using-NPOI.aspx#s7-conclusion 。有一种 Write 方法可以保存您的 excel 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T08:56:20.313

template.Write(new FileStream("c:/path", FileMode.Create, FileAccess.ReadWrite));

# git - Git 在 Windows 控制台中找不到 ssh 密钥

> ID：15835365
> 
> 赞同：1
> 
> 时间：2013-04-05T13:34:53.067
> 
> 标签：git, msysgit

我有一个 git 存储库，我可以在我的 Windows 机器和 Bash-console 中成功克隆它。但是当我试图在 Windows 控制台中克隆它时，git 找不到 ssh-keys 并询问我的密码。

以下是一些有用的信息：

```
[36]: ssh -v -T xx.xxx.xxx.xxx
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug1: Connecting to xx.xxx.xxx.xxx [xx.xxx.xxx.xxx] port 22.
debug1: Connection established.
debug1: identity file /.ssh/identity type -1
debug1: identity file /.ssh/id_rsa type -1
debug1: identity file /.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.8
debug1: match: OpenSSH_5.8 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_4.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-md5 none
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host '62.105.139.252' is known and matches the RSA host key.
debug1: Found key in /.ssh/known_hosts:3
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,keyboard-interactive
debug1: Next authentication method: publickey
debug1: Trying private key: /.ssh/identity
debug1: Trying private key: /.ssh/id_rsa
debug1: Trying private key: /.ssh/id_dsa
debug1: Next authentication method: keyboard-interactive
Password: 
```

$HOMW：

```
[43]: echo $HOME 
C:\Users\myname 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:10:15.430

如果你这样做了，`cd ~; pwd -W`那么你的 bash 密钥就在这个文件夹的 .ssh 子目录中。pwd -W 给出了您所在的 msys 目录的 Windows 路径。大概在您的情况下，这与 cmd 提示符 shell 中的 HOME 或 USERPROFILE 或 HOMEPATH 不同。您可以使用 HOME 环境变量来确保它们都匹配。如果您没有在 Windows 环境中设置 HOME，那么它会设置为 %HOMEDRIVE%%HOMEPATH%（如果已设置）或 %USERPROFILE%（取决于您是否在 NT 域上，我相信）。如果您自己设置 HOME，那么这将覆盖任何自动检测。

# excel - VBA 错误“无法更改数据表的一部分”

> ID：15835366
> 
> 赞同：0
> 
> 时间：2013-04-05T13:34:56.807
> 
> 标签：excel, excel-2007, vba

我有创建数据透视表的代码，然后用数据填充另一个工作簿。它打开一个充当数据模板的工作簿，填充它，保存并关闭。它对 8 组不同的数据执行此操作 8 次。我之前已经多次运行此代码而没有问题，现在它似乎开始出现错误：第二组数据（第一个有效）上的“无法更改数据表的一部分”。它出错的部分是......

```
'Transfers Repairs Data
Range("D27").Select
ActiveCell.FormulaR1C1 = _
    "=VLOOKUP(RC[-1],'[VBA Project.xlsm]Repairs Pivot'!R5C8:R60C11,4,FALSE)"
Selection.AutoFill Destination:=Range("D27:D30"), Type:=xlFillDefault
Range("D27:D30").Select
Range("D85").Select
ActiveCell.FormulaR1C1 = _
    "=VLOOKUP(RC[-1],'[VBA Project.xlsm]Repairs Pivot'!R5C8:R60C11,4,FALSE)" 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:46:54.733

不是真正的答案，而是帮助您的改进。

```
'Transfers Repairs Data
Range("D27:D30").FormulaR1C1 = _
    "=VLOOKUP(RC[-1],'[VBA Project.xlsm]Repairs Pivot'!R5C8:R60C11,4,FALSE)"
Range("D85").FormulaR1C1 = _
    "=VLOOKUP(RC[-1],'[VBA Project.xlsm]Repairs Pivot'!R5C8:R60C11,4,FALSE)" 
```

还要确保您在正确的工作表上，并且正如其他人所评论的那样，您没有尝试粘贴这些公式的数据表。要使用特定工作表，您可以更改上述内容：

```
Sheets("Sheet1").Range("D27:D30").FormulaR1C1 
```

# c++ - c++ 中字符串和 ofstream 参数的类似 Java 的 null

> ID：15835371
> 
> 赞同：0
> 
> 时间：2013-04-05T13:35:03.900
> 
> 标签：c++, null, arguments

我有一些 Java 代码（构造函数）

```
RecursiveDescentParser
(
  std::string inputStream, 
  bool fileService, 
  std::string filePathName, 
  std::ofstream writer
)
{
  input_ = inputStream;
  tokenizer_ = new Tokenizer(inputStream);
  if (fileService == true){
      error = new ErrorHandling(fileService, std::move(writer));
  }
  else{
      error = new ErrorHandling(fileService, std::ofstream());
  }     
  compiled_ = "";
}

Tokenizer *tokenizer_;

std::string input_, compiled_; 
```

我想在 C++ 中模拟一个调用

```
RecursiveDescentParser *parser = new RecursiveDescentParser
(
  stream, 
  false, 
  null, 
  null
); 
```

如果我使用指针参数

```
std::string *str; std::ofstream *out 
```

我可以传入nullptr，但如果我选择不使用指针参数，我就不能传递null。我可以做些什么来模拟将 null 传递给 std::string 和 std::ofstream？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:40:35.707

正如您所说，指针是一种选择；但是会产生复杂性，因为您需要单独管理对象或使用智能指针。共享指针是一种可能性，并且提供与 Java 的对象引用非常相似的语义（仅使用引用计数而不是垃圾收集）。

对于可空对象类型，您可以使用[Boost.Optional](http://www.boost.org/doc/libs/release/libs/optional/doc/html/index.html)，或实现您自己的可空包装类。有谈论`optional`被包含在未来的标准库中；但就目前而言，您需要 Boost。

或者，提供第二个完全不接受这些参数的构造函数可能更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:44:56.747

这就是我将如何改变你的用法：

```
RecursiveDescentParser
(
  std::string inputStream, 
  bool fileService = false, 
  std::string filePathName = "", 
  std::ofstream* writer = NULL
)

RecursiveDescentParser *parser = new RecursiveDescentParser(stream); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:37:50.317

您有两个选择 - 创建一个表示可选值的包装类或使用指针。我强烈推荐第一个选项。

此外，在某些情况下，您可能会认为空字符串等同于未设置值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:44:26.263

遗憾的是，C++ 中的字符串是对象，与 java 不同，C++ 对象不能为空。

据我了解，您正在为 RecursiveDescentParser 创建一个构造函数。构造函数的工作是初始化对象。

如果允许构造函数接受一个指针，它可以接受一个空路径字符串，那么它就会被创建一个空路径字符串，因为构造函数的工作是初始化所有字段，而空字段没有被初始化，这将不是一个好的解决方案。

我的建议是将构造函数设为私有，但创建一个公共方法，该方法可以接受构造函数的参数，但也可以是指向字符串而不是对象的指针。如果路径字符串指针为空，则抛出异常，或返回错误对象。如果路径字符串有效，则从对路径字符串指针指向的字符串的引用创建一个新的解析器，并返回此引用。

虽然，我可以完全离开，但这只是一个建议，我欢迎所有关于为什么这不起作用的建设性批评。

# facebook - Facebook 发送一次性通知

> ID：15835376
> 
> 赞同：0
> 
> 时间：2013-04-05T13:35:19.853
> 
> 标签：facebook, api, notifications

我一直在编写的应用程序的核心功能之一是能够向某人发送通知。不是来自用户，而是来自应用程序。

我已经成功地向我的应用程序的注册用户发送通知，这一切都像一个魅力。

我也有 facebook API 邀请工作，因此用户可以邀请他们的朋友使用该应用程序。

然而，与大多数游戏相反，其中两个人一起使用一个应用程序（如歌曲等），我的应用程序不应该从一直在使用该应用程序的用户那里发送通知。接收通知的人不应该知道用户。不过，发送通知的主动权在于用户。

关于这个主题的文档非常分散，在一个网站上解释说这个功能是可用的，而其他网站则相反。

是否有可能，以任何方式，我的应用程序可以向尚未授权我的应用程序的 Facebook 用户发送任何类型的一次性通知？

编辑：

基本上，我正在寻找的功能是用户 A 向用户 B（在他的朋友列表中）发起通知/消息，但用户 A 对用户 B 保持匿名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:30:23.360

You cannot send notifications to users who have not authorized your app. The [documenation](https://developers.facebook.com/docs/concepts/notifications/) is quite clear on this:

```
Apps can send notifications to any existing user that has authorized the app. 
```

# firefox - gog.com 的登录链接仅在 Firefox 中丢失（用于 HTTP）

> ID：15835377
> 
> 赞同：0
> 
> 时间：2013-04-05T13:35:25.697
> 
> 标签：firefox, cross-browser, webpage

gog.com 有一个 HTTP 站点 ( [http://www.gog.com/](http://www.gog.com/) ) 和一个 HTTPS 站点 ( [https://secure.gog.com/](https://secure.gog.com/) )。

当我在 Firefox 中访问 HTTPS 站点时，可以看到*登录/注册*链接：

![gog.com 在 Firefox 上通过 HTTPS](https://i.stack.imgur.com/kPwDc.png)

当我在 Firefox 中访问 HTTP 站点时，链接**丢失**：

![gog.com 通过 Firefox 上的 HTTP](https://i.stack.imgur.com/8SijT.png)

但是当我访问 Chromium 中的 HTTP 站点时，链接是可见的：

![gog.com 在 Chromium 上通过 HTTP](https://i.stack.imgur.com/nhYyX.png)

所以 gog.com 似乎并没有在 HTTP 上隐藏一般的登录链接。事实上，如果我禁用 CSS，我也可以在 Firefox 的 HTTP 变体上看到登录表单：

![gog.com 在没有 CSS 的 Firefox 上通过 HTTP](https://i.stack.imgur.com/ndLV0.png)

我联系了 gog.com 支持，但他们无法重现它。

我在不同系统上安装了三种不同的 Firefox 对其进行了测试，但我从未见过通过 HTTP*登录/注册。*只有我吗？！

我用 Firebug 检查了源代码。对于 HTTP，相关部分似乎是：

```
<div class="nav_user">
  <div class="nav_empty not_logged"></div>
</div> 
```

对于 HTTPS，它看起来像：

```
<div class="nav_user">
  <div class="nav_link nav_account nav_login" data-hoverclass="hover_acc">
    <span class="nav_login_icon"></span>
    <span class="nav_text">Login / Sign-up</span>
    <div class="nav_hover"></div>
  </div>
  <div class="nav_cart_h">
    <div class="nav_empty"></div>
  </div>
</div> 
```

有人对此有解释吗？为什么它在其他浏览器中有效，而在 Firefox 中无效？

**编辑**：他们的 HTTP 站点上的其他东西似乎在 Firefox 中也不起作用（但在 HTTPS 上没有任何问题）。例如，我不能使用主页上的大轮播：点击导航箭头不会做任何事情，点击一个游戏也不会。

那么所有这些问题可能都与JavaScript有关吗？Firefox 是否有任何安全功能不允许 HTTPS 上的某些功能或类似功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T08:58:50.683

无论出于何种原因，*gog.com*都需要 HTTP（但不是 HTTPS）的本地存储。

所以 about:config 设置[`dom.storage.enabled`](http://kb.mozillazine.org/Dom.storage.enabled)需要是`true`.

（ anime.stackexchange.com 和 Japanese.stackexchange.com 上的 JS 存在类似[问题）](https://anime.meta.stackexchange.com/q/699/1361)

# php - .htaccess 从目录重定向到页面

> ID：15835378
> 
> 赞同：-1
> 
> 时间：2013-04-05T13:35:28.963
> 
> 标签：php, .htaccess

我的 htaccess 文件中有一行

```
Redirect /popin http://www.mysite.com/category.html 
```

所以如果有人进入 `http://www.mysite.com/popin`它就会重定向到`http://www.mysite.com/category.html`

但如果有人键入 url，例如：

`http://www.mysite.com/popin/` 它正在重定向到未找到的页面，因此 url 末尾的最后一个斜杠将其重定向到未找到的页面

我想在我的 htaccess 文件中进行更改，这样如果有人进入`www.mysite.com/popin`或者`www.mysite.com/popin/`它应该重定向到

```
www.mysite.com/category.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:39:27.973

试试这个：

```
RewriteEngine on
RewriteRule ^/?poppin/?$ http://www.mysite.com/category.html [L] 
```

它使用`?`正则表达式运算符 on`/`来使重写规则匹配`/poppin`以及`/poppin/`.

您还可以尝试使用[`DirectorySlash`](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:38:40.103

你可以试试这个：

```
 RewriteCond %{REQUEST_FILENAME} -s [OR]
 RewriteCond %{REQUEST_FILENAME} -l [OR]
 RewriteCond %{REQUEST_FILENAME} -d
 RewriteRule ^.*$ - [NC,L]
 RewriteRule ^.*$ /category.html [NC,L] 
```

# asp.net - 页面刷新时防止在数据库上重复插入 - Asp.net

> ID：15835381
> 
> 赞同：0
> 
> 时间：2013-04-05T13:35:34.417
> 
> 标签：asp.net, duplicates, postback, records

(ASP.NET) 当用户在回发后刷新页面时，如何防止在我的数据库中插入重复记录。我知道它可以通过重定向页面来处理。它还通过检查存储过程中是否存在相同的条目来处理。但这有时不会完全满足要求。我只是想知道是否有任何其他好的做法来代替重定向页面。（我知道它也可以处理使用 AJAX，但我没有使用 AJAX）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:37:34.993

尝试这个

```
if (!IsPostBack)
        {
            do something

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:37:56.007

您可以使用[Page.IsPostBack 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        //logic 
    }
} 
```

在上面的代码示例中，如果页面是回发，则不会执行任何代码（逻辑）。

# asp.net-mvc - Kendo UI Grid - MVC - ClientRowTemplate 上的实体（视图模型）循环集合

> ID：15835384
> 
> 赞同：0
> 
> 时间：2013-04-05T13:35:44.540
> 
> 标签：asp.net-mvc, templates, telerik, kendo-ui, kendo-grid

是否可以使用包含复杂类型列表的实体模型创建 clientrowtemplate 以显示某些字段？我创建了一个服务器端行模板，但是当我在数据源上切换 ajax 时，它不起作用。我认为这是预期的。但是如何创建一个复杂的模板来显示带有 ajax 的集合作为 MVC 上的自定义行模板呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:09:14.180

**解决了**

对于干净的代码，将委托与任何其他代码块分开。注意`ToString()`代码末尾的以字符串形式获取结果，而不是 HelperResult。

```
@{
    Func<Grid<MyModel>, string> clientRowTemplate = @<div class="order-info">
        <div class="order-info-items cell">
        # if (data.OrderItemList) { #
            # for (var i in data.OrderItemList) { #
                # if (data.OrderItemList[i].ID) { #
                    <img src="#= data.OrderItemList[i].ImageUrl #" alt="#= data.OrderItemList[i].ItemName #" width="100" height="100" />
                # } #
            # } #
        # } #
        </div>
    </div>.ToString();
} 
```

然后将其作为参数传递给 ClientRowTemplate 方法：

```
@(Html.Kendo().Grid(Model)
    .Name("grd")
    .Columns(columns =>
    {
        /*columns*/
    })
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("Orders_Read", "Home"))
    )
    .ClientRowTemplate(clientRowTemplate) 
```

希望能帮助到你。

# java - 如何将我的 Java Eclipse 项目复制到桌面，然后使用命令行运行？

> ID：15835386
> 
> 赞同：2
> 
> 时间：2013-04-05T13:35:52.143
> 
> 标签：java, eclipse, command-line

我已经使用 Eclipse 构建了一个 java 程序。现在我的老师想要一个文件夹中的所有单独的java文件，然后老师将通过命令行运行我的程序。我尝试将 java 文件复制到我的桌面并通过命令行运行，但出现错误。

我的程序也有两个包。有人知道怎么修这个东西吗？不使用任何插件或其他东西，因为我的老师不会拥有它们。

编辑：我设法修复它，这是因为我的类路径有错误的目录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:08:03.267

只需将您的项目导出到一个可运行的 jar 文件中，然后进入 cmd 并执行： java -jar .jar

# c# - 使用字符串强制转换防止 Null 失败的最佳方法

> ID：15835388
> 
> 赞同：10
> 
> 时间：2013-04-05T13:35:55.917
> 
> 标签：c#, sql, string, parsing, null

```
_callReportCode = reader["Call Report Code"].ToString(); 
```

我正在尝试处理我调用 ToString 的对象为 NULL 的可能性。我将使用带有多个变量的上述语句，并且我不想为每个变量进行单独的尝试/捕获……什么是对字符串进行空值检查的最佳方法。

我一直在这样做的其他数据类型：

```
int.TryParse(reader["Account Number"].ToString(), out _accountNumber); 
```

在此代码中，“阅读器”指的是 SqlDataReader，但这对于这个问题并不重要。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-05T13:39:10.357

使用[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)：`??`

```
callReportCode = (reader["Call Report Code"] ?? "").ToString(); 
```

如果您的字段中的数据是`DBNull.Value`（而不是`null`），这仍然有效，因为`DBNull.Value`is not `null`，所以`??`不会使用，并且`DBNull.Value.ToString()`is `""`，这是您想要的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-05T13:41:37.053

```
Convert.ToString(reader["Call Report Code"]); 
```

`string.Empty`如果值为空，它将返回。

来源：http: [//msdn.microsoft.com/en-us/library/astxcyeh.aspx](http://msdn.microsoft.com/en-us/library/astxcyeh.aspx)

更新：它也适用于`DBNull`，我刚刚验证过。

**更新 2**：我决定在这里进行更完整的测试，以确保：

```
DBNull dbNull = null;
DBNull dbNullEmpty = DBNull.Value;
string stringNull = null;
string stringEmpty = string.Empty;

var outcome1 = Convert.ToString(dbNull);//Empty string
var outcome2 = Convert.ToString(dbNullEmpty);//Empty string
var outcome3 = Convert.ToString(stringNull);//NULL
var outcome4 = Convert.ToString(stringEmpty);//Empty string 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T13:40:30.660

如果您的字符串可以为空，则需要检查从`SqlDataReader`against返回的值`DBNull.Value`：

```
_callReportCode = reader["Call Report Code"] as string; 
```

如果返回的对象`reader["Call Report Code"]`不是*a*，`string`它是`DBNull.Value`，所以`as`强制转换也将设置 to 的`_callReportCode`值`null`。

如果您必须将字符串设置为非空值以防数据库值丢失，请添加`??`，如下所示：

```
_callReportCode = (reader["Call Report Code"] as string) ?? string.Empty; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T13:42:39.067

`ToString`我的建议是当数据不是字符串时永远不要转换，如果数据已经是字符串，那么调用`ToString`是多余的，只需要一个转换。

我假设数据库中的数据类型是整数，在这种情况下，您可以使用可为空的 int。

```
int? accountNumber = reader["Account Number"] == DBNull.Value ? null : (int?)reader["Account Number"]; 
```

我已经做了一个扩展方法来做这件事。

```
public static class SqlDataReaderExtensions
{
    public static T Field<T>(this SqlDataReader reader, string columnName)
    {
        object obj = reader[columnName];

        if (obj == null)
        {
            throw new IndexOutOfRangeException(
                string.Format(
                    "reader does not contain column: {0}",
                    columnName
                )
            );
        }

        if (obj is DBNull)
        {
            obj = null;
        }

        return (T)obj;
    }
} 
```

用法

```
int? accountType = reader.Field<int?>("Account Number"); // will return NULL or the account number. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-15T07:21:34.473

我发现的最简单的方法是

```
_callReportCode = reader["Call Report Code"] + ""; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-22T19:01:41.330

我有一些最简单和常用的方法。

```
 public static string ToNULLString(this string Values)
        {
            if (string.IsNullOrEmpty(Values))
            {
                return "";
            }
            else
            {
                return Values.ToString();
            }
        } 
```

在 C# 中使用

```
string item = null;
string value = item.ToNULLString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T13:39:13.583

_callReportCode = Convert.ToString(reader["Call Report Code"]) 应该确保那里没有空值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-05T13:39:52.153

您可以创建一个在要进行检查时调用的方法。这样，您只需键入一次 try catch ...或者您可以为字符串类创建一个扩展方法来执行此操作

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-05T13:40:53.130

使用以下代码行：

```
_callReportCode = String.IsNullorEmpty(reader["Call Report Code"]) ?
                  String.Empty :
                  reader["Call Report Code"].ToString(); 
```

而不是以下行：

```
_callReportCode = reader["Call Report Code"].ToString(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-06T17:41:32.583

我喜欢结合使用[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)和[空条件运算符](https://msdn.microsoft.com/en-us/library/dn986595(v=vs.140).aspx)：

```
string nn = MyObject.myNullableVar?.ToString() ?? ""; 
```

和这个基本一样

```
string ss = (MyObject.MyNullableVar == null) ? "" : MyObject.MyNullableVar.ToString(); 
```

但更短。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-04-05T13:37:51.397

您可以使用执行检查`String.IsNullOrEmpty()`以确保它不会为空，或者您可以编写一个扩展方法来执行一些操作，如果它不为空，则另一个 / 不为空。

# jquery - 仅在滚动某些 div 时显示元素

> ID：15835394
> 
> 赞同：0
> 
> 时间：2013-04-05T13:36:16.087
> 
> 标签：jquery, html, scroll, show-hide

我有一个有很多空白的网站（出于视觉原因）。当用户滚动一个空白区域（通常是 2000 像素或以上标记为`.spacer`）时，我希望显示另一个固定 div。

目的是确保用户不必滚动浏览大量空白区域。将“弹出”或出现的 div 将简单地具有将它们指向导航栏的文本。然后当用户当前**没有**查看`.spacer`时，我希望这个 div 消失/隐藏。我怎样才能使用 jquery 做到这一点？提前感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:40:25.330

试试这个：

```
$(document).ready( function() {
    $(".spacer").hide(); // Hide your div by default
    $(".spacer").each(function() {
        var this = $(this);
        var topDistance = $(this).offset().top;
        $(window).scroll(function() {
            if($(window).scrollTop() > topDistance ) { 
                this.show(); 
            }
        });
    })
}); 
```

也许这不是你想要的，但可以给你一些关于如何实现它的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:01:45.140

这是多个`.spacer`块的示例：http: [//jsfiddle.net/ant_Ti/H8t6s/](http://jsfiddle.net/ant_Ti/H8t6s/)

# ember.js - Html4 浏览器不支持来自 HTML5 的 History API 的 history.pushState 和 history.replaceState 方法

> ID：15835397
> 
> 赞同：4
> 
> 时间：2013-04-05T13:36:21.707
> 
> 标签：ember.js, pushstate, history.js

我正在开发一个 ember 应用程序（使用 ember-1.0.pre.js）。我正在尝试在 IE8 上提供跨浏览器兼容性。

问题在于每次转换后都会生成 url，这对用户来说似乎不正确/虚假。假设我点击了 `the_ domain_name/sell/new`最初让我进入我们应用程序的销售页面的 url。然后我尝试转换一个名为“Purchase”的新状态，这将使我进入我们应用程序的购买页面。

新的状态转换 *在 IE8 地址栏中生成一个 URL，而不是*.`the_ domain_name/sell/new#/offers/purchase?&*suid=1365149991779013736531657156165*`*`the`* `domain_name/offers/purchase`

**注意：** the_domain_name =`[http://www.example.com](http://www.example.com)`

生成的 url 包含两个不正确的东西，

1.  初始前缀“/sell/new#”。

2.  url查询字符串中的参数“?&_suid=1365149991779013736531657156165”。

我试图找出问题并发现 HTML4 浏览器不支持来自 HTML5 的 History API 的 pushState 和 replaceState 方法。我如何在 IE8 上提供支持 谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T14:23:20.783

我建议`History.js`作为不支持 History API 的浏览器的 polyfill： [https ://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

它适用于：

**HTML5 浏览器：**

*   火狐 4+
*   铬 8+
*   歌剧 11.5
*   Safari 5.0+
*   Safari iOS 4.3+

**HTML4 浏览器：**

*   即 6、7、8、9
*   火狐 3
*   歌剧 10, 11.0
*   野生动物园 4
*   Safari iOS 4.2、4.1、4.0、3.2

添加[jquery.history.js 并将](https://github.com/browserstate/history.js/blob/master/scripts/bundled/html4+html5/jquery.history.js)位置处理程序注册`history.js`到您的 Ember 应用程序中。

这是我从原始修改的部分`Ember.HistoryLocation`（[完整代码](http://pastebin.com/Gp4uMTQL)）

```
(function() {
  var get = Ember.get, set = Ember.set;
  var popstateFired = false;
  Ember.HistoryJsLocation = Ember.Object.extend({
    initState: function() {
      this.replaceState(this.formatURL(this.getURL()));
      set(this, 'history', window.History);
    },
    getState: function() {
      return get(this, 'history').getState().state;
    },
    pushState: function(path) {
      History.pushState({ path: path }, null, path);
    },
    replaceState: function(path) {
      History.replaceState({ path: path }, null, path);
    }
  });
  Ember.Location.registerImplementation('historyJs', Ember.HistoryJsLocation);
})(); 
```

然后在你的应用程序中使用这个 polyfill：

```
App.Router.reopen({
  location: 'historyJs'
}); 
```

# android - 如何在我的计算机上找到我的 SQLite 数据库文件？

> ID：15835401
> 
> 赞同：4
> 
> 时间：2013-04-05T13:36:32.187
> 
> 标签：android, sqlite, xamarin

我使用 Xamarin Studio（Android 的 Mono）实现了我的第一个应用程序。这个应用程序将一些数据存储在 SQLite db 中，这在 Sony Tablet S 设备上运行良好。

我的问题是：有没有办法获取 db 文件并查看它的大小？

我仰望以下路径

```
/data/data/My-Application-Package-Name/databases/My-database-name 
```

但它似乎不存在。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:49:58.750

您可以使用 Eclipse 直接使用 sqlite 管理器插件 ( [http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/) )

*   从我上面引用的网站下载 *.jar 文件到 eclipse 中的“dropins”文件夹（打开你的 eclipse 文件夹，你应该看到它）
*   然后重启eclipse并进入DDMS。如果尚未显示，您可能需要执行 windows->views-ddms ...
*   从左侧面板中选择您的设备，然后使用文件资源管理器转到您的数据
    目录/YOURAPP/databases。
    希望当您选择数据库时会出现一个图标。如果没有，请重命名您的数据库以使用“db”分机。
*   单击它，它应该在管理器选项卡中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:47:14.737

这是一个有效的数据库位置（//data/data/My-Application-Package-Name/databases/My-database-name），但如果您只有 root 访问权限，则可以从文件管理器访问它。[看看这里](http://forum.xda-developers.com/showthread.php?t=1487020)是怎么做到的。否则，如果您想通过代码获取一些信息，那么您做错了什么，因此请发布代码和 logcat。

# java - 当您没有表单时，如何将值传递给 Struts 2 中的操作？

> ID：15835403
> 
> 赞同：0
> 
> 时间：2013-04-05T13:36:35.777
> 
> 标签：java, struts2, action-mapping

我写了一个这样的提交按钮：

```
<s:submit type="button" value="Delete" action="%{notesDeleteUrl}" theme="simple"/> 
```

我已经像这样定义了网址。

```
<s:url value="notesDeleteAction.action" id="notesDeleteUrl" >
<s:param name="noteId"><s:propertyvalue="iNote" />    </s:param>                                   
</s:url> 
```

所以基本上，我的 JSP 上没有 < s:form > 标记，但我需要在向其传递值时使用提交按钮调用操作。我得到这个错误。

*   没有为命名空间 [/] 映射的操作和与上下文路径 [/abc] 关联的操作名称 [notesDeleteAction?noteId=48]。

所以我知道由于添加了参数，它无法解析动作，但是我怎么能将此值发送给动作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:48:33.160

您的错误与参数无关。Struts 不知道如何处理 URL /notesDeleteAction

您需要在 struts.xml 文件中包含该操作：

```
<package name="yourpackage" namespace="/" extends="struts-default">
  <action name="notesDeleteAction" class="foo.YourClass">
    <result>somepage.jsp</result>
  </action>
</package> 
```

有两种方法可以在你的类中获取参数， foo.YourClass

一种方法是：

```
Map parameters = ActionContext.getContext().getParameters(); 
```

另一种方法是让你类实现 org.apache.struts2.interceptor.ParameterAware

# oracle - Oracle 表示数据组合的层次结构

> ID：15835405
> 
> 赞同：0
> 
> 时间：2013-04-05T13:36:40.333
> 
> 标签：oracle, large-data-volumes, data-representation, large-data

我遇到了 Oracle 数据量问题，我认为这是由数据表示问题引起的。我有一个由七个不同列表组成的层次结构，并且需要存储这些元素的所有独特的潜在组合。我需要存储所有可能的组合，因为我需要与它们一起存储附加信息。

从历史上看，我们一直在管理四个列表，其中包含几千种组合。这很好，但是要求已经改变，因为它们是惯常的，现在我们正在运行七个列表。在我的真实环境中，列表存储 20 到 200 个项目。现在，令人难以置信的组合总数约为 3500 亿。

作为我们试图用这个表示的一个例子，您可以选择以下列表：

颜色：红色、绿色、蓝色

形状：圆形、方形、三角形

口味：桃子、香蕉、覆盆子

这些将在 Oracle 中存储为单独的表，如颜色、形状、风味等，我们要做的是将它们全部相乘（通过笛卡尔连接）以获得分解表：这就是我们存储的内容甲骨文目前。

```
COLOUR    SHAPE   FLAVOUR    DATA_1 DATA_2
Red       Circle  Peach      -- these hold additional information
Red       Circle  Banana
Red       Circle  Raspberry
Red       Square  Peach
Red       Square  Banana
... 
```

等等。

我们发现我们无法在 Oracle 表中存储数十亿条记录，也无法及时对它们执行任何操作。我试图想出不同的方法来存储这些信息，但我的大脑一直在纠结组合的数量。我能做些什么来以不同的方式存储记录吗？请记住，它们都是独特的组合，我们需要将数据与它们一起存储。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:34:53.070

将数据存储到非关系数据库怎么样？

我会推荐 MongoDB 或 Hypertable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:11:23.213

最后，我们选择对列表进行透视，这样我们就可以选择具有许多列的表，而不是拥有数百万行。这不是一个理想的方法，但它确实对其他人有一些优势。

# phpstorm - 如何在已经活动的项目中指定 Web 根目录？

> ID：15835406
> 
> 赞同：1
> 
> 时间：2013-04-05T13:36:42.623
> 
> 标签：phpstorm

我使用 File -> Open Directory 打开了项目。

现在我想知道我现在如何指定 Web 根 URL？这是我的本地主机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:52:31.447

工具 - 部署 - 配置

# asp.net - Chrome 更新 26.0.1410.43 m 在回发后需要超过 20 秒才能加载

> ID：15835408
> 
> 赞同：2
> 
> 时间：2013-04-05T13:36:44.607
> 
> 标签：asp.net, google-chrome

有没有人已经找到了 chrome 在最新更新后出现的问题的解决方案。当您将某些内容发布到服务器时，chrome 需要超过 20 秒才能加载。

我们在 IE 和 FireFox 中检查了同一个站点，一切都加载得很快。

它似乎是新更新中的一个错误。

# java - 在 C++ 中的类上调用静态函数

> ID：15835410
> 
> 赞同：-3
> 
> 时间：2013-04-05T13:36:51.063
> 
> 标签：java, c++, static-methods

我现在写了很多java，所以我对java**静态**方法和c++**静态**函数感到困惑。

在java中，你可以从一个类中调用一个静态方法，我经常使用/看到它，例如：

```
public class A{
    public void static b(){
        System.out.println("hello");
    }
} 
```

你能做到，`A.b();`你能用 C++ 做到吗？如果是这样，与在java中这样做相比，它不是那么受欢迎吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:38:23.087

您可以在 C++ 中使用`::`范围运算符做到这一点：

```
A::b(); 
```

正如所指出的，如果您在当前范围内`a`有您的类的实例，您`A`也可以调用`a.b()`. 但是，在实例上调用静态方法通常会令人困惑，因此您可能希望避免使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:40:53.300

您可以使用`A::B()`

您也可以使用`a.B()`if`a`是`A`. 然而，对于阅读代码的人来说，这只是令人困惑。因此，只需坚持`A::B()`使用静态方法即可清楚地显示您的意思。

# c# - 发布后会话变量丢失（在开发机器上工作）

> ID：15835411
> 
> 赞同：0
> 
> 时间：2013-04-05T13:36:51.827
> 
> 标签：c#, session, authentication, session-variables

我被要求拼凑的一个快速项目不需要疯狂的安全性，因此，我实现了一个简单的登录屏幕，可以根据数据库检查用户名和密码。

```
User u = new User();
if (u.AuthenticateUser(txtUsername.Text, txtPassword.Text))
   Session.Add("UserSeshAuthenticated", true);                    

Response.Redirect("Dashboard.aspx"); 
```

所有其他页面共享一个 MasterPage，并且在`Page_Load`事件中：

```
if ((Session["UserSeshAuthenticated"] == null) || ((bool)Session["UserSeshAuthenticated"] == false))
        {
            fw.Write("UserSeshAuthenticated has been lost or something");

            string path = HttpContext.Current.Request.Url.AbsolutePath;
            Response.Redirect("Login.aspx?retpath=" + path);
        }
        else
        {
            lblLoggedInUsername.Text = Session["UserSeshAuthenticated"].ToString();
        } 
```

这一切在我的开发机器上运行良好，但是当我将它发布到我的服务器时，当我的 MasterPage 加载时，它已经丢失了会话变量。

任何人都可以帮忙吗？...我应该在今天下午直播，我没想到我会遇到这个问题！

任何帮助表示赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:00:21.937

在您的登录代码中，您将“UserSeshAuthenticated”添加到会话中，而不是用户对象。如果函数 u.AuthenticateUser() 将自身的副本添加到会话中，那可能是您的问题。尝试将其添加到结果块中。像这样：

```
User u = new User();
if (u.AuthenticateUser(txtUsername.Text, txtPassword.Text))
{
   Session.Add("UserSeshAuthenticated", true);
   Session.Add("oUser", u);

   Response.Redirect("Dashboard.aspx");
} 
```

# javascript - Phonegap 2.4 Facebook 插件登录不起作用

> ID：15835412
> 
> 赞同：3
> 
> 时间：2013-04-05T13:36:52.543
> 
> 标签：javascript, android, facebook, cordova

我正在尝试将 facebook connect 插件与 phonegap 一起使用，但我遇到了一个奇怪的问题。我正在使用自己的手机（三星 Galaxy Note II）进行调试。我已经安装了 HackBook 示例应用程序。

当我启动它并单击“登录到 facebook”按钮时，本地 facebook 应用程序会启动并提示登录页面。我输入我的 FB 凭据，而不是显示我的测试 facebook 应用程序来授予，它显示三星 Galaxy Note II 应用程序......

现在，如果我从手机中删除 Facebook 应用程序，然后重新启动 hackbook 应用程序，登录按钮现在会显示 facebook 登录页面的“网络”版本，一切正常。

总结：如果我的手机上安装了 facebook 应用程序，hackbook 示例应用程序使用它来执行登录到 facebook 的步骤，但它想要授予 Galaxy Note II FB 应用程序而不是我自己的。

如果我删除手机的 facebook 应用程序，一切正常。

我需要帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:58:27.850

您需要确保在 Facebook 应用仪表板（原生 Android 应用部分）中添加密钥哈希。您需要对用于签署应用程序的密钥进行哈希处理。还有一件事，确保包名正确并启用 Facebook 登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T09:31:17.227

我在这里分享 chandra-kantha 的答案：

来源（带屏幕截图）：[https ://github.com/amirudin/pgb-fbconnect/issues/1#issuecomment-26134737](https://github.com/amirudin/pgb-fbconnect/issues/1#issuecomment-26134737)

* * *

这是解决此问题的方法。！！！

您需要生成 Android 密钥的哈希并将其提交到 Facebook 上的开发人员页面（[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/) ) 让它工作。此外，如果您在 Windows（特别是 64 位版本）上生成此哈希，

请使用适用于 Windows 的 OpenSSL 0.9.8e 或 0.9.8d 版本，而不是 0.9.8k。

在此处下载 openssl：[https](https://code.google.com/p/openssl-for-windows/downloads/list) ://code.google.com/p/openssl-for-windows/downloads/list 。

下载 openssl 后，解压缩文件，然后打开您的 openssl 文件夹，复制 bin 文件夹的路径，然后添加到系统环境变量路径。

安卓签名：

Adobe® PhoneGap Build™ 允许您签署您的 Android 构建，因此它们适合提交到 Android Market。要准备好发布版本，您首先需要生成一个签名密钥库文件。完整的详细信息如下：

获取合适的私钥：

1）下载并安装Java。[http://www.java.com/en/download/index.jsp](http://www.java.com/en/download/index.jsp)

2）设置Java_Home目录：[http ://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html](http://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html)

3）以管理员身份打开命令提示符（cmd.exe），然后运行以下命令：

keytool -genkey -v -keystore [keystore_name].keystore -alias [alias_name] -keyalg RSA -keysize 2048 -validity 10000

请注意 alias_name。

保留所有密码“android”

4) Keytool 将要求输入密钥库密码。输入密码并确认：

step_4_android_keystore_pass

5) 接下来，keytool 会询问更多信息。适当提供：step_5_additional_info

6) 接下来，keytool 会询问 Alias 的密码。如果它与密钥库密码相同，则返回。否则输入密码并确认：

step_6_alias_password

7) 您的签名密钥现在可以提交了：

step_7_keystore_ready

提交到 Build 8) 转到您的帐户 > 编辑设置 > 签名密钥选项卡。step_8_edit_account_settings

9) 单击“添加密钥...”并提供以下信息。标题 - 任何别名 - 您在生成密钥库文件时给出的 alias_name。

step_9_add_key

解锁钥匙。10) 转到您的帐户 > 编辑设置 > 签名密钥选项卡：

step_10_edit_account_settings

11）单击“锁定”按钮并提供以下信息：证书密码=>参考步骤＃6。密钥库密码=>参考步骤＃4。

step_11_unlock_key

生成新的哈希键

现在，您必须使用您生成的密钥库文件生成新的 hashkey。打开命令行并运行以下命令。

keytool -exportcert -alias [alias_name] -keystore [your_keystore_path\keystorefilename].keystore | openssl sha1 -二进制 | openssl base64

现在复制哈希键并添加到您的 Facebook 应用程序。

**现在请确保您在构建应用程序时选择了 phonegap 上的密钥

# delphi - Delphi - 如何通过知道它的路径来杀死一个进程？

> ID：15835414
> 
> 赞同：3
> 
> 时间：2013-04-05T13:36:53.500
> 
> 标签：delphi, process, kill

到目前为止，我一直在使用[这个](http://www.swissdelphicenter.ch/torry/showcode.php?id=266)函数来杀死一个进程。但是，如果我有三个同名的进程，而其中只有一个是我想要杀死的进程呢？如果我这样做： KillTask​​('csrss.exe') 那么它将杀死系统进程。我有我的进程的路径，我怎样才能使用这些信息来杀死它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:44:58.403

遍历进程并检查每个进程的路径，然后使用此 SO 问题的答案（使用 GetModuleFileNameEx）：

[使用delphi从PID获取完整路径](https://stackoverflow.com/questions/4178443/get-the-full-path-from-a-pid-using-delphi)

如果您启动了该进程，请记住 PID 或句柄并杀死特定的进程。

# java - RoboSpice 使用 OrmLite 持久化 JSON 数组

> ID：15835415
> 
> 赞同：5
> 
> 时间：2013-04-05T13:36:54.203
> 
> 标签：java, json, spring, ormlite, robospice

我将 RoboSpice 与 Spring for Android 一起使用，并希望使用 OrmLite 持久化 JSON 对象数组。GSON 用于 JSON 编组。使用默认缓存，一切都按预期工作。但是 OrmLite 似乎不喜欢对象数组。

这是 JSON 的简化版本：

```
[{"id": 1, "title": "Test 1"},{"id": 2, "title": "Test 3"},{"id": 3, "title": "Test 3"}] 
```

我想将其保留在以下对象中：

```
@DatabaseTable
public class Foo {
    @DatabaseField(id = true)
    private int id;
    @DatabaseField
    private String title;

    // getters and setters
    ...
} 
```

基于 RoboSpice OrmLite 示例，我创建了以下 GsonSpringAndroidSpiceService 类来添加 OrmLite CacheManager。这就是问题开始的地方。

```
public class CustomGsonSpringAndroidSpiceService extends GsonSpringAndroidSpiceService
{
    @Override
    public CacheManager createCacheManager(Application application)
    {
        // add persisted classes to class collection
        List<Class<?>> classCollection = new ArrayList<Class<?>>();
        classCollection.add(Foo.class);

        // init
        CacheManager cacheManager = new CacheManager();
        cacheManager.addPersister(new InDatabaseObjectPersisterFactory(
            application, new RoboSpiceDatabaseHelper(
                application, "database.db", 1), classCollection));
        return cacheManager;
    }
} 
```

这会导致以下错误：

```
RequestProcessor.java:174(22356): java.lang.RuntimeException: Class [Lcom.example.model.Foo; is not handled by any registered factoryList 
```

当我更改为时`classCollection.add(Foo.class);`，`classCollection.add(Foo[].class);` 我收到以下错误：

```
RequestProcessor.java:174(22601): 14:42:23.112 pool-5-thread-1 An unexpected error occured when processsing request CachedSpiceRequest [requestCacheKey=foo, cacheDuration=-1, spiceRequest=com.example.app.FooRequest@4055df40]
RequestProcessor.java:174(22601): java.lang.IllegalArgumentException: No fields have a DatabaseField annotation in class [Lcom.example.app.model.Foo; 
```

有人知道如何使用 OrmLite CacheManager 处理 JSON 数组吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:53:41.087

我找到了解决这个问题的方法。我添加了一个包含对象数组的额外结果对象。当然，这只有在您能够操作 JSON 时才有可能。仍然对此并不满意，因为我在我的模型中引入了一个无用的类。

所以我的 JSON 看起来像：

```
{ 
    "id": 1,
    "result":[{"id": 1, "title": "Test 1"},{"id": 2, "title": "Test 3"},{"id": 3, "title": "Test 3"}]
} 
```

我添加了以下类来保存 JSON 结果：

```
@DatabaseTable
public class FooResult {
    @DatabaseField(id = true)
    private int id;
    @ForeignCollectionField(eager = false)
    private Collection<Foo> result;

    // getters and setters
    ...
} 
```

还添加了 Foo 类的外部关系：

```
@DatabaseTable
public class Foo {
    @DatabaseField(id = true)
    private int id;
    @DatabaseField
    private String title;
    @DatabaseField(foreign = true)
    private FooResult result;

    // getters and setters
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-01T20:17:44.667

我找到了适合我的方式。我没有改变我的json。

```
@DatabaseTable(tableName = SampleContract.Contributor.TABLE)
public class Contributor {

    @DatabaseField(generatedId = true, columnName = SampleContract.Contributor._ID)
    private int id;

    @DatabaseField(columnName = SampleContract.Contributor.LOGIN)
    public String login;

    @DatabaseField(columnName = SampleContract.Contributor.CONTRIBUTIONS)
    public int contributions;

    @DatabaseField(foreign = true)
    private ContributorsResult result;

    @SuppressWarnings("serial")
    @DatabaseTable(tableName = "contributor_list")
    public static class ContributorsResult extends ArrayList<Contributor> {

        @DatabaseField(id = true)
        private int id = 0;

        @ForeignCollectionField(eager = false)
        private Collection<Contributor> result = this;

        public Collection<Contributor> getResult() {
            return result;
        }

        public void setResult(Collection<Contributor> result) {
            if (result != null) {
                this.clear();
                this.addAll(result);
            }
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-13T18:31:51.237

我今天整天都在为此苦苦挣扎，最后想出了如何在不修改 JSON 的情况下使用 Robospice Spring Android 将 JSON 数组保存到 SQLite 数据库中。

这是我从服务器返回的 post JSON 数组：

```
[
{
"id": "5573547af58cd75df03306cc",
"name": "Simon",
"postheader": "First Post"
},
{
"id": "55735475f58cd75df03306cb",
"name": "Tyron",
"postheader": "Second Post"
}
] 
```

这类似于此问题中的 JSON：

```
[{"id": 1, "title": "Test 1"},{"id": 2, "title": "Test 3"},{"id": 3, "title": "Test 3"}] 
```

第1步：

您将需要在 android 端创建 2 个类。

一个是您要从数组中保存的普通对象。就我而言，我有一个名为“Post”的对象，我的服务器返回一个“Post”数组。

```
@DatabaseTable(tableName = "post")
@JsonIgnoreProperties(ignoreUnknown = true)
public class Post implements Serializable {
    @DatabaseField(id = true)
    private String id;
    @DatabaseField
    private String name;
    @DatabaseField
    private String postheader;
    @DatabaseField(foreign = true,foreignAutoCreate = true,foreignAutoRefresh = true)
    private EmbedPost posts; 
```

另一个对象将是一个包裹数组的包装对象，我称之为“EmbedPost”。

```
@DatabaseTable
public class EmbedPost implements Serializable {
    @DatabaseField(allowGeneratedIdInsert=true, generatedId=true)
    private int ID;
    @ForeignCollectionField(eager = false)
    private Collection<Post> posts; 
```

通过在我的 EmbedPost 类中定义一个名为 ID 的 int，我有效地创建了一个对象，如果我转换为 JSON，它将如下所示：

```
{"id": 1, "posts": [
{
"id": "5573547af58cd75df03306cc",
"name": "Simon",
"postheader": "First Post"
},
{
"id": "55735475f58cd75df03306cb",
"name": "Tyron",
"postheader": "Second Post"
}
]} 
```

这实际上是一个 JSON 字符串，看起来与 Uipko 在他的解决方案中使用的非常相似。

```
{ 
    "id": 1,
    "result":[{"id": 1, "title": "Test 1"},{"id": 2, "title": "Test 3"},{"id": 3, "title": "Test 3"}]
} 
```

第2步：

您现在使用 SpringAndroidSpiceService 持久化它。

```
public class AndroidSpiceService extends SpringAndroidSpiceService {
    private static final int WEBSERVICES_TIMEOUT = 10000;

    @Override
    public CacheManager createCacheManager( Application application ) {
        CacheManager cacheManager = new CacheManager();
        List< Class< ? >> classCollection = new ArrayList< Class< ? >>();

        // add persisted classes to class collection
        classCollection.add(EmbedPost.class);
        classCollection.add( Post.class );
        // init
        RoboSpiceDatabaseHelper databaseHelper = new RoboSpiceDatabaseHelper( application, "sample_database.db", 3);
        InDatabaseObjectPersisterFactory inDatabaseObjectPersisterFactory = new InDatabaseObjectPersisterFactory( application, databaseHelper, classCollection );
        cacheManager.addPersister( inDatabaseObjectPersisterFactory );
        return cacheManager;
    }

    @Override
    public RestTemplate createRestTemplate() {
        RestTemplate restTemplate = new RestTemplate();
        // set timeout for requests

        HttpComponentsClientHttpRequestFactory httpRequestFactory = new HttpComponentsClientHttpRequestFactory();
        httpRequestFactory.setReadTimeout( WEBSERVICES_TIMEOUT );
        httpRequestFactory.setConnectTimeout( WEBSERVICES_TIMEOUT );
        restTemplate.setRequestFactory( httpRequestFactory );

        MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter = new MappingJackson2HttpMessageConverter();
        final List<HttpMessageConverter< ? >> listHttpMessageConverters = restTemplate.getMessageConverters();

        listHttpMessageConverters.add( mappingJackson2HttpMessageConverter  );
        restTemplate.setMessageConverters( listHttpMessageConverters );
        return restTemplate;
    }

} 
```

请务必将 EmbedPost.class 和 Post.class 添加到您的 classCollection 中，因为如果您不坚持两者，ORMLite 就无法完成其工作。您在编写对象时使用了 ForeignKeys，这些外键必须与某些东西相关联，因此两个类都必须保持不变。

如果遇到麻烦，请尝试使用 logcat 来解决。您可能必须阅读所有消息，而不仅仅是错误消息。请参阅我的帖子，了解如何阅读所有 logcat 消息：

[Robospice 存储对象，通过 Ormlite 在数据库中扩展 ArrayList](https://stackoverflow.com/questions/15801315/robospice-storing-object-that-extends-arraylist-in-database-via-ormlite/30821880#30821880)

# c# - 当我从文本框中跳出而不输入值时，我可以触发事件吗？

> ID：15835416
> 
> 赞同：1
> 
> 时间：2013-04-05T13:36:56.147
> 
> 标签：c#, asp.net

我有一个`ASP.NET Webform (C#)`上面有一个文本框。我想知道当用户在没有输入值的情况下关闭文本框时是否有办法触发事件？

我设置`Autopostback=True`和`CauseValidation=true`。如果我在文本框中输入任何内容，它会触发该`TextChanged`事件，这很好。但是，如果他们在不输入任何内容的情况下进行选项卡，则不会发生任何事情。

有任何想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:39:23.887

您在客户端（js）上处理丢失焦点事件，然后如果您需要服务器端代码，则导致回发或运行 ajax 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:41:30.257

有一个名为 OnBlur 的事件，您可以在用户未输入任何值时使用该事件。

当用户离开文本框时触发文本框 OnBlur 事件。

使用这样的东西。

在 OnBlur 根据您的要求添加一个 javascript 函数。

# symfony - 将数据从表单插入数据库

> ID：15835419
> 
> 赞同：1
> 
> 时间：2013-04-05T13:37:07.097
> 
> 标签：symfony, symfony-2.1, symfony-forms

我想做的是下一步：

1.  使用 FormBuilder 创建简单的表单

2.  提交表单时，将结果保存到特定用户的数据库中（基于其 ID）

另外是来自控制器的代码：

```
public function helloAction(Request $request, $id){//displaying individual results for particular user//

// find the username which was in the view//

  $em = $this->getDoctrine()->getManager();
        $query = $em->createQuery('SELECT b FROM AcmeWebBundle:baza b WHERE b.id = :id' )
        ->setParameter('id',$id);
        $total = $query->getResult();  

$baza = new baza ();

    $em = $this->getDoctrine()->getManager();
        $em->persist($baza);
        $form = $this->createFormBuilder($baza) 
                    ->add ('rating','choice',array('label'=>'TEST44','choices'=>array(
                        '1'=>'1',
                        '2'=>'2',
                        '3'=>'3',
                        '4'=>'4'
                        ),

                    'expanded'=>true,
                    'multiple'=>false
                    ))
                    ->getForm();

        if ($request->getMethod() == 'POST') {
            $form->bindRequest($request);

            if ($form->isValid()) {
                // perform some action, such as saving the task to the database
                $em->flush();

                return new Response('<h1>THANKS FOR Your feedback !!!!</h1>');

            }

        }

return $this->render('AcmeWebBundle:Default:hello.html.twig',array('all'=>$total,'id'=>$id ,'form'=>$form->createView()));
}
} 
```

但这会在数据库中创建新行，并且只为评级列添加值。此外，id 字段、用户名等都是空的。

我想要做的是，要为列评级添加评级，但要为特定的 ID 添加评级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:52:27.650

您可以像这样将评级设置为用户实体..

```
if ($form->isValid())
    $rating = $form->get('rating')->getData();
    $user->setRating($rating);
    // Assuming $user is the user entity

    // etc.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:29:55.787

在下面的示例中，我创建了一个表单，获取数据`POST`，然后持久化新对象或修改过的对象，持久化一个空对象是没有意义的。

```
public function historialAction(Request $request)
{
$form = $this->createFormBuilder()
->add('phone', 'text', array('attr' => array('autofocus' => '')))
->add('period', 'number', array('attr' => array('value' => '12')))
->getForm();

if ($request->isMethod('POST')) {
    $form->bind($request);

    // data is an array with "phone" and "period" keys
    $data = $form->getData();

    $em = $this->getDoctrine()->getManager();

    $contract = $em->getRepository('FrontBundle:Contract')->getContractByPhone($data["phone"]);
    $contract->setOwner("John Doe");
    $contract->setPhone($data["phone"]);

    // or this could be $contract = new Contract("John Doe", $data["phone"], $data["period"]);

    $em->persist($contract); // I set/modify the properties then persist
} 
```

# html - 如何根据子元素的值获取节点的位置

> ID：15835423
> 
> 赞同：1
> 
> 时间：2013-04-05T13:37:12.030
> 
> 标签：html, xml, xslt, xpath, xslt-2.0

在我的 xml 中，我希望特定`menuitems/menuitem`节点位于其父级下的不同任意位置（我不想要硬编码的位置选择器）。

是否可以`menuitem`在其下的 name 元素中获得具有正确值的节点的位置，即`menuitems/menuitem/name`. 简而言之：选择`menuitem`它下面有正确`name`值的那个。

```
<one>
   <menuitems>
      <menuitem>  <!-- I dont want this one -->
         <name>
           ...
         </name>
      </menuitem>

      <menuitem>   <!-- I want this one at position 2 under <one> -->
         <name>
            ...    <!-- Based one correct name value here --> 
        </name>
      </menuitem>
   </menuitems>

</one>
<two>
  <menuitems>
    <menuitem> <!-- I want this one at position 1 under <two> -->
       <name>
          ...
       </name>
     </menuitem>
   </menuitems>
</two> 
```

我可以很容易地找出`menuitem`下面`menuitems`的值是否正确`name`。像这样：

```
 <xsl:value-of select="current()/menuitems/menuitem/name = 'OhYes'"></xsl:value-of> 
```

哪个会返回`true`。但是，这是在哪个位置`menuitem`返回`menuitem`的`true`呢？在同一父级和同一级别下进行选择。

我想避免这种情况：

```
<xsl:if test="current()/menuitems/menuitem[1]/name = 'OhYes'"> .. </xsl:if>
<xsl:if test="current()/menuitems/menuitem[2]/name = 'OhYes'"> .. </xsl:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:53:02.263

您可以首先使用 getElementsByTagName 分离出一个和两个容器。对于每个部分（一、二），尝试通过使用 getElementsByTagName 创建一个数组来遍历所有名称，然后检查每个元素以查看名称是否正确。由于每个 menuitem 位置对应于每个标题下的名称位置（一、二），因此您可以在每个匹配的名称节点上使用 .parentNode 访问器来返回 menuitem 节点，并使用迭代器的索引来返回其位置。

例如，对于 XML 代码

```
 <one>
   <menuitems>
      <menuitem>  <!-- I dont want this one -->
         <name>
            the incorrect name
         </name>
      </menuitem>
   </menuitems>

   <menuitems>
      <menuitem> <!-- I want this one at position 2 -->
        <name>
           the correct name   <!-- Based one correct name value here --> 
        </name>
      </menuitem>
   </menuitems>
</one>
<two>
  <menuitems>
    <menuitem> <!-- I want this one at position 1 -->
       <name>
          the correct name
       </name>
     </menuitem>
   </menuitems>
</two> 
```

以下代码提醒当前容器（一、二）下的名称节点（和父菜单项）的索引，这些名称节点在标记为“正确名称”的标签中包含正确的名称文本

```
names = new Array();

// Find the correct position for the menuitem under one
one = document.getElementsByTagName("one")[0];

names = one.getElementsByTagName("name");

for (var i=0; i<names.length; i++){
    if (names[i].innerHTML.search("the correct name") >= 0)
        alert("For one: Correct name found at name node index " + (i+1) + " and its parent menuitem is " + names[i].parentNode);

    // names[i].parentNode is the reference to the menuitem in one that contains the correct name
}   

// Find the correct position for the menuitem under two
two = document.getElementsByTagName("two")[0];

names = two.getElementsByTagName("name");

for (var i=0; i<names.length; i++){
    if (names[i].innerHTML.search("the correct name") >= 0)
        alert("For two: Correct name found at name node index " + (i+1) + " and its parent menuitem is " + names[i].parentNode);

    // names[i].parentNode is the reference to the menuitem in one that contains the correct name

} 
```

我还在[http://jsfiddle.net/nMN3j/1/](http://jsfiddle.net/nMN3j/1/)创建了一个小提琴，所以你可以尝试一下，看看它是如何工作的。

此代码将提醒在容器“one”下，在位置 2 找到了具有正确名称子选项卡的 menuitem 标记，但在位置 1 未找到具有不正确名称子标记的位置 1。

对于容器“二”，代码将提醒在位置 1 找到了具有正确名称的菜单项。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:40:02.647

**使用这个**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:for-each select="/*/*/menuitems/menuitem[name='OhYes']">
   position: <xsl:text/>
    <xsl:value-of select="count(preceding-sibling::menuitem) +1"/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：... --> OhYes --> OhYes

**产生了想要的正确结果**：

```
 position: 2
   position: 1 
```

# java - OpenCV 2.4.4 Java - 抓取网络摄像头图片/流（OSX）

> ID：15835424
> 
> 赞同：5
> 
> 时间：2013-04-05T13:37:25.060
> 
> 标签：java, macos, opencv, webcam

我是 Stackoverflow 和 OpenCV 编程领域的新手。我已经使用 OpenCV Bindings for Java（opencv.org 官方，而不是 JavaCV）制作了一些项目，例如通过 ORB 和 SURF 功能进行对象识别，处理图像。一切都好。现在我正在转向视频流中的对象识别。我想从网络摄像头中获取流并应用对象识别。我不是 Java 大师，所以我在 OpenCV 中找到了 VideoCapture 类，但我无法从相机中获取图片。

我在 OSX Mountain Lion 中使用 OpenCV 2.4.4 绑定在 Eclipse 中运行我的项目。

控制台中的结果：

```
Hello, OpenCV
Camera OK?
Frame Obtained
Captured Frame Width 0
Invalid memory access of location 0x7fae00000000 rip=0x7fff8b4c5263 
```

编码：

```
import org.opencv.core.Mat;
import org.opencv.highgui.Highgui;
import org.opencv.highgui.VideoCapture;

public class Webcam {

    public static void main (String args[]){

    System.out.println("Hello, OpenCV");
    // Load the native library.
    System.loadLibrary("opencv_java244");

    VideoCapture camera = new VideoCapture(0);
    camera.open(0); //Useless
    if(!camera.isOpened()){
        System.out.println("Camera Error");
    }
    else{
        System.out.println("Camera OK?");
    }

    Mat frame = new Mat();

    //camera.grab();
    //System.out.println("Frame Grabbed");
    //camera.retrieve(frame);
    //System.out.println("Frame Decoded");

    camera.read(frame);
    System.out.println("Frame Obtained");

    /* No difference
    camera.release();
    */

    System.out.println("Captured Frame Width " + frame.width());

    Highgui.imwrite("camera.jpg", frame);
    System.out.println("OK");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-19T10:22:52.483

问题只是相机需要时间来初始化。我已经添加

```
Thread.sleep(1000); 
```

后

```
VideoCapture camera = new VideoCapture(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-28T06:25:44.880

我在 MacOS 中试过这段代码，发现另一个错误。

```
System.loadLibrary("opencv_java244"); 
```

上面的行返回此错误

```
java.lang.UnsatisfiedLinkError: org.opencv.highgui.VideoCapture.VideoCapture_2(I)J 
```

为了克服它，我用这条线替换了这条线

```
System.loadLibrary(Core.NATIVE_LIBRARY_NAME); 
```

并且代码有效！

我正在使用 opencv 2.4.8，包括它作为我的 Eclipse 项目中的用户库

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-20T06:15:11.803

替换
`System.loadLibrary("opencv_java244");`
为
`System.loadLibrary(Core.NATIVE_LIBRARY_NAME);`

# php - PHP MongoDB 在数组中搜索

> ID：15835431
> 
> 赞同：0
> 
> 时间：2013-04-05T13:37:41.280
> 
> 标签：php, mongodb, mongohq

我被置于一个相当奇怪的境地。这是我的文档风格。

```
{
  _id: ObjectId("4ff642fcc33203be3ba36e39"),
  agents: {
    1: "Sharon57 Braveheart",
    2: "xoJessxo Pexie",
    3: "KRISxsee Ronas",
    4: "Consualo Resident"
  },
  estates: [
    "Surreal"
  ],
  lead: "Allyson Breumann"
} 
```

$team = $db->teams->findOne(array("agents" => $ownername)); 用于返回上面的文件。但是现在它只返回null。我可以搜索线索，它工作正常。这是 mongodb 更新中的新错误吗？版本 2.4.1

# javascript - 使用 .no-js 类检测 js

> ID：15835441
> 
> 赞同：5
> 
> 时间：2013-04-05T13:38:08.710
> 
> 标签：javascript, css, modernizr

我一直使用的方法是在`<html>`标签上添加一个 .no-js 类，然后在用户浏览器中启用 JavaScript 的情况下使用剥离标签并用 js 替换它的modernizr。

基本上，我已经构建了一个 CSS3 移动和桌面导航。如果有 CSS 过渡等（使用modernizr 检查）以及是否有 js 或无 js，我有样式来改变其行为。

问题是，在 JavaScript 有时间加载并将类更改为 js 之前，我得到了 no-js 版本的闪光。（因为默认类是no-js）

我无法理解的是如何找到解决此问题的方法。如果我将 js 特定代码作为主类，然后使用前缀 .no-js 指定另一个代码，即使启用了 js，它也会闪烁 no-js。如果我切换它，它会做同样的事情......

也许我很愚蠢，但任何指针都会很棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T13:42:37.857

Paul Irish 有一篇关于处理这个问题的[优秀博客文章。](http://paulirish.com/2009/avoiding-the-fouc-v3/)这是该帖子的解决方案：

```
<!DOCTYPE html>
<html lang='en' class='no-js'>
    <head>
        <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
        ... 
```

关键是确保您在浏览器有机会呈现任何内容之前更新了类名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T13:41:42.700

您可以在最顶部添加一个简短的脚本`<head>`：

```
<script>
  document.documentElement.className =
    document.documentElement.className.replace('no-js', 'js');
</script> 
```

也不要忘记`<noscript>`标签，它在启用 JavaScript 时会被忽略。

# asp.net - 日期格式排序问题

> ID：15835453
> 
> 赞同：0
> 
> 时间：2013-04-05T13:39:06.197
> 
> 标签：asp.net, sorting, datetime, formatting, asp.net-2.0

我在我的系统上使用 asp.net 2005 并创建一个应用程序。我对日期格式排序有疑问。我有一个包含三个字段的表格，例如“用户名、日期时间、访问页面”。

我的记录如下

```
user name     date time              visited page
    xyz          4/4/2013 5:30:45 PM     aaa.aspx    
    xyz          4/4/2013 6:35:15 PM     aaa.aspx    
    xyz          4/4/2013 7:55:45 PM     aaa.aspx    
    xyz          4/4/2013 10:05:45 PM     aaa.aspx    
    xyz          4/4/2013 11:06:45 PM     aaa.aspx 
```

我想在不使用 java 脚本或 jquery 的情况下对其进行排序。并且输出应该是

```
user name     date time              visited page    
xyz          4/4/2013 11:06:45 PM     aaa.aspx    
xyz          4/4/2013 10:05:45 PM     aaa.aspx    
xyz          4/4/2013 7:55:45 PM     aaa.aspx    
xyz          4/4/2013 6:35:15 PM     aaa.aspx    
xyz          4/4/2013 5:30:45 PM     aaa.aspx 
```

但我得到了这样的输出

```
user name     date time              visited page    
xyz          4/4/2013 7:55:45 PM     aaa.aspx    
xyz          4/4/2013 6:35:15 PM     aaa.aspx    
xyz          4/4/2013 5:30:45 PM     aaa.aspx
xyz          4/4/2013 11:06:45 PM     aaa.aspx    
xyz          4/4/2013 10:05:45 PM     aaa.aspx 
```

我试图通过数据视图对此进行排序，但它无法正常工作，任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:45:22.620

将 CSV 设置为 ODBC 源。然后您必须使用 Schema.ini 并将该字段设置为日期时间。请参阅链接：http: [//msdn.microsoft.com/en-us/library/ms709353.aspx](http://msdn.microsoft.com/en-us/library/ms709353.aspx)

它应该解释这一点。然后，一旦你完成了，你可以做一个 SQL 查询，然后做一个简单的

```
 SELECT * ORDER BY [date time] desc 
```

我个人讨厌使用纯文本文件，如果您可以使用 DTS 并将其放入某种关系数据库中，那将是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:46:18.533

将您的 .csv 值读入具有强类型 DateTime 属性的对象，然后进行排序。

```
CsvValue[] values = ReadCsvFile().OrderBy(value => value.DateTime); 
```

CsvValue 在哪里

```
public class CsvValue
{
   public string UserName {get; set;}
   public DateTime DateTime {get; set;}
   public string VisitedPage {get; set;}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:03:11.240

还有许多其他方法可以读取 CSV，包括原始文本文件和简单的字符串解析。您可以在此处使用其他答案中的一些建议，或者您可以将结果填充到 DataTable 或其他任何内容中。使用任何你觉得舒服的东西。

其他答案中没有提到的重要一点是，您需要明确说明您正在阅读的日期时间格式。例如，我怎么知道`1/2/2013`代表 1 月 2 日或 2 月 1 日？

由于您拥有的文件没有使用不变的日期格式（例如 ISO8601），因此您应该在某处明确提供格式，例如：

```
DateTime dt = DateTime.ParseExact(YourDateString,
                                  "M/d/yyyy",  // or "d/M/yyyy"
                                  CultureInfo.InvariantCulture); 
```

# ruby-on-rails-3 - rails 将返回 nil 的包含查询转换为范围 lambda

> ID：15835455
> 
> 赞同：0
> 
> 时间：2013-04-05T13:39:10.327
> 
> 标签：ruby-on-rails-3

以下查询在某些情况下返回 nil

```
 scope :claim_one, where(" location_id IS NULL OR start_time IS NULL OR archived IS NULL " ).includes(:instructor_assignments).where('instructor_assignments.user_id IS NULL') 
```

我想将查询转换为 lambda 函数，该函数处理查询返回的 nil，如下所示；

```
scope :claim, (lambda  do  |claim| where(" location_id IS NULL OR start_time IS NULL OR archived IS NULL ").includes(:instructor_assignments).where('instructor_assignments.user_id IS NULL', claim ) unless claim.nil? end ) 
```

后者不起作用，因为我认为它没有正确的 rails 语法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:35:42.713

不确定我是否完全理解（见上面的评论），但我希望这会有所帮助。我认为您的代码的结果将是一个 ActiveRecord::Relation，其中没有记录而不是 nil。我假设“声明”是您要传入的参数。如果是这种情况，您可以按如下方式添加它。

现在处理 lambda 作用域的首选方法要好得多；只需使用类方法：

```
def self.claim_one(claim)
  return [whatever you want] unless claim
  where(" location_id IS NULL OR start_time IS NULL OR archived IS NULL " ).
    includes(:instructor_assignments).
    where('instructor_assignments.user_id IS NULL')
end 
```

我会建议以下内容，以使您的范围更易于单独使用，更易于理解和测试，而且非常简单：

```
def self.incomlete()
  where(" location_id IS NULL OR start_time IS NULL OR archived IS NULL " )
end

def self.without_instructor()
  includes(:instructor_assignments).where('instructor_assignments.user_id IS NULL')
end 
```

要调用这个，我会使用类似的东西：

```
result = YourModel.incomplete.without_instructor
if result.empty?
  # do yo funky "ain't got no records dance"
else
  # record jackpot!  
end 
```

这回答了你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:57:03.997

很好，我应该以更好的方式陈述事情

我正在使用[Ryan Bates CanCan gem 的 CanCan gem](https://github.com/ryanb/cancan/wiki/Defining-Abilities)

在我看来，我有以下代码：

```
 <% if can? :claim, @workshop %>
  <%= link_to claim_workshop_path(@workshop), :method =>  :post , :class => "mybtn btn-mini claim-workshop-button"  do %>
    <%= t(:Claim) %>
    <%= content_tag(:i, "", :class => "icon-thumbs-up").html_safe %>
 <% end %>
<% end %> 
```

我希望能够使用[Ryan Bates CanCan](https://github.com/ryanb/cancan/wiki/Defining-Abilities)的 te :claim 能力 为此，我需要一个能够使用该查询的范围，如上面的链接中所述。但有时查询不返回任何结果——或 nil——。

在我的能力.rb 文件中，我有以下使用范围的代码

```
f user.role == "admin" || user.role  = "scheduler"
     can :manage, :all
     can :claim , Workshop.claim do |workshop_instance|
       # workshop_instance.can_claim?
        workshop_instance.instructor_assignments.nil?
     end
   else
     can :read, :all
   end 
```

在 User 类中，我定义了需要它来获得我的结果的范围

```
 scope :claim, where(" location_id IS NOT NULL OR start_time IS NOT NULL  " ).includes(:instructor_assignments).where('instructor_assignments.user_id IS NOT NULL') 
```

# filesystems - 文件名中的空格

> ID：15835457
> 
> 赞同：0
> 
> 时间：2013-04-05T13:39:11.230
> 
> 标签：filesystems

某些文件系统关心文件或目录名称的开头或结尾的空格？

他们（文件系统）在创建文件时将这个：“/目录/”转换为这个“/目录/”？

英语不是我的母语，所以我对任何错误表示歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:41:44.843

是的，他们确实在乎。例如在 Linux Ext3 / Ext4 中：

```
 touch "file1"
   touch " file1"
   touch "file1 " 
```

将创建三个不同的文件。一个不带空格，另一个带前导空格，另一个带尾随空格。

它与目录的工作方式相同，因为 Linux 遵循 Unix 原则，即[一切皆文件](http://en.wikipedia.org/wiki/Everything_is_a_file)。

Windows[文件名规则](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)建议不要对文件或目录使用尾随空格，即使底层文件系统可能支持它。

# sql - 我想从 SQL Server 中的 4 个表中检索数据

> ID：15835462
> 
> 赞同：0
> 
> 时间：2013-04-05T13:39:17.683
> 
> 标签：sql, sql-server, join

我想从 4 个表中检索数据。`Patient`表具有`id`PK ，这是其他三个表中的外键`ett`，`phar`并且`ssc`. 患者仅属于一类。即患者 id pt1 存在于 3 个表中的任何一个中。现在我想检索患者信息及其相关类别。

我的查询是：

```
SELECT *
FROM Patient p
INNER JOIN ETT t 
ON p.Patient_ID = t.Patient_ID  || INNER JOIN Pharmacological ph 
ON p.Patient_ID = ph.Patient_ID 
```

我使用`OR`了子句，因为我希望一次只执行 1 个内部联接。但它没有给我结果，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:44:30.853

> ....Patient 表的 ID 为 PK，这是其他三个表名称中的外键：*ett*、*phar*和*ssc*，其中**患者仅属于一个 category**。例如，***患者 id pt1 存在于 3 个表中的任何一个中***。

根据您的陈述，您可以`Patient`使用表连接所有表，`LEFT JOIN`因为一条记录只能存在于一个表上。下面的查询使用`COALESCE`它返回列表中的第一个*非空*值。

您唯一需要做的就是手动指定要在列表中显示的列名，如下所示。

```
SELECT  a.*,
        COALESCE(t.colA, p.ColA, s.ColA) ColA, 
        COALESCE(t.colB, p.ColB, s.ColB) ColB,
        COALESCE(t.colN, p.ColN, s.ColN) ColN
FROM    Patient a
        LEFT JOIN ETT t
            ON a.Patient_ID = t.Patient_ID
        LEFT JOIN Phar p
            ON a.Patient_ID = p.Patient_ID
        LEFT JOIN SSC s
            ON a.Patient_ID = s.Patient_ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:42:18.853

对于or - 不要||，使用“or” 你不能加入or，你需要重新格式化你的查询。

# c# - Windows 8 XAML 数据绑定更新文本已更改

> ID：15835471
> 
> 赞同：1
> 
> 时间：2013-04-05T13:39:25.887
> 
> 标签：c#, binding, windows-8, winrt-xaml

我有一个使用 MVVM 模式的 Windows 8 XAML/C# 应用程序。

我在表单上的所有文本框都将它们的文本属性绑定到我的 MVVM 类的属性上。

因此，我的一个文本框如下所示：

```
<TextBox x:Name="textAddressLine1" Text="{Binding AddressLine1, Mode=TwoWay}"/> 
```

MVVM 类的属性如下所示：

```
 private string addressLine1;

    public string AddressLine1
    {
        get { return addressLine1; }
        set
        {
            if (addressLine1 == value)
            {
                return;
            }

            addressLine1 = value;
            RaisePropertyChanged("AddressLine1");
        }
    } 
```

当我在我的文本框中输入时，MVVM 类没有更新。只有当焦点移动到不同的控件时它才会更新。

当我的文本框上的文本发生变化时，如何更新 MVVM 类属性？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:43:00.087

对 textAddressLine1 使用显式绑定

```
<TextBox x:Name="textAddressLine1" Text="{Binding AddressLine1,UpdateSourceTrigger=Explicit, Mode=TwoWay}" TextChanged="textAddressLine1_Changed"/>

private void textAddressLine1_Changed(object sender, RoutedEventArgs e)
{  
BindingExpression be = textAddressLine1.GetBindingExpression(TextBox.TextProperty);
be.UpdateTarget();
} 
```

我没有测试代码，但应该可以工作。

编辑：我看到它 UpdateSourceTrigger 对于环境不存在

您可以创建一个您的视图模型作为实例并将其作为数据上下文提供，您可以轻松地从您的代码隐藏执行您的视图模型。对于这种类型的案例，它可以节省一天的时间！

```
 public MyClassViewModel ViewModel {get;set} 
 ctor()
 {
   this.ViewModel=new MyClassViewModel();
   this.DataContext=this.ViewModel;
   InitializeComponets();
 }

 private void textAddressLine1_Changed(object sender, RoutedEventArgs e)
 {  
   this.ViewModel.AddressLine1=textAddressLine1.Text;
 } 
```

我认为你不需要通过这种方式两种方式。OneWay 没问题。因为您明确更改了 VM。

注意：我在 SO 上编码，没有再次测试。希望有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-12T12:51:42.890

我有同样的问题，我在这里找到：[https ://stackoverflow.com/a/11676076/4551080](https://stackoverflow.com/a/11676076/4551080)

```
<TextBox Text="{Binding Path=EmailAddress, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

所以一定要设置

```
UpdateSourceTrigger=PropertyChanged
```

默认值为 LostFocus

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:09:58.693

使用此解决方法：

```
public class ExtendedTextBox : TextBox
    {
        public static readonly DependencyProperty CustomActionProperty =
            DependencyProperty.Register(
            "CustomAction",
            typeof(Action<string>),
            typeof(ExtendedTextBox),
            new PropertyMetadata(null, OnPropertyChanged));

        public Action<string> CustomAction 
        {
            get
            {
                return (Action<string>)GetValue(CustomActionProperty);
            }
            set
            {
                SetValue(CustomActionProperty, value);
            }
        }

        private static void OnPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if(e.NewValue != null)
                (d as ExtendedTextBox).TextChanged += ExtendedTextBox_TextChanged;
            else
                (d as ExtendedTextBox).TextChanged -= ExtendedTextBox_TextChanged;
        }

        async static void ExtendedTextBox_TextChanged(object sender, TextChangedEventArgs e)
        {            
            await CoreWindow.GetForCurrentThread().Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => (sender as ExtendedTextBox).CustomAction((sender as ExtendedTextBox).Text));
        }        
    } 
```

在您的模型中：

```
public Action<string> UpdateBindedViewModelProperty
        {
            get { return new Action<string>((value) => NewLabelName = value); }
        } 
```

并查看：

```
<plmrfc:extendedtextbox customaction="{Binding UpdateBindedViewModelProperty, Mode=OneTime}" text="{Binding Path=NewLabelName, Mode=TwoWay}" width="200" x:name="Label_TextBox"></plmrfc:extendedtextbox> 
```

还有另一种方法，它不涉及子类化 TextBox。也许你更喜欢这个：

```
using System.Reflection;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace Flexman
{
    public class TextBoxUpdateSourceBehaviour
    {
        private static PropertyInfo _boundProperty;

        public static readonly DependencyProperty BindingSourceProperty =
            DependencyProperty.RegisterAttached(
            "BindingSource", 
            typeof(string), 
            typeof(TextBoxUpdateSourceBehaviour),
            new PropertyMetadata(default(string), OnBindingChanged));

        public static void SetBindingSource(TextBox element, string value)
        {
            element.SetValue(BindingSourceProperty, value);
        }

        public static string GetBindingSource(TextBox element)
        {
            return (string)element.GetValue(BindingSourceProperty);
        }

        private static void OnBindingChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var txt = d as TextBox;
            if (txt == null)
                return;

            txt.Loaded += OnLoaded;
            txt.TextChanged += OnTextChanged;
        }

        static void OnLoaded(object sender, RoutedEventArgs e)
        {
            var txt = sender as TextBox;
            if (txt == null)
                return;

            // Reflect the datacontext of the textbox to find the field to bind to.
            var dataContextType = txt.DataContext.GetType();
            _boundProperty = dataContextType.GetRuntimeProperty(GetBindingSource(txt));

            // If you want the behaviour to handle your binding as well, uncomment the following.
            //var binding = new Binding();
            //binding.Mode = BindingMode.TwoWay;
            //binding.Path = new PropertyPath(GetBindingSource(txt));
            //binding.Source = txt.DataContext;
            //BindingOperations.SetBinding(txt, TextBox.TextProperty, binding);
        }

        static void OnTextChanged(object sender, TextChangedEventArgs e)
        {
            var txt = sender as TextBox;
            if (txt == null)
                return;

            if (_boundProperty.GetValue(txt.DataContext).Equals(txt.Text)) return;
            _boundProperty.SetValue(txt.DataContext, txt.Text);
        }
    }
} 
```

并查看

```
<TextBox Text="{Binding Username}" Flexman:TextBoxUpdateSourceBehaviour.BindingSource="Username" /> 
```

这是我所知道的最漂亮的解决方案。其他人将是“非通用”黑客。祝你好运。我确实同意这是 silverlight/WPF 的重大降级，但是，嘿，WinRT 中有很多更可怕的东西在 WPF 中丢失了 :)

# visual-studio - VS2012 文本编辑器宽度

> ID：15835475
> 
> 赞同：3
> 
> 时间：2013-04-05T13:39:34.010
> 
> 标签：visual-studio, visual-studio-2012

是否可以在 VS2012 中更改文本编辑器的宽度 - 我有一个相当宽的屏幕并使用相当小的文本，所以我最终在我的屏幕中间浪费了很多房地产。

我不想关闭自动换行 - 我只想让换行在该行进一步开始。如果这有意义！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:39:13.540

您可以在 Visual Studio 2012 中使用 HTML 进行设置，但没有全局设置，并且在很多语言中都缺少它。

![在此处输入图像描述](https://i.stack.imgur.com/UTIvG.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:35:04.720

您可以在您正在写入的窗口旁边放置另一个“虚拟”窗口，因此实际的编辑器窗口会更小。如果要将文本向右平移，可以将其放在左侧，如果要缩短行，则可以将其放在右侧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:20:36.423

我实际上在其他地方找到了答案；VS 似乎不提供此功能，但 Resharper 提供。Resharper -> 选项 -> 代码编辑 -> C# -> 格式化样式 -> 换行和换行 -> 右边距（列）

我把我的设置为 200 解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T07:25:40.823

我知道这不是您想要的，但我相信它可以解决同样的问题。我也有一个相当大的屏幕，并尝试尽可能优化地使用它。

我讨厌在代码或设计选项卡之间切换，并尽量避免这种情况。

VS 具有允许用户创建*水平*或*垂直*选项卡组的功能，自从我开始使用它以来，我发现它非常有用。These options are present in the context menu by right clicking the tab or in the VS Window Menu (Menus are seen only if the tab groups feature is not active).

我创建了一个带有垂直选项卡组的屏幕截图，如下所示。在此示例中，我同时概述了设计器和代码视图。

![在此处输入图像描述](https://i.stack.imgur.com/FToQP.jpg)

只要有依赖关系，例如比较代码、重新设计模块等，我们就可以使用选项卡组。我知道要习惯这个功能需要一点时间，但试试看：)

# r - mean(x, na.rm = TRUE) 的错误结果

> ID：15835477
> 
> 赞同：2
> 
> 时间：2013-04-05T13:39:39.450
> 
> 标签：r, nan, zoo, mean

我想计算一系列经理回报的平均值、最小值和最大值，如下所示：

```
ManagerRet <-data.frame(diff(Managerprices)/lag(Managerprices,k=-1)) 
```

然后我将 return = 0 替换为 NaN，因为数据是从数据库中提取的，并且并非所有日期都已填充。

```
ManagerRet = replace(ManagerRet,ManagerRet==0,NaN) 
```

我有以下3个功能

```
> min(ManagerRet,na.rm = TRUE)
[1] -0.0091716

> max(ManagerRet,na.rm = TRUE)
[1] 0.007565

> mean(ManagerRet,na.rm = TRUE)*252
[1] NaN 
```

为什么 mean 函数返回 NaN 值，而 min 和 max 正确执行计算？

您可以在下面找到动物园对象 MangerRet

```
> ManagerRet
               Manager
2011-10-04         NaN
2011-10-05         NaN
2011-10-06         NaN
2011-10-07         NaN
2011-10-11         NaN
2011-10-12         NaN
2011-10-13         NaN
2011-10-14         NaN
2011-10-17         NaN
2011-10-18         NaN
2011-10-19         NaN
2011-10-20         NaN
2011-10-21         NaN
2011-10-24         NaN
2011-10-25         NaN
2011-10-26         NaN
2011-10-27         NaN
2011-10-28         NaN
2011-10-31  6.3832e-04
2011-11-01 -4.4625e-06
2011-11-02  2.8142e-03
2011-11-03  5.1114e-04
2011-11-04 -1.0105e-03
2011-11-07  7.5650e-03
2011-11-08  2.1002e-03
2011-11-09 -9.1716e-03
2011-11-10  1.1173e-03
2011-11-14 -6.9207e-03
2011-11-15  2.6241e-04
2011-11-16  1.7520e-03
2011-11-17 -2.6443e-05
2011-11-18 -1.4169e-03
2011-11-21  3.7602e-04
2011-11-22  4.3982e-05
2011-11-23 -6.7328e-06
2011-11-25  1.1571e-05
2011-11-28  1.4016e-07
2011-11-29 -2.0426e-07 
```

根据需要提供附加信息

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Italian_Italy.1252  LC_CTYPE=Italian_Italy.1252   
[3] LC_MONETARY=Italian_Italy.1252 LC_NUMERIC=C                  
[5] LC_TIME=Italian_Italy.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] gWidgetsRGtk2_0.0-81       gWidgets_0.0-52           
 [3] RGtk2_2.20.25              lattice_0.20-15           
 [5] moments_0.13               data.table_1.8.8          
 [7] tseries_0.10-30            timeDate_2160.97          
 [9] PerformanceAnalytics_1.1.0 xts_0.9-3                 
[11] zoo_1.7-9                  RODBC_1.3-6               

loaded via a namespace (and not attached):
[1] grid_2.15.2    quadprog_1.5-4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:03:12.220

您应该`colMeans`为此使用：

```
colMeans(ManagerRet, na.rm=TRUE)
##       Manager 
## -6.826297e-05 
```

如果这是一个 data.frame，您将收到警告（但输出正确）。

在这里，您暴露了使用逻辑矩阵索引对 a`data.frame`和 a`zoo`对象进行子集化的方式的不一致。`[`这似乎是`[.zoo`. 我已经给维护者发了电子邮件。

问题发生在此步骤中`mean.default`：

```
if (na.rm) 
    x <- x[!is.na(x)] 
```

这是出错的地方：

```
ManagerRet[!is.na(ManagerRet)]
##   1 
## NaN 
```

`!is.na(ManagerRet)`看起来像预期的那样，但不是：

```
class(!is.na(ManagerRet))
[1] "matrix" 
```

这门课在`[.zoo`. 这些行存在：

```
if (all(class(i) == "logical")) 
    i <- which(rep(i, length.out = n2))
else if (inherits(i, "zoo") && all(class(coredata(i)) == 
    "logical")) {
    i <- which(coredata(merge(zoo(, time(x)), i)))
}
else if (!((all(class(i) == "numeric") || all(class(i) == 
    "integer")))) 
    i <- which(MATCH(index(x), i, nomatch = 0L) > 0L) 
```

这里的最后一行实际上是在这种情况下运行的，产生了不正确的结果。

结构：

```
> dput(ManagerRet)
structure(c(NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 
NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 0.00063832, -4.4625e-06, 
0.0028142, 0.00051114, -0.0010105, 0.007565, 0.0021002, -0.0091716, 
0.0011173, -0.0069207, 0.00026241, 0.001752, -2.6443e-05, -0.0014169, 
0.00037602, 4.3982e-05, -6.7328e-06, 1.1571e-05, 1.4016e-07, 
-2.0426e-07), .Dim = c(38L, 1L), .Dimnames = list(c("2011-10-04", 
"2011-10-05", "2011-10-06", "2011-10-07", "2011-10-11", "2011-10-12", 
"2011-10-13", "2011-10-14", "2011-10-17", "2011-10-18", "2011-10-19", 
"2011-10-20", "2011-10-21", "2011-10-24", "2011-10-25", "2011-10-26", 
"2011-10-27", "2011-10-28", "2011-10-31", "2011-11-01", "2011-11-02", 
"2011-11-03", "2011-11-04", "2011-11-07", "2011-11-08", "2011-11-09", 
"2011-11-10", "2011-11-14", "2011-11-15", "2011-11-16", "2011-11-17", 
"2011-11-18", "2011-11-21", "2011-11-22", "2011-11-23", "2011-11-25", 
"2011-11-28", "2011-11-29"), "Manager"), index = 1:38, class = "zoo") 
```

**旧代码 -`colMeans`是这样做的正确方法：** 用 $ 指定“列”可以解决这个问题：

```
mean(ManagerRet, na.rm=TRUE)
## [1] NaN
mean(ManagerRet$Manager, na.rm=TRUE)
## [1] -6.826297e-05 
```

# function - 一个简单的投票聚合函数

> ID：15835479
> 
> 赞同：0
> 
> 时间：2013-04-05T13:39:48.577
> 
> 标签：function, math, aggregation

我想评估一个提案的接受率，其中一个提案可以收到两种类型的投票：正面和负面。

所以想到的最简单的函数如下：

```
p + n / p + n + \epsilon 
```

但是，我想提出一个更复杂的函数，它可以满足以下两个属性。

*   赞成票与总票数的比例应始终优先。因此，`p1 = 5, n1 = 0, p2 = 99, n2 = 1`该函数应该为第一个计算更高的接受率。

*   当比率相等时，该函数应该为总票数较高的那个返回更高的接受率。因此，在以下情况下，`p1 = 1000, n1 = 0, p2 = 10, n2 = 0`第一个应该具有更高的接受率。

关于函数的另一个想法可能如下：

```
w * [p / (p + n)] + (1 - w) * [(p + n) / maxV] 
```

其中 maxV 是任何提案收到的最大票数， w 是 中的实数`[0..1]`。

此函数满足第二个条件，而保证不扩展到第一个条件。找到 w 的值来满足系统可能很麻烦，因此我正在寻找更好的解决方案。

# r - R中的互相关（数量和重要性）

> ID：15835482
> 
> 赞同：1
> 
> 时间：2013-04-05T13:40:05.650
> 
> 标签：r, correlation

我有以下格式的时间序列数据：

```
 hour1  hour2  hour3  hour4  hour5  hour6  hour7  hour8  hour9 hour10 hour11 hour12 hour13 hour14 hour15 hour16 hour17
1  1.300  0.888  0.792  0.324  0.650  0.670  0.836  1.018  1.220  1.258  1.744  2.302  2.582  3.182  3.962  4.630  4.378
2 -0.170 -0.534 -0.564 -1.022 -0.774 -0.660 -0.524 -0.344 -0.100 -0.064  0.024  0.614  1.360  2.072  2.722  3.330  3.398
3 -0.344 -0.684 -0.622 -1.128 -0.982 -0.844 -0.604 -0.432 -0.124  0.016  0.110  0.600  1.392  2.150  3.404  4.028  4.084
4  2.138  1.442  0.998  1.380  1.124  1.248  0.844  1.344  1.542  1.392  1.820  2.626  2.316  2.784  3.890  4.290  4.280
5  0.684 -0.178 -0.320 -0.792 -0.540 -0.550 -0.410 -0.278 -0.182  0.024  0.400  0.992  1.328  1.682  2.488  3.176  3.260
6  0.656 -0.060  1.858  1.042  3.200  2.868  1.154  1.388  1.472  2.092  2.382  3.848  3.214  3.952  4.576  5.340  4.386
  hour18 hour19 hour20 hour21 hour22 hour23 hour24
1  5.196  5.850  6.316  3.612  5.434  5.712  5.468
2  4.090  4.320  5.660  2.818  4.516  5.026  4.498
3  5.634  4.998  5.566  2.788  4.830  5.400  5.114
4  6.126  5.366  6.392  3.184  4.336  4.198  4.764
5  4.494  4.802  5.484  2.306  4.234  4.410  4.626
6  5.906  6.004  6.250  3.790  6.158  6.926  6.522 
```

我想执行互相关分析并且我使用过 acf(od2) 但我遇到了这个错误

> acf(od2) 中的错误：“lag.max”必须至少为 0

此外，我如何自动提取相关量和显着性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:39:20.837

我猜你想要这个：

```
DF <- read.table(text="  hour1  hour2  hour3  hour4  hour5  hour6  hour7  hour8  hour9 hour10 hour11 hour12 hour13 hour14 hour15 hour16 hour17 hour18 hour19 hour20 hour21 hour22 hour23 hour24
1  1.300  0.888  0.792  0.324  0.650  0.670  0.836  1.018  1.220  1.258  1.744  2.302  2.582  3.182  3.962  4.630  4.378 5.196  5.850  6.316  3.612  5.434  5.712  5.468
2 -0.170 -0.534 -0.564 -1.022 -0.774 -0.660 -0.524 -0.344 -0.100 -0.064  0.024  0.614  1.360  2.072  2.722  3.330  3.398 4.090  4.320  5.660  2.818  4.516  5.026  4.498
3 -0.344 -0.684 -0.622 -1.128 -0.982 -0.844 -0.604 -0.432 -0.124  0.016  0.110  0.600  1.392  2.150  3.404  4.028  4.084 5.634  4.998  5.566  2.788  4.830  5.400  5.114
4  2.138  1.442  0.998  1.380  1.124  1.248  0.844  1.344  1.542  1.392  1.820  2.626  2.316  2.784  3.890  4.290  4.280 6.126  5.366  6.392  3.184  4.336  4.198  4.764
5  0.684 -0.178 -0.320 -0.792 -0.540 -0.550 -0.410 -0.278 -0.182  0.024  0.400  0.992  1.328  1.682  2.488  3.176  3.260 4.494  4.802  5.484  2.306  4.234  4.410  4.626
6  0.656 -0.060  1.858  1.042  3.200  2.868  1.154  1.388  1.472  2.092  2.382  3.848  3.214  3.952  4.576  5.340  4.386 5.906  6.004  6.250  3.790  6.158  6.926  6.522",header=TRUE)

m <- t(as.matrix(DF))
acf(m) 
```

或者可能是这样的：

```
lapply(seq_len(ncol(m)),
         function(i) lapply(seq_len(ncol(m)), 
            function(j) ccf(drop(m[,i]),drop(m[,j])))) 
```

（我相信这与 几乎相同`print(acf(m))`）

或者只是这样：

```
sapply(seq_len(ncol(m)), 
         function(i) sapply(seq_len(ncol(m)), 
            function(j) cor(drop(m[,i]),drop(m[,j])))) 
```

# tomcat6 - Tomcat 6.0能否被Netcool监控

> ID：15835485
> 
> 赞同：0
> 
> 时间：2013-04-05T13:40:16.173
> 
> 标签：tomcat6, monitoring

我目前正在处理一个融合升级项目，并将从 Weblogic 迁移到 Tomcat 6.0。目前整个系统的所有监控都由Netcool完成。有谁知道我是否可以使用 Netcool 监控 Tomcat 6.0？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T07:46:22.987

要监视 Tomcat，您可以使用 IBM Tivoli Composite Application Manager for J2EE。请记住，Netcool（我确定您指的是 Netcool Suite 中的 Omnibus）是事件管理系统，而不是监控工具。

您将需要为 ITCAM 代理使用 IBM Tivoli Monitoring 基础架构，并配置事件目的地 (Netcool Omnibus)。

# python - 快速将内存中的数据库转储到文件

> ID：15835495
> 
> 赞同：6
> 
> 时间：2013-04-05T13:40:44.853
> 
> 标签：python, sqlite, sqlalchemy

我想利用在内存中保存 SQLite 数据库（通过 SQLAlchemy）的速度优势，同时我经历了插入内容的一次性过程，然后将其转储到文件中，存储以备后用。

[考虑一个以通常方式创建](http://docs.sqlalchemy.org/ru/latest/dialects/sqlite.html)的沼泽标准数据库：

```
# in-memory database
e = create_engine('sqlite://') 
```

除了创建一个全新的数据库并手动插入每个条目之外，有没有**更快的方法将其内容移动到光盘上？**

**编辑：**

对于我是否会看到使用内存数据库的任何好处存在一些疑问。不幸的是，我已经看到了大约 120 倍的巨大时差。

这种混乱可能是由于我错过了问题中的一些重要细节。也可能是由于我对以下内容缺乏了解：缓存/页面大小/等。请允许我详细说明：

我正在运行我设置的系统的模拟，每个模拟都经过以下阶段：

1.  对数据库进行一些查询。
2.  根据这些查询的结果进行计算/运行模拟。
3.  `insert`基于最新模拟的数据库中的新条目。
4.  通过运行 确保数据库是最新的，包含新条目[`commit()`](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#adding-new-objects)。

虽然我在每次模拟运行中只进行了十几次插入，但我确实运行了*数百万*次模拟，并且每次模拟的结果都*需要*可供未来的模拟使用。正如我所说，在运行文件支持的数据库时，这个读写过程需要相当长的时间*。*这是6小时和一个月之间的差异。

希望这可以澄清事情。如有必要，我可以拼凑一个简单的 python 脚本来进一步概述我的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:46:11.467

SQLAlchemy 和 SQLite 知道如何缓存和批量插入。

在这里使用内存中的 SQLite 数据库没有任何好处，因为该数据库使用页面就像磁盘版本一样，唯一的区别是最终这些页面被写入磁盘以用于基于磁盘的数据库。性能上的差异只有 1.5 倍，请参阅[SQLite 性能基准测试——为什么 :memory: 这么慢...只有磁盘速度的 1.5 倍？](https://stackoverflow.com/questions/764710/sqlite-performance-benchmark-why-is-memory-so-slow-only-1-5x-as-fast-as-d)

以后也无法将内存数据库移动到基于磁盘的数据库，除非在内存数据库上运行查询并在两个单独的连接上执行批量插入到基于磁盘的数据库中。

# java - 没有最终参数的函数，其中包括 Runnable()

> ID：15835501
> 
> 赞同：1
> 
> 时间：2013-04-05T13:40:59.403
> 
> 标签：java, android

如何创建没有最终参数的函数，其中包括 Runnable()？

```
 public void scroll(int scroll_to) {
        final HorizontalScrollView scrl = (HorizontalScrollView)findViewById(R.id.horizontalScrollView1);
        scrl.post(new Runnable() { 
            public void run() { 
                 scrl.scrollTo(0, scroll_to);
            } 
        });
    } 
```

但这不能引用非最终`scroll_to`变量。如何做通用功能来滚动？没有`Runnable`它并不总是有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:42:54.640

这个怎么样？

```
public void scroll(int scroll_to)
{
    final int x = scroll_to;
    final HorizontalScrollView scrl = (HorizontalScrollView)findViewById(R.id.horizontalScrollView1);
    scrl.post(new Runnable()
    {
        public void run()
        {
            scrl.scrollTo(0, x);
        } 
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:43:24.793

`scrl`您可以在构建期间将 的值传递给您的可运行文件，而不是从您的可运行文件中引用它。

```
protected class MyRunnable implements Runnable {
    protected HorizontalScrollView scrl;

    public SetStatusIconRunnable( HorizontalScrollView scrl, int scrollTo ) {
        mScrl = val;
                    mScrollTo = scrollTo;
    }

    @Override
    public void run() {
        mScrl.scrollTo(0, mScrollTo);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:51:05.603

你可以做`scroll_to`final。它也适用于方法参数。

# c# - 为什么在静态构造函数而不是非静态构造函数中检查泛型类中的 T 类型更好？

> ID：15835504
> 
> 赞同：-3
> 
> 时间：2013-04-05T13:41:11.303
> 
> 标签：c#, generics

我对此的考虑是为什么任何人都喜欢在静态构造函数中执行它，如果给定类型在所有调用中都不正确，则只调用一次，而不仅仅是一次，我希望在使用错误类型的所有代码部分中得到异常。

这是我的意思的例子：

```
internal sealed class GenericTypeThatRequiresAnEnum<T> {
    static GenericTypeThatRequiresAnEnum() {
        if (!typeof(T).IsEnum) {
        throw new ArgumentException("T must be an enumerated type");
        }
    }
} 
```

为什么不只是非静态构造函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:55:49.943

因为如果静态构造函数失败，您根本无法使用特定类型。因此，没有必要到处检查类型参数。

```
 public class Test<T>
    {
        static Test()
        {
            throw new InvalidOperationException();
        }
    } 
```

用法：

```
new Test<string>(); //throws TypeInitializationException 
```

# c# - 如何扩展一条线以形成一个矩形或区域

> ID：15835505
> 
> 赞同：0
> 
> 时间：2013-04-05T13:41:14.620
> 
> 标签：c#, graphics, line, region

我正在研究 .net2，因此无法访问 .net3 中的 Line 类，但我不确定这是否可行。

但我有一条线（2分）

我想将它扩展为 4 的宽度，即像 drawLine 在图形上所做的那样，但我找不到一种简单的方法来获取区域/图形路径或矩形。

有人知道吗？而且这条线可以在任何方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:41:14.200

我找到了做到这一点的方法，

```
GraphicsPath gfxPath = new GraphicsPath();
gfxPath.AddLine(line.x1, line.y1, line.x2, line.y2);
gfxPath.Widen(new Pen(Color.Blue, lineThickness));//lineThinkness is all that matters
Region reg = new Region(gfxPath);

if (reg.IsVisible(mousePoint)) // return true if the mousePoint is within the Region. 
```

这会按 lineThickness 加宽线，然后您可以使用它来检查点或矩形等是否在其中。

# php - 从数据库中获取变量数据并在 PHP 中显示

> ID：15835508
> 
> 赞同：-6
> 
> 时间：2013-04-05T13:41:21.973
> 
> 标签：php, javascript, sql

我想从 php 中的输入框数据中传递值，并显示但 php sql 无法识别

```
<form name="form1"/>
<input type="text" name="code1" value="D50" size="7" maxlength="10" onblur="chkidpro(this.value,'provider1');" />
<input type="text" name="code2" value="" size="7" maxlength="10"/>
<form/>

<script type="text/javascript">

var jvalue = form1.code1.value;

<?php $abc = "<script>document.write(jvalue)</script>"?> 

</script>

<?PHP 
$con = mysql_connect("localhost","abc_one","pass");
mysql_select_db("abc_one", $con);

echo $abc;// ITS PRINT AS D50

$c = 'D50';

//$c = $abc;

$result2 = mysql_query("SELECT * FROM tblmycode where code='$c';");

$tab = mysql_fetch_array($result2);

if($result2 === false)

{
die("Database Error");
}

if(mysql_num_rows($result2) == 0)

{
die("No Record Found");
} 
```

**回声 $abc; 打印 AS D50**

**如果我替换 $c = $abc; 没有找到记录**

**如果我更换 $c = 'D50'; 可用记录**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:54:18.150

您显示的代码在服务器端工作，因此：

```
 <?php $abc = "<script>document.write(jvalue)</script>"?> 
```

套`$abc`为`"<script>document.write(jvalue)</script>"`

您在那里编写的 javaScript 将在 CLIENT 端，即浏览器上运行。不要混合它们...

好的，澄清正在发生的事情：

此文本在您的服务器中的 php 文件中，因此在调用时：

```
Line                                       Action on Server
<form name="form1"/>                       //->sent to client
<input type="text" name="code1" value="D50"//->sent to client
<input type="text" name="code2" value=""   //->sent to client
<form/>                                    //->sent to client 
<script type="text/javascript">            //->sent to client
var jvalue = form1.code1.value;            //->sent to client(will run on client) 

<?php                                      //->php takes control on server

 $abc = "<script>document.write(jvalue)</script>"; //php runs this on server 
 //php sets $abc to "<script>document.write(jvalue)</script>" on server...
 //php does not process javascript, php sees it as text...

?>                                         //->ends php control

</script>                                  //->sent to client

<?PHP                                      //->php takes control on server again

$con = mysql_connect("localhost","abc_one","pass"); // php runs this on server
mysql_select_db("abc_one", $con);                   // php runs this on server

echo $abc;                                          // php echoes $abc 
```

意思是一行包含

```
<script>document.write(jvalue)</script> 
```

**发送给客户。**

它被写入您的客户文档...

它将在客户端计算机上而不是在服务器上进行评估。

它会在不久的将来发生，目前还没有......

为什么在浏览器上看到 D50？让我们展望未来：

那么当**CLIENT**（浏览器）解析 javascript 时会发生什么？

浏览器将执行

```
var jvalue = form1.code1.value; 
```

行并将 jvalue 设置为 D50，当然当浏览器遇到

```
<script>document.write(jvalue)</script> 
```

它将运行它并在客户端上显示 jvalue 的值**，**即**D50** ..

所有这一切都将发生在客户端计算机上而不是服务器上。

所以这将在不久的将来发生，还没有......

现在回到你的 php 文件

```
//$c = 'D50';    // lets ignore this   

$c = $abc;                                    // php runs this on server. 

// guess what now $c is '<script>document.write(jvalue)</script>'     

// then php tries to run this:

$result2 = mysql_query("SELECT * FROM tblmycode where code='$c';"); 
```

现在您的查询变得非常有趣：

```
SELECT * FROM tblmycode where code='<script>document.write(jvalue)</script>'; 
```

我希望你现在明白发生了什么...

PS：mysql接口已弃用，请使用mysqli或PDO...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:52:25.520

您需要了解后端和前端的工作原理。

您的 PHP 首先生成 HTML 服务器端，将其发送给用户，然后用户在浏览器中运行它并执行 Javascript。

所以当你写这个时：

```
$abc = "<script>document.write(jvalue)</script>" 
```

`$abc`不会是您的 JavaScript 的结果**。**它实际上是一个包含`<script>document.write(jvalue)</script>`.

所以你的方法是完全错误的——你不能将这样的变量传递给 PHP！

您需要做的是将字段值发送到服务器，以便您的脚本可以处理它们。

[阅读一些类似这样的](http://www.phpeasystep.com/phptu/8.html)教程。

# c++ - 传递值作为参考

> ID：15835511
> 
> 赞同：-6
> 
> 时间：2013-04-05T13:41:28.653
> 
> 标签：c++, reference

我有一个函数（方法）

我的结构是由一些复杂的对象创建的，但最终它的行为就像

```
struct MyStruct{

string a, b, c, d, e, f;
int g;
string h, k, l, n, o, p, q;
int r;
} 
```

我这样做是因为它是一个数据库库并且它在这些类型中使用，它更像是一个 DBString、DBInt。

```
void CheckData(MyStruct& st){

} 
```

当我尝试访问它工作的任何值时，在 32 位中。但是在第四个元素之后的 64 位中，我的指针“在结构中的对象内部”指向任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:58:44.500

抱歉，问题是引用已发送到外部库，而我的类型在外部库中的定义不同。

# vb.net - 使用 RowFilter 而不清除它

> ID：15835514
> 
> 赞同：1
> 
> 时间：2013-04-05T13:41:35.723
> 
> 标签：vb.net, filter, row

我有一个`DataTable`如下

```
ID  Name    Type
1   Ram     Employee
2   John    Supplier
3   Uma     Employee
1   Ravi    Supplier 
```

我把它分配给`PartyDV`. 我正在使用`RowFilter`as

```
PartyDV.RowFilter = "Type = 'Supplier'" 
```

之后我`RowFilter`在同一个DV中使用。在这我不清除`RowFilter`.

```
PartyDV.RowFilter = "ID = 1" 
```

我的答案是什么

```
A)
ID  Name    Type
1   Ravi    Supplier
B)      
ID  Name    Type
1   Ram     Employee
1   Ravi    Supplier 
```

甲还是乙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:45:59.857

看起来您的答案将是“B”，但您可以通过运行代码自己弄清楚！

基本上当您执行以下代码行时：

```
 PartyDV.RowFilter = "Type = 'Supplier'"
 PartyDV.RowFilter = "ID = 1" 
```

第二个将覆盖第一个。他们不*加起来*。

如果你想同时使用这两个过滤器，你可以试试这个：

```
 PartyDV.RowFilter = "Type = 'Supplier' AND ID = 1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:36:39.527

当然，您的答案是 B，因为即使您没有清除过滤器，但程序会自行清除。我曾经做过这样的事情。它就像你的答案 B。如果你希望你的答案是 A。你必须一次有两个过滤器。

像这样（就像@Milky Dinescu 一样）回答

```
PartyDV.RowFilter = "Type = 'Supplier' AND ID = 1" 
```

当然，您不能将它们划分为您的问题。因为这将是相同的结果。逻辑思维：就像你写的一样

```
textbox1.text = "first" 'it will be first as value
textbox1.text = "Second" 'it will be second as value, first will be delete
if you want to combine, you must like this isn't it?
textbox1.text = "First" & "Second" 
```

所以，它与过滤器的逻辑相同

# java - java在字符串中查找价格值

> ID：15835521
> 
> 赞同：0
> 
> 时间：2013-04-05T13:41:48.703
> 
> 标签：java, android, regex

我想在字符串中找到价格值（传入的短信）。我正在使用 java 正则表达式：

`Pattern pattern = Pattern.compile("\\d+.\\d\\d");/`

但是这个表达式也能找到日期。例如`12.12.2013`返回`12.12`。如果有什么方法可以只找到价格价值？也许不使用正则表达式，因为字符串不长。

**已编辑** 消息示例：

Oplata tovariv: S1LV0GRU RYKAVUCHKA 510, UA 02.04.2013 21:12 kartka 1111111111 na **sumu 24.72UAH**。Dostupnyi zalyshok 1351.58UAH。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:47:57.050

如果您的价格的一般格式是 xxxx.xx，您可以使用：

```
"(?<!(?:\\d|\\.))\\d+\\.\\d{2}(?!\\.)" 
```

至少它不会匹配日期。
（不要忘记转义，所以它不是通配符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:49:42.013

```
Pattern pattern = Pattern.compile(" \\d+\\.\\d\\d "); 
```

这将在价格之前和之后寻找空格。

# android - Android 自定义 ScrollView 包含带有自定义视图的 LinearLayout

> ID：15835522
> 
> 赞同：1
> 
> 时间：2013-04-05T13:41:49.260
> 
> 标签：android, android-layout

我在滚动和在正确位置拾取触摸信号时遇到了很多问题。

基本上应用程序是：

```
ViewPager ->
Fragment ->
ScrollView -> 
LinearLayout -> 
Lots of dynamically added customer View objects 
```

片段 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/transaction_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/add_new_transaction"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/AddNewTransaction" />

<com.company.application.TransactionScroller
    android:id="@+id/transaction_scroller"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <com.company.application.TransactionGroup
        android:id="@+id/transaction_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="fill"
        android:orientation="vertical" >

    </com.company.application.TransactionGroup>

</com.company.application.TransactionScroller>
</LinearLayout> 
```

其中TransactionScroller 是ScrollView，TransactionGroup 是LinearLayout。视图对象是自定义绘制的，并执行以下操作：

```
@Override
protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec )
{
    // Try for a width based on our minimum
    setMeasuredDimension( width, height ) ;
}

@Override
public boolean onTouchEvent( MotionEvent event )
{
   Toast.makeText( getContext(), "Grid", Toast.LENGTH_SHORT ).show() ;

   return true ;
}

public void draw( Canvas canvas )
{
   if( tmpBmp.isRecycled() || 
       tmpBmp.getWidth()!=canvas.getWidth() ||
       tmpBmp.getHeight()!=canvas.getHeight() )
    {
        tmpBmp.recycle();
        tmpBmp = Bitmap.createBitmap( canvas.getWidth(), canvas.getHeight(), 
                                      Config.ARGB_8888 ) ;
        c.setBitmap( tmpBmp ) ;
    }

    //clear previous drawings
    c.drawColor( Color.TRANSPARENT, Mode.CLEAR ) ;

    // Draw the background
    c.drawRect( spacing, top, width - spacing , bottom, newpaint ) ;

    // Draw the lines
   for( Line line : lineList )
   {  
      c.drawLine( line.x1, line.y1, line.x2, line.y2, paint ) ;
   }

   canvas.drawBitmap( tmpBmp, 0, 0, null ) ;

   canvas.drawText( String.valueOf( amount ), left, top + ( bottom - top ) /2 , paint);

   canvas.drawBitmap( 
      ( ( BitmapDrawable )MainActivity.iconList[ index ].getDrawable() ).getBitmap(),
      left + MainActivity.iconList[ index ].getWidth(),
      top + ( bottom - top ) /2, paint ) ;
} 
```

1）首先，我试图在自定义视图对象中捕获触摸和拖动事件。但是我只能捕获ScrollView中的事件，LinearLayout中只有Down事件，自定义View中什么都没有。

在滚动视图中：

```
setOnTouchListener( new OnTouchListener()
                       {   
                          @Override
                          public boolean onTouch( View view, MotionEvent event )
                          {
                             // Only called when touched outside the ScrollView

                             if( event.getAction() ==
                                 android.view.MotionEvent.ACTION_DOWN )
                             {
                                Toast.makeText( getContext(),
                                                "S_Down",
                                                Toast.LENGTH_SHORT ).show() ;

                                return false ;
                             }
                             else if( event.getAction() ==
                                      android.view.MotionEvent.ACTION_UP )
                             {
                                Toast.makeText( getContext(),
                                                "S_Up",
                                                Toast.LENGTH_SHORT ).show() ;

                                return false ;
                             }

                             return false;
                          }
                       } ) ; 
```

两者都在 ScrollView 中被调用。但是在 LinearLayout 中也是一样的，只有 Down 事件被捕获而在自定义视图中，什么都没有被捕获。我试过设置可聚焦、可点击等。

有任何想法吗？

2）其次，当 ScrollView 只有我的自定义 View 对象时，它不会滚动。但是当填充其他东西时它会这样做，例如按钮。正如您在上面看到的，我正在使用 onMeasure()，并且我尝试对这些值进行硬编码但无济于事。

提前致谢。杰克

# python - 如何使用 python 2.5 打包和解包数据

> ID：15835524
> 
> 赞同：1
> 
> 时间：2013-04-05T13:41:51.827
> 
> 标签：python, python-2.5

我知道有很多与我的问题有关的问题，但我很难理解打包和解包的工作原理。

例如 using`struct.pack("!B",14)`给我的价值`x0e`基本上这是一个单字节二进制文件。

我怎样才能创建一个四字节的二进制文件？例如`struct.pack("!B",104277)`应该生成`0x00019755`，但我不能让这个代码`struct.pack("!B",104277)`输出`0x00019755`

**我的问题的背景细节**

我正在尝试创建一个“Type-4 高分辨率灰度指纹图像”记录，它是 NIST 标准的一部分。Type-4 记录的第一个值是记录的长度 (LEN)，在这种情况下为 104277 位，但标准规定 LEN 应表示为四字节二进制。我拥有的样本数据包含该值，该值`0x00019755`已转换为四字节二进制，因此符合标准。

参考链接：

*   [http://code.beckjohnson.com/NistRecordTypes.html](http://code.beckjohnson.com/NistRecordTypes.html)
*   [http://www.nist.gov/itl/csd/biometrics/ansi-nist.cfm](http://www.nist.gov/itl/csd/biometrics/ansi-nist.cfm)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:44:15.677

如[§7.3.2.2 中所述。Python 手册的格式字符](http://docs.python.org/2/library/struct.html#format-characters)，无符号 4 字节长的格式代码是`L`.

```
struct.pack("!L", 104277) 
```

# android - Android SQLite 将用户定义的表名称添加到预制数据库

> ID：15835525
> 
> 赞同：0
> 
> 时间：2013-04-05T13:41:58.923
> 
> 标签：android, sqlite

这是我的第一篇文章，如果我做错了什么，请原谅我。我的资产文件夹中有一个数据库，我在启动时将它带入我的应用程序，然后我可以通过在 onUpgrade 中运行此代码来创建一个新表（只要版本不匹配）。

```
if(oldVersion < 2){ db.execSQL("CREATE TABLE IF NOT EXISTS " + WorkoutsList.DATABASE_TABLE_DYNAMIC + " (" +
                    WorkoutsDBAdapter.WORKOUTS_ROW_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    WorkoutsDBAdapter.WORKOUTS_NAME + " TEXT NOT NULL, " +
                    WorkoutsDBAdapter.WORKOUTS_WEIGHT + " DECIMAL NOT NULL, "+
                    WorkoutsDBAdapter.WORKOUTS_SETS + " INT NOT NULL, "+
                    WorkoutsDBAdapter.WORKOUTS_REPS + " INT NOT NULL);");} 
```

我通过单击一个按钮来运行此代码

```
 btnUpdate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            String table = tableName.getText().toString();
            DATABASE_TABLE_DYNAMIC = table;
            if (table.trim().length() > 0) {
            DbHelper.addTable();
            }
            else{
                Toast.makeText(getApplicationContext(), "Please enter table name",
                    Toast.LENGTH_SHORT).show();
            }
        }

    }); 
```

DbHelper.addTable(); 只需将数据库版本增加 1。（它曾经做其他事情，这就是为什么名称未领先）。是否可以在按下按钮后立即运行 onUpgrade（只要 DbHelper.addTable(); 运行，因为现在我的数据库只有在我使用另一种方法查看信息时才会更新）关于我的方法的任何反馈这样做以及您推荐的任何其他方式将不胜感激，因为我是新手。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:31:59.407

`onUpgrade()`当您使用新版本初始化 SQLiteOpenHelper 时调用。

# android - 令牌“int”上的Android R.java语法错误，此令牌后应有VariableDeclaratorId

> ID：15835526
> 
> 赞同：3
> 
> 时间：2013-04-05T13:42:01.740
> 
> 标签：android, syntax-error, r.java-file

我在 R.java 文件中不断生成以下内容：

```
public static final class id {
    public static final int   =0x7f0500ae; 
```

我已经完成了研究，所有这些都指向字符串文件。我检查了我的字符串文件，没有错误。该应用程序不会在其他任何地方产生错误，它只是正在生成的这一行。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-05T11:31:02.140

我遇到了同样的问题，但奇怪的是我的 strings.xml 文件没有显示任何错误，但能够通过在 strings.xml 文件中搜索空字符串名称值来解决。

成立：

```
<string name="">Username</string> 
```

变成：

```
<string name="lblUsername">Username</string> 
```

工作并且能够编译，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:07:50.697

一个或多个 xml 文件可能存在编译问题。你可以检查吗？如果您使用的是 eclipse，有时 xml 文件或文件夹不会显示它有错误（文件或文件夹中的红色 * 图标。

如果不是这种情况，则删除 R.java 文件并重建项目。或清理您的项目并再次重建它。

# android - 显示来自数据库android的一些值？

> ID：15835527
> 
> 赞同：0
> 
> 时间：2013-04-05T13:42:07.320
> 
> 标签：android

我有4节课。1：数据库处理程序

```
package as.d.d;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper{

    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_NAME = "contactsManager";
     private static final String TABLE_CONTACTS = "contacts";

     private static final String KEY_ID = "id";
     private static final String KEY_NAME = "name";
     private static final String KEY_PH_NO = "phone_number";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")";
         db.execSQL(CREATE_CONTACTS_TABLE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);
         onCreate(db);
    }

    void addContact(StudentInfo studentInfo) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, studentInfo.getName()); // Contact Name
        values.put(KEY_PH_NO, studentInfo.getPhoneNumber()); // Contact Phone

        db.insert(TABLE_CONTACTS, null, values);
        db.close();
    }

    StudentInfo getContact(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
                KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        StudentInfo studentInfo = new StudentInfo(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2));
        // return contact
        return studentInfo;
    }

    public List<StudentInfo> getAllStudentInfo() {
        List<StudentInfo> studentList = new ArrayList<StudentInfo>();
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;
        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        if (cursor.moveToFirst()) {
            do {
                StudentInfo studentInfo = new StudentInfo();
                studentInfo.setID(Integer.parseInt(cursor.getString(0)));
                studentInfo.setName(cursor.getString(1));
                studentInfo.setPhoneNumber(cursor.getString(2));
                studentList.add(studentInfo);
            } while (cursor.moveToNext());
        }

        return studentList;
    }

    public int updateContact(StudentInfo studentInfo) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, studentInfo.getName());
        values.put(KEY_PH_NO, studentInfo.getPhoneNumber());

        return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(studentInfo.getID()) });
    }} 
```

2：学生信息

```
package as.d.d;

public class StudentInfo {

    int _id;
    String _name;
    String _phone_number;

    public StudentInfo(){

    }
    public StudentInfo(int id, String name, String _phone_number){
        this._id = id;
        this._name = name;
        this._phone_number = _phone_number;

    }

    public StudentInfo(String name, String _phone_number){
        this._name = name;
        this._phone_number = _phone_number;

    }

    public int getID(){
        return this._id;
    }

    public void setID(int id){
        this._id = id;
    }

    public String getName(){
        return this._name;
    }

    public void setName(String name){
        this._name = name;
    }

    public String getPhoneNumber(){
        return this._phone_number;
    }

    public void setPhoneNumber(String phone_number){
        this._phone_number = phone_number;
    }} 
```

3：添加

```
package as.d.d;

import java.util.List;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class add extends Activity implements OnClickListener{

    Button b1,b2;
    EditText e2,e3;
    TextView t1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add);

        b1=(Button)findViewById(R.id.button1);
        b2=(Button)findViewById(R.id.button2);
        e2=(EditText)findViewById(R.id.editText2);
        e3=(EditText)findViewById(R.id.editText3);
        t1=(TextView)findViewById(R.id.AtextView1);

        b1.setOnClickListener(this);
        b2.setOnClickListener(this);

        DatabaseHandler db = new DatabaseHandler(this);
        List<StudentInfo> studentInfo = db.getAllStudentInfo();

        for (StudentInfo cn : studentInfo){

            t1.setText("Id:"+(cn.getID()+1));
        }
   }

    @Override
    public void onClick(View v) {

        if(v==b2){
            startActivity(new Intent(add.this, FdActivity.class));
        }
        else if(v==b1){

            String s2=e2.getText().toString();
            String s3=e3.getText().toString();

            if(s2.trim().equals("")||s3.trim().equals("")){

                Toast.makeText(getApplicationContext(), "Please Submit Student Information",Toast.LENGTH_SHORT).show();

                }   

            else{
                DatabaseHandler db = new DatabaseHandler(this);
                Log.d("Insert: ", "Inserting ..");
                db.addContact(new StudentInfo(s2,s3));
                Log.d("Reading: ", "Reading all contacts..");
                List<StudentInfo> studentInfo = db.getAllStudentInfo();
                for (StudentInfo cn : studentInfo){
                    t1.setText("Id:"+(cn.getID()+1));
            }}}}} 
```

4：添加标记

```
package as.d.d;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.TextView;
import android.widget.Toast;

public class addmark extends Activity{

    AutoCompleteTextView a1;
    TextView t1,t2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addmark);

        a1=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        t1=(TextView)findViewById(R.id.amtextView1);
        t2=(TextView)findViewById(R.id.amtextView2);

        DatabaseHandler db = new DatabaseHandler(this);

        final List<StudentInfo> studentInfo = db.getAllStudentInfo();

        final ArrayList<String> s1 = new ArrayList<String>();
        final ArrayList<String> s3 = new ArrayList<String>();

        for (StudentInfo cn : studentInfo) {
            s1.add(cn.getName());
            s3.add(cn.getPhoneNumber());

        }
        ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line,s1); 

        a1.setThreshold(1); 
        a1.setAdapter(adapter);

        a1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
}
        }); 
```

在第三堂课（添加）中，我使用 Textview 自动生成学生 ID（数字（int）和两个文本字段，通过按下按钮将学生姓名和电话号码提交到数据库中。这里学生 ID、姓名和电话号码已成功提交。在第四节课中，我使用自动完成文本视图来显示我从第三节课提交的姓名。当我选择一个名字假设 Farhan（我已经提交到数据库并且 id 是 4 并且电话号码是 99876 存储在数据库中）然后我想要在两个 textview(TextView t1,t2;) 中查看 id 和电话号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:49:26.150

使用这个查询：

```
 Cursor cursor = db.query(TABLE_NAME, new String[] { KEY_ID,
            KEY_PH_NO  }, KEY_NAME +"= inserted_value", null,
            null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:03:22.220

你应该实现这样的东西：

```
 AutoCompleteTextView actv = (AutoCompleteTextView)findViewById(R.id.actv);
    actv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> adapter, View arg1, int index,
                long arg3) {
            DatabaseHandler dh = new DatabaseHandler();

            TextView tv1 = (TextView )findViewById(R.id.tv1);
            TextView tv2 = (TextView )findViewById(R.id.tv2);

            tv1.SetText(dh.findIdbyName(arg1.getText().ToString());
            tv2.SetText(dh.findPhonebyName(arg1.getText().ToString());
        }
    }); 
```

添加数据库助手：

```
public String findIdbyName(String arg) {
Cursor c = db.rawQuery("SELECT id FROM TABLE_CONTACTS WHERE KEY_NAME ='"+arg+"';", null);
return c.MoveToFirst().getString(1);
} 
```

# rml - 如何获取 RML 模板中的总页数？

> ID：15835529
> 
> 赞同：2
> 
> 时间：2013-04-05T13:42:17.053
> 
> 标签：rml

RML 中有[一个标签](https://www.reportlab.com/software/rml-reference/#pageNumber)`<pageNumber>`，显示当前页码。

但是如何获取生成的 PDF 文档的总页数呢？

我想添加一个分页，比如“第 1/2 页”、“第 2/2 页”：

```
Page <pageNumber /> / <pageCount> 
```

但是`<pageCount>`标签不存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T09:10:41.960

花了相当多的时间后，我发现了这个：

在末尾`<story>`添加：

```
<namedString id="lastPage"><pageNumber/></namedString> 
```

要显示分页，请使用：

```
Page <pageNumber /> / <getName id="lastPage" default="0" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T01:25:11.930

我一直在为 OpenErp 中的这种情况提供解决方案：

```
<document>
    <template>
        <pageTemplate>
            <stylesheet>
                ...
                <paraStyle name="main_footer" fontSize="7.0" leading="7" alignment="LEFT" spaceBefore="0.0" spaceAfter="0.0"/>
                ...
            </stylesheet>
            ...
            ...
            <!-- Page Footer -->
            <place x="1.5cm" y="0cm" height="1cm" width="19.0cm">
                <para style="main_footer">[[ o.name or '']] | P&#225;gina: <pageNumber/> de </para>
            </place>    
            <drawString x="4.9cm" y="0.74cm"><pageCount/></drawString>
            ... 
```

基本上，它在我的页脚文本左侧“绘制”`<pageCount>`标签。@alartur 的解决方案更优雅，但在 OpenErp rmltopdf 转换器中不起作用。

我们的页脚文本必须使用 7px 的 Helvetica 字体，因为这是 rmltopdf 代码中使用的默认字体`<pageCount>`

# android - 用安卓手机测量汽车旋转

> ID：15835530
> 
> 赞同：0
> 
> 时间：2013-04-05T13:42:17.530
> 
> 标签：android, sensors

我发现了很多关于如何处理设备的旋转、运动和位置传感器方向的线程。我想创建一个我将在我的汽车中使用的应用程序，首先我想测量汽车的旋转度数。所以我把手机放在手机壳上，例如当我开车左转时，我想在手机上看到汽车的转向度。

可以通过磁力计和加速度计吗？

我首先发布了一个我认为还可以的代码。（假设我拿着我的手机“肖像”模式，所以首先不是横向）

```
private static SensorManager sensorService;

//magnetic
private Sensor mSensor;

//accelerometer
private Sensor gSensor;

private float[] mValuesMagnet      = new float[3];
private float[] mValuesAccel       = new float[3];
private float[] mValuesOrientation = new float[3];

private float[] mRotationMatrix    = new float[9];

@Override
public void onCreate(Bundle savedInstanceState) {
nf.setMaximumFractionDigits(2);
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
sensorService = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
this.mSensor = sensorService.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
this.gSensor = sensorService.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);

sensorService.registerListener(this, gSensor, SensorManager.SENSOR_DELAY_NORMAL);
sensorService.registerListener(this, mSensor, SensorManager.SENSOR_DELAY_NORMAL);
}

@Override
public void onAccuracyChanged(Sensor arg0, int arg1) {
}

@Override
public void onSensorChanged(SensorEvent event) {
switch (event.sensor.getType()) {           
case Sensor.TYPE_ACCELEROMETER: 
System.arraycopy(event.values, 0, mValuesAccel, 0, 3); 
break; 

case Sensor.TYPE_MAGNETIC_FIELD: 
System.arraycopy(event.values, 0, mValuesMagnet, 0, 3); 
break; 
}

SensorManager.getRotationMatrix(mRotationMatrix, null, mValuesAccel, mValuesMagnet);
SensorManager.getOrientation(mRotationMatrix, mValuesOrientation); 

//        double azimuth = Math.toDegrees(mValuesOrientation[0]);    //azimuth,     rotation around the Z axis.
//        double pitch   = Math.toDegrees(mValuesOrientation[1]);    // pitch, rotation around the X axis.
double roll    = Math.toDegrees(mValuesOrientation[2]);    //roll, rotation around the Y axis.

//normalize
//        azimuth = azimuth>0?azimuth:azimuth+360;
roll = roll>0?roll:roll+360;

String txt = "roll= "+Math.round(roll);
((EditText)findViewById(R.id.szog)).setText(txt);
} 
```

问题： - 这个应用程序在汽车中的准确度如何？（我该怎么做才能更准确？） - 当我将手机置于“横向”模式时应该怎么做？定向滚动是否还可以？

请注意，这是第一次尝试，所以有很多事情要做！但首先我想看看我怎样才能做到这一点

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:55:02.327

如果您将 Android 设备设置为像指南针一样，那么就会有一个始终指向磁北的箭头。因此，通过测量该箭头方向的变化，您可以测量汽车的旋转。

要更好地指示 Android 设备的方向，请使用 Sensor.TYPE_GRAVITY 和 Sensor.TYPE_MAGNETIC_FIELD，而不是 Sensor.TYPE_ACCELEROMETER 和 Sensor.TYPE_MAGNETIC_FIELD。这更好，因为 Sensor.TYPE_GRAVITY 会尝试过滤掉设备移动造成的影响。

如果 Android 设备平放在表面上，则磁北的方向由`SensorManager.getOrientation(...)`. 当它站立或侧放时，它会更复杂一些。但是，我建议先将设备平放，因为这是最简单的情况，然后您可以进入更困难的情况。

# c# - WPF中如何获取webbrowser控件输入框的值？

> ID：15835533
> 
> 赞同：3
> 
> 时间：2013-04-05T13:42:20.627
> 
> 标签：c#, html, wpf, browser

我添加了 Microsoft.mshtml 作为对我的项目的引用，并走到了这一步：

```
 mshtml.IHTMLDocument2 document = (mshtml.IHTMLDocument2)webbrowser.Document;
        string username = document.all["username"].GetAttribute("value"); 
```

但第二行不起作用。它说

> *“错误 CS0021：无法将带有 [] 的索引应用于‘mshtml.IHTMLElementCollection’类型的表达式”*

当悬停在“全部”上时。我如何访问所有元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:01:09.783

试试这个：

```
var document = (IHTMLDocument3) webbrowser.Document;
var value =
    document.getElementsByName("username")
            .OfType<IHTMLElement>()
            .Select(element => element.getAttribute("value"))
            .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T07:17:43.827

经过几个小时的努力，这个解决方案对我有用。

```
Dim document = DirectCast(MainBrowser.Document, IHTMLDocument3) 
Dim formName = document.getElementsByName(AppSettings("myFormName")).OfType(Of IHTMLElement)().Select(Function(element) element.getAttribute("name")).FirstOrDefault() 
```

# javascript - css和javascript在点击时显示图像的figcaption

> ID：15835534
> 
> 赞同：2
> 
> 时间：2013-04-05T13:42:21.090
> 
> 标签：javascript, css

我在使用我的 css 配置我的 javascript 时遇到了一些问题，因此当单击图像时，会出现一个带有图标的小标题栏。目前，当我将鼠标悬停在图像上时，会出现标题栏，但我想更改它，以便平板电脑上的用户可以使用它，因为他们必须触摸并且没有悬停功能。

**查看页面**

```
<figure>
    <img width="158" height="158" alt="Gravatar" 
             data-bind="attr:{src: GravatarUrl}" />
    <figcaption> 
        <a title="Email" id="emailIcon" class="icon-envelope icon-white" 
                   data-bind="attr:{'href':'mailto:' + Email()}"></a>
        <a title="Profile" id="profileIcon" class="icon-user icon-white"></a>
    </figcaption>
</figure> 
```

**CSS**

```
figure, figcaption {
    display: block;
}

 figure {
    position:relative;
    float:left;
    margin:20px;
    width:158px;
    height:158px;
    border:1px solid #333;
    overflow:hidden;
    background: #fff;
    padding: 1px;
}

 figure figcaption {
    position:absolute;
    bottom:0;
    left:0;
    opacity: .75;
    margin-bottom:-115px;       
    -webkit-transition: margin-bottom;
    -webkit-transition-duration: 400ms;
    -webkit-transition-timing-function: ease-out;
    -moz-transition-property: margin-bottom;
    -moz-transition-duration: 400ms;
    -moz-transition-timing-function: ease-out;
    -o-transition-property: margin-bottom;
    -o-transition-duration: 400ms;
}

 figure.open figcaption {
    margin-bottom:0px;
}

 figcaption {
    width:160px;
    height:25px;
    background:#111;
    color:#fff;
    font-family: Arial, Helvetica, sans-serif;
} 
```

**Javascript** 不确定是否有办法仅使用 css 来实现。

```
<script type="text/javascript">
    (function ($) {
        $.views.Roster.GetRoster('@url');
        $('figure').on('click', function (event) {
            $(event.currentTarget).toggleClass('open'); 
        });
    })(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:46:05.173

只切换一个类并将可见元素留给 CSS 是个好主意。

```
$('figure').on('click', function (e) {
    $(this).toggleClass('open'); 
}); 
```

在这种情况下，按照您希望的方式设置您的 figcaption 样式，然后添加：

```
figcaption { display: none; }
.open figcaption { display: block; } 
```

这样，当 figcaption 默认隐藏但当您单击目标并且 javascript 添加类“open”时，figcaption 将可见。你当然不必让它显示块，它可以是“无”以外的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:50:51.657

如果这段代码

```
figure:hover figcaption {
    margin-bottom: 0px;
} 
```

正在显示 figcaption 并且`open`当`figure`你想显示它时，你可以使用：

```
figure:hover figcaption, figure.open figcaption {
    margin-bottom: 0px;
} 
```

# vb.net - 将文本文件中的数据加载到 DataGridView 并保存

> ID：15835535
> 
> 赞同：0
> 
> 时间：2013-04-05T13:42:24.657
> 
> 标签：vb.net, string, datagridview, streamreader, streamwriter

1）如何从文本文件中获取特定字符串以回调`datagrid`

我希望格式与此相同：

```
ronald fernando banker's village philippines 8460999
jeniffer corpuz bulacan,pandacan philippines 8460564 
```

我只想要字符串：

```
phillippines and 8460999
bulacan,pandacan 8460564 
```

被添加到一个特定的点`DataGridView`

2）我会将所有这些值放在不同的行上吗？

3）是否可以将这些附加到文本文件中？

所以文本文件已经有了这个

```
John Cruz 
Manila, Philippines
18
june 28, 1990 
```

并添加这个额外的数据字符串

```
Mary Rose Hanford
Manila, Philippines
25
march 27, 1999 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:02:12.563

您可以使用 String.Format 方法。

请参阅此处的 MSDN：http: [//msdn.microsoft.com/en-us/library/fht0f5be (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/fht0f5be(v=vs.80).aspx)

# jira - JIRA在文本字段上自定义“order by”

> ID：15835538
> 
> 赞同：2
> 
> 时间：2013-04-05T13:42:34.290
> 
> 标签：jira, case-when, jql

我的 JIRA 查询目前如下：

`(status = "In Progress" OR status="Test Failed") AND assignee = currentUser() order by priority desc, due asc, status desc, key asc`

问题是，优先级是文本，并且在and`Medium`之前排在第一位。此外，如果我命令我的任务升序，问题将转到列表的末尾。我尝试了 case-when-then 表达式，但 JQL 不允许我这样做，因为它们是保留字。如何定义自定义排序？`Low``High``Medium`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:51:09.107

如果优先级是一个文本字段，您将按字母数字顺序排序（我认为实际上是 ascii）。有些人通过将名称更改为 0-High、1-Medium、2-Low 或“P1 High”、“P2 Medium”和“P3 Low”来解决此问题。或者，您可以将优先级的自定义字段定义为选择字段，其中包含名为低、中、高的选项，并在字段配置期间更改它们的顺序。

# asp.net - (ASP.NET) 按钮事件在前 30 秒内未触发

> ID：15835539
> 
> 赞同：1
> 
> 时间：2013-04-05T13:42:34.527
> 
> 标签：asp.net

我遇到了一个奇怪的问题，即**按钮的单击事件有一段时间**（大约 20-30 秒）没有被触发，然后开始正常工作。刷新页面，我必须等待它再次工作。

**请注意：**它在本地主机上调试运行时有效，所描述的行为仅在服务器上找到。我开始怀疑服务器端问题，但我无权访问它，需要向负责它的人员指出可能导致此问题的原因（如果它确实是服务器端问题） .

非常感谢您找到问题的任何帮助！我将页面剥离到最基本的内容，这就是我所拥有的。

**ASP：**

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>   

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd (http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd)">

<html xmlns="http://www.w3.org/1999/xhtml (http://www.w3.org/1999/xhtml)"> 
<head runat="server"> 
    <title></title> 
</head> 
<body> 
    <form id="form1" runat="server"> 
    <div> 

        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 

    </div> 
    </form> 
</body> 
</html> 
```

**代码隐藏：**
使用系统；使用 System.Collections.Generic；使用 System.Linq；使用 System.Web；使用 System.Web.UI；使用 System.Web.UI.WebControls；

```
public partial class _Default : System.Web.UI.Page 
{ 
    protected void Page_Load(object sender, EventArgs e) 
    { 

    } 
    protected void Button1_Click(object sender, EventArgs e) 
    { 
        Response.Redirect("http://www.google.se/ (http://www.google.se/)"); 

    } 
} 
```

**配置：**

```
<configuration> 
  <system.web> 
    <compilation debug="true" targetFramework="4.0"/> 
  </system.web> 
</configuration> 
```

# sql - 更多一起选择

> ID：15835548
> 
> 赞同：1
> 
> 时间：2013-04-05T13:43:02.303
> 
> 标签：sql, select, join

你能帮我解决这个问题吗？我需要将这三个 SELECT 连接在一起............有可能吗？我需要一张桌子……有 collums：jmeno、Pocet_zapasu、branek、Pocet_zapasu2、branek2、Pocet_turnaju、branek3。

```
/*Soutezni zapasy*/
SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_zapasu,
    SUM(CASE WHEN Branky>0 then Branky end) as branek
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=1)
GROUP BY Jmeno;

/*Pratelske zapasy*/
SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_zapasu2,
    SUM(CASE WHEN Branky>0 then Branky end) as branek2
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=2)
GROUP BY Jmeno;

/*turnaje*/
SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_turnaju,
    SUM(CASE WHEN Branky>0 then Branky end) as branek3
FROM Hraci
INNER JOIN Ucast_Turnaj ON Ucast_Turnaj.ID_Hrace_turnaj=Hraci.IDHrace 
INNER JOIN Turnaj ON Turnaj.ID_turnaj=Ucast_Turnaj.ID_turnaje_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Turnaj.Kategorie_Turnaj 
WHERE (Kategorie.IDkategorie = 1) AND Turnaj_Datum >= '1/1/2013' AND Turnaj_Datum < '9/1/2014'
GROUP BY Jmeno; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:54:52.897

我认为你可以结合你的前 2 个查询，然后在你的`CASE`语句中使用 add 。我不确定你的第三个，所以我没有尝试组合它，而是将它添加为子查询并使用 a `LEFT JOIN`：

```
SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' AND Zapas.Druh=1 then 1 end) as Pocet_zapasu,
    SUM(CASE WHEN Branky> 0AND Zapas.Druh=1 then Branky end) as branek,
    COUNT(CASE WHEN Ucast = 'TRUE' AND Zapas.Druh=2 then 1 end) as Pocet_zapasu2,
    SUM(CASE WHEN Branky>0 AND Zapas.Druh=2 then Branky end) as branek2,
    Pocet_turnaju,
    branek3
FROM Hraci
    INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
    INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
    INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
    LEFT JOIN (
        SELECT
            Jmeno,
            COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_turnaju
            SUM(CASE WHEN Branky>0 then Branky end) as branek3
        FROM Hraci
            INNER JOIN Ucast_Turnaj ON Ucast_Turnaj.ID_Hrace_turnaj=Hraci.IDHrace 
            INNER JOIN Turnaj ON Turnaj.ID_turnaj=Ucast_Turnaj.ID_turnaje_ucast 
            INNER JOIN Kategorie ON Kategorie.IDkategorie=Turnaj.Kategorie_Turnaj 
        WHERE (Kategorie.IDkategorie = 1) AND Turnaj_Datum >= '1/1/2013' AND Turnaj_Datum < '9/1/2014'
        GROUP BY Jmeno
    ) t ON Hraci.Jmeno = t.Jmeno
WHERE (Kategorie.IDkategorie = 1) 
    AND Zapas_Datum >= '1/1/2013' 
    AND Zapas_Datum < '9/1/2014' 
    AND Zapas.Druh IN (1,2)
GROUP BY Jmeno; 
```

在不完全了解您的表结构的情况下，您也许可以进一步巩固这一点。另外，不确定您从哪张桌子上拉 Jmeno —— 我猜是 Hraci。

根据我对您问题的理解，您不想使用`UNION`它，因为它不会创建额外的列，只会创建额外的行。例如`SELECT 1 as Col1 UNION SELECT 2`将返回包含 2 行的单列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:49:44.550

```
SELECT * FROM   
((SELECT
    Jmeno,
    COUNT(CASE WHEN Ucast = 'TRUE' THEN 1 END) AS Pocet_zapasu,
    SUM(CASE WHEN Branky>0 THEN Branky END) AS branek
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=1)
GROUP BY Jmeno
) AS a CROSS JOIN

(SELECT   
    COUNT(CASE WHEN Ucast = 'TRUE' THEN 1 END) AS Pocet_zapasu2,
    SUM(CASE WHEN Branky>0 THEN Branky END) AS branek2
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=2)
GROUP BY Jmeno
) AS b CROSS JOIN

(SELECT           
    COUNT(CASE WHEN Ucast = 'TRUE' THEN 1 END) AS Pocet_turnaju,
    SUM(CASE WHEN Branky>0 THEN Branky END) AS branek3
FROM Hraci
INNER JOIN Ucast_Turnaj ON Ucast_Turnaj.ID_Hrace_turnaj=Hraci.IDHrace 
INNER JOIN Turnaj ON Turnaj.ID_turnaj=Ucast_Turnaj.ID_turnaje_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Turnaj.Kategorie_Turnaj 
WHERE (Kategorie.IDkategorie = 1) AND Turnaj_Datum >= '1/1/2013' AND Turnaj_Datum < '9/1/2014'
GROUP BY Jmeno
) AS c) 
```

在 mySQL 上测试，现在应该可以消除错误了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:53:00.090

您需要在每个 SQL 查询之间放置一个 UNION ALL。通过放置 UNION ALL，它将获得每个查询的结果并将其显示在一起。为此，每个查询必须具有相同数量的列和列名。

编辑：我已将列名编辑为相同。编辑：我已经从中断查询的组中删除了分号。

```
SELECT
    Jmeno as Column1,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Column2,
    SUM(CASE WHEN Branky>0 then Branky end) as Column3
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=1)
GROUP BY Jmeno

UNION ALL

SELECT
    Jmeno as Column1,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Column2,
    SUM(CASE WHEN Branky>0 then Branky end) as Column3
FROM Hraci
INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=2)
GROUP BY Jmeno

UNION ALL

SELECT
    Jmeno as Column1,
    COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Column2,
    SUM(CASE WHEN Branky>0 then Branky end) as Column3
FROM Hraci
INNER JOIN Ucast_Turnaj ON Ucast_Turnaj.ID_Hrace_turnaj=Hraci.IDHrace 
INNER JOIN Turnaj ON Turnaj.ID_turnaj=Ucast_Turnaj.ID_turnaje_ucast 
INNER JOIN Kategorie ON Kategorie.IDkategorie=Turnaj.Kategorie_Turnaj 
WHERE (Kategorie.IDkategorie = 1) AND Turnaj_Datum >= '1/1/2013' AND Turnaj_Datum < '9/1/2014'
GROUP BY Jmeno 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T14:23:54.620

```
select A.jmeno, A.Pocet_zapasu,A.branek,B.Pocet_zapasu2,B.branek2,C.Pocet_turnaju,C.branek3
FROM
    (SELECT
        Jmeno,
        COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_zapasu,
        SUM(CASE WHEN Branky>0 then Branky end) as branek
    FROM Hraci
    INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
    INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
    INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
    WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=1)
    GROUP BY Jmeno
    ) a
INNER JOIN  
    /*Pratelske zapasy*/
    (SELECT
        Jmeno,
        COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_zapasu2,
        SUM(CASE WHEN Branky>0 then Branky end) as branek2
    FROM Hraci
    INNER JOIN Ucast_Zapas ON Ucast_Zapas.ID_Hrace_zapas=Hraci.IDHrace 
    INNER JOIN Zapas ON Zapas.ID_zapas=Ucast_Zapas.ID_zapasu_ucast 
    INNER JOIN Kategorie ON Kategorie.IDkategorie=Zapas.Kategorie_zapas 
    WHERE (Kategorie.IDkategorie = 1) AND Zapas_Datum >= '1/1/2013' AND Zapas_Datum < '9/1/2014' AND(Zapas.Druh=2)
    GROUP BY Jmeno
    ) B
    ON A.Jmeno = B.Jmeno
INNER JOIN 
    (/*turnaje*/
    SELECT
        Jmeno,
        COUNT(CASE WHEN Ucast = 'TRUE' then 1 end) as Pocet_turnaju,
        SUM(CASE WHEN Branky>0 then Branky end) as branek3
    FROM Hraci
    INNER JOIN Ucast_Turnaj ON Ucast_Turnaj.ID_Hrace_turnaj=Hraci.IDHrace 
    INNER JOIN Turnaj ON Turnaj.ID_turnaj=Ucast_Turnaj.ID_turnaje_ucast 
    INNER JOIN Kategorie ON Kategorie.IDkategorie=Turnaj.Kategorie_Turnaj 
    WHERE (Kategorie.IDkategorie = 1) AND Turnaj_Datum >= '1/1/2013' AND Turnaj_Datum < '9/1/2014'
    GROUP BY Jmeno
    ) C
ON A.Jmeno = C.Jmeno 
```

# asp.net-mvc - 每个模型都有一个 ViewModel 的优点和缺点

> ID：15835552
> 
> 赞同：0
> 
> 时间：2013-04-05T13:43:10.900
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 MVC 应用程序，我主要将模型传递给控制器​​。我有一些使用视图模型的情况，但大多数 CRUD 操作都是直接完成的。我在用于验证模型的模型类中的每个属性上都有数据注释。但是最近我听说更好的做法是使用 ViewModels——每个视图一个。在我看来，这似乎是不必要的，就维护而言只是程序员的噩梦。我想知道是否有人同意或不同意我的观点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:06:20.190

我个人认为“模型”和“视图模型”这两个术语经常被混淆。

在 Microsoft-Tutorial-MVC-World 中，“模型”直接映射到数据库“实体”，您可以轻松执行 CRUD 操作。但在中大型 ASP.NET MVC 应用程序中，您很少会这样做。

因此，您可能会构建一组“与视图相关的业务对象”以在视图之间来回传递。如果你愿意，可以称他们为“模特”。如果你愿意，可以称它们为“ViewModels”。真的没关系。它们执行相同的功能。他们都将“M”放在“MVC”中。

# javascript - 使用外部 url 读取带有 .ajax() 的 json 文件

> ID：15835555
> 
> 赞同：0
> 
> 时间：2013-04-05T13:43:26.210
> 
> 标签：javascript, jquery, json

我不知所措，我无法读取包含 geoJSON 字符串的外部 url ( [http://earthquake.usgs.gov/earthquakes/feed/geojson/1.0/hour )。](http://earthquake.usgs.gov/earthquakes/feed/geojson/1.0/hour)我尝试使用此脚本：

```
.ajax({
 type: "GET",
 url: 'http://earthquake.usgs.gov/earthquakes/feed/geojson/1.0/hour',
 dataType: 'json',
 success: function(data) {
 alert(data.features[0].properties.mag);
 } 
 }); 
```

我还尝试使用 URL 加上 '&callback=foo' 并设置 foo 函数。

我不知道该怎么做才能阅读这个外部网址。我想读取获取 json 字符串或作为文本字符串。请帮我解决它。

# c++ - 我们需要在每个类中提供哪些默认构造函数？

> ID：15835556
> 
> 赞同：0
> 
> 时间：2013-04-05T13:43:27.563
> 
> 标签：c++, c++11

我一直假设编译器会在 C++ 中自动生成复制构造函数和复制运算符，如果没有指定的话。移动构造函数/移动运算符也是这种情况吗？

换句话说，我们是否需要指定移动构造函数和移动运算符才能获得移动语义的好处。或者它们是由编译器默认提供的吗？

我最近正在阅读一些文章，指出如果在类中声明了自定义析构函数，有时移动语义会中断。

何时真正编写移动构造函数/移动运算符有意义？

# c - 更改文本字体时的标签标题剪切（打开 Motif 2.3.1）

> ID：15835557
> 
> 赞同：0
> 
> 时间：2013-04-05T13:43:30.080
> 
> 标签：c, linux, motif

我正在尝试解决软件上的问题。我有两个用 Motif 库创建的窗口。第一个窗口包含 5 个按钮（字体 1、2、3、4、退出），选择一种字体会影响另一个窗口的文本（“未确认的更新”）。 **当第二个窗口的文本是字体 1 时，我们单击字体 4 或字体 3 按钮，结果包括在第二个窗口上显示一个文本标签剪切。**

我已经编写了一个原型来使用相同的编码和初始化小部件的方式来重现错误。但是，我还不能重现这个错误。问题是，在我的原型中管理回调的方式比使用 Xevent 发送到 X 服务器的原始代码要简单得多。

您可以在链接后找到显示问题的两个屏幕截图： [***---屏幕截图---***](http://www.hostingpics.net/viewer.php?id=592172screenshot14.jpg)

您将在此链接之后找到原型代码：[***---here---***](http://pastebin.com/JR7eFVDq)

要编译的行： gcc mmm_window.c -lX11 -lXm -lXt -o mmm_window

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T07:43:56.083

通过强制重绘 3 XmForm 解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:00:58.933

问题似乎来自我的标签的大小（宽度，高度），它在更改字体时不适应。我试图在相关小部件上将 XmNrecomputeSize 设置为 true，但它没有帮助。我继续寻找...

# api - 票务大师 API？在网站内买票？

> ID：15835558
> 
> 赞同：6
> 
> 时间：2013-04-05T13:43:31.033
> 
> 标签：api

我做了一些谷歌搜索，信息稀缺。有没有办法在网站内使用ticketmaster 来允许用户在网站内购买门票？如果ticketmaster 不可用，是否有其他服务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T16:00:36.947

Ticketmaster 没有公共 API（如果您是 Ticketmaster 的官方合作伙伴，您可以在获得他们许可的情况下访问私有 API）。

以下是公共票务 API 列表：[https ://www.programmableweb.com/apitag/tickets+events](https://www.programmableweb.com/apitag/tickets+events)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-20T23:01:47.017

刚刚参加了他们主持的 devjam，现在有一个公共 API，但交易 API 还没有公开

[http://ticketmaster-api.github.io/](http://ticketmaster-api.github.io/)

希望他们尽快推出

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-16T16:25:11.443

查看[http://developer.ticketmaster.com/](http://developer.ticketmaster.com/)

现在具有商务 API，以及发现、活动优惠、合作伙伴、交易、发布和国际发现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-04T07:10:02.507

我也在搜索同样的东西，但发现只有 API 可以从ticketmaster 和通过 deep_url 等获取事件但我还没有成功。

此外，取票 API 也没有任何关于门票及其购买的信息。取票 api 文档的链接是[https://darwin.affiliatewindow.com/documents/ticketmaster/Ticketmaster%20API.pdf](https://darwin.affiliatewindow.com/documents/ticketmaster/Ticketmaster%20API.pdf)

# dojo - 无法将复选框添加到 dojo 增强网格中的最后一列

> ID：15835559
> 
> 赞同：2
> 
> 时间：2013-04-05T13:43:34.687
> 
> 标签：dojo, dojox.grid

我正在创建如下所示的道场网格，并且我正在使用indirectSelection 插件来创建一个复选框，如下所示，但默认情况下，复选框将位于网格的第一列。我如何让它出现在最后一列？

```
var grid = new dojox.grid.EnhancedGrid({
        id: 'serialsGrid',
        style: 'width:auto;height:250px;',
        store: store,
        structure: layout,
        rowSelector: '20px',
        plugins: {
            indirectSelection: {name:'Requested',headerSelector:true, width:"40px", styles:"text-align: center;"},
          pagination: {
              pageSizes: ["25", "50", "100", "All"],
              description: true,
              sizeSwitch: true,
              pageStepper: true,
              gotoButton: true,
                      /*page step to be displayed*/
              maxPageStep: 4,
                      /*position of the pagination bar*/
              position: "bottom"
          }
        }
    }, document.createElement('div'));

    /*append the new grid to the div*/
    //var temp=grid.domNode;
    dojo.byId("serialsGridDiv").appendChild(grid.domNode);
    /*Call startup() to render the grid*/
    serialsGridCopy=grid;
    grid.startup();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:15:41.160

据我所知，插件本身没有这样做的能力，所以我开始查看`EnhancedGrid`它本身具有的功能，并偶然发现`moveColumn()`了`grid.layout`. 文档本身（[这里](http://dojotoolkit.org/api/1.8/dojox/grid/_Layout)）并不是很有用，但我用它把每一列都向前移动了一个位置，这样第一列就会变成最后一列。

我还制作了一个有效的 JSFiddle 来演示您可以[在此处](http://jsfiddle.net/pAGZd/3/)看到的内容。移动列的代码可以在代码底部找到：

```
for (var i = 1;i < grid.layout.cells.length;i++) {
    grid.layout.moveColumn(1, 1, i, i-1, grid.layout);
} 
```

它的作用如下：它从索引 1 开始移动每一列，因此这意味着除了间接选择列之外的所有列都提前一步（`i-1`）。

# android - 创建单独的布局文件以支持不同的屏幕是否正确？

> ID：15835562
> 
> 赞同：1
> 
> 时间：2013-04-05T13:43:40.023
> 
> 标签：android

我在 android 中比较新鲜，我正在 android 中启动我的第一个应用程序。我有登录页面，我创建了单独的布局文件来支持不同的屏幕。我的问题是，这是创建单独布局文件的完美方式吗？我可以优化此布局以支持差异屏幕。是否有另一种方法来创建支持差异屏幕的布局。

以下是我的布局结构

```
res   
      layout
         activity_login
      layout-land
      layout-large
      layout-large-land
      layout-small
      layout-small-land     
      layout-xlarge
      layout-xlarge-land
      values
          styles.xml
          dimen.xml
      values-large
          styles.xml
          dimen_large.xml
      values-large-land
          styles.xml
          dimen_large_land.xml  
      .
      .
      . 
```

提前致谢

# nlp - 如何解决命名实体识别中的同义词？

> ID：15835563
> 
> 赞同：5
> 
> 时间：2013-04-05T13:43:41.450
> 
> 标签：nlp, nltk, named-entity-recognition

在自然语言处理中，命名实体识别是识别诸如组织、地点和最重要的*名称*等命名实体的挑战。

尽管我称之为*同义词*，但其中有一个重大挑战：*伯爵*和*德古拉*实际上指的是同一个人，但可能从未在文本中直接讨论过。

解决这些同义词的最佳算法是什么？

* * *

如果任何基于 Python 的库中有此功能，我渴望接受教育。我正在使用 NLTK。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T16:30:27.160

您正在描述共[指解析](http://en.wikipedia.org/wiki/Coreference#Coreference_resolution)和命名实体链接的问题。我提供了单独的链接，因为我不完全确定您的意思。

*   Coreference ：[Stanford CoreNLP](http://nlp.stanford.edu/software/dcoref.shtml)目前拥有最好的实现之一，但它是在 Java 中实现的。我使用了[python 绑定](https://github.com/dasmith/stanford-corenlp-python)，但我不太高兴——我最终只通过斯坦福管道运行了所有数据，然后在 python 中加载处理后的 XML 文件。显然，如果您必须实时处理，那是行不通的。
*   命名实体链接：查看[Apache Stanbol](http://stanbol.apache.org/docs/trunk/components/enhancer/engines/namedentitytaggingengine.html)和以下[Stackoverflow 帖子](https://stackoverflow.com/questions/4747990/how-to-use-dbpedia-to-extract-tags-keywords-from-content)中的链接。

# email - 注册电子邮件被谷歌评估为垃圾邮件

> ID：15835565
> 
> 赞同：-3
> 
> 时间：2013-04-05T13:43:42.803
> 
> 标签：email, gmail, spam

当用户在我的网站上注册时，他们会收到一封确认电子邮件，以便他们可以激活他们的帐户。但是，许多 gmail 用户将这些邮件视为垃圾邮件。这有点令人不安。

有人知道如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:54:12.837

[根据黑名单](http://mxtoolbox.com/blacklists.aspx)检查您的域，添加[DKIM](http://www.dkim.org/)，并考虑添加[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)。最后两个帮助验证您的电子邮件是否来自您的域。

[以下是 Google](https://support.google.com/mail/answer/81126?hl=en)帮助向 gmail 用户发送邮件的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:51:11.330

在电子邮件标题中查找垃圾邮件报告。我不知道 gmail 但在 Outlook 中你必须右键单击该消息并选择“消息选项”或类似的东西（我的不是英文所以它可能是别的东西）

这是我发送的邮件的示例。

X-垃圾邮件报告：

```
* -1.0 ALL_TRUSTED Passed through trusted hosts only via SMTP
*  0.0 WEIRD_PORT URI: Uses non-standard port number for HTTP
*  1.6 HTML_IMAGE_ONLY_12 BODY: HTML: images with 800-1200 bytes of words
*  0.0 HTML_MESSAGE BODY: HTML included in message
*  0.0 T_OBFU_PDF_ATTACH BODY: PDF attachment with generic MIME type
*  1.1 MIME_HTML_ONLY BODY: Message only has text/html MIME parts
*  0.0 T_REMOTE_IMAGE Message contains an external image 
```

左侧的每个数字加起来就是您的最终分数，您希望降低此分数以避免被标记为垃圾邮件。在 google 上搜索每一个非 0 报告，你会找到避开每一个的方法。

# matlab - 使用 MATLAB 积分 0 阶 Bessel 函数

> ID：15835566
> 
> 赞同：3
> 
> 时间：2013-04-05T13:43:58.503
> 
> 标签：matlab, integral, bessel-functions

我有一个简单的问题。我正在尝试使用 Matlab R2012a 评估 0 阶 Bessel 函数的不正确积分：

```
v = integral(@(x)(besselj(0, x), 0, Inf) 
```

这给了我 v = 3.7573e+09。然而，这在理论上应该是 v = 1。当我试图做

```
v = integral(@(l)besselj(0,l), 0, 1000) 
```

结果为 v = 1.0047。您能否简要解释一下，集成出了什么问题？以及如何正确集成 Bessel 型函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:04:08.753

起初，我怀疑对 Bessel 函数进行积分会产生有限的结果。然而，Mathematica/Wofram Alpha 表明结果是有限的，但它[不适合胆小的人](http://www.wolframalpha.com/input/?i=integrate+zeroth+bessel+function+from+0+to+infinity)。

但是，然后我被指向[这个站点](http://www.physicsforums.com/showthread.php?t=570379)，该站点解释了如何正确执行此操作，并且积分的值应为 1。

我做了一些实验来验证他们陈述的正确性：

```
 F = @(z) arrayfun(@(y) quadgk(@(x)besselj(0,x), 0, y), z);

    z = 10:100:1e4;

    plot(z, F(z)) 
```

这给了：

![贝塞尔积分](https://i.stack.imgur.com/zgBR7.jpg)

很明显，积分确实似乎收敛到 1。 Wolfram Alpha 可耻！

（请注意，这是一种误导性的情节；尝试这样做，`z = 10:1e4;`您就会明白为什么。但是，好吧，无论如何，原理都是一样的）。

该图还准确地显示了您在 Matlab 中遇到的问题；积分的值就像 1 附近的阻尼振荡以增加`x`。问题是，阻尼非常弱——正如你所看到的，我`z`需要一路走`10,000`才能产生这个图，而振荡幅度只降低了 ~0.5。

当您尝试通过弄乱“MaxIntervalCount”设置来进行不正确的积分时，您会得到以下信息：

```
 >> quadgk(@(x)besselj(0,x), 0, inf, 'maxintervalcount', 1e4) 

    Warning: Reached the limit on the maximum number of intervals in use.
    Approximate bound on error is 1.2e+009\. The integral may not exist, or
    it may be difficult to approximate numerically.
    Increase MaxIntervalCount to 10396 to enable QUADGK to continue for 
    another iteration. 
    > In quadgk>vadapt at 317
      In quadgk at 216 
```

不管你设置多高`MaxIntervalCount`; 你会一直遇到这个错误。`quad`使用,或类似的东西时也会发生类似的事情`quadl`（这些是 R2012`integral`功能的基础）。

正如这个警告和绘图显示的那样，积分不适合通过标准 MATLAB 中实现的任何求积方法来精确近似（至少，据我所知）。

我相信正确的解析推导，就像在物理论坛上所做的那样，确实是获得结果的唯一方法，而不必求助于专门的求积方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:04:27.753

[从文档](http://www.mathworks.com/help/matlab/ref/integral.html)中对振荡函数进行不正确的积分：

```
q = integral(fun,0,Inf,'RelTol',1e-8,'AbsTol',1e-13) 
```

在文档中的例子是

```
fun = @(x)x.^5.*exp(-x).*sin(x); 
```

但我想在你的情况下尝试：

```
q = integral(@(x)(besselj(0, x),0,Inf,'RelTol',1e-8,'AbsTol',1e-13) 
```

# javascript - XMLHttpRequest 对象上缺少 onreadystatechange()

> ID：15835567
> 
> 赞同：4
> 
> 时间：2013-04-05T13:44:02.077
> 
> 标签：javascript, ajax, xmlhttprequest

```
(function (send) {

     XMLHttpRequest.prototype.send = function () {

         console.log(this.onreadystatechange); //null
         send.apply(this, arguments);
     };

})(XMLHttpRequest.prototype.send); 
```

为什么为`this.onreadystatechange`空？据此，[它](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)应该存在并且是 type `function`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T13:59:36.980

`onreadystatechange` **确实**存在...这就是为什么它是`null`。如果它不存在，它将是`undefined`。这一切都取决于它是否已经设置。它显然已经是一个属性，因为它是`null`……如果不是，它将是`undefined`……或者至少`"onreadystatechange" in this`是`false`。

这是一个例子：

```
var a = new XMLHttpRequest();
a.onreadystatechange = function () {
};
a.send(); 
```

您的控制台将记录一个`function`.

如果你有：

```
var b = new XMLHttpRequest();
b.send(); 
```

您的控制台将记录`null`.

这是发生这种情况的**演示：http:** [//jsfiddle.net/3XKx7/](http://jsfiddle.net/3XKx7/)

（我清楚地省略了发送 AJAX 请求的其他步骤，这只是为了解释）

我并不是要暗示`null`and之间存在关系`undefined`-我只是说在创建 new 时`XMLHttpRequest`，`onreadystatechange`将在`null`内部设置为。是否将其设置为功能取决于您。

**更新**：

创建/发送 XHR 的正常方式是以下顺序：

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function () {    // This and `open` could be flip-flopped
    // whatever
};
xhr.open("POST", url, true);
xhr.send("data=data"); 
```

我总是被告知/显示要创建新的，然后是设置和调用`XMLHttpRequest`的任何顺序，但只有在这两个之后我才应该调用。`onreadystatechange``open``send`

**因此**，如果始终这样做，`onreadystatechange`（如果实际设置）将不会`null`并且将是`function`.

既然您提到您使用的是 jQuery，我决定测试覆盖`send`您想要的方法，并进行 jQuery`$.ajax`调用（而不是`XMLHttpRequest`手动发送）。这是我的测试 - [http://jsfiddle.net/3XKx7/1/](http://jsfiddle.net/3XKx7/1/)

为什么`onreadystatechange`会这样是没有意义的`null`，因为 jQuery**必须**绑定到该事件才能知道请求何时完成及其状态。所以我决定看一下jQuery源代码。我发现他们称事物的顺序是：

```
xhr.open()
xhr.send()
xhr.onreadystatechange = function () {

}; 
```

这意味着当您覆盖该`send`方法时，`onreadystatechange`是`null`因为 jQuery**在**调用`send`. 我不知道他们这样做的原因......这可能是为了防止像你正在做的事情......但我从未听说或看到使用这种约定。

所以你得到它的价值的原因`null`是因为 jQuery`onreadystatechange` **在**调用`send`. 这意味着当您覆盖`send`并尝试访问该`onreadystatechange`属性时，它尚未设置。

希望这是一个可以帮助您理解的示例：http: [//jsfiddle.net/dMP6q/16/](http://jsfiddle.net/dMP6q/16/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:49:37.717

你应该自己设置它，当状态改变时会调用这个函数。它就像其他事件处理程序一样，如`document.onload`,`yourelement.onclick`等。

经典地你做

```
 var httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4) {
              if (httpRequest.status === 200) {
                  // use httpRequest.responseText
              }
        }
    };
    httpRequest.open('GET', url);
    httpRequest.send(); 
```

# jsf - 在 ViewScoped 控制器之间共享数据

> ID：15835568
> 
> 赞同：1
> 
> 时间：2013-04-05T13:44:02.503
> 
> 标签：jsf, view-scope

我有一个控制器，用户在其中将信息填写到表单中。保存表单时，会创建 JPA 对象并将其保存到数据库中，并且用户会被重定向到另一个控制器以查看表单。我对在控制器之间传递整个对象不感兴趣，只是表示对象的字符串。我可以从数据库中重新加载对象，但是由于加载时间很慢，有什么方法可以在不访问数据库的情况下传递数据？

**编辑：** 当一个控制器重定向到另一个控制器时，我有兴趣将字符串从第一个控制器“发送”到重定向的控制器，以便显示这些字符串。

感谢您的帮助！

**编辑2：**

这是第一个控制器中的代码：

```
//Called by a commandButton
public String saveForm() {
    //Objects are created and persisted to DB
    //Store the Objects' names as strings. These are the values I want to access in the second controller
    return "view_form.jsf?formId=" + formId.toString() + "&faces-redirect=true";
} 
```

在名为的第二个控制器`viewForm`中，我正在加载 formId `viewParam`：

```
<f:metadata>
  <f:viewParam name="formId" value="#{secondController.formId}" required="true"/>   
  <f:event type="preRenderView" listener="#{secondController.loadForm}"/>
</f:metadata> 
```

在`loadForm`我想访问在`saveForm`. 我目前正在查看 Rodmar Conde 发布的关于在 Session Map 中存储数据的链接。这是解决这个问题的正确方法吗？

感谢您迄今为止的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:30:13.273

代码看起来不错。对于需要通过幂等请求打开目标页面的情况，这也是推荐的方法。另请参阅[如何在 JSF 中导航？如何使 URL 反映当前页面（而不是前一个页面）](https://stackoverflow.com/questions/15521451/how-to-make-url-reflect-the-current-page-and-not-the-previous-one/15523045#15523045)以获得一些一般提示。

您真正的问题显然只是数据库性能（尽管正确索引表上的单个选择应该相对便宜，但请确保它不仅仅是连接成本（使用连接池）或网络延迟（靠近网络的主机数据库服务器）服务器））。在持久层中引入一种二级缓存可能会有很大帮助。使用关键字“二级缓存”或“二级缓存”参考相关持久层的文档。

请注意，这超出了 JSF 的范围。滥用 JSF 会话范围是另一种方式，但不是正确的方式。在由 GET 请求分隔的两个视图范围 bean 实例之间共享数据是不可能的，因为它们的生命周期结束并以 GET 请求开始。另请参阅[JSF ViewScoped 变量无法重定向到同一页面](https://stackoverflow.com/questions/11765913/jsf-viewscoped-variable-not-surviving-redirect-to-same-page/11765984#11765984)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T20:03:32.683

这就是我解决的问题。将会话中的值保存在第一个`ViewScoped`控制器中，如下所示：

```
ExternalContext etx = FacesContext.getCurrentInstance().getExternalContext();
    HttpServletRequest httpReq = (HttpServletRequest)etx.getRequest();
    HttpSession session = httpReq.getSession();
    session.setAttribute("formId", "formId_value_here"); //use a map if you have multiple values 
```

并检索`PreRenderView`第二个`ViewScoped`控制器（或任何地方）的值，如下所示：

```
ExternalContext etx = FacesContext.getCurrentInstance().getExternalContext();
HttpServletRequest httpReq = (HttpServletRequest)etx.getRequest();
HttpSession session = httpReq.getSession();
String formId = (String)session.getAttribute("formId"); 
```

希望这可以帮助某人。

# android - 简单适配器按关键字显示列表的一部分（使用 Hashmap 制作）

> ID：15835574
> 
> 赞同：0
> 
> 时间：2013-04-05T13:44:32.263
> 
> 标签：android, list, android-listview, hashmap, simpleadapter

我有一个问题。我列了一个清单如下：

```
List<Map<String, String>> ShopsList = new ArrayList<Map<String,String>>();
       private void initList() {
        // We add the cities
           ShopsList.add(createShop("Antwerpen", "Broer Bretel"));
           ShopsList.add(createShop("Antwerpen", "Caffènation"));
           ShopsList.add(createShop("Antwerpen", "Caffènation - Take Out Nation"));
           ShopsList.add(createShop("Antwerpen", "Coffeelabs"));
           ShopsList.add(createShop("Antwerpen", "De Dikke Kat"));
           ShopsList.add(createShop("Antwerpen", "Mlle Loustache")); 
           ShopsList.add(createShop("Berchem", "Broer Bretel"));
           ShopsList.add(createShop("Berchem", "Caffènation"));
           ShopsList.add(createShop("Berchem", "Caffènation - Take Out Nation")); 
```

和

```
private HashMap<String, String> createShop(String key, String name) {
        HashMap<String, String> shop = new HashMap<String, String>();
        shop.put(key, name);
        return shop;
       } 
```

所以现在我使用 SimpleAdapter 在 Listview 中显示这个列表。但我想要的是能够只显示具有特定关键字的列表中的数据。所以我愿意

```
ListView lv = (ListView) findViewById(R.id.listView);

        SimpleAdapter simpleAdpt = new SimpleAdapter(this, ShopsList, android.R.layout.simple_list_item_1,
                new String[] {"Antwerpen"}, new int[] {android.R.id.text1});

        lv.setAdapter(simpleAdpt); 
```

当我这样做时，他只向我显示带有正确关键字的数据，但将其他条目添加为空。因此，当我要求第二个关键字时，他首先添加了 6 个空白位置，然后才显示正确的条目。

我该怎么做？我想我应该使用 Wanted 关键字添加条目的位置，但是如何以简单的方式检索这些位置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:02:10.237

**编辑：**

正如有人指出的那样，我将 SimpleAdapter 误认为是 ArrayAdapter。抱歉，如果您想将实现更改为 ArrayAdapter（恕我直言，这更简单），代码如下。

**原来的：**

当`android.R.id.text1`用值填充时，`ArrayAdapter`只需调用`.toString()`列表中的每个元素。

有几种方法可以实现您想要的。

*   其中之一是制作 a`List<String>`并`Strings`按照您希望在屏幕上看到的那样制作。

*   一种更有效的“OO”方法是创建自己的类。

例如：

```
public class Shop{
   private String city;
   private String name;

   public Shop(String city, String name){
       this.city = city;
       this.name = name;
   }

   @Override
   public String toString() {
       return city + " - " + name
   }
} 
```

然后在您的适配器上，您将使用 a`List<Shop>`而不是地图。并通过覆盖该`toString()`方法，您可以根据需要操作文本。

*   顺便提一下，另一种方法可能是扩展 ListAdapter 类

# c# - 如何为 MasterPage 动态设置 MasterPageFile？

> ID：15835580
> 
> 赞同：0
> 
> 时间：2013-04-05T13:44:52.897
> 
> 标签：c#, asp.net, webforms, nested, master-pages

我可以从代码中为 MasterPage 定义 MasterPageFile 吗？

我知道如何为 Page（OnPreInit 事件）执行此操作，但如何为 MasterPage 执行此操作？它不包含 OnPreInit 事件。

# iphone - 在移动设备上使用电话链接

> ID：15835583
> 
> 赞同：0
> 
> 时间：2013-04-05T13:44:58.087
> 
> 标签：iphone, html, hyperlink, skype, tel

好的，我知道可以使用 Skype 获取可通过 Skype 调用的号码`callto:`，并且我知道可以通过`tel:`在 a 标签中使用来获取可在 iOS 和机器人上点击的号码。

但是，平板电脑/iPad 呢？这对他们有用吗？

如果他们在 iPad 上安装了 Skype 并单击`tel:`链接会怎样。

我相信即使有服务计划，您也无法从 iPad 或 droid 平板电脑拨打电话（我也不拥有，只是一个假设。启蒙会很棒）。`callto:`是否适用于移动浏览器以使他们使用 Skype（如果已安装，显然）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:46:38.640

不，这行不通。Skype 在桌面上完成此操作的方式是通过安装在浏览器中的扩展程序。在 iPad 上，您无法安装这些类型的浏览器扩展。在 Android 平板电脑上可能是可能的。

编辑：

我的回答是基于您将访问带有电话链接的页面的假设，并且您正在询问浏览器是否会像在桌面上一样运行。浏览器将在哪里“重写”电话：如果安装了您使用 Skype 的标签。

编辑2：

更新答案以反映[@ceejayoz](https://stackoverflow.com/users/1902010/ceejayoz)的意见。

# javascript - 刷新后jQuery后退按钮无法正常工作

> ID：15835596
> 
> 赞同：2
> 
> 时间：2013-04-05T13:45:40.573
> 
> 标签：javascript, jquery, jquery-mobile, jquery-mobile-button

在我的 jQuery 移动应用程序上；

在 menu.html 和**内部**我做这样的事情去 help.html;

```
....

$(document).off('pageinit', '#menupage').on('pageinit', '#menupage', function() {

    $(document).off('click', '#help').on('click', '#help', function(){
            $.mobile.changePage("help.html", {
                reloadPage: true,
                transition: "flip",
                reverse: false
            });
        });
}

....

<li><a id="help" href="#" role="link" data-role="none">
                        <div class="img help"></div>
                        <div class="menuTitle langMenuItem3">Help</div>
                        <div class="arrow"></div>
</a></li> 
```

然后在 help.html 页面上，我有一个这样的后退按钮可以返回 menu.html：

```
<header data-role="header">
    <a href="#" data-rel="back" class="button" data-role="none">
        <div class="arrow_reverse"></div><span class="langBack">Terug</span>
    </a>
    <div class="pageTitle">Over deze app</div>
</header> 
```

我的问题是这在正常情况下有效，**但是**如果我在 menu.html 上进行**刷新**，然后转到 help.html**然后**再次返回菜单，menu.html 无法正确加载，我可以看到页面视觉加载正常但是在萤火虫上，我看到标签内的一些必要的javascript不再命中，它再也不会在menu.html上的任何地方命中任何javascript，只需从缓存中加载以前的html就可以了。menu.html 的页面标题也没有正确更改，并且在那之后保持为“帮助”。

我的完整 menu.html 看起来像这样；

[http://jsfiddle.net/M5CYZ/](http://jsfiddle.net/M5CYZ/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:58:34.273

这是一个疯狂的猜测，但根据您的代码，这是正常行为。

jQuery Moible 事件 pageinit 只会在初始页面加载期间触发一次，除非页面被刷新（手动，使用 rel="external" 或在您的情况下为 reloadPage="true"），否则它将永远不会再次触发。

如果您希望每次访问页面时再次执行 javascript，请改用 pagebeforeshow 事件。如您的示例所示，删除 pageinit 并将其添加回来对您没有帮助。

如果您想了解更多信息，请阅读我关于页面事件的其他答案/文章：**[jQuery Mobile: document ready vs page events](https://stackoverflow.com/a/14469041/1848600)**

这里有一个例子来证明我的观点：http: [//jsfiddle.net/Gajotres/Q3Usv/](http://jsfiddle.net/Gajotres/Q3Usv/)

```
$(document).on('pageinit', '#index', function(){       
    alert('Pageinit');
});

$(document).on('pagebeforeshow', '#index', function(){       
    alert('Pagebeforeshow');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:59:54.293

这样做。

给返回按钮一个`ID`

```
<a href="#" id="backbtn" class="button"> 
 <div class="arrow_reverse"></div><span class="langBack">Terug</span> 
</a> 
```

然后在*help.html中添加以下代码*

```
$('#backbutton').off('click').on('click', function () { 
 $.mobile.changePage("menu.html", { 
  reloadPage: true, 
  transition: "flip", 
  reverse: true 
 }); 
}); 
```

# c# - Tessnet2 OCR 只返回数字

> ID：15835598
> 
> 赞同：1
> 
> 时间：2013-04-05T13:45:55.783
> 
> 标签：c#, ocr, tesseract, tessnet2

我正在尝试在 ac# 应用程序中使用 tessnet2 从图像中读取文本。这是我的代码：

```
string valoare="";
lblOCR.Text = "";

Bitmap image = new Bitmap(@"C:\Stamp\test.png");
tessnet2.Tesseract ocr = new tessnet2.Tesseract();
ocr.Init(@"F:\Manipulare pdf\bin(1)\Release32\tessdata", "eng", false); 
var rect = new System.Drawing.Rectangle();
List<tessnet2.Word> result = ocr.DoOCR(image, rect);

int lc = tessnet2.Tesseract.LineCount(result);
foreach (tessnet2.Word word in result)
{
lblOCR.Text += word.Text+" "+word.Confidence+"<br/>";
} 
```

结果字符串只包含数字，但我的图片包含字母，我不明白为什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:06:42.083

尝试再次放置语言包。

Tessnet2 适用于语言包 2 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-26T14:52:59.077

我知道我来晚了。我在其他地方找到了解决方案。

我的 ocr 被配置为只看到数字。但我看到你没有这条线：

```
ocr.SetVariable("tessedit_char_whitelist", "0123456789"); // If digits only 
```

对我来说，删除它就可以了。也许您需要进行类似的配置。

# html - 如何使“图像横幅”100% 的视口没有边距和页面中心的其余部分

> ID：15835599
> 
> 赞同：1
> 
> 时间：2013-04-05T13:45:57.147
> 
> 标签：html, css, image, viewport, skeleton-css-boilerplate

我的问题是如何让横幅成为`100%`视口，同时保持其他一切居中。

现在我正在尝试使用 Skeleton 框架来使用它的预制`@media`解决方案和网格系统。我注意到因为它是一个 960 网格系统，所以我不能在里面放一个横幅，它会进入`100%`视口（因为它被限制在`960px`）。

我想要一个解决方案，它允许我继续使用 Skeleton 框架，并且我可以为像[这个网站](http://brettryanstudios.com/contact/)`100%`这样的视口横幅解决问题。

如果这是不可能的，那么我将需要有关实现此目标的最佳方法的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:52:31.957

如果我正确理解您的问题，这通常是通过横幅内的包装完成的。

## 例子：

HTML：

```
<div class="banner">
    <div class="wrapper">
        <h1>Example Title</h1>
    </div>
</div> 
```

CSS：

```
.banner {
    background: url(/* Your image */) center center no-repeat;
    background-size: cover;
    height: /* Whatever height */;
}

.wrapper {
    margin: 0 auto; /* This is what centers it */
    max-width: 1000px;
    width: 96%;
 } 
```

因此，您将在每个内容部分（页眉、主要、页脚等）中有单独的包装器。

要将它与 Skeleton 一起使用，它看起来像这样（在非常简短地查看了他们的文档之后）。

HTML：

```
<div class="banner">
    <div class="container"><!-- Your 960 grid -->
        <div class="six columns><!-- Or however much of your 960 you want it to take up-->
            <!-- Content -->
        </div>
    </div>
</div> 
```

# domain-driven-design - 聚合不变量是否可以包含基于来自其他地方的信息的规则？

> ID：15835604
> 
> 赞同：10
> 
> 时间：2013-04-05T13:46:04.653
> 
> 标签：domain-driven-design, aggregate, modeling, invariants

在 DDD 中，聚合不变量是否可以包含基于另一个聚合中信息的规则？现在我不这么认为，但是这给我带来了一个问题，我不知道如何解决它。

我有一个名为 Asset（设备）的实体，我将其建模为聚合的根。它有一个标签（属性）列表，用于描述制造商、模型等内容。它存储称为 AssetType 的第二个聚合的标识，该聚合具有一个 TagType 列表，其中一些可以标记为强制性的。

现在在我看来，Asset 的不变条件之一应该引用关联的 AssetType 以在强制标签列表中强制执行非空值。但是我的胆量正在爬上我将如何强制执行一致性的想法。

这是否意味着聚合真的应该包含所有四个实体？如果根是 AssetType 并且它下面有一个 Assets 列表，它可以解决我的问题，但是这不太适合具有其他聚合维护不同类型 Asset 列表的核心用例。资产确实必须是根，否则我会遇到问题。

而且 AssetType 也不能很好地进入 Asset 聚合。这似乎同样荒谬。

我的胆量仍然说 Asset 和 AssetType 是两个独立的聚合，但我该如何解决一致性问题？还是我弄错了不变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:45:44.563

在这种情况下，有几种方法可以强制执行不变量。

首先，考虑`Asset`聚合周围的行为。我假设至少有 a`CreateAssetCommand`和 a `RemoveTagCommand`。在执行这些命令期间，应通过以下方式强制执行不变量：

**创建资产命令**

由于资产始终与资产类型相关联，`AssetTypeId`因此必须在此命令中提供一个。此 ID 必须由调用者获取，可能通过查找特定资产类型来获取。`AssetType`查找时，也可以检索相应的实体`TagType`，尤其是强制性实体。这将允许调用者构造所需的`Tag`实例以作为命令的一部分发送。请注意，调用者有责任提供有效的资产类型和标签。

**删除标签命令**

此命令的处理程序可以检索`Asset`存储`AssetTypeId`. 接下来，处理程序检索资产类型的强制标签集，并确保不会删除这些标签。在这种情况下，不变量由处理程序本身强制执行。

处理这些不变量的另一种方法是引入[最终一致性](http://en.wikipedia.org/wiki/Eventual_consistency)（如果可以接受）。使用这种方法，从资产中删除标签应该发布一个`TagRemovedEvent`. 然后，此事件的处理程序可以验证未删除强制标记。如果是，它可以创建一个任务或通知，说明资产处于无效状态。请注意，这假设资产处于无效状态是可以接受的，直到某些事情得到纠正。

现在来行为周围`AssetType`。一个可能损害`Asset`聚合完整性的命令是引入新的强制命令`Tag`。在这种情况下，确保完整性的唯一方法是为每个相应的资产创建适当的标签。由于这可能无法自动完成，因此必须接受最终的一致性，直到通过手动干预提供适当的标签。

使用所有这些方法，您将无法获得使用 RDMS 所获得的那种完整性。强制执行交叉聚合不变量的责任委托给命令处理程序、事件处理程序和调用代码。然而，在许多情况下，这种一致性是完全可以接受的。

查看[有效的聚合设计](https://vaughnvernon.co/?p=139)以了解更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T15:27:14.470

> 聚合不变量是否可以包含基于来自其他地方的信息的规则？

聚合总是可以使用它们自己状态的信息以及它们的[命令](http://epic.tesio.it/doc/manual/command_query_separation.html)接收到的参数。

有人过去通过单例、服务定位器等访问应用程序服务，但在 IMO，这是一种紧密耦合的应用程序的味道。他们忘记了方法的参数是有效的依赖注入器！:-)

> 在 DDD 中，聚合不变量是否可以包含基于另一个聚合中信息的规则？

不
。当然，除非第二个聚合是通过命令的参数提供的。

**警告 ！！！**

> 我有一个名为 Asset（设备）的实体
> ......（和一个名为 AssetType 的第二个聚合......

上次我不得不处理类似的结构时，我感到很痛苦。

您可能选择了错误的抽象。

> 我的不变量错了吗？

可能......你问过**领域专家**吗？**他**谈论“TagTypes”吗？

[你永远不应该自己抽象](http://epic.tesio.it/doc/manual/solid_principles.html#about_liskov_substitution)。

`X`持有对 an 实例的引用的类型的实体`X-Type`几乎总是带有过度抽象的味道，希望重用，这使得模型对业务发展变得僵硬和不灵活。

**回答**

如果*（且仅当）*领域专家确实用这些术语描述了模型，可能的方法如下：

1.  您可以使用工厂方法创建一个`AssetType`类，该方法将 a`IEnumerable<Tag>`转换为 a并在某些标记丢失或意外时抛出`TagSet` [。](http://epic.tesio.it/2013/03/04/exceptions-are-terms-ot-the-ubiquitous-language.html)`MissingMandatoryTagException``UnexpectedTagException`
2.  在`Asset`类中，一个命令`RegisterTags`将接受一个`AssetType`和一个`IEnumerable<Tag>`，抛出一个`MissingMandatoryTagException`和`WrongAssetTypeException`（注意异常对于确保不变量是多么重要）。

**编辑**
这样的东西，但更多的记录：

```
public class AssetType
{
    private readonly Dictionary<TagType, bool> _tagTypes = new Dictionary<TagType, bool>();
    public AssetType(AssetTypeName name)
    {
        // validation here... 
        Name = name;
    }

    /// <summary>
    /// Enable a tag type to be assigned to asset of this type.
    /// </summary>
    /// <param name="type"></param>
    public void EnableTagType(TagType type)
    {
        // validation here... 
        _tagTypes[type] = false;
    }

    /// <summary>
    /// Requires that a tag type is defined for any asset of this type.
    /// </summary>
    /// <param name="type"></param>
    public void RequireTagType(TagType type)
    {
        // validation here... 
        _tagTypes[type] = false;
    }

    public AssetTypeName Name { get; private set; }

    /// <summary>
    /// Builds the tag set.
    /// </summary>
    /// <param name="tags">The tags.</param>
    /// <returns>A set of tags for the current asset type.</returns>
    /// <exception cref="ArgumentNullException"><paramref name="tags"/> is <c>null</c> or empty.</exception>
    /// <exception cref="MissingMandatoryTagException">At least one of tags required 
    /// by the current asset type is missing in <paramref name="tags"/>.</exception>
    /// <exception cref="UnexpectedTagException">At least one of the <paramref name="tags"/> 
    /// is not allowed for the current asset type.</exception>
    /// <seealso cref="RequireTagType"/>
    public TagSet BuildTagSet(IEnumerable<Tag> tags)
    {
        if (null == tags || tags.Count() == 0)
            throw new ArgumentNullException("tags");
        TagSet tagSet = new TagSet();

        foreach (Tag tag in tags)
        {
            if(!_tagTypes.ContainsKey(tag.Key))
            {
                string message = string.Format("Cannot use tag {0} in asset type {1}.", tag.Key, Name);
                throw new UnexpectedTagException("tags", tag.Key, message);
            }
            tagSet.Add(tag);
        }

        foreach (TagType tagType in _tagTypes.Where(kvp => kvp.Value == true).Select(kvp => kvp.Key))
        {
            if(!tagSet.Any(t => t.Key.Equals(tagType)))
            {
                string message = string.Format("You must provide the tag {0} to asset of type {1}.", tagType, Name);
                throw new MissingMandatoryTagException("tags", tagType, message);
            }
        }

        return tagSet;
    }
}

public class Asset
{
    public Asset(AssetName name, AssetTypeName type)
    {
        // validation here... 
        Name = name;
        Type = type;
    }

    public TagSet Tags { get; private set; }

    public AssetName Name { get; private set; }

    public AssetTypeName Type { get; private set; }

    /// <summary>
    /// Registers the tags.
    /// </summary>
    /// <param name="tagType">Type of the tag.</param>
    /// <param name="tags">The tags.</param>
    /// <exception cref="ArgumentNullException"><paramref name="tagType"/> is <c>null</c> or
    /// <paramref name="tags"/> is either <c>null</c> or empty.</exception>
    /// <exception cref="WrongAssetTypeException"><paramref name="tagType"/> does not match
    /// the <see cref="Type"/> of the current asset.</exception>
    /// <exception cref="MissingMandatoryTagException">At least one of tags required 
    /// by the current asset type is missing in <paramref name="tags"/>.</exception>
    /// <exception cref="UnexpectedTagException">At least one of the <paramref name="tags"/> 
    /// is not allowed for the current asset type.</exception>
    public void RegisterTags(AssetType tagType, IEnumerable<Tag> tags)
    {
        if (null == tagType) throw new ArgumentNullException("tagType");
        if (!tagType.Name.Equals(Type))
        {
            string message = string.Format("The asset {0} has type {1}, thus it can not handle tags defined for assets of type {2}.", Name, Type, tagType.Name);
            throw new WrongAssetTypeException("tagType", tagType, message);
        }
        Tags = tagType.BuildTagSet(tags);
    }
} 
```

# c# - 是否可以在一个全局位置为所有 StackPanel 关闭 TabStop？

> ID：15835606
> 
> 赞同：0
> 
> 时间：2013-04-05T13:46:05.593
> 
> 标签：c#, wpf, xaml, stackpanel, tabstop

我有许多 UserControl，每个都包含许多 StackPanel。我遇到的问题是，每个 StackPanel 似乎都认为我有兴趣在切换到 StackPanel 的内容之前对它进行切换。如果我想从 StackPanel_A 中存在的控件切换到 StackPanel_B 中存在的控件，我需要至少按两次制表符才能从第一个控件到 StackPanel_B，再到第二个控件。

我可以通过指定来关闭 TabStop，例如

```
<StackPanel KeyboardNavigation.IsTabStop="False" /> 
```

但考虑到我有多少 StackPanel 元素，这既乏味又凌乱。

有没有办法让我在一个全球性的地方做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:56:48.593

您可以通过在全局范围内使用样式（例如您的 App.xaml 文件）来实现此目的：

```
<Application.Resources>
    <Style TargetType="{x:Type StackPanel}">
        <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
    </Style>
</Application.Resources> 
```

这样`StackPanel`，您的应用程序中的任何内容都不会成为制表位。

# c# - httpWebRequests 发送 Post 数据并获取状态码

> ID：15835611
> 
> 赞同：0
> 
> 时间：2013-04-05T13:46:22.293
> 
> 标签：c#, httprequest

我正在尝试将一些 python 代码转换为 C#。

python代码正在使用请求模块。

```
 post = {'customer_fid': self.customer_fid, 'salt': self.salt, 'token': token, 'customer_facebooktoken': self.customer_facebooktoken}

    request = self.session.post(self.baseurl + self.loginurl, data=post) 
```

我在谷歌上搜索了几个帖子，但我找不到可能的回应。

我需要一种方法来向服务器询问 4 个参数并在之后获取状态码。

先感谢您。

# internet-explorer-7 - 垂直滚动条错误 IE9 和 IE7

> ID：15835616
> 
> 赞同：3
> 
> 时间：2013-04-05T13:46:37.677
> 
> 标签：internet-explorer-7, internet-explorer-9, scrollbar

为什么当 div 的宽度以编程方式设置为视口宽度并且溢出属性以编程方式设置为自动时，IE9 和 IE7 无法正确显示垂直滚动条...

在 IE9 中，滚动条显示在最左侧 17 个像素处。在 IE7 中，滚动条显示在最左侧 17 像素处，并且旁边有一个禁用的滚动条。

这是一个网页来说明：

[http://www.sweetkarma.net/iebug](http://www.sweetkarma.net/iebug)

更多信息：在问了这个问题之后，我做了更多的搜索，发现了这个：

似乎 IE9 没有正确处理 box-sizing 属性 - 将其从“border-box”更改为“content-box”或将其留空将解决您的问题。

这解决了 IE9 但不是 IE7 中的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T01:20:36.727

IE 边框模型将填充和边距计为元素的一部分。所以，你可以做两件事：

*   将填充和边距显式设置为零
*   计算默认边距和填充并从动态宽度中减去

**参考**

*   [在 Explorer 中探索 Box Ocean - 使用 CSS 进行装箱，第二部分：没有容错余地](http://www.webreference.com/html/tutorial10/4.html)

*   [IE 中的标准和 CSS](http://blogs.msdn.com/b/ie/archive/2005/07/29/445242.aspx)

*   [Quirksmode：盒子大小](http://www.quirksmode.org/css/user-interface/boxsizing.html)

# jquery - BackboneJS 正在执行 fetch 并失败，但响应中的一切都完全正常

> ID：15835620
> 
> 赞同：0
> 
> 时间：2013-04-05T13:47:00.860
> 
> 标签：jquery, backbone.js, coffeescript

信号返回一个`200`. 响应文本是准确的。一切都好。服务器日志根本不返回任何错误。

```
 @model.fetch(
          success: (model, resp) => 
            console.log 'sucess fetch'
          error: (error, object) =>
            console.log 'ya done messed up.'
            console.log error
            console.log object
        ) 
```

我的对象在其返回`.responseText`：

```
 responseText: "<div id='make_it_so'></div>↵&lt;script>↵  $(function() {↵    window.router = new myApp.Routers.QuestionsRouter(↵    {↵      words: {"type":"stuff","word":"this","that":"what","booger":"me","that":"if","fancy":"boo","what":"sois","dog":"son"}  ↵    });↵    Backbone.history.start();↵  });↵&lt;/script>↵" 
```

标题很好。一切都是好的。这可能是什么原因造成的？我该如何进一步调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:30:35.557

为了科学，我用 jQuery 进行了测试，当你不给它一个 JSON 对象时，这是 jQuery 的行为：

```
status: 200 
statusText: "parsererror" 
```

所以这就是你所拥有的。

# text-rendering - 使用各种 OpenType 功能为 Web 呈现文本

> ID：15835621
> 
> 赞同：0
> 
> 时间：2013-04-05T13:47:02.670
> 
> 标签：text-rendering, opentype

我有一组 OTF 字体文件，我需要通过将文本动态呈现为打开和关闭不同 OpenType 功能的图像来展示字体。文本将由网站用户以类似[此处](http://www.myfonts.com/hotnewfonts/)或[此处](http://www.fontshop.com/fonts/popular.php)的方式输入。

现在，我需要一个能够实现这一目标的图书馆的建议。任何适合 Web 开发的语言都可以（PHP、Python、Ruby 等等）。

目前所有的 OTF 字体都包含 Postscript 轮廓，但如果没有其他选项，我可以将它们转换为包含 TTF 轮廓。

我知道用于 FontForge 的 Python 库，但我仍在寻找其他较轻的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:45:12.960

有[HarfBuzz](http://www.freedesktop.org/wiki/Software/HarfBuzz)，但它是一个 C 库，需要一些关于字体和文本渲染的知识。它与命令行实用程序捆绑在一起，可以满足您的要求，但它们依赖于 FreeType 和 Cairo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:16:45.650

我最终得到了以下结果：

我设置了文本和字体大小，并在纯 TeX 文档中选择 OpenType 功能，使用 渲染它`xetex`，最后使用`pdftoppm`.

整个过程大约需要 0.2 秒，这相当长，但非常适合我的需要。

# javascript - 检测任何元素的任何变化的快速方法

> ID：15835622
> 
> 赞同：0
> 
> 时间：2013-04-05T13:47:07.640
> 
> 标签：javascript, html

我想知道 DOM 中任何元素的属性或内容是否发生了变化。不推荐使用 Mutation，并且 MutationObservable 不是跨浏览器。我正在考虑给任何元素一个类似于校验和的东西，并每 100 毫秒针对一个哈希表对其进行验证，从父节点开始到子节点。有更好的解决方案吗？

```
<html data-checksum="981">
 <body data-checksum="541">
  <div data-checksum="354"> 
```

# php - 当数据库与 PHP 代码不在同一台机器上时，为什么 PHP -> MSSQL 非常慢

> ID：15835623
> 
> 赞同：0
> 
> 时间：2013-04-05T13:47:09.547
> 
> 标签：php, sql-server, azure

在尝试将我们的网站迁移到 Azure 的过程中，我们发现我们的 PHP 代码与 MSSQL 对话存在问题。

在当前的专用主机（同时托管 PHP 和 DB）上，访问一个页面通常需要不到 2 秒的时间。我还通过 SSMS 运行了必要的查询，它们花费的时间不到 1 秒。查询返回的数据量非常小 - 10-20 条记录，当然总共不到 100kb。

使用 Azure 上托管的网站（连接到 Azure SQL 数据库），加载相同的页面大约需要 40 秒。进一步调查表明，这可能是由于数据库与 PHP 不在同一台机器上造成的 - 当原始网站指向远程数据库（另一台专用机器或 Azure SQL 实例）时，页面加载时间会上升到40 秒范围。

在 Azure 案例中，网站和数据库都位于同一区域（欧洲北部）。使用我们的机器进行测试时，两者都位于英国。

当前的虚拟主机运行 PHP 5.4 和 Microsoft SQL Server Express Edition。Azure 网站在 PHP 5.4 上运行。

在这两种情况下，我们都使用 3.0.1 Microsoft SQLSRV 驱动程序

连接到远程 SQL 数据库时如何提高性能？

此问题已在[https://serverfault.com/questions/496505/why-is-php-mssql-very-slow-when-the-db-is-not-on-the-same交叉发布到服务器故障-machine-as-the-php](https://serverfault.com/questions/496505/why-is-php-mssql-very-slow-when-the-db-is-not-on-the-same-machine-as-the-php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-28T15:31:02.400

在我的情况下，DNS解析很慢，在输入IP而不是MSSQL名称后一切正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:08:28.657

不知道为什么您的响应时间会从 2 秒跳到 40 秒，但是……需要考虑一些事项：

*   如果您的 SQL 数据库实例位于另一个数据中心，您将看到延迟和带宽费用。如果数据中心按大陆分开（例如，一个在美国西部，一个在香港），您会看到比美国西部 <--> 美国东部更多的延迟）。
*   如果您因查询而传输大量数据，这将受到网络管道大小的限制。每个核心可以获得 100Mbps，但超小型 (XS) 实例只有 5Mbps 带宽。

您提到在 SQL Server Management Studio 中测试查询（至少我假设 SMS 确实是 SSMS）。对 SQL 数据库进行测试时的查询性能如何？如果它接近 40 秒标记，则很可能在将数据从本地数据库移植到 SQL 数据库实例时缺少索引。

# java - Groovy 数字比较问题

> ID：15835625
> 
> 赞同：1
> 
> 时间：2013-04-05T13:47:13.000
> 
> 标签：java, groovy

我试图从数据库中检索一些值并在 Groovy 脚本中使用它们以查找和比较差异。

一个例子如下（当我在定义和数据库中使用浮点值时，它们被定义为数字并且精度为 2），这就是输出的样子

```
> 
```

通常通过查看这些值，我预计两者的差异都是 16，但事实并非如此。

关于我会错过什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:12:19.733

当数字以类型`NUMBER(x,2)`或类似类型存储在数据库中时，这意味着您将获得小数点后 2 位的精确数值。通过将这些转换为浮点数，您将引入错误（一个小而有界的错误，但您已经发现了一个明显的错误），因为其中一些数字没有精确的表示。有些数字在转换为二进制时会无限重复，必须在某处截断。BigDecimal 准确地表示数字，只要您不通过传入浮点值来构造它们，在这种情况下，在涉及 BigDecimal 之前已经完成了损坏（此时它所能做的就是准确地表示浮点近似值的原始号码）。我认为使用 BigDecimal 是解决问题的简单方法。

由于它是一个 Groovy 脚本，我认为性能不是您最大的考虑因素，如果是（并且您担心通过实例化 BigDecimals 创建的所有垃圾），那么您可能会考虑 JB Nizet 建议的 delta 方法。（有关如何使用浮点数的一些指示，请参阅[Peter Lawrey 的这篇文章。）但是 Java 的 GC 需要大量的临时对象，这通常不是最大的性能问题。](http://vanillajava.blogspot.com/2011/08/double-your-money-again.html)

[这里](https://stackoverflow.com/q/3730019/217324)有一个关于浮点数与小数的问题，其中的答案描述了为什么浮点数不准确。

# php - 通过 PHP 和 Apache2 检索时 HTTP POST 变量被破坏

> ID：15835626
> 
> 赞同：0
> 
> 时间：2013-04-05T13:47:14.023
> 
> 标签：php, javascript, ajax, apache, dhtmlx

对不起，如果这有点到处都是。我有一个奇怪的问题，我不完全确定原因（因为我无法重现它，但我可以通过 apache 日志看到它存在）

我有一些代码失败，因为它传递了不正确的数据，数据通过ajax调用传递给javascript中的php脚本（使用dhtmlxAjax.post）

有时，在 ajax 调用中传递的这些数据已经从另一个 ajax 调用返回到 php 后端。

无论如何，最终结果是传递给 PHP 的数据不正确。有时我看到它试图发布整个网页内容，而不是例如一个 id。

对我来说，放入 ajax 帖子的数据是错误的（还是 $_POST 变量已损坏？）

我在某处读到连接速度慢或某些浏览器/ISP？不要在标头中发送内容长度或其他内容，apache可以将请求分块，这可能是一个潜在的问题？

我不知道我是否在吠叫错误的树，所以非常感谢任何关于如何潜在地调试这个问题的指针或提示。

目前我无法让它自己失败，但我只能看到 apache 日志中的失败查询。

谢谢

* * *

**更新 1**

我不认为这仅限于 ajax 调用。我一直在查看其他一些偶尔出现的错误，它们来自表单帖子（通过 javascript 使用 document.forms["myform"].submit(); ）

所以这不会是一个 ajax 特定的问题。

这可能是因为 apache 的流量超载或类似的东西，因此 POST 变量乱码？

**更新 2**

我已经安装了 log4javascript 和 errorception（我强烈推荐！[http](http://errorception.com/) ://errorception.com/ ）

而且我注意到被调用的 URL 被破坏的奇怪情况。

我注意到 URL 字符串中的很多 GET 变量后面都有这个

```
¤t 
```

例如

```
page.php?a=111&b=222¤t&c=333 
```

任何想法该符号的含义是什么？

我也有几次 javascript 文件说它们无法下载

```
The download of the specified resource has failed. 
```

还有一些javascript错误实例说“）预期”

但问题是当我使用它时页面永远不会失败，并且可能不会失败很多，因为没有用户抱怨任何问题。

所以我猜它在极少数情况下会失败，用户只是刷新页面。

但我想深入了解导致这些随机故障的原因。

无论如何记录apache以知道它是否未能返回页面（或变得超载？）

**更新 3**

好的，所以我注意到 URL 中的随机字符

参数应该说“currentClassification”

但它以“¤tClassification”的形式出现

所以网址应该是

```
page.php/param=1&currentClassification=2&third=3 
```

但它的出现是

```
page.php/param=1&¤tClassification=2&third=3 
```

那么这个 URL 怎么会被破坏呢？Apache、PHP 还是 JavaScript？

**更新 4**

只是一个快速更新，调用此 url 的行位于 php“Header”重定向中。

例如

```
header("Location: page.php/param=1&currentClassification=2&third=3");
exit(); 
```

这会对任何事情产生影响吗？

# java - JOptionPane getValue 方法

> ID：15835628
> 
> 赞同：-2
> 
> 时间：2013-04-05T13:47:16.847
> 
> 标签：java, string, swing, joptionpane

我最近开始在大学学习 Java。在我允许搜索的在线测试中，我对 JOptionPane 类中可用的方法 getValue 有疑问。这个方法返回一个String类的对象是真的吗？如果不是，为什么？这个方法返回什么样的对象？请回答我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:06:59.743

这取决于 JOptionPane 和放置在那里以供选择的值。如果程序让用户在几个喜欢之间进行选择（选择：“狗”、“猫”...），那么在调用该方法时`Strings`您可以期待一个。`String``getValue()`

*但*要小心，实际上`getValue()`唯一的返回对象来自`class` `Object`而*不是*a `String`。 `Object`是*所有类的母亲*，并且 a`JOptionPane`可以容纳任何你想要的东西（字符串、整数、图像等 JOptionPanes ...），因此该方法`getValue()`不能真正确定它返回的是哪种类。这就是为什么它返回一个`class` `Object`.

如果您确定 JOptionPane 包含 a`String`那么您可以像这样使用它：

```
 String myString = (String) myJOptionPane.getValue(); 
```

如果您不是 100% 确定，请先测试结果：

```
 if( myJOptionPane.getValue() instanceOf String){
       String myString = (String) myJOptionPane.getValue();
   } 
```

现在，如果您想知道为什么您的问题被否决：您可能想先用谷歌搜索这些问题。第一种查看方式是在这个[Java Docs](http://docs.oracle.com/javase/7/docs/api/)中。例如这里是[JOptionPane.getValue()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#getValue%28%29)的描述。不要对看起来很复杂的文档感到困惑。他们将为您提供有关方法和类如何工作的所有信息的正确答案。

# android - 我应该如何在 Android 中显示持续通知？

> ID：15835634
> 
> 赞同：0
> 
> 时间：2013-04-05T13:47:37.617
> 
> 标签：android, android-ui

如果应用程序连接到服务器，我需要通知用户我的应用程序。如果是，请在应用程序的某处显示在线图标、文本等。对于此类通知，建议的 UI 指南是什么？

请注意，我不需要帮助来确定我是否已连接，我只需要有关 UI 指南的帮助。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:49:42.793

您不需要一个恒定的通知图标，但您实际上需要一个状态栏图标。

浏览这个文档

[http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T20:51:45.097

只需将正在进行的标志设置为 true，如下所示：

NotificationCompat.Builder nBuilder = new NotificationCompat.Builder(...); nBuilder.setOngoing(true);

# r - 对数图上的线性回归 - 手动绘制 lm() 系数，因为 abline() 不适合

> ID：15835641
> 
> 赞同：2
> 
> 时间：2013-04-05T13:47:58.523
> 
> 标签：r, plot, curve, lm

我很抱歉，因为我之前曾问过同样的问题，但到目前为止答案一直很好。我用这种方法制作了六个看起来不错的地块，但现在我得到了两个奇怪的地块。您可以使用以下示例看到这种“不合身”：

```
x=c(9222,187720,42162,7005,3121,7534,21957,272901,109667,1394312,12230,69607471,79183,6389,64859,32479,3535,9414098,2464,67917,59178,2278,33064,357535,11876,21036,11018,12499632,5160,84574)
y=c(0,4,1,0,1,0,0,1,5,13,0,322,0,0,1,1,1,32,0,0,0,0,0,0,0,0,0,33,1,1)
lin=lm(y~x)
plot(x, y, log="xy")
abline(lin, col="blue", untf=TRUE) 
```

这是我使用真实数据制作的图（左侧为对数，右侧为正常）：

![怪异的斜坡](https://i.stack.imgur.com/CqKaF.png)

我并不太担心丢失的 0 值，因为我认为 lin 仍然会考虑这些值，但是正如您在日志图中看到的那样，该行甚至不会在 (1,1) 附近开始。从现在的样子来看，我希望看到点在 (1000,10) 左右。

有谁知道发生了什么？手动绘制 lin 的系数会有帮助吗？如果是这样，谁能向我解释我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:53:05.217

首先让我们看一下线性模型的杠杆图：

```
plot(lin,which=5) 
```

![线性模型的杠杆图](https://i.stack.imgur.com/fPTJV.png)

如您所见，第 12 点（y=322）和第 28 点（y=33）是最有影响力的。此外，拟合线周围的散布随着 x 值的增加而变大。因此，进行加权回归似乎是合适的：

```
lin2 <- lm(y~x,weights=1/x)
summary(lin2)

Call:
lm(formula = y ~ x, weights = 1/x)

Weighted Residuals:
      Min        1Q    Median        3Q       Max 
-0.006699 -0.003383 -0.002407  0.002521  0.012733 

Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept) 3.099e-01  1.092e-01   2.838  0.00835 ** 
x           4.317e-06  5.850e-07   7.381 4.89e-08 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.005674 on 28 degrees of freedom
Multiple R-squared: 0.6605, Adjusted R-squared: 0.6484 
F-statistic: 54.47 on 1 and 28 DF,  p-value: 4.888e-08 

plot(lin2,which=5) 
```

![加权线性模型的杠杆图](https://i.stack.imgur.com/WDmCJ.png)

这已经更好了。

```
plot(x, y, log="xy",ylim=c(0.1,350))
abline(lin, col="blue", untf=TRUE)
abline(lin2, col="green", untf=TRUE) 
```

![结果](https://i.stack.imgur.com/kcbXC.png) （请记住，此处未绘制 0 值）

根据您的数据实际描述的内容，您可能会考虑使用广义线性模型。

# java - Neo4j Value 表示值

> ID：15835645
> 
> 赞同：0
> 
> 时间：2013-04-05T13:48:19.280
> 
> 标签：java, neo4j

如何从该代码创建的`someString`实例中获取原始字符串值 ()`org.neo4j.server.rest.repr.ValueRepresentation`作为服务器插件的返回：

```
return ValueRepresentation.string(someString) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:59:36.217

你需要那个干什么？

可能使用序列化，传入一个`RepresentationFormat`只是将值作为结果传递给它的`serializeValue`方法。

```
ValueRepresentation {
  String serialize( RepresentationFormat format, URI baseUri, ExtensionInjector extensions )
    {
        final String result = format.serializeValue(type, value);
        format.complete();
        return result;
    }
} 
```

# javascript - 如果使用 jquery/javascript 锁定 iphone，如何提交表单

> ID：15835649
> 
> 赞同：2
> 
> 时间：2013-04-05T13:48:32.427
> 
> 标签：javascript, jquery, ios, html

我有一个使用 jquery mobile 和 html5 开发的网页，它从用户那里获取答案并将表单提交到服务器。这在桌面上运行良好，但是当我在 iPhone 上运行它时会出现一些问题。当 iPhone 被锁定时，JavaScript 永远不会在后台运行，因为当页面不在焦点或手机被锁定以提高性能时，IOS 会停止所有 JS。所以我的页面在用户手动提交之前不会提交。但是如果用户不活跃或者他锁定了手机，我想提交表单。

有没有办法检测在 jquery mobile 中何时按下 Iphone 的锁定按钮？

我已经用谷歌搜索了足够多的内容，但尽管他们存在类似的帖子，但找不到任何答案。

任何帮助，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:21:07.970

您是否尝试过捕捉模糊事件`window`？

```
window.addEventListener('blur', function() {
    console.log('locked');
}); 
```

也试试

```
document.addEventListener('webkitvisibilitychange', function() {
    console.log('locked');
}); 
```

PS不确定这是否可行

# wordpress - 如何获取非图像文件类型的附件 ID？

> ID：15835653
> 
> 赞同：2
> 
> 时间：2013-04-05T13:48:52.757
> 
> 标签：wordpress, attachment

我发现了大量教程/代码示例，它们为您提供了获取和回显图像附件 ID 的代码，但没有一个可以与其他任何东西一起使用，例如 Zip 和 Rar 档案——这正是我正在使用的东西。

有谁知道如何从 WordPress`attachment.php`页面中获取和回显文件（在本例中为 Zip 存档）的 ID？奇怪的是，尝试通过 获取 Zip 存档的 ID 似乎很简单`single.php`，但我真的很难从内部确定这一点`attachment.php`。

真的无法理解为什么 WordPress 有一个内置的`get_post_thumbnail_id();`图像，但没有任何其他类型的文件可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:56:37.300

[请参阅Codex 页面](http://codex.wordpress.org/Function_Reference/get_post_thumbnail_id)上 Thumb 旁边的当前帖子的示例[*显示所有附件*](http://codex.wordpress.org/Function_Reference/get_post_thumbnail_id#Show_All_attachments_for_the_current_post_beside_Thumb)（具有讽刺意味的是，鉴于您的评论！）。[`get_post_thumbnail_id()`](http://codex.wordpress.org/Function_Reference/get_post_thumbnail_id)

*基本上，您为所有*附件设置了一个`get_posts()`查询。然后，您只需要根据文件类型扩展名过滤结果，或者如果您知道（并且记录正确），使用.*`WP_Post.post_mime_type`[`get_post_mime_type()`](http://codex.wordpress.org/Function_Reference/get_post_mime_type)*

 *（该示例也过滤掉了特色图像/拇指......但无论如何您的过滤器都会处理这个问题）。

但是，如果您可以将 MIME 类型用作过滤器，则可以使用参数设置`get_posts()`args `'post_mime_types'`，以仅返回一种（或多种）特定 MIME 类型的附件。您可能希望查看附件的基础数据库条目，以检查它是如何记录的，以便您可以正确匹配它。我希望您的 .zip 文件是 .zip 文件`application/zip`，但在依赖它之前我会仔细检查。

所以，像：

```
<?php

$args = array(
    'post_type'   => 'attachment',
    'numberposts' => -1,
    'post_status' => null,
    'post_parent' => $post->ID,
    'post_mime_type' => 'application/zip'
    );

$attachments = get_posts( $args );

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:56:19.170

谢谢你的回复，塞普斯特。通过浏览 TwentyTwelve 主题的文件之一，我设法找到了令人尴尬的简单答案；原来答案就像回声一样简单......

```
<?php the_ID(); ?> 
```

...在 attachment.php 文件中。*

# python - 这个通过字符串方法提取的代码是如何工作的？

> ID：15835655
> 
> 赞同：0
> 
> 时间：2013-04-05T13:48:57.537
> 
> 标签：python, variables

我已经阅读了这段代码，用于通过字符串方法从网站中提取数据：

```
def extract_results(data)
     start_index= data.find("<p>")
     while -1 != start_index:
         end_index = data.find("</p>", start_index) 
```

while 循环在做什么？为什么将 start_index 与 -1 进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:50:18.030

[`str.find()`](http://docs.python.org/2/library/stdtypes.html#str.find)如果未找到文本，则返回值为-1：

> **`str.find(sub[, start[, end]])`**
> 返回找到子字符串*sub*的字符串中的最低索引，使得*sub*包含在 slice 中`s[start:end]`。可选参数*start*和*end*被解释为切片表示法。如果未找到*sub* ，则返回 -1 。

该`while`循环有效地使代码进入无限循环，如果`start_index`不是`-1`并且没有用，除非在您与我们共享的代码段后面有更多代码。

大概有类似`return data[start_index + 3:end_index]`下一行的东西，在这种情况下，使用`if start_index > -1:`而不是`while`语句会*更具*可读性。

当然，它*可能*会`start_index`再次设置得更低。

# r - X 轴和 Y 轴相同的两个图

> ID：15835657
> 
> 赞同：7
> 
> 时间：2013-04-05T13:49:00.710
> 
> 标签：r, set, scatter-plot

显示的图由以下 R 代码生成。

```
png("test.png")
plot(data[,4],data[,3],type='l',col="green")
par(new=TRUE)
plot(data[,4],data[,2],type='l',col="red")
dev.off() 
```

两个图的 Y 轴范围不同，它被覆盖，如图所示。有人可以帮助为两个图设置相同的 Y 轴范围。

![在此处输入图像描述](https://i.stack.imgur.com/j8Eyx.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T15:31:05.580

如果 y 刻度大部分重叠，那么您可以制作一个包含整个范围的初始图（而不在其上绘制任何东西）来定义轴，然后绘制线条。

```
set.seed(5)
data <- data.frame(1:60, rnorm(60, 0.6, 0.1), rnorm(60, 0.65, 0.15), 
                   seq(2,120,by=2)) 
```

使用`type='n'`设置轴，但不绘制任何内容。使用所有数据的范围确保绘图包含所有数据。

```
plot(range(data[,4]), range(c(data[,3],data[,2])), type='n')
lines(data[,4], data[,3], type='l', col='green')
lines(data[,4], data[,2], type='l', col='red') 
```

![在此处输入图像描述](https://i.stack.imgur.com/lBvhT.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T14:43:23.270

您可以使用此方法：

1.  绘制第一个图
2.  称呼`par(new=TRUE)`
3.  在第一个图的顶部绘制第二个图。第二个图不绘制默认轴`(axes=FALSE)`

如果第二个绘图的 y 与第一个不同，您可以使用该`axis()`函数在右侧绘制第二个 y 轴来表示比例。

例如，您可以执行以下操作：

```
 data <- matrix(rnorm(4*100),ncol=4)
 par(mar=c(5, 6, 2, 4))
 plot(1:100,data[,3], lwd=3, col="green", ann=FALSE, las=2,type='l')
 mtext("I am at left", side=2, line=3.5)
 par(new=TRUE)
 plot(1:100,data[,2], ann=FALSE, axes=FALSE,col='red',type='l')
 mtext("I am at right)", side=4, line=2)
 title("Using par(new=TRUE) \n same X and different or not Y axis ")
 axis(4) 
```

![在此处输入图像描述](https://i.stack.imgur.com/b5Zwp.png)

# ios - 如何在 iOS 中设置自定义日期格式？

> ID：15835658
> 
> 赞同：4
> 
> 时间：2013-04-05T13:49:01.347
> 
> 标签：ios, objective-c, cocoa-touch, nsdateformatter

我想以下一种格式显示数据：`14:23 Sep 10,2012`。我该怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T13:53:21.330

使用 NSDateFormatter

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh:mm MMM dd,yyyy"];
NSString *stringFromDate = [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"today : %@", stringFromDate); 
```

# types - OCAML 如何找到变体的下一个元素

> ID：15835659
> 
> 赞同：4
> 
> 时间：2013-04-05T13:49:05.070
> 
> 标签：types, ocaml, variant

我有 -> 类型 week = MON | 周二 | WED......我想明天创建第二天返回的函数！例如，如果我调用“明天 MON”，该函数将返回 TUE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:07:22.217

没有允许您执行此操作的内置语言结构。所以你应该自己编写函数：

```
let tomorrow = function
  | MON -> TUE
  | TUE -> WED
  ... 
```

另一种可能性是实现这些功能：

```
val int_of_week: week -> int
val week_of_int: int -> week 
```

碰巧用 Obj.magic 编写这些函数很简单。他们将允许您在明天实施：

```
let tomorrow w =
  week_of_int ((int_of_week w + 1) mod 7) 
```

这可能更接近您的想法。

但是这个解决方案不太安全：

*   明天的函数假设 int_of_week MON = 0，int_of_week TUE = 1 等等；
*   对于不在 0 到 6 之间的整数，您需要记录 week_of_int 的行为；
*   最后但同样重要的是，Obj.magic 实际上并不是该语言的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:05:33.190

与 Haskell 不同，您不能只做`deriving(Ord)`和调用`succ`/`pred` 您必须手动编写这些函数。例如

```
let tomorrow = function
  | MON -> TUE
  | TUE -> WED
  | (* etc.. *) 
```

# pbs - 在 PBS 作业脚本中获取 walltime

> ID：15835662
> 
> 赞同：7
> 
> 时间：2013-04-05T13:49:17.290
> 
> 标签：pbs

向 PBS 排队系统提交作业脚本时，会自动或由用户指定挂钟时间，例如通过

```
#PBS -l walltime=1:00:00 
```

问题是这个时间是否可以从作业脚本中访问。是否有环境变量或其他方式来获得这个walltime。

最后，作业脚本应该不时决定是否有足够的时间来做更多的工作，这样作业就不会被排队系统杀死。

**更新：**

至少如果用户在资源列表中指定了 walltime，我可以提出以下解决方法（适用于 bash）

```
read _ _ PBS_WALLTIME  <<< `qstat -f $PBS_JOBID | grep "Resource_List.walltime"` 
```

它从 qstat 输出解析 walltime 并将值放在 PBS_WALLTIME 变量中。因此，命令

```
echo $PBS_WALLTIME 
```

会产生类似的东西

```
1:00:00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T16:18:02.487

这存储在环境变量 $PBS_WALLTIME 中。

当然，那是针对 TORQUE 的，我不确定您使用的是哪个 PBS 排队系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T14:07:21.310

我一直在寻找这个问题的答案，上面的评论给了我一个似乎运作良好的想法。您可以使用 qstat 并使用 sed 从中获取相关信息：

```
qstat -f $PBS_JOBID | sed -rn 's/.*Resource_List.walltime = (.*)/\1/p' 
```

把它放在你的 PBS 脚本中会打印出这个值，你可以使用标准 bash 将它的输出存储在一个变量中：

```
WALLTIME=$(qstat -f $PBS_JOBID | sed -rn 's/.*Resource_List.walltime = (.*)/\1/p') 
```

您还可以使用它来获取 PBS_* 环境变量中不可用的其他信息，例如为作业分配的内存量以及可能的其他一些内容。

# asp.net-web-api - Asp.Net Web Api：使用令牌进行保护？

> ID：15835666
> 
> 赞同：2
> 
> 时间：2013-04-05T13:49:34.827
> 
> 标签：asp.net-web-api, security, token, jwt

我想用令牌保护一个 asp.net web api 服务。现在我知道您通常会实现 STS 服务器，但我不想这样做，所以我的其他选择是什么。

我正在考虑让控制器不受保护，客户端可以调用传入用户名和密码，这将返回一个令牌，然后该令牌将用于并且需要调用服务上的其他控制器，这些控制器将受到保护。

所以这带来了一些问题，使用 DelegatingHandler 与 AuthorizeAttribute。上面的选项必须是一个 authorizeAttribute 因为我需要让控制器不受保护，以便客户端调用身份验证。我不知道如何使用委托处理程序从技术上保护整个服务，而不是让 1 个控制器不受保护。

我看到的另一个选项是提供另一个服务以允许客户端进行身份验证并获取令牌，然后我可以使用委托处理程序锁定我的第二个服务。

让我们想象一下，我走的是 STS 路由，我仍然需要提供某种方式客户端可以联系“OPEN”服务/控制器，该服务/控制器反过来会调用 STS 以获取令牌。

所以考虑到这一点，另一项服务是我最好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:50:01.007

[我过去使用 Hawk ( https://github.com/hueniverse/hawk](https://github.com/hueniverse/hawk) )实现了类似的场景。我在 .NET 中为 Hawk 的 GitHub 实现了一个使用消息处理程序与 Web API 集成的实现。

[https://github.com/pcibraro/hawknet](https://github.com/pcibraro/hawknet)

以我在项目中实施的方式。客户端应用程序首先使用带有真实用户名/密码的基本身份验证（使用 https）调用 web api。Web api 对用户进行身份验证，并将一组 hawk 凭据返回给客户端（它相当于一个令牌）。其余的调用由使用协商的 hawk 凭证的 hawk 保护。这很简单，不涉及任何 STS。

# c# - WPF将图像添加到列中的单元格

> ID：15835667
> 
> 赞同：0
> 
> 时间：2013-04-05T13:49:34.740
> 
> 标签：c#, wpf, image, datagrid

使用 C#.NET4.5、Visual Studio 2012、WPF。

好吧，在伟大的人和建议的帮助下，我走了多远！

为图像设置一个新列：

```
DataGridTemplateColumn p1 = new DataGridTemplateColumn();
p1.Header = "p1";
FrameworkElementFactory factory1 = new FrameworkElementFactory(typeof(System.Windows.Controls.Image));
Binding b1 = new Binding("picture");
b1.Mode = BindingMode.TwoWay;
factory1.SetValue(System.Windows.Controls.Image.SourceProperty, b1);
DataTemplate cellTemplate1 = new DataTemplate();
cellTemplate1.VisualTree = factory1;
p1.CellTemplate = cellTemplate1;
paretogrid.Columns.Add(p1); 
```

然后我检查每个“行”并设置一些 Ifs 来检查值：

```
private void ShowArrows()
{
    var rows = GetDataGridRow(paretogrid); 

    foreach (DataGridRow r in rows)
    {
        DataRowView rv = (DataRowView)r.Item;
        var par3 = paretogrid.Columns[7].GetCellContent(paretogrid.Items[2]) as TextBlock;
        int pconv3 = Convert.ToInt32(par3.Text);
        var par2 =  paretogrid.Columns[8].GetCellContent(paretogrid.Items[2]) as TextBlock;
        int pconv2 = Convert.ToInt32(par2.Text);
        var par1 = paretogrid.Columns[9].GetCellContent(paretogrid.Items[2]) as TextBlock;
        int pconv1 = Convert.ToInt32(par1.Text);
        var parNew = paretogrid.Columns[10].GetCellContent(paretogrid.Items[2]) as TextBlock;
        int pconvNew = Convert.ToInt32(parNew.Text);

        if(pconv3 == pconv2)
        {
            paretogrid.Columns[12].
        }else 
            if(pconv3 > pconv2)
            {
                //uparrow
            }
            else 
                if (pconv3 < pconv2)
                {
                    //down
                }
    }
} 
```

因此，正如您所看到的，我逐步将其放入一些嵌套条件中，然后评论所在的位置就是我要添加图像的位置，例如：

```
paretogrid.columns[12].setvalue(can image go here? asks for dependency); 
```

不知道如何添加图像我所看到的只是通过项目源将图像添加到整个列。

我哪里错了？

**编辑：2013**年 8 月 4 日 好的，有两个建议，到目前为止没有发生错误，这对我来说总是很好。不幸的是没有图像出现。

```
Datagrid.Children.Add(); 
```

出于某种原因，我的数据网格在智能感知中没有这个 .Children 方法，即使我强制它只是红线我。我错过了什么？

XAML 上不大，所以这里是网格。

```
Grid Margin="10,13,6,-13" Background="{DynamicResource {x:Static SystemColors.ActiveCaptionTextBrushKey}}" HorizontalAlignment="Left" Width="1442">
                <DataGrid Name ="paretogrid"  HorizontalAlignment="Left" Height="500" Margin="16,63,0,0" VerticalAlignment="Top" Width="1126" RenderTransformOrigin="0.5,0.5" Background="{x:Null}" FontSize="14" SelectionChanged="paretogrid_SelectionChanged"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:47:50.340

我没有完全符合您的环境（VS2012 和 Windows 8），但在 wpf 中，您也可以使用该`SetValue()`方法访问属性。你可以尝试使用这样的东西：

```
 Image img = new Image();
 img.SetValue(Grid.ColumnProperty, "2");
 img.SetValue(Grid.RowProperty, "1"); 
```

希望能帮助到你。

我在我的机器上测试了一个小演示，效果很好。这是xaml：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid x:Name="paretoGrid">
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
</Grid> 
```

以及背后的代码：

```
 var img = new Image {Width = 100, Height = 100};
 var bitmapImage= new BitmapImage (new Uri(@"pack://application:,,,/Images/old-go-down.png"));

 img.Source = bitmapImage;

 img.SetValue(Grid.RowProperty, 1);
 img.SetValue(Grid.ColumnProperty, 1);

 paretoGrid.Children.Add(img); 
```

Image Build Action 必须设置为 Resource。

# javascript - 输入改变文本框格式

> ID：15835673
> 
> 赞同：0
> 
> 时间：2013-04-05T13:49:46.567
> 
> 标签：javascript, string, function, validation, format

我是 JavaScript 新手，我一直在做一些工作，用 HTML 和 JavaScript 创建表单。在这项工作中，我一直在尝试根据输入到前一个字段中的文本来验证输入的格式。

我一直在尝试的是，如果在“国家/地区”文本框中输入国家“澳大利亚”而不是“电话”文本框仅限于格式 (00)00000000，并且如果它是“电话”文本以外的任何其他国家/地区框必须以国际号码方式格式化，包括+和国家代码，例如+61等

到目前为止，我已经完成了这么多的功能：

```
<script>
document.getElementById('txttelephone').onchange = function()
{
var num1 = document.getElementById('txttelephone').value,
    country = document.getElementById('txtcountry').value,
    regex;

if (country == "Australia" || country == "australia")
{
    regex = /\(\d{2}\)\d{8}/;
}
else
{
    regex = /\+\d{15}/;
}
if (!num1.match(regex))
{
    alert('That is not a correct telephone number');
}
}
</script> 
```

这只是我将“电话”文本框的字符串长度限制为 12 个字符的功能，但我还没有验证以确保区号以 (00)00000000 的形式包含在括号之间如果国家不是澳大利亚（包括国家代码在内的国际号码），还要验证是否包含 +。

这是我必须使用该功能的 HTML：

```
<b>Country:</b> <input type="text" id="txtcountry" name="country">
<br>
<b>Telephone:</b> <input type="text" id="txttelephone" name="telephone"> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:16:55.870

您需要的是一个[正则表达式](http://www.javascriptkit.com/javatutors/redev2.shtml)来测试电话号码是否与您想要的格式匹配。

这是澳大利亚数字的一个`/\(\d{2}\)\d{8}/`。正则表达式以 then 开头和结尾，`/`它将匹配一个左括号，`\(`后跟两个数字`\d{2}`，一个右括号`\)`和 8 个 nore 数字`\d{8}`。

所以你的功能可以变成这个

```
//changed to onchange event of `txttelephone`
 document.getElementById('txttelephone').onchange = function(){  
     var num1 = document.getElementById('txttelephone').value,  //added .value here
        country = document.getElementById('txtcountry').value,
        regex;
    if(country == "Australia" || country == "australia"){
       regex = /\(\d{2}\)\d{8}/;
    } else {
       regex = /\+\d{15}/;        
    }

    if(!num1.match(regex)){   //If there was not a match for your number format
       alert("thats not a ruddy telephone number!");
    }
} 
```

作为旁注，我强烈敦促您不要让用户“免费”输入他们的国家/地区，因为任何拼写错误都意味着您的逻辑将不起作用，即您需要用户进入澳大利亚或澳大利亚，而其他任何事情都不会做，为此发明了下拉菜单设想 ：）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:21:53.453

尝试这样的事情。它没有经过测试，因此正则表达式可能并不完全正确，但它至少应该有所帮助：

```
document.getElementById('myform').onsubmit = function(event) {
    var country = document.getElementById('txtcountry').value;
    var regex = /^\+\d{1,2}\(\d{2,3}\)\d{7,8}$/;
    if (country.toLowerCase() == 'australia') {
         // make the international code optional
        regex = /^(\+\d{1,2})?\(\d{2,3}\)\d{7,8}$/;
    }

    var phone = document.getElementById('txttelephone').value;
    if (!phone.test(regex)) {
        event.preventDefault();
        alert('Bad phone number!');
        return false;
    }
}; 
```

这将在他们尝试提交表单时检查该值。如果他们给出了错误的值，它将显示一条错误消息并阻止提交。

此外，正如@MarkWalters 建议的那样，我会使用下拉列表而不是国家名称的文本字段。拼写错误不仅会破坏您的逻辑，而且如果用户留下拼写错误并且您需要搜索国家为“澳大利亚”的所有用户，您可能会错过输入错误的用户。

# c# - 如何在另一个内部使用 XmlWriter？

> ID：15835674
> 
> 赞同：0
> 
> 时间：2013-04-05T13:49:47.307
> 
> 标签：c#, .net, xml, xmlwriter

我正在尝试解决与我在[如何使用 WriteEndElement 检查元素名称中描述的类似问题](https://stackoverflow.com/questions/15813284/how-to-check-name-of-element-with-writeendelement)

我用内部和外部 XmlWriter 编写了这段代码。这个想法是关闭内部 XmlWriter 也将关闭任何由不完全可靠的第三方库挂起的标签。

```
var sb = new StringWriter();

using (var xml = XmlWriter.Create(sb, new XmlWriterSettings(){Indent = true}))
{
    xml.WriteStartElement("root");

    using (var inner = XmlWriter.Create(xml))
    {
        inner.WriteStartElement("payload1");

        // simulate ThirdPartyLibrary.Serialise(results, inner) leaving a tag open
        inner.WriteStartElement("third-party-stuff");
    }

    xml.WriteStartElement("payload2");
}

sb.ToString().Dump(); 
```

我希望这会产生

```
<root>
  <payload1>
    <third-party-stuff />
  </payload1>
  <payload2 />
</root> 
```

但是相反，我在应该写的那行得到了一个运行时错误`<payload2>`

> InvalidOperationException
> Writer 已关闭或处于错误状态。

为什么我会收到此错误？我没想到关闭内部 XmlWriter 会关闭外部 XmlWriter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:22:36.150

在关闭 XmlWriter 内部的代码示例中使用变量名称将释放（外部）XmlWriter xml。这是预期的行为，因为根据[这个](http://msdn.microsoft.com/en-us/library/ff928369.aspx)MSDN 条目处理 XmlWriter“释放 XmlWriter 类的当前实例使用的所有资源”，即它将释放它创建的任何“外部”XMLWriter。

这样的代码会产生代码分析错误CA2202。[以下链接](http://msdn.microsoft.com/en-GB/library/ms182334.aspx)中描述了针对此类情况的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:33:30.067

查看当您`XmlWriter`从以下位置创建另一个时会发生什么`xml`：

```
static void Main(string[] args)
{
    var sb = new StringWriter();
    using (var xml = XmlWriter.Create(sb, new XmlWriterSettings() { Indent = true }))
    {
        xml.WriteStartElement("root");
        using (var inner = XmlWriter.Create(xml))
        {
            Debug.WriteLine(Object.ReferenceEquals(xml, inner));
            //UH OH! Returns true
            inner.WriteStartElement("payload1");
            // simulate ThirdPartyLibrary.Serialise(results, inner) leaving a tag open
            inner.WriteStartElement("third-party-stuff");
        }
        xml.WriteStartElement("payload2");
    }
    sb.ToString().Dump();
} 
```

看？因此，当您处理 时`inner`，实际上是在处理`xml`，因为它们是同一个对象。

如果您查看 MSDN：（[http://msdn.microsoft.com/en-us/library/77t6e4w3.aspx](http://msdn.microsoft.com/en-us/library/77t6e4w3.aspx)）

> 返回值类型：
> 
> System.Xml.XmlWriter 一个 XmlWriter 对象，它是
> 
> **包裹在**指定的 XmlWriter 对象周围。

所以我假设它使用的是同一个对象。

**编辑**在这里，您可以使用一个解决方案：

```
static void Main(string[] args)
    {
        var sb = new StringWriter();
        var sb2 = new StringWriter();

        using (var xml = XmlWriter.Create(sb, new XmlWriterSettings() { Indent = true }))
        {
            xml.WriteStartElement("root");

            using (var inner = XmlWriter.Create(sb2, new XmlWriterSettings() {Indent = true , CloseOutput=true, OmitXmlDeclaration=true}))
            {

                inner.WriteStartElement("payload1");
                inner.WriteStartElement("third-party-stuff");
            }

            xml.WriteRaw(sb2.ToString());

            xml.WriteStartElement("payload2");
        }

        Debug.WriteLine(sb.ToString());            
    } 
```

# vb.net - 移动控件在 TabControl 中放置在不同的选项卡上

> ID：15835675
> 
> 赞同：1
> 
> 时间：2013-04-05T13:49:51.707
> 
> 标签：vb.net, winforms

我正在使用 VB 2010 在表单设计器中，尝试在选项卡控件中放置一些控件。

有时，当我拖动控件来定位它时，它会被放置在与我当前选择并正在使用的选项卡不同的选项卡上。这非常烦人，似乎是随机发生的。有没有其他人有这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:15:25.467

If this is a major problem for you consider adding the controls manually in code.

Here's a great tutorial on how to do so: [http://www.youtube.com/watch?v=TIEA3JSSAnw](http://www.youtube.com/watch?v=TIEA3JSSAnw)

# ajax - 使用jQuery获取跨域csv文件

> ID：15835677
> 
> 赞同：1
> 
> 时间：2013-04-05T13:49:56.473
> 
> 标签：ajax, jquery, csv, cross-domain

我正在尝试从远程服务器加载一些 .csv 文件（所以我必须处理域问题），并且我正在使用带有以下代码的 jsonp

```
sql="a csv file link"

$.ajax({
url:sql,
dataType:'jsonp',
}).done(function(){
    console.log("done");
}).error(function(){
console.log("err");
}).fail(function(){
console.log("fail");
}).success(function(){
console.log("success");
}); 
```

不知何故，这段代码给了我 2 个不同的结果。

1) 在某些 csv 文件链接上，它似乎正在获取完整的 csv 文件。但是，有一个错误说 csv 文件有“语法错误”，并且执行了 .error 和 .fail 。

2）在其他一些 csv 文件链接上（类似 http://host.com:port/file.csv？从表中选择），不知何故没有任何反应。不调用 .done/.success，也不调用 .fail/.error

谁能告诉我上述问题的解决方案或可能的原因？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:06:31.883

如果 remore 服务器允许[JSONP](http://en.wikipedia.org/wiki/JSONP)，请使用以下内容：

```
sql="a csv file link"+"?callback=myFunc"; 
```

其中 myFunc 是用户定义的函数，用于处理来自远程服务器的数据。

另一种技术是使用此处描述的代理：[https ://stackoverflow.com/a/2559062/1186628](https://stackoverflow.com/a/2559062/1186628)

[更新]

这是 myFunc 的一个非常简单的示例：

```
function myFunc(data){
     alert(data);
} 
```

# c - 在C中添加指向数组（指针）开头的指针

> ID：15835681
> 
> 赞同：0
> 
> 时间：2013-04-05T13:50:00.710
> 
> 标签：c, c-strings

我有一个 char 指针数组

```
char ** strings 
```

与长度

```
limit 
```

我正在尝试将 char 指针添加到数组的开头，同时维护除最后一个之外的所有数组对象例如，如果我的数组有 3 个指针：

```
 {*str1, *str2, *str3} 
```

我想添加`*str4`到开头，它看起来像这样：

```
 {*str4, *str1, *str2} 
```

在保持相同大小的同时

希望我足够清楚

谢谢

**编辑**

我试图避免循环整个事情来移动指针。我正在为此寻找 O(1) 解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:06:22.227

它可以用链表概念来完成。[首先插入）

脚步：

1）元素声明。

```
 struct element{
char *dataPtr;
struct element *next;
}; 
```

2）main中的头元素声明。

```
struct element *head; 
```

3）将 head 传递给您的插入函数

```
struct element *new =(struct element *)malloc(sizeof(element));
insert(&head,new) 
```

4）在插入功能中，

```
if (*head == NULL)
{
*head = new;
new ->Next = *head;
}
else
{
new->Next = *head;
*head = new;
} 
```

在这些步骤中，您不需要遍历整个链表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:52:23.930

如果要在开头添加一个指针，则必须将其他指针从它们的位置增加 1 个元素

您正在寻找的行为：在头部添加一个指针并在尾部删除一个指针（没有其他操作）：只能使用链表完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:54:18.567

如果您使用`char **`存储指向字符串的指针，则没有 O(1) 解决方案，只有明显的 O(n) 解决方案。虽然，您可能可以为 (n-1) 指针做一个 memcpy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T14:13:39.280

查看此概念代码。它应该尊重 O(1) 要求

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    char **strings;
    char **strings2;

    // init pointers with mnemonic memory addresses just for demo purposes
    char *p1 = (char *) 0x01;
    char *p2 = (char *) 0x02;
    char *p3 = (char *) 0x03;
    char *p4 = (char *) 0x04;

    // define the size of pointe array
    int limit = 3;

    // malloc main
    strings = malloc(sizeof(char *) * limit);

    // fill up the pointer array
    strings[0] = p1;
    strings[1] = p2;
    strings[2] = p3;

    // debug - print out the initial state of pointers
    printf("p1 %p p2 %p p3 %p p4 %p\n", p1, p2, p3, p4);
    printf("original pointer array: %p %p %p\n", strings[0], strings[1], strings[2]);

    // create another array of pointers and fill it up with shifted data
    // and the new entry on the head
    strings2 = malloc(sizeof(char *) * limit);
    memcpy(strings2 + 1, strings, (limit - 1)  * sizeof(char *));
    strings2[0] = p4;

    // free the original one and make it point to the modified array
    free(strings);
    strings = strings2;

    printf("new pointer array: %p %p %p\n", strings[0], strings[1], strings[2]);

    free(strings);
} 
```

结果：

```
[root@mysrvr test]# ./a.out
p1 0x1 p2 0x2 p3 0x3 p4 0x4
original pointer array: 0x1 0x2 0x3
new pointer array: 0x4 0x1 0x2 
```

# jquery - 为什么 Jquery 在我的 html 中添加内联样式？

> ID：15835683
> 
> 赞同：9
> 
> 时间：2013-04-05T13:50:13.133
> 
> 标签：jquery, css, styles, inline

我正在使用 CSS 来重新设置一个广播组的样式，如下所示：

![重新设计电台组](https://i.stack.imgur.com/NBVib.png)

这是通过将实际输入（按钮）隐藏在标签标签内，然后`display:none`在 CSS 中将输入本身设置为，并将标签本身设置为按钮来完成的，如下所示：

```
<label for="likert1" class="likert">
   <input type="radio" id="likert1" name="patientViewGroup" value="1">
   1
</label> 
```

这一切都可以用 CSS 来完成......但是因为一些浏览器（我在看你，IE8 及以下版本）不识别`:checked`伪类，这样做的方式就是你的实际输入 - 这就是将通过表单中的值 - 并不总是注册它被检查，所以 JQuery 来救援。

我现在使用 JQuery 在单击其中一个标签时设置 addClass“.amClicked”，此时它还将收音机的“checked”属性切换为“true”，并从兄弟姐妹中删除“amChecked”类。容易，对吧？这是 JQuery 代码：

```
$('.likert').on("click",function() {
    console.log("clikcy!");
    if(!$(this).hasClass('amChecked')) { 
        $(this).addClass("amChecked");
        $(this).children(":radio").attr("checked",true).css("display","none");
    }
    $(this).siblings().removeClass("amChecked")
                       .children(":radio").css("display","none");
}); 
```

好吧，它会是，除了 JQuery，出于某种原因，似乎一心想要将内联“样式”标签添加到我`<input>`的覆盖我的`display: none;`并取消隐藏单选按钮本身，如下面的 #3：

![单击后 - 按钮出现！](https://i.stack.imgur.com/H6Oip.png)

这是点击后输入代码的样子：

```
<input type="radio" id="likert3" name="patientViewGroup" value="3" 
       checked="checked" style="display: inline-block; " class="amChecked"> 
```

更糟糕的是，添加`.css("display","none")`到我的点击代码（如您在上面看到的）不会覆盖它 - 按钮仍然显示。如果我不将其添加到 removeClass 行，则该按钮将保留在那里，未选中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/K88Pv.png)

所以 - 谁能告诉我为什么 Jquery 不请自来地添加到我的代码中，我能做些什么来阻止或覆盖它吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:40:35.150

使用 CSS 设置单选输入' `display`，不要使用 jQuery 更改它。

```
label.likert > input {
    display: none;
} 
```

此外，要切换“checked”属性，您可以为其分配一个“checked”值。要“取消选中”，请删除该属性。

```
$('label.likert').on('click', function () {
    if (!$(this).hasClass('amChecked')) {
        $(this).addClass('amChecked').children(':radio').attr('checked', 'checked');
    }

    $(this).siblings('.amChecked').removeClass('amChecked').children(':radio').removeAttr('checked');
}); 
```

我把它放在[这个小提琴](http://jsfiddle.net/ZVHwG/1/)里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:30:01.830

根据我的经验，jQuery 总是会内联推送样式。它影响元素，而不是页面或样式表定义的样式。它只知道元素存在，因为您将其指向该元素。

另外，我不会把收音机放在标签里。这可能是导致问题的原因。

在您的样式表或任何您的样式被定义的地方：

```
.hidden {
    display: none;
} 
```

为什么不使用 class with`display:none;`而不是 a `.css()`？`.addClass('hidden')`.，`.removeClass('hidden')`应该工作。

然后你可以在任何地方使用它。

同时要建立一个小提琴进行测试。

**编辑**这是一个[小提琴。](http://jsfiddle.net/KLfjW/2/) 实际上，刚刚开始查看您的 jQuery。我不确定我看到预期的结果是什么？您只想单击一个元素，它会更改收音机，对吗？

使用单选按钮，您不必设置某些内容来取消选择它们，它们会自行取消选择。

如果您设置隐藏值而不是`display: none;`单选值，则不会遇到问题评论中提到的问题。然后，您只需设置一个函数来根据您单击的元素的某些属性更改隐藏值的值。

# android - 如何以编程方式设置编辑文本的布局高度

> ID：15835684
> 
> 赞同：1
> 
> 时间：2013-04-05T13:50:16.693
> 
> 标签：android, android-layout

我正在尝试以编程方式设置自定义 EditText 组件的高度，但没有成功。我有一个从 EditText 继承的自定义类来设置自定义字体。我想更新 EditText 的高度和填充，但我所有的意图都没有更新它。只有当我在 XML 文件中设置高度时，高度才会更新。

**这里是 XML：**

```
<example.ui.customcontrols.CustomEditText
    android:id="@+id/txtUsername"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="2dip"
    android:layout_marginTop="2dip"
    android:inputType="text"
    android:singleLine="true" /> 
```

**这里是自定义EditText的代码：**

```
public class CustomEditText extends EditText {
    public CustomEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.init();
    }
    public CustomEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.init();
    }
    public CustomEditText(Context context) {
        super(context);
        this.init();
    }
    public void init() {
        UIHelper.setTypeface(this);
        this.setTextSize(17);

        // This is not working.
        this.setLayoutParams(newLayoutParams(LayoutParams.FILL_PARENT, 10));
        this.setPadding(this.getPaddingLeft(), 0, this.getPaddingRight(), 0);
    }
} 
```

我看过一个[类似的帖子](https://stackoverflow.com/questions/4274819/how-to-dynamically-set-edittext-height)，使用相同，但我无法使其工作。

**更新：**

鉴于快速响应，请在下面找到对场景的说明：

1.  我有很多 EditText，它们是在活动布局中动态添加的。我需要从自定义控件而不是活动中执行此操作。我正在 EditText 中寻找正确的事件（如 onDraw、onPredraw 等），以便读取和设置布局参数。如果您找到要覆盖的适当事件，请告诉我。再次感谢！
2.  getLayoutParams 在视图 (EditText) 的构造函数中返回 null。所以，我认为当布局被实例化时，解决方案可能会解决正确的事件。
3.  到目前为止，我已经尝试并阅读了很多事件，例如 onDraw、onLayout、onFinishInflate 等。但是参数被忽略或引发异常。

Tks 获取当前答案，TIA 获取任何进一步的答案！

弥尔顿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:58:48.160

尝试从包含 CustomEditText 的布局中执行此操作。例如：

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<com.example.untitled1.CustomEditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Hello World, MyActivity"
        android:id="@+id/et"
        /> 
```

我的活动.java

```
public class MyActivity extends Activity {

private CustomEditText et;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    et= (CustomEditText) findViewById(R.id.et);
    ViewGroup.LayoutParams lp = et.getLayoutParams();
    lp.width = 100;
    lp.height = 100;
    et.setLayoutParams(lp);
} 
```

}

像魅力一样工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:55:44.957

```
 LayoutParams params = layout.getLayoutParams();
 // Changes the height and width to the specified *pixels*
 params.height = 100;
 params.width = 100; 
```

# html - 并排放置两个 iframe

> ID：15835687
> 
> 赞同：0
> 
> 时间：2013-04-05T13:50:21.110
> 
> 标签：html, iframe, webpage

我想创建两个 iframe 并将它们并排放置。以前我并排放置了两个 div，但是当我用 iframe 替换它们时，只有我的第一个 iframe 被加载，而另一个 iframe 看不到。如何将它们放在单页中？

我使用的代码

```
<div class="column4" id="lb">
    <table border="0">
        <tr>
            <td height="90" valign="top">
                <div style="text-align:left;height:260px;background-color:#f3f5f6;width:110%;">
            </td>
            <td width="80"></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td valign="top">
                <div>
                    <div style="padding-top:7px;padding-left:0px;text-align:center;background-color:#385870;width:695px;color:#FFFFFF;font-weight:bold;height:16px;">heading</div>
                    <div class="cs1">
                        <iframe class="cs1" src="page1.php" name="frame2" />
                    </div>
                </div>
            </td>
            <td width="80"></td>
            <td valign="top">
                <div>
                    <div style="padding-top:7px;padding-left:0px;text-align:center;background-color:#385870;width:695px;color:#FFFFFF;font-weight:bold;height:16px;">heading</div>
                    <div class="cs1">
                        <iframe class="cs1" src="page2.php" name="frame1" />
                    </div>
                </div>
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:10:58.327

```
<iframe class="cs1" src="page1.php" name="frame2" />
                                                 *** 
```

我很确定您的问题就在这里：浏览器无法识别自动关闭的 iframe 标记，因此当不支持 iframe 时，他会将后面的所有内容视为要显示的“后备内容”。

在表单中编写您的 iframe 元素

```
<iframe class="cs1" src="page1.php" name="frame2"></iframe> 
```

那么它应该可以工作。

# ruby - Watir webdriver 鼠标悬停（悬停） - Firefox Chrome IE 之间的差异

> ID：15835696
> 
> 赞同：3
> 
> 时间：2013-04-05T13:50:46.993
> 
> 标签：ruby, webdriver, automated-tests, watir, watir-webdriver

我正在尝试使用 method 将鼠标悬停在公共网站上`.hover`，但它似乎仅适用于 Chrome。其他浏览器会产生错误或不显示任何信息。

我尝试了 Watir`.fire_event`或`.execute_script`内部 Javascript 之类的替代方法，但在 Firefox 和 IE 上都失败了。Watir Classic 给出了相同的结果。

我不明白这是否是关于 Watir 语法、浏览器特定语法或不受支持的浏览器版本的问题。

```
require "rubygems"
require "watir-webdriver"

BROWSER = Watir::Browser.new :chrome
BROWSER.goto("http://france.meteofrance.com/")
sleep 10 # wait until flash ads are closed
BROWSER.a(:class, "p593500Content").when_present.hover # works, on Chrome only
puts BROWSER.div(:id, "p593500Content").style # position of div after a.hover: left: 249px; top: 223px;

# Chrome - OK, tooltip displayed
# Firefox 7 to 19 - KO: d is undefined in driver_component.js (sometimes l. 7024, or l. 8587)
# IE8, IE9 - KO (maybe OK with IE7): 'unable to locate element, using {:class=>"p593500Content", :tag_name=>"a"}', nothing occurs 
```

Ruby 版本和 Gem 列表：

```
ruby 1.9.3p392 (2013-02-22) [i386-mingw32]

bigdecimal (1.1.0)                  rspec-expectations (2.13.0)
builder (3.2.0)                     rubyzip (0.9.9)
childprocess (0.3.9)                s4t-utils (1.0.4)
commonwatir (4.0.0)                 selenium-webdriver (2.31.0)
cucumber (1.2.3)                    subexec (0.2.2)
diff-lcs (1.2.1)                    user-choices (1.1.6.1)
ffi (1.6.0 x86-mingw32)             watir (4.0.2 x86-mingw32)
gherkin (2.11.6 x86-mingw32)        watir-classic (3.6.0)
hoe (3.5.2)                         watir-page-helper (1.0.3)
io-console (0.3)                    watir-webdriver (0.6.2)
json (1.7.7, 1.5.5)                 websocket (1.0.7)
mini_magick (3.5.0)                 win32-api (1.4.8 x86-mingw32)
minitest (2.5.1)                    win32-process (0.7.1)
multi_json (1.7.2)                  win32screenshot (1.0.8)
nokogiri (1.5.7.rc3 x86-mingw32)    windows-api (0.4.2)
rake (0.9.2.2)                      windows-pr (1.2.2)
rautomation (0.8.0)                 xml-simple (1.1.2)
rdoc (3.9.5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:19:44.283

您在 IE 中看到的错误出现在它尝试悬停之前。这就是说它找不到你想要调用的东西悬停在上面。所以你需要弄清楚为什么会这样。

一些潜在的原因：

*   运行这些浏览器（或浏览器）的系统足够慢，以至于元素尚未呈现（通常通过客户端 javascript 或 ajax 类型的操作）
*   HTML 不同，并且项目具有不同的属性。（顺便说一句，在您的情况下，这似乎不是问题，至少不是基于在 IE8 中查看该站点）
*   HTML 不同，项目位于框架中
*   其他事情正在发生，这会阻止在那一刻访问 DOM，例如，也许您有某种模式，例如浏览器要求安装 flash 或某种插件或其他东西。
*   浏览器设置中的某些内容会阻止渲染元素

要尝试的一件事可能是延长 when_present 动作的超时时间以提供更多时间

一个潜在的故障排除步骤可能是在该行之前放置一些睡眠，并以 10 秒的间隔截取一些屏幕截图，因此您可以（至少在视觉上）看到浏览器在该点呈现的内容是地图的那部分Nord-Pas-de-Calais 渲染？是否有模式弹出窗口或其他浏览器警告？

根据错误，FF 问题似乎完全不同，这似乎是 webdriver 问题。

# ajax - jQuery.ajax 在任何 IE 中都不起作用

> ID：15835700
> 
> 赞同：0
> 
> 时间：2013-04-05T13:50:51.947
> 
> 标签：ajax, internet-explorer, jquery

我下面的代码在我的工作计算机上的 IE10（或之前）中不起作用，但在我的家用计算机上似乎可以正常工作。我认为它甚至没有发出请求，因为我在它周围设置了断点并且在网络选项卡中什么也看不到。我已经阅读了很多关于 IE 中 $.ajax 缓存问题的内容，并尝试过缓存破坏者和 $.get 等，但我认为这不是问题所在。您可以在 timmygcentral.com 上看到这一点（脚本在 index.html 的 loadReccomendations 函数中）。它必须是一些安全问题（因为它只发生在我在 IE 中的工作网络上，它在我的 Chrome/FF 中的工作网络上运行良好，并且在我的家庭网络上的所有浏览器中运行良好）。

```
var tgc_recommendations_uri = "https://spreadsheets.google.com/feeds/list/0AsRjUFPfaIWvdGxPT3U0ZGRNUnFGakwwQnpKQi1Hbnc/od6/public/values?alt=json";
$.ajax({
  cache: false,
  type: "GET",
  contentType: "application/json",
  url: tgc_recommendations_uri,
  format: "jsonp",
  success: function(data){
    $('#recCarousel').css('opacity','0')
    var template = "...";
    var html = Mustache.to_html(template, data.feed);
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:54:37.350

包含`async:false`在您的 ajax 中

像这样

```
var tgc_recommendations_uri = "https://spreadsheets.google.com/feeds/list/0AsRjUFPfaIWvdGxPT3U0ZGRNUnFGakwwQnpKQi1Hbnc/od6/public/values?alt=json";
$.ajax({
  cache: false,
  type: "GET",
  contentType: "application/json",
  url: tgc_recommendations_uri,
  format: "jsonp",
  async:false,
  success: function(data){
  $('#recCarousel').css('opacity','0')
  var template = "...";
  var html = Mustache.to_html(template, data.feed);
}
}); 
```

# hive - 有没有一种简单的方法可以对 Hive 表进行重复数据删除？

> ID：15835701
> 
> 赞同：2
> 
> 时间：2013-04-05T13:50:58.263
> 
> 标签：hive, apache-pig, elastic-map-reduce

我在 Elastic Map-Reduce 上有一组 Hive 表，其中有一些重复的元素。有没有一种简单的方法可以对这些表进行重复数据删除？

想到的是转储到一组猪可消化文件，启动猪并使用 DISTINCT 查询重新生成表。不过，这似乎是一项相当多的工作，所以我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:35:33.993

一个查询应该删除重复项：

```
INSERT OVERWRITE TABLE table
SELECT DISTINCT Col1, Col2 , ..., ColN FROM table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T21:20:41.830

如果您需要对（客户、主机、产品、位置）等唯一列进行重复数据删除，您也可以将其加入到自身中。

如果您获得具有不同时间戳或其他任何内容的多个条目，则很有用。

```
INSERT OVERWRITE TABLE my_table
select a.* from my_table a
inner join ( select min(id) as id from my_table group by unique_column ) b on ( a.id = b.id ); 
```

# c - 当我尝试使数组溢出时，gcc 做了什么？

> ID：15835708
> 
> 赞同：0
> 
> 时间：2013-04-05T13:51:09.240
> 
> 标签：c, arrays, gcc

我尝试了一段导致数组溢出的代码，但是当我用 gcc 编译它时发生了一些意想不到的事情。下面是代码：

```
#include <stdio.h>

int main(int argc, const char *argv[])
{
    int a[] = {0,2,4,7};
    int size = sizeof(a)/sizeof(int);
    int i;
    printf("%d, %X\n", size, &a);
    a[4] = 6;
    printf("%d, %X\n", size, &a);
    a[5] = 78;
    printf("%d, %X\n", size, &a);
    a[6] = 65;
    printf("%d, %X\n", size, &a);
    for (i = 0; i < size; i++) {
        printf("%d, ", a[i]);
    }
    printf("%d, %d, %d\n", a[size], a[size+1], a[size+2]);
    printf("\n");
    return 0;
} 
```

结果是：

```
4, BFC4DDF8
6, BFC4DDF8
6, BFC4DDF8
6, BFC4DDF8
0, 2, 4, 7, 6, 5, 65, 0, 0 
```

所以在代码中，我并没有改变size的值，但是当它运行时，它确实自己改变了！那么谁能告诉我为什么会这样？

PS：gcc版本是4.8.0。

根据@NPE的回答，我检查了它的地址，`size`它实际上位于内存中`a`。

但是当我添加一段代码时

```
printf("%X\n", &size); 
```

前

```
printf("%d, %X\n", size, &a); 
```

结果是

```
BFC39108
4, BFC3910C
4, BFC3910C
4, BFC3910C
4, BFC3910C
0, 2, 4, 7, 4, 78, 65 
```

此时，`size`位于记忆中`a`。

* * *

事实上，无论我在哪里打印`size`'s address，它都位于`a`'s address 之前；如果我不打印`size`地址，它就位于地址之后`a`。那么它仍然是编译器的未定义行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:54:24.863

因为你写过去的结尾`a`，你的程序有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。这意味着它可以以任何它喜欢的方式运行，包括你正在观察的方式。

在实践中发生的事情是`size`恰好位于 之后的内存中`a`，以及以下越界赋值：

```
a[4] = 6; 
```

覆盖`size`.

请注意，如果您使用不同的编译器或不同的编译器设置，或者对程序进行看似无关紧要的更改，代码可能会以其他方式失败。或者它可能在您的整个测试过程中运行良好，然后在您的客户面前爆炸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:54:34.233

您覆盖了 a[] 数组末尾的内存，因此覆盖了 size 的值。

# javascript - 只有在 DurandalJS 中激活所有组合模块后才能附加视图。

> ID：15835709
> 
> 赞同：1
> 
> 时间：2013-04-05T13:51:10.320
> 
> 标签：javascript, durandal

我有一个带有两个子视图的主视图（使用 DurandalJS 组合）。现在，主视图的 viewAttached 事件提前触发，而我的子视图仍在处理 ajax 请求。理想情况下，主视图只会将视图附加到 DOM 并在所有组合子视图完成激活后运行转换。

```
<h1>Hello World</h1>    
<div data-bind="compose: { model: 'viewmodels/subview1', activate: true }">Loading...</div>    
<div data-bind="compose: { model: 'viewmodels/subview2', activate: true }">Loading...</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:29:51.547

处理此问题的最直接方法是在激活主视图期间手动激活子视图。

从子视图组合绑定中删除 activate:true ，并在您的主 VM 中执行以下操作：

```
//in main view model
var subViewModel1 = require("viewModels/subViewModel1");
var subViewModel2 = require("viewModels/subViewModel2");

function activate() {
    return $.when(
        subViewModel1.activate(),
        subViewModel2.activate()
    ).then(function () {
        //finish your main view's activation here
        ...
    });
} 
```

确保您的主虚拟机返回一个仅在子虚拟机完成激活时才解决的承诺。同样，子 VM 应确保其激活函数返回一个仅在该子 VM 的 AJAX 请求完成时才解析的承诺。

[Durandal Groups](https://groups.google.com/forum/#!topic/durandaljs/1GNDwqiObLI)中有一个帖子讨论了类似的概念。如果您还没有，那么绝对值得阅读一下文档，特别是与您的问题相关的这些：

*   [使用合成](http://durandaljs.com/documentation/Using-Composition/)
*   [作文参考](http://durandaljs.com/documentation/Composition/)
*   [挂钩生命周期事件](http://durandaljs.com/documentation/Hooking-Lifecycle-Callbacks/)

# java - JBoss EAP6 + HornetQ - 不确定如何创建到 HornetQ 的队列连接

> ID：15835711
> 
> 赞同：0
> 
> 时间：2013-04-05T13:51:13.687
> 
> 标签：java, spring, jboss, jms, hornetq

我构建了一个基于 JBoss 7.1.1 和外部 HornetQ 实现 2.2.1.4 的 Spring JMS 解决方案。这连接并成功运行。

但是，我现在使用的是 EAP6，并试图连接到封装在 EAP6 中的内部 HornetQ。

我有一些管理连接和创建队列的类。但是这些似乎都不需要连接到打包的 HornetQ - 可以很好地连接到外部 HornetQ。

我已经向 Redhat 提出了这个问题，他们不确定如何解决，因为这也需要 Spring 编码。

我遇到的问题是，我相信我需要创建一个 QueueConnection，如 `QueueConnection qcon = queueConnectionFactory.createQueueConnection("user","password");`

但是我们在 Spring 中实现的方式，是我们使用 Spring JmsTemplate，并且没有给这个添加队列连接的概念，所以它不起作用。

下面是包含所需 Spring bean的**jms-services.xml文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:task="http://www.springframework.org/schema/task" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context.xsd
                        http://www.springframework.org/schema/task 
                        http://www.springframework.org/schema/task/spring-task.xsd
                        http://www.springframework.org/schema/tx
                        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:annotation-config />

    <context:component-scan base-package="com.myproject.test" />

    <task:annotation-driven />

    <bean id="testTransactionManager"
        class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManagerName" value="java:/TransactionManager"></property>
        <property name="autodetectUserTransaction" value="false"></property>
    </bean>

    <tx:annotation-driven transaction-manager="testTransactionManager" />

    <bean id="queueConnectionFactory" class="com.myproject.test.impl.QueueConnectionFactoryImpl">
        <constructor-arg type="String" name="host" value="231.7.7.7" />
        <constructor-arg type="int" name="port" value="9876" />
        <constructor-arg type="boolean" name="useJta" value="true" />
        <constructor-arg type="boolean" name="useCluster" value="true" />
    </bean>

    <bean id="testQueueManager" class="com.myproject.test.impl.QueueManagerImpl">
        <constructor-arg ref="queueConnectionFactory" />
        <constructor-arg name="queue" value="TestQueue" />
    </bean>

</beans> 
```

这是我的**QueueConnectionFactoryImpl**类：

```
package com.myproject.test.impl;

import java.util.HashMap;
import java.util.Map;

import javax.jms.ConnectionFactory;
import javax.jms.JMSException;

import org.hornetq.api.core.TransportConfiguration;
import org.hornetq.api.jms.HornetQJMSClient;
import org.hornetq.api.jms.JMSFactoryType;
import org.hornetq.core.remoting.impl.netty.NettyConnectorFactory;
import org.hornetq.core.remoting.impl.netty.TransportConstants;
import org.jboss.logging.Logger;

import com.myproject.test.QueueConnectionFactory;

public class QueueConnectionFactoryImpl implements QueueConnectionFactory {

    private String host;
    private int port;
    private ConnectionFactory connectionFactory;
    private Logger logger;
    private boolean useJta = false;

    public QueueConnectionFactoryImpl(String host, int port, boolean useJta)
    {
        this.useJta = useJta;
        createConnection(host, port);
    }

    public QueueConnectionFactoryImpl(String host, int port) {

        createConnection(host, port);
    }

    public QueueConnectionFactoryImpl(String host, int port, boolean useJta, boolean useCluster)
    {
        this.useJta = useJta;
        if(useCluster)
            createClusterConnection(host, port);
        else
            createConnection(host, port);
    }

    private void createConnection(String host, int port) {

        logger = Logger.getLogger(this.getClass());

        this.host = host;
        this.port = port;

        Map<String, Object> connectionParams = new HashMap<String, Object>();
        connectionParams.put(TransportConstants.PORT_PROP_NAME, port);
        connectionParams.put(TransportConstants.HOST_PROP_NAME, host);  

        TransportConfiguration transportConfiguration = new TransportConfiguration(NettyConnectorFactory.class.getName(),  connectionParams);

        JMSFactoryType jmsFType = JMSFactoryType.CF; 

        if(useJta)
            jmsFType = JMSFactoryType.XA_CF;

        connectionFactory = (ConnectionFactory) HornetQJMSClient.createConnectionFactoryWithoutHA(jmsFType, transportConfiguration);

    }

    private void createClusterConnection(String host, int port)
    {
        logger = Logger.getLogger(this.getClass());

        this.host = host;
        this.port = port;

        JMSFactoryType jmsFType = JMSFactoryType.CF; 

        if(useJta)
        jmsFType = JMSFactoryType.XA_CF;

        connectionFactory = (ConnectionFactory) HornetQJMSClient.createConnectionFactoryWithHA(new DiscoveryGroupConfiguration(host, port), jmsFType);

    }

    public QueueConnectionFactoryImpl(Object connectionFactory)
    {
        logger = Logger.getLogger(this.getClass());
        logger.debug("Object is: "+connectionFactory);
    }

    public String getHost() {
        return host;
    }

    public void setHost(String host) {
        this.host = host;
    }

    public int getPort() {
        return port;
    }

    public void setPort(int port) {
        this.port = port;
    }

    public ConnectionFactory getConnectionFactory() {
        return connectionFactory;
    }

    public void setConnectionFactory(ConnectionFactory connectionFactory) {
        this.connectionFactory = connectionFactory;
    }

    public boolean isUseJta() {
        return useJta;
    }

    public void setUseJta(boolean useJta) {
        this.useJta = useJta;
    }

} 
```

这是我的**QueueManagerImpl**代码

```
package com.myproject.test.impl;

import javax.jms.ConnectionFactory;
import javax.jms.DeliveryMode;
import javax.jms.Queue;

import org.apache.log4j.Logger;
import org.hornetq.api.jms.HornetQJMSClient;
import org.springframework.jms.core.JmsTemplate;

import com.myproject.test.QueueManager;

public class QueueManagerImpl implements QueueManager {

    private String queue;
    private ConnectionFactory connectionFactory;
    private JmsTemplate template;
    private Queue jmsQueue;
    private boolean useJta = false;
    private static final Logger log = Logger.getLogger(QueueManagerImpl.class);

    public QueueManagerImpl(QueueConnectionFactory queueConnectionFactory) {

        template = new JmsTemplate();
        connectionFactory = queueConnectionFactory.getConnectionFactory();
        try
        {
            this.setUseJta(queueConnectionFactory.isUseJta());
            template.setConnectionFactory(connectionFactory);
            template.setExplicitQosEnabled(true);
            template.setDeliveryMode(DeliveryMode.PERSISTENT);
            if(queueConnectionFactory.isUseJta())
                template.setSessionTransacted(true);
        }
        catch(Exception ex)
        {
            logError(ex.toString());
        }
    }

    public QueueManagerImpl(QueueConnectionFactory queueConnectionFactory, String queue) {

        this(queueConnectionFactory);
        setQueue(queue);
    }

    public String getQueue() {

        return queue;
    }

    public void setQueue(String queue) {

        try
        {
            jmsQueue = HornetQJMSClient.createQueue(queue);
            template.setDefaultDestination(jmsQueue);
            this.queue = queue;
        }
        catch(Exception ex)
        {
            logError(ex.toString());
        }
    }

    public JmsTemplate getTemplate() {
        return template;
    }

    public void logError(String error)
    {
        String details = String.format("Unable to connect to queue, details: %s ", error);
        String errorMessage = String.format("error...", details);
        log.error(errorMessage);
    }

    @Override
    public boolean isUseJta() {
        return useJta;
    }

    @Override
    public void setUseJta(boolean useJta) {
        this.useJta = useJta;
    }
} 
```

* * *

主要的是，上面的代码需要一个ConenctionFactory对象传递给QueueManagerImpl中的JmsTemplate——template.setConnectionFactory(connectionFactory);。

我已经尝试了几种方法来让它工作：

1) 将以下内容添加到**jsm-service.xml**文件中：

```
<bean id="myConnectionFactory" class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
    <property name="targetConnectionFactory" ref="queueConnectionFactory"/>
    <property name="username" value="myuser"/>
    <property name="password" value="myuser123"/>
</bean> 
```

这会产生以下异常：

> java.lang.IllegalStateException：无法将类型 [com.myproject.test.impl.QueueConnectionFactoryImpl] 的值转换为属性“targetConnectionFactory”所需的类型 [javax.jms.ConnectionFactory]：找不到匹配的编辑器或转换策略

2) 将 QueueConnectionFactoryImpl 中的连接更改为：

```
org.hornetq.jms.client.HornetQConnectionFactory HQConnectionFactory = (HornetQConnectionFactory) HornetQJMSClient.createConnectionFactoryWithoutHA(jmsFType, transportConfiguration);

try {
    connectionFactory = (ConnectionFactory) HQConnectionFactory.createConnection("myuser","myuser123");
} catch (JMSException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

这也不起作用。我得到一个例外：

> java.lang.ClassCastException: org.hornetq.jms.client.HornetQConnection 不能转换为 javax.jms.ConnectionFactory

* * *

简而言之，任何人都可以通过以某种方式提供用户名和密码来帮助我将上述代码连接到 HornetQ，以便我仍然可以使用 JmsTemplate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:01:48.067

只需使用您自己的连接工厂。它对我有用：

spring bean（5445是hornetq接受器端口）：

```
<bean name="jmsConnectionFactory" class="messaging.jms.CustomHornetQJMSConnectionFactory">
    <constructor-arg name="ha" value="false" /> <!-- set true if you want support failover -->
    <constructor-arg name="commaSepratedServerUrls" value="127.0.0.1:5445" />
    <property name="username" value="admin" />
    <property name="password" value="admin" />
</bean> 
```

连接工厂实现（使用来自 hornetq-jms-client 的 HornetQJMSConnectionFactory 和来自 hornetq-core-client 的 TransportConfiguration）：

```
public class CustomHornetQJMSConnectionFactory extends org.hornetq.jms.client.HornetQJMSConnectionFactory
{
    private static final long serialVersionUID = 1L;

    private String username;
    private String password;

    public CustomHornetQJMSConnectionFactory(boolean ha, String commaSepratedServerUrls)
    {
        super(ha, converToTransportConfigurations(commaSepratedServerUrls));
    }

    public static TransportConfiguration[] converToTransportConfigurations(String commaSepratedServerUrls)
    {   
        String [] serverUrls = commaSepratedServerUrls.split(",");
        TransportConfiguration[] transportconfigurations = new TransportConfiguration[serverUrls.length];
        for(int i = 0; i < serverUrls.length; i++)
        {
            String[] urlParts = serverUrls[i].split(":");
            HashMap<String, Object> map = new HashMap<String,Object>();
            map.put(TransportConstants.HOST_PROP_NAME, urlParts[0]);
            map.put(TransportConstants.PORT_PROP_NAME, urlParts[1]);
            transportconfigurations[i] = new TransportConfiguration(NettyConnectorFactory.class.getName(), map);
        }
        return transportconfigurations;
    }

    @Override
    public Connection createConnection() throws JMSException 
    {
        return super.createConnection(username, password);
    }
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
} 
```

现在，如果将此连接工厂提供给 jmsTemplate，则可以使用 user/pass 发送/消费消息

# scala - Scala 插件 Netbeans 7.3 $SCALA_HOME

> ID：15835717
> 
> 赞同：0
> 
> 时间：2013-04-05T13:51:32.963
> 
> 标签：scala, netbeans-7

我在使用[Netbeans Scala 插件](http://sourceforge.net/projects/erlybird/files/nb-scala/)时遇到问题。运行我的项目时出现以下错误：

```
> ant -f /Volumes/Z/Users/vincent/Dropbox/Programming/Scala/U4Handler run Could not load definitions from resource scala/tools/ant/antlib.xml. It could not be found. init: deps-jar:
> /Volumes/Z/Users/vincent/Dropbox/Programming/Scala/U4Handler/nbproject/build-impl.xml:405:
> The following error occurred while executing this line:
> /Volumes/Z/Users/vincent/Dropbox/Programming/Scala/U4Handler/nbproject/build-impl.xml:238:
> Problem: failed to create task or type scalac Cause: The name is undefined. Action: Check the spelling. Action: Check that any custom tasks/types have been declared. Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
> BUILD FAILED (total time: 0 seconds) 
```

首先，我不知道为什么它与参数一起运行`ant -f`，我在这个项目中不使用 Ant。其次，这是我为修复此错误所做的：

1.  添加到`-J-Dscala.home=/usr/local/Cellar/scala/2.10.1/libexec/bin`netbeans.conf 中的 netbeans_default_options，我相信这是 scalac 二进制文件的实际路径（我使用 brew 安装了 scala）
2.  创建`~/.MacOSX/environment.plist`包含（之后重新启动）：

> ```
> <plist version="1.0">
> <dict>
> <key>SCALA_HOME</key>
> <string>/usr/local/Cellar/scala/2.10.1/libexec/bin</string>
> <key>PATH</key>
> <string>/opt/local/bin:/opt/local/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/Cellar/scala/2.10.1/libexec/bin</string>
> </dict>
> </plist>' 
> ```

3.  已经尝试过[这个](https://stackoverflow.com/questions/5128374/scala-plugin-for-netbeans)和[这个](https://stackoverflow.com/questions/6631843/compilation-issue-with-scala-netbeans-plugin)，但没有奏效。

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:37:25.377

经过广泛的谷歌搜索，我找到了一个解释这一切的人： [解决方案](http://scalaformac.wordpress.com/2013/01/17/setting-up-scala-on-mac-osx-10-8-2-the-nbscala-plugin-for-netbeans-and-shell-scripting/)

# javascript - 显示滚动消息 - 不起作用

> ID：15835720
> 
> 赞同：2
> 
> 时间：2013-04-05T13:51:36.240
> 
> 标签：javascript

我是 JavaScript 的初学者，并尝试根据这个[Workshop: Displaying a Scrolling Message](http://www.informit.com/library/content.aspx?b=STY_JavaScript_24_hours&seqNum=61)做简单的核心示例。

但是这个变体滚动消息不起作用。我不明白为什么会这样。我的网络浏览器`Google Chrome`，编码`ANSI`。

**代码：**

```
<html>
    <head><title>Scrolling Message Example</title>
        <script>
            msg = "This is an example of a scrolling message. Isn't it exciting?";
            msg = "...          ..." + msg;
            pos = 0;

            function ScrollMessage() {
               window.status = msg.substring(pos, msg.length) + msg.substring(0, pos);
               pos++;
               if (pos > msg.length) pos = 0;
               window.setTimeout("ScrollMessage()", 200);
            }

            ScrollMessage();
    </script>
        </head>
        <body>
            <h1>Scrolling Message Example</h1>
            Look at the status line at the bottom of this page. (Don't
            watch it too long, as it may be hypnotic.)
        </body>
</html> 
```

**问题：**

*   如何解决这个麻烦？
*   哪些其他变体更适合用于此目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:03:20.570

请参阅有关[JavaScript window.status的这篇文章](https://stackoverflow.com/questions/3273320/javascript-window-status)

显然，出于安全原因，大多数浏览器默认禁用 window.status。

我认为这个练习是关于滚动效果的，而不是关于状态栏的。

如果你更换这个

```
window.status = msg.substring(pos, msg.length) + msg.substring(0, pos); 
```

和

```
console.log(msg.substring(pos, msg.length) + msg.substring(0, pos)); 
```

您将在控制台中看到创建滚动效果本身的功能运行良好。

如果要显示滚动消息，只需`<div>`在页面中创建一个要显示消息的位置，并在每次调用滚动函数时更新 div 的内容。

我修改了你的例子：

```
<html>
    <head><title>Scrolling Message Example</title>
        <script>
            var msg = "This is an example of a scrolling message. Isn't it exciting?";
            msg = "...          ..." + msg;
            var pos = 0;

            function ScrollMessage() {
                document.getElementById("scrollMsgContainer").innerHTML = msg.substring(pos, msg.length) + msg.substring(0, pos);
                pos++;
                if (pos > msg.length) pos = 0;
                window.setTimeout(ScrollMessage, 200);
            }
        </script>
    </head>
    <body>
        <h1>Scrolling Message Example</h1>
        Look at the status line at the bottom of this page. (Don't
        watch it too long, as it may be hypnotic.)

        <div id="scrollMsgContainer" style="position: fixed; bottom: 0; width: 100%; background-color: #DDDDDD">&nbsp;</div>
    </body>
    <script>
        ScrollMessage();
    </script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:18:14.420

你为什么不`document.title`改用：

```
function ScrollMessage() {
               document.title = msg.substring(pos, msg.length) + msg.substring(0, pos);
               pos++;
               if (pos > msg.length) pos = 0;
               window.setTimeout("ScrollMessage()", 200);
            } 
```

除了 IE <= 7; 之外的所有浏览器都支持它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:22:37.790

检查[MDN window.status](https://developer.mozilla.org/en-US/docs/DOM/window.status)参考。Google Chrome 没有状态栏，Mozilla Firefox 默认阻止状态栏更改。

您可以尝试 HTML 中的[Sticky Footer](http://ryanfait.com/sticky-footer/)并设置它的内容。

希望有帮助..

# objective-c - 从保存的 plist 文件中检索 URL

> ID：15835727
> 
> 赞同：0
> 
> 时间：2013-04-05T13:51:50.113
> 
> 标签：objective-c, xcode, macos, cocoa

嗨，我是目标 c 的新手。

我将我的 URL 数据保存在资源下的 plist 文件中。这是我的代码。

```
NSString *plistPath =[[[NSBundle mainBundle] resourcePath] 
           stringByAppendingPathComponent:@"myfile.plist"];

NSDictionary *plistDict = [[NSUserDefaults standardUserDefaults]
                                       dictionaryRepresentation];

if([plistDict writeToFile:plistPath atomically:YES]) {
    NSLog(@"success");
} else {
    NSLog(@"error");
} 
```

现在我想从保存的 plist（我的 file.plist）中检索 URL，我如何检索这个我可以使用该 url 进行 web 视图。

例如：

```
urlString.stringValue = ???? 
```

在这里，我正在使用`urlString.stringValue`webview。

```
[[webview mainFrame] loadRequest:[NSURLRequest requestWithURL:
                [NSURL URLWithString:urlString.stringValue]]]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:01:57.530

首先，您不需要自己将 NSUserDefaults 保存到文件中。它的内容会定期自动保存，或者您可以`synchronize`立即调用保存。

但是，如果您想将字典保存到 plist，请使用`writeToFile:atomically:`您已有的方法。然后您可以通过使用 plist 的内容创建一个新字典来再次加载它：

```
[NSDictionary dictionaryWithContentsOfFile:plistPath]; 
```

# c++ - 将“this”作为参数传递时，来自 const 的“未知转换”

> ID：15835729
> 
> 赞同：1
> 
> 时间：2013-04-05T13:52:02.680
> 
> 标签：c++, pointers, gcc, constants

我目前正在制作一个游戏，它使用一个状态堆栈管理器来跟踪所有不同的游戏状态，比如主菜单。

但是，我遇到了一个我似乎无法解决的问题。

这是状态类，被剥离为只包含有问题的代码：

```
class StateManager;

namespace first {
namespace second {

class State {
  friend class StateManager;
  protected:
    /**
     * Associates the state with the specified state manager instance.
     * @param stateManager The instance to associate this state with
     */
    void associateWithManager(StateManager *stateManager) {
      mStateManager = stateManager;
    }
  private:
    StateManager *mStateManager;
};

} // second
} // first 
```

以下是状态管理器，也被剥离：

```
namespace first {
namespace second {

class StateManager {
  public:
    /**
     * Adds a state to the stack.
     * @param state The state to add
     */
    State &add(State &state) {
      state.associateWithManager(this);
      return state;
    }
};

} // second
} // first 
```

当我尝试编译它时，我收到以下错误（行号有点偏离，因为我包含了警卫等）：

```
src/StateManager.cc: In member function 'State& StateManager::add(State&)':
src/StateManager.cc:7:34: error: no matching function for call to 'State::associateWithManager(StateManager* const)'
src/StateManager.cc:7:34: note: candidate is:
In file included from ./include/StateManager.h:4:0,
                 from src/StateManager.cc:1:
./include/State.h:29:10: note: void State::associateWithManager(StateManager*)
./include/State.h:29:10: note:   no known conversion for argument 1 from 'StateManager* const' to 'StateManager*' 
```

显然，`this`指针被视为 const 指针，即使我没有`const`在方法上使用关键字`add`。我不确定这里到底发生了什么。`this`指针总是吗`const`？我很确定我过去曾以这种方式使用它，但没有任何问题。

另外，我这样做的方式是“正确”的方式吗？或者在让州政府了解经理方面是否有更好的解决方案？也许使用单例，但我并不是它的忠实粉丝。

**编辑：**我现在意识到命名空间之外的前向声明是造成这种情况的原因。我应该接受迈克的回答吗，因为它帮助我得出了这个结论？还是我应该发布自己的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:59:29.440

这是唯一的错误吗？当我编译它时，我首先得到这个错误：

```
test.cpp:8:31: error: ‘StateManager’ has not been declared 
```

当将一个类声明为友元时，该类必须已经被声明，否则该声明被忽略。所以你需要`class StateManager;`在定义之前在周围的命名空间中声明`class State`. 通过该更改，您的代码将为我编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:19:15.673

`this`指针不是 a `StateManager *`，它是`StateManager * const`

尝试将您的论点的常量更改为`StateManager* const stateManager`

如果你不想修改你的调用函数，你总是可以抛弃常量： `state.associateWithManager(const_cast<StateManager*>(this));`

# database - Delphi 5 DB Aware ComboBox ItemIndex 未更新

> ID：15835731
> 
> 赞同：0
> 
> 时间：2013-04-05T13:52:04.010
> 
> 标签：database, delphi, combobox, delphi-5

所以我有一个 DBAware 组合框，我的问题就是这个。

如果我做：

```
ComboBox.ItemIndex := 0; 
```

然后，即使它在视觉上显示组合框中的一个项目被选中，以下仍然返回 true。

```
Query.FieldByName('field').IsNull 
```

基本上我想要做的是，如果与组合框关联的字段对于记录为空，那么我希望组合框默认为第一个索引。但是，当我通过 itemindex 执行此操作时，它实际上并没有让它编辑记录。

有任何想法吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:16:50.073

更改 DBComboBox 的 ItemIndex 只会更改 DBComboBox 的输入字段。

它不会**更改**记录的数据字段值。

如果您真的想更改字段值，请通过 DBComboBox 组件。

所以你可以做到。

```
 [...]
 if ComboBox.Field.IsNull then begin
      ComboBox.Text:=ComboBox.Items[0];
      Query.Edit;
      ComboBox.Field.AsString:=ComboBox.Items[0];
      Query.Post;
 end;
 [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:10:08.470

而不是将默认值`ItemIndex`设置为数据集中的设置，例如

```
Query.Edit;
Query.FieldByName('field').Value := 'Default Value';
Query.Post; 
```

# jpa - JPA 更新在多对多关系中不起作用

> ID：15835741
> 
> 赞同：1
> 
> 时间：2013-04-05T13:52:25.620
> 
> 标签：jpa, many-to-many, updates

我有 3 张桌子：

*   `customer(idCustomer,...)`
*   `is_managed(idCustomer,idPerson)`
*   `sales_person(idPerson,...)`

和之间存在`@ManyToMany`关系。`customer``sales_person`

当我执行删除时，它工作正常：`customer`和`is_managed`被`sales_person`删除。

但是当我执行更新时，`customer`and`is_managed`会更新，但`sales_person`不会。

例如，如果我`customer`通过删除更新 a `sales_person`，它会在`is_managed`表中删除，但不会在`sales_person`表中删除。

这是如何引起的，我该如何解决？

以下是相关代码：

```
// update customer
public String updateCustomer(Customer customer,ArrayList<Sales_person> sales_persons,ArrayList<Involved_group_relation> involved_groups, Macro_market macro_market)throws IOException {

   // insert the sales_person attached to the customer
   ArrayList<Sales_person> sales_personC = new ArrayList<Sales_person>();
   sales_personC.addAll(sales_persons);

    customer.setSalesPersons_BelongTo(sales_personC); // insert in customer the sales_persons

    em.merge(customer);
    return customer.getNameCustomer();
}

// entity customer
@Entity
@Table(name="customer")
public class Customer implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue( strategy = GenerationType.IDENTITY)
    private Long idCustomer;

    private String titleTypeAccount;
    private String nameCustomer;

    /** RELATIONS **/
    // CUSTOMER - SALES_PERSON
    @ManyToMany(
            cascade={CascadeType.ALL}
    )
    @JoinTable(
        name="is_managed",
        joinColumns=@JoinColumn(name="idCustomer"),
        inverseJoinColumns=@JoinColumn(name="idPerson")
    )
    private Collection<Sales_person> salesPersons_BelongTo;
        ...
        ...

// entity sales_person
@Entity
@Table(name="sales_person")
public class Sales_person implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    private Long idPerson;

    private String nameSalesPerson;
    private String jobFunction;
    private String titleOrganization;

    @ManyToMany(
        mappedBy="salesPersons_BelongTo"
    )
    private Collection<Customer> customers;
    ...
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:02:56.220

如果要从数据库中删除 SalesPerson，则必须在 SalesPerson 上调用 em.remove()。调用 merge() 是不够的。

此外，如果您希望合并 SalesPerson 的更改，您还必须在 SalesPerson 上调用 merge()，或者在 salesPersons_BelongTo 关系上设置级联合并。

还要确保您维护双向关系的双方，而不仅仅是一方。

# javascript - 中断 JavaScript 函数执行

> ID：15835748
> 
> 赞同：1
> 
> 时间：2013-04-05T13:52:53.627
> 
> 标签：javascript

我有带有 javascript 的 html 页面：

```
<!DOCTYPE html>

    <html>

        <head>
            <script>
                function doWork() {
                     console.log("\tdoWork-start");
                     var now = new Date();
                     var end = now.getTime() + 2000;
                     while(now < end) {
                        now = new Date();
                     }
                     console.log("\tdoWork-end");
                }

                function handleOnClick() {
                    console.log("onclick-start");
                    console.log("onclick-end");
                }

                function handleOnchange() {
                    console.log("onchange-start");
                    window.open('', 'name', 'height=300,width=600,top=200,left=200');
                    doWork();
                    console.log("onchange-end");
                }
            </script>
        </head>

        <body>
            <form>
                <input type="text" onchange="handleOnchange();">
                <input type="button" value="ok" onclick="handleOnClick();">
            </form>

        </body>

    </html> 
```

用例：在输入控件中输入一些值并快速单击按钮。我希望控制台中有这样的日志：

```
onchange-start
    doWork-start
    doWork-end
onchange-end
onclick-start
onclick-end 
```

但在 Firefox 中，我得到了：

```
onchange-start
onclick-start
onclick-end
    doWork-start
    doWork-end
onchange-end 
```

请注意，onclick 执行会中断 onchange 执行。函数 doWork 模拟了一些长时间的工作。在 Chrome 中，它按预期工作。

谁能解释这怎么可能？

# java - JPA实体可以从接口方法继承@Version吗？

> ID：15835754
> 
> 赞同：1
> 
> 时间：2013-04-05T13:53:03.640
> 
> 标签：java, inheritance, jpa, annotations

我定义了一个`Versioned`接口，期望我可以在任何我想使用 JPA 版本控制功能的持久化实体上实现它（例如，比较空中冲突的版本，更新时自动递增）。

```
public interface Versioned {
    @Version
    int getRevision();
} 
```

这并没有节省太多（如果有的话）编码，但它也为我提供了一个我计划稍后使用的标记界面。

```
public class Foo implements Versioned {
    private int revision;

    @Override
    public int getRevision() {
            return revision;
    }
} 
```

`@Version`在方法上是允许的，我希望 Foo 从`Versioned`接口继承该特性。情况似乎并非如此。我可以在数据库中更新我的实例`Foo`，但修订号不会自动更改。

但是，如果我`@Version`向实现添加注释，它会按预期工作：

```
 @Version
    private int revision; 
```

我没有被困住——我可以获得我需要的功能。我只是好奇：是否有一个“技巧”可以让它与接口方法上的注释一起正常工作？或者有人可以指出我为什么这不能像我预期的那样工作的文档吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:00:54.807

注解继承不适用于方法。从以下[文档`@Inherited`](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/Inherited.html)：

> 请注意，如果注释类型用于注释类以外的任何内容，则此元注释类型无效。另请注意，此元注释仅导致注释从超类继承；**已实现接口上的注释无效**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:03:26.073

我很确定这是不可能的。

首先，因为需要@MappedSuperclass 从超类继承映射注解。所以我不明白为什么映射注释会自动从接口继承。

其次，如果类中的 JPA 注释在字段上而不是在 getter 上，则 getter 上的注释将被忽略。

规范的第 2.11.2 段说：

> 实体可以从提供持久实体状态和映射信息的超类继承，但它本身不是实体。通常，这种映射超类的目的是定义多个实体类共有的状态和映射信息。
> 
> 与实体不同，映射的超类是不可查询的，并且不能作为参数传递给 EntityManager 或 Query 操作。映射超类定义的持久关系必须是单向的。
> 
> 抽象类和具体类都**可以指定为映射超类**。MappedSuperclass 注释（或 mapped-superclass XML 描述符元素）用于指定映射的超类。

（强调我的）

这是在关于继承的章节中，并且没有关于从接口继承映射的规范。映射只能从抽象类或具体类继承。

# javascript - Google Analytics 事件跟踪未在 Ajax 请求中触发

> ID：15835755
> 
> 赞同：0
> 
> 时间：2013-04-05T13:53:06.687
> 
> 标签：javascript, ajax, google-analytics

我有以下代码片段：

```
$(document).ajaxStart(function(){
    $('#thanks').modal();

    $('#thanks').on('shown', function () {
        _gaq.push(['_trackEvent', 'Form Submit', 'Clicks_Submit', 'Request_Appointment']);
        var axel = Math.random() + "";
        var a = axel * 10000000000000;

        var $iframe = $('<iframe/>');
        $iframe.attr('src', 'https://doubleclickurlexampleignore' + a + '?');
        $iframe.width(1).height(1);
        $iframe.attr('frameborder', '0');
        $iframe.css('display','none');

        $('body').append($iframe);
    });
}); 
```

#thanks 模态显示正常，根据 GA 调试器 chrome 扩展，我的 GA 事件被正确跟踪：

```
_gaq.push processing "_trackEvent" for args: "[Form Submit,Clicks_Submit,Request_Appointment]":  ga_debug.js:25 
```

页面上的其他事件正在被很好地跟踪（不是通过 Ajax 调用的）。有任何想法吗？我包含了双击代码，以防万一发生干扰。

# ios - 记住uiswitch的状态

> ID：15835757
> 
> 赞同：0
> 
> 时间：2013-04-05T13:53:12.513
> 
> 标签：ios, xcode, core-data

我在应用程序中有一个 uiswitch。如果它打开它会在核心数据中写入“是”如果它关闭它会写入“否”

这现在有效，但如果我再次关闭视图。

```
-(IBAction)theSwitch {
    if (switchButton.on) {
        [self.detailItem setValue:@(YES) forKey:@"done"];

    } else {
        [self.detailItem setValue:@(NO) forKey:@"done"];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:02:12.960

在您的 viewDidLoad 上从您的详细信息项目中获取您保存的值

```
theSwitch.on = [[self.detailItem valueForKey:@"done"] boolValue]; 
```

并保存数据项（感谢 Dan Shelly）

```
NSError *saveError;
[self.detailItem.managedObjectContext save:&saveError]; // check if saveError is nil for error checking 
```

# java - 关于java中的多重继承的问题

> ID：15835758
> 
> 赞同：1
> 
> 时间：2013-04-05T13:53:20.477
> 
> 标签：java

据说Java不支持多重继承，但可以实现多个接口。因此，对于下面的代码片段，将实现哪个 show() 方法。

```
public interface I1{

   public void show();

}

public interface I2{

   public void show();

}

class mine implements I1, I2{

    @override
    public void show(){

       //do something

    }
} 
```

我的问题是我怎么知道被覆盖的 show() 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:55:11.617

> 我的问题是我怎么知道被覆盖的 show() 方法。

你无法区分这一点。该方法只有一个实现`show()`，可以通过任一接口调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T13:57:46.223

Java 没有 C# 的等价物`public void A.show()`，因为它根本不会让接口以那种方式发生冲突。如果你实现了两个接口，声明了一个具有相同名称和相同参数类型的方法，它们要么也具有相同的返回类型，要么 Java 甚至不会编译代码。并且一旦返回类型*也*相同，实现一个或另一个的类实际上同时实现了两者，因为签名满足两个接口的要求。

当然，如果你想验证...

```
public class Example {
    interface A { public void show(); }
    interface B { public void show(); }

    class C implements A, B {
        public void show() { System.out.println("show()ing"); }
    }

    public static void main(String[] args) {
        C c = new C();

        A a = c;
        a.show();  // does something, trust me :P

        B b = c;
        b.show();  // does something too
    }
} 
```

`C`'s`void show()`满足两个接口的方法声明，所以一切正常，控制台中出现两行（一行用于通过 A 引用的调用，一行用于 B 调用）。

现在，说你有

```
interface A { public void show(); }
interface B { public int show(); }  <-- different return type!

class C implements A, B { public void show(); } 
```

您*尝试*实施哪种方法有点明显。但是，这是行不通的——而且不能，因为 Java 不会让两个接口的方法存在于同一个类中。

现在，最后一个例子。

```
interface A { public void show(); }
interface B { public int show(int); }  <-- different return type!

class C implements A, B {
    public void show() { System.out.println("Showing..."); }
    public int show(int i) { System.out.println(i); }
} 
```

这很好。由于两个接口声明只共享一个名称而不共享 arg 类型，Java 允许它们在`C`. 但它也要求您为每个接口实现一种方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T13:56:51.040

由于接口没有方法定义。您覆盖哪个接口的 show 方法并不重要。

[在具有相同方法的类中实现 2 个接口。覆盖哪个接口方法？](https://stackoverflow.com/questions/2801878/implemeting-2-interfaces-in-a-class-with-same-method-which-interface-method-is-o)

> 如果一个类型实现了两个接口，并且每个接口定义了一个签名相同的方法，那么实际上只有一个方法，并且它们是不可区分的。比如说，如果这两个方法的返回类型有冲突，那么这将是一个编译错误。这是继承、方法覆盖、隐藏和声明的一般规则，不仅适用于两个继承的接口方法之间可能发生的冲突，还适用于接口和超类方法之间的冲突，甚至只是由于泛型的类型擦除引起的冲突.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:57:53.487

没关系。想想这两个接口碰巧有相同的方法声明。

# c - C 宏函数错误

> ID：15835761
> 
> 赞同：0
> 
> 时间：2013-04-05T13:53:22.640
> 
> 标签：c

我在c中定义了这样一个宏函数：

```
#define NUM_FROM_DENSE_MAT (PTR, II, JJ, RROW) ((PTR[JJ * RROW + II])) 
```

我打电话如下：

```
/*io.h:141*/ float num = NUM_FROM_DENSE_MAT(p_mat->p_val_host, i, j, p_mat->row); 
```

哪里`p_mat->p_val_host`是浮点数组，其他都是整数。

但是当我编译它时，我得到了以下错误：

```
io.h(141): error: identifier "PTR" is undefined

io.h(141): error: identifier "II" is undefined

io.h(141): error: identifier "JJ" is undefined

io.h(141): error: identifier "RROW" is undefined 
```

不应该翻译成`p_mat->p_val_host[j * p_mat->row + i]`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:56:29.583

从宏定义中删除空格：

```
#define NUM_FROM_DENSE_MAT(PTR, II, JJ, RROW) ((PTR[JJ * RROW + II]))
                         ^^ 
```

您的代码正在定义一个名为`NUM_FROM_DENSE_MAT`.

# c++ - 如何获取对 std::tuple 元素的引用？

> ID：15835762
> 
> 赞同：17
> 
> 时间：2013-04-05T13:53:26.393
> 
> 标签：c++, reference, stdtuple

您可以获得using的`n`第 th 个元素的值。但是我需要将该元组的一个元素作为对函数的引用传递。`std::tuple``std::get<n>(tuple)`

如何获取对 a 元素的引用`std::tuple`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-05T13:54:59.663

[`std::get`](http://en.cppreference.com/w/cpp/utility/tuple/get)返回一个引用（常量或非常量），所以这有效：

```
void fun(int &a) {
    a = 15;
}

void test() {
    std::tuple<int, char> foo{ 12, 'a' };
    fun(std::get<0>(foo));
} 
```

演示[在这里](http://liveworkspace.org/code/Ye3QO$2)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T13:55:31.577

`get`根据其参数的类型返回引用、右值引用或 const 引用。

# c - ALSA：扬声器和麦克风的周期大小之间的关系

> ID：15835764
> 
> 赞同：5
> 
> 时间：2013-04-05T13:53:32.793
> 
> 标签：c, linux, alsa

我有带有麦克风和扬声器的音频会议设备。麦克风和扬声器都具有相同的采样率，`snd_pcm_hw_params_set_rate_near()`例如 8000 Hz。我是否需要将两者的周期大小和周期数设置为相同（对于两个这样的设备相互通信）？

或者我可以为扬声器选择不同的周期/周期大小而不是为麦克风配置的周期/周期大小？我如何决定使用哪个周期和周期大小？

我正在使用API 来设置扬声器和麦克风的周期大小和周期`snd_pcm_hw_params_set_period_size_near()`。`snd_pcm_hw_params_set_periods_near()`

（我是 ALSA 的新手）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T07:58:31.433

支持的周期大小和缓冲区大小取决于驱动程序，但如果是同一设备，则播放和捕获设备可能支持相同的参数。

参数是否需要相同取决于您的应用程序如何访问这些设备。就驱动程序而言，这些设备独立工作。

使用什么缓冲区/周期大小取决于您希望如何平衡延迟、电源使用和过载/欠载安全。延迟与播放设备上的缓冲区大小或捕获设备上的周期大小成正比。用电量会因较短的时间而略有增加。Xrun 安全性通过更大的缓冲区增加，而通过更短的时间段增加一点。

# asp.net - 如何在 ASP.NET 控件中引用 JavaScript 中的 TextBox？

> ID：15835767
> 
> 赞同：0
> 
> 时间：2013-04-05T13:53:47.070
> 
> 标签：asp.net

我有一个带有一些文本字段和一个复选框的 ASP.NET 控件。我想根据页面加载后文本字段中存在的值使用 JavaScript 修改复选框状态。

如何可靠地读取 JavaScript 中的文本字段值？我看到了[这个答案](https://stackoverflow.com/a/641316/33080)，但没有帮助：

```
<asp:TextBox Text='<%# Bind("something") %>' ID="txtSomething" runat="server">
</asp:TextBox>

<script type="text/javascript">
    alert($('#<%= txtSomething.ClientID %>').val());
</script> 
```

这不起作用；VS 告诉我“`txtSomething`未声明。由于其保护级别，它可能无法访问。”

我还能如何在 JavaScript 中引用该文本框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:57:05.007

您可以尝试获取包含您的文本框的控件的客户端 ID，并在他的子项中搜索后输入哪个 ID 包含您的文本框服务器 ID

```
<script type="text/javascript">
    alert($('#<%= parentControl.ClientID %>').find("input[id$='txtSomething']").val());
</script> 
```

作为另一种选择，您可以执行以下操作：

```
<script type="text/javascript">
    alert($('#<%= (parentControl.FindControl("txtSomething")).ClientID %>').val());
</script> 
```

# c# - 一个数组（值）上的 C# 方法以第二个数组（日期）为条件

> ID：15835769
> 
> 赞同：0
> 
> 时间：2013-04-05T13:54:06.453
> 
> 标签：c#, linq

我想计算一个值（双精度）数组中元素的平均值或总和或其他方法，条件是具有相同长度的第二个数组。

例如，我有一个带有日期 (double[]dts) 的排序数组，现在我想计算值数组 (double[]vals) 上的开始日期 (std) 和结束日期 (edd) 之间的平均值（即简单，我下面的代码做了什么）。

但是，如果我想计算一年中所有星期一的平均值，下面的代码将不再起作用。有任何想法吗？谢谢！

```
public static double aggr(double[] dts, double[] vals, double std, double edd)
    {
        int stdindex = 0;
        int eddindex = dts.Length;

        for (int k = 0; k < dts.Length; k++)
        {
            if (dts[k] == std)
            {
                stdindex = k;
            }
            if (dts[k] == edd)
            {
                eddindex = k;
            }
        }

        return vals.Skip(stdindex).Take(eddindex-stdindex).Average();
    } 
```

谢谢大家。我认为所有答案都有效。这是我的新代码：

```
 public static double aggr(double[] dts, double[] vals, double std, double edd, string peakoffpeakbase, double sumavg)
    {
        double result;
        if (sumavg == 1)
        {

            if (peakoffpeakbase=="Peak")
            {
                    result = dts.Zip(vals, (d, v) => new { d, v })
                                        .Where(dv =>  (dv.d >= std & dv.d < edd & DateTime.FromOADate(dv.d).DayOfWeek != DayOfWeek.Saturday & DateTime.FromOADate(dv.d).DayOfWeek != DayOfWeek.Sunday & DateTime.FromOADate(dv.d).Hour > 7 & DateTime.FromOADate(dv.d).Hour < 20))
                                        .Select(dv => dv.v).Sum();
            }
             else if (peakoffpeakbase=="Offpeak")
            {
                    result = dts.Zip(vals, (d, v) => new { d, v })
                                        .Where(dv => (dv.d >= std & dv.d < edd & DateTime.FromOADate(dv.d).DayOfWeek == DayOfWeek.Saturday | DateTime.FromOADate(dv.d).DayOfWeek == DayOfWeek.Sunday | DateTime.FromOADate(dv.d).Hour < 8 | DateTime.FromOADate(dv.d).Hour > 19))
                                        .Select(dv => dv.v).Sum();
             }
             else
             {
                    result = dts.Zip(vals, (d, v) => new { d, v })
                                       .Where(dv => (dv.d >= std && dv.d < edd))
                                       .Select(dv => dv.v).Sum();
            }
        }

        else
        {

            if (peakoffpeakbase == "Peak")
            {
                result = dts.Zip(vals, (d, v) => new { d, v })
                                    .Where(dv => (dv.d >= std & dv.d < edd & DateTime.FromOADate(dv.d).DayOfWeek != DayOfWeek.Saturday & DateTime.FromOADate(dv.d).DayOfWeek != DayOfWeek.Sunday & DateTime.FromOADate(dv.d).Hour > 7 & DateTime.FromOADate(dv.d).Hour < 20))
                                    .Select(dv => dv.v).Average();
            }
            else if (peakoffpeakbase == "Offpeak")
            {
                result = dts.Zip(vals, (d, v) => new { d, v })
                                    .Where(dv => (dv.d >= std & dv.d < edd & (DateTime.FromOADate(dv.d).DayOfWeek == DayOfWeek.Saturday | DateTime.FromOADate(dv.d).DayOfWeek == DayOfWeek.Sunday | DateTime.FromOADate(dv.d).Hour < 8 | DateTime.FromOADate(dv.d).Hour > 19)))
                                    .Select(dv => dv.v).Average();
            }
            else
            {
                result = dts.Zip(vals, (d, v) => new { d, v })
                                   .Where(dv => (dv.d >= std && dv.d < edd))
                                   .Select(dv => dv.v).Average();
            }
        }
            return result;

    } 
```

显然这很糟糕而且非常冗长。我真正想做的是结合下面的答案并写下：

```
result = dts.Zip(vals, (d, v) => new { d, v })
                                        .Where(dv =>  (dv.d.InTimeRange(std,edd).IsBusinessHour(peakoffpeakbase))
                                        .Select(dv => dv.v).CustomX(indicator); 
```

其中 InTimeRange 和 IsBusinessHour 是如下所述的扩展方法，customX 将接受一个参数，然后进行平均、求和或其他操作。但是我不能让它工作。再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:47:25.260

您可以使用`Zip`组合两个数组：

```
double result = dts.Zip(vals, (d,v) => new { d, v})
    .Where( dv => SomeCondition(dv.d))
    .Select( dv => dv.v).Average(); 
```

这将计算所有`vals`值的平均值，谓词`SomeCondition`返回`true`相应`dts`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:25:05.483

我不完全确定您在寻找什么，但您是否尝试过将双精度转换为 DateTime 以便您可以检查它？

```
DateTime.FromOADate(dts[k]).DayOfWeek 
```

也许是这样的：

```
public static double aggr(double[] dts, double[] vals, double std, double edd, DayOfWeek dayOfWeek)
    {
         int stdindex = 0;
        int eddindex = dts.Length;

        List<double> newDts = new List<double>();
        List<double> newVals = new List<double>();

        // Use only values that meet criteria
        for (int k = 0; k < dts.Length; k++)
        {
            if (DateTime.FromOADate(dts[k]).DayOfWeek == dayOfWeek)
            {
                newDts.Add(dts[k]);
                newVals.Add(vals[k]);
            }
        }

        // Loop through dates that met the criteria
        for (int k = 0; k < newDts.Count; k++)
        {
            if (newDts[k] == std)
            {
                stdindex = k;
            }
            if (newDts[k] == edd)
            {
                eddindex = k;
            }
        }

        return newVals.Skip(stdindex).Take(eddindex - stdindex).Average();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:52:25.823

上面的答案（Henrik's）是最短的一个，但是如果您发现需要经常使用特定的过滤器范围，您可以编写扩展方法以使其更具可读性。

您可以将数据转换为更易于使用的形式。例如，您可以将`double`日期转换为`DateTime`. 然后，您可以将数据放入以下集合中：

```
public class Datum
{
    public DateTime DateTime;
    public double Value;
} 
```

这将简化日期检查。

然后，您可以将范围选择实现为两个正交概念：

1.  开始和结束日期的概念。
2.  按一周中的特定日期过滤的概念。

您可以实现这些过滤器 - 以及平均值的计算 - 作为 IEnumerable 上的扩展方法，如下所示：

```
public static class EnumerableDatumExt
{
    public static double Average(this IEnumerable<Datum> @this)
    {
        return @this.Average(datum => datum.Value);
    }

    public static IEnumerable<Datum> InTimeRange(this IEnumerable<Datum> @this, DateTime start, DateTime end)
    {
        return from datum in @this
               where (start <= datum.DateTime && datum.DateTime <= end)
               select datum;
    }

    public static IEnumerable<Datum> ForEach(this IEnumerable<Datum> @this, DayOfWeek targetDayOfWeek)
    {
        return from datum in @this
               where datum.DateTime.DayOfWeek == targetDayOfWeek
               select datum;
    }
} 
```

然后，您可以组合过滤器，为您提供一周中特定日期指定时间范围内所有数据的平均值，如下所示：

```
double average = data.ForEach(DayOfWeek.Monday).InTimeRange(start, end).Average();
// Or
double average = data.InTimeRange(start, end).ForEach(DayOfWeek.Monday).Average(); 
```

将所有这些放在一个可编译的控制台应用程序中：

```
using System;
using System.Linq;
using System.Collections.Generic;

namespace Demo
{
    public class Datum
    {
        public DateTime DateTime;
        public double Value;
    }

    public static class EnumerableDatumExt
    {
        public static double Average(this IEnumerable<Datum> @this)
        {
            return @this.Average(datum => datum.Value);
        }

        public static IEnumerable<Datum> InTimeRange(this IEnumerable<Datum> @this, DateTime start, DateTime end)
        {
            return from datum in @this
                   where (start <= datum.DateTime && datum.DateTime <= end)
                   select datum;
        }

        public static IEnumerable<Datum> ForEach(this IEnumerable<Datum> @this, DayOfWeek targetDayOfWeek)
        {
            return from datum in @this
                   where datum.DateTime.DayOfWeek == targetDayOfWeek
                   select datum;
        }
    }

    static class Program
    {
        static void Main()
        {
            var start  = new DateTime(2012, 01, 01);
            var end    = new DateTime(2012, 01, 31);
            var data   = createTestData(start);

            double average = data.ForEach(DayOfWeek.Monday).InTimeRange(start, end).Average();

            Console.WriteLine(average);
        }

        private static IEnumerable<Datum> createTestData(DateTime start)
        {
            var result = new List<Datum>();
            var oneDay = TimeSpan.FromDays(1);

            for (int i = 0; i < 20; ++i)
            {
                start += oneDay;
                result.Add(new Datum {DateTime = start, Value = i});
            }

            return result;
        }
    }
} 
```

# haskell - 匿名函数概念理解

> ID：15835772
> 
> 赞同：5
> 
> 时间：2013-04-05T13:54:13.323
> 
> 标签：haskell, lambda, language-design

我正在努力学习和理解 Haskell 的设计。我目前正在使用 Lambda / 匿名函数，我想知道。

为什么不是 Eq 类的函数类型实例？

```
Prelude> (\z -> z + 5) == (+5) 
```

在这个问题上，我想知道是不是因为 z 可以是任何东西，甚至可能是所有 lambda 函数中的自由变量，所以制作 Eq 类型的 lambda 函数将是一个设计缺陷。

为什么不是类型类 Show 的函数类型实例？

```
Prelude> (\q -> q - 2) 
```

我感谢任何澄清。

提前谢谢了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T14:39:09.583

这些功能是相同还是不同：

```
dbl1 :: Int -> Int
dbl1 x = x + x

dbl2 :: Int -> Int
dlb2 x = 2 * x 
```

?

对于*某些*函数，编译器“容易”看到它们包含相同的逻辑。但是大多数功能都很难比较。然后有些功能在逻辑上不同，但行为相同 - 类似`dbl1`和`dbl2`以上。因此，您必须做出选择，要么根据每个可能的值测试它们，要么决定它们不相等。在大多数情况下，前者是完全不切实际的。后者绝对是不可取的或不直观的。现在，考虑到这个问题已经太难解决了，然后投入`IO`...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T16:37:54.567

我觉得 Dave 和 Peter 都没有足够强调的一个关键概念是：*两个函数相等当且仅当 (a) 它们具有相同的类型，并且 (b) 对于你可以给它们的每个可能的参数，它们都产生同样的结果*。

现在，有了这一点，答案`Eq`就是他们所说的。Peter 指出，`Eq`函数的实例需要能够分析两个任意函数并正确确定它们是否对任何两个输入产生相同的结果。正如戴夫所指出的，这在数学上实际上是不可能的。任何试图比较任意函数的检查器对于某些函数都会失败——这意味着它会在某些情况下挂起或产生错误的答案。

然而，你会看到 Haskell 程序员一直在谈论函数相等，但大多数时候他们的意思是*人类*已经证明了某些两个函数是相等的。例如，函数组合运算符定义如下：

```
(.) :: (b -> c) -> (a -> b) -> (a -> c)
f . g = \x -> f (g x) 
```

我们现在可以证明对于所有可能的`h :: c -> d`,`g :: b -> c`和`h :: a -> b`, `f . (g . h) == (f . g) . h`。在这种情况下，这很容易，我们只需根据 的定义扩展表达式，`(.)`就可以得到相同的结果：

```
f . (g . h) = f . (\y -> g (h y))          -- expand `g . h` by definition
            = \x -> f ((\y -> g (h y)) x)  -- expand `f . (\y -> g (h y))`
            = \x -> f (g (h x))            -- apply the inner lambda

(f . g) . h = (\y -> f (g y)) . h
            = \x -> (\y -> f (g y)) (h x)
            = \x -> f (g (h x)) 
```

但这只能针对精心挑选的功能来完成，而计算机通常不能很好地或可靠地做到这一点。对于您编写的任何尝试测试任意函数是否相等的程序，都会有一些函数产生错误的答案或永远循环。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T14:38:38.170

[哥德尔的不完备性定理](http://en.wikipedia.org/wiki/G%C3%B6del%27s_incompleteness_theorems)意味着`Eq`函数的任何实例必须要么给出不准确的结果，要么有时返回 ⊥。这不是我们对`Eq`实例的期望（至少对于有限数据）。

`show`应该提供评估其输入的 Haskell 源代码。这在编译 Haskell 程序时很尴尬，因为现在您必须为每个函数保留一份源代码的副本，从而使可执行文件膨胀，*即使`Show`函数的实例从未使用过*。

可以为`Show`违反此规则的函数提供实例，例如通过始终返回`"{-function-}"`或（对于某些类型）返回函数的类型。Haskell 的早期版本做到了。但有人认为打破这条规则并不是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T23:50:36.803

我喜欢每个人的答案……他们似乎有道理。在这个阶段，我无法想象为什么函数没有默认设置为 Eq 和 Show 的实例。这只是一些实验，可能会为您提供自己尝试的想法：

```
Prelude> :set -XFlexibleInstances
Prelude> instance Eq (Int -> Int) where x == y = map x [0..10] == map y [0..10]
Prelude> ((\z -> z+5) :: Int -> Int) == ((+5) :: Int -> Int)
True
Prelude> instance Show (Int -> Int) where show x = show (zip [0..10] (map x [0..10]))
Prelude> (\q -> q-2) :: (Int -> Int)
[(0,-2),(1,-1),(2,0),(3,1),(4,2),(5,3),(6,4),(7,5),(8,6),(9,7),(10,8)] 
```

# r - 在 ggplot2 中显示每个因子水平的原始值和加权平均值

> ID：15835778
> 
> 赞同：1
> 
> 时间：2013-04-05T13:54:21.750
> 
> 标签：r, ggplot2

我试图显示不同因子水平（样本）和加权平均值（权重=覆盖）的变量（等位基因特定表达式）。

我做了一些示例数据：

```
set.seed(2)
x <- sample(c("A","B","C"), 100, replace=T)
y <- rnorm(100)
w <- ceiling(rnorm(100,200,200))
df <- data.frame(x, y, w)

library(ggplot2)
ggplot(df, aes(x=factor(x), y=y, weight=w)) +
  geom_point(aes(size=w)) +
  stat_summary(fun.y=mean, colour="red", geom="point", size=5) 
```

（我也试图发布情节 - 但我还没有足够的分数）。

这很好用 - 但它显示了未加权的平均值......

```
library(plyr)
means <- ddply(df, "x", function(x) data.frame(wm=weighted.mean(x$y, x$w),
                                               m=mean(x$y)))
means

 x          wm           m
1 A  0.00878432  0.11027454
2 B -0.07283770 -0.13605530
3 C -0.14233389  0.08116117 
```

所以 - 我只是想将“wm”值显示为红点 - 使用 ggplot2\. 我认为它必须正确使用“重量=..” - 但我现在放弃了......

我真的希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:03:01.173

我会先创建`summary`data.frame，`mean`如下`weighted mean`所示：

```
require(plyr)
dd <- ddply(df, .(x), summarise, m=mean(y), wm=weighted.mean(y, w)) 
```

然后，我会通过加载这些数据来显示平均值和加权平均值。

```
require(reshape2) # for melt
require(ggplot2)
ggplot() + geom_point(data = df, aes(x=factor(x), y=y, size=w)) + 
          geom_point(data = melt(dd, id.var="x"), 
          aes(x=x, y=value, colour=variable), size=5) 

# if you want to remove the legend "variable"
scale_colour_discrete(breaks=NULL) 
```

![在此处输入图像描述](https://i.stack.imgur.com/9j1kr.png)

您可能需要考虑使用`scale_size_area()`为价值分配提供更好/无偏见的大小。

# html - 将 http 请求标头添加到 aa href 链接

> ID：15835783
> 
> 赞同：57
> 
> 时间：2013-04-05T13:54:35.397
> 
> 标签：html, http

我有`href`一些简单的链接`html`

```
<a href="www.google.com">Apparently you can find things here</a> 
```

但是我想在请求中添加一个http请求头？

这可能吗。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-05T14:05:12.500

除了使用 XMLHttpRequest 和 fetch 发出的请求之外，页面无法指定 HTTP 请求标头。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T13:59:03.643

你能详细说明你想要做什么吗？

我不相信可以通过链接指定请求标头。您可以使用以下表示法将 GET 参数发送到目标站点：

```
www.google.com?q=searchterm 
```

第一个 GET 参数由问号 (?) 与 URL 分隔，之后每个附加参数应使用与号 (&) 分隔，如下所示：

```
www.google.com?q=searchterm&otherparam=value&otherotherparam=value 
```

# java - 将字符串重新格式化为十进制

> ID：15835786
> 
> 赞同：0
> 
> 时间：2013-04-05T13:54:41.747
> 
> 标签：java, double, type-conversion

我有 data = 137500 作为双变量，我用 DecimalFormat 转换为 Rp.137.500,00 并设置为文本字段。我如何从 texfield 重新格式化为 137500。cz 我想从中相乘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:01:00.580

你的`double`变量还在**范围内**吗？

如果是 - 只需使用它。

如果没有，请更改它的可见性和/或创建`get...()`访问它的方法。

以适当的数字类型输入数字并在必要时进行格式化总是一个好主意。

虽然应该可以提取仅包含数字部分的子字符串，然后使用`Double.parseDouble()`方法进行转换，但我仍然没有看到这样做的意义。

# java - 如何声明 int 变量对我的所有方法都是可见的？

> ID：15835787
> 
> 赞同：0
> 
> 时间：2013-04-05T13:54:49.787
> 
> 标签：java, android

我有一个游戏，开始 int value points = 100; 并且随着游戏进度，每次点击按钮后该值都会减少，直到游戏结束。我在 onClick 方法中使用 switch 子跟踪点。游戏结束后，我再次为第二轮重新加载游戏方法，这是我的问题。如果我将该 int 变量设为实例变量，它将在第一轮结束后保持其值，并且我需要从 100 重新开始。如果我将其声明为局部变量，我的方法将使用意图调用另一个活动并发送最终点值看不到这个变量。如何解决这个问题？

所以，我声明了一些变量：

```
int numberPointsGame = 100;
static int numberPointsTotal; 
```

现在，在我的 onClick 方法中，我设置了一些文本并对这些点进行子跟踪：

```
public void onClick(View v) {

        switch(v.getId()){

        case R.id.bA1:
            numberPointsGame = numberPointsGame - 5;
            a1.setText(mA1);
            break;
        case R.id.bA2:
            numberPointsGame = numberPointsGame - 5;
            a2.setText(mA2);
            break; 
```

现在，如果用户输入正确的答案，我将其放在另一个实例变量中，然后将其发送到另一个弹出活动，然后重新加载第一个活动并再次执行此操作。

```
if (ukucanRezultatStrK.equals(konacanNormalized)){
                                                        konacnoResenje.setText(mKonacno);

                                                        Intent i = new Intent(Asocijacije.this, Popup_asocijacije.class);
                                                        i.putExtra("brojPoenaPrimljeno", numberPointsGame);
                                                        startActivity(i);

                                                        mHandler.postDelayed(mLaunchTask,3700);

                                                        numberPointsTotal = numberPointsTotal + numberPointsGame;

                                                        setResults();

                                                 }else{
                                                    Toast.makeText(Asocijacije.this, "Wrong answer!", Toast.LENGTH_SHORT).show();
                                                    } 
```

第二次重新加载后，当游戏结束时，我进入主菜单并将最终结果（两个游戏结果的总和）设置为一个按钮。我总是得到 0。这是主要问题。

```
Intent i = new Intent(getApplicationContext(), Izbor.class);
                i.putExtra("numberPointsGame", numberPointsTotal);
                startActivity(i); 
```

和我的主菜单类：

```
int numberPointsGame;
    int score = 0;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     

        setContentView(R.layout.izbor);

        addListenerOnButton();

        Bundle extras = getIntent().getExtras(); 
        if(extras !=null) {
           score = extras.getInt("ukupnoAsocijacije", 0);
        }
    }

private void addListenerOnButton() {

poeniAso.setText("" + score);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:57:52.487

> 我再次重新加载游戏方法...

您可以有一些可以用于此目的的初始化代码......在游戏开始之前准备所有必要的字段：

```
public class Game
{
    private int myCounter;

    public void initialize()
    {
         this.myCounter = 100;
         //initialize canvas, connections, etc.
    }
} 
```

或者，只需`reset()`在您的代码中添加一个在游戏重新开始之前调用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:58:33.627

在从一个活动移动到另一个活动时，只需将 int 与意图一起传递

```
Intent intent = new Intent(...);
intent.putInt("MyImportantInt", someNumber); 
```

如果它只是可见性问题，请尝试 getter 和 setter ;) 或者在你的情况下，每次调用它时只从 int 中减去 1 的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:59:41.247

为了避免每次访问点都创建实例使用`Static`

```
 class PointsUtil{
    public static int  points =10   
    } 
```

在程序中的任何地方

```
PointsUtil.points= points+new points 
```

当方法 reload 再次调用时

```
 PointsUtil.points= 10; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T14:01:14.643

尝试使用 java.lang.Integer 而不是原始 int。

# iphone - 邮箱应用程序手势如何工作？

> ID：15835788
> 
> 赞同：1
> 
> 时间：2013-04-05T13:54:50.193
> 
> 标签：iphone, objective-c, gesture

我想知道最好的方法是为 iOS 的手势控件实现新的邮箱应用程序之类的东西。例如，在电子邮件上向右滑动可让您将该电子邮件标记为已读。

他们是如何做到的呢？（你认为他们是怎么做到的？）

这是应用程序：

![在此处输入图像描述](https://i.stack.imgur.com/uD4HU.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T08:50:54.743

从概念的角度来看，似乎可以通过在常规单元格顶部添加可滑动的子视图来完成。当您向单元格添加滑动手势时，您可以“揭开”下面的单元格，显示按钮。

# asp.net - 带有 CssClass 的 ASP.net 按钮不起作用

> ID：15835794
> 
> 赞同：1
> 
> 时间：2013-04-05T13:55:10.437
> 
> 标签：asp.net, css

问题：

我有两个 ASP.net`Buttons`在 Chrome 和 Firefox 浏览器中运行良好，但在 IE 9.0 中运行良好。

```
*Does not work on IE 9.0*
<asp:Button ID="btnMeal" runat="server" onclick="btnMeal_Click" Text="." CssClass="buttonmeal" />

*Works fine on IE 9.0 and other browsers*
<asp:Button ID="btnType" runat="server" onclick="btnType_Click" Text="." CssClass="button"/> 
```

CSS 代码：

```
/*Doesnt work*/
.buttonmeal
 {
        background: url('../images/meal.png') no-repeat;
        width:82px;
        height:32px;
        border:0px;     
    }

/*Works*/
    .button
    {
        background: url('../images/type.png') no-repeat;
        width:82px;
        height:32px;
        border:0px;     
    } 
```

也许我认为问题在于它在 IE 中的呈现方式不同，并且在 IE 中只使用了按钮。

```
<td class="myStyle">
    <input type="button" name="select" ...>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-27T18:57:14.490

很可能是一个缓存问题（无论如何它是对我来说的）。您的浏览器没有使用最新版本的 CSS 文件，这是一个很好的变化。尝试硬刷新：

**铬/IE/火狐**：`Ctrl`+`R`

# css - 网站显示与智能手机不兼容

> ID：15835796
> 
> 赞同：0
> 
> 时间：2013-04-05T13:55:15.163
> 
> 标签：css, user-interface

我有一个网页，其顶部有一个菜单栏，这是在 x 轴上重复的图像的结果。

```
width: 900px;
margin: 0 auto;
background-image: url(/images/white-fade-short.png);
background-repeat: repeat-x; 
```

上面提到的菜单链接以上述图像为背景。这个网站在桌面上呈现得非常好。但是，当加载到智能手机上时，条形图的图像被渲染得比实际网页大小要大得多，并且它会滚动到特定的长度。我怎样才能解决这个问题。还设置了以下 css 属性以使其与智能手机显示兼容：

```
@media screen and (max-width: 1024px){
        img.bg {
            left: 50%;
            margin-left: -512px; }
    } 
```

这段代码是否会以任何方式产生问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:59:27.240

你需要看看这个教程[http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

它会帮助你

# c# - Global.asax - Application_Error - 如何获取页面数据？

> ID：15835802
> 
> 赞同：19
> 
> 时间：2013-04-05T13:55:28.240
> 
> 标签：c#, asp.net, global-asax

我有这个代码：

```
using System.Configuration;

void Application_Error(object sender, EventArgs e)
{
    Exception ex = Server.GetLastError().GetBaseException();

    string ErrorMessage = ex.Message;
    string StackTrace = ex.StackTrace;
    string ExceptionType = ex.GetType().FullName;
    string UserId = Getloggedinuser();
    string WebErrorSendEmail =
       ConfigurationManager.AppSettings["WebErrorSendEmail"];

    // save the exception in DB
    LogStuffInDbAndSendEmailFromDb();
} 
```

这是（大部分）我的代码。不过，在少数情况下，我没有得到足够的信息。我不知道异常来自哪个页面。

如何获取与异常源自的页面相关的任何类型的信息？

以下是最短消息的示例：

> Base-64 字符数组的长度无效。
> 
> 在 System.Convert.FromBase64String(String s) 在 System.Web.UI.ObjectStateFormatter.Deserialize(String inputString) 在 System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Deserialize(String serializedState) 在 System.Web .UI.Util.DeserializeWithAssert(IStateFormatter formatter, String serializedState) 在 System.Web.UI.HiddenFieldPageStatePersister.Load()

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-05T14:05:07.813

您可以像这样获取当前请求的 URL 和页面：

```
void Application_Error(object sender, EventArgs e)
{
    // Code that runs when an unhandled error occurs
    if (HttpContext.Current != null)
    {
        var url = HttpContext.Current.Request.Url;
        var page = HttpContext.Current.Handler as System.Web.UI.Page;
    }
} 
```

# c# - 如果其他实例有此用户，则阻止用户打开表单

> ID：15835804
> 
> 赞同：0
> 
> 时间：2013-04-05T13:55:35.347
> 
> 标签：c#, winforms

我的 WinForm 应用程序必须根据登录的用户打开特定的表单。在登录表单中，用户身份验证完成，用户提供用户名-密码。有效凭据位于 .csv 文件中。如果用户是有效的，登录表单被隐藏并出现 Form2。

我想要做的是阻止打开应用程序（登录表单）并与已经运行此应用程序的人提供相同的用户名密码的用户。我当前的解决方案是向每个进程（实例）添加一个具有登录用户名的环境变量，如下所示：

```
Process proc = System.Diagnostics.Process.GetCurrentProcess();
proc.StartInfo.EnvironmentVariables.Add("G2GUser",username); 
```

当另一个实例打开时，检查尝试登录的用户是否已经在使用该应用程序。因此，正在检查此变量：

```
List<Process> processes =     System.Diagnostics.Process.GetProcessesByName(System.IO.Path.GetFileNameWithoutExtension(System.Reflection.Assembly.GetEntryAssembly().Location)).ToList();
foreach (Process proc in processes)
{
   StringDictionary sd = proc.StartInfo.EnvironmentVariables;
   if (!String.IsNullOrEmpty(sd["G2GUser"]))
      if (sd["G2GUser"] == username) {; //block this user}
} 
```

问题是我可以看到进程列表，但未存储 EnvironmentVariables。你能为这种方法提出另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:00:47.690

我不建议使用环境变量。

鉴于您可以拥有任意数量的应用程序实例，您需要维护某种形式的跟踪这些用户。

您可以通过使用进程间通信在应用程序之间进行通信，例如`Named pipes`：[Example named pipe IPC with read/write timeout](https://stackoverflow.com/questions/9536337/example-named-pipes-ipc-with-read-write-timeout)

然后通过在实例之间来回通信，您可以在它们之间做出决定。

# c# - C#中的合并排序算法

> ID：15835805
> 
> 赞同：2
> 
> 时间：2013-04-05T13:55:38.377
> 
> 标签：c#, algorithm, console, mergesort

我为合并类编写了以下代码：

```
class Merge
{

    public static void sort(IComparable[] a)
    {
        sort(a, 0, a.Length);
    }

    public static void sort(IComparable[] a, int low, int high)
    {
        int N = high - low;
        if (N <= 1)
            return;

        int mid = low + N / 2;

        sort(a, low, mid);
        sort(a, mid, high);

        IComparable[] aux = new IComparable[N];
        int i = low, j = mid;
        for (int k = 0; k < N; k++)
        {
            if (i == mid) aux[k] = a[j++];
            else if (j == high) aux[k] = a[i++];
            else if (a[j].CompareTo(a[i]) < 0) aux[k] = a[j++];
            else aux[k] = a[i++];
        }

        for (int k = 0; k < N; k++)
        {
            a[low + k] = aux[k];
        }
    }

    private static Boolean isSorted(IComparable[] a)
    {
        for (int i = 1; i < a.Length; i++)
            if (a[i].CompareTo(a[i - 1]) < 0) return false;
        return true;
    }

} 
```

下面的代码是实现。我认为下面的代码应该没有错！但它没有编译...

```
class Program
{
    static void Main(string[] args)
    {
    Merge ms = new Merge();

    Double[] MyArray = { 80,10,52,7,36,7,67,1,8,54 };
    Console.WriteLine("first array is: \n");
    for (int k = 0; k < MyArray.Length; k++)
    {
        Console.Write(MyArray[k]);
        if (k<9)
           Console.Write(" , ");
    }
    ms.sort(MyArray);  // Error is here. Does't compile !!!
    Console.WriteLine("\n");
    Console.WriteLine("\nsorted array is: \n ");
    for (int k = 0; k < MyArray.Length; k++)
    {
        Console.Write(MyArray[k]);
        if (k<9)
           Console.Write(" , ");
    }
    Console.ReadLine();
    }
} 
```

它不编译。错误在`ms.sort(MyArray);`. 我究竟做错了什么？请带我...

问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T14:03:13.247

这段代码有两个问题：

1.  签名不匹配，在这种情况下`IComparable[]`不直接兼容`double[]`
2.  不能`sort`直接通过实例调用方法

解决此问题的最少更改是使方法通用，并调用`Merge.sort`而不是`ms.sort`.

这是我将如何实施`sort`：

```
public static void sort<T>(T[] a)
    where T : IComparable<T>
{
    sort(a, 0, a.Length);
}

public static void sort<T>(T[] a, int low, int high)
    where T : IComparable<T>
{
    int N = high - low;
    if (N <= 1)
        return;

    int mid = low + N / 2;

    sort(a, low, mid);
    sort(a, mid, high);

    T[] aux = new T[N];
    int i = low, j = mid;
    for (int k = 0; k < N; k++)
    {
        if (i == mid) aux[k] = a[j++];
        else if (j == high) aux[k] = a[i++];
        else if (a[j].CompareTo(a[i]) < 0) aux[k] = a[j++];
        else aux[k] = a[i++];
    }

    for (int k = 0; k < N; k++)
    {
        a[low + k] = aux[k];
    }
} 
```

请注意，我改为使用`T`而不是`IComparable`，并添加了一个约束，说我们需要一个`T`实现`IComparable<T>`。

此外，从这里更改您的呼叫：

```
ms.sort(...); 
```

对此：

```
Merge.sort(...); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-29T11:52:36.440

```
 //merge sort recurcive

    public void MergeSort(int[] input,int startIndex,int endIndex)
    {
        int mid;

        if (endIndex > startIndex)
        {
            mid = (endIndex + startIndex) / 2;
            MergeSort(input, startIndex, mid);
            MergeSort(input, (mid + 1), endIndex);
            Merge(input, startIndex, (mid + 1), endIndex);
        }
    }

    public void Merge(int[] input, int left, int mid, int right)
    {
        //Merge procedure takes theta(n) time
        int[] temp = new int[input.Length];
        int i, leftEnd,lengthOfInput,tmpPos;
        leftEnd = mid - 1;
        tmpPos = left;
        lengthOfInput = right - left + 1;

        //selecting smaller element from left sorted array or right sorted array and placing them in temp array.
        while ((left <= leftEnd) && (mid <= right))
        {
            if (input[left] <= input[mid])
            {
                temp[tmpPos++] = input[left++];
            }
            else
            { 
                temp[tmpPos++]=input[mid++];
            }
        }
        //placing remaining element in temp from left sorted array
        while (left <= leftEnd)
        {
            temp[tmpPos++] = input[left++];
        }

        //placing remaining element in temp from right sorted array
        while (mid <= right)
        {
            temp[tmpPos++] = input[mid++];
        }

        //placing temp array to input
        for (i = 0; i < lengthOfInput;i++ )
        {
            input[right]=temp[right];
            right--;
        }
    }

     int[] input3 = { 22, 4, 6, 0, 9, 12, 156, 86,99};
     MergeSort(input3, 0, input3.Length - 1);
        for (int i = 0; i < input3.Length; i++)
            Console.Write(input3[i]+", ");
        Console.WriteLine(""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T13:58:30.493

你的`sort`方法是静态的，你不应该从你的类的实例中调用它。

你应该这样称呼它：

```
Merge.sort(MyArray); 
```

不是：

```
ms.sort(MyArray); 
```

实际上，由于您`Merge`的类没有实例方法，因此创建它的实例是没有意义的，您可能应该将整个类标记为静态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-15T05:46:31.107

一个简单的 C# 代码来做归并排序

```
using System;

namespace MergeSort
{
    class Program
    {
        static void Main(string[] args)
        {            
            int[] arInt = { 6, 4, 2, 8, 4, 8, 11, 1, 7, 4, 13, 5, 45, -1, 0, -7, 56, 10, 57 };
            var sortedIntAr = GenericMergeSort<int>.Sort(arInt);

            string[] arStr = { "Here", "Is", "A", "Cat", "Really", "Fast", "And", "Clever" };
            var sortedStrAr = GenericMergeSort<string>.Sort(arStr);

            Console.WriteLine(String.Join(',', sortedIntAr));
            Console.WriteLine(String.Join(',', sortedStrAr));

            Console.ReadLine();
        }

    }
    class GenericMergeSort<T> where T : IComparable
    {
        public static T[] Sort(T[] ar)
        {
            var arLen = ar.Length;
            if (arLen < 2)
                return ar;

            var arL = ar.AsSpan(0..(arLen / 2)).ToArray();
            var arR = ar.AsSpan((arLen / 2)..arLen).ToArray();

            arL = Sort(arL);
            arR = Sort(arR);

            return Merge(arL, arR);
        }

        private static T[] Merge(T[] arL, T[] arR)
        {
            var mergedArray = new T[arL.Length + arR.Length];
            int iM = 0, iL = 0, iR = 0;

            while (iL < arL.Length || iR < arR.Length)
            {
                mergedArray[iM++] = iL < arL.Length && (iR > arR.Length - 1 || arL[iL].CompareTo(arR[iR]) < 0)
                                    ? arL[iL++] : arR[iR++];
            }
            return mergedArray;
        }
    }
} 
```

这是输出

-7,-1,0,1,2,4,4,4,5,6,7,8,8,10,11,13,45,56,57

A,And,Cat​​,聪明,快速,Here,Is,真的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-01T10:34:48.190

```
public static int[] mergeSort(int[] ar)
{
    Func<int[], int[]> firstHalf = (array) =>
     {
         return array.Take((array.Length + 1) / 2).ToArray();
     };

    Func<int[], int[]> secondHalf = (array) =>
    {
        return array.Skip((array.Length + 1) / 2).ToArray();                
    };

    Func<int[], int[], int[]> mergeSortedArrays = (ar1, ar2) =>
    {
        int[] mergedArray = new int[ar1.Length + ar2.Length];

        int i1 = 0, i2 = 0, currentMin;

        while (i1 < ar1.Length || i2 < ar2.Length)
        {
            if (i1 < ar1.Length && i2 < ar2.Length)
            {
                if (ar1[i1] < ar2[i2])
                {
                    currentMin = ar1[i1];
                    i1++;
                }
                else
                {
                    currentMin = ar2[i2];
                    i2++;
                }
            }
            else if (i1 < ar1.Length)
            {
                currentMin = ar1[i1];
                i1++;
            }
            else
            {
                currentMin = ar2[i2];
                i2++;
            }
            mergedArray[i1 + i2 - 1] = currentMin;
        }
        return mergedArray;
    };

    int[] half1 = firstHalf(ar); //always /geq than half2
    int[] half2 = secondHalf(ar);

    if (half1.Length < 2)
        return mergeSortedArrays(half1, half2);
    else
        return mergeSortedArrays(mergeSort(half1), mergeSort(half2));

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-02T10:58:44.717

一个简单的 C# 归并排序。

```
using System.Collections.Generic;

namespace Sort
{
    public class MergeSort
    {
        public static List<int> mergeSort(List<int> list)
        {
            if (list.Count <= 1) return list;

            List<int> result;
            List<int> left = new List<int>();
            List<int> right = new List<int>();

            int midPoint = list.Count / 2;

            left.AddRange(list.GetRange(0, midPoint));
            right.AddRange(list.GetRange(midPoint, list.Count - midPoint));

            left = mergeSort(left);

            right = mergeSort(right);

            result = merge(left, right);
            return result;
        }

        //This method will be responsible for combining our two sorted arrays into one giant array
        public static List<int> merge(List<int> left, List<int> right)
        {
            List<int> result = new List<int>();

            int indexLeft = 0, indexRight = 0, indexResult = 0;
            while (indexLeft < left.Count || indexRight < right.Count)
            {
                //if both arrays have elements  
                if (indexLeft < left.Count && indexRight < right.Count)
                {
                    if (left[indexLeft] <= right[indexRight])
                    {
                        result.Add(left[indexLeft]);
                        indexLeft++;
                    }
                    else
                    {
                        result.Add(right[indexRight]);
                        indexRight++;
                    }
                }
                else if (indexLeft < left.Count)
                {
                    result.Add(left[indexLeft]);
                    indexLeft++;
                }
                else if (indexRight < right.Count)
                {
                    result.Add(right[indexRight]);
                    indexRight++;
                }
                indexResult++;
            }
            return result;
        }
    }
} 
```

# android - (Robotium) 操作栏向上/主页按钮单击

> ID：15835809
> 
> 赞同：4
> 
> 时间：2013-04-05T13:55:43.750
> 
> 标签：android, android-layout, robotium

我使用[**Robotium**](http://code.google.com/p/robotium/)作为我的 Android 应用程序的 Junit 测试库。我写了一些效果很好的测试。但是当我尝试为[原生 ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)的**Up/Home button click**编写测试时，它失败了。

我的测试代码很简单：

```
Solo solo = new Solo(getInstrumentation(), getActivity());
...
solo.clickOnActionBarHomeButton(); // I expected it will click the Up/Home button of ActionBar 
```

我希望上面的代码会单击本机 ActionBar 的 Up/Home 按钮，但它失败了，操作栏上什么也没有发生。为什么？？

**PS**我使用的是 Android 4.2.1 设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-18T08:40:09.187

我使用这个功能：

```
public void clickOnActionBarHomeButton(Solo solo) {
    View homeView = solo.getView(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? android.R.id.home : R.id.home);
    solo.clickOnView(homeView);
} 
```

也许这不是一个完美的决定，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-25T13:30:39.307

在我们的应用程序`Home`按钮中最终调用`NavUtils.navigateUpFromSameTask`. 使用时

```
solo.clickOnActionBarHomeButton(); 
```

单击`Home`按钮，它不起作用。但是，我注意到`solo.clickOnScreen`单击`Home`按钮可靠。所以我们用这个方法代替`solo.clickOnActionBarHomeButton`：

```
protected void clickOnHome() {
    solo.clickOnScreen(50, 50); //usually hits Home button
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T14:05:06.660

您可以使用以下代码单击 Up/Home 按钮（即活动中的第一个 ImageButton 元素）：

```
solo.clickOnImageButton(0);
instrumentation.waitForIdleSync(); 
```

# php - “或”的运算符优先级和赋值

> ID：15835817
> 
> 赞同：2
> 
> 时间：2013-04-05T13:56:04.443
> 
> 标签：php, operators, assignment-operator

今天发现了一些有趣的代码片段。简化后，它看起来像这样：

```
$var = null;

$var or $var = '123';

$var or $var = '312';

var_dump($var); 
```

问题是，据我所知，[分配的优先级高于`OR`](http://www.php.net/manual/en/language.operators.precedence.php)，因此，正如我假设的那样，`var_dump`应该输出`312`（第一个 - 分配，第二个 - 逻辑比较）。但结果是不同的，我得到`123`（首先 - 检查是否`$var`转换为`true`，其次 - 如果不是，分配值）。

问题是它是如何工作的？

`or`为什么和的行为相同`||`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:58:05.333

它与

```
$var = null;

if(!$var)$var = '123';
if(!$var)$var = '321';

var_dump($var); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T14:05:01.407

[您可以在逻辑运算符](http://www.php.net/manual/en/language.operators.logical.php)中查看有关此行为的示例

您还可以阅读有关[短路评估的文章](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

> 短路表达式`x Sand y`（使用 Sand 表示短路变体）等价于表达式等价于 的`if x then y else false;`条件`x Sor y`表达式`if x then true else y`。

在 php.ini 中。

```
return x() and y(); 
```

等于

```
if (x())
  return (bool)y();
else
  return false; 
```

* * *

```
return x() or y(); 
```

等于

```
if (x())
  return true;
else
  return (bool)y(); 
```

因此，交易不仅仅是优先的。

# entity-framework - 实体框架异常

> ID：15835820
> 
> 赞同：1
> 
> 时间：2013-04-05T13:56:14.893
> 
> 标签：entity-framework, exception, dbcontext, unit-of-work

我脑子里一直有这个想法，但我仍然找不到任何答案。我的 DbContext 由 UnitOfWork 类处理。所以我有一个地方发生了保存更改，我正在捕获所有这些讨厌的异常并在一个地方处理它们。

但是，众所周知，DbContext 有时会在 SaveChanges() 方法之外的其他地方引发其他类型的异常。例如在实体化实体时。但这可能发生在很多地方，有时在每个 FirstOrDefault() 或 ToList() 调用上编写 try catch 块并捕获并重新抛出异常是开销。有时，此异常可能是 SQL 类型，即无法打开连接、EntityCommandExecutionException 或其他异常。

所以我想知道当异常发生时 DbContext 对象是否会触发任何事件，所以我可以订阅该事件并在这些场景中处理一些逻辑。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:30:04.977

不，没有。并且永远不会，因为（至少）三个原因：

1.  异常可能是故意抛出的，但它们也可能只是发生在 EF 源代码中的某个地方并冒泡。在前一种情况下，他们*可以*触发一个事件，在后一种情况下则不能。所以你永远不会安全。

2.  应该如何触发事件？有几种方法可以引发事件。其中一个只是[重新扔进](https://stackoverflow.com/a/178464/861716)一个catch块。在 catch 块中触发一个`event`听起来*很*糟糕的做法。Catch 块应该包含安全、稳定的代码。如果在 catch 块中发生异常，事情会变得更糟。如果有人可以在我的 catch 块中连接任何类型的代码，我会感到非常糟糕。

3.  什么时候应该触发事件？*在 EF 程序集中可能会引发和*处理一些异常。您可能甚至都不想知道它们发生了。但在另一种情况下，同样的异常可能会冒泡。

# debugging - 带有dojo/when promise的Firebug控制台中未显示错误

> ID：15835825
> 
> 赞同：1
> 
> 时间：2013-04-05T13:56:24.950
> 
> 标签：debugging, dojo, console, promise

道场新手。我不明白为什么在**dojo/when**函数的已解析承诺处理程序中发生js 错误时没有**写入**firebug 控制台。使用同步代码，会写入错误。但是，当错误发生时，Firebug 脚本视图中会显示错误行。我正在使用 Dojo 1.8 FF 19.0 和 Firebug 1.11.2。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:21:43.993

代码中的某处必须有一个 try catch 块，以防止 dojo/何时抛出错误。

您可以通过自己添加 try catch 块来添加该功能，请查看此 jsfiddle：

[http://jsfiddle.net/kYMKF/1/](http://jsfiddle.net/kYMKF/1/)

```
 try{
        should.bombAndLogAnErrorInFirebug(); //this does not log an error in Firebug! Why?
    } catch(e) {
            alert("error");
        } 
```**

# php - Laravel 不将“索引”识别为默认操作

> ID：15835829
> 
> 赞同：1
> 
> 时间：2013-04-05T13:56:34.033
> 
> 标签：php, laravel, laravel-3

当我转到[http://example.com/clients](http://example.com/clients)时，Laravel 响应 404 Error ，但是当我转到[http://example.com/clients/index](http://example.com/clients/index)时，Laravel 呈现正确的视图并运行索引操作。

我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
     RewriteEngine on
     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我的控制器：

```
<?php

class Clients_Controller extends Base_Controller 
{

     public function action_index()
    {
            return View::make('clients.clients');
    }

} 
```

我的路线.php

```
Route::controller(Controller::detect(),'home.index'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:09:25.967

我删除了 ：

```
Route::controller(Controller::detect(),'home.index'); 
```

并将其替换为：

```
Route::controller('clients'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:47:50.543

要映射所有控制器和操作，您必须删除“home.index”。

```
Route::controller(Controller::detect()); 
```

# javascript - 我想要按顺序排列的元素 (1,2,3) (6,7) (10,11) (15,16,17)。分别地

> ID：15835832
> 
> 赞同：-2
> 
> 时间：2013-04-05T13:56:42.540
> 
> 标签：javascript, jquery

我有以下数组：`arrtooth`

```
var arrtooth = tooth.split('|'); 
```

它获得了价值

```
arrtooth=[1,2,3,6,7,10,11,15,16,17]; 
```

我想要按顺序排列的元素`(1,2,3) (6,7) (10,11) (15,16,17)`。分开。我的代码在 Jquery 中。我只想要实际的逻辑。

如果我在一个数组中得到 3 2 2 3 的输出，那会很好，或者如果你有任何可以详细说明序列的东西（输出）就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:15:28.817

```
var arrtooth = [1, 2, 3, 6, 7, 10, 11, 15, 16, 17];
var last = arrtooth[0];
var result = [];
count = 1;
for (var i = 1; i < arrtooth.length; i++) {
    if (arrtooth[i] == (last + 1)) {
        count++;

    } else {
        result.push(count);
        count = 1;
    }
    last = arrtooth[i];
}
result.push(count); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/xjVPq/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:13:14.770

```
var arrtooth=[1,2,3,6,7,10,11,15,16,17];

var a = arrtooth.reduce(function(result, cur,index, array){
     if( index == 0 || array[index-1] + 1 !== cur ){
        result.push(0);
     }
     result[ result.length-1 ]++;
     return result;
},[]);

console.log(a);   //[3,2,2,3]; 
```

[演示](http://jsfiddle.net/6QG6f/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:13:27.950

假设数组包含以其他方式排序的整数，以下两个函数将为您提供您所追求的连续子集。第一个产生一个字符串输出，第二个产生一个二维数组。

```
var arrtooth = [1, 2, 3, 6, 7, 10, 11, 15, 16, 17];

function stringOutput(arrtooth) {
    var outputString = '(';
    for (var i = 0; i < arrtooth.length; i++) {
        if (i === 0) outputString += arrtooth[i];
        else if (arrtooth[i] - 1 == arrtooth[i - 1]) outputString += ',' + arrtooth[i];
        else outputString += ') (' + arrtooth[i];
    }
    outputString += ')';
    return outputString;
}

function arrayOutput(arrtooth) {
    var outputArray = [],
        toothArray = [];
    for (var i = 0; i < arrtooth.length; i++) {
        if (i === 0 || arrtooth[i] - 1 != arrtooth[i - 1]) {
            toothArray = [];
            outputArray.push(toothArray);
        }
        toothArray.push(arrtooth[i]);
    }
    return outputArray;
} 
```

[jsFiddle 演示](http://jsfiddle.net/DSUeZ/)

# javascript - 删除评论

> ID：15835835
> 
> 赞同：-1
> 
> 时间：2013-04-05T13:56:50.390
> 
> 标签：javascript, mysql

我将评论存储在mysql中，每个评论都带有评论ID（自动递增），当我检索它们并向用户显示时，我将每个评论comment_id存储在隐藏的输入中......所以当用户想要删除我需要的评论时要获得评论的 id，如果某些正文只是通过 javascript 编辑更改值怎么办？并将其发送到服务器..其他评论可能会被删除...因为 commnet_id 是自动递增的值，它们就像...1,2.3 ....我想..它通常是如何完成的..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:59:15.367

您只需验证登录用户是否有权在后端删除给定评论。如果您授予用户执行此操作的权限，那么他如何发送执行此请求的方式并不重要。

例如，如果只允许用户删除自己的评论，则在执行`DELETE`查询之前检查commenter_id 是否与登录用户的id 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:05:41.720

不要忘记控制访问权限。

通常只有作者或管理员\版主可以删除。

您也可以只更新评论集 is_deleted=1 where comment_id='$comment_id'

如果站点版主不是站点管理员，则很有用。网站管理员可以控制版主

# java - READ_WRITE 对象的 Ehcache 永恒属性用法

> ID：15835836
> 
> 赞同：1
> 
> 时间：2013-04-05T13:56:50.733
> 
> 标签：java, hibernate, ehcache

我在我的项目中将 Ehcache 设置为 Hibernate 的二级缓存。所有对象都将通过 Hibernate 进行更新，并具有 CacheConcurrencyStrategy.READ_WRITE 的缓存策略。在我看来，缓存中不应该有过时的数据，因为如果发生更新，该对象将从缓存中删除。在应用程序之外不会发生对数据库的更新。

我的问题是，在定义缓存时，将永恒属性设置为 true 是否有意义。我想不出对象应该从缓存中过期的任何原因，因此倾向于将永恒设置为真。我是否误解了 Ehcache 的行为方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:13:32.193

我认为这取决于几件事。

你的实体有多“长寿”？如果您处理永远不会删除的实体，它们将永远存在于您的缓存中，占用内存。如果它们只被处理一次——与频繁访问相比，这是没有意义的。

你的缓存有多大？它们是否溢出到磁盘？您使用哪种内存驱逐策略？
我假设您限制了缓存大小，因此将更多元素放入缓存中会导致驱逐发生，因此您需要考虑适当的驱逐策略；因为这里的错误选择可能会导致缓存未命中，否则可以避免。它还可能导致您最想避免的磁盘 I/O（取决于您的配置）。

作为积极的指标，您可以使用永久缓存

*   如果要缓存的对象数量相对较少并且不会超过缓存大小
*   您定期（例如每天）定期重新启动您的应用程序（并清除缓存），这样缓存大小无论如何都不会受到影响
*   如果经常访问相同的对象，因此您可以有意义地使用 LRU 或 LFU 驱逐策略

请注意，这些或多或少是经验法则；具体情况可能需要具体评估；）

# entity-framework - 如何正确更新实体列表？

> ID：15835839
> 
> 赞同：1
> 
> 时间：2013-04-05T13:56:56.733
> 
> 标签：entity-framework

我想使用 EF4 更新实体列表。

1.  我有一个 ViewModel 对象（从 Web 表单中检索）传递给我的名为“ **productToUpdate** ”的方法，其中包含一个“标签”列表。
2.  我使用 Linq 查询从数据库中获取对应的对象列表到一个名为“ **requeteValsLabels** ”的匿名对象我手动执行此操作（在 foreach 循环中测试 id）如下，但我想这不是最好的方法?

    ```
    for (int i = 0; i < productToUpdate.Labels.Count; i++)
            {
                foreach (var item in productToUpdate.Labels)
                {
                    if (requeteValsLabels[i].ID == item.IdValeurLabel){
                    requeteValsLabels[i].Valeur = item.Valeur;
                    }
                }
            } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:10:19.843

您可能想要使用以下模式

```
 foreach (var item in productToUpdate.Labels) {
            Entity e = new Entity { Id = item.IdValeurLabel};
            context.EntitySet.Attach(e);
            e.Valeur = item.Valeur;
        } 
```

这可以防止加载（选择）到数据库，但是：

*   由于没有负载发生，您无法确定该 ID 是否存在于数据库中，因此您可能有~~插入~~尝试更新不存在的行的异常。
*   由于没有负载发生，您无法检查标签修改，并且可能会使用相同的值进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:08:47.830

我认为更有效的方法是加入集合，然后复制值：

```
var query = from item in productToUpdate.Labels
            join label in requeteValsLabels on item.IdValeurLabel equals label.ID
            select new { item, label };

foreach (var pair in query.ToList())
{
    pair.label.Valuer = pair.item.Valuer;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:20:50.720

你的外循环正确吗？应该是

```
for (int i = 0; i < requeteValsLabels.Count; i++) 
```

您是否正在寻找一种更紧凑的方式来编写此内容？尝试以下操作：

```
for (int i = 0; i < requeteValsLabels.Count; i++)
{
    requeteValsLabels[i].Valeur = productToUpdate.Labels
        .First(x => x.IdValeurLabel == requeteValsLabels[i].ID).Valeur;
} 
```

不过要小心.. 如果没有满足条件的元素，First() 将抛出异常。

# bash - 使用 wget “签出” svn 存储库

> ID：15835840
> 
> 赞同：4
> 
> 时间：2013-04-05T13:56:58.753
> 
> 标签：bash, svn, wget

我有一个布局非常糟糕的 svn 存储库，我没有重新构建的权限。在存储库根目录的不同深度，有几个子项目分布在存储库中。我希望能够检查所有的树干（但不是任何分支或标签文件夹），无论它们处于什么深度。我认为这将是 wget 解决的一个好问题。我最初使用 wget 看起来像这样：

```
wget -r -X 'tags' -I "base/of/repo" "http://www.urlrepo.com/" 
```

运行此命令时遇到的一些问题：

1.  即使我认为 -X 标志应该排除它们，Wget 仍然抓住了标签文件夹
2.  下载的文件放在文件夹“base/of/repo”中，这并不可怕，但最好不要保存到这个路径

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:24:11.273

您可以使用稀疏结帐 递归`bash`地执行此操作。`svn`

就像是：

```
svn co --depth immediates svn://repo/trunk 
```

然后在每个子文件夹上，如果它是“标签”：

```
svn up --set-depth empty tags 
```

别的：

```
svn up --set-depth infinity dirName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:25:10.650

尽管它*可能有效*，但它依赖于一些不能 100% 保证的东西：当您使用 httpd 作为您的 Subversion 存储库服务器时，您可以使用浏览器。

您可以通过使用`--depth`参数 on`svn co`和`--set-depth`参数 when doing来限制结帐`svn update`。这将允许您只签出您想要的那些文件夹和目录，而无需拉下所有内容。这有时被称为*稀疏结帐*。作为奖励，这是一个实际的结帐。你可以做提交——有些事情`wget`不会让你做：

```
$ # I want to just checkout the immediate files under the URL:
$ svn co --set-depth=immediates $REPO/trunk/foo
A foo/first
A foo/second
A foo/third
# I want to checkout everything in first and third, but nothing in second:
$ cd foo
$ svn up --set-depth=none second #Removes directory second
$ svn up --set-depth=infinity first third 
```

使用它应该适用于您的原始示例：

```
$ svn co --depth=none http://www.urlrepo.com/ workdir
$ cd workdir
$ svn up --set-depth=none base
$ cd base
$ svn up --set-depth=none of
$ cd of
$ svn up --set-depth=infinity repo 
```

# c++ - 在 C++ 中调用不存在的构造函数

> ID：15835845
> 
> 赞同：3
> 
> 时间：2013-04-05T13:57:16.913
> 
> 标签：c++, type-conversion

假设我们有一个 String 类：

```
class String {
   public: 
   String (int n);
   String(const char *p);
} 
```

如果我们尝试会发生什么：

```
String mystring='x'; 
```

[这里](https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-in-c-mean)写到 char 'x' 将被转换为 int 并调用 String(int) 构造函数。但是，我不明白。

首先，如何将'x'转换为int？我可以想象它`"3"`会被转换成`3`但是“x”会被转换成什么？其次，我们在类中有两个构造函数。第一个构造函数接受一个 int 类型的参数，另一个构造函数接受一个指向 char 变量的指针作为参数。现在我们尝试调用不存在的以 char 作为参数的构造函数。那么，我们将 char 转换为整数，但是为什么我们不尝试将 char 转换为指向 char 的指针，然后使用第二个构造函数呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T13:58:37.257

> 首先，如何将'x'转换为int？我可以想象“3”将转换为 3，但“x”将转换为什么？

不要犯混淆`'x'`和的错误`"x"`。

*   `"x"`是一个字符串文字，你是对的，尝试将它转换为`int`;是没有意义的
*   `'x'`是一个*字符*文字，它基本上已经是一个数字（等于*基本源字符集中*`x`字符映射到的任何底层值；对于 ASCII，这是）；将其转换为整数是微不足道的。*`120`*

 *> 那么，我们将 char 转换为整数，但是为什么我们不尝试将 char 转换为指向 char 的指针，然后使用第二个构造函数呢？

C++ 中有一些规则来管理“最佳匹配”。在这种情况下，它是`int`过载。在两者相等匹配的情况下，您的编译器将显示“模棱两可的重载”错误，并且您将被迫`'x'` *显式*转换（即手动，使用强制转换）以指示您想要的。

在您的情况下，这不是问题，因为非指针实际上*无法*转换为指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T14:05:08.903

`char`是一个整数类型，并且 的任何值都`char`可以用更大的整数类型来表示，例如`int`或`unsigned int`。'3' 通常也不会转换为 3。在 ASCII 中，字符“3”的值为 48，依此类推，任何使用 ASCII（大多数）的系统都是您得到的值。

不使用指针构造函数是因为 C++ 不允许从`char`指针类型隐式转换。构造`int`函数是唯一可行的选项，因此被选中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:05:36.737

字符`x`将转换为整数 120，如您[在此处](http://www.asciitable.com)看到的。另外，回想一下，没有从类型到指针的转换，或者在一种类型的指针到另一种类型的指针之间的转换，如果您认为 bout 指针算术是如何工作的，这很明显。

~~您不能将类型转换为指针，因为这需要分配内存，并且您必须对编译器显式执行此操作（它不会自动执行此操作）~~。

所以，基本上编译器正在将 a 转换`char`为 an，`int`因为这是它唯一能做的事情。如果函数调用不明确，编译器应该会抱怨（但它可能取决于编译器，我不确定）。*

# asp.net - 登录控制：WebForms UnobtrusiveValidationMode 需要 'jquery' 的 ScriptResourceMapping。添加一个名为 jquery 的 ScriptResourceMapping

> ID：15835846
> 
> 赞同：2
> 
> 时间：2013-04-05T13:57:17.303
> 
> 标签：asp.net, login

我在 asp.net 中的一个网站上工作。我有一个没有任何控制的网络表单。当我向此表单添加登录控件并在浏览器中查看此表单时，显示错误：

> WebForms UnobtrusiveValidationMode 需要 'jquery' 的 ScriptResourceMapping。请添加一个名为 jquery（区分大小写）的 ScriptResourceMapping。

我读了这个解决方案：http:
[//www.codeproject.com/Articles/465613/WebForms-UnobtrusiveValidationMode-requires-a](http://www.codeproject.com/Articles/465613/WebForms-UnobtrusiveValidationMode-requires-a)

但我没有找到`Global.asax`

请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:00:00.810

`web.config`您可以通过将以下键值更改为如下方式来禁用此新功能`none`：

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="None" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T12:22:23.290

我添加了下面的代码，`web.config`然后我的问题就解决了。

```
<appSettings>  
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
</appSettings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T07:31:52.673

启动 .Net 4.5`Unobtrusive Validation`默认启用...

因此一种解决方案是在`web.config`文件中将 UnobtrusiveValidationMode 设置为 none

```
<configuration>
   ...
   <appSettings>  
      <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
   </appSettings>
   ...
</configuration> 
```

[在这里](http://www.codingfusion.com/Post/WebForms-UnobtrusiveValidationMode-requires-a-Scri)和[这里](http://www.codeproject.com/Articles/287278/Unobtrusive-Validation-with-ASP-NET-4-5)你可以得到一些关于不显眼验证的信息......

# c - 尽管我将环境设置为 UTF8，但为什么不打印这些 Unicode 字符？

> ID：15835849
> 
> 赞同：1
> 
> 时间：2013-04-05T13:57:35.120
> 
> 标签：c, linux, unicode

如何打印一些 Unicode 字符？虽然我设置了 UTF-8 编码，但我无法打印它。我在连续的字节流中将 Unicode 字符以十六进制表示为 (c2 82 c2 81 c2 80 0)。但是当我试图通过在开头指向一个字符指针来打印它的 Unicode 字符时，它并没有打印出来。为什么？

```
 char s[]={0xc2,0x82,0xc2,0x81,0xc2,0x80,0x00};
   printf("%s",s); 
```

在 Linux 环境中使用 C。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:27:51.000

即使您的终端配置为使用 UTF-8，您也不会看到太多，因为您正在“显示”的字符是：

```
0xC2 0x82 = U+0082
0xC2 0x81 = U+0081
0xC2 0x80 = U+0080 
```

这些是 C1 集中的控制字符。我有一个数据文件，其中记录：

```
# C1 Controls (0x80 - 0x9F) are from ISO/IEC 6429:1992
# It does not define names for 80, 81, or 99.

80 U+0080
81 U+0081
82 U+0082 BPH BREAK PERMITTED HERE 
```

所以你看不到任何东西，因为你没有显示任何图形字符。例如，如果您将 0x82 更改为 0xA2（将 0x81 更改为 0xA1，将 0x80 更改为 0xA0），那么您将更有可能获得一些可见的输出：

```
0xC2 0xA2 = U+00A2
0xC2 0xA1 = U+00A1
0xC2 0xA0 = U+00A0

A0 U+00A0 NO-BREAK SPACE
A1 U+00A1 INVERTED EXCLAMATION MARK
A2 U+00A2 CENT SIGN

$ ./x
¢¡ 
$ 
```

如果你真的很好，你可以看到倒惊叹号后面的不间断空格…

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:14:11.530

`0xc282c281c280`是一个整数。你想用一个序列初始化数组：`char s[] = { 0xc2, 0x82, 0xc2, 0x81, 0xc2, 0x80, 0x00 };`

# php - PHP表单编码没有响应

> ID：15835852
> 
> 赞同：0
> 
> 时间：2013-04-05T13:57:42.517
> 
> 标签：php

我在我的页面中使用了 php 代码，但它在 localhost 中不起作用，在我给出的文本框和选择框中显示了未定义的变量，如下所示：

```
$propertyid = ereg_replace("[^A-Za-z0-9-]", "", $_POST['propertyid']); 
$propertyname = ereg_replace("[^A-Za-z0-9]", "", $_POST['propertyname']); 
$propertytype = ereg_replace("[^A-Z a-z0-9]", "", $_POST['propertytype']); 
$propertydealtype = ereg_replace("[^A-Z a-z0-9]", "", $_POST['propertydealtype']);
$propertystreet = ereg_replace("[^A-Z a-z0-9]", "", $_POST['propertystreet']);

<td width="249" align="left" valign="middle">PropertyID:</td>
  <td width="739"><input name="propertyid" type="text" value="<?php echo "$propertyid"; ?>" /></td>
</tr>
    <tr>
  <td width="249" align="left" valign="middle">PropertyName:</td>
  <td width="739"><input name="propertyname" type="text" value="<?php echo "$propertyname"; ?>" /></td>
</tr>
<tr>
  <td align="left" valign="middle">Property Type:</td>
  <td><select name="propertytype">
  <option value="<?php echo "$propertytype"; ?>"><?php echo "$propertytype"; ?></option>
  <option value="Appartment/Fla">Appartment/Flat</option>
  <option value="Farm House">Farm House</option>
  <option value="Guest House">Guest House</option>
  <option value="Lord">Lord</option>
  <option value="Hostel">Hostel</option>
  </select></td>
</tr>
    <tr>
  <td align="left" valign="middle">Deal Type:</td>
  <td><select name="propertydealtype">
    <option value="<?php echo "$propertydealtype"; ?>"><?php echo "$propertydealtype"; ?></option>
    <option value="For Sale">For Sale</option>
    <option value="For Rent">For Rent</option>
    <option value="For Lease">For Lease</option>
    <option value="Ejara">Ejara</option>
    <option value="Sar Qulfi">Sar Qulfi</option>
  </select></td>

<tr>
  <td align="left" valign="middle">Property Streeet:</td>
  <td><input name="propertystreet" type="text" value="<?php echo "$propertystreet"; ?>" /></td>
</tr> 
```

每当我在本地主机中执行时，每个盒子里面都会收到盒子里面的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:00:45.203

我不确定 ereg_replace 是如何工作的，但首先它已被弃用，其次 - 我认为表达式之间不能有空格 => "[^AZ a-z0-9]" 应该是 "[^A-Za -z0-9]"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:44:34.327

在回声期间，变量不需要用引号引起来。所以最好是这样：

```
 <?php echo $propertytype; ?>. 
```

未定义的变量错误意味着可能 $_POST 未定义。但在这种情况下，您也应该在那里得到错误。

来自关于函数 ereg_replace 的 php 页面：从 PHP 5.3.0 开始，该函数已被弃用。强烈建议不要依赖此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:10:11.863

您的`input`标签应该在`form`标签内...您的`form`标签在哪里？ `$_POST`从一个检索您的输入数据`form`

# python - 通过两个 Pandas DataFrames 的高效循环

> ID：15835858
> 
> 赞同：0
> 
> 时间：2013-04-05T13:58:02.437
> 
> 标签：python, pandas

我有两个熊猫数据框：

第一帧包含一个时间戳（日期 + 时间）和四组纬度/经度对，它们定义了地球上一个盒子的角。

第二帧包含一个时间戳和一个标记事件的纬度/经度对。

我想知道，对于每个事件，它是否落在任何“地球上的盒子”内，如果是，哪些是时间戳之间的 delta_t。

我能想到的唯一方法是逐行遍历第二帧，并与第一帧进行比较。我希望有一种更蟒蛇的方式，但什么都没有想到。有任何想法吗？

谢谢，

上海

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:25:51.833

这是一个类似的问题：[Iteration through a pandas dataframe](https://stackoverflow.com/questions/15683588/iterating-through-a-pandas-dataframe)

我认为这会奏效。伪鳕鱼。您将需要 0.11-dev

两个框架都有一个日期时间索引，A 是你的第一个，B 短得多，因为它只有你的事件。

在 A 上，将索引设置为列，`A['date'] = A.index`

在 B 上，将索引设置为列，`B['date'] = B.index`

内连接 A 和 B，然后填充 B

```
C = A.join(B).ffill() 
```

然后，如果包含您的事件，则需要一些布尔逻辑，例如：

```
C['is_included'] = (C['A_lat'] > C['B_lat']) & (C['A_long'] > C['B_long'])...etc 
```

因此，当 is_included 为 True 时，您需要差分时间，但与前一个事件不同

在B的原始日期列上将未选择的事件设置为nan

```
C['date_B'][~C['is_included']] = np.nan 
```

再次向前填充 date_B

```
C['date_B'] = C['date_B'].ffill() 
```

如果你现在从 date_A 中减去 date_B 我想你会有你的 timedelta

```
C['delta'] = C['date_B']-C['date_A'] 
```

然后

```
C[C['is_included']] is your answer, and delta is the timedelta 
```

# php - 使用 Zend 框架忽略文件上传的空实例？文件因此无法上传

> ID：15835860
> 
> 赞同：1
> 
> 时间：2013-04-05T13:58:10.993
> 
> 标签：php, javascript, jquery, zend-framework, file-upload

我正在尝试在 ZF1 中上传几个文件

有两种上传方式；音频或图像。当我尝试上传图像时，只有 file_audio 的空实例出现问题。

这是我的打印 $_FILES

```
Array
(
    [image_file] => Array
        (
            [name] => boss.jpg
            [type] => image/jpeg
            [tmp_name] => C:\WINDOWS\Temp\phpA01.tmp
            [error] => 0
            [size] => 37246
            [options] => Array
                (
                    [ignoreNoFile] => 
                    [useByteString] => 1
                    [magicFile] => 
                    [detectInfos] => 1
                )

            [validated] => 
            [received] => 
            [filtered] => 
            [validators] => Array
                (
                    [0] => Zend_Validate_File_Upload
                )

        )

    [audio_file] => Array
        (
            [name] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 
            [options] => Array
                (
                    [ignoreNoFile] => 
                    [useByteString] => 1
                    [magicFile] => 
                    [detectInfos] => 1
                )

            [validated] => 
            [received] => 
            [filtered] => 
            [validators] => Array
                (
                    [0] => Zend_Validate_File_Upload
                )
        )
) 
```

这是我的 Zend 代码，它仅在选择两个文件时才有效

```
if (! empty ( $post ['type'] )) {

    $adapter = new Zend_File_Transfer ();

//  echo "<pre>"; print_r($_FILES);   "</pre>"; exit;

    if ($post ['type'] == 'Image' && ! empty ( $_FILES ['image_file'] ['name'] )) {

        $files = $adapter->getFileInfo();

        echo "<pre>"; print_r($files);   "</pre>"; exit;
        $files = $adapter->getFileInfo();

        $files_path = $config->topic_images->path; 

        // Limit the MIME type of all given files to gif and jpeg images
//      $adapter->addValidator ( 'MimeType', false, array ('image/jpeg', 'image/png', 'image/jpg' ) );

//      $adapter->addValidator ( 'Extension', false, 'png,jpeg,jpg' );

//      $adapter->addValidator ( 'FilesSize', false, array ('min' => '1kB', 'max' => '5MB' ) );

//      $adapter->addValidator ( 'ImageSize', false, array ('minwidth' => 0, 'maxwidth' => 800, 'minheight' => 0, 'maxheight' => 800 ) );

// Limit the size of a image to a height of 100-200 and a width of 40-80 pixel

    }elseif($post ['type'] == 'Audio' && ! empty ( $_FILES ['audio_file'] ['name'] )) {

        $files_path = $config->topic_audio->path;

    }elseif($post ['type'] == 'Video' && ! empty ( $post ['video_file'] )) {

    }

$files = $adapter->getFileInfo ();

$file_name = null;
$tmpArr = null;

$fname = null;
$fext = null;

        foreach ( $files['image_file'] as $file => $info ) {
    if (! empty ( $info ['name'] )) {
        $fname = substr ( $info ['name'], 0, strrpos ( $info ['name'], "." ) );
        $fext = substr ( $info ['name'], strrpos ( $info ['name'], "." ) );
    }
}

    if (! empty ( $fname )) {

    $file_name = $fname . "-" . $post ['topic_id'] . $fext;

    $horrible_chars = array ("~", "@", "#", "$", "%", "^", "&", "*", "(", ")", " " );
echo     $cleanfilename = str_replace ( $horrible_chars, "", $file_name );

    $adapter->setDestination ( $files_path );

//  $adapter->addFilter ( 'Rename', array ('target' => $files_path . DS . $cleanfilename, 'overwrite' => true ) );

    if ($adapter->receive ()) {

    //  echo "xxx"; exit;

        $post ['filename'] = $cleanfilename;
        $result = $TopicModel->updateTopicassociation ( $post );
        $old_file = $files_path . DS . $post ['existing_file'];

        if (file_exists ( $old_file )) {
            if ($file_name != $post ['existing_file']) {
                @unlink ( $old_file );
            }
        }

        $this->_flashMessenger->addMessage ( 'Topic '.$post['type'].'added successfully' );
    } else {

    $errors = $adapter->getErrors();
    print_r($errors); exit;

        $post ['filename'] = null;
        $res_delete = $TopicModel->updateTopicassociation ( $post ['topic_id'] );
        $this->_flashMessenger->addMessage ( 'Error(s) encountered. File Association not updated.' );
    }
}

//    else {
//      if (! empty ( $post ['chkDelete'] ) && $post ['chkDelete'] == 1) {
//          $post ['filename'] = null;
//          $result = $jobModel->updateJobLogo ( $post );
//          $old_file = $files_path . DS . $post ['c_image_name'];
//          
//          if (file_exists ( $old_file )) {
//              @unlink ( $old_file );
//          }
//      }
//    }
} 
```

我一整天都在尝试只上传图像或音频文件。有谁知道问题可能是什么？

**使用表单输入** baseUrl() 更新。“/”。$this->模块名；?>/主题/动作）；?>">

```
 <input type="file" id="image_file" name="image_file">
    </form>

   <input type="text" name="video_file"  size="50" id="video_file" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:58:28.537

尝试将该`ignoreNoFile`选项设置为 true，这样如果没有文件，适配器将不会抛出一个 fit：

```
$adapter = new Zend_File_Transfer ('HTTP', false, array('ignoreNoFile'=>true)); 
```

或者

```
$adapter = new Zend_File_Transfer ();
$adapter->setOptions(array('ignoreNoFile'=>true)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:44:58.427

我用jquery解决了

因为我提供了上传音频、视频和图像的选项

我刚刚检查了提交按钮下拉列表中的值并删除了文件上传的空实例

因为zend遇到了问题。

我在下面使用了这个非常简单的代码。

```
$('#cmdSubmit').click(
        function(){

var selection = $("#type").val(); 

     if( selection == 'Image'){
         $('#videomodule').remove();
         $('#audiomodule').remove();

      }else if(selection == 'Audio'){
          $('#imagemodule').remove();
          $('#videomodule').remove();

      }else if(selection == 'Video'){
          $('#imagemodule').remove();
          $('#audiomodule').remove();

      }else{
          $('#imagemodule').remove();
          $('#videomodule').remove();
          $('#audiomodule').remove();
      }

        }); 
```

它现在解决了我的问题，其他人可以试一试或尝试上面的 rockfors 答案。

# c++ - C++老师告诉我不要使用指针

> ID：15835861
> 
> 赞同：3
> 
> 时间：2013-04-05T13:58:15.250
> 
> 标签：c++, pointers

昨天我的老师告诉我不要使用指针，除非我想编写一些非常低级的东西。他说垃圾收集器会为我做所有事情，所以指针基本上是低效且危险的。我很生气，因为我以前听到过不同之处。

那么什么是对的，什么是错的呢？我应该使用指针吗？如果没有，如果没有人使用它们，为什么还要实施？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T14:03:57.063

将垃圾收集器与 C++ 一起使用需要严格的纪律和非常称职的程序员，即使在 C++11 中增加了对垃圾收集的支持。

所以可能你的老师有别的*意思。*

就像，他/她可能意味着您应该优先使用标准库容器（例如`vector`和`string`）和智能指针来处理必须处理指针的所有权。这是个好建议。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T14:30:46.370

您的老师所说的属于“几乎正确”的类别。这可能意味着两件事之一：

1.  他不知道自己在说什么，只是在重复流行语
2.  他的意思是正确的，但在某处存在沟通错误。

我强烈倾向于选项（2）（尽管无知的老师并非闻所未闻）：

*正如其他人所说，C++ 通常不附带 GC，虽然在 C++ 中完全可以使用 GC，但使用 GC 进行教学*更加不传统。

另一方面，你的老师关于避免指针**是正确的。**C++ 标准化委员会的成员、本网站的用户以及 Internet 上的其他专家一致认为，现代 C++ 在很大程度上没有必要使用原始指针（尤其是手动内存管理）。

传统上，大多数 C++ 项目都充满了指针。但是原始指针和手动内存管理容易出错，可能效率低下（由于引入了间接和缓存未命中），最重要的是，[它们在现代 C++ 中是**不必要**](http://klmr.me/slides/modern-cpp/#1)的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T14:02:14.580

如果你真的想成为一名优秀的 C 或 C++ 程序员，你需要学习和使用指针。事实上，这是一个非常强大的功能，可能有风险，是的，但它们对于完成某种任务是绝对必要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T14:19:43.980

如果您是初学者，您的老师是对的，但如果您变得更高级，您总有一天会使用指针，因为它使您的程序非常快。

关键是您可以很容易地使用具有不良后果的指针（例如使您的程序崩溃）犯错。

指针还有其他优点，例如，如果您将原始对象存储在 Vector 中并编辑该向量，则每次都需要遍历该向量以找到要搜索的元素（慢），或者将指向对象的指针存储在该向量并使用指向该对象本身的指针（快速）。

还有不计其数的其他例子，其中指针规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T14:00:37.073

为什么要使用托管 C++？这似乎适得其反，至少在我看来。如果我要为 gc 支付开销，我将只使用 C#。

关于指针，它们很棒，永远不应被忽视。但是，引用同样有用，您不必进行空检查。

根据您的编译器查看 std::shared_ptr / std::weak_ptr / std::unique_ptr。

他们介绍了可以在大多数书籍/语言中找到的基本保留计数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T16:52:25.130

您可以在不使用指针的情况下用 C++ 编写程序。通过引用传递对象要安全得多。

许多容器将需要复制对象，因为您不允许将指针放入容器中。当使用大型数据项或项的许多索引时，这可能是一个问题。

# php - 类别和子类别中的 OnChangeEvent

> ID：15835864
> 
> 赞同：0
> 
> 时间：2013-04-05T13:58:23.460
> 
> 标签：php, javascript, html, forms

我是 php 新手。我在选择选项中的 onchange 事件中遇到问题...如果我更改类别，则整个表单将被提交，而不是更改类别 1 的值。

中的 onchange 事件中的问题`onchange="myform.submit()"`。

```
<form name="myform" method="POST" action="getsearch.php"> 
        <table style=" border:1px solid silver" cellpadding="10px" cellspacing="0px" align="center"> 
            <tr> 
                <td colspan="3" style="background:#0066FF; color:#FFFFFF; font-size:20px">Search</td>
            </tr> 

            <tr>
            <td>Name</td> 
                <td><input type="text" name="name" size="40" /></td>
            </tr>
            <tr>
            <td>Email</td> 
                <td><input type="text" name="email" size="40" /></td>
            </tr>
            <tr>
            <td>Phone</td> 
                <td><input type="text" name="phone" size="40" /></td>
            </tr>

            <tr> 
                <td>categories</td> 
                <td><select name="first" onchange="myform.submit()">
                    <option value="">select the category</option>
                    <?php 
                            $sql="select *from first_category";
                            $res=mysql_query($sql);
                            echo $res;
                            if(mysql_num_rows($res)>0)
                            {
                                    while($row=mysql_fetch_assoc($res))
                                    {
                                        if(isset($_POST["first"]) AND $_POST["first"]==$row["first_id"])
                                        $select ="selected='selected'";
                                        else
                                        $select='';
                                        echo '<option value="'.$row["first_id"].'" '.$select.'>'.$row["category_name"].'</option>';
                                    }

                                    }
                        ?>
                </select></td> 

            </tr> 
            <tr> 
                <td>categories1</td> 
                <td><select name="second">
                        <option value="">select the second category</option>
                        <?php 
                            if(isset($_POST["first"]))
                            {

                                $sql="select *from second_category where first_id=".intval($_POST["first"]);
                                $res=mysql_query($sql);
                                echo $res;
                                if(mysql_num_rows($res)>0)
                                {
                                    while($row=mysql_fetch_assoc($res))
                                    {
                                        echo '<option value="'.$row["second_id"].'">'.$row["second_categoryname"].'</option>';
                                    }

                                }
                            }
                                ?>
                                    </select></td> 

            </tr> 
            <center><tr >
                    <td valign="middle"><input type="submit" value="Search" id="hi" name="hi" /></td> 
            </tr></center>

        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:21:18.610

你似乎混合了 php 和 javascript。PHP 在服务器端执行，您不能通过更改选择或类似的方式调用它（通过 Ajax 除外）。

因此，如果您真的想要这种行为，您可以将数据转储到 javascript 对象中，然后对其进行迭代以动态填充第二个选择或通过 Ajax 实现它。为此：调用一个额外的 php 脚本，它只是返回正确的值并通过 javascript 填充它们。你可以在这里找到一个很好的教程如何用 jQuery 解决这个问题：[http ://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html](http://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html)

# iphone - 如何将文件类型与我的 iPhone 应用程序相关联？

> ID：15835867
> 
> 赞同：0
> 
> 时间：2013-04-05T13:58:24.177
> 
> 标签：iphone, ios, ios6

我需要实现逻辑，当我打开附件到邮件时，它将与我的应用程序相关联。我已阅读有关它的信息：

[注册您的应用支持的文件类型](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html)

![在此处输入图像描述](https://i.stack.imgur.com/QD90q.png)

但是当我打开我在邮件中附加的 .png 文件时，我看不到我的应用程序的图标。我该如何解决？

# php - $_SERVER['HTTP_USER_AGENT'] 提取邮件客户端

> ID：15835869
> 
> 赞同：1
> 
> 时间：2013-04-05T13:58:28.007
> 
> 标签：php, tracking, user-agent, html-email

目前我正在尝试创建一个带有统计信息的邮件系统。我发送了一封带有图像的邮件，该图像链接到一个文件，我可以在其中读取`$_SERVER['HTTP_USER_AGENT']`. 当我在 Thunderbird 中打开邮件时，这是我的用户代理：

`Mozilla/5.0 (Windows NT 6.2; WOW64; rv:17.0) Gecko/20130328 Thunderbird/17.0.5`
我想获取邮件客户端的名称和版本。

我尝试使用 `stristr($_SERVER['HTTP_USER_AGENT'],'thunderbird')`，但有很多电子邮件客户端，如果我与所有客户端建立一个 if else 结构，它会变得非常大，我总是会错过一些电子邮件客户端。我怎样才能以简单的方式提取它并获得这样的[结果](http://user-agent-string.info/?Fuas=Mozilla/5.0%20%28Windows%20NT%206.2;%20WOW64;%20rv:17.0%29%20Gecko/20130328%20Thunderbird/17.0.5&test=837&action=analyze)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:03:25.437

我认为您正在寻找[http://php.net/get_browser](http://php.net/get_browser)。请注意，它需要一个包含有关浏览器/客户端的信息的第 3 方文本文件，这些信息可由 get_browser() 解析

[您可以在http://tempdownloads.browserscap.com/](http://tempdownloads.browserscap.com/)获取最新的 php_browscap.ini

编辑：我检查确定，但文件也包含 Thunderbird。

# reporting-services - 如何在选择另一个参数值时自动选择 Reporting Services 参数值

> ID：15835871
> 
> 赞同：0
> 
> 时间：2013-04-05T13:58:28.737
> 
> 标签：reporting-services, parameters, ssrs-2008, reporting

我正在使用来自 SSAS 的数据处理 SSRS 以创建报告。

在多值参数中，我想在选择另一个参数时自动选择一个参数的值。

例如：在月份参数中；在值列表中选择第 6 个月将选择从 1 日到 6 日的所有值。或者检查参数的值也会检查以前的值。

该过程类似于检查“全选”选项以检查所有可用值。

任何建议都将受到欢迎。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:39:46.353

我会以两种方式之一将第二个参数绑定到第一个参数。对于两者，我都会设置“数据集”以用于绑定到参数。

1.  您可以在数据集上设置“过滤器”以仅返回标准。

2.  您可以在第二个日期集中有一个谓词，该谓词引用由第一个参数设置的参数。

EG：所以如果我有一个“人”数据集：（这两个都应该在 SSRS 2008 或 2012 中工作）

```
declare @Person Table ( personID int identity, person varchar(8));

insert into @Person values ('Brett'),('Sean'),('Chad'),('Michael'),('Ray'),('Erik'),('Queyn');

Select top 100 *
from @Person p 
```

然后是“订单”数据集：

```
declare @Orders table ( OrderID int identity, PersonID int, Desciption varchar(32), Amount int);

insert into @Orders values (1, 'Shirt', 20),(1, 'Shoes', 50),(2, 'Shirt', 22),(2, 'Shoes', 52),(3, 'Shirt', 20),(3, 'Shoes', 50),(3, 'Hat', 20),(4, 'Shirt', 20),(5, 'Shirt', 20),(5, 'Pants', 30),
(6, 'Shirt', 20),(6, 'RunningShoes', 70),(7, 'Shirt', 22),(7, 'Shoes', 40),(7, 'Coat', 80)

select *
from @Orders 
```

如果我设置了一个使用“从查询中获取数据”的 Person 变量，并将“PersonID”设置为值，将“person”设置为标签。然后我可以设置第二个参数，通过添加过滤器或 where 子句从第一个参数中获取它的值，例如：

```
select *
from @Orders 
where PersonID in (@Person) 
```

# prolog - prolog广度优先搜索中的水壶

> ID：15835872
> 
> 赞同：1
> 
> 时间：2013-04-05T13:58:29.587
> 
> 标签：prolog, water-jug-problem

所以我需要解决那个水壶问题 - 大杯子装 5 个，小杯子装 3 个。我想在大杯子里放 4 个。

我有 BFS alogirtam 的来源，但我不知道如何创建谓词移动......

```
% DEPTH-FIRST SEARCH

path(Start, Goal):-
    dfs1([(Start, nil)], [], Goal).

% dfs1(OPEN, CLOSED, Goal).

dfs1([], _, _):-
    write(' Graph searched, no solution is found!').

dfs1([(Goal, Parent)|_], CLOSED, Goal):-
    !,
    write('Solution path is:'), nl,
    printsolution((Goal, Parent), CLOSED).

dfs1([(X, Parent)|Rest_OPEN], CLOSED, Goal):-
    add((X, Parent), CLOSED, New_CLOSED),
    get_surv_children(X, Rest_OPEN, New_CLOSED, Surv_Children),
    append(Rest_OPEN,Surv_Children, New_OPEN),
    dfs1(New_OPEN, New_CLOSED, Goal).

get_surv_children(State, OPEN, CLOSED, Surv_Children):-
     findall(Child, move_surv(State, OPEN, CLOSED, Child),
         Surv_Children).

move_surv(State, OPEN, CLOSED, (Next, State)):-
    move(State, Next),
       \+ member_term(Next, OPEN),
       \+ member_term(Next, CLOSED).

printsolution((State, nil), _):- write(State), nl.

printsolution((State, Parent), CLOSED):-
    member((Parent, Grandparent), CLOSED),
    printsolution((Parent, Grandparent), CLOSED),
    write(State), nl.

add(E, L, [E|L]).

member_term(E,[(E,_)|T]).

member_term(E,[_|T]):-
    member_term(E, T). 
```

# c - 从 Eclipse 中删除预编译的头文件

> ID：15835873
> 
> 赞同：1
> 
> 时间：2013-04-05T13:58:29.907
> 
> 标签：c

有人知道如何从 Eclipse 中删除此选项吗？或者我应该从 src 文件中删除一段代码？删除预编译的头文件是什么意思？我在 google 或 gcc 在线文档上找不到它。

我在 Windows 上。

/*

实际上我的主要问题与这个问题不同。但是，当我搜索我的主要问题时，我看到了这个：[stackoverflow.com/questions/8166324/jni-unsatisfiedlinkerror](https://stackoverflow.com/questions/8166324/jni-unsatisfiedlinkerror)，如果你查看答案，他说“我的项目使用了预编译的标头选项集，一旦我删除了该选项它就像魔术一样工作”所以我也会尝试删除预编译的头文件，但我不知道该怎么做。

也许这个问题对那些对预编译头文件不太了解的人也有帮助。

*/

# wpf - WPF Expander 控件标头未在 XP 机器上呈现

> ID：15835878
> 
> 赞同：1
> 
> 时间：2013-04-05T13:58:40.617
> 
> 标签：wpf, windows-xp, rendering

我有一个 WPF 扩展器控件，当应用程序在 XP 机器（带有 SP3 的 XP）上运行时，它不呈现扩展器标题内容，当在 Win7 机器上运行时，内容按预期呈现。

扩展器标题是一个虚拟堆栈面板（水平），里面有几个文本块。

当我使用 snoop 进行调查时，我可以看到预期的文本并且字体颜色为黑色 - 所以它不是白色背景上的白色文本。

有人知道为什么它不会在 XP 上渲染吗？

标题模板：

```
<Expander.Header>
   <VirtualizingStackPanel Orientation="Horizontal">
      <Controls2:HighlightTextBlock Style="{StaticResource RegularTextStyle}"
                                    Text="{Binding Name, Mode=OneWay}"
                                    Margin="10,0,0,0"
                                    HighlightText="{Binding RelativeSource=RelativeSource FindAncestor, AncestorType={x:Type Controls2:ViewHost}}, Path=DataContext.SearchText}"
                                    Foreground="{StaticResource Jedi.HighlightForegroundTextBrush}"
                                    HighlightBackground="{StaticResource Jedi.HighlightBackgroundTextBrush}"/>
      <TextBlock Margin="15,0,0,0">
         <Run Text="(" />
         <Run Text="{Binding Id, Mode=OneWay}"></Run>
         <Run Text=")"/>
      </TextBlock>
   </VirtualizingStackPanel>
</Expander.Header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:57:58.170

您应该用 StackPanel 替换 VirtualizingStackPanel。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.aspx)：

> “虚拟化”一词是指一种技术，通过该技术，用户界面 (UI) 元素的子集根据哪些项目在屏幕上可见而从大量数据项目中生成。当屏幕上可能只有几个元素时生成许多 UI 元素会对应用程序的性能产生不利影响。VirtualizingStackPanel 计算可见项的数量并与 ItemsControl（例如 ListBox 或 ListView）中的 ItemContainerGenerator 一起使用，以仅为可见项创建 UI 元素。

因此，在这种情况下，由于面板内的项目很少，因此不需要它。

# hibernate - 请求没有左外连接的孩子

> ID：15835886
> 
> 赞同：0
> 
> 时间：2013-04-05T13:59:09.730
> 
> 标签：hibernate, inheritance, criteria

我正在尝试从休眠条件进行查询，但生成的查询包含不必要的连接。

我的实体映射是这样的：

```
@Entity
@Inheritance(strategy=InheritanceType.JOINED)
@Table(name="A")
public class A {
    @Id 
    private Long id;

    private String champ1;
    private String champ2;
    private String champ3;
}

@Entity
@Table(name="B")
@PrimaryKeyJoinColumn(name="ID")
public class B extends A {}

@Entity
@Table(name="C")
@PrimaryKeyJoinColumn(name="ID")
public class C extends A {} 
```

我想执行这样的查询：

```
SELECT ID, CHAMP1, CHAMP2 FROM A WHERE CHAMP3 = ? 
```

我的标准是：

```
Criteria criteria = (Session)em.getDelegate()).createCriteria(A.class);

ProjectionList projections = Projections.projectionList();
projections.add(Projections.property("id"), "id");
projections.add(Projections.property("champ1"), "champ1");
projections.add(Projections.property("champ2"), "champ2");

criteria.setProjection(projections);
criteria.add(Restrictions.eq("champ3", valeur));

(List<A>) criteria.list(); 
```

生成的请求是：

```
SELECT
    a.id,
    a.CHAMP1,
    a.CHAMP2
FROM
    A a 
LEFT OUTER JOIN
    B b 
on a.ID=b.ID 
LEFT OUTER JOIN
    C c 
on a.ID=c.ID 
WHERE
    a.champ3 = ? 
```

我该怎么做才能在我的请求中没有左外连接？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:02:50.963

添加`@org.hibernate.annotations.Entity(polymorphisms = PolymorphismType.EXPLICIT)`到您的父类，或添加`Restrictions.eq("class", A.class)`到标准。

# netbeans - 如何在netbeans中恢复关闭的输出窗口？

> ID：15835888
> 
> 赞同：39
> 
> 时间：2013-04-05T13:59:19.133
> 
> 标签：netbeans, window, output, recover

我经常遇到想通过上下文菜单清除当前输出窗口的情况，但我没有点击`Clear`条目，而是不小心点击了`Close`条目（直接在下面`Clear`）。

我怎样才能恢复那个输出窗口！？

通过 Window/Output/Output 我只获得所有输出窗口的容器选项卡。如何重新打开当前正在运行的应用程序的输出窗口？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-06-23T19:17:50.690

这是解决方案

1.  首先转到服务窗口，这是项目选项卡的下一个选项卡...
2.  然后右键单击apache tomcat
3.  单击查看服务器日志并查看服务器输出

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-05T16:27:20.193

在右下边缘有关于 NetBeans 更新的信息。留给它，有正在运行的任务（构建、运行应用程序等）。单击它，右键单击所需的进程并选择`Show Output`.

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-03-03T03:21:27.290

尝试 Window--> Reset Windows in netbean 注意：请注意，之后您的所有 Windows 设置都将消失！

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-01-07T13:39:31.167

我最近遇到了同样的问题，其他修复都没有。我最终通过切换到“服务”选项卡，右键单击“Apache Tomcat 或 TomEE”并单击“重新启动”来显示它。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-10-27T01:18:24.663

转到***窗口***选项卡：然后单击***输出***。这将允许您将其放置在屏幕上的任何位置。或者只是使用***ctrl+4***

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-12-17T05:49:23.407

转到服务器选项卡并右键单击，您将看到查看输出日志。

***Netbeans --> 你的服务器 --> RightClick --> 查看输出***

[![在此处输入图像描述](https://i.stack.imgur.com/BzCBw.png)](https://i.stack.imgur.com/BzCBw.png)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-08-29T07:31:49.367

在 NetBeans 7.4 中，在窗口菜单下，单击“重置窗口”。然后 NetBeans 将消失并重新出现。最后，在它重新出现后，单击窗口菜单下的“输出”。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-03-28T15:17:47.917

转到窗口选项卡 - 重置窗口 - 运行您的程序。- 然后右键单击程序运行的选项卡底部

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-04-03T21:17:25.380

右键单击“服务”窗口下的 Apache Tomcat。停止服务器，然后重新启动...日志和输出窗口都将重新出现

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-03-14T13:07:43.163

只需通过“查看”并选择 IDE Log。它将显示输出。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-02-11T07:41:22.587

如果您在正常模式下运行服务器，您可以通过在调试模式下重新启动主项目来恢复日志。当服务器运行模式发生变化时，NB 似乎会打开一个新的服务器日志。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-08-12T10:45:31.237

如果您想查看三个窗口以及 Log 然后转到 windows on `NetBeans`then`output`并单击`NetBeans->windows->output`。接下来转到项目旁边的服务选择服务器右键单击它选择服务器日志和服务器输出`NetBeans->service(next to you project)->server->View server log`并查看服务输出。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-03-26T09:23:13.273

我遇到了同样的问题。目前我使用的是 8.1 版本，首先进入窗口选项卡，也就是选项卡帮助之前。单击窗口，然后单击重置“重置窗口”，然后在右下角单击项目运行的选项卡，右键单击并选择显示输出。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-04-18T07:20:54.787

更短的方式：1-Alt + Shift + R 2-Ctrl + 4 第二种方式：（在 netBeans 的菜单中）1-转到窗口选项卡 2-转到 IDE 工具 3-单击测试结果 4-再次在窗口选项卡中单击输出

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-03-04T08:33:41.060

在 Netbeans 7.4 中尝试 Window -> Output OR Ctrl + 4

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-01-30T12:12:34.220

简单的方法，只需编写一些错误的代码，然后 Run > Build 它将在输出窗口中显示错误。

我尝试了以上所有方法，但没有成功，只有这个有效。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-07-06T11:09:34.357

我在窗口菜单中找到了输出选项。
[![在此处输入图像描述](https://i.stack.imgur.com/efrGR.png)](https://i.stack.imgur.com/efrGR.png)

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2021-04-16T07:46:00.370

服务器---AT---右键---调试模式启动

# ssrs-2008 - 全选参数在 SSRS 中不起作用

> ID：15835907
> 
> 赞同：5
> 
> 时间：2013-04-05T14:00:11.150
> 
> 标签：ssrs-2008, reporting-services

我有一个报告，它为指定的日期范围和事件类型创建事件列表。

日期范围和事件类型是报告中定义的参数。日期参数（@DateFrom 和@DateTo）正常工作。

但是，@EventType 参数定义为由 DataSet 提供的值列表（选中“允许多个值”），在使用 {Select All} 复选框时不提供预期的行为。如果我通过选中列表中的多个框来选择一个或多个事件类型，报告将显示正确匹配指定事件类型的事件。

但是，如果我单击 {Select All} 框（然后突出显示所有其他可能的值），报告不会显示所有这些事件类型值的事件。它似乎遗漏了 {Select All} 框选择的几个值。如果我专门针对这些缺失值运行报告，则报告会返回与这些类型匹配的事件。这向我表明，这些类型并不缺乏数据。

出于这个原因，在我看来 {Select All} 被窃听了......或者可能缓存在某个地方？我尝试删除报告/参数数据集并重新部署无济于事。值得注意的是，这种行为在部署之前也发生在本地。

有没有人以前看过这个，或者有没有人有任何建议？

编辑 - 我还应该提到有问题的参数（@EventType）没有分配默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:36:16.763

你如何为变量声明你的谓词？它应该是这样的：

```
where thing in (@Variable) 
```

其中@Variable 是一个多值参数。

您可以尝试通过定义它们来查看多值参数的值是否也在某处被垃圾。一般来说，多值参数的收集方法如果数据类型不同会导致问题。

您也可以尝试在运行时设计您的数据集以构建而不是静态查询。EG：为您的数据集设置一个表达式，例如：

```
="Select * from table where thing in (" & Parameters!Variable.Value & ")" 
```

这将导致参数构建为字符串的一部分，然后在运行时而不是从传统查询中进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:35:27.263

不能完全相信是这种情况，但是传递给 SQL Server 过程的参数太小了。它被定义为 VARCHAR(500) 并且需要更大以处理大量逗号分隔值。我将其更改为 VARCHAR(4000)，它现在按预期运行。

感谢 Djangojazz 为我指出了参数的方向。

# ruby - ruby - 活动记录信誉系统（隐藏投票按钮）

> ID：15835908
> 
> 赞同：0
> 
> 时间：2013-04-05T14:00:11.750
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有活跃的记录信誉系统，但是一旦用户为某事投票，我似乎无法隐藏投票按钮。

在 user.rb 我有一个投票的方法

```
has_many :evaluations, class_name: "RSEvaluation", as: :source
def voted_for?(review)
evaluations.where(target_type: review.class, target_id: review.id).present?
end 
```

然后在评论显示页面中，如果“if”语句评估为真，我有以下代码来隐藏按钮

```
<% if User.find(session[:user_id]) &&
!User.find(session[:user_id]).voted_for(@review)%>
<h3> Vote: 
<%= link_to "Up", vote_review_path(@review, type: "up"), method: "post" %>
||
<%= link_to "Down", vote_review_path(@review, type: "down"), method: "post" %></h3>
<% end %> 
```

无论如何，按钮仍然显示。我一直在关注 railscast 并且在那个视频中他们使用 current_user 但是我使用 User.find(session[:user_id]) 来识别用户（current_user 没有定义，我总是得到错误“* undefined local variable或方法`current_user'*"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:15:28.707

添加到您的 application_helper.rb：

```
def current_user
  @current_user ||= User.find(session[:user_id])
end

def logged_in?
  !!current_user
end 
```

现在您可以在您的视图中使用`current_user`和。`logged_in?`

```
<% if logged_in? && !current_user.voted_for?(@review)%>
<h3> Vote: 
<%= link_to "Up", vote_review_path(@review, type: "up"), method: "post" %>
||
<%= link_to "Down", vote_review_path(@review, type: "down"), method: "post" %></h3>
<% end %>

def voted_for?(review)
  evaluations.where(target_type: review.class, target_id: review.id).count > 0
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T17:17:06.537

如果你的复习课有

```
has_reputation :votes, source: :user, aggregated_by: :sum 
```

你可以得到所有的评价（声誉记录）

```
object.evaluations 
```

因此，要确定是否有一些投票，您可以使用特定用户

```
class Review
    def was_vouted_by? user
        self.evaluations.find_by_source_id(user.id)
    end
 end 
```

**find_by_source_id** - 将返回ruby​​ 评估为 true 的**记录**，或返回**ruby**​​ 评估为 false 的记录

# c - 从 gcc 到 Visual Studio Express 2010 的 C 代码

> ID：15835922
> 
> 赞同：1
> 
> 时间：2013-04-05T14:00:41.957
> 
> 标签：c, visual-studio-2010, gcc, struct

我正在尝试移动我在 Visual Studio Express 2010 下使用 gcc 成功编写和编译的一些代码。

我有以下头文件。

```
#ifndef _SYMTAB_H_
#define _SYMTAB_H_

#define NHASH 997

typedef enum {NOTYPE, INTTYPE, DOUBLETYPE, STRINGTYPE} SYMBOLTYPE;

typedef union {
    int intvalue;
    double doublevalue;
    char *stringvalue;
} SYMBOLVALUE;

typedef struct {
    SYMBOLTYPE type;
    char *name;
    SYMBOLVALUE value;
} SYMBOL;

void initSymbolTable(void);
SYMBOL *lookup(char *sym);
SYMBOL *addIntSymbol(char *name, int value);
SYMBOL *addDoubleSymbol(char *name, double value);
SYMBOL *addStringSymbol(char *name, char *value);
char *getSymbolName(SYMBOL *sym);
int getIntSymbolValue(SYMBOL *sym);
double getDoubleSymbolValue(SYMBOL *sym);
char *getStringSymbolValue(SYMBOL *sym);
void printSymbolTable(void);

#endif 
```

如果我使用该头文件编写一段代码，例如：

```
int main(int argc, char *argv[]) {
    initSymbolTable();

    printSymbolTable();

    SYMBOL *intSymbol = addIntSymbol("pippo", 10);

    printSymbolTable();

    printf("All tests successfull\n");
    return 0;
} 
```

我收到以下错误：

错误 C2275: 'SYMBOL': 非法将此类型用作表达式

[这是在这里描述：http: //msdn.microsoft.com/en-us/library/76c9k4ah](http://msdn.microsoft.com/en-us/library/76c9k4ah(v=vs.71).aspx) (v=vs.71) .aspx

无论如何，我不明白这有什么问题。我还在 C/C++->Advanced 下的项目属性中将“编译为”属性设置为“编译为 C 代码”。此外，所有文件都保存为 *.c 和 *.h。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:03:13.130

您不能在 Visual Studio 支持的 C 版本中声明变量中间函数。您需要在顶部声明它：

```
int main(int argc, char *argv[]) {
    SYMBOL *intSymbol;

    initSymbolTable();

    printSymbolTable();

    intSymbol = addIntSymbol("pippo", 10);
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:07:30.993

或者，您可以在解决方案资源管理器中右键单击引发错误的 .c 文件，转到 C/C++ -> 高级并将编译为设置为编译为 C++ 代码。这样你就不需要编辑你的来源。

# objective-c - 如何使用 PKRevealController 切换前视图控制器？

> ID：15835927
> 
> 赞同：4
> 
> 时间：2013-04-05T14:00:51.573
> 
> 标签：objective-c, uiview, uiviewcontroller, uinavigationcontroller, uigesturerecognizer

我在一个新的应用程序项目中使用 PKRevealController，你可以在这里得到它： [https ://github.com/pkluz/PKRevealController](https://github.com/pkluz/PKRevealController)

我遇到的问题是正确更改前视图控制器中显示的视图。

例如，我将前视图向左或向右滑动，并有一个选项列表，其中一个可能是设置，例如。如果我点击它，我希望前视图控制器滑回原位并显示设置视图控制器的视图。

我可以显示一个新视图，但它删除了导航控制器并弄乱了视图的大小。

有没有人成功地想出如何使用 PKRevealController 做到这一点？

非常感谢任何提示或建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T12:47:22.737

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView == leftMenu) {
        // Load new front view
        UIViewController *myNewUIViewController = [[MyNewUIViewController alloc] initWithNibName:@"MyNewUIViewController" bundle:nil];
        UINavigationController *myNavController = [[UINavigationController alloc] initWithRootViewController:myNewUIViewController];
        [self.revealController setFrontViewController:myNavController];
        // Putting back the front view on focus
        [self.revealController showViewController:self.revealController.frontViewController];
    }
} 
```

# visual-studio-2010 - 如何恢复：Workflow Designer 遇到文档问题

> ID：15835934
> 
> 赞同：2
> 
> 时间：2013-04-05T14:01:15.357
> 
> 标签：visual-studio-2010, arguments, workflow

作为工作流的新手，我创建了一个工作流（在 VS2010 工作流设计器中），其中包含我有一个 writeline 活动的序列。我正在尝试为工作流创建参数，因此我在参数窗格中创建了 2 个参数，而无需在活动级别对它们进行任何操作。（值得注意的是，我还没有掌握如何在工作流程中使用参数）。但是，我保存了我的工作流程，而工作流程没有显示任何可见的错误（带有感叹号的红色圆圈）。下次我打开工作流程时，我收到错误：

Workflow Designer 遇到文档问题。请检查文档中的无效内容、命名空间、引用或引用循环。

这似乎是最终结果，因为我无法访问我的原始工作流程来纠正我的错误（无论它们可能是什么）。当我点击详细的向下箭头时，我看到了：Could not find member 'a' in type _8684 。

a 是我在工作流中使用但从未在任何活动中使用过的两个 int32 参数之一。

我将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:20:44.043

您似乎正在尝试重新托管您的 Workflow Designer，但它没有为您生成正确的 XAML。

`Could not find member <mname> in type <tname>`如果 Workflow Designer 实例直接加载容器活动（序列、流程图等）而不是首先使用 ActivityBuilder，则通常会发生该错误。

如果您已经在使用 ActivityBuilder，那么您可能错过了为其提供根 Activity 命名空间。正确的添加方式`System.Activities.Presentation.WorkflowDesigner`是：

```
this.workflowDesigner = new WorkflowDesigner();
this.workflowDesigner.Load(new ActivityBuilder { Implementation = new Sequence(),
                                                 Name = "RootNamespace.RootActivity" }); 
```

正确设置 WF 设计器将停止使用`Name`随机类型（如您的情况下的 _8684）并在保存/序列化时生成正确的 XAML。这应该可以帮助您摆脱命名空间错误。

# sql-server-2008 - 狮身人面像索引器不工作

> ID：15835936
> 
> 赞同：0
> 
> 时间：2013-04-05T14:01:18.980
> 
> 标签：sql-server-2008, sphinx

我想在 Windows 7 中索引 MSSql 2008 数据库。这是我的配置文件

```
source main
{

    type                    = mssql

    sql_host                = localhost
    sql_user        = sa
    sql_pass        = pass
        #mssql_winauth      = 1
    sql_db                  = article
    sql_port                = 1433  # optional, default is 3306

    mssql_unicode       = 1 # request Unicode data from server

    sql_query_pre = insert into IndexLog(StartDateTime, Count, Successful) select top 1 getdate(), (select COUNT(id) from article),0 from article

    sql_query   = SELECT ID ,ROW_NUMBER() OVER(ORDER BY Title) AS TitleRowNo\
                ,Title,abstract \
                FROM article
    #Log index end
    sql_query_post_index = update IndexLog set EndDateTime = getdate(), successful = 1 where id = (select max(id) from IndexLog)

    sql_attr_uint = ID
    sql_attr_uint = TitleRowNo

}

index news_main
{
    source                  = main
    path                    = C:/sphinx/article/data/news_main
    docinfo                 = extern
    charset_type            = utf-8

    min_word_len        = 3
    min_infix_len       = 3
    infix_fields    = Title, abstract
#   min_stemming_len = 0
#   index_exact_words = 1
}

indexer
{
    mem_limit               = 32M
}

searchd
{
    port                    = 6550 # 9312
    log                     = C:/sphinx/article/log/searchd.log
    query_log               = C:/sphinx/article/log/query.log
    read_timeout            = 5
    max_children            = 0 # concurrent searches to run in parallel 
    pid_file                = C:/sphinx/article/log/searchd.pid
    max_matches             = 1000
    seamless_rotate         = 1
    preopen_indexes         = 0
    unlink_old              = 1

    collation_server        = utf8_general_ci
    collation_libc_locale   = utf8_general_ci
} 
```

我使用这个命令来运行 index.html。

`indexer --config "C:\sphinx\a.sphinx.conf" news_main`

但不是工作。

# hive - hive ddl 脚本的标准文件扩展名？

> ID：15835937
> 
> 赞同：8
> 
> 时间：2013-04-05T14:01:22.813
> 
> 标签：hive, ddl

hive ddl 脚本的文件扩展名是否有公认的约定？我纯粹是出于代码组织的目的，所以当我将脚本保存在我的存储库中时，很明显脚本在 Hive 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:07:32.243

Apache Hive 项目的标准是使用 .q

您可以在此处查看示例

阿帕奇SVN

hive/trunk/ql/src/test/queries/clientpositive/bucketmapjoin6.q

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:23:14.950

您可以使用任何扩展来运行配置单元脚本。例如

```
hive -f scriptname.sh 
```

但是使用 .hql 是最佳做法，这样您就可以将此文件与其他文件区分开来。

# sencha-touch-2 - 如何在sencha中解析xml文件并获取标签值

> ID：15835940
> 
> 赞同：0
> 
> 时间：2013-04-05T14:01:33.647
> 
> 标签：sencha-touch-2, extjs4.1

谁能告诉如何在 sencha 中解析 xml 文件并获取标签值

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:50:37.753

您需要的是代理中的[XML Reader](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.reader.Xml)。您将在链接文档中找到示例

# windows - powershell 鼠标移动不会阻止空闲模式

> ID：15835941
> 
> 赞同：28
> 
> 时间：2013-04-05T14:01:36.513
> 
> 标签：windows, powershell, sleep

在开始之前，这是我在 PowerShell 中编写的第一个小代码 :)

```
[System.Windows.Forms.Cursor]::Position = `
    New-Object System.Drawing.Point($pos.X, ($pos.Y - 1))
[System.Windows.Forms.Cursor]::Position = `
    New-Object System.Drawing.Point($pos.X, $pos.Y) 
```

我想达到什么目标？

好吧，我想每 4 分钟移动一次鼠标光标以防止屏幕保护程序出现（上面代码中的每一秒进行测试）。每次向上和向下一个像素时，代码确实确实移动了鼠标。问题是，屏幕保护程序（或窗口的空闲模式）仍在出现。

现在，我正在学习 PowerShell，但我对 Windows 架构的经验很少。

有人看到我的错误吗？我会很感激一个答案！:D 在此先感谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-06T05:08:09.737

博客中的解决方案[使用 PowerShell 防止桌面锁定或屏幕保护程序](http://dmitrysotnikov.wordpress.com/2009/06/29/prevent-desktop-lock-or-screensaver-with-powershell/)对我有用。这是相关的脚本，它只是向 shell 发送一个句点：

```
param($minutes = 60)

$myshell = New-Object -com "Wscript.Shell"

for ($i = 0; $i -lt $minutes; $i++) {
  Start-Sleep -Seconds 60
  $myshell.sendkeys(".")
} 
```

以及评论中的另一种选择，它将鼠标移动一个像素：

```
$Pos = [System.Windows.Forms.Cursor]::Position
[System.Windows.Forms.Cursor]::Position = New-Object System.Drawing.Point((($Pos.X) + 1) , $Pos.Y)
$Pos = [System.Windows.Forms.Cursor]::Position
[System.Windows.Forms.Cursor]::Position = New-Object System.Drawing.Point((($Pos.X) - 1) , $Pos.Y) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2019-06-17T17:58:10.297

我[也尝试](https://gist.github.com/MatthewSteeples/ce7114b4d3488fc49b6a)了鼠标移动解决方案，它同样没有用。这是我的解决方案，每 4 分钟快速切换一次 Scroll Lock：

```
Clear-Host
Echo "Keep-alive with Scroll Lock..."

$WShell = New-Object -com "Wscript.Shell"

while ($true)
{
  $WShell.sendkeys("{SCROLLLOCK}")
  Start-Sleep -Milliseconds 100
  $WShell.sendkeys("{SCROLLLOCK}")
  Start-Sleep -Seconds 240
} 
```

我使用了 Scroll Lock，因为这是键盘上最没用的键之一。也很高兴看到它时不时地短暂闪烁。我认为这个解决方案应该适用于几乎所有人。

有些人使用 $WShell.sendkeys("SCROLLLOCK") 而不是 $WShell.sendkeys("{SCROLLLOCK}") 获得成功

也可以看看：

*   [https://ss64.com/vb/sendkeys.html](https://ss64.com/vb/sendkeys.html)
*   [http://devguru.com/content/technologies/wsh/wshshell-sendkeys.html](http://devguru.com/content/technologies/wsh/wshshell-sendkeys.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-06T21:39:27.080

对此也有一个模拟解决方案。有一个名为“Timeout Blocker”的安卓应用程序会以设定的时间间隔振动，然后你将鼠标放在它上面。[https://play.google.com/store/apps/details?id=com.isomerprogramming.application.timeoutblocker&hl=en](https://play.google.com/store/apps/details?id=com.isomerprogramming.application.timeoutblocker&hl=en)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-23T16:26:17.460

我也遇到过类似的情况，下载需要在一夜之间保持活跃，并且需要按键来刷新我的连接。我还发现鼠标移动不起作用。但是，使用记事本和发送键功能似乎可以解决问题。我发送一个空格而不是一个“。” 因为如果有一个 [yes/no] 弹出窗口，它会使用空格键自动单击默认响应。这是使用的代码。

```
param($minutes = 120)

$myShell = New-Object -com "Wscript.Shell"

for ($i = 0; $i -lt $minutes; $i++) {
  Start-Sleep -Seconds 30
  $myShell.sendkeys(" ")
} 
```

此功能将在指定的 120 分钟（2 小时）内工作，但可以通过增加或减少输入的秒数或增加或减少分钟参数的指定值来修改所需的时间。

只需在 powershell ISE 或 powershell 中运行脚本，然后打开记事本。将在指定的时间间隔输入一个空格，持续所需的时间长度（$ 分钟）。

祝你好运！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-02T18:08:26.470

试试这个：（来源：http: [//just-another-blog.net/programming/powershell-and-the-net-framework/](http://just-another-blog.net/programming/powershell-and-the-net-framework/ "来源")）

```
Add-Type -AssemblyName System.Windows.Forms 

$position = [System.Windows.Forms.Cursor]::Position  
$position.X++  
[System.Windows.Forms.Cursor]::Position = $position 

    while(1) {  
    $position = [System.Windows.Forms.Cursor]::Position  
    $position.X++  
    [System.Windows.Forms.Cursor]::Position = $position  

    $time = Get-Date;  
    $shorterTimeString = $time.ToString("HH:mm:ss");  

    Write-Host $shorterTimeString "Mouse pointer has been moved 1 pixel to the right"  
    #Set your duration between each mouse move
    Start-Sleep -Seconds 150  
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-16T18:34:32.037

```
<# Stay Awake by Frank Poth 2019-04-16 #>

(Get-Host).UI.RawUI.WindowTitle = "Stay Awake"

[System.Console]::BufferWidth  = [System.Console]::WindowWidth  = 40
[System.Console]::BufferHeight = [System.Console]::WindowHeight = 10

$shell = New-Object -ComObject WScript.Shell

$start_time = Get-Date -UFormat %s <# Get the date in MS #>
$current_time = $start_time
$elapsed_time = 0

Write-Host "I am awake!"

Start-Sleep -Seconds 5

$count = 0

while($true) {

  $shell.sendkeys("{NUMLOCK}{NUMLOCK}") <# Fake some input! #>

  if ($count -eq 8) {

    $count = 0
    Clear-Host

  }

  if ($count -eq 0) {

    $current_time = Get-Date -UFormat %s
    $elapsed_time = $current_time - $start_time

    Write-Host "I've been awake for "([System.Math]::Round(($elapsed_time / 60), 2))" minutes!"

  } else { Write-Host "Must stay awake..." }

  $count ++

  Start-Sleep -Seconds 2.5

} 
```

重要的部分是`$shell.sendkeys("{NUMLOCK}{NUMLOCK}")`这会在 numlock 键上注册两次按下并欺骗 shell 以为输入已输入。在搜索了对我不起作用的各种脚本后，我今天写了这篇文章。希望它可以帮助某人！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-13T02:25:01.333

我创建了一个 PS 脚本来检查空闲时间并摇动鼠标以防止屏幕保护程序。

有两个参数可以控制它的工作方式。

`$checkIntervalInSeconds`：检查空闲时间是否超过限制的间隔（以秒为单位）

`$preventIdleLimitInSeconds`: 以秒为单位的空闲时间限制。如果空闲时间超过空闲时间限制，请摇动鼠标以阻止屏幕保护程序

开始了。将脚本保存在`preventIdle.ps1`. 为了防止 4 分钟屏幕保护程序，我设置了`$checkIntervalInSeconds = 30`和`$preventIdleLimitInSeconds = 180`.

```
Add-Type @'
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace PInvoke.Win32 {

    public static class UserInput {

        [DllImport("user32.dll", SetLastError=false)]
        private static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);

        [StructLayout(LayoutKind.Sequential)]
        private struct LASTINPUTINFO {
            public uint cbSize;
            public int dwTime;
        }

        public static DateTime LastInput {
            get {
                DateTime bootTime = DateTime.UtcNow.AddMilliseconds(-Environment.TickCount);
                DateTime lastInput = bootTime.AddMilliseconds(LastInputTicks);
                return lastInput;
            }
        }

        public static TimeSpan IdleTime {
            get {
                return DateTime.UtcNow.Subtract(LastInput);
            }
        }

        public static double IdleSeconds {
            get {
                return IdleTime.TotalSeconds;
            }
        }

        public static int LastInputTicks {
            get {
                LASTINPUTINFO lii = new LASTINPUTINFO();
                lii.cbSize = (uint)Marshal.SizeOf(typeof(LASTINPUTINFO));
                GetLastInputInfo(ref lii);
                return lii.dwTime;
            }
        }
    }
}
'@

Add-Type @'
using System;
using System.Runtime.InteropServices;

namespace MouseMover
{
    public class MouseSimulator
    {
        [DllImport("user32.dll", SetLastError = true)]
        static extern uint SendInput(uint nInputs, ref INPUT pInputs, int cbSize);
        [DllImport("user32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool GetCursorPos(out POINT lpPoint);

        [StructLayout(LayoutKind.Sequential)]
        struct INPUT
        {
            public SendInputEventType type;
            public MouseKeybdhardwareInputUnion mkhi;
        }
        [StructLayout(LayoutKind.Explicit)]
        struct MouseKeybdhardwareInputUnion
        {
            [FieldOffset(0)]
            public MouseInputData mi;

            [FieldOffset(0)]
            public KEYBDINPUT ki;

            [FieldOffset(0)]
            public HARDWAREINPUT hi;
        }
        [StructLayout(LayoutKind.Sequential)]
        struct KEYBDINPUT
        {
            public ushort wVk;
            public ushort wScan;
            public uint dwFlags;
            public uint time;
            public IntPtr dwExtraInfo;
        }
        [StructLayout(LayoutKind.Sequential)]
        struct HARDWAREINPUT
        {
            public int uMsg;
            public short wParamL;
            public short wParamH;
        }
        [StructLayout(LayoutKind.Sequential)]
        public struct POINT
        {
            public int X;
            public int Y;

            public POINT(int x, int y)
            {
                this.X = x;
                this.Y = y;
            }
        }
        struct MouseInputData
        {
            public int dx;
            public int dy;
            public uint mouseData;
            public MouseEventFlags dwFlags;
            public uint time;
            public IntPtr dwExtraInfo;
        }

        [Flags]
        enum MouseEventFlags : uint
        {
            MOUSEEVENTF_MOVE = 0x0001
        }
        enum SendInputEventType : int
        {
            InputMouse
        }
        public static void MoveMouseBy(int x, int y) {
            INPUT mouseInput = new INPUT();
            mouseInput.type = SendInputEventType.InputMouse;
            mouseInput.mkhi.mi.dwFlags = MouseEventFlags.MOUSEEVENTF_MOVE;
            mouseInput.mkhi.mi.dx = x;
            mouseInput.mkhi.mi.dy = y;
            SendInput(1, ref mouseInput, Marshal.SizeOf(mouseInput));
        }
    }
}
'@

$checkIntervalInSeconds = 30
$preventIdleLimitInSeconds = 180

while($True) {
    if (([PInvoke.Win32.UserInput]::IdleSeconds -ge $preventIdleLimitInSeconds)) {
        [MouseMover.MouseSimulator]::MoveMouseBy(10,0)
        [MouseMover.MouseSimulator]::MoveMouseBy(-10,0)
    }
    Start-Sleep -Seconds $checkIntervalInSeconds
} 
```

然后，打开 Windows PowerShell 并运行

```
powershell -ExecutionPolicy ByPass -File C:\SCRIPT-DIRECTORY-PATH\preventIdle.ps1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-11T16:06:39.540

我添加了一条通知，您只需将其变量设置为 $true 或 $false 即可轻松启用/禁用。此外，鼠标光标向右移动 1 px，然后向左移动 1 px，因此即使经过多次迭代，它也基本上保持在同一个位置。

```
# Lines needed for the notification
[System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
Add-Type -AssemblyName System.Windows.Forms 
$isNotificationOn = $true

$secondsBetweenMouseMoves = 6
$Pos = [System.Windows.Forms.Cursor]::Position
$PosDelta = 1
$logFilename = "previousMouseMoverAction.txt"
$errorLogFilename = "mouseMoverLog.txt"

if (!(Test-Path "$PSScriptRoot\$logFilename")) {
   New-Item -path $PSScriptRoot -name $logFilename -type "file" -value "right"
   Write-Host "Warning: previousMouseMoverAction.txt missing, created a new one."
}

$previousPositionChangeAction = Get-Content -Path $PSScriptRoot\$logFilename

if ($previousPositionChangeAction -eq "left") {
    $PosDelta = 1
    Set-Content -Path $PSScriptRoot\$logFilename -Value 'right'
} else {
    $PosDelta = -1
    Set-Content -Path $PSScriptRoot\$logFilename -Value 'left'
}

for ($i = 0; $i -lt $secondsBetweenMouseMoves; $i++) {
    [System.Windows.Forms.Cursor]::Position = New-Object System.Drawing.Point((($Pos.X) + $PosDelta) , $Pos.Y)
    if ($isNotificationOn) {
        # Sending a notification to the user
        $global:balloon = New-Object System.Windows.Forms.NotifyIcon
        $path = (Get-Process -id $pid).Path
        $balloon.Icon = [System.Drawing.Icon]::ExtractAssociatedIcon($path) 
        $balloon.BalloonTipIcon = [System.Windows.Forms.ToolTipIcon]::Warning 
        $balloon.BalloonTipText = 'I have just moved your cheese...'
        $balloon.BalloonTipTitle = "Attention, $Env:USERNAME" 
        $balloon.Visible = $true 
        $balloon.ShowBalloonTip(3000)
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-24T05:45:02.607

```
$WShell = New-Object -com "Wscript.Shell"
cls

$count = 0
while ($true)
{
  $count = $count + 1
  if($count -eq 5) {
    cls
    $count=0
  }
  $WShell.sendkeys("{SCROLLLOCK}")
  Start-Sleep -Milliseconds 100
  Write-Output "Toggle Scroll at $(Get-Date -Format u)"
  $WShell.sendkeys("{SCROLLLOCK}")
  Start-Sleep -Seconds 60
} 
```

# c# - 通过AJAX传递参数但在MVC方法中显示为null

> ID：15835947
> 
> 赞同：0
> 
> 时间：2013-04-05T14:01:57.627
> 
> 标签：c#, asp.net-mvc, jquery

我是 MVC 的新手，我正在尝试使用 AJAX 显示方法。问题是我传递给方法的参数显示为空，但是当我调试 ajax 代码时，参数不为空。我不知道我做错了什么。

这是我的 C# 方法

```
 public JsonResult AllAccountList(int accountID)
{
    Client myClient = new AccountServiceClient().GetClientByUsername(System.Web.HttpContext.Current.User.Identity.Name);

    IEnumerable<Account> myAccounts = new AccountServiceClient().GetAccountWithClient(myClient.ClientID);
    List<AccountModel> myList = new List<AccountModel>();

    foreach (Account a in myAccounts.Where(a => a.AccountID == Convert.ToInt32(accountID)))
    {
        myList.Add(new AccountModel() { AccountID = a.AccountID,TypeID_FK = a.TypeID_FK, FriendlyName = a.FriendlyName, Currency = a.Currency, AvailableBalance = a.AvailableBalance});
    }

    return Json(myList, JsonRequestBehavior.AllowGet);
} 
```

这是我的 AJAX

```
function btnSelectClicked(AccountID) {
            var params = '{"accountID":"' + AccountID + '"}';
            $.ajax({
                type: "POST",
                url: "/Account/AllAccountList",
                data: params,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var gridview = "<table>";
                    gridview += "<tr><td id='titleCol'>AccountId</td><td id='titleCol'>Account Type</td><td id='titleCol'>Friendly Name</td><td id='titleCol'>Currency</td><td id='titleCol'>Available Balnce</td></tr>";
                    for (var i = 0; i < data.length; i++) {
                        gridview += "<tr><td>" + data[i].AccountID +
                                    "</td><td>" + data[i].TypeID_FK +
                                    "</td><td>" + data[i].FriendlyName +
                                    "</td><td>" + data[i].Currency +
                                    "</td><td>" + data[i].AvailableBalance + "</td></tr>";
                    }
                    gridview += "</table>";
                    $("#display2").html(gridview);
                },

                error: function (xhr,err) {
                    alert(xhr.responseText + "An error has occurred during processing your request.");
                }
            });
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:04:41.520

尝试改变

```
var params = '{"accountID":"' + AccountID + '"}'; 
```

至

```
var params = {accountID: AccountID }; 
```

看看是否有帮助

**更新**：我没想到会抱怨一个函数......当我使用 jquery ajax 方法时，我使用的是我需要的特定方法，而不是根 ajax() 方法。试试这个也许。

```
function btnSelectClicked(AccountID) {
    var params = {accountID: AccountID };
    $.post("/Account/AllAccountList", data, function(data) {
        var gridview = "<table>";
            gridview += "<tr><td id='titleCol'>AccountId</td><td id='titleCol'>Account Type</td><td id='titleCol'>Friendly Name</td><td id='titleCol'>Currency</td><td id='titleCol'>Available Balnce</td></tr>";
            for (var i = 0; i < data.length; i++) {
                gridview += "<tr><td>" + data[i].AccountID +
                            "</td><td>" + data[i].TypeID_FK +
                            "</td><td>" + data[i].FriendlyName +
                            "</td><td>" + data[i].Currency +
                            "</td><td>" + data[i].AvailableBalance + "</td></tr>";
            }
            gridview += "</table>";
            $("#display2").html(gridview);
        });
    })
    .fail(function(jqXHR, textStatus, errorThrown ){
        alert(jqXHR.responseText + "An error has occurred during processing your request.");
    });
}; 
```

# python - python尝试除了0

> ID：15835950
> 
> 赞同：7
> 
> 时间：2013-04-05T14:02:12.003
> 
> 标签：python

我正在阅读不久前编写的一些 python 代码，并发现了这一点：

```
try:
    # do some stuff
except 0:
    # exception handling stuff 
```

我只是不确定除了 0 是什么意思？我确实有我的猜测：假设什么都没有捕获，即让异常传播，或者它可能是某种开关，通过删除 0 来打开和关闭调试模式，然后将捕获所有内容。

任何人都可以提供一些见解吗？谷歌搜索一无所获...

谢谢！

一些示例代码（根据要求）：

```
 try:
                if logErrors:
                    dbStuffer.setStatusToError(prop_id, obj)
                    db.commit()
            except 0:
                traceback.print_exc() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:12:00.593

据我了解，这对于调试目的非常有用（捕获异常类型）

在您的示例中， 0 充当占位符来确定异常的类型。

```
>>> try:
...   x = 5/1 + 4*a/3
... except 0:
...   print 'error'
... 
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
NameError: name 'a' is not defined
>>> try:
...   x = 5/0 + 4*a/3
... except 0:
...   print 'error'
... 
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
ZeroDivisionError: integer division or modulo by zero 
```

在第一种情况下，例外是`NameError`和`ZeroDivisionError`在第二种情况下。`0`充当被捕获的任何类型异常的占位符。

```
>>> try:
...   print 'error'
... except:
... 
KeyboardInterrupt
>>> try:
...   x = 5/0 + 4*a/3
... except:
...   print 'error'
... 
error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:16:26.900

来自[Python 文档](http://docs.python.org/2/reference/compound_stmts.html#the-try-statement)：

“[...] 如果结果对象与异常“兼容”，则 [except] 子句匹配异常。如果对象是异常对象的类或基类或元组，则对象与异常兼容包含与例外兼容的项目。”

实际上，表达式的类型用于确定 except 子句是否与异常匹配。As`0`是整数类型，并且该类型的异常将匹配。

由于整数不能作为异常引发，因此这是一个`except`不会捕获任何内容的禁用类。

# java - 确定JUNG图中的两个节点是否通过多条路径连接的快速方法？

> ID：15835957
> 
> 赞同：0
> 
> 时间：2013-04-05T14:02:16.790
> 
> 标签：java, graph-theory, jung

给定两个节点`A`并`B`从有向 JUNG 图中，我想确定是否有多个路径 from `A`to `B`（不一定是*最短*路径）。

我只能想到两种方法，都非常耗时。

1.  检索连接两个节点的所有路径（问题[正在查找 JUNG 中的所有路径？](https://stackoverflow.com/questions/5778176/finding-all-paths-in-jung/14983018#14983018)）并检查是否有多个。

2.  使用 class 检索最短路径 `DijkstraShortestPath`，然后断开此路径并再次搜索最短路径。如果还有一个，则意味着有多个路径。请注意，这也需要克隆图形，因为我不想更改原始图形。

我怎样才能更聪明地做到这一点（即*更快*）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:44:36.213

我自己找到了解决方案。

我的问题有一个额外的限制，我只想检查是否有多个路径*仅用于与和 edge 直接连接的两个节点*。这意味着通过简单地计算最短路径，您将始终将这条单边作为路径。

所以，我的问题可以重新表述为：

**除了边缘本身之外，是否有另一条路径连接边缘的两个节点？**

解决方案是使用*加权*最短路径。如果我们为感兴趣的边缘分配非常高的权重，并`1`为所有其他边缘分配权重，那么如果最小距离低于我们的高权重，则答案为**YES**，否则为**NO**。

这是代码：

```
public static boolean areThereMultiplePaths(final Edge edge, DirectedGraph<Entity, Edge> graph) {
        Transformer<Edge, Integer> transformer = new Transformer<Edge, Integer>() {
            public Integer transform(Edge otherEdge) {
                if (otherEdge.equals(edge))
                    return Integer.MAX_VALUE;
                else
                    return 1;
            }
        };

        DijkstraShortestPath<Entity, Edge> algorithm = new DijkstraShortestPath<Entity, Edge>(graph, transformer);
        Double distance = (Double) algorithm.getDistance(edge.getStartNode(), edge.getEndNode());

        return distance < Integer.MAX_VALUE; 
    } 
```

# websocket - 在新的弹出窗口中接听 Twilio 电话

> ID：15835960
> 
> 赞同：4
> 
> 时间：2013-04-05T14:02:29.990
> 
> 标签：websocket, twilio

如果重新加载接收呼叫的浏览器窗口，我将面临实时 Twilio 呼叫被丢弃的情况。有没有办法在不影响实时通话的情况下克服这种挫折？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:14:14.620

Twilio Evangelist here.

Based on your question, I assume you are using the Twilio Client JavaScript SDK? If that is indeed the case, then unfortunately, if the page thats hosting the SDK gets reloaded the connection between the browser and Twilio will drop since the browser is reloading everything, including the JavaScript SDK.

There are a couple of different techniques I can think of off the top of my head that you can use to help avoid page reloads, and another idea that could help you recover a call where the connection to the browser has dropped because of a page reload. A lot of this is going to depend on your specific app and the experience you are trying to create for your users.

So to help avoid having to reload the page:

1) Use AJAX requests to your server in order to avoid page reloads. If your page includes content like a form, or you want to update the page content with data form the server, you can look using AJAX requests to the server instead of a normal full page postback to submit the form, or to retrieve the data form the server. This would help in avoiding having to reload the entire page in those two scenarios.

2) Use an iFrame to host your page content, and then put the Twilio SDK in the parent page (the one that defined the iFrame). This would let you reload the content hosted in the iframe, without having to reload the entire host page, avoiding a reload the the Twilio library. The downside to this is that communicating between content in an iframe and its host can get really messy fast.

Neither of these two techniques is fool-proof. Obviously a user can always just hit the refresh button on their browser, and thats going to cause the connection to drop.

In a case where the page does get reloaded, and the connection from Twilio to the browser gets dropped, one idea is to leverage Twilios capability to help reconnect the caller together. When a user calls your twilio phone number, instead of connecting them directly to the Twilio Client running in the browser (by dialing a client with `<Client>`), instead dial that caller into a conference `<Conference>`, and then have the browser client connect into that same conference. The benefit to that is if the browser disconnects, the original caller won't get hung up on, they will still be sitting in the conference room. As long as you've saved the Conference SID or name, you can have the browser client reconnect to that conference.

Hope that helps point you in the right direction.

# c - 最近的点对算法变体

> ID：15835961
> 
> 赞同：6
> 
> 时间：2013-04-05T14:02:34.850
> 
> 标签：c, graph, depth-first-search, closest-points

我知道这可能是重复的，但它似乎是“最近点对”算法的一种变体。

> 给定单位正方形中的一组*N个点 (x, y) 和距离**d*，找到**所有**点对，使得它们之间的距离最多为*d*。

对于大*N*，蛮力方法不是一种选择。除了“扫线”和“分而治之”的方法，还有更简单的解决方案吗？这对点是无向图的边缘，我需要遍历它并说出它是否连接（我已经使用 DFS 做过，但是当 N = 100 万时它永远不会完成！）。

欢迎任何伪代码、评论或想法，谢谢！

编辑：我在 Sedgewick 的书上找到了这个（我现在正在查看代码）：

> 当 N 足够大时，程序 3.18 使用一个二维的链表数组将程序 3.7 的运行时间提高了大约 1/d2。它将单位正方形分成大小相等的较小正方形的网格。然后，对于每个正方形，它建立一个包含所有落入该正方形的点的链表。二维数组提供了立即访问靠近给定点的点集的能力；链表提供了存储它们可能落入的点的灵活性，而我们不必提前知道有多少点落入每个方格中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:30:10.087

我们实际上是在寻找以 (x,y) 为中心、半径为 d 的圆内的点。

*包围*圆的正方形是中心 (x,y) 和边 2d 的正方形。这个正方形之外的任何点都不需要检查，它已经出来了。因此，如果 abs(xa - x) > d 或 abs(ya -yb) > d，则点 a (xa, ya) 出局。

由该圆*包围*的正方形也是中心 (x,y) 和对角线 2d 的正方形。这个正方形之外的任何点都不需要检查，它在里面。所以，如果 abs(xa - x) < (d * 1.412) 或 abs(ya -yb) < ( d * 1.412）。

这两个简单的规则相结合，大大减少了要检查的点数。如果我们按它们的 x 对点进行排序，过滤可能的点，按它们的 y 排序，我们就会得到我们真正需要计算完整距离的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:04:33.777

对于任何给定点，您可以使用曼哈顿距离（x-delta 加 y-delta）启发式过滤掉大部分不在距离“d”内的点 - 过滤掉曼哈顿距离大于 (sqrt (2) * d)，然后对剩余的点进行昂贵且精确的距离测试。

# c# - 如何从文本文件读取到数组？

> ID：15835965
> 
> 赞同：-7
> 
> 时间：2013-04-05T14:02:40.910
> 
> 标签：c#, arrays, readfile

大家怎么了

我的代码中有这个问题，我无法弄清楚如何从文本文件中读取并将其放入 c# 中的双类型数组 [1024,8] 的二维数组中。

```
0   148.9    19.4    20.2   112.6    41.9   205.7    46.7    87.2 
1    41.4    97.1    86.4   102.5    99.1   183.1    47.7    84.0
2   154.8   303.1   252.2   110.7    74.5    59.7   193.7   361.6 
.
.
1023    40.8   136.8   222.1    39.5   104.9    35.3    76.0   111.4 
```

* * *

我试图逐行读取这个文件，但这种方式对我没有帮助

```
static void Main(string[] args)
{
    int counter = 0;
    string line;
    double[] task = new double[8];
    // Read the file and display it line by line.
    System.IO.StreamReader file =
       new System.IO.StreamReader("c:\\test.txt");
    //int count = 0;
    while ((line = file.ReadLine()) != null && counter <= 1023)
    {
        //count++;
        //Console.WriteLine(count);

        string[] numbers = new string[8];
        int numCount = 0;
        for (int i = 0; i < line.Length; i++)
        {
            if (line[i] != ' ')
            {
                numbers[numCount] = "";
                while (line[i] != ' ')
                {
                    numbers[numCount] += line[i];
                    i++;
                }
                numCount++;
            }
        }
        for (int i = 0; i < 8; i++)
        {
            task[i] = Convert.ToDouble(numbers[i]);
        }
        counter++;
        Console.WriteLine("The array contain:");
        for (int i = 0; i < 8; i++)
            Console.WriteLine(task[i]);
    }
    file.Close();
    // Suspend the screen.
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:39:30.853

> 你的代码看起来很整洁！替换您的代码
> `for (int i = 0; i < line.Length; i++)`并将其放置

```
int i=0;

    while (i < line.Length)
       {

            if (line[i] != ' ')
           {
               numbers[numCount] = "";
               while (line[i] != ' ')
               {

                   numbers[numCount] += line[i];
                   i++;
                   if (i >= line.Length) break;
               }
               numCount++;

           }
           i++;
       }
        for (int ui = 0; ui < 8; ui++)
       {
           task[ui] = Convert.ToDouble(numbers[ui]);
       }

       counter++;

       Console.WriteLine("The array contain:");
       for (int ui = 0; ui < 8; ui++)
           Console.WriteLine(task[ui]); 
```

# c++ - 我应该在那里插入什么值？

> ID：15835968
> 
> 赞同：0
> 
> 时间：2013-04-05T14:02:41.940
> 
> 标签：c++

我正在尝试为我的键盘设置驱动程序或类似的东西。我正在根据说明编辑别人的代码，但有一件事困扰着我。

这是代码

```
/* to add a new device, simply create a new DEVICE() in this list */
/* Fields are: "Name",VendorID,ProductID,Capabilities */
const libg15_devices_t g15_devices[] = {
    DEVICE("Logitech G510",0x46d,0xc22d, G15_LCD|G15_KEYS|G15_DEVICE_5BYTE_RETURN|G15_DEVICE_IS_SHARED),
    DEVICE("Logitech G15",0x46d,0xc222,G15_LCD|G15_KEYS),
    DEVICE("Logitech G11",0x46d,0xc225,G15_KEYS),
    DEVICE("Logitech Z-10",0x46d,0x0a07,G15_LCD|G15_KEYS|G15_DEVICE_IS_SHARED),
    DEVICE("Logitech G15 v2",0x46d,0xc227,G15_LCD|G15_KEYS|G15_DEVICE_5BYTE_RETURN),
    DEVICE("Logitech Gamepanel",0x46d,0xc251,G15_LCD|G15_KEYS|G15_DEVICE_IS_SHARED),
    DEVICE(NULL,0,0,0)
};

/* return device capabilities */
int g15DeviceCapabilities() {
    if(found_devicetype>-1)
        return g15_devices[found_devicetype].caps;
    else
        return -1;
} 
```

第一个 DEVICE 条目是我的目标，也是我添加的代码的一部分。这是我停下来的地方。

```
int setLEDs(unsigned int leds)
{
    int retval = 0;
    unsigned char m_led_buf[4] = { 2, 4, 0, 0 };
    unsigned char g510_led_buf[2] = {4, 0};
    m_led_buf[2] = ~(unsigned char)leds;

    if(g15DeviceCapabilities() & G15_DEVICE_G510) { 
```

在 G15_DEVICE_G510 上它停止。我不知道我应该用什么值代替它。

如果此信息不足，这是整个代码的粘贴箱。

[Pastebin 链接](http://pastebin.com/N15Fq0S7)

谢谢。:)

编辑：我发现函数是在另一个文件中定义的。他们来了。

[Pastebin 链接](http://pastebin.com/TnMApcvd)

所以我真正需要做的是在该文件中以某种方式定义 G15_DEVICE_G510 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:38:46.103

这就是它应该这样做的方式。

```
#define G15_DEVICE_G510 32
#define G510_STANDARD_KEYBOARD_INTERFACE    0x0 
```

然后在代码的稍后位置

```
 int setG510LEDColor(unsigned char r, unsigned char g, unsigned char b); 
```

我设法从[这里找到了一个文件](http://g15tools.svn.sourceforge.net/viewvc/g15tools/trunk/libg15/libg15.h?view=markup&pathrev=324)

然后我需要编辑我必须这样做的一行。DEVICE("Logitech G510",0x46d,0xc22d，`G15_LCD|G15_KEYS|G15_DEVICE_5BYTE_RETURN|G15_DEVICE_IS_SHARED|G15_DEVICE_G510),` 它的代码原来是一个自称“众”的家伙写的

所以谢谢大家:)

# android - 无法从我的内部应用程序目录播放视频

> ID：15835970
> 
> 赞同：0
> 
> 时间：2013-04-05T14:02:49.360
> 
> 标签：android

看起来我无法播放存储在我的内部应用程序目录中的视频。

我有视频存储在`/data/data/my.package.org/files/`

我正在尝试使用从那里播放文件

```
String fpath = "/data/data/my.package.org/files/video.mpg"
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(fpath), "video/*"); 
```

但是 Android 默认视频播放器和一些外部视频播放器（MX 播放器）都说“无法播放此视频”。

而当我将视频保存到 SD 卡时，它们可以正常播放。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:53:02.157

那么这很容易 - 只需完成我提供的答案的后半部分并将它们写出来。/data/data/ 文件夹永远不会被您的应用程序以外的任何人查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:33:25.280

将您的视频放在 res\raw 文件夹中。然后将其复制到视频播放器等应用程序可以读取它们的外部目录。只有您的应用程序可以读取 /data/data/blah....

如果它在 res\raw 中，那么

```
 typeName = sourceSink.Types.video.toString();
         for (sourceSink.VideoFiles video: sourceSink.VideoFiles.values() ){
             resourceName = video.toString(); 
             fileName = resourceName + ".mp4";
             resource = getResources().getIdentifier(resourceName, "raw", "com.invodo.allshareplay");
             createExternalStoragePublicFile(typeName,fileName,resource);
         } 
```

然后你可以用它来复制它：

```
 void createExternalStoragePublicFile(String fType, String fname, int res ) {
        // Create a path where we will place our picture in the user's
        // public pictures directory.  Note that you should be careful about
        // what you place here, since the user often manages these files.  For
        // pictures and other media owned by the application, consider
        // Context.getExternalMediaDir().
        File path = null;
        if (((fType.equals(sourceSink.Types.photo.toString())) || (fType.equals(sourceSink.Types.file.toString())) ) ){
            path = Environment.getExternalStoragePublicDirectory(
                    Environment.DIRECTORY_PICTURES);
            }
        if (fType.equals(sourceSink.Types.music.toString())) {
            path = Environment.getExternalStoragePublicDirectory(
                    Environment.DIRECTORY_MUSIC);
            }
        if (fType.equals(sourceSink.Types.video.toString())) {
            path = Environment.getExternalStoragePublicDirectory(
                    Environment.DIRECTORY_MOVIES);
        }
        File file = new File(path, "/" + fname);

        try {
            // Make sure the Pictures directory exists.
            path.mkdirs();

            // Very simple code to copy a picture from the application's
            // resource into the external file.  Note that this code does
            // no error checking, and assumes the picture is small (does not
            // try to copy it in chunks).  Note that if external storage is
            // not currently mounted this will silently fail.
            InputStream is = getResources().openRawResource(res);
            OutputStream os = new FileOutputStream(file);
            byte[] data = new byte[is.available()];
            is.read(data);
            os.write(data);
            is.close();
            os.close();

            scanMedia(file);

        } catch (IOException e) {
            // Unable to create file, likely because external storage is
            // not currently mounted.
            Log.w("ExternalStorage", "Error writing " + file, e);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:10:35.500

将您的视频放在资产文件夹中，并使用此代码通过 MediaPlayer 播放视频

```
InputStream is = getResources().getAssets().open("video.mpg"); 
```

或者

将您的视频放在资产文件夹中，然后...

```
String fpath = "/data/data/my.package.org/assets/video.mpg"
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(fpath), "video/*"); 
```

# winapi - 在进程内和进程外解析 WPAD 有什么区别？

> ID：15835972
> 
> 赞同：2
> 
> 时间：2013-04-05T14:02:51.053
> 
> 标签：winapi, winhttp, pac, autoproxy

在 WinHTTP 自动代理 API 中，[WINHTTP_AUTOPROXY_OPTIONS](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384123%28v=vs.85%29.aspx)将接受 WINHTTP_AUTOPROXY_RUN_INPROCESS 和 WINHTTP_AUTOPROXY_RUN_OUTPROCESS_ONLY 的标志。这两个标志有什么区别，你什么时候使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-01T16:49:22.450

想通了。进程外方法使用被认为更安全的 WinInet 服务。 [虽然 MSDN 没有明确说明](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384266%28v=vs.85%29.aspx)，但这大概是因为 in-proc 选项意味着 PAC 的执行共享相同的应用程序上下文。

# java - 在多对多关系中提高 Hibernete 性能

> ID：15835974
> 
> 赞同：0
> 
> 时间：2013-04-05T14:02:52.887
> 
> 标签：java, hibernate, jakarta-ee

我有两个以多对多关系连接的表。数据库设置在另一台服务器上，当我尝试获取有关其中一个记录的信息时，如果这些信息包括第二个表的总数，我会看到非常大的性能问题。

第一个豆子：

```
package dbaccess.beans.newsletter;

import java.sql.Timestamp;
import java.util.HashSet;
import java.util.Set;

import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.persistence.SequenceGenerator;
import javax.persistence.Column;
import javax.persistence.Table;

import dbaccess.beans.RegisteredUser;

@Entity
@Table(name="NEWSLETTER_LIST")
public class NewsletterList {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "G1")
    @SequenceGenerator(name = "G1", sequenceName = "NEWSLETTER_LIST_SEQ", allocationSize = 1, initialValue= 1)
    @Column(name = "LIST_ID", unique = true, nullable = false)
    private Long listID;

    @Column(name = "LIST_NAME", nullable = false, length = 50)
    private String listName;

    @ManyToMany(fetch = FetchType.LAZY, cascade = {})
    @JoinTable(name = "NEWSLETTERLISTS_USERS", joinColumns = { 
            @JoinColumn(name = "LIST_ID", nullable = false) }, 
            inverseJoinColumns = { @JoinColumn(name = "USER_ID", nullable = false) })
    private Set<RegisteredUser> users = new HashSet<RegisteredUser>(0);

    public Long getListID() {
        return listID;
    }

    public void setListID(Long listID) {
        this.listID = listID;
    }

    public Set<RegisteredUser> getUsers() {
        return users;
    }

    public void setUsers(Set<RegisteredUser> users) {
        this.users = users;
    }

} 
```

第二个豆：

```
package dbaccess.beans;

import java.sql.Timestamp;
import java.util.HashSet;
import java.util.Set;

import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.ManyToMany;
import javax.persistence.SequenceGenerator;
import javax.persistence.Column;
import javax.persistence.Table;

import dbaccess.beans.newsletter.NewsletterList;

@Entity
@Table(name="USER")
public class RegisteredUser {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "G1")
    @SequenceGenerator(name = "G1", sequenceName = "USER_SEQ", allocationSize = 1, initialValue= 1)
    @Column(name = "USER_ID", unique = true, nullable = false)
    private Long usrID;

    @Column(name = "GIVENNAME", length = 20)
    private String usrGivenName;

    @Column(name = "FAMILYNAME", length = 20)
    private String usrFamilyName;

    @ManyToMany(fetch = FetchType.EAGER, mappedBy = "users", cascade = {})
    public Set<NewsletterList> newsletterList = new HashSet<NewsletterList>();

    public Long getUsrID() {
        return usrID;
    }

    public void setUsrID(Long usrID) {
        this.usrID = usrID;
    }

    public String getUsrGivenName() {
        return usrGivenName;
    }

    public void setUsrGivenName(String usrGivenName) {
        this.usrGivenName = usrGivenName;
    }

    public String getUsrFamilyName() {
        return usrFamilyName;
    }

    public void setUsrFamilyName(String usrFamilyName) {
        this.usrFamilyName = usrFamilyName;
    }

    public Set<NewsletterList> getNewsletterList() {
        return newsletterList;
    }

    public void setNewsletterList(Set<NewsletterList> newsletterList) {
        this.newsletterList = newsletterList;
    }

    @Override
    public String toString() {
        return "RegisteredUser[usrID=" + usrID + ", usrGivenName=" + usrGivenName + ", usrFamilyName=" + usrFamilyName + "]";
    }

} 
```

问题是当我尝试执行这段代码时：

```
session = dbService.getSessionFactory().openSession();
Criteria c = session.createCriteria(NewsletterList.class);
c.add(Restrictions.eq("listID", listID));
List<NewsletterList> newsletterList = (List<NewsletterList>) c.list();

//below is most expensive
newsletterList.get(0).getUsers().size() 
```

有什么办法可以提高这种性能吗？提前致谢。

PS当我有大约。一个列表中有 70 个用户，请求上述代码大约需要 5-6 秒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:08:25.683

`newsletterList.get(0).getUsers().size()`使 Hibernate 加载所有注册到时事通讯的用户，只获取注册用户的数量。

使用 ad hoc HQL 查询来统计注册用户的数量：

```
select count(user.usrID) from RegisteredUser user
inner join user.newsletterList newsLetter
where newsLetter.listID = :listId 
```

请注意，执行上述代码的时间为 5-6 秒，但实在是太长了。您可能需要检查连接表的连接列上是否放置了索引。

另请注意，您可以简单地使用`session.get(NewsLetter.class, listId)`通过 ID 获取列表。

最后，如果您的 ID 都被命名为`id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:09:38.297

您可能想尝试使用[Hibernate Criteria API](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)来查询特定时事通讯的用户数量。它看起来大致是这样的：

```
Criteria crit = session.createCriteria(RegisteredUser.class);
crit.setProjection(Projections.rowCount());
crit.add(Restrictions.eq("listID", listID));
return (Long) crit.uniqueResult(); 
```

# php - 从 PHP 页面链接以在固定大小的窗口中打开

> ID：15835979
> 
> 赞同：0
> 
> 时间：2013-04-05T14:03:07.200
> 
> 标签：php, javascript, hyperlink

我正在尝试在 PHP 搜索结果页面中创建一个链接，该链接允许用户单击“打开”并出现一个 296 x 278 的窗口，其中显示更多信息。

所有的 PHP 工作正常，我只是无法从 PHP 页面打开链接并在固定大小的窗口中打开它。

我尝试了多种不同的 javascript，但在尝试将其嵌入到我的 $output 语句中时，我似乎无法使其正常工作。

这是我想在固定大小的窗口中打开的当前 $output 语句。它当前在新选项卡中打开页面。

```
$output .= "<tr><td>Drag & Drop:</b></td><td><a href='details/" . $row['idrop'] . "' target='_blank'>" . " Open " . "</a>"; 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:11:53.810

试试这个：

```
$output .= "<tr><td>Drag & Drop:</b></td><td><a href='#_' target='_blank' onclick=\"open_me('details/{$row['idrop']}');\">Open</a>"; 
```

aand 这是你的 JS 函数

```
<script>
function open_me(h_rf)
{
    window.open(h_rf,'_blank','width=296,height=278,toolbar=0,menubar=0,location=0,status=0,scrollbars=1,resizable=0,left=0,top=0');

    return false;
}
</script> 
```

从此处阅读有关此功能的更多信息：http: [//www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:19:46.197

在您的代码中包含这个小的 javascript 片段

```
<script language="javascript" type="text/javascript">

function popitup(url) {
    newwindow=window.open(url,'name','height=278,width=296');
    if (window.focus) {newwindow.focus()}
    return false;
}

</script> 
```

对于你的 php $output 变量

```
$output .= "<tr><td>Drag & Drop:</b></td><td><a href=""  onclick='return popitup(\"details/" . $row['idrop'] . "\")'>" . " Open " . "</a>"; 
```

在执行此代码之前检查转义字符。

# javascript - 逆向工程 Web 应用程序

> ID：15835987
> 
> 赞同：5
> 
> 时间：2013-04-05T14:03:22.077
> 
> 标签：javascript, web, protocols, reverse-engineering

哈哈，Stackoverflow。

我经常遇到 Web 应用程序，并想知道，“我如何编写一个与之交互的脚本/应用程序？” （纯粹是学术性的，不是为了发送垃圾邮件！）。

例如，Omegle 网站；人们已经编写了 Python 脚本来与网站交互并在不打开浏览器的情况下运行聊天......如何？我承认 WEB 编程不是我最擅长的领域，但我真的很想知道如何从此类应用程序中提取正在使用的协议，并使用这些知识来创建自定义应用程序和修补服务。

所以基本上，我怎样才能弄清楚网络应用程序的内部工作原理（即 imeetzu.com 以便我可以编写代码从我的桌面与它交互？

先感谢您！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T14:11:52.053

You'll need a set of tools to start with:

*   A browser with a debugging window (Chrome is particularly good for this). This will allow you in particular to access the network calls that your browser *directly* makes (there's a caveat coming), and to see:

    *   their content
    *   their parameters
    *   their target
*   A network packet sniffer to trace down anything that goes through Flash (or WebSockets). I'm quite fond of Ethereal (now called Wireshark), though if you're in the US, you could be breaking the law by using it (depends on the use you make of it). This will allow you to see every TCP frame that enters and leaves your network interface.

The knowledge you will need:

*   Ability to identify and isolate a network stream. This comes through practice
*   Knowledge of the language the app you are trying to reverse-engineer is written in. If JavaScript isn't your cup of tea, avoid JS-based stuff
*   Maths and cryptography. Data may very well be encrypted/obfuscated/stegg-ed from time to time. Be aware and look out for it.

In this particular case, looks like you might have to deal with Flash. There are additional resources to help on this, although all of them are non-free. There is one particularly good Flash decompiler called [SoThink SWF decompiler](http://www.sothink.com/product/flashdecompiler/), which allows you to turn a SWF into a FLA or a collection of AS sources.

That's all for the tools. The method is easy - look what data comes in/out and figure out by elimination what is what. If it's encrypted, you'll need IVs and samples to hope to break it (or just decompile the code and find how the key/handshake is done). This is a very, very extensive field and I haven't even touched the tip of the iceberg with this - feel free to ask for more info.

(How do I know all this? I was a contributor to the eAthena project, which reverse-engineered a game protocol)

# eclipse - 默认情况下为 m2e 启动配置启用工作区分辨率

> ID：15835989
> 
> 赞同：1
> 
> 时间：2013-04-05T14:03:24.987
> 
> 标签：eclipse, m2eclipse, m2e

当我`Run as > Maven Build`在 Eclipse 中使用时，默认情况下未选中“解决工作区工件”复选框。是否可以默认检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:27:44.943

Maven 插件的数量可能会与“解决工作区工件”功能（例如 maven war 插件）发生冲突，因此一般不建议使用。

但是，如果您确实需要该功能，“Run as / Maven build”会记住以前启动和保存的配置，您可以从同一菜单或使用键盘快捷键 Alt-Shift-X、M 再次调用它们。

# vb.net - 在VB中将消息显示为表格

> ID：15835993
> 
> 赞同：0
> 
> 时间：2013-04-05T14:03:36.010
> 
> 标签：vb.net

我是编程新手，我必须设计一个项目作为我 Uni 项目的一部分……我几乎完成了 70% 的设计，但想将按摩展示为桌子。

我应该有数据库吗？？？...我怎样才能将它链接到消息？

我的代码是

```
 Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        If TextBox1.Text = Nothing Then MessageBox.Show("Please, Find Your Calories First")
        If TextBox1.Text > "2400" Or TextBox1.Text > "2300" Then MessageBox.Show("What should I write here????") 
```

我应该有数据库吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:52:49.480

不知道你说的桌子是什么意思....但是有几点...

您应该从按钮单击中提取代码，这样您就可以在另一个事件中重新使用它。您只需创建一个新子并从按钮单击调用它，如下所示

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    CaloriesChecker()

End Sub 
```

这是您将方法重写为案例语句，已将整数变量“卡路里”分配给您的文本框，这将确保您可以评估数字。

使用 case 语句，您可以设置卡路里的界限......对不起，我不确定您所说的表格是什么意思。

```
Private Sub CaloriesChecker()

    Dim calories As Integer = TextBox1.Text
    Dim message As String

    Select Case calories
        Case ""
            message = "Please, Find Your Calories First"
        Case Is > 2300
            message = "whatever you want to say"
    End Select

    messagebox.show(message)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:31:12.770

除了显示消息之外，您还需要一个数据库来填写餐点赞

```
+-----------+-------------------+
| Meal Type |    Calories       |
+-----------+-------------------+
| Bread     |     XXXXXX        |
|  ......   |     ..........    |
+-----------+-------------------+ 
```

像这样的东西，因为它会让用户很容易输入，甚至不需要他们输入他们的卡路里。每次他们挑选食物时，文本框都会自动从用户挑选的食物中获取价值（卡路里）。

为什么我这样建议？因为不是您的程序的每个用户都知道确切的卡路里。所以最好的办法是创建一个数据库来包含它。

问：如果他们的饭菜不包含在数据库中怎么办？A : 那么你应该做一个按钮来调用新的表单来添加新的膳食和卡路里。

这不是你想要的吗？还有关于你的代码

```
If TextBox1.Text = Nothing Then MessageBox.Show("Please, Find Your Calories First")
        If TextBox1.Text > "2400" Or TextBox1.Text > "2300" Then MessageBox.Show("What should I write here????") 
```

我认为对于希望他/她的程序受到其他人喜爱的程序员来说，这不是最好的策略。因为如果他们很难找到它，他们会觉得这个程序很难使用然后很无聊，然后删除。不是吗？

所以，最好是新建数据库。关于计算，您可以将按钮计算为真正的卡路里，以成为您想要最好的年龄或体重等的消费者

# c++ - 消除邻接列表中的非唯一条目

> ID：15835996
> 
> 赞同：0
> 
> 时间：2013-04-05T14:03:58.360
> 
> 标签：c++, maze, adjacency-list

我目前正在为我的上层 C++ 类开发一个项目，我们正在构建一个程序来制作迷宫，然后解决它，制作所述迷宫的 PNG。很酷的东西。无论如何，我目前正在我需要制作迷宫的地方。我的程序使有效的迷宫很好，但我必须使每个数字输出都是唯一的。输出只是在 2d 矩阵中吐出两个指标，它们之间有墙，3X4 迷宫的样本输出如下：

> rjeffor1:hydra20 ~/cs302/labs/lab5> ./mazemake 3 4 <- 9:49AM
> 
> 1 2
> 
> 1 5
> 
> 2 1
> 
> 2 3
> 
> 3 2
> 
> 5 1
> 
> 5 9
> 
> 6 7
> 
> 7 6
> 
> 8 9
> 
> 9 8
> 
> 9 5

但是，我的最后一个问题是我需要摆脱重复的墙，例如 1 2 和 2 1。编辑：我的意思是只要摆脱 2 1，我仍然需要墙，因此需要 1 2。

这是我尝试解决问题的函数：

```
void aL::make_unique()
{
    vector<int>::iterator it, it0;

    //need to iterate thru all but last index

    for (int i=0; i<(int)adjList.size()-1; i++) {

        for (int j=0; j<(int)adjList.size(); j++) {

            //find it

            if (i!=j) {
                it0 = std::find(adjList[i].begin(), adjList[i].end(), j);
                it = std::find(adjList[j].begin(), adjList[j].end(), i);
                if (it!=adjList[j].end() && it!=adjList[j].end())
                    //erase it if anything is there
                    adjList[j].erase(it);
            }
        }
    }
} 
```

感谢您的帮助，我的大脑在这一点上已经完成了

编辑：这是我填充邻接列表的方式，基于每个索引正上方和下方的索引

```
aL::aL (const int &rows, const int &cols)
{
    adjList.resize(rows*cols);
    //run thru and figure out where indicies AREN'T
    //to fill in their adjacency list
    for (int i=0; i<(int)adjList.size(); i++) {
        //if not on the left edge
        if (i%cols!=0)
            adjList[i].push_back(i-1);
        //not on the right edge
        if ((i+1)%cols!=0)
            adjList[i].push_back(i+1);
        //not on the top edge
        if (i>=cols)
            adjList[i].push_back(i-cols);
        //not on the bottom edge
        if (i<(rows*cols)-cols)
            adjList[i].push_back(i+cols);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:09:02.393

如果您在添加到列表时进行检查，则可以消除后处理的需要并在最后使其唯一。如果“b a”已经存在，则不要添加“a b”。