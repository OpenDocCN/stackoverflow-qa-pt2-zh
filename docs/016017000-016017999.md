# StackOverflow 问答 16017000-16017999

# azure - Azure TableQuery 是否在内部处理延续令牌？

> ID：16017001
> 
> 赞同：7
> 
> 时间：2013-04-15T13:53:17.340
> 
> 标签：azure, azure-storage, azure-table-storage

我正在尝试为延续令牌和 Azure 存储库 2.0 的问题找到明确的答案，因为 2.0 之前的版本 (StorageClient) 和当前版本 (Storage) 之间似乎存在显着差异。

除了没有为我澄清上述问题的 MSDN 文档之外，很难找到与库的 2.0 及更高版本特别相关的延续令牌的信息，因为早期版本的命名非常相似（CloudTableQuery 与 TableQuery）搜索结果会被有关早期版本的信息污染。

那么，延续令牌是否在 Microsoft.WindowsAzure.Storage 客户端（存储库的 2.0 版）内部处理？我可以相信我返回的结果集是完整的结果集吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T14:03:54.810

在对表执行查询时，有两种方法存在问题：[`CloudTable.ExecuteQuery`](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.table.cloudtable.executequery.aspx)和[`CloudTable.ExecuteQuerySegmented`](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.table.cloudtable.executequerysegmented.aspx). 第一个 (ExecuteQuery) 将在内部处理延续令牌，而第二个 (ExecuteQuerySegmented) 将返回延续令牌作为结果集的一部分，您可以使用它来获取下一组数据。

# c# - 如何从 Amazon S3 存储桶中获取最旧的添加对象？

> ID：16017002
> 
> 赞同：2
> 
> 时间：2013-04-15T13:53:22.527
> 
> 标签：c#, amazon-web-services, amazon-s3, storage

我在一个包含一些对象的亚马逊存储桶中有一个文件夹。

如何获取最旧的添加对象？

```
 public FileMetaData Poll()
        {
            var config = new AmazonS3Config();
            config.ServiceURL = "s3.amazonaws.com";
            config.CommunicationProtocol = Protocol.HTTP;

            string bucketName = "bucketname1";
            string accessKey = "accesskey1";
            string secretKey = "secretkey1";

            Amazon.S3.AmazonS3 client = AWSClientFactory.CreateAmazonS3Client(accessKey,
                secretKey,
                config);

            var request = new GetObjectRequest();
            request.WithBucketName(bucketName);

            // how to get the oldest object?

            GetObjectResponse response = client.GetObject(request);

            // todo
            return null;
        } 
```

我已经尝试过下面的代码，它工作正常，但问题是它加载了所有对象，然后找到最旧的，我认为这是一个不好的做法：

```
var request = new ListObjectsRequest()
                .WithBucketName(bucketName)
                .WithPrefix(this._folderPath);

            ListObjectsResponse response = client.ListObjects(request);

            S3Object s3Object = response.S3Objects
                .Where(p => !p.Key.EndsWith("_$folder$"))
                .OrderBy(k => k.LastModified).FirstOrDefault();

            var getObjectRequest = new GetObjectRequest()
                .WithBucketName(bucketName)
                .WithKey(s3Object.Key);

            GetObjectResponse getObjectResponse = client.GetObject(getObjectRequest);

            // provider 
            string provider = getObjectResponse.Metadata.Get("x-amz-meta-provider");
            string site = getObjectResponse.Metadata.Get("x-amz-meta-sitename");
            string identifier = s3Object.Key.Remove(0, this._folderPath.Length);
            string xmlData = new StreamReader(getObjectResponse.ResponseStream, true).ReadToEnd();

            return new FileMetaData()
                {
                    Identifier = identifier,
                    Provider = provider,
                    SiteName = site,
                    XmlData = xmlData
                }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-04T01:18:59.183

你的代码看起来不错。“列出对象请求”只会浪费几秒钟，但据我所知，这是强制性的。

我在您的代码中看到的一个问题是您没有处理每个请求返回的最大密钥数量为 1000 的事实。如果您可能有更多的密钥，那么您必须检查列表是否被截断，更改请求标记到下一个并发出更多请求。

```
 var request = new ListObjectsRequest()
                    .WithBucketName(bucketName)
                    .WithPrefix(this._folderPath);

    ListObjectsResponse response;
    S3Object s3Object = null;
    do
    {
        response = client.ListObjects(request);
        S3Object tempS3Object = response.S3Objects
            .Where(p => !p.Key.EndsWith("_$folder$"))
            .OrderBy(k => k.LastModified).FirstOrDefault();
        if (s3Object != null)
        {
            if (s3Object.LastModified < tempS3Object.LastModified)
                s3Object = tempS3Object;
        }
        else s3Object = tempS3Object;

        request.Marker = response.NextMarker;
    } while (response.IsTruncated);

    var getObjectRequest = new GetObjectRequest()
        .WithBucketName(bucketName)
        .WithKey(s3Object.Key);

    GetObjectResponse getObjectResponse = client.GetObject(getObjectRequest);

    // provider 
    string provider = getObjectResponse.Metadata.Get("x-amz-meta-provider");
    string site = getObjectResponse.Metadata.Get("x-amz-meta-sitename");
    string identifier = s3Object.Key.Remove(0, this._folderPath.Length);
    string xmlData = new StreamReader(getObjectResponse.ResponseStream, true).ReadToEnd();

    return new FileMetaData()
    {
        Identifier = identifier,
        Provider = provider,
        SiteName = site,
        XmlData = xmlData
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T02:22:25.040

> 它加载所有对象然后找到最旧的

实际上，您不是在加载所有对象，而是在列出它们（差别很大）。S3 不是数据库（也不是文件系统），因此如果您想要轻松访问，则必须构建自己的本地索引。（或使用 DynamoDB、SimpleDB、RDS 等）

更改您的密钥以包含日期/时间对您没有*多大*帮助。您可以使用前缀和分隔符来帮助缩小搜索范围。（即，如果每个文件都以“YYYY-MM-DD-HHMM”开头，您可以将分隔符设置为“-”以查找最早的年份，然后将前缀=“YYYY-”和分隔符“-”设置为查找最早的月份等.)

# weblogic - 如何将 Jprofiler 与 weblogic 托管服务器连接？

> ID：16017004
> 
> 赞同：3
> 
> 时间：2013-04-15T13:53:25.683
> 
> 标签：weblogic, jprofiler

我正在尝试将 Jprofiler7 连接到远程 weblogic10.3 托管服务器。我能够在 JProfiler 中连接并查看管理控制台线程和内存使用情况，但不能用于部署在托管服务器上的应用程序。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-12T13:56:44.680

我在使用 JProfiler9 的 Windows 上使用 WebLogic 12C 时遇到了同样的问题，并解决了如下问题：

1.  允许 JProfiler 通过分析 WebLogic 12C 创建 startWebLogic_jprofiler.cmd，但此时不要附加分析器。
2.  编辑 startManagedWebLogic.cmd 并调用 startWebLogic_jprofiler.cmd 而不是 startWebLogic.cmd
3.  在命令提示符处执行 startWebLogic.cmd
4.  在命令提示符处执行 startManagedWebLogic.cmd
5.  在 JProfiler 中，单击“启动中心”图标。单击“新服务器集成”。选择“通用应用程序服务器”，然后选择“等待来自 JProfiler GUI 的连接”。当分析器启动时，它会从托管的 weblogic 服务器收集数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:56:29.447

在这种情况下，您正在分析错误的服务器。JProfiler (-agentpath:...) 的 VM 参数必须添加到执行应用程序的 JVM。

# php - 当行内容来自数据库时，在按钮单击时动态添加表行

> ID：16017006
> 
> 赞同：3
> 
> 时间：2013-04-15T13:53:28.080
> 
> 标签：php, jquery, mysql

嗨，我正在开发一个表单，当用户单击添加按钮时，它将动态生成一个表格行，但问题是我正在加载要从外部 php 文件生成的行，但它似乎不起作用我正在使用外部文件，因为该行将包含一个组合框，它将由 mysql 数据填充，任何人都可以帮助我这是我的脚本

```
$(document).ready(function() {
    //var currentItem = $('#items').val();
    $('#addnew').click(function(){
        var ctr = $('#items').val();
        ctr++;
        $.post('purch_srch.php', {ctr : ctr}, function(data) {
            $(data).appendTo('#data')
            $('#items').val(ctr);                        
        });
    }); 
}); 
```

这是我的 php

```
<?php
session_start();

require("includes/dbconnect.php");
include ('includes/function.php');

mysql_select_db($_SESSION["zdbname"]);

if (isset($_POST['ctr'])) {
    $ctr = $_POST['ctr'];

    echo '<tr>';

    echo '<td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="ord_'.$ctr.'" class="form-input-oth"/></td>';
    echo "<td>";
    echo '<select data-placeholder="Party" style="width:120px;" name="item_'.$ctr.'" class="chzn-select-deselect" >';
    echo "<option value = '' ></option>";
    $get = mysql_query("SELECT * FROM accmast WHERE `grpcode`='010'") or die(mysql_error());
      while($cc = mysql_fetch_array($get)){
            echo "<option value=$cc[accode]>$cc[name]</option>";
      }
    echo "</select></td>";
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="descrip_'.$ctr.'" class="form-input-name"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="unit_'.$ctr.'" class="form-input-rate"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="totqty_'.$ctr.'0" class="qty form-input-rate"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="rate_'.$ctr.'" class="rate form-input-rate"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="amt_'.$ctr.'" class="cal  form-input-amt"/></td>';
    echo "</tr>";
}
else{
    echo "ERROR";
} 
```

这是我的桌子

```
<table border="1px" width="90%" id="data">
    <tr>
        <td><br /></td>
    </tr>
    <tr>
        <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Order</font><span></span></label></td>
        <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">item</font><span></span></label></td>
        <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Description</font><span></span></label></td>
        <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Unit</font><span></span></label></td>
        <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Total Quantity</font><span></span></label></td>
        <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Rate</font><span></span></label></td>
        <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Amount</font><span></span></label></td>
    </tr>
    <tr>
        <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="ord_0" class="form-input-oth"/></td>
        <td align="center">
            <select data-placeholder="Party" style="width:120px;" name="order" class="chzn-select-deselect" >
                <option>rehan</option>
            </select>
        </td>
        <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="descrip_0" class="form-input-name"/></td>
        <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="unit_0" class="form-input-rate"/></td>
        <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="totqty_0" class="qty form-input-rate"/></td>
        <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="rate_0" class="rate form-input-rate"/></td>
        <td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="amt_0" class="cal  form-input-amt"/></td>
    </tr>
    <input type="button" id="addnew" class="classname" name="addnew" value="+" /> 
    <input type="hidden" id="items" name="items" value="1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:50:36.807

您确定吗？$(data).appendTo('#data') ??

试试 $('#data').appendTo(data);

# xml - Spring Security XML 找不到带有错误 cvc-complex-type.2.4.c 的标签

> ID：16017008
> 
> 赞同：1
> 
> 时间：2013-04-15T13:53:32.270
> 
> 标签：xml, spring, security, xsd

我对 Spring Security 有疑问。Eclipse 在 spring-security.xml 中找不到 html 标记并出现此错误：

```
Caused by: org.xml.sax.SAXParseException; lineNumber: 12; columnNumber: 28; cvc-complex-type.2.4.c : 
The matching wildcard is strict, but no declaration can be found for element 'http' 
```

这是xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security" xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd
">

  <http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_USER"/>
  </http>

  <authentication-manager>
    <authentication-provider>
      <user-service>
        <user name="user1" password="1111" authorities="ROLE_USER"/>
      </user-service>
    </authentication-provider>
  </authentication-manager>

</beans:beans> 
```

问题出在第一个标签 html 上，但我找不到 xsd 配置的任何问题。

有任何想法吗 ？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T12:32:46.270

您可能缺少`spring-security-config`找到所有 XSD 文件的依赖项。

如果它不在您的类路径中，请务必声明它：

```
<dependency>
  <groupId>org.springframework.security</groupId>
  <artifactId>spring-security-config</artifactId>
  <version>${spring-security.version}</version>
</dependency> 
```

# html - 正则表达式模式无法正常工作

> ID：16017009
> 
> 赞同：1
> 
> 时间：2013-04-15T13:53:36.067
> 
> 标签：html, regex

我正在对我的输入字段进行简单的检查。我有 3 个地方验证用户输入：javascript 正则表达式、html 模式和 php 正则表达式。*Javascript 和 PHP 部分工作正常，但我的 HTML 模式以某种方式为除*空白之外的*每个*输入返回错误。我在 regexpal.com（正则表达式测试器）上对其进行了测试，它在那里工作得非常好，所以我认为我一定做错了什么。

 *这是我的正则表达式：

```
/^[a-zA-Z0-9\!\?\,\.\s]{0,50}$/ 
```

我试图允许用户输入以下内容：

*   字母字符，包括大写字母
*   数字字符
*   标点符号：感叹号(!)、问号(?)、逗号(,) 和点(.)
*   空间

这是我实现它的方法：

```
<input type="text" id="name" name="name" aria-required="true" pattern="/^[a-zA-Z0-9\!\?\,\.\s]{0,50}$/" value="loaded value from db"> 
```

请注意：我允许输入 0 个字符，因为我将使用 PHP 进行检查，如果输入字段为空，则会将预设值写入数据库。

基本上它应该允许用户输入一般的单词或句子，但不知何故它不允许任何东西。我没有得到“错误”的唯一方法是当我将输入字段留空时。我究竟做错了什么？我的正则表达式错了吗？我没有正确实施它吗？如有必要，我可以提供更多代码。

非常感谢您的帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:56:31.677

尝试从输入的模式属性中删除正斜杠 (/)。*

# ruby - 将“123.some string”匹配成两个变量

> ID：16017012
> 
> 赞同：-1
> 
> 时间：2013-04-15T13:53:41.827
> 
> 标签：ruby, regex

如何使用正则表达式将以下字符串拆分为两个变量？有时从歌曲位置到标题的空间会丢失，例如`2.Culture Beat – Mr. Vain`

```
2\.  Culture Beat – Mr. Vain 
```

我正在寻找的结果：

```
pos = 2
title = Culture Beat – Mr. Vain 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:06:12.980

尝试这个：

```
s = "2\.  Culture Beat – Mr. Vain"

# split the string into an array, dividing by point and 0 to n spaces
pos, title = s.split(/(?!\d+)\.\s*/)

# coerce the position to an integer
pos = pos.to_i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:01:02.273

像这样？

```
(full, pos, title) =  your_string.match(/(\d+)\.\s*(.*)/).to_a 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T14:00:18.890

您可以使用以下正则表达式：

```
(\d+?)\.\s*(.*) 
```

[http://rubular.com/r/gV4MimUFyq](http://rubular.com/r/gV4MimUFyq)

它返回两个捕获组，一个用于数字，一个用于标题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T14:09:11.367

捕获组的一种选择：

```
match = "2\. Culture Beat - Mr. Vain".match(/(?<position>\d+)\.\s*(?<title>.*)/)

position = match['position']
title = match['title']

p "Position: #{ position }; Title: '#{ title }'"
# => "Position: 2; Title: 'Culture Beat - Mr. Vain'" 
```

# android - 为 EditText 使用数组时查找 Id

> ID：16017015
> 
> 赞同：-3
> 
> 时间：2013-04-15T13:53:47.827
> 
> 标签：android

我想为 android 创建一个 EditText 数组，但似乎找到 id 是一项非常具有挑战性的任务。有人可以联系吗？

我的数组代码：

```
 EdiTText[]    mEditText = new EditText[20];
         for(int i =0;i<mEditText.length;i++){
            mEditText[i] = (EditText) findViewById(i);
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:08:45.667

我不会问你为什么要这么做。然而...

findViewById 所需的资源 ID 不会像您的代码片段所暗示的那样从零开始，该代码片段使用循环索引作为 id。

如果 EditText 是在 XML 中创建的，那么您需要 R.id.xxxx 形式的资源 ID。您可以创建一个 int[] 的 ID 并将相应的 id 传递给 findViewById。

如果您在代码中创建 EditText，那么您将没有 ID，因此必须在创建时存储 EditText 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:58:23.347

您不能将 id 设置为在运行时查看。[在此处](http://developer.android.com/guide/topics/ui/declaring-layout.html#id)阅读有关 android id的更多信息。只需使用构造函数来初始化`EditText`：

```
mEditText[i] = new EditText(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:00:52.420

UI元素有两种方法，例如`EditText`：

一个。在您的布局 xml 中实现它们，如下所示：

```
<EditText android:id="@+id/myedittext"
android:layout_width="fill_parent"
android:layout_height="wrap_content" /> 
```

在这里，EditText 的 ID 为“myedittext”。然后，您可以通过从代码中引用它来处理该 EditText

```
EditText et = (EditText)findViewById(R.id.myedittext); 
```

湾。以编程方式创建它们

```
EditText et = new EditText(context) 
```

使用这种方法，您还必须手动将其添加`EditText`到您的 UI / 布局中。

您以一种行不通的方式混合了这两种方法。

如果您事先不知道需要多少 UI 元素（在您的情况下`EditText`），那么以编程方式创建它们很酷，但您绝对应该阅读如何正确地做到这一点。

# java - Bytecode 类文件是否包含 JRElibrary 函数？

> ID：16017019
> 
> 赞同：0
> 
> 时间：2013-04-15T13:54:05.730
> 
> 标签：java, static-libraries, bytecode

假设有一个简单的java程序：

```
package pkg;
import java.lang.System;
public class A {
    public static void main(String[] args){
        System.out.println("\nhello, world\n good");
        System.out.println(args.length);
    }
} 
```

编译后，我得到 A.class，字节码文件。我想知道A.class是否包含库函数println？我确定在 C++/C 中 EXE 将包含库函数（不是 DLL 版本）。

一个派生的问题是JVM如何获取函数println？当 JVM 从指定的 JRE 例程中解释相应的语句“System.out.println(...)”时，是否是动态加载。还是只执行 A.class 文件中包含的 println？

* * *

> 编辑：我可以说 JAVA 动态链接标准库吗？——</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:57:33.880

> 我想知道A.class是否包含库函数println？

不，它没有。如果你有兴趣，可以使用`javap`命令（或反编译器）查看类文件中的内容。

> 一个派生的问题是JVM如何获取函数println？

它是从构成您用于运行程序的 JRE / JDK 的一部分的“rt.jar”文件加载的。

这就是为什么您需要安装 JRE/JDK 来运行 Java 代码的原因之一......

# java - 在 Java 中动态转换和调用

> ID：16017023
> 
> 赞同：2
> 
> 时间：2013-04-15T13:54:13.580
> 
> 标签：java, dynamic, reflection

我在我的 WebApp 中使用了一些反射。我想做的是在做类型案例之后动态调用一个方法——这在编译时也不知道

这是我的代码的结构：

```
 Controller (Interface with one method called 'execute()')
                   |
                   |
                  \|/
             BaseController (Abstract Class with 1 abstr method called 'execute()')
              /         \
             /          _\|
            /            GetCarController extends BaseController
          |/_
         AddCarController extends BaseController 
```

现在我有了使用上述结构的代码：

```
 BaseController baseContr;

   Properties prop = new Properties();
   prop.load("some inputstream to config.properties");

    Constructor cons = Class.forName( prop.getProperty( keyProperty ) ).
    getConstructor( Class.forName( prop.getProperty( keyProperty ) ).getClass() );// keyProperty is some input string from user
   ( ( XXXXXX )cons.newInstance ( new Car(....) )  ).execute(); 
```

您所看到`XXXXXX`的实际上是我想要一种动态放置类型转换的方法。这种转换必须找到一种方法来调用`execute()`方法，`AddCarController`或者 `GetCarController` 我不想直接使用 BaseController 的任何一个实现来调用方法，而是有一种方法可以根据`prop.getProperty(keyProperty)`给出的内容来转换它......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:03:55.423

我认为您对多态性的工作方式感到困惑。如果您需要知道要转换到的确切类，那将完全破坏多态性的全部目的。

即使您强制转换为`BaseController`-or 接口，正如 Jon Skeet 指出的那样，实际上更正确 - 实例将保持为`AddCarController`or`GetCarController`实例，并且`execute()`在此实例中调用将调用`AddCarController#execute()`or `GetCarController#execute()`，并且**never** `BaseController#execute()`。

这是有关此行为的示例：

```
class A {
    public void hello() {
        System.out.println("Hello from class A");
    }
}

class B extends A {

    @Override
    public void hello() {
        System.out.println("Hello from class B");
    }
}

public class Main {

    /**
     * @param args
     * @throws OperationNotSupportedException
     */
    public static void main(final String[] args) {
        final A a = new B();
        a.hello();
    }
} 
```

按预期打印`"Hello from class B"`。

* * *

**编辑**：使用反射和接口的更详细的示例：

```
class A implements I {

    @Override
    public void hello() {
        System.out.println("Hello from class A");
    }
}

class B implements I {

    @Override
    public void hello() {
        System.out.println("Hello from class B");
    }
}

interface I {
    public void hello();
}

public class Main {

    /**
     * @param args
     * @throws ClassNotFoundException
     * @throws IllegalAccessException
     * @throws InstantiationException
     * @throws OperationNotSupportedException
     */
    public static void main(final String[] args) throws InstantiationException,
            IllegalAccessException, ClassNotFoundException {
        I i = (I) Class.forName("A").newInstance();
        i.hello();
        i = (I) Class.forName("B").newInstance();
        i.hello();
    }
} 
```

# java - 从位于java目录中的文件名获取文件路径

> ID：16017031
> 
> 赞同：1
> 
> 时间：2013-04-15T13:54:43.927
> 
> 标签：java, file, jasper-reports

我在名为“reports”的目录中有一些 jasper 报告文件，该目录位于 Eclipse IDE 中“src”包底部的 2-3 级。如何在“报告”文件夹中获取相关文件路径。我不想得到像“C:\Users\Kara\workspace\MyProject\src\main\resources\reports\someFile.jrxml”这样的路径。我试图通过以下代码来获取它们，但它并没有给我真正的路径。

```
File testFile = new File("someFile.jrxml");
String absPath = testFile.getAbsolutePath(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:56:54.113

如果报告总是在您的类路径中（假设是标准的 Maven 目录布局，它们似乎是），使用`Class.getResource()/ClassLoader.getResource()`获取指向您的报告文件的 URL。您可以使用此 URL 提取报告文件的绝对路径。

```
URL reportUrl = getClass().getResource("reports/someFile.jrxml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:05:12.060

你可以试试这个：

```
URL url = getClass().getResource("/reports/someFile.jrxml");
url.getPath(); 
```

# php - ajax总是会出错

> ID：16017033
> 
> 赞同：0
> 
> 时间：2013-04-15T13:54:49.253
> 
> 标签：php, javascript, jquery, ajax

我目前正在尝试学习使用 ajax，但不幸的是我无法使用`success`.

```
$('.engineering-services').live('click', function() {     
$.ajax({
    url: 'index.php?route=information/information/homepage_info',
    type: 'post',
    data: {info_description : 'test'},
    dataType: 'json',
    success:    function(json){
    alert('pass');
    },
    error: function(json) {
    alert('fail');
    }
    }); 
```

});

这是php函数...

```
 public function homepage_info() {
    $json = array();
    if (isset($this->request->post['info_description'])) {  
    echo $this->request->post['info_description'];
    echo '<br /> test2';
    }
    $this->response->setOutput(json_encode($json));
    } 
```

但是，这总是会发出失败警报而不是通过警报。我在这里遗漏了一些明显的东西吗？

编辑：它发现功能正常，因为在控制台中它给出了正确的响应，

IE

测试

测试2

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:58:42.973

如果您的 dataType 设置为 json，则返回的不是 JSON 的任何内容**都会**导致 ajax 调用出错。尝试将一些 json 发送回脚本... {"test":"abc"} 或类似的。`echo`例如，我在您的代码中看到了几个调用。

不仅如此，打印到浏览器的任何 PHP 错误/警告/通知都会中断调用。

提示：您可以使用`json_encode()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:01:34.437

您不能将现有查询字符串与数据结合起来。像这样的东西应该可以工作（或者至少在语法上是有效的）：

```
$.ajax({
    url: 'index.php',
    type: 'post',
    data: {information:'information/information/homepage_info',info_description:'test'},
    dataType: 'json',
    success:function(json){
        alert('pass');
    },
    error:function(json) {
        alert('fail');
    }
}); 
```

同样如前所述，任何不是 json 的东西都可能导致错误，所以你不是`echo`那些 html 组件......如果有的话，你就是`print`他们。

另外，作为旁注，您的 dataType 应该在服务器端完成，并在其中`header('Content-type: application/json');`声明`index.php`而不是在您的 jQuery 脚本中。它保证以这种方式被识别为json，并且Javascript代码也更少。

# python - 从 pandas 数据框中的多行中提取非 nan 值

> ID：16017034
> 
> 赞同：6
> 
> 时间：2013-04-15T13:54:49.513
> 
> 标签：python, python-2.7, numpy, dataframe, pandas

我正在研究几个出租车数据集。我使用 pandas 将所有数据集连接到一个数据框中。

我的数据框看起来像这样。

```
 675                       1039                #and rest 125 taxis
                     longitude     latitude    longitude    latitude
date
2008-02-02 13:31:21  116.56359  40.06489       Nan          Nan
2008-02-02 13:31:51  116.56486  40.06415       Nan          Nan
2008-02-02 13:32:21  116.56855  40.06352       116.58243    39.6313
2008-02-02 13:32:51  116.57127  40.06324       Nan          Nan
2008-02-02 13:33:21  116.57120  40.06328       116.55134    39.6313
2008-02-02 13:33:51  116.57121  40.06329       116.55126    39.6123
2008-02-02 13:34:21  Nan        Nan            116.55134    39.5123 
```

其中 675,1039 是出租车 ID。基本上一共有 127 辆出租车，它们对应的纬度和经度被列了起来。

我有几种方法可以提取一行的非空值。

```
df.ix[k,df.columns[np.isnan(df.irow(0))!=1]]
              (or)
df.irow(0)[np.isnan(df.irow(0))!=1]
              (or)
df.irow(0)[np.where(df.irow(0)[df.columns].notnull())[0]] 
```

上述任何命令都将返回，

```
675   longitude    116.56359
      latitude     40.064890 
4549  longitude    116.34642
      latitude      39.96662
Name: 2008-02-02 13:31:21 
```

现在我想从前几行中提取所有非空值（比如从第 1 行到第 6 行）。

我怎么做？

我可能可以把它循环起来。但我想要一种非循环的方式来做到这一点。

欢迎任何帮助，建议。谢谢你的建议！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:00:40.550

```
df.ix[1:6].dropna(axis=1) 
```

作为提醒，`irow`将在下一个 pandas 版本中弃用。新方法，用法更清晰，取而代之。

[http://pandas.pydata.org/pandas-docs/dev/indexing.html#deprecations](http://pandas.pydata.org/pandas-docs/dev/indexing.html#deprecations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:03:11.020

在 0.11（0.11rc1 现已推出）中，这很容易`.iloc`用于首先选择前 6 行，然后 dropna 使用 a 删除任何行`nan`（您也可以将一些选项传递给 dropna 以准确控制您想要考虑的列）

我意识到你想要 1:6，我的回答是 0:6....

```
In [8]: df = DataFrame(randn(10,3),columns=list('ABC'),index=date_range('20130101',periods=10))

In [9]: df.ix[6,'A'] = np.nan

In [10]: df.ix[6,'B'] = np.nan

In [11]: df.ix[2,'A'] = np.nan

In [12]: df.ix[4,'B'] = np.nan

In [13]: df.iloc[0:6]
Out[13]: 
                   A         B         C
2013-01-01  0.442692 -0.109415 -0.038182
2013-01-02  1.217950  0.006681 -0.067752
2013-01-03       NaN -0.336814 -1.771431
2013-01-04 -0.655948  0.484234  1.313306
2013-01-05  0.096433       NaN  1.658917
2013-01-06  1.274731  1.909123 -0.289111

In [14]: df.iloc[0:6].dropna()
Out[14]: 
                   A         B         C
2013-01-01  0.442692 -0.109415 -0.038182
2013-01-02  1.217950  0.006681 -0.067752
2013-01-04 -0.655948  0.484234  1.313306
2013-01-06  1.274731  1.909123 -0.289111 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-02T09:02:31.400

使用 Jeff 的数据框：

```
import pandas as pd
from numpy.random import randn

df = pd.DataFrame(randn(10,3),columns=list('ABC'),index=pd.date_range('20130101',periods=10))
df.ix[6,'A'] = np.nan
df.ix[6,'B'] = np.nan
df.ix[2,'A'] = np.nan
df.ix[4,'B'] = np.nan 
```

我们可以用一些我们知道不在数据框中的数字替换 nans：

```
df = df.fillna(999) 
```

如果您只想保留非空值而不进行迭代，您可以执行以下操作：

```
df_nona = df.apply(lambda x: list(filter(lambda y: y != 999, x)))
df_na = df.apply(lambda x: list(filter(lambda y: y == 999, x))) 
```

这种方法的问题在于结果是列表，因此您会丢失有关索引的信息。

```
df_nona
A    [-1.9804955861, 0.146116306853, 0.359075672435...
B    [-1.01963803293, -0.829747654648, 0.6950551455...
C    [2.40122968044, 0.79395493777, 0.484201174184,...
dtype: object 
```

另一种选择是：

```
df1 = df.dropna()
index_na  = df.index ^ df1.index
df_na = df[index_na] 
```

在这种情况下，您不会丢失有关索引的信息，尽管这与以前的答案非常相似。

希望能帮助到你！

# javascript - 带有 sum、map 和 lambda 的 Python 到 JavaScript

> ID：16017040
> 
> 赞同：2
> 
> 时间：2013-04-15T13:55:06.980
> 
> 标签：javascript, python

我不熟悉 Python，我正在尝试将函数转换为 JavaScript，但我不太清楚这一行的作用：

```
maxnum = sum(map(lambda x: x[1], tsweights)) 
```

其中`tsweights`= `[['5', 61], ['6', 61], ['7', 61], ... ]`。

我不知道这是如何工作的，如果有人可以提供帮助，那就太好了。

全功能： http: [//pastebin.com/PZqRAz0Z](http://pastebin.com/PZqRAz0Z)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:57:13.357

让我们从一些提示开始。

`lambda x: x[1]`只是一个匿名函数，它做同样的事情：

```
function foo(x) {
    return x[1];
} 
```

`map()`相当于[`Array.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)。我想你可以弄清楚是什么`sum()`。

相关的 Python 文档：

*   [`lambda`](http://docs.python.org/2/reference/expressions.html#lambda)
*   [`map()`](http://docs.python.org/2/library/functions.html#map)
*   [`sum()`](http://docs.python.org/2/library/functions.html#sum)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:59:07.077

它类似于 JavaScript 中的 this...

```
var tsweights = [['5', 61], ['6', 61], ['7', 61], ... ];
var maxnum = 0;
for (var i in tsweights)
{
    maxnum += tsweights[i][1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:02:54.213

只是添加到马特球的答案：

```
 var tsweights = [['5', 61], ['6', 61], ['7', 61], ... ]    
 , maxnum = tsweights.map(function(x){ return x[1] })
                     .reduce(function( p, c ){ return p+c }) 
```

因为 JavaScript 没有 sum 函数。

或者使用 es 中的新箭头函数：

```
 var tsweights =  [['5', 61], ['6', 61], ['7', 61], ... ]
   , maxnum = tsweights.map( x => x[1] ).reduce ( (p,c) => p+c ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:58:22.150

该函数可以这样重写：

```
sum = 0
for item in tsweights:
    sum += item[1] 
```

如果`tsweights`= `[['5', 61], ['6', 61], ['7', 61], ... ]`，则函数将返回`61 + 61 + 61 + ...`。

# c# - 如何在特定列上获得 Distinct

> ID：16017041
> 
> 赞同：0
> 
> 时间：2013-04-15T13:55:08.937
> 
> 标签：c#, asp.net, linq, datatable, distinct

我想通过特定`field(ID)`的数据表而不是整行来区分如何做到这一点：

我的表结构：

```
 ID -- name -- desc 
```

代码：

```
DataTable dt = table.AsEnumerable()
    .Distinct(DataRowComparer.Default)//I want to distinct by id instead
    .CopyToDataTable(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:09:13.257

我不知道这是否是您想要的，但您可以使用`IEqualityComparer`将忽略所有具有相同 ID 的行

```
DataTable dt = table.AsEnumerable().Distinct(new MyComparer<YourClass>())
               .CopyToDataTable() 
```

和 ：

```
 class MyComparer<T> : IEqualityComparer<T> where T : YourClass
    {
        public bool Equals(T x, T y)
        {
            return x.Id.Equals(y.Id);
        }

        public int GetHashCode(T obj)
        {
            return obj.Id.GetHashCode();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:00:33.530

如果你的意思是你想要一个不同值的列表，这里是一个例子：

```
List<Int32> fieldList = (from r in dt.AsEnumerable()SELECT Int32.Parse(r["ID"].ToString())).Distinct().ToList(); 
```

# django - Django 内联表单集验证通过，但没有保存对象

> ID：16017044
> 
> 赞同：1
> 
> 时间：2013-04-15T13:55:16.520
> 
> 标签：django, django-forms, inline-formset

我有这个表格：

```
class ServiceTargetForm(forms.ModelForm):
    class Meta:
        model = ServiceTarget
        fields=('target_type', 'target_value', 'target_threshold') 
```

所有字段都是必需的。

为了让一切变得更复杂，这个模型有 unique_together 条件：

```
class ServiceTarget(models.Model):
    service = models.ForeignKey(Service, verbose_name = _(u"Service"))
    all the other fields
    ...
    class Meta:
        ordering = ['service__car__name', 'service__car__reg_no','service__name',]
        verbose_name = _(u"Service target")
        verbose_name_plural = _(u"Service targets")
        unique_together = ("service__id", "target_type") 
```

所以像这样保存空表单：

```
ServiceTargetFormSet = inlineformset_factory(Service, ServiceTarget, extra = 1, form = ServiceTargetForm, formset = MyInlineFormSet)
if request.method == 'POST':
    form = ServiceForm(request.POST, cars_queryset = cars_queryset, client = account)

    if form.is_valid():
        new_service = form.save(commit = False)
        stformset = ServiceTargetFormSet(request.POST, instance = new_service)
        if stformset.is_valid():
            form.save()
            stformset.save()
            messages.success(request, ugettext(u"New service was successfully created."))
            redirect_to = '/services/'
            return HttpResponseRedirect(request, redirect_to)
        else:
            messages.error(request, ugettext(u"Creating new service failed")) 
```

应该失败 - 但没有。发布的查询集是：

```
<QueryDict: {u'servicetarget_set-0-target_value': [u''], u'servicetarget_set-INITIAL_FORMS': [u'0'], u'name': [u'asdasd2q31'], u'recipients': [u'4'], u'car': [u'22'], u'message_delivery_method': [u'email'], u'servicetarget_set-0-target_threshold': [u''], u'servicetarget_set-TOTAL_FORMS': [u'2'], u'more-rows-count': [u'0'], u'servicetarget_set-0-target_type': [u'km'], u'servicetarget_set-1-target_type': [u'km'], u'csrfmiddlewaretoken': [u'blablabla'], u'servicetarget_set-1-target_value': [u''], u'servicetarget_set-MAX_NUM_FORMS': [u''], u'message': [u'asdasdasd'], u'servicetarget_set-1-target_threshold': [u'']}> 
```

即使所有重要字段都是空的，它也很干净：[u'']。所以有人会认为，如果它验证 - 它也会成功保存......但事实并非如此。在数据库中找不到任何记录。除了由表单创建的记录 - 它可以很好地验证和保存。

更新：发现类似的问题也没有答案，而且似乎是完全相同的问题： [Make inlineformset in django required](https://stackoverflow.com/questions/3901931/make-inlineformset-in-django-required)

我为自己创建了在 shell 中使用的测试脚本，它带来了所有相同的结果：

```
q = 'servicetarget_set-0-target_value=&servicetarget_set-INITIAL_FORMS=0&servicetarget_set-0-id=&name=asdasdasd&recipients=4&car=13&servicetarget_set-1-target_type=km&servicetarget_set-1-service=&servicetarget_set-0-target_threshold=&servicetarget_set-TOTAL_FORMS=2&servicetarget_set-0-service=&servicetarget_set-1-target_threshold=&more-rows-count=0&servicetarget_set-0-target_type=km&servicetarget_set-1-id=&csrfmiddlewaretoken=90018471df61d327b6288cb38ad15630&servicetarget_set-1-target_value=&servicetarget_set-MAX_NUM_FORMS=&message=asdasdasd&message_delivery_method=email'

from django.http import QueryDict
qd = QueryDict(q)
from account.models import Account
account = Account.objects.get(id = 2)
from services.models import Service, ServiceTarget
from services.forms import ServiceTargetForm, MyInlineFormSet, ServiceForm
from django.contrib.auth.models import User
u = User.objects.get(id = 5)
from guardian.shortcuts import get_objects_for_user
cars_queryset = get_objects_for_user(u, 'cars.can_access_car').order_by('reg_no').filter(client = account)
form = ServiceForm(qd, cars_queryset = cars_queryset, client = account)
form.is_valid()
True
new_service = form.save(commit = False)
from django.forms.models import inlineformset_factory
ServiceTargetFormSet = inlineformset_factory(Service, ServiceTarget, fk_name="service", extra = 1, form = ServiceTargetForm, formset = MyInlineFormSet)
stformset = ServiceTargetFormSet(qd, instance = new_service)
stformset.is_valid()
True
stformset.cleaned_data
[{}, {}]
stformset.errors
[{}, {}]
stformset.non_form_errors()
[] 
```

Update2： [Django 表单集：首先需要？](https://stackoverflow.com/questions/2406537/django-formsets-make-first-required)此处接受的答案说明了为什么不引发错误 - 显然表单必须将 empty_permited 设置为 False。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:55:16.527

它不完全是这个的副本：

[Django表单集：首先需要？](https://stackoverflow.com/questions/2406537/django-formsets-make-first-required)

但那里的答案也适用于此。

如果表单集表单类没有将 empty_permitted 参数设置为 False，则空表单通过验证。

因此，您可以通过以下两种方式之一解决此问题：

1.  他们在我添加的链接中这样做的方式
2.  在表单集表单类`__init__`方法中做同样的事情。

# c# - 如何使用Linq获取列表中除第n个元素之外的所有元素

> ID：16017045
> 
> 赞同：8
> 
> 时间：2013-04-15T13:55:18.477
> 
> 标签：c#, linq

假设我有一个包含 10 个项目的列表。

```
List<char> chars = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']; 
```

我需要一个新列表，其中包含列表中除第 n 个（例如，第 3 个项目`'C'`）之外的所有元素。我不希望更改原始列表，因为我以后需要它。

另一种选择是，我可以克隆列表并删除该项目，但是必须将第 n 个之后的所有项目上移。

有没有办法使用 Linq 获取列表？

**编辑：**

一个字符可以在列表中出现多次。我只想删除“n”处的出现。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T13:56:39.453

当然，使用它的[重载`Where`](http://msdn.microsoft.com/en-us/library/bb549418.aspx)需要一个索引参数：

```
var allBut3 = chars.Where((c, i) => i != 2);  // use 2 since Where() uses 0-based indexing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:59:59.107

你可以使用[`Enumerable.Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)方法。

> 根据谓词过滤一系列值。

```
List<char> chars = new List<char>(){'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'};
var newlist = chars.Where(n => n != chars.ElementAtOrDefault(2)); 
```

这是一个[`DEMO`](http://ideone.com/qy2lYK).

# android - 使用谷歌分析获取推荐人

> ID：16017046
> 
> 赞同：0
> 
> 时间：2013-04-15T13:55:18.217
> 
> 标签：android, google-analytics, tracking, referrer

我有一个应用程序位于某些服务器中（不在 Google Play 中），我想知道它是从哪个服务器下载的，我阅读了它，看起来我必须使用 BroadcastRecever 和过滤器来做到这一点：INSTALL_REFERRER as在这篇文章中，[如何在 android 中使用 google track 获取referrer？](https://stackoverflow.com/questions/10431018/how-to-get-referrer-using-google-track-in-android)

我没有找到任何有效的例子，所以如果你能提供帮助会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:40:12.463

我最后做的是用不同的名称导出相同的应用程序并将它们上传到不同的网站，现在我可以获取 apk 名称，然后是下载应用程序的页面

谢谢大家

# c# - 复制到剪贴板限制

> ID：16017052
> 
> 赞同：2
> 
> 时间：2013-04-15T13:56:04.780
> 
> 标签：c#, excel, ms-word, powerpoint, copy-paste

关于这个主题的许多其他问题，我仍然没有找到可以避免我的问题的东西。

我想知道剪贴板在复制粘贴处理方面的限制是什么，并针对特定用途和程序 ID 限制其复制粘贴功能。

因为，我一直在为我的公司开发一个软件，该软件采用 Word/Excel 和 PowerPoint 中的模板，通过每天更换图片并粘贴模板中的新图形和图片来自动生成报告。

但是，我很害怕，因为它似乎存在一些关于复制到剪贴板的限制

```
CopyBitmapToClipboard

ActiveWindow.View.PasteSpecial() 
```

当我将表格/图像复制到剪贴板并将其粘贴到 Word/Excel/PowerPoint 中时很好，但如果我现在有 10 个同时生成的并行报告并使用复制粘贴机制，则会发生这种情况它将复制到另一个报表当前正在使用的 Word/Excel/PowerPoint 中。

考虑到，我有 1 个文档，并且将一个巨大的表格复制到剪贴板到 powerpoint 中，最好的情况是 1 秒（这不是），这意味着在 1 天内，我可以生成一个最大值的

```
1 copy paste procedure = 1 second

1minute = 60 second means 60 copy paste

1hour = 60min x 60 copy paste

1day = 24hours x 3600 copy paste 
```

意味着我总共有**86400**个复制粘贴/报告。这是不可能的。一个文档永远不会花费至少 1 秒的时间来完成（对于大约 20 页的报告、带有 30 张幻灯片的 powerpoint、带有 6 张的 Excel 工作表）。如何避免复制到剪贴板的内容将被粘贴到错误的文档中，因为两个文档都使用了粘贴功能。

所以，我想知道，是否可以在我的剪贴板中提供参考，告诉他，只复制他的 word/excel/powerpoint 中的内容，而不是复制我刚刚复制的内容 CTRL+C 和在错误的文档中做CTRL+V？

目前，我们每天大约有 50 份报告要生成（考虑到几个月前我们有 2 份报告要生成），计划以 5 分钟为间隔，但是那天我们将有 86400 份每日报告产生？复制粘贴功能会搞砸所有报告并粘贴到错误的报告中。我可能不会在那里协助它，但我想防止这种影响。

我正在用 C#/.NET 编写我的软件，但我无法在其中编写来捕捉是否正在生成当前的计划/报告，因为我运行了一个**.bat**，它使用我编写的程序来创建报告。

**已编辑：我的**.bat**内容为：myprogram.exe /objectsourceprogram="" /sourcefile="my template.doc/xls/ppt" /destinationfile="my destination.doc/xls/ppt"

我只是在调度我的批处理文件，唯一可以做的就是等待一个调度完成，然后再开始下一个调度，但这会产生间隔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:02:50.137

我也在 Word 和 Excel 中处理过自动生成的报告。你这样做很慢，难怪它很慢 - .NET COM 互操作非常慢，然后你的进程使用其他线程，所以现在你必须在线程之间进行编组和同步，因为 Office 是单线程的。

复制/粘贴是高级用户功能，您可以将其用作 hack，但将其作为执行任务的主要方式是一个糟糕的选择。

更好的选择：Office API（VSTO，有人吗？）- 我很确定您在报告方面提出的任何建议都可以通过 API 重现。当心 - 太多的 API 调用，你的函数可能会运行得更慢。

最佳选择：OpenXML SDK。由于您仍在使用复制/粘贴，因此此处的学习曲线可能会很陡峭，但回报是您的文档处理时间将减少几个数量级。

# php - PHP - 具有不同数量参数的覆盖函数

> ID：16017053
> 
> 赞同：19
> 
> 时间：2013-04-15T13:56:05.450
> 
> 标签：php, oop, overriding

我正在扩展一个类，但在某些情况下我会覆盖一个方法。有时在 2 个参数中，有时在 3 个参数中，有时没有参数。

不幸的是，我收到了 PHP 警告。

我的最小可验证示例： http: [//pastebin.com/6MqUX9Ui](http://pastebin.com/6MqUX9Ui)

```
<?php

class first {
    public function something($param1) {
        return 'first-'.$param1;
    }
}

class second extends first {
    public function something($param1, $param2) {
        return 'second params=('.$param1.','.$param2.')';
    }
}

// Strict standards: Declaration of second::something() should be compatible with that of first::something() in /home/szymon/webs/wildcard/www/source/public/override.php on line 13

$myClass = new Second();
var_dump( $myClass->something(123,456) ); 
```

我收到 PHP 错误/警告/信息： ![错误画面](https://i.stack.imgur.com/Kg9VN.png)

我怎样才能防止这样的错误？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2017-02-13T21:30:31.737

您可以轻松地重新定义方法添加新参数，只需要新参数是可选的（在您的签名中具有默认值）。见下文：

```
class Parent
{
    protected function test($var1) {
        echo($var1);
    }
}

class Child extends Parent
{
    protected function test($var1, $var2 = null) {
        echo($var1);
        echo($var1);
    }
} 
```

有关更多详细信息，请查看链接： http: [//php.net/manual/en/language.oop5.abstract.php](http://php.net/manual/en/language.oop5.abstract.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:03:55.083

另一个解决方案（有点“脏”）是声明你的方法根本没有参数，并在你的方法中使用`func_get_args()`函数来检索你的参数......

[http://www.php.net/manual/en/function.func-get-args.php](http://www.php.net/manual/en/function.func-get-args.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T13:59:30.883

您的接口/抽象类或最父类，应该包含方法可以接收的最大参数数，您可以将它们显式声明为 NULL，因此如果没有给出它们，则不会发生错误，即

```
Class A{
public function smth($param1, $param2='', $param3='')

Class B extends A {
public function smth($param1, $param2, $param3='')

Class C extends B {
public function smth($param1, $param2, $param3); 
```

在这种情况下，使用方法 smth() 作为 'A' 的对象，您将不得不只使用一个参数 ($param1)，但使用与对象 'B' 相同的方法，您将不得不使用 2 个参数 ( $param1, $param2) 并从 C 中实例化它，您必须提供所有参数

# macos - 结束 NSTextView 编辑的首选按键

> ID：16017054
> 
> 赞同：1
> 
> 时间：2013-04-15T13:56:15.010
> 
> 标签：macos, cocoa, keyboard-shortcuts, nstextview

是否有用于结束编辑 NSTextVIew 的首选按键？明显的候选者是带有修饰键的 ESCape 和 Return。我希望这是相当直观且易于输入的。当然，对于在 Vim 上长大的人来说，Escape 是显而易见的选择。

既然我提到了 Vim，我想我会添加我的 emacsish 版本：对于 emacs，我猜它可能是 Cx CS。我会发现这种打字比 ESC 更方便。但是可可的方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:01:45.313

**`tab`在不同的文本字段和文本视图之间切换是最流行的，被认为是编辑的结束。**

您也可以根据自己的喜好使用任何组合，例如`cmd`+`enter`等以移出 textView。

但不`esc`，它作为您正在取消的东西发送。然而，这在 CUI 中用作 vim，但肯定不会在 OSX 甚至 Windows 的 GUI 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:21:22.573

`Command`+`return`在确认多行输入时很常见（例如在 Apple 的 iWork 中编辑文本框时使用）。

在标准 Cocoa 文本视图中，`Esc`触发自动完成建议（如果适用）。

# delphi - CreateFileMapping 失败，hFile 不是 INVALID_HANDLE_VALUE

> ID：16017055
> 
> 赞同：1
> 
> 时间：2013-04-15T13:56:26.750
> 
> 标签：delphi, winapi, delphi-7

更新 - 已解决并回答，违规行已被注释掉

**简要描述;简介**

即使我将（GENERIC_WRITE 或 GENERIC_WRITE）用于 CreateFile，将 PAGE_READWRITE 用于 CreateFileMapping，我在将 CreateFile 与 CreateFileMapping 链接时遇到问题

**详细说明**

我正在使用 CreateFileMapping 在进程之间共享内存。假设我没有映射到物理文件，而是使用 INVALID_HANDLE_VALUE 作为 CreateFileMapping 的第一个参数，那么实际的机制工作正常。这很好，但是我想要实现的是创建此映射的主进程使用基于磁盘的文件，并定期将其刷新到驱动器，并在它关闭时自动保存数据。

**代码如下......** （当我运行它时，我得到“错误 5：访问被拒绝”作为 ShowMessage）

```
const MaximumMapSize = 256 * 1024;
var virtualMemoryPath : string = '';

function getFileHandle(mapname : string; maxSize  : dword) :THandle;
var diskfilename : string;

  lpFileName: PChar;
  dwDesiredAccess: DWORD;
  dwShareMode: DWORD;
  lpSecurityAttributes: PSecurityAttributes;
  dwCreationDisposition : dword;
  dwFlagsAndAttributes: DWORD;
  hTemplateFile : THandle ;

  temp : pointer;
begin
    Result := INVALID_HANDLE_VALUE;
    if (maxSize <= MaximumMapSize) and (Length(virtualMemoryPath) > 0) then
    begin

            diskfilename := virtualMemoryPath+mapname+'.bin';

            if FileExists(diskfilename) then
               Sysutils.DeleteFile(diskfilename);

            lpFileName              := PChar(diskfilename);
            //dwDesiredAccess         := GENERIC_WRITE or GENERIC_WRITE;//<<<wrong
            dwDesiredAccess         := GENERIC_READ or GENERIC_WRITE;
            dwShareMode             := 0;//FILE_SHARE_READ or FILE_SHARE_WRITE;//<<wrong
            lpSecurityAttributes    := nil;
            dwCreationDisposition   := CREATE_ALWAYS;
            dwFlagsAndAttributes    := 0;
            hTemplateFile           := 0 ;

            Result := CreateFile(
                lpFileName,
                dwDesiredAccess,
                dwShareMode,
                lpSecurityAttributes,
                dwCreationDisposition,
                dwFlagsAndAttributes,
                hTemplateFile);

           if (Result <> INVALID_HANDLE_VALUE) then
           begin
             GetMem(temp,maxsize);
             ZeroMemory(temp,maxsize);
             FileWrite(result,temp^,maxSize);
             FreeMem (temp,maxsize);
             FlushFileBuffers(result);
             SetFilePointer(result,0,0,FILE_BEGIN);
           end;
    end;
end;

function createMap (mapname : string ; maxSize: dword; var hFile: THandle) : THandle;
var
    lpFileMappingAttributes: PSecurityAttributes;
    flProtect           : DWORD;
    dwMaximumSizeHigh   : DWORD;
    dwMaximumSizeLow    : DWORD;
    lpName              : PChar;

    LastError : dword;
begin

    Result := INVALID_HANDLE_VALUE;

    if (maxSize > MaximumMapSize) then
        exit;

     // create a disk the file or return INVALID_HANDLE_VALUE if settings have not defined a path to folder
     hFile     :=  getFileHandle(mapname,maxSize);

     lpFileMappingAttributes := nil;
     flProtect          := PAGE_READWRITE;
     dwMaximumSizeHigh  := 0;
     dwMaximumSizeLow   := maxSize;
     lpName := PChar(mapname);

     Result := CreateFileMapping(
        hfile,
        lpFileMappingAttributes,
        flProtect,
        dwMaximumSizeHigh,
        dwMaximumSizeLow,
        lpName);

     if (Result = 0) then
     begin

         if (not (hFile = INVALID_HANDLE_VALUE) ) then
            CloseHandle(hFile);

         hFile := 0;
         LastError := GetLastError();
         ShowMessage( Format('Error %d : %s',[LastError,SysErrorMessage(LastError)]) );

     end
     else
     begin

        ShowMessage(Format('Returing handle %d',[result]));
        if (hFile = INVALID_HANDLE_VALUE) then
            hFile := 0;

     end;

end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:23:03.353

```
 dwDesiredAccess         := GENERIC_WRITE or GENERIC_WRITE;
        dwShareMode             := FILE_SHARE_READ or FILE_SHARE_WRITE; 
```

这行不通。您将需要读取和写入权限。此外，创建视图需要操作系统确保它是唯一可以写入文件的视图。除了通过视图之外，没有其他机制可以检测到另一个进程写入文件，并确保这样的写入在内存中及时和同步地可见。特别是在多线程访问视图的情况下，同步更新是不可能实现的。

读取共享同样不明智，操作系统不保证何时从视图中更新文件。唯一的保证是它会在所有视图关闭时更新。这也意味着需要有秩序地关闭 Windows，您无法使其可靠地应对断电等事故。同样，读取需要通过视图完成，而不是文件。唯一合适的选择是不共享。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T14:26:56.803

错误在这里：

```
GENERIC_WRITE or GENERIC_WRITE 
```

你的意思是：

```
GENERIC_READ or GENERIC_WRITE 
```

解决这个问题，您的文件映射就可以创建了。

我同意 Hans 的观点，即您不应该共享文件句柄。

# sql - 从字符串转换日期失败

> ID：16017059
> 
> 赞同：2
> 
> 时间：2013-04-15T13:56:34.173
> 
> 标签：sql, sql-server, date

我从平面文件中以 DD/MM/YYYY 格式保存了一个日期。“2013 年 4 月 20 日”

当我尝试将其插入我的 SQL Server 数据库时，它会将值更改为 MM/DD/YYYY。

所以当然没有第 20 个月，我的代码失败了。我该如何解决这个问题？

我试过这样的东西，但我没有运气。

```
SELECT CONVERT(datetime, CONVERT(varchar, '20/04/2013', 101)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:59:22.367

直接这样做，

```
SELECT CONVERT(datetime, '20/04/2013', 103) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:59:30.110

在 SQL Server 上，您需要使用该`SET DATEFORMAT`选项。（参见[http://msdn.microsoft.com/en-us/library/ms189491.aspx](http://msdn.microsoft.com/en-us/library/ms189491.aspx)）。

在您的情况下，您需要在执行上述 SELECT 语句之前发出以下命令：

```
SET DATEFORMAT dmy 
```

或者，可以全局更改服务器的 DATEFORMAT 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:02:53.790

定义和用法 CONVERT() 函数是将一种数据类型的表达式转换为另一种数据类型的通用函数。

CONVERT() 函数可用于以不同格式显示日期/时间数据。

select convert(datetime, '20/04/2013', 103) [在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

# c# - Visual Studio 未检测到网络上的 3D 打印机

> ID：16017069
> 
> 赞同：3
> 
> 时间：2013-04-15T13:56:53.827
> 
> 标签：c#, visual-studio-2012

我试图在网络上检测我的 3d 打印机，但由于某种原因，它只返回 2d 打印机，这有点奇怪，因为 3d 打印机连接在网络上，并且可以从本机软件检测到。关于如何显示所有网络打印机的任何想法？

```
using System;
using System.Printing;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace PrintQueuesExample
{
  public partial class Window1 : Window
  {
    PrintQueueCollection _Printers;

    public Window1()
    {
      _Printers = new PrintServer().GetPrintQueues(new[] { 
        EnumeratedPrintQueueTypes.Local, EnumeratedPrintQueueTypes.Connections});

      foreach (var queue in _Printers)
      {
        Console.WriteLine(queue.Name);
        var capabilities = queue.GetPrintCapabilities();
        foreach (var size in capabilities.PageMediaSizeCapability)
        { Console.WriteLine(size.ToString()); }
        Console.WriteLine();
      }

      InitializeComponent();
    }

    public PrintQueueCollection Printers
    { get { return _Printers; } }

    private void PrintTestPageClick(object sender, RoutedEventArgs e)
    {
      var queue = _PrinterList.SelectedItem as PrintQueue;
      if (queue == null)
      {
        MessageBox.Show("Please select a printer.");
        return;
      }

      var size = _SizeList.SelectedItem as PageMediaSize;
      if (size == null)
      {
        MessageBox.Show("Please select a page size.");
        return;
      }

      queue.UserPrintTicket.PageMediaSize = size;
      queue.UserPrintTicket.PageOrientation = _PortraitRadio.IsChecked == true ? 
        PageOrientation.Portrait : PageOrientation.Landscape;

      var canvas = (Canvas)Resources["MyPrintingExample"];
      canvas.Measure(new Size(size.Width.Value, size.Height.Value));
      canvas.Arrange(new Rect(0, 0, canvas.DesiredSize.Width, 
          canvas.DesiredSize.Height));

      var writer = PrintQueue.CreateXpsDocumentWriter(queue);
      writer.Write(canvas);
    }

  }

  public class PrintQueueToPageSizesConverter : IValueConverter
  {
    public object Convert(object value, Type targetType,
      object parameter, System.Globalization.CultureInfo culture)
    {
      return value == null ? null :
        ((PrintQueue)value).GetPrintCapabilities().PageMediaSizeCapability;
    }

    public object ConvertBack(object value, Type targetType, 
      object parameter, System.Globalization.CultureInfo culture)
    { throw new NotImplementedException(); }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:15:56.803

我非常怀疑 3D 打印机会出现在**Windows 控制面板的****打印机**部分，因此会被视为打印机。我认为“3D 打印机”这个名称可能令人困惑，它并不是 Windows 所看到的正常意义上的“打印机”。

 **大多数打印机只知道行/列（大大简化了事情），因此制造商可以使用通用打印机驱动程序作为基础。3D 打印机更先进/更专业，我猜您将需要一个 SDK 来输出 3D 打印机可以理解的指令。

您可能可以从打印机制造商处获得 SDK。**

# php - 使用带有'IN'条件的Mysql替换空行

> ID：16017072
> 
> 赞同：0
> 
> 时间：2013-04-15T13:56:54.773
> 
> 标签：php, mysql

这是我的代码

```
$Qemaster="select * from emaster where `branch`='$bid' and `department`='$did' and `status`!='L'";
$Remaster=mysql_query($Qemaster);
while($Rowemaster=mysql_fetch_array($Remaster)){
    $empcode=$Rowemaster[id];
    $name=$Rowemaster[name];
    $Tleave=0;

echo "<tr>";
echo "<td rowspan='2'>".$name."</td>";
echo "<td>Leave</td>";

$Qlp="select `leave` from lpsummary where ((`month` IN(04,05,06,07,08,09,10,11,12) and `year`='$year') or (`month` IN(01,02,03) and `year`='$Nyear')) and `empcode`='$empcode'";
$Rlp=mysql_query($Qlp);
while($Rowlp=mysql_fetch_array($Rlp)){  

$leave=$Rowlp['leave'];
$Tleave=$Tleave+$leave;

echo "<td>".$leave."</td>";
}
echo "<td><font color='red'>".$Tleave."</font></td>";
echo "<tr><td>Percentage</td>";
} 
```

我的桌子是

```
------------------------------------------
| name | apr-12 | may-12 | jun-12 | jul-12 |
|------|--------|--------|--------|--------|  
|Kumar | 2      |    1   |    0   | 3      |
|Rajan | 4      |    0   |    2   |        |
|      |        |        |        |        |
|------------------------------------------ 
```

这里以 Rajan 为名，在 jun-12 中没有数据，但 jul-12 的值为 2...即）表 lpsummary 中的空行......如果有空行，我想将其替换为 ' -'......我怎么能通过我的代码做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T13:15:05.540

在您的 while 循环中，您需要设置一个条件来检查是否返回了 null from。

```
while($Rowlp=mysql_fetch_array($Rlp)){  
    if (is_null($Rowlp['leave'])) {
        $leave = '-';
    } else {
        $leave=$Rowlp['leave'];
        $Tleave=$Tleave+$leave;
    }

    echo "<td>".$leave."</td>";
} 
```

# asp.net-mvc - 模棱两可的动作方法

> ID：16017076
> 
> 赞同：1
> 
> 时间：2013-04-15T13:57:03.020
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

对于我目前正在进行的项目，我目前有 2 个单独的用户实例（以后可能会增加）：CorporateCustomer 和 PrivateCustomer。两者都继承自抽象类 Customer。

为了显示这些客户之间的差异，目前创建了 2 个不同的视图，它们由相同的 Action 以如下方式呈现：

```
[HttpGet]
public virtual ActionResult Edit()
    {
            if(User.IsCorporate)
                return View("EditCorporate", new CorporateCustomer());
            else
                return View("EditPrivate", new PrivateCustomer());
    }
[HttpPost]
public virtual ActionResult Edit(CorporateCustomer customer){...}
[HttpPost]
public virtual ActionResult Edit(PrivateCustomer customer){...} 
```

对于仅显示信息，这就像一个魅力。每种类型的 url 都是相同的，这就是我们的目标。

但是，在发帖时，我只能指定一种类型，否则可能会遇到模棱两可的操作方法（当然，这是有道理的）。

现在我的问题是：是否有任何优雅的方式来处理这两种不同的类型，同时仍然保留一个 url？还是我注定要使基类非抽象并在 Request.Form 集合中查找值？

感谢是否有人能提出解决方案（或者直接指出我正在做的事情是愚蠢的，无法完成）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:28:51.107

你可以有一个 Action 接受这两种参数类型。

然后模型绑定器应该用发布的任何数据填充它们，您可以在 Action 方法中找出正确的数据。

```
[HttpPost]
public virtual ActionResult Edit( CorporateCustomer c, PrivateCustomer p )
{
  ...
} 
```

# c# - c#中的换行符

> ID：16017077
> 
> 赞同：10
> 
> 时间：2013-04-15T13:57:08.590
> 
> 标签：c#, newline

我编写了这段代码来计算文本文件中的字符数：

```
sr.BaseStream.Position = 0;
sr.DiscardBufferedData();
int Ccount = 0;
while (sr.Peek() != -1)
{
  sr.Read();
  Ccount++;
} 
```

但将此代码应用于文件后包含：

```
1
2
3
4
5
6
7
8
9
0 
```

计数 = 30 ???? 为什么？我在我的 Macbook 上的虚拟机上使用 Windows Xp，使用的程序是：Microsoft Visual Basic 2010。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T13:59:22.123

在 Windows 中，每个新行由两个字符`\r`和`\n`. 您有 10 行，每行有 1 个可见字符和 2 个换行符，总计 30 个字符。

如果您在 Mac 或 Unix/Linux 中创建文件，您将得到不同的结果（20 个字符）。因为 Unix 仅使用`\n`而 Mac 仅`\r`用于换行。

您可以使用一些编辑器（例如 Notepad++）来显示换行符，甚至可以在不同模式之间切换（DOS/Unix/Mac）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-15T13:59:08.317

您一次读取一个字符，每行包含三个字符：

*   一位数
*   一个回车 ( `\r`)
*   一个换行符 ( `\n`)

（Windows 将`\r\n`其用作换行符序列。您在 Mac 上的 VM 中运行这一事实不会影响这一点。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T14:01:21.203

有一种更简单的方法可以做到这一点。将整个 *.txt 文件制作成一个字符串数组并测量它：

```
int count = 0;

string[] Text = File.ReadAllLines(/*Path to the file here*/);

for (int i = 0; i < Text.Count(); i++)
{
        count += Text[i].Length;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T13:59:41.537

新行实际上是 2 个单独的字符：LF CR（换行和回车）。但是你会知道，如果你在你的循环中放置一个断点。现在为了额外的信用，unicode中有多少字节？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-15T13:59:48.367

Windows 通常使用`\r\n`换行符，即 ASCII 字符 0x13 和 0x10。

建议您通过这样做向自己证明这一点：

```
Console.WriteLine("0x{0:x}", sr.Read()); 
```

# jquery - 在 Jquery Ajax POST 中获取 400 错误请求错误

> ID：16017081
> 
> 赞同：61
> 
> 时间：2013-04-15T13:57:30.520
> 
> 标签：jquery, ajax, post, http-status-code-400

我正在尝试使用 Jquery 发送 Ajax POST 请求，但出现 400 错误请求错误。

这是我的代码：

```
$.ajax({
  type: 'POST',
  url: "http://localhost:8080/project/server/rest/subjects",
  data: {
    "subject:title":"Test Name",
    "subject:description":"Creating test subject to check POST method API",
    "sub:tags": ["facebook:work", "facebook:likes"],
    "sampleSize" : 10,
    "values": ["science", "machine-learning"]
  },
  error: function(e) {
    console.log(e);
  }
}); 
```

它说：无法从请求中构建资源。我错过了什么？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-04-17T08:01:04.557

最后，我得到了错误，原因是我需要对发送的 JSON 数据进行字符串化。我必须在 XHR 对象中设置内容类型和数据类型。所以正确的版本在这里：

```
$.ajax({
  type: 'POST',
  url: "http://localhost:8080/project/server/rest/subjects",
  data: JSON.stringify({
    "subject:title":"Test Name",
    "subject:description":"Creating test subject to check POST method API",
    "sub:tags": ["facebook:work", "facebook:likes"],
    "sampleSize" : 10,
    "values": ["science", "machine-learning"]
  }),
  error: function(e) {
    console.log(e);
  },
  dataType: "json",
  contentType: "application/json"
}); 
```

也许它会帮助别人。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-17T08:05:13.700

是的。您需要数据或发生错误`stringify`，因为它无法识别数据。`JSON``400 bad request`

```
400 Bad Request 
```

> 错误的请求。您的浏览器发送了此服务器无法理解的请求。

另外，您还需要添加`content type`和`datatype`。如果不是，你会遇到`415`错误，上面写着`Unsupported Media Type`。

> 415 不支持的媒体类型

尝试这个。

```
var newData =   {
                  "subject:title":"Test Name",
                  "subject:description":"Creating test subject to check POST method API",
                  "sub:tags": ["facebook:work", "facebook:likes"],
                  "sampleSize" : 10,
                  "values": ["science", "machine-learning"]
                  };

var dataJson = JSON.stringify(newData);

$.ajax({
  type: 'POST',
  url: "http://localhost:8080/project/server/rest/subjects",
  data: dataJson,
  error: function(e) {
    console.log(e);
  },
  dataType: "json",
  contentType: "application/json"
}); 
```

通过这种方式，您可以轻松修改所需的数据。它不会让您感到困惑，因为它是在 ajax 块之外定义的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-30T13:52:44.937

以防其他人遇到这种情况。我有一个在桌面浏览器上运行良好的网站，但我在使用 Android 设备时遇到了 400 个错误。

原来是防伪令牌。

```
$.ajax({
        url: "/Cart/AddProduct/",
        data: {
            __RequestVerificationToken: $("[name='__RequestVerificationToken']").val(),
            productId: $(this).data("productcode")
        }, 
```

问题是 .Net 控制器设置不正确。

我需要将属性添加到控制器：

```
 [AllowAnonymous]
    [IgnoreAntiforgeryToken]
    [DisableCors]
    [HttpPost]
    public async Task<JsonResult> AddProduct(int productId)
    { 
```

代码需要审查，但现在至少我知道是什么原因造成的。400 错误根本没有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-21T16:17:43.653

这个问题有点老了......但万一有人遇到错误400，它也可能来自需要将csrfToken作为参数发布到发布请求。

您必须在模板中从工艺中获取名称和价值：

```
<script type="text/javascript">
    window.csrfTokenName = "{{ craft.config.csrfTokenName|e('js') }}";
    window.csrfTokenValue = "{{ craft.request.csrfToken|e('js') }}";
</script> 
```

并在您的请求中传递它们

```
data: window.csrfTokenName+"="+window.csrfTokenValue 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T14:05:22.477

您需要使用以下函数从“数据”对象构建查询

```
function buildQuery(obj) {
        var Result= '';
        if(typeof(obj)== 'object') {
            jQuery.each(obj, function(key, value) {
                Result+= (Result) ? '&' : '';
                if(typeof(value)== 'object' && value.length) {
                    for(var i=0; i<value.length; i++) {
                        Result+= [key+'[]', encodeURIComponent(value[i])].join('=');
                    }
                } else {
                    Result+= [key, encodeURIComponent(value)].join('=');
                }
            });
        }
        return Result;
    } 
```

然后继续

```
var data= {
"subject:title":"Test Name",
"subject:description":"Creating test subject to check POST method API",
"sub:tags": ["facebook:work, facebook:likes"],
"sampleSize" : 10,
"values": ["science", "machine-learning"]
}

$.ajax({
  type: 'POST',
  url: "http://localhost:8080/project/server/rest/subjects",
  data: buildQuery(data),
  error: function(e) {
    console.log(e);
  }
}); 
```

# shell - 使用 powershell 处理弹出框

> ID：16017094
> 
> 赞同：0
> 
> 时间：2013-04-15T13:58:06.100
> 
> 标签：shell, powershell, popup, automation

谁能告诉我如何使用powershell在弹出窗口上单击“确定”或“取消”？我正在尝试使用 powershell 自动化网站，但我是 powershell 新手。我必须单击弹出框中的“确定”按钮才能继续。我知道 VBscript，因为我可以使用

```
set obj0 = createobject("wscript.shell")
count = 0
do while count = 0
if obj0.appactivate "Popupboxname" then
----perform required action---
count = 1
else
wscript.sleep(2000)
end if
loop 
```

谁能告诉我如何在powershell中做同样的事情？如果我能以某种方式访问​​弹出窗口，至少我可以使用 sendkeys 命令发送回车键。请让我知道如何处理弹出窗口。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:51:13.210

使用 Powershell v2，您可以使用 PInvoke 访问普通的 Win32 API，从而使您可以访问`FindWindow`和`SetForegroundWindow`. 然后使用`SendKeys`发送`Enter`密钥。

像这样注册方法：

```
$pinvokes = @'
    [DllImport("user32.dll", CharSet=CharSet.Auto)]
    public static extern IntPtr FindWindow(string className, string windowName);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool SetForegroundWindow(IntPtr hWnd);
'@

Add-Type -AssemblyName System.Windows.Forms
Add-Type -MemberDefinition $pinvokes -Name NativeMethods -Namespace MyUtils 
```

现在你可以找到你需要的窗口：

```
$hwnd = [MyUtils.NativeMethods]::FindWindow(null, "Popupboxname") 
```

把重点放在：

```
[MyUtils.NativeMethods]::SetForegroundWindow($hwnd) 
```

并发送`Enter`密钥：

```
[System.Windows.Forms.SendKeys]::SendWait("{ENTER}") 
```

* * *

来源/灵感：

*   [power shell：如何发送鼠标中键？](https://stackoverflow.com/questions/12125959/power-shell-how-to-send-middle-mouse-click)
*   [http://poshcode.org/1837](http://poshcode.org/1837)
*   [http://www.tek-tips.com/viewthread.cfm?qid=1563429](http://www.tek-tips.com/viewthread.cfm?qid=1563429)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-23T14:30:08.513

尝试这样的事情：

```
$wshell = New-Object -ComObject wscript.shell; 
$wshell.AppActivate('Vector RP1210 API Setup') 
Sleep 1 
$wshell.SendKeys('%C')
$wshell.AppActivate('Vector RP1210 API') 
Sleep 1 
$wshell.SendKeys('{ENTER}') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:17:03.967

您可能想从 CodePlex 调查 WASP 管理单元：

[http://wasp.codeplex.com/wikipage?title=Some%20Usage%20Examples&referringTitle=Home](http://wasp.codeplex.com/wikipage?title=Some%20Usage%20Examples&referringTitle=Home)

# css - 在 rtl css 中向右浮动

> ID：16017098
> 
> 赞同：1
> 
> 时间：2013-04-15T13:58:23.023
> 
> 标签：css, css-float, right-to-left

现在我在css中设置了这个

```
.one-half{
width: 305px;   
margin-right: 30px;
float: right;
} 
.feat-cat .last-col{
margin-right: 0;
}

.feat-cat{
overflow: hidden;
margin-bottom: 30px;
direction: rtl;
} 
```

当我这样做时

(.feat-cat .last-col) 消失，如您所见
![在此处输入图像描述](https://i.stack.imgur.com/9JjPs.jpg) **，我该如何正确操作？**

这是我工作的网站 [http://hossamyehia.com/wordpress/](http://hossamyehia.com/wordpress/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:16:13.413

对于 RTL 布局，您需要翻转几个属性。

这些包括但不限于：

*   背景
*   背景位置
*   边界
*   边界半径
*   清除
*   光标
*   方向
*   漂浮
*   左右
*   利润
*   填充
*   文本对齐
*   文本缩进

导致问题的是您的保证金权利。

将这些更改为 margin-left ，它将起作用。

# registry - 在现有键下安装新的注册表值

> ID：16017100
> 
> 赞同：0
> 
> 时间：2013-04-15T13:58:24.907
> 
> 标签：registry, windows-installer, installshield

我们有一个问题，即从旧版软件升级时 InstallShield .MSI 未创建注册表值。旧版软件创建了一个`HKLM\\Software\Company\Appname`带有几个值的键。在现代软件中，我们希望为`Path`同一个键添加一个新值（但保留旧值）。似乎如果密钥本身已经存在，安装程序不会努力创建新值。InstallShield 中公开的唯一选项围绕“如果密钥不存在则创建密钥”以及卸载行为的不同选项。似乎没有办法说“即使密钥已经存在也创建这个值”。

即使密钥已经存在，是否有人知道创建注册表值条目的方法？我不介意 InstallScript 解决方案，但我想卸载它以将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:41:38.923

您需要为新的注册表值创建单独的组件，然后一切都应该没问题。可能您尝试将注册表项（在 InstallShield 中）添加到当前注册表组件，但是当安装程序更新它时，会看到该组件已安装并且不对其执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:51:09.743

经过进一步研究，一件有趣的事情实际上正在发生。从 MSI 日志中，我们确定它在安装过程中进行了`WriteRegistryValues`操作，然后在安装`RemoveRegistryValues`结束时进行了操作。事实证明，这是因为`RemoveExistingProducts`行动接近尾声，就在安装完成之前。相反，我将该动作移至靠近顶部、中间`InstallValidate`和`InstallInitialize`动作的位置。这首先进行了旧版卸载，然后安装了正确的注册表设置。我猜是旧版卸载程序要求删除整个密钥。

对于遇到此问题的其他人，此解决方案有一些缺点。这意味着任何声明为旧产品代码的内容都将被删除，这可能会导致覆盖某些设置并重新编写文件。但是，对我们来说，这个缺点比不存在正确状态的注册表的替代方案要好。

我很抱歉在查看日志之前提出问题，但我希望其他人可以从这个解决方案中受益。

# android - 通过代码登录到特定的 Google Drive 帐户

> ID：16017108
> 
> 赞同：2
> 
> 时间：2013-04-15T13:58:53.043
> 
> 标签：android, google-drive-api

**是否可以通过代码从安卓设备登录谷歌帐户？**

我问的原因是这样的：

我想使用谷歌驱动器来存储应用程序的内容，然后从应用程序中读取 GDrive 内容的文件夹结构并下载任何必要的内容。

我想在我的代码和登录中硬编码该特定帐户的用户名和密码。

可能吗？

我已经浏览了网络上的各种可用内容，包括 Google Drive API，但无法弄清楚如何登录到某些特定帐户。

我不是在寻找一个完整的解决方案，朝正确的方向轻推就可以了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:29:06.593

不支持用户名/密码，即基本授权。您需要通过 OAuth 2.0 流程。`GoogleAccountCredential`意图为你做了很多工作。请参阅[Android 快速入门示例](https://developers.google.com/drive/quickstart-android)。

如果您不希望用户交互并希望为您的应用程序创建一个 Google Drive 帐户来提供文件，您可以在您的应用程序中嵌入一个加密的访问令牌和一个刷新令牌，并使用嵌入的令牌初始化一个凭证对象。请在做出此类决定之前查看安全问题：

```
Credential credential = new GoogleCredential.Builder()
    .setClientSecrets("...")
    ....
    .build();

credential.setAccessToken(storedAccessToken);
credential.setRefreshToken(storedRefreshToken) 
```

# arrays - 处理一个文件并读取另一个文件的 AWK 脚本

> ID：16017110
> 
> 赞同：1
> 
> 时间：2013-04-15T13:58:59.933
> 
> 标签：arrays, awk

我编写了一个 AWK 脚本来处理文本文件，现在需要扩展它，以便处理的输出根据第一个文件中的字段从另一个文件中获取数据。这是我的意思的一个例子；

文件1.txt

```
abc123~17~yy~12345678
abc456~12~yy~23456789
abc789~34~zz~12345678 
```

文件2.txt

```
abc123~11~22~33~ABC-57
abc456~22~11~33~ABC-99
abc789~33~22~11~ABC-12 
```

我当前的 awk 脚本从第 4 个字段为“12345678”的 File1.txt 中提取并处理每一行，因此它找到 2 行。

我现在想扩展它，所以从我找到的那行开始，说

```
abc123~xx~yy~12345678 
```

我们使用 abc123 并在 File2.txt 中搜索它并打印该行的第 4 个字段。

例如。我的 awk 脚本将在 File1.txt 的字段 4 中搜索一个标记，然后用字段 1 和 File2.txt 的字段 4 打印与 File1.txt 中的字段 1 相关的行

因此，如果我们正在搜索 12345678，我的输出将是

```
12345678 abc123 ABC-57 17
12345678 abc789 ABC-12 34 
```

（17 和 34 来自 File1.txt 中的字段 2）。

综上所述，在 File1.txt 的 Field 4 中搜索字符串，在 File2.txt 中找到 File1.txt 中的 Field 1 与 File1.txt 中的 Field 1 匹配的行。然后打印

文件. 字段 4 文件 1\. 字段 1 文件 2\. 字段 4 文件 1\. 字段 2

我希望这很清楚。

我尝试在 File2.txt 中查找“abc123”字符串，然后选择第 4 个字段。这似乎不起作用，现在我认为在字段 1 上建立索引并存储字段 4 的 File2.txt 的 AWK 数组可能会做到这一点。

我不知道该怎么做。

（注意，这是我想要做的一个精简的例子，我真正的要求是文件中有更多的数据）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:06:36.403

这一个班轮将做的伎俩：

```
$ awk -F'~' -v s='12345678' 'FNR==NR&&$4==s{a[$1];next}($1 in a){print s,$1,$5}' file1 file2
12345678 abc123 ABC-57
12345678 abc789 ABC-12 
```

**解释：**

我们将字段分隔符设置为`~`使用该`-F`选项，并将变量的值设置为`s`我们想要使用该`-v`选项匹配的字符串。

作为带有一些解释性注释的脚本：

```
BEGIN { FS="~" }    # Set the field separator. 
FNR==NR && $4==s {  # If we are in the first file and fourth field equals s 
    a[$1]           # Create index of field one
    next            # Skip to next line
}
($1 in a) {         # If field one in file2 is in index
    print v,$1,$5   # Print v, field 1 and field 5 
} 
```

你会像这样运行`awk -v '12345678' -f script.awk file1 file2`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:01:38.710

这看起来是我想要的解决方案；

```
BEGIN { FS="~" }               # Set the field separator. 
FNR==NR && $4==s {             # If we are in the first file and fourth field equals s 
    a[$1]                      # Create index of field one
    field2[$1]=$2

    next                       # Skip to next line
}
($1 in a) {                    # If field one in file2 is in index
    print s,$1,$5,field2[$1]   # Print v, field 1 and field 5 
} 
```

我认为这是正确的。

我对解决方案的理解是这样的。首先它在第一个代码块中处理 File1，我可以将我想要的数据存储在数组中。

然后，它有条件地处理第二个代码块中的文件 2，条件是 $1 在数组 a 中。如果是，则输出数据，并从文件 1 中访问 field2 数组。

问题解决了，我真正的 AWK 脚本很有效。

非常感谢您的帮助。

# windows-runtime - Windows 8：当 SuggestionsRequested 为空时处理事件

> ID：16017112
> 
> 赞同：1
> 
> 时间：2013-04-15T13:59:01.100
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

我需要处理搜索窗格的文本框为空的事件。

`SearchPaneSuggestionsRequested`输入退格键时不会引发事件，直到文本框为空。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:12:22.150

尝试使用`TextBox.TextChanged`并始终检查`TextBox.Text == string.Empty()`.
希望有帮助。

# c# - 来源不明的崩溃转储

> ID：16017117
> 
> 赞同：4
> 
> 时间：2013-04-15T13:59:07.270
> 
> 标签：c#, debugging, exception, windbg

我的应用程序因以下错误而崩溃（来自 WinDbg）：

```
ntdll!ZwWaitForMultipleObjects+0xa
KERNELBASE!WaitForMultipleObjectsEx+0xe8
kernel32!WaitForMultipleObjectsExImplementation+0xb3
clr!WaitForMultipleObjectsEx_SO_TOLERANT+0x91
clr!Thread::DoAppropriateAptStateWait+0x56
clr!Thread::DoAppropriateWaitWorker+0x1b1
clr!Thread::DoAppropriateWait+0x73
clr!CLREvent::WaitEx+0xc1
clr!CLREventWaitWithTry+0x5c
clr! ?? ::FNODOBFM::`string'+0x6286a
clr!AssemblySecurityDescriptor::UpgradePEFileEvidenceToAssemblyEvidence+0x11d
clr!Assembly::ExecuteMainMethod+0xcb
clr!SystemDomain::ExecuteMainMethod+0x452
clr!ExecuteEXE+0x43
clr!CorExeMainInternal+0xc4
clr!CorExeMain+0x15
mscoreei!CorExeMain+0x41
mscoree!CorExeMain_Exported+0x57
kernel32!BaseThreadInitThunk+0xd
ntdll!RtlUserThreadStart+0x1d 
```

这是一个托管应用程序，根据 WinDbg 有 61 个进程/线程从该应用程序运行。在 WinDbg 中，当输入 !threads 时，它说没有找到导出线程。它没有说明是什么错误导致了这种情况（在 Visual Studio 2010 中，它说的是 NullReferenceException）。

我要疯了，我以为这与 USB 串行控制器有关，但我把它放到另一个应用程序中，它仍然崩溃（虽然不是像以前那样 100%，而是像 80%）。

这个异常/错误完全让我无法理解，我不知道如何解决它。

使用 .loadby sos clr 更新：

```
0:000> !threads
ThreadCount:      23
UnstartedThread:  0
BackgroundThread: 17
PendingThread:    0
DeadThread:       4
Hosted Runtime:   no
                                           PreEmptive                                                   Lock
       ID  OSID        ThreadOBJ     State GC       GC Alloc Context                  Domain           Count APT Exception
   0    1  1678 00000000023dbfe0   201a228 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 MTA
   2    2   1b4 000000000243a230      b228 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 MTA (Finalizer)
XXXX    4       0000000004039010     19820 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 MTA
XXXX    5       0000000004099f50     19820 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 Ukn
   7    6  148c 00000000024bc5f0       228 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 Ukn
   9    7  19bc 00000000040e1420      b028 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 MTA
   4    8  1ba8 00000000040a4ff0       228 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 Ukn
  10    9  17f8 00000000040ab760     8b228 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 MTA
  11    a  10a0 00000000040b4890     87028 Enabled  000000000f411ff0:000000000f4120e0 00000000004a5510     0 STA System.ServiceModel.CommunicationObjectFaultedException (000000000f403608)
XXXX    3       00000000040b58a0     19820 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 Ukn
XXXX    b       0000000007e03220     19820 Enabled  0000000000000000:0000000000000000 00000000004a5510     0 Ukn
  26    c   b48 0000000007eee6b0   2000228 Enabled  000000000f417780:000000000f4180e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f35c0f8)
  27    d   22c 0000000007e149c0     80228 Enabled  000000000f3d18f8:000000000f3d20e0 00000000004a5510     1 Ukn System.NullReferenceException (000000000f35a0f8)
  40   16  116c 0000000027db3db0     80228 Enabled  000000000f419300:000000000f41a0e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f34c0f8)
  38   17  18c8 0000000027db44c0   2000228 Enabled  000000000f4054d8:000000000f4060e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f34a0f8)
  37   15   a78 0000000027db36a0   2000228 Enabled  000000000f40bac8:000000000f40c0e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f3540f8)
  41   13  112c 0000000027db2880   2000228 Enabled  000000000f415c00:000000000f4160e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f34e0f8)
  30    f   938 000000000415b590     80228 Enabled  000000000f4081f0:000000000f40a0e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f3520f8)
  36   14   4f0 0000000027db2f90     80228 Enabled  000000000f412f70:000000000f4140e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f3500f8)
  28   10   88c 0000000007ef2500   2000228 Enabled  000000000f3e9238:000000000f3ea0e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f35e0f8)
  31   11  180c 0000000027aac5a0     80228 Enabled  000000000f41bb28:000000000f41c0e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f3580f8)
  33   12  1b2c 0000000027db2170   2000228 Enabled  000000000f3bb238:000000000f3bc0e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f3560f8)
  29    e  1968 0000000007eeca60   2000228 Enabled  000000000f3e2cc8:000000000f3e40e0 00000000004a5510     0 Ukn System.NullReferenceException (000000000f3600f8)
*** WARNING: Unable to verify checksum for System.ni.dll
*** WARNING: Unable to verify checksum for System.Transactions.ni.dll 
```

正在捕获通信异常（当 WCF 主机未启动时会发生这种情况，并且可能会在断开硬件连接时发生）。我怀疑这是我崩溃的原因，因为在 Visual Studio 中它总是崩溃并出现 NullReferenceException，但没有可用的 CallStack / Disassembly。

例如，当我查看线程 OSID 22C（带有 NullReferenceException 的线程）时，CallStack 是

```
ntdll!ZwWaitForSingleObject+0xa
KERNELBASE!WaitForSingleObjectEx+0x79
clr!Thread::LeaveRuntimeNoThrow+0x7c
clr!Thread::LeaveRuntimeNoThrow+0xec
clr!CLREvent::WaitEx+0x5e
clr!Thread::WaitSuspendEventsHelper+0xcf
clr!Thread::WaitSuspendEvents+0x11
clr! ?? ::FNODOBFM::`string'+0x628f1
clr!Thread::RareDisablePreemptiveGC+0xfa
clr!GCHolderEEInterface<0,1,0>::~GCHolderEEInterface<0,1,0>+0x19
clr!Debugger::SendLogMessage+0xb7
clr!DebugDebugger::Log+0x223
System_ni+0x2b5f71
System_ni+0x243c3a
System_ni+0x714851
System_ni+0x70d7a7
System_Transactions_ni!_dyn_tls_init_callback <PERF> (System_Transactions_ni+0x738ec)
System_Transactions_ni!_dyn_tls_init_callback <PERF> (System_Transactions_ni+0x72b13)
clr!CallDescrWorker+0x84
clr!CallDescrWorkerWithHandler+0xa9

0:027> ~40
  40  Id: 1278.116c Suspend: 0 Teb: 000007ff`ffbfa000 Unfrozen
      Start: Loading symbols for 00000000`709b0000     msvcr100.dll ->   msvcr100.dll
msvcr100!endthreadex+0x60 (00000000`709d1dbc) 
      Priority: 0  Priority class: 32  Affinity: f
0:027> !pe
Exception object: 000000000f35a0f8
Exception type:   System.NullReferenceException
Message:          Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
InnerException:   <none>
StackTrace (generated):
    SP               IP               Function
    000000002759FC60 0000000000000001 mscorlib_ni!System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr)+0x2

StackTraceString: <none>
HResult: 80004003 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:06:33.347

您发布的堆栈跟踪似乎与崩溃无关，因为它处于睡眠状态，正在等待某些东西。

您可以查看 Windows 事件日志，有时 CLR 在应用程序崩溃时会在其中放置有意义的消息。

此外，如果您使用的是 .Net 4 或更高版本，则在 Visual Studio 中分析托管进程转储会更加方便，因为您可以轻松地在线程之间导航，甚至构建一个复合线程图，该图将仅显示其调用堆栈中的不同部分.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:41:00.683

这个堆栈跟踪看起来很无辜。尝试在 WinDbg 中启用 Win32 异常。我已经看到托管应用程序在其底层 Win32 调用中崩溃，并且 WinDbg 不会正确显示崩溃的来源，因为默认情况下不会处理 Win32 异常。

# java - Running JUnit integration tests in Eclipse that need Maven pre-integration-test executions?

> ID：16017128
> 
> 赞同：4
> 
> 时间：2013-04-15T13:59:33.730
> 
> 标签：java, eclipse, maven, junit, integration-testing

I have writting some JUnit integration tests that currently run from Maven (via the command line or out CI server). These integration tests automatically configure and startup the database and servlet container inside of Maven's 'pre-integration-test' lifecycle phase.

I would very much like to run these JUnit tests (like I do all our other tests) from within an Eclipse JUnit launch configuration. However, the JUnit launch configuration does not trigger the pre-integration-test executions and thus the environment to test is not properly established.

Whats the best way to get this to work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:48:50.847

You can setup Maven Run Configurations to run within Eclipse, using `Run -> Run Configurations`, assuming you have the Maven plugin for Eclipse. Using the goals `clean verify` will run unit tests and integration tests.

Also if you use the failsafe reports Maven plugin, you can create JUnit style reports, that you can open in Eclipse using the JUnit framework, to see which tests passed and failed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T21:09:01.110

One way to do this I just discovered is to use Eclipse Launch Groups as shown here:

[http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.cdt.debug.application.doc%2Freference%2Fcdt_u_run_dbg_launch_group.htm](http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.cdt.debug.application.doc%2Freference%2Fcdt_u_run_dbg_launch_group.htm)

I missed this because this capability, while language independent needs to be installed from the C/C++ side of Eclipse as shown here:

[What installable component provides 'launch groups' in Eclipse?](https://stackoverflow.com/questions/9003337/what-installable-component-provides-launch-groups-in-eclipse)

Within the launch group the first job should run a maven task to process test resources, the next jobs launch the server(s), and then finally a job to execute the junit tests.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:28:28.523

I don't know what database you want to use, but for unit tests its handy to use an in memory database and maybe also an embedded servlet container. Maybe you could use something like [http://arquillian.org/](http://arquillian.org/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-15T15:00:02.817

JUnit framework should be mainly used for Unit testing and not Integration testing. Integration testing could be performed by QA team.

If you have lot of Integration plumbing code then you should considering Mocking of external elements, such as Databases and web services calls.

Concentrate mainly on testing code that you have written.Add negative, positive and exceptional test scenarios. That will give your code more credibility than full integration test.

For Database I suggest using DBUNIT > [http://www.dbunit.org/](http://www.dbunit.org/) which is an excellent tool for testing database plumbing. This tool can create XML schema from your database and you can keep data as xml replicating the database. This will avoid changing any dataset for your JUnit testing.

# c# - 有什么方法可以知道插件是否引发了 MS CRM 异常？

> ID：16017140
> 
> 赞同：5
> 
> 时间：2013-04-15T14:00:01.803
> 
> 标签：c#, error-handling, dynamics-crm-2011, dynamics-crm, dynamics-crm-4

正如标题所述，我正在寻找一种方法来区分由我的代码或基本 CRM 功能引起的错误与可能安装在客户端系统上的任何自定义插件引发的错误之间的区别。

我们不断成为受害者的是我们的客户自定义第三方插件，这些插件要么是他们自己创建的，要么是从另一个 ISV 购买的。他们将其注册在我们接触的 CRM 实体上，甚至在最近的案例中也注册在我们自己的实体上。我们尝试做某事，插件尝试做它的事情并失败。在最近的示例中，我们将插件放入 CRM 后，该插件未正确编码 '。该插件抛出一个错误，CRM 将其返回给我们。

如何在不浪费时间进行调查的情况下判断该插件是罪魁祸首？到目前为止，我只看到一家公司通过将插件堆栈跟踪作为错误消息来轻松识别。

为清晰而编辑：

*   我正在寻找一种程序化解决方案，以减少识别问题所需的时间是自定义插件，而不是我们的代码与 Azure 中的 CRM 交互。
*   我正在尝试增强我们的错误记录/处理，使其足够聪明以区分差异。
*   即使我们的代码 100% 工作但触发同步插件触发并且该插件失败，我们也会从 CRM 中获得异常。
*   我们所做的一切都是通过 SDK 编程的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:05:00.790

唯一想到的是启用 CRM 跟踪。下面的链接应说明如何在 Microsoft Dynamics CRM 中执行此操作。

[http://support.microsoft.com/kb/907490](http://support.microsoft.com/kb/907490)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:10:26.670

当出现插件异常时如下图： ![在此处输入图像描述](https://i.stack.imgur.com/15gVU.png)

您可以下载日志文件，在里面您可以轻松找到导致异常的插件，例如查看此日志：

```
Unhandled Exception: System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: StupidPluginDetail: 
// ... other details
[StupidPlugin: StupidPlugin.ExamplePlugin]
[bda9ad85-c4a5-e211-bc00-78e7d162ee67: StupidPlugin.ExamplePlugin: Create of orderclose]
</TraceText>
</OrganizationServiceFault> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:08:01.500

查看服务返回的异常的*Detail.TraceText*属性。我还没有设法获得完整的堆栈跟踪，但它返回了一些信息，表明哪里出了问题：

> Mario.CRM.TestOrg.Plugins：Mario.CRM.TestOrg.Plugins.ContactPreUpdate
> 
> [5ee31a9e-3558-e211-adeb-00155d014401：Mario.CRM.TestOrg.Plugins.ContactPreUpdate：更新联系人]

示例代码片段

```
try
{
  //create service proxy and call service
}
catch (Exception ex)
{
  Console.WriteLine(((System.ServiceModel.FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>)(ex)).Detail.TraceText);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:33:11.223

不建议在生产环境中使用此方法，但对测试环境非常有益。每当使用 SDK 的 CRUD 操作失败时，您可以以编程方式禁用所有插件，并尝试相同的操作。如果成功，请一次启用一个插件，直到失败。然后您就可以确定是哪个插件导致了问题，或者它是否根本不是插件。

# jquery - 使用 setData 更新 CKEditor 会留下没有 src 的 img 标签

> ID：16017143
> 
> 赞同：0
> 
> 时间：2013-04-15T14:00:07.547
> 
> 标签：jquery, ckeditor

我正在使用 jquery 来更改 CKEditor 实例中的标记。具体来说，我让某人从我的表单中的选择列表中选择一个徽标，然后用他们的选择更新 ckeditor 中的徽标。

但是，问题是徽标显示为断开的链接。如果我检查 ckeditor 源它是正确的，并且如果我右键单击图像并选择图像属性，它会在 img 对话框中正确显示，如果我然后确定该对话框，图像会正确显示在预览中。

如果我使用Firebug检查页面上的img标签本身，ckeditor已经把src放到了两个数据标签中，data-cke-565-src（这个名字好像变了）和data-cke-saved-src。但是 img 本身不再具有 src 属性。当我使用图像属性窗口使图像在编辑器中正确显示时，src 属性已返回。

我正在使用 getData 和 setData 来更改内容：

```
var emailSupport = {
editorName: 'HtmlBody',
getBodyText: function () {
    return CKEDITOR.instances[emailSupport.editorName].getData();
},

$getBodyText: function () {
    return $("<div>" + emailSupport.getBodyText() + "</div>");
},

setBodyText: function (h) {
    CKEDITOR.instances[emailSupport.editorName].setData(h instanceof jQuery ? h.html() : h);
    return h instanceof jQuery ? h : $("<div>" + h + "</div>");
},
refreshLogo: function (n, $h) {
    if (typeof $h === "undefined") $h = emailSupport.$getBodyText();
    var $emailLogo = $h.find("img.emailLogo");
    var $img = $("#" + n).clone().attr("id", null);
    if ($img.length > 0)
        $emailLogo.show().replaceWith($img.addClass("emailLogo"));
    else {
        $emailLogo.fadeOut();
        alert('Could not find selected image');
    }
    emailSupport.setBodyText($h);
}
}; 
```

这是我正在使用的 javascript 的一个子集，但应该是相关的东西。徽标本身位于页面的 DOM 中，但被隐藏了，这就是为什么我可以根据 GUID 抓取它们并将占位符徽标 img 替换为图像本身的副本。

我可能给了你比我需要的更多的代码，因为调试 setBodyText 显示正确的 HTML 被传递给 setData，所以很明显 ckeditor 正在剥离 src 属性。

在我看来，这是一个错误，但我想知道是否有人以前经历过这种情况，或者有解决方法。我试图避免在调用 setData 后手动更改 DOM，查找任何没有 src 属性的 img 标签并从 data-cke-saved-src 属性中复制它，但这是我能想到的唯一解决方法现在。

作为更新，在写这篇文章时，我尝试了一些替代文件，有时效果很好。它与文件名一致，适用于一个文件，而不适用于另一个文件，但我还没有弄清楚工作图像和损坏图像之间的区别是什么！

文件路径都是虚拟的，但是从根目录开始：它们都以 / 开头，例如：

```
<img width="160" data-cke-862-src="/Content/Logos/thumbs/w160_505_Logo.jpg.png" data-cke-saved-src="/Content/Logos/thumbs/w160_505_Logo.jpg.png" class="imagingThumb emailLogo" alt="505_Logo.jpg" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:45:52.667

没有任何“适当”解决方案的建议，我只好自己推出它，以一种有点老套的方式。

这是我上面的替换 setBodyText 函数：

```
 setBodyText: function (h) {
    CKEDITOR.instances[emailSupport.editorName].setData(h instanceof jQuery ? h.html() : h, function () {
        // There seems to be a bug in CKEditor which is stripping out the logos/images when set
        // This callback code puts it back
        $("#cke_" + emailSupport.editorName + " iframe").contents().find("img").each(function() {
            var $img = $(this);
            if ($img.prop("src") == "") {
                $img.prop("src", $img.data("cke-saved-src"));
            }
        });
    });
    return h instanceof jQuery ? h : $("<div>" + h + "</div>");
}, 
```

我存储了编辑器的名称，因此我可以使用它来查找页面上包含编辑器的 iframe 的元素，然后查找任何图像，检查是否有空的 src 并再次将其放回。

我不知道为什么ckeditor（偶尔）会这样做，但这已经解决了问题。

# php - PHP 创建树

> ID：16017150
> 
> 赞同：1
> 
> 时间：2013-04-15T14:00:23.483
> 
> 标签：php, mysql

我的 mysql 表如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/m7QPB.png)

我需要制作 3 级树，没有 House_NR。

```
-Country
 |--City 1
 |  |--Street 1
 |  |--Street 2
 |
 |--City 2
 |--City 3
 |  |--Sreet 1
 |  |--Steet 2 
```

在 PHP 中，我进行了这个 sql 查询：

```
SELECT
    l.Country_ID,
    c1.Name AS Country_Name,
    l.City_ID,
    c2.Name AS City_Name,
    l.Street_ID,
    s.Name AS Street_Name,
    l.House_NR
FROM Location l
JOIN Country c1 ON c1.id = l.Country_ID
JOIN City c2 ON c2.id = l.City_ID
JOIN Street s ON s.id = l.Street_ID 
```

我有这个功能：

```
function getTree($data) {
    $tree = prepareTree($data);
    drawTree($tree);
}

function prepareTree($data) {
    $nodeList = array();
    $tree = array();

    foreach ($data as $key) {
        $tree[$key["Country_ID"]]["name"] = $key["Country_Name"];
        $tree[$key["Country_ID"]]["id"] = $key["Country_ID"];
        $tree[$key["Country_ID"]]["level"] = 1;

        $tree[$key["Country_ID"]]["children"][$key["City_ID"]]["name"] = $key["City_Name"];
        $tree[$key["Country_ID"]]["children"][$key["City_ID"]]["id"] = $key["City_ID"];
        $tree[$key["Country_ID"]]["children"][$key["City_ID"]]["level"] = 2;

        $tree[$key["Country_ID"]]["children"][$key["City_ID"]]["children"][$key["Street_ID"]]["name"] = $key["Street_Name"];
        $tree[$key["Country_ID"]]["children"][$key["City_ID"]]["children"][$key["Street_ID"]]["id"] = $key["Street_ID"];
        $tree[$key["Country_ID"]]["children"][$key["City_ID"]]["children"][$key["Street_ID"]]["level"] = 3;
    }

    return $tree;
}

function drawTree($data, $sub = false) {
    echo ($sub) ? "<ul class=\"tree-listCat\">" : "<ul class=\"tree-list\">";

    foreach($data as $key) {
        if ($key["children"] != null) {
            echo "<li class=\"tree-itemCat\"><span class=\"tree-itemSel\"><a href=\"switch.php?action=search&type=tree&level=" . $key["level"] . "&id=" . $key["id"] . "\">" . $key["name"] . "</a></span></li>";
            drawTree($key["children"], true);
        } else
            echo "<li class=\"tree-item\"><span class=\"tree-itemSel\"><a href=\"switch.php?action=search&type=tree&level=" . $key["level"] . "&id=" . $key["id"] . "\">" . $key["name"] . "</a></span></li>";
    }

    echo "</ul>";
} 
```

这个函数工作正常，但是函数中存在一些问题，现在函数绘制一个 html 版本的树我有这个：
`action=search&type=tree&level=" . $key["level"] . "&id=" . $key["id"]`，但我需要有这样的东西：

如果只有没有孩子的国家，那么`action=search&type=tree&country=id`
如果只有没有孩子的国家和城市街道，那么`action=search&type=tree&country=id&city=id`
如果所有参数国家、城市和街道，那么`action=search&type=tree&country=id&city=id&street_id=id`

而且功能准备树看起来很糟糕（在我看来）。简而言之，我需要从`Location`数据库中创建一棵树。

# asp.net - 在 ASP.net 和 SQL Server 数据库中下载文件

> ID：16017151
> 
> 赞同：1
> 
> 时间：2013-04-15T14:00:26.030
> 
> 标签：asp.net, sql-server, database, webmatrix

我正在使用 WebMatrix，需要帮助让用户单击打开 PDF 文件并可以使用 adobe reader 查看它的链接。此文件由管理员用户在 asp.net 网页上上传到数据库中。

# google-drive-api - 是否可以在谷歌驱动器上共享应用程序数据

> ID：16017153
> 
> 赞同：7
> 
> 时间：2013-04-15T14:00:26.787
> 
> 标签：google-drive-api

谷歌驱动器上有一个很好的功能，它允许应用程序存储用户不可见的数据。

[https://developers.google.com/drive/appdata](https://developers.google.com/drive/appdata)

是否可以在用户之间共享此应用程序数据，就像其他谷歌驱动器文件一样？

拉尔西

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T16:00:04.440

您无法在云端硬盘的现有权限模型中共享 appdata 文件。Appdata 内容应该是应用程序独有的。如果您尝试更改 appdata 文件的权限，您将收到`403`以下错误消息：

```
Method not supported for appdata contents 
```

# .htaccess - htaccess 将公共目录重新路由到子文件夹

> ID：16017157
> 
> 赞同：0
> 
> 时间：2013-04-15T14:00:34.973
> 
> 标签：.htaccess

我有：

```
public/
-- index.php
-- my_subdir/
---- index.php 
```

我只是想重新路由到 my_subdir。

（为什么？因为 my_subdir 包含我的新 joomla 网站。）

**编辑，解释为什么所有其他解决方案都不起作用**......我已经为此工作了几个小时，但没有任何效果。即使这里接受的答案最初也不起作用。问题不是谷歌提供的许多解决方案，而是我有冲突的规则/条件。

所以这是一个我没有工作的例子（箭头右边的东西是我需要让一切正常工作的东西）：

```
RewriteEngine on

<<<< RewriteCond %{REMOTE_HOST} !^111\.111\.111\.111 
######## my ip address for testing 
########   because this was not originally included, 
########     apparently I was being redirected to maintenance.html ...
RewriteCond %{REQUEST_URI} !/maintenance.html$ 
RewriteRule $ /maintenance.html [R=302]

######## thus by the time the script/server got to this line
########   I was actually at maintenance.html,
########     and so this next condition did not apply to me
RewriteCond %{REQUEST_URI} !^/my_subdir
RewriteRule ^.*$ /my_subdir/$0 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:54:07.880

如果您有下面相同的目录结构`my_subdir`，您可以简单地重写所有内容

```
RewriteCond %{REQUEST_URI} !^/my_subdir
RewriteRule ^.*$ /my_subdir/$0 [L] 
```

如果您想重定向，即使新 URL 在浏览器中可见，您还必须添加[`R`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)标志

```
RewriteRule ^.*$ /my_subdir/$0 [R,L] 
```

# d3.js - 了解如何为比例选择范围

> ID：16017158
> 
> 赞同：0
> 
> 时间：2013-04-15T14:00:37.573
> 
> 标签：d3.js

这段代码和解释：

让我们生成基本的 SVG 视口并将其用作我们的选择：

```
 //Create the SVG Viewport selection
 var svgContainer = d3.select("body").append("svg")
                                      .attr("width", 400)
                                      .attr("height", 100);

 //Create the Scale we will use for the Axis
 var axisScale = d3.scale.linear()
                          .domain([0, 100])
                          .range([0, 400]);

//Create the Axis
var xAxis = d3.svg.axis()
                  .scale(axisScale); 
```

在我们继续之前需要注意三件事：

SVG Viewport 的宽度是 400 个单位我们想将 0 到 100 (.domain([0, 100])) 的数字映射到 view port 的宽度 - 即 400 个单位 **所以我们定义比例的范围作为 .range([0, 400])**

我仍然无法理解他如何弄清楚为 Scale 的域和范围放置什么的原因？有人可以更好地解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:10:25.627

D3 提供了`domain`帮助`range`程序，允许您将数据投影到某种画布上。**Domain 定义您的输入**，而**range 定义输出**。

假设您有一组值，其中每个值都介于 0 和 100 之间。这是您的域，用 d3 表示为`domain([0, 100])`。现在假设您想以图形方式显示这些值。例如作为 svg 圆圈。您可以将您的值直接映射到像素（例如，值 10 转换为左 10 像素，上 10 像素），但您的 svg 容器可能更大，或小于 100 像素宽/高。

要利用可用空间，您需要定义范围。对于 500 像素宽和 300 像素高的 svg 容器，您的范围将是`[0, 500]`比例“x”和`[0, 300]`比例“y”（如果您从左上角开始绘制）。缩放值将适合这些范围。

这是一个例子：

```
var scale = d3.scale.linear().domain([0, 100]).range([0, 500]);

scale(0);   // 0
scale(100); // 500
scale(50);  // 250

scale(-1);  // -5 
```

进一步阅读：

*   [http://www.jeromecukier.net/blog/2011/08/11/d3-scales-and-color/](http://www.jeromecukier.net/blog/2011/08/11/d3-scales-and-color/)
*   [http://alignedleft.com/tutorials/d3/scales/](http://alignedleft.com/tutorials/d3/scales/)
*   [http://en.wikipedia.org/wiki/Domain_of_a_function](http://en.wikipedia.org/wiki/Domain_of_a_function)
*   [http://en.wikipedia.org/wiki/Range_(数学)](http://en.wikipedia.org/wiki/Range_(mathematics))

# ember.js - Ember 自定义复选框

> ID：16017160
> 
> 赞同：1
> 
> 时间：2013-04-15T14:00:38.500
> 
> 标签：ember.js

我正在使用[bootstrap-switch](https://github.com/nostalgiaz/bootstrap-switch)来更改复选框的外观。

该库基本上需要用 div 包围的标准输入标记来完成它的工作：

```
<div class="switch">
    <input type="checkbox">
</div> 
```

我在 Ember 中制作了一个自定义视图，如下所示，几乎可以正常工作！我错过了初始绑定。最初开关是关闭的，而 Ember 模型值为 true（我仍然有常规复选框来查看发生了什么）。一旦我打开我的开关，它与我绑定的值同步，它就可以工作了。然后我可以使用开关来切换值。

我想知道为什么我的开关一开始总是错误的，而不是拾取它绑定的值。

```
App.SwitchButton = Ember.View.extend({
  checked: true,
  attributeBindings: ['checked'],
  template: Ember.Handlebars.compile('<div class="switch switch-small"><input type="checkbox"></div>'),

  init: function() {
    'use strict';

    this._super();
    this.on('change', this, this.hasChanged);
  },

  didInsertElement: function() {
    'use strict';

    $('.switch').bootstrapSwitch({});
  },

  hasChanged: function() {
    'use strict';

    this.set('checked', this.$('INPUT[type=checkbox]').prop('checked'));
  }
}); 
```

我在其中使用开关的模板的一部分：

```
{{#each issue in controller.issues}}
  <li>
    {{issue.datasetName}} <br>
    {{view Ember.Checkbox checkedBinding='issue.isActive'}}
    {{view Locationwise.SwitchButton checkedBinding='issue.isActive'}}
    <p></p>
  </li>
{{/each}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:59:29.500

> “checked”最初是在 div 上设置的，而不是在 input: 上。虽然不知道怎么改。

通过`attributeBindings: ['checked']`在视图上设置，ember 会将属性的值绑定`checked`到视图的 div。在这种情况下，您需要将选中的属性绑定到标签。这可以通过`{{bindAttr}}`在视图的模板中使用来完成：

```
template: Ember.Handlebars.compile('<div class="switch switch-small"><input type="checkbox" {{bindAttr checked="view.checked"}}></div>') 
```

现在输入标签的`checked`属性将绑定到视图的`checked`属性。

# android - 适用于 Android 的自动调整 TextView

> ID：16017165
> 
> 赞同：234
> 
> 时间：2013-04-15T14:00:46.583
> 
> 标签：android, textview, font-size, layoutparams

## 背景

很多时候，我们需要将 TextView 的字体自动适应给定的边界。

## 问题

可悲的是，尽管有很多线程和帖子（以及建议的解决方案）谈论这个问题（例如[这里](https://stackoverflow.com/questions/2617266/how-to-adjust-text-font-size-to-fit-textview)、[这里](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)和[这里](https://bitbucket.org/ankri/autoscaletextview/src)），但它们都没有真正运作良好。

这就是为什么，我决定测试它们中的每一个，直到找到真正的交易。

我认为这样一个 textView 的要求应该是：

1.  应该允许使用任何字体、字体、样式和字符集。

2.  应该同时处理宽度和高度

3.  除非文本由于限制而无法截断，否则不会截断，我们已经给出了它（例如：文本太长，可用大小太小）。但是，如果我们愿意，我们可以请求水平/垂直滚动条，仅适用于这些情况。

4.  应该允许多行或单行。在多行的情况下，允许最大和最小行。

5.  计算不应该很慢。使用循环寻找最佳尺寸？至少优化它并且不要每次将采样增加 1。

6.  在多行的情况下，应该允许更喜欢调整大小或使用更多行，和/或允许使用“\n”字符自己选择行。

## 我试过的

我尝试了很多示例（包括我写过的链接的示例），并且我还尝试修改它们以处理我已经讨论过的案例，但没有一个真正起作用。

我制作了一个示例项目，让我可以直观地查看 TextView 是否正确自动适配。

目前，我的示例项目仅随机化文本（英文字母加数字）和 textView 的大小，并让它保持单行，但即使这在我尝试过的任何示例上都不能正常工作。

这是代码（也可[在此处](https://mega.co.nz/#!w9QRyBaB!J3KdnyTuNXRsYH9Hk5f4nBBXkRM1IAQnV8-53ckRooY)获得）：

### 文件`res/layout/activity_main.xml`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
  android:layout_height="match_parent" tools:context=".MainActivity">
  <Button android:id="@+id/button1" android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" android:text="Button" />
  <FrameLayout android:layout_width="match_parent"
    android:layout_height="wrap_content" android:layout_above="@+id/button1"
    android:layout_alignParentLeft="true" android:background="#ffff0000"
    android:layout_alignParentRight="true" android:id="@+id/container"
    android:layout_alignParentTop="true" />

</RelativeLayout> 
```

### 文件`src/.../MainActivity.java`

```
public class MainActivity extends Activity
  {
  private final Random        _random            =new Random();
  private static final String ALLOWED_CHARACTERS ="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890";

  @Override
  protected void onCreate(final Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final ViewGroup container=(ViewGroup)findViewById(R.id.container);
    findViewById(R.id.button1).setOnClickListener(new OnClickListener()
      {
        @Override
        public void onClick(final View v)
          {
          container.removeAllViews();
          final int maxWidth=container.getWidth();
          final int maxHeight=container.getHeight();
          final FontFitTextView fontFitTextView=new FontFitTextView(MainActivity.this);
          final int width=_random.nextInt(maxWidth)+1;
          final int height=_random.nextInt(maxHeight)+1;
          fontFitTextView.setLayoutParams(new LayoutParams(width,height));
          fontFitTextView.setSingleLine();
          fontFitTextView.setBackgroundColor(0xff00ff00);
          final String text=getRandomText();
          fontFitTextView.setText(text);
          container.addView(fontFitTextView);
          Log.d("DEBUG","width:"+width+" height:"+height+" text:"+text);
          }
      });
    }

  private String getRandomText()
    {
    final int textLength=_random.nextInt(20)+1;
    final StringBuilder builder=new StringBuilder();
    for(int i=0;i<textLength;++i)
      builder.append(ALLOWED_CHARACTERS.charAt(_random.nextInt(ALLOWED_CHARACTERS.length())));
    return builder.toString();
    }
  } 
```

## 问题

有谁知道这个常见问题的解决方案实际上有效吗？

即使是一个功能比我写的要少得多的解决方案，例如一个只有恒定数量的文本行，并根据其大小调整其字体，但绝不会出现奇怪的故障并且文本也会出现的解决方案与其可用空间相比大/小。

* * *

## GitHub项目

由于这是一个如此重要的 TextView，我决定发布一个库，以便每个人都可以轻松地使用它，并为它做出贡献，[**在这里**](https://github.com/AndroidDeveloperLB/AutoFitTextView)。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-07-22T11:09:10.550

感谢 MartinH[在此处](https://stackoverflow.com/a/19578517/1112882)的简单修复，此代码还负责处理`android:drawableLeft`、`android:drawableRight`和标记。`android:drawableTop``android:drawableBottom`

* * *

我在这里的回答应该会让你高兴[Auto Scale TextView Text to Fit in Bounds](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds/17782522#17782522)

我修改了你的测试用例：

```
@Override
protected void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final ViewGroup container = (ViewGroup) findViewById(R.id.container);
    findViewById(R.id.button1).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(final View v) {
            container.removeAllViews();
            final int maxWidth = container.getWidth();
            final int maxHeight = container.getHeight();
            final AutoResizeTextView fontFitTextView = new AutoResizeTextView(MainActivity.this);
            final int width = _random.nextInt(maxWidth) + 1;
            final int height = _random.nextInt(maxHeight) + 1;
            fontFitTextView.setLayoutParams(new FrameLayout.LayoutParams(
                    width, height));
            int maxLines = _random.nextInt(4) + 1;
            fontFitTextView.setMaxLines(maxLines);
            fontFitTextView.setTextSize(500);// max size
            fontFitTextView.enableSizeCache(false);
            fontFitTextView.setBackgroundColor(0xff00ff00);
            final String text = getRandomText();
            fontFitTextView.setText(text);
            container.addView(fontFitTextView);
            Log.d("DEBUG", "width:" + width + " height:" + height
                    + " text:" + text + " maxLines:" + maxLines);
        }
    });
} 
```

我根据*android 开发人员的*要求在此处发布代码：

**最终效果：**

![在此处输入图像描述](https://i.stack.imgur.com/x9z0I.png)

**示例布局文件：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="16dp" >

<com.vj.widgets.AutoResizeTextView
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:ellipsize="none"
    android:maxLines="2"
    android:text="Auto Resized Text, max 2 lines"
    android:textSize="100sp" /> <!-- maximum size -->

<com.vj.widgets.AutoResizeTextView
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:ellipsize="none"
    android:gravity="center"
    android:maxLines="1"
    android:text="Auto Resized Text, max 1 line"
    android:textSize="100sp" /> <!-- maximum size -->

<com.vj.widgets.AutoResizeTextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Auto Resized Text"
    android:textSize="500sp" /> <!-- maximum size -->

</LinearLayout> 
```

**和Java代码：**

```
import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.RectF;
import android.os.Build;
import android.text.Layout.Alignment;
import android.text.StaticLayout;
import android.text.TextPaint;
import android.util.AttributeSet;
import android.util.SparseIntArray;
import android.util.TypedValue;
import android.widget.TextView;

public class AutoResizeTextView extends TextView {
    private interface SizeTester {
        /**
         *
         * @param suggestedSize
         *            Size of text to be tested
         * @param availableSpace
         *            available space in which text must fit
         * @return an integer < 0 if after applying {@code suggestedSize} to
         *         text, it takes less space than {@code availableSpace}, > 0
         *         otherwise
         */
        public int onTestSize(int suggestedSize, RectF availableSpace);
    }

    private RectF mTextRect = new RectF();

    private RectF mAvailableSpaceRect;

    private SparseIntArray mTextCachedSizes;

    private TextPaint mPaint;

    private float mMaxTextSize;

    private float mSpacingMult = 1.0f;

    private float mSpacingAdd = 0.0f;

    private float mMinTextSize = 20;

    private int mWidthLimit;

    private static final int NO_LINE_LIMIT = -1;
    private int mMaxLines;

    private boolean mEnableSizeCache = true;
    private boolean mInitializedDimens;

    public AutoResizeTextView(Context context) {
        super(context);
        initialize();
    }

    public AutoResizeTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initialize();
    }

    public AutoResizeTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initialize();
    }

    private void initialize() {
        mPaint = new TextPaint(getPaint());
        mMaxTextSize = getTextSize();
        mAvailableSpaceRect = new RectF();
        mTextCachedSizes = new SparseIntArray();
        if (mMaxLines == 0) {
            // no value was assigned during construction
            mMaxLines = NO_LINE_LIMIT;
        }
    }

    @Override
    public void setTextSize(float size) {
        mMaxTextSize = size;
        mTextCachedSizes.clear();
        adjustTextSize();
    }

    @Override
    public void setMaxLines(int maxlines) {
        super.setMaxLines(maxlines);
        mMaxLines = maxlines;
        adjustTextSize();
    }

    public int getMaxLines() {
        return mMaxLines;
    }

    @Override
    public void setSingleLine() {
        super.setSingleLine();
        mMaxLines = 1;
        adjustTextSize();
    }

    @Override
    public void setSingleLine(boolean singleLine) {
        super.setSingleLine(singleLine);
        if (singleLine) {
            mMaxLines = 1;
        } else {
            mMaxLines = NO_LINE_LIMIT;
        }
        adjustTextSize();
    }

    @Override
    public void setLines(int lines) {
        super.setLines(lines);
        mMaxLines = lines;
        adjustTextSize();
    }

    @Override
    public void setTextSize(int unit, float size) {
        Context c = getContext();
        Resources r;

        if (c == null)
            r = Resources.getSystem();
        else
            r = c.getResources();
        mMaxTextSize = TypedValue.applyDimension(unit, size,
                r.getDisplayMetrics());
        mTextCachedSizes.clear();
        adjustTextSize();
    }

    @Override
    public void setLineSpacing(float add, float mult) {
        super.setLineSpacing(add, mult);
        mSpacingMult = mult;
        mSpacingAdd = add;
    }

    /**
     * Set the lower text size limit and invalidate the view
     *
     * @param minTextSize
     */
    public void setMinTextSize(float minTextSize) {
        mMinTextSize = minTextSize;
        adjustTextSize();
    }

    private void adjustTextSize() {
        if (!mInitializedDimens) {
            return;
        }
        int startSize = (int) mMinTextSize;
        int heightLimit = getMeasuredHeight() - getCompoundPaddingBottom()
                - getCompoundPaddingTop();
        mWidthLimit = getMeasuredWidth() - getCompoundPaddingLeft()
                - getCompoundPaddingRight();
        mAvailableSpaceRect.right = mWidthLimit;
        mAvailableSpaceRect.bottom = heightLimit;
        super.setTextSize(
                TypedValue.COMPLEX_UNIT_PX,
                efficientTextSizeSearch(startSize, (int) mMaxTextSize,
                        mSizeTester, mAvailableSpaceRect));
    }

    private final SizeTester mSizeTester = new SizeTester() {
        @TargetApi(Build.VERSION_CODES.JELLY_BEAN)
        @Override
        public int onTestSize(int suggestedSize, RectF availableSPace) {
            mPaint.setTextSize(suggestedSize);
            String text = getText().toString();
            boolean singleline = getMaxLines() == 1;
            if (singleline) {
                mTextRect.bottom = mPaint.getFontSpacing();
                mTextRect.right = mPaint.measureText(text);
            } else {
                StaticLayout layout = new StaticLayout(text, mPaint,
                        mWidthLimit, Alignment.ALIGN_NORMAL, mSpacingMult,
                        mSpacingAdd, true);

                // Return early if we have more lines
                if (getMaxLines() != NO_LINE_LIMIT
                        && layout.getLineCount() > getMaxLines()) {
                    return 1;
                }
                mTextRect.bottom = layout.getHeight();
                int maxWidth = -1;
                for (int i = 0; i < layout.getLineCount(); i++) {
                    if (maxWidth < layout.getLineWidth(i)) {
                        maxWidth = (int) layout.getLineWidth(i);
                    }
                }
                mTextRect.right = maxWidth;
            }

            mTextRect.offsetTo(0, 0);
            if (availableSPace.contains(mTextRect)) {

                // May be too small, don't worry we will find the best match
                return -1;
            } else {
                // too big
                return 1;
            }
        }
    };

    /**
     * Enables or disables size caching, enabling it will improve performance
     * where you are animating a value inside TextView. This stores the font
     * size against getText().length() Be careful though while enabling it as 0
     * takes more space than 1 on some fonts and so on.
     *
     * @param enable
     *            Enable font size caching
     */
    public void enableSizeCache(boolean enable) {
        mEnableSizeCache = enable;
        mTextCachedSizes.clear();
        adjustTextSize(getText().toString());
    }

    private int efficientTextSizeSearch(int start, int end,
            SizeTester sizeTester, RectF availableSpace) {
        if (!mEnableSizeCache) {
            return binarySearch(start, end, sizeTester, availableSpace);
        }
        int key = getText().toString().length();
        int size = mTextCachedSizes.get(key);
        if (size != 0) {
            return size;
        }
        size = binarySearch(start, end, sizeTester, availableSpace);
        mTextCachedSizes.put(key, size);
        return size;
    }

    private static int binarySearch(int start, int end, SizeTester sizeTester,
            RectF availableSpace) {
        int lastBest = start;
        int lo = start;
        int hi = end - 1;
        int mid = 0;
        while (lo <= hi) {
            mid = (lo + hi) >>> 1;
            int midValCmp = sizeTester.onTestSize(mid, availableSpace);
            if (midValCmp < 0) {
                lastBest = lo;
                lo = mid + 1;
            } else if (midValCmp > 0) {
                hi = mid - 1;
                lastBest = hi;
            } else {
                return mid;
            }
        }
        // Make sure to return the last best.
        // This is what should always be returned.
        return lastBest;

    }

    @Override
    protected void onTextChanged(final CharSequence text, final int start,
            final int before, final int after) {
        super.onTextChanged(text, start, before, after);
        adjustTextSize();
    }

    @Override
    protected void onSizeChanged(int width, int height, int oldwidth,
            int oldheight) {
        mInitializedDimens = true;
        mTextCachedSizes.clear();
        super.onSizeChanged(width, height, oldwidth, oldheight);
        if (width != oldwidth || height != oldheight) {
            adjustTextSize();
        }
    }
} 
```

**警告：**

不过请注意Android 3.1 (Honeycomb) 中已[解决的](http://code.google.com/p/android/issues/detail?id=17343#c9) [错误](http://code.google.com/p/android/issues/detail?id=17343)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-24T23:25:54.210

我已经修改了 M-WaJeEh 的答案，以考虑到侧面的复合绘图。

方法`getCompoundPaddingXXXX()`返回。`padding of the view + drawable space`参见例如：[TextView.getCompoundPaddingLeft()](http://developer.android.com/reference/android/widget/TextView.html#getCompoundPaddingLeft%28%29)

**问题：** 这修复了可用于文本的 TextView 空间的宽度和高度的测量。如果我们不考虑drawable的大小，它会被忽略并且文本最终会与drawable重叠。

* * *

**更新片段`adjustTextSize(String)`：**

```
private void adjustTextSize(final String text) {
  if (!mInitialized) {
    return;
  }
  int heightLimit = getMeasuredHeight() - getCompoundPaddingBottom() - getCompoundPaddingTop();
  mWidthLimit = getMeasuredWidth() - getCompoundPaddingLeft() - getCompoundPaddingRight();

  mAvailableSpaceRect.right = mWidthLimit;
  mAvailableSpaceRect.bottom = heightLimit;

  int maxTextSplits = text.split(" ").length;
  AutoResizeTextView.super.setMaxLines(Math.min(maxTextSplits, mMaxLines));

  super.setTextSize(
      TypedValue.COMPLEX_UNIT_PX,
      binarySearch((int) mMinTextSize, (int) mMaxTextSize,
                   mSizeTester, mAvailableSpaceRect));
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-23T16:24:21.887

好的，我在上周大量重写了我的代码以**精确地**适应您的测试。您现在可以 1:1 复制此文件，它会立即生效 - 包括`setSingleLine()`. 请记住进行调整`MIN_TEXT_SIZE`，`MAX_TEXT_SIZE`如果您要寻求极端值。

收敛算法如下所示：

```
for (float testSize; (upperTextSize - lowerTextSize) > mThreshold;) {

    // Go to the mean value...
    testSize = (upperTextSize + lowerTextSize) / 2;

    // ... inflate the dummy TextView by setting a scaled textSize and the text...
    mTestView.setTextSize(TypedValue.COMPLEX_UNIT_SP, testSize / mScaledDensityFactor);
    mTestView.setText(text);

    // ... call measure to find the current values that the text WANTS to occupy
    mTestView.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);
    int tempHeight = mTestView.getMeasuredHeight();

    // ... decide whether those values are appropriate.
    if (tempHeight >= targetFieldHeight) {
        upperTextSize = testSize; // Font is too big, decrease upperSize
    }
    else {
        lowerTextSize = testSize; // Font is too small, increase lowerSize
    }
} 
```

整个课程都[可以在这里找到。](http://pastebin.com/e6WyrwSN)

结果现在非常灵活。这与在 xml 中声明的相同，如下所示：

```
<com.example.myProject.AutoFitText
    android:id="@+id/textView"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="4"
    android:text="@string/LoremIpsum" /> 
```

...以及在您的测试中以编程方式构建。

我真的希望你现在可以使用它。顺便说一句，您现在可以打电话`setText(CharSequence text)`使用它。该课程负责处理极其罕见的异常，并且应该坚如磐石。该算法唯一**不**支持的是：

*   打电话到`setMaxLines(x)`哪里`x >= 2`

但是，如果您愿意，我已经添加了广泛的评论来帮助您构建它！

* * *

**请注意：**

如果您只是正常使用它而不将其限制为一行，那么可能会出现您之前提到的断字。这是**Android的一个功能**，**不是**错的`AutoFitText`。Android 总是会破坏对于 TextView 来说太长的单词，这实际上非常方便。如果您想在这里进行干预，请参阅我从第 203 行开始的评论和代码。我已经为您编写了足够的拆分和认可，您今后需要做的就是划分单词然后根据需要进行修改.

总之：您应该高度考虑重写您的测试以支持空格字符，如下所示：

```
final Random _random = new Random();
final String ALLOWED_CHARACTERS = "qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890";
final int textLength = _random.nextInt(80) + 20;
final StringBuilder builder = new StringBuilder();
for (int i = 0; i < textLength; ++i) {
    if (i % 7 == 0 && i != 0) {
        builder.append(" ");
    }
    builder.append(ALLOWED_CHARACTERS.charAt(_random.nextInt(ALLOWED_CHARACTERS.length())));
}
((AutoFitText) findViewById(R.id.textViewMessage)).setText(builder.toString()); 
```

这将产生非常漂亮（和更现实）的结果。
你会发现评论让你开始处理这个问题。

祝你好运和最好的问候

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-02T06:18:13.023

我将逐步解释此属性如何降低 android 版本：

1- 在您的项目 gradle 文件中导入 android 支持库 26.xx。如果 IDE 上没有支持库，它们将自动下载。

```
dependencies {
    compile 'com.android.support:support-v4:26.1.0'
    compile 'com.android.support:appcompat-v7:26.1.0'
    compile 'com.android.support:support-v13:26.1.0' }

allprojects {
    repositories {
        jcenter()
        maven {
            url "https://maven.google.com"
        }
    } } 
```

2-打开您的布局 XML 文件并像这样标记您的 TextView 重构。这种情况是：在系统上增加字体大小时，使文本适合可用宽度，而不是自动换行。

```
<android.support.v7.widget.AppCompatTextView
            android:id="@+id/textViewAutoSize"
            android:layout_width="match_parent"
            android:layout_height="25dp"
            android:ellipsize="none"
            android:text="Auto size text with compatible lower android versions."
            android:textSize="12sp"
            app:autoSizeMaxTextSize="14sp"
            app:autoSizeMinTextSize="4sp"
            app:autoSizeStepGranularity="0.5sp"
            app:autoSizeTextType="uniform" /> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-17T23:19:43.223

我的要求是

*   点击 ScalableTextView
*   打开一个 listActivity 并显示各种长度的字符串项。
*   从列表中选择文本。
*   在另一个活动中将文本设置回 ScalableTextView。

我提到了链接：[Auto Scale TextView Text to Fit within Bounds](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds/21851157#21851157) (including comments) 以及[DialogTitle.java](http://androidxref.com/4.1.1/xref/frameworks/base/core/java/com/android/internal/widget/DialogTitle.java)

我发现提供的解决方案既好又简单，但它不会动态改变文本框的大小。当 *列表视图中选定的文本长度大于* `ScalableTextView`. When selected the text having length smaller than the existing text in the `ScalableTextView`, it do not increase the size of the text, showing the text in the smaller size.

我修改了 ScalableTextView.java 以根据文本长度重新调整文本大小。这是我的`ScalableTextView.java`

```
public class ScalableTextView extends TextView
{
float defaultTextSize = 0.0f;

public ScalableTextView(Context context, AttributeSet attrs, int defStyle)
{
    super(context, attrs, defStyle);
    setSingleLine();
    setEllipsize(TruncateAt.END);
    defaultTextSize = getTextSize();
}

public ScalableTextView(Context context, AttributeSet attrs)
{
    super(context, attrs);
    setSingleLine();
    setEllipsize(TruncateAt.END);
    defaultTextSize = getTextSize();
}

public ScalableTextView(Context context)
{
    super(context);
    setSingleLine();
    setEllipsize(TruncateAt.END);
    defaultTextSize = getTextSize();
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    setTextSize(TypedValue.COMPLEX_UNIT_PX, defaultTextSize);
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    final Layout layout = getLayout();
    if (layout != null)
    {
        final int lineCount = layout.getLineCount();
        if (lineCount > 0)
        {
            int ellipsisCount = layout.getEllipsisCount(lineCount - 1);
            while (ellipsisCount > 0)
            {
                final float textSize = getTextSize();

                // textSize is already expressed in pixels
                setTextSize(TypedValue.COMPLEX_UNIT_PX, (textSize - 1));

                super.onMeasure(widthMeasureSpec, heightMeasureSpec);
                ellipsisCount = layout.getEllipsisCount(lineCount - 1);
            }
        }
    }
}
} 
```

快乐的编码......

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-10-21T15:06:23.350

从 2018 年 6 月起，Android 正式支持Android **4.0（API 级别 14）及更高版本的**[此功能。](https://developer.android.com/guide/topics/ui/look-and-feel/autosizing-textview)*使用 Android 8.0（API 级别 26）及更高版本：*

 ***```
setAutoSizeTextTypeUniformWithConfiguration(int autoSizeMinTextSize, int autoSizeMaxTextSize, 
        int autoSizeStepGranularity, int unit); 
```

*Android 8.0（API 级别 26）之前的 Android 版本：*

```
TextViewCompat.setAutoSizeTextTypeUniformWithConfiguration(TextView textView,
int autoSizeMinTextSize, int autoSizeMaxTextSize, int autoSizeStepGranularity, int unit) 
```

查看我的详细[答案](https://stackoverflow.com/a/52772600/4497812)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-18T10:41:08.377

**警告，[Android 3](http://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29) (Honeycomb) 和[Android 4.0](https://en.wikipedia.org/wiki/Android_Ice_Cream_Sandwich) (Ice Cream Sandwich)中的错误**

Androids 版本：3.1 - 4.04 有一个错误，即 TextView 内的 setTextSize() 仅在第一次（第一次调用）时有效。

该错误在*[问题 22493：Android 4.0 中的 TextView 高度错误](http://code.google.com/p/android/issues/detail?id=22493)*和*[问题 17343：在 HoneyComb 上增加和减少文本大小后，按钮的高度和文本没有恢复到其原始状态中进行了描述](http://code.google.com/p/android/issues/detail?id=17343#c9)*。

解决方法是在更改大小之前向分配给 TextView 的文本添加换行符：

```
final String DOUBLE_BYTE_SPACE = "\u3000";
textView.append(DOUBLE_BYTE_SPACE); 
```

我在我的代码中使用它如下：

```
final String DOUBLE_BYTE_SPACE = "\u3000";
AutoResizeTextView textView = (AutoResizeTextView) view.findViewById(R.id.aTextView);
String fixString = "";
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB_MR1
   && android.os.Build.VERSION.SDK_INT <= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {  
    fixString = DOUBLE_BYTE_SPACE;
}
textView.setText(fixString + "The text" + fixString); 
```

我在文本的左侧和右侧添加了这个“\u3000”字符，以使其居中。如果您将其与左侧对齐，则仅附加到右侧。当然它也可以嵌入 AutoResizeTextView 小部件，但我想将修复代码保留在外面。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-18T16:33:46.730

这个问题现在有官方解决方案。支持库 26 中提供了 Android O 引入的自动调整 TextViews 大小，并且一直向后兼容到 Android 4.0。

[https://developer.android.com/preview/features/autosizing-textview.html](https://developer.android.com/preview/features/autosizing-textview.html)

我不确定为什么包含此信息的[https://stackoverflow.com/a/42940171/47680](https://stackoverflow.com/a/42940171/47680)被管理员删除了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-18T14:04:15.307

将文本视图转换为图像，并在边界内缩放图像。

这是一个关于如何将视图转换为图像的示例：*[将视图转换为位图而不在 Android 中显示？](https://stackoverflow.com/questions/2801116/converting-a-view-to-bitmap-without-displaying-it-in-android)*

问题是，您的文本将无法选择，但它应该可以解决问题。我还没有尝试过，所以我不确定它的外观（因为缩放）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-14T11:42:42.990

从 Android O 开始，可以自动调整 xml 中的文本大小：

[https://developer.android.com/preview/features/autosizing-textview.html](https://developer.android.com/preview/features/autosizing-textview.html)

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    app:autoSizeTextType="uniform"
    app:autoSizeMinTextSize="12sp"
    app:autoSizeMaxTextSize="100sp"
    app:autoSizeStepGranularity="2sp"
  /> 
```

> Android O 允许您指示 TextView 让文本大小自动扩展或收缩，以根据 TextView 的特性和边界填充其布局。此设置可以更轻松地优化具有动态内容的不同屏幕上的文本大小。
> 
> 支持库 26.0 Beta 完全支持运行 Android O 之前的 Android 版本的设备上的自动调整 TextView 功能。该库提供对 Android 4.0（API 级别 14）及更高版本的支持。android.support.v4.widget 包包含 TextViewCompat 类以向后兼容的方式访问功能。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-22T03:38:10.820

在我尝试了 Android 官方[Autosizing TextView](https://developer.android.com/guide/topics/ui/look-and-feel/autosizing-textview.html)之后，我发现如果你的 Android 版本在 Android 8.0（API 级别 26）之前，你需要使用`android.support.v7.widget.AppCompatTextView`，并确保你的支持库版本在 26.0.0 以上。例子：

```
<android.support.v7.widget.AppCompatTextView
    android:layout_width="130dp"
    android:layout_height="32dp"
    android:maxLines="1"
    app:autoSizeMaxTextSize="22sp"
    app:autoSizeMinTextSize="12sp"
    app:autoSizeStepGranularity="2sp"
    app:autoSizeTextType="uniform" /> 
```

**更新**：

根据@android-developer的回复，我查了`AppCompatActivity`源码，发现这两行`onCreate`

`final AppCompatDelegate delegate = getDelegate(); delegate.installViewFactory();`

并且`AppCompatDelegateImpl`在`createView`

```
 if (mAppCompatViewInflater == null) {
        mAppCompatViewInflater = new AppCompatViewInflater();
    } 
```

它使用`AppCompatViewInflater`充气视图，当`AppCompatViewInflater`createView 它将使用 AppCompatTextView 作为“TextView”。

```
public final View createView(){
    ...
    View view = null;
    switch (name) {
        case "TextView":
            view = new AppCompatTextView(context, attrs);
            break;
        case "ImageView":
            view = new AppCompatImageView(context, attrs);
            break;
        case "Button":
            view = new AppCompatButton(context, attrs);
            break;
    ...
} 
```

在我的项目中我不使用`AppCompatActivity`，所以我需要`<android.support.v7.widget.AppCompatTextView>`在 xml 中使用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-12-07T16:06:50.103

如果您正在寻找更简单的东西：

```
 public MyTextView extends TextView{

    public void resize(String text, float textViewWidth, float textViewHeight) {
       Paint p = new Paint();
       Rect bounds = new Rect();
       p.setTextSize(1);
       p.getTextBounds(text, 0, text.length(), bounds);
       float widthDifference = (textViewWidth)/bounds.width();
       float heightDifference = (textViewHeight);
       textSize = Math.min(widthDifference, heightDifference);
       setTextSize(TypedValue.COMPLEX_UNIT_PX, textSize);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-30T17:25:31.890

尝试这个

```
TextWatcher changeText = new TextWatcher() {
     @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                tv3.setText(et.getText().toString());
                tv3.post(new Runnable() {           
                    @Override
                    public void run() {
                    while(tv3.getLineCount() >= 3){                     
                            tv3.setTextSize((tv3.getTextSize())-1);                     
                        }
                    }
                });
            }

            @Override public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

            @Override public void afterTextChanged(Editable s) { }
        }; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-01-31T14:47:49.053

下面是添加了自定义字体功能的 avalancha TextView。

用法：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:foo="http://schemas.android.com/apk/res-auto"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

                <de.meinprospekt.androidhd.view.AutoFitText
                android:layout_width="wrap_content"
                android:layout_height="10dp"
                android:text="Small Text"
                android:textColor="#FFFFFF"
                android:textSize="100sp"
                foo:customFont="fonts/Roboto-Light.ttf" />

</FrameLayout> 
```

不要忘记添加：xmlns:foo="http://schemas.android.com/apk/res-auto"。字体应该在资产中

```
import java.util.ArrayList;
import java.util.List;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.os.Build;
import android.util.AttributeSet;
import android.util.Log;
import android.util.TypedValue;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.ViewTreeObserver;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;
import android.widget.TextView;
import de.meinprospekt.androidhd.R;
import de.meinprospekt.androidhd.adapter.BrochuresHorizontalAdapter;
import de.meinprospekt.androidhd.util.LOG;

/**
 * https://stackoverflow.com/a/16174468/2075875 This class builds a new android Widget named AutoFitText which can be used instead of a TextView to
 * have the text font size in it automatically fit to match the screen width. Credits go largely to Dunni, gjpc, gregm and speedplane from
 * Stackoverflow, method has been (style-) optimized and rewritten to match android coding standards and our MBC. This version upgrades the original
 * "AutoFitTextView" to now also be adaptable to height and to accept the different TextView types (Button, TextClock etc.)
 * 
 * @author pheuschk
 * @createDate: 18.04.2013
 * 
 * combined with: https://stackoverflow.com/a/7197867/2075875
 */
@SuppressWarnings("unused")
public class AutoFitText extends TextView {

    private static final String TAG = AutoFitText.class.getSimpleName();

    /** Global min and max for text size. Remember: values are in pixels! */
    private final int MIN_TEXT_SIZE = 10;
    private final int MAX_TEXT_SIZE = 400;

    /** Flag for singleLine */
    private boolean mSingleLine = false;

    /**
     * A dummy {@link TextView} to test the text size without actually showing anything to the user
     */
    private TextView mTestView;

    /**
     * A dummy {@link Paint} to test the text size without actually showing anything to the user
     */
    private Paint mTestPaint;

    /**
     * Scaling factor for fonts. It's a method of calculating independently (!) from the actual density of the screen that is used so users have the
     * same experience on different devices. We will use DisplayMetrics in the Constructor to get the value of the factor and then calculate SP from
     * pixel values
     */
    private float mScaledDensityFactor;

    /**
     * Defines how close we want to be to the factual size of the Text-field. Lower values mean higher precision but also exponentially higher
     * computing cost (more loop runs)
     */
    private final float mThreshold = 0.5f;

    /**
     * Constructor for call without attributes --> invoke constructor with AttributeSet null
     * 
     * @param context
     */
    public AutoFitText(Context context) {
        this(context, null);
    }

    public AutoFitText(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context, attrs);
    }

    public AutoFitText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context, attrs);
    }

    private void init(Context context, AttributeSet attrs) {
        //TextViewPlus part https://stackoverflow.com/a/7197867/2075875
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.AutoFitText);
        String customFont = a.getString(R.styleable.AutoFitText_customFont);
        setCustomFont(context, customFont);
        a.recycle();

        // AutoFitText part
        mScaledDensityFactor = context.getResources().getDisplayMetrics().scaledDensity;
        mTestView = new TextView(context);

        mTestPaint = new Paint();
        mTestPaint.set(this.getPaint());

        this.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            @Override
            public void onGlobalLayout() {
                // make an initial call to onSizeChanged to make sure that refitText is triggered
                onSizeChanged(AutoFitText.this.getWidth(), AutoFitText.this.getHeight(), 0, 0);
                // Remove the LayoutListener immediately so we don't run into an infinite loop
                //AutoFitText.this.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                removeOnGlobalLayoutListener(AutoFitText.this, this);
            }
        });
    }

    public boolean setCustomFont(Context ctx, String asset) {
        Typeface tf = null;
        try {
        tf = Typeface.createFromAsset(ctx.getAssets(), asset);  
        } catch (Exception e) {
            LOG.e(TAG, "Could not get typeface: "+e.getMessage());
            return false;
        }

        setTypeface(tf);  
        return true;
    }

    @SuppressLint("NewApi")
    public static void removeOnGlobalLayoutListener(View v, ViewTreeObserver.OnGlobalLayoutListener listener){
        if (Build.VERSION.SDK_INT < 16) {
            v.getViewTreeObserver().removeGlobalOnLayoutListener(listener);
        } else {
            v.getViewTreeObserver().removeOnGlobalLayoutListener(listener);
        }
    }

    /**
     * Main method of this widget. Resizes the font so the specified text fits in the text box assuming the text box has the specified width. This is
     * done via a dummy text view that is refit until it matches the real target width and height up to a certain threshold factor
     * 
     * @param targetFieldWidth The width that the TextView currently has and wants filled
     * @param targetFieldHeight The width that the TextView currently has and wants filled
     */
    private void refitText(String text, int targetFieldWidth, int targetFieldHeight) {

        // Variables need to be visible outside the loops for later use. Remember size is in pixels
        float lowerTextSize = MIN_TEXT_SIZE;
        float upperTextSize = MAX_TEXT_SIZE;

        // Force the text to wrap. In principle this is not necessary since the dummy TextView
        // already does this for us but in rare cases adding this line can prevent flickering
        this.setMaxWidth(targetFieldWidth);

        // Padding should not be an issue since we never define it programmatically in this app
        // but just to to be sure we cut it off here
        targetFieldWidth = targetFieldWidth - this.getPaddingLeft() - this.getPaddingRight();
        targetFieldHeight = targetFieldHeight - this.getPaddingTop() - this.getPaddingBottom();

        // Initialize the dummy with some params (that are largely ignored anyway, but this is
        // mandatory to not get a NullPointerException)
        mTestView.setLayoutParams(new LayoutParams(targetFieldWidth, targetFieldHeight));

        // maxWidth is crucial! Otherwise the text would never line wrap but blow up the width
        mTestView.setMaxWidth(targetFieldWidth);

        if (mSingleLine) {
            // the user requested a single line. This is very easy to do since we primarily need to
            // respect the width, don't have to break, don't have to measure...

            /*************************** Converging algorithm 1 ***********************************/
            for (float testSize; (upperTextSize - lowerTextSize) > mThreshold;) {

                // Go to the mean value...
                testSize = (upperTextSize + lowerTextSize) / 2;

                mTestView.setTextSize(TypedValue.COMPLEX_UNIT_SP, testSize / mScaledDensityFactor);
                mTestView.setText(text);
                mTestView.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);

                if (mTestView.getMeasuredWidth() >= targetFieldWidth) {
                    upperTextSize = testSize; // Font is too big, decrease upperSize
                } else {
                    lowerTextSize = testSize; // Font is too small, increase lowerSize
                }
            }
            /**************************************************************************************/

            // In rare cases with very little letters and width > height we have vertical overlap!
            mTestView.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);

            if (mTestView.getMeasuredHeight() > targetFieldHeight) {
                upperTextSize = lowerTextSize;
                lowerTextSize = MIN_TEXT_SIZE;

                /*************************** Converging algorithm 1.5 *****************************/
                for (float testSize; (upperTextSize - lowerTextSize) > mThreshold;) {

                    // Go to the mean value...
                    testSize = (upperTextSize + lowerTextSize) / 2;

                    mTestView.setTextSize(TypedValue.COMPLEX_UNIT_SP, testSize / mScaledDensityFactor);
                    mTestView.setText(text);
                    mTestView.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);

                    if (mTestView.getMeasuredHeight() >= targetFieldHeight) {
                        upperTextSize = testSize; // Font is too big, decrease upperSize
                    } else {
                        lowerTextSize = testSize; // Font is too small, increase lowerSize
                    }
                }
                /**********************************************************************************/
            }
        } else {

            /*********************** Converging algorithm 2 ***************************************/
            // Upper and lower size converge over time. As soon as they're close enough the loop
            // stops
            // TODO probe the algorithm for cost (ATM possibly O(n^2)) and optimize if possible
            for (float testSize; (upperTextSize - lowerTextSize) > mThreshold;) {

                // Go to the mean value...
                testSize = (upperTextSize + lowerTextSize) / 2;

                // ... inflate the dummy TextView by setting a scaled textSize and the text...
                mTestView.setTextSize(TypedValue.COMPLEX_UNIT_SP, testSize / mScaledDensityFactor);
                mTestView.setText(text);

                // ... call measure to find the current values that the text WANTS to occupy
                mTestView.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);
                int tempHeight = mTestView.getMeasuredHeight();
                // int tempWidth = mTestView.getMeasuredWidth();

                // LOG.debug("Measured: " + tempWidth + "x" + tempHeight);
                // LOG.debug("TextSize: " + testSize / mScaledDensityFactor);

                // ... decide whether those values are appropriate.
                if (tempHeight >= targetFieldHeight) {
                    upperTextSize = testSize; // Font is too big, decrease upperSize
                } else {
                    lowerTextSize = testSize; // Font is too small, increase lowerSize
                }
            }
            /**************************************************************************************/

            // It is possible that a single word is wider than the box. The Android system would
            // wrap this for us. But if you want to decide fo yourself where exactly to break or to
            // add a hyphen or something than you're going to want to implement something like this:
            mTestPaint.setTextSize(lowerTextSize);
            List<String> words = new ArrayList<String>();

            for (String s : text.split(" ")) {
                Log.i("tag", "Word: " + s);
                words.add(s);
            }
            for (String word : words) {
                if (mTestPaint.measureText(word) >= targetFieldWidth) {
                    List<String> pieces = new ArrayList<String>();
                    // pieces = breakWord(word, mTestPaint.measureText(word), targetFieldWidth);

                    // Add code to handle the pieces here...
                }
            }
        }

        /**
         * We are now at most the value of threshold away from the actual size. To rather undershoot than overshoot use the lower value. To match
         * different screens convert to SP first. See {@link http://developer.android.com/guide/topics/resources/more-resources.html#Dimension} for
         * more details
         */
        this.setTextSize(TypedValue.COMPLEX_UNIT_SP, lowerTextSize / mScaledDensityFactor);
        return;
    }

    /**
     * This method receives a call upon a change in text content of the TextView. Unfortunately it is also called - among others - upon text size
     * change which means that we MUST NEVER CALL {@link #refitText(String)} from this method! Doing so would result in an endless loop that would
     * ultimately result in a stack overflow and termination of the application
     * 
     * So for the time being this method does absolutely nothing. If you want to notify the view of a changed text call {@link #setText(CharSequence)}
     */
    @Override
    protected void onTextChanged(CharSequence text, int start, int lengthBefore, int lengthAfter) {
        // Super implementation is also intentionally empty so for now we do absolutely nothing here
        super.onTextChanged(text, start, lengthBefore, lengthAfter);
    }

    @Override
    protected void onSizeChanged(int width, int height, int oldWidth, int oldHeight) {
        if (width != oldWidth && height != oldHeight) {
            refitText(this.getText().toString(), width, height);
        }
    }

    /**
     * This method is guaranteed to be called by {@link TextView#setText(CharSequence)} immediately. Therefore we can safely add our modifications
     * here and then have the parent class resume its work. So if text has changed you should always call {@link TextView#setText(CharSequence)} or
     * {@link TextView#setText(CharSequence, BufferType)} if you know whether the {@link BufferType} is normal, editable or spannable. Note: the
     * method will default to {@link BufferType#NORMAL} if you don't pass an argument.
     */
    @Override
    public void setText(CharSequence text, BufferType type) {

        int targetFieldWidth = this.getWidth();
        int targetFieldHeight = this.getHeight();

        if (targetFieldWidth <= 0 || targetFieldHeight <= 0 || text.equals("")) {
            // Log.v("tag", "Some values are empty, AutoFitText was not able to construct properly");
        } else {
            refitText(text.toString(), targetFieldWidth, targetFieldHeight);
        }
        super.setText(text, type);
    }

    /**
     * TODO add sensibility for {@link #setMaxLines(int)} invocations
     */
    @Override
    public void setMaxLines(int maxLines) {
        // TODO Implement support for this. This could be relatively easy. The idea would probably
        // be to manipulate the targetHeight in the refitText-method and then have the algorithm do
        // its job business as usual. Nonetheless, remember the height will have to be lowered
        // dynamically as the font size shrinks so it won't be a walk in the park still
        if (maxLines == 1) {
            this.setSingleLine(true);
        } else {
            throw new UnsupportedOperationException("MaxLines != 1 are not implemented in AutoFitText yet, use TextView instead");
        }
    }

    @Override
    public void setSingleLine(boolean singleLine) {
        // save the requested value in an instance variable to be able to decide later
        mSingleLine = singleLine;
        super.setSingleLine(singleLine);
    }
} 
```

已知错误：不适用于 Android 4.03 - 字体不可见或非常小（原始 avalancha 也不起作用）下面是该错误的解决方法：[https ://stackoverflow.com/a/21851239/2075875](https://stackoverflow.com/a/21851239/2075875)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-22T07:47:15.667

快速修复@Malachiasz 描述的问题

我已通过在自动调整大小类中添加对此的自定义支持来解决此问题：

```
public void setTextCompat(final CharSequence text) {
    setTextCompat(text, BufferType.NORMAL);
}

public void setTextCompat(final CharSequence text, BufferType type) {
    // Quick fix for Android Honeycomb and Ice Cream Sandwich which sets the text only on the first call
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR1 &&
        Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
        super.setText(DOUBLE_BYTE_WORDJOINER + text + DOUBLE_BYTE_WORDJOINER, type);
    } else {
        super.setText(text, type);
    }
}

@Override
public CharSequence getText() {
    String originalText = super.getText().toString();
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR1 &&
        Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
        // We try to remove the word joiners we added using compat method - if none found - this will do nothing.
        return originalText.replaceAll(DOUBLE_BYTE_WORDJOINER, "");
    } else {
        return originalText;
    }
} 
```

只需调用`yourView.setTextCompat(newTextValue)`而不是`yourView.setText(newTextValue)`

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-07-30T13:17:16.907

尝试将`LayoutParams`和`MaxWidth`和添加`MaxHeight`到`TextView`. 它将强制布局尊重父容器而不是溢出。

```
textview.setLayoutParams(new LayoutParams(LinearLayout.MATCH_PARENT,LinearLayout.WRAP_CONTENT));

int GeneralApproxWidthOfContainer = 400;
int GeneralApproxHeightOfContainer = 600;
textview.setMaxWidth(400);
textview.setMaxHeight(600);` 
```***

# jsf - h:inputText 不适用于 a4j:commandLink

> ID：16017170
> 
> 赞同：1
> 
> 时间：2013-04-15T14:00:58.520
> 
> 标签：jsf, richfaces, jsf-1.2

`myBean`是在`request`范围内。

```
<h:form id="indexFormID">
<a4j:outputPanel ajaxRendered="true" layout="block">
    <h:inputText id="inputForHD" value="#{myBean.inputParam}"></h:inputText>
    <a4j:commandLink value="Submit" action="#{myBean.myMethod}" reRender="renderSuccess" process="indexFormID:inputForHD"></a4j:commandLink>
</a4j:outputPanel>

 <h:panelGroup id="renderSuccess">
    <h:panelGroup rendered="#{myBean.someBoolean}">
       //Some other JSF components go here          
    </h:panelGroup>
 </h:panelGroup>
</h:form> 
```

`MyBean`类定义：

```
private String inputParam;
//Getters and setters are there

public String myMethod()
{
    log.debug("~ Value of inputParam" +this.getInputParam()); //This is printing null value for inputParam 
    //when commandLink is clicked
    return null;
} 
```

为什么我`inputParam`没有设置输入参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:23:38.903

好的，我发现您的方法存在一些问题：

```
<h:inputText id="inputForHD" value="#{myBean.inputParam}"></h:inputText> 
```

你已经用这个bean映射了inputParam属性，为什么有一个新的Id“inputForHD”

使用 inputParam 本身，如果你想使用 inputForHD，你可以从 request Parameter map 中选择相同的。

```
String inputForHD = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("indexFormID:inputForHD"); 
```

同样正如我之前提到的，将输出面板包装在 a4j 面板中，例如

```
 <h:panelGroup id="renderSuccess">
        <h:panelGroup rendered="#{helloWorld.someBoolean}">
           //Some other JSF components go here
           <h:inputText id="inputForHDasdasd" value="#{helloWorld.inputParam}"></h:inputText>
        </h:panelGroup>
     </h:panelGroup> 
```

这工作正常，如果有任何问题请告知。

# c - SSE Intrinsics：测试所有 0 或 1 的最快方法？

> ID：16017171
> 
> 赞同：3
> 
> 时间：2013-04-15T14:00:59.020
> 
> 标签：c, windows, optimization, sse, intrinsics

我已经为 Windows 开发了一个 Mandelbrot 生成器，我刚刚转换为使用 SSE Intrinsics。为了检测迭代的结束，在正常的算术中我做了一个大于比较和突破。在 SSE 中执行此操作我可以使用 _mm_cmpgt_pd/_mm_cmpgt_ps 对整个向量进行比较，但是对于我关心的情况，这将写入一个全为 1 的新 128 位向量。

我的问题是，有没有一种更有效的方法来检测所有 1，而不是检查 2 个打包的 64 个 INT？或者，如果检测所有 0 更有效，那么我可以比较小于。这是我目前拥有的：

```
_m128d CompareResult = Magnitude > EarlyOut;
const __m128i Tmp = *reinterpret_cast< __m128i* >( &CompareResult );
if ( Tmp.m128i_u64[ 0 ] == Tmp.m128i_u64[ 1 ] == -1 )
{
    break;
} 
```

我想找到更好方法的原因是因为我不喜欢演员阵容，还因为根据 vTune，我 30% 以上的迭代时间都花在了最后一行上。我知道其中很多将在分支本身中，但我认为我可以通过更好地检测 0 或 1 来减少这种情况。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T15:21:56.347

假设您正在测试比较的结果，那么您可以将每个字节的 MS 位提取为 16 位整数并进行测试，例如

```
int mask = _mm_movemask_epi8((__m128i)CompareResult);
if (mask == 0xffff)
{
    // compare results are all "true"
} 
```

请注意，这是 SSE 中 SIMD 谓词的更通用技术的一个示例，即

```
mask == 0xffff // all "true"
mask == 0x0000 // all "false"
mask != 0xffff // any "false"
mask != 0x0000 // any "true" 
```

# c# - 将基于名称空间的元素添加到现有 XML 文件

> ID：16017177
> 
> 赞同：2
> 
> 时间：2013-04-15T14:01:10.773
> 
> 标签：c#, xml, linq-to-xml

如何`<meta>`使用 XDocument 以编程方式将元素附加到现有 XML 文件

```
<Test xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:kishore="http://www.sample.com">
<meta>
    <kishore:params kishore:version="1.0">
        <kishore:textContent kishore:styleProp="TextProp" kishore:replaceID="Te"/>
    </kishore:params>
</meta>
</Test> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:20:40.170

像这样的东西应该工作：

```
 var doc = new XDocument();
    var root = new XElement(XName.Get("Test"));
    var meta = new XElement(XName.Get("meta"));
    root.Add(meta);
    doc.Add(root);
    Console.WriteLine(doc.ToString()); 
```

# javascript - 用javascript替换一个字符上的多个实例

> ID：16017178
> 
> 赞同：0
> 
> 时间：2013-04-15T14:01:11.253
> 
> 标签：javascript, jquery

我试过了：

```
var test = code.replace("-", "%2D"); 
```

但如果 code = "1-2-3"，它只替换一个破折号。我如何更换两者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:01:43.163

利用 //

```
var test = code.replace(/-/g, "%2D"); 
```

# windows-phone-8 - 用于 Caliburn Micro 的 RootFrame UriMapper

> ID：16017186
> 
> 赞同：0
> 
> 时间：2013-04-15T14:01:27.607
> 
> 标签：windows-phone-8, oauth-2.0, caliburn.micro

我一直在谷歌搜索如何实际实现这一点，但无济于事。找不到有关如何使用 Caliburn Micro 实际执行此操作的单一资源。

基本上，我正在尝试这个[http://www.developer.nokia.com/Community/Wiki/OAuth_on_Windows_Phone](http://www.developer.nokia.com/Community/Wiki/OAuth_on_Windows_Phone)

在示例中，它用作`redirect_uri`普通链接。我用协议/文件关联（参考[http://www.developer.nokia.com/Community/Wiki/URI_associations_for_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/URI_associations_for_Windows_Phone_8)）做到了。一切正常。我让它在没有 Caliburn Micro 的情况下工作。

但是基于那个例子，我需要实现`UriMapperBase`并将其分配给`RootFrame.UriMapper`.

我的问题是我如何实际`UriMapper`使用 CaliburnMicro 为 WP8 实现。对于 Win 8，它是不同的，因为我可以覆盖`OnActivate`并检查`ActivationKind.Protocol`并且不需要`UriMapper`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:56:16.000

好的。终于设法让它工作了。所以，将它发布在这里，因为我很确定会有一个像我一样迷失的灵魂会欣赏这个答案。

要在 Caliburn 中使用，`UriMapper`您需要覆盖`CreatePhoneApplicationFrame`.`bootsrapper`

在`Boostrapper.cs`

```
protected override PhoneApplicationFrame CreatePhoneApplicationFrame()
{
    // var frame = base.CreatePhoneApplicationFrame(); this doesnt work
    var frame = new PhoneApplicationFrame(); // this works
    frame.UriMapper = new AssociationUriMapper();

    return frame;
} 
```

`AssociationUriMapper.cs`- 我只是按照上面的链接按照示例进行操作

```
public class AssociationUriMapper : UriMapperBase
{
    private string tempUri;

    public override Uri MapUri(Uri uri)
    {
        tempUri = System.Net.HttpUtility.UrlDecode(uri.ToString());

        // URI association launch for contoso.
        if (tempUri.Contains("pocketthis:MainPage"))
        {
            // Get the category ID (after "CategoryID=").
            //int categoryIdIndex = tempUri.IndexOf("CategoryID=") + 11;
            //string categoryId = tempUri.Substring(categoryIdIndex);

            // Views/MainPage.xaml returns external exception, 
            // so remember the / before views
            return new Uri("/Views/MainPage.xaml", UriKind.Relative);
        }

        // Otherwise perform normal launch.
        return uri;
    }
} 
```

希望这将有助于任何尝试在 WP8 中使用 Caliburn Micro 实现 Uri/文件关联的人。

# c# - 如何修剪小数点？

> ID：16017188
> 
> 赞同：2
> 
> 时间：2013-04-15T14:01:30.200
> 
> 标签：c#, decimal

我有一个十进制数：

```
decimal a = 0.8537056986486486486486486486; 
```

我想将它显示为点后只有 8 位数字的字符串：a 等于 ->“0.85370569”。我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:03:57.927

例如，像这样：

```
a.ToString("0.00000000"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:08:09.113

```
 decimal a = 0.8537056986486486486486486486;    
 var v=  a.ToString("#.########"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:06:29.560

尝试使用

```
a.ToString("D8"); 
```

这应该将其转换为正确的格式。

编辑：

正如评论中所说， D 仅用于整数类型，因此不适用于小数等。利用

```
static void Main(string[] args)
{
    decimal d = (decimal)0.8537056986486486486486486486;
    Console.WriteLine(d.ToString("N8"));
    Console.ReadLine();
} 
```

反而。

这会将其格式化为`0.85370570`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:11:04.517

要以数字方式执行此操作，您可以使用：

```
decimal a = (decimal) 0.8537056986486486486486486486;
String test = (Math.Truncate(100000000 * a) / 100000000).ToString(); 
```

# python - Python：匹配单个单词（带空格）

> ID：16017191
> 
> 赞同：0
> 
> 时间：2013-04-15T14:01:35.550
> 
> 标签：python, regex, wildcard

问题是我试图匹配一个单词（两边都有空格），如果它存在的话。

我工作的代码（至少大部分）是：

```
import re, os

str1 = "the host offered $ rec*ting advice"
str1 = re.sub('[*]', '(.*?)', str1)
str1 = re.sub('[$]', '(.*?)', str1)
str1 = str1.lower()
print str1
previous_dir = os.getcwd()
os.chdir('testfilefolder')
for filename in os.listdir('.'):
    with open(filename) as f:
        file_contents = f.read().lower()
    output = re.search("%s" % str1, file_contents)
    if output:
        print (" Match found in " + filename)) 
```

因此，例如，如果我有字符串`"the host has offered some recruiting advice"`并在字符串上进行搜索，`"the host offered some $ rec*ting advice"` 它将不起作用 - 由于美元符号（由`(.*?)`.`"the host offered $ rec*ting advice"`有效 - 所以我可以匹配 1 个单词（如果存在） - 看起来`(.*?)`应该匹配一个字符，每个单词中至少有一个字符，所以我想这就是它起作用的原因。我不确定是否`(.*?)`正确使用但这是我研究后迄今为止我所做的最好的工作。对此的任何建议将不胜感激。请注意，上面我`(.*?)`在文本中似乎显示出某种`(.*?)`标签，只是格式化字符串之间`(.*?)`。

但是，我想匹配 0 或 1 个单词。我之前发现过类似于 \bs+\b 的东西（我不太记得了，也找不到了），但无论如何都无法让它工作。我知道 \b 应该匹配一个可能存在的单词两侧的空字符串。

如果在其他地方问过这个问题，我表示歉意，但似乎我找到的所有东西（我仍然可以找到并且能够开始工作）正在寻找一个特定的词 - 但是我想看看是否只有 0 或 1 存在：

[如何使用 python 匹配文本文件中的单词？](https://stackoverflow.com/questions/5228448/how-do-i-match-a-word-in-a-text-file-using-python)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:30:17.933

*你的问题很难理解，所以这可能不是你要找的，但它可能会帮助你朝着正确的方向前进。*

如果您想查找文本中的所有单词，可以这样做：

```
import re
str1 = "the host offered $ rec*ting advice"
re.findall(r'\b\S+\b',str1) 
```

这将产生：

```
['the', 'host', 'offered', 'rec*ting', 'advice'] 
```

模式中的`\b`-thing 实际上并不匹配字符，而是字符串中单词开始或结束的位置（有关此内容的更多信息，请参见[http://docs.python.org/2/library/re](http://docs.python.org/2/library/re)）。

美元符号不被视为单词，因为根据使用的-definition它不是*单词字符。*`\b`

如果你想得到一个字符串中的第一个单词，如果有一个单词可以使用：

```
re.findall(r'\b\S+\b',str1)[:1] 
```

然后，您将获得零个或一个元素的列表！

# excel - 从 Access 报告到 Excel 电子表格的某些字段会损坏

> ID：16017192
> 
> 赞同：2
> 
> 时间：2013-04-15T14:01:39.733
> 
> 标签：excel, ms-access, ms-access-2003

我无法理解这一点。我正在使用 Access 2003。

当我右键单击访问报告，然后单击“发送...”时出现问题，它只有一个“邮件收件人”选项。然后我点击 Excel。将打开一个包含外发电子邮件的 Outlook 窗口，其中包含一个 Excel 附件。有一列带有项目 ID。有些会损坏，而有些则不会。似乎它们需要以数字 20 开头才能损坏。其他任何东西都可以。

例如，以下项目 id 是可以的：

```
100657  
100657-17  
216116-115  
221007-001 
```

以下内容已损坏（损坏的版本如下）：

```
202103-001 becomes 1313049  
205103-001 becomes 2408777 
```

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:28:41.040

检查源的格式，有可能 20 年代已损坏为日期甲酸盐。如果 access 使用的数据的原始来源是 Excel，则这种情况尤其可能发生。您可能希望将格式设置为文本，尤其是在您使用数字来跟踪 ID （如股票编号）时。

还要检查在 Access for Field 中使用了什么格式。当 Access 字段设置为文本时，Excel 不太可能随意使用您的数据。如果您在解决格式后仍然遇到问题。在您的问题中发布有关格式的更多详细信息。

# jquery - 如何在 Jquery 的 IF 语句中使用元素的 innerText？

> ID：16017193
> 
> 赞同：0
> 
> 时间：2013-04-15T14:01:40.113
> 
> 标签：jquery, dom

我正在尝试编写一些javascript，这样当用户单击标题为“新标签”的标签时，网页的上下文就会消失。什么都没有发生，我不知道为什么。我最好的猜测是父元素的文本没有被识别。我真的可以使用一些帮助！我已经为此工作了好几天。下面是标签的代码。一切正常，直到 IF 语句。

```
$("#content_tabs a").click(function () {
    $("#content_tabs li").removeClass("on");
    $(this).parent().addClass("on");
    if (($(this).parent().text()) == 'New Tab') {
        $("#context").hide();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:26:33.487

没有你的标记很难说，但不是依赖于特定的元素结构，你可以替换它：

```
if (($(this).parent().text()) == 'New Tab') { 
```

和：

```
if (($(this).closest("li").text()) == 'New Tab') { 
```

将上升结构，直到找到离您最近的 li 标签。

# python - 将文件分箱到大小大致相等的目录中

> ID：16017197
> 
> 赞同：2
> 
> 时间：2013-04-15T14:01:46.487
> 
> 标签：python, language-agnostic

给定表单文件名的排序列表

```
{artist}-{title}.mp3 
```

我想将文件分发到 255 个 bin（子目录）中，以便每个 bin 包含大约相等数量的文件，并限制艺术家是“原子的”，即没有艺术家应该将曲目分布在一个以上的目录中。结果也应该保持排序（即忽略分箱，我们仍然有相同的列表排序）。

我已经尝试过：我通过这种方法将列表分成 255 个部分：

```
def partition(lst, n):
    q, r = divmod(len(lst), n)
    indices = [q * i + min(i, r) for i in range(n + 1)]
    result = [lst[indices[i]:indices[i + 1]] for i in range(n)]
    assert sum(len(x) for x in result) == len(lst)
    assert len(set(len(x) for x in result)) <= 2
    return result 
```

然后，如果他们已经有另一首曲目，我会通过将艺术家移到前一个 bin 中来执行并强制执行艺术家是原子的限制。这种方法是次优且损坏的，因为我留下了很多空箱（由于在某些情况下，同一艺术家的许多曲目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:27:20.907

在破解了一个小时后，这是我想出的更好的解决方案。它的工作原理是为曲目创建一个`dict`艺术家，然后通过贪婪地配对较小的相邻条目来将其缩减到 255 个键。

我确信它仍然不是最佳的，但它是可行的，我会在这里重现它，以防有人有类似的问题需要解决：

```
d = collections.OrderedDict()
# build an OrderedDict of artist to track(s)
for fn in files:
    artist, title = fn.split('-')
    if (artist,) not in d:
        d[artist,] = []
    d[artist,].append(fn)

def window(seq, n=2):
    it = iter(seq)
    result = tuple(itertools.islice(it, n))
    if len(result) == n:
        yield result    
    for elem in it:
        result = result[1:] + (elem,)
        yield result

while len(d) > 255:
    # find the pair of adjacent keys with minimal number of files contained
    k1, k2 = min(window(d), key=lambda x: len(d[x[0]] + d[x[1]]))
    # join them into the first key and nuke the latter
    d[k1] += d.pop(k2) 
```

# webkit - 是否可以检查并设置 wx.html2 以在 Windows 上使用 WebKit？

> ID：16017198
> 
> 赞同：3
> 
> 时间：2013-04-15T14:01:52.703
> 
> 标签：webkit, wxpython, multiplatform, wx.html2

是否可以在 Windows 上为in （开发版）做 a`check`和 a的组合？`engine-switch``wx.html2``wxPython 2.9.4.0`

我想要实现的是；如果安装了 Safari、Chrome 或 Opera (WebKit/Blink)，则让`wx.html2`库在 Windows 上使用 WebKit。

有没有人有这方面的经验，也许如何实现它？我还想知道`wx.html2`每个操作系统上的引擎在哪里寻找以及它如何要求渲染它。

我尝试使用`wx.webkit`. 但是有很多问题，例如；缺乏文档和对象的实现似乎在不同的操作系统上中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T06:43:30.010

wxPython 是如何知道使用 Webkit 的？它不是，它是父库， wxWidgets 进行[编译时检查](https://github.com/wxWidgets/wxWidgets/blob/master/src/common/webview.cpp)。如果 Webkit 是在 Mac 或 Linux 上构建的，则假定它已安装，如果它在 Windows 上，则假定已安装 IE。

如果你*真的*想要 WebKit/Blink，那么也许可以考虑[CEFPython](http://code.google.com/p/cefpython/wiki/wxPython)，一个嵌入式 Chrome。在（非常简单的）wxPython 应用程序的链接中有一个示例。

# visual-studio-2010 - 将 .cs 文件注入 msbuild 工作正常，除了 Intellisense（VS 2010）

> ID：16017200
> 
> 赞同：2
> 
> 时间：2013-04-15T14:02:09.127
> 
> 标签：visual-studio-2010, msbuild, intellisense, msbuild-task, csproj

这是我正在尝试做的，但到目前为止还没有成功。我有一个带有一些 xaml 类的 WPF 项目。我有一个 msbuild 任务，它创建与 xaml 类同名但具有一些额外属性的部分类。部分类被正确创建并且构建也很好。但是，新创建的属性不会显示在 VS2010 中的 Intellisense 上。我也在使用 Resharper。

我已经在原始 .csproj 文件中导入了我的目标。原始文件粘贴在问题的末尾。

```
<Import Project="..\XamlModifyTask\bin\Debug\TXamlModifyTask.csproj" /> 
```

这就是 TXamlModifyTask.csproj 的样子

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
<UsingTask AssemblyFile="XamlModifyTask.dll" TaskName="XamlModifyTask"/>
<!--PropertyGroup>
    <ResolveReferencesDependsOn>XamlModify;$(ResolveReferencesDependsOn)</ResolveReferencesDependsOn>
</PropertyGroup-->
<PropertyGroup>
    <CompileDependsOn>XamlModify;$(CompileDependsOn)</CompileDependsOn>
</PropertyGroup>
<ItemGroup>
    <SettingsGenerated Include="$(IntermediateOutputPath)**\*.test.cs"></SettingsGenerated>
</ItemGroup>
<Target Name="XamlModify">
<XamlModifyTask Files="@(Page)" OutputPath="$(IntermediateOutputPath)"></XamlModifyTask>
    <ItemGroup>
        <Compile Include="@(SettingsGenerated)"></Compile>
        <FileWrites Include="@(SettingsGenerated)"/>
    </ItemGroup>
</Target> 
```

我什至尝试过使用 BeforeCompile/BeforeBuild 事件。但它不起作用。我在这里做错什么了吗。

这是原始项目文件。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<UsingTask TaskName="JPMorgan.Build.XamlModifyTask" AssemblyFile="H:\Visual Studio 2010\Projects\WpfApplication1\WpfApplication1\JPMorgan.Build.dll" />
<PropertyGroup>
<Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
<Platform Condition=" '$(Platform)' == '' ">x86</Platform>
<ProductVersion>8.0.30703</ProductVersion>
<SchemaVersion>2.0</SchemaVersion>
<ProjectGuid>{55A24932-DA31-4837-9E1E-9E69C34BFB5F}</ProjectGuid>
<OutputType>WinExe</OutputType>
<AppDesignerFolder>Properties</AppDesignerFolder>
<RootNamespace>WpfApplication1</RootNamespace>
<AssemblyName>WpfApplication1</AssemblyName>
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
<TargetFrameworkProfile>Client</TargetFrameworkProfile>
<FileAlignment>512</FileAlignment>
<ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
<WarningLevel>4</WarningLevel>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
<PlatformTarget>x86</PlatformTarget>
<DebugSymbols>true</DebugSymbols>
<DebugType>full</DebugType>
<Optimize>false</Optimize>
<OutputPath>bin\Debug\</OutputPath>
<DefineConstants>DEBUG;TRACE</DefineConstants>
<ErrorReport>prompt</ErrorReport>
<WarningLevel>4</WarningLevel>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
<PlatformTarget>x86</PlatformTarget>
<DebugType>pdbonly</DebugType>
<Optimize>true</Optimize>
<OutputPath>bin\Release\</OutputPath>
<DefineConstants>TRACE</DefineConstants>
<ErrorReport>prompt</ErrorReport>
<WarningLevel>4</WarningLevel>
</PropertyGroup>
<ItemGroup>
<Reference Include="System" />
<Reference Include="System.Data" />
<Reference Include="System.Xml" />
<Reference Include="Microsoft.CSharp" />
<Reference Include="System.Core" />
<Reference Include="System.Xml.Linq" />
<Reference Include="System.Data.DataSetExtensions" />
<Reference Include="System.Xaml">
  <RequiredTargetFramework>4.0</RequiredTargetFramework>
</Reference>
<Reference Include="WindowsBase" />
<Reference Include="PresentationCore" />
<Reference Include="PresentationFramework" />
</ItemGroup>
<ItemGroup>
<ApplicationDefinition Include="App.xaml">
  <Generator>MSBuild:Compile</Generator>
  <SubType>Designer</SubType>
</ApplicationDefinition>
<Compile Include="View\Window1.xaml.cs">
  <DependentUpon>Window1.xaml</DependentUpon>
</Compile>
<Compile Include="Window2.xaml.cs">
  <DependentUpon>Window2.xaml</DependentUpon>
</Compile>
<Compile Include="Window4.xaml.cs">
  <DependentUpon>Window4.xaml</DependentUpon>
</Compile>
<Page Include="MainWindow.xaml">
  <Generator>MSBuild:Compile</Generator>
  <SubType>Designer</SubType>
</Page>
<Compile Include="App.xaml.cs">
  <DependentUpon>App.xaml</DependentUpon>
  <SubType>Code</SubType>
</Compile>
<Compile Include="MainWindow.xaml.cs">
  <DependentUpon>MainWindow.xaml</DependentUpon>
  <SubType>Code</SubType>
</Compile>
<Page Include="View\Window1.xaml">
  <SubType>Designer</SubType>
  <Generator>MSBuild:Compile</Generator>
</Page>
<Page Include="Window2.xaml">
  <SubType>Designer</SubType>
  <Generator>MSBuild:Compile</Generator>
</Page>
<Page Include="Window3.xaml">
  <SubType>Designer</SubType>
  <Generator>MSBuild:Compile</Generator>
</Page>
<Compile Include="Window3.xaml.cs">
  <DependentUpon>Window3.xaml</DependentUpon>
</Compile>
<Page Include="Window4.xaml">
  <SubType>Designer</SubType>
  <Generator>MSBuild:Compile</Generator>
</Page>
</ItemGroup>
<ItemGroup>
<Compile Include="Properties\AssemblyInfo.cs">
  <SubType>Code</SubType>
</Compile>
<Compile Include="Properties\Resources.Designer.cs">
  <AutoGen>True</AutoGen>
  <DesignTime>True</DesignTime>
  <DependentUpon>Resources.resx</DependentUpon>
</Compile>
<Compile Include="Properties\Settings.Designer.cs">
  <AutoGen>True</AutoGen>
  <DependentUpon>Settings.settings</DependentUpon>
  <DesignTimeSharedInput>True</DesignTimeSharedInput>
</Compile>
<EmbeddedResource Include="Properties\Resources.resx">
  <Generator>ResXFileCodeGenerator</Generator>
  <LastGenOutput>Resources.Designer.cs</LastGenOutput>
</EmbeddedResource>
<None Include="Properties\Settings.settings">
  <Generator>SettingsSingleFileGenerator</Generator>
  <LastGenOutput>Settings.Designer.cs</LastGenOutput>
</None>
<AppDesigner Include="Properties\" />
</ItemGroup>
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
<Import Project="..\XamlModifyTask\bin\Debug\TXamlModifyTask.csproj" />

<!--Target Name="BeforeBuild">
<ItemGroup>
  <Compile Include="@(SettingsGenerated)"></Compile>
  <FileWrites Include="@(SettingsGenerated)"/>
</ItemGroup>
</Target-->
<!--Target Name="AfterBuild">
</Target-->
</Project> 
```

# shell - Shell 脚本 if then else 使用 scp 循环

> ID：16017203
> 
> 赞同：0
> 
> 时间：2013-04-15T14:02:15.440
> 
> 标签：shell

```
User=0
av="653"
ma="727"
pr="713"
mi="234"
n=192.168.1.20:/root/Ma
echo "Please select av ma ji im pr"
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "
read User
if [ "$User" = av ]
then
    echo `scp $User@$n .`
elif [ "$User" = ma ]
then    
    echo `scp $User@$n .`
elif [ "$User" = pr ]
then
    echo `scp $User@$n .`
elif [ "$User" = mi ]
then
    echo `scp $User@$n .`
else
    echo "UNKNOWN USER"
fi 
```

脚本无法正常工作；我想要`av`它的值为 653

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:30:33.230

您是否追求：

```
User=0
av="653"
ma="727"
pr="713"
mi="234"
n=192.168.1.20:/root/Ma
echo "Please select av ma ji im pr"
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "
read User
if [ "$User" = av ]
then echo `scp $av@$n .`
elif [ "$User" = ma ]
then echo `scp $ma@$n .`
elif [ "$User" = pr ]
then echo `scp $pr@$n .`
elif [ "$User" = mi ]
then echo `scp $mi@$n .`
else echo "UNKNOWN USER"
fi 
```

如果不是，请澄清您的问题，以便更清楚您在寻找什么。我也不清楚你为什么有这个`echo `scp $xy@$n .``符号——与 just 相比有什么好处`scp $xy@$n .`？

```
scp="echo scp"  # For testing; you'd use just scp=scp in production work
User=0
av="653"
ma="727"
pr="713"
mi="234"
n=192.168.1.20:/root/Ma
echo "Please select av ma ji im pr"
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "
read User
if [ "$User" = av ]
then $scp $av@$n .
elif [ "$User" = ma ]
then $scp $ma@$n .
elif [ "$User" = pr ]
then $scp $pr@$n .
elif [ "$User" = mi ]
then $scp $mi@$n .
else echo "UNKNOWN USER"
fi 
```

当我测试上面的脚本（文件`xx.sh`）时，输出是：

```
$ bash xx.sh
Please select av ma ji im pr
First 2 initial of your Name eg: [av ma ji im pr]? mi
scp 234@192.168.1.20:/root/Ma .
$ 
```

请注意，在 中`bash`，您可以使用[间接扩展](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)来简化代码：

```
scp="echo scp"  # For testing; you'd use just scp=scp in production work
User=0
av="653"
ma="727"
pr="713"
mi="234"
n=192.168.1.20:/root/Ma
echo "Please select av ma ji im pr"
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "
read User
case "$User" in
(av|ma|pr|mi) $scp ${!User}@$n . ;;
(*) echo "UNKNOWN USER"
esac 
```

对于相同的输入，这给出了与先前脚本相同的结果。

# java - Java 如何使用 pdf javascript 关闭 PDF？

> ID：16017205
> 
> 赞同：2
> 
> 时间：2013-04-15T14:02:30.270
> 
> 标签：java, pdf, itext

我正在使用 servlet 将 pdf 流发送到浏览器。

要求当我向用户展示 pdf 时，它必须打开打印对话框。我使用 iText api 成功地做到了这一点。像这样的东西：

```
stamper.setPageAction(PdfWriter.PAGE_OPEN, new PdfAction(PdfAction.PRINTDIALOG), 1); 
```

现在我确实需要在打印后关闭 pdf 文件。我尝试使用 pdfactions，但我无法得到它。我尝试的是：

```
writer.setAdditionalAction(PdfWriter.DID_PRINT, PdfAction.javaScript("app.execMenuItem('Close');", writer)); 
```

或者

```
writer.setAdditionalAction(PdfWriter.DID_PRINT, PdfAction.javaScript("app.close();", writer)); 
```

我不一定需要使用 pdfActions，但是在用户将 pdf 发送到打印机后，我看不到如何获取它。

你有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:21:07.337

有一个原因，为什么`app.execMenuItem('Close');`不`app.close()`工作。这些方法旨在关闭 Adob​​e Reader/Acrobat 的独立版本。我猜您正在浏览器中查看 PDF，在这种情况下，您使用 Adob​​e Reader 作为插件、Chrome 的 PDF 查看器、Firefox 中的 pdf.js 或任何其他 PDF 查看器。

问题 #1：您需要从 PDF 文档中关闭浏览器窗口。PDF 无法控制您的浏览器。假设他们会：这不是一个严重的安全问题吗？

问题 #2：您将 PDF 嵌入 HTML 页面（例如使用`<object>`标签）并[在 PDF 中的 JavaScript 和 HTML 中的 JavaScript 之间建立通信](http://www.javabeat.net/articles/301-javascript-communication-between-html-and-pdf-in-itext-1.html)。我已经在我的书中描述了如何做到这一点，但是：它不适用于所有操作系统上的所有浏览器。例如：Chrome 的 PDF 查看器和 Firefox 的 pdf.js 将完全忽略您的命令。

您正在使用我们的 iText 库提出解决方案，但您提出的问题是任何软件都无法完成的。

# emacs - 如何使 Emacs org 文档在 github 存储库中更漂亮？

> ID：16017206
> 
> 赞同：17
> 
> 时间：2013-04-15T14:02:31.697
> 
> 标签：emacs, github, markdown, markup, org-mode

github 支持多种标记语言，其中一种是`Emacs org mode`docs。

1.  但是默认的 CSS 文件总是看起来很难看（不过，比内置 org 模式下的默认文件要好得多。
2.  此外， *源代码块*似乎也没有语法高亮。

那么是否有可能通过对 org 文件进行一些小的更改来使其更美观？或者你能给我一些建议或好的做法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T15:07:32.713

Github 使用[org-ruby](https://github.com/bdewey/org-ruby)将 org-mode 转换为 html。似乎最新版本的 org-ruby 支持小写 org-mode 关键字和源代码块中的语法突出显示（以及其他好东西）。在官方 Github 升级之前，看起来唯一的选择是使用大写 BEGIN_SRC/END_SRC 或将您的 org 文件导出到 emacs 中的 html/md 并使用您喜欢的任何选项/css/etc 并将生成的文件发布到GitHub。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T20:55:32.997

Githubs Org-Mode 支持已升级*，但 #+TITLE* : 不受支持，例如大多数被窃听的链接。所以它主要工作。

# c - 将数组类型转换为 c 中的结构

> ID：16017207
> 
> 赞同：6
> 
> 时间：2013-04-15T14:02:32.107
> 
> 标签：c, structure

我有这样的结构

```
struct packet
{
int seqnum;
char type[1];
float time1;
float pri;
float time2;
unsigned char data[512];
} 
```

我正在接收数组中的数据包

```
char buf[529]; 
```

我想单独获取 seqnum，数据所有内容。以下类型转换是否有效。它给我带来了垃圾价值。

```
struct packet *pkt;
pkt=(struct packet *)buf;
printf(" %d",pkt->seqnum) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T14:05:26.800

不，这可能行不通，而且通常是一种糟糕而破碎的方式。

您必须使用特定于编译器的扩展来确保结构成员之间没有不可见的填充，这样才能工作。例如，使用 gcc，您可以使用[`__attribute__()`](http://gcc.gnu.org/onlinedocs/gcc-3.2.3/gcc/Type-Attributes.html)语法来执行此操作。

因此，它不是一个可移植的想法。

最好明确一点，并解压缩每个字段。这也使您有机会在网络协议中具有明确定义的*字节序*，这通常是互操作性的好主意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T14:06:28.030

不，这通常不是有效的代码。您应该先制作结构，然后将内容复制到其中：

```
packet p;

memcpy(&p.seqnum, buf + 0, 4);

memcpy(&p.type[0], buf + 4, 1);

memcpy(&p.time1, buf + 5, 4); 
```

等等。

您必须非常小心地获得正确的类型大小和字节序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T14:08:44.897

首先，您无法提前知道编译器将在结构中的何处插入填充字节以进行性能优化（缓存行对齐、整数对齐等），因为这取决于平台。当然，除非您正在考虑仅在您的平台上构建应用程序。

无论如何，在您的情况下，您似乎是从某个地方（网络？）获取数据，并且很可能数据已被压缩（字段之间没有填充字节）。

如果您真的想将数组类型转换为结构指针，您仍然可以告诉编译器删除它可能添加的填充字节。请注意，这取决于您使用的编译器，而不是标准的 C 实现。使用 gcc，您可以在结构定义的末尾添加以下语句：

```
struct my_struct {
    int blah;
    /* Blah ... */
} __attribute__((packed)); 
```

请注意，它会影响成员访问、复制等的性能......

除非你有很好的理由这样做，否则永远不要使用这个`__attribute__((packed))`东西！

另一个更可取的解决方案是自己进行解析。您只需分配一个适当的结构并通过从缓冲区中寻找好的信息来填充其字段。一系列`memcpy`指令可能会在这里解决问题（请参阅Kerrek的回答）

# java - 通过属性禁用 Spring Scheduler 任务

> ID：16017215
> 
> 赞同：4
> 
> 时间：2013-04-15T14:02:55.120
> 
> 标签：java, spring, cron, task, scheduler

我正在使用 Spring Framework 安排任务，并通过特定于环境的属性文件设置 cron 值。我正在寻找一种通过属性禁用此任务的方法，以便只有某些环境运行此任务。

```
<task:scheduled-tasks>
<task:scheduled ref="theClass" method="theMethod" cron="${scheduler.cron}" /> 
</task:scheduled-tasks>

<bean id="theClass" class="com.test.TheClass" scope="prototype" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:07:14.217

您可以使用 Spring 环境配置文件[（使用 annotations](http://blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/)的[示例，使用 xml](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)的示例），因此您可以拥有用于开发、测试、生产等的不同配置文件。这些是通过属性 (spring.profiles.active) 设置的。

# vb.net - 如何在 raddatetimepicker 中验证时间？

> ID：16017221
> 
> 赞同：1
> 
> 时间：2013-04-15T14:03:12.650
> 
> 标签：vb.net, telerik, datetimepicker

感谢您查看我的帖子。我的项目中集成了一个 Telerik raddatetimepicker。我有一个验证控件来确保最终用户选择一个日期。但是，如何验证用户是否选择了时间？默认时间设置为凌晨 12:00。那么，有没有一种方法可以生成一个代码来检查文本框中是否有“12:00 AM”？例如，如果文本框在日期之后确实有“12:00 AM”，则会引发错误，并且用户无法继续。文本框同时包含日期和时间。

我对此进行了很多研究，但似乎找不到在选择器中验证时间的方法。

再次感谢，我期待听到您的意见。

注意：我的编码是用 VB 完成的，我在 Visual Studio 2010 中工作。

乔什

```
telerik:raddatetimepicker ID="TimeOfCourse" runat="server" 
                        ShowPopupOnFocus="True" Culture="en-US" AutoPostBack="True" 
                        AutoPostBackControl="TimeView" Height="26px" 
                        HiddenInputTitleAttibute="Visually hidden input created for functionality purposes." 
                        Width="200px" 
                        WrapperTableSummary="Table holding date picker control for selection of dates.">
                        <timeview runat="server" cellspacing="-1" columns="8" interval="00:15:00" />
                        <timepopupbutton hoverimageurl="" imageurl="" />
                        <calendar runat="server" usecolumnheadersasselectors="False" userowheadersasselectors="False" viewselectortext="x" />
                        <dateinput runat="server" dateformat="M/d/yyyy" displaydateformat="M/d/yyyy" 
                            labelwidth="" BorderColor="Red" BorderStyle="Solid" BorderWidth="1px" 
                            AutoPostBack="True" Height="26px" />
                        <datepopupbutton hoverimageurl="" imageurl="" />
                    </telerik:raddatetimepicker> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:48:34.710

这应该可以完成工作（更新）...

```
 Dim userSelectedTime As String = 'The name of your textbox, example: TextBox1.Text
 userSelectedTime = userSelectedTime.Remove(userSelectedTime.LastIndexOf(":"), userSelectedTime.Length - userSelectedTime.LastIndexOf(":"))
 If userSelectedTime = "00:00" Then
    MsgBox("Please enter a different time.", MsgBoxStyle.Information, "Your app's name")
 End If 
```

使用此代码的唯一缺点是它不会接受 00:00 的时间，即使用户真正输入了 00:00。

# javascript - 将图像宽度放在 url jquery 中

> ID：16017222
> 
> 赞同：0
> 
> 时间：2013-04-15T14:03:13.763
> 
> 标签：javascript, jquery, html, image

我使用的是 resrc.it，它将为我调整图像大小，使图像不会比我需要的大。现在我想做的不是使用自动javascript方法，而是把它放在url本身中。

```
<img src="http://app-uk.resrc.it/s={size-of-div}/http://bla.com/theimage.png" /> 
```

我想使用 jquery 来测量图像 div 的大小并将其打印在 URL 中，即当前包装 div 的大小。

如何将宽度放入 URL 的值中？如果不存在 JS 方法，我可以使用纯 Javascript 或 Jquery。

之后，它将裁剪图像并给我一个更合适的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:12:44.167

您需要查找图像并获取父宽度。试试这个代码：

```
$(function(){
    $("img[src*='size-of-div']").each(function(){
     var width = this.parentNode.offsetWidth;//get parent width
      this.src = this.src.replace("{size-of-div}",width)//change src string
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:06:07.300

我想，你正在寻找这个：[http ://api.jquery.com/width/](http://api.jquery.com/width/)

# grails - 为 UL LI 创建 Geb 模块

> ID：16017224
> 
> 赞同：2
> 
> 时间：2013-04-15T14:03:19.273
> 
> 标签：grails, spock, geb

我正在尝试创建一个表示无序列元素列表的 geb 模块。我已经看到了如何使用表格执行此操作的示例，但我很难将其转换为`UL->LI`元素。这是我到目前为止所拥有的：

```
class CheckoutPage extends Page {

  static content = {
    cartItemList { $(".cart_items ul") }
    cartItem { i -> module CartItem,  cartItems[i] }
    cartItems(required: false) { cartItemList.find("li.item") }
  }
}

class CartItem extends Module {
  static content = {
    thumbnail { $("img.book_cover", it) }
    itemInfo { $("div.item_info", it) }
    bookTitle { itemInfo.find("h1").find("a").text() }
  }
} 
```

当我在我的规范中执行以下操作时：

```
def "add an item to the cart"() {
   when:
   to CheckoutPage, productId: "10001"

   then:
   cartItems.size() == 1
   def cartItem = cartItems(0)
   cartItem.bookTitle == "Test Book Title 001"
} 
```

我收到以下错误：

> geb.error.UnresolvablePropertyException：无法将 bookTitle 解析为 cartItems 的内容

但是，`cartItem`它是一个 DOM 元素，因为我可以这样做并且它可以工作：

```
cartItem.find("div.item_info").find("h1").find("a").text() == "Test Book Title 001" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:12:57.227

您可能想查看这篇博文。它几乎准确地概述了您正在寻找的内容。

[http://adhockery.blogspot.com/2010/11/modelling-repeating-structures-with-geb.html](http://adhockery.blogspot.com/2010/11/modelling-repeating-structures-with-geb.html)

在浏览了该博客文章后，这是我为您的页面类提出的：

```
class CheckoutPage extends Page {

  static content = {
    cartItemList { $(".cart_items ul") }
    cartItems(required: false) { 
      cartItemList.find("li.item").collect { item-> 
        module(CartItem, item)
      }
    }
  }
} 
```

然后你的模块应该是这样的：

```
class CartItem extends Module {
  static content = {
    thumbnail { $("img.book_cover") }
    itemInfo { $("div.item_info") }
    bookTitle { itemInfo.find("h1").find("a").text() }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:44:09.080

看起来您的代码中有错误 - 您可能想说`def cartItem = cartItem(0)`没有`def cartItem = cartItems(0)`。此外，尽量避免对局部变量和内容定义使用相同的名称（就像您为 所做的那样`cartItem`），因为它有时会导致很难追踪的名称冲突。

[您可以通过使用方法](http://www.gebish.org/manual/current/modules.html#using_modules_for_repeating_content_on_a_page)简化您的内容定义[`moduleList()`](http://www.gebish.org/manual/current/modules.html#using_modules_for_repeating_content_on_a_page)

```
static content = {
    cartItemList { $(".cart_items ul") }
    cartItems { i -> moduleList CartItem, cartItemList.find("li.item"), i }
} 
```

在你的测试中：

```
then:
cartItems.size() == 1 //here you use it to retrieve the full list
def item = cartItems(0) //here you use it to retrieve a single element
item.bookTitle == "Test Book Title 001" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:05:06.563

这个问题的答案是给出的两个答案的组合。我需要这些答案来更好地了解正在发生的事情。这是实际的解决方案：

```
class CheckoutPage extends Page {

  static content = {
    cartItemList { $(".cart_items ul") }
    cartItems(required: false) { module CartItem, cartItemList.find("li.item")}
  }
}

class CartItem extends Module {
  static content = {
    thumbnail { $("img.book_cover") }
    itemInfo { $("div.item_info") }
    bookTitle { itemInfo.find("h1").find("a").text() }
  }
} 
```

和测试：

```
def "add an item to the cart"() {
    when:
    to CheckoutPage, productId: '10001'

    then:
    cartItems.size() == 1
    def cartItem = cartItems(0)
    cartItem.bookTitle == "Test Book Title 001"
} 
```

原因（我认为）这行得通是因为我们正在处理单个 LI 元素。不是像 TR 那样具有多个 TD 元素的容器。所以这里的上下文是 LI，通过使用模块而不是 moduleList，我只处理单个 LI 元素，而不是它们的列表。cartItems 已经将 LI 元素作为 List 包含。

至少，我是这么理解的并且它正在工作。

# c# - 声明静态类，以便它们可以存储在 List 中

> ID：16017226
> 
> 赞同：5
> 
> 时间：2013-04-15T14:03:21.083
> 
> 标签：c#

我正在开发一个软件，它可以获取实时数据并根据用户输入从中提取一些特征。每个可用的特征都包含一个方法，该方法接受一个双精度数组并返回所需的特征，例如 MeanAbsoluteValue 的这个：

```
public static class MeanAbsoluteValue{
    public static double Calculate(double[] data){
        return data.Sum(s => Math.Abs(s)) / data.Length;
    }
} 
```

由于每个功能都只有一个计算方法，我正在考虑尝试重写它们，以便可以从该集合中收集和选择它们。

我曾尝试编写一个接口供他们使用，但由于它们是静态的，因此这是不允许的。

有没有办法做到这一点？如果是这样，你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T14:06:12.433

`Calculate`您可以创建从这些类的方法构造的委托数组，如下所示：

```
Func<double[],double>[] array = new Func<double[],double>[] {
    MeanAbsoluteValue.Calculate
,   MeanValue.Calculate
,   Deviation.Calculate
//  ...and so on
}; 
```

这是[关于 ideone 的演示](http://ideone.com/koimIG)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:09:54.810

将代理存储在字典中，并按名称查找它们

```
 var methods = new Dictionary<string, Func<double[], double>>();
 methods.Add("MeanAbsoluteValue", MeanAbsoluteValue.Calculate);

 ...
 public double DoFunc(string name, double [] args)
 {
    var func = methods[name];
    return func(args);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:08:51.370

只需收集功能...

```
var list = new List<Func<double[], double>(MeanAbsoluteValue.Calculate, Average.Calculate)
var accum = 0;
foreach(var func in list)
{
    accum += func(new [] {1,3,4,});
} 
```

# matlab - 跳过'x'的多个点并在matlab中存储和变量'newdata

> ID：16017227
> 
> 赞同：1
> 
> 时间：2013-04-15T14:03:29.290
> 
> 标签：matlab, textscan

我将数据存储在变量中`data`。

```
 data =  
    [43.98272955    39.55809471;            
    -49.51656799    28.57164726;
    -9.475861028    -44.31264255;
    27.14884251     2.603921223;
    -2.914496888    7.864022006;
    4.093025860     4.816211687;
    -12.11007479    5.797539648;
    -1.653535904    -12.49864642;
    5.978990391     1.229984916;
    0.9837133282    -2.001124423;
    5.674977844     6.323209942;
   -9.574459589     3.696791663;
    0.3410452503    -7.338955191] 
```

但只需要使用与多个 x 对应的数据。例子：

```
 if x = 3, 
```

只想存储多行 3，所以

```
newdata = [-9.475861028 -44.31264255; 
4.093025860 4.816211687; 
5.978990391 1.229984916;
-9.574459589 3.696791663] 
```

我怎么做？

PS 我会使用命令 textscan。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:10:49.380

这对于索引很简单：

```
newData = data(3:3:end,:) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:10:56.530

如果我正确理解了这个问题：

数据（x：x：长度（数据），:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T14:17:55.450

您可以使用 mod (modulo) 函数逐行扫描它，以提取与所需倍数相对应的行。例如：

```
x=3;
newdata=[];

for k=1:size(data,1)
  if mod(k,x)==0
    newdata=[newdata; data(k,:)];
  end
end 
```

# python - Python help('modules') 命令在 IDLE (idle.pyw) 中抛出 WindowsError 但不是命令行提示符 (python.exe)

> ID：16017228
> 
> 赞同：1
> 
> 时间：2013-04-15T14:03:33.110
> 
> 标签：python, windows-7, numpy, arcgis, python-idle

如果我在 python.exe 命令提示符下键入以下内容...

```
>>>help('modules') 
```

...我得到了预期的可用模块列表。

但是，当我在 IDLE 环境 (idle.pyw) 中键入相同的内容时，它会引发错误：

```
Traceback (most recent call last):
File "<pyshell#1>", line 1, in <module>
    help('modules')
File "C:\Python27\ArcGIS10.1\lib\site.py", line 467, in __call__
  return pydoc.help(*args, **kwds)
File "C:\Python27\ArcGIS10.1\lib\pydoc.py", line 1727, in __call__
  self.help(request)
File "C:\Python27\ArcGIS10.1\lib\pydoc.py", line 1766, in help
  elif request == 'modules': self.listmodules()
File "C:\Python27\ArcGIS10.1\lib\pydoc.py", line 1887, in listmodules
  ModuleScanner().run(callback, onerror=onerror)
File "C:\Python27\ArcGIS10.1\lib\pydoc.py", line 1938, in run
  for importer, modname, ispkg in pkgutil.walk_packages(onerror=onerror):
File "C:\Python27\ArcGIS10.1\lib\pkgutil.py", line 105, in walk_packages
  for importer, name, ispkg in iter_modules(path, prefix):
File "C:\Python27\ArcGIS10.1\lib\pkgutil.py", line 147, in iter_modules
  for name, ispkg in iter_importer_modules(i, prefix):
File "C:\Python27\ArcGIS10.1\lib\pkgutil.py", line 211, in iter_modules
  for fn in os.listdir(path):
WindowsError: [Error 5] Access is denied: 'C:\\WINDOWS\\system32\\Msdtc/*.*' 
```

为什么 Windows 对 IDLE 说“访问被拒绝”而不是命令行？我曾尝试在 IDLE 上使用“以管理员身份运行”但没有成功。我是否需要以某种方式重新配置 IDLE？

有关信息：

我安装的 Python 2.7.2（在 Windows 7 64 位机器上运行的 32 位版本）与 ArcGIS 10.1 捆绑在一起，它使用 Python 作为脚本语言和某些数值运算（通过 Numpy）。这可能与提示和 IDLE 中的不同行为有关吗？

Python 根目录是：`C:\Python27\ArcGIS10.1\`.

IDLE 安装在`C:\Python27\ArcGIS10.1\Lib\idlelib\idle.pyw`.

Python 命令提示符安装在：`C:\Python27\ArcGIS10.1\python.exe`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T04:47:04.310

`help('modules')`我刚刚在 2.7.8 和 3.4.2 中都成功运行。响应取决于 sys.path。似乎 ArcGIS 将 C:/Windows/System32/Msdtc 添加到路径中，但您可以在运行帮助之前进行检查。在任何情况下，都无法通过 Windows 资源管理器访问该文件夹，即使以管理员身份运行也是如此。它需要通过“安全选项卡”进行特殊用户操作。由于 MS 不想让我在那里闲逛，所以我没有追求访问权限。我不知道为什么控制台和空闲之间的区别。

# svn - 迁移到 mercurial 时转换或删除旧的 svn 分支

> ID：16017230
> 
> 赞同：1
> 
> 时间：2013-04-15T14:03:39.647
> 
> 标签：svn, version-control, mercurial, migration, branch

我们即将从 subversion 迁移到 mercurial。我们已经解决了具有单个存储库和两个分支（`default`和`stable`）的可变工作流。

我们要迁移的 subversion 存储库有很多我们不再需要的旧功能分支。

我们应该在最终转换之前转换这些分支并关闭它们还是删除它们？为什么我们要选择其中一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:02:43.913

您可以使用任何方式：两者都（或多或少）可用。

我更喜欢（如果您对 Subversion 绑定没有问题）使用[带有 --filemap 选项的 Convert Extension](http://mercurial.selenic.com/wiki/ConvertExtension#A--filemap)（转换 repo-root 点），并且`exclude path/to/not-needed-branch`是最快和最简单的方法

# oracle10g - SELECT department_id，department_name，location_id，city FROM 部门 d 自然加入我使用的位置（location_id）；

> ID：16017235
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:03:52.500
> 
> 标签：oracle10g

**为什么查询返回**：ORA-00933：SQL 命令未正确结束并且在删除 Natural 关键字时，它变为真（它执行）?????????

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:09:03.770

您要么让 Oracle 为您执行连接（使用`natural`），要么您明确执行。

取自Oracles[文档：](http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqljnaturaljoin.html)

以下两个语句是等价的：

```
SELECT * FROM COUNTRIES NATURAL JOIN CITIES

SELECT * FROM COUNTRIES JOIN CITIES
USING (COUNTRY, COUNTRY_ISO_CODE) 
```

您需要选择一种方法或另一种方法 - 目前您正在尝试将两者混合。

# apache - 如何使没有证书的 apache SNI 主机重定向到 http 地址？

> ID：16017240
> 
> 赞同：4
> 
> 时间：2013-04-15T14:03:56.510
> 
> 标签：apache, http, ssl, https, sni

我有一个具有多个命名主机的 apache 服务器，所有这些主机都可以正常工作于端口 80 http 流量。（具有唯一 IP 地址的 VPS）

我有一个具有 SSL 证书的域，并且该域被配置为同时处理 http 和 https 流量。

但是，如果有人不小心将 https 添加到未配置 SSL 的 URL 的开头，我会收到典型的证书警告错误（预期），然后如果用户接受错误（取决于浏览器），它会显示我配置的 SSL 站点而不是原始的非 ssl 域。

我已经阅读了一些关于 SNI 的内容，但我没有其他每个域的证书，并且希望服务器要么不响应除一个特定域之外的任何其他域的 SSL 请求，要么重定向到 http 版本的地点。

请就我如何处理这个问题提出建议。

亲切的问候，斯宾塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T12:52:04.670

出于安全原因，您尝试实现的目标无法实现。

浏览器（实现了检查证书的机制）无法知道用户`https://`是`http://`无意还是有意键入的。由于最终取决于用户`https://`在他们认为需要时检查使用的内容，因此浏览器应该简单地执行用户请求的操作。

从`https://`to的重定向`http://`应始终以有效`https://`连​​接开始。如果您无法获得初始连接的有效证书，那么 SNI 将无法为您提供太多帮助。

否则，浏览器假设可能正在进行 MITM 攻击是公平的。显式输入`https://`（或使用 HSTS）是唯一可靠的机制来对抗像 SSLstrip 这样的 MITM 工具，否则它们能够降级（或阻止从 升级`http://`到`https://`）。

# macos - 如何在 Mac OS X 上使用 octave 3.6.4 中的 eigs() 函数

> ID：16017243
> 
> 赞同：0
> 
> 时间：2013-04-15T14:04:12.977
> 
> 标签：macos, octave, homebrew, arpack

我正在尝试使用一个利用 Matlab 的 eigs() 函数的工具箱。当我在 Octave（3.6.4，在 Mac OS X 上通过 Homebrew 安装）运行它时，将返回以下内容：

`error: eigs: not available in this version of Octave`

我发现了很多潜在的解决方案，关于让 ARPACK(-ng) 程序与 Octave 一起工作。我尝试了更多我记得的方法，但似乎没有一个有效。

有人知道使用 eigs() 函数的 Octave 的当前状态吗？这可能吗，最好是在 Homebrew 中使用包？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:52:27.803

我认为您指的是从 3.6 开始，Octave 不再附带 eigs，而是依赖于外部 arpack 库。来自[Octave 发行说明](http://www.gnu.org/software/octave/NEWS-3.6.html)：

```
3.6 版重要的用户可见更改摘要：
-------------------------------------------------- --------
...
 ** ARPACK 库不再随 Octave 一起分发。
    如果您需要 eigs 或 svds 功能，您必须提供
    通过包管理器或编译它的外部 ARPACK
    你自己。如果您的系统不存在预编译包，
    您可以在以下位置找到当前的 ARPACK 来源
    http://forge.scilab.org/index.php/p/arpack-ng

```

因此，您需要在安装 Octave 之前安装一个 arpack 库，该库对 Octave 可见。对于自制软件，这意味着在 /usr/local/ 下。

Octave 的`configure`文件具有 arpack 检测逻辑，并且默认情况下它会在构建过程中检测 arpack，并在存在时针对它进行构建。因此，如果您安装了 Homebrew 的 octave，即使在公式中没有对它的特殊支持，它也应该会选择它。

当前的 homebrew-science 版本中没有 arpack 公式，但有一个开放的 pull request 可以添加：[https](https://github.com/Homebrew/homebrew-science/pull/112) ://github.com/Homebrew/homebrew-science/pull/112 。去那里发表评论以表示支持，也许它很快就会被合并。一旦进入，做`brew install libarpack; brew install octave`，你的八度可能会拿起`eigs`。如果没有，则提出反对 homebrew-science 的问题以添加 arpack 支持。

# selenium - 无法从日历弹出窗口中单击日期

> ID：16017244
> 
> 赞同：0
> 
> 时间：2013-04-15T14:04:18.690
> 
> 标签：selenium, selenium-webdriver

我想从 iframe 内的日历弹出窗口中单击日期。我在下面写了抛出无法找到元素错误的硒代码。请帮助我编写正确的 xpath 或 selenium 代码。我是 Selenium 的新手

硒代码：

```
WebElement iframe =driver.findElement(By.id("NewsSearchDateToInput_selector_iframe"));

driver.switchTo().frame(iframe);
//clicking on date 3  
driver.findElement(By.xpath("//div[3][@class='daysNumbersStyles']")).click(); 
```

> 错误：无法定位元素“//div[3][@class='daysNumbersStyles']”

html标签：

```
<iframe id="NewsSearchDateToInput_selector_iframe" 
        class="dateTimeSelectorContainerStyle altFlexibleContainer" 
        src="javascript:false;" 
        style="left: 1216px; top: 245px; width: 249px; height: 207px; 
               display: block;"/>

<div class="dateTimeSelectorContainerStyle altFlexibleContainer" 
     style="top: 245px; left: 1216px; display: block;">
  <div class="top">
    <div class="content">
      <div class="dateSelectorHeader">
        <div class="dateSelectorBody">
          <div class="yearMonthSelectorStyle">
            <div id="NewsSearchDateToInput_selector_monthSelector" class="monthSelectorListStyle">
              <div class="daysStyle">
                <div>
                  <div class="daysNumbersDivStyle">
                    <div class="daysNumbersStyles">1</div>
                      <div class="daysNumbersStyles">2</div>
                        <div class="daysNumbersStyles">3</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:36:54.910

进入框架后试试这个：

```
driver.findElement(By.xpath("//div[text()='3']").click(); 
```

编辑：

对于 To 选择器：

```
driver.findElement(By.xpath("//*[@id='NewsSearchDateToInput_selector_monthSelector']//div[text()='3']").click(); 
```

对于从选择器：

```
driver.findElement(By.xpath("//*[@id='NewsSearchDateFromInput_selector_monthSelector']//div[text()='3']").click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:37:04.497

有帮助吗？//div[@class='daysNumbersStyles'][3]

# assembly - 为什么会出现分段错误？

> ID：16017245
> 
> 赞同：0
> 
> 时间：2013-04-15T14:04:19.733
> 
> 标签：assembly, x86-64, gnu-assembler

我编译代码

> gcc -g3 hello3.s -o 你好

```
.data

ssttrr:
  .string "%d\n"

.text
.globl main

main:

  mov $213, %rdx
  push %rdx
  push $ssttrr
  call printf
  add  $8, %rsp

mov  $60, %rax
xor  %rdi, %rdi
syscall 
```

我理解错误，但我不知道如何修复它。我什至不知道什么时候出错。cpy：intel-64 操作系统：debian

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:52:01.907

x86_64 的默认调用约定已经改变，它现在不仅使用堆栈，还使用寄存器来传递参数：

> ## 通过
> 
> 一旦参数被分类，寄存器被分配（按从左到右的顺序）用于传递，如下所示：
> 
> 1.  如果类是 MEMORY，则在堆栈上传递参数。
> 2.  如果类是整数，则使用序列 %rdi、%rsi、%rdx、%rcx、%r8 和 %r9 的下一个可用寄存器^*
> 3.  如果类是 SSE，则使用下一个可用的 SSE 寄存器，寄存器按从 %xmm0 到 %xmm7 的顺序获取。
> 
> ...
> 
> [*请注意，%r11 既不需要保留，也不需要用于传递参数。使该寄存器可用作临时寄存器意味着 PLT 中的代码在计算控制需要转移到的地址时不需要溢出任何寄存器。%raxis 用于指示传递给需要可变数量参数的函数的 SSE 参数的数量。%r10 用于传递函数的静态链指针。]

您可能希望分别在 %rdi 和 %rsi 寄存器中传递字符串和整数值，而不是将它们直接推入堆栈：

```
mov $213, %esi ;%d is not a 64-bit integer
mov $ssttrr, %rdi
mov $0, %rax ;no sse registers as arguments
call printf 
```

# css - CSS - Superfish，如何浮动第 4 级下拉菜单

> ID：16017247
> 
> 赞同：1
> 
> 时间：2013-04-15T14:04:26.333
> 
> 标签：css, superfish

**演示：http:** [//jsfiddle.net/wTNxH/](http://jsfiddle.net/wTNxH/)

**问题：**尝试将鼠标悬停在下一个菜单项上：菜单项 1 -> >菜单项666 -> 菜单项 您会注意到下一个下拉菜单没有像应有的那样向左浮动，而是显示在“菜单项”下方. 我相信问题出在某个地方：

```
.sf-navbar ul ul {
    left: 0;
    top: 100%;
} 
```

**问题：**如何将其浮动到“菜单项”旁边？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:15:29.627

尝试添加这个：

```
.sf-navbar ul ul ul {
    left: 100%;
    top: 0;
} 
```

# android - 无法将日期从 UTC 转换为另一个时区

> ID：16017249
> 
> 赞同：-2
> 
> 时间：2013-04-15T14:04:29.407
> 
> 标签：android, date, timezone, simpledateformat

我正在尝试将 UTC 日期/时间字符串转换为另一个时区。它仅显示 UTC 时区的日期/时间。

下面的代码：

```
 apiDate = "2013-04-16T16:05:50Z";
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss'Z'");
        Date date = dateFormat.parse(apiDate);

        Calendar calendar = Calendar.getInstance();
        TimeZone timeZone = calendar.getTimeZone();

        SimpleDateFormat newDateFormat = new SimpleDateFormat("hh:mm aa, MMMM dd, yyyy");
        newDateFormat.setTimeZone(timeZone);
        String newDateString = newDateFormat.format(date); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:07:28.647

您应该将“解析”设置`SimpleDateFormat`为 UTC。否则，它实际上会在解析时假设您的默认时区：

```
TimeZone utc = TimeZone.getTimeZone("Etc/UTC");
dateFormat.setTimeZone(utc); 
```

您也不需要构建日历来获取系统默认时区 - 只需使用：

```
TimeZone defaultZone = TimeZone.getDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T10:18:34.463

```
import java.util.Date;
import java.util.TimeZone;
import java.text.SimpleDateFormat;

public class Test {

    public static final SimpleDateFormat fDateTime = new SimpleDateFormat(
            "yyyy-MM-dd'T'HH:mm:ss");

    public static void main(String[] args) {

        String output = getFormattedDate("2016-03-1611T23:27:58+05:30");
        System.out.println(output);

    }

    public static String getFormattedDate(String inputDate) {

        try {
            Date dateAfterParsing = fDateTime.parse(inputDate);

            fDateTime.setTimeZone(TimeZone.getTimeZone("timeZone"));

            return fDateTime.format(dateAfterParsing);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

# objective-c - 如何避免应用程序在同步请求中崩溃

> ID：16017250
> 
> 赞同：1
> 
> 时间：2013-04-15T14:04:30.023
> 
> 标签：objective-c, httpurlconnection

我正在使用 JSONKit 将一些 JSON 数据发布到服务器。

在发布数据之前，我正在检查互联网连接。

但是，如果在发送请求后互联网连接丢失，则在此行之后：

```
NSData *receivedData = [NSURLConnection sendSynchronousRequest:request
                                             returningResponse:&response
                                                         error:&error]; 
```

我的应用程序崩溃。

我不想在这里使用异步方法。

有没有什么特别的方法可以让我在这种情况下显示警报而不是让我的应用程序崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:57:19.623

我知道了。如果没有互联网连接，则响应变量将为 nil。我可以检查`if (response == nil)`并在此处发出警报。

# c - 在一个头文件中定义结构并在另一个头文件中使用它时出现结构错误

> ID：16017252
> 
> 赞同：0
> 
> 时间：2013-04-15T14:04:32.457
> 
> 标签：c

我有 4 个文件 = pic.h、main.c、framehandle.c 和 framehandle.h

pic.h 和 framehandle.h 都包含在我的主目录中：

```
#include "pic.h"
#include "framehandling.h" 
```

pic.h 具有以下结构定义。

```
struct f
{
    unsigned sleep : 1;
    unsigned push  : 1;
    unsigned rx    : 1;
    unsigned tx    : 1;
    unsigned validPacket : 1;
}; 
```

我在我的 main.c 文件中使用

```
struct f flag; 
```

当我尝试在 framehandle.c 中使用它时，我得到一个我理解的未声明的错误。

为了解决这个问题，我在 framehandle.h 中添加了以下内容：

```
extern struct f flag; 
```

但是编译器仍然抱怨没有在 framehandle.c 中声明标志

我究竟做错了什么？不会 extern struct f 标志；应该告诉编译器在其他地方寻找声明？不会把它放在主题标题中是正确的地方吗？

- 编辑 -

我正在添加我的包含文件的序列和我的变量声明

```
#include "pic.h"
#include "framehandling.h"

struct f flag;

void main(void)
{ } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:07:07.577

这取决于您是否`struct f flag;`在 main.c 中声明为全局或本地。如果在函数内部声明它，则必须将声明移到函数外部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:58:06.453

问题的解决方案是 extern struct f flag 应该在 pic.h 中。在某种程度上，把它放在声明之后是有道理的。我还要感谢大家的意见。

# json - 在春天调用rest api

> ID：16017258
> 
> 赞同：0
> 
> 时间：2013-04-15T14:04:47.550
> 
> 标签：json, spring, rest

我在弹簧控制器中有休息方法，如下所示：

```
@RequestMapping(value="/register/{userName}" ,method=RequestMethod.GET)
@ResponseBody
public String getUserName(HttpServletRequest request,@PathVariable String userName ){
    System.out.println("User Name : "+userName);
    return "available";

} 
```

在 jquery 中，我编写了 ajax 调用，例如：

```
$(document).ready(function(){

        $('#userName').blur(function(){
            var methodURL = "http://localhost:8085/ums/register/"+$('#userName').val();

            $.ajax({
                type : "get",
                URL : methodURL,
                data : $('#userName').val(),
                success : function(data){
                    alert(data);
                    $('#available').show();
                    }
                })
            });
}); 
```

在 web.xml 我有：

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping> 
```

在 spring-servlet.xml 我有如下视图解析器：

```
<context:component-scan base-package="com.users.controller" />
    <context:annotation-config />
        <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
<property name="order" value="1"/>
<property name="mediaTypes">
<map>
<entry key="json" value="application/json" />
<entry key="xml" value="text/xml" />
<entry key="htm" value="text/html" />
</map>
</property>
<property name="ignoreAcceptHeader" value="true" />
<!-- <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />-->
<property name="defaultContentType" value="text/html" />
</bean>
<bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="order" value="2" />
        <property name="prefix">
            <value>/WEB-INF/jsp/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean> 
```

当我在服务器中运行它时，它不会进入控制器。请让我知道此代码的问题。

请任何人对此提供帮助。

问候， 施鲁蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:07:41.423

由于您的方法定义中有 @RequestMapping(value="register/{userName}" ，因此您的 jquery 调用必须遵循相同的语法。

```
var methodURL = "http://localhost:8085/users/register/"+$('#userName').val()+".html"; 
```

但是您的 RequestMapping 值也有问题，它应该以 / 开头

```
@RequestMapping(value="/register/{userName}" 
```

我也怀疑你最后需要“.html”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:59:26.547

将此行添加到您的 spring-servlet.xml。它将启用 Web MVC 特定的注释，例如`@Controller`和`@RequestMapping`

```
<mvc:annotation-driven /> 
```

## 带注释的控制器示例

假设带有上下文的 url 是`http://localhost:8080/webapp`并且您想要一个像 url 这样的 api 调用`/users/register/johnDoe`。（johnDoe 是用户名）

您的控制器类将如下所示。

```
@Controller
@RequestMapping(value="/users")
class UserController {

@ResponseBody
@RequestMapping(value="/register/{username}", method=RequestMethod.GET)
    public String registerUser(@PathVariable String username) {
        return username;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T19:56:55.410

请找到我在 Spring Framework 中调用 REST Web 服务的解决方案。

```
 /**
     * REST API Implementation Using REST Controller
     * */
    @RestController
    public class RestReqCntrl {

        @Autowired
        private UserService userService;    

        @Autowired
        private PayrollService payrollService;  

        //-------------------Create a User--------------------------------------------------------

        @RequestMapping(value = "/registerUser", method = RequestMethod.POST)
        public ResponseEntity<User> registerUser(@RequestBody User user,    UriComponentsBuilder ucBuilder) throws Exception {
            System.out.println("Creating User " + user.getFirstName());

            boolean flag = userService.registerUser(user);

             if (flag)
             {
                 user.setStatusCode(1);
                 user.setStatusDesc("PASS");
             }else{
                 user.setStatusCode(0);
                 user.setStatusDesc("FAIL");

             }

            HttpHeaders headers = new HttpHeaders();
            headers.setLocation(ucBuilder.path("/registerUser").buildAndExpand(user.getId()).toUri());
            return new ResponseEntity<User>(user,headers, HttpStatus.CREATED);
        }   

        //-------------------Authenticating the User--------------------------------------------------------

        @RequestMapping(value = "/authuser", method = RequestMethod.POST)
        public ResponseEntity<User> authuser(@RequestBody User user,UriComponentsBuilder ucBuilder) throws Exception {
            System.out.println("Creating User " + user.getFirstName());

            boolean flag = userService.authUser(user);

             if (flag)
             {
                 user.setStatusCode(1);
                 user.setStatusDesc("PASS");
             }else{
                 user.setStatusCode(0);
                 user.setStatusDesc("FAIL");

             }

            HttpHeaders headers = new HttpHeaders();
            headers.setLocation(ucBuilder.path("/authuser").buildAndExpand(user.getFirstName()).toUri());
            return new ResponseEntity<User>(user,headers, HttpStatus.ACCEPTED);
        }   

        //-------------------Create a Company--------------------------------------------------------
        @RequestMapping(value = "/registerCompany", method = RequestMethod.POST)
        public ResponseEntity<String> registerCompany(@RequestBody ComypanyDTO comypanyDTO, UriComponentsBuilder ucBuilder) throws Exception {
            System.out.println("Creating comypanyDTO " + comypanyDTO.getCmpName());
            String result ="";
            boolean flag = payrollService.registerCompany(comypanyDTO);

             if (flag)
             {
                 result="Pass";
             }else{
                 result="Fail";

             }

            HttpHeaders headers = new HttpHeaders();
            headers.setLocation(ucBuilder.path("/registerCompany").buildAndExpand(result).toUri());
            return new ResponseEntity<String>(result,headers, HttpStatus.ACCEPTED);
        }   

        //-------------------Create a Employee--------------------------------------------------------
        @RequestMapping(value = "/registerEmployee", method = RequestMethod.POST)
        public ResponseEntity<String> registerEmployee(@RequestBody EmployeeDTO employeeDTO, UriComponentsBuilder ucBuilder) throws Exception {
            System.out.println("Creating registerCompany " + employeeDTO.getEmpCode());
            String result ="";
            boolean flag = payrollService.registerEmpbyComp(employeeDTO);

             if (flag)
             {
                 result="Pass";
             }else{
                 result="Fail";

             }

            HttpHeaders headers = new HttpHeaders();
            headers.setLocation(ucBuilder.path("/registerCompany").buildAndExpand(result).toUri());
            return new ResponseEntity<String>(result,headers, HttpStatus.ACCEPTED);
        }   

        //-------------------Get Company Deatils--------------------------------------------------------
        @RequestMapping(value = "/getCompanies", method = RequestMethod.GET)
        public ResponseEntity<List<ComypanyDTO> > getCompanies(UriComponentsBuilder ucBuilder) throws Exception {
            System.out.println("getCompanies getCompanies ");
            List<ComypanyDTO> comypanyDTOs =null;
            comypanyDTOs = payrollService.getCompanies();
            //Setting the Respective Employees
            for(ComypanyDTO dto :comypanyDTOs){

                dto.setEmployeeDTOs(payrollService.getEmployes(dto.getCompanyId()));
            }

            HttpHeaders headers = new HttpHeaders();
            headers.setLocation(ucBuilder.path("/registerCompany").buildAndExpand("LISt").toUri());
            return new ResponseEntity<List<ComypanyDTO>>(comypanyDTOs,headers, HttpStatus.ACCEPTED);
        }   
    }

import java.io.Serializable;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.Transient;

@Entity
@Table(name="USER_TABLE")
public class User implements Serializable {

    @Id @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;
    private String firstName;
    private String lastName;
    private String email;
    private String userId;
    private String password;
    private String userType;
    private String address;
    @Transient
    private int statusCode;
    @Transient
    private String statusDesc;

    public User(){

    }

    public User(String firstName, String lastName, String email, String userId, String password, String userType,
            String address) {
        super();
        this.firstName = firstName;
        this.lastName = lastName;
        this.email = email;
        this.userId = userId;
        this.password = password;
        this.userType = userType;
        this.address = address;
    }

    public int getId() {
        return id;
    }

     public void setId(int id) {
        this.id = id;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    /**
     * @return the userType
     */
    public String getUserType() {
        return userType;
    }

    /**
     * @param userType the userType to set
     */
    public void setUserType(String userType) {
        this.userType = userType;
    }

    /**
     * @return the address
     */
    public String getAddress() {
        return address;
    }

    /**
     * @param address the address to set
     */
    public void setAddress(String address) {
        this.address = address;
    }

    /**
     * @return the statusCode
     */
    public int getStatusCode() {
        return statusCode;
    }

    /**
     * @param statusCode the statusCode to set
     */
    public void setStatusCode(int statusCode) {
        this.statusCode = statusCode;
    }

    /**
     * @return the statusDesc
     */
    public String getStatusDesc() {
        return statusDesc;
    }

    /**
     * @param statusDesc the statusDesc to set
     */
    public void setStatusDesc(String statusDesc) {
        this.statusDesc = statusDesc;
    }        
} 
```

# c++ - ISO C++ 禁止私有 const unsigned long 的初始化？

> ID：16017262
> 
> 赞同：0
> 
> 时间：2013-04-15T14:04:53.920
> 
> 标签：c++, codepad

我正在使用 codepad.org

```
class a {
    private:
        const unsigned long b = 100;
}; 
```

> 第 3 行：错误：ISO C++ 禁止初始化成员“b”
> 
> 编译因 -Wfatal-errors 而终止。

抱歉，如果我遗漏了一些明显的东西，但可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:06:41.950

在 C++11 之前，只能在类定义中初始化一个静态 const 数据成员：

```
static const unsigned long b = 100; 
```

无论如何，这通常是您想要的。`a`让所有的实例都有这个常量值在它们之间重复并没有多大意义。

如果启用 C++11 支持，[您的代码将编译](http://ideone.com/8hBBnA).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:06:16.567

只有 C++03 中的整数类型才允许进行类内初始化`static` `const`，而您的变量不是`static`.

要么制作它`static`（在这种情况下，你应该 - 请注意，你还必须在这种情况下定义它），或者使用 C++11 编译器。

# jquery - bxSlider - 浏览器调整大小时隐藏（显示：无）滑块中断

> ID：16017272
> 
> 赞同：0
> 
> 时间：2013-04-15T14:05:02.157
> 
> 标签：jquery, browser, resize, bxslider

我在使用 bxSlider 时遇到问题，如果我调整浏览器的大小然后导航到另一个滑块（隐藏所有其他滑块并显示单击的滑块菜单（使用灰色导航栏）），所有隐藏的滑块然后在您尝试查看它们时崩溃.

仅供参考：最初我所有滑块都可见，因此它们都初始化/加载，然后一旦用户使用灰色菜单选择另一个滑块，我将隐藏所有其他滑块并显示他们想要的滑块。

请在此处查看示例：http: [//faithandsony.co.uk/SON799/](http://faithandsony.co.uk/SON799/)

所以过程是 1\. 加载页面 2\. 单击“应用程序” 3\. 调整浏览器大小 4\. 单击“具有相似功能的产品” - 此滑块现在应该与所有其他隐藏的滑块一起损坏。

谁能解释一下这个问题？为什么我的浏览器最轻微的调整大小都会破坏所有隐藏的，这对我来说似乎没有意义。我确定浏览器在调整大小时会做什么/触发，但我的 BxSlider 似乎受到了它的影响。我在 Chrome、Safari、Firefox 和 Opera 中发现了这个错误。

非常感谢。

ps 我确定这与我的标记有关，但我就是想不通。

编辑：

HTML：

```
<div class="wrap">
<div class="hub-bar-con">
    <div class="cat-nav">
            <span class="pointer"></span>
            <a href="javascript:;" class="active">Products with similar features</a>
            <a href="javascript:;">Applications</a>
            <a href="javascript:;">Case Studies</a>
            <a href="javascript:;">Technology</a>
    </div>
    <div class="slider-wrap-1 current">
        <div class="fade-l"></div>
        <div class="fade-r"></div>
        <div class="slider1">
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-16.jpg"><p>Cinematography & Super Ted!</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>HD/SD Camcorders Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-18.jpg"><p>Camera Systems  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Decks, Recorders Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-20.jpg"><p>Pro Media  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-16.jpg"><p>Sample One  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>Sample Two  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-18.jpg"><p>Sample Three  Lorem Ipsum</p></div></a>
        </div>
    </div>

    <div class="slider-wrap-2">
        <div class="fade-l"></div>
        <div class="fade-r"></div>
        <div class="slider2">
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-18.jpg"><p>Pro Media</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-16.jpg"><p>HD/SD Camcorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>Decks, Recorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-20.jpg"><p>Decks, Recorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Pro Media</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-16.jpg"><p>Sample One</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-18.jpg"><p>Sample Two</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Sample Three</p></div></a>
        </div>
    </div>

    <div class="slider-wrap-3">
        <div class="fade-l"></div>
        <div class="fade-r"></div>
        <div class="slider3">
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Pro Media</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>HD/SD Camcorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-16.jpg"><p>Decks, Recorders</p></div></a>
        </div>
    </div>

    <div class="slider-wrap-4">
        <div class="fade-l"></div>
        <div class="fade-r"></div>
        <div class="slider4">
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-20.jpg"><p>Pro Media</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>HD/SD Camcorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-16.jpg"><p>Decks, Recorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Decks, Recorders Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>Pro Media  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-20.jpg"><p>Sample One  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-18.jpg"><p>Sample Two  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Sample Three  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-20.jpg"><p>Pro Media</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>HD/SD Camcorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-16.jpg"><p>Decks, Recorders</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Decks, Recorders Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-17.jpg"><p>Pro Media  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-20.jpg"><p>Sample One  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-18.jpg"><p>Sample Two  Lorem Ipsum</p></div></a>
          <a href="javascript:;"><div class="slide"><img border="0" src="img/img-19.jpg"><p>Sample Three  Lorem Ipsum</p></div></a>
        </div>
    </div>

</div>

<!--<a class="hide">Hide 2</a>
<a class="show">Show 2</a>--> 
```

脚本：

```
$(window).load(function() {

//Grab the width of all .cat-nav a elements(including padding) 
//then half that value and store it in halfWidth[ ]
var halfWidth =[];
 $('.cat-nav a').each(function(index, element) {
halfWidth.push($(this).outerWidth(true) / 2);
});

//Use .position to find the left hand edge position of each .cat-nav a element
//then add half the width of each .cat-nav a element to find the centre(left:?px) of each
//of the .cat-nav a elements. Store them in an array for animating the pointer to
// - 7 value reduces location by half of the width of the pointer to make sure the pointer 
//sits centrally
var finalPositions = [];
$('.cat-nav a').each(function(index, element) {
    var positionNew = $(this).position();
    finalPositions.push((positionNew.left + halfWidth[index]) - 7);
});

$('.pointer').css('left',finalPositions[0]).show();

function checkPHeights(){
$('.slider1 .slide p').each(function(index, element) {
    if ($(this).height() > 22)
    {
        $(this).css('margin','-7px 0 10px 0');
    }
});

$('.slider2 .slide p').each(function(index, element) {
    if ($(this).height() > 22)
    {
        $(this).css('margin','-7px 0 10px 0');
    }
});

$('.slider3 .slide p').each(function(index, element) {
    if ($(this).height() > 22)
    {
        $(this).css('margin','-7px 0 10px 0');

     }
});

$('.slider4 .slide p').each(function(index, element) {
    if ($(this).height() > 22)
    {
        $(this).css('margin','-7px 0 10px 0');
    }
});
}

checkPHeights();

//animate pointer to relevant category element

$('.cat-nav a').click(function() {

    $('.cat-nav a').removeClass('active');
    $(this).addClass('active');
    var indx = $(this).index(); 
    if (indx == 1) {/*hideSlider(2);*/ $('.slider-wrap-2,.slider-wrap-3,.slider-wrap-4').fadeOut(300).removeClass('current'); $('.slider-wrap-1').fadeIn(300).addClass('current');}
    if (indx == 2) {/*hideSlider(1);*/ $('.slider-wrap-1,.slider-wrap-3,.slider-wrap-4').fadeOut(300).removeClass('current'); $('.slider-wrap-2').fadeIn(300).addClass('current');}
    if (indx == 3) {/*hideSlider(1);*/ $('.slider-wrap-1,.slider-wrap-2,.slider-wrap-4').fadeOut(300).removeClass('current'); $('.slider-wrap-3').fadeIn(300).addClass('current');}
    if (indx == 4) {/*hideSlider(1);*/ $('.slider-wrap-1,.slider-wrap-2,.slider-wrap-3').fadeOut(300).removeClass('current'); $('.slider-wrap-4').fadeIn(300).addClass('current');}

    var catIndex = ($(this).index() - 1);
    $('.pointer').animate({left:finalPositions[catIndex]},800);
});

});

$(document).ready(function() {

var slider1 = $('.slider1').bxSlider({
    slideWidth: 175,
    useCSS: false,
    speed: 1500,
    onSlideBefore: function(){
            $('.fade-l, .fade-r ').show();
        },
    onSlideAfter: function(){
        $('.fade-l, .fade-r ').fadeOut('fast');
    },
    minSlides: 1,
    maxSlides: 5,
    infiniteLoop: false,
    slideMargin: 12
      });

var slider2 = $('.slider2').bxSlider({
    slideWidth: 175,
    useCSS: false,
    speed: 1500,
    onSlideBefore: function(){
            $('.fade-l, .fade-r ').show();
        },
    onSlideAfter: function(){
        $('.fade-l, .fade-r ').fadeOut('fast');
    },
    minSlides: 1,
    maxSlides: 5,
infiniteLoop: false,
    slideMargin: 12
 });

var slider3 = $('.slider3').bxSlider({
    slideWidth: 175,
    useCSS: false,
    speed: 1500,
    onSlideBefore: function(){
            $('.fade-l, .fade-r ').show();
        },
    onSlideAfter: function(){
        $('.fade-l, .fade-r ').fadeOut('fast');
    },
    minSlides: 1,
    maxSlides: 5,
infiniteLoop: false,
    slideMargin: 12
 });

var slider4 = $('.slider4').bxSlider({
    slideWidth: 175,
    useCSS: false,
    speed: 1500,
    onSlideBefore: function(){
            $('.fade-l, .fade-r ').show();
        },
    onSlideAfter: function(){
        $('.fade-l, .fade-r ').fadeOut('fast');
    },
    minSlides: 1,
    maxSlides: 5,
infiniteLoop: false,
    slideMargin: 12
});

$('.bx-pager.bx-default-pager').each(function(index, element) {
    var sliderWrapIndex = index + 1;
    var pagerLength = $('.slider-wrap-' + sliderWrapIndex + ' .bx-pager.bx-default-pager > div').length;
    if ( pagerLength < 2 ) {
        $('.slider-wrap-' + sliderWrapIndex + ' .bx-pager.bx-default-pager').hide();
    }

});

$('.hide').click(function(e) {
    $('.slider-wrap-2').fadeOut(1000);
});

$('.show').click(function(e) {
    $('.slider-wrap-2').fadeIn(1000);
}); 
```

});

# iphone - IOS。将子视图添加到主从应用程序

> ID：16017274
> 
> 赞同：1
> 
> 时间：2013-04-15T14:05:06.807
> 
> 标签：iphone, ios, master-detail

我有一个带有新闻的主从应用程序。有用。我使用的详细控制器`UIWebView`。我用**xib创建了****评论类**，并试图将它添加到我的详细视图中。评论是。之后我只能看到评论，而不是详细信息。**`UITableViewController`**

 **我试图滚动我的**webview**并且没有文本。但是在**detailviewController**中，我`NSLog`为我的文本做了并看到了它。如果我设置`newsTextHeight`为**480** ，我会看到一个空视图。

**我究竟做错了什么？**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGFloat newsTextHeight = 250;
    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    CommentsViewController *commentController  = [[CommentsViewController alloc] init];

    NewsItem *newsItem = [news objectAtIndex:indexPath.row];

    detailViewController.description = newsItem.description;
    detailViewController.title = newsItem.date;
    commentController.news_id = newsItem.news_id;
    detailViewController.news_id = [newsItem.news_id intValue];
    int views = [newsItem.viewsCnt intValue];
    views++;
    NSString *strFromInt = [NSString stringWithFormat:@"%d",views];
    newsItem.viewsCnt = strFromInt;
    [self.tableView reloadData];
    //[self.navigationController presentedViewController];

    [self.navigationController pushViewController:detailViewController animated:YES];
    detailViewController.navigationController.toolbarHidden = NO;
    [detailViewController addChildViewController:commentController];
    [commentController didMoveToParentViewController:detailViewController];

    [detailViewController.view addSubview:commentController.view];

    detailViewController.view.frame = CGRectMake(0, 0, detailViewController.view.bounds.size.width, newsTextHeight);

    commentController.tableView.contentInset = UIEdgeInsetsMake(detailViewController.view.frame.size.height, 0, 0, 0);

    [commentController release];
    [detailViewController release];

} 
```

结果：[http ://s18.postimg.org/5cv8ftbbd/detail.png](http://s18.postimg.org/5cv8ftbbd/detail.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:37:25.240

Kiattisak 的意思是，问题可能在于您的视图`detailViewController.view.frame`正在使用自动布局。因此将无法以编程方式调整大小。（这是如果您不使用情节提要）

在 InterfaceBuilder 中，突出显示您的视图：

![在此处输入图像描述](https://i.stack.imgur.com/FAorF.png)

并取消`Use Autolayout`选中属性检查器的第一个选项卡中的框。 ![在此处输入图像描述](https://i.stack.imgur.com/QfvaM.png)

希望能帮助到你。**

# sql - 外键的 DELETE CASCADE 选项会删除孙子吗？

> ID：16017278
> 
> 赞同：1
> 
> 时间：2013-04-15T14:05:17.093
> 
> 标签：sql, entity-framework, entity-framework-5, fluent-interface

SQL 级联删除相当新。我想知道当涉及到孩子时，级联删除是如何工作的。所以说我有一个桌子情况，比如：

> **ParentTable** ==Cascade==> **ChildTable** ==NoCascade==> **GrandChildTable**

孙子也会被删吗？我是否需要在子表中指定关闭级联删除？我正在使用 Fluent API 将父 ParentTable 的级联删除设置为带有 WillCascadeOnDelete(true) 的 ChildTable，我应该在 ChildTable 上设置 WillCascadeOnDelete(false)，这是必要的吗？我无法删除 GrandChildTable 的原因是因为它是域表。

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:10:56.477

> 孙子也会被删吗？

不，如果您的数据库系统没有完全错误，或者说没有完全实现（这与实体框架没有太大关系），则不会。如果可能的话，您可以很容易地破坏数据完整性，违背这些外键约束的意图。

如果您希望在删除子项时删除孙子项，则需要对从 ChildTable 到 GrandChildTable 的 FK 关系附加一个 DELETE CASCADE 约束。对子级的 DELETE 操作是来自该子级的显式 DELETE 还是来自父级的级联删除并不重要。

# python - 在 Python 3.3 中使用 pySerial

> ID：16017288
> 
> 赞同：8
> 
> 时间：2013-04-15T14:05:27.530
> 
> 标签：python, pyserial, python-3.3

我见过许多使用串行端口的代码示例，人们说他们也是工作代码。问题是，当我尝试代码时它不起作用。

```
import serial

ser = serial.Serial(
    port=0,
    baudrate=9600
    # parity=serial.PARITY_ODD,
    # stopbits=serial.STOPBITS_TWO,
    # bytesize=serial.SEVENBITS
)

ser.open()
ser.isOpen()

print(ser.write(0xAA)) 
```

它给我的错误是：“SerialException：端口已打开”。是我使用 python3.3 的问题还是我需要安装一些额外的东西？有没有其他方法可以将 COM 端口与 Python3.3 一起使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T07:59:51.703

所以这个故事的寓意是......端口在初始化时打开。`ser.open()`失败，因为串行端口已被`ser = serial.Serial(.....)`. 这是一回事。

上面的另一个问题是`ser.write(0xAA)`- 我预计这意味着“发送一个字节 0xAA”，它实际上所做的是发送 170(0xAA) 个零。在 function`write`中，我看到了以下内容： `data = bytes(data)`其中 data 是您传递的参数。似乎函数 bytes() 不接受字符串作为参数，因此不能直接使用: 发送字符串`serial.write()`，但`ser.write(bytearray(TheString,'ascii'))`可以完成工作。

虽然我正在考虑添加：

```
if(type(data) == type('String')):
    data = bytearray(data,'ascii') 
```

中`ser.write()`，尽管这会使我的代码无法在其他 PC 上运行。

# visual-c++ - 使用 winsocks 的库：未解析的外部符号

> ID：16017289
> 
> 赞同：0
> 
> 时间：2013-04-15T14:05:32.427
> 
> 标签：visual-c++, static-libraries, winsock

我创建了一个使用 winsocks 的库，我使用以下命令对其进行编译：

```
cl /c myLib.c /link ws2_32.lib
lib myLib.obj 
```

从而获得myLib.lib，一切正常。

现在，我编写了一个测试程序 test.c，我在其中执行以下操作：

```
#include "myLib.h"

//... i use some functions // 
```

我用它编译

```
cl test.c /link myLib.lib 
```

但我得到：

> myLib.lib(myLib.obj)：错误 LNK2001：无法解析的外部符号_imp *_connec* t@12 myLib.lib(myLib.obj)：错误 LNK2001：无法解析的外部符号_imp *_htons* @4 myLib.lib(myLib.obj)：错误 LNK2001：未解析的外部符号_imp *_inet_a* ddr@4 myLib.lib(myLib.obj)：错误 LNK2001：未解析的外部符号*_imp* _socket @12 myLib.lib(myLib.obj)：错误 LNK2001：未解析的外部符号_imp *_WSASta* rtup@8 myLib.lib(myLib.obj)：错误 LNK2001：无法解析的外部符号_imp *_WSACle* anup@0 logbus.lib(logbus.obj)：错误 LNK2001：无法解析的外部符号_imp *_closes* ocket@4 test.exe：致命错误 LNK1120：7 个未解决的外部问题

**编辑：好的，如果我编译添加到 ws2_32.lib 的链接也可以。无论如何我不喜欢它：我在创建我的库时已经链接了这个库，所以我只想链接到 myLib.lib ......这可能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:14:13.230

我解决了使用#pragma 指令将win2_32 包含到myLib.lib 中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:00:18.610

您可以尝试[此答案](https://stackoverflow.com/a/2157735/218597)中的建议，该建议基本上包含`ws2_32.lib`在您自己的库中：

```
cl /c myLib.c /link ws2_32.lib
lib /out:myLib.lib myLib.obj ws2_32.lib 
```

*从理论上讲*，这将构成一个复合库。但是，问题是如果您分发`myLib.lib`- 我不确定它是否合法，因为您将包含受版权保护的代码。

顺便说一句，但我将它包括在内，因为它非常有趣且有点相关，Raymond Chen 最近写了一系列关于[Classical Linker Model](http://blogs.msdn.com/b/oldnewthing/archive/tags/linker/)的文章。

# reporting - 从表格中删除单元格

> ID：16017292
> 
> 赞同：0
> 
> 时间：2013-04-15T14:05:44.337
> 
> 标签：reporting, openerp, rml

我使用 OpenOffice Write 创建了自己的销售/报价报告 caled sale_order.sxw。从那里我生成 sale_order.rml 文件。

我有两个 OpenERP 安装，一个在 Windows 上，一个在 Ubuntu 上。

在 OOWriter 中，我有一个 4 列的表格，它打印出每个订单行以及数量、“打印此”文本和小计。

仅当满足特定条件时才打印第三列，基于包含“final”的价目表名称：

所以我期望：

如果“最终”不在价目表内

产品 A|2|打印 |20

如果“最终”位于价目表内：

产品 A|2|20

为了解决这个问题，我有以下代码：

```
 (so.partner_id.property_product_pricelist.name.find('final') > 0) and "Print this" or removeParentNode('td') 
```

**它在 Windows 安装中运行良好。**

但是当我从 Ubuntu 安装运行相同的文件时，我收到一条 AssertionError 消息，并且我无法打印出我的销售/报价 pdf 报告。

我专门用 removeParentNode('td') 做了一些测试，错误似乎来自那里，但我不知道为什么它在 Windows 下工作！

这是来自 Ubuntu 服务器的日志：

```
2013-04-15 13:09:07,822 1621 ERROR ? openerp.service.web_services: Exception: 
Traceback (most recent call last):
  File "/home/download/openerp-6.1-20121008-233119/openerp/service/web_services.py", line 727, in go
(result, format) = obj.create(cr, uid, ids, datas, context)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/report_sxw.py", line 442, in create
fnct_ret = fnct(cr, uid, ids, data, report_xml, context)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/report_sxw.py", line 511, in create_source_pdf
return self.create_single_pdf(cr, uid, ids, data, report_xml, context)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/report_sxw.py", line 533, in create_single_pdf
pdf = create_doc(etree.tostring(processed_rml),rml_parser.localcontext,logo,title.encode('utf8'))
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/interface.py", line 207, in create_pdf
obj.render()
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/render.py", line 59, in render
self._result = self._render()
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml.py", line 41, in _render
return rml2pdf.parseNode(self.rml, self.localcontext, images=self.bin_datas, path=self.path,title=self.title)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 1007, in parseNode
r.render(fp)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 314, in render
pt_obj.render(el)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 983, in render
fis += r.render(node_story)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 877, in render
return process_story(node_story)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 870, in process_story
flow = self._flowable(node)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 834, in _flowable
return self.render(node)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 877, in render
return process_story(node_story)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 870, in process_story
flow = self._flowable(node)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 793, in _flowable
return  self._table(node)
  File "/home/download/openerp-6.1-20121008-233119/openerp/report/render/rml2pdf/trml2pdf.py", line 697, in _table
    assert length == len(node.get('colWidths').split(','))
AssertionError
2013-04-15 13:09:07,951 1621 ERROR ? openerp.netsvc: 
(<type 'exceptions.AssertionError'>, AssertionError(), <traceback object at 0x7ff558e54b00>)
2013-04-15 13:09:07,953 1621 INFO ? werkzeug: 192.168.2.4 - - [15/Apr/2013 13:09:07] "POST /web/report HTTP/1.1" 500 - 
```

我对服务器上使用的 trml2pdf.py 文件和 windows 使用的文件进行了比较，它们是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T06:42:17.670

这是因为原始列不匹配。

# haskell - Haskell 中的单例类型

> ID：16017294
> 
> 赞同：31
> 
> 时间：2013-04-15T14:05:46.483
> 
> 标签：haskell, dependent-type, type-theory, singleton-type

作为对各种依赖类型形式化技术进行调查的一部分，我遇到了一篇论文，提倡使用单例类型（有一个居民的类型）作为支持依赖类型编程的一种方式。

根据这个来源，在 Haskell 中，运行时值和编译时类型之间存在分离，当使用单例类型时，由于引入的类型/值同构，它们可能会变得模糊。

我的问题是：在这方面，单例类型与类型类或引用/具体化结构有何不同？

对于使用单例类型的类型理论重要性/优势以及它们在多大程度上可以模拟一般依赖类型，我还特别感谢一些直观的解释。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-15T15:22:27.630

# windows-phone-7 - Windows Phone：文本块中的文本未完全显示

> ID：16017295
> 
> 赞同：1
> 
> 时间：2013-04-15T14:05:49.003
> 
> 标签：windows-phone-7, xaml, textblock

**问题解决了！无论如何，我只是想通了问题。我对值做了一个 .Trim() ，令人惊讶的是它们可以被包装。感谢并为所有的麻烦感到抱歉。=)**

我正在对网格中的文本块进行一些数据绑定。

但是，有些文本没有完全显示。 ![错误](https://i.imgur.com/fYZMSxM.png)

我尝试了文本换行并为我的文本块设置了最大宽度。但他们都没有工作。

**编辑：再次嗨。我注意到，当我通过以下代码手动更改文本块的文本时**

```
 txtDesc.Text = "This is a job for Stackers. If you like stacking, please contact me. 
```

**文本换行实际上有效。所以不知何故数据绑定结果文本不能换行？**

我的文本块的 XAML 代码。

```
 <TextBlock Name="Description"  Grid.Row="4" Text="{Binding Description}" FontSize="     {StaticResource PhoneFontSizeSmall}" Height="auto" Width="220" Margin="0,0,0,0" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Top" MaxWidth="220"></TextBlock> 
```

这里有什么帮助吗？

```
<!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot">
        <Grid.Background>
            <ImageBrush Stretch="Fill" ImageSource="images/SmallLogoNTitle.png"/>
        </Grid.Background>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <toolkit:ListPicker ItemsSource="{Binding}" Name="lpkTypeOfService" Margin="0,116,12,0" Height="65" VerticalAlignment="Top" HorizontalAlignment="Right" Width="210" SelectionChanged="lpkTypeOfService_SelectionChanged">

            </toolkit:ListPicker>
            <ListBox Margin="8,210,8,26" Name="listBox1" Width="450">
            <ListBox.ItemTemplate>
                    <DataTemplate>

                        <Grid ShowGridLines="True">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="50"/>
                                <RowDefinition Height="50"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="auto"/>
                                <RowDefinition Height="60"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="300"/>
                                <ColumnDefinition Width="150"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock HorizontalAlignment="Left" Grid.Row="0" Grid.Column="0" Name="Date" Text="{Binding Date}" FontSize="{StaticResource PhoneFontSizeLarge}"></TextBlock>
                            <TextBlock HorizontalAlignment= "Left" Grid.Row="1" Grid.Column="0" Name="Creator" Text="{Binding CreatorID}" FontSize="{StaticResource PhoneFontSizeLarge}"></TextBlock>
                            <TextBlock Name="Type" Grid.Row="2" Text="{Binding Type}" FontSize="{StaticResource PhoneFontSizeSmall}"></TextBlock>
                            <TextBlock Name="Amount" Grid.Row="3" Text="{Binding Amount}" FontSize="{StaticResource PhoneFontSizeSmall}"></TextBlock>
                            <TextBlock Name="Description"  Grid.Row="4" Text="{Binding Description}" FontSize="{StaticResource PhoneFontSizeSmall}" Height="auto" Width="220" Margin="0,0,0,0" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Top" MaxWidth="220"></TextBlock>
                            <Button Content="Apply" Height="70" Width="140" Name="btn1" Click="btn_Click" Grid.Row="5" Grid.Column="1"></Button>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                </ListBox>
            <TextBlock Height="65" HorizontalAlignment="Left" Margin="12,116,0,0" Name="textBlock1" Text="Find Service :" VerticalAlignment="Top" Width="216" FontSize="36" />
        </Grid>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:50:54.070

它来自糟糕/过于复杂的布局架构以及对象相互定位的方式。可能会为你尝试这样的事情`DataTemplate`

```
 <DataTemplate>

       <Grid ShowGridLines="True">
          <Grid.RowDefinitions>
             <RowDefinition Height="50"/>
             <RowDefinition Height="50"/>
             <RowDefinition Height="30"/>
             <RowDefinition Height="30"/>
             <RowDefinition Height="Auto"/>
             <RowDefinition Height="60"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
<!-- Don't worry, you already had your 450 Width set on the parent -->
             <ColumnDefinition Width="*"/>
             <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>

             <TextBlock Name="Date" Text="{Binding Date}" FontSize="{StaticResource PhoneFontSizeLarge}"/>
             <TextBlock Name="Creator" Grid.Row="1" Text="{Binding CreatorID}" FontSize="{StaticResource PhoneFontSizeLarge}"/>
             <TextBlock Name="Type" Grid.Row="2" Text="{Binding Type}" FontSize="{StaticResource PhoneFontSizeSmall}"/>
             <TextBlock Name="Amount" Grid.Row="3" Text="{Binding Amount}" FontSize="{StaticResource PhoneFontSizeSmall}"/>
             <TextBlock Name="Description" Grid.Row="4" Text="{Binding Description}" FontSize="{StaticResource PhoneFontSizeSmall}" TextWrapping="Wrap"/>
             <Button Name="btn1" Click="btn_Click" Grid.Row="5" Grid.Column="1" Content="Apply" Height="70" Width="140" Margin="5,0"/>

          </Grid>

    </DataTemplate> 
```

同样为了更清晰的 xaml，请记住`Margin="0"`,`Grid.Column="0"`等`HorizontalAlignment="Left"`是默认依赖属性，因此无需将它们设置为每个单独的对象。即使在您需要的情况下，您也可以将它们作为`Setter`s 应用到`TargetType`父对象中`Object.Resources`，并避免将它们设置为每个单独的对象。另一个提示是，不要依赖一堆模糊的随机边距等来创建你的布局。最好第一次就做对，而不是寻找一堆相互依赖的小“修复”之间的差异

我没有测试它，但应该可以正常工作，除非你有其他东西在推动东西。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:38:22.093

您可以在列表框控件中禁用水平滚动吗？

```
ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:43:27.833

使用`VerticalAlignment="Stretch"`而不是`VerticalAlignment="Top"`. 这样，文本块将拉伸到行的高度。

# ajax - 使用 API 忽略 AJAX 模板中的单词

> ID：16017299
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:06:03.197
> 
> 标签：ajax, api, word

我正在使用 api 创建测验。从应用程序 Loopcam 获取 gif 然后将循环标题放入 div #answer 的代码如下所示：

```
APP = {
  refresh: function(limit, interval) {
    APP.index(limit);
    setInterval(function () {APP.index(limit)}, interval)
  },
  index: function(limit) {
    var url = 'https://api.loopc.am/v1/loops/search?q=moviecharades'

    $.ajax({
      url: url,
      dataType: "json",
      success: function(data) {
        var data = data
          , html
          , templatedata
          , template = '{{#loops}}<div id="answer">{{title}}</div><div class="loop-tumbnail"><img src="{{file_url}}" {{loop_url}}/></div>{{/loops}}'
          , offset = Math.round(Math.random() * (data.length - 1))

       TITLE = data[0].title
          console.log(offset)

        if (data.length > 0) {
          data = data.slice(offset, offset + limit);

          templatedata = {loops: data}
          html = Mustache.to_html(template, templatedata)

          $('#loops').html(html)
        }
      }
    }) 
```

我需要的是从 div #answer 中删除的单词“#moviecharades”，它始终位于从 API 获取的标题中。简而言之：如果获取的标题是“#moviecharades big fish”，我希望它在#answer-div 中只显示“big fish”。

我试图将其作为#answer-div 的规则，例如：

```
$("#answer").text($("#answer").text().replace("#moviecharades", "")); 
```

但它不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:20:04.440

尝试这个：

```
var answerText = $("#answer").text();
$("#answer").text( answerText.replace("#moviecharades", "")); 
```

希望有帮助。

# php - 将多个绝对图像保存为一张

> ID：16017300
> 
> 赞同：0
> 
> 时间：2013-04-15T14:06:04.063
> 
> 标签：php, jquery

在我的网站上，我有一些可以拖动的图像

```
 draggable() 
```

因为它是可拖动的，所以图像是绝对的。

这些图像都在一个 div 800 x 400 px 中。

我想要做的是获取 div 中的所有图像并将其转换为 1 张图片。

因此，从彼此上方的示例 20 张图片（不同的 z 索引）中，我想制作 1 张图片。

我得到了一个用户创建图像的示例（这是拖动不同的图像）[http://ve.svenboogaart.nl/test/moodboards.php?id=46](http://ve.svenboogaart.nl/test/moodboards.php?id=46)图像始终在 800 x 400 px div 中。

它需要保存为图片，以便用户可以将其保存为图片！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:24:58.997

如果我理解正确：

1.  你有一个 800x400 的图像，包含 20 个精灵（20 x 160x100 图像）
2.  你有 20 个绝对定位的元素，它们是可拖动的
3.  您想在每个元素中显示图像

是这样吗？

如果是这样，您只需要 CSS 来偏移您的背景图像。例如：

### CSS

```
.big-image-container { position: relative; }
.big-image { background-image: url(path/to/your/image); background-repeat:no-repeat; }
.draggable-sprite { position:absolute; width: 160px; height: 100px; } 
```

### HTML

```
<div id="container" class="big-image-container">
</div> 
```

### JS

```
var spriteCountX = 5;
var spriteCountY = 4;
var container = $("#container");
var sprite, bgx, bgy;
for (var x=0; x<spriteCountX; x++) {
   for (var y=0; y<spriteCountY; y++) {
       sprite = $("<div>").addClass("big-image draggable-sprite")
          .appendTo(container);

       bgx = x * sprite.width();
       bgy = y * sprite.height();
       sprite.css("background-position", bgx + "px " + bgy + "px");
   }
} 
```

这样做只是抵消了每个可拖动元素内的大图像，因此它们似乎具有不同的图像作为背景。许多 JavaScript 库在他们的图标集上使用了这个技巧（例如，参见[Bootstrap](http://twitter.github.io/bootstrap/)和[jQuery UI](http://jqueryui.com/)。）

****更新****

要将可拖动图像转换为用户可以下载的大图，您需要收集每个可拖动元素的位置、大小和背景图像，并在服务器端构建它们。例如

### JS

```
function renderCanvas() {
    var imageInfo = [];
    $( <draggableElementsSelector> ).each(function(i, e) {
        imageInfo.push({
            position: $(e).position(),  // -> { top, left }
            dimension: { width: $(e).width(), height: $(e).height() },
            imageClass: $(e).attr("class")  // .. what you need to get the bg img
        });
    });

    $.post("url/to/script", { images: imageInfo })
       .done(function(response) { 

            // response.imageSrc should be a link to your image for download

       })
       .fail(function() { alert("Image creation failed"); });
} 
```

### PHP

```
$imageInfo = $_POST['images'];
$imgWidth = 1; // min, just in case, cannot be 0
$imgHeight = 1; // min, just in case, cannot be 0

// first pass to find the dest image size
foreach ($imageInfo as $img) {
    $imgWidth = max($imgWidth, $img->position->left + $img->dimension->width);
    $imgHeight = max($imgHeight, $img->position->top + $img->dimension->height);
}

$destImage = imagecreate($imgWidth, $imgHeight); // (x, y)

foreach ($imageInfo as $img) {
   $src = imagecreatefrompng( getImagePath($img->imageClass) );

   imagecopymerge($destImage, $src, 
       $img->position->left, $img->position->top,
       0, 0, $img->dimension->width, $img->dimension->height);
}

$imgFilename = generateImageFile( ... );  // whatever you need here

// Save the image to file.png 
imagepng($destImage, $imgFilename);

$imgLink = convertFileToUrl( $imgFilename );   // generate downloadable link

header('Content-type: application/json');
echo json_encode(array('imageSrc' => $imgLink));
exit();   // end here 
```

# .net - 创建 MSI 以安装带有注册表更改的 WPF

> ID：16017307
> 
> 赞同：0
> 
> 时间：2013-04-15T14:06:22.787
> 
> 标签：.net, wpf, visual-studio-2010, registry, windows-installer

我们在 Visual Studio 2010 Ultimate 中有一个 WPF 应用程序 (.NET 4.0)。它需要在安装过程中添加一些注册表项。您如何将此类代码添加到 MSI？如果你能给我们举个例子，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:16:26.507

使用[WiX](http://wixtoolset.org/)创建您的 MSI。您可以在 WiX 项目中创建注册表值：[http ://wix.sourceforge.net/manual-wix3/write_a_registry_entry.htm](http://wix.sourceforge.net/manual-wix3/write_a_registry_entry.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:18:03.643

使用 InstallShield 之类的安装程序包。它们都支持注册表项和值。有关可用软件包的更完整列表，请参阅[http://www.installsite.org/pages/en/msi/authoring.htm](http://www.installsite.org/pages/en/msi/authoring.htm)

# matlab - Matlab/Simulink 到工作区，到文件

> ID：16017310
> 
> 赞同：0
> 
> 时间：2013-04-15T14:06:28.017
> 
> 标签：matlab, simulation, simulink, sampling, simulate

我有一个带电压源和 4 个电器的电路 ![在此处输入图像描述](https://i.stack.imgur.com/ePzRe.png)

模拟时间为 0.1 秒。在电压源是一个电流测量之后，我测量实际电量，我需要计算 ele。消耗量（千瓦/小时）。

电量水平反映在 Timeseries 的工作空间或文件中。

这个模拟描​​述了一个带有一些电器的小房子模型。

我的问题是如何在准确的时间从范围数据中获取并写入文件（比如每 0.005 秒 - 0.010、0.015 atc。）？ ![在此处输入图像描述](https://i.stack.imgur.com/Xbfm0.png)

我只需要范围内的有效数据，如带箭头的图片（我认为它总是在相同的时间和相同的距离）。或者有没有其他方法可以让他们消费？

# linux - 通过 Cygwin 发送电子邮件

> ID：16017311
> 
> 赞同：2
> 
> 时间：2013-04-15T14:06:29.027
> 
> 标签：linux, shell, cygwin, sh, email-client

我写了一个 shell 脚本，我想通过它发送电子邮件。我正在通过 cygwin 在 Windows 上执行此脚本。我已经在我的机器上安装了**电子邮件**包。但是，我很难让它发挥作用。请让我知道通过 cygwin 命令提示符发送电子邮件的最简单方法是什么。

我的 ssmtp.conf 文件是：

```
mailhub=smtp.gmail.com:587
FromLineOverride=YES
rewriteDomain=gmail.com
root=aci.lfindba@gmail.com
UseTLS=YES
AuthUser=userid
AuthPass=password 
```

并且 email.conf 文件有：

```
SMTP_SERVER = 'smtp.gmail.com'
SMTP_PORT = '25'
MY_NAME  = 'ABC'
MY_EMAIL = 'emailaddress'
REPLY_TO = 'emailaddress'
USE_TLS = 'true'
ADDRESS_BOOK = '&/email.address.template'
SMTP_AUTH = 'LOGIN'
SMTP_AUTH_USER = 'userid'
SMTP_AUTH_PASS = 'password' 
```

我正在使用以下命令发送电子邮件：echo "mail body"|email -s "subject" recipient@gmail.com 但是，我收到以下错误： **电子邮件：致命：无法连接到服务器：smtp.gmail.com on端口：25：不允许操作**

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:36:35.293

我使用这个`msmtp`包，配置如下：

```
port 587
auth on
from srpen6@gmail.com
host smtp.gmail.com
tls on
tls_certcheck off
user srpen6@gmail.com 
```

[https://cygwin.com/cgi-bin2/package-grep.cgi?grep=msmtp&arch=x86_64](https://cygwin.com/cgi-bin2/package-grep.cgi?grep=msmtp&arch=x86_64)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T00:37:25.653

安装和配置`ssmtp`包。

`/bin/mail`使用以下内容创建：

```
#!/bin/sh
#
# copyright 2016 Gene Pavlovsky [http://www.razorscript.com]
#
# mail: mail-like wrapper script for sendmail

SENDMAIL=/usr/sbin/ssmtp

usage()
{
  {
    echo "Usage: $(basename $0) [-s "subject"] [-f from-addr] [to-addr]..."
    echo
    echo "Sends mail."
    echo
    echo "Options:"
    echo -e "  -s\tsubject (quote subjects containing spaces)"
    echo -e "  -f\tfrom address"
  } >&2
  exit 2
}

while test $# -gt 0; do
  case $1 in
    -s)
            shift
            test $# -eq 0 && usage
            subj=$1
    ;;
    -f)
            shift
            test $# -eq 0 && usage
            from=$1
    ;;
    -*)
      usage
    ;;
    *)
            rcpt+=( "$1" )
    ;;
  esac

  shift
  test "$end_options" = yes && break
done

test ${#rcpt} -eq 0 && usage

{
    test "$from" && echo From: $from
    test "$subj" && echo Subject: $subj
    echo
    exec /bin/cat
} | "$SENDMAIL" "${rcpt[@]}" 
```

别忘了`chmod 755 /bin/mail`。

# sql - SQL oracle 嵌套查询

> ID：16017317
> 
> 赞同：0
> 
> 时间：2013-04-15T14:06:38.640
> 
> 标签：sql, oracle, nested-queries

我正在尝试在 ORACLE DB 中运行查询，但由于以下错误“I.ID 无效标识符”一直失败。我想要做的是使用过滤器从嵌套查询中选择给定的结果，该过滤器应该使嵌套查询和上级查询相互关联。

```
The query is:
SELECT i.name, WOW.BI,WOW.BC, WOW.CP

from inv_investments i,
inner join (select 
bi.COSTI BI, 
bc.COSTI BC,
cp.COSTI AS CP

FROM 
(select atom.COSTI from 
(select odf.IF_CST_TOT COSTI
from prj_baselines bl
inner join odf_ca_baseline odf on odf.id = bl.id
WHERE i.id = bl.project_id
ORDER BY bl.created_date DESC) atom where rownum =1)  cp,

(select odf.IF_CST_TOT COSTI
from prj_baselines bl
inner join odf_ca_baseline odf on odf.id = bl.id
where odf.if_budget = 1 
AND i.id = bl.project_id) bi,

(select odf.IF_CST_TOT COSTI
from prj_baselines bl
inner join odf_ca_baseline odf on odf.id = bl.id
Where  if_budget_corrente = 1 
AND i.id = bl.project_id) bc  ) WOW on wow.ID = i.ID 
```

你知道如何解决吗？每次我检查嵌套查询的 where 子句（例如 WHERE i.id = bl.project_id）时，我都会收到错误消息...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:15:24.047

以下语法不正确：

```
SELECT i.name, WOW.BI,WOW.BC, WOW.CP
from inv_investments i,
inner join (select . . . 
```

后面有一个逗号`i`和一个`inner join`语句。

您的查询有点难以理解，但我认为简单的解决方法是将子句删除并将子句`inner join`更改为子句。`on``where`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:46:54.477

假设每个子查询 cp、bi 和 bc 旨在为每个项目/投资 id 返回一行，您应该能够将单独的子查询组合成一个查询 - 如下所示：

```
with cte as
(select i.id,
        i.name,
        row_number() over (partition by i.id ORDER BY bl.created_date DESC) rn,
        o.IF_CST_TOT,
        o.if_budget,
        if_budget_corrente
 from inv_investments i
 join prj_baselines b on i.id = b.project_id
 join odf_ca_baseline o on b.id = o.id)
select max(name) name,
       max(case rn when 1 then IF_CST_TOT end) BI,
       max(case if_budget when 1 then IF_CST_TOT end) BC,
       max(case if_budget_corrente when 1 then IF_CST_TOT end) CP
from cte
group by id 
```

# sql-server - SQL Server 更新 - 有没有办法通过跳过行来避免重复？

> ID：16017319
> 
> 赞同：1
> 
> 时间：2013-04-15T14:06:42.300
> 
> 标签：sql-server, sql-update, constraints

如果第二个语言环境中不存在，我正在尝试将数据从一个语言环境移动到另一个语言环境。我用来执行此操作的语句需要 20 小时才能执行，因此我将不胜感激有关如何更有效地执行此操作的任何想法。

```
update table 
set localeid = 3 
where localeid = 1 
  and not exists 
          (select id from table as b where localeid = 3 and id = b.id) 
```

我想知道是否有某种方法可以使用约束并让 SQL 跳过违反约束的行，而不是使整个更新失败。在这种情况下，约束将是创建`id,localeid`主键。

这可以做到吗？

ps 优化此查询所需的索引已经到位，但由于该数据库的庞大规模（包含超过 7000 万个条目），它仍然需要很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:42:34.240

这样的事情呢？这可能会做得更好，因为它消除了子查询。

```
update a
set localeid = 3
from table a
left join table b on b.id = a.id and b.localeid = 3
where a.localeid = 1
and b.id is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:43:27.230

我通常会这样写：

```
update a
   set localeid = 3
from
   table a
     left join
   table b
     on
        a.id = b.id and
        b.localeid = 3
where
    a.localeid = 1 and
    b.id is null 
```

但是否会提高性能，我不知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:55:39.643

按照 Damien 和 Becuzz 的建议，消除子查询可能会有所帮助……如果没有，您可以尝试以下方法。EXISTS 总是比 NOT EXISTS 快……所以从获取你*想要*更新的 ID 开始，而不是排除你*不*想要的 ID。运行以下直到在临时表上创建索引。即使有 7000 万行，也不会花费太长时间。

```
create table #IdsToUpdate (Id INT);

insert  #IdsToUpdate (Id)
select  id 
from    table 
group by id
having  max(case when localeid = 3 then 1 else 0 end) = 0;

create index in1 on #IdsToUpdate(Id); 
```

然后根据临时表尝试实际更新：

```
update  t
set     t.localeid = 3
from    table t
where   exists (
            select  top 1 1
            from    #IdsToUpdate i
            where   i.Id = t.id); 
```

另外，如果可能的话...您可以将数据库置于简单恢复模式吗？记录更新需要更长的时间。

# delphi - System.Assign 的确切签名是什么（用于程序表达式）？

> ID：16017325
> 
> 赞同：-2
> 
> 时间：2013-04-15T14:06:54.850
> 
> 标签：delphi

不幸的是，RTL 源代码中没有确切的`Assign`签名，我尝试猜测，例如：

```
const
  Assign: procedure (var F; const FileName: string) = System.Assign;
  { or }
  Assign: function (var F; const FileName: string): Integer = System.Assign;
  { also I tried "internal" one from _AssignFile } 
```

没有产生任何积极的结果，并且编译器拒绝将此持续表达式视为程序并抱怨*右值*（`E2029 '(' expected but ';' found)`）。

那么，我应该使用哪种类型来准确匹配 Delphi RTL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:01:33.957

`Assign`是 Delphi 的一种语言残余，其起源可追溯到原始的 Turbo Pascal 语法。早在函数重载被添加到语言语法之前，早在 RTL 的文本文件和“类型文件”内部数据结构被记录之前，`Assign`.

`Assign`是一个使用起来足够简单的过程，但是当您查看它必须做什么时，您会发现如果没有某种编译器魔法，它几乎是不可能实现的。`File of TFoo`创建一个与 . 不同且不兼容的文件类型`File of Integer`。然而，两者都可以作为第一个参数传递给`Assign`.

今天，您可能可以`Assign`使用文件参数的泛型类型参数来实现。泛型类型将符合传入变量的类型。这很好，但我们需要一种方法来将类型化文件变量与字符串文件名相关联 25 年前，泛型被添加到混合中。

`Assign`是编译器内在函数。这意味着它位于 Delphi/Pascal 语法空间之外。`Assign`本质上是一个符合类型的过程，它不能用强类型的 Delphi/Pascal 语言来表示（没有现代和复杂的语言扩展，例如泛型类型）。它不是无类型的，也不是动态类型的，因为实际参数类型是在编译时完全确定的。

您不能获取`Assign`函数的地址。即使您可以，因为它是无定形的，您也无法定义一个准确表示所有可能调用签名的过程类型。

编译器魔术函数存在于语言之外，以处理无法用当时可用的语法轻松表示的任务。`Assign`是一个例子。`Writeln`（） 是另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T16:10:31.313

`System.Assign`是一个[内在](http://docwiki.embarcadero.com/RADStudio/en/Delphi_Intrinsic_Routines)函数。它的[官方文档](http://docwiki.embarcadero.com/Libraries/en/System.Assign)是完全没有希望的。它说：

```
function Assign(var F: File; FileName: String; [CodePage: Word]): Integer; overload;
function Assign(var F: File; FileName: String; [CodePage: Word]): Integer; overload;
function Assign(var F: File; FileName: String; [CodePage: Word]): Integer; overload; 
```

我只能猜测为什么文档生成器无法处理此功能。但是这三个相同的重载显然是假的。它不是一个函数，而是一个过程。

不管。因为它是内在的，所以不能将它分配给函数指针。解决方案是将其包装在您自己的功能中。

```
procedure MyAssign(var F: File; const FileName: string);
begin
  Result := System.Assign(F, FileName);
end; 
```

然后，您可以将该函数分配给过程类型的变量或常量。

```
const
  AssignProc: procedure(var F: File; const FileName: string) = MyAssign; 
```

的另一个变体`Assign`采用指定代码页的第三个参数，以`Word`. `Assign`如果第一个参数是 a ，则只能调用该函数`TextFile`。

所以，内在函数本身就是一条定律。

请注意，文档确实声明`Assign`不应再使用。相反，您应该使用`AssignFile`. 请注意，[文档](http://docwiki.embarcadero.com/Libraries/en/System.AssignFile)再好不过了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:12:57.620

如果要打开 System.pas 文件并读取它，在 XE2 中您有这些内部程序：

```
function _AssignFile(var t: TFileRec; const s: PChar): Integer;
function _AssignText(var t: TTextRec; const s: PChar; const CP: word): Integer; 
```

而且我认为您没有任何名称中没有下划线的全局稳定过程-列出的那些是Delphi编译器内部结构，例如不可见的过程，它们在您声明字符串或dynarray变量时被秘密调用。

[http://en.wikipedia.org/wiki/Intrinsic_function](http://en.wikipedia.org/wiki/Intrinsic_function)

就像许多`_Write0LString`执行通常的 WriteLn 调用的过程一样。

因此，您必须创建一个包装器函数，该函数将调用`AssignFile`包装器的引用并将其放入变量中；

*但是，您没有在 Delphi 版本中添加标签，并且不同的版本可能对内在函数有不同的声明。因此，请查看您的特定 Delphi 的来源。*

*另外，你为什么需要它？我记得我做了这样的事情`TurboPascal 5.5`来制作基于字符串的文件 - 让`WriteLn`行为像 C `sprintf`。但是，当您可以使用它时，为什么在现代 Delphi 中需要它`TStream`呢？*

# maven - Jenkins/Hudson 是否需要 maven-surefire-plugin 才能发布测试结果？

> ID：16017326
> 
> 赞同：2
> 
> 时间：2013-04-15T14:06:59.933
> 
> 标签：maven, jenkins, hudson, maven-surefire-plugin

Jenkins/Hudson 是否需要执行 maven-surefire-plugin 以显示“最新测试结果”、“测试结果趋势”图表并允许用户深入了解特定的类/测试？我的印象是必须运行 Surefire，但似乎在我们的某些项目中，所有这些功能在 Jenkins 中都是可见的，但在 pom.xml 中没有引用 maven-surefire-plugin。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:38:19.683

不，它不需要这些插件。所需要的只是以某种标准方式报告和保存单元测试的结果。另请参阅[此问题](https://stackoverflow.com/questions/8790366/jenkins-and-junit)。

# linux - bash - 声明文档

> ID：16017331
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:07:10.633
> 
> 标签：linux, bash, declare

如果你声明一个这样的数组

```
declare -a test 
```

你可以像这样回显值

```
i=2
echo ${test[i]} 
```

或者

```
i="1+1" 
echo ${test[i]} 
```

为什么接受第二种形式？我需要一个复杂的答案谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:11:51.723

见`man bash`：

> 下标被视为必须计算为数字的算术表达式。

够复杂吗？

# php - 比较两个 MySQL 表以填充下拉列表

> ID：16017336
> 
> 赞同：0
> 
> 时间：2013-04-15T14:07:20.673
> 
> 标签：php, mysql

我试图通过比较两个表来填充下拉菜单，一个有主管和员工编号的列表，另一个有员工编号和姓名。我需要为每个主管和员工获取数字并将它们转换为下拉菜单的员工姓名，所以基本上

表 payroll_employeelist

主管员工

1234 3456

1234 2239

1234 123

2910 338

2910 3901

表 payroll_users

号码名称

第3456章

第2239章 玛丽珍

123乔·布朗

ETC

监督者由称为 $usernumber 的会话变量标识。到目前为止，我返回一个结果（只有一个！）如下：

```
if ($loademployees == 1){
echo "<option value=\"base\">---- Employee Name ----</option>";

        $query = "SELECT payroll_employeelist.employee, payroll_users.number, payroll_users.name FROM payroll_employeelist WHERE supervisor='$usernumber' LEFT JOIN payroll_users ON payroll_employeelist.employee=payroll_users.number ";

        $result = mysql_query($query);
        while ($row = mysql_fetch_array($result)) {
            echo "<option value=\">" . $row{'name'} . "</option>";
        }
        echo "</select><br>";
        } 
```

有人能帮忙吗？我觉得我用 JOIN 做了一些有趣的事情。它应该看起来像下拉列表中的员工姓名列表。

**更新：**

我现在拥有的是：

```
if ($loademployees == 1){
    echo "<option value=\"base\">---- Employee Name ----</option>";

       $query = "SELECT payroll_employeelist.supervisor, payroll_employeelist.employee, payroll_users.number, payroll_users.name 
    FROM payroll_employeelist 
    INNER JOIN payroll_users 
    ON payroll_employeelist.employee = payroll_users.number 
    WHERE supervisor = '$usernumber' ";

    $result = mysql_query($query);
    while ($row = mysql_fetch_array($result)) {
        echo "<option value=\">" . $row['name'] . "</option>";

    }
    echo "</select><br>";
    } 
```

这成功返回了测试数据集中的三个记录之一，只有一个，中间记录。$usernumber 是内部生成的顺便说一句，不可能注入。

**最新更新-已解决问题信不信由**你****

 **```
echo "</select><br>"; 
```

它在回显 while 循环的结果之前回显了这一点，因此它认为选项列表为空。我无法解释随机出现的单身员工提醒你，但它现在正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:09:19.073

您需要`payroll_users`在表上连接两次，`payroll_employeelist`因为有两列依赖于它。

```
SELECT  sup.Name SupervisorName,
        empName EmployeeName
FROM    payroll_employeelist a
        INNER JOIN payroll_users sup
            ON a.Supervisor = sup.number
        INNER JOIN payroll_users emp
            ON a.Employee = emp.Number
WHERE   sup.Supervisor = '$usernumber' 
```

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:09:49.917

这可能是因为您将连接条件放在 WHERE 内，但您可能打算将其放在外面：

```
SELECT payroll_employeelist.employee, payroll_users.number, payroll_users.name
INNER JOIN payroll_users ON payroll_employeelist.employee=payroll_users.number
FROM payroll_employeelist 
WHERE supervisor='$usernumber' 
```

此外，如果您使用，`LEFT JOIN`您还将获得不属于任何用户的员工。关于逃跑的几点：

```
$query = "SELECT ... WHERE supervisor='$usernumber'  ... "; 
```

`$usernumber`如果来自 Web 请求，这很容易受到 SQL 注入的影响；考虑使用或者`mysql_real_escape_string()`转义它或切换到 PDO / mysqli 并使用准备好的语句。

```
 $result = mysql_query($query);
    while ($row = mysql_fetch_array($result)) {
        echo "<option value=\">" . $row{'name'} . "</option>";
    } 
```

您也应该转义`$row['name']`，也不应该使用花括号：

```
 echo "<option value=\">" . 
            htmlspecialchars($row['name'], ENT_QUOTES, 'UTF-8') . 
            "</option>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:16:01.897

您应该考虑使用 PDO 进行查询。由于您将值动态分配到查询中，因此 PDO 会更安全一些，并且如果您多次运行此查询，使用 PDO 会更快。

至于您的查询，您的 SQL 子句排序不正确。也许这些链接会有所帮助：

[MySQL 的 PDO 教程](http://dev.mysql.com/doc/refman/5.6/en/apis-php-pdo-mysql.html)

[SQL 连接教程](http://beginner-sql-tutorial.com/sql-joins.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:10:26.453

你的**sintax有错误，**
**请检查**

```
 $query = "SELECT payroll_employeelist.employee, payroll_users.number, payroll_users.name FROM payroll_employeelist WHERE supervisor='$usernumber' LEFT JOIN payroll_users ON payroll_employeelist.employee=payroll_users.number "; 
```

**应该**

```
 $query = "SELECT payroll_employeelist.`employee`, payroll_users.`number`, payroll_users.`name` FROM `payroll_employeelist` LEFT JOIN `payroll_users` ON payroll_employeelist.employee` = payroll_users.`number` WHERE `supervisor` = '$usernumber' "; 
```

**对这个**

```
WHERE `supervisor` = '$usernumber' "; 
```

主管在什么表？你需要用前缀修复`payroll_employeelist`或`payroll_users`

文档[在这里](http://dev.mysql.com/doc/refman/5.0/en/select.html)

我还想提醒您，`mysql_`功能已被弃用，因此我建议您切换到新项目[`mysqli`](http://php.net/manual/en/book.mysqli.php)或[`PDO`](http://php.net/manual/en/book.pdo.php)进行新项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T14:10:52.843

```
SELECT 

tb1.supervisor,
tb1.employee,
tb2.name

FROM

payroll_employeelist AS tb1
INNER JOIN payroll_users AS tb2

ON tb1.employee = tb2.number 
```

由于您想要完全匹配，没有不匹配的值，您需要 INNER JOIN 而不是 LEFT JOIN

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T14:11:36.333

利用

```
SELECT payroll_employeelist.employee, payroll_users.number, payroll_users.name FROM payroll_employeelist LEFT JOIN payroll_users ON payroll_employeelist.employee = payroll_users.number WHERE supervisor = '$usernumber' 
```

反而。**

# sql - 改变了一个存储过程，另一个失去了性能？

> ID：16017345
> 
> 赞同：0
> 
> 时间：2013-04-15T14:07:43.007
> 
> 标签：sql, sql-server, performance, sql-server-2008, stored-procedures

这不是一个非常技术性的问题，因为我只是在寻找关于为什么会发生这种事情的理论。

在我们的应用程序中，我们有几个不同的存储过程，它们读取大部分相同的表。我们一直在监视 SQL Server，并试图取消列表中最昂贵的查询（最高 I/O、CPU 时间等）。通过更改 SQL 和/或更改应用程序，我们已经看到了很多收益。

无论如何，我们修改了存储过程#1 并发布了它。正如预期的那样，它的表现要好得多。然而，存储过程#2（它读取相似的数据）突然发现它的性能指标下降了（它消耗了更多的 I/O）。

发布后我们仍然处于更好的位置，但我正试图弄清楚为什么会发生这种情况。到目前为止，我一直无法复制该问题（无论我如何使用存储过程，它对我来说仍然表现良好）。

此外，存储过程并非每次在生产中都表现不佳。在大多数情况下，它运行得很好。

有任何想法吗？

我们使用的是 SQL Server 2008。我们没有更改任何索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T17:08:55.507

这似乎完全不相关，但请幽默并检查您在数据库实例上的*最大并行度：*

EXEC sp_configure '最大并行度'

我的怀疑是您的 SP 的零星执行不良总是发生，但被数据库的一般性能不佳所掩盖。这个配置值很可能设置为 0，默认情况下这是一件坏事。您需要根据应参考此知识库的各种因素将其更改为 1 到 8 之间的值：http: [//support.microsoft.com/kb/2806535](http://support.microsoft.com/kb/2806535)

我有一种感觉，您不时会收到一个失控的并行查询，这将解释您所看到的行为，而更改此值将有助于遏制这种情况。

PS我很抱歉没有对这个问题发表评论，但我的声誉还不够高......

# java - 登录后应用程序未重定向到下一页

> ID：16017348
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:07:51.417
> 
> 标签：java, android

我在我的应用程序中创建了登录页面，但是当用户输入正确的用户并将其传递到屏幕上显示用户找到但应用程序未重定向到下一个布局时，我遇到了问题。

PHP代码是：

```
<?php

$host="XXXXXXXXXXXXXX"; 
$username="aXXXXX62";
$password="XXXXXX";
$db_name="XXXXXn";
$tbl_name="mXXXXs";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){
echo "User Found";
session_register("myusername");
session_register("mypassword"); 
}
else {
echo "Wrong Username or Password";
}
?> 
```

这是我的java代码：

```
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    Button b,signup;
    EditText myusername,mypassword;
    TextView tv;
    HttpPost httppost;
    StringBuffer buffer;
    HttpResponse response;
    HttpClient httpclient;
    List<NameValuePair> nameValuePairs;
    ProgressDialog dialog = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        b = (Button)findViewById(R.id.login);
        signup = (Button) findViewById(R.id.signup);
        myusername = (EditText)findViewById(R.id.username);
        mypassword= (EditText)findViewById(R.id.password);
        tv = (TextView)findViewById(R.id.tv);

        signup.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent( getBaseContext(), signup.class));
            }
        });    

        b.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog = ProgressDialog.show(MainActivity.this, "", 
                        "Validating user...", true);
                 new Thread(new Runnable() {
                        public void run() {
                            login();                          
                        }
                      }).start();               
            }
        });
    }

    void login(){
        try{            
            httpclient=new DefaultHttpClient();
            httppost= new HttpPost("http://getjobcompleted.info/checklogin.php"); 
            //add your data
            nameValuePairs = new ArrayList<NameValuePair>(2);
            // Always use the same variable name for posting i.e the android side variable name and php side variable name should be similar, 
            nameValuePairs.add(new BasicNameValuePair("myusername",myusername.getText().toString().trim()));  ;
            nameValuePairs.add(new BasicNameValuePair("mypassword",mypassword.getText().toString().trim())); 
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            //Execute HTTP Post Request
            response=httpclient.execute(httppost);
            // edited by James from coderzheaven.. from here....
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            final String response = httpclient.execute(httppost, responseHandler);
            System.out.println("Response : " + response); 
            runOnUiThread(new Runnable() {
                public void run() {
                    tv.setText("Response from PHP : " + response);
                    dialog.dismiss();
                }
            });

            if(response.equalsIgnoreCase("User Found")){
                 startActivity(new Intent(getBaseContext(), view_create_url.class));        
            }

        }catch(Exception e){
            dialog.dismiss();
            System.out.println("Exception : " + e.getMessage());
        }
    }
} 
```

APP显示用户已通过身份验证，但何时重定向到下一页。请让我知道需要改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:27:00.313

您应该从响应中获取实体并从中创建输入流

```
HttpEntity entity = response.getEntity();
InputStream is = entity.getContent(); 
```

然后从输入流中读取并检查所需的响应。

# wpf - 当我的弹出窗口打开时，为什么它不显示树视图的全部内容？

> ID：16017353
> 
> 赞同：2
> 
> 时间：2013-04-15T14:08:11.977
> 
> 标签：wpf, popup, treeview, scrollbar, scrollviewer

我有一个`TreeView`内一个`Popup`。这个想法是用户将从中选择`TreeView`并能够查看任何打开的节点。这是代码：

```
<Popup PlacementTarget="{Binding ElementName=TBXProjection}" Style="{StaticResource ProjPopupStyle}" VerticalOffset="27" HorizontalOffset="-262" Margin="0,0,465,279" Name="PopupProjection" AllowsTransparency="True" Placement="Top">
    <Grid>
        <Border BorderThickness="2" Background="DodgerBlue" BorderBrush="DodgerBlue" Padding="0" CornerRadius="6">
            <ScrollViewer Height="275" Name="scrollViewer1" Width="260" BorderBrush="Black" Background="DodgerBlue">
                <TreeView Name="dirTree" ItemsSource="{Binding Source={StaticResource xmldata}, XPath=.}" VirtualizingStackPanel.IsVirtualizing="False" VirtualizingStackPanel.VirtualizationMode="Standard" SelectedItemChanged="dirTree_SelectedItemChanged"/>
            </ScrollViewer>
        </Border>
    </Grid>
</Popup> 
```

这就是它正在做的事情。这是我需要它做的。

![这是弹出/树视图正在做的事情](https://i.stack.imgur.com/IwQih.png)![这是它应该做的。](https://i.stack.imgur.com/AzVda.png)

我意识到用户可以手动向下滚动并获取信息，但如果他们选择（例如怀俄明州）它的意图是然后选择另一个孩子。卷轴应自动打开，以便进行选择。

有人可以帮助我找到我需要调整的正确属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:08:19.827

我不知道有什么属性可以满足您的要求。

但是，您可以在要显示的最后一个[TreeViewItem上使用](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeviewitem.aspx)[BrinIntoView](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.bringintoview.aspx)方法。每次打开节点时，检查最后一个子元素是否可见，如果不可见，请使用我链接的方法。这是对您的代码的修改，应该可以实现您的目标：

XAML 部分：

```
<TreeView Name="dirTree" ItemsSource="{Binding Source={StaticResource xmldata}, XPath=.}" VirtualizingStackPanel.IsVirtualizing="False"
                                      VirtualizingStackPanel.VirtualizationMode="Standard" SelectedItemChanged="dirTree_SelectedItemChanged" TreeViewItem.Expanded="ShowMyLastChild"/> 
```

C#部分：

```
 private void ShowMyLastChild(object sender, RoutedEventArgs e)
    {
        ((TreeViewItem)((TreeViewItem)(e.Source)).Items.GetItemAt(((TreeViewItem)(e.Source)).Items.Count - 1)).BringIntoView();
    } 
```

在上面的代码中，我向 TreeView 添加了附加事件，每次展开它的子节点时都会发生该事件。事件处理程序检查展开的子节点中的最后一个子节点并将其显示在视图中。这样，无论数据源如何，您都可以完成它。

请询问，如果您需要任何进一步的帮助，我很乐意提供帮助。

# c++ - std::ostream& operator<<(std::ostream& sstr, const T& val) 的模糊重载

> ID：16017354
> 
> 赞同：2
> 
> 时间：2013-04-15T14:08:21.337
> 
> 标签：c++, templates, operator-overloading

为了序列化任何对象（即对于没有全局`ostream& operator<<`的对象，字符串为空），我创建了一个函数，该函数利用了`std::ostream& operator<<`来自单独命名空间的重载；

```
namespace _impl {
template <typename T>
std::ostream& operator<<(std::ostream& osstr, const T& val) {
  return osstr;
}
}

template <typename T>
std::string serialize_any(const T& val) {
  using namespace _impl;
  std::ostringstream osstr;
  osstr<< val;
  std::string str(osstr.str());
  return str;
} 
```

这适用于我尝试过的所有类型，除了 char 的 operator<< 被认为是模棱两可的。我不明白为什么它适用于 int's、short's 或任何其他定义了运算符的类型，但不适用于 chars。有人有想法么？

```
1>application_src\general_experiments.cpp(39): error C2593: 'operator <<' is ambiguous
1>          application_src\general_experiments.cpp(26): could be 'std::ostream &_impl::operator <<<T>(std::ostream &,const T &)'
1>          with
1>          [
1>              T=char
1>          ]
1>          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\ostream(914): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,_Elem)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\ostream(827): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\ostream(742): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          while trying to match the argument list '(std::ostringstream, const char)'
1>          application_src\general_experiments.cpp(52) : see reference to function template instantiation 'std::string serialize_any<char>(const T &)' being compiled
1>          with
1>          [
1>              T=char
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:56:08.360

当重载决议到来时，编译器似乎将转换 from `const char&`to置于与向上转换to`char`相同的级别。`std::ostringstream``std::ostream`

解决方案可能是模板类型`operator<<`以避免向上转换：

```
namespace _impl {
    template <typename T, typename Y>
    Y& operator<<(Y& osstr, const T& val) {
      return osstr;
    }
} 
```

# android - 如何在 Eclipse for Android 中的 logcat 中隐藏、删除、过滤日志

> ID：16017356
> 
> 赞同：3
> 
> 时间：2013-04-15T14:08:40.817
> 
> 标签：android, eclipse, logcat

我很难找到在 Eclipse for Android 中隐藏日志的正确帖子（可能是因为主题的关键字），这就是我创建一个的原因。这是我找到的帖子：（看ZoFreX的回答，最简单的）

[如何使用 Android adb logcat 按标签名称排除某些消息？](https://stackoverflow.com/questions/5511433/how-to-exclude-certain-messages-by-tag-name-using-android-adb-logcat)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T14:14:52.067

我发现最适合我的过滤器是：

```
^(?!.*(text_to_filter_out_here)).*$ 
```

根据我的经验，这适用于任何事情。我有运行无限循环的线程，创建了大量与标签无关的垃圾邮件日志，因此我只是将部分日志消息放入该`text_to_filter_out_here`部分中，而不再出现日志。

这两个也可能重复：

[如何阻止 admob 向我的 logcat 发送垃圾邮件？](https://stackoverflow.com/questions/15705195/how-can-i-stop-admob-from-spamming-my-logcat/15705307#15705307)

[如何在 Eclipse LogCat 查看器中过滤掉标记名](https://stackoverflow.com/questions/7889888/how-to-filter-out-a-tagname-in-eclipse-logcat-viewer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T14:08:40.817

似乎（目前）没有明确的方法来隐藏一些日志（例如来自'libgps'）。要隐藏标签为“tag_1”和“tag_2”的帖子，请单击绿色加号并使用以下内容填写“按日志标签”字段：

```
^(?!(tag_1|tag_2)) 
```

等等如果你想添加一些标签来隐藏

希望这会有所帮助

# javascript - 使用 .slideToggle 时可以查看标题

> ID：16017358
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:08:42.270
> 
> 标签：javascript, slidetoggle, jquery-hover

我有一个 div（在#slideup 内有一个 div 和一个带有 PHOTOS 的 div），我希望将“PHOTOS”定位在底部，但是当你将鼠标悬停在它上面时，它会向上扩展，然后标题会转到顶部分区。当您的光标离开 div 时，我希望“照片”返回到底部。

这是我微弱的尝试。我似乎无法将标题偏移到可见的位置。任何帮助将不胜感激。

[http://jsfiddle.net/JcBAd/2315/](http://jsfiddle.net/JcBAd/2315/)

```
$("#other-guy").hover(function () {
  $("#slideup").slideToggle("fast");
}); 
```

这是一个例子（有点），[http://www.barackobama.com/](http://www.barackobama.com/)。在右栏中，当您将鼠标悬停在“移民改革”上时，您会看到我在寻找什么。唯一的区别是我希望标题粘在顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:22:43.197

例如，您可以使用 jQuery .animate()。检查这个[FIDDLE](http://jsfiddle.net/JcBAd/2332/)。

JS代码在这里：

```
 $("#other-guy").hover(function () {
        $("#slideup").stop().animate({'bottom' : 0}, 'fast');   /* open */ 
    },

    function(){
        $("#slideup").stop().animate({'bottom' : -180}, 'fast');    /* close */
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:22:38.760

您正在使用悬停效果，这就是您的 div 仅在您将鼠标悬停在其上时才显示的原因要使用没有悬停效果的代码，请删除 javascript 代码并将您的 HTML 更改为

```
<div id="other-guy">
<div style="background: #333; color: #FFF;">PHOTOS</div> 
```

它会起作用的。是的，**什么是悬停效果？**只是为了你的兴趣[看看](http://www.w3schools.com/cssref/sel_hover.asp)

# asp.net-mvc - 如何使用 MVC 4 通过 LDAP 或 Active Directory 进行身份验证？

> ID：16017373
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:09:26.603
> 
> 标签：asp.net-mvc, asp.net-mvc-4, authentication, ldap

我发现了很多关于使用 LDAP 进行身份验证的线程，但更多的是关于 asp.net webforms 和 MVC 3 而不是 4。我正在使用 VS2012 MVC 4 Web 应用程序和 Internet 应用程序项目模板。我正在尝试通过 LDAP 或 Active Directory 进行身份验证，到目前为止，我还没有发现可行的分步说明。它主要是这里和那里的一个样本，它并没有真正起作用。我已经尝试过 Microsoft asp.net 论坛，但到目前为止似乎没有人知道答案。所以，下面是我的 web.config 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="alumniConnectionString" connectionString="Data Source=myDB;Initial Catalog=Alumn;Persist Security Info=True;User ID=myUser;Password=myPass" providerName="System.Data.SqlClient"/>
    <add name="ADConnectionString" connectionString="LDAP://mySite.com/ou=useraccounts,DC=mySite,DC=com"/>
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="enableSimpleMembership" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <!--<forms loginUrl="~/Account/Login" timeout="2880" />-->
      <forms name=".ADAuthCookie" timeout="30" loginUrl="~/Account/Login" slidingExpiration="false" protection="All"/>
    </authentication>
    <profile defaultProvider="SimpleProfileProvider">
      <providers>
        <add name="SimpleProfileProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="SimpleProfileProvider">
      <providers>
        <clear/>
        <add name="SimpleProfileProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionUsername="mySite-UserName\myLDAP" connectionPassword="myPassLDAP" connectionStringName="ADConnectionString" attributeMapUsername="sAMAccountName"/>
      </providers>
    </membership>
    <roleManager defaultProvider="SimpleRoleProvider">
      <providers>
        <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

当我进入帐户/登录页面时，我收到以下错误：

> “/Alumni”应用程序中的服务器错误。找不到请求的 .Net Framework 数据提供程序。它可能没有安装。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentException：找不到请求的 .Net Framework 数据提供程序。它可能没有安装。

```
Source Error:

Line 32:                     using (var context = new UsersContext())
Line 33:                     {
Line 34:                         if (!context.Database.Exists())
Line 35:                         {
Line 36:                             // Create the SimpleMembership database without Entity Framework migration schema

Source File: f:\Web_Site\Alumni\Alumni\Filters\InitializeSimpleMembershipAttribute.cs Line: 34 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:23:27.003

> 找不到请求的 .Net Framework 数据提供程序。它可能没有安装。

您是否检查过以下内容是否在您网站的 bin 文件夹中：

*   WebMatrix.Data.dll
*   WebMatrix.WebData.dll
*   实体框架.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T14:15:48.103

不幸的是，我认为您不能将 SimpleMembershipProvider 与 LDAP 一起使用。您必须针对 SQL 数据库。

# visual-studio - 将 Windows SDK 存储在源代码管理中？

> ID：16017374
> 
> 赞同：8
> 
> 时间：2013-04-15T14:09:32.860
> 
> 标签：visual-studio, version-control, sdk, msbuild, build-automation

问题在最后——让我从提出上下文开始：

*在使用Visual Studio*时，我们在工作中面临的问题之一是确保团队中的每个人都使用相同版本的 SDK。

一个典型的问题是有人使用不同的*Direct X SDK*版本导致代码的不同行为，或者有人升级到更新的平台/Windows SDK 以使用一些新的 API 并让其他程序员的代码失败机器，如果他们仍然使用以前的版本。

我们用来解决其他中间件问题的一种方法是将整套库、包含文件、工具链等放在我们的源代码控制系统中，并让我们的项目使用这些，因此没有人需要安装任何东西. 我们还设法使用早期版本的 Direct X SDK 做到了这一点，但由于 SDK 和工具链之间的密切联系，我们总是遇到 Windows/Platform SDK 的问题。

由于我们现在必须同时支持 VS2010 和 VS2012，并且必须支持从 Windows XP 到 Windows 8 的目标，因此我们必须支持**v100**、**v110**和**v110_xp**工具集。

这意味着我们需要所有相关的编译器和相应的 SDK，无论是在我们的开发机器和构建系统上：维护成本变得非常高，特别是考虑到随机 Windows 更新和 .net 框架版本通常会破坏 msbuild。

所以问题是：

*   是否可以让 Visual Studio 使用未安装的工具集和 SDK，而让它使用正常 VS 安装位置之外的某个文件夹中可用的任何内容？

*   额外的问题：如果可行，是否可以在不更改机器上任何本地安装的配置文件的情况下做到这一点 - 即：在解决方案/项目或属性表中拥有所有这些 - 所以如果我们更改源上的结构控制系统我们不必更新每台机器？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T19:01:36.277

您描述的问题无法通过您的方法解决。您真正需要的是构建服务器和完成的定义，包括使用构建服务器构建的二进制文件。您还需要一个测试套件作为构建定义的一部分，其中包含一些与所使用的构建环境相关的不变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T04:28:22.167

考虑到其中一些工具安装的复杂程度，这听起来太复杂了。我会通过投资一些 PowerShell 脚本来解决这个问题，这些脚本会查看已安装的工具和工具路径并“监管”安装。检查所有内容的安装版本相对容易，包括补丁和更新。您可以每晚运行它们，或者作为构建的一部分。此外，您可以比较不同安装的各个方面，例如安装在开发人员机器上的工具版本与您的构建服务器。

这将为您提供 10% 的痛苦的 90% 的价值。

# java - can't add an imageIcon

> ID：16017375
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:09:33.417
> 
> 标签：java, exception, button, imageicon

i use this command to add an image icon :

```
iadd.setIcon(new ImageIcon(getClass().getResource("add.png")));
top.add(iadd); 
```

but i got that exception [Exception in thread "main" java.lang.NullPointerException]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:11:44.707

The possibilities to get nullpointerException is `iadd` is not initialized.

```
iadd.setIcon(new ImageIcon(getClass().getResource("add.png"))); 
```

or in the line

```
top.add(iadd); 
```

`top` is not initialized.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:21:08.127

We need more information to be able to help you correctly. However make sure you instantiate `iadd` and `top`.

To instantiate, you normally use the keyword `new`. You should have something like that ABOVE your lines:

```
X iadd = new X(...); // Probably ImageIcon in your case
Y top = new Y(...); // Probably some kind of List (ArrayList, LinkedList, etc.) 
```

Since we don't know the types, `X` and `Y` and only placeholders ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:23:36.357

I am on the feeling that your exception is comming from getClass().getResource("add.png")

It's possible the resource is not found in the current package?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T12:32:38.100

I figured the reason out, it was because i forgot to validate the imageicon after defining it :

```
iadd.setIcon(new ImageIcon(getClass().getResource("add.png")));
validate();
top.add(iadd); 
```

# jquery - Jquery Flot - 检测图上点击的点

> ID：16017383
> 
> 赞同：4
> 
> 时间：2013-04-15T14:10:00.057
> 
> 标签：jquery, flot

我今天刚刚开始尝试名为 Flot 的 JQuery 图形插件中提供的各种功能。在尝试确定我单击了哪个点时，我似乎遇到了错误。这个小提琴（[http://jsfiddle.net/devin85/BxjgV/](http://jsfiddle.net/devin85/BxjgV/)）包含我最初尝试将气泡图与标准折线图相结合。下面的方法是 ew 检测点击的地方，但它似乎总是识别系列中的第 11 点。

```
$("#placeholder").bind("plotclick", function (event, pos, item) {
            console.log(item)
            if (item) {
                $("#clickdata").text("You clicked point " + item.dataIndex + " in " + item.series.label + ".");
                plot.highlight(item.series, item.datapoint);
            }
        }); 
```

有人可以告诉我为什么点击的点总是系列中的最后一点吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:04:12.100

遇到的问题是由于插件版本控制。我联系了作者，修复了上述错误的最新版本可以在他的网站上找到：http: [//jumflot.jumware.com/](http://jumflot.jumware.com/)

# c# - 如何更改服务总线队列的属性？

> ID：16017387
> 
> 赞同：1
> 
> 时间：2013-04-15T14:10:11.627
> 
> 标签：c#, asp.net-mvc, azure, azure-storage, azureservicebus

我正在使用服务总线队列在 Web 角色和辅助角色之间进行通信。有时，工作角色不接受 Web 角色消息。但它会立即接受我发送的下一条消息。所以我想这可能是因为启用了批处理操作。我一直试图把它假，但我还没有成功。这是我的代码。

```
public static QueueClient GetServiceBusQueueClient(string queuename)
    {            
        string connectionString;

        if (RoleEnvironment.IsAvailable)
         connectionString = CloudConfigurationManager.GetSetting("Microsoft.ServiceBus.ConnectionString");
        else
            connectionString = ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"];          

        var namespaceManager = NamespaceManager.CreateFromConnectionString(connectionString);

        QueueDescription queue = null;

        if (!namespaceManager.QueueExists(queuename))
        {
            queue = namespaceManager.CreateQueue(queuename);
            queue.EnableBatchedOperations = false;
            queue.MaxDeliveryCount = 1000;
        }
        else
        {
            queue = namespaceManager.GetQueue(queuename);
            queue.EnableBatchedOperations = false;
            queue.MaxDeliveryCount = 1000;
        }

        MessagingFactorySettings mfs = new MessagingFactorySettings();
        mfs.NetMessagingTransportSettings.BatchFlushInterval = TimeSpan.Zero;

        string issuer;
        string accessKey;
         if (RoleEnvironment.IsAvailable)
            issuer = RoleEnvironment.GetConfigurationSettingValue("AZURE_SERVICEBUS_ISSUER");
         else
             issuer = ConfigurationManager.AppSettings["AZURE_SERVICEBUS_ISSUER"];

        if (RoleEnvironment.IsAvailable)
            accessKey = RoleEnvironment.GetConfigurationSettingValue("AZURE_SERVICEBUS_ACCESS_KEY");
        else
            accessKey = ConfigurationManager.AppSettings["AZURE_SERVICEBUS_ACCESS_KEY"];

        mfs.TokenProvider = TokenProvider.CreateSharedSecretTokenProvider(issuer, accessKey);
        MessagingFactory messagingFactory = MessagingFactory.Create(namespaceManager.Address, mfs);

        QueueClient Client = messagingFactory.CreateQueueClient(queue.Path);            

        return Client;
    } 
```

但 EnableBatchedOperations 始终为 true，MaxDeliveryCount 默认始终为 10。

如果您知道问题所在，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:23:45.857

如果要设置`EnabledBatchedOperations`，则必须在创建队列*之前执行此操作。*您可以通过创建一个`QueueDescription`对象然后将其传递给该`CreateQueue`方法来做到这一点。例如：

```
QueueDescription orderQueueDescription =
    new QueueDescription(queuename)
    {
        RequiresDuplicateDetection = true,
        MaxDeliveryCount = 1000,
    };
namespaceMgr.CreateQueue(orderQueueDescription); 
```

## 更新：

文档对此非常清楚：

> 由于一旦创建消息传递实体就无法更改元数据，因此修改重复检测行为需要删除并重新创建队列。相同的原则适用于任何其他元数据。[1]

`QueueDescription` *表示队列的元数据描述。*

[1] [http://msdn.microsoft.com/en-us/library/windowsazure/hh532012.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh532012.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T20:07:38.397

**更新 Azure SDK 2.3**

NamespaceManager 上的 UpdateQueue 方法**仍然**不允许您更新任何属性，除了暂停或恢复队列。

如果需要更改现有队列的 MaxDeliveryCount 并且不想删除并重新创建队列，则唯一的选择是在 Azure 门户中进行更改。

# css - 从 MediaWiki 中完全删除侧边栏

> ID：16017391
> 
> 赞同：2
> 
> 时间：2013-04-15T14:10:20.263
> 
> 标签：css, mediawiki

如何从 MediaWiki 中完全删除侧边栏，我的意思是内容 div 占据浏览器空间宽度的 100%？我已经成功实现了一个扩展，其中非注册用户没有边栏或工具箱，因此在这种情况下，额外的空间现在似乎是多余的。

我正在尝试从 Vector 创建自己的皮肤，并且到目前为止已尝试更改皮肤的 css 文件中的`margin-left: 10em`相应标签，`div#content`但`mw-panel`到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T22:24:12.577

当您可以编辑侧边栏菜单并将其存储在数据库中时，为什么要使用 CSS

导航到*MediaWiki：侧边栏*编辑页面并删除不需要的组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:26:00.400

如果你想使用 CSS，那么你可以尝试，

```
#sidebar{
   display:none;
} 
```

看看它是否能给你想要的效果。

或者你可以按照 *dreamweiver*所说的使用JQuery

```
$('#side-bar').remove() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T19:03:28.203

如果您在编写时正在创建自己的皮肤，那么您根本不必打印侧边栏！它在那里是因为你的皮肤中有一段代码在打印它。

在你的皮肤代码中搜索`$this->data['sidebar']`，你会找到打印侧边栏的循环。

但是，我猜你的皮肤有某种导航，而不是重新发明轮子，我建议使用侧边栏，它具有内置功能（可以从设置`MediaWiki:Sidebar`等），即使你选择使用它以另一种方式。它不必打印为侧边栏，只是因为这是名称——它可以是顶部菜单、下拉菜单、...

# c# - 使用 MEF 约定选择无参数构造函数

> ID：16017392
> 
> 赞同：2
> 
> 时间：2013-04-15T14:10:20.403
> 
> 标签：c#, mef

我正在尝试在 .NET Framework 4.5 中使用 MEF 约定，但我坚持认为应该很简单。

我想导出一组类，除了具有多个构造函数的类之外，所有类都在工作，因此 MEF 默认调用具有最多参数的构造函数，这会导致中断，因为参数没有导入，这就是它的方式我猜应该是。

无论如何，我想通过告诉 MEF 导出不带参数的构造函数来确保它正常工作。

```
var registration = new RegistrationBuilder();

registration.ForTypesDerivedFrom<TestStepResult>()
    .Export<TestStepResult>()
    .SelectConstructor(xxx); 
```

所以我知道我需要在 SelectConstructor 中做一些事情，但找不到应该说什么来调用没有参数的构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:17:27.197

一种方法是：

```
registration.ForTypesDerivedFrom<TestStepResult>()
   .Export<TestStepResult>()
   .SelectConstructor(ctorInfos => 
                      {
                          var parameterLessCtor = ctorInfos.FirstOrDefault(ci => ci.GetParameters().Length == 0);
                          if (parameterLessCtor != null)
                              return parameterLessCtor;
                          else
                              return ctorInfos.First();
                      }); 
```

请注意，它包括一些简单的错误处理。如果没有无参数 .ctor 它返回第一个可用的。不过，这可能不是您所需要的。您将不得不决定如何处理这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:12:54.747

你不能简单地用`[ImportingConstructor]`属性装饰首选构造函数吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:18:59.887

AFAIK，您缺少的唯一步骤是：

```
registration.ForTypesDerivedFrom<TestStepResult>()
  .Export<TestStepResult>()
  .SelectConstructor(ctorInfos => ctorInfos[0]); 
```

其中 ctorInfos 包含您为相关导出所拥有的 ctor 数组。

# python - 使用装饰器在 __init__ 之后注入函数调用

> ID：16017397
> 
> 赞同：14
> 
> 时间：2013-04-15T14:10:32.577
> 
> 标签：python, pyqt4, decorator

我正在尝试找到创建执行以下操作的类装饰器的最佳方法：

1.  将一些函数注入装饰类
2.  `__init__`在调用装饰类之后强制调用这些函数之一

目前，我只是保存对“原始”`__init__`方法的引用，并将其替换为`__init__`调用原始方法和附加函数的方法。它看起来类似于：

```
orig_init = cls.__init__

def new_init(self, *args, **kwargs):
    """
    'Extend' wrapped class' __init__ so we can attach to all signals
    automatically
    """

    orig_init(self, *args, **kwargs)
    self._debugSignals()

cls.__init__ = new_init 
```

有没有更好的方法来“增强”原件`__init__`或在其他地方注入我的电话？我真正需要的只是`self._debugSignals()`在创建对象后的某个时间调用我。我也希望它自动发生，这就是为什么我认为 after`__init__`是一个好地方。

## 额外的杂项。装饰笔记

值得一提的是这个装饰器的一些背景。[你可以在这里](https://gist.github.com/durden/5367247)找到完整的代码。装饰器的重点是自动附加到任何 PyQt 信号并在它们发出时打印。当我装饰自己的子类时，装饰器工作正常`QtCore.QObject`，但是我最近一直在尝试[自动装饰所有 QObject 子](https://stackoverflow.com/questions/15959232/dynamically-add-a-decorator-to-class)类。

我想在应用程序中有一个“调试”模式，我可以自动打印所有信号，以确保事情按照我的预期进行。我确信这会导致大量调试，但我仍然想看看发生了什么。

问题是我当前版本的装饰器[在替换`QtCore.QObject.__init__`](https://stackoverflow.com/questions/15959232/dynamically-add-a-decorator-to-class#comment22745728_15959264). 我试过调试这个，但代码都是 SIP 生成的，我没有太多经验。

所以，我想知道是否有一种更安全、更 Python 的方式来在之后注入函数调用`__init__`并希望避免段错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-05T20:37:32.097

根据[这篇文章](http://martyalchin.com/2008/jan/10/simple-plugin-framework/)和[这个答案](https://stackoverflow.com/questions/14510286/plugin-architecture-plugin-manager-vs-inspecting-from-plugins-import/17401329#17401329)，另一种方法是通过自定义[元类](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)。这将按如下方式工作（在 Python 2.7 中测试）：

```
# define a new metaclass which overrides the "__call__" function
class NewInitCaller(type):
    def __call__(cls, *args, **kwargs):
        """Called when you call MyNewClass() """
        obj = type.__call__(cls, *args, **kwargs)
        obj.new_init()
        return obj

# then create a new class with the __metaclass__ set as our custom metaclass
class MyNewClass(object):
    __metaclass__ = NewInitCaller
    def __init__(self):
        print "Init class"
    def new_init(self):
        print "New init!!"

# when you create an instance
a = MyNewClass()
>>> Init class
>>> New init!! 
```

基本思想是：

1.  当你调用`MyNewClass()`它搜索元类时，发现你已经定义了`NewInitCaller`

2.  元类 `__call__`函数被调用。

3.  此函数`MyNewClass`使用创建实例`type`，

4.  该实例运行它自己的`__init__`（打印“Init class”）。

5.  然后元类调用`new_init`实例的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-19T11:30:38.660

这是 Python 3.x 的解决方案，基于[这篇文章接受的答案](https://stackoverflow.com/questions/39013249/metaclass-in-python3-5)。另请参阅[PEP 3115](https://www.python.org/dev/peps/pep-3115/)以供参考，我认为其基本原理很有趣。

上面示例中的更改以注释显示；唯一真正的变化是定义元类的方式，所有其他的都是微不足道的 2to3 修改。

```
# define a new metaclass which overrides the "__call__" function
class NewInitCaller(type):
    def __call__(cls, *args, **kwargs):
        """Called when you call MyNewClass() """
        obj = type.__call__(cls, *args, **kwargs)
        obj.new_init()
        return obj

# then create a new class with the metaclass passed as an argument
class MyNewClass(object, metaclass=NewInitCaller):  # added argument
    # __metaclass__ = NewInitCaller  this line is removed; would not have effect
    def __init__(self):
        print("Init class")  # function, not command
    def new_init(self):
        print("New init!!")  # function, not command

# when you create an instance
a = MyNewClass()
>>> Init class
>>> New init!! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-26T13:37:21.260

`__post_init__`这是在非数据类上实现的 jake77 示例的通用形式。这使得子类能够在基类和子类完成`configure()`后以正确的顺序自动调用。`__init__`

```
# define a new metaclass which overrides the "__call__" function
class PostInitCaller(type):
    def __call__(cls, *args, **kwargs):
        """Called when you call BaseClass() """
        print(f"{__class__.__name__}.__call__({args}, {kwargs})")
        obj = type.__call__(cls, *args, **kwargs)
        obj.__post_init__(*args, **kwargs)
        return obj

# then create a new class with the metaclass passed as an argument
class BaseClass(object, metaclass=PostInitCaller):
    def __init__(self, *args, **kwargs):
        print(f"{__class__.__name__}.__init__({args}, {kwargs})")
        super().__init__()

    def __post_init__(self, *args, **kwargs):
        print(f"{__class__.__name__}.__post_init__({args}, {kwargs})")
        self.configure(*args, **kwargs)

    def configure(self, *args, **kwargs):
        print(f"{__class__.__name__}.configure({args}, {kwargs})")

class SubClass(BaseClass):
    def __init__(self, *args, **kwargs):
        print(f"{__class__.__name__}.__init__({args}, {kwargs})")
        super().__init__(*args, **kwargs)

    def configure(self, *args, **kwargs):
        print(f"{__class__.__name__}.configure({args}, {kwargs})")
        super().configure(*args, **kwargs)

# when you create an instance
a = SubClass('a', b='b') 
```

运行给出：

```
PostInitCaller.__call__(('a',), {'b': 'b'})
SubClass.__init__(('a',), {'b': 'b'})
BaseClass.__init__(('a',), {'b': 'b'})
BaseClass.__post_init__(('a',), {'b': 'b'})
SubClass.configure(('a',), {'b': 'b'})
BaseClass.configure(('a',), {'b': 'b'}) 
```

# vba - Excel 中的最大下拉列表/公式长度

> ID：16017403
> 
> 赞同：1
> 
> 时间：2013-04-15T14:10:48.627
> 
> 标签：vba, excel, excel-formula, excel-2003

我有以下 VBA 代码：

```
myList = "test"

Range("A1:Z1").Validation.Delete
Range("A1:Z1").Validation.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Formula1:=myList 
```

如果我的列表超过 256 个字符，则会被截断。如果超过 1024，我会收到执行错误（我认为这是公式的最大长度）。

我怎样才能克服这些限制？我正在使用 Excel 2003。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:30:30.043

使用上面评论中发布的链接，我能够创建一个包含超过 256/1024 个字符的下拉列表。这是我经过更多搜索和尝试后得到的结果：

```
ActiveWorkbook.Names.Add Name:="List", RefersTo:="=ValidationList!$A$1:$A$" & i
Range("A1:AZ1").Validation.Delete
Range("A1:AZ1").Validation.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, Formula1:="=List" 
```

仅此而已。`i`是*ValidationList*表的行数。我正在动态创建该工作表并使用我想要在下拉列表中显示的内容填充第一个 A 列。

有用的参考资料：

*   [http://www.contextures.com/xlDataVal11.html](http://www.contextures.com/xlDataVal11.html)
*   [http://www.ozgrid.com/forum/showthread.php?t=52916](http://www.ozgrid.com/forum/showthread.php?t=52916)
*   [http://msdn.microsoft.com/en-us/library/office/ff839847.aspx](http://msdn.microsoft.com/en-us/library/office/ff839847.aspx)
*   [http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/830b42cf-8c97-4aaf-b34b-d860773281f7/](http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/830b42cf-8c97-4aaf-b34b-d860773281f7/)
*   [VBA excel代码：在验证中不能给公式1命名范围](https://stackoverflow.com/questions/6786540/vba-excel-codecannot-give-named-range-to-formula1-in-validation)

# mysql - 使用 SQL 检查时间戳是否是今天

> ID：16017410
> 
> 赞同：1
> 
> 时间：2013-04-15T14:11:06.410
> 
> 标签：mysql, timestamp

我看过一些关于它的问题，但没有任何帮助。

我有一个名为 的列`timestamp`，其中有一个时间戳值，表示插入的时间。例如：`1366030060`。

我只想选择今天插入的行。我正在使用 Mysql

这是我的代码：（我添加了 WHERE 但它不起作用）

```
 SELECT      `chat`.`message`,
                    `chat`.`timestamp`,
                    `users`.`username`,
                    `users`.`id`
        FROM        `chat`
        JOIN        `users`
        ON          `chat`.`userid` = `users`.`id`
        WHERE       `chat`.`timestamp` >= UNIX_TIMESTAMP(CURDATE())
        ORDER BY    `chat`.`timestamp`
        DESC 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T14:24:42.157

```
SELECT colList
FROM tbl
WHERE timestampCol >= UNIX_TIMESTAMP(CURDATE()) 
```

# entity-framework - mvc 4中的recaptcha，提交页面时没有点击post方法

> ID：16017411
> 
> 赞同：1
> 
> 时间：2013-04-15T14:11:18.487
> 
> 标签：entity-framework, asp.net-mvc-4, mvcrecaptcha

当我提交页面时，我的 recaptcha 发布操作方法没有命中。 **它在提琴手中显示它将发布方法。但没有击中我的VS2010。** 以前，当我使用 mysql 数据库未使用实体框架时，它可以工作。现在我们正在使用 sql2012 和实体框架。是否缺少任何参考资料。或输入参数无法在 post 方法中正确访问。我没有任何意义。任何人都可以帮忙。我怎样才能解决这个问题。

**看法：**

```
<div class="left-div-user">
            <div class="t-32_b_user">
                Forgot password?</div>
            <div class="t-12-user">
                Email
            </div>
            <div>
                @Html.TextBoxFor(model => model.Email, new { @class = "user-input-bx" })</div>
            <div style="font: 20px; color: Black; font-weight: bold;">
                Please enter the below words in the box.
            </div>
            <div class="t-12_2-user">
                @Html.ValidationMessageFor(model => model.Email)</div>
            <div>
                @Html.Raw(Html.GenerateCaptcha("captcha", "clean"))
                @Html.ValidationMessage("captcha")
            </div>
            <input name="" type="submit" class="user-common-btn1" value="Submit" />
        </div> 
```

**行动方法：**

```
[HttpPost]
        [AllowAnonymous]
        [RecaptchaControlMvc.CaptchaValidator]
        public ActionResult ForgotPassword(ForgotPasswordModel fp, bool CaptchaValid, String CaptchaErrorMessage)
        {
            //my code
         } 
```

**网络配置：**

```
 <appSettings>
    <add key="ReCaptchaPrivateKey" value="privatevalue" />
    <add key="ReCaptchaPublicKey" value="publicvalue" />
    </appSettings>

    <system.web>
    <namespaces>
    <add namespace="Recaptcha" />
    </namespaces>
    </system.web> 
```

# python - 如何从跟踪文件中查找重复序列

> ID：16017415
> 
> 赞同：3
> 
> 时间：2013-04-15T14:11:28.517
> 
> 标签：python, data-mining, trace, pattern-recognition, repeat

我被分配了一项任务，我需要检测给定的应用程序并生成一个跟踪文件，然后从跟踪文件中生成一个序列图。该应用程序是用 python 编写的。该应用程序在方法启动和退出的地方进行了检测。

我的主要目的是找到跟踪文件中的重复模式？

以下是跟踪文件的示例

```
Entering    get_instance    None    []  None    10:25:30:743000
Entering    __init__    ConfigHandler   ['config_filepath'] 56663624    10:25:30:743000
Entering    _load_config    ConfigHandler   ['path']    56663624    10:25:30:744000
Exited  _load_config    ConfigHandler   True    56663624    10:25:30:746000
Exited  __init__    ConfigHandler   None    56663624    10:25:30:747000
Exited  get_instance    None    <commons.ConfigHandler.ConfigHandler object at 0x0000000003609E48>  None    10:25:30:747000
Entering    __init__    ColumnConverter []  56963312    10:25:30:769000
Exited  __init__    ColumnConverter None    56963312    10:25:30:769000
Entering    __init__    PredicatesFactory   []  56963424    10:25:30:769000
Exited  __init__    PredicatesFactory   None    56963424    10:25:30:769000
Entering    __init__    LogFileConverter    []  56963536    10:25:30:769000
Exited  __init__    LogFileConverter    None    56963536    10:25:30:769000 
```

如何在跟踪文件中查找重复模式？

我的主要目的是找到跟踪文件中的重复模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:30:31.353

您可以使用 PrefixSpan 算法来查找顺序规则。

论文：

[http://www.cs.uiuc.edu/~hanj/pdf/span01.pdf](http://www.cs.uiuc.edu/~hanj/pdf/span01.pdf)

该站点具有开源 Java 代码，您可以从以下方面获得灵感：

[http://www.philippe-fournier-viger.com/spmf/index.php?link=documentation.php#examplePrefixSpan](http://www.philippe-fournier-viger.com/spmf/index.php?link=documentation.php#examplePrefixSpan)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:26:11.043

考虑检查正则表达式以查找模式。

例如，要匹配这样的行：

```
Exited  __init__    LogFileConverter    None    56963536    10:25:30:769000 
```

您可以使用以下正则表达式模式：

```
>>> import re
>>> pattern = re.compile('Exited  __init__\s+(\w+)\s+(.*?)\s+(\d+)\s+(\d+:\d+:\d+\d+)')
>>> matches = re.findall(pattern, text) 
```

通过一些修改，您应该能够找到重复的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:49:46.000

如果您想在前两个字段中查找重复，您可以将它们用作字典键并使用所有匹配行的列表填充它。当您处理了整个文件时，那些包含多个元素列表的字典条目是重复的。

```
#!/usr/bin/env python

import fileinput

def read (line, d=dict()):
    tokens = line.split()
    key = ' '.join(tokens[0:2])
    try:
        d[key].append(line)
    except KeyError:
        d[key] = [line]in v:
    return d

def main ():
    d = dict()
    for line in fileinput.input():
        read(line, d)
    for k  in d:
        v = d[k]
        if len(v) > 1:
            # print "### %s => %s" % (k, v)   for debugging
            for l in v:
                print l,

if __name__ == '__main__':
    main() 
```

示例输出（启用了调试打印，因此您可以了解它打印这些输出的原因）：

```
### Exited __init__ => ['Exited  __init__    ConfigHandler   None    56663624    10:25:30:747000\n', 'Exited  __init__    ColumnConverter None    56963312    10:25:30:769000\n', 'Exited  __init__    PredicatesFactory   None    56963424    10:25:30:769000\n', 'Exited  __init__    LogFileConverter    None    56963536    10:25:30:769000\n']
Exited  __init__    ConfigHandler   None    56663624    10:25:30:747000
Exited  __init__    ColumnConverter None    56963312    10:25:30:769000
Exited  __init__    PredicatesFactory   None    56963424    10:25:30:769000
Exited  __init__    LogFileConverter    None    56963536    10:25:30:769000
### Entering __init__ => ["Entering    __init__    ConfigHandler   ['config_filepath'] 56663624    10:25:30:743000\n", 'Entering    __init__    ColumnConverter []  56963312    10:25:30:769000\n', 'Entering    __init__    PredicatesFactory   []  56963424    10:25:30:769000\n', 'Entering    __init__    LogFileConverter    []  56963536    10:25:30:769000\n']
Entering    __init__    ConfigHandler   ['config_filepath'] 56663624    10:25:30:743000
Entering    __init__    ColumnConverter []  56963312    10:25:30:769000
Entering    __init__    PredicatesFactory   []  56963424    10:25:30:769000
Entering    __init__    LogFileConverter    []  56963536    10:25:30:769000 
```

# python - Python 读取日志文件并获取包含特定单词的行

> ID：16017419
> 
> 赞同：11
> 
> 时间：2013-04-15T14:11:40.350
> 
> 标签：python

我有日志文件（以 YYMMDD 格式命名），我想创建一个仅从文件中获取重要信息的脚本（例如包含 "O:NVS:VOICE" 的行）。我以前从未使用过 Python，所以请帮忙！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-15T14:33:34.610

这应该让你很好地开始：

```
infile = r"D:\Documents and Settings\xxxx\Desktop\test_log.txt"

important = []
keep_phrases = ["test",
              "important",
              "keep me"]

with open(infile) as f:
    f = f.readlines()

for line in f:
    for phrase in keep_phrases:
        if phrase in line:
            important.append(line)
            break

print(important) 
```

它绝不是完美的，例如没有异常处理或模式匹配，但你可以很容易地添加这些。查看正则表达式，这可能比短语匹配更好。如果您的文件很大，请逐行阅读以避免 MemoryError。

输入文件：

```
This line is super important!
don't need this one...
keep me!
bla bla
not bothered
ALWAYS include this test line 
```

输出：

```
['This line is super important!\n', 'keep me!\n', 'ALWAYS include this test line'] 
```

注意：这是 Python 3.3。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-15T14:22:46.513

您需要知道如何[遍历目录中的文件](https://stackoverflow.com/a/1792350/322909)、[正则表达式以确保您的日志文件格式与您正在循环的文件匹配](https://stackoverflow.com/a/185397/322909)、[如何打开文件](https://stackoverflow.com/a/112980/322909)、[如何遍历打开文件中的行](https://stackoverflow.com/a/10255293/322909)，以及[如何检查其中一行是否包含您要查找的内容](https://stackoverflow.com/a/3437070/322909)。

这里有一些代码可以帮助您入门。

```
with open("log.log" 'r') as f:
    for line in f:
        if "O:NVS:VOICE" in line:
            print line 
```

# ios - 在目标 c 中停止浮点值四舍五入

> ID：16017424
> 
> 赞同：1
> 
> 时间：2013-04-15T14:11:48.567
> 
> 标签：ios, objective-c, nsnumberformatter

我必须防止该值在小数点后四舍五入。

这是我使用的代码：

```
NSNumberFormatter* nf = [[[NSNumberFormatter alloc] init] autorelease];
nf.positiveFormat = @"0.###";      
NSString* trimmedValue = [nf stringFromNumber: [NSNumber numberWithFloat:[exRateLabel doubleValue]*amount]];
trimmedValue = [trimmedValue substringToIndex:[trimmedValue length]-1]; 
```

在这种情况下，如果我乘以**1000 * 50.1234**我得到**50123.3984**，但它应该是**50123.4**。

```
NSLog(@".2f",50.1234*1000); 
```

对于这种情况，它显示了正确的值，但对于

```
NSLog(@".2f",50.1234*123); 
```

它将实际值（即**6165.1782** ）四舍五入为**6165.18**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:34:58.310

只需使用 double 而不是 float 和适当的舍入规则：

```
NSNumberFormatter* nf = [[NSNumberFormatter alloc] init];
nf.positiveFormat = @"0.###";
nf.roundingMode = NSNumberFormatterRoundFloor;
NSString* trimmedValue = [nf stringFromNumber: [NSNumber numberWithDouble:50.1234*123]];
NSLog(@"trimmedValue: %@", trimmedValue); 
```

结果是：

```
trimmedValue: 6165.178 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:54:43.233

如果数学需要精确，我建议使用 NSDecimalNumber。

```
NSDecimalNumber *myNumber = [[NSDecimalNumber alloc] initWithMantissa:501234 exponent:-4 isNegative:NO]];  
NSDecimalNumber *answer = [self multiplyDecimalNumber:myNumber with:[NSDecimalNumber decimalNumberWithMantissa:1000 exponent:0 isNegative:NO];  
NSLog(@"Answer: %g", floor([answer doubleValue])); 
```

我为乘法做了一个快速包装，我从不想要一个例外，你的需求可能会有所不同：

```
-(NSDecimalNumber *) multiplyDecimalNumber:(NSDecimalNumber *) lhs with:(NSDecimalNumber *) rhs {  
    NSDecimalNumberHandler *handler = [NSDecimalNumberHandler decimalNumberHandlerWithRoundingMode:NSRoundPlain scale:NSDecimalNoScale raiseOnExactness:NO raiseOnOverflow:NO raiseOnUnderflow:NO raiseOnDivideByZero:NO];  
    return [lhs decimalNumberByMultiplyingBy:rhs withBehavior:handler];  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:11:11.277

他们都是正确的。

首先，我相信你有一个错字 - 你错过了`%`.

```
NSLog(@"%.2f", 50.1234*1000); // same as @"%.2f", 50,123.4 = @"50123.4" 
```

即使您要求打印小数点后 2 位，数学运算也会给您留下干净的 1/10。

```
NSLog(@"%.2f",50.1234*123); // same as @"%.2f", 5,161.1782 = @"5161.18" 
```

您要求输入两个十进制数字，并且向上舍入是默认行为。

听起来您实际要使用的格式是：

```
NSLog(@"%.1f", number); 
```

或者如果你想要一个强制的、零填充的两位数，请使用

```
NSLog(@"%.02", number); // first case would come out @"50123.40" 
```

这将强制打印所有尾随零

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:30:23.253

you are probably using a 'double' representation, cast the number to a float or you can use your own policy for truncation using functions like:

```
float roundUp (float value, int digits) {

    int mod = pow(10, digits);

    float roundedUp = value;
    if (mod != 0) {
        roundedUp = ceilf(value * mod) / mod;
    }

    return roundedUp;
}

float roundDown (float value, int digits) {

    int mod = pow(10, digits);

    float roundedDown = value;
    if (mod != 0) {
       roundedDown = floorf(value * mod) / mod;
    }

    return roundedDown;
}

float nearestf (float value, int digits) {

    int mod = pow(10, digits);

    float nearest = value;
    if (mod != 0) {
        nearest = floorf(value*mod + 0.5) / mod;
    }

    return nearest;
} 
```

'roundUp' should be the one you need, or try with the more generic 'nearestf'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-26T16:34:09.477

对我来说，要求显示至少两位小数和最大十进制数。以下代码确实对我有用。

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setMaximumFractionDigits:2];
[numberFormatter setMinimumFractionDigits:2];
[numberFormatter setRoundingMode:NSNumberFormatterRoundDown];
NSString *num = @"123456.019";
NSString *stringFromNumber = [numberFormatter stringFromNumber:[numberFormatter numberFromString:num]];
NSLog(@"check this %@", stringFromNumber); 
```

# xslt - 替换一个网址

> ID：16017425
> 
> 赞同：0
> 
> 时间：2013-04-15T14:11:49.003
> 
> 标签：xslt, umbraco

我有一个 Xslt 代码。

```
<xsl:value-of select="XSLTHelper:geturlpath()"/> 
```

这是 xslt 的值：

```
http://www.mydomain.com/productlisting.aspx?onxurl=%2fproducts%2fkonference--og-skrivemapper&fullurl=%2fproducts%2fkonference--og-skrivemapper.aspx&at=privat 
```

我想删除 &at=private。我怎样才能实现这个。有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:24:20.773

看起来您`XSLTHelper:geturlpath`是一个自定义 XSLTHelper 扩展。如果是这种情况，您可能会更快地删除扩展方法本身中的查询字符串。

# php - ZMQ pub 显然不能在 windows 和 php 上使用 XAMPP

> ID：16017430
> 
> 赞同：0
> 
> 时间：2013-04-15T14:11:56.537
> 
> 标签：php, xampp, zeromq, publish-subscribe

这个问题太具体了，恐怕没人能帮助我......我已经从在 Mac 上开发切换到在 PC 上开发，并且我的所有项目都在本地机器上工作（使用 XAMPP）除了我的ZMQ 套接字。

ZMQ 显然正在工作，因为当我将消息推送到拉式套接字时，它会接收到消息（所以拉和推似乎工作正常）。但是，当消息随后发布时，似乎没有任何反应。起初我以为它是客户端（基于闪存），但奇怪的是，当我连接到在线服务器（具有相同的套接字代码）时，它可以毫无问题地接收发布的消息。我尝试编写一个小 zmq 订阅套接字，然后使用发布套接字对其进行测试，但这似乎也没有响应。我有点难过。

这是套接字的代码（带有虚构的端口号）：

```
$context = new ZMQContext();
$pub = $context->getSocket(ZMQ::SOCKET_PUB);
$pub->bind("tcp://*:4321");
$pull = $context->getSocket(ZMQ::SOCKET_PULL);
$pull->bind("tcp://*:4322");

while (true) {
    $request = $pull->recv();
    $pub->send($request);
    echo PHP_EOL."PUBLISHING: $request".PHP_EOL;
} 
```

我试过在windows防火墙上打开端口，然后一起关闭防火墙，但这不是问题。会不会是 ZMQ 安装？还是php绑定？当我检查 phpinfo() 时，它似乎已正确加载，并且它与服务器上的版本相同（有效）。我错过了什么基本的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:53:21.097

万一其他人遇到这类问题，只是为了让您知道这是与不匹配的 zmq 版本与 php 绑定有关。虽然很多 zmq 的东西都在工作，但 actionscript zmq 脚本没有正确响应。奇怪的是，phpinfo() 显示我确实在使用 zmq 3.2.2，但“php -i”显示它是 3.2.0。我不知道是否有必要将 libzmq.dll 和 php_zmq.dll 放在 System32 中，但我有，而且我认为在我摆弄安装所有东西的过程中，我的 dll 混淆了。删除所有内容并仅使用此处的 dll 后：

[https://github.com/mkoppanen/php-zmq/issues/79](https://github.com/mkoppanen/php-zmq/issues/79)

我能够解决这个问题。我希望这对其他人有帮助！

# powershell - CommandNotFoundException：获取 Windows 可选功能

> ID：16017436
> 
> 赞同：3
> 
> 时间：2013-04-15T14:12:14.550
> 
> 标签：powershell

我在 Windows 7 上使用 Powershell 版本 2。我需要运行以下命令：`get-windowsoptionalfeature`

但是当我运行: 时`get-command -Verb Get`，`get-windowsoptionalfeature`没有列出，因此当我输入命令时，我收到一条错误消息，指出“get-windowsoptionalfeature”未被识别为 cmdlet 函数的名称。

我错过了一个dll还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:28:29.800

`get-windowsoptionalfeature`仅[适用于 Windows 8 & Server 2012](http://technet.microsoft.com/en-us/library/hh852173.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T14:56:31.360

在 powershell 控制台中试试这个

```
PS C:\>$feature=Get-WmiObject -query "select * from  Win32_OptionalFeature" 
```

现在 $feature 是 ManagementObject 类型的对象数组。

证明它尝试

```
PS C:\> $feature[0] 
```

这就是我得到的。

```
__GENUS          : 2
__CLASS          : Win32_OptionalFeature
__SUPERCLASS     : CIM_LogicalElement
__DYNASTY        : CIM_ManagedSystemElement
__RELPATH        : Win32_OptionalFeature.Name="OEMHelpCustomization"
__PROPERTY_COUNT : 6
__DERIVATION     : {CIM_LogicalElement, CIM_ManagedSystemElement}
__SERVER         : TTL001343
__NAMESPACE      : root\cimv2
__PATH           : \\TTL001343\root\cimv2:Win32_OptionalFeature.Name="OEMHelpCustomization"
Caption          :
Description      :
InstallDate      :
InstallState     : 2
Name             : OEMHelpCustomization
Status           : 
```

您也可以获取查询特定对象。例子：

```
PS C:\>$feature=Get-WmiObject -query "select * from  Win32_OptionalFeature where name = 'RemoteServerAdministrationTools-Roles-AD-Powershell'" 
```

现在这将是单个对象而不是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:38:19.970

有客户端管理器模块：

[http://archive.msdn.microsoft.com/PSClientManager](http://archive.msdn.microsoft.com/PSClientManager)

# uitableview - MonoTouch：添加 UIImageView 后 UITableViewCell 更改高度

> ID：16017439
> 
> 赞同：1
> 
> 时间：2013-04-15T14:12:31.523
> 
> 标签：uitableview, xamarin.ios

您好我有以下问题：

我实现了将 CustomUIImageView 添加到一个 CustomTableViewCell。

在 CustomUIImageView 的绘制方法中，我将其缩小到传入矩形的宽度，即单元格宽度。

但是现在单元格高度比调整大小的图像要高得多。并且已经调用了 TableView 的 GetHeight 方法。

如何实现将新图像高度用作单元格高度？

谢谢！

![调整大小的图像比单元格小得多](https://i.stack.imgur.com/vgxiD.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:19:09.490

实现这一点的最佳方法是重新加载 tableView 中的特定行：

```
tableView.ReloadRows(new NSIndexPath[] { NSIndexPath.FromRowSection(0, 0) }, UITableViewRowAnimation.Fade); 
```

如果我从网上下载图像等，我通常会做这种事情。

让我知道这是否解决了您的问题，发布您的一些代码，我可以得到更具体的信息。

# php - 如何在不给最终用户增加太多负担的情况下保护密码字段

> ID：16017441
> 
> 赞同：1
> 
> 时间：2013-04-15T14:12:49.933
> 
> 标签：php, html, sql, encryption, passwords

我正在为电子商务网站构建一个登录界面，其中一部分是密码字段。

我想知道推荐多少个字符作为最低要求，这样既安全又不会对用户造成太大负担？

另外，最好的解密方式是什么？（MD5 或其他）

# java - 按后退键活动不会返回

> ID：16017442
> 
> 赞同：2
> 
> 时间：2013-04-15T14:12:51.527
> 
> 标签：java, android, back-button

我遇到了一个奇怪的问题。

按后退键活动不会返回。在 logcat 它显示

```
04-15 19:24:09.063: V/Activity(23041): Tracking Key Up, activity is resumed: false 
```

这是我的活动代码

```
package com.sandy.letsfixthat;

import android.app.Activity;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class Slider extends Activity {
    TabSpec beginer,inter,dev;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.slider);
        TabHost th = (TabHost)findViewById(R.id.tabhost);

        LocalActivityManager mLocalActivityManager = new LocalActivityManager(this, false);

        // state will be bundle your activity state which you
        // get in onCreate
        mLocalActivityManager.dispatchCreate(savedInstanceState);
        th.setup(mLocalActivityManager);
        //tab for beginner
        beginer = th.newTabSpec("Begin");
        beginer.setIndicator("Beginner");
        Intent begin = new Intent(this, Beginner.class);
        beginer.setContent(begin);
        th.addTab(beginer);

        //tab for intermediate
        inter = th.newTabSpec("Inter");
        inter.setIndicator("Intermediate");
        Intent Intermediate = new Intent(this, Intermediate.class);
        inter.setContent(Intermediate);
        th.addTab(inter);

        //tab for developers
        dev = th.newTabSpec("Devel");
        dev.setIndicator("Other");
        Intent develop = new Intent(this, Developer.class);
        dev.setContent(develop);
        th.addTab(dev);
    }

    public boolean onCreateOptionsMenu(android.view.Menu menu) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu);
        MenuInflater blowUp = getMenuInflater();
        blowUp.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        switch (item.getItemId()){
        case R.id.aboutUs:
            Intent i = new Intent(this,About.class);
            startActivity(i);
            break;

        case R.id.exit:
            finish();
            break;

  /*    case R.id.setting:
            Intent setting = new Intent (this,Settings.class);
            startActivity(setting);
            break;                          */
        }
        return false;
    }

    @Override
    public void onPause() {
        // your code.
        super.onPause();
        finish();
    }
} 
```

MainActivity 的代码

```
package com.sandy.letsfixthat;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener {
    Button go;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        go = (Button)findViewById(R.id.bgo);
        go.setOnClickListener(this);

    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch (arg0.getId()){
        case R.id.bgo:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("NOTE:- this is an initial release. MORE TUTORIAL COMING IN NEXT UPDATE")
                   .setCancelable(false)
                   .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // do things
                    Intent i = new Intent(MainActivity.this,Slider.class);
                    startActivity(i);
                }
            });
            AlertDialog alert = builder.create();
            alert.show();
            break;
        }
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }
} 
```

当我打开此滑块活动并按下后退按钮时，没有任何反应。按下后退按钮应该做的是退出应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T04:18:36.043

只需添加这一行：

```
mLocalActivityManager.dispatchResume(); 
```

为我工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T04:54:20.463

通常，您不需要为后退按钮执行任何操作来终止您的活动。您需要做的*不是*覆盖**onBackButtonPressed()**或**onKeyDown()**。或者，如果您确实覆盖了**onKeyDown()**，那么除了返回 false 之外，不要对键码 KEYCODE_BACK 执行任何操作。

请注意，这只会终止*活动*，而不是*应用程序*。如果要退出整个应用程序，那就有点棘手了。让我们知道这是否是您想要做的，我将扩展这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:21:39.367

您可以使用以下方法覆盖后退按钮功能：

```
public void onBackPressed(){
  finish(); 
} 
```

所以它会完成你的应用程序。请记住，这不是最好的解决方案，您不应该在 on pause 方法中使用 finish()。

# javascript - 谷歌图表——添加“衰退条”

> ID：16017444
> 
> 赞同：2
> 
> 时间：2013-04-15T14:12:53.960
> 
> 标签：javascript, google-visualization

我有一个很好用的谷歌图表。要为该图表添加上下文，我需要在背景中添加一个系列，以直观地区分周末。适用于衰退期而不是周末的预期效果位于底部。是否可以使用 Google Visualization 创建这种效果？

![在此处输入图像描述](https://i.stack.imgur.com/9ashU.png)

这是图表：

```
 <div id="chart_div" style="width: 100%; height: 500px;"></div>
          <script type="text/javascript" src="https://www.google.com/jsapi"></script>
          <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);
            function drawChart() {
              var data = google.visualization.arrayToDataTable([
... DATA ...

              ]);
              var formatter = new google.visualization.NumberFormat(
                {prefix: '$', negativeColor: 'red', negativeParens: true});
              formatter.format(data, 1); // Apply formatter to second column
              formatter.format(data, 2); // Apply formatter to second column
              formatter.format(data, 3); // Apply formatter to second column

              var options = {isStacked: true, vAxis: {format: '$#,###'}, title:"MTS Revenue" };        
              var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
              chart.draw(data, options);
            }
          </script> 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ur4dw.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:25:35.483

是的，您可以使用[ComboChart](https://developers.google.com/chart/interactive/docs/gallery/combochart)完成此效果。

一般概念是制作堆积条形图，然后添加一个系列，在周末将图表的最大值显示为单独的列，并将该系列绘制为阶梯状图。这将使它看起来像某些系列的背景。

这是一个示例（复制粘贴到[Google Playground](http://code.google.com/apis/ajax/playground/?type=visualization#combo_chart)）：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua New Guinea', 'Rwanda', 'Average'],
    ['2004/05',  165,      938,         522,             998,           450,      0],
    ['2005/06',  135,      1120,        599,             1268,          288,      4000],
    ['2006/07',  157,      1167,        587,             807,           397,      0],
    ['2007/08',  139,      1110,        615,             968,           215,      4000],
    ['2008/09',  136,      691,         629,             1026,          366,      0]
  ]);

  // Create and draw the visualization.
  var ac = new google.visualization.ComboChart(document.getElementById('visualization'));
  ac.draw(data, {
    title : 'Monthly Coffee Production by Country',
    width: 600,
    height: 400,
    vAxis: {title: "Cups", minValue: 0, maxValue: 4000},
    hAxis: {title: "Month"},
    seriesType: "bars",
    isStacked: true,
    series: {5: {type: "steppedArea", lineWidth: 0, showInLegend: false}}
  });
} 
```

# xml - 经典 ASP 读取 XML 值

> ID：16017445
> 
> 赞同：0
> 
> 时间：2013-04-15T14:12:54.477
> 
> 标签：xml, asp-classic

我正在尝试使用谷歌地图 api 定义两点之间的行驶距离。它返回一个我加载到 XMLDOM 对象中的 XML。但是，我似乎无法在任何地方找到如何在孩子中获得孩子的价值......我已经阅读了 Microsoft 教程，但它没有显示如何从 XML 中检索值。

一个示例 XML 是：

```
<DistanceMatrixResponse>
<status>OK</status>
<origin_address>Gentsesteenweg 5, 9200 Dendermonde, België</origin_address>
<destination_address>Veerstraat 39, 9200 Dendermonde, België</destination_address>
<row>
    <element>
        <status>OK</status>
        <duration>
            <value>117</value>
            <text>2 min.</text>
        </duration>
        <distance>
            <value>1061</value>
            <text>1,1 km</text>
        </distance>
    </element>
</row>
</DistanceMatrixResponse> 
```

我的代码部分是：

```
Set XmlObj = Server.CreateObject("Microsoft.XMLHTTP")
strURL = "http://maps.googleapis.com/maps/api/distancematrix/xml?origins=" & dblFromLatitude & "+" & dblFromLongitude & "&destinations=" & dblToLatitude & "+" & dblToLongitude & "&mode=driving&language=" & strLanguage & "&sensor=false"
'DebugFile strURL
XmlObj.Open "POST", strURL, false
XmlObj.send      
strResponse = XmlObj.responseText
Set XmlObj = Nothing

Set xmlLongLat = Server.CreateObject("Microsoft.XMLDOM")
xmlLongLat.async=false
xmlLongLat.loadXML(strResponse)

If Not xmlLongLat.GetElementsByTagName("DistanceMatrixResponse")(0).ChildNodes(0).GetElementsByTagName("row")(0).ChildNodes(0).GetElementsByTagName("element")(0).ChildNodes(0).GetElementsByTagName("distance")(0).ChildNodes(0) Is Nothing Then

    dblDrivingDistance = Round(CDbl(Nz(xxmlLongLat.GetElementsByTagName("DistanceMatrixResponse")(0).ChildNodes(0).GetElementsByTagName("row")(0).ChildNodes(0).GetElementsByTagName("element")(0).ChildNodes(0).GetElementsByTagName("distance")(0).ChildNodes(0).NodeValue, 0))/1000,2)
Else 'xmlLongLat.GetElementsByTagName("element")(0) Is Nothing Then
    dblDrivingDistance = 0
    DebugFile "fgfzefzef"
End If 'xmlLongLat.GetElementsByTagName("element")(0) Is Nothing Then

Set xmlLongLat = Nothing 
```

我想获得“距离”的“价值”，但尽管尝试了一切，但我似乎并没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:05:17.707

```
xmlDoc.setProperty "SelectionLanguage", "XPath"
node = xmlDoc.selectSingleNode("/row/elelemnt/distance/value").innerText 
```

*或类似*的 - 使用 XPath

# java - 如何迭代freemarker中的向量？

> ID：16017452
> 
> 赞同：2
> 
> 时间：2013-04-15T14:13:14.273
> 
> 标签：java, freemarker

我有`Object`一个字符串向量作为 ftl 中的属性之一。只有当向量包含一些动态变量（在 ftl 中可用）时，我才必须使用`if`条件并输入特定块

我试图使用像这样的条件

```
<#if (aObject.bVector.contains(dVariable))> 
```

但这给出了一个*无效的引用异常*。 `bVector`在 java 层中填充了数据，但我不确定是否可以使用此方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:36:25.417

您可以使用

```
<#if aObject.bVector?seq_contains('value')> 
```

请注意，freemarker 不能直接访问成员：您需要有公共访问者。

aObject 类也需要标记为公共的。

资料来源：[FreeMarker 手册](http://freemarker.org/docs/ref_builtins_sequence.html)

编辑：确保 aObject.bVector 不为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:09:26.277

它应该是这样的`<#if aObject.bVector?seq_contains(dVariable?string)></#if>`

# android - 如何在 Android 上发布关注者和关注者的时间线？

> ID：16017454
> 
> 赞同：0
> 
> 时间：2013-04-15T14:13:15.840
> 
> 标签：android, twitter, twitter4j

如何在 android 上发布关注者和关注者的墙.. 以及如何在 android 中获取用户的关注者和关注者列表...任何人有任何想法..请与我分享..谢谢...

# jsf - 使用 MenuItem 的 PrimeFaces 导航

> ID：16017456
> 
> 赞同：4
> 
> 时间：2013-04-15T14:13:17.917
> 
> 标签：jsf, primefaces

我有一个这样的 PrimeFaces 3.4 菜单栏：

```
<h:form>
    <p:menubar>
        <p:submenu label="File">
            <p:submenu label="New">
                <p:menuitem value="Go" id="page1LinkID" action="#{navBean.goNav}">     
                    <f:param id="page1ParamID" name="pageViewID" value="Page1"/>
                </p:menuitem>
                <p:menuitem value="Other" url="#"/>
            </p:submenu>
        </p:submenu>
    </p:menubar>
</h:form> 
```

后备豆是这样的

```
@ManagedBean
@RequestScoped
public class navBean {

/**
 * Creates a new instance of navBean
 */
private String includedPage = "contentMain.xhtml";
public navBean() {
}
public String getPage(){
    return includedPage;
}
public void setPageName(){
    this.includedPage = includedPage;
}

public String goNav() {
   FacesContext context = FacesContext.getCurrentInstance();
   String selectedPageViewId = context.getExternalContext().getRequestParameterMap().get("pageViewId");
   if (selectedPageViewId.equalsIgnoreCase("page1")){
        includedPage = "test.xhtml";
    }
} 
```

问题是它不起作用，没有例外。我最初尝试将动作变成这样...将 goNav 更改为 void...nothing。

有任何想法吗？提前谢谢瑞克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:43:32.353

Primefaces menuitem 在这种情况下有一个 url 属性：

> url：单击 menuitem 时要导航的 URL。

如果您不使用“url”但想使用“action”，请记住您正在执行发布请求。

在这种情况下，您应该

1.  将 ?faces-redirect=true 添加到返回的字符串中，例如 "test.xhtml?faces-redirect=true"
2.  在您的菜单项中设置 ajax=false，例如

请参阅primefaces 的主要开发人员的这个[答案](http://forum.primefaces.org/viewtopic.php?f=3&t=7365)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:25:49.213

尝试这个

```
 public String goNav() {
       FacesContext context = FacesContext.getCurrentInstance();
       String selectedPageViewId = context.getExternalContext().getRequestParameterMap().get("pageViewId");
       if (selectedPageViewId.equalsIgnoreCase("page1")){
           includedPage = "test.xhtml?redirect=true";

       }
       return includedPage;
} 
```

# java - java中的数学战俘替代品

> ID：16017459
> 
> 赞同：2
> 
> 时间：2013-04-15T14:13:23.747
> 
> 标签：java, binary

我需要将任何数字 x 到 0 的 2 的幂相加。如果 x=6，则所需的总和为 2pow6+2pow5+.....1。虽然我总是可以使用 Math.pow 编写一个算法来减少到 0 - 这个函数在循环中的性能方面似乎是臭名昭著的。如果有人可以帮助使用移位二元运算符实现相同的目标，我将不胜感激 - 我听说它们比 pow 更有效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T14:15:30.800

2^n + 2^(n-1) + 2^(n-2) + ... + 2 + 1 = (2^(n+1) - 1) =`((1 << (n+1)) - 1)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T14:15:01.577

您不必在循环中计算它，您尝试计算的内容相当于

```
Math.pow(2, x+1) - 1 
```

更好的是，您可以像 Torquestomp 建议的那样计算它，这样会更快：

```
(1 << (x + 1)) - 1 
```

# javascript - $(this) div 中标题的 jQuery 选择器

> ID：16017464
> 
> 赞同：0
> 
> 时间：2013-04-15T14:13:43.437
> 
> 标签：javascript, jquery, dom

我需要在单击的特定 div 中选择并找到 H2 标记的 html 值，这是我现在正在尝试的，但无济于事：

单击 .square 时，我正在尝试运行：

```
 $(this).find('h2').html(); 
```

这就是 html 的样子：

```
<div class="square" id="2"><h2>Title</h2><h3>Comment</h3></div> 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:17:36.917

您的代码必须放置在点击处理程序中，如下所示：

```
$('.square').on('click', function() {
    alert($(this).find('h2').html());
} 
```

在点击处理程序之外，`this`指向`window`并`$(window).find('h2')`没有找到任何东西，因此会`.html()`产生`undefined`。

如果您`<div class="square">`是动态生成的，则需要将您的点击处理程序“挂钩”到不会从页面中消失的最接近的元素上。

```
$('#element_id').on('click', '.square', function() {
    alert($(this).find('h2').html());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:17:15.947

也许您必须在文档准备好后运行代码。

```
$(function() {
    $(".square").click(function() {
        console.log($(this).find('h2').html());
    });
}); 
```

`$(function() {});`是写的简短方法`$(document).ready(funciton() {});`。

此外，您的代码必须作为点击事件侦听器的回调放置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:21:24.350

一种更有效的方法是：

```
$('body').on('click', '.square', function(event) {
  var  html =  $(this).find('h2').html();
  console.log(html);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:25:12.427

您的代码完全正确。[您可能会在此处（或在fiddle](http://jsfiddle.net/rwgDF/)上）看到一个应用程序示例：

```
<script>
$(document).ready(function(){
    $("div#2").click(function(){
        var title = $(this).find('h2').html();
        $("span").text(title);
    });
});
</script>

<div class="square" id="1"><h2>I'll not work because my id is 1</h2></div>
<div class="square" id="2"><h2>Click me and you'll see me below on the span!</h2></div>
<span></span> 
```

# asp.net - 通过 AJAX 加载 UserControl，并回发到服务器

> ID：16017473
> 
> 赞同：2
> 
> 时间：2013-04-15T14:14:16.437
> 
> 标签：asp.net, ajax, dynamic, user-controls

**概括**

是否可以通过 AJAX 动态下载 UserControl 的内容，将其插入 HTML，将页面回发到服务器并让服务器能够处理动态加载的控件？

特别是我正在考虑多次这样做，以创建向页面中现有表结构“添加行”的能力。

**更多详情**

我已经编写了 ASP.NET 代码，该代码使用 .通过 AJAX 成功下载了 UserControl 的内容`<asp:ScriptManager>`，并将新下载的 HTML 放入当前文档的正确位置。

这很好，因为所有数据的保存也是通过 AJAX 进行的，所以我很容易构建数据以返回服务器。

部分问题在于，如果 UserControl 已作为原始页面的一部分加载，则其中的控件将被赋予 UniqueId，类似于...

```
ctl100$container$repeater$ctl100$myTextBox 
```

但是当通过 AJAX 路由加载到结构之外时，它会被赋予一个 UniqueId，类似于...

```
ctl100$myTextBox 
```

...结果（显然）服务器不知道如何处理它。

所以我想要做的是能够动态下载用户控件，并能够将其作为页面的一部分发布回来。

实现这一目标的标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:05:23.283

标准的 ASP.NET Web 窗体方法是使用 UpdatePanel 控件。有很多功能，如控件状态维护、事件处理、请求验证，这些功能要求必须在回发时呈现服务器控件并将其添加到页面的控件树中。

# sql-server-2008 - 从视图调用函数（在其他数据库上）

> ID：16017475
> 
> 赞同：0
> 
> 时间：2013-04-15T14:14:38.353
> 
> 标签：sql-server-2008

您好我正在尝试执行以下查询，但没有运气：

```
SELECT AA.Id, AA.ObjId, AA.NsId, AA.statusId, AA.LCID, AA.Title, AA.MessageBody_ClearText, AA.MessageBody_HTMLText, 
               AA.File1, AA.File2, AA.File3, AA.Status, AA.name, AA.createdate, AA.updatedate, AA.boneid, AA.main, AA.Sort, 
               BB.ID AS Expr1, BB.MainIDNum, BB.MessageID, BB.Message1, BB.Message2, BB.Message3, BB.MessageDate, 
               BB.AttachmentGUID1, BB.AttachmentGUID2, CC.MessageID AS Expr2, CC.Identification, CC.Viewed, CC.Deleted, CC.Id AS Expr3, 
               AA.FileName1, AA.FileName2, AA.FileName3
FROM  dbo.gnvw_ObjectsBones AS AA INNER JOIN
              --- XXX.dbo.MESSAGES AS BB ON BB.MessageID = AA.ObjId LEFT OUTER JOIN ---
               dbo.PersonalMessages AS CC ON CC.MessageID = BB.MessageID AND CC.Identification = BB.MainIDNum 
```

标记的行需要更改为函数调用，我有一个名为“GetMessages”的函数，它接受一个int“输入”，它必须是那个：“CC.Identification”，所以我试图替换它变成这样：

```
SELECT AA.Id, AA.ObjId, AA.NsId, AA.statusId, AA.LCID, AA.Title, AA.MessageBody_ClearText, AA.MessageBody_HTMLText, 
               AA.File1, AA.File2, AA.File3, AA.Status, AA.name, AA.createdate, AA.updatedate, AA.boneid, AA.main, AA.Sort, 
               BB.ID AS Expr1, BB.MainIDNum, BB.MessageID, BB.Message1, BB.Message2, BB.Message3, BB.MessageDate, 
               BB.AttachmentGUID1, BB.AttachmentGUID2, CC.MessageID AS Expr2, CC.Identification, CC.Viewed, CC.Deleted, CC.Id AS Expr3, 
               AA.FileName1, AA.FileName2, AA.FileName3
FROM  dbo.gnvw_Data_PersonalMessages_ObjectsBones AS AA INNER JOIN
               XXX.dbo.GetMessages(CC.Identification) AS BB ON BB.MessageID = AA.ObjId LEFT OUTER JOIN
               dbo.PersonalMessages AS CC ON CC.MessageID = BB.MessageID AND CC.Identification = BB.MainIDNum 
```

我也尝试了其他解决方案，但都没有奏效，这里有人看到问题了吗？这是我从运行该“解决方案”中得到的错误：

'无法绑定多部分标识符“CC.Identification”。'

和，

'无效的列名'ID'。' SQL 不是我的强项，我很乐意听到任何解决方案，希望我解释正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:21:31.703

当需要加入表值函数时，分别使用`CROSS APPLY`/`OUTER APPLY`而不是`INNER`/`LEFT`加入。

```
...
FROM  dbo.gnvw_Data_PersonalMessages_ObjectsBones AS AA 

CROSS APPLY XXX.dbo.GetMessages(CC.Identification) AS BB
....
WHERE BB.MessageID = AA.ObjID 
```

**更新** 我刚刚注意到连接条件 for`dbo.AgamUsersPersonalMessages AS CC`仅指`BB`，而连接条件 for`BB`仅取决于`CC`. 这是不正确的，你仍然会得到错误。不知道你想得到什么，我无法给你解决方案；你需要自己弄清楚加入条件......

# cocoa - 从沙盒可可应用程序向最前面的应用程序发送击键

> ID：16017478
> 
> 赞同：13
> 
> 时间：2013-04-15T14:14:50.097
> 
> 标签：cocoa, sandbox, simulate, keystrokes

我需要从我的 cooca 应用程序将击键发送到最前面的应用程序。

我已经使用`CGEventCreateKeyboardEvent()`and为它提供了工作代码`AXUIElementPostKeyboardEvent()`，但它仅在应用程序未沙盒化时才有效。

我已经在谷歌上搜索了相同的内容，但没有找到任何可行的解决方案。

我看到一个文本应用程序和其他几个人在沙盒环境中做同样的事情，所以我想知道，如果有人帮我弄清楚，aText.app 和其他人如何能够在沙盒环境中发送击键。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:44:02.513

这实际上是可能的。我在这里提供了一个示例应用程序 - [GitHub 上的 SendKey](https://github.com/ericgorr/SendKey.git)

我走了一条简单的路，从一个简单的 AppleScript 开始：

```
delay 5

tell application "System Events"
    repeat 10 times
        keystroke "#"
    end repeat
end tell 
```

脚本中的“延迟”只是让我有足够的时间让文本编辑器成为最前面的应用程序。我建议从运行这个脚本开始，看看它做了什么。

然后，我使用默认的应用程序模板创建了一个 Xcode 项目并写道：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSString*       scriptPath  = [[NSBundle mainBundle] pathForResource:@"sendkey" ofType:@"scpt"];
    NSURL*          scriptURL   = [NSURL fileURLWithPath:scriptPath];
    NSDictionary*   errors;
    NSAppleScript*  script      = [[NSAppleScript alloc] initWithContentsOfURL:scriptURL error:&errors];

    NSLog( @"%@", errors );

    [script executeAndReturnError:&errors];

    NSLog( @"%@", errors );
} 
```

我在没有打开沙盒的情况下对此进行了测试，以验证它是否有效。然后我打开沙盒，当然，它坏了。但是，幸运的是，有办法解决这个问题。目前，Apple 提供名为[com.apple.security.temporary-exception.apple-events](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AppSandboxTemporaryExceptionEntitlements.html)的临时权利。而且，您可以请求为“com.apple.systemevents”授予例外。这是我的权利文件的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"
   "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>com.apple.security.temporary-exception.apple-events</key>
    <array>
      <string>com.apple.systemevents</string>
    </array>
    <key>com.apple.security.app-sandbox</key>
    <true />
  </dict>
</plist> 
```

一旦我将此权利添加到我的沙盒应用程序并对其进行签名，它就会再次按预期工作。

现在，如果您想发送其他密钥，这个问题和答案将演示如何动态构建您的脚本 - 将[变量传递给 applescript](https://stackoverflow.com/questions/8917050/passing-variables-to-an-applescript)。

当然，一旦你完成了所有这些工作，你可能会转向 NSAppleEventDescriptor 和相关的类来在代码中构建事件，但我没有使用过这种技术。

请注意，Apple 确实建议您在使用临时授权时执行以下操作：

> 如果您现在选择不将您的应用程序沙箱化或使用临时异常权利，请使用 Apple 的错误报告系统让 Apple 了解您遇到的问题。Apple 在开发 OS X 平台时会考虑功能请求。此外，请务必使用 iTunes Connect 中的 Review Notes 字段来解释为什么需要例外。

# eclipse - Eclipse IDE 是否抱怨 plugin.xml 中处理程序的重复条目？

> ID：16017480
> 
> 赞同：0
> 
> 时间：2013-04-15T14:14:52.483
> 
> 标签：eclipse

我错误地在我的 plugin.xml 中有重复的条目。但是eclipse IDE没有抱怨。不应该吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:34:16.897

扩展点的语义各不相同。Eclipse 仅在设计时对扩展数据执行基本数据类型验证。扩展点处理程序通常在运行时执行进一步验证，但验证的深度因扩展点而异。在运行时检测到的问题将在错误日志中报告。

# javascript - div更改后的WayPoint Refriring

> ID：16017482
> 
> 赞同：0
> 
> 时间：2013-04-15T14:15:00.690
> 
> 标签：javascript, jquery, infinite-scroll, jquery-waypoints

```
<div class="content-book-row-container">
  <div id="content-book-container-inject">
   <div class="content-book-row-container">when im read im read</div>
   <div class="content-book-row-container">when im read im read</div>
   <div class="content-book-row-container">when im read im read</div>
   <div class="content-book-row-container">when im read im read</div>
  </div>
 <div id="content-book-row-footer"></div>
</div> 
```

当页脚航点触发时，即使通过的航点行已通过视图，它们都将被重新触发/再次触发。

如何在不调用所有以前的航点的情况下插入新的航点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:05:40.717

这是航点开发人员的回复，我想我会在这里分享。

对于视觉代码问题，文字可能很棘手，但我将尝试编写您所描述的内容：

```
<div class="wrapper">
  <div class="thing-container">
    <div class="injected-thing">...</div>
  </div>
  <div class="footer"></div>
</div> 
```

您的页脚航点看起来像这样：

```
$('.footer').waypoint(function(direction) {
  injectNewThing();
  $('.injected-thing').waypoint(function() {
    alert('reached');
  });
}); 
```

为了简单起见，假设 injectNewThing 只插入了一个注入的东西：

```
<div class="wrapper">
  <div class="thing-container">
    <div class="injected-thing">...</div>
    <div class="injected-thing">...</div>
  </div>
  <div class="footer"></div>
</div> 
```

问题在于下一行：

```
$('.injected-thing').waypoint(function() {
  alert('reached');
}); 
```

目标 .injected-thing 包括所有这些。但你真正想要的只是新航路点。我的建议是为您已经触发航点功能的“事物”添加一个类，然后针对没有该类的项目：

```
$('.footer').waypoint(function(direction) {
  injectNewThing();
  $('.injected-thing').not('.reached').waypoint(function() {
    $(this).addClass('reached');
    alert('reached');
  });
}); 
```

让我知道这是否没有意义，或者我是否错误地描述了这种情况。

# c# - 在页面生命周期中，我们何时可以分配母版 页？

> ID：16017485
> 
> 赞同：4
> 
> 时间：2013-04-15T14:15:11.937
> 
> 标签：c#, asp.net, master-pages, page-lifecycle

我知道 ViewState 在 LoadViewSate 方法中的 InitComplete 和 Preload 事件之间可用。同样，我想知道我们可以在哪个页面生命周期事件中为特定页面分配母版页？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:17:55.653

> 由于在页面处理的初始化阶段合并了母版页和内容页，因此在此之前必须分配母版页。通常，您在 PreInit 阶段动态分配母版页

`Page PreInit`活动现场

```
void Page_PreInit(Object sender, EventArgs e)
{
    this.MasterPageFile = "~/MyMaster.master";
} 
```

阅读[以编程方式使用 ASP.NET 母版页](http://msdn.microsoft.com/en-us/library/c8y19k6h.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T14:23:10.530

来自：[ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-IN/library/ms178472%28v=vs.100%29.aspx)

页面事件

典型用途

**预初始化**

在启动阶段完成后和初始化阶段开始之前引发。将此事件用于以下情况：

检查 IsPostBack 属性以确定这是否是第一次处理页面。此时还设置了 IsCallback 和 IsCrossPagePostBack 属性。

*   创建或重新创建动态控件。
*   动态设置母版页。
*   动态设置 Theme 属性。
*   读取或设置配置文件属性值。

**注意** 如果请求是回发，则控件的值尚未从视图状态中恢复。如果您在此阶段设置控件属性，则其值可能会在下一个事件中被覆盖。

来自：[动态附加母版页](http://msdn.microsoft.com/en-in/library/c8y19k6h%28v=vs.100%29.aspx)

除了以声明方式（在 中*`@ Page directive or in the configuration file`*）指定母版页外，您还可以将母版页动态附加到内容页。由于在页面处理的初始化阶段合并了母版页和内容页，因此在此之前必须分配母版页。通常，您在[PreInit](http://msdn.microsoft.com/en-in/library/system.web.ui.page.preinit%28v=vs.100%29.aspx)阶段动态分配母版页，如下例所示：

```
void Page_PreInit(Object sender, EventArgs e)
{
    this.MasterPageFile = "~/DefaultMaster.master";
} 
```

**编辑：**

*来源：* [ASP.NET 母版页 - 母版页如何工作](http://msdn.microsoft.com/en-in/library/wtxbf3hh%28v=vs.100%29.aspx#HowMasterPagesWork)
您也可以使用 @Page 指令来指定母版页。

```
<% @ Page Language="C#" MasterPageFile="~/Master.master" Title="Content Page 1" %> 
```

# git - 如何在 git 项目中确定 git 服务器的 url？

> ID：16017487
> 
> 赞同：1
> 
> 时间：2013-04-15T14:15:22.643
> 
> 标签：git

我只需要服务器部分，例如，如果我的项目是 on `git@192.168.1.1:project.git`，我想要`git@192.168.1.1`

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:34:06.077

以下 bash 命令为您提供了远程调用的服务器部分`origin`：

```
echo `git config --get "remote.origin.url"` | sed "s|\([^:]*\):.*|\1|" 
```

如果您不确定当前分支的远程是否总是称为 origin，您可以执行以下命令来查找当前分支的远程：

```
git config --get "branch.master.remote" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:48:39.347

给定一个 url，你只需[解析 url](https://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex)。

以下是[如何找到您自己的 repo 遥控器之一的 url](https://stackoverflow.com/questions/4089430/how-can-i-determine-the-url-that-a-local-git-repo-was-originally-cloned-from?lq=1)

如果你的意思是你想为你自己的 repo 找到“the”url，那是行不通的。这完全取决于是否有人在特定地址启动*了服务器；*没有什么说不能有多个——你可以在没有任何服务器的情况下使用“文件：”网址。

# c++ - 什么是 C++11 随机分布？

> ID：16017494
> 
> 赞同：8
> 
> 时间：2013-04-15T14:15:33.003
> 
> 标签：c++, random, c++11

我正在尝试实现以下类：

```
typedef std::mt19937 Engine;

class Interval 
{
public:
    double upperBoundary;
    double lowerBoundary;
    double generateUniformRandomNumber(Engine& engine);
}; 
```

我希望该类在多线程环境中工作。每个线程都有自己的`Engine`对象实例，并且它将传递`Engine`给任何具有随机行为的类的对象。

为了以 C++11 的方式统一生成随机数， 的实现`generateUniformRandomNumber`必须是这样的：

```
uniform_real_distribution<double> distribution_; // private member of Interval

double Interval::generateUniformRandomNumber(Engine& engine)
{
    return distribution_(engine); 
} 
```

问题是我不了解 C++11 发行版。我知道 C++11 随机数引擎可以是非常大的对象（几千字节），但是分布呢？起初我认为分布只是简单的函子，其中`operator()`是一个`pure const`函数，但似乎既不是`pure`也不是`const`。根据[参考资料](http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution/reset)，每个分发实例都有一个`reset()`成员函数。这意味着它有一个潜在的大内部状态，或者可能是一个缓存。

我的问题是：

1.  发行版有内部状态吗？如果是，为什么？该标准是否说明了该州的规模？

2.  像我一样进行实施是个好主意吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:36:58.067

一个分布可能非常好并且通常会有一些状态。该标准在这里没有给出任何限制。我可以想到可能使用状态的几个原因：

1.  随机数分布通常有一些参数来配置它。例如，正态分布具有均值和方差参数。这些是其状态的一部分，因为它们必须在调用之间保持不变。

2.  分发是根据其他一些分发来实现的。你真的可以把它想象成一个更复杂的参数。例如，我的[beta 发行版](https://gist.github.com/sftrabbit/5068941)实现包含两个 gamma 发行版，每个发行版都有自己的配置。

3.  分布可能会随着时间而改变。没有什么可以说分发的重复调用需要是独立的。这就是`reset`成员函数的用武之地。大多数发行版都有独立的调用`operator()`，因此该`reset`函数实际上什么都不做（它的定义是空的）。但是，如果您的调用是依赖的，`reset`则应将分发恢复到下一个调用独立的状态。

您的实现似乎很好。A`uniform_real_distribution<double>`不太可能拥有比您构造它的参数更多的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:35:02.587

查看[RandomNumberDistribution 模板策略](http://en.cppreference.com/w/cpp/concept/RandomNumberDistribution)的文档...

**`reset()`：**

> 重置分发对象的内部状态。调用此函数后，分发对象上对 operator() 的下一次调用将不依赖于先前对 operator() 的调用。

这意味着调用`operator()`可以更改影响后续调用的状态`operator()`。这就是`reset()`存在和`operator()`不存在的原因`const`。

`uniform_real_distribution`应该是一个小的简单仿函数，就像你说的。它很可能只包含`Real`构建它的 2 s，没有其他任何东西。并且`reset()`不应该为那个做任何事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T14:51:38.110

是的，发行版可以有内部状态。它们通常很小，但如果您担心尺寸，请检查一下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T15:48:04.383

状态规范`reset()`：

> d 的后续使用不依赖于任何引擎在调用重置之前产生的值。

这意味着通常调用`operator()`可能取决于先前调用`operator()`. 也就是说，分发可以缓存或以其他方式依赖于先前的引擎结果。

例如，伯努利分布可能只需要一个位来产生结果，而给定的引擎一次提供 32 位，因此该分布可能会缓存 32 位，并且在生成 32 个值之前不会再次调用任何引擎。

另一个例子是一个分布（我忘记了），其中通用算法自然地一次产生两个值，因此分布可能会保存第二个值以供下次调用。

所以是的，发行版可以有内部状态。该标准没有对这种状态的大小提出要求。

如果您问是否可以在线程之间共享分布，那么不，这不是一个好主意。一方面，这样做会导致数据争用，并导致未定义的行为，除非您添加同步或使分发为 const（即使您可以通过标准库的实现来做到这一点，也不是可移植的）。其次，该标准仅在您以特定方式使用发行版和引擎时做出保证，并且在多个引擎之间共享发行版不是这种方式。共享分布实际上不太可能产生不良数据，但 IMO 不这样做仍然是个好主意。相反，您可能让每个线程都保留自己的引擎和自己的分布。

# android - 与 Map api v2 一起使用时，SlidingMenu 显示 blsck

> ID：16017498
> 
> 赞同：0
> 
> 时间：2013-04-15T14:15:45.663
> 
> 标签：android, google-maps-api-2, slidingmenu

我开发了一个应用程序。在其中，我使用了 a`fragment`来显示`Map`. 布局只有一个顶部`title bar`和一个`fragment`. 在`sliding menu` `layout`我有`title bar`一些`buttons`。我主要展示`On click`了.`button``layout``menu`

问题是`menu`没有出现。而不是`menu`只有黑色，但我得到`title bar`了`menu`。所以我认为问题是由于`map`黑色区域的高度与`map`

我用[它](https://github.com/jfeinstein10/SlidingMenu)来显示滑动菜单。

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:24:46.927

这是一个已知的问题。

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4659](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4659)
[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4639](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4639)

评论中有解决方法。也许有些事情会为你解决。

# jquery - Jquery Datepickler 一周只启用几天

> ID：16017499
> 
> 赞同：1
> 
> 时间：2013-04-15T14:15:48.753
> 
> 标签：jquery, jquery-ui

我有以下代码`Jquery UI Datepicker`。如何禁用特定于一周中某些天的日期？即我只想显示从今天开始的几天，并且只想 `Monday and Friday`在一周内启用，其余的日子应该被禁用。

标记：

```
<input id="datepicker" type="text"> 
```

代码

```
$(function () {
   var date1 = new Date;
   date1.setHours(0, 0, 0, 0);
   date1.setDate(10);
   var date2 = new Date;
   date2.setHours(0, 0, 0, 0);
   date2.setDate(23);
   $("#datepicker").datepicker({
       beforeShowDay: function (date) {
           return [date < date1 || date > date2, ""];
       }
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:22:45.027

在 beforeshowday 函数中给出具体的天数

```
 $(function() {
    $("#datepic").datepicker(
    { beforeShowDay: function(day) {
        var day = day.getDay();
        if (day == 2 || day == 5) {
            return [false, "somecssclass"]
        } else {
            return [true, "someothercssclass"]
        }
    }
    });
}); 
```

# linux - 如何查看符号链接的完整绝对路径

> ID：16017500
> 
> 赞同：163
> 
> 时间：2013-04-15T14:15:50.583
> 
> 标签：linux, symlink

当我使用`ls -la symlinkName`或`stat symlinkName`不显示所有路径时（例如`../../../one/two/file.txt`）

显示完整路径的 linux 命令是什么？

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2013-04-15T14:32:37.133

`realpath`并非在所有 linux 风格上都可用，但`readlink`应该可用。

```
readlink -f symlinkName 
```

以上应该可以解决问题。

或者，如果您没有安装上述任何一个，如果您安装了 python 2.6（或更高版本），则可以执行以下操作

```
python -c 'import os.path; print(os.path.realpath("symlinkName"))' 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-15T14:26:48.400

`realpath <path to the symlink file>`应该做的伎俩。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-04-27T09:48:53.190

Unix风味->`ll symLinkName`

操作系统->`readlink symLinkName`

区别在于第一种方式会以闪烁的方式显示符号链接路径，而第二种方式只会在控制台上回显它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-27T04:23:27.833

查看信息的另一种方法是`stat`显示更多信息的命令。`stat ~/.ssh`我的机器显示屏上的命令

```
File: ‘/home/sumon/.ssh’ -> ‘/home/sumon/ssh-keys/.ssh.personal’
  Size: 34          Blocks: 0          IO Block: 4096   symbolic link
Device: 801h/2049d  Inode: 25297409    Links: 1
Access: (0777/lrwxrwxrwx)  Uid: ( 1000/   sumon)   Gid: ( 1000/   sumon)
Access: 2017-09-26 16:41:18.985423932 +0600
Modify: 2017-09-25 15:48:07.880104043 +0600
Change: 2017-09-25 15:48:07.880104043 +0600
 Birth: - 
```

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-06T15:13:38.317

您可以使用`awk`with`system`调用来获得具有完整符号链接路径`readlink`的等效输出。`ls`例如：

```
ls | awk '{printf("%s ->", $1); system("readlink -f " $1)}' 
```

将显示例如

```
thin_repair ->/home/user/workspace/boot/usr/bin/pdata_tools
thin_restore ->/home/user/workspace/boot/usr/bin/pdata_tools
thin_rmap ->/home/user/workspace/boot/usr/bin/pdata_tools
thin_trim ->/home/user/workspace/boot/usr/bin/pdata_tools
touch ->/home/user/workspace/boot/usr/bin/busybox
true ->/home/user/workspace/boot/usr/bin/busybox 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-15T11:38:02.247

在我的 Mac 上，我有以下内容：

例如创建指向目录的符号链接：`ln -s /Users/test/play/game game`

然后，如果我使用符号链接转到目录：`cd game` 如果我发出 cmd: pwd，那么您所在的实际目录是：`~`

如果我决定要实际更改为目录：`/Users/test/play/game`由于某种原因，我的 .bash_profile 设置中有一个别名：

```
alias cdp='cd -P $(basename `pwd`)' 
```

使用上面的`cdp`别名后，跟`pwd`命令当前目录是：`/Users/test/play/game`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-04-01T20:59:53.680

在 macOS Catalina 中尝试 -

```
readlink -n `which <command>` 
```

示例输入 -

```
readlink -n `which adb` 
```

示例输出 -

```
/usr/local/Caskroom/android-platform-tools/31.0.1,d027ce0f9f214a4bd575a73786b44d8ccf7e7516/platform-tools/adb 
```

# excel - 如何用excel VBA round（）四舍五入？

> ID：16017501
> 
> 赞同：11
> 
> 时间：2013-04-15T14:15:55.943
> 
> 标签：excel, vba

我有以下数据：

```
cell(1,1) = 2878.75
cell(1,2) = $31.10
cell(2,1) = $89,529.13 
```

但是，当我尝试使用`round(cells(1,1).value*cells(1,2).value),2)`时，结果不匹配`cell(2,1)`。我认为这与舍入问题有关，但我只是想知道是否有可能`round()`正常行事。也就是说，对于`value > 0.5`，四舍五入。而对于`value < 0.5`，向下取整？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T14:24:18.477

VBA 使用[银行家四舍五入](http://en.wikipedia.org/wiki/Rounding#Round_half_to_even)来补偿总是向上或向下舍入 0.5 的偏差；你可以改为；

```
WorksheetFunction.Round(cells(1,1).value * cells(1,2).value, 2) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-14T04:41:05.820

试试这个功能，双舍入就OK了

```
'---------------Start -------------
Function Round_Up(ByVal d As Double) As Integer
    Dim result As Integer
    result = Math.Round(d)
    If result >= d Then
        Round_Up = result
    Else
        Round_Up = result + 1
    End If
End Function
'-----------------End---------------- 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-14T14:28:52.377

如果要四舍五入，请使用半调整。将 0.5 添加到要四舍五入的数字并使用 INT() 函数。

答案 = INT(x + 0.5)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-15T14:23:21.043

试试 RoundUp 函数：

```
Dim i As Double

i = Application.WorksheetFunction.RoundUp(Cells(1, 1).Value * Cells(1, 2).Value, 2) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-06-20T09:47:20.077

我正在介绍两个要在 vba 中使用的自定义库函数，它们将用于舍入双精度值而不是使用 WorkSheetFunction.RoundDown 和 WorkSheetFunction.RoundUp

```
Function RDown(Amount As Double, digits As Integer) As Double
    RDown = Int((Amount + (1 / (10 ^ (digits + 1)))) * (10 ^ digits)) / (10 ^ digits)
End Function

Function RUp(Amount As Double, digits As Integer) As Double
    RUp = RDown(Amount + (5 / (10 ^ (digits + 1))), digits)
End Function 
```

因此函数 Rdown(2878.75 * 31.1,2) 将返回 899529.12 并且函数 RUp(2878.75 * 31.1,2) 将返回 899529.13 而函数 Rdown(2878.75 * 31.1,-3) 将返回 89000 并且函数 RUp(2878.75 * 31.1,- 3) 将返回 90000

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-26T14:01:09.673

我有一个问题，我只需要四舍五入，而这些答案对于我必须如何运行我的代码不起作用，所以我使用了不同的方法。INT 函数向负数舍入（4.2 变为 4，-4.2 变为 -5）因此，我将函数更改为负数，应用 INT 函数，然后通过在前后乘以 -1 将其返回为正数

```
Count = -1 * (int(-1 * x)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-18T16:10:48.370

我的建议等于 Worksheetfunction.RoundUp

```
Function RoundUp(ByVal Number As Double, Optional ByVal Digits As Integer = 0) As Double
    Dim TempNumber As Double, Mantissa As Double

    'If Digits is minor than zero assign to zero.
    If Digits < 0 Then Digits = 0

    'Get number for x digits
    TempNumber = Number * (10 ^ Digits)

    'Get Mantisa for x digits
    Mantissa = TempNumber - Int(TempNumber)

    'If mantisa is not zero, get integer part of TempNumber and increment for 1.
    'If mantisa is zero then we reach the total number of digits of the mantissa of the original number
    If Mantissa <> 0 Then
        RoundUp = (Int(TempNumber) + 1) / (10 ^ Digits)
    Else
        RoundUp = Number
    End If
End Function 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-01T15:10:27.297

这对我有用

```
Function round_Up_To_Int(n As Double)
    If Math.Round(n) = n Or Math.Round(n) = 0 Then
        round_Up_To_Int = Math.Round(n)
    Else: round_Up_To_Int = Math.Round(n + 0.5)
    End If
End Function 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-14T10:00:17.553

使用来自 ShamBhagwat 的函数“RDown”和“RUp”，并创建了另一个返回圆形部分的函数（无需输入“数字”）

```
Function RoundDown(a As Double, digits As Integer) As Double
    RoundDown = Int((a + (1 / (10 ^ (digits + 1)))) * (10 ^ digits)) / (10 ^ digits)
End Function

Function RoundUp(a As Double, digits As Integer) As Double
    RoundUp = RoundDown(a + (5 / (10 ^ (digits + 1))), digits)
End Function

Function RDownAuto(a As Double) As Double
    Dim i As Integer
    For i = 0 To 17
        If Abs(a * 10) > WorksheetFunction.Power(10, -(i - 1)) Then
            If a > 0 Then
                RDownAuto = RoundDown(a, i)
            Else
                RDownAuto = RoundUp(a, i)
            End If
        Exit Function
        End If
    Next
End Function 
```

输出将是：

```
RDownAuto(458.067)=458
RDownAuto(10.11)=10
RDownAuto(0.85)=0.8
RDownAuto(0.0052)=0.005
RDownAuto(-458.067)=-458
RDownAuto(-10.11)=-10
RDownAuto(-0.85)=-0.8
RDownAuto(-0.0052)=-0.005 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-22T05:16:31.783

Math.Round 使用银行家四舍五入，如果要四舍五入的数字正好在中间，则将四舍五入到最接近的偶数。

简单的解决方案，使用 Worksheetfunction.Round()。如果它在边缘，那将四舍五入。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-23T00:01:02.877

这是一个示例 j 是您要四舍五入的值。

```
Dim i As Integer
Dim ii, j As Double

j = 27.11
i = (j) ' i is an integer and truncates the decimal

ii = (j) ' ii retains the decimal

If ii - i > 0 Then i = i + 1 
```

如果余数大于 0，则将其四舍五入，很简单。在 1.5 时，它会自动舍入为 2，因此它会小于 0。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-13T16:11:23.293

这里的答案有点遍及整个地图，并尝试完成几件不同的事情。我将向您指出我最近给出的讨论强制向上舍入[的答案](https://stackoverflow.com/a/58331460/9291494)- 即根本不向零舍入。这里的答案涵盖了不同类型的四舍五入，例如，ana 的答案是强制四舍五入。

需要明确的是，最初的问题是如何“正常四舍五入”——所以，“对于值 > 0.5，向上舍入。对于值 < 0.5，向下舍入”。

我链接到那里的答案讨论了强制四舍五入，您有时也想这样做。Excel 的普通 ROUND 使用[*round-half-up*](https://www.eetimes.com/document.asp?doc_id=1274485#)，它的 ROUNDUP 使用*round-off-from-zero*。所以这里有两个模仿VBA中ROUNDUP的函数，第二个只取整为整数。

```
Function RoundUpVBA(InputDbl As Double, Digits As Integer) As Double

    If InputDbl >= O Then
        If InputDbl = Round(InputDbl, Digits) Then RoundUpVBA = InputDbl Else RoundUpVBA = Round(InputDbl + 0.5 / (10 ^ Digits), Digits)
    Else
        If InputDbl = Round(InputDbl, Digits) Then RoundUpVBA = InputDbl Else RoundUpVBA = Round(InputDbl - 0.5 / (10 ^ Digits), Digits)
    End If

End Function 
```

或者：

```
Function RoundUpToWhole(InputDbl As Double) As Integer

    Dim TruncatedDbl As Double

    TruncatedDbl = Fix(InputDbl)

    If TruncatedDbl <> InputDbl Then
        If TruncatedDbl >= 0 Then RoundUpToWhole = TruncatedDbl + 1 Else RoundUpToWhole = TruncatedDbl - 1
    Else
        RoundUpToWhole = TruncatedDbl
    End If

End Function 
```

上面的一些答案涵盖了类似的领域，但这里的答案是独立的。我还在我的另一个答案中讨论了一些单行快速而肮脏的方法来总结。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-06T05:15:01.583

我发现以下功能就足够了：

```
'
' Round Up to the given number of digits
'
Function RoundUp(x As Double, digits As Integer) As Double

    If x = Round(x, digits) Then
        RoundUp = x
    Else
        RoundUp = Round(x + 0.5 / (10 ^ digits), digits)
    End If

End Function 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-05-18T14:02:02.957

这是我做的一个。它不使用我喜欢的第二个变量。

```
 Points = Len(Cells(1, i)) * 1.2
        If Round(Points) >= Points Then
            Points = Round(Points)
        Else: Points = Round(Points) + 1
        End If 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2016-01-05T06:45:05.900

我自己有一个解决方法：

```
 'G = Maximum amount of characters for width of comment cell
    G = 100
    'CommentX
    If THISWB.Sheets("Source").Cells(i, CommentColumn).Value = "" Then
        CommentX = ""
     Else
        CommentArray = Split(THISWB.Sheets("Source").Cells(i, CommentColumn).Value, Chr(10)) 'splits on alt + enter
        DeliverableComment = "Available"
    End If
                        If CommentX <> "" Then

                            'this loops for each newline in a cell (alt+enter in cell)
                            For CommentPart = 0 To UBound(CommentArray)
                            'format comment to max G characters long
                                LASTSPACE = 0
                                LASTSPACE2 = 0
                                    If Len(CommentArray(CommentPart)) > G Then

                                        'find last space in G length character string to make sure the line ends with a whole word and the new line starts with a whole word
                                        Do Until LASTSPACE2 >= Len(CommentArray(CommentPart))
                                            If CommentPart = 0 And LASTSPACE2 = 0 And LASTSPACE = 0 Then
                                                LASTSPACE = WorksheetFunction.Find("þ", WorksheetFunction.Substitute(Left(CommentArray(CommentPart), G), " ", "þ", (Len(Left(CommentArray(CommentPart), G)) - Len(WorksheetFunction.Substitute(Left(CommentArray(CommentPart), G), " ", "")))))
                                                ActiveCell.AddComment Left(CommentArray(CommentPart), LASTSPACE)
                                            Else
                                                If LASTSPACE2 = 0 Then
                                                   LASTSPACE = WorksheetFunction.Find("þ", WorksheetFunction.Substitute(Left(CommentArray(CommentPart), G), " ", "þ", (Len(Left(CommentArray(CommentPart), G)) - Len(WorksheetFunction.Substitute(Left(CommentArray(CommentPart), G), " ", "")))))
                                                   ActiveCell.Comment.Text Text:=ActiveCell.Comment.Text & vbNewLine & Left(CommentArray(CommentPart), LASTSPACE)
                                                Else
                                                   If Len(Mid(CommentArray(CommentPart), LASTSPACE2)) < G Then
                                                       LASTSPACE = Len(Mid(CommentArray(CommentPart), LASTSPACE2))
                                                       ActiveCell.Comment.Text Text:=ActiveCell.Comment.Text & vbNewLine & Mid(CommentArray(CommentPart), LASTSPACE2 - 1, LASTSPACE)
                                                   Else
                                                       LASTSPACE = WorksheetFunction.Find("þ", WorksheetFunction.Substitute(Mid(CommentArray(CommentPart), LASTSPACE2, G), " ", "þ", (Len(Mid(CommentArray(CommentPart), LASTSPACE2, G)) - Len(WorksheetFunction.Substitute(Mid(CommentArray(CommentPart), LASTSPACE2, G), " ", "")))))
                                                       ActiveCell.Comment.Text Text:=ActiveCell.Comment.Text & vbNewLine & Mid(CommentArray(CommentPart), LASTSPACE2 - 1, LASTSPACE)
                                                   End If
                                                End If
                                            End If
                                            LASTSPACE2 = LASTSPACE + LASTSPACE2 + 1
                                        Loop
                                    Else
                                        If CommentPart = 0 And LASTSPACE2 = 0 And LASTSPACE = 0 Then
                                          ActiveCell.AddComment CommentArray(CommentPart)
                                        Else
                                          ActiveCell.Comment.Text Text:=ActiveCell.Comment.Text & vbNewLine & CommentArray(CommentPart)
                                        End If
                                    End If

                            Next CommentPart
                            ActiveCell.Comment.Shape.TextFrame.AutoSize = True

                        End If 
```

随时感谢我。对我来说就像一个魅力，自动调整大小功能也有效！

# java - ArrayList.contains() 方法不起作用

> ID：16017504
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:16:07.053
> 
> 标签：java, arrays, arraylist, contains

我有一个`ArrayList`ordineDopoModifica

```
public static ArrayList<Persona> ordineDopoModifica = new ArrayList<Persona>(); 
```

这是角色类：

```
class Persona {

public String nome;
public String prezzo;
public String ingredienti;
public String codp;
public byte[] immagine;} 
```

现在我想说一下 int 是否包含在 ordineDopoModifica 中...

这就是我现在所做的：

```
boolean c=sceltacibo.ordineDopoModifica.contains(chiave); 
```

这是我重写的 equals 方法：

```
@Override
public boolean equals(Object obj) {
    if (obj == null) {
      return false;
    }

    if (obj instanceof Persona) {
        Persona p = (Persona) obj;
        return codp.equals(p.codp);
    } 

    else return false;

  } 
```

但`boolean c=sceltacibo.ordineDopoModifica.contains(chiave);`不起作用 - 它总是返回 false，即使我确定`chiave`在`ArrayList`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:19:21.567

> 现在我想说一个 int 是否包含在我的 arrayList ordineDopoModifica 中...

您正在检查是否`ArrayList<Persona> ordineDopoModifica`包含`int`. 它没有，它只包含`Persona`对象，因此它总是返回 false。

更准确地说，`equals(Object obj)`将在这里失败：

```
if (obj instanceof Persona) {
    Persona p = (Persona) obj;
    return codp.equals(p.codp);
} else 
    return false; 
```

这是因为 an`Integer`不是 的实例`Persona`。

# java - 在现有线程的未捕获异常处理程序中启动新线程

> ID：16017505
> 
> 赞同：0
> 
> 时间：2013-04-15T14:16:07.227
> 
> 标签：java, multithreading, uncaughtexceptionhandler

如果抛出未捕获的异常，并且您想通过重新启动与刚刚抛出异常的线程相同的线程来恢复（例如，JMS 连接丢失），最简单的方法是什么？

该类从 Thread 扩展而来，并且该线程具有 UncaughtExceptionHandler。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:32:02.887

The easiest thing to do is to "restart" the current thread via the run() method

```
void run() {
    boolean done = false;
    while(!done) {
        try {
           ...
           done = true;
        } catch (ConnectionLostException ex) { 
            // log exception
        }
    }
} 
```

# javascript - 使用 CSS3 反向进度条

> ID：16017509
> 
> 赞同：4
> 
> 时间：2013-04-15T14:16:22.277
> 
> 标签：javascript, jquery, css

我有这个[**示例**](http://jsfiddle.net/Mils/fmaGZ/1/)。

我想将进度条反转 180 度以从右到左进行。要获得这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/cclqS.png)

我试图改变**过渡**属性，但没有结果。

代码 ：

```
.progress-bar span {
        display: inline-block;
        height: 100%;
        background-color: #777;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, .5) inset;
        -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, .5) inset;
        box-shadow: 0 1px 0 rgba(255, 255, 255, .5) inset;
        transition: width .4s ease-in-out;      
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:22:39.877

制作进度条块并将其浮动到右侧：

```
.progress-bar span {
    display: block;
    float: right;
    ...
} 
```

[**演示**](http://jsfiddle.net/fmaGZ/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:20:37.350

将 span 设为块元素并使用`margin-left`. 但是您也需要反转进度。例如 30% 的需求`margin-left:70%`；

[http://jsfiddle.net/fmaGZ/2/](http://jsfiddle.net/fmaGZ/2/)

# c++ - qt中基于宽度的字符串截断

> ID：16017510
> 
> 赞同：0
> 
> 时间：2013-04-15T14:16:23.963
> 
> 标签：c++, windows, qt, user-interface

假设我在一个可以调整大小的矩形中有一个字符串。鉴于我知道调整大小后 ractangle 的宽度，我如何才能找到字符串的最后一个字符，如果我将字符串截断为该字符，它将适合新的（调整大小的）矩形？目前我已经在一个循环中解决了我的问题，直到我通过增量添加字符来匹配所需的矩形宽度。有没有更优雅的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:19:18.007

您可以使用[`QFontMetrics`](http://qt-project.org/doc/qt-4.8/qfontmetrics.html)：

```
QFontMetrics metrics(labelText->font());
int textInPixeles = metrics.width(labelText->text()); 
```

或者你可以使用[`QFontMetrics::boundingRect`](http://qt-project.org/doc/qt-4.8/qfontmetrics.html#boundingRect-2).

拥有小部件宽度`textInPixeles`和文本最后一个字符的宽度，您可以估计您需要什么。

# php - 无法让 mysqli 工作

> ID：16017511
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:16:25.120
> 
> 标签：php, class, mysqli

我正在构建一个自定义 CMS，它使用一个类来做所有事情，我现在正在使用一个 MYSQL 连接函数。

现在我想为 mysqli 更改所有 mysql 函数。

但我无法让 mysqli 功能工作有人可以帮助我吗？

这是代码：

```
public function connect() {
    // Set up connection details for the site   
    $con = mysql_connect($this->host, $this->username, $this->password);
    if (!$con) {
        die("ShadowCMS could not connect to the database: " . mysql_error());
    }
    // Set up the database
    $db_select = mysql_select_db($this->db, $con);
    if(!$db_select) {
        die("ShadowCMS could not select a database: " . mysql_error());
    }
} 
```

如何将其更改为有效的 mysqli 连接功能？

我已经搜索了everywere，但我找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:22:13.007

我花了 10 秒得到了这个结果

> [http://www.php.net/manual/en/mysqli.construct.php](http://www.php.net/manual/en/mysqli.construct.php)

应该能满足你的需求。请注意示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:24:32.193

这是正确的代码

```
public function connect()
{
    $dsn = "mysql:host={$this->host};dbname={$this->db};charset=utf8";
    $opt = array(
        PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    );
    $con = new PDO($dsn,$this->username, $this->password, $opt);
} 
```

# html - Google Chrome Web Inspector 中 GOOGLE_INPUT_CHEXT_FLAG 的用途是什么？

> ID：16017513
> 
> 赞同：6
> 
> 时间：2013-04-15T14:16:29.277
> 
> 标签：html, google-chrome, web-inspector

现在有一天，我可以看到在`</body>`标签结束之前出现如下内容：

```
<div id="GOOGLE_INPUT_CHEXT_FLAG" style="display: none;" input="" input_stat="{}"></div> 
```

每当我尝试在***Google Chrome*****中检查元素**时，我都可以在每个网页中看到这一点。

 *有人知道吗？

为什么是这样？

它的用途是什么？

它会对我的数据或计算机有害吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T18:12:58.457

我明白了。这是因为扩展名：**Google Input Tools (by Google)**。

但我不确定他们为什么使用该标记。*

# c# - 共享文件夹的 Outlook NewMailEx

> ID：16017516
> 
> 赞同：0
> 
> 时间：2013-04-15T14:16:55.757
> 
> 标签：c#, outlook-addin, shared-directory

我有一个共享文件夹。我需要根据地址更改邮件类别，但是如何处理共享文件夹中的邮件？

这似乎是一个很好的解决方案：[http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0bba3c22-7703-4083-8d55-73bd5230af22](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0bba3c22-7703-4083-8d55-73bd5230af22)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:42:44.627

NewMail/NewMailEx 事件仅在主邮箱上触发。

在任何其他商店或文件夹上，您都需要使用 Items.ItemAdd 事件。

# php - 字段列表中的未知列 1？

> ID：16017525
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:17:25.037
> 
> 标签：php, mysql, sql, database

完全被难住了。如问题标题中所述，出现错误，不知道为什么。我所有的列都有文本名称，据我所知，在我的代码中没有对名为“1”的列的引用。我已经有人稍微修改了这个来帮助我，所以也许这里有一个我不知道的问题。

```
(string)$insert;
if(is_array($_POST['Year'])){
    foreach($_POST['Year'] as $k=>$v){  
         $insert .= "($_POST['Name'][$k], $_POST['Short'][$k], $_POST['Med'][$k], $_POST['Long'][$k], $_POST['VLong'][$k], $_POST['Extreme'][$k], $_POST['LJump'][$k], $_POST['HJump'][$k], $_POST['Shotputt'][$k], $_POST['Discuss'][$k], $_POST['Javelin'][$k], $_POST['Date'][$k], $_POST['Year'][$k]),"; 
    }
     $insert = substr_replace($insert ,0,-1);
}else{
    $insert .= "($_POST['Name'], $_POST['Short'], $_POST['Med'], $_POST['Long'], $_POST['VLong'], $_POST['Extreme'], $_POST['LJump'], $_POST['HJump'], $_POST['Shotputt'], $_POST['Discuss'], $_POST['Javelin'], $_POST['Date'], $_POST['Year'])"; 
}
$sql="INSERT INTO results_main 
(`Name`, `Short`, `Med`, `Long`, `VLong`, `Extreme`, `LJump`, `HJump`, `Shotputt`, `Discuss`, `Javelin`, `Date`, `Year`)
VALUES 
".$insert;

$result = mysql_query($sql) or die(mysql_error());

// close connection 
mysql_close($conn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:26:07.037

原因是因为你用反引号包装了这些值。如果值是字符串文字，则应该用单引号括起来。MySQL 将您的值视为列，因为它们周围有反引号。反引号用于标识符而不是字符串文字。所以粗略的例子看起来像这样，

```
INSERT INTO tableName (col1, col2, col3)
VALUES ('hello', 'world', 'stack') 
```

# opencl - clEnqueueReadBuffer / clEnqueueWriteBuffer：强制固定内存模式

> ID：16017527
> 
> 赞同：1
> 
> 时间：2013-04-15T14:17:28.110
> 
> 标签：opencl, gpgpu

为了与 openCL 进行全速通信，必须使用主机端的固定内存。这样的内存永远不会被分页，并且可以通过使用带有 CL_MEM_ALLOC_HOST_PTR 标志的 clCreateBuffer() 然后使用 clEnqueueMapBuffer 来获得。

但是人们可能知道一个对象已经在固定内存中（因为它是使用这些函数创建的，但在另一个上下文中），因此想要全速使用 clEnqueueReadBuffer()/clEnqueueWriteBuffer()。不幸的是，如果内存没有在当前上下文中固定，则该对象不会被视为固定，并且数据速率不是最大的。

**如何说一个对象已经在 OpenCL 的固定内存中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:09:58.373

我对这个问题的结论是 OpenCL SDK 必须维护自己的一组标志，以了解它们是否分配了缓冲区，因此可以安全地假设它是否被固定。他们似乎保守地假设外部分配的缓冲区没有固定或对齐。

我尝试将基准的带宽与使用外部分配的内存分配的缓冲区*和使用**外部*`clCreateBuffer`分配的内存的缓冲区相匹配，无论是在不同的上下文中使用还是手动固定和对齐内存，第一个似乎总是对 AMD 和 nvidia 表现更好。*`clCreateBuffer`*

# c# - 网络摄像头代码中的内存泄漏

> ID：16017528
> 
> 赞同：9
> 
> 时间：2013-04-15T14:17:27.223
> 
> 标签：c#, memory-leaks, webcam, video-capture, aforge

好的，我一直在尝试对来自网络摄像头的视频源做一些特定的事情。我有一个 Lumenera Infinity 2 显微镜，我正试图从中提取饲料，并希望能够在饲料进入时对其进行修改。由于我找不到使用视频源播放器的方法，所以我决定改为将每一帧（相机最大 15fps）拉为位图，以便我可以在那里进行修改。

问题是：我有一个巨大的内存泄漏。当我只使用 videoSourcePlayer 运行视频时，它徘徊在使用大约 30 兆。当我将帧作为位图运行时，它会在几秒钟内破坏 1 gig 的内存。

我在这里错过了什么？我认为自动垃圾收集会在旧框架变得无法访问时将它们铲起。我应该尝试在位图上强制垃圾收集吗？或者它完全是别的东西，我很想念它。

```
FilterInfoCollection captureDevices;
VideoCaptureDevice cam;
Bitmap bitmap;

public Form1()
{
  InitializeComponent();
}

private void Form1_Load(object sender, EventArgs e)
{
  try
  {
    captureDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);

    if (captureDevices.Count == 0)
      throw new ApplicationException();

    CameraSelectComboBox.Items.Clear();

    foreach (FilterInfo device in captureDevices)
    {
      CameraSelectComboBox.Items.Add(device.Name);
    }

    CameraSelectComboBox.SelectedIndex = 0;
    CameraSelectComboBox.Enabled = true;
  }
  catch (ApplicationException)
  {
    CameraSelectComboBox.Enabled = false;
  }
}

private void connectButton_Click(object sender, EventArgs e)
{
  cam = new VideoCaptureDevice(captureDevices[CameraSelectComboBox.SelectedIndex].MonikerString);
  cam.NewFrame -= Handle_New_Frame; //Just to avoid the possibility of a second event handler being put on
  cam.NewFrame += new AForge.Video.NewFrameEventHandler(Handle_New_Frame);
  videoSourcePlayer1.Visible = false;
  cam.Start();

  //videoPictureBox1.Visible = false;
  //videoSourcePlayer1.VideoSource = new VideoCaptureDevice(captureDevices[CameraSelectComboBox.SelectedIndex].MonikerString);
  //videoSourcePlayer1.Start();
}

private void Handle_New_Frame(object sender, NewFrameEventArgs eventArgs)
{
  bitmap = (Bitmap)eventArgs.Frame.Clone();

  videoPictureBox1.Image = bitmap;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:29:29.380

Try this:

```
private void Handle_New_Frame(object sender, NewFrameEventArgs eventArgs)
{
    if(bitmap != null)
        bitmap.Dispose();
    bitmap = new Bitmap(eventArgs.Frame);

    if(videoPictureBox1.Image != null)
        this.Invoke(new MethodInvoker(delegate() {videoPictureBox1.Image.Dispose();}));
    videoPictureBox1.Image = bitmap;
} 
```

It solved some of the memory leaks I experienced with Aforge and PictureBoxes, but the VideoSourcePlayer is much better where memory consumption is concerned.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:25:55.357

我认为这是一个可以改进的领域：

```
cam = new 
  VideoCaptureDevice(captureDevices[CameraSelectComboBox.SelectedIndex].MonikerString);

cam.NewFrame -= Handle_New_Frame; // you're pointing to the new instance of VCD, so this will have no effect.

cam.NewFrame += new AForge.Video.NewFrameEventHandler(Handle_New_Frame);
videoSourcePlayer1.Visible = false;
cam.Start(); 
```

每次按下连接按钮时，该代码块都会占用内存。

您几乎需要在主级别参考 VCD。所以在 Form1 类级别定义一个成员变量：

```
private VideoCaptureDevice _cameraContext; 
```

在连接事件处理程序中，执行以下操作：

```
if (_camerContext != null)
{
  _cameraContext.NewFrame -= Handle_New_Frame;
}
_cameraContext = new VideoCaptureDevice(blah blah blah);
_cameraContext.NewFrame += Handle_New_Frame;
videoSourcePlayer1.Visible = false;
_cameraContext.Start(); 
```

顺便说一句，我假设您是 .NET 3.5 或更高版本，因此使用了新的委托分配语法。

# angularjs - 使用对象名称预先输入

> ID：16017531
> 
> 赞同：14
> 
> 时间：2013-04-15T14:17:45.220
> 
> 标签：angularjs, bootstrap-typeahead, angular-ui-bootstrap

我正在尝试设置一个`typeahead`使用[AngularJS](http://angularjs.org/)和[UI 引导](http://angular-ui.github.io/bootstrap/)程序，如下所示：

.html

```
<input type="text" ng-model="selectedStuff" typeahead="stuff.name for stuff in stuffs | filter:$viewValue"/>

<span>{{selectedStuff.name}}</span>
<span>{{selectedStuff.desc}}</span> 
```

.js

```
$scope.stuffs= [
                {
                 "name":"thing1",
                 "desc":"this is the first thing"
                },
                {
                 "name":"thing2",
                 "desc":"this is the second thing"
                }
               ] 
```

目前，我已经能够使用所选名称更新模型，但我的目标是通过`typeahead`. 有没有一种只使用输入的干净方法来做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-15T14:48:48.283

肯定的:-)

[http://angular-ui.github.io/bootstrap/](http://angular-ui.github.io/bootstrap/)中的 typeahead 指令使用与 AngularJS[选择指令](http://docs.angularjs.org/api/ng.directive%3aselect)相同的超灵活语法`ng-options`。所以你可以写：

```
typeahead="stuff as stuff.name for stuff in stuffs | filter:$viewValue" 
```

这是一个有效的 plunk：[http ://plnkr.co/edit/5kGZkNPZ7rIFfb4Rvxej?p=preview](http://plnkr.co/edit/5kGZkNPZ7rIFfb4Rvxej?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T19:05:58.440

我有同样的问题。我已经解决了

```
typeahead="country.name for country in countryList | filter:$viewValue | limitTo:8" 
```

这里 countryList 是国家对象的列表。名称是国家对象的属性之一。对我来说，它工作正常。

# twitter-bootstrap - 不知道如何使用 Bootstrap 缩略图组件

> ID：16017532
> 
> 赞同：12
> 
> 时间：2013-04-15T14:17:46.950
> 
> 标签：twitter-bootstrap, thumbnails, holder.js

我正在尝试使用 Bootstrap 的缩略图组件来显示带有缩略图的产品类别列表。我希望用户单击缩略图以转到该类别。

Bootstrap 网站上的文档提供了以下基本标记：

```
<ul class="thumbnails">
    <li class="span4"> 
        <a href="#" class="thumbnail">
            <img data-src="holder.js/300x200" alt="">
        </a>
    </li>
    ...
</ul> 
```

我在 Google 上搜索了有关 holder.js 的信息，找到了正式的 holder.js 页面，下载了 zip 版本，将文件放在我网站的 js 文件夹中，并在我的 HTML 中使用脚本标记链接到 holder.js 文件。

但是如何/在标记中的何处指定要使用的图像文件？

我还需要在每个图像下包含一个类别名称，可能带有 span 或 h4 标签。这需要构成可点击块的一部分。

更新：澄清一下，我想使用的只是缩略图组件的样式方面。所以也许我可以使用缩略图组件和相关的 HTML 标记来实现这一点，而完全省略 holder.js？

这是我想使用的 HTML 标记：

```
<ul class="thumbnails">
    <li class="span4">
        <a href="/category-name/" class="thumbnail">
            <img src="/assets/images/filename.jpg" alt="">
            <span>Category name</span>
        </a>
    </li>
    ...
</ul> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-16T12:11:14.617

Holder.js 只是基于 javascript 和内联图像的图像占位符框架。引导程序使用它来创建示例图像。这个库中不需要生产。因此，您应该使用属性和标记，而不是使用`data-src`属性和库，例如：`holder.js``src`

```
<ul class="thumbnails">
    <li class="span4">
        <a class="thumbnail" href="#">
            <img src="/image/path.jpg" alt="My Image" />                
            <span class="caption">This is my image</span>
        </a>
    </li>
</ul> 
```

您还可能需要禁用图像标题中的文本下划线。只需使用 css：

```
a.thumbnail:hover {
    text-decoration: none;
} 
```

示例：http: [//jsfiddle.net/M3fpA/46/](http://jsfiddle.net/M3fpA/46/)

# html - 强制垂直条始终接触页脚的布局

> ID：16017533
> 
> 赞同：1
> 
> 时间：2013-04-15T14:17:47.763
> 
> 标签：html, css

这个琴...

[http://jsfiddle.net/jeljeljel/5BSva/17/](http://jsfiddle.net/jeljeljel/5BSva/17/)

显示我想要实现的布局。我希望标签底部的垂直条延伸到页脚。

这是我需要完成的...

1.  在初始状态下，不显示任何内容，垂直条正确地向下延伸到页脚。竖线应始终延伸到页脚。

2.  当您切换要显示的内容时，请注意垂直条不会延伸到页脚。竖线需要延伸到页脚。

3.  我想在不使用任何图像黑客的情况下完成此任务。

有没有办法改变这个小提琴，以便垂直条总是延伸到页脚，无论是否有内容拉伸父级？

**HTML**

```
<div class="wrapper">
    <div class="header">HEADER</div>
    <div class="body">
        <ul class="nav nav-tabs" id="tabcontrol">
            <li class="active"><a href="#home" data-toggle="tab">Home</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="home" style="">
                <div class="navigation" style="">navigation
                    <br />navigation
                    <br />navigation
                    <br />
                </div>
                <div class="content">
                    <button id="toggle">Toggle Content</button>
                    <div id="theContent" style="display:none;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In congue odio quis libero dapibus ut tincidunt lectus vestibulum. Donec quis ligula tortor. Sed adipiscing tempor elit, at porttitor lacus luctus ut. Suspendisse suscipit, orci bibendum tincidunt venenatis, lorem ligula aliquet felis, in fringilla diam velit eu sapien. Aliquam vitae varius lacus. Nullam cursus nibh at leo varius vestibulum. Maecenas cursus dui quis metus hendrerit a lacinia est eleifend. Donec pharetra pharetra libero, non tincidunt magna fringilla in. Nulla convallis ornare dui, sed vestibulum turpis rutrum vestibulum. Duis convallis, eros nec vulputate congue, velit elit scelerisque purus, ut ultricies eros felis ac justo.</div>
                </div>
            </div>
        </div>
    </div>
    <div class="push"></div>
</div>
<div class="footer center">
    <div style="border-bottom: 2px solid rgb(174, 174, 201); background-color: #fff;"></div>
    <div>FOOTER</div>
</div> 
```

**CSS**

```
.body {
    border: 1px solid rgb(174, 174, 201);
    border-top: 5px solid rgb(174, 174, 201);
    border-bottom: 5px solid rgb(174, 174, 201);
    border-left: 2px solid rgb(174, 174, 201);
    border-right: 2px solid rgb(174, 174, 201);
    padding-bottom: 1000px;
    margin-bottom: -1000px;
}
/* Sticky Footer by Ryan Fait (http://ryanfait.com/) */
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -50px auto;
    /* the bottom margin is the negative value of the footer's height */
    overflow: hidden;
}
.footer {
    height: 50px;
    background-color: red;
}
.footer, .push {
    height: 50px;
    /* .push must be the same height as .footer */
    clear: both;
}
form {
    height: 100%;
}
/* Sticky Footer by Ryan Fait (http://ryanfait.com/) */
.navigation {
    float: left;
    width: 150px;
    border-right: 3px solid rgb(174, 174, 201);
    padding-top: 10px;
    white-space: nowrap;
    position:absolute;
    bottom:50px;
    top:65px;
}
.content {
    padding-top: 10px;
    margin-left:160px;
}
.nav {
    margin-bottom: 0px;
} 
```

**JAVASCRIPT** '

```
<script>
$(document).ready(function(){
    $('#toggle').click(function () {
        $('#theContent').toggle();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:54:37.530

JS是一种选择吗？我一直这样做：

为您的导航和内容 div 添加一个 ID

```
$('#toggle').click(function () {
    $('#theContent').toggle(0,function(){
        $('#navigation').height($('#content').height());
    });
}); 
```

它需要一些技巧才能为您工作，例如在隐藏文本时找到最小高度并选择窗口调整大小事件并进行相应调整，但它应该适合您。

# ruby-on-rails - Image_tag - 使用方法从 db 中的 rails 加载图像

> ID：16017537
> 
> 赞同：0
> 
> 时间：2013-04-15T14:18:01.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, methods, tags

我正在尝试在`show`视图中显示数据库中的图像。用@post.display_text 调用的文本都显示得很好，只是图像是个问题。

当我尝试：

```
@post.image 
```

它在 localhost 的本地计算机中显示以下文本：3000/posts/41

```
/system/posts/images/000/000/041/original/imageforpost41.png?1346888720 
```

我正在尝试显示图像本身。我试过：

```
<%= image_tag(@post.image, :size => "80x80", :alt => "Picture") %> 
```

图片没有显示，只有alt。当我尝试直接链接到图像时，它会显示它，但不会根据使用的方法显示到数据库中的这些图像。我该怎么办？显示图像的正确代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:06:49.313

试试这个

```
<%= image_tag "http://abc.com#{@post.image}" %> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-15T14:29:22.140

下面使用：

```
<%= image_tag(@post.image.filename, :size => "80x80", :alt => "Picture", :width => '100', :height =>'100') %> 
```

# hadoop - Configuration.addResource() 方法在 hadoop 中如何工作

> ID：16017538
> 
> 赞同：2
> 
> 时间：2013-04-15T14:18:02.097
> 
> 标签：hadoop

Configuration.addResource() 方法是像 java 的 ClassLoader 那样加载资源文件还是只是封装 ClassLoader 类。因为我发现它不能使用像“../resource.xml”这样的**字符串**作为 addResource() 的参数来加载资源文件classpath，这个属性就跟ClassLoader一样。
谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T00:14:18.747

浏览 Javadocs 和 Configuration 的源代码，字符串被假定为类路径（[第 1162 行](http://javasourcecode.org/html/open-source/hadoop/hadoop-1.0.3/org/apache/hadoop/conf/Configuration.java.html)），而不是相对于文件系统 - 您应该使用 URL 来引用本地文件系统上的文件，如下所示：

```
conf.addResource(new File("../resource.xml").toURI().toURL()); 
```

# wcf - 为 WCF 服务调试 windows 网络堆栈

> ID：16017540
> 
> 赞同：0
> 
> 时间：2013-04-15T14:18:05.270
> 
> 标签：wcf, trace

我正要去拜访一个客户，我们在与基于 WCF 的服务交谈时遇到了一些奇怪的连接问题。WCF 服务由 Windows 服务而不是 IIS 托管。

在客户端，我很乐意使用 fiddler，并且我还在服务器端使用 WCF 跟踪来生成服务跟踪文件。在网络上我可以使用 WireShark 来查看发生了什么，我担心的是 windows 网络堆栈和服务器端的 web 服务之间存在一个小黑洞。

有谁知道网络垫片或可以在 Windows 和 WCF 服务之间的服务器端获取数据的东西？（或者我可以配置提琴手来做到这一点？）

# android - 始终在堆叠的 ActionBar 中选择第一个选项卡

> ID：16017541
> 
> 赞同：0
> 
> 时间：2013-04-15T14:18:19.777
> 
> 标签：android, tabs, android-actionbar

我有 2 个以上的`ActionBar`标签。最初我不希望选择任何选项卡。当在 a`handset`或 a 上横向时，`Tablet`它按预期工作，并且当`debugging`我可以看到选定的选项卡是`null`. 但是，当在手机上运行代码时`portrait`，`ActionBar`第一个选项卡看起来像是被选中的。调试显示`onTabSelected`在`TabListener`和 期间从不调用并且所选选项卡为`onCreate`空`onResume`。

```
getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
getActionBar().addTab(getActionBar().newTab().setTabListener(tabListener).setIcon(R.drawable.tab_icon_1), false);
getActionBar().addTab(getActionBar().newTab().setTabListener(tabListener).setIcon(R.drawable.tab_icon_2), false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:29:07.320

> Initially I don't want any of the tabs to be selected.

That is not supported, unless you have no tabs. It is also a bizarre UI request -- I can think of zero other environments where a set of tabs has no selection.

# c++ - Bresenham 线条绘制对于特定坐标失败？

> ID：16017544
> 
> 赞同：0
> 
> 时间：2013-04-15T14:18:50.340
> 
> 标签：c++, graphics, line

该代码在第一次调用时运行良好，`positionGenerator(1046,1623,750,1290);`但在第二次调用中运行到无限循环`positionGenerator(1046,1623,375,810);`。

```
 #include<iostream>
  #include<string>
  #include<cmath>
  using namespace std;

void positionGenerator(int xa,int ya, int xb,int yb)
{
int dx=0,dy=0,x_inc=0,y_inc=0,m=0,p=0,i=0;
dx=xb-xa;
dy=yb-ya;
m=dy/dx;
x_inc=dx>0?2:-2;
y_inc=dy>0?2:-2;
cout<<"x_incr"<<x_inc<<"y_incr"<<y_inc<<endl;
cout<<"dx"<<dx<<"dy"<<dy<<endl;
dx=abs(dx);
dy=abs(dy);
cout<<"dx"<<dx<<"dy"<<dy<<endl;
p=(2*dy)-(dx);
for(i=1;((xa!=xb) && (ya!=yb));i++)
{
    if(p>0)
    {
        xa=xa+x_inc;
        ya=ya+y_inc;
        p=p+(2*dy)-(2*dx);
    }
    else
    {
        if(m<1)
        {
            xa=xa+x_inc;
            p=p+(2*dy);
        }
        else
        {
            ya=ya+y_inc;
            p=p-(2*dx);
        }

    }

cout<<"x"<<xa<<"y"<<ya<<endl;

  }
 }

int main()
{
     //first_call
     positionGenerator(1046,1623,750,1290);

    //second_call
     positionGenerator(1046,1623,375,810);
     return 0;
} 
```

我相信该算法适用于正斜率和负斜率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:24:31.113

您应该用最长的线投影计算沿轴的像素数，而不是依靠`(xa!=xb) && (ya!=yb)`. 然后可能还有其他一些错误需要修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:25:58.653

你的状态有问题`((xa!=xb) && (ya!=yb))`

x 和 y 的增量值都等于 2。因此，您应该至少有一个来自 (xb-xa) 的值，并且 (yb-ya) 将是偶数。但是，第二次通话有两个奇怪的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:29:05.990

Your current loop termination condition will never be true when the distances |xa-xb| and |ya-yb| are both odd.

You need to find a better termination condition.

# permissions - 具有完全权限的注册表

> ID：16017546
> 
> 赞同：2
> 
> 时间：2013-04-15T14:18:58.850
> 
> 标签：permissions, registry, admin, nsis

我正在尝试为 nsis 中的注册表提供完全许可，但它不起作用。下面是一个示例代码。

```
WriteRegStr HKEY_LOCAL_MACHINE "SOFTWARE\Demo\" "mydemo" "abc"
AccessControl::GrantOnRegKey HKEY_LOCAL_MACHINE "SOFTWARE\Demo\" "PC116\Users" "FullAccess" 
```

我尝试在 Windows XP PC 上进行操作。我尝试使用 REGINI 使用 vbscript，它为用户“Everyone”提供完全权限。所以任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T16:11:19.777

The AccessControl plugin only supports the short HKEY names.

```
!include LogicLib.nsh
!define StringSID_BUILTIN_Users S-1-5-32-545

WriteRegStr HKLM "SOFTWARE\Demo\" "mydemo" "abc"
AccessControl::GrantOnRegKey HKLM "SOFTWARE\Demo\" "(${StringSID_BUILTIN_Users})" "FullAccess"
pop $0
${If} $0 != "ok"
    pop $1
    DetailPrint $0>$1 ; In your case: "error>Bad root key name (HKEY_LOCAL_MACHINE)"
${EndIf} 
```

# php - 我在一个脚本中找到了“<<”，我想知道它是如何工作的

> ID：16017549
> 
> 赞同：0
> 
> 时间：2013-04-15T14:19:10.297
> 
> 标签：php

我`<<`在一个 php 脚本中找到了，我想知道它是如何工作的；

例如：

```
echo 2 << 4; 
```

它打印 32

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:20:53.260

**左移**

来自 php.net 的[Bitwise Operators](http://www.php.net/manual/en/language.operators.bitwise.php)手册：

将 $a $b 的位向左移动（每一步的意思是“乘以二”）

* * *

`2 << 4`方法`2 * 2^4 = 32`

# iphone - SVN 在 Mountain Lion 上提交 txn-current-lock

> ID：16017554
> 
> 赞同：2
> 
> 时间：2013-04-15T14:19:23.360
> 
> 标签：iphone, xcode, svn, git-svn

我在 Mac OS X 中遇到了 SVN 问题 ..

当我提交以下任何文件时，都会生成错误。

**svn：提交失败（详情如下）：svn：无法获得文件'/Volumes/SvnProject/db/txn-current-lock'的独占锁定：不支持操作**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-17T15:55:53.903

在 SVN 服务器上，确保正确设置存储库（以及所有子文件夹）的所有者和组。

例如，我通过以 root 身份从 SVN 服务器发出以下命令来创建一个 repo：

```
svnadmin create /path/myrepo 
```

最初我从我的 SVN 客户端收到**txn-current-lock错误。**在 SVN 服务器上，我注意到它`/path/myrepo`及其所有子文件夹`owner:group`都有`root:root`. 为了解决这个问题，我从 SVN 服务器发出以下命令：

```
chown -R newowner:newgroup 
```

确保您的 newowner 和 newgroup 项目与 SVN 客户端提供的所有者/组信息相匹配。

使用 -R 选项使其递归很重要。这修复了**txn-current-lock**错误。

# game-engine - 如何在飞镖中添加地图？

> ID：16017555
> 
> 赞同：-5
> 
> 时间：2013-04-15T14:19:34.323
> 
> 标签：game-engine, dart

我要在 dart 中添加一个 2d 游戏的地图，我使用这个地图设计的瓦片地图。如何添加飞镖并在 html 上显示？或者有什么方法可以在飞镖中创建游戏地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:59:41.033

作为历史参考，这在飞镖邮件列表中有更详细的回答：

[https://groups.google.com/a/dartlang.org/forum/#!topic/misc/-gwxJiVNBoI](https://groups.google.com/a/dartlang.org/forum/#!topic/misc/-gwxJiVNBoI)

# java - 仅读取 RSS Feed 中的特定标签

> ID：16017558
> 
> 赞同：0
> 
> 时间：2013-04-15T14:19:43.063
> 
> 标签：java, android, wordpress, xml-parsing, rss-reader

[我正在尝试按照本教程](http://techiedreams.com/android-simple-rss-reader/)学习如何为我的 android 应用程序制作 RSS 阅读器。提要是从 wordpress 博客生成的，我想找出一种按类别阅读的方法。它目前正在阅读整个提要项目，但我正在尝试从列表中整理出特定类别。

这是用于读取提要的 Activity 类。

```
// Connected - Start parsing
        new AsyncLoadXMLFeed().execute();

    }

}

private void startLisActivity(RSSFeed feed) {

    Bundle bundle = new Bundle();
    bundle.putSerializable("feed", feed);

    // launch List activity
    Intent intent = new Intent(SplashActivity.this, GridActivity.class);
    intent.putExtras(bundle);
    startActivity(intent);

    // kill this activity
    finish();

}

private class AsyncLoadXMLFeed extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {

        // Obtain feed
        DOMParser myParser = new DOMParser();
        feed = myParser.parseXml(http://mywordpressblog.com/feed/);
        if (feed != null && feed.getItemCount() > 0)
            WriteFeed(feed);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        startLisActivity(feed);
    }

}

// Method to write the feed to the File
private void WriteFeed(RSSFeed data) {

    FileOutputStream fOut = null;
    ObjectOutputStream osw = null;

    try {
        fOut = openFileOutput(fileName, MODE_PRIVATE);
        osw = new ObjectOutputStream(fOut);
        osw.writeObject(data);
        osw.flush();
    }

    catch (Exception e) {
        e.printStackTrace();
    }

    finally {
        try {
            fOut.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

// Method to read the feed from the File
private RSSFeed ReadFeed(String fName) {

    FileInputStream fIn = null;
    ObjectInputStream isr = null;

    RSSFeed _feed = null;
    File feedFile = getBaseContext().getFileStreamPath(fileName);
    if (!feedFile.exists())
        return null;

    try {
        fIn = openFileInput(fName);
        isr = new ObjectInputStream(fIn);

        _feed = (RSSFeed) isr.readObject();
    }

    catch (Exception e) {
        e.printStackTrace();
    }

    finally {
        try {
            fIn.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return _feed;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:57:44.023

在将项目添加到您的列表之前，您可以像这样检查：

if(item.getCategory().contains("categorytoshow")){

将其添加到列表中，因为它包含您想要的类别

}

然后将其添加到列表中

# php - 我应该将打开的文件句柄存储在记录器类中以供以后使用吗？

> ID：16017560
> 
> 赞同：2
> 
> 时间：2013-04-15T14:19:51.700
> 
> 标签：php, logging

我正在编写一个简单的 Logger 类，它将日志写入文件。我的`log`方法如下所示：

```
 public function log($level, $message)
    {
        $f = fopen($this->logFile, 'a');
        flock($f, LOCK_EX | LOCK_NB);
        fprintf($f, '[%s] %s: %s', date('Y-m-d H:i:s'), $level, $message);
        flock($f, LOCK_UN);
        fclose($f);
    } 

```

我的问题很简单。我应该存储打开的文件句柄`$f`并在写入时锁定/解锁它，还是应该在每次调用 log 方法时打开和关闭文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:32:56.843

您在同一个脚本中“记录”了多少次？如果这个问题的答案不止一个，那么理想情况下，您应该通过使所有登录尽可能少的写入来优化您的脚本。

下一个问题是您的脚本对资源的消耗程度如何？大概（因为它是最常见的）场景是在 Web 服务器的范围内？在这种情况下 - 您可能同时请求同一个脚本（这就是您首先锁定的原因？） - 您不想处于一个请求挂起的位置 - 等待第一个实例释放锁的脚本。

我的方法是将文件句柄保持在尽可能短的时间，因为它是一个明显的瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:21:51.047

我认为最好的做法是打开/关闭它。但它是 PHP 我不认为两者之间的差异有很大的影响。

如果你想确保没有泄漏，只需打开 -> 写入 -> 关闭

# plugins - 在流星中使用 twix 和 momentjs

> ID：16017565
> 
> 赞同：1
> 
> 时间：2013-04-15T14:20:06.773
> 
> 标签：plugins, meteor, momentjs, meteorite

我正在尝试使用流星组合一个小应用程序，并且很幸运。但我无法让应用程序为[momentjs使用](http://momentjs.com/)[Twix](http://icambron.github.io/twix.js/)插件。

使用 Meteorite，我从 Atmosphere 添加了 Momentjs 库`mrt add moment`，所以没有问题。但是 Atmosphere 中没有 twix 包。我使用 npm 安装了 twix 包，但流星和 mrt 都不会`add`twix，`Package named twix doesn't exist in your meteor installation`我想这是有道理的，它是 Nodejs 包而不是 Meteor 包。最后我尝试下载 twix.js 文件并将其放在不同的目录中，但没有任何效果。

这段代码我没有收到错误：

```
if (Meteor.isServer) {
    Meteor.startup(function () {
        var moment = Npm.require('moment');
        Npm.require('twix');
    }); 
```

我可以使用 MomentJS 库，但不能使用 twix 插件。写作（在 Meteor.isClient 中）

```
Template.dayTable.date = function() {
    return moment(Session.get('selectedDate')).format("MMM Do YY");
} 
```

工作正常，但写作

```
var t = new moment("1/25/1982 9:30 AM").twix("1/25/1982 1:30 PM"); 
```

有 js 控制台告诉我吗`Uncaught TypeError: Object [object Object] has no method 'twix'`

有没有一个秘密的地方可以让 Meteor/MomentJS 使用 twix.js 文件（这似乎很可能）？我没有正确地要求它吗？或者是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:05:34.317

Meteor 按特定顺序加载 javascript。请参阅[Meteor 文档](http://docs.meteor.com/)（搜索“加载顺序”）。要解决这个问题：

*   将 moment.js 添加到 client/lib 以确保在 twix 之前加载它
*   将 twix.js 添加到客户端文件夹

您还可以考虑创建一个包（这`Npm.require`是预期的）并包含它，或者重命名文件，因为文件是按字母顺序包含的。更多信息在文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T22:04:39.527

它没有在任何地方记录，但您也可以独立使用 Twix，如下所示：

```
var Twix = Npm.require('twix');
var t = new Twix(firstTime, secondTime); 
```

# c# - 将 ArrayList 从服务器发送到客户端应用程序

> ID：16017569
> 
> 赞同：0
> 
> 时间：2013-04-15T14:20:31.927
> 
> 标签：c#, database, http, client

我在 C# 中有以下服务器应用程序

```
public void ProcessRequest(HttpContext context)
        {
            context.Response.ContentType = "text/plain";
            string function = context.Request.QueryString["function"];

            Methods m = new Methods();

            if (function.Equals("GetAllCreditCards"))
            {
                ArrayList text = m.GetAllCreditCards();
                context.Response.Write(text);
            }
        } 
```

基本上，当调用 GetAllCreditCards 方法时，它会使用数据库中的数据填充数组列表。我检查了这个方法，效果很好。

我有一个将 ArrayList 文本发送到的客户端应用程序：

```
public String returnResponse(HttpWebResponse response)
        {
            StreamReader stream = new StreamReader(response.GetResponseStream());
            String answer = stream.ReadToEnd();
            return answer;
        }

            if (TextBox_Function.Text.Equals("GetAllCreditCards"))
            {
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:4000/Handler.ashx?function=" + TextBox_Function.Text);
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                String answer = returnResponse(response);
                Session["answer"] = answer;
                Response.Redirect("Results.aspx");
            } 
```

现在，如何修改客户端代码以便从 HttpWebResponse 中提取 ArrayList？我目前处于学习阶段，所以请多多包涵。谢谢你。

答案字符串的内容目前是：

```
System.Collections.ArrayList 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:23:51.207

您应该以某种方式序列化您的返回值。例如，

```
context.Response.Write(new new JavaScriptSerializer().Serialize(text)); 
```

您还可以使用其他序列化器，例如：XmlSerializer、DataContractSerializer 等。

但正如我在你之前的问题中评论的那样。有更好的方法来编写 RESTful 服务（WCF、WebService MVC 等）。你不需要重新发明轮子。

# jquery - jquery change .click 功能自动更改

> ID：16017570
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:20:33.607
> 
> 标签：jquery, onclick, gallery

我正在使用下面的代码来显示一个大的全屏滑块。我试图做的是将 .click 函数替换为定时事件，这样每个图像都会在一段时间（比如 7 秒）后发生变化，而不是在单击链接时发生变化。

已经为此工作了半天，但我仍然陷入困境，因此您可以提供的任何帮助将不胜感激。

谢谢

戴夫

```
 jQuery(function($){
    $(document).ready(function(){

    $('.panorama .panorama-view').panorama360();
if ($('.panorama #thumbnails .thumbers a').length > 1) { // check if there are multiple panoramas
    $('.panorama .panorama_controls a').click(function(ev) {
        ev.preventDefault();
        $active = $('.panorama #thumbnails .thumbers a.active');
        if ($(this).hasClass('panorama_next')) {
            if ($active.length == 0) $active = $('.panorama #thumbnails .thumbers a:last');
            $next = $active.parent().next('li');
            console.log($next);
            if ($next.length > 0) { // check to see if it's not the first thumb
                $('a:first',$next).trigger('click');
            } else { // load last panorama in the thumb stack
                $('.panorama #thumbnails .thumbers:first a').trigger('click');
            }
        }
        else {
            if ($active.length == 0) $active = $('.panorama #thumbnails a:first');
            $prev = $active.parent().prev('li');
            if ($prev.length > 0) { // check to see if it's not the first thumb
                $('a:first',$prev).trigger('click');
            } else { // load last panorama in the thumb stack
                $('.panorama #thumbnails .thumbers:last a').trigger('click');
            }
        }
    });
} else { // you can hide the controls because there is only one panorama loaded
    $('.panorama .panorama_controls').hide();
}
$('.panorama #thumbnails .thumbers a').click(function(ev) {
    ev.preventDefault();
    if ($(this).hasClass('active')) return;

    $('.panorama .preloader').show();
    $('#thumbnails .thumbers a').removeClass('active');
    $(this).addClass('active');
    $('.panorama .panorama-view').hide();
    $('.panorama .panorama-container').html($(this).next().html());
    $('.panorama .panorama-view').panorama360({ sliding_direction: 0 });
    $('h1.main-header').html($(this).data("title"));
    $('.main-desc').html($(this).data("description"));

});
$('.panorama .hotspot').fancybox({

        padding     : 0,
        fitToView   : true,
        mouseWheel  : false,
        maxWidth: '600',
        minHeight: '400',

        autoCenter: true,

        closeClick  : false
});

var pictures = [],

    $thumbnails = $( '#thumbnails' );

    // jScrollPane

$thumbnails.find( 'ul' ).width( function() {
    var totalWidth = 0;
    $( this ).find( 'li' ).each( function() {
        totalWidth += $( this ).outerWidth( true );
    });
    return totalWidth;
});

$thumbnails.jScrollPane();

var jScrollPaneApi = $thumbnails.data( 'jsp' );

$( window ).bind( 'resize', function() {
    jScrollPaneApi.reinitialise();
});

    }); // END doc ready
    }); // END function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:25:26.823

与其替换它，不如直接触发点击功能？

```
setTimeout(function () {
    $('.panorama .panorama_controls a.panorama_next').click();
}, 7000); 
```

# video - 带有嵌入视频的页面上的 Google-Plus 错误 +1

> ID：16017583
> 
> 赞同：1
> 
> 时间：2013-04-15T14:21:27.683
> 
> 标签：video, google-plus, google-plus-one

我正在使用 html 5 标签在我的网站上嵌入 google plus 1 按钮

`<div class="g-plusone" data-size="tall"></div>`

它适用于所有页面，除非页面上嵌入了视频。我收到一个通用按钮错误（在网络流量中看不到好的日志），然后按钮重定向到：[https ://support.google.com/plus/answer/1199142?p=plusone_button_error&rd=1](https://support.google.com/plus/answer/1199142?p=plusone_button_error&rd=1)

这一切都非常简单，所以我很难锁定问题。

* * *

以下是发生错误的页面示例：[http ://www.trendhunter.com/keynote/enlightening-keynote](http://www.trendhunter.com/keynote/enlightening-keynote)

以下是按钮似乎可以正常工作的页面示例： [http ://www.trendhunter.com/trends/glutinous-fast-foods-mcdonalds-china-offers-the-new-sausage-double-beef-车针](http://www.trendhunter.com/trends/glutinous-fast-foods-mcdonalds-china-offers-the-new-sausage-double-beef-bur)

我正在使用此脚本加载 gplus：

(function() { var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = ' [https://apis.google.com/js/ plusone.js](https://apis.google.com/js/plusone.js) '; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); })();

之后我在 .load 中加载按钮的 html，我将 google plus 脚本移动到 .load 的回调中，但它似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:44:24.230

该按钮未呈现，因为 Google 代理无法访问该页面。因为您的另一个按钮正在工作，并且传递了 href 参数，这意味着该页面有一个错误的规范标签 / 以某种方式阻止了 Google+ 代理。要在不编写任何 HTML 的情况下测试页面，请尝试直接在 Google+ 中共享链接：

[http://www.trendhunter.com/keynote/enlightening-keynote](http://www.trendhunter.com/keynote/enlightening-keynote)

如果在 G+ 中完成，您会注意到 Google+ 找不到要共享的页面。换句话说，您的 +1 代码很好，问题是 Google+ 没有发现您的页面。最快/最简单的解决方法是链接到可以呈现的页面，因为这可能是 Google+ 方面的问题。

快速浏览一下你的 noscript 标签，我找到了这个链接：

[http://www.trendhunter.com/keynote/enlightening-keynote?ModPagespeed=noscript](http://www.trendhunter.com/keynote/enlightening-keynote?ModPagespeed=noscript)

哪个会为**Google+**呈现。也许将它作为您的 href 传递给按钮将解决它！

# c# - 如何使 Ctrl+M 成为一个显示表单的事件？

> ID：16017587
> 
> 赞同：0
> 
> 时间：2013-04-15T14:21:35.613
> 
> 标签：c#, winforms

我有这个代码：

```
private void button5_Click(object sender, EventArgs e)
{
    Magnifier20070401.MagnifierForm mf = new Magnifier20070401.MagnifierForm();
    mf.Show();
} 
```

它正确显示了目标表单。但是我不想使用按钮单击，而是想使用`Ctrl+M`来显示此表单。如果用户`Ctrl+M`再次输入，我想关闭表单。

我怎样才能做到这一点？

编辑：

这就是我所做的工作：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Control && e.KeyCode.ToString() == "M")
            {
                Magnifier20070401.MagnifierForm mf = new Magnifier20070401.MagnifierForm();
                mf.Show();
            }
        } 
```

在 Form1 的构造函数中，我添加了：

```
this.KeyPreview = true; 
```

所以现在当我点击 Ctrl+M 时，我看到了新的表单。我现在需要的是如何做到这一点，如果我再次点击 Ctrl+M 它将关闭新表单。也许使用标志？

编辑：

这就是我现在所做的：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Control && e.KeyCode.ToString() == "M")
            {

                    if (mf == null)
                    {
                        mf = new Magnifier20070401.MagnifierForm();
                        mf.Show();
                    }
                    else
                    {
                        mf.Close();
                        this.Invalidate();
                    }
            }
        } 
```

但即使这样做。Invalidate(); 我没有看到新表格已关闭。但是如果我使用在 mf.Close(); 上放置一个断点；并进入（F11）我在继续时看到它关闭。

为什么不使用断点就不会关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:30:08.207

您将使用该`InputBindings`对象。我认为在您的情况下，最好将其放在`Window`级别（Window.InputBindings）。更多信息在这里：

[http://msdn.microsoft.com/en-us/library/system.windows.input.inputbinding.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.inputbinding.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:30:15.733

您可以通过 2 种方式解决此问题。

1.  如果您使用的是 GUI 界面，`MenuItem`请在您的菜单上添加一个控件，然后将`Shortcut`属性设置为`Ctrl+M` 然后双击`MenuItem`以编辑代码，然后调用您的`launchMagnifier()`函数。如果您不希望显示菜单，只需将`visible`属性设置为 false。如果您不想要它，这会使菜单保持隐藏状态，但仍保留该功能。

2.  如果您不想要 MenuItem，您可以捕获表单中按下的键。因此，在您的 frmMain.cs 表单中，添加一个事件来捕获键，然后在`Ctrl+M`按下时调用`launchMagnifier()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:33:52.693

有几种方法可以做到这一点。

在您的表单上将 KeyPreview 属性设置为 true

然后将 OnKeyPress 或 OnKeyDown 事件处理程序添加到表单。

在 Ctrl-M 的测试中并显示/销毁表单并将已处理 (e.Handled) 设置为 true。

由于尚未处理，任何其他按键都将传递给当前聚焦的控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:34:13.153

您可以添加 onKeyPress 或 onKeyDown 并检查是否按下了 Ctrl+M

```
private void OnKeyPress(object sender, System.Windows.Forms.KeyPressEventArgs e) 
if (((Control.ModifierKeys & Keys.Control) == Keys.Control) 
    && (e.KeyChar == 'M'|| e.KeyChar == 'm'))
{
        mf.Show();
} 
```

# c# - 当类中的某些内容发生变化时触发事件

> ID：16017588
> 
> 赞同：7
> 
> 时间：2013-04-15T14:21:36.443
> 
> 标签：c#, events

当给定类中的某些内容发生变化时，是否可以触发某些事件？

例如，我有一个具有`100`字段的类，其中一个正在外部或内部进行修改。现在我想赶上这个事件。这个怎么做？

我最想知道是否有一个技巧可以快速完成真正扩展的课程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T14:23:51.687

作为最佳实践，将您的公共字段转换为手动属性并使用 来实现您`class`的`INotifyPropertyChanged` `interface`更改`event`。

**编辑：**因为您提到了 100 个字段，我建议您像在这个很好的答案中那样重构您的代码：[Tools for refactoring C# public fields into properties](https://stackoverflow.com/a/1028689/952310)

这是一个例子：

```
private string _customerNameValue = String.Empty;
public string CustomerName
{
    get
    {
        return this._customerNameValue;
    }

    set
    {
        if (value != this._customerNameValue)
        {
            this._customerNameValue = value;
            NotifyPropertyChanged();
        }
    }
}
private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

看看这个：[INotifyPropertyChanged 接口](http://msdn.microsoft.com/library/system.componentmodel.inotifypropertychanged.aspx)

# mysql - 如何选择行数作为主查询结果的子查询

> ID：16017596
> 
> 赞同：0
> 
> 时间：2013-04-15T14:22:10.697
> 
> 标签：mysql, count, subquery

`WHERE places.x < 5`只有当这是真的时，我才试图在一个地方收集物品的数量。原因是`at_places`和`places`表都包含数万行。

这是我正在尝试做的事情的总体思路；但我无法测试它，因为它需要很长时间才能完成。我认为能够在一个查询中同时包含计数的抓取和位置会比运行后续查询来抓取返回的每个位置的计数要快得多。

```
SELECT  `places`.`id`, 
        `places`.`name`,
        (SELECT COUNT(*) FROM `at_places` WHERE places_id=places.id) AS count
FROM `places`
WHERE places.x < 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:25:43.647

您可能会发现显式连接效果更好：

```
select p.id, p.name, ap.cnt
from places p join
     (select ap.places_id, count(*) as cnt from at_places ap group by ap.places_id) ap
     on p.id = ap.places_id
where p.x < 5 
```

我相信您的性能问题是由于子查询为外部查询中的每一行执行一次。上的索引`at_places.places_id`也应该加快查询速度。

# java - 排序树图 关于对象的属性

> ID：16017597
> 
> 赞同：1
> 
> 时间：2013-04-15T14:22:12.573
> 
> 标签：java, swing, jtable

我有创建 Books 对象或 Author 对象的地图的 Library 类，我需要能够使用 Book 对象属性对地图进行排序。该地图用于创建两个 JTable，一个用于书籍，另一个用于作者，我需要能够对书籍表中作为书籍属性的列进行排序。我必须使用地图，不能只使用 JTable 排序器顺便说一句。使用 bookIndex 作为键创建地图会为 bookIndex 正确排序地图，但这是自然顺序。

如何对已经由 Book 对象其他属性创建的地图进行排序。例如，如果我希望它根据 bookTitle 对现有地图进行排序？

我知道我需要使用比较器，但我已经搜索并尝试过，但无法弄清楚。

主要（创建图书馆对象并创建书籍和作者对象并将其添加到图书馆地图）：

```
 static Library<Book> bookLibrary = new Library<Book>();
    Book book = new Book();
        book.setBookIndex(Integer.parseInt(ar[1]));
        book.setTitle(ar[2]);
        book.setGenre(ar[3]);
        book.setPrice(ar[4]);
        book.setAuthorIndex(Integer.parseInt(ar[5]));

    bookLibrary.add(book.getBookIndex(), book); //adds the book object to library

    static Library<Author> authorLibrary = new Library<Author>();
    Author author = new Author();
                author.setAuthorIndex(Integer.parseInt(ar[1]));
                author.setName(ar[2]);
                author.setStreetAddress(ar[3]);
                author.setCity(ar[4]);
                author.setState(ar[5]);
                author.setZip(ar[6]);
                author.setPhone(ar[7]);

    authorLibrary.add(author.getAuthorIndex(), author); //adds the author object to the library 
```

书类（作者类与此类似）：

```
 public class Book implements BookInterface {

        private Integer bookIndex;
        private String title, genre, price;
        private Integer authorIndex;

       ....
    } 
```

图书馆类：

```
 public class Library<T> implements LibraryInterface<T> {
        private Map<Integer, T> map = new TreeMap<Integer, T>();
        ...
    } 
```

. . .

为了将来参考，这里是我如何让它工作的：

```
 public class Library<T> implements LibraryInterface<T> {
        private Map<String, T> map = new TreeMap<String, T>(new bookComparator()); 
```

和新课程：

```
 public class bookComparator implements Comparator<Object> {

@Override
public int compare(Object o1, Object o2) {
    String bookTitle1 = (String) o1;
    String bookTitle2 = (String) o2;
    int res = bookTitle1.compareToIgnoreCase(bookTitle2);;
    return res != 0 ? res : 1;

        }
    } 
```

并在主类中创建一个排序方法来创建一个新的 TreeMap。我会创建原始地图的副本并替换原始地图，但它现在可以使用：

```
 /**
 * Sort The Book Table by Book Title
 * 
 * @param bookLibrary2
 */
private void sortByBookTitle() {
    bookRowElement.clear();
    Library<Book> sortBookLibrary = new Library<Book>();
    for ( Entry<String, Book> entry: bookLibrary.entrySet()) {

        String key = entry.getValue().getTitle();  //Additional sorts can be mad by changing .getTitle() to getWhatever()
        Book value = entry.getValue();
        sortBookLibrary.add(key, value);
    }
    for ( Entry<String, Book> entry: sortBookLibrary.entrySet()) {
        bookRowElement.addElement(createBookSearchList(entry.getValue()));
    }
    bookTable.repaint();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:24:09.010

在您的情况下，我只需使用给定的比较器创建新的 TreeMap 并将所有元素复制到新地图。我想你会得到你的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:27:18.590

[**TreeMap 有一个构造函数，您可以在其中传入您的自定义 Comparator**](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap%28java.util.Comparator%29)。我想这会为你完成这项工作。

```
public TreeMap(Comparator<? super K> comparator) 
```

你可以这样上课：

```
public class Library<T> implements LibraryInterface<T> {
    private Map<Integer, T> map = new TreeMap<Integer, T>(myComparator);
    // ...
} 
```

# iphone - 保存证书签名请求以供多次使用是否安全？

> ID：16017600
> 
> 赞同：1
> 
> 时间：2013-04-15T14:22:17.357
> 
> 标签：iphone, ssl, apple-push-notifications, csr

对于 iphone 推送通知 SSL 证书，您需要向他们提供 CSR 文件...

一段时间以来，我保存了一个 CSR 文件，每当我想生成 SSL 证书时，我总是上传相同的 CSR 文件......

现在我一直在想，因为在生成 CSR 文件时，我实际上是在生成私钥，也可能是公钥......

所以我想知道当我使用相同的 CSR 文件时我面临什么缺点.. 虽然当我下载 SSL 证书时，它们出现在钥匙串中，好像有多个私钥（尽管它们具有相同的名称）和每个都附加到不同的 SSL 证书。是否建议每次都生成一个新的 CSR 文件？为什么？如果没有必要，那怎么办？谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:32:58.477

证书请求包含公钥，您有一个关联的私钥。因此，通过重复使用它，您基本上可以一次又一次地签署相同的密钥对。

缺点很明显 - 如果一个密钥泄露，所有证书都会被泄露。这就是为什么每次都需要重新生成密钥对的原因。

# wpf - WPF：用户交互后显示和隐藏用户控件

> ID：16017602
> 
> 赞同：0
> 
> 时间：2013-04-15T14:22:24.110
> 
> 标签：wpf, vb.net, user-interface, user-controls

我有以下窗口，其中包含上部区域的用户控件（取决于进程的状态）和一个按钮。单击按钮后，将隐藏一个用户控件，并显示另一个用户控件。通过从第一个控件到第二个控件的更改，窗口被冻结，直到第二个控件完成任务。

第二个控件包含一个记录步骤的 ListView。我想在此过程中直接查看此日志记录。但我只能在一切完成后才能看到它。如何在第二个控件开始工作之前刷新窗口？

像这样的代码行

```
Me.UpdateLayout() 
```

不工作...

整个程序应该是一个具有三个屏幕的更新工具（1\. 设置，2\. 更新过程的记录，3\. 完成对话框）。因此，我需要在完成后直接知道日志记录的单个步骤。

我当前的 XAML 如下：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:SiS.Controls="clr-namespace:SiSConverter"
    Title="Konvertierung von SiS-Anwendungen"
    Height="400" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="50px" />
        </Grid.RowDefinitions>

        <SiS.Controls:Settings x:Name="ucSettings" />
        <SiS.Controls:Upgrade x:Name="ucUpgrade" />
        <SiS.Controls:Finish x:Name="ucFinish" />

        <Button Name="btnContinue" Width="100px" Height="30px" Grid.Row="1" Margin="0,0,10,0" HorizontalAlignment="Right" />
    </Grid>
</Window> 
```

以及后面对应的代码：

```
Class MainWindow 

    Private _Step As Integer = -1
    Private Property [Step] As Integer
        Get
            Return _Step
        End Get
        Set(value As Integer)
            _Step = value

            Me.ucSettings.Visibility = Visibility.Collapsed
            Me.ucUpgrade.Visibility = Visibility.Collapsed
            Me.ucFinish.Visibility = Visibility.Collapsed
            Me.btnContinue.Content = "Weiter"

            Select Case _Step
                Case 0
                    Me.ucSettings.Visibility = Visibility.Visible
                Case 1
                    Me.ucUpgrade.Visibility = Visibility.Visible
                Case 2
                    Me.ucFinish.Visibility = Visibility.Visible
                    Me.btnContinue.Content = "Beenden"
                Case Else
            End Select

            Me.UpdateLayout() 'doesn't work
        End Set
    End Property

    Private Sub MainWindow_Initialized(sender As Object, e As EventArgs) Handles Me.Initialized
        Me.Step = 0

        For Each Item As System.IO.FileInfo In New System.IO.DirectoryInfo("Converters").GetFiles()
            Dim oConverter As ISiSConverter = System.Reflection.Assembly.LoadFrom(Item.FullName).CreateInstance("Upgrade.Main", True)
            Me.ucSettings.Converters.Add(oConverter)
        Next
    End Sub

    Private Sub btnContinue_Click(sender As Object, e As RoutedEventArgs) Handles btnContinue.Click
        Select Case Me.Step
            Case 0 'Einstellungen
                Me.Step += 1

                Me.btnContinue.IsEnabled = False

                Me.ucSettings.Converters.FindAll(Function(item) item.DoUpgrade).ForEach(Sub(item) item.Upgrade())

                Me.btnContinue.IsEnabled = True
            Case 1 'Upgrade
                Me.Step += 1
            Case 2 'Abschluss
                Me.Close()
            Case Else
        End Select
    End Sub
End Class 
```

感谢您的任何回复。

**编辑：** 该程序由三个步骤组成。在第一步中将配置要做什么。

![第一步：配置](https://i.stack.imgur.com/F2odg.png)

单击右下角的按钮应为每个标记的项目（绿色按钮，红色将被忽略）执行一些操作，如第二步列表所示。

![第 2 步：记录](https://i.stack.imgur.com/B4QxA.png)

如果步骤 2 完成，将显示完成屏幕并且可以关闭程序（此屏幕仍在设计中）。

![第三步：完成](https://i.stack.imgur.com/BGWcp.png)

在 WinForms 和 ASP.NET 中，我也以我这次的方式显示和隐藏用户控件（也许这也不是在一个好的实现之前）。如果 WPF 中有更好的可能性，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:56:03.053

您的问题是您的 UI 线程，它是唯一可以更新 View / Window 显示的元素的线程太忙于运行您的

```
Me.ucSettings.Converters.FindAll(Function(item) item.DoUpgrade).ForEach(Sub(item) item.Upgrade()) 
```

^^ 函数，因此在完成之前无法更新视图/渲染元素。

一种明确显示这一点的“作弊”（仅将其用作信息，不要在代码中使用它）

```
Application.Current.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Background,
                                                   Sub()
                                                     Me.ucSettings.Converters.FindAll(Function(item) item.DoUpgrade).ForEach(Sub(item) item.Upgrade())
                                                   End Sub) 
```

^^ 这将`UserControl`在单击按钮时显示您的新内容。但是，您仍然遇到 UI 无响应的问题。

您需要通过使用诸如[BackgroundWorkers](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)之类的东西从主线程卸载工作，以了解您在代码隐藏中所做的工作以保持 UI 响应，然后在您需要更新 UI 控件时相应地通知 UI 线程。

# c# - 验证日期取决于地区

> ID：16017603
> 
> 赞同：6
> 
> 时间：2013-04-15T14:22:30.480
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有一个 MVC4 应用程序，它在英国编译并托管在美国服务器上。在我的模型中，我有一个必需的日期字段。

附加到该字段的是一个日期选择器，在选择一个日期时，它会将日期设置为英国格式“DD/MM/YYYY”，例如 23/12/2013。在提交表单时，应用程序会引发验证错误，因为它不需要该格式。

在 MVC4 中我如何：

1.  接受两种日期格式，即覆盖日期格式？我已设置日期格式，但无法指定多种日期格式
2.  服务器端我正在使用 Linq 将日期保存到数据库中。这也会引发错误，因为格式不正确。我怀疑我需要转换为英国日期？
3.  加载详细信息时，根据用户的位置以正确的格式输入日期
4.  检测用户服务器端的位置？

有没有人知道如何根据用户的全球化进行非常验证？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:26:40.810

您是否添加了以下部分`web.config`？

```
<globalization 
    enableClientBasedCulture="true" 
    uiCulture="auto" 
    culture="auto" /> 
```

并以 DateTime 格式读取代码中的日期。那不应该给你带来问题。

另一种方法是在您的服务器端代码中始终将日期读取为 DateTimeUTC 并且当您在屏幕上显示日期时，使用`.ToLocalTime()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:26:29.550

在网络配置中，在全球化部分中，将文化设置为“自动”。这将使用用户当前的文化（包括数字和日期时间格式）

```
<globalization culture="Auto" /> 
```

.net 框架将根据用户文化解析和呈现数据，MVC 和实体都将正常工作。

# wpf - 音频未在使用 VS2012 通过 Installshield LE 安装的 wpf 应用程序中播放

> ID：16017606
> 
> 赞同：0
> 
> 时间：2013-04-15T14:22:38.037
> 
> 标签：wpf, mediaelement, installshield-le

我正在使用`MediaElement`. 创建`MediaElement`如下：`XAML`

```
<MediaElement x:Name="audio" HorizontalAlignment="Left" Height="50" VerticalAlignment="Top" Width="50" Source="Resources/music.mp3"/ > 
```

音频在构造函数中播放如下：

```
audio.play(); 
```

该应用程序通过调试运行完美运行`F5`。但是，当我在机器上创建并安装时，应用程序正在运行，但没有播放音乐。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:05:00.680

了解你的依赖。编写安装程序就是自动部署这些依赖项。我无法更具体地回答，因为我没有使用 MediaElement 类的经验。我认为安装框架就足够了，但也许您缺少编解码器或其他东西。确定然后我们可以讨论如何安装它。

# javascript - 在 JSDOC 中记录泛型类型参数

> ID：16017627
> 
> 赞同：42
> 
> 时间：2013-04-15T14:23:41.080
> 
> 标签：javascript, webstorm, jsdoc

在[JSDoc中，可以](http://usejsdoc.org/tags-type.html)[像这样](http://usejsdoc.org/tags-type.html)记录数组内容的确切类型：

```
/** @param {Array.<MyClass>} myClasses An array of MyClass objects. */
TestClass.protoype.someMethod = function( myClasses ){
   myClasses[0].aMethodOnMyClass();
} 
```

这使得像 WebStorm 这样的 IDE 中的代码完成实际上在`[0].`. 这适用于 Array 类型，但是我有自己的集合类型，我也想在其中使用此功能。问题是我找不到正确的语法（也许因为还没有）。我希望能够像这样声明我的班级：

```
/**
 * @typeparam {T} the type parameter
 * @constructor {Test2.<T>}
 * */
Test2 = function(){};

/**
 * @returns {T} a value of type T, where T is the generic type parameter of Test2
 */
Test2.prototype.getGenericValue = function(){} 
```

此语法或功能不适用于我的 IDE 并且未在[此处](https://developers.google.com/closure/compiler/docs/js-for-compiler#types)列出，因此我想知道是否有此用例的语法，无论是用于 WebStorm 还是任何其他 JS 创作工具。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-15T15:29:32.743

您可以尝试使用`@template`标签（Google Closure 库中使用的未记录标签 - 极其有限的泛型形式）。就像是：

```
/**   
 * Search an array for the first element that satisfies a given condition and   
 * return that element.   
 * @param {Array.<T>|goog.array.ArrayLike} arr Array or array   
 *     like object over which to iterate.   
 * @param {?function(this:S, T, number, ?) : boolean} f The function to call   
 *     for every element. This function takes 3 arguments (the element, the   
 *     index and the array) and should return a boolean.   
 * @param {S=} opt_obj An optional "this" context for the function.   
 * @return {T} The first array element that passes the test, or null if no   
 *     element is found.   
 * @template T,S   
 */  
goog.array.find = function(arr, f, opt_obj) {    
   var i = goog.array.findIndex(arr, f, opt_obj);    
   return i < 0 ? null : goog.isString(arr) ? arr.charAt(i) : arr[i];  
}; 
```

WebStorm 使用此标记进行类型提示 - 即，如果我们在上面的示例中将字符串数组传递给 goog.array.find ，IDE 将知道返回类型是字符串，因此将建议字符串完成选项等。

不确定这是否是您要查找的内容...看起来相关的帖子[在这里](https://groups.google.com/forum/?fromgroups#!topic/closure-compiler-discuss/-5PNxtu5E1k)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-10-11T16:18:54.947

与此同时，对这个特性的支持已经完成，现在在[Closure Compiler JSDOC 页面上记录了 generics](https://github.com/google/closure-compiler/wiki/Generic-Types)。

基本上它对于 ES6 类的工作方式如下：

```
/** @template T */
class Foo {
  /** @return {T} */
  get() { ... };

  /** @param {T} t */
  set(t) { ... };
} 
```

...对于 ES6 之前的代码，就像这样：

```
/**
 * @constructor
 * @template T
 */
Foo = function() { ... }; 
```

和

```
/** @return {T} */
Foo.prototype.get = function() { ... };

/** @param {T} t */
Foo.prototype.set = function(t) { ... }; 
```

WebStorm 7.0在编写原始答案时[不](http://youtrack.jetbrains.com/issue/WEB-7522)支持此功能，但截至今天（2019 年），所有 JetBrains IDE 都正确理解此语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T08:50:06.727

以下代码在 WebStorm 8 中对我来说很好用。

```
/** @type {Array.<MyPair.<Event, Array.<Thought>>>} */
scope.pairs = [];

/**
 * @template TFirst, TSecond
 */
function MyPair(first, second){
    this.first = first;
    this.second = second;
}
/** @type {TFirst} */
MyPair.prototype.first = null;
/** @type {TSecond} */
MyPair.prototype.second = null;

...
function Event(){}
...
...
function Thought(){}
... 
```

# javascript - 如何将画布的像素大小加倍？

> ID：16017633
> 
> 赞同：0
> 
> 时间：2013-04-15T14:23:53.300
> 
> 标签：javascript, css, html, canvas, scale

我有一个大小为 320*200 像素的画布。现在我想将像素大小加倍，得到 640*400 的显示。我不希望它有更高的像素分辨率，只是一切都翻了一番（更大的可见像素）。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:31:47.103

您可以使用高度和宽度属性调整分辨率，同时通过样式调整大小的显示。

```
<canvas width="320" height="200" style="width:640px;height:400px;"></canvas> 
```

# javascript - 在计算过程中获取 NaN

> ID：16017640
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:24:17.970
> 
> 标签：javascript, nan

我正在尝试计算除 P&P 之外的精选 CD 的总数。我正在使用的代码总共是 NaN？

这里很迷茫。我究竟做错了什么？

```
function calculateTotal() {
    var Collection method = document.getElementById('collection').value +
    var select CDs = document.getElementById('selectCD').value;
    var total = document.getElementById('total');
    total.value = 'collection'(total) + 'selectCD'(total);
} 
```

这是一个带有完整代码[的 JSFiddle 。](http://jsfiddle.net/MPtN9/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:47:26.990

在您的小提琴中`collection`，是*包含*`selectCD`输入字段的 div（不是输入字段）。你不能这样做。*`divElm.value`*

 *然后，您小提琴中的 php 代码通常能够输出多于一张 cd，因此您需要将所选 cd 的总数添加到。

*使您的*代码正常工作所需的最小更改是：

```
function calculateTotal(){
    var coll = document.getElementsByName('deliveryType'), 
         cds = document.getElementsByName('cd[]'),
       cdTot = 0,
           L = coll.length;
    while(L--){if(coll[L].checked){   //get shipping costs
        coll=Number(coll[L].getAttribute('title')); break; 
    }         }
    L=cds.length;
    while(L--){if(cds[L].checked){    //add total prices
        cdTot += Number(cds[L].getAttribute('title')); 
    }         }
    //  output total
    document.getElementById('total').value = coll + cdTot;
} 
```

此外，您还想设置更多触发器来运行`calculateTotal`（来自运费和选定的 cd；这样，如果它们发生变化，总字段将更新为）。
根据您的小提琴查看这些更改（和*一些其他修复）的**[工作](http://jsfiddle.net/MPtN9/4/)*小提琴，这样您就可以在实际中看到它（计算）。

 *但是，我确实希望这是针对学校问题而不是针对实时网店。我会重新考虑我的策略，因为我认为您目前正在努力解决一个大的安全漏洞。

祝你好运！**

# oop - 将单元格发送到方法时，MATLAB 中的 OOP 问题

> ID：16017642
> 
> 赞同：1
> 
> 时间：2013-04-15T14:24:20.190
> 
> 标签：oop, class, matlab

我正在 MATLAB 中使用 OOP（面向对象编程）进行简单测试。我做了一个简单的类，包括一个构造函数。另外，我做了三个关于属性的部分：三个常规属性；一个常数；和三个从属属性。我包含了一些常规属性的获取/设置方法、一个输出方法和一个构造函数使用的受保护/静态方法：'getPropertyValue(propertyName, inputCell)。

静态方法会导致问题。我正在发送两个参数：字符串类型的“propertyName”和单元格类型的“inputCell”。最后一个参数应该发送从构造函数中定义的 varargin 复制的所有输入参数。

当我尝试使用该类并在命令行中创建它的实例时，

```
a = FigureObjects('promien',10) 
```

我收到此错误：

> 'cell' 类型的输入参数的未定义函数 'getPropertyValue'。
> 
> FigureObjects 中的错误（第 26 行）[temp,status,msgStatus] = getPropertyValue('podstawa',inputCell);

我虽然可以将任何内容发送到任何函数，例如字符串、单元格、矩阵等。有没有办法将单元格发送到该函数并读取其内容？

谢谢

PS。这是我的代码：

```
classdef FigureObjects
%FIGUREOBJECTS Summary of this class goes here
%   Detailed explanation goes here

properties
    podstawa
    wysokosc
    promien
end

properties (Constant = true, Hidden = true)
    liczbaPi = 3.14
end

properties (Dependent = true)
    obwodKola
    obwodProstokata
    obwodKwadratu
end

methods
    % Constructor
    function obj = FigureObjects(varargin)
        inputCell = varargin;
        if nargin > 0
            [temp,status,msgStatus] = getPropertyValue('podstawa',inputCell);
            if status
                obj.podstawa = temp;
            else
                error(msgStatus);
            end
            [temp,status,msgStatus] = getPropertyValue('wysokosc',inputCell);
            if status
                obj.wysokosc = temp;
            else
                error(msgStatus);
            end
            [temp,status,msgStatus] = getPropertyValue('promien',inputCell);
            if status
                obj.promien = temp;
            else
                error(msgStatus);
            end
        end
    end

    % get functions
    function obwodKola = get.obwodKola(obj)
        if ~isempty(obj.promien)
            obwodKola = 2*FigureObjects.liczbaPi*obj.promien;
        else
            error('''promien'' is not defined.');
        end
    end
    function obwodProstokata = get.obwodProstokata(obj)
        if (~isempty(obj.podstawa) && ~isempty(obj.wysokosc))
            obwodProstokata = 2*(obj.podstawa*obj + obj.wysokosc);
        else
            error('Either ''podstawa'' or/and ''wysokosc'' are not defined.');
        end
    end
    function obwodKwadratu = get.obwodKwadratu(obj)
        if ~isempty(obj.podstawa)
            obwodKwadratu = 4*obj.podstawa;
        else
            error('''podstawa'' is not defined.');
        end
    end
    function promien = get.promien(obj)
        promien = obj.promien;
    end
    function podstawa = get.podstawa(obj)
        podstawa = obj.podstawa;
    end
    function wysokosc = get.wysokosc(obj)
        wysokosc = obj.wysokosc;
    end

    % set functions
    function obj = set.promien(obj,promien)
        if isnumeric(promien)
            obj.promien = promien;
        else
            error('''promien'' must be numeric.');
        end
    end
    function obj = set.podstawa(obj,podstawa)
        if isnumeric(promien)
            obj.podstawa = podstawa;
        else
            error('''podstawa'' must be numeric.');
        end
    end
    function obj = set.wysokosc(obj,wysokosc)
        if isnumeric(wysokosc)
            obj.wysokosc = wysokosc;
        else
            error('''wysokosc'' must be numeric.');
        end
    end

    % output functions
    function output = obwod(theFigureObj, rodzajFigury)
        if strcmpi(rodzajFigury,'kolo')
            output = theFigureObj.obwodKola;
        elseif strcmpi(rodzajFigury,'prostokat')
            output = theFigureObj.obwodProstokata;
        elseif strcmpi(rodzajFigury,'kwadrat')
            output = theFigureObj.obwodKwadratu;
        else
            error('Cannot identify a figure.');
        end
    end % obwod
end % methods

methods (Access = protected, Static)
    function [propertyValue, status, msgString] = ...
            getPropertyValue(propertyName, inputCell)
        I = strcmpi(propertyName,inputCell);
        if sum(I) ~= 0
            if (find(I)+1) <= length(inputCell)
                propertyValue = inputCell{find(I)+1};
                status = true;
                msgString = 'No errors';
            else
                propertyValue = [];
                status = false;
                msgString = ['Too few arguments for ''' propertyName '''.'];
            end
        else
            propertyValue = [];
            status = false;
            msgString = ['No property ' propertyName];
        end
    end % getPropertyValue(propertyName, cellArray)
end % methods (Access = protected, Static) 
```

结束 % 类定义

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:29:58.157

Just because the method is static, doesn't mean you can use it as if it were a separate function in the search path. You need to call `obj.getPropertyValue` or `FigureObjects.getPropertyValue` instead.

# ruby-on-rails - Rails 查询关联

> ID：16017646
> 
> 赞同：1
> 
> 时间：2013-04-15T14:24:32.230
> 
> 标签：ruby-on-rails

我对 Rails 相当陌生，并且了解连接和关联的基础知识，但我在如何最好地使用 Rails 进行一些一般查询方面遇到了挑战。我已经查看了很多文档，但仍不清楚此查询的最佳方法。型号如下

用户：

```
has_many :accounts 
```

帐户：

```
belongs_to :user
belongs_to :address, :class_name => "Location", :foreign_key => 'address_id' 
```

地址：

```
belongs_to :account  (This is really a many to one relationship where an address,
                      can belong to more than one account) 
```

查询是查找用户的所有帐户地址。一个标准的 sql 查询看起来像这样。

```
SELECT Users.ID AS Users_ID, Users.Username, Account.acct_name, Address.*
FROM Address INNER JOIN (Users INNER JOIN Account ON Users.ID = Account.user_id) 
ON Address.ID = Account.address_id
WHERE (((Users.ID)=2)); 
```

在没有直接 sql 查询的情况下，rails 似乎有很多功能可以做到这一点。这样做的最佳方法是什么，模型是否正确？是正确模型中的外键表示。

预先感谢您的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:39:11.417

首先，根据您所描述的，Address 类可能应该具有关系 has_many :accounts 而不是 belongs_to :account。一般的经验法则是当该模型的表中有一个外键用于belongs_to 表时使用belongs_to。但是对于这个真正无关紧要的查询，因为您是从用户开始的。

像这样的东西应该接近你想要的：

```
User.where(:id => 2).includes(:accounts => :addresses) 
```

有关详细信息，请参阅[Rails 指南](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)。squeel gem 对于更高级的查询功能也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:28:21.533

您可能正在寻找[**has_many :through** association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)。

```
class User < AR::B
  has_many :accounts
  has_many :addresses, through: :accounts
end 
```

然后，您可以使用 查询用户的所有地址`@user.addresses`。

如果您想查看 ActiveRecord 为您的查询生成的 SQL 查询，您可以调用[**`.to_sql`**](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-to_sql)一个查询：`@user.addresses.to_sql`.

**编辑**：关于您的关联设置的其余部分，您需要重新设计地址和帐户的加入方式。一种方法可能是这种方法。

```
class Account < AR::B
   belongs_to :user
   belongs_to :address # the accounts table should have an address_id integer column
end

class Address < AR::B
  has_many :accounts
end 
```

有关可以传递给关联的选项的更多信息，请参阅[Rails API 文档](http://api.rubyonrails.org/)。

# c++ - 扩展稀疏式矩阵的推力方式是什么？

> ID：16017652
> 
> 赞同：1
> 
> 时间：2013-04-15T14:24:57.133
> 
> 标签：c++, cuda, thrust

基本上，我有一个“稀疏风格”数据集，

```
thrust::device_vector<int> indexes(smallsize);
thrust::device_vector<float> values(smallsize); 
```

我想把它扩展成一个

```
thrust::device_vector<float> expanded(fullsize); 
```

我知道如何用内核做到这一点：

```
template <typename T>
__global__ void AssignByIndex
    (
    T* inval,
    T* outval,
    size_t* keys,
    int Ilength
    )
{
    int index = blockIdx.x * blockDim.x + threadIdx.x;

    if (index < Ilength)
    {
        const size_t key = keys[index];//cross access,slow
        outval[key]=inval[index];
    }
}; 
```

但是 1）这感觉就像推力可以轻松完成的事情，并且 2）这不允许我使用花哨的迭代器。我认为我只是在搜索中使用了不正确的术语，或者只是没有足够的创意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:46:21.357

这听起来像是典型的分散操作。Thrust 有一个[scatter 函数](http://thrust.github.io/doc/group__scattering.html)，可以让你做这样的事情：

```
thrust::scatter(values.begin(), values.end(), indexes.begin(), expanded.begin()); 
```

这将分散`values`到 的索引中`expanded`。

# jquery - 许多元素上的jquery队列

> ID：16017654
> 
> 赞同：0
> 
> 时间：2013-04-15T14:25:02.307
> 
> 标签：jquery, html, css

我有一个列表导航。子导航是隐藏的，应该在鼠标悬停时显示。（我试过 mouserover、mouseenter 和 hover ..）

没有一个真正起作用。问题是，它在跳跃。如果我快速将鼠标悬停在他们都想上下滑动的所有元素上，那就太丑了。

所以我尝试对元素进行 queue() 以查看动画（向下或向上滑动）是否完成以显示下一个。现在队列总是指向第一个列表项。

如何正确使用 queue() 来查看所有元素的一个队列？

或者最好的方法是什么？唯一必须是：它必须是一个幻灯片。只是设置 display:block 或 hidden 看起来不够好......

[小提琴在这里](http://jsfiddle.net/caramba/JvLmZ/1/)

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
<body>
<style type="text/css">

ul.main-nav {
    margin: 0; padding: 0;
    text-align: center;
}
ul.main-nav li.main-nav {
    width:111px;
    height:35px;
    list-style: none;
    float: left;
    position: relative;
    padding: 10px 15px 20px 14px;
    margin:0 0 0 1px;
}
ul.main-nav li.main-nav ul.icon.subnav {
    position: absolute;
    width:140px;
    padding-bottom:0px;
    text-align: left;
    display: none;
}
ul.main-nav li.main-nav ul.subnav li {
    float: none;
    display: block;
    border-bottom:1px solid #434343;
}
ul.main-nav a {
    display:block;
}
ul.main-nav ul.subnav li a {
    padding: 8px 5px 8px 10px;
}
</style>
<span class="queue"></span>
<ul class="main-nav">
    <li class="main-nav active">
        <a class="main-nav" href="#">main-nav-1</a>
        <ul class="icon subnav">
            <li><a href="#">subnav 1</a></li>
            <li><a href="#">subnav 2</a></li>
            <li><a href="#">subnav 3</a></li>
            <li><a href="#">subnav 4</a></li>
        </ul>
    </li>
    <li class="main-nav">
        <a class="main-nav" href="#">main-nav-2</a>
        <ul class="icon subnav">
            <li><a href="#">subnav 1</a></li>
            <li><a href="#">subnav 2</a></li>
            <li><a href="#">subnav 3</a></li>
            <li><a href="#">subnav 4</a></li>
        </ul>
    </li>
    <li class="main-nav">
        <a class="main-nav" href="#">main-nav-3</a>
        <ul class="icon subnav">
            <li><a href="#">subnav 1</a></li>
            <li><a href="#">subnav 2</a></li>
            <li><a href="#">subnav 3</a></li>
            <li><a href="#">subnav 4</a></li>
        </ul>
    </li>
    <li class="main-nav">
        <a class="main-nav" href="#">main-nav-4</a>
        <ul class="icon subnav">
            <li><a href="#">subnav 1</a></li>
            <li><a href="#">subnav 2</a></li>
            <li><a href="#">subnav 3</a></li>
            <li><a href="#">subnav 4</a></li>
        </ul>
    </li>
<div class="clear"></div>
</ul>

<script>
$(document).ready(function() {
    var subnav = $("ul.subnav");
    function showIt() {
        var n = subnav.queue("fx");
        $("span.queue").text( n.length );
        setTimeout(showIt, 20);
    }
    showIt();

    $('li.main-nav').hover(function () {
        $(this).children('ul').slideDown(600,function(){});
    },function () {
        $(this).children('ul').slideUp(600,function(){});
    });

});
</script>
</body>
</html> 
```

帮助将不胜感激。非常感谢您的寻找和回答以及任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:31:50.353

Adding `.stop()` will prevent the animation from continuing
**UPDATED**

```
$('li.main-nav').hover(function () {
    $(this).children('ul').stop().slideToggle(600);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:27:39.420

> 问题是，它在跳跃。如果我快速将鼠标悬停在他们都想上下滑动的所有元素上，那就太丑了。

hoverIntent插件[非常](http://cherne.net/brian/resources/jquery.hoverIntent.html)适合这个。它非常小，我几乎在所有项目中都使用过它。只需更改为：

```
 $('li.main-nav').hoverIntent(makeTall, makeShort); 
```

这是一个工作 [小提琴](http://jsfiddle.net/JvLmZ/4/)

轻微的延迟将使导航感觉比导航更自然，`stop()`它仍然会像那样跳跃但不会排队（并在您停止时继续）。

# javascript - 如何从 Javascript 中先前选择的单词和短语列表中生成随机选择的单词或短语？

> ID：16017657
> 
> 赞同：-6
> 
> 时间：2013-04-15T14:25:24.383
> 
> 标签：javascript, html, random, words

对于我高中的计算机编程课程，我需要为学期末制作一个程序。目前我正在考虑做一个 Black Ops 2 加载生成器，为此我需要在 Javascript 中生成随机单词。我希望能够从单词列表中生成一个单词。所以如果我的单词列表是这样的：

```
Horse,
Pig,
Dog,
Cat,
Parrot,
Iguana, 
```

然后我希望能够随机生成其中一个，然后将其显示在文本框中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:28:42.487

1.  Put these items in an array. `var array = ["Horse", "Pig", "Dog", "Cat", "Parrot", "Iguana"];`
2.  Generate a random number. `var randInt = randomGenerator(0, array.length - 1);` ( [Generating random whole numbers in JavaScript in a specific range?](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range) )
3.  Use the random number to get an item from the array. `var item = array[randInt];`
4.  Use `document.getElementById` to get the textbox you want, and use `.value =` to set the textbox's value. `var textbox = document.getElementById("textbox_id").value = randInt;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:30:06.900

You just use Math.random() and index into the array of words.

```
var words = ['Horse',
'Pig',
'Dog',
'Cat',
'Parrot',
'Iguana'
];
function randomWord(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

for(var x=0; x<20; x++)
    console.log(randomWord(words)); 
```

# sql-server - 将列值从一个 database.table 复制到另一个 database.table

> ID：16017660
> 
> 赞同：7
> 
> 时间：2013-04-15T14:25:32.100
> 
> 标签：sql-server, tsql

让我们保持简短和甜蜜

我想这样做（我现在已经失败了很多次，一次尝试甚至用空白更新了 Row）：

```
UPDATE Database2.Table1 
SET (Database2.Table1.Column1, Database2.Table1.Column2, Database2.Table1.Column3) 
VALUES 
   (Database1.Table1.Column1, Database1.Table1.Column2, Database1.Table1.Column3)
WHERE Database2.Table1.Column1 = Database1.Table1.Column1 
```

这两个已经包含相同的值，但其他 2 列不包含，这就是我希望通过此查询更改的内容。

以下是每张桌子的外观：

**数据库1.表1**

```
[id]
[name]
[applicationdate]
[startdate]
[shortdescription]
[longdescription]
[displayimg]
[contact]
[website]
[created]
[urlbase]
[site]
[keywords]
[type]
[location] 
```

**数据库2.表1**

```
[id]
[name]
[applicationdate]
[startdate]
[content]
[keywords]
[customerid]
[urlbase]
[shortdescription]
[meta]
[type]
[site]
[searchurlbase]
[lang]
[educationlength]
[locations]
[educationwebsite]
[contact]
[tags]
[educationtypes]
[created]
[category] 
```

非常感谢任何帮助，感谢您的宝贵时间:)

对不起，如果这没有任何意义，我在试图解释我遇到的问题时很容易感到困惑

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T14:39:19.097

```
UPDATE dest
  SET column2 = src.column2,
      column3 = src.column3
FROM Database2.dbo.Table1 AS dest 
INNER JOIN Database1.dbo.Table1 AS src
ON dest.column1 = src.column1; 
```

鉴于您的整理问题，您可以在相等操作中指定整理。不知道哪一方给出了问题，并假设您不关心区分大小写：

```
UPDATE dest
  SET column2 = src.column2,
      column3 = src.column3
FROM Database2.dbo.Table1 AS dest 
INNER JOIN Database1.dbo.Table1 AS src
ON dest.column1 COLLATE Finnish_Swedish_CI_AS
 = src.column1  COLLATE Finnish_Swedish_CI_AS; 
```

如果您关心区分大小写，则将两个子句都更改为`_CS_AS_`一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-16T05:03:36.590

如果您的数据库在同一台服务器上，那么在 mysql 中太容易了。mysql命令是： **insert into db2.table_name(column_name you want) select from table1_name.coumn_name you want from table1**

例如，insert into db2.new(id,name,email) select from register.id,register.name,register.email from register。

其中，db2 是第二个 db 新是 db2 寄存器中的表在 db1 中，您将数据从该 db 复制到 db

# sitecore - 用户角色未更新

> ID：16017661
> 
> 赞同：5
> 
> 时间：2013-04-15T14:25:41.210
> 
> 标签：sitecore, sitecore6

当我在**“成员”**选项卡下编辑现有用户以添加/删除**“用户角色”**时，我在 Sitecore UI 中遇到问题，它没有得到更新。但是，当我添加**新用户**并分配用户角色时，它显示正确。知道是什么导致了这个问题/或者其他人也面临同样的问题？

 ****这个问题也被其他人[在这里](http://sdn.sitecore.net/SDN5/Forum/ShowPost.aspx?postid=47611)引用。我附上了一张图片以供更多参考！

尝试在网上查找但徒劳无功，希望有人可以帮助我。提前致谢！![请参阅此图像以获取更多参考。](https://i.stack.imgur.com/ji2o4.jpg)

编辑：一步一步我在做什么：

![选择用户](https://i.stack.imgur.com/Nl3Qk.jpg) ![点击编辑按钮](https://i.stack.imgur.com/HqmuK.jpg) ![向该特定用户添加“营销设计师”用户角色](https://i.stack.imgur.com/azmXx.jpg) ![它显示添加了营销设计师，之后我单击了“确定”。 没有弹出确认。](https://i.stack.imgur.com/Kcy9Z.jpg) ![再次单击该用户并编辑：未添加营销设计器。](https://i.stack.imgur.com/BegtI.jpg)

希望这能更好地说明问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T13:04:25.563

我遇到了完全相同的问题，结果通过确保 App_Browsers 文件夹位于网站的根目录中来解决。当这不存在时，几个对话框将无法正确保存（用户角色，项目的安全分配）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-19T05:56:25.227

I had the same problem but Jay S's solution didnt work for me. I'm using Sitecore 7.2

The problem is you can't add roles to the user, but what you can do is add users to the role.

The workaround is to go to the Role Manager, then click on Members and select the users to add in to the role.

![enter image description here](https://i.stack.imgur.com/YhAQ7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:41:08.920

我在其中一个**Sitecore**版本中遇到了一个问题，其中一个角色选择器窗口不够大，因此按钮`Cancel`和`Ok`被隐藏了。我能够选择角色，但是除非我扩大窗口大小，否则我无法确认我的选择：

![sitecore - 编辑角色](https://i.stack.imgur.com/cdVMX.jpg)

您为“**编辑用户**”弹出窗口提供了屏幕截图，但没有在您单击`Edit`此屏幕后显示的屏幕截图，所以我不知道这是否也是您的问题的原因。****

# android - Android 中严重的相机崩溃和 RuntimeException

> ID：16017663
> 
> 赞同：4
> 
> 时间：2013-04-15T14:25:44.593
> 
> 标签：android, exception, crash, camera, nullpointerexception

我已经创建了几个相机应用程序，我刚刚在 3 周前将这些应用程序发布到 Google Play 市场。到目前为止，我收到了很多崩溃报告，如下所示：

**android.hardware.Camera.native_setParameters 中的**java.lang.RuntimeException**
*报告总数：2***

 ****com.potatotree.autodistance.CameraSurfaceView.surfaceCreated 中的**java.lang.NullPointerException**
*报告总数：21***

 ****android.hardware.Camera.native_autoFocus 中的**java.lang.RuntimeException**
*报告总数：2***

 ****android.hardware.Camera.native_setup 中的**java.lang.RuntimeException**
*报告总数：12***

 **到目前为止的总下载量约为 5000。似乎所有异常和崩溃都与相机有关。下面是CameraSurfaceView的源码和方法

```
public class CameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{

    private SurfaceHolder mHolder;
    private Camera mCamera;
    private Context context;

    public CameraSurfaceView(Context c) {
        super(c);

        context = c;

        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }
    public CameraSurfaceView(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
    }

    public CameraSurfaceView(Context context, AttributeSet attrs, int defStyle) 
    {
        super(context, attrs, defStyle);
    }

    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {}
    public void surfaceCreated(SurfaceHolder holder) {

        //once image is ready(captured or load), the surfaceCreated will not trigger camera again when user click on settings
        mCamera = Camera.open();
        try
        {
            mCamera.setPreviewDisplay(holder); //may throw exception

            Parameters parameters = mCamera.getParameters();

            if(this.getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE) 
            {
                parameters.set("orientation", "portrait");
                mCamera.setDisplayOrientation(90);
            } 
            else 
            {
                parameters.set("orientation", "landscape");
                mCamera.setDisplayOrientation(0);
            }
            mCamera.setParameters(parameters);

            mCamera.startPreview();
        }
        catch(Exception e)
        {
            mCamera.release();
            mCamera = null;
            e.printStackTrace();
        }
    }
    public void surfaceDestroyed(SurfaceHolder arg0) {

        if(mCamera != null)
        {
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;
        }
    }

    public void startCamera()   //resume camera
    {
        if(mCamera == null)
        {
            mCamera = Camera.open();
            try
            {
                mCamera.setPreviewDisplay(mHolder);

                Parameters parameters = mCamera.getParameters();
                if(this.getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE) 
                {
                    parameters.set("orientation", "portrait");
                    mCamera.setDisplayOrientation(90);
                } 
                else 
                {
                    parameters.set("orientation", "landscape");
                    mCamera.setDisplayOrientation(0);
                }
                mCamera.setParameters(parameters);

                mCamera.startPreview();
            }
            catch(Exception e)
            {
                mCamera.release();
                mCamera = null;
                e.printStackTrace();
            }
        }
    }

    public void stopCamera() //pause camera
    {
        if(mCamera != null)
        {
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;
        }
    }

    public void onFlashLight()
    {
        mCamera.stopPreview();

        Parameters parameters = mCamera.getParameters();
        parameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
        mCamera.setParameters(parameters);

        mCamera.startPreview();
    }

    public void offFlashLight()
    {
        mCamera.stopPreview();

        Parameters parameters = mCamera.getParameters();
        parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
        mCamera.setParameters(parameters);

        mCamera.startPreview();
    }

    public void takePicture()
    {
        SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context);

        if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_AUTOFOCUS))
        {
            mCamera.autoFocus(new AutoFocusCallback() {

                public void onAutoFocus(boolean success, Camera camera) 
                {
                    mCamera.takePicture(shutterCallback, rawCallback, jpegCallback);
                }
            }); 
        }
        else
        {
            mCamera.takePicture(shutterCallback, rawCallback, jpegCallback);
        }
    }

    public void autoFocus()
    {
        if(mCamera != null)
            mCamera.autoFocus(null);
    }

    ShutterCallback shutterCallback = new ShutterCallback()
    {
        public void onShutter(){}
    };

    PictureCallback rawCallback = new PictureCallback()
    {
        public void onPictureTaken(byte[] data, Camera camera){}
    };

    PictureCallback jpegCallback = new PictureCallback(){

        public void onPictureTaken(byte[] data, Camera camera)
        {
            //something happens
        }
    };
} 
```

这是我放在清单文件中的使用功能和使用权限

```
<uses-feature android:name="android.hardware.camera" android:required="true" />
<uses-permission android:name="android.permission.CAMERA" /> 
```

到目前为止，我已经在几台设备（Samsung Galaxy SII、Galaxy Note、Galaxy Nexus、Galaxy Y、HTC Desire HD、Sony Xperia）上测试了这个应用程序，当我在这些设备上运行应用程序时，我找不到任何问题或相机崩溃.

但问题是我不断收到崩溃报告和来自用户的电子邮件告诉我应用程序不断在他们的未知设备上崩溃。世界上有太多类型的 android 设备真的很沮丧，我无法在每台设备上测试我的应用程序以找出问题的根本原因，除非有人能找出我在源代码中犯的任何错误.

这是“ **android.hardware.Camera.native_setParameters** ”的堆栈跟踪

```
java.lang.RuntimeException: setParameters failed
at android.hardware.Camera.native_setParameters(Native Method)
at android.hardware.Camera.setParameters(Camera.java:1068)
at com.potatotree.autodistance.CameraSurfaceView.onFlashLight(CameraSurfaceView.java:168)
at com.potatotree.autodistance.AutoDistanceActivity.startCameraFlash(AutoDistanceActivity.java:224)
at com.potatotree.autodistance.CustomView.onTouchEvent(CustomView.java:876)
at android.view.View.dispatchTouchEvent(View.java:3885)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1779)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1130)
at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1763)
at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2196)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1880)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3703)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
at dalvik.system.NativeStart.main(Native Method) 
```

这是“ **com.potatotree.autodistance.CameraSurfaceView.surfaceCreated** ”的堆栈跟踪

```
java.lang.NullPointerException
at com.potatotree.autodistance.CameraSurfaceView.surfaceCreated(CameraSurfaceView.java:97)
at android.view.SurfaceView.updateWindow(SurfaceView.java:1108)
at android.view.SurfaceView.access$000(SurfaceView.java:87)
at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:183)
at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1621)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2446)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

这是“ **android.hardware.Camera.native_autoFocus** ”的堆栈跟踪

```
java.lang.RuntimeException: autoFocus failed
at android.hardware.Camera.native_autoFocus(Native Method)
at android.hardware.Camera.autoFocus(Camera.java:832)
at com.potatotree.autodistance.CameraSurfaceView.autoFocus(CameraSurfaceView.java:212)
at com.potatotree.autodistance.AutoDistanceActivity.startCameraFocus(AutoDistanceActivity.java:235)
at com.potatotree.autodistance.CustomView.onTouchEvent(CustomView.java:880)
at android.view.View.dispatchTouchEvent(View.java:5604)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2060)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1787)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2060)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1787)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2060)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1787)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1917)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1376)
at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1865)
at android.view.View.dispatchPointerEvent(View.java:5784)
at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4441)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
at dalvik.system.NativeStart.main(Native Method) 
```

这是“ **android.hardware.Camera.native_setup** ”的堆栈跟踪

```
java.lang.RuntimeException: Fail to connect to camera service
at android.hardware.Camera.native_setup(Native Method)
at android.hardware.Camera.<init>(Camera.java:294)
at android.hardware.Camera.open(Camera.java:269)
at com.potatotree.autodistance.CameraSurfaceView.surfaceCreated(CameraSurfaceView.java:72)
at android.view.SurfaceView.updateWindow(SurfaceView.java:552)
at android.view.SurfaceView.dispatchDraw(SurfaceView.java:350)
at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6994)
at android.widget.FrameLayout.draw(FrameLayout.java:357)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
at android.view.View.draw(View.java:6994)
at android.widget.FrameLayout.draw(FrameLayout.java:357)
at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1896)
at android.view.ViewRoot.draw(ViewRoot.java:1527)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1263)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1864)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3735)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
at dalvik.system.NativeStart.main(Native Method) 
```

有没有专家可以帮助我或者可以告诉我我的代码是否有任何错误？真的需要你的帮助！！谢谢********

# excel - Excel 中的 if/And 语句和查找

> ID：16017664
> 
> 赞同：1
> 
> 时间：2013-04-15T14:25:47.150
> 
> 标签：excel, vba, drop-down-menu, lookup

我的问题是关于 VBA excel 代码。

我可能想写一个宏，但我对编码不是很熟悉，所以我正在寻找一些指导。

基本上我有一个带有一些字段但没有填写值的表格的 excel 电子表格，然后我有一个单独的电子表格，其中包含我想进入第一个电子表格的值表

例如，这将是我所拥有的简要细分：

> 高度： ****要填充的空白单元格****
> 
> 长度：****要填充的空白单元格****
> 
> 宽度：****要填充的空白单元格****

我想设置一个宏，这样当我在第一行输入 10 时（请注意，有两列，一列用于名词，例如“高度”，另一列用于实际值。），它将查找我的第二个工作表使用值表，并根据计算表中的相邻值自动填充长度和宽度字段。

我希望这是有道理的！

我尝试创建一个新宏并编写一个基本的 if/and 函数，但宏不会运行。我启用了宏，但它告诉我我的代码没有定义的对象。因为我无法让它运行，所以我并没有过多考虑合并查找命令。

我在网上对基本的 if/and 语句进行了一些研究，它们似乎并不难，但是我的值表有 126 行不同的行，每行都有一个高度。长度和宽度值，因此它将是 3 个水平列 x 126 个垂直行。对我来说，必须做这么多 if/and 语句似乎有些过分。

我也发现很难查找不同的工作表。这张桌子很大，我宁愿把它放在一张单独的纸上，而不是把它放在第一张纸的另一边并在那里运行查找（对我来说似乎很乱）

抱歉，如果我没有很好地解释这一点。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:59:14.750

我建议你不要使用 VBA。您可以使用 VLOOKUP 功能实现此目的。

以下是我在 Sheet2 中的一些示例。

```
H   L   W
1   2   3
5   10  12
10  11  12
15  15  15 
```

为方便起见，我定义了一个名称 ，`myHLW`它被定义为 sheet2!$a$1 到 sheet2!$c$5。

在 Sheet1 中，我键入`Height Width Length`a1、b1 和 c1。

我输入`10`a2。然后我在 b2: 中输入了这个公式`=VLOOKUP($A2,myHLW,2)`。这告诉 Excel (a) 查找 a2 中的值（当前为 10）。(b) 查看指定区域 myHLW。(c) 将第 2 列中的任何内容放入找到的行中。Excel`11`为我填写。

然后我在 c2: 中输入了这个公式`=VLOOKUP($A2,myHLW,3)`。这告诉 Excel 使用命名区域 myHLW 查找 a2（当前为 10）中的值，并将第 3 列中的任何内容放在找到的行中。Excel`12`为我填写。

我把公式复制下来，输入不同的高度。它看起来像这样：

```
Height  Length  Width
10          11  12
5           10  12
1           2   3
3.14159     2   3 
```

请注意，Sheet2 中的高度必须按升序排列。另请注意，对于未找到的高度 (3.14159)，它使用高度为 1（未超过的最大值。）

您还可以添加第四个参数，例如`=VLOOKUP($A2,myHLW,3,FALSE)`. 如果第四个参数为假，Excel 将要求完全匹配。如果您为 VLOOKUP 执行此操作，`#N/A`则如果没有匹配项，Excel 会放置。

# java-me - 我正在创建一个 j2me 应用程序以在 netbeans 7.3 中生成一次性密码。我需要在字符串上计算 sha-256 哈希

> ID：16017672
> 
> 赞同：0
> 
> 时间：2013-04-15T14:25:57.867
> 
> 标签：java-me, sha256

```
otp=otp.concat(imei).concat(imsi).concat(username).concat(password).concat(hr).concat(min).concat(day).concat(year).concat(month).concat(dday);
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            md.update(otp.getBytes(),0,otp.getBytes().length);
            byte byteData[]=null;
            md.digest(byteData,0,32);
            StringBuffer sb = new StringBuffer();
            for (int  j= 0; j < byteData.length; j++) {
            sb.append(Integer.toString((byteData[j] & 0xff) + 0x100, 16).substring(1));
            } 
```

这段代码在java pgm中工作，但是当我在模拟器中运行它时，我得到了这个异常：

```
The application has unexpectedly quit. Contact the application provider to resolve the issue.
SHA-256 
```

请帮助我

# ruby-on-rails - url中的Rails restful select

> ID：16017678
> 
> 赞同：1
> 
> 时间：2013-04-15T14:26:10.307
> 
> 标签：ruby-on-rails

如果我在浏览器中输入以下 URL，我会得到一个客户记录列表：

```
http://localhost:5000/clients.json 
```

现在，我希望能够通过 URL 选择某些客户端。这样的事情可能吗：

```
http://localhost:5000/clients.json?locname=ys 
```

这是我的 clients_controller.rb 索引：

```
def index
  @clients = Client.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @clients }
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:22:27.443

这应该做的工作：

```
def index
  @clients = Client.scoped
  @clients = @clients.where(:locname => params[:locname]) if params[:locname].present?

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @clients }
  end
end 
```

# java - 如何进行批量分配

> ID：16017684
> 
> 赞同：0
> 
> 时间：2013-04-15T14:26:25.383
> 
> 标签：java

如何为变量堆栈进行质量分配？

我声明变量列表

```
String not_id, not_section, not_steet, not_sqTotal, not_sqLiving, not_sqKitchen, not_flat, not_floor, not_floors, not_text, user_phone1, user_phone2, user_contact, not_region, not_district, not_settle, not_price, not_photo, not_date, not_date_till, not_up, not_premium, not_status; 
```

我希望它们都等于`""`- 空字符串（或者`"a"`，无关紧要只是一个例子）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:28:49.517

```
not_id = not_section = ... = not_status = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:29:50.817

```
String not_id, not_section, not_steet, not_sqTotal, not_sqLiving, not_sqKitchen, not_flat, not_floor, not_floors, not_text, user_phone1, user_phone2, user_contact, not_region, not_district, not_settle, not_price, not_photo, not_date, not_date_till, not_up, not_premium, not_status;

not_id = not_section = not_steet = not_sqTotal = not_sqLiving = not_sqKitchen = not_flat = not_floor = not_floors = not_text = user_phone1 = user_phone2 = user_contact = not_region = not_district = not_settle = not_price = not_photo = not_date = not_date_till = not_up = not_premium = not_status = ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:30:56.663

```
String not_id=not_section=not_steet=not_sqTotal=not_sqLiving=not_sqKitchen=not_flat=not_floor=not_floors=not_text=user_phone1=user_phone2=user_contact=not_region=not_district=not_settle=not_price=not_photo=not_date=not_date_till=not_up=not_premium=not_status="a"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:28:27.690

带有`for`循环的数组或其他集合。你能想出的任何解决方案都会减少到那个程度。如果值不是同质的，不属于数组，则必须为每个要实际分配给某物的变量分配一个分配。没有办法解决这个问题。

通常，如果您希望将所有对象初始化为复杂的东西，您可以创建一个带有默认构造函数的包装类，该构造函数封装它，但在您的情况下这将是更多的工作。例如

```
Foo a = new Foo(1, 2, 3);
Foo b = new Foo(1, 2, 3); 
```

可以换成

```
Foo a = new FooW(); 
```

Where使用调用的默认构造函数进行`FooW`扩展。`Foo``super(1, 2, 3)`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-15T14:29:41.410

循环它

```
for (String s: list) {
            s=""; 
            //or 
            s="a";
        } 
```

# php - 选择计数产品

> ID：16017685
> 
> 赞同：0
> 
> 时间：2013-04-15T14:26:25.743
> 
> 标签：php, shopping-cart, oscommerce

我在购物卡中有物品，鞋子 products_tax_class_id =1，包 products_tax_class_id =2，笔 products_tax_class_id =3，铅笔 products_tax_class_id =1。

```
$result = tep_db_query("select count(*) as tax_check from " . TABLE_PRODUCTS . " where products_tax_class_id = '3' and products_id = '".$items[$i]['id']."'");
while ($get_now = tep_db_fetch_array($result)){
   if ($get_now['tax_check'] > 0) 
```

如果我回显结果，则打印并返回 0、0、1、0（我有 4 行）值。我想看看是否有 1 值，返回 4 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:43:23.280

使用时，`SELECT COUNT(*)`您基本上应该返回一行。根据您的数据库有多大，您可能希望通过`count()`从查询中删除选项来进行调试，并执行以下操作：

```
while ($get_now = tep_db_fetch_array($result))
{ 
    print_r($get_now)
} 
```

这将使您了解所有内容的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:43:30.550

那么我宁愿建议您将此`fetching`功能更改为可以计算行数的功能

```
$result = tep_db_query("select * from " . TABLE_PRODUCTS . " where products_tax_class_id = '3' and products_id = '".$items[$i]['id']."'"); 
$get_now = mysql_num_rows($result); 
if ($get_now > 0) 
{
    //we've found it
}
else
{
   //not found
} 
```

**注意**我使用了`mysql_num_rows`因为`oscommerce`没有为此声明的函数

`UPDATED`

如果您想获取所有产品并检查它们是否有`tax_class_id = '3'`，您可以全部获取它们然后选择。

```
$result = tep_db_query("select * from " . TABLE_PRODUCTS . " where products_id = '".$items[$i]['id']."'"); 
if($get_now = tep_db_fetch_array($result))
{
    if ($get_now['products_tax_class_id'] == '3') 
    {
        //this product have class = 3 do something
    }
    else
    {
       //this product haven't class = 3 do something else
    }
} else {
    //this is just a check for wrong products_id you can avoid this else since products are already in the shopping cart and it's not possible they have wrong products_id
} 
```

# jquery - 创建具有多个参数的 JS 函数

> ID：16017686
> 
> 赞同：0
> 
> 时间：2013-04-15T14:26:27.150
> 
> 标签：jquery, function, arguments

我想要一个函数，它会返回一个或多个连接到元素的变量，例如返回指定边框或边框的颜色（将使用 jQuery）：

```
$('element').borderColor(); // should return "red, blue, green, orange"
$('element').borderColor('left'); // should return "red"
$('element').borderColor('left', 'right'); // should return "red, green" 
```

等等。

这是示例：http: [//jsfiddle.net/DkGpP/](http://jsfiddle.net/DkGpP/)

**问题 1：**我应该如何构造脚本的一部分（实际上是 if/else）以仅返回我想要的内容（实际上是*$('element').borderColor('left', 'right');*仍然只显示“红色” )?

**问题 2：**可以在没有撇号的情况下调用我的函数中的参数，例如：

```
$('element').borderColor(left);
$('element').borderColor(left, right); 
```

如果是，如何重建它（实际上显示“未定义”）。是否需要构建如下功能：

```
jQuery.fn.borderColor = function(left, top, right, bottom) { 
```

?

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:34:51.377

我会使用这样的东西。

```
function borderColor(object){
    for(var ele in object){
       if(ele=="left"){
       }else if()....
    }
} 
```

对象将是数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:44:55.290

您不需要 if-else 结构。

```
jQuery.fn.borderColor = function() {    
    var tag = $(this).eq(0), ret = [];
    var arr = arguments.length > 0 ? arguments : ["left","top","right","bottom"];
    for (var i = 0; i < arr.length; i++) {
        ret.push(tag.css("border-" + arr[i] + "-color"));
    }
    return ret.join(","); // remove .join(",") to get a useful array
};

var myborder = $('#tester').borderColor('left', 'right');
$('#result').text(myborder); 
```

`[Demo](http://jsfiddle.net/DkGpP/6/)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:47:13.970

当我必须处理多个参数时，我通常更喜欢走“选项”的方式，这意味着参数是一个定义了各种属性的 js 对象。

在您的示例中，我会这样编写测试：

```
if (border == null) // or undefined, add a test here
    return [borderLeft, borderTop, borderRight, borderBottom];

// skip the else
result = [];
if (border.left)
    result.push(borderLeft);
if (border.right)
    result.push(borderRight);
// etc. etc.
return result; 
```

并像这样调用函数：

```
var myborder = $('#tester').borderColor({ left: true, right: true }); 
```

如您所见，我正在传递一个对象，只定义了左属性和右属性。我将它们设置为 true，但任何评估为“真实”值的东西都可以。

小提琴：http: [//jsfiddle.net/DkGpP/2/](http://jsfiddle.net/DkGpP/2/)

# python - 如何从另一个stript调用python cgi脚本

> ID：16017689
> 
> 赞同：0
> 
> 时间：2013-04-15T14:26:33.783
> 
> 标签：python, python-3.x, cgi

尽管我可以看到许多对类似问题的回答，但我真的不认为他们能回答我的问题。基本上，我有一个 python cgi 脚本，我想运行另一个脚本。因此，例如，假设我想做以下事情，以保持简单：

```
#!/usr/bin/env python3  
print("html_text)
# here call some other Python cgi script which has some other HTML text 
```

我只是想简化问题，以便答案可以集中在我真正想了解的内容上。基本上，我想从我当前的 Python cgi 脚本中调用另一个 python cgi 脚本并让它打印更多的 html（并且可能使用来自之前传递的脚本的数据）。

我真正想做的是制作 3 个 cgi 脚本。第一个打印一个表格。然后这个表单将数据发布到下一个进行数据检查以确保它全部有效的表单。现在这是困难的部分。我基本上想确保如果数据无效，我想将信息传递回第一个脚本，以便可以将有效数据保存在表单中（通过 POST？），如果有效，它执行下一个脚本。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:30:37.853

You could do something like this.

main.py

```
#!/usr/bin/env python3

import someotherscript 
print("html_text")

someotherscript.footer() 
```

someotherscript.py

```
def footer():
    print("Theo's webpage") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:33:46.990

如果其他脚本是用 Python 编写的，那么`exec`就足够了......

```
#!/usr/bin/env python3  

print("html_text")
exec(open('/path/to/other/script.py').read()) 
```

# qt - QT_UI_WRAP 有什么变化吗

> ID：16017690
> 
> 赞同：0
> 
> 时间：2013-04-15T14:26:36.903
> 
> 标签：qt, cmake

我正在尝试使用命令将 QT UI 包装在 QT5 中

```
QT5_UI_WRAP (ui_forms/file.h ui_file.ui) 
```

我已经包括 QT5Widgets。不知何故，这不起作用。现在在我阅读的任何地方，这都是需要做的，但总是有一个错误，说找不到 .h 文件。我已将 ui_forms 文件夹包含在包含路径中。还有什么需要做的。? 我错过了什么吗？

```
fatal error: ui_results_view.h: No such file or directory
compilation terminated.
make[2]: *** [CMakeFiles/location_recognition.dir/src/results_scene.cpp.o] Error 1
make[1]: *** [CMakeFiles/location_recognition.dir/all] Error 2
make: *** [all] Error 2 
```

# php - php mysql更新IP地址无法正常工作

> ID：16017692
> 
> 赞同：0
> 
> 时间：2013-04-15T14:26:45.630
> 
> 标签：php, mysql, ip

该代码用于更新用户登录的IP地址。当我打印$sql字符串时，似乎是正确的，IP地址是1886883852，但更新到mysql后，值为2149463110。我尝试设置mysql中的数据类型为INT(11) bigint(12)，都一样。如果我尝试将字符串写为

```
UPDATE ddns SET LastIP=1886883852, LastUpdate=now() WHERE ID=1 
```

直接，不使用任何变量，它可以正常工作。

实在看不懂。有人可以帮忙吗？

```
//get dns
function getIP(){
        //check the current ip address registered
        //Test if it is a shared client
        if (!empty($_SERVER['HTTP_CLIENT_IP'])){
          $ipaddr=$_SERVER['HTTP_CLIENT_IP'];
        //Is it a proxy address
        }elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
          $ipaddr=$_SERVER['HTTP_X_FORWARDED_FOR'];
        }else{
          $ipaddr=$_SERVER['REMOTE_ADDR'];
        }
        $ipaddr = ip2long($ipaddr);
        return $ipaddr;
}

$ipaddr = getIP();
$sql = "UPDATE ddns SET LastIP=$ipaddr, LastUpdate=now() WHERE ID=1";
echo $sql; **//here UPDATE ddns SET LastIP=1886883852, LastUpdate=now() WHERE ID=1**
$result = mysqli_query($dbh,$sql) or die("Query failed:");
**//Here after updated, the value of ipaddr in database is 2149463110**
if ($result)
        echo "Update ddns successfully";
else
        echo "faild to update ddns"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:28:30.217

您是否尝试过这种方式：

```
$sql = "UPDATE ddns SET LastIP='$ipaddr', LastUpdate=now() WHERE ID=1"; 
```

IP 地址似乎是一个字符串，因此需要用引号引起来。或者您可以 var_dump 超全局 $_SERVER 以检查字段类型。或者超出内存的限制。

仅针对测试用例，您可以将字段类型更改为 float、varchar 甚至 text。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:02:40.697

最后我找到了原因。使用**Chrome**访问更新时，数据库会写2149463110，使用**firefox或safari**时，结果会是1886883852。有什么解释吗？

# android - 如果键来自特定键盘，如何防止将键插入 EditText

> ID：16017693
> 
> 赞同：1
> 
> 时间：2013-04-15T14:26:46.090
> 
> 标签：android, barcode-scanner

我正在使用像蓝牙键盘一样的蓝牙条形码扫描仪，我想在我的用户扫描某些东西时处理按键，但我知道他可以将任何 EditText 集中在活动中，所以我想检测他在我的 KeyEvent 中使用的键盘这 ：

```
if KeyEvent.getDevice().getName().equals("Datalogic Scanner") //do stuff
else //let the edittext add the letter 
```

并防止 EditText 被编辑，而是存储和处理扫描仪发送的值。

我尝试在我的活动中的 dispatchKeyEvent 中返回 true，我尝试在我的活动中的 onKeyDown 中返回 true，我尝试在我的 EditText 上的 OnKeyListener 中返回 true，并在我的 EditText 类上覆盖 OnKeyDown，但没有任何效果，文本仍然插入我的 EditText .

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T11:46:39.850

尝试像这样使用[dispatchKeyEvent](http://developer.android.com/reference/android/app/Activity.html#dispatchKeyEvent%28android.view.KeyEvent%29)：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    return scanManager.handleDispatchKeyEvent(event);
} 
```

在 scanManager 类中，您应该执行以下操作：

```
public boolean handleDispatchKeyEvent(KeyEvent event) {
// handle the event
return true;
} 
```

# java - 在 Tomcat 等 Java/JSP 引擎（即 PHP-Java 桥）中运行 PHP 是否有任何危险或缺点？

> ID：16017697
> 
> 赞同：1
> 
> 时间：2013-04-15T14:26:49.543
> 
> 标签：java, php, jsp, zend-framework, php-java-bridge

操作系统：Windows Server 2008 R2

网络服务器：IIS 7.5

JSP 引擎：Tomcat 5.5

PHP 引擎：PHP 5.3

注意：IIS 和 JSP 使用 Apache Tomcat 连接器 1.5 进行通信

在 Java/JSP 引擎中运行 PHP 是否有任何危险或缺点？充其量，我想在 JSP 和 PHP 之间分享一个会话。在最坏的情况下，我需要找到一种在 PHP 中设置会话管理的方法，尽管我正在使用的应用程序间接依赖于 JSP 和 PHP。但是，将 PHP 代码重新编码为 JSP 不是一种选择。我正在考虑使用桥接器或在 Tomcat 中运行 PHP，但我担心安全性。

桥接 PHP 和 Java 或在 Tomcat 中运行 PHP 是安全的选择吗？

重要的是要了解 IIS 和 Tomcat 是通过 Apache Tomcat 连接器连接的。因此，将 PHP 添加到折叠中可能只会增加复杂性，我不太确定我是否可以维护当前设置并添加 PHP-JSP 桥。

感谢您的任何帮助。

# javascript - 如何将 CSS 应用于此 Javascript 代码？

> ID：16017698
> 
> 赞同：0
> 
> 时间：2013-04-15T14:26:49.863
> 
> 标签：javascript, css, media-queries

我正在开发一个需要根据用户设备显示图像的应用程序。所以我使用以下 Javascript 代码来显示菜单及其图标：

```
 var $imgsrc;

  if(dummy_url_decode(results.rows.item(i).title) == "Web Info")

     $imgsrc = "icons/web_info.png";

  if(dummy_url_decode(results.rows.item(i).title) == "Misc.")

     $imgsrc = "icons/misc.png"; 
```

现在我想应用条件，如果设备带有视网膜显示器，那么它应该显示不同的图标。我有媒体查询语法，但不知道如何从 CSS 更改 img 路径。有谁能够帮我？我正在使用的媒体查询是：

```
@media screen and (-webkit-min-device-pixel-ratio: 2) and (min-device-width : 768px) and (max-device-width : 1024px) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:36:32.117

您不能从 CSS 更改属性。

您最好的选择可能是使用 a `<span>`or`<div>`代替图像，将其样式设置`display:inline-block`为合适的`width`and `height`，然后您可以更改`background-image`媒体查询中的属性。

像这样的东西：

> HTML：
> 
> ```
> <span id="myIcon"></span> 
> ```
> 
> CSS：
> 
> ```
> #myIcon {
>     display:inline-block;
>     width:32px;
>     height:32px;
>     background-image:url('icons/some_icon.png');
> }
> @media screen and (-webkit-min-device-pixel-ratio:2) and (min-device-width:768px) and (max-device-width:1024px) {
>     #myIcon {
>         width:64px;
>         height:64px;
>         background-image:url('icons/some_hi-res_icon.png');
>     }
> } 
> ```

# angularjs - 如何检查我使用的是哪个版本的 Angular？

> ID：16017699
> 
> 赞同：326
> 
> 时间：2013-04-15T14:26:53.690
> 
> 标签：angularjs, angular

如何判断我使用的是哪个版本的 Angular？

我试过了：

```
angular --version
angular --v
angular -version
angular -v 
```

但得到`-bash: angular: command not found`

我知道`yeoman --version`我正在使用`0.9.6`

但是如何获得 angularjs 版本呢？

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2014-01-22T18:13:53.733

对于 Angular 1 或 2（但不适用于 Angular 4+）：

您还可以在您使用的任何浏览器的开发人员工具上打开控制台并键入`angular.version`以访问包含 Angular 版本的 Javascript 对象。

当脚本在没有标题注释的情况下被缩小时非常有用。

* * *

## 回答 #2

> 赞同：222
> 
> 时间：2013-04-15T14:35:16.467

**编辑：**写这个答案时，只有 AngularJS 1.x。在下面的答案中查看 Angular 版本 >= 2。

AngularJS 没有命令行工具。

您可以从 JavaScript 文件本身获取版本号。

当前的标题`angular.js`：

```
/**
 * @license AngularJS v1.0.6
 * (c) 2010-2012 Google, Inc. http://angularjs.org
 * License: MIT
 */ 
```

* * *

## 回答 #3

> 赞同：188
> 
> 时间：2017-01-05T22:51:05.663

对于 Angular 2+，在任何具有开发工具 (F12) 的现代浏览器中，您都可以检查顶级应用程序标签。

对于 Internet Explorer 11 或 Edge，您可以在此处找到信息：[![角度版本号](https://i.stack.imgur.com/j93g1.png)](https://i.stack.imgur.com/j93g1.png)

适用于 Angular 2+ Chrome 浏览器

[![在此处输入图像描述](https://i.stack.imgur.com/81ah4.png)](https://i.stack.imgur.com/81ah4.png)

火狐萤火虫

[![在此处输入图像描述](https://i.stack.imgur.com/iZxJ6.png)](https://i.stack.imgur.com/iZxJ6.png)

* * *

## 回答 #4

> 赞同：115
> 
> 时间：2017-02-09T09:31:16.930

如果您正在使用`angular-cli`，那么您可以通过键入轻松检查它

```
ng -v 
```

或`ng v`在 Angular 8 中，在终端或 Bash 中。注意：在项目目录中运行命令。

你应该得到这样的东西：

```
angular-cli: 1.0.0-beta.24
node: 7.4.0
os: darwin x64
@angular/common: 2.4.3
@angular/compiler: 2.4.3
@angular/core: 2.4.3
@angular/forms: 2.4.3
@angular/http: 2.4.3
@angular/platform-browser: 2.4.3
@angular/platform-browser-dynamic: 2.4.3
@angular/router: 3.4.3
@angular/compiler-cli: 2.4.3 
```

* * *

## 回答 #5

> 赞同：78
> 
> 时间：2015-07-24T07:39:21.597

在浏览器的开发者控制台中（按 F12 打开），你可以输入以下内容，

```
angular.version.full 
```

它将为您提供完整版本，例如（取决于您当前的版本）。[它实际上获得了对象的`full`属性`angular.version`。]

```
"1.4.3" 
```

所以，要查看完整的对象，如果你输入

```
angular.version 
```

它将为您提供包含版本信息的完整版本对象，例如完整、主要、次要以及代码名称，例如

```
Object {full: "1.4.3", major: 1, minor: 4, dot: 3, codeName: "foam-acceleration"} 
```

* * *

## 回答 #6

> 赞同：41
> 
> 时间：2017-05-09T20:33:30.030

您还可以检查您的*package.json*：

```
"dependencies": {
    "@angular/common": "^5.0.0",
    "@angular/compiler": "^5.0.0",
    "@angular/core": "^5.0.0",
    "@angular/forms": "^5.0.0",
    "@angular/http": "^5.0.0",
    "@angular/platform-browser": "^5.0.0",
    "@angular/platform-browser-dynamic": "^5.0.0",
    "@angular/router": "^5.0.0",
  } 
```

（插入符号`^`会将您更新到最新的主要版本（第一个数字）。 `^4.3.0`将匹配任何`4.x.x`版本，包括`4.4.0`，但将推迟`5.0.0`。波浪号`~`匹配最新的次要版本（中间数字）。 `~4.3.0`将匹配所有`4.3.x`版本，但会错过`4.4.0`的。）

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2017-07-19T09:07:49.450

现在是 ng -v

如果您使用的是 Angular cli，那么您可以检查使用

`ng --version`

现在是 ng -v

或者您也可以签到

包.json 文件

```
 "dependencies": {
    "@angular/animations": "^4.0.0",
    "@angular/common": "^4.0.0",
    "@angular/compiler": "^4.0.0",
    "@angular/core": "^4.0.0",
    "@angular/forms": "^4.0.0",
    "@angular/http": "^4.0.0",
    "@angular/platform-browser": "^4.0.0",
    "@angular/platform-browser-dynamic": "^4.0.0",
    "@angular/router": "^4.0.0",
    "angular-in-memory-web-api": "^0.3.2",
    "core-js": "^2.4.1",
    "rxjs": "^5.1.0",
    "zone.js": "^0.8.4"
  }, 
```

* * *

## 回答 #8

> 赞同：24
> 
> 时间：2018-08-07T13:48:04.063

> 有很多方法，你检查角度版本只需按下命令提示符（对于 Windows）并输入

```
1\. ng version
2\. ng v
3\. ng -v 
```

[![使用命令行检查角度版本](https://i.stack.imgur.com/4C6h0.jpg)](https://i.stack.imgur.com/4C6h0.jpg)

```
4\. You can pakage.json file 
```

[![检查 pakage.json 文件的角度版本](https://i.stack.imgur.com/xR13E.jpg)](https://i.stack.imgur.com/xR13E.jpg)

```
5.You can check in browser by presing F12 then goto elements tab 
```

[![检查浏览器上的角度版本](https://i.stack.imgur.com/4TIFN.jpg)](https://i.stack.imgur.com/4TIFN.jpg)

完全理解关于(xxx) 的颠覆请看 angular 文档[angularJS](https://docs.angularjs.org/api/ng/object/angular.version)和[angular 2+](https://angular.io/api/core/Version)

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2017-07-24T12:21:25.730

**对于 Angular 4，许多选项不再有效。2017 年 7 月更新**两个可能性：

> 1) 最简单的方法是打开我们项目的package.json，查看使用的版本，其中Angular 的版本。

[![在此处输入图像描述](https://i.stack.imgur.com/LXnUp.png)](https://i.stack.imgur.com/LXnUp.png)

> 2) 执行 ng serve 后，我们打开我们使用的资源管理器的元素检查器，我们可以观察到版本，如下图所示。

[![在此处输入图像描述](https://i.stack.imgur.com/DFKXR.png)](https://i.stack.imgur.com/DFKXR.png)

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2018-09-11T13:09:47.667

另一种方法是从导入[`VERSION`](https://angular.io/api/core/Version)常量`@angular/core`，然后转储到控制台：

```
console.log(VERSION.full); //5.2.11 
```

工作于：

*   Angular 8[查看文档](https://angular.io/api/core/Version)
*   Angular 7[查看文档](https://v7.angular.io/api/core/Version)
*   Angular 6[请参阅文档](https://v6.angular.io/api/core/Version)。
*   Angular 5[查看文档](https://v5.angular.io/api/core/Version)
*   Angular 4[查看文档](https://v4.angular.io/api/core/Version)

不确定 Angular 2 和 3。（如果有人可以测试；页面不可用）

* * *

对于 AngularJS 1.x 使用[`angular.version`](https://docs.angularjs.org/api/ng/object/angular.version)：

```
console.log(angular.version); //1.7.4 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2019-10-29T12:05:11.600

只需`ng v`在命令中运行

你会得到像

```
Angular CLI: 7.3.9
Node: 12.11.0
OS: win32 x64
Angular: 7.2.15
... common, compiler, compiler-cli, core, f
... language-service, platform-browser, pla
... router

Package                           Version
-------------------------------------------
@angular-devkit/architect         0.13.9
@angular-devkit/build-angular     0.13.9
@angular-devkit/build-optimizer   0.13.9
@angular-devkit/build-webpack     0.13.9
@angular-devkit/core              7.3.9
@angular-devkit/schematics        7.3.9
@angular/cli                      7.3.9
@ngtools/webpack                  7.3.9
@schematics/angular               8.0.0
@schematics/update                0.13.9
rxjs                              6.5.3
typescript                        3.1.6
webpack                           4.29.0 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2018-01-09T12:09:16.073

如果您正在使用`angular-cli`，只需使用命令：

```
ng v 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2019-02-25T09:15:12.603

> 对于 Angular 1 或 2（但不适用于 Angular 4+）：

您还可以打开**控制台**并转到您使用的任何浏览器的开发人员工具上的元素选项卡。

***或者***

键入 angular.version 以访问包含 Angular 版本的 Javascript 对象。

> 对于 Angular 4+，有以下几种方法：

在命令提示符/或 VS Code 的终端中编写以下代码。（最多 3 个）

> 1.  ng version 或 ng --version （查找图像以供参考）
> 2.  吴诉
> 3.  ng -v

在终端中，您可以找到如附图所示的角度版本： [![在此处输入图像描述](https://i.stack.imgur.com/ZOgY9.png)](https://i.stack.imgur.com/ZOgY9.png)

> 4.  您还可以打开**控制台**并转到您使用的任何浏览器的开发人员工具上的元素选项卡。如下图所示：

[![在此处输入图像描述](https://i.stack.imgur.com/KnyUq.png)](https://i.stack.imgur.com/KnyUq.png)

> 5.  找到 package.json 文件，您将找到所有已安装的依赖项及其版本。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2018-02-25T12:51:56.450

**注意**：以下***仅***检查**Angular-CLI 版本！！！：**

两个命令都有效：

```
ng -v 
```

或者

```
ng v 
```

[![在此处输入图像描述](https://i.stack.imgur.com/ohUvv.png)](https://i.stack.imgur.com/ohUvv.png)

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2018-12-30T18:41:27.623

对于角度 4+ 使用，

*   版本
*   吴诉

请注意 ng -v 选项在 Angular 7+ 中不起作用。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2019-10-02T22:53:42.633

## 对于 AngularJS - 使用`angular.version`

```
console.log(angular.version);
```

```
<script src="//unpkg.com/angular/angular.js"></script>
```

有关详细信息，请参阅

*   [AngularJS API 参考 -`angular.version`](https://docs.angularjs.org/api/ng/object/angular.version)

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2018-11-27T17:24:04.617

如果您使用的是 VS Code 编辑器。

转到左侧的资源管理器面板 -> 找到 package.json 并打开它 -> 在依赖项下找到 @angular/core。

这是您的角度版本，因为核心是主要功能

[![在此处输入图像描述](https://i.stack.imgur.com/kpgdM.png)](https://i.stack.imgur.com/kpgdM.png)

[![在此处输入图像描述](https://i.stack.imgur.com/S4BVz.png)](https://i.stack.imgur.com/S4BVz.png)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-11-05T06:10:00.367

有多种方式：

1.  您可以从您的*package.json*文件中验证它
2.  您使用以下命令：

> ng--版本

上面的命令将产生以下输出：

> 角 CLI：7.0.3
> 
> 节点：9.4.0
> 
> 操作系统：达尔文 x64
> 
> 角度：7.0.1
> 
> ... 动画、通用、编译器、编译器-cli、核心、表单
> 
> ... http、语言服务、平台浏览器
> 
> ...平台-浏览器-动态，路由器
> 
> 包版本
> 
> * * *
> 
> @angular-devkit/架构师 0.10.3
> 
> @angular-devkit/build-angular 0.10.3
> 
> @angular-devkit/build-optimizer 0.10.3
> 
> @angular-devkit/build-webpack 0.10.3
> 
> @angular-devkit/核心 7.0.3
> 
> @angular-devkit/原理图 7.0.3
> 
> @角/cli 7.0.3
> 
> @ngtools/webpack 7.0.3
> 
> @原理图/角度 7.0.3
> 
> @原理图/更新 0.10.3
> 
> rxjs 6.3.3
> 
> 打字稿 3.1.4
> 
> 网络包 4.19.1

因此，可以从这里验证 Angular、Angular CLI、Node 和许多其他包的版本。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-03-10T16:57:10.723

在您的项目文件夹中，打开命令终端并键入

```
ng -v 
```

它会给你一个项目列表，你将能够看到角度版本。请参阅屏幕截图。

[![版本详情](https://i.stack.imgur.com/2wKNw.png)](https://i.stack.imgur.com/2wKNw.png)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-03-28T07:00:26.263

angular 2 之后的版本，您可以从终端使用，

```
ng -v

    _                      _                 ____ _     ___
   / \   _ __   __ _ _   _| | __ _ _ __     / ___| |   |_ _|
  / △ \ | '_ \ / _` | | | | |/ _` | '__|   | |   | |    | |
 / ___ \| | | | (_| | |_| | | (_| | |      | |___| |___ | |
/_/   \_\_| |_|\__, |\__,_|_|\__,_|_|       \____|_____|___|
               |___/

Angular CLI: 1.7.3
Node: 9.3.0
OS: linux x64
Angular: 5.2.9
... animations, common, compiler, compiler-cli, core, forms
... http, language-service, platform-browser
... platform-browser-dynamic, router

@angular/cli: 1.7.3
@angular-devkit/build-optimizer: 0.3.2
@angular-devkit/core: 0.3.2
@angular-devkit/schematics: 0.3.2
@ngtools/json-schema: 1.2.0
@ngtools/webpack: 1.10.2
@schematics/angular: 0.3.2
@schematics/package-update: 0.3.2
typescript: 2.5.3
webpack: 3.11.0
mohideen@root:~/apps/UI$ 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-06-07T05:44:09.153

只需通过终端转到您的 Angular 项目目录并`ng -v`提供这样的所有信息

```
Angular CLI: 1.7.4
Node: 8.11.1
OS: linux x64
Angular: 5.2.11
... animations, common, compiler, compiler-cli, core, forms
... http, language-service, platform-browser
... platform-browser-dynamic, router

@angular/cli: 1.7.4
@angular-devkit/build-optimizer: 0.3.2
@angular-devkit/core: 0.3.2
@angular-devkit/schematics: 0.3.2
@ngtools/json-schema: 1.2.0
@ngtools/webpack: 1.10.2
@schematics/angular: 0.3.2
@schematics/package-update: 0.3.2
typescript: 2.5.3
webpack: 3.11.0 
```

如果您检查`ng-v`外部 angular 项目directoty，那么它将仅显示 angular-cli 版本。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-08-10T04:45:49.737

您还可以通过检查页面上的元素来检查它：

1.  按 F12 打开浏览器的开发者工具。

2.  检查元素。

3.  展开身体

4.  您将看到 Angular 的版本，如下所示：

> **ng-版本="4.3.6"**

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-12-05T05:34:58.373

[![在此处输入图像描述](https://i.stack.imgur.com/0iN4k.png)](https://i.stack.imgur.com/0iN4k.png)在新版本的 Angular cli 中，[ng -v] 将不起作用。你必须输入 [ng version]。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-07-17T04:40:31.930

对于 Angular JS，您可以在 angular-animate.js 文件中找到它，如下所示：

/** * @license AngularJS v1.4.8 * (c) 2010-2015 Google, Inc. [http://angularjs.org](http://angularjs.org) * 许可证：麻省理工学院 */

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-04-19T13:12:34.570

**会在这里..**

> ../project_name/bower_components/angular/angular.js

```
/**
 * @license AngularJS v1.0.6
 * (c) 2010-2012 Google, Inc. http://angularjs.org
 * License: MIT
 */ 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-06-29T01:26:06.700

你可以输入`ng version` 就是这样

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-12-05T06:42:10.530

很简单，可以在`package.json`文件中看到

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-07-17T00:57:33.427

与上面的答案相同，您可以通过检查元素来检查浏览器，如果是 AngularJS，我们可以看到类似下面的内容。

ng-app 指令告诉 AngularJS 这是 AngularJS 应用程序的根元素。

所有 AngularJS 应用程序都必须有一个根元素。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-04-20T14:33:26.717

**对于 Angular 2+**

> 检查元素（Ctrl + Shift + I）
> 
> 转到元素部分并滚动到`<app-root>`标签（参考下图）

[![检查元素](https://i.stack.imgur.com/ereRC.png)](https://i.stack.imgur.com/ereRC.png)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-09-06T04:41:29.710

```
1\. ng --version (For checking Installed Angular Version in system)

2\. npm --version (For checking Installed NPM Version in system) 

3\. node --version (For checking Installed Node Version in system) 
```

# php - 获取带有锚点的完整网址

> ID：16017700
> 
> 赞同：1
> 
> 时间：2013-04-15T14:26:56.417
> 
> 标签：php

我有一个带有此网址的页面（www.mysite.com/index.php?op=2&id=3#someancor）。我想使用 php 函数 parse_url 来拆分 url，但我不知道如何使用 ancor 获取完整的 url。我试过这样：

```
$base_url = $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];

$parsed_url = parse_url($base_url);
echo $parsed_url['path'];
echo $parsed_url['query'];
echo $parsed_url['fragment']; 
```

但我的 base_url 返回 www.mysite.com/index.php?op=2&id=3。我怎样才能得到完整的网址？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:40:47.597

然后你可以使用 "javascript" > **document.URL**。并发布到某个页面并在那里处理。document.URL 使用 # 返回完整的 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:29:53.347

Unfortunately this is impossible as the `#...` part of the url will be handled only by the browser and not being used when requesting the server.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:06:17.907

这是不可能的，因为散列后面的所有内容都不是由服务器处理的。看看这个答案： [https ://stackoverflow.com/a/967659/1341719](https://stackoverflow.com/a/967659/1341719)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T14:30:22.603

The function will give you the current url, and you can process it.

```
$base_url= curPageURL();
function curPageURL() {
     $pageURL = 'http';
    if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
      $pageURL .= "://";
    if ($_SERVER["SERVER_PORT"] != "80") {
       $pageURL .=  $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
    } else {
    $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    }
    return $pageURL;
   } 
```

# sql - 动态 SQL 查询给出类型错误

> ID：16017704
> 
> 赞同：1
> 
> 时间：2013-04-15T14:27:04.397
> 
> 标签：sql, sql-server, sql-server-2008, tsql, dynamic

我正在尝试通过构建动态查询并将其存储在变量中并执行该变量来编写一个简单的 SP。

我目前收到以下错误：

> 消息 206，级别 16，状态 2，第 16 行
> 操作数类型冲突：datetime2 与浮点数不兼容

对于以下代码：

```
DECLARE 
@table_Num
@1 varchar(100) = 'boo',
@2 int =2,
@3 varchar(100) ='default',
@4 varchar(50) = NULL,
@5 int =NULL,
@6 float =12,
@7 datetime2(0) ='1970-01-01 00:00:00',
@8 datetime2(0)='1970-01-01 00:00:00',
@9 varchar(50)='',
@10 varchar(50)=NULL,
@11 decimal(18,0)=0000000000000,
@12 int =999999

DECLARE @SQLString NVARCHAR(MAX)

SET @SQLString = 'INSERT INTO abc_'+@table_Num+'(col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12) 
VALUES ('+@1+',2,'+@3+','+@4+','+@5+','+@6+','+@7+','+@8+','+@9+','+@10+','+@11+','+@12+')'

EXEC (@SQLString) 
```

据我所见，变量的类型与表列类型相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:29:30.610

I'm guessing it has something to do with your use of quotation marks, but it's quite hard to follow. I'd recommend using `EXEC sp_executesql` and passing your parameters as actual parameters. It's a little easier to do for a statement like this, and much more secure.

*(Edited based on comment from TimLehner)*

```
DECLARE @SQLString NVARCHAR(MAX), @ParamString NVARCHAR(MAX), @TableName sysname;
SET @TableName = N'abc_' + REPLACE(@table_num, '''', ''''''); --Escape apostrophes

IF OBJECT_ID(@TableName) IS NOT NULL
BEGIN
  SET @SQLString = 
    N'INSERT INTO ' + QUOTENAME(@TableName) +
    N' (col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12)
       VALUES (@1, @2, @3, @4, @5, @6, @7, @8, @9, @10, @11, @12)';
  SET @ParamString = N'@1 varchar(100), @2 int, @3 varchar(100), ... , @12 int)';

  EXEC sp_executesql @SQLString, @ParamString, @1, @2, @3, @4, @5, @6, @7, @8, @9, @10, @11, @12
END 
```

[Read about sp_execultesql on MSDN here](http://msdn.microsoft.com/en-us/library/ms188001.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:11:42.260

要动态创建正确的插入语句，您至少必须：

1.  将变量转换为字符串：`cast(@2 as varchar(11))`
2.  字符串中的双撇号：`replace(@1, '''', '''''')`
3.  用撇号包装字符串（包括日期作为字符串）：`'''' + replace(@1, '''', '''''') + ''''`
4.  处理空值，因为连接空值会产生空值：`coalesce(cast(@5 as varchar(11)), 'null')`

这看起来不*可怕*吗？

正如其他人所提到的，这是运行动态 SQL 的最糟糕的方式，并打开了一个名为**SQL Injection**的主要安全漏洞。如果这需要是动态的，请改用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)类型参数（谢谢，@JeffRosenberg）。但是，这个简单的插入也是一个简单的示例，根本不需要动态 SQL（谢谢，@AaronBertrand）。只需按原样运行命令：

```
INSERT INTO table_1 (col1, col2, /* ... */ col12)
VALUES (@1, @2, /* ... */ @12) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:45:33.710

您的字符串连接中有一个转换问题。您需要将参数转换为 varchar 以构建字符串。

演员（@7 作为 varchar（50））。

FWIW，我认为您应该重新考虑如何构建查询。如果可能，请避免使用 EXEC()。您将遇到此解决方案的各种问题。您可能还会遇到 SQL 注入问题。如果黑客设法在参数@1 中发送 int SQL 代码，您的插入查询可能会被重写

# paypal - 使用 Paypal 的自适应付款进行身份验证/捕获？

> ID：16017708
> 
> 赞同：1
> 
> 时间：2013-04-15T14:27:15.010
> 
> 标签：paypal, paypal-adaptive-payments

是否可以使用 Paypal 的自适应付款进行授权和捕获？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:08:39.177

有点，但实际上并不相同。您要做的是使用[Preapproval API](https://developer.paypal.com/docs/classic/api/adaptive-payments/Preapproval_API_Operation/)为使用您的应用程序的付款人创建预批准配置文件。然后，您可以将获得的预批准密钥传递给未来的[Pay API](https://developer.paypal.com/docs/classic/api/adaptive-payments/Pay_API_Operation/)调用，以代表他们提交付款，而无需进一步批准。

设置预先批准类似于授权付款，然后运行付费电话以触发付款类似于捕获。

[本关于设置预先批准配置文件的指南](https://developer.paypal.com/docs/classic/adaptive-payments/ht_ap-basicPreapproval-curl-etc/)应该可以帮助您了解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T11:04:39.863

另外请记住：

> 所有付款的预先批准的最高总金额不得超过 2,000 美元或等值的其他货币。

# php - Moodle 接受来自外部站点的登录

> ID：16017713
> 
> 赞同：7
> 
> 时间：2013-04-15T14:27:25.750
> 
> 标签：php, moodle

我们正在将 Moodle 添加到我们的站点（不同的服务器，不同的子域，但相同的主域，并且服务器设置为能够相互通信），我们希望它做的是：

*   用户访问主站点
*   用户登录
*   用户单击指向 Moodle 的链接
*   用户无需重新输入信息即可自动登录 Moodle
*   如果用户添加书签或直接访问 Moodle，他们仍然可以直接登录

我们已经使用 db auth（外部数据库身份验证）设置了它，因此主站点的帐户也适用于 Moodle，我只是不知道如何让 Moodle 接受现有凭据并自动登录用户。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T15:26:57.140

所以我能够解决这个问题，并认为我会分享我的解决方案，以防其他人将来遇到类似问题。

由于我们的 Moodle 站点和主站点在同一个域上，我所做的是在主站点的登录脚本中，我添加了以下代码：

```
$postData = array('username' => $username, 'password' => $password);
$post = http_post_fields('http://moodle.example.com/login/index.php', $postData);
$headers = http_parse_headers($post);
foreach($headers['Set-Cookie'] as $cookie)
{
    $details = http_parse_cookie($cookie);
    foreach ($details->cookies as $name => $value)
        setcookie($name, $value, $details->expires, $details->path, 'example.com');
} 
```

基本上，我使用 http_post_fields 将登录凭据发布到 moodle 登录脚本，尽管 cURL 应该也可以工作，解析标头以获取 cookie Moodle 集，然后使用基本域而不是更具体的 Moodle 子域自己设置这些 cookie。如果用户拥有来自更具体的子域的现有 cookie，这可能会导致一些问题，因此请务必删除名称为 MoodleSession 的任何现有 cookie。

# java - 使用 throws java.io.IOException 并获取 System.in.read(); 通过整数访问案例

> ID：16017714
> 
> 赞同：1
> 
> 时间：2013-04-15T14:27:28.803
> 
> 标签：java, throws

我只需要输入部分的帮助。如果用户输入一个数字，我需要程序读取并输出一个与输入的数字相等的案例。

//这个程序将显示一年中的月份

```
public class MonthsOfTheYear {
    public static void main(String[] args) 
            throws java.io.IOException{

        int month;

        System.out.println("Please enter a Month Number: ");

        month = (int) System.in.read(); //Get an integer

        switch (month) {
        case 1:  System.out.println("January");
        break;
        case 2:  System.out.println("February");
        break;
        case 3:  System.out.println("March");
        break;
        case 4:  System.out.println("April");
        break;
        case 5:  System.out.println("May");
        break;
        case 6:  System.out.println("June");
        break;
        case 7:  System.out.println("July");
        break;
        case 8:  System.out.println("August");
        break;
        case 9:  System.out.println("September");
        break;
        case 10: System.out.println("October");
        break;
        case 11: System.out.println("November");
        break;
        case 12: System.out.println("December");
        break;
        default: System.out.println("Invalid Month");
        break;
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T01:09:53.613

```
class vehicle
{
   int passengers;
   int fuelcap;
   int mpg;
}

import java.io.*;
class Vehicle_Demo
{

   public static void main (String args[]) throws java.io.IOException
   {
      vehicle obj1 = new vehicle();
      obj1.passengers=12;
      obj1.fuelcap=9;
      obj1.mpg=78;

      System.out.println(obj1.passengers, obj1.fuelcap, obj1.mpg);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:52:38.367

尝试使用 Console 类：http: [//docs.oracle.com/javase/6/docs/api/java/io/Console.html](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)获取用户输入，然后将字符串转换为数字 `Integer.parseInt(String)`

另外，请注意下一版本的 Java (8) 将支持`case` 块中的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T07:16:12.740

尝试使用 TextIO 输入函数

这比扫描仪输入好

您需要先编译[TextIO.java](http://math.hws.edu/javanotes/source/TextIO.java)作为先决条件，以便必须在同一文件夹中找到 TextIO.class。

改用这个输入函数：

月 = TextIO.getChar();

如果您对此方法有任何问题，请告诉我。

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:00:27.460

您可以使用[Scanner](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)来阅读您的 System.in

```
Scanner input = new Scanner(System.in);
month = input.nextInt(); 
```

输出：

```
Please enter a Month Number: 
1
January 
```

见[相关](https://stackoverflow.com/questions/2506077/how-to-read-integer-value-from-the-standard-input-in-java)

编辑：

正如 noahz 指出的那样，有一个`Console`涵盖相同功能的类。要了解两者之间的区别，[请阅读本文](https://stackoverflow.com/questions/14039762/why-do-we-use-console-class)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-10T16:33:27.360

这里的问题是 Java 将一个字符转换为一个整数，因此你得到一个 ASCII 值。
例如，当您键入 5 时，您会得到 ASCII 格式的 53。检查它在`System.out.println();`

我试图解决将月份更改为 char 类型然后将 char 值传递给开关控件中的变量值。但问题是，获取`System.in.read();`方法只能获取单个字符。最后，您可以在 1 到 9 之间进行选择。

我怀疑解决方案是使用缓冲区读取器。在那之前，我把代码留在这里：

```
public class MonthsOfTheYear {
    public static void main(String[] args) 
            throws java.io.IOException{

        char month;

        System.out.println("Please enter a Month Number: ");

        month = (char) System.in.read(); //Get an integer
        //System.out.println("Actual value of :" + month);

        switch (month) {
        case '1':  System.out.println("January");
        break;
        case '2':  System.out.println("February");
        break;
        case '3':  System.out.println("March");
        break;
        case '4':  System.out.println("April");
        break;
        case '5':  System.out.println("May");
        break;
        case '6':  System.out.println("June");
        break;
        case '7':  System.out.println("July");
        break;
        case '8':  System.out.println("August");
        break;
        case '9':  System.out.println("September");
        break;
        /*case '10': System.out.println("October");
        break;
        case '11': System.out.println("November");
        break;
        case '12': System.out.println("December");
        break;*/
        default: System.out.println("Invalid Month");
        break;
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-19T15:12:29.760

如果我错了，请纠正我，但我很确定它仍然适用于“system.in.read”。您是 switch case 在要处理的输入周围没有单引号。如果您希望在键入“1”时运行案例一，则您的案例应该是案例“1”，而不是案例 1。

# c# - Asp.net MVC 异步很慢

> ID：16017715
> 
> 赞同：3
> 
> 时间：2013-04-15T14:27:31.333
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在使用实体框架 6.0.0 alpha1。

在我的 Asp.net MVC 应用程序中，我有两个控制器：

一种是没有异步的：

```
 public ActionResult Index()
    {
        return View(db.Movie.ToList());
    } 
```

一种是异步的：

```
 public async Task<ActionResult> Index()
    {
        var model = await db.Movie.ToListAsync();
        return View(model);
    } 
```

我使用`ab`工具来测试性能：

没有异步的结果：

```
Server Software:        Microsoft-IIS/8.0
Server Hostname:        localhost
Server Port:            60863

Document Path:          /movies
Document Length:        5724 bytes

Concurrency Level:      10
Time taken for tests:   21.229 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      6071000 bytes
HTML transferred:       5724000 bytes
Requests per second:    47.11 [#/sec] (mean)
Time per request:       212.290 [ms] (mean)
Time per request:       21.229 [ms] (mean, across all concurrent requests)
Transfer rate:          279.27 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.5      0       4
Processing:    66  211  71.3    195     806
Waiting:       66  211  71.3    195     806
Total:         67  211  71.3    196     807

Percentage of the requests served within a certain time (ms)
  50%    196
  66%    223
  75%    245
  80%    260
  90%    298
  95%    334
  98%    397
  99%    461
 100%    807 (longest request) 
```

异步结果：

```
Concurrency Level:      10
Time taken for tests:   29.495 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      6071000 bytes
HTML transferred:       5724000 bytes
Requests per second:    33.90 [#/sec] (mean)
Time per request:       294.947 [ms] (mean)
Time per request:       29.495 [ms] (mean, across all concurrent requests)
Transfer rate:          201.01 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.5      0       2
Processing:    69  293 160.0    244    1546
Waiting:       69  293 160.0    244    1546
Total:         70  294 160.0    245    1547

Percentage of the requests served within a certain time (ms)
  50%    245
  66%    295
  75%    343
  80%    373
  90%    507
  95%    639
  98%    772
  99%    841
 100%   1547 (longest request) 
```

我的问题是为什么异步很慢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:36:52.267

您是在测试异步调用多久返回以便您可以完成其他工作，还是在等待工作完成？异步不会神奇地让工作更快地完成。它只是解锁您的方法调用，以便您在工作完成时可以做其他事情。

事实上，如果您正在等待工作完成，异步将花费稍长的时间，因为它会增加一些开销。

你真正应该衡量的是可扩展性，而不是速度。同步网站将更快地处理前几个调用，但随着您添加额外负载而减慢。一个编写良好的异步网站应该更一致、更可靠地处理更多的调用，因为您可以更有效地使用处理器内核。

要提高整体可伸缩性和响应能力，请寻找您或用户不必等待完成的长时间运行的操作，并使这些操作异步。

# date - 如何处理数字 6 位日期

> ID：16017717
> 
> 赞同：0
> 
> 时间：2013-04-15T14:27:32.907
> 
> 标签：date, asp-classic, vbscript, integer

我有一个日历程序，它驻留在服务器上，该程序将日期以下列格式存储到数据库中：

> YYYYMMDD

有没有一种“简单”的方法可以在asp中管理这些日期？例如，假设我们将 2013 年 4 月 20 日作为日期：

```
20130420 
```

我们想在这个日期上增加 20 天，所以我们想产生：

```
20130510 
```

任何想法？在 asp 中是否有 integerTOdate 转换？或者我可以用来在数字上添加“天”的东西`20130420`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:40:04.373

像这样的东西（未经测试）：

```
Dim strDate, theDate, theDatePlusTwentyDays
Dim Year, Month, Day  

' The date is stored as a string...
strDate = "20130420"

' Extract the components of the date
Year  = Mid(strDate, 1, 4)
Month = Mid(strDate, 5, 2)
Day   = Mid(strDate, 7, 2)

' Convert the components of the date into a datetime object
theDate = DateSerial(Year, Month, Day)

' Add 20 days using DateAdd
theDatePlusTwentyDays = DateAdd("d", 20, theDate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:29:41.383

Yes, you can use the `DateAdd` function

```
Response.Write(DateAdd("d",1,Now())) 
```

You need to format your date first though into something like

```
<%
dim _dateOnServer
dim _formattedDate
dim _day
dim _month
dim _year

_dateOnServer = 20130420

_year = Left(_dateOnServer,4)
_month  =  Mid(_dateOnServer,5,2)
_day = Right(_dateOnServer,2)

_formattedDate =  _month &"-"& _day &"-"& _year

dim _newDate
_newDate =  DateAdd("d",20, _formattedDate )

_day = Left(_newDate,2)
_month  =  Mid(_newDate,4,2)
_year = Right(_newDate,4)

dim _newDateFormat
_newDateFormat = _year & _month & _day

%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T08:40:06.103

一种能够完全控制订单和格式的解决方案......

```
strDay = Day(Date)
strMonth = Month(Date)
strYear = Year(Date)
strHours = Hour(Now)
strMins = Minute(Now)
strSecs = Second(Now())
    if len(strMonth) = 1 then
        strMonth = "0" & strMonth
    end if
    if len(strDay) = 1 then
        strDay = "0" & strDay
    end if
    if len(strHours) = 1 then
        strHours = "0" & strHours
    end if
    if len(strMins) = 1 then
        strMins = "0" & strMins
    end if
    if len(strSecs) = 1 then
        strSecs = "0" & strSecs
    end if

strDateAdded = strYear & "-" & strMonth & "-" & strDay
strDateAddedTime = strDateAdded & " " & strHours & ":" & strMins 
```

使用这种方法，您可以完全控制顺序，即使在不同时区运行 Web 应用程序时，您仍然可以保持 DD/MM 格式……或任何您想要的顺序，例如 MM-DD-YY（通过重新排序和修剪年）。我个人更喜欢 YYYY-MM-DD 因为按 ASC 和 DESC 排序更容易使用，即：更容易阅读，因为所有行都具有相同数量的字符，例如：

```
2013-04-01 03:15
2013-04-09 10:15
2013-04-22 07:15
2013-04-23 10:15
2013-04-23 10:60
2013-10-25 12:01
2013-10-25 12:59 
```

代替：

```
2013-4-1 3:15
2013-4-9 10:15
2013-4-22 7:15
2013-4-23 10:15
2013-4-23 10:60
2013-10-25 12:1
2013-1-25 12:59 
```

# python - 时间序列数据与numpy的自相关函数

> ID：16017723
> 
> 赞同：3
> 
> 时间：2013-04-15T14:28:02.540
> 
> 标签：python, numpy, time-series, correlation

我一直在尝试使用[numpy](http://en.wikipedia.org/wiki/Correlation_function_%28statistical_mechanics%29) . 我发现的大多数文档都与[correlate](http://docs.scipy.org/doc/numpy/reference/generated/numpy.correlate.html)和[convolve](http://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html#numpy.convolve)等函数有关。但是，对于给定的随机变量 x，这些函数似乎只是计算总和

```
ACF(dt) = sum_{t=0}^T [(x(t)*x(t+dt)] 
```

而不是平均值

```
ACF(dt) = mean[x(t)*x(t+dt)] 
```

所以实际上，为了计算自相关函数，需要执行以下操作：

```
acf = np.correlate(x,x,mode='full')
acf_half = acf[acf.size / 2:]
ldata = len(acf)
acf = np.array([x/(ldata-i) for i,x in enumerate(acf_half)]) 
```

当然，我们需要从结果 acf 中减去 mean(x)**2 才能正确。

任何人都可以确认这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:08:22.747

一般来说，自相关、相关等都是求和（积分）。有时它是标准化的，但不是你上面写的意义上的平均。这是因为它们是根据[数学卷积运算](http://en.wikipedia.org/wiki/Convolution)定义的，这只是您在上面写成的积分。

stat mech 页面上的括号表示热平均值，它是在某个温度下在许多不同状态下多次发生的“实验”的整体或时间平均值。这（有限温度）会引起波动，从而导致问题的“统计”性质，并导致相关性的衰减（长期顺序的损失）。这仅仅意味着您应该找到几个数据集的自相关，并将*它们*平均在一起，但不要取函数的平均值。

据我所知，您的代码试图**通过重叠长度的长度来****衡量相关性`dt``dt`**，但我不认为这是正确的。

关于`<s>`²的减法，在自旋模型的情况下，`<s>`平均自旋（磁化）在哪里，所以我相信你是正确的，你应该使用`mean(x)**2`.

作为旁注，我建议使用`mode='same'`而不是`'full'`这样你的相关域匹配你的输入域，而不必只看输出的一半（这里输出是对称的，所以它并不是真的做出改变）。

# html - ie10选择框显示

> ID：16017724
> 
> 赞同：2
> 
> 时间：2013-04-15T14:28:03.633
> 
> 标签：html, css, internet-explorer-10

如果之前有人问过这个问题，请先发帖道歉。我一直无法找到解决方案。

我知道随着迁移到 IE10，选项显示在当前选定选项的上方和下方。我可以忍受这一点。但是，选项被一条粗（2px）的黑色实线包围。我试图用

```
select:focus {
  border: 1px solid #c3c3c3;
} 
```

但这似乎没有任何效果。

任何建议将不胜感激。

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:52:10.027

IE10 有一些伪元素来处理表单样式，例如使用 ::-ms-expand [0] 对选择项上的披露箭头进行样式设置。但是，似乎没有一种方法，我可以找到记录，允许选择控件的弹出部分设置样式。

[0] [http://msdn.microsoft.com/en-us/library/windows/apps/hh767361.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh767361.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:56:24.597

也许用鼠标悬停而不是焦点？我不太明白您所说的选定选项是什么意思

# python - 使用python和beautifulsoup从带有选择菜单的网页中获取数据

> ID：16017725
> 
> 赞同：1
> 
> 时间：2013-04-15T14:28:06.530
> 
> 标签：python, select, html-parsing

我正在尝试从一个网页收集数据，该网页有一堆我需要从中获取数据的选择列表。这是页面：- [http://www.asusparts.eu/partfinder/Asus/All](http://www.asusparts.eu/partfinder/Asus/All) In One/E 系列/

这就是我到目前为止所拥有的：

```
import glob, string
from bs4 import BeautifulSoup
import urllib2, csv

for file in glob.glob("http://www.asusparts.eu/partfinder/*"):

##-page to show all selections for the E-series-##
selected_list = 'http://www.asusparts.eu/partfinder/Asus/All In One/E Series/'

##-
page = urllib2.urlopen(selected_list)
soup = BeautifulSoup(page)

##-page which shows results after selecting one option-##
url = 'http://www.asusparts.eu/partfinder/Asus/All In One/E Series/ET10B'

##-identify the id of select list which contains the E-series-##  
select = soup.find('select', id="myselectListModel")
option_tags = select.findAll('option')

##-omit first item in list as isn't part of the option-##
option_tags = option_tags[1:]

for option in option_tags:
    open(url + option['value'])

html = urllib2.urlopen("http://www.asusparts.eu/partfinder/")

soup = BeautifulSoup(html)

all = soup.find('div', id="accordion") 
```

我不确定我是否走对了路？因为所有的选择菜单都让人困惑。基本上我需要从所选结果中获取所有数据，例如图像、价格、描述等。它们都包含在一个包含所有结果的 div 标签中，该标签名为“手风琴”，所以这仍然会收集所有数据吗？还是我需要更深入地搜索这个 div 中的标签？此外，我更喜欢按 id 而不是类搜索，因为我可以一次性获取所有数据。我将如何从上面的内容中做到这一点？谢谢。我也不确定 glob 功能是否正确使用？

**编辑**

这是我编辑的代码，没有错误返回但是我不确定它是否返回了 e 系列的所有模型？

```
import string, urllib2, urllib, csv, urlparse from bs4 import
BeautifulSoup

##-page which shows results after selecting one option-##
url = 'http://www.asusparts.eu/partfinder/Asus/All In One/E Series/ET10B'

base_url = 'http://www.asusparts.eu/' + url

print base_url

##-page to show all selections for the E-series-##
selected_list = urllib.quote(base_url + '/Asus/All In One/E Series/ET10B')
print urllib.quote(base_url + '/Asus/All In One/E Series/ET10B')

#selected_list = 'http://www.asusparts.eu/partfinder/Asus/All In One/E Series/ET10B'

##-
page = urllib2.urlopen('http://www.asusparts.eu/partfinder/Asus/All%20In%20One/E%20Series')
soup = BeautifulSoup(page)

print soup

##-identify the id of select list which contains the E-series-##  
select = soup.find('select', id="myselectListModel")
option_tags = select.findAll('option')

print option_tags 

##-omit first item in list as isn't part of the option-##
option_tags = option_tags[1:]

print option_tags

for option in option_tags:
    url + option['redirectvalue']

print " " + url + option['redirectvalue'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:55:13.183

首先，我想指出您在发布的代码中遇到的几个问题。首先，该`glob`模块通常不用于发出 HTTP 请求。它对于遍历指定路径上的文件子集很有用，您可以[在其 docs](http://docs.python.org/2/library/glob.html)中阅读有关它的更多信息。

第二个问题是：

```
for file in glob.glob("http://www.asusparts.eu/partfinder/*"): 
```

你有一个缩进错误，因为后面没有缩进代码。这将引发错误并阻止执行其余代码。

另一个问题是您正在为变量使用一些 python 的“保留”名称。你不应该使用诸如`all`或之类的词`file`来表示变量名。

最后，当您循环时`option_tags`：

```
for option in option_tags:
    open(url + option['value']) 
```

该`open`语句将尝试打开一个本地文件，其路径为`url + option['value']`. 这可能会引发错误，因为我怀疑您在该位置会有一个文件。此外，您应该知道您没有对这个打开的文件做任何事情。

好了，评论就说这么多。我查看了华硕页面，我想我知道你想要完成什么。据我了解，您想在华硕页面上为每个计算机型号抓取零件列表（图像、文本、价格等）。每个型号都有位于唯一 URL 的部件列表（例如：[http ://www.asusparts.eu/partfinder/Asus/Desktop/B%20Series/BM2220](http://www.asusparts.eu/partfinder/Asus/Desktop/B%20Series/BM2220)）。这意味着您需要能够为每个模型创建这个唯一的 URL。更复杂的是，每个零件类别都是动态加载的，例如，在您单击“冷却”链接之前，不会加载“冷却”部分的零件。这意味着我们有一个两部分的问题：1) 获取所有有效的（品牌、类型、系列、型号）组合和 2) 弄清楚如何加载给定模型的所有部件。

我有点无聊，决定编写一个简单的程序来处理大部分繁重的工作。这不是最优雅的东西，但它会完成工作。步骤 1) 在 中完成`get_model_information()`。步骤 2) 得到了处理，`parse_models()`但不太明显。看看华硕网站，每当你点击一个部件子部分时，JavaScript 函数[`getProductsBasedOnCategoryID()`](http://www.asusparts.eu/Scripts/zandparts/js?v=YEJnEnHMMK5v1D40Pe9UcnsBMOM5DeunIn3eJdVuiVY1)就会运行，它会对格式化的 ajax 进行调用`PRODUCT_URL`（见下文）。响应是一些 JSON 信息，用于填充您单击的部分。

```
import urllib2
import json
import urlparse
from bs4 import BeautifulSoup

BASE_URL = 'http://www.asusparts.eu/partfinder/'
PRODUCTS_URL = 'http://json.zandparts.com/api/category/GetCategories/'\
               '44/EUR/{model}/{family}/{accessory}/{brand}/null/'
ACCESSORIES = ['Cable', 'Cooling', 'Cover', 'HDD', 'Keyboard', 'Memory',
               'Miscellaneous', 'Mouse', 'ODD', 'PS', 'Screw']

def get_options(url, select_id):
    """
    Gets all the options from a select element.
    """
    r = urllib2.urlopen(url)
    soup = BeautifulSoup(r)
    select = soup.find('select', id=select_id)
    try:
        options = [option for option in select.strings]
    except AttributeError:
        print url, select_id, select
        raise
    return options[1:]  # The first option is the menu text

def get_model_information():
    """
    Finds all the models for each family, all the families and models for each
    type, and all the types, families, and models for each brand.

    These are all added as tuples (brand, type, family, model) to the list
    models.
    """
    model_info = []

    print "Getting brands"
    brand_options = get_options(BASE_URL, 'mySelectList')

    for brand in brand_options:
        print "Getting types for {0}".format(brand)
        # brand = brand.replace(' ', '%20')  # URL encode spaces
        brand_url = urlparse.urljoin(BASE_URL, brand.replace(' ', '%20'))
        types = get_options(brand_url, 'mySelectListType')

        for _type in types:
            print "Getting families for {0}->{1}".format(brand, _type)
            bt = '{0}/{1}'.format(brand, _type)
            type_url = urlparse.urljoin(BASE_URL, bt.replace(' ', '%20'))
            families = get_options(type_url, 'myselectListFamily')

            for family in families:
                print "Getting models for {0}->{1}->{2}".format(brand,
                                                                _type, family)
                btf = '{0}/{1}'.format(bt, family)
                fam_url = urlparse.urljoin(BASE_URL, btf.replace(' ', '%20'))
                models = get_options(fam_url, 'myselectListModel')

                model_info.extend((brand, _type, family, m) for m in models)

    return model_info

def parse_models(model_information):
    """
    Get all the information for each accessory type for every
    (brand, type, family, model). accessory_info will be the python formatted
    json results. You can parse, filter, and save this information or use
    it however suits your needs.
    """

    for brand, _type, family, model in model_information:
        for accessory in ACCESSORIES:
            r = urllib2.urlopen(PRODUCTS_URL.format(model=model, family=family,
                                                 accessory=accessory,
                                                 brand=brand,))
            accessory_info = json.load(r)
            # Do something with accessory_info
            # ...

def main():
    models = get_model_information()
    parse_models(models)

if __name__ == '__main__':
    main() 
```

最后，一个旁注。我已经放弃`urllib2`了`requests`图书馆。我个人认为提供了更多的功能和更好的语义，但你可以使用任何你想要的东西。

# vb.net - Lucene.NET Italian Analyzer：从文件系统加载停用词

> ID：16017726
> 
> 赞同：0
> 
> 时间：2013-04-15T14:28:20.300
> 
> 标签：vb.net, lucene.net, analyzer, stop-words

我在 vb.net 3.5 框架应用程序上使用 Lucene.NET 3.0.3。我需要传递一个意大利停用词文件。

使用 FileInfo 或 TextReader，一旦我以标准方式安装了我的分析器，我总是会得到英文停用词：

```
 stopword = New System.IO.FileInfo(stopWordsLocation)
            analyzer = New StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30, stopword)
            analyzer = New StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30, stopword)
            'here i have still the English stop words if I go through quick-watch my analyzer 
```

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:24:24.130

你在读静态字段`STOP_WORDS_SET`吗？如果您调用不采用停用词列表的 StandardAnalyzer 构造函数，这就是使用的英语停用词列表。您的代码不使用该构造函数，因此它不会导致任何问题。

# git - 命令 git commit 并添加未跟踪的文件 - 同时？

> ID：16017729
> 
> 赞同：1
> 
> 时间：2013-04-15T14:28:25.473
> 
> 标签：git

出于某种原因，我认为这样做：

```
git commit -a -m "commit something here" 
```

该`-a`部分已经添加文件，但我错了（事实上，因为它意味着全部而不是添加）和示例（因为未添加文件）。

所以，我仍然需要：

```
git add . 

git commit -a -m "whatever" 
```

没有办法使用自动添加未跟踪文件的选项来提交吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:39:27.650

这是一个有用的操作，但您必须沿此行添加别名（使用 shell 函数）：

```
[alias]
    commitall = "!f() { git add -A; git commit -m $1}; f" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:37:11.550

不，没有办法自动提交未跟踪的文件。您必须手动添加文件`git add <filename>`

# html - 如何在 YouTube 播放器上放置图片？

> ID：16017735
> 
> 赞同：1
> 
> 时间：2013-04-15T14:28:30.583
> 
> 标签：html, css, z-index

我想在 YouTube 视频播放器上放置一张静态图片；但是，似乎他们以某种方式阻止了这种情况的发生？

到目前为止，我已经尝试将 z-index 设置为高于 YouTube 播放器，但这不起作用。

例如：

```
<img src="../example.png"/ width="100" height="100" class="image" />
<iframe width="420" height="315" src="http://www.youtube.com/embed/k6U-i4gXkLM" frameborder="0" allowfullscreen></iframe>

.image { position: absolute; z-index: 10000; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:00:22.270

您应该能够将 wmode=transparent 添加到 youtube iframe url。看：

[Youtube iframe wmode 问题](https://stackoverflow.com/questions/4050999/youtube-iframe-wmode-issue)

一个工作示例：

[http://www.parentmap.local/article/webinar-parents-guide-to-college-admissions](http://www.parentmap.local/article/webinar-parents-guide-to-college-admissions)

请注意弹出菜单如何与视频 iframe 重叠。

如果由于某种原因这不起作用，您可以使用 javascript 加载 youtube 预览图像，然后将叠加层放在上面。仅当有人实际单击元素时才加载真正的 iframe。

快速谷歌搜索在 youtube 图片上找到了这个：

[http://www.reelseo.com/youtube-thumbnail-image/](http://www.reelseo.com/youtube-thumbnail-image/)

该页面的预览图像 URL 示例：

[http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg](http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:56:03.857

您的代码完美运行。只是“../example.png”之后的斜线是不必要的，但无论如何它都会起作用。

# php - 教义 setParameter 和无效参数号

> ID：16017741
> 
> 赞同：7
> 
> 时间：2013-04-15T14:28:49.203
> 
> 标签：php, symfony, doctrine-orm

经过多次尝试，我想我终于把文档牢记在心了。然后，我需要你的帮助.. 我不明白为什么 Doctrine 向我显示这个错误：

> 无效的参数号：绑定变量的数量与标记的数量不匹配

这是我的代码：

```
$qb = $this->em->createQueryBuilder();
$qb->select('m')
   ->from('Entities\Marque', 'm')
   ->leftJoin('m.magasin', 'ma')
   ->where('m.nom = :marque AND ma.nom LIKE :magasin')
   ->setParameter('marque', $marque)
   ->setParameter('magasin', '%'.$matchesNumber[1].'%');
$results = $qb->getQuery()->getArrayResult(); 
```

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-03-24T23:16:57.943

如果您不小心使用了多个 ，也会发生这种情况`where()`，这发生在我身上一次。

```
$em    = $this->getEntityManager();
$query = $em->createQueryBuilder()
    ->from('AppBundle:SomeEntity', 's')
    ->select('s')
    ->where('s.foo = :foo')
    ->where('s.bar = :bar') // <- HERE
    ->setParameter('foo', 'Foo Value')
    ->setParameter('bar', 'Bar Value'); 
```

应该：

```
$em    = $this->getEntityManager();
$query = $em->createQueryBuilder()
    ->from('AppBundle:SomeEntity', 's')
    ->select('s')
    ->where('s.foo = :foo')
    ->andWhere('s.bar = :bar') // <- CHANGE TO andWhere()
    ->setParameter('foo', 'Foo Value')
    ->setParameter('bar', 'Bar Value'); 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-15T14:55:28.567

我认为 ->setParameter 会覆盖前一个。

对于多个参数使用：

```
->setParameters(['key1' => $value1, 'key2' => $value2]) 
```

见教义升级：

> 从现在开始，查询中的参数是一个 ArrayCollection 而不是一个简单的数组。这 > 严重影响了 setParameters() 的使用，因为它不会追加任何参数 > 查询，但实际上会覆盖已经定义的参数。每当您检索 > 参数时（即 $query->getParameter(1)）

[教义升级说明](https://github.com/doctrine/doctrine2/blob/master/UPGRADE.md)

也许这也适用于 setParameter？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-15T15:32:44.987

很抱歉..我刚刚发现了我的错误..后来，就像我的代码后面的更多内容一样..我用旧的“$qb”键入了一个新查询..我真是个菜鸟！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-14T11:41:25.367

```
$qb = $this->em->createQueryBuilder();
$parameters = array('marque'=>$marque, 'magasin'=>'%'.$matchesNumber[1].'%');
$qb->select('m')
   ->from('Entities\Marque', 'm')
   ->leftJoin('m.magasin', 'ma')
   ->where('m.nom = :marque')
   ->andWhere('ma.nom LIKE :magasin')
   ->setParameters($parameters);

$results = $qb->getQuery()->getArrayResult(); 
```

# java - Which structure to use with JUNIT test?

> ID：16017743
> 
> 赞同：0
> 
> 时间：2013-04-15T14:28:50.887
> 
> 标签：java, html, junit

I have a Number of tests. Each test contains different commands verify() and command(). The order and number of times I need to check these vary though depending on the test. How can I structure this in a convenient way. I have been playing with Suites and Categories but can´t find a good solution. in the JUNIT GUI I would like to see the Testname and bellow it the teststeps command or verify. Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:47:59.077

我发现使用 maven 和现代 IDE，测试套件的用处并不那么明显。

默认情况下，Maven 将运行您的所有测试；并且任何 IDE 都将允许您运行所有测试或选择要运行的测试，例如，按包。我通常发现在不同的包中创建测试类是我每个人真正使用的所有组织。

让我担心的是，您说需要测试的“顺序和次数”会有所不同。我不清楚你的意思是什么，但如果你的意思是为了通过测试，它取决于其他测试执行的顺序（和时间），那么你需要重新构建你的测试。（特别是在单元测试的情况下。）

任何测试都不应该依赖于另一个测试。执行顺序没有保证，在不同的环境中执行的顺序可能不同，甚至可以并行执行。

查看@Before、@After、@BeforeClass、@AfterClass ( [http://junit.sourceforge.net/doc/faq/faq.htm#organize_3](http://junit.sourceforge.net/doc/faq/faq.htm#organize_3) ) 以获取有关测试初始化​​的更多信息。不过，我不确定这是否可以解决您的问题。

# css - Clearfix causes display error with Webkit

> ID：16017745
> 
> 赞同：-2
> 
> 时间：2013-04-15T14:28:58.070
> 
> 标签：css, webkit

I use a this CSS:

```
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
    font-size: 0
} 
```

to move things onto a new line. However, in Webkit, it causes a bunch of content to disappear and moves the box holding it to the bottom of the screen. The trick works correctly in IE and Firefox.

What am I doing wrong and how can I fix it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:28:44.077

问题可能出在您的代码中，我们看不到。但是尝试使用这个明确的修复。它每次都对我有用：

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

[http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

# objective-c - 长寿线程不调用 performSelectorOnMainThread

> ID：16017747
> 
> 赞同：0
> 
> 时间：2013-04-15T14:28:59.317
> 
> 标签：objective-c, multithreading, macos, nsthread, nsobject

我有一个工作线程，我通过一个由标志控制的循环保持活动状态。我需要线程在我的应用程序的长度内保持活动状态，因为它打开了与远程服务器的永久连接。

我启动了那个线程并调用了几个方法：

`[worker performSelector:@selector(getBusy) onThread:worker withObject:nil waitUntilDone:NO];`

这似乎工作正常，并且调用了该方法。在某些时候，`getBusy`我尝试在主线程中调用一个方法：

`[delegate performSelectorOnMainThread:@selector(gotBusy) withObject:nil waitUntilDone:NO`

其中委托是对启动单独线程的类的引用。

问题是`gotBusy`永远不会在主线程上被调用。我已经用 NSLog() 语句添加了它，但我看不到它们打印在控制台上。

我应该寻找什么来调试这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:06:23.990

首先，确保`delegate`不为零。其次，确保你的主事件循环没有被阻塞并且没有在模式模式下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:07:28.027

有没有可能你从来没有分配过`delegate`，所以你在调用`performSelectorOnMainThread`一个 nil 对象？您可以尝试设置`waitUntilDone`为，`YES`以便您的工作线程将阻塞并让委托完成其工作。

# django - 使用 ModelForm.save 时 django“没有这样的表”

> ID：16017754
> 
> 赞同：1
> 
> 时间：2013-04-15T14:29:19.100
> 
> 标签：django, django-forms

我有一个简单的模型，我想使用 ModelForm 保存它。

这是代码：

```
#models.py
class MyArchive(models.Model):
    archive_id = models.CharField(max_length = 20, primary_key=True)
    description = models.CharField(max_length = 50, blank = True)
    archive_file = models.FileField(upload_to = "my_archives/")

#views.py
class MyArchiveForm(ModelForm):
    class Meta:
        model = MyArchive
def upload(request):
    if request.method == 'POST':
        form = MyArchiveForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponse('uploaded success!')
        else:
            logger.debug("invalid form")
    return HttpResponse('upload fail!') 
```

我已经同步了数据库并看到了创建的表。但每次它去 form.save 然后说

```
DatabaseError, no such table. 
```

我使用 ModelForm 保存的方法是否错误？

更新：甚至奇怪的是，当我删除这一行时：`form.save()`，它失败并`if form.is_valid()`出现相同的错误`no such table`，但是当我在调试模式下运行 django 时，`if form.is_valid()`工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:05:18.063

这是一个小技巧，原来是由于数据库配置错误导致的，我在settings.py中使用了相对路径，所以它在运行时没有找到db文件，但是在运行时`django sycdb`，它可以找到db loc的位置。

```
'default' : {
    'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'sqlite.db',                      # Or path to database file if using sqlite3.
} 
```

更新：要在 db 文件上使用相对路径，我应该有这样的 db 设置：

```
from os.path import dirname, join

PROJECT_DIR = dirname(__file__)

DATABASES = {
    # ...
    'NAME': join(PROJECT_DIR, 'sqlite.db'),
    # ...
} 
```

请参阅[我可以使 Django 数据库路径（对于 sqlite3）“跨平台”吗？](https://stackoverflow.com/questions/10889388/can-i-make-the-django-database-path-for-sqlite3-cross-platform)

# java - 这个错误有什么问题？标记“<”的语法错误，？预计在此令牌之后

> ID：16017759
> 
> 赞同：1
> 
> 时间：2013-04-15T14:29:28.140
> 
> 标签：java, syntax-error, token

我的 Java 程序中有这行代码：

```
private final List<PhoneNumber> receivers = new ArrayList<>(); 
```

它表示“new ArrayList”之后的第一个**<**下方有错误。^

我正在运行 Eclipse 和 Windows 8 - 32 位，这可能是编码问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:30:27.223

试试这个：你必须参数化两边的对象类型。

```
private final List<PhoneNumber> receivers = new ArrayList<PhoneNumber>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:42:19.507

JDK 1.7 中添加了[Diamond 运算符](http://www.javaworld.com/community/node/7567 "钻石算子")，用于减少使用泛型时的冗长。您收到语法错误的事实可能意味着您正在使用旧版本来编译这段代码。

要么使用 JDK 1.7 编译代码，要么更改为：

```
new ArrayList<PhoneNumber>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:03:14.250

这是我的解决方案：

*   窗口 -> 首选项 -> Java -> 编译器 -> 编译器合规级别：1.7

最初是 1.6。

必须为此下载 Eclipse Indigo RS2。

# unix - How to password protect a crontab in unix

> ID：16017762
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:29:31.257
> 
> 标签：unix, crontab

We need to password protect the activities on the crontab, for ex even if we try

```
crontab -l 
```

or

```
crontab -e 
```

or

```
crontab -r 
```

We would have to enter a password to go to the next level(viewing/editing/deleting) even if we are root user.

Kindly suggest some mechanisms.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:33:17.360

如果您不信任系统上的 root 用户，我会说您有大问题。我认为没有任何方法可以安全地保护任何内容免受 root 的侵害——根据定义，该用户可以做他们喜欢做的事情，包括删除您为尝试在执行 crontab 时输入密码而设置的任何保护。

# activiti - how to get the submitted form values in external form rendering concept

> ID：16017763
> 
> 赞同：1
> 
> 时间：2013-04-15T14:29:31.733
> 
> 标签：activiti

I am new to Activti, I am not clear in some concepts. Can anyone explain how to get the submitted form values in external form rendering concept either in user task and start event. And how to use these values in other activities.

If there are any video tutorials regarding Activiti explained all BPMN constructs with simple examples, in case if not there any one upload please.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:47:57.803

首先检查[FormService](http://activiti.org/javadocs/org/activiti/engine/FormService.html)。该服务用于访问表单数据和呈现表单以启动新流程实例并完成任务。注意

*   `TaskFormData getTaskFormData(String taskId)`,
*   `StartFormData getStartFormData(String processDefinitionId)`
*   `ProcessInstance submitStartFormData(String processDefinitionId,Map<String,String> properties)`
*   `void submitTaskFormData(String taskId,Map<String,String> properties)`

呈现表单所需的所有数据都组装在以下两种服务方法之一中：`StartFormData FormService.getStartFormData(String processDefinitionId)`和`TaskFormdata FormService.getTaskFormData(String taskId)`. 从这些方法中获得的信息足以使用 Vaadin 等框架进行渲染。[在这里](https://github.com/HSSC/activiti-explorer/tree/master/src/main/java/org/activiti/explorer/ui/form)你可以找到 Activiti explorer 表单渲染是如何实现的。呈现表单后，您可能希望提交数据。提交的信息以键值格式到达服务器。关键是表单属性的 id。然后您需要调用`submitStartFormData()`或`submitTaskFormData()`方法将提交的信息传递给流程引擎。之后，所有提交的字段都成为流程变量，并且可以在流程定义中使用，例如在 conditionExpression 元素中

```
 <conditionExpression xsi:type="tFormalExpression">${vacationApproved == 'true'}/> 
```

用户指南： [http ://activiti.org/userguide/index.html#externalFormRendering](http://activiti.org/userguide/index.html#externalFormRendering)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:25:21.680

如果您还没有部署`activiti-rest.war`文件，那么在您的服务器上执行相同的操作。按照链接[REST API](http://activiti.org/userguide/index.html#N12B3A)获取有关如何获取表单属性和值的所有详细信息。它为每个 URI 提供了非常清晰的描述。

以下 URI 将为您提供属性详细信息： `GET /form/{taskId}/properties`

# apache-flex - 如何在 Flex 中创建没有标题的可拖动面板？

> ID：16017764
> 
> 赞同：0
> 
> 时间：2013-04-15T14:29:32.640
> 
> 标签：apache-flex, draggable, panel

当我拖动面板的任何部分时，我想拖动没有标题的面板。我已经知道如何从面板中删除标题，并且我知道如何使用标题栏拖动它。但我不知道如何拖动没有标题..请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:08:59.483

这是[我的例子](http://it-skills.su/sosamples/webspark46/dragpanel/index.html)

//应用

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" creationComplete="init(event)">
<fx:Script>
    <![CDATA[
        import com.dragpanel.MyPanel;

        import mx.events.FlexEvent;

        protected function init(event:FlexEvent):void
        {
            var panel:MyPanel = new MyPanel();
            panel.width = 300;
            panel.height = 200;
            panel.title = "Hello";

            this.addElement(panel);
        }

    ]]>
</fx:Script>

</s:Application> 
```

//MyPanel.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" 
     width="150" height="80" title="Hello" 
     mouseDown="onMouseDown(event)" mouseUp="onMouseUp(event)" 
     skinClass="com.dragpanel.PanelNoTitleBar">

<fx:Script>
    <![CDATA[
        protected function onMouseDown(event:MouseEvent):void
        {
            this.startDrag();
        }

        protected function onMouseUp(event:MouseEvent):void
        {
            this.stopDrag();
        }

    ]]>
</fx:Script>

<s:HGroup verticalAlign="bottom" x="10" y="10">
    <s:Label text="Name:"/>
    <s:TextInput width="60"/>
</s:HGroup>
</s:Panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:58:44.970

您如何使用标题栏开始拖动？您在 Panel 的标题栏部分有 mouseDown 侦听器吗？您可以将 mouseDown 侦听器移动到 Panel 本身。

# python - 标准 django 表单错误消息

> ID：16017766
> 
> 赞同：1
> 
> 时间：2013-04-15T14:29:34.967
> 
> 标签：python, django, validation

django 表单中的标准错误消息在哪里？

我如何在自定义验证中使用它们？

我的意思是像“这个字段是必需的”这样的错误

谢谢

编辑：

目前我这样做：

```
def clean(self):
    cleaned_data = super(QuoteForm, self).clean()

    country = cleaned_data['country']

    for key in COUNTRY_FIELDS[country]:
        if cleaned_data[key] == '':
            self._errors[key] = self.error_class(_('This field is required'))

    return cleaned_data 
```

修正：我补充说：

```
 self._errors[key] = self.error_class( [forms.Field.default_error_messages['required']]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:36:59.263

`django.forms.fields.Field`及其子类具有`default_error_messages`类属性。

它是一个字典，键`required`和`invalid`错误消息作为值。

*   `django.forms.fields.Field.default_error_messages`有`required`

*   `IntegerField`, `FloatField`, `DateField`,`TimeField`各有各的`invalid`。

*   `DecimalField`有`max_digits`，`max_decimal_places`并且`max_whole_digits`

*   等等

[浏览源](https://github.com/django/django/blob/master/django/forms/fields.py)。搜索页面`default_error_messages`。

如果你是子类 a `Field`，你可以，例如，

```
raise ValidationError(self.error_messages['invalid']) 
```

在字段中，`error_messages`包含`default_error_messages`字段的类及其祖先以及`error_messages`在字段初始化期间传递的任何附加内容。

如果您想`required`在字段外重用消息，您可以

```
from django.forms import fields 

raise ValidationError(fields.Field.default_error_messages['required']) 
```

您想重复使用哪些消息？

# c++ - 可变参数模板参数上的 C++11 初始值设定项列表：为什么这不起作用

> ID：16017767
> 
> 赞同：11
> 
> 时间：2013-04-15T14:29:39.547
> 
> 标签：c++, templates, c++11, variadic-templates

在初始化列表中包含可变参数模板的参数应确保按顺序评估它们，但此处不会发生：

```
#include <iostream>
using namespace std;

template<class T> void some_function(T var)
{
   cout << var << endl;
}

struct expand_aux {
    template<typename... Args> expand_aux(Args&&...) { }
};

template<typename... Args> inline void expand(Args&&... args) 
{
   bool b[] = {(some_function(std::forward<Args>(args)),true)...}; // This output is 42, "true", false and is correct
   cout << "other output" << endl;
   expand_aux  temp3 { (some_function(std::forward<Args>(args)),true)...  }; // This output isn't correct, it is false, "true", 42
}

int main()
{
   expand(42, "true", false);

   return 0;
} 
```

怎么来的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T14:39:44.923

这似乎是一个**错误**。输出应该是您所期望的。

虽然通常不能保证构造函数调用的参数的求值顺序*，*但可以保证括号初始化器列表中表达式的求值顺序。

根据 C++11 标准的第 8.5.4/4 段：

> **在花括号初始化列表的初始化列表中，初始化子句，包括由包扩展 (14.5.3) 产生的任何初始化子句，按照它们出现的顺序进行评估**。也就是说，与给定初始化子句相关联的每个值计算和副作用在初始化器列表的逗号分隔列表中与任何初始化子句相关联的每个值计算和副作用之前进行排序。[注意：无论初始化的语义如何，这种评估顺序都成立；例如，**当初始化列表的元素被解释为构造函数调用的参数时，它适用，即使调用的参数通常没有顺序约束**。——尾注]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T14:38:57.073

如前所述，您的问题是编译器错误。您编写的代码应按顺序评估其参数。

我的建议是明确说明你想要做什么，以及你做它的顺序，并避免滥用逗号运算符（顺便说一句，如果`some_function`返回一个覆盖的类型，你的代码可能会表现得很奇怪`operator,`）或使用初始化列表保证（虽然标准，但也相对模糊）。

我的解决方案是编写然后使用`do_in_order`：

```
// do nothing in order means do nothing:
void do_in_order() {}
// do the first passed in nullary object, then the rest, in order:
template<typename F0, typename... Fs>
void do_in_order(F0&& f0, Fs&&... fs) {
  std::forward<F0>(f0)();
  do_in_order( std::forward<Fs>(fs)... );
} 
```

你像这样使用它：

```
do_in_order( [&]{ some_function(std::forward<Args>(args)); }... ); 
```

您将要执行的操作包装在匿名的 nullary full-capture lambda 中，然后用于`...`创建所述 lambdas 的一整套实例并传递给`do_in_order`，它通过完美转发按顺序调用它们。

这对于编译器来说应该很容易内联并简化为一系列调用。它直接说明了它的作用，不需要奇怪的 void 强制转换、逗号运算符的使用或值被丢弃的数组。

# c++ - WinAPI 中的 sz 和 pwsz 前缀

> ID：16017771
> 
> 赞同：9
> 
> 时间：2013-04-15T14:29:42.427
> 
> 标签：c++, winapi, wchar, hungarian-notation

我现在对 CHAR 字符串和 WCHAR 字符串的 WinAPI 中的匈牙利符号前缀有点困惑。当我们使用 CHAR 字符串时，通常会使用这样的前缀：

```
CHAR szString[] = "Hello"; 
```

我们有一个以零结尾的字符串 szString，所以一切都很好。但是当我们使用 WCHAR 字符串时，通常会使用这样的前缀：

```
WCHAR pwszString[] = L"Hello"; 
```

它代表指向以零结尾的宽字符串的指针......但我们的类型看起来不像这样。指向以零结尾的宽字符串的指针是 WCHAR** 或 PWSTR*。我错了吗？为什么 sz 用于 CHAR 字符串而 pwsz 而不是 wsz 用于 WCHAR 字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T18:31:09.000

第二个例子具有误导性（尽管并不少见）。它应该是以下两者之一：

```
WCHAR wszString[] = L"Hello";
WCHAR *pwszString = L"Hello"; 
```

由于数组可以在大多数需要指针的上下文中使用，因此一些程序员对这种区别有点草率。

匈牙利语已经过时了，但如果使用得当，它会[很有用](http://www.joelonsoftware.com/articles/Wrong.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-15T14:35:26.573

CHAR szString[] 与 CHAR * szString 同义。两者都是指向字符串的指针。指向以零结尾的字符串的指针是 CHAR*，指向以零结尾的宽字符串的指针是 WCHAR*（不是 WCHAR**）。

现在，如果你想学究气，你可以（错误地）声称 CHAR[] 是“只是一个字符数组”，在这种情况下，“rgc”可能是正确的前缀。

# java - JSTL 在 JavaBean 中找不到属性

> ID：16017777
> 
> 赞同：2
> 
> 时间：2013-04-15T14:29:56.500
> 
> 标签：java, jsp, exception, jstl

我有一个与此堆栈溢出问题[JSP not find property in bean](https://stackoverflow.com/questions/6192476/jsp-not-finding-property-in-bean)非常相似的问题。还有这个问题[javax.el.PropertyNotFoundException: Property 'foo' not found on type com.example.Bean](https://stackoverflow.com/questions/8577545/javax-el-propertynotfoundexception-property-answer-not-found-on-type-com-pool)。但是，就我而言，我认为我已经按照书本完成了所有工作，但仍然出现错误。 **以下是我的 javabean 代码片段的一部分**

```
 private double otheramount;
    private int no;
    private String name;

        public double getOtherAmount()
            {
                return otheramount;
            }
            public void setOtherAmount(double newotheramount)
            {
                otheramount = newotheramount;        
            }
public int getNo()
            {
                return no;
            }
            public void setNo(int newno)
            {
                no = newno;        
            }
public String getName()
            {
                return name;
            }
            public void setName(String newname)
            {
                name = newname;        
            } 
```

**以下是我的 DAO 代码的一部分**

```
while(rs.next())
         {

              MyBean mybean = new MyBean();

              mybean.setNo(rs.getInt("No"));
              mybean.setName(rs.getString("Full_Names"));              
              mybean.setOtherAmount(rs.getDouble("OtherAmount"));              

              allresults.add(mybean);

         } 
```

**下面是部分servlet代码**

```
try
{
ArrayList allresults = mydao.search();    
request.setAttribute("allresults",allresults);
RequestDispatcher dispatch =request.getRequestDispatcher("Pages/mypage.jsp");
dispatch.forward(request, response);
}
catch(Exception ex)
{
} 
```

**下面是我在 JSP 页面中的 HTML 和 JSTL 代码**

```
<c:forEach var="results" items="${requestScope.allresults}">
  <tr>
    <td><c:out value="${results.no}"></c:out></td>
    <td><c:out value="${results.name}"></c:out></td>
    <td><c:out value="${results.otheramount}"></c:out></td>
  </tr>
</c:forEach> 
```

问题是，当我评论该部分时`<c:out value="${results.otheramount}"></c:out>`，它运行正常并且没有引发错误。但是，取消注释这部分会导致找不到属性的错误。作为旁注，属性 otheramount 是在很久以后添加的。

我正在使用 Netbeans 7.1.2。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:32:30.890

Bean 属性名称不是根据私有字段名称解析的。相反，它们是根据 getter 方法名称解析的。

因此，在您的特定情况下，属性名称不是`otheramount`，而是`otherAmount`。

### 也可以看看：

*   [JavaBean 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)
*   [JavaBeans 教程](http://docs.oracle.com/javase/tutorial/javabeans/)

# php - exec 函数未按预期工作

> ID：16017778
> 
> 赞同：0
> 
> 时间：2013-04-15T14:29:56.563
> 
> 标签：php, ffmpeg, exec

我正在从 php 运行一个 shell 函数，以便在上传视频文件后将其转换为 flash。exec函数是这样的：

```
exec("ffmpeg -i " . WWW_ROOT . "files" . DS . "videos" . DS . $id . $ext . " -ar 22050 -r 32 -f flv -s 640x480 " . WWW_ROOT . "files" . DS . "videos" . DS . $id . ".flv");

// if I echo the string it returns:
// ffmpeg -i /home/vceroot/public_html/example.com/test/intraweb/app/webroot/files/videos/516c1203-0484-417a-b047-5488c40293e9.mpg -ar 22050 -r 32 -f flv -s 640x480 /home/vceroot/public_html/example.com/test/intraweb/app/webroot/files/videos/516c1203-0484-417a-b047-5488c40293e9.flv
// the locations are correct 
```

但是，它不会转换视频。

上传文件后，它只是返回到索引操作。尽管上传的文件在那里，但没有转换后的文件。

我对该文件夹的权限是 755。文件夹所有者是 apache。我不知道还能做什么。任何人都可以帮助我吗？

**更新**

所以我稍微改变了我的 exec 查询并回显了输出：

```
exec("ffmpeg -i " . WWW_ROOT . "files" . DS . "videos" . DS . $id . $ext . " -ar 22050 -r 32 -f flv -s 640x480 " . WWW_ROOT . "files" . DS . "videos" . DS . $id . ".flv 2>&1", $output, $return);
die(print_r($output)); 
```

这返回了以下错误：

```
Array ( [0] => sh: ffmpeg: command not found ) 1 
```

所以我把它改了一下：

```
exec("/usr/local/bin/ffmpeg -i " . WWW_ROOT . "files" . DS . "videos" . DS . $id . $ext . " -ar 22050 -r 32 -f flv -s 640x480 " . WWW_ROOT . "files" . DS . "videos" . DS . $id . ".flv 2>&1", $output, $return);
die(print_r($output)); 
```

现在它返回：

```
Array ( [0] => /usr/local/bin/ffmpeg: error while loading shared libraries: libavdevice.so.55: cannot open shared object file: No such file or directory ) 1 
```

我从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:50:50.090

所以我用谷歌搜索了我的第二个错误并通过将位置添加`libavdevice.so.55`到`/etc/ld.so.conf`文件中并`ldconfig`在此之后运行来修复它。

现在可以了。

# scala - "attempt to use a raw table object" error when using a MappedProjection in a query

> ID：16017780
> 
> 赞同：1
> 
> 时间：2013-04-15T14:29:57.680
> 
> 标签：scala, slick

I'm trying to figure out how to add a query with a mapped projection in Slick, but no matter what I try I keep coming up against the following error:

```
[error] (run-main) scala.slick.SlickException: 
    Select(TableNode, "USER_NAME") found. This is typically 
    caused by an attempt to use a "raw" table object directly 
    in a query without introducing it through a generator.
scala.slick.SlickException: Select(TableNode, "USER_NAME") 
    found. This is typically caused by an attempt to use a "raw" table 
    object directly in a query without introducing it through a generator.
    at scala.slick.ast.Select.<init>(Node.scala:340)
    at scala.slick.ast.Select.copy(Node.scala:338)
    at scala.slick.ast.Select.nodeRebuild(Node.scala:345)
    at scala.slick.ast.Select.nodeRebuild(Node.scala:338)
    at scala.slick.ast.UnaryNode$class.nodeRebuild(Node.scala:141)
    at scala.slick.ast.Select.nodeRebuild(Node.scala:338)
    at scala.slick.ast.SimpleNode$$anonfun$nodeMapChildren$1.apply(Node.scala:62)
    at scala.slick.ast.SimpleNode$$anonfun$nodeMapChildren$1.apply(Node.scala:62)
    at scala.Option.map(Option.scala:145)
    at scala.slick.ast.SimpleNode$class.nodeMapChildren(Node.scala:62)
    at scala.slick.ast.Select.nodeMapChildren(Node.scala:338)
    at scala.slick.compiler.Inline.scala$slick$compiler$Inline$$tr$1(Inline.scala:67)
    at scala.slick.compiler.Inline$$anonfun$scala$slick$compiler$Inline$$tr$1$3.apply(Inline.scala:67)
    at scala.slick.compiler.Inline$$anonfun$scala$slick$compiler$Inline$$tr$1$3.apply(Inline.scala:67)
    at scala.slick.ast.Node$$anonfun$nodeMapNodes$1.apply(Node.scala:38)
    at scala.slick.ast.Node$$anonfun$nodeMapNodes$1.apply(Node.scala:37)
    at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)
    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47)
    at scala.slick.ast.Node$class.nodeMapNodes(Node.scala:37)
    at scala.slick.ast.ProductNode$$anon$3.nodeMapNodes(Node.scala:82)
    at scala.slick.ast.SimpleNode$class.nodeMapChildren(Node.scala:62)
    at scala.slick.ast.ProductNode$$anon$3.nodeMapChildren(Node.scala:82)
    at scala.slick.compiler.Inline.scala$slick$compiler$Inline$$tr$1(Inline.scala:67)
    at scala.slick.compiler.Inline$$anonfun$scala$slick$compiler$Inline$$tr$1$3.apply(Inline.scala:67)
    at scala.slick.compiler.Inline$$anonfun$scala$slick$compiler$Inline$$tr$1$3.apply(Inline.scala:67)
    at scala.slick.ast.Node$$anonfun$nodeMapNodes$1.apply(Node.scala:38)
    at scala.slick.ast.Node$$anonfun$nodeMapNodes$1.apply(Node.scala:37)
    at scala.collection.immutable.List.foreach(List.scala:309)
    at scala.slick.ast.Node$class.nodeMapNodes(Node.scala:37)
    at scala.slick.ast.Pure.nodeMapNodes(Node.scala:151)
    at scala.slick.ast.SimpleNode$class.nodeMapChildren(Node.scala:62)
    at scala.slick.ast.Pure.nodeMapChildren(Node.scala:151)
    at scala.slick.compiler.Inline.scala$slick$compiler$Inline$$tr$1(Inline.scala:67)
    at scala.slick.compiler.Inline$$anonfun$scala$slick$compiler$Inline$$tr$1$3.apply(Inline.scala:67)
    at scala.slick.compiler.Inline$$anonfun$scala$slick$compiler$Inline$$tr$1$3.apply(Inline.scala:67)
    at scala.slick.ast.Node$$anonfun$nodeMapNodes$1.apply(Node.scala:38)
    at scala.slick.ast.Node$$anonfun$nodeMapNodes$1.apply(Node.scala:37)
    at scala.collection.immutable.List.foreach(List.scala:309) 
```

I'm new to Scala and Slick and am having difficulty figuring out what the message means. I think it has to do with this (taken from the slick docs):

> Note that Slick clones your table objects under the covers, so you should not add any extra state to them (extra methods are fine though). Also make sure that an actual object for a table is not defined in a static location (i.e. at the top level or nested only inside other objects) because this can cause problems in certain situations due to an overeager optimization performed by scalac. Using a val for your table (with an anonymous structural type or a separate class definition) is fine everywhere. [Lifted Embedding](http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html)

I've modified the slick-examples MultiDBCakeExample to look like the code below and have tried several permutations but with no luck. The code below is taken from my forked version of the [slick-examples project](https://github.com/burma-shave/slick-examples). Here is a link to just [my changes](https://github.com/burma-shave/slick-examples/commit/eb4c63b4dca2b04898da53b61bb15147c478ff1c).

```
package com.typesafe.slick.examples.lifted

import scala.slick.driver.ExtendedProfile
import scala.slick.session.Session
import scala.slick.driver.H2Driver
import scala.slick.driver.SQLiteDriver

trait Profile {
  val profile: ExtendedProfile
}

case class Picture(url: String, id: Option[Int] = None)

trait PictureComponent { this: Profile => //requires a Profile to be mixed in...
  import profile.simple._ //...to be able import profile.simple._ 

  object Pictures extends Table[(String, Option[Int])]("PICTURES") {
    //                    ^ Table comes from the *current* profile
    def id = column[Option[Int]]("PIC_ID", O.PrimaryKey, O.AutoInc)
    def url = column[String]("PIC_URL", O.NotNull)

    def * = url ~ id

    val autoInc = url returning id into { case (url, id) => Picture(url, id) }

    def insert(picture: Picture)(implicit session: Session): Picture = {
      autoInc.insert(picture.url)
    }
  }
}

case class User(name: String, picture: Picture, id: Option[Int] = None)

case class UserAndPicId(name: String, picId: Int)

trait UserComponent { this: Profile with PictureComponent => //requires Profile and Picture (see def insert)
  import profile.simple._

  object Users extends Table[(String, Int, Option[Int])]("USERS") {
    def id = column[Option[Int]]("USER_ID", O.PrimaryKey, O.AutoInc)
    def name = column[String]("USER_NAME", O.NotNull)
    def pictureId = column[Int]("PIC_ID", O.NotNull)
    def * = name ~ pictureId ~ id
    def justNameAndPicId = name ~ pictureId <> (UserAndPicId, UserAndPicId.unapply _)

    private def autoInc(implicit session: Session) = name ~ pictureId returning id into {
      case (_, id) => id
    }

    def insert(user: User)(implicit session: Session): User = {
      val picture = if (user.picture.id.isEmpty) { //if no picture id...
        Pictures.insert(user.picture) //...insert
      } else user.picture //else return current picture

      val id = autoInc.insert(user.name, picture.id.get)
      user.copy(picture = picture, id = id)
    }

    def userAndPicById = for {
      id <- Parameters[Int]
      user <- this if user.id === id
    } yield justNameAndPicId
  }
}

/**
 * The Data Access Layer contains all components and a profile
 */
class DAL(override val profile: ExtendedProfile) extends UserComponent with PictureComponent with Profile {
  import profile.simple._
  def create(implicit session: Session): Unit = {
    (Users.ddl ++ Pictures.ddl).create //helper method to create all tables
  }
}

/**
 * Run SLICK code with multiple DBMSs using the Cake pattern.
 * Typically this technique can be used to have different DBMS 
 * in production and test (other scenarios are possible as well)
 */
object MultiDBCakeExample {
  // We only need the DB/session imports outside the DAL
  import scala.slick.session.{ Database, Session }

  def run(name: String, dal: DAL, db: Database) {
    import dal._
    import dal.profile.simple._

    println("Running test against " + name)
    db withSession { implicit session: Session =>
      dal.create

      //creating our default picture
      val defaultPic = Pictures.insert(Picture("http://pics/default"))
      println("  Inserted picture: " + defaultPic)

      //inserting users
      val (user1, user2, user3) = (User("name1", defaultPic), User("name2", Picture("http://pics/2")), User("name3", defaultPic))
      println("  Inserted user: " + Users.insert(user1))
      println("  Inserted user: " + Users.insert(user2))
      println("  Inserted user: " + Users.insert(user3))
      println("  All pictures: " + Query(Pictures).list)
      println("  All users : " + Query(Users).list)

      println("  Attempting to fetch UserAndPicId by id")
      Users.userAndPicById(1).firstOption
    }
  }

  def main(args: Array[String]) {
    run("H2", new DAL(H2Driver),
      Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver"))
    run("SQLite", new DAL(SQLiteDriver),
      Database.forURL("jdbc:sqlite::memory:", driver = "org.sqlite.JDBC"))
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:43:02.450

问题在这里：

```
def userAndPicById = for {
  id <- Parameters[Int]
  user <- this if user.id === id
} yield justNameAndPicId 
```

你不能使用`this`. 使用`Query(Users)`.

# vba - Access VBA DoCmd.TransferSpreadsheet 运行速度太慢并导致运行时错误

> ID：16017782
> 
> 赞同：0
> 
> 时间：2013-04-15T14:29:59.073
> 
> 标签：vba, ms-access

我在 Access 的自定义类别中有一组查询，还有一些 VBA 代码获取查询名称并运行它们，然后将每个查询的结果复制到 Excel 电子表格上的单独选项卡中。这是代码：

```
Private Sub Command0_Click()

Dim oExcel As Object
Dim oBook As Object
Dim oSheet As Object
Dim timestamp As String
Dim path As String

'Create the Excel spreadsheet
timestamp = Format(Now(), "yyyyMMddhhmmss")

path = "C:\Users\username\Desktop\ValidationResults" & timestamp & ".xlsx"

Set oExcel = CreateObject("Excel.Application")
Set oBook = oExcel.Workbooks.Add
Set oSheet = oBook.Worksheets("Sheet1")
oBook.SaveAs path
oExcel.Quit

'This gets a list of query names and puts it in a recordset
Dim rs As Recordset
Set rs = CurrentDb.OpenRecordset("01 - GetValidationQueries")

'this runs each query and copies the results to a unique worksheet
Do While Not rs.EOF
    DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, rs("Name"), path, True, Left(rs("Name"), 2)
    rs.MoveNext
Loop

End Sub 
```

“01 - GetValidationQueries”查询在 MSysNavPaneGroupToObjects 和 MSysNavPaneObjectIDs 表中查找，以获取自定义类别中的查询名称。

问题是当我单击表单按钮运行此代码时，我在 DoCmd 行上收到以下错误：

```
Run-time error '3275':
Unexpected error from external database driver (1309). 
```

如果我逐行执行代码（每次都按 F8）它运行良好，所以我猜测 TransferSpreadsheet 过程太慢了。除了在那条线之后暂停之外，还有更好的方法来完成这项工作吗？

编辑：使用以下代码（至少现在）

```
Public Function fnWait(intNrOfSeconds As Integer)
Dim varStart As Variant
  varStart = Timer
  Do While Timer < varStart + intNrOfSeconds
  Loop
End Function 
```

然后在 DoCmd 行之前和之后，我有......

```
fnWait (2) 
```

...创建 2 秒延迟。到目前为止，它似乎正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:34:29.360

我希望这对你有帮助。

[http://p2p.wrox.com/access-vba/24421-wait-function-vba.html](http://p2p.wrox.com/access-vba/24421-wait-function-vba.html)

我确实将它添加到我的数据库中，所以如果您需要帮助来实现它，请询问。

# php - 如何显示数据库中的图像

> ID：16017783
> 
> 赞同：0
> 
> 时间：2013-04-15T14:30:02.420
> 
> 标签：php, codeigniter

我在显示存储在服务器 (/uploads) 中的图像时遇到问题，并且字段的名称存储在数据库中并与用户 ID 链接。

我的控制器：

```
function do_upload()
{
if($this->session->userdata('is_logged_in'))
{
$id = $this->session->userdata('id');
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|jpeg|png';
$config['max_size'] = '100';
$config['max_width']  = '1024';
$config['max_height']  = '768';
$config['overwrite'] = false;
$this->load->library('upload', $config);
if ( ! $this->upload->do_upload())
{
$error = array('error' => $this->upload->display_errors());
$this->load->view("site_header");
$this->load->view("site_nav");
$this->load->view('upload_form', $error);
}else
{    
$data = $this->upload->data();
$file_array = $this->upload->data('file_name');
$profile['profile_picture'] = $file_array['file_name'];
$this->db->where('id', $id);
$this->db->update('users',  $profile);
$data['img']= base_url().'/uploads/'.$data['file_name'];
$this->load->view('upload_success', $data);
}

public function members(){
if($this->session->userdata('is_logged_in')){
   $this->load->model('loginmodel');
   $data = $this->loginmodel->getImage();
   print('/uploads/'.$data);
   $img = base_url().'/uploads/'.$data;
   $this->load->view("site_header");
   $this->load->view("site_nav");
   $this->load->view("members");
   $this->load->view("site_footer");

}else{..... 
```

模型

```
function getImage()
{
$id = $this->session->userdata('id');
$this->db->select("*");
$this->db->from('users');
$this->db->where('id', $id);
$query = $this->db->get();
if($query->num_rows()==0)
echo("Picture not found!");
else{
$data = $query->row_array();
return $data['profile_picture'];
 }
} 
```

看法：

```
<img src="<?php echo $img; ?>" border="0" width="10" height="10"> 
```

我收到此错误：遇到 PHP 错误 严重性：通知消息：未定义变量：img 文件名：views/members.php 行号：19 "border="0" width="10" height="10">

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:39:06.600

将数据传递给视图。

```
$data = array('img' => $img);
$this->load->view("members", $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:44:24.527

您的查询可能不会返回数据，因为可能没有匹配项尝试在您的视图中使用 php 的 isset 函数

# joomla - How to let unregistered user click 'submit article' and then redirect to Login form, but not 403 error?

> ID：16017796
> 
> 赞同：2
> 
> 时间：2013-04-15T14:30:38.797
> 
> 标签：joomla, login, http-status-code-403

My website uses joomla 2.5, I add a link on my main menu to submit new article, but when unregistered user click this link, it will show an 403 error,"You don't have permission to access this URL on this server." But i don't want this page show up, i want website redirect to Login form.

How can i do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:35:44.577

[http://saraakash.wordpress.com/2011/10/13/joomla403-page-to-login-redirect/](http://saraakash.wordpress.com/2011/10/13/joomla403-page-to-login-redirect/)

> 修改/templates/system/error.php。
> 
> 定义（'_JEXEC'）或死（'限制访问'）；
> 
> 并将以下代码放在上面的代码之后：
> 
> $ReferTo = $_SERVER['REQUEST_URI']; $ReferTo = base64_encode($ReferTo);
> 
> if ($this->error->code = '403') { header('Location:index.php?option=com_user&view=login&ReferTo='.$ReferTo); 死（）; }

只需搜索**joomla 403 重定向即可登录**，以上是第一个结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:46:51.507

如果您不想破解核心文件（这是一个坏主意，因为它可能会在下一次安全更新中被清除），有更简单的内置方法可以做到这一点。

1.  将您的“提交新文章”链接更改为“已注册”（或您设置的任何组），这样网站的用户在登录之前不会看到菜单。

    **或者**如果您不希望菜单对用户隐藏没有登录的...

2.  一个更复杂但绝对值得的方法是创建一个“[来宾用户组](http://docs.joomla.org/How_do_you_hide_something_from_logged_in_users?)”

    1.  一旦您创建了**访客**组，如第一个选项，将现有菜单项更改为“已注册”（或您设置的任何组）访问权限。

    2.  然后创建一个同名的“提交新文章”菜单项，但将其链接到“用户登录”菜单类型，并将其访问权限设置为您刚刚创建的“访客”组。

    3.  将“登录重定向”选项设置为您真正的“提交新文章”菜单的 URL

# objective-c - AVScreenShack example fails to save file

> ID：16017797
> 
> 赞同：2
> 
> 时间：2013-04-15T14:30:42.757
> 
> 标签：objective-c, cocoa, avfoundation

I am trying to get Apple's [AVScreenShack example project](http://developer.apple.com/library/mac/#samplecode/AVScreenShack/Introduction/Intro.html) running on OS X 10.8.2.

When I run the application and trigger the recording (calling `startRecording`), a strange sequence of events follows:

*   The application continues to use ~40% CPU (presumably necessary to display the video preview in the application window)
*   The delegate method `captureOutput:didStartRecordingToOutputFileAtURL:fromConnections:` is **never called**

When I trigger `stopRecording`:

*   The application continues to use ~40% CPU
*   The "about to stop" `NSLog` call shows that the `captureMovieFileOutput` object carries a valid file URL (pointing to a temporary file on the desktop)
*   The delegate method `captureOutput:didFinishRecordingToOutputFileAtURL:fromConnections:error:` is **never called**
*   No file is created on the desktop, even after several minutes

I see no errors in the output console. Is there some way I can effectively debug this further?

The relevant code follows. I haven't modified it (but have omitted unnecessary portions of it here).

```
- (BOOL)createCaptureSession:(NSError **)outError
{
    NSLog(@"createCaptureSession start");

    /* Create a capture session. */
    self.captureSession = [[AVCaptureSession alloc] init];

    // ...

    /* Add the main display as a capture input. */
    display = CGMainDisplayID();
    self.captureScreenInput = [[AVCaptureScreenInput alloc]
                               initWithDisplayID:display];
    if ([self.captureSession canAddInput:self.captureScreenInput]) {
        [self.captureSession addInput:self.captureScreenInput];
    } else {
        return NO;
    }

    /* Add a movie file output + delegate. */
    captureMovieFileOutput = [[AVCaptureMovieFileOutput alloc] init];
    [captureMovieFileOutput setDelegate:self];
    if ([self.captureSession canAddOutput:captureMovieFileOutput]) {
        [self.captureSession addOutput:captureMovieFileOutput];
    } else {
        return NO;
    }

    /* Register for notifications of errors during the capture session so we
       can display an alert. */
    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(captureSessionRuntimeErrorDidOccur:)
     name:AVCaptureSessionRuntimeErrorNotification
     object:self.captureSession];

    NSLog(@"createCaptureSession finish w/o errors");

    return YES;
}

- (void)captureOutput:(AVCaptureFileOutput *)captureOutput
didStartRecordingToOutputFileAtURL:(NSURL *)fileURL
      fromConnections:(NSArray *)connections {
    NSLog(@"starting output");
    NSLog(@"%@", captureMovieFileOutput.outputFileURL);
}

/* Informs the delegate when all pending data has been written to the output file. */
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error
{
    NSLog(@"didFinish");

    if (error) 
    {
        [self presentError:error];
        return;
    }

    [[NSWorkspace sharedWorkspace] openURL:outputFileURL];
}

- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
    [super windowControllerDidLoadNib:aController];

    NSLog(@"about to start running the session %@", self.captureSession);
    /* Start the capture session running. */
    [self.captureSession startRunning];
}

/* Called when the user presses the 'Start' button to start a recording. */
- (IBAction)startRecording:(id)sender
{
    NSLog(@"startRecording");

    char *tempNameBytes = tempnam([[@"~/Desktop/" stringByStandardizingPath]
                                   fileSystemRepresentation], "AVScreenShack_");
    NSString *tempName = [[NSString alloc]
                          initWithBytesNoCopy:tempNameBytes
                          length:strlen(tempNameBytes)
                          encoding:NSUTF8StringEncoding
                          freeWhenDone:YES];

    /* Starts recording to a given URL. */
    [captureMovieFileOutput
     startRecordingToOutputFileURL:[NSURL fileURLWithPath:[tempName stringByAppendingPathExtension:@"mov"]]
     recordingDelegate:self];
}

/* Called when the user presses the 'Stop' button to stop a recording. */
- (IBAction)stopRecording:(id)sender
{
    NSLog(@"about to stop from URL: %@", captureMovieFileOutput.outputFileURL);

    [captureMovieFileOutput stopRecording];
}

/* Called when the document is closed. */
- (void)close
{
    NSLog(@"about to stop from URL: %@", captureMovieFileOutput.outputFileURL);

    /* Stop the capture session running. */
    [self.captureSession stopRunning];

    [super close];
} 
```

The log output from the above program follows. Notice that the "didFinish" log call was never made, nor was "starting output."

```
2013-04-20 16:00:01.908 AVScreenShack[8950:303] createCaptureSession start
2013-04-20 16:00:01.912 AVScreenShack[8950:303] createCaptureSession finish w/o errors
2013-04-20 16:00:02.131 AVScreenShack[8950:303] about to start running the session <AVCaptureSession: 0x100618e70 [AVCaptureSessionPresetHigh]>
2013-04-20 16:00:10.936 AVScreenShack[8950:303] startRecording
2013-04-20 16:00:10.936 AVScreenShack[8950:303] Minimum Frame Duration: 0.066667, Crop Rect: {{0, 0}, {0, 0}}, Scale Factor: 1.000000, Capture Mouse Clicks: No, Capture Mouse Cursor: Yes, Remove Duplicate Frames: Yes
2013-04-20 16:00:15.648 AVScreenShack[8950:303] about to stop from URL: file://localhost/Users/jon/Desktop/AVScreenShack_Y2DUaA.mov 
```

# nhibernate - Nhibernate BuildSessionFactory Null Exception

> ID：16017803
> 
> 赞同：0
> 
> 时间：2013-04-15T14:30:59.183
> 
> 标签：nhibernate, nullreferenceexception, sessionfactory

I'm getting BuildSessionFactory null exception.

Using Nhibernate 3.3.3.4000 , .NET 4.5 , MVC 4 and;

```
ISessionFactory sessionFactory = new Configuration().Configure().BuildSessionFactory(); 
```

When i try this code block im getting null exception. Tried install nuget package several times and checked web.config. Nothing changed.

Anyone can help me?

**edit-1 StackTrace of Exception**

```
at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()  

 at NHibernate.Engine.NamedSQLQueryDefinition..ctor(String query, INativeSQLQueryReturn[] queryReturns, IList`1 querySpaces, Boolean cacheable, String cacheRegion, Int32 timeout, Int32 fetchSize, FlushMode flushMode, Nullable`1 cacheMode, Boolean readOnly, String comment, IDictionary`2 parameterTypes, Boolean callable)
   at NHibernate.Cfg.XmlHbmBinding.NamedSQLQueryBinder.<>c__DisplayClass1.<AddSqlQuery>b__0(IDictionary`2 param0)
   at NHibernate.Cfg.Configuration.SecondPassCompile()
   at NHibernate.Cfg.Configuration.BuildSessionFactory() 
```

Thanks already.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:37:33.457

我找到了解决方案！在我的模型映射中，我的 SQL 查询之一留空。:)

# android - android.location.Location 中的“转储”方法有什么作用，为什么没有文档？

> ID：16017805
> 
> 赞同：4
> 
> 时间：2013-04-15T14:31:11.477
> 
> 标签：android, geolocation, location

在 Location 类中有一个名为[dump](http://developer.android.com/reference/android/location/Location.html#dump%28android.util.Printer,%20java.lang.String%29)的方法，但它没有与之关联的文档。

它究竟是做什么的？而且，如果它是已知的，为什么它没有文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:33:28.643

它在这里仅用于调试目的。

下面是实现的源代码：

```
公共无效转储（打印机密码，字符串前缀）{
         pw.println(前缀 + "mProvider=" + mProvider + " mTime=" + mTime);
         pw.println(前缀 + "mLatitude=" + mLatitude + " mLongitude=" + mLongitude);
         pw.println(前缀 + "mHasAltitude=" + mHasAltitude + " mAltitude=" + mAltitude);
         pw.println(前缀 + "mHasSpeed=" + mHasSpeed + " mSpeed=" + mSpeed);
         pw.println(前缀 + "mHasBearing=" + mHasBearing + " mBearing=" + mBearing);
         pw.println(前缀 + "mHasAccuracy=" + mHasAccuracy + " mAccuracy=" + mAccuracy);
         pw.println(前缀 + "mExtras=" + mExtras);
     }
```

# java - Jboss 7.1 log4j costume logging filter or exception

> ID：16017809
> 
> 赞同：0
> 
> 时间：2013-04-15T14:31:27.993
> 
> 标签：java, jboss, log4j, jboss7.x

let's start coding:

```
@Startup 
@Singleton
import org.apache.log4j.Logger;
public class MyClass{

    public static final Logger logger = Logger.getLogger(MyClass.class.getSimpleName());

    @PostConstruct
    private void invoke() {
        LOG.info("INFO");
        LOG.warn("WARN");
        LOG.error("ERROR");
        LOG.fatal("FATAL");
        LOG.debug("DEBUG");
        LOG.trace("TRACE");
        }
} 
```

and if I change:

```
 <root-logger> <level name="INFO"/>...</root-logger> to   "DEBUG" instead of "INFO" 
```

I have debug console. **everything works fine.**

now I want to **change something**.

I want generally root-logger to be "INFO". but with X.Y.Z package to be "DEBUG";

something like that, but it does not working:

```
<logger category="XXX.YYY.ZZZ" use-parent-handlers="false">
            <level name="DEBUG"/>
            </logger>
            <root-logger>
                <level name="INFO"/>
                <handlers>
                    <handler name="CONSOLE"/>
                    <handler name="FILE"/>
                </handlers>
            </root-logger> 
```

In the other words. I only want to debug XXX.YYY.ZZZ package. not another packages ("INFO" for another packages). may be I need some filters or exception.

this XML **does not works because** hierarchy order of log4j is that:

```
OFF       <------ PERMITED
FATAL     <------ PERMITED
ERROR     <------ PERMITED
WARN      <------ PERMITED
INFO      <-----  COSTUME LOGGING PERMITTED UP TO INFO (if root-logger is "INFO)
DEBUG
TRACE
ALL 
```

if my root-logger is "INFO" then have permission only to create costume logging to current package **with hierarchy UP TO INFO**

but I need some exception or something like that. I don't need any XML configuration file or properties file. I need only to change standlone.xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:30:50.073

您正在设置`use-parent-handlers`to `false`，但您的记录器上没有安装任何处理程序。您需要将值更改为`true`或将处理程序添加到您的记录器。

将 设置`use-parent-handlers`为 false 仅使用附加到特定记录器的处理程序。由于您没有附加任何处理程序，因此没有将输出记录到的处理程序。

在您的示例中，您使用的是类的简单名称，这意味着类别`MyClass`不是包名称。

尝试类似：

```
<logger category="MyClass">
    <level name="DEBUG"/>
</logger> 
```

# python - 元组周围什么时候需要括号？

> ID：16017811
> 
> 赞同：51
> 
> 时间：2013-04-15T14:31:31.873
> 
> 标签：python, syntax, tuples

当需要或不需要用括号括起来的元组时，是否有精确定义的引用？

这是一个最近让我感到惊讶的例子：

```
>>> d = {}
>>> d[0,] = 'potato'
>>> if 0, in d:
  File "<stdin>", line 1
    if 0, in d:
        ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-15T14:40:52.077

使用逗号标记组合表达式以创建元组称为[`expression_list`](http://docs.python.org/3/reference/expressions.html#expression-lists). [运算符优先级](http://docs.python.org/3/reference/expressions.html#operator-precedence)规则不包括表达式列表；这是因为表达式列表本身不是表达式；当它们被括在括号中时，它们成为表达式。

`expression_list`因此，在 Python 中任何语言语法明确允许的地方都允许使用未封闭的，但*在*需要这样`expression`的地方则不允许。

例如[if 语句](http://docs.python.org/3/reference/compound_stmts.html#the-if-statement)的语法如下：

```
if_stmt ::=  "if" expression ":" suite
             ( "elif" expression ":" suite )*
             ["else" ":" suite] 
```

因为引用了产生式，所以不允许`expression`未封闭的 s 作为语句的主题。但是，[for 语句](http://docs.python.org/3/reference/compound_stmts.html#the-for-statement)接受：`expression_list``if``expression_list`

```
for_stmt ::=  "for" target_list "in" expression_list ":" suite
              ["else" ":" suite] 
```

所以以下是允许的：

```
for x in 1, 2, 3:
    print(x) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-15T14:41:43.580

在允许使用该[`expression_list`](http://docs.python.org/2/reference/expressions.html#expression-lists)术语的任何地方，都不需要使用括号。

该[`if`语句](http://docs.python.org/2/reference/compound_stmts.html#the-if-statement)需要`expression`，并且不支持`expression_list`。

允许的语法示例`expression_list`：

*   [声明](http://docs.python.org/2/reference/simple_stmts.html#the-return-statement)_[`return`](http://docs.python.org/2/reference/simple_stmts.html#the-return-statement)
*   [`yield`表达式](http://docs.python.org/2/reference/expressions.html#yield-expressions)
*   [赋值](http://docs.python.org/2/reference/simple_stmts.html#assignment-statements) （包括[扩充赋值](http://docs.python.org/2/reference/simple_stmts.html#augmented-assignment-statements)）
*   [`for`声明](http://docs.python.org/2/reference/compound_stmts.html#the-for-statement)。_

阅读[Expressions](http://docs.python.org/2/reference/expressions.html)、[Simple](http://docs.python.org/2/reference/simple_stmts.html)和[Compound statements](http://docs.python.org/2/reference/compound_stmts.html)文档`expression_list`将告诉您`expression_list`Python 语法中使用的所有位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T19:12:48.187

**当您想避免歧义**时，也需要括号。

以下是两个不同的表达式...仅仅因为某些东西是“表达式列表”，不会导致您可能期望的表达式列表:)

```
(1, 2, 3) + (4, 5) # results in (1, 2, 3, 4, 5) because + does sequence.extend on the tuples
1, 2, 3 + 4, 5     # this results in (1, 2, 7, 5) because + adds the elements, since there were no parentheses to protect the separate tuples 
```

# jquery - 单击后更改网格中的图像

> ID：16017815
> 
> 赞同：0
> 
> 时间：2013-04-15T14:31:44.380
> 
> 标签：jquery, jqgrid

我的篮子行中有一张图片，我想在点击后更改它。

我尝试以多种方式更改它，但图像保持不变。

这是网格中的定义：

```
{name:'Basket', index:'Basket', width:7, formatter: basketFormatter, align: 'center', sortable:false, search:false} 
```

格式化程序：

```
function basketFormatter(cellvalue, options, rowObject){  

  var rowId = options.rowId;  

  var basket = '<img src="/img/basket_off.gif" border="0" onClick="add2Basket(this,' + "'" + rowId + "'" + ')"/></a>'; 

  return basket;
} 
```

以及部分功能

```
function add2Basket(image, rowId){

  $(image).attr('src', '/img/basket_on.gif');
  $("#list").setCell(rowId, 'Basket', '<img src="basket_on.gif" />'); 
```

但是以上几行都没有改变图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:14:22.880

首先，您需要修复您的自定义格式化程序以生成正确的格式化程序 HTML 片段，而无需额外`</a>`：

```
<img src="..." /> 
```

接下来，您不需要使用`onClick`with *global* defined function `add2Basket`。取而代之的是，您可以使用`onCellSelect`回调，该回调将在单击网格主体内的*任何*元素时被调用。您可以使用`iCol`或`e.target.nodeName`仅过滤您需要的事件。属性的设置`src`足以改变图像。

[演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithImagesSwap.htm)

![在此处输入图像描述](https://i.stack.imgur.com/U0By1.png)

显示带有旗帜的小网格，但通过单击旗帜，您可以将其更改为另一个国家的旗帜。我使用了以下代码

```
onCellSelect: function (rowid, iCol, cellContent, e) {
    if (e.target.nodeName.toLowerCase() === "img") {
        $(e.target).attr("src", swapList[$(e.target).attr("src")]);
    }
} 
```

我在哪里定义`swapList`了下一个应该是哪个标志。

# iphone - 使用 tableView 启动新视图时的 EXC_BAD_ACCESS

> ID：16017816
> 
> 赞同：0
> 
> 时间：2013-04-15T14:31:44.770
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, tableview

我正在尝试使用内部的 tableView 启动一个新的 viewController，但我不断收到 EXC_BAD_ACCESS 错误。

。H

```
#import <UIKit/UIKit.h>

    @interface GeneralInfoViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

    @end 
```

.m

```
@interface GeneralInfoViewController ()

@end

@implementation GeneralInfoViewController

{
    NSArray *tableData;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    self.title = @"Allmänna uppgifter";
    [super viewDidLoad];
    // Initialize table data
    tableData = [NSArray arrayWithObjects:@"Egg Benedict", @"Mushroom Risotto", nil];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    return cell;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)dealloc {
    [super dealloc];
}
- (void)viewDidUnload {
    [super viewDidUnload];
}
@end 
```

我在方法中遇到异常，`return [tableData count];`但`numberOfRowsInSection`我认为问题与我如何在中启动 viewController 有关`viewDidLoad`，`initWithNibName`但我无法弄清楚它是什么。

我试图交换`viewDidLoad`with`loadView`但这只是产生了一个不同的错误。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:34:24.707

您已经使用方便的方法（即没有 allo/init/retain）初始化了 tableData。所以数组会自动释放。

尝试使用

```
tableData=[[NSArray alloc] initWithObjects:...]; 
```

# java - 使用数组生成机器人可能

> ID：16017819
> 
> 赞同：0
> 
> 时间：2013-04-15T14:31:52.927
> 
> 标签：java

我很不确定该怎么做，但我会尽力而为。

我有一些相关的类用于列出图像，另一个用于机器人，它告诉他们该做什么，另一个用于在屏幕上绘画。我遇到的问题是让机器人复制自己，然后在按下 ..say 空格时使用与原始代码相同的代码。

Java对我来说还是很新的。

我用它来说明图像：

```
Bot = new ImageIcon(getClass().getResource("/res/botDown.gif")).getImage(); 
```

操纵机器人做事的代码只是一堆不断变化的 if`botx`语句`boty`。我猜想通过使用数组在按下空间时分配更多机器人是可行的方法。否则，我会这样做的方式是编写更多机器人自己复制并粘贴所有 IF，然后设置空间以将值递增 1 并相应地分配每个机器人（不好的方式）。希望有助于解释。

任何建议表示赞赏谢谢！

添加了机器人类代码的示例：

```
if (Botx < Botx2 + 50 && Botx > Botx2 && Boty > Boty2 - 50
        && Boty < Boty2 + 50) {
    Botx = Botx + 2;
}
if (Botx > Botx2 - 50 && Botx < Botx2 && Boty < Boty2 + 50
        && Boty > Boty2 - 50) {
    Botx = Botx - 2;
}
if (Boty > Boty2 && Boty < Boty2 + 50 && Botx < Botx2 + 50
        && Botx > Botx2 - 50) {
    Boty = Boty + 2;
}
if (Boty < Boty2 && Boty > Boty2 - 50 && Botx < Botx2 + 50
        && Botx > Botx2 - 50) {
    Boty = Boty - 2;
}
//Anti Collision push BOT2
if (Botx2 < Botx + 50 && Botx2 > Botx && Boty2 > Boty - 50
        && Boty2 < Boty + 50) {
    Botx2 = Botx2 + 2;
}
if (Botx2 > Botx - 50 && Botx2 < Botx && Boty2 < Boty + 50
        && Boty2 > Boty - 50) {
    Botx2 = Botx2 - 2;
}
if (Boty2 > Boty && Boty2 < Boty + 50 && Botx2 < Botx + 50
        && Botx2 > Botx - 50) {
    Boty2 = Boty2 + 2;
}
if (Boty2 < Boty && Boty2 > Boty - 50 && Botx2 < Botx + 50
        && Botx2 > Botx - 50) {
    Boty2 = Boty2 - 2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:02:34.467

要处理任意数量的机器人：

```
for(Bot bot : botArray) {
    for(Bot bot2 : botArray) {
        if(!bot.equals(bot2) {
            // Push bot around (not bot2 since it will be handled in another iteration)
        }
    }
} 
```

但根据具体情况，机器人可能会在试图避开第三个机器人时与第二个机器人发生碰撞。

顺便说一句，我认为您的代码可以通过使用来改进`Math.abs(x - x2)`

# ios - ORM for SQLite in iOS

> ID：16017820
> 
> 赞同：6
> 
> 时间：2013-04-15T14:31:56.507
> 
> 标签：ios, ipad, orm

I am trying to convert a C# application we had developed to an iPad application. As we developed the app with Entity framework, I am looking for a counterpart for iOS.

According to [this answer](https://stackoverflow.com/a/8545631/749973), there are several ORM libraries for SQLite in iOS:

*   [FMDB](https://github.com/ccgus/fmdb)
*   [chibi-ORM](http://code.google.com/p/chibiorm/)
*   [sqlitepersistentobjects](http://code.google.com/p/sqlitepersistentobjects/)

But after reading each of the web sites, I still can't decide which package to use. Can anybody who has experience with one of them tell me advantages/disadvantages of the packages?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-15T23:36:26.317

UPDATE: DBAccess has now been replaced by the open source ORM Shark.

We have recently released a free to distribute and use ORM for Objective-c / iOS called DBAccess, which can be downloaded from [http://db-access.org/](http://db-access.org/), it has taken several years to develop and has now been deployed within many applications.

It may not be for everyone, but I hope our effort will help some in the community.

*NOTE*, I have been alerted to the fact that it is bad form to promote your own products in a forum such as this, but I just wanted to add that I am only posting this in answer to the OP because I feel it does bring something useful to the table and I sincerely hope it will prove helpful to some people, even if it's not for everyone.

UPDATE: DBAccess has now been replaced by the open source ORM Shark. It is API compatible, and is available on github. [http://sharkorm.com](http://sharkorm.com) and [https://github.com/sharksync/sharkorm](https://github.com/sharksync/sharkorm)

Thanks Adrian_H

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-02T14:03:01.893

I've dealt with the limited number of ORMs for quite some time, and I finally did something to improve the limited options available. I've written an ORM and released it under a BSD license for everyone to use. It's posted on [GitHub](https://github.com/nschilling/StorageLayer).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-05T17:30:28.517

The best way to convert an c# app to iOS is Xamarin i think, there is a library [sqlite-net](https://github.com/praeclarum/sqlite-net) , works good.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-07T01:01:26.450

**TL;DR**: [LabQLite](http://labitory.binpress.com/):

*   is a flexible SQLite ORM for iOS
*   has pre-written mid- and low-level boilerplate for CRUD
*   has pre-written mid- and low-level boilerplate for database control
*   ships with a shell script which analyzes an SQLite 3 db and spits out classes which inherit [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) methods from `LabQLiteRow`
*   has 100 unit tests in v1.0

**Full Disclosure:** This is a library that I've developed. It is released into the public domain.

**Long Version**

Check out [LabQLite](http://labitory.binpress.com/). It's a little bit o' coin (depending on the license you get), but I think it is the strongest contender out there for SQLite on iOS.

It ships with a shell script that can analyze your SQLite database file for you, spit out class files corresponding to the tables and views. I noticed you mentioned that you are coming from a previous project. If you can export an SQLite db file from that project, you can be up-and-running with usable model classes in seconds (depending on db size) using the `labqlitemodelgen.sh` to get all your models.

**Note:** If your tables and views are named with underscores (e.g. my_table_name), the corresponding class that is generated will follow Objective-C naming conventions (e.g. MyTableName) - likewise for table columns to model class properties.

LabQLite in version 1.0 ships with 100 unit tests.

LabQLite also **eliminates** what I like to call the **middle-level boilerplate**. In other words, usually once you get all the C language **low-level boilerplate** written for a SQLite project on iOS, you still have to write [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) methods for your models, and maybe you have to write helper methods (depending on your application) too. (**EDIT:** This is common with smaller open-source solutions).

With LabQLite, you don't write the middle- nor low-level bp. The generated model classes inherit from a superclass that does ALL that for you. Plus, the generated classes are not *themselves* filled with the CRUD methods - so your model class files end up looking cleaner than if they were filled with CRUD ;)

Integration is quick if you have the SQLite db file in your app's bundle:

```
/**
 @abstract Activates a global singleton shared instance of an
 LabQLiteDatabaseController with the database at the file path
 specified.

 @param filePath The file path to the sqlite3 database file in
 the local bundle.

 @param savePath The path (including file name) to which the
 sqlite3 database file retrieved from the main bundle should
 be saved.

 @param NSDocumentDirectoryIsRootPath Prepends the savePath with
 the path to the NSDocumentDirectory.

 @param overwrite If set to YES, then this method will overwrite
 any file it finds at the savePath. Otherwise, it will not.

 @param error The standard error capturing double indirection
 pointer.

 @return Whether the activation of the shared database controller
 was indeed successful.

 @see
    initWithFileInFromLocalBundle:toBeCopiedToAndUsedFromDirectory:assumingNSDocumentDirectoryAsRootPath:overwrite:error:
 */
 + (BOOL)activateSharedControllerWithFileFromLocalBundle:(NSString *)filePath
                   toBeCopiedToAndUsedFromDirectory:(NSString *)savePath
              assumingNSDocumentDirectoryAsRootPath:(BOOL)NSDocumentDirectoryIsRootPath
                                          overwrite:(BOOL)overwrite
                                              error:(NSError **)error; 
```

There are other fast integration approaches too if you don't put your SQLite db file in your app's bundle.

The code is adequately commented with both doc and inline comments throughout.

Another factor to consider is **maintainability**. Sure, the freebies have quick 'discoverability,' but what one quickly learns is that (a.) integration of the framework/library is fast, but (b.) maturating your app is slower because significant changes in your app require significant changes to your model code (i.e. mid and low boilerplate).

LabQLite is written in [Objective-C](https://en.wikipedia.org/wiki/Objective-C) and so is usable, say, in legacy systems as well as in modern apps.

LabQLite conceptually is like an 'extendable ladder.' That is, if you wanted, you could:

*   leverage the model class generation and high-level database controller functions to build your app, or
*   leverage the database controller only, and build your custom classes that communicate with the controller's processing methods, or
*   simply pass `NSString` queries into the database object or database controller object for processing

So, you are not pigeonholed into using LabQLite as an ORM... neither totally nor partially. There are even object types called `LabQLiteStipulation`s which encapsulate logic for conditionals. So there's flexibility there, too.

Keep an eye on [https://twitter.com/labitorysupport/](https://twitter.com/labitorysupport/) for updates.

**Summary**

The strengths of LabQLite are:

*   Speedy integration of database
*   Increased project maintainability
*   Fast generation of model objects
*   Flexibility between high, mid and low level access to SQLite
*   Friendly to legacy systems
*   Well documented within the code
*   Respectably unit-tested

# javascript - GeoLocation API 错误处理

> ID：16017822
> 
> 赞同：1
> 
> 时间：2013-04-15T14:32:05.707
> 
> 标签：javascript, html, error-handling, geolocation

所以我有这个代码......问题是当 Firefox 询问我的位置时，我拒绝它，它永远不会运行错误函数。为什么？

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(savePosition, noPosition);
} else { noPosition(null); }

function savePosition(position) {
    current.latitude = position.coords.latitude;
    current.longitude = position.coords.longitude;
}

function noPosition(error) {
    alert("Aaa");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:49:29.630

这是一个错误，您可以在此处看到：[https ://bugzilla.mozilla.org/show_bug.cgi?id=675533](https://bugzilla.mozilla.org/show_bug.cgi?id=675533)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:42:29.267

看起来这是 Firefox 的当前行为。当您在此页面上尝试他们的示例时也会发生同样的情况：[https ://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation](https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation)

# c# - 从 ArrayList 的 C# 泛型继承

> ID：16017823
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:32:06.763
> 
> 标签：c#, templates, generics, inheritance

我想创建自己的继承自 ArrayList 的类。（我想向 ArrayList 添加一些我需要的功能）

我希望我的 MyArrayList 仍然是通用的，意味着 - MyArrayList。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:35:26.627

如果您想要通用列表而不是更好地使用`List<T>`.

要添加额外的功能，您可以使用扩展方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:34:59.767

[ArrayList](http://msdn.microsoft.com/it-it/library/system.collections.arraylist%28v=vs.110%29.aspx)的定义已经是通用的，因为它是一个`objects`.

没有比`object`CLR 更通用的了。

如果您的意思是[泛型](http://msdn.microsoft.com/it-it/library/512aeb7t%28v=vs.110%29.aspx)( `<T>`)，只需使用`List<T>`.

# drop-down-menu - Durandal / Knockout 表格中的嵌套下拉列表

> ID：16017824
> 
> 赞同：2
> 
> 时间：2013-04-15T14:32:12.200
> 
> 标签：drop-down-menu, knockout.js, nested, durandal

我对 Durandal 和 Knockout 很陌生，我遇到了一个问题，我不知道如何解决。

我有一张信用卡表格的视图。每行都有两个名为 Dimension1Key 和 Dimension2Key 的嵌套下拉列表 - 它们是从 GetDimensionMatrix ajax 调用中填充的。

creditlines foreach 填充在一个 for 循环中，其中两个下拉列表被定义为可观察的 - 并且 Dimension2 的数据被计算为 ko.compute。

表格和下拉列表最初使用选择的正确值正确填充 - 但嵌套无法正常工作。无论我更改哪个 Dimension1 下拉菜单，*self*的引用都是对表中的最后一行 - 因此使用最后一行的选定值中的值填充相应 Dimension1 的 Dimension2。如果再次更改 Dimension1 值，则不会发生任何事情 - 对计算函数的引用被破坏。但是，如果我更改最后一行的 Dimension1 的值，则先前更改的行 Dimension2 的值会更改 - 就好像该引用现在连接到最后一行一样。

我很确定问题是视图模型中的循环中的*self* - 以及它存在的上下文 - 但我无法理解解决方案。

有什么帮助吗？:-)

看法：

```
<section>
    <h2 data-bind="html:displayName"></h2>

    <table class="table">
        <tbody data-bind="foreach: creditCardLines">
            <tr>
                <td class="date" data-bind="text: Date"></td>
                <td class="date" data-bind="text: DocumentNo"></td>
                <td data-bind="text: Description"></td>
                <td><select data-bind="options: $parent.dimension1List, optionsText: 'DimensionValue', optionsValue: 'DimensionKey', value: Dimension1Key"></select></td>
                <td><select data-bind="options: dimension2List, optionsText: 'DimensionValue', optionsValue: 'DimensionKey', value: Dimension2Key"></select> </td>
                <td data-bind="text: Currency"></td>
                <td data-bind="text: CurrencyAmount"></td>
                <td data-bind="text: ExchangeRate"></td>
                <td data-bind="text: AmountLCY"></td>
                <td data-bind="text: Comment"></td>
                <td data-bind="text: ApprovedEmployee"></td>
                <td data-bind="text: Id"></td>
            </tr>
        </tbody>
    </table>
</section> 
```

视图模型：

```
define(function (require) {

var submit = function () {
    this.displayName = 'Rejseafregning';

    this.creditCardLines = ko.observableArray();

    var me = this;

    this.activate = function () {
        return $.when(
                $.get('/submit/GetCreditCardLines'),
                $.get('/submit/GetDimensionMatrix')
                )
            .then(function (creditCardLines, dimension1List) {
                me.dimension1List = dimension1List[0].Data;

                for (var i = 0; i < creditCardLines[0].Data.length; i++) {
                    var self = creditCardLines[0].Data[i];

                    self.Dimension1Key = ko.observable(creditCardLines[0].Data[i].Dimension1Key);
                    self.Dimension2Key = ko.observable(creditCardLines[0].Data[i].Dimension2Key);

                    self.dimension2List = ko.computed(function () {
                        for (var j = 0; j < me.dimension1List.length; j++) {
                            if (me.dimension1List[j].DimensionKey === self.Dimension1Key()) {
                                return me.dimension1List[j].DimensionNext;
                            }
                        }
                    });

                    me.creditCardLines.push(self);
                }
            });
        };
    };
    return submit;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:42:06.950

创建 a 时，`ko.computed`您可以传入第二个参数，该参数控制`this`计算计算时的值。

当您创建`dimension2List`计算时，您可能希望将当前`self`输入作为第二个参数传递，然后`this`在方法中使用，例如：

```
 self.dimension2List = ko.computed(function () {
                for (var j = 0; j < me.dimension1List.length; j++) {
                    if (me.dimension1List[j].DimensionKey === this.Dimension1Key()) {
                        return me.dimension1List[j].DimensionNext;
                    }
                }
            }, self); 
```

否则，根据闭包在 JS 中的工作方式，`self`重新计算计算的值最终将成为设置为（最后一行）的最后一个值。`self`

使用第二个参数`computed`确保该特定值将用作上下文。

# c# - 如何将 3D 数组传递给 SQL Server 存储过程

> ID：16017825
> 
> 赞同：1
> 
> 时间：2013-04-15T14:32:13.157
> 
> 标签：c#, sql, arrays, stored-procedures, parameters

我在 C# 中有一个 3D 字符串数组，我需要将其作为参数发送到 SQL 服务器存储过程，以便该过程使用每个数组行的 WHERE 条件执行选择查询（3 个条件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:33:34.253

您可以将表参数添加到存储过程并将输入数据作为 DataTable 传递。

[本文](http://www.sqlteam.com/article/sql-server-2008-table-valued-parameters)可以作为 sql 2008 的起点。

# mysql - MySQL：重复插入表

> ID：16017826
> 
> 赞同：0
> 
> 时间：2013-04-15T14:32:14.620
> 
> 标签：mysql, while-loop

给定**书号 id**和书本数，我想在表格中插入与书本一样多的行**。**这是我的非工作解决方案：

```
DROP PROCEDURE IF EXISTS insert_into_book_copy_table;
CREATE PROCEDURE insert_into_book_copy_table (IN in_book_id INT,
                                              IN in_num     INT)
BEGIN

    SET @I = 1;
    SET @ACQUIRED = CURRENT_TIMESTAMP;

    WHILE I <= in_num DO 
        INSERT INTO book_copy (book_id, acquired) # The table has an
        VALUES (in_book_id, @ACQUIRED);           # auto-increment field
                                                  # which I didn't list here
        SET @I = @I + 1;
    END WHILE;

END$$ 
```

例如，如果给定的**书号 id**是 23 并且书本的数量等于 8，那么**book_copy 表**应该如下所示：

```
SELECT * FROM book_copy;
╔══════════════╦══════════╦═════════════════════╗
║ book_copy_id ║  book_id ║      acquired       ║
╠══════════════╬══════════╬═════════════════════╣
║            1 ║       23 ║ 2013-04-15 18:15:20 ║
║            2 ║       23 ║ 2013-04-15 18:15:20 ║
║            3 ║       23 ║ 2013-04-15 18:15:20 ║
║            4 ║       23 ║ 2013-04-15 18:15:20 ║
║            5 ║       23 ║ 2013-04-15 18:15:20 ║
║            6 ║       23 ║ 2013-04-15 18:15:20 ║
║            7 ║       23 ║ 2013-04-15 18:15:20 ║
║            8 ║       23 ║ 2013-04-15 18:15:20 ║
╚══════════════╩══════════╩═════════════════════╝ 
```

有没有更好的编码方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:06:50.577

试试这个，作为一个单一的 SQL 语句：-

```
INSERT INTO book_copy (book_id, acquired)
SELECT a.i+b.i*10+c.i*100 + 1, $BookId, NOW()
FROM integers a, integers b, integers c
WHERE a.i+b.i*10+c.i*100 < $NumberToInsert 
```

依赖于一个包含 10 行的单列（称为 i）的整数表，其值为 0 到 9。将其与自身连接两次会给出从 0 到 999 的所有数字（可以轻松扩展），因此最多可以插入一份声明中包含 1000 本书。

编辑 - 如果你不想创建一个整数表，那么你可以用几个返回常量的子查询来做同样的事情： -

```
INSERT INTO book_copy (book_id, acquired)
SELECT a.i+b.i*10+c.i*100 + 1, $BookId, NOW()
FROM (SELECT 0 AS i UNION SELECT 1 AS i UNION SELECT 2 AS i UNION SELECT 3 AS i UNION SELECT 4 AS i UNION SELECT 5 AS i UNION SELECT 6 AS i UNION SELECT 7 AS i UNION SELECT 8 AS i UNION SELECT 9 AS i ) a,
(SELECT 0 AS i UNION SELECT 1 AS i UNION SELECT 2 AS i UNION SELECT 3 AS i UNION SELECT 4 AS i UNION SELECT 5 AS i UNION SELECT 6 AS i UNION SELECT 7 AS i UNION SELECT 8 AS i UNION SELECT 9 AS i ) b,
(SELECT 0 AS i UNION SELECT 1 AS i UNION SELECT 2 AS i UNION SELECT 3 AS i UNION SELECT 4 AS i UNION SELECT 5 AS i UNION SELECT 6 AS i UNION SELECT 7 AS i UNION SELECT 8 AS i UNION SELECT 9 AS i ) c
WHERE a.i+b.i*10+c.i*100 < $NumberToInsert 
```

# matlab - matlab print -depsc error

> ID：16017827
> 
> 赞同：1
> 
> 时间：2013-04-15T14:32:16.300
> 
> 标签：matlab, printing, eps

I have a really frustrating problem with Matlab. I want to convert a Matlab plot into an eps file. It has always worked fine, last time about half an hour ago, but now it seems to not work anymore. Whenever I type in the command:

```
print -depsc filename.eps 
```

Matlab says:

```
Error using validateHandleToPrint (line 26)
No Figure to print.

Error in validate (line 17)
pj = validateHandleToPrint(pj);

Error in print (line 201)
    pj = validate( pj ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:59:43.330

如果您在[`print()`](http://www.mathworks.co.uk/help/matlab/ref/print.html)没有显式传递图形句柄的情况下调用该函数，它将尝试打印[`gcf()`](http://www.mathworks.co.uk/help/matlab/ref/gcf.html)当前图形句柄。

如果由于某种原因，当前图形句柄不再有效（例如，您关闭了图形），那么它将抛出您得到的错误。

您可以通过检查有条件地打印[`ishghandle()`](http://www.mathworks.co.uk/help/matlab/ref/ishghandle.html)：

```
if ishghandle(gcf)
    print ...
end 
```

# python - 如何在不破坏唯一性的情况下翻译 Django 中的共享模型？

> ID：16017830
> 
> 赞同：1
> 
> 时间：2013-04-15T14:32:19.287
> 
> 标签：python, django, django-models, internationalization

我正在开发一个 Django (v. 1.5.1) 网站，我有几个模型，例如`RegisteredUser`和`Startup`. 这两个模型中的每一个都有`Many2ManyField`一个`Area`模型。`Area`包含两个字段：`name`和`slug`（由 构建`name`）。

这种设计可以很好地找到同一领域内的用户和初创公司，但是在尝试将其国际化时存在一个大问题。在这个设计中，用户自己创建区域并将它们附加到`RegisteredUser`实例`Startup`上。但是，如果用不同的语言创建相同的区域，则调用的区域`computer science`将不同于`informática`（西班牙语版本）。

这个想法是用户创建区域就像他们是标签一样，但我认为这会带来如上所述的问题。

所以我想知道可能的解决方案：

1.  当用户创建一个区域实例时，她必须填写该区域的所有翻译版本，并且会根据英文版本计算slug。但这对用户来说似乎不是很有吸引力。可以？
2.  用户只能从先前介绍和翻译过的预定义区域列表中进行选择。但是新的呢？这个选项似乎真的很难维护......

对于我正在使用的翻译`django-transmeta`。

因此，我很高兴阅读您对如何处理此问题的意见和建议。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:53:53.973

最后我通过引入一个新层解决了这个问题，如下所示：

存在模型区域和资源，现在都可以翻译并且由管理员创建，当前用户不允许创建或修改它们。这些模型将更加抽象以允许进行匹配。

但是，为了更“精确”，添加了两个新模型：`AreaTag`和`ResourceTag`. 这两个模型是由用户创建的，它们没有被翻译。所以我们可以有 "application" 和 "applicación" `areatags`，但是由于用户之前选择了`Area`，我们可以使用 进行搜索`Area`，这在这两种情况下都很常见。`Tag`因此，无需在关卡中搜索即可找到亲和力。

希望这可以帮助尝试做类似事情的人！:)

# python - Python: python process isolation level when "monkey patching" classes

> ID：16017833
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:32:28.473
> 
> 标签：python, process, pyramid, wsgi, monkeypatching

I have a (beginner) question.

I intend to run more than one webapp (pyramid web apps) and I have a common library (let's call that base app) that may be used by both webapps and includes pyramid configuration includes etc. These webapps will eventually be separate wsgi scripts (probably) ending up sitting in the same virtualenv.

My question is: What is the isolation level in python if I monkey patch classes in this library (I am currently dynamically changing **bases** for some of the classes in that library that may be referenced from both webapps).

for example:

in base app:

```
class_from_baseapp(grandparent):
    pass 
```

in derived app 2:

```
from baseapp import class_from_baseapp
#do some stuff with this class
#and have another bunch of child classes too!
class_from_childapp2(class_from_baseapp):
    pass 
```

in derived app 1:

```
from baseapp import class_from_baseapp
# then what I do is I change this dynamically to
# class_from_baseapp(grandparent, mixin_class): 
# by altering the class' __bases__

class_from_childapp1(class_from_baseapp):
    pass 
```

So again, my question is: Will this monkey patching leak to the other web app (web app 1), if it imports/uses the same class as above? I don't know how process and thread isolation in python interpreters work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:58:10.867

如果您正在运行单独的进程，则进程之间的隔离是完全的。每个 Python 解释器都有自己对类的引用。Monkey-patching in-memory modules 不会影响任何进程，但会影响修补完成的进程。

在同一个 Python 进程中运行的线程都使用相同的类。根据修补的完成方式（以及在修补发生之前线程获得的引用），补丁可能不会被所有线程看到，但通常会。

# angularjs - Infinite template loading using Angular JS

> ID：16017834
> 
> 赞同：0
> 
> 时间：2013-04-15T14:32:30.220
> 
> 标签：angularjs

I am using AngularJS and when I began to use routeprovider, if I reload the page occur a infinite load.

It's funny, because when I try to load the main page the first time, the page starts fine.

Here is my code:

```
var app = angular.module("platwip", []);

app.config(['$routeProvider', function($routeProvider) {
    $routeProvider.
    when('/status', {templateUrl: 'resources/views/html_files/status/status.dust',   controller: TestCtrl}).
    when('/network/wan', {templateUrl: '/resources/viewsAngular/network/wanAngular.html', controller: WanCtrl}).        
    otherwise({redirectTo: '/status'});
 }]);

 app.run(function($templateCache,$http){
    $http.get('resources/viewsAngular/menus/sideMenu.html', {cache:$templateCache});
    $http.get('resources/viewsAngular/menus/topMenu.html', {cache:$templateCache});
 }); 
```

My Html:

```
<!DOCTYPE html>
<html ng-app="platwip">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <link media="screen" type="text/css" rel="stylesheet" href="/resources/css/estilo.css"></link>
    <script src="/resources/js/jquery/jquery-1.8.1.min.js" ></script>
    <script src="/resources/js/jquery/jquery.i18n.min.js" ></script>
    <script src="/src/controller/main/main.ws/messages" ></script>
    <script src="/resources/js/jquery/jquery-ui-1.8.23.custom.min.js" ></script>
    <script src="/resources/js/jquery/jquery.input-ip-address-control-1.0.min.js" ></script>
    <script src="/resources/js/jquery/jquery.date.format.js" ></script>
    <script src="/resources/js/jquery/jquery.address-1.5.min.js" ></script>
    <script src="/resources/js/jquery/jquery.maskedinput-1.3.min.js" ></script>
    <script src="/resources/js/jquery/jquery.validate.min.js" ></script>
    <script src="/resources/js/validator_rules.js" ></script>
    <script src="/resources/js/jquery/jquery.tablesorter.min.js" ></script>
    <script src="/resources/js/angular/angular.min.js" ></script>
    <script src="/resources/js/angular/controllers.js" ></script>
    <script src="/resources/js/angular/partials.js" ></script>
    <script src="/resources/js/angular/filters.js" ></script>
    <script src="/resources/js/dust/dust-full-1.2.0.js" ></script>
    <script src="/resources/js/dust/dust-helpers-1.1.1.js" ></script>
    <script src="/resources/js/main.js" ></script>

</head>
<body>
        <!-- <div id="qunit"></div>
        <div id="qunit-fixture"></div> -->
        <div id="container">
            <div id="cabecalho">
                <div id="barraSuperior"></div>
                <div id="menuSuperior" ng-include src="'resources/viewsAngular/menus/topMenu.html'"/>
                </div>
            </div>
            <noscript >
                {{'Ops!! Seu navegador não está com o JavaScript habilitado. Para utilizar a aplicação você deve habilitar o JavaScript.' | i18n}}
                <style type="text/css">
                #conteudo { display:none; }
                </style>
            </noscript>
            <div id="conteudo">
                <div id="menuLateral" ng-include src="'resources/viewsAngular/menus/sideMenu.html'">
                </div>
                <div class="content">
                    <div id="titulo">
                        <h1></h1>
                    </div>
                    <div id='conteudoWeb' ng-view>

                        <div class='tab'>

                        </div>

                    </div>
                </div>
                <div class="clear"></div>                   
            </div>
        </div>
    </body>
    </html> 
```

Has somebody an idea what is the problem?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:52:40.623

解决了。

我有一个 JS 文件（main.js），它有一个函数，它在我的应用程序中循环加载。在我放置 Angular 之后，选择器变量每次都在变化。

功能是：

```
var browserHistory = function(){
    $.address.init().change(function(event){
        var selector = "[rel='address:" + event.value + "']";
        var link = $(selector);         
        if(link.length > 0)
            loadContent(link);
        else
            $.address.value("/");
    });

}; 
```

坝。

再见！

# wso2 - WSO2 API 管理器 - 访问后端服务以进行 API 密钥验证时出错

> ID：16017838
> 
> 赞同：0
> 
> 时间：2013-04-15T14:32:38.850
> 
> 标签：wso2, wso2-am

我已经设置了我的后端并尝试从休息控制台对其进行 ping 操作，但继续获得上述信息。我已经浏览了几次文档并按照文档重新实现，但仍然遇到同样的问题。有什么我想念的想法吗？

# ruby-on-rails-3 - 如何使用icecast流服务器创建带有ruby on rails的在线广播管理系统？

> ID：16017843
> 
> 赞同：0
> 
> 时间：2013-04-15T14:32:58.603
> 
> 标签：ruby-on-rails-3, icecast, webradio

我正在尝试使用 Ruby on Rails 构建在线无线电管理系统。我正在使用 Icecast 流媒体服务器来传输音频。请建议无线电管理系统的架构或参考任何已经可用的示例。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T16:48:54.987

因此，如果我理解正确，您应该遵循 Airtime 给出的架构示例，甚至使用 airtime 而不是编写新的无线电管理器。文档在这里： http: [//files.sourcefabric.org/manuals/Airtime/en/airtime23forbroadcasters-en-2013.04.19-15.54.00.pdf](http://files.sourcefabric.org/manuals/Airtime/en/airtime23forbroadcasters-en-2013.04.19-15.54.00.pdf) 请参见第 4 页，了解您需要什么以便计划一个好的经理。

# objective-c - UIActivityIndi catorView 里面的 UINavigatorBar | 执行 -layoutSubviews 后仍需要自动布局

> ID：16017844
> 
> 赞同：3
> 
> 时间：2013-04-15T14:33:05.373
> 
> 标签：objective-c, uiactivityindicatorview, uinavigationitem

我想将一个 UIActivityIndi​​catorView（_av 对象）对象添加到 UINavigationItem 的左栏按钮项中

我的代码看起来像：

```
UIBarButtonItem * button = [[UIBarButtonItem alloc] initWithCustomView:_av];
[self.navigationItem setLeftBarButtonItem:button];
[button release]; 
```

但是在我启动代码后，我遇到了一个错误：

```
*** Assertion failure in -[UINavigationBar layoutSublayersOfLayer:],    /SourceCache/UIKit/UIKit-2380.17/UIView.m:5776 
```

2013-04-15 16:28: **39.246 * [12484:907] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“执行 -layoutSubviews 后仍需要自动布局。UINavigationBar 的 -layoutSubviews 实现需要调用 super.'

我应该如何正确实施它？

# c - “格式化”C语言

> ID：16017845
> 
> 赞同：-4
> 
> 时间：2013-04-15T14:33:10.297
> 
> 标签：c

我想知道在 C 语言的`printf`和`scanf`函数中格式化是什么意思。我是 C 编程新手，不明白格式化是什么意思。谁能给我适当的解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:35:42.677

`printf("%s %d", "abc", 123);`

`%s %d`是格式字符串，包含如何处理参数的说明。在这种情况下，它说打印字符串，打印一个空格，然后打印一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:36:14.013

与格式化输出一样，因此您可以“打印”一个名为 myMoney 的 11003.145 的双精度为 11,003.15 美元。

# objective-c - Xcode 静态库错误：-fobjc-link-runtime 中的未知选项字符“f”

> ID：16017847
> 
> 赞同：1
> 
> 时间：2013-04-15T14:33:15.980
> 
> 标签：objective-c, xcode, macos, linker

我尝试构建一个“隐式链接 Objective-C 运行时支持”的静态库，但在链接步骤中构建失败并显示下一条消息： `/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: unknown option character 'f' in: -fobjc-link-runtime`

我不知道为什么会发生这种情况，所以如果你知道请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:22:41.650

该`libtool`命令不接受`-fobjc-link-runtime`参数。这听起来像是错误地潜入了您的 Xcode 项目。我建议如下：

1.  打开 Xcode
2.  选择您的项目和构建设置选项卡
3.  在搜索框中输入，`-fobjc-link-runtime`并且在构建设置中应该至少有一行对应
4.  如果该项目不在与编译器相关的行上，请尝试将其删除并重新构建

如果您没有找到它，那么听起来这些`libtool`参数以某种方式意外地包含了来自编译器的参数。

如果是这种情况，您使用的是哪个版本的 Xcode 以及哪个编译器？

# iphone - iPhone 5 应用程序不应该旋转（仅在应用程序商店）

> ID：16017850
> 
> 赞同：1
> 
> 时间：2013-04-15T14:33:24.210
> 
> 标签：iphone, ios, app-store

我有一个应用程序不应该旋转，除非在一个特定的屏幕上。

问题是它在所有屏幕上旋转，但真正的大问题是它只发生在用户从**应用商店下载应用并在****iPhone 5**上使用它时，所以我真的找不到测试和测试的方法修复错误，因为到目前为止我无法重现它（在开发环境中）。

我相信这不是 iOS 问题，因为具有相同版本的其他设备可以正常使用我通过 XCode 上传到苹果的版本，该错误仅在从应用商店下载并安装在 iPhone 5 上时才会出现。

关于可能发生的事情或如何解决的任何想法？

提前致谢！

# android - 将我的 GPS 位置与列表进行比较 - android

> ID：16017852
> 
> 赞同：0
> 
> 时间：2013-04-15T14:33:27.913
> 
> 标签：android, gps

在我的 android 应用程序中，我试图将用户位置与商店坐标列表进行比较。

我已经知道如何获取用户坐标，并且我已经将列表作为数组。

如何比较两者并找到最近的商店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:38:50.627

```
float shortestDistance = Float.MAX_VALUE;
Location closestLocation = null;
for(Location loc : locations){
    if(yourLocation.distanceTo(loc) < shortestDistance){
        shortestDistance = yourLocation.distanceTo(loc);
        closestLocation = loc;
    }
} 
```

# air - FileStream 安全错误

> ID：16017854
> 
> 赞同：0
> 
> 时间：2013-04-15T14:33:30.417
> 
> 标签：air, flash-builder, filestream, flex4.6, worker

我正在使用 Flex 4.6 在 Adob​​e Air 3.6 中开发多线程应用程序。我在单独的 SWF 文件中创建的 Worker 线程中使用 FileStream 类。当我这样声明变量时：

```
var FS:FileStream = new FileStream(); 
```

它抛出以下错误，没有任何进一步的细节：

```
SecurityError: file 
```

在主线程上使用 FileStream 类可以正常工作。有什么解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T13:53:29.503

```
Set createWorker attribute 'giveAppPrivileges' = true.

_worker = WorkerDomain.current.createWorker(Workers.myWorker,**true**); 
```

# arrays - VBA函数从字符串输入返回数组

> ID：16017856
> 
> 赞同：0
> 
> 时间：2013-04-15T14:33:33.753
> 
> 标签：arrays, string, function, vba, split

我编写了一个函数来进行一些基本的字符串解析，但由于我目前不知道的原因，我的编译器一直在标记我的代码的类型不匹配错误。该函数接受一个字符串，用空格替换一些字符，然后使用拆分将输出转换为数组。然后将该函数设置为输出数组。运行时，函数完成其进程，但编译器随后在调用模块中引发类型不匹配错误。代码如下，提前感谢您的帮助。

```
Sub Tester()

Dim TestArr()
Dim TestVar As String

Application.Calculation = xlCalculationManual
Application.DisplayAlerts = False
Application.ScreenUpdating = False

TestVar = "Text-with/characters I need to\remove"

Debug.Print InputParser(TestVar)

Application.Calculation = xlCalculationAutomatic
Application.DisplayAlerts = True
Application.ScreenUpdating = True

End Sub 
```

'---------------------------------------------------- -------------------------------------------------- --------------------------------

```
Function InputParser(InputStr As String)

Dim OutputArr() As String

If InStr(1, InputStr, "/", vbBinaryCompare) >= 1 Or _
    InStr(1, InputStr, "\", vbBinaryCompare) >= 1 Or _
    InStr(1, InputStr, "-", vbBinaryCompare) >= 1 Or _
    Left(InputStr, 1) = "'" Then.

        InputStr = Replace(InputStr, "/", " ", 1, , vbBinaryCompare)
        InputStr = Replace(InputStr, "\", " ", 1, , vbBinaryCompare)
        InputStr = Replace(InputStr, "-", " ", 1, , vbBinaryCompare)
        InputStr = Replace(InputStr, "'", vbNullString, 1, 1, vbBinaryCompare)
        OutputArr = Split(InputStr, " ", Compare:=vbBinaryCompare)
        Debug.Print Join(OutputArr, vbCrLf)
        Debug.Print TypeName(OutputArr)
End If

InputParser = OutputArr
Debug.Print TypeName(InputParser)

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:39:08.713

问题是当您使用 Debug.Print 尝试查看函数的结果时。

你不能 debug.print 一个数组！

否则，Jonners 提供的调整功能可以正常工作。

如果您需要查看返回数组中的内容，则需要在创建数组后放置一个断点，然后使用 Locals 窗口检查它。

此外，如果没有任何可使用的内容，Split 会烦人地返回 NULL。我创建了 SmartSplit，我使用它来代替 Split。如果没有发生实际拆分，SmartSplit 将返回数组中的原始字符串。这意味着您不需要在使用 Split 后测试数组。

```
'------------------------------------------------------------------------------------------
'Procedure : SmartSplit
'Date : 2 March 2011
'Author : Nick Pullar
'Purpose : Enhances Split by outputting an array of one element if the strDelimiter is not found in strString
'Arguments : strString: The string that needs to be split
' strDelimiter: the string what holds the delimiter
'------------------------------------------------------------------------------------------
Function SmartSplit(ByVal strString As String, ByVal strDelimiter As String) As Variant
'Splits the string by strDelimiter using Split if at least one instance of strDelimiter is found in strString
'Otherwise just returns strString as an array as would be the result if Split had done its work
    Dim varResult As Variant

    If InStr(strString, strDelimiter) = 0 Then
        ReDim varResult(0)
        varResult(0) = strString
    Else
        varResult = Split(strString, strDelimiter)
    End If
    SmartSplit = varResult
End Function 
```

我希望这有帮助。

缺口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:41:41.403

首先，您不需要围绕“替换”进行条件测试 - 如果输入字符串不包含目标字符，`Replace`则不会执行任何操作。

其次，只有在您确实替换了某些东西时才会填充您的输出数组；在字符串不包含任何需要替换的内容的情况下，您的函数将返回一个“空”数组。

调整功能：

```
Function InputParser(InputStr As String)
  Dim OutputArr() As String

  InputStr = Replace(InputStr, "/", " ", 1, , vbBinaryCompare)
  InputStr = Replace(InputStr, "\", " ", 1, , vbBinaryCompare)
  InputStr = Replace(InputStr, "-", " ", 1, , vbBinaryCompare)
  InputStr = Replace(InputStr, "'", vbNullString, 1, 1, vbBinaryCompare)

  OutputArr = Split(InputStr, " ", Compare:=vbBinaryCompare)

  Debug.Print Join(OutputArr, vbCrLf)
  Debug.Print TypeName(OutputArr)

  InputParser = OutputArr
  Debug.Print TypeName(InputParser)
End Function 
```

# c# - 检查列表中是否存在值 - 比循环更好的方法？

> ID：16017860
> 
> 赞同：3
> 
> 时间：2013-04-15T14:33:40.177
> 
> 标签：c#, asp.net, .net

我有以下类数据结构：

```
public class clsUser
{
    public string userid { get; set; }
    public List<OrgPermission> orgs { get; set; }
}

public class OrgPermission
{
    public string Org { get; set; }
    public string SubOrg {get;set;}
    public List<string> type { get; set; }
} 
```

`List<string> type`可以有诸如“admin”、“user”、“superuser”等值。

因此每个用户可以拥有多个 org-suborg 组合，每个组合具有多个用户角色。

用户类中的 orgs 和 suborgs 可以这样写：56%（这意味着他们可以看到以 56 开头的所有内容）

我想检查用户是否有权访问“管理员”类型页面上的 org-suborg 组合

现在我正在用一个循环来做这件事，它的工作原理是这样的：

```
foreach (OrgPermission userOrg in user.orgs) {
  if ((ddlOrg.SelectedValue.StartsWith(userOrg.Org.Trim('%'))) && (ddlSubOrg.SelectedValue.StartsWith(userOrg.SubOrg.Trim('%')))) {
    if (userOrg.type.Contains("Admin"))
      btnSubmitToProd.Enabled = true;
    else
      btnSubmitToProd.Enabled = false;
    break; //break out of the loop if the org-sub org match is found
  }
} 
```

有没有更好的方法来摆脱循环？还是我做对了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:35:58.993

听起来你想要：

```
string orgValue = ddlOrg.SelectedValue;
string subOrgValue = ddlSubOrg.SelectedValue;
btnSubmitToProd = user.orgs
                      .Any(org => orgValue.StartsWith(org.Org.Trim('%')) &&
                                  subOrgValue.StartsWith(org.SubOrg.Trim('%')) &&
                                  org.type.Contains("Admin")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T14:36:28.723

您可以使用[`Enumerable.Any`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)：

```
var userIsAdmin = user.orgs.Any(uo => uo.type.Any(uot => uot == "Admin")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:39:33.833

我不确定是否使用任何 inbuild 方法，但我仍然按照您的方式进行，任何代码最终都将仅使用 foreach 逻辑，没有神奇的方法。即使使用 for 代替 foreach 也会快得多。我仍然会按照你的方式投票，因为它会给你更多的权力。使用 LINQ 之类的任何方法都可以，但 for 循环是最好的方法。

# mysql - mysql join不工作给出错误

> ID：16017861
> 
> 赞同：-4
> 
> 时间：2013-04-15T14:33:40.903
> 
> 标签：mysql, database

值表

```
id  name    attributes_id
1   black   3 [->]
2   red     3 [->]
3   blue    3 [->]
5   tortorise   3 [->]
6   oakley  1 [->]
9   green   3 [->]
10  native  1 [->] 
```

product_values 表

```
values_id   products_id
1 [->]  5 [->]
2 [->]  10 [->] 
```

sql

```
SELECT values.name, product_values.products_id  FROM `product_values`  inner 
join values ON product_values.values_id=values.id; 
```

错误

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'values on 
product_values.values_id=values.id' at line 1 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:36:01.397

`values`您可能应该在表格参考周围加上一些引号。这是一个[保留字](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)

```
SELECT
    `values`.name,
    product_values.products_id 
FROM
    product_values
    INNER JOIN `values` ON product_values.values_id = `values`.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:40:06.367

根据手册，`VALUES`是mysql的保留关键字。请参见此处：[MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。为了避免出现语法错误，关键字或列名应该使用这个称为反引号的符号进行转义。例子，

```
SELECT values.name, product_values.products_id  
FROM   `product_values`  
        inner join `values` ON product_values.values_id = `values`.id; 
```

# c++ - 我的 OpenGL 相机移动问题

> ID：16017871
> 
> 赞同：1
> 
> 时间：2013-04-15T14:33:59.410
> 
> 标签：c++, opengl, camera

我的 OpenGL 相机似乎有问题。当我第一次创建它时，一切正常。然而，自从导入模型和创建对象以来，我注意到发生了一些奇怪的事情。

首先，这是我的运动代码：

```
float xRot = (Pitch / 180 * 3.141592654f),
      yRot = (Yaw / 180 * 3.141592654f);

float sinX = float(sin(xRot)) * myInput.Sensitivity,
      sinY = float(sin(yRot)) * myInput.Sensitivity,
      cosY = float(cos(yRot)) * myInput.Sensitivity;

if(myInput.Keys['W']) //Forwards
{
    curPos.x += sinY;
    curPos.z -= cosY;
    curPos.y += sinX;
}
else if(myInput.Keys['S']) //Backwards
{
    curPos.x -= sinY;
    curPos.z += cosY;
    curPos.y -= sinX;
}

if(myInput.Keys['A']) //Left
{
    curPos.x -= cosY;
    curPos.z -= sinY;
}
else if(myInput.Keys['D']) //Right
{
    curPos.x += cosY;
    curPos.z += sinY;
}

//Move camera up and down
if(myInput.Keys['Q']) 
    curPos.y-= myInput.Sensitivity; //up
else if(myInput.Keys['E']) 
        curPos.y+= myInput.Sensitivity; //down

//Check col
if(curPos.y < 0)
    curPos.y = 0;
else if(curPos.y >= 300) //Gimbal lock encountered
    curPos.y = 299; 
```

其次，这是我计算 gluLookAt 的动作：

```
double cosR, cosP, cosY;    //temp values for sin/cos from 
double sinR, sinP, sinY;    //the inputed roll/pitch/yaw

cosY = cosf(Yaw*3.1415/180);
cosP = cosf(Pitch*3.1415/180);
cosR = cosf(Roll*3.1415/180);
sinY = sinf(Yaw*3.1415/180);
sinP = sinf(Pitch*3.1415/180);
sinR = sinf(Roll*3.1415/180);

//forward position
forwardPos.x = sinY * cosP*360;
forwardPos.y = sinP * 360;
forwardPos.z = cosP * -cosY*360;

//up position
upPos.x = -cosY * sinR - sinY * sinP * cosR;
upPos.y = cosP * cosR;
upPos.z = -sinY * sinR - sinP * cosR * -cosY; 
```

基本上我注意到，如果相机在 Y 轴上超过 300，则视图开始旋转，如果我在 x/z 轴上移动太远，也会发生同样的事情。

谁能看到我的代码有什么问题？当我应该在 rad 工作时，我在 deg 工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:55:01.497

我没有检查您的代码，但是在使用欧拉角进行 3D 旋转时，这类问题是臭名昭著的。

它被称为[万向节锁](http://en.wikipedia.org/wiki/Gimbal_lock)（我看到你的代码中有一条注释表明你知道它），克服它的最简单的解决方案是切换到使用[四元数](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)来计算你的旋转矩阵。

[此处](http://content.gpwiki.org/index.php/OpenGL%3aTutorials%3aUsing_Quaternions_to_represent_rotation)的 Wiki 上有一篇非常好的 OpenGL 文章。

# arduino - 为什么 Arduino 程序称为草图？

> ID：16017875
> 
> 赞同：7
> 
> 时间：2013-04-15T14:34:08.307
> 
> 标签：arduino, terminology

我最近开始了 Arduino 开发，在向朋友和同事解释时，我收到的一个我没有答案但也想知道的问题是为什么微控制器运行的程序称为草图? 这是从电气工程继承下来的惯例吗？我不熟悉这个特定术语的历史。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T14:44:57.870

Arduino 编程语言基于 Processing，它是针对视觉艺术家的。因此，开发版本是“草图”。

“Processing 是一种编程语言、开发环境和在线社区，自 2001 年以来一直在促进视觉艺术中的软件素养。最初创建的目的是作为软件速写本并在视觉环境中教授计算机编程的基础知识，Processing 迅速发展成为也是用于创作完成的专业作品的工具。”

*   [processing.org/about](http://www.processing.org/about/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:41:46.590

这是个好问题。您最好使用 Google `'Processing'`，因为这是 Arduino 借用用于构建程序的语言和 IDE。我猜这个名字是随意的，尽管它与 Arduino 程序被“草绘”出来然后改进的方式有关。

# java - Spring MVC 资源（.js、.css、.png）在浏览器中完全加载之前被“中止”

> ID：16017877
> 
> 赞同：0
> 
> 时间：2013-04-15T14:34:13.630
> 
> 标签：java, spring, sitemesh

我有一个基于 Spring、Sitemesh、JPA 和 Shiro 编写的 Web 应用程序。这实际上是我第一次使用大多数这些框架，因为我已经使用 Struts/ibatis 很长时间了。

我遇到的问题很奇怪，我已经做了几天的研究和反复试验，但一无所获。在资源加载中止的浏览器中，我在页面刷新时遇到间歇性问题。他们似乎有时会部分加载，而其他时候则完全丢失。

服务器设置是tomcat/apache。

我查看了服务器端，没有看到任何错误。

这是来自我的 web.xml 和我的 base-servlet.xml 的代码

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<display-name>myapp</display-name>
<description>myapp</description>

<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher> 
    <dispatcher>FORWARD</dispatcher> 
    <dispatcher>INCLUDE</dispatcher> 
    <dispatcher>ERROR</dispatcher>
</filter-mapping>

<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>org.sitemesh.config.ConfigurableSiteMeshFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping>

<!--  the name of this servlet maps to  [servlet-name]-servlet.xml that will also be found in WEB-INF -->   
<servlet>
    <servlet-name>base</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>base</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

根据

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!--  indicates the package(s) to be scanned to discover annotated controllers -->
<context:component-scan base-package="com.execupros.rox.webapp.controllers" />

<!-- the mvc resources tag does the magic to skip static  -->
<mvc:resources mapping="/resources/**" location="/resources/" />

<!--  maps the JSP locations -->
 <bean id="viewResolver"
       class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
       <property name="prefix">
          <value>/WEB-INF/html/</value>
       </property>
       <property name="suffix">
          <value>.jsp</value>
       </property>
 </bean>

 <!--  wires up commons upload -->
 <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />

 <!--  define interceptors to be applied to all annotated controllers. -->
 <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" >
 </bean>
 <bean id="annotationMapper" class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="interceptors">
        <list>
            <!-- <ref bean="authInterceptor"/> -->
            <ref bean="userContextInterceptor" />
        </list>
    </property>
</bean>

<!--  <bean id="authInterceptor" class="com.execupros.rox.webapp.interceptors.AuthenticationInterceptor" /> -->
<bean id="userContextInterceptor" class="com.execupros.rox.webapp.interceptors.UserContextInterceptor" /> 
```

作为一个例子，我在默认装饰器上引入了这样的资源。

```
<script src="<c:url value="/resources/js/functions.js" />" type="text/javascript"></script> 
```

这似乎只在您刷新页面时发生，并且它决定加载或不加载的内容对于 /resources 下的任何内容都是零星的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T22:43:45.077

The only answer I could find was to move the resources outside of the application, that was the only way we could get them to load correctly 100% of the time, in other words, we took the resources and created a filter in apache to pull in those resources to be served through apache as opposed to serving them from tomcat.

```
 RewriteCond $1 ^/(?!javascript|uploads|styles|images|test?).*$ [NC] 
```

# emacs - 底线后不同的颜色

> ID：16017879
> 
> 赞同：1
> 
> 时间：2013-04-15T14:34:18.583
> 
> 标签：emacs, color-scheme

我是一名 vim 用户，试图在 Emacs 中获得宾至如归的感觉。我真的很喜欢 vim 底部空行的不同颜色，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/oQvOg.png)

我试着弄乱`set-face-background`Emacs 的，但我没有找到一个等效的选项。

如何在 Emacs 中实现这种自定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:46:28.687

您可以使用`whitespace-mode`突出显示各种不可见的字符和边界。另请参阅 Emacs 信息中的“边缘”和“显示边界”。

# java - 从java返回一个float数组到jni

> ID：16017883
> 
> 赞同：1
> 
> 时间：2013-04-15T14:34:33.763
> 
> 标签：java, android, java-native-interface

我从 jni 调用一个 java 方法。这个方法返回一个 float[]

```
 jclass javaClass = env->GetObjectClass(activityObj);
   jmethodID method = env->GetMethodID(javaClass,"findparam", "([FF)F");
   jfloatArray rotateArray = env->CallFloatMethod(activityObj, method, s1, s2); 
```

但是当我尝试编译它时，我有：

```
 error: cannot convert 'jfloat' to '_jfloatArray*' in initialization 
```

我怎样才能得到 returnet 浮点数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T11:48:46.923

只需尝试使用`jfloatArray imageArray = (jfloatArray) env->CallObjectMethod(Object,method);` 它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:22:32.693

所有数组类型（甚至原始类型）都作为 a 返回，`jobject`然后您应该将其转换为适当的`j<type>Array`类型。

所以你的最后一行应该是：

```
jfloatArray rotateArray = (jfloatArray)env->CallObjectMethod(activityObj, method, s1, s2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:38:26.297

`CallFloatMethod()`用于调用返回的方法`float`。您正在调用一个返回的方法`float[]`。你应该打电话`CallObjectMethod()`。

# ruby-on-rails - Ruby/Rails Net::HTTP.post_form 嵌套散列项 html 已转义

> ID：16017884
> 
> 赞同：4
> 
> 时间：2013-04-15T14:34:34.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

示例我在 rails 控制台中执行此操作：

```
params = {"type"=>["raka"], "fields"=>["exhb_0", "exh0_1", "t_g_a", "hp_1", "s1", "overflade_0", "t2", "t3", "t4"], "railing"=>["A-3"], "wood"=>["wood_6"], "railing_m"=>"0", "order"=>{"sving"=>"right", "size"=>{"ground"=>"123", "floor"=>"6", "a"=>"6", "d"=>"6"}, "comments"=>{"step_2"=>"", "step_3"=>"", "step_4"=>""}, "railing"=>{"1"=>"1", "2"=>"1"}, "railing_m"=>{"1"=>"", "2"=>"", "3"=>"", "4"=>"12"}, "hul"=>{"l"=>"123", "b"=>"123"}, "name"=>"qwed", "email"=>"mail@example.com", "phone"=>"13123", "street"=>"iuuj", "city"=>"ui", "postnr"=>"213"}}

x = Net::HTTP.post_form(URI.parse('http://localhost:3000/download.pdf'), params) 
```

在我的 Rails 控制台中，我可以看到 HTTP 发布请求：

```
Started POST "/download.pdf" for 127.0.0.1 at 2013-04-15 16:25:36 +0200
Processing by PublicController#show_pdf as */*
  Parameters: {"type"=>"raka", "fields"=>"t4", "railing"=>"A-3", "wood"=>"wood_6
", "railing_m"=>"0", "order"=>"{\"sving\"=>\"right\", \"size\"=>{\"ground\"=>\"1
23\", \"floor\"=>\"6\", \"a\"=>\"6\", \"d\"=>\"6\"}, \"comments\"=>{\"step_2\"=>
\"\", \"step_3\"=>\"\", \"step_4\"=>\"\"}, \"railing\"=>{\"1\"=>\"1\", \"2\"=>\"
1\"}, \"railing_m\"=>{\"1\"=>\"\", \"2\"=>\"\", \"3\"=>\"\", \"4\"=>\"12\"}, \"h
ul\"=>{\"l\"=>\"123\", \"b\"=>\"123\"}, \"name\"=>\"qwed\", \"email\"=>\"mail@example.com\", \"phone\"=>\"13123\", \"street\"=>\"iuuj\", \"city\"=>\"ui\", \"postn
r\"=>\"213\"}"} 
```

问题是所有嵌套的 http 参数都是 HTML 转义的。我该如何摆脱它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-23T12:07:45.127

该`.post_form`方法接受字符串，因此在传递嵌套哈希时会导致此转义问题。我遇到了同样的问题并切换到该`.post`方法并解决了它。

```
require "net/http"
uri = URI('http://www.yoururl.com')
http = Net::HTTP.new(uri.host)
response = http.post(uri.path, params.to_query) 
```

还要注意`.to_query`将散列转换为字符串的方法的使用。[看这里](https://stackoverflow.com/questions/3504300/post-nested-params-hash-using-httpclient/5182785#comment40669680_5182785)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:51:55.557

在 Rails 世界中，`params`它不是 Ruby 开箱即用的常规 Hash 对象。事实上，它[`HashWithIndifferentAccess`](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html)是由 Rails 提供的，它允许以符号或字符串的形式访问键。

```
irb(main):001:0>params = {"type"=>["raka"], "fields"=>["exhb_0", "exh0_1", "t_g_a", "hp_1", "s1", "overflade_0", "t2", "t3", "t4"], "railing"=>["A-3"], "wood"=>["wood_6"], "railing_m"=>"0", "order"=>{"sving"=>"right", "size"=>{"ground"=>"123", "floor"=>"6", "a"=>"6", "d"=>"6"}, "comments"=>{"step_2"=>"", "step_3"=>"", "step_4"=>""}, "railing"=>{"1"=>"1", "2"=>"1"}, "railing_m"=>{"1"=>"", "2"=>"", "3"=>"", "4"=>"12"}, "hul"=>{"l"=>"123", "b"=>"123"}, "name"=>"qwed", "email"=>"mail@example.com", "phone"=>"13123", "street"=>"iuuj", "city"=>"ui", "postnr"=>"213"}}
irb(main):002:0>params.class
=> Hash
irb(main):003:0>params[:fields]
=> nil
irb(main):004:0>params = params.with_indifferent_access
irb(main):005:0>params.class
=> ActiveSupport::HashWithIndifferentAccess
irb(main):006:0>params[:fields]
=> ["exhb_0", "exh0_1", "t_g_a", "hp_1", "s1", "overflade_0", "t2", "t3", "t4"] 
```

# python - 有没有可以解析文件系统结构的python库？

> ID：16017886
> 
> 赞同：4
> 
> 时间：2013-04-15T14:34:44.460
> 
> 标签：python, filesystems

我正在检查可以在文件系统上工作的可用 python 库。我知道 pyfilesystem，但我正在寻找如下内容：

a) 可以理解磁盘上的分区表， b) 可以读取超级块等数据结构并理解分区上 FS 的类型。c) 可以将 FS 详细信息转储到屏幕/文件等上。 d) 可以解析不同的 FS 数据结构。

所以，简而言之，我不是在寻找一个可以处理文件的库，而是一个可以处理底层文件系统结构的库。我一直在寻找，但没有找到任何东西。

有谁知道具有类似功能的工具？

先感谢您..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:56:47.327

[pyparted](https://fedorahosted.org/pyparted/)可以做一些你要求的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T20:30:06.983

查看 MBR 解析器： [https ://raw.githubusercontent.com/gleeda/misc-scripts/master/misc_python/mbr_parser.py](https://raw.githubusercontent.com/gleeda/misc-scripts/master/misc_python/mbr_parser.py)

此外，这里有一些不错的 FAT 解析器：

[https://github.com/mk-fg/fgtk/blob/master/desktop/vfat_shuffler](https://github.com/mk-fg/fgtk/blob/master/desktop/vfat_shuffler)

[https://github.com/construct/construct/blob/master/construct/formats/filesystem/fat16.py](https://github.com/construct/construct/blob/master/construct/formats/filesystem/fat16.py)

# asp.net - ASP.NET ListItem 文本样式

> ID：16017887
> 
> 赞同：0
> 
> 时间：2013-04-15T14:34:46.610
> 
> 标签：asp.net

我有以下 -

```
 <asp:RadioButtonList ID="RadioButtonList1" runat="server" RepeatDirection="Vertical" RepeatLayout="Table" CssClass="RBL" TextAlign="Right">

      <asp:ListItem Text= "Individual - This is for user" />

      <asp:ListItem Text="Enterprise - This is for enterprises" />

    </asp:RadioButtonList> 
```

我喜欢做的是强调*Personal*和*Enterprise*。

我尝试了类似以下的方法，但没有奏效：

```
 <asp:ListItem Text= <span class="underline"> Individual </span>-.... 
```

正如我得到的：

```
 Error   71  The 'Text' property of 'asp:ListItem' does not allow child objects. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:51:52.673

你想要单引号 - '。

![在此处输入图像描述](https://i.stack.imgur.com/oWK63.png)

```
<style type="text/css">
    .underline { text-decoration: underline; }
</style>

<asp:RadioButtonList ID="RadioButtonList1" runat="server" 
   RepeatDirection="Vertical" RepeatLayout="Table" CssClass="RBL" TextAlign="Right">
    <asp:ListItem Text="<span class='underline'>Individual</span> - This is for user" />
    <asp:ListItem Text="<span class='underline'>Enterprise</span> - This is for enterprises" />
</asp:RadioButtonList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:50:07.230

您可以在 Text 属性之外添加文本：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server" RepeatDirection="Vertical" RepeatLayout="Table" CssClass="RBL" TextAlign="Right">
  <asp:ListItem> <span class="underline">Individual</span> - This is for user </asp:ListItem>
  <asp:ListItem> <span class="underline">Enterprise</span> - This is for enterprises </asp:ListItem>    
</asp:RadioButtonList> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:47:11.497

您可以在 ListItems 的 Text 值中使用 HTML：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server" RepeatDirection="Vertical" RepeatLayout="Table" CssClass="RBL" TextAlign="Right">

  <asp:ListItem Text= "<u>Individual</u> - This is for user" />

  <asp:ListItem Text= "<u>Enterprise</u> - This is for enterprises" />

</asp:RadioButtonList> 
```

# css - 为什么我的 div 重叠？

> ID：16017893
> 
> 赞同：19
> 
> 时间：2013-04-15T14:35:01.357
> 
> 标签：css, html

我正在尝试在包含左右两个子 div 的列表元素内创建一个父 div。左边将包含一个图像，右边将包含两个额外的 div，其中包含一些文本和一个时间戳。

我无法在不重叠的情况下显示左右 div。

我的 HTML 看起来像这样：

```
<ul class="activity-comments">
<li>
<div style="border: solid 1px #ff0000;">
  <div style="float:left;border: solid 1px #0000ff;">
      <img src="http://localhost/new/img/sampleimg.png" class="thumb-small">
  </div>
  <div>
    <small>Some sample text here 1</small>
  </div>
  <div>
    <small>Posted 1 day ago</small>
  </div>
</div>
</li>
<li>
<div style="border: solid 1px #ff0000;">
  <div style="float:left;border: solid 1px #0000ff;">
      <img src="http://localhost/new/img/sampleimg.png" class="thumb-small">
  </div>
  <div>
    <small>Some sample text here 2</small>
  </div>
  <div>
    <small>Posted 2 days ago</small>
  </div>
</div>
</li>
</ul> 
```

看看这个[**jsfiddle**](http://jsfiddle.net/thetoolsmith/57PQm/)

我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-15T14:42:09.903

它们是重叠的，因为您正在浮动一个 div，但没有清除浮动。

使用 clearfix 方法清除浮动。将一个类添加`container`到您的容器 div 并使用此 CSS：

[http://jsfiddle.net/57PQm/7/](http://jsfiddle.net/57PQm/7/)

```
.container {
    border: solid 1px #ff0000;
    zoom: 1; /* IE6&7 */
}

.container:before,
.container:after {
    content: "";
    display: table;
}

.container:after {
    clear: both;
} 
```

您还会注意到我已经删除了您的内联 CSS。这使您的代码更易于维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:42:23.707

您的缩略图将图片设置为 41 像素的特定高度。要么改变图片大小，要么改变div大小，要么设置外层div的溢出。

# environment-variables - 为 CHROME_BIN 设置环境变量不起作用

> ID：16017896
> 
> 赞同：28
> 
> 时间：2013-04-15T14:35:11.497
> 
> 标签：environment-variables, karma-runner

我正在尝试使用 Karma 来测试我的 js 脚本。在文档中它说我应该设置环境变量`CHROME_BIN`：

我已将其设置为

> %programfiles(x86)%"\Google\Chrome\Application\Chrome.exe

但是当我输入`%CHROME_BIN%`DOS 时，它会失败，因为它被截断`C:\Program`为`Program Files`.

我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-06-21T12:49:23.703

面临同样的问题，我通过编辑**config**目录下的**karma.conf.js**和**karma-e2e.conf.js**文件解决了这个问题。

 **改变：

```
browsers = ['Chrome']; 
```

**至**

```
browsers = ['Your_System_Path_where_chrome_installed/chrome.exe']; 
```

就我而言，它是>`C:/Program Files (x86)/Google/Chrome/Application/chrome.exe`

然后添加`C:\Program Files (x86)\Google\Chrome\Application\chrome.exe`环境变量的路径

* * *

**或在 cmd**

```
SET CHROME_BIN = "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" 
```

* * *

**附加**：其他浏览器的设置可以在[这里](https://github.com/karma-runner/karma/blob/master/docs/config/03-browsers.md)看到。

关于为什么 chrome one 不起作用，我猜他们（Karma）已经从一些早期版本的 chrome 配置了他们的 chrome 路径。

* * *

**更新：**对于[AngularJS 教程](http://docs.angularjs.org/tutorial)追随者：

*   在某些教程步骤上运行业力测试运行程序并解决此问题时，您仍然可能会遇到问题（*正如我所面临的）：只需在两个“* **...conf.js** ”文件中添加这些“Angular Scenario Dependencies”，如下所示：

> ```
> files = [
>   ANGULAR_SCENARIO,
>   ANGULAR_SCENARIO_ADAPTER,
>     ....
>     ....  // keep rest of the lines as it is
>     ....
> ]; 
> ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-25T19:42:42.490

在 Powershell 中，您可以运行以下命令：

```
$Env:CHROME_BIN = "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" 
```

您需要用本地路径替换双引号内的内容。

或者在 cmd.exe

```
SET CHROME_BIN = "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" 
```

这就是你需要做的一切。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-26T07:12:06.350

我通过`CHROME_BIN`在我的环境属性中设置如下解决了同样的问题：

```
c:/Program Files (x86)/Google/Chrome/Application/chrome.exe 
```

属性值周围不能有双引号 (")，所有反斜杠符号 (\) 必须替换为斜杠符号 (/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-18T12:57:47.210

对于 ubuntu 14.04 中的 Chromium 编辑 test/karma.conf.js 并更改

```
browsers = ['Chrome']; 
```

为了

```
browsers = ['chromium-browser']; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-21T13:23:39.057

我通过从管理员命令提示符运行解决了这个问题。无需设置 CHROME_BIN，它会自动指向您的默认安装。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-02T02:13:16.357

我发现安装 Canary 并更改`browsers = ['Chrome'];`为`browsers = ['ChromeCanary'];`更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T14:41:42.067

使用`set`（参见[http://ss64.com/nt/set.html](http://ss64.com/nt/set.html)）并在整个字符串周围放置引号

"%programfiles(x86)%\Google\Chrome\Application\Chrome.exe"

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-17T16:28:53.283

（在 Linux 中）我认为它与 CHROME_BIN 有关，但最终对我来说它与该变量无关，我将其删除。我不得不在 github 上查找 karma-chrome-launcher npm 插件，并按照说明为我的 karma 配置添加不安全性。**

# asp.net-mvc-3 - MVC 3 处理图像

> ID：16017897
> 
> 赞同：-2
> 
> 时间：2013-04-15T14:35:11.807
> 
> 标签：asp.net-mvc-3

我正在尝试将图像保存在本地并将它们检索到我的视图中。我的问题是我对 MVC 真的很陌生，而且我尝试过的所有方法似乎都不起作用。如果有网站、示例或代码片段可以处理本地存储的图像，请随时传递知识。 ..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:39:18.897

从`HttpContext.Server.MapPath("/")`您的 Controller 开始，获取您当前正在使用的文件夹。观察它给您的位置，如果您想维护任何类型的组织，请相应地进行调整。

# java - 在 Windows 上设置健全的网络扫描仪守护进程

> ID：16017898
> 
> 赞同：1
> 
> 时间：2013-04-15T14:35:11.843
> 
> 标签：java

我已经在 ubuntu 上成功设置了扫描仪守护程序，并使用 jfreesane 从 HP 网络扫描仪扫描文档。自过去两周以来，我一直在尝试在 Windows 上设置 sane 扫描仪守护程序。我的问题是，

1.是否可以通过互联网在 ubuntu 上使用扫描仪守护程序并在我的本地网络中使用扫描仪在互联网上使用此守护程序？

2.否则，您能解释一下如何在 Windows 上设置 sane daemon 吗？我已经在 Windows 上安装了 mingw 并为健全的后端下载了源代码，但由于错误而无法编译它我得到了以下错误。

abaton.c:62:22：致命错误：sys/wait.h：没有此类文件或目录编译终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:00:04.057

使用 Cygwin 环境可能比使用 Mingw 更成功。

有人设法用 Mingw 构建了 Saned，但 2009 年只有一台扫描仪，我不确定补丁（如果有的话）是否移回上游项目。

# watir-webdriver - 无法显示“onclick”属性

> ID：16017899
> 
> 赞同：1
> 
> 时间：2013-04-15T14:35:12.727
> 
> 标签：watir-webdriver

我有如下所示的 HTML：

```
<html>
    <head></head>
    <body>
        <a class="xyxyxy" href="" onclick="window.open('https://iogossip.com/Disclosure.pdf', '_blank')">DISCLOSURE</a>
    </body>
</html> 
```

我需要将“ [https://iogossip.com/Disclour.pdf](https://iogossip.com/Disclour.pdf) ”放到屏幕上。或将“window.open(' [https://iogossip.com/Disclosure.pdf](https://iogossip.com/Disclosure.pdf) ', '_blank')”之类的整个内容放到屏幕上。当我这样做时：

```
puts browser.a.onclick 
```

我收到此错误：

```
NoMethodError: undefined method `onclick' for #<Watir::Anchor:0x29fc448>
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.2/lib/watir
-webdriver/elements/element.rb:553:in `method_missing'
        from (irb):6
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:32:58.173

您可以使用以下方法获取属性值`Element#attribute_value`（watir 2.0.3 应该支持该方法）：

```
puts browser.a.attribute_value('onclick')
#=> "window.open('https://iogossip.com/Disclosure.pdf', '_blank')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:39:30.590

你的代码对我来说很好。

试试：href="#"

# vba - 获取我的演示文稿中有多少动画

> ID：16017908
> 
> 赞同：1
> 
> 时间：2013-04-15T14:35:27.353
> 
> 标签：vba, animation, powerpoint

我想创建一个按钮，用于计算演示文稿中每个切片有多少动画/效果。我想限制动画，所以我需要知道每个动画有多少。可以用VBA制作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:20:48.487

我找到了这个问题的解决方案：

```
 For Each slid In ActivePresentation.Slides
      If slid.TimeLine.MainSequence.Count >= 1 Then
        MsgBox "Number of animations per slide: " + Str(slid.TimeLine.MainSequence.Count)
    End If
  Next 
```

有了这个，您可以计算我们的演示文稿中有多少动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T21:20:51.690

更简单地说，要获得幻灯片放映中所有动画中的一个，请使用

```
Dim count As Integer
count = 0
For Each slid In ActivePresentation.Slides
    If slid.TimeLine.MainSequence.count >= 1 Then
        count = count + slid.TimeLine.MainSequence.count
    End If
Next
MsgBox Str(count) + " number of animations" 
```

# metadata - 如何从 llvm 元数据中提取信息

> ID：16017910
> 
> 赞同：3
> 
> 时间：2013-04-15T14:35:33.767
> 
> 标签：metadata, llvm, instructions

我有以下代码：

```
 int main(int argc, char *argv[])
    {
        int a = 2;
        int b = 5;
        int soma = a + b;
   //...} 
```

得到的 llvm 位码是：

```
 define i32 @main(i32 %argc, i8** %argv) #0 {
        entry:
          ...
          %a = alloca i32, align 4
          %b = alloca i32, align 4
          %soma = alloca i32, align 4
          ...
          call void @llvm.dbg.declare(metadata !{i32* %a}, metadata !15), !dbg !16
          store i32 2, i32* %a, align 4, !dbg !16
          call void @llvm.dbg.declare(metadata !{i32* %b}, metadata !17), !dbg !18
          store i32 5, i32* %b, align 4, !dbg !18
          call void @llvm.dbg.declare(metadata !{i32* %soma}, metadata !19), !dbg !20
          %0 = load i32* %a, align 4, !dbg !20
          %1 = load i32* %b, align 4, !dbg !20
          %add = add nsw i32 %0, %1, !dbg !20
          store i32 %add, i32* %soma, align 4, !dbg !20
          ...       
          !1 = metadata !{i32 0}
          !2 = metadata !{metadata !3}
          ...
          !15 = metadata !{i32 786688, metadata !3, metadata !"a", metadata !4, i32 6, metadata !7, i32 0, i32 0} ; [ DW_TAG_auto_variable ] [a] [line 6]
!16 = metadata !{i32 6, i32 0, metadata !3, null}
!17 = metadata !{i32 786688, metadata !3, metadata !"b", metadata !4, i32 7, metadata !7, i32 0, i32 0} ; [ DW_TAG_auto_variable ] [b] [line 7]
!18 = metadata !{i32 7, i32 0, metadata !3, null}
!19 = metadata !{i32 786688, metadata !3, metadata !"soma", metadata !4, i32 8, metadata !7, i32 0, i32 0} ; [ DW_TAG_auto_variable ] [soma] [line 8]
!20 = metadata !{i32 8, i32 0, metadata !3, null} 
```

从位码我需要得到以下文本：

```
a = 2
b = 5
soma = a + b 
```

我的疑问是如何从元数据（dgb）中提取我需要的信息？现在我只有指令`I-> getName ()`的名称和操作数的名称，`valueOp Value * = I-> getOperand (i); valueOp-> getName (). Str ();` 元数据非常广泛。如何从元数据中获取此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:37:33.117

依靠`I->getName()`查找变量名不是一个好主意——你有调试信息。找出所有 C/C++ 局部变量名称的正确方法是遍历 IR 并查找对 的所有调用`@llvm.dbg.declare`，然后转到它们的第二个操作数（调试元数据），并从那里检索变量名称。

使用[源代码级调试指南](http://llvm.org/docs/SourceLevelDebugging.html)了解调试元数据的布局方式。特别是，[对于局部变量，第三个参数将是元数据字符串，其中包含 C/C++ 源代码中的变量名称](http://llvm.org/docs/SourceLevelDebugging.html#local-variables)。

所以剩下的事情就是找出变量被初始化为什么。为此，请按照第一个参数来`@llvm.dbg.declare`获取实际使用的 LLVM 值，然后将第一`store`条指令定位到其中，并检查那里使用了哪些数据。

如果它是一个常数，那么您现在拥有输出`a = 5`样式信息所需的一切。如果它是另一条指令，您必须自己遵循并“解码”它 - 例如，如果它是“添加”，那么您需要打印它的两个操作数，中间有一个“+”等。当然还有打印必须是递归的……不简单。但它会为您提供准确的初始化值。

如果您正在寻找更粗略的东西并且您可以访问原始源，您只需获取声明变量的行号（调试元数据中的第 5 个操作数，假设标签（第一个操作数）是确实`DW_TAG_auto_variable`而不是`DW_TAG_arg_variable`，它表示一个参数）。然后从原始来源打印出该行。但这不会打印所有相关信息（如果初始化值是由多行构造的）并且可以打印不相关的信息（例如，如果该行中有多个语句）。

最后，请记住优化会严重影响调试信息。如果获取这些打印输出很重要，请谨慎`-O`选择，也许坚持使用`-O0`.

# android - 自定义对话框上的黑带

> ID：16017911
> 
> 赞同：0
> 
> 时间：2013-04-15T14:35:34.493
> 
> 标签：android, android-alertdialog

我正在使用不同的 UI 自定义警报对话框。这是一个例子。

![在此处输入图像描述](https://i.stack.imgur.com/Tq1Sa.png)

如您所见，我想删除两条黑色带（用红色矩形突出显示）。

这很奇怪，因为主布局显示与父布局匹配，正如您从下面的 xml 中看到的那样。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/lytDialog_takeNowDialog"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_marginLeft="@dimen/default_side_space"
android:layout_marginRight="@dimen/default_side_space"
android:background="@color/yellow"
android:orientation="vertical" >

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top|center_horizontal"
    android:gravity="center"
    android:padding="@dimen/default_side_space"
    android:text="Are you sure?"
    android:textColor="@color/dialog_text_color"
    android:textSize="@dimen/dialog_text_size" />

<LinearLayout
    android:id="@+id/lytShowAlert_takeNowDialog"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/black_gradient"
    android:orientation="horizontal"
    android:padding="@dimen/default_side_space" android:visibility="gone">

    <CheckBox
        android:id="@+id/chkShowAlert_takeNowDialog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="@string/dont_show_alert"
        android:textColor="@android:color/white"
        android:textSize="@dimen/dialog_yes_no_size" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="1" >

    <Button
        android:id="@+id/no_dialog"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_margin="@dimen/space_among_buttons"
        android:layout_weight=".5"
        android:background="@drawable/yellow_gradient"
        android:padding="@dimen/default_side_space"
        android:text="No"
        android:textColor="@color/dialog_text_color"
        android:textSize="@dimen/dialog_yes_no_size" />

    <Button
        android:id="@+id/yes_dialog"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_margin="@dimen/space_among_buttons"
        android:layout_weight=".5"
        android:background="@drawable/yellow_gradient"
        android:padding="@dimen/default_side_space"
        android:text="Yes"
        android:textColor="@color/dialog_text_color"
        android:textSize="@dimen/dialog_yes_no_size" />
</LinearLayout> 
```

请问有人知道删除它们的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:10:29.390

如果要删除黑色面板，请更改 appTheme（实际上是对话框主题。）。

[Android中具有透明背景的对话框](https://stackoverflow.com/questions/10795078/dialog-with-transparent-background-in-android)

# facebook - 我们 facebook 页面上的任何已发布链接仅重定向到主域

> ID：16017917
> 
> 赞同：0
> 
> 时间：2013-04-15T14:35:45.920
> 
> 标签：facebook

我们在 facebook 上遇到了一个奇怪的行为，并且被困住了可能是什么原因。

当我们在我们的 facebook 页面上分享一个链接到我们网站上的文章的链接时，当有人第一次点击它时，facebook 会将其重定向到主域而不是文章。

第二次单击相同的链接行为正确并将其重定向到给定的文章。我可以看到每次点击链接时 facebook 都会进行一些跟踪，但我不明白为什么它会导致链接第一次失败。

**示例：** [https ://www.facebook.com/WatchFit](https://www.facebook.com/WatchFit)

第一个标题为时间轴的故事： **20 分钟奇迹锻炼**，包括文章链接： [http ://www.watchfit.com/article/Watchfit-Weekly-Workout-Challenge/142](http://www.watchfit.com/article/Watchfit-Weekly-Workout-Challenge/142)

第一次单击它时，它会转到[http://www.watchfit.com](http://www.watchfit.com)而不是给定的文章。第二次点击转到给定的文章。

这是 Facebook 开发人员设置中的错误设置吗？或者请问是什么原因造成的？

# jsf - h:selectOneRadio 在一行中呈现所有选择项，如何在新行中呈现每个项？

> ID：16017919
> 
> 赞同：3
> 
> 时间：2013-04-15T14:35:49.713
> 
> 标签：jsf, line-breaks, selectoneradio

我有一个`selectOneRadio`标签，所有单选按钮选项都显示在一行上。我怎样才能让它每行/行一个选项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T15:32:56.253

要了解标签的行为及其所有可用属性，一个很好的起点是[标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)。[`<h:selectOneRadio>`这是标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/selectOneRadio.html)中的摘录相关性：

> [...]
> 
> ### 编码行为
> 
> 渲染一个“表格”元素。如果指定了“styleClass”，则将“styleClass”属性的值渲染为“table”元素上的“class”属性的值。如果指定了“style”、“border”属性，则将它们传递并分别将它们的值呈现为“table”上的“style”和“border”属性。**如果指定了“layout”属性，并且其值为“pageDirection”，则在表格中垂直渲染子元素，否则水平渲染**. 如果任何子项是 SelectItemGroup 的实例，则将它们呈现为嵌套表。每个孩子最终呈现如下。为每个子组件渲染一个“type”“radio”的“input”元素。使用组件的 clientId 的值渲染“input”元素上的“name”属性。在“input”元素上呈现“id”属性。每个“id”值必须是唯一的。如果当前 SelectItem.isDisabled() 返回 true，则将“disabled”渲染为“disabled”属性的值。
> 
> [...]

注意重点。这就是你的答案。

```
<h:selectOneRadio ... layout="pageDirection"> 
```

# ios - 如何使用 Yahoo Weather API 和 iPad 的纬度和经度获取当前天气状况？

> ID：16017921
> 
> 赞同：2
> 
> 时间：2013-04-15T14:35:56.797
> 
> 标签：ios, ipad, api, yahoo, weather

google 和 stackoverflow 搜索了很多次，但似乎找不到答案。我需要使用 yahoo api 获取我所在位置的当前天气。请不要建议其他 api，因为这是用于工作的，我不能使用其他任何东西。我得到了设备的经纬度，但我似乎找不到请求的正确 URL。任何帮助将不胜感激。另外，如果提供代码，请在objective-c/iOS中这样做。我查看了 api 的文档，但没有看到我需要的东西。我需要获取 woeid 以便我可以请求天气状况。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:00:08.157

在网上搜索我发现这个网址：

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20geo.placefinder%20where%20text%3D%2237.416275%2C-122.025092%22%20and%20gflags%3D%22R%22 
```

给你一个 JSON 与你正在寻找的信息

![在此处输入图像描述](https://i.stack.imgur.com/TE54e.png)

您将不得不替换坐标`37.416275`并`-122.025092`使用您自己的值，我可以得到 JSON 格式的响应。

**编辑**

在此[站点](http://developer.yahoo.com/boss/geo/docs/free_YQL.html)中，您可以找到更多信息。

# c# - 如何根据数据库字段宽度设置 Gridview 列宽？

> ID：16017923
> 
> 赞同：0
> 
> 时间：2013-04-15T14:35:59.960
> 
> 标签：c#, winforms, desktop-application, gridviewcolumn

我是 Windows 桌面应用程序开发的新手。

我有一个网格，其中显示了打印账单的客户列表。

表格看起来像[这样](http://i.imgur.com/h6N95nG.png)。

此表单中的网格显示所有客户的列表，它在`Form_Load()`我的代码中是：

```
private void SearchForm_Load(object sender, EventArgs e)
{   
    cn = db.createConnection();
    if (cn.State == System.Data.ConnectionState.Open)
        cn.Close();
    cn.Open();
    cmd = new OleDbCommand("Select BillNo,PartyName,Address,City,State,BillDt from BillMaster", cn);
    da = new OleDbDataAdapter(cmd);
    ds = new DataSet();
    da.Fill(ds);
    cn.Close();
    dataGridView1.DataSource = ds.Tables[0];
    ds.Dispose();
} 
```

但是`PartyName`字段的宽度太短，无法阅读全名。我想自定义所有字段的大小。怎么做？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:42:03.810

[AutoResizeColumns](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.autoresizecolumns.aspx)是您要找的。

```
dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells; 
```

> AllCells - 调整列宽以适应列中所有单元格的内容，包括标题单元格。

另外，看看[DataGridViewAutoSizeColumnMode 枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewautosizecolumnmode.aspx)

# jquery - Ajax 请求在 10 多个请求后开始失败

> ID：16017925
> 
> 赞同：2
> 
> 时间：2013-04-15T14:36:03.277
> 
> 标签：jquery, ios, cordova, jquery-mobile, mobile-safari

我正在编写一个 iOS PhoneGap 应用程序。我有大量使用 jQuery $.get() 方法加载数据的代码。我使用相同的技术从本地应用程序目录中加载一些 html 片段。这意味着，当我从一个页面导航到另一个页面时，我使用 $.get() 请求 HTML 内容。到目前为止一切都很好。

问题是，在使用我的应用程序（在 Safari 上测试）后不久，所有 ajax 调用都开始失败。我得到的错误信息是：

> 加载资源失败：操作无法完成。（kCFErrorDomainCFNetwork 错误 1。）

除非我完全刷新页面，否则我不会让它工作。有没有人见过这个？

# cocoa - 检测是否在 Cocoa 中设置了自定义文件图标

> ID：16017927
> 
> 赞同：2
> 
> 时间：2013-04-15T14:36:08.413
> 
> 标签：cocoa, icons, nsurl

我编写了一个为某些文件设置自定义图标的应用程序，但是由于创建这样的图标非常昂贵，我想测试之前是否已经设置了自定义图标。对于自定义图标，我的意思是一个不是 OS X 设置的默认图标的图标。特别是，我可以为具有相同类型的不同文件设置不同的图标。

我已经尝试过检查`[NSURL resourceValuesForKeys:[NSArray arrayWithObjects:NSURLCustomIconKey,NSURLEffectiveIconKey,nil] error:nil]`，但是与之关联的对象`NSURLEffectiveIconKey`总是非零，`NSURLCustomIconKey`即使我调用它似乎也是零`[NSURL setResourceValue:myNonNilImage forKey:NSURLCustomIconKey error:nil]`。

顺便调用`[[NSWorkspace sharedWorkspace] setIcon:myImage forFile:myFilename options:0]`似乎是更改 Finder 中显示的图标的唯一方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T22:57:09.800

NSURLCustomIconKey 总是返回 nil 因为没有实现对这个键的支持。标题中提到了这一基本信息，但 NSURL 文档中没有。在支持之前，获取此信息的一种方法是通过已弃用的文件管理器方法：

```
- (BOOL)fileHasCustomIcon:(NSString *)path {
    FSRef ref;
    FSCatalogInfo info;

    if (FSPathMakeRef((const UInt8 *)[path fileSystemRepresentation], &ref, NULL) == noErr) {
        if (FSGetCatalogInfo(&ref, kFSCatInfoFinderInfo, &info, NULL, NULL, NULL) == noErr) {
            FileInfo *fileInfo = (FileInfo *)(&info.finderInfo);
            return (fileInfo->finderFlags & kHasCustomIcon) != 0;
        }
    }

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:29:22.167

[NSWorkspace](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/setIcon%3aforFile%3aoptions%3a)的文档说`setIcon:forFile:options:`如果成功则返回 YES。

有了这些信息，您可以简单地切换一个 NSUserDefault 布尔值。这是我使用的一些代码：

```
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"iconImageSaved"]) {
    if ([[NSWorkspace sharedWorkspace] setIcon:myImage forFile:myFilename options:0])
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"iconImageSaved"];
} 
```

希望这可以帮助

# java - EditText 键盘输入类型问题

> ID：16017929
> 
> 赞同：1
> 
> 时间：2013-04-15T14:36:13.343
> 
> 标签：java, android, keyboard, android-edittext

哪个`EditText`键盘`Inputtype`组合可以帮助我获得以下视图。我尝试了几个问题，但没有。可能你们当中有人确实已经面临这个问题。

**我想要的是顶部的数字以及切换到符号和字母的可能性**

***如果使用触摸EditText，我想得到什么必须如下*** ![在此处输入图像描述](https://i.stack.imgur.com/e7X61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:48:05.520

您可以将以下属性添加到您的`EditText`in xml。

```
android:inputType="text|number" 
```

但是，您输入的某些字符将不会出现 - 与类型*编号*冲突的字符，例如**@ = ！**等等

为了在您的虚拟键盘中获得搜索按钮（在右下角），您可以使用：

```
android:imeOptions="actionSearch" 
```

* * *

更新将以下内容添加到您的 EditText 的 xml 中，它将在数字输入模式下为您提供键盘中可用的所有字符：

```
android:inputType="number"
android:digits="0123456789.@#$&amp;*-=()!&quot;':;/?" 
```

如果您想支持更多字符，只需将它们的**html 名称**附加到*android:digits*中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-15T14:49:58.950

尝试这个：

```
 <EditText
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:inputType="PutHereNestedInputType"
        /> 
```

[InputTypes](http://developer.android.com/intl/ru/reference/android/widget/TextView.html#attr_android%3ainputType)
希望对您有所帮助。

# c# - 使用 Rx 构建 Observable 存储库

> ID：16017931
> 
> 赞同：4
> 
> 时间：2013-04-15T14:36:16.560
> 
> 标签：c#, repository, observablecollection, system.reactive, reactive-programming

我在一个常见的场景中工作，我想访问存储库的一个子集，而不必担心必须保持更新，例如“获取价格大于 10 的所有订单”。我已经实施了一个解决方案，但有两个问题（最后列出）。

一个存储库的子集可以用相当于的东西来实现

`var expensiveOrders = Repository.GetOrders().Where(o => o.Price > 10);`

但这是一个`IEnumerable`并且不会在更新原始集合时更新。我可以添加处理程序`CollectionChanged`，但是如果我们想访问更多的子集怎么办？

```
var expensiveOrdersFromBob = expensiveOrders.Where(o => o.Name == Bob); 
```

我们还必须为这个连接一个集合更改。实时更新的概念让我想到了 Rx，所以我开始构建一个**ObservableCache**，它包含`ObservableCollection`自动更新的项目和用于通知的 RX 流。（流也是更新引擎盖下缓存的内容。）

```
class ObservableCache<T> : IObservableCache<T>
{
    private readonly ObservableCollection<T> _cache;
    private readonly IObservable<Tuple<T, CRUDOperationType>> _updates;

    public ObservableCache(IEnumerable<T> initialCache
       , IObservable<Tuple<T, CRUDOperationType>> currentStream, Func<T, bool> filter)
        {
          _cache = new ObservableCollection<T>(initialCache.Where(filter));
          _updates = currentStream.Where(tuple => filter(tuple.Item1));
          _updates.Subscribe(ProcessUpdate);
        }

    private void ProcessUpdate(Tuple<T, CRUDOperationType> update)
    {
        var item = update.Item1;
        lock (_cache)
        {
            switch (update.Item2)
            {
                case CRUDOperationType.Create:
                    _cache.Add(item);
                    break;
                case CRUDOperationType.Delete:
                    _cache.Remove(item);
                    break;
                case CRUDOperationType.Replace:
                case CRUDOperationType.Update:
                    _cache.Remove(item); // ToDo: implement some key-based equality
                    _cache.Add(item);
                    break;
            }
        }
    }

    public ObservableCollection<T> Cache
    {
        get { return _cache; }
    }

    public IObservable<T> Updates
    {
        get { return _updates.Select(tuple => tuple.Item1); }
    }

    public IObservableCache<T> Where(Func<T, bool> predicate)
    {
        return new ObservableCache<T>(_cache, _updates, predicate);
    }
} 
```

然后你可以像这样使用它：

```
var expensiveOrders = new ObservableCache<Order>(_orders
                                                 , updateStream
                                                 , o => o.Price > 10);
expensiveOrders.Updates.Subscribe
     (o => Console.WriteLine("Got new expensive order: " + o));
_observableBoundToSomeCtrl = expensiveOrders.Cache;

var expensiveOrdersFromBob = expensiveOrders
                             .Where(o => o.Name == "Bob");
expensiveOrdersFromBob.Updates.Subscribe
         (o => Console.WriteLine("Got new expensive order from Bob: " + o));
_observableBoundToSomeOtherCtrl = expensiveOrdersFromBob.Cache; 
```

依此类推，您可以继续将缓存投射到越来越窄的子集中，而不必担心它会不同步。那我的问题是什么？

1.  我想知道我是否可以通过让 RX 本质上更新集合来消除 CRUD 的东西。也许用 Select 或类似的东西“投影”更新？
2.  存储库更新模式固有的竞争条件，因为我在构建新缓存时可能会错过一些更新。我想我需要某种排序，但这意味着让我所有的 T 对象都实现一个`ISequenceableItem`接口。有没有更好的方法来做到这一点？RX 很棒，因为它为您处理所有线程。我想利用这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T11:26:09.100

[http://github.com/wasabii/OLinq](http://github.com/wasabii/OLinq)上的 OLinq 项目就是为这种反应式更新而设计的，我认为 ObservableView 就是您所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T13:46:27.517

看看这两个项目虽然通过不同的方式实现了你想要的东西：

[https://github.com/RolandPheasant/DynamicData](https://github.com/RolandPheasant/DynamicData)

[https://bitbucket.org/mendelmonteiro/reactivetables](https://bitbucket.org/mendelmonteiro/reactivetables) [免责声明：这是我的项目]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T18:54:37.713

假设您有这样的定义：

```
class SetOp<T>
{
    public T Value { get; private set; }
    public bool Include { get; private set; }
    public SetOp(T value, bool include)
    {
        Value = value;
        Include = include;
    }
} 
```

使用[`Observable.Scan`](https://msdn.microsoft.com/en-us/library/hh212007(v=vs.103).aspx)并且[`System.Collections.Immutable`](https://msdn.microsoft.com/en-us/library/system.collections.immutable(v=vs.111).aspx)您可以执行以下操作：

```
IObservable<SetOp<int>> ops = ...;
IImmutableSet<int> empty = ImmutableSortedSet<int>.Empty;
var observableSet = ops
    .Scan(empty, (s, op) => op.Include ? s.Add(op.Value) : s.Remove(op.Value))
    .StartWith(empty); 
```

使用不可变集合类型是这里的关键技巧：任何观察者都`observableSet`可以对推送给它的值做任何想做的事情，因为它们是不可变的。添加它是有效的，因为它在连续值之间重用了大部分集合数据结构。

这是一个`ops`流和相应的示例`observableSet`。

```
ops       observableSet
--------  ------------------
          {}
Add 7     {7}
Add 4     {4,7}
Add 5     {4,5,7}
Add 6     {4,5,6,7}
Remove 5  {4,6,7}
Add 8     {4,6,7,8}
Remove 4  {6,7,8} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:31:07.917

您不需要锁定`_cache`在`ProcessUpdate`. 如果您的源 observable`currentStream`遵守 Rx 指南，则保证您一次只能在一次调用中`OnNext`。换句话说，当您仍在处理前一个值时，您不会从流中接收另一个值。

解决竞争条件的唯一可靠方法是确保在`updateStream`开始生成数据之前创建缓存。

您可能想看看[Extensions for Reactive Extensions (Rxx)](http://rxx.codeplex.com/)。我相信 Dave 已经构建了许多用于将 UI 控件绑定到可观察数据的实用程序。文档很少。我不知道你在做什么。

# json - JBoss 7.1 上的 Seam 2.3 RESTEasy @JsonIgnore

> ID：16017934
> 
> 赞同：1
> 
> 时间：2013-04-15T14:36:25.350
> 
> 标签：json, jboss7.x, resteasy, seam2

如何实现在 JSON 输出中忽略某些属性（例如用于 XML 输出的 XmlTransient）？

```
@GET
@Path("/{companyId}")   
@Produces(MediaType.APPLICATION_JSON)
public PortfolioCompany getCompany(@PathParam("companyId") long id); 
```

我一直在玩 Seam 2.3 中的 RESTeasy-support，作为 JBoss 7.1 上的 EAR 部署。我首先将与 Seam-restbay-example 中相同的依赖项添加到我的 ejb 项目中。@Produces(MediaType.APPLICATION_XML) 基本上可以正常工作，其中所有使用 @XmlTransient 注释的属性都被忽略，以防止一些 LazyInitialisationExceptions。但是如何为@Produces(MediaType.APPLICATION_JSON) 实现这种行为？

我读过 Seam 默认使用 Jettison，它对 XML 和 JSON 都使用 @XmlTransient 注释（因为从技术上讲，它从 XML -> 转换为 JSON）。但是我得到一个“原因：org.codehaus.jackson.map.JsonMappingException：没有为类 org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer 找到序列化程序”，这表明它实际上正在使用 Jackson..？对于 Jackson 来说，有像 @JsonIgnore 这样的注释，但具有像 restbay 一样的 maven 依赖项——这“不能被解析为一个类型”。

```
/**
 * @return the contact
 */
@OneToOne(cascade=CascadeType.ALL,fetch=FetchType.LAZY)
@XmlTransient  // working for produces XML but not for JSON
//@JsonIgnore  = unknown type
public Contact getContact() {
return contact;
} 
```

有人对此有任何经验或提示吗？

谢谢

编辑：真的没有人需要使用 Seam 实现 REST 服务的惰性集合？

经过一番研究：

```
@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property ="@id") 
```

显然是需要的。但这仅在 Jackson 2.x 中提供。但是 seam2.3/jboss7 设置显然使用的是 Jackson 1.9...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T16:01:35.843

@XmlType/@XmlRootElement 的默认注解模式是捕获每个字段，包括来自休眠的惰性初始化器。在您的实体中使用 @XmlAccessorType(XmlAccessType.NONE) ，然后使用 @XmlElement 单独注释字段，以便只处理必要的字段

# ios - iOS：如果启用了“滑动删除”，我还应该有一个编辑按钮吗？

> ID：16017936
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:36:26.260
> 
> 标签：ios, user-experience

基本上，正如问题的标题所说：我想知道当我希望用户能够对单元格执行的所有操作都是删除并启用“滑动删除”时，拥有一个编辑按钮有多重要。如果没有编辑按钮，是否足够直观？iOS 用户都非常熟悉“滑动删除”吗？

如果我可以通过滑动删除，我宁愿没有编辑按钮，但用户怎么知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:41:30.517

这是个人喜好。我相信滑动删除更多的是超级用户功能，iOS新手可能找不到它，如果您看到Apple Message应用程序，两者都受支持，您可以滑动删除或按编辑然后删除。

但是，请参阅 Apple Notes 应用程序，滑动删除是删除笔记而不实际进入的唯一方法。

分析您的目标用户群并做出决定，或者尝试观察一些使用该功能的人。没有编辑按钮有什么原因吗？导航栏中还有其他内容吗？

正如 CodeBox 所说，这更像是一个用户体验讨论，而不是一个正确/错误的编程问题。

[https://ux.stackexchange.com/](https://ux.stackexchange.com/)

# php - PHP 中的 MySQL 查询问题

> ID：16017939
> 
> 赞同：-1
> 
> 时间：2013-04-15T14:36:31.317
> 
> 标签：php, mysql

我有以下代码：

```
<?php
    $host="database.com"; // Host name 
    $username="user"; // Mysql username 
    $password="password"; // Mysql password 
    $db_name="database"; // Database name 
    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB");

    $contact_id = mysql_real_escape_string($_GET['contact_id']);

    $sql="select ( if(month(now()) < 9, year(now()) - 1, year(now())) - year(dob) - if(month(dob)<9, 0, 1)  ) as ageOnLastSeptember from members_family where contact_id = '$contact_id' ";

    $result=mysql_query($sql);
    while($rows=mysql_fetch_array($result)){
        echo $rows['ageOnLastSeptember'];
    }
    mysql_close();
?> 
```

由于某种原因，它不起作用，我收到以下错误消息：

> 警告：mysql_fetch_array() 期望参数 1 是资源，在第 4702 行的 /record_view/index.php 中给出布尔值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:39:02.833

这意味着您的查询失败。如果您使用错误处理程序，您会知道这一点...

```
$result=mysql_query($sql) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:39:00.383

看起来SQL有问题尝试直接运行SQL。

另外看看使用mysqli/pdo mysql的功能很快就会被贬值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:40:31.573

[从另一个 SO 线程](https://stackoverflow.com/questions/2697438/mysql-fetch-array-expects-parameter-1-to-be-resource-problem)：

> 如果 mysql_query 失败，它会返回 false，一个布尔值。当您将它传递给 mysql_fetch_array 函数（需要一个 mysql 结果对象）时，我们会收到此错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T14:41:39.250

对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。所以选择不正确。在 phpmyadmin 或您拥有 bd 的地方单独尝试，看看它是否有效。

# c# - Fluent NHibernate：与自定义中间表的多对多关系问题

> ID：16017943
> 
> 赞同：2
> 
> 时间：2013-04-15T14:36:43.560
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

**（更新见底部）**

所以，我有两个对象（我们称它们为 ClassA 和 ClassB），它们表现出多对多的关系（ClassA 可以有多个 ClassB 对象，反之亦然）。

然而，与传统的多对多不同，实际的“关系”本身是一个对象，具有关于其他两个类之间的链接的不同信息（关系开始日期、关系名称等）

因此，我没有将其定义为 ClassA 和 ClassB 之间的多对多，而是定义了两个一对多关系（一个在 ClassA 上，一个在 ClassB 上）指向第三个中间类（我们称之为“关系”）。在结构上，我希望这些表看起来像这样：

```
 ClassA                      Relationship      
----------------              ----------------
      Id (PK)                       Id (PK)
     Name                          Name
  Description                    StartDate
                                 ClassA_Id (FK)
    ClassB                       ClassB_Id (FK)
---------------- 
      Id (PK)    
     Name        
  Description 
```

为了实现这一点，我设置了这样的映射（经过*大量*试验和错误）：

```
public ClassAMap()
{
    Id(x => x.Id);
    Map(x => x.Name);
    HasMany(x => x.Relationship)    
        .KeyColumn("ClassA_Id")
        .ForeignKeyConstraintName("FK_Relationship_ClassA")
        .LazyLoad()
        .Cascade.All()
        .Inverse();
}

public ClassBMap()
{
    Id(x => x.Id);
    Map(x => x.Name);
    HasMany(x => x.Relationship)    
        .KeyColumn("ClassB_Id")        
        .ForeignKeyConstraintName("FK_Relationship_ClassB")
        .LazyLoad()
        .Cascade.All()
        .Inverse();
}

public RelationshipMap()
{
    Id(x => x.Id);
    Map(x => x.CreatedDate);
    References(x => x.ClassAObject)
        .Column("ClassA_Id")
        .Cascade.SaveUpdate();
    References(x => x.ClassBObject)
        .Column("ClassB_Id")
        .Cascade.SaveUpdate();
} 
```

现在，对于添加/删除父对象，他的工作完全符合预期。例如，如果我创建一个新的 ClassA 和 ClassB，通过关系将它们链接起来，然后保存 ClassA，那么所有关联的记录都会添加到三个表中。同样，如果我删除相同的 ClassA，则 ClassA 记录和关系记录将被删除，但 ClassB 记录仍然存在（预期行为）。

但是，如果我只是尝试从其中一个父对象（例如`classA.Relationships.Remove(relationshipObject); classARepository.Update(classA);`）中删除关系，则会收到类似于以下内容的错误：

`NHibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [ClassB]`

`NHibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations) [Relationship#9]`

此外，如果我完全从数据库中重新加载 ClassA 对象并如上所述删除成员资格，那么它会正确执行，但不会从数据库中删除我的关系。

如何更改映射以实现我正在寻找的行为？

~~作为参考，这里概述了必须通过的场景：~~

~~*   使用关系添加新的 ClassA
    *   添加或更新 A/B 类/关系的记录*   删除现有的 A 类
    *   已删除 ClassA 和关系的记录
    *   ClassB 记录保留在表中~~
2.  ~~从 ClassA.Relationships 列表中删除关系；更新 A 类~~
    ~~*   从关系表中删除关系~~
    *   ~~A 类和 B 类记录保留~~

**更新：**根据@JamieIde 的回答，我提出了以下调整：

*   取消关系上对 ClassA 和 ClassB 的引用：

```
// NOTE, this is an example snippet to show the steps that need to be taken

using(var session = SomeSessionFactory().OpenSession())
{
    using (var transaction = session.BeginTransaction())
    {
        // preferably place these four lines in a public method on one of the objects
        classAObject.Relationships.Remove(relationship);
        classBObject.Relationships.Remove(relationship);
        relationship.ClassA = null;
        relationship.ClassB = null;

        transaction.Commit();
    }
} 
```

*   `.Cascade.All()`将 ClassA/ClassB更改为`Cascade.AllDeleteOrphan()`. 这可以防止 NHibernate 在清空关系对象上的引用后将空白记录插入到 ClassA 和 ClassB 表中

```
public ClassAMap()
{
    Id(x => x.Id);
    Map(x => x.Name);
    HasMany(x => x.Relationship)    
        .KeyColumn("ClassA_Id")
        .ForeignKeyConstraintName("FK_Relationship_ClassA")
        .LazyLoad()
        .Cascade.AllDeleteOrphan() // here's the key line
        .Inverse();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:54:57.517

您不需要更改映射，您需要将关系对象中一侧的引用设为空。

```
classA.Relationships.Remove(relationshipObject);
relationshipObject.ClassAObject = null;
session.Flush(); 
```

基本上，您需要小心维护关系的双方，以便内存中的对象图是正确的并且可以由 NHibernate 持久化。一个常见的做法是封装这个：

```
void RemoveRelationship(RelationshipObject relationshipObject)
{
    Relationships.Remove(relationshipObject);
    relationshipObject.ClassAObject = null;
} 
```

此外，您不太可能需要调用`Update`，只需刷新会话或（更好）提交事务。

# jquery - 保留来自 jquery getjson 的数据

> ID：16017948
> 
> 赞同：0
> 
> 时间：2013-04-15T14:36:57.963
> 
> 标签：jquery

我有这个代码：

```
$.getJSON(fupurl, function(data) {
       ups = data[url+forup].shares;
        console.log(ups);
    });
$.getJSON(fdownurl, function(data) {
       downs = data[url+fordown].shares;
       if(!downs)
       downs = 0;
        console.log(downs);
    });
console.log(ups); 
```

上面的代码在函数内部，变量 downs 和 ups 在它之前定义。我想将数据保留在这两个变量中以供以后使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:38:19.863

使变量全局化：

```
var ups, downs;
$.getJSON(fupurl, function(data) {
       ups = data[url+forup].shares;
        console.log(ups);
    });
$.getJSON(fdownurl, function(data) {
       downs = data[url+fordown].shares;
       if(!downs)
       downs = 0;
        console.log(downs);
    });
console.log(ups); 
```

# .net - 重写事件处理程序是一种不好的做法

> ID：16017956
> 
> 赞同：0
> 
> 时间：2013-04-15T14:37:13.760
> 
> 标签：.net

与从事件处理程序调用受保护的方法并覆盖受保护的方法相比，覆盖事件处理程序是一种不好的做法。

如果您覆盖事件处理程序，是否存在任何安全问题或任何副作用。

```
namespace Testing
{
  public class Owner
  {
    public event EventHandler<EventArgs> OnAction;
  }

  public class Foo
  {
    public Foo(Owner owner)
    {
       owner.OnAction += OnAction;
      owner.OnAction += OnAction2;
    }

    protected virtual void OnAction(object sender, EventArgs eventArgs)
    {
    }

    private void OnAction2(object sender, EventArgs eventArgs)
    {
      ProtectedMethod();
    }

    protected virtual void ProtectedMethod()
    {
    }
  }

  public class FooDerived: Foo
  {
    public FooDerived(Owner owner) : base(owner)
    {
    }

    protected override void OnAction(object sender, EventArgs eventArgs)
    {
      // Do Something
      base.OnAction(sender, eventArgs);
    }
  }

  public class FooDrived2: Foo
  {
    public FooDrived2(Owner owner) : base(owner)
    {
    }

    protected override void ProtectedMethod()
    {
      // Do something
      base.ProtectedMethod();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:50:20.217

我不会说重写事件处理程序的委托方法是不好的做法。这是一种与其他方法一样的方法。话虽如此，这不是我通常会做的事情。如果我需要任何类型的覆盖，我会用我的所有方法签名构建（并实现）一个接口。然后在接受的接口方法上将发生覆盖/隐藏/隐藏/任何事情，事件将只是负责调用适当接口方法的附加方法。

直接覆盖事件处理程序不会降低可读性（或可维护的 IMO）。接口只是我帮助测试和可扩展性的习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:31:19.410

我只能想到一种情况，其中覆盖事件处理程序会很有用。

假设您有一个事件，它为您提供给定类型的事件处理程序。如果您希望更改传递给将由处理程序调用的方法的参数，则可以覆盖它。否则，覆盖它们只是一个问题。

如果参数仍然相同（或者如果它们的类型是原始处理程序中声明的子类型）并且您希望派生类以不同的方式处理事件，那么您应该覆盖它的方法。

# c - 访问 C 中现有函数的最佳实践？

> ID：16017957
> 
> 赞同：0
> 
> 时间：2013-04-15T14:37:15.630
> 
> 标签：c, function, prototype

假设我正在处理一个大型项目，我需要访问名为 example.c 的源文件中的函数 foo()。foo() 的原型也在 example.c 中声明。example.c 没有特定于该文件的头文件，例如 example.h。从我正在处理的新源文件中访问 example.c 的 foo() 的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T14:38:23.137

如果没有声明函数的头文件，则该函数可能不打算用作接口。它仅适用于声明它的翻译单元。

1.  检查并确认为什么设计没有将其作为接口公开。
2.  一旦您确认 #1，并且通过外部 TU 使用它没有发现任何问题，然后在头文件中添加函数声明。在 TU 中包含使用它开始的头文件，并在 TU 中包含要使用此功能的头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:39:15.100

如果 example.c 不包含 main() 函数，您可以这样做

```
#include <example.c> 
```

让您的代码访问文件中的 foo() :)

# dll - g++：无法识别的选项“-static-libstdc++”

> ID：16017959
> 
> 赞同：4
> 
> 时间：2013-04-15T14:37:23.567
> 
> 标签：dll, g++, mingw

我正在尝试使用以下命令链接 DLL： `g++ -DFTCSPI_EXPORTS -shared -fpic -static-libgcc -static-libstdc++ tmp\*.o "%D2XX_Dir%\ftcspi.lib" "%TclLibFile%" -o tmp\ftcspiif.dll`

我收到此错误：`g++: unrecognized option '-static-libstdc++'`

我检查了我在 C:\MinGW\bin 中有 libstdc++-6.dll，我的 gcc 版本是 4.4.7。

有没有人有任何想法可能会发生什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:46:28.927

> 我的 gcc 版本是 4.4.7。

该`-static-libstdc++`选项于 2009 年在此[补丁](http://gcc.gnu.org/ml/gcc-patches/2009-06/msg01635.html)中添加。带有此标志的第一个发布的 GCC 版本[是 4.5](http://gcc.gnu.org/gcc-4.5/changes.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T22:00:55.470

正如 Employed Russian 所说，从 4.5 版开始，-static-libstdc++ 标志已添加到 GCC。

不过，根据您对他的回答的评论，如果您在安装/重新安装/升级 MinGW 时遇到问题，我强烈建议您查看[http://tdm-gcc.tdragon.net/](http://tdm-gcc.tdragon.net/)，因为它们提供了最新的安装程序适用于 32 位和 64 位风格的 MinGW 环境。他们还为环境应用了各种补丁，但如果您有特定要求或只想坚持使用 vanilla MinGW 环境，您可以选择不同版本的各种软件包进行安装。

# c++ - 导致崩溃的 wmemcpy 和 wcscpy 函数

> ID：16017966
> 
> 赞同：0
> 
> 时间：2013-04-15T14:37:39.200
> 
> 标签：c++, winapi, memory, copy, cstring

我正在尝试将宽 c 字符串从一个地方复制到另一个地方。我在 windows8 64 位平台上使用 Visual Studio 2012 express。除非我尝试在使用 Windows7 x64 的主计算机上运行该应用程序，否则它工作得非常好。它立即崩溃。没有异常错误，尽管它是一个没有任何可跟踪错误代码的混乱崩溃。如果您需要有关崩溃本身的更多具体信息，我将尝试提供。当我注释掉复制程序时，它工作得很好。所以很明显问题出在函数本身。这是执行所有复制的行：

```
virtual void CClass::ChangeText();
void CClass::ChangeText(float _f)
{
    std::wstringstream wss;
    wss << _f;
    wcscpy(const_cast<wchar_t *>(this->m_lpszWideText),wss.str().c_str());
} 
```

^ 在 win7 上崩溃/在 win8 上工作

我的疯狂猜测是新编译器使用了新版本的 wmemcpy，它在 Windows 7 上不起作用？程序不应该只在到达函数调用行时才崩溃吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:44:27.360

字符串复制算法的崩溃通常有两个来源：

1.  您的源不是 NULL-Terminated 在您的示例中，情况并非如此，因为您从 wstringstream::c_str() 中提取它

2.  您的 Destination 不够大，无法处理源数据，因此写入超出 Bounds。这可能是您崩溃的原因，意味着您的 this->m_lpszWideText 太小（请给出它的声明，如果它是动态分配的，请告诉我们如何。）

# ruby-on-rails - 由于 Rails env 启动，后台工作任务需要花费大量时间

> ID：16017968
> 
> 赞同：2
> 
> 时间：2013-04-15T14:37:42.060
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, foreman

我每分钟都在运行 rake 任务，这些任务目前大约每分钟都在实例化 Rails 环境，作为带有`Foreman`cron gem 的工作人员。我担心仅启动 Rails 会消耗大约 90% 的处理器，每次大约 20 秒。处理这样的事情的最有效方法是什么，需要 Rails 环境来访问数据库和一些库，但不应该如此频繁地启动整个系统？

除此之外，还有一些其他工人需要开始工作，因此情况更加复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:02:31.843

如果我是你，我会查看一些异步消息传递框架：[Resque 与 Sidekiq？](https://stackoverflow.com/questions/11580954/resque-vs-sidekiq). 这些 Rails 只需要加载一次，并且进程可以在必要时重用该 Rails。我认为这是通过分叉完成的。不太确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:32:32.473

对于每 30 秒运行一次的赔率刮板，我们遇到了类似的问题，切换到 resque 和 resque-scheduler 是更好的方法。

[https://github.com/bvandenbos/resque-scheduler](https://github.com/bvandenbos/resque-scheduler)

[http://railscasts.com/episodes/271-resque](http://railscasts.com/episodes/271-resque)

[http://railscasts.com/episodes/366-sidekiq](http://railscasts.com/episodes/366-sidekiq)

# jquery - 使用 div 高度作为 marginTop

> ID：16017973
> 
> 赞同：1
> 
> 时间：2013-04-15T14:37:56.430
> 
> 标签：jquery, variables, height

我需要制作一个简单的动画，但问题是它们的内容块的高度没有设置（取决于其中有多少文本）。所以我想我需要知道 contentblock 的高度并将该数字放在 marginTop 中。但正如你所知道的，我不知道该怎么做。

```
$('nav').hide().fadeIn(1200, function(){
    $('#content_home').animate({
    marginTop: '-50px'},1000);    
}); 
```

这是我用于动画的 jQuery 代码。所以我需要#content_home 的高度并将其放在marginTop 值中。

我想我需要编写一个函数来计算高度并将其放入一个变量中，并且我需要将该变量放入 marginTop 值中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:43:35.577

```
var result = $("#content_home").height(); 
```

您还可以使用其他功能`.innerHeight()`，例如`.outerHeight()`哪一​​个适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:44:21.713

你试过[.height()](http://api.jquery.com/height/)吗？

```
$('nav').hide().fadeIn(1200, function(){
    var contentHomeHeight = $('#content_home').height();
    $('#content_home').animate({
    marginTop: contentHomeHeight },1000);    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:44:36.807

我想你回答了你自己的问题：

> 我想我需要编写一个函数来计算高度并将其放入一个变量中，并且我需要将该变量放入 marginTop 值中。

您可以使用 .height() 函数简单地计算某物的高度：

```
$('nav').hide().fadeIn(1200, function(){
    var height = ($('#contentblock').height() * -1);

    $('#content_home').animate({
    marginTop: height},1000);    
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T14:45:13.823

你不能只在 jQuery $('#content_home') 元素上使用 .height() 方法吗？

# xml - xml 验证器不起作用

> ID：16017974
> 
> 赞同：1
> 
> 时间：2013-04-15T14:37:57.943
> 
> 标签：xml, xml-validation

我试图在 xml 验证器中将此文档检查到 Firefox 中。
但这次检查是成功的。
我想知道为什么？这是根据DTD的一些错误：

`from CDATA #FIXED "Kathy Shepherd"`

在此之后`note`-`from="someone else">`

也许存在，另一种在浏览器上验证 xml 文档的方法。

**代码：**

```
<?xml version="1.0" ?>
<!DOCTYPE note      [
<!ELEMENT note      (message)>
<!ELEMENT message   (#PCDATA)>
<!ATTLIST message
         number CDATA #REQUIRED
         date CDATA   #REQUIRED
         from CDATA   #FIXED "Kathy Shepherd">
                    ]>
<note>
    <message number="10" date="041513" from="someone else">
        Remember to buy milk on the way home from work
    </message>
</note> 
```

**问题：**

*   如何以正确的方式进行这种 XML 检查（可能在其他一些浏览器上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:43:35.320

Web 浏览器不实现验证 XML 解析器。他们只关心文档是否格式正确。

如果要执行验证，请使用[W3C Markup Validation Service](http://validator.w3.org/)之类的验证器。

# c# - 将日期时间显示为 MM/dd/yyyy HH:mm 格式 c#

> ID：16017979
> 
> 赞同：3
> 
> 时间：2013-04-15T14:38:16.393
> 
> 标签：c#, asp.net, datetime

在数据库中，日期时间存储在 MM-dd-yyyy HH:mm:ss fromat 中。
但是，我想以“MM/dd/yyyy HH:mm”格式显示日期时间。我通过使用 String.Format() 进行了尝试。

```
txtCampaignStartDate.Text = String.Format("{0:MM/dd/yyyy 
                           HH:mm}",appCampaignModel.CampaignStartDateTime); 
```

这是具有**“MM-dd-yyyy HH:mm”**格式`appCampaignModel.CampaignStartDateTime`值的 DateTime 对象。

 **我想以**“MM/dd/yyyy HH:mm”**格式显示。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T14:42:39.933

这种格式的斜线`MM/dd/yyyy HH:mm`表示：“用当前文化的实际分隔符替换我”。您必须`CultureInfo.InvariantCulture`明确使用：

```
txtCampaignStartDate.Text = appCampaignModel.CampaignStartDateTime.ToString("MM/dd/yyyy HH:mm", CultureInfo.InvariantCulture); 
```

[**“/”自定义格式说明符**](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dateSeparator)

> 在数据库中，日期时间存储在 MM-dd-yyyy HH:mm:ss fromat 中。

不要`datetimes`以格式存储，这意味着您将它们存储为`(n)varchar`. 改为使用`datetime`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T14:41:11.607

```
txtCampaignStartDate.Text = appCampaignModel.CampaignStartDateTime
                                         .ToString().Replace("-","/"); 
```

或者

```
String.Format("{0:MM/dd/yyyy HH:mm}", dt); 
```

检查：[日期时间的字符串格式 [C#]](http://www.csharp-examples.net/string-format-datetime/)

或者

```
String date = dt.ToString("MM/dd/yyyy HH:mm", DateTimeFormatInfo.InvariantInfo); 
```

[DateTime.ToString 方法（字符串，IFormatProvider）](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T14:40:39.427

为什么不只是简单的替换？

```
txtCampaignStartDate.Text = BadString.Replace("-","/"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T15:05:12.207

要以您指定的格式显示您的日期：

```
txtCampaignStartDate.Text = appCampaignModel.CampaignStartDateTime.ToString("g",DateTimeFormatInfo.InvariantInfo) 
```

对于更多日期时间格式，您可以通过此[链接。](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T14:42:29.050

尝试使用添加的文化信息：

```
CultureInfo ci = new CultureInfo("en-US");
txtCampaignStartDate.Text = 
    appCampaignModel.CampaignStartDateTime.ToString("MM/dd/yyyy HH:mm", ci); 
```

ps 使用的文化信息就是一个例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T14:44:02.240

由于您已经有一个 DateTime 对象，因此只需 ToString 即可：

```
appCampaignModel.CampaignStartDateTime.ToString("MM/dd/yyyy HH:mm"); 
```**

# ruby - 为什么读取 CSV 文件时会有尾随列？

> ID：16017982
> 
> 赞同：3
> 
> 时间：2013-04-15T14:38:19.830
> 
> 标签：ruby, parsing, csv, multiple-columns, ruby-parser

我有一个 CSV 文件，其结构如下：

```
"customer_id";"customer_name";"quantity";
"id1234";"Henry";"15"; 
```

使用 Ruby 的标准 CSV 库进行解析：

```
csv_data = CSV.read(pathtofile,{
    :headers => :first_row,
    :col_sep => ";",
    :quote_char => '"'
    :row_sep => "\r\n" #setting it to "\r" or "\n" results in MalformedCSVError
})

puts csv_data.headers.count #4 
```

我不明白为什么解析似乎会导致四列，尽管文件只包含三列。这不是解析文件的正确方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:40:28.087

每行`;`末尾的 表示另一个字段，即使没有值。

我要么删除尾随`;`的，要么在解析第四个字段时忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:57:22.863

拖尾`;`是罪魁祸首。

您可以预处理文件，去除尾随`;`，但这会产生不必要的开销。

您可以使用以下方式对从 CSV 返回的数据数组进行后处理：

```
csv_data = CSV.read(...).map(&:pop) 
```

这将遍历子数组，删除每个子数组中的最后一个元素。问题是它`read`不可扩展，因此您可能需要重新考虑使用它，而是使用`CSV.foreach`逐行读取文件，然后在返回给您时弹出最后一个值。

# android - Android列表视图向右/向左滑动，如通话记录

> ID：16017988
> 
> 赞同：30
> 
> 时间：2013-04-15T14:38:22.673
> 
> 标签：android, android-layout, listview, android-animation, swipe

我有一个 Android 应用程序，其中有像这样的列表视图

![在此处输入图像描述](https://i.stack.imgur.com/vjkBK.jpg)

现在我想以相同的方式在列表项的右/左滑动上执行两个不同的活动本机呼叫日志的工作原理

向右滑动列表

![在此处输入图像描述](https://i.stack.imgur.com/DTTGa.jpg)

我想要这种类型的滑动。任何人都可以知道如何实现它。基本上我想实施`SimpleOnGestureListener`.

我已经阅读了**gav** [Fling 先生在网格布局上的手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)回答的帖子，之后我成功地实现了向左滑动和向右滑动检测，但我唯一没有看到发生滑动的列表项。

**2013 年 5 月 24 日**更新****

 **现在我可以使用此代码检测滑动动作——

**SwipeDetector.java**

```
/**
 * Class swipe detection to View
 */
public class SwipeDetector implements View.OnTouchListener {

    public static enum Action {
        LR, // Left to right
        RL, // Right to left
        TB, // Top to bottom
        BT, // Bottom to top
        None // Action not found
    }

    private static final int HORIZONTAL_MIN_DISTANCE = 30; // The minimum
    // distance for
    // horizontal swipe
    private static final int VERTICAL_MIN_DISTANCE = 80; // The minimum distance
    // for vertical
    // swipe
    private float downX, downY, upX, upY; // Coordinates
    private Action mSwipeDetected = Action.None; // Last action

    public boolean swipeDetected() {
        return mSwipeDetected != Action.None;
    }

    public Action getAction() {
        return mSwipeDetected;
    }

    /**
     * Swipe detection
     */@Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            {
                downX = event.getX();
                downY = event.getY();
                mSwipeDetected = Action.None;
                return false; // allow other events like Click to be processed
            }
        case MotionEvent.ACTION_MOVE:
            {
                upX = event.getX();
                upY = event.getY();

                float deltaX = downX - upX;
                float deltaY = downY - upY;

                // horizontal swipe detection
                if (Math.abs(deltaX) > HORIZONTAL_MIN_DISTANCE) {
                    // left or right
                    if (deltaX < 0) {

                        mSwipeDetected = Action.LR;
                        return true;
                    }
                    if (deltaX > 0) {

                        mSwipeDetected = Action.RL;
                        return true;
                    }
                } else

                // vertical swipe detection
                if (Math.abs(deltaY) > VERTICAL_MIN_DISTANCE) {
                    // top or down
                    if (deltaY < 0) {

                        mSwipeDetected = Action.TB;
                        return false;
                    }
                    if (deltaY > 0) {

                        mSwipeDetected = Action.BT;
                        return false;
                    }
                }
                return true;
            }
        }
        return false;
    }

} 
```

现在以这种方式将它与您的 ListView 一起使用

```
 // Set the touch listener
    final SwipeDetector swipeDetector = new SwipeDetector();
    lv.setOnTouchListener(swipeDetector); 
```

在您的`setOnItemClickListener`中，您可以检测到像这样的滑动事件

```
lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView <? > parent, View view,
        int position, long id) {

        if (swipeDetector.swipeDetected()) {
            if (swipeDetector.getAction() == SwipeDetector.Action.LR) {

                Toast.makeText(getApplicationContext(),
                    "Left to right", Toast.LENGTH_SHORT).show();

            }
            if (swipeDetector.getAction() == SwipeDetector.Action.RL) {

                Toast.makeText(getApplicationContext(),
                    "Right to left", Toast.LENGTH_SHORT).show();

            }
        }
    }
}); 
```

但我仍然无法像这样为滑动设置动画：

![在此处输入图像描述](https://i.stack.imgur.com/O44mw.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-15T11:02:53.840

OnSwipeTouchListener.java：

```
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class OnSwipeTouchListener implements OnTouchListener {

    private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

    public boolean onTouch(final View view, final MotionEvent motionEvent) {

        super.onTouch(view, motionEvent);
        return gestureDetector.onTouchEvent(motionEvent);

    }

    private final class GestureListener extends SimpleOnGestureListener {

        private static final int SWIPE_THRESHOLD = 100;
        private static final int SWIPE_VELOCITY_THRESHOLD = 100;

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            boolean result = false;
            try {
                float diffY = e2.getY() - e1.getY();
                float diffX = e2.getX() - e1.getX();
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffX > 0) {
                            onSwipeRight();
                        } else {
                            onSwipeLeft();
                        }
                    }
                } else {
                    if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffY > 0) {
                            onSwipeBottom();
                        } else {
                            onSwipeTop();
                        }
                    }
                }
            } catch (Exception exception) {
                exception.printStackTrace();
            }
            return result;
        }
    }
    public void onSwipeRight() {}
    public void onSwipeLeft() {}
    public void onSwipeTop() {}
    public void onSwipeBottom() {}
} 
```

用法：

```
imageView.setOnTouchListener(new OnSwipeTouchListener() {

    public void onSwipeTop() {
        Toast.makeText(MyActivity.this, "top", Toast.LENGTH_SHORT).show();
    }
    public void onSwipeRight() {
        Toast.makeText(MyActivity.this, "right", Toast.LENGTH_SHORT).show();
    }
    public void onSwipeLeft() {
        Toast.makeText(MyActivity.this, "left", Toast.LENGTH_SHORT).show();
    }
    public void onSwipeBottom() {
        Toast.makeText(MyActivity.this, "bottom", Toast.LENGTH_SHORT).show();
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:31:27.063

您可以使用 Fragments 来满足此要求。使用 FragmentPagerAdapter 并覆盖 getItem(int position) 它将返回片段。将适配器设置为 viewPager 并在 setOnPageChangeListener 中，您可以拥有调用不同片段的逻辑。

什里谢尔**

# windows - 为什么 x64 项目使用 16 的默认打包对齐方式？

> ID：16017996
> 
> 赞同：5
> 
> 时间：2013-04-15T14:38:51.973
> 
> 标签：windows, visual-studio-2012, 64-bit

如果您在 VS2012 中的 x64 项目中编译以下代码而没有任何 /Zp 标志：

```
#pragma pack(show) 
```

然后编译器会吐出：

```
value of pragma pack(show) == 16 
```

如果项目使用 Win32 那么编译器会吐出：

```
value of pragma pack(show) == 8 
```

我不明白的是，Win64 中任何类型（即：long long 和指针）的最大自然对齐方式是 8。那么为什么不将 x64 的默认对齐方式设为 8 呢？

与此相关，为什么有人会使用 /Zp16？

编辑：

这是一个例子来说明我在说什么。尽管对于 x64，指针具有 8 字节的自然对齐，但 Zp1 可以强制它们到 1 字节边界。

```
struct A
{
    char a;
    char* b;
}

// Zp16
// Offset of a == 0
// Offset of b == 8

// Zp1
// Offset of a == 0
// Offset of b == 1 
```

现在，如果我们举一个使用 SSE 的例子：

```
struct A
{
    char a;
    char* b;
    __m128 c; // uses declspec(align(16)) in xmmintrinsic.h
}

// Zp16
// Offset of a == 0
// Offset of b == 8
// Offset of c == 16

// Zp1
// Offset of a == 0
// Offset of b == 1
// Offset of c == 16 
```

如果 __m128 确实是内置类型，那么我希望 Zp1 的偏移量为 9。但是由于它在 xmmintrinsic.h 中的定义中使用了 __declspec(align(16))，所以它胜过任何 Zp 设置。

所以这是我的问题，措辞有点不同：'c' 的类型是否自然对齐为 16B，但在前面的示例中偏移量为 9？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:44:32.867

此处的[MSDN 页面](http://msdn.microsoft.com/en-us/library/83ythb65.aspx)包含有关您的问题“为什么不为 x64 设置默认对齐 8？”的以下相关信息：

> 编写使用最新处理器指令的应用程序引入了一些新的限制和问题。特别是，许多新指令要求数据必须与 16 字节边界对齐。此外，通过将常用数据与特定处理器的高速缓存行大小对齐，可以提高高速缓存性能。例如，如果您定义一个大小小于 32 字节的结构，您可能希望将其对齐为 32 字节，以确保有效缓存该结构类型的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:30:57.297

> 为什么 x64 项目使用 16 的默认打包对齐方式？

在 x64 上，浮点在 SSE 单元中执行。你说最大的类型有对齐 8。但这是不正确的。某些 SSE 内在类型，例如[`__m128`](http://msdn.microsoft.com/en-us/library/ayeb3ayc.aspx)，具有 16 位对齐。

# jquery - 在另一个绑定之前插入 jQuery 绑定

> ID：16017997
> 
> 赞同：2
> 
> 时间：2013-04-15T14:38:55.503
> 
> 标签：jquery, binding

在 jQuery 中，我试图向已经有一个“提交”绑定的表单添加一个“提交”绑定，但我需要在预先存在的绑定之前触发新的（第二个）绑定（回调）。

有没有办法让我插入一个绑定，以便它在已经附加的绑定之前触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:45:04.643

你可以使用`$._data( $("#myform")[0], "events" ).submit`

查看单击事件的示例 jsfiddle：

[http://jsfiddle.net/X9hat/](http://jsfiddle.net/X9hat/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:48:47.313

使用未记录的对绑定函数的访问，假设您的表单具有 id `a`，您可以像这样颠倒处理程序调用的顺序：

```
[].reverse.call($._data($('#a').get(0)).events.submit); 
```

[演示](http://jsbin.com/izabuv/1/edit)（点击“用JS运行”，打开控制台，然后点击“点击”按钮）

请注意，此结构[未记录且不保证](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)：

> 请注意，这不是受支持的公共接口；实际数据结构可能因版本而异。

所以真正的解决方案是更改第一个绑定代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T14:43:23.287

在回调中触发第一个绑定到新的（第二个）绑定：[How to order events bound with jQuery](https://stackoverflow.com/questions/290254/how-to-order-events-bound-with-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:01:10.773

我知道这有点晚了，但是[jQuery 在 v1.7 及更高版本中公开了这一点](http://api.jquery.com/category/callbacks-object/)。我有一个会议，当我回来时会把它变成一个工作示例......如果我回来......祝我好运。

[#fiddle](http://jsfiddle.net/dfygrvty/CdkUb/) 这会关闭点击事件，但您可以将其切换为通过思考提交

# html

从 jsfiddle 重新发布 html

```
<form>
    <p>before click</p>
    <button type="button">start</button>
</form> 
```

# javascript

从 jsfiddle 重新发布 javascript

```
var $elem = $("button"), //jqElementObject
    elem=$elem[0], //html element object
    eventNameKey="click", //name of the event we want to alter
    eventHandlerKey="handler"; //jQuery private object reference to get the actual function ref

 $elem.click(function(ev){
     //this happens somewhere else, pretend we can't control it per your comments
    console.log("1");
    ev.preventDefault();
  $("p").text($("p").text()+"<div>first binding</div>");
});
//this is ours, we can control this
function submitControler(ev){
        console.log("2");
  ev.preventDefault();
  $("p").text($("p").text()+"<div>second binding</div>");
    //uncomment below to stop propogation
    //return false;
}
$elem.click(submitControler); //actually register our event
$elem.click(function(ev){ //third event for some fun
ev.preventDefault();
  $("p").text($("p").text()+"<div>third binding</div>");
});

 var officialEvents = $._data(elem,"events"), //jQuery official Private events
    ourSubmitEvents = $.Callbacks("unique stopOnFalse"); //default Callbacks values promises to behave like a standard events list, however, you want your event to fire first, then others to proceed if it returns true.  also, no duplicates just because.

//I'm running out of time, so i went with a for loop. I wanted a way to find our event where the registration order was not guaranteed, feel free to go for something better
for(var event = officialEvents[eventNameKey].length-1; event >-1; event--){
    if(officialEvents[eventNameKey][event][eventHandlerKey] ===submitControler){
      ourSubmitEvents.add(officialEvents[eventNameKey][event][eventHandlerKey]);
      console.log("added primary controler");
      break;
    }
}
//add in everyone else to our list, again, i'm out of time and a for loop was the first thought i had.  feel free to improve
for(var event = 0; event < officialEvents[eventNameKey].length; event++){
    if(officialEvents[eventNameKey][event][eventHandlerKey] !==submitControler){
      ourSubmitEvents.add(officialEvents[eventNameKey][event][eventHandlerKey]);
        console.log("added secondary controler");
    }
}
//this is our event scheduler, it will be first to execute, and calls our manually re-ordered 'ourSubmitEvents' object. ('ourSubmitEvents' becomes 'ev.data')
$elem.on({"click":function(ev){
    ev.preventDefault();
  ev.data.fire(ev);
}},null,ourSubmitEvents);
//remove the other events, except the one we just registered.
$._data(elem,"events")[eventNameKey].splice(0,officialEvents[eventNameKey].length-1); 
```

# git - 由于审批机制从SVN迁移到GIT

> ID：16017999
> 
> 赞同：2
> 
> 时间：2013-04-15T14:38:59.607
> 
> 标签：git, svn, gitlab, git-workflow

我们目前在做一个非开源项目，团队大约 50 人，平均每天提交 20-30 次。由于其中一些人是初级开发人员，我们必须实现一个不允许所有人都提交到我们的主存储库的系统。

到目前为止，我们使用的是具有这种结构的 SVN：

*   trunk - 包含所有开发人员代码
*   分支 - 包含所有经过验证的代码

有时，一位资深开发人员*“进入”*主干并将其与分支合并，拒绝所有未批准的代码（当有大量未批准的代码要恢复时，这会变得很疯狂）。最后，当主干只有批准的代码时，两者之间会完全合并。

最近我们开始用 Git 和 GitLab 进行一些测试，看看 Git 审批系统是否值得从 SVN 迁移，以缓解所有这些疯狂的合并。

起初它看起来很有希望，但过了一段时间我们得出了一个令人失望的结论，即没有*神奇的公式*。我们创建了一个受保护的主分支，只有高级开发人员才能访问将更改推送到其中，但随后出现了有问题的部分……初级开发人员。

也许是因为我们太习惯了 SVN 的方式，我们找到的唯一解决方案是创建一个*“初级分支”*，但这基本上会模仿我们已经使用 SVN 的行为（和令人头疼的问题）。

请告诉我我们遗漏了什么，或者我们是否以错误的方式处理问题。

**编辑** 当我说批准的代码时，我指的是对所有类结构的验证、正确的对象实例化......而不是换行符、制表符（和类似的）是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:43:14.430

当 GitLab 使用 Gitolite 时，这种策略很容易设置，[因为 VREF](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358)。

您可以将更新挂钩与 gitolite 规则相关联，该规则可以为称为“初级”的一组用户（GitLab 中的团队）定义，并执行您想要的任何策略。

但从 GitLab 5.x 开始，gitolite 不再使用，[`gitlab-shell`](https://github.com/gitlabhq/gitlab-shell)而是管理权限。
希望[问题 14](https://github.com/gitlabhq/gitlab-shell/issues/14)将得到解决。
同时，您需要自己实施和部署更新挂钩，以便为初级开发人员推送到特定分支执行策略。

正如所评论的，另一种方法是：

*   不将所说的初级开发人员添加到项目中
*   fork（在服务器上克隆）项目：该功能正在为 GitLab V5（[问题 3382](https://github.com/gitlabhq/gitlabhq/pull/3382)）开发
*   现在提出一个拉取请求（称为“合并请求”）。

考虑到 GitLab 的当前开发状态​​，*仅*Git 管理软件还没有准备好提供您需要的一切。

将这些 repos（主要的，以及面向初级开发人员的）与像[Gerrit](http://code.google.com/p/gerrit/)这样的审查系统结合起来可能是一种更明智的方法（[这里是对这种组合的一个有趣的批评](http://www.youtube.com/watch?v=DyAX8ws5OIc)）。